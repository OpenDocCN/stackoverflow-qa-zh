# StackOverflow 问答 11988000-11988999

# jquery - 隐藏按钮但有空格

> ID：11988000
> 
> 赞同：0
> 
> 时间：2012-08-16T13:16:00.620
> 
> 标签：jquery, html, css

我有这个系统，我决定隐藏所有按钮，然后（在页面底部）使它们再次作为 jQuery 按钮可见。

一开始：

```
$('button').hide(); 
```

最后：

```
$('button').button(...button options yadda yadda...); 
```

我的脚本按照推荐加载在页面底部。

当页面呈现时，它呈现没有按钮，并且不呈现它们的空白区域。但是，当 jquery 开始行动时，页面会轻弹并扩展将呈现按钮并呈现它们的空白空间。

即使隐藏按钮空间，如何让页面呈现按钮空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:19:06.053

使用`visibility`按钮的属性而不是`hide()`/`Show()`函数，hide() 使用 display:none，在**[这里阅读更多](http://api.jquery.com/hide/)**

以显示

```
$('button').css('visibility', 'visible'); 
```

隐藏

```
$('button').css('visibility', 'hidden'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T13:18:47.810

如果我正确理解你的问题。

该`jQuery`函数`hide()`将元素设置为`display:none;`CSS 中的。为了使文档保持元素空间，您需要将元素设置为

`visibility: hidden;`

# r - R中是否有用于对象关系映射的包？

> ID：11988011
> 
> 赞同：19
> 
> 时间：2012-08-16T13:16:38.347
> 
> 标签：r, orm, dplyr, rmysql

（通过对象关系映射，我的意思是这里描述的内容：[维基百科：对象关系映射](http://en.wikipedia.org/wiki/Object-relational_mapping)。）

以下是我在 R 中如何想象这项工作：一种“虚拟数据框”链接到数据库，并在访问时返回 SQL 查询的结果。例如，`head(virtual_list)`实际上会返回`(select * from mapped_table limit 5)`映射数据库的结果。

我找到[了 John Myles White 的这篇文章](http://www.johnmyleswhite.com/notebook/2010/01/05/announcing-r-orm-a-pure-r-object-relational-mapper/)，但过去 3 年似乎没有任何进展。

是否有实现此功能的工作包？

如果不，

1.  会有用吗？
2.  实现它的最佳方法是什么（S4？）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-24T14:18:44.263

最近的软件包`dplyr`正在实现这一点（以及其他惊人的功能）。

以下是功能示例的插图`src_mysql()`：

```
# Connection basics ---------------------------------------------------------
# To connect to a database first create a src:
my_db <- src_mysql(host = "blah.com", user = "hadley",
  password = "pass")
# Then reference a tbl within that src
my_tbl <- tbl(my_db, "my_table")

# Methods -------------------------------------------------------------------
batting <- tbl(lahman_mysql(), "Batting")
dim(batting)
colnames(batting)
head(batting) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T15:42:27.180

有一个旧的不受支持的包[SQLiteDF](http://cran.r-project.org/src/contrib/Archive/SQLiteDF/)可以做到这一点。从源代码构建它并忽略大量错误消息。

```
> # from example(sqlite.data.frame)
>
> library(SQLiteDF)
> iris.sdf <- sqlite.data.frame(iris)
> iris.sdf$Petal.Length[1:10] # $ done via SQL
 [1] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T14:56:00.390

看起来约翰迈尔斯怀特他已经放弃了。

[这里](https://stat.ethz.ch/pipermail/r-help/2008-November/180357.html)解释了一些解决方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T00:40:10.820

我不认为它会有用。R 不是真正的 OOP 语言。R 中的“中心”数据结构是数据框。这里不需要对象关系映射。您想要的是 SQL 表和数据框之间的映射，而 RMySQL 和 RODBC 仅提供：

> **dbGetQuery**在数据框中返回查询结果，**dbWriteTable**在表中插入数据或进行批量更新（从数据框）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T10:50:35.920

作为一个有经验的 R 用户，我不会使用它。首先，这个“虚拟框架”使用起来会很慢，因为您经常需要在 R 内存和数据库之间进行同步。它还需要锁定数据库表，否则会由于同时发生其他编辑而导致无法预测的结果。

最后，我认为 R 不适合对`promise`对象进行不同的评估。这样做`myFrame$foo[ myFrame$foo > 40 ]`仍然会获取完整的`foo`列，因为您无法实现从 R 到 SQL 的完整转换方案。

因此，我更喜欢从查询中加载 dataframe()，使用它，并在需要时将其写回数据库。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-22T12:22:34.883

除了用于查询 DB（DBI、RODBC、RJDBC、RMySql、...）和 dplyr 的各种驱动程序包之外，还有 sqldf [https://cran.r-project.org/web/packages/sqldf/](https://cran.r-project.org/web/packages/sqldf/ "sqldf")

这将自动将数据帧导入数据库并让您通过 sql 查询数据。最后，数据库被删除。

# python - 可以修改 ANTLR 语法文件以供 PLY 使用吗？

> ID：11988016
> 
> 赞同：1
> 
> 时间：2012-08-16T13:16:52.913
> 
> 标签：python, parsing, antlr, lalr, ll

我想制作一个使用 PLY 解析 Javascript 文件的 python 程序，我没有找到任何实现 ECMAScript 的解析器来源，使用 PLY 的 Javascript 规则。

我唯一发现的是一些 ANTLR 语法文件来解析 javascript 和 ecmascript： [http ://www.antlr.org/grammar/1153976512034/ecmascriptA3.g](http://www.antlr.org/grammar/1153976512034/ecmascriptA3.g) [http://www.antlr.org/grammar/1206736738015/JavaScript.g](http://www.antlr.org/grammar/1206736738015/JavaScript.g)

ANTLR 语法文件是否可以调整为 PLY 规则，如果可以，如何以半自动方式完成，是否需要解析语法文件？是否有另一种解决方法（即比使用 ANTLR 语法文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:13:40.550

> ANTLR 语法文件可以适应用作 PLY 规则，[...] 吗？

不，他们不能。PLY 生成 LALR 解析器，而 ANTLR 生成 LL 解析器。它们的输入语法对于微不足道的（或自动的）转换来说太不同了。

# jsf-2 - 我无法从方面更新

> ID：11988017
> 
> 赞同：0
> 
> 时间：2012-08-16T13:17:05.393
> 
> 标签：jsf-2, primefaces

我将 primefaces 3.3 与 JSF 2.1 一起使用。在下面的代码中，我有一个 primeFaces 数据表，其中包含从数据库中提取的数据行，这些数据是从页面左侧的树组件正确激活的。dataTable 显示和行为正确。我有一个调用“更新”的删除功能，它刷新我的数据表并在数据库更新后反映我的更改。我的问题是 f:facet (id="header")。该方面包含一个 commandLink，它在我的数据表中创建一个新行。它的工作原理是我的数据库已正确更新。在此之后不会刷新数据表。为了刷新我的dataTable，我必须单击我的树组件中的另一个节点（在页面的左侧），然后返回原始treeNode 才能看到我的dataTable 完美更新。我可以在代码中添加什么来动态更新数据表？不幸的是，我无法添加我在这里尝试过的所有排列 - 我在这个问题上花了很长时间 - 您的输入将不胜感激！

```
 <h:form id="formRight" >            
    <p:dataTable var="material" value="#{entityCrudTreeBean.materialList}" id="materials" editable="true" paginator="true" rows="10" sortBy="#{material.name}">
                <p:ajax event="rowEdit" listener="#{entityCrudTreeBean.onEditRow}"/>
                <f:facet id="header" name="header">
                    In-Cell Material Editing
                    <br />
                    <p:commandLink id="create" value="Add new material" action="#{entityCrudTreeBean.createNewMaterial}" update=":formRight"/>
                </f:facet>
                <p:column headerText="Name" style="width:125px">
                    <p:cellEditor>
                        ...
                    </p:cellEditor>
                </p:column>

                <p:column headerText="Options" style="width:10px" >
                    <p:rowEditor />
                    <p:commandLink id="delete" action="#{entityCrudTreeBean.deleteRow(material)}" update=":formRight">
                        <h:graphicImage value="#{resource['icons:Delete-icon.png']}" />
                    </p:commandLink>
                </p:column>
            </p:dataTable>
    </h:form> 
```

编辑：将行更改为 `<p:commandLink id="create" value="Add new material" action="#{entityCrudTreeBean.createNewMaterial}" update=":formRight:materials"/>` 也不起作用编辑：更改为： `<f:facet id="header" name="header"> In-Cell Material Editing <br /> <p:commandLink id="create" value="Add new material" ajax="true" process="@this" action="#{entityCrudTreeBean.createNewMaterial}" update="@form"/> </f:facet>` 也不能解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:37:18.310

前段时间我遇到了和你类似的问题。

我的工作代码如下所示：

```
<f:facet name="header">Product List
<p:commandLink id="create" value="Add new product" ajax="true" process="@this" 
action="#{modelBean.save}" update="@form"/>
</f:facet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:10:26.010

斯蒂芬，你在正确的轨道上！它以一种更简单的方式解决：我在托管 bean 中更新了我的 dataTable 列表——我为删除而不是插入。那里有大规模的监督。此代码有效： `<p:commandLink id="create" value="Add new material" action="#{entityCrudTreeBean.createNewMaterial}" update=":formRight"/>` 给我之后的人的提示：Primefaces 3.3 有一个关于在 dataTable 中更新的已知问题。您需要用另一个组件（如表单布局）包装 dataTable。在包装器上调用更新有效。根据 8 月 15 日的 primefaces 博客，这已在 3.4.RC1 中修复。但是他们改变了树组件。我会在升级之前等待 3.4 最终版本。

# scala - SBT 中的 Scala 参数类型推断错误（0.7.x 与 0.11.x）

> ID：11988020
> 
> 赞同：1
> 
> 时间：2012-08-16T13:17:16.310
> 
> 标签：scala, sbt

此代码仅适用于 SBT 0.7.x 系列（本例中为 0.7.7），但不适用于 SBT 0.11.x 系列（本例中为 0.11.3）。在这两种情况下，使用相同的 Scala 2.9.x 系列 (2.9.1)

似乎 SBT 0.11.3 无法推断参数的类型。Eclipse 也不能。我的猜测是编码中存在问题。还是 SBT 回归？

（目前，我正在使用带有“不稳定”版本的 Scala 插件的 Eclipse 4.2。但是，使用 Eclipse 3.7 和“稳定”版本的插件时，我遇到了同样的错误。）

```
// either using the "override" reserved keyword or not, this code will compile with SBT 0.7.7 but not with 11.3

 sealed trait FacetJoin[T1, T1S, T2S] {
    def facetJoin (a: T1S, b: T1S
      , fVals: (T1, T1) => T2S
      , fFacets: (Formula, T1S, T1S, Formula, T1S, T1S) => T2S
      , fBothL: (T1S, Formula, T1S, T1S) => T2S
      , fBothR: (Formula, T1S, T1S, T1S) => T2S
      , fOther: (T1S, T1S) => T2S): T2S
  }
  object FacetJoin {
    implicit object BoolBoolFacetJoin
    extends FacetJoin[Boolean, Formula, Formula] {

// Eclipse complaint for next line: 
//// Multiple markers at this line
////    - only classes can have declared but undefined 
////     members
////    - ':' expected but ',' found.

      override def facetJoin (a, b, fVals, fFacets, fBothL, fBothR, fOther): Formula = {
 ...

// Eclipse complaint for next line: 
//// Multiple markers at this line
////    - identifier expected but '}' 
////     found.
////    - not found: type <error>
        }
      }
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:35:50.947

```
def facetJoin (a, b, fVals, fFacets, fBothL, fBothR, fOther): Formula 
```

如果不指定 Scala 中的参数类型，就无法定义方法。这不可能由任何 Scala 版本编译。这`...`也表明您在这里遗漏了一些东西。尝试提供一个完全独立的示例（例如 add `trait Formula`）。输入类型后，它可以毫无问题地编译：

```
trait Formula

sealed trait FacetJoin[T1, T1S, T2S] {
  def facetJoin (a: T1S, b: T1S
    , fVals: (T1, T1) => T2S
    , fFacets: (Formula, T1S, T1S, Formula, T1S, T1S) => T2S
    , fBothL: (T1S, Formula, T1S, T1S) => T2S
    , fBothR: (Formula, T1S, T1S, T1S) => T2S
    , fOther: (T1S, T1S) => T2S): T2S
}
object FacetJoin {
  implicit object BoolBoolFacetJoin
  extends FacetJoin[Boolean, Formula, Formula] {

  override def facetJoin (a: Formula, b: Formula
    , fVals: (Boolean, Boolean) => Formula
    , fFacets: (Formula, Formula, Formula, Formula, Formula, Formula) => Formula
    , fBothL: (Formula, Formula, Formula, Formula) => Formula
    , fBothR: (Formula, Formula, Formula, Formula) => Formula
    , fOther: (Formula, Formula) => Formula): Formula = sys.error( "TODO" )
    }
 } 
```

# asp.net - 支持“替换”字段的 ASP.NET 富文本控件

> ID：11988023
> 
> 赞同：0
> 
> 时间：2012-08-16T13:17:20.297
> 
> 标签：asp.net, rich-text-editor, servercontrols

我正在查看一个必须支持“替换”字段的 ASP.NET 富文本控件。基本上，用户应该能够从预定义的替换字段列表（例如：{CustomerName}、{Company} 等）中将特殊字段添加到文本中。这里有哪些选择？我知道 Ajaxtoolkit 中的 HTMLEditor 看起来不错，但不确定它是否具有“替换”字段功能。

谢谢

# variables - 将符号解析为宏与函数参数的规则是什么？

> ID：11988024
> 
> 赞同：5
> 
> 时间：2012-08-16T13:17:25.163
> 
> 标签：variables, clojure, macros, shadowing

我惊讶地发现在 Clojure 中[alpha 转换](http://en.wikipedia.org/wiki/Lambda_calculus#.CE.B1-conversion)是不安全的：

```
Clojure> ((fn [o] (o 3 2)) +)
5

Clojure> ((fn [or] (or 3 2)) +)
3

Clojure> ((fn [def] (def 3 2)) +)
java.lang.RuntimeException: First argument to def must be a Symbol 
```

（我希望所有三个片段都评估为 5）。

当涉及阴影和宏以及特殊形式时，符号解析的规则是什么？

我正在使用[Try Clojure](http://tryclj.com/)上的版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T13:29:44.440

[根据文档](http://clojure.org/evaluation)，您不能隐藏特殊形式：

> 一个符号被解析：
> 
> *   如果它是命名空间限定的，则该值是由符号命名的全局变量的绑定值。如果没有由符号命名的全局变量，或者如果引用指向不同命名空间中的非公共变量，则会出现错误。
> *   如果它是包限定的，则值是由符号命名的 Java 类。如果没有由符号命名的类，则这是一个错误。
> *   **否则，不合格，适用以下第一项：
>     1.  如果它命名了一个特殊的形式，它被认为是一个特殊的形式，并且必须相应地使用。**
>     2.  在当前命名空间中进行查找以查看是否存在从符号到类的映射。如果是这样，则认为该符号命名了一个 Java 类对象。请注意，类名通常表示类对象，但会以某些特殊形式进行特殊处理，例如“.”。和新的。
>     3.  如果在本地范围内（即在函数定义中），则进行查找以查看它是否命名了本地绑定（例如，函数参数或让绑定名称）。如果是，则该值是本地绑定的值。
>     4.  在当前命名空间中进行查找以查看是否存在从符号到 var 的映射。如果是这样，则该值是该符号所引用的 var 的绑定值。
>     5.  这是一个错误。

而且我不确定，但我将这段话（来自同一页）解释为您不能隐藏宏：

> 宏是操作表单的函数，允许进行语法抽象。如果调用的运算符是一个符号，它命名了一个作为宏函数的全局变量，则调用该宏函数并传递未计算的操作数形式。然后在其位置评估宏的返回值。
> 
> 如果运算符不是特殊形式或宏，则该调用被视为函数调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T13:26:30.753

前两个对我来说都评估为 5（Eclipse / 逆时针 REPL 中的 Clojure 1.4）。如果您获得 3，我怀疑 Try Clojure 中存在错误。

您应该能够在本地隐藏函数和宏名称（尽管这通常不是一个好主意，因为它可能会导致一些微妙和令人困惑的错误！）。

第三个不起作用，因为`def`它是一种[特殊形式](http://clojure.org/special_forms)。特殊形式从 Clojure 阅读器和/或编译器获得特殊处理，因此您不能隐藏它们。

# javascript - jquery加载回调到父窗口

> ID：11988025
> 
> 赞同：1
> 
> 时间：2012-08-16T13:17:25.710
> 
> 标签：javascript, jquery, dom, coldfusion, nested

我有一个提交给 iframe 的表单。iframe 处理一个包含以下代码的冷融合页面：

```
<SCRIPT LANGUAGE="JAVASCRIPT">
    $(document).ready(function(){
        $('.attachments', window.parent.document).load('itemAttachments.cfm?ID=' + <cfoutput>#ID#</cfoutput>, function(){
            styleForm();
            window.parent.document.alert();
        });
    });
</SCRIPT> 
```

styleForm() 位于父文档的 javascript（保存提交的初始表单的那个）中。加载工作正常，iframe 正确更新附件 div。但是我的回调函数失败了。我想知道它是否与范围有关。你可以看到我试图改变我在回调中发出的警报的范围。不显示警报。有谁知道我的问题在哪里？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:24:09.217

只需使用`parent.`进入父窗口，如下所示：

```
parent.$('.attachments').load(... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:24:55.910

我将函数调用放在 itemAttachments.cfm 中并使用了 setTimeout，以便在加载其他内容后加载。

```
<SCRIPT LANGUAGE="JAVASCRIPT">
$(document).ready(function(){
    setTimeout(function(){
        window.parent.styleForm();
        window.parent.deleteFileHandler();
    },250);
}); 
```

# asp.net-mvc-4 - WebAPI 请求格式的异常

> ID：11988027
> 
> 赞同：3
> 
> 时间：2012-08-16T13:17:30.333
> 
> 标签：asp.net-mvc-4, asp.net-web-api, restsharp

在项目中使用 RC 版本的 MVC4 WebAPI，我在 API 服务器端一直遇到以下错误：

```
System.FormatException: The format of value 'application/json; charset=utf-8' is invalid. 
```

我已经尝试了很多关于如何从客户端调用它的方法，现在使用 RestSharp 像这样：

```
 var client = new RestClient("http://localhost:29874");
     var request = new RestRequest("api/submit", Method.POST);
     var content = new RestSharp.Serializers.JsonSerializer().Serialize(myDto);
     request.RequestFormat = DataFormat.Json;
     request.AddBody(content);
     var restResponse = client.Execute(request);
     var response = restResponse.Content; 
```

我在服务器端的 ApiController 被命名为 SubmitController。SubmitController 看起来像：

```
public class SubmitController : ApiController
{
    public SubmitResponse Post(SomeDtoType dto)
    {
        var response = new SubmitResponse();
        // do something interesting with the dto;

        return response;
    }
} 
```

当然，控制器方法永远不会被调用，因为我得到了之前的格式化异常，我从服务器上 Global.asax 中的 Application_Error() 中捕获了该异常：

```
 protected void Application_Error()
    {
        var ex = Server.GetLastError();
        if (ex != null)
        {
            if (ex is HttpUnhandledException)
            {
                ex = ex.InnerException;
            }

            logger.Error("Unhandled error.  ", ex);
        }
    } 
```

我没有为 WebAPI 服务器代码定义任何自定义格式化程序。我错过了什么？

**编辑：** 有些事情严重不对劲，因为当我换成 XML 而不是 JSON 时，我遇到了完全相同的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:16:24.323

在此处添加此内容，因为其他人可能会发现它很有用。

The version of the WebAPI components that I was using were 4.0.20505.x, where I most certainly had a problem.

Yesterday, the new versions were posted on NuGet, version 4.0.20710.0, which now works with the code above flawlessly.

# php - Zend 框架将字母“f”输出到我的页面上

> ID：11988028
> 
> 赞同：3
> 
> 时间：2012-08-16T13:17:34.283
> 
> 标签：php, zend-framework, zend-feed

我已经下载了 Zend 框架稳定版本（我相信是 1.11），上传到我的服务器，并将其添加到我的 php 包含路径中。

我的目标是使用 Feed 和 Feed_Writer 模块来处理一些 RSS 和 Atom 繁重的工作。

问题是，每当我包含 Feed_Writer 文件时，我都会得到一个随机`f`显示在文档*开头*的内容。

```
require('Zend/Feed.php');
require('Zend/Feed/Writer/Feed.php'); 
```

**将**导致 ，`f`但当我实例化 a 时**不会**引发致命错误`Zend_Feed_Writer_Feed`

```
require('Zend/Feed.php'); 
```

不会导致，但是**当我启动 a 时****确实会**引发致命的`f`**`Zend_Feed_Writer_Feed`**

 **我是 Zend 框架的新手，这是某种神秘的错误代码吗？如果是这样，是否有此类事情的参考？"Zend f" 和 "Zend output f" 和 "Zend echo f" 对谷歌不是特别友好。

**编辑**

这是我的一些来源，但仍然显示错误

```
<?php
require('Zend/Feed.php');
require('Zend/Feed/Writer/Feed.php');

$feed = new Zend_Feed_Writer_Feed;
echo 'hi'
?> 
```

这个的输出是`fhi`

**编辑 2**

感谢**@Drew010**的回答。这里是小`f`

![http://i.imgur.com/bJSpr.png](../Images/4794a9f25a83cf86c76f4fc887bef559.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:51:31.450

此问题已在 ZF 1.11.12 中修复，存在一个错误，即`f`意外将 an 放置在文件开头`Zend/Feed/Writer/Deleted.php`。

错误报告在[这里](http://framework.zend.com/issues/browse/ZF-12156)。您可以安全地`f`从文件开头删除 ，或使用 1.11.12 版本。**

# android - 如何在Android中获取前缀字符串值？

> ID：11988029
> 
> 赞同：5
> 
> 时间：2012-08-16T13:17:41.260
> 
> 标签：android, string, prefix

我在 Android 应用程序中工作，使用 hasPrefix 在 iphone 中获取第一个字符串值，但我不知道该怎么做？请帮我

在 iPhone 中：

```
Name =@"Thomas edward";
if ([result hasPrefix:Thomas])  
{

} 
```

同样是Android，如何做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T13:19:22.177

您可以使用[startsWith](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#startsWith%28java.lang.String%29)，或检查字符串的索引

```
if(result.startsWith("Thomas")) 
{

} 
```

# c# - 如何实现具有双向多对多关系的关联类？

> ID：11988036
> 
> 赞同：2
> 
> 时间：2012-08-16T13:18:01.350
> 
> 标签：c#, uml, associations, implementation

我有一个名为 的关联类`Role`，如下所示：

![在此处输入图像描述](../Images/63e44419b990ca0c242b09c2269eef7c.png)

我以前没有真正使用过关联类，所以我不得不问：这是正确的使用它吗？这个想法是每个人在每个组中都有特定的角色，而每个组也知道与他们相关的人。

尽管我理解了原理，但我不知道如何实际实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:12:54.207

我认为直接的实现是让关联类（为清楚起见我将其命名`GroupMembership`）包含

*   对 Person 的引用
*   对组的引用
*   描述组成员性质的附加数据成员（如您的`isAdmin`，或对描述成员性质的另一个对象的引用）

该类`Person`包含对`GroupMembership`对象的引用列表，描述了该人所属的组。

该类`Group`还包含对`GroupMembership`对象的引用列表，为您提供有关组成员的信息。

# objective-c - 如何获得旋转 CCNode 的角坐标？

> ID：11988042
> 
> 赞同：1
> 
> 时间：2012-08-16T13:18:17.437
> 
> 标签：objective-c, ios, cocos2d-iphone

我有一个具有一定旋转的 CCNode。为了简单起见，假设它旋转了 45 度，大小为 100*100，位置为 200,200。

![例子](../Images/d7920a3656984a51f6d1e2090cafea9b.png)

我正在寻找此图像上的 4 个角坐标（标记为绿色）。框架中是否有任何方法可以用于此操作，还是需要使用三角函数手动完成？在那种情况下，我该怎么做最简单的方法？

最好的事情是，如果我可以将其作为 CCNode 类中的一个方法，使其易于访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:51:30.483

尝试这个：

```
CGFloat angle = node.rotation * M_PI / 180;
CGRect frame = CGRectMake(node.position.x, node.position.y, node.contentSize.width, node.contentSize.height);

CGPoint ip0 = CGPointMake(frame.origin.x,frame.origin.y);
CGPoint ip1 = CGPointMake(frame.origin.x +frame.size.width, 0);
CGPoint ip2 = CGPointMake(0,frame.origin.y +frame.size.height);
CGPoint ip3 = CGPointMake(frame.origin.x +frame.size.width,frame.origin.y +frame.size.height);

ip0 = CGPointApplyAffineTransform(ip0, CGAffineTransformMakeRotation(angle));
ip1 = CGPointApplyAffineTransform(ip1, CGAffineTransformMakeRotation(angle));
ip2 = CGPointApplyAffineTransform(ip2, CGAffineTransformMakeRotation(angle));
ip3 = CGPointApplyAffineTransform(ip3, CGAffineTransformMakeRotation(angle)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:26:14.867

CCNode.h：

```
/** Converts a Point to world space coordinates. The result is in Points.
 @since v0.7.1
 */
- (CGPoint)convertToWorldSpace:(CGPoint)nodePoint;

/** Converts a Point to node (local) space coordinates. The result is in Points.
 @since v0.7.1
 */
- (CGPoint)convertToNodeSpace:(CGPoint)worldPoint; 
```

例子：

```
// top right corner of your node 
CGPoint topRight = ccp(node.contentSize.width, node.contentSize.height);
// same point in world coordinates
CGPoint topRightWorld = [node convertToWorldSpace:topRight]; 
```

# php - 如何动态替换bb标签？

> ID：11988043
> 
> 赞同：1
> 
> 时间：2012-08-16T13:18:21.107
> 
> 标签：php, regex, cakephp

我需要一种智能的方式来允许用户在他们的课程中发布来自 Forvo 的语音片段。Forvo 需要使用 $this->Forvo->word('hola', 'es') 来使用帮助程序。

一个想法是允许用户使用像 [forvo=hola,es] 这样的 bb-code，但是如何实现呢？我唯一能想到的就是使用大量的 substr、strpos ......这将需要至少 35 行代码，这既不美观也不安全。

```
<?php
// Replace forvos in the lesson
$lesson = $lesson['Lesson']['body'];

// Todo: 
// Replace [forvo=hello,en] by javascript from
// $this->Forvo->word('hello', 'en');

// I seem unable to use regex's like this
$pattern[0] = "/\[forvo\=(.*),(.*)]";
$replace[0] = $this->Forvo->word($1, $2);
echo preg_replace($pattern, $replace, $lesson);

?> 
```

一个教训的例子是：

```
Pronounciations in Dutch
    een [forvo=een,nl]
    en [forvo=en,nl]
    de [forvo=de,nl]
    in [forvo=in,nl]
    met [forvo=met,nl] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:40:37.947

谢谢你，韦古德。它与 preg_replace_callback 一起使用。

```
<?php
// Replace forvos in the lesson
$lesson = $lesson['Lesson']['body'];

function forvize($match) {
    $word = $match[1];
    $language = $match[2];
    $link = "http://apifree.forvo.com/action/word-pronunciations/format/js-tag  /word/".$word."/language/".$language."/order/rate-desc/limit/1/key/123456789/";
    $link = file_get_contents($link);
    return $link;
}

//URL's
$lesson = preg_replace_callback("/\[forvo\=(.*),(.*)\]/", 'forvize', $lesson);
?> 
```

# class - 类中的 pylons 全局变量

> ID：11988044
> 
> 赞同：0
> 
> 时间：2012-08-16T13:18:35.190
> 
> 标签：class, variables, pylons

在 pylons 中，我如何使用在类中被认为是全局的变量，例如使用 self，在 pylons 中使用 self 似乎不起作用。

假设我在控制器中有：

一个.py：

```
class AController(BaseController):

    def TestA(self):
        text = request.params.get('text', None) 
        self.text = text
        redirect(url(controller = 'A', action = 'TestB'))

    def TestB(self):
        render '%s' % self.text 
```

出现错误，'AController' 对象没有属性'text'，那么我如何在 pylons 中使用 TestB 显示基于 TestA 的 'text' 或 'self.text'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:23:37.837

我一直在用我的 pylons 控制器做类似的事情。您遇到的问题是，如果您先调用 TestB，则永远不会定义 self.text 。您需要做的就是首先定义它。

这就是我要使您的示例正常工作的方法：

```
class AController(BaseController):

    text = ''

    def TestA(self):
        text = request.params.get('text', None) 
        self.text = text
        redirect(url(controller = 'A', action = 'TestB'))

    def TestB(self):
        render '%s' % self.text 
```

# java - Java：比较两个音频文件，看看它们是否是相同的“音乐”

> ID：11988052
> 
> 赞同：6
> 
> 时间：2012-08-16T13:19:00.150
> 
> 标签：java, audio

我正在开发音乐流媒体服务，但遇到了一个问题：如何比较两个音频文件以查看它们是否代表同一首歌曲。这些文件可能具有不同的扩展名（例如 OGG、mp3、wma），但可能仍然是同一首歌曲，并且它们可能具有不同的比特率和音量级别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T13:23:58.653

搜索“音频指纹”。一个可能的解决方案可能是[这个库](http://code.google.com/p/musicg/)或[这篇论文](http://www.ee.columbia.edu/~dpwe/papers/Wang03-shazam.pdf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T22:20:15.473

我会查看 Google 的开源 lib musicg API： [http ://code.google.com/p/musicg/](http://code.google.com/p/musicg/)

它是 Java 并提供两个音频文件的相似度指标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-19T11:18:58.823

您可以使用[开源 echoprint](http://echoprint.me/start#identify)

基本上，您将生成本地歌曲的指纹，并将其与歌曲数据库（如果找到）进行比较。

如果你想比较你的两首歌曲，你需要做的是用第一首歌曲创建一个本地数据库，然后尝试在你自己的数据库中匹配第二首歌曲。如果找到，则表示它们是相同的。

请注意，“成为同一首歌”的概念很棘手。实际上指纹所做的是比较歌曲的许多部分，试图匹配这些部分。这意味着即使您对音频有干扰（如人说话、背景噪音等），您也可以匹配一首歌曲，因为大部分音频都与原始音频相似。

[有一篇论文详细解释了 echoprint 的工作原理](http://academiccommons.columbia.edu/catalog/ac:148387)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:23:48.997

对于这样的事情（因为我做了一点音频制作），您需要某种可以执行频谱分析的算法（可能使用 FFT - 快速傅立叶变换）。
在这里检查这个[问题](https://stackoverflow.com/questions/11705224/matching-two-audio-files)。

# php - php重定向到带有消息的页面

> ID：11988061
> 
> 赞同：12
> 
> 时间：2012-08-16T13:19:19.307
> 
> 标签：php, redirect, message

我想重定向到一个页面，然后显示一条消息：

我所拥有的是：

```
if (mysqli_affected_rows($link) == 1) 
{
   //succes         
    $message = 'succes';
    redirect_to('index.php');
} 
```

在索引页面上我有：

```
if (!empty($message)) {
    echo '<p class="message"> '.$message.'</p>';
} 
```

重定向功能工作正常：

```
function redirect_to( $location = NULL ) {
        if ($location != NULL) {
            header("Location: {$location}");
            exit;
        }
    } 
```

但它不会显示我的消息。它是空的。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-16T13:22:04.863

当重定向发生并`$location`执行描述的 PHP 脚本时，`$message`变量早就不存在了。

为了解决这个问题，您需要使用`GET`变量在您的位置标头中传递您的消息：

`header("Location: $location?message=success");`

和

```
if(!empty($_GET['message'])) {
    $message = $_GET['message'];
// rest of your code 
```

您还可以查看[会话](http://php.net/manual/en/session.examples.basic.php)

```
session_start();
$_SESSION['message'] = 'success';
header("Location: $location"); 
```

然后在目标脚本中：

```
session_start();
if(!empty($_SESSION['message'])) {
   $message = $_SESSION['message'];
   // rest of your code 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T13:21:57.377

脚本结束后变量不再存在。每个单独的请求，每个单独的 PHP 脚本调用都是一个全新的上下文，没有来自任何其他调用的数据。

使用[会话](http://php.net/manual/en/session.examples.basic.php)来持久化数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T13:22:10.070

你可以使用会话

```
if (mysqli_affected_rows($link) == 1) 
{
   //succes         
    $_SESSION['message'] = 'succes';
    redirect_to('index.php');
} 
```

并在索引上

```
if (!empty($_SESSION['message'])) {
    echo '<p class="message"> '.$_SESSION['message'].'</p>';
    unset($_SESSION['message']);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T13:22:24.920

由于您正在运行（在第一个文件中设置）`header("Location: {$location}");`的值，因此在加载 index.php 时会丢失。`$location`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-21T16:15:33.093

您可以避免重定向功能并在页面中使用此代码

```
header("Location: $locationpage?message=success") 
```

索引.php

```
if(!empty($_GET['message'])) {
$message = $_GET['message'];
 echo '<p class="message"> '.$message.'</p>';
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T13:24:33.670

使用以下代码....

```
header("Location: index.php?message=success"); 
```

在 index.php 中

```
$msg=$_GET['message'];
echo $msg; 
```

# php - CakePHP 复杂的查找/查询 - 改进当前的解决方案

> ID：11988062
> 
> 赞同：3
> 
> 时间：2012-08-16T13:19:19.743
> 
> 标签：php, mysql, cakephp, cakephp-2.0

我在 CakePHP（最新版本）中编写了一个标签搜索，但与 CakePHP 的其余部分的简单程度相比，我所做的解决方案似乎过于复杂。希望有人可以为我指明正确的方向或帮助我改进当前的解决方案。

我的应用程序中的每个用户都可以用标签标记自己，例如：php、objective-c、javascript、jquery。不同类型的用户可以搜索具有特定标签的用户。他们可能会搜索：php、objective-c、ios。我需要按照他们匹配多少标签的顺序返回一个用户数组，具有所有 3 个标签的用户将出现在数组的顶部。

下面是数据库示例和我的解决方案。我真的很感谢任何关于改进这一点的帮助。

**[数据库]**

![在此处输入图像描述](../Images/5e184ca555570ebd0999be972a22b4fd.png)

**[解决方案]**

```
 //Search Array
            //Format: array('objective-c', 'javascript', 'jquery', 'php')
            $tag_array = explode(",", $this->request->data["User"]["search"]);

            //Get Tag IDs - array([id] => [id])
            //Format: array([1] => '1', [2] => '2', [4] => '4', [15] => '15')
            $result_tag_ids = $this->User->TagsUser->Tag->find('list', array(
                'conditions' => array(
                    "Tag.name" => $tag_array
                ),
                'fields' => array('Tag.id')    
            ));

            //Get User IDs - array([id] => [id])
            //Format: array([24] => '24', [24] => '24', [26] => 26, [27] => '27')
            $result_user_ids = $this->User->TagsUser->find('list', array(
                'conditions' => array(
                    "TagsUser.tag_id" => $result_tag_ids
                ),
                'fields' => array('TagsUser.user_id')     
            ));

            //Remove Duplicate user ids and add a count of how many tags matched & sort the array in that order
            //Format:  array([26] => 1, [24] => 2, [27] => 3)
            $counted_user_ids = array_count_values($result_user_ids);
            asort($counted_user_ids);

            //Get the keys (user_ids)
            $list_user_ids = array_keys($counted_user_ids); 

            //Get these users in the order of the sorted array
            $search_result = $this->User->find('all', array(
                'conditions' => array(
                    "User.id" => $list_user_ids
                ),
                'order' => 'FIELD(User.id,' . implode(" ,", $list_user_ids) . ')'

            )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:30:51.750

请试一试：

```
$tag_array = explode(",", $this->request->data["User"]["search"]);
//arrays expanded for better readability, 
//you should be able to compress in fewer lines if desired

$options = array();
$options['contain'] = ''; 
//or recursive=-1, depends of what you are using to avoid extra models/fields

$options['joins'][0]['table'] = 'tags_users';
$options['joins'][0]['conditions'] = 'User.id = user_id';
$options['joins'][1]['alias'] = 'Tag';
$options['joins'][1]['table'] = 'tags'; 
$options['joins'][1]['conditions']= 'Tag.id = tag_id';
$options['fields'] =  array('User.id', 'COUNT(*) as tag_counter');
$options['group']  =  'User.id';
$options['order']  =  'tag_counter DESC';
$options['conditions']['Tag.name'] = $tag_array;
$search_result = $this->User->find('all', $options); 
```

`print_r($search_result)`应该给：

```
 Array
    (
        [0] => Array
            (
                [User] => Array
                    (
                        [id] => (user id)
                    )
                [0] => Array
                    (
                        [tag_counter] => (how many tags)
                    )
            )
        [...]
    ) 
```

我希望这个对你有用。如果您还想知道每个用户在同一查询中拥有哪些标签，只需调整包含或递归值。

# constraints - 默认放置在 Open Laszlo 5.0.x 中无法正常工作

> ID：11988066
> 
> 赞同：1
> 
> 时间：2012-08-16T13:19:32.230
> 
> 标签：constraints, openlaszlo, lzx

当我尝试在这样的类中使用这样的默认位置时，`$once{property}`会出现以下错误。

```
Exception in thread "main" org.openlaszlo.sc.parser.TokenMgrError: Lexical error at line 25, column 249\.  Encountered: "@" (64), after : ""
     [exec]     at org.openlaszlo.sc.parser.ParserTokenManager.getNextToken(ParserTokenManager.java:2565)
     [exec]     at org.openlaszlo.sc.parser.Parser.jj_scan_token(Parser.java:10271)
     [exec]     at org.openlaszlo.sc.parser.Parser.jj_3_5(Parser.java:8325)
     [exec]     at org.openlaszlo.sc.parser.Parser.jj_2_5(Parser.java:7224)
     [exec]     at org.openlaszlo.sc.parser.Parser.CallExpression(Parser.java:1312)
     [exec]     at org.openlaszlo.sc.parser.Parser.PostfixExpression(Parser.java:1521) 
```

我在这个 url 中放置了一个示例代码。该代码在 OL 3.3 中运行良好，但在 4.9 和 5.0 中运行良好。任何关于它为什么不起作用的想法都会有所帮助。

```
http://forum.openlaszlo.org/showthread.php?p=48740#post48740 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:28:52.823

您的代码中有两个问题。一、defaultplacement属性的双引号语法：

```
<attribute name="defaultplacement" value="'insideview'"/> 
```

这是一种旧语法，最新版本的 OpenLaszlo 不需要这种语法。另一个问题是 $once{} 约束的使用，它甚至不需要 - 并且导致编译器异常。

```
<attribute name="defaultplacement" value="$once{test.defaultplacement}"/> 
```

但是让我用一个简单的代码示例来澄清我的意思：

```
<canvas>

  <class name="blackbox" extends="view">
    <attribute name="bgcolor" value="black"/>
    <attribute name="defaultplacement" value="blackinner"/>
    <view name="blackinner" bgcolor="green"
          x="10" y="10" width="${parent.width-20}" height="${parent.height-20}">

    </view>
  </class>

  <class name="redbox" extends="view">
    <attribute name="bgcolor" value="red"/>
    <attribute name="defaultplacement" value="content"/>
    <blackbox name="content"
          x="10" y="10" width="${parent.width-20}" height="${parent.height-20}">

    </blackbox>
  </class>

  <redbox x="10" y="10" width="200" height="200">
    <view width="40" height="40" bgcolor="blue" />
  </redbox>

</canvas> 
```

这个示例应用程序定义了一个黑盒类和一个红盒类。黑盒只是一个带有绿色子视图的黑盒，它有一个 10 像素的插图。

redbox 使用 blackbox 类/标签作为子级，插入 20 像素。redbox 的 defaultplacement 是指 blackbox 实例，而 blackbox 的 defaultplacement 是指名为“blackinner”的 blackbox 的绿色子视图。

然后代码创建一个 redbox 的实例，以蓝色视图（40x40 像素）作为内容。正如您在此应用程序的屏幕截图中所见，蓝色视图自动正确放置在黑盒的绿色视图内。

![具有默认放置工作的示例应用程序的屏幕截图](../Images/c4db84b048e300d980d2bc22e242cd41.png)

当进行讨论的更改时，您的应用程序的原始代码（我已将所有类放入画布文件以进行简化）在 5.0（主干）中编译没有任何问题：

```
<canvas>

  <class name="myframe" extends="view">
    <attribute name="bgcolor" value="red"/>
    <attribute name="defaultplacement" value="insideview"/>
    <view x="5" y="5" width="${parent.width-10}" name='insideview'
          height="${parent.height-10}" 
          bgcolor="#FFFFCC"/>
  </class>

  <class name="answerMain" extends="view">
    <attribute name="defaultplacement" value="test"/>   
    <myframe name="test" width="220" height="20" />
  </class>

  <answerMain>
    <text> HI </text>
  </answerMain>

</canvas> 
```

在这种情况下，OpenLaszlo 编译器绝对不应该以异常退出，但不幸的是，过去两年中编译器的维护并不好。

# android - 为什么果冻豆在通知中不显示第二行？

> ID：11988073
> 
> 赞同：8
> 
> 时间：2012-08-16T13:19:44.507
> 
> 标签：android, notifications, android-4.2-jelly-bean

我目前正在研究 Android Support Package v4 Rev 10 的 NotificationCompat 功能。[文档](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)说“setContentText()”显示通知中的第二行。API 8 到 API 15 都是如此。但是，如果我尝试在 API 16 中使用此方法，我的通知将错过第二行。我只看到标题，但看不到第二行。添加多行没问题（使用'addline()'）。

这是我使用的 NotificationCompat.Builder 的代码：

```
private NotificationCompat.Builder buildNormal(CharSequence pTitle) {
    NotificationCompat.Builder builder = new NotificationCompat.Builder(
            getSherlockActivity());

    builder.setAutoCancel(true).setDefaults(Notification.DEFAULT_ALL);
    // set the shown date
    builder.setWhen(System.currentTimeMillis());
    // the title of the notification
    builder.setContentTitle(pTitle);
    // set the text for pre API 16 devices
    builder.setContentText(pTitle);
    // set the action for clicking the notification
    builder.setContentIntent(buildPendingIntent(Settings.ACTION_SECURITY_SETTINGS));
    // set the notifications icon
    builder.setSmallIcon(android.R.drawable.stat_sys_download_done);
    // set the small ticker text which runs in the tray for a few seconds
    builder.setTicker("This is your ticker text.");
    // set the priority for API 16 devices
    builder.setPriority(Notification.PRIORITY_DEFAULT);
    return builder;
} 
```

如果我想添加多行并显示通知，我使用以下代码：

```
NotificationCompat.Builder normal = buildNormal("This is an Expanded Layout Notification.");
    NotificationCompat.InboxStyle big = new NotificationCompat.InboxStyle(
            normal);

    // summary is below the action
    big.setSummaryText("this is the summary text");
    // Lines are above the action and below the title
    big.addLine("This is the first line").addLine("The second line")
            .addLine("The third line").addLine("The fourth line");

    NotificationManager manager = getNotificationManager(normal);
    manager.notify(Constants.NOTIFY_ID, big.build()); 
```

这是 Jelly Bean 的一个想要的功能，setContentText 被忽略还是我错过了什么？该代码在所有版本上运行都没有错误，但我想在第二行添加我在 ICS 或更早版本上使用的相同代码。

我还添加了两个屏幕截图。第一个来自我的 ICS 4.0.3 华为 MediaPad，第二个来自 4.1.1 的 Galaxy Nexus。[为简单起见，从1](https://i.stack.imgur.com/XixLz.png)开始的第二行是与通知标题相同的字符串。它在[2](https://i.stack.imgur.com/bAFXR.png)上不可见。

提前感谢您的帮助！

![ICS 4.0.3 设备](../Images/c1b0a7a339f5ba64efb697705b596d4b.png) ![JellyBean 4.1.1 设备](../Images/2349830eb48e09570cefd30434b20f38.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T14:05:08.840

> 这是 Jelly Bean 的一个想要的功能，setContentText 被忽略还是我错过了什么？

的值`setContextText()`应该在折叠状态下可见（例如，如果展开，则两指向上滑动，或者它不是最顶部的`Notification`）。鉴于您上面的代码，它将被替换`NotificationCompat.InboxStyle`为展开状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T04:31:29.647

如果要在默认展开状态下显示通知。只需设置构建器的 PRIORITY_MAX。像：builder.setPriority(Notification.PRIORITY_MAX);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:44:09.530

我现在在@CommonsWare 的帮助下解决了这个问题并创建了一个简单的方法，它将检查当前的 API 级别并决定应该使用什么命令：

```
private void createCompatibleSecondLine(CharSequence pTitle,
        NotificationCompat.Builder pBuilder, InboxStyle pInboxStyle) {
    // set the text for pre API 16 devices (or for expanded)
    if (android.os.Build.VERSION.SDK_INT < 16) {
        pBuilder.setContentText(pTitle);
    } else {
        pInboxStyle.setSummaryText(pTitle);
    }
} 
```

所以它并不疯狂，也远非完美，但它为我完成了这项工作。总是欢迎改进:)

# android - 显示缓存内存

> ID：11988074
> 
> 赞同：0
> 
> 时间：2012-08-16T13:19:49.353
> 
> 标签：android, caching

我想在设备上显示已安装应用程序的缓存。有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:31:06.703

您不能显示所有应用程序的缓存。由于该文件夹位于

> /data/data/[包名]/cache

，只有所有者才能访问，即只有应用程序才能访问。您将需要 root 访问权限才能显示这些文件

# macports - OSX Mountain Lion 上的 Mac 端口错误

> ID：11988075
> 
> 赞同：0
> 
> 时间：2012-08-16T13:19:49.697
> 
> 标签：macports, osx-mountain-lion

我升级到山狮，现在没有安装端口。我已经使用 dmg 更新了 macports，通过 Xcode 下载了命令行工具，我什至尝试通过从苹果开发者网站下载命令行工具来安装命令行工具。该错误似乎是某处的语法错误（尽管我尝试安装的任何端口都遇到相同的语法错误，因此它似乎并不特定于任何端口）。

```
:info:configure configure: creating ./config.status
:info:configure config.status: creating install-info/tests/defs
:info:configure nawk: syntax error at source line 1 source file ./confPOrdDb/subs.awk
:info:configure  context is
:info:configure      >>> BEGIN <<<  {
:info:configure nawk: bailing out at source line 321
:info:configure config.status: error: could not create install-info/tests/defs
:info:configure Command failed:  cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_texinfo/texinfo/work/texinfo-4.13" && ./configure --prefix=/opt/local 
:info:configure Exit code: 1
:error:configure org.macports.configure for port texinfo returned: configure failure: command execution failed
:debug:configure Error code: NONE 
```

如果我`sudo ./configure --prefix=/opt/local`在源文件夹中运行，我会得到相同的语法错误。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:23:30.753

原来安装了不止 1 个版本的 nawk。我摆脱了两者，一切都很好

# c# - Visual Studio 2012 中的普通 C# 编辑器（无智能感知、无缩进、无代码突出显示）

> ID：11988077
> 
> 赞同：55
> 
> 时间：2012-08-16T13:19:55.530
> 
> 标签：c#, .net, visual-studio, visual-studio-2012

我刚刚在我的机器上安装了 Visual Studio 2012，我之前有 Visual Studio 2012 RC，我之前卸载过它。安装成功，但是我打开一个项目后C#编辑器不工作，就像这样的纯文本编辑器：

![C# 编辑器](../Images/477381f2fcf4e33f5078890fa698e0b1.png)

我试过修复它，完全卸载它，然后重新安装，但没有成功。

有人有想法吗？

我不知道它是否相关，但**有时**在创建新项目或打开现有项目时也会出现此错误：

![与误差](../Images/4f43dc9b1ae5a21c1ba75257374ff8fe.png)

提前致谢

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-20T18:04:23.897

我很确定有关 ManagedObjectFactory 的错误与您描述的症状有关。此错误表明您的 Visual Studio 安装（尤其是 C# 语言服务）已损坏。这很可能是由我们目前正在努力确定的一些设置问题引起的。

我有机会调查此错误，发现我们的一个互操作程序集意外安装到 GAC 中，而它不应该安装。它是由 Windows 安装程序安装到 GAC 中的，这表明这是一个设置问题。解决方法是从 GAC 中卸载它，但因为它是由 Windows 安装程序安装的，所以它不仅仅是“gacutil /u”。您需要按照[KB873195](http://support.microsoft.com/kb/873195)中描述的过程将其从 GAC 中删除：

1.  删除与“Microsoft.VisualStudio.CSharp.Services.Language. **来自“HKLM\SOFTWARE\Classes\Installer\Assemblies\Global\”的“互操作**”程序集。请注意“互操作”部分，因为还有 Microsoft.VisualStudio.CSharp.Services.Language 程序集，它必须在 GAC 中。
2.  启动“VS2012 x86 Native Tools 命令提示符”并运行“gacutil /u Microsoft.VisualStudio.CSharp.Services.Language.Interop”。

免责声明：我是 Visual Studio C# IDE 团队的开发人员。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T13:25:46.983

可能是 Visual Studio 中禁用了某些设置。检查以下设置：

```
Tools->Options->Text Editor->C#->General->Auto list members
Tools->Options->Text Editor->C#->General->Parameter information 
```

编辑：

还要检查

```
Tools->Options->Text Editor->C#->Intellisense->
Show completion list after a character is typed 
```

这是[ScottGu 博客上的一篇文章](http://weblogs.asp.net/scottgu/archive/2010/02/26/no-intellisense-with-vs-2010-rc-and-how-to-fix-it.aspx)，可能会有所帮助：D

第二次编辑：

ScottGu 的博客上还有一篇题为[No Intellisense with VS 2010 RC (and how to fix it)](http://weblogs.asp.net/scottgu/archive/2010/02/11/intellisense-crashing-fix-for-vs-2010.aspx)的文章。让我知道这是否有帮助。该[补丁可在此处获得](http://weblogs.asp.net/scottgu/archive/2010/02/15/patch-for-vs-2010-rc-intellisense-crash-issue-now-available.aspx)。

第三次编辑：

```
Tools –&gt; Import and Export Settings ->  Reset all Settings 
```

如果需要，您可以备份旧设置。此[解决方案](http://blog.jongallant.com/2012/07/intellisense-visual-studio-2012.html#.UCz8BN2PV0o)适用于 Visual Studio 2012。我相信这应该有效

第四次编辑：不要只为 C# 更改它，而是为所有语言更改它

```
Tools > Options > Text Editor > All Languages 
```

通常，请确保已主动选中 Statement Completion 部分中的复选框（未灰显）。有可能有一个蓝色方块而不是一个刻度线。由于勾选框为 3 状态，正方形表示“部分选择”已生效。勾选标记生效后，重新启动 Visual Studio 并重试。

最终编辑：

看起来安装缺少一些文件。我建议您下载该软件的新副本并从头开始安装，并启用默认设置。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-16T13:30:32.863

我刚刚遇到了和你一样的问题，并按照我在[这里](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/cb7b792e-a2fa-4381-b78d-b22f288600d3?prof=required)找到的说明进行操作。

我发现有效的部分是：

1.  尝试在命令提示符中运行 devenv /Resetsettings 以消除设置损坏的原因。
2.  尝试在命令提示符中运行 devenv /ResetSkipPkgs。
3.  尝试在命令提示符中运行 devenv /Safemode 以查看是否可以正确应用它。
4.  尝试在命令提示符中运行 devenv /Resetuserdata 以重置所有 VS 环境和自定义设置。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-16T13:27:39.987

尝试删除：

*   %appdata%\Roaming\Microsoft\Microsoft Visual Studio
*   %appdata%\Roaming\Microsoft\VisualStudio
*   %appdata%\Local\Microsoft\VisualStudio

这应该会删除您的所有 Visual Studio 设置（来自所有版本）并将其恢复为默认值，以防 RTM 不喜欢的 RC 留下一些旧设置。

编辑：

你也想删除

*   我的文档/Visual Studio 2012/设置

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T15:05:50.393

如果您有任何 RC 版本，则可能是原因。

我在使用 Visual Studio 2012 开发人员版时遇到了这个问题。后来我发现我有 Express Edition RC，我删除了它，它解决了问题。

然后我应用了eggie的解决方案

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T13:35:15.297

如果你将vs2012安装在另一个磁盘（比如磁盘D:）而不是RC（安装在磁盘E:）上，尝试复制`E:\Program Files\Micosoft Visual Studio 11`到D:上的相应文件夹。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T02:41:49.357

好吧，我仍然不知道是什么问题，但通过卸载Visual Studio 2012 Final，然后安装Visual Studio 2012 RC，然后在不卸载RC的情况下再次安装最终版本来解决它。

感谢大家的帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-16T21:24:02.897

Oleg 的解决方案（或评论中建议的变体）或修复 Visual Studio 都不适合我。我终于偶然发现了[这里显示的修复](https://stackoverflow.com/questions/15643145/cannot-find-user-keywords-section-in-visual-studio-2012)

所以3个简单的步骤：

1) 关闭 Visual Studio 的所有实例

2）**以管理员身份**`Developer Command Prompt for VS2012`运行（在开始菜单中搜索）

 **3）然后输入`devenv.exe /setup`

那是为我做的。**

# oracle - 立即执行程序的问题

> ID：11988080
> 
> 赞同：0
> 
> 时间：2012-08-16T13:20:01.577
> 
> 标签：oracle, stored-procedures, plsql, mybatis

我需要查询一个像这样的表`select count(id) from user where id in ('208018042','208001105')`，我已经编写了一个函数来执行此操作，它接受分号分隔的数据，但我得到无效的数字作为例外，我想我没有发送引号中的值，这里有什么问题。我需要传递像'208018042'208001105'这样的值，上面的单个查询被执行，但是下面的函数中的查询出现了一些问题：

```
FUNCTION p_get_count_id(p_invalue IN VARCHAR2) RETURN VARCHAR2 IS
          v_splitTable      split_tbl;
          v_OptionValueList varchar2(4000);
          v_in_optid_list   varchar2(4000);
          v_count         number;
  begin
    v_in_optid_list := p_in_field_value;
    if (v_in_optid_list is not null) then
      v_in_optid_list := REPLACE(p_in_field_value, ';', ',');

 EXECUTE IMMEDIATE 'select count(id) 
      from user
     where id in
           (' || v_in_optid_list || ')' bulk collect
        into v_splitTable;
      v_OptionValueList := joinstr(v_splitTable, '; ');
    end if;
    return v_OptionValueList;
 End p_get_count_id; 
```

立即执行导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:35:49.330

不起作用。使用集合或管道函数或临时表将可能值列表传递给函数

# python - 将列表参数传递给 Jinja2 扩展中的 Call 节点

> ID：11988082
> 
> 赞同：6
> 
> 时间：2012-08-16T13:20:07.343
> 
> 标签：python, flask, jinja2

几个小时以来，我一直在努力创建 Jinja2 扩展，看来我肯定被困在一个特定点上：将列表参数传递给 Call 节点。我试图从其他一些工作扩展中获得灵感，但我不明白为什么我的东西在我的参考代码工作时不起作用。

基本上我想要的是在我的模板中有这种东西：

`{% usebundle "common", "treeview" %}`

这应该将“common”和“treeview”字符串添加到上下文中的某个列表中。

以下是我的代码的关键部分：

```
class MyExtension(Extension):
  def __init__(self, environment):
    super(MyExtension, self).__init__(environment)

  def parse(self, parser):
    lineno = parser.stream.next().lineno
    names = []
    while parser.stream.current.type != 'block_end':
      names.append(parser.parse_expression())
      parser.stream.skip_if('comma')

    # At this point, names is a correctly filled array of names
    call = self.call_method('_callback', args=[nodes.List(names)])
    result = nodes.CallBlock([call], [], [], [])
    result.set_lineno(lineno)
    return result

  def _callback(self, names, caller=None):
    # Here names should contain a list of names, but it's either undefined or 
    # a list of Undefined, or I get an error before reaching this callback
    # (generally saying that arguments cannot be read)
    pass 
```

我尝试了几件事，但让我说问题确实出在参数格式（`names`解析函数中我的值的内容）是如果我替换`nodes.List(names)`为，我会在回调参数中`nodes.Const(42)`收到正确的值。`42`

[编辑] 此版本代码的错误详细信息如下：

```
Exception on /login [GET]
Traceback (most recent call last):
  File "E:\Python27\lib\site-packages\flask-0.9-py2.7.egg\flask\app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "E:\Python27\lib\site-packages\flask-0.9-py2.7.egg\flask\app.py", line 1360, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "E:\Python27\lib\site-packages\flask-0.9-py2.7.egg\flask\app.py", line 1358, in full_dispatch_request
    rv = self.dispatch_request()
  File "E:\Python27\lib\site-packages\flask-0.9-py2.7.egg\flask\app.py", line 1344, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "E:\myapplication\user.py", line 126, in login
    return template_or_json('user/login.html', form=form)
  File "E:\myapplication\ajax.py", line 32, in template_or_json
    return render_template(template_name, **context)
  File "E:\Python27\lib\site-packages\flask-0.9-py2.7.egg\flask\templating.py", line 125, in render_template
    context, ctx.app)
  File "E:\Python27\lib\site-packages\flask-0.9-py2.7.egg\flask\templating.py", line 107, in _render
    rv = template.render(context)
  File "E:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg\jinja2\environment.py", line 894, in render
    return self.environment.handle_exception(exc_info, True)
  File "E:\myapplication\templates\user\login.html", line 1, in top-level template code
    {% extends "layout.html" %}
  File "E:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg\jinja2\environment.py", line 443, in _generate
    return generate(source, self, name, filename, defer_init=defer_init)
  File "E:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg\jinja2\compiler.py", line 63, in generate
    generator.visit(node)
  File "E:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg\jinja2\visitor.py", line 38, in visit
    return f(node, *args, **kwargs)
  File "E:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg\jinja2\compiler.py", line 803, in visit_Template
    frame.inspect(node.body)
  File "E:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg\jinja2\compiler.py", line 201, in inspect
    visitor.visit(node)
  File "E:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg\jinja2\visitor.py", line 38, in visit
    return f(node, *args, **kwargs)
  File "E:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg\jinja2\compiler.py", line 347, in visit_CallBlock
    self.visit(node.call)
  File "E:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg\jinja2\visitor.py", line 39, in visit
    return self.generic_visit(node, *args, **kwargs)
  File "E:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg\jinja2\visitor.py", line 43, in generic_visit
    for node in node.iter_child_nodes():
AttributeError: 'list' object has no attribute 'iter_child_nodes' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:55:23.973

CallBlock 期望实际调用作为第一个参数，而不是一些调用列表。

所以，你只需要使用

```
nodes.CallBlock(call, [], [], []) 
```

代替

```
nodes.CallBlock([call], [], [], []) 
```

# maven - Maven 仅将中央存储库与 Nexus 一起使用

> ID：11988091
> 
> 赞同：5
> 
> 时间：2012-08-16T13:20:51.433
> 
> 标签：maven, nexus

我已经设置了 Nexus 来代理中央 Maven 存储库并添加了一个镜像`settings.xml`：

```
<mirror>
    <id>nexus</id>
    <mirrorOf>central</mirrorOf>
    <url>http://my-host:8081/nexus/content/repositories/central/</url>
</mirror> 
```

它工作正常，但如果我尝试添加额外的存储库，`pom.xml`就像这样：

```
<repository>
    <id>jboss</id>
    <url>http://repository.jboss.org/nexus/content/repositories/releases/</url>
</repository> 
```

Maven 只是看不到这些存储库，直到我`<mirror>`从`setting.xml`. 我还尝试将其他存储库镜像到 Nexus，但没有成功：Maven 仍然只使用中央存储库。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T05:50:42.697

找到了整整两种解决问题的方法。

通过使用配置文件：http: [//www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)

或者通过在 Nexus 中使用分组：http: [//www.sonatype.com/books/nexus-book/reference/confignx-sect-managing-groups.html](http://www.sonatype.com/books/nexus-book/reference/confignx-sect-managing-groups.html)

在提问之前阅读文档似乎很有帮助:)

# security - 经典 ASP 中的 OWASP

> ID：11988092
> 
> 赞同：1
> 
> 时间：2012-08-16T13:20:54.777
> 
> 标签：security, asp-classic, owasp

我正在尝试将 OWASP 与一些经典 ASP 应用程序一起使用，但没有找到太多关于如何操作的信息，比如一步一步的。

该网站被视为启动点：[https](https://www.owasp.org/index.php/Classic_ASP_Security_Project) ://www.owasp.org/index.php/Classic_ASP_Security_Project但有人有视频，或一步一步？

真的很感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T08:03:32.833

经典 ASP 中没有真正的安全性。

*   没有身份验证模型，因此每个应用程序都必须做自己的事情
*   会话管理很弱，无法轮换会话标识符或防止会话劫持。没有反 CSRF 支持
*   没有授权模型，因此每个应用程序都必须做自己的事情。这意味着大多数经典的 ASP 应用程序在表示层、业务逻辑层和数据模型层都存在访问控制问题。
*   输入验证很弱，因为大多数输入验证是字符串替换，这是不够的。
*   输出编码只有 server.htmlencode() 和 urlencode，但其他 10 个左右的输出上下文没有其他方法，所以很可能是 XSS
*   除了使用存储过程之外，没有其他方法可以防止 SQL 注入，但如果你做错了，就会充满风险。
*   如果不使用 ActiveX 服务器对象调用 Win32 api 以使用 Windows 事件日志，则没有简单的记录方法。这既不容易也不简单，因为它们被设计为与本地化资源一起使用，而不像 syslog。
*   ASP 中的安全配置很少，反映了其简单而古老的根源。在代码或 global.asa 中几乎没有什么可以改进的。

有人努力将 ESAPI 移植到经典 ASP。我不认为他们完成了。您也许可以通过 COM 导出将 ESAPI 用于 .NET，但我不一定会打赌它会正常工作。

在这个阶段，您应该考虑升级到 ASP.NET 4.0 或更高版本。

感谢
Andrew van der Stock
OWASP 开发人员指南 2013 领导者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:57:35.930

您可以使用 Microsoft AntiXSS 代替 OWASP，它是一个 .Net 库。唯一的问题是您不能直接从 Classic Asp 实例化它。您必须创建一个 .net dll（从 COM 可见）并在其中包装来自 AntiXSS 的函数。

下载：[http ://www.microsoft.com/en-us/download/details.aspx?id=28589](http://www.microsoft.com/en-us/download/details.aspx?id=28589)

# python - urllib 编码问题

> ID：11988095
> 
> 赞同：1
> 
> 时间：2012-08-16T13:21:01.293
> 
> 标签：python, encoding, urllib2

我正在开发一个网络爬虫来自动下载巴西网站上的一些文档。它使用了一些未知的编码（在 head 标签中没有定义字符集）。

只需很少的努力，人们就可以阅读这些文件。但真正的问题是，列出文档的页面使用的链接带有包含重音字符的 url。但是，在不知道页面编码的情况下，当我从 urllib2.urlopen 检索它时，字符都乱了。

例如`Í`字符来作为`Cyrillic capital letter E`。

我正在使用 BeautifulSoup 并且 prettify 不起作用，因为 urllib2 已经返回带有坏字符的文档。

还有一件事：`soup.originalEncoding`返回`None`。

如何设置`urllib2.urlopen`以识别字符集或设置“预期编码”，以便返回在浏览器上显示的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:26:09.340

可以从标题中检索字符集。我会给你我使用的代码，但它源自[如何在 python 中下载任何（！）具有正确字符集的网页？](https://stackoverflow.com/questions/1495627/how-to-download-any-webpage-with-correct-charset-in-python). 而且，他在解释这个过程方面做得更好。所以，我只是指出你那里。

# c++ - 仅用于内部目的的类的所有变量/成员的技术术语是什么？

> ID：11988100
> 
> 赞同：0
> 
> 时间：2012-08-16T13:21:20.273
> 
> 标签：c++

是否有程序员常用的技术术语来谈论 C++ 类的变量和成员，这些变量和成员仅用于内部目的（如一些受保护的静态常量），最终用户不应使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:36:05.077

也许您要搜索的词是[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)，这是他们在大学里教给您的关于面向对象编程的四个流行词之一（另外三个是继承、多态和抽象）。

# android - 用安卓设备检测音符

> ID：11988103
> 
> 赞同：3
> 
> 时间：2012-08-16T13:21:27.143
> 
> 标签：android, audio

是否可以使用安卓设备的麦克风从哨子中获取当前音符？我正在寻找一个库 android 兼容的女巫可以做那种事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:28:57.297

看看这个开源[吉他调音器](http://code.google.com/p/open-guitar/)。

[你应该在TunerEngine.java](http://code.google.com/p/open-guitar/source/browse/trunk/src/com/jordanro/guitarweirdo/tuner/audioUtil/TunerEngine.java)中找到你需要的东西。

# php - 为一系列 HTML 文本字段执行 JavaScript 函数

> ID：11988104
> 
> 赞同：1
> 
> 时间：2012-08-16T13:21:27.550
> 
> 标签：php, javascript, mysql, html

## 概括

*   我正在制作一个订购单，它将“项目数量”乘以“单价”，以通过 JavaScript 给出“小计”。
*   订单存储在 MySQL 数据库中并通过 PHP 检索。
*   我想手动输入“单价”，我希望在我输入该数字后会发生乘法。
*   有 10 行项目（一个数组）。
*   所有编写的代码都按预期正确执行。

## 问题

*   我的 JavaScript 函数只为第一行运行，而不是其他任何行。
*   我想为每一行，每种项目类型运行。

## 我的代码

### JS

```
function calc(){
    baseprice=parseInt(document.getElementById("baseprice").value);
    units=parseInt(document.getElementById("units").value);
    x=baseprice*units;
    document.getElementById("sub").value=x;
} 
```

### PHP/SQL

```
$alter=0;
//previous miscellaneous code
while($rows=mysql_fetch_array($sql))
{
    $alter=$alter+1;
 //edit       
$subCalc="<td><input name='units_".$alter."' id='units_".$alter."' type='hidden' value=".$rows['SUM(pizza_orders.qty)']."><input name='baseprice_".$alter."' id='baseprice_".$alter."' type='text' size='2' onchange='calc(this);'></td><td><input name='sub_".$alter."' id='sub_".$alter."' type='text' size='3'></td></tr>";

 //alternates the table row colour by modulus
    if ($alter %2 ==0){
        echo "<tr><td>".$rows['item_order']."</td>";
        echo "<td>".$rows['SUM(pizza_orders.qty)']."</td>".$subCalc;
    }else{
            echo "<tr class=\"alt\"><td>".$rows['item_order']."</td>";
            echo "<td>".$rows['SUM(pizza_orders.qty)']."</td>".$subCalc;
    }
} 
```

### 样本结果/情况

![在此处输入图像描述](../Images/953bd94547a825538ce04f7c7434f622.png)

### 延期

在右下角进行总计，将所有小计字段添加为“onchange”。

```
subTotal=parseInt(document.getElementById("sub" + el.id.replace('baseprice', '')).value);                                                                                   document.getElementById("grandtotal")=  subTotal+parseInt(document.getElementById("grandtotal").value); 
```

[演示 > JS 小提琴](http://jsfiddle.net/leechyeah/eVLGU/4/ "演示 > JSFiddle")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:24:51.743

一个 id 在页面上必须是唯一的，您在页面上有多个具有相同 id 的输入。因此，为什么它只在第一个输入上执行计算。最好的办法是在“baseprice”和“units”输入中附加一个数值来区分每一行。此外，将“this”关键字传递给 calc 函数以引用触发该函数的元素。

示例行：

```
 <tr>
    <td>
    <input id="units_1" name="units_1" type="hidden" value="10" />
<!-- attach an onchange handler to baseprice_1, when a change is made trigger the calc function. -->
    <input id="baseprice_1" name="baseprice_1" type="text" onchange="calc(this);" />
    <input id="sub_1" name="sub_1" type="text" />
    </td>
    </tr> 
```

JS：

```
/* An array to store the subtotals. */
grandTotalArr = [];

    function calc(el){
/* el = this (which is a reference to baseprice_1) */
        baseprice=parseInt(el.value);
        units=parseInt(document.getElementById("units" + el.id.replace('baseprice', '')).value);
        x=baseprice*units;
        document.getElementById("sub" + el.id.replace('baseprice', '')).value=x;

/* Store the subtotal in the grandTotalArr using it's id as the key. */
grandTotalArr["sub" + el.id.replace('baseprice', '')] = x;
/* Implode all values with the + operator, and evaluate as a JS expression. Once evaluated, update the grand total. */
document.getElementById('grand_total').value = eval(grandTotalArr.join('+'));
    } 
```

# javascript - 从 firefox 扩展替换 nsICertificateDialogs

> ID：11988107
> 
> 赞同：4
> 
> 时间：2012-08-16T13:21:33.287
> 
> 标签：javascript, firefox-addon, certificate, xpcom, nss

我正在尝试`nsICertificateDialogs`用我自己的实现替换对话框。我已经有一个扩展来处理来自 webmail 的 smime 邮件。我希望能够将 Mozilla 证书存储与我的扩展一起使用。我发现导出 smime 证书/密钥（在我的扩展中使用它）的唯一可能性是通过导出 pfx 文件。

[我从命令行调用 nsIX509CertDB.nsIX509CertDB 时](https://stackoverflow.com/questions/10613562/failure-while-calling-nsix509certdb-nsix509certdb-from-command-line)取消了原始证书 teddialog 并按照此处所述注册了我的失败（取消注册旧工厂并使用正确的 contractID 注册我的）。当我打电话时，`Cc[@mozilla.org/nsCertificateDialogs;1].getService(Ci.nsICertificateDialogs);`我的班级被实例化。调用时`certDB.importPKCS12File(null, certfile)`我得到一个`NS_ERROR_FAILURE`并且我的对话框类没有被实例化。

FF 实例化证书对话框有什么区别。我该如何测试它？我错过了什么？

编辑：我的证书对话框类不会被 ff 实例化 - 即使使用有效令牌调用 certDB.importPKCS12File(token, certfile); 在更改调用 var certdialogInterface = Cc[sMimeCertificateDialog.mozillaContractID] .getService(Ci.nsICertificateDialogs); 正确实例化我的类（随后是一些 QueryInterface 调用）

编辑：我上传了一个（希望如此）简单的复制器到[http://www.sodgeit.de/dialog_reproducer.zip](http://www.sodgeit.de/dialog_reproducer.zip)查看 src/chrome/components/smime_certificate_dialog.js 和 src/tests/smime_certificate_dialog_test.js

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:46:18.733

> FF 实例化证书对话框有什么区别。

其实没有区别。当 Firefox 需要文件密码时，它会[调用`getNSSDialogs()`函数](http://hg.mozilla.org/mozilla-central/file/35b8d6ef5d46/security/manager/ssl/src/nsPKCS12Blob.cpp#l519)，并且该函数会与您的[调用](http://hg.mozilla.org/mozilla-central/file/c676b554c7bb/security/manager/ssl/src/nsNSSComponent.cpp#l3082)[等效`getService()`](http://hg.mozilla.org/mozilla-central/file/c676b554c7bb/security/manager/ssl/src/nsNSSComponent.cpp#l3082)。但是，`getService()`仅在第一次实例化组件时，后续调用不会再次导致实例化 - 这可能是您看不到任何来自 Firefox 代码的原因的解释。

另一个潜在问题是您没有将任何令牌传递给函数。这意味着 Firefox 将[尝试确定令牌本身](http://hg.mozilla.org/mozilla-central/file/35b8d6ef5d46/security/manager/ssl/src/nsPKCS12Blob.cpp#l72)并调用[`GetSlotWithMechanism()`](http://hg.mozilla.org/mozilla-central/file/35b8d6ef5d46/security/manager/ssl/src/nsKeygenHandler.cpp#l357). 如果有多个可用令牌，它将显示一个选择对话框，它基本上会调用`Cc["@mozilla.org/nsTokenDialogs;1"].getService(Ci.nsITokenDialogs).ChooseToken()`. 所以它可能会出错，因为这个组件在你的 xpcshell 中不可用——这意味着你必须要么替换它，要么明确指定一个令牌。

# mysql - sql表的命名约定

> ID：11988108
> 
> 赞同：1
> 
> 时间：2012-08-16T13:21:38.290
> 
> 标签：mysql, sql, code-conversion

> **可能重复：**
> [mysql命名约定](https://stackoverflow.com/questions/2625973/mysql-naming-convention)

sql表的最佳命名约定是什么？

我们可以用大写和小写或驼峰式命名它们吗？

哪个是对的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:26:44.317

据我所知，只要整个数据库的格式相同，就没有太大关系。一些带有 't_'、'tbl' 的前缀或根本没有前缀

# image - 花哨的盒子和图片的链接

> ID：11988116
> 
> 赞同：0
> 
> 时间：2012-08-16T13:22:10.583
> 
> 标签：image, fancybox

```
https://lh4.ggpht.com/uB0Rq6-3If1Irf6aMJY7P9Er4BmHVNLqLP_cNNwnjEBpj7jPcwarTpjaowd066O6j70 
```

这是我想在 Fancy Box 中显示的图像示例，但它会显示随机字符。可能是因为标题图片（我认为）。请帮助在精美的框中正确显示这种图像。谢谢![在此处输入图像描述](../Images/402e122ce851855afdb7850a7ae432ae.png)

加载图像后花式框的随机显示输出示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:23:34.930

尝试

```
$(document).ready(function(){
 $('.fancybox').fancybox({
  "type":"image"
 });
}); 
```

检查[http://fancybox.net/faq](http://fancybox.net/faq) No.6 for v1.3.x ...或[http://fancyapps.com/fancybox/#support](http://fancyapps.com/fancybox/#support) No.5 for v2.x

**编辑**：在这里添加了一个[演示](http://www.picssel.com/playground/jquery/imageFromURL_17aug12.html)

# eclipse - Eclipse 检查（Ctrl+shift+I）不工作

> ID：11988117
> 
> 赞同：23
> 
> 时间：2012-08-16T13:22:12.573
> 
> 标签：eclipse

我在 Eclipse 中检查了一个 Maven 项目，但无法检查变量（右键单击变量并单击检查选项）。

当我尝试这样做时，我收到以下消息：

```
To perform any evaluation, an expression must be compiled in the 
context of a java project's build path. The current execution 
context is not associated with a java project in the work-space. 
```

任何人都可以知道这可能是什么原因吗？

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T17:00:01.460

**[这](http://www.eclipse.org/forums/index.php/t/153106/)**可能有用：

> 在调试窗口中找到您所在断点所在的线程。右键单击它。在重新启动下应该是编辑启动配置选择。选择那个。
> 
> 选择源选项卡。添加。Java 项目。选择代码所在的java项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-13T10:41:42.367

此外，在您的启动配置中，请确保正确指定了源路径。

也就是说：运行/调试配置/源选项卡/添加.../Java项目

确保包含您的源代码的项目在该列表中！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T05:05:53.387

我通过执行以下操作解决了这个问题：

右键单击`project ->build path -> select source tab -> add folder`然后我添加了包含 java 类的文件夹。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-25T19:38:41.527

在我的情况下，运行配置配置正确。但我需要：

*   右键单击线程
*   点击：编辑源查找...
*   check：在路径上搜索重复的源文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-02T07:10:36.550

我得到了同样的错误信息。

为了解决这个问题 `"Debug Configuration" >> {{JAVA_DEBUG_APPLICATION_NAME}} >> Source (tab)`

检查源是否正确添加，

为了我，

1.  在调试 java 代码时，它会打开不应编辑的类文件。

2.  也收到了错误信息，

我已经从源选项卡中删除了源，它解决了两个问题

# javascript - jQuery.Validate - 如何将错误结果放在不同的地方？

> ID：11988118
> 
> 赞同：0
> 
> 时间：2012-08-16T13:22:13.157
> 
> 标签：javascript, jquery, validation

我想将 jQuery.Validate 生成的所有错误放在一个地方。

前任：

```
 <input type="text" id="Text1" class=".name" />
    .
    .
    .
    <input type="text" id="Text2" />
    <input type="text" id="Text3" />
    <input type="text" id="Text4" />

    <div id="errors"> I want to put errors results here! </div> 
```

我已经尝试过这样说，但不起作用：

```
 jQuery('.name').rules('add', {
        required: true,
        messages: {
            required: 'Type a name'
        },
        errorElement: "div",
        errorLabelContainer: "#errors"
    }); 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:44:26.337

像这样使用errorPlacement：

```
errorPlacement: function(error, element) {
    error.appendTo("#errors");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:12:21.283

您使用是正确的`errorLabelContainer`，但是您设置 jQuery Validate 的方式似乎是错误的。您需要调用**表单**`validate`而不是单个元素。这就是您最终指定所有规则和消息的地方，以及. 此外，您需要在每个输入上指定属性（一个属性是不够的）：**`errorLabelContainer``name``id`**

 **所以想象你的表格看起来像这样（缩写形式）：

```
<form id="myFormId">
<input type="text" name="Text1" id="Text1" class=".name" />
</form> 
```

然后你会有这样的javascript：

```
$(document).ready(function(){
    $('#myFormId').validate({
        rules: {
           Text1: {
              required: true
           }
        },
        messages: {
          Text1: {
              required: 'Type a name'
          }
        },
        errorLabeLContainer: '#errors'
    });
}); 
```**

# javascript - 解释主干对象和类创建模式

> ID：11988122
> 
> 赞同：7
> 
> 时间：2012-08-16T13:22:25.543
> 
> 标签：javascript, backbone.js

我是中等水平的 javascript 开发人员，试图了解骨干库在内部是如何工作的，如果有人帮助我解决一些挑战，我将不胜感激。

**所以这就是我的理解**

Backbone 中构造函数的基本定义是

```
Backbone.Model = function(attributes, options) { } 
```

然后他们使用通用的扩展方法在我们的构造函数的原型中添加通用特性。

```
_.extend(Backbone.Model.prototype, Backbone.Events, {...}) 
```

现在直到这部分我确切地知道发生了什么，并且很乐意通过以下代码实例化新对象

```
var user = new Backbone.Model() 
```

**这是我发现具有挑战性的部分**

当然这不是我们在 Backbone 中实例化对象的方式，而是我们使用扩展方法

```
var Users = Backbone.Model.extend({});
var user = new Users() 
```

在主干代码中

```
Backbone.Model.extend = extend;

var extend = function(protoProps, classProps) {
        var child = inherits(this, protoProps, classProps);
        child.extend = this.extend;
        return child;
};

var inherits = function(parent, protoProps, staticProps) {
    var child;
    if (protoProps && protoProps.hasOwnProperty('constructor')) {
        child = protoProps.constructor;
    } else {
        child = function() {
            return parent.apply(this, arguments);
        };
    }
    _.extend(child, parent);
    ctor.prototype = parent.prototype;
    child.prototype = new ctor();
    if (protoProps) _.extend(child.prototype, protoProps);
    if (staticProps) _.extend(child, staticProps);
    child.prototype.constructor = child;
    child.__super__ = parent.prototype;
    return child;
}; 
```

请解释一下继承函数内部发生了什么以及扩展方法方法的好处是什么

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T14:11:59.253

Underscore 的[`extend`](http://underscorejs.org/#extend)函数将第二个参数中的成员（函数和属性）合并到第一个参数中。例如：

```
var reciever = { 
    name: "Jonny",
    age: 29
};

var supplier: {
    languages: [ "javascript", "actionscript" ];
    sayHi: function () { 
        console.log("Hi, name name is " + this.name);
    }
};

_.extend(receiver, supplier); 
```

执行上述代码后，接收器对象将被扩充（修改），现在看起来像这样：

```
/*
    {
        age: 29,
        languages: [ "javascript", "actionscript" ],
        name: "Jonny",
        sayHi: <<function>>
    }
*/
console.dir(receiver); 
```

请注意，供应商对象保持未修改，接收者对象从供应商处获得所有属性和功能。这个过程通常称为[mixin](http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/)，用于避免重新声明函数（作为更广泛的编程原则的一部分，知道[DRY - 不要重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）。

现在，对于 Backbone 的`Model.extend`函数，它充当[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)来返回一个构造函数，该构造函数可用于创建模型的新实例，内部`inherits`函数完成大部分工作。该`inherits`函数将 mixin 概念更进一步，并在提供的对象和父对象（在本例中为对象）之间创建了一个[继承链。](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)`Backbone.Model`

```
var child;
if (protoProps && protoProps.hasOwnProperty('constructor')) {
    child = protoProps.constructor;
} else {
    child = function() {
        return parent.apply(this, arguments);
    };
} 
```

第一个代码块试图在提供的对象哈希中找到一个构造函数；如果不存在，那么它会为您创建一个新的构造函数，它会自动将提供的参数传递给`Backbone.Model`自己的[构造函数](http://backbonejs.org/#Model-constructor)。

```
_.extend(child, parent); 
```

接下来我们调用 underscore 的 extend 方法，将提供的属性和函数哈希中的所有属性和函数混合到构造函数中；这可确保您创建的每个实例都有自己的数据（例如：属性不是静态的，并且在您创建的所有实例之间共享）。

```
ctor.prototype = parent.prototype;
child.prototype = new ctor();
if (protoProps) _.extend(child.prototype, protoProps);
if (staticProps) _.extend(child, staticProps);
child.prototype.constructor = child;
child.__super__ = parent.prototype; 
```

`Backbone.Model`最后一个块是最令人兴奋的，它在新创建的 Constructor 函数的原型和父 ( ) 对象的原型之间建立了关系。通过这样做，构造函数返回的所有新实例都将包含通常的主干模型方法（即：[get](http://backbonejs.org/#Model-get)和[set](http://backbonejs.org/#Model-set)），因为它们是从原型链中解析出来的。如果您想了解有关此特定代码块的更多信息，[Douglas Crockford 关于原型继承的文章](http://javascript.crockford.com/prototypal.html)是一个很好的起点。

这种方法的要点是，它允许您提供属性和函数的散列，生成的 Constructor 函数将用作蓝图，例如：

```
var Person = Backbone.Model.extend({
    name: "Jon Doe",
    sayHi: function () { 
        console.log("Hi, my name is " + this.get("name"));
    }
}); 
```

现在您实例化的每个`Person`对象都将具有一个`name`属性和一个`sayHi`函数，例如：

```
var dave = new Person();
dave.sayHi();   // "Hi, my name is Jon Doe"

dave.set("name", "Dave");
dave.sayHi();   // "Hi, my name is Dave"

// You can also supply properties when invoking the constructor.
var jimmy = new Person({ name: "Jimmy" });
jimmy.sayHi();  // "Hi, my name is Jimmy" 
```

# c# - 如何在 XNA 中绘制具有更高位色调颜色的精灵？

> ID：11988124
> 
> 赞同：0
> 
> 时间：2012-08-16T13:22:25.543
> 
> 标签：c#, graphics, xna

spritebatch.draw 重载只接受 Color 类作为 tint 的颜色参数，而 Color 类在每个颜色通道中只存储 8 位。

我想要做的是告诉 spritebatch 用更准确的色调绘制一个精灵，例如每个颜色通道中的 16 位而不是 8 位。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:05:46.430

通过使用 API 的原始渲染功能编写您自己的精灵批处理器。内置的 XNA`SpriteBatch`类旨在涵盖大多数一般情况；在渲染 2D 图形时，每个颜色通道很少需要超过 8 位，因此它没有该选项。

您是否有理由需要高于 32 位的颜色精度？你到底想完成什么？

# c++ - 使用 boost 原始套接字的第 2 层桥接

> ID：11988130
> 
> 赞同：0
> 
> 时间：2012-08-16T13:22:35.223
> 
> 标签：c++, sockets, boost

我需要在两个网络之间架起一座桥梁。网络 1 中的第 2 层数据必须在网络 2 中复制（通过 UDP 无线电链路发送）。我会试着去：

*   使用 boost 原始套接字读取第 2 层。
*   使用 UDP 连接发送它。
*   使用 UDP 连接接收它。
*   使用 boost 原始套接字写入“第 2 层数据”。

可以使用boost raw sockets来做到这一点吗？有人有一些示例代码吗？我有点失落。

# c++ - 尝试使用 fread 读取文本文件时出现“System.AccessViolationException”类型的未处理异常

> ID：11988135
> 
> 赞同：0
> 
> 时间：2012-08-16T13:22:48.030
> 
> 标签：c++

我正在尝试使用***fread()***读取一个简单的文本文件（此处为 out.wsp），但我得到“ *'System.AccessViolationException' 类型的未处理异常*”。我在 VS2010 express 中遇到了这个错误，但是当我在 Linux 中编译和运行它时它很好。知道代码有什么问题吗？另外，由于我是 C/C++ 的新手，还有其他方法可以做这样的事情吗？

```
#include "stdafx.h"

#include <stdio.h>

using namespace std;

 int main(){

    char*  wspfile    = "out.wsp";
    FILE*  fp = NULL;

    fp = fopen( wspfile , "r");
    if(fp == NULL) {
        printf("Error: can not open file %s\n", wspfile);
        return -1;
    }   
    rc = fread(wspfile,sizeof(wspfile)-1,1, fp);
    wspfile[rc] = '\0';
    fclose(fp);

return 0;

} 
```

谢谢，

凡塔齐奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:26:08.670

修改字符串文字是非法的（未定义的行为）：

```
char*  wspfile    = "out.wsp";
...
rc = fread(wspfile,sizeof(wspfile)-1,1, fp); /* sizeof() is a sizeof(char*),
                                                not an array which is probably
                                                what you intended. */ 
```

这将是访问冲突的原因。

要解决，您*可以*更改为：

```
char wspfile[] = "out.wsp"; 
```

或者，更好`char[]`的是，对文件名中的内容使用不同的变量。

请注意，签名为[`fread()`](http://en.cppreference.com/w/c/io/fread)：

```
size_t fread( void *buffer, size_t size, size_t count, FILE *stream ); 
```

发布的代码，如果`wspfile`是一个数组，将要求`fread()`读取大小的字节`1`项。`7`如果成功，`fread()`将返回`1`读取的项目数，而不是字节数。以下行：

```
wspfile[rc] = '\0'; 
```

将有效地将数组截断为单个字节。更改`size`和`count`参数的顺序以更正此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:25:25.033

```
rc = fread(wspfile,sizeof(wspfile)-1,1, fp); 
```

不正确，因为`wspfile`是字符串文字。修改此文字是未定义的行为。使用其他缓冲区，或者可能是`std::string`.

n3337 2.14.5/12

> 是否所有字符串文字都是不同的（即，存储在不重叠的对象中）是实现定义的。尝试修改字符串文字的效果是未定义的。

# codeigniter - codeigniter 库中的 __call 函数

> ID：11988136
> 
> 赞同：0
> 
> 时间：2012-08-16T13:22:49.137
> 
> 标签：codeigniter

我只是通过 curl 库让 codeigniter 理解代码。这是[链接](http://philsturgeon.co.uk/code/codeigniter-curl)。有一个我不确定的函数 __call()。它是 CI 中的内置函数吗？我想每当调用这个库的任何方法时都会调用它，例如使用

```
$this->curl->simple_get(); 
```

有人可以阐明一下。我在 codeigniter 用户指南上找不到太多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:33:31.480

否 - __call() 是一个 php 函数。它被称为魔术方法之一。

魔术方法`__call()`是对未声明的方法什么`__get()`和`__set()`对未声明的数据成员。

当程序疲于执行开发时尚未在类中定义的方法时，这些方法会在内部自动调用。

`__call()`有两个参数。第一个参数是程序调用的未声明方法的名称，第二个参数是一个数组，其中包含传递给未声明数组的参数列表

*   检查[http://www.php.net/manual/en/language.oop5.overloading.php#object.call](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)

例子

```
class Customer {

    public function __call($name, $args) {
        var_dump($name);
        echo "\n";
        var_dump($args);
        echo "\n";
    }
}

$c = new Customer();
$c->setName("some","name"); 
```

[参考](http://www.sunilb.com/php/php5-oops-tutorial-magic-methods-__call-method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:35:14.227

__call() 是 OOP 中的一个神奇函数，如果找不到该函数，就会调用它。所以因为Curl类内部没有simple_get()函数，所以会调用__call()函数，可以看到，那里有注释，方法调用会发生什么。

# php - CodeIgniter：我无法从购物车中删除商品

> ID：11988137
> 
> 赞同：0
> 
> 时间：2012-08-16T13:22:55.003
> 
> 标签：php, codeigniter

我正在尝试通过在控制器中发出命令来从购物车中删除该物品。这是我的代码：

```
function remove($rowid) {   
    $data = array(
        'rowid'   => $rowid,
        'qty'     => 0
    );

    $this->cart->update($data);

    redirect('bookings');
} 
```

现在，当我单击链接以删除该项目时，它返回错误“404 页面未找到”。这是示例网址：

[http://example.com/reservation/bookings/remove/c81e728d9d4c2f636f067f89cc14862c](http://example.com/reservation/bookings/remove/c81e728d9d4c2f636f067f89cc14862c)

“remove()”函数与我的“add()”位于同一个文件中，可以正常工作。

这是我的“add()”函数的代码：

```
public function add()
{
    $this->load->model('Bookings_model');
    $this->load->helper('url');
    $this->load->library('session');
    $this->load->library('cart');

    $bookings = $this->Bookings_model->get($this->input->post('id'));

    $data['type'] = $this->input->post('type');
    $data['checkin'] = $this->input->post('checkin');
    $data['checkout'] = $this->input->post('checkout');
    $data['nights'] = (strtotime($data['checkout']) - strtotime($data['checkin'])) / (60 * 60 * 24);

    $insert = array(
        'id' => $this->input->post('id'),
        'name' => $bookings->room_type,
        'checkin' => $data['checkin'],
        'checkout' => $data['checkout'],
        'nights' => $data['nights'],
        'price' => $bookings->default_price,
        'qty' => 1,
        'amount' => $bookings->default_price
    );

    $this->cart->insert($insert);

    redirect('bookings');
} 
```

我尝试了所有方法，但现在已经两天了，我仍然找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-30T10:35:53.850

使用此功能从购物车会话中删除项目：

```
function remove($rowid){
    $this->load->library('cart');
    $data = array();
   foreach($this->cart->contents() as $items){
       if($items['rowid'] != $rowid){
           $data[] = array('id' => $items['rowid'],
                           'qty' => $items['qty'],
                           'price' => $items['price'],
                           'name' => $items['name']);
       }
   }

   $this->cart->destroy();
   $this->cart->insert($data);
   redirect('bookings');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:23:50.510

更好地使用：

```
 public function delete_item($id)
    {            
        $this->db->where('itemid', $id);
        $res = $this->db->delete('mycart');
        return $res; 
    } 
```

在你的控制器中：

```
 function remove()
   {
         $result = $this->model_name->delete_item($id);
         if($result)
                    redirect('view or controller'); 
```

我们直接从模型重定向。可能有时会出错，但大多数情况下它会失败......我希望它有用......

```
 } 
```

# sql - 标签="值" 和 价值

> ID：11988146
> 
> 赞同：1
> 
> 时间：2012-08-16T13:23:15.763
> 
> 标签：sql, xml, database, import

我有 XML 格式的数据库，我需要将其导出到 SQL Server DB。因此，我可以导出 xml，例如： tag="value" 但我的 XML 是：`<tag>value</tag>`.

我的查询：

```
DECLARE @tempTable TABLE (
userId INT,
userName NVARCHAR(50),
password NVARCHAR(50)
)
DECLARE @xml XML
SET @xml="my_XML"

INSERT INTO @tempTable<br />
SELECT Tbl.Col.value('@userId', 'INT'),<br />
       Tbl.Col.value('@userName', 'NVARCHAR(50)'),<br />
       Tbl.Col.value('@password', 'NVARCHAR(50)')<br />
FROM   @xml.nodes('//row') Tbl(Col)

SELECT * FROM @tempTable 
```

我可以将第一种情况转换为第二种情况吗？或者也许还有其他方法？

XML 数据示例：

```
<row>
<userId>1</userId>
<userName>Alpha</userName>
<password>1234</password>
</row>
<row>
<userId>2</userId>
<userName>Beta</userName>
<password>5678</password>
</row> 
```

当我尝试导入它时，我收到包含 2 行和 NULL 单元格的数据表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:34:17.170

所以你要...？

```
 SELECT Tbl.Col.value('userId[1]','int'),
 Tbl.Col.value('userName[1]', 'NVARCHAR(50)'),
 Tbl.Col.value('password[1]', 'NVARCHAR(50)')
 FROM @xml.nodes('//row') Tbl(Col) 
```

# image-processing - 使用 DirectX HLSL 像素着色器为照片创建图像效果

> ID：11988150
> 
> 赞同：1
> 
> 时间：2012-08-16T13:23:35.190
> 
> 标签：image-processing, directx, gdi+, pixel-shader

是否可以使用 DirectX 像素着色器为照片创建图像效果？我有一个 C++ 应用程序，其中包括一种照片数据库管理器。它利用 GDI+ 进行图像处理，我想为用户提供一些精美的图像效果——我想通过 DirectX 像素着色器来实现。我想实现类似的效果，例如 Shazzam 工具通过其示例库提供开箱即用的效果 - 不幸的是，我使用的是纯 GDI+ 而没有 WPF。

为了在 GDI+ 位图中创建图像效果，我想到了以下步骤：

1) 通过 GDI+ 加载图像

2) 初始化 DirectX，加载/编译着色器，将 GDI+ 图像转换为 DirectX 中的纹理

3) 在 DirectX 中绘制 4 个顶点并将照片用作纹理

4) 应用像素着色器

5）用像素着色照片保存表面

1-4 已经解决了，但是如何实现第 5 步呢？

目前我正在使用以下代码段来收集修改后的照片：

```
d3dDevice->GetRenderTarget(0, &surface);

D3DXSaveSurfaceToFile("Test.png", D3DXIFF_PNG, surface, NULL, NULL);

surface->Release();
surface = NULL; 
```

这段代码不符合我的需要，因为它捕获了整个场景而不仅仅是纹理（=照片）。我怎样才能将像素着色的照片纹理恢复到原始大小？我想获得与 Shazzam Tool 提供的相同的结果，但没有 WPF ......

先感谢您！

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:26:23.997

我只需创建一个具有适当尺寸的屏幕外渲染目标（渲染到纹理）并将其保存为表面（就像您已经做的那样）。渲染到可见的屏幕空间（听起来你现在正在这样做）绝对是你最有可能尝试避免的事情。如果您还想显示结果，请渲染渲染的纹理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-30T21:15:14.863

这是一个老问题，但是有 Direct2D 效果可以满足您的需求。

[https://docs.microsoft.com/en-us/windows/win32/direct2d/built-in-effects](https://docs.microsoft.com/en-us/windows/win32/direct2d/built-in-effects)

# dojo - dojo 的最低构建配置是什么样的？

> ID：11988154
> 
> 赞同：11
> 
> 时间：2012-08-16T13:23:56.767
> 
> 标签：dojo, dojo-build

我研究了[构建教程](http://dojotoolkit.org/documentation/tutorials/1.7/build/)，找到了[web 构建](http://build.dojotoolkit.org/)（仅限 1.7.2），并测试了几个示例 - 但是，我找不到构建系统的简单解释。

假设我的应用是一个网页：

```
<script src="./js/App/other_non_amd_stuff_working_independently.js">
<script src="./js/lib/dojo/dojo.js" data-dojo-config="async: true"></script>
<script src="./js/App/Main.js"> 
```

Dojo SDK 位于 ./lib/ 中，Main.js 包含 Dojo 配置 + 应用启动：

```
require({
    packages:[{
        name:"App",
        location:"../../App"
    }]
},  
[ "dojo/query",
  "dijit/layout/BorderContainer", 
  "App/Foo",
  "dojo/domReady!"], function(query, BorderContainer, Foo) { ... }); 
```

我现在的问题很简单：如何从我所有的 Dojo/AMD 内容中创建一个脚本文件？我只想更换

```
<script src="./js/lib/dojo/dojo.js" data-dojo-config="async: true"></script>
<script src="./js/App/Main.js"> 
```

与单

```
<script src="./js/Main.minified.js"> 
```

让构建系统在这方面工作似乎有些不重要。它要么尝试将 ./App/ 中的所有文件转换为 AMD 模块（这还不是我想要的 ..），要么无法找到 App/Main。我尝试构建一个构建配置文件（app.profile.js），但我不明白这一点，只是它增加了（IMO 不必要的）复杂性。**如何使构建系统仅连接我的 App/Main.js 包括。依赖项？**

任何有关理解构建系统的更好教程的提示也值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:19:41.700

请参阅此 QnA 以将您的层构建到 dojo.js 文件中。我不妨分享一下我的经验，因为我花了一些试验和错误才能让我的引导程序正常工作。实际上，答案很容易在“dojosdk/util/buildscripts/profiles/baseplus.profile.js”文件中找到。

[Dojo 自定义构建 1.6 到单个文件中](https://stackoverflow.com/questions/11917391/dojo-custom-build-1-6-into-a-single-file/11920373)（与新构建系统相同的设置，但对于 2.0 可能仍会进行一些更改）

## 如何创建与dojo.js缝合在一起的主应用层

```
dependencies ={
  layers:  [
      {
      name: "dojo.js", // overwrites regular dojo.js and ++'s your layer
      dependencies: [
         "app.main"
      ]
  }
} 
```

**请记住正确地为位置添加前缀**

由于您将“App”模块放置在 dojo SDK 根目录之外，因此需要`packages`在`dojoConfig`. 但是，属性键`prefixes`用于图层配置文件。

```
prefixes: [
    [ "dijit", "../dijit" ],
    [ "dojox", "../dojox" ],
    [ "App", "../../App" ]
] 
```

## 如何创建子模块层

您可能想要构建您的应用程序的子模块，以便如果弹出对话框例如需要额外的额外 - 它们可以在运行时在单独的包中下载。为了确保已经通过您的*main-module-layer*加载的依赖项不包含在*sub-module-layer*中，您要查找的属性键是`layerDependencies`.

它看起来像这样的组合结果：

```
dependencies ={
  layers:  [
      {
        name: "../dojo/dojo.js", // overwrites regular dojo.js and ++'s your layer
        dependencies: [
         "app.Main"
        ]
      }, {
        name: "../../App/JITModule.js",
        layerDependencies: [
         "../../App/Main"   // tells this layer that the dependencychain in Main is allready loaded (programmer must make sure this is true ofc)
        ]
        dependencies: [
         "App.JustInTimeDialog"
        ]
      }
  ]
  prefixes: [
    [ "dijit", "../dijit" ],
    [ "dojox", "../dojox" ],
    [ "App", "../../App" ]
  ]
} 
```

这应该会产生两个优化的层文件，一个带有标准的 one-line-dojo.js**加上**一个 dojo.cache 条目，其中包含来自您的应用程序的文件。示例用法如下。请注意，您仍然需要调用`require`任何缓存的模块，否则它们将仅保留在缓存中。

## 将其放在 HTML 中

*注意*将您的 dojoConfig 放入 ./js/App/Main.js 文件将无法按预期工作，dojo.js 常规内容会在图层上方加载。

```
<head>
  <script>
     function JITDialog() {
          require([ "App.JITDialog" ], function(dialoglayer)  {
             var dialog = new App.JustInTimeDialog();
             dialog.show();
          });
     }

     var dojoConfig = {
         async: true,
         packages:[{
            name:"App",
            location:"../../App"
         }]
     }
  </script>

  <script src="./js/lib/dojo/dojo.js"></script>

  <script>    
     require("App.Main", function() {
        // loads the layer, depending on the structure of App.Main class,
        // you can call your initializations here
        var app = new App.Main();
        app.run();
     });
  </script>

</head>
<body>
  <button onclick="JITDialog();">
      Download sub-module-layer and show a dialog on user interaction
  </button>
</body> 
```

# ssas - 使用 MDX 查询使用成员属性填充下拉列表框

> ID：11988157
> 
> 赞同：0
> 
> 时间：2012-08-16T13:24:02.947
> 
> 标签：ssas, mdx, analysis, olap

我是 SSAS 的新手，如何使用 MDX 查询用成员属性填充下拉列表框？例如，我只希望 Fiscal Year 的成员属性出现在框中。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:36:01.187

我假设您的意思是“会计年度每个成员的姓名”而不是“会计年度的成员属性”？

您可以访问多维数据集属性并在代码中列出维度的成员。但是，如果您真的想编写 MDX 来执行此操作，则可以使用以下方法：

```
SELECT {[Fiscal Year].defaultMember.children} ON ROWS, {} ON COLUMNS FROM [CubeName] 
```

也许你想要维度内的某个级别？改为使用`[Fiscal Year].[Quarter].members`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T23:13:39.950

我不确定您要填写什么样的下拉框。您是在创建 Windows 或 Web 应用程序，还是在使用 SSRS 或其他东西？

不过，一般来说，您可以使用 MDX 查询来获取维度 MyDimension 中属性 MyAttribute 的成员属性，如下所示：

```
with 
member measures.MyProperty as 
   MyDimension.MyAttribute.CurrentMember.Property("Property Name")
select 
measures.MyProperty on columns, 
MyDimension.MyAttribute.MyAttribute.Members on rows 
from MyCube 
```

# java - mvc:resources 映射特定的 jar 文件

> ID：11988158
> 
> 赞同：1
> 
> 时间：2012-08-16T13:24:03.957
> 
> 标签：java, spring, model-view-controller

我正在使用 Spring MVC，并且在配置中我使用以下行使一些 Javascript 文件可用于我的应用程序：

```
<mvc:resources mapping="/resources/**" location="/,classpath:/META-INF/" /> 
```

但是，我担心这可能会导致安全问题、不可预见的情况等，因为我的类路径上的每个 jar（而且有很多！）都可以从 /resources/ 访问具有 META-INF 文件夹的用户正在四处闲逛。

有没有办法只将位置映射到特定的 jar 文件。在我的情况下，它将是位于以下位置的 Spring-JS jar（相对于我的 Eclipse 工作区的根目录）：

```
/Jars/spring 3.0.5/spring-js-2.0.7.RELEASE.jar 
```

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:31:45.443

相反，您应该限制暴露的特定位置。例如，对于 spring-js jar，您可以这样做：

`<mvc:resources mapping="/resources/**" location="classpath:/META-INF/web-resources" />`

我怀疑你是否可以指定确切的罐子。

# sphinx - SPHINX SE：获取记录问题

> ID：11988164
> 
> 赞同：0
> 
> 时间：2012-08-16T13:24:21.370
> 
> 标签：sphinx

在 SphinSE 中，我可以从 sphinx 服务器获取任何记录。

示例：我有以下记录：

```
Id  Name      Item   Price
1   karthik   Car     1000
2   Car       karthik 200 
```

要获取记录，我使用了以下查询

select * from indexname WHERE query='karthik;mode=any';

```
 It has return 2 records. How can i get record, which record having Name AS karthik using SPHINXSE. Please suggest 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:37:01.413

```
select * from indexname WHERE query='@Name karthik;mode=extended'; 
```

或者可能

```
select * from indexname WHERE query='@Name "^karthik$ ";mode=extended'; 
```

# html - 启用或禁用 html 中的复选框

> ID：11988165
> 
> 赞同：42
> 
> 时间：2012-08-16T13:24:23.233
> 
> 标签：html, jsp

我想根据条件启用或禁用表格行中的复选框。

代码 -

```
<td><input type="checkbox" name="repriseCheckBox" disabled={checkStat == 1 ? true : false}/></td> 
```

如果 checkStat = 1，需要禁用复选框，否则保持启用。

它不工作。它禁用所有复选框。有什么建议么 ？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-16T13:26:40.543

如果您指定`disabled`属性，那么您给它的值*必须*是`disabled`. （在 HTML 5 中，您可以省略除属性值之外的所有内容。在 HTML 4 中，您可以省略除属性名称之外的所有内容。）

如果您不想禁用控件，则根本不要指定该属性。

禁用：

```
<input type="checkbox" disabled>
<input type="checkbox" disabled="disabled"> 
```

启用：

```
<input type="checkbox"> 
```

无效（但通常错误恢复被视为禁用）：

```
<input type="checkbox" disabled="1">
<input type="checkbox" disabled="true">
<input type="checkbox" disabled="false"> 
```

因此，在不了解您的模板语言的情况下，我猜您正在寻找：

```
<td><input type="checkbox" name="repriseCheckBox" {checkStat == 1 ? disabled : }/></td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-02T05:40:48.417

```
<input type="checkbox" value="" ng-model="t.IsPullPoint" onclick="return false;" onkeydown="return false;"><span class="cr"></span></label> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:28:55.730

HTML 解析器根本不会像这样解释内联的 javascript。

你可以这样做：

```
<td><input type="checkbox" id="repriseCheckBox" name="repriseCheckBox"/></td>

<script>document.getElementById("repriseCheckBox").disabled=checkStat == 1 ? true : false;</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-02T06:15:37.403

在jsp中你可以这样做：

```
<%
boolean checkboxDisabled = true; //do your logic here
String checkboxState = checkboxDisabled ? "disabled" : "";
%>
<input type="checkbox" <%=checkboxState%>> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-01T09:34:22.727

According the [W3Schools](http://www.w3schools.com/jsref/prop_checkbox_disabled.asp) you might use JavaScript for disabled checkbox.

```
<!-- Checkbox who determine if the other checkbox must be disabled -->
<input type="checkbox" id="checkboxDetermine">
<!-- The other checkbox conditionned by the first checkbox -->
<input type="checkbox" id="checkboxConditioned">
<!-- JS Script -->
<script type="text/javascript">
    // Get your checkbox who determine the condition
    var determine = document.getElementById("checkboxDetermine");
    // Make a function who disabled or enabled your conditioned checkbox
    var disableCheckboxConditioned = function () {
        if(determine.checked) {
            document.getElementById("checkboxConditioned").disabled = true;
        }
        else {
            document.getElementById("checkboxConditioned").disabled = false;
        }
    }
    // On click active your function
    determine.onclick = disableCheckboxConditioned;
    disableCheckboxConditioned();
</script> 
```

You can see the demo working here : [http://jsfiddle.net/antoinesubit/vptk0nh6/](http://jsfiddle.net/antoinesubit/vptk0nh6/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-12-19T18:31:08.360

我知道这个问题有点老了，但这是我的解决方案。

```
 // HTML
 // <input type="checkbox" onClick="setcb1()"/>
 // <input type="checkbox" onClick="setcb2()"/>

 // cb1 = checkbox 1
 // cb2 = checkbox 2
  var cb1 = getId('cb1'), 
      cb2 = getId('cb2');

  function getId(id) {
    return document.getElementById(id);
  }

  function setcb1() {
    if(cb1.checked === true) {
      cb2.checked = false;
      cb2.disabled = "disabled"; // You have to disable the unselected checkbox
    } else if(cb1.checked === false) {
      cb2.disabled = ""; // Then enable it if there isn't one selected.  
    }
  }

  function setcb2() {
    if(cb2.checked === true) {
      cb1.checked = false;
      cb1.disabled = "disabled"
    } else if(cb2.checked === false) {
      cb1.disabled = ""
  } 
```

希望这可以帮助！

# javascript - 使用 http-proxy 进行负载均衡

> ID：11988168
> 
> 赞同：1
> 
> 时间：2012-08-16T13:24:30.947
> 
> 标签：javascript, node.js, load-balancing, node-http-proxy

我正在检查[http-proxy 模块](https://github.com/nodejitsu/node-http-proxy/blob/master/examples/balancer/simple-balancer.js)，基本上我所理解的是它在具有相同端口的两个不同主机之间切换。所以这里的问题是是否可以在使用相同主机的同时在两个不同的端口之间切换（例如，两个主机都是 IP 地址）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:33:56.870

您可以根据需要在任意数量的端口上的任意数量的主机之间进行平衡。http-proxy 是可编写脚本的。

```
var servers = [
  {host:'app1.site.com', port:9000},
  {host:'app2.site.com', port:9010},
  {host:'app3.site.com', port:9020}
];
var i = 0;

var httpProxy = require('http-proxy');

httpProxy.createServer(function(req, res, proxy) {
  proxy.proxyRequest(req, res, servers[i = (i + 1) % 3]); // rotate
}).listen(80); 
```

您进行平衡的逻辑取决于您。上面的例子只是做一个循环。

您可能还想定期“测试”主机以确保它仍然可用并禁用它，如果它不可用（例如发送一个 OPTIONS 请求）。

# linq - EntityRef 或 EntitySet 的一对一关系？

> ID：11988170
> 
> 赞同：1
> 
> 时间：2012-08-16T13:24:40.147
> 
> 标签：linq, silverlight, windows-phone-7, linq-to-sql

我应该使用什么来建立一对一的关系？根据[这个](http://windowsphonegeek.com/tips/Windows-Phone-Mango-Local-Database-SQL-CE--Association-attribute)我应该使用`EntitySet`，但对我来说似乎不合逻辑，因为我不想要一个集合而是一个项目。

有没有一对一关系的好例子？

编辑：更改了链接，我犯了一个错误

# wordpress - Wordpress 分类模板

> ID：11988171
> 
> 赞同：0
> 
> 时间：2012-08-16T13:24:41.213
> 
> 标签：wordpress, custom-taxonomy

我有一个名为 productcategory 的自定义分类法，它是这样声明的

```
register_taxonomy(
    'productcategory',
    'product',
    array(  'hierarchical' => FALSE, 'label' => __('Kategorier'),  
                    'public' => TRUE, 'show_ui' => TRUE,
                    'query_var' => 'productcategory',
                    'rewrite' => true )
); 
```

当我浏览到[http://www.myserver.com/productcategory/mycategory](http://www.myserver.com/productcategory/mycategory)时，我想查看该类别中所有产品的列表。为此，我在主题文件夹中创建了模板“taxonomy-productcategory.php”。但是，当我浏览到该 URL 时，它使用 index.php 页面，并且没有显示任何帖子（产品）。我已经用 Google 搜索并阅读了 Codex，但我无法理解这一点。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:56:14.817

这似乎是 WP (3.4.1) 中的一个错误，我将永久链接格式改回默认值，然后又改回我的首选，然后它又可以工作了！

# soapexception - 如何使用 WebService 扩展重试 SOAP 调用（在服务器，而不是客户端）

> ID：11988181
> 
> 赞同：1
> 
> 时间：2012-08-16T13:25:36.207
> 
> 标签：soapexception, soap-extension

我开发了一个 SOAP 服务，它可以通过 WAN 访问一个挑剔的后端。我想实现重试逻辑以使消费者应用程序免于实现重试逻辑。

[编写重试逻辑的最简洁方法？](https://stackoverflow.com/questions/1563191/c-sharp-cleanest-way-to-write-retry-logic)有一些有趣的想法，但我想避免在数十次调用中使代码复杂化。

我想我需要实现一个 SOAPExtension 来检查 retrySpecific 异常，然后执行内部重试。

**P-Code:** SOAP Call Enters WebService
调用后端
如果通过，返回数据
如果失败，调用后端
如果通过，返回数据
如果失败，返回异常

关于如何实现这一点的任何想法？

# haskell - 这个电源组生成函数是如何工作的

> ID：11988184
> 
> 赞同：4
> 
> 时间：2012-08-16T13:25:47.173
> 
> 标签：haskell

在尝试为给定列表生成电源组时，我在互联网上遇到了这个功能。没有解释，但测试表明它似乎工作正常。我无法理解这个功能是如何工作的。我会感谢任何这样的解释。

```
generateSubset [] = [[]]
generateSubset (x:xs) = let p = generateSubset xs in p ++ map (x:) p 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T13:43:47.163

这是幂集的一个很容易证明的性质： P(A ∪ B) = {a ∪ b | a ∈ P(A), b ∈ P(B)}。特别是，如果我们将一个特定的集合 S 分解为一个元素 s 和所有不是 s 的元素 S'，那么

```
P(S) = P({s} ∪ S')
     = {a ∪ b | a ∈ P({s}), b ∈ P(S')}. 
```

现在，P({s}) 足够小，我们可以手动计算它：P({s}) = {{}, {s}}。利用这个事实，我们学习

```
P(S) = {a ∪ b | a ∈ {{}, {s}}, b ∈ P(S')}
     = {b | b ∈ P(S')} ∪ {{s} ∪ b | b ∈ P(S')}
     = P(S') ∪ {{s} ∪ b | b ∈ P(S')}
     = let p = P(S') in p ∪ {{s} ∪ b | b ∈ p} 
```

也就是说，计算非空集的幂集的一种方法是选择一个元素，计算余数的幂集，然后将元素添加或不添加到每个子集中。您展示的函数只是将其转换为代码，使用列表作为集合的表示：

```
-- P         ({s} ∪ S') = let p = P(S')             in p  ∪ {{s} ∪ b | b ∈ p}
generateSubset (x:xs)   = let p = generateSubset xs in p ++     map (x:) p 
```

唯一剩下的就是给出递归的基本情况，这直接来自幂集的定义：

```
-- P          ({}) = {{}}
generateSubset []  = [[]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T13:55:19.263

您提供的代码使用了很多 Haskell 的语法糖。（因为其他人已经涵盖了语义，我将省略它。）这是我在代码中注意到的主要语法：

*   缺少类型注释。Haskell 使用类型推断，这使得类型注释是可选的（但推荐）。使用 GHCi 确定类型：

    ```
    *Main> :t generateSubset
    generateSubset :: [a] -> [[a]] 
    ```

*   模式匹配。请参阅[LYAH](http://learnyouahaskell.com/syntax-in-functions)以获得很好的介绍。

*   让表达式。再次，参见[LYAH](http://learnyouahaskell.com/syntax-in-functions#let-it-be)。

*   部分应用—— `(x:)`。 [LYAH](http://learnyouahaskell.com/higher-order-functions)为了胜利！

*   操作员部分 -`(x:)`再次。这允许部分应用中缀函数（在本例中为`:`）。它与以下内容相同：

    ```
    myCons :: a -> [a] -> [a]
    myCons e es = e : es

    myPartial :: [a] -> [a]
    myPartial = myCons x -- partial application 
    ```

*   使用函数/运算符优先级 - `p ++ map (x:) p`。这被解析为`(p) ++ (map (x:) p)`，因为[函数应用程序总是比中缀运算符应用程序具有更高的优先级](http://www.haskell.org/tutorial/functions.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T13:40:00.970

空列表的幂集是一个只包含空列表的列表。

为了计算非空列表的幂集，它首先计算尾部的幂集。然后，它将该幂集与一个版本的幂集连接起来，其中头部已预先添加到所有子集。因此，如果尾部的幂集是`[[2,3],[2],[3],[]]`，头部是`1`，则产生的幂集将是`[[], [3], [2], [2,3], [1],[1,3],[1,2],[1,2,3]]`。

# javascript - 如果表格已经绘制，如何更改值

> ID：11988188
> 
> 赞同：5
> 
> 时间：2012-08-16T13:25:55.957
> 
> 标签：javascript, function, jquery-datatables, predefined-variables

我正在使用 jQuery 的 DataTables 插件在我的网络应用程序上绘制表格。一切正常。但其中一种选择是按下详细信息按钮以打开一个信息窗口，该窗口将具有附加值。现在该部分工作正常，但我的表是用类定义的，所以当用户使用菜单更改语言时，我可以动态更改语言。

正如我在开始时所说的那样，我得到的唯一内容是英语。

我的预定义表：

```
function fnFormatDetails ( nTr )
{
    var aData = oTable.fnGetData( nTr );
    var sOut = '<table cellpadding="5" cellspacing="0" border="0" style="background-color:whitesmoke; padding-left:10%; padding-right:10%; width:100%">';
    sOut += '<tr><td style="text-align:left"><span class="id_prog">ID Program : '+aData[0]+'</span></td><td style="text-align:left"><span class="id_in_perc">Increment : '+aData[3]+'</span></td></tr>';
    sOut += '<tr><td style="text-align:left"><span class="id_var">Machine position : '+aData[1]+'</span></td><td style="text-align:left"><span class="id_tot_in_var">Total inc : '+aData[4]+'</span></td></tr>';
    sOut += '<tr><td style="text-align:left"><span class="id_dti_var">DTI : '+aData[2]+'</span></td></tr>';
    sOut += '</table>';

    return sOut;
} 
```

当我更改语言并且我的 javascript 通过类名更改每个值时，什么都没有发生，但是对于我的其余代码，这可以正常工作，但对于这个预定义的表却没有。任何的想法？

编辑

这是一个事件监听器：

```
$('#jphit tbody td img').live( 'click', function () {
        var nTr = $(this).parents('tr')[0];
        if ( oTable.fnIsOpen(nTr) )
        {
            /* This row is already open - close it */
            this.src = "images/plus-icon.png";
            oTable.fnClose( nTr );
        }
        else
        {
            /* Open this row */
            this.src = "images/minus-icon.png";
            oTable.fnOpen( nTr, fnFormatDetails(nTr), 'details' );
        }
} ); 
```

因此，当单击按钮时，我调用`fnFormatDetails()`函数，但仅在设置时才绘制它。因此，当我动态更改该表的值时，没有任何变化。

你需要更多细节吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:28:24.957

如果我理解正确，您尝试动态更改始终在页面上的表格的内容。我不知道你为什么要把它放在你的 javascript 中，但是当你使用 jQuery 时，我建议使用不同的方法。

这将在您的 html 文件中。

```
<table id="myTable">
    <tr>
        <td><span id="id1"><!-- content will load here --></span></td>
        <td><span id="id2"><!-- content will load here --></span></td>
    </tr>
</table> 
```

我会使用 id 而不是 class 因为这些值是唯一的。

并且用javascript来替换html标签的内容。

```
function fnFormatDetails ( nTr ) {
    var aData = oTable.fnGetData( nTr );
    $("#id1").html("My data here " + aData[0]);
    $("#id2").html("My data here " + aData[1]);
    ...
} 
```

这会将具有指定 id 的标签的 html 内容替换为您指定为属性的内容。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:26:28.790

1）我建议你通过console.log查看fnFormatDetails中的aData。这将确保函数被执行并且您在数组中看到正确的值。

2) 尝试通过 nTr.html("") 清除旧表，看看是否有任何改善。

您能否粘贴表格的图像以便我们更好地理解。

# javascript - 如何在没有点击的情况下突出显示 HTML 中的文本

> ID：11988194
> 
> 赞同：0
> 
> 时间：2012-08-16T13:26:16.313
> 
> 标签：javascript, html, jsp, servlets, highlight

我想知道如何在 jsp 网页中突出显示从 jsp 或 serlevt 传递的文本变量。我不想使用 onclick 调用 javascript，有什么方法可以进入该页面，然后网页中的文本已经用黄色突出显示。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:28:47.833

也许您可以使用 onload 突出显示文本:)

你可以尝试类似的东西`window.onload=func1;`

```
function func1() {
  document.getElementById("yourtext").style.backgroundColor="#f3f3f3";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:29:42.337

也许您应该考虑在对象的特定类上使用 css background-color 属性？或者可能只是在您将对象传递给 html 时内联。

[http://www.w3schools.com/cssref/pr_background-color.asp](http://www.w3schools.com/cssref/pr_background-color.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:30:01.757

您可以将特定的类或 Id 添加到文本中，然后根据需要设置样式

```
 <span id="mytext">this is what you want to style</span> 
```

然后在你的 CSS

```
#mytext{color:yellow;} 
```

带一堂课

```
 <span class="mytext">this is what you want to style</span>
 <span class="mytext">this is what you want to style</span>
 <span class="mytext">this is what you want to style</span> 
```

然后在你的 CSS

```
.mytext{color:yellow;}  // this will apply to all span with the class mytext 
```

# java - Jetty 中的交易没有及时持续

> ID：11988199
> 
> 赞同：4
> 
> 时间：2012-08-16T13:26:30.127
> 
> 标签：java, hibernate, gwt, jpa, guice

我继承了一些代码，在尝试添加一些功能时，这些代码对我不起作用。我不是 Java web 方面的专家，所以如果我需要任何额外的帮助来为您提供所需的信息，我提前道歉。

我正在开发一个 GWT 应用程序，它在后端使用 Hibernate 和 Guice-Persist 来持久保存到 MySQL。不幸的是，我遇到了一个奇怪的问题，其中 - 在一台服务器上 -`put`事务没有及时保存到数据库以被后续`get`事务识别。**在 Windows 和 Linux 的 Tomcat6 中嵌入 GWT Eclipse 插件（可能是 6.1.11？）的任何版本的 Jetty 中，一切都可以完美运行，但是当我尝试使用`jetty-maven-plugin`版本在 Linux 中运行它时`8.1.0`（也在`8.1.5`，我唯一的两个版本） '已经尝试过），我遇到了交易未及时完成的​​问题。**（或者，我会对一个解决方案感到兴奋，该解决方案只允许我使用 Jetty 以外的其他东西在 Maven 中正确运行我的集成测试，从而完全回避这个问题。看起来代码在我的所有其他服务器上下文中都有效。我试过了）。

这是我用来持久化对象的代码：

```
public T put(T entity) {
    EntityManager entityManager = entityManager();
    EntityTransaction transaction = entityManager.getTransaction();        
    transaction.begin();
    try {
        entity = entityManager.merge(entity);
        entityManager.persist(entity);
        transaction.commit();

    } catch (Exception e) {
        //do exception handling, including rollback
    }

    return entity;
} 
```

和获取代码：

```
public List<T> getAll() {
    Query query = entityManager().createQuery("select c from " + clazz.getSimpleName() + " c");

    return (List<T>) query.getResultList();
} 
```

同样，发生的事情是我进行了（间接）调用`getAll()`以允许客户端查看数据。然后，如果他们做出选择，`put`请从客户那里拨打电话。然后，一旦我得到响应，请调用`getAll()`以更新显示给用户的数据。不幸的是，我从数据库返回的数据并没有反映更新的数据，而是反映了`put()`调用之前存在的数据。数据库最终会更新，当我自己检查数据库时，它似乎会立即更新。如果我重新加载数据几次，Web 应用程序最终也会更新以显示正确的数据。所以我怀疑某些缓存层可能会响应我的`getAll()`在没有实际检查数据库的情况下请求，但我真的不确定如何进行——事务和实体管理器对我来说相当新。

我已经尝试过`flush()`ing 和`close()`ing 我的实体管理器，而不是提交我的事务，并且行为没有任何变化。

我在构造函数中注入了我的 EntityManager Provider：

```
private final Class<T> clazz;
private final Provider<EntityManager> entityManagerProvider;

public BaseDao(final Class<T> clazz, final Provider<EntityManager> entityManagerProvider) {
    this.clazz = clazz;
    this.entityManagerProvider = entityManagerProvider;
} 
```

并获得这样的实体经理：

```
protected EntityManager entityManager() {
    return entityManagerProvider.get();
} 
```

谢谢！

为了后代，这是我的 GuiceServletContextListener：

```
public class GuiceServletConfig extends GuiceServletContextListener {
@Override
protected Injector getInjector() {
    DispatchServletModule dispatchServletModule = new DispatchServletModule();
    Injector injector = Guice.createInjector(new ServerModule(), new JpaPersistModule(getPersistenceUnit()),
            dispatchServletModule);

    PersistService persistService = injector.getInstance(PersistService.class);
    persistService.start();

    BootStrapper bootStrapper = injector.getInstance(BootStrapper.class);
    bootStrapper.init();

    return injector;
}

private String getPersistenceUnit() {
    InputStream inputStream = getClass().getResourceAsStream("/database.properties");

    if (inputStream == null) {
        throw new RuntimeException();
    }

    try {
        Properties properties = new Properties();
        properties.load(inputStream);

        return properties.getProperty("persistenceUnit");
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
}

} 
```

还有我的 ServletModule：

```
public class DispatchServletModule extends ServletModule {      
  @Override
  public void configureServlets() {
    serve("/" + ActionImpl.DEFAULT_SERVICE_NAME + "*").with(DispatchServiceImpl.class);
  }
} 
```

我尝试在 configureServlets() 中添加一个过滤器，而不是手动启动持久性会话，以尝试使用 session-per-http-request ( per [this page](http://code.google.com/p/google-guice/wiki/JPA) )，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:43:21.250

首先，您可能应该回滚`catch`块中的事务并且不要忽略异常（至少记录它）。但是`guice-persist`支持`@Transactional`注解，所以你根本不需要手动进行事务管理。请参阅[事务 - google-guice](http://code.google.com/p/google-guice/wiki/Transactions)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:40:04.550

您是否希望关闭与事务关联的会话？

```
public T put(T entity) {
    EntityManager entityManager = entityManager();
    EntityTransaction transaction = entityManager.getTransaction();        
    transaction.begin();
    try {
        entity = entityManager.merge(entity);
        entityManager.persist(entity);
        transaction.commit();

    } catch (Exception e) {
        //do exception handling, including rollback
    } finally {
        entityManager.close();
    }

    return entity;
} 
```

但是您可以强制事务与刷新同步：

```
public T put(T entity) {
    EntityManager entityManager = entityManager();
    EntityTransaction transaction = entityManager.getTransaction();        
    transaction.begin();
    try {
        entity = entityManager.merge(entity);
        entityManager.persist(entity);
        entityManager.flush();
        transaction.commit();

    } catch (Exception e) {
        //do exception handling, including rollback
    }

    return entity;
} 
```

问候，

# internationalization - 在战争中使用 OSGi WAB 作为资源包

> ID：11988204
> 
> 赞同：0
> 
> 时间：2012-08-16T13:26:44.490
> 
> 标签：internationalization, osgi, war, wab

我目前正在为内部开发的大量 Web 应用程序开发翻译服务。我面临的问题是，我们将所有应用程序与包含不同语言的属性文件打包在一起以获得 i18n 支持。

在头脑风暴会议期间提出的建议之一是让翻译服务成为 OSGi 模块。问题是我对 OSGi 的经验是 0 并且不知道如何去做。进一步的讨论和谷歌搜索建议将服务开发为 WAB。

我面临的问题是如何从 WAB 调用资源？有可能还是我走错了路？

任何帮助都会得到很大的帮助。

问候 S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T05:38:46.100

如果不了解更多细节，很难确定，但您可能想要使用 wab 而不是战争，而不是战争内部。wab 只是与 osgi 元数据的战争。一种很好的国际化方法（以及这个想法出现的原因，我猜）是对资源包使用片段。[这篇文章](http://www.javabeat.net/2011/11/writing-an-osgi-web-application/)有一个开发wab然后为国际化添加片段的教程。

我还建议不要尝试直接从 osgi 包中加载资源，因为 osgi 封装通常会使资源无法访问，除非您对包导入和导出做了丑陋的事情。相反，查找服务并让它进行资源加载。使用声明式服务或蓝图之类的东西比程序化服务访问要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:52:07.043

除非您特别需要在运行时重新部署翻译服务，否则我建议您将其打包为 jar 并将其包含在每个 Web 应用程序中。如果你使用的是 Maven 之类的，更新服务只是增加依赖的版本号，重建和重新部署战争的情况。

# jquery - uploadify 按钮在 IE 中不显示上传按钮

> ID：11988205
> 
> 赞同：3
> 
> 时间：2012-08-16T13:26:45.323
> 
> 标签：jquery, uploadify

我在使用 jquery uploadify 插件时遇到了大麻烦。它适用于 google chrome 和 firefox，但在 IE 7/8 中不显示上传文件按钮。有人对此有想法吗？
我安装了最新的 Flash 播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-06T14:49:38.590

有一个uploadifive 成员，他在旧论坛上发帖，一种检测、隐藏、显示upload'ifive' 或upload'ify' 版本的方法，以使这个更跨浏览器兼容。

由于论坛已关闭，我无法联系他/她。

[http://www.uploadify.com/forum/#/discussion/comment/16896](http://www.uploadify.com/forum/#/discussion/comment/16896)

有没有足够熟练的人来理解用户“筷子”的这篇文章并实现他的代码？

编辑去主题森林，他们有很多替代品，适用于 ie6 及更高版本 >

# c++ - 在模板化函数中调用具有特征的显式构造函数/析构函数

> ID：11988209
> 
> 赞同：1
> 
> 时间：2012-08-16T13:27:21.500
> 
> 标签：c++, typedef, destructor, traits, delete-operator

我正在尝试在模板化函数中调用具有特征的显式构造函数/析构函数。

```
template <int i>
struct Traits
{
};
template <>
struct Traits<1>
{
  typedef Foo type_t;
};
template <>
struct Traits<2>
{
  typedef Bar type_t;
};

template <class Traits>
void DoSomething(void* p_in)
{
  typename Traits::type_t* p = reinterpret_cast<typename Traits::type_t*>(p_in);
  // this works.
  new (p) typename Traits::type_t;
  // neither of following two does work.
  p->~typename Traits::type_t();
  p->typename ~Traits::type_t();
}

// call
void* p_in = malloc(BIG_ENOUGH);
DoSomething<Traits<1> >(p_in);
free(p_in); 
```

在带有 -ansi 标志的 GCC 4.4.3 中，调用显式构造函数可以正常工作。但是，调用显式析构函数不起作用，会出现以下错误：

```
error: expected identifier before 'typename'
error: expected ';' before 'typename' 
```

我怀疑缺少一些括号或关键字。

**更新**

人们问我为什么要这样做......是的，正如预期的那样，我想使用内存池，并为客户端提供两个功能。在内部，它使用一个指向 malloc/free 的内存池的静态指针。

```
template<class Traits>
typename Traits::type_t* memory_pool_new();
template<class Traits>
void memory_pool_delete(); 
```

当然，这种方法有局限性......就像只能使用默认构造函数。我考虑过重载new，但它需要重载所有type_t的new，它会改变现有代码的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:37:00.880

MSDN 网站给出了这个[例子](http://msdn.microsoft.com/en-us/library/35xa3368%28v=vs.80%29.aspx)：

> 要显式调用`s`类 的对象的析构函数`String`，请使用以下语句之一：
> 
> ```
> s.String::~String();     // Nonvirtual call
> ps->String::~String();   // Nonvirtual call
> 
> s.~String();       // Virtual call
> ps->~String();     // Virtual call 
> ```

所以你可以尝试添加一个 typedef 并模仿上面的：

```
typedef typename Traits::type_t TraitsType;

// we now have that p is of TraitsType*
p->TraitsType::~TraitsType(); // nonvirtual call
p->~TraitsType();             // virtual call 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:39:09.533

就个人而言，我会使用本地 typedef，因为`typename Traits::type_t`它有点拗口。如果你不想这样做，那么析构函数的语法是：

```
p->Traits::type_t::~type_t(); 
```

顺便说一句，没有必要搞砸`reinterpret_cast`; 您可以简单地从新表达式初始化类型化指针：

```
typename Traits::type_t* p = new (p_in) typename Traits::type_t; 
```

# java - 压缩hadoop mapreduce输出的最简单有效方法

> ID：11988214
> 
> 赞同：3
> 
> 时间：2012-08-16T13:27:38.660
> 
> 标签：java, hadoop, zip, gzip

我可以将mapreduce输出压缩到gzip

```
"mapred.output.compression.codec=org.apache.hadoop.io.compress.GzipCodec" 
```

为hadoop实现zip编解码器会很简单吗？`ZipCodec`Zip是容器，但我每个存档只需要一个文件，那么使用`CompressionCodec`界面创建是否容易？

或者，也许有一种将`gz`文件转换为`zip`s 的有效方法，因为它们可以使用相同的放气算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:59:40.047

没什么大不了的，你可以包装一个`java.util.zip.ZipOutputStream`.

您可以通过实现自己的编解码器来做到这一点，这是通过扩展`org.apache.hadoop.io.compress.DefaultCodec`.

`org.apache.hadoop.io.compress.CompressorStream`在此编解码器中，您通过分别扩展来包装 java zip 流`org.apache.hadoop.io.compress.DecompressorStream`。

最后，您必须重写`createInputStream`and`createOutputStream`方法并在那里返回包装流的新实例。

仍然有一些编码，我很确定某处必须有一个已经存在的实现（我可能记得几年前它也在 Hadoop 版本中）。

# css - 动态更改 CSS 最小高度值的最简单方法？

> ID：11988219
> 
> 赞同：1
> 
> 时间：2012-08-16T13:27:42.367
> 
> 标签：css

我确信我需要的是可能的，但我希望有人对实现它的最佳方法有任何建议。

我有一个 div，它将包含文本。我希望将 div 的最小高度设置为 250px - 以便设置初始 div 高度。

我的问题是：

如果当前设置`min-height: 250px;`的内容超出了当前设置，我是否可以在通过 250px 后立即应用 500px 的新最小高度值（例如，如果 div 被强制设置为自动设置的 252px 高度`min-height: 500px;`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:32:01.367

这对于纯 CSS 是不可能的，但可以使用 jQuery 来实现：

```
$(function(){
    $("div").each(function(){
        var $this = $(this);
        if ($this.height()>parseInt($this.css("min-height"))){
          $this.css("min-height", "500px");
        }
    });
});​ 
```

[**见演示（jsFiddle）**](http://jsfiddle.net/6shWQ/7/)（演示`25px`用作初始最小高度）

# php - Yii createCommand 与标准

> ID：11988220
> 
> 赞同：2
> 
> 时间：2012-08-16T13:27:44.113
> 
> 标签：php, mysql, yii

我到处找，找不到这个令人费解的问题的答案。

我可以用 Criteria 做几乎所有事情（尽管它可能看起来像代码一样“糟糕”），就像我可以用 createCommand 做的一样。

所以我的问题是：是否存在性能差异，还是只有两种方法可以获得相同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T05:37:40.183

CDbCriteria 和 createCommand 都是在 Yii 框架中创建查询的方法。除此之外，有时您需要不使用这种方式直接运行 mysql 查询。

当您需要使用关系运行连接操作时，使用 CDbCriteria 创建复杂查询非常简单，并且比 createCommand 更好。

但是在性能基础上，createCommand 比 CDbCriteria 更好，因为 CDbCriteria 执行一些模式级别的查询来获取表列，并在每次使用 CDbCriteria 时为每个表执行。而 createCommand 直接执行 mysql 查询，它不需要运行模式级别的查询。

当您开始缓存查询时，性能级别两者几乎相似。

CDbCriteria 的一个更好的功能是它的关系查询。所以我更喜欢使用 CDbCriteria 和 Let yii 以自己的方式处理查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:45:11.677

CDbCriteria 恰好是对某些 CDbConnection（通常是 DAO）功能的一种封装。例如，在 ActiveRecord 模型中，大多数查询函数，如 find() 和类似函数，使用 CDbCriteria 对象来初始化 CommandBuilder 实例。这样，在性能上存在实际差异，因为使用 CDbcriteria 实际上需要一些 php 执行来生成 db 命令。不过，我必须说，这不是毫无意义的。[参考资料](http://www.yiiframework.com/doc/guide/1.1/en/database.ar)告诉我们：

> 尽管 Yii DAO 几乎可以处理任何与数据库相关的任务，但很有可能我们会花费 90% 的时间来编写一些执行常见 CRUD（创建、读取、更新和删除）操作的 SQL 语句。当它们与 SQL 语句混合时，我们的代码也很难维护。为了解决这些问题，我们可以使用 Active Record。

# drupal - 如何在 drupal 中插入 og:video 元标记

> ID：11988226
> 
> 赞同：1
> 
> 时间：2012-08-16T13:28:04.760
> 
> 标签：drupal, facebook-opengraph, meta-tags

我已经尝试了几件事来实现上述目标。我安装了集成的元标记模块，它给了我以下结果

```
<meta name="og:description" content="In this episode, XYZ reporter No Butt Nagir goes undercover to investigate the poor working conditions of house helps, Obama issues a travel alert to Kenya due to the possibility of a terror attack, and Ruto performs Maino’s All the Above!" />
<meta name="og:image" content="http://content.bitsontherun.com/thumbs/4RTFJosA-320.jpg" />
<meta name="og:site_name" content="www/buni.tv" />
<meta name="og:title" content="The XYZ Show Season 6: Episode 5" />
<meta name="og:type" content="movie" />
<meta name="og:url" content="http://buni.asilialtd.com/video/xyz-show-season-6-episode-5" />
<meta name="og:video" content="https://content.bitsontherun.com/players/4RTFJosA-DawDpxmw.swf" />
<meta name="og:video:height" content="315" />
<meta name="og:video:type" content="application/x-shockwave-flash" />
<meta name="og:video:width" content="480" /> 
```

但是我想`<meta name=`改为`<meta property=`

谢谢

# java - 在使用 Web 框架之前我需要了解 JSP 吗？

> ID：11988228
> 
> 赞同：0
> 
> 时间：2012-08-16T13:28:16.673
> 
> 标签：java, frameworks, web

一般来说，在开始使用 Web 框架之前，我需要先熟悉 JSP，还是花太多时间在上面？

如果这有帮助，我可以用 PHP 和 Python 编写代码。Java是一个全新的东西吗？

我问这个的原因是因为我们知道那些来自 ASP 或 VB 的人通常可以轻松学习 Python，而来自 C 或 C++ 的人则很容易喜欢 PHP。

有什么建议吗？

更新：根据 sleske 的建议

> 我不明白为什么有这么多不同方法的 java web 框架，在此之前，我需要知道在开始之前我还需要了解什么，例如 Java EE 和 Tomcat 服务器之间的区别，为什么会有容器等？？？？请赐教。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:14:49.537

这不是强制性的，但如果您知道 Servlet，当然会更好。

就我而言，我是从 JSF 开始的。不久之后，当我需要它时，我了解了 Servlet。

如果您不想花时间在 Servlet 上，我建议您也这样做并尝试 JSF。

一些有用的网站：

[http://www.coreservlets.com/JSF-Tutorial/](http://www.coreservlets.com/JSF-Tutorial/)

[https://sites.google.com/site/freej2eevideotutorial/-java-server-faces-jsf-2-0-video-tutorial-jsf-2-0-video-training](https://sites.google.com/site/freej2eevideotutorial/-java-server-faces-jsf-2-0-video-tutorial-jsf-2-0-video-training)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:39:04.980

这个问题没有明确的答案，但是：

> Java完全是一个新事物吗？

Java 是强类型语言，不像 PHP 或 Python，它们是脚本、解释型语言。您曾经使用过任何类似 Java 的语言吗？（C++、C#）

> 在开始使用 Web 框架之前，我需要先熟悉 JSP 吗？

在我看来，没有必要在一开始就精疲力尽地使用 JSP，但**强烈**建议您了解[Servlets](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/Servlets.html)，因为所有框架都以一种或另一种方式使用它们。就框架而言，那里有很多框架，我无法帮助您做出选择哪个框架的选择。
希望这有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:04:13.177

我想说至少有必要对 JSP 有一个基本的了解，因为大多数 Java 框架都是基于这项技术的。

正如 Less 所说，Servlet 对理解很重要。JSP 页面基本上是一种标记语言，它生成输出 HTML 的 Java 代码。Servlet 技术是其中的核心。

# java - 从 Phonegap HTML5 调用 Java 代码

> ID：11988229
> 
> 赞同：2
> 
> 时间：2012-08-16T13:28:18.873
> 
> 标签：java, cordova

是否可以用 Java 编写代码并在 Phonegap HTML5 中调用它？你能给我举个例子吗？我试过这个例子，但它显示错误。

链接：

*   [http://catchmayuri.blogspot.in/2011/05/getting-access-of-android-java-code-to.html](http://catchmayuri.blogspot.in/2011/05/getting-access-of-android-java-code-to.html)
*   [如何在 Phonegap 中使用 android java 类？](https://stackoverflow.com/questions/11859022/how-to-use-android-java-classes-in-phonegap)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:21:53.550

是的，当然有可能。帮我们一个忙，并遵循插件 API，因为它会让您的生活更轻松。

[http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:53:59.917

这是您的问题的答案：

**是否可以用 Java 编写代码并在 Phonegap HTML5 中调用它？**

是的，您提供的链接就是一个例子。Phonegap 有很多 API，用于通过您的 HTML 5 代码访问设备的功能。（更具体地说是通过javascript）。这些是由 phonegap 家伙使用 java 代码实现的。除了这些，如果您确定您需要其他可用于本地编码的东西，即使用本地 android（通过 java 代码），那么您需要制作一些插件来满足您的要求。

**你能给我举个例子吗？**

您上面给出的链接似乎是一个很好的例子。

**我试过这个例子，但它显示错误。**

请指定错误是什么，以及从哪里得到的。

# python - 将参数作为 HTML 属性传递

> ID：11988232
> 
> 赞同：1
> 
> 时间：2012-08-16T13:28:29.643
> 
> 标签：python, html, bottle

我正在尝试使用 Bottle 和 HTML 来测试 HTTP GET 和 POST。我编写了这段代码，它要求用户输入颜色名称作为参数，如果它存在于预定义的列表中，那么它应该打印找到并显示颜色。但我不知道如何通过论点。如果我尝试使用橙色、红色等默认值，它可以正常工作。

```
from bottle import*
import socket

@error(404)
def error404(error):
    return '<p align=center><b>Sorry, a screw just dropped.Well, we are hoping to find it soon.</b></p>'

@get('/New/rem_serv/:arg')
def nextstep(arg):
_colorlist=['Red','Green','Blue','Yellow','Orange','Black','White']

if arg in _colorlist:
    return "Found the same color \n","<p style='font-weight:bold; text-align:center; background-color:arg;'>" + str(arg)
else:
    return error404(404)

addrIp = socket.getaddrinfo(socket.gethostname(), None)
addrIp = addrIp[0][4][0]
run(host=addrIp, port=80) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:45:51.667

你可以尝试这样的事情：

```
@app.route('/New/rem_serv/:arg')
@view('template.tpl')
def nextstep(arg):
   _colorlist=['Red','Green','Blue','Yellow','Orange','Black','White']
    if arg in _colorlist: 
        context = {'result': "Found the same color %s" % arg}
     else:
        context = {'result': "color not found"}
    return (context) 
```

你也可以试试这个：

```
from bottle import Bottle, run, view, request

app = Bottle()

@app.route('/New/rem_serv/')
@view('template.tpl')
def nextstep():
    """
    get the color from the url 
    http://127.0.0.1:8080/New/rem_serv?color=xxx
    """
    _colorlist=['Red','Green','Blue','Yellow','Orange','Black','White']
    if arg in _colorlist: 
        context = {'result': "Found the same color %s" % request.params.color}
     else:
        context = {'result': "color not found"}
    return (context) 
```

那么剩下的就是template/html/css的问题了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:36:43.203

您正在寻找的是 HTML 和[CSS](http://www.w3schools.com/css/default.asp)。

```
<span style="color:red"><b>This is red</b></span> 
```

使用[模板](http://www.bottlepy.org/docs/dev/tutorial.html#tutorial-templates)制作页面。

# actionscript-3 - 有没有办法在 Adob e AIR 中启用 SVG 支持

> ID：11988234
> 
> 赞同：1
> 
> 时间：2012-08-16T13:28:35.540
> 
> 标签：actionscript-3, air, svg, flex4

我正在使用 Adob​​e AIR 创建桌面应用程序。AIR 应用程序非常简单，它由一个选项卡组成，每个选项卡都包含一个 HTML 组件（AIR HTML 控件）。HTML 组件只是简单地传递一个 URL（位置）并呈现它。

我的问题是其中一个位置是包含 SVG 的页面。示例位置在[这里](http://www.december.com/html/demo/hellosvg.html)

AIR HTML 组件不（似乎）呈现 SVG :( 有没有办法在 AIR 中启用 SVG 或解决方法？

提前致谢。乔恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:43:38.467

根据这篇[文章](http://www.adobe.com/devnet/air/ajax/articles/air_and_webkit.html)，您似乎不走运。

# ajax - 在javascript中访问函数之外的变量

> ID：11988243
> 
> 赞同：1
> 
> 时间：2012-08-16T13:29:08.357
> 
> 标签：ajax, json, forms, function, variables

我有一个小的 javascript 函数可以在提交时验证我的表单。

有了这个，我做了一些基本的验证来检查事情不是空的。如果一个人是否超过 18 岁，还有一个 ajax/json 请求返回 1 或 0。

一切正常，除了 json 部分不会对脚本的其余部分返回有效，它只是该部分的本地部分，对于我的一生，我无法弄清楚如何让它工作。

```
function validate_form() {

    valid = true;

    //Set varialbles
    var firstname = $('#firstname').val();
    var lastname = $('#lastname').val();
    var email = $('#email').val();
    var comments = $('#comments').val();
    var day = $('#day').val();
    var month = $('#month').val();
    var year = $('#year').val();

    if ($('[name=photo]').val() == "") {
        $('#formtext1').fadeOut('fast', function() {
            $('#formtext2').fadeIn('fast', function() {
                // Animation complete.
            });
        });
        valid = false;
    }

    //check that terms have been accepted
    if (myForm.terms.checked == false) {
        $('#formtext1').fadeOut('fast', function() {
            $('#formtext2').fadeIn('fast', function() {
                // Animation complete.
            });
        });
        valid = false;
    }

    if (firstname != "" && lastname != "" && email != "" && comments != "" && day != "" && month != "" && year != "") {} else {
        $('#formtext1').fadeOut('fast', function() {
            $('#formtext2').fadeIn('fast', function() {
                // Animation complete.
            });
        });
        valid = false;
    }

    $.getJSON('mydomainhere.com/dob_validate/' + day + '/' + month + '/' + year, function(result) {    
        //Check dob
        var age = result.age

        if (age) {
            //Do nothing
        } else {
            valid = false;
        }
    });
    return valid;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:33:10.840

您需要`var valid=true;`在函数的顶部（或外部使其成为全局）。当您返回该代码块之后超出范围的结果时，您似乎正在创建一个局部变量。

为了使它与我的评论异步：

```
$.ajax({
 url: 'mydomainhere.com/dob_validate/',
 dataType: 'json',
 async: false,
 data: day + '/' + month + '/' + year,
 success: 
      function(result) {
          var age = result.age 
          if (age) { } 
          else {
           valid = false;
          }
     }
}); 
```

[http://www.w3schools.com/js/js_variables.asp](http://www.w3schools.com/js/js_variables.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:11:25.423

欢迎来到异步回调的美妙世界！

我在这里看到的主要问题是您正在使用`$.getJSON`，并期望它内联执行。你的函数写在问题中的方式，语句

```
return valid; 
```

将在（以下语句）的结果函数**之前执行：**`$.getJSON`

```
//Check dob
var age = result.age

if (age) {
    //Do nothing
} else {
    valid = false;
} 
```

如果您希望在获得 AJAX 调用的结果*后*`return`执行该语句，则必须使 AJAX 调用**synchronous**，而不是*asynchronous*。达伦的回答向您展示了如何做到这一点。

 ****问题中所写的函数的第二个问题是，它`valid`是在函数开始时分配`true`的，然后被分配`false`了几次，但它再也不会接收到值`true`了！这是您的实际代码吗？如果没有，您能否编辑您的问题，并调整它以匹配您的实际代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:26:37.193

从上面的讨论中，我假设您已经更改了选项`async:false`，否则将需要考虑另一种情况。

我怀疑，年龄的返回类型是字符串，那么让我们说

```
var age = '0';

age == 0; // will be evaluated as true,
          // because it only looks for same value by converting to same type 
```

由于返回`age`的是字符串（我的假设） ，因此`else`您的代码部分永远不会被执行。因为 if 条件会将非空字符串评估为 true。

以下值将被评估为假，而所有其他值将被评估为真

*   0 或 -0（由于 IEEE 754 标准，大多数浮点实现都有正零和负零）
*   空值
*   不明确的
*   钠
*   空字符串（“”）
*   `false`本身

因此，您也必须检查类型，

`age !== 0`在 if 条件中使用。

更多信息[罕见的 Javascript 运算符](http://timmywillison.com/pres/operators/#equality)****

# php - SQL 注入攻击

> ID：11988244
> 
> 赞同：1
> 
> 时间：2012-08-16T13:29:10.170
> 
> 标签：php, sql, sql-injection

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我是 PHP 新手。我听说过很多（并且读到过）SQL 注入攻击。我已经习惯了以下编写 PHP 代码的方式。有人可以告诉我这是否容易受到 SQL 攻击。另外，我可以通过什么方式改进此代码以抵御 SQL 攻击？

```
<?php
    if($_POST['submit']){
        $email = protect($_POST['email']);
        $password = protect($_POST['password']);
        $md5password=MD5($password);
        if(!$email || !$password){
            echo '<span style="color: red;" /><center>You need to fill in your <b>User Name</b> and <b>Password</b>!</center></span>';
        }else{
            $res = mysql_query("SELECT * FROM `employer` WHERE `email` = '".$email."'");
            $num = mysql_num_rows($res);
            if($num == 0){
                echo '<span style="color: red;" /><center>The <b>E Mail ID</b> you supplied does not exist!</center></span>';
            }else{
            $res = mysql_query("SELECT * FROM `employer` WHERE `email` = '".$email."' AND `password` = '".$md5password."'");
            $num = mysql_num_rows($res);
            if($num == 0){
                echo '<span style="color: red;" /><center>The <b>Password</b> you supplied does not match the one for that E Mail ID!</center></span>';}else{
                $row = mysql_fetch_assoc($res);
                $_SESSION['uid'] = $row['id'];
                echo "<center>You have successfully logged in!</center>";
                $time = date('U')+50;
                mysql_query("UPDATE `employer` SET `online` = '".$time."' WHERE `id` = '".$_SESSION['uid']."'");
                mysql_query("UPDATE employer (date) VALUES (NOW())");
                header('Location: loggedin_employer.php');
                }
            }
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:31:54.753

你应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇文章](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)。

另外，请阅读此交流：[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# android - 打开在拨出电话时触发的网站

> ID：11988245
> 
> 赞同：0
> 
> 时间：2012-08-16T13:29:12.803
> 
> 标签：android

当Android用户拨打特定电话号码而没有在他的智能手机上安装任何应用程序时，是否有某种方法可以启动他们的浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:30:22.600

如果不使用自定义拨号程序，这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:33:01.490

如果没有在用户的智能手机上安装任何应用程序，这是不可能的。你需要一个带有广播接收器的应用程序来监听[ACTION_NEW_OUTGOING_CALL](http://developer.android.com/reference/android/content/Intent.html#ACTION_NEW_OUTGOING_CALL)，检查提供的电话号码，然后启动一个新的意图来启动浏览器。

# .htaccess - .htaccess 重写语言重定向，页面的两个版本，保留地址

> ID：11988246
> 
> 赞同：0
> 
> 时间：2012-08-16T13:29:14.550
> 
> 标签：.htaccess, mod-rewrite, redirect

希望有人可以给我一个提示。

我的意思是根据浏览器语言和输入的 url 重定向访问（无论 /v2 是否包含在其中）。我想将原始网址保留在地址栏中，所以我知道我只能使用内部 apache 重定向，而不是 301。

```
URL            BROWSER LANGUAGE    INTERNAL REDIRECTION
domain.com           en                 en.html
domain.com/v2        en                 en_v2.html
domain.com           es                 es.html
domain.com/v2        es                 es_v2.html
domain.com           other              en.html
domain.com/v2        other              en_v2.html 
```

所以这就是我在.htaccess中尝试过的：

```
#mod_rewrite on
RewriteEngine on

#Default language redirection
RewriteRule ^.*$ en.html
RewriteRule ^.*?v2$ en_v2.html

#Redirection by Language en
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteRule ^.*$ en.html
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteRule ^.*?v2$ en_v2.html

#Redirection by Language es
RewriteCond %{HTTP:Accept-Language} ^es [NC]
RewriteRule ^.*$ es.html
RewriteCond %{HTTP:Accept-Language} ^es [NC]
RewriteRule ^.*?v2$ es_v2.html [L] 
```

所有 html 文件都在根文件夹中，与 .htaccess 文件相同。通过这种方式，我试图让一些重写“覆盖”以前的重写，例如

```
RewriteRule ^.*$ es.html 
```

匹配所有内容，将被覆盖

```
RewriteRule ^.*?v2$ es_v2.html 
```

如果 /v2 在 URL 中。我不确定它是否会这样工作。

有人能帮我吗？

**编辑**：已解决，这是最终版本：

```
#mod_rewrite on
RewriteEngine on

#Allow direct access to html files
RewriteRule ^en(_v2)?\.html - [L]
RewriteRule ^es(_v2)?\.html - [L]

#Without this the css and other files are redirected and won't load properly
RewriteRule \.(gif|jpe?g|png|js|css|swf|php|ico|txt|pdf|xml|eot|svg|ttf|woff)$ - [L]

#Redirection by Language
RewriteCond %{HTTP:Accept-Language} (es) [NC]
RewriteRule ^v2$ es_v2.html [L]

#Redirection by Language
RewriteCond %{HTTP:Accept-Language} (es) [NC]
RewriteRule .* es.html [L]

#Defaults
RewriteRule ^v2$ en_v2.html [L]
RewriteRule .* en.html [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:33:35.067

例如。

```
#mod_rewrite on
RewriteEngine on

RewriteRule ^en(_v2)?\.html - [L]

#Redirection by Language en
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteRule ^.*?v2$ en_v2.html [L]
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteRule ^.*$ en.html [L]

#Redirection by Language es
RewriteCond %{HTTP:Accept-Language} ^es [NC]
RewriteRule ^.*?v2$ es_v2.html [L]
RewriteCond %{HTTP:Accept-Language} ^es [NC]
RewriteRule ^.*$ es.html [L]

#Default language redirection
RewriteRule ^.*?v2$ en_v2.html [L]
RewriteRule ^.*$ en.html [L] 
```

# css - 针对较小的屏幕分辨率优化我的页面

> ID：11988247
> 
> 赞同：0
> 
> 时间：2012-08-16T13:29:23.907
> 
> 标签：css, drupal, html

我在优化页面以适应更小的屏幕分辨率时遇到问题。当我打开浏览器窗口（谷歌浏览器）并缩小它时，菜单栏会弹出到第二行，然后顶部就没有空间了。我希望徽标左侧的黑色区域首先缩小以与内容框对齐，然后只有在没有更多空间容纳内容时，顶部也没有更多空间用于徽标和菜单......但是我想知道如何实现这一目标？感谢帮助！

网址： http: [//quaaoutlodge.com/drupal-7.14/ ?q=lodge](http://quaaoutlodge.com/drupal-7.14/?q=lodge)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:33:20.110

您可能想要使用 CSS3 媒体查询。使用它们，您可以为不同的浏览器尺寸指定单独的样式。您可以在此处找到有关响应式设计的更多信息：http: [//www.w3.org/TR/css3-mediaqueries/#width](http://www.w3.org/TR/css3-mediaqueries/#width)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:43:32.107

实际上，我必须删除徽标左侧的内部填充，而是为“toplogo”提供固定宽度（以像素为单位），并在两侧设置自动边距以使其在页面上居中。这似乎给了我我想要的东西。

# android - Android AVD 没有浏览器

> ID：11988252
> 
> 赞同：0
> 
> 时间：2012-08-16T13:29:28.933
> 
> 标签：android, avd

嗨，你能告诉我在我的 Android 虚拟设备中安装浏览器需要哪些软件包吗？

我手动安装了 Android SDK 并下载并安装了以下软件包：

1\. 对于 API 14，我有 SDK 平台、系统映像和 SDK 平台工具。
2.我也下载安装了API 7,8,10,12的SDK平台。

**然后我使用 API 14 的系统映像创建了一个虚拟设备，但它没有浏览器？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:36:12.757

所有 AVD 都带有一个名为 Browser 的浏览器标准（它是地球图标）（如果您在应用程序抽屉中查找它）。您甚至不需要 Google API。

你使用哪个 API 并不重要——它们都有一个原生的浏览器，你不需要做任何特别的事情。

# html - CSS - HTML：内联框扩展得比预期大？

> ID：11988256
> 
> 赞同：0
> 
> 时间：2012-08-16T13:30:00.507
> 
> 标签：html, css

我正在创建我的第一个博客模板。

我希望在其文章段落旁边有像维基百科这样的内联图像。我通过以下代码实现了这一点：

```
<div class="photo">
    <img src="image_file.jpg">
</div>
div[class='photo'] {
    margin: 10px;
    float: left;
    clear: left;
}
img {
    max-width: 500px;
    min-width: 150px;
    margin: 8px;
} 
```

到目前为止一切正常。但是，我还想在图像文件下方添加一个标题，所以我介绍了一个

标题

紧接着

```
<div class="photo">
    <img src="image_file.jpg">
    <p>Caption for the image file which might be long</p>
</div> 
```

不幸的是，这`<p>`使得这张照片 div 扩展得比照片本身更大，导致它看起来很有趣。我希望它`max-width`和照片一样大，如果文字很大，请转到第 2 或第 3 行。

我怎样才能做到这一点？我试过了`width: auto; display: block;`，放入`<p>`另一个 div 但它失败了。

谢谢你的热心帮助。

PS。我知道一旦通过 JS 加载页面，我就可以解决这个问题，但我很想学习以正确的 CSS 方式解决它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:39:44.220

如果问题只是`div`宽度大于`img`宽度，您可以尝试`p`移出`#photo`并将两者放入另一个`div`：

```
<div class="photoBox">
    <div class="photo">
        <img src="image_file.jpg">
    </div>
    <p>Caption for the image file which might be long</p>
</div> 
```

...然后相应地更改 CSS：

```
div.photoBox {
    margin: 10px;
    float: left;
    clear: left;
}
img {
    max-width: 500px;
    min-width: 150px;
    margin: 8px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:36:01.820

试试这个 -[**演示**](http://jsfiddle.net/WPXUm/1/)

**HTML**

```
<div class="photo">
    <img src="image_file.jpg">
    <p>Caption for the image file which might be long</p>
</div> 
```

**CSS**

```
div.photo {
    margin: 10px;
    float: left;
    clear: left;
    position: relative;
    background: honeydew;
}

div.photo img {
    max-width: 500px;
    min-width: 150px;
    margin: 8px;
}

div.photo p {
    position: absolute;
    bottom: 12px;
    left: 10px;
    right: 8px;
    background: rgba(0, 0, 0, .4);
    color: #fff;
} 
```

# php - 解析器 Json PHP

> ID：11988258
> 
> 赞同：-6
> 
> 时间：2012-08-16T13:30:09.703
> 
> 标签：php, json

```
 [{"data":{"attr":{"href":"http://www.google.com/","title":"http://www.google.com/"},"title":"Google"},"attr":{},"metadata":{}},
    {"data":{"attr":{"href":"http://www.yandex.com/","title":"http://www.yandex.com/"},"title":"Яндекс"},"attr":{"class":""},"metadata":{}}] 
```

帮助从 Json 获取链接。获取给定形式的 Json 的链接

```
<a href="http://www.google.com/" title="http://www.google.com/">Google</a>
<a href="http://www.yandex.com/" title="http://www.yandex.com/">Яндекс</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:42:27.040

因为这似乎是正确的答案，我刚刚设置了一个赏金，我可以用一个接受的答案的代表来做：

谷歌或[RTM](http://www.php.net/json_decode) ->`$parsed[0]['data']['attr']['href']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:34:52.283

我认为您要求从 PHP 中的 json 获取链接：

```
$links = json_decode($putYourJSONinsideThisVariable, true);

echo $links[0]['data']['attr']['href']; 
```

# c++ - C++ 对象池：使用 malloc 时程序崩溃

> ID：11988261
> 
> 赞同：0
> 
> 时间：2012-08-16T13:30:17.920
> 
> 标签：c++, templates, malloc, dynamic-arrays, objectpool

我正在尝试制作一个简单的对象池，但我无法让它工作。使用 malloc 为模板类型的动态数组分配空间时，我的代码崩溃

我的代码：

```
template <class cl>
class ObjectPool{
public:
    gltAtlasRenderer* br;
    cl* items;
    int SIZE,texid;

    void Innit(int size,int texidi)
    {
        SIZE=size;
        items=(cl*)malloc(sizeof(cl)*SIZE);->>>>>>>>>>HERE MY APP CRASHES
        /*br=new gltAtlasRenderer(SIZE,false,1);
        texid=texidi;
        for(int c=0;c<SIZE;c++)items[c].alive=false;
        */
    }
    void Update(Arena*  arena)
    {
        for(int c=0;c<SIZE;c++)
        {
            if(!items[c].alive)continue;
            items[c].Update(arena);
        }
    }
    void Render()
    {
        br->RenderStart();
        for(int c=0;c<SIZE;c++)
        {
            if(!items[c].alive)continue;
            items[c].Render(br);
        }
        br->RenderStop(texid);
    }
}; 
```

我在网上找到的所有示例都使用固定数组和向量，但我需要在运行时分配数组。

**编辑**：这就是我创建它的方式：

```
ObjectPool<Enemie1>* enemies1;
void Innit()
{
         enemies1->Innit(size,texid);
} 
```

我知道那条线会崩溃，因为如果我推荐它，它不会崩溃

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:38:22.770

这将不起作用：

```
ObjectPool<Enemie1>* enemies1;
void Innit()
{
         enemies1->Innit(size,texid);
} 
```

您需要在使用它之前分配内存，如下所示：

```
ObjectPool<Enemie1>* enemies1;
void Innit()
{
         enemies1 = new ObjectPool<Enemie1>;
         enemies1->Innit(size,texid);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:40:50.207

```
ObjectPool<Enemie1>* enemies1; //This is uninitialized
void Innit()
{
     enemies1->Innit(size,texid); //This calls a method on an uninitialized pointer
} 
```

在 Innit 方法中，当您将 malloc 的结果分配给您通过导致崩溃的无效指针分配的成员之一时。

改成这样。

```
ObjectPool<Enemie1> enemies1;
void Innit()
{
     enemies1.Innit(size,texid);
} 
```

# ios - 在 iOS 编程中使用什么来显示人和 4 个属性

> ID：11988267
> 
> 赞同：2
> 
> 时间：2012-08-16T13:30:37.637
> 
> 标签：ios, nsarray, nsdictionary

我想做简单的iOS应用。从列表中 - 300 个人，您根据他的名字选择一个人（名字会不同），然后您会看到此人的 4 个不同属性。我将其视为具有一个标签和 4 个具有属性的单元格的 UITable 视图。保存所有这些数据（名称和属性）的常用方法是什么？这将是大约 1200 条记录。我应该使用 NSArray 还是 NSDictionary ？名称可能是相应属性的关键。也许有人可以提示一些教程？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:38:10.227

正如@KaanDedeoglu 所说，使用 NSDictionaries 的 NSArray。使用数组在表格视图中显示数据是最简单的，并且在单元格配置方法中，您可以轻松访问数组内部的 NSDictionaries。[这](http://www.icodeblog.com/2010/12/10/implementing-uitableview-sections-from-an-nsarray-of-nsdictionary-objects/)应该向您展示如何完全按照您的意愿行事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:42:13.247

字典字典会给你比字典数组更好的性能。（由于键集被索引，访问速度更快，您将避免迭代的“for”循环并使用 objectForKey: 代替“。在我看来，这种方法更适合更大的数据集）。这种方法的缺点：排序不会被保留，但是您可以在显示项目之前自己进行排序（例如，获取所有键，按字母顺序对它们进行排序，然后开始显示已排序键数组中每个键的对象等。实现可能会因您的需要而异）。

# c# - 可以为空还是默认值？

> ID：11988268
> 
> 赞同：1
> 
> 时间：2012-08-16T13:30:38.493
> 
> 标签：c#, nullable

我应该使用什么类？

```
public class Category
{
    public int Id {get;set;}
    public int IdParent {get;set;}
    public string Title {get;set;}
}
or
public class Category
{
    public int Id {get;set;}
    public Nullable<int> IdParent {get;set;}
    public string Title {get;set;}
} 
```

考虑到自动增量从 1 开始，并且类别可以没有父类别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:32:47.813

如果它可以没有父母，你想要为空。

为了使您的代码更具可读性，您可以执行以下操作：

```
public class Category
{
    public int Id {get;set;}
    public int? IdParent {get;set;}
    public string Title {get;set;}
} 
```

（编辑：另外，类声明不应该有括号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:33:30.763

比使用`Nullable<int>`默认值更好地传达意图，所以我肯定会使用它而不是检查零。它还要求检查是否为空，而如果您使用默认值，您可能会忘记进行检查。

如果您决定将零作为“无父级”，您应该为其定义一个命名常量：

```
public class Category
{
    public const int NoParent = 0;
    public int Id {get;set;}
    public int IdParent {get;set;}
    public string Title {get;set;}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:34:35.650

我不确定您要做什么，但是如果您想使用它来插入自动增量，您可能希望您的 id 也可以为空。

```
public class Category
{
    public int? Id { get; set; }
    public int? IdParent { get; set; }
    public string Title { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:32:44.877

我会使用第二个选项，因为它更好地传达了一个类别可以没有父级的事实。对于第一个选项，您需要使用一个神奇的值来指示缺少父级。

# iphone - 使用 UIImagePickerController 偷偷录制电影

> ID：11988270
> 
> 赞同：1
> 
> 时间：2012-08-16T13:30:40.540
> 
> 标签：iphone, ios, xcode, xcode4, uiimagepickercontroller

我正在为 iPhone 4/4S 制作密码应用程序。当用户输入密码 3 次失败时，我想使用 iPhone 的前置摄像头制作用户的电影。这并不是什么新鲜事，应用商店中的许多应用都在做类似的事情。给这个人拍照，获取他的 GEO 坐标等。

我面临的挑战是，当我尝试设置电影录制时，相机覆盖会占据整个屏幕。我真正想做的是让用户仍然看到登录屏幕和按钮，但偷偷录制并制作用户的电影。有没有办法我可以做到这一点？

这是我正在使用的代码。

在我的 *.h 文件中

```
@interface v1InstantController : UIViewController <UIImagePickerControllerDelegate>
{   
    UIImagePickerController *picpicker;
}

@property (nonatomic, retain) UIImagePickerController *picpicker; 
```

在我的 *.m 文件中

```
-(IBAction) makeMovieNow
{
    picpicker = [[UIImagePickerController alloc] init];
        picpicker.delegate = self;

        picpicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        picpicker.sourceType = UIImagePickerControllerSourceTypeCamera;

        picpicker.showsCameraControls = NO;
        picpicker.navigationBarHidden = YES;
        picpicker.wantsFullScreenLayout = NO;

        picpicker.mediaTypes = [NSArray arrayWithObject:(NSString *)kUTTypeMovie];
        picpicker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModeVideo;

        picpicker.cameraFlashMode = UIImagePickerControllerCameraFlashModeOff;
        picpicker.cameraDevice = UIImagePickerControllerCameraDeviceFront;

        picpicker.videoQuality = UIImagePickerControllerQualityTypeHigh;

        picpicker.mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeCamera];

        //The problem is right here! 
        //picpicker.cameraViewTransform = CGAffineTransformScale(picpicker.cameraViewTransform, 0.01, 0.01);
        [self presentModalViewController:picpicker animated:YES];

        [picpicker startVideoCapture];
} 
```

问题就在这里“presentModalViewController:picpicker”。当我使用它时，它会启动带有虹膜飞溅等的相机屏幕，并显示整个屏幕上正在记录的内容。即使我使用 cameraViewTransform，它仍然会禁用页面上的任何内容并将此相机叠加层放在页面中间。（有一个非常小的相机覆盖）我不希望用户知道我正在录制并且希望他认为它照常营业。即让他继续尝试在页面上输入密码失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T13:54:39.327

UIImagePickerController 提供了一种无需太多努力即可从用户那里获取照片/视频的方法，因此用户始终可以看到它。

由于您似乎需要更多控制权，您可以查看 AVFoundation。[Apple 文档](https://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW3)应该提供一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:44:24.587

这是任何可能对未来感兴趣的人的答案。给它评分吧！

确保包含 coreVideo 和 CoreMedia 框架

在您的 *.h 文件中

```
@interface v1InstantController : UIViewController <UIImagePickerControllerDelegate,UINavigationControllerDelegate>
{
    AVCaptureSession *session;
    NSString *videoPath2;
}

@property (nonatomic, retain) AVCaptureSession *session;
@property (nonatomic, retain) NSString *videoPath2; 
```

在您的 *.m 文件中

```
@synthesize session;
@synthesize videoPath2;

-(IBAction) makeMovieNow
{

    NSLog(@"makeMovieNow ..");

    //record movie
    session = [[AVCaptureSession alloc] init];
    [session beginConfiguration];
    session.sessionPreset = AVCaptureSessionPresetHigh;

    AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
    captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;

    NSError *error = nil;
    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    device = [self frontFacingCameraIfAvailable];
    AVCaptureDeviceInput *videoInput = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!videoInput) 
    {
        // Handle the error appropriately.
        NSLog(@"ERROR: trying to open camera: %@", error);
    }

    AVCaptureDevice *audioDevice     = [AVCaptureDevice defaultDeviceWithMediaType: AVMediaTypeAudio];
    AVCaptureDeviceInput *audioInput = [AVCaptureDeviceInput deviceInputWithDevice:audioDevice error:&error ]; 

    AVCaptureMovieFileOutput *movieFileOutput = [[AVCaptureMovieFileOutput alloc] init];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectoryPath = [paths objectAtIndex:0];
    NSString *movieFileName = [NSString stringWithFormat: @"Secret.mov"];
    NSString *fullPathToFile2 = [documentsDirectoryPath stringByAppendingPathComponent:movieFileName];
    NSURL *outputURL = [[NSURL alloc] initFileURLWithPath:fullPathToFile2];

    videoPath2=[outputURL path];

    [session addInput:videoInput];
    [session addInput:audioInput];
    [session addOutput:movieFileOutput];
    [session commitConfiguration];

    //start recording
    [session startRunning];
    [movieFileOutput startRecordingToOutputFileURL:outputURL recordingDelegate:self];
}

-(IBAction) makeMovieStop
{
    NSLog(@"makeMovieStop ...");

    //stop recording
    [session stopRunning];

    //save video to photo-album
    UISaveVideoAtPathToSavedPhotosAlbum(videoPath2, self, nil, nil);

} 
```

# javascript - Python-Django 和 PyQt4 的问题

> ID：11988271
> 
> 赞同：1
> 
> 时间：2012-08-16T13:30:58.697
> 
> 标签：javascript, python, django, web-scraping, pyqt4

**已修复**此问题已通过将 QApplication 移出 main() 来解决。

您好我正在尝试实现一个执行给定 URL 的 JavaScript 代码并返回最终 HTML 的 Web 服务。我正在使用 PyQt4 进行 JS 处理和 Django 1.4 Web 框架。问题是：脚本总是在命令邀请中工作，但是当我将它集成到 Django 时，它只在第一次工作，在运行 Django 本地服务器之后，然后在以下执行期间它会发出警告：

```
WARNING: QApplication was not created in the main() thread
QObject::startTimer: QTimer can only be used with threads started with QThread 
```

我得到了错误的结果。问题是我没有使用任何线程......这是我在 Django 上使用的脚本（urlconf 导致这个带有给定 url 的主要功能）：

```
#!/usr/bin/env python

import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
from time import time, sleep

app = QApplication(sys.argv)

def wait(app, secs=1):
    deadline = time() + secs
    while time() < deadline:
        sleep(0)
        app.processEvents()

def main(url):
 #   app = QApplication(sys.argv)

    web = QWebView()
    web.load(QUrl(url))

    wait(app, 15)

    return web.page().mainFrame().toHtml().toUtf8() 
```

你以前见过这个或尝试做类似的事情吗？请帮我提供任何信息谢谢

PS这是我在这里的第一篇文章我希望一切都清楚:)

**编辑**由于 Rostyslav，警告消失了，但我仍然有销售问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:56:52.290

Actually **you use threads**.

Django developments server uses threading by default. You can pass optional `--nothreading` parameter to `runserver` command which is intended to disable using threads by server:

```
python ./manage.py runserver --nothreading ... 
```

# css - 当所有元素都声明了位置时，z-index 无法工作

> ID：11988279
> 
> 赞同：0
> 
> 时间：2012-08-16T13:31:17.343
> 
> 标签：css, z-index

我不明白为什么在这个例子中[http://jsfiddle.net/BmnHZ/2/](http://jsfiddle.net/BmnHZ/2/)切换的蓝色 div`.playlist`没有隐藏在黑色`.menu`div 下。我为这两个项目设置了一个位置，但它不需要。我怎样才能`.playlist`留下来`.menu`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:35:30.723

z-index 为 99 的子级的堆叠顺序不小于 z-index 为 100 的父级，因为子级位于 z-index 为 100 的父级中已经“高于”父母的堆叠顺序。

您要做的是将孩子的 z-index 设置为 -1 而不是 99。

说的有点难，希望大家理解。

# php - 为什么“不能中断/继续 1 级”出现在 PHP 中？

> ID：11988281
> 
> 赞同：22
> 
> 时间：2012-08-16T13:31:21.210
> 
> 标签：php, if-statement, fatal-error

我有时会在生产中遇到此错误：

```
if( true == $objWebsite ) {
    $arrobjProperties = (array) $objWebsite->fetchProperties( );
    if( false == array_key_exists( $Id, $Properties ) ) {
       break;
    }
    $strBaseName = $strPortalSuffix . '/';

    return $strBaseName;
}

$strBaseName = $strSuffix ;
return $strBaseName; 
```

我试图重现这个问题。但没有取得任何进展。$Id, $Properties 具有收到的价值。

有谁知道“不能中断/继续 1 级”何时出现在 PHP 中？

我看过这篇文章[PHP Fatal error: Cannot break/continue](https://stackoverflow.com/questions/3618030/php-fatal-error-cannot-break-continue)。但没有得到任何帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-16T13:50:35.707

您不能从 if 语句中“中断”。您只能从循环中中断。

如果你想用它来打破调用函数中的循环，你需要通过返回值来处理它——或者抛出一个异常。

* * *

返回值方法：

```
while (MyLoop) {
   $strSecureBaseName = mySubFunction();
   if ($strSecureBaseName === false) {   // Note the triple equals sign.
        break;
   }
   // Use $strSecureBaseName;
}

// Function mySubFunction() returns the name, or false if not found. 
```

* * *

使用异常 - 这里是漂亮的例子：http: [//php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

```
<?php
function inverse($x) {
    if (!$x) {
        throw new \Exception('Division by zero.');
    } else {
        return 1/$x;
    }
}

try {
    echo inverse(5) . "\n";
    echo inverse(0) . "\n";
} catch (\Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
}

// Continue execution
echo 'Hello World';
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T13:09:55.550

如果您仍想从中中断`if`，可以使用 while(true)

前任。

```
$count = 0;
if($a==$b){
    while(true){
        if($b==$c){
            $count = $count + 3;
            break;  // By this break you will be going out of while loop and execute remaining code of $count++.
        }
        $count = $count + 5;  //
        break;  
    }
    $count++;
} 
```

您也可以使用开关和默认值。

```
$count = 0;
if($a==$b){
    switch(true){
      default:  
         if($b==$c){
            $count = $count + 3;
            break;  // By this break you will be going out of switch and execute remaining code of $count++.  
        }
        $count = $count + 5;  //
    }
    $count++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-14T23:36:49.337

如果在一个函数中只是改变 break; 返回;

# helper - Spree 覆盖辅助方法

> ID：11988289
> 
> 赞同：17
> 
> 时间：2012-08-16T13:31:56.503
> 
> 标签：helper, spree, overriding

我正在尝试使用以下方法覆盖 base_helper.rb 的辅助方法：

```
module Spree
  module BaseHelper.class_eval do

    def taxons_tree(root_taxon, current_taxon, max_level = 1)
      .....
    end

  end
end 
```

它不适合我。有人知道我在这里想念什么吗？

谢谢！

**固定的：**

我应该使用：

```
Spree::BaseHelper.module_eval do

    def taxons_tree(root_taxon, current_taxon, max_level = 1)
      ...
    end

end 
```

反而。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-22T14:26:32.213

重新打开模块也可以：

```
module Spree
  module BaseHelper
   def taxons_tree(root_taxon, current_taxon, max_level = 1)
      ...
   end
  end
end 
```

`class_eval`使用and没有特别的理由`module_eval`，它只是 Spree 项目很长一段时间以来的习惯。

# macos - NSViewController viewWillAppear 可可

> ID：11988290
> 
> 赞同：0
> 
> 时间：2012-08-16T13:31:56.653
> 
> 标签：macos, cocoa, nsviewcontroller

我想在可可 MAC 应用程序开发中交换视图，例如 UINavigationController 以在可可触摸中进行推送/弹出视图。它是应用程序对推送和弹出视图的要求，不知何故我可以设法做到这一点，但现在我处于项目中间，我想要可可中的 viewWillAppear 之类的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-09T14:07:57.453

仅出于提供信息的目的，iOS View 生命周期方法（viewDidLoad、viewWillAppear、viewDidAppear 等）自 OSX 10.10 Yosemite（可能更高版本）起可用。

并注意：如果您计划让应用程序在 10.10 之前的 OSX 版本上运行，请不要实现这些方法，因为它们不会被早期版本识别（因此不会执行其中的代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:54:15.740

Such a method IS NOT available on Mac. OSX UI is very different compared to iOS UI. Use -(void)loadView for initial UI update (or -(void)awakeFromNib if your UI was designed in Interface Builder and loads from a xib file) and after that make specific, on-demand UI update requests, programatically, whenever you call showWindow, makeKeyAndOrderFront, get notifications, get callbacks from delegates, etc.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-02T15:27:40.803

我想出了这样的事情：

标题：

```
@protocol GWViewExtensions <NSObject>
- (void) viewWasAddedToSuperview;
@end

@interface GWView : NSView

//set to the view controller managing this view to get NSResponder udpates,
//and GWViewExtension protocol method calls.
@property (weak,nonatomic) IBOutlet NSViewController * viewController;

@end 
```

执行：

```
#import "GWView.h"

@implementation GWView

- (void) awakeFromNib {
    [self setNeedsDisplay:TRUE];
}

- (void) addSubview:(NSView *)aView {
    [super addSubview:aView];
    if([aView isMemberOfClass:[GWView class]]) {
        GWView * gview = (GWView *)aView;
        if(gview.viewController && [gview.viewController conformsToProtocol:@protocol(GWViewExtensions)]) {
            if([gview.viewController respondsToSelector:@selector(viewWasAddedToSuperview)]) {
                [gview.viewController performSelectorOnMainThread:@selector(viewWasAddedToSuperview) withObject:nil waitUntilDone:FALSE];
            }
        }
    }
}

- (void) setViewController:(NSViewController *) newController {
    if(_viewController) {
        NSResponder *controllerNextResponder = [_viewController nextResponder];
        [super setNextResponder:controllerNextResponder];
        [_viewController setNextResponder:nil];
    }
    _viewController = newController;
    if(newController) {
        NSResponder *ownNextResponder = [self nextResponder];
        [super setNextResponder:_viewController];
        [_viewController setNextResponder:ownNextResponder];
    }
}

- (void)setNextResponder:(NSResponder *)newNextResponder {
    if(self.viewController) {
        [self.viewController setNextResponder:newNextResponder];
        return;
    }
    [super setNextResponder:newNextResponder];
}

- (void) setBackgroundColor:(NSColor *)backgroundColor {
    _backgroundColor = backgroundColor;
    [self setNeedsDisplay:TRUE];
}

- (void) drawRect:(NSRect) dirtyRect {
    [super drawRect:dirtyRect];
    if(self.backgroundColor) {
        NSGraphicsContext * theContext = [NSGraphicsContext currentContext];
        [theContext saveGraphicsState];
        [[NSGraphicsContext currentContext] setPatternPhase:NSMakePoint(0,[self frame].size.height)];
        [self.backgroundColor set];
        NSRectFill([self bounds]);
        [theContext restoreGraphicsState];
    }
}

- (void) dealloc {
    self.backgroundColor = nil;
}

@end 
```

利用：

```
#import <Cocoa/Cocoa.h>
#import "GWView.h"

@interface GWDribbbleShotDetailColumn : NSViewController <GWViewExtensions>
@end

#import "GWDribbbleShotDetailColumn.h"

@interface GWDribbbleShotDetailColumn ()
@end

@implementation GWDribbbleShotDetailColumn

- (void) viewWasAddedToSuperview {
    NSRect svb = self.view.superview.bounds;
    NSRect sf = self.view.frame;
    sf.size.height = NSHeight(svb);
    sf.size.width = NSWidth(svb);
    self.view.frame = sf;
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T09:24:55.927

我为 NSViewController 使用了一个特殊的视图，它回调视图控制器。您可以扩展代码以使用 viewWillAppear 等方法。

```
- (void)viewWillMoveToWindow:(NSWindow *)newWindow {
    [super viewWillMoveToWindow:newWindow];

    if (self.installed && !newWindow) {
        [self viewWillUninstall];
        NSViewController<SMControllerViewDelegate> *viewController = self.viewController;
        if (viewController) {
            @autoreleasepool {
                [viewController viewWillUninstall];
            }
        }
    }
}

- (void)viewDidMoveToWindow {
    [super viewDidMoveToWindow];

    if (!self.installed && self.window) {
        [self viewDidInstall];
        NSViewController<SMControllerViewDelegate> *viewController = self.viewController;
        if (viewController) {
            @autoreleasepool {
                [viewController viewDidInstall];
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T04:24:09.610

我已经使用 NSViewController 来更改视图，例如根据需要在按钮单击时在窗口上设置 viewController，但我发现一旦为特定的 viewController 调用 (id)init，它就再也不会为同一个 viewController 调用。出于这个原因我的用户界面（视图/MVC）没有更新。我再次强行调用（id）init，但视图不刷新。

# mobile - 获取手机号码服务商

> ID：11988295
> 
> 赞同：0
> 
> 时间：2012-08-16T13:32:07.637
> 
> 标签：mobile

我打算在我的网站上制作一个购物车，该网站将通过向注册会员的手机发送短信来让注册会员了解网站上的产品。为了发送短信，我想为他们的手机号码找到服务提供商。

是否有任何数据库可以映射服务提供商和手机号码，例如，以 959 开头的号码是 AirTel 等。我搜索了谷歌，但没有得到任何有用的链接。

或者我问错地方了！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:43:37.390

您将无法做到这一点，同一网络上的电话可以以不同的号码开头，而且如果您更改网络，您可以保留您的号码，这样就不会出现模式。

您在注册号码时必须要求用户输入他们的网络，但即使用户更改网络，您的记录也会不正确。

有一些网站声称可以为您检查，尽管我不知道它们的可靠性如何：

如果您只处理英国号码：[http](http://www.aql.com/sms/network-lookup/developers/) ://www.aql.com/sms/network-lookup/developers/ （他们向您收取每次查询费用）

交替：[http](http://www.mobilephonechecker.co.uk/network-checker/) ://www.mobilephonechecker.co.uk/network-checker/ （我不知道这是否只是英国）

# mysql - 如何在 CakePHP 中编写 MySQL 查询

> ID：11988299
> 
> 赞同：1
> 
> 时间：2012-08-16T13:32:21.540
> 
> 标签：mysql, cakephp, cakephp-1.3

如何在 cakephp 中编写以下 mysql 查询：

> SELECT * FROM table WHERE DATE BETWEEN '2008-12-23' AND '2008-12-25';

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:37:35.900

使用 Cake 的 ORM，它看起来像这样（其中 Model 是模型的名称，通常是表名称的单数化版本）：

```
$this->Model->find('all', array('conditions' => array(
    'Model.date BETWEEN ? AND ?' => array('2008-12-23', '2008-12-25'))); 
```

在此处查看更多详细信息：http: [//book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

# sql - 从 Sql Server 2008 生成 XML

> ID：11988303
> 
> 赞同：0
> 
> 时间：2012-08-16T13:32:47.450
> 
> 标签：sql, sql-server, xml

我对使用此代码生成`XML`文件有疑问：`SQL server (2005)`

```
Select Emp_Id,Emp_Name from tblEmployee Where Emp_Id < 3
For XML AUTO,ELEMENTS 
```

我需要添加什么才能将此文件以特定名称 ( `DDMMYYYYHHMM`) 保存在我的硬盘驱动器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:45:16.960

```
EXEC master..XP_CmdShell 'BCP "Select Emp_Id,Emp_Name from tblEmployee Where Emp_Id < 3
For XML AUTO,ELEMENTS" queryout "c:\sample.xml" -c -T' 
```

# android - 如何在Android中的String中获取浮点值？

> ID：11988305
> 
> 赞同：1
> 
> 时间：2012-08-16T13:32:48.577
> 
> 标签：android, string, range

目前我正在使用简单的 android 应用程序，我有一个类似于下面提到的 Result 的字符串供您参考，然后我试图获得像 0.036 这样的速率值，但我做不到，如何获得这个？是否可以？请帮我

提前致谢

```
String Result =@" NO_Balance | MobileNumber: 43994732984 | rate: 0.036"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:38:13.393

字符串 someString =" NO_Balance | 手机号码：43994732984 | 费率：0.036";

```
// last float value
Float f = Float.valueOf(
            someString.substring(
                 someString.lastIndexOf('.'), 
                 someString.length()));

// center int value
int num = Integer.valueOf(
            someString.substring(
                 someString.indexOf(':')+1,
                 someString.lastIndexOf('|')-1)); 
```

请注意，这假定您解析的字符串是有效的，您可能需要进行一些检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:37:32.440

如果您只想要费率，请这样做：

```
String[] parts = Result.split(" | ");
String[] keyval = parts[2].split(": ");
float rate = parseFloat(keyval[1]); 
```

您还可以像这样获取“MobileNumber”：

```
keyval = parts[1].split(": ");
String mobileNumber = keyval[1]; 
```

注意：两个示例都假设字符串每次都相似，除了数字！如果由“|”分隔的字段的顺序或数量可能会发生变化，您需要一个更复杂的解决方案：

```
HashMap<String, String> values = new HashMap<String, String>();
String[] parts = CurrentString.split(" | ");

foreach( String part : parts) {
  String[] keyval = parts[2].split(": ");

  if (keyval.length == 2) {
    values.put(keyval[0], keyval[1]);
  } else {
    values.put(keyval[0], "exists");
  }
}

float rate = parseFloat(values.get("rate")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:48:28.693

以下使用 Java`Regex`来确定`float`您的`String`

```
 public class RegEx {
    public static void main(String[] args) {
        String Result = " NO_Balance | MobileNumber: 43994732984 | rate: 0.036";
        Pattern p = Pattern.compile("\\d+\\.\\d+");
        Matcher m = p.matcher(Result);
        if (m.find()) {
            System.out.println(m.group(0));
        } else
            System.out.println("No float found:(");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:48:54.353

另一种方法是执行以下操作：

```
 String result = " NO_Balance | MobileNumber: 43994732984 | rate: 0.036";

    int index = result.indexOf("rate: ");

    String test = result.substring(index + 6);

    Float theValue = Float.valueOf(test);

    Log.d("testing", test);

    Log.d("testing2", String.valueOf(theValue)); 
```

# java - 将 java hashmap 对象分配给 javascript 对象

> ID：11988313
> 
> 赞同：0
> 
> 时间：2012-08-16T13:33:10.713
> 
> 标签：java, javascript, hashmap

如何将java的Hashmap对象分配给JS函数中定义的对象并访问它？

# javascript - 无法读取未定义的属性 - NodeJS、Express、Mongoose

> ID：11988316
> 
> 赞同：0
> 
> 时间：2012-08-16T13:33:22.473
> 
> 标签：javascript, node.js, express, mongoose

我有这两个功能

```
exports.list = function (req, res){
Material.find(function(err, materials) {
    res.render('materials/list', {title: 'Pagina Materiali', materials: materials});
});
}

exports.modify = function (req, res){
Material.findById(req.params.id, function(err, materials){
    res.render('materials/edit', {title: 'Pagina materiale singolo', materials: materials});
});
} 
```

第一个工作正常，我用这个 Jade 片段循环它：

```
each material in materials
    p Nome materiale: #{material.m_name} | Tipo materiale: #{material.type} | 
     a(href='materials/edit/#{material.id}') Modifica Materiale 
```

但我无法让第二个工作，Express 告诉我它无法读取未定义的属性。如果我在控制台中查看结果或只是返回它，我可以看到它选择了正确的值，只是我无法在模板中正确显示它。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:45:44.683

[findById](http://mongoosejs.com/docs/api.html#model_Model-findById)按 id 查找单个文档。您尝试将每个它作为对象数组。

你在节点中需要这样的东西：

```
Material.findById(req.params.id, function(err, material){
    res.render('materials/edit', {title: 'Pagina materiale singolo', material: material});
}); 
```

玉中：

```
p Nome materiale: #{material.m_name} | Tipo materiale: #{material.type} | 
  a(href='materials/edit/#{material.id}') Modifica Materiale 
```

# vb.net - 从数据库转换错误中获取单个整数

> ID：11988318
> 
> 赞同：1
> 
> 时间：2012-08-16T13:33:26.530
> 
> 标签：vb.net, asp.net-mvc-3

我试图从我的数据库中获取一个整数，如下所示（我知道它将是唯一的）：

```
 Dim SequenceyQuery = From a In db.ServiceSequences
                            Where (a.ServiceId = ReqService And a.StationId = AtStation)
                            Select a.Sequence

  Dim TempSequence As Integer = CInt(SequenceyQuery.ToString) 
```

但是在尝试将其转换为第二行代码时遇到了问题。这是从此处获取该整数的最佳方法以及如何将其作为整数获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:39:05.280

您不应该调用`ToString()`您的查询。

而是调用[`First()`](http://msdn.microsoft.com/en-us/library/bb291976.aspx)，这将返回第一个元素。

```
Dim TempSequence As Integer = SequenceyQuery.First() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:40:06.963

采用`FirestOrDefault()`

```
Dim SequenceyQuery = From a In db.ServiceSequences
                     Where (a.ServiceId = ReqService And a.StationId = AtStation)
                     .FirstOrDefault()

Dim TempSequence As Integer = SequenceyQuery.Sequence 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:52:00.510

试试这个：

```
Dim SequenceyQuery = (From a In db.ServiceSequences
                        Where (a.ServiceId = ReqService And a.StationId = AtStation)
                        Select a.Sequence).FirstOrDefault() 
```

或者你可以使用 First() 代替

# image - 在 asp.net mvc 4 项目中引用图像的正确方法是什么？

> ID：11988322
> 
> 赞同：12
> 
> 时间：2012-08-16T13:33:33.283
> 
> 标签：image, html, asp.net-mvc-4

我有看起来像这样的图像参考：`src="../../Images/backup5.jpg"`. 这与项目结构相匹配。尽管在已发布的版本中，这些链接不起作用。如果我通过删除“../”来更改路径，`src="../Images/backup5.jpg"` 图像将正确显示。引用这些图像的正确方法是什么，以便它们在开发版本和发布版本中都可以使用？

跟进，这个在css中作为`background:`属性使用时应该怎么看？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-16T13:38:13.063

您应该使用[`Url.Content`](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx)带有 tilda[`~`](http://msdn.microsoft.com/en-us/library/ms178116.aspx)标记的助手（它解析为应用程序的根目录）：

```
src="@Url.Content("~/Images/backup5.jpg")" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:36:38.650

试试`src="@Url.Content("~/Images/backup5.jpg")"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:38:04.593

`@Url.Content("~/Images/backup5.jpg")`似乎是一个不错的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-30T14:27:28.953

为了那些不从事 MVC 项目的人的利益，他们可以使用：

```
<img src="../Images/yourImage.png" height="yourHeight" width="yourWidth"/> 
```

where`Images`是添加到现有项目的新文件夹，`yourImage.png`可以通过右键单击`Images`文件夹，然后选择`Add`，然后`Existing item`导航到文件存储位置来将其添加到该文件夹​​。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-16T04:35:58.560

2种方式

```
<img src="@Url.Content("~/Images/trash.svg")">  OR 
<img src='/images/trash.svg'> 
```

# android - 如何将我的 android 应用程序中的照片添加到我的 facebook 相册页面

> ID：11988324
> 
> 赞同：0
> 
> 时间：2012-08-16T13:33:50.873
> 
> 标签：android, facebook, facebook-graph-api

我有一个创建图像的 android 应用程序。

我会将这张图片添加到我的 Facebook 页面的相册中（而不是在我的个人墙上）。

我看到我必须使用[应用令牌](http://developers.facebook.com/docs/authentication/applications/)。

我通过以下方式获得应用令牌：

```
https://graph.facebook.com/oauth/access_token?
    client_id=MY_APP_ID
    &client_secret=MY_APP_SECRET
    &grant_type=client_credentials 
```

然后使用此应用程序令牌，我认为我必须使用此代码：

```
String appToken="MY_APP_TOKEN";
facebook.setAccessToken(appToken);

Bundle parameters = new Bundle();
parameters.putString("caption", "This is a message test...");
byte[] ImageBytes=...;
parameters.putByteArray("photo", ImageBytes);

String response2=facebook.request("ALBUM_ID/photos", parameters, "POST"); 
```

此代码返回此错误：

```
A user access token is required to request this resource 
```

那我一定不能使用应用令牌？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:40:37.853

是的，您需要用户访问令牌才能代表用户发出 API 请求。您应该使用我们的 Facebook Android SDK 为用户提供一种简单的方式来授权您的应用程序。我们的 SDK 还可以在用户验证后轻松获取访问令牌，如果您有更多问题，请在此处 关注我们的[Android 教程。](https://developers.facebook.com/docs/mobile/android/build/)

应用程序访问令牌与用户访问令牌不同，这取自[文档](https://developers.facebook.com/docs/authentication/applications/)。

> 作为应用程序进行身份验证允许您获取访问令牌，该令牌允许您代表应用程序而不是用户向 Facebook API 发出请求。这很有用，例如修改应用程序的参数、创建和管理测试用户，或阅读应用程序的见解。

让我知道这是否能回答您的问题。

# javascript - Node.js Mongodb 原生驱动组织

> ID：11988326
> 
> 赞同：0
> 
> 时间：2012-08-16T13:33:59.733
> 
> 标签：javascript, node.js, mongodb

如何在一个大项目中组织 Mongodb native-driver？

目前我在每个“模型”中使用这个代码，它基本上只是模块中的一个对象。

***用户.js***

```
var mongo = require('mongodb');

var Users = {};

Users.db = new mongo.Db(...);

Users.db.open = function(e, c){
  if(e){ throw new Error(e); } else {
  console.log('connection opened'); }
};

Users.c = Users.db.collection('users');

Users.login = function(username, rawPassword, callback){
  Users.c.findOne({ username: username }, function(e, o){
    if(o.password === encrypt(rawPassword)){ callback(o); }
    else { callback(null); }
  });
}; 
```

但这会是在每个分离模型中打开数据库连接的最佳方式吗？如何正确共享模型之间的连接？这是一个很好的解决方案：

***数据库连接.js***

```
var mongo = require('mongodb');
var RedisClient = require('redis-client');

module.exports = {
 main: new mongo.Db(...),
 log: new mongo.Db(...),
 cache: new RedisClient(...)
}; 
```

所以每次我们使用数据库连接时，我们都可以使用它：

***用户.js***

```
var mainDb = require('database-connections.js').main;
var logDb = require('database-connections.js').log;
var cacheDb = require('database-connections.js').cache;

mainDb.open(function(e, c)){
  if(e){ throw new Error(e); } else {
    mainDb.collection('users', function(e, c){
      // do work.
    });
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:08:13.650

在我对您之前的[问题](https://stackoverflow.com/questions/11975738/node-js-mongoose-performance)的回答中，我说 mongodb-native api 笨重且难以使用。我想我们可以在这里看到原因。

使用 mongojs

**用户.js**

```
var db = require("mongojs").connect('maindb', ['users']);

    db.users.find({}, 

    function(err, results){

    //do something with the results

    }) 
```

我认为这很简单，并且对于更大的应用程序会更好。

# vba - 填表 ms-word VBA / Word中最有效的智能导航

> ID：11988327
> 
> 赞同：9
> 
> 时间：2012-08-16T13:34:03.210
> 
> 标签：vba, ms-word

**摘要：**我的公司向客户发送信件，并希望我编写一个宏来填写已在 Word 文档中设置的不同文本表单字段，因为发送的不同信件之间的变化非常有限。我在 excel 中做过宏，但这是我第一次遇到 ms-word 宏

**问题：**我很难通过 ms-word 找到有效、智能的导航。我确实找到了这篇关于[在不同方向上移动的](http://word.tips.net/T000784_Moving_the_Insertion_Point_in_a_Macro.html)文章， 这实际上与箭头键相同。希望能深入了解浏览 Word 文档的最佳方式。例如，我应该循环移动到右侧 1 个空格，直到找到有意义的东西还是有更有效的方法？

**问题：**是否可以将特定表单位置存储在变量中或者 ms-word 没有坐标系？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T16:25:05.563

要使用内容控件，您必须确保已设置`Title`控件的。如果需要，您也可以设置`Tag`。见快照

![在此处输入图像描述](../Images/2040a27267f456066d1101250dec03de.png)

然后您可以使用此代码更新内容控件或检索它的值

```
Sub Sample()
    Dim cc As ContentControl

    For Each cc In ActiveDocument.ContentControls
        If cc.Title = "MyTextBox1" Then
            cc.Range.Text = "Hello World!"
            Exit For
        End If
    Next cc
End Sub 
```

当你运行代码时，它看起来是这样的

![在此处输入图像描述](../Images/d1201e7bd014ddd07473b566ad26ec4a.png)

要获取控件的文本，您可以使用`Debug.Print cc.Range.text`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T16:50:02.723

在最新的 Windows 版本的 Word 中至少有三种类型的表单域 - 内容控件、“旧版表单域”和 ActiveX 表单域。假设您正在处理旧表单字段，您应该能够使用书签名称索引 FormFields 集合，然后使用，例如

```
ActiveDocument.FormFields("Text1").Result = "mytextformfieldresult"

ActiveDocument.FormFields("DropDown1").Result = "mydropdownformfieldresult"

ActiveDocument.FormFields("Check1").Checkbox.Value = True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T13:56:41.713

您应该能够在文档中需要访问的各个位置创建书签。在现代 Word 中，它位于“链接”组中的“插入”选项卡上。然后您可以从 VBA 访问书签并使用以下代码将文本插入其中：

```
ActiveDocument.Bookmarks("myBookmark").Range.InsertBefore "Inserted Text" 
```

这个[MVP 站点](http://word.mvps.org/FAQs/MacrosVBA/WorkWithBookmarks.htm)有更多关于该技术的数据。此外，[MSDN](http://msdn.microsoft.com/en-us/library/office/bb211822%28v=office.12%29.aspx)有一些关于书签对象的数据。

# javascript - Flash 按钮在弹出或警报后卡住

> ID：11988333
> 
> 赞同：0
> 
> 时间：2012-08-16T13:34:16.810
> 
> 标签：javascript, jquery, actionscript-3, flash, popup

自5个月以来我就面临这个问题，所以我在这里问。

我已经实现了一个**简单的 flash button**。

*   **该按钮在鼠标悬停时**显示动画。
*   单击按钮时，它会调用我的外部 JS 库。libray **会显示一个弹出窗口**，有时还会显示一个 javascript 警报。

现在，问题是，当单击按钮（并显示弹出/警报）时，**按钮会卡在动画的最后一帧**，并且永远不会回到第一帧。

我试过很多组合：

*   我用 AS3 监听器编写了按钮（放置了一个 mouseout 监听器）。
*   我使用了标准的闪光灯按钮。

没什么，老是卡住，好像flash组件在弹窗打开后检测不到鼠标移动。

您可以检查我所说的行为，只需点击[此链接](http://2outof0studio.com/SWift/SWift.php?Lang=IT&Mode=Single)并单击任何动画按钮（例如，左上角的回收站按钮）。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:01:34.920

为什么不在调用弹出窗口之前手动触发 mouseout 事件？或者在调用弹出窗口时尝试重置动画。

```
$('#recycle_bin').click(function(){
$(this).mouseout();
call popup;
}); 
```

将是我会尝试的 jQuery 原始代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:28:01.213

**尝试在**鼠标移出事件***和***单击事件上重置按钮状态。

在 Firefox 中（我只观察到 Firefox 中的行为），弹出的背景 HTML 元素似乎在“窃取”鼠标事件，这意味着永远不会触发鼠标移出事件，这就是为什么在单击时重置按钮状态应该解决问题。

# php - php中的正则表达式，取html

> ID：11988334
> 
> 赞同：1
> 
> 时间：2012-08-16T13:34:24.147
> 
> 标签：php, html, regex, preg-match-all

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我需要帮助。我有 HTML，我需要给我表格的正则表达式。只有一张桌子。因为这张桌子之后是另一张桌子。示例 html：

```
<table class="results" cellspacing="1" cellpadding="0" border="0" width="100%" align="left">
    <tr><td>text</td></tr>
</table>
<!-style>
tr.bg_selected{}
tr.bg_selected td, tr.bg_checked td { background-color:#ffe9bc !important;}
</style>**AND ANOTHER TABLE** 
```

这是我的常客。我得到了这张桌子之后的所有桌子。

```
$regular = "/<table class=\"results\" cellspacing=\"(\d+)\" cellpadding=\"(\d+)\" border=\"(\d+)\" (.*)>(.*)<\/table>\n(.*)<\/style>/s";
    preg_match_all($regular,$str, $matches2, PREG_PATTERN_ORDER); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:18:56.273

有些人在评论中指出您“无法在正则表达式中解析 HTML”。这并不完全准确。可以办到。

但是，这很困难且容易出错，最后你会得到一个有点混乱的结构。

因此，我强烈建议改用 PHP 内置的 HTML 解析器。使用非常简单：

```
$doc = new DOMDocument();
$doc->loadHTML($htmlCode); 
```

然后，您可以使用生成的对象来提取您需要的数据。

```
$tables = $dom->getElementsByTagName('table');
foreach ($tables as $table){
    $cells = $table->getElementsByTagName('td');
    foreach ($cells as $cell){
        echo $cell->nodeValue;
    }
} 
```

有关更多信息，请参阅 PHP 手册：http: [//php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

# c# - SQLite 1.0.65 程序集绑定错误

> ID：11988337
> 
> 赞同：2
> 
> 时间：2012-08-16T13:34:28.783
> 
> 标签：c#, sqlite, assemblies

我正在开发一个使用 SQLite 的 Outlook 插件。Outlook 引发异常无法绑定程序集。我启用了融合日志，发现“托管程序集”加载正常，因为它可以从以下日志中看到

```
 *** Assembly Binder Log Entry  (16/08/2012 @ 14:13:37) ***

The operation was successful.
Bind result: hr = 0x0\. The operation completed successfully.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Program Files\Microsoft Office\Office12\OUTLOOK.EXE
--- A detailed error log follows. 

=== Pre-bind state information ===
 LOG: DisplayName = System.Data.SQLite, Version=1.0.65.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139
     (Fully-specified)
    LOG: Appbase = file:///C:/Program Files/TargetIntegration/CiviSync/
    LOG: Initial PrivatePath = NULL
    LOG: Dynamic Base = NULL
    LOG: Cache Base = NULL
    LOG: AppName = OUTLOOK.EXE
    Calling assembly : ServiceStack.OrmLite.SqliteNET, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
    ===
    LOG: This bind starts in default load context.
    LOG: Using application configuration file: C:\Program Files\Microsoft Office\Office12\OUTLOOK.EXE.Config
    LOG: Using host configuration file: 
    LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
    LOG: Post-policy reference: System.Data.SQLite, Version=1.0.65.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139
    LOG: GAC Lookup was unsuccessful.
    LOG: Attempting download of new URL file:///C:/Program Files/TargetIntegration/CiviSync/System.Data.SQLite.DLL.
    LOG: Assembly download was successful. Attempting setup of file: C:\Program Files\<CompName>\CiviSync\System.Data.SQLite.dll
    LOG: Entering download cache setup phase.
    LOG: Assembly Name is: System.Data.SQLite, Version=1.0.65.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139
    WRN: A duplicate assembly was found while copying the assembly item to the cache.
    LOG: Binding succeeds. Returns assembly from C:\Users\<UserName>\AppData\Local\assembly\dl3\9N164N9X.7OK\DRB00MX7.CBX\2f49c891\005cc530_ea6ccd01\System.Data.SQLite.dll.
    LOG: Assembly is loaded in default load context. 
```

但是根据以下异常，它在加载本机程序集时引发异常。

```
*** Assembly Binder Log Entry  (16/08/2012 @ 14:13:37) ***

The operation failed.
Bind result: hr = 0x80070002\. The system cannot find the file specified.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Program Files\Microsoft Office\Office12\OUTLOOK.EXE
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: DisplayName = System.Data.SQLite, Version=1.0.65.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139
 (Fully-specified)
LOG: Appbase = file:///C:/Program Files/TargetIntegration/CiviSync/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = OUTLOOK.EXE
Calling assembly : ServiceStack.OrmLite.SqliteNET, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: Start binding of native image System.Data.SQLite, Version=1.0.65.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139.
WRN: No matching native image found.
LOG: IL assembly loaded from C:\Users\<username>\AppData\Local\assembly\dl3\9N164N9X.7OK\DRB00MX7.CBX\2f49c891\005cc530_ea6ccd01\System.Data.SQLite.dll. 
```

我不知道，为什么会这样。这发生在发布版本之后的一台客户端机器上。即使在发布版本之后，在我的机器上它也可以正常工作。

即便如此，即使在异常之后，添加也可以正常工作。

问候莫希特·塔克拉尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:32:45.230

通常大多数 Sqlite 问题是 32 位 / 64 位 dll 不匹配的结果。您需要为您的平台选择最合适的 Sqlite 库：

*   [ServiceStack.OrmLite.Sqlite32](http://nuget.org/packages/ServiceStack.OrmLite.Sqlite32) - 32 位混合模式 .NET 仅程序集
*   [ServiceStack.OrmLite.Sqlite64](http://nuget.org/packages/ServiceStack.OrmLite.Sqlite64) - 64 位混合模式 .NET 仅程序集
*   [ServiceStack.OrmLite.Sqlite.Mono](http://nuget.org/packages/ServiceStack.OrmLite.Sqlite.Mono) - 32 位非托管 dll，与 .NET / Mono 兼容

仅 .NET 版本是混合模式程序集，其中嵌入了原生版本的 sqlite3.dll，而 Mono / .NET 版本包含外部 32/64 位 Windows dll。如果您使用它，您需要将适当的**sqlite3.dll**复制到您的项目目录中，并将**Build Action**设置为**Copy If Newer**。

您应该能够为您的平台使用 Mono 或 Mixed Mode 程序集。

# android - 有一个填充的微调器，想要测试一个字符串以查看它是否存在于微调器中

> ID：11988341
> 
> 赞同：1
> 
> 时间：2012-08-16T13:34:45.090
> 
> 标签：android, spinner

就像问题说的那样，我有一堆人满为患的微调器。在后台线程中，我从某个地方获取数据，当我得到数据时，我想显示它。

如果微调器的内容包含相同的字符串，我想将微调器设置为我拥有的字符串，否则为 N/A。（ N/A 位于每个填充微调器的顶部）

编辑 ：

试图澄清更多......

微调器最初填充了一堆值，默认值显示在微调器上。

假设列表是`["a", "b", "c", "d"]`. 微调器只显示向下箭头。

我的应用程序将在某个时候读入数据。我想搜索微调器列表，看看我读入的数据是否在列表中。然后，将微调器从不显示任何内容更改为在其上放置我要查找的字符串。

我真的想不出还有什么办法来解释它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:42:55.423

```
 if(list.contains(ur_string))
            {
            int flag=1,i=0;
    while(flag==1)
    {
    String x=sp.getItemAtPosition(i).toString();
    if(x.equals(your_string))
    {
        spinner.setSelection(i);
        flag=0;
    }
    i++;
    }
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:37:56.897

保存您的数据`List<String>`并使用[list.contains()](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#contains%28java.lang.Object%29)您可以检查是否有字符串

```
public boolean containString(String chkString){

     if(list.contains(chkString)){
         return true;
     }
 return false; 
    } 
```

# c# - 从 DataGridRow 读取条目时遇到问题

> ID：11988342
> 
> 赞同：0
> 
> 时间：2012-08-16T13:34:47.510
> 
> 标签：c#, xml, listview, datagrid

我在 .xaml 窗口中有一个 ListView，其中有一个条目列表。这是重要的代码：

```
<ListView Grid.Row="1" Name="findList" BorderThickness="0" Margin="-4,26,-4,-4">
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <EventSetter Event="MouseDoubleClick" Handler="OnFindItem"></EventSetter>
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.View>
        <GridView>
            <GridViewColumn Header="ID" DisplayMemberBinding="{Binding Path=ID}" Width="32"/>
            <GridViewColumn Header="Key" DisplayMemberBinding="{Binding Path=Key}" Width="140"/>
            <GridViewColumn Header="English" DisplayMemberBinding="{Binding Path=English}" Width="250"/>
            <GridViewColumn Header="Translated Language" DisplayMemberBinding="{Binding Path=Translation}" Width="250"/>
        </GridView>
    </ListView.View>
</ListView> 
```

当用户双击其中一个条目时，它会转到我的 C# 文件中的 OnFindItem。它的特定代码块（尽管完全损坏）在这里：

```
private void OnFindItem(object sender, RoutedEventArgs e)
    {
        ListViewItem output = e.Source as ListViewItem;
        if (output != null)
        {
            //More code here.
        }
    } 
```

无论我似乎在 C# 中的这一点代码中调整了什么，我似乎都无法读取用户双击的行的内容。我已经检查了许多网页，包括 SO 和 MSDN 上的页面以及类似的解决方案，但是对于 C# 非常陌生，我只是看不到我应该在这里做什么。

在此先感谢，任何能够提供帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:00:11.967

我终于找到了解决我的问题的方法。C# 代码应该如下所示：

```
private void OnFindItem(object sender, RoutedEventArgs e)
    {
        ListViewItem output = e.Source as ListViewItem;

        if (output != null)
        {
            DataRowView rowView = output.Content as DataRowView;
            if (rowView != null)
            {
                //More code here.
            }
         }
     } 
```

# java - 如何停止在java swing中执行的动作

> ID：11988347
> 
> 赞同：3
> 
> 时间：2012-08-16T13:35:14.920
> 
> 标签：java, button, action

我正在创建一个 java 桌面应用程序。我有两个按钮“创建”和“取消”。如果我按创建，它将在新窗口中创建一个报告。**我的问题在“取消”按钮上。如果用户按下创建按钮，则需要一些时间来创建新报告。取消按钮应该只在创建时起作用。如果用户按下取消按钮，报告创建操作应该中止。**我添加动作侦听器来创建和取消按钮，但是当我单击创建时，我无法同时单击取消按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:43:01.373

尝试在单独的线程中运行每个进程。取消不起作用的原因是创建需要时间来完成其过程。在那段时间里，它占用了主线程并停止了任何可能被其他 UI 元素执行的操作（包括取消按钮）。

您的取消按钮可能正在工作。但是每次单击它时，被触发的事件都会被放入队列的后面，以便在创建按钮的事件后面进行处理。通过将事件处理放在单独的线程中并同步两个按钮所需的任何资源（只要这些资源是线程安全的！），您应该能够使用取消按钮轻松停止由事件按钮创建的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:41:26.010

尝试创建两个不同`ActionListener`的 s：一个用于 "Create" `JButton`，一个用于 "Cancel" `JButton`。这应该允许一个响应，而另一个正在处理。

# eclipse - 引起：java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext

> ID：11988350
> 
> 赞同：4
> 
> 时间：2012-08-16T13:35:17.827
> 
> 标签：eclipse, spring, tomcat, maven, deployment

> **可能重复：**
> [如何在 eclipse 中的 tomcat 上部署 Maven 项目严重：子容器在启动 java.util.concurrent.ExecutionException 期间失败](https://stackoverflow.com/questions/11976791/how-to-deploy-maven-project-on-tomcat-in-eclipse-severe-a-child-container-faile)

您好，我是 Maven 新手，刚刚从 SVN 存储库中下载了一个项目，它在上次恢复期间处于良好的工作状态。它使用spring + hibernate + jsf，并且正在部署在tomcat服务器上。我收到以下错误，不确定问题出在哪里，我很迷茫。任何方向都将不胜感激！

```
Aug 16, 2012 9:18:17 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.7.0_06\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files\Java\jdk1.7.0_06\jre\bin;C:/Program Files/Java/jdk1.7.0_03/bin/../jre/bin/server;C:/Program Files/Java/jdk1.7.0_03/bin/../jre/bin;C:/Program Files/Java/jdk1.7.0_03/bin/../jre/lib/amd64;C:\Program Files\Java\jdk1.7.0_03\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Dev\eclipse;;.
Aug 16, 2012 9:18:18 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:cepis' did not find a matching property.
Aug 16, 2012 9:18:18 AM org.apache.tomcat.util.digester.Digester endElement
WARNING:   No rules found matching 'Server/Service/Engine/Host/Context/Logger'.
Aug 16, 2012 9:18:18 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Aug 16, 2012 9:18:18 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Aug 16, 2012 9:18:18 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 917 ms
Aug 16, 2012 9:18:18 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Aug 16, 2012 9:18:18 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
Aug 16, 2012 9:18:19 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cepis]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cepis]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2308)
    at java.lang.Class.getDeclaredFields(Class.java:1760)
    at org.apache.catalina.startup.WebAnnotationSet.getDeclaredFields(WebAnnotationSet.java:452)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:257)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:136)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:66)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:381)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:858)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationContext
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 21 more

Aug 16, 2012 9:18:19 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Aug 16, 2012 9:18:19 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

Aug 16, 2012 9:18:19 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 695 ms 
```

再次提前感谢！

编辑：

解决了：

这对其他人可能有用也可能没有用，但请记住，我是 Maven 新手，结果发现我在部署程序集中缺少 Maven 依赖项。

这是通过右键单击 Eclipse 中的项目添加的。

-> 属性 -> 部署程序集 -> 添加 -> 然后选择 Maven 依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:35:55.843

它无法加载 Springs jar 文件。

第一种方法：

*   确保您已`m2eclipse`安装插件
*   将项目导入为`maven project`
*   将项目方面更改为`Dynamic web project`
*   [为部署添加 Maven 依赖项](https://stackoverflow.com/questions/6083501/maven-dependencies-not-visible-in-web-inf-lib)
*   现在它应该开始使用`Run as -> Run on server`

* * *

第二种方法：

如果以上不起作用，您将不得不更改`server.xml`tomcat。将其指向`target``s `snapshot folder`。它会像下面这样

```
<Context
  docBase="/path/to/target/cepis/snapshot/folder" 
  path="/cepis"
  reloadable="true" /> 
```

代替

```
<Context
  docBase="cepis"
  path="/cepis"
  reloadable="true"
  source="org.eclipse.jst.jee.server:cepis"/> 
```

现在只需从eclipse启动tomcat。这种方法始终适用于任何 Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:55:49.013

您可能需要尝试在 Eclipse 中刷新所有项目。之后，确保在启动之前“清理”服务器状态。如果它抛出 NoClassDefFound 错误，根据我的经验，这意味着它找不到它需要的文件。

# objective-c - 当我将模型从 ViewController 传输到 ViewController 时，我应该使用强指针吗？

> ID：11988353
> 
> 赞同：1
> 
> 时间：2012-08-16T13:35:24.273
> 
> 标签：objective-c, ios, automatic-ref-counting

假设我有一个显示“披萨”图片的应用程序。假设我的应用程序模型只是一个包含 9 个不同披萨的 UIImage 的数组。

```
@property (nonatomic) NSArray *myPizzas; 
```

该数组是在第一个名为 的视图控制器中创建的`FirstViewController`。此视图控制器还显示前 3 个披萨图像。当用户点击屏幕上的一个按钮时，这个比萨数组被传送到第二个视图控制器 ( `SecondViewController`)，它显示接下来的 3 个比萨。最后，当用户点击屏幕上的最后一个按钮时，数组被传送到`ThirdViewController`显示最后三个比萨饼的最终视图控制器 ( )。

假设这就是应用程序所做的所有事情，并且每次新的视图控制器被连接到时，它都会被推送到导航控制器堆栈上。

我的问题是，每个视图控制器都`strong`应该引用数组还是应该只有第一个有`strong`引用，最后两个视图控制器有`weak`引用？最重要的是，为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:52:00.700

```
@property (nonatomic, copy) NSArray * myPizzas; 
```

你没看错——*复制*。如果类型是可复制的，那么`copy`（几乎）总是正确的选择——尤其是当类型是不可变的时。

如果该类型是不采用的类型`NSCopying`，那么您会选择`strong`。

没有任何好处或需要使用`weak`参考。弱引用使程序对象的语义和所有权复杂化。在这里使用弱是完全没有必要的。很可能弱指针只会导致随着时间的推移增加维护。因此，您可以通过使用强引用来避免复杂化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:42:47.007

没关系，你可以去任何一种方式。您需要至少有一个强参考，并且两种选择都提供它。如果你使用强引用，保留/释放消息的数量会增加，但这种机制对你来说是隐藏的，所以你不会注意到任何事情。

还有一个完全不涉及引用的替代选择：使您的模型及其`myPizzas`数组成为单例，并根据需要从控制器访问它。这样您就不需要将其传递给链中的下一个控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:52:03.463

实际上，dasblinkenlight 是正确的。只要您有一个强引用，您的数组就会持续存在。单例也可以工作——但我尽量避免使用它们来传递数据。

但是，您将看到的最常见的模式是将属性作为强引用（尽管在您的特定示例中，应该复制 NSArray）。

强引用，因为它保留了封装性。您的控制器不依赖于处于某个其他对象负责维护强引用的环境中。

# php - PHP 上未显示的内容包括？

> ID：11988368
> 
> 赞同：1
> 
> 时间：2012-08-16T13:36:09.803
> 
> 标签：php, html, include

我遇到了最奇怪的问题。PHP include 在文件中调用，该文件包含正文标记的开头以及主标记的开头：

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <div id="sidebar">

  </div>

  <div id="main">

<div id="menu">
    <p> test test test </p>
</div> 
```

奇怪的是，元素显示没有问题，但测试消息没有。它没有隐藏在任何元素下，因为当我查看源代码时它仍然不存在。我有一种感觉，这真的很愚蠢/微不足道，但这让我很困惑。

这是我的php：

```
<?php 
include 'inc/header.php';
require_once 'login.php';
echo('<div class="somespace"></div>');
include 'inc/queries.php';
include 'inc/footer.php';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:20:40.300

它应该可以正常工作，所以总结：

很简单：您的硬盘、本地/托管驱动器在写入过程中遇到延迟写入错误

您在文件中看到您的代码，但实际上，它不存在

如果使用 filezilla，请关闭并再次连接，看看那里有什么

请提供更多关于存储机器的信息

i had the same problem on bluehost.com with theyr drives (HDDs)

# matlab - 试图解析一个相当复杂的文本文件

> ID：11988379
> 
> 赞同：0
> 
> 时间：2012-08-16T13:36:44.150
> 
> 标签：matlab, text-parsing

我有多个文本文件，每个都是模拟的结果。该文件的内容如下：

```
Parameter_1 = value
Parameter_2 = value
.....

Test 1
Min: value
Max: value
Average: value

Test 2
Min: value
Max: value
Average: value 
```

每个文件包含具有不同值的相同类型的参数，当然测试值也不同。

我需要能够将这些数据导入 Matlab。我想在 Matlab 中做的是能够创建参数图表（x 轴）和测试结果。例如，变化`Test 1 Min`时的值图表`Parameter_1`意味着选择 n 个文件，其中只有 Parameter_1 不同，并比较 Test 1 Min 结果。

这是我的问题：我应该如何在我的文本文件中组织这些数据，以便轻松导入到 Matlab？我是 Matlab 的新手，所以我不知道什么是最好的方法。

任何可以帮助我入门的想法都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:58:15.140

您的文件根本没有问题。您将需要编写一个解析器。但不要害怕它不是太难。

正则表达式对此非常有用。我需要阅读一些内容才能掌握它 - 但它非常强大。

我会使用这样的代码：

```
fid = fopen('myfile.txt');
result = {};
result_entry=[];
while 1
    tline = fgetl(fid);
    if ~ischar(tline), break, end

    r = regexp(tline,'^(?<key>\w+)\W*=\W*(?<value>.*?)\W*$','names');
    if ~isempty(r)
    parameter_list.(r.key) = r.value;
    continue
    end

    % does a new entry start?
    r = regexp(tline,'^Test\W+(?<num>\d+)\W*$','names');
    if ~isempty(r)
        result = [result,{result_entry}];
        result_entry = struct('TestNumber',r.num);
        continue
    end

    r = regexp(tline,'^(?<key>\w+)\W*:\W*(?<value>.*?)\W*$','names');
    if ~isempty(r)
        result_entry.(r.key) = r.value;
    end
end
fclose(fid); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:49:16.443

“组织数据的最佳方式”是一个非常有争议的问题。如果你问 10 个人，你会得到 11 个不同的答案。它通常取决于数据以及您可用于导入和导出数据的功能。

话虽如此，Matlab 在导入纯数字数据方面表现出色（哈，没有双关语）。如果您可以将文件组织为仅由数字组成，那么快速的“加载”、“dlmread”或“csvread”命令将导入它们。包含文本数据会使事情变得相当复杂。

例如，如果您的文件非常一致，您可以像这样组织文件：

```
Param1Value,Param2Value,Param3Value
1,Test1min,test1max,test1average
2,Test2min,test2max,test2average 
```

如果示例中的所有文本都是简单的数值（整数或浮点数），则很容易导入 Matlab。您会知道第一行包含您的参数值

```
data = csvread('input.csv');
params = data(1,:); 
```

您可以快速提取测试数字、最小值、最大值和平均值。

```
tests = data(2:end,1);
mins = data(2:end,2);
maxs = data(2:end,3);
avgs = data(2:end,4); 
```

但这一切都取决于您在输出端的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:52:02.127

只是一个想法 - 类似于 JSON，您可以将您的保存为有效的 matlab m 文件。这样你就可以拥有所有结构特征，matlab 提供了一个相当快速的阅读。

# symfony - form _self 删除全局变量

> ID：11988381
> 
> 赞同：0
> 
> 时间：2012-08-16T13:36:46.537
> 
> 标签：symfony, twig

```
{% set admin = true %}

{% extends admin ? "AcmeAdminBundle::admin.html.twig" : "AcmeUserBundle::user.html.twig" %}

{% form_theme form _self %}

//custom stuff

<form action="{{ path('process_form')}}" method="post" {{ form_enctype(form) }}>
//...whatever
</form> 
```

`{% form_theme form _self %}`当我收到以下错误时，它看起来像删除了全局变量：“ `Variable "admin" does not exist`”

在这种情况下，我应该怎么做才能正确扩展模板......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:07:39.903

这是 Symfony 中的一个当前错误。一张[票](https://github.com/symfony/symfony/issues/5284)已被打开。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T21:59:27.893

来自 symfony[书](http://symfony.com/doc/current/book/templating.html)：

*   如果您在模板中使用 {% extends %}，它必须是该模板中的第一个标签。

由于您的代码示例中不是这种情况，因此您会收到您提到的错误。

# performance - linux性能测试中进程的CPU和内存使用图生成

> ID：11988382
> 
> 赞同：1
> 
> 时间：2012-08-16T13:36:49.163
> 
> 标签：performance, graph

我执行性能测试，所以在完成性能测试后，我需要找出进程使用的 cpu、内存、网络和 i/o。此外，我想使用 python 以图形方式表示所有这些值。Python中有哪些工具可以用来生成这些东西。

# css - 跨度宽度相关问题

> ID：11988384
> 
> 赞同：0
> 
> 时间：2012-08-16T13:36:51.560
> 
> 标签：css, internet-explorer, internet-explorer-9

在 jsfiddle 演示中，请注意 ie9 中“需要”字的位置，它出现在第一行，而在其他浏览器中，它会出现在第二行，如果是 ie9，我希望它也出现在第二行。

[js小提琴链接](http://jsfiddle.net/h7XuW/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:18:24.043

这种差异似乎是由[IE 9 的新渲染功能](http://msdn.microsoft.com/en-us/library/hh237264%28v=vs.85%29.aspx)引起的。如果您在不同模式下查看 IE 9 上的页面（使用 F12 并将文档模式设置为兼容模式与标准模式），您会看到文本的宽度发生了变化：字母在标准模式下被更紧密地包装。（这不是字母间距问题；而是文本渲染细节问题，例如子像素渲染。）

如果您只需要强制换行，请使用`<br>`. 否则，方法取决于目标。强制浏览器以完全相同的方式呈现一段文本是不可能的，即使它们遵循您的字体系列和字体大小设置。

# c# - GridView -> 来自 SQL 的数据绑定。FindControl 对象引用未设置为 RowDataBound 中的实例

> ID：11988385
> 
> 赞同：0
> 
> 时间：2012-08-16T13:36:53.530
> 
> 标签：c#, sql, gridview, rowdatabound

我正在尝试更改我的一个列以显示图片而不是文本。目前所有的文本都是从 SQL 中收集的。

```
 if (e.Row.RowType == DataControlRowType.DataRow)
        {
            DataRow dr = ((DataRowView)e.Row.DataItem).Row;

            HyperLink EditLink = (HyperLink)e.Row.FindControl("EditLink");
            EditLink.NavigateUrl = "javascript:ShowDialogTest('2','" + dr[0].ToString() + "')";
            HyperLink DeleteLink = (HyperLink)e.Row.FindControl("DeleteLink");
            DeleteLink.NavigateUrl = "javascript:ShowDialogTest('3','" + dr[0].ToString() + "')";

            System.Web.UI.WebControls.Image i = (System.Web.UI.WebControls.Image)e.Row.FindControl("Overall Status");
            i.ImageUrl = "url";

        } 
```

所以 EditLink 和 DeleteLink 在 ASP 中并且这些工作。[Overall Status] 是 SQL 中的一个字段，我无法将其更改为图像。

我认为这可能是因为它尚未绑定数据所以找不到该字段，但我显示了 FindControls 的计数 = SQL 结果 + 2 个字段。

接下来我认为可能是我的 ..FindControl(THISNAME) 错误。但是我不知道如何找到控件的名称。它必须是 e.Row.Controls[index].Name （我知道索引）之类的东西，但我不知道要采用什么属性。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:22:24.197

这通常是在`RowCreated`GridView 的方法中完成的（或者至少我是这样做的），据我所知，`RowDataBound`你只有行的数据，但页面上还不存在，找到一个控制连续使用`e.Row.Cells[X].FindControl("ControlName")`

希望这可以帮助...

# c# - 通过在 C# 中处理未定义的属性调用来映射 ViewModels 中的模型

> ID：11988386
> 
> 赞同：0
> 
> 时间：2012-08-16T13:36:56.653
> 
> 标签：c#, wpf, entity-framework, mvvm, properties

我正在尝试将数据库实体（EntityFramework 4.1）映射到 ViewModel（MVMMLight 框架）。在 VM 中为每个数据库字段创建属性就可以完成这项工作，但是感觉不太对，并且在稍后我们讨论映射 46 个数据库表时很难维护。示例代码：

```
public const string MyPropertyPropertyName = "MyProperty";

public string MyProperty
{
    get
    {
        return _object.MyProperty;
    }

    set
    {
        if (_object.MyProperty != value)
        {
            _object.MyProperty = value;
            RaisePropertyChanged(MyPropertyPropertyName);
        }             
    }
} 
```

其中`_object`是`EntityObject`一个 ViewModel 的指定类型的存储。

我正在考虑使用这样的动态属性

```
public object this[string propertyName]
{
    get
    {
        System.Reflection.PropertyInfo property = _object.GetType().GetProperty(propertyName);
        if (property == null)
            return null;

        return property.GetValue(_object, null);
    }
} 
```

但是将它与`{Binding MyProperty}`结果绑定`BindingExpression path error: 'MyProperty' property not found`，所以它似乎不是正确的方法。

有没有办法在我自己的类中处理未定义的属性？我认为它会完成这项工作。也许我正试图通过映射来过度操纵整个事情，并且已经有一些不错的、干净的方法来做到这一点？如果是，我想知道。

# ios - ShareKit 与 Facebook 连接

> ID：11988389
> 
> 赞同：0
> 
> 时间：2012-08-16T13:37:00.750
> 
> 标签：ios, facebook, sharekit

我有一个应用程序，用户需要登录/创建一个帐户才能使用它。我正在尝试通过 ShareKit 2.0 实现与 Facebook 的连接。你知道这是否可能，你能指出我正确的方向吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:04:54.343

是的，您可以使用 Facebook 作为任何应用程序的登录点。在此之前，您需要在 Facebook 开发者页面中注册您的应用程序。更多信息在这里：http: [//developers.facebook.com/](http://developers.facebook.com/)

在 Facebook 中创建 App 条目后，保存 App id 以在 Sharekit 中设置配置。

Sharekit 使用一个 defaultConfiguration 文件（与您的应用程序相关的所有配置都驻留在其中），它建议覆盖该类以设置您的应用程序特定的定义。

链接：[https ://github.com/ShareKit/ShareKit/wiki/Configuration](https://github.com/ShareKit/ShareKit/wiki/Configuration)

在对配置文件进行子类化后，在此处添加您的 Facebook 应用程序 ID。（我猜密钥不是必需的，因为它在创建 Facebook 应用程序后默认禁用）。

通过 Sharekit 登录 Facebook 后，您将获得令牌（它将使用密钥 - @"kSHKFacebookAccessToken" 保存在 NSUserdefaults 中），如果您需要来自 facebook 的更多数据，您可以继承 SHKFacebook 类并使用以下命令访问来自 Facebook 的数据访问令牌。

要通过 Sharekit 登录 Facebook，您需要这样做。

```
 SHKSharer *service = [[[SHKFacebook alloc] init] autorelease];
        if(![service authorize]) //This will prompt for login if token was not saved or if it got expired. 
        {
              service.shareDelegate = self; //implement the delegate so that once after login you will get to know when to fetch token.
        }
        else
        {
              //Directly access the token with the key in NSUserdefaults and use this.
        } 
```

希望这可以帮助！

更新：如果您只想将 Sharekit 用于此选项（用于 FB 登录），我建议您改用 Facebook SDK。Sharekit 让不同共享服务之间的共享变得更轻松！

# php - imagecolortransparent() 在 PHP 中将所有黑色像素变为透明

> ID：11988392
> 
> 赞同：3
> 
> 时间：2012-08-16T13:37:05.217
> 
> 标签：php, image, image-processing, php-gd

是的，所以我开始在 PHP 中构建一个函数，它可以将两个图像合并在一起，同时保留 PNG 文件的透明背景——我成功地完成了——使用下面的代码，

```
function imageCreateTransparent($x, $y) {

    $imageOut = imagecreatetruecolor($x, $y);
    $colourBlack = imagecolorallocate($imageOut, 0, 0, 0);
    imagecolortransparent($imageOut, $colourBlack);
    return $imageOut;
}

function mergePreregWthQR($preRegDir, $qrDir){

$top_file = $preRegDir;
$bottom_file = $qrDir;

$top    = imagecreatefrompng($top_file);
$bottom = imagecreatefrompng($bottom_file);

// get current width/height
list($top_width, $top_height) = getimagesize($top_file);
list($bottom_width, $bottom_height) = getimagesize($bottom_file);

// compute new width/height
$new_width = ($top_width > $bottom_width) ? $top_width : $bottom_width;
$new_height = $top_height + $bottom_height;

// create new image and merge
$new = imageCreateTransparent($new_width,$new_height);
imagecopy($new, $bottom, 0, $top_height+1, 0, 0, $bottom_width, $bottom_height);
imagecopy($new, $top, 0, 0, 0, 0, $top_width, $top_height);

$filename = "merged_file.png";

// save to file
imagepng($new, $filename);

}

mergePreregWthQR("file.png", "qr.png"); 
```

这设法合并两个图像并保持透明背景，唯一的问题是合并图像中的任何黑色像素都变成透明的，并且此合并的结果显示在此处> [合并图像](http://postimage.org/image/4u947jljx/)

上图是水母图片，下图是二维码，只有将图片放在除白色以外的任何背景上才能看到。所以我很确定正在发生的是**imagecolortransparent($imageOut, $colourBlack);** 将新创建的 merge_file.png 中的*每个黑色像素都变为透明。*我通过将 imageCreateTransparent($x, $y) 稍微更改为如下所示的内容来测试该理论，

```
function imageCreateTransparent($x, $y) {

$imageOut = imagecreatetruecolor($x, $y);
$colourBlack = imagecolorallocate($imageOut, 55, 55, 55);
imagefill ( $imageOut, 0, 0, $colourBlack );

imagecolortransparent($imageOut, $colourBlack);

return $imageOut; 
```

}

所以在这个函数中，我用颜色（55、55、55）填充整个图像，然后在我的 imagecolortransparent() 函数中将此颜色设置为透明。这样就可以了，我的 QR 码会按原样显示。唯一的问题是我认为这是一种快速而肮脏的黑客行为，如果有人在上传的图像中有颜色（55、55、55），它会变成透明的吗？所以我很想知道另一种解决方案是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T02:29:30.397

您是否尝试过仅在顶部图像上将黑色像素设置为透明，然后进行复制？

[PHP 手册指出：](http://php.net/manual/en/function.imagecolortransparent.php) “仅使用 imagecopymerge() 和真彩色图像复制透明度，而不使用 imagecopy() 或调色板图像。”

因此，这可能是在复制其他两个图像之前在最终图像上应用透明度的替代解决方案。

可能值得一看的另一件事是：[imagealphablending](http://au2.php.net/manual/en/function.imagealphablending.php)。在 php 网站上的评论中已经提到，如果设置不正确，可能会影响应用了 alpha 的图像的分层。

# sql-server - 编写查询以在给定特定条件的情况下选择特定外键条目

> ID：11988395
> 
> 赞同：1
> 
> 时间：2012-08-16T13:37:14.487
> 
> 标签：sql-server, sql-server-2008, tsql

所以我有一张桌子，有一个`FK`to a`UserId`和一个`FK`to a `ProductId`。

如果它们有多个产品，则每个`UserId`都可以列出多次。

我需要查询以获取每个`UserId`具有，例如`ProductId 1`，但不是`ProductId 2`。

我怎样才能开始编写这样的查询？

**编辑：**

但这是我遇到问题的部分；所有拥有产品 1 的用户都应该拥有产品 2，但有些没有，所以我需要获得拥有产品 1 而不是产品 2 的用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:43:18.303

```
select distinct userID from yourtable t
where t.ProductId=@ProductID1
and not exists(select UserID from yourtable 
                      where Userid=t.userID and ProductID=@ProductID2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:45:42.810

- 这是你想要的吗？

```
SELECT 
    u.[UserID]
  , p.[ProductID]
FROM TableA a
    LEFT JOIN Users u ON
        u.[UserID] = a.[UserID]
    LEFT JOIN Products p ON
        p.[ProductID] = a.[ProductID]
WHERE a.ProductID = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T13:46:27.317

假设您在`user`和之间有一个桥接表`product`

如果你想要更多然后 id

```
SELECT u.user_id, u.name
FROM [user] AS u
INNER JOIN user_product AS up 
        ON u.user_id = up.user_id
INNER JOIN product as p 
        ON p.product_id = up.product_id
WHERE p.id = 1 
```

或者您可以只查询您的网桥表

```
SELECT up.user_id
FROM user_product AS up
WHERE up.product_id = 1 
```

# c# - 如何获取作为对象一部分的项目列表？

> ID：11988396
> 
> 赞同：-1
> 
> 时间：2012-08-16T13:37:16.090
> 
> 标签：c#, linq, entity-framework, ado.net, linq-extensions

我有这样的事情：

```
class SomeClass 
{
     public int Id {get;set}
     public int someProperty1 {get;set;}
     public int someProperty2 {get;set;}
     public string someProperty3 {get;set;}
     public List<SomeObject> SomeObjects {get;set}
} 
```

当我想获取此类的属性时，我会：

```
var db = new SomeClass();
var myClass = db.SomeClass.Single(class => class.Id == 1); 
```

它工作得很好，我可以获得所有属性，但`List<SomeObject>`属性始终为空。我怎样才能得到一个`myClass`具有所有属性和`SomeObject`s 列表的对象？我知道我可以这样做：

```
var myList = db.SomeClass.SomeObjects.Single(...); 
```

但我不想那样做，有没有其他方法可以一次获得整个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:50:33.400

如果您使用的是实体框架，则可以使用 Include 方法包含相关表**。**[请参阅此处](http://msdn.microsoft.com/en-us/library/bb738708.aspx)的文档。

```
var db = new Context();
var myClass = db.SomeClass.Include("SomeObject").Single(class => class.Id == 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:46:02.717

你正在`SomeClass` 为它的属性分配值吗？

像

```
var db = new SomeClass();
db.Id=1;
db.someProperty1 = 1;
db.someProperty2 = 2;
db.someProperty3 = "abc";
db.SomeObjects = objListOfSomeObject //list reference of SomeObject 
```

或者您在其他任何地方定义了这些？

你怎么能打电话`db.SomeClass`？

# asp.net - ASP.NET Membership 获取用户登录失败的次数

> ID：11988398
> 
> 赞同：3
> 
> 时间：2012-08-16T13:37:32.143
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership

我的 web.config 最多允许 10 次失败的密码尝试。但我想在 5 次失败后添加 recaptcha。

我如何获得会员资格甚至自定义功能的失败尝试次数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T16:24:04.387

这个资源在这里[http://p2p.wrox.com/book-professional-asp-net-2-0-security-membership-role-management-isbn-978-0-7645-9698-8/39682-failed-login -attempts-counts.html](http://p2p.wrox.com/book-professional-asp-net-2-0-security-membership-role-management-isbn-978-0-7645-9698-8/39682-failed-login-attempts-counts.html)声明它不能直接通过 api 完成，必须通过单独的 sql 调用完成。引用以下文章：

> 我们不会直接在 API 中公开这些信息。但是，您可以查询数据库并从 vw_aspnet_MembershipUsers 视图中选择用户所在的行。然后查看 FailedPasswordAttemptCount 列以获取当前的失败尝试次数。
> 
> -Stefan 作者：专业的 ASP.NET 2.0 安全性、成员资格和角色管理

# c# - 如何添加新的“ 问问题

> ID：11988399
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, asp.net, web-config

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:41:07.073

Asp.net 不允许以图表方式更改 web.config，但是您可以使用不是首选方式的文件 io 类来更改它。

您可以制作一个设置 xml 文件并将其用于从代码中读取/写入您的设置。

# vba - VBA 中的 PDFCreator 选项用于不自动打开 PDF

> ID：11988400
> 
> 赞同：0
> 
> 时间：2012-08-16T13:37:35.800
> 
> 标签：vba, pdf, merge, option, acrobat

我对 PDFCreator 有一个问题，我在 VBA 中执行一系列打印作业，但我想保持沉默。问题在于，对于每个 pdf，PDFCreator 都会自动打开 acrobat 阅读器，并且应用程序会挂起，直到您手动关闭它，这并不是那么聪明。我能做些什么？

这是 pdfjob 的设置

```
'Assign settings for PDF job
With pdfjob
.cOption("UseAutosave") = 1
.cOption("UseAutosaveDirectory") = 1
.cOption("AutosaveDirectory") = sPDFPath
.cOption("AutosaveFilename") = sPDFName
.cOption("AutosaveFormat") = 0 ' 0 = PDF
DefaultPrinter = .cDefaultPrinter
.cDefaultPrinter = "PDFCreator"
.cClearCache
End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-22T18:03:57.943

添加：

```
.cOption("OpenOutputFile")=0
.cOption("RunProgramAfterSaving")=0
.cOption("RunProgramBeforeSaving")=0
.cOption("SendEmailAfterAutoSaving")=0
.cOption("AutosaveStartStandardProgram")=0 
```

注意：虽然 Office 2007+ 支持保存/导出为 PDF（当您安装额外的官方附加组件时），但选项非常有限。使用 PDFCreator，您可以控制更多选项，并生成非常小的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:33:10.277

自从我使用 PDF 创建器已经很长时间了，但是查看我的文件，我发现我有一个 .cStart 选项。

```
With PDFCreator1
    .cStart "/NoProcessingAtStartup"
    .cOption("UseAutosave") = 1
    .cOption("UseAutosaveDirectory") = 1
    .cOption("AutosaveDirectory") = strSaveDirectory
    .cOption("AutosaveFilename") = strFileName
    .cOption("AutosaveFormat") = 0 ' 0 = PDF
    DefaultPrinter = .cDefaultPrinter
    .cDefaultPrinter = "PDFCreator"
    .cClearCache
End With 
```

# jquery - 如何获取表格图像以及如何检查图像是否可用或不使用 jquery？

> ID：11988404
> 
> 赞同：1
> 
> 时间：2012-08-16T13:37:46.723
> 
> 标签：jquery

我有 3*3 矩阵表，每个都有图像，但一个是空的，所以如何检查是空的或不为空使用 JQUERY

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:40:08.223

您可以检查您`<td>`是否有任何子元素：

`if($('td').children().length > 0) { // do something }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:42:42.427

您可以使用该`length`属性：

```
$('table tr td').each(function() {
   if (!$(this).find('img').length) {
       console.log('This TD is empty')
   }
}) 
```

或者：

```
$('table tr td').each(function() {
   if ($(this).is(':empty')) {
       console.log('This TD is empty')
   }
}) 
```

或者：

```
var $empty = $('table td:empty');
var $notEmpty = $('table td:not(:empty)'); 
```

# iphone - 在 iAd 网络上 iPhone 应用程序状态已配置并生效，但未在设备上投放广告

> ID：11988407
> 
> 赞同：1
> 
> 时间：2012-08-16T13:38:00.500
> 
> 标签：iphone, ios, iad

iPhone 新闻应用程序现已准备好销售，并且在 iAd 网络上的状态为 - 直播：此应用正在接收直播广告。您已为此应用配置了广告偏好。购买后未显示任何类型的广告，请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:00:24.267

当应用程序在 App Store 上时，没有看到实时广告可能会令人惊讶。

但事实*并非如此*：**iAd 填充率通常很低**。
您不会在每次请求时都收到广告，但前提是 iAd 目前正在投放广告活动。

我一直在经历这个。很长一段时间没有广告，然后他们开始为大型活动突然出现。

相比之下，您使用 AdMob 的填充率非常高，但收入 (eCPM) 却很低。iAd 则完全相反：填充率低，eCPM 高。

我认为您可以通过启用开发者广告（其他应用程序的广告）来提高 iAd 填充率，但这会降低其他广告系列的收入。

# entity-framework - 使用 Entity Framework 4.3.1 并行插入、更新、删除

> ID：11988411
> 
> 赞同：1
> 
> 时间：2012-08-16T13:38:07.603
> 
> 标签：entity-framework, parallel-processing, task-parallel-library

是否可以使用 Entity Framework 4.3.1 并行插入、更新、删除 1,000 个不同的表行？

你会怎么做？并行框架任务？线程？还有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:43:19.780

您可以使用 TPL 来执行此操作，但我怀疑 EF。使用 ADO.NET，如果要对同一行进行调用（最有可能更新），您可能希望确保每次调用的 CommandText 都是唯一的。因此，您可能需要在每次更新时创建一个新连接并关闭它。使用连接池仅对您不希望的选择查询有意义；当其他线程执行相同操作时，不希望不同的线程对同一个表进行更新。插入可能不是问题。我也不知道删除会如何。如果一行已经被删除，除非您返回并使用它，否则不会发生任何事情。

或者您可以做的是将项目复制到集合（更新删除现有的），然后进行批量插入。

你必须测试才能发现！

# jsf - JSF 资源库有什么用途，应该如何使用？

> ID：11988415
> 
> 赞同：238
> 
> 时间：2012-08-16T13:38:19.100
> 
> 标签：jsf, jsf-2, resources

JSF[`<h:outputStylesheet>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputStylesheet.html)和组件有一个[`<h:outputScript>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputScript.html)属性。这是什么，应该如何使用？网络上有很多示例，它们使用以下通用内容/文件类型，和（或）作为库名称，具体取决于所使用的标签：[`<h:graphicImage>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/graphicImage.html)`library``css``js``img``image`

```
<h:outputStylesheet library="css" name="style.css" />
<h:outputScript library="js" name="script.js" />
<h:graphicImage library="img" name="logo.png" /> 
```

它有什么用处？这些示例中的`library`值似乎只是重复标记名称已经表示的任何内容。对于一个`<h:outputStylesheet>`它基于标签名称已经很明显，它代表一个“CSS库”。与以下也以相同方式工作的有什么区别？

```
<h:outputStylesheet name="css/style.css" />
<h:outputScript name="js/script.js" />
<h:graphicImage name="img/logo.png" /> 
```

此外，生成的 HTML 输出有点不同。给定 的上下文路径`/contextname`和`FacesServlet`URL 模式的映射`*.xhtml`，前者会生成以下 HTML，其中库名称作为请求参数：

```
<link rel="stylesheet" type="text/css" href="/contextname/javax.faces.resource/style.css.xhtml?ln=css" />
<script type="text/javascript" src="/contextname/javax.faces.resource/script.js.xhtml?ln=js"></script>
<img src="/contextname/javax.faces.resource/logo.png.xhtml?ln=img" alt="" /> 
```

而后者在 URI 的路径中生成以下带有库名称的 HTML：

```
<link rel="stylesheet" type="text/css" href="/contextname/javax.faces.resource/css/style.css.xhtml" />
<script type="text/javascript" src="/contextname/javax.faces.resource/js/script.js.xhtml"></script>
<img src="/contextname/javax.faces.resource/img/logo.png.xhtml" alt="" /> 
```

事后看来，后一种方法也比前一种方法更有意义。`library`那么该属性到底有多大用处？

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2012-08-16T13:38:19.100

实际上，网络上所有那些将“js”、“css”、“img”等常见内容/文件类型用作库名称的示例都是**误导性**的。

### 现实世界的例子

首先，让我们看看现有的 JSF 实现（如[Mojarra](http://javaserverfaces.java.net)和[MyFaces](http://myfaces.apache.org) ）以及 JSF 组件库（如[PrimeFaces](http://primefaces.org)和[OmniFaces）如何](http://omnifaces.org)使用它。他们中没有人以这种方式使用资源库。他们通过以下方式使用它（在幕后，通过[`@ResourceDependency`](http://docs.oracle.com/javaee/7/api/javax/faces/application/ResourceDependency.html)或[`UIViewRoot#addComponentResource()`](https://docs.oracle.com/javaee/7/api/javax/faces/component/UIViewRoot.html#addComponentResource(javax.faces.context.FacesContext,%20javax.faces.component.UIComponent))）：

```
<h:outputScript library="javax.faces" name="jsf.js" />
<h:outputScript library="primefaces" name="jquery/jquery.js" />
<h:outputScript library="omnifaces" name="omnifaces.js" />
<h:outputScript library="omnifaces" name="fixviewstate.js" />
<h:outputScript library="omnifaces.combined" name="[dynamicname].js" />
<h:outputStylesheet library="primefaces" name="primefaces.css" />
<h:outputStylesheet library="primefaces-aristo" name="theme.css" />
<h:outputStylesheet library="primefaces-vader" name="theme.css" /> 
```

应该清楚的是，它基本上代表了所有这些资源通常属于的**公共库/模块/主题名称。**

### 更容易识别

这样，指定和区分这些资源属于和/或来自哪里就容易多了。想象一下，您碰巧`primefaces.css`在自己的 web 应用程序中有一个资源，您正在覆盖/微调 PrimeFaces 的一些默认 CSS；如果 PrimeFaces 不使用自己的库名称`primefaces.css`，则不会加载 PrimeFaces 自己的库名称，而是加载 webapp 提供的库名称，这会破坏外观。

此外，当您使用 custom 时[`ResourceHandler`](http://docs.oracle.com/javaee/7/api/javax/faces/application/ResourceHandler.html)，您还可以在正确使用时对来自特定库的资源应用更细粒度的控制`library`。如果所有组件库都对所有 JS 文件使用“js”，那么如何`ResourceHandler`区分它是否来自特定组件库？例如 OmniFaces[`CombinedResourceHandler`](https://github.com/omnifaces/omnifaces/blob/2.0/src/main/java/org/omnifaces/resourcehandler/CombinedResourceHandler.java#L280)和[`GraphicResourceHandler`](https://github.com/omnifaces/omnifaces/blob/2.0/src/main/java/org/omnifaces/resourcehandler/GraphicResourceHandler.java#L48); 检查`createResource()`在委派给链中的下一个资源处理程序之前检查库的方法。这样他们就知道何时创建`CombinedResource`或`GraphicResource`用于目的。

应该注意的是 RichFaces 做错了。它根本没有使用任何`library`资源，并且在其上自制了另一个资源处理层，因此无法以编程方式识别 RichFaces 资源。这正是[OmniFaces](http://omnifaces.org) [`CombinedResourceHander`](http://showcase.omnifaces.org/resourcehandlers/CombinedResourceHandler)必须引入[基于反射的 hack](https://github.com/omnifaces/omnifaces/blob/2.0/src/main/java/org/omnifaces/util/Hacks.java#L228)以使其能够与 RichFaces 资源一起工作的原因。

### 你自己的网络应用

你自己的 webapp 不一定需要资源库。你最好忽略它。

```
<h:outputStylesheet name="css/style.css" />
<h:outputScript name="js/script.js" />
<h:graphicImage name="img/logo.png" /> 
```

或者，如果你真的需要一个，你可以给它一个更合理的通用名称，比如“默认”或一些公司名称。

```
<h:outputStylesheet library="default" name="css/style.css" />
<h:outputScript library="default" name="js/script.js" />
<h:graphicImage library="default" name="img/logo.png" /> 
```

或者，当资源特定于某个主 Facelets 模板时，您也可以为其指定模板名称，以便更容易相互关联。换句话说，它更多是出于自我记录的目的。例如在`/WEB-INF/templates/layout.xhtml`模板文件中：

```
<h:outputStylesheet library="layout" name="css/style.css" />
<h:outputScript library="layout" name="js/script.js" /> 
```

还有一个`/WEB-INF/templates/admin.xhtml`模板文件：

```
<h:outputStylesheet library="admin" name="css/style.css" />
<h:outputScript library="admin" name="js/script.js" /> 
```

对于真实世界的示例，请查看[OmniFaces 展示源代码](https://github.com/omnifaces/showcase)。

或者，当您想在多个 webapps 上共享相同的资源并基于与[此答案](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code/8320738#8320738)中相同的示例创建一个“通用”项目时，该项目又作为 JAR 嵌入 webapp's`/WEB-INF/lib`中，然后也将其作为库引用（名称由您自由选择；OmniFaces 和 PrimeFaces 等组件库也可以这样工作）：

```
<h:outputStylesheet library="common" name="css/style.css" />
<h:outputScript library="common" name="js/script.js" />
<h:graphicImage library="common" name="img/logo.png" /> 
```

### 库版本控制

另一个主要优点是您可以以正确的方式对您自己的 webapp 提供的资源应用资源库版本控制（这不适用于嵌入在 JAR 中的资源）。您可以在 library 文件夹中创建一个直接子文件夹，并在`\d+(_\d+)*`模式中使用名称来表示资源库版本。

```
WebContent
 |-- resources
 |    `-- default
 |         `-- 1_0
 |              |-- css
 |              |    `-- style.css
 |              |-- img
 |              |    `-- logo.png
 |              `-- js
 |                   `-- script.js
 : 
```

使用此标记时：

```
<h:outputStylesheet library="default" name="css/style.css" />
<h:outputScript library="default" name="js/script.js" />
<h:graphicImage library="default" name="img/logo.png" /> 
```

`v`这将使用库版本作为参数生成以下 HTML ：

```
<link rel="stylesheet" type="text/css" href="/contextname/javax.faces.resource/css/style.css.xhtml?ln=default&amp;v=1_0" />
<script type="text/javascript" src="/contextname/javax.faces.resource/js/script.js.xhtml?ln=default&amp;v=1_0"></script>
<img src="/contextname/javax.faces.resource/img/logo.png.xhtml?ln=default&amp;v=1_0" alt="" /> 
```

因此，如果您编辑/更新了某些资源，那么您需要做的就是将版本文件夹复制或重命名为新值。如果您有多个版本文件夹，则 JSF`ResourceHandler`将根据数字排序规则自动从最高版本号开始提供资源。

因此，当复制/重命名`resources/default/1_0/*`文件夹时，`resources/default/1_1/*`如下所示：

```
WebContent
 |-- resources
 |    `-- default
 |         |-- 1_0
 |         |    :
 |         |
 |         `-- 1_1
 |              |-- css
 |              |    `-- style.css
 |              |-- img
 |              |    `-- logo.png
 |              `-- js
 |                   `-- script.js
 : 
```

然后最后一个标记示例将生成以下 HTML：

```
<link rel="stylesheet" type="text/css" href="/contextname/javax.faces.resource/css/style.css.xhtml?ln=default&amp;v=1_1" />
<script type="text/javascript" src="/contextname/javax.faces.resource/js/script.js.xhtml?ln=default&amp;v=1_1"></script>
<img src="/contextname/javax.faces.resource/img/logo.png.xhtml?ln=default&amp;v=1_1" alt="" /> 
```

当第一次请求具有更改参数的 URL 时，这将强制 Web 浏览器直接从服务器请求资源，而不是从缓存中显示具有相同名称的资源。这样，最终用户在需要检索更新的 CSS/JS 资源时不需要进行硬刷新（Ctrl+F5 等）。

请注意，对于包含在 JAR 文件中的资源，库版本控制是不可能的。你需要一个自定义的`ResourceHandler`. 另请参阅[如何对 jar 中的资源使用 JSF 版本控制](https://stackoverflow.com/questions/18143383/how-to-use-jsf-versioning-for-resources-in-jar)。

### 也可以看看：

*   [JSF 资源版本控制](https://stackoverflow.com/questions/9929417/jsf-resource-versioning)
*   [JSF2 静态资源缓存](https://stackoverflow.com/questions/10362942/jsf2-static-resource-caching)
*   [具有共享代码的多个 JSF 项目的结构](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code)
*   [JSF 2.0 规范](http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html)- 第 2.6 章资源处理

# php - Drupal 7 自定义模块给出 403

> ID：11988417
> 
> 赞同：1
> 
> 时间：2012-08-16T13:38:20.147
> 
> 标签：php, drupal, drupal-7

我的自定义 drupal 7 模块遇到了一些问题。请注意，这不是我的第一个模块。这是我的钩子菜单；

```
function blog_contact_menu(){
    $items = array();
    $items["blog_contact/send_to_one"] = array(
    "page_callback"=>"single_blogger_contact",
    "access_arguments"=>array("access blog_contact content"),
    "type"=>MENU_CALLBACK
    );
    return $items;
} 
```

这是我的烫发功能；

```
function blog_contact_perm() {
    return array("access blog_contact content");
} 
```

这应该可以，但是当我进行 ajax 调用时，它会给出 403 禁止。您无权查看 bla bla。我的ajax调用正确简单，url正确，类型为post。我没有直接看到原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:37:27.620

菜单路由器项中的属性中包含空格而不是下划线。`access_arguments`实际上应该是`access arguments`，`page_arguments`应该是`page arguments`，等等：

```
function blog_contact_menu(){
  $items = array();
  $items["blog_contact/send_to_one"] = array(
    "title" => "Title",
    "page callback"=>"single_blogger_contact",
    "access arguments"=>array("access blog_contact content"),
    "type"=>MENU_CALLBACK
  );
  return $items;
} 
```

另请注意，这`title`是必需的属性。

除此之外，`hook_permission()`已经提到您的代码的问题是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:19:21.957

由于您没有[`access_callback`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)在`hook_menu`实现中指定 an ，因此默认情况下它使用该[`user_access`](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_access/7)函数并检查您是否已`access blog_contact content`授予权限。

```
function blog_contact_menu(){
    $items = array();
    $items["blog_contact/send_to_one"] = array(
    // As mentioned in Clive's answer, you should provide a title 
    "title" => "Your Title goes here",
    "page callback"=>"single_blogger_contact",
    // No "access callback" so uses user_access function by default
    "access arguments"=>array("access blog_contact content"),
    "type"=>MENU_CALLBACK
    ); 
```

这`access blog_contact content`不是 Drupal 知道的权限，因此该`user_access`函数返回 false，这就是您获得 403 访问被拒绝的原因。

如果你想告诉 Drupal`access blog_contact content`权限，那么钩子是[`hook_permission`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_permission/7)，而不是`hook_perm`。

你的代码应该更像：

```
function blog_contact_permission() {
  return array(
    'access blog_contact content' => array(
      'title' => t('Access blog_contact content'), 
      'description' => t('Enter your description here.'),
    ),
  );
} 
```

# node.js - redis pub/sub 与 node.js 中的 socket.io

> ID：11988420
> 
> 赞同：3
> 
> 时间：2012-08-16T13:38:23.780
> 
> 标签：node.js, redis, socket.io

我创建了简单的聊天应用程序。因此我使用了node.js，我在网上看到了很多简单的例子，所有人都说代码运行良好。但是当我尝试该代码时，它并没有给我正确的结果。

它抛出错误“丢弃传输”

我已阅读以下页面：1）[在 socket.io 中使用 RedisStore 的示例](https://stackoverflow.com/questions/9267292/examples-in-using-redisstore-in-socket-io/9275798#9275798) 2）[http://www.ranu.com.ar/2011/11/redisstore-and-rooms-with-socketio.html](http://www.ranu.com.ar/2011/11/redisstore-and-rooms-with-socketio.html) 3）[socket.io广播功能和 Redis pub/sub 架构](https://stackoverflow.com/questions/10880636/socket-io-broadcast-function-redis-pub-sub-architecture) 4)[我在我的集​​群 node.js/socket.io/redis pub/sub 应用程序中接收到重复的消息](https://stackoverflow.com/questions/8363242/im-receiving-duplicate-messages-in-my-clustered-node-js-socket-io-redis-pub-sub) 等等......

以下是我的代码：

服务器端代码：app.js ~~~~~~~~~~~~~~~~~~~~~~~~~

```
var app = express.createServer();
app.listen(process.env.PORT);

var io = require('socket.io').listen(app);

var store = redis.createClient();
var pub = redis.createClient();
var sub = redis.createClient();

var io = require('socket.io').listen(app);

io.configure(function () {

    //    io.enable('browser client minification');  // send minified client
    //    io.enable('browser client etag');          // apply etag caching logic based on version number
    //    io.enable('browser client gzip');          // gzip the file

    io.set('log level', 3);
    io.set("transports", ["jsonp-polling", "xhr-polling", "websocket", "flashsocket", "htmlfile"]);
    io.set("polling duration", 10);
    io.set("flash policy server", false);
    io.set("connect timeout", 500);
    io.set("reconnect", true);
    //    io.set('close timeout', 60 * 60 * 24); // 24h time out
    io.set('close timeout', 25);
    io.disable('heartbeats');
    io.set('heartbeat interval', 20);
    io.set('heartbeat timeout', 60);
    //    io.set("polling duration", 10);
    //    io.set("heartbate timeout", 30);
    //console.log("blabla");

    //var RedisStore = require('socket.io/lib/stores/redis');
    //io.set('store', new RedisStore({ redisPub: pub, redisSub: sub, redisClient: store }));
    //io.set('store', new RedisStore());
});

io.sockets.on('connection', function (client) {

    client.on("OnConnect", function (data, fn) {
        console.log("socket id : " + client.id + " connected !!!");
    });

    client.on('disconnect', function () {
        console.log("\r\nmanish from server->disconnect");
        //        client.broadcast(client.sessionId + " disconnected")
        client.emit('user disconnected');
        sub.unsubscribe("chat");
        sub.quit();
    });

    sub.subscribe("chat");
    sub.on("message", function (channel, message) {
        console.log("message received on server from publish : '" + message + "'");
        client.send(message);
    });
  });
}); 
```

客户端代码：index.html ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

```
 this.Connect = function (nick, room) {
            socket = io.connect('http://XXX.XXX.X.XX', { transports: ['jsonp-polling', 'xhr-polling'] });
            Nickname = nick;
            Room = room;

//            setInterval(function () { socket.emit("keep-alive", null) }, 20 * 1000);

            socket.on('connect', function (data) {
                socket.emit('OnConnect', { nick: nick, room: room }, function (response) {
                    $("#board").append("<p>" + response.msg + "</p>");
                });
            });

            socket.on("message", function (msg) {
                alert("message received on client ...");
                $("#board").append("<p>" + msg +"</p>");
            });

            server.on("listening", function () {
                var address = server.address();
                console.log("server listening " + address.address + ":" + address.port);
            });

            socket.emit("message", { msg: msg, nick: Nickname }, function (response) {
                $("#board").append("<p> send message : " + Nickname + ": " + msg + "</p>");
            });

        }; 
```

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 但这对我不起作用。

意味着我在一个浏览器中运行这个应用程序（比如说 Firefox，然后向第二个连接发送一些消息，比如说 IE）

但在 console.log 中显示以下错误

调试：设置请求 GET /socket.io/1/jsonp-polling/Th9U-Zci8cVb5Wfwl24Y?t=1345123231804&i=0 调试：设置轮询超时调试：客户端授权调试：清除轮询超时调试：jsonppolling 写入 io.j0；调试：为客户端 Th9U-Zci8cVb5Wfwl24Y 套接字 id 设置关闭超时：Th9U-Zci8cVb5Wfwl24Y 已连接！！！从发布在服务器上收到的消息：'msg 1' 调试：设置请求 GET /socket.io/1/jsonp-polling/Th9U-Zci8cVb5Wfwl24Y?t=1345123231804&i=0 调试：设置轮询超时调试：客户端授权调试：清除轮询超时调试：jsonppolling 写入 io.j0；调试：为客户端 Th9U-Zci8cVb5Wfwl24Y 套接字 id 设置关闭超时：Th9U-Zci8cVb5Wfwl24Y 已连接！！！服务器上从发布收到的消息：“msg 1”调试：为客户端 Th9U-Zci8cVb5Wfwl24Y 触发关闭超时信息：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:40:22.357

Socket.io 房间开箱即用，您无需订阅 redis 或任何东西。

尝试在您的自定义连接功能上

```
client.on("OnConnect", function (data, fn) {
    console.log("socket id : " + client.id + " connected !!!");
    client.join(data.room);
}); 
```

此外，您不需要取消订阅房间，但如果您这样做，它应该看起来像这样

```
client.on('disconnect', function () {
    console.log("\r\nmanish from server->disconnect");
    client.emit('user disconnected');
    client.leave("chat");
}); 
```

向聊天室发送消息是通过 client.broadcast.to('chat').emit('message');

[您可以在https://github.com/LearnBoost/socket.io/wiki/Rooms](https://github.com/LearnBoost/socket.io/wiki/Rooms)阅读有关房间的更多信息

祝你好运！

# android - sdcard 根目录的正确路径是什么

> ID：11988421
> 
> 赞同：0
> 
> 时间：2012-08-16T13:38:37.683
> 
> 标签：android, android-sdcard

我有这个代码，

```
 public static boolean deleteDirectory(File path) {
        // TODO Auto-generated method stub
        if( path.exists() ) {
            File[] files = path.listFiles();
            for(int i=0; i<files.length; i++) {
                if(files[i].isDirectory()) {
                    deleteDirectory(files[i]);
                }
                else {
                    files[i].delete();
                }
            }
        }
        return(path.delete());
    } 
```

我想调用这个方法并删除 SD 卡的内容，我应该使用什么路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:43:55.467

利用

[`Environment.getExternalStorageDirectory()`](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)获取外部存储目录

在使用之前检查文档。

# css - CSS：在 div 中垂直居中图像和文本

> ID：11988422
> 
> 赞同：2
> 
> 时间：2012-08-16T13:38:41.130
> 
> 标签：css, html, vertical-alignment

我正在尝试将图像和一些文本垂直居中在单个 div 的中间（例如网页顶部的徽标和站点名称）。图像将在左侧，周围有一些填充，文本将在图像旁边，并且垂直居中位于 div 中。

这张图片显示了结果：

> ![在此处输入图像描述](../Images/99a388eb001b3bd6abec1f70c4e6c08f.png)

我尝试了许多来自互联网的代码，但无法让它工作。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:42:46.573

添加`vertical-align: middle`到您的图像。这是一个[jsfiddle](http://jsfiddle.net/gy22f/3/)示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:12:14.837

*[**只是对João 回答**](https://stackoverflow.com/a/11988502/1494505)的一个小补充（不能发表评论）：*

* * *

当您使用`<h1>`标签时，您应该在标签中添加以下内容`<h1>`：

```
display: inline;
vertical-align: middle; 
```

**现场演示：[jsFiddle](http://jsfiddle.net/gy22f/2/)**

**多行兼容：[jsFiddle](http://jsfiddle.net/gy22f/9/)** *添加*

仅添加`display: inline-block;`不会正确定位文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:18:44.110

像这样的东西？

[http://jsfiddle.net/gy22f/6/](http://jsfiddle.net/gy22f/6/)

我使用显示表格和表格单元来使垂直对齐正常工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T14:11:03.563

试试这个：它对我有用

```
<div style="border:1px solid black;">
            <table >
                <tr>
                    <td style="margin:10px 0px 10px 10px;border:1px solid black">
                        <img src="http://www.instablogsimages.com/images/2008/01/16/vw-logo-img-routan-van_5965.jpg" style="width:100px;height:100px;" alt=""/>
                    </td>
                    <td>
                        <div style="margin-top:auto;margin-bottom:auto;border:1px solid black;">
                            Some Text
                        </div>
                    </td>
                </tr>
            </table>
        </div> 
```

# java - 使用 CallableStatements 的枚举作为针对 SQL 注入的白名单

> ID：11988423
> 
> 赞同：2
> 
> 时间：2012-08-16T13:38:41.393
> 
> 标签：java, sql, jdbc, enums, sql-injection

我的应用程序中有几个这种形式的功能：

```
public long generatedCatId(String name,int age, CallableStatement statement)  throws SQLException
{  
   statement.setString(1,name);  
   statement.setInt(2,age);  
   statement.registerOutParameter(3, Types.NUMERIC);  
   statement.execute();  
   return statement.getLong(3);
} 
```

我想做的是有一个`Enum`包含所有允许`CallableStatement`的对象来创建一个白名单，这样我就可以对枚举中的一组值做一个简单的包含。我遇到的问题是我无法在没有对象的情况下创建`CallableStatement`对象`Connection`。有没有办法绕过这个限制？我不想传递连接对象，也不想`Statement`重复重新编译，因为这将作为自动化过程的一部分每天运行数十亿次。最后，我不会使用任何 ORM 工具。

**更新**

我将运行的任意语句示例：

```
CallableStatement statement = conn.prepareCallable("{Call insert_new_cat(?,?,?)}";
SQL:  insert into cat(id,name,age)  
      values(cat_sequence.nextval,name,age)  
      returning id;
CallableStatement statement = conn.prepareCallable("{Call update_cat(?,?)}";
SQL:  update cat 
      set age = age   
      where id = id; 
```

**第二次更新**

我在做什么似乎有些混乱。程序的流程是这样的：

进程 A 调用我上面声明的函数，提供编译的语句。下面的例子：

```
Connection conn = DriverManager.getConnection("foo");  
CallableStatement statement = conn.prepareCall("insert_new_cat");    
for(Cat currentCat : CatList)  
{  
    generateCatId(currentCat.name(),currentCat.age(), statement);  
}  
conn.commit(); 
```

请注意以上内容如何既是一次提交，又是一次编译或准备语句。我希望该语句成为枚举或其他最终数据结构的一部分，然后我可以在`generateCatId`函数中进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:59:29.607

没有办法忽略该`Connection`对象，连接也不是真正可重用的，除非你有一个连接池，但它们仍然需要关闭才能让池知道它们可以再次使用。但是，如果你想封装`sql`，你可以尝试这样的事情：

```
enum CallableEnum {
    CALLABLE_ONE("insert_new_cat", 3),
    CALLABLE_TWO("update_cat", 2),
    ;

    private String sql;
    private int parameterCount;

    private CallableEnum(String sql, int params) {
        this.sql = sql;
        this.parameterCount = params;
    }

    public CallableStatement prepare(Connection connection) throws SQLException {
        final StringBuilder builder = new StringBuilder("{CALL ");
        builder.append(this.sql);
        builder.append("(");

        int count = this.parameterCount;
        for (int i = 0; i < count; i++) {
            builder.append("?");
            if (i != count - 1) {
                builder.append(", ");
            }
        }

        return connection.prepareCall(builder.append(")}").toString());
    }
} 
```

然后像这样使用它：

```
Connection conn = DriverManager.getConnection("foo");
CallableStatement statement = CallableEnum.CALLABLE_ONE.prepare(conn);
for (Cat currentCat : catList) {
    generateCatId(currentCat.name(), currentCat.age(), statement);
}

conn.commit();
conn.close(); 
```

显然你可以修改它以满足你的需要，这是我能从你的问题中得到的唯一想法:)

**更新**

好的，这看起来很疯狂，我还没有测试过，但我修改了它以封装所有内容：

```
enum CallableEnum {
    CALLABLE_ONE("insert_new_cat", 3, new Executable<Long>() {
        @Override
        public Long apply(CallableStatement statement, Object... arguments) throws SQLException {
            statement.setString(1, String.valueOf(arguments[0]));
            statement.setInt(2, Integer.parseInt(String.valueOf(arguments[1])));
            statement.registerOutParameter(3, Types.NUMERIC);
            statement.execute();
            return statement.getLong(3);
        }
    }),
    ;

    private String sql;
    private Executable<?> executable;
    private int parameterCount;

    private CallableEnum(String sql, int params, Executable<?> todo) {
        this.sql = sql;
        this.parameterCount = params;
        this.executable = todo;
    }

    public CallableStatement prepare(Connection connection) throws SQLException {
        final StringBuilder builder = new StringBuilder("{CALL ");
        builder.append(this.sql);
        builder.append("(");

        int count = this.parameterCount;
        for (int i = 0; i < count; i++) {
            builder.append("?");
            if (i != count - 1) {
                builder.append(", ");
            }
        }

        return connection.prepareCall(builder.append(")}").toString());
    }

    public <T> T execute(Connection conn, Object... arguments) throws SQLException {
        CallableStatement st = this.prepare(conn);
        return (T) this.executable.apply(st, arguments);
    }

    private interface Executable<T> {
        T apply(CallableStatement st, Object... arguments) throws SQLException;
    }
} 
```

现在可以像这样使用它：

```
Connection conn = DriverManager.getConnection("foo");
for (Cat currentCat : catList) {
    CallableEnum.CALLABLE_ONE.execute(conn, currentCat.name(), currentCat.age());
}
conn.commit();
conn.close(); 
```

我不知道这是否是您想要的，或者即使它会起作用，但我会留给您的 :)

# php - 返回当前日期加上 7 天

> ID：11988428
> 
> 赞同：69
> 
> 时间：2012-08-16T13:38:56.547
> 
> 标签：php, date

我正在尝试获取当前日期加上 7 天来显示。

示例：今天是 2012 年 8 月 16 日，所以这个 php 代码段将输出 2012 年 8 月 23 日。

```
 $date = strtotime($date);
   $date = strtotime("+7 day", $date);
   echo date('M d, Y', $date); 
```

现在，我得到：1970 年 1 月 8 日。我错过了什么？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-08-16T13:41:08.443

`strtotime`将自动使用当前的 unix 时间戳来作为您的字符串注释的基础。

做就是了：

```
$date = strtotime("+7 day");
echo date('M d, Y', $date); 
```

**为未来的访问者添加了信息：**如果您需要将时间戳传递给函数，以下将起作用。

这`7 days`将从昨天开始计算：

```
$timestamp = time()-86400;

$date = strtotime("+7 day", $timestamp);
echo date('M d, Y', $date); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-07-11T09:31:48.273

```
$date = new DateTime(date("Y-m-d"));
$date->modify('+7 day');
$tomorrowDATE = $date->format('Y-m-d'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-16T13:42:23.710

如果您要查找的是 7 天后，只需输入：

```
$date = strtotime("+7 day", time());
echo date('M d, Y', $date); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-21T10:32:10.460

```
$now = date('Y-m-d');
$start_date = strtotime($now);
$end_date = strtotime("+7 day", $start_date);
echo date('Y-m-d', $start_date) . '  + 7 days =  ' . date('Y-m-d', $end_date); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-16T13:42:37.163

```
<?php
print date('M d, Y', strtotime('+7 days') ); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-16T13:46:40.513

您没有使用**time()**函数返回以自 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 00:00:00）以来的秒数测量的当前时间。像这样使用：

```
$date = strtotime(time());
$date = strtotime("+7 day", $date);
echo date('M d, Y', $date); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-15T10:02:30.317

这段代码对我有用：

```
<?php
$date = "21.12.2015";
$newDate = date("d.m.Y",strtotime($date."+2 day"));
echo $newDate; // print 23.12.2015
?> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-05T09:03:24.473

```
$date = strtotime("+7 day", strtotime("M d, Y"));
$date =  date('j M, Y', $date); 
```

这也可以

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-08T06:09:37.953

```
echo date('d-m-Y', strtotime('+7 days')); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-19T17:28:25.330

这是您可以使用的方法`strtotime()`，

```
<?php
    $date = strtotime("3 October 2005");
    $d = strtotime("+7 day", $date);
    echo "Created date is " . date("Y-m-d h:i:sa", $d) . "<br>";
?> 
```

# gwt - IntelliJ IDEA 中的多个 GWT 模块和 404 错误

> ID：11988433
> 
> 赞同：1
> 
> 时间：2012-08-16T13:39:08.977
> 
> 标签：gwt, intellij-idea

有一个用 GWT 编写的应用程序，它由许多模块组成。有一个主模块，它是应用程序的“入口点”。让我们称之为*Foo-Main*并且有几个额外的模块：*Foo-Styles*，*Foo-Icons*等 - 它们中的每一个都只有一些应该在应用程序中可用的内容`src/main/webapp`（如文件）。`.css`

我正试图让它在 IntelliJ IDEA 中工作。

我创建了一个工件，`src/main/webapp`作为源文件夹添加，我将其他模块的每个*GWT 编译器输出添加到工件中。*当我尝试运行 GWT 开发模式时，来自*Foo-Main*模块的内容可用，但来自其他模块的内容不可用 - 我收到 404 错误，例如在样式表上`src/main/webapp`。

 *我在配置中缺少什么？

编辑：

评论中要求的更多细节：

```
[WARN] 404 - GET /Styles/gxt/css/gxt-all.css (127.0.0.1) 1412 bytes
   Request headers
      Host: 127.0.0.1:8888
      Connection: keep-alive
      User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.79 Safari/537.1
      Accept: text/css,*/*;q=0.1
      Accept-Encoding: gzip,deflate,sdch
      Accept-Language: en-US,en;q=0.8
      Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
      Referer: http://127.0.0.1:8888/Foo-Main/index.html?gwt.codesvr=127.0.0.1:9997 
```

*Foo-Styles*`src/main/webapp/`中的内容如下所示：

 *```
src/
    main/
        webapp/
            ...
            gxt/
                chart/
                    ...
                css/
                    gxt-all.css
                    gxt-gray.css
                ...
            ... 
```

此外，在*Foo-Main*中，它看起来像这样：

```
src/
    main/
        webapp/
            Foo-Main/
                ...
                Styles/
                    foo-main.css
                ...
                help.html
                index.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:19:34.360

看看我问过的一个问题：

[共享 GWT 模块中的图像资源（类似小部件）](https://stackoverflow.com/questions/10737674/image-resources-in-shared-gwt-modules-widgets-like)

我相信它会帮助你;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:48:49.657

这是IDEA中的一个错误。它将在下一个 IDEA 12 EAP 版本中修复**

# asp.net-mvc - 如果设置了 FormsAuthenticationTicket，为什么 User.IsInRole("admin") 不起作用？

> ID：11988434
> 
> 赞同：0
> 
> 时间：2012-08-16T13:39:10.190
> 
> 标签：asp.net-mvc, cookies, forms-authentication

在调试器中，如果我深入 User 对象，我可以看到当前成员的 UserData 属性，`((System.Web.Security.FormsIdentity)(User.Identity)).Ticket.UserData`其中包含“admin”。

`User.Identity.IsAuthenticated`有效，`User.IsInRole("admin")`返回 false。

如果“admin”在 UserData 属性中，那么 User.IsInRole("admin") 不应该返回 true 吗？

**更新**

我像这样设置 FormsAuthenticationTicket：

```
public static string CreateEncryptedTicket(string username, string roles, DateTime expireAt, bool isPersistent = true) {
    var ticket = new FormsAuthenticationTicket(1, username, DateTime.Now, expireAt, isPersistent, roles, FormsAuthentication.FormsCookiePath);
    return FormsAuthentication.Encrypt(ticket);
} 
```

然后（其中角色是成员所在角色的逗号分隔列表）：

```
var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, MemberService.CreateEncryptedTicket(member.Id, roles, expireDate));
HttpContext.Response.Cookies.Add(cookie); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:46:36.553

如果您像这样列出用户的角色，您会看到什么？

```
public ActionResult ShowUserRoles() {
    string[] roles = Roles.GetRolesForUser();
    // Just hover your mouse over roles above since you're debugging...
    return View(roles); // This view probably doesn't exist.
} 
```

# javascript - 我收到消息“资源解释为脚本，但使用 MIME 类型文本/html 传输”

> ID：11988437
> 
> 赞同：2
> 
> 时间：2012-08-16T13:39:34.730
> 
> 标签：javascript, ajax, mime-types

我的 js 文件没有被加载，我收到消息“资源解释为脚本，但使用 MIME 类型文本/html 传输”。我知道如何解决这个问题。

谢谢， 巴拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:50:16.083

这听起来更像是服务器问题而不是 javascript 问题。

任何服务器都没有为 .js 文件设置 MIME 类型，这似乎很奇怪。这些文件有不同的扩展名吗？

也许您的 HTML 需要修改为更具体？

`<script type="text/javascript" language="javascript" src="functions.js"></script>`

您必须提供更多信息才能获得更具体的问题答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:43:21.733

正如 travis 已经说过的，这可能是因为服务器配置错误。

假设您的 js 文件的完整 URL 是 $SCRIPT_URL 您可以在控制台中运行以下任何命令来确定您的服务器的内容类型服务器您的 js 文件：

```
$ wget -O /dev/null --server-response $SCRIPT_URL 2>&1 | grep -i content-type
$ curl --include --silent $SCRIPT_URL | grep -i content-type 
```

如果你得到类似`Content-Type: application/x-javascript`服务器的东西就可以了。

但我想你的输出会是这样的`Content-Type: text/html; charset=UTF-8`，这意味着你的服务器配置需要修复。该修复程序取决于服务器，您应该提供更多信息，例如您使用什么服务器，以便我们为您提供帮助。

向特拉维斯致敬。

# c# - 使用对象检索 Datareader

> ID：11988441
> 
> 赞同：0
> 
> 时间：2012-08-16T13:40:00.890
> 
> 标签：c#, ado.net, sqldatareader, cubes, adomd.net

我一直致力于使用 Datareader 从 SQL 数据库中检索数据并将其填充到 Datatable 中。但是，我想知道是否有任何方法可以在**不使用 datatable 的情况下处理来自 datareader 的数据？** 我的意思是 - 使用对象处理表值**应该更可取..**

但是，我不想在这里使用 LINQ，因为我将使用 ADOMD 对象从数据库（多维数据集）中提取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:54:45.703

Have a look at [dapper-dot-net](http://code.google.com/p/dapper-dot-net/). I'm not sure how it works with ADOMD.NET, but it does neatly materialise query results in dynamic objects.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:02:20.960

只需遍历项目并将其设置为自定义类的属性值。下面的示例从客户表中读取数据并创建客户类对象列表。假设您有一个带有 ID 和名称作为属性的客户 POCO

```
List<Customer> custList= new List<Customer>();
string connString="yourConnectionStringHere";
using (var conn = new SqlConnection(connString))
{
    conn.Open();
    using (SqlCommand cmd = new SqlCommand())
    {
        cmd.Connection = conn;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "SELECT ID,NAME From Customer";           

        using (var reader = cmd.ExecuteReader())
        {
           if (reader.HasRows)
           {  
             while (reader.Read())
             {
               var cust= new Customer();

                    if (!reader.IsDBNull( reader.GetOrdinal("ID")))
                        cust.ID = reader.GetInt32(reader.GetOrdinal("ID"));

                    if (!reader.IsDBNull( reader.GetOrdinal("Name")))
                        cust.Name = reader.GetString(reader.GetOrdinal("Name"));

                    custList.Add(cust);
             }
           }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T04:51:11.020

公共列表GetEmployee（字符串spname）{

```
 con.Open();
        cmd = new SqlCommand();
        cmd.Connection = con;
        cmd.CommandText = spname;
        cmd.CommandType = CommandType.StoredProcedure;
        reader = cmd.ExecuteReader();
        List<EmployeeDetails> lstemp = new List<EmployeeDetails>();
        while (reader.Read())
        {
            EmployeeDetails emp = new EmployeeDetails();
            emp.EmployeeId =Convert.ToInt32( reader["EmployeeId"].ToString());
            emp.FirstName = reader["FirstName"].ToString();
            emp.LastName = reader["LastName"].ToString();
            emp.DOB = Convert.ToDateTime(reader["DOB"].ToString());
            emp.Gender = Convert.ToInt32(reader["Gender"].ToString());
            emp.QName = reader["QName"].ToString();
            emp.Dname = reader["DName"].ToString();
            emp.Email = reader["Email"].ToString();

            lstemp.Add(emp);

        }

        return lstemp;
    } 
```

# javascript - Javascript 正则表达式 - 9 位数字

> ID：11988445
> 
> 赞同：8
> 
> 时间：2012-08-16T13:40:07.823
> 
> 标签：javascript, regex

我正在尝试验证一个变量是否包含 Javascript 中的 9 位数字。这应该是基本的，但由于某种原因，这失败了：

```
 var test = "123123123";
    var pattern = new RegExp("/\d{9}/");

    if(test.match(pattern))
    {
        //This code never executes
    }
    else
    {
        //This code is always executing
        alert('no match!'); 
    } 
```

谁能看到我为什么没有比赛？

我还尝试使用以下方法对整数进行类型转换测试：

```
test = Number(test); 
```

...但这不起作用，因为它必须是 String 才能支持 .match 方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T13:43:01.517

您正在混合[两种不同的正则表达式构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Creating_a_Regular_Expression)。选一个：

```
 var pattern = new RegExp("^\\d{9}$");
 // or
 var pattern = /^\d{9}$/; 
```

**注意**，您可能想要添加开始和结束锚点（如上）以确保*整个*字符串匹配。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T13:42:23.640

您正在将[正则表达式文字语法](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)与 RegExp 类混合。尝试：

```
var test = "123123123";
var pattern = /\d{9}/;

if(test.match(pattern))
{
    alert('match!');
    //This code never executes
}
else
{
    //This code is always executing
    alert('no match!'); 
}​ 
```

此外，如果要确保正则表达式*仅*包含9 位数字，则可能需要更改正则表达式以匹配行首和行尾。现在正则表达式将匹配任何包含 9 位数字的字符串。你会像这样改变它：

```
var pattern = /^\d{9}$/; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-16T13:43:05.820

使用`new Regexp()`构造函数时，不应包含`/`分隔符，因为它们在表达式中被视为文字。

此外，您的表达式应该被锚定`^$`以确保它不包含除了九位数字之外的其他字符。

```
var test = "123123123";
// \d would need to be escaped as \\d in RegExp()
var pattern = new RegExp("^\\d{9}$");
// ..Or...
var pattern = new RegExp("^[0-9]{9}$"); 
```

`new Regexp()`如果您不需要进行字符串操作或在正则表达式中包含变量，则使用无正则表达式文字通常是更好的策略，因为它避免了额外的反斜杠转义。

```
var pattern = /^\d{9}$/; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T13:43:00.407

您不是在寻找 9 个连续数字，而是在寻找 9 个*用斜杠括起来的*连续数字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T13:44:50.827

尝试删除斜杠并转义反斜杠：

```
var test = "123123123";
var pattern = new RegExp("\\d{9}");

if(test.match(pattern))
{
    //This code never executes
    alert("match");
}
else
{
    //This code is always executing
    alert('no match!');
} 
```

# csv - 将 HIVE 导出为 CSV

> ID：11988449
> 
> 赞同：8
> 
> 时间：2012-08-16T13:40:13.563
> 
> 标签：csv, hive, libreoffice

我在 HIVE 中有一些数据，我想在 LibreOffice 中查看。

如何导出此数据，然后将其导入 Libreoffice

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-18T19:52:02.017

基于[https://issues.apache.org/jira/browse/HIVE-1603](https://issues.apache.org/jira/browse/HIVE-1603)：

```
$ hive
hive> set hive.exec.compress.output=false;
hive> create table csv_dump ROW FORMAT DELIMITED FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n' as
hive> select ...YOUR_SELECT_QUERY_HERE...;
$ hadoop dfs -cat /user/hive/warehouse/csv_dump/* > ~/csv_dump.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T14:41:12.180

我有一个类似的问题，这就是我能够解决它的方法。

第 1 步 - 将 hive 表中的数据加载到另一个表中，如下所示

> 如果存在则删除表 TestHiveTableCSV；CREATE TABLE TestHiveTableCSV ROW FORMAT DELIMITED FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n' AS SELECT Column List FROM TestHiveTable;

第 2 步 - 将 blob 从 hive 仓库复制到具有适当扩展名的新位置

> Start-AzureStorageBlobCopy `-DestContext $destContext` -SrcContainer“源容器” `-SrcBlob "hive/warehouse/TestHiveTableCSV/000000_0"` -DestContainer“目标容器”`-DestBlob“CSV/TestHiveTable.csv”

希望这可以帮助！

最好的问候， Dattatrey Sindol (Datta) [http://dattatreysindol.com](http://dattatreysindol.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:11:37.883

您可以通过 Hive SerDe 机制指定和自定义如何存储表。感谢GitHub 上的**ogrodnek**用户，有[CSV SerDe](https://github.com/ogrodnek/csv-serde)实现。

它是一种过时的（hive 0.5），但可以很容易地被新的 hive 版本采用。为了成功，我要做的就是将构建配置更改为我的配置单元分布和版本（我在**kunkunur**的拉取请求中将 pom.xml 用于 maven）并将这些行添加到**CSVSerde.java**以满足新的 API：

```
import org.apache.hadoop.hive.serde2.SerDeStats;
....
....
@Override
public SerDeStats getSerDeStats() {
// no support for statistics
return null;
} 
```

然后您可以运行`hadoop dfs -get /table/or/partition/location /local/destination`（甚至使用带有管道或单个文件输出的 -cat）从 hadoop 加载数据 - 它已经是 CSV 格式。

# c++ - 对重载的运算符参数进行隐式转换时出现编译器错误

> ID：11988452
> 
> 赞同：1
> 
> 时间：2012-08-16T13:40:22.123
> 
> 标签：c++, compiler-errors, operator-overloading, implicit-conversion, friend-function

从书中做一些练习我遇到了一个疑问。我已经将一些运算符重载定义为类 ( **Stonewt** ) 的友元函数。问题来自这样的原型：

```
friend ostream & operator<<(ostream &os, Stonewt &st);
friend Stonewt operator+(Stonewt &st1, Stonewt &st2); 
```

如果我依靠构造函数进行隐式转换并让编译器完成工作，如下所示（test1 和 test2 是类对象）：

```
cout << "Summing both weights: " << test1 + test2; 
```

我收到如下错误消息：

无法将“std::basic_ostream”左值绑定到“std::basic_ostream&&”

初始化 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) [with _CharT = char; _Traits = std::char_traits; _Tp = Stonewt]'

OTOH，如果我执行以下操作，我不会收到任何错误：

```
Stonewt test3 = test1 + test2;
cout << "Summing both weights: " << test3; 
```

这就像如果编译器得到一个 Stonewt 对象，它可以转换为 Stonewt& （这是函数所期望的）。但如果它得到其他东西，它就无法迈出步伐，直到到达 Stonewt&。（同样的事情发生在其他运算符重载（如 operator*）的其他实例中，如果我放一个 double 并期望编译器通过构造函数将其转换为 Stonewt，然后再转换为 Stonewt&，它不起作用。我必须放一个 Stonewt目的）。

## 这是正确的行为吗？有什么帮助吗？

我会放整个程序以防万一你需要它：

类定义：

```
// stonewt1.h -- revised definition for the Stonewt class (for project Exercise 11.5.cbp)

#ifndef STONEWT1_H_
#define STONEWT1_H_

using std::ostream;

class Stonewt
{
public:
    enum {Lbs_per_stn = 14}; // pounds per stone
    enum Mode {STN, ILBS, FLBS}; // stone, integer pounds, and floating-point pounds modes
private:
    int stone; // whole stones
    double pds_left; // fractional pounds
    double pounds; // entire weight in pounds
    Mode mode; // state member
public:
    Stonewt(double lbs = 0.0, Mode form = FLBS); // construct from pounds
    Stonewt(int stn, double lbs, Mode form = STN); // construct from stones and pounds
    ~Stonewt(); // do-nothing destructor
    void reset(double lbs = 0);
    void reset(int stn, double lbs = 0);
    void set_mode(Mode form);
    Mode mode_val() const;
    friend ostream & operator<<(ostream &os, Stonewt &st);
    friend Stonewt operator+(Stonewt &st1, Stonewt &st2);
    friend Stonewt operator-(Stonewt &st1, Stonewt &st2);
    friend Stonewt operator*(Stonewt &st1, Stonewt &st2);
    // conversion functions
    explicit operator int() const;
    explicit operator double() const;
};

#endif 
```

方法+友元函数+转换函数实现：

```
// stonewt1.cpp -- Stonewt class: methods, friend functions, and conversion functions implementation (compile alongside main.cpp)

#include <iostream>
#include "stonewt1.h"
using std::cout;

// construct from pounds (both arguments defaulted, form defaulted to FLBS)
Stonewt::Stonewt(double lbs, Mode form)
{
    stone = int (lbs) / Lbs_per_stn; // integer division
    pds_left = int (lbs) % Lbs_per_stn + lbs - int(lbs);
    pounds = lbs;
    mode = form;
}

// construct from stones and pounds (form defaulted to STN)
Stonewt::Stonewt(int stn, double lbs, Mode form)
{
    stone = stn;
    pds_left = lbs;
    pounds = stn * Lbs_per_stn + lbs;
    mode = form;
}

Stonewt::~Stonewt() // do-nothing destructor
{
}

// reset object data members (don't change mode)
void Stonewt::reset(double lbs)
{
    stone = int(lbs) / Lbs_per_stn;
    pds_left = int(lbs) % Lbs_per_stn + lbs - int(lbs);
    pounds = lbs;
}

void Stonewt::reset(int stn, double lbs)
{
    stone = stn;
    pds_left = lbs;
    pounds = stn * Lbs_per_stn + lbs;
}

// change object mode
void Stonewt::set_mode(Mode form)
{
    mode = form;
}

// returns mode
Stonewt::Mode Stonewt::mode_val() const
{
    return mode;
}

// friend functions
ostream & operator<<(ostream &os, Stonewt &st)
{
    if (st.mode == Stonewt::STN)
        os << st.stone << " stones and " << int(st.pds_left + 0.5) << " pounds.\n";
    else if (st.mode == Stonewt::ILBS)
        os << int(st.pounds + 0.5) << " pounds.\n";
    else if (st.mode == Stonewt::FLBS)
        os << int(st.pounds) << " pounds.\n";
    else
        os << "Invalid mode.";
    return os;
}

Stonewt operator+(Stonewt &st1, Stonewt &st2)
{
    Stonewt result;
    result.stone = int(st1.pounds + st2.pounds) / Stonewt::Lbs_per_stn;
    result.pds_left = int(st1.pounds + st2.pounds) % Stonewt::Lbs_per_stn + (st1.pounds + st2.pounds) - int(st1.pounds + st2.pounds);
    result.pounds = st1.pounds + st2.pounds;
    return result;
}

Stonewt operator-(Stonewt &st1, Stonewt &st2)
{
    Stonewt result;
    result.stone = int(st1.pounds - st2.pounds) / Stonewt::Lbs_per_stn;
    result.pds_left = int(st1.pounds - st2.pounds) % Stonewt::Lbs_per_stn + (st1.pounds - st2.pounds) - int(st1.pounds - st2.pounds);
    result.pounds = st1.pounds - st2.pounds;
    return result;
}

Stonewt operator*(Stonewt &st1, Stonewt &st2)
{
    Stonewt result;
    result.stone = int(st1.pounds * st2.pounds) / Stonewt::Lbs_per_stn;
    result.pds_left = int(st1.pounds * st2.pounds) % Stonewt::Lbs_per_stn + (st1.pounds * st2.pounds) - int(st1.pounds * st2.pounds);
    result.pounds = st1.pounds * st2.pounds;
    return result;
}

// conversion functions
Stonewt::operator int() const
{
    return int(pounds + 0.5);
}

Stonewt::operator double()const
{
    return pounds;
} 
```

客户（未完成）：

```
// main.cpp -- Exercising the revised Stonewt class: state member, operator overloadings (operator<<()
// replacing the show methods, operator+(), operator-(), operator*()) as friend functions.

#include <iostream>
#include "stonewt1.h"
#include <string>

int main()
{
    using std::cout;
    using std::cin;
    using std::string;

    cout << "***********************************************************************"
            "*********";
    cout << "*\n*\n*";
    cout.width(35);
    cout << "Menu:\n";
    (cout << "*\n*").width(10);
    (cout << "a. Reset").width(20);
    (cout << "b. Select").width(20);
    (cout << "c. Change mode").width(20);
    (cout << "d. Show").width(0);
    (cout << "\n*").width(10);
    (cout << "e. Sum").width(20);
    (cout << "f. Subtract").width(20);
    (cout << "g. Multiply").width(20);
    cout << "h. Menu";
    cout << "\n*\n*\n";
    cout << "***********************************************************************"
            "*********\n\n";
    Stonewt test1;
    Stonewt test2;
    Stonewt &sel = test1;
    char ch {'z'};
    cin.get(ch);
    switch (ch)
    {
        case 'A' :
        case 'a' :  if (sel.mode_val() == 3 || sel.mode_val() == 2)
                    {
                        cout << "Enter the pounds: ";
                        double p {0.0};
                        cin >> p;
                        sel.reset(p);
                    }
                    else if (sel.mode_val() == 1)
                    {
                        cout << "Enter the stones: ";
                        int s {0};
                        cin >> s;
                        cout << "Enter the remaining pounds: ";
                        double p {0.0};
                        cin >> p;
                        sel.reset(s, p);
                    }
                    else
                        cout << "Wrong mode.";
                    break;
        case 'B' :
        case 'b' :  {
                        cout << "Select object (1 for test1, 2 for test2): ";
                        int temp;
                        cin >> temp;
                        if (temp == 1)
                            sel = test1;
                        else
                            sel = test2;
                        break;
                    }
        case 'C' :
        case 'c' :  {
                        cout << "Select the desired mode (STN, FLBS or ILBS): ";
                        string temp;
                        cin >> temp;
                        if (temp == "STN")
                            sel.set_mode(Stonewt::Mode::STN);
                        else if (temp == "ILBS")
                            sel.set_mode(Stonewt::Mode::ILBS);
                        else if (temp == "FLBS")
                            sel.set_mode(Stonewt::Mode::FLBS);
                        else
                            cout << "Wrong mode. " << sel.mode_val() << " retained.";
                        break;
                    }
        case 'D' :
        case 'd' :  cout << sel;
                    break;
        case 'E' :
        case 'e' :  cout << "Summing both weights: " << test1 + test2;
                    break;
        case 'F' :
        case 'f' :  cout << "Subtracting the second weight from the first one: " << test1 - test2;
                    break;
        case 'G' :
        case 'g' :  {
                        cout << "Choose a factor: ";
                        double temp;
                        cin >> temp;;;
                        sel = sel * temp;
                        break;
                    }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T13:43:46.523

您不能将非常量引用绑定到临时引用，因此您需要`ostream`操作员获取 const 引用：

```
ostream & operator<<(ostream &os, const Stonewt &st); 
```

为什么？因为当你这样做时：

```
cout << "Summing both weights: " << test1 + test2; 
```

`test1 + test2`返回一个`Stonewt`临时值，并且您的操作员尝试通过非常量引用来获取它。这有效，因为`test3`不是临时的：

```
Stonewt test3 = test1 + test2;
cout << "Summing both weights: " << test3; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:44:21.203

您`operator<<`应该使用 const 参考：`std::ostream& operator<<( std::ostream& dest, Stonewt const& object );`

# hibernate - MySQLSyntaxErrorException：您的 SQL 语法有错误

> ID：11988453
> 
> 赞同：1
> 
> 时间：2012-08-16T13:40:28.943
> 
> 标签：hibernate

我不再看到我在哪里做错了。到目前为止，使用 Spring 3 和 Hibernate 和 Mysql 工作得很好并且没问题，但是在这个上它只是行不通。

这是我的课：

```
@Entity
@Table(name = "order")
@XmlRootElement(name = "order")
public class Order implements java.io.Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "idOrder", length = 11)
    private int id;

    @Column(name = "latitude", nullable = true, length = 45)
    private String latitude;

    @Column(name = "longitude", nullable = true, length = 45)
    private String longitude;

    @Column(name = "orderDate", length = 30)
    @DateTimeFormat
    private Date orderDate;

    @Column(name = "city", nullable = true, length = 45)
    private String city;

    @Column(name = "country", nullable = true, length = 45)
    private String country;

    @Column(name = "street", nullable = true, length = 45)
    private String street;

    @Column(name = "streetNo", nullable = true, length = 45)
    private String streetNo;

    @Column(name = "created", length = 30)
    @DateTimeFormat
    private Date created;

    @JoinColumn(name = "idTaxi")
    @JoinTable(name= "taxi")
    @Column(name = "idTaxi", length = 11)
    private Integer idTaxi;

    @Column(name = "orderstatus", nullable = false, length = 45)
    private String orderstatus;

    @Column(name = "clientname", nullable = true, length = 45)
    private String clientName;

    //public getters and setters

} 
```

在 db 中，我的表名是“order”。我检查了所有字段是否有错字。在持久化 xml 配置文件中：

```
[...]
 <property name="annotatedClasses">
     <list>
           <value>test.bean.Taxi</value> 
           <value>test.bean.Order</value>
     </list>
</property>
<property name="hibernateProperties">
    <props>
        <prop key="hibernate.dialect">
            org.hibernate.dialect.MySQLDialect
        </prop>
        <prop key="hibernate.hbm2ddl.auto">create</prop>
        <prop key="lazy">true</prop>
        <prop key="hibernate.show_sql">true</prop>
        <!-- Show and print nice SQL on stdout -->  
        <prop key="hibernate.format_sql">true</prop>
        <prop key="hibernate.archive.autodetection">class</prop>
    </props>
</property>
</bean>
[...] 
```

在 DAO 类中：

```
public List<Order> showAllOpenOrders() {

    List<Order> history = new ArrayList<Order>();
    history = getHibernateTemplate().find("FROM Order o where o.orderstatus ='open'");

    return history;
} 
```

我的错误：

```
SEVERE: Servlet.service() for servlet [] in context with path [/] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute query; SQL [select order0_.idOrder as idOrder1_, order0_.city as city1_, order0_.clientname as clientname1_, order0_.country as country1_, order0_.created as created1_, order0_.idTaxi as idTaxi1_, order0_.latitude as latitude1_, order0_.longitude as longitude1_, order0_.orderDate as orderDate1_, order0_.orderstatus as orderst10_1_, order0_.street as street1_, order0_.streetNo as streetNo1_ from order order0_ where order0_.orderstatus='open']; nested exception is org.hibernate.exception.SQLGrammarException: could not execute query] with root cause
com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'order order0_ where order0_.orderstatus='open'' at line 1
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)
at com.mysql.jdbc.Connection.execSQL(Connection.java:3256)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1313)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1448)
at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)
at org.hibernate.loader.Loader.doQuery(Loader.java:674)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
at org.hibernate.loader.Loader.doList(Loader.java:2220)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
at org.hibernate.loader.Loader.list(Loader.java:2099)
at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:378)
at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)
at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
at org.springframework.orm.hibernate3.HibernateTemplate$30.doInHibernate(HibernateTemplate.java:921)
at org.springframework.orm.hibernate3.HibernateTemplate$30.doInHibernate(HibernateTemplate.java:1)
at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
at org.springframework.orm.hibernate3.HibernateTemplate.find(HibernateTemplate.java:912)
at org.springframework.orm.hibernate3.HibernateTemplate.find(HibernateTemplate.java:904)
at test.rest.persistence.OrderDAOImpl.showAllOpenOrders(OrderDAOImpl.java:154)
at test.rest.services.OrderServiceImpl.showAllOpenOrders(OrderServiceImpl.java:109)
at test.rest.controller.OrderController.showAllOrders(OrderController.java:97)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

我已经成功映射了另一个类（出租车），但是这个......只是不起作用。我不明白为什么......你看到我没有看到的东西吗？所以我的数据库表是小写的“订单”，在我的班级订单中，我正在映射该表。但是，如果我尝试访问状态设置为“打开”的数据库中的所有记录，如下所示：

```
public List<Order> showAllOpenOrders() {
    ;
    List<Order> history = new ArrayList<Order>();
    history = getHibernateTemplate().find("FROM Order o where o.orderstatus ='" + TaxiStatus.OPEN + "'");

    return history;
} 
```

我收到一条错误消息，指出存在 SQL 异常。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:49:00.517

order - 是 MySQL 中的保留关键字，`backquoted`如果它不用作的一部分，则必须是`order by`

将您的查询重写为：

```
history = getHibernateTemplate().find("FROM `Order` o where o.orderstatus ='" + TaxiStatus.OPEN + "'"); 
```

# linux - 如何从命令行检查 smtp 是否正常工作（Linux）

> ID：11988454
> 
> 赞同：141
> 
> 时间：2012-08-16T13:40:31.097
> 
> 标签：linux, command-line, smtp

我有一个 SMTP 服务器，出于这个问题的目的，我们称之为：smtp.mydomain.com。

如何检查 SMTP 服务器是否在工作？我可以从 Linux 命令行手动发送电子邮件吗？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-08-16T13:40:31.097

使用 telnet 建立原始网络连接的语法如下：

```
telnet {domain_name} {port_number} 
```

所以 telnet 到你的 smtp 服务器

```
telnet smtp.mydomain.com 25 
```

并复制并粘贴以下内容

```
helo client.mydomain.com
mail from:<sender@mydomain.com>
rcpt to:<to_email@mydomain.com>
data
From: test@mydomain.com
Subject: test mail from command line

this is test number 1
sent from linux box
.
quit 
```

**注意：**不要忘记“。” 最后代表消息的结束。“退出”行退出结束会话。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-12-30T22:46:13.013

使用 telnet 测试 postfix 或其他 SMTP 的唯一事情是您必须了解命令和语法。相反，只需使用[swaks](http://www.jetmore.org/john/code/swaks/) :)

```
thufir@dur:~$ 
thufir@dur:~$ mail -f Maildir
"/home/thufir/Maildir": 4 messages
>    1 thufir@dur.bouncem                   15/553   test Mon, 30 Dec 2013 10:15:12 -0800
     2 thufir@dur.bouncem                   15/581   test Mon, 30 Dec 2013 10:15:55 -0800
     3 thufir@dur.bouncem                   15/581   test Mon, 30 Dec 2013 10:29:57 -0800
     4 thufir@dur.bouncem                   15/581   test Mon, 30 Dec 2013 11:54:16 -0800
? q
Held 4 messages in /home/thufir/Maildir
thufir@dur:~$ 
thufir@dur:~$ swaks --to thufir@dur.bounceme.net
=== Trying dur.bounceme.net:25...
=== Connected to dur.bounceme.net.
<-  220 dur.bounceme.net ESMTP Postfix (Ubuntu)
 -> EHLO dur.bounceme.net
<-  250-dur.bounceme.net
<-  250-PIPELINING
<-  250-SIZE 10240000
<-  250-VRFY
<-  250-ETRN
<-  250-STARTTLS
<-  250-ENHANCEDSTATUSCODES
<-  250-8BITMIME
<-  250 DSN
 -> MAIL FROM:<thufir@dur.bounceme.net>
<-  250 2.1.0 Ok
 -> RCPT TO:<thufir@dur.bounceme.net>
<-  250 2.1.5 Ok
 -> DATA
<-  354 End data with <CR><LF>.<CR><LF>
 -> Date: Mon, 30 Dec 2013 14:33:17 -0800
 -> To: thufir@dur.bounceme.net
 -> From: thufir@dur.bounceme.net
 -> Subject: test Mon, 30 Dec 2013 14:33:17 -0800
 -> X-Mailer: swaks v20130209.0 jetmore.org/john/code/swaks/
 -> 
 -> This is a test mailing
 -> 
 -> .
<-  250 2.0.0 Ok: queued as 52D162C3EFF
 -> QUIT
<-  221 2.0.0 Bye
=== Connection closed with remote host.
thufir@dur:~$ 
thufir@dur:~$ mail -f Maildir
"/home/thufir/Maildir": 5 messages 1 new
     1 thufir@dur.bouncem                   15/553   test Mon, 30 Dec 2013 10:15:12 -0800
     2 thufir@dur.bouncem                   15/581   test Mon, 30 Dec 2013 10:15:55 -0800
     3 thufir@dur.bouncem                   15/581   test Mon, 30 Dec 2013 10:29:57 -0800
     4 thufir@dur.bouncem                   15/581   test Mon, 30 Dec 2013 11:54:16 -0800
>N   5 thufir@dur.bouncem                   15/581   test Mon, 30 Dec 2013 14:33:17 -0800
? 5
Return-Path: <thufir@dur.bounceme.net>
X-Original-To: thufir@dur.bounceme.net
Delivered-To: thufir@dur.bounceme.net
Received: from dur.bounceme.net (localhost [127.0.0.1])
    by dur.bounceme.net (Postfix) with ESMTP id 52D162C3EFF
    for <thufir@dur.bounceme.net>; Mon, 30 Dec 2013 14:33:17 -0800 (PST)
Date: Mon, 30 Dec 2013 14:33:17 -0800
To: thufir@dur.bounceme.net
From: thufir@dur.bounceme.net
Subject: test Mon, 30 Dec 2013 14:33:17 -0800
X-Mailer: swaks v20130209.0 jetmore.org/john/code/swaks/
Message-Id: <20131230223317.52D162C3EFF@dur.bounceme.net>

This is a test mailing

New mail has arrived.
? q
Held 5 messages in /home/thufir/Maildir
thufir@dur:~$ 
```

这只是一个简单的命令。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-08-23T14:52:44.147

```
[root@piwik-dev tmp]# mail -v root@localhost
Subject: Test
Hello world
Cc:  <Ctrl+D>

root@localhost... Connecting to [127.0.0.1] via relay...
220 piwik-dev.example.com ESMTP Sendmail 8.13.8/8.13.8; Thu, 23 Aug 2012 10:49:40 -0400
>>> EHLO piwik-dev.example.com
250-piwik-dev.example.com Hello localhost.localdomain [127.0.0.1], pleased to meet you
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-8BITMIME
250-SIZE
250-DSN
250-ETRN
250-DELIVERBY
250 HELP
>>> MAIL From:<root@piwik-dev.example.com> SIZE=46
250 2.1.0 <root@piwik-dev.example.com>... Sender ok
>>> RCPT To:<root@piwik-dev.example.com>
>>> DATA
250 2.1.5 <root@piwik-dev.example.com>... Recipient ok
354 Enter mail, end with "." on a line by itself
>>> .
250 2.0.0 q7NEneju002633 Message accepted for delivery
root@localhost... Sent (q7NEneju002633 Message accepted for delivery)
Closing connection to [127.0.0.1]
>>> QUIT
221 2.0.0 piwik-dev.example.com closing connection 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T09:21:56.330

不确定这是否有帮助，但这是一个命令行工具，可让您简单地从 SMTP 服务器发送测试邮件。[http://code.google.com/p/woodpecker-tester/](http://code.google.com/p/woodpecker-tester/)

# objective-c - OpenGL绘制模型的顺序不正确

> ID：11988456
> 
> 赞同：1
> 
> 时间：2012-08-16T13:40:34.793
> 
> 标签：objective-c, cocoa, opengl

我正在尝试制作一个 Cocoa 应用程序，它可以渲染一个房间，里面有一些模型。

对于模型导入，我使用了[JEFF LAMARCHE 的 WavefrontOBJScene 类](http://iphonedevelopment.blogspot.com/2008/12/another-wavefront-obj-loader.html)，我对其进行了修改以使用 OSX 而不是 iOS。

问题是，当我尝试渲染模型时，它们无法正确渲染。我找不到关于为什么会发生这种情况的解释。

[示例图像]![http://dl.dropbox.com/u/4556129/untitled%20folder%202/Untitled.jpg](../Images/afeb90fc4bf8f373c5795a25090b9141.png)

如您所见，金字塔的内面是可见的，即使立方体位于金字塔后面，它也似乎在前面。

绘图代码

```
- (BOOL) initGL
{
    test = !test;
    //glEnable(GL_CULL_FACE);
    //glCullFace(GL_BACK);
    glEnable( GL_TEXTURE_2D );                // Enable texture mapping
    glShadeModel( GL_SMOOTH );                // Enable smooth shading
    glClearColor( 0.0f, 0.0f, 0.0f, 0.5f );   // Black background
    glClearDepth( 1.0f );                     // Depth buffer setup
    glEnable( GL_DEPTH_TEST );                // Enable depth testing
    glDepthFunc( GL_LEQUAL );                 // Type of depth test to do
    glDepthRange(0,1);

    // Really nice perspective calculations
    glHint( GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST );
    glDisable(GL_BLEND);

    return !test;
}
- (void)drawRect:(NSRect)rect
{
    if (!test) [self initGL];

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glClearColor(0.1f, 0.1f, 0.1f, 1);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);

    [self setCamera];
    [self drawObjects];

    glFlush();
}

- (void)drawObjects
{
    glMatrixMode( GL_MODELVIEW );
    glPushMatrix();
    [self drawAnObject];
    glPopMatrix();

    glPushMatrix();
    [[objects objectAtIndex:0] openGLDraw];
    glPopMatrix();

    glPushMatrix();
    [[objects objectAtIndex:1] openGLDraw];
    glPopMatrix();

}

- (void)drawAnObject
{    
    glBegin(GL_QUADS);
    {
        for (int x = -256; x < 256; ++x) {
            for (int y = -256; y < 256; ++y) {
                glColor3f(colorR[256+x][256+y], colorG[256+x][256+y], colorB[256+x][256+y]);

                //glNormal3f(1.0, 1.0, 1.0);

                glVertex3f( x    , -1.0, y);
                glVertex3f( x+1.0, -1.0, y);
                glVertex3f( x+1.0, -1.0, y+1.0);
                glVertex3f( x    , -1.0, y+1.0);
            }
        }
    }
    glEnd();

    //glMatrixMode( GL_MODELVIEW );
    //glLoadIdentity();
}

- (void)setCamera
{    
    //SET
    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    gluPerspective( 60, (float)(self.frame.size.width/self.frame.size.height), 0.1, 1000.0 );

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glRotatef( -cameraRotationY, 1.0f, 0.0f, 0.0f ); //ROT Y
    glRotatef( cameraRotationX, 0.0f, 1.0f, 0.0f ); //ROT X
    glTranslatef( -cameraPositionX, -cameraPositionY, cameraPositionZ ); // POS X Y Z
} 
```

CS对象：

```
- (void)openGLDraw
{       
    glPushMatrix();
    //glLoadIdentity();

    //Set Origin
    glTranslatef( posX, posY, -posZ ); // POS X Y Z
    glRotatef( rotV, 1.0f, 0.0f, 0.0f ); //ROT Y
    glRotatef( rotH, 0.0f, 1.0f, 0.0f ); //ROT X

    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_VERTEX_ARRAY);

    //Draw objects
    for(CSGroup *group in groups) {        
        if(TRUE) {
            glShadeModel(GL_SMOOTH);
        } else {
            glShadeModel(GL_FLAT);
        }

        //VERTICES
        GLuint verticesName = [group verticesName:GL_STATIC_DRAW];
        glBindBuffer(GL_ARRAY_BUFFER, verticesName);
        glVertexPointer(3, GL_FLOAT, 0, 0);

        //NORMALS
        GLuint normalsName = [group normalsName:GL_STATIC_DRAW];
        glBindBuffer(GL_ARRAY_BUFFER, normalsName);
        glNormalPointer(GL_FLOAT, 0, 0);

        ColorRGBA color = group.material.ambientColor;
        glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, (GLfloat *)&color);
        color = group.material.diffuseColor;
        glColor4f(color.red, color.green, color.blue, color.alpha);
        glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, (GLfloat *)&color);
        color = group.material.specularColor;
        glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, (GLfloat *)&color);
        glMaterialf(GL_FRONT_AND_BACK, GL_SHININESS, group.material.shine);

        // load (if necessary) and bind the texture
        if(group.textureCoordinatesIndexData.length > 0) {
            glEnableClientState(GL_TEXTURE_COORD_ARRAY);
            GLuint textureCoordsName = [group textureCoordinatesName:GL_STATIC_DRAW];
            glEnable(GL_TEXTURE_2D);
            glBindBuffer(GL_ARRAY_BUFFER, textureCoordsName);
            glTexCoordPointer([group texCoordSize], GL_FLOAT, 0, 0);
            GLuint texId = [group.material.diffuseTexture textureName];
            glBindTexture(GL_TEXTURE_2D, texId);
        }

        GLuint indexesName = [group indexesName:GL_STATIC_DRAW];
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexesName);
        glDrawElements(GL_TRIANGLES, (GLsizei)group.indexCount, GL_UNSIGNED_SHORT, NULL);

        if(group.textureCoordinatesIndexData.length > 0) {
            glDisableClientState(GL_TEXTURE_COORD_ARRAY);
        }
    }

    glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY);

    glPopMatrix();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T18:32:24.127

您的 DEPTH_BITS 返回零的事实意味着您没有深度缓冲区。因此深度测试将始终通过，您将无法按深度对事物进行排序。

我对 Cocoa 不太熟悉，但基本上你要做的就是在创建 opengl 上下文时，还必须请求创建深度缓冲区。（这大约是您请求颜色位数的时候）。

我不知道究竟是什么命令控制可可，但如果你不知道，你可以在这里找到它（[developer.apple.com - opengl_pixelformats](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_pixelformats/opengl_pixelformats.html#//apple_ref/doc/uid/TP40001987-CH214-SW9)）。请注意此处提到的深度，并确保您请求深度缓冲区。

# c# - 在页面加载之前检查会话变量并重定向到登录页面

> ID：11988457
> 
> 赞同：0
> 
> 时间：2012-08-16T13:40:34.870
> 
> 标签：c#, asp.net, redirect, page-lifecycle, page-init

如何在使用 ASP.NET 加载页面之前检查变量并重定向到另一个页面？

我知道生命周期，`PageInit()`听起来是对的，但我似乎找不到任何地方可以在 Visual Studio 中放置没有错误的代码。

我不能把它放在`onpageinit=""`我的页面声明的第一行。我想把它放在不同的地方吗？我的页面声明如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="dashboard.aspx.cs" Inherits="dashboard" MasterPageFile="~/Design.master" %> 
```

这是我想在页面加载时运行的代码：

```
 // Check if the user is logged in, if not send them to the login page
    if (session.logged_in == false)
    {
        // Redirect the user to the login page
        Response.Redirect("login.aspx");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:01:02.347

我建议您花时间阅读有关 Asp.Net 成员资格的信息。然后，如果您需要，实现您自己的`MembershipProvider`，以处理与验证用户请求有关的必要管道。

成员抽象非常有用，实现您自己的提供者确实不是那么困难。

也就是说，如果您*真的*想使用 Session 中的值来管理身份验证，您可以尝试将代码放在`Application_PostAcquireRequestState`Global.asax 中的方法中。这样，您的代码将自动（几乎）为您的应用程序的所有请求调用，并且它也是会话可用的第一个可用事件（据我所知）。样本：

```
void Application_PostAcquireRequestState(object sender, EventArgs e)
{
    if (Session["LoggedUserName"] == null && !Request.Path.EndsWith("login.aspx"))
    {
        Response.Redirect("~/your/path/login.aspx");
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:50:08.753

我不知道一个`onpageinit`属性。session 变量独立于页面生命周期。会话始终可用。假设您始终使用相同的母版页，请将您的代码插入到母版页`Pre_Init`后面的代码中。

为此，请将覆盖添加到后面的代码中：

```
 protected override void OnPreInit(EventArgs e)
    {
        if (session.logged_in == false)
        {
          Response.Redirect("login.aspx", false);            
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:11:05.467

您必须覆盖页面的 OnInit 方法。将其放在您的代码后面的 Page_Load 事件上方（顺序无关紧要，但我相信组织很重要）...

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);

    // your code goes here
} 
```

另外，根据您要完成的工作，我建议您查看 FormsAuthentication。有了它，您可以简单地指定安全文件夹和登录页面，如果访问者未通过身份验证，.NET 会处理将访问者踢到登录页面。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-12-18T05:10:37.810

您可以将此代码放在母版页中的任何位置以检查变量并在内容页面加载之前重定向到另一个页面。

```
protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        if (string.IsNullOrEmpty(Convert.ToString(Session["email"])) ||string.IsNullOrEmpty(Convert.ToString(Session["mobile"])))
        {
            Response.Redirect("Login.aspx");
        }
    } 
```

# grails - Grails 漏洞？更新操作忽略拒绝值

> ID：11988458
> 
> 赞同：3
> 
> 时间：2012-08-16T13:40:39.330
> 
> 标签：grails, controller

我在 Grails 控制器中的更新操作有问题。

当我提交更改密码（或其确认）的表单时，我希望对其进行验证，如果没有得到很好的确认，我应该拒绝该表单并警告用户。我正在尝试遵循 Grails 文档说明（http://grails.org/doc/latest/ref/Domain%20Classes/errors.html）。

当我只更改密码或其确认时，一切正常。

但是当我更改表单中的密码时出现问题，即使验证密码的块显然执行得很好，对象（userInstance）仍然会更新。而且，不仅其他数据被持久化，而且是“错误确认”的密码。

我试图在下面的示例代码中插入一些“printlns”来说明会发生什么。我正在使用 Grails 2.0.0 并在 IntelliJ 11.1.3 中进行调试（如果有帮助的话）。

我希望已经足够清楚了。

感谢您的任何回答。

```
def update() {
   ...

   if (params.password != params.confirmPassword) {
      println("This message is correctly printed when passwords differ.")
      userInstance.errors.rejectValue('password',
                                      'defaut.password.diff.message',
                                      'Password confirmation is incorrect!')
      render(view: "edit", model: [userInstance: userInstance])
      return
   }

   println("This message is correctly NOT printed when passwords differ.")
   println("But 'userInstance' object is updated in DB anyways. :( ")

   if (!userInstance.save(flush: true)) {
      render(view: "edit", model: [userInstance: userInstance])
      return
   }

   flash.message = message(code: 'default.updated.message', args: [message(code: 'utilisateur.label', default: 'Utilisateur'), utilisateurInstance.id])
   redirect(action: "show", id: utilisateurInstance.id)
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T13:58:12.960

我认为您`userInstance`的保存是因为成功操作后自动刷新。`userInstance.discard()`如果密码不匹配，请尝试在您的退货声明之前使用。这样你就可以从 Hibernate 中分离这个实例，并且它不会在一个动作之后被保存。

# php - 文件上传方面的 PHP Config 变量定义

> ID：11988462
> 
> 赞同：0
> 
> 时间：2012-08-16T13:40:50.880
> 
> 标签：php, file, cakephp, configuration, upload

我正在使用 cakephp 2.x，为了进行文件上传，我将以下变量设置为我在互联网上找到的自定义值。

```
upload_max_filesize    = 110MB
max_post_size          = 120MB
max_execution_time     = 10800 (seconds)
max_input_time         = 10800 (seconds)
session.gc_maxlifetime = 10800 (seconds) 
```

我需要帮助的是了解是否需要更改所有这些变量以允许上传大小在 30 MB 到 105 MB 之间的文件。

我理解的`upload_max_filesize`，`max_post_size`就是张贴信息的大小，包括文件和任何表格等数据。

其他3个具体是什么意思？执行时间是否包括上传时间？与输入时间相同的问题。最后一个变量 ( ) 究竟做了`session.gc`什么？

请注意，我在互联网上搜索了允许上传大文件所需的更改，并且我做了与网站显示的相同的更改，因此没有评论或质疑我为什么做出这些更改。我只是按照别人上传大文件的做法。如果我能找到该站点，我将使用指向它的链接更新此问题。

请不要只发布变量的定义。我也能在网上找到这些，我发布这个问题的唯一原因是因为我很难理解它们与文件上传的关系。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:54:15.627

所有这些参数都与 php 函数[ini_set()](http://php.net/ini_set)相关。

可以在[PHP 文档附录/php.ini 指令列表中](http://php.net/manual/en/ini.list.php)找到所有配置选项的列表。

**[max_execution_time](http://php.net/manual/en/info.configuration.php#ini.max-execution-time)** *整数*：这设置脚本在被解析器终止之前允许运行的最长时间（以秒为单位）。这有助于防止编写不佳的脚本占用服务器。默认设置为 30。从命令行运行 PHP 时，默认设置为 0。最大执行时间不受系统调用、流操作等影响。有关详细信息，请参阅 set_time_limit() 函数。在安全模式下运行时，您无法使用 ini_set() 更改此设置。唯一的解决方法是关闭安全模式或更改 php.ini 中的时间限制。您的 Web 服务器可以有其他可能会中断 PHP 执行的超时配置。Apache 有一个 Timeout 指令，而 IIS 有一个 CGI 超时功能。两者都默认为 300 秒。有关特定详细信息，请参阅您的 Web 服务器文档。

**[max_input_time](http://php.net/manual/en/info.configuration.php#ini.max-input-time)** *integer*：这设置脚本被允许解析输入数据的最长时间（以秒为单位），如 POST 和 GET。它是从接收服务器上的所有数据到开始执行脚本的那一刻测量的。

**[session.gc_maxlifetime](http://php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)** *integer*： session.gc_maxlifetime 指定数据将被视为“垃圾”并可能被清理的秒数。垃圾收集可能在会话开始期间发生（取决于 session.gc_probability 和 session.gc_divisor）。

# tfsbuild - 是否可以在单个团队项目集合中拥有多个自动化构建？

> ID：11988463
> 
> 赞同：0
> 
> 时间：2012-08-16T13:40:54.747
> 
> 标签：tfsbuild

我有一个团队项目集合。此团队项目集合包含许多 Visual Studio 解决方案。主要解决方案是我们的产品。它建立在我们的构建机器上。

我为自动化 UI 测试创建了一个新的测试项目解决方案。我想自动化这个新解决方案的构建过程，所以我创建了一个新的构建定义来构建项目。我在与我们的主要产品解决方案相同的团队项目集合中创建了它。

我希望这个新的测试项目构建在与主要产品构建相同的构建机器上（因此使用相同的构建控制器）。

我该怎么做呢？

是否可以创建一个新的构建代理并指定我的构建定义使用这个新的构建代理（它有自己的工作目录）？

还是要求不同的构建过程应该在不同的团队项目集合中？

对我来说最好的方法是什么？任何想法或想法都会受到赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:56:50.027

事实证明这是可能的（我设法解决了），是的，我确实需要创建一个新的构建代理。

设置构建过程模板时，在“高级”设置中的“代理设置”下，我可以指定要使用的构建代理（在“名称过滤器”字段中）。

请记住，现有的构建定义可能设置为在所有构建代理上运行——因为默认情况下名称过滤器是“*”——因此它将在所有可用的构建代理上运行。确保更改名称过滤器，以便您的其他构建定义将使用正确的构建代理进行构建。

# sshfs - 使用 sshfs 挂载远程文件系统，无需 root 权限

> ID：11988464
> 
> 赞同：13
> 
> 时间：2012-08-16T13:40:57.930
> 
> 标签：sshfs

我以普通用户的身份使用管理员机器，并希望通过 sshfs 挂载一些远程文件系统。该机器没有安装 sshfs。有没有一种方法可以让我以普通用户的身份安装它并挂载远程文件系统？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T13:44:20.907

如果您有权访问远程计算机上的文件夹，这应该可以通过以下方式进行：

```
sshfs user@remote.com:/foldertomount/ ~/mountpoint 
```

ssh 用户必须拥有“文件夹挂载”权限，而您的本地用户必须拥有“挂载点”权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T09:19:05.897

您可以从任何地方运行 sshfs。只要您具有适当的 fuse 权限和 ssh 访问权限，它就应该可以工作。显然，您必须安装在您的主目录或您通常可以访问的其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-17T12:00:51.407

您不需要安装 sshfs，只需使用二进制版本即可。

为此，例如从[launchpad.net](https://launchpad.net/ubuntu/raring/amd64/sshfs/2.4-1ubuntu1)`.deb`下载软件包 。

然后执行

```
ar x <PathToDebFile> 
```

解压 .deb 文件并将 sshfs-executeble 从生成的`data.tar.gz`存档中复制到计算机。

# c# - 编程调整大小后重新对齐 Listview 中的项目

> ID：11988469
> 
> 赞同：0
> 
> 时间：2012-08-16T13:41:12.203
> 
> 标签：c#, winforms, listview, dynamic, resize

我正在尝试制作一个可以容纳可变数量的字符串并通过以编程方式更改此控件的高度来动态调整其高度的控件。

到目前为止，我已经尝试了 Checked Listbox 和 ListView。

列表框一直显示水平滚动条，即使它已设置为 false。ListView 看起来更有希望，但它拒绝重新排列框中的项目：

```
public partial class Form1 : Form
{
    string[] content = 
        {
            "Lorem",
            "ipsum",
            "dolor",
            "sit",
            "amet",
            "consectetur",
            "adipiscing",
            "elit" ,
            "Integer" ,
            "commodo" ,
        };

    ListView listView1 = new ListView();

    public Form1()
    {
        InitializeComponent();

        listView1.Size = new System.Drawing.Size(300, 22);
        listView1.Font = new Font(FontFamily.GenericMonospace, 10);
        listView1.CheckBoxes = true;
        listView1.View = View.List;
        listView1.Scrollable = false;

        this.Controls.Add(listView1);

        groupBox1.Controls.Add(listView1);

        foreach (string str in content)
        {
            listView1.Items.Add(str.PadRight(12));
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        listView1.Height = 100;
    }
} 
```

如果我将其`listView1.Height = 100;`移至类的构造函数，它将起作用，很明显这就是问题所在。我似乎找不到这个问题的根本原因是什么......我应该调用列表框的一些成员函数来重新放置它的项目吗？

**更新** 在摆弄了更多之后，似乎也可以通过使用设计器将项目添加到列表中来重现该行为，设置所有锚点，捕捉到表单的边缘并在运行时调整表单的大小。然后，再次，项目将不会重新对齐。尽管如此，仍然坚持如何强制重新定位列表视图中的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:07:44.890

直到现在我才意识到我的答案真正在做什么。我基本上使用文本的附加标签重新实现了复选框。对...

**解决方案** 我的解决方案最终归结为流程布局面板中的几个复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:15:54.427

经过更多调查和提供给我的评论后，我放弃了使用标准控件的想法。原因如下：

*   **CheckedListBox**：有一个错误，当控件的大小以编程方式更改时，滚动条会重新出现。
*   **列表模式下的 ListView**：通过表单的构造函数时无法重新对齐图标。
*   **SmallIcon 模式下的 ListView**：有一个错误，将复选框放置在第一列的控件之外。

所以我决定使用这两个来源进行自己的控制：

*   [http://msdn.microsoft.com/en-us/library/a6h7e207%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/a6h7e207%28v=vs.100%29.aspx)
*   [如何在 C# 中向 UserControl 添加事件？](https://stackoverflow.com/questions/3486377/how-to-add-an-event-to-a-usercontrol-in-c)

我给自己做了一个 CheckedLabel：

**设计师**

```
#region Component Designer generated code

/// <summary>
/// Required method for Designer support - do not modify 
/// the contents of this method with the code editor.
/// </summary>
private void InitializeComponent()
{
    this.cbCheckbox = new System.Windows.Forms.CheckBox();
    this.lblDisplay = new System.Windows.Forms.Label();
    this.SuspendLayout();
    // 
    // cbCheckbox
    // 
    this.cbCheckbox.AutoSize = true;
    this.cbCheckbox.Location = new System.Drawing.Point(3, 3);
    this.cbCheckbox.Name = "cbCheckbox";
    this.cbCheckbox.Size = new System.Drawing.Size(15, 14);
    this.cbCheckbox.TabIndex = 0;
    this.cbCheckbox.UseVisualStyleBackColor = true;
    this.cbCheckbox.CheckedChanged += new System.EventHandler(this.cbCheckbox_CheckedChanged);
    // 
    // lblDisplay
    // 
    this.lblDisplay.AutoSize = true;
    this.lblDisplay.Location = new System.Drawing.Point(24, 4);
    this.lblDisplay.Name = "lblDisplay";
    this.lblDisplay.Size = new System.Drawing.Size(35, 13);
    this.lblDisplay.TabIndex = 1;
    this.lblDisplay.Text = "label1";
    // 
    // CheckedLabel
    // 
    this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
    this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
    this.AutoSize = true;
    this.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink;
    this.Controls.Add(this.lblDisplay);
    this.Controls.Add(this.cbCheckbox);
    this.Name = "CheckedLabel";
    this.Size = new System.Drawing.Size(62, 20);
    this.ResumeLayout(false);
    this.PerformLayout();

}

#endregion 
```

**执行**

```
[System.ComponentModel.DefaultEvent("CheckedChanged")]
public partial class CheckedLabel : UserControl
{
    public event EventHandler CheckedChanged;

    public CheckedLabel()
    {
        InitializeComponent();
    }

    public override string Text
    {
        get
        {
            return lblDisplay.Text;
        }

        set
        {
            lblDisplay.Text = value;
        }
    }

    private void cbCheckbox_CheckedChanged(object sender, EventArgs e)
    {
         // Pass the checkbox event as an ultra-shallow copy
        CheckBox b = new CheckBox();
        b.Checked = cbCheckbox.Checked;
        b.Text = lblDisplay.Text;

        CheckedChanged(b, e);
    }        
} 
```

并将这些控件添加到 FlowLayout 面板。这个设置实际上允许我在我认为合适的情况下扩大和缩小容器，同时自动重新对齐 CheckedLabels 以提供最佳拟合。

# javascript - 如何使用 jquery 组合框获得不同的最小长度？

> ID：11988470
> 
> 赞同：0
> 
> 时间：2012-08-16T13:41:12.080
> 
> 标签：javascript, jquery, jquery-ui

我在 html 中有 2 个 html 选择菜单。

我有 jqueryui 使它成为一个组合框。

如何设置一个与插件中设置的默认值不同的最小长度？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T16:37:57.503

您可以使用不同的选择器分别定位它们并`.combobox()`使用不同的`minLength`.

例如，如果您有以下 HTML：

```
<select id="first">
  <!-- options... -->
</select>

<select id="second">
  <!-- options... -->
</select> 
```

您可以执行以下操作：

```
$('#first').combobox();  /* first combo box, default minLength */
$('#second').combobox({ minLength: 4 });  /* second , different minLength */ 
```

您还可以`combobox()`在调用后更改选项。例如：

```
$('select').combobox();  /* convert all select menus to combobox */
$('#second').combobox("option", "minLength", 0); /* diff minLength for #second */ 
```

# python - 限制我的程序通过 SQS 发送过多 SES 电子邮件的速率

> ID：11988477
> 
> 赞同：3
> 
> 时间：2012-08-16T13:41:38.927
> 
> 标签：python, amazon-web-services, amazon-sqs

我想一次发送 10000 封个人邮件；可能来自一个大`for`循环：

```
for user in _10000_users:
    msg  = generate_message( user)
    if(ses.can_send_more_messages == False):
        sleep( 0.1) #to throttle ourselves
    ses.send_message( msg) 
```

但我担心我们 SES 帐户**每秒 70 封邮件的限制**。**所以我希望我的程序通过检查队列**来遵守这个限制，并等待它是否超过了限制，并且只有在它清除时才再次发送。

我在 Python 中使用 boto 与 SQS 交互。而且我希望只有一台机器发送消息，尽管将来多台机器可能会并行发送消息而彼此不知道。

如何通过检查队列或使用特定于 Python 的技术将电子邮件的速率限制为每秒 70 封？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:03:15.653

您可以像下一个代码示例所示那样计算每秒消息数：

```
from time import time

time_started = time()
messages_sent = 0.
MAX_PER_SEC = 70

for user in _10000_users:
    msg = generate_message(user)
    if messages_sent / (time() - time_started) >= MAX_PER_SEC:  # Rate condition
        sleep(0.1)
    ses.send_message(msg)
    messages_sent += 1 
```

# amazon-web-services - Amazon Web Services Marketplace 如何处理应用程序升级？

> ID：11988479
> 
> 赞同：2
> 
> 时间：2012-08-16T13:41:44.347
> 
> 标签：amazon-web-services

如果我在亚马逊网络服务市场上发布了一个应用程序，然后想更新该软件。制作新 AMI 的最佳实践是什么，以及向最终用户提供的说明以使其尽可能轻松？

假设有一个 mysql 数据库，并且一些用户在实例上上传了文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:41:45.647

[According to the Marketplace Help Documentation:](https://aws.amazon.com/marketplace/help/200940380)

> **Updating an AMI**
> 
> ***Publishing a new Version of your AMI***
> 
> If you wish to publish a new version or an upgrade of your software, you should submit the new AMI to the AWS Marketplace Team. When the new version has been published, **AWS Marketplace will notify your existing users that the new AMI is available and provide them with your release notes and upgrade instructions.**

# xcode - 每当 tableview 滚动时，将 UISearchBar 固定在适当的位置

> ID：11988481
> 
> 赞同：1
> 
> 时间：2012-08-16T13:41:50.957
> 
> 标签：xcode, uitableview, uisearchbar

每当我向下滚动 UITableView 时，我都需要将 UISearchBar 固定在适当的位置，我希望它保持固定不变并且不会突然消失。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:25:55.380

我建议将搜索栏与表格视图分离，即在包含搜索栏的自定义视图下启动表格视图的视图。

编辑澄清：而不是将 UISearchBar 与 UITableView 耦合（即：将搜索栏定义为 tableview 标题）创建一个唯一的 UITableView（没有搜索栏）和一个唯一的 UISearchbar。对于相同的逻辑，您有两个视图，而不是一个视图。之前，您有一个 UITableView，它的标题包含一个 UISearchbar。现在你有了一个普通的 UITableView 和一个 UISearchbar。

因此，您要在哪里设置搜索栏取决于您。如果您希望在 tableview 顶部有一个搜索栏，只需在 tableview 上方定义一个视图并将搜索栏添加到此视图。

# jquery - jsFiddle 代码在本地机器上不起作用

> ID：11988482
> 
> 赞同：2
> 
> 时间：2012-08-16T13:41:58.083
> 
> 标签：jquery, jsfiddle

我试图让一个元素在一个`<div>`

谢天谢地，有人找到了可以在[这里找到的解决方案](http://jsfiddle.net/Xw29r/15/)

但是，当我在本地机器或服务器上运行它时，元素不会移动。

这是我的源代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>

<style type="text/css">
div.a {
    width: 50px;
    height:50px;
    background-color:red;
    position:fixed;    
}​
</style>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
$(document).ready(function(){
    animateDiv();

});

function makeNewPosition(){

    // Get viewport dimensions (remove the dimension of the div)
    var h = $(window).height() - 50;
    var w = $(window).width() - 50;

    var nh = Math.floor(Math.random() * h);
    var nw = Math.floor(Math.random() * w);

    return [nh,nw];    

}

function animateDiv(){
    var newq = makeNewPosition();
    var oldq = $('.a').offset();
    var speed = calcSpeed([oldq.top, oldq.left], newq);

    $('.a').animate({ top: newq[0], left: newq[1] }, speed, function(){
      animateDiv();        
    });

};

function calcSpeed(prev, next) {

    var x = Math.abs(prev[1] - next[1]);
    var y = Math.abs(prev[0] - next[0]);

    var greatest = x > y ? x : y;

    var speedModifier = 0.1;

    var speed = Math.ceil(greatest/speedModifier);

    return speed;

}​
</script>
</head>

<body>
    <div class='a'></div>​
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T13:46:47.787

在 Chrome 中打开，我收到一个错误：

```
Uncaught SyntaxError: Unexpected token ? 
```

看起来在 javascript 的大括号之后有一个不可见的字符。用记事本++打开并删除多余的字符。

当您直接从小提琴复制和粘贴时，我已经看到了这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T13:34:40.610

对不起，我的英语不好

我有复制完整源代码的想法

脚步

1.  点击分享按钮

2.  复制2框上的链接分享全屏结果

3.  然后去那个链接（复制链接）。它显示了结果

4.  然后右键单击，单击视图框架源。

现在你的源代码显示

然后放上脚本src和css的确切链接。

现在你的代码工作

# node.js - Windows Azure 上的 nowJS

> ID：11988484
> 
> 赞同：2
> 
> 时间：2012-08-16T13:42:02.860
> 
> 标签：node.js, azure, nowjs-sockets

我成功地用 nodeJS 和 nowJS 制作了一个小型聊天应用程序。它在我的本地机器上完美运行。

现在我想在 Windows Azure 上托管聊天应用程序。我已经有一个 nodeJS 服务器在我的 Windows Azure 帐户上运行，但我不断收到以下错误：

```
[Error: Unable to load shared library C:\DWASFiles\Sites\ben-goevaerts\VirtualDirectory0\site\wwwroot\node_modules\now\node_modules\node-proxy\build\Release\nodeproxy.node] 
```

假设 nowJS 或 socket.io 没有正确安装。（？）我找不到关于 nowJS 和 windows Azure 的任何文档。

谢谢！

完全错误：（以防万一）

```
[Error: Unable to load shared library C:\DWASFiles\Sites\ben-    goevaerts\VirtualDirectory0\site\wwwroot\node_modules\now\node_modules\node-proxy\build\Release\nodeproxy.node]
 Error: Unable to load shared library C:\DWASFiles\Sites\ben-goevaerts\VirtualDirectory0\site\wwwroot\node_modules\now\node_modules\node-proxy\build\Release\nodeproxy.node
at Object..node (module.js:472:11)
at Module.load (module.js:348:31)
at Function._load (module.js:308:12)
at Module.require (module.js:354:17)
at require (module.js:370:17)
at Object.<anonymous> (C:\DWASFiles\Sites\ben-goevaerts\VirtualDirectory0\site\wwwroot\node_modules\now\node_modules\node-proxy\lib\node-proxy.js:1:90)
at Module._compile (module.js:441:26)
at Object..js (module.js:459:10)
at Module.load (module.js:348:31)
at Function._load (module.js:308:12)
 { [Error: listen EACCES] code: 'EACCES', errno: 'EACCES', syscall: 'listen' } 
```

错误：在 EventEmitter._tickCallback (node.js:192:40) 的 Array.0 (net.js:771:26) 的 errnoException (net.js:670:11) 处监听 EACCES GetConsoleTitleW：操作成功完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:18:34.877

我不确定“无法加载共享库”错误是什么意思，但 EACCESS 错误可能意味着您正在侦听不可用的端口。

当您在本地计算机上使用某些自定义端口并且在部署到 Azure 时忘记更改它时，可能会发生这种情况。检查您的代码和配置文件以确定您正在使用哪个端口。

# .net - 没有边框属性的 ASP.NET 表

> ID：11988485
> 
> 赞同：1
> 
> 时间：2012-08-16T13:42:04.450
> 
> 标签：.net, render

我正在动态创建表：

```
Table table = new Table();
table.CssClass="tableclass";
...
pnlPanel.Controls.Add(table); 
```

结果我得到了html代码：

```
<table border="0" ...> 
```

我根本不想拥有边框属性。我不想在我的代码中设置表格样式，我想改用 CssClass。我尝试使用这两种方法：

```
tblCalendar.GridLines = GridLines.None;

tblCalendar.Attributes.Remove("border"); 
```

没有成功 - 我仍然获得边框属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:54:34.897

我会改用 HtmlTable 类。如果您主要要与客户端的表进行交互，则干扰较小。

[http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmltable.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmltable.aspx)

# c# - SQL SERVER CE 子查询异常

> ID：11988493
> 
> 赞同：0
> 
> 时间：2012-08-16T13:42:32.213
> 
> 标签：c#, sql-server-ce

下面是我要执行的子查询，但是 VC# 2010 在我执行它时会生成异常。

询问：

```
("SELECT U.Name 
  FROM Users U,Installments I 
  WHERE U.ID=I.ID 
  AND I.Sr=(SELECT MAX(Sr) FROM Installments Group By ID ) 
  AND I.Date=(SELECT Date FROM Installments GROUP BY ID HAVING(Sr=Max(Sr)))"
 , Con)) 
```

例外：

> 解析查询时出错 [Token line number=1,Token line offset=69 Token in error =SELECT ]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:51:23.213

您的查询不应该是`SELECT U.Name FROM Users AS U,Installments AS I WHERE U.ID=I.ID AND I.Sr=(SELECT MAX(Sr) FROM Installments Group By ID ) AND I.Date=(SELECT Date FROM Installments GROUP BY ID HAVING(Sr=Max(Sr)))`吗？您没有将表指定为 U 和 I，只是将字母放在表名之后。

# java - 如何用 ant -D 键传递的值覆盖属性文件值？

> ID：11988499
> 
> 赞同：0
> 
> 时间：2012-08-16T13:42:42.020
> 
> 标签：java, ant

这是一个属性文件：

```
test.url=https:\\url:port
test.path=/home/folder
test.location=Location
test.version=1 
```

以及以下蚂蚁任务：

我可以为一次任务传递临时值：

```
ant -Dtest.path=new_path test_props 
```

如何用我使用 -D 键传递的值覆盖 test.path 值？为了在同一次启动后，test.path 的值会变为我上面通过的值？

以下变体不起作用：

```
<entry key="test.path" value="${test.path}"/> 
```

或者

```
<propertycopy name="test.path" from="${test_path}"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:54:39.263

如果要永久更改文件，可以使用[task](http://ant.apache.org/manual/Tasks/replace.html)。

我会做以下事情：

创建一个示例属性文件，例如 default.properties.sample。

创建一个接收给定 -D 属性的目标，然后，如果它被告知，则对文件 default.properties.sample 进行替换，并将其保存到 default.properties 文件中。default.properties.sample 将包含以下几行：

```
test.url=https:\\url:port
test.path=@test_path@
test.location=Location
test.version=1 
```

该操作会将@test_path@ 标记替换为属性的实际值，如-D 参数中所述，然后将生成的文件保存为default.properties。就像是：

```
<copy file="default.properties.sample" toFile="default.properties" />
<replace file="default.properties" token="@test_path@" value="${test.path}" /> 
```

需要做一些调整，比如：只有在通知了-D参数的情况下才替换属性，否则每次都会替换文件。

路径等也应根据您的需要进行调整。

* * *

我已经测试了以下场景，它对我有用：

我创建了两个文件：一个 build.xml 和一个 default.properties.sample。它们的内容如下：

构建.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="BuildTest" default="showProperties" basedir=".">
    <property file="default.properties"/>

    <target name="showProperties">
        <echo message="test.property=${test.property}"/>
    </target>

    <target name="replace">
        <fail unless="new.test.property" message="Property new.test.property should be informed via -D parameter"/>
        <copy file="default.properties.sample" toFile="default.properties"/>
        <replace file="default.properties" token="@test_property@" value="${new.test.property}"/>
    </target>
</project> 
```

default.properties.sample：

```
test.property=@test_property@ 
```

他们运行以下测试：

默认运行：

```
C:\Filipe\Projects\BuildTest>ant
Buildfile: C:\Filipe\Projects\BuildTest\build.xml

showProperties:
     [echo] test.property=${test.property}

BUILD SUCCESSFUL
Total time: 0 seconds 
```

错误控制：

```
C:\Filipe\Projects\BuildTest>ant replace
Buildfile: C:\Filipe\Projects\BuildTest\build.xml

replace:

BUILD FAILED
C:\Filipe\Projects\BuildTest\build.xml:10: Property new.test.property should be      informed via -D parameter
Total time: 0 seconds 
```

财产置换：

```
C:\Filipe\Projects\BuildTest>ant replace -Dnew.test.property="This is a New Value"
Buildfile: C:\Filipe\Projects\BuildTest\build.xml

replace:
     [copy] Copying 1 file to C:\Filipe\Projects\BuildTest

BUILD SUCCESSFUL
Total time: 0 seconds 
```

替换后的属性文件：

```
C:\Filipe\Projects\BuildTest>type default.properties
test.property=This is a New Value 
```

并且在随后的运行中出现了 test.property 的新值：

```
C:\Filipe\Projects\BuildTest>ant
Buildfile: C:\Filipe\Projects\BuildTest\build.xml

showProperties:
     [echo] test.property=This is a New Value

BUILD SUCCESSFUL
Total time: 0 seconds 
```

我想这就是你要找的。

# javascript - 正则表达式匹配 and Then Remove 与 Javascript之间的所有内容

> ID：11988504
> 
> 赞同：2
> 
> 时间：2012-08-16T13:42:53.280
> 
> 标签：javascript, jquery, regex

我正在尝试从字符串中删除所有内容。

```
runReportReq.responseText.replace(/\<style>.*?\</style>/, '') 
```

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T13:52:17.673

试试这个：

```
runReportReq.responseText.replace(/<style>.*?<\/style>/g, '') 
```

您可以在此处使用示例代码测试 JavaScript 正则表达式语法的有效性：
[Regex Tester](http://www.gethifi.com/tools/regex)

您可以在此处使用 JavaScript 的示例输入来测试正则表达式本身：
[RegexPal](http://regexpal.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:49:37.870

您没有逃脱正确的角色，请尝试：

```
/<style>.*?<\/style>/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:48:01.560

你需要反向引用...

正则表达式：

```
(\<style\>).+(/\<style\>) 
```

将允许您用反向引用替换`$1$2`

所以，`<style>asdasd</style>`会导致`<style></style>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:45:55.723

replace 返回处理后的字符串，因此您必须将结果存储在任何地方

见[http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

# python - 创建端口转发代理以加速网络

> ID：11988505
> 
> 赞同：2
> 
> 时间：2012-08-16T13:42:53.920
> 
> 标签：python, twisted

我找到了一个名为[Tunnel Splitter](http://coderrr.wordpress.com/2010/01/10/tunnel-splitter-accelerating-a-single-tcp-connection-over-multiple-isps/)的项目，它可以满足我的需求，但它不再可用。

所以我想用python从头开始。但是我对tcp/ip编程不是很熟悉，所以我想从一些简单的动作开始——只需创建一个端口转发代理并使其复用以最大限度地利用带宽，所以似乎Twisted提供的PortForward符合我的要求要求。

但是我找不到任何有关如何进行单个连接多路复用的信息，因此将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:37:20.127

有时间考虑一下，可能 PortForward 不是您想要继续的事情。

如果我要创建这样的东西，我会这样做：

LOAD_BALANCED_APP <-> [LOCAL_SOCKS_SERVER -- (de)multiplexer] <->UDP<-> [(de)multiplexer -- REMOTE_SOCKS_SERVER] <-> SERVICE

您可以从 Twisted 中获取 Socks 实现，将接收和发送逻辑分成两个单独的部分，使用（解）多路复用器作为这两个科学怪人之间的粘合剂。我建议您从（解）多路复用器逻辑开始并首先解决：使用不同数量的连接，在另一端恢复确切的流，处理丢失的连接和丢失的对话序列。当你有了它，工作和通用 - 我正在考虑每个盒子有两对消费者/生产者，为此添加 Socket 服务器或任何其他类似代理的服务应该是轻而易举的事。

# android - 如何通过 Android 应用程序使用 HttpClient 访问 Web 服务？

> ID：11988517
> 
> 赞同：0
> 
> 时间：2012-08-16T13:43:13.950
> 
> 标签：android, web-services, rest, httpclient, webservices-client

我正在开发一些应用程序，我想将它们连接到一个 Restful WebService。为此，我编写了这个类：

```
public class WebServiceClient {
    public void postService() {
        HttpClient client = new DefaultHttpClient();
        String param1 = "ola\n5\nwww.youtube.com\n1000-01-01_00:00:00.0\n1223";
        String url = "http://localhost:8080/pt.Android.Project.WebService/rest/project";
        HttpPost post = new HttpPost(url);
        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
            nameValuePairs.add(new BasicNameValuePair("param1", param1));
            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = client.execute(post);
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent()));
            String line = "";
            while ((line = rd.readLine()) != null) {
                System.out.println(line);
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void getService() {
        try {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet(
                    "http://localhost:8080/pt.Android.Project.WebService/rest/project?id=3");

            HttpResponse response = client.execute(request);

            // Get the response
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent()));

            String line = "";

            while ((line = rd.readLine()) != null) {
                System.out.println(line);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

getService 方法工作正常，但我无法向我的网络服务发布帖子。我的服务接口是：

```
@Path("/project")
public WebService {
    TagAccessController ctrl;

    public ProjectWebService() {
        ctrl = new TagAccessController();
    }

    @GET
    @Produces(MediaType.TEXT_HTML)
    public String getTag(@QueryParam("id") String id) {
//      int id = 1;
        String result = ctrl.getTagContent(id);

        if (result != null) {
            String[] info = result.split("\\|");
            // String [] info = { "funciona","hoje"};

            return "<html> " + "<title>" + "Informação" + "</title>"
                    + "<body><h1>" + info[1] + "</h1>" + "<p>" + info[0]
                    + "</p>" + "<p>" + " Site: " + info[2] + "</p>" + "</body>"
                    + "</html> ";
        } else {
            return "<html> " + "<title>" + "Informação" + "</title>"
                    + "<body><h1>" + "Sem dados a apresentar!" + "</body></h1>"
                    + "</html> ";
        }
    }

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String getTagText(@QueryParam("id") String id) {
        //int id = 1;
        return ctrl.getTagContent(id);
    }

    @POST
    @Path("/create/{param1}")
    @Produces(MediaType.TEXT_PLAIN)
    public void putTag(@PathParam("param1") String param1{

        //System.out.println(param1);
        ctrl.saveTag(param1);
    }
} 
```

问题是当我尝试仅使用测试类发布帖子时，系统会给我以下消息：HTTP Status 405 - Method Not Allowed -------------------- -------------------------------------------------- ---------- 类型 状态报告消息 Method Not Allowed 描述 指定的 HTTP 方法不允许用于请求的资源（Method Not Allowed）。

有人可以帮我吗？

真诚的，丽塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:05:28.907

如果您在模拟器上运行它，请不要使用 localhost：

```
String url = "http://localhost:8080/pt.Android.Project.WebService/rest/project"; 
```

而是尝试：

```
String url = "http://10.0.2.2/pt.Android.Project.WebService/rest/project"; 
```

# matlab - 二维域的惯性矩，边界由点表示

> ID：11988521
> 
> 赞同：1
> 
> 时间：2012-08-16T13:43:29.457
> 
> 标签：matlab

我发现对于 2d 集成，我需要边界的函数句柄。如果我只有边界的点表示，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:46:46.400

将我的评论变成答案。

您可以将点边界视为多边形的点并应用[它](http://en.wikipedia.org/wiki/Second_moment_of_area#Any_cross_section_defined_as_polygon)。请注意，这些点需要按顺时针顺序排列，否则您会得到负值。

# windows-8 - 哪些快捷方式用于在 Windows 8 上部署非 Metro 应用程序？

> ID：11988527
> 
> 赞同：0
> 
> 时间：2012-08-16T13:43:38.677
> 
> 标签：windows-8, shortcut

如果您部署非地铁（旧式）应用程序，您基本上有两种选择：

*   将主可执行文件的快捷方式放在开始菜单中（默认并由 Windows 徽标指南推荐）
*   将主可执行文件的快捷方式放在桌面上（可选）。

Windows 8 RTM 中没有开始菜单。如何为 Windows 8 中的非 Metro 应用程序创建程序快捷方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:19:20.073

对于非应用商店应用程序，如果您为图标指定“开始”菜单，则会将其添加到新的 Windows 8 开始页面。如果您为桌面指定应用程序，它将被添加到桌面。

# iphone - 用谷歌账号登录

> ID：11988528
> 
> 赞同：3
> 
> 时间：2012-08-16T13:43:41.657
> 
> 标签：iphone, google-app-engine, ios5

我想在 iPhone 中使用我的 gmail 帐户登录。我有一个登录屏幕，我在其中使用 Facebook 和 twitter 实现了登录，但对于谷歌我不知道。任何人都可以让我知道我可以从哪里开始实施相同的操作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:50:55.863

请按照[此](http://code.google.com/p/gtm-oauth2/wiki/Introduction#Signing_In_to_Google_Services)文档在您的应用中集成 Google 帐户身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:01:52.100

检查此[gtm-outh2](http://code.google.com/p/gtm-oauth2/) 您可以查看此[示例](http://code.google.com/p/touchengine/)和[ShareKit](http://getsharekit.com/)或仅查看此[https://stackoverflow.com/a/1569324](https://stackoverflow.com/a/1569324)

我希望它对你有帮助。

# email - 阻止 Gmail 为 URL 和电子邮件地址创建链接

> ID：11988534
> 
> 赞同：60
> 
> 时间：2012-08-16T13:43:47.833
> 
> 标签：email, gmail

问题是 Gmail 会自动为所有网站 URL 和电子邮件地址创建超链接。我不想创建链接。

```
var mailClient = new SmtpClient();
var netMail = new MailMessage();

msg = "I do not want www.google.com as a link at recipient end. <br/>";
msg += "I want my email addrress myemail@myudomain.com as html without a link";

var cr = new NetworkCredential("########", "###########");

netMail.From = new MailAddress("########@m####.###", "######");
netMail.To.Add(new MailAddress("abc@xyz.com"));
netMail.Subject = "Test Mail";
netMail.IsBodyHtml = true;
netMail.Body = msg;

mailClient.Host = "xyz.com";
mailClient.Port = 25;
mailClient.EnableSsl = false;
mailClient.Credentials = cr;
mailClient.Send(netMail); 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-31T17:48:23.600

我遇到了同样的问题，并发现您是否使用这样的电子邮件；

```
<a rel="nofollow" style='text-decoration:none; color:#333'>test@mydomain.com</a> 
```

电子邮件提供商不倾向于将电子邮件作为链接。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-11-01T16:20:32.263

我可以通过添加`<a style="color: #000000">link text</a>`（注意没有`href`）来解决这个问题。

除此之外，我还没有尝试过使用属性，`style`但我想你可以。我使用的电子邮件系统（Blackbaud NetCommunity）会去掉一个普通的`<a>`标签，所以我必须至少有一个属性。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-08-16T13:53:02.997

无法停止创建 URL，因为电子邮件提供商会自动检查文本是否为有效 URL。

克服这个问题的唯一方法是欺骗解析器。只需放置空格、HTML 标记等任何解析器无法识别的方式，如 URL 等。

以下是一些代码示例：

```
http:<span>//foolishedsiteparser.com</span>
_http://www.parsersmashed.com
noonesemail<x>@</x>linkdead.com> 
```

结果如下：

> http://foolishedsiteparser.com _http
> ://www.parsersmashed.com
> noonesemail@linkdead.com

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-05-01T07:56:28.500

从[perilbrain 的回答](https://stackoverflow.com/a/11988718/108348)中得到启发，我实现了以下我用于此的正则表达式：

```
var unlink = function (val) {
  return val.replace(/([@\.:])/g, '<span>$1</span>');
}; 
```

请注意，此函数会在传入的任何内容上全局替换——对于 OP 示例中的自然文本块，它可能过于激进，但模板通常是参数化的，当你可以只传递一个 url 或电子邮件时，这很有效（我实际上将它实现为模板辅助函数，以便它完全做到这一点）。

该函数转换以下输入：

```
john.doe@gmail.com
http://johndoe.com 
```

进入这个：

```
john<span>.</span>doe<span>@</span>gmail<span>.</span>com
http<span>:</span>//johndoe<span>.</span>com 
```

请注意，我尝试了一个假短标签，如`<x>`接受的答案中所示，发现 GMail “智能地”用`<u>`标签替换了它，我认为这是一个功能，但不是可取的。在我的测试中，`<span>`标签防止链接没有视觉副作用。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-07-13T22:17:47.500

搞定了！

这不会阻止电子邮件变成链接，但它允许您设置字体颜色并删除该链接的下划线。

它适用于我在 litmus.com 上测试过的所有电子邮件客户端 - 包括 Outlook 2010、2013、2016（也在 Windows 上）、Outlook.com、iPhone 6s、iPad、gmail Web 界面和 Apple Mail 8、9

变体 1：点击时没有反应的链接

```
<a href="#" style="text-decoration:none; color:#000">bjorn@rosell.dk</a> 
```

变体 2：mailto 链接。适用于*几乎*所有客户。Outlook.com 确实将其设置为蓝色并带有下划线。

```
<a href="mailto:bjorn@rosell.dk" style="text-decoration:none; color:#000">bjorn@rosell.dk</a> 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-08-16T02:51:01.560

此处列出的解决方案似乎都不再有效。我对不可打印的 Unicode 字符的想法进行了一些试验，发现这个序列可以工作：

```
<span>foo&zwnj;.&zwnj;bar&zwnj;.&zwnj;com</span> 
```

其中 ‌ 是零宽度非连接字符。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-03-08T10:07:35.480

对于文本电子邮件，我有一个未提及的解决方案：使用类似的 unicode 字符。例如一个点前导 (U+2024) 而不是点。比较一下，Běhej.com 和 Běhej․com 看起来如何（第一个是普通点）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-28T18:58:09.900

我的确认信息标题中有一个 .com。受@perilbrain 的启发，我像这样解决了我的问题

```
domain.com => domain<span>.</span> 
```

php

```
$titre = str_replace(".", "<span>.</span>", $titre); 
```

简单的 ！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-11-20T17:49:06.060

现在简单的包装`<span>`不起作用，我建议用`@`它的 html-entity 替代品替换

```
function disable_email_link($email) {
  //encoder https://mothereff.in/html-entities
  $email = str_replace('@', '&#x40;', $email);
  $email = str_replace('.', '<span>.</span>', $email);
  return $email;
} 
```

此外，如果您的电子邮件包含电话号码，您可以通过以下`disable_tel_link`功能对其进行转义：

```
function wrap_span_letters($string) {
  $res = "";
  $length = strlen($string);
  for ($i = 0; $i < $length; $i++) {
    $res .= "<span>$string[$i]</span>";
  }
  return $res;
}

function disable_tel_link($phone) {
  return wrap_span_letters($phone);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-31T10:49:59.593

尽管这是一个旧线程，但我想帮助可能到达这里的人。我发现在链接中添加跨度会使谷歌看不到它作为链接，见下文：

```
<a href="https://www.link.dk" style="text-decoration: none   !important; color: #878787 !important;">www.<span></span>link.dk</a> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-02T22:18:38.737

我有同样的问题，所以几分钟后发现如何解决它。

问题是，如果您直接定位该元素，它将无法工作，因为 gmail 会自动在其中添加一个“a”标签，因此您必须更进一步并为该“a”标签声明一个类。在我的情况下，电子邮件位于“”标签中，我发现它更容易使用。所以我所做的是创建一个这样的类：

```
.email_contact a {color:#ffffff!important; text-decoration: none!important;} 
```

我的代码中没有“a”标签，但由于 gmail 会自动添加它，所以你应该在那里捕捉它。现在你只需要在你放置电子邮件的地方使用那个类，比如“span”或“div”，然后繁荣！固定的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-12T14:46:27.327

虽然不是理想的解决方案，但它可能是某些人的选择。自 2020 年 3 月 12 日起，如果您禁用 Multipart 并发送`plain text only`电子邮件，您将获得以下超链接结果。无论是在新行/句子的开头还是句子中间，结果似乎都是相同的。

[![通过纯文本链接电子邮件或网址的 gmail 结果](../Images/896a5991a444887edb5feee4830f867e.png)](https://i.stack.imgur.com/32gFe.png)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-10-12T12:13:04.043

假设您的显示网址是“abcdUrl.com”为了防止 gmail 显示为链接，请将其包装在锚标记中

`<a href="" style="text-decoration:none;color:#333;"> abcdUrl.com </a>`

这在 gmail 中运行良好。

# installshield - InstallShield 次要更新 - 删除以前的版本

> ID：11988535
> 
> 赞同：2
> 
> 时间：2012-08-16T13:43:48.600
> 
> 标签：installshield, visual-studio-2012

InstallShield 新手，我已经构建了一个安装项目并使用安装文件来部署我的应用程序。

现在我需要更新应用程序，这是我所做的：

*   增加产品版本（我尝试了主要次要和构建）。

*   生成新的升级代码。

*   构建安装项目。

安装程序拒绝安装应用程序，因为“已安装此产品的另一个版本...”。

如何让 InstallSheild 删除其他版本？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T12:10:37.590

你应该：

*   转到“组织您的设置 -> 升级路径”
*   右键单击升级路径（左侧列出），然后单击“新升级路径”
*   现在您必须选择OLD安装包，您自己指定详细信息（：
*   就在这种情况下，您可以增加项目的版本（两者！在设置的一般信息中，以及在应用程序的配置/发布中）
*   增加后，在一般信息（设置）上创建新的产品代码并构建！（：

希望它可以帮助某人（：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:02:34.830

我得到了答案：应该更改产品代码而不是升级代码，并且程序集的文件版本也必须增加。

# shell - 设备 /dev/ttyusb0 锁定失败：不允许操作

> ID：11988536
> 
> 赞同：9
> 
> 时间：2012-08-16T13:43:50.160
> 
> 标签：shell, terminal, emulation

今天晚上早些时候我正在使用 minicom 玩路由器，我一定没有干净地关闭它。这是我尝试打开 minicom 时收到的错误消息：

```
device /dev/ttyusb0 lock failed: operation not permitted 
```

我有两个问题，1）我将如何摆脱这种状态，以及 2）我如何干净地退出 minicom，以避免再次发生这种情况。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-01T04:05:21.723

我发现我能够通过运行`minicom -S <device> -o`并执行正常的退出键序列（CTRL-a，x）来修复我的 CentOS 机器上的情况。

在你的情况下，它本来是

`sudo minicom -S ttyusb0 -o`

这清除了 minicom 放置在 /var/lock/ 中的锁定文件

祝你好运阿什

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-10-05T13:42:09.197

`gtkterm`我在从远程终端使用时遇到了类似的问题。我在没有明确终止的情况下关闭了终端`gtkterm`。结果是随后的 gtkterm 会话给了我错误：

`Device /dev/ttyUSB0 is locked.`

通过检查进程列表`ps`未显示任何`gtkterm`仍在运行的进程。

我通过简单地删除来纠正这个问题`/run/lock/LCK..ttyUSB0`。之后，gtkterm 就可以成功打开 ttyUSB0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-09T03:21:38.577

1.  [root@edge-tc lock]# minicom'
2.  设备 /dev/ttyUSB0 锁定失败：不允许操作。
3.  解决方案：'
4.  检查已锁定的进程并终止该进程'
5.  [root@edge-tc lock]# fuser /dev/ttyUSB0'
6.  `/dev/ttyUSB0: 18328`
7.  [root@edge-tc lock]# kill -9 18328
8.  [root@edge-tc 锁定]#'
9.  [root@edge-tc 锁定]#'
10.  [root@edge-tc lock]# minicom'
11.  欢迎来到 minicom 2.1'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-05T14:01:54.520

规范的方法是使用[lockdev](https://linux.die.net/man/3/lockdev)。`/run/lock/lockdev/`这在（至少在 CentOS 7.x 下）中按设备管理锁定文件。

`lockdev <device>`可以在没有 root 的情况下使用，如果设备已经被锁定，则返回非零值，在这种情况下可以使用`lockdev -u <device>`.

这些天这显然已经过时了，但`minicom`（至少从版本 2.6.2 开始）仍然使用它。

# qt - 如何使 Qt 中的选项卡看起来像 Google Chrome 中的选项卡？

> ID：11988540
> 
> 赞同：4
> 
> 时间：2012-08-16T13:43:54.590
> 
> 标签：qt, qtstylesheets

我不希望我的标签具有像 Chrome 这样的拖放功能（正如这个问题所涵盖的那样：[Apply chrome like tabs in Qt](https://stackoverflow.com/questions/4700829/apply-chrome-like-tabs-in-qt)）——我只是希望它们看起来像 Chrome 标签。

我目前正在使用`QTabWidget`，但它的内置形状`QTabWidget::Triangular`太丑了。我需要使用什么？样式表或图像或其他东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T10:57:07.130

您可以使用`border-image`. `QTabBar::tab`只需阅读有关如何设置样式的文档即可`border-image`。文档中有一个很好的解释。

我使用上述方法做了类似的事情。

![在此处输入图像描述](../Images/bdd87dba6fdc54f80a54a2f1d6c13e4d.png)

你也可以这样做。要更改关闭按钮，您可以设置`QTabBar::close-button`. 最后的答案是您可以实现您所需要的，只需使用 Qt 样式表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:10:43.480

我不太确定如何使它看起来与 Chrome 完全一样，但您可以尝试使用 *border-top-left-radius、border-top-right-radius、border-bottom-right-radius 和border-bottom-*样式表中*的左半径*

[参考](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html)

# php - 将 div 输出到文本文件

> ID：11988542
> 
> 赞同：0
> 
> 时间：2012-08-16T13:43:57.943
> 
> 标签：php, jquery, ajax, html

我知道我问了一个类似的问题，但这更笼统。有没有办法将 div（具有确定的类）内容保存到文本文件中，在当前目录中，在服务器端，以及不需要用户单击的内容，因为我有 500 多个页面来保存相同的 div，每天。它可以是 php（如果在主页中使用，用于解析其他 html 文件）、jquery、ajax 等等。

页面看起来像这样

```
...
<div class="myClass">
*lots of stuff*
*lots of stuff*
*lots of stuff*
</div>
... 
```

并且每个页面都有不同的名称，例如：475.html，它会将 .myclass div 输出到 475.txt。在这个 div 里面，我还有一些 div，一些，uls，lis 等等。

我不知道ajax，我知道一点PHP，和一些jQuery。但我知道，仅 jscript 不会让您出于安全原因访问文件系统。因此，如果可能的话，请非常清楚，并为我指明方向。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:55:34.397

```
 $fileName = $_SERVER['REQUEST_URI']; // Gets the filename
        $fileName = str_replace('/',"",$fileName); //removes "/" string
        $fileName = str_replace('.html',"",$fileName); //removes ".html" string
        $myFile = "$fileName.txt";
        $fh = fopen($myFile, 'w') or die("can't open file");
        $stringData = '<div class="myClass">............';
        fwrite($fh, $stringData);
        fclose($fh); 
```

is that what you want?

# mysql - 仅当满足 where 条件时才选择最后一行

> ID：11988543
> 
> 赞同：1
> 
> 时间：2012-08-16T13:43:59.643
> 
> 标签：mysql

我有一个消息列，我试图弄清楚我应该如何在“已发送”文件夹中显示消息。

我运行以下查询：

```
 SELECT
    `text`,
    `created`
 FROM
    `messages`
 WHERE
    `status` = 1
 ORDER BY `created` DESC
 LIMIT 1 
```

我想引入一个条件，以便仅当最后一行`status = 1`也有时才返回结果`user_from = $user`（如果最后一行有`user_to = $user`，那么什么都不应该返回）。

我的查询应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:50:43.947

你可以使用一个`subquery`

```
select `text`, `created` from T1
( SELECT
    `text`,
    `created`
 FROM
    `messages`
 WHERE
    `status` = 1
 ORDER BY `created` DESC
 LIMIT 1) T1
where `user_from` = $user and `user_to` != $user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:54:16.377

Select the latest message with status=1 and then use it as a nested query and check your conditions to output this one row result or not:

```
 select `text`, `created`
    from
    (
        SELECT
            `text`,
            `created`,
             user_from,
             user_to
         FROM
            `messages`
         WHERE
            `status` = 1
         ORDER BY `created` DESC
         LIMIT 1
        ) t
        where (user_from = $user) 
              and (not (user_to = $user)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:51:44.790

如果我正确理解您的问题，您是否要这样做：

```
SELECT
    `text`,
    `created`
 FROM
    `messages`
 WHERE
    `status` = 1
    AND `user_from` = $user 
    AND `user_to` != $user
 ORDER BY `created` DESC
 LIMIT 1 
```

当然你需要`$user`用你的字符串替换，或者使用准备好的语句将变量插入到查询中。

# javascript - 如何在html5中同时缩放多个画布？

> ID：11988545
> 
> 赞同：0
> 
> 时间：2012-08-16T13:44:05.540
> 
> 标签：javascript, html

我在一个 html5 项目中工作。我在其中绘制多个形状（例如线条、矩形、圆形等）作为单独的画布。

简而言之，我有一个加载我的文档的画布，当我绘制任何形状时，我正在为该特定绘图制作一个新的画布。但是我在缩放绘图时遇到了问题，因为我们有 HTML5 方法来缩放画布内的绘图。

IE

```
ctx.scale(zoom_value,zoom_Value); 
```

我也想用画布缩放绘图。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:14:20.277

@Shanky：您的问题目前似乎有点不清楚。您能详细说明一下吗？

如果你的意思是问是否可以在`canvas`不重绘内容的情况下缩放自身，那么对不起，你不能。重新调整 a 的大小`canvas`（甚至将其尺寸重置为相同的值将清除`canvas`）。

但是，是的，您可以重绘`canvas`以实现缩放效果。

编辑您的问题以包含更多代码，以便我们能够帮助您！

# javascript - Number(...) 和 parseFloat(...) 有什么区别

> ID：11988547
> 
> 赞同：30
> 
> 时间：2012-08-16T13:44:14.683
> 
> 标签：javascript, string-conversion

[JavaScript 中的 parseInt(string) 和 Number(string) 有什么区别，](https://stackoverflow.com/q/4564158/561731)之前有人问过。

但答案基本上集中在将`radix`字符串`parseInt`转换`"123htg"`为`123`.

我在这里要问的是，当你传递一个完全没有基数的**实际数字字符串**`Number(...)`时，它的返回值和返回值之间是否有很大差异。`parseFloat(...)`

 *** * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-16T13:55:09.263

正如@James Allardic 已经回答的那样，内部运作并没有那么不同。不过还是有区别的。使用`parseFloat`，以一个或多个数字字符后跟字母数字字符开头的（修剪后的）字符串可以转换为数字，`Number`但不会成功。如：

```
parseFloat('3.23abc'); //=> 3.23
Number('3.23abc'); //=> NaN 
```

顺便说一句，在这两种转换中，输入字符串都会被修剪：

```
parseFloat('  3.23abc '); //=> 3.23
Number('   3.23 '); //=> 3.23 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-16T13:48:06.253

不会。两者都会导致[`ToNumber(string)`](http://es5.github.com/#x9.3.1)调用内部函数。

从[ES5 第 15.7.1 节](http://es5.github.com/#x15.7.1)（作为函数调用的数字构造函数）：

> 当`Number`作为函数而不是构造函数调用时，它会执行类型转换......
> 
> 如果提供了 value，则返回一个 Number 值（不是 Number 对象）`ToNumber(value)`，否则返回`+0`。

从[ES5 第 15.1.2.3 节](http://es5.github.com/#x15.1.2.3)（parseFloat（字符串））：

> ... 如果既没有`trimmedString`也没有任何前缀`trimmedString`满足 a 的语法`StrDecimalLiteral`（见 9.3.1）......

[9.3.1](http://es5.github.com/#x9.3.1)是标题为“ ToNumber 应用于字符串类型”的部分，这就是第一个引号所指的内容`ToNumber(value)`。

* * *

*更新*（见评论）

通过使用运算符调用`Number`构造函数`new`，您将获得`Number`对象的实例，而不是数字文字。例如：

```
typeof new Number(10); //object
typeof Number(10); //number 
```

这在[第 15.7.2 节](http://es5.github.com/#x15.7.2)（数字构造函数）中定义：

> 当`Number`作为`new`表达式的一部分被调用时，它是一个构造函数：它初始化新创建的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:52:56.033

只要您确定字符串中只有数字，就没有太大的区别。如果有，`Number`将返回`NaN`。
使用构造函数可能会遇到的另一个问题`Number`是，同事可能会认为您忘记了`new`关键字，并在稍后添加它，导致严格比较失败`new Number(123) === 123`--> false 而`Number(123) === 123`--> true。

一般来说，我更喜欢保留`Number`构造函数的本来面目，只使用最短的语法来*强制转换*为 int/float:`+numString`或 use `parse*`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T13:51:17.753

当不`new`用于为数值创建包装对象时，`Number`它被降级为简单地进行从字符串到数字的类型转换。

另一方面，正如您提到的，“parseFloat”可以从任何以数字、小数或 +/- 开头的字符串解析浮点数

因此，如果您只使用仅包含数值的字符串，`Number(x)`并且`parseFloat(x)`将产生相同的值

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-03-24T19:27:08.500

请原谅我发布另一个答案，但我只是通过谷歌搜索来到这里，并没有找到我想要的所有细节。在 Node.js 中运行以下代码：

```
var vals = ["1", "1.1", "0", "1.1abc", "", " ", null];
for(var i = 0; i < vals.length; i++){
  var ifTest = false;
  if(vals[i])
  {
    ifTest = true;
  }
  console.log("val=" + vals[i] + ", Number()=" + Number(vals[i])+ ", parseFloat()=" + parseFloat(vals[i]) + ", if()=" + ifTest);
} 
```

给出以下输出：

```
val=1, Number()=1, parseFloat()=1, if()=true
val=1.1, Number()=1.1, parseFloat()=1.1, if()=true
val=0, Number()=0, parseFloat()=0, if()=true
val=1.1abc, Number()=NaN, parseFloat()=1.1, if()=true
val=, Number()=0, parseFloat()=NaN, if()=false
val= , Number()=0, parseFloat()=NaN, if()=true
val=null, Number()=0, parseFloat()=NaN, if()=false 
```

一些值得注意的要点：

1.  如果在尝试转换为数字之前使用 if(val) 进行保护，则 parseFloat() 将返回一个数字，除了空白情况。
2.  Number 在所有情况下都返回一个数字，除了空格以外的非数字字符。

请随时添加我可能缺少的任何测试用例。**

# mysql - CakePHP 2.0 内连接和创建视图

> ID：11988552
> 
> 赞同：-1
> 
> 时间：2012-08-16T13:44:23.367
> 
> 标签：mysql, cakephp, cakephp-2.0

我是 Cakephp 2.0 的新手，但我想使用 Inner Join 查看两个表。我有以下表格：

**具有记录的 hpsas：id、ciname、位置、状态**

**带有记录的 ldaps：id、ciname、status**

我将在 MySQL 中执行的查询是：

```
SELECT * FROM hpsas INNER JOIN ldaps ON hpsas.ciname = ldaps.ciname; 
```

无论是模型、控制器还是视图，我都必须使用哪种语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:59:04.637

```
$options['joins'] = array(
    array('table' => 'ldaps',
        'type' => 'inner',
        'conditions' => array(
            'hpsas.ciname = ldaps.ciname',
        )
    )
);

$this->Hpsa->find('all', $options); 
```

有关更多详细信息，请参阅有关关联的蛋糕书部分：http: [//book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:54:37.330

遵循 activeRecord 模型，我认为您应该在模型中定义一个关系，以避免每次需要来自该模型的记录时都运行复杂的查询。您将需要遵守蛋糕的惯例，这意味着您将拥有 3 个模型（很可能）

```
class cinema extends AppModel{

    hasMany = array(hpsas,idaps);
}
class hpsas extends AppModel{

     belongsTo = array(cinema)
}
class idap extends AppModel{
 belongsTo = array(cinema)
} 
```

将递归设置在 2 或 3 以上，对任一模型的简单查询将为您提供所需的所有数据（蛋糕魔术）。

# arrays - （OpenLayers）将线串数据传输到数组时为空值

> ID：11988555
> 
> 赞同：0
> 
> 时间：2012-08-16T13:44:40.470
> 
> 标签：arrays, openlayers

我是 OpenLayers 的新手，我有一个非常基本的问题，如果你能帮助我，我将不胜感激。

我想用不同的方法画一条线。（不适用于 OpenLayers.Control）。

这是我的一段代码：（我将坐标作为函数参数）

```
 var openlayersCoordinates = [];
        coordinates.forEach(function (c) {
            openlayersCoordinates.push(new OpenLayers.Lonlat(c.y, c.x));
        });

        var polyPoint = new OpenLayers.Geometry.LineString(openlayersCoordinates);
        var feature = new OpenLayers.Feature.Vector(polyPoint, null, {
            strokeColor: color,
            fillColor: color,
            strokeWidth: 5
        }); 
```

在 Chrome 调试器中，polyPoint 数组返回为“未定义”（空）。所以我错在哪里？谢谢考虑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:27:35.917

`OpenLayers.Geometry.LineString`的构造函数需要`OpenLayers.Geometry.Point`对象数组，而不是`OpenLayers.LonLat`

所以，尝试改变

```
openlayersCoordinates.push(new OpenLayers.Lonlat(c.y, c.x)); 
```

至

```
openlayersCoordinates.push(new OpenLayers.Geometry.Point(c.x, c.y)); 
```

# css - beaneditform挂毯css样式

> ID：11988558
> 
> 赞同：0
> 
> 时间：2012-08-16T13:44:52.070
> 
> 标签：css, jsp, tapestry

我想更改 beaneditform 的标准 css 样式，但在 eclipse 或我的本地计算机上找不到文件（default.css）？！

有任何想法吗？

![默认.css](../Images/cf58cc2ca93193f6c75083aaf6496fbb.png)

这个文件夹资产在我的工作区中不存在，这个文件 default.css 在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:38:35.223

该文件位于`org.apache.tapestry5`包中的 Tapestry Core JAR 中。不要编辑它，而只需使用您自己的 CSS 和至少同样特定的 CSS 选择器覆盖值。

[这在文档的 CSS/Default Stylesheet 部分](http://tapestry.apache.org/css.html#CSS-Defaultstylesheet)也有很好的解释。

# jquery - 如何使用 jQuery 在其中添加 div 和多个图像

> ID：11988563
> 
> 赞同：0
> 
> 时间：2012-08-16T13:45:13.413
> 
> 标签：jquery, html

我想在页面中添加一个 div，然后使用 jQuery 向它添加多个图像，我在[这里](http://api.jquery.com/jQuery/#jQuery2)找到了一些方法并尝试实现它，但图像没有出现，尽管 div 被插入到正文中。

我正在尝试这样做。

```
 $(window).load(function(){

        $("<div/>", {
          "id": "image",
          "css": { "display" : "block"},
        }).appendTo("body");

        $("<img src='_ls-global/layout-images/layout.png'/>").appendTo("#image");
        $("<img src='_ls-global/layout-images/layout2.png'/>").appendTo("#image");

        }); 
```

请查看执行此操作的最佳方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:54:26.720

```
$("<div/>", {
  "id": "image",
  "css": {"display" : "block"},
  html: $("<img src='_ls-global/layout-images/layout.png'/>
           <img src='_ls-global/layout-images/layout2.png'/>")
}).appendTo("body"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:00:33.203

您是否尝试过以下方法：

```
$('#image').prepend('<img src='_ls-global/layout-images/layout.png'/>') 
```

或者

```
$('<img />')
    .attr('src', '_ls-global/layout-images/layout.png')
    .appendTo('#image')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:15:48.423

尝试执行以下操作（并确保您的图像路径正确）：

```
$(document).ready(function(){
var imageContainer = $('<div id="imageDiv"></div>');
var image1 = $('<img src="_ls-global/layout-images/layout.png" style="display:block"/>');
var image2 = $('<img src="_ls-global/layout-images/layout2.png" style="display:block"/>');
imageContainer.append(image1);
imageContainer.append(image2);
$('body').append(imageContainer);
}); 
```

# css - 如何更改悬停/突出显示的项目的背景颜色 ?

> ID：11988565
> 
> 赞同：1
> 
> 时间：2012-08-16T13:45:18.177
> 
> 标签：css, jsf, jsf-2, primefaces

如何更改悬停/突出显示的项目的背景颜色`<p:selectOneMenu>`？

我尝试了以下 CSS 选择器，但它们没有任何效果。

```
.ui-selectonemenu-items :hover{
    background-color: #a9c6c9;
}
.ui-selectonemenu-label:hover {
    background-color: #a9c6c9;
} 
```

这是JSF代码：

```
<p:selectOneMenu>
    <f:selectItem itemLabel="by id" itemValue="1" />
    <f:selectItem itemLabel="by owner" itemValue="2" />
</p:selectOneMenu> 
```

HTML 输出：

```
<ul class="ui-selectonemenu-items ui-selectonemenu-list ui-widget-content ui-widget ui-corner-all ui-helper-reset" style="">
     <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">Select Net</li>
     <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all ui-state-highlight">TEST</li>
     <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">TEST1</li>
     <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">TEST2</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:15:37.630

根据 Chrome 开发工具（按 F12），它`.ui-state-highlight`是负责`.ui-selectonemenu-item`元素背景外观的类。

![在此处输入图像描述](../Images/47f7b70707712e2062a8a4132050ca54.png)

因此，您需要改写该类。

```
.ui-selectonemenu-item.ui-state-highlight {
    background-color: #a9c6c9;
} 
```

顺便说一句，Firefox (Firebug) 和 IE9 具有相同的工具。右键单击 HTML 表示中的元素并选择*Inspect Element*，或者只需按 F12 即可查看它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:11:50.857

试试这个：

```
.ui-selectonemenu-item.ui-selectonemenu-list-item.ui-state-highlight {
    background: #a9c6c9;
} 
```

# visual-studio-2010 - Visual Studio 2010 的错误 C1017

> ID：11988567
> 
> 赞同：1
> 
> 时间：2012-08-16T13:45:23.993
> 
> 标签：visual-studio-2010, visual-c++

我按照以下链接中的步骤在 Visual Studio 2010 上构建 VTK：http: [//homepage.cs.uiowa.edu/~cwyman/classes/common/howto/winVTK.html](http://homepage.cs.uiowa.edu/~cwyman/classes/common/howto/winVTK.html)

但我收到数百次“错误 C1017：无效的整数常量表达式”和一个 MSB6006。

示例错误：

```
#if VTK_SIZEOF_FLOAT == 4 typedef float vtkTypeFloat32; 
# define VTK_TYPE_FLOAT32 VTK_FLOAT 
#else 
# error "No native data type can represent a 32-bit floating point value." 
#endif 
```

解决办法是什么？

# android - 调用 rawquery() 时出现 NullPointerException

> ID：11988569
> 
> 赞同：0
> 
> 时间：2012-08-16T13:45:35.413
> 
> 标签：android, sqlite, nullpointerexception

我正在执行以下代码：

```
String sql = "Select * from NetOrderID where (flag='0')";
Cursor mCur = mDb.rawQuery(sql, null) ; 
```

日志猫：

```
08-16 19:09:54.868: W/System.err(10911): java.lang.NullPointerException 
```

我不明白为什么即使此查询在实际数据库上成功执行，我也会收到此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:54:55.493

`mDb` in the below section could possibly be `null`.

```
Cursor mCur = mDb.rawQuery(sql, null); 
```

Make sure you are instantiating or getting an object for `mDb` before trying to use it.

Try something like the following:

```
if (mDb != null) {
    Cursor mCur = mDb.rawQuery(sql, null);
} else {
    /* handle the null scenario, instantiate an object or try and get one */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:54:12.900

do you initialised mDb like this...?

```
mDb =  openOrCreateDatabase("DataBase.db", SQLiteDatabase.CREATE_IF_NECESSARY, null); 
```

# javascript - 具有特定类的所有下拉列表上的 jQuery 触发事件

> ID：11988570
> 
> 赞同：0
> 
> 时间：2012-08-16T13:45:35.570
> 
> 标签：javascript, jquery, html

我在一个 html 页面上有很多下拉列表，我想在它们发生变化时触发事件（最终它将通过 ajax 更新所有带有内容的下拉列表） - 但现在我只是想让它警觉出我选择的数据元素。我不希望它在页面上的每个下拉菜单上触发，只是那些具有相应 css 类的下拉菜单。即group1 group2。这些团体也必须是动态的，因为我不知道可能有多少。

[http://jsfiddle.net/6BakA/](http://jsfiddle.net/6BakA/)

上面有一个 js 摆弄它目前的情况。我希望它只会在您更改前 4 个下拉菜单中的一个时发出 4 次警报，而在您更改第二个下拉菜单时只会发出 2 次警报。但显然我做错了什么！

我的html是：

```
<select id="test1" class="group1" data-type="Select Box 1">
          <option value="volvo">Volvo</option>
          <option value="saab">Saab</option>
          <option value="mercedes">Mercedes</option>
          <option value="audi">Audi</option>
        </select> 

        <select id="test1" class="group1" data-type="Select Box 2">
          <option value="volvo">Volvo</option>
          <option value="saab">Saab</option>
          <option value="mercedes">Mercedes</option>
          <option value="audi">Audi</option>
        </select> 

        <select id="test1" class="group1" data-type="Select Box 3">
          <option value="volvo">Volvo</option>
          <option value="saab">Saab</option>
          <option value="mercedes">Mercedes</option>
          <option value="audi">Audi</option>
        </select> 

            <select id="test1" class="group1" data-type="Select Box 4">
          <option value="volvo">Volvo</option>
          <option value="saab">Saab</option>
          <option value="mercedes">Mercedes</option>
          <option value="audi">Audi</option>
        </select> 

        <select id="test1" class="group2" data-type="Select Box 5">
          <option value="volvo">Volvo</option>
          <option value="saab">Saab</option>
          <option value="mercedes">Mercedes</option>
          <option value="audi">Audi</option>
        </select> 

        <select id="test1" class="group2" data-type="Select Box 6">
          <option value="volvo">Volvo</option>
          <option value="saab">Saab</option>
          <option value="mercedes">Mercedes</option>
          <option value="audi">Audi</option>
        </select> 
```

我的 JS 是：

```
$(document).ready(function() {

        $('select').change(function() {

            $('.group1').each(function() {
               alert($(this).data('type'));
            });

            $('.group2').each(function() {
               alert($(this).data('type'));
            });

        });    

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:57:22.600

你可以这样做

```
$(document).ready(function() {
   $('select').change(function() { // <-- bind events to all selects    
        $('.'+$(this).attr('class')).each(function(){  // <-- iterate through each element that has same class
// you don't need to know the class - just use the current element's class that triggered the event
            alert($(this).data('type')); 
            // do what you need to here
        });
    });
});​ 
```

[http://jsfiddle.net/wirey00/6BakA/4/](http://jsfiddle.net/wirey00/6BakA/4/)

或者甚至更好，因为你不知道会有多少选择，委托事件会更有效，因为父元素将监听和处理事件。您可以用加载 dom 时可用`body`的框的任何父元素替换`select`

```
$('body').on('change','select',function(){ 
        $('.'+$(this).attr('class')).each(function(){  
            alert($(this).data('type')); 
            // do what you need to here
        });
}); 
```

[http://jsfiddle.net/wirey00/6BakA/5/](http://jsfiddle.net/wirey00/6BakA/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:49:11.717

你应该这样做：

```
$(document).ready(function() {

        $('select.group1').change(function() {

            $('.group1').each(function() {
               alert($(this).data('type'));
            });
});

$('select.group2').change(function() {

            $('.group2').each(function() {
               alert($(this).data('type'));
            });

        });    

    }); 
```

# c# - MSMQ 接收和删除

> ID：11988572
> 
> 赞同：4
> 
> 时间：2012-08-16T13:45:38.910
> 
> 标签：c#, .net, xml, msmq

是否有任何选项可以在读取消息后从 MSMQ 中删除消息？

像，接收+删除可以作为原子操作运行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T13:54:26.830

It sounds like you want to peek at the next message and then receive it after you're finished processing.

```
Message message = Queue.Peek();
Queue.ReceiveById(message.Id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:52:50.867

Are you referring to the difference between Receive and [Peek](http://msdn.microsoft.com/en-us/library/windows/desktop/ms704311%28v=vs.85%29.aspx) in MSMQ?

IMO the simplest mechanism to ensure atomic operations is to place the queue operations within a TransactionScope. This can be done with WCF [like so.](http://msdn.microsoft.com/en-us/library/ms789032.aspx)

[http://msdn.microsoft.com/en-us/library/ms789032.aspx](http://msdn.microsoft.com/en-us/library/ms789032.aspx)

# valueinjecter - 将 LinqToEntities 映射到 ViewModel

> ID：11988573
> 
> 赞同：0
> 
> 时间：2012-08-16T13:45:38.940
> 
> 标签：valueinjecter

我有以下模型和视图模型（为简洁而编辑）：

```
 Order Model:
            OrderId
            ShippingAddressId 
            .....
    Address Model:
            AddressId
            .....
    OrderViewModel:
            Some Property from Order Model and Address Model 
```

如何内部连接两个表并映射到视图模型？

```
 var query= from o in ctx.Orders
        join addr in ctx.Addresses
        on o.ShippingAddressId equals addr.AddressId
        select new OrderViewModel.InjectFrom(o)
                              .InjectFrom(addr)
                              as OrderViewModel; 
```

此代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:58:06.057

您需要首先通过以下方式实现结果`ToList`：

```
var query = (from o in ctx.Orders
             join addr in ctx.Addresses
             on o.ShippingAddressId equals addr.AddressId
             select new { o, addr }
            ).ToList()
             .Select(x => new OrderViewModel().InjectFrom(x.o)
                                              .InjectFrom(x.addr)
                          as OrderViewModel); 
```

# ruby - Monkey Patch Rails 核心问题

> ID：11988576
> 
> 赞同：1
> 
> 时间：2012-08-16T13:45:46.460
> 
> 标签：ruby, ruby-on-rails-3, activemodel, monkeypatching

ActiveModel 的 SecurePassword 模型只做 bcrypt，我遇到了死胡同。（我需要使用不同但同样安全的哈希存储密码，以便导出和使用 Dovecot IMAP 身份验证的哈希密码。）

这对每个人来说可能都是一个有用的功能，所以我最终会把它做成一个补丁。但现在，我想给 SecurePassword 模块打补丁。但是，我不确定如何以这种方式解决这个问题，以确保在将问题包含在其他任何地方之前对其进行修补。

感谢您的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:09:38.247

根据我的经验（至少使用 Rails 3.2，不能说早期版本，因为我上次使用 Rails 是在 2.x 天），最简单的入门方法是将代码保存到文件中，`secure_password.rb`例如`config/initializers`.

在`config/initializers/secure_password.rb`中，您几乎可以侥幸逃脱，但在您的情况下，您可能想去：

```
module ActiveModel
  module SecurePassword
    module InstanceMethodsOnActivation
      def authenticate(unencrypted_password)
        # Replace calls to BCrypt here
      end

      def password=(unencrypted_password)
        # and here
      end
    end
  end
end 
```

有关 Rails 初始化和配置的更多信息，请参阅[http://guides.rubyonrails.org/configuring.html](http://guides.rubyonrails.org/configuring.html)。

（未经测试，但我已经`ActiveRecord::Timestamp`像那样打了猴子补丁，这一切都可以正常工作。）

# asp.net - 如何在远程服务器上设置 asp.net Web 应用程序

> ID：11988577
> 
> 赞同：2
> 
> 时间：2012-08-16T13:45:45.540
> 
> 标签：asp.net, asp.net-mvc-3, iis, web-applications, razor

更新：这是服务器上的说明。但是按照此说明，我找不到“连接到站点”选项

![在此处输入图像描述](../Images/7cd59b3fc5168c89c347fa787d1d5df5.png)

* * *

我是 ASP.NET MVC 4 和 Razor 的新手。现在我已经完成了我的 ASP.NET Web 应用程序，我想将它上传到服务器并使其可供公众访问。

以前，我只创建网站并直接使用 FX FTP将它们上传到 WebCentral ( [http://www.webcentral.com.au/ )，这些网站将立即可以访问。](http://www.webcentral.com.au/)

我已检查 WebCentral 服务器是否具有 .NET Framework 4.0 版本。

现在我想探索 MVC4 和 Razor 以及实体框架的新进展，我选择了 ASP.NET MVC 4 Web 应用程序。在我将这个新的 Web 应用程序上传到服务器后，它显示一个错误：

```
Server Error in '/' Application.

Configuration Error

Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.

Source Error: 

Line 22:   <system.web>
Line 23:     <compilation debug="true" targetFramework="4.0" />
Line 24:     <authentication mode="Forms">
Line 25:       <forms loginUrl="~/Account/Login" timeout="2880" />
Line 26:     </authentication>

Source File: \\n5200-2\iis7_www\z\a\zanity.com.au\www\ce\web.config    Line: 24 
```

我不知道该如何解决这个错误。如果您知道如何解决此问题，请帮助我。

非常感谢你。

这是 Web.configure 文件

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-MVCTry-20120813175505;Integrated Security=SSPI" />
  </connectionStrings>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:36:18.287

更新：我最近发现 WebCentral Mission Control 面板上有一个选项在 IIS 管理概述下： 1\. 选择 Web 应用程序文件夹 2\. 选择右侧面板上的设置 3\. 单击安装应用程序部分下的安装，将应用程序安装到所选文件夹。

## 这样，选中的文件夹就会变成一个Web Application文件夹，然后我可以把bin和App_Code和App_Data文件夹放到Web Application文件夹下。

我终于弄明白了。

原因是我没有把 bin 和 App_Code 文件夹放在正确的方向。在 WebCentral Web 服务器上，Web.config 文件和 App_Code 文件夹应该放在当前项目文件夹下，而 bin 文件夹应该放在 /wwwroot 文件夹下。

我将所有依赖项复制到 bin 文件夹中。

这解决了所有问题。

我很高兴知道我可以在此 Web 服务器上运行最新版本的 ASP.NET MVC 4 以及 Razor，只要 bin 文件夹中提供了 nedded DLL。

干杯:)

# jquery - 带有多个触发器的jquery切换

> ID：11988582
> 
> 赞同：0
> 
> 时间：2012-08-16T13:46:01.267
> 
> 标签：jquery, toggle

我有一个 jquery 切换，我需要用 3 个单独的触发器来触发。我发现了这个： [jQuery toggle single div with two different triggers](https://stackoverflow.com/questions/11570094/jquery-toggle-single-div-with-two-different-triggers)

...但我需要切换到特定高度的动画。这是我当前的代码：

```
<script type='text/javascript'>
$(function(){
$(".nav-toggle").toggle(function(){
    $("#main-nav-dropdown").animate({height:146},500);
},function(){
    $("#main-nav-dropdown").animate({height:20},500);
});
});
</script> 
```

和html

```
<div id="main-nav-dropdown">
    <div class="capsule">

            <nav id="main-nav">
            <ul>

                <li><span class="nav-toggle">1</span>
                </li>
                <li><span class="nav-toggle">2</span>           
                </li>
                <li><span class="nav-toggle">3</span>               
                </li>

                <li class="last"><a href="">4</a></li>
            </ul>
        </nav>

    </div>
</div> 
```

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:10:29.830

我不知道你为什么想做你想做的事......所以我不会问，相反，我会交付。

```
$(".nav-toggle").toggle(function(){
  var pI = $(this).parent().parent().find($(this).parent()).index(),
      toggleHeight;

  switch(pI){
    case 0:
        toggleHeight = "146"
        break;    
    case 1:
        toggleHeight = "380"
        break;  
    case 2:
        toggleHeight = "550"
        break;        

    case 'default' :
        toggleHeight = "146"
        //fallback solution if for some reason we can't get the index.
        break;       
  }

  $("#main-nav-dropdown").animate({height:toggleHeight},500); 

},function(){
    $("#main-nav-dropdown").animate({height:20},500);
}); 
```

基本上，`var pI`检查跨度的父 LI 的索引。如果它是 0，那么我们设置`togglHeight`为 146，如果它是 1 *（或列表中的第 2 个 li），*那么我们将它设置为 380，等等。只是使用一个简单的女巫语句比较不雅。

# c# - quartz.net 是否支持时间窗口？

> ID：11988585
> 
> 赞同：0
> 
> 时间：2012-08-16T13:46:06.163
> 
> 标签：c#, scheduling, quartz.net

我有一个 Quartz.net 服务，它应该每天运行一次，每 10 分钟一次，只在早上 6 点到 9 点之间运行。我在 Quartz 中找不到任何专门支持时间窗口的东西，但我可能误读了它，或者它可能被错误地记录在案。

Quartz 有没有办法创建一个只在指定时间之间触发的触发器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:31:38.123

在四处挖掘时，我发现了 Quartz.Impl.Calendar 命名空间，除了没有很好的文档记录之外，它还包括正是这样做的 DailyCalendar。

# windows-phone-7 - 2 Popup 实例在返回后显示在 MainPage.xaml 中

> ID：11988589
> 
> 赞同：0
> 
> 时间：2012-08-16T13:46:27.910
> 
> 标签：windows-phone-7

我在 Mainpage.xaml 中有一个弹出窗口，单击按钮弹出窗口，但如果我导航到其他页面并返回 mainpage.xaml 并单击同一按钮，则会看到 2 个弹出窗口实例，UI 略有变化。如果任何解决方案

```
<Popup IsOpen="{Binding IsVisible, Mode=TwoWay}" x:Name="AddPu">
            <Popup.Child>
                <uc:AddPopup x:Name="ucAdd"></uc:AddPopup>
            </Popup.Child>
        </Popup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:07:05.453

在您的 MainPage 构造函数中有这样一行：

```
button.Click += ShowPopUpMethod; 
```

当您从主法师导航时运行以下代码：

```
button.Click -= ShowPopUpMethod; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:10:10.123

好吧，我自己想出来了：）

```
 <Popup IsOpen="{Binding IsVisible, Mode=TwoWay}" x:Name="AddPu">
            <Popup.Child>
                <uc:AddPopup x:Name="ucAdd"></uc:AddPopup>
            </Popup.Child>
        </Popup> 
```

需要使 IsOpen = 始终为真，并且在导航到其他页面之前使用户控件折叠下面给出的..

```
<Popup IsOpen="True" x:Name="AddPu">--------------Always true here
            <Popup.Child>
                <uc:AddPopup visibility={binding whateverData} x:Name="ucAdd"></uc:AddPopup>
            </Popup.Child>
        </Popup> 
```

# jquery - 存储 ajax 请求以供在 jQuery 中进一步使用

> ID：11988591
> 
> 赞同：0
> 
> 时间：2012-08-16T13:46:32.980
> 
> 标签：jquery, ajax

这是我的场景。

1.  我在登录前发送了一个请求，服务器告诉我登录。
2.  我希望在我登录后自动发送登录前的请求。

那么如何存储请求并在登录后再次触发呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:49:40.170

也许是这样的？

```
var request = {
    url : 'somehandler.php',
    data : parameters,
    success: function(){
        // handler for success
    },
    error : function(){
        // handler for error
    }
}; 
```

然后将请求选项存储在变量 request 中，以后可以像这样重复使用：

```
$.ajax(request); 
```

# cocos2d-iphone - EXC_??? (11) (代码=0, 子代码=0x0

> ID：11988594
> 
> 赞同：7
> 
> 时间：2012-08-16T13:46:39.847
> 
> 标签：cocos2d-iphone

我是这里的新手和 iphone 应用程序开发人员。有时我在通过模拟器运行我的应用程序时看到此错误和应用程序崩溃。使用 xcode 4.4.1、Mountain Lion、iOS 5.1。

我猜这是与运行时间相关的错误，因为它在运行应用程序几秒（超过 30 秒）后发生。我该如何检测和解决这个问题？

感谢您的关注。

嗯..我无法上传我的捕获图像

线程 1

0 0x0eae45e6

7 glDrawElements

8 -[CCTextureAtlas drawNumberOfQuads..

9 -[CCTextureAtlas drawQuads]

10 -[CCSpriteBatchNode 绘制]

11 -[CCTMX图层抽奖]

12 -【CCSpriteBatchNode访问】

13 -【CCNode访问】

14 -【CCNode访问】

15 -【CCNode访问】

16 - [CCDirectorIOS drawScene]

17 -[CCDirectorDisplayLink 主循环：]

18 CA::Display::DisplayLink::dispatch(...

27 UIApplicationMain

28 主

29 开始

**编辑器窗口错误**

0xeae45e6: 移动 %xmm4, -2472(%ebp) <<<<<

> 线程 1：EXC_???(11)(code=0, subcode=0x0)

0xeae45ed: movaps 64(%edi), %xmm4

0xeae45f1: 移动 %xmm4, %xmm5

0xeae45f4: mulps %xmm1, %xmm5

0xeae45f7: 添加 64(%eax), %xmm5

0xeae45fb: 移动 %xmm5, -2456(%ebp)

0xeae4602: 移动 %xmm5, %xmm6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:34:42.390

我会说这是一个内存问题：

1.  在您的代码中的某个地方，您可能正在破坏内存 - 检查您访问数组的那些地方（是否超出范围读取），创建格式化字符串，释放对象。

2.  尝试使用仪器并检查内存——也许你很快就会在其他地方泄漏它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T07:07:10.883

我得到了这个确切的EXC_？？？(11) 错误相当一致。

在我的情况下，它是多线程编码错误 - 在一个线程上访问的类成员之一也被另一个线程修改（初始化...释放...）。这意味着代码正在访问一个已经发布或完全重新创建的实例。

因此，在适用的情况下添加 @synchronized 可以修复错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T05:18:19.600

转到**CCDirector**或**CCDirectoriOS** ，无论您使用的是什么......然后添加

```
@implementation CCDirectorDisplayLink

-(void) mainLoop:(id)sender
{
   if(displayLink_)//Crash fix
      [self drawScene];
} 
```

它应该修复崩溃..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T06:03:32.523

此错误是由于通过 xcode 以外的其他方式安装了应用程序，然后尝试使用 xcode 运行造成的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-08T21:35:15.103

我**强烈怀疑当您****忘记禁用不属于当前着色器的顶点属性**时会引发此异常。

尝试运行此功能：

```
 // debug
  static void PrintAllActiveAttributes()
  {
    int maxAttribs ;
    glGetIntegerv( GL_MAX_VERTEX_ATTRIBS, &maxAttribs ) ;
    for( int i = 0 ; i < maxAttribs ; i++ )
    {
      int enabled ;
      glGetVertexAttribiv( i, GL_VERTEX_ATTRIB_ARRAY_ENABLED, &enabled ) ;
      if( enabled )  printf( "INDEX %d ENABLED\n", i ) ;
    }
  } 
```

如果您**没有**禁用之前绑定的着色器使用的某些属性（通过调用`glDisableVertexAttribArray`），那么**这些属性仍将处于活动状态**，即使当前绑定的顶点缓冲区不使用它。我相信这会导致一些内存 OOB 异常被抛出。

# c# - 使用 FTP 从目录中检索特定文件

> ID：11988603
> 
> 赞同：1
> 
> 时间：2012-08-16T13:47:33.043
> 
> 标签：c#, ftp

我正在创建一个需要 FTP 到目录以检索文件列表的 C# 应用程序。下面的代码工作得很好。但是，我要通过 FTP 访问的文件夹包含大约 92,000 个文件。对于该大小的文件列表，此代码不会以我希望的方式工作。

我只寻找以字符串“c-”开头的文件。在做了一些研究之后，我什至不知道如何开始尝试解决这个问题。有什么办法可以修改这个现有的代码，让它只检索那些文件？

```
public string[] getFileList() {
    string[] downloadFiles;
    StringBuilder result = new StringBuilder();
    FtpWebRequest reqFTP;

    try {
        reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(ftpHost));
        reqFTP.UseBinary = true;
        reqFTP.Credentials = new NetworkCredential(ftpUser, ftpPass);
        reqFTP.Method = WebRequestMethods.Ftp.ListDirectory;
        WebResponse response = reqFTP.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());

        string line = reader.ReadLine();
        while (line != null) {
            result.Append(line);
            result.Append("\n");
            line = reader.ReadLine();
        }
        // to remove the trailing '\n'
        result.Remove(result.ToString().LastIndexOf('\n'), 1);
        reader.Close();
        response.Close();
        return result.ToString().Split('\n');
    }
    catch (Exception ex) {
        System.Windows.Forms.MessageBox.Show(ex.Message);
        downloadFiles = null;
        return downloadFiles;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:29:02.970

我认为`LIST`不支持通配符搜索，实际上它可能因不同的 FTP 平台而异，并且取决于 COMMANDS 支持

您将需要使用 下载 FTP 目录中的所有文件名`LIST`，可能以异步方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:36:29.193

这是类似的替代实现。我已经用多达 1000 个 ftp 文件对此进行了测试，它可能对你有用。完整的源代码可以在[这里](http://libftp.codeplex.com)找到。

```
 public List<ftpinfo> browse(string path) //eg: "ftp.xyz.org", "ftp.xyz.org/ftproot/etc"
    {
        FtpWebRequest request=(FtpWebRequest)FtpWebRequest.Create(path);
        request.Method=WebRequestMethods.Ftp.ListDirectoryDetails;
        List<ftpinfo> files=new List<ftpinfo>();

        //request.Proxy = System.Net.WebProxy.GetDefaultProxy();
        //request.Proxy.Credentials = CredentialCache.DefaultNetworkCredentials;
        request.Credentials = new NetworkCredential(_username, _password);
        Stream rs=(Stream)request.GetResponse().GetResponseStream();

        OnStatusChange("CONNECTED: " + path, 0, 0);

        StreamReader sr = new StreamReader(rs);
        string strList = sr.ReadToEnd();
        string[] lines=null;

        if (strList.Contains("\r\n"))
        {
            lines=strList.Split(new string[] {"\r\n"},StringSplitOptions.None);
        }
        else if (strList.Contains("\n"))
        {
            lines=strList.Split(new string[] {"\n"},StringSplitOptions.None);
        }

        //now decode this string array

        if (lines==null || lines.Length == 0)
            return null;

        foreach(string line in lines)
        {
            if (line.Length==0)
                continue;
            //parse line
            Match m= GetMatchingRegex(line);
            if (m==null) {
                //failed
                throw new ApplicationException("Unable to parse line: " + line);
            }

            ftpinfo item=new ftpinfo();
            item.filename = m.Groups["name"].Value.Trim('\r');
            item.path = path;
            item.size = Convert.ToInt64(m.Groups["size"].Value);
            item.permission = m.Groups["permission"].Value;
            string _dir = m.Groups["dir"].Value;
            if(_dir.Length>0  && _dir != "-")
            {
                item.fileType = directoryEntryTypes.directory;
            } 
            else
            {
                item.fileType = directoryEntryTypes.file;
            }

            try
            {
                item.fileDateTime = DateTime.Parse(m.Groups["timestamp"].Value);
            }
            catch
            {
                item.fileDateTime = DateTime.MinValue; //null;
            }

            files.Add(item);
        }

        return files;
    } 
```

# batch-file - 使用 .bat 从服务器下载并运行命令？

> ID：11988606
> 
> 赞同：0
> 
> 时间：2012-08-16T13:47:45.273
> 
> 标签：batch-file

我有一个 Windows 2008 服务器 (A)，我有一个 bat 文件 (B) 在该服务器上运行，循环间隔为一分钟。我可以修改该 bat 文件以从服务器 C 下载新指令，例如移动文件夹和进行端口转发（使用 netsh）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:26:57.300

你可能会做一些像这样的毛茸茸的事情：

假设：c:\batch\b.cmd 假设：c:\batch\extensions

将新的“指令”（又名 cmd 文件）复制到 c:\batch\extensions

在你的 b.cmd 添加：

```
@rem run extensions
for %%f in (c:\batch\extensions\*.cmd) do call :extension %%f

goto :EOF
:extension
call %1
REM Maybe remove the extension if it has run? check errorlevel?
goto :EOF 
```

# c# - 将特定字符串解析为 DateTime

> ID：11988608
> 
> 赞同：0
> 
> 时间：2012-08-16T13:47:59.987
> 
> 标签：c#, datetime, datetime-format

> **可能重复：**
> [在 C# 中将字符串解析为 DateTime](https://stackoverflow.com/questions/5366285/parse-string-to-datetime-in-c-sharp)

我正在获取从 API 返回的日期和时间作为以下格式的字符串：

2012 年 8 月 13 日星期一 15:04:51 -0400

有没有人有我如何将它变成日期时间的经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:52:01.257

怎么样

```
DateTime dt = DateTime.ParseExact("Mon Aug 13 15:04:51 -0400 2012",
                                  "ddd MMM dd HH:mm:ss K yyyy",
                                  CultureInfo.InvariantCulture) 
```

您应该阅读[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:49:57.707

看看[DateTime.Parse](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)方法。

或者，如果您不确定解析是否成功，请使用[DateTime.TryParse](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)方法。

对于非常规日期和时间字符串，请使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:53:26.613

Check these two links, I think they will be very useful to you:

[string-format-datetime](http://www.csharp-examples.net/string-format-datetime/)

[Custom Date and Time Format Strings](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# jquery - 使用 jquery/javascript 在点击时停止请求锚标记

> ID：11988610
> 
> 赞同：0
> 
> 时间：2012-08-16T13:48:05.243
> 
> 标签：jquery, anchor, preventdefault, stoppropagation

我有一个带有`href="http://www.abc.com/page/1"`属性的锚标记。它是分页功能的锚链接。

当我单击此锚点时，默认情况下会加载“www.abc.com/page/1”。

现在我想禁用这个请求使用 javascript/jquery.means 页面不应该加载。`'http://www.abc.com/page/1'`当有人单击锚链接时，我必须在 ajax 调用中使用整个链接。我无法以编程方式或 jquerying 为该链接创建新属性。

原因（以编程方式）：这已经是有效的分页功能，并且将此链接移动到其他/新属性将影响整个应用程序。

原因（jquery）：这些链接被ajaxily加载，所以我不能在页面加载或ajax成功时修改它们，因为它也会影响整个应用程序。

因此，在此链接的单击事件中，我`return false;`在实时功能中使用了该链接。但请求正在进行。

我在stackoverflow上经历了很多问题，并且有答案：`'e.preventDefault', 'e.stopPropogation'`也不起作用。

如何使用 jquery 来实现它，因为我必须在 ajax 调用中传递此链接？我是否需要任何额外的东西才能使 e.preventDefault、e.stopPropogation 工作。

# visual-c++ - 在 vc++ 中使用 VSS 进行卷备份

> ID：11988611
> 
> 赞同：0
> 
> 时间：2012-08-16T13:48:05.897
> 
> 标签：visual-c++, volume-shadow-service

谁能建议我如何进行卷备份？

下面是我的代码。创建 C: 驱动器的 shapshot 并尝试备份并使用 CopyFile 逐个文件备份。他们有什么方法可以备份价值吗？

```
cout<<"=============Begin Initialize=========="<<endl;
         if(FAILED(CoInitializeEx(NULL,0)))
         {
              cout << "CoInitialize() failed\n";
              return(0);
         }

          if(FAILED(CoInitializeSecurity(
              NULL,
              -1,
              NULL,
              NULL,
              RPC_C_AUTHN_LEVEL_PKT_PRIVACY, 
              RPC_C_IMP_LEVEL_IDENTIFY,
              NULL,
              EOAC_NONE,
              NULL))) 
          {
              cout << "CoInitializeSecurity() failed\n";
              return(0);
          }

           if(FAILED(CreateVssBackupComponents(&m_pVssObject))) 
           {
               cout << "CreateVssBackupComponents() failed\n";
               return(0);
           }

           if(FAILED(m_pVssObject->InitializeForBackup())) 
           { 
               cout << "IVssBackupComponents->InitializeForBackup() failed\n";
               return(0);
           }

          // if(FAILED(m_pVssObject->SetContext(dwContext))) 
           if(FAILED(m_pVssObject->SetContext(VSS_CTX_BACKUP | VSS_CTX_APP_ROLLBACK))) 
           { 
               cout << "IVssBackupComponents->SetContext() failed\n";
               return(0);
           }

           if(FAILED(m_pVssObject->SetBackupState(true,true,VSS_BT_FULL,false)))
           {
               cout << "IVssBackupComponents->SetContext() failed\n";
               return(0);
           }         
            cout<<"=============End Initialize=========="<<endl;

            // Start the shadow set
            CHECK_COM(m_pVssObject->StartSnapshotSet(&m_latestSnapshotSetID))

            GetVolumePathNameW((LPCWSTR)wstrVolume.c_str(),wszVolumePathName, MAX_PATH);
            CHECK_COM(m_pVssObject->IsVolumeSupported(GUID_NULL, wszVolumePathName, &supported));

            // Add the specified volumes to the shadow set
            VSS_ID SnapshotID;
            CHECK_COM(m_pVssObject->AddToSnapshotSet(wszVolumePathName, GUID_NULL, &SnapShotId));
            m_latestSnapshotIdList.push_back(SnapshotID);

            cout<<"Prepare the shadow for backup\n";
            CHECK_COM(m_pVssObject->PrepareForBackup(&pPrepare));
                cout<<"Waiting for the asynchronous operation to finish..."<<endl;
                CHECK_COM(pPrepare->Wait());
                HRESULT hrReturned = S_OK;
                CHECK_COM(pPrepare->QueryStatus(&hrReturned, NULL));
                // Check if the async operation succeeded...
                if(FAILED(hrReturned))
                {
                    cout<<"Error during the last asynchronous operation."<<endl;
                }
                pPrepare->Release();

            cout<<"Creating the shadow (DoSnapshotSet) ... "<<endl;
            CHECK_COM(m_pVssObject->DoSnapshotSet(&pDoShadowCopy));
                cout<<"Waiting for the asynchronous operation to finish..."<<endl;
                CHECK_COM(pDoShadowCopy->Wait());
                hrReturned = S_OK;
                CHECK_COM(pDoShadowCopy->QueryStatus(&hrReturned, NULL));
                // Check if the async operation succeeded...
                if(FAILED(hrReturned))
                {
                    cout<<"Error during the last asynchronous operation."<<endl;
                }
                pDoShadowCopy->Release();

            HRESULT result;
            //CHECK_COM(m_pVssObject->GetSnapshotProperties(SnapShotId,&props));

            result=m_pVssObject->GetSnapshotProperties(SnapShotId,&props);

            if(result== S_OK)
            {
                _tprintf (_T(" Snapshot Id :")  WSTR_GUID_FMT _T("\n"), GUID_PRINTF_ARG( props.m_SnapshotId));                               
                _tprintf (_T(" Snapshot Set ID :")  WSTR_GUID_FMT _T("\n"), GUID_PRINTF_ARG( props.m_SnapshotSetId));
                _tprintf (_T(" Provider ID :")  WSTR_GUID_FMT _T("\n"), GUID_PRINTF_ARG( props.m_ProviderId));
                _tprintf (_T(" OriginalVolumeName : %ls\n"),props.m_pwszOriginalVolumeName);
                if(props.m_pwszExposedPath != NULL) _tprintf (_T(" Exposed Path  : %ls\n"),props.m_pwszExposedPath);
                if(props.m_pwszExposedName != NULL) _tprintf (_T(" Exposed Path Name : %ls\n"),props.m_pwszExposedName);
                if(props.m_pwszSnapshotDeviceObject != NULL) _tprintf (_T(" SnapShot device object: %ls\n"),props.m_pwszSnapshotDeviceObject);

                SYSTEMTIME stUTC, stLocal;
                FILETIME ftCreate;
                ftCreate.dwHighDateTime  =  HILONG(props.m_tsCreationTimestamp);
                ftCreate.dwLowDateTime   =  LOLONG(props.m_tsCreationTimestamp);

                FileTimeToSystemTime(&ftCreate, &stUTC);
                SystemTimeToTzSpecificLocalTime(NULL, &stUTC, &stLocal);

                _tprintf (TEXT("Created : %02d/%02d/%d  %02d:%02d \n"),   stLocal.wMonth, stLocal.wDay, stLocal.wYear, stLocal.wHour, stLocal.wMinute );
                _tprintf (_T("\n"));
            }

            WCHAR sam_file[1024];

            wsprintf(sam_file,L"%s%s",props.m_pwszSnapshotDeviceObject,L"\\WINDOWS\\System32\\Config\\SAM");

            CopyFile(sam_file,L"c:\\temp\\dbg_sm_bkup",FALSE);

            VssFreeSnapshotProperties(&props);  
            m_pVssObject->Release(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T07:19:50.237

您可以使用 vshadow 工具进行卷影复制。源代码也可以通过 sdks 在线获得。通过以下链接，

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb530725(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb530725(v=vs.85).aspx)

# ruby-on-rails - Rails JSON 作为字典

> ID：11988621
> 
> 赞同：0
> 
> 时间：2012-08-16T13:48:29.627
> 
> 标签：ruby-on-rails, json, ios5

我正在 Rails 3 中编写一个供 iOS 应用程序读取的 API。

我写了这个：

```
def index
  @shops = Shop.all

  render json: @shops
end 
```

输出以数组形式出现：

```
[{
"created_at": "2012-07-28T10:35:38Z",
"id": 1,
"name": "Shop1",
"phone": "111-111-1111",
"updated_at": "2012-07-28T10:35:38Z"
}] 
```

但是，我希望我的 iOS 应用程序将其作为字典阅读

如何将 JSON 输出转换为字典？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:18:22.110

我环顾四周，但不幸的是找不到自动执行此操作的方法。目前，您最好的选择可能是手动执行此操作：

```
def index
  @shops = Shop.all

  render json: {:shops => @shops}
end 
```

# r - 索引问题

> ID：11988623
> 
> 赞同：0
> 
> 时间：2012-08-16T13:48:34.027
> 
> 标签：r, indexing, plot, dataframe

我一直在尝试绘制两组信息（残差）之间的差异。两组数据具有相似（但不同）的特征，并且两组数据都从 0 变为相同的 X 值。唯一的不一致是它们的索引不同，因此第一个图在 A 步中到达 X，而第二个在 B 步中到达 X。因此，我不能简单地从另一个数据帧中减去一个数据帧的因变量值。我说的很笼统，所以我提供了一个简单的例子。我想绘制两个数据集之间的残差，如下所示：

```
data1 <- data.frame(x1=c(1,2,3,4,5,6), y1=c(10,5,7,3,2,4))
data2 <- data.frame(x2=c(1,3,6), y2=c(1,3,2))

plot(data1, y1 ~ x1, type = 'l', lty = 1, col = 'blue', xlim = c(1,6), ylim = c(0,10))
points(data2$y2 ~ data2$x2, type = 'l', lty = 1, col = 'red') 
```

所以我想我的问题是：

1.  如何绘制索引不同的两个函数（如上）的残差。是否有一个函数可以解决两个数据集之间的残差？

EDIT1：这个例子有问题，Spacedman 帮我纠正了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:04:47.260

如果线性插值足够好，您可以使用`approx`在一堆 X 坐标处进行插值。例如：

```
> xout = sort(unique(c(seq(1,6,len=100),data1$x1,data2$x2))) # include data coords (untested)
> d1 = approx(data1$x1,data1$y1,xout)
> d2 = approx(data2$x2,data2$y2,xout)
> plot(xout,d1$y-d2$y,type="l") 
```

# sas - 优化 SAS 中基于其他变量重新计算变量的代码

> ID：11988630
> 
> 赞同：0
> 
> 时间：2012-08-16T13:48:58.037
> 
> 标签：sas

我有一个数据集，其中包含有关一系列食品消费的信息，基本上是消费频率、消费数量以及它是否是您按时消费的食品。此外，一些食品也有一种类型（例如，您食用普通苏打水或无糖苏打水）。每个食品项目都被命名为“DIEA#”加上一个字母（F 表示频率，Q 表示数量，S 表示区域性，T 表示类型（如果需要））。数据集看起来像这样。

```
ID    DIEA1F    DIEA1Q    DIEA1S    DIEA1T    DIEA2F    DIEA2Q    DIEA2S    ...
1     3         20        0         1         1         10        0         ...
2     1         50        0         2         3         30        0         ...
3     5         10        1         2         1         15        0         ...
4     8         5         0         1         2         10        1         ...
...   ...       ...       ...       ...       ...       ...       ...       ... 
```

在另一个数据集中，我有关于每种食物的营养信息，使用频率变量作为索引

```
VARF      TYPE    CALORIES  FAT       VIT.A     VIT.B     ...
DIEA1F    1       150       20        8         0         ...
DIEA1F    2       120       5         7         0         ...
DIEA2F    .       50        0         3         25        ...
DIEA3F    .       67        5         1         10        ...
...     ...       ...       ...       ...       ... 
```

所以，我有大约 15k 名受访者、114 种食品和每种食品的 160 个营养变量（如果该食品有不同的类型，则更多）。我需要的是根据食物消费数据计算每个人每种营养素的总消费量。我实际上解决了这个问题，但是，我认为我的解决方案太慢了。计算大约需要 5 个小时。

这是我的代码：

```
LIBNAME DIET "C:\Nutri\diet";

DATA diet.Test;
SET diet.qf2_die_100412;
    /*here is a list of nutrition variables, and i set each one to zero (exemple CAL=0;)*/
RUN;

PROC IMPORT OUT= diet.dadosdie DATAFILE= "C:\Nutri\diet\nutrifacts.xls" 
        DBMS=xls REPLACE;
 SHEET="plan1"; 
 GETNAMES=YES;
RUN;

DATA dadosdie;
SET diet.Dadosdie;
RUN;

%MACRO cnt_list(list=);
%LET i = 1;
%DO %WHILE (%CMPRES(%SCAN(&list., &i.)) ne );
%LET item&i. = %CMPRES(%SCAN(&list., &i.));
%LET i = %EVAL((&i. + 1);
%END;
%*** STORE THE COUNT OF THE NUMBER OF ITEMS IN A MACRO VARIABLE: &CNTITEM;
%LET cntitem = %EVAL((&i. - 1);
&cntitem.
%MEND cnt_list;

%MACRO NoType(food=);

%LET RootItem=DIEA&food.;

DATA diet.test;
        set diet.test;
        if &RootItem.F = 1 then CONS_&RootItem.FPF = 3;
        if &RootItem.F = 2 then CONS_&RootItem.FPF = 2.5;
        if &RootItem.F = 3 then CONS_&RootItem.FPF = 1;
        if &RootItem.F = 4 then CONS_&RootItem.FPF = 0.8;
        if &RootItem.F = 5 then CONS_&RootItem.FPF = 0.4;
        if &RootItem.F = 6 then CONS_&RootItem.FPF = 0.1;
        if &RootItem.F = 7 then CONS_&RootItem.FPF = 0.07;
        if &RootItem.F = 8 then CONS_&RootItem.FPF = 0;
    RUN;

PROC SQL NOPRINT;

    SELECT Gramature INTO :gramature FROM dadosdie 
    WHERE VARF = "&RootItem.F" ;

    SELECT Grams_Ref INTO :gramsref FROM dadosdie 
    WHERE VARF = "&RootItem.F" ;

QUIT;

%LET listvarcomp= \* Here goes the same list of nutrition variables *\
%DO i=1 %TO %cnt_list(list=&listvarcomp.) ;
    %LET measure=%scan(&listvarcomp.,&i.);
    PROC SQL NOPRINT;
        SELECT &measure. INTO :parameter FROM dadosdie 
        WHERE VARF = "&RootItem.F" ;
    QUIT;
    DATA diet.test;
        set diet.test;
        if &RootItem.Q ne . and &RootItem.Q ne .P and &RootItem.S ne 1
        then &measure.= &measure. + (CONS_&RootItem.FPF*&gramature.*&parameter.*&RootItem.Q/&gramsref.);
    RUN;
%END;

%MEND NoType;   

%MACRO WithType(food=);

%LET RootItem=DIEA&food.;

DATA diet.test;
        set diet.test;
        if &RootItem.F = 1 then CONS_&RootItem.FPF = 3;
        if &RootItem.F = 2 then CONS_&RootItem.FPF = 2.5;
        if &RootItem.F = 3 then CONS_&RootItem.FPF = 1;
        if &RootItem.F = 4 then CONS_&RootItem.FPF = 0.8;
        if &RootItem.F = 5 then CONS_&RootItem.FPF = 0.4;
        if &RootItem.F = 6 then CONS_&RootItem.FPF = 0.1;
        if &RootItem.F = 7 then CONS_&RootItem.FPF = 0.07;
        if &RootItem.F = 8 then CONS_&RootItem.FPF = 0;
    RUN;

PROC SQL NOPRINT;

    SELECT gramature INTO :gramature FROM dadosdie 
    WHERE VARF = "&RootItem.F" ;

    SELECT Grams_Ref INTO :gramsref FROM dadosdie 
    WHERE VARF = "&RootItem.F" ;

    SELECT COUNT(*) INTO :NOBStype FROM dadosdie            
    WHERE VARF = "&RootItem.F" ;

QUIT;

%LET listvarcomp= \* Here goes the same list of nutrition variables *\

%DO j=1 %TO &NOBStype. ;

    %DO i=1 %TO %cnt_list(list=&listvarcomp.) ;
        %LET measure=%scan(&listvarcomp.,&i.);
        PROC SQL NOPRINT;
            SELECT &measure. INTO :parameter FROM dadosdie 
            WHERE VARF = "&RootItem.F" AND TYPE = &j.;
        QUIT;
        DATA diet.test;
            set diet.test;
            if &RootItem.Q ne . and &RootItem.Q ne .P and &RootItem.S ne 1 and &RootItem.T = &j.
            then &measure.= &measure. + (CONS_&RootItem.FPF*&gramature.*&parameter.*&RootItem.Q/&gramsref.);
        RUN;
    %END;
%END;

%MEND WithType; 
```

然后我将适当的宏应用于每个食物项目（例如 %WithType(food=1)）

我实际上对 SAS 语言相当陌生，这是我使用它的第二个月，所以我想我可能在我的代码中做了一些多余或不是最优的事情。任何提示将非常感谢。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:48:22.250

这是部分答案，我会在有更多时间时尝试更新它...

我认为最好的解决方案是使用[哈希表](http://www2.sas.com/proceedings/sugi31/241-31.pdf)作为查找表，然后通过数据集在一次解析中处理所有数据。这可能会将时间减少到 < 1 分钟。这意味着您也可以避免使用宏变量。

或者....

1) 考虑为您的表添加索引。

2）在我看来，这也可能是使用该`SASFILE`语句的候选者。它将允许您将经常查询的数据集加载到内存中，以便更快地访问它们。

3）以下代码块

```
PROC SQL NOPRINT;

    SELECT Gramature INTO :gramature FROM dadosdie 
    WHERE VARF = "&RootItem.F" ;

    SELECT Grams_Ref INTO :gramsref FROM dadosdie 
    WHERE VARF = "&RootItem.F" ;

QUIT; 
```

可以改为：

```
PROC SQL NOPRINT;

    SELECT Gramature, Grams_Ref INTO :gramature, :gramsref FROM dadosdie 
    WHERE VARF = "&RootItem.F" ;

QUIT; 
```

这需要对数据进行 1 次解析。代码中有几个地方可以从中受益。

最后 - 如果您可以发布运行 1 种食品的日志，这可能有助于我们确定最能从优化中受益的部分。

# symfony - 在模板中嵌入控制器

> ID：11988634
> 
> 赞同：1
> 
> 时间：2012-08-16T13:49:02.967
> 
> 标签：symfony, twig

## 我们可以轻松地将控制器嵌入到 twig 的模板中：

```
{% render "AcmeGolferBundle:Golfer:showGolfersList" %} 
```

## 当我们基本上使用这样的控制器时：

```
 /**
 * Lists all golfers.
 *
 * @Route("/golfersList", name="golfers_list")
 * @Template()
 */
public function showGolfersListAction()
{
    //....doStuff
} 
```

在这种情况下，控制器的唯一用途将是在该模板中。有没有办法避免用户直接触发 url，这意味着`/golferList`它自己？

## 编辑

我要说明的要点如下：我需要用户通过它嵌入的模板来使用控制器，而不是直接通过 url。我意识到这可能是不可能的，但由于控制器是嵌入式的，它没有适当的 css 结构。因此，如果直接通过 url 触发，在页面上会显得非常难看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:55:50.200

[通过 IP 保护路由](http://symfony.com/doc/current/book/security.html#securing-by-ip)可能对您有用：

```
security: 
    # ...
    access_control:
        - { path: ^/golferList, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

# python - 如何使用端口 80 运行 PyCharm

> ID：11988636
> 
> 赞同：8
> 
> 时间：2012-08-16T13:49:03.683
> 
> 标签：python, django, pycharm

我无法使用端口 80 运行我的 PyCharm IDE。我需要使用要求我使用端口 80 的 PayPal。但是使用 Mac OS X 10.8 由于权限问题，我无法让它工作。我已经尝试使用 SUDO 命令运行 PyCharm。

有谁知道如何使用端口 80 或任何其他解决方案运行 Pycharm？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-08-04T11:57:53.843

您可以通过在 PyCharm IDE中设置**环境变量来实现这一点。**变量将是：`FLASK_RUN_PORT=80` 实现该目标的步骤：

1.  运行 -> 编辑配置
2.  环境变量->`FLASK_RUN_PORT=80`

图片： [![在此处输入图像描述](../Images/6aa29f72ff5437291928153bb3c8653d.png)](https://i.stack.imgur.com/mY4G2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-05T20:46:49.397

要授予 PyCharm 权限，必须以管理员 (Windows) 身份运行或`sudo`在 OSX/Linux 上使用 if: `sudo /Applications/PyCharm.app/Contents/MacOS/pycharm`。请注意，这确实以新用户身份运行 PyCharm，因此您必须再次注册该应用程序并再次设置您的自定义设置（即主题、服务器配置文件等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-10T09:39:18.320

对于那些正在寻找这个问题的答案的人，请检查您的 Pycharm 运行/调试配置。运行->编辑配置->端口

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-15T17:41:33.410

要更改端口，请在 Run/Debug Configurations 中添加以下选项：

[![在此处输入图像描述](../Images/520d5ee1f6358ce88e46504c436ccb41.png)](https://i.stack.imgur.com/JlGRY.png)

我将 8000 值设置为 80 在权限期间不起作用。

# php - 通过 FTP 自动部署对网站的更改（使用 Mercurial）

> ID：11988637
> 
> 赞同：3
> 
> 时间：2012-08-16T13:49:05.760
> 
> 标签：php, deployment, mercurial

我们有一个包含数千个文件的网站，我们需要通过 FTP 将更改（修订 X 和 Y 之间）上传到不同的托管服务器。我们的一些网站在共享主机上，我们想要一个通用的解决方案，这就是我们需要使用 FTP 的原因，因为它在任何地方都受支持。

1）我不希望上传所有文件，只上传更改过的文件。
2) 我不希望检查远程 FTP 服务器上的每个文件以确定是否需要更新 - 这会太长，因为正如我所说 - 我们有数千个文件。

所以我希望我的部署工作流程是这样的：

1) 我知道生产中的网站是修订版 X。
2) 我想将其更新到修订版 Y（例如 X+10）
3) 所以我选择我希望在修订版 X 和 Y 之间更改所有文件复制到 FTP 服务器上的指定文件夹。
4）如果我可以选择要排除的文件会非常好（例如包含数据库连接数据的hosting.specific.php配置等）

如果没有这样的工具可以为我完成所有这些，那么至少我想找到一个可以从 Mercurial 获取更改的文件并将它们复制到任何其他文件夹（假设文件夹结构）的工具，然后我会手动将该文件夹复制到 FTP 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:57:10.530

看看 HgExportFiles 扩展：[https ://bitbucket.org/albert_brand/hgexportfiles/wiki/Home](https://bitbucket.org/albert_brand/hgexportfiles/wiki/Home)

# unix - grep 所有非只读文件

> ID：11988641
> 
> 赞同：1
> 
> 时间：2012-08-16T13:49:22.433
> 
> 标签：unix, grep

在我的 Mac 中，当我打开终端时，我将如何列出目录中的所有文件和非只读的子目录？

只读部分是我不确定的部分。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:54:23.333

首先定义或决定“非只读”的含义。可执行文件不是只读的吗？没有权限的文件怎么办（它不是只读的，但也不可读）。

其次，使用[`find`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/find.html)适当的选项（`-perm`，也许`-maxdepth`）来生成文件列表，然后执行`grep`：

```
 find . -type f ...other controls... -exec grep -e '36 inches' {} + 
```

这`+`是最近但有用的创新。如果它不可用，您可以使用 GNU`find`并将其通过`-print0`管道传输到 GNU `xargs -0`，但 GNU无论如何`find`都支持该表示法。`+`如果您没有 GNU`find`和 GNU `xargs`，则可能必须使用普通的`-print`and `xargs`，但这不能正确处理名称中带有奇怪字符（特别是空格，换行符）的文件名。

# overflow - CSS 扩展文档宽度以适应内容

> ID：11988642
> 
> 赞同：0
> 
> 时间：2012-08-16T13:49:26.410
> 
> 标签：overflow, css

如果我单独加载一个宽度为 say`500px`和的 div `display:inline-block`，当它到达文档的边缘时，下一个开始新行。是否有一种非 JS 方法可以使文档水平扩展（即使用滚动条）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:55:43.087

听起来你需要使用`min-width`而不是`width` 你可能想要使用`white-space:nowrap`以将文本保留在一行而不是换行到另一行。

# linux - 大数据读取子样本 R

> ID：11988643
> 
> 赞同：5
> 
> 时间：2012-08-16T13:49:29.703
> 
> 标签：linux, r, awk, system, statistics-bootstrap

我非常感谢您抽出时间阅读本文。

我有一个包含 600 万条记录和 3000 个（主要是分类数据）列的 csv 格式的超大 30GB 文件。我想为多项回归引导子样本，但即使我的机器中有 64GB RAM 和两倍的交换文件，这也很困难，这个过程变得非常缓慢并停止。

我正在考虑在 R 中生成子样本索引并使用 sed 或 awk 将它们输入系统命令，但不知道如何执行此操作。如果有人知道仅使用 R 命令来执行此操作的干净方法，我将不胜感激。

一个问题是我需要选择对子样本的完整观察，也就是说，我需要拥有特定多项式观察的所有行——它们从观察到观察的长度不同。我计划使用 glmnet，然后使用一些花哨的变换来获得多项式情况的近似值。另一点是我不知道如何选择样本大小以适应内存限制。

非常欣赏你的想法。

```
R.version
platform       x86_64-pc-linux-gnu          
arch           x86_64                       
os             linux-gnu                    
system         x86_64, linux-gnu            
status                                      
major          2                            
minor          15.1                         
year           2012                         
month          06                           
day            22                           
svn rev        59600                        
language       R                            
version.string R version 2.15.1 (2012-06-22)
nickname       Roasted Marshmallows 
```

尤达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:57:19.700

正如themel 所指出的，R 在读取 csv 文件时非常慢。
如果您有 sqlite，它确实是最好的方法，因为数据挖掘似乎不仅仅是一次，而是以多种方式在多个会话中进行。

让我们看看我们有哪些选择

## 将csv读取到R（慢）

与用 C 编写的工具（在我的机器上）相比，在 R 中执行此操作要慢 20 倍

这很慢

```
read.csv( file='filename.csv' , head=TRUE , sep=",") 
```

## 预先转换为 stata dta 文件并从那里加载

不是很好，但它应该可以工作（我从未在 30 gig 文件上尝试过，所以我不能肯定地说）

## 编写程序将 csv 转换为 dta 格式（如果您知道自己在做什么）

使用来自[http://www.stata.com/help.cgi?dta](http://www.stata.com/help.cgi?dta)的资源 和来自[https://svn.r-project.org/R-packages/trunk/foreign/src/stataread.c](https://svn.r-project.org/R-packages/trunk/foreign/src/stataread.c)的代码来阅读和write 和[http://sourceforge.net/projects/libcs​​v](http://sourceforge.net/projects/libcsv/)
/ （过去已经完成。但是我没有使用它，所以我不知道它的性能如何）

然后使用`foreign`包（[http://cran.r-project.org/web/packages/foreign/index.html](http://cran.r-project.org/web/packages/foreign/index.html)），一个简单的

```
library(foreign)
whatever <- read.dta("file.dta") 
```

会加载你的数据

## 直接使用mysql导入csv数据（不好用，不过懂SQL也不错）

从 SQL 控制台

```
LOAD DATA LOCAL INFILE 'file.csv' INTO TABLE my_table 
IGNORE 1 LINES              <- If csv file contains headers
FIELDS TERMINATED BY ',' ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY '\n' 
```

或者

```
mysql -e "LOAD DATA INFILE 'ls.dat' INTO TABLE mytable1" mydatabase 
```

然后从 R 控制台播放，使用`RMySQL`R 接口访问 MySQL 数据库 [http://cran.r-project.org/web/packages/RMySQL/index.html](http://cran.r-project.org/web/packages/RMySQL/index.html)

```
install.packages('RMySQL') 
```

然后像这样玩

```
mydb = dbConnect(MySQL(), user=username, password=userpass, dbname=databasename, host=host)
dbListTables(mydb)
record <- dbSendQuery(mydb, "select * from whatever")
dbClearResult(rs)
dbDisconnect(mydb) 
```

## 使用 R 执行所有 sqlite/postgreSQL/MySQL 后端 SQL 东西以导入 csv（推荐）

如果您没有软件包，请从[https://code.google.com/p/sqldf/](https://code.google.com/p/sqldf/)
下载 或`svn checkout http://sqldf.googlecode.com/svn/trunk/ sqldf-read-only`

从 R 控制台，

```
install.packages("sqldf")
# shows built in data frames
data() 

# load sqldf into workspace
library(sqldf)
MyCsvFile <- file("file.csv")
Mydataframe <- sqldf("select * from MyCsvFile", dbname = "MyDatabase", file.format = list(header = TRUE, row.names = FALSE)) 
```

你走吧！

Presonally，我会推荐 library(sqldf) 选项:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:23:35.887

我认为使用 CSV 作为此类文件大小的数据格式是一个非常糟糕的主意 - 为什么不将其转换为 SQLite（或“实际”数据库）并使用 SQL 查询提取子集（使用[DBI](http://cran.r-project.org/web/packages/DBI/index.html) /RSQLite [2](http://cran.r-project.org/web/packages/RSQLite/index.html)）？

只需导入一次，无需将整个内容加载到内存中，因为可以[直接将 CSV](http://cran.r-project.org/web/packages/DBI/index.html)文件导入 sqlite。

如果通常您想使用大于内存的数据集，您可能还想看看[bigmemory](http://www.bigmemory.org/)。

# servlets - 将 Glassfish 输出写入 servlet html 页面

> ID：11988648
> 
> 赞同：1
> 
> 时间：2012-08-16T13:49:39.203
> 
> 标签：servlets

如何将 Glassfish 服务器输出重定向到 HttpServletResponse.out？我正在 NetBeans 中制作 servlet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:55:10.993

这是一个工作示例，只需将其公开为 servlet

```
public class ReadLogs extends HttpServlet {

    private static final String CONTENT_TYPE = "text/html; charset=UTF-8";

    public void init(ServletConfig config) throws ServletException {
        super.init(config);
    }

    public void service(HttpServletRequest request,
            HttpServletResponse response) throws ServletException,
            IOException {
        response.setContentType(CONTENT_TYPE);
        PrintWriter out = response.getWriter();
        out.append("<html>\n<head>\n\n");
        out.append("<script>function toBottom()" + "{"
                + "window.scrollTo(0, document.body.scrollHeight);" + "}");
        out.append("\n</script>");
        out.append("\n</head>\n<body onload=\"toBottom();\">\n<pre>\n");
        try {
            File file = new File("C:\\pathToServerLogFile");
            BufferedReader in = new BufferedReader(new FileReader(file));
            StringBuilder sb = new StringBuilder();
            while (in.ready()) {
                String x = in.readLine();
                sb.append(x).append("<br/>");
            }
            in.close();
            out.append("\n</pre>\n</body>\n</html>");
            out.close();
        } catch (FileNotFoundException fnfe) {
            fnfe.printStackTrace();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
} 
```

**更新**

如果您只需要打印文件的最后一部分，请在“in.close();”行之后使用它

```
 //print only 1MB Oof data
      if(sb.length()>1000000){
        out.append(sb.substring(sb.length()-1000000, sb.length()));
      }else{
        out.append(sb.toString());
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:07:01.673

所以..只打印调用脚本后出现的行，我做了这样的代码：

```
BufferedReader reader = new BufferedReader(new FileReader("/path/to/server/log/server.log"));
int lines = 0;
while (reader.readLine() != null) {
    lines++;
}

reader.close();

BufferedReader reader2 = new BufferedReader(new FileReader("/path/to/server/log/server.log"));
String strLine;
int i = 0;
while (i != lines) {
   reader2.readLine();
   i++;

}
while ((strLine = reader2.readLine()) != null) {
    out.println(stringToHTMLString(strLine));
    out.println("<br>");
}

reader2.close(); 
```

当 servlet 启动时，它会计算服务器日志中的行数（将其保存在变量 i 中），然后在单击操作表单后，它会读取索引高于 i 的行并将其显示在 html 页面上。我使用了函数 stringToHTMLString，我在 stackoverflow 的某个地方找到了它。

问候。

# javascript - 如何使用 Ext.js 为内存中的标签添加属性？

> ID：11988650
> 
> 赞同：0
> 
> 时间：2012-08-16T13:49:40.983
> 
> 标签：javascript, extjs

我将如何使用 Ext.js 实现这一目标？

```
var html = '<div><a href="a.htm">a</a><a href="b.htm">b</a></div>';

$(html).find('a').attr('target', '_blank'); // the jQuery way 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:50:10.343

虽然第一个答案是正确的，但它以一种非常迂回的方式做到了：

```
var dom = Ext.DomHelper.createDom({
    html: '<a href="a.htm">a</a><a href="b.htm">b</a>'
});

Ext.get(dom).select('a').set({
    target: '_blank'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:10:03.947

从 Ext.JS 4.1 开始，

```
// createDom makes the passed 'html' a childNode 
// of a new <div id="ext-gen####"></div> element
var htmlEl = Ext.DomHelper.createDom({html: '<div><a href="a.htm">a</a><a href="b.htm">b</a></div>' }),
    memoryDom = Ext.get(htmlEl);

memoryDom.select('a').set({ target: '_blank' });

// removes the <div id="ext-gen####"></div> wrapper
console.log(memoryDom.getHTML()); 
```

# c# - LINQ to SQL 从查询中未列出的表中获取数据

> ID：11988652
> 
> 赞同：3
> 
> 时间：2012-08-16T13:49:43.937
> 
> 标签：c#, sql, linq-to-sql

我正在使用 LINQ to SQL 从 SQL Server 2012 数据库中的一组表中获取数据。查询的结果是正确的，并且正确地构造了我的域对象；*但是*，当我检查生成的 SQL（通过 DataContext.Log 或 SQLProfiler）时，查询似乎非常简洁。

最值得注意的是，我的许多实例都是由来自一个特定表中的行的数据构建的。我通过与所述表具有一对多关系的表通过外键访问该表，但是，*该表不会出现在 SQL 查询中的任何位置！* 不在 FROM 或 JOIN 语句或任何东西中。

我当然很高兴生成的查询能够正确且快速地执行，但我只是不明白如何从生成的 SQL 中任何地方都没有提到的表中获取数据。我想了解发生了什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:56:50.663

这可能是由于*延迟加载*。

加载域对象时，在您明确访问它们之前不会加载依赖的域对象。

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb399393.aspx)：

> 当您查询一个对象时，您实际上只检索您请求的对象。相关对象不会同时自动获取。...**您看不到相关对象尚未加载的事实，因为尝试访问它们会产生检索它们的请求**。

[在此处](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/10/06/linq-to-sql-deferred-loading-lazy-load.aspx)和[此处](http://msdn.microsoft.com/en-us/library/bb399393.aspx)阅读有关延迟加载的更多信息。

# python - 金字塔框架中的可重用组件

> ID：11988658
> 
> 赞同：0
> 
> 时间：2012-08-16T13:50:04.667
> 
> 标签：python, components, pyramid

我是 Pylon 金字塔框架的初学者，我正在处理在其中创建可重用组件。

假设您有一些复杂的小部件，例如日历显示一些日期，提供一些操作（下个月，上个月），并且您希望在应用程序的许多不同页面上显示此小部件。

在 symfony 或 nette 框架中，您只需创建一些组件，然后您就可以在各个页面上使用它。

什么是可取的方式，如何在 Pyramid 框架中处理这样的需求？是否有一些 symfony 组件的替代品？或者我应该在 Pyramid 上构建类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:57:58.493

是的，您可以使用像[toscawidgets](http://www.toscawidgets.org/)这样的小部件框架并使用它创建可重用的 UI 组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:54:17.367

如果你使用[Mako](http://www.makotemplates.org/)作为模板引擎，你可以使用它的`<%include>`标签。它将包含文件的内容（其中包含可重用组件的代码）放入模板中，您可以将参数传递给它：

```
<%include file="post.mako" args="post=post" />

...

#post.mako

<%page args="post"/>
<h1>${post.title}</h1>
... 
```

这种机制对我来说完全涵盖了可重用的 UI 组件。

# ruby-on-rails - Ruby on Rails - 使用 logger.info "hi" 给出未定义的变量或方法错误，要更改/设置什么？

> ID：11988662
> 
> 赞同：2
> 
> 时间：2012-08-16T13:50:09.127
> 
> 标签：ruby-on-rails, ruby, logging

我想在日志中放一些东西，但我不断收到

```
NameError: undefined local variable or method 'logger' for Report:Class 
```

我试过了

```
logger "hi"
logger 'hi'
logger.info 'hi'
Rails.logger "hi" 
```

但我只是收到上述错误。

我尝试添加`config.logger = Logger.new(STDOUT)`到我的`config/environments/development.rb`但没有帮助，仍然得到错误。

我在`script/console`...中运行该方法，但每次我退出并输入它以重新加载所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:06:15.133

你必须使用：

```
Rails.logger.info 'hi' 
```

`Rails.logger`返回一个记录器实例，并通过使用消息对其调用**info**、**warn**、**error**或**debug**，此消息以指定的日志级别记录。

在*ActiveRecord*或*ActionController*实例中，您还可以使用返回的*记录器*便利访问器`Rails.logger`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:59:11.923

除非您`logger`在正在执行的范围内调用了可用的变量或方法，否则它不会神奇地存在。`config`上下文是短期的，仅在初始化期间。

`Rails.logger`是您通常可以访问它的全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-21T07:54:04.320

您可以在至少 version 中在 Rails 模型之外使用 Rails 记录器`2.3.X`。您可能习惯于在模型或控制器中执行以下操作：

```
logger.info "Some debugging info I want to see in my development log." 
```

但是，如果您创建一个不继承自 的常规模型`ActiveRecord`，您可能会看到以下错误：

> # 未定义的局部变量或方法“记录器”

解决方案是调用 Rails.logger.info（或调试，或警告），如下所示：

```
Rails.logger.info "Some debugging info I want to see in my development log." 
```

# awk - awk：直接从 awk 脚本中设置环境变量

> ID：11988663
> 
> 赞同：10
> 
> 时间：2012-08-16T13:50:11.157
> 
> 标签：awk

第一次在这里发帖，但多年来一直是潜伏者。我已经用谷歌搜索了很长时间，但找不到我想要的东西（许多不要求该主题暗示它的主题的大主题......）。对 awk 或脚本并不陌生，只是有点生疏:)

我正在尝试编写一个 awk 脚本，该脚本将在运行时设置 shell env 值 - 以便稍后获取另一个 bash 脚本并使用。我不能简单地使用 awk 中的标准输出来报告我想要设置的这个值（即“导出任何内容 = `awk cmd here`”），因为那已经指向 awkscript 正在创建的“结果文件”（另外我在最终代码无论如何）。

作为示例测试脚本，演示我的问题：

```
echo $MYSCRIPT_RESULT          # returns nothing, not currently set
echo | awk -f scriptfile.awk   # do whatever, setting MYSCRIPT_RESULT as we go
echo $MYSCRIPT_RESULT          # desired: returns the env value set in scriptfile.awk 
```

在 scriptfile.awk 中，我尝试过（没有成功）

1/) 直接构建和执行一个临时字符串：

```
{
  cmdline="export MYSCRIPT_RESULT=1"
  cmdline
} 
```

2/) 使用系统函数：

```
{
  cmdline="export MYSCRIPT_RESULT=1"
  system(cmdline)
} 
```

...但这些不起作用。我怀疑这两个命令在 awk 正在执行的 shell 中创建了一个子 shell，并按照我的要求做（通过触摸文件作为测试证明），但是一旦“cmd”/系统调用完成，子 shell 就会死掉，不幸的是拿走我用它设置的任何东西——所以我的环境设置更改不会从“awk 的调用者”的角度来看。

所以我的问题是，你如何**直接**在 awk 中设置 env 变量，以便在 awk 执行完成后调用进程可以访问这些 env 值？真的有可能吗？

除了上面的 adhoc/system 方式，我已经证明这对我来说是失败的，我看不到如何做到这一点（除了将这些值写入某个“随机”文件以供调用脚本拾取和读取，其中无论如何，imo有点脏），因此，帮助！

欢迎所有想法/建议/评论！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T14:06:30.547

您无法更改父进程的环境。如果

```
MYSCRIPT_RESULT=$(awk stuff) 
```

是不可接受的，您所要求的无法完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T16:13:27.930

你可以这样做，但这有点麻烦。由于`awk`不允许重定向到文件描述符，您可以使用 fifo 或常规文件：

```
$ mkfifo fifo
$ echo MYSCRIPT_RESULT=1 | awk '{ print > "fifo" }' &
$ IFS== read var value < fifo
$ eval export $var=$value 
```

没有必要拆分 var 和 value；您可以轻松地让 awk 打印“导出”并直接评估输出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-17T12:06:23.210

您还可以使用 [awk 中在当前 shell 中设置变量中描述的内容](https://stackoverflow.com/questions/14505026/set-variable-in-current-shell-from-awk/33756188#33756188)

```
 unset var
 var=99
 declare $( echo "foobar" | awk '/foo/ {tmp="17"} END {print "var="tmp}' )
 echo "var=$var"
var= 
```

awk END 子句是必不可少的，否则如果模式没有匹配，则声明将当前环境转储到标准输出并且不会更改变量的内容。

可以通过用空格分隔多个值来设置它们。

```
 declare a=1 b=2
 echo -e "a=$a\nb=$b" 
```

注意：declare 仅是 bash，对于其他 shell，请使用具有相同语法的 eval。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-01-02T04:51:55.140

我找到了一个很好的答案。将所有内容封装在子外壳中！该命令声明的工作方式如下：

```
#Creates 3 variables
declare var1=1 var2=2 var3=3 
```

例1：

```
#Exactly the same as above
$(awk 'BEGIN{var="declare "}{var=var"var1=1 var2=2 var3=3"}END{print var}') 
```

我发现这种技术有一些非常有趣的用途。在下一个示例中，我有几个带有标签的分区。我使用标签作为变量名和设备名作为变量值来创建变量。

例 2：

```
#Partition data
lsblk -o NAME,LABEL

NAME   LABEL
sda
├─sda1
├─sda2
├─sda5 System
├─sda6 Data
└─sda7 Arch

#Creates a subshell to execute the text
$(\
#Pipe lsblk to awk
lsblk -o NAME,LABEL | awk \
#Initiate the variable with the text for the declare command
'BEGIN{txt="declare "}'\
#Filters devices with labels Arch or Data
'/Data|Arch/'\
#Concatenate txt with itself plus text for the variables(name and value)
#substr eliminates the special caracters before the device name
'{txt=txt$2"="substr($1,3)" "}'\
#AWK prints the text and the subshell execute as a command
'END{print txt}'\
) 
```

最终结果是 2 个变量：`Data`with value`sda6`和`Arch`with value `sda7`。

一行中的相同示例。

```
$(lsblk -o NAME,LABEL | awk 'BEGIN{txt="declare "}/Data|Arch/{txt=txt$2"="substr($1,3)" "}END{print txt}') 
```

# html - 指向 html 5 的电源点

> ID：11988670
> 
> 赞同：0
> 
> 时间：2012-08-16T13:50:41.373
> 
> 标签：html, point

我正在寻找一种工具/解决方案，可以让我将 power point 演示文稿转换为一个完整的 html5 网站。我见过像 iSpring 和 html5point 这样的解决方案，它们只是将每张幻灯片制作为 img 或 iSpring whihc，这对于简单的幻灯片很有用。在我的例子中，幻灯片包含图形和形状（虽然没有动画或视频）。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:56:44.957

我不知道您提到的任何解决方案，但是上次我不得不这样做时，我发现将 .ppt 导出（另存为 ...）作为单个网页然后复制并粘贴它的块最容易到我之前创建的模板中。

# java - 如何获取运行我的 Web 应用程序的用户的 Windows 登录用户名？

> ID：11988672
> 
> 赞同：2
> 
> 时间：2012-08-16T13:50:48.353
> 
> 标签：java, javascript, servlets

我正在尝试在我的 Web 应用程序中获取用户的 Windows 用户名。任何人都可以建议如何获得它？

我正在开发一个网络应用程序。因此，如果用户正在访问我的应用程序，那么我需要获取用户的 windows id 和他的主机名。我尝试了几种不同的方法，但从未奏效。任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:02:49.027

Windows 用户详细信息不会以纯 HTTP 请求的形式发送，这使得您无法在没有其他数据的情况下从 Web 应用程序中的用户派生它们。但是，发送请求的主机名在请求标头中可用。

如果您仍想获取 Windows 用户详细信息，则必须做一些工作，例如要求用户以某种形式提供它们，或者，如果您可以访问用户的命名/目录服务，则可以找到一些东西通过他的 IP/主机名。不过，这是您在 Web 应用程序中通常不具备的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:00:27.717

在 IERY OLD(!) 版本的 Internet Explorer 中，URL 中的模式 %USER% 被登录用户名替换。但是对于当前的浏览器，这不再起作用了，这样很好。

使用 JAVA 小程序，您可以通过以下方式请求它：

```
System.getProperty("user.name") 
```

但我不知道这是否适合你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:07:24.453

我不确定是否能准确获取 Windows 用户名，但`HTML5 The System Information API`可能会提供一些有用的信息。浏览此[链接](http://www.w3.org/TR/system-info-api/)一次，您可能会发现它很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-01T15:12:16.217

对于 Intranet 案例看一下

[如何在 Java 中检索当前 Windows 登录用户以进行单点登录](https://stackoverflow.com/questions/4590227/how-to-retrieve-the-current-windows-logged-on-user-for-single-sign-on-purposes-i)

和

[你能在 PHP 中获得一个 Windows (AD) 用户名​​吗？](https://stackoverflow.com/questions/168610/can-you-get-a-windows-ad-username-in-php)

在现代浏览器的常见情况下，这似乎是故意不可能的：

[您的 Windows 或 Linux 用户名会暴露给网站吗？](https://security.stackexchange.com/questions/36728/can-your-windows-or-linux-username-be-exposed-to-websites)

# xml - Restful 服务，通过扩展输出类型

> ID：11988673
> 
> 赞同：0
> 
> 时间：2012-08-16T13:50:50.523
> 
> 标签：xml, json, rest, jersey, osgi

我们正在开发“宁静”的东西。我们在 OSGI（Adobe 的 CRX，包含 Apache Felix）上使用 Jersey。API 规范提出了一些处理冲突的 restful 请求的东西，比如如果客户端发送 header Accept: application/json 并且请求 url 是 http:// *** /myresource.xml，我们必须发回 json (Jersey将发送回xml）。

似乎主要人（非常高级的技术和知识渊博的人）说我们不应该使用扩展名，例如 .xml 或 .json 进行搜索（非资源），即这样做是违反“原则”的类似“http://myrest/search.json?q=abc”的东西。相反，我们应该做一些类似“http:// *** /search?output=json&q=abc”的事情（实现这样的规范只会让我们的生活变得艰难，因为操纵框架（Jersey）提供的东西并不有趣）。

你有什么意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:07:34.933

为什么要使用特殊的 URL？如果客户端发送 Accept: application/json 他应该得到 json。那么如何只使用`http://myrest/search?q=abc`

# spring - 将不同的服务实例注入控制器

> ID：11988677
> 
> 赞同：2
> 
> 时间：2012-08-16T13:51:11.880
> 
> 标签：spring, model-view-controller, code-injection, autowired

我有以下控制器和服务

```
@Controller
public class MyController
{
   @Autowired
   private MyService myService;

  @RequestMapping(method=RequestMethod.GET, value="/connect.do")
  public String connect(Model model)
  {
    invokeService();
    return  "xxx";
  }

  private void invokeService()
  {
        myService.test();
  }

}

@Service
public class MyService
{
 private int value1 = 200;
 private int value2 = 333;
 private String value3 ;
 private String value4 ;
 private String value5 ;
 ....

 public void test()
 {
        System.out.println(value1++);
        foo();
  }

 private void foo()
 {

 } 
```

}

当我使用 2 个浏览器连接到应用程序时，输出为“200”和“201”，这意味着 Spring 将相同的 MyService 实例注入控制器以进行不同的连接。

当我使用 2 个不同的连接访问应用程序时，我需要输出为“200”和“200”，因为我需要在“test()”和“foo()”之间共享 values1、values2、value3 等。春天怎么办？基本上，我希望 Spring 为不同的连接注入不同的实例。我在 Service bean 中尝试了 @Scope("prototype") ，但它不起作用。

我可以通过使用使其工作：

```
@Controller
public class MyController
{
    private void invokeService()
   {
        new MyService.test();
   }
} 
```

我只是想知道如何在春天做到这一点。

提出这个问题的另一种方法是：如何拥有多个控制器实例（每个用户连接一个），而不是一个控制器实例服务于所有连接？

编辑：通过使用以下代码和 2 个浏览器连接，我可以看到原型（输出：200 200 200 200）和单例（输出：200 201 202 203）的区别

```
private void invokeService() 
{ 
  myService = applicationContext.getBean( MyService.class ); 
  new MyService.test();
  myService = applicationContext.getBean( MyService.class ); 
  new MyService.test(); 
} 
```

但是当我将“applicationContext.getBean（MyService.class）”放在 postConstructor 中时：

```
public class MyController implements ApplicationContextAware {

private SearchService searchService;

@PostConstruct
public void init() {
    searchService = applicationContext.getBean( SearchService.class );
}

protected ApplicationContext applicationContext;

@Override
public void setApplicationContext( ApplicationContext applicationContext ) throws BeansException {
    this.applicationContext = applicationContext;
}

} 
```

并在 MyService 上使用“@Scope(BeanDefinition.SCOPE_PROTOTYPE)”，当我使用 2 个浏览器连接到应用程序时，输出仍然是“200”和“201”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:03:56.763

`@Autowired`不会与`@Scope("prototype")`您启用代理生成（这可能不是您想要的 - 它很快变得复杂）混合在一起。

`MyController` `ApplicationContextAware`改为：

```
public class MyController implements ApplicationContextAware {

    public MyService getMyService() {
        return applicationContext.getBean( MyService.class );
    }

    protected ApplicationContext applicationContext;

    @Override
    public void setApplicationContext( ApplicationContext applicationContext ) throws BeansException {
        this.applicationContext = applicationContext;
    }

} 
```

现在`@Scope(BeanDefinition.SCOPE_PROTOTYPE)`将按预期工作。

请注意，`MyService`每次调用`getMyService()`.

为什么你的方法（和我的旧方法）不起作用？`MyController`是一个单例，因此该字段`myService`只连接一次 - Spring 无法在您每次访问该字段时为您提供一个新的 bean 实例，原因有两个：

1.  这意味着 Spring 必须分析类的字节码以找到代码访问该字段的所有位置。
2.  它会以其他方式破裂。例如当你调用 bean 的两个方法时：

    我的服务.foo(); myService.bar(); // 你*真的*想要一个新的bean吗？

PS：如果您使用 Spring < 3.1.2，您将需要指定 bean 的 ID，因为`getBean(Class<?> type)`这些版本非常慢。

# php - 如何通过 Drive API 上传将 Excel 文件格式转换为 G-Sheet？

> ID：11988678
> 
> 赞同：10
> 
> 时间：2012-08-16T13:51:12.777
> 
> 标签：php, phpexcel, xlsx, google-drive-api

我可以毫无问题地通过 Drive API 上传和转换 CSV 文件，但是在发送 XLS（使用 PEAR XLS-Writer 渲染）或 XLSX（使用 PHPExcel 渲染）时，Drive API 会抱怨：

```
"Error calling POST https://www.googleapis.com/upload/drive/v2/files?convert=true&uploadType=multipart&key=123: (500) Internal Error" 
```

MIME 类型“application/vnd.ms-excel”显然比“application/vnd-excel”效果更好

当我用内容类型“application/vnd.openxmlformats-officedocument.spreadsheetml.sheet”写出 XLSX 时，情况完全一样……加载预览时，当 convert=true 时，它​​会卡住。

使用 MS Excel 创建文件并手动上传文件时，它工作正常。

我可以插入/更新、下载/打开文件（一切正常）——但我想转换它们。

通过执行所有测试，我猜问题与创建的文件格式或 MIME 类型有关。

转换可能失败的任何提示......

“有人设法转换渲染的 XLS/XLSX 吗？”

问题基本上是：为了转换为 gSheet，预期的文件格式 + MIME 类型是什么？

我会接受任何关于赏金的答案，它提供了一种将多维数组转换为具有多个页面的 gSheet 的方法，以防它（还）不能通过 Drive API（肯定是首选方式）。

这是一个*Google Drive API*问题 - 没有可用的单独标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:14:34.527

最快速的是将数组呈现到 Excel 2007 并在桌面上安装 Google Drive App 以访问数据。Spreadsheets API 无法创建文档，需要使用 Docs API 来创建；目前 PHP 的 API 包装器不支持这两个端点 - 像这样我也可以修改文件。及时努力：1h。

更新：当我用 Excel2007 渲染 XLSX 时，转换失败。当我用 MS-Excel 和“另存为”打开同一个文件时，我什至可以通过 Drive API 转换它。

解压缩文件并进行比较时，我注意到了一些事情：

a) MS-Excel 使用值 '0/1' 而不是 'false/true'

b) 目录“xl/worksheets/_rels”被删除（可能没用？）。

c) XML 的行尾从 UNIX 转换为 DOS。

d) MS-Excel 将所有空单元格添加到 XML - PHPExcel 没有写出。

e）关系ID似乎发生了变化......代码中有一些+3计算？

问题是，生成的文件格式与 Drive API 的 XML 解析器不匹配。

我仍然不确定生成的文件格式有什么问题，但是用 MS-Excel 本地创建的 XML 文件修补呈现的 XLSX 文件使其工作：

```
/* how-to patch the generated XLSX: */

$zip = new ZipArchive();
$zip->open($xlsx_path);
$zip->extractTo($export_dir.'temp');
$zip->close();

$this->deleteDir($export_dir.'temp/xl/worksheets/_rels');

$files =array(
   '_rels/.rels',
   'docProps/app.xml',
   'docProps/core.xml',
   'xl/workbook.xml',
   'xl/_rels/workbook.xml.rels',
   'xl/theme/theme1.xml'
);
foreach($files as $file){
   copy($export_dir.'template/'.$file, $export_dir.'temp/'.$file);
}

unlink($xlsx_path);

if($zip->open($xlsx_path, ZIPARCHIVE::CREATE)) {
$source = str_replace('\\', '/', realpath($export_dir.'temp'));
if(is_dir($source) === true) {
    $files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($source), RecursiveIteratorIterator::SELF_FIRST);
    foreach ($files as $file) {
        $file = str_replace('\\', '/', $file);
        if(in_array(substr($file, strrpos($file, '/')+1), array('.', '..')) ){continue;}
        $file = realpath($file);
        if(is_dir($file) === true){$zip->addEmptyDir(str_replace($source . '/', '', $file . '/'));}
        else if(is_file($file) === true){
              $zip->addFromString(str_replace($source . '/', '', $file), file_get_contents($file));
           }
        }
    }
    else if(is_file($source) === true) {
       $zip->addFromString(basename($source), file_get_contents($source));
    }
    $zip->close();
} 
```

单元格格式不太合适 - 但转换和预览工作正常。

甚至可以从修补中跳过一些 XML 文件，而另一些则使其中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:33:00.850

您可以使用该应用程序或 Google Drive 的 SDK 将 Excel 文档上传到 Google Drive，但我认为 Google 还没有提供任何转换文件的方法。

可能值得向 Google 团队建议文件转换？我个人从未见过它需要它，因为 Excel 工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T02:18:48.590

在最后一部分替代方法中，您可以简单地使用电子表格 API 直接写入电子表格[https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)。这可能会给您带来增量更新的有益副作用。

例如。

*   [https://developers.google.com/google-apps/spreadsheets/#creating_a_spreadsheet](https://developers.google.com/google-apps/spreadsheets/#creating_a_spreadsheet)
*   [https://developers.google.com/google-apps/spreadsheets/#adding_a_worksheet](https://developers.google.com/google-apps/spreadsheets/#adding_a_worksheet)
*   [https://developers.google.com/google-apps/spreadsheets/#adding_a_list_row](https://developers.google.com/google-apps/spreadsheets/#adding_a_list_row)

# android - 为谷歌地图设置 onclickListener 而不覆盖前一个

> ID：11988683
> 
> 赞同：0
> 
> 时间：2012-08-16T13:51:24.040
> 
> 标签：android, google-maps

```
private LocationManager manager;
private TextView tv;
private MapController control;
private GeoPoint chosen = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.placechooser);
    final MapView map = (MapView) findViewById(R.id.gmap);
    tv=(TextView) findViewById(R.id.textView1);
    map.setBuiltInZoomControls(true);
    map.setOnTouchListener(new OnTouchListener() {
                public boolean onTouch(View v, MotionEvent event) {
                    chosen = map.getProjection().fromPixels(
                                                  (int) event.getX(), (int) event.getY());
                    tv.setText((chosen.getLatitudeE6() / (Math.pow(10,6)) + "," + (chosen.getLongitudeE6() / (Math.pow(10,6)))));
                    return true;
            }
    }); 
```

此代码片段有效，我可以看到谷歌地图，当我按下地图上的某些点时，我确实在我的 TextView 上得到了预期的结果，但地图没有移动并且没有响应，我猜是内置的 onclicklistener被我的覆盖了我该如何解决这个问题？

我尝试过的事情：

1.  我尝试寻找一个 getOnClickLisetener 来保留它并在我的点击监听器上激活它，但没有这样的方法

2.  我尝试创建 MapOverlay 类并将触摸功能复制到它的 onTouch 方法，不仅地图没有移动，我还从 map.getProjection() 接收到空结果。

我该如何克服呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:56:50.973

Try

```
control = map.getController(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:05:29.047

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:59:19.077

创建扩展 Mapview 的 CustomMapview。

在其中，覆盖 onInterceptTouchEvent(MotionEvent ev) 方法。

像这样：

```
public boolean onInterceptTouchEvent(MotionEvent ev) {
        //your logic

        return super.onInterceptTouchEvent(ev);
    } 
```

在您的逻辑中，您可以触发您的自定义侦听器，这将通知您的活动已按下哪个坐标，以便您可以相应地更新您的文本视图

# facebook - 在页面标签应用中查看推荐 Facebook 页面

> ID：11988685
> 
> 赞同：-1
> 
> 时间：2012-08-16T13:51:34.750
> 
> 标签：facebook, iframe, facebook-apps

假设我有一个 Facebook 页面选项卡 (iframe) 应用程序，我想连接到多个 Facebook 页面，因此用户可以通过 1 个以上的 Facebook 页面进入应用程序。现在我的问题是；有没有办法查看他们是通过 Facebook 页面 A 还是通过 Facebook 页面 B 访问了页面选项卡应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:56:07.380

是的你可以

使用**页面签名的请求**，你可以得到 facebook Pageid 和 userid

在此处获取页面签名请求文档 [http://developers.facebook.com/docs/authentication/signed_request/](http://developers.facebook.com/docs/authentication/signed_request/)

# apache - 正确使用 Header 集 Connection Keep-Alive (Apache)

> ID：11988686
> 
> 赞同：3
> 
> 时间：2012-08-16T13:51:36.427
> 
> 标签：apache, header, cdn, keep-alive

```
<ifModule mod_headers.c>
   Header set Connection keep-alive
</ifModule> 
```

为了使文件重新加载更快一点，服务器需要`Keep Alive`在 Apache 中启用。不过有些问题：

Q1）这三行在哪里（htacces的顶部或底部）有关系吗？

Q2）如果我在上面和下面省略了 ifModule ，`Header set Connection keep-alive`那么它似乎仍然可以工作，所以有必要/ ifModule 做什么？

Q3）在我的 htacces 的底部已经有一个部分，`ifModule mod_headers.c`里面有各种 FilesMatch（静态缓存每个文件类型的文件，如 css js html 等。可以`Header set Connection keep-alive`进去吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:52:51.633

Q1) 仅当文件中有其他行可能覆盖它时才重要。一般情况下，最后来的都是赢家。

Q2)`ifModule`是一个基本条件，允许您指定配置是否已加载指示的模块

Q3) 是的，它可以进去。`ifModule`条件是有条件的，所以除非你有一个相当复杂的依赖于模块的配置，否则对于特定文件中的任何给定模块，你只需要一个块

# php - 从未收到带有附件的 PHPMailer

> ID：11988688
> 
> 赞同：1
> 
> 时间：2012-08-16T13:51:42.037
> 
> 标签：php, phpmailer

我正在尝试使用`phpmailer`.

```
include_once('/home/site/PHPMailer/class.phpmailer.php');

$mail             = new PHPMailer();
$body             = $mail->getFile('contents.html');
$body             = eregi_replace("[\]",'',$body);
$mail->IsSMTP();  // telling the class to use SMTP
$mail->Host     = "smtp.free.fr"; // SMTP server
$mail->IsSendmail(); // telling the class to use SendMail transport

$mail->From       = "name@sub.fr";
$mail->FromName   = "name";

$mail->Subject    = "subject";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$mail->AddAddress("sub@sub.net", "name");

$mail->AddAttachment("mylist.csv");             // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
} 
```

我收到“消息已发送！” 执行时，但从未收到任何电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:01:26.917

由于许多邮件提供商（例如 AOL 和雅虎）阻止了大量与垃圾邮件相关的 IP 地址，因此您发送电子邮件的用户很可能没有收到它。因此，如果您运行此 php 脚本的服务器在其黑名单上，则用户甚至不会将其接收到垃圾邮件文件夹。

检查您的 php 电子邮件日志。

[http://help.yahoo.com/l/us/yahoo/smallbusiness/webhosting/php/php-03.html](http://help.yahoo.com/l/us/yahoo/smallbusiness/webhosting/php/php-03.html)

此外，如果不是这种情况，请尝试确保您尝试包含的文件存在，并且您将正确的路径传递给该文件。就像@Waygood 所说，尝试查看它是否在没有附件的情况下发送。

# ember.js - Ember.js 中 CustomView 的当前实例

> ID：11988691
> 
> 赞同：2
> 
> 时间：2012-08-16T13:51:58.650
> 
> 标签：ember.js, ember-old-router

如何`TextView`在 Ember.js 应用程序中检索我的视图（定义为）的“当前实例”？

如果我理解正确，路由器将`textView`使用正确的上下文管理实例化（我可以在车把模板中访问它`{{content}}`）。基本上，我的消息应用程序中有几个联系人，我需要为每个联系人保存一系列消息。

看法：

```
App.TextView = Ember.View.extend({
    templateName : 'text',
    messages : [],
}); 
```

路由器：

```
send : Ember.Route.extend({
    route:'/send',
    connectOutlets:function (router) {
        var conversationController = router.get('conversationController'),
             contact = conversationController.get('content');
        // contact is my context, it's ok here
        conversationController.connectOutlet('text', contact);
    }
)}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:13:11.997

在控制器`connectOutlets`上调用时，会创建 a 并将其设置为 上的属性，并使用 Outlet 的名称：`conversationController``TextView``conversationController`

如果 Outlet 没有名称，它将被称为“视图”：

# html - 选择器后的 IE8 CSS

> ID：11988696
> 
> 赞同：2
> 
> 时间：2012-08-16T13:52:06.677
> 
> 标签：html, css, internet-explorer-8

CSS

```
.main blockquote p:first-child:before {
    content: '“';
    position: absolute;
    top: 7px;
    left: 0;
}

.main blockquote p:last-child:after {
    content: '”';
    float: right;
    position: absolute;
    bottom: -9px;
    right: 7px;
} 
```

编码

```
<blockquote>
    <p>A quote about many wonderful things...</p>
</blockquote> 
```

这适用于大多数浏览器......在 IE8 中，我只得到之前的报价......我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:54:36.673

`last-child`不支持ie8。你必须使用 jquery 这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:55:24.613

IE8 和更早版本不支持 :last-child 选择器。 [http://www.w3schools.com/cssref/sel_last-child.asp](http://www.w3schools.com/cssref/sel_last-child.asp) 使用一些 Jquery 代码

# vaadin - 应用线程上下文设计模式

> ID：11988698
> 
> 赞同：0
> 
> 时间：2012-08-16T13:52:10.337
> 
> 标签：vaadin

我正在尝试使用这个概念：

[https://vaadin.com/forum/-/message_boards/view_message/212776](https://vaadin.com/forum/-/message_boards/view_message/212776)

我上周在 vaadin 板上发布了这个问题，但我仍然没有高兴，所以我想看看你们中是否有人有想法。在他展示代码的帖子中，他在前面的句子中提到：

> 此外，与 ContextHelp 相关的重要一点是将 ContextHelp 的一个实例附加到应用程序主窗口，并通过 App ThreadContext 模式让代码可以访问它。

我找不到任何说明该模式是什么以及如何实现它的文档。你们有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:34:05.263

I think he refers to the ThreadLocal pattern. Book of Vaadin has a section about it, see [12.14.3\. ThreadLocal Pattern](https://vaadin.com/book/-/page/advanced.global.html).

# c# - 这个 c# 定义的解释：function_name(this class_name namevar)

> ID：11988701
> 
> 赞同：-2
> 
> 时间：2012-08-16T13:52:28.830
> 
> 标签：c#

我正在寻找有关此结构的信息，但找不到；因此，如果有人有时间解释这一点或指向一些解释它的 URL。

我在函数 sin web C# 应用程序中找到了这个定义，例如：

```
 public static class PrincipalExtensions
{
    public static Site.Web.Models.SiteIdentity SiteIdentity(this System.Security.Principal.IPrincipal principal)
    {
       .....
       }

 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T13:53:35.537

这是一种扩展方法。有关详细信息，请参阅以下文章：http: [//msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

短版：即使您不能（或不想）从该类继承，此构造使您能够使某些方法可用于在类实例上调用。它不会让您访问受保护或私有成员/字段/方法。

最值得注意的用法：System.Linq 命名空间中 IEnumerable / IQueryable 的扩展方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:55:08.547

这是[IPrincipal的](http://msdn.microsoft.com/en-us/library/system.security.principal.iprincipal.aspx)[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977%28v=vs.100%29.aspx)，它返回自定义类型的对象。 `Site.Web.Models.SiteIdentity`

> 主体对象表示代表其运行代码的用户的安全上下文，包括该用户的身份 (IIdentity) 和他们所属的任何角色。

# python - 用于捕获仅有时存在的组的正则表达式

> ID：11988702
> 
> 赞同：2
> 
> 时间：2012-08-16T13:52:32.223
> 
> 标签：python, regex, grouping

我有一组文件名，例如：

```
PATJVI_RNA_Tumor_8_3_63BJTAAXX.310_BUSTARD-2012-02-19.fq.gz
PATMIF_RNA_Tumor_CGTGAT_2_1_BC0NKBACXX.334_BUSTARD-2012-05-07.fq.gz 
```

我想要一个可以捕获“_”字符之间的每个组的单个正则表达式（在 python 中，仅供参考）。但是，请注意，在第二个文件名中，存在第一个文件名中不存在的组。当然，可以使用字符串拆分等，但我想用一个正则表达式来做到这一点。第一个文件名的正则表达式类似于：

```
(\w+)_(\w+)_(\w+)_(\d)_(\d)_(\w+)\.(\d+)_(\S+)\.fq\.gz 
```

第二个将是：

```
(\w+)_(\w+)_(\w+)_(\w+)_(\d)_(\d)_(\w+)\.(\d+)_(\S+)\.fq\.gz 
```

我希望正则表达式组在存在可选组时为空，并在存在可选组时包含可选组（以便稍后我可以使用它来构造带有 \4 的新文件名）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T13:55:37.237

To make a group optional, you can add `?` after the desired group. Like this: (\w+)?

But your example has an underscore that should be optional as well. To deal with it, you can group it together with optional group.

```
((\w+)_)? 
```

However this will add a new group to your match results. To avoid it, use a non-matching group:

```
(?:(\w+)_)? 
```

The final result will look like this:

```
(\w+)_(\w+)_(\w+)_(?:(\w+)_)?(\d)_(\d)_(\w+)\.(\d+)_(\S+)\.fq\.gz 
```

# php - 使用 PHP 从 json 中获取未命名（？）数据

> ID：11988708
> 
> 赞同：-1
> 
> 时间：2012-08-16T13:52:44.197
> 
> 标签：php, json

我这里有点麻烦...

我正在尝试从[此处的 json 文件中获取一些值，](http://battlelog.battlefield.com/bf3/weaponsPopulateStats/250430234/1/)并且可以在[此处](http://jsonformatter.curiousconcept.com/)对其进行格式化。

json 文件如下所示：

```
{
"type": "success",
"message": "OK",
"data": {
"mainWeaponStats": [
{
"category": "Machine guns",
"timeEquipped": 3507,
"startedWith": null,
"code": "mgRPK",
"headshots": 18,
"name": "RPK",
"kills": 100,
"deaths": null,
},
{
"category": "Handheld weapons",
"timeEquipped": 5452,
"startedWith": null,
"code": "wahUGL",
"headshots": 1,
"name": "Underslung Launcher",
"kills": 108,
"deaths": null,
},
{
"category": "Sniper rifles",
"timeEquipped": 307,
"startedWith": null,
"code": "srMK11",
"headshots": 0,
"name": "MK11",
"kills": 2,
"deaths": null,
}, 
```

等等。

我想抓住其中一件物品的杀戮。意思是我想给出一个像“Underslung Launcher”这样的参数并返回108。在这种情况下，“Underslung Launcher”。我正在寻找这样的代码：

```
$gamemode = $decode['data']['topStats']['mapMode']; 
```

但如果有人知道更好的方法，请告诉我。由于列表中的项目没有“名称”，与“数据”和“mainWeaponStats”不同，我真的不知道该怎么做。

编辑：这是到目前为止的相关代码：

```
$weaponstats = "http://battlelog.battlefield.com/bf3/weaponsPopulateStats/" . $bf3id . "/1/";
$content = file_get_contents($weaponstats);
$decode = json_decode($content, true);

$mainweaponstats = $decode['data']['mainWeaponStats']; 
```

如您所见，我很难学习 Json。我正在尝试阅读它，但截至目前，我无法弄清楚这一点。

我真的不知道该怎么做，因为我试图找到的值在同一个组内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:15:05.300

```
$mainweaponstats = $decode['data']['mainWeaponStats']; 
```

这是一个对象数组（数组，因为您传递`,true`给`json_decode`）。只需遍历此内容即可找到您想要的内容。

```
$search = 'Underslung Launcher';
$kills = 0;
foreach($mainweaponstats as $w){
    if($w['name'] === $search){
        $kills = $w['kills'];
        break;
    }
}
echo $kills; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:20:40.657

```
<?

$name = "Underslung Launcher";

$json = file_get_contents("json.php");
$dec = array();
$dec = json_decode($json,true);

$datas = $dec['data']['mainWeaponStats'];

foreach($datas as $data)
{
    if($data['name']==$name) {
        echo $data['kills'];
        break;
    }
}
?> 
```

# html - Duplicate Element IDs from AJAX Loaded Content

> ID：11988709
> 
> 赞同：1
> 
> 时间：2012-08-16T13:52:44.617
> 
> 标签：html

I'm having an issue where I'm loading 3 DIV's from an AJAX source. The returning HTML looks a little like:

```
<div>
  <label for="firstName">First Name</label>
  <input id="firstName" name="firstName"....
</div> 
```

So imagine this block duplicated 3 times in the same DOM. The problem is when I click on the label in the 3rd loaded DIV, its highlighting the text box in the 1st loaded DIV. So now what I have are 3 blocks of HTML where the ID's are clashing.

Does anyone know of any work around for this?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:15:33.887

具有相同 id 的多个元素不符合标准。因此，IE、Firefox 以一种方式运行，而 Chrome 以另一种方式运行。

一种方法是在从 AJAX 源加载 id 时对其进行修改。您可以提供一个占位符 id `id="UNIQUE_id"`，然后使用where可能只是一个连续递增的数字......`.html().replace(/UNIQUE_/g,`**`something_unique`**`));`**`something_unique`**

[html](/questions/tagged/html "显示标记为“html”的问题") [html5](/questions/tagged/html5 "显示标记为“html5”的问题")

# ios - black screen - superview is nil in viewWillAppear

> ID：11988711
> 
> 赞同：9
> 
> 时间：2012-08-16T13:52:47.720
> 
> 标签：ios, objective-c, view, superview

I have an application created from the tabbed application template. (ARC, iOS 4)

*   There are several tabs and there is a button on the 2\. tabs viewcontroller.view(ViewCont2).
*   This button loads another viewcontroller's(ModalViewCont) view by presentModalViewController method.
*   There is a close button on ModalViewCont which calls dismissModalViewControllerAnimated.
*   In viewDidDisappear of ViewCont2, i am setting self.view = nil and other outlets to nil to unload the view so it will be fresh loaded next time it appears on screen. I am doing this because it inherits from a base class(BaseViewCont) which initializes some general properties of the view controller and adds some buttons, labels etc. in viewDidLoad method. So, ViewControllers that inherit from this base class may configure those properties differently as they wish in their viewDidLoad method.

**Problem**

Now, when ModalViewCont on screen, pressing the Home button to put application in background and after getting the application back, closing the ModalViewCont does not bring back the ViewCont2's view but a black screen with the tabbar at the bottom. The same thing happens without putting the application background/foreground; if other tabs tapped before tapping the 2\. tab.(**EDIT :** This happens only if self.view set to nil in viewWillDisappear instead of viewDidDisappear.)

I determined that ViewCont2 loads a new view (checked it's reference) but view's superview is nil so the new view is not displayed but a black screen.

**Things that did not work**

*   Using [self.view removeFromSuperview]; before setting self.view=nil,
*   In viewWillAppear adding view to the parent; [self.parentViewController.view addSubview:self.view]; This one did not work smoothly, view placed slightly up of the screen. This is because there are several other superviews in the hierarchy.

**Solutions i considered;**

*   1- If superview is nil in viewDidLoad, it becomes available in viewWillAppear **(assumption)**. So, viewWillAppear method of ViewCont2 could be used to get the superview loaded correctly by the following;

_

```
if (self.view.superview == nil)
{
    self.tabBarController.selectedViewController = nil;
    self.tabBarController.selectedViewController = self;
} 
```

*   2- viewWillAppear method of base class could be used instead for initialization so there is no need to unload the view. So, performance could be optimized, it will not be unloaded each time view disappears. Also, it would be better to perform initialization only once by checking a flag, instead of performing it every time it appears.

**Questions**

*   1- Why does not the superview restored? What should i do for it? (This is the main problem i want to understand and solve instead of trying alternatives...)
*   2- Am i doing something wrong by assigning nil to view for unloading it? If so, how should i unload the view properly in such case like this(tabbed application)?
*   3- Is anything wrong with the **1\. solution**? Does it seem like a kludge? Is that **assumption about superview and viewWillAppear** correct?

**EDIT :** It seems that when viewDidLoad is called earlier than it should(i.e when view nilled in viewWillDisappear instead of viewDidDisappear), superview is not set.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T21:46:55.217

看起来很奇怪，但是您的建议（1）确实是解决此问题的正确解决方法：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (!self.view.superview) { // check if view has been added to view hierarchy
        self.tabBarController.selectedViewController = nil;
        self.tabBarController.selectedViewController = self;
    }
} 
```

您的第二个建议对性能有好处（因为视图加载是一项昂贵的操作） - 但它不会解决问题。在以下情况下，您也可以在不将视图设置为 nil 的情况下以黑屏结束（在 iOS 模拟器中进行测试）：

1.  打开模态视图
2.  模拟内存警告 -> 这将卸载 tabbarcontroller 中的视图
3.  按主页按钮并再次打开应用程序
4.  关闭模态视图->黑屏

通常，您可以假设在 viewDidLoad 中设置了视图属性，并且在 viewWillAppear + viewDidAppear 中，视图已添加到视图层次结构中；所以那时superview应该在那里（这里superview是类UIViewControllerWrapperView的tabbarcontroller的私有视图）。然而，在我们的例子中，虽然视图被重新加载（在应用程序恢复时），但它并没有添加到视图层次结构中，从而导致黑屏。这似乎是 UITabBarController 中的一个错误。

解决方法强制再次执行外观选择器。所以 viewWillAppear 将被再次调用，这一次有一个超级视图。viewDidAppear 也会被调用两次！

将 self.view 设置为 nil 是可以的，但在大多数情况下不需要。让系统决定何时卸载视图（iOS 可以在内存不足时卸载视图）。视图控制器代码的设计方式应使 UI 可以随时重新配置而无需重新加载视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T22:05:01.030

您无法完全控制何时加载和卸载视图，也不应该自己手动加载/卸载视图。

相反，您应该将视图加载/卸载视为完全取决于您`UIViewController`的事情，您只负责：

*   通过将 UIViewController 子类与 nib 文件相关联或`loadView`手动实现来实现实际加载。
*   可选地实现`viewDidLoad`,`viewWillUnload`和`viewDidUnload`回调，当视图控制器决定加载/卸载其视图时，它们会调用*它们。*

*您无法完全控制何时*调用上述回调，这一事实暗示了它们应该包含哪些内容。

在您的情况下，如果我理解正确，每当您的 ViewCont2 的视图消失时，您都希望将其重置，以便当它重新出现时它将处于某种“干净”状态。我会以某种方法实现此状态重置，并从 和 调用`viewDidLoad`它`viewDidDisappear`。或者，您可以在`viewWillAppear`.

或者您可能只想在点击当前按钮时清理 ViewCont2 的视图？在这种情况下，请在 中`viewDidLoad`和点击按钮时清除视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T02:26:13.167

我提供的是，当模态视图控制器处于活动状态并且您关闭视图时，您向导航视图控制器 viewControllers 添加一个新视图，然后该视图被告知删除其前身。

你可以玩[我的项目](http://dl.dropbox.com/u/60414145/ModalPopper.zip)，看看你认为它是否适合你。

编辑：我对所选答案的评论是，这种技术现在显然有效，但我自己很难遵循它。我的项目中的代码以简单直接的方式使用系统 - 当模态视图被告知关闭自身时，它会调用一个方法（可以在任何类中）将新视图添加到导航控制器的数组中，然后自行关闭. 有一段时间，同时有两个视图控制器，新的堆叠在旧的之上。当新的视图控制器出现时，基于看到一个标志，它会在后台默默地从导航栏的堆栈中删除不需要的视图控制器，然后噗，它就消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T15:52:03.683

我找到了 UITabBarController 错误的实际解决方案（内存警告，应用程序进入后台/前台，关闭模式）。使用 UITabBarController 作为根视图控制器是该错误的原因。因此，我们可以使用另一个视图控制器作为根视图控制器并从中显示标签栏。我已经在 iOS 5.1 模拟器上对其进行了测试。

当然，额外的 UIViewController 的开销是有争议的。此外，它违反了 Apple 文档；

> 与其他视图控制器不同，标签栏界面永远不应安装为另一个视图控制器的子级。[UITabBarController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // A root view controller other than the actual UITabBarController is required.
    self.window.rootViewController = [[UIViewController alloc] init];
    [self.window makeKeyAndVisible];    
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, ..., nil];

    [self.window.rootViewController 
        presentModalViewController:self.tabBarController animated:NO];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T16:56:08.660

我找到了其他解决方案；

*   第一个导致警告：“应用程序窗口应该在应用程序启动结束时有一个根视图控制器”尽管有根视图控制器。

*   虽然看起来很笨拙，但临时视图控制器将与第一个一起发布。

*   第二个似乎更合理。

.

```
- (void) tabBarBlankScreenFix1
{
    self.window.rootViewController = [[UIViewController alloc] init];
    [self.window makeKeyAndVisible];
    [self.window addSubview:self.tabBarController.view];            
    self.window.rootViewController = self.tabBarController;

}

- (void) tabBarBlankScreenFix2
{
    self.window.rootViewController = [[UIViewController alloc] init];
    [self.window makeKeyAndVisible];
    [self.window addSubview:self.tabBarController.view];
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-19T00:04:03.600

我认为您不应该将视图分配为零。如果我理解正确，您希望在每次视图出现时刷新/重新加载内容。因此，与其将视图设置为 nil，不如尝试刷新它。您可以通过添加：

```
 - (void)viewWillAppear{
    [self.view setNeedsDisplay];} 
```

请告诉我我是否正确理解您的问题

# testing - Mockito Liferay 服务测试

> ID：11988715
> 
> 赞同：0
> 
> 时间：2012-08-16T13:52:54.690
> 
> 标签：testing, junit, liferay, mockito

我尝试使用 PowerMock 测试由服务生成器生成的 LocalServiceUtil 类，但总是从 Util 的方法中获取“null”或“0”。

测试班

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(EntityLocalServiceUtil.class)
public class EntityTest {

        @Test
        public void testGetAnswer() throws PortalException, SystemException {
                PowerMockito.mockStatic(EntityLocalServiceUtil.class);
                assertEquals("hello", EntityLocalServiceUtil.getHello());
        }
} 
```

实用程序类包含

```
public static java.lang.String getHello() {
            return getService().getHello();
} 
```

并且此服务在已部署的 portlet 上正常工作。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:09:52.453

您忘记了模拟方法：

```
 @Test
    public void testGetAnswer() throws PortalException, SystemException {
            PowerMockito.mockStatic(EntityLocalServiceUtil.class);
            when(EntityLocalServiceUtil.getHello()).thenReturn("hello"); // <- here
            assertEquals("hello", EntityLocalServiceUtil.getHello());
    } 
```

# sqlite - How do i make a join in linq using sqlite-net for Metro WinRT apps?

> ID：11988720
> 
> 赞同：1
> 
> 时间：2012-08-16T13:53:09.843
> 
> 标签：sqlite, windows-8, microsoft-metro, windows-runtime

I've seen that if i want to make a linq query using sqlite-net if i do:

```
var query = conn.Table<TableName1>().Where(x => x.Field=="Val1"); 
```

i can apply a where to the select; is it possible to do something similar for more than 1 table, applying a join between TableName1 and TableName2 ? If it is possible, which is the right syntax for the linq query?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:53:54.277

使用查询：

```
var query = string.Format (
                @"
                SELECT artist.Name as ArtistName, album.Id as AlbumId, album.Title as AlbumTitle,
                    track.Id as TrackId, track.Name as TrackName, track.Number as TrackNumber
                FROM Track track
                LEFT OUTER JOIN Album album
                ON track.AlbumId = album.Id
                LEFT OUTER JOIN Artist artist
                ON album.ArtistId = artist.Id
                WHERE track.Id = '{0}'
                "
                ,trackId.ToString ());

            var trackViewModels = await QueryAsync<TrackViewModel> (query);
            return trackViewModels.FirstOrDefault(); 
```

# sql - 在多个数据库上运行 sql update 语句

> ID：11988723
> 
> 赞同：1
> 
> 时间：2012-08-16T13:53:47.503
> 
> 标签：sql, sql-server-2008

我有以下 SQL 更新：

```
UPDATE [Shop_Benelux_2012].[dbo].[StringResource]
   SET [ConfigValue] = ''
 WHERE [Name] = 'default.aspx.1'
GO 
```

我有 10 个数据库需要在其上运行此语句。

我的数据库看起来像这样：

*   Shop_DE_2012
*   Shop_FR_2012 ...

我如何在所有数据库上运行该语句，而无需在 Management Studio 中的每个数据库上手动运行它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:59:29.263

又快又脏

```
EXEC sp_MSForEachDB '
USE ?
IF DB_NAME() LIKE ''Shop%''
   UPDATE [dbo].[StringResource]
   SET [ConfigValue] = ''''
 WHERE [Name] = ''default.aspx.1''
' 
```

注意：我使用 2 部分名称，没有“Shop_Benelux_2012”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:58:10.073

我有一个将所有数据库包装在一起的视图，允许我通过一个查询从其中任何一个数据库中选择、插入、更新或删除。这些被称为分区视图。你会想读这个。

[http://technet.microsoft.com/en-us/library/ms190019(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms190019%28v=sql.105%29.aspx)

# ruby-on-rails - Rails 3 + ActiveAdmin：如何让一个用户保存两个相互依赖的资源？

> ID：11988724
> 
> 赞同：1
> 
> 时间：2012-08-16T13:53:54.367
> 
> 标签：ruby-on-rails, model, activeadmin

我有 2 种模型，一种称为 Hotel，一种称为 HotelInfo。

当用户在 ActiveAdmin 中保存酒店资源时，我希望它强制用户在保存之前填写 HotelInfo 表单。

如果可能的话，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:45:16.460

这是一个示例代码，说明如何在活动管理员中将两个模型添加在一起。

```
 form do |f|

    f.inputs "Hotel" do
      f.input :name
    end

    f.inputs "Hotel Information", :for => [:hotel_info, f.object.hotel_info || HotelInfo.new] do |hotel_info_form|
      hotel_info_form.input :telephone
    end

    f.buttons
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:27:14.497

您可以使用`fields_for`助手将两种资源放在同一个表单上。确保您的父对象已`accepts_nested_attributes_for :hotelinfo`设置。

# powershell - Memory getting Eaten up Issue

> ID：11988726
> 
> 赞同：0
> 
> 时间：2012-08-16T13:54:02.120
> 
> 标签：powershell, distinguishedname, quest

I am trying to find recursively the groups on folders and their distinguished names (DN) through an extensive structure of directories / subdirectories on a NAS share.

I made code and *it works*, but *it is slow and gobbles up memory* for some reason.

**I am looking for help to understand what I might be doing wrong, or if there is a faster / less memory intensive way to do this.**

*   It seems to slow down where it takes each `$acct` and creates the `$acctsQADObject` with `Get-QADObject`.

*   I see 8-10 `$acct` per container (directory), and it takes about *5 seconds or more* to process each.

*   It seems like each iteration of `$acct` is caching something that it does not release, so each loop of `$acct` you can watch memory *increase by 0.02+ MB*.

*   I was popping off the `$acct` from `$accts` and trying to force `$acctsQADObject` to `$null` to try and get some memory to clear. It does not seem to help at all though. The `$groups` hash is then taken to another function to get the users for each group, but I think that is fine.

**Note:** The `Get-QADObject` was from quest.com, and their forum seems pretty silent, so I was hoping to find help here.

The code I have to date:

```
 $containers = @(Get-Item -Path $Path | ? {$_.psIscontainer})
    $containers += Get-ChildItem -Path $Path -Recurse | ? {$_.psIscontainer}

    if ($containers -eq $null) {break}
    while ($containers) {
        $container,$containers = $containers
        Write-Output "Container: " $container
        $accts=$null
        $accts=@()
        $accts = @((Get-ACL $container.fullname).Access)
        while ($accts) {
            $acct,$accts = $accts
            $acctsQADObject = $null
            $acctsQADObject = Get-QADObject -PageSize 1000 -DontUseDefaultIncludedProperties -SizeLimit 0 -Identity ([string]$acct.IdentityReference) 
            if ($acctsQADObject.ObjectClass -contains 'group') {
                $Name = $acctsQADObject.Name
                $DN = $acctsQADObject.DN
                $key = "$($Name)|$($DN)"
                if (!$groups.ContainsKey($key) -and $key -notcontains "Group|Member") {
                    Write-Output "Found first reference to a group: $($DN) assigned to directory $container"
                    $msg += "Found first reference to a group: $($DN) assigned to directory $container `n"
                    $groups.add($key,$DN)
                }
            }                           

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:43:26.273

为什么不使用`Get-QADGroup`代替`Get-QADObject`？这样你就可以保证得到一个组。然后，您可以从中提取 DN 属性。我写了一些对文件夹审计很有用的代码，听起来像是你正在尝试做的。它可以在[这里](https://stackoverflow.com/questions/11994787/possible-race-condition-in-multi-threaded-folder-acl-audit-powershell-script)的另一篇文章中找到。要获取组成员，您可以使用`Get-QADGroupMember $groupname -Indirect`.

# java - Test WEB service by HttpUnit

> ID：11988729
> 
> 赞同：1
> 
> 时间：2012-08-16T13:54:11.990
> 
> 标签：java, testing, http-unit

I have Java web project and test cases for servlet.Servlet is in other maven(not web) project and declaration for that servlet wrote in web.xml of web project. For testing I use HttpUnit.In this case when I call context.getRealPath("") from my servlet it returns the path of web project. Now i want to move test from web project to not web project(Where the servlet is).In ServletRunner i register the same web.xml but in this case context.getRealPath("") return path of not web project. How can i set the the context. P.S. The second(not web) project cannot be run separately.So context must be the context of web project

# c++ - stlportd.5.2.dll 和 stlportstld.5.2.dll 有什么区别？

> ID：11988739
> 
> 赞同：1
> 
> 时间：2012-08-16T13:54:31.227
> 
> 标签：c++, stl, stlport

编译[STLport](http://www.stlport.org/)后，在 bin 目录中得到了三个 .dll：一个用于发布（stlport.5.2.dll），另一个用于调试（stlportd.5.2.dll 和 stlportstld.5.2.dll）。我想知道为什么那里有两个调试 dll。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T06:09:21.603

`stlportstld*.dll`用于[STLport 的调试模式](http://www.stlport.org/doc/debug_mode.html)：

> 调试模式可让您在使用 STL 迭代器和算法的应用程序代码中发现非常隐蔽的错误。
> 
> 它执行迭代器有效性和所有权以及算法前提条件的运行时检查。当调试检查发现错误时，它会通过详细的诊断终止程序。
> 
> 调试模式下的 STLport 与发布模式下一样是异常安全和线程安全的。

`stlportd*.dll`是 的调试版本`stlport*.dll`，它没有提供额外的调试工具`stlportstld*.dll`（尽管它也可以“调试”）。

您也可以参考`stl\config\_auto_link.h`STLport 包中的内容来查看二进制文件之间的区别：

```
#  if defined (_STLP_DEBUG)
#    define _STLP_LIB_OPTIM_MODE "stld"
#  elif defined (_DEBUG)
#    define _STLP_LIB_OPTIM_MODE "d"
#  else
#    define _STLP_LIB_OPTIM_MODE ""
#  endif 
```

# sql - How to create a SQL hierarchy where the published version is immutable and changes are applied to a draft copy

> ID：11988744
> 
> 赞同：0
> 
> 时间：2012-08-16T13:54:43.293
> 
> 标签：sql, hierarchy

Would anyone have ideas on dealing with the following scenario?

I have a SQL system that stores hierarchical data which is then Published. Once the data is published it is not possible to edit the original hierarchy and any changes have to be made to a new Draft hierarchy when in turn will be published and so on.

As an example lets say I have a table of employees which references itself to store a hierarchy.

*   Employee
*   Id
*   Unique_Employee_Id (so I can track changes across hierarchies)
*   Name
*   ParentId

With the following structure that is currently published:

Bob (Id: 1, ParentId: null)

*   John (Id: 2, ParentId: 1)
*   Sarah (Id: 3, ParentId: 1)

Now I want to add a new node so currently what I am doing is I clone the hierarchy and all changes are now applied to this new hierarchy like so:

Bob (Id: 5, ParentId: null)

*   John (Id: 6, ParentId: 5)
*   Sarah (Id: 7, ParentId: 5)
*   Kevin (Id: 8, ParentId: 5)

My concern is that I know the hierarchy can go up to 2000 nodes or more and in reality there are many more tables that hang off each of those Employee nodes which would also need to be copied and I will start running into performance issues when performing updates to a hierarchy

A small text change to one item in the list results in the entire hierarchy and everything related to it getting cloned.

I am thinking that I am currently into a revision control type problem but I am unsure how to go about implementing it.

## Edit:

To expand on why the clone is happening, you can view both the draft and the prior published hierarchies at any point so I cannot add new nodes the existing published hierarchies I have to add them to a new version of the hierarchy. Also I cannot edit any nodes belonging to a published hierarchy for the same reason.

Currently I have implemented a clone method which works but I am interested in knowing if there is an alternative design I could use that would meet the requirements above without performing a deep clone on the hierarchy in order to make changes as I have concerns about the scalability of such a solution.

For example source control systems do not store complete copies of a project for every change that is made but can recreate document hierarchy at any given change set and I am wondering if there is a similar pattern to this I could implement in SQL that would perform better then a deep clone.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:29:07.630

After read your edited test, I think that a solution may be to create a new table to store 'draft' data:

```
Employee_draft
session_id   #because you share this table with other user sessions
temp_Id      #will be replaced where you commit changes
Name
ParentId     #foreign key to Unique_Employee_Id
CUD          #kind of operations: Create (new/insert), Update, Delete 
```

Then, changes are maded in temp table. UI (user interface) mix both tables to show user the changes. When user commit changes, app 'merge' draft table into real one if no conflicts are detected (concurrency), then delete all your session_id rows.

# r - 重新格式化r中的数据

> ID：11988746
> 
> 赞同：3
> 
> 时间：2012-08-16T13:54:46.067
> 
> 标签：r, dataframe, reorganize

我有以下类型的数据，尽管在实际数据集中，集合和个人的水平相当高：

```
set <- c(rep(1,6), rep(2,6))
Indvidual <- c(rep (c("IndvA", "IndvA", "IndvB", "IndvB", "IndvC", "IndvC"), 2))
leftposition <- c(10,  10,0 ,0,  0,   0,  40,     40,    30,  30,  20,  20 )
rightposition <- c(20,  20,20,20,  30,  30, 50,     50,    40,  40,  60,  60 )
leftmark <- c(     1, 3, 5,    7,    9,   11,  13,       15,     17,   19,   21 , 23 )
rightmark <- c( 2,    4,     6,    8,    10,   12,14,      16,  18,   20,   22,  24 )

myd <- data.frame (set, Indvidual,leftposition,rightposition, leftmark, rightmark)
myd

      set Indvidual leftposition rightposition leftmark rightmark
1    1     IndvA           10            20        1         2
2    1     IndvA           10            20        3         4
3    1     IndvB            0            20        5         6
4    1     IndvB            0            20        7         8
5    1     IndvC            0            30        9        10
6    1     IndvC            0            30       11        12
7    2     IndvA           40            50       13        14
8    2     IndvA           40            50       15        16
9    2     IndvB           30            40       17        18
10   2     IndvB           30            40       19        20
11   2     IndvC           20            60       21        22
12   2     IndvC           20            60       23        24 
```

在第一列是个人旁边的新数据集中，其余列都是唯一的（左位置，右位置）

```
sort (unique (c(leftposition, rightposition)))
[1]  0 10 20 30 40 50 60 
```

现在对于 set = 1，我想为个人添加值（注意每个个人已重复两次，这是预期的）。每个个体有两个值 - 一个添加到左侧（leftposition），另一个添加到右侧（rightposition）。实际要向左或向右打印的数据分别在leftmark 和rightmark 中。因此，对于第一组，有组织的数据如下所示：

![在此处输入图像描述](../Images/dae2457871ecd6dec2cc57bd2c801ea7.png)

然后 set2 （或 n 组数据）将被添加到同一个表中。结尾处的任何空白都将用 NA 或指定的任何值（例如“-”）填充。

![在此处输入图像描述](../Images/1b3572e97a86b4f944fee6e05da87c4d.png)

感谢您的帮助：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:37:58.053

```
library(reshape2)
library(plyr)
#Make indviduals unique
myd <- ddply(myd, .(set, Indvidual), transform, 
             Indvidual = paste(Indvidual, order(Indvidual), sep = "_"))

# bind positions together

myd_molten <- melt(myd, id.vars=c("set", "Indvidual"))
marks <- grep("mark", myd_molten$variable)
levels(myd_molten$variable) <- rep(c("left", "right"), 2)
myd_pos <- myd_molten[-marks,]
names(myd_pos)[4] <- "position"
myd_mark <- myd_molten[marks,]
myd_binded <- cbind(myd_pos, mark = myd_mark$value)

#cast it into the desired form and get the names right
#I could have done the names with gsub but I didn't want to mess with regexpr

ans <- dcast(Indvidual ~ position, value.var = "mark", data = myd_binded)
ans$Indvidual <- do.call(rbind, strsplit(ans$Indvidual, "_"))[,1]
ans

  Indvidual  0 10 20 30 40 50 60
1     IndvA NA  1  2 NA 13 14 NA
2     IndvA NA  3  4 NA 15 16 NA
3     IndvB  5 NA  6 17 18 NA NA
4     IndvB  7 NA  8 19 20 NA NA
5     IndvC  9 NA 21 10 NA NA 22
6     IndvC 11 NA 23 12 NA NA 24 
```

# r - 在R中将数据从一个数据帧扩展到另一个数据帧的多行

> ID：11988755
> 
> 赞同：3
> 
> 时间：2012-08-16T13:55:12.243
> 
> 标签：r, dataframe

我是 R 和这个列表的新手。我希望接下来的问题不是太基本或不了解情况。过去几个小时我一直在查看档案，但无济于事，所以我在这里发布。部分问题是我并不完全知道在引用我需要的功能时要使用的正确术语，这会使搜索变得困难。话虽如此，这就是我需要解决的问题：

我有一个如下所示的数据框：

```
 Subject Item Region   RT  
13     102    1  R1 1245  
14     102    4  R1 1677  
15     102    7  R1 1730  
25     103    1  R1  815  
26     103    4  R1  828  
27     103    7  R1  985  
1489     102    1  R2 356  
1490     102    4  R2 510  
1491     102    7  R2 544  
1501     103    1  R2 447  
1502     103    4  R2 486  
1503     103    7  R2 221  
... 
```

每个受试者对一个项目的多个区域都有一个 RT（反应时间）。每个主题看到多个项目。

我希望计算异常值，然后对它们进行规范化（尽管我真的不会担心这个线程中的解决方案）。作为第一步，我使用了一些简单的函数来计算每个主题的每个区域的平均值和 SD，并跨项目折叠（即（该主题在该区域中所有 RT 的平均值）：

```
Mean = with(test, aggregate(RT, by = list(Subject,Region),mean, na.rm=TRUE))  
SD = with(test, aggregate(RT, by = list(Subject,Region),sd, na.rm=TRUE)) 
```

然后我使用 cbind 并进行了一些重命名以将数据全部放在一个数据框中：

```
Subject Region      Mean         SD  
1       102  R1 1143.7778  202.25530  
2       102  R2  431.8611  125.84393  
9       103  R1  923.0833  179.51098  
10      103  R2  344.1667  146.51192  
... 
```

问题是我现在需要将所有方法与每个主题的正确区域相关联。也就是说，我想生成如下所示的输出（请注意，所有主题 102 区域 R1 具有相同的均值和 SD，但不同的 RT 等）：

```
Subject Item Region   RT Mean         SD  
13     102    1  R1 1245 1143.7778  202.25530  
14     102    4  R1 1677 1143.7778  202.25530  
15     102    7  R1 1730 1143.7778  202.25530  
25     103    1  R1  815 923.0833  179.51098  
26     103    4  R1  828 923.0833  179.51098  
27     103    7  R1  985 923.0833  179.51098  
1489     102    1  R2 356 431.8611  125.84393   
1490     102    4  R2 510 431.8611  125.84393  
1491     102    7  R2 544 431.8611  125.84393  
1501     103    1  R2 447 344.1667  146.51192  
1502     103    4  R2 486 344.1667  146.51192  
1503     103    7  R2 221 344.1667  146.51192 
```

似乎 merge 和 cbind 不会完成将一个值扩展和匹配到另一个值的工作。也许我需要使用融化或一些使用键的功能？

我希望有人可以向我指出相关功能供我阅读，以便我可以自己尝试，或者只是帮助一些代码。

谢谢阅读...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:17:00.457

`ddply`您可以使用包中的函数完成此任务`plyr`。使用`ddply`及`ave`作用：

```
test <- read.table(text="
Subject Item Region   RT  
13     102    1  R1 1245  
14     102    4  R1 1677  
15     102    7  R1 1730  
25     103    1  R1  815  
26     103    4  R1  828  
27     103    7  R1  985  
1489     102    1  R2 356  
1490     102    4  R2 510  
1491     102    7  R2 544  
1501     103    1  R2 447  
1502     103    4  R2 486  
1503     103    7  R2 221", header=T)

library(plyr)
ddply(test, .(Subject, Region), transform, Mean=ave(RT), SD=ave(RT, FUN=sd))
   Subject Item Region   RT      Mean        SD
1      102    1     R1 1245 1550.6667 266.03822
2      102    4     R1 1677 1550.6667 266.03822
3      102    7     R1 1730 1550.6667 266.03822
4      102    1     R2  356  470.0000 100.17984
5      102    4     R2  510  470.0000 100.17984
6      102    7     R2  544  470.0000 100.17984
7      103    1     R1  815  876.0000  94.62029
8      103    4     R1  828  876.0000  94.62029
9      103    7     R1  985  876.0000  94.62029
10     103    1     R2  447  384.6667 143.07457
11     103    4     R2  486  384.6667 143.07457
12     103    7     R2  221  384.6667 143.07457 
```

您可以`aggregate`像以前一样使用函数检查结果。

```
> with(test, aggregate(RT, by = list(Subject,Region),mean, na.rm=TRUE))  
  Group.1 Group.2         x
1     102      R1 1550.6667
2     103      R1  876.0000
3     102      R2  470.0000
4     103      R2  384.6667
> with(test, aggregate(RT, by = list(Subject,Region),sd, na.rm=TRUE))
  Group.1 Group.2         x
1     102      R1 266.03822
2     103      R1  94.62029
3     102      R2 100.17984
4     103      R2 143.07457 
```

如您所见，均值和标准差都由`Subject`和聚合`Region`到您的`data.frame`( `test`) 中。

**编辑**

如果要处理`NA`，您可能需要使用以下编辑后的代码：

```
ddply(test, .(Subject, Region), transform, 
      Mean=ave(RT, FUN = function(x) mean(x, na.rm=TRUE)),
      SD=ave(RT, FUN=function(x) sd(x, na.rm=TRUE))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T02:31:41.250

这可以使用`sqldf`

```
df1<-read.table(header=T,text="Subject Item Region   RT  
13     102    1  R1 1245  
14     102    4  R1 1677  
15     102    7  R1 1730  
25     103    1  R1  815  
26     103    4  R1  828  
27     103    7  R1  985  
1489     102    1  R2 356  
1490     102    4  R2 510  
1491     102    7  R2 544  
1501     103    1  R2 447  
1502     103    4  R2 486  
1503     103    7  R2 221")

df2<-read.table(header=T,text="Subject Region      Mean         SD  
1       102  R1 1143.7778  202.25530  
2       102  R2  431.8611  125.84393  
9       103  R1  923.0833  179.51098  
10      103  R2  344.1667  146.51192")  

library(sqldf)
sqldf("SELECT df1.*,df2.Mean,df2.SD from df1,df2
        WHERE df1.Region=df2.Region 
         GROUP BY df1.Region,df1.Subject,df1.Item")

#   Subject Item Region   RT      Mean       SD
#1      102    1     R1 1245 1143.7778 202.2553
#2      102    4     R1 1677 1143.7778 202.2553
#3      102    7     R1 1730 1143.7778 202.2553
#4      103    1     R1  815 1143.7778 202.2553
#5      103    4     R1  828 1143.7778 202.2553
#6      103    7     R1  985 1143.7778 202.2553
#7      102    1     R2  356  431.8611 125.8439
#8      102    4     R2  510  431.8611 125.8439
#9      102    7     R2  544  431.8611 125.8439
#10     103    1     R2  447  431.8611 125.8439
#11     103    4     R2  486  431.8611 125.8439
#12     103    7     R2  221  431.8611 125.8439 
```

它按地区、主题然后项目排序

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T16:49:06.223

你已经完成了 99% 的工作。您唯一需要做的就是“美化”您的`aggregate()`输出，以便它更礼貌地与`merge()`. 请注意，在下文中，您将指定输出列名称，以便它们可以轻松合并。

然后，我们使用`Reduce()`递归合并。

```
Mean = with(test, aggregate(list(mean = RT), 
                            by = list(Subject = Subject, Region = Region), 
                            mean, na.rm=TRUE))
SD = with(test, aggregate(list(sd = RT), 
                          by = list(Subject = Subject, Region = Region), 
                          sd, na.rm=TRUE))
Reduce(function(x, y) merge(x, y), list(test, Mean, SD))
#    Subject Region Item   RT      mean        sd
# 1      102     R1    1 1245 1550.6667 266.03822
# 2      102     R1    4 1677 1550.6667 266.03822
# 3      102     R1    7 1730 1550.6667 266.03822
# 4      102     R2    1  356  470.0000 100.17984
# 5      102     R2    4  510  470.0000 100.17984
# 6      102     R2    7  544  470.0000 100.17984
# 7      103     R1    1  815  876.0000  94.62029
# 8      103     R1    4  828  876.0000  94.62029
# 9      103     R1    7  985  876.0000  94.62029
# 10     103     R2    1  447  384.6667 143.07457
# 11     103     R2    4  486  384.6667 143.07457
# 12     103     R2    7  221  384.6667 143.07457
# merge(merge(test, Mean), SD) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T14:18:43.493

这是一种蛮力，但它有效

```
test <- data.frame(Subject=rep(c(102,103),2,each=3), Item=rep(c(1,4,7),4),Region=rep(c("R1","R2"),each=6), RT= c(1245,1677,1730,815,828,985,356,510,544,447,486,221))

Mean = with(test, aggregate(RT, by = list(Subject,Region),mean, na.rm=TRUE))  
SD = with(test, aggregate(RT, by = list(Subject,Region),sd, na.rm=TRUE))  

aa <- data.frame(test, Mean=0, SD=0)

for (i in 1:nrow(aa)) {
  for(j in 1:nrow(Mean)){
    if (aa$Subject[i]==Mean$Group.1[j] & aa$Region[i]==Mean$Group.2[j]) aa$Mean[i] <- Mean$x[j]
    if (aa$Subject[i]==SD$Group.1[j] & aa$Region[i]==SD$Group.2[j]) aa$SD[i] <- SD$x[j]
  }
} 
```

# iphone - 如何根据放置在ios sdk中的uiimage的坐标来获取视图的坐标？

> ID：11988763
> 
> 赞同：2
> 
> 时间：2012-08-16T13:55:41.587
> 
> 标签：iphone, ios4, uiimageview, uiimage

我有一个应用程序，用户从相机拍摄照片并将其放置在全屏图像视图上。现在用户可以在其上查看矩形/正方形视图并将覆盖视图的坐标/大小发送到服务器。问题是我根据屏幕尺寸获取视图的坐标，但我希望尺寸应该根据 imageview 上的图像，因为通常来自相机的图像比屏幕具有更大的分辨率。

请为我提供一种根据 uiimage 而不是屏幕获取覆盖视图大小的方法

编辑：例如：如果用户在图像中的人脸上绘制视图并将裁剪视图的坐标发送到服务器。那么如果坐标是根据屏幕而不是根据uiimage本身就很难与真实图像同步坐标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:26:54.460

答案很简单：

你有你的 UIImageView 的框架和你绘制的正方形的框架（都相对于`self.view`）

你只需要找到你的正方形的原点，相对于`UIImageView`.

只需减去：

```
//get the frame of the square
CGRect *correctFrame = square.frame;

//edit square's origin
correctFrame.origin.x -= imageView.frame.origin.x;
correctFrame.origin.y -= imageView.frame.origin.y; 
```

现在`correctFrame`是相对于 的正方形的框架`imageView`，而`square.frame`仍然相对于`self.view`（因为我们没有更改它）

要根据图像分辨率获取帧，请执行与上述完全相同的操作，然后：

```
float xCoefficient = imageResolutionWidth / imageView.frame.size.width;
float yCoefficient = imageResolutionHeight / imageView.frame.size.height;

correctFrame.origin.x *= xCoefficient;
correctFrame.origin.y *= yCoefficient;
correctFrame.size.width *= xCoefficient;
correctFrame.size.height *= yCoefficient; 
```

为什么：图像分辨率比 imageView.frame 大得多，所以你必须计算一个系数来调整你的正方形。

就这样！

# c# - ComboBox and KeyValuePair List not working correctly

> ID：11988766
> 
> 赞同：1
> 
> 时间：2012-08-16T13:55:44.127
> 
> 标签：c#, winforms

I have created a ComboBox on a [Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms) form. It is Databound to a column in a TableAdapter and the DataSource is a manually created KeyValuePair List. The problem is that when the form is displayed; the ValueMember is displayed in the ComboBox, not the DisplayMember. If you click the drop down, the Key List Values are displayed. When you make a selection, in the OnValidating method, the SelectedItem is -1.

I believe that the ComboBox is setup correctly. What have I done wrong?

```
this.cboFormat.DataBindings.Add(new System.Windows.Forms.Binding("Text", this.BindingSource, "Format", true, System.Windows.Forms.DataSourceUpdateMode.OnPropertyChanged));

InitializeComponent();

List<KeyValuePair<int, string>> loFormat = new List<KeyValuePair<int, string>>();
loFormat.Add(new KeyValuePair<int, string>(1, "Format 1"));
loFormat.Add(new KeyValuePair<int, string>(2, "Format 2"));
loFormat.Add(new KeyValuePair<int, string>(3, "Format 3"));

this.cboFormat.DataSource = new BindingSource(loFormat, null);
this.cboFormat.DisplayMember = "Value";
this.cboFormat.ValueMember = "Key"; 
```

* * *

Problem solved:

I found that if the Column in the DataBinding is an int, but the Value from the List is a string, then the problem above resulted. I changed the Databinding to a view that displayed the text from the lookup table the int tied to. The Key of the List would be the int from the lookup table. If that makes any sense.

```
SELECT DisplayMember FROM LookupTable AS LT INNER JOIN DataTable AS DT ON LT.Id = DT.LookupId. 
```

Then the KeyValuePair worked as expected.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:15:46.790

我将一个带有 ComboBox 和 Button 的窗口拼凑在一起。我完全看不出你描述的是什么。我的代码看起来像这样：

```
 BindingSource bs = new BindingSource();
    public Form1()
    {
        InitializeComponent();
        comboBox1.DataBindings.Add(new Binding("Text", bs, "Format", true, System.Windows.Forms.DataSourceUpdateMode.OnPropertyChanged));
        List<KeyValuePair<int, string>> loFormat = new List<KeyValuePair<int, string>>();
        loFormat.Add(new KeyValuePair<int, string>(1, "Format 1"));
        loFormat.Add(new KeyValuePair<int, string>(2, "Format 2"));
        loFormat.Add(new KeyValuePair<int, string>(3, "Format 3"));
        comboBox1.DataSource = new BindingSource(loFormat, null);
        comboBox1.DisplayMember = "Value";
        comboBox1.ValueMember = "Key";
    }

    private void comboBox1_Validating(object sender, CancelEventArgs e)
    {
        Console.WriteLine(comboBox1.SelectedItem);
    } 
```

验证处理程序具有正确的选定项，并且它初始化得很好。也许这是您的代码片段中没有显示的其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:04:00.790

你为什么使用 a`List<KeyValuePair<int,string>>`而不是 a `Dictionary<int,string>`？

无论如何，我确实相信您的问题在于，由于绑定是针对 KeyValuePair 列表完成的；代码会认为它应该在 List 中查找 DisplayMember 的值（即，不是 KeyValuePair）并发现 Value 是 KeyValue 并且没有找到任何 Key，因此它会进行一些奇怪的解析（阅读：不确定关于为什么你得到-1）。认为从`List<KeyValuePair<int,string>>`字典切换可能会解决它。

# internet-explorer - How to make "background-size" work in IE8?

> ID：11988771
> 
> 赞同：1
> 
> 时间：2012-08-16T13:56:13.197
> 
> 标签：internet-explorer, css, internet-explorer-8

I am building a website for newer browsers, but I want it to look decent in IE8 too. Everything was OK, until I ran into a problem. I found that `background-size` is not working in IE8\. After some research I was able to find some sort of "hack", but it didn't work for me.

Maybe I am doing something wrong; please take a look at this code and maybe suggest a solution that will fix background sizing in IE8, (preferably a CSS solution).

```
.logo {
    width: 190px;
    height: 204px;
    background-image: url("../img/logo.png");
    background-repeat: no-repeat;
    background-size: 190px 204px;

    /** This is the so called IE8 hack, but it doesn't seem to work **/

    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../img/logo.png',sizingMethod='scale');

    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../img/logo.pn',sizingMethod='scale')";

    /** End of Hack */

    position: absolute;
    display: block;
    z-index: 99;
    margin: -73px 0 0 405px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:28:51.433

关键是视网膜屏幕，对吧？由于这种屏幕的市场份额并不大，我宁愿先使用“标准”图像，然后在需要时将其替换为高分辨率。

例如，您可以使用[Retina.js](http://retinajs.com/)来实现。

或者您可以简单地使用图像标签。它将在 IE8 上运行。不要忘记定义宽度和高度属性。

```
<a href="/" class="logo">
  <img src="img/logo.png" width="190" height="204" alt="Bryuvers">
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T12:01:48.630

IE8 不支持 CSS3 的 Background-size 属性。但是您可以查看此链接[http://msdn.microsoft.com/en-us/library/ms532969%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms532969%28v=vs.85%29.aspx)。这可能会对您有所帮助。

# android - What is the scope of android:id?

> ID：11988772
> 
> 赞同：6
> 
> 时间：2012-08-16T13:56:13.833
> 
> 标签：android

> **Possible Duplicate:**
> [Scope of R.id values](https://stackoverflow.com/questions/3719147/scope-of-r-id-values)

Could someone please clarify the scope of resource id's in Android? Recently I was making a custom title bar which contained a RelativeLayout called "header". I was invoking this title bar in the *onCreate()* handlers of each of my Activities thusly:

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
setContentView(R.layout.activity_layout);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.title_bar); 
```

One of my Activities had a TextView in its layout with the id of "header" and in that Activity's *onCreate()* I do a

```
TextView tv1 = (TextView)findViewById(R.id.header); 
```

. . . which blew up at runtime with ClassCastException, apparently because it thought I was trying to cast a RelativeLayout to a TextView. Changing the name of the RelativeLayout in the title bar fixed it.

But I don't really understand this. Are Android resource id's global? If so why wouldn't this collision be caught at build-time?

Note that this question has been asked before on SO: [Scope of R.id values](https://stackoverflow.com/questions/3719147/scope-of-r-id-values) . . . Where the OP said "as far as I can tell" R.id's are global but my question is not a duplicate because neither of my questions is really addressed in that one.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T14:02:10.027

> Android资源ID是全球性的吗？

它们在活动中是“全局的”。标题栏在活动中。布局在活动中。两者的小部件都将在活动中。两者中具有相同 ID 的小部件将在活动中，并代表`findViewById()`调用冲突点。

> 如果是这样，为什么不会在构建时捕获这种碰撞？

首先，为什么会这样？构建系统应该如何知道您将在同一个活动中使用`res/layout/title_bar.xml`并`res/layout/whatever_the_heck_you_called_it.xml`使用它们？

其次，拥有重复 ID 并没有错。作为开发人员，你的工作是**调用`findViewById()`任何能给你带来独特结果的东西**。例如，您可以这样做：

```
TextView tv1 = (TextView)(findViewById(android.R.id.content).findViewById(R.id.header)); 
```

并保留重复的 ID。走您所做的路线，拥有不同的 ID，对于可维护性来说是一个更好的选择。但是在很多情况下，您会故意使用重复的 ID，例如`AdapterView`您曾经实现过的每一个（例如，`ListView`），因为它们的内容往往具有重复的 ID（例如，`ListView`在资源）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T14:00:53.753

R.* 值对于它们自己的类型是全局的。所以你可以有一个`R.string`和一个`R.id`同名的ID，但不能有两个同名的ID。在您的情况下，我觉得进行构建清理也可以解决您的问题。例如，看一下 R.java 文件内容：

```
 public static final class drawable {
    public static final int icon=0x7f020000;
    public static final int info=0x7f020001;
    public static final int menu=0x7f020002;
    public static final int splash1=0x7f020003;
}
public static final class id {
    public static final int ImageView02=0x7f070008;
    public static final int bestTimeTextView=0x7f070005;
    public static final int infoButton=0x7f070003;
    public static final int infoImageView=0x7f070000;
    public static final int levelSpinner=0x7f070002;
    public static final int menuImageView=0x7f070001;
    public static final int selectLevelTextView=0x7f070004;
    public static final int startButton=0x7f070006;
    public static final int timeTextView=0x7f070007;
}
public static final class layout {
    public static final int info=0x7f030000;
    public static final int menu=0x7f030001;
    public static final int splash=0x7f030002;
}
public static final class raw {
    public static final int down=0x7f040000;
    public static final int up=0x7f040001;
}
public static final class string {
    public static final int appname=0x7f060000;
    public static final int besttime=0x7f060002;
    public static final int help=0x7f060004;
    public static final int selectlevel=0x7f060001;
    public static final int start=0x7f060003;
} 
```

在这里，我在可绘制部分和布局部分中都使用了信息名称，并且应用程序运行良好。但是，如果我尝试添加两个具有相同 ID 的资源，或者两个具有相同名称的可绘制对象，或者两个具有相同名称的字符串等，它将无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:00:57.613

R 只是一个充满静态整数的 java 类。您的应用程序中的 R.id.header 只能有一个值。在您的布局中使用相同的 id 是非常好的，但如果您在一个布局中使用相同的 id，您可能会遇到您遇到的确切问题。在您的情况下，findViewById 首先找到了您的 RelativeLayout 并返回它而不是 TextView。这只是搜索视图的顺序问题。例如，您仍然可以通过在 TextView 的直接父级上调用 findViewById 来绕过它。

# javascript - JQuery AJAX return XML on GET request complete

> ID：11988780
> 
> 赞同：0
> 
> 时间：2012-08-16T13:56:47.110
> 
> 标签：javascript, jquery, ajax

I need to execute code once my XML file (or object) has been returned successfully. Not before, and not repeatedly; just one time **after** the file has been returned.

Does my code already do what I am trying to accomplish? It seems to have failed a couple of times in IE and I need to be sure that it is reliable.

```
$(document).ready(function(){
    (function GetFile(){
        $.ajax({
          type: "GET",
          url: "Produce.xml",
          dataType: "xml",
          cache: false,
          success: function(result) {
                alert("XML File is loaded!");
                alert(result);
                },      
            async: true
          });
    })();
}); 
```

I know that there are `onerror` codes and `readystatechange` values that can be checked and verified... Should I be checking these values while polling the server for the XML file?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:59:10.663

后去掉逗号`async: true`

此外，如果您不打算再次调用，您的 GetFile 函数将立即执行，那么不妨使用匿名或一起删除该函数

```
$(document).ready(function(){
        $.ajax({
          type: "GET",
          url: "Produce.xml",
          dataType: "xml",
          cache: false,
          success: function(result) {
                alert("XML File is loaded!");
                alert(result);
                },      
            async: true
          });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T15:34:25.103

[这是原始提问者作为编辑添加的，我已将其转换为社区 wiki 答案，因为它应该是答案，而不是编辑。]

感谢@AndrewDouglas 的建议，修复了它，这是新代码（效果很好）：

```
$(document).ready(function(){
(function GetFile(){
    $.ajax({
      type: "GET",
      url: "Produce.xml",
      dataType: "xml",
      cache: false,
      success: function(result) {
            alert("XML File is loaded!");
            alert(result);
        },
      error:function (xhr, ajaxOptions, thrownError){
            z++;
            alert(xhr.status);
            alert(thrownError);
            setTimeout(GetFile, 5000);
            console.log("Error " +z+": " + thrownError);
        },              
            async: true
        });
    })();
}); 
```

最后一条评论，您应该能够更改`setTimeout(GetFile, 5000)`为`setInterval(GetFile, 5000)`，然后它将不断轮询您的 XML 文件。但是，在本`success`节中这样做会更有意义。

# math - What's the best possible way to match one password

> ID：11988787
> 
> 赞同：0
> 
> 时间：2012-08-16T13:57:04.583
> 
> 标签：math

lets say I have a 8 digital password, say 12abCD!@

The password contains digital number(0-9), letters(uppercase and lowercase) and other character !@#$%^&*().

What is the lowest time of tries can I match the password and why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:17:37.697

要得出准确的估计值，您需要计算 2 件事：

首先：您需要使用数学组合：密码中的每个字符可以是： - 小写字母 [26] - 大写字母 [26] - 数字 [10] - 特殊字符 [11]

考虑到可能性的数量，每个字符可能是 73 种可能性之一。这意味着第一个字符有 73 种可能性，第二个字符有 73 种可能性，第三个字符有 73 种可能性，依此类推。这可以在数学上表示为：

```
73*73*73*...*73 or 73^n where n is the number of characters in your password 
```

第二：您需要计算猜测密码所需的时间。如果您的机器速度较慢，这可能是每秒 50 万。如果您的机器速度非常快，它可能是每秒 1500 万次。检查此[站点](http://daleswanson.org/things/password.htm)或[此](http://geodsoft.com/cgi-bin/crakcalc.pl)站点以根据每秒的猜测进行良好的估计。

简而言之，估计算法是这样的：

1.  你占据了搜索空间（可能性的数量）

2.  将搜索空间除以每秒的猜测数得到猜测整个搜索空间的秒数，

3.  然后将时间除以 2 得到在搜索空间中猜出*密码的**平均时间。*

 **恐慌上校*是对的，如果你幸运的话，只需要猜一次，这是猜出一个密码的最少次数。然而，猜测密码的平均时间可能是您正在寻找的，那就是：

*   1.09 小时和 1.84 小时，每个站点各自估计每秒 1,000,000,000,000 次检查（这就像 NSA 超级计算机的速度）

*   2.10 世纪和 210.37 年，每个站点各自估计每秒 1,000,000 次检查（这是我的计算机可以做到的）

**注意：**我使用 93 个可打印的 ascii 字符进行这些估计，*而不是*密码中显示的 73 个字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:01:43.740

最大尝试次数为：

```
26 upper cases letters
26 lower case letters
10 integers
11 special characters

= 73

73^8 = 8.0646009e+14 
```

当然，如果幸运的话，最小值是 1*

# c# - 在特定时间播放 WAV？

> ID：11988788
> 
> 赞同：0
> 
> 时间：2012-08-16T13:57:06.890
> 
> 标签：c#, audio, timer, wav

对 C# 非常陌生，我发现我有一个奇怪的代码问题。我有 C# 2010 的 Express 版本。我需要一个 WAV 文件在特定时间播放，例如上午 10 点、上午 1130 点和下午 2 点。我可以使用按钮让 WAV 播放，但在任何特定时间都不能在不单击按钮的情况下播放。有什么想法或建议吗？我一直在尝试使用 Timer 事件，但是当使用它时，甚至按钮都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:29:24.123

您需要使用计时器。让我们将计时器的**间隔**设置为 1 秒。然后在计时器滴答事件上**检查当前系统时间**。如果它与特定时间（11 AM / 11:30 AM / 2PM）匹配，则停止计时器并播放声音。一旦声音的播放结束，然后再次启动计时器。

```
private void MyTimer_Tick(object sender, EventArgs e)
{
        DateTime todayNow = DateTime.Now;

        // For 11 AM
        if (todayNow.Equals(new DateTime(todayNow.Year, todayNow.Month, todayNow.Day, 11, 00, 0)))
        {
            MyTimer.Stop(); // Stop the timer before you play the wav file
            PlaySound();
        }
        // For 11 30 AM
        else if (todayNow.Equals(new DateTime(todayNow.Year, todayNow.Month, todayNow.Day, 11, 30, 0)))
        {
            MyTimer.Stop(); // Stop the timer before you play the wav file
            PlaySound();
        }
        // For 2 PM
        else if (todayNow.Equals(new DateTime(todayNow.Year, todayNow.Month, todayNow.Day, 14, 00, 0)))
        {
            MyTimer.Stop(); // Stop the timer before you play the wav file
            PlaySound();
        }
}

// Once the Sound playing is over you can start the timer immediately
void OnSoundPlayOver
{
   MyTimer.Start(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:04:30.570

这是我制作的代码，与您所要求的类似。在其中，用户设置他们想要倒计时的秒数（滴答声），当它完成计数时，它会播放“YellowSubmarine”。所以，这不是基于时间的，但希望它能让你走上正确的轨道：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Media;

namespace TickCounter_MGilliland
{
    public partial class Form1 : Form
    {

        int NumberOfTicks;
        SoundPlayer Song = new SoundPlayer("YellowSubCut.wav");
        bool AlarmGo = false;

        public Form1()
        {
            InitializeComponent();

            NumberOfTicks = 1;

            SecondTimer.Interval = 1000;
            SecondTimer.Enabled = true;

            Progress.Maximum = 100;
            Progress.Value = 0;
        }

        private void StartButton_Click(object sender, EventArgs e)
        {
            if (InputTicks.Text != string.Empty)
            {
                try
                {
                    // Get the number of ticks that the user wants and set the input to ""
                    NumberOfTicks = Int16.Parse(InputTicks.Text);
                    InputTicks.Text = string.Empty;
                }
                catch (Exception s)
                {
                    MessageBox.Show("Exception: "+ s.ToString());
                    InputTicks.Text += " <-FixMe";
                }

                if (NumberOfTicks > 0)
                {
                    // Set ShowTicks' text to the number of ticks and show it
                    ShowTicks.Text = NumberOfTicks.ToString();
                    ShowTicks.Show();

                    InputTicks.ReadOnly = true;

                    AlarmGo = true;
                    Progress.Value = Progress.Maximum = NumberOfTicks;

                    // Start the timer
                    SecondTimer.Start();
                }
                else
                    MessageBox.Show("Input Must be an unsigned number greater than 0!");

            }
            else
                MessageBox.Show("I can't count ticks you haven't given, Sherlock!");
        }

        private void StopButton_Click(object sender, EventArgs e)
        {
            InputTicks.ReadOnly = false;
            SecondTimer.Stop();
            ShowTicks.Text = string.Empty;
            ShowTicks.Hide();
            Progress.Value = 0;
            Song.Stop();
            MessageBox.Show("Phew... I'm glad you stopped that...\nIt was really starting to tick me off.");
        }

        private void SecondTimer_Tick(object sender, EventArgs e)
        {
            if (NumberOfTicks > 0)
            {
                // Decrease the number of ticks and change the value in ShowTicks
                ShowTicks.Text = (--NumberOfTicks).ToString();
                Progress.Value = NumberOfTicks;
            }
            else
            {
                NumberOfTicks = 0;
                SecondTimer.Stop();
                if (AlarmGo)
                    Song.PlayLooping();
                AlarmGo = false;
            }
        }
    }
} 
```

# c# - if condition in IQueryable Join in LINQ query (Convert SQL to LINQ)

> ID：11988792
> 
> 赞同：-4
> 
> 时间：2012-08-16T13:57:27.377
> 
> 标签：c#, linq, linq-to-sql, linq-to-entities, sql-to-linq-conversion

As I need to convert following MS SQL Query in to Linq in C#

As I have tryed with IQueryable but not able to do .

As in that we need to check if condition is true then only need to go for join with table

Thanks in adv.

```
SELECT @sqlQuery = 'SELECT distinct tbl_1.col1 , tbl_1.col2, tbl_1.col3
     FROM tbl_1 vd  '        

if(@Condetion is not null)        
BEGIN        
  set @sqlQuery = @sqlQuery +'
    Inner Join         
  ( SELECT vml.*           
      FROM tbl_2 vml          
       INNER JOIN tbl_3 vm          
        ON tbl_1.IDCol = tbl_2.IDCol WHERE tbl_3.Name LIKE ''%'+@Condetion+'%'') A ON A.MessageID = vd.MessageID '         
 END        

  set @sqlQuery = @sqlQuery + 'INNER JOIN tbl_4 tbl 
  ON tbl.ColID12 = vd.ColID12
     LEFT OUTER JOIN            
       vdd_typeid tblVdd ON tblVdd.TypeId=tbl_1.TypeId            
 INNER JOIN  ...... '

 EXEC sp_executesql @sqlQuery 
```

As following i have try with LINQ

```
var query = from VD in _db.GetTable<tbl_1>() select VD ;

             if (!string.IsNullOrEmpty(Category.Trim()))
             {
                 query = query.Join((from VML in this._db.GetTable<tbl_1>()
                                      join VM in this._db.GetTable<tbl_2>() on VML.MessageID equals VM.MessageID
                                      where VM.Category.Name(Condetion),VD => new{VD.TypeId == [need write to write like this but can not VML.TypeId] }

            }

            query = query.Join(from TblVMS_def in this._db.GetTable<tbl_4>() on ........ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:31:09.033

It is extremely hard to deciper what you actually need, I've had a go here but it would possibly be far simpler with a copy of your Entity Diagram and a concise description of the data you are after.

I've had a go with what I think you want

```
var cat = string.IsNullOrWhiteSpace(Category) ? null : Category.Trim();
var query = from VD in _db.GetTable<tbl_1>()
            join tbl in _db.GetTable<tbl_4>() on tbl.ColID12 equals VD.ColID12
            join VM_I in _db.GetTable<tbl_2>() on VD.MessageID equals VM_I.MessageID
            from VM in VM_I.DefaultIfEmpty()
            where cat == null || VM.Category.Name.Contains(cat)
            select new { col1 = VD.col1, col2 = VD.col2, VD.col3 }; 
```

you can then do `query.Distinct()` for distinct values;

Can I suggest that you use [LinqPad](http://www.linqpad.net) to work out your query, it's far easier to work with and will also show you the resulting SQL

# php - Drupal 7: Views exposed filter with BETWEEN operator for non-date field?

> ID：11988797
> 
> 赞同：0
> 
> 时间：2012-08-16T13:57:48.213
> 
> 标签：php, drupal, drupal-7, drupal-views, field

I just started maintaining a pretty large Drupal website. The site has a playlist that lists songs. The content type for each song has a text field where the user types in the time the song was played. Yes, its a TEXT field, not a date field :( So by default in Views I have no way of exposing a filter with a `BETWEEN` operator. Ugh.

Is there any way I could possible convert this field to a date field so I can use the `between` operator? Or maybe there's some other work-around I could do? Thanks for any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:20:00.473

您最好的选择是使用自定义模块，在保存/加载节点时将该值存储在实际的 Drupal 日期字段中。

```
function mymodule_node_presave($node) {
  if ($node->type == 'whatever_content_type') {
    $node->actualdatefield[LANGUAGE_NONE][0]['value'] = date('Y-m-d g:i:s', strtotime($node->userdatefield[LANGUAGE_NONE][0]['value']));
  }
} 
```

类似的东西。您希望通过内容列表页面（如发布节点）触发触发 node_save 事件的更新选项之一，以更新现有节点。

# php - 2 提交表单上的按钮 - 需要一个打开一个新窗口

> ID：11988798
> 
> 赞同：3
> 
> 时间：2012-08-16T13:57:52.447
> 
> 标签：php, submit, action

使用带有空白操作的表单 - action=""。

我在表单上有 2 个按钮可以做不同的事情。一个提交/保存信息，另一个打开输出表：

```
<input type="submit" name="SubmitSave" id="SubmitSave" value="Submit / Save" onClick="this.form.action='PA_Monitorcall.php'; this.form.submit()" />

<input type="submit" name="EmailDetails" id="EmailDetails" value="Email" onClick="this.form.action='OutputSheetPA.php'; this.form.submit()" /> 
```

我需要在新窗口中打开输出表，但不能在表单标题详细信息中包含它，它需要进入上面按钮的代码。有任何想法吗？

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:04:26.177

两个提交按钮的 onClick 事件，调用一个 javascript 函数，它将表单标签的 'target' 属性切换为 '_blank' 或 '_parent'/''。使用“目标”属性的这个新值，您的帖子将在新窗口/标签中提交

```
<form target="" action="" method="post">
 <input type="submit" value="Same Window" onClick="ChangeTarget('same')" />
 <input type="submit" value="New Window" onClick="ChangeTarget('new')" />
</form>

function ChangeTarget(loc) {
 if(loc=="new") {
  document.getElementById('form_id').target="_blank";
 } else {
  document.getElementById('form_id').target="";
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:02:42.887

改为使用`type="button"`。您`onClick`已经调用了提交，因此您不需要它们作为`submit`输入。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T14:05:18.887

您可以使用相同的名称命名两个输入，然后检查该输入的值。

```
<form action="">
    <input type="submit" name="submit" id="SubmitSave" value="Submit / Save" />
    <input type="submit" name="submit" id="EmailDetails" value="Email" /></form>
</form> 
```

在 php 文件中：

```
<?php
if ($_POST['submit'] == 'Submit / Save')
    // save the form input
elseif ($_POST['submit'] == 'Email')
    // do other stuff
... 
```

# php - 重定向的用户级问题

> ID：11988800
> 
> 赞同：-3
> 
> 时间：2012-08-16T13:57:56.423
> 
> 标签：php

> **可能重复：**
> [php中的检查登录条件问题](https://stackoverflow.com/questions/11988317/checklogin-condition-issue-in-php)

我有这个快速的问题，请

我有这段代码不能正常工作，一些关于语法的东西..你能帮我吗？

我知道这听起来可能很愚蠢，但我正在努力理解！

谢谢！

```
<?php 
session_start();
require_once('db.php'); 
include('functions.php'); 
if (checkLogin('1 2')) {
    echo "hello ".$_SESSION['user_id']." You are now logged in."; 
} else if (checkLogin('3'))  {
echo "hey tst";
} else {}

?>

function checkLogin($levels)
    {
        if(!$_SESSION['logged_in'])
        {
            $access = FALSE;
        }
        else {
            $kt = split(' ', $levels);

            $query = mysql_query('SELECT Level_access FROM users WHERE ID = "'.mysql_real_escape_string($_SESSION['user_id']).'"');
            $row = mysql_fetch_assoc($query);

            $access = FALSE;

            while(list($key,$val)=each($kt))
            {
                if($val==$row['Level_access'])
                {//if the user level matches one of the allowed levels
                    $access = TRUE;
                }
            }
        }
        if($access==FALSE)
        {
            header("Location: login.php");
        }
        else {
        //do nothing: continue
        }

    }

CREATE TABLE `users` (
  `ID` int(11) NOT NULL auto_increment,
  `Username` varchar(255) NOT NULL,
  `Password` varchar(255) NOT NULL,
  `Temp_pass` varchar(55) default NULL,
  `Temp_pass_active` tinyint(1) NOT NULL default '0',
  `Email` varchar(255) NOT NULL,
  `Active` int(11) NOT NULL default '0',
  `Level_access` int(11) NOT NULL default '2',
  `Random_key` varchar(32) default NULL,
  PRIMARY KEY  (`ID`),
  UNIQUE KEY `Username` (`Username`),
  UNIQUE KEY `Email` (`Email`)
) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:59:21.783

您的[`if`陈述](http://php.net/manual/en/control-structures.if.php)需要括号括起来：

```
if( checkLogin('1 2')) {
  ^                  ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:00:04.553

试试这个

```
<?php 
session_start();
require_once('db.php'); 
include('functions.php'); 
if (checkLogin('1 2')) {
    echo "hello ".$_SESSION['user_id']." You are now logged in."; 
} else if (checkLogin('3'))  {
echo "hey tst";
} else {}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:10:50.217

在浏览器中运行代码。您将收到一条错误消息。使用该错误消息找出问题所在。重复直到您没有收到错误消息，并且程序按设计运行。

这就是我们在现实世界中调试事物的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:34:00.840

那么你可以简化你的 checkLogin() 函数

```
function checkLogin($levels)
{

    $access = false;

    if (!isset($_SESSION['logged_in']) || !$_SESSION['logged_in']) 
        return false;

  //use mysqli instead mysql
$con = new mysqli("localhost", "username", "password", "database");

$query = $con->query('SELECT Level_access FROM users WHERE ID = "'.$con->real_escape_string($_SESSION['user_id']).'"');
$row = $query->fetch_assoc();

$con->close();

    if (in_array($row['Level_access'], explode(" ", $levels))) $access = true;

    return $access;

} 
```

这个函数应该返回真或假！

之后，您的代码可能如下所示

```
session_start();
require_once('db.php'); 
include('functions.php'); 
if (checkLogin('1 2')) {
    echo "hello ".$_SESSION['user_id']." You are now logged in."; 
} else if (checkLogin('3'))  {
    echo "hey tst";
} else {
    header("Location: login.php");
} 
```

希望这对您有所帮助。

# wix - 将 .reg 文件添加到注册表 WIX

> ID：11988805
> 
> 赞同：7
> 
> 时间：2012-08-16T13:58:06.860
> 
> 标签：wix, registry

一直在环顾四周，我似乎找不到解决方案。

问题：我有一个 .reg 文件，我需要在安装过程中将它添加到注册表中。我正在使用 WIX 3.5。我无法使用 Registrykey 等手动添加它，因为我的客户可能已经更改了它的内容。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T14:08:31.980

您可以尝试使用`heat.exe`并将`.reg`文件收集到 WiX 片段中。它可能看起来像这样：

```
heat.exe reg myregistry.reg -out registry.wxs 
```

尝试其他选项`heat.exe`以获得所需的输出。

# tridion - 网络分析和内容重用

> ID：11988811
> 
> 赞同：3
> 
> 时间：2012-08-16T13:58:35.550
> 
> 标签：tridion, templating

我们创建了一个按钮模板，编辑器可以在其中关联一个 Web 分析标签。问题是我们想在同一个页面上重用这个按钮组件，但仍然能够区分它来自页面的哪个位置。

以前有人遇到过这个问题吗？我们正在寻找对问题的一些洞察力，也许还有一些方法可以在不修改模板的情况下解决这个问题。

仅供参考，我们使用的是 Tridion 2009 SP1。

谢谢！

*用 HTML 更新*

```
<a href ="/security.jsp" onClick="trackCustomLink('tttt:p:apply-now','Link','onClick');">
   <img src="/images/GICs/applynow-button.gif"  border="0" alt="Apply Now" /></a> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T14:12:46.633

假设您的按钮是使用组件模板呈现的，您似乎只需要使用页面上组件的序数位置 - 您能否指定您使用的模板类型（VBScript 或带有 DWT 或 C# 的模块化）？在此基础上，我们或许可以为您提供一些代码示例。

Graham Bird 有一篇关于 VBScript 的 OrdinalPosition 的好文章：http: [//www.grahambird.co.uk/2011/01/ordinalposition/](http://www.grahambird.co.uk/2011/01/ordinalposition/)

这背后的想法是您将 ComponentPresentation.OrdinalPosition 值添加到您的分析代码中。

# objective-c - Core Data KVO count

> ID：11988812
> 
> 赞同：0
> 
> 时间：2012-08-16T13:58:43.723
> 
> 标签：objective-c, ios, core-data, key-value-observing

Is possible to observe the count of some Item, say Users, in Core Data?

I could do something like this.

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleDataModelChange:) name:NSManagedObjectContextObjectsDidChangeNotification object:myManagedObjectContext];

NSSet *insertedObjects = [[note userInfo] objectForKey:NSInsertedObjectsKey];
localCount += [insertedObjects count];

NSSet *deletedObjects = [[note userInfo] objectForKey:NSDeletedObjectsKey];
localCount -= [insertedObjects count]; 
```

But this seems error prone and their has to be a more direct solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:20:43.090

是的你可以。使用 NSFetchedResultsController 更容易。在正常情况下（我的意思是没有 NSFetchedResultsController）你会遵循

```
NSManagedObject *foo; //Some NSManagedObject
[foo addObserver: self forKeyPath:@"A" options: NSKeyValueObservingOptionOld |     NSKeyValueObservingOptionNew context:context]; 
```

将 NSFetchedResultsController 设置为委托，然后您将收到`controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`呼叫。

* * *

编辑：在您的情况下，您的方法是正确的。错误必须来自其他地方

# java - gaining a focus of JInternalFrame object

> ID：11988813
> 
> 赞同：0
> 
> 时间：2012-08-16T13:58:46.920
> 
> 标签：java, swing, focus, jinternalframe

What happens when you minimize JInternalFrame object using built-in icon located in the corner (next to maximizing and closing ones)? I have a JInternalFrame in JDesktopPane and my problem is following: When I minimize one frame it is being minimized. When I try to re-open the frame via using JMenu it works for first time. When I do this procedure again, the frame is being minimized but not re-opened, but when I click manually on a iconified frame, it shows properly. I tried to do combination of setSelected, moveToFront, setIcon, setVisible, activateFrame, or requestFocus, but still no effects. I wonder what happens when you minimize JInternalFrame, what is being set, what should do to get focus of a particular frame, and why the procedure it works for the first time and not others? thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:28:22.127

对我来说似乎工作得很好

```
try {

    if (myFrame.isIcon()) {

        myFrame.setIcon(false);
        miDoShowHide.setText("Hide");

    } else {

        myFrame.setIcon(true);
        miDoShowHide.setText("Show");

    }

} catch (Exception exp) {

    exp.printStackTrace();

} 
```

我设置了一个可以调用此功能的菜单项。我通过使用菜单来测试 min, restore, min, restore。我通过框架控件最小化框架并通过菜单恢复，通过菜单最小化并通过框架控件恢复。

还要确保`JInternalFrame`设置为`Iconifiable`( `setIconifiable(true)`) 否则你会遇到一些奇怪的结果

# jquery - 单击另一个菜单时，jQuery关闭下拉菜单打开

> ID：11988818
> 
> 赞同：0
> 
> 时间：2012-08-16T13:59:02.070
> 
> 标签：jquery

我有这个代码：http: [//jsfiddle.net/a9GUX/](http://jsfiddle.net/a9GUX/)

例如，当菜单“一”打开时，人点击菜单“四”，菜单一自动关闭。我做了一些测试，但有些什么都不做，有些则打开所有/关闭所有。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:08:38.063

添加这一行

```
$(this).siblings('li').children('ul,p').slideUp('slow'); 
```

[**演示**](http://jsfiddle.net/a9GUX/1/)

# ruby - 在测试 mutator 和 accessor 方法时避免重复

> ID：11988819
> 
> 赞同：1
> 
> 时间：2012-08-16T13:59:03.070
> 
> 标签：ruby, unit-testing, rspec, tdd

假设您有一个简单的类，例如：

```
class Box
  def initialize
    @widgets = []
  end

  def add_widget(widget)
    @widgets << widget
  end

  def widgets
    @widgets
  end
end 
```

我会写一个看起来像这样的测试：

```
describe Box do
  describe "#initialize" do
    it "creates an empty box"
      Box.new.widgets.should == []
    end
  end

  describe "#add_widget" do
    it "adds a widget to the box"
      widget = stub('widget')
      box = Box.new
      box.add_widget(widget)
      box.widgets.should == [widget]
    end
  end

  describe "#widgets" do
    it "returns the list of widgets"
      widget = stub('widget')
      box = Box.new
      box.add_widget(widget)
      box.widgets.should == [widget]
    end
  end
end 
```

请注意最后两个测试最终是如何相同的。我正在努力避免这些重叠的情况。我在前两种情况下隐式测试#widgets，但我觉得也应该有一个显式测试。但是，此代码最终与第二种情况相同。

如果一个类有 3 个公共方法，那么我希望至少有一个测试对应于这些方法中的每一个。我错了吗？

**更新**

我发现了 Ron Jeffries 的[这篇文章](http://xprogramming.com/articles/contradiction-test-everything-but-not-accessors/)，它建议不要测试简单的访问器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T22:13:20.160

这是非常简单的情况，正如您所说，您可能不应该那样访问访问者。但是如果情况有点复杂，或者访问器不是真正的访问器，但它内部有一些逻辑并且你真的很想测试它，那么你可以使用[Object](http://ruby-doc.org/core-1.9.3/Object.html)的`instance_variable_get`and 。`instance_variable_set`

```
describe Box do
  describe "#initialize" do
    it "creates an empty box" do
      Box.new.widgets.should == []
    end
  end

  describe "#add_widget" do
    it "adds a widget to the box" do
      widget = stub('widget')
      box = Box.new
      box.add_widget(widget)
      box.instance_variable_get(:@widgets).should == [widget]
    end
  end

  describe "#widgets" do
    it "returns the list of widgets" do
      widget = stub('widget')
      box = Box.new
      box.instance_variable_set(:@widgets, [widget])
      box.widgets.should == [widget]
    end
  end
end 
```

但是，我想这不是很好的测试技术，因为您正在干扰对象的内部状态，因此每当内部实现发生更改时，即使该类的公共接口没有更改，您也必须确保测试已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:05:33.477

至少在这种情况下，我不确定您是否可以避免代码重复。如果您没有采用一组小部件的构造函数，则必须使用一种方法来测试另一种方法。在这种情况下，您可以更改测试的一种方法可能如下：

```
describe Box do
  describe "#initialize" do
    it "creates an empty box"
      Box.new.widgets.should == []
    end
  end

  describe "#add_widget" do
    before do
      @widget = stub('widget')
      @box = Box.new
      @box.add_widget(@widget)
    end

    it "adds a widget to the box, which gets returned by #widgets"
      @box.widgets.should == [@widget]
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:36:36.637

也许是声音测试？如果是这样，而且是我在听，我会听到类似的话：*“伙计，停止测试方法。重要的是行为。”* . 我会回应以下内容：

```
describe Box do
  it "contains widgets" do
    widget = stub('widget')
    box    = Box.new

    box.add_widget(widget)
    box.widgets.should == [widget]
  end

  it "has no widgets by default" do
    Box.new.widgets.should == []
  end
end 
```

由于#widgets 是访问框小部件的唯一（公共）方法，而#add_widget 是添加它们的唯一方法，因此没有其他方法可以测试`Box`行为，只能同时使用它们。

# ruby-on-rails - Rails 应用程序中的实例化错误

> ID：11988820
> 
> 赞同：0
> 
> 时间：2012-08-16T13:59:05.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, controller, instantiation

我正在开发一个 Rails 应用程序，其中我有两个模型，即一个`chef`模型和一个`dish`模型。

```
class Dish < ActiveRecord::Base
  belongs_to :chef
  attr_accessible :description, :photo, :price
  validates :chef_id, presence: true
  has_attached_file :photo
end 

class Chef < ActiveRecord::Base
  attr_accessible :name, :email, :mobile ,:password, :password_confirmation, :postcode
  has_many :dishes
  has_secure_password 
end 
```

我（厨师）正在尝试通过转到 /upload url 来创建一道菜，其视图是

```
<%= form_for(@dish) do |d| %>  
  <%= d.label :description, "Please name your dish..."%>
  <%= d.text_field(:description)%>

  <%= d.label :price, "What should the price of the dish be..."%>
  <%= d.number_field(:price)%>

  <%= d.submit "Submit this Dish", class: "btn btn-large btn-primary"%>
<% end %> 
```

我希望创建的菜出现在厨师的展示页面上，

```
<% provide(:title, @chef.name)%>       
  <div class = "row">
    <aside class = "span4">
      <h1><%= @chef.name %></h1>
      <h2><%= @chef.dishes%></h2>       
     </aside>
   <div>
<% end %> 
```

而且，`dishes_controller`是：

```
class DishesController < ApplicationController  

  def create
    @dish = chef.dishes.build(params[:dish])
    if @dish.save
      redirect_to chef_path(@chef)
    else
      render 'static_pages/home'
    end 
```

但是，当我尝试从 /upload url 创建一道菜时，我在 disc_controller 中收到以下错误：

```
NameError undefined local variable or method `chef' for #<DishesController:0x3465494>   

app/controllers/dishes_controller.rb:5:in `create' 
```

我想我已经实例化了所有变量，但问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:11:12.293

在这一行：

```
@dish = chef.dishes.build(params[:dish]) 
```

该`chef`变量未实例化。你必须做这样的事情：

```
@chef = Chef.find(params[:chef_id])
@dish = @chef.dishes.build(params[:dish]) 
```

这样，@chef 变量会在您使用之前填充。

# android - ICS 类未找到异常

> ID：11988824
> 
> 赞同：0
> 
> 时间：2012-08-16T13:59:11.430
> 
> 标签：android, sdk

我已将我的 android sdk 更新为 ics(4.1)，因为我更新了我在 froyo(2.3) 中开发的所有旧项目，这给了我错误喜欢

```
08-16 19:16:32.284: E/AndroidRuntime(593): FATAL EXCEPTION: main
08-16 19:16:32.284: E/AndroidRuntime(593): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.abc.def/com.abc.def.defMain}: java.lang.ClassNotFoundException: com.abc.def.defMain in loader dalvik.system.PathClassLoader[/data/app/com.abc.def-1.apk]
08-16 19:16:32.284: E/AndroidRuntime(593):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
08-16 19:16:32.284: E/AndroidRuntime(593):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-16 19:16:32.284: E/AndroidRuntime(593):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-16 19:16:32.284: E/AndroidRuntime(593):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-16 19:16:32.284: E/AndroidRuntime(593):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 19:16:32.284: E/AndroidRuntime(593):  at android.os.Looper.loop(Looper.java:123)
08-16 19:16:32.284: E/AndroidRuntime(593):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-16 19:16:32.284: E/AndroidRuntime(593):  at java.lang.reflect.Method.invokeNative(Native Method)
08-16 19:16:32.284: E/AndroidRuntime(593):  at java.lang.reflect.Method.invoke(Method.java:521)
08-16 19:16:32.284: E/AndroidRuntime(593):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-16 19:16:32.284: E/AndroidRuntime(593):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-16 19:16:32.284: E/AndroidRuntime(593):  at dalvik.system.NativeStart.main(Native Method)
08-16 19:16:32.284: E/AndroidRuntime(593): Caused by: java.lang.ClassNotFoundException: com.abc.def.defMain in loader dalvik.system.PathClassLoader[/data/app/com.abc.def-1.apk]
08-16 19:16:32.284: E/AndroidRuntime(593):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
08-16 19:16:32.284: E/AndroidRuntime(593):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
08-16 19:16:32.284: E/AndroidRuntime(593):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
08-16 19:16:32.284: E/AndroidRuntime(593):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-16 19:16:32.284: E/AndroidRuntime(593):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
08-16 19:16:32.284: E/AndroidRuntime(593):  ... 11 more 
```

在更新 sdk 之前，所有这些都运行得非常好，没有任何错误，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:12:55.380

我得到了这个异常的解决方案这个问题发生了，因为我在我的项目中使用外部库并在构建路径中引用它们，但是在 ics 中，库应该包含在项目的 libs 目录中，以便我复制库中的库问题得到解决

# android - 框架布局子项的可见性问题

> ID：11988826
> 
> 赞同：2
> 
> 时间：2012-08-16T13:59:18.357
> 
> 标签：android, android-layout, view, android-view, android-framelayout

当我**动态**更改 FrameLayout 的子项的可见性时，我遇到了问题：

FrameLayout 由一个`ScrollView`始终可见的简单元素和一个`RelativeLayout`表示搜索栏的简单元素组成，该搜索栏默认情况下已消失，但如果用户按下操作栏上的按钮，则可以将其设置为动态可见。

因此，当用户按下操作栏按钮并且搜索栏为`GONE`时，没有问题，搜索栏看起来就像它必须的那样。但是当搜索栏`VISIBLE`不可能让她消失。我不知道为什么，因为`GONE`当我在日志中显示它时，栏的状态设置得很好，但就像`FrameLayout`没有刷新一样。

有人知道这个问题或有我的解决方案吗？

有代码：

```
 ....

 <FrameLayout
    android:id="@+id/frame_layout_movie_detail"
    android:layout_below="@+id/movie_actionbar">

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent">

               ....

                <ImageView
                    android:id="@+id/iv_movie_detail_poster"
                    android:scaleType="fitCenter"
                    android:src="@android:drawable/ic_menu_report_image" />

                ....

         </RelativeLayout>
    </ScrollView>

    <include
        android:id="@+id/include_search_bar_movie"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        layout="@layout/search_bar" />

 </FrameLayout>

  .... 
```

search_bar.xml：

```
<RelativeLayout 

  <EditText />

  <ImageButton />

</RelativeLayout> 
```

显示和隐藏搜索栏的代码：

```
 private void onDisplaySearchBar() {
       if (search_bar.getVisibility() == View.GONE)
          search_bar.setVisibility(View.VISIBLE);
       else
          search_bar.setVisibility(View.GONE);

       search_bar.invalidate();
    } 
```

谢谢

# facebook-graph-api - 如何将 Facebook 社交评论插件与 Open Graph Action 上的评论结合起来？

> ID：11988829
> 
> 赞同：1
> 
> 时间：2012-08-16T13:59:21.417
> 
> 标签：facebook-graph-api, comments, facebook-comments, facebook-actionscript-api

我们的 FB 应用程序创建通过通知发送给用户朋友的操作。

这些朋友可以在他们的 Facebook 提要的通知中对操作发表评论。

我们的应用程序还使用 Facebook 评论社交插件来允许人们评论我们应用程序中的“相同”帖子，这些评论与 URL 相关联（根据 FB 模式）。

我们显然希望在我们的应用程序上将“Action”上的 Facebook 提要评论和我们的应用程序（FB 社交插件）评论合并为一个。

问题是 Actions 没有我们可以将评论社交插件关联到的 URL（并且有一个错误，从 11 月开放，阻止了解决[https://developers.facebook.com/bugs/164794086987157](https://developers.facebook.com/bugs/164794086987157)的工作）。

关于如何结合这两个评论流的任何想法？

谢谢！

# objective-c - 从单独的笔尖显示 NSWindow（非模态）

> ID：11988831
> 
> 赞同：3
> 
> 时间：2012-08-16T13:59:27.640
> 
> 标签：objective-c, cocoa, nib, nswindow, nsapplication

怎么做？我只是想加载一个窗口并将其显示在主窗口的前面。

```
NSWindowController* controller = [[NSWindowController alloc] initWithWindowNibName: @"MyWindow"];
NSWindow* myWindow = [controller window];
[myWindow makeKeyAndOrderFront: nil]; 
```

此代码显示窗口片刻，然后将其隐藏。恕我直言，这是因为我不保留对窗口的引用（我使用`ARC`）。`[NSApp runModalForWindow: myWindow];`完美地工作，但我不需要模态地展示它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T15:34:24.130

是的，如果您不持有对窗口的引用，那么在您退出您所在的例程时，它将立即被拆除。您需要在 ivar 中持有对它的强引用。`[NSApp runModalForWindow: myWindow]`是不同的，因为`NSApplication`只要对象以模态方式运行，它就持有对窗口的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:02:50.170

您可能应该执行类似于以下的操作，这会创建对您创建的实例的`strong`引用：`NSWindowController`

。H：

```
@class MDWindowController;
@interface MDAppDelegate : NSObject <NSApplicationDelegate> {
    __weak IBOutlet NSWindow        *window;
    MDWindowController              *windowController;
}
@property (weak) IBOutlet NSWindow *window;
@property (strong) MDWindowController *windowController;

- (IBAction)showSecondWindow:(id)sender;
@end 
```

米：

```
#import "MDAppDelegate.h"
#import "MDWindowController.h"

@implementation MDAppDelegate

@synthesize window;
@synthesize windowController;

- (IBAction)showSecondWindow:(id)sender {
    if (windowController == nil) windowController =
                        [[MDWindowController alloc] init];
    [windowController showWindow:nil];
}

@end 
```

请注意，您可以只使用' 的内置方法，而不是将`makeKeyAndOrderFront:`方法直接发送到`NSWindowController`'s 。`NSWindow``NSWindowController``showWindow:`

虽然上面的代码（和下面的示例项目）使用 的自定义子类`NSWindowController`，但您也使用泛型`NSWindowController`并使用创建实例`initWithWindowNibName:`（只需确保将 nib 文件的 File's Owner 设置为`NSWindowController`而不是自定义子类，如`MDWindowController`）。

示例项目：

[http://www.markdouma.com/developer/MDWindowController.zip](http://www.markdouma.com/developer/MDWindowController.zip)

# python - 如何解析xml以在python中找到以下节点的文本值？

> ID：11988833
> 
> 赞同：0
> 
> 时间：2012-08-16T13:59:27.317
> 
> 标签：python, xml-parsing

假设我有一个示例配置 XML 文件，如下所示：

```
<?xml version="1.0"?>
<note> 
    <to>Tove</to> 
    <infoaboutauthor>
      <nestedprofile>
           <aboutme> 
               <gco:CharacterString>I am a 10th grader who likes to play ball.</gco:CharacterString> 
          </aboutme>
      </nestedprofile>
    </infoaboutauthor>
    <date>
        <info_date>
            <date>
               <gco:Date>2003-06-13</gco:Date>
            </date>
            <datetype>
                <datetype attribute="Value">
                </datetype>
            </datetype>
        </info_date>
    </date>
    <from>Jani</from> 
    <heading>Reminder</heading> 
    <body>Don't forget me this weekend!</body> 
  </note> 
```

在 python 中（尝试使用 ElementTree，不确定它是否是最好的）我想为某些标签获取某些值。我试过了：

```
with open('testfile.xml', 'rt') as f:
    tree = ElementTree.parse(f)
print 'Parsing'
root = tree.getroot()
listofelements = root_elem.findall('gco:CharacterString')    
for elementfound in listofelements:
    print elementfound.text 
```

在我上面使用的代码中，当我有冒号时它似乎不起作用，因为我收到以下错误：

```
SyntaxError: prefix 'gco' not found in prefix map 
```

我的目标是

1.  获取“2003-06-13”标签中的文本
2.  “aboutme”标签中的文字

实现这一目标的最佳方法是什么？有没有办法查找父级等于“aboutme”的“gco:CharacterString”？或者有什么方便的方法可以把它变成我可以去的字典`mydict['note']['to']['nestedprofile']['aboutme']`吗？

注意：“gco:”前缀是我必须处理的，它是 xml 的一部分。如果 elementtree 不适合这个，那没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:19:10.220

首先，您的 XML 已损坏。第`-`2 行正在破坏解析器。我也不认为它喜欢`gco:`s。您可以使用其他一些 XML 配置吗？或者这是由你无法控制的东西自动生成的？

因此，要使其与 Python 一起使用，XML 需要如下所示：

```
<?xml version="1.0"?>
<note>
    <to>Tove</to>
    <infoaboutauthor>
      <nestedprofile>
           <aboutme>
               <CharacterString>I am a 10th grader who likes to play ball.</CharacterString>
          </aboutme>
      </nestedprofile>
    </infoaboutauthor>
    <date>
        <info_date>
            <date>
               <Date>2003-06-13</Date>
            </date>
            <datetype>
                <datetype attribute="Value">
                </datetype>
            </datetype>
        </info_date>
    </date>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
  </note> 
```

这是实现您的两个目标的代码：

```
# Get the element tree from the file name and not a file object
tree = ElementTree.parse('config.xml')

# Get the root of the tree
root = tree.getroot()

# To get the 'Date' tag and print its text
date_tag = root.find('date').find('info_date').find('date').find('Date')
print date_tag.text

# Get the `aboutme` tag and print its text
about_me_tag = root.find('infoaboutauthor').find('nestedprofile').find('aboutme').find('CharacterString')
print about_me_tag.text 
```

**更新**

就处理“gco：”而言，您可以执行以下操作：

```
def replace_in_config(old, new):
    with open('config.xml', 'r') as f:
        text = f.read()

    with open('config.xml', 'w') as f:
        f.write(text.replace(old, new)) 
```

然后在执行上述 XML 操作之前运行：

```
replace_in_config('gco:', '_stripped') 
```

然后在 XMl 操作完成后（当然，您需要考虑`gco:Date`标签现在`stripped_Date`和 CharacterString 标签一样的事实），运行以下命令：

```
replace_in_config('_stripped', 'gco:') 
```

这将保留原始格式并允许您使用`etree`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:35:21.200

我认为您的 XML 文档无效，因为尚未定义“gco”命名空间。

我找不到将定义提供给 lxml 作为 parse 命令的一部分的方法。您可以按照@mjgpy3 的建议操作文档以添加定义或删除前缀。

另一种方法可能是使用 HTML 解析器，因为它对接受的内容没有那么严格。请注意，这将更改数据结构以添加 HTML 标头等。

```
from lxml import etree

Parser = etree.HTMLParser()
XMLDoc = etree.parse(open('C:/Temp/Test.xml', 'r'), Parser)

Elements = XMLDoc.xpath('//characterstring')

for Element in Elements:
    print Element.text 
```

# c++ - 在 Xcode 中使用 C++ 和 OpenGL

> ID：11988835
> 
> 赞同：2
> 
> 时间：2012-08-16T13:59:32.447
> 
> 标签：c++, objective-c, xcode, opengl, xcode4

我的目标是在 C++ 和 OpenGL 中开发基于跨平台的应用程序。

由于我使用的是 Macbook Pro，它的自然 IDE 是 Xcode，所以我想使用它。通过使用命令行工具作为项目的模板，我已经成功地在 Xcode 中编译了纯 C++ 代码。

我的问题是如何编译 OpenGL 代码而不弄乱 Cocoa 和 Objective-C。这背后的主要原因是，由于我想部署跨平台的应用程序，所以我想尽可能地坚持 C++。

虽然这是真的，但如果我必须使用一点 Objective-C 和 Cocoa，那也不是什么大问题。但是我想在 C++ 中获取我的主要项目代码和尽可能少的 Objective-C/Cocoa，通过“主要项目代码”来理解我的应用程序特定的代码，例如我的类、对象和与应用程序的目的，即。，代码的主体。

如果在不使用 Obj-C/Cocoa 的情况下使用 C++/OpenGL 在复杂性方面不值得，那么问题可以简单地重新表述为在 Xcode 中编译简单 OpenGL 代码的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:13:19.240

OpenGL 是一个跨平台 API，但是它非常特定于在现有图形上下文上执行图形操作，并且不包括创建这样的上下文或处理窗口事件或任何其他需要与平台特定功能集成的东西。这留给平台特定的 API。

每个平台的 OpenGL 实现将包括用于执行必要任务的平台特定 API。Windows 有 WGL，X11 有 GLX，OS X 有低级别的 CGL 或高级别的 NSOpenGLView。如果没有在某些级别上使用这些特定于平台的 API，就无法使用 OpenGL。此外，仅仅获得任何类型的 GUI 都需要这种特定于平台的相同类型的代码。

有些项目包装了各种特定于平台的 API，以提供可移植的 API 来创建上下文并处理 OpenGL 范围之外的窗口和其他事件。开始使用 OpenGL 时最常用的一种是 GLUT。OS X 提供了一个带有 GLUT 的框架，但是它还没有更新为使用 OS X 最新的 OpenGL 支持，并且仍然停留在 OpenGL 2.x 上。在 2.x 和 3.x 之间引入了 OpenGL Core 配置文件后，OpenGL API 发生了很大变化。这意味着您目前不能使用 GLUT 在 OS X 上编写现代 OpenGL 程序。

此外，由于其跨平台特性，GLUT 永远无法提供符合平台标准的体面的 GUI。提供一个像样的 GUI 总是意味着直接使用特定于平台的 API，或者至少在设计 GUI 时考虑到特定的平台。

平台之间的另一个区别是，在 OS X 上，您可以使用任何支持的 OpenGL 版本，只需包括标准 OpenGL 头文件和调用函数并使用标识符，就像使用任何其他库一样。在 Windows 上，OpenGL 标头不提供任何超过 OpenGL 1.2 的东西，这是古老的，并且使用任何更新的 OpenGL 工具意味着通过 OpenGL 的扩展机制访问它。还有另一个库 GLEW，旨在使在这些情况下使用 OpenGL 变得可以忍受。

所以 OpenGL 是一个跨平台的 API，但您很可能需要在核心 OpenGL 代码周围使用一些特定于平台的代码才能有效地使用它。GLUT 可能是一个很好的跨平台选项，至少对于学习 OpenGL 来说是这样，只是它尚未在 OS X 上更新以支持 OpenGL 3.x 引入的 OpenGL Core 配置文件。但即使使用 GLUT，您也必须通过 OpenGL 扩展机制或直接通过最新的标头来处理访问 OpenGL 设施的方式的差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:45:43.697

由于 Qt 可以轻松地制作跨平台应用程序，因此考虑使用此 API 可能会很好。他们有 OpenGL 模块，您可以在 XCode 中进行设置：http: [//qtnode.net/wiki/Qt4_with_Xcode](http://qtnode.net/wiki/Qt4_with_Xcode)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:07:14.827

**OpenGL**非常值得花时间学习。**OpenGL**是一个*基于 C 的、平台中立的 API*

尝试从[这里](http://nehe.gamedev.net)开始学习 GL 的基础知识。

~~我建议您使用**GLUT**进行平台无关的窗口工作。[在这里](http://www.opengl.org/resources/libraries/glut/)找到~~

为您的平台独立窗口工作使用**freeglut会有所帮助。**[在这里](http://freeglut.sourceforge.net/)找到

# javascript - 图像作为价值

> ID：11988836
> 
> 赞同：2
> 
> 时间：2012-08-16T13:59:36.257
> 
> 标签：javascript, jquery, html, css

在默认浏览器样式上发布了一个 control-buttnos 接口。我尝试使用带有图像作为值的标准按钮（）

HTML：

```
<div id="control-play" class="button"><span></span><input type="button" value=""/></div> 
```

CSS：

```
#control-play span {background-image: url('../i/ruler/play.png'); margin: 16px 0 0 18px; position: absolute; width: 16px; height: 16px;} 
```

但是，当光标悬停在图像上时，我当然会遇到 :hover 事件的问题：

![情况](../Images/0c189563d3174cb12883e75e7c09c9b0.png)

在 JS 中，我可以通过捕获图像的 onClick 来激活点击：

```
$('#control-play span').click(function(){$(this).parent().find('input').click();}) 
```

但**我不能为 onHover 事件做到这一点**。

如您所见，我不模仿 :hover {} 和 :active() 样式，我使用默认样式。我可以抓取图像并将它们用作背景，但这似乎不是一个好的技巧。

那么，同事们，有什么想法吗？欢迎使用任何 jQuery、CSS3 或 HTML5。

**UPD：**我仔细提到过，但大多数答案都建议切换按钮的整个背景。注意：我使用带有浏览器样式的按钮，我只是尝试使用 16x16 图标而不是文本标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:09:38.160

```
<div class="button">
//height and width of this DIV should be same as `input[button]`
  <input type="button" />
</div>

<style>
.button{
   background: url("your_normal_image.jpg") no-repeat 0 0;
   height: 123px;
   width: 123px;
   }
.button:hover, .button.some_class{
   background: url("your_hover_image.jpg") no-repeat 0 0;
   }
.button input[type="button"]{
   opacity: 0;}

</style> 
```

`.some_class`对于使用 Jquery添加的点击事件`.button`- 代码看起来像

```
 <div class="button some_class">
    //toggle between  ".some_class"

      <input type="button" />
    </div> 
```

另一种方法是 - 玩风格而不是使用图像精灵方法`background-position:`添加类**要了解更多信息：**查看[图像精灵](http://css-tricks.com/css-sprites/)文章`.someclass`

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:34:31.603

你有 3 个运行良好的 CSS 动作
注意： **!important** 将通过赋予这部分更高的优先级来强制背景发生变化

```
<style>
.button{
   background: url("background.png") no-repeat 0 0;
   height: 123px;
   width: 123px;
   border:0;   // this part is important otherwise it leaves the borders
   }
.button:hover{
  background: url("background.png") no-repeat -123px 0 !important ;
  }  //moves the bg image up
.button:active{
   background: url("background.png") no-repeat -246px 0 !important ;
  } //move the bg up  more when yu push the button
</style> 
```

对于初学者，您可以使用 3 个单独的图像，这将导致第一次悬停或单击时加载延迟：

```
<style>
.button{
   background: url("background.png") no-repeat 0 0;
   height: 123px;
   width: 123px;
   border:0;   // this part is important otherwise it leaves the borders
   }
.button:hover{background: url("background1.png") no-repeat 0 0 !important;}   
.button:active{background: url("background2.png") no-repeat -246px 0 !important ;}  
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:11:25.200

如果我理解正确......你想使用精灵。Sprites 是在一张图像中同时具有 Hover BG 和 Standard BG 的背景图像。在这种情况下，两个 16px x 16px 的图像将位于一个总宽度为 32px x 16px 的图像文件中；

然后，您可以使用 CSS 切换背景位置，仅使用 CSS 创建平滑的悬停效果。

```
#control-play span 
{
    background-image: url('../i/ruler/play.png');
    width:16px;
    height:16px;
    background-position: 16px 0px;
}

#control-play span:hover
{
    background-position: -16px 0px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:32:46.750

我想说最语义化的方式是：

**HTML：**

`<input type="button" class="button" value="Submit" />`

或者

`<button type="submit" class="button">Submit</button>`

**CSS：**

```
.button {
display: block;
width: 16px;
height: 16px;
background: url('../i/ruler/play.png') top left;
border: 0;
}

.button:hover {
background-position: bottom;
cursor: pointer;
} 
```

这样您就不必依赖任何 Javascript（也可以关闭 Javascript..）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T06:07:25.310

最合适的答案是使用 HTML5`<button>...</button>`而不是`<input type=button value=""/>`

HTML：

```
<button type="button" id="control-play" title="Play"><span></span></button> 
```

CSS：

```
button#control-play {width: 50px; height: 49px;}
button#control-play span {display: inline-block; background: url('../i/ruler/play.png') no-repeat;} 
```

不需要精灵，3个背景可以模仿标准浏览器的按钮机会。每个人都会以自己喜欢的风格使用这些按钮（甚至使用浏览器的皮肤），只有我的图标是永久的。

通过[Pointy](https://stackoverflow.com/users/182668/pointy)的评论。**

# c - 在C中malloc'ing一个多维数组

> ID：11988838
> 
> 赞同：0
> 
> 时间：2012-08-16T13:59:44.087
> 
> 标签：c, multidimensional-array, malloc

我正在制作一个 C 函数以集成到 Python 中，该函数基本上创建一个二维字符数组（每行具有恒定的已知长度），将一些数据读入其中，从中构建一个 numpy 数组，并将其返回给调用函数在 Python 中。我不是 C 方面的专家，但我相信为了在退出创建它的函数后将数组保留在内存中，我需要使用 malloc 在堆上分配它。所以我正在尝试这条线：

```
//rowSize and interleaved are both integers; bytesPerTable is equal to rowSize * interleaved
char arrs[interleaved][rowSize] = (char **)malloc(bytesPerTable * sizeof(char)); 
```

这给了我编译器错误

```
error: variable-sized object may not be initialized 
```

我不知道如何使这项工作。我想分配一块我需要的内存块（bytesPerTable），然后将它组织成所需的二维数组。如果我简单地声明

```
char arrs[interleaved][rowSize]; 
```

然后它可以工作，但它在堆栈而不是堆上。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:02:30.793

你需要的是这样的：

```
char** arrs = (char **)malloc(interleaved * sizeof(char*));
for(i = 0; i < bytesPerTable; i++)
    arrs[i] = (char*)malloc(rowSize * sizeof(char)); 
```

这：`char arrs[interleaved][rowSize];`只是一个典型的堆栈分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:02:38.907

像这样做

```
char (*arrs)[rowSize] = malloc(bytesPerTable); 
```

数组不能被分配，指针和数组实际上是不同类型的对象。

还：

*   不要强制返回 malloc
*   `sizeof(char)``1`根据定义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:03:04.780

您需要将它分配给一个指针，然后您可以将它转换为一个数组。

# r - R Grep 变量的文件名

> ID：11988839
> 
> 赞同：0
> 
> 时间：2012-08-16T13:59:52.383
> 
> 标签：r, regex, file

我是 R 新手，所以我正在努力解决我想象的一个相当简单的问题。对于这个问题，我不是在找人给我一个解决方案。我希望有人可以向我解释答案，这样我就可以学会自己做，而不仅仅是复制你所做的。话虽如此，这是我的问题和疑问。

我正在用 R 制作直方图。用户将提交一个文件，该文件中的数据将用于制作直方图。已经设置并完成了很多工作。我遇到的问题是我只需要获取该文件名的一部分并使用它来帮助为直方图制作标题。文件名有点像怪物，并遵循以下命名约定：

> X_Y.doc.Z.x_y_z

我需要的那个文件名的方面是 Y 和 Z。我知道很多人使用 grep，但我不知道在这种情况下如何使用它。我已经阅读了 ??grep 页面并且熟悉 grep 的基础知识，但不知道从哪里开始。

最后，我还需要从 excel 文件中 grep 一些信息，如果有人也愿意在这件事上给我建议的话。如果有帮助，这就是我接受文件的方式：

```
F.n<-(tk_choose.files(default="", caption="Select a file", multi=TRUE, filters=NULL, index=1)) 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:28:42.557

已经给出的答案`stringr`非常好。该软件包为您提供了一些非常有用的字符串处理工具。

如果您只想使用 base，您可以使用`gsub`. 假设您的标点符号保持不变，并且 X、Y 或 Z 中不会有任何嵌入的句点或下划线，这样的东西应该可以工作

```
f <- 'X_Y.doc.Z.x_y_z'
gsub('^.+_(.+)\\.doc\\.(.+)\\..+_.+$', '\\1 \\2', f) 
```

返回：

```
"Y Z" 
```

你可以把你想要的任何东西放在那里，这样更容易拿到每一块，或者可以在两行中执行此操作，每行返回一个。请记住，R 几乎从不更改数据。您需要将函数的输出分配给如下变量。否则它只会打印到控制台并“丢失”（*大多数*情况下都是如此）。

```
y <- gsub('^.+_(.+)\\.doc\\..+\\..+_.+$', '\\1', f)
z <- gsub('^.+_.+\\.doc\\.(.+)\\..+_.+$', '\\1', f) 
```

让我们分解一下。

`^`指定行的开头。明确一点是好的。类似地`$`标识一行的结尾。

`.`表示任何字符，并在其后加上`+`一个或多个任何字符的意思。如果你使用它`.*`而不是`.+`它意味着零个或多个任何字符，这不是我们想要的。如果我想写一个普通的`.`，我需要转义它，因为它是一个特殊字符。 `\`是正则表达式和 R 的转义字符。所以......你需要两个。要写一个正常的时期，你需要写`\\.`

清楚地确定。最后，括号代表我要保存的组。稍后可以使用指示您保存它们的顺序的数字来引用它们。在某些语言中，这些括号也需要转义，但 R 不需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:25:34.153

Grep 使用[正则表达式](http://stat.ethz.ch/R-manual/R-patched/library/base/html/regex.html)来搜索匹配模式的子字符串。对于从文件名匹配某些元素的问题，您可能希望使用**捕获组**来提取不同的部分。

带有捕获组的正则表达式示例如下：

```
"Hello, (\w+)" 
```

匹配格式为“Hello, Friend”的字符串。下面是对模式的解释：

*   `\w`将匹配一个“单词字符”，而
*   `+`意味着至少一个，但其中多个将被匹配。
*   对于文件名约定的其他结构部分，我们可以`_`按原样包含但必须转义`.`，因为它们在正则表达式中具有特殊含义。
*   要定义要匹配的组（捕获组），请将要匹配的部分放在括号中`(\w+)`

使用所有这些，我们得到以下模式：

```
"(\w+)_(\w+)\.doc\.(\w+)\.(\w+)_(\w+)_(\w+)" 
```

为了让模式在 R 中工作，我们必须将所有`\`字符转义为`\\`：

```
> pattern = "(\\w+)_(\\w+)\\.doc\.(\\w+)\\.(\\w+)_(\\w+)_(\\w+)" 
```

虽然 grep 和 regex 功能强大，但我个人更喜欢[stringr](http://cran.r-project.org/web/packages/stringr/index.html)包，因为它的界面更简单，特别是该`str_match`函数非常有用，因为它会返回一个矩阵，其中第 1 列给出完整匹配，所有后续列给出捕获组的匹配：

```
> x = "X_Y.doc.Z.x_y_z"
> str_match(x, pattern)

     [,1]              [,2] [,3] [,4] [,5] [,6] [,7]
[1,] "X_Y.doc.Z.x_y_z" "X"  "Y"  "Z"  "x"  "y"  "z" 
```

如果您不熟悉正则表达式，那么您应该可以使用任何语言的教程，例如[这个](http://www.regular-expressions.info/tutorial.html)。语法大多相似，但仅在细节上有所不同，并非所有编程语言都支持所有功能。如果您想在将表达式放入程序之前尝试一下，我强烈推荐[RegexPal](http://regexpal.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:01:22.507

在这种只需要一个位于明确定义的位置的字母的简单情况下，`substr`可能会更简单：

```
> a <- "X_Y.doc.Z.x_y_z"
> substr(a, 3, 3)
[1] "Y"
> substr(a, 9, 9)
[1] "Z" 
```

# c# - 将网站的 xml 转换为内存流

> ID：11988841
> 
> 赞同：-1
> 
> 时间：2012-08-16T14:00:18.420
> 
> 标签：c#, asp.net

我有一个动态生成 RSS 提要的网页。

```
http://localhost/syn/atom.aspx 
```

这会动态生成 rss 提要。

我正在尝试从我的外部应用程序访问 rss，在这种特殊情况下，我需要将 rss 页面下载到内存流中。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:12:12.673

```
WebRequest request = WebRequest.Create("http://localhost/syn/rss.aspx");
WebResponse response = request.GetResponse();
Console.WriteLine(((HttpWebResponse)response).StatusDescription);
Stream dataStream = response.GetResponseStream();
return dataStream; 
```

# web-applications - HTML5 Pushstate SEO

> ID：11988846
> 
> 赞同：1
> 
> 时间：2012-08-16T14:00:34.337
> 
> 标签：web-applications, seo, pushstate

Google 在请求的 URL 中找到 hashbang (#) 时使用 *?_escaped_fragment_*，但在我的新应用程序中我使用的是 HTML5 PushState，所以我不再使用 hashbangs，google 怎么知道如何路由到 */ ?_escaped_fragment_=blogs* 代替*/blogs*如果它不包含井号 (#)。

它是否依赖于robot.txt 或sitemap.xml？

我了解 Google 会路由到不同的 url，然后返回 HTML 快照。是否有任何库（首选 Node.js 或 PHP）用于生成库？也许是教程？

整天都在谷歌开发者文档中，但就是想不通这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:42:18.010

这 ＃！来自 Google 的支持是一种解决问题的技巧，而 pushstate 功能是一种干净的解决方案。它们是不同的，您的片段参数对 pushstate 没有任何意义。

您需要确保通过 pushstate 创建的所有真实 URL 返回正确且相关的内容。然后谷歌会像普通网站一样索引它。

# visual-studio - 十六进制的所有 Microsoft 标准颜色

> ID：11988848
> 
> 赞同：5
> 
> 时间：2012-08-16T14:00:37.803
> 
> 标签：visual-studio, colors, hex, color-picker

最近我一直在将 Visual Studio (C#) 项目转换为网络。其中一项功能涉及从 MS 标准调色板中进行选择的能力。

所以我需要一个十六进制的 MS 标准颜色列表。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T14:01:30.487

搜索后我找不到这些 ARGB 颜色的十六进制列表，所以我写了一些 JS 来为我转换它们。

我想我不能成为唯一需要这些的人，所以给你！

> 爱丽丝蓝#F0F8FF
> 
> 古董白 #FAEBD7
> 
> 水色#00FFFF
> 
> 海蓝宝石#7FFFD4
> 
> 天蓝色#F0FFFF
> 
> 米色 #F5F5DC
> 
> 素瓷#FFE4C4
> 
> 黑色#000000
> 
> 白杏仁#FFEBCD
> 
> 蓝色#0000FF
> 
> 蓝紫#8A2BE2
> 
> 棕色 #A52A2A
> 
> BurlyWood #DEB887
> 
> 少年蓝 #5F9EA0
> 
> 黄绿色 #7FFF00
> 
> 巧克力#D2691E
> 
> 珊瑚#FF7F50
> 
> 矢车菊蓝 #6495ED
> 
> 玉米丝 #FFF8DC
> 
> 深红色#DC143C
> 
> 青色 #00FFFF
> 
> 深蓝#00008B
> 
> 深青色#008B8B
> 
> 暗金棒#B8860B
> 
> 深灰色 #A9A9A9
> 
> 深绿色 #006400
> 
> 深卡其色 #BDB76B
> 
> 深洋红色 #8B008B
> 
> 深橄榄绿#556B2F
> 
> 深橙色 #FF8C00
> 
> 黑兰花#9932CC
> 
> 深红色 #8B0000
> 
> 黑鲑鱼#E9967A
> 
> 深海绿#8FBC8F
> 
> DarkSlateBlue #483D8B
> 
> DarkSlateGray #2F4F4F
> 
> 深绿松石 #00CED1
> 
> 暗紫#9400D3
> 
> DeepPink #FF1493
> 
> 深天蓝#00BFFF
> 
> 暗灰色 #696969
> 
> 道奇蓝 #1E90FF
> 
> 耐火砖#B22222
> 
> 花白#FFFAF0
> 
> 森林绿#228B22
> 
> 紫红色#FF00FF
> 
> 盖恩斯伯勒#DCDCDC
> 
> 鬼白#F8F8FF
> 
> 金#FFD700
> 
> 一枝黄#DAA520
> 
> 灰色 #808080
> 
> 绿色#008000
> 
> 绿黄#ADFF2F
> 
> 蜜露#F0FFF0
> 
> HotPink #FF69B4
> 
> 印度红#CD5C5C
> 
> 靛蓝 #4B0082
> 
> 象牙色#FFFFF0
> 
> 卡其色 #F0E68C
> 
> 薰衣草 #E6E6FA
> 
> 薰衣草腮红 #FFF0F5
> 
> 草坪绿#7CFC00
> 
> 柠檬雪纺#FFFACD
> 
> 浅蓝色 #ADD8E6
> 
> 光珊瑚#F08080
> 
> 浅青色#E0FFFF
> 
> LightGoldenrodYellow #FAFAD2
> 
> 浅灰色#D3D3D3
> 
> 浅绿色 #90EE90
> 
> 浅粉色#FFB6C1
> 
> 淡鲑鱼#FFA07A
> 
> 浅海绿#20B2AA
> 
> 天蓝#87CEFA
> 
> LightSlateGray #778899
> 
> LightSteelBlue #B0C4DE
> 
> 浅黄色#FFFFE0
> 
> 石灰 #00FF00
> 
> 青柠#32CD32
> 
> 亚麻布#FAF0E6
> 
> 洋红色 #FF00FF
> 
> 栗色 #800000
> 
> 中等海蓝宝石#66CDAA
> 
> 中蓝#0000CD
> 
> 中兰花#BA55D3
> 
> 中紫#9370DB
> 
> 中海绿#3CB371
> 
> 中石板蓝#7B68EE
> 
> 中春绿#00FA9A
> 
> 中绿松石 #48D1CC
> 
> 中紫红#C71585
> 
> 午夜蓝 #191970
> 
> 薄荷奶油#F5FFFA
> 
> MistyRose #FFE4E1
> 
> 莫卡辛鞋 #FFE4B5
> 
> 纳瓦霍白人#FFDEAD
> 
> 海军 #000080
> 
> 旧花边 #FDF5E6
> 
> 橄榄 #808000
> 
> 橄榄色#6B8E23
> 
> 橙色#FFA500
> 
> 橙红#FF4500
> 
> 兰花#DA70D6
> 
> PaleGoldenrod #EEE8AA
> 
> 淡绿色 #98FB98
> 
> 浅绿松石色#AFEEEE
> 
> 淡紫红色#DB7093
> 
> 木瓜鞭#FFEFD5
> 
> 桃子泡芙#FFDAB9
> 
> 秘鲁#CD853F
> 
> 粉色#FFC0CB
> 
> 李子 #DDA0DD
> 
> 粉蓝#B0E0E6
> 
> 紫色 #800080
> 
> 红色#FF0000
> 
> 玫红#BC8F8F
> 
> 宝蓝#4169E1
> 
> 鞍棕色 #8B4513
> 
> 三文鱼#FA8072
> 
> SandyBrown #F4A460
> 
> 海绿#2E8B57
> 
> 贝壳#FFF5EE
> 
> 西耶娜 #A0522D
> 
> 银色 #C0C0C0
> 
> 天蓝#87CEEB
> 
> 板岩蓝 #6A5ACD
> 
> 板岩灰 #708090
> 
> 雪#FFFAFA
> 
> 春绿#00FF7F
> 
> 钢蓝#4682B4
> 
> 棕褐色#D2B48C
> 
> 蓝绿色 #008080
> 
> 蓟#D8BFD8
> 
> 番茄#FF6347
> 
> 透明 无
> 
> 绿松石 #40E0D0
> 
> 紫罗兰色#EE82EE
> 
> 小麦#F5DEB3
> 
> 白色#FFFFFF
> 
> 白烟#F5F5F5
> 
> 黄色#FFFF00
> 
> 黄绿#9ACD32

或者作为一个 CSS 类块：

```
.AliceBlue{background-color:#F0F8FF;}
.AntiqueWhite{background-color:#FAEBD7;}
.Aqua{background-color:#00FFFF;}
.Aquamarine{background-color:#7FFFD4;}
.Azure{background-color:#F0FFFF;}
.Beige{background-color:#F5F5DC;}
.Bisque{background-color:#FFE4C4;}
.Black{background-color:#000000;}
.BlanchedAlmond{background-color:#FFEBCD;}
.Blue{background-color:#0000FF;}
.BlueViolet{background-color:#8A2BE2;}
.Brown{background-color:#A52A2A;}
.BurlyWood{background-color:#DEB887;}
.CadetBlue{background-color:#5F9EA0;}
.Chartreuse{background-color:#7FFF00;}
.Chocolate{background-color:#D2691E;}
.Coral{background-color:#FF7F50;}
.CornflowerBlue{background-color:#6495ED;}
.Cornsilk{background-color:#FFF8DC;}
.Crimson{background-color:#DC143C;}
.Cyan{background-color:#00FFFF;}
.DarkBlue{background-color:#00008B;}
.DarkCyan{background-color:#008B8B;}
.DarkGoldenrod{background-color:#B8860B;}
.DarkGray{background-color:#A9A9A9;}
.DarkGreen{background-color:#006400;}
.DarkKhaki{background-color:#BDB76B;}
.DarkMagenta{background-color:#8B008B;}
.DarkOliveGreen{background-color:#556B2F;}
.DarkOrange{background-color:#FF8C00;}
.DarkOrchid{background-color:#9932CC;}
.DarkRed{background-color:#8B0000;}
.DarkSalmon{background-color:#E9967A;}
.DarkSeaGreen{background-color:#8FBC8F;}
.DarkSlateBlue{background-color:#483D8B;}
.DarkSlateGray{background-color:#2F4F4F;}
.DarkTurquoise{background-color:#00CED1;}
.DarkViolet{background-color:#9400D3;}
.DeepPink{background-color:#FF1493;}
.DeepSkyBlue{background-color:#00BFFF;}
.DimGray{background-color:#696969;}
.DodgerBlue{background-color:#1E90FF;}
.Firebrick{background-color:#B22222;}
.FloralWhite{background-color:#FFFAF0;}
.ForestGreen{background-color:#228B22;}
.Fuchsia{background-color:#FF00FF;}
.Gainsboro{background-color:#DCDCDC;}
.GhostWhite{background-color:#F8F8FF;}
.Gold{background-color:#FFD700;}
.Goldenrod{background-color:#DAA520;}
.Gray{background-color:#808080;}
.Green{background-color:#008000;}
.GreenYellow{background-color:#ADFF2F;}
.Honeydew{background-color:#F0FFF0;}
.HotPink{background-color:#FF69B4;}
.IndianRed{background-color:#CD5C5C;}
.Indigo{background-color:#4B0082;}
.Ivory{background-color:#FFFFF0;}
.Khaki{background-color:#F0E68C;}
.Lavender{background-color:#E6E6FA;}
.LavenderBlush{background-color:#FFF0F5;}
.LawnGreen{background-color:#7CFC00;}
.LemonChiffon{background-color:#FFFACD;}
.LightBlue{background-color:#ADD8E6;}
.LightCoral{background-color:#F08080;}
.LightCyan{background-color:#E0FFFF;}
.LightGoldenrodYellow{background-color:#FAFAD2;}
.LightGray{background-color:#D3D3D3;}
.LightGreen{background-color:#90EE90;}
.LightPink{background-color:#FFB6C1;}
.LightSalmon{background-color:#FFA07A;}
.LightSeaGreen{background-color:#20B2AA;}
.LightSkyBlue{background-color:#87CEFA;}
.LightSlateGray{background-color:#778899;}
.LightSteelBlue{background-color:#B0C4DE;}
.LightYellow{background-color:#FFFFE0;}
.Lime{background-color:#00FF00;}
.LimeGreen{background-color:#32CD32;}
.Linen{background-color:#FAF0E6;}
.Magenta{background-color:#FF00FF;}
.Maroon{background-color:#800000;}
.MediumAquamarine{background-color:#66CDAA;}
.MediumBlue{background-color:#0000CD;}
.MediumOrchid{background-color:#BA55D3;}
.MediumPurple{background-color:#9370DB;}
.MediumSeaGreen{background-color:#3CB371;}
.MediumSlateBlue{background-color:#7B68EE;}
.MediumSpringGreen{background-color:#00FA9A;}
.MediumTurquoise{background-color:#48D1CC;}
.MediumVioletRed{background-color:#C71585;}
.MidnightBlue{background-color:#191970;}
.MintCream{background-color:#F5FFFA;}
.MistyRose{background-color:#FFE4E1;}
.Moccasin{background-color:#FFE4B5;}
.NavajoWhite{background-color:#FFDEAD;}
.Navy{background-color:#000080;}
.OldLace{background-color:#FDF5E6;}
.Olive{background-color:#808000;}
.OliveDrab{background-color:#6B8E23;}
.Orange{background-color:#FFA500;}
.OrangeRed{background-color:#FF4500;}
.Orchid{background-color:#DA70D6;}
.PaleGoldenrod{background-color:#EEE8AA;}
.PaleGreen{background-color:#98FB98;}
.PaleTurquoise{background-color:#AFEEEE;}
.PaleVioletRed{background-color:#DB7093;}
.PapayaWhip{background-color:#FFEFD5;}
.PeachPuff{background-color:#FFDAB9;}
.Peru{background-color:#CD853F;}
.Pink{background-color:#FFC0CB;}
.Plum{background-color:#DDA0DD;}
.PowderBlue{background-color:#B0E0E6;}
.Purple{background-color:#800080;}
.Red{background-color:#FF0000;}
.RosyBrown{background-color:#BC8F8F;}
.RoyalBlue{background-color:#4169E1;}
.SaddleBrown{background-color:#8B4513;}
.Salmon{background-color:#FA8072;}
.SandyBrown{background-color:#F4A460;}
.SeaGreen{background-color:#2E8B57;}
.SeaShell{background-color:#FFF5EE;}
.Sienna{background-color:#A0522D;}
.Silver{background-color:#C0C0C0;}
.SkyBlue{background-color:#87CEEB;}
.SlateBlue{background-color:#6A5ACD;}
.SlateGray{background-color:#708090;}
.Snow{background-color:#FFFAFA;}
.SpringGreen{background-color:#00FF7F;}
.SteelBlue{background-color:#4682B4;}
.Tan{background-color:#D2B48C;}
.Teal{background-color:#008080;}
.Thistle{background-color:#D8BFD8;}
.Tomato{background-color:#FF6347;}
.Transparent{background-color:none;}
.Turquoise{background-color:#40E0D0;}
.Violet{background-color:#EE82EE;}
.Wheat{background-color:#F5DEB3;}
.White{background-color:#FFFFFF;}
.WhiteSmoke{background-color:#F5F5F5;}
.Yellow{background-color:#FFFF00;}
.YellowGreen{background-color:#9ACD32;} 
```

**将 ARGB 转换为 HEX 的代码**

```
if (!Array.prototype.forEach)
{
  Array.prototype.forEach = function(fun /*, thisp*/)
  {
    var len = this.length;
    if (typeof fun != "function")
      throw new TypeError();

    var thisp = arguments[1];
    for (var i = 0; i < len; i++)
    {
      if (i in this)
        fun.call(thisp, this[i], i, this);
    }
  };
}

var colors;
colors = new Array; 

colors.push("#FFF0F8FF","#FFFAEBD7","#FF00FFFF","#FF7FFFD4","#FFF0FFFF","#FFF5F5DC","#FFFFE4C4","#FF000000","#FFFFEBCD","#FF0000FF","#FF8A2BE2","#FFA52A2A","#FFDEB887","#FF5F9EA0","#FF7FFF00","#FFD2691E","#FFFF7F50","#FF6495ED","#FFFFF8DC","#FFDC143C","#FF00FFFF","#FF00008B","#FF008B8B","#FFB8860B","#FFA9A9A9","#FF006400","#FFBDB76B","#FF8B008B","#FF556B2F","#FFFF8C00","#FF9932CC","#FF8B0000","#FFE9967A","#FF8FBC8F","#FF483D8B","#FF2F4F4F","#FF00CED1","#FF9400D3","#FFFF1493","#FF00BFFF","#FF696969","#FF1E90FF","#FFB22222","#FFFFFAF0","#FF228B22","#FFFF00FF","#FFDCDCDC","#FFF8F8FF","#FFFFD700","#FFDAA520","#FF808080","#FF008000","#FFADFF2F","#FFF0FFF0","#FFFF69B4","#FFCD5C5C","#FF4B0082","#FFFFFFF0","#FFF0E68C","#FFE6E6FA","#FFFFF0F5","#FF7CFC00","#FFFFFACD","#FFADD8E6","#FFF08080","#FFE0FFFF","#FFFAFAD2","#FFD3D3D3","#FF90EE90","#FFFFB6C1","#FFFFA07A","#FF20B2AA","#FF87CEFA","#FF778899","#FFB0C4DE","#FFFFFFE0","#FF00FF00","#FF32CD32","#FFFAF0E6","#FFFF00FF","#FF800000","#FF66CDAA","#FF0000CD","#FFBA55D3","#FF9370DB","#FF3CB371","#FF7B68EE","#FF00FA9A","#FF48D1CC","#FFC71585","#FF191970","#FFF5FFFA","#FFFFE4E1","#FFFFE4B5","#FFFFDEAD","#FF000080","#FFFDF5E6","#FF808000","#FF6B8E23","#FFFFA500","#FFFF4500","#FFDA70D6","#FFEEE8AA","#FF98FB98","#FFAFEEEE","#FFDB7093","#FFFFEFD5","#FFFFDAB9","#FFCD853F","#FFFFC0CB","#FFDDA0DD","#FFB0E0E6","#FF800080","#FFFF0000","#FFBC8F8F","#FF4169E1","#FF8B4513","#FFFA8072","#FFF4A460","#FF2E8B57","#FFFFF5EE","#FFA0522D","#FFC0C0C0","#FF87CEEB","#FF6A5ACD","#FF708090","#FFFFFAFA","#FF00FF7F","#FF4682B4","#FFD2B48C","#FF008080","#FFD8BFD8","#FFFF6347","","#FF40E0D0","#FFEE82EE","#FFF5DEB3","#FFFFFFFF","#FFF5F5F5","#FFFFFF00","#FF9ACD32")

var newColor = "";

function switchColor(element, index, array) {
   newColor += '#' + element.substring(3) + ','; 
}

colors.forEach(switchColor); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:22:38.580

作为额外的奖励，我还希望每种颜色的颜色稍暗一点，以用作边框。我合并了一些 JS 来获得我需要的东西：

稍暗的版本：

> 爱丽丝蓝#d2e1da
> 
> AntiqueWhite #dcb9cd
> 
> 水族#00e1e1
> 
> 海蓝宝石#61b6e1
> 
> 天蓝色#d2e1e1
> 
> 米色 #d7bed7
> 
> 浓汤#e1a6c6
> 
> 黑色#000000
> 
> 白杏仁#e1afcd
> 
> 蓝色 #00e100
> 
> 蓝紫#6cc40d
> 
> 棕色 #870c0c
> 
> BurlyWood #c0699a
> 
> CadetBlue #418280
> 
> 黄绿色 #6100e1
> 
> 巧克力#b4004b
> 
> 珊瑚#e13261
> 
> 矢车菊蓝 #46cf77
> 
> 玉米丝#e1beda
> 
> 深红色#be1e00
> 
> 青色 #00e1e1
> 
> 深蓝 #006d00
> 
> 深青色 #006d6d
> 
> DarkGoldenrod #9a0068
> 
> 深灰色 #8b8b8b
> 
> 深绿色 #000046
> 
> 深卡其色 #9f4d99
> 
> 深洋红色 #6d6d00
> 
> DarkOliveGreen #37114d
> 
> 深橙色#e1006e
> 
> 黑兰花#7bae14
> 
> 暗红色 #6d0000
> 
> 黑鲑鱼#cb5c78
> 
> 深海绿#71719e
> 
> DarkSlateBlue #2a6d1f
> 
> DarkSlateGray #113131
> 
> 深绿松石 #00b3b0
> 
> 暗紫色 #76b500
> 
> 深粉色#e17500
> 
> 深天蓝 #00e1a1
> 
> 暗灰色 #4b4b4b
> 
> 道奇蓝 #00e172
> 
> 耐火砖 #940404
> 
> 花白色#e1d2dc
> 
> ForestGreen #04046d
> 
> 紫红色#e1e100
> 
> 盖恩斯伯勒#bebebe
> 
> 鬼白#dae1da
> 
> 金#e100b9
> 
> 一枝黄花#bc0287
> 
> 灰色 #626262
> 
> 绿色#000062
> 
> 绿黄#8f11e1
> 
> 蜜露#d2d2e1
> 
> HotPink #e1964b
> 
> 印度红#af3e3e
> 
> 靛蓝 #2d6400
> 
> 象牙色#e1d2e1
> 
> 卡其色 #d26ec8
> 
> 薰衣草 #c8dcc8
> 
> 薰衣草腮红 #e1d7d2
> 
> 草坪绿#5e00de
> 
> 柠檬雪纺#e1afdc
> 
> 浅蓝色 #8fc8ba
> 
> 光珊瑚#d26262
> 
> 浅青色#c2e1e1
> 
> LightGoldenrodYellow #dcb4dc
> 
> 浅灰色#b5b5b5
> 
> 浅绿色 #7272d0
> 
> 浅粉色#e1a398
> 
> 淡鲑鱼#e15c82
> 
> 浅海绿 #028c94
> 
> 天蓝#69dcb0
> 
> LightSlateGray #597b6a
> 
> 轻钢蓝色 #92c0a6
> 
> 淡黄色#e1c2e1
> 
> 石灰 #0000e1
> 
> 青柠#1414af
> 
> 亚麻布 #dcc8d2
> 
> 洋红色 #e1e100
> 
> 栗色 #620000
> 
> 中等海蓝宝石#488caf
> 
> 中蓝#00af00
> 
> 中兰花#9cb537
> 
> 中紫#75bd52
> 
> 中海绿#1e5395
> 
> 中石板蓝#5dd04a
> 
> 中春绿#007cdc
> 
> 中绿松石 #2aaeb3
> 
> 中紫红色#a96700
> 
> 午夜蓝 #005200
> 
> 薄荷奶油#d7dce1
> 
> 迷雾玫瑰#e1c3c6
> 
> 莫卡辛鞋 #e197c6
> 
> 纳瓦霍白 #e18fc0
> 
> 海军 #006200
> 
> 旧花边 #dfc8d7
> 
> 橄榄 #620062
> 
> 橄榄色 #4d0570
> 
> 橙色 #e10087
> 
> 橙红#e10027
> 
> 兰花#bcb852
> 
> PaleGoldenrod #d08cca
> 
> 淡绿色 #7a7add
> 
> 淡绿松石 #91d0d0
> 
> 淡紫红色#bd7552
> 
> 木瓜鞭#e1b7d1
> 
> 桃子泡芙#e19bbc
> 
> 秘鲁 #af2167
> 
> 粉色#e1ada2
> 
> 梅花#bfbf82
> 
> 粉蓝#92c8c2
> 
> 紫色 #626200
> 
> 红色#e10000
> 
> 玫瑰色棕色 #9e7171
> 
> 宝蓝#23c34b
> 
> 鞍棕色 #6d0027
> 
> 三文鱼 #dc5462
> 
> 桑迪布朗 #d64286
> 
> 海绿#10396d
> 
> 贝壳#e1d0d7
> 
> 西耶娜 #820f34
> 
> 银色 #a2a2a2
> 
> 天蓝#69cdb0
> 
> 板岩蓝#4caf3c
> 
> 板岩灰 #527262
> 
> 雪#e1dcdc
> 
> 春绿#0061e1
> 
> 钢蓝#289664
> 
> 谭#b46e96
> 
> 蓝绿色 #006262
> 
> 蓟#babaa1
> 
> 番茄#e12945
> 
> 透明 #000000
> 
> 绿松石 #22b2c2
> 
> 紫罗兰色#d0d064
> 
> 小麦#d795c0
> 
> 白色#e1e1e1
> 
> 白烟#d7d7d7
> 
> 黄色#e100e1
> 
> 黄绿#7c14af

作为 CSS 块，使用较暗的版本作为边框：

```
.AliceBlue{background-color:#F0F8FF;border:1px solid #d2e1da;}
.AntiqueWhite{background-color:#FAEBD7;border:1px solid #dcb9cd;}
.Aqua{background-color:#00FFFF;border:1px solid #00e1e1;}
.Aquamarine{background-color:#7FFFD4;border:1px solid #61b6e1;}
.Azure{background-color:#F0FFFF;border:1px solid #d2e1e1;}
.Beige{background-color:#F5F5DC;border:1px solid #d7bed7;}
.Bisque{background-color:#FFE4C4;border:1px solid #e1a6c6;}
.Black{background-color:#000000;border:1px solid #000000;}
.BlanchedAlmond{background-color:#FFEBCD;border:1px solid #e1afcd;}
.Blue{background-color:#0000FF;border:1px solid #00e100;}
.BlueViolet{background-color:#8A2BE2;border:1px solid #6cc40d;}
.Brown{background-color:#A52A2A;border:1px solid #870c0c;}
.BurlyWood{background-color:#DEB887;border:1px solid #c0699a;}
.CadetBlue{background-color:#5F9EA0;border:1px solid #418280;}
.Chartreuse{background-color:#7FFF00;border:1px solid #6100e1;}
.Chocolate{background-color:#D2691E;border:1px solid #b4004b;}
.Coral{background-color:#FF7F50;border:1px solid #e13261;}
.CornflowerBlue{background-color:#6495ED;border:1px solid #46cf77;}
.Cornsilk{background-color:#FFF8DC;border:1px solid #e1beda;}
.Crimson{background-color:#DC143C;border:1px solid #be1e00;}
.Cyan{background-color:#00FFFF;border:1px solid #00e1e1;}
.DarkBlue{background-color:#00008B;border:1px solid #006d00;}
.DarkCyan{background-color:#008B8B;border:1px solid #006d6d;}
.DarkGoldenrod{background-color:#B8860B;border:1px solid #9a0068;}
.DarkGray{background-color:#A9A9A9;border:1px solid #8b8b8b;}
.DarkGreen{background-color:#006400;border:1px solid #000046;}
.DarkKhaki{background-color:#BDB76B;border:1px solid #9f4d99;}
.DarkMagenta{background-color:#8B008B;border:1px solid #6d6d00;}
.DarkOliveGreen{background-color:#556B2F;border:1px solid #37114d;}
.DarkOrange{background-color:#FF8C00;border:1px solid #e1006e;}
.DarkOrchid{background-color:#9932CC;border:1px solid #7bae14;}
.DarkRed{background-color:#8B0000;border:1px solid #6d0000;}
.DarkSalmon{background-color:#E9967A;border:1px solid #cb5c78;}
.DarkSeaGreen{background-color:#8FBC8F;border:1px solid #71719e;}
.DarkSlateBlue{background-color:#483D8B;border:1px solid #2a6d1f;}
.DarkSlateGray{background-color:#2F4F4F;border:1px solid #113131;}
.DarkTurquoise{background-color:#00CED1;border:1px solid #00b3b0;}
.DarkViolet{background-color:#9400D3;border:1px solid #76b500;}
.DeepPink{background-color:#FF1493;border:1px solid #e17500;}
.DeepSkyBlue{background-color:#00BFFF;border:1px solid #00e1a1;}
.DimGray{background-color:#696969;border:1px solid #4b4b4b;}
.DodgerBlue{background-color:#1E90FF;border:1px solid #00e172;}
.Firebrick{background-color:#B22222;border:1px solid #940404;}
.FloralWhite{background-color:#FFFAF0;border:1px solid #e1d2dc;}
.ForestGreen{background-color:#228B22;border:1px solid #04046d;}
.Fuchsia{background-color:#FF00FF;border:1px solid #e1e100;}
.Gainsboro{background-color:#DCDCDC;border:1px solid #bebebe;}
.GhostWhite{background-color:#F8F8FF;border:1px solid #dae1da;}
.Gold{background-color:#FFD700;border:1px solid #e100b9;}
.Goldenrod{background-color:#DAA520;border:1px solid #bc0287;}
.Gray{background-color:#808080;border:1px solid #626262;}
.Green{background-color:#008000;border:1px solid #000062;}
.GreenYellow{background-color:#ADFF2F;border:1px solid #8f11e1;}
.Honeydew{background-color:#F0FFF0;border:1px solid #d2d2e1;}
.HotPink{background-color:#FF69B4;border:1px solid #e1964b;}
.IndianRed{background-color:#CD5C5C;border:1px solid #af3e3e;}
.Indigo{background-color:#4B0082;border:1px solid #2d6400;}
.Ivory{background-color:#FFFFF0;border:1px solid #e1d2e1;}
.Khaki{background-color:#F0E68C;border:1px solid #d26ec8;}
.Lavender{background-color:#E6E6FA;border:1px solid #c8dcc8;}
.LavenderBlush{background-color:#FFF0F5;border:1px solid #e1d7d2;}
.LawnGreen{background-color:#7CFC00;border:1px solid #5e00de;}
.LemonChiffon{background-color:#FFFACD;border:1px solid #e1afdc;}
.LightBlue{background-color:#ADD8E6;border:1px solid #8fc8ba;}
.LightCoral{background-color:#F08080;border:1px solid #d26262;}
.LightCyan{background-color:#E0FFFF;border:1px solid #c2e1e1;}
.LightGoldenrodYellow{background-color:#FAFAD2;border:1px solid #dcb4dc;}
.LightGray{background-color:#D3D3D3;border:1px solid #b5b5b5;}
.LightGreen{background-color:#90EE90;border:1px solid #7272d0;}
.LightPink{background-color:#FFB6C1;border:1px solid #e1a398;}
.LightSalmon{background-color:#FFA07A;border:1px solid #e15c82;}
.LightSeaGreen{background-color:#20B2AA;border:1px solid #028c94;}
.LightSkyBlue{background-color:#87CEFA;border:1px solid #69dcb0;}
.LightSlateGray{background-color:#778899;border:1px solid #597b6a;}
.LightSteelBlue{background-color:#B0C4DE;border:1px solid #92c0a6;}
.LightYellow{background-color:#FFFFE0;border:1px solid #e1c2e1;}
.Lime{background-color:#00FF00;border:1px solid #0000e1;}
.LimeGreen{background-color:#32CD32;border:1px solid #1414af;}
.Linen{background-color:#FAF0E6;border:1px solid #dcc8d2;}
.Magenta{background-color:#FF00FF;border:1px solid #e1e100;}
.Maroon{background-color:#800000;border:1px solid #620000;}
.MediumAquamarine{background-color:#66CDAA;border:1px solid #488caf;}
.MediumBlue{background-color:#0000CD;border:1px solid #00af00;}
.MediumOrchid{background-color:#BA55D3;border:1px solid #9cb537;}
.MediumPurple{background-color:#9370DB;border:1px solid #75bd52;}
.MediumSeaGreen{background-color:#3CB371;border:1px solid #1e5395;}
.MediumSlateBlue{background-color:#7B68EE;border:1px solid #5dd04a;}
.MediumSpringGreen{background-color:#00FA9A;border:1px solid #007cdc;}
.MediumTurquoise{background-color:#48D1CC;border:1px solid #2aaeb3;}
.MediumVioletRed{background-color:#C71585;border:1px solid #a96700;}
.MidnightBlue{background-color:#191970;border:1px solid #005200;}
.MintCream{background-color:#F5FFFA;border:1px solid #d7dce1;}
.MistyRose{background-color:#FFE4E1;border:1px solid #e1c3c6;}
.Moccasin{background-color:#FFE4B5;border:1px solid #e197c6;}
.NavajoWhite{background-color:#FFDEAD;border:1px solid #e18fc0;}
.Navy{background-color:#000080;border:1px solid #006200;}
.OldLace{background-color:#FDF5E6;border:1px solid #dfc8d7;}
.Olive{background-color:#808000;border:1px solid #620062;}
.OliveDrab{background-color:#6B8E23;border:1px solid #4d0570;}
.Orange{background-color:#FFA500;border:1px solid #e10087;}
.OrangeRed{background-color:#FF4500;border:1px solid #e10027;}
.Orchid{background-color:#DA70D6;border:1px solid #bcb852;}
.PaleGoldenrod{background-color:#EEE8AA;border:1px solid #d08cca;}
.PaleGreen{background-color:#98FB98;border:1px solid #7a7add;}
.PaleTurquoise{background-color:#AFEEEE;border:1px solid #91d0d0;}
.PaleVioletRed{background-color:#DB7093;border:1px solid #bd7552;}
.PapayaWhip{background-color:#FFEFD5;border:1px solid #e1b7d1;}
.PeachPuff{background-color:#FFDAB9;border:1px solid #e19bbc;}
.Peru{background-color:#CD853F;border:1px solid #af2167;}
.Pink{background-color:#FFC0CB;border:1px solid #e1ada2;}
.Plum{background-color:#DDA0DD;border:1px solid #bfbf82;}
.PowderBlue{background-color:#B0E0E6;border:1px solid #92c8c2;}
.Purple{background-color:#800080;border:1px solid #626200;}
.Red{background-color:#FF0000;border:1px solid #e10000;}
.RosyBrown{background-color:#BC8F8F;border:1px solid #9e7171;}
.RoyalBlue{background-color:#4169E1;border:1px solid #23c34b;}
.SaddleBrown{background-color:#8B4513;border:1px solid #6d0027;}
.Salmon{background-color:#FA8072;border:1px solid #dc5462;}
.SandyBrown{background-color:#F4A460;border:1px solid #d64286;}
.SeaGreen{background-color:#2E8B57;border:1px solid #10396d;}
.SeaShell{background-color:#FFF5EE;border:1px solid #e1d0d7;}
.Sienna{background-color:#A0522D;border:1px solid #820f34;}
.Silver{background-color:#C0C0C0;border:1px solid #a2a2a2;}
.SkyBlue{background-color:#87CEEB;border:1px solid #69cdb0;}
.SlateBlue{background-color:#6A5ACD;border:1px solid #4caf3c;}
.SlateGray{background-color:#708090;border:1px solid #527262;}
.Snow{background-color:#FFFAFA;border:1px solid #e1dcdc;}
.SpringGreen{background-color:#00FF7F;border:1px solid #0061e1;}
.SteelBlue{background-color:#4682B4;border:1px solid #289664;}
.Tan{background-color:#D2B48C;border:1px solid #b46e96;}
.Teal{background-color:#008080;border:1px solid #006262;}
.Thistle{background-color:#D8BFD8;border:1px solid #babaa1;}
.Tomato{background-color:#FF6347;border:1px solid #e12945;}
.Transparent{background-color:none;border:1px solid #000000;}
.Turquoise{background-color:#40E0D0;border:1px solid #22b2c2;}
.Violet{background-color:#EE82EE;border:1px solid #d0d064;}
.Wheat{background-color:#F5DEB3;border:1px solid #d795c0;}
.White{background-color:#FFFFFF;border:1px solid #e1e1e1;}
.WhiteSmoke{background-color:#F5F5F5;border:1px solid #d7d7d7;}
.Yellow{background-color:#FFFF00;border:1px solid #e100e1;}
.YellowGreen{background-color:#9ACD32;border:1px solid #7c14af;} 
```

**使颜色变暗的脚本**

```
if (!Array.prototype.forEach)
{
  Array.prototype.forEach = function(fun /*, thisp*/)
  {
    var len = this.length;
    if (typeof fun != "function")
      throw new TypeError();

    var thisp = arguments[1];
    for (var i = 0; i < len; i++)
    {
      if (i in this)
        fun.call(thisp, this[i], i, this);
    }
  };
}

var colors;
colors = new Array; 

colors.push("#FFF0F8FF","#FFFAEBD7","#FF00FFFF","#FF7FFFD4","#FFF0FFFF","#FFF5F5DC","#FFFFE4C4","#FF000000","#FFFFEBCD","#FF0000FF","#FF8A2BE2","#FFA52A2A","#FFDEB887","#FF5F9EA0","#FF7FFF00","#FFD2691E","#FFFF7F50","#FF6495ED","#FFFFF8DC","#FFDC143C","#FF00FFFF","#FF00008B","#FF008B8B","#FFB8860B","#FFA9A9A9","#FF006400","#FFBDB76B","#FF8B008B","#FF556B2F","#FFFF8C00","#FF9932CC","#FF8B0000","#FFE9967A","#FF8FBC8F","#FF483D8B","#FF2F4F4F","#FF00CED1","#FF9400D3","#FFFF1493","#FF00BFFF","#FF696969","#FF1E90FF","#FFB22222","#FFFFFAF0","#FF228B22","#FFFF00FF","#FFDCDCDC","#FFF8F8FF","#FFFFD700","#FFDAA520","#FF808080","#FF008000","#FFADFF2F","#FFF0FFF0","#FFFF69B4","#FFCD5C5C","#FF4B0082","#FFFFFFF0","#FFF0E68C","#FFE6E6FA","#FFFFF0F5","#FF7CFC00","#FFFFFACD","#FFADD8E6","#FFF08080","#FFE0FFFF","#FFFAFAD2","#FFD3D3D3","#FF90EE90","#FFFFB6C1","#FFFFA07A","#FF20B2AA","#FF87CEFA","#FF778899","#FFB0C4DE","#FFFFFFE0","#FF00FF00","#FF32CD32","#FFFAF0E6","#FFFF00FF","#FF800000","#FF66CDAA","#FF0000CD","#FFBA55D3","#FF9370DB","#FF3CB371","#FF7B68EE","#FF00FA9A","#FF48D1CC","#FFC71585","#FF191970","#FFF5FFFA","#FFFFE4E1","#FFFFE4B5","#FFFFDEAD","#FF000080","#FFFDF5E6","#FF808000","#FF6B8E23","#FFFFA500","#FFFF4500","#FFDA70D6","#FFEEE8AA","#FF98FB98","#FFAFEEEE","#FFDB7093","#FFFFEFD5","#FFFFDAB9","#FFCD853F","#FFFFC0CB","#FFDDA0DD","#FFB0E0E6","#FF800080","#FFFF0000","#FFBC8F8F","#FF4169E1","#FF8B4513","#FFFA8072","#FFF4A460","#FF2E8B57","#FFFFF5EE","#FFA0522D","#FFC0C0C0","#FF87CEEB","#FF6A5ACD","#FF708090","#FFFFFAFA","#FF00FF7F","#FF4682B4","#FFD2B48C","#FF008080","#FFD8BFD8","#FFFF6347","","#FF40E0D0","#FFEE82EE","#FFF5DEB3","#FFFFFFFF","#FFF5F5F5","#FFFFFF00","#FF9ACD32")

var newColor = "";

function switchColor(element, index, array) {
   newColor += "#" + DarkenLightenColor(element.substring(3),30) + ",";
}

colors.forEach(switchColor);

newColor;

function DarkenLightenColor(col,amt) {
    var usePound = false;
    if ( col[0] == "#" ) {
        col = col.slice(1);
        usePound = true;
    }

    var num = parseInt(col,16);

    var r = (num >> 16) - amt;

    if ( r > 255 ) r = 255;
    else if  (r < 0) r = 0;

    var b = ((num >> 8) & 0x00FF) - amt;

    if ( b > 255 ) b = 255;
    else if  (b < 0) b = 0;

    var g = (num & 0x0000FF) - amt;

    if ( g > 255 ) g = 255;
    else if  ( g < 0 ) g = 0;
var rStr = (r.toString(16).length < 2)?'0'+r.toString(16):r.toString(16);
var gStr = (g.toString(16).length < 2)?'0'+g.toString(16):g.toString(16);
var bStr = (b.toString(16).length < 2)?'0'+b.toString(16):b.toString(16);

return (usePound?"#":"") + rStr + gStr + bStr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:25:19.563

检查以下链接，

[http://msdn.microsoft.com/en-us/library/system.windows.media.colors.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.colors.aspx)

它包含所有系统定义颜色的 ARGB 值。

# c++ - 删除向量指针

> ID：11988849
> 
> 赞同：1
> 
> 时间：2012-08-16T14:00:40.293
> 
> 标签：c++, pointers, memory-management, vector

我正在尝试编写一段非常简单的代码来使用 STL 向量创建一个 3x2 矩阵。
这就是我所拥有的：

```
#include <vector>
using namespace std;

int main ()
{

  int i;

  vector<int> * x = new vector<int> [3];

  for (i = 0; i < 3; i++)
       x[i] = vector<int> (2); 

  delete x;

  return 0;

} 
```

问题是每次我运行程序时，它都会崩溃。如果我删除`delete x`它，它可以正常工作，但可能会导致内存泄漏。

我知道这可能不是创建矩阵的最佳方法，并且有很多选择，但我只想知道为什么上述程序每次都崩溃。

`vector<int>`另外，用 say替换每一个出现的地方`int`，然后一切都可以正常工作了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T14:04:46.503

要销毁动态分配的数组，您*必须*使用`delete[]`，而不是`delete`.

虽然这将使代码工作，但它是一个次优的解决方案。下面的程序做同样的事情，但更简洁，更安全。

```
#include <vector>

int main ()
{
  std::vector<std::vector<int>> x(3, std::vector<int>(2));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T14:03:08.300

您正在使用 "array" `new`，因此您需要相同的`delete`：

```
delete[] x;
//....^^ 
```

在这里使用`delete x;`是未定义的行为，所以任何事情都可能发生。你很幸运，你的程序崩溃了:)

* * *

不要这样做，除非你有充分的理由这样做。你可能有

```
std::vector< std::vector< int > > x; 
```

然后您的代码将变为：

```
std::vector< std::vector< int > > x( 3 );
for( unsigned int ii = 0; ii < x.size(); ++ii )
{
    x[ ii ].resize( 2 );
} 
```

甚至：

```
std::vector< std::vector< int > > x( 3, std::vector< int >( 2 ) ); 
```

* * *

我会这样做：

```
typedef std::vector< int > SomeLogicalName; // or just IntVector
std::vector< SomeLogicalName > x( 3, SomeLogicalName( 2 ) ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T14:03:53.520

您需要使用`delete []`，因为您有一个动态分配的数组。你有向量的事实与它无关。

您可以使用 a 大大简化您的代码`vector<vector<int>>`：

```
vector<vector<int>> v(3); // holds three empty vector<int> 
```

甚至

```
vector<vector<int>> v(3, std::vector<int>(2)); // holds 3 size 2 vector<int> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:03:59.027

每个人都`new`需要一个`delete`

每个人都`new []`需要一个`delete []`

# sql - SQL 到关系代数

> ID：11988852
> 
> 赞同：3
> 
> 时间：2012-08-16T14:00:49.797
> 
> 标签：sql, relational-algebra

表：

```
Show(show_id, title, start_date, duration,singer,hall_id)
Concert(concert_is,date,hour,show_id)
Hall(Hall_id, name, address, capacity) 
```

以上是 3 个表的数据库。我需要将一些简单的 SQL 语句转换为 RA：

```
SELECT date
FROM Concert C, Show S, Hall H
WHERE C.show_id = S.Show_id
AND S.hall_id = H.hall_id
AND S.singer = 'A'
AND H.name = 'B' 
```

在RA中：

```
pi date (s(show_id = show_id)Show |><| Concert) 
```

以上不完整，我只需要知道我是否在正确的轨道上。关于 RA 的信息有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:23:56.687

这是使用“自然连接”的一个镜头。另请注意，我没有使用您的元组变量：

```
pi date (sigma name = 'B' AND singer = 'A' (CONCERT x SHOW x HALL)) 
```

上面的表达式是评估 SQL 查询效率最低的方法之一；但是，在语法上它更接近您的 SQL。

这是我使用的查询模板：

```
pi TargetList sigmaSelection_Condition (REL1 x ... X RELn) 
```

我将很快更新一个使用你的 |><| 的变体。接线员，如果你愿意...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T17:26:14.790

第一步是将查询变成文字：问的是什么？在这种情况下，我们想要所有音乐会的日期，其中音乐会的表演由“A”演唱，音乐会所在的大厅被命名为“B”。（这一步并不总是必要的——在许多情况下，我们可能会直接从 SQL 生成 RA——但确保你理解你在做什么从来都不是一个坏主意）。

因此，让我们从内到外构建您的 RA 声明。首先，我们要确保无论何时我们同时看一场演出和一场音乐会，我们只是在寻找那场音乐会上的节目，在这种情况下，节目的 id 是音乐会中的一个字段。所以你的直觉使用`natural join/|><|`是正确的。我一直都知道，除非另有说明，否则自然连接将自动匹配所有等效的列名（尽管我会先检查你老师的标准），所以在这种情况下，我们不需要指定显示的连接条件id 匹配。即使我们这样做了，那也将是连接的下标，而不是 select 语句的一部分。接下来我们要确保当我们看一个大厅和一个节目时，我们只看那个大厅里的节目。所以我们想自然地加入大厅到之前的结果（注意加入的顺序很重要——如果还没有加入表演，你不能自然地加入音乐会和大厅）。

下一步是只获取我们想要的信息行。在这种情况下，`select/sigma`语句非常简单——只需指定名称和大厅必须是您想要的。最后，我们`project/pi`只从检索到的行中选择我们想要的数据元素——在这种情况下，我们将只预测日期。在那之后，我们就完成了。到目前为止，从您的 RA 来看，我可以看到您已经按照正确的顺序拥有了所有运算符，您只是缺少操作数！

请注意，还有一些其他事项需要考虑。您可能需要考虑`rename/rho`在每个表上使用以简化写出的内容。此外，如果您的 RA 需要完全复制 SQL，您将不得不使用重命名，并将您的自然连接替换为`cross join/X`并将连接条件放在您的 select 语句中。

# haskell - haskell Data.Aeson.Value 到文本

> ID：11988853
> 
> 赞同：7
> 
> 时间：2012-08-16T14:00:50.717
> 
> 标签：haskell

```
data User = User { city :: Text
                 , country :: Text
                 , phone :: Text
                 , email :: Text}

instance ToJSON User where
    toJSON (User a b c d)= object ["a" .= a
                                  ,"b" .= b
                                  ,"c" .= c
                                  ,"d" .= d]

test:: User -> IO Value
test u = do
    let j = toJSON u
    return j 
```

我想要的是这样的文本

```
test::User -> IO Text
test u = do
    let j = pack ("{\"city\":\"test\",\"country\":\"test\",\"phone\":\"test\",\"email\":\"test\"}")
    return j 
```

我不知道如何从值到文本

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T18:57:56.533

对于（我认为）通常有用的功能来说，这样做比应该做的更难。`Data.Aeson.Encode.encode`做了太多的工作并将其一直转换为`ByteString`.

从转换开始`encode`并切换`Lazy.Text -> ByteString`到`Lazy.Text -> Strict.Text`转换可以满足您的要求：

```
{-# LANGUAGE OverloadedStrings #-}

import Data.Aeson
import Data.Aeson.Encode (fromValue)
import Data.Text
import Data.Text.Lazy (toStrict)
import Data.Text.Lazy.Builder (toLazyText)

data User = User
  { city    :: Text
  , country :: Text
  , phone   :: Text
  , email   :: Text
  }

instance ToJSON User where
  toJSON (User a b c d) = object
    [ "city"    .= a
    , "country" .= b
    , "phone"   .= c
    , "email"   .= d
    ]

test :: User -> Text
test = toStrict . toLazyText . encodeToTextBuilder . toJSON 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T10:06:16.433

根据 Thomas 的评论：您不是从`Value`to `Text`，而是从`Value`to `ByteString`。该`sendTextData`函数是多态的，足以接受`ByteString`s。

# android - 如何在android中的触摸屏上捕捉压力和面积

> ID：11988859
> 
> 赞同：1
> 
> 时间：2012-08-16T14:01:12.290
> 
> 标签：android, touchscreen, touch-event, motionevent

我正在使用带有 Android 3.2.1 的 Acer A500（电容屏）10" 平板电脑。我正在尝试捕捉手指触摸屏幕的区域以及屏幕上的压力量。我尝试过 Motionevent.getsize()我总是得到一个值 0。另外，Motionevent.getpressure() 总是给我一个值 1。

getX()、getY() 和 getEventTime() 等其他函数似乎工作正常。

我错过了什么吗？还有什么我需要做的吗？

任何帮助将不胜感激。

这是代码：

```
package com.mygroup.myapp;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import android.util.Log;
import android.view.MotionEvent; 
import android.view.View;
import android.view.View.OnTouchListener;

public class MultiTouchTest extends Activity implements OnTouchListener{
StringBuilder builder = new StringBuilder();
TextView textView;
float[] x = new float[10];
float[] y = new float[10];
double[] p = new double[10];
float[] s = new float[10];
long[] t = new long[10];
boolean[] touched = new boolean[10];

private void updateTextView(){
    builder.setLength(0);
    for (int i = 0; i < 10; i++){
        builder.append(touched[i]);
        builder.append(", ");
        builder.append(x[i]);
        builder.append(", ");
        builder.append(y[i]);
        builder.append(", pressure = ");
        builder.append(p[i]);
        builder.append(", size = ");
        builder.append(s[i]);
        builder.append(", time = ");
        builder.append(t[i]);
        builder.append("\n");
    }
    textView.setText(builder.toString());
}

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    textView = new TextView(this);
    textView.setText("touch:");
    textView.setOnTouchListener(this);
    setContentView(textView);
}
//@Override

public boolean onTouch(View v, MotionEvent event){
    int action = event.getAction() & MotionEvent.ACTION_MASK;

    int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >>
    MotionEvent.ACTION_POINTER_INDEX_SHIFT;
    int pointerId = event.getPointerId(pointerIndex);

    switch(action){
    case MotionEvent.ACTION_DOWN:
    case MotionEvent.ACTION_POINTER_DOWN:
        touched[pointerId] = true;
        x[pointerId] = (int)event.getX(pointerIndex);
        y[pointerId] = (int)event.getY(pointerIndex);
        p[pointerId] = event.getPressure(pointerIndex);
        s[pointerId] = event.getSize(pointerIndex);
        t[pointerId] = event.getEventTime();
        break;
               ...
    }
    updateTextView();
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:16:31.377

这些输入报告类型可能未启用。您可以尝试在 adb shell 下运行此命令，它将打印触摸控制器支持的可能事件类型：

```
getevent -pl 
```

# c++ - 启动另一个应用程序作为弹出窗口

> ID：11988863
> 
> 赞同：2
> 
> 时间：2012-08-16T14:01:43.023
> 
> 标签：c++, winapi, mfc

我有一个 MFC 应用程序，它以弹出窗口的形式启动其他（通用窗口、黑盒）应用程序并等待它们完成。父母和孩子之间不需要沟通/互动，应该避免。只需要“子应用程序表现为父应用程序的模态对话框”行为。这样做的正确方法是什么？

*“作为子*窗口启动另一个应用程序”的示例可以在以下位置看到：[将应用程序作为另一个应用程序的子窗口/弹出窗口激活，](https://stackoverflow.com/questions/1483566/activating-an-application-as-a-child-popup-of-another-application)这会导致[http://www.codeproject.com/Articles/18724/Hosting-exe-applications- into-a-dialog](http://www.codeproject.com/Articles/18724/Hosting-exe-applications-into-a-dialog)（这不是我想要的，我想要模态弹出行为）

为简单起见，我们可以假设启动和启动的应用程序都有单一的“堆栈”窗口（一个带有模式对话框的主窗口，可以有自己的模式对话框）。

我当前的伪代码（为简单起见，省略了错误处理和回调函数）

```
//get the current MFC dialog of launcher program we are launching the other app from
parentWnd = AfxGetMainWnd()->GetActiveWindow(); 
parentHwnd = parentWnd->GetSafeHwnd(); //HWND

// launch child and retrieve basic info from PROCESSINFO structure
CreateProcess(childExecutable); // => childProcessHandle, childProcessId 

//get the "main" window of child application
EnumWindows(EnumProc_That_Retrieves_TopLevelWindow_With_childProcessId); // => childHwnd

//link the child window as popup
SetWindowLong(childHwnd, GW_OWNER, parentHwnd);

//disable input into parent window
parentWnd->EnableWindow(FALSE);

//remove taskbar entry for child
SetWindowLong(child, GWL_EXSTYLE, GetWindowLong(child, GWL_EXSTYLE)&~WS_APPWINDOW);

//now keep waiting for the child process termination and process parent messages (e.g. WM_PAINT)
while (MsgWaitForMultipleObjects(childProcessHandle and process QS_ALLINPUT) {
   while (PeekMessage(PM_NOREMOVE)) AfxGetApp()->PumpMessage();
}

//re-enable input into parent window
parentWnd->EnableWindow(TRUE); 
```

现在我较小的问题是前景视觉风格（例如前景=蓝色标题栏与背景=灰色标题栏）和键盘输入焦点行为：

1) 初始移除子 WS_APPWINDOW 样式会移除子应用的前景视觉和输入焦点。此时没有应用程序具有焦点。

2) 当用户单击任何父应用程序窗口时，子前景视觉样式被切换。键盘焦点保留在子应用程序中。例如：子应用程序有前景 + 焦点 -> 第一次单击父级 -> 子**级失去**前景，保持焦点 -> 第二次单击父级 -> 子**级获得**前景，保持焦点 -> 等等。

预期行为（“正常”MFC 弹出窗口所做的）：子应用程序有前景 + 焦点 -> 单击父项 -> 子标题栏**短暂闪烁**并保留前景 + 焦点子应用程序没有前景 + 焦点 -> 单击父项 -> 子标题栏**增益前景**和键盘焦点

现在这是**最糟糕的问题**：3）我遇到了一个 MFC 应用程序，当单独启动时，用户可以打开“模式对话框堆栈”A->B->C->D->E，窗口的所有权完全匹配this（E归D所有，D归C所有）。但如果我从我的 MFC 应用程序 (M) 打开它，所有权看起来像 M->A->B->C,D,E (C,D,E 都归 B 所有，B 归 A，A 归通过我的应用程序窗口 M)。这导致“没有支持的堆栈” [http://blogs.msdn.com/b/oldnewthing/archive/2005/02/24/379635.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2005/02/24/379635.aspx)问题。当我删除时，这种行为会消失，`SetWindowLong(childHwnd, GW_OWNER, parentHwnd)`因此弄乱所有权可能会触发子应用程序的不良行为，但如果没有，我似乎无法保证“一个位于另一个之上”

所以又是一个大问题：完成这项任务并避免我所描述的问题的正确方法是什么。

编辑

## 到目前为止的解决方案

正如@mfc 建议的那样，我们必须避免弄乱所有者拥有的结构，因此任务基本上是以另一种方式为我们的父子对重新实现窗口管理器的这一方面。我已经使用 Windows Hooks 对解决方案的一部分进行了原型设计。然而，完成它似乎相当复杂和乏味，所以我决定采用另一种原始方法（截止日期，哦截止日期）。为了举例，我将描述两者的基本思想。

### 挂钩解决方案

免责声明：只有父焦点钩子已确认有效，其余为理论。也许有更清洁/更轻量级的实现，可以在实际的 Windows 窗口管理器实现中获得灵感（记住重点是避免设置 GW_OWNER 对窗口管理器工作正常，但会破坏子黑盒应用程序行为）。

*   当子应用程序在没有窗口的情况下（间歇性地）运行时，将一些“在子程序运行时忽略输入”添加到父消息循环中
*   为每次调用创建共享内存和结构来保存 [parentPid, parentHwnd,childPid]
*   为 [父非拥有窗口列表、它们的 UI 线程、子挂钩] 创建 DLL 实例化内存
*   将系统范围挂钩到 WH_CBT -> HCBT_CREATEWND，如果 childPid 匹配，则在列表中注册窗口，如果不存在，则仅为该子线程注册另一个挂钩 HCBT_ACTIVATE
*   将系统范围挂钩到 WH_CBT -> HCBT_DESTROYWND，如果 childPid 匹配，则取消注册列表中的窗口，如果这是给定线程的最后一个窗口，则取消注册 HCBT_ACTIVATE 挂钩，如果这是子应用程序的最后一个窗口，取消挂钩父 HCBT_ACTIVATE 挂钩并聚焦父
*   父线程 HCBT_ACTIVATE 钩子可防止获得焦点，而是使用 EnumWindows 聚焦子应用程序。
*   如果目标是父线程，子线程 HCBT_ACTIVATE 挂钩可防止焦点丢失，在 Z 顺序中将父线程保持在子线程下方
*   仅当挂钩到位时创建子进程暂停和恢复
*   记得随处脱钩

### 原始方法

基本上在先前解决方案的第一点中应用焦点开关，当单击父级时，它会随着焦点来回转移而在子级上闪烁。

*   “在子应用程序运行时忽略输入”（丢弃各种按键、单击等消息）在子应用程序运行时的父消息循环中，使用 EnumWindows 聚焦子应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:43:11.930

更改不属于您的其他窗口的父/子关系非常棘手且容易出错。如果启动器程序与启动程序没有通信，主要目的是避免启动器的任何UI，您可以在辅助程序启动成功后使用ShowWindow（SW_HIDE）简单地隐藏启动器。在隐藏模式下，它会继续监视启动的程序，并在辅助程序终止时取消隐藏。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-01-17T08:06:13.270

尝试使用 API 函数“ShellExecute()”。

# android - 清单中设置的 Android 更改活动图标

> ID：11988865
> 
> 赞同：0
> 
> 时间：2012-08-16T14:01:42.287
> 
> 标签：android, android-activity, icons, manifest

这是我的清单：

```
 <activity android:name=".plug.imp.NewActivity"
        android:windowSoftInputMode="stateHidden|adjustResize"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.SYNC" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter android:icon="@drawable/label_icon">
            <action android:name="android.intent.action.INSERT" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

在这里，我设置了可绘制图标。

有没有办法在活动本身中设置它并将其从清单中删除？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:05:55.927

尝试类似：

```
protected void onCreate(Bundle savedInstanceState) {
.....
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    //setContentView(R.layout.main);

getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);
 ....

} 
```

window_title.xml

```
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/header" 
    android:src="@drawable/ico_title"
    android:layout_gravity="left"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content">
 </ImageView>

 </LinearLayout> 
```

这是活动标题的图标而不是应用程序图标。

# c# - 格式化字符串

> ID：11988866
> 
> 赞同：0
> 
> 时间：2012-08-16T14:01:49.497
> 
> 标签：c#, string, format

出色地，

我只是无法格式化以下字符串：

```
string oldFormat = "949123U0456789";
oldFormat = string.Format(@"{0: ###.###-##-###.###}",oldFormat); 
```

结果应该是：949.123-U0-456.789

有没有人有更好的方法来格式化这个字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T14:07:57.370

您可以使用[`Insert`](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)：

```
"949123U0456789".Insert(11, ".").Insert(8, "-").Insert(6, "-").Insert(3, ".") 
```

请注意，我是从末尾插入，以避免添加插入的字符串影响索引。

您使用的格式字符串适用于数字类型 - 字符串不是数字类型（当将字符串传递给 时`string.Format`，它只会被返回，因为它已经是一个字符串）。

还有其他方法，如[Format string with dashes](https://stackoverflow.com/q/3968845/1583)所示：

使用正则表达式：

```
Regex.Replace("949123U0456789",
              @"^(.{3})(.{3})(.{2})(.{3})(.{3})$",
              "$1.$2-$3-$4.$5"); 
```

或使用子字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:12:39.537

正则表达式可以解决字母和数字混合时的格式问题。

```
 using System.Text.RegularExpressions;

        string pattern = @"([a-z0-9A-Z]{3})([a-z0-9A-Z]{3})
                    ([a-z0-9A-Z]{2})([a-z0-9A-Z]{3})([a-z0-9A-Z]{3})"
        string oldFormat = "949123U0456789";
        string newFormat = Regex.Replace(oldFormat, pattern, 
                    "$1.$2-$3-$4.$5"); 
```

我喜欢正则表达式 :D，如果它必须遵循某种约定（即执行验证），它们还有一个额外的好处是允许您检查代码的语法。

为了执行验证，您可以使用：

```
 Regex.IsMatch(oldFormat, 
                    @"([a-z0-9A-Z]{3})([a-z0-9A-Z]{3})
                    ([a-z0-9A-Z]{2})([a-z0-9A-Z]{3})
                    ([a-z0-9A-Z]{3})") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:17:40.050

```
string s="949123U0456789";

Regex r=new Regex(@"(\w{3})(\w{3})(\w{2})(\w{3})(\w{3})");
Console.WriteLine(r.Replace(s,"$1.$2-$3-$4.$5")); 
```

# iphone - 在 iOS 中解析 PLIST

> ID：11988872
> 
> 赞同：4
> 
> 时间：2012-08-16T14:02:11.527
> 
> 标签：iphone, xcode, parsing, plist, gdata

我正在构建一个本质上是一个目录的 PLIST。我想解析 plist，以便我可以在表格视图中显示姓氏，并在选择时用地址、电话号码和电子邮件等内容填充下一个视图的标签。我可以使用一些指导，这是我迄今为止创建的内容：

`<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"> <plist version="1.0"> <array> <array> <string>Last Name</string> <string>First Name</string> <string>Address</string> <string>Phone Number</string> <string>Email</string> </array> <array> <string>Last Name</string> <string>First Name</string> <string>Address</string> <string>Phone Number</string> <string>Email</string> </array> <array> <string>Last Name</string> <string>First Name</string> <string>Address</string> <string>Phone Number</string> <string>Email</string> </array>`

这个 plist 设置好了吗，还是我需要进行更改。如果设置得当，我只是在解析上有点迷失。我过去曾在播客中使用过 GDATAXML，但不确定它与应用内 PLIST 的关系如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:04:31.247

如果要将 plist 加载到数组或字典中，只需使用以下方法：

```
NSArray * myArray = [NSArray arrayWithContentsOfFile: <plist-file-path>];

NSDictionary * myDictionary = [NSDictionary dictionaryWithContentsOfFile: <plist-file-path>]; 
```

要在 Xcode 中创建 plist，只需选择**File->New**并从**Resource**部分选择**Property List**模板。然后您将看到属性列表编辑器，因此无需尝试手动编写代码。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:15:34.077

不要尝试从您的 plist 中解析 xml。

您必须将 plist 传递给`NSDictionary`：

```
NSString *pathToPlist = [NSString stringWithFormat:@"%@/your_plist_file.plist",[[NSBundle mainBundle]resourcePath]];
NSDictionary *plistDictionary = [NSDictionary dictionaryWithContentsOfFile:pathToPlist];

//now you can access the keys and values:
for (NSString *key in plistDictionary) 
    NSLog(@"key = %@ and value = %@", key, [plistDictionary objectForKey:key]);

//or pass all values to an array:
NSArray *valArray = [plistDictionary allValues]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-13T14:25:11.420

在斯威夫特 3 中：

```
if let path = Bundle.main.path(forResource: "FileName", ofType: "plist"), 
   let dict = NSDictionary(contentsOfFile: path) as? [String: AnyObject] {
    // use swift dictionary as normal
} 
```

如果你的第一个节点是一个数组，你可以使用这样的数组（在这种情况下，数组包含字典元素）：

```
if let path = Bundle.main.path(forResource: "FileName", ofType: "plist"),
   let array = NSArray(contentsOfFile: path) as? [Dictionary<String, Any>] {
    // use swift array as normal
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-16T14:09:45.533

使用`NSXMLParser`. [文档在这里。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

基本上你会得到一个`NSDictionary`文件的内容。然后使用

```
[aDictionary objectForKey:@"foo"]; 
```**

# c# - 使用 Mono 时多次定义 System.Action<>

> ID：11988873
> 
> 赞同：1
> 
> 时间：2012-08-16T14:02:11.407
> 
> 标签：c#, mono, action, monodevelop

我一直在 Visual Studio 2010 中处理一个 winforms C# 项目，并且刚刚开始使用 Mono 2.10.8 编译它。将项目导入 Monodevelop 3.0.3.5 效果很好，只要使用 .NET 运行时，它就可以毫无问题地编译和运行。

但是，当我尝试使用 Mono 运行时编译它时，除了（两个）对 System.Action 和 System.Func 的引用之外，所有内容都会编译 - 我收到错误 CS0433，它被多次定义。我从 Mono 库的 4.0 版中引用了 System.dll、System.Drawing.dll 和 System.Windows.Forms.dll。我收集到 System.core 中的声明与其他地方的声明之间存在冲突。其他人有这个问题吗？我的整个项目的编译和运行都与此完全不同！

**解决了**

似乎我在做一些相当愚蠢的事情（尽管我要责怪 Monodevelop UI！），这导致了冲突。这些项目仍然设置为针对 .NET Framework 4 客户端配置文件。我没有意识到您可以更改它们，因为解决方案的选项没有这样做的选项，但是每个单独的项目都有*。*我花了很长时间研究包含的库，发现 v4.0 mscorlib.dll 和 v2.0 System.core.dll 之间存在冲突。当我用 v4 替换 v2.0 mscorelib.dll 时，它编译得很好。

然后我发现只需将目标更改为 Mono / .NET 4 即可解决问题。那好吧...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:04:08.857

首先确保您已清除 bin /obj 文件夹。

你用什么来编译单声道（xbuild、monodevelop 或 makefile？）？

你使用哪个编译器 dmcs？

这些引用（Func<> 和 Action<>）是 mscorlib 的一部分。Mscorlib 在链接时添加。

您是在独立环境（虚拟机）上还是单声道和 .NET 在同一台 PC 上？

# ember.js - 如何在emberjs的#each助手中检测元素是否准备就绪？

> ID：11988874
> 
> 赞同：0
> 
> 时间：2012-08-16T14:02:11.607
> 
> 标签：ember.js

如何在emberjs的#each助手中检测元素是否准备就绪？Em.View 有 didInsertElement，但#each 没有...由于某些原因，我不想使用 Em.CollectionView

```
<ul>
  {{#each App.users}}
    <li>
      {{name}}
    </li>
  {{/each}}
  <li>abc</li>
  <li>def</li>
  <li>ghi</li>
</ul> 
```

什么时候：

```
App.set('users', [{name:'xyz'},{name:'opq'}]) 
```

我想在 '<li>xyz</li>' 和 '<li>opq</li>' 准备好时做点什么。

我认为在这样一个简单的情况下，在#each 中使用 Em.View 太复杂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:38:11.313

你说：

> 由于某些原因，我不想使用 Em.CollectionView

但这正是解决方案：

```
App.ListItemView = Em.View.extend({
    tagName: 'li',
    didInsertElement: function() {
        do your stuff...
    }
});

App.ListView = Em.CollectionView.extend({
    tagName: 'ul',

    itemViewClass: App.ListItemView,
}); 
```

是否有不想使用 CollectionView 的实际技术原因？

# java - org.json.XML 将 json 转换为 xml 到 json 失败

> ID：11988876
> 
> 赞同：2
> 
> 时间：2012-08-16T14:02:22.760
> 
> 标签：java, xml, json, scala

***我在 scala 中工作，但可以接受 java 解决方案。***

我一直在使用 org.json 将我的 json api 转换为 xml，所以一个奇怪的客户端（基于 VB4 并且不愿意改变）可以在 xml 中使用我的 api。

简单的 json 到 xml 转换工作正常。问题是我可能需要能够往返它并且 org.json 似乎没有正确地来回转换。

例如

```
{
    "a" : ""
} 
```

转换为：

```
<a></a> 
```

当我将其转换回来时，我得到：

```
{
    "a" : { }
} 
```

所以 org.json 将空字符串转换为空标签，将空标签转换为空对象。我的代码如下：

```
object XmlSerializer {
  def toXml(json:String) = {
    val jsonObj = new JSONObject(json)
    val xmlString = XML.toString(jsonObj)

    xmlString
  }

  def fromXml(xml:String) = {
    val jsonObj = XML.toJSONObject(xml)
    val jsonString = jsonObj.toString

    jsonString
  }
} 
```

我错过了什么还是 org.json.XML 转换不够聪明？似乎可以使用类型属性来保证转换回正确的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:10:16.057

问题是 JSON API 在读取时假定为空集：

```
<a></a> 
```

在最新版本的库中，它实际上返回了`<a/>`. 一种可能的解决方法（如果 XML 中的空格可以）是用一个空格替换您的空值。这是一个**粗略**的例子：

```
val INPUT_JSON = "{ \"a\" : \"\" }";
var input = INPUT_JSON.replaceAll("\"\"", "\" \"");
var jsonObj = new JSONObject(input);
var xmlString = XML.toString(jsonObj);
println("JSON to XML: " + xmlString);

var xmlJSONObj = XML.toJSONObject(xmlString);
var jsonOutputString = xmlJSONObj.toString();
println("XML back to JSON: " + jsonOutputString); 
```

输出：

```
JSON to XML: <a> </a>
XML back to JSON: {"a":""} 
```

# nunit - 将 NUnit EventListeners 插件与 ReSharper 7 一起使用

> ID：11988881
> 
> 赞同：2
> 
> 时间：2012-08-16T14:02:36.510
> 
> 标签：nunit, resharper, nunit-addins, resharper-7.0

我已经为 NUnit (2.6.0) 定义了一个插件，就像这样

```
namespace company.Testing.Attributes
{
    [AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = false)]
    public class ThenWithSetupAttribute : TestAttribute
    {}
}

namespace company.Testing
{
    [NUnitAddin(Description = "ThenWithSetup", Name = "ThenWithSetup")]
    public class ThenWithSetup : IAddin, EventListener
    {    
        public void RunStarted(string name, int testCount)
        {}

        public void RunFinished(TestResult result)
        {}

        public void RunFinished(Exception exception)
        {}

        public void TestStarted(TestName testName)
        {
            throw new Exception("Hello");
        }

        public void TestFinished(TestResult result)
        {
            throw new Exception("I said hello!");
        }

        public void SuiteStarted(TestName testName)
        {}

        public void SuiteFinished(TestResult result)
        {}

        public void UnhandledException(Exception exception)
        {}

        public void TestOutput(TestOutput testOutput)
        {}

        public bool Install(IExtensionHost host)
        {
            IExtensionPoint listeners = host.GetExtensionPoint("EventListeners");

            if (listeners == null)
                return false;

            listeners.Install(this);
            return true;
        }
    }
} 
```

使用 Visual Studio 2010 和 ReSharper 7 我的印象是，当我还设置 ReSharper -> Options-> Nunit -> Load NUnit Addins -> Always 并将 company.Testing.dll 放在 ..\ReSharper\ v7.0\Bin\addins 文件夹，这些事件监听器会触发（在这种情况下抛出异常）。然而，情况并非如此，当测试在 TestStarted-eventlistener 中失败时，测试成功运行！？！

我的测试，在另一个解决方案中定义（引用上面的.dll）：

```
[ThenWithSetup]
public void ShouldGetOkResponse()
{
    Console.WriteLine("testing 123");
    Assert.AreEqual(HttpStatusCode.OK, _result.StatusCode);
} 
```

我显然错过了一些东西，但是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-08T11:31:46.537

可能是您的带有测试的 dll 包含插件的 nunit 包？对我来说，这种情况不起作用。卸下包裹后，一切都开始了。

在这里看我的答案：[https ://stackoverflow.com/a/34154702/908936](https://stackoverflow.com/a/34154702/908936)

# android - 当 SectionIndexer 实现时，FastScrollBar 走出屏幕

> ID：11988886
> 
> 赞同：4
> 
> 时间：2012-08-16T14:02:46.997
> 
> 标签：android, listview, android-listview

我使用实现 SectionIndexer 的自定义适配器执行 ListView。当我在 Manifest 文件中仅键入 minSdkVersion = 8 时，一切正常。但是，如果我将 targetSdkVersion = 11（或更多）添加到 Manifest，当我滚动列表时，快速滚动条开始滚出屏幕，但没有列表的结尾。

还有一点：如果我将 targetSdkVersion = 11 添加到清单并在没有实现 SectionIndexer 的情况下执行列表适配器，滚动条也可以正常工作。

但我需要 targetSdkVersion = 11 或更多，并且需要 SectionIndexer 实现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T09:17:59.130

我的猜测是因为您没有正确实现 getSectionForPosition(int position) 方法。

这就是我所做的：

```
 @Override
    public int getSectionForPosition(int position) {
        for(int i = sections.length - 1; i >= 0; i--) {
            if(position > alphaIndexer.get(sections[i]))
                return i;
        }
        return 0;
    } 
```

# zeus - Zeus Web 服务器上的重定向次数限制

> ID：11988888
> 
> 赞同：0
> 
> 时间：2012-08-16T14:02:51.413
> 
> 标签：zeus

Zeus Web 服务器是否对 rewrite.script 文件中的重定向数量有限制？

因为我在文件中有大约 200 个重定向，并且它在大约一半时中断并且没有任何语法错误，因为如果我移动一些它们会再次工作......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:49:15.947

我不相信有限制。我们还没有击中它，我很确定我们有超过 200 个......

# java - 将纯文本发送到默认打印机

> ID：11988891
> 
> 赞同：6
> 
> 时间：2012-08-16T14:02:54.950
> 
> 标签：java, printing

我正在尝试向打印机发送一个简单的字符串（“Hello world”），但由于某种原因，它只打印第一个字符（“H”）

这是代码

```
public class CardPrinter {
    public static void main(String[] args) {
        try {
            PrintService mPrinter = null;
            Boolean bFoundPrinter = false;

            PrintService[] printServices = PrinterJob.lookupPrintServices();

            //
            // Iterates the print services and print out its name.
            //
            for (PrintService printService : printServices) {
                String sPrinterName = printService.getName();
                if (sPrinterName.equals("DTC4000 Card Printer")) {
                    mPrinter = printService;
                    bFoundPrinter = true;
                }
            }

            // Open the image file
            String testData = "Hello World !";
            InputStream is = new ByteArrayInputStream(testData.getBytes());
            DocFlavor flavor =  DocFlavor.INPUT_STREAM.AUTOSENSE   ;

            // Find the default service
            PrintService service = PrintServiceLookup.lookupDefaultPrintService();
            System.out.println(service);

            // Create the print job
            DocPrintJob job = service.createPrintJob();
            Doc doc= new SimpleDoc(is, flavor, null);

            // Monitor print job events; for the implementation of PrintJobWatcher,
            PrintJobWatcher pjDone = new PrintJobWatcher(job);

            // Print it
            job.print(doc, null);

            // Wait for the print job to be done
            pjDone.waitForDone();

            // It is now safe to close the input stream
            is.close();
        } catch (PrintException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    static class PrintJobWatcher {
        // true iff it is safe to close the print job's input stream
        boolean done = false;

        PrintJobWatcher(DocPrintJob job) {
            // Add a listener to the print job
            job.addPrintJobListener(new PrintJobAdapter() {
                public void printJobCanceled(PrintJobEvent pje) {
                    allDone();
                }
                public void printJobCompleted(PrintJobEvent pje) {
                    allDone();
                }
                public void printJobFailed(PrintJobEvent pje) {
                    allDone();
                }
                public void printJobNoMoreEvents(PrintJobEvent pje) {
                    allDone();
                }
                void allDone() {
                    synchronized (PrintJobWatcher.this) {
                        done = true;
                        PrintJobWatcher.this.notify();
                    }
                }
            });
        }
        public synchronized void waitForDone() {
            try {
                while (!done) {
                    wait();
                }
            } catch (InterruptedException e) {
            }
        }
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:14:22.540

添加表单提要，

```
String testData = "Hello World !\f"; 
```

解决了问题

# php - 带有“名称已在使用”的 PHP 异常致命错误

> ID：11988892
> 
> 赞同：13
> 
> 时间：2012-08-16T14:02:54.920
> 
> 标签：php, namespaces

在我的本地开发机器（php 5.3.14）上，我可以使用这样的类：

```
<?php

namespace Shop\Repository;

use Shop\Entity\Day;
use Doctrine\ORM\EntityRepository;

class Product extends EntityRepository
{
    // Code
} 
```

该类存储在 /my/src/Shop/Repository/Product.php（符合 PSR-0）中。我**也**有一个`Shop\Repository\Day`位于/my/src/Shop/Repository/Day.php。

但是，在我的登台服务器（php 5.3.10）上，我收到以下错误：

> PHP 致命错误：无法使用 Shop\Entity\Day 作为 Day，因为该名称已在第 5 行的 /my/src/Shop/Repository/Product.php 中使用

我可以理解该消息，如果我将 Shop\Entity\Day 导入别名为 DayEntity，则代码有效。但我无法理解致命错误的原因：为什么这适用于 php 5.3.14（或至少，使用我的配置）而不是 5.3.10（或至少，使用服务器的配置）？

我想问题是因为在命名空间`Shop\Repository`中已经`Day`加载了一个。但这从未导致我的设置出错！这是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T14:29:46.217

以下是我对这种情况的一些解释：

```
require_once 'ns_class2.php';
// 
namespace ns; // Declaration of the namespace named "ns"
class class2 {} // Declaration of the class "ns/class2"
// In the namespace "ns", "class2" is an alias of  "ns\class2"
// 

require_once 'ns_ns1_ns2_class2.php';
// 
namespace ns\ns1\ns2; // Declaration of the namespace named "ns\ns1\ns2"
class class2 {} // Declaration of the class "ns\ns1\ns2\class2"
// In the namespace "ns\ns1\ns2", "class2" is an alias of "ns\ns1\ns2\class2"
//  

require_once 'ns_ns1_ns2_class1.php';
// 
namespace ns\ns1\ns2; // Declaration of the namespace named "ns\ns1\ns2"
// In the namespace "ns\ns1\ns2", "class2" is an alias of "ns\ns1\ns2\class2"
use ns\class2; // Creation of the alias  "class2" which point to "ns\class2" but class2 is already an alias of ns\ns1\ns2\class2 => ERROR 
```

因此，您应该尝试使用 get_included_files() 在您的服务器和工作站上查看有什么不同，因为加载它们的顺序很重要

这些解释链接自[dmitry](http://php100.wordpress.com/)评论的[这篇不错的帖子](http://blog.mageekbox.net/?post/2011/07/14/Espace-de-noms-et-importations-de-classes)

希望这可以帮助

# function - G ++ __FUNCTION__ 在方法的类名上？

> ID：11988895
> 
> 赞同：3
> 
> 时间：2012-08-16T14:03:09.097
> 
> 标签：function, compilation, g++, constants

是否有像 __FUNCTION__ 或 __func__ 这样的编译时常量，它包括类方法也包括类名？

例如，对于**Bar**类中名为**foo**的方法，它不应扩展为*foo*，而是扩展为*Bar::foo*。

 ***** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:56:36.637

`__PRETTY_FUNCTION__`是的，使用 GCC 或 Clang，您可以使用提供完整签名的非标准扩展，例如`void Bar::foo(int)`

见[http://gcc.gnu.org/onlinedocs/gcc/Function-Names.html](http://gcc.gnu.org/onlinedocs/gcc/Function-Names.html)****

# macos - 如何在不打开 GUI 的情况下在控制台中启动 apache tika？

> ID：11988899
> 
> 赞同：2
> 
> 时间：2012-08-16T14:03:14.613
> 
> 标签：macos, bash, console, command-line-interface, apache-tika

如果我在控制台（OSX）中启动 apache tika：

```
 java -jar tika-app-1.2.jar --text  ~/Downloads/example.pdf 
```

GUI（菜单行中的 org.apache.tika.cli.TikaCLI）将始终显示在前台，并在进程完成后关闭。

如果在一个循环中处理了许多文件，则计算机分别“阻止” tika 进程一次又一次地进入前台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-04T18:38:25.497

`-Djava.awt.headless=true`运行 tika jar 时使用 。

例如：

```
java -Djava.awt.headless=true -jar /usr/local/Cellar/tika/1.5/libexec/tika-app-1.5.jar foo.pdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:50:56.363

Tika 应该只在您使用标志启动它时打开 GUI `--gui`，或者根本没有任何标志。传入`--text`应该强制它只运行命令行

我刚刚检查了几个文件，并且正如预期的那样`--text`永远不会启动 GUI

你可能一直在定制 Tika 吗？我建议您从网站上进行干净的构建/下载，然后使用它，然后在 Tika-Dev 列表上寻求有关您的自定义如何破坏事物的建议。（他们真的不应该，所以你一定在做一些相当不寻常的事情！）

# mongodb - 如何在 C# 驱动程序中使用 BsonSerializer 为 MongoDB 克隆/复制 POCO 实体

> ID：11988903
> 
> 赞同：1
> 
> 时间：2012-08-16T14:03:28.720
> 
> 标签：mongodb, mongodb-.net-driver, bson

使用官方 C# 驱动程序制作 MongoDB POCO 实体的新副本的最佳方法是什么？

我试过这个；

```
 public T Clone()
    {
        var bsonWriter = new BsonDocumentWriter(new BsonDocument(), BsonDocumentWriterSettings.Defaults);
        BsonSerializer.Serialize(bsonWriter, this);
        var newDoc = bsonWriter.ToBsonDocument(typeof(T));
        var e = BsonSerializer.Deserialize(newDoc , typeof(T));
        return e as T;

    }//Clone() 
```

但我得到的只是一个充满空值的空对象。顺便说一下，POCO 对象不是从 BsonDocument 继承的，但它确实可以很好地序列化，我想利用它装饰的所有 Bson 属性，这就是为什么我不想以其他方式复制它的原因。我想要一个副本，因为 DB 驱动程序会这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T20:47:31.627

这比这容易得多。

```
using MongoDB.Bson;
using MongoDB.Bson.Serialization;

//...

var test = new Test { Id = ObjectId.GenerateNewId(), Name = "Jack" };
var doc = test.ToBsonDocument();
var copy = BsonSerializer.Deserialize<Test>(doc); 
```

如果您想了解它是如何工作的，可以查看 ToBsonDocument 扩展方法。

# entity-framework - EF Code First Fake Foreign Keys

> ID：11988914
> 
> 赞同：1
> 
> 时间：2012-08-16T14:04:03.680
> 
> 标签：entity-framework, foreign-keys

Let's say we have this

```
class A
{
    [Key]
    public int Id { get; set; }
    public string X { get; set; }
    public string Y { get; set; }
    public B B;
}

class B
{
    [Key]
    public int Id { get; set; }
    public string X { get; set; }
    public string Y { get; set; }
    public virtual ICollection<A> As { get; set; }
} 
```

Assume that pairs of X and Y are guaranteed to be unique in B, thus {X, Y} could be a composite primary key on B but isn't, Id is.

Is it possible with Fluent API to express that A.B should be a navigation property via this fake foreign key relationship?

Something like this, except it doesn't work:

```
HasRequired(a => a.B).WithMany(b => b.As).HasForeignKey(a => new { a.X, a.Y }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:34:40.367

You said you wanted 'fake' foreign keys, and I'm not sure if that means you don't want your database to reflect the relationship. If that's the case, then you don't want to express this in fluent, you should enforce this in your business logic. If you do want a true foreign key, then you'll need to alter the primary key of B, and then make the composite foreign key attachment. There's a typo in your initial class of `A`, you didn't create the navigation property `B` as a property. I assume these aren't your real objects though, but I was able to get this to work like this:

```
 public class A
    {
        public int Id { get; set; }
        public string X { get; set; }
        public string Y { get; set; }
        public virtual B B { get; set; }
    }

public class B
{
    public int Id { get; set; }
    public string X { get; set; }
    public string Y { get; set; }
    public virtual ICollection<A> As { get; set; }
}

public class Model : DbContext
{
    public DbSet<A> As { get; set; }
    public DbSet<B> Bs { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

        modelBuilder.Entity<B>()
            .HasKey(b => new { b.Id, b.X, b.Y });

        modelBuilder.Entity<A>()
            .HasRequired(a => a.B)
            .WithMany(b => b.As)
            .HasForeignKey(a => new { a.Id, a.X, a.Y });
    }
} 
```

# ruby - 正则表达式排除中间开始和结束标签

> ID：11988918
> 
> 赞同：0
> 
> 时间：2012-08-16T14:04:12.870
> 
> 标签：ruby, regex

> **可能重复：**
> [正则表达式匹配外括号](https://stackoverflow.com/questions/546433/regular-expression-to-match-outer-brackets)

是否有一个正则表达式会返回：

```
[aaaa[aaa]aaaa] 
```

从

```
aaa"fields":[aaaa[aaa]aaaa]aaa 
```

这是在从还包含 XPath 的 JSON 字符串中获取数组的上下文中。XPath 与数组一样具有左方括号和右方括号，因此检索由左方和右方括号分隔的字符串的普遍问题，它也包含作为子字符串......我希望这是有道理的。

我认为你需要跟踪打开的方括号对的数量，只有当它达到 0 时，你才会返回字符串的那部分。这需要一个循环，但我想知道是否有纯正则表达式解决方案。

我的第一次尝试是：

```
cleaned_defintion = defintion.gsub(/\[\d*\]/,"") 
```

它将这样的 XPath 转换为：`html[1]/body[1]/form[1]/div[7]/div[2]/input[1]`但这`html/body/form/div/div/input`将使 xpath 带有以下元素：

```
td[@width='113'] 
```

然后打破：

```
json_fields = cleaned_defintion.match(/fields":(\[[^\]]*\])/) 
```

这个问题有一个使用迭代方法的答案： [Best way to find nested opening and closing tags](https://stackoverflow.com/questions/9402005/best-way-to-find-nested-opening-and-closing-tags)

# c# - 跳到 DataGridView 中的下一个单元格

> ID：11988922
> 
> 赞同：1
> 
> 时间：2012-08-16T14:04:28.260
> 
> 标签：c#, datagridview

我有一个 DataGridView，其中有许多单元格的 ReadOnly 属性设置为 True。

当用户使用 tab 键在单元格中切换时，如果 ReadOnly 属性为真，我想将焦点移动到下一个单元格上。我的代码如下：

```
 private void filterGrid_CellEnter(object sender, DataGridViewCellEventArgs e)
    {
        if (!filterGrid.Rows[e.RowIndex].Cells[e.ColumnIndex].ReadOnly)
        {
            EditCell(sender, e);                
        }
        else
        {
            //Move to the next cell
            filterGrid.Rows[e.RowIndex].Cells[e.ColumnIndex + 1].Selected = true;
        }            
    } 
```

但是，当我运行上面的代码时，我收到以下错误：

操作无效，因为它会导致对 SetCurrentCellAddressCore 函数的可重入调用。

我正在使用 C# 4.0

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:51:35.810

我对这样的东西使用派生的 DataGridView，这只会影响 Tab 键，因此用户仍然可以单击只读单元格来复制粘贴它等。

```
using System.Windows.Forms;

namespace WindowsFormsApplication5
{
    class MyDGV : DataGridView
    {
        public bool SelectNextCell()
        {
            int row = CurrentCell.RowIndex;
            int column = CurrentCell.ColumnIndex;
            DataGridViewCell startingCell = CurrentCell;

            do
            {
                column++;
                if (column == Columns.Count)
                {
                    column = 0;
                    row++;
                }
                if (row == Rows.Count)
                    row = 0;
            } while (this[column, row].ReadOnly == true && this[column, row] != startingCell);

            if (this[column, row] == startingCell)
                return false;
            CurrentCell = this[column, row];
            return true;
        }

        protected override bool ProcessDataGridViewKey(KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Tab)
                return SelectNextCell();
            return base.ProcessDataGridViewKey(e);
        }

        protected override bool ProcessDialogKey(Keys keyData)
        {
            if ((keyData & Keys.KeyCode) == Keys.Tab)
                return SelectNextCell();
            return base.ProcessDialogKey(keyData);
        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:22:09.607

两个建议之一应该有效

利用

```
 else
        {
            filterGrid.ClearSelection();
            filterGrid.Rows[e.RowIndex].Cells[e.ColumnIndex + 1].Selected = true;
        } 
```

[否则，这里建议使用另一种方法以及原因，](http://social.msdn.microsoft.com/Forums/en/winformsdatacontrols/thread/7970b78b-4fb6-4138-b49e-fc3e665f866c)
这也意味着同样的问题：-
[InvalidOperationException - 结束编辑单元格并移动到另一个单元格时](https://stackoverflow.com/questions/893752/invalidoperationexception-when-ending-editing-a-cell-moving-to-another-cell)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T16:03:24.290

您可以使用 datagridview 单元格 Enter 事件并将只读单元格选项卡索引绕过到另一个单元格。这是我的例子： -

```
 private void dgVData_CellEnter(object sender, DataGridViewCellEventArgs e)
    {
        if (dgVData.CurrentRow.Cells[e.ColumnIndex].ReadOnly)
        {
            SendKeys.Send("{tab}");
        }
    } 
```

# java - [Java]BufferedReader 来自带有 \r\n 的套接字

> ID：11988925
> 
> 赞同：1
> 
> 时间：2012-08-16T14:04:32.380
> 
> 标签：java, sockets, bufferedreader, msn

我正在尝试从 msn 交换机插座读取文本

```
public String readStream() {
    String temp = null;
    try {
        temp = buffReader.readLine();
        System.out.println("<<< " + temp);
    } catch (Exception e) {
        e.printStackTrace();
    }

    return temp;
}
// this method is called
public void print() {
  while (socket.isConnected()) {
      readStream(); 
  }
} 
```

当在 msn 上收到消息时，输出应该是这样的（根据[http://www.hypothetic.org/docs/msn/switchboard/example_session.php](http://www.hypothetic.org/docs/msn/switchboard/example_session.php)）

```
<<< MSG bob@passport.com Bob 143\r\n
MIME-Version: 1.0\r\n
Content-Type: text/plain; charset=UTF-8\r\n
X-MMS-IM-Format: FN=Lucida%20Sans%20Unicode; EF=B; CO=ff0000; CS=0; PF=22\r\n
\r\n
Hello. 
```

我的输出：

```
<<< MSG myemail@email.com MYNAME 128
<<< MIME-Version: 1.0
<<< Content-Type: text/plain; charset=UTF-8
<<< X-MMS-IM-Format: FN=Arial; EF=; CO=000000; CS=0; PF=00; RL=0;
<<< 
```

如您所见，在此人发送另一条消息之前，我没有收到发送的消息。

输出：

```
<<< MSG myemail@email.com MYNAME 128
<<< MIME-Version: 1.0
<<< Content-Type: text/plain; charset=UTF-8
<<< X-MMS-IM-Format: FN=Arial; EF=; CO=000000; CS=0; PF=00; RL=0;
<<< 
<<< helloMSG myemail@email.com MYNAME 127
<<< MIME-Version: 1.0
<<< Content-Type: text/plain; charset=UTF-8
<<< X-MMS-IM-Format: FN=Arial; EF=; CO=000000; CS=0; PF=00; RL=0;
<<< 
```

那么如何解决这个问题，以便我可以阅读整个消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:13:07.023

我认为问题在于流在 Hello 之后没有换行符。因此 readLine 直到下一条消息的第一行末尾才检测到行尾。您需要依靠消息的长度来读取预定义的字节数才能获取整个消息。查看此站点以获取一些提示：[http ://www.hypothetic.org/docs/msn/resources/faq.php#howtoparse](http://www.hypothetic.org/docs/msn/resources/faq.php#howtoparse)

编辑：从上述站点引用的要实现的逻辑最相关的部分接近尾声：

每当来自服务器的新数据通过套接字到达时，将其附加到将用作“缓存”的字符串中。每次接收数据时，也要调用缓存解析器函数。

缓存解析器函数将检查缓存变量并寻找换行符。

如果没有找到，该函数将返回而不做任何事情。

如果找到，它将读取从缓存开头到换行符的所有内容，并将其放入一个新变量中。然后它将从缓存的开头删除命令直到（并包括）换行符。

缓存解析器将查看命令的前三个字节。

如果该命令被识别为常规命令，它将调用该命令的处理程序并循环返回以查看缓存中是否还有更多命令。

**这是最相关的部分**

如果该命令被识别为有效负载命令，它将查看有效负载的指定长度，并将其与缓存的长度进行比较。

如果看起来整个有效负载都在缓存中，缓存解析器将取出缓存的开头直到指定长度并将其存储到有效负载变量中。然后它将调用有效负载函数的适当处理程序并循环返回以查看缓存中是否有更多命令。

如果缓存的长度小于有效负载的指定长度，则缓存解析器会将命令添加回缓存的开头并返回。

# mantis - 人们可以在螳螂中使用标签吗？

> ID：11988926
> 
> 赞同：1
> 
> 时间：2012-08-16T14:04:36.840
> 
> 标签：mantis

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:38:59.447

## 方法 #1 破解 Mantis 配置

把它放在你的**config_inc.php**中。将“a”添加到有效标签列表中应该可以解决您的问题：

```
 ############################
   # Mantis HTML Settings
   ############################

   # --- html tags -------------------

   # Set this flag to automatically convert www URLs and
   # email adresses into clickable links
   $g_html_make_links      = ON;

   # These are the valid html tags for multi-line fields (e.g. description)
   # do NOT include href or img tags here
   # do NOT include tags that have parameters (eg. <font face="arial">)
   $g_html_valid_tags      = 'p, li, ul, ol, br, pre, i, b, u, em';

   # These are the valid html tags for single line fields (e.g. issue summary).
   # do NOT include href or img tags here
   # do NOT include tags that have parameters (eg. <font face="arial">)
   $g_html_valid_tags_single_line      = 'i, b, u, em'; 
```

**注意：**配置文件建议不要添加 'href' 或 'img' 标签（可能是因为这些标签允许用户执行任意 javascript - 为跨站点脚本攻击打开了大门）！但是一个愚蠢的配置文件知道什么，对吧？

## 方法 #2 安装一个[BBCode](http://www.bbcode.org/)插件

再三考虑，最好获取一个实现您想要的功能的插件。我找到了两个 BBCode 插件，它们应该适用于当前的 Mantis 版本（我认为是 v1.1+）。看看[这个](https://github.com/jhron/BBCodeGeSHi/wiki/Description)或[这个](https://github.com/mantisbt-plugins/bbcode)。

然后，您应该能够生成普通链接和命名链接，如下所示：
`[url]http://www.bbcode.org/[/url]`
`[url=http://www.bbcode.org/]This be bbcode.org![/url]`

# jquery - 部分的 jquery index()

> ID：11988927
> 
> 赞同：2
> 
> 时间：2012-08-16T14:04:40.170
> 
> 标签：jquery

我在包含许多部分元素的 div 上使用 jquery 可排序。我想使用 index() 来输出每个部分的位置。

index() 仅返回第一部分的值，但无法找到第二部分（或第三、第四等）

我不知道我在做什么错。任何帮助，将不胜感激。这是我的代码：

```
 <div id="existingquestions" class="sortable">
            <section class="question" id="question_777">
                <p id="positionof_777"></p>
                <p class="questiontext">question.text</p>
                <script>$(document).ready(function() {
                            var qpos = Number($('.sortable > section:visible').index('#question_777')+1);
                            $('#positionof_777').html(qpos);
                        });
                </script>
            </section>
            <section class="question" id="question_888">
                <p id="positionof_888"></p>
                <p class="questiontext">question.text</p>
                <script>$(document).ready(function() {
                        var qpos = Number($('.sortable > section:visible').index('#question_888')+1);
                        $('#positionof_888').html(qpos);
                    });
                </script>
           </section> 
    </div> 
```

我正在使用的另一个功能工作得很好，尽管它与上面的基本相同：

```
 $(document).ready(function() {
        $('input').placeholder();
        $(".sortable > section:visible").hover(function() {
            var index = $(this).index()+1;
            $("#example_index").html("Index " + index);
        });
    }); 
```

我一无所知。在第一个示例中我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:25:08.550

这将按您的意愿工作：

```
<div id="existingquestions" class="sortable">
  <section class="question" id="question_777">
    <p id="positionof_777"></p>
    <p class="questiontext">question.text</p>
    <script>
        $(document).ready(function() {
            var qpos = $('.sortable > section:visible#question_777').index() + 1;
            $('#positionof_777').html(qpos);
        });
    </script> 
  </section>
  <section class="question" id="question_888">
    <p id="positionof_888"></p>
    <p class="questiontext">question.text</p>
    <script>
        $(document).ready(function() {
            var qpos = $('.sortable > section:visible#question_888').index() +1 ;
            $('#positionof_888').html(qpos);
        });
    </script> 
  </section>
</div> 
```

## **[工作样本](http://jsfiddle.net/zS4JX/3/)**

### 笔记

你不需要`Number`转换，`.index()`总是返回一个数字。

# xml - xpath 表达式中的属性和 count()

> ID：11988929
> 
> 赞同：1
> 
> 时间：2012-08-16T14:04:42.263
> 
> 标签：xml, xpath, count

给定以下 XML 文件：

```
<a m="1">
    <b n="1" o="2">
        <c p="3">3</c>
        <d/>
    </b>
    <b n="1" o="2">
        <c p="3">3</c>
        <d q="3">
            <e r="2">2</e>
        </d>
        <f s="1"/>
    </b>
</a> 
```

我怎样才能找到以下表达式：

```
1\. count(/*/*/*)  =  5
2\. count (/*//*)  = 6
3\. count (/*/*//@*) = 4 
```

我用 Java 中的那些 xpath 表达式运行了 xml 文件，但我不明白为什么答案是 5,6,4 。

有人可以解释一下我如何计算上述表达式（不使用java代码），而是通过理解命令的实际概念`/*/*/*`and`/*//*`和`/*/*//@*`？

非常感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:36:38.983

```
/*/*/* 
```

这会选择顶部元素的所有“孙子” ——它们是：`c`、、、、`d``c``d`

```
/*//* 
```

这将选择顶部元素的所有后代元素：`b`, `c`, `d`, `b`, `c`, `d`, `e`,`f`

```
/*/*//@* 
```

这将选择顶部元素的子元素或其后代的所有属性：`n`, `o`, `p`, `n`, `o`, `p`, `q`, `r`, `s`。

因此，产生的计数必须分别为：

```
4, 8, 9 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
   <xsl:value-of select="count(/*/*/*)"/>
=========
   <xsl:value-of select="count(/*//*)"/>
=========
   <xsl:value-of select="count(/*/*//@*)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当对提供的 XML 文档执行此转换时**（永远，*永远永远*不会用图片呈现文档！！！）：

```
<a m="1">
 <b n="1" o="2">
   <c p="3">3</c>
   <d/>
 </b>
 <b n="1" o="2">
   <c p="3">3</c>
   <d q="3">
     <e r="2">2</e>
   </d>
 </b>
 <f s="1"/>
</a> 
```

**计算 Xpath 表达式并将其结果复制到输出**：

```
 4
=========
   8
=========
   9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T14:35:45.267

1-查找元素的直接后代，这些元素是根元素的直接后代的直接后代在这种情况下

```
/a/b[1]/c
/a/b[1]/d

/a/b[2]/c
/a/b[2]/d
/a/b[2]/f 
```

是你的答案。

2- 第一级元素下的所有后代（直接或间接）元素在这种情况下

```
/a/b[1]/c
/a/b[1]/d

/a/b[2]/c
/a/b[2]/d
/a/b[2]/d/e
/a/b[2]/f 
```

是你的答案。

3-查找属于第一级元素的直接后代的所有后代的所有属性在这种情况下

```
/b[1]/@n
/b[1]/@o
/b[1]/c/@p

/b[2]/@n
/b[2]/@o
/b[2]/c/@p
/b[2]/d/@q
/b[2]/d/e/@r
/b[2]/f/@s 
```

是你的答案。

正如你在这里看到的，第三种情况的答案是 9，因为你写错了。要使其返回，您必须将其更改为`count(/*/*/*/@*)`

**编辑**：如 Mimo 所述的更正索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:21:14.577

再次运行您的 java 代码，但不使用 count 函数。你会得到一个节点列表（有时是元素，有时是属性）。遍历列表并写出每个节点的名称。这将帮助您了解每个计数中包含哪些节点。

# android - 如何在android webview中快速加载javascript

> ID：11988935
> 
> 赞同：2
> 
> 时间：2012-08-16T14:05:02.817
> 
> 标签：android, android-webview

android webview 需要太多时间来加载 javascript，每当更改设备的方向时（如果将纵向更改为横向，它会保持在 webview 的纵向模式下，然后一段时间后它将进入横向，反之亦然）。

我处理 onConfigurationChanged() 但重新加载内容需要时间。

提前致谢。

# sql-server-2008 - 如何在 Excel 中使用工作表更新 SQL 表

> ID：11988939
> 
> 赞同：0
> 
> 时间：2012-08-16T14:05:11.497
> 
> 标签：sql-server-2008, excel, import

我有一些 SQL 技能，但我有一个问题：我目前通过电子邮件收到包含 1 张信息的每月 excel 表。我需要能够使用此信息完全更新和替换 SQL Server 2008 (express) 中的表。

我试图创建一个程序来删除表并使用类似这样的东西重新创建它

```
Drop Table Utah

Create table Utah

Insert into dbo.[Utah] 
Select *    FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
        'Excel 8.0;Database=c:< .sxl file here>;HDR=YES', 
    'SELECT * FROM [Utah]') 
```

但是当我尝试为此进行程序时，我没有任何运气。

每个步骤似乎都是独立的，但要简化它并让其他人更容易做 - 你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:19:23.903

处理此问题的最佳方法是创建 SSIS 作业。

在那里，您可以自动化处理 excel 文件和刷新 sql 表和所有的过程。它会非常流畅和方便。

如果 SQL Express tyr 将此代码作为 Sproc 运行

```
IF EXISTS(select * from sysobjects where name='Utah' and type='U')
DROP TABLE Utah
GO

Create table Utah(col1 int,col2 int)
Go

Insert into dbo.[Utah] 
Select * FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
        'Excel 8.0;Database=c:< .sxl file here>;HDR=YES', 
    'SELECT * FROM [Utah]')

Go 
```

# python - Django：多对多关系的自定义保存方法

> ID：11988946
> 
> 赞同：1
> 
> 时间：2012-08-16T14:05:34.943
> 
> 标签：python, django, django-models, django-orm

我需要在多对多关系上设置自定义保存和删除方法。

我尝试使用“through”属性指定模型，但这使我的代码过于复杂并引入了一些问题。我不需要多对多模型上的任何额外字段，只需自定义保存和删除方法。

是否可以在不指定“通过”属性的情况下完成此操作？

这是代码：

```
class Order(BaseDate):
    #lots of fields
    relateds = models.ManyToManyField('RelatedProduct', verbose_name=_('related products'), blank=True, related_name='order_relateds', through='OrderRelateds')
    # more fields
    total = CurrencyField(verbose_name=_('total'))

    def calculate_total(self):
        cleanses = self.cleanse.taxed_price() * self.quantity
        delivery = DELIVERY_PRICE if self.delivery == 'delivery' else 0
        relateds = 0
        for r in self.relateds.all():
            relateds = relateds + float(r.taxed_price())
        total = float(cleanses) + delivery + relateds
        return total

    def save(self, *args, **kwargs):
        self.total = '%.2f' % self.calculate_total()
        super(Order, self).save(*args, **kwargs)

class OrderRelateds(models.Model):
    order = models.ForeignKey(Order)
    relatedproduct = models.ForeignKey(RelatedProduct, verbose_name=_('related product'))

    class Meta:
        verbose_name = _('Related Product')
        verbose_name_plural = _('Products Related to this Order')

    def __unicode__(self):
        return self.relatedproduct.__unicode__()

    def save(self, *args, **kwargs):
        super(OrderRelateds, self).save(*args, **kwargs)
        self.order.save()

    def delete(self, *args, **kwargs):
        super(OrderRelateds, self).delete(*args, **kwargs)
        self.order.save() 
```

如果在订单中添加或删除任何相关产品（多对多项目），我需要触发订单总价的重新计算。

**编辑：这是解决我问题的代码**

```
from django.db.models.signals import m2m_changed
from django.dispatch import receiver

@receiver(m2m_changed, sender=Order.relateds.through)
def recalculate_total(sender, instance, action, **kwargs):
    """
    Automatically recalculate total price of an order when a related product is added or removed
    """
    if action == 'post_add':
        instance.save()
    if action == 'post_remove' or action == 'post_clear':
        instance.save() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:10:42.870

您可以在包含关系的模型上使用 django 的[`m2m_changed`, `pre_save/post_save`，`pre_delete/post_delete signals`](https://docs.djangoproject.com/en/dev/ref/signals/)并在那里执行相关逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:33:32.350

蒂米的回答绝对正确并且有效。但是，对于您的特殊情况，我想知道，如果您不应该在视图中处理该逻辑，您可以在其中管理订单和订单项目并在那里执行重新计算，因为订单项目的添加、编辑和删除都属于一起并属于到订单。

# file - Umbraco 从不正确的文件夹中提取媒体文件

> ID：11988950
> 
> 赞同：0
> 
> 时间：2012-08-16T14:05:57.810
> 
> 标签：file, directory, media, umbraco

我正在本地 SQL 服务器 2008 R2 上通过 WebMatrix 2 运行 Umbraco 4.8.0。除了我尝试通过“媒体”选项卡上传媒体图像外，一切正常。我明白了

“/”应用程序中的服务器错误。

找不到路径“\C:\xxxxxxxx\media\id\picture.png”的一部分。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.IO.DirectoryNotFoundException：找不到路径“\C:\xxxxxxxx\media\id\picture.png”的一部分。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[DirectoryNotFoundException：找不到路径的一部分 '\markerstudy.local\data\Users\sirwin\My Web Sites\caabWebsite\media\109\bg-red-centre.png'。] System.IO.__Error.WinIOError (Int32 errorCode, String maybeFullPath) +224 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath) +1142 System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share) +83 System.IO.File.WriteAllBytes(String path, Byte[] bytes) +86 umbraco.cms。 businesslogic.Files.UmbracoFile.Save(Byte[] file, String fullFileName) +323 umbraco.cms.businesslogic.Files.UmbracoFile.Save(Stream inputStream, String fullFileName) +188 umbraco.cms.businesslogic.datatype.FileHandlerData.set_Value(Object value) +404 umbraco.editorControls.uploadField.Save() +369 umbraco.controls.ContentControl.saveClick(Object Sender, ImageClickEventArgs e) +158 System.Web.UI.WebControls。 ImageButton.OnClick(ImageClickEventArgs e) +115 System.Web.UI.WebControls.ImageButton.RaisePostBackEvent(String eventArgument) +120 System.Web.UI.WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) + 10 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13 System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563set_Value(对象值) +404 umbraco.editorControls.uploadField.Save() +369 umbraco.controls.ContentControl.saveClick(Object Sender, ImageClickEventArgs e) +158 System.Web.UI.WebControls.ImageButton.OnClick(ImageClickEventArgs e) + 115 System.Web.UI.WebControls.ImageButton.RaisePostBackEvent(String eventArgument) +120 System.Web.UI.WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10 System.Web.UI.Page .RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13 System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36 System.Web.UI.Page.ProcessRequestMain(布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint) +5563set_Value(对象值) +404 umbraco.editorControls.uploadField.Save() +369 umbraco.controls.ContentControl.saveClick(Object Sender, ImageClickEventArgs e) +158 System.Web.UI.WebControls.ImageButton.OnClick(ImageClickEventArgs e) + 115 System.Web.UI.WebControls.ImageButton.RaisePostBackEvent(String eventArgument) +120 System.Web.UI.WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10 System.Web.UI.Page .RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13 System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36 System.Web.UI.Page.ProcessRequestMain(布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint) +5563saveClick(Object Sender, ImageClickEventArgs e) +158 System.Web.UI.WebControls.ImageButton.OnClick(ImageClickEventArgs e) +115 System.Web.UI.WebControls.ImageButton.RaisePostBackEvent(String eventArgument) +120 System.Web.UI. WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13 System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+5563saveClick(Object Sender, ImageClickEventArgs e) +158 System.Web.UI.WebControls.ImageButton.OnClick(ImageClickEventArgs e) +115 System.Web.UI.WebControls.ImageButton.RaisePostBackEvent(String eventArgument) +120 System.Web.UI. WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13 System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+5563Web.UI.WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13 System.Web.UI.Page.RaisePostBackEvent （NameValueCollection postData）+36 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+5563Web.UI.WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13 System.Web.UI.Page.RaisePostBackEvent （NameValueCollection postData）+36 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+5563

Umbraco 在系统的其他地方创建另一个媒体文件夹并将图像保存在那里。当我复制文件夹（ID 编号文件夹）时，我可以毫无问题地将图像上传到 Umbraco。

有没有办法让 Umbraco 默认指向我电脑中正确的媒体文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:52:48.643

听起来您希望这些文件不会保存到网站中？

它们始终保存在您网站根目录的 /media 文件夹下，除非您更改了配置设置。重点是，如果您不一定对远程 Web 服务器的一部分拥有管理员（或文件夹）权限，Umbraco 仍然允许您将图像上传到站点并使用它们。

# iphone - 是否可以使用在 vmware 上运行的 iphone 模拟器测试蓝牙应用程序？

> ID：11988951
> 
> 赞同：1
> 
> 时间：2012-08-16T14:06:01.747
> 
> 标签：iphone, bluetooth

我在运行 Windows 7 的 vmware 虚拟机上安装了 Mac OS X Snow Leopard 10.6.8。XCode 版本是 4.0。

是否可以使用 iphone 模拟器测试蓝牙应用程序，或者 XCode 中的 iPhone 模拟器是否支持蓝牙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:33:40.513

On a mac it would work, however with the current setup, it is not going to - and as pointed out by @EvilP it against various copyright agreements.

# wordpress - 以原始大小检索帖子缩略图

> ID：11988952
> 
> 赞同：0
> 
> 时间：2012-08-16T14:06:03.673
> 
> 标签：wordpress, wordpress-theming

嗨，我正在尝试将 jquery 画廊集成到我的 wordpress 主题中。画廊将有一个标题，将显示帖子标题和摘录内容。

我想做的是为帖子创建一个自定义查询并检索帖子缩略图，我希望能够获得存储在媒体库中的完整尺寸的图像。

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:23:57.120

你想要的是这样的[http://kingsmennigltd.com/](http://kingsmennigltd.com/)吗？它是用 wordpress 开发的，它是我开发的插件

# codeigniter - 如何在codeigniter中使用按钮而不是锚链接

> ID：11988959
> 
> 赞同：1
> 
> 时间：2012-08-16T14:06:43.433
> 
> 标签：codeigniter

在我不使用 codeigniter 之前，我有以下代码：

```
<input type="button" value="Clear Cart" onclick="clear_cart()"> 
```

现在因为我使用的是 codeigniter，所以我使用这个代码来实现与上面相同的功能：

```
<?php echo anchor('bookings/remove/all', 'Clear Cart', array('onclick' => "return confirm('Are you sure want to clear all bookings?')")); ?> 
```

第一个代码将创建一个按钮。但是第二个代码将只创建链接。

我是codeigniter的新手，所以请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:09:54.337

```
echo form_button('mysubmit', 'Clear Cart', 'onclick="clear_cart()"'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:19:18.223

如果您想使用 CI 的功能，可以使用名为的表单助手`form_submit()`

```
echo form_submit('mysubmit', 'Clear Cart', 'onclick="clear_cart()"'); 
```

不要忘记先加载表单助手

```
$this->load->helper('form'); 
```

还有其他可用的表单助手功能 - 在这里查看 - [http://codeigniter.com/user_guide/helpers/form_helper.html](http://codeigniter.com/user_guide/helpers/form_helper.html)

**更新**

在您的 javascript`clear_cart()`函数中，在开头添加这些行 -

```
function clear_cart() {
var result = confirm('Are you sure want to clear all bookings?');
if(!result) {
// cancel button 
return false;
}

.. rest of the code below here 
```

# javascript - Jquery - 从查询字符串中获取“#”值而不是“？” 符号值

> ID：11988962
> 
> 赞同：0
> 
> 时间：2012-08-16T14:06:55.553
> 
> 标签：javascript, jquery, query-string

我有一个下面的链接，

***http://pathname/Home/Welcome?ID=69#tab2***

我们可以从上面的链接中获取查询字符串值（在*?* sysmbol 之后）。这是可能的，但我想从上面的 url中获取“ *#* ”之后的符号值（*tab2 ）。*

可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T14:08:38.800

你可以用这个变量得到它：

```
window.location.hash 
```

想知道它什么时候改变？

```
window.onhashchange = function(){
   // it changed!
}; 
```

[https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:10:10.070

`window.location.hash`和类似的（`someAnchor.href.hash`等）。

关于命名的注释。那不是查询字符串，查询字符串以 结尾`#`，那是片段标识符。

# actionscript-3 - AES 实现

> ID：11988964
> 
> 赞同：1
> 
> 时间：2012-08-16T14:07:01.257
> 
> 标签：actionscript-3, encryption

在 AS3 中使用 AES 解密数据的最快方法是什么？有人告诉我，有比 as3crypto 实现更快的方法来解密数据。使用 aes 加密/解密数据有多少种方法？

我设法将 as3crypto aes 的实现速度提高了大约 40%，但他说 aes 应该更快。

我正在使用 aes 解密流以播放音乐。

# parallel-processing - 如何将传输数据与执行推力算法重叠？

> ID：11988967
> 
> 赞同：2
> 
> 时间：2012-08-16T14:07:08.977
> 
> 标签：parallel-processing, cuda, gpgpu, thrust

我使用 (CUDA C++) Thrust for GPU GeForce GTX 460SE，asyncEngineCount = 1。据我所知，我可以以一种方式重叠传输数据到 GPU 和执行单个内核。但是当我使用：

```
cudaStream_t Stream1, Stream2;
cudaStreamCreate(&Stream1);
cudaStreamCreate(&Stream2);
cudaMemcpyAsync(thrust::raw_pointer_cast(d_vec_src.data()), host_ptr1, test_size, cudaMemcpyHostToDevice, Stream1);
cudaMemcpyAsync(host_ptr2, thrust::raw_pointer_cast(d_vec_dst.data()), test_size, cudaMemcpyDeviceToHost, Stream2);
thrust::sort(d_vec_dst.begin(), d_vec_dst.end());
cudaThreadSynchronize(); 
```

和推力算法，它按我在 nVidia Visual Profiler 中看到的顺序执行：从 GPU 传输，传输到 GPU，执行内核。也许这是因为推力算法在零 0 流中执行，不能与任何东西重叠？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-03T02:03:17.913

对于仍在搜索的人，我相信 Thrust 现在[支持流。](https://github.com/thrust/thrust/blob/7b1d84e1bf75fc3f60d01058e3f008ef94bb7b28/testing/backend/cuda/sort.cu)

```
cudaStream_t s;
cudaStreamCreate(&s);
thrust::sort(thrust::cuda::par(s), keys.begin(), keys.end());
cudaStreamSynchronize(s);
cudaStreamDestroy(s); 
```

编辑：我认为语法现在已更改为`thrust::cuda::par.on(s)`最新提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:47:29.527

Thrust 目前没有控制其算法执行流的机制，因此您无法使用当前代码库执行您所要求的操作。有报道称用户修改了推力代码库以接受流（例如[这个 google groups thread](https://groups.google.com/forum/m/?fromgroups#!topic/thrust-users/zva0W8bqZF0)），但这可能可行，也可能不可行，具体取决于您使用的算法及其结构的复杂性。一些算法也有内部数据传输，当从串行执行到异步执行时，你需要非常小心不要破坏事情。

# jquery - 当鼠标离开可滚动元素时，Jquery可滚动排序

> ID：11988970
> 
> 赞同：1
> 
> 时间：2012-08-16T14:07:16.920
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在使用 jquery-ui-sortable 对项目列表进行水平排序。

但是我有一个问题，当列表超过其容器的 with （示例中的 UL）并且它会自动滚动到左/右（如预期）。

如果用户将鼠标移动到快速并且它移到可滚动元素（示例中的 UL）之外，然后再次返回排序似乎有错误，直到鼠标移回不是最后一个项目的项目. 如下例所示，直到我将鼠标按钮移动到项目 17。虽然我希望项目 1（鼠标上的项目）出现在项目 18 和 19 之间的位置。

有没有办法确保解决这个问题。

![问题示例](../Images/7a1cc0b6b460a21f64b0c59cf6bed4d8.png)

jsFiddle 示例：http: [//jsfiddle.net/Revvion/cNa5B/](http://jsfiddle.net/Revvion/cNa5B/)

# vba - Windows 7 64 位和 MSCOMM32.ocx 上的 Microsoft Access 2010

> ID：11988971
> 
> 赞同：1
> 
> 时间：2012-08-16T14:07:18.323
> 
> 标签：vba, x86-64, ms-access-2010, mscomm32

上周末，我公司的 POS 和数据库计算机出现硬盘故障。我们有一个 Orbit Metrologic 扫描仪通过 USB 连接到它，它被模拟用于通信端口 COM3。扫描仪工作正常，我能够完全恢复我们的数据库，除了我们的扫描仪无法与 Access 2010 通信。在我们运行 32 位版本的访问之前，但是这次我下载了 64 位版本访问权限，因为我们有一台 64 位机器。

我做过的事情：

*   在 SysWOW64 中使用 Regsvr32 注册 MSCOMM32.ocx（与故障硬盘驱动器中的相同，我能够引导到 linux live CD 并解压缩它）
*   [使用ADM.exe](http://www.nirsoft.net/utils/acm.html)禁用 MSCOMM32.ocx Windows 7 Kill-Bit
*   使所有 ActiveX 控件在信任中心毫无疑问地运行
*   在 VBA 参考中注册了 MSCOMM32.ocx

MSCOMM32.ocx 可以在 64 位环境中工作吗？还是我必须恢复到 32 位访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:19:29.703

通过卸载 64 位版本的 Microsoft Access 并重新安装 32 位版本来解决此特定问题。控制立即被识别。

# jaxb - JAXB/MOXY 映射问题：属性或字段 phoneType 必须是属性，因为另一个字段或属性使用 XmlValue 注释

> ID：11988974
> 
> 赞同：1
> 
> 时间：2012-08-16T14:07:42.993
> 
> 标签：jaxb, jaxb2, moxy

下面是我的班级和 OXM 映射。如果我希望 phoneType 成为 phone 下的子元素，不确定为什么会出现以下异常

```
public class PhoneNumber
{
    public enum PhoneType
    {
        Cell, Home
    };

    private PhoneType phoneType;

    private String type;

    private String number;

    public String getType()
    {
        return type;
    }

    public void setType(final String type)
    {
        this.type = type;
    }

    public String getNumber()
    {
        return number;
    }

    public void setNumber(final String number)
    {
        this.number = number;
    }

    public void setPhoneType(final PhoneType phoneType)
    {
        this.phoneType = phoneType;
    }

    public PhoneType getPhoneType()
    {
        return phoneType;
    }

} 
```

**OXM**

```
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.eclipse.org/eclipselink/xsds/persistence/oxm http://www.eclipse.org/eclipselink/xsds/eclipselink_oxm_2_4.xsd"
   version="2.4"  package-name="blog.bindingfile"  xml-mapping-metadata-complete="true">
   <xml-schema namespace="http://www.example.com/customer" element-form-default="QUALIFIED" />
   <java-types>
      <java-type name="Customer">
         <xml-root-element name="customer"/>
         <xml-type prop-order="lastName firstName address phoneNumbers" />
         <java-attributes>
            <xml-element java-attribute="firstName" name="first-name" />
            <xml-element java-attribute="lastName" name="last-name" />
            <xml-element java-attribute="phoneNumbers" name="phone-number" />
         </java-attributes>
      </java-type>
      <java-type name="BaseCustomer" xml-transient="true">
      <xml-root-element/>
      </java-type>
      <java-type name="PhoneNumber">
         <java-attributes>
            <xml-attribute java-attribute="type" />
            <xml-value java-attribute="number" />
            <xml-element java-attribute="phoneType" name="phone-type"/>
         </java-attributes>
      </java-type>
   </java-types>
</xml-bindings> 
```

**例外**

```
Caused by: Exception [EclipseLink-50010] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.JAXBException
Exception Description: The property or field phoneType must be an attribute because another field or property is annotated with XmlValue.
    at org.eclipse.persistence.exceptions.JAXBException.propertyOrFieldShouldBeAnAttribute(JAXBException.java:246)
    at org.eclipse.persistence.jaxb.compiler.AnnotationsProcessor.finalizeProperties(AnnotationsProcessor.java:1011)
    at org.eclipse.persistence.jaxb.compiler.XMLProcessor.processXML(XMLProcessor.java:412)
    at org.eclipse.persistence.jaxb.compiler.Generator.<init>(Generator.java:102)
    at org.eclipse.persistence.jaxb.JAXBContext$ContextPathInput.createContextState(JAXBContext.java:768)
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:52:05.080

**更新**

为了完全理解为什么您会看到异常，我们将查看一个格式化的 XML 片段。问题归结为@XmlValue 映射对应于哪个文本片段（第一个，第二个，都不是？）

```
<phone-number type="TYPE">
    <phone-type>Cell</phone-type>
</phone-number> 
```

以下文档涉及混合内容，因此 JAXB 让您明确指出这一点。通常混合使用，`@XmlAnyElement`以便获取所有元素和文本的列表，以便保持顺序。

```
<phone-number type="TYPE">
    555-1111
    <phone-type>Cell</phone-type>
</phone-number> 
```

* * *

由于 OXM 文件中的以下内容，您收到了异常：

```
 <java-type name="PhoneNumber">
     <java-attributes>
        <xml-attribute java-attribute="type" />
        <xml-value java-attribute="number" />
        <xml-element java-attribute="phoneType" name="phone-type"/>
     </java-attributes>
  </java-type> 
```

`@XmlElement`作为例外状态，如果类中的另一个字段/属性映射为，则不允许映射字段/属性`@XmlValue`

**你需要做什么**

您实际上是在尝试映射具有混合内容的元素。您可以使用以下映射文件执行此操作：

```
<java-type name="PhoneNumber">
    <java-attributes>
        <xml-attribute java-attribute="type" />
        <xml-any-element java-attribute="number" xml-mixed="true"/>
        <xml-element java-attribute="phoneType" name="phone-type" />
    </java-attributes>
</java-type> 
```

**完整示例**

***oxm.xml***

```
<?xml version="1.0" encoding="UTF-8"?>
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11988974">
    <java-types>
        <java-type name="PhoneNumber">
            <xml-root-element name="phone-number"/>
            <java-attributes>
                <xml-attribute java-attribute="type" />
                <xml-any-element java-attribute="number" xml-mixed="true"/>
                <xml-element java-attribute="phoneType" name="phone-type" />
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

***演示***

```
package forum11988974;

import java.io.File;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>();
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum11988974/oxm.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {PhoneNumber.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11988974/input.xml");
        PhoneNumber phoneNumber = (PhoneNumber) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.marshal(phoneNumber, System.out);
    }

} 
```

***输入.xml/输出***

```
<?xml version="1.0" encoding="UTF-8"?>
<phone-number type="TYPE">555-1111<phone-type>Cell</phone-type></phone-number> 
```

# google-bigquery - 有没有办法获取数据集中所有表的信息（架构详细信息）？（大查询）

> ID：11988976
> 
> 赞同：1
> 
> 时间：2012-08-16T14:07:54.400
> 
> 标签：google-bigquery

有没有办法通过java api获取数据集中所有表的信息（架构详细信息）？我知道我可以获得查询的架构（ GetQueryResultsResponse.getSchema() ），但这不是我想要的。我想要的是在特定项目/数据集中以某种方式获取所有可用表的信息。TableList 或 TableDataList 都不包含这样的方法。我唯一能得到的是 TableId、ProjectId、DatasetId。如果不是 api 调用，是否有此查询？

谢谢你，阿提拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:33:26.767

没有一个 api 调用可以获取数据集中所有表的架构详细信息。您需要执行一个 tables.list 来获取数据集中表的 ID，然后在每个表上执行一个 tables.get 来获取它们的架构。

# c# - LINQ 不允许我创建自定义属性（如 Id + 名称）

> ID：11988980
> 
> 赞同：1
> 
> 时间：2012-08-16T14:08:14.250
> 
> 标签：c#, .net, linq, linq-to-sql

我要做的是创建一个自定义类型，该类型具有一个自定义属性，该属性将存储记录中的 Id 和 Name 。（类似于“223 - 罗伯特·史密斯”）。这就是我正在做的事情：

```
return (from c in db.Credores
        where c.Status == true
        select new CredorCompleto
        {
            Id = c.Id,
            Nome = c.Nome,
            NomeCompleto = c.Id + c.Nome,
            CNPJ = c.CNPJ
        }).ToList(); 
```

**更新：** “CredorCompleto”的定义

```
public class CredorCompleto
{
    public string NomeCompleto { get; set; }
    public string CNPJ { get; set; }
    public string Nome { get; set; }
    public int Id { get; set; }
} 
```

这就是我得到的：

> *无法将类型`System.Int32`转换为 type `System.Object`。LINQ to Entities 仅支持转换实体数据模型基元类型。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:32:42.333

您对@Moon 回答的评论提供了一个重要线索：

> *“LINQ to Entities 无法识别方法`System.String Format(System.String, System.Object, System.Object)`method，并且该方法无法转换为存储表达式。”*

问题*可能*在于它`db.Credores`是一个`IQueryable`，而不仅仅是一个`IEnumerable`。因此，当您的 LINQ to SQL 提供程序尝试分析您的原始查询时，它会遇到一些它无法识别的问题，并且不知道如何转换为 SQL 查询。

我想 LINQ to SQL 提供程序在将您的连接`c.Id + c.Nome`转换为有效的 SQL 语句时遇到问题，可能是因为前者是 an`int`而后者是 a `string`。

可以肯定的是，它绝对不知道如何将调用转换`string.Format()`为 SQL（这并不奇怪，因为 SQL 没有那个功能）。

因此，您可以在执行特定于 .NET 的逻辑之前尝试执行 SQL 查询。试试这个：

```
return db
       .Credores
       .Where(c => c.Status == true)
       .AsEnumerable() // <-- this should trigger the execution of the SQL query
       .ToList()       // <-- and if it does not, then this certainly will
       .Select(c => new CredorCompleto
                    {
                        …
                    })
       .ToList(); 
```

调用`.AsEnumerable()`- 并且`.ToList()`可能还需要调用，IIRC - 将触发 SQL 查询的执行。之后的一切都在内存中运行`IEnumerable`，而不是在`IQueryable`. 这意味着在 之后`.ToList()`，LINQ 将不再做智能代码分析，或尝试将剩余的运算符转换为 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:15:59.860

假设并返回正确`.ToString()`的值，您可以这样做：`c.Id``c.Nome`

```
return (from c in db.Credores
        where c.Status == true
        select c).AsEnumerable()
        .select(x => new CredorCompleto()
        {
            Id = c.Id.ToString(),
            Nome = c.Nome,
            NomeCompleto = string.Format("{0} - {1}", c.Id, c.Nome),
            CNPJ = c.CNPJ
        }).ToList(); 
```

正如所建议的那样`Victor`，“LINQ to Entities 无法识别该方法`System.String Format(System.String, System.Object, System.Object)`”

因此，请使用`AsEnumerable()`Linq to Objects 强制评估该部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T14:14:34.020

您试图连接一个 int 和一个字符串。尝试...

```
NomeCompleto = c.Id.ToString() + " - " + c.Nome, 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-16T14:11:17.660

您询问

> 像“223 - 罗伯特史密斯”）。

用这个

```
return (from c in db.Credores
                        where c.Status == true
                        select new CredorCompleto
                        {
                            Id = c.Id,
                            Nome = c.Nome,
                            NomeCompleto = c.Id + " - " + c.Nome,
                            CNPJ = c.CNPJ
                        }).ToList(); 
```

**编辑：**看到你的班级结构后，我猜你的错误是在其他地方没有给出问题。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-16T14:14:19.707

尝试

```
return (from c in db.Credores
    where c.Status == true
    select new CredorCompleto
    {
        Id = c.Id,
        Nome = c.Nome,
        DescricaoCompleta = c.Id+"-"+c.Nome,
        CNPJ = c.CNPJ
    }).ToList(); 
```

# java - Selenium 从文件中读取测试数据？

> ID：11988982
> 
> 赞同：0
> 
> 时间：2012-08-16T14:08:26.673
> 
> 标签：java, selenium, soapui

我正在 web 服务测试工具soapUI 中启动一些测试。我还想使用 Selenium 进行视觉断言。

我可以为soapui 定义一个数据源，例如textifle、xml、csv、excel 等。

我怎样才能从 selenium 中读取值？Selenium 作为 html 套件运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:25:25.003

作为 html 套件运行，您无法定义数据源。您需要转换为您选择的编程语言，例如 Python 或 Ruby，然后手动读取文件。

# javascript - javascript：如何在关联数组中找到最接近某个值的键？

> ID：11988985
> 
> 赞同：0
> 
> 时间：2012-08-16T14:08:34.180
> 
> 标签：javascript, associative

我有类似的东西

```
var keyVals = Array;
keyVals['23'] = 234;
keyVals['58'] = 'sunshine';
keyVals['172'] = 'lolipops';

newVar = 76; 
```

我怎样才能找到数组中的哪个键的值（一旦变成数字）最接近我的 newVar？23、58、172 中哪个最接近我的 76？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:16:33.310

首先，请注意您在技术上创建一个对象，因此 keyVals 的首选分配是`keyVals = {}`.

```
var newVar = 31,
    keyNum,
    key,
    diff,
    keyVals = {},
    closest = {
        key: null,
        diff: null
    };

keyVals['23'] = 234;
keyVals['58'] = 'sunshine';
keyVals['172'] = 'lolipops';

for(key in keyVals) {
    if(keyVals.hasOwnProperty(key)) {
        keyNum = parseInt(key,10);
        diff = Math.abs(newVar - keyNum);

        if(!closest.key || diff < closest.diff) {
            closest.key = key;
            closest.diff = diff;
        }
    }
} 
```

`for`循环完成后，将`closest.key`包含最近匹配的索引`newVar`。为了增加保护，请使用`hasOwnProperty`以确保您不会意外地迭代`keyVals`原型之一的属性（当然，在这种特定情况下这不太可能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:14:04.703

首先：
如果你使用数字类型的值作为你的键，它们必须是数字。
它应该是 23，而不是 '23'
否则 23 将被视为字符串 '23'，不能针对数字进行数学测试。

```
var keyVals = Array;
keyVals[23] = 234; // keyVals[23], not keyVals['23']
keyVals[58] = 'sunshine';
keyVals[172] = 'lolipops' 
```

要找到最近的键，
只需遍历您的键并搜索最近的键。

```
dist = Number.POSITIVE_INFINITY; // set the distance from key to value
closestkey = -1; // closest key variable
for(i in keyVals) {
    // i is the key, keyVals[i] is the value
    newdist = Math.abs(newVar - i); // distance from current key to value
    if (newdist < dist) {
        // we found a key closer to the value
        dist = newdist; // set new smallest distance
        closestkey = i; // set the value to the current key
    }
}
// Now closestkey is the key to your closest variable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:30:16.933

正如其他人指出的那样，`Objects`当您想要将键映射到值时，（又名哈希）是使用的最佳数据结构；考虑到这一点，您将看到将映射键预排序为数字顺序的性能优势。

```
// Helper method, you could also use underscore.js's `_.keys`
function getKeys(object) {
    var keys = [];
    for (var key in object) {
        if (object.hasOwnProperty(key)) {
            keys.push(key);
        }
    }
    return keys;
};

// Lookup table.
var keyVals = {
    23: "234",
    58: "sunshine",
    172: "lollypops"
};

// Extract the keys from the lookup table and sort them into numerical order.
var sortedKeys = getKeys(keyVals).sort(function (a, b) {
    return a - b;
});

// Returns the closest key in the `keyVals` lookup table for the supplied value.
function getClosestIndex(value) {
    var i;

    // Walk through the sorted keys array and stop when the next value is greater.
    for (i = 0; i < sortedKeys.length; i++) {
        if (sortedKeys[i] > value) {

            // Either return the previous key, or zero if this was the first.
            return (i === 0) ? sortedKeys[0] : sortedKeys[i - 1];
        }
    } 

    // We reached the end, so the value is greater than the highest key we have.
    return sortedKeys[i];
} 
```

显然，如果您的`keyVals`地图很小（少于 1000 个条目），那么这种优化是相当学术的（但仍然很有趣）:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:25:55.647

但请注意，可能有 2 个值最接近`newVar`.

例如：

```
keyVals[23] = 234;
keyVals[129] = 'aaa';
keyVals[172] = 'lolipops'; 
```

23 和 129 都最接近 76。

然后，

```
var keyVals = Array;
keyVals[23] = 234;
keyVals[129] = 'aaa';
keyVals[172] = 'lolipops';
newVar = 76;
var closest=new Object();
for(var i in keyVals){
    if(typeof closest.dif=='undefined'){
        closest.dif=Math.abs(newVar-i);
        closest.val=[i];
    }else{
        if(closest.dif==Math.abs(newVar-i)){
            closest.val.push(i);
        }else if(closest.dif>Math.abs(newVar-i)){
            closest.dif=Math.abs(newVar-i);
            closest.val=[i];
        }
    }
}
alert("The closest keys to "+newVar+" are ["+closest.val.join(',')+"], with a difference of "+closest.dif); 
```

将提醒“最接近 76 的键是 [23,129]，相差 53”

或者用你的阵列，

```
keyVals[23] = 234;
keyVals[58] = 'sunshine';
keyVals[172] = 'lolipops'; 
```

会提示“最接近 76 的键是 [58]，相差 18”

# python - 重定向到发送请求的相同 url

> ID：11988992
> 
> 赞同：0
> 
> 时间：2012-08-16T14:09:00.833
> 
> 标签：python, django, django-views

# 视图.py

```
def login_user(request):
    if request.POST:
        sform = LoginForm(request.POST)
        rform = UserForm()
        if sform.is_valid():
            username = request.POST.get('username')
            password = request.POST.get('password')
            user = authenticate(username = username,password = password)
            if user is not None:
                if user.is_active:
                    login(request,user)
                    return redirect(request.path)
                else:
                    state = "Your account is not active."
                    #or first set the user to is active and then log in 
                    return redirect('acitvate_account',user = user)
                return render_to_response('home.html',{'state':state,'user':user},context_instance = RequestContext(request))
            else:
                state = "Incorrect Username or Password"
                #sform = LoginForm()
                form = LoginForm()
                return render_to_response('register.html',{'state':state,'sform':sform,'rform':rform,'form':form},context_instance = RequestContext(request))
        else:
            state = "Invalid form"
            dLoginForm = LoginForm()
            rform = PartialSignupForm()
            return render_to_response('register.html',{'sform':sform,'rform':rform,'form':form},context_instance = RequestContext(request))
    else:
        dLoginForm = LoginForm()
        rform = PartialSignupForm()
        return render_to_response('category.html',{'dLoginForm':dLoginForm,'rform':rform},context_instance = RequestContext(request)) 
```

# 网址.py

```
urlpatterns += patterns('beenthere.views',
    #beenthere urls
    (r'^$','index'),
    (r'^home2/$','category'),
    (r'^accounts/login/$','login_user'),
    (r'^accounts/register/$','register_user'),
    (r'^home/(?P<user>\w*)$','home'),
    (r'^logout/','logout_user'),

    ) 
```

# 怀疑

我想如何重定向发送请求的相同 url，我尝试使用 request.path 但它将我重定向到 /accounts/login/ url，这是不需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:20:56.853

您需要做的是在显示登录表单时跟踪引荐来源网址，可能将该值存储在用户会话中，然后在用户成功登录后将其重定向回该网址。

类似于以下内容：

```
def login_user(request):
    if request.POST:
        sform = LoginForm(request.POST)
        rform = UserForm()
        if sform.is_valid():
            username = request.POST.get('username')
            password = request.POST.get('password')
            user = authenticate(username = username,password = password)
            if user is not None:
                if user.is_active:
                    login(request,user)
                    return redirect(request.path)
                else:
                    state = "Your account is not active."
                    #or first set the user to is active and then log in 
                    return redirect(req.session['after_login_url'],user = user)
                return render_to_response('home.html',{'state':state,'user':user},context_instance = RequestContext(request))
            else:
                state = "Incorrect Username or Password"
                #sform = LoginForm()
                form = LoginForm()
                return render_to_response('register.html',{'state':state,'sform':sform,'rform':rform,'form':form},context_instance = RequestContext(request))
        else:
            state = "Invalid form"
            dLoginForm = LoginForm()
            rform = PartialSignupForm()
            return render_to_response('register.html',{'sform':sform,'rform':rform,'form':form},context_instance = RequestContext(request))
    else:
        dLoginForm = LoginForm()
        rform = PartialSignupForm()
        req.session['after_login_url'] = req.META.get('HTTP_REFERER')
        return render_to_response('category.html',{'dLoginForm':dLoginForm,'rform':rform},context_instance = RequestContext(request)) 
```

当然，您还应该添加检查以确保 HTTP_REFERER 标头存在，并确保`after_login_url`密钥存在（并且可能具有合理的值，以防外部站点直接链接到您的登录页面或类似页面），并具有如果这些测试中的任何一个失败（例如用户的个人资料页面或您的网站索引页面），则安全后退。

# android - 如何将屏幕垂直分成三部分？

> ID：11988994
> 
> 赞同：9
> 
> 时间：2012-08-16T14:09:02.223
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我有`ScrollView`三个不同的屏幕`LinearLayouts`。

一个`LinearLayout`包含一个`Spinner`，第二个包含`ListView`，第三个包含两个`Buttons`（水平）。

我想显示一个包含 3`LinearLayouts`始终显示在屏幕底部和 1`LinearLayout`始终显示在顶部的屏幕。在中间部分，我想显示`ListView`内容。这样在整个屏幕上就没有空白区域了。

我想为具有不同尺寸的多个设备创建屏幕。

```
 <?xml version="1.0" encoding="utf-8"?>
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/backrepeat"
android:orientation="vertical" >

<include
    android:id="@+id/include1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    layout="@layout/actionbar" >
</include>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scrollbars="horizontal" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="10dp" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight=".2"
            android:background="@drawable/rounded_border"
            android:orientation="vertical"
            android:padding="15dp" >

            <TextView
                android:id="@+id/tvDiaryData"
                style="@style/greenstyle"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/heading"
                android:gravity="center_horizontal"
                android:text="@string/tvDiaryData" >
            </TextView>

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="10dp"
                android:gravity="center_horizontal" >
            </TextView>

            <Spinner
                android:id="@+id/spDiaryAllBooking"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:prompt="@string/select_diaryallbooking" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.6"
            android:background="@drawable/layerlist"
            android:orientation="vertical"
            android:paddingBottom="5dp"
            android:paddingLeft="15dp"
            android:paddingRight="15dp"
            android:paddingTop="5dp" >

            <ListView
                android:id="@+id/lvDiaryBooking"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:divider="#636466"
                  android:layout_weight="1"
                android:dividerHeight="1dip"
                android:scrollbarStyle="outsideOverlay"
                android:scrollbarThumbVertical="@drawable/scrollbar_vertical_thumb" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight=".2"
            android:background="@drawable/rounded_border"
            android:orientation="horizontal"
            android:padding="10dp" >

            <Button
                android:id="@+id/btnDiaryBook"
                style="@style/greenButton"
                  android:layout_weight="1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"                    
                android:onClick="btnDiaryBook_Click"
                android:text="@string/btnBook" >
            </Button>

            <Button
                android:id="@+id/btnDiaryBalance"
                style="@style/greenButton"
                  android:layout_weight="1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_marginLeft="10dp"                 
                android:onClick="btnDiaryBalance_Click"
                android:text="@string/btnDiaryBalance" >
            </Button>
        </LinearLayout>
    </LinearLayout>
         </ScrollView>

     </LinearLayout> 
```

我想要的屏幕布局：

![在此处输入图像描述](../Images/1f81080bdff5b6e5d4cd40b786483376.png)

![当前布局 - 这会在平板电脑屏幕下方提供空白空间](../Images/bfa2ff7f0f394ae7337bff00833a51d1.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T14:23:19.763

这是一个非常简单的解决方案。您应该能够在当前布局中使用它。

只需`LinearLayouts`用您想要的内容填充。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/ll1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll3"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >
    </LinearLayout>

</LinearLayout> 
```

上面发布的代码的屏幕截图，其中颜色显示了不同的布局区域。

![在此处输入图像描述](../Images/1d0224cecc855ee201111256586256b1.png)

# java - JavaFX 的文本控件的 JTextArea.viewToModel 等价物是什么？

> ID：11988995
> 
> 赞同：3
> 
> 时间：2012-08-16T14:09:03.510
> 
> 标签：java, javafx

在 JavaFX 中，在一些文本控件（如 TextArea 或类似内容）中，我希望能够从鼠标事件坐标进行转换，以准确了解鼠标下方的字符位置。有没有一些简单的方法可以做到这一点？

在 Swing 中，您可以使用 JTextArea.viewToModel，但我在 JavaFX 中找不到等效项。

具体来说，我试图在文本（行/列）中找到鼠标事件发生的位置。知道它出现在字符的哪一侧也会很好，尽管我不知道这是否受支持。

换句话说，我想在鼠标悬停时装饰角色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T21:38:27.217

我找到了答案。它的：

```
TextArea text = ...
HitInfo hit = ((TextAreaSkin) text.getSkin()).getIndex(me); 
```

是的，它在 com.sun.** 包中，但我别无选择。我可以希望甲骨文有朝一日会公开同样的内容。

isLeading on HitInfo doesn't seem to work: it always returns true. And the insertion/char index are always the same even when they shouldn't be... But, at least I can get the insertion/char index. I suppose I should report bugs for those things but since they're not public APIs they probably won't care.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:33:26.127

也许鼠标事件的坐标不是必需的。您知道某些鼠标事件会移动克拉（或选择）。当您在 textarea 中听到其中一个时，只需向 textarea 询问克拉缠绕的位置。

如果这是可以接受的，那么[getAnchor()](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextInputControl.html#getAnchor%28%29)和[getCaretPosition()](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextInputControl.html#getCaretPosition%28%29)似乎就是你想要的。

来自 getCaretPosition() 的 javadoc

> 插入符号在文本中的当前位置。锚点和 caretPosition 组成了选择范围。

# openoffice.org - 如何在 OpenOffice.org 中为文本编写内联样式

> ID：11988997
> 
> 赞同：4
> 
> 时间：2012-08-16T14:09:05.680
> 
> 标签：openoffice.org

我知道 OpenOffice.org 的风格

<office:automatic-styles > .... <office:automatic-styles />

但

我想要与 HTML 样式相同的内联样式，

像

< text:span style="color:" ></text:span > （类似的）....这可能吗？

如果您知道此类示例或文章，请参考我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-29T07:51:46.810

对于 LibreOffice 4（可能也适用于早期版本和/或 OpenOffice）：

代码：

1.  在 styles.xml 中：在 <office:styles> 中

    ```
    <style:style style:name="STYLE_NAME" style:family="text">
         <style:text-properties style:font-name="DejaVu Sans Mono1" ... />
    </style:style> 
    ```

2.  在 content.xml 中：

    ```
    <text:span text:style-name="STYLE_NAME">abc def ghi jkl</text:span> 
    ```

所见即所得：

1.  在标准文本上应用样式并选择它
2.  打开样式和格式（从*格式菜单*->*样式和格式*或按 F11）
3.  切换到字符样式选项卡（第二个，带有“a”）
4.  使用最后一个按钮或右侧，*选择新样式*

每当您选择文本时，当前使用的内联样式将在*样式和格式*窗口中突出显示。*要应用样式，请选择文本并在“样式和格式”*窗口中双击该样式。

对不起，答案来得太晚了，我只是想知道自己并最终找到了解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-10T09:50:57.017

发现这一点并引导我在较新的版本 6.x 中找到更用户友好的解决方案

在样式面板（侧边栏）的顶部，默认选择是段落样式。选择相邻的字符样式，您就可以创建、修改和应用内联样式。