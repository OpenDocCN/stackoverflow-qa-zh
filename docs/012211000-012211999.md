# StackOverflow 问答 12211000-12211999

# c++ - XCode 升级到 4.4.1，现在我在 stl 中编译时出错

> ID：12211000
> 
> 赞同：0
> 
> 时间：2012-08-31T07:48:33.980
> 
> 标签：c++, xcode

升级到 XCode 4.4.1 并重新启动我的机器，重新编译，现在当我尝试编译时出现以下错误 - 有什么建议吗？（它曾经编译得很好）（在 Lion 10.7.4 上运行，XCode 版本 4.4.1）

```
#ifndef MYFILE_H
#define MYFILE_H

#include <vector> <-- this line
#include <typeinfo>
#include <string>
#include "assert.h"

using namespace std; 
```

错误信息

```
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/c++/4.2.1/vector:69:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/c++/4.2.1/bits/stl_vector.h:69:1: error: expected member name or ';' after declaration specifiers
_GLIBCXX_BEGIN_NESTED_NAMESPACE(std, _GLIBCXX_STD) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:12:19.740

如果这个问题仍然存在，我建议您检查以下项目设置行：

*   C++ 语言方言（我的：编译器默认）
*   C++ 标准库（我的：编译器默认）
*   C/C++/Objective-C 的编译器（我的：Apple LLVM 编译器 4.1）

并非所有组合都有效，并且并非总是“编译器默认值”是默认值。我也遇到了一些问题。

（从错误消息看来，您使用的是 libstdc++ 而不是 libc++，但不是 gcc 编译器左右。更新后我遇到了类似的问题。）

# c# - 从按钮服务器端单击的 request.rawurl 中删除一部分

> ID：12211013
> 
> 赞同：0
> 
> 时间：2012-08-31T07:49:11.417
> 
> 标签：c#

我如何从按钮服务器端的请求 url 中删除一部分点击这里是我的代码：

```
URL:http://localhost:51854/SupportWebsite/Dashboard.aspx?FromForum=T

NewURL:http://localhost:51854/SupportWebsite/Dashboard.aspx 
```

我知道我可以使用诸如删除和替换之类的字符串属性，但我不想在按钮单击结束时使用 Responce.Redirect(NewUrl) 因为这没有任何意义，因为按钮确实以他的默认值回发功能性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:54:01.927

您可以使用[Uri.GetLeftPart](http://msdn.microsoft.com/en-us/library/system.uri.getleftpart.aspx)方法：

```
string oldUrl = "http://localhost:51854/SupportWebsite/Dashboard.aspx?FromForum=T";
Uri uri = new Uri(oldUrl);
string newUrl = uri.GetLeftPart(UriPartial.Path); 
```

# asp.net - Facebook 开发 asp.net

> ID：12211014
> 
> 赞同：0
> 
> 时间：2012-08-31T07:49:17.433
> 
> 标签：asp.net, .net, facebook, facebook-c#-sdk, desktop-application

我有一个问题，我需要向 Facebook 上的一些朋友发送消息，而单独向每个朋友发送消息是浪费时间

我还希望能够将包含图像和文本的帖子发送到一些 Facebook 群组以用于营销目的到我的 Facebook 页面

所以我认为我可以找到一个可以帮助我做到这一点的程序，甚至可以找到一些可以做到这一点的代码示例，或者我可能需要制作自己的程序，但我以前从未处理过 facebook 平台

所以请如果有人可以帮助我将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:40:10.090

这对于 Windows PowerShell 和[http://facebookpsmodule.codeplex.com](http://facebookpsmodule.codeplex.com)很简单。例如

结交朋友 | Show-FBMessageDialog -链接[http://www.example.com](http://www.example.com)

显示一个对话框以向您的所有朋友发送消息（或者您可以在命令中添加过滤器）。我用它向一千多人发送了一条消息。这不是完全自动化的（Facebook API 限制），它会为每 50 个收件人显示一个对话框。

# database - 如何使用 Delphi 应用程序在 MS Access 数据库中创建 VIEW 而无需在 PC 上安装 MSAccess？

> ID：12211016
> 
> 赞同：4
> 
> 时间：2012-08-31T07:49:18.437
> 
> 标签：database, delphi, ms-access, view

我想在 MS Access 上创建 VIEW 定义。我使用了以下`CREATE VIEW`语句：

```
SELECT 
   MFP.FollowUpPlan_Id, 
   MFP.FollowUpPlan_Name AS PlanName, 
   DFP.Sequence_No AS SequenceNo, 
   MFS.FollowUpSchedule_Name AS ScheduleName    
FROM 
   MAS_FollowUp_Plan AS MFP, 
   DET_FollowUp_Plan AS DFP, 
   MAS_FollowUp_Schedule AS MFS
WHERE 
   (((MFP.FollowUpPlan_Id)=DFP.FollowUpPlan_Id) AND
   ((DFP.FollowUpSchedule_Id)=MFS.FollowUpSchedule_Id)) AND
   MFP.is_Deleted = FALSE AND
   DFP.is_Deleted = false     
ORDER BY 
   MFP.FollowUpPlan_Id, DFP.Sequence_No; 
```

但它抛出一个错误：

```
Only Simple Select Queries are allowed in view. 
```

请帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T14:53:12.850

正如 Jeroen 解释的那样，这里的问题是 Access`CREATE VIEW`声明的限制。对于这种情况，您可以`CREATE PROCEDURE`改用。它将创建 db`QueryDefs`集合的新成员 --- 因此从 Access 用户界面将显示为一个新的命名查询。

以下语句对我使用 VBScript 中的 ADO 有效。从这里以前的Delphi问题来看，我的理解是Delphi也可以使用ADO，所以我相信这也对你有用。

```
CREATE PROCEDURE ViewSubstitute AS
SELECT
    MFP.FollowUpPlan_Id,
    MFP.FollowUpPlan_Name AS PlanName,
    DFP.Sequence_No AS SequenceNo,
    MFS.FollowUpSchedule_Name AS ScheduleName
FROM
    (MAS_FollowUp_Plan AS MFP
    INNER JOIN DET_FollowUp_Plan AS DFP
    ON MFP.FollowUpPlan_Id = DFP.FollowUpPlan_Id)
    INNER JOIN MAS_FollowUp_Schedule AS MFS
    ON DFP.FollowUpSchedule_Id = MFS.FollowUpSchedule_Id
WHERE
    MFP.is_Deleted=False AND DFP.is_Deleted=False
ORDER BY
    MFP.FollowUpPlan_Id,
    DFP.Sequence_No; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T09:28:02.553

[在 Access 中创建视图时`ORDER BY`不能混用`JOIN`](http://blogs.msdn.com/b/robert_mcmurray/archive/2009/09/25/creating-a-microsoft-access-provider-for-iis-database-manager.aspx)。它会给你错误[“ `Only simple SELECT queries are allowed in VIEWS.`”](https://www.google.com/search?q=%22Only%20Simple%20Select%20Queries%20are%20allowed%20in%20views%22)（注意复数视图）

在 中拥有多个表`FROM`是一种 to `JOIN`。

*   要么删除`ORDER BY`,
*   或者只有一个表`FROM`并且没有`JOIN`s。

我记得过去（当我做的 Access 东西比现在多）时，我在一个带有单个表选择的大型查询中也看到了这一点`ORDER BY`。

[`ORDER BY`共识是无论如何你都不应该有](http://blog.sqlauthority.com/2010/08/23/sql-server-order-by-does-not-work-limitation-of-the-views-part-1/)意见，所以这是你最好的做法。

[您可能会收到相同错误消息的另一个原因](http://office.microsoft.com/en-gb/access-help/HV080760732.aspx)是您添加了参数或子选择。Access 也不喜欢视图中的那些，但在您的视图中并非如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:22:52.357

在 Delphi 中声明变量 olevarCatalog ,cmd 为 OleVariant，使用 ComObj

```
olevarCatalog := CreateOleObject('ADOX.Catalog');
olevarCatalog.create(YourConnectionString); //This Will create MDB file.
// Using ADO Query(CREATE TABLE TABLEName....) add the required Tables.

// To Insert View Definition on MDB file.
cmd := CreateOleObject('ADODB.Command');
cmd.CommandType := cmdText;
cmd.CommandText := 'ANY Kind of SELECT Query(JOIN, OrderBy is also allowed)';
olevarCatalog.Views.Append('Name of View',cmd);
cmd := null; 
```

这是使用 Delphi 创建 MS ACCESS 文件 (.MDB) 和 VIEW 的最佳方式。

# iphone - 如何在objective-C中绘制四分之一圆

> ID：12211021
> 
> 赞同：3
> 
> 时间：2012-08-31T07:49:42.770
> 
> 标签：iphone, objective-c

> **可能重复：**
> [圆到圆段碰撞](https://stackoverflow.com/questions/4226356/circle-to-circle-segment-collision)

我是 iOS 开发的初学者。您知道如何使用 CoreGraphic绘制这样的图像[http://www.hoodshomecenters.com/product_images/v/723/QuarterRound__65714_zoom.jpg吗？](http://www.hoodshomecenters.com/product_images/v/723/QuarterRound__65714_zoom.jpg)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T08:52:26.840

这是绘制圆弧部分的代码。绘制完成后，您可以在其中绘制线条。

```
#include <math.h>

CGFloat radius = 100;

CGFloat starttime = M_PI/6; //1 pm = 1/6 rad
CGFloat endtime = M_PI;  //6 pm = 1 rad

//draw arc
CGPoint center = CGPointMake(radius,radius);
UIBezierPath *arc = [UIBezierPath bezierPath]; //empty path
[arc moveToPoint:center];
CGPoint next;
next.x = center.x + radius * cos(starttime);
next.y = center.y + radius * sin(starttime);
[arc addLineToPoint:next]; //go one end of arc
[arc addArcWithCenter:center radius:radius startAngle:starttime endAngle:endtime clockwise:YES]; //add the arc
[arc addLineToPoint:center]; //back to center

[[UIColor yellowColor] set];
[arc fill]; 
```

您需要覆盖将用于显示此绘图的视图的 drawRect 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:21:44.927

`UIBezierPath`您可以使用该方法绘制带有类的弧段`bezierPathWithArcCenter:radius:startAngle:endAngle:clockwise`。看看[这里](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/BezierPaths/BezierPaths.html)

您还需要使用以下组合为线条创建路径`CGContextMoveToPoint/ CGContextAddLineToPoint`

`stroke`最后，您通过调用路径上的方法来描边。

**编辑** 要绘制你可能想要剪辑的内线：这是用`CGContextClip`函数完成的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:25:55.750

你当然可以使用

```
void CGContextAddArcToPoint 
```

文档：

[CGContext 参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html)

# lua - 从用逗号分隔的数字字符串中获取数组

> ID：12211025
> 
> 赞同：2
> 
> 时间：2012-08-31T07:50:02.070
> 
> 标签：lua

如何`s = "6.1101,17.592,3.3245\n"`在 Lua 中将字符串转换为数字。

在python中，我通常这样做

```
a = s.strip().split(',')
a = [float(i) for i in a] 
```

使用 Lua 执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:39:01.047

这是相当微不足道的；只是做一个重复的比赛：

```
for match in s:gmatch("([%d%.%+%-]+),?") do
  output[#output + 1] = tonumber(match)
end 
```

这当然假设数字中没有空格。

# libevent - 在windows上获取正确系统路径的方法

> ID：12211026
> 
> 赞同：0
> 
> 时间：2012-08-31T07:50:09.147
> 
> 标签：libevent, boost-filesystem

我使用 libevent 构建了一个简单的 http 服务器。访问资源（在我的情况下为文件夹）的方式是

```
http://serverAddress:port/path/to/resouce/ 
```

使用解码的 url 提取资源的路径。它在 Linux 上运行良好，因为请求是这样的

```
http://severAddress:port/home/vickey/folder 
```

但在 window$ 请求是

```
http://serverAddress:port/c:/users/vickey/folder 
```

这导致解码的 url 为*/c:/users/vickey/folder*。它可以手动删除前导斜杠以纠正问题。但是，由于我在我的代码中使用和学习 boost 库，我想知道是否有这种实现？我尝试使用 native() 和 relative_path()。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:01:38.393

它绝对可以按照你的要求去做，但我会建议一种不同的方法。如何为服务器创建一个可以称为 RESOURCE_BASE_PATH 的配置属性。在 URL 中接收到的资源路径将附加到 RESOURCE_BASE_PATH 以创建完整路径。

这对于 FTP 和 HTTP 服务器等来说是相当标准的。在 Windows 上，它可以设置为“c:”，在 Linux 上，留空，默认为“/”。

还要记住，Windows 上的斜杠 (\) 与 Unix 上的斜杠 (/) 不同。

# command-line - 使用 sed/awk/etc 从包含来自另一个文件的任何字符串的文本文件中删除行

> ID：12211027
> 
> 赞同：1
> 
> 时间：2012-08-31T07:50:10.717
> 
> 标签：command-line, grep

在编程方面，我是一个初学者，我感谢您愿意提供的所有帮助。

这是我的问题...

我有一个包含很多行的 data.txt 文件和一个包含一些字符串（每行 1 个字符串）的 strings.txt 文件。

我想删除 data.txt 中的所有行，如果它们包含来自 strings.txt 的任何字符串，并将该新文件保存为 proc_data.txt。

我知道我可以使用 sed 搜索和删除 1 个或多个字符串，但是在 CLI 中键入 500 多个字符串会使它......嗯，你知道的。

到目前为止我尝试过的

```
~$ for i in `cat strings.txt`; do sed '/${i}/d' data.txt -i.bak; done 
```

但它只是备份了具有相同大小的 data.txt。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:58:53.460

使用`grep`：

```
LC_ALL=C fgrep -v -f strings.txt data.txt >proc_data.txt 
```

它使用 switch搜索`strings.txt`in的所有字符串。反转结果添加。将输出重定向到您想要的文件。`data.txt``-f``-v`

# java - 在 jMock 中捕获方法参数以传递给存根实现

> ID：12211030
> 
> 赞同：12
> 
> 时间：2012-08-31T07:50:24.377
> 
> 标签：java, unit-testing, mocking, jmock

我希望实现以下行为。我的测试类依赖于其他类，我希望用 jMock 模拟这种依赖。`will(...)`大多数方法会返回一些标准值，但是有一种方法，我希望调用存根实现，我知道我可以从传递给模拟方法。

测试

```
@Test
public void MyTest(){
    Mockery context = new Mockery() {
        {
            setImposteriser(ClassImposteriser.INSTANCE);
        }
    };
    IDependency mockObject = context.mock(IDependency.class);
    Expectations exp = new Expectations() {         
        {
            allowing(mockObject).methodToInvoke(????);
            will(stubMethodToBeInvokedInstead(????));
        }       
    };      
} 
```

界面

```
public interface IDependency {
    public int methodToInvoke(int arg);
} 
```

要调用的方法

```
public int stubMethodToBeInvokedInstead(int arg){
    return arg;
} 
```

那么如何捕获传递给被模拟方法的参数，以便我可以将它们传递给存根方法呢？

**编辑**

再举一个例子，假设我希望`INameSource`在以下 (C#) 代码中模拟依赖项，以测试 Speaker 类

```
public class Speaker
{
  private readonly string firstName;
  private readonly string surname;
  private INameSource nameSource ;
 public Speaker(string firstName, string surname, INameSource nameSource)
  {
    this.firstName = firstName;
    this.surname = surname;
    this.nameSource = nameSource;
  }
  public string Introduce()
  {
    string name = nameSource.CreateName(firstName, surname);
    return string.Format("Hi, my name is {0}", name);
  }
}
public interface INameSource
{
  string CreateName(string firstName, string surname);
} 
```

[这就是如何在 Rhino Mocks for C# 中完成的](http://ayende.com/wiki/Rhino+Mocks+The+Do%28%29+Handler.ashx)我知道它不可能像这样简单，因为 Java 中缺少委托

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-12T19:52:29.737

Duncan 的解决方案效果很好，但甚至还有一个更简单的解决方案，无需借助自定义匹配器。只需使用传递给 CustomActions 调用方法的 Invocation 参数。在此参数中，您可以调用 getParameter(long i) 方法，该方法为您提供调用中的值。

所以代替这个

```
return matcher.getLastValue(); 
```

用这个

```
return (Integer) invocation.getParameter(0); 
```

现在您不再需要 StoringMatcher：Duncans 示例现在看起来像这样

```
@RunWith(JMock.class)
public class Example {

  private Mockery context = new JUnit4Mockery();

  @Test
  public void Test() {

    final IDependency mockObject = context.mock(IDependency.class);

    context.checking(new Expectations() {
      {
        // No custom matcher required here
        allowing(mockObject).methodToInvoke(with(any(Integer.class)));

        // The action will return the first argument of the method invocation.
        will(new CustomAction("returns first arg") {
          @Override
          public Object invoke(Invocation invocation) throws Throwable {
            return (Integer) invocation.getParameter(0);
          }
        });
      }
    });

    Integer test1 = 1;
    Integer test2 = 1;

    // Confirm the object passed to the mocked method is returned
    Assert.assertEquals((Object) test1, mockObject.methodToInvoke(test1));
    Assert.assertEquals((Object) test2, mockObject.methodToInvoke(test2));
  }

  public interface IDependency {
    public int methodToInvoke(int arg);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T13:45:59.163

像奥古斯托一样，我不相信这是一个好主意。然而，我忍不住玩了一点。我创建了一个自定义匹配器和一个自定义操作，用于存储和返回提供的参数。

注意：这远非生产就绪代码；我只是玩得很​​开心。这是一个独立的单元测试，它证明了解决方案：

```
@RunWith(JMock.class)
public class Example {

  private Mockery context = new JUnit4Mockery();

  @Test
  public void Test() {

    final StoringMatcher matcher = new StoringMatcher();
    final IDependency mockObject = context.mock(IDependency.class);

    context.checking(new Expectations() {
      {
        // The matcher will accept any Integer and store it
        allowing(mockObject).methodToInvoke(with(matcher));

        // The action will pop the last object used and return it.
        will(new CustomAction("returns previous arg") {
          @Override
          public Object invoke(Invocation invocation) throws Throwable {
            return matcher.getLastValue();
          }
        });
      }
    });

    Integer test1 = 1;
    Integer test2 = 1;

    // Confirm the object passed to the mocked method is returned
    Assert.assertEquals((Object) test1, mockObject.methodToInvoke(test1));
    Assert.assertEquals((Object) test2, mockObject.methodToInvoke(test2));
  }

  public interface IDependency {
    public int methodToInvoke(int arg);
  }

  private static class StoringMatcher extends BaseMatcher<Integer> {

    private final List<Integer> objects = new ArrayList<Integer>();

    @Override
    public boolean matches(Object item) {
      if (item instanceof Integer) {
        objects.add((Integer) item);
        return true;
      }

      return false;
    }

    @Override
    public void describeTo(Description description) {
      description.appendText("any integer");
    }

    public Integer getLastValue() {
      return objects.remove(0);
    }
  }
} 
```

* * *

## 更好的计划

现在您已经提供了一个具体的示例，我可以向您展示如何在 Java 中进行测试，而无需求助于我上面的 JMock 黑客。

首先，您发布的一些 Java 版本：

```
public class Speaker {
  private final String firstName;
  private final String surname;
  private final NameSource nameSource;

  public Speaker(String firstName, String surname, NameSource nameSource) {
    this.firstName = firstName;
    this.surname = surname;
    this.nameSource = nameSource;
  }

  public String introduce() {
    String name = nameSource.createName(firstName, surname);
    return String.format("Hi, my name is %s", name);
  }
}

public interface NameSource {
  String createName(String firstName, String surname);
}

public class Formal implements NameSource {
  @Override
  public String createName(String firstName, String surname) {
    return String.format("%s %s", firstName, surname);
  }    
} 
```

然后是一个测试，它练习了课程的所有有用功能，而不是诉诸于你最初要求的东西。

```
@RunWith(JMock.class)
public class ExampleTest {

  private Mockery context = new JUnit4Mockery();

  @Test
  public void testFormalName() {
    // I would separately test implementations of NameSource
    Assert.assertEquals("Joe Bloggs", new Formal().createName("Joe", "Bloggs"));
  }

  @Test
  public void testSpeaker() {
    // I would then test only the important features of Speaker, namely
    // that it passes the right values to the NameSource and uses the
    // response correctly
    final NameSource nameSource = context.mock(NameSource.class);
    final String firstName = "Foo";
    final String lastName = "Bar";
    final String response = "Blah";

    context.checking(new Expectations() {
      {
        // We expect one invocation with the correct params
        oneOf(nameSource).createName(firstName, lastName);
        // We don't care what it returns, we just need to know it
        will(returnValue(response));
      }
    });

    Assert.assertEquals(String.format("Hi, my name is %s", response),
        new Speaker(firstName, lastName, nameSource).introduce());
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:46:26.757

JMock 不支持您的用例（或我在 java 中知道的任何其他模拟框架）。

我脑子里有个小声音说你正在尝试做的事情并不理想，而且你的单元测试可能太复杂了（也许它测试了太多的代码/逻辑？）。我看到的一个问题是，您不知道这些模拟需要返回哪些值，并且您正在插入其他东西，这可能会使每次运行都无法重现。

# c++ - 接口的实现

> ID：12211033
> 
> 赞同：0
> 
> 时间：2012-08-31T07:50:33.187
> 
> 标签：c++, oop, interface, implementation

我有一个接口和一些实现。但在一个实现中，我有一个指定功能，仅在该实现中使用。

```
class Interface
{
    virtual void foo() = 0;
}

class D1 : public Interface
{
    void foo() {}
}

class D2 : public Interface
{
    void foo() {}
    void bar() {}
} 
```

所以我只有在 D2 中有一个 D2::bar() 函数，它只为 D2 实现指定。使用 OOP 编写这类东西的正确方法是什么？

在我的客户端代码中，我有一个电话：Interface* i; i->foo();

但如果它是“i”中的 D2，在某些情况下我需要调用 bar() 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:52:57.097

如果你需要调用 bar 函数，你需要有一个知道 bar 的对象的引用。

所以，要么你引用一个 D2 对象，要么你的接口必须包含一个 bar 函数。在后一种情况下，您的 D1 也必须实现它，但实现可以为空或返回错误值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:54:13.923

如果你坚持使用接口，你应该`bar`进入一个专用接口，然后让客户使用它：

```
class FooInterface {
public:
    virtual void foo() = 0;
};

class BarInterface {
public:
    virtual void bar() = 0;
};

class D1 : public FooInterface {
public:
    void foo() {}
};

class D2 : public FooInterface,
           public BarInterface {
public:
    void foo() {}
    void bar() {}
}; 
```

然后，您需要实现的客户端代码`bar`可能需要一个`BarInterface`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:54:59.500

假设您从接口继承 D1 和 D2。您可以使用强制转换将基指针转换为派生对象并使用它，前提是基指针指向`D2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:20:41.000

```
class _interface
{
    virtual void foo() = 0;
};

class _abstract : public _interface
{
public:
    _abstract(){}
    virtual ~_abstract(){};

    virtual void foo() = 0;
    int get_type()
    {
        return i_type;
    }

protected:
    int i_type;
};

class D1 : public _abstract
{
public:
    D1(){
        i_type = 1;
    }
    ~D1(){}

    void foo() {
        // do something
    }
};

class D2 : public _abstract
{
public:
    D2(){
        i_type = 2;
    }
    ~D2(){}

    void foo() {
        // do something
    }

    void bar() {
        // do something
    }
};
int main()
{
    D1 d_one;
    D2 d_two;

    _abstract* ab = &d_one;
    cout << ab->get_type() << "D1" << endl;

    ab = &d_two;
    cout << ab->get_type() << "D2" << endl;

    return 0;
} 
```

您可以通过 get_type() 来识别哪个孩子。所以，你知道什么时候可以使用 bar()。我不知道什么是最好的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T09:07:36.733

如果你准备在你的界面中有一些通用的实现，你可以在你的界面中放置一个 bar() 的空实现：

```
class Interface
{
    virtual void foo() = 0;
    virtual void bar() {}
}

class D1 : public Interface
{
    void foo() {}
}

class D2 : public Interface
{
    void foo() {}
    void bar() {}
} 
```

现在当你调用 Interface i* = blah; 我->酒吧（）；如果 i 是 D1 它什么也不做，如果 i 是 D2 它会做一些 D2 特定的事情。

# java - Asynctask，此令牌之后的预期尺寸

> ID：12211034
> 
> 赞同：5
> 
> 时间：2012-08-31T07:50:35.800
> 
> 标签：java, android, eclipse, adt

我关注 asynctask 上的 android 文档，试图让一个可以在后台对 wifi 执行操作的 asynctask 运行，我遇到的问题是在下面的代码中的 Asynctask，void 和 boolean 或任何我放在那里的东西一直显示为错误消息“令牌后预期的尺寸”。我不知道这是指什么，这部分上面的所有内容看起来都很好并且工作正常，在谷歌上也找不到太多。

```
public class MainActivity extends Activity{
.......

class wifilistener extends AsyncTask<WifiManager,void,boolean> //trouble spot {

            protected void onPreExecute(){
                //show info on UI thread
            }

            protected boolean doInBackground(WifiManager...wifi1) {
                //do stuff
                }

            protected void onProgressUpdate(){

            }

                protected void onPostExecute(boolean result) {

                }
            }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T07:55:22.833

试试 Void 和 Boolean；对于 Asynctask，您必须使用 Object 而不是原始类型。所以，使用大写的 V 和 B，应该可以。

# mysql - mysql update + ( where + join) 语法

> ID：12211035
> 
> 赞同：12
> 
> 时间：2012-08-31T07:50:38.640
> 
> 标签：mysql, join, where

```
 $rs = mysql_query("
        SELECT a.id 
        FROM a
        JOIN b ON b.id=a.id
        WHERE 
            b.p1=1 AND 
            a.p1=1");

    while($r = mysql_fetch_assoc($rs))
        $ids[] = $r['id'];

    $rs = mysql_query("
        UPDATE a
        SET p2=2 
        WHERE id IN (".implode(",",$ids).")"); 
```

如何在一个查询中执行此操作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-31T07:54:50.590

```
UPDATE a
JOIN   b ON a.id=b.id AND a.p1 = 1 AND b.p1 = 1
SET    a.p2 = 2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T07:55:49.153

您可以使用`INNER JOIN`which perform better than`IN`子句来做到这一点：

```
UPDATE a
       INNER JOIN b
           ON b.id=a.id
              AND b.p1 = 1
              AND a.p1 = 1
SET p2 = 2; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T07:51:47.340

```
UPDATE a
SET p2=2 
WHERE id IN (SELECT a.id 
        FROM a
        JOIN b ON b.id=a.id
        WHERE 
            b.p1=1 AND 
            a.p1=1) 
```

# c# - 为什么我不能在隐式转换中返回接口，但 ExpandoObject 可以？

> ID：12211044
> 
> 赞同：2
> 
> 时间：2012-08-31T07:51:21.313
> 
> 标签：c#, dynamic, interface, casting, expandoobject

我有一个`DynamicObject`并且我希望它可以转换为 IDictionary，与`ExpandoObject`. 例如，将 ExpandoObject 强制转换为 IDictionary 是完全有效的：

```
dynamic ex = new ExpandoObject ();
ex.Field = "Foobar";
IDictionary<string, object> dict = ex as IDictionary<string, object>;
Console.WriteLine (dict["Field"]); 
```

现在我尝试将它实现到我自己的 DynamicObject 中：

```
public class MyDynamicObject : DynamicObject
{
    public Dictionary<string, object> members = new Dictionary<string, object> ();

    public override bool TryGetMember (GetMemberBinder binder, out object result)
    {
        if (members.ContainsKey (binder.Name)) {
            result = members[binder.Name];
            return true;
        }
        else {
            result = null;
            return false;
        }
    }
    public override bool TrySetMember (SetMemberBinder binder, object value)
    {
        this.members.Add (binder.Name, value);
        return true;
    }
    public static implicit operator IDictionary<string, object> (MyDynamicObject mydo) 
    {
        return (IDictionary<string, object>) mydo.members;
    }
} 
```

但是编译器将`public static implicit operator IDictionary<string, object>`在线失败，并给出错误：“无法转换为接口类型或从接口类型转换”。如果我将隐式运算符更改为 Dictionary，我可以将 MyDynamicObject 转换为 Dictionary 而不会出现任何问题，但不是 IDictionary。

ExpandoObject 如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T07:52:30.900

[`ExpandoObject`](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)简单地实现`IDictionary<string, object>`.

如果您想拥有相同的行为，您还需要实现此接口并将所有调用委托给您的`members`字段。

像这样的东西：

```
public class MyDynamicObject : DynamicObject, IDictionary<string, object>
{
    public Dictionary<string, object> members = new Dictionary<string, object>();

    public IEnumerator<KeyValuePair<string, object>> GetEnumerator()
    {
        return members.GetEnumerator();
    }

    public void Add(KeyValuePair<string, object> item)
    {
        members.Add(item.Key, item.Value);
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:54:42.110

DLR 不会询问演员表操作员 - 因此这不起作用。

您可以继承`IDictionary`或覆盖该[`TryConvert`](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.tryconvert.aspx)方法。

由于实现`IDictionary`需要实现或删除大量操作，因此您可能会发现`TryConvert`路由实际上更容易实现；不利的一面是，在您的实现中，`TryConvert`您几乎肯定会在每次调用它时生成一个新的字典实例（除非您缓存结果*并*使其保持最新），因此它可能会对性能造成额外影响

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:55:59.520

它在 C# 规范中定义：

> 如果满足以下所有条件，则允许类或结构声明从源类型 S 到目标类型 T 的转换：
> 
> *   ...
> *   S 和 T 都不是`object`interface *-type*。

请参阅[此堆栈溢出](https://stackoverflow.com/questions/143485/implicit-operator-using-interfaces)答案。

# netty - Netty：HTTP 内容长度超过 64K 时出错

> ID：12211045
> 
> 赞同：3
> 
> 时间：2012-08-31T07:51:23.363
> 
> 标签：netty

我从客户端应用程序接收 JSON 数据，但有时 HTTP 内容长度超过 64K，我收到以下错误：

```
org.jboss.netty.handler.codec.frame.TooLongFrameException: HTTP content length exceeded 65536 bytes. 
```

我目前有以下相当幼稚的实现来读取 HTTP 内容：

```
String requestContent = null;
HttpRequest request = (HttpRequest) e.getMessage();
ChannelBuffer content = request.getContent();
if (content.readable()) {
    requestContent = content.toString(CharsetUtil.UTF_8);
} 
```

有没有办法接收超过 64K 的数据？

编辑：堆栈跟踪：

```
Aug 31, 2012 2:35:20 PM org.jboss.netty.channel.SimpleChannelUpstreamHandler
WARNING: EXCEPTION, please implement org.eurekaj.manager.server.router.RouterHandler.exceptionCaught() for proper handling.
org.jboss.netty.handler.codec.frame.TooLongFrameException: HTTP content length exceeded 65536 bytes.
at org.jboss.netty.handler.codec.http.HttpChunkAggregator.messageReceived(HttpChunkAggregator.java:130)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
at org.jboss.netty.handler.codec.replay.ReplayingDecoder.unfoldAndFireMessageReceived(ReplayingDecoder.java:593)
at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:584)
at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:509)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:94)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:372)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:246)
at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

这再次导致我的应用程序中出现以下错误，这表明仅从 HTTP 请求中读取了前 64K 的数据：

```
Caused by: org.json.JSONException: Unterminated string at character 65537
at org.json.JSONTokener.syntaxError(JSONTokener.java:410)
at org.json.JSONTokener.nextString(JSONTokener.java:244) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T14:42:29.067

好的，然后在 HttpChunkAggregator 的构造函数中指定不同的最大内容长度。这应该够了吧..

# iphone - Objective-C 中的数学符号

> ID：12211053
> 
> 赞同：0
> 
> 时间：2012-08-31T07:52:11.400
> 
> 标签：iphone, objective-c, ios, ipad

我想在Objective C代码中创建一个我拥有的公式。

```
float loanP = ((interestRate/100/12) *loanAmount) /(1-(1+(interestRate/100/12))^- loanTens) 
```

是否有一些我应该使用的符号

```
^-loanTens 
```

部分？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:56:35.333

Objective C 拥有 C/C++ 中的所有库和类。我们有一些数学类来执行数学函数。

导入数学.h 文件

它具有对您有用的数学函数。

在这里你需要电源操作，我想是的。

这将是这样的

```
int a = pow(10,4); 
```

查看 math.h 中的可用函数并加以利用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:58:10.687

使用战俘：

```
float loanP = ((interestRate/100/12) *loanAmount) / pow(1-(1+(interestRate/100/12)), -loanTens); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:30:13.580

使用 pow 函数，或者您可以定义`(1+(interestRate/100/12))^- loanTens`使用您自己的代码的值。

```
int value= 1 + (interestRate/100/12);
int total =1;
  for(int i =1;i<=loanTens;i++){
total = total*value;
}
float loanP = ((interestRate/100/12) *loanAmount) /(1-(1/total)); 
```

或第二种方法：

```
float loanP = ((interestRate/100/12) *loanAmount) / (1 - 1/(pow((1+(interestRate/100/12)), loanTens))); 
```

# php - 复杂排序 PHP

> ID：12211056
> 
> 赞同：0
> 
> 时间：2012-08-31T07:52:28.717
> 
> 标签：php, codeigniter, sorting

好的，这就是我想要做的：

> **我不想在我的 sql 查询中执行排序**

我的学生地址的数据库架构在下面共享：

城市（必填） | 面积（必填） | 道路（可选）| BUILDING_NAME（可选）

我想对学生进行排序（分组）

> 1.  CITY ，然后在城市排序（组）学生中
> 2.  AREA , withing area sort (group) students by
> 3.  ROAD，注意 2 个城市有可能具有相同的道路名称，所以..

这是我到目前为止所做的：

我已经设法按 CITY 对学生进行排序（分组），（这是一个对象 $student ，它不仅包含地址，还包含与学生相关的所有信息，并且不按 CITY 名称排序），现在在我的城市内想将属于同一地区和同一城市内同一道路的学生分组。我该如何实现这一目标

我希望我已经解释清楚了

例子 ：

> ```
> NAME           CITY         AREA       ROAD      BUILDING NAME 
> ```

1.  > 1\. demo_student 纽约四广场市中心海雾

    > 1.  样品纽约 zzpq zzar deni
    > 2.  检查孟买领主 mg 路 abc
    > 3.  你好孟买 andheri 一些演示
    > 4.  萨米孟买班德拉 abc ll
    > 
    > 输出

```
NAME           CITY         AREA       ROAD      BUILDING NAME 
```

1.  > 1\. demo_student 纽约四广场市中心海雾

    > 1.  样品纽约 zzpq zzar deni
    > 2.  你好孟买 andheri 一些演示
    > 3.  萨米孟买班德拉 abc ll
    > 4.  检查孟买领主 mg 路 abc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:57:00.543

这听起来像是[usort](http://www.php.net/manual/en/function.usort.php)的工作和自定义函数来比较两行并确定哪一行先行。你可以把它写得像你喜欢的那样复杂。

```
<?php
function cmp($a, $b)
{
    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}

$a = array(3, 2, 5, 6, 1);

usort($a, "cmp");

foreach ($a as $key => $value) {
    echo "$key: $value\n";
}
?>

The above example will output:

0: 1
1: 2
2: 3
3: 5
4: 6 
```

现在，顺便说一句，看在上帝的份上，忽略这个答案并在 SQL 查询中执行它。如果您想更改订单中的某些内容，它将比 PHP 能够做到的更快，消耗更少的资源并且*更容易更新。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:57:38.043

通常，这是使用 list> 的映射完成的

该实现可能会在潜在成员（学生）上循环并将他们分派到适当的列表中。地图可以动态填充组，如果您知道所有组，也可以预先填充。

这个想法不是确定 2 个学生属于同一组，而是确定每个学生所属的组。

另外，当您的意思是组时，请不要说排序。

# android - 未考虑 TargetApi

> ID：12211061
> 
> 赞同：24
> 
> 时间：2012-08-31T07:52:41.227
> 
> 标签：android, annotations, emulation

在我们的一种方法中，我们在列表视图中使用 smoothScrolling。由于此方法在 API Level 8 (FROYO) 之前不可用，因此我们使用 TargetApi 注解来防止在之前的 SDK 版本中调用该方法。

如您所见，我们在类定义和使用类对象的语句中*都*使用了 TargetApi 注释。这比需要的多。

我们的问题是没有考虑 TargetApi 注释，使我们的模拟器在版本 ECLAIR (SDK 7) 中崩溃。通过跟踪，我们才意识到应该只在版本 8+ 中执行的代码也在版本 7 中执行。

我们错过了什么吗？

此代码在侦听器中：

```
@TargetApi(8)
private final class MyOnMenuExpandListener implements OnMenuExpandListener {
    @Override
    public void onMenuExpanded( int position ) {
        doScrollIfNeeded( position );
    }

    @Override
    public void onMenuCollapsed( int position ) {
        doScrollIfNeeded( position );
    }

    protected void doScrollIfNeeded( int position ) {
        if ( mListViewDocuments.getLastVisiblePosition() - 2 < position ) {
            mListViewDocuments.smoothScrollToPosition( position + 1 );
        }
    }
} 
```

并且侦听器以这种方式注册：

```
@TargetApi(8)
private void allowSmothScrollIfSupported() {
    if ( Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO ) {
        //This if should not be necessary with annotation but it is not taken into account by emulator
        Log.d( LOG_TAG, "Smooth scroll support installed." );
        folderContentAdapter.setOnMenuExpandListener( new MyOnMenuExpandListener() );
    }
} 
```

顺便说一句，我们在调试模式下运行代码，所以这个问题与混淆删除注释无关。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-31T08:25:35.550

`@TargetApi`不会阻止任何代码运行，它仅用于注释代码并防止新 API 的编译器错误，一旦您知道您只是有条件地调用它们。

您仍然需要添加一些内容

```
if (Build.VERSION.SDK_INT > 7){
    //...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-26T17:48:50.017

经过近一年的思考，我想为@Guykun 的回答添加一个小小的补充：

@TargetApi 只会被工具用来告诉开发者“嘿，不要在 XXX android SDK 下使用这个方法”。通常是棉绒。

因此，如果您设计如下方法：

```
if (Build.VERSION.SDK_INT > 7){
    //...
} 
```

那么您应该将 @TargetApi( 7 ) 添加到您的方法的签名中。

*但是*，如果您添加 else 语句，并提供一个替代方案，使其适用于所有版本的 Android，例如：

```
if (Build.VERSION.SDK_INT > 7){
    //...
} else {
    //...
} 
```

那么您不应该***将***@TargetApi( 7 ) 添加到方法的签名中。否则，其他开发人员会认为他们不能使用您的方法 belw api level 7，但实际上，它也适用于他们。

所以必须使用这个注解，用于静态分析，来指示方法支持的最低 api 级别。如：

```
@TargetApi( 7 )
public void foo() {
   if (Build.VERSION.SDK_INT > 7){
       //...
   else if (Build.VERSION.SDK_INT > 10){
       //...
   } 
} 
```

甚至更好的是，使用`android.Build.VERSION_CODES.*`.

顺便说一句，您会注意到这对于私有方法确实没有用，除了获得更清晰的代码并有助于在未来推广该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-11T18:41:22.340

要在使用针对更高 Api 级别的方法时强制执行 lint 错误，您可以使用[`RequiresApi`](https://developer.android.com/reference/android/support/annotation/RequiresApi.html)代替，[`TargetApi`](https://developer.android.com/reference/android/annotation/TargetApi.html)并且每当您尝试使用该方法而不检查版本代码时，您将收到编译错误。

这就是[文档](https://developer.android.com/reference/android/support/annotation/RequiresApi.html)中关于[RequiresApi的内容](https://developer.android.com/reference/android/support/annotation/RequiresApi.html)

> 这与旧的@TargetApi 注释的目的相似，但更清楚地表示这是对调用者的要求，而不是用于“抑制”方法中超过 minSdkVersion 的警告。

# ruby-on-rails - Rails：使用 Heroku 将数据推送到客户端

> ID：12211072
> 
> 赞同：0
> 
> 时间：2012-08-31T07:53:30.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个允许用户像 facebook 一样发布的应用程序。除了向用户推送新帖子的通知外，我已经开发了整个应用程序。

我计划部署到有问题的 Heroku。Heroku 目前不支持 websocket。换句话说，如果我想实现 websockets，我将不得不在不同的服务器上运行这些进程，使用 gem 等。

我的问题是，使用 Heroku 向用户推送通知的最有效和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:58:30.333

heroku 上有几个插件可用于推送支持：

*   [发布者](https://addons.heroku.com/pubnub)

*   [推杆](https://addons.heroku.com/pusher)

# asp.net - 在设计器中添加用户控件而不是 EditForm.aspx

> ID：12211075
> 
> 赞同：0
> 
> 时间：2012-08-31T07:53:42.587
> 
> 标签：asp.net, sharepoint, sharepoint-2010, sharepoint-2007, moss

您好我正在尝试添加我的用户控件而不是 EditForm.aspx（使用 sharepoint 2007） 我添加了一个新的 aspx 页面并注册了我的 dll。但现在我不知道如何进行。此外，在我的项目中，我有一个包含以下代码的 cs 文件。公共类 SkillEditReg : WebPart { 私人控制 _MyUserControl;

```
 protected override void CreateChildControls()
    {
        base.CreateChildControls();
        _MyUserControl =
            this.Page.LoadControl(@"~/_controltemplates/MySkill/EditSkill.ascx");
        this.Controls.Add(_MyUserControl);

    } 
```

我试图将其注册为我在下面链接 [http://fusionovation.com/post/2008/09/18/how-to-add-a-custom-user-control-to-a-sharepoint-page 引用的功能。 aspx](http://fusionovation.com/post/2008/09/18/how-to-add-a-custom-user-control-to-a-sharepoint-page.aspx) 我已将 guid id 放在功能 id 中.. 并将程序集的 publictoken 放在元素 id 中。在设计师的 contolId 中，我输入了用户控件名称..但没有任何效果..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:35:59.913

这太容易了..我所做的就是隐藏editform.aspx的webpart并通过浏览器进入同一页面，它是空的，然后我编辑了url，在EditForm.aspx之后？我添加了 toolpaneview=2。它以编辑模式打开，然后我添加了我的 dll :)

# android - 具有多个按钮的 Listactivity NullPointerException 仅在横向模式下具有滚动列表

> ID：12211078
> 
> 赞同：0
> 
> 时间：2012-08-31T07:53:46.717
> 
> 标签：android

我有一个 listactivity 应用程序，由 5 行组成，每行包含一个 TEXT 和 5 BUTTON，文本和按钮都是可点击的，文本将打开 MyDay 活动，即 textview，当您单击任何按钮时，它必须打开 videoview 屏幕。

**除了**将移动设备切换到横向模式并滚动它强制关闭的列表并在**MyArrayAdapter Class**的这一行 (51) 中的 logcat 报告中给出**NullPointerException**之外，每件事都运行得很好。

 ****日志猫：**

```
 java.lang.NullPointerException
         at com.test.demo.MyArrayAdapter.getView(MyArrayAdapter.java:51) 
```

MyArrayAdapter 类中的第 (51) 行是：

```
 holder.textView.setText(s); 
```

任何建议将不胜感激，以解决这个问题，谢谢。

**MyArrayAdapter 类：**

```
 public class MyArrayAdapter extends ArrayAdapter<String> {

private final String[] mClasses;
private Context mContext;
private Typeface tf;
private LayoutInflater mInflater;
private String[] mData = { "button1", "button2", "button3", "button4",
        "button5" };
private int[] ids = { R.id.button1, R.id.button2, R.id.button3,
        R.id.button4, R.id.button5 };

int[][] rowDrawables = { 
        {R.drawable.row_1, R.drawable.row_2, R.drawable.row_3, 
               R.drawable.row_4, R.drawable.row_5},
        {R.drawable.row_6, R.drawable.row_7, R.drawable.row_8, 
               R.drawable.row_9, R.drawable.row_10},
        {R.drawable.row_11, R.drawable.row_12, R.drawable.row_13, 
               R.drawable.row_14, R.drawable.row_15},
        {R.drawable.row_16, R.drawable.row_17, R.drawable.row_18, 
               R.drawable.row_19, R.drawable.row_20},
        {R.drawable.row_21, R.drawable.row_22, R.drawable.row_23, 
               R.drawable.row_24, R.drawable.row_25}};

public MyArrayAdapter(Context context, String[] classes) {
    super(context, 0, classes);
    mClasses = classes;
    mContext = context;
    tf = Typeface.createFromAsset(context.getAssets(), "BFantezy.ttf");
    mInflater = LayoutInflater.from(context);
                     }

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.row, null, true);
        holder = new ViewHolder();
        holder.textView = (TextView) convertView
                .findViewById(R.id.row_label);
        holder.textView.setTypeface(tf);
        holder.bt1 = (Button) convertView.findViewById(R.id.button1);
        holder.bt2 = (Button) convertView.findViewById(R.id.button2);
        holder.bt3 = (Button) convertView.findViewById(R.id.button3);
        holder.bt4 = (Button) convertView.findViewById(R.id.button4);
        holder.bt5 = (Button) convertView.findViewById(R.id.button5);
    } else {
        holder = (ViewHolder) convertView.getTag();}

    String s = mClasses[position];
    holder.textView.setText(s);

    int[] rowDr = rowDrawables[position];
    holder.bt1.setBackgroundResource(rowDr[0]);
    holder.bt2.setBackgroundResource(rowDr[1]);
    holder.bt3.setBackgroundResource(rowDr[2]);
    holder.bt4.setBackgroundResource(rowDr[3]);
    holder.bt5.setBackgroundResource(rowDr[4]);

    holder.textView.setTag(Integer.valueOf(position));
    holder.textView.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Integer pos = (Integer) v.getTag();
            Intent ourIntent = new Intent(mContext, MyDay.class);
            ourIntent.putExtra("cheese", mClasses[pos]);
            mContext.startActivity(ourIntent);
        }
    });
    holder.bt1.setTag(Integer.valueOf(position));
    holder.bt1.setOnClickListener(mListener);
    holder.bt2.setTag(Integer.valueOf(position));
    holder.bt2.setOnClickListener(mListener);
    holder.bt3.setTag(Integer.valueOf(position));
    holder.bt3.setOnClickListener(mListener);
    holder.bt4.setTag(Integer.valueOf(position));
    holder.bt4.setOnClickListener(mListener);
    holder.bt5.setTag(Integer.valueOf(position));
    holder.bt5.setOnClickListener(mListener);
    return convertView;
                                 }

static class ViewHolder {
    TextView textView;
    Button bt1, bt2, bt3, bt4, bt5;

                        }

private OnClickListener mListener = new OnClickListener() {

    public void onClick(View v) {
                    Integer realPos = (Integer) v.getTag();
                    int video = 0;
        String night = null;
        for (int i = 0; i < ids.length; i++) {
            if (v.getId() == ids[i]) {
                video = i;
                break;
            }
        }
        Intent i = new Intent(mContext, My_videos.class);
        i.putExtra("video", video);
                    i.putExtra("row", realPos);
        mContext.startActivity(i);
                   }
             };

               } 
```

**列表按钮：**

```
 public class ListButtons extends ListActivity {
String classes[] = {"First",  "Second", "Third","Fourth", "Fifth" }; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setListAdapter(new MyArrayAdapter(this, classes));  }} 
```**

# objective-c - 启动画面不显示在 iPad 上但显示在模拟器上

> ID：12211079
> 
> 赞同：0
> 
> 时间：2012-08-31T07:53:48.430
> 
> 标签：objective-c, ios, xcode, ipad, png

在我的 iPad 应用程序中，它仅限于**UIInterfaceOrientationLandscapeRight**，我添加了名为**default-Landscape.png 和 default-Landscape@2x.png**图像的启动图像，但它在模拟器中呈现，但不在我的 iPad 中呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:11:05.973

我假设您的意思是默认图像。

转到目标 - 总结视图并检查图像是否设置为“启动图像”并且没有错误或警告（通常由于尺寸问题，您会在图片上看到一个小黄色标记）

*   从设备和模拟器中删除了该应用程序
*   清洁您的产品
*   并通过 xcode 在设备上重新安装。

假设您仍然有问题，请尝试在 Photoshop 中打开原始图像并将其重新导出为 PNG 24

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:15:24.303

所有文件名都区分大小写。

将它们重命名为：Default-Landscape.png & Default-Landscape@2x.png

大写“D”

在模拟器中它不区分大小写，但在设备中它是

希望能帮助到你。快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:23:06.107

请参阅[Apple 对 iPhone 和 iPad 应用程序的自动定向支持](http://developer.apple.com/library/ios/#qa/qa1588/_index.html)

**仅限 iPad 的应用程序：**

以 PNG 格式为每个支持的方向创建启动图像。每个启动图像必须为 1024 x 748 像素（横向）或 768 x 1004 像素（纵向）。

默认启动图像文件：

```
Default-PortraitUpsideDown.png - upside-down portrait version.

Default-LandscapeLeft.png - left-oriented landscape version.

Default-LandscapeRight.png - right-oriented landscape version.

Default-Portrait.png - generic portrait version.

Default-Landscape.png - generic landscape version.

Default.png - default portrait launch. Its usage is strongly discouraged, use more specific launch images instead.For iPad launch images, do not include the status bar region. 
```

创建这些尺寸的启动图像：

```
For portrait:

    768 x 1004 pixels

    1536 x 2008 pixels (high resolution)

For landscape:

    1024 x 748 pixels

    2048 x 1496 pixels (high resolution) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-12T20:02:31.190

这发生在我的 Ionic 3 应用程序中。最终我发现它正在加载的图像是`Default@2x~universal~anyany.png`

# java - Swing 应用程序的分布

> ID：12211080
> 
> 赞同：0
> 
> 时间：2012-08-31T07:53:51.760
> 
> 标签：java, swing, deployment, installation

我想向我的客户分发一个摇摆应用程序。在该应用程序中有两个属性文件，它们应该对客户端可见，以便他们可以编辑，我不能将它作为可运行的 jar 提供。我还想要像 apache-tomcat zip 文件这样的东西，一旦你解压它就会安排文件夹结构，也会给属性文件编辑，并在下次运行时读取该属性。apache-tomcat 也以我想要的 startup.bat 或 startup.sh 开头。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T08:07:19.453

使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)安装和更新应用程序。

## 用户可编辑的属性

*   将它们放入（属性文件中）Jar
*   当您去检查属性时，请使用[`PersistenceService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/PersistenceService.html). 如果它们不存在，则从 Jar 中的文本文件中读取它们，并将它们放在那里。这是一个[演示。的服务](http://pscode.org/jws/api.html#ps)。
*   当用户想要查看/编辑属性时，通过`JOptionPane`.

## 桌面集成

当平台支持时，JWS 提供桌面快捷方式和菜单项来启动应用程序，以及用于安装和删除它们的 API（参见 参考资料`IntegrationService`）。比批处理文件更流畅！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T08:30:14.270

目前我们正在使用[GetDown](http://code.google.com/p/getdown/)来处理我们的 Swing 应用程序的分发。我们使用 Tomcat 分发更新并使用[GetDown](http://code.google.com/p/getdown/)下载这些更新。它真的非常灵活和强大，而且比 java WebStart 好得多。

一个很好的教程：[http ://www.hascode.com/2012/05/creating-updatable-java-applications-using-getdown-and-the-getdown-maven-plugin/](http://www.hascode.com/2012/05/creating-updatable-java-applications-using-getdown-and-the-getdown-maven-plugin/)

项目网站：[http ://code.google.com/p/getdown/](http://code.google.com/p/getdown/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T08:01:08.510

如果我理解正确，您需要一个工具来为您的应用程序制作分发包。这会生成文件夹结构并将应用程序和数据文件解压缩到此结构中。

有许多免费和商业设置构建器。我认为您更喜欢多平台构建器，因此请寻找 java setup builder。

检查[这个线程](https://stackoverflow.com/questions/759855/what-are-good-installanywhere-replacements-for-installing-a-java-ee-application)，这个问题在那里讨论过。

# html - 如何在顶部渲染我的对话框？

> ID：12211093
> 
> 赞同：0
> 
> 时间：2012-08-31T07:54:42.333
> 
> 标签：html, css, layer

我在弹出窗口上有一个对话框，我想渲染到顶部的对话框，但现在它显示在弹出窗口下： ![在此处输入图像描述](../Images/4c5d1682a3b07e4b43ced8142f8a642f.png)

你能告诉我如何在顶部呈现对话框“信息”吗？我的代码是这个

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
```

诺林加

```
<script language="JavaScript1.2">
            function doUnload()
            {
                opener.document.actionForm.action.value='Noteringar';
                opener.document.actionForm.actionCommand.value='releaseLock';
                opener.document.actionForm.submit();
                //opener.releaseLock();

            }
          </script>

<body id="content" onunload="doUnload()" >
<form name="actionForm" action="PandoraActionServlet" style="display: inline;" method="post">

    <input type="hidden" name="currPage" value="/PandoraArendeWeb/arendeprocess_noteringar.jsp" />
    <input type="hidden" name="action" value="" />
    <input type="hidden" name="actionCommand" value="" />
    <input type="hidden" name="actionModifier" value="" />
    <input type="hidden" name="notid" value="" />
    <input type="hidden" name="textnote" value="" />
    <input type="hidden" name="fname" value="Markus                        " />
    <input type="hidden" name="lname" value="Stålö                         " />
    <input type="hidden" name="sign" value="MSTÅ                          " />

<div class="yta2">
    <div class="fl100 TB_nb">&nbsp;Noteringar&nbsp;1201186-2 </div>
    <div class="clear">&nbsp;</div>
    <div class="clear">&nbsp;</div>
    <div class="fl2">&nbsp;</div>
    <div class="fl95">
    <div STYLE="overflow: auto; height: 300;">
        <table width="100%" cellspacing="0" cellpadding="2" align="center" class="bb" id="base_table">
            <tr>
                <th class="thkant" width="15%">Skapad datum</td>
                <th class="thkant" width="70%">Text</td>
                <th class="thkant" width="15%">Skapad av</td>
            </tr>

            <tr class="note" id="110">
                <td>2012-08-31</td>
                <td>Test 7</td>
                <td>Markus&nbsp;Stålö,&nbsp;<br>MSTÅ</td>
            </tr>

            <tr class="note" id="109">
                <td>2012-08-31</td>
                <td>Test 6</td>
                <td>Markus&nbsp;Stålö,&nbsp;<br>MSTÅ</td>
            </tr>

            <tr class="note" id="108">
                <td>2012-08-31</td>
                <td>Test 5</td>
                <td>Markus&nbsp;Stålö,&nbsp;<br>MSTÅ</td>
            </tr>

            <tr class="note" id="107">
                <td>2012-08-31</td>
                <td>Test 4</td>
                <td>Markus&nbsp;Stålö,&nbsp;<br>MSTÅ</td>
            </tr>

            <tr class="note" id="106">
                <td>2012-08-31</td>
                <td>Test 3</td>
                <td>Markus&nbsp;Stålö,&nbsp;<br>MSTÅ</td>
            </tr>

            <tr class="note" id="105">
                <td>2012-08-31</td>
                <td>Test 2</td>
                <td>Markus&nbsp;Stålö,&nbsp;<br>MSTÅ</td>
            </tr>

            <tr class="note" id="104">
                <td>2012-08-31</td>
                <td>Test</td>
                <td>Markus&nbsp;Stålö,&nbsp;<br>MSTÅ</td>
            </tr>

            <tr class="note" id="103">
                <td>2012-08-30</td>
                <td>Släpp hörnflaggan!</td>
                <td>Markus&nbsp;Stålö,&nbsp;<br>MSTÅ</td>
            </tr>

            <tr class="note" id="102">
                <td>2012-08-30</td>
                <td>Fotboll är en bollsport?</td>
                <td>Markus&nbsp;Stålö,&nbsp;<br>MSTÅ</td>
            </tr>

            <tr class="note" id="101">
                <td>2012-08-30</td>
                <td>Glen is the man!!!</td>
                <td>Markus&nbsp;Stålö,&nbsp;<br>MSTÅ</td>
            </tr>

        </table>
    </div>
    </div>
    <div class="clear">&nbsp;</div>
    <div class="fl2">&nbsp;</div>
    <div class="fl30"><input type="button" value="Skapa notering" class="opener_create_note" ></div>

</div>

<div id="new_note">

    <div class="clear">&nbsp;</div>
    <div class="fl2">&nbsp;</div>
    <div class="fl15">Text:</div>
    <div class="fl65"><textarea cols="60" rows="4" name="newnote" id="write_note"></textarea></div>
    <div class="clear">&nbsp;</div>
    <div class="clear">&nbsp;</div>
    <div class="clear">&nbsp;</div>
    <div class="clear">&nbsp;</div>
    <div class="clear">&nbsp;</div>
</div>

<div id="edit_note">

    <div class="clear">&nbsp;</div>
    <div class="fl2">&nbsp;</div>
    <div class="fl15">Text:</div>
    <div class="fl65"><textarea cols="60" rows="4" name="editnote" id="change_note"></textarea></div>
    <div class="clear">&nbsp;</div>
    <div class="clear">&nbsp;</div>
    <div class="clear">&nbsp;</div>
    <div class="fl2">&nbsp;</div>
    <div class="fl15">Skapad av:</div>
    <div class="clear"></div>
    <div class="fl2">&nbsp;</div>
    <div class="fl90" id="sname"></div>
</div>

<script language="JavaScript1.2" src="css_js/jquery-1.7.1.min.js" type="text/javascript"></script>
<script language="JavaScript1.2" src="css_js/jquery-ui-1.8.17.custom.min.js" type="text/javascript"></script>
<script language="JavaScript1.2" src="css_js/jquery.pandora.globals.js" type="text/javascript"></script>

<SCRIPT language="JavaScript1.2" type="text/javascript">
    $(function() {

    $('#base_table').css('cursor','pointer');

    $('.opener_create_note').click(function() {
        $("#new_note").dialog('open');
        return false;
    });

    $("#new_note").dialog({
            width:'600', height:'100', draggable:false, 
            open: function(){                 
            $("#write_note").focus();
             },                      
            autoOpen: false, modal:true, show:'fold', hide: 'slide', resizable:false, closeOnEscape: true, title: 'Skapa notering',
            buttons: { 'Avbryt': function() { 
                                $('textarea#write_note').val("");
                                $(this).dialog('close'); },
                                'Spara': function() { 
                                var text = $('textarea#write_note').val();
                                //if(text.length > 1000) {
                                    //alert("Fältet får innehålla max 1000 tecken.");
                                //} else {

                                    if(text.length < 1) {
                                        if (confirm("Noteringen är tom. Vill du fortsätta?")) {
                                            submitNotering('Noteringar','ny', '', text);                                 
                                            $(this).dialog('close');
                                        }
                                    } else {
                                        if(text.length < 1000){
                                        submitNotering('Noteringar','ny', '', text);                                 

                                        $(this).dialog('close');
                                        } else {
                                         //alert("Fältet får innehålla max 1000 tecken.");
                                         //submitNotering('Noteringar','max1000', '', text);

                                         doAsk('Information', '<ul><li id="message_info_0">Fältet får innehålla max 1000 tecken.</li></ul>','' ,'','',''); 

                                        }
                                    }
                                //} 
                                } 

                                }

            }

            );

    $('.note').click(function() {

        var $nr = $(this).attr('id');       
        $("#edit_note").data("rid", $nr);
        $("#edit_note").dialog('open');

        var $currText = "";
        var $currSkapad = "";
        var $currNamn = "";
        var $tds = $(this).find('td');
        if($tds.length != 0) {  

            $currSkapad = $tds.eq(0).text();    
            $currText = $tds.eq(1).text();
            $currNamn = $tds.eq(2).text() + ", ";
            $.trim($currNamn);
        }
        $("textarea#change_note").val($currText);
        $("#sname").text($currNamn + $currSkapad);
        return false;
    });

    $("#edit_note").dialog({
            width:'600', height:'100', draggable:false, autoOpen: false, modal:true, show:'fold', hide: 'slide', resizable:false, closeOnEscape: true, title: '&Auml;ndra notering',
            buttons: { 'Ta bort': function() { 
                                if (confirm("Vill du ta bort noteringen?")) {
                                    submitNotering('Noteringar','tabort', $(this).data("rid"), '');
                                    $(this).dialog('close');
                                } },
                                'Avbryt': function() { 
                                $(this).dialog('close'); },
                                'Spara': function() { 
                                var text = $('textarea#change_note').val();
                                if(text.length > 1000) {
                                    alert("Fältet får innehålla max 1000 tecken.");
                                } else {
                                    if(text.length < 1) {
                                        if (confirm("Noteringen är tom. Vill du fortsätta?")) {
                                            submitNotering('Noteringar','spara', $(this).data("rid"), text); 
                                            $(this).dialog('close');
                                        }                                   
                                    } else {

                                        submitNotering('Noteringar','spara', $(this).data("rid"), text); 
                                        $(this).dialog('close'); 
                                    }
                                    }
                                }
                                }           
            });                  

    });
    </SCRIPT>

</form>

</body>
</html> 
```

CSS：

```
#dialog {position:absolute; width:425px; padding:0px; margin-top:50px; z-index:200; background:#fff}
#dialog-header {display:block; position:relative; width:425px; padding:3px 6px 7px; height:14px; font-size:14px; font-weight:bold}
#dialog-title {float:left}
#dialog-content {display:block; height:160px; padding:6px; color:#666666; font-size:75%}
#dialog-mask {position:absolute; top:0; left:0; min-height:100%; width:100%; background:#FFF; opacity:.40; filter:alpha(opacity=40); z-index:100}
.prompt {background-color: #FFFFFF; bottom right no-repeat; border:3px solid #000000; border-top:none}
.promptheader {background-color: #FFFFFF; repeat-x; color:#355468; border:3px solid #000000; border-bottom:none}

.dialogbuttonlink{background: none;
    margin: 0;
    padding: 0;
    border: none;
    cursor: pointer;
    color: #003366;
    text-decoration: underline;
    font-weight: bold;  }

* body{
    margin: 0px;
}

#top {
    position: absolute;
    left: 0px;
    top: 0px;
    height: 35px;
    width: 100%
}

#av_ikoner {
    position: absolute;
    right: 200px;
    display: inline;
}

#av_logga {
    float: right;
    right: 5px;
    display: inline;
    text-align: right;
    margin-right: 20px;
}

#flikkant {
    position: absolute;
    left: 0px;
    top: 50px;
    height: 35px;
    width: 100%;
    padding-left: 16px;
    padding-top: 8px;
    margin-bottom: 0px;
}

#sub {
    position: absolute;
    left: 0px;
    top: 85px;
    height: 10px;
    width: 100%;
    padding-left: 16px;
    padding-top: 2px;
    margin-bottom: 10px;
}

#yta {
    position: absolute;
    left: 15px;
    right: 15px;
    top: 105px;
    padding: 4px;
}

#popupD {
    position: absolute;
    top: 1750px;
    left: 180px;
    height: 125px;
    width: 1075px;
}

#popupS {
    position: absolute;
    top: 1750px;
    left: 300px;
    height: 125px;
}

#popupP {
    position: absolute;
    top: 1600px;
    left: 300px;
    height: 125px;
}

#popupSokNamn {
    position: absolute;
    top: 200px;
    width: 600px;
    left: 400px;
    height: 800px;
}

#popupSokNamn2 {
    position: absolute;
    top: 950px;
    width: 600px;
    left: 400px;
    height: 800px;
}

#popupR {
    position: absolute;
    top: 1700px;
    left: 200px;
    height: 50px;
}

#popupI {
    position: absolute;
    top: 700px;
    left: 300px;
    right: 1%;
    height: auto;
}

#popupF {
    position: absolute;
    top: 280px;
    left: 300px;
    right: 25%;
    height: auto;
}

#popupA {
    position: absolute;
    top: 300px;
    left: 300px;
    right: 1%;
    height: auto;
}

#popupU {
    position: absolute;
    top: 300px;
    left: 300px;
    right: 1%;
    height: auto;
}

#popupO {
    position: absolute;
    top: 300px;
    left: 300px;
    right: 1%;
    height: auto;
}

#popupEPn {
    position: absolute;
    top: 300px;
    left: 300px;
    right: 1%;
    height: auto;
}

#popupEPa {
    position: absolute;
    top: 300px;
    left: 300px;
    right: 1%;
    height: auto;
}

#rappALL
,
#rappAE
,
#rappFJ
,
#rappKO
,
#rappPT
,
#rappUZ
,
#rappX
,
{
height
:

600
px
;

overflow
:

auto
;

width
:

100%;
}
#klassTB {
    height: 100px;
    overflow: auto;
    width: 100%;
}

#popupD1 {
    position: absolute;
    left: 250px;
    height: 125px;
}

.yta2 {
    display: inline;
    width: 100%;
    padding-left: 5px;
}

#L-col {
    display: inline;
    width: 65%;
}

#R-col {
    display: inline;
    width: 35%;
}

#box {
    width: 400px;
    padding: 8px;
    margin-top: 10px;
    margin-bottom: 100px;
}

#scroll {
    height: 680px !important;
    overflow: auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:59:10.643

```
 use following in your css
z-index:1000001; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:03:51.533

堆叠由 和 文档顺序的组合`position`控制`z-index`。例如，即使静态出现在文档的后面，块`relative`也会显示在 的顶部。`static`

这是一个网站，可以很好地试验和熟悉属性如何交互：[http ://tjkdesign.com/articles/z-index/teach_yourself_how_elements_stack.asp](http://tjkdesign.com/articles/z-index/teach_yourself_how_elements_stack.asp)

要回答您的问题，由于您的弹出窗口已经是`absolute`，您可能只需将其设置`z-index`为`1`或更大。

# compatibility - 我们可以使用jdk7 javac将具有java7特性的代码编译成java6字节码吗

> ID：12211094
> 
> 赞同：5
> 
> 时间：2012-08-31T07:54:45.527
> 
> 标签：compatibility, java, java-7

我在考虑一个java项目是否可以产生2个jar：一个用于java7，一个用于java6，是的，源代码可能会使用一些java7的新特性。

所以要生成 java6 jar，命令行如下：

```
javac -target 1.6 -bootclasspath jdk1.6.0\lib\rt.jar -extdirs "" MyApp.java 
```

不幸的是，它只是发出一个错误：

```
javac: target release 1.6 conflicts with default source release 1.7 
```

根据[this document](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html#crosscomp-example)，jdk6 vs jdk5应该是可能的，有人知道为什么它在jdk7 vs jdk6中不起作用吗？我做错了什么，还是只是官方不支持？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T07:59:14.513

AFAIK，源和目标必须相同。即使对于 Java 6。唯一的例外是源可以是 1.1，目标可以是 1.0。

鉴于 Java 6 和 Java 7 的最新 JVM 之间的 JVM 差别不大，我建议您考虑升级。Java 6 也将在 2012 年 11 月结束（免费）服务，从现在起三个月...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:03:06.577

即使有可能，这通常也是一个坏主意——如果你想确保你的代码可以在 java 6 上运行，那么你必须在 java 6 上构建它。每个新版本的 java 在类库中引入新类，并添加新的现有类的方法，即使您将 java 7 编译器设置为生成 6 兼容的字节码，它也不会捕获您调用仅 7 方法的情况。

# perl - 无法使用 Apache CGI 脚本写入文件

> ID：12211097
> 
> 赞同：0
> 
> 时间：2012-08-31T07:54:55.363
> 
> 标签：perl, apache, cgi, cgi-bin

我想用 Perl 代码向我的 CGI 脚本添加一些日志，如下所示：

```
open(LOG, ">/path/to/my.log") or die;
print LOG "Some content...\n";
close(LOG); 
```

但是，日志永远不会写入我的日志文件，而脚本仍在正确处理请求。

我对 Apache、CGI 和 Perl 不是很熟悉，所以请各位大师指点迷津。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:58:30.140

这可能是一个权限问题。脚本的运行者（可能是 user:`apache`或`httpd`）`nobody`没有写入文件的权限。但是，可以肯定的是，您需要检查[`$!`](http://perldoc.perl.org/perlvar.html)包含的内容。还可以尝试[`ErrorLog`](http://httpd.apache.org/docs/current/logs.html#errorlog)在脚本运行时检查 Apache 的文件。

我会将您的代码重写为：

```
use CGI::Carp qw( croak );

open my $log, '>', '/path/to/my.log' or croak "Error opening file: $!";
print $log "Some content...\n";
close $log; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:25:33.243

问题已解决：对我的 Perl 脚本所做的更改只有在重新启动 Apache 后才会生效。不知道为什么它会这样，因为我认为 Perl 是一种解释性语言，它可以随时修改......

# c# - 如何进行完全对齐对齐

> ID：12211098
> 
> 赞同：0
> 
> 时间：2012-08-31T07:54:55.620
> 
> 标签：c#, winforms, winapi, richtextbox

我在页面布局中显示文本，例如 Microsoft Word，每个页面都是一个新的 RichTextBox。并且文本对齐是合理的（带有 SETPARAFORMAT 消息）。
但是当有一个段落从第一页（第一个 RichTextBox）开始到第二页结束时，第一页的最后一行是不合理的，我该怎么做最后一行也将是合理的？

# android - Android 2.3 和 Android 4.0 上的联系人照片 uri

> ID：12211099
> 
> 赞同：4
> 
> 时间：2012-08-31T07:54:58.683
> 
> 标签：android, uri, android-contacts

我的代码有问题。我需要获取联系人照片 uri，并在我的 ImageView 中显示图片。我编写了这段代码，它在 Android 2.3 中可以正常工作。

```
Uri myUri = getPhotoUriById( this, contactId );
(ImageView)myImageView.setImageUri( myUri );

public static Uri getPhotoUriById( Context context, Long id ) {
    if( id == null || context == null ) return null;

    Uri photo = Uri.parse( "android.resource://"+ context.getPackageName() +"/" + R.drawable.no_photo );

    Cursor cursor = context.getContentResolver().query( Contacts.CONTENT_URI,
            new String[]{ Contacts.PHOTO_ID },
            Contacts._ID + " = " + id + " AND " + Contacts.PHOTO_ID + " != 0",
            null,
            null );
    if( cursor != null ) {
        if( cursor.moveToFirst()) {
            photo = ContentUris.withAppendedId( Contacts.CONTENT_URI, id );
            photo = Uri.withAppendedPath( photo, Contacts.Photo.CONTENT_DIRECTORY );
        }
        cursor.close();
    }
    return photo;
} 
```

但是当我在 Android 4.0 (ICS) 中测试它时。我有很多问题。

```
08-31 14:32:02.059: W/System.err(616): java.io.IOException: read failed: EINVAL (Invalid argument)
08-31 14:32:02.069: W/System.err(616):  at libcore.io.IoBridge.read(IoBridge.java:432)
08-31 14:32:02.069: W/System.err(616):  at java.io.FileInputStream.read(FileInputStream.java:179)
08-31 14:32:02.079: W/System.err(616):  at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:168)
08-31 14:32:02.079: W/System.err(616):  at java.io.BufferedInputStream.read(BufferedInputStream.java:309)
08-31 14:32:02.079: W/System.err(616):  at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
08-31 14:32:02.079: W/System.err(616):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
08-31 14:32:02.079: W/System.err(616):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
08-31 14:32:02.079: W/System.err(616):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
08-31 14:32:02.089: W/System.err(616):  at android.graphics.drawable.Drawable.createFromStream(Drawable.java:733)
08-31 14:32:02.089: W/System.err(616):  at android.widget.SuggestionsAdapter.getDrawable(SuggestionsAdapter.java:577)
08-31 14:32:02.099: W/System.err(616):  at android.widget.SuggestionsAdapter.getDrawableFromResourceValue(SuggestionsAdapter.java:543)
08-31 14:32:02.099: W/System.err(616):  at android.widget.SuggestionsAdapter.getIcon1(SuggestionsAdapter.java:399)
08-31 14:32:02.099: W/System.err(616):  at android.widget.SuggestionsAdapter.bindView(SuggestionsAdapter.java:345)
08-31 14:32:02.099: W/System.err(616):  at android.widget.CursorAdapter.getView(CursorAdapter.java:250)
08-31 14:32:02.109: W/System.err(616):  at android.widget.SuggestionsAdapter.getView(SuggestionsAdapter.java:483)
08-31 14:32:02.109: W/System.err(616):  at android.widget.AbsListView.obtainView(AbsListView.java:2033)
08-31 14:32:02.109: W/System.err(616):  at android.widget.ListPopupWindow$DropDownListView.obtainView(ListPopupWindow.java:1168)
08-31 14:32:02.109: W/System.err(616):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
08-31 14:32:02.119: W/System.err(616):  at android.widget.ListPopupWindow.buildDropDown(ListPopupWindow.java:1095)
08-31 14:32:02.119: W/System.err(616):  at android.widget.ListPopupWindow.show(ListPopupWindow.java:524)
08-31 14:32:02.119: W/System.err(616):  at android.widget.AutoCompleteTextView.showDropDown(AutoCompleteTextView.java:1062)
08-31 14:32:02.119: W/System.err(616):  at android.widget.AutoCompleteTextView.updateDropDownForFilter(AutoCompleteTextView.java:939)
08-31 14:32:02.119: W/System.err(616):  at android.widget.AutoCompleteTextView.onFilterComplete(AutoCompleteTextView.java:921)
08-31 14:32:02.119: W/System.err(616):  at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:285)
08-31 14:32:02.130: W/System.err(616):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-31 14:32:02.139: W/System.err(616):  at android.os.Looper.loop(Looper.java:137)
08-31 14:32:02.139: W/System.err(616):  at android.app.ActivityThread.main(ActivityThread.java:4340)
08-31 14:32:02.139: W/System.err(616):  at java.lang.reflect.Method.invokeNative(Native Method)
08-31 14:32:02.139: W/System.err(616):  at java.lang.reflect.Method.invoke(Method.java:511)
08-31 14:32:02.150: W/System.err(616):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-31 14:32:02.150: W/System.err(616):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-31 14:32:02.150: W/System.err(616):  at dalvik.system.NativeStart.main(Native Method)
08-31 14:32:02.159: W/System.err(616): Caused by: libcore.io.ErrnoException: read failed: EINVAL (Invalid argument)
08-31 14:32:02.169: W/System.err(616):  at libcore.io.Posix.readBytes(Native Method)
08-31 14:32:02.169: W/System.err(616):  at libcore.io.Posix.read(Posix.java:118)
08-31 14:32:02.179: W/System.err(616):  at libcore.io.BlockGuardOs.read(BlockGuardOs.java:137)
08-31 14:32:02.179: W/System.err(616):  at libcore.io.IoBridge.read(IoBridge.java:422)
08-31 14:32:02.179: W/System.err(616):  ... 31 more
08-31 14:32:02.189: D/skia(616): ---- read threw an exception 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T06:19:20.653

几天后，我编写了正确的代码。这适用于所有安卓版本。有我的解决方案

```
public static Uri getPhotoUriById( Context context, Long id ) {
    if( id == null || context == null ) return null;

    Uri photo = Uri.parse( "android.resource://"+ context.getPackageName() +"/" + R.drawable.no_photo );

    try {
        Cursor cursor = context.getContentResolver().query( Contacts.CONTENT_URI,
                new String[]{ Contacts.PHOTO_ID, "photo_uri" },
                Contacts._ID + " = " + id + " AND " + Contacts.PHOTO_ID + " != 0",
                null,
                null );
        if( cursor == null )
            return photo;
        if( !cursor.moveToFirst()) {
            cursor.close();
            return photo;
        }
        String sUri;
        if(( sUri = cursor.getString( cursor.getColumnIndex( "photo_uri" ))) != null ) {
            cursor.close();                                                         // content://com.android.contacts/display_photo/1
            return Uri.parse( sUri );
        }
        cursor.close();
        return photo;
    } catch( Exception e ) {
        Cursor cursor = context.getContentResolver().query( Contacts.CONTENT_URI,
                new String[]{ Contacts.PHOTO_ID },
                Contacts._ID + " = " + id + " AND " + Contacts.PHOTO_ID + " != 0",
                null,
                null );
        if( cursor == null )
            return photo;
        if( !cursor.moveToFirst()) {
            cursor.close();
            return photo;
        }
        cursor.close();
        photo = ContentUris.withAppendedId( Contacts.CONTENT_URI, id );
        photo = Uri.withAppendedPath( photo, Contacts.Photo.CONTENT_DIRECTORY );
        return photo;
    }
} 
```

“photo_uri”是一个常量 Contacts.PHOTO_URI，它是从 API 级别 11 添加的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T15:01:03.363

原始答案效果很好，但我认为可以改进很多。当您可以只使用底部部分中的代码时，我看不到 try/catch 的需要，其中没有折旧的方法。这支持 API 级别 10 - 19（可能低于该级别，但我从未检查过）。这就是我的目的

```
 Uri photo = ContentUris.withAppendedId( ContactsContract.Contacts.CONTENT_URI, id);
    photo = Uri.withAppendedPath( photo, ContactsContract.Contacts.Photo.CONTENT_DIRECTORY );
    Bitmap bitmap =  MediaStore.Images.Media.getBitmap(contentResolver, photo); 
```

如果没有照片会抛出异常

# php - 在 PHP 中删除索引会话

> ID：12211110
> 
> 赞同：0
> 
> 时间：2012-08-31T07:55:46.987
> 
> 标签：php, session

我对 PHP 中的会话有疑问。

我已经在 PHP 中编写了设置会话的代码，我想删除它，但是我遇到了一些错误并且对使用 UNSET（变量 $_SESSION）感到困惑。也许任何人都可以帮助我展示我应该如何处理这件事。提前致谢

```
 $_SESSION['chart'] = array();
                    $_SESSION['chart'][0]['index']  = 0
                    $_SESSION['chart'][0]['type'] = $type;
                    $_SESSION['chart'][0]['idanimal'] = $iddog;
                    $_SESSION['chart'][0]['price'] = $price;
                    printdata(); // <== this is the function to print out the data 
```

我要做的只是根据此会话中的索引删除

这是功能：

```
function printdata()
                {
                    $totalharga = 0;
                    if(is_array($_SESSION['chart']))
                    {
                    echo "<h3>"."Berikut adalah keranjang belanja anda" . "</h3>". "<br>";
                    $max = count($_SESSION['chart']);  
                    $th1 = "<th>" . "No" . "</th>";
                    $th2 = "<th>" . "Animal Type" . "</th>";
                    $th3 = "<th>" . "ID Binatang" . "</th>";
                    $th4 = "<th>" . "Harga" . "</th>";
                    $th5 = "<th>" . "Hapus Data" . "</th>";
                    echo "<table border=1>";
                    echo "<tr>";
                    echo $th1 ;
                    echo $th2;
                    echo $th3;
                    echo $th4;
                    echo $th5;
                    echo "</tr>";
                    for ($indexo = 0; $indexo < $max; $indexo++) 
                    {
                    echo "<tr>";
                    echo "<td>" . $indexo."</td>";
                    echo "<td>" . $_SESSION['chart'][$indexo]['type']."</td>";
                    echo "<td>" . $_SESSION['chart'][$indexo]['idanimal']."</td>";
                    echo "<td>" .  "Rp. " . $_SESSION['chart'][$indexo]['harga']. ",-"  ."</td>";
                    echo "<td>" . "<a href='deletesession.php?session=$indexo'>" ."Proses ".   "</a>"."</td>";
                    $totalharga += $_SESSION['chart'][$indexo]['harga'];
                    echo "</tr>";
                    }
                    echo "</table>" . "<br/>";
                    echo "<blockquote>" .  "Total Pembelian Item Yang Anda Pesan  =". "<h2>". "Rp." . $totalharga . ",-" ."</h2>" . "</blockquote>";
                    }else
                    {
                        echo "Chart is still Empty";
                    }
                } 
```

我已经试过了：假设有一个图表已经被内容填充然后我试图在这段代码中删除，我收到了未设置变量的错误

```
unset($_SESSION['chart'][1]) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:04:51.470

> 假设有一个图表已经被内容填充然后我试图在这段代码中删除，我收到了未设置变量的错误`unset($_SESSION['chart'][1])`

从您的代码中可以看出，正确取消设置数据的最佳方法如下： [DEMO](http://codepad.viper-7.com/PFMlSk)。

`$_SESSION['chart'][0]`在再次使用会话变量索引之前，您必须检查是否已设置。如果它`$_SESSION['chart']`的数组仍然包含其他索引，那么您可以调用`printdata();`else 指示会话为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:51:20.310

我在您的代码中发现了一些可以改进的地方：

*   不要在你的函数中**回**显，而是返回（然后回显函数返回的内容）。这使您可以更灵活地处理结果。
*   PHP 有一个用于迭代数组的内置循环，即**foreach**循环。您应该使用它而不是 for。

所以这就是我所拥有的：

```
function print_session_data($session) {
    if (!is_array($session)) {
        return "Array is empty";
    }
    $table_data  = "";
    $total_harga = 0;
    foreach ($session as $index => $data) {
        $table_data .= <<<TABLE_DATA
        <tr>
            <td>$index</td>
            <td>{$data["type"]}</td>
            <td>{$data["idanimal"]}</td>
            <td>Rp. {$data["harga"]}</td>
            <td><a href="deletesession.php?session=$index">Proses</a></td>
        </tr>
TABLE_DATA;
        $total_harga += $data["harga"];

    }

    $result = <<<RESULT
<h3>Berikut abalah keranjang belanja anda</h3>
<table border="1">
    <thead>
        <tr>
            <th>No</th>
            <th>Animal Type</th>
            <th>ID Binatang</th>
            <th>Harga</th>
            <th>Hapus Data</th>
        </tr>
    </thead>
    <tbody>
        $table_data
    </tbody>
</table>
<blockquote>Total Pembelian Item Yang Anda Pesan = <strong>Rp. $total_harga</strong></blockquote>
RESULT;
    return $result;
}

$_SESSION['chart']                = array();
$_SESSION['chart'][0]['type']     = "Type";
$_SESSION['chart'][0]['idanimal'] = 6;
$_SESSION['chart'][0]['price']    = '$25';
$_SESSION['chart'][0]['harga']    = 25;
echo print_session_data($_SESSION["chart"]); // <== this is the function to print out the data 
```

# actionscript-3 - 拖放由 flex-loader 加载的图像。不应删除原始来源

> ID：12211111
> 
> 赞同：1
> 
> 时间：2012-08-31T07:55:48.547
> 
> 标签：actionscript-3, apache-flex, drag-and-drop, flex3, loader

昨天我和我的朋友**Ketan thakkar**正在研究一个与 flex 中的拖放相关的问题。

如果图像具有直接的或嵌入的图像，则可以轻松拖动图像。但是，如果我们尝试从 flex loader 拖动具有源的图像，则原始图像会失去父图像，然后永远不会回到其原始位置。我们试图找到解决方案，幸运的是我们取得了成功。

代码如下。如果有人知道为什么会出现这个问题，请帮助我们。目前，我们已经以这种方式进行了管理。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<mx:Script>
    <![CDATA[
        import mx.controls.Image;
        import mx.core.DragSource;
        import mx.core.FlexLoader;
        import mx.core.UIComponent;
        import mx.events.DragEvent;
        import mx.events.FlexEvent;
        import mx.graphics.ImageSnapshot;
        import mx.managers.DragManager;

        private var fl:FlexLoader = new FlexLoader();

        private var img1:Image = new Image();   

    private function doDragEnter(event:DragEvent):void
    {           
        DragManager.acceptDragDrop(UIComponent(event.target));
    }

    private function doDragDrop(event:DragEvent):void
    {
        var img:Image;
        if (event.dragInitiator.parent == dropCanvas)          
            img = event.dragInitiator as Image;
        else
        {
            img = new Image();
            img.width = img.height = 120;
            img.source = img1.source;
            img.addEventListener(MouseEvent.MOUSE_DOWN, doDragStart);
            dropCanvas.addChild(img);          
        }
        img.x = event.localX - (event.dragSource.dataForFormat("localX") as Number);
        img.y = event.localY - (event.dragSource.dataForFormat("localY") as Number);
    }

    private function doDragStart(event:MouseEvent):void 
    {
        var imageSnap:ImageSnapshot = ImageSnapshot.captureImage(event.currentTarget as IBitmapDrawable);
        var imageByteArray:ByteArray = imageSnap.data as ByteArray;
        img1.load(imageByteArray);

        var dragInitiator:Image = event.currentTarget as Image;
        var dragSource:DragSource = new DragSource();
        var dragProxy:Image = new Image();
        dragProxy.source = img1.source;
        dragProxy.x = mouseX-25;
        dragProxy.y = mouseY-25;
        dragProxy.width = 80;
        dragProxy.height= 80;

        DragManager.doDrag(dragInitiator, dragSource, event, dragProxy,0,0,1,false);
    }

        protected function application1_creationCompleteHandler(event:FlexEvent):void
        {
            fl.contentLoaderInfo.addEventListener(Event.COMPLETE, oncomplete);
            fl.load( new URLRequest('assets/1.swf'));
        }

        private function oncomplete(event:Event):void
        {
            img.source = fl;
        }

    ]]>
</mx:Script>
<controls:FlexBook width="400" height="200"
                   itemSize="halfPage">
    <controls:content>
        <mx:Image id="img" mouseDown="doDragStart(event)" /><!--source="@Embed('assets/Hawk.jpg')"-->
        <mx:Image id="img11" mouseDown="doDragStart(event)" /><!--source="@Embed('assets/Hawk.jpg')"-->
        <mx:Image id="img2" mouseDown="doDragStart(event)" /><!--source="@Embed('assets/Hawk.jpg')"-->
    </controls:content>
</controls:FlexBook>    
<mx:Canvas id="dropCanvas" width="100%" height="100%" borderColor="#1C5CC7" dragEnter="doDragEnter(event)" dragDrop="doDragDrop(event)"  borderStyle="solid" cornerRadius="20" borderThickness="6" backgroundColor="#7E92FC"/>
<!--<mx:Image id="dropImage" source="assets/1.swf" />--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:16:06.013

我有一个类似的问题，问题出在这一行：

```
dragProxy.source = img1.source; 
```

你应该[像这里一样复制位图](https://stackoverflow.com/questions/3635144/copy-bitmapdata-from-mximage)**img1** 而不是链接它。

# asp.net - 像在 Elmah 中一样从 log4net 读取日志？

> ID：12211116
> 
> 赞同：2
> 
> 时间：2012-08-31T07:56:05.453
> 
> 标签：asp.net, error-handling, log4net

有没有像 Elmah 这样的从 log4net 文件中读取日志的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:47:03.543

看看[http://logjoint.codeplex.com/](http://logjoint.codeplex.com/)这是一个工具，您可以在其中定义自己的规则来读取日志文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:01:45.963

看看[电锯](http://logging.apache.org/chainsaw/)

> Chainsaw v2 是由 Log4j 开发社区成员编写的 Log4j 的配套应用程序。与许多开源项目一样，这个新版本建立在他人的灵感、想法和创作之上。Chainsaw v2 源于 Oliver Burn 编写的原始 Chainsaw 实用程序，灵感来自 ThoughtWorks Inc. 提供的 Log Factor 5 实用程序。

它也适用于 log4net

# windows - 硬盘驱动器在 Windows Server 2008 中未初始化

> ID：12211119
> 
> 赞同：0
> 
> 时间：2012-08-31T07:56:22.847
> 
> 标签：windows

即使在重新启动后，Windows Server 2008 中的物理硬盘驱动器仍显示为“未初始化”，并且我无法使用磁盘管理器或 DiskPart 初始化磁盘。

windows server 2008 的任何解决方案。有一个修补程序 840781 专门针对 windows server 2003 解决了这个问题。windows server 2008 是否有类似的修补程序可用？

谢谢阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:08:03.473

我找不到针对 Windows 2008 解决此问题的任何修补程序。但是，我刚刚更新了我的 Windows（控制面板 >> Windows 更新 >> 安装更新）并且问题现在已解决。我不确定这是否会出现在未来...

# java - 为什么 wsimport 生成的类需要 JAXBElement 参数？

> ID：12211120
> 
> 赞同：4
> 
> 时间：2012-08-31T07:56:23.423
> 
> 标签：java, wsdl, jax-ws, axis2, wsimport

我有一个来自 Axis2 Web 服务的 WSDL 文件。当我使用`wsimport`给定的 WSDL 文件生成客户端存根时，生成的类需要`JAXBElement`参数。为什么会这样？

来自生成的类之一的示例方法：

```
JAXBElement<DataBean> value;

public void setValue(JAXBElement<DataBean> value)
{
    this.value = ((JAXBElement<DataBean>) value);
} 
```

我希望它看起来像这样（没有 JAXBElement）：

```
DataBean value;

public void setValue(DataBean value)
{
    this.value= (DataBean) value;
} 
```

我在网上看到的教程并没有将类设置为 JAXBElement。可能是什么问题呢？请注意，服务器是一个 Axis2 Web 服务，WSDL 文件是由 Axis2 自动生成的。假设是我无法控制服务器。

如何以`wsimport`不会将参数转换为 JAXBElements 的方式制作它？

以下是 WSDL 文件的摘录：（我忽略了一些标签以仅包含基本标签）

```
<xs:element name="getData">
    <xs:complexType>
        <xs:sequence>
            <xs:element minOccurs="0" name="getData" nillable="true" type="ax220:getData"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:complexType name="getData">
    <xs:sequence>
        <xs:element minOccurs="0" name="value" nillable="true" type="ax219:DataBean"/>
    </xs:sequence>
</xs:complexType>

<wsdl:message name="getDataRequest">
    <wsdl:part name="parameters" element="ns:getData"/>
</wsdl:message>

<wsdl:message name="getDataResponse">
    <wsdl:part name="parameters" element="ns:getDataResponse"/>
</wsdl:message>

<wsdl:operation name="getData">
    <wsdl:input message="ns:getDataRequest" wsaw:Action="urn:getData"/>
    <wsdl:output message="ns:getDataResponse" wsaw:Action="urn:getDataResponse"/>
</wsdl:operation>

<wsdl:operation name="getData">
    <soap:operation soapAction="urn:getData" style="document"/>
    <wsdl:input>
        <soap:body use="literal"/>
    </wsdl:input>
    <wsdl:output>
        <soap:body use="literal"/>
    </wsdl:output>
</wsdl:operation>

<wsdl:operation name="getData">
    <soap12:operation soapAction="urn:getData" style="document"/>
    <wsdl:input>
        <soap12:body use="literal"/>
    </wsdl:input>
    <wsdl:output>
        <soap12:body use="literal"/>
    </wsdl:output>
</wsdl:operation>

<wsdl:operation name="getData">
    <http:operation location="getData"/>
    <wsdl:input>
        <mime:content type="text/xml" part="parameters"/>
    </wsdl:input>
    <wsdl:output>
        <mime:content type="text/xml" part="parameters"/>
    </wsdl:output>
</wsdl:operation> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-27T16:03:13.460

如本页所述：

[http://www.techdevtips.com/java/java-webservice-client-how-to-remove-jaxbelement](http://www.techdevtips.com/java/java-webservice-client-how-to-remove-jaxbelement)

使用此代码的数据绑定文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxb:bindings
  xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" jaxb:version="2.0"
  xmlns:xjc= "http://java.sun.com/xml/ns/jaxb/xjc" jaxb:extensionBindingPrefixes="xjc">
  <jaxb:globalBindings generateElementProperty="false">
    <xjc:simple />
  </jaxb:globalBindings>
</jaxb:bindings> 
```

并通过填充绑定属性（或 -b 标志参数，如果您使用可运行对象）在您的 wsimport ant 任务中使用它

干杯:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:01:24.230

首先：我不认为这是可以做到的。也就是说，我认为您不能告诉 wsimport 以不同的方式生成类。但是，我可以告诉您如何修改 WSDL，从而以不同的方式生成模式并且仍然可以让您与服务对话。

我从 WSDL 中获取了类型定义，调整了 complexType 的名称并添加了上面缺少的 DataBean 类型。我将它粘贴到一个模式并使用 xjc（JAXB 模式编译器）编译模式，wsimport 使用它从类型定义生成类。这是架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.example.org/DataBean"
    xmlns:tns="http://www.example.org/DataBean" elementFormDefault="qualified"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="getData">
        <xs:complexType>
            <xs:sequence>
                <xs:element minOccurs="0" name="getDataType" type="tns:getDataType" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <xs:complexType name="getDataType">
        <xs:sequence>
            <xs:element minOccurs="0" name="value" type="tns:DataBean" />
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="DataBean">
        <xs:simpleContent>
            <xs:extension base="xs:int" />
        </xs:simpleContent>
    </xs:complexType>
</schema> 
```

您不需要编译器的任何特殊选项，只需执行 xjc 并将其指向模式文件，然后它将编译源文件。

生成的类不用`JAXBElement`作方法参数。那就是它们看起来像这样：

```
protected DataBean value;

public DataBean getValue() {
    return value;
} 
```

为什么是这样？我`nillable="true"`从元素定义中删除了属性，这就成功了。`nillable="true"`声明显式空值在这里是合法的：

```
<DataBean></DataBean> 
```

如果您删除此属性，如果服务实际上在其中写入空值，您的代码将遇到问题。但在生成了所有 WSDL 之后，也许 Axis2 只是认为 nillable 出于某种原因应该在其中，尽管实现从未真正使用它。如果幸运的话，虽然您修改了 WSDL，但它不会，并且一切都会正常工作。

我希望这有帮助！如果没有，那么至少我今天学到了一些东西;-)

# jquery - 关于隐藏选定 div div 的 Jquery 帮助

> ID：12211122
> 
> 赞同：0
> 
> 时间：2012-08-31T07:56:34.633
> 
> 标签：jquery

我已经说了五个 div，其布局如下面的代码所示。

```
//Div one
<div class="container">
<div class="hide">
    <button class="hide" value="hide" />
</div>
</div>

//Div Two
<div class="container">
<div class="hide">
    <button class="hide" value="hide" />
</div>
</div>

//Div Three
< div class="container">
<div class="hide">
    <button class="hide" value="hide" />
</div>
</div> 
```

现在说我单击第二个 div 中的隐藏按钮，我想隐藏第二个 div.. 那就是我想隐藏与按钮单击对应的 div.. 如何仅通过 jquery 做到这一点？？？

我尝试通过 jquery 使用“this”关键字，但这会隐藏所有容器，而不仅仅是一个。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:57:43.940

```
$('button.hide').on('click', function() {
   $(this).closest('.container').hide()
}); 
```

我指定`button.hide`而不是`.hide`选择器，因为您有更多具有该类名的不同元素

查看[jQuery 文档](http://api.jquery.com/closest/)`closest()`的用法

> 获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:58:33.870

使用[jQuery`.closest()`](http://api.jquery.com/closest/)方法向上遍历 DOM 树以定位`<div>`. 然后你可以触发div上的隐藏。

```
$('button.hide').click(function() {
    $(this).closest('.container').hide();
}); 
```

当然，这是在 DOM 就绪的情况下完成的：`$(document).ready(function() { /*...*/ });`

# php - 递归删除树状结构数据

> ID：12211124
> 
> 赞同：0
> 
> 时间：2012-08-31T07:56:41.523
> 
> 标签：php, recursion, sqlite, pdo

嘿那里，

我的 sqlite 表中有一些树形结构的数据，想用 php 递归地删除它。数据如下所示：

```
标识父标识
0 -1
1 0

```

功能：

```
/**
 * Delete a category with all it's subcategories
 * 
 * @param {number} id The id of the category which should be deleted
 * @return {number} The number of categories deleted
 * @throws {Exception} Throws an exception with some description text if anything goes wrong
 */
public function deleteCategory($id) {
    static $catCnt = 0;

    Helper::log("deleteCategory: id = $id");

    try {
        // Open database-connection
        $this->openDatabase();

        // Remove all subcategories recursively
        $stmtSubs = $this->_db->prepare("SELECT Id FROM categories WHERE ParentId = :id");
        $stmtSubs->bindParam(":id", $id, PDO::PARAM_INT);
        $stmtSubs->execute();
        while ($row = $stmtSubs->fetch(PDO::FETCH_ASSOC)) {
            Helper::log("deleteCategory: call recursively to delete subcategory with id = " . $row["Id"]);
            $this->deleteCategory($row["Id"]);
        }

        // All subcategories have been removed -> Now it's time to remove the category itself
        $stmt = $this->_db->prepare("DELETE FROM Categories WHERE Id = :id");
        $stmt->bindParam(":id", $id, PDO::PARAM_INT);

        Helper::log("deleteCategory: before execution, id = $id");
        $stmt->execute();

        // The code from here on never gets executed...
        Helper::log("deleteCategory: after execution, id = $id");

        $catCnt += $stmt->rowCount();

        return $catCnt;
    } catch (Exception $ex) {
        throw new Exception("Deletion of category failed:<br>" . $ex->getMessage());
    }
} 
```

如果我用参数 0 调用这个函数，我会得到这个输出：

```
31.08.2012 09:39:58: deleteCategory: id = 0
31.08.2012 09:39:58: deleteCategory: call recursively to delete subcategory with id = 1
31.08.2012 09:39:58: deleteCategory: id = 1
31.08.2012 09:39:58: deleteCategory: before execution, id = 1
// Here should be the "after execution"-entry, but instead it "waits" half a minute and starts the whole execution from the beginning...
31.08.2012 09:40:28: deleteCategory: id = 0
31.08.2012 09:40:44: deleteCategory: call recursively to delete subcategory with id = 1
31.08.2012 09:40:44: deleteCategory: id = 1
31.08.2012 09:40:44: deleteCategory: before execution, id = 1 
```

正如您所看到的，它执行得很好，直到它实际上应该删除 id 为 1 的子类别。execute-command 永远不会完成，相反，它似乎在半分钟内没有做任何事情，之后它开始从从 id 0 开始。

在第二次“尝试”之后，它只返回内部服务器错误（“服务器遇到内部错误或配置错误，无法完成您的请求......”）

如果我用参数 1 调用这个函数，一切正常，因为递归永远不会被调用。

这里发生了什么？

谢谢，

米克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:10:09.013

折腾了半天，决定发在这里，发在这里，发完再看，发现问题：

“$this->openDatabase();”的递归调用 是万恶之源……

谢谢 ;）

# c# - c# 类之间通信的最佳方式

> ID：12211125
> 
> 赞同：10
> 
> 时间：2012-08-31T07:56:43.497
> 
> 标签：c#

现在我正在编写一个应用程序，并且我认为必须有一个更好的解决方案来解决我现在正在做的事情。

我有一个主窗口来处理程序的设置。然后我有更多的课程和窗户。例如，一个语言处理程序类和一个处理“主要功能”所需的用户输入的表单。

然而，直到现在我总是必须将我的主窗口传递给这些类中的每一个，因为语言处理程序应该能够更改主窗口的字符串。并且其他窗体也应该能够将数据传递到主窗口。

如果我们想象会有更多的类并且每个类都需要一个主窗口的副本，这将消耗大量资源，具体取决于主窗口的“大小”。

那么，是否有更好/更有效的方式在这些类之间进行通信。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T08:04:01.017

常见的方法是使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)，在 .NET 中是[事件系统](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)。简单地说，您的类订阅彼此的事件并在引发事件时执行操作。正如评论中所指出的，传递引用并不占用大量内存，但它会导致不同代码片段之间的紧密耦合——观察者模式解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T08:07:51.153

另一种选择是将您的类视为服务。将它们编码为一个接口，然后使用[依赖注入](http://jamesshore.com/Blog/Dependency-Injection-Demystified.html)（又名控制反转）来构建对象图（您告诉 IoC 容器您想要一个`frmSomething`，它会确定它需要哪些服务/类并根据需要实例化它们）。

这意味着：

*   您只需要针对接口而不是实现进行编码
*   您的代码是松散耦合的（您可以将 a 交换`OldTranslator`为 a `NewTranslator`，只要它们都符合相同的接口，除了容器的配置外，无需更改任何内容）
*   您可以开发依赖尚未编写的服务的高级功能，并且您的代码将编译
*   如果需要，您可以在运行时通过更改在容器中注册的类/服务来非常轻松地更改应用程序的工作方式。

查看[Unity](http://unity.codeplex.com/) for MS-Supported DI 容器。[温莎城堡](https://github.com/castleproject/Windsor/blob/master/docs/README.md)是一个受欢迎的选择，但还有更多

值得注意的是，如您所说，传递主窗口的“副本”并不是一件坏事-实际上您只是将引用（实际上是*指针*）传递给主窗口（因为任何比真实的更复杂原语是引用类型）。这意味着几乎没有任何开销

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T08:01:21.150

我建议您使用[Galasoft](http://www.galasoft.ch/mvvm/)或[Prism](http://msdn.microsoft.com/en-us/library/gg406140.aspx) MVVM 实现。在那里你可以使用他们非常容易使用的消息服务。需要信息的类只向订阅者发送一条消息，然后他们可以发送所有需要的数据。我认为这是处理沟通的最简单方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T08:04:50.223

除了 IVAN 给出的 ans .. 如果我们在没有所有这些术语的情况下查看更高级别的视图，那么您可能应该创建一个静态类，该类将作为 InMemoryStorage 服务并在其上定义字段以保存
您将完全控制的信息在共享的内容和多个组件可以更改它
此外，您可以定义 getter 和 setter，并在属性更改时引发事件，以便不同的表单或窗口（视图）可以订阅更改并相应地采取行动

# java - 如何限制安卓应用不显示在设备的主菜单中？

> ID：12211128
> 
> 赞同：0
> 
> 时间：2012-08-31T07:56:57.967
> 
> 标签：java, android, android-menu

我正在从其他应用程序（比如 app2）以编程方式安装一个应用程序（比如 app1）。我正在尝试的是 app1 未显示在设备的主菜单中，只能由 app2 启动。如果这是可能的，我该如何实施。请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:59:09.190

app1 清单不应包含任何具有

```
 <category android:name="android.intent.category.LAUNCHER"/> 
```

那么它不会显示在启动器中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:07:06.623

代替

```
 <category android:name="android.intent.category.LAUNCHER"/> 
```

在 app1 的清单中

```
<category android:name="android.intent.category.DEFAULT" /> 
```

然后它将从 app2 启动，并且不会显示在应用程序列表（主菜单）中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T08:12:52.977

这很容易。在您的清单中，通常有一个 Activity。这个活动有一个意图过滤器。应用程序的入口点包含一个意图过滤器，如下所示：

```
<intent-filter . . . >
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

如果您没有将这 2 个值放在意图过滤器中，则您的活动不会出现在主菜单上。

但是，您仍然可以通过任何其他类型的意图过滤器直接调用它。

# powershell - 想要等到使用 Powershell Copy-Item 完成复制

> ID：12211131
> 
> 赞同：6
> 
> 时间：2012-08-31T07:57:08.177
> 
> 标签：powershell, copy-item

我正在使用 Powershell 脚本中的 Copy-Item 将文件从一台 Windows 机器复制到另一台机器。

但是我想等到复制完成，Powershell Copy-Item 是非阻塞调用方式，它只是触发复制并返回到脚本但是我想等到复制完成。

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-01-19T21:34:31.400

也许“copy-item [...] | out-null”将有助于等待完成。

“Out-null 实际上会删除输出，而不是将其路由到 PowerShell 控制台，因此脚本将等待内容被删除，然后再继续。”

解释来自 [ITProToday.com：https://www.itprotoday.com/powershell/forcing-powershell-wait-process-complete](https://www.itprotoday.com/powershell/forcing-powershell-wait-process-complete)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-31T18:23:37.930

**`Copy-Item`确实阻塞。** 我刚刚将一个 4.2GB 的文件从我们千兆网络上的共享中复制到我的本地机器上。我的 PowerShell 提示挂起，几分钟后没有返回。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2018-07-22T15:22:16.777

对于非常小的文件，它似乎在这里是非阻塞的。我在用着：

```
Start-Sleep -s 3 
```

等待文件被复制。不是一个理想的解决方案，但这是我到目前为止所得到的。

# mongodb - 在 MongoDB 中创建自定义对象 ID

> ID：12211138
> 
> 赞同：41
> 
> 时间：2012-08-31T07:57:42.040
> 
> 标签：mongodb

我正在创建一个服务，我将使用 MongoDB 作为存储后端。该服务将生成用户输入的哈希，然后查看我们的数据集中是否已经存在相同的哈希（+ 输入）。

哈希将是唯一但随机的（=非增量/顺序），所以我的问题是：

1.  对对象 ID 使用随机值是否合法？例子：

`$object_id = new MongoId(HEX-OF-96BIT-HASH);`

或者 MongoDB 是否会将 ObjectID 与其他服务器生成的对象区别对待，因为“真实”的 ObjectID 还包含时间戳、machine_id 等？

使用“随机”值的优缺点是什么？我想当新的_id不是以任何方式递增时，引擎更新插入索引的统计速度会更慢 - 我对此是否正确？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-31T08:09:27.190

是的，对对象 id 使用随机值是完全可以的，如果`_id`正在存储的文档的字段中存在某个值，则将其视为 objectId。

由于`_id`字段始终是索引的，并且是主键，因此您需要确保为每个对象生成不同的 objectid。有一些准则可以优化用户定义的对象 ID：

[https://docs.mongodb.com/manual/core/document/#the-id-field](https://docs.mongodb.com/manual/core/document/#the-id-field)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-03T01:26:13.787

虽然任何值（包括哈希）都可以用于该`_id`字段，但我建议不要使用随机值，原因有两个：

1.  如果您为两个不同的对象生成相同的随机值，您可能需要制定碰撞管理策略。在问题中，您暗示您将使用某种类型的哈希算法生成 ID。我不会认为这些值是“随机的”，因为它们是基于您使用散列消化的内容。那么，冲突的概率是内容的多样性和散列算法的函数。如果您使用的是 MD5 或 SHA-1 之类的东西，我不会担心算法，只担心您正在散列的内容。如果您需要开发冲突管理策略，那么您绝对不应该使用随机或基于哈希的 ID，因为集群环境中的冲突管理很复杂并且需要额外的查询。

2.  随机值和散列值有意分散在数轴上。(a) 将需要更多的 B-tree 索引始终保存在内存中，并且 (b) 由于 B-tree 重新平衡，可能会导致可变的插入性能。MongoDB 经过优化以处理 ObjectID，它按升序排列（以一秒时间粒度）。你可能最好还是坚持下去。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-31T08:12:04.877

它的好坏取决于它的独特性。当然，MongoDB 提供的 ObjectId 非常独特，所以这是一件好事。只要您可以复制这种独特性，那么您应该没问题。

使用您自己的 ID 没有固有的风险/性能损失。我猜想以字符串形式使用它可能会消耗更多的索引/存储/查询能力，但是您在 MongoID (ObjectId) 形式中使用它应该保留不将其存储在简单字符串中的优势。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-02T17:42:45.543

我刚刚找到了一个关于索引性能的问题的答案：

> 如果 _id 的顺序有些明确，则不需要加载 _id 索引的整个 b 树。BSON ObjectIds 有这个属性。

来源：[http ://www.mongodb.org/display/DOCS/Optimizing+Object+IDs](http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs)

# c# - XML SelectSingleNode 其中兄弟 = '某事'

> ID：12211143
> 
> 赞同：1
> 
> 时间：2012-08-31T07:57:59.133
> 
> 标签：c#, xml, xpath

考虑以下 XML：

```
<SomeRoot>
  <SomeElement>
    <SomeThing>25</SomeThing>
    <SomeOther>Cat</SomeOther>
  </SomeElement>
  <SomeElement>
    <SomeThing>46</SomeThing>
    <SomeOther>Dog</SomeOther>
  </SomeElement>
  <SomeElement>
    <SomeThing>83</SomeThing>
    <SomeOther>Bat</SomeOther>
  </SomeElement>
  <SomethingElse>Unrelated to the SomeElements above</SomethingElse>
</SomeRoot> 
```

我想`select SomeThing where SomeOther = 'Cat'`。以下 C# 代码引发空引用异常：

```
xmlDoc = new XmlDocument();
this.path = path;
// Path is passed elsewhere

Console.WriteLine(xmlDoc.SelectSingleNode("/SomeRoot/SomeElement/SomeThing[../SomeOther='Cat']").InnerText); 
```

在这里使用的正确 XPath 语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:13:34.007

你错过了负载

```
var xmlDoc = new XmlDocument();
xmlDoc.Load(path);
Console.WriteLine(xmlDoc.SelectSingleNode("/SomeRoot/SomeElement/SomeThing[../SomeOther='Cat']").InnerText); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:10:41.517

这就是我所做的并且它有效；

```
XmlDocument xDoc = new XmlDocument();
xDoc.LoadXml(@"<SomeRoot><SomeElement><SomeThing>25</SomeThing><SomeOther>Cat</SomeOther></SomeElement></SomeRoot>");

var x = xDoc.SelectSingleNode("/SomeRoot/SomeElement/SomeThing[../SomeOther= 'Cat']").InnerText; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T12:53:42.793

**您可以避免使用任何反向轴**：

```
/*/SomeElement[SomeOther='Cat']/SomeThing 
```

# python - 只需要一个关于 range() 的小代码改写

> ID：12211145
> 
> 赞同：-1
> 
> 时间：2012-08-31T07:58:02.580
> 
> 标签：python, range

这是我目前正在处理的代码，但我的老板对它的最后一部分不太满意。有人能帮我吗？下面的问题已标记。提前致谢！

```
#!/usr/bin/python

def codeNameDict(lst, cnDict):
    key = int(lst[0])
    value = lst[1]
    cnDict[key] = value
    return cnDict

def realNameDict(lst, rnDict):
    key = int(lst[0])
    value = lst[2].strip()
    rnDict[key] = value
    return rnDict

def getCodeKey(keys):
    import random
    index = random.choice(keys)
    return index

def searchKey(cnDict,value):
    for x in cnDict.keys():
      if(value == cnDict.get(x)):
        return x
        break;

def namegen(cnDict):
    index1 = getCodeKey(cnDict.keys())
    index2 = getCodeKey(cnDict.keys())

    if(index1 == index2):
     while(index1 == index2):
      index2 = getCodeKey(cnDict.keys())
      indexgen = [index1,index2]

    else:
      indexgen = [index1,index2]
    return indexgen

cnDict = {}
rnDict = {}

f = open("namefile.txt")
try:
    for line in f:
        words = line.split(":")
        cnDict = codeNameDict(words,cnDict)
        rnDict = realNameDict(words,rnDict)
finally:
    f.close()

# PROBLEMATIC SECTION #
for x in range(10):
    indexgen = namegen(cnDict)
    key1 = indexgen[0]
    key2 = indexgen[1]
    #print indexgen
    #print key1
    #print key2
    pokemon1 = cnDict[key1]
    pokemon2 = cnDict[key2]
    realname1 = rnDict[key1]
    realname2 = rnDict[key2]

    print "Partners-> %s:%s" % (pokemon1, pokemon2)
    print "RealNames-> %s:%s" % (realname1, realname2)

    del cnDict[key1]
    del cnDict[key2] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:27:25.943

你可以制作线条

```
key1 = indexgen[0]
key2 = indexgen[1] 
```

与：

```
key1, key2 = indexgen[0], indexgen[1]. 
```

与`pokemon1, pokemon2` 和相同`realname1, realname2`。我也不会使用魔法值`10`，而是给它一个名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:36:48.203

您的代码有几个改进。让我们举个例子：

```
def getCodeKey(keys):
import random
index = random.choice(keys)
return index 
```

这实际上是返回`random.choice`将返回的内容。我建议将`import`语句移动到文件的开头，并使用`random.choice`而不是`getCodeKey`（再次，它是同一件事）

其次，在 中`searchKey`，不需要`break`在 return 之后，因为 return 已经从函数返回。但是，如果搜索的值*不在*字典中，您应该考虑采取一些措施......

第三，

```
if(index1 == index2):
 while(index1 == index2):
  index2 = getCodeKey(cnDict.keys())
  indexgen = [index1,index2]

else:
  indexgen = [index1,index2]
return indexgen 
```

`if`没有必要，因为如果它不是真的，`while`循环将不会被执行。然后您也不需要`else`，请注意您在`if`和`else`语句中为 indexgen bot 设置值。另外 - 没有必要为你将立即返回的值创建变量。我会将其重写为

```
 while(index1 == index2):
  index2 = getCodeKey(cnDict.keys())

return [index1,index2] 
```

至于这`range`部分，我唯一看到的是*halex*建议的，即将所有双重语句放在一行中。

```
key1, key2 = indexgen[0], indexgen[1] 
```

不过我觉得变化不大

这不完全是你所要求的，但正如你所说 - 你正在学习 python，所以我认为这可能至少有点用

# javascript - 为 Google Closure 类定义属性的首选方法是什么？

> ID：12211147
> 
> 赞同：5
> 
> 时间：2012-08-31T07:58:06.810
> 
> 标签：javascript, google-closure, google-closure-library

下面的示例显示了一个扩展 goog.ui.Component 的类。

类的属性应该在构造函数之外定义，如下所示，还是应该只在构造函数中内联定义？

可以将属性初始化为null吗？

```
goog.provide("org.something.SomeClass");

/**
 * @type {Object}
 * @private
 **/
org.something.SomeClass.prototype.anObject_ = null;

/**
 * @type {Element}
 * @private
 **/
org.something.SomeClass.prototype.anElement_ = null;

/**
 * @param {goog.dom.DomHelper=} opt_domHelper
 * @constructor
 * @extends {goog.ui.Component}
*/
org.something.SomeClass = function () {
    goog.ui.Component.call(this, opt_domHelper);

    this.anObject_ = {};
    this.anElement_ = new Element();
};
goog.inherits(org.something.SomeClass, goog.ui.Component); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:48:18.920

[闭包库](https://developers.google.com/closure/library/)实现了具有在原型上以及在构造函数中定义的属性的类。除了研究闭包库源代码之外，这里还有一些在决定是在原型上还是在构造函数中定义属性时要考虑的问题。

## 类的每个实例的属性是否唯一？

每个实例唯一的属性（例如汽车的 VIN 号）不应在实例之间共享，因此在构造函数中而不是原型中定义。

```
/**
 * A car.
 * @param {string} vin The Vehicle Identification Number.
 * @constructor
 */
Car = function(vin) {

  /**
   * The Vehicle Identification Number.
   * @type {string}
   * @private
   */
  this.vin_ = vin;
}; 
```

## 属性类型是不可变的（例如字符串、布尔值、数字）还是可变的（例如对象、数组）？

由于不可变的属性类型可以在实例之间安全地共享，它们应该在原型上定义。如果一个实例需要覆盖共享的默认值，可以添加一个实例属性来隐藏同名的原型属性。

```
/**
 * The number of cylinders in the engine.
 * @type {number}
 * @private
 */
Car.prototype.cylinders_ = 4;

/**
 * Sets the number of cylinders in the engine.
 * @param {number} cylinders The number of cylinders.
 */
Car.prototype.setCylinders = function(cylinders) {
  if (this.cylinders_ == cylinders) {
    // Since the number of cylinders has not changed, do not add a new
    // instance property to shadow the prototype property. Instead, continue
    // to use the prototype property.
    return;
  }

  // Defines cylinders_ property on the instance object that shadows
  // Car.prototype.cylinders_
  this.cylinders_ = cylinders;
};

/**
 * Gets the number of cylinders in the engine.
 * @return {number} The number of cylinders.
 */
Car.prototype.getCylinders = function() {
  return this.cylinders_;
}; 
```

以下示例说明了设置实例属性如何隐藏原型属性。

```
var myCar = new Car("1HGCM82633A004352");
alert(myCar.getCylinders()); // Alerts 4.

myCar.setCylinders(6);
alert(myCar.getCylinders()); // Alerts 6;

// Delete the instance property and let the prototype property
// "shine through".
delete myCar.cylinders_;
alert(myCar.getCylinders()); // Alerts 4; 
```

如果属性类型是可变的，例如 Array 或 Object，那么在大多数情况下，您不希望在类的实例之间共享相同的可变属性实例。因此，可变属性通常在构造函数中定义，而不是在原型中。

> 可以将属性初始化为`null`吗？

闭包库中有许多属性初始化为的示例。`null.`但是，如果可能，最好将变量初始化为有用的默认值，例如将默认柱面数设置为 4，如上例所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:16:11.840

我还怀疑它是为了优化 V8 引擎以及闭包编译器。如果所有对象都具有相同的属性，V8 引擎会缓存类实例（IO2012 talk）。通过在原型中声明所有内容，所有对象实例都具有*有序*的相同属性。或者他们可能只是想拥有清晰的风格。:-)

# linux - ps 是否有一组参数可以更清楚地显示 Java 进程？

> ID：12211148
> 
> 赞同：1
> 
> 时间：2012-08-31T07:58:07.607
> 
> 标签：linux, shell, command-line, process, ps

运行`ps`命令时，我得到如下输出：

```
[nick]$ ps
  PID TTY          TIME CMD
 3287 pts/3    00:00:00 bash
12308 pts/3    00:00:00 ps
19544 pts/3    00:00:00 STS
19548 pts/3    00:45:25 java
19753 pts/3    00:04:10 java
21149 pts/3    00:15:25 java 
```

这对我没有多大帮助，因为我不知道每个 Java 进程到底是什么。跑步`ps T`提供了更多信息，但现在信息太多了！

```
[nick]$ ps T
  PID TTY      STAT   TIME COMMAND
 3287 pts/3    Ss     0:00 bash
12319 pts/3    R+     0:00 ps T
19544 pts/3    S      0:00 /home/nick/springsource/sts-3.0.0.RELEASE/STS
19548 pts/3    Sl    45:25 /usr/lib/jvm/java-6-openjdk-amd64/bin/java -Dosgi.requiredJavaVersion=1.5 -Xms256m -Xmx1536m -XX:MaxPermSize=512m -jar /home/nick/springsource/sts-3.0.0.RELEASE//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar -os linux -w......
19753 pts/3    Sl     4:10 /usr/lib/jvm/java-6-openjdk-amd64/bin/java -agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:48135 -Dcatalina.base=/home/nick/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp3 -Dcatalina.home=/home/nic......
21149 pts/3    Sl    15:25 /usr/lib/jvm/java-6-openjdk-amd64/bin/java -agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:57346 -Dcatalina.base=/home/nick/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp5 -Dcatalina.home=/home/nic...... 
```

有没有办法只显示正在运行的 Java 包或类的文件名？像这样的东西：

```
[nick]$ ps
  PID TTY          TIME CMD
 3287 pts/3    00:00:00 bash
12308 pts/3    00:00:00 ps
19544 pts/3    00:00:00 STS
19548 pts/3    00:45:25 java abc.jar
19753 pts/3    00:04:10 java def.java
21149 pts/3    00:15:25 java ghi.jar 
```

如果这不能通过`ps`参数来完成，有没有办法实现它`grep`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:01:57.123

不，不是用ps。它要么全部为 args，要么没有（arglist 的模截断）。但是如何过滤长 ps 输出以留下您想要的内容呢？您可以使用 sed、awk、perl、cut 和其他工具做很多事情。手册有所有细节。

示例：要打印字段 1 到 4 以及最后一个字段，请使用

```
ps T | awk '{print $1, $2, $3, $4, $NF}' 
```

请注意，这与 Unix 哲学是如何匹配让一个工具做好一件事的：ps 打印进程信息，而 awk 选择您想要的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:03:06.883

您正在寻找的可能是`jps`cli 实用程序或图形`jconsole`.

# java - 查询网页时Java传递URLConnection参数

> ID：12211150
> 
> 赞同：0
> 
> 时间：2012-08-31T07:58:09.960
> 
> 标签：java

我想在 www.domain.com.au 上进行搜索，需要提供一些 URL 参数才能获得成功的 HTTP 响应。但是，那

```
 1\.  String url = "http://www.domain.com.au/"; // or www.realestate.com.au
  2\.  String charset = "UTF-8";
  3\.  String param1 = "Melbourne 3000 VIC"; // simple search on the web page
  4.
  5\.  URLConnection connection = (URLConnection) new URL(url + "?" + param1).openConnection();
  6\.  connection.setRequestProperty("Accept-Charset", charset);
  7\.  connection.connect();
  8\.  connection.setDoInput(true);
  9\.  connection.setDoOutput(false);
 10\.  connection.connect();
      ....... 
```

响应是 HTTP 400 错误。因此，我需要您就以下问题提出建议，以了解问题的根源：

(i) 参数名称应该是 param1，还是网页上的其他名称？如果是这样，它是什么？

(ii) 假设参数名称为 param1，第 5 行是否正确？是否有必要包含 URLEncoder.encode(param1, charset) 即使第 6 行已经明确设置它。

上面的代码片段适用于其他不需要参数的简单网页。

您的建议将不胜感激。

谢谢，

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:21:24.637

[BalusC](https://stackoverflow.com/users/157882/balusc)`java.net.URLConnection`在以下链接中很好地描述了使用

[使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:21:34.670

几件事：

1\. 您没有传递名称值对。一个典型的 GET URL 请求看起来像

```
http://www.domain.com.au/?param1=value 
```

你只是在传递价值，你的 URL 看起来像

`http://www.domain.com.au/?Melbourne 3000 VIC`

2\. 更改行号 5到

`URLConnection connection = (URLConnection) new URL(url + "?parame1=" + param1).openConnection();`

另外对查询字符串进行编码以用 html 编码替换空格。[在这里查看](https://stackoverflow.com/questions/724043/http-url-address-encoding-in-java)如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T00:03:59.073

我检查了 domin.com.au 网站。

1) 搜索参数名称为“searchterm”，漏掉了URL中的key(key=value)。

```
HttpURLConnection connection = (HttpURLConnection) new URL(url + "?searchterm=" + param1).openConnection(); 
```

2）如果有特殊字符，您应该包括编码。

以下是将从网站返回内容的代码示例：

```
 public void searchDomain(String key) throws Throwable
{
    String url = "http://www.domain.com.au/"; // or www.realestate.com.au
    String charset = "UTF-8";
    String param1 = "Melbourne"; // simple search on the web page
    HttpURLConnection connection = (HttpURLConnection) new URL(url + "?searchterm=" + param1).openConnection();
    connection.setRequestProperty("Accept-Charset", charset);
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.connect();

    java.io.BufferedReader br = new java.io.BufferedReader(new java.io.InputStreamReader(connection.getInputStream()));
    java.lang.StringBuffer sb = new java.lang.StringBuffer();
    java.lang.String str = br.readLine();
    while (str != null) 
    {
        sb.append(str);
        str = br.readLine();
    }
    br.close();
    connection.disconnect();

    System.out.println(sb.toString());
} 
```

# iphone - 使用 CGImageCreateWithJPEGDataProvider 时的内存泄漏

> ID：12211158
> 
> 赞同：1
> 
> 时间：2012-08-31T07:58:39.887
> 
> 标签：iphone, ios, memory-leaks, core-graphics

我使用 Instruments(Leaks) 来检测我的应用程序的内存泄漏。有时它会说我的一种方法存在内存泄漏。我不确定是否存在泄漏以及如何解决。

CGImageCreateWithJPEGDataProvider 方法主要导致内存泄漏。有时 CGDataProviderCreateWithData 也会导致内存泄漏。但我不知道为什么。

A类中的泄漏方法如下：

```
- (ResultHolder *)decodeData:(UInt8 *) data withOffset:(int) offset {

    const int length = [IOUtilities byteArrayToIntWithData:data Offset:offset+18];
    UInt8 *buffer = malloc(length*sizeof(UInt8));
    memcpy(buffer, data+offset+22, length);

    // sometimes memory leak in this line
    CGDataProviderRef jpgDataProvider = CGDataProviderCreateWithData(NULL, buffer, length, freeData);

    // mainly memory leak in this line.
    CGImageRef image = CGImageCreateWithJPEGDataProvider(jpgDataProvider, NULL, true, kCGRenderingIntentSaturation);

    CGDataProviderRelease(jpgDataProvider);        
    ResultHolder *result = [[ResultHolder alloc] initWithCGImage:image];//sometimes memory leaks in this line.
    CGImageRelease(image);
    return result;
} 
```

还有一些其他相关的方法：

```
// class A free buffer callback.
void freeData(void *info, const void *data, size_t size) {
    free((void *)data);
}
// class ReslutHolder init and dealloc.
- (id)initWithCGImage:(CGImageRef)image {
    if (self = [super init]) {
        CGImageRetain(image);

        //sometimes memory leak in this line.
        mBitmap = CGImageCreateCopy(image);

        mWidth = CGImageGetWidth(image);
        mHeight = CGImageGetHeight(image);
        CGImageRelease(image);
    }
    return self;
}

- (void)dealloc {
    if (mBitmap != NULL) {
        CGImageRelease(mBitmap);
        mBitmap = NULL;
    }
} 
```

我在 dealloc 中释放 mBitmap。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:53:35.097

您可以使用分析器分析 Xcode 中的内存泄漏，如下所示

![截图1](../Images/d14cd24d5a9e852045d6e61db799e52d.png)

提及如下所示的内存泄漏将有助于进一步解决您的问题

![截图2](../Images/e177a09688b9a25ce7c77a2115f27389.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:02:14.533

您应该释放为缓冲区分配的内存。

```
free(buffer); 
```

# c# - 如何指示 Json.NET 在不访问序列化程序的情况下将接口类型转换为具体类型？

> ID：12211161
> 
> 赞同：1
> 
> 时间：2012-08-31T07:59:01.100
> 
> 标签：c#, .net, json, serialization, json.net

我的问题是我需要将 JSON 反序列化为包含接口类型对象的类型，因此需要指示 Json.NET 如何转换该接口类型，但不能`Newtonsoft.Json.Deserializer`直接控制。反序列化由框架代码间接处理，即[HttpContent.ReadAsAsync<T>](http://msdn.microsoft.com/en-us/library/hh944541%28v=vs.108%29.aspx)。

如何指定从接口类型到具体类型的转换，而不能`JsonSerializer.Converters`直接添加转换器？如果我`[JsonConverter]`在接口定义上使用该属性，则转换器也会被调用以实现接口（即，我要转换为的具体类型）。

下面的代码显示了一个 C# 控制台程序，它尝试将相同的 JSON 反序列化为首先是`Parent2`类，然后是`Parent1`类，指示 Json.NET 将`IChild1`接口`Child1`类型通过`JsonConverterAttribute`. `Parent2`自从我`ChildConverter`直接添加 to后，反序列化就可以工作`serializer.Converters`，而反序列化 to`Parent1`会导致堆栈溢出异常，因为即使是针对该类型`ChildConverter.Deserialize`也被调用。`Child1`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Newtonsoft.Json;
using System.IO;

namespace TestConsole
{
    [JsonConverter(typeof(ChildConverter))]
    interface IChild1
    {
        string Name { get; set; }
    }

    class Child1 : IChild1
    {
        public string Name { get; set; }
    }

    class Parent1
    {
        public IEnumerable<IChild1> Children { get; set; }
    }

    interface IChild2
    {
        string Name { get; set; }
    }

    class Child2 : IChild2
    {
        public string Name { get; set; }
    }

    class Parent2
    {
        public IEnumerable<IChild2> Children { get; set; }
    }

    class ChildConverter : JsonConverter
    {
        public override bool CanConvert(Type objectType)
        {
            return objectType == typeof(IChild1) || objectType == typeof(IChild2);
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            if (objectType == typeof(IChild1))
                return serializer.Deserialize<Child1>(reader);
            return serializer.Deserialize<Child2>(reader);
        }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            throw new NotImplementedException();
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var json = "{'Children': [{'Name': 'Child1'}, {'Name': 'Child2'}]}";

            var serializer = new JsonSerializer();

            serializer.Converters.Add(new ChildConverter());
            var obj = serializer.Deserialize(new StringReader(json), typeof(Parent2));

            serializer = new JsonSerializer();
            obj = serializer.Deserialize(new StringReader(json), typeof(Parent1));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:39:04.037

我找到了解决我的特定问题的方法，即调用[HttpContent.ReadAsAsync<T>](http://msdn.microsoft.com/en-us/library/hh944541%28v=vs.108%29.aspx)并让其反序列化 JSON 响应。虽然我的解决方案不能解决在不访问序列化程序的情况下配置 Json.NET 类型转换的一般问题，但它确实解决了我的特定问题。我发现`HttpContent.ReadAsync<T>`接受一个`IEnumerable<MediaTypeFormatter>`, 用于反序列化响应。在这里可以传递一个`JsonMediaTypeFormatter`，它已根据您`JsonConverter`的选择进行配置（在我的示例中，`ChildConverter`）。

```
var formatter = new JsonMediaTypeFormatter();
formatter.SerializerSettings.Converters.Add(new ChildConverter());
var obj = await resp.Content.ReadAsAsync<T>(new MediaTypeFormatter[] {formatter}); 
```

# c# - LINQ to SQL：错误“SQL 中的值没有文字：00:00:00”使用可为空的 TimeSpan

> ID：12211167
> 
> 赞同：1
> 
> 时间：2012-08-31T07:59:16.873
> 
> 标签：c#, linq-to-sql

我已经定义了以下模型

```
 public class TodayOrder
{
    public string ID_ORIG { get; set; }
    public string PART_ID { get; set; }
    public string PART_DEX { get; set; }
    public double TimeSecs { get; set; }
 } 
```

现在我正在尝试使用以下 Linq 表达式填充列表：

```
var todaysOrders = DCC.vw_ORD_GP_volumes_lastSets
 .Where(a => a.ID_ORIG == id_orig.ToUpper() && 
             a.PART_ID == Part.ToUpper())
 .Select(a => 
     new TodayOrder{ 
         ID_ORIG = a.ID_ORIG, 
         PART_ID = a.PART_ID, 
         PART_DEX = a.PART_DEX,  
         TimeSecs = a.ReqTime.GetValueOrDefault().TotalSeconds });

List<TodayOrder> lst = todaysOrders.ToList(); 
```

其中 ReqTime 的类型为`TimeSpan?`。

问题是在运行时我收到一个错误**Value has no literal in SQL: 00:00:00** - 看起来 TimeSpan 有问题。

```
 Line 72:                     });
 Line 73:   ERROR>              lst = todaysOrders.ToList();
 Line 74:  
 [InvalidOperationException: Value has no literal in SQL: 00:00:00]
  System.Data.Linq.SqlClient.Visitor.FormatValue(Object value) +584911
  System.Data.Linq.SqlClient.Visitor.VisitValue(SqlValue value) +32 
```

事实上，如果我注释掉设置属性 TimeSecs 的行，一切正常。

实例化 TodayOrder 类实例的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:09:36.660

问题是 Linq-to-Sql 将表达式转换`a.ReqTime.GetValueOrDefault().TotalSeconds`为 sql 但它失败了。

您可以通过在选择之前使用 a 评估查询并`ToArray()`在客户端执行选择来解决它：

```
var todaysOrders = DCC.vw_ORD_GP_volumes_lastSets
 .Where(a => a.ID_ORIG == id_orig.ToUpper() && 
             a.PART_ID == Part.ToUpper())
 .ToArray()
 .Select(a => 
     new TodayOrder{ 
         ID_ORIG = a.ID_ORIG, 
         PART_ID = a.PART_ID, 
         PART_DEX = a.PART_DEX,  
         TimeSecs = a.ReqTime.GetValueOrDefault().TotalSeconds }); 
```

# oop - NodeJS defineClass - 嵌套类

> ID：12211168
> 
> 赞同：0
> 
> 时间：2012-08-31T07:59:40.053
> 
> 标签：oop, node.js

首先，我对 OOP 和 NodeJS 都很陌生。到目前为止，我对课程的唯一经验是 PHP。

我正在尝试使用 NPM 中的 defineClass 模块创建一个名为 Clients 的 javascript 类。然后我想给它添加子类，功能更多。我想要子类中的一些功能的原因是因为它们中的一些可能具有相当多的功能。

这是我的代码：

```
var defineClass = require("defineClass").defineClass

var Client = defineClass({
  scpConnected: false,

  constructor: function (socketId) {
    this.id = socketId;
  },

  test: function (test){
    console.log('Test!!! '+ test); 
  }
});

var SSH = defineClass({
  _super: Client,
  connected: false,
  busy: false,
  buffer: '',

  constructor: function () {
    queue = [];
  },

  ssh: {
    connect: function (IP) {
      console.log('Connecting to '+ IP +'...');
    }
  }
});

var client = new Client('Test');
client.ssh.connect(); 
```

似乎“客户端”没有像我预期的那样获得 SSH 功能。

我在这里做错了什么？:)

**新代码**

```
var defineClass = require("defineClass").defineClass

var Client = defineClass({
  scpConnected: false,

  constructor: function (socketId) {
    this.id = socketId;
  },

  test: function (test){
    console.log('Test!!! '+ test); 
  },

  SSH: defineClass({  
      connected: false,
      busy: false,
      buffer: '',

      constructor: function () {
        queue = [];
      },

      connect: function (IP) {
        console.log('Connecting to '+ IP +'...');
      }
    })
});

var client = new Client('Test');
client.SSH.connect('test'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:32:51.647

正如我在您的示例中看到的那样，您实际上是在创建 Client 实例而不是 SSH：

```
 var client = new Client('Test');
 client.ssh.connect(); 
```

你应该写：

```
 var client = new SSH('Test');
 client.ssh.connect(); 
```

请注意，父类没有其子类的功能，这违背了继承的思想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:16:39.227

继承显然存在一些问题。

考虑以下 PHP 示例（对应于您的代码）：

```
<?php

class Client {
    public function __construct($socketId) {
        $this->id = $socketId;
    }
}

class SSH extends Client {
    public function __construct() {
        $this->queue = new Array();
    }

    public $ssh = "whatever";
}

$client = new Client('Test');
//What is the $client->ssh now?

?> 
```

# internet-explorer - IE中的窗口拖动问题

> ID：12211173
> 
> 赞同：9
> 
> 时间：2012-08-31T08:00:07.113
> 
> 标签：internet-explorer, extjs, window, extjs4, draggable

ExtJS 4

我希望我的 Ext.Window 被拖到浏览器边界之外。所以我删除了浏览器的滚动条

```
document.documentElement.style.overflow = 'hidden';  // firefox, chrome
document.body.scroll = "no"; // ie only 
```

在 Firefox 中它的工作正常。但是在 IE 中，每当我将窗口拖到外面时，它都会再次在浏览器窗口中捕捉。

```
I want this (case 1)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
|                            |
|                            |
|                            |
|                            |
|                            |
|                            |
|                       --window----
|                       |  A |   B |
|                       -----+------
|                            |
|                            |
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

A = 可见部分

B = 裁剪部分

```
But this is happening in IE8 (case 2)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
|                            |
|                            |
|                            |
|                            |
|                            |
|                            |
|                  --window--|
|                  |        ||
|                  ----------|
|                            |
|                            |
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

请告诉我为什么会这样。如何纠正这个？

**编辑：**

这是我正在使用的完整代码。它在 firefox 中表现为 case 1（这是必需的），但在 IE 中表现为 case 2。

```
<html>
<head>
    <title>Page5 (Window)</title>

    <link rel="stylesheet" type="text/css" href="../resources/css/ext-all.css"> 
    <script type="text/javascript" src="../ext-all.js"></script>
    <script type="text/javascript">

    Ext.onReady(function(){
        document.documentElement.style.overflow = 'hidden';  // firefox, chrome
        document.body.scroll = "no"; // ie only
        Ext.create('Ext.Window', {
            title: 'Title',
            html: 'html',
            height: 300,
            width: 300
            //constrainHeader: true
        }).show();
    });
    </script>
</head>
<body background="Water lilies.jpg" ></body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:54:10.370

It works if your window is inside some ExtJS container like Viewport or Panel. See code below :

```
Ext.onReady(function() {
    document.documentElement.style.overflow = 'hidden'; // firefox, chrome
    document.body.style.overflowX = 'hidden';
    document.body.style.overflowY = 'hidden';
    //  document.body.style.position = 'relative';
    document.body.scroll = "no"; // ie only
    Ext.create('Ext.Viewport', {
        title : 'Test Panel',
        width : 1000,
        height : 700,
        items : [ {
             id : 'mywin',
             title : 'Title',
             html : 'html',
             height : 300,
             width : 300
        } ]
    });
    Ext.getCmp('mywin').show();
}); 
```

You can contain it in a Panel also... if the panel is smaller than the browser's view, the window scrolls outside the panel and on reaching the browser boundaries behaves like you want it to.

Check out [this](http://www.defusion.org.uk/archives/2007/04/02/when-overflow-hidden-doesnt-hide-in-ie/). I was not able to change the body's position type and get this working. May be you can try it out.

# samsung-mobile - 三星 Galaxy Tab 2 7" gt p3110

> ID：12211174
> 
> 赞同：0
> 
> 时间：2012-08-31T08:00:11.060
> 
> 标签：samsung-mobile

我刚买了这款装有 Android 4.0.3 的平板电脑，在商店里他们告诉我这个型号有 8GB，当我检查设置时，我只有 4GB。为什么？操作系统是否消耗4gb？我是新手，对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:04:27.103

这是 Stack Overflow 的话题。

但要回答您的问题，引用的 8GB 是原始硬盘大小。即在驱动器格式化和操作系统安装之前。

当驱动器格式化和操作系统安装发生时，用户可用的存储空间通常要少得多。

话虽如此，损失50％似乎很多。

# iphone - 应用程序在设备上运行和安装的时间过长

> ID：12211175
> 
> 赞同：0
> 
> 时间：2012-08-31T08:00:22.690
> 
> 标签：iphone, ios, ios5, xcode4.2

我有一个应用程序正在开发相当长的一段时间。我遇到了奇怪的行为，当我在模拟器上运行时，它需要几秒钟，但是当我在设备或“构建存档”或“存档”上运行时，进度条慢慢移动，直到它接近完成的 94-95%并在那里停留约 5-7 分钟。我正在使用开发人员配置文件进行配置。可能是什么问题？

我的资源中有大约 200 张图片。但我不认为它太多，对于一个大应用程序来说是不正常的。IPA 大小约为 9.4 MB，完整的包大小约为 40MB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:07:09.520

该设备将对每个文件执行 I/O 操作，因此 200 个 1M' 文件比一个 200M' 文件需要更多时间。

# ios - Nimbus NIPagingScrollViewPage 如何从 nib 加载？

> ID：12211178
> 
> 赞同：1
> 
> 时间：2012-08-31T08:00:58.897
> 
> 标签：ios, ios5, nimbus-ios

当我从 NIPagingScrollViewPage 的子类中的 nib 加载视图时，视图渲染得很好，但是当我向后滑动以转到我已经看到的视图时，该视图滑入然后消失。我不确定是什么原因造成的，而且很可能是我做错了什么。

在我的 NIPagingScrollViewPage 子类中，我有以下方法：

```
- (id)initWithReuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithFrame:CGRectZero]; 
    if (self) {
        [[NSBundle mainBundle] loadNibNamed:@"EventPageView" owner:self options:nil];
        [self addSubview:self.eventView];
        label = [[UILabel alloc] initWithFrame:self.bounds];
        label.autoresizingMask = UIViewAutoresizingFlexibleDimensions;
        [self addSubview:label];
    }
    return self;
} 
```

使用此代码，NiPagingScrollView 中的每个视图都从 nib 加载自定义视图，并添加我以编程方式添加的额外标签。当我在视图中向前滑动时，它们都得到了很好的渲染，但是当我滑动回我已经看到的视图时，它们会闪烁并消失。但是，如果我注释掉这两行：

```
[[NSBundle mainBundle] loadNibNamed:@"EventPageView" owner:self options:nil];
[self addSubview:self.eventView]; 
```

我以编程方式添加的标签显示得很好。我可能会忽略一些东西吗？

# iphone - iphone中的RTSP流

> ID：12211182
> 
> 赞同：-2
> 
> 时间：2012-08-31T08:01:08.570
> 
> 标签：iphone, ios, media-player, rtsp

我很震惊，没有人告诉我如何`RTSP`在 iPhone 中运行我想要运行源代码。

这意味着没有人知道`RTSP`iPhone 中的游戏。另一方面，iTunes商店中有各种可用的应用程序，例如`http://itunes.apple.com/in/app/oplayer-lite-best-free-video/id385907472?mt=8`

如果世界上有任何聪明的人，请告诉我。

我很感激。：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:25:36.533

这究竟是个什么样的问题？？

有一些 rtsp 的开源库。

iPhone 不是为 rtsp 设计的，Apple 宁愿你使用 http 流格式，所以要让它工作需要一些研究和努力。

[https://github.com/mooncatventures-group](https://github.com/mooncatventures-group)

# jquery - JQuery .post() 麻烦

> ID：12211184
> 
> 赞同：0
> 
> 时间：2012-08-31T08:01:13.333
> 
> 标签：jquery, post, load

由于函数，我有一个 jQuery`$.post()`函数问题（我认为）`load()`。

通常，我有一个`index.php`，它有 3 个 div 区域，一个用于标题，一个用于子标题，最后一个用于页面内容。

我正在加载一些带有 jQ​​uery`load()`函数的页面`index.php`。当我正在加载一个页面时，正在加载的页面也在发布（带有`$.post()`）一些信息到另一个具有某些功能的页面。

（我将信息发布到`news_function.php`from `news.php`）

```
-news(folder)
    -news_function.php
-index.php
-news.php 
```

问题是我无法将信息发布到`news_function.php`. 当我查看 Chrome 的控制台时，我看到了`news_function.php`“页面内容区域”中的代码。

我也尝试了表单中的操作方法，但没有奏效！该`load()`功能是否危险？或者`$.post()`由于所有代码都在运行，该功能可能无法将有价值的信息发送到另一个页面`index.php`？

# c# - 如何重新格式化它以使用其他类型的 LINQ 查询格式？

> ID：12211185
> 
> 赞同：0
> 
> 时间：2012-08-31T08:01:14.363
> 
> 标签：c#, linq

我有以下代码：

```
public IList<Reference.Grid> GetGrid(string pk)
{
    return (
        from d in _referenceRepository.GetPk(pk)
        select new Reference.Grid
        {
            PartitionKey = d.PartitionKey,
            RowKey = d.RowKey,
            Value = d.Value,
            Order = d.Order
        })
} 
```

我是 LINQ 的新手，但我知道有两种方法可以编写选择。有人可以告诉我如何以另一种方式重写它。还有什么区别吗？人们最常使用哪种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:02:23.967

另一种方式如下所示：

```
_referenceRepository.GetPk(pk)
                    .Select(d => new Reference.Grid 
                                 { 
                                     PartitionKey = d.PartitionKey, 
                                     RowKey = d.RowKey, 
                                     Value = d.Value, 
                                     Order = d.Order 
                                 }); 
```

您使用的*查询语法*被编译器翻译成我使用的*方法语法*，因此它们都被编译为相同的 IL。
你应该选择一个你更舒服的。我更喜欢方法语法，因为我发现它更具可读性，但是 YMMV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:03:19.780

您提到的两种方法是方法语法和查询语法。您使用了查询语法。

这在方法语法中是相同的：

```
public IList<Reference.Grid> GetGrid(string pk)
{
    return (
    _referenceRepository.GetPk(pk)
    .Select(d => new Reference.Grid
    {
        PartitionKey = d.PartitionKey,
        RowKey = d.RowKey,
        Value = d.Value,
        Order = d.Order
    })).ToList();
} 
```

请注意，我已将其更改为用于`ToList`创建`List<Reference.Grid>`. 否则它将是一个`IEnumerable<Reference.Grid>`.

> 还有什么区别吗？人们最常使用哪种方式？

使用最易读和最有效的东西。查询语法中不支持某些方法。

[MSDN：LINQ 查询语法与方法语法 (C#)](http://msdn.microsoft.com/en-us/library/bb397947.aspx)

[您更喜欢哪种 LINQ 语法？Fluent 或查询表达式](https://stackoverflow.com/questions/214500/which-linq-syntax-do-you-prefer-fluent-or-query-expression)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T09:14:47.617

为了使其更通用：

```
from item in someSource select new{item.Something}
someSource.Select(item => new{item.Something}

from item in someSource where item.SomeProperty == someValue
someSource.Where(item => new{item.Something}

from item in someSource group item.Property1 by item.Property2
someSource.GroupBy(item => item.Property2, item => item.Property1)

from item in someSource orderby item.Property1
someSource.OrderBy(item => item.Property1)

from item in someSource orderby item.Property1 descending
someSource.OrderByDescending(item => item.Property1) 
```

每个的一些第一种形式都不完整，因为它们需要以 a`select`或 a结尾`group by`。这不适用于第二种形式，因此`.OrderBy`即使您没有在`orderby`. 转换时，请记住，`.Select(x => x)`可以将其添加到每个查询中，并且通过等效性没有逻辑差异，最后一个`orderby descending`添加`select item`到末尾的示例使其成为一个完整的查询，相当于`OrderByDescending`下面给出的查询。

几个加起来：

```
from item in someSource
  where item.Property1 == 43
  orderby item.Property2
  select new {item.Property3, item.Property4}

someSource
  .Where(item => item.Propert1 == 43)
  .OrderBy(item => item.Propert2)
  .Select(item => new{item.Propert3, item.Property4}); 
```

因为每个方法调用都是独立的，我们不需要在 lambda 中使用与第二种类型相同的术语，所以这相当于：

```
someSource
  .Where(x=> x.Propert1 == 43)
  .OrderBy(y=> y.Propert2)
  .Select(z=> new{z.Propert3, z.Property4}); 
```

但是我们不能用第一种形式做到这一点，因为它是一个单独的子句，每个术语只定义一次。因为方法都是扩展，所以也等价于：

```
 Queryable.Select(
    Queryable.OrderBy(
      Queryable.Where(someSource, x => x.Propert1 == 43),
      y=> y.Propert2),
    z=> new{z.Propert3, z.Property4}); 
```

或者

```
 Enumerable.Select(
    Enumerable.OrderBy(
      Enumerable.Where(someSource, x => x.Propert1 == 43),
      y=> y.Propert2),
    z=> new{z.Propert3, z.Property4}); 
```

它适用于任何 .NET 语言，即使不支持该语言的 Linq 或扩展方法。

LinqPad 非常适合以多种方式检查查询（或任何 C# 代码），其中之一是将查询语法转换为等效的方法语法（无论如何，前者编译为后者）。

就个人而言，我发现我经常在两者之间切换。我会支持较大查询的查询语法，如果整个表达式包含的调用比例很高，但没有与那些查询语法等效的调用，我会支持方法语法，但有很多地方只是一个问题我当时输入的任何内容。

# c# - 如果存在以前的版本，如何使 msi 覆盖程序？

> ID：12211193
> 
> 赞同：5
> 
> 时间：2012-08-31T08:01:53.093
> 
> 标签：c#, deployment, setup-project, wizard

我正在使用 Visual Studio 2010，我正在开发一个 Windows 应用程序，并且在尝试为其创建自动更新程序时遇到了一个严重的问题。

当程序找到一个新版本并尝试安装它时，它不能因为两个原因：

**1** - 该应用程序存在于我的程序文件中。这样窗口就会出现 ![在此处输入图像描述](../Images/e5cbf14c76a85b2a54d82ebf78949674.png)

**2** - 应用程序已经打开“ `the form that performed the update process`”。

该问题与版本号没有任何关系。

这是关于程序的存在和安装新版本的能力，尽管以前的版本是打开的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T12:14:40.987

要启用自动[主要升级](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369786%28v=vs.85%29.aspx)机制，您需要增加[ProductVersion](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370859%28v=vs.85%29.aspx)并更改[ProductCode](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370854%28v=vs.85%29.aspx)。这是通过项目属性窗格完成的。

您可以在此处阅读有关升级的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa370579 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370579(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T17:27:56.793

Cosmin 是正确的，但如果您需要更具体的步骤，请尝试按照其他 Stack Overflow 帖子中概述的步骤操作：

*   [如何确保我的 winform 应用程序部署覆盖旧版本？](https://stackoverflow.com/questions/2221762/how-do-i-ensure-my-winform-application-deployment-overwrites-old-versions/19548387#19548387)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:19:25.373

如果您要更新现有程序，这称为修补程序，因此您不需要使用作为安装程序的 MSI，而是请查看 MSP 而不是 MSI。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa370578(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370578%28v=vs.85%29.aspx)

对我们来说——我们使用了一个加载屏幕并连接到一个 SQL 表，该表拥有一个相关的二进制 .DLL 列表。然后，我使用反射来检查与启动目录中的版本号相比的版本号，如果它更新，则替换它 - 这只是另一个想法，但如果您正在考虑使用某种包更新现有软件，请查看进入MSP。

# php - 合并具有重叠年份范围的 PHP 数组值

> ID：12211203
> 
> 赞同：0
> 
> 时间：2012-08-31T08:02:51.627
> 
> 标签：php, arrays, logic

如果我有一个像这样的数组：

```
Array
(
    [0] => Array
        (
            [last_year] => 2006
            [start_year] => 2000
        )

    [1] => Array
        (
            [last_year] => 2008
            [start_year] => 2001
        )

    [2] => Array
        (
            [last_year] => 1998
            [start_year] => 1997
        )
) 
```

有没有办法可以比较数组索引并合并`last_year`它们`start_year`？比如上面的数组经过处理后应该是：

```
Array
(
    [0] => Array
        (
            [last_year] => 2008
            [start_year] => 2000
        )

    [1] => Array
        (
            [last_year] => 1998
            [start_year] => 1997
        )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:16:08.867

我能想到的最好方法是：

```
1)  sort this outer array by start_year.
2)  iterate over the outer array.
  a) If it overlaps with the next array if cur[last_year]>=next[start_year] Then
    set cur[last_year]=next[last_year]
  b) if it doesn't then cur = next and next is get next array. 
```

这未经测试，我有一段时间没有做过 PHP。

```
// You can sort this array however you want, just sort by start_year.
$sortedArray = arr.sort();
$curIndx = 0;
for (int $i=1;$i<len($sortedArray);$i++){
   if ($sortedArray[$curIndx][last_year]>=$sortedArray[$i][start_year]){
      if (sortedArray[$i][last_year]>=sortedArray[$curIndex][last_year]){
          sortedArray[$curIndex][last_year] = sortedArray[$i][last_year];
      }
      unset(sortedArray[$i]);
   } else {
      $curIndx = $i;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:56:43.030

这就是 2AM 编码产生的结果，但似乎有效（可能效率不高）。归功于 ajon 的初始排序提示。

```
function mergeYears($data) {
    usort($data, function($a, $b) { return $a['start_year'] > $b['start_year']; });
    do {
        $hasMerges = false;
        $size = count($data);
        $merged = [];
        for($i = 0; $i < $size - 1; $i++) {
            if ($data[$i+1]['start_year'] >= $data[$i]['start_year'] && $data[$i+1]['start_year'] < $data[$i]['last_year']) {
                if ($data[$i]['last_year'] >= $data[$i+1]) {
                    $lastYear = $data[$i]['last_year'];
                } else {
                    $lastYear = $data[$i+1]['last_year'];
                }
                $merged[] = ['start_year' => $data[$i]['start_year'], 'last_year' => $lastYear];
                $hasMerges = true;
            } else {
                $merged[] = $data[$i];
            }                    
        }
        $data = ($hasMerges) ? $merged : $data;
    } while ($hasMerges);
    return $data;
} 
```

[http://viper-7.com/y7TJH5](http://viper-7.com/y7TJH5)

编辑：简化代码

```
function mergeYears($data) {
    usort($data, function($a, $b) { return $a['start_year'] > $b['start_year']; });
    for($i = 0; $i < count($data) - 1; $i++) {
        if ($data[$i+1]['start_year'] >= $data[$i]['start_year'] && $data[$i+1]['start_year'] < $data[$i]['last_year']) {
            $lastYearIndex = ($data[$i]['last_year'] >= $data[$i+1]['last_year']) ? $i : $i + 1;
            $merged = [
                'start_year' => $data[$i]['start_year'],
                'last_year' => $data[$lastYearIndex]['last_year']
            ];
            array_splice($data, $i, 2, [$merged]);
            $i--;
        }
    }
    return $data;
} 
```

1.  首先按 start_year 排序
2.  循环计数 - 1 个项目
3.  如果下一项的 start_year >= 当前索引的 start_year 并且下一项的 start_year < 比当前索引的 start_year
    *   使用两者中较大的 last_year 创建这两个项目的合并数组
    *   使用 array_splice 删除 2 项并替换为合并的
    *   将索引设置回 1 以检查新合并年份与下一项
4.  返回新合并的年份数组

# powershell - 在 Where-Object 中附加多个参数

> ID：12211205
> 
> 赞同：0
> 
> 时间：2012-08-31T08:02:57.977
> 
> 标签：powershell, config

在我的设计中，遇到一个问题，就是：

在数据库中，表格A，我定义了一个变量名“MyParams”，它的值是“1,2,3”，或者“2,3,5”或者“5,6,9”，即变量将根据业务逻辑进行更改。

在powershell中，下面的脚本会处理一些被~分割的文本，它会检查从数据库中的变量“MyParams”中提取的列是否为空，如果有空值的列，它将排除这条记录。

```
 Get-Content "${myFile}.tmp" | Where-Object { $_.Split("~")[1] -ne "" -and $_.Split("~")[2] -ne "" -and $_.Split("~")[3] -ne ""  }|Out-File $myFile -Encoding ASCII 
```

这里，$ *.Split("~")[1] $* .Split("~")[2] $_.Split("~")[3] 中的数字 (1,2,3) 来自变量 " MyParams”，在数据库中配置。

我的问题是，MyParams 的值经常变化，我怎样才能起源我上面的代码来调整这个？

我想也许我需要使用 foreach-object 内部 Where-object ，正确的？任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:46:24.827

假设`$myparams`是一个数组，如`1,2,3`：

```
Get-Content "${myFile}.tmp" | %{$splitted = $_ -split "~"; if(!($myparams | ?{$splitted[$_] -eq ""})){$_} } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T06:54:17.837

我有同样的问题，发现您需要像这样使用脚本块语法：

```
Get-Module -ListAvailable | where {($_.Name -notlike "Microsoft*" -and $_.Name -notlike "PS*") -and $_.HelpInfoUri} 
```

这使您可以访问 PowerShell 可用的标准[逻辑运算符](http://technet.microsoft.com/library/hh847789.aspx)，而不是仅限于从`Where-Object`.

请参阅[此 TechNet 文章](http://technet.microsoft.com/en-us/library/hh849715.aspx)中的**示例 7**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T02:59:05.527

好吧，我自己解决了，我使用 -and 组合所有参数并返回布尔值，经过测试，这行得通。下面的代码示例可能不起作用，您需要将其格式化为一行，删除多余的空格。

```
Get-Content "${sftpFile}.tmp2" | ForEach-Object {
$line = $_.Split("~");
$columnOverseeCount = $columnsOverseeList.Count;
if($columnOverseeCount -eq 0)
{
    if (($line[4] -ne ""))
    {
    [String]::Join("~", $line);
    }
}
else
{
    $columnOverseeFlag = $true;
    foreach($columnOverseeValue  in $columnsOverseeList)
    {
        $columnOverseeFlag = $columnOverseeFlag -and  ($line[$columnOverseeValue] -ne "");
    };
    if(($line[4] -ne "") -and $columnOverseeFlag)
    {
        [String]::Join("~", $line) | Out-File -Append $sftpFile -Encoding ASCII
    }
    else
    {
        [String]::Join("~", $line) | Out-File -Append "${sftpFile}.filterByColumns" -Encoding ASCII
    }
} 
```

}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T17:15:28.407

放入`$myParams`一个变量，然后在其中使用它`Where-Object`

```
$myParams = "1,2,3"
$indexes = [int[]] $myParams.Split(',')

Get-Content "${myFile}.tmp" | Where-Object {
  $_.Split("~")[$indexes[0]] -ne "" -and 
  $_.Split("~")[$indexes[1]] -ne "" -and 
  $_.Split("~")[$indexes[2]] -ne ""  } | Out-File $myFile -Encoding ASCII 
```

# azure - 自动扩缩器存储客户端错误

> ID：12211210
> 
> 赞同：1
> 
> 时间：2012-08-31T08:03:20.957
> 
> 标签：azure

我在设置 Autoscaler 时收到 storageclient dll 不匹配错误（随机，并非总是如此）。缓存预览合并（替换 appfabric 缓存）后出现此问题。绑定重定向仍然存在，但我偶尔会收到此错误。有一种方法可以解决它。删除 dll 并再次从同一位置添加它！但是每次自动缩放器失败时都这样做是不可能的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:43:38.517

我最近看到与其他合作伙伴完全相同的错误。我们在那里所做的是在您的机器上 CLEAN 安装[Microsoft Enterprise Library 5.0 Integration Pack for Windows Azure](http://www.microsoft.com/en-us/download/details.aspx?id=28189)并在应用程序更新后添加作为参考以使用预览缓存功能。正如您所提到的，您在尝试更新缓存后遇到问题，希望问题能够得到解决。

# linux - Crontab : 更好地制作 10 个 cron 或 1 个 cron 调用 10 个文件？

> ID：12211211
> 
> 赞同：0
> 
> 时间：2012-08-31T08:03:21.460
> 
> 标签：linux, crontab

我使用 crontab 很长时间了，我想知道是制作 10 个 cron 还是制作 1 个 cron 调用 10 个文件更好？

我的 cron 任务如下所示：

```
*/1 * * * * wget -o /dev/null -O /dev/null "http://localhost/website1/task.php"
...
*/1 * * * * wget -o /dev/null -O /dev/null "http://localhost/website20/task.php" 
```

我总共完成了 40 或 50 个 cron 任务（都在不同的时间间隔调用 localhost 上的某些页面）

所以我想知道只做一个任务调用一个文件是否更好，该文件将包含我的 20 个网站的 php 文件，例如：

cron 任务 n1 =>

```
*/1 * * * * wget -o /dev/null -O /dev/null "http://localhost/call_task.php" 
```

用“call_task.php”要求：

```
http://localhost/website1/task.php
to
http://localhost/website20/task.php 
```

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:09:42.337

这两种方法都可以，但我总是会尝试将文件组合在一起。这使得管理您的 cron 作业变得更加容易。

您还可以为您的工作创建 shell 脚本，例如：

```
hourly.sh:
wget "http://my/hourly/url1"
wget "http://my/hourly/url2"

15minutes.sh:
wget "http://my/15minutes/url1"
wget "http://my/15minutes/url2" 
```

...并将这些设置在您的 cronjob 中：

```
0 * * * * * sh hourly.sh
0,15,30,45 * * * * sh 15minutes.sh 
```

通过这种方式，您可以轻松管理您的脚本，您可以跟踪以何种频率下载什么，并使您的 crontab 保持小且易于管理。

# css - IE9 问题边框半径和线性渐变

> ID：12211213
> 
> 赞同：4
> 
> 时间：2012-08-31T08:03:38.173
> 
> 标签：css

我已经使用 CSS PIE 和过滤器来克服带有 CSS 的 IE9 中的边框半径和线性渐变问题，但我对结果并不满意。有没有办法用线性渐变实现边界半径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T08:09:40.330

是的：使用 SVG 背景图像在 IE9 中实现线性渐变。

一些在线梯度生成器将在其输出中提供此选项。参见例如[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)（选中结果复选框下方的“IE 9 支持”复选框）。

值得庆幸的是，SVG 背景在 IE 9 中被裁剪`border-radius`，这与使用`filter`.

# hibernate - 来自 pojo 类的休眠表

> ID：12211214
> 
> 赞同：2
> 
> 时间：2012-08-31T08:03:38.943
> 
> 标签：hibernate, pojo

我想知道是否有人可以提供帮助。

我有一个正在处理的类结构，我想从这些类生成 sql 表和映射文件。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:35:47.387

是的你可以。你需要：

1.  hibernate.cfg.xml 与这一行

    在此处创建更多信息：[Hibernate hbm2ddl.auto 可能的值以及它们的作用？](https://stackoverflow.com/questions/438146/hibernate-question-hbm2ddl-auto-possible-values-and-what-they-do) 在这里：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

2.  您需要映射类：有两种方法：使用注释或 hbm 文件。这里有一些关于映射：[http](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html) ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html 。

在映射中，您需要描述名称表、目录和（如果需要）列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:12:17.657

是不可能的。Hibernate 不包含这样的工具。这也不是那么直接的操作，因为工具不需要信息。例如对于下面的类，没有办法确定应该`field1`或`field2`应该是主键，或者表应该有复合键：

```
public class SomeClass {
    private int field1;
    private int field2;        
...
} 
```

# c++ - C++ SDL 帧率脉冲

> ID：12211220
> 
> 赞同：4
> 
> 时间：2012-08-31T08:04:07.543
> 
> 标签：c++, sdl, frame-rate

最近，我一直在为自己使用一些 SDL 包装器，但我遇到了一个问题，自从我第一次开始使用 SDL 库以来就一直存在问题。

看，像许多其他人一样，我一直在使用类似于[http://lazyfoo.net/SDL_tutorials/lesson14/index.php](http://lazyfoo.net/SDL_tutorials/lesson14/index.php)的计时器来调节我的帧速率，并且运动永远不会顺畅。它看起来不像是双缓冲或垂直同步问题，而是运动很流畅，但会周期性地跳跃和卡顿（实际上它有一定的脉搏和节奏）。每当帧速率调节关闭时，脉冲就会消失——当然，一切都会变得不可用）所以我很确定它与它有关。

我已经组装了一个小应用程序，它只包含计时器和一个围绕它移动的红色方块。我会把代码放在这篇文章的最后。代码是垃圾，没有使用任何类型的精灵或任何东西：只要知道无论我给它施加多少压力（例如，添加更多移动的东西或只是更新屏幕的一部分），它都会出现相同的口吃。我尝试了不同的帧速率设置，并且总是出现脉冲（只是使用不同的“节奏”）。不用说我已经在几台机器（Linux机器，所有机器）上尝试过这个。

无论如何，我一直在阅读并看到其他人遇到这个问题，但没有真正的答案。一方面，我有关于 delta 计时技术的知识，并且很乐意尝试它，但我的问题在于这个非常简单的应用程序中的计时器本身。为什么会结巴？。SDL_GetTicks 的精度和准确性有问题吗？我能做些什么来改善它？

所以，这里是那些想要尝试它的人的代码：

```
#include <SDL/SDL.h>

class fps_control
{
    private:

    bool apply;
    Uint32 ticks_frame_count;
    Uint32 ticks_frame_end;
    Uint32 ticks_frame_begin;
    Uint32 diff;
    unsigned int frame_count;   //Visible to the outside
    unsigned int frame_count_inner; //Keeps count until a second has passed, then overwrites former to give the elapsed frames in a second.
    unsigned int frame_length;
    unsigned int desired_framerate;

    private:

    void calculate_frame_length()
    {
        this->frame_length=1000 / this->desired_framerate;  
    }

    public:

    fps_control(unsigned int p_f=30):desired_framerate(p_f), apply(true), ticks_frame_count(0), ticks_frame_end(0), ticks_frame_begin(0), diff(0), frame_count(0), frame_count_inner(0), frame_length(0)
    {
        this->calculate_frame_length();
    }

    unsigned int get_frame_count() const {return this->frame_count;}
    unsigned int get_desired_framerate() const {return this->desired_framerate;}
    void framerate_increase(){this->set_framerate(this->desired_framerate+1);}
    void framerate_decrease(){this->set_framerate(this->desired_framerate+1);}
    void set_framerate(unsigned int p_param)
{
this->desired_framerate=p_param;
this->calculate_frame_length();
}
    void toggle_apply() {this->apply=!this->apply;}

    void init()
    {
        //Call this once before starting, to set the beginning frame count to the initial values.

        this->ticks_frame_count=SDL_GetTicks();
        this->ticks_frame_begin=this->ticks_frame_count;
        this->frame_count_inner=0;
        this->frame_count=0;
    }

    void turn()
    {
        //Call this when all drawing and logic is done.

        if(!this->apply) return;    //Only apply when asked for.

        //Ask for time before drawing and logic to calculate the difference. Add a frame.

        this->ticks_frame_end=SDL_GetTicks();
        this->frame_count_inner++;

        //Whenever a second has passed, update the visible frame count.
        if( (this->ticks_frame_end - this->ticks_frame_count) > 1000)
        {
            this->frame_count=this->frame_count_inner;
            this->frame_count_inner=0;
            this->ticks_frame_count=SDL_GetTicks();
        }

        //Calculate difference and apply delay when needed.

        this->diff=this->ticks_frame_end - this->ticks_frame_begin;

        if(this->diff < this->frame_length) SDL_Delay(this->frame_length-this->diff);

        //Get the beginning time and start again.
        this->ticks_frame_begin=SDL_GetTicks();
    }
};

class Box
{
    private:

    SDL_Rect position;
    int movement_x;
    int movement_y;

    public:

    Box():movement_x(4), movement_y(4)
    {
        this->position.x=100;
        this->position.y=100;
        this->position.w=30;
        this->position.h=30;
    }

    SDL_Rect get_position() {return this->position;}

    void move_around()
    {
        //Won't touch the edges, but doesn't really matter.

        if(this->position.x<=0 || this->position.x>=800-this->position.w) this->movement_x=-this->movement_x;
        if(this->position.y<=0 || this->position.y>=600-this->position.h) this->movement_y=-this->movement_y;

        this->position.x+=this->movement_x;
        this->position.y+=this->movement_y;
    }
};

bool init_sdl(){return SDL_Init( SDL_INIT_VIDEO ) >= 0;}
void quit_sdl(){SDL_Quit();}
void fill_screen(SDL_Surface * screen)
{
    SDL_FillRect(screen, NULL, SDL_MapRGB(screen->format,0,0,0));
}

void update_screen(SDL_Surface * screen, Box& box)
{
    SDL_Rect b=box.get_position();
    SDL_FillRect(screen, &b, SDL_MapRGB(screen->format, 200, 20, 20));
    SDL_Flip(screen);
}

int get_input()
{
    SDL_Event event;

    while(SDL_PollEvent(&event))
    {   
        if(event.type==SDL_QUIT) return 1;
        else if(event.type==SDL_KEYDOWN)
        {
            switch(event.key.keysym.sym)
            {
                case SDLK_ESCAPE: return 1; break;
                case SDLK_SPACE: return 2; break;
                case SDLK_UP: return 3; break;
                case SDLK_DOWN: return 4; break;
                default: break;
            }
        }
    }

    return 0;
}

int main(int argc, char **argv)
{
    if(!init_sdl())
    {
        return 1;
    }
    else
    {
        //Init things...

//      SDL_Surface * screen=SDL_SetVideoMode(800, 600, 16, SDL_DOUBLEBUF | SDL_HWSURFACE); /*SDL_SWSURFACE | SDL_ANYFORMAT);*/
        SDL_Surface * screen=SDL_SetVideoMode(800, 600, 16, SDL_SWSURFACE | SDL_ANYFORMAT);
        Box box=Box();
        fps_control fps=fps_control(60);    //Framerate is set to 60.
        bool run=true;
        int input=0;

        SDL_FillRect(screen, NULL, SDL_MapRGB(screen->format,255,0,0));

        //Main loop

        fps.init();

        while(run)
        {
            input=get_input();

            switch(input)
            {
                case 1: run=false; break;   
                case 2: fps.toggle_apply(); break;
                case 3: fps.framerate_increase(); break;
                case 4: fps.framerate_decrease(); break;
                default: break;
            }

            box.move_around();
            fill_screen(screen);
            update_screen(screen, box);
            fps.turn();
        }

        quit_sdl();
    }
} 
```

它是自包含的（同样是纯垃圾），因此只需将其与 SDL 链接并尝试一下……您在这里看到任何口吃的脉冲吗？

我会尝试应用增量时间来查看问题是否消失。我只想知道为什么在如此简单的应用程序中会发生这种情况。非常感谢。

编辑：最后一件事，我知道我可能根本不应该使用 SDL_Delay （关于系统睡眠*至少*要求的值），但我真的对看似强大的机器上的这种行为感到困惑。

编辑：更正了“set_framerate”，感谢 Yno 的评论。

编辑 2：由于我将所有代码更改为使用增量时间值而不是设定的帧速率，所以一切都变得更好了。我仍然会遇到一些周期性的减速（这次是每四十秒一次），但我可以将这些归咎于系统，因为帧速率和减速因我使用的 Linux 桌面（比如 Gnome、Unity、Gnome2d ......）而异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:46:04.257

您的类 fps_control 根本无法完成这项工作，它完全是错误的。`framerate_decrease()`函数错误：

```
void framerate_decrease(){this->set_framerate(this->desired_framerate+1);} 
```

它应该在`-1`这里。`calculate_frame_length()`每次更改所需的 FPS 时都应调用，即更改为`set_framerate()`：

```
void set_framerate (unsigned int p_param) {
    desired_framerate = p_param;
    calculate_frame_length ();
} 
```

还要小心你的除法`calculcate_frame_length()`，你可能会被零除：

```
void framerate_decrease() {
    if (desired_framerate > 1)
        set_framerate (desired_framerate - 1);
} 
```

除了这些问题之外，您的课程看起来毫无用处的复杂。如果你想限制你的帧率，你必须了解它是如何计算的。通常的方法是使用以下方法计算帧所需的时间`SDL_GetTicks()`：

```
int t;
while (run) {
    t = SDL_GetTicks ();
    // ...
    t = SDL_GetTicks () - t;
} 
```

在循环结束时，`t`是您的帧完成的毫秒数。`1000 / t`因此是您的每秒帧数。如果您的帧速率太高（即 t 太小），您必须通过调用来填补当前帧时间和所需帧时间之间的空白`SDL_Delay()`。说`FPS`是你的 FPS 限制，每帧应该花费的时间是`1000 / FPS`.

```
int t;
while (run) {
    t = SDL_GetTicks ();
    // ...
    t = SDL_GetTicks () - t;

    // if the framerate is too high
    if (t < 1000 / FPS) {
        // compute the difference to have a total frame time of 1000 / FPS
        SDL_Delay ((1000 / FPS) - t);
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T06:51:49.953

我不知道您的 SDL 代码是怎么回事，但如果它有任何用处，我刚刚编写了一个使用 GLFW 的 FpsManager 类，该类限制为高端值并提供时间增量以保持运动一致，而不管帧速率如何。原则将是相同的。

这不是有史以来最好的代码，但是当通过击键更改目标 FPS +/- 时，它的文档非常清晰，并且在 10fps 和 1000fps 之间完全平滑。

如果它对您有用，您可以在以下位置找到它： [FpsManager - A C++ helper class for framerate Independent Movement](http://r3dux.org/2012/12/fpsmanager-a-c-helper-class-for-framerate-independent-movement/)

# iphone - iPhone：在 Retina 中点击时缩略图变大

> ID：12211221
> 
> 赞同：1
> 
> 时间：2012-08-31T08:04:08.160
> 
> 标签：iphone

在 iPhone 4（视网膜显示屏）上点击一个项目（UITableView）时，缩略图会变大，其中包含 editButtonItem。

```
[cell.imageView setFrame:CGRectMake(7, 7, 30, 30)];
cell.imageView.image=objPhotoAlbumIcon; 
```

更新：

为了解决这个问题，我使用了自定义图像视图，但问题是编辑图像在编辑时会出现自定义图像。

```
UIImageView * cusomtomImageView=[[UIImageView alloc] init];
cusomtomImageView.frame=CGRectMake(7, 7, 30, 30);
cusomtomImageView.image=objPhotoAlbumIcon;
cell addSubview:cusomtomImageView];
[cusomtomImageView release]; 
```

我需要一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:33:02.650

花了几个小时后，我通过在编辑模式下使用自定义图像和标签解决了上述问题。只需要添加cell.contentView。

```
[cell.contentView addSubview:cusomtomImageView]; 
```

这是代码

```
UIImageView * cusomtomImageView=[[UIImageView alloc] init];
cusomtomImageView.frame=CGRectMake(7, 7, 29, 29);
cusomtomImageView.image=objPhotoAlbumIcon;
[cell.contentView addSubview:cusomtomImageView];
[cusomtomImageView release];

UILabel *cusomtextlebel=[[UILabel alloc] init];
cusomtextlebel.frame=CGRectMake(45, 8, 180, 24);
cusomtextlebel.text=subPhotoAlbumTitle;
[cusomtextlebel setFont:[OntdekZeelandFonts getFontForObjectLabel]];
cusomtextlebel.backgroundColor = [UIColor clearColor];
cusomtextlebel.highlightedTextColor = [UIColor whiteColor];
[cell.contentView addSubview:cusomtextlebel];
[cusomtextlebel release]; 
```

# git - 使用 Git 排除 Jenkins 中的区域

> ID：12211227
> 
> 赞同：5
> 
> 时间：2012-08-31T08:04:44.157
> 
> 标签：git, continuous-integration, jenkins

我有一个 git 存储库，我在 Jenkins 中创建了两个不同的作业（一个用于生产代码，一个用于工具）。两个工作总是被触发的地方！

我为每个作业添加了排除区域，只在每个正确的文件夹上触发。

我们的 git 根文件夹包含以下内容：

```
/src/
/tools/
/test/
/doc/
/third party/ 
```

在 Jenkins 的 Source 工作中，我有以下排除区域

```
/tools/.*
/Test Projects/.*
/doc/.* 
```

在我的工具工作中，我有以下排除区域

```
/src/.*
/Test Projects/.*
/doc/.* 
```

问题是，如果我在 doc-folder 中推送更改，则会触发两个作业。我也没有任何包含区域。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T10:38:52.807

此设置应该可以工作。

但是，如果您在 Jenkins 中使用[Gerrit 触发器](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger)，则 GitSCM 插件中的排除/包含区域将不起作用。在 Gerrit Trigger 插件中，有一个添加文件路径的选项，该选项将像包含区域一样工作，即只有在添加的文件路径发生更改时才会触发构建。

在作业的 Gerrit 触发器配置中，添加如下所示的文件路径以包含工具目录。

路径工具/**

# jquery - jQuery 1.8.0-min 语法错误，无法识别的表达式

> ID：12211228
> 
> 赞同：1
> 
> 时间：2012-08-31T08:04:48.037
> 
> 标签：jquery, jquery-selectors

我有一个 jQuery 星级评分，它与 jQuery 1.7.2 完美配合，但在使用 jQuery 1.8.0 时返回语法错误。这是脚本：

```
/* ====== STAR RATING ========= */
    jQuery(".stars.active a.star").hover(
        function(){
            var elemID = jQuery(this).parent('.stars').attr('id');
            elemID = elemID.replace('id-', '');

            if (od_readCookie('voted-'+elemID) == 'TRUE') {
                jQuery(this).siblings('.ty').html('You already voted.');
            } else {    

                var theClass = jQuery(this).attr('class');
                theClass = theClass.match(/^s[0-9]/);
                var starNum = theClass[0].replace('s', '');
                var allClasses = '';
                for(i=1;i<=starNum;i++) {
                    allClasses += ' .s'+i+', ';
                }
                jQuery(this).parent('.stars').children('.star').addClass('nogold');         
                jQuery(this).parent('.stars').children(allClasses).addClass('hover');
            }
        },
        function(){
            var elemID = jQuery(this).parent('.stars').attr('id');
            elemID = elemID.replace('id-', '');

            if (od_readCookie('voted-'+elemID) == 'TRUE') {
                jQuery(this).siblings('.ty').html('');
            } else {            
                jQuery(this).parent('.stars').children('.star').removeClass('nogold');                  
                jQuery(this).parent('.stars').children('.star').removeClass('hover');
            }
        }
    );

    // actually add the rating
    jQuery(".stars.active a.star").click(function(){
        var elemID = jQuery(this).parent('.stars').attr('id');
        elemID = elemID.replace('id-', ''); 

        if (od_readCookie('voted-'+elemID) != 'TRUE') {

            var theClass = jQuery(this).attr('class');
            theClass = theClass.match(/^s[0-9]/);
            var starNum = theClass[0].replace('s', '');

            // keep the marking while rating updating
            var allClasses = '';
            for(i=1;i<=starNum;i++) {
                allClasses += ' .s'+i+', ';
            }
            jQuery(this).parent('.stars').children('.star').addClass('nogold_voted');           
            jQuery(this).parent('.stars').children(allClasses).addClass('hover_voted');

            jQuery(this).siblings('.ty').load('/od/wp-admin/admin-ajax.php?action=od_add_vote&id='+elemID+'&rating='+starNum);
        }

    }); 
```

我对 jQuery 不熟悉，所以任何人都可以解释一下，究竟是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:38:55.503

好吧，我想我找到了。此代码导致问题：

```
var allClasses = '';
for(i=1;i<=starNum;i++) {
   allClasses += ' .s'+i+', ';
}
jQuery(this).parent('.stars').children('.star').addClass('nogold');         
jQuery(this).parent('.stars').children(allClasses).addClass('hover'); 
```

还有这个

```
var allClasses = '';
for(i=1;i<=starNum;i++) {
    allClasses += ' .s'+i+', ';
}
jQuery(this).parent('.stars').children('.star').addClass('nogold_voted');           
jQuery(this).parent('.stars').children(allClasses).addClass('hover_voted'); 
```

在这两种情况下`allClasses`，变量都以逗号结尾，因此最终选择器类似于`.s0.s1,.s2,s3,s4,`jQuery 1.7 中可接受的选择器，但在 1.8+ 中不起作用。

所以解决方案是从变量中删除最后一个逗号：`allClasses = allClasses.slice(0, -1)`在每个循环之后。

所以你应该得到这样的结果：

```
var allClasses = '';
for(i=1;i<=starNum;i++) {
   allClasses += ' .s'+i+', ';
}
allClasses = allClasses.slice(0, -1);

jQuery(this).parent('.stars').children('.star').addClass('nogold');         
jQuery(this).parent('.stars').children(allClasses).addClass('hover'); 
```

和

```
var allClasses = '';
for(i=1;i<=starNum;i++) {
    allClasses += ' .s'+i+', ';
}
allClasses = allClasses.slice(0, -1);

jQuery(this).parent('.stars').children('.star').addClass('nogold_voted');           
jQuery(this).parent('.stars').children(allClasses).addClass('hover_voted'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:43:04.770

您可以通过向所有星星元素添加*s*类来简化代码并避免选择器问题。

然后很容易全选：

```
 // keep the marking while rating updating
 jQuery(this).parent('.stars').children('.star').addClass('nogold_voted');           
 jQuery(this).parent('.stars').children('.s').addClass('hover_voted'); 
```

# android - Camera Invalidate() 不能在 onSensorChanged 方法中工作

> ID：12211232
> 
> 赞同：0
> 
> 时间：2012-08-31T08:05:07.847
> 
> 标签：android, android-camera, android-sensors

我有一个变量“azimuth_angle”

我希望当我触摸屏幕并改变方向时

变量“azimuth_angle”将减少

在我的代码中

触摸屏幕变量可以减小

但改变它不能工作的方向

我使用 invalidate() 相同

这有什么问题？

 `````
public class HelloCamera extends Activity implements SensorEventListener
{
    private MyView mView;
    float azimuth_angle = 365;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        mView = new MyView(this);       

        setContentView(new HelloCameraPreview(this));

        addContentView(mView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    }

    private class MyView extends View 
    {
        private Paint mPaint;

        public MyView(Context context) 
        {
            super(context);
            mPaint = new Paint();
            mPaint.setColor(Color.YELLOW); 
            mPaint.setTextSize(12);
        }

        public void onDraw(Canvas canvas) 
        {
            float x = 10;
            float y = 20;
            canvas.drawText(String.valueOf(azimuth_angle), x, y, mPaint );
            azimuth_angle--;
        }

        public boolean onTouchEvent(MotionEvent event) 
        {
            invalidate();//But this can work
            return true;
        }
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
         if(event.sensor.getType() == Sensor.TYPE_ORIENTATION)
         {
             azimuth_angle = event.values[0];
             mView.invalidate();//it doesnt work
         } 

    }
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:10:37.080

由于传感器事件未在 UI 线程中传递给您，因此您需要使用 postInvalidate() 而不是 invalidate()。``

# c# - 将 Kinect 深度图像捕获为 png 文件

> ID：12211233
> 
> 赞同：4
> 
> 时间：2012-08-31T08:05:12.247
> 
> 标签：c#, image, kinect

我正在尝试将 kinect 深度传感器图像保存到 png 文件中。我试图用我的 RGB 相机拍摄它，它没有任何问题。有什么我错过的吗？PS 我正在使用 Kinect ToolKit 的函数来显示 rgb 和深度图像。

```
WriteableBitmap depthBitmap;
DepthStreamManager dsm;
dsm = new DepthStreamManager();
kinect.DepthStream.Enable(DepthImageFormat.Resolution640x480Fps30);
kinect.DepthFrameReady += kinect_DepthFrameReady;
depthBitmap = new WriteableBitmap(kinect.DepthStream.FrameWidth,this.kinect.DepthStream.FrameHeight, 96.0, 96.0, PixelFormats.Gray16, null);
private string TakeImage(int x)
    {
        if (x == 0)
        {
            BitmapEncoder encoder = new PngBitmapEncoder();
            encoder.Frames.Add(BitmapFrame.Create(this.depthBitmap));
            string myPhotos = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
            string path = System.IO.Path.Combine(myPhotos, "Image 1.png");
            try
            {
                using (FileStream fs = new FileStream(path, FileMode.Create))
                {
                    encoder.Save(fs);
                }

            }
            catch (IOException details)
            {
                Console.Write(details.ToString());

            }
            if (path == null)
                return "Image was not taken.";
            else
                return path;
        }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:19:58.167

If you use the [Coding4Fun Kinect toolkit](http://channel9.msdn.com/coding4fun/kinect/Coding4Fun-Kinect-Toolkit), I believe you can use ImageFrame objects. You can convert an [ImageFrame object to Bitmap](https://stackoverflow.com/questions/10848190/convert-kinect-colorframe-to-bitmap) and from there you should be able to [save it as a PNG](http://msdn.microsoft.com/en-us/library/9t4syfhh.aspx) with no problems.

Bit of a long-winded route to the solution but I'm not currently using the machine which has my Kinect stuff on it.

Edit: If you're using WinForms, you can simply use the Coding4Fun toolkit method ImageFrame.ToBitmap() and then save as PNG from there.

The code should look something like this:

```
private void saveAsPNG(ImageFrame myImageFrame, string path)
{
   Bitmap bmp = myImageFrame.ToBitmap();

   bmp.Save(path, System.Drawing.Imaging.ImageFormat.Png);

   bmp.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T02:47:04.317

解决我自己的问题：

使用 Kinect 的 ToolKit，他们实际上提供了一个可写位图函数，允许我抓取 ColorStreamManager 或 DepthStreamManager 的 WritableBitmap。我之前的错误是因为我没有使用 Kinect 的先天显示方法，所以 writeablebitmap 肯定是空的。这是我的固定代码。

```
WriteableBitmap wmp;
            wmp = cis.Bitmap;
            BitmapEncoder encoder = new PngBitmapEncoder();
            encoder.Frames.Add(BitmapFrame.Create(wmp));
            string path = System.IO.Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop),"Image 1.png");
            try
            {
                using (FileStream fs = new FileStream(path, FileMode.Create))
                {
                    encoder.Save(fs);
                }
            }
            catch (IOException ioe)
            {
                Console.WriteLine(ioe.ToString());
            }
            return path; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T20:31:10.373

你甚至不需要*WriteableBitmap*。只是带有保存*pixeldata的**BitmapSource的**编码器*。

 **```
using Microsoft.Kinect;
using System.Windows.Media; // WindowsBase
using System.Windows.Media.Imaging; //PresentationCore 
```

...

```
static void sensor_DepthFrameReady(object sender, DepthImageFrameReadyEventArgs e)
    {

        DepthImageFrame DIF = e.OpenDepthImageFrame();
        if (DIF == null){return;}            

        short[] pixels = new short[DIF.PixelDataLength];
        DIF.CopyPixelDataTo(pixels);

        if (check == 0)
        {
            int stride = DIF.Width * DIF.BytesPerPixel;
            BitmapEncoder encoder = new PngBitmapEncoder();
            encoder.Frames.Add(BitmapFrame.Create(BitmapSource.Create(
                DIF.Width, DIF.Height, 96, 96, PixelFormats.Gray16, null, pixels, stride)));

            string path = System.IO.Path.Combine(
                Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "kimage.png");

            try
            {
                using (FileStream fs = new FileStream(path, FileMode.Create))
                {
                    encoder.Save(fs);
                }
            }
            catch (IOException ioe)
            {
                Console.WriteLine(ioe.ToString());
            }
            check = 1;
        }} 
```

环境：

*   Visual Studio 2012 速成版
*   Microsoft.Kinect 库 1.7.0.0
*   *编码器*需要组装 System.Xaml**

# php - 将相同的 URL 结构重写为两个不同的 PHP 脚本

> ID：12211234
> 
> 赞同：0
> 
> 时间：2012-08-31T08:05:23.417
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, http-headers

我的网站使用类似`example.de/user1`or的 URL `example.de/project33`，可以用 .htaccess 文件重写。

斜线后面的字符串由用户选择。

我的问题是，有些 URL 是用户个人资料链接，应该重写`profile.php?id=...`，有些 URL 是项目链接，应该重写`project.php...`

你怎么能处理它？

我想到了一个 HTTP 标头，它会触发一个 rewriteCondition（如 -l、-f、-d 等......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:21:15.030

由于您无法仅通过查看 URL 来确定适当的目标，因此您将需要一个调度程序样式的脚本，将所有这些请求重定向到该脚本，然后该脚本决定最终重定向到`profile.php`or `project.php`。否则不会发生`mod_rewrite`，因为它不知道您的自定义 URL 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:34:45.453

如果不实际测试斜杠后面的字符串是用户还是项目，您需要其他东西来让 mod_rewrite 知道哪个是哪个，因为您可能拥有与项目名称相同的用户名。就像是：

```
http://example.de/u/user1
http://example.de/p/project33 
```

因此，规则将确保与`u`or `p`（或您选择的任何内容相匹配：

```
RewriteRule ^u/(.*)$ /profile.php?id=$1 [L]
RewriteRule ^p/(.*)$ /project.php?id=$1 [L] 
```

# css - 透明度头痛

> ID：12211235
> 
> 赞同：8
> 
> 时间：2012-08-31T08:05:26.757
> 
> 标签：css

我刚刚制作了一张图片，为您提供了一个视觉示例，以帮助您理解我的问题。

![与我的问题相关的视觉示例](../Images/0efd4307dc61feb248bed46281fa5136.png)

[html 示例（jsfiddle）](http://jsfiddle.net/TgWMH/1/)

如您所见，我有一个活动箭头，其目的是沿着内容列循环。但是，我想要标题背景的透明度，而不是删除我的白色背景时的内容。

是否有任何技巧可以通过我的内容背景来达到我的标题的背景？

我制作了一个额外的图像以获得更好的视图：

![更新的视觉示例](../Images/75c9b3b6deb4061c05d3e3ca38e3c516.png)

注意：我使用图案作为背景，而不是纯色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:15:32.747

我最初的想法是内容区域的背景，上面有一个透明的三角形。~~然后对内容应用负边距~~然后将内容的位置设置为`relative`并将其`top`属性设置为负量并将标题的底部填充设置为相同的量。

类似的东西？[http://jsfiddle.net/sT53s/](http://jsfiddle.net/sT53s/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T09:26:33.787

您可以使用 css3 旋转属性检查此[http://jsfiddle.net/TgWMH/18/](http://jsfiddle.net/TgWMH/18/)

**HTML**

```
<div class="arrow three"></div> 
```

**CSS**

```
.arrow.three:after {
    -moz-transform: rotate(-45deg);
    -webkit-transform: rotate(-45deg);
    transform: rotate(-45deg);
    -ms-transform: rotate(-45deg);
    background: url("http://farm3.staticflickr.com/2665/4170671240_a90769d747.jpg") repeat scroll 0 0 transparent;
    content: "";
    height: 200px;
    left: -14px;
    position: absolute;
    top: 0;
    width: 200px;
}
.arrow.three {
    -moz-transform: rotate(45deg);
    -webkit-transform: rotate(45deg);
    transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    background: none repeat scroll 0 0 transparent;
    height: 100px;
    margin-top: -51px;
    overflow: hidden;
    position: relative;
    width: 100px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T09:30:42.147

## CSS3 多背景版

只要您的内容区域始终具有纯色背景色，您就可以使用以下修改：

```
.header {
  height: 200px;
  background: url("http://farm3.staticflickr.com/2665/4170671240_a90769d747.jpg") fixed;
} 
```

通过添加`fixed`，您可以确保在其他任何地方使用该背景图像，它应该正确对齐。然后是这样的修改：

```
.arrow2 {
  margin-top: -2px;
  width: 111px;
  height: 56px;
  background: url("http://s17.postimage.org/5iq6rsz0b/arrow2.png") no-repeat 0 0,
    url("http://farm3.staticflickr.com/2665/4170671240_a90769d747.jpg") fixed;
} 
```

然后，您需要做的就是反转您的 arrow2.png，使箭头区域本身是透明的，并且箭头的外部部分包含您的内容的背景颜色。

*显然，这只适用于支持多种背景的浏览器。*

## CSS2 单背景版

想一想，今天我的大脑有点慢……没有理由*必须*使用多个背景。您可以像这样使用箭头标记：

```
<div class="arrow2">
  <div class="arrow-inner"></div>
</div> 
```

然后将`4170671240_a90769d747.jpg`固定背景应用于 .arrow2，但将实际`arrow2.png`背景应用于 .arrow-inner。这样你就不必为旧浏览器做任何例外，因为它应该可以工作。

```
.arrow2 {
  margin-top: -2px;
  width: 111px;
  height: 56px;
  background: url("http://farm3.staticflickr.com/2665/4170671240_a90769d747.jpg") fixed;
}

.arrow-inner {
  width: 111px;
  height: 56px;
  background: url("http://s17.postimage.org/5iq6rsz0b/arrow2.png") no-repeat 0 0;
} 
```

*arrow2.png 仍然需要反转才能工作 - 以便箭头区域是透明的，而外部不是*

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-14T20:38:48.967

这是一篇相当老的帖子，但请查看这个用两个伪元素解决问题的代码笔。这是一个 sass mixin，你可以为你喜欢的每个边缘、宽度和三角形位置配置它。[http://codepen.io/gionkunz/pen/ihgwH](http://codepen.io/gionkunz/pen/ihgwH)

# php - 如何自定义这个 wordpress 页面？

> ID：12211239
> 
> 赞同：1
> 
> 时间：2012-08-31T08:05:56.603
> 
> 标签：php, wordpress, templates, wordpress-theming

我正在尝试在 wordpress 页面中进行一些更改。我可以从页面中删除一些内容，例如作者姓名和“阅读更多”，但我认为我已经达到了我的限制，无法自定义更多。这是页面的截图：

![在此处输入图像描述](../Images/010692c398b4fdd32e95b527ac2373f5.png)

我想删除未找到的结果并在下面发表评论。试图理解代码但无法做到。这是页面的代码：

```
<?php 
/*
Template Name: Blog Page
*/
?>
<?php 
$et_ptemplate_settings = array();
$et_ptemplate_settings = maybe_unserialize( get_post_meta($post->ID,'et_ptemplate_settings',true) );

$fullwidth = isset( $et_ptemplate_settings['et_fullwidthpage'] ) ? (bool) $et_ptemplate_settings['et_fullwidthpage'] : false;

$et_ptemplate_blogstyle = isset( $et_ptemplate_settings['et_ptemplate_blogstyle'] ) ? (bool) $et_ptemplate_settings['et_ptemplate_blogstyle'] : false;

$et_ptemplate_showthumb = isset( $et_ptemplate_settings['et_ptemplate_showthumb'] ) ? (bool) $et_ptemplate_settings['et_ptemplate_showthumb'] : false;

$blog_cats = isset( $et_ptemplate_settings['et_ptemplate_blogcats'] ) ? (array) $et_ptemplate_settings['et_ptemplate_blogcats'] : array();
$et_ptemplate_blog_perpage = isset( $et_ptemplate_settings['et_ptemplate_blog_perpage'] ) ? (int) $et_ptemplate_settings['et_ptemplate_blog_perpage'] : 10;
?>

    <?php get_header(); ?>
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?> 
        <div class="entry<?php if($fullwidth) echo(' no_sidebar');?>">
            <div class="entry-top"></div>

            <?php get_template_part('includes/share'); ?>

            <div class="post clearfix">
                <div class="content clearfix">

                    <h1 class="title"><?php the_title(); ?></h1>

                    <div class="clear"></div>

                    <?php $thumb = '';
                          $width = 184;
                          $height = 184;
                          $classtext = '';
                          $titletext = get_the_title();

                          $thumbnail = get_thumbnail($width,$height,$classtext,$titletext,$titletext,false,'thumb');
                          $thumb = $thumbnail["thumb"]; ?>

                    <?php if($thumb <> '' && get_option('lightbright_page_thumbnails') == 'on') { ?>                        
                        <div class="thumb">
                            <?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext); ?>

                            <span class="overlay"></span>
                        </div> <!-- end .thumb -->
                    <?php }; ?>                 

                    <?php the_content(); ?>
                    <?php wp_link_pages(array('before' => '<p><strong>'.esc_html__('Pages','LightBright').':</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>

                    <div id="et_pt_blog">
                        <?php $cat_query = ''; 
                        if ( !empty($blog_cats) ) $cat_query = '&cat=' . implode(",", $blog_cats);
                        else echo '<!-- blog category is not selected -->'; ?>
                        <?php 
                            $et_paged = is_front_page() ? get_query_var( 'page' ) : get_query_var( 'paged' );
                        ?>
                        <?php query_posts("showposts=$et_ptemplate_blog_perpage&paged=" . $et_paged . $cat_query); ?>
                        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

                            <div class="et_pt_blogentry clearfix">
                                <h2 class="et_pt_title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>

                                <p class="et_pt_blogmeta"><?php esc_html_e('Posted','LightBright'); ?> <?php esc_html_e('by','LightBright'); ?> <?php the_author_posts_link(); ?> <?php esc_html_e('on','LightBright'); ?> <?php the_time(get_option('lightbright_date_format')) ?> <?php esc_html_e('in','LightBright'); ?> <?php the_category(', ') ?> | <?php comments_popup_link(esc_html__('0 comments','LightBright'), esc_html__('1 comment','LightBright'), '% '.esc_html__('comments','LightBright')); ?></p>

                                <?php $thumb = '';
                                $width = 184;
                                $height = 184;
                                $classtext = '';
                                $titletext = get_the_title();

                                $thumbnail = get_thumbnail($width,$height,$classtext,$titletext,$titletext);
                                $thumb = $thumbnail["thumb"]; ?>

                                <?php if ( $thumb <> '' && !$et_ptemplate_showthumb ) { ?>
                                    <div class="et_pt_thumb alignleft">
                                        <?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext); ?>
                                        <a href="<?php the_permalink(); ?>"><span class="overlay"></span></a>
                                    </div> <!-- end .thumb -->
                                <?php }; ?>

                                <?php if (!$et_ptemplate_blogstyle) { ?>
                                    <p><?php truncate_post(550);?></p>
                                    <a href="<?php the_permalink(); ?>" class="readmore"><span><?php esc_html_e('read more','LightBright'); ?></span></a>
                                <?php } else { ?>
                                    <?php
                                        global $more;
                                        $more = 0;
                                    ?>
                                    <?php the_content(); ?>
                                <?php } ?>
                            </div> <!-- end .et_pt_blogentry -->

                        <?php endwhile; ?>
                            <div class="page-nav clearfix">
                                <?php if(function_exists('wp_pagenavi')) { wp_pagenavi(); }
                                else { ?>
                                     <?php get_template_part('includes/navigation'); ?>
                                <?php } ?>
                            </div> <!-- end .entry -->
                        <?php else : ?>
                            <?php get_template_part('includes/no-results'); ?>
                        <?php endif; wp_reset_query(); ?>

                    </div> <!-- end #et_pt_blog -->

                    <?php edit_post_link(esc_html__('Edit this page','LightBright')); ?>

                </div> <!-- end .content -->

                <div class="entry-bottom-top"></div>

            </div> <!-- end .post -->

            <div class="entry-bottom"></div>
        </div> <!-- end .entry -->
    <?php endwhile; endif; ?>
    </div> <!-- end #main-area -->

    <?php if (!$fullwidth) get_sidebar(); ?>

<?php get_footer(); ?> 
```

谁能帮我更改此代码以删除页面中不必要的部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:11:54.893

`<?php get_template_part('includes/no-results'); ?>`

将页面的这一部分替换为“无结果”的所需内容或将`no-results template`.`include`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:19:28.040

delete this part in line 104:

```
 <?php else : ?>
                        <?php get_template_part('includes/no-results'); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T08:12:55.097

在第 104 行附近寻找以下内容，并删除这些行：

```
<?php else : ?>
   <?php get_template_part('includes/no-results'); ?> 
```

# cuda - CUDA，如何在 CUDA 内核中实现结构的动态数组

> ID：12211241
> 
> 赞同：3
> 
> 时间：2012-08-31T08:06:01.780
> 
> 标签：cuda

我正在尝试实现一个包含数据数组的结构，并且我想实现动态数组，例如：

```
struct myStruct {
  float3 *data0, *data1;
};

__global__ void kernel(myStruct input) {
  unsigned int N = 2;
  while(someStatements) {
    data0 = new float3[N];
    // do somethings
    N *= 2;
  }
} 
```

我怎样才能在 CUDA 内核中做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:38:47.990

如果您打算在具有最新版本的 CUDA 的计算能力 2.x 或 3,x 设备上运行此代码，那么您的内核代码几乎是正确的。`new`Fermi 和 Kepler 硬件上的 CUDA 4.x 和 5.0 支持C++运算符。请注意，使用`new`或`malloc`在设备上的运行时堆上分配的内存。它具有创建上下文的生命周期，但您目前无法直接从 CUDA 主机 API（通过`cudaMemcpy`或类似方式）访问它。

我把你的结构和内核变成了一个简单的示例代码，你可以自己尝试看看它是如何工作的：

```
#include <cstdio>

struct myStruct {
    float *data;
};

__device__ 
void fill(float * x, unsigned int n)
{
    for(int i=0; i<n; i++) x[i] = (float)i;
}

__global__ 
void kernel(myStruct *input, const unsigned int imax)
{
    for(unsigned int i=0,N=1; i<imax; i++, N*=2) {
        float * p = new float[N];
        fill(p, N);
        input[i].data = p;
    }
}

__global__
void kernel2(myStruct *input, float *output, const unsigned int imax)
{
    for(unsigned int i=0,N=1; i<imax; i++, N*=2) {
        output[i] = input[i].data[N-1];
    }
}

inline void gpuAssert(cudaError_t code, char * file, int line, bool Abort=true)
{
    if (code != 0) {
        fprintf(stderr, "GPUassert: %s %s %d\n", cudaGetErrorString(code),file,line);
        if (Abort) exit(code);
    }       
}
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }

int main(void)
{

    const unsigned int nvals = 16;
    struct myStruct * _s;
    float * _f, * f;

    gpuErrchk( cudaMalloc((void **)&_s, sizeof(struct myStruct) * size_t(nvals)) );
    size_t sz = sizeof(float) * size_t(nvals);
    gpuErrchk( cudaMalloc((void **)&_f, sz) );
    f = new float[nvals];

    kernel<<<1,1>>>(_s, nvals);
    gpuErrchk( cudaPeekAtLastError() );

    kernel2<<<1,1>>>(_s, _f, nvals);
    gpuErrchk( cudaPeekAtLastError() );
    gpuErrchk( cudaMemcpy(f, _f, sz, cudaMemcpyDeviceToHost) );
    gpuErrchk( cudaDeviceReset() );

    for(int i=0; i<nvals; i++) {
        fprintf(stdout, "%d %f\n", i, f[i]);
    }

    return 0;
} 
```

需要注意的几点：

1.  此代码只能在 Fermi 或 Kepler GPU 上使用 CUDA 4.x 或 5.0 编译和运行
2.  您必须将 GPU 的正确架构传递给 nvcc 进行编译（例如，我曾经`nvcc -arch=sm_30 -Xptxas="-v" -o dynstruct dynstruct.cu`在 linux 上为 GTX 670 编译）
3.  示例代码使用“收集”内核将数据从运行时堆中的结构复制到主机 API 可以访问的分配，以便打印结果。这是针对我之前提到的`cudaMemcpy`无法直接从运行时堆内存中的地址复制的限制的一种解决方法。我希望这可能会在 CUDA 5.0 中得到解决，但最新的候选版本仍然有这个限制。

# android - 如何将 repo 同步输出重定向到文件中

> ID：12211245
> 
> 赞同：1
> 
> 时间：2012-08-31T08:06:20.767
> 
> 标签：android, shell, repository

我尝试了“repo sync 2>&1 > log”，但无法在日志中获取任何内容。输出仍然直接进入屏幕。

“nohup repo sync”确实有效，输出进入文件“nohup.log”。但似乎任何以 nohup 为前缀的命令都无法在 crontab 中运行。

有解决办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T08:14:41.227

尝试`bash`：

```
 repo sync >log 2>&1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-18T09:08:25.340

```
repo sync 2>&1 | tee sync.log 
```

# geolocation - Windows Mobile 使用 GSM 或 2G 网络的室内定位

> ID：12211246
> 
> 赞同：0
> 
> 时间：2012-08-31T08:06:26.007
> 
> 标签：geolocation, windows-mobile, location, gsm, indoor-positioning-system

我想知道如何在 Windows 移动设备上使用 GSM 移动数据或 2G 网络获取我的室内位置。

如果您可以推荐一个可以帮助我的网站/应用程序.. 国家：黎巴嫩设备：摩托罗拉 MC55 操作系统：Windows mobile 5 和 6

任何帮助深表感谢。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:11:33.143

GPS 在大多数情况下无法在室内工作。您可以使用 CellID 和包含基站位置的数据库。OpenCellID 免费提供此类数据 (opencellid.org)，它们还提供 API 来查询或更新数据库。这将根据蜂窝塔位置信息为您提供或多或少准确的位置。

约瑟夫

# c# - 防止输入错误密码3次以上的用户进入

> ID：12211249
> 
> 赞同：0
> 
> 时间：2012-08-31T08:06:39.380
> 
> 标签：c#, asp.net

我想阻止输入密码超过 3 次的用户进入。我将他们的 IP 保存在会话中并设置超时一分钟。我不知道这个解决方案好不好，但是输入错误密码三次就会出现问题。代码可以正常工作，但是当会话超时时，如果我不刷新页面，它就不起作用。用户应该可以再试一次，但如果我刷新它，用户可以再试一次。有什么问题？

这是我的代码...

```
 if (olduser.Trim() == username.Trim() && password.Trim()==oldpass.Trim())
        { retval =olduser;
        HttpContext context = HttpContext.Current;
        context.Session[retval.ToString()] = retval.ToString();
       }
        else
        { 
            string ip = HttpContext.Current.Request.UserHostAddress;
           HttpContext failuser = HttpContext.Current;
           failuser.Session.Timeout =1;
           if (failuser.Session[ip] != null)
               failuser.Session[ip] = (int)failuser.Session[ip] + 1;
           else
               failuser.Session[ip] = 1;
               retval = failuser.Session[ip].ToString();
               if((int)failuser.Session[ip]>2)
                retval = "!";                                 
        }

        return retval;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:09:11.080

您可能正在尝试重新发明轮子。考虑使用内置的[ASP.NET Membership Provider](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:12:48.597

如果您使用会员服务提供商，您将免费获得此功能：

[最大无效密码尝试次数](http://msdn.microsoft.com/en-us/library/system.web.security.membership.maxinvalidpasswordattempts.aspx)

# php - 用于播放背景音乐的嵌入 flashplayer 在 IE 浏览器中不起作用？

> ID：12211252
> 
> 赞同：0
> 
> 时间：2012-08-31T08:06:52.357
> 
> 标签：php, javascript

你好专家我需要你帮助我在我的网页上播放背景音乐时遇到问题。为此我使用了这个代码

```
<embed src="http://www.strangecube.com/audioplay/online/audioplay.swf?file=http://localhost/ajaximage/Katy Perry - Wide Awake.mp3&auto=yes&sendstop=yes&repeat=1
&buttondir=http://www.strangecube.com/audioplay/online/alpha_buttons/classic&
bgcolor=0x507050&mode=playpause&usebgcolor=yes" bgcolor=#507050 quality=high width="30" height="30" align=""
TYPE="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed> 
```

从这段代码中，我用来播放背景声音，还添加了播放/暂停功能。

它适用于 Firefox，但不适用于 IE 浏览器。因此，如果有人知道该怎么做，那么这对我来说将非常有帮助，因为我昨晚就遇到了这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:41:35.773

转到添加和删除程序并卸载列出的所有 Flash 条目。然后卸载 Flash 然后重新安装 Flash。希望它能正常工作。

# php - PHP - Codeigniter - 连接到 PostgreSQL 失败

> ID：12211253
> 
> 赞同：4
> 
> 时间：2012-08-31T08:06:54.743
> 
> 标签：php, codeigniter, postgresql

我对 CodeIgniter 还很陌生，但过去我开发了一些工作页面。我正在尝试重构这些页面（旧页面仍在 Postgres 上的 Linux 机器中运行）并在 Windows 机器中开发它们；但我遇到了 Postgres 数据库连接问题，并且出现以下错误：

> 发生数据库错误
> 
> 无法使用提供的设置连接到您的数据库服务器。
> 
> 文件名：C:\Subayogam_v2.0\Codeigniter\system\database\DB_driver.php
> 行号：124

我知道当缺少数据库配置时会出现此错误，但我在 C:\Subayogam_v2.0\Codeigniter\application\config\database.php 确实有一个有效的数据库配置。下面给出的是配置文件数据：

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'postgres';
$db['default']['password'] = 'mypassword';
$db['default']['database'] = 'subayogam_v2.0';
$db['default']['dbdriver'] = 'postgre';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = TRUE;
/*$db['default']['cachedir'] = '/var/subayogam_2.0/cache';*/
$db['default']['cachedir'] = 'C:\Subayogam_v2.0\Codeigniter\cache';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

我仔细检查了缓存文件夹路径，还尝试了一个连接到同一个数据库的简单 PHP 页面，以查看驱动程序是否正常工作，并且我能够从数据库中看到结果。Apache 错误日志中也没有有用的错误消息。我从正在运行的版本中复制粘贴了整个应用程序，并修改了数据库文件以指向新数据库。其他一切都没有改变。

有什么问题？是否有任何特定的日志文件可以为我提供有关错误的更多信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T15:42:48.007

当我第一次使用 postgres 设置 codeigniter 时，我遇到了类似的问题。Postgres 在不同的端口上运行，因此您需要在数据库配置中指定端口；5432 是 postgres 选择的默认端口，因为我已经安装了 mysql。

```
    $db['default']['port'] = 5432;

```

# php - jquery 响应是正确的，但捡错了

> ID：12211254
> 
> 赞同：0
> 
> 时间：2012-08-31T08:06:57.693
> 
> 标签：php, javascript, jquery

是否知道为什么下面的代码会一直提示**错误**，尽管响应返回为**hello**？

它应该提醒**正确**！

坦克

**查询**

```
var term = 'jan';

$.ajax(
{
    type : 'POST',
    url  : 'process.php',
    data : 'term=' + term,
    dataType  : 'text',
    timeout   : 600000,
    success   : function(response)
    {
        if (response == 'hello')
        {
            alert('Correct');
        }
        else
        {
            alert('Wrong');
        }
    }
}); 
```

**PHP**

```
if ($_POST['term'] == 'jan')
{
    echo 'hello';
}
else
{
    echo 'noooo';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:14:26.653

您的返回结果中可能有空格。这可以通过修剪返回结果来解决

```
var term = 'jan';

$.ajax(
{
    type : 'POST',
    url  : 'process.php',
    data : 'term=' + term,
    dataType  : 'text',
    timeout   : 600000,
    success   : function(response)
    {
        if (response.trim() == 'hello')
        {
            alert('Correct');
        }
        else
        {
            alert('Wrong');
        }
    }
}); 
```

# android - 应用内结算。如何存储用户已支付的信息？

> ID：12211255
> 
> 赞同：3
> 
> 时间：2012-08-31T08:06:58.283
> 
> 标签：android, in-app-purchase, in-app-billing, google-play

[这里](https://stackoverflow.com/questions/9462641/how-to-check-my-in-app-billing-product-is-already-purchased-in-app-by-user)有一个类似的主题

好的。我们可以通过对 Google Play 的 RESTORE_TRANSACTIONS 请求了解用户的购买情况。但。文档中写道：“仅当您的应用程序首次安装在设备上或您的应用程序已从设备中删除并重新安装时，您才应使用 RESTORE_TRANSACTIONS 请求类型。” 为什么不是每次开始后？每次应用启动时，它看起来很舒服并且可以查询 Google Play。

否则

1) 我应该在我的 WEB 服务器上存储有关付款的信息

2）或者我应该将此信息保存到 SD 卡。记录应该是安全的，包括设备 ID，这样在另一台设备上的复制将无法工作

所以。哪种方式更好？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:24:30.337

我会建议：

3) 使用应用内共享首选项类或 SQLite 数据库

（查看此页面：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)）

加密总是好的，但是这样可以说数据附加到您的应用程序，并且通常不能被其他应用程序访问。

# css - 相对定位和可点击锚点

> ID：12211256
> 
> 赞同：0
> 
> 时间：2012-08-31T08:06:59.273
> 
> 标签：css

我有 2 个问题希望得到帮助！

1.  我有一个孩子在页脚内有一个标签，我想把它放在这个页脚的中间。我试过以下。

    ```
    footer a(or id of the anchor) {
    position:relative;
    top:-50px;
    z-index:100;
    background:url(../img/toTopLink.png);
    display:block;
    }

    footer {
    position:relative;
    z-index:1;
    } 
    ```

    它将自己定位在页脚之外，所以一切都膨胀了，但是`<a>`页脚之外的标签部分没有显示，它被剪掉了。这是为什么？我认为 z-index 会解决这个问题。它也不适用于绝对定位，这不是一个选项，因为我正在做一个响应式布局。

2.  这个`<a>`带有背景图片的标签应该是可点击的，但是当我使用`text-indent`从视线中删除文本时，`<a>`带有背景图片的标签不再是可点击的。我已将其设置为显示块并尝试使用填充。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:16:01.227

对于职位问题。
CSS

```
footer a {
    position: absolute;
    top: -50px;
    ...
} 
```

对于点击问题。如果您不想显示文本，请不要插入它（您可以将`title`属性用于 SEO 内容）。为了保持图像可点击，是一个空的`a`，我建议：
CSS

```
footer a {
    display: block;
    width: 100px;
    height: 30px;
    ...
} 
```

# iphone - 将 UI 元素添加到自定义 UIView

> ID：12211258
> 
> 赞同：1
> 
> 时间：2012-08-31T08:07:00.763
> 
> 标签：iphone, objective-c, ios, uiview

我正在尝试添加一些 UI 元素，例如,`UIProgressView`和-我认为代码是正确的（或者我认为是正确的），但除了背景之外什么都没有显示。我究竟做错了什么？`UILabel``UIButton``UIActivityIndicator`

```
@interface LoadingView : UIView

@property (weak, nonatomic) IBOutlet UIActivityIndicatorView *activityIndicator;
@property (weak, nonatomic) IBOutlet UIProgressView *progressView;
@property (weak, nonatomic) IBOutlet UILabel *statusLabel;
@property (weak, nonatomic) IBOutlet UIButton *cancelButton;

- (void)removeLoadingView;

@end

@implementation LoadingView

@synthesize activityIndicator = _activityIndicator;
@synthesize progressView = _progressView;
@synthesize statusLabel = _statusLabel;
@synthesize cancelButton = _cancelButton;

- (UIView *)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

    if (self) {
        self.progressView = [[UIProgressView alloc] initWithFrame:CGRectMake(34, 225, 248, 9)];
        self.statusLabel = [[UILabel alloc] initWithFrame:CGRectMake(36, 257, 248, 31)];
        self.cancelButton = [[UIButton alloc] initWithFrame:CGRectMake(121, 317, 74, 37)];

        // Create a new image view, from the image made by our gradient method
        UIImageView *background = [[UIImageView alloc] initWithImage:[self addBackground]];
        background.alpha = 0.8;
        [self addSubview:background];

        self.activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
        // Set the resizing mask so it's not stretched
        self.activityIndicator.autoresizingMask =
        UIViewAutoresizingFlexibleTopMargin |
        UIViewAutoresizingFlexibleRightMargin |
        UIViewAutoresizingFlexibleBottomMargin |
        UIViewAutoresizingFlexibleLeftMargin;

        CGRect indicatorFrame = CGRectMake(142, 163, 37, 37);
        [self.activityIndicator setFrame:indicatorFrame];

        self.statusLabel.text = @"test 123";
        self.statusLabel.hidden = NO;
        self.statusLabel.enabled = YES;
        self.statusLabel.textColor = [UIColor whiteColor];
        [self addSubview:self.activityIndicator];
        [self addSubview:self.progressView];
        [self addSubview:self.cancelButton];
        [self addSubview:self.statusLabel];

        [self.activityIndicator startAnimating];

       /* // Create a new animation
        CATransition *animation = [CATransition animation];
        // Set the type to a nice wee fade
        [animation setType:kCATransitionFade];
        // Add it to the superView
        [[super layer] addAnimation:animation forKey:@"layerAnimation"];*/

    }
    return self;
}

- (UIImage *)addBackground{
    // Create an image context (think of this as a canvas for our masterpiece) the same size as the view
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, YES, 1);
    // Our gradient only has two locations - start and finish. More complex gradients might have more colours
    size_t num_locations = 2;
    // The location of the colors is at the start and end
    CGFloat locations[2] = { 0.0, 1.0 };
    // These are the colors! That's two RBGA values
    CGFloat components[8] = {
        0.4,0.4,0.4, 0.8,
        0.1,0.1,0.1, 0.5 };
    // Create a color space
    CGColorSpaceRef myColorspace = CGColorSpaceCreateDeviceRGB();
    // Create a gradient with the values we've set up
    CGGradientRef myGradient = CGGradientCreateWithColorComponents (myColorspace, components, locations, num_locations);
    // Set the radius to a nice size, 80% of the width. You can adjust this
    float myRadius = (self.bounds.size.width*.8)/2;
    // Now we draw the gradient into the context. Think painting onto the canvas
    CGContextDrawRadialGradient (UIGraphicsGetCurrentContext(), myGradient, self.center, 0, self.center, myRadius, kCGGradientDrawsAfterEndLocation);
    // Rip the 'canvas' into a UIImage object
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    // And release memory
    CGColorSpaceRelease(myColorspace);
    CGGradientRelease(myGradient);
    UIGraphicsEndImageContext();
    // … obvious.
    return image;
} 
```

编辑：所以我只是把代码放进去，`viewDidload`现在什么都没有显示，甚至没有背景。我还尝试了代码，`layoutSubviews`结果与上面的代码相同，除了背景之外的所有内容都被隐藏了。

我用来从视图控制器实例化此视图的代码是；

```
@property (nonatomic, strong) LoadingView *loadingView;

@synthesize loadingView = _loadingView;

- (LoadingView *)loadingView
{
    if (!_loadingView) _loadingView = [[LoadingView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    return _loadingView;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view addSubview:self.loadingView];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:13:20.713

把它放到`viewDidLoad`你的视图控制器中。这将确保您的主视图已经存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:57:10.520

只有在发布了代码之后，`@interface`我才意识到我正在使用`weak`指针创建元素。我将其更改为`strong`，一切正常。感谢大家的回答，我知道我没有显示整个代码而让大家感到困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T08:27:28.673

您是否应该将新的 UI 元素添加到 self 的视图中，而不仅仅是 self 。所以它看起来有点像这样：

```
 [[self view] addSubview:background]; 
```

并不是

```
 [self addSubview:background]; 
```

***编辑***

试试这个查看控制器上的所有视图。

```
 for(UIView *vw in self.subviews) {
         NSLog(@"View : %@", vw);
    } 
```

如果您无法访问 self.subviews 这意味着您无法添加除初始视图之外的任何视图，因此您必须开始添加到 [self view]。尝试将 self.subviews 更改为 [[self view] subviews];

您的背景视图可能已被放置为初始视图，因为它是 UIImageView，请尝试添加。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T08:16:42.890

你应该这样做`viewDidLoad`，或者`- (void)layoutSubviews`如果你正在构建一个自定义 UIView

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T08:13:28.517

你有没有`initWithFrame:`在你想要的地方调用方法？

我认为您最好在方法中添加代码`init:`或`-ViewDidLoad`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-31T08:14:40.593

尝试 self.cancelButton.backgroundColor = [UIColor redColor]; 看看有没有出现。

默认情况下使用代码创建的自定义按钮没有背景图像或颜色，您需要手动指定它们。

# python - python中的矩阵创建

> ID：12211260
> 
> 赞同：0
> 
> 时间：2012-08-31T08:07:01.860
> 
> 标签：python, matrix

在一段代码中，我发现了以下内容

```
M = [3,4,5]

from math import *

class matrix:

    # implements basic operations of a matrix class

    def __init__(self, value):
        self.value = value
        self.dimx = len(value)
        self.dimy = len(value[0])
        if value == [[]]:
            self.dimx = 0

    def zero(self, dimx, dimy):
        # check if valid dimensions
        if dimx < 1 or dimy < 1:
            raise ValueError, "Invalid size of matrix"
        else:
            self.dimx = dimx
            self.dimy = dimy
            self.value = [[0 for row in range(dimy)] for col in range(dimx)]

    def identity(self, dim):
        # check if valid dimension
        if dim < 1:
            raise ValueError, "Invalid size of matrix"
        else:
            self.dimx = dim
            self.dimy = dim
            self.value = [[0 for row in range(dim)] for col in range(dim)]
            for i in range(dim):
                self.value[i][i] = 1

    def show(self):
        for i in range(self.dimx):
            print self.value[i]
        print ' '

    def __add__(self, other):
        # check if correct dimensions
        if self.dimx != other.dimx or self.dimy != other.dimy:
            raise ValueError, "Matrices must be of equal dimensions to add"
        else:
            # add if correct dimensions
            res = matrix([[]])
            res.zero(self.dimx, self.dimy)
            for i in range(self.dimx):
                for j in range(self.dimy):
                    res.value[i][j] = self.value[i][j] + other.value[i][j]
            return res

    def __sub__(self, other):
        # check if correct dimensions
        if self.dimx != other.dimx or self.dimy != other.dimy:
            raise ValueError, "Matrices must be of equal dimensions to subtract"
        else:
            # subtract if correct dimensions
            res = matrix([[]])
            res.zero(self.dimx, self.dimy)
            for i in range(self.dimx):
                for j in range(self.dimy):
                    res.value[i][j] = self.value[i][j] - other.value[i][j]
            return res

    def __mul__(self, other):
        # check if correct dimensions
        if self.dimy != other.dimx:
            raise ValueError, "Matrices must be m*n and n*p to multiply"
        else:
            # subtract if correct dimensions
            res = matrix([[]])
            res.zero(self.dimx, other.dimy)
            for i in range(self.dimx):
                for j in range(other.dimy):
                    for k in range(self.dimy):
                        res.value[i][j] += self.value[i][k] * other.value[k][j]
            return res

    def transpose(self):
        # compute transpose
        res = matrix([[]])
        res.zero(self.dimy, self.dimx)
        for i in range(self.dimx):
            for j in range(self.dimy):
                res.value[j][i] = self.value[i][j]
        return res

    # Thanks to Ernesto P. Adorio for use of Cholesky and CholeskyInverse functions

    def Cholesky(self, ztol=1.0e-5):
        # Computes the upper triangular Cholesky factorization of
        # a positive definite matrix.
        res = matrix([[]])
        res.zero(self.dimx, self.dimx)

        for i in range(self.dimx):
            S = sum([(res.value[k][i])**2 for k in range(i)])
            d = self.value[i][i] - S
            if abs(d) < ztol:
                res.value[i][i] = 0.0
            else:
                if d < 0.0:
                    raise ValueError, "Matrix not positive-definite"
                res.value[i][i] = sqrt(d)
            for j in range(i+1, self.dimx):
                S = sum([res.value[k][i] * res.value[k][j] for k in range(self.dimx)])
                if abs(S) < ztol:
                    S = 0.0
                res.value[i][j] = (self.value[i][j] - S)/res.value[i][i]
        return res

    def CholeskyInverse(self):
        # Computes inverse of matrix given its Cholesky upper Triangular
        # decomposition of matrix.
        res = matrix([[]])
        res.zero(self.dimx, self.dimx)

        # Backward step for inverse.
        for j in reversed(range(self.dimx)):
            tjj = self.value[j][j]
            S = sum([self.value[j][k]*res.value[j][k] for k in range(j+1, self.dimx)])
            res.value[j][j] = 1.0/tjj**2 - S/tjj
            for i in reversed(range(j)):
                res.value[j][i] = res.value[i][j] = -sum([self.value[i][k]*res.value[k][j] for k in range(i+1, self.dimx)])/self.value[i][i]
        return res

    def inverse(self):
        aux = self.Cholesky()
        res = aux.CholeskyInverse()
        return res

    def __repr__(self):
        return repr(self.value)

for n in range(len(M)):
    Z = matrix([[M[n]]])
    Z.show() 
```

现在，如果我运行代码，我会得到以下输出：

```
[3]
[4]
[5] 
```

现在我不明白输出的含义以及如何解释这个输出。特别是上面的以下代码行我无法理解

```
Z = matrix([[M[n]]]) 
```

谁能解释一下代码的输出和上面的单行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:22:15.017

该代码创建三个 1x1 矩阵，即三个矩阵，其中每个矩阵包含一个元素，并打印它们。这就是`[3]`, `[4]`，`[5]`您会看到：三个 1x1 矩阵。

对于`[[M[n]]]`：矩阵构造函数需要一个矩阵值，它是一个二维数组。这解释了`[[ .. ]]`. 您可以通过调用构造一个 2x2 单位矩阵

```
data = [ [1,0], [0,1] ]
matrix(data) 
```

（这是一个包含两个其他列表的列表，每个列表都有两个元素。）

在这种情况下，每个矩阵都用一个元素初始化，恰好是`M[n]`.

代码可以简化为：

```
for n in M:
  Z = matrix([[n]])
  Z.show() 
```

这使它更容易阅读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:44:33.183

最后一个 for 循环是决定输出的循环：

```
for n in range(len(M)):
    Z = matrix([[M[n]]])
    Z.show() 
```

由于`M=[3,4,5]`，这将调用后两行三次：

```
Z = matrix([[3]])
Z.show()
Z = matrix([[4]])
Z.show()
Z = matrix([[5]])
Z.show() 
```

*每次我们设置`Z`为 1x1 矩阵，例如`[[3]]`，并应用`show`矩阵方法，它基本上`Z`以很好的方式打印。*

# java - 如何解析 Eclipse 插件中注释属性引用的常量值？

> ID：12211268
> 
> 赞同：0
> 
> 时间：2012-08-31T08:07:18.520
> 
> 标签：java, eclipse-plugin, eclipse-jdt

我正在编写一个 Eclipse 插件，它从注释中提取值并将其显示在视图中。其中一个属性是字符串类型，有时它设置为常量。

例如：

```
@Annotation(attribute=Constant.SOME_CONSTANT) 
```

现在我的问题是：当我从注释中提取部分时，我想解析常量后面的实际值。使用eclipse可以吗？如果是，我该怎么做？

到目前为止我所拥有的：

```
if (pair.getValueKind() == IMemberValuePair.K_QUALIFIED_NAME) {
    System.out.println("Constant");
    idValue = (String) pair.getValue();
} 
```

这样我就可以根据上面的示例“Constant.SOME_CONSTANT”得到，但我想要“常量值”。

基本上，eclipse似乎能够以某种方式做到这一点，因为当您将鼠标光标悬停在悬停窗口中时，它可以显示已使用常量的实际值。

# java - wsdl2java xmlbeans 数据绑定问题

> ID：12211269
> 
> 赞同：1
> 
> 时间：2012-08-31T08:07:26.690
> 
> 标签：java, data-binding, axis2, wsdl2java, xmlbeans

我用 wsdl2java 生成了 java-class 文件并使用了 xmlbeans 数据绑定。由于许多错误，例如无法编译生成的文件：

> 错误：找不到符号 [javac] 返回 WrappedType.get().xgetPolicyGroup();
> 
> 错误：找不到符号 [javac] 返回 WrappedType.get().xgetPolicyPresharedKey();

这是与第一个错误匹配的生成代码示例：

```
private com.sample.webservice.PolicyGroupType getPolicyGroup(com.sample.webservice.PolicyGroupDTODocument wrappedType)
{
    return wrappedType.get().xgetPolicyGroup();
} 
```

PolicyGroupDTODocument 定义如下：

```
public interface PolicyGroupDTODocument extends org.apache.xmlbeans.XmlObject 
```

和实施为

```
public class PolicyGroupDTODocumentImpl extends org.apache.xmlbeans.impl.values.XmlComplexContentImpl implements com.sample.webservice.PolicyGroupDTODocument 
```

我想，get 和 xget 方法在某种程度上是从 XmlObject 继承的。生成的代码或生成过程有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:41:56.853

尝试使用不同版本的 Axis2。具有讽刺意味的是，我发现有时代码可以在使用不同版本生成后进行编译。运行并编译后，请确保您使用相同版本的 Axis 来执行代码，否则您将得到无数其他错误。

我得到了不同的结果，在 1.4、1.5.6 和 1.6.0 之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:47:39.763

很奇怪...要回答您的问题，请提供以下详细信息：

1.  您在运行 wsdl2java 时提供了哪些命令选项。[您可以在此链接](http://axis.apache.org/axis2/java/core/docs/reference.html)中找到所有选项。

2.  当您运行 Wsdl2Java 时，它会打印如下消息：Using Axis2_home:..... and using Java_HOME.....您能提供这些值吗？

3.  我假设您将所有源代码文件放在一个目录中。那么你什么时候遇到编译问题。您是想在命令行上使用 javac 还是使用 Eclipse 之类的 IDE 来导入所有文件并编译它，还是想用它创建一个 jar？

    确保您使用与上述步骤 2 中相同的 JDK，并使用与步骤 2 中相同的轴 jar。确保您设置的类路径是正确的。你能提供你正在设置的类路径的值吗？很可能与类路径问题有关。

**update#1** 尝试以下步骤： 1\. 尝试在没有 -b 选项的情况下运行 wsdl2java 并查看是否出现错误。2\. 由于你的 java 包是 com.sample.webservice 所以，你必须使用命令从 com 文件夹的父目录编译： javac -d 。-g com/sample/webservice/*.java
请注意 -d 选项被传递，以便 javac 编译器强制构建包结构。和 -g 选项将为您提供详细的调试输出。

# ruby-on-rails - 在活动记录中使用 find_each 进行分页

> ID：12211277
> 
> 赞同：0
> 
> 时间：2012-08-31T08:08:00.843
> 
> 标签：ruby-on-rails, activerecord, will-paginate

我有大量的记录要显示，并使用 find_each 分解了查询：

```
 - Syslog.find_each(:batch_size => 2000) do |s|
   = s.something 
```

问题是试图引入分页。我试过 will_paginate （3.0.3）：

```
 - Syslog.paginate(:page => params[:page], :per_page => 10).find_each(:conditions => {  }, :batch_size => 2000 ) do |s| 
```

有没有办法对这样的大量记录进行分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:18:55.993

尝试使用 where on paginate 触发查询，如下所示

`Syslog.paginate(:page => params[:page], :per_page =>10).where(conditions: "your condition")`

那应该工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:10:35.553

使用 will_paginate 3.0.3，我发现实际的解决方案是这样做：

```
Model.accessible_by(current_ability).page(params[:page]).order('id DESC') 
```

在 will_paginate [wiki](https://github.com/mislav/will_paginate/wiki)上找到了。

使用它，我不需要 find_each 或批量大小，并且可以快速加载数十万条记录。

感谢@prem 的初步帮助。加一为协助。

# javascript - MVC + 访问控制器中的隐藏字段

> ID：12211280
> 
> 赞同：0
> 
> 时间：2012-08-31T08:08:34.140
> 
> 标签：javascript, asp.net-mvc

我正在尝试为我的隐藏字段分配一个值并在我的控制器中访问它，在分配隐藏字段中的值之后，我将执行一个删除操作，该操作在函数结束时将重新加载页面，这是它将访问我的'SearchResult' ActionResult 再次，但是我无法获得隐藏字段的值，请帮助我在这里做错了什么。谢谢：

```
 <script type="text/javascript">

        function storeValues() {
            var searchString = $('#searchString').val();
            $("#storeFields").val(searchString);
        }

        function confirmDeletion() {
            $.ajax({
                cache: false,
                type: "POST",
                url: '@(Url.Action("DeleteEntry", "Admin"))',
                data: '{"id": "' + delId + '"}',
                contentType: "application/json; charset=utf-8",
                success: function (msg) {
                    if (msg.data === "success") {
                        $('#deleteModal').modal('hide');
                        $('#hideButton').hide();
                        location.reload();
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) { }
            });
        }

    </script>
        <input type="hidden" id="storeFields" name="storeFields" />
        <input type="image" id="searchbutton" onclick="storeValues();" src="@Url.Content("~/images/magnifying-glass.png")" width="30" height="30"/>

        [HttpGet]
        [Authorize]
        [AcceptVerbs(HttpVerbs.Get)]
        public ActionResult SearchResult(int? page, string storeFields)
        {
            var entries = unitOfWork.EntryRepository.GetAllWinners_SearchByEmail("True", "", 1);

            var day = 1;

            var pageNumber = page ?? 1;
            var onePageOfEntries = entries.ToPagedList(pageNumber, 10);

            if (day == 2)
            {
                return View("DayTwo", onePageOfEntries);
            }
            return View("Index", onePageOfEntries);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:56:56.307

而不是`location.reload()`您可以使用`window.location.replace(url)`将隐藏字段值作为查询字符串传递。

# wpf - 相对 URI 路径无法正常工作

> ID：12211284
> 
> 赞同：2
> 
> 时间：2012-08-31T08:09:01.147
> 
> 标签：wpf, path

我正在使用这些方法动态加载图像和资源目录，但它们并非在每种情况下都有效

```
new Uri(@"pack://application:,,/Images/lession_tab.png"); 
```

此方法不适用于图像，但适用于资源文件。

```
new Uri("/project;component/Resources/Dictionary1.xaml", UriKind.Relative); 
```

此方法不适用于资源目录，但适用于图像。

如果我得到这个正确的**打包：//应用程序**工作以获取本地组装路径，那么为什么这不适用于图像
它给出异常**找不到资源'images/lession_tab.png'。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:39:10.457

IIRC，默认情况下，图像是“作为内容”而不是“作为资源”添加到项目中的，我不确定您是否可以使用此 URI 语法引用“内容”。他们有什么 buildaction 他们有什么？资源还是内容？如果是内容，我认为你应该只使用像“/blah/image.png”这样的纯 URL。检查[http://msdn.microsoft.com/en-us/library/aa970069.aspx](http://msdn.microsoft.com/en-us/library/aa970069.aspx)虽然他们在一些地方有一些奇怪的措辞..

另一件事是 pack/application**有三个逗号**：就像`pack://application:,,,/ContentFile.xaml`不是两个！每个 ',' 代表一个空的子定位器，因此请确保您尝试使用三个，因为位置含义会发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:37:57.377

尝试设置 Build Action = Resource 和 Copy to OutputDirectory = Do not copy 第一种情况。

您还可以使用以下代码段加载“资源”项：

```
public static class UriHelper
{
    /// <summary>
    /// Gets absulute URI for provided relative path
    /// </summary>
    /// <param name="baseType">Base type for ussage as URI root</param>
    /// <param name="relativePath">Relative path</param>
    /// <returns>Absolute Uri</returns>
    public static Uri GetUri(Type baseType, string relativePath)
    {
        Assembly oAssembly = Assembly.GetAssembly(baseType);
        AssemblyName oName = oAssembly.GetName();
        return new Uri( 
                String.Format(
                    "pack://application:,,,/{0};v{1};component/{2}",
                    oName.Name,
                    oName.Version.ToString(),
                    relativePath), 
                UriKind.Absolute);
    }
} 
```

# c# - 在 try 块中尝试 catch - 异常应该调用相同的函数

> ID：12211286
> 
> 赞同：2
> 
> 时间：2012-08-31T08:09:13.450
> 
> 标签：c#, .net, exception

如果我有这样的东西怎么办：

```
public static void DoSomething()
{
  try
  { 
    //some code
    try
    {
      //some other code
    }
    catch (Exception e)
    {
      log.Error("At the end something is wrong: " + e);
      FunctionA(); //same function as in the first exception
    }
  }
  catch (Exception e)
  {
    log.Error("At the start something wrong: " + e);
    FunctionA();
  }
} 
```

所以我有一个尝试抓住另一个。异常应该是不同的，我想用不同的记录器来处理它们。但是假设我想为这两个异常调用相同的函数。我必须写`FunctionA()`2次。这可以吗？或者这种类型的异常还有其他问题吗？建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:12:00.460

您可以将单个 try 块与多个 catch 块一起使用；并且您也可以使用 finally 语句来执行某些代码段，无论是否有异常。

在函数中使用多个 try-catch 块通常不是一个好主意。此外，最好在发生异常的地方处理异常。

```
public static void DoSomething()
{
  try
  { 
    //some code
  }

  catch (ExceptionA e)
  {
    // exception is ExceptionA type
    log.Error("At the end something is wrong: " + e);
    FunctionA(); //same function as in the first exception    
  }
  catch (ExceptionB e)
  {
    // exception is ExceptionB type
    log.Error("At the start something wrong: " + e);
    FunctionA(); //same function as in the first exception    
  }
  finally
  {
        //you can do something here whether there is an exception or not
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:15:45.073

所以你想在所有例外情况下调用一个方法。然后我会使用一个`Boolean`变量来存储是否全部成功执行。然后你可以`FunctionA`在最后相应地调用：

```
public static void DoSomething()
{
    bool success = true;
    try
    {
        //some code
        try
        {
            //some other code
        } catch (Exception ex)
        {
            success = false;
            try
            {
                //some other code
            } catch (ExceptionA eA)
            {
                log.Error("At the end, something went wrong: " + eA);
            } catch (ExceptionB eB)
            {
                log.Error("At the end, something else went wrong: " + eB);
            }
        }
    } catch (Exception ex)
    {
        success = false;
        log.Error("At the start something wrong: " + ex);
    }

    if(!success)
        FunctionA();
} 
```

但是，如果您想在任何情况下调用此方法，这意味着无论是否引发异常，您都可以使用[`finally`](http://msdn.microsoft.com/en-us/library/zwc8s4fz.aspx). 如果您想清理资源，它也很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:26:46.210

如果您更改`DoSomthing`为重新抛出这样的异常，

```
public static void DoSomething()
{
  try
  { 
    //some code
    try
    {
      //some other code
    }
    catch (Exception e)
    {
      log.Error("At the end something is wrong: " + e);
      throw;
    }
  }
  catch (Exception e)
  {
    log.Error("At the start something wrong: " + e);
    throw;
  }
} 
```

这是有道理的，因为记录异常并没有真正处理它，我怀疑`FunctionA`是否会这样做，但是...。当您调用 时`DoSomething`，您可以捕获任一异常。

```
static void CallDoSomething()
{
    try
    {
       DoSomething();
    }
    catch
    {
       FunctionA();
    }
} 
```

或者，如果您真的想在同一个函数中执行此操作。

```
public static void DoSomething()
{
    try
    {
        try
        { 

            // some code

            try
            {

                // some other code

            }
            catch (Exception e)
            {
                log.Error("At the end something is wrong: " + e);
                throw;
            }
        }
        catch (Exception e)
        {
            log.Error("At the start something wrong: " + e);
            throw;
        }
    }
    catch (Exception) // I include the type in the hope it will be more derived.
    {
        FunctionA();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:20:39.010

You could put your code into a reusble method e.g.

```
public void LogIfSomeException(Action action, string message)
{
    try
    {
        action();
    }
    catch (SomeException e)
    {
        log.Error(message + e);
        FunctionA();
    }
} 
```

Which you could use like:

```
public static void DoSomething()       
{
    LogIfSomeException(() => {
       // start code
       LogIfSomeException(() => {
          // end code
       }, "At the end something is wrong");
    }, "At the start something is wrong");

} 
```

# android - Android：部分设备支持 wmv 格式

> ID：12211290
> 
> 赞同：0
> 
> 时间：2012-08-31T08:09:25.570
> 
> 标签：android, video, format, wmv

为什么有些安卓设备支持wmv视频格式，有些不支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:12:34.033

这取决于设备上存在的解码器。WMV 是一种 Microsoft 专有格式，您需要获得他们的许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:13:58.907

Android 不正式支持 wmv 视频格式。[在此处](http://developer.android.com/guide/appendix/media-formats.html#core)查看支持的媒体格式列表

# asp-classic - 包含在经典 asp IIS 7.5 Windows Web Server 2008 R2 中无法访问的文件

> ID：12211304
> 
> 赞同：0
> 
> 时间：2012-08-31T08:10:15.757
> 
> 标签：asp-classic, iis-7.5, windows-server-2008-x64

我正在尝试在 Windows WebServer 2008 R2 中使用 IIS 7.5 运行 asp 应用程序。我收到以下错误

> 活动服务器页面错误“ASP 0126”
> 
> 找不到包含文件
> 
> /VD/default.asp，第 2 行
> 
> 找不到包含文件“/inc/abc.asp”。

我正在使用以下标签来包含

```
<!-- #include virtual="/inc/abc.asp" --> 
```

我还尝试启用父路径并使用 file="..\inc\abc.asp"

我还使用 .Net Version = No Managed Code Managed Pipeline Mode = classic 创建了一个用于经典 asp 的新应用程序池

仍然无法包含asp文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:08:56.073

我使用的是默认网站并在该网站下创建了虚拟目录。默认网站指向 c:\inetpub\wwwroot VD 指向完全不同的路径，例如 C:\Myproj\Web

下面一行中的虚拟如何指向 c:\inetpub\wwwroot 而不是 C:\Myproj\Web [include virtual="/inc/abc.asp"]

因此它没有找到 inc 文件夹。

我删除了虚拟目录并仅使用了站点..并将站点路径指定为 C:\Myproj\Web。

问候阿米特

# spam - 呼吁对提议的蜜罐技术提供反馈，以防止垃圾邮件

> ID：12211305
> 
> 赞同：1
> 
> 时间：2012-08-31T08:10:24.027
> 
> 标签：spam, spam-prevention, honeypot

我即将实现一个需要某种形式的垃圾邮件预防的网络表单。我想避免涉及用户输入的垃圾邮件预防技术，并且在这种情况下与 Akismet 集成是多余的（如果少量垃圾邮件确实通过也可以）。我也更愿意避免涉及 javascript 的技术——再次强调用户体验是重中之重，我不想在没有 javascript 的设备上打折用户。

一种常见的技术是使用 CSS 隐藏的蜜罐表单字段，因此最终用户不可见，但垃圾邮件机器人可以看到。理想情况下，这应该有一个诱人的名称，如“name”或“email_address”。但是我担心这些可能由浏览器（或其他第 3 方）表单自动完成工具填写，因此将合法提交的内容识别为垃圾邮件。

这让我想到了自动完成工具会忽略的表单元素，但垃圾邮件机器人会尝试使用。复选框输入是首先想到的 - 许多表单都包含一个复选框，类似于“请接受我们的条款和条件”。垃圾邮件程序肯定会尝试将其标记为已检查？所以，也许一个隐藏的复选框是一个可以接受的解决方案：

```
<div class="hidden">
  <label>
    Are you not a human?
    <input type="checkbox" name="accept_terms" value="1" />
  </label>
</div> 
```

没有 CSS 的用户会看到该字段，这不是很好，但这将是一小部分用户，并且标签应该说明他们不应该勾选该框。

不过，我主要担心的是我不确定大多数垃圾邮件机器人如何与复选框交互。这种技术会奏效吗？

请注意：这并不是要引发对各种垃圾邮件预防技术的讨论——特别是为了获得有关该技术的反馈。

谢谢！

编辑：`<div class="hidden">`可以很容易地`<div class="abc">`，提供`.abc { display: none; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:18:23.033

I honestly don't think someone writing a spam-bot would try to interact with hidden fields. They are trying to mimic human behavior, with normal browsers, and those don't see anything "hidden".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T21:13:53.163

我自己也使用这种方法，但最近 SpamBots 变得很聪明。

我刚刚看到的另一种方法是 TIMER，虽然更难实现。因此，如果他们至少没有花费最少的时间来填写它，那么它可能是一个垃圾邮件机器人。虽然，如果他们使用一些东西来自动填写，那么他们可能会很快填写。

以下是该方法的工作原理： http: [//pageaffairs.com/notebook/contact-form-honeypots](http://pageaffairs.com/notebook/contact-form-honeypots)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-28T13:25:43.287

我知道这是一个老问题，但我认为它越来越重要，因为（根据我的经验）蜜罐技术是有效的。我昨天刚刚就类似问题提供了反馈，因此[我将在此处删除该链接](https://stackoverflow.com/questions/3622433/how-effective-is-the-honeypot-technique-against-spam/55386217#55386217)，而不是重复。

我认为，诀窍在于了解机器人是如何工作的。例如：它们是为提高效率而设计的，这意味着速度，这意味着它们填写和提交表单的速度比人类快得多。任何与人类行为不同的东西都可以成为阻止他们的目标。无论它们可能如何发展，这是要保持的关键理解。

# c# - Windows 8 Metro 应用程序以编程方式分配按钮样式 C#

> ID：12211312
> 
> 赞同：0
> 
> 时间：2012-08-31T08:11:05.717
> 
> 标签：c#, windows-8, microsoft-metro

我正在尝试在 C# 中以编程方式将样式设置为按钮，我尝试过但没有完成，我在 XAML 中将样式设置为按钮，因此它工作正常。但是在 C# 中以编程方式我不知道该怎么做..

在 XAML 中我确实喜欢这样

```
Style="{StaticResource DefaultMusicButtonStyle}" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T12:51:54.210

```
testButton.Style = Resources["DefaultMusicButtonStyle"] as Style; 
```

# ios - 当用户单击alertview时从sqlite数据库中删除记录

> ID：12211314
> 
> 赞同：1
> 
> 时间：2012-08-31T08:11:09.907
> 
> 标签：ios, uitableview, sqlite, uialertview

我有一个名为的 db 表`FINALORDER`，其中填充了一些数据，然后显示在 tableview 中。

我在`alertview`里面插入了一个`didSelectRowAtIndexPath`..

```
 alert=[[UIAlertView alloc]initWithTitle:@"Cancel Order" message:@"Do you want to cancel the order" delegate:self cancelButtonTitle:@"dismiss" otherButtonTitles:@"Ok",nil];
    [alert show];
    [alert release]; 
```

委托方法如下：

```
 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
 {
const char *dbpath = [databasePath UTF8String];
sqlite3_stmt *statement;
if(buttonIndex==1)
{
    NSString *deleteSQL = @"DELETE FROM FINALORDER WHERE itemname=?"; 

    if (sqlite3_prepare_v2(database, [deleteSQL UTF8String], -1, &statement, NULL) != SQLITE_OK) 
        NSLog(@"%s error preparing %s", __FUNCTION__, sqlite3_errmsg(database)); 
    if (sqlite3_bind_text(statement, 1, [itemname UTF8String], -1, NULL) != SQLITE_OK) 
        NSLog(@"%s error binding %s", __FUNCTION__, sqlite3_errmsg(database)); 
    if (sqlite3_step(statement) != SQLITE_DONE) 
        NSLog(@"%s error executing %s", __FUNCTION__, sqlite3_errmsg(database)); 
    if (sqlite3_finalize(statement) != SQLITE_OK) 
        NSLog(@"%s error finalizing %s", __FUNCTION__, sqlite3_errmsg(database));

}
 } 
```

我应该如何获得可以代替问号的项目名称？请注意，我的数据库包含以下字段`itemname,quantity,totalcost`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:24:39.480

在 didSelectRowAtIndexPath 中，将名称存储在类变量中，然后使用它。

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
NSArray *names = [cell.textLabel.text componentsSeparatedByString:@" "];
NSString *temp;
for (int i=0; i<[names count]-2; i++) 
{
   if (!temp) 
   {
         temp = [names objectAtIndex:i];
   }
   else
   {
         temp = [NSString stringWithFormat:@"%@ %@",temp, [names objectAtIndex:i]];
   }
}
self.itemName = temp; 
```

并使用它

```
 NSString *deleteSQL = [NSString stringWithFormat:@"DELETE FROM FINALORDER WHERE itemname=%@",self.itemName]; 
```

希望能帮助到你。快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:42:43.860

你可以按照@AnshukGarg 的建议去做，或者按照我的做法去做。您可以创建自己的自定义类来处理 UIAlertView。

例如：

```
 DataAlertThing.h

            #import <Foundation/Foundation.h>

            @protocol DataAlertThingDelegate{
            @required

                -(void)shouldDeleteItem:(ItemType*)itemName;
            }

            @interface DataAlertThing : NSObject <UIAlertViewDelegate>
            @property (nonatomic, weak)id delegate;
            @property (nonatomic, strong) id itemName;

            -(id)initWithItemName:(ItemType*)myItemName;
        @end

    DataAlertThing.m

    #import "DataAlertThing.h"

    @implementation DataAlertThing

-(id)initWithItemName:(ItemType*)myItemName{
   self = [super init];
   if (self !=nil{
   self.itemName = myItemName;
  UIAlertView *alert = [UIalertVIew alloc]init...delegate:self..]
  [alert show];
}
 return self;
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
 {
if(buttonIndex==1)
{ 

   [delegate shouldDeleteItem:self.itemName];

 }
} 
```

希望从上面您对我的建议有足够的了解 - 您将警报逻辑封装在您自己的自定义类中。你也可以在这一点上使用一个块，但我认为今天一个例子就足够了:)

请注意此 ARC 并使用现代约定，因此您无需纠正 @synthesize

在您初始化警报视图的现有代码中。而是初始化这个自定义类。

```
whatever = [[DataAlertThing alloc]initWithItemName:myItemName];
[whatever setDelegate:self]; 
```

并实施以下

```
-(void)shouldDeleteItem:(ItemType*)itemName{
 //do what you need here to delete the record

} 
```

# automation - 使用 puppet 或 chef 在 AWS 上配置两个数据库服务器 (HA)

> ID：12211315
> 
> 赞同：1
> 
> 时间：2012-08-31T08:11:26.410
> 
> 标签：automation, amazon-web-services, chef-infra, high-availability, puppet

如何使用 puppet 或 chef 配置多服务器？

例如，我们需要两台服务器来构建 HA sql。

服务器 A 需要服务器 B 的 IP 以及用户名和密码。服务器 B 还需要服务器 A 的 IP 以及用户名和密码。

但是 IP 是由 AWS 自动生成的。并且密码也是使用 puppet 或 chef 随机生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:50:05.303

解决此问题的一种方法是将 chef 或 puppet 连接到 CloudFormation，这是一种允许以编程方式创建堆栈的 AWS 服务。这个问题的完整答案是全职咨询工作，但这里有一些资源可以帮助您入门：

[CFN 与 Puppet。](https://s3.amazonaws.com/cloudformation-examples/IntegratingAWSCloudFormationWithPuppet.pdf)

[CFN 与厨师。](https://s3.amazonaws.com/cloudformation-examples/IntegratingAWSCloudFormationWithOpscodeChef.pdf)

[CFN 文档。](http://aws.amazon.com/documentation/cloudformation/)

或者，您可以从另一边解决这个问题，从[Chef](http://www.agileweboperations.com/amazon-ec2-instances-with-opscode-chef-using-knife)或[Puppet 中配置 EC2 实例。](http://docs.puppetlabs.com/guides/cloud_pack_getting_started.html)

# android - 点击时如何清除android上的通知

> ID：12211316
> 
> 赞同：0
> 
> 时间：2012-08-31T08:11:36.703
> 
> 标签：android, android-notifications, android-notification-bar

每次我点击通知时，屏幕上都会弹出我用来触发状态窗口中通知的活动。

我想在用户单击它时清除通知，但它每次都会打开活动。

我尝试不仅在通知上使用标志，还在 PendingIntent 和 Intents 上使用标志。

我的代码：

```
NotificationManager nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

Notification not = new Notification(R.drawable.ic_launcher,
        "this is not important", System.currentTimeMillis());

Context context = MainActivity.this;

CharSequence title = "You have been notified";
CharSequence  details = "contiue with work";

not.flags =  Notification.FLAG_AUTO_CANCEL;

Intent intent = new Intent(context, MainActivity.class);
PendingIntent pending = PendingIntent.getActivity(context, 0, intent, PendingIntent. FLAG_ONE_SHOT);

not.setLatestEventInfo(context, title, details, pending);
nm.notify(0, not); 
```

并且：

```
PendingIntent pending = PendingIntent.getActivity(context, 0, intent, 0); 
```

和：

```
PendingIntent pending = PendingIntent.getActivity(context, 0, intent, Notification.FLAG_AUTO_CANCEL); 
```

每次我点击屏幕上出现的通知活动时，我只想清除通知。

这是Logcat

```
09-01 00:21:10.910: E/AndroidRuntime(330): FATAL EXCEPTION: main
09-01 00:21:10.910: E/AndroidRuntime(330): java.lang.IllegalArgumentException: contentIntent required: pkg=nipun.notify id=0 notification=Notification(vibrate=null,sound=null,defaults=0x0,flags=0x10)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.os.Parcel.readException(Parcel.java:1326)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.os.Parcel.readException(Parcel.java:1276)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.app.INotificationManager$Stub$Proxy.enqueueNotificationWithTag(INotificationManager.java:274)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.app.NotificationManager.notify(NotificationManager.java:111)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.app.NotificationManager.notify(NotificationManager.java:91)
09-01 00:21:10.910: E/AndroidRuntime(330):  at nipun.notify.MainActivity$1.onClick(MainActivity.java:49)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.view.View.performClick(View.java:2485)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.view.View$PerformClick.run(View.java:9080)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.os.Handler.handleCallback(Handler.java:587)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.os.Looper.loop(Looper.java:123)
09-01 00:21:10.910: E/AndroidRuntime(330):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-01 00:21:10.910: E/AndroidRuntime(330):  at java.lang.reflect.Method.invokeNative(Native Method)
09-01 00:21:10.910: E/AndroidRuntime(330):  at java.lang.reflect.Method.invoke(Method.java:507)
09-01 00:21:10.910: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-01 00:21:10.910: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-01 00:21:10.910: E/AndroidRuntime(330):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:15:42.437

您不应设置待处理的意图

删除下面的行

```
PendingIntent pending = PendingIntent.getActivity(context, 0, intent, PendingIntent. FLAG_ONE_SHOT); 
```

并将 null 发送到

```
not.setLatestEventInfo(context, title, details, null); 
```

# jquery - 动态编辑和保存下拉列表的值

> ID：12211318
> 
> 赞同：0
> 
> 时间：2012-08-31T08:11:47.680
> 
> 标签：jquery, django

我将 django 表单域渲染为 ModelChoiceField 并使用查询集填充它。但是，除了查询集的默认值之外，我希望用户能够从中选择一个，编辑它（例如添加更多的单词）并将新的编辑值保存在数据库中。这怎么可能？到目前为止，我只设法做一个下拉列表和一个替代组合框，但它们都没有实现所描述的功能。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:21:30.007

这在 Django 的默认情况下是不可能的。我建议根据数据库中的值在模板中手动呈现下拉菜单，然后使用像这样的 jQuery 插件：

[http://coffeescripter.com/code/editable-select/](http://coffeescripter.com/code/editable-select/)

# java - 如何在 java 代码中将 .pptx 上传到我的 skydrive 帐户

> ID：12211329
> 
> 赞同：0
> 
> 时间：2012-08-31T08:12:21.133
> 
> 标签：java, upload, onedrive

我想制作一个程序，将演示文稿上传到我的 skydrive 帐户并返回链接，每个人都可以通过该链接查看此演示文稿。有人有一些示例代码，建议吗？

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:37:52.710

我认为您应该了解 OAuth 和 Skydrive API：http: [//msdn.microsoft.com/en-us/library/live/hh243647.aspx](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx)

以及关于 LiveConnect 的 RESTful 服务：http: [//msdn.microsoft.com/en-us/library/live/hh243648.aspx](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx)

# java - 如何防止 GWT DialogBox 被拖出屏幕？

> ID：12211331
> 
> 赞同：0
> 
> 时间：2012-08-31T08:12:32.997
> 
> 标签：java, gwt

我正在寻找一个简单的解决方案来解决我的 GWT`DialogBox`可以被拖出屏幕的问题。主机有 CSS 规则`overflow:hidden`，因为我不希望出现任何滚动条。

显然，我需要以某种方式将监听器附加到拖动并防止将其带到外面的移动。我只能看到`onMouseMove`, `beginDragging`, 中`endDragging`的方法`DialogBox`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:10:56.383

我建议尝试 gwtquery-dnd。我一直在使用拖放插件，效果很好。它有一个选项来设置您正在寻找的 setContianment(Element elem)。其他一些功能是它具有捕捉功能，因此如果您希望将对话框停靠在某处，您可以捕捉到其他小部件。它还可以指定一个类似于 DialogBox 标题的句柄用于拖动。

[http://code.google.com/p/gwtquery-plugins/wiki/DragAndDropPluginForGWTDeveloppers](http://code.google.com/p/gwtquery-plugins/wiki/DragAndDropPluginForGWTDeveloppers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:58:14.093

您可以调查 com.google.gwt.user.client.ui.DialogBox 源代码并根据需要覆盖所有方法。有几种方法负责将其拖到那里。

不确定您是否可以通过其他方式解决此问题。否则，您需要开发自定义的可拖动弹出面板，我确信这不是一个好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T09:00:33.133

“我们”通过以下方式解决了这个问题：

```
@Override
protected void endDragging(MouseUpEvent event)
{
 int genericMargin = 60;

 int leftMargin = -(this.getOffsetWidth() - genericMargin);
 int lowerMargin = Window.getClientHeight() - genericMargin;
 int rightMargin = Window.getClientWidth() - genericMargin;
 int upperMargin = 0;

 if (this.getAbsoluteLeft() > rightMargin) 
 {this.setPopupPosition(rightMargin, this.getPopupTop()); }

 if (this.getAbsoluteLeft() < leftMargin) 
  { this.setPopupPosition(leftMargin, this.getPopupTop()); }

 if (this.getAbsoluteTop() > lowerMargin) 
 { this.setPopupPosition(this.getPopupLeft(), lowerMargin);}

 if (this.getAbsoluteTop() < upperMargin) 
 { this.setPopupPosition(this.getPopupLeft(), upperMargin);}

 super.endDragging(event);
} 
```

顺便说一句，它可以正常工作！;)

# jmeter - Jmeter-Web 服务-生成令牌密钥

> ID：12211333
> 
> 赞同：1
> 
> 时间：2012-08-31T08:12:41.837
> 
> 标签：jmeter

在 Jmeter 中是否可以调用 ac# dll 生成令牌密钥并将其作为 Web 服务请求的一部分发送。

如果 Jmeter 做不到，请您推荐一些其他可以的工具。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:26:40.020

我不确定这是否可能，但如果您知道令牌是如何生成的，您可以使用`BeanShell Sampler`.

你会在这里找到一些文档：

*   [http://www.beanshell.org/manual/quickstart.html](http://www.beanshell.org/manual/quickstart.html)
*   [http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Sampler](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Sampler)
*   [http://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting](http://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting)

如果您熟悉 Java，这非常简单，您还可以导入 Java 库。

# jsf-2 - JSF2：commandLink 操作方法并不总是被调用

> ID：12211334
> 
> 赞同：0
> 
> 时间：2012-08-31T08:12:42.940
> 
> 标签：jsf-2

我有两个非常相似的用例，一个有效，另一个无效。我已经检查了其他答案中提到的基本内容（JBoss 7.1.1 上的 JSF2.1 和 PrimeFaces 3.3）。

首先是有效的样本：

```
<h:form id="processInstanceList">
    <p:dataTable id="instances" var="processInstance" value="#{processInstanceList}">
    ...
        <p:column>
            <h:commandLink value="#{msg.deleteButtonLabel}"
                action="#{runtimeService.deleteProcessInstance(processInstance.id, 'Cancelled by user')}">
        </h:commandLink> 
```

带有动作方法签名：

```
void deleteProcessInstance(String processInstanceId, String deleteReason); 
```

现在是不起作用的样本：

```
<h:form id="taskGrouplist">
    <p:dataTable id="groupTasks" value="#{groupTaskList}" var="v_task">
    ...
        <p:column>
            <h:commandLink value="&Uuml;bernehmen" action="#{taskList.claimTask(v_task)}"/> 
```

带有动作方法签名：

```
@Named
@RequestScoped
public class TaskList {
    public String claimTask(Task task); 
```

在第二个示例中，传递给操作方法的任务始终为 NULL。如果我只是将任务的属性传递给方法，例如`#{taskList.claimTask(v_task.id)}`（任务有一个返回字符串的 getId() 方法）并将操作方法​​签名更改为`public String claimTask(String id)`......我传入的所有内容都是 NULL。

为什么在第一个样本中没有发生这种情况？在那里我传入了两个字符串，它工作正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:51:57.433

您的 RuntimeService bean 的范围是什么？尝试将您的 TaskList bean 范围更改为 ViewScoped 或 SessionScoped，原因如下：

@RequestScoped：**一个请求范围的 bean 的生命周期正好是一个 HTTP 请求/响应。** 因此，一旦您的带有 commandLinks 的 dataTable 被渲染（HTTP 请求/响应结束），您将丢失**action="#{taskList.claimTask(v_task)}"**调用中对**v_task**参数的所有引用。

 **@ViewScoped：**只要您与同一个 JSF 视图交互，视图范围的 bean 就会存在。** 即使在渲染结束后，由于@ViewScope，您仍然可以对**v_task**对象进行引用。**

# mysql - 如果表单输入字段为空，不保存到数据库？

> ID：12211335
> 
> 赞同：0
> 
> 时间：2012-08-31T08:12:43.177
> 
> 标签：mysql, wordpress, save

我通过functions.php 创建了Wordpress 自定义字段。我的代码工作正常，而且我的输入字段和一些复选框很少。

问题是当我保存帖子时，即使我没有将内容放入表单中，这些行也是在 DB 中创建的。如果未保存字段内容，我想做某种 php 检查并避免在 DB 中创建行。

我尝试了几种方法，但在大多数情况下，它会导致复选框的错误行为。

完整代码在这里：[http ://pastebin.com/embed_js.php?i=Vvnseiep](http://pastebin.com/embed_js.php?i=Vvnseiep)

我很感激你在这件事上的帮助。我不是很有经验。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:38:31.993

这里验证部分开始发挥作用。为什么不能使用 Javascript 在客户端环境本身中验证您的输入，然后允许它访问数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:55:58.267

将所有复选框命名为相同（`name="meta_box_check[]"`）。他们必须仍然有不同的ID。当表单发布时，您将获得一个已签入的值数组`$_POST['meta_box_check']`。然后，您可以检查数组是否为空。您还可以将复选框数据保存为 JSON 数据。这并不总是好的做法，但只会使用一个数据行来保存任何和所有复选框值。

```
<?php
if(!empty($_POST['meta_box_check']))
{ 
   //process your data and save it
   update_post_meta($post_id, 'meta_features_checklist', json_encode($_POST['meta_box_check']));
}
?> 
```

这是一个基本示例，请确保在保存之前进行一些数据验证。

# javascript - Live/Hot node.js服务器源代码编辑

> ID：12211336
> 
> 赞同：0
> 
> 时间：2012-08-31T08:12:44.213
> 
> 标签：javascript, node.js, nodejitsu

我有个问题。

我的问题是，每次我对我的 node.js 服务器代码进行更改时，我都必须重新启动整个事情才能看到结果。

取而代之的是，我记得看到一些关于能够将 chrome 直接导入服务器源代码并“热编辑”它的东西。也就是说，对代码的更改立即生效，服务器继续运行。

我希望我是清楚的。

在服务器实际运行时直接编辑代码（特别是对于小东西）并使其立即生效将是一个实时节省。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:16:01.900

请参阅我对我自己的问题的回答以回答这个问题：[https ://stackoverflow.com/a/11157223/813718](https://stackoverflow.com/a/11157223/813718)

简而言之，有一个名为的 npm 模块可以满足`forever`您的需求。它可以监视源文件并在检测到更改时重新启动节点实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:16:46.597

我不太了解管道到铬的部分......但似乎有一个节点模块可以监听用户定义文件的更改并自动重新启动服务器：

[当我想查看更改时，如何在不重新启动 nodejs 的情况下编辑我的服务器文件？](https://stackoverflow.com/questions/2925940/how-can-i-edit-on-my-server-files-without-restarting-nodejs-when-i-want-to-see-t)

[https://github.com/isaacs/node-supervisor](https://github.com/isaacs/node-supervisor)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-09T06:04:28.017

是的，有这样的事情。

只需利用 Javascript 所谓的邪恶`eval()`功能。（您可能需要类似 websocket 的东西来连接服务器并提醒它有关更改）

我正在实现相同功能的中途，但是如果要保留服务器状态（例如变量的当前值），需要考虑很多事情

关于管道到铬的部分可能是你提到的吗？ [https://github.com/node-inspector/node-inspector/wiki/LiveEdit](https://github.com/node-inspector/node-inspector/wiki/LiveEdit)

# if-statement - VBA 我的 if 语句不起作用

> ID：12211342
> 
> 赞同：2
> 
> 时间：2012-08-31T08:13:12.220
> 
> 标签：if-statement, excel, type-mismatch, vba

我最近才开始在 excel 中学习 VBA，并且一直在网上浏览各种教程，但是在使用 if 语句时遇到了一些问题。根据我在网上获得的知识和我的 VB 知识，我想出了以下代码。

```
Private Sub CommandButton1_Click()
   Dim mynum As Integer, checker As String
   mynum = Range("A1:A10").value

   If mynum > 0 Then
        checker = "check"
   Else
        checker = "missing"
   End If

   Range("B1:B10").value = checker
End Sub 
```

这个想法是，如果 a 列中有一个超过 0 的数字，则检查 b 列中的相邻单元格，但是如果它的 0 或更低的相邻单元格表示丢失（如果这有任何意义），则没有真正的意义，因为我目前正在学习基础知识:)

现在我的问题......基本上当我尝试调试它时，我得到类型不匹配错误，我真的不明白为什么会这样。我知道当我将范围设置为一个单元格而不是多个单元格时它会起作用，所以我最好的猜测是它与此有关。我已经调查过了，但我再次得到的结果只能证明这应该有效。我一定在某处误读了它，但我们将不胜感激。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T08:16:22.983

您不能像这样为您尝试执行的操作分配/检查范围值。一种方法是遍历您的范围。例如

```
Private Sub CommandButton1_Click()
    Dim Rng As Range, aCell As Range

    Set Rng = Range("A1:A10")

    For Each aCell In Rng
        If aCell.Value > 0 Then
            aCell.Offset(, 1).Value = "check"
        Else
            aCell.Offset(, 1).Value = "missing"
        End If
    Next
End Sub 
```

**编辑**

顺便说一句，您不需要 VBA。如果您对非 VBA 解决方案持开放态度，那么只需将此公式放入单元格 B1 并将其复制下来

```
=IF(A1>1,"Check","Missing") 
```

# google-chrome - 视频自动播放显示无 div

> ID：12211345
> 
> 赞同：2
> 
> 时间：2012-08-31T08:13:20.323
> 
> 标签：google-chrome, iframe, fancybox

我有一个 iframe，其中包含需要在 fancybox 中播放的视频。这是代码：

```
<a id="playLink" href="#pageVideo">Link for video   </a>

    <div style="display:none">
      <div id="pageVideo">
       <iframe src="someVideo.mp4?autoplay=true" style="overflow:auto" frameborder="0" height="400" width="650"></iframe></div>
    </div>

$('#homePlayLink').fancybox({
    'padding' : 0,
    'width' : 560,
    'height' : 400        
}); 
```

问题是 Chrome 视频在页面加载时开始播放。因为它在 display none div 中，所以我看不到它，但我听到了音频。如何解决这个问题，所以视频只在花式框中播放 点击链接后？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:47:33.597

您的 iframe src 具有 autoplay = true 参数；这就是为什么它会在页面加载时自动播放。

如何将 iframe src 指向一个空白页面，然后在fancybox 打开时覆盖 href？

```
$("#tip4").click(function() {
  $.fancybox({
        'padding'       : 0,
        'autoScale'     : false,
        'transitionIn'  : 'none',
        'transitionOut' : 'none',
        'title'         : this.title,
        'width'     : 680,
        'height'        : 495,
        'href'          : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
        'type'          : 'swf',
        'swf'           : {
             'wmode'        : 'transparent',
            'allowfullscreen'   : 'true'
        }
  });
  return false;
}); 
```

查看[http://fancybox.net/blog](http://fancybox.net/blog) 第 4 部分：显示 youtube 剪辑。

# magento - 多个网站自定义magento php代码

> ID：12211346
> 
> 赞同：0
> 
> 时间：2012-08-31T08:13:23.223
> 
> 标签：magento

我的 magento 安装中有 9 个网站，然后又有多种语言等，如下所示：

```
US - English
US - Spanish
US - French
UK - English
FR - French 
```

我创建了一个带有自定义代码的 php 文件，用于导出网站订单。这些需要根据国家/地区存储在单独的文件夹中。

我想运行我的导出文件 url，例如[http://example.com/xml/export.php?website=us](http://example.com/xml/export.php?website=us)

但是要从特定网站获取订单，我需要`Mage:app`正确设置我在下面使用的代码：

`Mage::app('base_uk', 'website');`

但是上面的代码不起作用，它总是只从美国商店获取订单，这是`Mage:app()`.

如何设置我的代码以从特定网站获取订单？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:20:26.653

对于产品集合，有 ->setStoreFilter($store_id) 这样的东西。由于每个 $store_id 对于任何给定的网站都是唯一的（即，如果您知道 $store_id，您就知道 $website_id），您可以使用它。

示例代码：

```
$orders = Mage::getModel('sales/order')
    ->getCollection()
    ->addAttributeToSelect("*")
    ->addStoreFilter($store_id) 
```

我的两分钱：为所需的 $website_id 中的所有 $store_ids 运行该代码。

注意：我没有测试这个，只是和你一起思考。可能是此功能不适用于订单集合。我仍然认为您应该尝试找到一个按 $store_id 过滤订单的函数，因为这是 Magento 的方法！

# css - CSS - Div 对象居中？

> ID：12211351
> 
> 赞同：3
> 
> 时间：2012-08-31T08:13:47.533
> 
> 标签：css, html

我只想将 DIV 对象居中到浏览器屏幕。

我觉得应该是这样的。。

```
<div id="root">
    <div id="centeredElement"></div>
</div>

div#root {
    width:100%; 
}
div#centeredElement {
    width:500px;
    height:200px;
    align:center;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:14:53.197

* * *

`text-align:center` **或者** `margin:0 auto;`

像这样

```
div#centeredElement{
text-align:center;
} 
```

**或者**

```
div#centeredElement{
margin:0 auto;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:27:15.303

您有几个选项可以使 div、图像或其他对象居中：

1）div里面的一切

```
<div align="center"> blabla </div> 
```

2) 用于图像或帧

```
<img style="display:block;margin-left:auto;margin-right:auto;" align="center" src="xx.jpg" /> 
```

3）另一个：

```
<div style="width:80%;margin-left:10%;"> blabla </div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T08:14:41.597

改变

> 居中对齐

到

> 边距：0px 自动；

# c - 在 C 中调用的函数从被调用到返回时会发生什么？

> ID：12211352
> 
> 赞同：2
> 
> 时间：2012-08-31T08:13:52.980
> 
> 标签：c, function

每当我读到 C 中的程序执行时，它都很少提及函数执行。我仍在试图找出当程序从另一个函数调用它到它返回的时间开始执行它时，函数会发生什么？函数参数如何存储在内存中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T08:16:28.007

那是未指定的；这取决于实施。正如 Keith Thompson 所指出的，它甚至不必告诉您它是如何工作的。:)

一些实现会将所有参数放在堆栈上，一些会使用寄存器，并且许多使用混合（前*n个*参数传入寄存器，然后它们进入堆栈）。

但是函数本身只是代码，它是只读的，在执行过程中没有什么“发生”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T08:39:17.700

这个问题没有一个正确的答案，这在很大程度上取决于编译器编写者如何确定执行此操作的最佳模型。标准中有很多位描述了这个过程，但大部分是实现定义的。此外，该过程取决于系统架构、您的目标操作系统、优化级别等。

采取以下代码： -

```
int DoProduct (int a, int b, int c)
{
  return a * b * c;
}

int result = DoProduct (4, 5, 6); 
```

MSVC2005 编译器使用标准调试构建选项为上述代码的最后一行创建了这个：-

```
push        6    
push        5    
push        4    
call        DoProduct (411186h) 
add         esp,0Ch 
mov         dword ptr [ebp-18h],eax 
```

在这里，参数被压入堆栈，从最后一个参数开始，然后是倒数第二个参数，依此类推，直到第一个参数被压入堆栈。调用该函数，然后从堆栈中删除参数（`add esp,0ch`），然后保存返回值 - 结果存储在 eax 寄存器中。

这是该功能的代码：-

```
push        ebp  
mov         ebp,esp 
sub         esp,0C0h 
push        ebx  
push        esi  
push        edi  
lea         edi,[ebp-0C0h] 
mov         ecx,30h 
mov         eax,0CCCCCCCCh 
rep stos    dword ptr es:[edi] 
mov         eax,dword ptr [a] 
imul        eax,dword ptr [b] 
imul        eax,dword ptr [c] 
pop         edi  
pop         esi  
pop         ebx  
mov         esp,ebp 
pop         ebp  
ret 
```

该函数所做的第一件事是创建一个本地堆栈帧。这涉及在堆栈上创建一个空间来存储局部变量和临时变量。在这种情况下，保留了 192 (0xc0) 个字节（前三个指令）。它这么多的原因是允许编辑和继续功能有一些空间来放置新变量。

接下来的三个指令保存 MS 编译器定义的保留寄存器。然后刚刚创建的堆栈帧空间被初始化为包含一个特殊的调试签名，在本例中为 0xCC。这意味着`unitialised memory`，如果您在调试模式下看到一个仅包含 0xCC 的值，那么您就忘记了初始化该值（除非 0xCC 是该值）。

一旦所有的内务处理都完成了，接下来的三个指令实现函数的主体，两个相乘。之后，保留的寄存器被恢复，然后堆栈帧被销毁，最后函数以`ret`. 幸运的是，`imul`将乘法的结果放入`eax`寄存器中，因此没有特殊的代码可以将结果放入正确的寄存器中。

现在，您可能一直在想，那里有很多东西并不是真正需要的。你是对的，但调试是为了让代码正确，上面的很多内容都有助于实现这一点。在发布时，有很多可以摆脱的东西。不需要堆栈帧，因此不需要初始化它。没有必要保存保留的寄存器，因为它们没有被修改。事实上，编译器创建了这个：-

```
mov         eax,dword ptr [esp+4] 
imul        eax,dword ptr [esp+8] 
imul        eax,dword ptr [esp+0Ch] 
ret 
```

如果我让编译器来做，它会被内联到调用者中。

还有更多可能发生的事情：在寄存器中传递的值等等。此外，我还没有深入了解浮点值和结构/类如何传递给函数和从函数传递。还有更多我可能遗漏的内容。

# python - 如何根据 request.user 覆盖 django 管理表单外键

> ID：12211355
> 
> 赞同：0
> 
> 时间：2012-08-31T08:14:02.303
> 
> 标签：python, django, django-1.3

* * *

# 管理员.py

```
class PromoAdmin(admin.modelAdmin)
      list_display = ( 'name', 'id', 'category', 'promo_type', 'store', 'brand', 'date_start' )
      form = SampleForm 
```

# 表格.py

```
class SampleForm(forms.ModelForm):
class Meta:
     model = Promo

def __init__(self, request *args, **kwargs):
    super(PromoAdminForm, self).__init__(*args, **kwargs)
    self.fields["store"].queryset = Store.objects.filter(onwer=request.user) 
```

应要求出错

Django 版本：1.3.1 异常类型：TypeError 异常值：
**init** () 至少需要 2 个参数（1 个给定）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:26:26.427

您不能在字段声明中使用 request.user 启动 store 字段。您可以尝试以下方法：

```
class MyAwesomeForm(forms.ModelForm):
    store = forms.ModelChoiceField(Store.objects)
    class Meta:
       model = Promo

def __init__(self, user, *args, **kwargs):
    super(MyAwesomeForm, self).__init__(*args, **kwargs)
    self.fields['store'].queryset = Store.objects.filter(owner=user) 
```

在实例化表单时，您可以传递 request.user 对象。

```
myform = MyAwesomeForm(request.user) 
```

如果你想在管理员中实现这一点，你可以试试[这个](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.queryset)。在管理员中 只提供与登录用户相关的对象提供了覆盖 ModelAdmin.queryset 函数的可能性：

```
class MyModelAdmin(admin.ModelAdmin):
    form = MyAwesomeAdminForm()
    def queryset(self, request):
        qs = super(MyModelAdmin, self).queryset(request)
        if request.user.is_superuser:
            return qs
        return qs.filter(store__owner=request.user)

class MyAwesomeAdminForm(forms.ModelForm):
    class Meta:
       model = Promo 
```

请注意， store__owner 仅在您的促销模型中存储了外键字段时才有效，如下所示：

```
class Promo(models.Model):
    store = models.ForeignKey(Store)

class Store(models.Model):
    owner = models.ForeignKey(User) 
```

我认为也应该可以以某种方式将请求传递给表单的 init 方法。但是没有找到合适的方法去做。

# java - &= 和 |= 在 Java 中

> ID：12211356
> 
> 赞同：2
> 
> 时间：2012-08-31T08:14:08.453
> 
> 标签：java, operators

在一个项目中，我看到以下代码：

```
//f is a File
boolean acceptable = true;
acceptable &= sweepFilename != null;
acceptable &= f.getName().equals(sweepFilename.toString()); // parsable
acceptable &= id == null || id.equals(sweepFilename.getId());
acceptable &= length == null || length.equals(sweepFilename.getLength());
acceptable &= f.getName().toLowerCase().endsWith(SweepFilename.EXTENSION);
acceptable |= f.isDirectory();
return acceptable; 
```

有人可以解释一下`&=`and是什么`|=`意思吗？

我的理解是，如果可接受为真，那么还要检查右侧并将操作的值（假/真）分配给可接受，这样如果它是假的，则不需要检查右侧。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T08:15:27.410

就像

```
a += b; 
```

方法

```
a = a+b; 
```

， 你有

```
a &= b; 
```

意义

```
a = a&b; 
```

当然对于`|=`.

大多数语言中的其他运算符具有相同的构造，其语法继承自 C 语言。看看这个例子：[Linux内核源代码中的“>>=”是什么意思？](https://stackoverflow.com/questions/11246466/what-does-mean-in-linux-kernel-source-code/11246498#11246498)

另请参阅[java 中赋值运算符的完整列表](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T08:18:55.993

`+=`, `-=`, `*=`, `/=`,`&=`和`|=`其他此类运算符在大多数语言中只是简写`a = a + b`和等效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T08:37:17.043

'&' 和 '|' 是位运算符。当与 '=' 运算符一起使用时，这些只是表示的快捷方式：

a&=b 与 a=a&b 相同

现在， a&b 返回什么？它返回逻辑“与”，因此它比较位。至于布尔值（在 Java 中只是命名为常量），它们代表 0 和 1 位（分别代表 'false' 和 'true'）

但是您也可以将它们与其他整数类型（short、int、long）一起使用。

```
boolean a = true;
boolean b = false;
a &= b; // it acts like && and || for boolean values
System.out.println(a); //false

int i = 2;
int j = 3;        
System.out.println(Integer.toBinaryString(i));
System.out.println(Integer.toBinaryString(j));

System.out.println(i&=j); // prints binary '10' == 2 decimal
System.out.println(i|=j); // prints binary '11' == 3 decimal 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:33:38.587

由于 & 不是捷径运算符，它可能不如使用 && 高效。如果你这样做，它可能看起来像这样。

```
return (sweepFilename != null 
        && f.getName().equals(sweepFilename.toString())
        && (id == null || id.equals(sweepFilename.getId()))
        && (length == null || length.equals(sweepFilename.getLength()))
        && (f.getName().toLowerCase().endsWith(SweepFilename.EXTENSION))) 
        ||  f.isDirectory(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T08:34:25.993

语法`x &= y`等价于`x = x & y`

和

语法`x |= y`等价于`x = x | y`

# java - 在 Java 中找不到十进制格式类

> ID：12211362
> 
> 赞同：2
> 
> 时间：2012-08-31T08:14:40.743
> 
> 标签：java

我无法让这段代码工作......我不知道为什么。

[它与本教程http://www.youtube.com/watch?v=meKpmuUI0ds&feature=related](http://www.youtube.com/watch?v=meKpmuUI0ds&feature=related)中的代码相同。

当这个人这样做时，代码可以工作，但我得到了这两个错误：

> Test.java:4：无法找到符号符号：类decimalFormat
> 
> 地点：类测试
> 
> ```
> decimalFormat decFor = new decimalFormat("0.00"); 
> ```
> 
> ^
> 
> Test.java:4：找不到符号
> 
> 符号：类decimalFormat
> 
> 地点：类测试
> 
> ```
> decimalFormat decFor = new decimalFormat("0.00");
> 
>                        ^ 
> ```
> 
> 2 个错误。

**这是我的代码**：

```
public class Test {

    public static void main(String[] args) {

        decimalFormat decFor = new decimalFormat("0.00");
        double money = 15.9;
        double mula = 36.6789;
        double product = money * mula;

        System.out.println(decFor.format(product));
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T08:15:59.003

不是这样的[`DecimalFormat`](http://docs.oracle.com/javase/1.6/docs/api/java/text/DecimalFormat.html)错误`decimalFormat`，使用IDE来帮助你

还添加

```
import java.text.DecimalFormat; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:17:09.260

[http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)

查看其**DecimalFormat ** 的文档，不要忘记 **import**它也

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T08:17:15.753

Java 类名区分大小写，我相信您所追求的类是 DecimalFormat。

Java 类名的约定说它们的开头有一个大写字母，因此即使您没有使用 IDE，这也是一种发现错误的简单方法。

[http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:16:02.177

类的名称是 DecimalFormat，大写的 D 字母。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T08:25:39.547

要明确导入，您可以使用

```
java.text.DecimalFormat decFor = new java.text.DecimalFormat("0.00"); 
```

这并不理想，因为它使代码看起来有点混乱。如果这有效，那么您可以添加导入

```
import java.text.DecimalFormat 
```

# java - Wicket：可变 ListView/DataView 中的链接

> ID：12211370
> 
> 赞同：1
> 
> 时间：2012-08-31T08:14:53.560
> 
> 标签：java, wicket

假设我有一组需要在表格/列表中显示的项目。该集合是高度可变的，因为后台作业和其他用户访问相同的数据。

现在，结果输出必须包含触发基础数据操作的链接。这些操作可能会从集合中移除一个项目，但并不总是这样做。

由于 ListView 的模型（我现在不太确定 DataView）是基于索引的，因此在这种情况下它必然会失败。当我单击指向错误对象的链接时出现错误，因为基础列表的顺序或大小已更改。

所以我需要的是始终引用它们应该操作的对象的自然 ID 的链接。当链接呈现给用户时，我希望呈现的链接始终引用同一个对象，无论在呈现时使用的集合发生什么情况。

想到的最简单的解决方案是使用仅包含操作和 id 的无状态链接，将用户引导到另一个页面。但这有一个明显的缺点，即我首先失去了组件系统提供的所有好处。

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:17:21.490

DataView 不基于索引，请参阅 IDataProvider#model()，因此您非常接近正确答案。

# active-directory - Active Directory UserPrinciple GetAuthorizationGroups 不返回本地组

> ID：12211373
> 
> 赞同：1
> 
> 时间：2012-08-31T08:14:58.910
> 
> 标签：active-directory, directoryservices, userprincipal

我们有一个使用 .Net`DirectoryServices.AccountManagement`命名空间编写的授权例程，`(UserPrinciple).GetAuthorizationGroups()` 它很好地为用户返回嵌套的全局安全组。

我们有一位客户说他们使用“基于角色的访问控制的 Microsoft ADGLP 方法”并且他们也希望返回本地组。

这是否可能作为我们已经在做的事情的一种选择/扩展？

# resize - 如果我通过用鼠标拖动角来调整窗口大小，为什么我添加到 JFrame 的最后一个 JLabel 会移动？

> ID：12211378
> 
> 赞同：0
> 
> 时间：2012-08-31T08:15:11.713
> 
> 标签：resize, jframe, add, jlabel

当我运行这个程序时，带有 6 个按钮的面板出现在屏幕底部，前 3 个标签出现在它们应该出现的位置，但最后一个标签出现在屏幕的中央。此外，当我单击并拖动窗口的右下角（调整窗口大小）时，面板和最后一个标签会移动，因此它们与窗口大小保持在相对位置，但前 3 个标签保持在指定的位置职位。当我取消注释底部添加空白 JLabel 的代码行时，所有 4 个标签现在都在正确的位置，并且当我调整窗口大小时只有面板移动。有人可以解释一下这里发生了什么吗？提前致谢！

```
import javax.swing.*;
import java.awt.*;
public class X extends JFrame{

    private JPanel panel;
    private JButton buttons[];
    private JLabel labels[];
    private Icon images[];

    public X()
    {
        panel = new JPanel();
        panel.setPreferredSize(new Dimension(470,110));
        buttons = new JButton[6];
        labels = new JLabel[4];
        Dimension dim = new Dimension(75,100);

        labels = new JLabel[4];
        images = new Icon[6];

        for(int i = 0; i<6;i++)
            images[i] = new ImageIcon(getClass().getResource("image" + i + ".gif"));

        int j = 5;

        while( j >= 0 ){
            Icon image = images[j];
            buttons[j] = new JButton(image);
            buttons[j].setPreferredSize(dim);
            panel.add(buttons[j]);
            j--;
        }
        add(panel, BorderLayout.SOUTH);

        j = 3;
        while( j>=0){

            Icon image = new ImageIcon(getClass().getResource("image6.gif"));
            labels[j] = new JLabel(image);
            labels[j].setPreferredSize(dim);
            if (j==3){
                labels[j].setBounds(200,135,75,100);
            }
            else if (j==2){
                labels[j].setBounds(313,70,75,100);
            }
            else if (j==1){
                labels[j].setBounds(425,135,75,100);
            }
            else if (j==0){
                labels[j].setBounds(313,200,75,100);
            }

            add(labels[j]);
            j--;
        }

       // add(new JLabel());

    }

    public static void main(String[] args) {
            X frame = new X();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setSize(700,500);
            frame.setVisible(true);

        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:46:07.157

1) 您应该阅读 JPanel/JButton/JLabel 的 Javadocs 及其默认行为。
2）您应该确保您发布的代码可以编译
3）您应该确保您发布的代码说明了您的问题

因为这是您的帖子不符合要求 2) 和 3) 并且您可能没有阅读足够的 1)

# rest - OSS Nexus：如何使用 REST API 以文本形式检索最新版本

> ID：12211385
> 
> 赞同：7
> 
> 时间：2012-08-31T08:15:36.687
> 
> 标签：rest, timestamp, nexus

我想检索最新版本名称（作为文本），以便能够重命名从 Nexus 检索到的具有时间戳的工件。

我所做的是创建一个包含内部 jar 项目、依赖项、相关脚本的多个存档的存档……但是如果打包的 jar 是快照，则存档在下载时会带有时间戳。这些时间戳替换存档的 XXX-SNAPSHOT 扩展名，我无法制作任何自动化脚本来执行某些任务，例如提取存档、重命名目录、创建一些符号链接、...

我在其余的 api 文档中没有找到与此相关的任何内容。有没有一种简单的方法可以用其余的 api 或某种脚本来做到这一点？

谢谢。

编辑：

从下面的答案中，我设法使用 LATEST 而不是版本名称来检索最新的快照版本：

然后使用脚本我可以检索基本版本。

```
#!/bin/bash
VERSION=`curl --silent "http://redmine.saic.int:8081/nexus/service/local/artifact/maven/resolve?r=snapshots&g=com.g2mobility&a=G2-Modem-Mgr&v=LATEST&c=executable&e=tar.gz" | sed -n 's|<baseVersion>\(.*\)</baseVersion>|\1|p'`

VERSION=`echo "$VERSION" | tr -d ' '`

echo "Version is $VERSION" 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T22:13:33.137

Nexus 有以下 REST API 用于描述如何解析 Maven 模块：

*   [神器 Maven 解决](https://repository.sonatype.org/nexus-restlet1x-plugin/default/docs/path__artifact_maven_resolve.html)

# 例子

要获取有关以下工件的详细信息：

```
<groupId>org.cometd.jetty</groupId>
<artifactId>cometd-jetty-client</artifactId>
<version>1.0-SNAPSHOT</version> 
```

使用以下 REST API：

[https://oss.sonatype.org/service/local/artifact/maven/resolve?r=cometd-snapshots&g=org.cometd.jetty&a=cometd-jetty-client&v=1.0-SNAPSHOT&e=jar](https://oss.sonatype.org/service/local/artifact/maven/resolve?r=cometd-snapshots&g=org.cometd.jetty&a=cometd-jetty-client&v=1.0-SNAPSHOT&e=jar)

返回以下报告：

```
<artifact-resolution>
  <data>
    <presentLocally>true</presentLocally>
    <groupId>org.cometd.jetty</groupId>
    <artifactId>cometd-jetty-client</artifactId>
    <version>1.0-20090313.100344-2</version>
    <baseVersion>1.0-SNAPSHOT</baseVersion>
    <extension>jar</extension>
    <snapshot>true</snapshot>
    <snapshotBuildNumber>2</snapshotBuildNumber>
    <snapshotTimeStamp>1236938624000</snapshotTimeStamp>
    <sha1>0cbf7163f19bf4586e27632a1f742dd0c0e0036d</sha1>
    <repositoryPath>/org/cometd/jetty/cometd-jetty-client/1.0-SNAPSHOT/cometd-jetty-client-1.0-20090313.100344-2.jar</repositoryPath>
  </data>
</artifact-resolution> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:50:41.173

这是一个早期删除的帖子，提出了一种从 Maven 存储库内容组装发行版的替代方法：

[Ivy](http://ant.apache.org/ivy)是另一种依赖管理客户端，可以从命令行运行，[如下](http://ant.apache.org/ivy/history/latest-milestone/standalone.html)所示：

```
java -jar ivy.jar -settings ivysettings.xml -dependency org.cometd.jetty cometd-jetty-client 1.0-SNAPSHOT -retrieve "distrib/[artifact]-[revision](-[classifier]).[ext]" 
```

ivy 命令的*检索*选项详细说明了下载的文件应如何在本地存储：

```
-- distrib
   |-- cometd-api-1.0-SNAPSHOT.jar
   |-- cometd-jetty-client-1.0-SNAPSHOT.jar
   |-- cometd-jetty-client-1.0-SNAPSHOT-javadoc.jar
   |-- cometd-jetty-client-1.0-SNAPSHOT-sources.jar
   |-- cometd-jetty-server-1.0-SNAPSHOT.jar
   |-- jetty-6.1.15.jar
   |-- jetty-client-6.1.15.jar
   |-- jetty-sslengine-6.1.15.jar
   |-- jetty-util5-6.1.15.jar
   |-- jetty-util-6.1.15.jar
   `-- servlet-api-2.5-20081211.jar 
```

检索到正确的带时间戳的工件，但保留了“SNAPSHOT”修订号，这就是我理解您正在尝试做的事情。

ivysettings 文件详细说明了下载工件时要使用的存储库：

```
<ivysettings>
    <settings defaultResolver="repos"/>
    <resolvers>
        <chain name="repos">
            <ibiblio name="central" m2compatible="true"/>
            <ibiblio name="cometd-snapshot" root="https://oss.sonatype.org/content/repositories/cometd-snapshots/" m2compatible="true"/>
        </chain>
    </resolvers>
</ivysettings> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-13T22:31:23.610

可以在此处找到 Maven Resolve Nexus REST API 的文档：[https ://maven.java.net/nexus-core-documentation-plugin/core/docs/rest.artifact.maven.resolve.html](https://maven.java.net/nexus-core-documentation-plugin/core/docs/rest.artifact.maven.resolve.html)

# android - 回到Activity时ActionBar恢复为空

> ID：12211386
> 
> 赞同：1
> 
> 时间：2012-08-31T08:15:36.327
> 
> 标签：android, android-activity, android-actionbar, actionbarsherlock

我在 Android 4.0.3 上使用 ActionBarSherlock，所以它可能使用原生的 ActionBar。

当我启动我的应用程序时，一切正常。但是，当我进入主屏幕并等到它被杀死（或者只是更改系统字体，然后它会立即发生）然后再次通过“上次使用”对话框切换到应用程序时，一切都会顺利重新加载，除了 Actionbar 现在有空标签。

所以选项卡在那里，但为空（并且不起作用）。奇怪的是，即使在 Application 对象中调用了 onCreate（如在 TabParentActivity 中，请参见下面的代码），所以理论上应用程序应该已经完全重新启动（而不仅仅是部分地像 onResume...）。

然后当我杀死我的应用程序（通过任务管理器）并重新打开它时，问题就消失了。

我如何在 TabParentActivity 中添加操作栏：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tab_parent);

        //Global initialization
        ...

        ActionBar ab = getSupportActionBar();
        // set defaults for logo & home up
        ab.setDisplayShowHomeEnabled(true);
        ab.setDisplayShowTitleEnabled(false);
        ab.setDisplayHomeAsUpEnabled(false);
        ab.setDisplayUseLogoEnabled(true);
        ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 

...

for(StolScreen s: screensInTabs){
            Tab t = mAb.newTab().setText(s.displayName);
            t.setTabListener(new NormalTabListener(this.mActivity, s));
            mAb.addTab(t);
        }
} 
```

它的样子： [一切正常](https://dl.dropbox.com/u/3556311/all_ok.png) [现在标签为空](https://dl.dropbox.com/u/3556311/actionbar_empty.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:48:16.733

我现在能够自己解决它。原因真的很疯狂：在上面的代码中，我使用 s.displayName 在循环中设置了选项卡的标签。s 属于一个名为 StolScreen 的枚举。

在那里， displayName 通过调用 Tools（之前初始化）进行初始化，该调用从 xml 文件中检索显示名称。当我返回活动时（只有那时），现在实际发生的是在初始化工具之前加载了 StolScreen（在枚举中，字段像静态成员一样加载）。

所以只在标签上放了一个空字符串：D。无论如何，thx 4帮助;）

# symfony - Symfony2 - 在命令中查找标记的服务

> ID：12211396
> 
> 赞同：6
> 
> 时间：2012-08-31T08:16:03.883
> 
> 标签：symfony, dependency-injection, command, symfony-2.1

我想知道是否有办法在 Command 中找到标记的服务。

我有一个扩展的命令`ContainerAwareCommand`，我可以访问容器，但我想获取由特定标签标记的所有服务。例如，我想要这样的东西：

```
$this->getContainer()->findTaggedServiceIds('smtp.transport') 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T08:51:49.790

标记服务仅在依赖注入容器的构建时可用，而不是在运行时可用。因此，要获取具有特定标签的所有服务，您需要构建一个编译器通道，以保存这些服务的列表，然后您可以在您的命令中使用这些服务。这在本文档中都有描述：

[http://symfony.com/doc/current/components/dependency_injection/tags.html](http://symfony.com/doc/current/components/dependency_injection/tags.html)

# java - replaceAll() 和 replaceFirst()。哪个更快更高效？

> ID：12211397
> 
> 赞同：0
> 
> 时间：2012-08-31T08:16:05.313
> 
> 标签：java, regex, string, replace

我正在使用 RegEx 替换字符串。我知道我在那个字符串中搜索的模式可能只出现一次。`replaceAll()`和`replaceFirst()`方法都适用于我的场景。但我正在使用`replaceAll()`方法。

在我的应用程序中，每一毫秒的计算都是宝贵的。

我的选择对吗？哪一个更适合我的场景？有什么比较可取的吗？请指导我。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-31T08:17:26.440

如果每一毫秒对你来说都是宝贵的，那么你应该*衡量*而不是问。无论如何，我的*猜测*（再次：通过测量验证）`replaceFirst()`会更快，因为它可以在第一次匹配后停止而不是搜索其他匹配（在您的情况下不存在）。

您可能还想预编译正则表达式，因为这样可以节省每次调用`replaceFirst()`. 或者寻找一种避免正则表达式的方法，如果它只是一个简单的字符串替换。

但我再次强调：使用分析器找出您花费最多时间的地方并优化该部分。过度优化只调用一次且仅对总运行时间贡献 0.07% 的语句并不是很有用，而忽略它旁边的胖循环，占用了 80% 的运行时间。到目前为止，我的经验是，瓶颈经常出现在最令人惊讶的地方，而*不是*你天真地期待它们的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:28:51.837

当然`replaceFirst()`更快，它会在第一次出现后停止，同时`replaceAll()`会扫描整个输入。

# ios - iOS 编程期间 iPad3 上显示不正确

> ID：12211400
> 
> 赞同：0
> 
> 时间：2012-08-31T08:16:14.750
> 
> 标签：ios, xcode, cocos2d-iphone, resolution, ipad-3

我正在使用 Cocos2D 开发一个 iOS 应用程序，我遇到了一个非常奇怪的问题，如下所示。

一开始只有完整版，在iPad2和3上一切正常。现在，我打算创建一个精简版，所以我在Apple网站上注册了一个新证书。使用 lite 证书，Xcode 中生成的 lite build 在 iPad2 上可以正常工作，但在 iPad3 上的显示变成了屏幕的一半。好像是新证书的问题，能帮我解答一下吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:20:50.007

这不是你的证书。您需要允许在 iPad3 上进行缩放，因为它具有视网膜显示屏。

您还需要提供适当大小的新纹理/图像以利用视网膜显示。您可以使用现有的非视网膜艺术品，它可能看起来还不错。但它看起来并不完美。

我没用过cocos2d。您是否也在使用 GlKit，因为 GLkView 希望您允许在屏幕上进行缩放。

例如，如果您只想升级您已经创建的内容，您可以查找设置视口的位置：

```
int scale = 1; // default is 1 - non-retina. It's adjusted below according to the scale on the device

    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]
        && [[UIScreen mainScreen] scale] == 2.0) {
        scale = [[UIScreen mainScreen] scale];
    }

    // Set the viewport
    glViewport(0, 0, backingWidth*scale, backingHeight*scale); 
```

我不会这样做，或者我不会只这样做，因为它并不能真正正确地解决您的问题。我也很惊讶 cocos2d 还没有内置的方法来处理这个问题。

另外，您呈现的视图是 EAGLView ： UIView 使用 CAEAGLLayer 呈现您的 OPENGL 还是 GLKView。如果您从后者更改它，这也将摆脱问题，就像粘贴的代码将摆脱它一样。两者都不是处理它的最佳方式。但这是对您问题的简单回答，也许其他人会关心写一个更详细的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:08:20.293

解决问题时可以考虑两件事：

1.  确保您的作品副本具有 2 倍分辨率并带有“-hd”后缀，例如“ninja.png”和“ninja-hd.png”。这是 cocos 通过 iOS 执行 @2x 的方式。
2.  在适当的时候检查您的代码中是否启用了视网膜：

    `[[CCDirector sharedDirector] enableRetinaDisplay: YES];`

希望有帮助！如前所述 - 这绝对不是证书问题！（算你走运 ;） ）

# ruby-on-rails - Belongs_to 使用 .to_sym 构建语法

> ID：12211411
> 
> 赞同：1
> 
> 时间：2012-08-31T08:16:51.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我目前有一行代码非常适合构建具有 has_many 关联的对象：

```
object_form_builder.object.send(type.to_sym).build 
```

正如您可能理解的那样，这不适用于 belongs_to 关系，其中语法需要是`build_obect`而不是`object.build`.

有没有办法重新格式化这段代码，以便它可以与 belongs_to 关系一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:39:23.350

你可以简单地这样做：

```
object_form_builder.send("build_#{type}") 
```

# mysql - 在等值连接中查找计数

> ID：12211413
> 
> 赞同：2
> 
> 时间：2012-08-31T08:17:12.410
> 
> 标签：mysql, sql, count

我有两张桌子：主机和活动。每个活动都有一个 hostid。我想知道有多少主持人至少举办了三个活动 - 我想出了以下内容：

```
SELECT COUNT(*) FROM hosts,events
WHERE hosts.id=events.host_id COUNT(hosts.id)>=3 
```

但它给了我错误“无效使用组功能”。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:19:48.850

试试这个：

```
SELECT   hosts.id,count(*)
FROM     hosts 
JOIN     events 
ON       hosts.id=events.host_id
GROUP BY hosts.id
HAVING   count(*)>=3 
```

# php - php如何获取购物车的typeID和ProductID

> ID：12211419
> 
> 赞同：0
> 
> 时间：2012-08-31T08:17:30.347
> 
> 标签：php, function, shopping-cart

嘿，我正在尝试使用 php iv 制作购物车，我与班上的其他学生交谈，他们认为出于某种原因，我的 getProductByTypeId 查询有问题......它会从数据库中获取除我的 ProductID 之外的所有内容。

下面是我的功能...

```
function getProductsByTypeID($TypeID){

//pull in global connection
global $connection;

//execute query to select all product types
$query="select * from product where TypeID = ".$TypeID;
$result = mysql_query($query, $connection);
testQuery($result);

//return list of customers
return $result;
} 
```

# javascript - 为什么我不能使用 jQuery.parseJSON(json) 解析 json 字符串？

> ID：12211421
> 
> 赞同：0
> 
> 时间：2012-08-31T08:17:40.007
> 
> 标签：javascript, json, jquery

我正在尝试解析作为 json 字符串的字符串的响应。在我的网络应用程序的另一个页面中，以下代码运行良好。但它不适用于我正在使用的当前页面。以下是代码：

```
 $.ajax({
    type: 'POST',
    url: 'http://mywebapp.com/sendnames',
    data: {},
    success: function(result) {
        alert('result: '+result);
        var obj = jQuery.parseJSON(result);
        alert('obj: '+obj);

    // doing rest of stuff  
    }

}); 
```

第一个警报出现并显示正确的结果。结果是：

```
 [
   "Richard",
   "Eric",
   "John"
 ] 
```

但第二次警报没有出现。我检查了它，它是一个有效的 json。为什么我不能用 jQuery.parseJSON() 解析这个 json。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:28:31.070

尝试添加返回类型： dataType : json

```
$.ajax({
        type: 'POST',
        url: 'http://mywebapp.com/sendnames',
        data: {},
        dataType:'json',
        success: function(result) {
          console.log('result: '+result);        
        // doing rest of stuff  
        }

    }); 
```

**“json”：**
将响应评估为 JSON 并返回一个 JavaScript 对象。在 jQuery 1.4 中，JSON 数据以严格的方式解析；任何格式错误的 JSON 都会被拒绝并引发解析错误。（有关正确的 JSON 格式的更多信息，请参阅 json.org。） “jsonp”：使用 JSONP 加载到 JSON 块中。添加一个额外的“？callback =？” 到 URL 的末尾以指定回调。通过将查询字符串参数“_=[TIMESTAMP]”附加到 URL 来禁用缓存，除非缓存选项设置为 true。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:32:06.040

替换`$.ajax`为`$.getJSON`。这保证会在`$.parseJSON`内部触发，因此`result`已经是所需的 JS 对象。

```
$.getJSON({
   type: 'POST',
   url: 'http://mywebapp.com/sendnames',
   data: {},
   success: function(obj) {
      alert('obj: '+obj);
      // doing rest of stuff  
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:36:30.193

尝试添加`dataType:'text'`，它将返回字符串作为结果。并且您的代码将按您的预期运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:39:26.917

[在此处查看接受的答案](https://stackoverflow.com/questions/8631977/parsejson-returns-null-on-valid-object)

> 你正在解析一个对象。你解析字符串，而不是对象；jQuery.parseJSON 只接受字符串。

因为`$.ajax`已经解析了数据，`result`所以是 Javascript 对象而不是字符串。`parseJSON`需要一个字符串参数。

FROM [DOCS](http://api.jquery.com/jQuery.ajax/)（更多关于[`.ajax()`数据类型的信息](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)）：

> json 类型将获取的数据文件解析为 JavaScript 对象，并将构造的对象作为结果数据返回。为此，它在浏览器支持时使用 jQuery.parseJSON()；否则它使用 Function 构造函数

.

# cocoa-touch - 过度释放 CGContextRef？

> ID：12211424
> 
> 赞同：0
> 
> 时间：2012-08-31T08:17:59.320
> 
> 标签：cocoa-touch, core-graphics

我遇到了过度释放 CGContextRef 的问题，但我不知道在哪里。文档说应该释放使用 CGBitmapContextCreate 创建的 CGContextRef 但是当我收到错误“ *** -[Not A Type class]: message sent to deallocated instance 0x613d750”

这是我的代码：

```
CGContextRef ctx = CGBitmapContextCreate(NULL, self.size.width, self.size.height,
                                         CGImageGetBitsPerComponent(self.CGImage), 0,
                                         CGImageGetColorSpace(self.CGImage),
                                         CGImageGetBitmapInfo(self.CGImage));

CGContextRelease(ctx); // PROBLEM HERE 
```

如您所见，除了旋转图像和创建 UIImage 之外，这里并没有发生太多事情。任何想法为什么会发生这种情况？

编辑：

我已将示例代码减少到 2 行，但仍然出现相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:31:19.303

检查是否没有与CGImageRelease的发布一起发布。我不记得我曾经遇到的确切问题，但这是 UIImage 释放上下文的问题。尝试注释掉 CGImageRelease(cgimg); 看看 CGContextRelease(ctx); 之后工作。

# algorithm - 在构建有效的穷举搜索算法方面需要帮助

> ID：12211425
> 
> 赞同：4
> 
> 时间：2012-08-31T08:18:02.623
> 
> 标签：algorithm, math, search, combinatorics

有10个按钮。如果按正确的顺序（按顺序按 5 次），这些按钮可以解锁。每次按下按钮都会触发解锁检查。

示例：“密码”是 123456，我按下按钮 0 1 2 3 4 5 6 我从第 6 次按下按钮解锁锁。

我需要设计一种算法，以最有效的方式尝试所有可能的组合（即应该按下最少数量的按钮）。

我可以将按钮编号解释为数字，按顺序将按下按钮的编号解释为数字位置，然后尝试所有 99999 种组合以尝试解锁，但我觉得有一种更有效的算法可以做到这一点。

我可以做些什么来优化这个搜索吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T09:16:45.783

要优化对锁的蛮力攻击，您可以使用[De Bruijn 序列](http://en.wikipedia.org/wiki/De_Bruijn_sequence)。

> 该序列可用于缩短对类似 PIN 码的密码锁的暴力攻击，该密码锁没有“输入”键并接受输入的最后 n 位数字。例如，具有 4 位密码的数字门锁将具有 B(10, 4) 解，长度为 10,000。因此，最多只需要 10,000 + 3 = 10,003 次（因为解是循环的）按压来打开锁。分别尝试所有代码需要 4 × 10,000 = 40,000 次印刷。

# sharepoint - sharepoint 2010 results.aspx 外观

> ID：12211426
> 
> 赞同：1
> 
> 时间：2012-08-31T08:18:05.613
> 
> 标签：sharepoint, search, sharepoint-2010

我对 Sharepoint 2010 比较陌生，所以如果这是一个蹩脚的问题，我们深表歉意。

在具有 Sharepoint 2010 搜索功能的面向公众的网站上，搜索查询会将您带到一个页面[http://www.site.com/searchCenter/results.aspx?k=searchstring](http://www.site.com/searchCenter/results.aspx?k=searchstring)

该页面有一个带有橙色的蓝色标题，一个带有细化的左列，然后在中央列中返回搜索结果。

有没有办法改变该页面的整个外观以适应公共站点的外观并将返回的结果嵌入到页面中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:17:14.453

是的，您只需要修改作为搜索站点应该使用的母版页的 minimum.master。如果您愿意，您应该能够使搜索结果页面看起来与您网站的其他部分完全一样。

# android - 后台应用程序不工作

> ID：12211429
> 
> 赞同：0
> 
> 时间：2012-08-31T08:18:20.600
> 
> 标签：android

我有一个Android应用程序，当应用程序进入后台并且耳机从电话警报开始时移除。前台一切都很好，但是当应用程序进入后台时它不起作用。我在活动onPause（）上编写代码如下

```
@Override
    protected void onPause() {
        try{
        super.onPause();
        registerReceiver(new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {

                if (intent.hasExtra("state")) {
                    int state = intent.getIntExtra("state", 0);
                    if (isHeadPhoneAttached && state == 0) {
                        isHeadPhoneAttached = false;
                        if (isTriggered) {
                                 createNotification();
                                 initTimerCounter();
                                 makeToat();
                                 /*handler.removeCallbacks(sendUpdatesToUI);*/
                                /*callTriggerActivity();*/
                                /*showDialog(Headphone_DIALOG);*/
                                    }
                    } else if (!isHeadPhoneAttached && state == 1) {
                        isHeadPhoneAttached = true;
                    }
                }
            }
        }, new IntentFilter(Intent.ACTION_HEADSET_PLUG));
        /*createNotification();
        initTimerCounter() ;*/

        }
        catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
    } 
```

但它不起作用。请任何人给我一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:38:56.917

您无法确定您的应用程序是否在后台运行，因此在 Activity 的 onPause 方法中注册 BroadcastReceiver 通常是不好的做法。

您应该改用[服务](http://developer.android.com/reference/android/app/Service.html)

# search - Can I combine fuzzy and proximity searches in Apache Lucene's standard syntax?

> ID：12211431
> 
> 赞同：9
> 
> 时间：2012-08-31T08:18:25.327
> 
> 标签：search, lucene, proximity, fuzzy-search, opengrok

I am searching a codebase indexed by [OpenGrok](http://opengrok.github.io/OpenGrok/), the -a option has been enabled to allow the first character of a search term to be a wildcard. I would like to find all occurrences of method `foo` that take some string parameter (`foo("")` with one or more characters in the string) and the method is within 5 words of variable `bar`.

* * *

With the breakup of words provided by the standard tokenizer I can use `+full:"foo bar"~5` to get all `foo(` near `bar`, but excluding the parameterless methods is a problem because `("` is indexed as two whitespace characters, so for example `foo("jar")` *seems to* match `foo AND \ \ AND jar AND \ \"`. The [syntax](http://lucene.apache.org/core/3_6_1/queryparsersyntax.html) doesn't look like it supports a search for this combination (even without the wildcard string rather than `"jar"`) with a `""~5` proximity search. Any ideas on how to achieve all or part of this, given that changing the tokenizer is not an option at the moment?

# android - getParcelable returns null even if passed object is no null

> ID：12211433
> 
> 赞同：3
> 
> 时间：2012-08-31T08:18:38.817
> 
> 标签：android, android-intent, parcelable

I want to pass a parcelable object to an activity to another one. So I implemented a parcelable class to accomplish this. And I coded:

```
Intent intent = new Intent(mainactivity.this, SecondActivity.class);
Object[] object = new Object();
intent.putExtra("Object ", object);
startActivity(intent); 
```

and in the second activity I coded:

```
Object[] object = (Object[]) getIntent().getExtras().getParcelable("object"); 
```

When I pass the object to Intent, it's not null. While, when I get it in the second Activity is null. Do you have any suggestions? Thanks in advance!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T08:20:32.810

Change this:

```
Object object = (Object) getIntent().getExtras().getParcelable("object"); 
```

To this:

```
Object object = getIntent().getExtras().get("Object"); 
```

`getParcelable` should only be used if you are using `putParcelable` or inserting a `Parcelable` object using `putExtra` in the sending part of code.

P.S. also mind the difference of key-name **Object** and **object**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:48:00.790

您可以简单地在调用者中使用：

```
Intent i = new Intent(EditActivity.this, ViewActivity.class);
i.putExtra("myObj", p);
startActivity(i); 
```

在接收器中：

```
Bundle b = i.getExtras();
Person p = (Person) b.getParcelable("myObject"); 
```

希望这对你有帮助

# javascript - onbeforeunload 事件未在我的代码中触发，但其他示例有效吗？

> ID：12211434
> 
> 赞同：1
> 
> 时间：2012-08-31T08:18:38.373
> 
> 标签：javascript, onbeforeunload

像往常一样，我想在离开页面时提醒用户注意未保存的更改。我有这个测试页：

```
<html>
<head>
<title>Testing</title>
<script language="JavaScript1.1" src="https://127.0.0.1:8443/scripts/base.js"></script>
<script language="JavaScript1.1" src="https://127.0.0.1:8443/scripts/edit.js"></script>
<script language="JavaScript1.1">window.onbeforeupload=moveAway</script>
</head>
<body onLoad="init()">
<a href="http://www.google.com">Google</a>
</body>
</html> 
```

moveAway 函数在“edit.js”中定义如下：

```
function moveAway ()
  return "foo";<br>
} 
```

该事件不会触发，或者至少它只是静默离开页面（使用 IE8、Firefox 15 和 Chrome 20）。我已经尝试在 Firebug 中为该函数设置断点，但它永远不会到达断点。我已经从 Web 服务器（一个 SSL 服务器，其测试版本在 127.0.0.1:8443 运行）尝试过，并且我尝试使用浏览器直接打开文件（这就是我第一次使用绝对 URL 的原因两个 <script> 标签）。我试过从脚本标签中删除“src=”属性。

另一方面，此页面有一个确实有效的示例（至少在 Firefox 中）：

[http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm](http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm)

MSDN 上也有一个非常相似的示例，它也有效：

[http://msdn.microsoft.com/en-us/library/ms536907%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms536907%28VS.85%29.aspx)

我真的看不出他们所做的和我正在做的有什么区别。谁能告诉我为什么他们的代码有效而我的无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:58:26.037

使用 jQuery 绑定函数.. 它对我很有用..

见下文

```
$(window).bind('beforeunload', function() { 

    return "Want to leave?";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:23:22.130

你有一个语法错误，函数应该是：

```
function moveAway () {
    return "foo";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:29:28.983

`onbeforeupload`， 真的 ？它应该是`onbeforeunload`。这是拼写错误，还是您的实际代码是这样的？

# javascript - EaselJS onclick not firing

> ID：12211442
> 
> 赞同：2
> 
> 时间：2012-08-31T08:19:04.593
> 
> 标签：javascript, event-handling, dom-events, easeljs

I'm using EaselJS JavaScript library to load some images on an HTML5 canvas element.

They are perfectly loaded and positioned but I can't click them because `onclick` event never fires.

What am I doing wrong?

Here's the code I'm using:

```
<script src="easeljs-0.5.0.min.js"></script>

    <script>
        var canvas;
        var stage;
        var pictures = new Array(5);
        var pictLen = pictures.length;
        var imageCount = 0;
        //
        function init() {
            // cavas instantiation, testCanvas is the id of my canvas element
            canvas = document.getElementById("testCanvas");
            stage = new Stage(canvas);

            for (var i=0;i<pictLen;i++) {

                var img=new Image();
                img.src="img/"+i+".jpg";
                var j=0;

                img.onload = function(e){
                   var b = new Bitmap(e.target);
                   b.x =250*j;
                   b.y = canvas.height/2;
                   b.onClick = clickHandler;
                   j++;
                   stage.addChild(b);
                   stage.update();
                }
            }
            Tick.addListener(window);
            tick();
        }
        //
        function clickHandler(e){
            alert(e);
        }
        //
        function tick(){
            stage.tick();
        }
    </script> 
```

# c# - 从注册表中获取子目录

> ID：12211444
> 
> 赞同：0
> 
> 时间：2012-08-31T08:19:16.247
> 
> 标签：c#, registry, catalog

有人可以建议好的方法，如何从注册表中获取所有子类别？

**示例：**我`HKEY_CURRENT_USER\\AnyName\\`在注册表中有一些目录，那么如何以字符串形式列出所有目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:28:57.700

我不完全确定我理解你的问题，但如果你想要子键名，你可以这样做：

```
string[] subKeyNames = Registry.CurrentUser.OpenSubKey("AnyName").GetSubKeyNames(); 
```

网上有很多使用 Registry 类的示例 - [MSDN](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx)也有一些示例和解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:28:40.057

只需使用 . 枚举子键[`GetSubKeyNames`](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.getsubkeynames.aspx)。

# android - Android Namespace lxml python

> ID：12211449
> 
> 赞同：1
> 
> 时间：2012-08-31T08:19:31.603
> 
> 标签：android, python, lxml

My code displays a xml for the android operating system.

I need to display

```
<resources xmlns:android="http://schemas.android.com/apk/res/android"> 
```

I tried

```
ET.Element("{http://schemas.android.com/apk/res/android}name") 
```

but it displays

```
<ns0:name xmlns:ns0="http://schemas.android.com/apk/res/android"> 
```

Can someone give me a snippet how to solve that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:44:33.797

如果确实需要，请在创建元素时提供命名空间映射（将前缀映射到命名空间 uri），如下所示：

```
nsmap = {"android", "http://schemas.android.com/apk/res/android}name"}
elem = ET.Element("{http://schemas.android.com/apk/res/android}name", nsmap=nsmap) 
```

或者全局注册前缀映射，以便在创建该命名空间中的元素时自动使用“android”前缀：

```
ET.register_namespace("android", "http://schemas.android.com/apk/res/android") 
```

# php - PHP efficiently write and output csv files using fputcsv

> ID：12211452
> 
> 赞同：1
> 
> 时间：2012-08-31T08:19:51.923
> 
> 标签：php, file, fputcsv

When writing .csv files i use fputcsv like this:

```
- open a temporary file $f = tmpfile();
- write content to file using fputcsv($f,$csv_row);
- send appropriate headers for attachment
- read file like this:

# move pointer back to beginning 
rewind($f);

while(!feof($f))
    echo fgets($f);

# fclose deletes temp file !
fclose($f);

```

Another aproach would be:

```
- open file $f = fopen('php://output', 'w');
- send appropriate headers for attachment
- write content to file using fputcsv($f,$csv_row);
- close $f stream

```

### My question is: What would be the best approach to output the data faster and taking into account server resources ?

First method would use more writes and consume more resources but would output very fast.

Second method uses less writes and would output slower i think.

Eagerly waiting for your opinions on this.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:29:12.540

为什么需要将 csv 内容写入 tmp 文件/php 的输出流？

您只需要直接回显 csv 内容，**不应该有任何文件操作**。

*   发送适当的附件标题
*   回显 csv 内容。

* * *

```
header("Content-type: application/csv");
header("Content-Disposition: attachment; filename=file.csv");
header("Pragma: no-cache");
header("Expires: 0");

foreach ($csv_rows as $csv_row) {
  echo $csv_row;
}
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:22:31.380

[fpassthru()](http://www.php.net/manual/en/function.fpassthru.php)将在较低级别执行您正在执行的操作。像这样使用它：

```
# move pointer back to beginning 
rewind($f);

while(fpassthru($f) !== false);

# fclose deletes temp file !
fclose($f); 
```

即使它可能是一个 csv 文件，也没有必要限制自己使用 csv 函数，除非您在输出时生成文件。

如果您将 CSV 流式传输到输出而不是文件，您可能会看到性能提升。

# .htaccess - Error in htaccess rewrite rule

> ID：12211454
> 
> 赞同：0
> 
> 时间：2012-08-31T08:19:53.610
> 
> 标签：.htaccess, mod-rewrite

I am trying to make sure that if HTTPS is used outside of the secure subdomain it gets redirected to HTTP.

This is what I have in the root .htaccess file:

```
# Redirect HTTPS requests for non-SSL pages back to HTTP. (Note that shared objects
# such as images are excluded from this rule)

RewriteCond %{HTTPS} =on

# my.EXAMPLE.com is the secure subdirectory.
RewriteCond %{HTTP_HOST} !^my.EXAMPLE.com [NC]

RewriteCond $1 !\.(gif|jpe?g|png|ico|css|js)$
RewriteRule ^(.*)$ http://www.EXAMPLE.com/$1 [R=301] 
```

Put simply:

```
if HTTPS
if not in my.example.com
if NOT an image/css/js file
redirect to HTTP 
```

But this is not working as expected, instead if I try to access a page outside of the my.example.com sub-directory via HTTPS I get a 404 Not Found error. Accessing the same page via HTTP has no problems, it works fine.

Any idea why this rule may not be working?

# EDIT

Here's the entire .htaccess file:

```
# Don't display .htacess files in directory listings.
IndexIgnore .htaccess
Options +FollowSymLinks
RewriteEngine on

# Password protected for now
AuthType Basic
AuthName "EXAMPLE"
AuthUserFile "/home/EXAMPLE/.htpasswds/public_html/passwd"
require valid-user

# Redirect HTTPS requests for non-SSL pages back to HTTP. (Note that shared objects
# such as images on both HTTP and HTTPS pages are excluded from this rule)
RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} !^my\.EXAMPLE\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !\.(gif|jpe?g|png|ico|css|js)$
RewriteRule ^(.*)$ http://www.EXAMPLE.com/$1 [R=301]

# Redirect non-www requests to www
RewriteCond %{HTTP_HOST} ^EXAMPLE.com$
RewriteCond %{HTTP_HOST} !^my\.EXAMPLE\.com [NC]
RewriteRule ^(.*)$ "http\:\/\/www\.EXAMPLE\.com\/$1" [R=301]

# Prevent direct access to the WHMCS folder must be accessed through secure subdomain
RedirectMatch 301 ^/WHMCS/(.*)$ https://my.EXAMPLE.com/$1

ErrorDocument 404 /404.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:28:02.583

尝试这个 ：

```
RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} !^my\.EXAMPLE\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !\.(gif|jpe?g|png|ico|css|js)$
RewriteRule ^(.*)$ http://www.EXAMPLE.com/$1 [R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:56:41.607

问题是，如果您没有为 设置 SSL 虚拟主机`www.example.com`，并将其文档根目录指向非 SSL 虚拟主机所在的`www.example.com`位置，那么当有人访问 时`https://www.example.com/`，您的 htaccess 文件将永远不会被读取。我敢打赌，您需要将 HTTPS->HTTP 规则放在 SSL vhost 的 htaccess 文件中（`my.example.com`文档根目录在哪里）。

你所拥有的似乎是：

```
http://www.example.com/ -> /home/EXAMPLE/ (or whatever your document root is)

https://my.example.com/ -> /home/EXAMPLE/subfolder/ 
```

因此，如果没有 vhost 设置，当您访问 SSL example.com 时，永远不会访问`https://www.example.com`其中的 htaccess 文件。`/home/EXAMPLE/`

# php - How can I limit product categories to only three levels in Magento?

> ID：12211456
> 
> 赞同：0
> 
> 时间：2012-08-31T08:20:01.283
> 
> 标签：php, magento

I dont want to limit just the display of categories in top navigation (maximal depth setting) but restrict user to creating categories upto a certain nesting level. Any solution programmatic or otherwise is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:03:29.590

这可以在后端设置。

system_config/编辑/部分/目录/

类别顶部导航

最大深度

乔布斯是个好人...

# cassandra - 在 Cassandra 中为行键转换 128 位 int

> ID：12211458
> 
> 赞同：2
> 
> 时间：2012-08-31T08:20:16.120
> 
> 标签：cassandra, type-conversion

如果我希望在 Cassandra 中有一个可比较的 128 位整数等效作为行键，那么处理这个最有效的数据类型是什么？ASCII 使用完整的 8 位范围？

我需要能够选择行切片和范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:49:23.983

如果您使用 Random Partitioner（确定键如何在集群中分布的部分），则不会比较行键。如果您想比较行键，请使用 Order Preserving 分区器……但这肯定会导致集群不平衡和崩溃。

但是，列名会与同一行内的其他列名进行比较。

所以我的建议是将你的列存储到数字间隔中，并用 LongType 列名插入你的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:22:47.010

可能只使用 int 的原始 byte[] 表示并避免任何转换；以上来自 le douard 的评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:32:41.767

原始字节 [] 比较不会按数字顺序对列进行排序。如果这就是你想要的，你应该使用 varint (CQL) / IntegerType (Thrift)

# html - 水平可滚动的 html 框

> ID：12211460
> 
> 赞同：1
> 
> 时间：2012-08-31T08:20:22.607
> 
> 标签：html, css, twitter-bootstrap

我需要在页面上显示日志，但日志的行很长（它是一个 apache access_log），它变得既丑陋又不可读。

如何使用水平滚动条显示内容？

我正在使用引导程序并尝试使用`overflow : auto/scroll`和修复高度/宽度但没有成功。

编辑：这是我的代码

```
<div class="well" style="overflow-x: scroll;width:200px;" >
<?php
    echo $log;
?>
</div> 
```

$log 包含`<br/>`换行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:48:21.263

```
<div style="overflow-x: scroll;white-space:nowrap;width:200px;
height:200px;border:1px solid red" >
    A Very long line gjkdddddssssss sssssssssssssssssssss ssssssssssss
ssssssssssss ssss
ssssssss
ssssssssssssss sssssssssssssssssssssssss ss
sssssssssssssssssss ssssssssssssssssssssssss
    </div>​ 
```

White-Space 是您需要设置的属性。

演示：http: [//jsfiddle.net/amandeepj/ZQuKG/](http://jsfiddle.net/amandeepj/ZQuKG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:24:17.277

您需要`overflow-x`用于输出

[http://www.css3.info/overflow-xoverflow-y/](http://www.css3.info/overflow-xoverflow-y/)

您可以从此链接获得更好的信息，以便您可以了解这件事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:26:23.533

嗨，现在习惯了

**HTML**

```
<div class="ok">heli msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample helo i msample </div> 
```

**CSS**

```
 .ok{
    background:red;
      width:200px;
      height:200px;
      overflow:scroll;
word-break: break-all;
    } 
```

***[演示](http://tinkerbin.com/c1bl0Njr)***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:29:15.770

为了防止换行使用：
CSS

```
p {
    white-space: nowrap;
} 
```

`overflow`然后您可以使用属性控制滚动。

# sharepoint - Case sensitivity inconsistency in SharePoint + oData?

> ID：12211464
> 
> 赞同：2
> 
> 时间：2012-08-31T08:20:38.570
> 
> 标签：sharepoint, sharepoint-2010, odata, case-sensitive

I am using jQuery to get information from SharePoint 2010's listData.svc. I noticed some inconsistencies with regards to case sensitivity in my queries:

*   The following command is case sensitive:

    > ...&$filter=substringof('String', property) eq True

*   The following command is case insensitive

    > ...&$filter=substringof(tolower('String'), tolower(property)) eq True

*   The following command is also case insensitive but much shorter:

    > ...&$filter=substringof('String', property) or substringof('String', property2)

*   However, the case insensitivity using the short method is lost for the entire filter when one part is using a property more than two levels down. So in the following command the entire filter becomes case sensitive again:

    > ...&$filter=substringof('String', property/property/property) or substringof('String', property2)

Is this an issue with SharePoint's service? Or am I just doing something wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:36:41.383

这似乎是 ListData.svc 中的一个错误。

如果比较（在一天结束时委托给 SQL Server）在任何查询中都区分大小写，则它们应该始终区分大小写。

显然，无论案例是否匹配，tolower 调用都会使事情匹配，因此我们可以忽略它。但是我不知道为什么对另一个属性进行 OR 操作。

它可能是 SharePoint 中的一个错误，或者您可能无意中选择了一个 OR 子句，该子句会返回您意外期望的数据。

# php - mysqli_set_charset 在一台机器上给出错误

> ID：12211470
> 
> 赞同：-1
> 
> 时间：2012-08-31T08:20:57.913
> 
> 标签：php, mysqli

我必须使用我使用 XAMPP 进行开发的机器。我只是将文件从一台机器移动到另一台机器，现在在调用 mysqli_set_charset 和 bind_param 时出现错误。它在一台机器上工作。

编辑：这是我得到的错误：

PHP 致命错误：在非对象上调用成员函数 bind_param()

我的代码：

```
$mysqli = new mysqli("localhost", "root", "123", "myDatabase");
mysqli_set_charset($mysqli, "utf8");

//Checks if the user exists
$stmt = $mysqli->prepare("SELECT * FROM profiles WHERE email = ? AND password = md5(?) LIMIT 1");
$stmt -> mysqli_stmt_bind_param("ss", $email, $pass);
$stmt -> execute(); 
```

编辑＃2：

它工作的机器在 Mac OS 10.8.1 上的 XAMPP 中使用 PHP 5.3.1，还没有更新版本的 XAMPP。

它不工作的机器在 Windows 7 上的 XAMPP 中使用 PHP 5.4.4。

如果我删除说它`mysqli_set_charset($mysqli, "utf8");`在两台机器上都可以工作的行，否则，只能在 Mac 上工作。

编辑#3：

我测试更改`password = md5(?)`为just `password = ?`，然后它就可以工作了。好吧，密码不匹配，但我不再收到错误消息。我以后不会使用 md5，但我现在只想使用它，我需要将 charset 设置为 utf8。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:20:17.610

如果您的另一台机器正在运行 PHP 5.4：

```
This function has been DEPRECATED as of PHP 5.3.0 and REMOVED as of PHP 5.4.0. 
```

（来自[http://www.php.net/manual/en/function.mysqli-bind-param.php](http://www.php.net/manual/en/function.mysqli-bind-param.php)） bind_param 是 mysqli_stmt_bind_param 的别名 - 你应该使用它

如果不是 PHP 5.4，我们需要更多信息，例如您的实际代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T00:49:00.867

以下代码应该没问题：

```
PHP
$stmt = $mysqli->prepare("SELECT * FROM profiles WHERE email = ? AND password = md5(?) LIMIT 1");
$stmt -> bind_param("ss", $email, $pass);
$stmt -> execute(); 
```

# php - 将数据发送到第三方服务器，然后取回数据

> ID：12211472
> 
> 赞同：0
> 
> 时间：2012-08-31T08:21:07.743
> 
> 标签：php

这在 PHP 中是否可行：

1.  用户在我的网站上填写表格
2.  表单将表单中的数据提交到网络上其他地方的第三方服务器，本质上是以某种方式将数据传递给第三方服务器
3.  所述第三方服务器对数据进行处理，然后生成一个数值发送回我的 PHP 脚本
4.  我的服务器/PHP 脚本获取该数值/数据以再次在脚本中使用

它在PHP中可行吗？PHP 是否具有执行上述任务的内置函数？这样的事情需要大量的高级代码还是相对容易做到？

提前感谢您对此事的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:27:45.310

您可以为此使用 cURL

```
$urltopost = "http://somewebsite.com/script.php";
$datatopost = $_POST; //This will be posted to the website, copy what has been posted to your website

$ch = curl_init ($urltopost);
curl_setopt ($ch, CURLOPT_POST, true);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $datatopost);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$returndata = curl_exec ($ch); //This is the output the server sends back 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:27:38.320

是的，当您发送表单时，请使用 POST 方法将其发送到您想要的服务器。看起来像：

```
<form action="www.siteURL/pageToParseCode.php" method="post">
  First name: <input type="text" name="fname" /><br />
  Last name: <input type="text" name="lname" /><br />
  <input type="submit" value="Submit" />
</form> 
```

在发送给您的服务器上，您需要执行以下操作：

```
$field1 = $_POST['field1name']; 
```

在将处理数据的服务器上，您可以使用**[curl](http://php.net/manual/en/book.curl.php)****之类的东西将其发布回您的服务器**，如果您不完全理解 curl 看看那里的链接，或者您可以使用 php 标头，并设置您的数据想要使用 get 方法发送回 url，所以用户收到的 url 使用 get 方法看起来像[这样](http://www.w3schools.com/php/php_get.asp)：

www.yoursite.com/index.php?variable1=value1&variable2=value2 等等，然后像这样解释：

```
if (isset($_GET['variable1'])) {
$var = $_GET['variable1'];
} 
```

# java - 在没有容器的情况下解决 EJB 依赖关系

> ID：12211482
> 
> 赞同：1
> 
> 时间：2012-08-31T08:21:50.283
> 
> 标签：java, reflection, dependency-injection, ejb

我目前正在研究使用 JUnit 测试 EJB 3 服务的解决方案。（是的，我查看了 ejb3unit，但它对我不起作用。是的，我查看了使用 openEJB 进行容器集成测试，但也没有用......）

所以我的问题是解决@EJB 注释依赖项的方法是什么？我并不是说使用像 Weld、Guice 或 Spring 这样的 DI 框架。该解决方案应该适用于普通的旧 JUnit 测试 -> 不使用 JBoss、Glassfish 或 openEJB 等 EJB 容器。

我能够通过@PersistenceContext 替换实体管理器的注入，并使用java 反射进行一些修改。那么我将如何使用 @EJB 注释对依赖项执行此操作？

（我不介意自己构建和解决依赖树，只是在寻找想法；））

来自德国的问候，ps

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:34:56.340

不知道你为什么反对你提出的解决方案。
我正要提供像[Arquillian](http://www.jboss.org/arquillian.html)这样的东西，但是，嘿 - 你不想涉及容器。
我只是想确定您不想要容器的原因，然后再继续讨论一些想法（尽管我没有测试它们） -
使用 JBoss AS 7.x，企业应用程序服务器的部署时间大大减少，而
不是提到 Arquillian，你有一个部署 API，你可以决定你将部署什么（即——例如，为给定的测试部署一个 bean）。
但是，我确实尊重你的问题，所以这里有一些想法 -
A. 你提到你设法使用反射注入了一个 EntityManager - 你是怎么做到的？
为什么不对你的豆子应用同样的方法？

B. 如果你遇到 A 的问题，为什么不开发你自己的注入代码，例如基于[cglib](http://cglib.sourceforge.net/)（为了创建代理不仅用于接口，还用于类）。
这样，当创建类的对象时，
您将能够拦截默认 CTOR，
并扫描带有 @Ejb 注释的字段。
我建议使用某种配置文件来映射每个 bean 接口如何实例化适当的类，并递归地运行此流程（因为注入的 bean 可能也有一个带有 @EJB 注释的字段）。

请注意，如果您决定使用这种工作方法，您将实现某种“迷你依赖注入框架” - 除了我个人有兴趣查看您的代码（:)）我认为您应该仔细想想为什么你不想使用“已经制定的解决方案”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:29:29.853

请注意关于 Arquillian 的建议，这仍然需要 EJB 容器，如 JBoss、GlassFish 或 OpenEJB。

如果问题只是查找并包含所有依赖项，请尝试使用这个包含 EJB Lite 所需的所有依赖项的 jar：

[http://repo1.maven.org/maven2/org/apache/openejb/openejb-lite/4.0.0/openejb-lite-4.0.0.jar](http://repo1.maven.org/maven2/org/apache/openejb/openejb-lite/4.0.0/openejb-lite-4.0.0.jar)

将其包含在您的测试类路径中（不需要其他 jars），然后启动嵌入式容器：

```
EJBContainer container = EJBContainer.createEJBContainer();
MyBean bean = (MyBean) container.getContext().lookup("java:global/myModleName/MyBean"); 
```

[这里的](http://openejb.apache.org/examples-trunk/simple-stateless/README.html)工作示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:26:45.003

你看过阿奎利安吗？您可以在项目页面上找到所有文档：[http ://www.jboss.org/arquillian.html](http://www.jboss.org/arquillian.html)

# android - 隐藏 ParentView 及其子视图

> ID：12211499
> 
> 赞同：0
> 
> 时间：2012-08-31T08:23:25.900
> 
> 标签：android, android-view

有一个`View`项目

```
View item = findViewById(R.id.item);
ViewParent = item.getParent(); 
```

我希望能够用父母的孩子隐藏项目的父母。怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:25:39.533

尝试将 ViewParent 转换为 View，如下所示：

```
try {
    (View) ViewParent.setVisibility(View.GONE);
} catch (ClassCastException e) {
    // In case if item is the top most view
}; 
```

对于最顶层视图的情况需要捕获异常`item`- 然后它的父级不是视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:25:46.897

隐藏父母也应该隐藏它的所有孩子AFAIK。所以就 ：

```
parentView.setVisibility(View.GONE); 
```

# facebook-graph-api - 短期内过期服务器端访问令牌

> ID：12211501
> 
> 赞同：1
> 
> 时间：2012-08-31T08:23:33.310
> 
> 标签：facebook-graph-api

最近我们遇到了一些服务器端访问令牌的奇怪行为。它会在很短的时间内（大约 15 分钟）到期。场景如下：用户通过 facebook（服务器端）登录我们的页面，我们存储访问令牌。我们页面上的某些操作可以触发发布/提要。在几次提要帖子之后，我们突然开始收到错误 400 和错误 401。

错误 400 可能是由于帖子数量限制，但在错误 401 访问令牌过期后。

每个动作都会响应：

```
 {
   "error": {
       "message": "Error validating access token: Session has expired at unix 
                   time 1346321603\. The current unix time is 1346320983.", 
       "type": "OAuthException", 
       "code": 190
       "error_subcode": 463
   } 
```

很难重现这种行为，但我们在测试环境中重现了几次（所以我们知道何时创建访问令牌，该用户没有取消对应用程序的授权，也没有更改密码）。

任何想法为什么访问令牌会过期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:40:11.273

我仔细检查了应用程序高级设置中是否启用了“删除离线访问权限”，这样我就可以获得 60 天的服务器端令牌。

不知道为什么，但所有访问令牌都已从访问令牌调试器报告的“大约一小时内”过期。

我创建了新应用程序（也带有“删除离线访问权限”），现在我得到了 2 个月后过期的令牌。

不知道为什么，但答案是创建新的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:10:52.370

默认情况下，facebook 分配一个短暂的访问令牌。您需要请求长期令牌。

阅读文档以了解如何获取它：http: [//developers.facebook.com/roadmap/offline-access-removal/#extend_token](http://developers.facebook.com/roadmap/offline-access-removal/#extend_token)

**编辑：**

以前的链接失效了，用下面的链接

[https://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/](https://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/)

# visual-studio-2010 - 错误：程序集文件''不存在！加载失败。- 尝试启动 .Net Micro 4.2 项目时

> ID：12211504
> 
> 赞同：0
> 
> 时间：2012-08-31T08:23:53.873
> 
> 标签：visual-studio-2010, emulation, .net-micro-framework, netduino

我收到错误“错误：程序集文件''不存在！加载失败。” 当我尝试在 Visual Studio 2010 中启动 .Net Micro 4.2 Framework 项目（在模拟器中）时。

我无法为我的主程序设置调试点（它在到达它之前就崩溃了）。我在同一个解决方案中还有另一个微型项目，它开始时没有任何问题。

知道这个有意义的错误消息来自哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:27:57.340

好的，我自己找到的：

此项目的引用中存在不受支持/错误的版本 (.Net) 程序集。我可以使用“未使用的引用...”检查并删除不必要的程序集，现在它可以工作了。

# php - 使用jquery验证带有动态字段的表单

> ID：12211508
> 
> 赞同：0
> 
> 时间：2012-08-31T08:24:18.660
> 
> 标签：php, jquery, validation

我正在使用[Jquery 验证插件](http://docs.jquery.com/Plugins/Validation)来验证表单。

我使用 php 动态填写表单。例如：

```
<form name="my_form" id="my_form">
   <label for="static_field_1">Insert static field 1</label>
   <input type="text" name="static_field_1" id="static_field_1"/>
   <label for="static_field_2">Insert static field 2</label>
   <input type="text" name="static_field_2" id="static_field_2" />

   <?php
      $no_dynamic_field = count($dynamic_fields_array);
      if($no_dynamic_field>0){
         for($i=0;$i<$no_dynamic_field;$i++){
   ?>
         <label for="dynamic_field_<?php echo $i;?>">Insert field <?php echo $dynamic_fields_array[$i];?></label> 
         <input type="text" name="dynamic_field_<?php echo $i;?>" id="dynamic_field_<?php echo $i;?>" />
   <?php
         }
      }
   ?>
</form> 
```

我必须验证这个表格。所以对于静态字段没有问题：

```
$('#my_form').validate({
   rules: {
      static_field_1:"required",
      static_field_2:"required"
   },
   messages:{
      static_field_1:"Static field 1 required!",
      static_field_2:"Static field 2 required!",
   }
}); 
```

但是我怎样才能遍历动态字段来验证它们呢？

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:32:23.363

您可以使用：

```
$(document).ready(function(){
    $('#my_form').validate();
}); 
```

并`class='required'`输入每个输入。因此您的代码将是：

```
<form name="my_form" id="my_form">
   <label for="static_field_1">Insert static field 1</label>
   <input type="text" name="static_field_1" id="static_field_1" class='required'/>
   <label for="static_field_2">Insert static field 2</label>
   <input type="text" name="static_field_2" id="static_field_2" class='required'/>

   <?php if(count($dynamic_fields_array)>0)
      for($i=0;$i<count($dynamic_fields_array);$i++){
   ?>
      <label for="dynamic_field_<?php echo $i;?>">Insert field <?php echo $dynamic_fields_array[$i];?></label> 
      <input type="text" name="dynamic_field_<?php echo $i;?>" id="dynamic_field_<?php echo $i;?>" class='required'/>
   <?php
      }
   ?>
   <?php }?>
</form> 
```

# multithreading - 什么时候应该使用共享锁定（读取锁定）

> ID：12211516
> 
> 赞同：2
> 
> 时间：2012-08-31T08:24:50.387
> 
> 标签：multithreading, thread-safety, locking, mutex

有人可以解释何时应该使用共享锁。如果我理解正确的话，读取时使用共享锁，写入时使用排他锁。

但是为什么我不能在读取时锁定互斥锁时等待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:50:23.570

是为了提高性能。多个并发读取就不必按顺序发生，如果结构被频繁读取，这可能是一个很大的好处。（但读取的数据仍然是一致的并且是最新的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:52:41.167

> 但是为什么我不能在读取时锁定互斥锁时等待。

通常是为了速度。共享锁允许多个读者，因为内容没有改变。排他锁仅允许单个（通常）写入操作，因为您希望所有写入都是原子的。

更多技术定义来自[这里](http://publib.boulder.ibm.com/infocenter/cicsts/v3r2/topic/com.ibm.cics.ts.applicationprogramming.doc/topics/dfhp39o.html)。

> **排他锁**保护对文件资源的更新，包括可恢复的和不可恢复的。它们一次只能由一项交易拥有。如果另一个任务当前拥有针对所请求资源的独占锁或共享锁，则任何需要独占锁的事务都必须等待。共享锁
> 
> **共享锁**支持读完整性。它们确保在只读请求期间记录不在更新过程中。共享锁还可用于防止在读取记录和下一个同步点之间更新记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:50:27.687

> 但是为什么我不能在读取时锁定互斥锁时等待。

因为这在某些情况下效率低下，特别是那些很多线程经常读取数据结构，但很少写入且不经常写入的情况。由于如果没有人在写入，多个并发读取是线程安全的，因此对读取器进行互斥将是一种浪费。

想象一个服务器和多个客户端对一些共享数据进行各种事务。如果这些客户端中的大多数只是简单地询问信息，而不是更改任何内容，那么如果服务器一次只允许一个客户端读取，那么它的性能将会很糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-02T11:11:45.000

共享锁（也称为读锁）禁止任何其他进程在文件的指定部分请求写锁。但是，其他进程可以请求读锁并继续从资源中读取。

独占锁（也称为写锁）为进程提供了对文件指定部分写入的独占访问权限，并且将阻止任何其他进程获取对该资源的任何类型的锁定，直到该独占锁被释放。

所以读锁说“你现在可以读，但如果你想写，你必须等待”，而写锁说“你必须等待”。

有关官方描述，请查看[GNU C 库的官方锁文档](http://www.gnu.org/software/libc/manual/html_node/File-Locks.html)。

此外，在许多情况下，共享/独占锁定的上下文是悲观/乐观锁定，这是一种用于处理多用户读/写同一资源的方法。这是[方法论的解释](http://www.dbasupport.com/forums/showthread.php?7282-What-is-Optimistic-Locking-vs-Pessimistic-Locking&s=c915c57b82a802409e38038123eac376&p=29149#post29149)。

# python - 刷新 sqlalchemy 中的分离实体

> ID：12211517
> 
> 赞同：5
> 
> 时间：2012-08-31T08:25:00.213
> 
> 标签：python, session, sqlalchemy

我需要将一个对象附加到会话中，使其与数据库中持久的对象没有区别。（用代码更容易解​​释）：

```
session.query(type(some_object)).filter_by(id=some_object.id).one() 
```

有没有更合适的方法来做到这一点？ `session.add(some_object)`不起作用，因为具有此类 ID 的实体已经可以附加到此会话，并且`object = session.merge(some_object)`对我不起作用，因为它从分离的副本转换状态（如果我制作 object.name='asdfasdf' 这些更改将在合并后挂起目的）

**编辑：**

我发现了一种不那么丑陋的方式：

```
some_object = session.merge(some_object)
session.refresh(some_object) 
```

但是有没有办法在一个电话中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T13:45:11.883

> 我需要将一个对象附加到会话中，使其与数据库中持久的对象没有区别。

“不会与 DB 不同”几乎意味着您正在寻找加载它，因此请查询它。您可能要考虑该对象可能已经存在于该目标会话中。因此，您使用 query(type(object)) 的方法可能是最直接的，尽管您可以使用 get() 直接命中主键，并使用 populate_existing() 来保证会话中已经存在的状态被覆盖：

```
session.query(type(some_object)).populate_existing().get(some_object.id) 
```

以上调用几乎相同的代码路径`refresh()`。您拥有的合并/刷新方法也有效，但会发出至少两个 SELECT 调用。

# xml - XSLT count() 包括参考节点比较

> ID：12211518
> 
> 赞同：2
> 
> 时间：2012-08-31T08:25:00.667
> 
> 标签：xml, xslt, xpath

我的 XML 代码（包含酒吧和人员）：

```
<document>
    <pubs>
        <pub id="pub1">
            <open>true</open>
        </pub>
        <pub id="pub2">
            <open>false</open>
        </pub>
    </pubs>
    <people>
        <person>
            <name>John</name>
            <pubId>pub1</pubId>
        </person>
        <person>
            <name>Paul</name>
            <pubId>pub2</pubId>
        </person>
    </people>
</document> 
```

使用来自`<person>`to `<pub>`( `person/pubId`references `pub[@id]`) 的引用。酒吧本身有一个布尔值`<open>`（说明酒吧是打开还是关闭）。

使用 XSLT，我希望能够`count()`有多少人可以去酒吧。为了去酒吧，酒吧的`<open>`值必须为`true`。

我无法完全编码的两种可能的解决方案：

1.  遍历人员并跟踪人数：

    ```
    <xsl:for-each select="person">
        <xsl:variable name="pId" select="pubId" />

        <xsl:if test="root()/document/pubs/pub[@pubId=$pId]/open = 'true'" >
            <!-- any way to keep track of this number? -->
        </xsl:if>
    </xsl:for-each> 
    ```

2.  直接使用 count() 函数：

    ```
    <count>
        <xsl:value-of select="count(//person[root()/document/pubs/pub[@id = pubId]/open = 'true'])" />
    </count> 
    ```

第二个选项似乎更简洁和正确，但我无法让它工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:33:56.203

**使用这个 XPath 1.0 one-liner**：

```
count(/*/people/person[pubId = /*/pubs/pub[open = 'true']/@id]) 
```

`person`这将返回此文档中至少有一个子元素的元素的计数，`pubId`这样有一个`pub`元素的`id`属性字符串值等于该元素，`pubId`并且其`open`子元素的字符串值为 string `"true"`。

**这是一个基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:copy-of select=
      "count(/*/people/person[pubId = /*/pubs/pub[open = 'true']/@id])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<document>
    <pubs>
        <pub id="pub1">
            <open>true</open>
        </pub>
        <pub id="pub2">
            <open>false</open>
        </pub>
    </pubs>
    <people>
        <person>
            <name>John</name>
            <pubId>pub1</pubId>
        </person>
        <person>
            <name>Paul</name>
            <pubId>pub2</pubId>
        </person>
    </people>
</document> 
```

**计算 Xpath 表达式，并将计算结果复制到输出：**

```
1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:33:57.357

您可以尝试使用密钥查找酒吧

```
<xsl:key name="pubs" match="pub" use="@id" /> 
```

这将允许您将计数简化为以下

```
<xsl:value-of select="count(//person[key('pubs', pubId)[open='true']])"/> 
```

因此，对于以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="pubs" match="pub" use="@id" />
   <xsl:template match="/">
      <count>
         <xsl:value-of select="count(//person[key('pubs', pubId)[open='true']])"/>
      </count>
   </xsl:template>
</xsl:stylesheet> 
```

以下是输出

```
<count>1</count> 
```

请注意，在 XSLT 中，变量是不可变的，一旦设置就不能更改。因此，您尝试设置变量和增量的第一种方法是无效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:17:33.983

是的，第二种方法是正确的：它本质上是在做一个连接。正如 Tim C 所指出的，键对于在 XSLT 中进行连接通常很有用。

您尝试的原因

```
count(//person[root()/document/pubs/pub[@id = pubId]/open = 'true']) 
```

不起作用是“pubId”的上下文错误。您可以在 XPath 2.0 中使用范围变量来解决这个问题：

```
count(for $p in //person return (if (/document/pubs/pub[@id = $p/pubId]/open = 'true') then $p else ())) 
```

但使用键更简单、更快捷。

# delphi - 调用外部函数给出不满足的转发或外部声明

> ID：12211525
> 
> 赞同：1
> 
> 时间：2012-08-31T08:25:40.617
> 
> 标签：delphi, delphi-xe2

在主单元中，我定义了一个函数，然后由另一种具有适当参数的表单调用：

```
unit Parser;
interface
uses
[...]

function SaveGridLayoutToReg(ASaveViewName: AnsiString): Integer;

type
TForm1 = class(TForm)
[...]
function SaveGridLayoutToReg(ASaveViewName: AnsiString): Integer;
end;

[...]

function TForm1.SaveGridLayoutToReg(ASaveViewName: AnsiString): Integer;
var
  AStoreKey: string;
  AOptions: TcxGridStorageOptions;
  LayoutRegistryKey: TRegistry;
begin
  AStoreKey := 'Software\KTRT\Stats';

  AOptions := [];
  cxGrid1TableView1.StoreToRegistry(AStoreKey, True, AOptions, ASaveViewName);

  LayoutRegistryKey.RootKey:= HKEY_CURRENT_USER;
  if LayoutRegistryKey.OpenKey(AStoreKey+'\'+ASaveViewName, false) then
    Result := 0
  else
    Result := -1;
end; 
```

另一种形式：

```
[...]
uses Parser;

procedure TForm3.Button1Click(Sender: TObject);
var
LayoutRegistryKey: TRegistry;
AStoreLocation : AnsiString;
AStoreKey: string;
begin
  AStoreLocation := Edit1.Text;
  if Parser.SaveGridLayoutToReg(AStoreLocation) <> 0 then
    Label1.Visible := True
  else
  begin
    Label1.Visible := False;
    Form3.Visible := False;
  end;
end;
[...] 
```

我在某种程度上做错了，因为我不断收到错误

> 不满意的转发或外部声明

如果我不在 TForm1 类中声明该函数，则将找不到网格视图。如果我不在“uses”子句之后声明函数，我将无法从其他形式调用它。我真的看不懂:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T08:28:05.303

您在接口部分声明了两个函数，即`SaveGridLayoutToReg`在

```
function SaveGridLayoutToReg(ASaveViewName: AnsiString): Integer; 
```

几`TForm1.SaveGridLayoutToReg`行之后。但是在实现部分，你只实现后一个。

也就是说，你需要更换

```
unit Parser;
interface
uses
[...]

function SaveGridLayoutToReg(ASaveViewName: AnsiString): Integer;

type
TForm1 = class(TForm)
[...]
function SaveGridLayoutToReg(ASaveViewName: AnsiString): Integer;
end; 
```

和

```
unit Parser;
interface
uses
[...]

type
TForm1 = class(TForm)
[...]
function SaveGridLayoutToReg(ASaveViewName: AnsiString): Integer;
end; 
```

或者你必须实现这两个功能。

# jquery - 一种从 jquery 的 $.ajax 中的 url 参数中删除附加 url 的方法

> ID：12211528
> 
> 赞同：2
> 
> 时间：2012-08-31T08:25:51.200
> 
> 标签：jquery, ajax, cakephp, post

我正在使用 cakephp 并希望使用`jQuery.ajax`发布到我的服务器。问题是 jQuery`$.ajax`附加了协议和主机名，但还包括当前控制器，所以我也无法更改我正在粘贴的控制器。

有没有办法改变 url: 中的参数`$.ajax`？这是我的示例帖子代码：

```
 $.ajax({
        url: 'controller/action',
        type: 'post',
        data: $('#form_data').serialize(),
        dataType: 'json',
        success: function(json) {
            console.log(json);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:31:50.520

只需将您要发布到的确切/更具体的 URL 放在`$.post`设置的 URL 部分...

```
$.ajax({
    url: 'http://host/controller/action',
    type: 'post',
    data: $('#form_data').serialize(),
    dataType: 'json',
    success: function(json) {
        console.log(json);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:22:15.270

试试这个

```
$.ajax({
    url: '/controller/action',
    type: 'post',
    data: $('#form_data').serialize(),
    dataType: 'json',
    success: function(json) {
        console.log(json);
    }
}); 
```

你看出区别了吗？如果您在 URL 前面加上“/”（斜杠），它将附加到您的域名，如果没有，它将附加到您当前的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T09:26:07.607

创建一个文件，假设 'site_constants.php' 在 app/Config 文件夹中包含一些常量变量。在其中定义以下常量：

```
<?php    
define('HTTP_HOST', "http://" . $_SERVER['HTTP_HOST'].'/');
if(HTTP_HOST == 'localhost' || HTTP_HOST == '127.0.0.1')
{
     define('SITE_URL', HTTP_HOST.'app_folder_name/');
}
else
{
     define('SITE_URL', HTTP_HOST);
} 
```

将其包含在`app/Config/bootstrap.php`

```
require_once('site_constants.php'); 
```

在主布局文件中定义 JS 变量常量：

```
<script type="text/javascript">
var SITE_URL = '<?php echo SITE_URL?>';
</script> 
```

现在您可以在网站的任何地方使用它。而且这也是动态的，不需要在每一个ajax方法中都改变url。

```
 $.ajax({
    url: SITE_URL+'controller/action',
    type: 'post',
    data: $('#form_data').serialize(),
    dataType: 'json',
    success: function(json) {
        console.log(json);
    }
}); 
```

**处理此任务可能看起来很漫长，但一旦完成，它将在许多方面为您提供帮助。**

以下是优点：

1.  您可以轻松定义更多常量（如任何文件路径等）。
2.  您可以将所有 ajax 代码放入外部 JS 文件中。
3.  you can directly deploy it onto any server without changing in constants as well as work perfectly onto your localhost.
4.  following standard conventions etc.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:34:54.323

在 cakePHP 中，你可以这样做：

```
$.ajax({
        url: '<?php echo $this->webroot; ?>controller/action',
        type: 'post',
        data: $('#form_data').serialize(),
        dataType: 'json',
        success: function(json) {
            console.log(json);
        }
    }); 
```

如果您的 ajax 代码在 js 文件中，那么您可以这样做：在您的**layouts/default.ctp**文件中：

```
<script type="text/javascript">
var webroot = "<?php echo $this->webroot; ?>";
</script> 
```

然后在包含 ajax 的 js 文件中，您可以使用 js 变量**webroot**：

```
$.ajax({
      url: webroot + 'controller/action',
      type: 'post',
      data: $('#form_data').serialize(),
      dataType: 'json',
      success: function(json) {
          console.log(json);
      }
}); 
```

你的意思是这样的吗

# php - 如何在android中格式化来自php的Json数据？

> ID：12211537
> 
> 赞同：0
> 
> 时间：2012-08-31T08:26:35.707
> 
> 标签：php, android, json

我有以下 php 文件....

```
 mysql_connect("localhost","root","");
    mysql_select_db("database_name");
    $sql=mysql_query("select * from members");
    while($row=mysql_fetch_assoc($sql)) $output[]=$row;
    print(json_encode($output));
    mysql_close();
     ?> 
```

有了这个，我得到了 android 中的所有数据，下面是我的 android 内容，

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(
    is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }

    is.close();
    String json = sb.toString(); 
```

我得到了 json 作为字符串。从 android 但现在我想在 listview 中使用该数据。我无法理解如何使用它。请给我一些想法或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:28:19.967

从 Json 解析数据并将其保存在 ArrayList 中，并将该 arrayList 设置为 Listview。

您可以从 String 创建 Json 对象，如下所示。

```
JSONObject jsonObject = new JSONObject(json); 
```

您可以从 String 创建 Json Array 对象，如下所示。

```
JSONArray ja = new JSONArray(json); 
```

看看这个[教程](http://adblogcat.com/parse-json-data-from-a-web-server-and-display-on-listview/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:30:30.290

[Android](https://developer.android.com/reference/org/json/package-summary.html)中的JSON 包为您提供了所需的类。

您可以使用您的数据轻松创建 JSONObject，如下所示：

```
JSONObject jsonObject = new JSONObject(json); 
```

如果你有 JSONArray，你可以对 JSONArray 类做同样的事情：

```
JSONArray jsonArray = new JSONArray(json); 
```

只要它是有效的 JSON，您的 JSON 的来源就无关紧要。

您需要在 Java 中创建模型类并将解析的 JSON 数据提供给模型。然后这些可以用于在 ListView 中显示内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T08:32:35.403

我强烈推荐 GSON 库将您的 json 字符串序列化为 java 对象。您可以在此处获取 GSON 包[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

一旦你将 GSON 添加到你的 android 构建路径，剩下的就很简单了。从 json 字符串解析为 java 对象就这么简单，

```
gsonObject.fromJson("JSON STRING", ObjectModel.class); 
```

有关 Gson api 的更多信息，请点击此处

[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

# c# - Document.SaveAs2() 给出 COMException (0x80020003): Member not found 安装 Office 2003 和 Office 2010 时的异常

> ID：12211541
> 
> 赞同：0
> 
> 时间：2012-08-31T08:27:00.197
> 
> 标签：c#, visual-studio-2010, office-interop, word-2010, word-2003

我有一个 Visual Studio 项目，它读取一个 Word 文件，进行一些处理，然后将其保存为 PDF 文件。该代码在我只安装了 Office 2010 的机器上运行良好，但是当我在另一台同时安装了 Office 2003 和 Office 2010 的 PC 上运行它时，Document.SaveAs2() 会引发以下异常。

```
System.Runtime.InteropServices.
COMException (0x80020003): Member not found. (Exception from HRESULT: 0x80020003 (DISP_E_MEMBERNOTFOUND))
at Microsoft.Office.Interop.Word.DocumentClass.SaveAs2(Object& FileName, Object& FileFormat, Object& LockComments, Object& Password,Object& AddToRecentFiles, Object& WritePassword, Object& ReadOnlyRecommended, Object& EmbedTrueTypeFonts, Object& SaveNativePictureFormat, Object& SaveFormsData, Object& SaveAsAOCELetter, Object& Encoding, Object& InsertLineBreaks, Object& AllowSubstitutions, Object& LineEnding, Object& AddBiDiMarks, Object& CompatibilityMode) 
```

代码片段如下

```
object oMissing = System.Reflection.Missing.Value;

//Creates the needed objects (the application and the document)
Word._Application oWord = null;
Word._Document oDoc = null;

//Checks to see if the file does not exist (which would throw an error)
if (!System.IO.File.Exists(templatePath))
{
    _log.DebugFormat("The template file {0} does not exist on the path specified.", templatePath);
    throw new FileNotFoundException("The template file does not exist on the path specified.", templatePath);
}

try
{
    //Start up Microsoft Word
    oWord = new Word.Application();

    //If set to false, all work will be done in the background
    //Set this to true if you want to see what is going on in
    //the system - great for debugging.
    oWord.Visible = false;

    //Opens the Word Document
    //Parameters:
    //  templatePath = Document Name
    //  false = Don't convert conversions
    //  true = Open in Read-only mode
    //This may return null on Windows Server 2008 or Windows 7, 
    //to resolve  create a folder by the name of Desktop in the directory
    //C:\Windows\SysWOW64\config\systemprofile\Desktop, or
    //C:\Windows\System32\config\systemprofile\Desktop
    //depending on whether you have 64-bit Windows.
    oDoc = oWord.Documents.Open(templatePath, false, true);

    //Do some processing

    //Export the document to a PDF file, this function requires a default printer to be installed in the system so commenting it out
    //oDoc.ExportAsFixedFormat(pdfDocumentPath, Word.WdExportFormat.wdExportFormatPDF);

    //Save the word document as a PDF file
    oDoc.SaveAs2(pdfDocumentPath, Word.WdSaveFormat.wdFormatPDF);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:52:20.863

在一台机器上安装*两个*版本的 Office 是一个非常值得怀疑的做法。尤其不能正常工作的是自动化界面。每个版本的 Office 都对应用程序和文档等核心界面使用相同的指南。但是COM接口的注册是全局的，一个接口在整台机器上只能有一个实现。

这显然是这里出了什么问题。您正在与 Office 2003 交谈，而不是 2010。它没有 Document.SaveAs2() 方法。

您需要通过卸载 2003 和 2010 并重新安装 2010 来解决此问题。或者避免使用 2003 中不可用的方法。

# php - 在codeigniter上的数据库中插入多行

> ID：12211542
> 
> 赞同：0
> 
> 时间：2012-08-31T08:27:19.763
> 
> 标签：php, database, codeigniter, insert, multiple-records

> **可能重复：**
> [通过php数组将多行插入mysql](https://stackoverflow.com/questions/779986/insert-multiple-rows-via-a-php-array-into-mysql)

我正在尝试仅将填充的数据插入到数据库中。我的控制器

```
$code=$_POST['code'];
$rate=$_POST['rate'];
$quantity=$_POST['quantity'];
//$total=$_POST['rate']*$_POST['quantity'];
$count = count($_POST['code']);
for($i=0; $i<$count; $i++) {
    $data = array(
               'shop'=>$shop->$this->input->post('shop'),
               'code' => $code[$i], 
               'rate' => $rate[$i],
               'quantity' => $quantity[$i],
               'total' =>($rate[$i]*$quantity[$i])

           );
$this->load->model('buy_product_model');
$this->buy_product_model->add_product($data); 
```

我有一个下拉列表来选择商店，我为该商店创建了 15 个输入字段。这些字段在上面。问题是如果我只填写一个或两个值，它会在数据库中创建 15 行并重复 15 次店名。谁能解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:39:34.547

而不是在控制器中操作 $_POST 像这样在模型中操作它

**你的控制器**

```
$this->load->model('buy_product_model');
$this->buy_product_model->add_product($this->input->post()); 
```

**编辑**

**确保 html 表单中的表单字段是这样的数组形式**

```
<input type="text" name="code[]" /> 
```

**你的模型**

```
public function buy_product_model($postdata){
   extract($postdata);
   $count = count($code);
   for($i=0; $i<$count; $i++) {
       $data = array(
               'shop'=>$shop,
               'code' => $code[$i], 
               'rate' => $rate[$i],
               'quantity' => $quantity[$i],
               'total' =>($rate[$i]*$quantity[$i])

           );
       $this->db->insert('[YOUR TABLE]', $data); 
   }
} 
```

**确保将 [您的桌子] 更改为您的**

添加您在模型方法中的其余代码，`add_product`并像在控制器中所做的那样遍历循环。

**编辑：**

请检查 `'shop'=>$shop->$this->input->post('shop')`循环中的部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:42:42.613

根据您问题的这一部分：

*我有一个下拉列表来选择商店，我为该商店创建了 15 个输入字段。这些字段在上面。问题是如果我只填写一个或两个值，它会在数据库中创建 15 行并重复 15 次店名。谁能解决这个问题。*

这似乎是数据库设计的问题，而不是代码中的错误。如果您的表有一个名为**Shop Name**的列，并且您正在向其中插入数据，您**将**重复该列十五次。

我建议将表格分解为并通过它们之间的连接进行链接，如下所示：

```
Table Shops:
ID
Name

Table Products:
ID
shopID // This links to the first table on shopID=ID
...  and so on for your *product* information 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:04:43.720

最后我修好了。这是我的看法

```
 <?php for($i = 1; $i <=10; $i++):?>
        <tr>
            <td>
                <?php echo $i;?>
            </td>

            <td>
            <input type="text" name="code[]" value="<?php echo '';?>" id="code" />
            </td>

            <td>
                <input type="text" name="rate[]" value="<?php echo '';?>" id="rate" />
            </td>
            <td>
                <input type="text" name="quantity[]" value="<?php echo '';?>" id="quantity" />
            </td>

        </tr>
        <?php endfor;?> 
```

这是我的控制器

```
 if (empty($_POST)) 

    {

        $this->index();
    } 

else 
    {
        //insert to database
        $this->load->model('buy_product_model');
        $data= $this->buy_product_model->add_product();
        //echo "success";
        $this->index();
    } 
```

模型//

```
 $data  = array();
        $todayDate = date('Y-m-d');
        for($i = 0; $i < count($_POST['code']); $i++)
            {
                if($_POST['code'][$i] != '')
                    {
                        $data[] = array(
                            'code' => $_POST['code'][$i],
                            'shop' => $_POST['shop'],
                            'rate' => $_POST['rate'][$i],
                            'quantity' => $_POST['quantity'][$i],
                            'total' =>( $_POST['rate'][$i]*$_POST['quantity'][$i]),
                            'date' => $todayDate
                            );
                    }
            }
                $dataCount = count($data);

                if($dataCount)
                {
                $this->db->insert_batch('purchase', $data);
                }

                return $dataCount; 
```

# visual-studio - 框架如何找到 ASP.NET MVC / ASP.NET Web Pages 程序集？

> ID：12211545
> 
> 赞同：0
> 
> 时间：2012-08-31T08:27:28.737
> 
> 标签：visual-studio, gac, .net-assembly

我这里有 MVC 程序集：这里有 `C:\Program Files\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies` ASP.NET 网页程序集： `C:\Program Files\Microsoft ASP.NET\ASP.NET Web Pages\v2.0\Assemblies\`

这些程序集没有安装到 GAC 中（我已经检查过`gacutil -l`），但是 VS 在“添加引用”对话框中显示了所有这些程序集。

当我在 IIS 上运行站点时，这些程序集也会被加载，但它们的路径未在中指定`Web.config`：

```
<add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

如何找到这些程序集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:24:41.673

似乎程序集已安装到 GAC 中：

```
C:\Program Files\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools>gacutil.exe /l System.Web.Mvc
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.17929
Copyright (c) Microsoft Corporation.  All rights reserved.

The Global Assembly Cache contains the following assemblies:
  System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL
  System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL

Number of items = 2 
```

只需使用正确的 gacutil，现在有两个 - 一个用于 1.1/2.0/3.0/3.5/3.5SP1，另一个用于 4.0/4.5。

# javascript - 如何从浏览器获取cookie，从另一个应用程序删除

> ID：12211548
> 
> 赞同：0
> 
> 时间：2012-08-31T08:27:38.120
> 
> 标签：javascript, java, ajax, jsp, cookies

我有一个应用程序 URL，如果用户在浏览器中登录，它会为我生成名为 xyz 的 cookie。我想以编程方式（使用 Java/JSP）点击 URL 来查看用户是否登录。

现在，每次当我从我的 Java 代码中点击 url 时，它都找不到那个 cookie (xyz)，因为它会在每个请求上创建新会话。这可能是因为我从我的代码中点击了 url。现在我该如何想出这种情况，以便我的应用程序将在浏览器中创建 cookie，并且我的代码将查找该 cookie。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:55:33.187

cookie 由用户的浏览器存储在客户端，因此如果您调用 URL 服务器端，它不会将 cookie 与响应一起发回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:12:57.103

您试图知道用户是否登录的方式无法通过您的方法实现。

我们的案例可能的解决方法是：

实现 HttpSessionAttributeListener 并覆盖它的方法 attributeAdded 和 attributeRemoved 方法。当为登录用户创建会话时，您最有可能将 userName 属性保存为会话。一旦 userName 属性被保存，listner 的 attributeAdded 方法将被调用，您可以在那里看到用户的名称，一旦用户注销，attributeRemoved 方法将被 session invalidate 方法的触发器调用，您的侦听器将收到通知. 您可以看到已注销的用户的名称。

有关详细说明，请参见下面的示例。 [http://www.roseindia.net/servlets/SessionAttributeListenerExample.shtml](http://www.roseindia.net/servlets/SessionAttributeListenerExample.shtml)

# c# - 在启动时从 Metro 应用程序进入 win32 桌面

> ID：12211549
> 
> 赞同：0
> 
> 时间：2012-08-31T08:27:41.190
> 
> 标签：c#, microsoft-metro, desktop, launcher

我想在启动 Metro 应用程序时从 Metro 应用程序进入 win32 桌面（在 Metro 启动屏幕上按应用程序的磁贴）。一种方法是在启动 Metro 应用程序时打开一个文件（例如 TXT 文件）。我在 OnLaunched 中添加了以下代码逻辑，有时它可以打开文件并进入桌面，但有时它不能。有人可以帮助我吗？（只需在 VS2012 中创建一个空白应用程序）。

```
async protected override void OnLaunched(LaunchActivatedEventArgs args) {
// Do not repeat app initialization when already running, just ensure that the window     //is active
if (args.PreviousExecutionState == ApplicationExecutionState.Running)
{
    Window.Current.Activate();
    return;
}
if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
{
    //TODO: Load state from previously suspended application
}

// Create a Frame to act navigation context and navigate to the first page
// var rootFrame = new Frame();
if (!rootFrame.Navigate(typeof(MainPage)))
{
    throw new Exception("Failed to create initial page");
}

// Place the frame in the current Window and ensure that it is active
Window.Current.Content = rootFrame;
Window.Current.Activate();
{
    string txtfile = @"Assets\a.txt";
    var file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(txtfile);

    if (file != null)
    {
         bool success = await Windows.System.Launcher.LaunchFileAsync(file);
         if (success)
         {
         }
         else
         {
         }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T20:26:12.253

[BatRT](http://isys-labs.com/batrt/)允许您从 Metro 应用程序执行批处理文件。这可用于从 Metro 应用程序运行任何桌面应用程序。Metro 应用程序启动后，立即执行批处理文件以运行所需的桌面应用程序。

# java - 如何在 servlet 请求中替换为 %2B

> ID：12211555
> 
> 赞同：-1
> 
> 时间：2012-08-31T08:27:58.703
> 
> 标签：java, servlets

如何用 %2b 替换 +，一些搜索以 + 作为空格，我无法在 java servlet 中执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:41:35.820

```
org.apache.commons.lang.StringEscapeUtils.replaceEach(str, new String[]{"+", "=", ...}, new String[]{"%2b", "%3D", ...}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:04:22.663

利用`java.net.URLEncoder`

例如：`URLEncoder.encode( "one+two space", "UTF-8" )`你会得到字符串`one%2Btwo+space`

# linux - bash中的“>”和“&>”有什么区别？

> ID：12211560
> 
> 赞同：9
> 
> 时间：2012-08-31T08:28:03.970
> 
> 标签：linux, bash, console

在 bash 中，我们有 3 种流类型：

*   0（标准输入）
*   1（标准输出）
*   2 (标准错误)

因此，在执行某些程序时，我可以使用这些流（例如，我可以将它们从控制台重定向到文件或类似 /dev/null 等的文件）：

```
# only errors from STDERR will be shown, STDOUT will be moved to /dev/null
command > /dev/null
# only STDOUT will be shown, STDERR will be moved to /dev/null
command 2> /dev/null 
```

我看到有人写 `command &> /dev/null`

bash`>`和in有什么区别？`&>`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T08:30:41.773

> bash中的“>”和“&>”有什么区别？

这是一个 bashism 重定向`stdout`和`stderr`. 它也可以通过更便携的方式来实现：

```
command > file 2>&1 
```

# c# - 如何激活禁用表单的控制框？

> ID：12211562
> 
> 赞同：1
> 
> 时间：2012-08-31T08:28:06.893
> 
> 标签：c#, winforms, visual-studio-2010

我有一个表单，如果某个条件为真，我将通过`this.Enabled = false`on设置为禁用。`Form_Load`

但是，这也会禁用控制框（最大化框、最小化框和关闭框）。

因此，当表单被禁用时，我无法关闭它，因为关闭框也被禁用。

有没有我可以禁用表单但启用关闭框，以便我可以关闭禁用的表单？

此表单的`OnClose`事件也会退出应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:44:44.697

您可以构建一个在条件为真时调用的小方法，并禁用此表单中可用的所有控件/容器。

伪代码：

```
 private void  Form1_Load() 
    {
       if(condition)
       { 
          DisableControls();
       }
    }

   private void DisableControls()
   {
        foreach(Control c in this.Controls)
        { 
            // your disable code here.
        }
    } 
```

**编辑**
此方法对控制框无效。

# javascript - 获取不包括特定后代节点的节点的 innerHTML

> ID：12211569
> 
> 赞同：0
> 
> 时间：2012-08-31T08:28:37.760
> 
> 标签：javascript, html, dom, nodes

假设您想要获取节点 A 的 innerHTML，但您想要排除节点 B，它是节点 A 的后代的文本节点。您对节点 B 的引用存储在变量中，并且您不想删除来自页面的节点 B。您事先也不知道节点 A 中的其他内容，因此使用正则表达式从文本节点中删除文本可能会导致意想不到的后果（如果相同的文本存在于其他地方）。有没有办法在不修改页面的情况下做到这一点，如果有，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:31:57.670

您可以克隆`A`节点，从中删除`B`节点，从而获得其 innerHTML

```
var A_clone = A.cloneNode();
A_clone.removeChild(B);  
/* B has to be evaluated from the cloned node or - if previously
 * evaluated - it will be a reference of the original A node 
 */

console.log(A_clone.innerHTML); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:31:37.183

它不会很快，但您可以：

*   克隆外部节点
*   下降到克隆的内部节点（使用某种查找功能）并将其删除
*   存储克隆节点的innerHTML
*   丢弃克隆的节点
*   返回存储的innerHTML

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:23:31.387

你也可以使用[XMLSerializer](https://developer.mozilla.org/en-US/docs/XMLSerializer)对象，序列化 a 和 b，最后将 a 中 b 的匹配替换为 ""

# testing - 从文件中读取 SOAP UI 中 HTTP 请求的参数

> ID：12211571
> 
> 赞同：1
> 
> 时间：2012-08-31T08:28:39.290
> 
> 标签：testing, automation, soapui

我在 SOAP UI 中有 400 多个测试用例，现在组件具有附加功能，因此我必须为每个测试用例（HTTP 请求）添加 3 个以上的参数。

有什么方法可以在 SOAP UI 和 HTTP 请求中添加任何简单的 excel 文件并从中读取 3 参数？这样我就可以节省时间和精力。

# html - 控制表单中的文本

> ID：12211573
> 
> 赞同：0
> 
> 时间：2012-08-31T08:28:48.883
> 
> 标签：html, forms

我有一个表格，我想：
1- 在里面输入一个默认名称
2- 当有人点击表格时，默认文本会出来，他们可以写。当他们在他们所写的文本之外单击时，仍然可以发送。
3-当有人在没有写任何东西的情况下点击外面时，默认名称会回来

我试过了： onblur="(this.value='nom') 但是当用户写作并且他在外面点击时，他写的东西被删除了。

```
<form>
<input type="text" name="titol" value="nom" onClick="(this.value='')"  " />
</form> 
```

我在这里有一个例子：http: [//jsbin.com/aposun/1/edit](http://jsbin.com/aposun/1/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:34:55.313

修改您的输入：

```
<input type="text" name="titol" value="nom" 
   onfocus="if (this.value=='nom') this.value = '';" 
   onblur="if (this.value=='') this.value = 'nom';"
/> 
```

在 HTML5 中，您可以`placeholder`改用：

```
<input type="text" id="titol" name="titol" placeholder="nom" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:39:11.330

您可以使用最后 2 个回复中提到的 HTML 5 元素占位符，但是如果您需要对任何旧版本或 IE 浏览器的支持，那么您也需要使用 javascript 替代方案。但要小心，因为如果它是必填字段，它们在验证方面可能会有点麻烦。我宁愿不填充它，而是提供一个帮助图标。

然而，这里有一篇关于 javascript 方法的好文章：[Javascript 默认文本](http://robertnyman.com/2011/05/02/html5-placeholder-and-an-alternative-approach-introducing-roberts-playground/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:41:47.397

正如他们上面所说，您可以在 html5 中使用 placeholder 属性，但我不太确定浏览器是否支持，所以我修改了您的代码并简单地比较了您作为默认值的值，如果它是默认值它赢了'不清除文本字段：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>

<form>
<input type="text" name="titol" id="titol"   /><br />
</form>

</body>
  <script>
    var val = "nom";
    var titol = document.getElementById('titol');
    titol.value = val;

    titol.addEventListener('click', function(){
      if(this.value == val){
         this.value = "";
      }
    });
  </script>
</html> 
```

# html - 使用 CSS 打印页面

> ID：12211578
> 
> 赞同：0
> 
> 时间：2012-08-31T08:29:05.233
> 
> 标签：html, css

我的`DIV`HTML 文件中有一个`WIDTH: 2500px`. **那个**div 带有用`POSITION:ABSOLUTE`. 当我给浏览器打印时，它会缩小并减小**字体大小**。但它不应该缩小，也不应该减小字体大小。请给我建议或给我一些解决方法。

谢谢， 迪内什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:48:53.570

利用

`font-size in %(percent like 100% or 80%)`使用百分比单位时，您的文本仍可完全适应移动设备和可访问性。

或使用媒体查询

```
@media screen and (max-device-width : 320px)
{
  body or yourdiv element
  {
    font:<size>px/em/cm;
  }
}
@media screen and (max-device-width : 1024px)
{
  body or yourdiv element
  {
    font:<size>px/em/cm;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:33:44.610

[媒体查询](http://www.w3.org/TR/CSS2/media.html)是关键。

```
@media print{
    body{
        font-size:16px;
    }
} 
```

# assembly - 为什么程序集调用地址添加了 0xFBFFFFFF？

> ID：12211581
> 
> 赞同：1
> 
> 时间：2012-08-31T08:29:19.790
> 
> 标签：assembly, call, object-code

好的，所以我正在为我正在开发的操作系统编写汇编程序。我对所有 mov 指令都有很好的了解，现在我想实现像 call 和 jmp 这样的指令。我真的没有很好的文档，所以我正在查看 NASM 生成的机器代码以找出操作码等。我想看看 call 的操作码是什么，所以我编译了一些在乞讨时以标签开头的代码。我希望调用操作码之后的地址是 00 00 00 00 但它是 FB FF FF FF。我认为这与符号有关，所以我用调用 0x000000 编译代码以查看发生了什么并且地址完全相同（0xFBFFFFFF）。有人可以向我解释一下吗？我很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:36:22.043

显示您正在反汇编的实际代码会很有用。该数字很可能是小端负偏移量。0xFFFFFFFB = -5 2s 补码。你写了吗：

```
Label: call Label 
```

如果 call 是具有 4 字节相对偏移量的 1 字节操作码，那将是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T09:44:59.473

在 32 位用户模式 ​​x86 代码中，最常见的 CALL 形式是`CALL rel32`，它“调用”到操作数的一个点加上下一条指令的地址。这是一个近亲电话。

作为参考，可以使用绝对调用，但编码是 6 个字节而不是 5 个；编码将是`FF 14 XX XX XX XX`. 额外的字节 ( `14`) 告诉指令读取将用作立即数的立即数位移。但是，这将需要根据加载程序的模块库进行重写；搬迁时不需要注意亲属电话。

为了可视化它是如何工作的，当指令执行时，会发生这种情况：

*   `EIP`（指令指针）递增以指向下一条指令，
*   该地址被压入堆栈（以提供返回地址），
*   立即数（例如 rel32 值）被添加到`EIP`, 和
*   下一条指令照常从（新的）中读取`[EIP]`。

当这条指令被编码时，它看起来像这样`E8 XX XX XX XX`：从中可以看出指令的长度是5个字节。

因为`EIP`增加了指令的长度，所以调用将相对于指令开始后 5 个字节的点。因此，如果您的 CALL 0x00000000 指令的相对地址是 0x00000000，则需要从`EIP`;中减去 5。您的汇编程序已将绝对地址转换为相对地址。

偏移量可以是负数。另外，请记住 x86 地址是 little-endian。因此，指令是`E8 FB FF FF FF`。

有趣的是，这条特定指令的结果是，`EIP+5`它将不断被压入堆栈，直到生成异常 ( `#SS(0)`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:35:18.053

`call`通常以各种形式出现，例如，一种使用绝对地址跳转，另一种相对于当前地址跳转。这可能是相对的，尽管这四个字节可能不是直接的偏移量。

如果有疑问，尤其是在实现汇编程序时，您可能需要查看手册或数据表。

# asp.net - 如何在 asp.net web 应用程序中部署项目

> ID：12211584
> 
> 赞同：0
> 
> 时间：2012-08-31T08:29:28.337
> 
> 标签：asp.net, visual-studio-2010, c#-4.0, web-applications, web-deployment-project

在 asp.net Web 应用程序中创建项目，然后添加 dbml 文件并创建新文件夹名称为 (urlImages) 用于上传。它在当地的视觉工作室工作，

如何部署项目？

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:38:21.710

右键单击 Web 项目并发布它。比将发布的文件上传到网络服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:39:01.953

您可以右键单击项目，单击发布并按照对话框中的说明进行操作。还有其他几个选项

*   [Visual Studio 和 ASP.NET 的 Web 应用程序项目部署概述](http://msdn.microsoft.com/en-us/library/dd394698.aspx)
*   [VS 2010 Web 部署 - ScottGu](http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx)

# javascript - 有谁知道如何使用新的 Firefox 15 Javascript 调试器

> ID：12211586
> 
> 赞同：1
> 
> 时间：2012-08-31T08:29:32.213
> 
> 标签：javascript, debugging, firefox

我的 Firefox 今天自动更新到版本 15。现在有一个内置的 javascript 调试器。

有人可以给我指出一个有用的页面来解释如何访问它以及如何使用它吗？

我安装了萤火虫 - 这会覆盖它吗？

我发现一些东西说 CTRL-SHIFT-S 是它的快捷键，但这似乎没有任何作用。

如果像萤火虫一样，我需要设置断点，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:02:34.150

[在](http://www.mozilla.org/en-US/firefox/15.0/releasenotes/)页面底部查看未解决的问题...页面重新加载不会启动调试器...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:34:39.617

你可以去`Tools / Web Developer`和`Debugger`例如。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:37:59.193

是的，firebug 似乎删除了源代码编辑器，尝试尽快禁用它然后查看源代码，您应该能够添加断点。

# android - Android：我的地图没有转到“我的位置”

> ID：12211588
> 
> 赞同：0
> 
> 时间：2012-08-31T08:29:37.777
> 
> 标签：android, maps, location

我已经创建了一张地图，但是当在手机上时，它并没有移动到我的位置（取自 gps）。为什么？因为我需要检索用户位置，如果我找到它，将地图动画到该点并刷新它（从数据库中获取图钉）。在消极的情况下，我把中心放在米兰。

```
public class Mappa extends MapActivity {
private MapView mapView;
double latitudine=0;
double longitudine=0;
int kilometri=20;
@Override
protected boolean isRouteDisplayed() {
    return false;
}
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mappa);
    mapView = (MapView) findViewById(R.id.mapview);
    MapController mapController = mapView.getController();
    final MyLocationOverlay myLocationOverlay;
    mapView.setBuiltInZoomControls(true);
    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.pin_bioscalin);
    MyOverlays itemizedoverlay = new MyOverlays(drawable, this);
    // milano
    latitudine = 45.464164;
    longitudine = 9.190321;
    GeoPoint mio_point = new GeoPoint((int)(latitudine*1E6), (int)(longitudine*1E6));
    mapController.setCenter(mio_point);
    mapController.animateTo(mio_point);
    mapController.setZoom(11);
    // GPS
    LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener mlocListener = new MyLocationListener();
    mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
    // farmacie
    Database_mio db=new Database_mio(this); 
    db.openDataBase(); 
    Cursor data=db.elenco_negozi_mappa(latitudine,longitudine,kilometri);
    data.moveToFirst();
    do {
        String id_farmacia = data.getString(data
                .getColumnIndex("_id"));
        String ragione_farmacia = data.getString(data
                .getColumnIndex("ragione"));
        String indirizzo_farmacia = data.getString(data
                .getColumnIndex("ragione"));
        int latitude_farmacia = (int) (data.getDouble(data
                .getColumnIndex("lat")) * 1E6);
        int longitude_farmacia = (int) (data.getDouble(data
                .getColumnIndex("lng")) * 1E6);
        GeoPoint point = new GeoPoint(latitude_farmacia,longitude_farmacia);
        OverlayItem overlayitem = new OverlayItem(point,ragione_farmacia,indirizzo_farmacia);
        itemizedoverlay.addOverlay(overlayitem);
    } while (data.moveToNext());
    mapOverlays.add(itemizedoverlay);
    // disclamer
    ImageView img = (ImageView) findViewById(R.id.image_mia_map);
    img.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent disclamer = new Intent(getParent(), Disclamer.class);
            disclamer.putExtra("da_dove", "Mappa");
            TabGroupActivity parentActivity = (TabGroupActivity)getParent();
            parentActivity.startChildActivity("Disclamer", disclamer);
        }
    });
}
/* Class My Location Listener */
public class MyLocationListener implements LocationListener{
    @Override
    public void onLocationChanged(Location loc){
        loc.getLatitude();
        loc.getLongitude();
        String Text = "La mia posizione: "+"Latitudine = "+loc.getLatitude()+"Longitudine = "+loc.getLongitude();
        GeoPoint mio_point = new GeoPoint((int)(loc.getLatitude()*1E6), (int)(loc.getLongitude()*1E6));
        mapView.getController().setCenter(mio_point);
        mapView.getController().animateTo(mio_point);
        Toast.makeText( getApplicationContext(),Text,Toast.LENGTH_SHORT).show();
    }
    @Override
    public void onProviderDisabled(String provider){
        Toast.makeText( getApplicationContext(),"Gps disabilitato",Toast.LENGTH_SHORT ).show();
    }
    @Override
    public void onProviderEnabled(String provider){
        Toast.makeText( getApplicationContext(),"Gps abilitato",Toast.LENGTH_SHORT).show();
    }
    @Override
    public void onStatusChanged(String provider, int status, Bundle extras){

    }
}
} 
```

谢谢大家。

# android - 更改 TimePicker 样式

> ID：12211592
> 
> 赞同：0
> 
> 时间：2012-08-31T08:29:52.457
> 
> 标签：android, timepicker

我想将时间选择器样式自定义为 Android 4 中的默认样式。我想使用这种样式，无论我使用的是 Android 2.2 还是任何版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:38:55.293

您可以在此处查看旨在将 Holo 主题移植到 android 1.6 及更高版本的 Holo Everywhere 库：[https ://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T08:35:03.377

您需要获取[TimePicker 的源代码](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/TimePicker.java)以及所需的所有类和资源，放入您的项目中，然后使用它们而不是平台本身提供的源代码。

# python - 使用 Python 对文件运行 Bash 命令

> ID：12211593
> 
> 赞同：0
> 
> 时间：2012-08-31T08:30:13.023
> 
> 标签：python, python-2.7

所以我正在创建一个脚本，它需要遍历服务器上的所有文件并运行每个文件名，后跟命令“ll”，然后获取该命令的输出并将其打印到 txt 文件。

例子：

文件夹/文件名.txt ll

输出：SoMETHINGSomethingSomethingother - 这被发送到 output.txt 文件

文件夹/子文件夹/filename3.txt ll

输出：SoMETHINGSomethingSomethingother - 这被发送到 output.txt 文件

这是我到目前为止所拥有的：

```
import os

with open("output.txt", "w") as a:
    for path, subdirs, files in os.walk(r'C:\Users\user\Desktop\Test_Py'):
       for filename in files:
         f = os.path.join(filename)
         m = f + ' ll'

         a.write(str(m) + os.linesep) 
```

所以我现在想弄清楚的是如何使打印出来的文件名使用“ll”命令运行。到目前为止，此代码将将该文件夹及其子文件夹中所有文件的名称写入我的 output.txt 文件中。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:37:42.663

使用`os.system()`：

```
import os

with open("output.txt", "w") as a:
    for path, subdirs, files in os.walk(r'C:\Users\user\Desktop\Test_Py'):
        for filename in files:
            f = os.path.join(filename)
            m = f + ' ll > output.txt'

            os.system(m) 
```

这只会将标准输出发送到`output.txt`文件。如果您还想发送错误消息`output.txt`，请`m = f + ' ll > output.txt 2>&1'`改用。

说明：`os.system(command_string)`将在您的系统中执行该命令`command_string`，就像您在终端中键入该命令一样。该`>`运算符在 Windows 和 Linux 中是标准的，用于将命令的标准输出重定向到文件中。最后的`2>&1`额外参数是唯一不太清楚的部分：它将标准错误重定向到标准输出所在的位置。[在此处](https://stackoverflow.com/questions/818255/in-the-bash-shell-what-is-21)查看有关最后一部分的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:35:43.417

为了使用“ll”命令运行文件，您可以使用python 中可用的[subprocess](http://docs.python.org/library/subprocess.html)模块。

您修改后的代码将是：-

```
import os
import subprocess
import shlex

with open("output.txt", "w") as a:
    for path, subdirs, files in os.walk(r'C:\Users\user\Desktop\Test_Py'):
       for filename in files:
         f = os.path.join(filename)
         m = f + ' ll'

         cmd_args = shlex.split(m)
         output = subprocess.check_output(cmd_args)
         a.write(output + os.linesep) 
```

# c# - 如何在给定随机 TreeViewItem 的情况下获取节点的根

> ID：12211596
> 
> 赞同：0
> 
> 时间：2012-08-31T08:30:19.400
> 
> 标签：c#, .net, wpf, treeview

给定一个树中的随机 TreeViewItem，我如何检索节点的祖父，呃根？

单击子项时，我正在使用它来突出显示根。

```
private void TreeViewDecode_PreviewMouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
     TreeViewItem treeViewItem = GetSexyGrandDaddy(e.OriginalSource as DependencyObject);
     ...
}
private static TreeViewItem GetSexyGrandDaddy(DependencyObject source)
{
        if (source != null && source is TreeViewItem)
        {
            TreeViewItem root = VisualTreeHelper.GetParent(source) as TreeViewItem;

            while (root.Parent != null)
            {
                root = root.Parent as TreeViewItem;
            }
            return root as TreeViewItem;
        }
        return null;
} 
```

编辑：更新的代码仍然不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:34:43.937

我猜你的意思是“父母”，

看看[TreeViewItem.Parent](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.parent.aspx)

**更新** 看看这段代码：

采用

```
 e.Source 
```

代替

```
 e.OrginalSource 
```

* * *

```
 private void treeView1_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        TreeViewItem treeViewItem = GetSexyGrandDaddy(e.Source as DependencyObject);
        if (treeViewItem != null)
        {
            //do highlight...
        }
    }

    private static TreeViewItem GetSexyGrandDaddy(DependencyObject source)
    {
        TreeViewItem sugarDad = source as TreeViewItem;
        if (sugarDad != null)
        {
            while (sugarDad.Parent as TreeViewItem != null)
                sugarDad = sugarDad.Parent as TreeViewItem;
        }
        return sugarDad;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:36:56.337

你可以尝试这样的事情：

```
TreeViewItem root = treeViewItem;
while( root.Parent != null )
{
    root = root.Parent;
}
// now "root" contains the root of you tree... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:37:45.333

您可以遍历父母，直到父母为空。那么你就有了根节点。

```
TreeNode root = node.Parent;
while(root != null)
root = root.Parent; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:08:35.190

试试这个

```
private static TreeViewItem GetSexyGrandDaddy(DependencyObject source)
{
    if (source != null && source is TreeViewItem)
    {
        TreeViewItem root = source as TreeViewItem;

        var parent = VisualTreeHelper.GetParent(root);
        while (parent != null)
        {
            if (parent is TreeViewItem) root = parent as TreeViewItem;
            parent = VisualTreeHelper.GetParent(parent);
        }

        return root as TreeViewItem;
    }
    return null;
} 
```

# azure - 谁更快？AppFabric 缓存还是 Memcached？

> ID：12211602
> 
> 赞同：1
> 
> 时间：2012-08-31T08:30:44.190
> 
> 标签：azure, memcached, appfabric

我们使用 MS AppFabric 缓存来存储中央会话。但是我们想知道这家店有多快？谁曾经在这台机器上做虚拟机和Memcached？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:58:28.080

我不确定我是否见过任何基准测试，因此很难回答，但 6 月 7 日发布的新 Windows Azure 缓存服务解决了分布式多租户 Azure 缓存服务的许多性能问题。

以下是海石关于 Azure 缓存的博客的摘录，请注意 Windows Azure 缓存现在也支持 Memcached 互操作性...

> “集群利用您的云服务主机上的可用内存空间，并且集群服务进程可以共享您的 Web/工作者角色的主机，或者在您使用专用缓存工作者角色时在专用虚拟机上运行”

[http://haishibai.blogspot.com.au/2012/06/windows-azure-caching-service-memcached.html](http://haishibai.blogspot.com.au/2012/06/windows-azure-caching-service-memcached.html)

> 快速的性能。集群可以与您的角色搭配使用，也可以根据关联组紧密运行。这有助于将延迟降至最低。此外，您还可以在您的 web/worker 角色上启用本地缓存，以便他们获得对缓存项目的最快内存访问以及通知支持。

# javascript - 我怎样才能得到显示的文本，因为它在 JS 中显示

> ID：12211603
> 
> 赞同：0
> 
> 时间：2012-08-31T08:30:53.437
> 
> 标签：javascript, text

我想在网站上读出一个文本宽度 JS，因为它不是由 PHP 或其他任何东西提供的。例如交付的文本：

```
ABCDE 
```

呈现的文本（我想要的）：

```
AB
CD
E 
```

有人知道方法吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:46:10.423

使用 [splitter] 将字符串拆分为 [n] 个字符块的通用函数：

```
function splitByX(str,n,splitter){
     n = n || 2;
     splitter = splitter || ' ';
     var x = [];
     for (var i=0;i<str.length;i+=n){
        x.push(str.slice(i,i+n));
     }
     return x.join(splitter); 
}
var strFormatted  = splitByX('ABCDEFGHIJ')    //=> "AB CD EF GH IJ"
   ,strFormatted2 = splitByX('ABCDEFGHIJ',3); //=> "ABC DEF GHI J"
   ,strFormatted3 = splitByX('ABCDEFGHIJ',3,'<br>'); 
       //=> "ABC<br>DEF<br>GHI<br>J" 
```

对于`<span>`其中的文本：

```
var receivedSpan = /*[retrieve the span using a DOM method]*/;
receivedspan.innerHTML = splitByX(receivedspan.innerHTML,2,'<br>'); 
```

或者，您可以在 PHP 中设置 span 样式：

```
<span style="white-space:pre">AB\nCD\nE</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:34:41.083

不确定我是否已正确阅读您的要求，但您是在谈论在页面上将代码显示为文本吗？如果是这样，您应该能够使用`<pre> </pre>`HTML 元素来执行此操作。

# wordpress - 在 Apache2 中托管多个域 - 如何？

> ID：12211604
> 
> 赞同：0
> 
> 时间：2012-08-31T08:31:00.090
> 
> 标签：wordpress, apache2, virtual, hosts

虽然我在 stackoverflow 上找到了相关文章，但我看到了各种我尝试过的建议，但我仍然遇到问题，所以这就是我发布这个的原因。

我有一个涉及 DNS、Debian、Apache2 和 Wordpress 的问题。我已经为此苦苦挣扎了一段时间，但一直无法解决。我目前的结论是 2 我的 dns 和 apache 虚拟主机定义有些问题”，但是，正如我所说，我还不确定。

这是我的配置的样子：

*   我“拥有”由 moniker.com 托管的两个域 - 我们称它们为 domaina 和 domainb
*   一个带有 Debian、apache2 和 wordpress 的托管 vps。vps 有 ip xyzt
*   每个域定义了三个“A”记录：“*”、“@”和“www”</li>
*   启用 URL 重写（a2enmod 重写）
*   安装了 Wordpress，并为以下 virtualhost 指令中指定的两个文档目录创建了指向 wordpress 目录的链接

'domaina' 和 'domainb' 都指向我的 vps，这一切正常。但是，我一直无法解决的是让 vps 处理“多个虚拟主机”。我想我可以通过在 Apache 中使用虚拟主机来处理这个问题。为此，我在 /etc/apache2/sites-available 下定义了两个站点，如下所示：

（文件：/etc/apache2/sites-available/domaina.com）

```
<VirtualHost x.y.z.t:80>
ServerName domaina.com
ServerAdmin me@domaina.com
DocumentRoot /var/www/domaina.com
DirectoryIndex index.php
<Directory /var/www/domaina.com/>
  AllowOverride all
  Order deny,allow
  Allow from all
</Directory>
</VirtualHost> 
```

（文件：/etc/apache2/sites-available/domainb.com）

```
<VirtualHost x.y.z.t:80>
ServerName domainb.com
ServerAdmin me@domainab.com
DocumentRoot /var/www/domainb.com
DirectoryIndex index.php
<Directory /var/www/domainb.com/>
  AllowOverride all
  Order deny,allow
  Allow from all
</Directory>
</VirtualHost> 
```

现在，当我尝试从 Web 浏览器访问上述站点时，我最终进入了默认的 apache 目录，其中 index.html 文件在浏览器中呈现，而不是到达两个不同的 wordpress 配置。显然，我对“虚拟主机”和/或 DNS 配置的想法有问题……</p>

我忘了提到我已经进行了很多 /etc/unit.d/apache2 重新启动...对不起...

坦率地说，我在这里迷路了，对此的任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:00:44.370

`NameVirtualHost`您的 apache2.conf 中是否有任何指令？您需要它来启用虚拟主机。它可以放在 apache2.conf 或 apache2.conf 包含的任何文件中。在我的服务器上，我在ports.conf 中有它。

```
NameVirtualHost *:80 
```

请参阅[http://httpd.apache.org/docs/2.2/vhosts/name-based.html#using](http://httpd.apache.org/docs/2.2/vhosts/name-based.html#using)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:30:16.627

如果您确实重新启动了 apache 并且它仍然无法正常工作，请回复，因为我在 Apache 上遇到过类似的问题，尤其是在让虚拟主机工作时。我意识到您在 Debian 上的运行与 WAMP 不同，但这是我在打开新虚拟主机时所做的。

首先，我将域添加到 Windows 系统 32 驱动程序等主机文件，它允许 Intranet **127.0.0.1 域名**，这会阻止 url 查找网络。

然后我必须将正确的目录添加到 www/ **your folder**。

在根文件夹内应该有一个名为 vhosts 的目录，我必须使用其中的虚拟主机的文件名创建完全空的 conf 文件实例，以便您对**httpd-vhosts.conf**所做的更改有效。

因此，您需要做的是找到**wamp/bin/apache/Apache2.2.21/conf/extra/httpd-vhosts**确保您拥有来自 conf/axtra 而不是 conf/orginal 的那个。

```
<VirtualHost *:80>

DocumentRoot "c:/wamp/www/**name of the folder**"

ServerName **as_inserted_in_hosts** 

<directory "c:/wamp/www//**name of the folder**">

Options Indexes FollowSymLinks

AllowOverride all

Order Deny,Allow

Deny from all

Allow from 127.0.0.1

</directory>

</VirtualHost> 
```

节省。Apache停止所有服务，我还必须重新启动在Windows中运行Intranet的服务以更新对hosts文件的更改，然后重新启动apache。

这是我必须做的，这样当我从 Apache 打开 localhost 时，它允许我看到出现在虚拟主机下的链接以及出现在项目下的目录。

看看这个教程...[解释如何设置虚拟主机](http://foundationphp.com/tutorials/apache22_vhosts.php)

# android - Android键盘按键预览背景图片

> ID：12211615
> 
> 赞同：3
> 
> 时间：2012-08-31T08:32:03.703
> 
> 标签：android, image, background, keyboard, preview

开发安卓键盘：如何更改按键预览的背景图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T18:38:20.433

如果您通过扩展 KeyboardView 创建自定义键盘，那么我们可以使用 'android:keyPreviewLayout' attr 为我们的自定义 KeyboardView 设置自定义键预览布局。

例如

```
 <com.example.myApp.MyCustomKeyboardView
        android:id="@+id/keyboard_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:keyPreviewLayout="@layout/my_custom_layout" /> 
```

其中 my_custom_layout.xml 是您的自定义预览布局，例如

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="80sp"
    android:textSize="40sp"
    android:textColor="?android:attr/textColorPrimaryInverse"
    android:minWidth="32dip"
    android:gravity="center"
    android:background="@color/black"/> 
```

希望这可以帮助！

# c# - 如何计算 EMGU 中两幅图像之间的相关性？

> ID：12211619
> 
> 赞同：2
> 
> 时间：2012-08-31T08:32:19.367
> 
> 标签：c#, opencv, emgucv

我有两个图像（假设它们具有相同的大小），我想使用 EMGU 和 C# 计算两个图像之间的相关性。

我没有找到任何可以做到的函数并自己实现了相关计算..但我宁愿使用内置函数。

这样的功能存在吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:35:06.070

我认为[Image<>.MatchTemplate()](http://www.emgu.com/wiki/files/2.0.0.0/html/e825d2a7-91fa-75eb-0eb4-3245d70227ee.htm)是您正在寻找的。

# entity-framework - 使用 EF 创建 oracle db 的最佳查询

> ID：12211623
> 
> 赞同：0
> 
> 时间：2012-08-31T08:32:26.407
> 
> 标签：entity-framework, oracle10g

我有一个 Oracle 数据库，用于存储有关客户的信息。其中一个字段是用户编号。

我的`UserNumber`专栏是文本类型。

用户以各种格式发送号码：

*   +44777XXXXXXX
*   777XXXXXXX
*   0777XXXXXXX

到目前为止，我有：

```
var list = context.UserDetails.Where(x => x.UserNumber == number).ToList(); 
```

我也可以这样做：

```
var strippedNumber = ConvertNumberToBasic(number); // this will return me number as 777XXXXXXX

now 

var list = context.UserDetails.Where(x => x.UserNumber.Contains(number)).ToList(); 
```

我有没有更优化的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:54:06.430

在您为此编写任何代码之前，您确实需要询问客户他们需要什么......

# iphone - 为 iPhone 添加本地化语言 - 这可能吗？

> ID：12211625
> 
> 赞同：1
> 
> 时间：2012-08-31T08:32:28.680
> 
> 标签：iphone, ios, xcode, localization, nslocalizedstring

与 Android 相比，iPhone 不支持多种语言，尽管 MAC 似乎支持（仅仅是因为我了解到在 xCode 中添加这些语言的可能性是针对 MAC 应用程序而不是针对 iOS）。

现在，我为 iPhone 语言设置的语言列表中不可用的语言添加了 Localizable.strings 文件。

有没有一种使用标准方法的方法，例如：

```
[onOffSC setTitle:NSLocalizedString(@"On","Off") forSegmentAtIndex:0]; 
```

如果我只是在我的应用程序中放置一个选择菜单？

否则我将不得不添加一个特殊的逻辑 - 假设是 MYNSLocalizedString，首先检查用户是否想要选择不支持的语言，以其他方式获取它（可能将这些翻译放入 NSDictionary），否则调用标准的 NSLocalizedString。

我想无论如何我都必须在应用程序中放置一个语言选择菜单 - 但是可以使用调用`NSLocalizedString`还是我必须添加`MYNSLocalizedString`前面提到的元方法？

或者还有其他好的解决方案吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:29:01.273

我认为最好使用**Settings**中设置的语言，而不是用户从菜单中选择。参考本教程可能会帮助您了解本地化是如何完成的。

[http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:18:59.637

对于您的 iPhone 应用程序的本地化：使用此处描述的方法... [http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

# php - PHP file_put_contents 不截断 CIFS 挂载中的文件

> ID：12211629
> 
> 赞同：3
> 
> 时间：2012-08-31T08:32:39.663
> 
> 标签：php, fwrite, cifs

我有一个奇怪的问题，PHP`file_put_contents()`和`fwrite()`（在打开文件句柄后使用`fopen('filename', 'w');`）函数没有截断目标文件，如 PHP 文档中所述`fwrite()`。该文件位于 Seagate BlackArmor NAS 设备上，该设备使用 CIFS 安装在 Linux 服务器 (Ubuntu 10.04) 上，如下所示：

`mount -t cifs -o defaults,credentials=/etc/smbpass/demo.smbpass,uid=1005,gid=1005,dir_mode=0770,file_mod=0660 //xxx.xxx.xxx.xxx/demo/files /var/www/mysite/src/files/`

例子：

myfile.txt 的内容：`thisisabigfatpandaonwheelsgoingdownthestreet`

使用代码运行 PHP 脚本：`file_put_contents('myfile.txt', 'blah');`

myfile.txt 的内容：`blahisabigfatpandaonwheelsgoingdownthestreet`

文件的预期内容显然是`blah`，但事实并非如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:32:45.193

我在自己的 samba 设置上遇到了完全相同的症状（Debian 6 x64 with samba 3.5.6.）。我最终将其缩小到以下导致完全相同的行为的选项：

`large readwrite = no`

当设置为`yes`（或删除，因为是默认设置）时，问题就消失了。

针对 Debain 和上游 Samba 提交的错误报告：
[http ://bugs.debian.org/cgi-bin/bugreport.cgi?bug=699461](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=699461)
[https://bugzilla.samba.org/show_bug.cgi?id=9622](https://bugzilla.samba.org/show_bug.cgi?id=9622)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:44:56.720

由于您的挂载标志，该文件不是世界可读/可写的

mount -t cifs -o defaults,credentials=/etc/smbpass/demo.smbpass,uid=1005,gid=1005, **dir_mode=0770,file_mod=0660** //xxx.xxx.xxx.xxx/demo/files /var/ www/mysite/src/files/

如果您通过 Web 服务器运行它，它将无权访问该文件，因为它以不同的用户身份运行。您可以使用 is_writable('myfile.txt') 来判断是否是这种情况。

# java - JAVA：通过套接字传输文件

> ID：12211630
> 
> 赞同：1
> 
> 时间：2012-08-31T08:32:43.753
> 
> 标签：java, stream, streaming, filestream

**我在做什么：** 我正在编写一个关于通过套接字连接进行客户端-服务器文件传输的程序。服务器通过缓冲将文件发送到客户端计算机`ObjectOutputStream`。*通过逐字节*发送文件来发送文件

 ***我想做的是：** 能够从两端发送暂停/取消信号。

**问题：** 由于文件是*逐字节*发送的，我很困惑如何从服务器向客户端发送暂停/取消信号。请帮忙。

***附加信息：*** 如果我从服务器向客户端发送一个整数/一个字节以指示应该暂停或取消传输，那么客户端计算机可能会将这些字节作为文件的一部分读取，这应该会让人感到困惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:35:58.773

我不会使用 ObjectOutptuStream，因为这可能效率低下。一次发送一个字节是非常低效的。

我会改用 DataOutputStream 。

在任何情况下，解决方案都差不多。发送者可以通过不发送数据来暂停。接收方可以通过不读取数据来暂停，这将导致发送方阻塞。*

# android - 使用google play apk扩展文件解决方法时获取STATE_FAILED_FETCHING_URL

> ID：12211631
> 
> 赞同：3
> 
> 时间：2012-08-31T08:32:45.983
> 
> 标签：android

由于我们的包太大，我们正在尝试使用 google play 的 apk 扩展文件。[遵循http://developer.android.com/guide/google/play/expansion-files.html](http://developer.android.com/guide/google/play/expansion-files.html)中的说明并关注 stackoverflow 中的一些帖子。我们设法让我们的代码运行。

但不幸的是，我们不断收到 STATE_FAILED_FETCHING_URL。有什么问题吗？我们应该在开始之前设置什么吗？

我们已经通过开发者控制台放置了 apk 和扩展文件。

有什么建议吗？多谢。

[更新]我发现原因是因为我没有将google帐户添加到测试帐户，并且没有使用与我上传到发布帐户相同的密钥库签名的apk。但是在我成功一次之后，在eclipse中使用默认调试密钥库签名的apk就可以了。此外，我忘记点击激活链接来激活我的草稿。

# python - 来自 canonical_resource_for('object') 的 Tastypie 构建数据包

> ID：12211633
> 
> 赞同：0
> 
> 时间：2012-08-31T08:32:50.523
> 
> 标签：python, django, tastypie

我正在尝试编写一个 Django TemplateView，它返回一个上下文参数“数据”，其中包含基于美味派规范资源的 JSON：

**资源**

```
class FooResource(ModelResource):
    bars = fields.ToManyField('app.api.v1.resources.BarResource', 'bars', null=True, full=True)

    class Meta:
        queryset = Foo.objects.all()
        resource_name = 'foo'
        # ... 
```

**楷模**

```
class FooDetailView(TemplateView):
    template_name = 'app/foo_detail.html'

    def get_detail(self, slug):
        foo_resource = v1_api.canonical_resource_for('foo')

        try:
            foo = foo_resource.cached_obj_get(slug=slug)
        except Foo.DoesNotExist:
            raise Http404

        bundle = foo_resource.full_dehydrate(foo_resource.build_bundle(obj=foo))
        return bundle.data

    def get_context_data(self, **kwargs):
        base = super(FooDetailView, self).get_context_data(**kwargs)
        base['data'] = self.get_detail(base['params']['slug'])
        return base 
```

这可行，但是 Foo 和 Bar 之间的反向关系似乎没有通过手动过程进行序列化。TemplateView 将这些作为字符串返回，这是响应：

```
{
    'title': u'I am Foo.title',
    'bars': [<Bundle for obj: '1' and with data: '{'title': u'I am Bar.title'}']
} 
```

那么，问题是，在构建捆绑包时如何迭代反向关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:53:29.733

答案是在脱水后通过 resource.serializer 运行 bundle

```
def get_detail(self, slug):
    qr = v1_api.canonical_resource_for('question')
    try:
        question = qr.cached_obj_get(slug=slug)
    except Question.DoesNotExist:
        raise Http404

    bundle = qr.full_dehydrate(qr.build_bundle(obj=question))

    # create response
    desired_format = qr.determine_format(self.request)
    serialized = qr.serialize(self.request, bundle, desired_format)
    return serialized 
```

# c# - fileupload 的上传按钮在 IE 和 Chrome 中的工作方式不同

> ID：12211636
> 
> 赞同：1
> 
> 时间：2012-08-31T08:33:00.960
> 
> 标签：c#, asp.net

对于那些使用引导程序的人，知道它不支持输入类型 = 文件，所以我使用 jQuery 隐藏了 asp:fileupload （在文档准备好之后），并拥有解决方案（从代码中可以看到）

```
<script type="text/javascript">
    $(document).ready(function ()
    {
        $('#columnSelect').change(function ()
        {
            getImportColumnOrder();
        });

        // change file upload style similiar to bootstrap style
        //$('#uploader').hide();
        $('#uploader').change(function ()
        {
            var val = $(this).val();
            var file = val.split(/[\\/]/);
            $('#file').val(file[file.length - 1]);

        });

    });

    function getImportColumnOrder()
    {
        var order = '';
        $('#selectOrer').val('');

        $('select', $('#MappingTable')).each(function ()
        {
            order += $(this).prop('selectedIndex') + ',';
        });

        $('#selectOrder').val(order.substr(0, order.length - 1));

    }

</script>
<div class="span12">

                <asp:DropDownList ID="ddl_DBTableList" runat="server" CssClass="combobox" Style="display: inline">

                    <asp:ListItem></asp:ListItem>

                    <asp:ListItem Value="Import_Test">Import_Test</asp:ListItem>

                </asp:DropDownList>

                <asp:FileUpload ID="uploader" runat="server" CssClass="btn" />

                <div class="input-append" style="display: inline;">
                    <input id="file" class="input-medium" type="text" />
                    <a class="btn" onclick="$('input[id=uploader]').click();">Select File</a>
                </div>

                <p />

                <div>
                    <asp:Button ID="btn_uplaod" runat="server" OnClick="doUpload" Text="Upload" CssClass="btn" />
                </div>

                <p />

                <asp:Label ID="result" runat="server" ForeColor="Red"></asp:Label>

                <p />

                <asp:Label ID="data" runat="server" BackColor="#CCCCCC"></asp:Label>

                <p />

                <asp:Button ID="btn_import" runat="server" Text="Next" OnClick="doImport" OnClientClick="getImportColumnOrder();return true;" Visible="false" CssClass="btn btn-success" />

            </div> 
```

步骤是点击“选择文件”，弹出一个文件选择器进行文件选择。双击文件后，文件位置显示在 中，还有 asp fileupload 控件。

在 Chrome 和 FF 中，当我单击 btn_uplaod（按钮）时，它会按预期运行。在 IE 中，它将清除文件上传的内容并且不执行任何操作（客户端操作）并且不会执行任何回发。

如果这是程序问题，那么 Chrome 和 FF 可能无法正常运行。我怀疑是否需要添加任何内容才能使 IE 像假设的那样运行？

点击上传后的图片（IE），（浏览链接被清除） ![在此处输入图像描述](../Images/e20d438f69c56a2419d7ab7f7984b657.png)

点击上传后的图片（Chrome），（按预期运行） ![在此处输入图像描述](../Images/15806423843805d4fc92ae4d450ff906.png)

谢谢！

我为那些想尝试 Visual Studio 的人制作了一个简单的版本：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="postback_problem.aspx.cs" Inherits="postback_problem" %> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml"> <head runat="server"> <title></title> <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> </head> <body> <form id="form1" runat="server"> <div> <asp:FileUpload ID="uploader" runat="server" CssClass="btn" /> <div> <input id="file" class="input-medium" type="text" /> <a onclick="$('input[id=uploader]').click();">Select File</a> </div> <p /> <div> <asp:Button ID="btn_uplaod" runat="server" OnClick="doUpload" Text="Upload" CssClass="btn" /> </div> <asp:Label ID="result" runat="server"></asp:Label> </div> </form> </body> </html> 
```

和

```
 using System; using System.Collections.Generic; using System.Linq; using System.Web; using System.Web.UI; using System.Web.UI.WebControls; public partial class postback_problem : System.Web.UI.Page { protected void Page_Load(object sender, EventArgs e) { } protected void doUpload(object sender, EventArgs e) { result.Text = "no problem!"; } } 
```

# linux - 如何在 awk 中使用 bash 命令

> ID：12211638
> 
> 赞同：2
> 
> 时间：2012-08-31T08:33:05.930
> 
> 标签：linux, bash, awk

这是我的问题

我有一个文件 1，其中有一些数据

```
Var1.1   Var1.2   Var1.3
Var2.1   Var2.2   Var2.3
Var3.1   Var3.2   Var3.3 
```

由于上述数据，我有一个文件 2 我想编辑

文件 2 (1)

```
***pattern with Var2.1***
some text... 
```

文件2(2)

```
***pattern with Var2.1***
Here I want to add Var2.2 and Var2.3
some text 
```

我的第一个解决方案是使用 AWK，但我不知道在其中包含 bash 命令。AWK 应该是这样的：

*   在 File2 中搜索模式
*   当 awk 得到它时，awk 调用一个脚本，该脚本从 File1 返回所需的值。
*   然后awk可以编辑File2

如果有更简单的可能性，请毫不犹豫地向我解释其他可能性！

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:22:30.217

这就是我从 awk 中运行外部命令以对字符串进行 base64 解码的方式：

```
cmd = "/usr/bin/base64 -i -d <<< " $2 " 2>/dev/null"
while ( ( cmd | getline result ) > 0 ) { }
close(cmd)
split(result, a, "[:=,]")
name=a[2] 
```

或许你能从中得到一些启发……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:11:30.737

无需运行外部脚本来完成您想要的。它可以完全在一个简短的 AWK 脚本中完成。

```
awk 'FNR == NR {arr[$1] = $2 " " $3; next} {print; for (lookup in arr) {if ($0 ~ lookup) {split(arr[lookup], a); print "Here I want to add " a[1] " and " a[2]}}}' File1 File2 
```

解释：

*   `FNR == NR {arr[$1] = $2 " " $3; next}`- 遍历第一个文件并将所有值保存在由第一列索引的数组中。记录号等于第一个文件的文件记录号。
*   `print`- 打印每个输入行。
*   `for (lookup in arr) {if ($0 ~ lookup) {`- 循环遍历每个数组索引并查看输入行是否匹配。
*   `split(arr[lookup], a)`- 将存储在匹配索引处的值拆分为临时数组。
*   `print "Here I want to add " a[1] " and " a[2]`- 使用拆分产生的两个值打印一些文本。

# java - Jersey Client 执行并行 POST 请求的正确方法

> ID：12211639
> 
> 赞同：0
> 
> 时间：2012-08-31T08:33:07.327
> 
> 标签：java, jersey, apache-httpclient-4.x

我正在寻找使用 jersey 客户端（使用 apache http 客户端 4.x）执行 POST 请求的正确方法

由于 Client 实例和 WebResource 实例是线程安全的，编码该方法的自然方式是：

```
public AuthorizedAccount createAuthTokenFromUserPass(Credentials credentials)
        throws AuthenticationServiceClientException {
    ClientResponse response = resource.accept("application/x-protobuf").post(
                              ClientResponse.class, credentials);
    return getAuthorizedAccountFromResponse(response);
} 
```

ClientResponse 实例已正确释放。

当从多个线程执行此方法时，最终会为每个线程将相同的凭据实例发布到服务器。

一个解决方案是同步方法，但最终会按顺序执行 POST。

有不同的方法吗？（避免重新创建客户端实例）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T13:28:02.660

在花了很多时间试图找出什么不能正常工作之后，我发现问题并不真正在 jersey 客户端实现中，而是在我自己的代码中。我使用了 MessageBodyWriter 的自定义实现，但我不够小心。我没有正确阅读接口的合同。我在 getSize() 和 writeTo() 的调用之间共享了一个实例变量，并重用了 MassageBodyWriter。

# android - Android从mysql服务器获取包含特殊/复制粘贴字符的数据

> ID：12211652
> 
> 赞同：1
> 
> 时间：2012-08-31T08:34:10.290
> 
> 标签：android, mysql, json, special-characters, htmlspecialchars

我需要从 mysql 数据库中获取一些数据。我正在运行一个 php 脚本来查询数据库、json 编码并打印它。通过服务器中 php 上的 httppost 从我的应用程序中获取结果。我正在从服务器获取所有数据，除了一些包含特殊/非键入字符的条目。例如：“，”对于这些条目我得到null.So 除了用键入的字符（如“”）服务器端替换这些字符之外......有什么办法可以让这些数据与这些字符一起显示在应用程序上。谢谢。

```
 try{
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost(KEY_121);
                    //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();

            }catch(Exception e){
                    Log.e("cxxn", "Error in http connection "+e.toString());
            }

            //convert response to string
            try{
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
                    }
                    is.close();
                    result=sb.toString();
            }catch(Exception e){
                    Log.e("convt", "Error converting result "+e.toString());
            } 
```

结果对于具有特殊字符的那些数据具有空值。我应该更改我正在使用的编码吗..？编辑：MySQL 字符集是：UTF-8 Unicode (utf8)

```
<?php

      mysql_connect("","","");

      mysql_select_db("fdict");

      $q=mysql_query("SELECT (Id), (WD), (des), (udte) FROM `dict`");

      while($e=mysql_fetch_assoc($q))

              $output[]=$e;

           print(json_encode($output));

    mysql_close();
?> 
```

这是我的服务器端php代码。已经删除了服务器地址，通过。带有特殊字符的数据似乎只有在json_encode（）之后才变为空。sql查询结果的回显显示没有任何空值的正确数据。有人请帮忙这个。我能做什么..？我有什么选择..？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:22:45.410

用[这个](https://stackoverflow.com/questions/1972006/json-encode-is-returning-null)解决了。需要放在`mysql_query('SET CHARACTER SET utf8')`SELECT 查询之前。以便它以 utf8 格式检索。

# perl - 我可以将 if、elsif 和 else 放入一组衬里吗？

> ID：12211653
> 
> 赞同：1
> 
> 时间：2012-08-31T08:34:11.093
> 
> 标签：perl, if-statement

（使用 Perl）我有一组语句：

```
if(@good_car) {
   $goodC = 1;
}
elsif (@notbad_car) {
   $okayC = 1;
}
else {
   $badC = 1;
} 
```

我想知道我是否可以做类似的事情：

```
$goodC = 1 if (@good_car),
elsif (@notbad_car) $okayC = 1 else $badC = 1; 
```

我无法想象这真的会因为 elsif 而工作，但是将它缩短一点会很好:) 任何提示都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:36:18.167

```
@good_car ? ($goodC = 1) : @notbad_car ? ($okay = 1) : ($bad = 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:51:18.247

没有`else`适用于`if`.

我只想改变缩进：

```
if    (@good_car)   { $goodC = 1 }
elsif (@notbad_car) { $okayC = 1 }
else                { $badC  = 1 } 
```

# python - 如何使用 pika 通过 rabbitmq 发送文件？

> ID：12211659
> 
> 赞同：2
> 
> 时间：2012-08-31T08:34:23.003
> 
> 标签：python, rabbitmq, sendfile, pika

我浏览了有关[rabbitmq](http://www.rabbitmq.com/getstarted.html)的教程，发现它很有用。

但我找不到说明如何使用 pika 通过 rabbitmq 发送文件的文档。

代码示例是首选，pika 以外的其他库也可以接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-07T18:51:37.020

我已经通过使用 base64encode 完成了这项工作。

我构建了一个 json 对象 - 示例：

```
data = {
filname = 'myfile.txt',
b64 = 'the base64 representation of the file'
} 
```

然后，在消费者端

base64解码 :)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-24T19:11:22.450

您可以将文件名作为消息发送，在消费者方面，您可以设置无密码 scp 以从托管文件的远程计算机获取文件。

# jquery - 从 jQuery 重置默认 CSS

> ID：12211662
> 
> 赞同：1
> 
> 时间：2012-08-31T08:34:30.920
> 
> 标签：jquery, css, revert

我正在使用网格布局（Bootstrapper）在行中显示一定宽度的图像。

```
<li class="span4"><div id="id" class="thumbnail"><img src="**path**"><img></div></li>
<li class="span12"><div id="id-2" class="thumbnail"><img src="**path**"><img></div></li>
<li class="span3"><div id="id-3" class="thumbnail"><img src="**path**"><img></div></li> 
```

当用户单击图像时，我希望能够使图像的宽度跨越所有列（class =“span12”），并在用户单击时将图像恢复为图像的“硬编码”类再次图像。

```
if (current_span != 'span12') // If image is not already spanning all columns ("span12")
{
$(this).attr('class','span12'); // Add class to span all columns
} 
```

使用上面的 JS，单击后图像以正确的宽度显示。

但是，在第二次单击时，我想恢复到“硬编码”类，因为并非所有图像都具有相同的类（即，一些属于“span3”，其他属于“span4”，其他属于“span12” .

有没有办法在第二次点击时从 HTML 恢复到“硬编码”类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:40:19.330

CSS 类将级联，因此队列中的最后一个将覆盖任何前面的。您应该能够使用 jQuery 简单地打开/关闭“span12”类：

```
$(this).toggleClass('span12'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T09:09:14.947

你需要为此上课吗？如果上一个答案不起作用，您可以尝试

```
$(this).css('column-span','all'); 
```

如果您没有语言环境样式属性，则将其删除

```
$(this).removeAttr( 'style' ); 
```

或其他

```
$(this).css('column-span',''); 
```

# php - 如何在所有字段中搜索每个单词 - Doctrine2

> ID：12211663
> 
> 赞同：0
> 
> 时间：2012-08-31T08:34:32.520
> 
> 标签：php, doctrine-orm

我有一张表`Friends`，它的字段是姓名、电话、地址、Skype、生日和便笺。还有一个搜索文件。如何搜索所有领域？这种东西对搜索词`"Ana"`有用吗？有更好的方法吗？

```
$qb->select('f')
   ->from('Friends', 'f')
   ->where('f.name = :name')
   ->orWhere('f.phone = :phone')->orWhere('f.address = :address')-> ... 
   ->setParameters( array(
     'name' => 'Ana',
     'phone' => 'Ana', ...  )); 
```

而且我还想问如何搜索每个单词（比如全文搜索）？我的意思是，如果用户写“Ana Ivan peter@domain.com”来接收所有在他们的字段中（无论在哪个字段中）Ana、Ivan 和 peter@domain.com 的行。

例如，如果 Ana 和 Ivan 是其中两个朋友的姓名，但朋友 John 的备注显示“Ivan 的朋友”，而 Peter 是电子邮件 peter@domain.com 的朋友的姓名，则用户应该收到四行 - Ana、Ivan、John 和 Peter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:33:43.320

我不确定这一点，但我认为这可能有效

```
$search_string = '%".$_POST['search']."%';
$qb-> "select 'f' from 'Friends' where f.name LIKE ':search_string' or f.phone  LIKE ':search_string' or ..."; 
```

# php - PHP File_put_contents 不工作

> ID：12211677
> 
> 赞同：0
> 
> 时间：2012-08-31T08:35:16.933
> 
> 标签：php, file-permissions, directory-permissions

检查此代码：

```
<?php

$url = 'http://www.example.com/downloads/count.txt';

$hit_count = @file_get_contents($url);
$hit_count++;
@file_put_contents($url, $hit_count);

header('Location: wmwc.zip');

?> 
```

`@file_get_contents`工作正常，对下载文件的标题位置更改也有效，但是 hit_count 增加或`@file_put_contents`不起作用，因为文件的数字不增加 1。我已将文件权限设置为 777，但是当我尝试将目录权限设置为 777 我也收到 500 内部服务器错误，说“服务器遇到了意外情况，导致它无法满足请求。”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T08:39:00.613

**您不能通过 http 编写远程文件**。（如果您可以这样做，其他人也可以更改该文件。）

您需要使用本地路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T13:56:45.953

尝试更改目录属性

```
chown www-data:www-data <dirname> 
```

和/或编写如下，如果您在 linux 上托管

```
<?php
$var ="hi";
shell_exec('echo "'.$var.'">>log.txt');
?> 
```

# c# - .AsNoTracking() 有什么区别？

> ID：12211680
> 
> 赞同：281
> 
> 时间：2012-08-31T08:35:23.187
> 
> 标签：c#, .net, entity-framework, entity-framework-4.3

我有一个关于`.AsNoTracking()`扩展的问题，因为这一切都很新而且很混乱。

我正在为网站使用每个请求的上下文。

我的很多实体都没有改变，所以不需要跟踪，但我有以下情况，我不确定数据库的内容，甚至在这种情况下是否会有所作为。

这个例子是我目前正在做的：

```
context.Set<User>().AsNoTracking()
// Step 1) Get user
context.Set<User>()
// Step 2) Update user 
```

这与上面相同，但从`.AsNoTracking()`步骤 1 中删除：

```
context.Set<User>();
// Step 1) Get user
context.Set<User>()
// Step 2) Update user 
```

步骤 1 和 2 使用相同的上下文，但发生在不同的时间。我无法解决的是是否有任何区别。由于第 2 步是一个更新，我猜无论如何都会两次访问数据库。

谁能告诉我有什么区别？

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-08-31T08:39:20.647

不同之处在于，在第一种情况下，上下文不会跟踪检索到的用户，因此当您要将用户保存回数据库时，您必须附加它并正确设置用户状态，以便 EF 知道它应该更新现有用户而不是插入一个新的。在第二种情况下，如果您使用相同的上下文实例加载和保存用户，则不需要这样做，因为跟踪机制会为您处理。

* * *

## 回答 #2

> 赞同：205
> 
> 时间：2014-04-02T09:26:15.073

看到这个页面[实体框架和 AsNoTracking](https://blog.staticvoid.co.nz/2012/entity_framework_and_asnotracking/)

### AsNoTracking 做什么

Entity Framework 公开了许多性能调整选项来帮助您优化应用程序的性能。这些调整选项之一是`.AsNoTracking()`. 这种优化允许您告诉`Entity Framework`不要跟踪查询的结果。这意味着`Entity Framework`不对查询返回的实体执行额外的处理或存储。但是，这也意味着如果不将这些实体重新附加到跟踪图，就无法更新它们。

**使用 AsNoTracking 可以获得显着的性能提升**

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2016-06-13T13:06:13.953

**不跟踪 LINQ to Entities 查询**

当您的查询用于读取操作时，建议使用 AsNoTracking()。在这些情况下，您会取回实体，但它们不会被您的上下文跟踪。这确保了最小的内存使用和最佳性能

> **优点**
> 
> 1.  提高了常规 LINQ 查询的性能。
> 2.  完全物化的对象。
> 3.  使用编程语言内置的语法编写最简单。
> 
> **缺点**
> 
> 1.  不适合 CUD 操作。
> 2.  某些技术限制，例如： 将 DefaultIfEmpty 用于 OUTER JOIN 查询的模式会导致比 Entity SQL 中的简单 OUTER JOIN 语句更复杂的查询。
> 3.  您仍然不能将 LIKE 与一般模式匹配一​​起使用。

此处提供更多信息：

[实体框架的性能注意事项](https://msdn.microsoft.com/en-us/data/hh949853.aspx)

[实体框架和 NoTracking](http://blog.staticvoid.co.nz/2012/4/2/entity_framework_and_asnotracking)

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2013-12-07T02:03:01.257

禁用跟踪还会导致您的结果集流式传输到内存中。当您处理大量数据并且不需要一次性使用整个数据集时，这会更有效。

参考：

*   [使用 Entity Framework 和 LINQ 查询大型数据集时如何避免内存溢出](https://stackoverflow.com/questions/5927487/how-to-avoid-memory-overflow-when-querying-large-datasets-with-entity-framework/5927563#5927563)
*   [实体框架大数据集，内存不足异常](https://stackoverflow.com/questions/18169859/entity-framework-large-data-set-out-of-memory-exception/18169894#18169894)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2018-02-06T23:09:44.957

AsNoTracking() 允许绕过 EF 中的“每条记录唯一密钥”要求（其他答案未明确提及）。

这在读取不支持唯一键的视图时非常有用，因为可能某些字段可以为空，或者视图的性质在逻辑上不可索引。

对于这些情况，“key”可以设置为任何不可为空的列，但是 AsNoTracking() 必须与每个查询一起使用，否则将跳过记录（按键重复）。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-07-04T14:50:29.560

如果您有其他更改数据库的内容（例如另一个进程）并且需要确保您看到这些更改，请使用`AsNoTracking()`，否则 EF 可能会为您提供您的上下文所拥有的最后一个副本，因此通常在每个查询中使用一个新的上下文是很好的：

[http://codethug.com/2016/02/19/Entity-Framework-Cache-Busting/](http://codethug.com/2016/02/19/Entity-Framework-Cache-Busting/)

# session - 如何导出 Plone 会话配置？

> ID：12211682
> 
> 赞同：5
> 
> 时间：2012-08-31T08:35:22.780
> 
> 标签：session, cookies, plone, zope

我想将我的 Plone 会话配置导出到我的门户产品。

会话配置通过 ZMI -> acl-users -> session -> properties 设置

我已尝试创建站点的快照，但无法在快照 xml 中找到会话配置...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:29:53.190

实际上，没有 GenericSetup 配置支持包含在`plone.session`; 目前没有任何东西可以为您导出它，也没有任何东西可以导入设置。

您必须为它编写一个设置步骤，并通过它手动配置会话插件。

`configure.zcml`在配置文件中添加导入步骤：

```
<?xml version="1.0"?>
<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"

<genericsetup:importStep
    name="yourpackage.a_unique_id_for_your_step"
    title="Configures the plone.session plugin"
    description="Perhaps an optional description"
    handler="your.package.setuphandlers.setupPloneSession"
    />

</configure> 
```

并将一个空的“哨兵”文本文件添加到名为的同一配置文件目录中`youpackage.setup-plonesession.txt`

然后在你的包中添加一个`setuphandlers.py`模块（`handler`在上面的例子中指向什么）：

```
def setupPloneSession(context):
    if context.readDataFile('youpackage.setup-plonesession.txt') is None:
        return

    portal = context.getSite()
    plugin = portal.acl_users.session

    # Configure the plugin manually
    plugin.path = '/'
    plugin.cookie_name = '__ac'
    plugin.cookie_domain = ''

    # Set up a shared auth_tkt secret
    plugin._shared_secret = 'YourSharedSecretKey'
    plugin.mod_auth_tkt = True 
```

请注意，我们首先测试哨兵文件是否存在；如果您在其他地方重复使用您的包设置，如果您不这样做，设置步骤可能会运行多次。

恐怕你需要参考[插件源来了解你可以配置什么。](https://github.com/plone/plone.session/blob/master/plone/session/plugins/session.py)

# facebook-javascript-sdk - FB.ui() with method: "feed" 坏了

> ID：12211690
> 
> 赞同：1
> 
> 时间：2012-08-31T08:36:02.533
> 
> 标签：facebook-javascript-sdk, feed, fb.ui

似乎使用 FB JavaScript SDK 的 FB.ui() 中的方法：'feed' 已损坏。考虑以下示例：

*   让应用程序在 FB 页面和 Canvas-App 上作为页面选项卡运行
*   应用部分中的所有必填字段均已正确填写
*   使用带有 method: 'feed' 的 FB.ui() 让用户告诉别人它
*   方法的链接属性：'feed' 设置 Canvas-URL 并用于测试应用程序的页面选项卡 URL
*   直到几天前，一切都为我们工作（不记得确切的日期）
*   反复调试，找不到错误

我们总是收到以下错误，**现在即使是以前可以运行的应用程序**：

“xxx 发生错误。请稍后再试
。API 错误代码：191
API 错误描述：指定的 URL 不属于应用程序
错误消息：redirect_uri 不属于应用程序。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:37:39.323

至少你收到一条错误消息。我有相同的但以下内容：“xxx发生错误。请稍后再试。” 没有错误代码什么的。

您是否更改了应用配置上的某些内容？您的错误代码可能意味着：

*   错误的redirect_uri（mb你没有相同的appId或其他东西）
*   您刚刚更改了您的应用程序域名，并且您的重定向 uri 不在同一个域中

尝试使用 redirect_uri 访问您的应用，如果出现错误，您需要修复重定向。

祝你好运 ！

# c# - C# Reportviewer 货币

> ID：12211695
> 
> 赞同：0
> 
> 时间：2012-08-31T08:36:18.697
> 
> 标签：c#, reportviewer, currency

我有一个运行发票的 C# 报表查看器，我的问题是金额显示 $ 而不是 rand。

我如何更改它以显示南非兰特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:43:56.933

在报表设计器的输出格式属性中查看特定文本框。如果没有，您可以使用带有南非兰特符号的附加标签并将其放在您的货币旁边，然后将金额设置为没有符号的正常数字:)

希望这可以帮助！

# iphone - UIImagePickerViewController 没有响应 sourceType

> ID：12211696
> 
> 赞同：0
> 
> 时间：2012-08-31T08:36:21.027
> 
> 标签：iphone, objective-c, uiimagepickercontroller

我正在使用的代码允许应用程序只运行一次相机或照片库。我已经使用不同的索引在 actionSheet 上实现了这两个操作。使用相机或照片库挑选图像，但只是第一次。第二次如果用户尝试使用这些操作中的任何一个......应用程序在这个特定点崩溃： -

```
self.imagePickerController.sourceType = sourceType; 
```

可能是什么原因？包含此代码的方法如下： -

```
- (void)setupImagePicker:(UIImagePickerControllerSourceType)sourceType {
    self.imagePickerController.sourceType = sourceType;
    if (sourceType == UIImagePickerControllerSourceTypeCamera)
    {
        // user wants to use the camera interface
        self.imagePickerController.showsCameraControls = NO;
        if ([[self.imagePickerController.cameraOverlayView subviews] count] == 0)
        {
            // setup our custom overlay view for the camera
            // ensure that our custom view's frame fits within the parent frame

            CGRect overlayViewFrame = self.imagePickerController.cameraOverlayView.frame;
            CGRect newFrame = CGRectMake(0.0,
                                         CGRectGetHeight(overlayViewFrame) -
                                         self.view.frame.size.height - 10.0,
                                         CGRectGetWidth(overlayViewFrame),
                                         self.view.frame.size.height + 10.0);
            self.view.frame = newFrame;
            [self.imagePickerController.cameraOverlayView addSubview:self.view];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:48:47.330

`sourceType`您发送到设置方法的变量在第二轮中以​​某种方式损坏。

在您的程序逻辑中，确保您`setupImagePicker`使用正确的参数进行调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:53:14.037

看看这段代码

```
-(IBAction)TakePicture:(id)sender{

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]){
            self.picker.sourceType = UIImagePickerControllerSourceTypeCamera;
        if([UIImagePickerController isCameraDeviceAvailable: UIImagePickerControllerCameraDeviceFront ]){  
            self.picker.cameraDevice = UIImagePickerControllerCameraDeviceFront   ;
        }
    } else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message" message:@"Camera is not available for this Device" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
            self.takephoto.selected = NO;
        return;
    }

    self.picker.showsCameraControls = NO;
    self.picker.navigationBarHidden = YES;
    self.picker.toolbarHidden = YES;
    self.picker.wantsFullScreenLayout = YES;
    self.picker.allowsEditing=YES;

    // Insert the overlay
    if (!self.overlay) {
        self.overlay = [[OverlayViewController alloc] initWithNibName:@"OverlayViewController" bundle:nil];
    }
    self.overlay.pickerReference = self.picker;
    self.picker.cameraOverlayView = self.overlay.view;
    self.picker.delegate = self;

    [self presentModalViewController: self.picker animated:NO];

//    [[UIApplication sharedApplication] endIgnoringInteractionEvents];

} 
```

# python - setup.py、makefile... 我需要什么？

> ID：12211702
> 
> 赞同：6
> 
> 时间：2012-08-31T08:36:47.040
> 
> 标签：python, makefile, installation, setup.py

这几天看了很多书，具体的用途我也不是很清楚。我需要问它，因为找不到向我解释它的人。现在我迷路了。。

主要问题是我需要在“/usr/share/name_app”中安装我的应用程序（python + glade），并在 Ubuntu 中的“/usr/share/applications”中安装“.desktop”文件。

我找到的解决方案是创建一个“.deb”文件，因为安装非常完美。在 ubuntu 中，我可以通过 Unity 单击启动器“.desktop”来启动它。（可能我会把它上传到“Ubuntu软件中心”）。

对于 Windows，我可以使用“py2exe”或类似的，而另一个用于 Mac。

但是，就像 GitHub 中的代码一样，它应该有一个“设置”或一个“makefile”来安装它。

在阅读和阅读（和阅读）之后，我认为“setup.py”只是为了安装一个模块，然后用python导入它。但是，如果我必须安装和应用程序，我该如何分发它以制作“setup.py”或“makefile”？哪个更适合安装应用程序？有什么区别？我必须使用什么？

谢谢：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T18:23:16.483

setup.py 用于使用 virtualenv 部署 Python 应用程序和模块[http://www.virtualenv.org/en/latest/index.html](http://www.virtualenv.org/en/latest/index.html) setup.py 对应用程序开发人员最有用 - 你可以运行

```
 python setup.py develop 
```

在 virtualenv 中使用 Python 依赖项设置您的开发工作区。

对于每个平台分发（Windows、OSX、Linux），请使用您当前使用的分发工具。

您还可以使用 setuptools 工具从 setup.py 推出适用于平台架构的软件包。例如。从 setup.py 创建 .deb

[http://pypi.python.org/pypi/stdeb/](http://pypi.python.org/pypi/stdeb/)

有关 setup.py 的更多信息

[http://packages.python.org/distribute/setuptools.html](http://packages.python.org/distribute/setuptools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:22:34.893

要掌握一般概念，您可以阅读 stdlib 文档：[Distutils 简介](http://docs.python.org/distutils/introduction.html)。

关键字的前几个链接：“python 打包”是指向：[Python 打包用户指南](https://packaging.python.org/)，该指南应该显示它是什么`setup.py`以及如何使用它。

# objective-c - Objective-C CFMutableBitVector 到整数

> ID：12211704
> 
> 赞同：0
> 
> 时间：2012-08-31T08:36:50.707
> 
> 标签：objective-c, bitmap, type-conversion

假设我有一个由 CFMutableBitVector 表示的图像。这意味着每一个 0 位代表一个关闭像素，每一个 1 位代表一个开启像素。

有没有一种方法可以轻松快速地将这个 CFMutableBitVector 转换为一个低级整数数组，其中一个位表示一个全位整数，一个位表示一个全位整数？

CFMutableBitVector`[0,0,0,1,1,0,1,0];`

将转化为：

```
int[8] =
[
    00000000000000000000000000000000,
    00000000000000000000000000000000,
    00000000000000000000000000000000,
    11111111111111111111111111111111,
    11111111111111111111111111111111,
    00000000000000000000000000000000,
    11111111111111111111111111111111,
    00000000000000000000000000000000,
]; 
```

现在，这是来自视频流的图像，这必须很快发生——在 Objective-C 中进行这种转换的最快方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:56:41.550

这是示例转换...

```
 u_int32_t sample = UINT32_MAX;
  CFBitVectorRef bv = CFBitVectorCreate( NULL, ( const u_int8_t * )&sample, sizeof( u_int32_t ) * 8 );

  CFIndex bitCount = CFBitVectorGetCount( bv );
  u_int32_t *a = malloc( bitCount * sizeof( u_int32_t ) );
  for ( CFIndex i = 0 ; i < bitCount ; i++ ) {
    a[i] = CFBitVectorGetBitAtIndex( bv, i ) * UINT32_MAX;
  }

  for ( int i = 0 ; i < bitCount ; i++ ) {
    NSLog( @"Index: %d Number: %u", i, a[i] );
  }
  free( a ); 
```

# android - 从通知启动应用程序将其从最近的应用程序历史记录中删除

> ID：12211707
> 
> 赞同：17
> 
> 时间：2012-08-31T08:36:54.840
> 
> 标签：android, android-intent, android-notifications

当我从通知启动时，我的一个应用程序出现问题。它永远不会出现在“最近的应用程序”列表中。

没有通知，一切都按预期工作：我启动应用程序，导航到当我退出它（使用主页按钮或返回按钮）之后，我可以通过长按主页按钮返回它=> ok。

当我收到通知时，问题就开始了。如果我从通知启动应用程序，它会启动正确的屏幕，我可以使用应用程序 => 好的。但是当我退出应用程序（使用主页或返回按钮）时，它不再出现在“最近的应用程序”列表中。更确切地说：

*   如果在从通知中启动应用程序之前，该应用程序存在于“最近的应用程序”列表中，则会将其删除
*   如果应用程序不在“最近的应用程序”列表中，则不会添加它

下面，我在状态栏中添加通知的原始代码：

```
mNotification = new Notification(R.drawable.ic_notif, message, System.currentTimeMillis());
mNotification.flags |= Notification.FLAG_AUTO_CANCEL;

Intent notificationIntent = new Intent(Intent.ACTION_VIEW,Uri.parse(link));
notificationIntent.putExtra(...);

PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
mNotification.setLatestEventInfo(context, context.getString(R.string.app_name), message, contentIntent);
notificationManager.notify(ConfigApp.NOTIFICATION_ID, mNotification); 
```

我尝试添加一个[FLAG_ACTIVITY_NEW_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)但它没有帮助：

```
Intent notificationIntent = new Intent(Intent.ACTION_VIEW,Uri.parse(link));
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
notificationIntent.putExtra(...); 
```

由通知启动的 Activity 的清单声明：

```
<activity
    android:name=".activity.ActivityMessages"
    android:label=""
    android:windowSoftInputMode="stateHidden">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data
            android:host="hostapp"
            android:pathPrefix="/prefixapp"
            android:scheme="schemeapp" />
    </intent-filter>
</activity> 
```

有谁知道如何在启动通知后将应用程序保留在“最近的应用程序”列表中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T19:05:34.850

将动作`android.intent.action.MAIN`和类别添加`android.intent.category.LAUNCHER`到您的活动规范中。拥有两个动作和类别看起来像是一个 hack，但它[实际上是由 Android 支持的](http://developer.android.com/guide/components/intents-filters.html#ifs)。

```
<activity
    android:name=".activity.ActivityMessages"
    android:label=""
    android:windowSoftInputMode="stateHidden">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        <data
            android:host="hostapp"
            android:pathPrefix="/prefixapp"
            android:scheme="schemeapp" />
    </intent-filter>
</activity> 
```

这应该将其添加到最近的应用程序列表中。原因在[Android 开发者文档](http://developer.android.com/guide/components/tasks-and-back-stack.html#Starting)中有描述：

> 这种意图过滤器会导致 Activity 的图标和标签显示在应用程序启动器中，**为用户提供一种启动 Activity 并在启动后随时返回到**它创建的任务的方法。
> 
> 第二个能力很重要：用户必须能够离开任务，然后稍后使用此活动启动器返回任务。**出于这个原因，只有当 Activity 具有 ACTION_MAIN 和 CATEGORY_LAUNCHER 过滤器时，才应该使用将活动标记为始终启动任务的两种启动模式“singleTask”和“singleInstance”。** 想象一下，例如，如果会发生什么情况缺少过滤器：意图启动“singleTask”活动，启动新任务，用户在该任务上花费一些时间。然后用户按下主页按钮。任务现在被发送到后台并且不可见. 现在用户没有办法返回任务，因为它没有在应用程序启动器中表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T18:47:11.307

我遇到了同样的问题。问题是我的活动有**android:label=""**。当我从通知中打开活动时，它将应用程序任务中的根活动替换为当前活动。Android 会从“最近”中排除带有空标签的活动（参见[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.4.4_r1/com/android/systemui/recent/RecentTasksLoader.java#172)）。

要隐藏活动标题，您应该使用：

```
getActionBar().setDisplayShowTitleEnabled(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:45:22.120

尝试将以下内容添加到清单中：

```
android:excludeFromRecents = "false" 
```

祝你好运，路易斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T20:38:50.803

您需要`Intent Filters`为每个操作/类别对使用单独的：

```
<activity
    android:name=".activity.ActivityMessages"
    android:label=""
    android:windowSoftInputMode="stateHidden">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data
            android:host="hostapp"
            android:pathPrefix="/prefixapp"
            android:scheme="schemeapp" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        <data
            android:host="hostapp"
            android:pathPrefix="/prefixapp"
            android:scheme="schemeapp" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-25T12:17:30.127

老话题，但我发现了解决方案（我在网上找不到任何人），也许它会对某人有所帮助。它不能将任何活动设置为父级，但我认为（不确定）如果有必要，您可以通过编程方式（在 OpenFromNotificationActivity 中）更改它。

在清单中

```
<activity android:name=".OpenFromNotificationActivity" 
            android:label="@string/label">
            <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value=".StartSplashActivity" />
 </activity>

 <activity android:name=".StartSplashActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
 </activity> 
```

# javascript - jQueryCheckboxes 被锁定为选中状态

> ID：12211709
> 
> 赞同：0
> 
> 时间：2012-08-31T08:36:57.277
> 
> 标签：javascript, ajax, jquery

我在不同的选项卡中有两个表单，每个交叉字段的值都复制到另一个表单 onchange/keyup。

当我的复选框更改时，背景图像也会更改以突出显示选择，由于某种原因，我无法弄清楚为什么，但是当复选框被打开时，它们不会再次关闭。

jsfiddle 链接 > [http://jsfiddle.net/UMwkV/](http://jsfiddle.net/UMwkV/)

html

```
<fieldset class="fieldset-form left">                             
        <label>Flammable</label>
        <div class="clear"></div>
        <div class="flammable"></div>

        <input type="checkbox" id="flammable" class="flamcheck" name="flammable" value="1" style="width:12px; height:12px; margin:0 auto; display:block; margin-top:5;">
        </fieldset>

    <fieldset class="fieldset-form left">                             
        <label>Flammable</label>
        <div class="clear"></div>
        <div class="flammable"></div>

        <input type="checkbox" id="flammable" class="flamcheck" name="flammable" value="1" style="width:12px; height:12px; margin:0 auto; display:block; margin-top:5;">
        </fieldset> 
```

jQuery

```
$("input[name=flammable]").change(function() {
    if ($('.flamcheck').is(":checked")) {
        $('.flammable').css("backgroundColor", "url(images/flame-on.png)");
        $('.flamcheck').prop("checked", true);
    }
    if (!$('.flamcheck').is(":checked")) {
        $('.flammable').css("backgroundImage", "url(images/flammable.png)");
        $('.flamcheck').prop("checked", false);
    }

})​ 
```

如果有人能指出我遗漏的显而易见的事情，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:59:09.223

采用

```
$(this).is(":checked") 
```

反而

[http://jsfiddle.net/UMwkV/6/](http://jsfiddle.net/UMwkV/6/)

当至少一个元素与选择器匹配时，$.is() 返回 true。一旦两个框都被选中，当您再次单击一个框时，另一个复选框仍将被选中，因此当您在两个复选框上运行时，is() 将始终返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:39:21.100

~~AFAIK`.is(':checked')`在 DOM 上运行，因为它是通过网络渲染的，而不是当前的实时 DOM。~~

所以解决方案是`.prop('checked')`改用

[http://jsfiddle.net/UMwkV/1/](http://jsfiddle.net/UMwkV/1/)

版本 2 允许独立检查：

[http://jsfiddle.net/UMwkV/2/](http://jsfiddle.net/UMwkV/2/)

版本 3 导致相互更新，并且两个复选框都是可点击的：

[http://jsfiddle.net/UMwkV/8/](http://jsfiddle.net/UMwkV/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:12:20.223

我发现了这个问题。这段代码可以正常工作

```
$(".flamcheck").change(function() {
  if ($(this).prop("checked") == true ) {
   $('.flammable').css("backgroundColor", "url(images/flame-on.png)");
   $('.flamcheck').prop("checked", true);
  }
  if ($(this).prop("checked") == false) {
   $('.flammable').css("backgroundImage", "url(images/flammable.png)");
   $('.flamcheck').prop("checked", false);
  }

}); 
```

检查这个 - [http://jsfiddle.net/UMwkV/10/](http://jsfiddle.net/UMwkV/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:22:26.410

检查这个工作[**演示**](http://jsfiddle.net/UMwkV/11/)

你的代码有语法错误我已经纠正了请检查小提琴

# matlab - 如何在 Matlab 中使用 Unix 时间戳？

> ID：12211710
> 
> 赞同：17
> 
> 时间：2012-08-31T08:37:01.817
> 
> 标签：matlab, unix-timestamp

我有一些带有 Unix 时间戳的数据文件（在这种情况下，自 1970 年 1 月 1 日 00:00 UTC 以来的毫秒数）。我想在 Matlab 中将这些转换为人类友好的日期/时间字符串（例如 31-Aug-2012 11:36:24）。在 Matlab 中是否有一种简单的方法可以做到这一点，或者我最好使用外部库（例如 java.text.SimpleDateFormat）？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-31T08:43:35.257

怎么样

```
date = datestr(unix_time/86400 + datenum(1970,1,1)) 
```

如果`unix_time`以秒为单位给出，`unix_time/86400`将给出自 1970 年 1 月 1 日以来的天数。再加上 Matlab `datenum`( `datenum(0000,1,1) == 1`) 使用的偏移量，您就有自 0000 年 1 月 1 日以来的天数。这可以很容易地转换为人类- Matlab 的可读形式`datestr`。

如果你有毫秒，只需使用

```
date = datestr(unix_time/86400/1000 + datenum(1970,1,1)) 
```

包裹在函数中，这些将是

```
function dn = unixtime_to_datenum( unix_time )
    dn = unix_time/86400 + 719529;         %# == datenum(1970,1,1)
end

function dn = unixtime_in_ms_to_datenum( unix_time_ms )
    dn = unix_time_ms/86400000 + 719529;   %# == datenum(1970,1,1)
end

datestr( unixtime_to_datenum( unix_time ) ) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-08-05T16:18:18.367

较新版本的 MATLAB（在 R2015a 中验证）具有 datetime 类型，可用于处理和格式化日期和时间。您可以将 UNIX 时间戳转换为 MATLAB 日期时间

```
dt = datetime( unix_time, 'ConvertFrom', 'posixtime' ); 
```

然后像以前一样使用 datestr 格式化为字符串

```
datestr( dt ) 
```

# android - 在 Android 4.0+ 上显示光标而不使用真正的鼠标

> ID：12211711
> 
> 赞同：2
> 
> 时间：2012-08-31T08:37:02.737
> 
> 标签：android, cursor, mouse-cursor

连接鼠标后，Android TV 上会出现鼠标光标。如何在不使用真实鼠标的情况下让光标显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T21:17:39.943

由于您提到了 Android 4.0+，您可能指的是系统本机光标。我不知道如何在不使用外部鼠标的情况下触发它，但是你可以做的是绘制一个覆盖光标。覆盖是一种特殊的窗口，可以使其显示在所有其他窗口之上。通过这样做，并添加一个简单的鼠标光标图像，您将获得......鼠标光标而不使用真正的鼠标。如果这是您需要的，并且必须实现代码来执行此操作，请记住以下几点：

实施的重要步骤是：

1.  在您的 AndroidManifest.xml 中，指定 SYSTEM_ALERT_WINDOW 权限
2.  准备窗口覆盖参数为：

    WindowManager.LayoutParams 参数 = 新 WindowManager.LayoutParams（WindowManager.LayoutParams.WRAP_CONTENT，WindowManager.LayoutParams.WRAP_CONTENT，WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY，WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE | WindowManager.LayoutParams.INPixel.TRANSELUCENT）SCR_FLAG_LAYOUT_ ;

这将使您的光标看起来像：![在此处输入图像描述](../Images/58153960d5205a9c241de65035fd4c11.png)

希望这可以帮助。您还可以在以下位置找到完整的示例实现：[http ://www.pocketmagic.net/2012/07/android-overlay-cursor/](http://www.pocketmagic.net/2012/07/android-overlay-cursor/)

# cocoa - 更改保存 (saveDocument:) 菜单文本

> ID：12211715
> 
> 赞同：1
> 
> 时间：2012-08-31T08:37:15.100
> 
> 标签：cocoa, osx-lion, osx-mountain-lion, nsdocument, nsmenuitem

在我们基于 Cocoa NSDocument 的应用程序中，我们在上下文菜单上有一个 Save (saveDocument:) 按钮，但我们希望菜单项的文本根据 NSDocument 的情况而改变，就像主菜单 Save (saveDocument:) 菜单项更改。有谁知道更新此菜单项文本的干净解决方案，理想情况下调用主菜单使用的相同 Cocoa 功能？

**细节：**

基于 Cocoa NSDocument 的应用程序的主菜单通常有一个 Save 菜单项，它会触发 First Responder - saveDocument:。此菜单项的标题会根据文档的情况而变化，例如：

*   在 Lion (OS X 10.7) 中，菜单项文本以“保存”开始，但变为“保存版本”（例如，在保存文档之后）。
*   在 Mountain Lion (OS X 10.8) 中，菜单项文本以“保存...”开始，但因为“保存”（例如，在文档保存后）。

在我们的应用程序中，我们显示了一个带有保存菜单项的上下文菜单，因此我们希望文本以与主菜单中相同的方式更改（如上所列）。我们不想编写包含复杂逻辑的代码（检查 NSDocument...检查 OSX 版本并相应地显示一个字符串），我们真的希望能够调用 Cocoa 主菜单使用的相同代码更改菜单项标题。

# c# - 如何使用 ADO.NET 将 SQLite 内存数据库转储到文件中？

> ID：12211717
> 
> 赞同：7
> 
> 时间：2012-08-31T08:37:25.387
> 
> 标签：c#, sqlite, system.data.sqlite

我正在使用`System.Data.SQLite.dll`SQLite 内存数据库。程序完成后，我想将内存数据库转储到 .db3 文件中以备下次使用。如何在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T09:19:27.720

据我所知，System.Data.SQLite.dll 中没有内置功能来完成此操作。然而，该功能确实存在于与 SQLite 核心一起维护的 sqlite3.exe 客户端中。

这就是我使用 system.data.sqlite.dll 的方式：

1.  获取 SQL 语句以创建新的数据库结构。

    ```
    select sql from sqlite_master where name not like 'sqlite_%'; 
    ```

2.  获取所有用户表的名称。

    ```
    select name 
    from sqlite_master 
    where type='table' and name not like 'sqlite_%'; 
    ```

3.  在一些新的 SQLiteConnection 中创建磁盘数据库。

4.  执行之前获取的所有 SQL 语句，在磁盘数据库中创建数据库结构。

5.  关闭与磁盘数据库的单独连接。

6.  将磁盘数据库附加到内存数据库。

    ```
    attach 'ondisk.db3' as 'ondisk'; 
    ```

7.  对于之前获得的每个用户表，将内容从内存复制到磁盘数据库。

    ```
    insert into ondisk.TableX select * from main.TableX;
    insert into ondisk.TableY select * from main.TableY; 
    ```

# r - 如何在出现警告消息时打印它们

> ID：12211718
> 
> 赞同：10
> 
> 时间：2012-08-31T08:37:37.577
> 
> 标签：r, warnings

我有以下代码：

```
urls <- c(
    "xxxxx",
    "http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html",
    "http://en.wikipedia.org/wiki/Xz"        
)
readUrl <- function(url) {
out <- tryCatch(
    readLines(con=url, warn=FALSE),
    error=function(e) {
        message(paste("URL does not seem to exist:", url))
        message(e)
        return(NA)
    },
    finally=message(paste("Processed URL:", url))
)    
return(out)
}
y <- lapply(urls, readUrl) 
```

当我运行它时，我得到：

```
URL does not seem to exist: xxxxx  
cannot open the connectionProcessed URL: xxxxx    
Processed URL: http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html  
Processed URL: http://en.wikipedia.org/wiki/Xz  
Warning message:  
In file(con, "r") : cannot open file 'xxxxx': No such file or directory 
```

但我期望：

```
URL does not seem to exist: xxxxx   
cannot open the connectionProcessed URL: xxxxx    
Warning message:    
In file(con, "r") : cannot open file 'xxxxx': No such file or directory  
Processed URL: http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html  
Processed URL: http://en.wikipedia.org/wiki/Xz 
```

那么，为什么我会得到：

```
Warning message:    
In file(con, "r") : cannot open file 'xxxxx': No such file or directory 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T08:42:16.390

调用`readLines`发出警告。您可以使用 抑制警告`suppressWarnings()`。试试这个：

```
readUrl <- function(url) {
  out <- tryCatch(
    suppressWarnings(readLines(con=url, warn=FALSE)),
    error=function(e) {
      message(paste("URL does not seem to exist:", url))
      message(e)
      return(NA)
    },
    finally=message(paste("Processed URL:", url))
  )    
  return(out)
}
y <- lapply(urls, readUrl) 
```

画面输出：

```
URL does not seem to exist: xxxxx
cannot open the connectionProcessed URL: xxxxx
Processed URL: http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html
Processed URL: http://en.wikipedia.org/wiki/Xz 
```

* * *

或者，您可以使用`options(warn=1)`在警告发生时显示警告。试试这个：

```
readUrl <- function(url) {
  op <- options("warn")
  on.exit(options(op))
  options(warn=1)
  out <- tryCatch(
    readLines(con=url, warn=FALSE),
    error=function(e) {
      message(paste("URL does not seem to exist:", url))
      message(e)
      return(NA)
    },
    finally=message(paste("Processed URL:", url))
  )    
  return(out)
}
y <- lapply(urls, readUrl) 
```

输出：

```
Warning in file(con, "r") :
  cannot open file 'xxxxx': No such file or directory
URL does not seem to exist: xxxxx
cannot open the connectionProcessed URL: xxxxx
Processed URL: http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html
Processed URL: http://en.wikipedia.org/wiki/Xz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-06T06:40:36.307

要显示**所有**警告，只需运行以下命令：

```
options(warn=1) 
```

* * *

以下是它的工作原理：

*   设置`warn = -1`（或任何负整数），忽略所有警告
*   设置`warn = 0`（默认），显示 10 个或更少的警告
*   设置`warn = 1`（如上），显示所有警告
*   设置`warn = 2`（或任何大于 2 的正整数）以将所有警告转换为错误

* * *

通过运行可获得进一步的解释`?options`：

> 整数值设置警告消息的处理。如果警告为负，则忽略所有警告。如果 warn 为零（默认值），则存储警告，直到顶级函数返回。如果发出了 10 个或更少的警告，它们将被打印出来，否则会显示一条消息，说明发出了多少个警告。创建了一个名为 last.warning 的对象，并且可以通过函数警告打印。如果 warn 为 1，则在出现警告时打印警告。如果 warn 为 2（或更大，可强制转换为整数），则所有警告都将变为错误。

# java - 如何访问在java中使用它的唯一类的私有嵌套类对象

> ID：12211722
> 
> 赞同：0
> 
> 时间：2012-08-31T08:37:48.007
> 
> 标签：java

我有一个 Java 基类。在那个类中，我想创建一个私有类，并且我想在基类中访问该私有类的对象。我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:41:46.820

您可以通过创建内部类的对象并记住它的引用来访问它。就像任何其他类的实例一样。

```
public enum Outer {;
    private static class Nested {
        private Nested() { }
    }

    public static Object getNested() {
        return new Nested();
    }
}

public class Main {
    public static void main(String... args)  {
        System.out.println("I have an "+ Outer.newNested());
    }
} 
```

印刷

```
I have an Outer$Nested@3f0ef90c 
```

* * *

一个很好的例子来自 Arrays。这将创建一个私有嵌套类的实例，该实例实现了一个使其有用的公共接口。

```
public static <T> List<T> asList(T... a) {
return new ArrayList<T>(a);
}

/**
 * @serial include
 */
private static class ArrayList<E> extends AbstractList<E>
implements RandomAccess, java.io.Serializable
{ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:42:08.653

你是这个意思吗：

```
class Test {

    private Inner inner = new Inner();  

    private class Inner {
        public void foo() {}
    }

    // later somewhere
    public void bar() {
        inner.foo();
    }      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:40:59.363

```
PrivateClass c = new PrivateClass();
c.getSomeObject(); //?? 
```

您可以在基类中使用上述代码；前提是私有类是基类的内部类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:57:23.827

```
class Test {

    private class Inner {
        public void foo() {
            System.out.println("vsahdashdashd");
        }
    }

    // later somewhere
    public void bar() {
        new Inner().foo();
    }      
}
class javaapplication9 extends Test
{
      public static void main(String[] args) {
        Test inner = new Test();  
        inner.bar();
      }
you can access private member from this type. 
```

# php - 删除数组值

> ID：12211725
> 
> 赞同：0
> 
> 时间：2012-08-31T08:37:57.947
> 
> 标签：php, arrays

```
[0] => LR-153-TKW
[1] => Klaten
[2] => Rectangular
[3] => 12x135x97 
```

我有一个看起来像这样的数组。我想将 12x135x97 完全删除到母阵列，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:39:25.307

您可以使用`unset($arr[3]);`. 它将删除该数组索引。每当你想删除一个数组值时，你可以使用[PHP unset() 方法](http://php.net/manual/en/function.unset.php)。

正如你被问到你的评论： `basically i just want to remove all index that have "X**X" this pattern digit 'x' digit`

这是您可以使用的代码：

```
 $arr = array("LR-153-TKW", "Klaten", "Rectangular", "12x135x97", "xxxx");
    $pattern_matched_array = preg_grep("/^[0-9]+x[0-9]+x[0-9]*/", $arr);
    if(count($pattern_matched_array) > 0)
    {
        foreach($pattern_matched_array as $key => $value)
        {
            unset($arr[$key]);
        }
    }
    print_r($arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:41:06.493

PHP 有 unset() 函数。您可以使用它来删除变量或数组索引。

```
unset($your_var[3]); 
```

见[http://php.net/manual/en/function.unset.php](http://php.net/manual/en/function.unset.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:41:27.903

使用[unset](http://php.net/manual/en/function.unset.php)，找到它你可以这样做：

```
for($i = 0; $i < count($array); $i++){
    if($i == "12x135x97"){
        unset($array[i]);
        break;
    }
} 
```

除非您知道密钥，否则您可以执行以下操作：

```
unset($array[3]); 
```

如果您的阵列有数千个项目长，它不是最高效的，但对于这项工作就足够了。

把它变成一种方法，将有助于更好的编码。

```
function removeItem($item){
    for($i = 0; $i < count($array); $i++){
        if($i == $item){
            unset($array[i]);
            break;
        }
    }
    return $array;
} 
```

并称之为：

```
removeItem("12x135x97"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:42:46.990

你有很多选择：如果你知道数组键，那么你可以这样做

```
unset($arrayName[3]); 
```

或者如果它总是在你的数组的末尾

```
array_pop($arrayName); 
```

这将从数组中删除最后一个值

# ssas - 如何使用 MDX 获取不可见属性和用户定义的层次结构的名称？

> ID：12211730
> 
> 赞同：0
> 
> 时间：2012-08-31T08:38:20.480
> 
> 标签：ssas, mdx, ssas-2008

我有一个有一些尺寸的立方体。我有一个维度“产品”，其中隐藏了一些属性和用户定义的层次结构。我不知道隐藏了哪些属性。有没有办法编写 MDX 来获取不可见的属性和用户定义的层次结构？我可以通过其他方式得到这个名字。但我想知道如何使用 MDX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:28:56.250

[http://msdn.microsoft.com/en-us/library/ms145613.aspx](http://msdn.microsoft.com/en-us/library/ms145613.aspx)给出了一个显示成员属性的示例查询：

```
WITH MEMBER [Measures].[Product List Price] AS
[Product].[Product].CurrentMember.Properties("List Price")
SELECT 
   [Measures].[Product List Price] on COLUMNS,
   [Product].[Product].MEMBERS  ON Rows
FROM [Adventure Works] 
```

我现在无法自己测试它，但我假设您也可以编写`.Properties(0)`或`.Properties(1)`按索引引用属性，因为您不知道名称。我不确定是否有办法从结果单元集中发现属性名称，抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:39:41.093

我首先会为此调查 DMV，因为您真正关注的是元数据，而不是数据。

[http://dwbi1.wordpress.com/2010/01/01/ssas-dmv-dynamic-management-view/](http://dwbi1.wordpress.com/2010/01/01/ssas-dmv-dynamic-management-view/)

它们看起来像 SQL，但在 SQL Management Studio 的 MDX 窗口中运行，因此也将在 MSOLAP 连接中运行。

> `SELECT * FROM $system.mdschema_properties`

这看起来是查询、成员的完整列表和标识可见的列。

看看这对你有什么影响。

# bash - 从 cmd 行返回值获取的输入文件

> ID：12211731
> 
> 赞同：1
> 
> 时间：2012-08-31T08:38:26.250
> 
> 标签：bash, unix

我想对从命令返回的文件执行一个函数，例如：

```
less {ls ./my dir | tail -1} 
```

但是我做错了什么，但不能把我的手指放在它上面：

```
invalid suffix character in obsolescent option 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:40:15.143

使用 xargs：

```
ls ./my dir | tail -1 | xargs less 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:07:48.787

您使用了错误的分隔符集：

```
less "$( ls ./mydir | tail -1)" 
```

# lucene - 弹性搜索双面

> ID：12211732
> 
> 赞同：6
> 
> 时间：2012-08-31T08:38:28.443
> 
> 标签：lucene, elasticsearch

我想运行一个弹性搜索查询，它通过两个不同字段（纬度和经度）的组合对数据进行分组

```
curl -XGET http://www.my_server:9200/idx_occurrence/Occurrence/_search?pretty=true -d '{  
    "query": { 
        "query_string" : { 
            "fields" : ["genus_interpreted","dataset"], 
            "query": "Pica 2", 
            "default_operator" : "AND" 
         } 
    }, 
    "facets": { 
        "test": { 
            "terms": { 
                "fields" :["decimalLatitude","decimalLongitude"],
                "size" : 500000000 
            } 
        } 
    } 
}' 
```

它给出的结果是预期的两倍……有什么想法吗？

答案中更相关的部分是......

```
_shards":{
    "total":5,
    "successful":5,
    "failed":0
},
"hits":{
    "total":**37**,
    "max_score":3.9314494,
    "hits":[{ 
```

如果我不应用构面，则总命中数为 37 是查询的结果。这个总数是方面总数的一半（见下文）

```
"facets":{
    "test":{
        "_type":"terms",
        "missing":0,
        "total":**74**,
        "other":0,
        "terms":[
           {"term":"167.21665954589844","count":5},
           {"term":"167.25","count":4},
           {"term":"167.14999389648438","count":4},
           {"term":"167.1041717529297","count":4},
           {"term":"-21.04166603088379","count":4},..... 
```

因此，分面分组是单独完成的（按纬度，然后按经度）。

请注意，我不能仅按纬度或经度进行分组，因为多个记录可以共享纬度（但经度不同），反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:14:58.730

您正在多个字段上创建一个 TermsFacet：纬度和经度。这意味着纬度和经度被聚合在一起，因为它们是一个独特的字段。您会看到每个单个值的条目，可以是纬度或经度。您返回 74 个条目的事实证明您的索引中有 74 个不同的纬度和经度值，这是有道理的。你到底想达到什么目的？每个纬度经度对的一个方面条目？在这种情况下，您有两种选择：

*   向包含该对本身的索引添加一个附加字段，然后对其进行刻面
*   使用术语脚本动态创建纬度经度对。查看[文档](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)以了解更多信息。这是一个应该有帮助的例子，试一试：

> ```
> {
>     "query" : {
>         "match_all" : { }
>     },
>     "facets" : {
>         "tags" : { 
>             "terms" : {
>                 "field" : "latitude",
>                 "script" : "term + \"_\" + _source.longitude"
>             }
>         }
>     }
> } 
> ```

# android - Roboguice 2.0 将应用程序注入 POJO

> ID：12211733
> 
> 赞同：4
> 
> 时间：2012-08-31T08:38:29.770
> 
> 标签：android, dependency-injection, roboguice

我是Roboguice的新手，请帮忙。我有一个应用程序类，我`MyApplication`在其中`onCreate`初始化一些数据。我也有一个`POJO`我想在我的`MainActivity`（见下面的代码片段）中使用的商业逻辑。我需要注入`MyApplication`以`POJO`访问我在应用程序中初始化的数据`onCreate`，但是此代码之前调用过`onCreate`并且我有一个`NullPointerException`.

```
public class MyApplication extends Application {

    private Properties applicationProperties;

    @Override
    public void onCreate() {
        super.onCreate();
        applicationProperties = loadApplicationProperties(APPLICATION_PROPERTIES_ASSET);
    }

    @SuppressWarnings("unchecked")
    public String getProperty(String key) {
        return applicationProperties.getProperty(key);
    }

}

@Singleton
public class POJO {

    @Inject
    private MyApplication application;

    @Inject
    public void init() {
        // NPE here, because application onCreate not called at this moment
        serverURL = application.getProperty(Constants.SERVER_URL);
    }
}

public class MainActivity extends RoboActivity {

    @Inject
    private POJO myPOJO;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:26:09.317

[编辑：根据RoboGuice custom module application context](https://stackoverflow.com/a/15638981/2291)中的答案在 RoboGuice 2.0 中找到了一种方法。

在 AbstractModule 构造函数中注入应用程序上下文，然后将其绑定以`configure()`供以后注入：

```
public final class MyModule extends AbstractModule
{
    private final MyApplication context;

    @Inject
    public MyModule(final Context context)
    {
        super();
        this.context = (MyApplication)context;
    }

    @Override
    protected void configure() {
        bind(MyApplication.class).toInstance(context);
    } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T21:34:50.170

如果您需要的数据不需要上下文，只需访问 XML 资源或 res/raw，您可以从任何地方注入。

只需用于`Roboguice.getInjector()`获取 Resources 对象的副本。

# java - Hibernate 验证注解 - 验证至少一个字段不为空

> ID：12211734
> 
> 赞同：14
> 
> 时间：2012-08-31T08:38:30.067
> 
> 标签：java, hibernate, annotations, validation

[有没有一种方法可以使用此处](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html_single/#validator-customconstraints-compound)定义的注释来定义 Hibernate 验证规则，说明至少一个字段不应为空？

这将是一个假设的例子（`@OneFieldMustBeNotNullConstraint`实际上并不存在）：

```
@Entity
@OneFieldMustBeNotNullConstraint(list={fieldA,fieldB})
public class Card {

    @Id
    @GeneratedValue
    private Integer card_id;

    @Column(nullable = true)
    private Long fieldA;

    @Column(nullable = true)
    private Long fieldB;

} 
```

在图示的情况下，fieldA 可以为空，或者 fieldB 可以为空，但不能同时为空。

一种方法是创建我自己的验证器，但如果它已经存在，我想避免。如果您已经制作了一个验证器，请分享一个...谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T10:09:07.573

我终于写了整个验证器：

```
import static java.lang.annotation.ElementType.TYPE;
import static java.lang.annotation.RetentionPolicy.RUNTIME;

import java.lang.annotation.Documented;
import java.lang.annotation.Retention;
import java.lang.annotation.Target;

import javax.validation.Constraint;
import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;
import javax.validation.Payload;

import org.apache.commons.beanutils.PropertyUtils; 

@Target( { TYPE })
@Retention(RUNTIME)
@Constraint(validatedBy = CheckAtLeastOneNotNull.CheckAtLeastOneNotNullValidator.class)
@Documented
public @interface CheckAtLeastOneNotNull {

     String message() default "{com.xxx.constraints.checkatleastnotnull}";

     Class<?>[] groups() default {};

     Class<? extends Payload>[] payload() default {};

     String[] fieldNames();

     public static class CheckAtLeastOneNotNullValidator implements ConstraintValidator<CheckAtLeastOneNotNull, Object> {

         private String[] fieldNames;

         public void initialize(CheckAtLeastOneNotNull constraintAnnotation) {
             this.fieldNames = constraintAnnotation.fieldNames();
         }

         public boolean isValid(Object object, ConstraintValidatorContext constraintContext) {

             if (object == null) {
                 return true;
             }
             try { 
                 for (String fieldName:fieldNames){
                     Object property = PropertyUtils.getProperty(object, fieldName);

                     if (property != null) return true;
                 }
                 return false;
             } catch (Exception e) {
                 return false;
             }
         }
     }
} 
```

使用示例：

```
@Entity
@CheckAtLeastOneNotNull(fieldNames={"fieldA","fieldB"})
public class Reward {

    @Id
    @GeneratedValue
    private Integer id;

    private Integer fieldA;
    private Integer fieldB;

    [...] // accessors, other fields, etc.
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T09:03:23.217

只需编写您自己的验证器。不应该很简单：遍历字段名称并使用反射获取字段值。

概念：

```
Collection<String> values = Arrays.asList(
    BeanUtils.getProperty(obj, fieldA),
    BeanUtils.getProperty(obj, fieldB),
);

return CollectionUtils.exists(values, PredicateUtils.notNullPredicate()); 
```

在那里我使用了`commons-beanutils`和的方法`commons-collections`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-26T05:27:17.840

这有点像`Resh32`'s answer，但这也会将验证消息与验证对象的特定字段绑定。

验证注释类将如下所示。

```
import javax.validation.Constraint;
import javax.validation.Payload;
import java.lang.annotation.Documented;
import java.lang.annotation.Retention;
import java.lang.annotation.Target;

import static java.lang.annotation.ElementType.TYPE;
import static java.lang.annotation.RetentionPolicy.RUNTIME;

/**
 * @author rumman
 * @since 9/23/19
 */
@Target(TYPE)
@Retention(RUNTIME)
@Documented
@Constraint(validatedBy = NotNullAnyValidator.class)
public @interface NotNullAny {

    String[] fieldNames();

    String errorOnProperty();

    String messageKey() default "{error.required}";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};
} 
```

验证器类将如下所示。

```
import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;
import java.lang.reflect.InvocationTargetException;
import java.util.Arrays;
import java.util.Objects;

import static org.springframework.beans.BeanUtils.getPropertyDescriptor;

/**
 * @author rumman
 * @since 9/23/19
 */
public class NotNullAnyValidator implements ConstraintValidator<NotNullAny, Object> {

    private String[] fieldNames;
    private String errorOnProperty;
    private String messageKey;

    @Override
    public void initialize(NotNullAny validateDateRange) {
        fieldNames = validateDateRange.fieldNames();
        errorOnProperty = validateDateRange.errorOnProperty();
        messageKey = validateDateRange.messageKey();
    }

    @Override
    public boolean isValid(Object obj, ConstraintValidatorContext validatorContext) {

        Object[] fieldValues = new Object[fieldNames.length];

        try {
            for (int i = 0; i < fieldValues.length; i++) {
                fieldValues[i] = getPropertyDescriptor(obj.getClass(), fieldNames[i]).getReadMethod().invoke(obj);
            }

        } catch (IllegalAccessException | InvocationTargetException e) {
            throw new RuntimeException(e);
        }

        if (Arrays.stream(fieldValues).noneMatch(Objects::nonNull)) {
            validatorContext.buildConstraintViolationWithTemplate(messageKey)
                    .addPropertyNode(errorOnProperty)
                    .addConstraintViolation()
                    .disableDefaultConstraintViolation();

            return false;
        }

        return true;
    }
} 
```

注意最后一个`if`条件块，它检查是否没有`null`找到非值然后指定错误消息，错误消息将绑定到的属性并将添加约束冲突。

在类中使用注解

```
/**
 * @author rumman
 * @since 9/23/19
 */
@NotNullAny(fieldNames = {"field1", "field2", "field3"},
        errorOnProperty = "field1",
        messageKey = "my.error.msg.key")
public class TestEntityForValidation {

    private String field1;
    private String field2;
    private String field3;

    // standard constructor(s) and getter & setters below
} 
```

# c# - 验证时出现键空错误

> ID：12211737
> 
> 赞同：2
> 
> 时间：2012-08-31T08:38:44.840
> 
> 标签：c#, .net, wpf, datagrid

我有一个包含对象数组的数据网格，在我向错误集合添加错误 (IErrorInfo) 之前，一切都运行良好

在 Property Changed 发生以下错误

```
protected virtual void SendPropertyChanged(String propertyName)
        {
            if ((this.PropertyChanged != null))
            {
                this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName)); <//---- here
            }
        } 
```

和 DataGrid.UpdateLayout

```
 TimesheetArray = CreateMatrix(SelectedTimesheet.TimesheetDetails);
    RaisePropertyChanged("TimesheetArray");
    this.CrossTabDG.UpdateLayout();//----- HERE
    this.CrossTabDG.ItemsSource = this.TimesheetArray; 
```

错误代码

```
System.ArgumentNullException occurred
  Message=Key cannot be null.
Parameter name: key
  Source=System
  ParamName=key
  StackTrace:
       at System.Collections.Specialized.HybridDictionary.get_Item(Object key)
       at System.ComponentModel.PropertyChangedEventManager.PrivateAddListener(INotifyPropertyChanged source, IWeakEventListener listener, String propertyName)
       at System.ComponentModel.PropertyChangedEventManager.AddListener(INotifyPropertyChanged source, IWeakEventListener listener, String propertyName)
       at MS.Internal.Data.PropertyPathWorker.ReplaceItem(Int32 k, Object newO, Object parent)
       at MS.Internal.Data.PropertyPathWorker.UpdateSourceValueState(Int32 k, ICollectionView collectionView, Object newValue, Boolean isASubPropertyChange)
       at MS.Internal.Data.ClrBindingWorker.AttachDataItem()
       at System.Windows.Data.BindingExpression.Activate(Object item)
       at System.Windows.Data.BindingExpression.AttachToContext(AttachAttempt attempt)
       at System.Windows.Data.BindingExpression.AttachOverride(DependencyObject target, DependencyProperty dp)
       at System.Windows.Data.BindingExpressionBase.Attach(DependencyObject target, DependencyProperty dp)
       at System.Windows.Data.BindingExpressionBase.OnAttach(DependencyObject d, DependencyProperty dp)
       at System.Windows.StyleHelper.GetInstanceValue(UncommonField`1 dataField, DependencyObject container, FrameworkElement feChild, FrameworkContentElement fceChild, Int32 childIndex, DependencyProperty dp, Int32 i, EffectiveValueEntry& entry)
       at System.Windows.StyleHelper.GetChildValueHelper(UncommonField`1 dataField, ItemStructList`1& valueLookupList, DependencyProperty dp, DependencyObject container, FrameworkObject child, Int32 childIndex, Boolean styleLookup, EffectiveValueEntry& entry, ValueLookupType& sourceType, FrameworkElementFactory templateRoot)
       at System.Windows.StyleHelper.GetChildValue(UncommonField`1 dataField, DependencyObject container, Int32 childIndex, FrameworkObject child, DependencyProperty dp, FrugalStructList`1& childRecordFromChildIndex, EffectiveValueEntry& entry, ValueLookupType& sourceType, FrameworkElementFactory templateRoot)
       at System.Windows.StyleHelper.GetValueFromStyleOrTemplate(FrameworkObject fo, DependencyProperty dp, EffectiveValueEntry& entry)
       at System.Windows.FrameworkElement.GetRawValue(DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry& entry)
       at System.Windows.FrameworkElement.EvaluateBaseValueCore(DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry& newEntry)
       at System.Windows.DependencyObject.EvaluateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry newEntry, OperationType operationType)
       at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
       at System.Windows.DependencyObject.InvalidateProperty(DependencyProperty dp)
       at System.Windows.StyleHelper.InvalidateDependents(Style ownerStyle, FrameworkTemplate frameworkTemplate, DependencyObject container, DependencyProperty dp, FrugalStructList`1& dependents, Boolean invalidateOnlyContainer)
       at System.Windows.StyleHelper.OnTriggerSourcePropertyInvalidated(Style ownerStyle, FrameworkTemplate frameworkTemplate, DependencyObject container, DependencyProperty dp, DependencyPropertyChangedEventArgs changedArgs, Boolean invalidateOnlyContainer, FrugalStructList`1& triggerSourceRecordFromChildIndex, FrugalMap& propertyTriggersWithActions, Int32 sourceChildIndex)
       at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
       at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
       at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
       at System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType, Boolean isInternal)
       at System.Windows.DependencyObject.SetValue(DependencyPropertyKey key, Object value)
       at System.Windows.Controls.Validation.AddValidationError(ValidationError validationError, DependencyObject targetElement, Boolean shouldRaiseEvent)
       at System.Windows.Data.BindingGroup.AddValidationError(ValidationError validationError)
       at System.Windows.Data.BindingGroup.ValidateOnDataTransfer()
       at System.Windows.Data.BindingGroup.OnLayoutUpdated(Object sender, EventArgs e)
       at System.Windows.ContextLayoutManager.fireLayoutUpdateEvent()
       at System.Windows.ContextLayoutManager.UpdateLayout()
       at System.Windows.UIElement.UpdateLayout()
       at TimesheetEntry.Views.TimesheetEntryViewModel.UpdateTimesheetGrid() in C:\Data Drive\Projects\DotNET\Laing_ORourke\source\TimesheetEntry\TimesheetEntry\Views\TimesheetEntry\TimesheetEntryViewModel.cs:line 405
  InnerException: 
```

谁能告诉我如何找到丢失的密钥

1) PropertyName 不为空 2) UpdateLayout() 不需要参数

没有 ValidationErrors - 没有问题 - 但我确实需要它，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-05-03T14:05:03.787

当您为 Binding 限定所有者类型并且您指定的类型不是它在运行时绑定的类型时，通常会发生这种情况。

例如：

```
<Setter Property="Canvas.Top" Value="{Binding (viewModels:FaceWithCandidates.Face).FaceRectangle.Top}" /> 
```

如果您正在限定绑定说您正在处理 FaceWithCandidates 并且在运行时，数据上下文包含任何其他类型，它将抛出这种异常。

当您符合您的属性时，请检查您的绑定！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T15:07:09.980

我想你已经解决了这个问题或继续前进，但我会发布这个以供将来参考。

* * *

使用带有交替计数集的 ItemsControl 时，我遇到了同样的错误，我在 TextBlock 中显示。它只发生在一台特定的机器上，但是当我从 ItemContainerStyle 中删除下面的行时，异常消失了。

```
<TextBlock Text="{Binding (ItemsControl.AlternationIndex),
                          RelativeSource={RelativeSource Mode=TemplatedParent},
                          StringFormat='{}Item {0}'}"/> 
```

所以看起来这个错误是由于一些错误的 XAML 代码而发生的。您可以尝试删除 controltemplate 样式并查看是否有效，如果有效，请添加元素直到再次出现错误，以便找出哪个元素不正确。似乎附加属性是罪魁祸首，所以我会先寻找那些。

# jquery - 删除我刚刚使用 Ajax - MVC3 添加的元素（来自客户端和服务器）

> ID：12211739
> 
> 赞同：0
> 
> 时间：2012-08-31T08:38:53.887
> 
> 标签：jquery, ajax, asp.net-mvc-3, sql-server-2008

我有一个视图，我将一些元素添加到数据库中的表中；让我们称表学生。在视图中，我还可以选择将一些书籍分配给要添加到表中的学生。我已经用 Ajax 做到了这一点。

演示：

```
 Name of Student: ...
    Books : <here is a drop down> ( from database)    < here is a button> (add button)

    <ul>
   When I click the button here I append some books. I also retain on Session the id of every book ( in a list and when I click submit I send that list to the server )
    </ul>
[Submit button] 
```

问题是我也想像这样添加一个删除按钮：

```
 Name of Student: ...

    Books : <here is a drop down>     < here is a button> 

    <ul>
    Book1  delete
    Book2  delete
    </ul>
[Submit button] 
```

当我单击删除按钮从列表和会话中删除该元素时。

这是我的代码：

*   视图中的脚本

    ```
    $(function () {

        $("#add").click(function () {

            //items.push($("#category").val());
            $.ajax({
                url: '@Url.Action("AddCategory")',
                type: "POST",
                dataType: "JSON",
                data: { id: $("#categoryId option:selected").val() },
                beforeSend: function () { },
                success: function (data) {

                    $("#toFill").append("<li>" + $("#categoryId option:selected").text() + " " + "<span style='cursor:pointer;' id='a'>" + "[X]" + "</span>" + " " + "</li>");
                },
                error: function () { alert("error") }

            })
            $("#toFill #a").click(function () {

                $.ajax({
                    url: '@Url.Action("DeleteCat")',
                    type: "POST",
                    dataType: "JSON",
                    data: { id: $("#categoryId option:selected").val() },
                    beforeSend: function () { },
                    succes: function (data) {
                        // $("li").remove();
                        alert("lala"); return false;
                    },
                    error: function () { alert("error at delete") }

                })

            });
        }) 
    ```

*   `AddCategory`并`DeleteCat`从控制器：

    ```
    public ActionResult AddCategory(int id)
    {
        Session.Category.Add(id);
        return Json(id, JsonRequestBehavior.AllowGet);
    }

    public ActionResult DeleteCat(int id)
    {
        Session.Category.Remove(id);
        return Json(id, JsonRequestBehavior.AllowGet);
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:53:21.293

如果您有一个直接作用于下拉列表的删除按钮，那么它会更合乎逻辑且更易于遵循、使用和编程 - 即在下拉列表中选择一个项目并单击删除以删除所选项目。

# java - 比较Java中的两个地图

> ID：12211753
> 
> 赞同：1
> 
> 时间：2012-08-31T08:39:23.780
> 
> 标签：java, map, compare

我希望能够比较两个数组（它们将保存相同 XML 但不同年龄的值，因此我可以查看是否进行了任何更改）。我有两个数组，一个包含我已解析的旧 XML 行的属性和值，另一个包含已解析的同一 XML 行的属性和最新版本。

例子：

```
Array1:                                                                         

rect x="220.00"                    
width="300.00" 
id="rect_1" 
y="180.00" 
height="280.00" 

Array2:                                                                         

rect x="300.00"                    
width="400.00" 
id="rect_1" 
height="280.00"
info = "description"

etc etc 
```

所以在这里，变化将是：

*   `rect x`属性已从 220 (array1) 更改为 300 (array2 )
*   该`width`属性已从 300 (array1) 更改为 400(array2)
*   Array2 获得了一个名为`info`
*   `y`已从 array2 中删除

我将如何比较两个数组并显示这样的结果？基本上我希望它显示变化和差异。

这是我试过的代码：

```
Collection<String> listOne = Arrays.asList(array1);

Collection<String> listTwo = Arrays.asList(array);

Collection<String> similar = new HashSet<String>( listOne );
Collection<String> different = new HashSet<String>();
different.addAll( listOne );
different.addAll( listTwo );

similar.retainAll( listTwo );
different.removeAll( similar );

resultsBuff.append("\nDifferences: \n"+ different + "\n\nChanges: \n" + similar); 
```

这段代码并没有完全按照我的意愿去做（如前所述）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:31:56.153

您别无选择，只能遍历两个数组。我将遍历属性、拆分键和值并为每个数组构建一个 HashMap。

```
Map<String, String> map1 = new HashMap<String, String>() 
for (String attribute : array1) {    
  String[] splitted = attribute.split("=");   
  map1.put(splitted[0], splitted[1]); 
} 
```

做同样的事情来创建 map2。

```
Map<String, String> map2 = new HashMap<String, String>(); 
... 
```

循环遍历第一个映射并验证键/值是否不同或存在于 map2 中以检测到属性删除。

```
for (String key : map1.keySet()) {    
  if (!map2.containsKey(key)) {
    System.out.println(key + "has been removed from Array2" )
  } else if (!map1.get(key).equals(map2.get(key)) {
    System.out.println(key + "attribute has changed from " + map1.get(key) + " to " + map2.get(key)  );
  } 
} 
```

循环map2检测新属性

```
for (String key : map2.keySet()) {    
  if (!map1.containsKey(key)) {
    System.out.println(key + "has been added to Array2" );
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:41:24.190

我会使用 HashMap 而不是数组，因为它更适合这种键/值结构：

```
map.put("rect x","220.00");
map.put("width","300.00");
... 
```

从 2 个数组构建 2 个哈希图，并比较它们：

```
if(!map1.equals(map2)) { //something has changed
    //loop over keys and compare values
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:48:06.563

我将创建一个包含此信息的对象并实现自定义等于。您不需要将数组用作数据结构。你可以使用一个对象。

例如

```
public class MyObject{
    private double rect_x;
    private double width;
    private double id;
    private double y;
    private double height

    //usual getters and setters
    //implement hashcode
    //implemement equals eg
    public boolean equals (Object o) {
        if (!(o instanceof MyObject)){
             return false;
        }
        MyObject that=  MyObject.class.cast(o);
        return this.width == that.width && this.id == that.id etc etc
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:08:41.563

你已经有地图了？或者它们只是数组？
我的意思是，这些“标签”是否隐含？
如果他们不是并且您实际上有两个地图，您可以轻松地执行以下操作：

```
for(Map.Entry<String,String> pair : array1){
    String key = pair.getKey();
    String value = pair.getValue();
    if(!array2.containsKey(key)){
        System.out.println("Array2 lost attribute " + key);
    }else{
        String value2 = array2.get(key);
        if(!value.equals(value2){
            System.out.println("The '"+key+"' attribute  has changed from "+value+" to "+ value2 ;
        }
        array2.remove(key);
    }
}

for(Map.Entry<String,String> pair : array2){
    String key = pair.getKey();
    System.out.println("Array2 gained attribute " + key);
} 
```

如果您没有明确的标签，您只需在此代码之前创建另一个映射并使用它来构建两个映射......

# css - 位置：绝对 位置：相对

> ID：12211756
> 
> 赞同：0
> 
> 时间：2012-08-31T08:39:29.400
> 
> 标签：css

我正在尝试使用 2 个固定宽度的 div（左右浮动）和一个根据显示宽度改变其宽度的流体中心 div 来制作一个 3 列布局。所有这些都包含在包装器 div 中。我这样做的方法是为具有固定宽度的 div 创建左右浮动的第三个 div，该第三个 div 相对于包装 div 定位，边距向右，以便为右侧 div 留出位置显示。然而问题是，如果流体 div 有内容，它会溢出正确的 div，忽略 margin-right 样式。为什么会这样？看来1111

get 出于某种奇怪的原因而被预先格式化。

编码：

```
<div style="width: 90%; border: 1px solid black; margin: 0 auto; overflow: hidden; position: relative;">
    <div style="width: 150px; height: 150px; border: 1px solid red; display: inline-block; float: left; text-decoration: underline; min-width: ???">remove<br /> assets</div>
    <div style="border: 1px solid #999; position: absolute; left: 160px; margin-right: 160px;"><p>111111111111111111111111111111111111111<br />1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</p></div>
    <div style="width: 150px; height: 150px; border: 1px solid red; float: right">111</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:49:00.900

我建议使用两个浮动的 div。

在右侧，放置中间和右侧的 div。

所有这些都是通过浮点数完成的：

**HTML：**

```
<div class="left">content for the left</div>
<div class="rightContainer">
  <div class="right">right content</div>
  <div class="middle">middle content</div>
</div> 
```

**CSS：**

```
.left {
    float: left;
    width: 100px;
    overflow: hidden;
    min-height: 30px;
    background: red;
}
.rightContainer {
    float: none;
    min-height: 30px;
    overflow: hidden;
    background: yellow;
}
.right {
    float: right;
    width: 100px;
    overflow: hidden;
    min-height: 30px;
    background: blue;
}​
.middle {
    overflow: hidden;
    min-height: 30px;
    background: green;
} 
```

例子：

更新：适用于您的内容：http: [//jsfiddle.net/2KXW5/1/](http://jsfiddle.net/2KXW5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:47:07.330

这可以通过指定`word-wrap: break-word;`中心流体 div 的样式来解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T08:52:47.157

浏览器不能很好地使用自动换行。无论如何，我希望这段代码能带来一些帮助：

```
<div style="width: 90%; border: 1px solid black; margin: 0 auto; overflow: hidden; position: relative;">
    <div style="width: 150px; height: 150px; border: 1px solid red; display: inline-block; float: left; text-decoration: underline; min-width: ???">remove<br /> assets</div>
    <div style="width: 150px; height: 150px; border: 1px solid red; float: right">111</div>
    <div style="border: 1px solid #999; position: relative; left: 10px; margin-right: 160px; overflow:hidden; word-wrap: break-word; "><p>111111111111111111111111111111111111111<br />1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</p></div>  
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:58:49.160

第一：段落元素是块级元素。谷歌它以了解更多信息。因此，如果您希望它不与另一个重叠，您也必须浮动它。

所以将其包含在标题中（或单独的文件 - 如果需要，也可以内联）：

```
<style type="text/css">
p {
   float:left;
}
</style> 
```

然后重新排列你的div：

```
<div style="width: 90%; border: 1px solid black; margin: 0 auto; overflow: hidden;position: relative;">
    <div style="width: 150px; height: 150px; border: 1px solid red; display: inline-block; float: left; text-decoration: underline; min-width: ???">remove<br /> assets</div>
    <div style="width: 150px; height: 150px; border: 1px solid red; float: right">111</div>
    <div style="border: 1px solid #999; display:block; margin-left:160px; margin-right: 160px;overflow:auto;"><p >111111111111111111111111111111111111111<br />1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</p></div> 
```

# django - 在 Elastic Beanstalk 上使用 Django + easy-thumbnails/sorl-thumbnail

> ID：12211757
> 
> 赞同：5
> 
> 时间：2012-08-31T08:39:31.070
> 
> 标签：django, thumbnails, amazon-elastic-beanstalk, sorl-thumbnail

我在 Elastic Beanstalk 上使用 Django 和 easy_thumbnails 时遇到了一些问题，我不太确定出了什么问题......这是问题所在：

我正在使用 easy_thumbnails 在模板中进行缩略图。我喜欢这给我的灵活性，所以我宁愿不在模型中做缩略图。当我上传图像时，它会很好地存储在数据库中并上传到 EBS 卷。到目前为止，一切都很好。我的问题在于我无法缩略图任何图像。如果我打开缩略图调试，easy_thumbnails 似乎没有读取/查找图像。我怀疑这个问题可能与我的媒体 url 设置有关，但我不知道要更改什么。

有没有其他人有使用 sorl_thumbnail 或 easy_thumbnails 的经验？我真的很感激任何指导。在我的本地开发服务器上，我的缩略图工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T17:03:40.467

Easy-thumbnails 对 AmazonS3 的支持并不容易，您可以应用此设置使其工作[http://gibuloto.logdown.com/posts/99941-easy-thumbnails-with-amazon-s3](http://gibuloto.logdown.com/posts/99941-easy-thumbnails-with-amazon-s3)

如此处所述：[Django-Storages + Easy_Thumbnails：[Errno 30] 只读文件系统](https://stackoverflow.com/questions/17257827/django-storages-easy-thumbnails-errno-30-read-only-file-system)

# java - 为什么我看到两个河豚实现之间的不一致？

> ID：12211760
> 
> 赞同：0
> 
> 时间：2012-08-31T08:39:37.087
> 
> 标签：java, c++, encryption, blowfish

我首先使用 javax.crypto.spec.SecretKeySpec 使用密钥“rubicon”加密“06.93308”，然后使用 openSSL 在 C++ 中加密另一个。但是，两者都给了我不同的加密值。java 版本给了我十六进制`A834BDD6C3478B8C`，而 OpenSSL 给了我`D06D7CB756744903`，这是相当不同的。目的是获得与 java 等价物相同的结果。关于我做错了什么的任何想法？

java代码如下：

```
char[] password = new char[] { 'r', 'u', 'b', 'i', 'c', 'o', 'n' };
byte[] raw = encrypt(password,"06.93308" );

    private static byte[] encrypt(char[] password, String plaintext) throws Exception {
            byte[] bytes = new byte[password.length];
            for (int i = 0; i < password.length; ++i) {
                    bytes[i] = (byte) password[i];
            }
            SecretKeySpec skeySpec = new SecretKeySpec(bytes, "Blowfish");
            Cipher cipher = Cipher.getInstance("Blowfish/ECB/NoPadding");
            cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
            byte[] encrypted = cipher.doFinal(plaintext.getBytes());
            return encrypted;
    } 
```

c++端如下：

```
 CBlowFish oBlowFish((byte *)"rubicon", 8);

   char encryptedPrice[17] = "\0\0\0\0\0\0\0\0";
   char myBidPrice[] = "06.93308";
   encrypt(myBidPrice,encryptedPrice);

    void encrypt(char bidPrice[],char encryptedPrice[])
    {
        oBlowFish.Encrypt((unsigned char*)bidPrice, (unsigned char*)encryptedPrice,8 );
    } 
```

这是 openSSL 代码，它给了我与上面的 C++ 代码相同的结果

```
#define SIZE 16

unsigned char *out = (unsigned char *)calloc(SIZE+1, sizeof(char));
BF_KEY *key = (BF_KEY *)calloc(1, sizeof(BF_KEY));
BF_set_key(key, SIZE, (const unsigned char*)"rubicon" );
BF_ecb_encrypt(in, out, key, BF_ENCRYPT);
printf("%s\n",out); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:31:45.633

“rubicon”不是 16 字节长。你必须`SIZE`相应地进行调整。

# java - 我如何将哈希映射键用于字符串数组？

> ID：12211768
> 
> 赞同：0
> 
> 时间：2012-08-31T08:40:16.170
> 
> 标签：java, arrays, hashmap

我目前正在做一个多班作业，我必须根据程序中是否存在先决条件来添加一门课程。我使用哈希图将我的课程存储在程序类中。（以为我会派上用场）但是，我在确保这些 preReqs 存在时遇到了一些麻烦。这是我目前正在执行的一些代码

```
public boolean checkForCourseFeasiblity(AbstractCourse c) throws ProgramException 
{

    AbstractCourse[] tempArray = new AbstractCourse[0];

    tempArray=    courses.keySet().toArray(tempArray);

    String[] preReqsArray = new String[1];
    preReqsArray = c.getPreReqs();
    //gets all course values and stores them in tempArray

    for(int i = 0; i < preReqsArray.length; i++)
    {

        if(courses.containsKey(preReqsArray[i])) 
        {
            continue;
        }
        else if (!courses.containsKey(preReqsArray[i]))
        {
            throw new ProgramException("preReqs do not exist"); //?

        }

    }
    return true;
} 
```

好的，所以基本上， tempArray 将所有 keySet 存储在课程哈希图中，我需要将它们与 preReqs （这是一个字符串数组）进行比较。如果密钥集中存在 preReqs，则添加课程，如果他们不添加课程。如果课程通过我添加了异常，则返回 true。请记住，我的键集是字符串，例如键集值可以是“Programming1”，而课程所需的先决条件可能是“programming1”。如果是这种情况，请添加课程，因为密钥集中存在 prereq 课程。我相信我的错误是当我用 c.getPreReqs 初始化 mypreReqsArray 时（注意：getPreReqs 是一个返回类型为 String[] 的 getter）。如果有人能帮助我解决我的困境，那就太好了。我试图提供尽可能多的东西，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:59:53.527

尝试这样的事情，你不需要 tempArray。“for each”循环看起来也更好。如果您想抛出异常，我会将该逻辑放在调用此方法的位置。

```
public boolean checkForCourseFeasiblity(AbstractCourse c)
{

  for(String each : c.getPreReqs())
  {
      if(! courses.containsKey(each)) 
      {
          return false;
      }
  }

  return true;
} 
```

# c# - WinForms GDI 渲染无法正确重绘

> ID：12211770
> 
> 赞同：0
> 
> 时间：2012-08-31T08:40:27.867
> 
> 标签：c#, .net, winforms, gdi

我有一个简单的 WinForms 应用程序，它可以绘制一些彩色矩形。但是，当调整窗口大小时，它没有正确更新。

![在此处输入图像描述](../Images/14ab01ecf970791538129e004554684c.png)

已经尝试覆盖 OnResize

```
protected override void OnResize(EventArgs e)
{
        repaintingMyStuffHere();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:51:10.907

尝试这个：

```
protected override void OnResize(EventArgs e)
{
     this.Invalidate();
     base.OnResize(e);
}

protected override void OnPaint(PaintEventArgs e) {
{
     base.OnPaint(e);
     repaintingMyStuffHere(e.Graphics);
} 
```

如果您仍然有问题，请尝试设置以下控件样式：

```
public MyClass() {
    this.SetStyle(ControlStyles.AllPaintingInWmPaint | 
                    ControlStyles.OptimizedDoubleBuffer | 
                    ControlStyles.ResizeRedraw | 
                    ControlStyles.UserPaint | 
                    ControlStyles.ResizeRedraw, 
                    true);
} 
```

如果您仍然有任何问题，请发布您的 repaintingMyStuffHere 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-07T19:59:12.730

为了让您的表单/组件呈现属性并帮助提高性能，您需要首先覆盖该`OnResize()`方法以使其使表单/组件无效：

```
protected override void OnResize(EventArgs e)
{
    base.OnResize(e);
    this.Invalidate();
} 
```

然后（可选，但建议减少闪烁）将表单/组件`DoubleBuffered`属性设置为 true：

```
this.DoubleBuffered = true; 
```

# scala - 为什么验证不是 Monad？

> ID：12211776
> 
> 赞同：28
> 
> 时间：2012-08-31T08:40:50.440
> 
> 标签：scala, monads, scalaz, scalaz7

一个示例用例：

```
def div2(i: Int): Validation[String, Int] = 
    if (i%2 == 0) Validation.success(i/2)
    else Validation.failure("odd")

def div4(i: Int) = for {
    a <- div2(i)
    b <- div2(a)
} yield b 
```

**错误**：无法将类型取消应用到按类型类分类的`scalaz.Validation[String,Int]`类型构造函数中`M[_]``scalaz.Bind`

我*猜*这个错误是由编译器找不到`Monad`实例引起的`Validation[String, Int]`

我可以为自己制作一个，例如：

```
object Instances {
implicit def validationMonad[E] = new Monad[({type L[A] = Validation[E, A]})#L] {
    override def point[A](a: => A) =
        Validation.success(a)
    override def bind[A, B](fa: Validation[E, A])(f: A => Validation[E, B]) =
        fa bind f
}
} 
```

但为什么还没有`Validation`呢？毕竟，`Validation`已经`bind`定义了方法。

此外，由于另一个*复杂的***错误**... 模棱两可的隐含值​​：像两者（我的实例）和`import Validation._`特征中的方法...两者都匹配一些...`import Instances._` ***`validationMonad``ValidationInstances1``ValidationInstances2``Functor of Validation`***

 ***我应该修改scalaz的来源吗？或者我完全错过了什么~？
请帮忙~

我正在使用 scalaz 7.0.0-M2

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-31T09:12:32.160

正如Scalaz 小组中所[讨论](https://groups.google.com/d/msg/scalaz/IWuHC0nlVws/syRUkXJklWIJ)的，问题似乎是`ap`会累积错误，而（伪）单子组合只会对`Validation`.

因此，一个不能用另一个表示，因此不存在 monad 实例`Validation`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T10:00:31.290

问题是单子所暗示的应用函子不等于*实际*的应用函子***

# python - 如何使用 webDriver (python) 在 chrome 中最大化窗口

> ID：12211781
> 
> 赞同：75
> 
> 时间：2012-08-31T08:41:03.657
> 
> 标签：python, selenium, selenium-chromedriver

有没有办法使用 python selenium WebDriver 最大化 chrome 浏览器窗口？

注意：我正在使用 Chrome 驱动程序 23.0 对此的任何解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-31T10:42:00.430

您可以使用 ChromeOptions 并设置合适的参数：

```
options = ChromeOptions()
options.add_argument("--start-maximized")
driver = ChromeDriver(options) 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-05-18T11:43:40.540

除了：

```
driver.set_window_size(1024, 600)
driver.maximize_window() 
```

我通过检查 selenium/webdriver/remote/webdriver.py 发现了这一点。我从来没有找到任何有用的文档，但是阅读代码的效果还是有限的。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2016-07-14T15:24:05.183

对于 MAC 或 Linux：

```
ChromeOptions chromeOptions = new ChromeOptions();
chromeOptions.addArguments("--kiosk");
driver = new ChromeDriver(chromeOptions); 
```

对于 Windows：

```
ChromeOptions chromeOptions = new ChromeOptions();
chromeOptions.addArguments("--start-maximized");
driver = new ChromeDriver(chromeOptions); 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2012-12-06T08:33:47.320

根据 Janek 的回答，这对我有用（Linux）：

```
from selenium import webdriver

options = webdriver.ChromeOptions()
options.add_argument("--start-maximized")

driver = webdriver.Chrome(chrome_options=options) 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-08-31T10:39:01.743

尝试这个：

```
driver.manage().window().maximize(); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-10-10T23:35:55.507

这适用于我，使用 Python 的 Mac OS Sierra，

```
options = webdriver.ChromeOptions()
options.add_argument("--kiosk")
driver = webdriver.Chrome(chrome_options=options) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-06-20T04:02:33.700

我执行以下操作：

```
from selenium import webdriver
browser = webdriver.Chrome('C:\chromedriver.exe')
browser.maximize_window() 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-04-20T02:16:05.833

试试这个，在windows平台上测试过，效果很好：

```
from selenium import webdriver
browser = webdriver.Chrome('C:\\Users\\yeivic\\Downloads\\chromedriver')
browser.fullscreen_window()
browser.get('http://google.com/') 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-03-16T08:49:14.673

尝试

```
ChromeOptions options = new ChromeOptions();
options.addArguments("--start-fullscreen"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-21T14:45:44.287

这对我有用

```
driver.maximize_window()
driver.get(url) 
```

# java - 根据“页数”标准拆分文本文件

> ID：12211786
> 
> 赞同：0
> 
> 时间：2012-08-31T08:41:24.280
> 
> 标签：java, unix, ibm-midrange

我有一个大约 5500 页的大文本文件。我想把它分成 1000 个页面段文件。实际上我在 AS400 工作，所以只想知道是否有任何 qshell 或 unix 或命令 java 可以执行此任务......谢谢！分页符是换页符或 *FCFC 字符！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:46:21.857

您可以对 IFS 文件使用标准 Unix 命令`split`。

```
split -l 60 input_filename output_prefix 
```

[split - 将文件拆分成小块](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzahz/rzahzsplit.htm?)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:23:41.440

除非您需要使用 QSH 命令，否则请使用`CPYF`带有`FROMRCD()`和`TORCD()`参数的标准 IBM i 命令，也许`NBRRCDS()`.

# c# - Head First C# Lab1 A Day at the Races called 方法未执行

> ID：12211793
> 
> 赞同：3
> 
> 时间：2012-08-31T08:41:41.663
> 
> 标签：c#, winforms

我创建的灰狗应用程序有问题。当我使用单选按钮选择下注的人（比如说鲍勃）并将他的赌注金额设置为 10 时，在我点击赌注时（见图 #1），以更新“鲍勃没有下任何赌注”带有 description() 方法的标签我得到一个错误（见图#2）

![图片 #1](../Images/3e7715ffbdf81c0bae515444a0414732.png)

![图片 #2](../Images/0edc67703c2de111e4c94234b3b64d14.png)

应该发生的是它说“鲍勃没有下任何赌注”，现在应该改为“鲍勃在狗 #4 上下注 10 美元。我已经确定这是失败的，因为投注者返回 NULL，但我不知道为什么会出现这种情况投注者正在引用包含投注者姓名的 Guy 类。

附带说明一下，当比赛结束时，如果 Bob 获胜，他会得到报酬，因此 PayOut() 或 Collect() 方法也不起作用。

以下是我的 3 个课程和我的 Form1.cs

**灰狗.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Drawing;
using System.Windows.Forms;

namespace A_Day_at_the_Races
{
    public class Greyhound
    {
        public int StartingPosition; //Where my PictureBox starts
        public int RacetrackLength; // How long the racetrack is
        public PictureBox MyPictureBox = null; //My PictureBox object
        public int Location = 0; // My Location on the racetrack
        public Random Randomizer; // An instance of Random

        public bool Run()
        {
            //1\. Move forward either 1,2,3 or 4 spaces at random
            int moveforward = Randomizer.Next(1, 4); // declare an int called 'moveforward' will move forward 1,2,3 or 4 spaces at random

            //2\. Update the position of my PictureBox on the form
            Point p = MyPictureBox.Location; // current location of the picture of the greyhound
            p.X += moveforward;
            MyPictureBox.Location = p;

            //3\. Return true if I won the race
            if (p.X >= RacetrackLength)
                return true;
            else
                return false;
        }

        public void TakeStartingPosition()
        {
            //Reset my location to the start line
            //MyPictureBox.Location.X = StartingPosition;

            StartingPosition = 0;
        }
    }
} 
```

**盖伊.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace A_Day_at_the_Races
{
    public class Guy
    {
        public string Name; // The guy's name
        public Bet MyBet = null; // An instance of bet() that has how much he's betting
        public int Cash; // How much cash he has
        // these last two fields are the guy's GUI controls on the form
        public RadioButton MyRadioButton; // My RadioButton
        public Label MyLabel; // My Label

        public void UpdateLabels()
        {
            //1.Set my label to my bet's description, 
            if (MyBet == null)
                MyLabel.Text = Name + " hasnt placed any bets";
            else
                MyLabel.Text = MyBet.GetDescription();

            //2.Set the label on my radio button to show my cash ("Joe has 43 dollars")
            MyRadioButton.Text = Name + " has " + Cash + " bucks";
        }

        public void ClearBet()
        {
            //1.Reset my bet so it's zero
            MyBet = null;
        }

        //1.Place a new bet and store it in my bet field
        //2.Return true if the guy had enough money to bet
        public bool PlaceBet(int Amount, int Dog)
        {
            this.MyBet = new Bet();

            if (Cash >= Amount)
            {
                Cash = Cash - Amount;
                MyLabel = new Label();
                MyBet.Amount = Amount;
                MyBet.Dog = Dog;
                UpdateLabels();
                return true;
            }
            else
            {
                return false;
            }
        }

        public void Collect(int Winner)
        {
            if (MyBet != null)
                //1.Ask my bet to pay out (hint use the bet object to do the work)
                Cash += MyBet.PayOut(Winner);
        }
    }
} 
```

**投注.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace A_Day_at_the_Races
{
    public class Bet
    {
         public int Amount; // The amount of cash that was bet
         public int Dog; // The number of the dog the bet is on
         public Guy Bettor; // The guy who placed the bet

         public string GetDescription()
         {
             if (Amount > 0)
                 return Bettor.Name + " bets " + Amount + " bucks on dog #" + Dog;
             else
                 return Bettor.Name + " hasnt placed a bet";
         }

         public int PayOut(int Winner)
         {
             if (Winner == Dog)
                 return Amount;
             else
                 return -1 * Amount;
         }
    }
} 
```

**Form1.cs**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace A_Day_at_the_Races
{
    public partial class Form1 : Form
    {
        Guy[] Bettors;
        Greyhound[] Dogs;
        Guy CurrentBettor;

        public Form1()
        {
            InitializeComponent();
            Random Randomizer = new Random();

            //initialise all my guys and dogs
            Bettors = new Guy[3];
            Dogs = new Greyhound[4];

            //guys
            Bettors[0] = new Guy();
            Bettors[0].Name = "Joe";
            Bettors[0].MyRadioButton = joeRadioButton;
            Bettors[0].MyLabel = joeBetLabel;
            Bettors[0].Cash = 50;
            Bettors[0].UpdateLabels();

            Bettors[1] = new Guy();
            Bettors[1].Name = "Bob";
            Bettors[1].MyRadioButton = bobRadioButton;
            Bettors[1].MyLabel = bobBetLabel;
            Bettors[1].Cash = 75;
            Bettors[1].UpdateLabels();

            Bettors[2] = new Guy();
            Bettors[2].Name = "Al";
            Bettors[2].MyRadioButton = alRadioButton;
            Bettors[2].MyLabel = alBetLabel;
            Bettors[2].Cash = 45;
            Bettors[2].UpdateLabels();

            int StartPosition = pictureBoxDog1.Location.X;
            int distance = pictureBox1.Width;
            for (int i = 0; i < 4; i++)
            {
                Dogs[i] = new Greyhound();
                Dogs[i].Randomizer = Randomizer;
                Dogs[i].RacetrackLength = distance;
                Dogs[i].Location = Dogs[i].StartingPosition = StartPosition;
            }

            Dogs[0].MyPictureBox = pictureBoxDog1;
            Dogs[1].MyPictureBox = pictureBoxDog2;
            Dogs[2].MyPictureBox = pictureBoxDog3;
            Dogs[3].MyPictureBox = pictureBoxDog4;

            CurrentBettor = Bettors[0];
        }

        private void RaceButton_Click(object sender, EventArgs e)
        {
            int winner = 0;
            int num_winners = 0;

            while (num_winners == 0)
            {
                for (int i = 0; i < Dogs.Length; i++)
                {
                    if (Dogs[i].Run())
                    {
                        num_winners++;
                        winner = i + 1;
                    }
                }
                Application.DoEvents();
                System.Threading.Thread.Sleep(3);
            }

            if (num_winners > 1)
                MessageBox.Show("We have " + num_winners + " winners");
            else
                MessageBox.Show(" Dog #" + winner + "wins!");

            for (int i = 0; i < Dogs.Length; i++)
            {
                Dogs[i].TakeStartingPosition();
            }

            for (int i = 0; i < Bettors.Length; i ++)
            {
                Bettors[i].Collect(winner);
                Bettors[i].ClearBet();
                Bettors[i].UpdateLabels();
            }

            numericUpDownBet.Value = numericUpDownBet.Minimum;
            numericUpDownDog.Value = numericUpDownDog.Minimum;
        }

        private void joeRadioButton_CheckedChanged(object sender, EventArgs e)
        {
            SetBettor(0);
        }

        private void bobRadioButton_CheckedChanged_1(object sender, EventArgs e)
        {
            SetBettor(1);
        }

        private void alRadioButton_CheckedChanged_1(object sender, EventArgs e)
        {
            SetBettor(2);
        }

        private void BetsButton_Click(object sender, EventArgs e)
        {
            CurrentBettor.PlaceBet((int)numericUpDownBet.Value, (int)numericUpDownDog.Value);
            CurrentBettor.UpdateLabels();
        }
        private void SetBettor(int index)
        {
            CurrentBettor = Bettors[index];
            NameLabel.Text = CurrentBettor.Name;
            if (CurrentBettor.MyBet != null)
            {
                numericUpDownBet.Value = CurrentBettor.MyBet.Amount;
                numericUpDownDog.Value = CurrentBettor.MyBet.Dog;
            }
            else
            {
                numericUpDownBet.Value = numericUpDownBet.Minimum;
                numericUpDownDog.Value = 1;
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            minimumBetLabel.Text = "Minimum Bet $5.00";
        }

        private void ResetButton_Click(object sender, EventArgs e)
        {
            pictureBoxDog1.Location = new Point(61,32);
            pictureBoxDog2.Location = new Point(61,84);
            pictureBoxDog3.Location = new Point(61,131);
            pictureBoxDog4.Location = new Point(61,181);
        }
    }
} 
```

**Form1.Designer.cs**

```
namespace A_Day_at_the_Races
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Form1));
            this.pictureBox1 = new System.Windows.Forms.PictureBox();
            this.pictureBoxDog1 = new System.Windows.Forms.PictureBox();
            this.pictureBoxDog2 = new System.Windows.Forms.PictureBox();
            this.pictureBoxDog3 = new System.Windows.Forms.PictureBox();
            this.pictureBoxDog4 = new System.Windows.Forms.PictureBox();
            this.RaceButton = new System.Windows.Forms.Button();
            this.minimumBetLabel = new System.Windows.Forms.Label();
            this.joeRadioButton = new System.Windows.Forms.RadioButton();
            this.bobRadioButton = new System.Windows.Forms.RadioButton();
            this.alRadioButton = new System.Windows.Forms.RadioButton();
            this.BetsLabel = new System.Windows.Forms.Label();
            this.joeBetLabel = new System.Windows.Forms.Label();
            this.bobBetLabel = new System.Windows.Forms.Label();
            this.alBetLabel = new System.Windows.Forms.Label();
            this.NameLabel = new System.Windows.Forms.Label();
            this.BetsButton = new System.Windows.Forms.Button();
            this.numericUpDownBet = new System.Windows.Forms.NumericUpDown();
            this.label1 = new System.Windows.Forms.Label();
            this.numericUpDownDog = new System.Windows.Forms.NumericUpDown();
            this.ResetButton = new System.Windows.Forms.Button();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBoxDog1)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBoxDog2)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBoxDog3)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBoxDog4)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.numericUpDownBet)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.numericUpDownDog)).BeginInit();
            this.SuspendLayout();
            // 
            // pictureBox1
            // 
            this.pictureBox1.Image = ((System.Drawing.Image)(resources.GetObject("pictureBox1.Image")));
            this.pictureBox1.Location = new System.Drawing.Point(12, 12);
            this.pictureBox1.Name = "pictureBox1";
            this.pictureBox1.Size = new System.Drawing.Size(602, 201);
            this.pictureBox1.TabIndex = 0;
            this.pictureBox1.TabStop = false;
            // 
            // pictureBoxDog1
            // 
            this.pictureBoxDog1.Image = ((System.Drawing.Image)(resources.GetObject("pictureBoxDog1.Image")));
            this.pictureBoxDog1.Location = new System.Drawing.Point(22, 21);
            this.pictureBoxDog1.Name = "pictureBoxDog1";
            this.pictureBoxDog1.Size = new System.Drawing.Size(75, 21);
            this.pictureBoxDog1.TabIndex = 1;
            this.pictureBoxDog1.TabStop = false;
            // 
            // pictureBoxDog2
            // 
            this.pictureBoxDog2.Image = ((System.Drawing.Image)(resources.GetObject("pictureBoxDog2.Image")));
            this.pictureBoxDog2.Location = new System.Drawing.Point(22, 70);
            this.pictureBoxDog2.Name = "pictureBoxDog2";
            this.pictureBoxDog2.Size = new System.Drawing.Size(75, 22);
            this.pictureBoxDog2.TabIndex = 2;
            this.pictureBoxDog2.TabStop = false;
            // 
            // pictureBoxDog3
            // 
            this.pictureBoxDog3.Image = ((System.Drawing.Image)(resources.GetObject("pictureBoxDog3.Image")));
            this.pictureBoxDog3.Location = new System.Drawing.Point(22, 120);
            this.pictureBoxDog3.Name = "pictureBoxDog3";
            this.pictureBoxDog3.Size = new System.Drawing.Size(75, 24);
            this.pictureBoxDog3.TabIndex = 3;
            this.pictureBoxDog3.TabStop = false;
            // 
            // pictureBoxDog4
            // 
            this.pictureBoxDog4.Image = ((System.Drawing.Image)(resources.GetObject("pictureBoxDog4.Image")));
            this.pictureBoxDog4.Location = new System.Drawing.Point(22, 170);
            this.pictureBoxDog4.Name = "pictureBoxDog4";
            this.pictureBoxDog4.Size = new System.Drawing.Size(75, 24);
            this.pictureBoxDog4.TabIndex = 4;
            this.pictureBoxDog4.TabStop = false;
            // 
            // RaceButton
            // 
            this.RaceButton.Location = new System.Drawing.Point(468, 269);
            this.RaceButton.Name = "RaceButton";
            this.RaceButton.Size = new System.Drawing.Size(146, 73);
            this.RaceButton.TabIndex = 5;
            this.RaceButton.Text = "Race!";
            this.RaceButton.UseVisualStyleBackColor = true;
            this.RaceButton.Click += new System.EventHandler(this.RaceButton_Click);
            // 
            // minimumBetLabel
            // 
            this.minimumBetLabel.AutoSize = true;
            this.minimumBetLabel.Font = new System.Drawing.Font("Microsoft Sans Serif", 8.25F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.minimumBetLabel.Location = new System.Drawing.Point(9, 241);
            this.minimumBetLabel.Name = "minimumBetLabel";
            this.minimumBetLabel.Size = new System.Drawing.Size(0, 13);
            this.minimumBetLabel.TabIndex = 6;
            // 
            // joeRadioButton
            // 
            this.joeRadioButton.AutoSize = true;
            this.joeRadioButton.Location = new System.Drawing.Point(12, 269);
            this.joeRadioButton.Name = "joeRadioButton";
            this.joeRadioButton.Size = new System.Drawing.Size(85, 17);
            this.joeRadioButton.TabIndex = 7;
            this.joeRadioButton.TabStop = true;
            this.joeRadioButton.Text = "radioButton1";
            this.joeRadioButton.UseVisualStyleBackColor = true;
            this.joeRadioButton.CheckedChanged += new System.EventHandler(this.joeRadioButton_CheckedChanged);
            // 
            // bobRadioButton
            // 
            this.bobRadioButton.AutoSize = true;
            this.bobRadioButton.Location = new System.Drawing.Point(12, 293);
            this.bobRadioButton.Name = "bobRadioButton";
            this.bobRadioButton.Size = new System.Drawing.Size(85, 17);
            this.bobRadioButton.TabIndex = 8;
            this.bobRadioButton.TabStop = true;
            this.bobRadioButton.Text = "radioButton1";
            this.bobRadioButton.UseVisualStyleBackColor = true;
            this.bobRadioButton.CheckedChanged += new System.EventHandler(this.bobRadioButton_CheckedChanged_1);
            // 
            // alRadioButton
            // 
            this.alRadioButton.AutoSize = true;
            this.alRadioButton.Location = new System.Drawing.Point(12, 317);
            this.alRadioButton.Name = "alRadioButton";
            this.alRadioButton.Size = new System.Drawing.Size(85, 17);
            this.alRadioButton.TabIndex = 9;
            this.alRadioButton.TabStop = true;
            this.alRadioButton.Text = "radioButton2";
            this.alRadioButton.UseVisualStyleBackColor = true;
            this.alRadioButton.CheckedChanged += new System.EventHandler(this.alRadioButton_CheckedChanged_1);
            // 
            // BetsLabel
            // 
            this.BetsLabel.AutoSize = true;
            this.BetsLabel.Font = new System.Drawing.Font("Microsoft Sans Serif", 8.25F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.BetsLabel.Location = new System.Drawing.Point(164, 241);
            this.BetsLabel.Name = "BetsLabel";
            this.BetsLabel.Size = new System.Drawing.Size(32, 13);
            this.BetsLabel.TabIndex = 10;
            this.BetsLabel.Text = "Bets";
            // 
            // joeBetLabel
            // 
            this.joeBetLabel.AutoSize = true;
            this.joeBetLabel.Location = new System.Drawing.Point(164, 269);
            this.joeBetLabel.Name = "joeBetLabel";
            this.joeBetLabel.Size = new System.Drawing.Size(35, 13);
            this.joeBetLabel.TabIndex = 11;
            this.joeBetLabel.Text = "label1";
            // 
            // bobBetLabel
            // 
            this.bobBetLabel.AutoSize = true;
            this.bobBetLabel.Location = new System.Drawing.Point(164, 293);
            this.bobBetLabel.Name = "bobBetLabel";
            this.bobBetLabel.Size = new System.Drawing.Size(35, 13);
            this.bobBetLabel.TabIndex = 12;
            this.bobBetLabel.Text = "label1";
            // 
            // alBetLabel
            // 
            this.alBetLabel.AutoSize = true;
            this.alBetLabel.Location = new System.Drawing.Point(164, 317);
            this.alBetLabel.Name = "alBetLabel";
            this.alBetLabel.Size = new System.Drawing.Size(35, 13);
            this.alBetLabel.TabIndex = 13;
            this.alBetLabel.Text = "label1";
            // 
            // NameLabel
            // 
            this.NameLabel.AutoSize = true;
            this.NameLabel.Location = new System.Drawing.Point(9, 359);
            this.NameLabel.Name = "NameLabel";
            this.NameLabel.Size = new System.Drawing.Size(0, 13);
            this.NameLabel.TabIndex = 14;
            // 
            // BetsButton
            // 
            this.BetsButton.Location = new System.Drawing.Point(54, 354);
            this.BetsButton.Name = "BetsButton";
            this.BetsButton.Size = new System.Drawing.Size(75, 23);
            this.BetsButton.TabIndex = 15;
            this.BetsButton.Text = "Bets";
            this.BetsButton.UseVisualStyleBackColor = true;
            this.BetsButton.Click += new System.EventHandler(this.BetsButton_Click);
            // 
            // numericUpDownBet
            // 
            this.numericUpDownBet.Location = new System.Drawing.Point(135, 357);
            this.numericUpDownBet.Minimum = new decimal(new int[] {
            5,
            0,
            0,
            0});
            this.numericUpDownBet.Name = "numericUpDownBet";
            this.numericUpDownBet.Size = new System.Drawing.Size(72, 20);
            this.numericUpDownBet.TabIndex = 16;
            this.numericUpDownBet.Value = new decimal(new int[] {
            5,
            0,
            0,
            0});
            // 
            // label1
            // 
            this.label1.AutoSize = true;
            this.label1.Location = new System.Drawing.Point(214, 359);
            this.label1.Name = "label1";
            this.label1.Size = new System.Drawing.Size(113, 13);
            this.label1.TabIndex = 17;
            this.label1.Text = "bucks on dog number ";
            // 
            // numericUpDownDog
            // 
            this.numericUpDownDog.Location = new System.Drawing.Point(334, 356);
            this.numericUpDownDog.Maximum = new decimal(new int[] {
            4,
            0,
            0,
            0});
            this.numericUpDownDog.Minimum = new decimal(new int[] {
            1,
            0,
            0,
            0});
            this.numericUpDownDog.Name = "numericUpDownDog";
            this.numericUpDownDog.Size = new System.Drawing.Size(79, 20);
            this.numericUpDownDog.TabIndex = 18;
            this.numericUpDownDog.Value = new decimal(new int[] {
            1,
            0,
            0,
            0});
            // 
            // ResetButton
            // 
            this.ResetButton.Location = new System.Drawing.Point(468, 349);
            this.ResetButton.Name = "ResetButton";
            this.ResetButton.Size = new System.Drawing.Size(146, 41);
            this.ResetButton.TabIndex = 19;
            this.ResetButton.Text = "Reset";
            this.ResetButton.UseVisualStyleBackColor = true;
            this.ResetButton.Click += new System.EventHandler(this.ResetButton_Click);
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(626, 410);
            this.Controls.Add(this.ResetButton);
            this.Controls.Add(this.numericUpDownDog);
            this.Controls.Add(this.label1);
            this.Controls.Add(this.numericUpDownBet);
            this.Controls.Add(this.BetsButton);
            this.Controls.Add(this.NameLabel);
            this.Controls.Add(this.alBetLabel);
            this.Controls.Add(this.bobBetLabel);
            this.Controls.Add(this.joeBetLabel);
            this.Controls.Add(this.BetsLabel);
            this.Controls.Add(this.alRadioButton);
            this.Controls.Add(this.bobRadioButton);
            this.Controls.Add(this.joeRadioButton);
            this.Controls.Add(this.minimumBetLabel);
            this.Controls.Add(this.RaceButton);
            this.Controls.Add(this.pictureBoxDog4);
            this.Controls.Add(this.pictureBoxDog3);
            this.Controls.Add(this.pictureBoxDog2);
            this.Controls.Add(this.pictureBoxDog1);
            this.Controls.Add(this.pictureBox1);
            this.Name = "Form1";
            this.Text = "Form1";
            this.Load += new System.EventHandler(this.Form1_Load);
            ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBoxDog1)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBoxDog2)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBoxDog3)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBoxDog4)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.numericUpDownBet)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.numericUpDownDog)).EndInit();
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        #endregion

        private System.Windows.Forms.PictureBox pictureBox1;
        private System.Windows.Forms.PictureBox pictureBoxDog1;
        private System.Windows.Forms.PictureBox pictureBoxDog2;
        private System.Windows.Forms.PictureBox pictureBoxDog3;
        private System.Windows.Forms.PictureBox pictureBoxDog4;
        private System.Windows.Forms.Button RaceButton;
        private System.Windows.Forms.Label minimumBetLabel;
        private System.Windows.Forms.RadioButton joeRadioButton;
        private System.Windows.Forms.RadioButton bobRadioButton;
        private System.Windows.Forms.RadioButton alRadioButton;
        private System.Windows.Forms.Label BetsLabel;
        private System.Windows.Forms.Label joeBetLabel;
        private System.Windows.Forms.Label bobBetLabel;
        private System.Windows.Forms.Label alBetLabel;
        private System.Windows.Forms.Label NameLabel;
        private System.Windows.Forms.Button BetsButton;
        private System.Windows.Forms.NumericUpDown numericUpDownBet;
        private System.Windows.Forms.Label label1;
        private System.Windows.Forms.NumericUpDown numericUpDownDog;
        private System.Windows.Forms.Button ResetButton;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:45:06.987

在`PlaceBet`您忘记设置 Bettor 属性的方法中：

```
 if (Cash >= Amount)
            {
                Cash = Cash - Amount;
                MyLabel = new Label();
                MyBet.Amount = Amount; // HERE
                MyBet.Dog = Dog; // HERE
                UpdateLabels();
                return true; 
```

只需添加一行：

```
 MyBet.Bettor = this; 
```

解释/理由：关键是没有它，当一个“家伙”创建一个“赌注”时，赌注不会知道是谁创造了它。您在代码中的任何地方都没有设置 Bettor 字段，因此它永远没有机会被设置为有意义的东西。投注将仅在此字段中保留默认的 NULL 值。由于我实际上并没有阅读/跟踪所有代码，我认为最简单的方法是让 Bet 从一开始就直接了解他的所有者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:48:06.453

在 Guy.cs 中，当您调用 PlaceBet(...) 并创建实例化赌注时，您需要设置：

```
this.MyBet.Bettor = this; 
```

在此函数中，`this`指的是下注的 Guy 实例。

您遇到的第二个问题是创建 的新实例`Label`，而实际上并没有用新的标签替换表单上的标签。总之，`PlaceBet(...)`像这样修复方法：

```
public bool PlaceBet(int Amount, int Dog)
{
    this.MyBet = new Bet();

    if (Cash >= Amount)
    {
        Cash = Cash - Amount;

        // remove the following line
        // MyLabel = new Label();

        MyBet.Amount = Amount;
        MyBet.Dog = Dog;

        // insert this line...
        MyBet.Bettor = this;

        UpdateLabels();
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-12T22:41:57.670

我刚刚在书中自己进行了这个练习......一直在运行它。我查看了你的代码，看看你是如何解决这个问题的，我发现你如何处理支付更好的人的一个很大的错误 - 在 form1.cs 中，当你允许你的循环捕获多个获胜者时，你不会继续分配奖金使用 Collect 方法对除*最后一只获胜狗*之外的任何人下注

 *```
while (num_winners == 0)
        {
            for (int i = 0; i < Dogs.Length; i++)
            {
                if (Dogs[i].Run())
                {
                    num_winners++;
                    winner = i + 1;
                }
            }
            Application.DoEvents();
            System.Threading.Thread.Sleep(3);
        }

        if (num_winners > 1)
 // you say that you have multiple winners right here but you never eval on 
 //it - winner is still set to one value above
            MessageBox.Show("We have " + num_winners + " winners"); 
        else
            MessageBox.Show(" Dog #" + winner + "wins!");

        for (int i = 0; i < Dogs.Length; i++)
        {
            Dogs[i].TakeStartingPosition();
        }

        for (int i = 0; i < Bettors.Length; i ++)
        {
            Bettors[i].Collect(winner);
            Bettors[i].ClearBet();
            Bettors[i].UpdateLabels();
        } 
```

需要更改哪些内容以纠正此问题并适当分散赌注：

1) 使投注方案更现实 - 下注时 - 减去钱。您需要允许重新投注，以防有人想重做首页上的某个用户

```
in guy.cs
    public bool PlaceBet(int amount, int dog)
    {
        // place a new bet and store it in the bet field, return true if there is enough money
        if (amount > Cash)
        {
            MessageBox.Show("I don't have enough money for that bet!", Name + " says...");
            return false;
        }
        else
        {
            if (this.MyBet == null)
            {
                this.MyBet = new Bet() { Amount = amount, Bettor = this, Dog = dog };
                this.Cash -= amount;
                this.UpdateLabels();
                return true;
            }
            else
            {
                this.Cash += this.MyBet.Amount;
                this.MyBet = null;
                this.MyBet = new Bet() { Amount = amount, Bettor = this, Dog = dog };
                this.Cash -= amount;
                this.UpdateLabels();
                return true;
            }
        }
    } 
```

2) 现在更好的人已经输掉/提交了他们的钱，如果他们的狗没有赢，我们不必担心向他们发送负数，Bet.cs 支付方法可以更新为仅在以下情况下提供正回报获胜的狗匹配他们的下注狗。如果没有，它什么也不返回。

```
 public int PayOut(int Winner)
    {
        // the parameter is the winner of the race. If the dog won, return the amount bet.
        // otherwise return nothing

        if (Winner == Dog)
        {
            int payout = Amount*2;
            return payout;
        }
        else
        {
            int payout = 0;
            return payout;
        }        
    } 
```

3）现在我们可以在 form1.cs 中调整我们的方案来处理支付倍数（即使这从未真正发生过）

```
private void formButtonRace_Click(object sender, EventArgs e)
    {
        int winner = 0;
        int windog = 0;
        int count = 0;
        for (int i = 0; i < Bettors.Length; i++)
        {
            if (Bettors[1].MyBet != null)
            {
                count++;
            }
        }

        if (count == Bettors.Length)
        {
            while (winner == 0)
            {
                for (int i = 0; i < Dogs.Length; i++)
                {
                    if (Dogs[i].Run())
                    {
                        winner++;
                        windog = i + 1;
                        for (int i2 = 0; i2 < Bettors.Length; i2++)
                        {
                            Bettors[i2].Collect(i + 1);
                        }
                    }
                    Application.DoEvents();
                    System.Threading.Thread.Sleep(3);
                }
            }
            if (winner > 1)
            {
                MessageBox.Show("Multiple winners!", "WOW");
            }
            else
            {
                MessageBox.Show("The winner was dog #" + windog);
            }
            for (int i = 0; i < Bettors.Length; i++)
            {
                Bettors[i].ClearBet(true);
            }
            for (int i = 0; i < Dogs.Length; i++)
            {
                Dogs[i].TakeStartingPosition();
            }
        }
        else
        {
            MessageBox.Show("Not all players have placed their bets!", "Wait wait!");
        }
    } 
```

我的 ClearBet 传递布尔值的原因是，如果按下重置按钮，我必须恢复每个 Guy 的赌注。但是，如果比赛结束，我想重置它们而不返回他们的赌注。

这是我的代码中的那个部分：

```
public void ClearBet(bool isRaceOver)
    {
        if (isRaceOver)
        // reset bet when race is over
        {
            MyBet = null;                
        }
        else
        {
            if (this.MyBet != null)
            {
                Cash += this.MyBet.Amount;
                this.MyBet = null;                 
            }
            else
            {
                this.MyBet = null;
            }                 
        }
        UpdateLabels();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T12:16:20.333

在 PlaceBet() 方法中，您正在用新的 Label() 覆盖 MyLabel，因此表单上标签的原始上下文丢失了。

尽管您实际上是在更新标签，但它不是表单上的标签。

```
public bool PlaceBet(int Amount, int Dog)
        {
            this.MyBet = new Bet();

            if (Cash >= Amount)
            {
                Cash = Cash - Amount;
                MyLabel = new Label(); // remove this
                MyBet.Amount = Amount;
                MyBet.Dog = Dog;
                UpdateLabels();
                return true;
            }
            else
            {
                return false;
            }
        } 
```*

# php - 通过 PHP 在邮件中发送时链接 URL 库消失

> ID：12211797
> 
> 赞同：1
> 
> 时间：2012-08-31T08:41:50.740
> 
> 标签：php, jquery, html, ajax, email

每当我通过 PHP（由 jQuery、AJAX 到 PHP 生成的内容）发送邮件`POST`时，到达目的地时 URL 的基础就会丢失。

例如，我发送一封包含以下正文的邮件：

```
Click <a href="http://www.example.com/?u=parameter&i=otherparameter">HERE</a> to go to the login page, etc, etc..

Use this link or copy it to your browser's address bar if the above doesn't work:
<a href="http://www.example.com/?u=parameter&i=otherparameter">http://www.example.com/?u=parameter&i=otherparameter</a> 
```

看起来像这样：

*点击[这里](http://www.example.com/?u=parameter&i=otherparameter)进入登录页面等等。*

*如果上述方法不起作用，请使用此链接或将其复制到浏览器的地址栏： [http ://www.example.com/?u=parameter&i=otherparameter](http://www.example.com/?u=parameter&i=otherparameter)*

**但是**，接收者得到*相同*的文本，只是没有链接的基本 URL。

的链接`Click HERE`只有 的 URL，`/?u=parameter&i=otherparameter`其他链接也是如此，但该链接的文本很好。所以它会转到打开邮件的页面并在那里附加参数。它看起来像这样：

*点击[这里](/?u=parameter&i=otherparameter)进入登录页面等等。*

*如果上述方法不起作用，请使用此链接或将其复制到浏览器的地址栏： [http ://www.example.com/?u=parameter&i=otherparameter](/?u=parameter&i=otherparameter)*

如您所见，链接将被定向到`stackoverflow.com`，而不是`example.com`。jQuery、AJAX 或 PHP 剥离了我的 HTML 是怎么回事，还是客户端问题？

（在 FF15/Chrome20/IE8、jQuery v1.7.2、PHP v5.3.5 中测试）

* * *

**编辑**

这就是我使用 PHP 发送邮件的方式：

```
$to      = $_POST['t'];
$subject = $_POST['s'];
$message = $_POST['m'];

$headers = "MIME-Version: 1.0" . "\r\n" . 
           "Content-type: text/html; charset=iso-8859-1" . "\r\n" . 
           "From: <noreply@example.com>" . "\r\n" .
           "X-Mailer: PHP/" . phpversion();

mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:53:29.893

一个快速的解决方案是使用定义基本 url 和 _SERVER 全局数组阅读 php 手册中的文档以获取更多信息。但是邮件功能不应该失败......还有 AJAX 在邮件发布中的作用......那就是 php mail() 函数。您是从用户那里检索值还是使用 php 或数据库动态检索的值....

# c# - 如何强制二进制应用程序使用 C# 工具中的 SOCKS 代理？

> ID：12211798
> 
> 赞同：6
> 
> 时间：2012-08-31T08:41:52.077
> 
> 标签：c#, sockets, networking, proxy, socks

我目前正在考虑开发一个类似sockscap 的工具，它具有一些很酷的新功能和一个不错的WPF gui。

对于那些不记得的人：SocksCap 是一个工具，它允许您使用任何使用 SOCKS4/5 代理的应用程序...例如，您可以使用另一个 IP 玩游戏，而无需使用 VNC 等。

然而，我不是一个网络人，所以我喜欢一些关于如何从 Windows 环境中的外部应用程序“socksify / proxify”的输入。由于这应该是一个项目，而不是“快速而肮脏”的东西，我只喜欢“干净和通用”的方法，而不是“修改 HOSTS 条目”或“每个应用程序的插件”......

那么，具有网络编程知识的人如何开始研究通过代理重定向（路由？）应用程序流量？

谢谢你的帮助 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:57:25.600

谷歌总是有帮助的。

windows下有类似socksify的东西：

[FreeCap](http://www.freecap.ru/eng/?p=whatis) - 是一个透明重定向连接程序通过 SOCKS 服务器的程序。事实上，有些程序没有原生的 SOCKS 支持（例如 Internet Explorer），在这种情况下，FreeCap 会很有帮助，通过 SOCKS 服务器透明地重定向所有连接请求。

内部实现似乎劫持了客户端应用程序的套接字调用。

# objective-c - MPMoviePlayerController 无法播放某些 3gp 格式的视频

> ID：12211802
> 
> 赞同：2
> 
> 时间：2012-08-31T08:42:12.670
> 
> 标签：objective-c, ios, video, avfoundation, avplayer

我使用 MPMoviePlayerViewController 播放格式为 3gp 的视频。有的视频可以播放，有的不能播放。MPMoviePlayerViewController 将立即加载并结束，就像视频是 0 秒持续时间一样。我认为视频一定有问题。但是我用的是相册里面的iphone的视频播放器，它可以播放视频！所以我认为 MPMoviePlayerViewController 可能并不强大。我想尝试使用 avfoundation 框架 avplayer 播放视频。在我的内容视图中添加一个子层。失败了..这让我发疯！有人遇到过一些问题吗？

这是我的代码

```
-(void) playMovieWithSDK: (NSURL*) movieUrl
{
if ([[[UIDevice currentDevice] systemVersion] doubleValue] >= 3.2) {
    MPMoviePlayerViewController *mSdk4Player = [[MPMoviePlayerViewController alloc] initWithContentURL:movieUrl];
    mSdk4Player.navigationController.navigationBar.tag = 1000;
    if (mSdk4Player) {
        [self presentMoviePlayerViewControllerAnimated:mSdk4Player];
        mSdk4Player.moviePlayer.scalingMode= MPMovieScalingModeAspectFit;
        mSdk4Player.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
        mSdk4Player.moviePlayer.shouldAutoplay = YES;
        [mSdk4Player release];

        [[NSNotificationCenter defaultCenter]addObserver: self
                                                selector: @selector(movieFinishedCallback:)
                                                    name: MPMoviePlayerPlaybackDidFinishNotification
                                                  object: mSdk4Player.moviePlayer];
    }
}
else if ([[[UIDevice currentDevice] systemVersion] doubleValue] < 3.2) { // sdk 3.0 播放器
    MPMoviePlayerController* mSdk3player = [[MPMoviePlayerController alloc] initWithContentURL: movieUrl];
    mSdk3player.scalingMode = MPMovieScalingModeAspectFit;
    [[NSNotificationCenter defaultCenter]addObserver: self
                                            selector: @selector(movieFinishedCallback:)
                                                name: MPMoviePlayerPlaybackDidFinishNotification
                                              object: mSdk3player];
    [mSdk3player play];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:15:03.707

您尝试播放的视频可能与 MPMoviePlayerController 支持的基本编解码器不兼容。

根据[文档](http://developer.apple.com/library/IOs/documentation/MediaPlayer/Reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006953-CH3-SW20)：

此类播放 iOS 支持的任何电影或音频文件。这包括流式内容和固定长度文件。对于电影文件，这通常意味着扩展名为 .mov、.mp4、.mpv 和 .3gp 并使用以下压缩标准之一的文件：

*   H.264 Baseline Profile Level 3.0 视频，在 30 fps 时高达 640 x 480。（基线配置文件不支持 B 帧。）

*   MPEG-4 第 2 部分视频（简单配置文件）

如果您使用此类播放音频文件，它会在播放音频时显示带有 QuickTime 徽标的白屏。对于音频文件，此类支持最高 48 kHz 的 AAC-LC 音频和最高 48 kHz 的 MP3（MPEG-1 音频层 3）立体声音频。

# php - 在另一个 php 页面中发布输入表单数组

> ID：12211804
> 
> 赞同：0
> 
> 时间：2012-08-31T08:42:17.307
> 
> 标签：php

我有这段代码允许我打印多个日期，所以这是表格，其中填充了用逗号分隔的日期，如 19/02/1990、12/12/1220 等。

现在，我需要做的是将它们保存在一个数组中，然后打印该数组！

目前我有这个代码，你能帮我吗？谢谢！

```
<form action="insert_date.php" method="post">    
<div id="with-altField"></div>
<input type="text" id="altField" name="altField">
</div>
<input type="submit" value="Submit" />
</form> 
```

如果我选择了多个日期，这不起作用，但如果我选择一个，它会起作用，这就是为什么我需要以数组形式保存它！

插入日期.php

```
<?php
$date=$_POST['altField'];
echo $date;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:46:50.527

```
$dates = explode(",", $_POST['altField']);
foreach($dates as $date){
    echo htmlentities($date, ENT_QUOTES, 'utf-8') . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:45:46.943

试试这个

```
<?php
    $dates      =  $_POST['altField'];
    $arrOfDates = explode(',', $dates);
    var_dump($arrOfDates);
    foreach($arrOfDates as $date)
    {
       echo $date;
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:43:47.743

你`insert_date.php`可以爆炸`,`

```
<?php
    $date=$_POST['altField'];
    $explode = explode(',', $date);
?> 
```

然后你可以`foreach`用来解析你的日期

```
<?php
    foreach($explode as $date){
        echo trim($date);
    }
?> 
```

# c++ - 如何获取 boost::interprocess::managed_shared_memory 的名称

> ID：12211805
> 
> 赞同：1
> 
> 时间：2012-08-31T08:42:17.647
> 
> 标签：c++, get, shared-memory, boost-interprocess

我创建了一个`managed_shared_memory`具有名称和大小的对象。之后，我想再次获得这个名字。我该怎么做呢？我希望会有类似`get_name`或类似的功能，但我找不到。

```
#include <boost/interprocess/managed_shared_memory.hpp>

int main()
{
   using namespace boost::interprocess;
   managed_shared_memory shm(open_or_create,"MySharedMemory", 65536);

   // The problem how the get the name out of the 
   std::string name = shm.get_name(); // does not exist
   std::string name = shm.get_device().get_name(); // is not accessible

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T13:39:10.820

我将 managed_shared_memory 子类化并将名称保存在成员变量中。

```
class my_shared_memory : public managed_shared_memory {
private:
    const char* name;
public:
    my_shared_memory(open_or_create_t t, const char *name, size_type size);
    const char* get_name() { return name; }
};

my_shared_memory::my_shared_memory(open_or_create_t t, const char* name, size_type size) 
    : managed_shared_memory(t, name, size)
    , name(name) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-02T07:56:24.323

您可以通过`managed_shared_memory shm`这种方式访问​​您的名称：

```
shm.named_begin()->name(); 
```

（不过我同意，这是违反直觉的，并且很难找到它，因为我正在寻找一个吸气剂。）

**编辑**

我很难让它在你的样本中工作，这很奇怪，因为我在其他地方使用它并且它似乎工作。可能还有更多的东西。

# symfony - KhepinYamlFixturesBundle 给出致命错误：调用未定义的方法 Symfony\Bundle\DoctrineBundle\Registry::getManager()

> ID：12211806
> 
> 赞同：2
> 
> 时间：2012-08-31T08:42:27.410
> 
> 标签：symfony, doctrine-orm, fixtures

我已经安装了 [KhepinYamlFixturesBundle][1] Symfony 2.0.16 来加载固定装置，但是当我运行时

```
php app/console khepin:yamlfixtures:load 
```

我收到此错误：

> 致命错误：在第 138 行调用 D:\public_html\s2\trunk\src\Khepin\YamlFixturesBundle\Loader\YamlLoader.php 中未定义的方法 Symfony\Bundle\DoctrineBundle\Registry::getManager()

有解决方法吗？

**编辑：**

我也试过 Symfony 2.1。成功安装 Symfony 2.1 和教义-fixtures-bundle 后，我运行：

`php composer.phar update khepin/yaml-fixtures-bundle`

它说：

`Updating dependencies` `Your requirements could not be resolved to an installable set of packages.`

`Problem 1`

```
- Installation request for khepin/yaml-fixtures-bundle dev-master -> satisfiable by khepin/yaml-fixtures-bundle dev-master.

- Conclusion: don't install doctrine/doctrine-fixtures-bundle v2.1.0-ALPHA

- Conclusion: remove doctrine/doctrine-fixtures-bundle dev-master

- khepin/yaml-fixtures-bundle dev-master requires doctrine/doctrine-fixtures-bundle 2.* -> satisfiable by 
  doctrine/doctrine-fixtures-bundle v2.0.0, doctrine/doctrine-fixtures-bundle v2.0.1, 
  doctrine/doctrine-fixtures-bundle v2.1.0-ALPHA, doctrine/doctrine-fixtures-bundle 2.0.x-dev.

- Can only install one of: doctrine/doctrine-fixtures-bundle dev-master, doctrine/doctrine-fixtures-bundle v2.0.0.

- Can only install one of: doctrine/doctrine-fixtures-bundle dev-master, doctrine/doctrine-fixtures-bundle v2.0.1.

- Can only install one of: doctrine/doctrine-fixtures-bundle dev-master, doctrine/doctrine-fixtures-bundle 2.0.x-dev.

- Installation request for doctrine/doctrine-fixtures-bundle dev-master -> satisfiable by doctrine/doctrine-fixtures-bundle dev-master. 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:33:20.640

对于 2.1，捆绑包需要版本为“2.”的固定装置捆绑包*。由于作曲家最近将“最低稳定性”切换为“稳定”，因此 2.*和 dev-master 不再等价。

如果你真的需要“dev-master”，你可以使用：

```
require: {
    "khepin/yaml-fixtures-bundle": "dev-master as 2.1.0"
    ...
} 
```

例如。

更新：

我推送了代码，现在应该用旧版本的 Doctrine 来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:52:06.363

这是一个已知的错误：[https ://github.com/khepin/KhepinYamlFixturesBundle/issues/14](https://github.com/khepin/KhepinYamlFixturesBundle/issues/14)

如果可以的话，你应该尝试使用 Symfony 2.1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T12:14:12.953

我在`"dev-master"`Symfony 2.1 中使用了学说夹具捆绑包：

```
 `"doctrine/doctrine-fixtures-bundle": "dev-master"` 
```

KhepinYamlFixturesBundle 不支持。

一旦我将其更改为`"doctrine/doctrine-fixtures-bundle": "v2.1.0-ALPHA"`在我的`composer.json`文件中，它安装得很好

# php - cakephp 表格有 3 个模型

> ID：12211808
> 
> 赞同：1
> 
> 时间：2012-08-31T08:42:34.417
> 
> 标签：php, cakephp-2.0

我在 cakephp (v2) 上工作，我想创建一个与 3 个表相关的表单：

任务--1,n--1,1--quiz_questions--1,n--1,1--quiz_answers

模型任务：

```
class Task extends AppModel {
    public $name = 'Task';
    public $hasMany = 'QuizQuestion';

    public $_schema = array(
        'type' => array(
            'type' => 'tinyint'
        ),
        'level' => array(
            'type' => 'tinyint'
        ),
        'date_availability' => array(
            'type' => 'timestamp'
        ),
        'date_end_availability' => array(
            'type' => 'timestamp'
        ),
        'date_accomplishment' => array(
            'type' => 'timestamp'
        ),
        'title' => array(
            'type' => 'string'
        ),
         'description' => array(
            'type' => 'string'
        )
    );

    public $validate = array(
        'type' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'required'   => true,
                'allowEmpty' => false,
            )
        ), ..............etc

    ); 
```

模型测验问题：

```
<?php
App::uses('AppModel', 'Model');

class QuizQuestion extends AppModel {
    public $name = 'QuizQuestion';
    public $hasMany = 'QuizAnswer';
    public $belongsTo = 'Task';

    public $_schema = array(
        'title' => array(
            'type' => 'string'
        )
    );

      etc..
}
?> 
```

模型测验答案

```
<?php
App::uses('AppModel', 'Model');

    class QuizAnswer extends AppModel {
        public $name = 'QuizAnswer';
        public $belongsTo = 'QuizQuestion' ;

        public $_schema = array(
            'title' => array(
                'type' => 'string'
            )
        );
          ...etc....
    }
    ?> 
```

任务控制器主页（）

```
 public function home() {
            if ($this->request->is('post')) {
                $this->Task->create(false);              

                $this->Task->set($this->request->data);

                $valid = $this->Task->validates();

                /*debug($this->Task);
                exit();*/

                if ($valid) {

                        $r = $this->Task->saveAll($this->request->data['Task']);
                        debug($this->request->data['Task']);
                        if (!$r) {
                            $this->Session->setFlash(
                                    __('INTERNAL_ERROR (%s)', __LINE__), 'flash_error');
                        } else {
                            $this->Session->setFlash(
                                    __('Mission enregistré.'), 'flash_success');

                            $this->redirect(array(
                                'controller' => 'tasks',
                                'action' => 'home'
                            ));
                        }
                }
 else {
                             $this->Session->setFlash( __('pas bon'), 'flash_error');    

 }
            }
    } 
```

和形式：

```
 echo $this->Form->create('Task', $formOptions);
    ?>

    <fieldset>
        <?php

        /*** ETC ***/

        $formLabel['text'] = __('Titre du Quizz');
        echo $this->Form->input('title', array(
            'label' => $formLabel,
            'class' => 'input-xxlarge'
        ));

        $formLabel['text'] = __('Libelle question %u');
            echo $this->Form->input('Task.QuizQuestion.0.title', array(
                'label' => $formLabel,
                'class' => 'input-xxlarge '
            ));
            $formLabel['text'] = __(('0') . ' - ');
            echo $this->Form->input('Task.QuizQuestion.0.QuizAnswer.0.title', array(
                'label' => $formLabel,
                'class' => 'span8'
            ));
        ?>
    </fieldset>

    <div class="form-actions">
<?php
echo $this->Form->button(
        '<i class="icon-white icon-ok"></i> ' .
        __('Publier'), array(
    'escape' => false,
    'class' => 'btn btn-success',
    'div' => null
        )
);
?>
    </div>
        <?php echo $this->Form->end(); ?> 
```

'title' 和 'Task.QuizQuestion.0.title' 被插入到数据库中，但 'Task.QuizQuestion.0.QuizAnswer.0.title' 没有。

调试($this->request->data['Task']);

```
array(
    'type' => '1',
    'level' => '1',
    'date_availability' => array(
        'day' => '17',
        'month' => '08',
        'year' => '2012',
        'hour' => '00',
        'min' => '00'
    ),
    'date_end_availability' => array(
        'day' => '18',
        'month' => '08',
        'year' => '2012',
        'hour' => '00',
        'min' => '00'
    ),
    'date_accomplishment' => array(
        'day' => '18',
        'month' => '08',
        'year' => '2012',
        'hour' => '00',
        'min' => '00'
    ),
    'title' => 'ju',
    'description' => 'ji',
    'QuizQuestion' => array(
        (int) 0 => array(
            'title' => 'jo',
            'QuizAnswer' => array(
                (int) 0 => array(
                    'title' => 'je'
                )
            )
        )
    )
) 
```

QuizAnswer 在这里，但我不知道如何检索值，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:29:15.813

你可以像这样访问你的答案

```
*<?php
$data['Task'] = array(
    'type' => '1',
    'level' => '1',
    'date_availability' => array(
        'day' => '17',
        'month' => '08',
        'year' => '2012',
        'hour' => '00',
        'min' => '00'
    ),
    'date_end_availability' => array(
        'day' => '18',
        'month' => '08',
        'year' => '2012',
        'hour' => '00',
        'min' => '00'
    ),
    'date_accomplishment' => array(
        'day' => '18',
        'month' => '08',
        'year' => '2012',
        'hour' => '00',
        'min' => '00'
    ),
    'title' => 'ju',
    'description' => 'ji',
    'QuizQuestion' => array(
        (int) 0 => array(
            'title' => 'jo',
            'QuizAnswer' => array(
                (int) 0 => array(
                    'title' => 'je'
                )
            )
        )
    )
)
;

echo $data['Task']['QuizQuestion'][0]['QuizAnswer'][0]['title'];

?>* 
```

你可以把它放在你的代码中以访问它

$this->request->data['Task']['QuizQuestion'][0]['QuizAnswer'][0]['title'];

# android - 是否可以知道 Android 应用程序的来源（例如 Google Play）？

> ID：12211810
> 
> 赞同：6
> 
> 时间：2012-08-31T08:42:39.407
> 
> 标签：android, google-play, android-applicationinfo

是否可以检查应用程序是否通过 Android 市场（Google Play 商店）或其他方式安装？

基本上我想知道的是应用程序是否真实。如果应用程序的安装源是 Play Store，那么我们知道名为 com.dropbox.android 的应用程序是实际的 Dropbox 应用程序，但如果源不是 Play Store，那么任何人都可以创建具有相同包名的 android 应用程序并将其安装在设备上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T08:55:39.293

这可能与[如何知道应用程序是从 google play 还是侧载安装的？](https://stackoverflow.com/questions/10809438/how-to-know-an-application-is-installed-from-google-play-or-side-load) 尝试看看提供的解决方案是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:59:15.543

我不确定是否有办法检测到这一点。但是，为了保证安全，我建议您始终在*“设置”下的“**安全*”或“*开发*”部分禁用`Unknown sources`，以避免安装任何非市场应用程序。

# javascript - 使用 javascript 加载并显示来自另一个域的页面而不显示原始 URL

> ID：12211818
> 
> 赞同：0
> 
> 时间：2012-08-31T08:43:25.743
> 
> 标签：javascript, url, hide

我正在尝试将一个页面从域（比如 abc.com）加载到我的网站（比如 xyz.com）。我想在 xyz.com 中显示来自 abc.com 的页面，而不显示原始 URL。这意味着站点访问者将无法找到原始源 URL (abc.com)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:45:38.513

在您的网站中创建一个页面并在其中放置一个 iframe，并将该 iframe 的 url 设置为其他网站页面的 url，这样该页面将从其他网站加载，并且 url 将属于您的网站。

```
<iframe src="http://www.abc.com/thepage" style="border-width:0;width:100%; height:800px;"></iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:10:24.997

```
<iframe src="http://www.xyz.com/thepage" width="300" height="300" frameBorder="0"></iframe> 
```

然后，您需要将服务器配置为 /thePage 的反向代理到 abc.com

# c# - 处理对数据库的重复 linq 查询的正确做法应该是什么？

> ID：12211819
> 
> 赞同：2
> 
> 时间：2012-08-31T08:43:28.907
> 
> 标签：c#, linq, entity-framework, linq-to-sql

处理对数据库的重复 linq 查询的正确做法应该是什么？重复查询是指在我的代码中重复出现的此类查询。

例子：

我注意到在我的代码中重复出现以下查询：

```
dataContext.Users.Where(u =>u.IsActive && u.IsAdmin).OrderByDescent(u => u.Name) 
```

我应该将包含上述查询的方法放在哪里。应该是`UserRepository`（以这种方式，我可能会以上帝课结束，这是不好的做法）？或者我应该创建类架构来处理这个问题。

我想知道你对此有何看法。以及您认为哪种类结构最通用且最容易重用。

我记得，我可以使用存储过程作为重复查询的地方，但我不想那样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:59:02.543

是的，它**可以**在. `UserRepository`_ `Godclass`_`Service Layer``Extensions``GetAll()``UserRepository`

**更新**
我试图更详细地展示它。

1.  构建一个通用存储库，其中包含所有用于检索/存储数据的语句。
2.  创建一个使用/发送到存储库的服务层。
3.  添加扩展方法以过滤特定结果。（在 c# 3.0 中提供）

一些代码：

```
// Repository (non-generic)
private IQueryable<User> GetUser()
{
  var results = from u in _db.Users
                select new User
                {
                  ID = u.ID,
                  Username = u.Username,
                  // and so on
                };

  return results;
}

//Service Layer  
private User GetUser(string Username)
{
   User u = _repository.GetUser().WithUsername(username)
                                 .SingleOrDefault();
} 

// Extension Method
public static IQueryable<User> WithUsername(this IQueryable<User> qry, string username)
{
  return from u in qry
         where u.Username == username
         select u;
} 
```

此方法与 Rob Conerys MVC StoreFront Preview 相关。其他项目的实现可能会有所不同，但这是一种方法。

# jquery - 如何修复未显示在我的页面中的选项卡？

> ID：12211821
> 
> 赞同：0
> 
> 时间：2012-08-31T08:43:36.473
> 
> 标签：jquery, html, tabs

Jquery starter here 我的问题是每次单击主页、关于、联系和登录时，选项卡都不会显示，我该如何解决这个问题？任何想法如何解决这个问题对我来说都是一个很大的帮助。谢谢。

//我的代码行

```
 <!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>trial</title>
    <link rel="stylesheet" href="css/reset.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <script src="http://code.jquery.com/jquery-1.8.1.js"></script>
    <script>
        $(function () {
            var tabContainers = $('section.tabs > article');
            tabContainers.hide().filter(':home').show();

            $('section.tabs ul.tabsNav a').click(function () {
                tabContainers.hide();
                tabContainers.filter(this.hash).show();
                $('section.tabs ul.tabsNav a').removeClass('selected');
                $(this).addClass('selected');
                return false;
            }).filter(':home').click();
        });
    </script>
</head>
<body>
<div id="siteWrapper">
    <header id="siteHead">
        <h1>Header</h1>
    </header>   
    <nav id="siteNav">
        <h1>Navigation</h1>
        <ul class="tabsNav">
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <li class="log"><a href="#login">Log In</a></li>
        </ul>
    </nav>
    <section id="siteContent" class="tabs">
        <h1>Section</h1>
        <article id="home">
            <h2>Home</h2>
            </article>
        <article id="about">
            <h2>About</h2>
        </article>
        <article id="contact">
            <h2>Contact</h2>
        </article>
        <article id="login">
            <h2>Login</h2>
        </article>
    </section>
    <footer id="siteFooter">
        <h1>Footer</h1>
    </footer>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:58:20.903

这是一个工作小提琴。让我知道这是否是你想要的。

[http://jsfiddle.net/Y6STE/1/](http://jsfiddle.net/Y6STE/1/)

# java - 用字符串填充表格视图

> ID：12211822
> 
> 赞同：3
> 
> 时间：2012-08-31T08:43:42.590
> 
> 标签：java, javafx-2

我已阅读 API 和示例，但无法理解如何填充表格视图。

假设我有一个带有“名称，值”对的两列字符串数组 (String[][])。我现在只想创建一个表格视图，它在两列中显示数据，在第一列中显示名称，在第二列中显示原始数组中所有行的值。

我尝试了什么？没什么，但似乎您需要为每一列创建可观察列表，将其绑定到各自的列，然后将该列添加到 tableview。但这在我看到的所有示例中都涉及“工厂”，这对我来说是一个陌生的概念。

我猜这很简单，但我无法理解它。请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-06-29T17:35:13.840

# 细胞价值工厂

对于表中的每一列，您设置/创建一个**Cell Value Factory**。每一行都有一个对应的对象`tableview.getItems()`。要确定此对象如何跨列显示，每列使用其自己的单元格值工厂。工厂接受对象并返回要显示的值。

由于`String[][]`是`String[]`'s 的数组，我们希望工厂接受 a`String[]`并返回`String`与其列对应的值。

## 例子

这是以这种方式创建单元值工厂的示例。它有点冗长，但可以用 lambdas 清理！（参见 Lambda 部分）。

```
// ---------------------------------------Initialize the data
String[][] data = ...; // Get name/value pairs from somewhere

// ---------------------------------------Setup a TableView with two TableColumns 
    /* ... Code ... */

// ---------------------------------------Add Cell Value Factories
nameColumn.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<String[], String>, ObservableValue<String>>() {
    @Override
    public ObservableValue<String> call(TableColumn.CellDataFeatures<String[], String> p) {
        String[] x = p.getValue();
        if (x != null && x.length>0) {
            return new SimpleStringProperty(x[0]);
        } else {
            return new SimpleStringProperty("<no name>");
        }
    }
});

valueColumn.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<String[], String>, ObservableValue<String>>() {
    @Override
    public ObservableValue<String> call(TableColumn.CellDataFeatures<String[], String> p) {
        String[] x = p.getValue();
        if (x != null && x.length>1) {
            return new SimpleStringProperty(x[1]);
        } else {
            return new SimpleStringProperty("<no value>");
        }
    }
});

// ---------------------------------------Add Data to TableView
tableView.getItems().addAll(Arrays.asList(data)); 
```

## 结果

如果你把这个例子（通过源代码）扔到舞台上，这就是你得到的。 [![有用！](../Images/699685f7243f86e9897045400cebc47c.png)](https://i.stack.imgur.com/Ekj45.png)

## 拉姆达斯

Java 有点冗长，尤其是在使用匿名类时。值得庆幸的是，有 lambdas，它为 Java 带来了一点可读性。这是示例中相同的单元格值工厂，用 lambda 重写。

```
nameColumn.setCellValueFactory((p)->{
        String[] x = p.getValue();
        return new SimpleStringProperty(x != null && x.length>0 ? x[0] : "<no name>");
});

valueColumn.setCellValueFactory((p)->{
        String[] x = p.getValue();
        return new SimpleStringProperty(x != null && x.length>1 ? x[1] : "<no value>");
}); 
```

* * *

**源代码**

这是一个以这种方式使用单元值工厂的独立 JavaFX 类。

```
import java.util.Arrays;
import java.util.List;
import javafx.application.Application;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.value.ObservableValue;
import javafx.scene.Scene;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;
import javafx.util.Callback;

/**
 *
 * @author nonfrt
 */
public class TableStuff extends Application {

    @Override
    public void start(Stage primaryStage) {

        // Create the data structure
        String[][] data = new String[5][2];
        data[0] = new String[]{"Jon Skeet","876k"};
        data[1] = new String[]{"Darin Dimitrov","670k"};
        data[2] = new String[]{"BalusC","660k"};
        data[3] = new String[]{"Hans Passant","635k"};
        data[4] = new String[]{"Marc Gravell","610k"};

        // Create the table and columns
        TableView<String[]> tv = new TableView();
            TableColumn<String[],String> nameColumn = new TableColumn();
                nameColumn.setText("Name Column");

            TableColumn<String[],String> valueColumn = new TableColumn();
                valueColumn.setText("Value Column");
        tv.getColumns().addAll(nameColumn,valueColumn);

        // Add cell value factories
//        nameColumn.setCellValueFactory((p)->{
//                String[] x = p.getValue();
//                return new SimpleStringProperty(x != null && x.length>0 ? x[0] : "<no name>");
//        });
//
//        valueColumn.setCellValueFactory((p)->{
//                String[] x = p.getValue();
//                return new SimpleStringProperty(x != null && x.length>1 ? x[1] : "<no value>");
//        });
        nameColumn.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<String[], String>, ObservableValue<String>>() {
            @Override
            public ObservableValue<String> call(TableColumn.CellDataFeatures<String[], String> p) {
                String[] x = p.getValue();
                if (x != null && x.length>0) {
                    return new SimpleStringProperty(x[0]);
                } else {
                    return new SimpleStringProperty("<no name>");
                }
            }
        });

        valueColumn.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<String[], String>, ObservableValue<String>>() {
            @Override
            public ObservableValue<String> call(TableColumn.CellDataFeatures<String[], String> p) {
                String[] x = p.getValue();
                if (x != null && x.length>1) {
                    return new SimpleStringProperty(x[1]);
                } else {
                    return new SimpleStringProperty("<no value>");
                }
            }
        });

        // Add Data
        tv.getItems().addAll(Arrays.asList(data));

        // Finish setting the stage
        StackPane root = new StackPane();
        root.getChildren().add(tv);

        Scene scene = new Scene(root, 300, 250);

        primaryStage.setTitle("Cell Value Factory Example");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        launch(args);
    }
} 
```

**[注意：**另一个 StackOverFlow 问题的[答案](https://stackoverflow.com/a/10532093/4769802)是另一个例子[。](https://stackoverflow.com/q/10519534/4769802)**]**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:01:11.090

是的，这很简单，你这个笨蛋。创建一个行类：

```
Row(String fName, String fValue){
    this.fieldName = new SimpleStringProperty(fName);
    this.fieldValue = new SimpleStringProperty(fValue);
} 
```

对于 String-array 中的每一行，您创建一个添加到 observableList 的行对象。

```
private ObservableList<Row> observableList = FXCollections.observableArrayList(          
              new Row("The Unfun Cat", "Is a terrible programmer"), 
              new Row("Stack Overflow", "Rules!"); 
```

然后为数组中的两列创建一个表列。

```
TableColumn columnName = new TableColumn("Name");
columnName.setCellValueFactory(
        new PropertyValueFactory<Row,String>("fieldName")); 
```

（与价值相同）

然后使用 tableView.setItems(observableList) 将 observableList 添加到 tableView，最后调用方法 tableView.getColumns.addAll(fieldName,fieldValue);

（这让我想知道如何在不知道原始 String[][] 数组中有多少列的一般情况下这样做？行对象是否可以有一个 ArrayList 来表示任意多个 SimpleStringProperties？你将如何连接它到ValueFactories？）

附言。如果有人创建了一个更具教学意义的示例，我将用“已解决”标记奖励他们的帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-05T08:37:40.710

您也可以在不知道要向表中添加多少列的情况下尝试使用 map！所以你可以使用 map 键作为 tableview 标题

```
TableView<Map<String, String>> tableView = new TableView<>();

ArrayList<Map<String, String>> valuesArray = new ArrayList<>();
for(Object object : filter.getEntities()) {
  Map<String, String> values = getValuesAsStringsForObject(object);
  valuesArray.add(values);
}

for(Object o : filter.getEntities()){
  List<String> headers = getHeaders(o);
  for (String header :headers){
    TableColumn<Map<String, String>, String> tableColumn = new TableColumn<>(header);
    tableColumn.setCellValueFactory(param -> new SimpleStringProperty(param.getValue().get(header)));

    tableView.getColumns().add(tableColumn);
  }
  break;
}

tableView.getItems().addAll(valuesArray);
return tableView; 
```

# javascript - 从框架的主窗口中的 JS 执行中删除 onbeforeunload

> ID：12211823
> 
> 赞同：2
> 
> 时间：2012-08-31T08:43:42.970
> 
> 标签：javascript, onbeforeunload

我尝试`onbeforeunload`使用以下命令从框架脚本中禁用事件：

```
window.parent.onbeforeunload = null; 
```

但收到此对话框：

![在此处输入图像描述](../Images/ad39f3ec4d911c0a2bf25115196d10c4.png)

我尝试调试并`onbeforeunload`变为空。但是我怎么能这样做这个对话框没有显示？

有关其他信息，我需要使用 JS 触发此事件。在我设置的页面开头：

```
window.parent.onbeforeunload = confirm; 
```

`confirm`我自己的功能在哪里。但是在某些代码位置，我需要禁用此事件，然后使用相同的命令启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:54:36.680

这可能会发生，因为 null 基本上是 Javascript 中的一个对象。这是我写它的方式：

```
var confirmCloseFn = function(evt) {
    if (!captureClose) return;
    var message = getLogoffMsg();
    evt = (evt) ? evt : window.event;
    if(message) {
        if (evt) evt.returnValue = message;
        return message;
    }
    else {
        if (evt) evt.returnValue = null;
        return null;
    }
}; 
```

# c# - 从 LinkedList 中快速删除项目

> ID：12211831
> 
> 赞同：2
> 
> 时间：2012-08-31T08:44:05.000
> 
> 标签：c#, .net, collections

我有以下链表：

```
LinkedList<Segment> myList = new LinkedList<Segment>(); 
```

为什么当我这样做时：

```
myList.Remove(new Segment(4,8)); 
```

调用以下`Segment.Equals()`方法：

```
class Segment
{
   ...

   public override bool Equals(object obj)
   {                         
      return Equals((Segment)obj);
   }

} 
```

而不是这个：

```
class Segment
{
   ...

   public bool Equals(Segment other)
   {                        
      return other.V1 == V1 && other.V2 == V2;
   }     
} 
```

有没有办法跳过`object`装箱和拆箱并使用后者 - 更快 - 方法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:01:20.677

你需要你的元素类型来实现`IEquatable<T>`接口：

```
class Segment : IEquatable<Segment>
{
    // ...

    public bool Equals(Segment other)
    {                        
        return 
            (object)other != null &&
            other.V1 == V1 && 
            other.V2 == V2;
    }     
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T09:01:14.950

`LinkedList<T>.Remove`用于`LinkedList<T>.Find`查找要删除的元素，并`LinkedList<T>.Find`使用[默认的相等比较器](http://msdn.microsoft.com/en-us/library/ms224763.aspx)来执行比较，在您的情况下是基于`Object.Equals`.

来自 MSDN：

> **Default**属性检查类型*T*是否实现了System.IEquatable [<T>](http://msdn.microsoft.com/en-us/library/ms131187.aspx)接口，如果是，则返回使用该实现的[EqualityComparer<T> 。](http://msdn.microsoft.com/en-us/library/ms132123.aspx)否则，它返回一个使用 T提供的[Object.Equals](http://msdn.microsoft.com/en-us/library/system.object.equals.aspx)和[Object.GetHashCode](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)覆盖的[EqualityComparer<T](http://msdn.microsoft.com/en-us/library/ms132123.aspx) *>*。

 *通过实现`IEquatable<T>`接口，您可以提供自己的相等实现，然后由`LinkedList<T>`.*

# ruby-on-rails - 获取带有关联的 Model.all 并以 json 格式返回

> ID：12211833
> 
> 赞同：1
> 
> 时间：2012-08-31T08:44:12.793
> 
> 标签：ruby-on-rails, activerecord

我正在尝试从我的模型中获取所有记录以及相关记录，然后使用`.to_json`. 我正在使用 Rails **2.3**。

这是模型的一部分：

```
class Currency
    has_many :exchange_from, :class_name => "CurrencyExchange", :foreign_key => "currency_from_id", :dependent => :destroy
    has_many :exchange_to, :class_name => "CurrencyExchange", :foreign_key => "currency_to_id", :dependent => :destroy 
```

那是我认为可以工作的代码：

```
Currency.all(:include => [:exchange_from, :exchange_to]).to_json 
```

但是结果和我做*的完全一样*`Currency.all.to_json`。如果使用 ActiveRecord 无法实现我的目标，请指导我应该使用哪种 SQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:47:34.350

做这个：

```
Currency.all(:include => [:exchange_from, :exchange_to]).to_json(:include => [:exchange_from, :exchange_to]) 
```

[文档在这里。](http://apidock.com/rails/ActiveRecord/Serialization/to_json)

# sql - 如何格式化 SQL PRINT 消息——一种 C printf()？

> ID：12211834
> 
> 赞同：2
> 
> 时间：2012-08-31T08:44:15.513
> 
> 标签：sql, sql-server

...嗯，不完全是为了`PRINT`. 我需要为字符串变量分配将显式子字符串与整数值（也可能与其他类型值）混合的值。目标是获取用于记录的字符串。

到目前为止，我使用的代码如下：

```
DECLARE @msg nvarchar(1000)
...
SET @msg = @procname + 'result = ' + CAST(@result AS nvarchar(5))
                     + '; error = ' + CAST(@error AS nvarchar(5)) 
```

其中`@procname`是一个字符串，如`sp_my_proc:`， 和`@result`是`@error`整数变量。结果应如下所示（数字周围没有多余的空格，只有最小长度）：

```
sp_my_proc: result = 3; error = 0 
```

上述方法有效，但是......有没有比将整数变量转换为字符串更好的方法`CAST(@result AS nvarchar(5))`？（认为​​神奇的数字 5 是一个需要忽略的小细节。）

您如何解决在代码中生成此类字符串的问题？

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:59:59.270

在 SQL-Server 中，您可以使用 STR() 函数 [http://msdn.microsoft.com/ru-ru/library/ms189527.aspx](http://msdn.microsoft.com/ru-ru/library/ms189527.aspx) 'length' 参数的默认值为 10。因为整数变量永远不会超过 10符号（你会有溢出）这将始终没有错误：

```
declare @test int
set @test = 333333333
select STR(@test) 
```

另外，看看 [T-SQL 中的类似 String.Format 的功能？](https://stackoverflow.com/questions/159554/string-format-like-functionality-in-t-sql)

# c++ - 从 C++ 中的另一个数组中构造具有给定索引的元素的数组的有效方法

> ID：12211835
> 
> 赞同：4
> 
> 时间：2012-08-31T08:44:22.700
> 
> 标签：c++, arrays, vector, indices

是否可以从其他两个数组创建一个数组，一个是源数组，第二个包含要获取的元素的索引，在 C++ 中，只使用一个命令，没有循环，例如，使用 STL 或 boost？例如，给定

```
double X[10] = [10., 9., 8., 7., 6., 5., 4., 3., 2., 1.]; 
```

和

```
int n[4] =  [0, 1, 3, 9]; 
```

我想拥有

```
double X[4] = [10., 9., 7., 1.] 
```

作为结果。在 MATLAB 中，我会简单地编写类似 X(n) 的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:16:31.087

使用 c++11-features 你可以这样做：

```
 std::vector<double> vec;
  std::transform(std::begin(n), std::end(n), std::back_inserter(vec), [&](int idx)
  {
    return x[idx];
  }); 
```

如果没有 c++11，它可能看起来像这样：

```
template <typename T, std::size_t N>
struct Get_Idx
{
  Get_Idx(T (&t)[N]) : m_t(t) { }

  T (&m_t)[N];

  T operator()(std::size_t i) const
  {
    return m_t[i];
  }
};

template <typename T, std::size_t N>
Get_Idx<T, N> get_idx(T (&t) [N])
{
  return Get_Idx<T, N>(t);
}

  std::vector<double> vec2;
  std::transform(n, n + 4, std::back_inserter(vec2), get_idx(x)); 
```

此外，您为什么使用 c 数组而不是 STL 容器？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T09:08:47.570

这是半相关的，只能静态工作的东西：

```
#include <array>

template <typename T, unsigned int ...I, typename U, unsigned int N>
std::array<T, sizeof...(I)> build_array(U const (&src)[N])
{
    return std::array<T, sizeof...(I)> { { static_cast<T>(src[I])... } };
} 
```

用法：

```
auto arr = build_array<int, 0, 1, 3, 9>(X); 
```

例子：

```
#include <iostream>

int main()
{
    double X[10] = { 10., 9., 8., 7., 6., 5., 4., 3., 2., 1\. };
    auto arr = build_array<int, 0, 1, 3, 9>(X);

    for (auto i : arr) { std::cout << i << std::endl; }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T09:04:55.770

假设您使用标准容器和 C++11（抱歉，未经测试）：

```
std::transform(n.begin(), n.end(), std::back_inserter(Y), [&X](int i) { return X[i]});
X = std::move(Y); 
```

# bash - 有没有办法在 bash 中选择多个文件路径？或者输出中的任何条目？

> ID：12211836
> 
> 赞同：1
> 
> 时间：2012-08-31T08:44:31.637
> 
> 标签：bash, select, filter, grep

每次我使用 ls 或 find 列出文件时，我都必须使用一些繁重的模式匹配 + 重定向到临时文件以仅获取我想要的文件，然后在命令行中重用该列表（例如：移动它们，然后重命名，等等）。

有没有办法：

*   扫描一个目录并获取其中的内容列表，然后选择我们想要[的（就像 SCM 微风对 git 所做的那样](https://github.com/ndbroadbent/scm_breeze)），这样我们以后就可以将选择通过管道传递给任何命令？
*   或者只是过滤任何输出来做到这一点（如手动grep）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:10:41.780

您可以获取文件列表并将它们保存在变量中：

```
list=*.txt 
```

例如。然后，您可以`$list`在需要文件时使用，尽管如果您在任何文件名中嵌入了空格（有使用数组的方法），这将不起作用。

如果您的文件名在文件中并且您希望它们在变量中，只需：

```
read list < filename 
```

不知道为什么要将它们通过管道传输到命令中，但如果需要：

```
echo *.txt|some_command 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-07T09:51:26.347

[我想你会在这个BashPitfalls](http://mywiki.wooledge.org/BashPitfalls#for_f_in_.24.28ls_.2A.mp3.29)中找到你想要的一切

这是一个例子：

```
while IFS= read -r -d '' file; do
  some command "$file"
done < <(find . -type f -name '*.mp3' -print0) 
```

还有一个：

```
shopt -s globstar
for file in ./**/*.mp3; do
  some command "$file"
done 
```

# java - 全屏视频查看而不拉伸视频

> ID：12211837
> 
> 赞同：32
> 
> 时间：2012-08-31T08:44:31.967
> 
> 标签：java, android, fullscreen, android-videoview

我想知道我是否可以找到一种方法让视频通过 videoview 全屏运行？

我搜索了很多并尝试了很多方法，例如：

1.  在清单中应用主题：

    ```
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
    ```

    但这并不强制视频全屏显示。

2.  应用于活动本身：

    ```
    requestWindowFeature(Window.FEATURE_NO_TITLE);  
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,  
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 
    ```

    也不强制视频全屏显示。

强制视频全屏的唯一方法是：

```
<VideoView android:id="@+id/myvideoview"
    android:layout_width="fill_parent"
    android:layout_alignParentRight="true"
    android:layout_alignParentLeft="true" 
    android:layout_alignParentTop="true" 
    android:layout_alignParentBottom="true" 
    android:layout_height="fill_parent"> 
</VideoView> 
```

这样会产生全屏视频，但会**拉伸视频本身**（拉长的视频），

我没有将这个不正确的解决方案应用于我的视频视图，那么有什么方法可以在不拉伸视频的情况下做到这一点？

**视频类：**

```
public class Video extends Activity {
    private VideoView myvid;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        myvid = (VideoView) findViewById(R.id.myvideoview);
        myvid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
            +"/"+R.raw.video_1));
        myvid.setMediaController(new MediaController(this));
        myvid.requestFocus();
        myvid.start();
    }
} 
```

**主.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/myvideoview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-09T01:45:43.597

像这样你可以自己设置视频的属性。

使用 SurfaceView（让您对视图有更多控制权），将其设置为 fill_parent 以匹配整个屏幕

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"     
              android:orientation="vertical" 
              android:layout_width="match_parent"
              android:layout_height="fill_parent">

    <SurfaceView
        android:id="@+id/surfaceViewFrame"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center" >
    </SurfaceView>
</Linearlayout> 
```

然后在您的 java 代码上获取表面视图并将您的媒体播放器添加到其中

```
surfaceViewFrame = (SurfaceView) findViewById(R.id.surfaceViewFrame);
player = new MediaPlayer();
player.setDisplay(holder); 
```

在您的媒体播放器上设置一个 onPreparedListener 并手动计算所需的视频大小，以所需的比例填充屏幕，避免拉伸视频！

```
player.setOnPreparedListener(new OnPreparedListener() {

        @Override
        public void onPrepared(MediaPlayer mp) {
                    // Adjust the size of the video
    // so it fits on the screen
    int videoWidth = player.getVideoWidth();
    int videoHeight = player.getVideoHeight();
    float videoProportion = (float) videoWidth / (float) videoHeight;       
    int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
    int screenHeight = getWindowManager().getDefaultDisplay().getHeight();
    float screenProportion = (float) screenWidth / (float) screenHeight;
    android.view.ViewGroup.LayoutParams lp = surfaceViewFrame.getLayoutParams();

    if (videoProportion > screenProportion) {
        lp.width = screenWidth;
        lp.height = (int) ((float) screenWidth / videoProportion);
    } else {
        lp.width = (int) (videoProportion * (float) screenHeight);
        lp.height = screenHeight;
    }
    surfaceViewFrame.setLayoutParams(lp);

    if (!player.isPlaying()) {
        player.start();         
    }

        }
    }); 
```

我从前段时间关注的视频流教程修改了这个，现在找不到它来引用它，如果有人这样做，请添加答案的链接！

希望能帮助到你！

**编辑**

好的，因此，如果您希望视频占据整个屏幕并且不希望它拉伸，那么最终会在侧面出现黑色条纹。在我发布的代码中，我们正在找出更大的视频或手机屏幕，并以最佳方式对其进行调整。

那里有我的完整活动，从链接流式传输视频。它是 100% 功能性的。我不能告诉你如何从你自己的设备上播放视频，因为我不知道。我相信您会在[此处](http://developer.android.com/reference/android/media/MediaPlayer.html)或[此处](http://developer.android.com/guide/topics/media/mediaplayer.html)的文档中找到它。

```
public class VideoPlayer extends Activity implements Callback, OnPreparedListener, OnCompletionListener, 
    OnClickListener {   

private SurfaceView surfaceViewFrame;
private static final String TAG = "VideoPlayer";
private SurfaceHolder holder;
private ProgressBar progressBarWait;
private ImageView pause;
private MediaPlayer player; 
private Timer updateTimer;
String video_uri = "http://daily3gp.com/vids/familyguy_has_own_orbit.3gp";  

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.videosample);       

    pause = (ImageView) findViewById(R.id.imageViewPauseIndicator);
    pause.setVisibility(View.GONE);
    if (player != null) {
        if (!player.isPlaying()) {
            pause.setVisibility(View.VISIBLE);
        }
    }

    surfaceViewFrame = (SurfaceView) findViewById(R.id.surfaceViewFrame);
    surfaceViewFrame.setOnClickListener(this);
    surfaceViewFrame.setClickable(false);

    progressBarWait = (ProgressBar) findViewById(R.id.progressBarWait);

    holder = surfaceViewFrame.getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    player = new MediaPlayer();
    player.setOnPreparedListener(this);
    player.setOnCompletionListener(this);
    player.setScreenOnWhilePlaying(true);
    player.setDisplay(holder);
}

private void playVideo() {
        new Thread(new Runnable() {
            public void run() {
                try {
                    player.setDataSource(video_uri);
                    player.prepare();
                } catch (Exception e) { // I can split the exceptions to get which error i need.
                    showToast("Error while playing video");
                    Log.i(TAG, "Error");
                    e.printStackTrace();
                } 
            }
        }).start();     
}

private void showToast(final String string) {
    runOnUiThread(new Runnable() {
        public void run() {
            Toast.makeText(VideoPlayer.this, string, Toast.LENGTH_LONG).show();
            finish();
        }
    });
}

public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    // TODO Auto-generated method stub

}

public void surfaceCreated(SurfaceHolder holder) {
    playVideo();
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}
//prepare the video
public void onPrepared(MediaPlayer mp) {        
    progressBarWait.setVisibility(View.GONE);

    // Adjust the size of the video
    // so it fits on the screen
    int videoWidth = player.getVideoWidth();
    int videoHeight = player.getVideoHeight();
    float videoProportion = (float) videoWidth / (float) videoHeight;       
    int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
    int screenHeight = getWindowManager().getDefaultDisplay().getHeight();
    float screenProportion = (float) screenWidth / (float) screenHeight;
    android.view.ViewGroup.LayoutParams lp = surfaceViewFrame.getLayoutParams();

    if (videoProportion > screenProportion) {
        lp.width = screenWidth;
        lp.height = (int) ((float) screenWidth / videoProportion);
    } else {
        lp.width = (int) (videoProportion * (float) screenHeight);
        lp.height = screenHeight;
    }
    surfaceViewFrame.setLayoutParams(lp);

    if (!player.isPlaying()) {
        player.start();         
    }
    surfaceViewFrame.setClickable(true);
}

// callback when the video is over
public void onCompletion(MediaPlayer mp) {
    mp.stop();
    if (updateTimer != null) {
        updateTimer.cancel();
    }
    finish();
}

//pause and resume
public void onClick(View v) {
    if (v.getId() == R.id.surfaceViewFrame) {
         if (player != null) {
            if (player.isPlaying()) {
                player.pause();
                pause.setVisibility(View.VISIBLE);
            } else {
                player.start();
                pause.setVisibility(View.GONE);
            }
        }
    }
}

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T07:01:23.220

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        videoView1 = (VideoView) findViewById(R.id.videoview);
                String SrcPath = "/mnt/sdcard/final.mp4";
        videoView1.setVideoPath(SrcPath);
        videoView1.setMediaController(new MediaController(this));
        videoView1.requestFocus();      
        videoView1.start();     
    }
}

<VideoView
    android:id="@+id/videoview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" >
</VideoView> 
```

试试这个它对我有用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-21T20:58:15.523

当前赞成的解决方案有效，但原始问题可能有更简单的解决方案。一位评论者正确地指出，您可以使用相同的方法调整 VideoView 的大小，而无需将所有内容转换为 SurfaceView。我在我的一个应用程序中对此进行了测试，它似乎有效。只需在 OnPreparedListener 回调中将计算出的布局参数添加到 VideoView 中即可：

mInspirationalVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() { @Override public void onPrepared(MediaPlayer mp) { // mMediaPlayer = mp;

```
 mp.setOnSeekCompleteListener(new MediaPlayer.OnSeekCompleteListener() {
                @Override
                public void onSeekComplete(MediaPlayer mp) {
                    if(isPlaying = true) {
                        stopPosition = 0;
                        mp.start();
                        mVideoProgressTask = new VideoProgress();
                        mVideoProgressTask.execute();
                    }
                }
            });

            // so it fits on the screen
            int videoWidth = mp.getVideoWidth();
            int videoHeight = mp.getVideoHeight();
            float videoProportion = (float) videoWidth / (float) videoHeight;

            DisplayMetrics mDisplayMetrics = new DisplayMetrics();
            getWindowManager().getDefaultDisplay().getMetrics(mDisplayMetrics);

            float screenWidth = mDisplayMetrics.widthPixels;
            float screenHeight = mDisplayMetrics.heightPixels;

            float screenProportion = (float) screenWidth / (float) screenHeight;
            android.view.ViewGroup.LayoutParams lp = mInspirationalVideoView.getLayoutParams();

            if (videoProportion > screenProportion) {
                lp.width = screenWidth;
                lp.height = (int) ((float) screenWidth / videoProportion);
            } else {
                lp.width = (int) (videoProportion * (float) screenHeight);
                lp.height = screenHeight;
            }

            mInspirationalVideoView.setLayoutParams(lp);

           ...

        }
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-10T08:58:33.657

这是我的功能，适用于全屏视频而不拉伸它。它会自动裁剪视频的两侧。它适用于纵向和横向模式。

它实际上取自[答案](https://stackoverflow.com/questions/27954658/scale-video-in-androids-videovideo)。

```
 public void onPrepared(MediaPlayer mp) {
        int videoWidth = mediaPlayer.getVideoWidth();
        int videoHeight = mediaPlayer.getVideoHeight();

        DisplayMetrics displayMetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
        int screenWidth = displayMetrics.widthPixels;
        int screenHeight = displayMetrics.heightPixels;

        float scaleY = 1.0f;
        float scaleX = (videoWidth * screenHeight / videoHeight) / screenWidth;

        int pivotPointX = (int) (screenWidth / 2);
        int pivotPointY = (int) (screenHeight / 2);

        surfaceView.setScaleX(scaleX);
        surfaceView.setScaleY(scaleY);
        surfaceView.setPivotX(pivotPointX);
        surfaceView.setPivotY(pivotPointY);

        mediaPlayer.setLooping(true);
        mediaPlayer.start();
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T19:51:30.627

Have you tried adjusting the underlying surface holder size? Try the code below it should adjust the surface holder to be the same width and height of the screen size. You should still have your activity be full screen without a title bar.

```
 public class Video extends Activity {
        private VideoView myvid;

        @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.main);
            myvid = (VideoView) findViewById(R.id.myvideoview);
            myvid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                +"/"+R.raw.video_1));
            myvid.setMediaController(new MediaController(this));
            myvid.requestFocus();

            //Set the surface holder height to the screen dimensions
            Display display = getWindowManager().getDefaultDisplay();
            Point size = new Point();
            display.getSize(size);
            myvid.getHolder().setFixedSize(size.x, size.y);

            myvid.start();
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-30T14:54:01.933

好吧，我希望它对[FullscreenVideoView有帮助](https://github.com/rtoshiro/FullscreenVideoView)

它处理所有关于表面视图和全屏视图的无聊代码，让你只关注 UI 按钮。

如果您不想构建自定义按钮，则可以使用 FullscreenVideoLayout。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-08T05:18:52.330

**A SurfaceView gives u an optimized drawing surface**

```
public class YourMovieActivity extends Activity implements SurfaceHolder.Callback {
        private MediaPlayer media = null;
        //...

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            media = new MediaPlayer();
            mSurfaceView = (SurfaceView) findViewById(R.id.surface);
            //...
        }
    } 
```

MediaPlayer calls should be wrapped in a try{}.

```
 @Override
    public void surfaceCreated(SurfaceHolder holder) {

        media.setDataSource("android.resource://" + getPackageName() 
            +"/"+R.raw.video_);
        media.prepare();

            int videoWidth = mp.getVideoWidth();
        int videoHeight = mp.getVideoHeight();

            int screenWidth = getWindowManager().getDefaultDisplay().getWidth();

            android.view.

ViewGroup.LayoutParams layout = mSurfaceView.getLayoutParams();

    layout.width = screenWidth;

    layout.height = (int) (((float)videoHeight / (float)videoWidth) * (float)screenWidth);

    mSurfaceView.setLayoutParams(layout);        

    mp.start();
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-12-23T06:48:14.370

我已经通过**Custom VideoView**解决了这个问题：

我以两种方式从 xml 和以编程方式将 VideoView 添加到 ParentView。

为 VideoView 添加自定义类，以**FullScreenVideoView.java**命名：

```
import android.content.Context;
import android.util.AttributeSet;
import android.widget.VideoView;

public class FullScreenVideoView extends VideoView {
    public FullScreenVideoView(Context context) {
        super(context);
    }

    public FullScreenVideoView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public FullScreenVideoView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        setMeasuredDimension(widthMeasureSpec, heightMeasureSpec);
    }
} 
```

如何与**xml****绑定**：

 **```
<FrameLayout
   android:id="@+id/secondMedia"
   android:layout_width="match_parent"
   android:layout_height="match_parent">

     <com.my.package.customview.FullScreenVideoView
           android:layout_width="match_parent"
           android:layout_height="match_parent" 
           android:id="@+id/fullScreenVideoView"/>

</FrameLayout> 
```

**或者**

如何以编程方式将VideoView**添加到****ParentView**：

```
FullScreenVideoView videoView = new FullScreenVideoView(getActivity());
parentLayout.addView(videoView, new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT)); 
```

希望这会帮助你。**

# javascript - 高性能Javascript图形可视化工具包（500-1000节点）

> ID：12211839
> 
> 赞同：6
> 
> 时间：2012-08-31T08:44:36.880
> 
> 标签：javascript, canvas, svg, webgl, graph-visualization

我需要显示大约 1000 个节点和边的图形。节点应该是可拖动的，并且所有节点都应该实时工作而无需等待屏幕。

所以，我已经检查了很多js图形可视化框架，仍然找不到解决方案。

例如，我从以下问题中检查了“JavaScript InfoVis Toolkit”： [什么是最快的、纯 Javascript、图形可视化工具包？](https://stackoverflow.com/questions/5695918/whats-the-fastest-pure-javascript-graph-visualization-toolkit)它挂在 250 个节点上。

所有框架的运行速度都非常快，但只有 100-200 个节点。在 500 个节点和边缘上，它们会抛出异常或完全挂断。

所以，问题是：是否有一个 js 框架可以处理 500-1k 个节点/边缘，或者我应该使用 canvas/WebGL 自己实现一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:12:09.993

你试过D3吗？ [http://d3js.org/](http://d3js.org/)

# java - 如何确保 java 程序与 Java Enviornment 6 兼容？

> ID：12211842
> 
> 赞同：0
> 
> 时间：2012-08-31T08:44:47.790
> 
> 标签：java

如何确保我的 java 程序与 Java Enviornment 6 兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:11:14.420

使用目标 JVM 运行所有测试。

如果它们通过了，那么根据定义，您的应用程序与该 JVM 兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:51:11.820

试试 Java 兼容性测试工具。从[这里](http://jcp.org/en/resources/tdk)查看详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:58:11.700

您可以传递`-target 1.6`给编译器。但是，这并不能保证字节码在 1.6 中运行。当您的代码使用 1.6 中不可用的更高版本的 API 时，它可能会在运行时失败并显示链接错误。

您可以使用[Animal Sniffer](http://mojo.codehaus.org/animal-sniffer-maven-plugin/)来检测您的代码与某些 Java 版本的兼容性。

或者只使用 1.6 编译器……这可能是最好的方法。始终使用您需要兼容的最低编译器版本。

# php - php 将 Mysql 查询结果加入一个数组

> ID：12211848
> 
> 赞同：0
> 
> 时间：2012-08-31T08:45:21.227
> 
> 标签：php, sql, join, merge

首先抱歉，如果问题不好，我的英语不太好。

我有以下查询

```
SELECT 
    * 
FROM 
    `stream_post` 
        LEFT JOIN `stream_comment` 
            ON (`stream_post`.`stream_id` = `stream_comment`.`comment_stream_id`) 
        JOIN `users_metadata` 
            ON (`stream_post`.`user_id` = `users_metadata`.`user_id`) 
ORDER BY 
    `stream_id` DESC 
LIMIT 10 
```

问题实际上是我想在同一页面上使用这些评论

所以它看起来像这样

```
parrent post 1
   children comment 1
   children comment 1

parrent post 2
   children2 comment 1
   children2 comment 1 
```

我也将帖子 ID（流 ID 是什么）保存在评论表中并加入它们。

但是当我得到结果时，看起来像这样

```
Array
(
    [stream_id] =&gt; 1
    [user_id] =&gt; 1
    [stream_text] =&gt; dasdadada
    [date] =&gt; 1346400535
    [comment_id] =&gt; 1
    [comment_stream_id] =&gt; 1
    [comment_user_id] =&gt; 1
    [comment_text] =&gt; comment one
    [posted] =&gt; 0
    [full_name] =&gt; Henry Marg
    [gender] =&gt; 1
    [location] =&gt; Los Angeles
    [birth_year] =&gt; 2012
    [birth_month] =&gt; 1
    [birth_day] =&gt; 1
    [work_location] =&gt; Tesco
    [about] =&gt; Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.

The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham.
)

Array
(
    [stream_id] =&gt; 1
    [user_id] =&gt; 1
    [stream_text] =&gt; dasdadada
    [date] =&gt; 1346400535
    [comment_id] =&gt; 1
    [comment_stream_id] =&gt; 1
    [comment_user_id] =&gt; 1
    [comment_text] =&gt; comment 2
    [posted] =&gt; 0
    [full_name] =&gt; Henry Marg
    [gender] =&gt; 1
    [location] =&gt; Los Angeles
    [birth_year] =&gt; 2012
    [birth_month] =&gt; 1
    [birth_day] =&gt; 1
    [work_location] =&gt; Tesco
    [about] =&gt; Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.

The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham.
) 
```

所以问题是当我遇到这些时，我得到的评论是分开的，还是合并的？

所以我想看起来像这样

一个

```
rray
(
    [stream_id] =&gt; 1
    [user_id] =&gt; 1
    [stream_text] =&gt; dasdadada
    [date] =&gt; 1346400535
    [comment_id] =&gt; 1
    [comment_stream_id] =&gt; 1
    [comment_user_id] =&gt; 1
    [comment_text] =&gt; comment one
    [comment_text] =&gt; comment two
    [posted] =&gt; 0
    [full_name] =&gt; Henry Marg
    [gender] =&gt; 1
    [location] =&gt; Los Angeles
    [birth_year] =&gt; 2012
    [birth_month] =&gt; 1
    [birth_day] =&gt; 1
    [work_location] =&gt; Tesco
    [about] =&gt; Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.

The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham.
) 
```

有没有办法做到这一点？请有人给我一个提示或一个例子吗？

真的会很开心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:55:15.153

很抱歉，但事情就是这样。除非您将所有数据放在一个数组中，否则您可以使用 foreach 或 for 语句按顺序遍历 comment_text。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:57:43.587

数组中不能有两个同名的键。您需要在进行时重命名密钥（可能在末尾附加一个数字）

```
[comment_text_1] => comment one
[comment_text_2] => comment two 
```

或者你可以把每个元素变成一个像这样的子元素数组——这在代码中更有用

```
[comment_text] => array('comment one', 'comment two') 
```

# objective-c - 如何在 iPhone SDK 的 Objective-C 中合并两个 UIImage 对象

> ID：12211849
> 
> 赞同：5
> 
> 时间：2012-08-31T08:45:24.810
> 
> 标签：objective-c, ios, merge, uiimage

我正在开发一个 iPhone 应用程序，我想合并两个 UIImages（leftImage 和 rightImage）。任何人都可以建议如何做到这一点，而不会在它们之间有界限吗？

我目前正在这样做：

```
- (UIImage*)mergeImage:(UIImage*)first withImage:(UIImage*)second
{
    // get size of the first image
    CGImageRef firstImageRef = first.CGImage;
    CGFloat firstWidth = CGImageGetWidth(firstImageRef);
    CGFloat firstHeight = CGImageGetHeight(firstImageRef);

    // get size of the second image
    CGImageRef secondImageRef = second.CGImage;
    CGFloat secondWidth = CGImageGetWidth(secondImageRef);
    CGFloat secondHeight = CGImageGetHeight(secondImageRef);

    // build merged size
    CGSize mergedSize = CGSizeMake((firstWidth+secondWidth), MAX(firstHeight, secondHeight));

    // capture image context ref
    UIGraphicsBeginImageContext(mergedSize);

    //Draw images onto the context
    [first drawInRect:CGRectMake(0, 0, firstWidth, firstHeight)];
    //[second drawInRect:CGRectMake(firstWidth, 0, secondWidth, secondHeight)];
    [second drawInRect:CGRectMake(firstWidth, 0, secondWidth, secondHeight) blendMode:kCGBlendModeNormal alpha:1.0];

    // assign context to new UIImage
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

    // end context
    UIGraphicsEndImageContext();

    return newImage;

} 
```

但它在两个图像之间创建了一条小线。我不想要这个分隔符，就像[Splitcam](http://itunes.apple.com/us/app/splitcam/id428262754?mt=8)做的那样。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T08:51:26.750

只需让边缘重叠一个像素。

```
[second drawInRect:CGRectMake(firstWidth-1, 0, secondWidth, secondHeight) 
   blendMode:kCGBlendModeNormal alpha:1.0]; 
```

# google-drive-api - 我在 Google 云端硬盘中看不到通过代码创建的文件和文件夹

> ID：12211859
> 
> 赞同：4
> 
> 时间：2012-08-31T08:46:07.553
> 
> 标签：google-drive-api

我是一名网络开发人员，我想从我的商业软件访问 Google API，我创建了一个 Drive 帐户，我想通过代码 (VB.NET) 创建一个文件夹和文件。我正在关注文档，创建了 JWT（Json Web 令牌），使用了服务帐户并获得了访问令牌。

现在我想访问 Google API。使用控制台应用程序，我创建了一些文件夹，并且可以通过代码获取已创建文件夹的列表。但我在我的 Google Drive 帐户中看不到这些文件夹。这怎么可能？

这是我发送到服务器以显示文件夹和文件列表的请求： [https://www.googleapis.com/files/](https://www.googleapis.com/files/) {FILE_ID}?key={API_KEY}

我获得一个 JSON 字符串作为响应，其中包含与 FILE_ID 元素相关的信息。例如：

{ "kind":"drive#file", "id":"FILE_ID", "mimeType":"application/vnd.google-apps.folder"(如果是文件夹) / "FILE_MIMETYPE"(如果是文件) , "title":"FOLDER_NAME" / "FILE_NAME", ... }

这是我用来访问 Google API 的代码：（VB.NET）

...

```
Public Function browseFile(ByVal fId As String) As List (Of FileSourceElement)

  Dim webclient As New WebClient()
  webclient.Headers.Add("Authorization", " Bearer " & _accessToken)
  webclient.Headers.Add("X-JavaScript-User-Agent", "Google APIs Explorer")
  Dim res As String = webclient.DownloadString("https://www.googleapis.com/drive/v2/files?key=" & _apiKey).Trim()

  'res contains the JSON with the informations of the file/folder 
  ...

End Function

Public Sub createContainer(ByVal path As String)
  Dim webclient As New WebClient()
  webclient.Headers.Add("Authorization", " Bearer " & _accessToken)
  webclient.Headers.Add("X-JavaScript-User-Agent", "Google APIs Explorer")
  webclient.Headers.Add("Content-Type", "application/json")
  webclient.UploadString("https://www.googleapis.com/drive/v2/files", _ 
                     "POST", _ 
                     "{""title"":""daEliminare2"", ""parents"":[{""id"":""" & path & """}], ""mimeType"":""application/vnd.google-apps.folder""}")
End Sub 
```

...

在我的 Google Drive 中，我没有手动创建文件夹，也没有手动上传文件，我只能通过代码完成所有操作。

正如我对您所说，我已经成功创建了一个文件夹，并且我成功打印了文件列表（通过代码），但是在我的 GDrive 中，由 UI 创建的元素没有出现。为什么？

* * *

我在服务帐户中读到过，为了获得访问令牌，它需要一个名为 Json Web Token (JWT) 的特殊 JSON 字符串，该字符串由标头、声明集和签名（base64 字符串）组成。字符串是：

{base64 格式的 JWT 标头}。{base64 格式的 JWT 声明集}。{base64 格式的 JWT 签名}

我的智威汤逊是：

标题

```
{
  "alg": "RS256",
  "typ": "JWT"
} 
```

Claim set { "iss": "0123456789@developer.gserviceaccount.com", // 其中 '0123456789' 是 CLIENT_ID。“范围”：“https://www.googleapis.com/auth/drive”，“aud”：“https://accounts.google.com/o/oauth2/token”，“exp”：timeStamp + 3600， //其中 'timeStamp' 是自 1970-01-01T00:00:00 以来的秒数。“iat”：时间戳}

要编写签名，我已按照此页面中描述的程序进行操作：

[https://developers.google.com/accounts/docs/OAuth2ServiceAccount#computingsignature](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#computingsignature)

编写 JWT 后，我将其发送到服务器，并在此模式下得到一个 JSON 字符串作为响应：

```
{
  "access_token": "ACCESS_TOKEN", // (e.g.: 1/8xbJqaOZXS...)
  "type_token": "Bearer",
  "expire_in": 3600
} 
```

当我获得访问令牌 (AT) 时，我使用它来访问 Google API；例如：如果我要显示所有文件和文件夹列表，我会发送一个具有如下标题的请求：

授权：Bearer AT X-JavaScript-User-Agent：Google APIs Explorer

网址：[https](https://www.googleapis.com/drive/v2/files?key=) ://www.googleapis.com/drive/v2/files?key= {MY_API_KEY}

但我强调，列表中有一些项目（使用 VB.NET 控制台应用程序），而我的 Google Drive 中没有。

所以我得到了访问令牌，但我没有成功访问 Google API。

PS：我需要在不使用任何浏览器的情况下访问 Google API。

第二部分：

我在服务帐户中读到过，为了获取访问令牌，它需要一个名为 Json Web 令牌 (JWT) 的特殊 JSON 字符串，该字符串由标头、声明集和签名（base64 字符串）组成。字符串是：

{base64 格式的 JWT 标头}。{base64 格式的 JWT 声明集}。{base64 格式的 JWT 签名}

我的智威汤逊是：

标题

```
{
  "alg": "RS256",
  "typ": "JWT"
} 
```

Claim set { "iss": "0123456789@developer.gserviceaccount.com", // 其中 '0123456789' 是 CLIENT_ID。“范围”：“https://www.googleapis.com/auth/drive”，“aud”：“https://accounts.google.com/o/oauth2/token”，“exp”：timeStamp + 3600， //其中 'timeStamp' 是自 1970-01-01T00:00:00 以来的秒数。“iat”：时间戳}

要编写签名，我已按照此页面中描述的程序进行操作：

[https://developers.google.com/accounts/docs/OAuth2ServiceAccount#computingsignature](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#computingsignature)

编写 JWT 后，我将其发送到服务器，并在此模式下得到一个 JSON 字符串作为响应：

```
{
  "access_token": "ACCESS_TOKEN", // (e.g.: 1/8xbJqaOZXS...)
  "type_token": "Bearer",
  "expire_in": 3600
} 
```

当我获得访问令牌 (AT) 时，我使用它来访问 Google API；例如：如果我要显示所有文件和文件夹列表，我会发送一个具有如下标题的请求：

授权：Bearer AT X-JavaScript-User-Agent：Google APIs Explorer

网址：[https](https://www.googleapis.com/drive/v2/files?key=) ://www.googleapis.com/drive/v2/files?key= {MY_API_KEY}

但我强调，列表中有一些项目（使用 VB.NET 控制台应用程序），而我的 Google Drive 中没有。

所以我得到了访问令牌，但我没有成功访问 Google API。

PS：我需要在不使用任何浏览器的情况下访问 Google API。

致以真诚的感谢和诚挚的问候

国会议员

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T15:44:48.003

由于您使用的是服务帐户，所有文件夹和文件都将在此服务帐户的驱动器中创建，无法通过 Web UI 访问，并且将限制为默认配额。

要在用户的云端硬盘中添加内容，您需要通过常规 OAuth 2.0 流程来检索该用户的凭据。您可以在此页面上找到有关 OAuth 2.0 的更多信息：

*   [检索和使用 OAuth 2.0 凭据](https://developers.google.com/drive/credentials)。
*   [快速入门](https://developers.google.com/drive/quickstart)：它有一个可以使用的 C# 快速入门示例。
*   [使用 OAuth 2.0 访问 Google API](https://developers.google.com/accounts/docs/OAuth2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T00:59:50.643

如果您想在不使用 OAuth 2.0 的情况下查看用户帐户下的文件，则可以将服务帐户编辑权限授予用户帐户下的文件夹。

然后，在使用服务帐户上传文件时，请确保将父参考 ID 设置为使用该文件夹 ID

文件夹 ID 在地址栏中确定

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T17:08:01.150

不知道给定的解决方案。在添加文件之后，我通过添加文件权限做了不同的事情（NodeJS 代码。insertFile 在用户的经典文件上传之后调用）：

```
insertPermission = function(fileId, value, type, role,authClient,cb) {
  var body = {
    'value': value,
    'type': type,
    'role': role
  };
  var request = drive.permissions.insert({
    'fileId': fileId,
    'resource': body,
    'auth': authClient
  }, function (err,response) {
    cb(err,response);
  });
}

exports.insertFile = function(file,customer,callback) {
    exports.authorize(function (err,authClient) {
        drive.files.insert({
          resource: {
            title: file.name,
            mimeType: file.mimeType,
            parents: [{id:customer.googleDriveFolder}]
          },
          media: {
            mimeType: file.mimeType,
            body: file.buffer
          },
          auth: authClient
        }, function(err, response) {
          debug('error:', err, 'inserted:', response.id);
          if (!err) {
            insertPermission(response.id,customer.email,"user","writer",authClient,function (err,resp){
              callback(null, resp);            
            });
          }
        });
    });
}; 
```

请注意，我正在使用 JWT 和私钥类型的身份验证，并带有一个服务帐户：

```
exports.authorize = function(callback) {
    if (_tokens && ((_tokens.expiry_date - (new Date()).getTime())>100 )) callback(null, _authClient);
    else {

    var scope = ['https://www.googleapis.com/auth/drive', 'https://www.googleapis.com/auth/drive.appdata', 'https://www.googleapis.com/auth/drive.apps.readonly',
'https://www.googleapis.com/auth/drive.file','https://www.googleapis.com/auth/drive.metadata',
'https://www.googleapis.com/auth/drive.metadata.readonly',
'https://www.googleapis.com/auth/drive.readonly',
'https://www.googleapis.com/auth/drive.scripts'];

    var authClient = new google.auth.JWT(
            '<myServiceAccountClientId - xxx@developer.gserviceaccount.com>',
            '<path to key>.pem',
            ''); //seems we could use an user to impersonate requests, i need to test that..
    authClient.authorize(function(err, tokens) {
        if (err) {
            callback(err);
            return;
        }
        callback(null,authClient);    
    });
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-02T05:14:23.407

您可以查看使用 API 上传的文件。使用以下 URL 查看您的所有文件。

[https://drive.google.com/folderview?id=XXX](https://drive.google.com/folderview?id=XXX)

其中 XXX= 使用 API 创建的文件夹 ID。调试代码以获取文件夹 ID，

但是要在上面的链接中工作，您必须在创建任何文件夹或文件后提供权限，如下所示：

```
 Permission newPermission = new Permission();
 newPermission.Value = "youremail@gmail.com";
 newPermission.Type = "anyone";
 newPermission.Role = "reader";
 _service.Permissions.Insert(newPermission, NewDirectory.Id).Execute(); 
```

查看 UI 的备用链接：[https ://drive.google.com/drive/folders/XXX](https://drive.google.com/drive/folders/XXX)

# xpages - 如何在 html 头标签中使用类似 IE 的注释语法？

> ID：12211861
> 
> 赞同：1
> 
> 时间：2012-08-31T08:46:27.377
> 
> 标签：xpages

如何在 html 头标签中使用类似 IE 的注释语法？我的具体意思是：

```
<!--[if lt IE 8]>   <script src="json2.js"></script> <![endif]--> 
```

由于 xpages 用于注释的语法与 html 标准相同，因此此注释不会在浏览器中呈现……任何想法解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:19:20.860

如果您只想为 IE 7 及以下版本加载特定资源（例如 CSS 或 JS），那么您可以在主题中执行此操作：

```
<resource rendered="#{javascript:context.getUserAgent().isIE(0, 7) == true}">
  <content-type>text/javascript</content-type>
  <href>json2.js</href>
</resource> 
```

请注意，`context.getUserAgent().isIE()`对于 IE，不带参数返回 true 的方法，对于特定版本的 IE，带参数返回 true。

# filter - Windows 筛选平台用户模式还是内核模式？

> ID：12211865
> 
> 赞同：5
> 
> 时间：2012-08-31T08:46:52.980
> 
> 标签：filter, wfp

我正在使用 Windows 过滤平台。我想创建一个流量过滤器、安全管理器，它监视数据包和网络事件或阻止 url...我知道大多数 WFP 函数都可以从用户模式或内核模式调用。我想知道是使用内核模式函数还是用户模式函数来编写我的过滤器？是否有任何类型的网络操作只能通过使用内核模式驱动程序来捕获？请在这方面帮助我。

提前感谢您对此事的任何帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T16:35:18.760

WFP 标注只能使用内核模式驱动程序进行部署。据我所知，修改数据包（NAT、端口转发等）只能使用内核模式驱动程序上的标注来完成。

更新：

*   用户模式应用程序可用于进行浅包检查和一些简单的流操作以及控制内核模式驱动程序。

*   内核模式驱动程序可以进行深度和浅层数据包检查和各种流操作，但如果不使用实现 WFP API 的用户模式应用程序，则无法与常见应用程序交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:42:49.543

Alexandre 是正确的，有些事情只能通过内核模式 WFP 标注驱动程序来完成。

但是，您可能还想查看我的项目[WinDivert](http://reqrypt.org/windivert.html) (LGPL)，它将一些 WFP 内核模式功能（即拦截和修改数据包）提升到用户模式 ​​API。WinDivert 为您提供标注驱动程序。

# azure-blob-storage - 将大量文件上传到 blob

> ID：12211869
> 
> 赞同：0
> 
> 时间：2012-08-31T08:47:06.440
> 
> 标签：azure-blob-storage, blobstorage

你知道将太多文件上传到 Azure Blob 容器的最佳方法吗？

我目前正在做一些事情将多个文件上传到 Azure blob 存储。文件的数量可能很大，例如 30,000 或更多（每个文件的大小可能为 10KB~1MB）。首先，我有一个文件位置列表，然后我会使用 Parallel.Foreach 上传文件。像这样的代码片段：

`列出位置=...

Parallel.Foreach(locations, location=>
{
...
UploadFromStream(...);
...
});`
代码运行结果不一致。

有时它运行良好，我可以看到上传到 Azure blob 容器的所有文件。

有时，我会遇到这样的异常：

服务器未能验证请求。确保 Authorization 标头的值正确形成，包括签名。，内部异常：远程服务器返回错误：（403）禁止

有时，我遇到超时异常。

我已经解决这个问题好几天了，不幸的是，我还没有一个完美的解决方案。所以我想知道当你处理类似的场景时你会怎么做，当上传太多文件到 Azure blob 存储时你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:12:57.467

最后，我还没有发现我的代码有什么问题。

但是，我已经找到了解决这个问题的方法。我过期了 Parallel.Foreach，只使用常见的 foreach。然后我使用 BeginuploadFromStream 方法而不是 UploadFromStream，它实际上是异步上传文件。

到目前为止，它运行完美，更稳定，没有任何异常发生。

# jquery - 导入json值后没有样式的jquery移动列表

> ID：12211871
> 
> 赞同：0
> 
> 时间：2012-08-31T08:47:26.173
> 
> 标签：jquery, mobile

我的脚本接受一个 json 调用，将其拆分，将这些值放入一个数组中，然后通过 for 循环对数组进行倒计时，`<li>`每个循环向一个元素添加一个值。它们每个都出现在列表中，但没有任何 jquery mobile 的样式。这是它现在的样子；

![没有风格](../Images/cc1466ee2839a6210a8ee5434e924897.png)

通过在 for 循环中指定样式列表的确切类，我能够使它看起来像这样

![在此处输入图像描述](../Images/fe524eee73bd7f8dc0ca7ba6a3455141.png)\

但是，这也不理想，因为我不能在末尾添加计数气泡或复选框。有一个更好的方法吗？这是我当前的代码

```
console.log('findById: ');
    $.ajax({
        type: 'GET',
        url: 'http://172.16.200.61:8080/RESTfulExample/blacksheep/api/getgroup',
        dataType: "jsonp",
        success: function(data){
            alert('findById success:' + data.groups);
            var json = data.groups;
            var jsplit=json.split(",");
            console.log(jsplit);
            Fill(jsplit);           
        },
        error : function (jqXHR, textStatus, errorThrown) {
         alert(textStatus);
         alert(errorThrown);
        },
    });

function Fill(input){
    for (i=0 ; i < input.length ; i++){
        document.getElementById("people").innerHTML += "<li>" + input[i] +  "</li>";        
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:50:59.323

在 JQuery Mobile 中，对于动态注入页面的元素，需要运行适当的方法来应用 JQM 的样式，在您的情况下：

`$('#mylist').listview();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:23:07.260

这对我有用。

```
$('#mylist').listview('refresh'); 
```

# lambda - The Little Schemer：坚持 multiinsertLR&co 示例

> ID：12211874
> 
> 赞同：3
> 
> 时间：2012-08-31T08:47:34.323
> 
> 标签：lambda, scheme, continuations, the-little-schemer

经过一些工作后，我能够理解该`multirember&co`功能，但我无法从以下`multiinsertLR&co`代码中真正理解（第 143 页）：

```
(define multiinsertLR&co
  (lambda (new oldL oldR lat col)
    (cond
     ((null? lat)
      (col '() 0 0))
     ((eq? (car lat) oldL)
      (multiinsertLR&co
       new
       oldL
       oldR
       (cdr lat)
       (lambda (newlat L R) 
         (col (cons new
                    (cons oldL newlat))
              (add1 L) R))))
     ((eq? (car lat) oldR)
      (multiinsertLR&co
       new
       oldL
       oldR
       (cdr lat)
       (lambda (newlat L R)
         (col (cons oldR
                    (cons new newlat))
              L (add1 R)))))
     (else
      (multiinsertLR&co
       new
       oldL
       oldR
       (cdr lat)
       (lambda (newlat L R)
         (col (cons (car lat)
                    newlat) L R))))))) 
```

这本书似乎没有解释`collector`在评估函数时最初应该通过哪一个，所以我分别使用了第 138 页和第 140 页上解释的`a-friend`收集器和收集器。`last-friend`使用任一收集器评估函数会导致以下错误（使用带有 petit chez 方案的跟踪函数）：

```
>> (multiinsertLR&co 'salty 'fish 'chips '(chips and fish or fish and chips) last-friend)

|(multiinsertLR&co salty fish chips (chips and fish or fish and chips)
   #<procedure>)
|(multiinsertLR&co salty fish chips (and fish or fish and chips)
   #<procedure>)
|(multiinsertLR&co salty fish chips (fish or fish and chips) #<procedure>)
|(multiinsertLR&co salty fish chips (or fish and chips) #<procedure>)
|(multiinsertLR&co salty fish chips (fish and chips) #<procedure>)
|(multiinsertLR&co salty fish chips (and chips) #<procedure>)
|(multiinsertLR&co salty fish chips (chips) #<procedure>)
|(multiinsertLR&co salty fish chips () #<procedure>)
Exception: incorrect number of arguments to #<procedure>
Type (debug) to enter the debugger. 
```

我查看了几次代码，但找不到错误。如果有人有任何见解，请分享。如果有人也可以通过一些好的例子向我指出（相对而言）对延续的温和解释，那也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T04:52:51.107

这是我为解决 Chris 的第二个示例所经历的过程，因为我认为这可能对可能被卡住的其他人有所帮助。（如有错误请指正！）

```
;; Anonymous functions (collectors) in mutliinsertLR&co here defined as named  
;; functions for reference purposes
(define left-col
  (lambda (newlat L R)
    (col (cons new
               (cons oldL newlat))
         (add1 L) R)))              ; L counter gets incremented

(define right-col
  (lambda (new lat L R)
    (col (cons oldR
               (cons new newlat))
         L (add1 R))))              ; R counter gets incremented

(define else-col
  (lambda (newlat L R)
    (col (cons (car lat)
               (newlat) L R))))     ; neither counter gets incremented

;; Let's step through an example to see how this works:
;;
;; 1\. ENTRY TO FUNCTION
;; new  = foo
;; oldL = bar
;; oldR = baz
;; lat  = (goo bar baz qux quux)
;; col  = list
;;
;; 1\. Is lat null? No.
;; 2\. Is car of lat equal to oldL? No.
;; 3\. Is car of lat equal to oldR? No.
;; 4\. Else? Yes. Recur on the function passing the new, oldL
;;    oldR, (cdr lat) and the new collector.
;;
;; 2\. FIRST RECURSIVE STEP
;; new  = foo
;; oldL = bar
;; oldR = baz
;; lat  = (bar baz qux quux)
;; col  = else-col
;;
;; - Is lat null? No.
;; - Is car of lat equal to oldL? Yes. Recur on the function
;;   passing new, oldL, oldR, (cdr lat), and the new col.
;;
;; 3\. SECOND RECURSIVE STEP
;; new  = foo
;; oldL = bar
;; oldR = baz
;; lat  = (baz qux quux)
;; col  = left-col
;;
;; - Is lat null? No.
;; - Is car of lat equal to oldL? No.
;; - Is car of lat equal to oldR? Yes. Recur on the function
;;   passing new, oldL, oldR, (cdr lat), and the new col.
;;
;; 4\. THIRD RECURSIVE STEP
;; new  = foo
;; oldL = bar
;; oldR = baz
;; lat  = (qux quux)
;; col  = right-col
;;
;; - Is lat null? No.
;; - Is car of lat equal to oldL? No.
;; - Is car of lat equal to oldR? No.
;; - Else? Yes. Recur on the function passing new, oldL, oldR,
;;   (cdr lat) and the new collector.
;;
;; 5\. FOURTH RECURSIVE STEP
;; new  = foo
;; oldL = bar
;; oldR = baz
;; lat  = (quux)
;; col  = else-col
;;
;; - Is the lat null? No.
;; - Is the car of lat equal to oldL? No.
;; - Is the car of lat equal to oldR? No.
;; - Else? Yes. Recur on the function passing new, oldL, oldR,
;;   (cdr lat) and the new collector.
;;
;; 6\. FIFTH RECURSIVE STEP
;; new  = foo
;; oldL = bar
;; oldR = baz
;; lat  = ()
;; col  = else-col
;;
;; - Is the lat null? Yes. Call else-col, where newlat is (),
;;   L is 0 and R is 0.
;;
;; 7\. ELSE-COL
;; newlat = ()
;; L      = 0
;; R      = 0
;; col    = else-col
;;
;; - Now call else-col on the (cons (car lat)), which is currently
;;   stored in memory as the atom "quux", onto newlat, as well as
;;   L and R.
;;
;; 8\. ELSE-COL (again)
;; newlat = (quux)
;; L      = 0
;; R      = 0
;; col    = right-col
;;
;; - Now call right-col on the (cons (car lat)), which is currently
;;   stored in memory as the atom "qux", onto newlat, as well as L
;;   and R.
;;
;; 9\. RIGHT-COL
;; newlat = (qux quux)
;; L      = 0
;; R      = 0
;; col    = left-col
;;
;; - Now call left-col on the cons of oldR and (cons new newlat),
;;   as well as L and the increment of R.
;;
;; 10\. LEFT-COL
;; newlat = (baz foo qux quux)
;; L      = 0
;; R      = 1
;; col    = else-col
;;
;; - Now call else-col on the cons of new and (cons oldL newlat),
;;   as well as the increment of L and R.
;;
;; 11\. ElSE-COL (last time)
;; newlat = (foo bar baz foo qux quux)
;; L      = 1
;; R      = 1
;; col    = list
;;
;; - Now we call list on the (cons (car lat)), which is currently
;;   stored in memory as the atom "goo", onto newlat, as well as L
;;   and R.
;; - This gives us the final, magical list:
;;   ((goo foo bar baz foo qux quux) 1 1)
;;
;; 12\. FIFTH RECURSIVE STEP (redux)
;; new  = foo
;; oldL = bar
;; oldR = baz
;; lat  = (quux)
;; col  = else-col
;;
;; - Base case evaluated, with the result being
;;   ((goo foo bar baz foo qux quux) 1 1).
;; - Function ends.
;;
;; THE END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T14:42:03.717

如代码中的基本情况所示，您的收集器/延续必须采用 3 个参数。看来您传入了一个没有传入的函数。

* * *

很高兴你完成了`multirember&co`：我写了一个关于它的答案，[你可能希望查看](https://stackoverflow.com/a/7005024/13)它。

无论如何，测试这些收集器/延续的一般方法是首先使用`list`作为你的延续，因为`list`它是可变的并且只是返回作为列表给出的项目。这是一个例子：

```
> (multiinsertLR&co 'foo 'bar 'baz '(foo bar baz qux quux) list)
'((foo foo bar baz foo qux quux) 1 1) 
```

哦，我看到了两个`foo`s！插入了哪个，哪个在原始列表中？

```
> (multiinsertLR&co 'foo 'bar 'baz '(goo bar baz qux quux) list)
'((goo foo bar baz foo qux quux) 1 1) 
```

啊，所以我们开始做点什么了！每当列表包含`bar`,时，`foo`都会在它之前插入；并且只要列表包含一个`baz`,`foo`就会在它之后插入。但是数字呢？

```
> (multiinsertLR&co 'foo 'bar 'baz '(baz goo bar baz qux bar quux baz) list)
'((baz foo goo foo bar baz foo qux foo bar quux baz foo) 2 3) 
```

这些数字看起来像计数器！每个“左”插入增加第一个计数器，每个“右”插入增加第二个计数器。

* * *

在查看代码时，如果查看 的每个分支`cond`，您将看到左匹配情况、右匹配情况和不匹配情况（当然还有结束-list case，它设置基本/初始值）。注意在每种情况下插入（和计数器增量）是如何发生的。既然你已经得到了`multirember&co`，从这里开始这应该相当容易。一切顺利！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-24T19:45:18.733

最近再次用我最喜欢的模式匹配伪代码重写它，¹我们得到了更紧凑和视觉上更明显

```
multiinsertLR&co new oldL oldR lat col  =  g lat col 
  where
  g [a, ...t] col 
    | a == oldL  =  g t  ( newlat L R =>  col [new, oldL, ...newlat] (add1 L)  R  )
    | a == oldR  =  g t  ( newlat L R =>  col [oldR, new, ...newlat]  L  (add1 R) )
    | else       =  g t  ( newlat L R =>  col [a,         ...newlat]  L        R  )
  g [] col       =                        col []                      0        0 
```

中s`L`的计数也是如此；是s 中的计数；and是一个特殊元素，它被插入到正在构建的结果列表中，在输入原子列表中的元素的右侧和左侧：`oldL``lat``R``oldR``lat``new``oldR``oldL``lat`

```
multii&co 0 1 2 [1,4,5,2,4,5,1,4,5,1] col 
=
col [0,1,4,5, 2,0,4,5, 0,1,4,5, 0,1 ] 3 1 
```

就这样。使用有用的符号，这很容易。

* * *

¹看到[这个](https://stackoverflow.com/a/48387915/849891)和[这个](https://stackoverflow.com/a/48371028/849891)。

# api - Foursquare 实时用户 API

> ID：12211878
> 
> 赞同：0
> 
> 时间：2012-08-31T08:47:48.203
> 
> 标签：api, tomcat, real-time, foursquare

我的应用程序有问题，我想将其用作推送 POST 请求的接收器。我用 Java 将它编程为一个直接的 servlet，我验证我可以向它发送 POST 请求，但我的消费者管理页面的测试推送显示为 404。

是否有可能我无法在 80 以外的另一个端口上运行推送接收器？我的安全 Tomcat 端口是 8888。在我的 Tomcat 访问日志中，我没有看到来自 Foursquare 服务器的任何调用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:11:58.477

正如[实时 API 自签名证书](https://stackoverflow.com/questions/10729743/realtime-api-self-signed-certificate)中所述， 4sq 目前似乎无法将 POST 请求发送到 443（标准 SSL）以外的其他端口。

我通过使用 mod_jk 连接器来解决这个问题，让 Apache2 将请求直接发送到一个特殊的目录到 Tomcat7。这对我有用。

# java - 在未安装 java 的情况下运行 sencha 编译会导致“无法打开管道”错误

> ID：12211880
> 
> 赞同：2
> 
> 时间：2012-08-31T08:47:50.763
> 
> 标签：java, javascript, extjs

我希望能够在我的机器上没有完整的 java 安装的情况下运行 sencha 编译。即，我只想将 java 二进制文件包含在工具文件夹中。目前唯一不起作用的编译部分是压缩 js 文件的最后部分。我收到以下错误：

> 未捕获的异常：流：“无法打开管道”（exec://java -jar "C:\projects\Tools\SenchaSDKTools-1.2.3\jsbuilder\ycompressor\ycompressor.jar" --type js -o "C :\inetpub\wwwroot\ext\WebApp\app-all.js" "C:\inetpub\wwwroot\ext\WebApp\app-all.jstemp-1098294810303.0708")

为了尝试这个，我创建了一个简单的 js 文件，它只执行失败的步骤：

```
var cmd = 'java -jar "C:\\projects\\tools\\SenchaSDKTools-1.2.3\\jsbuilder\\ycompressor\\ycompressor.jar" --type js -o "C:\\inetpub\\wwwroot\\ext\\WebApp\\app-all.js" "C:\\inetpub\\wwwroot\\ext\\WebApp\\app-all.js-temp-1098294810303.0708"';
var stream = new Stream('exec://' + cmd);
stream.close(); 
```

然后从命令行使用 jsdb 运行简单的 js 文件：

```
jsdb simple.js 
```

当java完全安装时，上面的代码工作正常，当我卸载java时，上面的行失败并出现上面的错误消息。

我猜这与java别名有关。我对这个框架/语言几乎一无所知，所以我希望对于那里的一些专家来说，如何在没有完整的 java 安装的情况下解决这个问题会非常明显。即让java 别名知道java 二进制文件的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:42:03.073

哦，天哪……感谢雅各布在这方面帮助我……

将 java 位置添加到路径环境变量中，它就可以工作了。

例如

> C:\JavaLocation\jre6;C:\JavaLocation\jre6\bin

# extjs - 如何在 ExtJS 4 中应用本地化

> ID：12211883
> 
> 赞同：4
> 
> 时间：2012-08-31T08:48:05.810
> 
> 标签：extjs

是否有默认方法将本地化数据包全局应用于`/extjs/locale/`ExtJS 4.1 MVC 中的所有应用程序？

也许一些`Ext.Application`或`Ext.Loader`方法/属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:54:48.187

我不这么认为。您必须在 extjs/locale/ 中加载适当的文件

例如（tomcat 服务器），在 index.jsp 你可以做类似的事情

```
<script type="text/javascript" src="extjs/locale/ext-lang-<%=language %>.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-14T15:20:20.247

（也可以通过JS动态加载locale文件）

要本地化内置 Ext JS 组件，请添加以下代码`app.js`： `launch: function() { var head = document.getElementsByTagName('head')[0]; var script = document.createElement('script'); script.type = 'text/javascript'; script.src = "extjs/locale/ext-lang-" + navigator.language; head.appendChild(script); }`

要本地化自定义 Ext JS 组件，请使用[Locale.js](https://github.com/cwtuan/Locale.js/)。我们已经在两个 Ext JS 项目中使用了它。很简单。

# matlab - 如何识别矩阵中具有相同值的行和列

> ID：12211888
> 
> 赞同：1
> 
> 时间：2012-08-31T08:48:33.460
> 
> 标签：matlab

在我的研究中，我必须识别矩阵中具有相同值的行和列。

这里以矩阵的形式为例：

```
A= [60    27    45    72    22    14    56     2     8    39    18    12;
    72    27    60    45    11     7     3    23    41    17    56    39] 
```

然后，我想在第 1 列和第 2 列中识别第 1 行到第 4 行。

这是我的代码的一部分。

```
 done =all(ismember(A(1,1:4),A(2,1:4))); %Code that I want to ask you. 
```

请查看第 1-4 行和第 1-4 列；

如果我使用上面的代码，done 总是会给出 true (1)。但这不是我的愿望，因为`A(1,1)`不一样`A(2,1)`，那么`A(1,3)`也不一样`A(2,3)`，`A(1,4)`也不一样`A(2,4)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:14:38.967

如果您想检查 A(1,1:4) 中的值是否与 A(2,1:4) 中的值相同，您可以使用

```
done =all(A(1,1:4) == A(2,1:4)); 
```

# r - 使用ggplot2的图例上方和下方的空间

> ID：12211890
> 
> 赞同：15
> 
> 时间：2012-08-31T08:48:46.340
> 
> 标签：r, ggplot2

如果你看[这里](http://markthegraph.blogspot.com.au/2012/08/credit-aggregates-july-2012.html)的图表！您可以看到图例上方和下方有很多空白区域。我希望减少空间量。

示例代码：

```
library(ggplot2)
library(gridExtra)
library(reshape)
library(plyr)
library(scales)

theme_set(theme_bw())

rows <- 1:nrow(faithful)
data <- cbind(faithful, rows)
molten <- melt(data, id.vars='rows', measure.vars=c('eruptions', 'waiting'))

p <- ggplot() +
    geom_line(data=molten, 
        mapping=aes(x=rows, y=value, group=variable, colour=variable), size=0.8) +
    scale_colour_manual(values=c('red','blue')) +
    opts(title='Title') +
    xlab(NULL) + ylab('Meaningless Numbers') +
    opts(
        legend.position='bottom',
        legend.direction='horizontal',
        legend.title=theme_blank(),
        legend.key=theme_blank(),
        legend.text=theme_text(size=9),
        legend.margin = unit(0, "line"),
        legend.key.height=unit(0.6,"line"),      
        legend.background = theme_rect(colour='white', size=0)
    )

ggsave(p, width=8, height=4, filename='crap.png', dpi=125) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-05-28T12:31:56.620

To remove the margins of the legend (negative values reduce the white space even more):

```
p + theme(legend.margin=margin(t=0, r=0, b=0, l=0, unit="cm"))
p + theme(legend.margin=margin(t=0, r=0, b=-0.5, l=0, unit="cm")) 
```

You can also remove the lower part of the plot margin by specifying negative numbers (but make sure that you don't cut off your legend):

```
p + theme(plot.margin = unit(x = c(0, 0, -0.2, 0), units = "cm")) 
```

Illustrations: [ggplot2, legend on top and margin](https://stackoverflow.com/questions/17073772/ggplot2-legend-on-top-and-margin)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T09:42:27.517

以下是两个额外的选项，可让您缩小图例周围的空间：

```
p + theme(
      legend.key.height=unit(0, "cm"),      
      plot.margin = unit(c(1,0.5,0,0.5), "lines")
    ) 
```

该选项`plot.margin`描述了地块周围有多少空间。第三个参数描述了绘图下方的空间量。将其设置为零会有所帮助。

![在此处输入图像描述](../Images/78549eda77467fd20d7415b99f0ddf74.png)

# python - 有没有办法在内存中保存从 Python 脚本创建的大量字符串，并可供当前的 bash shell 使用？

> ID：12211892
> 
> 赞同：0
> 
> 时间：2012-08-31T08:48:47.860
> 
> 标签：python, bash

想象一下，我在一个 Python 程序中列出了很多文件路径，然后想在终端中使用它。

我可以将它存储到一个文件中。

我可以在 Python 程序之外通过管道传输它，以便 bash 可以读取它。

但是可以只是设置某种变量，以便当前shell（运行脚本的shell）作为普通bash变量访问输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:25:43.117

你可以设置一个环境变量。

但是，要让当前的 shell 可以访问 hit，您可能必须使用一些 hack：

在您的 python 脚本中，创建一个临时`.sh`文件，该文件将使用 设置环境变量`export yourname=yourlist`，然后运行并删除它。

* * *

另一种方法是使用例如使用python 模块的[Unix Domain Sockets](http://en.wikipedia.org/wiki/Unix_domain_socket) ，并使用或或使用python模块`socket`在您的shell 中读取它。`socat``netcat`[`mmap`](http://docs.python.org/library/mmap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:39:04.530

1.  创建一个 python 程序将文件打印到标准输出
2.  使用反引号执行 python 脚本以将脚本的输出存储在 bash 变量中

请注意，使用“$var”访问 bash 变量的不同之处在于保留了换行符，而使用普通的 $var 将它们更改为空格。

```
paddy$ echo $SHELL
/bin/bash
paddy$ unset frompython 
paddy$ cat alltxt.py 
from glob import glob
print("\n".join(glob("*.txt")))
paddy$ python alltxt.py 
entry3.txt
entry2.txt
test_in2.txt
infile.txt
test_in.txt
entry.txt
entry1.txt
testfile.txt
paddy$ frompython=`python alltxt.py`
paddy$ echo $frompython
entry3.txt entry2.txt test_in2.txt infile.txt test_in.txt entry.txt entry1.txt testfile.txt
paddy$ echo "$frompython"
entry3.txt
entry2.txt
test_in2.txt
infile.txt
test_in.txt
entry.txt
entry1.txt
testfile.txt
paddy$ 
```

# reporting-services - Reporting Services：解决方案中文件的完整路径如何相互关联，如何编辑路径？

> ID：12211894
> 
> 赞同：0
> 
> 时间：2012-08-31T08:48:58.407
> 
> 标签：reporting-services, relative-path, relativesource, ssrs-2012

Reporting Services 2012 中的报告文件、解决方案文件和项目文件的完整路径（项目文件和报告所在的目录）以何种方式相互关联？我试图重命名解决方案的一个文件夹并打开解决方案，解决方案理解这一点，这表明完整路径不是绝对的。

我还想知道如何更改文件的“完整路径”属性，例如项目文件路径或报告文件路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:10:39.820

我不确定我明白吗？如果您问我是否要显示我的所有报告以便用户可以选择一个，那么您可以有一个 SQL 表，其中一列中的报告名称和另一列中的路径，例如`/reportservice/ProjectA/Report1`

让您的应用程序显示报表、名称，当用户进行选择索引时，让您的应用程序代表您将用户名和密码传递给报表服务器。

# jquery - "-moz-","-webkit-","-o-","-ms-"

> ID：12211899
> 
> 赞同：-1
> 
> 时间：2012-08-31T08:49:04.957
> 
> 标签：jquery, html

我正在使用现有的 jQuery 代码，其中包括一组浏览器前缀：

```
"-moz-", "-webkit-", "-o-", "-ms-" 
```

该代码不适用于 Google Chrome。此数组中是否包含 Google Chrome 的前缀？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:05:05.130

这些不是**jQuery**代码，而是**CSS**前缀

> -moz- Firefox、-webkit- Safari 和 Chrome -o- 用于 Opera -ms- 用于 Internet Explorer

# ios - 使用 iPod Library Access API 创建播放列表？

> ID：12211900
> 
> 赞同：1
> 
> 时间：2012-08-31T08:49:15.020
> 
> 标签：ios, cocoa-touch, media-player

是否可以使用 iPod Library Access API 在 iOS 上创建播放列表？我所说的播放列表是指一个在全球范围内持续存在并且可以在音乐应用程序中访问的播放列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:51:50.867

不，应用程序根本无法将任何信息写入 iPod 库，至少在 iOS7.1 和更早版本中是这样。

# java - 如何以编程方式将java文件复制到工作区？

> ID：12211901
> 
> 赞同：0
> 
> 时间：2012-08-31T08:49:19.170
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-jdt

我正在尝试使用 AST 从头开始​​创建一个 java 文件，但我需要花费更长的时间才能完成。我想到的是创建 java 文件，然后创建项目和包，然后将该文件复制到该包。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:57:37.587

我使用[Apache Velocity](http://velocity.apache.org)，以便从模板创建 Java 类。就我而言，我必须使用 Eclipse Wizards 从（速度）模板创建一些类（和 maven pom）。但是如果你想修改这些类，那么最好的选择是 AST/JDT。

[http://sdqweb.ipd.kit.edu/wiki/JDT_Tutorial:_Creating_Eclipse_Java_Projects_Programmatically](http://sdqweb.ipd.kit.edu/wiki/JDT_Tutorial%3a_Creating_Eclipse_Java_Projects_Programmatically)

展示了如何使用 JDT 创建一个 java 项目并随后配置您的类路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:11:14.983

您可以使用[JBoss forge](http://forge.jboss.org/)生成有问题的 java 类。它有编写脚手架插件的api。它使用 Apache Velocity 模板来做到这一点。

[如果您是 Spring 人， Spring Roo](http://www.springsource.org/spring-roo)也可以是另一种选择；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:47:48.757

[`IFile#setContents(InputStream ...)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/resources/IFile.html#setContents%28java.io.InputStream,%20boolean,%20boolean,%20org.eclipse.core.runtime.IProgressMonitor%29)似乎是一个不错的候选人。

您还可以使用[`ImportOperation`](https://stackoverflow.com/a/12485531/60462)将文件从任何地方（包括工作区外的文件系统）导入项目。

# asp.net-mvc-3 - ASP.NET Web API 身份验证和验证

> ID：12211904
> 
> 赞同：0
> 
> 时间：2012-08-31T08:49:37.923
> 
> 标签：asp.net-mvc-3, validation, authentication, asp.net-web-api

我使用 ASP.NET Web API 并通过参考[http://stevescodingblog.co.uk/basic-authentication-with-asp-net-webapi/使用身份验证](http://stevescodingblog.co.uk/basic-authentication-with-asp-net-webapi/)

效果很好。如果请求没有授权标头，则响应 HttpStatusCode 为“未授权”。

但是，当一些 json 数据从客户端发送的某些列不正确时，响应 HttpStatusCode 是“内部服务器错误”，尽管请求没有授权标头。

```
[BasicAuthentication]
public HttpResponseMessage Create(Customer customer)
{
  // 
}
public class Customer{
  public int id{set;get;}
  public string name{set;get;}    
} 
```

比如发送POST方法到/Create，Content-Type是application/json，Request Body { "id": "abc", "name": "someone" }(id is wrong:not int but string) and don '没有授权标头。响应 HttpStatusCode 是“内部服务器错误”而不是“未经授权”。

也许创建客户实例早于授权。您知道先更改授权吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:59:26.393

如果您已将 BasicAuthenthication 属性创建为 ActionFilterAttribute，则可以尝试将其更改为 AuthorizationFilterAttribute。然后 OnActionExecuting 将更改为 OnAuthorization。我认为其余的大部分内容应该非常相似。

# bash - greping 值！= *.file 扩展名

> ID：12211906
> 
> 赞同：1
> 
> 时间：2012-08-31T08:49:51.340
> 
> 标签：bash, unix, grep

不是 100% 关于如何去做。

基本上我的应用程序创建两个文件输出。

```
file
file.ext 
```

搜索目录时，它总是返回两个文件。我只希望与

```
file 
```

我怎样才能只为文件做一个grep？或者 grep 甚至是正确的命令？

```
!grep *.ext 
```

伪代码^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:55:14.233

为什么不只是：

```
grep foobar file 
```

或者如果你想搜索你的目录

```
find . -name 'file' | xargs -r grep boofar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:53:25.530

您可以尝试使用 grep 'file$'，即选择以 file 结尾的行，之后什么都没有。或者，您可以使用 grep -v 反转结果。

```
# (echo "file"; echo "file.txt") | grep file$
file
# (echo "file"; echo "file.txt") | grep -v .ext
file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:54:15.887

我不知道你想用 grep 做什么，但是如果你想检查一个文件是否存在，你只需这样做：

```
if [ -r /some/path/file ]; then
  echo "File is readable."
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:54:27.533

Grep 有一个`-v`反转含义的标志（查找*不*包含该模式的行）：

```
ls /your/directory | grep -v '\.ext$' 
```

这将排除每个以`.ext`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T08:55:26.613

尝试

```
grep -v option 
```

-v 做反向匹配

有关详细信息，请执行`$ man grep`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T16:45:28.107

要生成与模式不匹配的所有文件的列表，请`-not`在 find 中使用。所以你要：

```
find . -not -name '*.ext' 
```

# c# - 我收到一个空错误

> ID：12211909
> 
> 赞同：0
> 
> 时间：2012-08-31T08:50:09.293
> 
> 标签：c#, xna, xna-4.0

我在这一行收到一条错误消息：

```
player = new Player(this.Content.Load<Texture2D>("Player"),
                    actor.position, 
                    this.spriteBatch, 
                    enemyManager); 
```

这告诉我`actor`对象为空。我该如何克服这种情况？

确切的错误是：

> *字段`Shmup.MyGame.actor`永远不会分配给，并且将始终具有其默认值`null`。*

这是我的代码：

```
class MyGame // [edit:] added based on below constructor
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    Player player;
    EnemyManager enemyManager;
    Actor actor;

    public MyGame()
    {
        graphics = new GraphicsDeviceManager(this);
        IsMouseVisible = true;
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {
        // TODO: Add your initialization logic here
        base.Initialize();
    }

    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);
        startTheGame(); 
    }

    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
        {
            this.Exit();
        }

        this.player.Update(gameTime);
        this.enemyManager.Update(gameTime);

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Maroon);
        this.spriteBatch.Begin();
        this.player.Draw(gameTime);
        this.enemyManager.Draw(gameTime);
        this.spriteBatch.End(); 
        base.Draw(gameTime);
    }

    void startTheGame()
    {
        enemyManager = new EnemyManager(this.Content.Load<Texture2D>("Enemy"), new Vector2(16), this.spriteBatch);
        player = new Player(this.Content.Load<Texture2D>("Player"),actor.position, this.spriteBatch, enemyManager);
        enemyManager.StartTheGame(10);
    }
} 
```

* * *

```
public class Actor
{
   public Texture2D texture;
   public Vector2 origin;
   public SpriteBatch spriteBatch;
   public Vector2 position;
   public Rectangle boundingRectangle;

    public Vector2 Position
    {
         get { return position; }
         set 
         { 
             position = value;
             boundingRectangle = new Rectangle((Int32)(position.X - origin.X), (Int32)(position.Y - origin.Y), texture.Width, texture.Height);
         }
    }        

    public Rectangle BoundingRectangle
    {
        get { return boundingRectangle; }
    }

    public Actor(Texture2D texture, Vector2 origin, SpriteBatch spriteBatch, Vector2 initialPosition)
    {
        this.texture = texture;
        this.origin = origin;
        this.spriteBatch = spriteBatch;
        this.position = initialPosition;

        boundingRectangle = new Rectangle((Int32)(initialPosition.X - origin.X), (Int32)(initialPosition.Y - origin.Y), texture.Width, texture.Height);
    }

    public virtual void Update(GameTime gameTime)
    { }

    public virtual void Draw(GameTime gameTime)
    {
        this.spriteBatch.Draw(texture, position - origin, Color.White);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:55:31.673

就像错误说的那样，您需要创建一个 Actor 类的实例。

在游戏构造函数或 startTheGame 方法中（在创建 Player 类的实例之前），您应该创建一个 Actor 类的实例，例如：

this.actor = new Actor(变量...);

# android - 使用 PhoneGap 调用异步 AJAX 时 UI 冻结

> ID：12211910
> 
> 赞同：1
> 
> 时间：2012-08-31T08:50:10.197
> 
> 标签：android, iphone, ajax, cordova, asynchronous

我正在开发一个 PhoneGap 应用程序，它在我的计算机浏览器和 iOS 模拟器中运行良好，但是在设备（iPhone 和 Android）上调用异步 AJAX 时 UI 冻结。

例如，我正在使用动画 GIF 图像向我的用户显示内容正在加载，我同时完成了 10 个调用，但 UI 正在等待 10 个调用完成，然后才更改屏幕内容。问题是加载动画甚至没有完成。

这是我的ajax调用：

```
GetContribution: function(me, id) {

$.ajax({ 
    cache: false, 
    async: true, 
    type: "GET", 
    dataType: "json",
    url: AN_URL,
    data: 'id='+id+'&type=0',
    contentType: "application/json;charset=utf-8",
    accept: "application/json", 
    beforeSend: configureHeader,
    success: function (data) {
        me.set(data.GetContributionResult);
    me.setPZLoaded(true);
        me.grabContributions();
        me.trigger('change');
    },
    error: function (r) {
        console.log(r);
    }
});

}, 
```

PhoneGap 上的异步调用有什么特别的事情要做吗？

谢谢你的帮助。

西里尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:46:42.373

所以ajax调用没有问题。问题仅在于 ajax 调用的加载程序。为此，有一个用于 ajax 加载器的 jquery 库。试试看。它会解决你的问题。通过这个链接，

[http://jquery.malsup.com/block/](http://jquery.malsup.com/block/)

# php - 将字段数据处理到mysql数据库的好方法

> ID：12211911
> 
> 赞同：0
> 
> 时间：2012-08-31T08:50:11.977
> 
> 标签：php, jquery, mysql, forms, input

将输入、选择和文本区域值输入我的数据库的最有效方法是什么？

是否会给出与将要放置值的表中的列对应的所有字段 ID？

这是我通常做的，但不禁感到必须有一个更有效的方法：

```
function saveAll() {
    var postString = '' ;
    $('#manageCustomerDialog select option:selected, #manageCustomerDialog input').each(function(){
        currentField = $(this).attr('id') ;
        if(!currentField)
        {
            currentField = $(this).parent().attr('id') ;
        }
        currentVal = encodeURIComponent($(this).val()) ;
        postString += '&'+currentField+'='+currentVal ;
    })

    simpleJAX(CONTROLER, 'mode=SAVE_DATA'+postString, function(data){
        alert('Saved!') ;
    })
}​ 
```

CONTROLER 是 PHP 文件的 url。

然后，我将转换 PHP 文件中的 $_POST 数据以将值放入列中。

* * *

不确定我是否理解。你的意思是用 SQL 查询作为值创建一个隐藏的表单输入并传递它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:12:26.027

首先在变量内部创建查询，其中的其他变量表示查询字符串或 $_REQUEST 变量。这样，您可以在创建查询字符串之前分配所有变量。它会更清晰并且有效！=))

# asp.net - Asp.Net 授权规则优先级

> ID：12211913
> 
> 赞同：2
> 
> 时间：2012-08-31T08:50:18.640
> 
> 标签：asp.net, authorization

我正在为 Microsoft 考试而学习，并且正在处理一些示例问题。我有这个问题：

“您正在开发一个配置为使用成员资格和角色提供程序的 ASP.NET Web 应用程序。

您需要允许所有用户执行 HTTP GET，但必须只允许名为 Moderator 的用户执行 POST 操作。您应该将哪个配置添加到 web.config 文件中？”

```
<authorization>
  <deny verbs="POST" users="*" />
  <allow verbs="POST" users="Moderator" />
  <allow verbs="GET" users="*" />
</authorization>

<authorization>
  <allow verbs="GET" users="*" />
  <allow verbs="POST" users="Moderator" />
  <deny verbs="POST" users="*" />
</authorization> 
```

还有另外两个答案，但它们显然是错误的，所以我没有在这里复制它们。

我可以发现两组规则之间的唯一区别是规则的放置顺序。

正确答案是第二组规则。这里的规则首先允许“主持人”的 POST 访问，然后为其他所有人删除它。这对我来说似乎违反直觉 - 给 1 人特权，然后从每个人那里删除该特权，但之后 1 人仍然拥有特权。

如果第一组规则更有意义的话——首先拒绝所有人，然后有选择地授予个人访问权限。显然这是错误的！

谁能解释为什么会这样，以便我能更好地理解这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:57:38.460

这只是先到先得的情况。ASP.NET 按顺序处理规则，直到找到匹配的规则，因此在第一种情况下，`deny`它将`POST` *在*到达`allow`.

> If anything the first set of rules makes more sense - first deny everyone then selectively give access to individuals.

That's not quite how it works. The rules are checked *per request*, therefore, what the first rules are basically saying is:

1.  Deny all `POST` requests from everyone.
2.  Allow `POST` requests for Moderator.
3.  Allow `GET` requests for everyone.

All in that order. The problem here is when Moderator sends in a `POST` request, it will match the first rule (as it's for *everyone*) and be denied. However, the second scenario is saying:

1.  Allow `GET` requests for everyone.
2.  Allow `POST` requests for Moderator.
3.  Deny `POST` requests for everyone.

So when Moderator sends a `Post` request, it will match the 2nd rule and allow the request to continue. If anyone else sends in a `POST` request, they will hit the 3rd rule and be denied.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:10:23.440

The rules are evaluated in order, and the first rule that matches the current "set of attributes" (=request type, user is authenticated or not, user roles etc) is used. From [MSDN](http://msdn.microsoft.com/en-us/library/wce3kxhd%28v=vs.80%29.aspx):

> Given a set of merged rules for an application, ASP.NET starts at the head of the list and checks rules until the first match is found. The default configuration for ASP.NET contains an element, which authorizes all users. (By default, this rule is applied last.) If no other authorization rules match, the request is allowed. If a match is found and the match is a deny element, the request is returned with the 401 HTTP status code. If an allow element matches, the module allows the request to be processed further.

# reporting-services - 在 SSRS 中展示独特风格的工具？

> ID：12211919
> 
> 赞同：0
> 
> 时间：2012-08-31T08:50:33.150
> 
> 标签：reporting-services, ssrs-2008

就像在 Word 中一样，您可以查看正在使用的样式

例如 Arial 10pt 粗体中心，Tahoma 12pt 斜体

有没有办法在 SSRS 中轻松做到这一点？

我继承的报告中有很多小文本框，并希望它保持一致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:06:11.307

我可能有一些坏消息要告诉你。据我所知，**不支持“样式”**，因为“与内容分离”，如 CSS 来自 HTML 或 MS Word 2007/2010 样式。

所有样式属性（例如字体）都在每个项目上单独设置。即使您单击 tablix 中的一行并更改字体，在幕后，设计器也会为该行中的每个单元格单独设置此属性。

但是，如果您的目标是使事情保持一致，那么在代码编辑器（或您最喜欢的文本编辑器）中打开 RDL 可能会有所帮助。它只是一个 XML 文件，您可以像这样识别字体项：

```
<Style>
  <FontFamily>Arial Black</FontFamily>
  <FontSize>12pt</FontSize>
</Style> 
```

通过一些巧妙的搜索和替换功能，您至少可以做一些事情，例如标准化字体系列，例如在整个 RDL 中将“Tahoma”替换为“Verdana”。

通过一些谷歌搜索，我发现[了这篇相关的博客文章](http://www.keepitsimpleandfast.com/2011/11/how-to-implement-style-sheets-in-your.html)，作者是有创意并解决了 SSRS 的这个限制，实现了某种伪样式表。如果您真的准备做类似的事情，这可能会进一步帮助您。

# infragistics - 如何从子带 Infragistics.UltraGrid 更改列的宽度

> ID：12211921
> 
> 赞同：2
> 
> 时间：2012-08-31T08:50:50.540
> 
> 标签：infragistics, databound, ultrawingrid

```
 public class Ticket
    {
        public bool Selected { get; set; }
        public string TicketID { get; set; }
        public List<TicketHistory> History {get;set;}
    }

    public class TicketHistory
    {
            public string Status {get;set;}
    } 
```

我有一个带有多频段的 Infragistics 超网格。

```
ultragrid.DisplayLayout.ViewStyle = ViewStyle.MultiBand; 
```

ultragrid 绑定到票证列表（第一个波段）第二个波段是带有 TicketHistory 列表的历史

问题是第二个波段的状态列与第一个波段的选定列（复选框列）的大小相同。如何从子带更改列（状态）的宽度？

**1.**我尝试在 InitializeLayout 处理程序中更改宽度，但没有成功。

**2.**我在 ultragridcolumn 上尝试了 PerformAutoresize，但没有奏效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T08:59:17.990

您应该将属性设置`AllowColSizing`为`AllowColSizing.Free`

您可以使用**UltraGrid 设计器**或在代码中使用此行设置此属性：

```
grid.DisplayLayout.Override.AllowColSizing = 
                   Infragistics.Win.UltraWinGrid.AllowColSizing.Free; 
```

这将使网格中的每个子带能够根据父带上相应位置的列的大小独立地调整其列的大小。

# android - 使用两个片段

> ID：12211924
> 
> 赞同：0
> 
> 时间：2012-08-31T08:51:11.043
> 
> 标签：android, android-fragments, android-activity, android-listfragment

有两个片段。但是，当有一个 ListFragment 和一个 DetailFrament 时，它与教程的情况略有不同，因为我有两个 ListFragment。现在的问题是当我在一个片段中使用它时：

```
getListView().addFooter(someView); 
```

它也会自动将此页脚（或标题）分配给另一个片段，因为 getListView() 方法“获取活动的列表视图小部件”和我的两个 ListFragments 都在主活动中。

任何想法如何解决它？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:32:18.113

考虑通过 xml 中的 id 引用您的列表视图吗？然后您可以在 oncreate 中找到列表视图并执行以下操作：

```
myListView.addFooter(someView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:18:39.003

乌胡解决了。

问题是我的一个片段实际上被称为“ListFragment”，在某些时候我的片段和实际的 ListFragment 类混淆了，这导致了一个问题。

我从[本教程](http://www.vogella.com/articles/Android/article.html)中汲取了这个想法，但似乎那个人已经对其进行了更好的调整。无论如何，我会在第一次打他的脸。

# php - 隐藏字符（看起来像子弹）破坏文件

> ID：12211926
> 
> 赞同：1
> 
> 时间：2012-08-31T08:51:17.697
> 
> 标签：php, database, unicode, utf-8, notepad

我有一个隐藏字符没有出现在数据库（phpmyadmin）或网站中的问题。网站有 utf-8 字符编码。如果我将带有“隐藏”字符的字符串复制/粘贴到记事本中，我可以看到它。它看起来就像一个子弹字符，但被隐藏了。这是什么类型的字符，可以用 PHP 删除吗？

能够输入此字符的用户正在使用 Mac，并且可能正在将文档（可能是 unicode？）复制/粘贴到我们网站上的表单中并保存。所以这个字符在 utf-8 编码中不可见，但如果我将字符串复制到记事本文档中则可见。

这是字符串末尾的隐藏字符。看起来像子弹：

![](../Images/6df2615477d3e658fd2f05a69cb39eea.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:55:20.553

复制角色，然后启动 PowerShell 并执行以下操作（是的，这很复杂，抱歉）：

```
'U+{0:X4}'-f+[char]'<PASTE>' 
```

并将字符粘贴到它说的位置`<PASTE>`。它应该为您提供该字符的 Unicode 代码点。然后，您应该能够编写将其从字符串中删除的内容，但在我看来，不应该有任何破坏文档布局的输入，除了 RTL 标记之类的有趣内容。

* * *

上面的简短解释：`[char]'x'`将单个字符串转换为 char，`+`然后将其视为数字（类似于`[int]`，但更短）。其余的是格式字符串和格式运算符`-f`。

# sql - SQL：如何根据列的部分字符串选择列

> ID：12211930
> 
> 赞同：0
> 
> 时间：2012-08-31T08:51:19.030
> 
> 标签：sql, oracle

我这里有问题。

我想根据该列的 max(timestamp) 选择一列，但我一直在检索它。假设我有以下数据：

```
Comments
========
abcd 2012/08/14 8:03:03 AM more data inside <- I want to retrieve this
hshsh 2012/08/13 1:03:03 AM some other comments
hahhah 2012/08/10 8:03:03 PM test it. 
```

我检索最大值（时间戳）的 SQL 是

```
select max(substr(comments, instr(comments, '2012'), instr(comments, 'M') - 6)) from TABLEA 
```

但是如何根据此语句选择此列？

**编辑：**

是否有可能做到这一点：

```
select comments from tableA where comments like (select max(substr(comments,   instr(comments, '2012'), instr(comments, 'M') - 6)) from TABLEA) 
```

我希望得到评论列的第一行，但没有输出。我希望我不会太含糊...我正在使用 Oracle SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:53:33.333

尝试：

```
select *
from 
(
    select comments
    from TABLEA
    order by substr(comments, instr(comments, '2012'), instr(comments, 'M') - 6) desc
)
where rownum = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:00:56.100

你可以试试：

```
 select 
  comments, substr(comments, instr(comments, '2012'), instr(comments, 'M') - 6) YEAR
  from TABLEA
  order by substr(comments, instr(comments, '2012'), instr(comments, 'M') - 6) desc
  where rownum = 1 
```

# opengl-es - 在opengl es 2.0中以全屏居中并以正确的比例渲染纹理

> ID：12211932
> 
> 赞同：1
> 
> 时间：2012-08-31T08:51:35.390
> 
> 标签：opengl-es

我将位图加载到渲染器类中，我想以正确的比例渲染屏幕中心的纹理，并且尽可能大

顶点和纹理数据：

private final float[] mVerticesData = { -1f, 1f, 0.0f, // 位置 0 0.0f, 0.0f, // TexCoord 0 -1f, -1f, 0.0f, // 位置 1 0.0f, 1.0f, / / TexCoord 1 1f, -1f, 0.0f, // 位置 2 1.0f, 1.0f, // TexCoord 2 1f, 1f, 0.0f, // 位置 3 1.0f, 0.0f // TexCoord 3 };

```
private final short[] mIndicesData =
{ 
        0, 1, 2, 0, 2, 3 
}; 
```

和绘制方法：

公共无效 onDrawFrame（GL10 glUnused）{

```
 // Set the viewport
    GLES20.glViewport(0, 0, bitmap.width, bitmap.height);

    // Clear the color buffer
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // Use the program object
    GLES20.glUseProgram(mProgramObject);

    // Load the vertex position
    mVertices.position(0);
    GLES20.glVertexAttribPointer ( mPositionLoc, 3, GLES20.GL_FLOAT, 
                                   false, 
                                   5 * 4, mVertices );
    // Load the texture coordinate
    mVertices.position(3);
    GLES20.glVertexAttribPointer ( mTexCoordLoc, 2, GLES20.GL_FLOAT,
                                   false, 
                                   5 * 4, 
                                   mVertices );

    GLES20.glEnableVertexAttribArray ( mPositionLoc );
    GLES20.glEnableVertexAttribArray ( mTexCoordLoc );

    // Bind the texture
    GLES20.glActiveTexture ( GLES20.GL_TEXTURE0 );
    GLES20.glBindTexture ( GLES20.GL_TEXTURE_2D, mTextureId );

    // Set the sampler texture unit to 0
    GLES20.glUniform1i ( mSamplerLoc, 0 );

    GLES20.glDrawElements ( GLES20.GL_TRIANGLES, 6, GLES20.GL_UNSIGNED_SHORT, mIndices );
} 
```

现在我用位图尺寸设置视口（不起作用）。我应该如何计算纹理的视口尺寸以适应屏幕保持比例？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:17:52.483

可能你应该使用 ModelViewPrjoection 矩阵。看看这个来源 [http://code.google.com/p/android-opengles-samples-for-vikulov-blogspot-com/source/browse/trunk/OpenglTemplate/src/com/vikulov/opengl/MyGLRenderer.java](http://code.google.com/p/android-opengles-samples-for-vikulov-blogspot-com/source/browse/trunk/OpenglTemplate/src/com/vikulov/opengl/MyGLRenderer.java)

# jquery - 每次按键都会在隐藏的文本输入中插入一个字符

> ID：12211937
> 
> 赞同：1
> 
> 时间：2012-08-31T08:52:00.107
> 
> 标签：jquery

每次在另一个文本框中按下一个键时，我都试图插入一个特定的字符，比如字母“H”。

例如。

文本框 1：输入您的姓名
文本框 2：HHHHHHHHHHHHHH

我试过了

```
$('#cartText16132').keyup( function() {
    $('input#test').val('1');
}); 
```

但这只会插入一个“1”

希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:54:09.710

下面的代码应该做你想做的事：

```
$("#cartText16132").keyup(function() {
    $("#test").val(this.value.replace(/./g, "H"));
});​ 
```

**演示：http:** [//jsfiddle.net/JhpHL/](http://jsfiddle.net/JhpHL/)

* * *

没有正则表达式的另一种解决方案：

```
$("#cartText16132").keyup(function() {
    $("#test").val(Array(this.value.length + 1).join("H"));
});​ 
```

**演示：http:** [//jsfiddle.net/JhpHL/1/](http://jsfiddle.net/JhpHL/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:54:13.537

```
$('#cartText16132').keyup( function(e) {
    $('input#test').val('H');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T08:54:30.490

尝试这样做：

```
$('#cartText16132').keyup( function() {
  var input = $('input#test');
  input.val( input.val() + "H" );
}); 
```

问题是您每次都替换该值，而不是附加它。所以你用'1'替换你的'1'导致'1'而不是'11'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:54:39.140

您正在用每个 keyup 覆盖该值。您需要附加：

$('input#test').val($('input#test').val()+'1');

# javascript - 在不影响视图的情况下操作 DOM 数据

> ID：12211939
> 
> 赞同：1
> 
> 时间：2012-08-31T08:52:05.153
> 
> 标签：javascript, dom

```
<!DOCTYPE html>
<html><body>

<p id="intro">Hello <em id="abcd">intro</em> World!</p>

<script type="text/javascript">
var txt=document.getElementById("intro").innerHTML;
var el = document.createElement("span");
el.innerHTML = txt;
var aa = el.getElementById("abcd").innerHTML;
alert( aa );
</script>
</body></html> 
```

以上是一个简单的片段。实际上我有一个 HTML 编辑器，当用户保存数据时，我应该只保存所需的内容。在这里，我获取元素的内容并使用 DOM 对其进行操作，并将详细信息传递给服务器。这样我就不会更改页面内容（用户视图保持不变），他/她将继续编辑文档。

以上是一个简单的示例，但在实际情况下，我必须删除、更改和移动某些元素。上面的代码失败了`el.getElementById("abcd").innerHTML`。感谢任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:59:20.690

您可以创建一个隐藏的 iframe 来操作您的所有更改，从而创建一个单独的 DOM，然后简单地拉回您想要的结果。

```
var iframe;
if (document.createElement && (iframe = document.createElement('iframe'))) {
    iframe.name = iframe.id = "externalDocument";
    iframe.className = "hidden";
    document.body.appendChild(iframe);

    var externalDocument;
    if (iframe.contentDocument) {
        externalDocument = iframe.contentDocument;
    } else if (iframe.contentWindow) {
        externalDocument = iframe.contentWindow.document;
    }
    else if (window.frames[iframe.name]) {
        externalDocument = window.frames[iframe.name].document;
    }

    if (externalDocument) {
        externalDocument.open();
        externalDocument.write('<html><body><\/body><\/html>');
        externalDocument.close();

        /* Run your manipulations here */
        var txt = document.getElementById("intro").innerHTML;
        var el = document.createElement("span");
        el.innerHTML = txt;

        /* Attach your objects to the externalDocument */
        externalDocument.body.appendChild(el);

        /* Reference the externalDocument to manipulate */
        var aa = externalDocument.getElementById("abcd").innerHTML;
        alert(aa);
    }

    /* Completed manipulation - Remove iFrame */
    document.removeChild(iframe);
} 
```

我在这里工作：http: [//jsfiddle.net/ucpvP/](http://jsfiddle.net/ucpvP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:01:36.977

尝试使用下面给出的 jQuery。

```
 function SaveData() //Your add function
    {
       var txt=$("#intro").html();
       $(document).append("<span id='abcd'>" + txt+ "</span>");
       var aa = $("#abcd").hmtl();
       alert(aa);
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:12:31.460

您可以使用从不附加到 DOM 的 DOM 元素。我使用这个“清理”功能：

```
 function cleanup(str){
    var tester = document.createElement('div'),
        invalid, result;
    tester.innerHTML = str;

    //elements I don't allow
    invalid = tester.querySelectorAll('script,object,iframe,style,hr,canvas');

    // the cleanup (remove unwanted elements)
    for (var i=0;i<invalid.length;(i+=1)){
      invalid[i].parentNode.removeChild(invalid[i]);
    }

    result = tester.innerHTML;
    tester = invalid = null;

    //diacritics to html-encoded
    return result.replace(/[\u0080-\u024F]/g,
                          function(a) {return '&#'+a.charCodeAt(0)+';';}
                         )
                 .replace(/%/g,'%25');
  }
  //usage:
  cleanup(document.getElementById("intro").innerHTML); 
```

您可以使用自己的代码扩展该功能，以删除、更改和移动某些元素。

# mysql - 在我的 SQL 中选择数据并按时间间隔分组

> ID：12211941
> 
> 赞同：0
> 
> 时间：2012-08-31T08:52:12.073
> 
> 标签：mysql, sql

我需要一些关于我在 HighChart 中制作图表所需的 SQL 语句的帮助。

下面是我现在使用的 SQL 语句，`nrOfCalls`用于`veryGood`计算呼叫中心员工的效率。基本上，我需要在整个工作日中以 Unix 时间戳为间隔以 15 分钟为间隔对结果进行分组，而不是一整天的总数。

```
SELECT queue, 
      SUM(IF(verb='CONNECT',1,0)) as nrOfCalls ,
      SUM(IF(data1<=60,1,0)) AS veryGood,
      date(FROM_UNIXTIME(time_id)) as xAxis 
FROM queue_log 
WHERE verb = 'CONNECT' 
AND time_id > 1345680001 
AND time_id < 1346457599 
AND queue IN (
    20201, 20202, 20203, 20204, 20205, 20206, 20207, 20208, 20209, 20210, 20211, 20212
) 
GROUP BY xAxis 
```

我试图搜索网络和 stackoverflow，但我找不到任何适合我所面临问题的东西。

提前感谢您的任何建议。- 尼古拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:22:43.247

你需要写的是xAxis应该是升序还是降序

# python - 如何在Python中匹配字符串或字符的开头

> ID：12211944
> 
> 赞同：6
> 
> 时间：2012-08-31T08:52:20.757
> 
> 标签：python, regex, findall

我有一个由参数号_参数号组成的字符串：

```
dir = 'a1.8000_b1.0000_cc1.3000_al0.209_be0.209_c1.344_e0.999' 
```

我需要获取所选参数背后的数字，即

*   `par='be'`-->需要0.209
*   `par='e'`--> 需要 0.999

我试过了：

```
num1 = float(re.findall(par + '(\d+\.\d*)', dir)[0]) 
```

但是因为`par='e'`这将匹配`0.209` *and* `0.999`，所以我尝试将参数与字符串的开头或下划线一起匹配：

```
num1 = float(re.findall('[^_]'+par+'(\d+\.\d*)', dir)[0]) 
```

由于某种原因它不起作用。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:54:52.557

您的`[^_]`模式匹配*任何不是下划线的字符*。

改用 a `(..|..)` *or*分组：

```
float(re.findall('(?:^|_)' + par + r'(\d+\.\d*)', dir)[0]) 
```

我在那里使用了一个`(?:..)`非捕获组，这样它就不会干扰您的原始组索引。

演示：

```
>>> import re
>>> dir = 'a1.8000_b1.0000_cc1.3000_al0.209_be0.209_c1.344_e0.999'
>>> par = 'e'
>>> re.findall('(?:^|_)' + par + r'(\d+\.\d*)', dir)
['0.999']
>>> par = 'a'
>>> re.findall('(?:^|_)' + par + r'(\d+\.\d*)', dir)
['1.8000'] 
```

更详细地说，当使用字符组 ( `[..]`) 并以插入符号 ( )*开始*该组时，`^`您会反转字符组，将其从匹配列出的字符变为匹配*其他所有*字符：

```
>>> re.findall('[a]', 'abcd')
['a']
>>> re.findall('[^a]', 'abcd')
['b', 'c', 'd'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:12:03.783

没有`regex`解决方案：

```
def func(par,strs):
    ind=strs.index('_'+par)+1+len(par)
    ind1=strs.find('_',ind) if strs.find('_',ind)!=-1 else len(strs)
    return strs[ind:ind1] 
```

**输出：**

```
>>> func('be',dir)
'0.209'
>>> func('e',dir)
'0.999'
>>> func('cc',dir)
'1.3000' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:13:04.013

没有正则表达式的解决方案：

```
>>> def get_value(dir, parm):
...     return map(float, [t[len(parm):] for t in dir.split('_') if t.startswith(parm)])
... 
>>> get_value('a1.8000_b1.0000_cc1.3000_al0.209_be0.209_c1.344_e0.999', "be")
[0.20899999999999999] 
```

如果字符串中的参数多次出现，则对所有参数进行求值。

还有一个没有转换为浮点数的版本：

```
return [t[len(parm):] for t in dir.split('_') if t.startswith(parm)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:10:11.503

```
(?P<param>[a-zA-Z]*)(?P<version>[^_]*) 
```

# javascript - 是否可以从 HTTPS 向 HTTP 发出 JSONP 请求？

> ID：12211947
> 
> 赞同：6
> 
> 时间：2012-08-31T08:52:34.440
> 
> 标签：javascript, jquery, web-services, cross-domain, jsonp

我知道有一个几乎重复的问题，但答案一点也不令人满意。

我需要使用通过 HTTP 运行的 Openstreetmap 服务进行地理编码。

我的网站通过 HTTPS 运行。

从 https 到 http 的 JSONP 请求似乎是不可能的，浏览器（Chrome）抱怨内容不安全。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T08:58:03.603

浏览器抱怨不安全内容的原因是内容不安全。安全页面的全部目的是所有内容都是安全的，并且可以信任。

您可以在请求不安全内容的安全站点中设置代理页面。在那里，您应该在将内容发送到浏览器之前对其进行验证，以便它实际上是安全的，而不仅仅是假装是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T08:59:40.743

如果您想向在 HTTP 下运行的外部服务发出 POST 请求，而初始请求来自 HTTPS，它将始终被认为是不安全的。据我所知，没有办法绕过它。

您可以做的是 POST 到您的后端，该后端将另一个 POST 请求发送到在 HTTP 下运行的服务。从那里返回 HTTP 服务返回的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T19:05:09.647

对于它可能关心的人，这就是我自己整理的方式。

1) 我的 Javascript 代码使用我需要转发到服务的参数调用我服务器上的 AJAX 页面

2) AJAX 页面使用地址通过 CURL 发出请求

3）我清理响应并将其转换为 JSON

4）使用Javascript的成功回调我使用数据

# sendmail - 如何通过 Facebook 发送电子邮件？

> ID：12211952
> 
> 赞同：0
> 
> 时间：2012-08-31T08:53:02.360
> 
> 标签：sendmail

如何通过 Facebook 发送电子邮件？api 通知.sendEmail 已被禁用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:57:09.083

Facebook 禁用了**notifications.sendEmail**。

您需要征得用户的许可才能访问他的电子邮件地址[Facebook 权限](https://developers.facebook.com/docs/authentication/permissions/)，然后当您拥有他的电子邮件地址时，您应该实现自己的电子邮件地址发件人。

我可以给你一个电子邮件发件人的例子，让我知道你使用什么语言。

# android - 不支持 Android 应用程序、设备 (Galaxy Mini)

> ID：12211954
> 
> 赞同：3
> 
> 时间：2012-08-31T08:53:09.837
> 
> 标签：android, galaxy

GalaxyMini（以及其他）不支持我的 android 应用程序。当我查看应用程序所需的功能（从 google play 管理控制台复制/粘贴）时，所有功能似乎都在 GalaxyMini 上。我不明白为什么它不会在 GalaxyMini 上提供。

NativePlateform armeabi 似乎不是问题，因为我已经尝试过没有此功能要求的以前的 apk 并且仍然不支持 GalaxyMini。

任何的想法？

```
Localized to: default, Dutch, French
Permissions: android.permission.INTERNET, android.permission.ACCESS_FINE_LOCATION, android.permission.CAMERA, android.permission.MODIFY_AUDIO_SETTINGS, android.permission.WAKE_LOCK
Features: android.hardware.camera, android.hardware.camera.autofocus, android.hardware.location, android.hardware.location.gps, android.hardware.screen.landscape, android.hardware.screen.portrait, android.hardware.touchscreen
No main expansion file
No expansion patch file
[8/31/12 10:00:14 AM] : API level: 7-16+
Supported screens: small-xlarge
OpenGL textures: all
Native platforms: armeabi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:29:34.310

银河迷你没有`android.hardware.camera.autofocus`。它的相机是固定焦距的。如果该功能不是您的应用程序中的绝对要求，那么您可以添加`android:required="false"`到它的`uses-feature`标签中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:30:07.333

经过多次尝试，问题是“android.hardware.camera.autofocus” GalaxyMini 应该支持自动对焦技术规格。我真的希望 google play 开发者控制台告诉我们哪些清单设置用于排除设备，这将为我们节省大量时间。

所以我只是在清单中添加了以下行，以使其可用于galaxy mini（以及大约300个其他设备！）：

```
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/> 
```

# c - LPC1788 微控制器的内存分配问题

> ID：12211956
> 
> 赞同：0
> 
> 时间：2012-08-31T08:53:17.713
> 
> 标签：c, microcontroller, lpc, threadx

我对微控制器编程还很陌生；我已经用 LPC1788 工作了几个星期了。

我最近遇到的一个问题是我的内存比我预期的要快得多。我已经通过测试我可以 malloc 有多大的连续内存块来测试似乎有多少内存可用，结果是 972 字节。分配从地址 0x10000000 开始（该板上的片上 SRAM 的开始位置应该在 64kB 左右）。

我目前正在开发的程序旨在充当一个简单的调试器，它利用 LCD 并允许向其打印消息。我有一个字符串会不断被新消息“添加到”，然后整个消息将打印在 LCD 上。当消息在屏幕下方的长度超过垂直边界时，它将删除最旧的消息（靠近顶部的消息），直到适合为止。但是，在它拒绝分配更多内存之前，我只能添加大约 7 条额外的消息。如果需要，该项目的 main.c 托管在[http://pastebin.com/bwUdpnD3](http://pastebin.com/bwUdpnD3)

早些时候，我还开始了一个使用 threadX RTOS 创建和执行多个线程的项目。当我尝试在该程序中使用 LCD 时，我发现那里的内存也非常有限。LCD 似乎存储了从 SDRAM 基地址开始的所有像素数据，但我不确定这是否与我使用的 SRAM 相同。

我需要的是一种分配足够内存的方法，以允许多个线程运行或存储大字符串，同时能够利用 LCD。一种可能是使用缓冲区或其他内存区域，但我不太确定如何做到这一点。任何帮助，将不胜感激。

tl;dr：当试图在 LCD 上打印大字符串时，SRAM 上的可分配内存很快就会用完。

编辑 1：发现变量 currMessage 存在内存泄漏。我认为现在已经解决了：

```
strcpy(&trimMessage[1], &currMessage[trimIndex+1]);

// Frees up the memory allocated to currMessage from last iteration
// before assigning new memory.
free(currMessage);
currMessage = malloc((msgSize - trimIndex) * sizeof(char));
for(int i=0; i < msgSize - trimIndex; i++)
{
  currMessage[i] = trimMessage[i];
} 
```

编辑 2：实施内存泄漏修复。程序现在运行得更好了，我觉得很愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:31:24.560

在嵌入式环境中选择使用动态内存分配时需要小心，尤其是在内存受限的情况下。您可以很容易地最终分割内存空间，使得剩下的最大空洞是 972 字节。

如果您必须从堆中分配，请执行一次，然后挂在内存上——几乎就像一个静态缓冲区。如果可能，请使用静态缓冲区并避免一起分配。如果您必须进行动态分配，则将其保持在固定大小的块中将有助于碎片化。

不幸的是，克服碎片问题确实需要一些工程努力。付出努力是值得的，而且它确实使系统更加健壮。

至于 SRAM 与 SDRAM，它们并不相同。我不熟悉threadX，也不熟悉他们是否为您的电路板提供电路板支持包（BSP），但总的来说，必须设置SDRAM。这意味着引导代码必须初始化内存控制器，设置时序，然后启用该空间。根据您的堆实现，您需要动态添加它，或者 - 更有可能 - 您需要使用指向它最终将存在的位置（在 SDRAM 空间中）的堆空间进行编译。然后，您必须确保在实际使用堆之前启动并配置和激活内存控制。

需要注意的另一件事是，您实际上可能正在从 SRAM 空间运行代码，并且其中一些空间还保留给处理器异常表。例如，整个空间可能不可用，并且可能通过两个不同的地址（0x00000000 和 0x10000000）存在。我知道在其他一些 ARM9 处理器中，这很常见。您可以从闪存启动，该闪存最初被映射到 0x00000000 空间，然后您就可以将引导程序复制到 SRAM 并将 SRAM 映射到该空间。那时，您可以启动到 Linux 之类的系统，它希望能够更新在 0 时停止运行的表。

顺便说一句，看起来您发布的代码中确实存在一些内存泄漏。也就是说， currentMessage 永远不会被释放......只会被新的指针覆盖。然后这些块将永远丢失。

# c# - 在事件侦听器中使用处理程序构造函数：有什么区别？

> ID：12211961
> 
> 赞同：0
> 
> 时间：2012-08-31T08:53:26.050
> 
> 标签：c#, .net, event-handling

> **可能重复：**
> [使用新处理程序附加事件处理程序与直接分配它](https://stackoverflow.com/questions/1884595/attaching-eventhandler-with-new-handler-vs-directly-assigning-it)

我注意到有两种可能的方法来添加事件监听器：

```
List.Changed += new ChangedEventHandler(ListChanged); 
```

或者简单地说，

```
List.Changed += ListChanged; 
```

这两个声明有什么区别？

Visual Studio 中的自动完成功能会生成前者，但我想知道它们是否有不同的行为。此外，如果我们使用前者，我们如何删除监听器？如果我们使用后者，`List.Changed -= ListChanged`; 会工作的，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:54:38.350

没有区别，第二种形式只是简单一点（代码更少）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:54:47.947

两者都会生成相同的 IL，因此**没有**区别。在较短的示例中，编译器自动推断要使用的委托类型。

删除侦听器同样可以互换：

```
// both will work the same way, no matter which one was used to register the handler
List.Changed -= ListChanged;
List.Changed -= new ChangedEventHandler(ListChanged); 
```

# jquery - 使用 jquery .select() 获取突出显示的文本？

> ID：12211964
> 
> 赞同：8
> 
> 时间：2012-08-31T08:53:33.577
> 
> 标签：jquery

我正在尝试在这里找到的示例代码[http://api.jquery.com/select/](http://api.jquery.com/select/)

```
$(":input").select( function () { 
      $("div").text("Something was selected").show().fadeOut(1000); 
    }); 
```

现在我的问题不是打印 "Something was selected" ，而是可以得到准确的选定文本吗？

我想要 jquery .select() 具体答案。我从[这里得到了其他解决方案](http://jsfiddle.net/KgtW5/3/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T21:07:45.653

`.select()`与检索实际选定的文本无关。Select 就像`.click()`：一种将处理程序函数绑定到 select 事件的简单快捷方式。

[它在API 文档](http://api.jquery.com/select/)中说得对：

> 检索当前选定文本的方法因浏览器而异。许多 jQuery 插件提供跨平台解决方案。

`element.select(...)`因此，您使用（或者更好的是）绑定`element.on("select", ...)`，然后使用众多跨平台解决方案之一来检索选择。这是基本思想：http: [//jsfiddle.net/NjW5a/3/](http://jsfiddle.net/NjW5a/3/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T21:20:41.683

.Select() 似乎只是一个在选择该特定元素时触发的事件。但是，要获取文本，您需要使用 javascript 的*window.getSelection()*函数。

这是一个例子：http: [//jsfiddle.net/BCv4Y/3/](http://jsfiddle.net/BCv4Y/3/)

```
 $(":input").select( function () { // on selection, show what's selected
        $("div").text(window.getSelection()).show().fadeOut(1000); 
     }

}); 
```

​</p>

也许，如果新版本的 jquery 带有类似*$(this).selectedVal()*的东西，那就太好了。希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T07:05:27.160

```
 <script>
window.onmouseup = mouseup;
function mouseup() {
 getSelText();
 }
</script>
   <script  type="text/javascript">
function getSelText() {
var txt = '';
if (window.getSelection) {
    alert (window.getSelection());
} else if (document.getSelection) {
   alert (document.getSelection());
   } else if (document.selection) {
     alert( document.selection.createRange().text);

 } else return;

 }
</script> 
```

# sql - sql - 替换参数无效

> ID：12211968
> 
> 赞同：4
> 
> 时间：2012-08-31T08:53:46.220
> 
> 标签：sql, tsql

我想替换表格中列的文本

我试过了：

```
select replace([article], '<p>&nbsp;</p>', '') from Articles

update Articles
set article = replace(article, '<p>&nbsp;</p>', '')
where article like '<p>&nbsp;</p>'

or 

UPDATE [AJA].[dbo].[Articles]
   SET [article] = ' '
 WHERE [article] = '<p>&nbsp;</p>'
GO 
```

每次出现错误时：

> 参数 1 在替换中无效

它出什么问题了？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T09:28:00.307

我已经检查了您使用两种数据类型验证的问题，即

1.  `ntext`：在使用 ntext 时，它会抛出上述错误....查看[这里](http://sqlfiddle.com/#!3/b709e/1)

2.  `varchar(max)`：在使用 varchar(max) 时，它是完美的工作......查看[这里](http://sqlfiddle.com/#!3/56bab/1)

因此，`varchar(max)`在使用 html 标签时使用数据类型......

如果要处理以前的类型，请将列类型转换为`varchar`

```
 SELECT REPLACE(CAST([article] as VARCHAR(MAX)), '<p>&nbsp;</p>', '')
   FROM Articles 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T09:01:05.693

您收到此错误是因为您有文本数据类型。使用 varchar 数据类型，您的查询可以正常工作。

您需要转换您的字段`text to varchar`才能使用替换功能。

```
Declare @mytable table
(
Article text
);

INSERT into @mytable VALUES('<p>&nbsp;</p>');
INSERT into @mytable VALUES('<p>&nbsp;</p>');
INSERT into @mytable VALUES('<p>&nbsp;</p>');
INSERT into @mytable VALUES('<b>&nbsp;</b>');

select replace(cast([article] as VARCHAR(8000)),'<p>&nbsp;</p>','')
from   @mytable
where Article LIKE '<p>&nbsp;</p>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:07:46.360

试试这个

```
UPDATE Articles SET article = REPLACE(article, '<p>&nbsp;</p>', '') 
```

其他工作也同样替换。.

# ipad - 文本/绘图的实时流式传输

> ID：12211969
> 
> 赞同：0
> 
> 时间：2012-08-31T08:53:48.057
> 
> 标签：ipad, drawing, http-live-streaming, live-streaming

我有一个带有白板的 iPad 应用程序。我们在那里写/画什么。无论我在应用程序上做什么，都应该可以从某个网站（实时流媒体）查看。

是否有任何库可用于完成上述任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:54:58.793

我建议不要使用 HLS，而只发送增量更新。我希望您的白板大部分是静态的，在这种情况下使用 h.264 视频压缩并没有真正意义。它将降低图像质量并占用大量带宽。

# python - skip_files 的默认应用程序引擎正则表达式

> ID：12211970
> 
> 赞同：1
> 
> 时间：2012-08-31T08:53:54.857
> 
> 标签：python, regex, google-app-engine

`google.appengine.api.appinfo.DEFAULT_SKIP_FILES`包含：

```
^(.*/)?((#.*#)|(.*~)|(.*\.py[co])|(.*/RCS/.*)|(\..*)|)$ 
```

那个正则表达式正确吗？

它似乎与 RCS/index.txt 不匹配，因为`(.*/RCS/.*)`.

正则表达式中最后一个管道字符的含义是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:01:47.940

你是对的，因为第一个斜杠，正则表达式与字符串[不匹配。](http://regexr.com?320l5)`RCS/index.txt`

最后一个管道是一个*空的替代项*，并导致该组是**可选**的。因此，以下两个是等价的：

```
^(.*/)?((#.*#)|(.*~)|(.*\.py[co])|(.*/RCS/.*)|(\..*)|)$
^(.*/)?((#.*#)|(.*~)|(.*\.py[co])|(.*/RCS/.*)|(\..*))?$ 
```

# google-api - BigQuery：超过 403 用户速率限制，但作业列表中未显示错误

> ID：12211972
> 
> 赞同：2
> 
> 时间：2012-08-31T08:53:57.340
> 
> 标签：google-api, google-bigquery

我收到 403 User Rate Limit Exceeded 错误进行查询，但我确定我没有超过。在过去，我已经达到了插入的速率限制，它在工作列表中反映为

> [errorResult] => Array ([reason] => rateLimitExceeded [message] => Exceeded rate limits: too many imports for this project )

但在这种情况下，作业列表不反映查询（也没有错误或完成），并且研究作业列表我没有达到限制或接近达到限制（不超过 4 个并发查询，每个处理 692297 字节）

我已启用计费，并且在过去 28 天内我只进行了 2.5K 次查询。

编辑：用户限制设置为 500.0 个请求/秒/用户

编辑：收到错误代码

> 超出用户速率限制
> 
> # 超出用户速率限制
> 
> ## 错误 403

编辑：我用来进行查询作业并获得结果的代码

```
function query_data($project,$dataset,$query,$jobid=null){

    $jobc = new JobConfigurationQuery();
    $query_object = new QueryRequest();
    $dataset_object = new DatasetReference();
    $dataset_object->setProjectId($project);
    $dataset_object->setDatasetId($dataset);
    $query_object->setQuery($query);
    $query_object->setDefaultDataset($dataset_object);
    $query_object->setMaxResults(16000);
    $query_object->setKind('bigquery#queryRequest');
    $query_object->setTimeoutMs(0);
    $ok = false;
    $sleep = 1;
    while(!$ok){
        try{
            $response_data = $this->bq->jobs->query($project, $query_object);
            $ok = true;
        }catch(Exception $e){ //sleep when BQ API not avaible

            sleep($sleep);
            $sleep += rand(0,60);
        }
    }
    try{
        $response = $this->bq->jobs->getQueryResults($project, $response_data['jobReference']['jobId']);
    }catch(Exception $e){
        //do nothing, se repite solo
    }

    $tries = 0;
    while(!$response['jobComplete']&&$tries<10){
        sleep(rand(5,10));
        try{
            $response = $this->bq->jobs->getQueryResults($project, $response_data['jobReference']['jobId']);
        }catch(Exception $e){
            //do nothing, se repite solo
        }
        $tries++;
    }

    $result=array();
    foreach($response['rows'] as $k => $row){
        $tmp_row=array();
        foreach($row['f'] as $field => $value){
            $tmp_row[$response['schema']['fields'][$field]['name']] = $value['v'];
        }
        $result[]=$tmp_row;
        unset($response['rows'][$k]);
    }

    return $result;

} 
```

是否有其他速率限制？或者它是一个错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:44:17.787

您在尝试导入 CSV 文件时收到此错误，对吗？

这可能是以下原因之一：

```
Import Requests

Rate limit: 2 imports per minute
Daily limit: 1,000 import requests per day (including failures)
Maximum number of files to import per request: 500
Maximum import size per file: 4GB2
Maximum import size per job: 100GB2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:06:06.053

query() 调用实际上受到 20 个并发限制的限制。开发者控制台中 500 个请求/秒/用户的限制有点误导——这只是可以进行的总调用（get、list 等）的数量。

您是说您的查询立即失败并且从未出现在工作列表中吗？

您是否有返回的完整错误？即 403 消息是否包含任何附加信息？谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:33:51.933

我通过仅使用一台服务器发出请求解决了这个问题。

看看我在夜间 cronjobs 中所做的不同（永不失败），唯一的区别是我在一台服务器上只使用一个客户端，而不是在 4 个不同的服务器上使用不同的客户端。

现在我在一台服务器中只有一个脚本管理相同数量的查询，现在它永远不会出现用户速率限制超出错误。

我认为一次管理多个客户端或多个活动 IP 存在错误，尽管线程总数从未超过 20。

# svn - SVN 与二进制文件的合并处理

> ID：12211978
> 
> 赞同：2
> 
> 时间：2012-08-31T08:54:20.157
> 
> 标签：svn

我有一个树干和那个树干的分支 A。

我将二进制文件两次更新为修订版 A，然后更新到修订版 B。

如果我先 svn 合并修订版 B，然后再合并修订版 A，则必须不会发生冲突，或者冲突取决于二进制文件的内容？

如果冲突是必须的，那么我可以手动处理它。否则，任何人都可以建议在这种合并案例中处理二进制文件的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:43:27.963

有两种方法可以处理这个问题：

### 不要在存储库中存储二进制文件

许多站点将他们构建的工件存储在他们的 Subversion 存储库中，这并不是一个好主意。它们占用大量空间，并且通常保质期很短。由于您无法轻松清除 Subversion 存储库，因此它往往会快速增长。当我们删除二进制文件时，我已经看到占用几乎 1 TB 空间的 Subversion 存储库减少到了几个 GB。

而且，无论如何，这些二进制文件并不那么容易检索。那些真正需要它们的人——比如进行测试或部署的人——必须在他们的计算机上安装 Subversion 并学习如何使用 Subversion 才能获得它们。也没有任何真正的目的拥有这些文件的各种版本。他们的历史很少能对开发人员产生启发。

您最好将构建的工件存储在*发布存储库*中。我们使用[Artifactory](http://www.jfrog.com/)和[Jenkins](http://jenkins-ci.org)的组合。即使我不使用 Maven，我也使用过 Maven 存储库。我将它们与 Ant 和 Ivy 一起使用，我什至在我们使用 C/C++ 的地方使用过它。这允许您共享一个项目产生的另一个项目可能需要的工件。

### `svn:mime-type`在二进制文件上使用该属性

有时您必须存储二进制文件，因为它们是源文件。例如，GIF 和 JPG。`svn:mime-type`在这种情况下，您可以在该文件上使用 Subversion 。这可以防止 Subversion 首先尝试合并二进制文件。

当您进行合并时会发生什么，并且二进制文件存在冲突？你只有两个选择，你可以*接受你*的意思是保留我当前版本的这个文件，或者你可以*接受他们的*意思是用另一个分支的那个替换你当前版本的这个二进制文件。这简化了合并/解析过程。

# php - 不保存图像的图像裁剪

> ID：12211984
> 
> 赞同：5
> 
> 时间：2012-08-31T08:54:35.913
> 
> 标签：php, crop

我有一堆产品预览*图像*，但它们的*尺寸不同*。

所以我想知道，是否可以在不保存的情况下随时随地**裁剪图像？**

这两个链接应该显示我的意思：

[http://xn--nstvedhandel-6cb.dk/alpha_1/?side=vis_annonce&id=12](http://xn--nstvedhandel-6cb.dk/alpha_1/?side=vis_annonce&id=12)

[http://xn--nstvedhandel-6cb.dk/alpha_1/?side=vis_annonce&id=13](http://xn--nstvedhandel-6cb.dk/alpha_1/?side=vis_annonce&id=13)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:05:39.660

是的，这可能是我的做法：

```
//Your Image
$imgSrc = "image.jpg";
list($width, $height) = getimagesize($imgSrc);
$myImage = imagecreatefromjpeg($imgSrc);

// calculating the part of the image thumbnail
if ($width > $height)
{
    $y = 0;
    $x = ($width - $height) / 2;
    $smallestSide = $height;
 } 
 else
 {
    $x = 0;
    $y = ($height - $width) / 2;
    $smallestSide = $width;
 }

 // copying the part into thumbnail
 $thumbSize = 100;
 $thumb = imagecreatetruecolor($thumbSize, $thumbSize);
 imagecopyresampled($thumb, $myImage, 0, 0, $x, $y, $thumbSize, $thumbSize, $smallestSide, $smallestSide);

 //final output
 header('Content-type: image/jpeg');
 imagejpeg($thumb); 
```

这不是一个非常简单的操作，就像其他操作一样，我也建议您在将缩略图创建到文件系统后将其保存。

您可能想查看[PHP 的 GD 库](http://fourmilestomay.com/2009/resize-crop-photos-php-gd-library/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T09:04:22.127

你可能想试试这个简单的脚本：[https ://github.com/wes/phpimageresize](https://github.com/wes/phpimageresize)

它还允许缓存，这应该有助于解决性能问题。

但我也更喜欢调整图像大小并将它们保存为缩略图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T08:58:36.200

这当然是可能的，但是您想要做的可能不是一个好主意-这就是原因。

如果您裁剪图像并保存它，您（或者更确切地说是您的服务器）再也不需要这样做了。这不是一个轻松的操作。

但是，如果您不断地进行裁剪，您的服务器将不得不每次都完成这项工作——这是非常低效的。

作为最坏的情况，为什么不自动将它们裁剪为您想要的尺寸（而不是手动进行）并简​​单地保存这些结果？

最后，鉴于它是一家商店，手动裁剪它们不会为您的产品提供最好的图像 - 从而获得最好的销售机会吗？

# javascript - Ajax 调用永远不会在 Android 的 phonegap 中调用

> ID：12211988
> 
> 赞同：1
> 
> 时间：2012-08-31T08:54:38.760
> 
> 标签：javascript, android, ajax, cordova, jquery-mobile

我搜索了类似的问题，但从未找到正确的答案。我正在使用 phonegap 和 JQM 为多个平台制作应用程序。我用类似的调用制作了 index.html，即“登录页面”。Index 的调用有效，但下面的调用从未在我的 android 设备上被调用，即使它适用于 chrome 和 safari。

我检查了服务器日志，“登录”没有问题，但正如我所说，当应该调用下面的函数时，我的 android 设备没有请求。

```
 //document.addEventListener("deviceready", onDeviceReady, true);

$( document ).bind( "mobileinit", function(){
        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;
        $.mobile.loadingMessageTextVisible = true; 
        $.mobile.showPageLoadingMsg();
        console.log('Page Started');
})

//var onDeviceReady = function(){

$( document ).ready(function (){
        console.log('Start');
        //$.support.cors = true;
        //$.mobile.allowCrossDomainPages = true;
        $.ajax({                                                                   
        crossDomain: true,
        type: 'GET',
        url: 'http://ip/services/rest/contact/list', 
        callback: 'jsonpCallback',
        jsonpCallback: 'jsonpCallback',
        jsonp: '_jsonp',
        contentType:  'application/json',
        dataType: 'jsonp json',
        timeout : 10000,

        success: function(data){

            var html ='';
            console.log('Success');
            $.each(data.response, function(key, value) {
            html += '<li><a class=contact href="#" id="' + data.response[key].id + '" ><h1>' + data.response[key].label + '</h1><p>'+ data.response[key].customerName + '</p><p>' + data.response[key].phone + ', ' + data.response[key].email + '</p></a></li>';
            $('#ul_id').append($(html));
            html='';
            console.log('conatct');
            });
            $('#ul_id').trigger('create');    
            $('#ul_id').listview('refresh');

        },
        error: function (xhr, ajaxOptions, thrownError){
            alert("Status: " + xhr.status + ", Ajax option: " + ajaxOptions + ", Thrown error: " + thrownError);
            //location.reload();
            console.log('Blad');
        },
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:27:09.067

您的 Android 项目 config.xml 文件中的访问源值是什么？

您的值应如下所示：

```
<access origin=".*"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:42:22.733

放置脚本和 jqm 工作的特定方式存在问题。

# django - 根据一天中的时间关闭网页（DJANGO）

> ID：12211989
> 
> 赞同：1
> 
> 时间：2012-08-31T08:54:42.720
> 
> 标签：django, datetime, django-templates

我如何使用 django 模板根据一天中的时间删除页面的内容？

我正在创建一个在线食品配送网站。交货单按时间划分。

例如，对于晚上 7 点的交货下降，我希望页面在当天下午 6 点之前正常显示。然后在下午 6 点 01 分，我希望页面显示“此交货时间不可用”之类的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:14:43.110

老实说，如果你想防止不需要的行为，你不应该依赖模板逻辑。

您可以创建两个变量，例如

```
from django.conf import settings 

TIME_OPEN = getattr(settings, 'TIME_OPEN', datetime.now().replace(hour=10, minute=30, second=0, microsecond=0).time())
TIME_CLOSED = getattr(settings, 'TIME_CLOSED', datetime.now().replace(hour=21, minute=30, second=0, microsecond=0).time()) 
```

在您的 url 模式中，您可以添加如下内容：

```
if TIME_OPEN < datetime.now().time() < TIME_CLOSED:
    urlpatterns += patterns('shop.customers.views',
    (r'^checkout/$', 'checkout'),
) 
```

根据您的新变量，您可以添加一个 context_processor，为 UI 逻辑的每个模板提供上下文变量，例如`{'shop_open': True}`.

请注意，这些示例依赖于服务器时间，因此您必须进行检查，因为它可能与您的本地计算机不同。另一种方法可能是创建一个装饰器，它可以包裹在需要特定时间的视图周围。

所以，只是为了确保；不要依赖模板逻辑，保护你的视图

# ruby-on-rails - 我需要在用户尝试注销时显示警告弹出窗口，使用 Warden 回调，Ruby on Rails？

> ID：12211991
> 
> 赞同：1
> 
> 时间：2012-08-31T08:54:46.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, devise, warden

Warden::Manager.before_logout ？我在 config/initializers/devise.rb 中有以下warden回调

```
Warden::Manager.before_logout do |user, auth, opts|
  auth.session[:signout] = true
 end 
```

在我的应用程序控制器中，我有这个动作，由 before_filter 调用

```
def user_logs_out
  if session[:signout]
    display_sign_out_popup = true
 end     
end 
```

然后使用我的 java 脚本，我正在尝试显示模式弹出窗口。但显然， session[:logout] 根本没有变成真的。我不能访问由
Warden::Manager.before_logout 在 application_controller.rb 中设置的会话变量吗？

# svn - 从主干合并到分支接受他们的

> ID：12211998
> 
> 赞同：0
> 
> 时间：2012-08-31T08:55:13.810
> 
> 标签：svn

我已经休假一段时间了，我的死树枝已经过时了。我基本上想更新我的分支，而不必为任何合并冲突而烦恼，我只希望它与主干相同。

我似乎找不到任何语法示例。它是否正确 ？

`svn merge --accept theirs-full ^/mycomp/dev/trunk .`

我在mac上，所以对我来说没有乌龟:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:21:37.170

进行更新并选择 tc（他们的冲突）还是重新结帐？