# StackOverflow 问答 12455000-12455999

# android - 如何在标签中设置徽章位置

> ID：12455015
> 
> 赞同：0
> 
> 时间：2012-09-17T07:44:18.767
> 
> 标签：android, badge

我对徽章的概念很陌生。在我的应用程序中，我想在选项卡上显示徽章。为此，我使用了 android-viewbadger.jar 文件。它工作正常，但位置属性不受影响。如何设置位置。如果您需要更多信息，请告诉我。

```
TabWidget tabs = (TabWidget) findViewById(android.R.id.tabs);       
DH_Constant.badgeView = new BadgeView(this, tabs, 2);

// it's working fine

badge1.setBadgePosition(BadgeView.POSITION_CENTER);

// But I Supposed to set it as position to top_left or top_right then it still shows as bottom_left and bottom_right

badge1.setBadgePosition(BadgeView.POSITION_TOP_RIGHT);

DH_Constant.badgeView.setText(DH_Constant.MessagesCount_obj.count); 
DH_Constant.badgeView.show(); 
```

**输出：**

![在此处输入图像描述](../Images/a9f9c0c696c166f4d94b2f430156dbc6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T10:25:58.687

默认情况下，它的位置是`TOP_RIGHT`. 如果你想要任何其他位置，你必须设置它。例如对于 top_left 使用：

```
badge1.setBadgePosition(BadgeView.POSITION_TOP_LEFT); 
```

中心使用：

```
badge1.setBadgePosition(BadgeView.POSITION_CENTER); 
```

对于 bottom_left 使用：

```
badge1.setBadgePosition(BadgeView.POSITION_BOTTOM_LEFT); 
```

对于 bottom_right 使用：

```
badge1.setBadgePosition(BadgeView.POSITION_BOTTOM_RIGHT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T14:08:05.750

要使徽章位置显示在选项卡的上角，您需要将选项卡布局的根设置为 FrameLayout，如下所示：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">
<LinearLayout 
    android:id="@+id/tabsLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/tabs_background"
    android:gravity="center"
    android:orientation="vertical"
    android:padding="10dip" >

    <ImageView
        android:id="@+id/tabsIcon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/tab_icon"
        android:duplicateParentState="true" />

    <TextView
        android:id="@+id/tabsText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@color/tabs_text"
        android:textSize="10dip"
        android:textStyle="bold" />

</LinearLayout> 
```

# c# - 驱动程序在 C#.net 中记录图像识别

> ID：12455018
> 
> 赞同：-1
> 
> 时间：2012-09-17T07:44:24.787
> 
> 标签：c#, image-processing

我不知道如何进行图像识别，但我必须从下图中提取红色轮廓部分并阅读图表，假设如下：

1 - 下班
2 - 卧铺卧铺
3 - 驾驶
4 - 值班

我的程序应该读取图表，在本例中，显示结果为 333333333111111222222222444444

![带有图表的驾驶员日志，指示他们何时工作或下班](../Images/246ff8fef8fd942094679dc71021e25f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:01:48.663

假设没有对齐问题，您可以将任务划分如下

1.  从扫描中剪切红色框矩形
2.  将生成的图像与空白文档的相同区域的内容进行异或（这将削弱网格线）
3.  X 方向扫描
4.  在 Y 方向寻找最大值
5.  将找到的 Y 值映射到您需要的范围

# shell - 如何获取特定分区的填充阈值

> ID：12455023
> 
> 赞同：0
> 
> 时间：2012-09-17T07:44:43.193
> 
> 标签：shell

我需要更改脚本的帮助：我需要在特定分区上设置阈值。

我的脚本：

```
for n in `df -h|awk {'print $5'}|awk -F% {'print $1'}`; do
        if [ $n -gt 85 ]
        then
            echo $n."iiiiiiiiiiii";
        endif 
```

请帮助解决这个问题。**85**为所有设置，但我需要在特定分区上。

问候， 里迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:55:40.857

什么不起作用？请提供**准确的错误信息。**您是否收到有关未终止的语法错误`if`？那是因为`endif`应该`fi`在伯恩遗产贝壳中阅读。PS: echo 后面的分号没用，需要 a`done`来终止`for`循环。

选择一个特定的分区应该可以使用

```
df -h /dev/your_partition_here | awk ... 
```

阅读`df`(1) 手册（类型`man df`）将提供大量详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:59:56.707

更改您的`awk`命令以匹配分区名称。例如，如果您的分区是 ' `/some/path`'，那么您的命令将是：

```
for n in `df -h|awk '/\/some\/path/{print $5}'|awk -F% {'print $1'}`; do
        if [ $n -gt 85 ]
        then
            echo $n."iiiiiiiiiiii";
        fi
done 
```

（您需要转义分区名称中的正斜杠。）

# c# - 使用c#如何读取xml文件

> ID：12455025
> 
> 赞同：1
> 
> 时间：2012-09-17T07:44:49.357
> 
> 标签：c#, xml, xml-parsing

```
<Reports>
  <Databases>
    <Database>Axxest</Database>
    <Database>Axxest2</Database>
  </Databases>
</Reports> 
```

如何阅读`Axxest`，`Axxest2`使用 c# 来读取这样的 xml 文件？

我试试这个：

```
XmlDocument xld = new XmlDocument();
xld.Load(XmlPath);
XmlNodeList xnl = xld.SelectSingleNode("Reports").ChildNodes;
tableList.Clear();
foreach (XmlNode xn in xnl)
{
    tableList.Add(xn.InnerText);
} 
```

但是有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:16:21.657

尝试[`SelectNodes`](http://msdn.microsoft.com/en-us/library/z1a732z5%28v=vs.100%29.aspx)方法和`XPath`：

```
XmlDocument xld = new XmlDocument();
xld.Load(XmlPath);
XmlNodeList xnl = xld.SelectNodes("Reports/Databases/Database");
foreach (XmlNode xn in xnl)
{
    tableList.Add(xn.InnerText);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:57:28.680

请参阅[文档的示例](http://msdn.microsoft.com/en-us/library/cc189056%28v=vs.95%29.aspx)：

```
StringBuilder output = new StringBuilder();

String xmlString =
        @"<?xml version='1.0'?>
        <!-- This is a sample XML document -->
        <Items>
          <Item>test with a child element <more/> stuff</Item>
        </Items>";
// Create an XmlReader
using (XmlReader reader = XmlReader.Create(new StringReader(xmlString)))
{
    XmlWriterSettings ws = new XmlWriterSettings();
    ws.Indent = true;
    using (XmlWriter writer = XmlWriter.Create(output, ws))
    {

        // Parse the file and display each of the nodes.
        while (reader.Read())
        {
            switch (reader.NodeType)
            {
                case XmlNodeType.Element:
                    writer.WriteStartElement(reader.Name);
                    break;
                case XmlNodeType.Text:
                    writer.WriteString(reader.Value);
                    break;
                case XmlNodeType.XmlDeclaration:
                case XmlNodeType.ProcessingInstruction:
                    writer.WriteProcessingInstruction(reader.Name, reader.Value);
                    break;
                case XmlNodeType.Comment:
                    writer.WriteComment(reader.Value);
                    break;
                case XmlNodeType.EndElement:
                    writer.WriteFullEndElement();
                    break;
            }
        }

    }
}
OutputTextBlock.Text = output.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:49:14.913

如果你想在一个 xml 文件中找到一些节点，你可以使用 XPath 进行查询，这就是你在[w3 school](http://www.w3schools.com/xpath/default.asp)中所需要的。

如果你调试代码，你会发现xnl的计数是1，它只包括“Databases”节点。“SelectSingleNode”表示选择一个节点，在您的代码中，首先选择“Reports”，然后返回其子节点，其中仅包含“Databases”。您可以尝试 Ria 的代码，使用 SelectNodes 而不是 SelectSingleNode。但是你仍然可以使用“SelectSingleNode”，试试这个：

```
XmlNodeList xnl = xld.SelectSingleNode("Reports/Databases").ChildNodes; 
```

希望对你有帮助。

# php - yii：如何在一个表单中为不同的日期选择器设置不同的设置？

> ID：12455027
> 
> 赞同：0
> 
> 时间：2012-09-17T07:44:57.633
> 
> 标签：php, yii, yii-extensions

问题：应用程序有 2 个或更多日期选择器。它们由 id 和 name 定义。并且他们的日期设置不应该相同。

例如，汇率日期应该是今天的日期。ETA 完成日期不应该是今天的日期。

```
$this->widget('zii.widgets.jui.CJuiDatePicker', array(
                'name'=>'Request[exchange_date]',       
                'model'=>$model,
                'value' => $model->exchange_date,
                'i18nScriptFile' => 'jquery.ui.datepicker-ja.js', // (#2)
                'htmlOptions' => array(
                    'id' => 'Request_exchange_date',
                    'size' => '10',
                ),
                'defaultOptions' => array(  // (#3)
                    'showOn' => 'focus', 
                    'dateFormat' => 'dd-M-yy',
                    'showOtherMonths' => true,
                    'selectOtherMonths' => true,
                    'changeMonth' => true,
                    'changeYear' => true,
                    'showButtonPanel' => true,
                    'yearRange'=>'0:+1', 
                    //'minDate'=> 0,
                )
            ));

$this->widget('zii.widgets.jui.CJuiDatePicker', array(
                'name'=>'Request[eta_date]',        
                'model'=>$model,
                'value' => $model->eta_date,
                'i18nScriptFile' => 'jquery.ui.datepicker-ja.js', // (#2)
                'htmlOptions' => array(
                    'id' => 'Request_eta_date',
                    'size' => '10',
                ),
                'defaultOptions' => array(  // (#3)
                    'showOn' => 'focus', 
                    'dateFormat' => 'dd-M-yy',
                    'showOtherMonths' => true,
                    'selectOtherMonths' => true,
                    'changeMonth' => true,
                    'changeYear' => true,
                    'showButtonPanel' => true,
                    'yearRange'=>'0:+1', 
                    'minDate'=> 0,
                )
            )); 
```

Q : 如何在单一表格中为不同的日期选择器设置不同的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:27:25.310

我认为你应该在使用 CJuiDatePicker 时设置 'options' 而不是 'defaultOptions'。通过使用“defaultOptions”，您将强制所有其他日期选择器实例的行为相同。

# batch-file - "set var=" 在 XP 和 Windows 7 上的工作方式不同

> ID：12455030
> 
> 赞同：0
> 
> 时间：2012-09-17T07:45:15.427
> 
> 标签：batch-file

以下代码在 Win XP 和 Win 7 上返回不同的 ERRORLEVEL：

```
set "QQQ="
echo ERRORLEVEL=%ERRORLEVEL% 
```

经验值

```
>ERRORLEVEL=1 
```

Windows 7的

```
>ERRORLEVEL=0 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:12:55.133

XP 在这里似乎更有意义，因为它将错误级别设置为 1，但前提是 QQQ 之前是未定义的变量。

WIN7有两种不同的方式！
`set`不更改错误级别，如果代码在`.BAT`文件内
`set`，则将错误级别始终设置为 0，如果代码在`.CMD`文件内

为什么？
没人知道。你可以问微软，但我想这只是一个意想不到的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:26:37.603

在 Windows XP 中这不起作用，因为 SET 命令本身会设置错误级别（通常为 1）！因为未定义 QQQ 的值，但在 Windows 7 中发生的情况是 SET 值将 QQQ 设置为 null，因此 ERRORLEVEL=0 例如在 WINDOWS 7

```
set "QQQ"
echo %ERRORLEVEL%
pause 
```

环境变量 QQQ 未定义 //ERRORLEVEL=1 和例如 IN WINDOWS 7

```
set "QQQ="   :: sets QQQ as null
echo %ERRORLEVEL%
pause 
```

环境变量 QQQ 未定义 //ERRORLEVEL=0

# eclipse - Eclipse Juno - Subversive SVN - 连接超时 - 抱歉，此连接已关闭

> ID：12455036
> 
> 赞同：3
> 
> 时间：2012-09-17T07:45:56.753
> 
> 标签：eclipse, subversive, eclipse-juno, svnkit

我遇到了以下问题：由于我从 Eclipse`Helios`到`Juno`我的更新`SVN`似乎在一段时间后关闭了与服务器的连接并且无法重新连接。

我得到以下信息：

> 抱歉，此连接已关闭。

我的服务器使用`SVN v1.6.12`. 我正在使用 Eclipse `Juno`v4.2`Subversive SVN`和`SVNKit 1.3.8 Implementation (Optional)`. 带有 v1.7.5.v1 的较新的 SVNKit 连接器根本不起作用。

任何想法为什么会发生这种情况或我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:10:29.907

我遇到了同样的问题（svn：抱歉，此连接已关闭。）SVN（在eclipse中）一段时间后关闭了连接，有时我必须重新启动eclipse才能让它再次运行。

我在 Window > Preferences > Team > SVN > SVN Connector 下更改了 SVN 连接器，到目前为止它似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:56:40.920

正如我在评论中提到的，文章“ [[SOLVED] Fixing Subversive Commit Operation Failed Error in Eclipse！](http://www.oneminuteinfo.com/2012/09/subversive-fix-commit-operation-failed.html) ”描述了当您看到以下错误时可以尝试的各种连接器：

![svn错误](../Images/844e9eeb2c5d2796d7f30c0255be613a.png)

在 commectors 中，你有一个你没有提到：SVN JavaHL

![SVN 连接器](../Images/33874f0650099440683baf08b9cc1d7d.png)

添加 JavaHL（1.6 或 1.7）连接器可能会解决此问题。

# jquery - z-index 不适用于几个项目？

> ID：12455039
> 
> 赞同：-2
> 
> 时间：2012-09-17T07:46:19.637
> 
> 标签：jquery, html, css, web, z-index

我有一个`select`包含 3 个项目的框，位于`input`文本框上方。当我打开`select`盒子时，我的字段与第一个盒子项目`input`重叠。`select``option`

我`z-index:9999;`在`select`盒子上设置了一个内联样式。当我放在`z-index:-1`我的`input`文本框上时，它会移动到容器后面`div`并且不再可点击。如果我放在`z-index: -2`容器上*，*什么也不会发生。我该如何解决这个问题？

代码摘录：

```
<div id="search-2" class="search-widget-wrapper widget_search">
    <div id="searchwrapper">
      <form method="get" id="searchform" action="#">
          <input type="text" class="searchbox" name="s" id="s" placeholder="search here &hellip;" />
          <input type="image" class="searchbox_submit" value="" />
      </form>
</div></div>

#searchwrapper {
    background-image: url("/wp-content/themes/responsive-icsl/images/search_box.png");
    background-repeat: no-repeat;
    height: 28px;
    margin: 11px 0 10px;
    padding: 0;
    position: relative;
    width: 288px;
} 
```

容器

```
<li class='lang'>
   <select id="lang-chooser" name="language-chooser" style="max-width:80px;" onChange = "document.location.href =this.value">
    <option value='localhost/?s=sidebar&amp;x=0&amp;y=0' selected='selected' title='./wp-content/plugins/qtranslate/flags/gb.png'> ENG </option>
    <option value='localhost/?s=sidebar&amp;x=0&amp;y=0&amp;lang=de' title='./wp-content/plugins/qtranslate/flags/de.png'> DEU </option>
    <option value='localhost/?s=sidebar&amp;x=0&amp;y=0&amp;lang=ru' title='./wp-content/plugins/qtranslate/flags/ru.png'> RUS </option>
   </select>
</li> 
```

### 更新

我添加了一个屏幕截图来显示问题：

截图：http: [//666kb.com/i/c7bv3x65hgkwj0gzs.jpg](http://666kb.com/i/c7bv3x65hgkwj0gzs.jpg)

实际上，我使用 msdropdown 来呈现我的下拉框，这将自动在下拉列表中生成 z-index:9999。

我的构建是这样的：

```
 <div id="header">
    <?php if ( get_header_image() ) : ?>
        <div id="logo">
        </div><!-- end of #logo -->  
    <div id="headermenuwrapper">            
   </div><!-- end of #headermenuwrapper -->
   <div id="headerwidgetswrapper">
       <div id="headernewswrapper">
       <div class="headernewstitle">NEWS</div>
       <div class="headernewsnav"></div>
       </div><!-- end of #headernewswrapper -->
       <div id="headersearchwrapper">
       </div><!-- end of #headersearchwrapper -->
    </div><!-- end of #headerwidgetswrapper -->
</div><!-- end of #header --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:05:35.300

你必须为你的 z-index 设置一个归零

所以就像如果你想要一个输入后面和一个内容前面

```
<div class="content" style="z-index:0;>
  <input type="text" style="z-index:-1;/>
  <input type="text" style="z-index:1;/>
</div> 
```

# jquery - jQuery 在页面刷新时未定义

> ID：12455041
> 
> 赞同：2
> 
> 时间：2012-09-17T07:46:28.497
> 
> 标签：jquery, asp.net, undefined, page-refresh

我认为这个问题没有在其他地方提出过，但如果我错了，请纠正我。

我正在使用我在网上找到的一段漂亮的 javascript 代码来在页面上添加图像幻灯片。我已将它添加到 ASP.NET 页面，它工作正常，图像以适当的间隔正确显示。但是，问题是每当我刷新页面（F5 或地址栏上的“刷新”按钮，顺便说一下，我正在 IE9 上测试）时，都会出现此错误消息： Line: 17 Error: 'jQuery' is不明确的

后跟：第 44 行错误：属性“jQuery”的值为 null 或未定义，而不是 Function 对象。

当我转到另一个页面并单击“返回”按钮时，幻灯片也可以正常工作。似乎该问题仅发生在页面刷新时。

这是 ASP 标头内容标签中的代码：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="Scripts/fadeslideshow.js"></script> 
```

幻灯片的代码取自“Dynamic Drive”（幻灯片中的终极淡入淡出 v2.0）[http://www.dynamicdrive.com/](http://www.dynamicdrive.com/)

我尝试将 javascript 引用移动到 ASP 正文内容标记中的底部，以防错误与页面加载时调用 javascript 的顺序有关。虽然我真的没有什么想法，而且现在有点卡住了。任何帮助表示赞赏。

ASP.NET 页面的代码：

```
<%@ Page Title="Community Support" Language="VB" MasterPageFile="~/Main.Master" AutoEventWireup="false"
CodeFile="Copy of CommunitySupport.aspx.vb" Inherits="CommunitySupport" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="Scripts/fadeslideshow.js">

    /***********************************************
    * Ultimate Fade In Slideshow v2.0- (c) Dynamic Drive DHTML code library (www.dynamicdrive.com)
    * This notice MUST stay intact for legal use
    * Visit Dynamic Drive at http://www.dynamicdrive.com/ for this script and 100s more
    ***********************************************/
</script>
<script type="text/javascript">

    var defaultPhoto1 = new String("");
    var defaultPhoto2 = new String("");
    var defaultCaption1 = new String("");
    var defaultCaption2 = new String("");

    defaultCaption1 = "caption A";
    defaultCaption2 = "caption B";

    defaultPhoto1 = "Images/photo1.png";
    defaultPhoto2 = "Images/photo2.png";

    function getSlideShowImages() {

                var mygallery = new fadeSlideShow({
                wrapperid: "fadeshow1", //ID of blank DIV on page to house Slideshow
                dimensions: [320, 220], //width/height of gallery in pixels. Should reflect dimensions of largest image
                imagearray: [
                [defaultPhoto1, "", "", defaultCaption1],
                [defaultPhoto2, "", "", defaultCaption2]

            ] //<--no trailing comma after very last image element!
            ,
                displaymode: { type: 'auto', pause: 2500, cycles: 0, wraparound: false },
                persist: false, //remember last viewed slide and recall within same session?
                fadeduration: 500, //transition duration (milliseconds)
                descreveal: "ondemand",
                togglerid: ""
            })            
    }
</script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<asp:HiddenField ID="hidSlideShow" runat="server"/>            
<asp:HiddenField ID="hidCaptions" runat="server"/>
<table width="100%">
    <tr>
        <td width="60%" valign="top">
                    <table width="100%">
                        <tr>
                            <td width="100%" valign="bottom" class="heading1">Title
                            </td>                                                            
                        </tr>                              
                        <tr>
                            <td width="100%"><br />Content
                            </td>
                        </tr>
                        <tr>                                
                        </tr>
                    </table>
        </td>
        <td width="40%" valign="top">
            <div id="fadeshow1" class="slideDiv">
            </div>
        </td>
    </tr>
</table> 
```

“fadeshow1” div 是显示幻灯片的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:17:01.323

看起来您需要将函数放在“就绪”函数中。[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

```
$(document).ready(function() {
  getSlideShowImages();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:03:15.127

您的 jQuery 版本中有一个错字。1.4.2 库脚本参考。您需要在 ASP 标头内容设置中正确引用 jquery 库

```
src="http://ajax.googleapis.com/ajax/libs/jquery/1.42./jquery.min.js" 
```

至：

```
src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" 
```

`fadeSlideShow`我还注意到每次初始化对象时都缺少终止分号：

```
var mygallery = new fadeSlideShow({
            wrapperid: "fadeshow1", //ID of blank DIV on page to house Slideshow
            dimensions: [320, 220], //width/height of gallery in pixels. Should reflect dimensions of largest image
            imagearray: [
            [imageArray[0], imageArray[0], "_new", captionArray[0]],
            [imageArray[1], imageArray[1], "_new", captionArray[1]],
            [imageArray[2], imageArray[2], "_new", captionArray[2]],
            [imageArray[3], imageArray[3], "_new", captionArray[3]]

        ] //<--no trailing comma after very last image element!
        ,
            displaymode: { type: 'auto', pause: 2500, cycles: 0, wraparound: false },
            persist: false, //remember last viewed slide and recall within same session?
            fadeduration: 500, //transition duration (milliseconds)
            descreveal: "ondemand",
            togglerid: ""
        }); //<-- semi-colon here 
```

进行更改后不要忘记清除浏览器缓存。

# algorithm - 对于霍夫曼代码，完整二叉树的优势是什么？

> ID：12455043
> 
> 赞同：2
> 
> 时间：2012-09-17T07:46:49.187
> 
> 标签：algorithm, tree, binary-tree, huffman-code

我正在研究用于对字符流进行位编码的 Huffman 代码，并读到最佳代码将由一个完整的二叉树表示，其中每个不同的字符由一个叶子表示，并且所有内部节点都包含两个子节点。

我想知道为什么全二叉树是这里的最佳选择？换句话说，全二叉树的优势是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:12:01.710

这不是选择，而是等价。

最优霍夫曼码由有限状态机解码，其中

*   每个状态正好有两个出口（下一位是*0*或*1*）
*   每个状态只有一个条目
*   所有包含输出符号的状态都是停止状态，*并且*
*   所有停止状态都包含输出符号

这相当于一个搜索树，其中

*   所有内部节点正好有两个孩子
*   所有节点都只有一个父节点
*   所有包含输出符号的节点都是叶节点，*并且*
*   所有叶节点都包含输出符号

也有非最优霍夫曼码，它们具有不包含输出符号的停止状态/叶节点。这样的二叉树不会是*满*的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-15T12:20:50.990

**反证法：**

假设树 T 不是为给定字符及其频率提供最佳霍夫曼码的完整二叉树。由于 T 不是一棵完全二叉树，因此存在一个节点 N，它只有一个子节点 C。

让我们用C替换N来构造一个新的二叉树T'。与树T相比，C的叶子节点的深度在T'中减少了1。因此T'提供了比T更好的解决方案，这证明T不是最优的.

```
 T                T'

  /\              /\
 .  N            .  C
.  /            .
. C             . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-15T23:27:10.737

您问为什么要使用完整的二叉树。这实际上是三个问题。

如果您询问“完整”，那么对于任何正确生成的霍夫曼代码，它必须是完整的。

如果您要询问“二进制”，则霍夫曼代码中遇到的每个位都有两种可能性，0 或 1，因此每个节点必须有两个分支。

但是，如果您要询问“树”，则根本不需要将代码表示为树。有许多表示不仅可以完整地表示代码，而且还可以比树更短的表示压缩流和更快的解码。

示例是使用规范的霍夫曼代码，并将其简单地表示为每个位长度的符号计数，以及相应符号的列表。这在[puff.c 代码](https://github.com/madler/zlib/blob/master/contrib/puff/puff.c)中使用。或者您可以生成一组表，分阶段一次解码多个位，用于[zlib 的 inflate](https://github.com/madler/zlib/blob/master/inftrees.c)。还有其他的。

# android - android中圆的尖角（在画布上绘制）

> ID：12455056
> 
> 赞同：2
> 
> 时间：2012-09-17T07:47:36.937
> 
> 标签：android, bitmap, android-canvas, paint

我正在使用画布绘制图表。

位图图像；

image= //这里我得到了我想在画布上绘制的位图

画布画布=新画布（图像）；

//我有如下画圈

canvas.drawCircle(cx, cy, 半径, 油漆);

但圆角不尖：

ii 显示的是这样的：

![在此处输入图像描述](../Images/5bdf63ff4275d43aa3b5e840261f908a.png)

我如何使圆外半径尖锐..

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T07:53:23.987

初始化绘画时，请设置以下属性：

```
paint.setAntiAlias(true);
paint.setDither(true);
paint.setFilterBitmap(true); 
```

请参阅 Android 文档了解每个功能的作用；

[http://developer.android.com/reference/android/graphics/Paint.html](http://developer.android.com/reference/android/graphics/Paint.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-26T17:34:30.930

**let's say:**

```
cx = 108.0F;
cy = 108.0F;
radius = 88.0F;
canvas.drawCircle(cx, cy, radius, paint); 
```

Example:

```
Paint p = new Paint();
     p.setAntiAlias(true);
     p.setFilterBitmap(true);
     p.setDither(true);
     p.setColor(Color.WHITE);
     p.setStrokeWidth(3.75F);
     p.setStyle(Paint.Style.STROKE);
     Bitmap bmp1 = Bitmap.createBitmap(216, 216, Bitmap.Config.ARGB_8888);
     Canvas canvas = new Canvas(bmp1);
     canvas.drawCircle(108.0F, 108.0F, 88.0F, p); // since the bitmap size is 216
         //then, the starting (x) and the end (y) points must begin from 
         //the center to be a nice circle, that's why I used 108 as 108*2 = 216.
         //and the 88 is the radius of the desired circle 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T07:54:39.873

设置反别名

`paint.setAntiAlias(true);`

# typo3 - TYPO3 中定义的子域（“快捷方式”）在哪里？

> ID：12455063
> 
> 赞同：0
> 
> 时间：2012-09-17T07:48:15.237
> 
> 标签：typo3

在使用 TYPO3 管理的公司网站上，定义了指向网站页面的快捷方式。

示例：公司网站是**www.acompany.com**

然后有一个网站**www.acompany.com/coolproduct**例如将用户重定向到**www.acompany.com/products/productgroup3/product25.htm**。

在 TYPO3 中哪里可以定义这样的“快捷方式”链接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T08:52:41.617

很可能页面树中的某些页面已将类型设置为：`Shortcut`这导致它指向其他页面或资源，也有可能设置为`Link to External URL`并且给出了完整的 URL。

检查后端的页面树并在其中找到您的`coolproduct`页面。然后检查站点的属性并根据需要更改为其他值/类型。

此 URL 也可能是由某些插件或 TypoScript 生成的，但在这种情况下，您需要自己进行调查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-30T09:58:51.990

找到这些东西的最简单方法实际上是使用 TYPO3 后端的搜索引擎。你会在右上角找到它。

如果这失败了，我要做的是从扩展存储库安装 PhpMyAdmin。拥有 PhpMyAdmin 后，您可以使用它的搜索功能在数据库中查找任何内容，使用搜索查询：'%coolproduct%' 并选择所有表。在结果中查找“pid”字段。它告诉您找到的项目位于 TYPO3 的哪个页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T12:19:14.773

该页面是否使用扩展名 realURL？如果是这样，则可能定义了 realURL 重定向。

查看页面 -> 信息 -> RealUrl -> 重定向

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-03T10:53:12.487

也许你的用户已经在很多页面中定义了这个链接重定向，你可以在数据库中搜索到它，正好在 tt_content 表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-22T05:35:41.893

您可以为您的域设置快捷方式到您网站的任何页面，因此当用户在 url 中仅输入您的域名时，它会重定向到您在快捷方式中设置的页面。

为此，编辑您的域并将快捷方式设置到页面树的任何页面。

# java - 针对关系/参考的 morphia 查询

> ID：12455064
> 
> 赞同：3
> 
> 时间：2012-09-17T07:48:17.527
> 
> 标签：java, mongodb, morphia

我有一个产品文档，其中包含对评论数组的引用 -`Review[]`评论。评论排名 1-5。

4星及以上的产品如何查询评论？

我试过了`criteria("Reviews.ranking").Equal(4).asList()`

它抱怨它找不到评论。

# python - 如何输入和处理音频文件以通过 pyspeech 或蜻蜓转换为文本

> ID：12455069
> 
> 赞同：3
> 
> 时间：2012-09-17T07:49:03.207
> 
> 标签：python, speech-recognition

我看过pyspeech和dragonfly的文档，但不知道如何输入要转换为文本的音频文件。我已经通过对它说话来尝试使用麦克风并将语音转换为文本，但是如果我想输入以前录制的音频文件。谁能帮忙举个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T20:34:04.710

PySpeech 和 Dragonfly 都是 SAPI 上相对较薄的包装器。不幸的是，它们都使用不支持输入选择的共享识别器。虽然我熟悉 SAPI，但我对 Python 不是很熟悉，所以我无法帮助任何人将 PySpeech/Dragonfly 移至进程内识别器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-11T05:29:10.413

```
import speech_recognition as sr
print(sr.__version__)
r = sr.Recognizer()

audio_file = sr.AudioFile('audio_file.wav')

with audio_file as source:
   audio = r.record(source)

print(type(audio))
print(r.recognize_google(audio)) 
```

# sql - 处理 NULL 时 T-SQL 中 SELECT @Var 和 SET @Var 的行为

> ID：12455070
> 
> 赞同：5
> 
> 时间：2012-09-17T07:49:18.120
> 
> 标签：sql, tsql, select

似乎每天我都会学到一些新东西:)有人可以向我解释以下代码行为背后的基本原理：

```
DECLARE @A INT

SET @A = 15
SET @A = (SELECT ValueThatDoesntExist FROM dbo.MyTable WHERE MyColumn = 'notfound')

SELECT @A
-- Rsultset is NULL

SET @A = 15
SELECT @A = ValueThatDoesntExist FROM dbo.MyTable WHERE MyColumn = 'notfound'

SELECT @A
-- Resultset is 15 
```

据我所见，如果结果集为 NULL，SET 会更改变量的值，而 SELECT 不会。这是正常的 ANSI 行为还是特定于 T-SQL？

当然，如果我这样做`SELECT @A = NULL`了，那么分配就会正确进行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T07:51:42.003

第一个版本将 A 设置为查询的结果：

```
SET @A = (SELECT ValueThatDoesntExist FROM dbo.MyTable WHERE MyColumn = 'notfound') 
```

基本上是`select`in 在标量上下文中，如果它没有找到一行，它评估为`null`.

第二个版本为结果集中的**每一行**设置 A ：

```
SELECT @A = ValueThatDoesntExist FROM dbo.MyTable WHERE MyColumn = 'notfound' 
```

由于没有行，因此永远不会分配 A。另一个例子：

```
declare @a int

select  @a = i
from    (
        select  1
        union all select 2
        union all select 3
        ) as SubQueryAlias(i)
order by
        i

select  @a 
```

这将为 分配 3 个值`@a`。分配的最后一个是`3`，所以这就是查询打印的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T07:51:47.637

那么选择不返回任何行。所以实际上没有分配。

虽然结果集将有一个空值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T07:53:40.473

子句中的变量赋值`SELECT`是相当不可预测的。当你有：

```
SELECT @A = ... 
```

结果集中*只有*一行，值定义明确。如果返回*多*行，则可以针对任意行计算一次该值，*也*可以计算*多次*，直至结果集中的行数。

但是，如果查询产生*零*行，则永远不会执行分配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T07:52:25.153

```
SET @A = (SELECT ValueThatDoesntExist 
                       FROM dbo.MyTable WHERE MyColumn = 'notfound') 
```

这里 NULL 作为执行查询的结果返回

但是当你这样做时

```
SELECT @A = ValueThatDoesntExist FROM dbo.MyTable WHERE MyColumn = 'notfound' 
```

查询没有返回任何内容

# ios - 应用程序未通过协同设计验证。签名无效，包含不允许的权利，或未使用分发签名

> ID：12455072
> 
> 赞同：6
> 
> 时间：2012-09-17T07:49:19.650
> 
> 标签：ios, xcode, app-store-connect, code-signing

我正在尝试将 iOS 应用程序推送到 iTunes Connect，但是当我尝试在 Xcode 中验证它时出现此错误：

```
Application failed codesign verification. The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate 
```

我已经看到很多与同一问题相关的问题，但这些对我不起作用。我遵循 Apple[技术说明 TN2250](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html)的每一步。我检查了在构建设置中选择了一个分发配置文件进行发布（已尝试使用通配符和应用程序的自定义配置文件）并且架构是正确的。为了确保应用程序是使用该配置文件签名的，我使用该`codesign -d -vvvv MyApp.app`命令，并得到如下内容：

```
Executable=/Users/myuser/Library/Developer/Xcode/Archives/2012-09-17/myapp 17-09-12 09.27.xcarchive/Products/Applications/MyApp.app/MyApp
Identifier=com.example.MyApp
...
Authority=iPhone Distribution: My Company
Authority=Apple Worldwide Developer Relations Certification Authority
Authority=Apple Root CA
... 
```

我检查了我没有修改的权利，`security cms -D -i MyApp.app/embedded.mobileprovision`得到了这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>ApplicationIdentifierPrefix</key>
    <array>
        <string>PR3F1X</string>
    </array>
    <key>CreationDate</key>
    <date>2012-09-17T07:20:35Z</date>
    <key>DeveloperCertificates</key>
    <array>
        <data>
                ...
        </data>
    </array>
    <key>Entitlements</key>
    <dict>
        <key>application-identifier</key>
        <string>PR3F1X.com.example.MyApp</string>
        <key>get-task-allow</key>
        <false/>
        <key>keychain-access-groups</key>
        <array>
            <string>PR3F1X.*</string>
        </array>
    </dict>
    <key>ExpirationDate</key>
    <date>2013-09-16T07:20:35Z</date>
    <key>Name</key>
    <string>PROFILE NAME</string>
    <key>TeamIdentifier</key>
    <array>
        <string>PR3F1X</string>
    </array>
    <key>TimeToLive</key>
    <integer>364</integer>
    <key>UUID</key>
    <string>...</string>
    <key>Version</key>
    <integer>1</integer>
</dict>
</plist> 
```

这个应用程序的包 id 看起来像 com.example.MyApp，我认为大写字母可能是问题，但更改了它们并没有这样做。之后，我吊销了我的证书，获得了新的 mobileprovision 配置文件并再次经历了整个过程，但没有成功。

我使用的软件是 Xcode 4.3.2 和 Mac OS X 10.7.4

我看不出问题出在哪里，我错过了一些东西。

编辑 1：修改捆绑 ID 是否需要我手动更改一些其他设置？

编辑2：我刚刚从头开始制作了一个示例应用程序，使用相同的证书对其进行了签名，一切顺利，所以问题似乎出在配置中。我正在尝试查看这两个项目设置之间的差异，但唯一值得注意的是第一个仅适用于 iPad，并且它使用了几个 PhoneGap 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T10:56:45.157

I had the same problem. You had to check your Application's Signature, see [How do I check the entitlements on my Application's Signature](https://developer.apple.com/library/ios/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG33%5d) with following:

`codesign -d --entitlements - /path/to/MyGreatApp.app`

It's `OK` and I don't know what the error you have, if you get something like:

```
Executable=/path/to/MyGreatApp.app/MyGreatApp
??qq?<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <dict>
        <key>application-identifier</key>
        <string>ABC123DE45.com.appleseedinc.mygreatapp</string>
        <key>get-task-allow</key>
        <false/>
        <key>keychain-access-groups</key>
        <array>
            <string>ABC123DE45.com.appleseedinc.mygreatapp</string>
        </array>
    </dict>
</plist> 
```

But If you get only:

`Executable=/path/to/MyGreatApp.app/MyGreatApp`

Then, it's a problem. Probably, you damaged the entitlements during the code resigning with `codesign` tool.

I've made next steps to fix it:

1.  Archive any app in Xcode.
2.  Choose 'Distribute ...'->'Save for Enterprise Ad-Hoc Deployment' as AppName.ipa
3.  Unzip AppName.ipa
4.  Create Application's Signature entitlements file: codesign -d --entitlements :enterprise.plist Payload/PathToApp.app/
5.  Go to the folder where uploaded app located.
6.  Create Provisioning profile entitlements file:

    security cms -D -i /path/to/the.app/embedded.mobileprovision > provision_entitlements.plist

7.  Open provision_entitlements.plist and enterprise.plist. Modify settings of enterprise.plist , it should be equal to provision_entitlements.plist->Entitlements property. Save the changes.

8.  When resign the app add argument --entitlements enterprise.plist to codesign tool.

    ```
    codesign -fs "iPhone Distribution: My Company" APP_DIRECTORY --entitlements enterprise.plist 
    ```

# maven - HTTP 状态 409 - 目标部署路径 [...] 与 POM 的预期路径前缀不匹配

> ID：12455074
> 
> 赞同：8
> 
> 时间：2012-09-17T07:49:25.563
> 
> 标签：maven, xsd, artifactory

我使用 Artifactory 作为 Maven 存储库，我不是管理员（企业存储库）。我正在尝试使用 XmlSchema（通过 appfuse-basic-struts 原型的许多依赖项），但是当我运行***mvn package***时遇到了一个我无法理解的问题：

> **HTTP 状态 409 - 目标部署路径“org/apache/ws/commons/XmlSchema/1.1/XmlSchema-1.1.pom”与 POM 的预期路径前缀“org/apache/ws/commons/XmlSchema/SNAPSHOT”不匹配。请验证您的 POM 内容是否正确，并确保源路径是有效的 Maven 存储库根路径。**
> 
> 类型状态报告
> 
> **消息**目标部署路径“org/apache/ws/commons/XmlSchema/1.1/XmlSchema-1.1.pom”与 POM 的预期路径前缀“org/apache/ws/commons/XmlSchema/SNAPSHOT”不匹配。请验证您的 POM 内容是否正确，并确保源路径是有效的 Maven 存储库根路径。
> 
> **描述**由于与资源的当前状态冲突，请求无法完成（目标部署路径 'org/apache/ws/commons/XmlSchema/1.1/XmlSchema-1.1.pom' 与 POM 的预期路径前缀不匹配'org/apache/ws/commons/XmlSchema/SNAPSHOT'。请验证您的 POM 内容的正确性，并确保源路径是有效的 Maven 存储库根路径。）。Apache Tomcat/6.0.18

即使在传递依赖项中，我也找不到。谁能解释我有什么麻烦？

我发现这篇文章[Using Maven-3 Got Http 409 error when re-deploy with archiva](https://stackoverflow.com/questions/8043457/using-maven-3-got-http-409-error-when-re-deploy-with-archiva)但它似乎与我的问题不符。

**编辑1**：当我不使用我的公司回购时，这项工作非常好。

**编辑 2**：这里是通过 http 的 repo 视图：

```
repo/org/apache/ws/commons/XmlSchema/1.1 的索引

名称 最后修改尺寸

../
maven-metadata.xml->--
maven-metadata.xml.md5-> - -
maven-metadata.xml.sha1-> - -
XmlSchema-1.1.jar 2006 年 9 月 18 日 20:12 124.96 KB
XmlSchema-1.1.jar.asc-> - -
XmlSchema-1.1.jar.md5 2006 年 9 月 18 日 20:12 32 字节
XmlSchema-1.1.jar.sha1 2006 年 9 月 18 日 20:12 40 字节
XmlSchema-1.1.pom-> - -
XmlSchema-1.1.pom.md5-> - -
XmlSchema-1.1.pom.sha1-> - -

```

**编辑 3**：依赖项

```
mvn 依赖：树

[信息] com.edf.dpi.esip.gdt:gdt-ihm:war:7.0.1-SNAPSHOT
[信息] +- org.appfuse:appfuse-struts:war:2.0-m5:compile
[信息] +- org.appfuse:appfuse-struts:warpath:2.0-m5:compile
[信息] | +- org.appfuse:appfuse-web-common:war:2.0-m5:compile
[信息] | +- org.appfuse:appfuse-web-common:warpath:2.0-m5:compile
[信息] | | +- org.appfuse:appfuse-service:jar:2.0-m5:compile
[信息] | | | +-aspectj:aspectjweaver:jar:1.5.3:compile
[信息] | | | +- net.sf.ehcache:ehcache:jar:1.3.0-beta2:compile
[信息] | | | | \- net.sf.jsr107cache:jsr107cache:jar:1.0:compile
[信息] | | | +-速度：速度：jar：1.4：编译
[信息] | | | | \- 速度：速度-dep：jar：1.4：运行时
[信息] | | | \- org.codehaus.xfire:xfire-all:jar:1.2.6:compile
[信息] | | | +- org.codehaus.xfire:xfire-aegis:jar:1.2.6:compile
[信息] | | | | \- net.java.dev.stax-utils:stax-utils:jar:20040917:compile
[信息] | | | +- org.codehaus.xfire:xfire-ws-security:jar:1.2.6:compile
[信息] | | | | +- xfire:opensaml:jar:1.0.1:编译
[信息] | | | | +- bouncycastle:bcprov-jdk15:jar:133:compile
[信息] | | | | +- xerces:xercesImpl:jar:2.7.1:compile
[信息] | | | | +- xml-apis:xml-apis:jar:1.0.b2:compile
[信息] | | | | +- xml-security:xmlsec:jar:1.3.0:compile
[信息] | | | | +- wss4j:wss4j:jar:1.5.1:编译
[信息] | | | | \- commons-discovery:commons-discovery:jar:0.2:compile
[信息] | | | +- org.codehaus.xfire:xfire-core:jar:1.2.6:compile
[信息] | | | | +- wsdl4j:wsdl4j:jar:1.6.1:编译
[信息] | | | | +- jaxen:jaxen:jar:1.1-beta-9:compile
[信息] | | | | | \- xerces:xmlParserAPIs:jar:2.6.2:compile
[信息] | | | | +- stax:stax-api:jar:1.0.1:compile
[信息] | | | | +- org.apache.ws.commons:XmlSchema:jar:1.1:compile
[信息] | | | | +- org.codehaus.woodstox:wstx-asl:jar:3.2.0:compile
[信息] | | | | +- jdom:jdom:jar:1.0:compile
[信息] | | | | \- commons-httpclient:commons-httpclient:jar:3.0:compile
[信息] | | | +- org.codehaus.xfire:xfire-java5:jar:1.2.6:compile
[信息] | | | | \- xfire:xfire-jsr181-api:jar:1.0-M1:compile
[信息] | | | +- org.codehaus.xfire:xfire-generator:jar:1.2.6:compile
[信息] | | | | \- org.codehaus.xfire:xfire-jaxb2:jar:1.2.6:compile
[信息] | | | | \- com.sun.xml.bind:jaxb-xjc:jar:2.0.1:compile
[信息] | | | | \- com.sun.xml.bind:jaxb-impl:jar:2.0.1:compile
[信息] | | | +- org.codehaus.xfire:xfire-xmlbeans:jar:1.2.6:compile
[信息] | | | | \- xmlbeans:xbean:jar:2.2.0:compile
[信息] | | | +- org.codehaus.xfire:xfire-annotations:jar:1.2.6:compile
[信息] | | | | \- commons-attributes:commons-attributes-api:jar:2.1:compile
[信息] | | | | +- 蚂蚁：蚂蚁：罐子：1.5：编译
[信息] | | | | \- qdox:qdox:jar:1.5:compile
[信息] | | | +- org.codehaus.xfire:xfire-jaxws:jar:1.2.6:compile
[信息] | | | | +- javax.xml.ws:jaxws-api:jar:2.0:compile
[信息] | | | | | \- javax.xml.bind:jaxb-api:jar:2.0:compile
[信息] | | | | | \- javax.xml.bind:jsr173_api:jar:1.0:compile
[信息] | | | | +- com.sun.xml.messaging.saaj:saaj-impl:jar:1.3:compile
[信息] | | | | \- javax.xml.soap:saaj-api:jar:1.3:compile
[信息] | | | \- org.codehaus.xfire:xfire-spring:jar:1.2.6:compile
[信息] | | | \- org.apache.xbean:xbean-spring:jar:2.8:compile
[信息] | | +- commons-collections:commons-collections:jar:3.2:compile
[信息] | | +- commons-dbcp:commons-dbcp:jar:1.2.2:compile
[信息] | | | \- commons-pool:commons-pool:jar:1.3:compile
[信息] | | +- org.directwebremoting:dwr:jar:2.0.1:compile
[信息] | | +- javax.servlet:jstl:jar:1.1.2:compile
[信息] | | +- taglibs:standard:jar:1.1.2:compile
[信息] | | +- struts-menu:struts-menu:jar:2.4.2:compile
[信息] | | | +- commons-digester:commons-digester:jar:1.7:compile
[信息] | | | \- 速度工具：速度工具视图：jar：1.0：编译
[信息] | | +- opensymphony:clickstream:jar:1.0.2:compile
[信息] | | +- opensymphony:oscache:jar:2.3:compile
[信息] | | +- opensymphony:sitemesh:jar:2.2.1:compile
[信息] | | \- org.tukey:urlrewrite:jar:2.5.2:compile
[信息] | +- org.apache.struts:struts2-core:jar:2.0.6:compile
[信息] | | +- opensymphony:xwork:jar:2.0.1:compile
[信息] | | +- freemarker:freemarker:jar:2.3.8:compile
[信息] | | +- opensymphony:ognl:jar:2.6.11:compile
[信息] | | +- commons-logging:commons-logging:jar:1.1:compile
[信息] | | \- com.sun:tools:jar:1.5.0:system
[信息] | +- org.apache.struts:struts2-codebehind-plugin:jar:2.0.6:compile
[信息] | +- org.apache.struts:struts2-spring-plugin:jar:2.0.6:compile
[信息] | +- commons-fileupload:commons-fileupload:jar:1.1.1:compile
[信息] | +- commons-io:commons-io:jar:1.1:compile
[信息] | +- displaytag:displaytag:jar:1.1:compile
[信息] | | +- commons-lang:commons-lang:jar:2.1:compile
[信息] | | +- com.lowagie:itext:jar:1.3:compile
[信息] | | \- commons-beanutils:commons-beanutils:jar:1.7.0:compile
[信息] | +- org.acegisecurity:acegi-security-tiger:jar:1.0.3:compile
[信息] | | \- org.acegisecurity:acegi-security:jar:1.0.3:compile
[信息] | | +- commons-codec:commons-codec:jar:1.3:compile
[信息] | | \- oro:oro:jar:2.0.8:compile
[信息] | +- log4j:log4j:jar:1.2.15:编译
[信息] | | +- javax.mail:mail:jar:1.4:compile
[信息] | | | \- javax.activation:activation:jar:1.1:compile
[信息] | | +- javax.jms:jms:jar:1.1:编译
[信息] | | +- com.sun.jdmk:jmxtools:jar:1.2.1:compile
[信息] | | \- com.sun.jmx:jmxri:jar:1.2.1:compile
[信息] | \- org.springframework:spring:jar:2.0.5:compile
[信息] +- org.appfuse:appfuse-hibernate:jar:2.0-m5:compile
[信息] | +- org.appfuse:appfuse-data-common:jar:2.0-m5:compile
[信息] | | \- javax.persistence:persistence-api:jar:1.0:compile
[信息] | \- org.hibernate:hibernate-annotations:jar:3.2.1.ga:compile
[信息] | \- org.hibernate:hibernate:jar:3.2.1.ga:compile
[信息] | +- javax.transaction:jta:jar:1.0.1B:compile
[信息] | +- asm:asm-attrs:jar:1.5.3:compile
[信息] | +- dom4j:dom4j:jar:1.6.1:编译
[信息] | +- antlr:antlr:jar:2.7.6:compile
[信息] | +- cglib:cglib:jar:2.1_3:compile
[信息] | \- asm:asm:jar:1.5.3:compile
[信息] +- mysql:mysql-connector-java:jar:5.0.5:compile
[信息] +- javax.servlet:jsp-api:jar:2.0:provided
[信息] +- javax.servlet:servlet-api:jar:2.4:provided
[INFO] +- jmock:jmock:jar:1.1.0:test（范围未更新为编译）
[信息] +- junit:junit:jar:4.10:test
[信息] | \- org.hamcrest:hamcrest-core:jar:1.1:test
[信息] +- org.springframework:spring-mock:jar:2.0.8:test
[信息] \- org.subethamail:subethasmtp-wiser:jar:1.0.3:test
[信息] \- org.subethamail:subethasmtp-smtp:jar:1.0.3:test

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T04:44:06.983

传递依赖实际上已经被毒化了。

您可以做的最好的事情是检查*“XmlSchema”*的原始 POM是否已使用版本*“SNAPSHOT”*发布。如果有，请要求项目维护人员***更正此错误并重新发布 POM***；如果尚未以这种方式发布，***请删除不正确的 POM 文件***并确保***从健康的来源再次解析它***。

如果这两个选项都不适用，您可以下载 POM 文件，进行编辑以更正并将其重新部署到本地存储库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-27T18:26:14.290

我遇到了同样的问题，我可以通过选中 Artifactory 远程存储库设置中的“抑制 POM 一致性检查”复选框来解决它。

[Maven回购设置](https://i.stack.imgur.com/Ztfws.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T09:30:24.387

我有同样的错误：XmlSchema v1.1 的官方 pom 是错误的，没有可以从中获取的健康源，因此您有以下选择：

1.  在神器上手动纠正它，
2.  手动将其复制到您的本地存储库（无需更改），
3.  升级到更新的版本（因为它是 xfire 1.2.6 的传递依赖项，这可能是不可能的，但您可以尝试）。

有关更多信息，请参阅[此帖子](https://getsatisfaction.com/sonatype/topics/invalid_version_in_xmlschema_1_1_pom_xml)的答案：Maven Central Repository 管理员知道 pom 错误，但他们无法更正它并且 Apache 不再支持 XmlSchema 1.1。

此外，这不是唯一有问题的 pom：Apache commons-logging v1.1 也是错误的（它列出了错误的依赖项），所以我总是使用 v1.1.1 或更高版本。

# batch-file - 从变量的右侧计数并删除余数

> ID：12455075
> 
> 赞同：0
> 
> 时间：2012-09-17T07:49:35.077
> 
> 标签：batch-file

我是批处理文件的新手，我什至无法掌握如何开始批处理脚本来完成我真正需要的东西。我不确定这是否可能，但我希望有人可以提供帮助，非常感谢。我想要做的是从右到左数 17 个字符并删除剩余的。下面是一个例子：

```
A.C.D,ABCDEFGH,ABCDEFGH
A.F.N,R,ABCDEFGH,ABCDEFGH
L.V.X.A.C.D,ABCDEFGH,ABCDEFGH 
```

结果

```
ABCDEFGH,ABCDEFGH
ABCDEFGH,ABCDEFGH
ABCDEFGH,ABCDEFGH 
```

有任何想法吗？如果有人可以提供帮助，请提前感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:59:26.803

您只需要使用 Bash[**子字符串提取**](http://tldp.org/LDP/abs/html/string-manipulation.html#SUBSTREXTR01)：

```
myvar=A.C.D,ABCDEFGH,ABCDEFGH

echo ${myvar:(-17)} 
```

那应该做你想做的事。

# c# - 为什么 Enumerable.Cast 不使用用户定义的强制转换？

> ID：12455076
> 
> 赞同：12
> 
> 时间：2012-09-17T07:49:39.187
> 
> 标签：c#, casting, ienumerable

说，我们有2个类：

```
public class A
{
    public int a;
}

public class B
{
    public int b;

    public static implicit operator B(A x)
    {
        return new B { b = x.a };
    }
} 
```

那么为什么

```
A a = new A { a = 0 };
B b = a; //OK

List<A> listA = new List<A> { new A { a = 0 } };
List<B> listB = listA.Cast<B>().ToList(); //throws InvalidCastException 
```

运算符也是`explicit`如此。

PS：手动（单独）铸造每个元素

```
List<B> listB = listA.Select<A, B>(s => s).ToList(); //OK 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T07:54:18.880

的名称具有`Enumerable.Cast`误导性，因为它的目的是拆箱值。它适用于（`IEnumerable`不*适用*`IEnumerable<T>`）以生成`IEnumerable<T>`. 如果您已经有一个`IEnumerable<T>` `Enumerable.Cast`很可能不是您想要使用的方法。

从技术上讲，它正在做这样的事情：

```
foreach(object obj in value)
    yield return (T)obj; 
```

如果`T`不是装箱值，这将导致`InvalidCastException`.

您可以自己测试此行为：

```
int i = 0;
object o = i;
double d1 = (double)i; // Works.
double d2 = (double)o; // Throws InvalidCastException 
```

您有两种可能的解决方案：

1.  采用`Select(x => (B)x)`
2.  创建一个`Cast`适用于`IEnumerable<T>`而不是`IEnumerable`.

# java - Eclipse 没有打开

> ID：12455077
> 
> 赞同：0
> 
> 时间：2012-09-17T07:49:42.537
> 
> 标签：java, eclipse

我是java和eclipse的新手。我什至在这个网站上看到了这种类型的查询。但我已经应用了所有这些方法，它也很有帮助。但是当我尝试打开eclipse时，它没有打开：这是我的java路径

> C:\Program 文件 (x86)\Java\jre6

这是我日食的地方

> C:\用户\新文件夹\eclipse

但是当我运行 Eclipse 时出现错误

> “Java rumtime 环境（JRE）或 Java 开发工具包（JDK）必须可用才能运行 Eclipse。搜索以下位置后未找到 Java 虚拟机：C:\Users\New folder\eclipse\jre\bin\当前路径中的 javaw.exe javaw.exe"

请告诉我可能的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:09:37.223

如果您已经安装了 jdk，那么 Eclipse 启动不会有任何问题。我想你刚刚安装了 JRE 来运行 java 程序。你需要安装JDK。

检查是否安装了JDK。检查路径`C:\Program Files (x86)\Java`。您的 Java 目录应该包含 directory `jdk1.6..`，如果那里没有此目录，请在其他地方搜索。如果你没有找到目录，那么你没有安装 JDK。

[从这里](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载 JDK 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:04:01.173

您应该设置 JAVA_HOME 和 JRE_HOME 变量。[http://www.javawebonline.com/java-se-programming/beginners/java_home-jre_home-environment-variables/](http://www.javawebonline.com/java-se-programming/beginners/java_home-jre_home-environment-variables/)

另一个建议是您应该将您的 java home 移动到另一个位置并测试您的 java 路径，例如

> C:\Java\jre6

代替

> C:\Program 文件 (x86)\Java\jre6.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:04:47.257

转到 C:\Users\New folder\eclipse 使用文本编辑器打开**eclipse.ini**文件并在那里添加 javaw 位置（在 -vm 部分之后），如下所示：

```
-vm
C:/Program Files/Java/jdk1.6.0_33/bin/javaw.exe <--- change to your path
-vmargs 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T08:05:17.180

按`Windows`+打开命令提示符`r`，键入`cmd`并按`Enter`。

输入`javac`并检查输出。

如果它提供了所有选项和用法，那么您已经正确配置了 PATH 变量，否则您没有正确设置它们。

通过在命令提示符处检查值来尝试。

### 笔记

每次更改环境变量时都需要打开一个新的命令提示符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T08:26:46.273

如果您的`Program Files`文件夹中有两个文件夹`C: drive`

如

```
C:\Program Files

C:\Program Files (x86) 
```

然后试着把你的java放进去

```
C:\Program Files 
```

代替`C:\Program Files (x86)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T10:02:58.230

看来您正在 64 位操作系统中运行 64 位 eclipse。如果您正在运行 64 位 eclipse，那么您需要 64 位 JDK。请安装 64 位 JDK 并运行 eclipse。

# iphone - 播放无声视频以及音乐应用程序播放歌曲

> ID：12455082
> 
> 赞同：4
> 
> 时间：2012-09-17T07:49:57.453
> 
> 标签：iphone, ios, mpmovieplayercontroller, avplayer, mpmusicplayercontroller

好的，所以我有一个应用程序，其中有很多练习视频，根本没有任何声音。

此外，在练习开始时，我会显示设备音乐播放器中的所有 mp3 文件，供用户选择音频文件。

但是，每当视频开始播放时，音乐播放器就会暂停。如何使其以音乐播放器继续播放和视频同时播放的方式工作。

对于视频，使用类 -- MPMoviePlayerViewController

添加如下：

```
self.movieplayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:urlStr];
self.movieplayerController.moviePlayer.controlStyle =  MPMovieControlStyleFullscreen;
self.movieplayerController.moviePlayer.fullscreen = YES;
self.movieplayerController.moviePlayer.view.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin;
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
[self presentModalViewController:movieplayerController animated:YES]; 
```

对于音乐播放器，类是 --- MPMusicPlayerController。

音频被选择和播放如下：

```
 - (void)mediaPicker: (MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection
{
      [self dismissModalViewControllerAnimated: YES];

      [self.musicPlayer stop];

      [self.musicPlayer setQueueWithItemCollection:mediaItemCollection];

      [self.musicPlayer play];
} 
```

**编辑**：

另外，尝试使用 AVPlayer 播放视频，但没有成功！

代码如下：

```
AVPlayerItem *playerItem = [[AVPlayerItem alloc] initWithURL:urlStr];
AVPlayer *player = [[AVPlayer alloc] initWithPlayerItem:playerItem];

AVPlayerLayer *avPlayerLayer = [AVPlayerLayer playerLayerWithPlayer:player];

avPlayerLayer.frame = self.view.frame;
[self.view.layer addSublayer:avPlayerLayer];
[player play]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T12:22:07.900

终于有答案了......

与 AVPlayer 一起使用。

如上所述在问题中初始化它。

```
AVPlayerItem *playerItem = [[AVPlayerItem alloc] initWithURL:urlStr];
AVPlayer *player = [[AVPlayer alloc] initWithPlayerItem:playerItem];

AVPlayerLayer *avPlayerLayer = [AVPlayerLayer playerLayerWithPlayer:player];

avPlayerLayer.frame = self.view.frame;
[self.view.layer addSublayer:avPlayerLayer];
[player play]; 
```

但在此之前，在 AppDelegate 中，创建一个允许混音的 AudioSession。

```
AudioSessionInitialize(NULL, NULL, NULL, NULL);  
UInt32 sessionCategory = kAudioSessionCategory_AmbientSound;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);
UInt32 allowMixWithOthers = true;
AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(allowMixWithOthers), &allowMixWithOthers);
AudioSessionSetActive(true); 
```

从这里得到了答案。

[带有 AVPlayer 的应用程序在启动后播放 mp4 中断 iPod 音乐](https://stackoverflow.com/questions/12016770/app-with-avplayer-plays-mp4-interrupt-ipod-music-after-launched)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:34:00.067

您可以`AudioToolbox`用于此目的。我开发了一个小型演示（在阅读了您的问题之后）及其工作。

从这里下载演示`MPMoviePlayerViewController`：- [http://mobile.tutsplus.com/tutorials/iphone/mediaplayer-framework_mpmovieplayercontroller_ios4/](http://mobile.tutsplus.com/tutorials/iphone/mediaplayer-framework_mpmovieplayercontroller_ios4/)

现在将任何`.wav`文件添加到您的包中。

现在修改这个方法：

```
-(IBAction)playMovie:(id)sender
{
    UIButton *playButton = (UIButton *) sender; 

    NSString *filepath   =   [[NSBundle mainBundle] pathForResource:@"big-buck-bunny-clip" ofType:@"m4v"];
    NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
    MPMoviePlayerViewController *moviePlayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:fileURL];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlaybackComplete:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:moviePlayerController];

    [moviePlayerController.view setFrame:CGRectMake(playButton.frame.origin.x, 
                                                    playButton.frame.origin.y, 
                                                    playButton.frame.size.width, 
                                                    playButton.frame.size.height)];

    [self.view addSubview:moviePlayerController.view];
    //moviePlayerController.fullscreen = YES;

    //moviePlayerController.scalingMode = MPMovieScalingModeFill;

    [moviePlayerController.moviePlayer play];

    NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"wav"];

    SystemSoundID soundID;

    AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath: soundPath], &soundID);

    AudioServicesPlaySystemSound (soundID);

    [soundPath release];
} 
```

它只是一个演示。希望它进一步帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T16:33:41.307

不幸的是，iOS7 弃用了 AudioSessionInitialize 和朋友。它现在更容易与 AVAudioSession 混合。我将 audioSession 对象用作全局对象 - 不确定如果它被释放会发生什么。如果在堆栈上声明 AVPlayer 肯定会匆忙放弃 - 所以要小心那个陷阱。

```
 _audioSession = [AVAudioSession sharedInstance];
  [_audioSession setCategory:AVAudioSessionCategoryAmbient error:&theError]; 
```

# android - BroadcastReceiver的onReceive函数中的Android startActivity

> ID：12455083
> 
> 赞同：1
> 
> 时间：2012-09-17T07:50:00.320
> 
> 标签：android, broadcastreceiver, alarmmanager, broadcast

我的 BroadcastReceiver 的 onReceive 函数中有以下代码。

```
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    if (action == null) return;
    if (action.equals(ACTION_ALARM)) {
        Intent alarmPopup = new Intent(context, AlarmPopup.class);
        int vibrateDuration = context.getSharedPreferences(PREF, 0)
                .getInt(VIBRATE_DURATION, DEFAULT_VIBRATE_DURATION)
        alarmPopup.putExtra(VIBRATE_DURATION, vibrateDuration);
        alarmPopup.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(alarmPopup);
    }
} 
```

此代码`AlarmPopup`在收到警报管理器的广播时启动活动。一旦 AlarmPopup 活动启动，它会显示一条典型的警报消息并在`vibrateDuration`通过期间振动`Intent#putExtra`。

在AlarmPopup 的onCreate 方法中，activity 保持`WakeLock`让设备保持开启状态。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    wl = getLock(this);
    if (!wl.isHeld()) {
        Log.d(PREF, "Alarm popup acquires wake lock");
        wl.acquire();
        thread.run();
    }
    .
    .
    .
} 
```

`getLock`是一种同步方法，其管理`WakeLock`方式与[WakefulIntentService](https://github.com/commonsguy/cwac-wakeful)一样。

```
private static volatile PowerManager.WakeLock wlStatic = null;

synchronized private static PowerManager.WakeLock getLock(Context context) {
    if (wlStatic == null) {
        PowerManager mgr = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
        wlStatic = mgr.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK
                | PowerManager.ACQUIRE_CAUSES_WAKEUP
                | PowerManager.ON_AFTER_RELEASE, PREF);
        wlStatic.setReferenceCounted(true);
    }
    return wlStatic;
} 
```

现在问题来了：即使`context.startActivity(alarmPopup)`被调用，也`startActivity` **很少**不启动活动或不按时启动，通常在 1-2 分钟后。

似乎操作系统在创建过程中杀死了我的 AlarmPopup 活动，或者让活动的创建时间比`startActivity`实际调用的时间晚一点。

真正有趣的是，当出现上述问题时，有时会记录日志消息`"Alarm popup acquires wake lock"`，有时甚至没有记录。我认为，在这种情况下，操作系统会在执行第一行或第二行`onCreate`方法时终止活动。

我怎么解决这个问题？

当另一个线程正在创建 AlarmPopup 活动时，我是否应该在 onReceive 结束时放置一些保持 CPU 的虚拟代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:43:24.303

> 似乎操作系统在创建过程中杀死了我的 AlarmPopup 活动，或者让活动的创建时间晚于实际调用 startActivity 的时间。

不，设备只是睡着了。`startActivity()`是一个异步操作。`WakeLock`操作系统为工作保留的（`AlarmManager`假设您确实在使用`AlarmManager`）将在`onReceive()`返回时释放。`onCreate()`您的活动将不会在`onReceive()`返回时运行。因此，设备可能会`onReceive()`在您获取`WakeLock`in `onCreate()`.

> 我怎么解决这个问题？

获取`WakeLock`in `onReceive()`。

# java - 如何计算 Hadoop Map-Reduce 中一组数据的中心移动平均值？

> ID：12455088
> 
> 赞同：0
> 
> 时间：2012-09-17T07:50:17.560
> 
> 标签：java, hadoop, mapreduce

我想计算一组 Data 的 Centered Moving average。

`Example Input format :`

```
quarter | sales      
Q1'11   | 9            
Q2'11   | 8
Q3'11   | 9
Q4'11   | 12
Q1'12   | 9
Q2'12   | 12
Q3'12   | 9
Q4'12   | 10 
```

数据的数学表示和计算移动平均然后居中移动平均

```
Period   Value   MA  Centered
1          9
1.5
2          8
2.5              9.5
3          9            9.5
3.5              9.5
4          12           10.0
4.5              10.5
5          9            10.750
5.5              11.0
6          12
6.5
7          9 
```

我坚持实施 RecordReader，它将提供一年的映射器销售价值，即四个季度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T21:24:18.120

这实际上在 MapReduce 范式中是完全可行的；它不必被认为是一个“滑动窗口”。相反，请考虑每个数据点与最多四个 MA 计算相关的事实，并记住对 map 函数的每次调用都可以发出多个键值对。这是伪代码：

```
First MR job:

map(quarter, sales)
    emit(quarter - 1.5, sales)
    emit(quarter - 0.5, sales)
    emit(quarter + 0.5, sales)
    emit(quarter + 1.5, sales)

reduce(quarter, list_of_sales)
    if (list_of_sales.length == 4):
        emit(quarter, average(list_of_sales))
    endif

Second MR job:

map(quarter, MA)
    emit(quarter - 0.5, MA)
    emit(quarter + 0.5, MA)

reduce(quarter, list_of_MA)
    if (list_of_MA.length == 2):
        emit(quarter, average(list_of_sales))
    endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:59:38.680

据我所知，移动平均值并不能很好地映射到 MapReduce 范式，因为它的计算本质上是排序数据上的“滑动窗口”，而 MR 正在处理排序数据的非相交范围。
我看到的解决方案如下：
a）实现自定义分区器，以便能够在两次运行中创建两个不同的分区。 在每次运行中，您 的 减速器
将获得不同范围的数据并在适当的位置计算移动平均值 ...

在这里，您将计算一些 Q 的移动平均线。

在下一次运行中，您的减速器应该得到如下数据： R1：Q1...Q6
R2：Q6...Q10
R3：Q10..Q14

并计算其余的移动平均线。
然后，您将需要汇总结果。

自定义分区器的想法，它将具有两种操作模式 - 每次划分为相等的范围但有一些变化。在伪代码中，它看起来像这样：
partition = (key+SHIFT) / (MAX_KEY/numOfPartitions) ;
其中： SHIFT 将从配置中获取。
MAX_KEY = 密钥的最大值。为简单起见，我假设它们从零开始。

RecordReader，恕我直言，它不是一个解决方案，因为它仅限于特定的拆分并且不能滑过拆分的边界。

另一种解决方案是实现拆分输入数据的自定义逻辑（它是 InputFormat 的一部分）。可以做两张不同的幻灯片，类似于分区。

# php - 如何在 Symfony2 中使用 SwitchUserListener？

> ID：12455090
> 
> 赞同：2
> 
> 时间：2012-09-17T07:50:20.617
> 
> 标签：php, symfony

当用户冒充另一个用户时，我正在尝试进行重定向。

为此，我注册了一项服务：

```
ACME_listener.security_switch_user:
    class: ACME\CustomerLoginBundle\Listener\SecuritySwitchUserListener
    arguments:  [@service_container, @router, @security.context]
    tags:
        - { name: kernel.event_listener, event: security.switch_user, method: onSecuritySwitchUser } 
```

我的侦听器类如下所示：

```
namespace ACME\CustomerLoginBundle\Listener;

use Symfony\Component\Security\Http\Event\SwitchUserEvent;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\Security\Http\Firewall\ListenerInterface;

class SecuritySwitchUserListener implements ListenerInterface {
    public function __construct($appContainer, $router) {
        $this->router = $router;
        $this->appContainer = $appContainer;
    }

    public function onSecuritySwitchUser(SwitchUserEvent $event) {
       echo "im in here!";
      // this does get called

    }

    public function handle(GetResponseEvent $event) {
        echo "but not here :(";
        // this does not get called!
    }

} 
```

现在的问题是我无法从`onSecuritySwitchUser`方法中重定向用户。返回 a`RedirectResponse`不起作用，并且 the`SwitchUserEvent`没有`setResponse()`方法。

我该怎么做`handle()`才能调用该方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:52:02.440

我认为这`handle()`是从`onSecuritySwitchUser()`. 但我可能是错的。

**更新**

您可以使用自己的请求覆盖事件 :)

看着：

```
Symfony\Component\Security\Http\Firewall\SwitchUserListener 
```

然后用覆盖的请求调度新的 SwitchUserEvent

```
if (null !== $this->dispatcher) {
        $switchEvent = new SwitchUserEvent($request, $token->getUser());
        $this->dispatcher->dispatch(SecurityEvents::SWITCH_USER, $switchEvent);
} 
```

也许这会对你有所帮助。

# iphone - 当我有多个部分时，如何以数字 0 开始我的 UITableView 部分？

> ID：12455094
> 
> 赞同：4
> 
> 时间：2012-09-17T07:51:11.987
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

=>**我知道，这是个愚蠢的问题，但这对于像我这样的新 iPhone 开发者来说更​​重要。**

在这里，我有与**UITableView 部分**相关的问题：

**第一个问题：**我有一个问题，我如何从多个部分开始我的 UITableView 部分，编号为 0？

**例如 ：**

我`UITableView`在`numberOfSectionsInTableView`委托方法中有 11 个部分，我的部分首先从第 11 个部分开始，然后是 0、1、2、3、4、5、6、7、8、9 和 10。所以我该如何开始我的部分编号为 0 编号，然后按原样。

**第二个问题：**在`titleForHeaderInSection`委托方法中，我的 tableView 的所有部分都重复了 3 次。并且在当前 ViewController 我向上或向下滚动 UITableView 然后部分显示正常（0 到 11 ） UITableView 的这个正常部分在重复部分 3 次后显示。

**例如 ：**

我`NSLog (@" %d ", section );`在 `titleForHeaderInSection`委托方法中使用，然后在控制台中显示如下

**控制台输出：**

```
2012-09-17 12:27:47.424 Quotes2You[1623:f803]  11 
2012-09-17 12:27:47.426 Quotes2You[1623:f803]  11 
2012-09-17 12:27:47.427 Quotes2You[1623:f803] 11
2012-09-17 12:27:47.428 Quotes2You[1623:f803]  0 
2012-09-17 12:27:47.429 Quotes2You[1623:f803]  0 
2012-09-17 12:27:47.429 Quotes2You[1623:f803] 0
2012-09-17 12:27:47.430 Quotes2You[1623:f803]  1 
2012-09-17 12:27:47.431 Quotes2You[1623:f803]  1 
2012-09-17 12:27:47.431 Quotes2You[1623:f803] 1
2012-09-17 12:27:47.432 Quotes2You[1623:f803]  2 
2012-09-17 12:27:47.433 Quotes2You[1623:f803]  2 
2012-09-17 12:27:47.433 Quotes2You[1623:f803] 2
2012-09-17 12:27:47.434 Quotes2You[1623:f803]  3 
2012-09-17 12:27:47.435 Quotes2You[1623:f803]  3 
2012-09-17 12:27:47.436 Quotes2You[1623:f803] 3
2012-09-17 12:27:47.436 Quotes2You[1623:f803]  4 
2012-09-17 12:27:47.437 Quotes2You[1623:f803]  4 
2012-09-17 12:27:47.438 Quotes2You[1623:f803] 4
2012-09-17 12:27:47.438 Quotes2You[1623:f803]  5 
2012-09-17 12:27:47.439 Quotes2You[1623:f803]  5 
2012-09-17 12:27:47.439 Quotes2You[1623:f803] 5
2012-09-17 12:27:47.440 Quotes2You[1623:f803]  6 
2012-09-17 12:27:47.441 Quotes2You[1623:f803]  6 
2012-09-17 12:27:47.462 Quotes2You[1623:f803] 6
2012-09-17 12:27:47.463 Quotes2You[1623:f803]  7 
2012-09-17 12:27:47.464 Quotes2You[1623:f803]  7 
2012-09-17 12:27:47.465 Quotes2You[1623:f803] 7
2012-09-17 12:27:47.466 Quotes2You[1623:f803]  8 
2012-09-17 12:27:47.466 Quotes2You[1623:f803]  8 
2012-09-17 12:27:47.467 Quotes2You[1623:f803] 8
2012-09-17 12:27:47.472 Quotes2You[1623:f803]  9 
2012-09-17 12:27:47.476 Quotes2You[1623:f803]  9 
2012-09-17 12:27:47.478 Quotes2You[1623:f803] 9
2012-09-17 12:27:47.480 Quotes2You[1623:f803]  10 
2012-09-17 12:27:47.481 Quotes2You[1623:f803]  10 
2012-09-17 12:27:47.481 Quotes2You[1623:f803] 10
2012-09-17 12:27:47.487 Quotes2You[1623:f803]  0 
2012-09-17 12:27:47.487 Quotes2You[1623:f803]  1 
2012-09-17 12:27:47.489 Quotes2You[1623:f803]  2 
```

**首先这个重复所有部分 3 次，然后当我滚动 UITableView 然后部分从 0 开始（正常）**

**我的代码在这里：**

**第三视图控制器.h**

```
@interface ThirdViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>
{
       UITableView *tblCustomer;
        NSArray *listOfsection;
}
@property (nonatomic,retain) UITableView *tblCustomer;
@property (nonatomic,retain) NSArray *listOfsection;

@end 
```

**第三视图控制器.m**

```
@synthesize tblCustomer , listOfsection;

- (void)viewDidLoad
{
    [super viewDidLoad];

     self.tblCustomer = [[UITableView alloc] initWithFrame:CGRectMake(0,0,320,417) style:UITableViewStyleGrouped];
    self.tblCustomer.delegate = self;
    self.tblCustomer.dataSource = self;
    [self.view addSubview:self.tblCustomer];

    self.listOfsection = [[NSArray alloc]  initWithObjects:@"Name", @"Company", @"Address", @"Email", @"Mobile", @"Phone", @"Potential", @"Sales Status", @"Genre", @"Distributor", @"Dist Rep", @"Internal Notes", nil];

}

#pragma mark - UITableView Datasource Methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)aTableView {
    return [self.listOfsection count];
}

- (NSInteger)tableView:(UITableView *)aTableView numberOfRowsInSection:(NSInteger)section
{
    int numSection=0;

      if (section == 2)
        numSection = 5;
    else
        numSection = 1;

    return numSection;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        // here is my code cellForRowAtIndexPath as section wise 
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSLog(@" %d ", section);
     NSString *sectionHeader = nil;

    sectionHeader = [self.listOfsection objectAtIndex:section];

    // here is section overwrite //

      return sectionHeader;
}

#pragma mark - Memory Management

-(void)dealloc
{
    [super dealloc];

    [self.listOfsection release];
    [self.tblCustomer release];
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:13:39.847

你问：

> 第一个问题：我有一个问题，我如何从多个部分开始我的 UITableView 部分，编号为 0？

我认为您的惊愕源于这样一个事实，即这些不是以严格的顺序方式调用的。这就是它的工作方式，你无法改变这种行为。显然，您的部分在应用程序中以正确的顺序出现，但它们只是碰巧没有按顺序调用。这就是事件驱动编程的本质。但是，我在您的代码中没有看到任何基于此执行顺序的中断，但是您的代码中可能有一些您没有包含在此处的内容需要严格按顺序调用这些方法，如果是这样，您将必须重构该代码。但是我在上面的代码片段中没有看到类似的东西。的性质`UITableViewDataSource`委托方法意味着您可以（并且应该）以不依赖于调用单元格或部分的顺序的方式编写您的方法。永远不要依赖 UI 中的事件序列来控制如何构建视图的底层模型。

> 第二个问题：在titleForHeaderInSection 委托方法中，我的tableView 的所有部分都重复了3 次。并且在当前 ViewController 我向上或向下滚动 UITableView 然后部分显示正常（0 到 11 ） UITableView 的这个正常部分在重复部分 3 次后显示。

如果它被连续调用 3 次，我会感到惊讶。我敢打赌（特别是考虑到您的日志显示格式略有不同的`NSLog`语句的证据）您的代码中的某个地方还有其他`NSLog`语句。我会尝试将您的`NSLog`陈述更改为：

```
NSLog(@"%s section=%d", __FUNCTION__, section); 
```

这样，（a）您知道它是从哪个方法记录的；(b) 通过`"section="`在格式化字符串中添加描述性，这意味着如果您永远不会对正在记录的数字感到困惑。我敢打赌，这三个`NSLog`陈述并非全部来自您的`titleForHeaderInSection`. 就个人而言，我不再`NSLog`在没有引用的情况下将语句放在我的代码中`__FUNCTION__`，因为很容易混淆是什么生成了什么`NSLog`语句。

但即使`titleForHeaderInSection`被多次调用，那又如何呢？iOS 已经在幕后进行了优化，可以做各种各样的事情。`titleForHeaderInSection`了解正在发生的事情对我们[有好处](http://en.wikipedia.org/wiki/Serenity_Prayer)（例如，确保您不会做一些愚蠢的事情，比如在，而我们没有。（并且调用的顺序和数量`UITableViewDataSource`是我们无法控制的事情之一。）只要您不是对方法的冗余调用（例如进行不必要的`reloadData`调用）的来源，我就不会担心.

总而言之，虽然如果`titleForHeaderInSection`连续调用 3 次我会感到惊讶，但不要指望它只被调用一次。我认为表格视图可能会为表格的每个部分调用一次（可能会执行一些操作，例如计算整个表格的高度，以便适当调整滚动条的大小），然后再为屏幕上可见的部分调用一次（实际显示部分标题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:54:51.270

```
-(NSInteger)numberOfRowsInTotal
{

  NSInteger sections = self.numberOfSections;
  NSInteger cellCount = 0;
  for (NSInteger i = 0; i < sections; i++) 
 {
    cellCount += [self numberOfRowsInSection:i];
 }

return cellCount;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T14:15:51.217

这不是正确的方法，但您可以使用下面的代码并且它的工作完美。

```
[self reloadDataWithCompletion:^{
            communityFoundIndex = [[NSMutableArray alloc]init];
            NSRange range = NSMakeRange(0, 1);
            NSIndexSet *section = [NSIndexSet indexSetWithIndexesInRange:range];
            [self.myTbl reloadSections:section withRowAnimation:UITableViewRowAnimationNone];
        }];

- (void) reloadDataWithCompletion:( void (^) (void) )completionBlock {
    [_tblCommunity reloadData];
    if(completionBlock) {
        completionBlock();
    }
} 
```

# java - Noclassdeffounderror Jericho htmlparser

> ID：12455101
> 
> 赞同：0
> 
> 时间：2012-09-17T07:51:40.020
> 
> 标签：java, android, jericho-html-parser

我正在开发一个使用 Jericho html 解析器的 Android 项目。应用程序启动，但是当我想在按下搜索按钮时使用解析器时，我收到以下错误：

```
java.lang.RuntimeException: An error occured while executing doInBackground()

Caused by: java.lang.NoClassDefFoundError: net.htmlparser.jericho.Source

testapp.search.GetParser.<init>(GetParser.java:29) 
```

我导入了 Jerco html 解析器 JAR 文件，所以这不应该是问题。我不知道为什么会发生这个错误！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:22:22.320

我已经自己修复了它，按照此处所述添加了库： [如何在 Android 项目中使用外部 JAR？](https://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project)

而不是在我的项目的属性面板上添加库。

# javascript - 如何从 iframe 调用父脚本

> ID：12455105
> 
> 赞同：1
> 
> 时间：2012-09-17T07:51:48.360
> 
> 标签：javascript, iframe, scrollto

> **可能重复：**
> [从 Iframe 到父页面 javascript 函数的 Iframe 函数调用](https://stackoverflow.com/questions/2161388/iframe-function-calling-from-iframe-to-parent-page-javascript-function)

我有一个运行 scrollTo.js 的父页面。有四个面板可以滚动到每个面板都具有 iframe 形式的内容。每个 iframe 内容都是由前一个 iframe 中的链接生成的。问题：如何从 iframe 调用父函数？
家长：

```
<a href="#item2" class="panel" onclick="ipage.location='jam2.html'">home made jam</a> |
<a href="#item2" class="panel" onclick="ipage.location='away.html'">international 
flavour</a> 
```

框架：

```
<a href="" onclick="parent.ipage2.location='local.html'">local produce</a> | <a href=""
onclick="parent.ipage2.location='specials.html'">specials</a> | <a href=""
onclick="parent.ipage2.location='international.html'">world ingredients</a> 
```

# html - 如何在页面加载之前保存图像的位置？

> ID：12455110
> 
> 赞同：1
> 
> 时间：2012-09-17T07:52:13.190
> 
> 标签：html, css

我对 Chrome 中的图像有这样的问题：

当页面加载时首先出现文本，然后文本移动，最后出现图像。

我将在屏幕截图中显示（如果有人想要我可以给你一个网站链接）

加载图像之前

![](../Images/3c764f88d551927b99fe0c3c55273bf1.png)

后：

![](../Images/c688f2be35ec068362efdfb5f30c8318.png)

我已经设置了图像的大小。

HTML：

```
 <img alt="I_01" height="66" src="http://91.228.126.168:3000/images/i_01.png" width="73"> 
```

和 CSS（如您所见，我正在使用 Bootstrap ）：

```
 .second .span4 img {
  padding-right: 10px;
  float: left;
  } 
```

**问题：我需要添加什么才能使它们正确加载？我应该怎么做才能防止图像加载导致性能下降？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:13:38.827

您需要预加载图像，以便在浏览器显示图像之前图像在缓存中准备好。

图像预加载可以在 javascript 中完成。您可以按照以下链接进行相同的操作.....

[http://www.learn-javascript-tutorial.com/ImagesWindowsandTimers.cfm#Preloading-Images](http://www.learn-javascript-tutorial.com/ImagesWindowsandTimers.cfm#Preloading-Images)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:16:46.047

嗨，现在已经习惯了您锚链接中的背景图片

像这样

**CSS**

```
.textline{
display:inline-block;
  text-decoration:none;
  color:black;
  vertical-align:top;
  background:url('http://91.228.126.168:3000/images/i_01.png') no-repeat 0 0;
  padding-left:80px;
line-height:70px;
} 
```

**HTml**

```
<a href="#" class="textline"> link Text</a> 
```

***[演示链接](http://tinkerbin.com/cYsOVqb0)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:30:52.747

您可以明确指定图像的宽度和高度，即使尚未加载图像，文本也不会移动。浏览器会立即显示指定大小的空白图片，然后加载图片。

# ios - 在 OSX 和 IOS 应用程序之间共享代码的最佳实践

> ID：12455111
> 
> 赞同：14
> 
> 时间：2012-09-17T07:52:15.027
> 
> 标签：ios, xcode, macos, cocoa, static-libraries

我正在创建现有 OSX 应用程序的 iOS 版本，并且想知道在两者之间共享代码的最佳实践是什么。有问题的代码仅依赖于基础框架和 Sqlite 动态库，因此它应该在两个平台上都可以正常编译和运行。

在我看来，有三种可能的选择：

1.  使用 OSX 和 IOS 目标创建单个项目，根据需要将源文件添加到每个目标。
2.  为 OSX 和 IOS 应用程序创建两个单独的项目，将共享代码放在工作区的公共位置，并将其添加为两个项目的引用。
3.  创建三个项目：OSX 应用程序、IOS 应用程序和一个带有 OSX 和 IOS 目标的共享静态库；将每个库目标添加到相应的应用程序。

是否有任何理由上述方法中的一种可能比其他两种更好？如果不是，选项 2 似乎是迄今为止最简单的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:33:36.403

我已经这样做了，并采取了第三种方法；一个单独的静态库。我选择这种方法的原因是因为它可以保存在自己的 git repo 中，并在以后与其他项目共享。

然而，要克服的一件事是确定您正在编译的平台。我使用以下代码片段解决了这个问题，该代码片段定义`SYSINFO_IOS`或`SYSINFO_OSX`随后在库源/头文件中使用：

```
#import <TargetConditionals.h>

#if !TARGET_OS_IPHONE && !TARGET_IPHONE_SIMULATOR
#define SYSINFO_OSX 1
#else
#define SYSINFO_IOS 1
#endif 
```

这个片段应该在它自己的头文件中。

# awk - 如何用awk在每行末尾添加一个字符？

> ID：12455116
> 
> 赞同：33
> 
> 时间：2012-09-17T07:52:26.580
> 
> 标签：awk

我想`A`在文本文件的每一行末尾添加字符。我怎样才能用 awk 做到这一点？

```
1AAB
VBNM
JHTF
2SDA 
```

期望的输出

```
1AABA
VBNMA
JHTFA
2SDAA 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-17T08:08:28.750

这可能会为您完成工作

```
awk '{print $0"A"}' yourFile 
```

# cuda - 关于每个 SM 执行的 CUDA 线程数的说明

> ID：12455119
> 
> 赞同：4
> 
> 时间：2012-09-17T07:52:33.750
> 
> 标签：cuda, gpgpu

我是 cuda 编程的新手，正在阅读“编程大规模并行处理器 - 动手方法”一书中的 G80 芯片，它有 128 个 SP（16 个 SM，每个 8 个 SP）。英特尔 CPU 和 G80 芯片之间有一个比较。Intel CPU 支持 2 到 4 个线程，具体取决于机器型号，每个内核。其中 G80 芯片支持每个 SM 768 个线程，该芯片总计 12000 个线程。

我的问题是G80芯片可以同时执行768个线程吗？如果不是同时，那么英特尔 CPU 支持每个内核 2 到 4 个线程是什么意思？我们总是可以在操作系统调度的 Intel CPU 上运行许多线程/进程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T14:21:03.213

G80 同时为每个 SM 保留 768 个线程的上下文并交错执行。这是 CPU 和 GPU 之间的主要区别。GPU 是深度多线程处理器，通过其他线程的计算隐藏了某些线程的内存访问。执行线程的延迟要高得多，CPU 和 GPU 针对线程吞吐量而不是线程延迟进行了优化。相比之下，CPU使用乱序推测执行来减少一个线程的执行延迟。GPU 使用多种技术来减少线程调度开销。例如，GPU 将线程分组在称为波前扭曲的更粗略的可调度元素中，并在 SIMD 上执行扭曲的线程。GPU 线程是相同的，因此它们是 SIMD 模型的合适选择。在程序员眼里，

CPU内核中使用的线程通过动态调度来填充不同的执行单元。CPU 线程不一定属于同一类型。这意味着一旦一个线程忙于浮点，其他线程可能会发现 ALU 空闲。因此，这些线程的执行可以同时进行。维护每个内核的多个线程以填充不同的执行单元，从而有效地防止空闲单元。然而，动态调度在功率和能源消耗方面是昂贵的。因此，制造商在每个 CPU 内核中使用几个线程。

回答您问题的第二部分：GPU 中的线程由硬件（每个 SM 扭曲调度程序）调度，操作系统甚至驱动程序都不会影响调度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:05:07.500

据我所知，768`resident threads`是`SM`. 线程在由 32 个线程组成的 warp 中执行。所以在一个 SM 中，所有 768 个线程不会同时执行，而是一次以 32 个线程的块调度，即一次一个 warp。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T16:40:29.290

CPU 上的类似技术称为“同时多线程”（SMT），或英特尔营销演讲中的超线程。它通常允许两个，在某些 CPU 上，四个线程由 CPU 本身在硬件中调度。

这与操作系统可能在该之上调度软件中的大量线程这一事实不同。

# sql - 将 SQL 转换为点概念 Linq

> ID：12455120
> 
> 赞同：0
> 
> 时间：2012-09-17T07:52:34.840
> 
> 标签：sql, linq, linq-to-sql

如何将以下 sql 查询转换为点概念 linq 查询？

```
 SELECT     f1.device_id, f1.device_model, f2.main_serial_number
 FROM       Device AS f1 
 INNER JOIN MainSerialNumber AS f2 ON f1.device_id = f2.device_id
 WHERE      (f2.main_serial_number IN
                (SELECT    f2_1.main_serial_number
                 FROM      Device AS f1_1 
                 INNER JOIN MainSerialNumber AS f2_1 
                         ON f1_1.device_id = f2_1.device_id
                 GROUP BY f2_1.main_serial_number
                 HAVING    (COUNT(f2_1.main_serial_number) > 1))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:26:15.533

As a query comprehension:

```
var serialNumbers =
    from sn in MainSerialNumber
    join dev in Device
        on sn.DeviceId equals dev.DeviceId
        into devices
    where devices.Count() > 1
    select sn.MainSerialNumber;

var result =
    from dev in Device
    join sn in MainSerialNumber
        on dev.DeviceId equals sn.DeviceId
    where serialNumbers.Contains(sn.MainSerialNumber)
    select new {
        dev.DeviceId,
        dev.DeviceModel,
        sn.MainSerialNumber
    } 
```

Using method syntax ("dot notation"):

```
var serialNumbers = MainSerialNumber
    .GroupJoin(Device,
        sn  => sn.DeviceId,
        dev => dev.DeviceId,
        (sn, devs) => new
        {
            Serial = sn.MainSerialNumber,
            Count  = devs.Count()
        }
    )
    .Where(x => x.Count > 1)
    .Select(x => x.Serial);

var result = Device
    .Join(MainSerialNumber,
        dev => dev.DeviceId,
        sn  => sn.DeviceId,
        (dev, sn) => new
        {
            dev.DeviceId,
            dev.DeviceModel,
            sn.MainSerialNumber
        }
    )
    .Where(x => serialNumbers.Contains(x.MainSerialNumber)); 
```

For a query like this, the query syntax looks a lot cleaner to me.

# java - 具有完整 GIF 支持的 GIF 文件创建库

> ID：12455121
> 
> 赞同：0
> 
> 时间：2012-09-17T07:52:48.027
> 
> 标签：java, c++, c, image-manipulation, gif

有许多用于以[GIF](http://www.matthewflickinger.com/lab/whatsinagif/bits_and_bytes.asp)格式保存图像的库，但是是否有支持 GIF 的更高级（或者如果您愿意的话，是过时的和被遗忘的）功能的库？

我正在考虑纯文本扩展，以及为每个新帧仅重绘图像的一部分的能力。例如，纯文本扩展理论上也可用于补充图像绘制并改善动画压缩。

即（a）使用纯文本扩展来呈现图形而不是文本。（大多数语言都可以。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:48:01.950

GIFLIB 应该包含 GIF 的所有内容

这就是纯文本的意思吗？

[http://giflib.sourceforge.net/gif_lib.html#idp4823712](http://giflib.sourceforge.net/gif_lib.html#idp4823712)

这是部分帧更新

[http://giflib.sourceforge.net/gif_lib.html#idp79616](http://giflib.sourceforge.net/gif_lib.html#idp79616)

对于 .NET（完全公开，我在 Atalasoft 工作）[DotImage Photo Free](http://atalasoft.com/photofree)可以进行部分重绘。查看 GifFrame 和 GifFrameDisposal。在绘制新帧时，您可以指定如何处理前一帧。每个帧可以是任意大小和位置，因此您只能绘制图像的一部分。

# database - Hibernate 注释：一对一的 onDelete 操作不能设置为 CASCADE

> ID：12455123
> 
> 赞同：0
> 
> 时间：2012-09-17T07:52:57.370
> 
> 标签：database, hibernate, annotations, hibernate-mapping, cascade

我想创建两个表 USER 和 USERDETAIL 来完成：

1.  USERDETAIL 引用了 USER 表。

2.  对 USER 表的操作不需要知道 USERDEAIL 表的存在。

这应该是一对一的非双向关系。

实体类：

```
@Entity
@Table(name="USER")
public class User implements Serializable{  
    @Id 
    @Column(name="ID")
    @GeneratedValue(generator = "system-uuid") 
    @GenericGenerator(name = "system-uuid", strategy = "uuid")  
    private String id;  
    //...
}

@Entity
@Table(name="USERDETAIL")
public class UserDetail implements Serializable{    

    @Id 
    @Column(name="ID")
    @GeneratedValue(generator = "gen") 
    @GenericGenerator(name = "gen", strategy = "foreign",
    parameters = @Parameter(name = "property", value = "user"))
    private String id;

    @OneToOne(optional= false , targetEntity=User.class, cascade= CascadeType.ALL)
    @OnDelete(action = OnDeleteAction.CASCADE)
    //@JoinColumn(name="foreign_id",referencedColumnName="ID")
    @PrimaryKeyJoinColumn   
    private User user;  
    //...
} 
```

这将正确创建两个表，并且 USERDETAIL 具有外键约束，即其主键由 USER 的 id 引用。但是，删除操作是`Restrict`但不是`Cascade`。因此，我无法删除一行 USER。

我正在使用 MySQL 服务器 5.1。似乎它不支持级联删除操作。因为我可以手动删除约束并添加一个设置为 on delete 的新约束是级联的，并且可以按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:19:15.000

您的代码应该是：

```
@Entity
@Table(name="USER")
public class User implements Serializable{  
    @Id 
    @Column(name="ID")
    @GeneratedValue(generator = "system-uuid") 
    @GenericGenerator(name = "system-uuid", strategy = "uuid")
    private String id;  
    //...

    @OneToOne(cascade = CascadeType.ALL)
    @JoinColumn(name="userdetail_id")
    public UserDetail getUserDetail() {
      ...
    }
}

@Entity
@Table(name="USERDETAIL")
public class UserDetail implements Serializable{    

    @Id 
    @Column(name="ID")
    @GeneratedValue(generator = "gen") 
    @GenericGenerator(name = "gen", strategy = "foreign",
    parameters = @Parameter(name = "property", value = "user"))
    private String id;

    @OneToOne(optional= false , targetEntity=User.class, mappedBy = "userDetail")
    @PrimaryKeyJoinColumn   
    private User user;  
    //...
} 
```

基本上，我建议让它双向，用户类是所有者（通过在 UserDetail 类中使用 mappedBy）。这样，当您删除用户时，将删除用户详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:21:24.143

最后，我解决了这个问题。

首先，我已经按照[http://www.mkyong.com/hibernate/hibernate-one-to-one-relationship-example-annotation/](http://www.mkyong.com/hibernate/hibernate-one-to-one-relationship-example-annotation/)创建 oneToOne 映射实体。

但是，当我启动 Tomcat 时，它总是抛出`NullPointerException`映射。因此，我提出了我的问题实体，除了删除之外似乎工作正常。

我终于意识到这只是hibernate-anoatation引起的一个错误。然后我使用 3.4.0.ga 版本并再次点击链接。通过替换`@GeneratedValue(strategy = IDENTITY)`（我不知道为什么使用这个，hibernate 无法创建表）到

```
@GeneratedValue(generator = "system-uuid") 
@GenericGenerator(name = "system-uuid", strategy = "uuid") 
```

它按我的预期工作。

虽然表上没有外键约束，但删除所有者（USER）表确实也可以通过休眠句柄正确删除子（USERDETAIL）表。

我也不需要担心更新没有子字段的所有者表。`mappedBy`侧面实际上没有定义为 Khue Vu 所说的物理映射。Hibernate 足够聪明，不会删除关系。

# php - Symfony2，教义自定义 DQL 函数

> ID：12455125
> 
> 赞同：2
> 
> 时间：2012-09-17T07:52:59.273
> 
> 标签：php, symfony, doctrine-orm

我在 Doctrine 中创建了一个自定义的“REPLACE”功能。但是我有一个错误，当我使用它时。

```
$result->andWhere("replace(weight,X,C) <= :weight_from")
       ->setParameter('weight_from',$data['weight_from']); 
```

**替换功能：**

```
namespace Doctrine\ORM\Query\AST\Functions;

use Doctrine\ORM\Query\Lexer;

/**
 * "REPLACE" "(" StringPrimary "," StringSecondary "," StringThird ")"
 *
 * 
 * @link    www.prohoney.com
 * @since   2.0
 * @author  Igor Aleksejev
 */
class ReplaceFunction extends FunctionNode {

    public $stringPrimary;
    public $stringSecondary;
    public $stringThird;

    /**
     * @override
     */
    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker) {
        return $sqlWalker->getConnection()->getDatabasePlatform()->getReplaceExpression(
                        $this->stringPrimary, $this->stringSecondary, $this->stringThird
        );
    }

    /**
     * @override
     */
    public function parse(\Doctrine\ORM\Query\Parser $parser) {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->stringPrimary = $parser->StringPrimary();
        $parser->match(Lexer::T_COMMA);
        $this->stringSecondary = $parser->StringPrimary();
        $parser->match(Lexer::T_COMMA);
        $this->stringThird = $parser->StringPrimary();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

} 
```

**AbstracPlatfrom.php 包含：**

```
/**
 * Returns the replace of a text field.
 *
 * @param string $column
 * @param string $x
 * @param string $y
 *
 * @return string
 */
public function getReplaceExpression($column,$x,$y)
{
    return "REPLACE($column,'$x','$y')";
} 
```

错误：

```
[
   {
      "message":"[Syntax Error] line 0, col 103: Error: Expected '.' or '(', got 'weight'",
      "class":"Doctrine\\ORM\\Query\\QueryException",
      "trace":[
         {
            "namespace":"",
            "short_class":"",
            "class":"",
            "type":"",
            "function":"",
            "file":"C:\\webserver\\symfony\\vendor\\doctrine\\orm\\lib\\Doctrine\\ORM\\Query\\QueryException.php",
            "line":44,
            "args":[

            ]
         },
         {
            "namespace":"Doctrine\\ORM\\Query",
            "short_class":"QueryException",
            "class":"Doctrine\\ORM\\Query\\QueryException",
            "type":"::",
            "function":"syntaxError",
            // ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-05T21:58:11.617

我有一个类似的问题，我想你应该在你的表字段“weight”（例如“a.”）中添加一个前缀：

```
$result->andWhere("replace(a.weight,X,C) <= :weight_from")
   ->setParameter('weight_from',$data['weight_from']); 
```

# sql - SQL插入以用条件填充关联表

> ID：12455126
> 
> 赞同：3
> 
> 时间：2012-09-17T07:53:05.247
> 
> 标签：sql, sql-server, insert, sql-server-2008-r2, associative-table

我有两个表和它们之间的关联表（我们称它们为`Tab1`,`Tab2`和`ATab`）。

`Tab1`并`Tab2`具有相同的字段（例如目的）：

*   `Id`.
*   `Name`.

在我的`ATab`中，我想将记录插入到同事`Tab1`和`Tab2`他们的 ID 中。

为了做到这一点，我想在一个 sql 脚本中编写我的查询，比如：

我可以设法做类似的事情：

```
INSERT INTO ATab(Tab1Id, Tab2Id) 
SELECT Tab1.Id, ????? 
FROM Tab1 WHERE Tab1.Name='Foo'; 
```

但我只选择`Foo`我的第一张桌子的记录......

我将如何设法执行“双重” where 子句？是否可以 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T07:59:48.783

通过使用`AND`

```
INSERT INTO ATab(Tab1Id, Tab2Id) 
(SELECT Tab1.Id, Tab2.Id
FROM Tab1, Tab2 WHERE Tab1.Name = 'Foo' AND Tab2.Name = 'Bar') 
```

# javascript - 在页面刷新和页面更改时保持套接字

> ID：12455127
> 
> 赞同：2
> 
> 时间：2012-09-17T07:53:16.340
> 
> 标签：javascript, node.js, websocket, socket.io

我的 NodeJS 和 Socket.IO 服务器运行良好，但是我注意到每次刷新浏览器页面或导航到不同页面时都会发生套接字断开和重新连接。

如何使套接字在页面之间持续存在？

* * *

谢谢，我想到了这一点，但想避免它，因为这对我正在制作的系统来说是一个很大的变化，而且会做一些工作。

套接字连接/断开连接的唯一影响是“用户登录”计数器。但我认为我可以通过节点服务器上的 setTimeout 来解决这个问题，因此如果套接字在 2 秒内断开连接并重新连接，则计数器不会改变。就这个计数器而言，这是最好的解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T07:56:16.203

您不能真正做到这一点：网络连接无法在页面导航或刷新后继续存在。如果您真的很在意，您基本上需要构建一个单页应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T08:00:14.580

您可以使用 AJAX 在页面之间导航，以避免页面刷新/套接字断开连接

# php - 更新多维数组

> ID：12455136
> 
> 赞同：0
> 
> 时间：2012-09-17T07:54:04.590
> 
> 标签：php

我有这个数组，我正在尝试更新

```
$arr = array(
    'one' => array(
    'slidertitle' => 'lorem ipsum',
    'sliderlocation' => 'http://localhost/images/1.jpg',
    'sliderdescription' => 'this is a good lorem ipsum image',
    'sliderposition' => 1
    ),
    'two' => array(
    'slidertitle' => 'second slider',
    'sliderlocation' => 'http://localhost/images/2.jpg',
    'sliderdescription' => 'this space was reserved for a link source code here',
    'sliderposition' => 2
    ),
    'three' => array(
    'slidertitle' => 'third slider',
    'sliderlocation' => 'http://localhost/images/3.jpg',
    'sliderdescription' => 'this is a third slider by name only',
    'sliderposition' => 3
    ),
    'four' => array(
    'slidertitle' => 'fourth slider',
    'sliderlocation' => 'http://localhost/images/4.jpg',
    'sliderdescription' => 'fourth slider has a description',
    'sliderposition' => 4
    ),
    'five' => array(
    'slidertitle' => 'fifth slider',
    'sliderlocation' => 'http://localhost/images/5.jpg',
    'sliderdescription' => 'a slider on rails is really nice',
    'sliderposition' => 5
    ),
    'six' => array(
    'slidertitle' => 'sixth slider',
    'sliderlocation' => 'http://localhost/images/6.jpg',
    'sliderdescription' => 'this is the sixth slider,like,really!',
    'sliderposition' => 6
    )
); 
```

使用从表单发布的数据。我没有被 $_POST 数据清理，因为它只是一个例子。

```
$clickedButton = $_POST['clickedButton'];
$sliderKey = $_POST['sliderKey'];
$sliderTitle = $_POST['sliderTitle'];
$sliderDescription = $_POST['sliderDescription'];
$sliderLocation = $_POST['sliderLocation'];
$sliderPosition = $_POST['sliderPosition'];
$result = mysql_query("SELECT * FROM arr");
$row = mysql_fetch_array($result);
$data = $row['encoded_array'];
//echo $data.'<br/>'.'<br/>';
$unserialized = unserialize($data);
$unserialized[$sliderKey]["slidertitle"] = $sliderTitle;
$unserialized[$sliderKey]["sliderlocation"] = $sliderLocation;
$unserialized[$sliderKey]["sliderdescription"] = $sliderDescription;
$unserialized[$sliderKey]["sliderposition"] = $sliderPosition;
//print_r($unserialized);
$newSerialize = serialize($unserialized);
mysql_query("UPDATE arr SET encoded_array = '$newSerialize'"); 
```

当我`print_r $unserialized`，我刚刚发布的数据在那里，但在我序列化后没有提交到数据库。我做错了什么吗？

**编辑：**

我的数组中有两条记录，这是我在保存之前得到的

```
a:2:{s:13:"5056d218631bc";a:4:{s:11:"slidertitle";s:5:"lorem";s:14:"sliderlocation";s:5:"ipsum";s:17:"sliderdescription";s:11:"hello world";s:14:"sliderposition";i:3;}s:13:"5056db269305c";a:4:{s:11:"slidertitle";s:1:"A";s:14:"sliderlocation";s:6:"RECORD";s:17:"sliderdescription";s:18:"WITH A DESCRIPTION";s:14:"sliderposition";s:1:"2";}} 
```

未序列化：

```
Array
(
    [5056d218631bc] => Array
        (
            [slidertitle] => lorem
            [sliderlocation] => ipsum
            [sliderdescription] => hello world
            [sliderposition] => 3
        )

    [5056db269305c] => Array
        (
            [slidertitle] => A
            [sliderlocation] => RECORD
            [sliderdescription] => WITH A DESCRIPTION
            [sliderposition] => 2
        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:59:03.523

@alfasin @AdamGold @Poonam @Jaitsu 我真的应该因为发布这个而受到每一个指责，但问题是我在执行保存的函数之后错过了一个休息时间：

这是我以前的

```
$x = $_POST['clickedButton'];

switch ($x)
{
case 'newSave':
  newSave();
  break;
case 'editSave':
  editSave();
  ;
case 'editDelete':
  editDelete();
  ;
  break;
default:
  echo "Some click";
} 
```

这就是我现在所拥有的

```
$x = $_POST['clickedButton'];
//echo $x;
switch ($x)
{
case 'newSave':
  newSave();
  break;
case 'editSave':
  editSave();
  ;
  break;
case 'editDelete':
  editDelete();
  ;
  break;
default:
  echo "Some click";
} 
```

我感谢您的耐心和贡献。

# oracle10g - 我无法为 Oracle10G 启动 TNSListener 服务

> ID：12455145
> 
> 赞同：2
> 
> 时间：2012-09-17T07:54:35.913
> 
> 标签：oracle10g, listener, tns

我无法重新启动/启动/停止 TNSListener 服务。我收到以下错误：-“本地计算机上的 OracleDb_10gTNSListener 服务已启动然后停止。某些服务如果没有工作可自动停止，例如性能日志和警报服务”。请帮我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-11T21:56:35.340

第1步：检查您的IP地址并复制它。

第 2 步：在记事本中打开（**listener.ora**）并将 HOST ip 地址替换为您之前复制的当前 IP 地址。

**注意：**不要忘记替换HOST ip 的第二个条目。

Step 3: Now open (**tnsnames.ora**) with notepad and replace HOST ip address with your current ip address.

Finally start your listner service from windows services or from command prompt. Hope this will work. Worked for me.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-26T10:47:00.440

`HOST`我通过将以下两个 .ora 文件中的值替换为“localhost”来解决此问题。将 [用户名] 更改为您的用户名。这些文件可能位于您计算机上的不同位置。

请注意，listener.ora 中有一处更改，tnsnames.ora 中有两处更改。

进行更改后，我重新启动了计算机。从那以后我没有任何问题。

**C:\app[用户名]\product\18.0.0\dbhomeXE\NETWORK\ADMIN\listener.ora** DEFAULT_SERVICE_LISTENER = XE

```
SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = CLRExtProc)
      (ORACLE_HOME = C:\app\[username]\product\18.0.0\dbhomeXE)
      (PROGRAM = extproc)
      (ENVS = "EXTPROC_DLLS=ONLY:C:\app\[username]\product\18.0.0\dbhomeXE\bin\oraclr18.dll")
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
  ) 
```

**C:\app[用户名]\product\18.0.0\dbhomeXE\NETWORK\ADMIN\tnsnames.ora**

```
XE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = XE)
    )
  )

LISTENER_XE =
  (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))

ORACLR_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
    (CONNECT_DATA =
      (SID = CLRExtProc)
      (PRESENTATION = RO)
    )
  ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-06T11:37:13.647

打开位于 C:\oraclexe\app\oracle\product\11.2.0\server\network\ADMIN\ 的 listener.ora 文件

& 然后检查计算机名称是否与 HOST 属性中的相同

问候 Irshad N

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-11T17:21:10.970

今天遇到了同样的问题。

如此处所述 [https://community.oracle.com/thread/3570067?start=0&tstart=0](https://community.oracle.com/thread/3570067?start=0&tstart=0) ，其中报告的问题与 Oracle 12c 有关，我尝试删除位于 C:\app\ *username* \product\中的 listener.ora 18.0.0\dbhomeXE\network\admin

我的问题是在本地 Oracle express 18 上。我想这可能是许多版本的可能解决方案。

为我工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-23T06:30:17.343

也可能是因为其他进程试图通过该端口进行连接。就我而言，这是因为 Apache Tomcat。我在服务中将其启动选项更改为手动并停止它。并尝试启动 OracleOraDb11g_home1TNSListener。这次它工作了。您也可以重新启动 PC 一次并检查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-27T04:29:22.180

在尝试其他人提供的解决方案之前，首先检查您的环境设置，如果您有正确`ORACLE_HOME`和`ORACLE_SID`可变的值。还要检查 PATH 变量，它应该添加为`ORACLE_HOME/bin`.
我在我的机器上安装了两个 Oracle 版本，并且在我的环境中设置了错误的变量值，因此它不起作用。

# java - 需要帮助创建一个从书中打印目录的 java 程序

> ID：12455148
> 
> 赞同：-3
> 
> 时间：2012-09-17T07:55:06.777
> 
> 标签：java

我应该编写一个 java 程序，它使用以下数据结构打印目录：

```
public class TocEntry 
{ 
    // Specify the needed methods 
    private String chapter; 
    private int page; 
} 
```

在我的驱动程序类中定义了以下内容：

```
public final int TOCSIZE = 100; 
TocEntry toc[] = new TocEntry[TOCSIZE]; 
int toc_curlen = 0; //The toc_curlen is intended to keep track of the number of chapters entered by the user and it can be used as an index into the array of TocEntry objects. 
```

接下来，我应该在我的 TocEntry 类中开发必要的代码，以读取章节名称和页码，直到输入“<code>**”。由此，我的输出应如下所示：

> 我的故事开始......................................1
> 
> 成长..................................35
> 
> 征服世界............103

这应该是我使用名为 useTocEntry 的驱动程序运行的示例

> 输入章节标题：Camelot
> 
> 输入起始页码：1
> 
> 输入章节标题：亚瑟王宫廷
> 
> 输入起始页码：3
> 
> 输入章节标题：圆桌骑士
> 
> 输入起始页码：8
> 
> 输入章节标题：幽默家迪纳丹爵士
> 
> 输入起始页码：12
> 
> 输入章节标题：灵感
> 
> 输入起始页码：14
> 
> 输入章节标题：The Eclipse
> 
> 输入起始页码：23
> 
> 输入章节标题：克拉伦斯的后记
> 
> 输入起始页码：274
> 
> 输入章节标题：`**`
> 
> 卡米洛特..................................1
> 
> 亚瑟王宫......................................................3
> 
> 圆桌骑士团............8
> 
> 幽默家迪纳丹爵士..................................12
> 
> 灵感..................................................14
> 
> 日食..................................23
> 
> 克拉伦斯的后记..........................274

这是我到目前为止的代码：

```
import java.util.*;

public class TocEntry {
    public TocEntry() { // Default Constructor
        chapter = "";
        page = 0;
    }

    public TocEntry(String c, int p) { // 2 Argument Constructor
        chapter = c;
        page = p;
    }

    public String getChapter() { //getChapter() and getPage() are accessor methods
        return chapter;
    }

    public int getPage() {
        return page;
    }

    public void setChapter(String title) { ////setChapter() and setPage() are mutator methods
        chapter = title;
    }

    public void setPage(int numPage) {
        page = numPage;
    }

    private String chapter; 
    private int page;

    public String toString() { // toString method to print out contents
        return  chapter + "**" + page;
    }
}// End of class TocEntry 
```

这是我的驱动程序类：

```
import java.util.Scanner;
public class useToEntry {

    public static void main(String[] args) { 
        Scanner input = new Scanner(System.in);
        System.out.print("Enter the number of contents you would like to display:   ");
        int TOC_NUM = input.nextInt();
        final int TOCSIZE = 100;
        TocEntry toc[] = new TocEntry[TOCSIZE]; 
        int toc_curlen = 0; // The toc_curlen is intended to keep track of the number 
                        // of chapters entered by the user and it can be used as an
                        // index into the array of TocEntry objects. 
        for(int i = 0; i < TOC_NUM; i++) {
            System.out.print("Enter chapter title: ");
            String ch = input.next();     
            System.out.print("Enter starting page number: ");
            int y = input.nextInt();
        }// End of for loop
    } // End of main method

}// End of class useTocEntry 
```

我需要帮助，尤其是创建一个`**`与章节标题和页码对齐的方法。对我的代码的任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:00:38.687

所以。您需要知道`String`所有章节的最大可能长度。

这最容易通过监视在输入阶段输入的文本来实现......就像......

```
int maxChapterLength = 0;
for(int i = 0; i < TOC_NUM; i++) {
    System.out.print("Enter chapter title: ");
    String ch = input.next();     
    maxChapterLength = Math.max(ch.length(), maxChapterLength);
    System.out.print("Enter starting page number: ");
    int y = input.nextInt();
}// End of for loop 
```

由此，您可以确定章节名称和章节编号之间所需的填充

就像是...

```
public static String pad(String sValue, int iMinLength) {

    StringBuilder sb = new StringBuilder(iMinLength);
    sb.append(sValue);

    while (sb.length() < iMinLength) {
        sb.append(".");
    }

    return sb.toString();

} 
```

从那里您只需将信息发送到屏幕......就像......

```
System.out.println(pad(toc[index].getChapter(), maxChapterLength + 2) + toc[index].getPage()); 
```

现在，看了你的代码，你还有很多其他的问题，但我把它留给你来识别。

# php - 跨多个域（不是子域）的 PHP 会话

> ID：12455149
> 
> 赞同：1
> 
> 时间：2012-09-17T07:55:09.840
> 
> 标签：php, codeigniter, session

我正在尝试设置它，因此如果您登录到我的网站（使用 codeigniter），会话将延续到我的多个网站的其他域（不是子域）。例如，如果您访问 domain.com 并登录，然后访问 domain2.com，您将已经在 domain2.com 登录。

我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:57:36.430

想到的第一种方法是使用一个共享数据库，该数据库将保存“登录”标志，每个域都将轮询和更新。使用 cookie 不是一种选择，因为它们绑定到域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:07:22.323

您需要使用一个域作为主登录系统（keyDomain）。然后对于每个其他 domain2，您在 keyDomain 中查询一个临时密钥，使用此密钥登录到 domain2。domain2 的服务器将检查 keyDomain 上的密钥。

您需要在 keyDomain 上使用两种方法。- 一个构建密钥。它们必须是时间相关的并且在 5 分钟内有效。- 检查密钥，检查给定密钥与当前密钥，然后再检查前一个密钥，以防查询和检查之间的时隙发生变化。（当前密钥和前一个密钥都有效，因此有效期为 10 分钟）。

密钥只是一个包含 time+user_ID+salt 的字符串，全部编码。

你应该看看 facebook connect 是如何工作的。

# java - 带有滑动示例的 Android Fragmens

> ID：12455151
> 
> 赞同：-9
> 
> 时间：2012-09-17T07:55:12.150
> 
> 标签：java, android, android-layout, android-fragments

也许有人有很好的带有片段和滑动的 android 应用程序示例？我想用这些东西创建应用程序，但我需要示例，因为我不知道如何使用这种技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:10:43.167

如果您使用更新的 API（我认为 API 级别 15 或更高级别）构建，Eclipse Android 插件可以为您创建这样的示例项目。

不过，您应该先用谷歌搜索您的问题。正如您现在肯定已经注意到的那样，提出您自己可以很容易地找到答案的问题并不太受欢迎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:11:44.927

View Page Flipper ，带有片段和滑动事件的工作非常好。[请在 - http://manishkpr.webheavens.com/android-viewpager-example/](http://manishkpr.webheavens.com/android-viewpager-example/)找到开源

# oracle - 尝试通过 PL/SQL 导出 Oracle 的日期为 0000-00-00

> ID：12455152
> 
> 赞同：2
> 
> 时间：2012-09-17T07:55:21.870
> 
> 标签：oracle, plsql

我继承了一个 Oracle .dmp 文件，我正在尝试将其导入 CSV，以便将其加载到 MySQL 中。

[这里](http://eternusuk.blogspot.co.uk/2012/09/how-to-convert-oracle-dmp-into-more.html)描述了我使用的一般方法。不过，我的一排有问题。它包含 5544-09-14 的日期，如下所示：

```
alter session set nls_date_format = 'dd-MON-yyyy';
select OID, REF, TRADING_DATE From LOAN WHERE REF = 'XXXX';

OID REF                  TRADING_DATE
--- -------------------- ------------
1523 XXXX                 14-SEP-5544 
```

这是来自未验证输入日期的遗留系统的垃圾数据。我想知道为什么[我的 PL/SQL 函数导出数据会](https://gist.github.com/3713603.js?file=dump2csv.sql)阻塞这个值？

它以“0000-00-00T00:00:00”的 TRADING_DATE 值导出该行，我不知道为什么？

```
SELECT dump(TRADING_DATE) FROM LOAN WHERE REF = 'XXXX';

DUMP(TRADING_DATE)
--------------------------------------------------------------------------------
Typ=12 Len=7: 44,156,9,14,1,1,1 
```

和

```
SELECT to_char(trading_date, 'YYYYMMDDHH24MISS') FROM LOAN WHERE REF = 'XXXX';
TO_CHAR(TRADIN
--------------
00000000000000 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T09:13:49.287

该列中存储的值不是有效日期。的第一个字节`dump`应该是世纪，根据 Oracle 支持说明 69028.1，它以“excess-100”表示法存储，这意味着它的值应该是 100 + 实际世纪；所以1900是119，2000是120，5500是155。所以44代表-5600；您存储的日期似乎实际上代表 5544-09-14 *BC*。由于 Oracle 仅支持年份介于 -4713 和 +9999 之间的日期，因此无法识别。

你可以很容易地重新创建它；最棘手的一点是首先将无效日期放入数据库：

```
create table t42(dt date);

Table created.

declare
    d date;
begin
    dbms_stats.convert_raw_value('2c9c090e010101', d);
    insert into t42 (dt) values (d);
end;
/

PL/SQL procedure successfully completed.

select dump(dt), dump(dt, 1016) from t42;

DUMP(DT)
--------------------------------------------------------------------------------
DUMP(DT,1016)
--------------------------------------------------------------------------------
Typ=12 Len=7: 45,56,9,14,1,1,1
Typ=12 Len=7: 2d,38,9,e,1,1,1 
```

因此，这有一行与您所做的数据相同。使用`alter session`我可以看到看起来像有效日期的内容：

```
alter session set nls_date_format = 'DD-Mon-YYYY';
select dt from t42;

DT
-----------
14-Sep-5544

alter session set nls_date_format = 'YYYYMMDDHH24MISS';
select dt from t42;

DT
--------------
55440914000000 
```

但是，如果我使用明确的日期掩码，它只会得到零：

```
select to_char(dt, 'DD-Mon-YYYY'), to_char(dt, 'YYYYMMDDHH24MISS') from t42;

TO_CHAR(DT,'DD-MON-Y TO_CHAR(DT,'YY
-------------------- --------------
00-000-0000          00000000000000 
```

如果我运行你的程序：

```
exec dump_table_to_csv('T42'); 
```

生成的 CSV 具有：

```
"DT"
"0000-00-00T00:00:00" 
```

我认为不同之处在于那些试图显示日期的人坚持使用内部日期数据类型 12，而那些显示零的人使用外部数据类型 13，如注释 69028.1 中所述。

所以简而言之，你的程序没有做错任何事情，它试图导出的日期在内部是无效的。除非您知道它应该是什么日期，考虑到您的起点，这似乎不太可能，我认为除了猜测或忽略它之外，您无能为力。除非，也许，您知道数据是如何插入的，并且可以计算出它是如何被破坏的。

我认为它更有可能来自 OCI 程序，而不是我在这里所做的；这个“原始”技巧最初来自[这里](http://blog.dbvisit.com/how-to-insert-invalid-dates-into-oracle-and-how-to-replicate-this/)。您可能还想查看注释 331831.1。和[这个前面的问题](https://stackoverflow.com/q/8734540/266304)有些相关。

# c# - 隔离 Winforms GUI 无响应原因的方法

> ID：12455153
> 
> 赞同：2
> 
> 时间：2012-09-17T07:55:26.893
> 
> 标签：c#, .net, winforms

我有一个用 C# 编写的大型 Winforms 应用程序，它定期无响应。一旦应用程序使用了一个小时左右，问题似乎就会发生。很难收集确切的时间，因为用户经常去处理其他事情，然后回到它并发现它变得没有响应。

我认为可以排除内存泄漏，因为我没有看到过多的内存使用情况（我已经要求用户发送任务管理器的屏幕截图，并且内存使用情况与我在应用程序正常运行时看到的相同）

同样，CPU使用率正常（个位数%）

由于到目前为止我无法在我的开发 PC 上重新创建问题，因此我计划坐在受影响的用户旁边并镜像用户执行的每个操作以重新创建此问题。（我将在我的主 PC 中设置一台笔记本电脑以进行 RDP）

重新创建问题是一回事，但我需要找出应用程序中实际发生的情况。

谁能告诉我在调试模式下运行（通过 Visual Studio）是否就足够了，或者我需要做一些不同的事情吗？

我搜索了一些帖子，并且看到了分析软件的提及，但是我不确定这是否只会有助于解决一般性能问题或内存管理问题。

或者，如果有人遇到过类似的冻结问题，那么您对造成这种情况的原因有什么建议吗？

一些技术细节：应用程序是 C#，针对 .NET 3.5 编译，winforms GUI。有一些外部库（最重要的是 ComponentFactory Krypton Suite）。数据访问是对 Microsoft SQL Server 2005 数据库。该解决方案包含 39 个项目，我不确定这是否与它有关？

任何建议/指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:03:27.040

该应用程序现在运行更加可靠，偶尔仍会出现冻结问题，但远没有以前那么频繁。

该问题似乎与我正在工作的环境中存在的端点安全（在本例中为思科安全代理）有关，应用程序已被列入白名单，并且已显着减少了应用程序挂起的实例。我工作的开发系统不存在这种端点安全性，因此它没有出现在测试的早期阶段。

感谢您的所有反馈，我认为仍然存在需要清理的线程和垃圾收集问题，希望这可以解决最后几个问题。

# windows-8 - 何时在我的 Windows 8 Metro 应用程序中存储本地数据

> ID：12455154
> 
> 赞同：2
> 
> 时间：2012-09-17T07:55:29.100
> 
> 标签：windows-8, windows-runtime, local-storage, tablet

我正在开发一个 Windows 8 Metro 应用程序，它有一组用户可以指定的设置。我知道有几种方法可以将这些设置存储在本地存储中，以便在用户恢复/重新启动应用程序时恢复它们。

我想知道什么时候应该存储这些数据？定期？应用程序关闭/崩溃？具体什么时候？有哪些约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:33:56.157

我不知道任何约定/最佳实践。

最方便的方法是将所有应用程序数据放在一个大类实例中，在启动时对其进行反序列化，并在关闭/挂起时对其进行序列化。这样你只需要几行代码，几乎不需要逻辑。一个积极的副作用是，在运行期间，应用程序不会因加载/保存而减慢。

但是，当类变得太大时，您的应用程序的启动/关闭时间可能会显着增加。这最终可能导致被 marektplace 拒绝。在这种情况下，我建议立即保存每一小部分信息（例如单个用户设置），并在需要之前加载每一小部分信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:58:59.737

我原以为这在某种程度上取决于数据。但是，您需要将应用程序的当前状态存储在`Suspending`事件上（也可能是关闭事件）。

# php - 如何从同一个函数进行多个ajax调用？

> ID：12455159
> 
> 赞同：-5
> 
> 时间：2012-09-17T07:56:15.573
> 
> 标签：php, javascript, ajax

页面中有一个链接，例如单击该链接时，ajax 将成功运行，但是当单击此链接时，我该怎么做？运行多个 ajax 调用并将相同的查询字符串传递给不同的页面？将获得帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:50:35.823

```
var pages = ["page1.php","page2.php","folder/page3.php"]
var requests = [];

function multipleAjax(string) {
    /*where string is "?value=somevalue&bool=true" or something*/

    for (i=0; i<pages.length;i++) {
        requests[i] = getXMLHttpRequest();

        if (requests[i] != null) {
            requests[i].open("Post", "/" + pages[i] + string);

            requests[i].onreadystatechange = function () {
                if (requests[i].readyState == 4) {
                    /*code to handle responseText returned*/
                };
            };

        };

        requests[i].send();
    };
};

function getXMLHttpRequest() {
    var re = "nothing";
    try {re = new window.XMLHttpRequest();} catch(e1) {};
    try {re = new ActiveXObject("MSXML2.XMLHTTP.4.0");} catch(e) {};
    try {re = new ActiveXObject("Msxml2.XMLHTTP");} catch(e2) {};
    try {re = new ActiveXObject("Microsoft.XMLHTTP");} catch(e3) {};
    try {re = new ActiveXObject("MSXML2.XMLHTTP.3.0");} catch(ex) {};
    if (re != "nothing") {return re;}
    else {return null;};
}; 
```

# dll - 在 MinGW 中使用 libdl.so

> ID：12455160
> 
> 赞同：5
> 
> 时间：2012-09-17T07:56:33.537
> 
> 标签：dll, mingw

我想在 MinGW 中生成一个 dll 文件，为了做到这一点，我有几个对象依赖项，我的对象依赖项之一是 libdl.so，我在 unix 中简单地添加了这个对象：

```
g++ xx.o yy.o /usr/lib/libdl.so -o module.so 
```

但是在 MinGW 中，我不知道如何添加这个对象。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:40:10.883

有一个[libdl 的 MinGW 端口](http://code.google.com/p/dlfcn-win32/)，您可以像在 Unix 下一样使用它。引自网站：

> 该库围绕 Windows API 中的动态链接库函数实现了 dlfcn 的包装器，如 POSIX 和 SUS 中所指定。
> 
> 它需要 MinGW 来构建。
> 
> 您可能会从下载部分获得预构建的二进制文件（使用 MinGW gcc 3.4.5）和捆绑的源代码。

以下命令在标准 MinGW 安装中构建和安装它（从您的 MinGW shell 运行）：

`./configure --prefix=/ --libdir=/lib --incdir=/include && make && make install`

要将库编译为 DLL，请使用以下命令：

`g++ -shared xx.o yy.o -ldl -o module.dll`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-05T12:40:46.770

我遇到了同样的问题（msys2、32位版本的编译器等）。

对我来说，我发现 libdl.a 在 /usr/lib 中可用，但在 /mingw32/lib 中不可用。我能够通过将其链接到 /mingw32/lib 文件夹来解决问题：

```
ln -s /usr/lib/libdl.a /mingw32/lib 
```

# erlang - 通过套接字发送确切的字节数

> ID：12455163
> 
> 赞同：0
> 
> 时间：2012-09-17T07:56:47.633
> 
> 标签：erlang, gen-tcp

我已经在 Erlang 中使用 gen_tcp 阅读过，通过套接字发送的数据可以聚合在一个流中。如何强制套接字准确发送特定数量的字节？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T11:37:17.740

TCP 是一种流协议（与面向数据包的 UDP 不同），这意味着接收应用程序无法判断可用数据是否来自`send()`客户端上的一个或多个调用。

您实际上无法控制 TCP 数据包中发送的字节数，多次`send()`调用可能会导致接收到一个 TCP 数据包，而一次`send()`调用可能会导致发送多个 TCP 数据包。这由 OS TCP 堆栈控制。

在 Erlang 中，您可以使用套接字选项`{packet, 1|2|4}`来创建面向数据包的 TCP 数据处理。这将为每个插入一个 1,2 或 4 个字节的前缀，并且接收方（假设它也是 erlang 并使用相同的选项）将读取数据，直到接收到发送的字节数，而不管消息如何分段到 TCP数据包。`gen_tcp:connect``gen_tcp:listen``send()``{packet, N}`

调用`gen_tcp:recv`将阻塞，直到读取了预期的字节数。与活动模式套接字相同，消息以预期的字节数发送。

# spring - 单例是反模式吗？

> ID：12455164
> 
> 赞同：2
> 
> 时间：2012-09-17T07:57:04.293
> 
> 标签：spring, singleton, anti-patterns

Singleton 是反模式吗？如果是，那么 Spring 中的依赖注入也是反模式（因为 Spring 提升了默认的 Singleton bean）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:16:00.390

硬编码单例和使用 Spring 创建单例 bean 之间有一个重要区别：后者只是配置。

因此 Spring 不会阻止可测试性：它是一个将 bean 用作单例的单个用例。您可以通过在测试中手动实例化它或用相同接口的模拟实现替换它来轻松使用相同的弹簧。

如果你将一个类编码为一个单例，那么你不能轻易地替换它，而不重写它。测试只是您可能想要替换它的一个示例。如果您意识到您将需要该 bean 的两个不同实例，那么您也将被硬编码的单例所困。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T09:16:48.587

单例模式不是反模式，它是一种限制对象实例数量的模式。

但是滥用单例来提供全局实例是一种反模式。

对于您问题的春季部分，请参阅 Joachim Sauer 的回答。

# linux - amazon ec2 服务（linux）不能使用 tomcat7 或 6

> ID：12455167
> 
> 赞同：1
> 
> 时间：2012-09-17T07:57:18.633
> 
> 标签：linux, tomcat, amazon-ec2

我只是`yum install tomcat7`用来设置tomcat7并将/usr/share/tomcat/conf/server.xml中的端口从8080更改为80 `service tomcat6 start`，它工作正常。但是当我做netstat -nlp时，没有80端口，其他的也不能访问80端口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:03:33.943

尝试创建ROOT，我想你还没有创建它，那样会让你的网站不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:15:13.820

当您执行 netstat 时，它通常会显示`http`，而不是 80：这是因为 80 绑定到 /etc/services 中的 http。你会看到这样的东西：

```
tcp        0      0 *:http                  *:*                     LISTEN 
```

假设您没有遇到 Tomcat 错误，请确保您已设置 EC2 安全组以允许访问端口 80。请查看[此](http://scottpatten.ca/2011/11/opening-up-ec2-ports-internally.html)内容以获得体面的处理。

编辑：如果 8080 有效但 80 无效，那么它是：

1.  其他一些程序（例如 Apache）位于端口 80。
2.  您可能没有以正确的权限运行。在大多数 Linux 发行版上，您需要成为 root 用户（或作为系统进程运行）才能访问编号小于 1023 的端口

# c# - 使用 ajax 使用数据填充 jQuery 自动滚动插件；模板函数从未触发

> ID：12455168
> 
> 赞同：0
> 
> 时间：2012-09-17T07:57:20.277
> 
> 标签：c#, jquery, asp.net

我正在尝试使用名为*[autoscroll](http://msjolund.github.com/autobrowse/twitterdemo.html)*的 jQuery 插件在我的网站上显示评论。但是，我正在努力使用 AJAX 从我的数据库中提取评论，并且`template`从未调用过该函数。

```
$(".Reviews").autobrowse({
    url: function (offset) {
        //return Healthimized.Services.ClientUserServices.LoadClientUserReviews(1, LoadCustomerToSelectOption, ErrorHandler, onTimeOut)
        $.ajax({
            type: "POST",
            url: 'Services/ClientUserServices.asmx/GetAllSpecialities',
            //data: parameters,
            contentType: "application/json; charset=utf-8",
            //data: { fromDate: new Date(), toDate: new Date(), clientUserId:1},
            //data: "{'fromDate':'" + startFrom + "','toDate':'" + endTo + "','clientUserId':'" + doctorId + "'}",
            dataType: "json",
            //data: 'fromDate=' + new Date() + '&toDate=' + new Date() + '&clientUserId='+1,
            success: function (msg) {
                return "http://twitter.com/status/user_timeline/ParisHilton.json?count=10&page=OFFSET&callback=?".replace(/OFFSET/, 1+Math.round(offset/10));
            },
            error: function (e) {
                $(divToBeWorkedOn).html("Unavailable");
            }
        });
    },
    template: function (response) {
        var markup='';
        for (var i=0; i<response.length; i++) {
            markup+='<div style="background:rgba(0, 0, 0, 0.1);margin: 2% 2% 2% 2%;border-radius: 0.5em 0.5em 0.5em 0.5em;"><table>';
            markup += '<tr><td>';
            markup += '<img src="' + response[i].user.profile_image_url + '" /></td>';
            markup += '<td style="margin-top:-15px">'+response[i].text+'</td>';
            markup += '</tr></table></div>';
        }
        return markup;
    },
    itemsReturned: function (response) { return response.length; },
    max: 100,
    loader: '<div class="loader"></div>',
    sensitivity: 100,
    finished: function () { $(this).append('<p style="text-align:center"><b>No More Reviews to show</b></p>') }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:08:19.413

首先，您的代码看起来像是不连贯的代码片段的混合体。其次，该插件适用于 RESTful 服务，其中参数通过查询字符串发送，以调用 ASP.NET Web 服务方法，您必须通过 ajax 请求`data`对象传递参数。此外，ASP.NET 将 ajax 请求响应包装在 JSON 对象中，其中实际响应数据存储在`d`属性中。

基于所有这些事实，您需要稍微更改插件代码以将其与 ASP.NET Web 服务方法一起使用。为此，请更改这段插件代码：

```
if (options.postData)
{
    var data = null;
    if (typeof options.postData == "function")
    {
        data = options.postData();
    }
    else
    {
        data = options.postData;
    }

    jQuery.post(options.url(currentOffset), data, ajaxCallback, "json").error(options.onError);
}
else
{
    jQuery.getJSON(options.url(currentOffset), ajaxCallback).error(options.onError);
} 
```

更改代码：

```
if (options.postData) {
    var data = null;
    if (typeof options.postData == "function") {
        data = options.postData(currentOffset);
    }
    else {
        data = options.postData;
    }

    jQuery.ajax({
        url: options.url(),
        type: "POST",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: data,
        success: ajaxCallback,
        error: options.onError
    });
}
else {
    jQuery.getJSON(options.url(currentOffset), ajaxCallback).error(options.onError);
} 
```

让我们考虑一下您的 Web 服务代码如下：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class ClientUserServices : System.Web.Services.WebService
{
    [WebMethod]
    public string[] GetAllSpecialities(int index)
    {
        return Enumerable.Range(1, 20).Select(id => Guid.NewGuid().ToString()).ToArray();
    }
} 
```

然后您可以使用`GetAllSpecialities`以下代码使用该方法：

```
<script type="text/javascript">
     $(function () {
          $("#Reviews").autobrowse({
               url : '<%= ResolveClientUrl("~/Services/ClientUserServices.asmx/GetAllSpecialities") %>',
               postData: function (index) {
                    return "{ 'index' :" + index + "}";
               },
               template: function (response) {
                    response = response.d;
                    var markup = '';
                    for (var i = 0; i < response.length; i++) {
                         markup += "<div>" + response[i] + "</div>";
                    }
                    return markup;
               },
               itemsReturned: function (response) {
                    return response.d.length;
               },
               offset: 0,
               max: 10000,
               useCache: true,
               expiration: 1,
               onError: function (error) {
               }
          });
     });
</script>

<div id="Reviews">
</div> 
```

# ios - 如何创建父实体和关系的核心数据模型

> ID：12455174
> 
> 赞同：2
> 
> 时间：2012-09-17T07:57:34.310
> 
> 标签：ios, core-data, parent-child, relationship

这是描述：

1.  项目是抽象实体
2.  每个 Item 都有一个 parentItem 关系（可能是 nil）
3.  BookItem 和 CategoryItem 是 Item 的子项
4.  CategoryItem 将具有 childItems 关系

这是图表：

![在此处输入图像描述](../Images/973cd666b68ef880c542c70d3c17c334.png)

对我来说看起来不错。但我收到两条警告信息：

1.  警告：错误配置的属性：Item.parentItem 应该有一个逆
2.  警告：错误配置的属性：CategoryItem.childItems 应该有一个逆

我无法为 BookItem 设置相反的值，因为没有 childItems。而且我也不能为我的 CategoryItem 设置相反的值。我无法反向选择 parentItem，因为它在其父类中。

有人可以建议我应该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:15:16.673

你很可能想要这样的东西： ![在此处输入图像描述](../Images/bceb477983f1ce3302f25927069f6598.png)

因此，实现它的最简单方法是`control`从每个实体 + 拖动到另一个实体以创建关系（这样，XCode 也会自动创建反向关系，因此您可以节省一步）。对于 Item 父/子关系，只需`control`+ 拖动其自身。我希望这是有道理的......

PS。虽然我不完全明白你为什么需要孩子`CategoryItem`，因为它是继承的`Item`，已经有这样的关系......

# css - 如何强制表单菜单与其他超链接保持在同一行

> ID：12455177
> 
> 赞同：0
> 
> 时间：2012-09-17T07:57:45.707
> 
> 标签：css, drop-down-menu, row, footer

我真的需要帮助来弄清楚如何使我的页脚内容如下：

```
(left)Link1 | Link2 | DropDownForm(/left)        (right)link3(/right) 
```

我的页脚代码是：

```
#footer {
    clear: both;
    padding: 10px 5px 5px 176px;
    position: relative;
    background: #edf2f8 url(images/bg-footer.png) top no-repeat;
    text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:20:44.983

您需要在页脚中添加 2 个 div 第一个可以是 float:left 和第二个可以是 float:right 固定宽度（可能是 %）然后将您的 Let & Right 内容放在这些 div 中

# javascript - 使用javascript生成不同大小的独特组合[高效方法]

> ID：12455178
> 
> 赞同：0
> 
> 时间：2012-09-17T07:57:47.217
> 
> 标签：javascript, algorithm, combinations

我很难为一组生成不同大小的唯一集合组合列表，例如，其中 n=6 [变量]

```
set = {2,3,4,5,6,7} 
```

我需要像这样使用javascript（有序集合）为上述集合生成所有唯一组合

```
6C1  +  6C2  +  6C3  +   6C4   +   6C5   +   6C6

2       2,3    2,3,4   2,3,4,5  2,3,4,5,6  2,3,4,5,6,7
3       2,4    2,3,5   2,3,4,6  2,3,4,5,7 
4       2,5    2,3,6   2,3,4,7  
5       2,6    2,3,7            2,4,5,6,7
        2,7            2,4,5,6  
.              2,4,5   2,4,5,7  3,4,5,6,7
.       3,4    2,4,6            .
8       3,5    2,4,7   2,5,6,7  .
        3,6                     
        3,7    2,5,6   3,4,5,6 
               2,5,7   3,4,5,7
        4,5              
        4,6    2,6,7   3,5,6,7
        4,7    
               3,4,5   .
        5,6    3,4,6   .
        5,7    3,4,7   .
        .      
        .      3,5,6    
        6,7    3,5,7   4,5,6,7 

               3,6,7
               .       
               .       

               5,6,7 
```

现在，当我需要将这些值中的每一个分配给字母顺序时，就会出现复杂情况。顺序是先是小写字母 a、b、c..，然后是大写字母 A、B、C、..，然后是 aA、aB、aC等等

```
a=2     h=2,3    o=2,3,4   I=2,3,4,5  2,3,4,5,6  2,3,4,5,6,7
b=3     i=2,4    p=2,3,5   J=2,3,4,6  2,3,4,5,7 
c=4     j=2,5    q=2,3,6   K=2,3,4,7  
d=5     k=2,6    r=2,3,7              2,4,5,6,7
        l=2,7              L=2,4,5,6  
.                s=2,4,5   M=2,4,5,7  3,4,5,6,7
.       m=3,4    t=2,4,6            .
g=8     n=3,5    u=2,4,7   N=2,5,6,7  .
        o=3,6                     
        p=3,7    v=2,5,6   O=3,4,5,6 
                 w=2,5,7   P=3,4,5,7
        q=4,5              
        r=4,6    x=2,6,7   Q=3,5,6,7
        s=4,7    
                 y=3,4,5   .
        t=5,6    z=3,4,6   .
        u=5,7    A=3,4,7   .
          .      
          .      B=3,5,6    
          6,7    C=3,5,7   W=4,5,6,7 

                 D=3,6,7
                 .       
                 .       

                 H=5,6,7 
```

我知道正常的蛮力方法将是解决问题的最简单方法，但对于较大的值，这将是非常低效的。

我正在寻找一种更有效的方法来解决这个问题。任何好的解决方案都会有很大帮助。

提前致谢， 尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:20:38.257

函数生成组合：

```
function generate(index, array, used, result)
{
    if (index == array.length && used.length > 0)
    {
         var a = new Array();
         for (var i = 0; i < used.length; i++)
            a.push(used[i]);

         result.push(a);
    }
    else {
       generate(index+1, array, used, result);

       used.push(a[index]);
       generate(index+1, array, used, result);
       used.pop();
    }
}

function generateAllCombinations(array)
{ 
    var result = new Array();
    generate(0, array, [], result);
    return result;
} 
```

函数 generateAllCmobinations 将返回所有可能的非空组合的数组。如果您希望我将编写函数，它将返回长度为 K 的所有组合；-)

而且你找不到更好的算法。因为解决方案总是具有复杂性 O(C)，其中 C 是总组合数。所以根据数组大小的复杂度是指数 O(2^N)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:54:25.373

如果你想为每个组合创建变量，我建议使用一个对象。在 Javascript 中，可以通过两种方式访问​​对象的元素：

```
var obj = {};
obj["element"] = "foo";
alert(obj.element);    // Will alert: "foo". 
```

您可以将变量名称保存在一个数组中，然后使用该数组来分配名称，而不是每次都编写一个字符串：

```
var names = ["a", "b", "c", "d"];
var obj = {};
for (var idx = 0; idx < names.length; idx++)
    obj[names[idx]] = idx;

alert(obj.a);          //Will alert: "0".
alert(obj.c);          //Will alert: "2". 
```

如果需要创建全局变量，可以使用`window`对象而不是`obj`. 虽然我不建议弄乱窗口对象。

您可以在上面的代码中看到名称数组可以通过编程方式创建。因此，无需“蛮力硬编码”。

# cakephp - cakephp seo 与 Apache rewritemap 链接

> ID：12455182
> 
> 赞同：0
> 
> 时间：2012-09-17T07:58:29.340
> 
> 标签：cakephp

我是 CakePHP 的新手，对创建 seo-link 很感兴趣。详细信息保存在数据库中，例如

```
id | seoname | seotitle | link | seolink | rank | active 
```

我想在我的网站中使用 seolink，并希望在 CakePHP 的 index.php 收到请求之前将其重定向到正常链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:08:26.847

您需要研究的是[路线](http://book.cakephp.org/2.0/en/development/routing.html)。一旦您设置了 CakePHP 并使用默认设置，这将不需要任何进一步的 Apache 配置`/controller/action`。

如果您仍然卡住，请阅读手册并使用您需要的特定 URL 请求更新您的问题。

# greendao - 为什么GreenDao不支持在数据库中查看？

> ID：12455184
> 
> 赞同：-1
> 
> 时间：2012-09-17T07:58:31.400
> 
> 标签：greendao

每个 ORM 都可以支持视图非常重要，例如实体框架。当我想进行查询并从两个或多个表中获取数据时，我遇到了一个大问题。我想在一个特殊的类中获取数据。

- -编辑 - -

例如：

表 1：tblProfile

```
 profileId | name | family
---------------------------
     1     | ali  | niazi
---------------------------
     2     | reza | jafari 
```

表 2：tblJob

```
 jobId | profileId | jobTitle
 ------------------------------
    1   |     1     |  driver
 ------------------------------
    2   |     2     | analysis
 ------------------------------
    3   |     2     |programmer 
```

View1: viwJobs

```
profileId | name | family  | jobTitle
-------------------------------------
     1     | ali  | niazi  | driver
-------------------------------------
     2     | reza | jafari | analysis
-------------------------------------
     2     | reza | jafari |programmer 
```

但是，这只是一个样本，不是真实的。我的意思是有时我想从 sqlite 中的几个表中查看视图，我喜欢在我的应用程序中使用它。如何通过 DaoGenerator 创建一个实体（类）以使用该视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:06:13.177

没试过，具体是什么问题？

如果你的问题是 greenDAO 想要创建一个表，你可以告诉 greenDAO 不要。在代表您的视图的实体上调用 setSkipTableCreation(false)。

此外，您必须自己在 SQLiteOpenHelper 中创建数据库视图。

# javascript - webforms：如果项目被隐藏，如何删除 DOM 元素

> ID：12455185
> 
> 赞同：0
> 
> 时间：2012-09-17T07:58:31.570
> 
> 标签：javascript, jquery, asp.net, html, webforms

我在一个小型 asp.net 项目中使用的水平导航有问题。导航包含登录、配置文件和注销锚点，如果您已登录或未登录，则会显示这些锚点。

我通过在后面的代码中设置 .Visible 属性来实现这种行为。

现在我想在每个元素之后添加一个管道作为“分隔符”。这不能是实际列表项本身的一部分，因为它会破坏 a:hover 效果。

但即使元素*不在*DOM 树中，也会显示管道分隔符。看起来像

> 登录 | | |

我试过用

```
if ($("li.nav-item").length == 0) {
            $('span.divider').remove();
        }
        if ($("li.nav-item").length > 0 && $("li.nav-item").is(':visible')) {
            $('<span class="divider"> | </span>').appendTo('li.nav-item');
        } 
```

但这不起作用。我该如何解决这个问题？

亲切的问候。

/edit: html 标记（编辑的 ID）

```
<ul id="navigation">
                <li class="nav-item"><asp:HyperLink ID="link1" runat ="server" Text="LoremIpsum"      NavigateUrl="#" /></li>
                <li class="nav-item"><asp:LinkButton ID="LoremIpsum" runat ="server" Text="LoremIpsum" PostBackUrl="~/#.aspx"  /></li>
                <li class="nav-item"><asp:HyperLink ID="link2" runat="server"  Text="LoremIpsum" NavigateUrl="#.aspx"/></li>
                <li class="nav-item"><asp:HyperLink ID="linkLogin" runat="server" Text="Login" NavigateUrl="~/login.aspx"/></li>
                <li class="nav-item"><asp:HyperLink ID="linkProfile" runat="server" Text="Profile" NavigateUrl="~/profile.aspx" Visible="false"/></li>
                <li class="nav-item"><asp:HyperLink ID="linkLogout" runat="server" Text="Logout" NavigateUrl="~/logout.aspx" Visible="false"/></li>
                <li><asp:HyperLink ID="LoremIpsum" runat="server" Text="LoremIpsum" NavigateUrl="~/nutzungsbedingungen.aspx"/></li>
                </ul>

if (Session["svar_loggedin"] != null)
    {
        linkLogin.Visible = false;
        linkProfile.Visible = true;
        linkLogout.Visible = true;
    }
    else
    {
        linkLogin.Visible = true;
        linkProfile.Visible = false;
        linkLogout.Visible = false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:29:31.080

试试这个js：

```
$.each($("li.nav-item").children("a").filter(":visible"), function (e) {
    $('<span class="divider"> | </span>').appendTo($(this));
}); 
```

编辑：

要么使用 css 而不是 Visible 属性：

```
linkLogin.Attributes.Add("style", "display:none") 
```

or alt. iterate through the controls, check if visible == true, if so add the span-markup to the Text-attribute

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:09:08.237

```
 $(function () {
        var elements = $('li.nav-item > a').filter(':visible');
        for (var i = 0; i < elements.length - 1; i++) {
            elements.eq(i).append($('<span class="divider"> | </span>'));
        }

    }); 
```

in my case this did the trick. I was not realising that my Code Behind was altering the asp:Hyperlink controls and not the list items.

I changed my Jquery Snippet accordingly to relate to all anchors which are a child of list-items with the class 'nav-item'.

thank you all for bringing me back on track!

# android - 在 Gridview 中单击时显示完整大小的图像？

> ID：12455186
> 
> 赞同：1
> 
> 时间：2012-09-17T07:58:47.977
> 
> 标签：android, gridview

我是 Android 新手，正在做一些研究，我在互联网上 找到了这个[示例，它很好。](http://android-er.blogspot.com/2012/07/gridview-loading-photos-from-sd-card.html)

现在，我想做的是当单击图像时，我想显示图像的完整尺寸。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:29:00.477

您可以通过两种方式做到这一点。

您可以获取所选图像并启动您的活动或对话框以显示大尺寸图像。或者您可以启动其他应用程序以显示所选图像，如下所示：

```
 startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("IMAGE_URI"))); 
```

# batch-file - MSBuild 批量输出参数

> ID：12455187
> 
> 赞同：1
> 
> 时间：2012-09-17T07:58:57.557
> 
> 标签：batch-file, msbuild

我像这样批量调用 NUnit：

```
<MSBuild.ExtensionPack.CodeQuality.NUnit
            ToolPath="$(NUnitToolPath)"
            Assemblies="%(TestOutputFiles.FullPath)"
            ContinueOnError="True"
            Use32Bit="True"
            OutputXmlFile="$(LogDirectory)%(TestOutputFiles.Filename).$(ActiveConfigurationName).xml">          
    <Output TaskParameter="Failures" PropertyName="$(ResultFailures)"/>
    <Output TaskParameter="Errors" PropertyName="$(ResultErrors)"/>
</MSBuild.ExtensionPack.CodeQuality.NUnit> 
```

对于 TestOutputFiles.FullPath NUnit 中的每个程序集，都会调用 NUnit 并生成 OutputXmlFile，但是，我想创建一个关于最后在所有程序集中有多少测试用例失败的摘要。

所以我使用 ContinueOnError 并保存任务的输出参数。但是，我只设法将它们保存到属性中，当然每次调用任务时都会覆盖这些属性（这是一个批处理......）

你知道如何将它们保存到某种数组中吗？可能是一个项目组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:01:50.293

只需更改 ItemName 的 PropertyName 属性

```
<Output TaskParameter="Failures" ItemName="ResultFailures"/>
<Output TaskParameter="Errors" ItemName="ResultErrors"/> 
```

请记住，ItemName 和 PropertyName 是互斥的。你不能同时指定

# serialization - @JsonSerialize 上 @Controller @RequestMapping

> ID：12455189
> 
> 赞同：1
> 
> 时间：2012-09-17T07:58:59.863
> 
> 标签：serialization, spring-mvc, jackson

我从 @Controller 返回一个 Java 对象，但我想在这个特定方法上调用 Jackson 序列化程序。目前这没有给出错误，但也没有调用序列化程序。另一种方法是将@JsonSerialize 附加到返回对象的类上，但我想知道是否需要对以下代码进行一些更改以使其正常工作：

```
@JsonSerialize(using=SimpleShiftAllocSerializer.class, as=HashMap.class)
@RequestMapping(value = "/shifts/readAlloc.json", method = RequestMethod.GET)
public @ResponseBody
Map<String, ? extends Object> readAlloc(HttpServletRequest request,
        HttpServletResponse response) {
    // ...
    return someObjectToSerialise;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:53:03.360

假设您正在使用 mvc 命名空间配置，如果 jackson 在类路径上可用，则 org.springframework.http.converter.json.MappingJacksonHttpMessageConverter 会自动注册为 HttpMessageConverter。

*AnnotationDrivenBeanDefinitionParser:312*

```
if (jacksonPresent) {
    messageConverters.add(createConverterBeanDefinition(MappingJacksonHttpMessageConverter.class, source));
} 
```

所以当一个 @ResponseBody 注解的控制器方法返回时，它会检查是否有任何注册的 HttMessageConverter 支持返回的类型和 ContentType (HttpMessageConverter.canWrite())，如果有，就会调用它的 write 方法。

它不认为 Jackson MessageConvert 支持

```
Map<String, ? extends Object> 
```

要么将该映射放入 WrapperBean（带有 json 注释），要么实现您自己的 HttpMessageConverter（不要忘记注册它）

# java - Spring Security 不拦截登录调用

> ID：12455190
> 
> 赞同：0
> 
> 时间：2012-09-17T07:59:04.060
> 
> 标签：java, spring, spring-mvc, spring-security

我正在尝试设置弹簧安全性，我有一个控制器，它在验证失败后转发到登录页面。但是我的拦截似乎没有接...

控制器片段：

```
if (validation not successful) {
   return "login";
} 
```

在我的 xml 中，我有：

```
<security:intercept-url pattern="/login*" access="ROLE_USER" /> 
```

但这失败了，我收到以下错误：

> 请求的资源 (/myapp/WEB-INF/jsp/login.jsp) 不可用。

我怎样才能让它拦截登录转发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:15:56.993

如果用户尚未登录，则表示他没有`ROLE_USER`，因此 Spring Security 将不允许访问`/login`。

添加[`use-expressions="true"`到`<http>`元素](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#el-access)并将截距线更改为：

```
<http use-expressions="true">
  <!-- ... -->
  <security:intercept-url pattern="/login*" access="permitAll" /> 
```

另外，确保 login.jsp 在`/WEB-INF/jsp/login.jsp`.

**评论后编辑**：

似乎你根本没有 Spring Security 配置，所以从这个开始：

```
<http auto-config='true' use-expressions="true">
  <intercept-url pattern="/login*" access="permitAll"/>
  <intercept-url pattern="/**" access="ROLE_USER" />
  <!-- use login-page='/login' assuming you've got 
       Spring MVC configured to redirect to login.jsp -->
  <form-login login-page='/login'/>
</http> 
```

或者，如果您使用的是 Spring Security 3.1：

```
<http pattern="/login" security="none" />
<http auto-config='true'>
  <intercept-url pattern="/**" access="ROLE_USER" />
  <!-- use login-page='/login' assuming you've got 
       Spring MVC configured to redirect to login.jsp -->
  <form-login login-page='/login'/>
</http> 
```

使用示例内容创建`/WEB-INF/jsp/login.jsp`文件：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<html>
<head>
<title>Login Page</title>
</head>
<body>
    <h3>Login</h3>

    <c:if test="${not empty error}">
        <div class="errorblock">
            Your login attempt was not successful, try again.<br /> Caused :
            ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}
        </div>
    </c:if>

    <form name='f' action="<c:url value='j_spring_security_check' />"
        method='POST'>

        <table>
            <tr>
                <td>User:</td>
                <td><input type='text' name='j_username' value=''>
                </td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type='password' name='j_password' />
                </td>
            </tr>
            <tr>
                <td colspan='2'><input name="submit" type="submit"
                    value="submit" />
                </td>
            </tr>
        </table>

    </form>
</body>
</html> 
```

更重要的是，请阅读 Spring Security，因为这些是这个框架的基础。

# sql - 上周每位玩家的平均游戏数

> ID：12455192
> 
> 赞同：0
> 
> 时间：2012-09-17T07:59:17.083
> 
> 标签：sql, sql-server, group-by, average

如何计算从给定日期起过去一周每位玩家平均玩的游戏数。例如我的表包括

```
DateId       UserId        GameId
30-aug-2012  3             89
31-aug-2012  2             32
1-sep-2012   1             53
1-sep-2012   2             56
1-sep-2012   1             32
7-sep-2012   3             56 
```

因此，结果应该是 - 一周（2012 年 9 月 1 日至 2012 年 9 月 7 日）的（总游戏数）/（总玩家数），即 3/3 = 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:04:03.663

尝试这个：

```
select COUNT (distinct GameId)/COUNT(distinct UserId)
from   your_table
where  DateId>DATEADD(DD,-7,'7-sep-2012') 
```

# php - 用户友好字符的 ID

> ID：12455195
> 
> 赞同：0
> 
> 时间：2012-09-17T07:59:31.547
> 
> 标签：php

我想创建一个用户友好的系统来让用户输入某个id：

```
id 1-26: A-Z
27: AA
28: AB
    ...
    ...
    ZZZ 
```

我尝试了几种方法来实现这一点，但我得到了随机字符......

```
$counter = 7;
do {
    $temp = floor($id / (26^$counter)) % 26; 
    $counter--;
    echo($temp.' ');
} while($counter > 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:31:38.863

将 Excel 列名映射到数字顺序是一件很糟糕的事情，因为`0`AZ 中没有......

无论如何，我确实想出了两个函数来来回转换它们：

```
function calcCol($col) //character to number
{
    if(is_numeric($col)) return intval($col);
    $col=array_reverse(str_split(strtoupper(preg_replace("/[^a-z]/i","",$col))));
    $num=0;
    foreach($col as $i=>$ch)
    {
        $num+=(ord($ch)-ord('A')+1)*pow(27,$i);
    }
    $num-=ceil($num/27)-1;
    return $num;
}
function getCol($col) //number to character
{
    if(preg_match("/^[a-z]+$/i",$col)) return strtoupper($col);
    $col=abs(intval($col));
    $col+=ceil($col/26)-1;
    $str="";
    while($col>0)
    {
        $tmp=$col%27;
        $str=chr($tmp-1+ord('A')).$str;
        $col=floor($col/27);
    }
    return $str;
} 
```

解释：

将 AZ 视为基于**27 的**数字系统，其中缺少/隐藏`0`;

`0`并且在从字符转换为数字之后，通过计算“计数”了多少个 27 来删除那些隐藏的 s ( `ceil($num/27)`)；

`0`在从数字转换为字符之前，通过计算“计数”了多少个 26（ ）将那些隐藏的 s 添加回来`ceil($col/26)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:03:19.183

这是一个碱基转换问题，但有一个小技巧。

首先我们考虑`'A'`as `1`, so`'AA'`或`'AAA'`可能是有意义的, `'B'`as `2`, `'C'`as `3`.., 但是呢`'Z'`？不，`'Z'`不是 26，这里的技巧是考虑`'Z'`as `'A0'`，每次我们`0`在转换中找到一个 when 时，我们把它写下来 as `'Z'`，然后扔掉一个`'A'`（减去 1）。

所以我们有以下代码：

```
function num2user( $num )
{
    $s = "ZABCDEFGHIJKLMNOPQRSTUVWXYZ";
    $ret = "";
    while( $num > 0 )
    {
        $m = $num % 26;
        $ret = $s[$m].$ret;
        $num = floor($num / 26);
        if( $m == 0 ) $num = $num - 1;
    }
    return $ret;
}

for( $i = 1 ; $i < 128 ; $i++ )
{
    echo "$i=".num2user($i)."\n";
} 
```

# iphone - RemoveFromSuperView 不起作用

> ID：12455196
> 
> 赞同：0
> 
> 时间：2012-09-17T07:59:31.570
> 
> 标签：iphone, xcode4.3

虽然我`UIView`在头文件中声明了（如下）：

```
IBOutlet UIView *aCustomMsgBoxView; 
```

RemoveSuperView 在一种方法中起作用，但在另一种方法中不起作用。如果我把它放在这个方法中，它会起作用：

```
-(IBAction)showMsgBox:(id)sender

{

vc = [ViewController sharedInstance].self;

aCustomMsgBoxView = [[UIView alloc] init];

NSArray *nibObjects = [[NSBundle mainBundle] loadNibNamed:@"customMsgBox" owner:self options:nil];

aCustomMsgBoxView = [nibObjects objectAtIndex:0];

aCustomMsgBoxView.frame = CGRectMake(35, 80, 250, 146);

[vc.view addSubview:aCustomMsgBoxView];
} 
```

但是我在上面的方法中不需要它，我在下面不起作用的方法中需要它：

```
-(IBAction)hideMsgBox:(id)sender

{

    [newAnnotationTitle resignFirstResponder];

    [aCustomMsgBoxView removeFromSuperview];
} 
```

当然，这两种方法都属于同一个类......

为什么视图没有从屏幕上删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:43:38.557

以下代码可能有助于删除 UIView (aCustomMsgBoxView)

```
 -(IBAction)hideMsgBox:(id)sender

{
    [newAnnotationTitle resignFirstResponder];

    [UIView animateWithDuration:0.25
     animations:^{ self.aCustomMsgBoxView.alpha = 0.0;}
     completion:^(BOOL finished){ [ self.aCustomMsgBoxView removeFromSuperview]; }];

} 
```

谢谢 ：）

# javascript - 在地址栏中使用唯一 URL 打开 Colorbox

> ID：12455198
> 
> 赞同：2
> 
> 时间：2012-09-17T07:59:35.143
> 
> 标签：javascript, jquery, url, popup, colorbox

我有一个页面，当单击链接时会打开一个 Colorbox 弹出窗口。发生这种情况时，地址栏中的 URL 保持不变。我希望更改此 URL，以便我可以将访问者直接链接到 Colorbox 弹出窗口，而无需引导他们点击链接。[此页面](http://www.uu.nl/daretoexcel/#lightbox=http://www.uu.nl/daretoexcel/detail/young-leaders-league)说明了我要完成的工作。

因此，当您查看 URL 位置栏时，您会看到上述 URL。当您关闭弹出窗口时，URL 更改为：`http://www.uu.nl/daretoexcel/#`。同样，当您打开另一个窗口时，URL 会更改为类似的内容。所以我知道如何打开 Colorbox 并让它工作。只是地址栏中的 URL 始终保持不变。

我查看了他们的代码，但我不太明白。我不想只是复制和粘贴而不知道到底发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:11:32.553

你需要：

```
$(function() {
$.colorbox({html: "<h1>Welcome</h1>"});
}) 
```

这将在给定页面上的 document.ready 上打开颜色框。您可能需要在要打开它的页面上的正文中添加一些类，您可以通过在添加类的 url 中添加一个参数来做到这一点，例如 /mypage.html?opencolorbox=true，然后添加使用 asp、php 或您正在使用的任何其他服务器端语言的类。或者，只在颜色框应该打开的页面上运行上面的脚本。

您还可以将其打开到 iframe，或显示内联内容，例如：

```
$(function() {
$.colorbox({href: "login.php"});
}) 
```

将在颜色框中显示 login.php

```
$(function() {
$.colorbox({inline: true, href: "#form"});
}) 
```

将显示 ID 为 #form 的元素的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:17:53.333

它比你想象的要简单，他们只是使用哈希。您可以查看带有事件的彩盒网站上的示例。像这样获取 href：[如何从颜色框中获取返回值？](https://stackoverflow.com/questions/8126414/how-do-you-get-a-return-value-from-a-colorbox), 然后设置 hash:`document.location.hash`并在关闭事件时删除哈希。

# mercurial - 是否可以手动更改/重新排序修订号（如果拓扑保持不变）？

> ID：12455201
> 
> 赞同：8
> 
> 时间：2012-09-17T07:59:49.980
> 
> 标签：mercurial, tortoisehg

在 Mercurial 中，修订号是特定于本地克隆的，它们作为一种工具提供，以比变更集 ID 更用户友好的方式指向特定变更集。

然而，当显示时间线图时，TortoiseHG 将按修订号排序。如果某个人不经常推送提交，您将立即获得他的所有提交以及相邻的修订号，这会弄乱图表的整个要点。

![在此处输入图像描述](../Images/e18e82a6151c98094cc632d1e7dd55bd.png)

这张图会更有洞察力：有两条发展路线，有两位作者，一位合并了另一位的工作：

![在此处输入图像描述](../Images/597141a4a6e7c68ba129dc5030d21fac.png)

因此，是否可以手动重新排序修订号（只要[变更集的拓扑顺序](https://stackoverflow.com/questions/7443950/mercurial-is-the-order-of-the-revision-numbers-compatible-with-the-topological)仍然与新编号兼容？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T10:11:28.663

我有一个类似的用例：我提出这个问题是因为我一次从不同的分支推送了一堆变更集，并且它们没有按日期排序。我现在与实际上并不老的少数父母合并；上下滚动日志以查看它们是一种痛苦。我遵循了@Ry4an 的回答中建议的方法——如果你可以预测（即计算）你想要的变更集顺序，这真的很简单。

如果您的工作流程仅合并分支头，您可以通过按日期对修订集进行排序来获得所需的修订顺序。您可以使用以下命令执行此操作：

```
hg log -r 'sort(0:tip, date)' --template '{rev}\n' 
```

然后，您可以克隆存储库并使用您喜欢的脚本语言中的循环按时间顺序逐一提取修订。我没有从头开始初始化存储库，而是这样做了：

```
hg clone -r 0 messy-repo sorted-repo
cd sorted-repo
for REV in `hg log -R ../messy-repo -r 'sort(1:tip, date)' --template '{rev}\n'`
do 
    hg pull ../messy-repo -r $REV
done 
```

我应该注意（在其他人这样做之前:-)）这将*增加存储*库的存储大小，因为计算增量的方式。我不介意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T13:06:17.840

正如其他人所说，这是可能的，但可能不值得这项工作，因为它将是您的克隆（以及您的克隆的任何克隆）的本地。这不是您可以在不先删除那里的所有内容的情况下推送到远程存储库的东西，即使您这样做了，从本地远程存储库克隆的人在拉取时也会看到“没有更改”。

`hg pull -r REV`也就是说，如果你想尝试，你只需要在一个新的克隆中使用一系列命令。像这样的东西：

```
hg init my_reordered_clone
cd my_reordered_clone
hg pull -r d84b1 ../un_reordered_clone
hg pull -r 6d269 ../un_reordered_clone
hg pull -r bb9e4 ../un_reordered_clone 
```

显然，出于美学目的，这工作量太大，不值得，但是其中的概念是，当您拉动时，`-r`您会得到该变更集及其所有祖先，因此，如果您在匿名分支一次合并一个的点上进行拉动，您将只从该开发线中提取额外的变更集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:07:54.120

可以重新排序您的存储库（就是这样`contrib/shrink-revlog.py`做的）。但在这种情况下，它似乎有点矫枉过正和复杂。

由于这主要是一个显示问题，因此您应该要求 THG 实施您想要的重新排序。诚然，我不知道您在上图中发现了什么问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-28T23:37:57.590

下面是使用[csscript缩小图形宽度的实现](http://www.csscript.net/)

使用重新排序的历史复制您的存储库的命令是

```
cs-script\cscs.exe HgSortMergeChangesets.cs fromRepo toNewRepo 
```

文件“HgSortMergeChangesets.cs”有以下内容：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;

class Program
{
    static int Main(string[] args)
    {
        if (args.Length != 2)
        {
            Console.WriteLine("usage: SortHgRepo <fromRepo> <toRepo>");
            return -1;
        }

        var fromRepo = new DirectoryInfo(args[0]);
        var toRepo = new DirectoryInfo(args[1]);

        int errorCode = VerifyParameters(toRepo, fromRepo);
        if (errorCode != 0)
        {
            return errorCode;
        }

        var revsOutput = ExecCmdReturnStdOut("hg.exe", "log -r \"sort(merge(),date)\" -T \"{rev} {date|date}\\n\"", fromRepo.FullName, Console.WriteLine);

        var mergeChangesets = ParseChangesetLog(revsOutput) 
            .ToList();

        ExecCmdReturnStdOut("hg.exe", string.Format("clone -U -r 0 . \"{0}\"", toRepo.FullName), fromRepo.FullName, Console.WriteLine);

        foreach (var changeset in mergeChangesets)
        {
            ExecCmdReturnStdOut("hg.exe", string.Format("pull \"{1}\" -r {0}", changeset.ChangesetId, fromRepo.FullName), toRepo.FullName, Console.WriteLine);
        }

        ExecCmdReturnStdOut("hg.exe", string.Format("pull \"{0}\"", fromRepo.FullName), toRepo.FullName, Console.WriteLine);

        return 0;

    }

    private static int VerifyParameters(DirectoryInfo toRepo, DirectoryInfo fromRepo)
    {
        if (toRepo.Exists)
        {
            Console.WriteLine("The destination repo already exists: {0}", toRepo);
            {
                return -2;
            }
        }

        if (!fromRepo.Exists)
        {
            Console.WriteLine("The source repo does not exists: {0}", fromRepo);
            {
                return -3;
            }
        }

        // make sure the source dir is a repo
        try
        {
            var identity = ExecCmdReturnStdOut("hg.exe", "identify", fromRepo.FullName, Console.WriteLine);
            Console.WriteLine(identity);
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            Console.WriteLine("The source directory, {0}, does not look like an Hg repo.", fromRepo);
            return -4;
        }
        return 0;
    }

    private static IEnumerable<Changeset> ParseChangesetLog(string revsOutput)
    {
        using (var r = new StringReader(revsOutput))
        {
            string line;
            while ((line = r.ReadLine()) != null)
            {
                var spacePos = line.IndexOf(' ');
                yield return new Changeset
                {
                    ChangesetId = int.Parse(line.Substring(0, spacePos)),
                    DateStr = line.Substring(spacePos + 1)
                };
            }
        }
    }

    class Changeset
    {
        public int ChangesetId;
        public string DateStr;
        public DateTime Date { get { return DateTime.ParseExact(DateStr, "ddd MMM dd H:mm:ss yyyy zzz", null); } }
    }

    public static string ExecCmdReturnStdOut(string program, string args, string workingDir, Action<string> writeline)
    {

        writeline(String.Format("Executing: \"{0}\" {1} in {2}", program, args, workingDir));

        using (var proc = new Process())
        {

            proc.StartInfo.Arguments = args;
            proc.StartInfo.CreateNoWindow = false;
            proc.StartInfo.FileName = program;
            proc.StartInfo.WorkingDirectory = workingDir;
            proc.StartInfo.RedirectStandardError = false;
            proc.StartInfo.RedirectStandardOutput = true;
            proc.StartInfo.UseShellExecute = false;

            proc.Start();

            var output = proc.StandardOutput.ReadToEnd();

            proc.WaitForExit();

            if (proc.ExitCode != 0)
            {
                throw new Exception(string.Format("error code {0} returned when running command {1} in dir {2}", proc.ExitCode, "\"" + program + "\" " + args, workingDir));
            }

            return output;
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-09T19:39:59.050

归功于@alexis 和@Ry4an

我知道这种按日期排序的新克隆的解决方法，它可以工作，尽管对于大型存储库可能会很慢。这取决于您是否认为值得麻烦。

今天，我正在使用 Windows PC，这引起了我的注意，所以我想快速实现它的自动化。所以这里是对 Windows 命令提示符的重写：

```
hg clone -r 0 messy-repo sorted-repo
cd sorted-repo
for /f "usebackq tokens=*" %r in (`hg log -R ../messy-repo -r "sort(1:tip, date)" --template "{rev}\n"`) do @echo %r && @hg pull ../messy-repo -r %r 
```

注意：如果在批处理脚本文件中，百分号应该加倍，否则在命令提示符下直接输入百分号。

PD：还应归功于 Michael Burr 对 Windows 提示的反引号：[windows 子命令评估](https://stackoverflow.com/questions/3408596/windows-subcommand-evaluation#3408643)

# ios - 在 iPad 3 上测试 iPhone 5 (4") 应用程序

> ID：12455204
> 
> 赞同：13
> 
> 时间：2012-09-17T07:59:59.730
> 
> 标签：ios, ipad, iphone-5

我希望能够以模拟器模式在 iPad 3 上测试 iPhone 5 (4") 应用程序。

为了表明它是一个 iPhone 5 应用程序，我添加了`Default-568h@2x.png`启动图像，并在模拟器中按预期工作。

当我尝试在 iPad 上运行它时，它的 iPhone 模拟器中只显示 3.5" 版本。

iPad 尚不支持 4" 模式还是我需要启用其他功能？（iOS 6 GM 种子）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T15:02:38.243

显然 iPad 不支持 4 英寸 iPhone 模式，因为显示屏太小，无法进行 2 倍（缩放）。

# android - Android以指定格式获取时间和日期

> ID：12455208
> 
> 赞同：1
> 
> 时间：2012-09-17T08:00:15.737
> 
> 标签：android, date, time, calendar, formatting

我正在使用以下代码来显示日期和时间：

`String currentDateTime =java.text.DateFormat.getDateTimeInstance().format(Calendar.getInstance().getTime());
textViewDay.setText(currentDateTime);`

我正在获取格式的日期和时间

2012-09-17 12:24:31

我不想在输出中显示第二个，那么如何获得以下格式的输出

2012-09-17 12:24

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:05:28.553

你必须使用`SimpleDateFormat`：

使用这种模式：

```
String pattern = "MMM d, yyyy h:mm a" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:09:46.720

使用 SimpleDateFormat 相应地格式化您的字符串：-

```
Date d=new Date("Sep 17,2012 1:24:31 PM");// Your date to be formatted
          String strDateFormat = "MMM dd,yyyy h:mm a";
             SimpleDateFormat sdf = new SimpleDateFormat(strDateFormat);

             System.out.println(sdf.format(d));// The result required 
```

# opengl - 理解 opengl 实例化数组

> ID：12455209
> 
> 赞同：1
> 
> 时间：2012-09-17T08:00:18.910
> 
> 标签：opengl, vertex, vertex-array, vertex-attributes

给定

```
std::vector<GLuint> cubeIndices;
struct FaceGroup {
    unsigned int face_index;
    unsigned int start_index;
    size_t length;
    // comparison operators omitted
};
std::set<FaceGroup>::iterator i;
GLuint attribIndex; 
```

`FaceGroup`我通过循环遍历`cubeIndices`from中的每个索引`start_index`来渲染集合中的每一个，`start_index + length`如下所示：

```
for (unsigned ix = 0; ix < i->length; ++ix) {
    glDisableVertexAttribArray (attribIndex);
    glVertexAttribI1ui (attribIndex, cubeIndices [i->start_index + ix]);
    glDrawElements (GL_TRIANGLE_STRIP, 4, GL_UNSIGNED_INT, (void*) (i->face_index * sizeof (GLuint)));
} 
```

...这给了我正确的结果。现在我想使用实例化数组渲染同样的东西。我的推理告诉我，下面的代码等价于上面的循环：

```
glEnableVertexAttribArray (attribIndex);
glVertexAttribDivisorARB (attribIndex, 1);
glVertexAttribPointer (attribIndex, 1, GL_UNSIGNED_INT, GL_FALSE, sizeof (GLuint), &cubeIndices [i->start_index]);
glDrawElementsInstancedARB (GL_TRIANGLE_STRIP, 4, GL_UNSIGNED_INT, (void*) (i->face_index * sizeof (GLuint)), i->length); 
```

但似乎只渲染了每组人脸中的第一个（*试探，我可能错了）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:00:34.313

```
glVertexAttribI1ui (attribIndex, cubeIndices [i->start_index + ix]);
glVertexAttribPointer (attribIndex 
```

这些不做同样的事情。

奇怪的是你知道一个像 的深奥函数`glVertexAttribI*`，但不知道`glVertexAttribIPointer`创建整数数组时需要使用它。如果使用`glVertexAttribPointer`，则传输浮点值；提供的任何整数值都将转换为浮点数（这就是为什么`glVertexAttribPointer`有一个参数告诉它是否被规范化）。

所以你应该使用`glVertexAttribIPointer`. 除非您将着色器更改为使用 a`float`而不是`uint`for`attribIndex`的输入。

# oracle - Oracle 是否为所有区域正确管理时区？

> ID：12455212
> 
> 赞同：1
> 
> 时间：2012-09-17T08:00:23.973
> 
> 标签：oracle, oracle10g, timezone, timestamp-with-timezone

我有以下查询。它返回不同地区的当前时间。它适用于表 V@timezone_names 中的大多数区域。但是这个查询返回了错误的结果：

1.  '亚洲/德黑兰'，时区差异 +4:30
2.  'America/Caracas' 有 -4:30 时区差异

我的查询是：

```
select CAST(FROM_TZ( CAST(current_date AS TIMESTAMP)
                   , sessiontimezone)
             AT TIME ZONE 'America/Caracas' AS DATE) 
  from dual; 
```

[您可以在此处查看](http://www.timeanddate.com/worldclock/custom.html?sort=2)不同国家/城市的当前时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T10:41:41.713

Oracle 会不时发布时区文件补丁，以纠正错误以及由国家和地区引入的更改其时区规则的更改。Oracle 支持说明 412160.1 显示了如何检查您拥有的时区文件以及如何更新。（检查在 10g 中很简单 - `SELECT version FROM v$timezone_file`）。

在 11g 和时区文件版本 14 下，我得到加拉加斯 -4:30 和德黑兰 +4:30，显示与您链接到的站点匹配的时间。

看起来加拉加斯在 2007 年底[改变了时区](http://www.timeanddate.com/worldclock/timezone.html?n=58&syear=2000)，所以我猜你显示的是 -4:00；德黑兰在 2008 年进行了 DST 更改（或[重新引入 DST](http://www.timeanddate.com/worldclock/timezone.html?n=246&syear=2000)，不确定），所以我猜你显示的是 +3:30。假设您当前的时区早于这些更改似乎是合理的；默认情况下，10g 将在 v3 或 v4 上。

我建议您更新到最新的时区文件（版本 18）；您需要查看该支持说明以了解如何根据您的情况执行此操作，或者更具体地说，请参阅说明 1448706.1，“为 Oracle 数据库应用 DSTv18 更新”。您可以将其作为补丁 13417321 获取。如果您在使用最新补丁时仍然发现问题，那么您可以向 Oracle 提出服务请求以修复它。

# validation - 验证文件类型是否已更改并上传

> ID：12455214
> 
> 赞同：1
> 
> 时间：2012-09-17T08:00:42.227
> 
> 标签：validation, file-upload

我正在将多个文件从页面上传到服务器。在这样做的同时，文件类型的验证发生在服务器端和客户端。表示检查并验证文件类型的扩展。如果用户将 .exe 文件更改为 .doc 文件并上传，那么如何跟踪和验证。是否可以使用任何标头数据或类似的东西来获取？

# php - OneLogin.com 的 PHP 的 SAML 工具包

> ID：12455215
> 
> 赞同：0
> 
> 时间：2012-09-17T08:00:44.803
> 
> 标签：php, single-sign-on, saml, federated-identity

我想在我的应用程序中设置身份提供者。我从 OneLogin.com (http://support.onelogin.com/entries/268420-saml-toolkit-for-php) 看到了一个用于 PHP 的 SAML 工具包。如何使用它在我的机器中设置身份提供者？

我觉得我们可以用它来设置服务提供者而不是身份提供者。让我知道你的看法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:06:06.400

此工具包用于 OneLogin 作为身份提供者。如果你想在本地设置一个不是 OneLogin 的身份提供者，你应该找一些其他的软件来做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T09:48:52.830

如果它可以帮助你......有一个 GPL 许可库在 PHP [https://github.com/lightSAML/lightSAML-IDP](https://github.com/lightSAML/lightSAML-IDP)中实现 SAML IDP，但它处于早期测试阶段。

# c# - 如何在 ASP.Net 页面的视图源中隐藏电子邮件地址？

> ID：12455216
> 
> 赞同：0
> 
> 时间：2012-09-17T08:01:01.977
> 
> 标签：c#, asp.net, security

Acunetix Web 漏洞工具报告说，我们的 Web 应用程序中有页面暴露了我们客户的电子邮件地址。之所以如此，是因为客户资料 Web 表单需要对电子邮件地址进行编码。但是，在编辑配置文件时，电子邮件地址会显示在视图源中，这是一个发送垃圾邮件的窗口。是否可以在视图源中隐藏电子邮件地址，但仍然可以在客户端表单中查看和访问？我正在使用 c#.net 2010 asp.net。

提前致谢！

# python - 使用 Biopython 在线运行 BLAST 的语法错误

> ID：12455220
> 
> 赞同：0
> 
> 时间：2012-09-17T08:01:18.603
> 
> 标签：python, biopython, blast

我正在尝试构建一个脚本，以按照 Biopython 教程和食谱（[第 7 章](http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc83)）将焦磷酸测序的 fasta 文件与核苷酸 GenBank 数据库进行比较。

在进程运行时，提示符会显示以下消息：

```
result_handle=NCBIWWW.qblast("blastn", "nt", record.seq)
            ^
SyntaxError: invalid syntax 
```

而且我不知道问题是什么，或者如何解决它。我的脚本中可能有后来的错误。但现在，我不能继续用它来唤醒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:35:58.250

从您提供的代码片段中，您只需要关闭`open`命令的括号块 -`format`是传递给的参数`SeqIO.read`，而不是`open`.

```
record=SeqIO.read(open("/Users/imac/Desktop/sinchimeras_1.fasta"), # close parens
    format="fasta")
result_handle=NCBIWWW.qblast("blastn", "nt", record.seq)
archivo1=open("/Users/imac/Desktop/bacsoilpia0_otu.xml", "w")
archivo1.write(result_handle.read()) 
```

# iphone - 将纪元时间转换为小时前，从 iPhone 中的当前日期开始分钟前

> ID：12455223
> 
> 赞同：2
> 
> 时间：2012-09-17T08:01:35.433
> 
> 标签：iphone, nsdate, nsdateformatter, epoch

我的纪元时间是 1347522689。现在我想显示这个时间是多少小时前，从当前日期开始几分钟前。我是这个新手，请给我看一些代码或任何建议，不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:10:11.587

```
NSString *epochTime = @"1347522689";
NSTimeInterval epochInterval = [epochTime longLongValue];
NSDate *epochNSDate = [[NSDate alloc] initWithTimeIntervalSince1970:epochInterval];
NSDateFormatter *dateFormatterEpoch = [[NSDateFormatter alloc] init];
[dateFormatterEpoch setDateFormat:@"yyyy-MM-dd HH:mm:ss zzz"];
NSString *epochDate = [dateFormatterEpoch stringFromDate:epochNSDate];

NSDate *currentDateNSDate = [NSDate date];
NSDateFormatter *dateFormatterCurrent = [[NSDateFormatter alloc] init];
[dateFormatterCurrent setDateFormat:@"yyyy-MM-dd HH:mm:ss zzz"];
NSString *currentDate = [dateFormatterCurrent stringFromDate:currentDateNSDate];

NSLog(@"epochDate = %@",epochDate);
NSLog(@"currentDate = %@", currentDate);

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSUInteger unitFlags = NSMonthCalendarUnit | NSDayCalendarUnit | NSYearCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;

NSDateComponents *components = [gregorian components:unitFlags fromDate:epochNSDate toDate:currentDateNSDate options:0];

NSInteger year = [components month];
NSInteger months = [components month];
NSInteger days = [components day];
NSInteger hours = [components hour];
NSInteger min = [components minute];
NSInteger sec = [components second];

NSLog(@"Year Difference = %@\n Month Difference = %@\n, Days Difference = %@\n, Hours Difference = %@\n ,Minutes Difference = %@\n second Difference = %@\n", [[NSNumber numberWithInteger:year] stringValue] ,[[NSNumber numberWithInteger:months] stringValue], [[NSNumber numberWithInteger:days] stringValue], [[NSNumber numberWithInteger:hours] stringValue], [[NSNumber numberWithInteger:min] stringValue],[[NSNumber numberWithInteger:sec] stringValue]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:20:43.537

使用下面的代码它工作得很好。

```
- (NSString *)epochTimeConvert:(NSString *)strSeconds
{
    NSTimeInterval interval = [strSeconds doubleValue];
    //interval -= 3600;
    NSDate *online = [NSDate dateWithTimeIntervalSince1970:interval];
    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"dd MMM yyyy"];
    return [dateFormatter stringFromDate:online];
} 
```

像这样打电话

```
[self epochTimeConvert: 1347522689]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T09:53:27.130

即使较旧的问题日期，我在这里放置此函数以将秒转换为如下格式

**2 天 9 小时前**

```
-(NSString*)humanReadableElapsedTimeForSeconds:(long)seconds WithUnitLabels:(NSArray*)customNames AgoLabel:(NSString*)customAgoLabel
{
    NSArray* names = ( customNames && [customNames count] == 7 ? customNames : @[@"seconds", @"minutes", @"hours", @"days", @"weeks", @"months", @"years"] );
    NSUInteger values[7] = {1, 60, 3600, 24 * 3600, 7 * 24 * 3600, 30 * 24 * 3600, 365 * 24 * 3600};
    NSString* agoLbl = (customAgoLabel ? customAgoLabel : @"ago");

    if (seconds < 0)
        return [NSString stringWithFormat:@"0 %@",[names objectAtIndex:0]];

    NSString* hrElapsedTime = nil;

    int i = 0;
    for(i = (sizeof(values)/sizeof(values[0])) - 1; i > 0 && seconds < values[i]; i--);

    if(i == 0) {
        hrElapsedTime = [NSString stringWithFormat:@"%d %@ %@",(int)floorf(seconds / (float)values[i]),[names objectAtIndex:i], agoLbl];
    } else {
        unsigned long t1 = (unsigned long)floorf(seconds / (float)values[i]);
        unsigned long t2 = (unsigned long)floorf((seconds - t1 * values[i]) / (float)values[i-1]);
        if (t2 == 0)
            hrElapsedTime = [NSString stringWithFormat:@"%lu %@ %@", t1, [names objectAtIndex:i], agoLbl];
        else
            hrElapsedTime = [NSString stringWithFormat:@"%lu %@, %lu %@ %@", t1, [names objectAtIndex:i], t2, [names objectAtIndex:(i-1)], agoLbl];
    }

    return hrElapsedTime;
} 
```

所以从一个日期开始：

```
-(NSString*)humanReadableElapsedTimeFromDate:(NSDate*)fromDate WithUnitLabels:(NSArray*)customNames AgoLabel:(NSString*)customAgoLabel
{
    if (!fromDate)
        return nil;

    NSTimeInterval seconds = [[NSDate date] timeIntervalSinceDate:fromDate];
    return [self humanReadableElapsedTimeForSeconds:seconds WithUnitLabels:customNames AgoLabel:customAgoLabel];
} 
```

**用法：**

```
//from seconds ( in this case will output '3 minutes, 20 seconds ago' )
[self humanReadableElapsedTimeForSeconds:200 WithUnitLabels:nil AgoLabel:nil];
// from date
[self humanReadableElapsedTimeFromDate:someDate WithUnitLabels:nil AgoLabel:nil]; 
```

希望它会有所帮助

# php - php。如果为空语句，

> ID：12455224
> 
> 赞同：-2
> 
> 时间：2012-09-17T08:01:38.700
> 
> 标签：php, html, web, notepad++

在我的留言簿中，我制作了一个“按钮”来查看留言簿，因为它会将您带到另一个页面。问题是我有这个代码 所以它会出现那个错误。不管我如何链接到留言簿。如果您单击“提交按钮”并且您遗漏了您的姓名和评论，它应该只显示错误。
`if (empty($name) || (empty($comment)))
{
echo "Error";
exit;
}`

整个代码：之前，我将变量更改为英语以便更好地理解，但我现在只保留丹麦语。

?>

```
<html>
<head>
<title>Fælles Forum</title>
</head>
<body>                        
<form action="skriv.php" method="POST">
<br>
 Navn <input type="text" name="fornavn" />
<br>
<br>
E_mail <input type="text" name="email" />
<br>
<br>
<p>Besked<p> <textarea rows="7" name="kommentar" cols="40"></textarea>
<br>
<br>
Adresse <input type="text" "Adreese" name="adresse" />
<br>
<br>
Mobil nr <input type="text" name="mobil" size="12" maxlength="8" 
<br>
<br>
<br>
<input type="submit" value="Save" name = "save"  />
<input type="reset" value="Reset"  />
</form>
<form action="skriv.php" method="GET">
<input type="submit" value="Read all messages" name = "read">
</form>
<FORM METHOD="GET" ACTION="Login.php"> <INPUT TYPE="submit" VALUE="Logout"> </FORM> 
<form action="index.php" method="GET">
<input type="submit" value="Delete all messages" name = "delete">
</form>
<?php
if (isset($_GET['delete']))
{
$handle = fopen("TXTfil.txt", "w");
fclose($handle);
echo "Alle kommentare slettet!";
}
?>

</body>
</html> 
```

它不允许我发布另一页代码。所以我拍了第二页的照片。

[http://i46.tinypic.com/2e3ac7r.png](http://i46.tinypic.com/2e3ac7r.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:42:30.073

如果我理解正确；你想要一个双重用途的页面。它应该显示留言簿，但如果用户单击提交按钮，它还应该添加评论。如果您单击提交按钮并将“名称”或“评论”留空，您希望它出错。

您可以通过检查其名称的值来检查用户是否使用提交按钮来到您的页面。

请务必为您的按钮指定名称：

```
<input type="text" name="Name" value="" />
<input type="submit" name="AddComment" value="Save" /> 
```

并在您的目标页面中：

```
if ($_POST['AddComment']=='Save') {
  if (empty($name) || (empty($comment))) {
    echo "Error";
    exit;
  }
  // save logic goes here
}
else {
  // show guestbook
} 
```

# c# - 表更新后从数据库获取响应

> ID：12455225
> 
> 赞同：-1
> 
> 时间：2012-09-17T08:01:40.423
> 
> 标签：c#, .net, winforms, sql-server-2008, .net-4.0

我有一个在`C#`和中开发的应用程序`Sql Server 2008`。

在这里，用户可以从数据库中打开列表，同时更新相同的数据库表，指示特定用户已打开当前列表。当另一个用户试图打开同一个列表时，会通知用户说用户 A 已经打开了列表，并且有两个选项关闭或通知用户。

在通知用户过程中，我必须定期检查每个打开列表的用户的数据库，以查找是否有任何其他用户发送通知，表明他们也尝试打开相同的列表。

一旦有人按下发送通知选项，是否有任何更智能的识别方式，而不是定期检查数据库。像从数据库向系统获取通知之类的东西？我确实发现了[SqlNotificationRequest](http://msdn.microsoft.com/en-us/library/3ht3391b%28v=vs.80%29.aspx)。SQL 2008 中是否有任何类似的新功能？

是否有可能实现或任何其他替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:44:40.793

由于您使用的是同构 Microsoft 基础架构，因此您可能需要查看[SQL Server Service Broker](http://msdn.microsoft.com/en-us/library/bb522893.aspx)。

服务代理使用队列向任何对其通知感兴趣的人发送消息。您的应用程序可以订阅这些消息，然后根据更改的种类做出反应。

> SQL Server Service Broker 为 SQL Server 数据库引擎中的消息传递和排队应用程序提供本机支持。这使开发人员可以更轻松地创建复杂的应用程序，这些应用程序使用数据库引擎组件在不同的数据库之间进行通信。开发人员可以使用 Service Broker 轻松构建分布式且可靠的应用程序。

更多关于它的信息：[SQL Server Service Broker 简介](http://msdn.microsoft.com/en-us/library/ms345108%28v=sql.90%29.aspx)。

> 借助 Microsoft SQL Server 2005 中的一项功能 Service Broker，内部或外部进程可以通过使用对 Transact-SQL 数据操作语言 (DML) 的扩展来发送和接收有保证的异步消息。可以将消息发送到与发送者相同的数据库中的队列、相同 SQL Server 实例中的另一个数据库或同一服务器或远程服务器上的另一个 SQL Server 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:26:48.580

我想这完全取决于你的方法。

如果你只是通过查询来做到这一点。数据库无法知道哪个用户当前正在查看哪个表。但是，您的应用程序确实如此，并且必须由经理来说明哪个用户当前正在查看哪个表以及如何查看和编辑等。

如果您使用带有 DataReader 对象 (SqlDataReader) 的公共服务之类的东西，您可以计算管理这些 SqlDataReader 及其最后查询的类的所有实例。

数据阅读器与数据库的结果集有一个打开的连接。也许那是一个线索？

这整个问题等于有多少用户正在查看一个网站？加载后，您如何知道他们是否仍在查看它？

# java - 如何使用 Eclipse 的比较 API？

> ID：12455229
> 
> 赞同：2
> 
> 时间：2012-09-17T08:01:50.617
> 
> 标签：java, eclipse, compare

我想捕获两个版本的程序之间更改方法的列表。我看到 Eclipse 有一个工具来比较符合我期望的文件。对应的 API 是 org.eclipse.compare。我尝试使用它，但失败了。

有没有人已经使用过这个 API 并且可以给我一个使用这个 API 的 java 程序的例子。

这个想法是我在条目中有两个版本的程序的字符串路径，我想返回差异列表。

非常感谢。

托马斯。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-17T09:33:54.723

为什么你不使用 linux diff 命令： http: [//linux.about.com/library/cmd/blcmdl1_diff.htm](http://linux.about.com/library/cmd/blcmdl1_diff.htm)

# wpf - 如何在没有日期时间的情况下将 linq 中的日期与实体查询进行比较

> ID：12455232
> 
> 赞同：2
> 
> 时间：2012-09-17T08:02:11.233
> 
> 标签：wpf, linq-to-entities

```
 var query = _context.POS_ItemPriceListMaster.Where(c => c.FromDate >= FromDate && c.ToDate <= FromDate).Select(t=> t.ItemPriceListMasterID);
        var query2 = from c in _context.POS_ItemPriceList
                         where query.Contains(c.ItemPriceListMasterID)
                         select c; 
```

我想这样做，但查询中没有结果，尽管有来自日期的数据在数据库字段中是日期时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:15:35.103

我假设`c.FromDate`和`c.ToDate`是没有时间信息`FromDate`的日期，并且是一个有时间信息的日期。

要修复您的查询，请从以下位置删除时间`FromDate`：

```
var fromDateWithoutTime = FromDate.Date;

var query = _context.POS_ItemPriceListMaster
                    .Where(c => c.FromDate >= fromDateWithoutTime
                                && c.ToDate <= fromDateWithoutTime)
                    .Select(t=> t.ItemPriceListMasterID); 
```

# php - PHP Find 体验更上一层楼

> ID：12455233
> 
> 赞同：1
> 
> 时间：2012-09-17T08:02:13.117
> 
> 标签：php, math

假设我有这个简单的功能

```
<?php

function levels($theExp) {

          if ($theExp < 52) { $theLevel = 2;}
          else if ($theExp < 110) { $theLevel = 3;}
          else if ($theExp < 175) { $theLevel = 4;}
          else if ($theExp < 246) { $theLevel = 5;}
          else if ($theExp < 325) { $theLevel = 6;}
          else if ($theExp < 413) { $theLevel = 7;}
          else if ($theExp < 510) { $theLevel = 8;}
          else if ($theExp < 616) { $theLevel = 9;}
          else if ($theExp < 734) { $theLevel = 10;}
          else if ($theExp < 865) { $theLevel = 11;}
          else if ($theExp < 1008) { $theLevel = 12;}
          else if ($theExp < 1167) { $theLevel = 13;}
          else if ($theExp < 1342) { $theLevel = 14;}
          else if ($theExp < 1536) { $theLevel = 15;}
          else if ($theExp < 1749) { $theLevel = 16;}
          else if ($theExp < 1985) { $theLevel = 17;}
          else if ($theExp < 2245) { $theLevel = 18;}
          else if ($theExp < 2531) { $theLevel = 19;}
          else if ($theExp < 2848) { $theLevel = 20;}
          else if ($theExp < 3197) { $theLevel = 21;}
          else if ($theExp < 3582) { $theLevel = 22;}
          else if ($theExp < 4007) { $theLevel = 23;}
          else if ($theExp < 4476) { $theLevel = 24;}
          else if ($theExp < 4993) { $theLevel = 25;}
          else if ($theExp < 5564) { $theLevel = 26;}
          else if ($theExp < 6193) { $theLevel = 27;}
          else if ($theExp < 6888) { $theLevel = 28;}
          else if ($theExp < 7655) { $theLevel = 29;}
          else if ($theExp < 8502) { $theLevel = 30;}
          else if ($theExp < 9435) { $theLevel = 31;}
          else if ($theExp < 10466) { $theLevel = 32;}
          else if ($theExp < 11603) { $theLevel = 33;}
          else if ($theExp < 12858) { $theLevel = 34;}
          else if ($theExp < 14243) { $theLevel = 35;}
          else if ($theExp < 15772) { $theLevel = 36;}
          else if ($theExp < 17459) { $theLevel = 37;}
          else if ($theExp < 19321) { $theLevel = 38;}
          else if ($theExp < 21376) { $theLevel = 39;}
          else if ($theExp < 23644) { $theLevel = 40;}
          else if ($theExp < 26148) { $theLevel = 41;}
          else if ($theExp < 28912) { $theLevel = 42;}
          else if ($theExp < 31962) { $theLevel = 43;}
          else if ($theExp < 35329) { $theLevel = 44;}
          else if ($theExp < 39046) { $theLevel = 45;}
          else if ($theExp < 43149) { $theLevel = 46;}
          else if ($theExp < 47677) { $theLevel = 47;}
          else if ($theExp < 52677) { $theLevel = 48;}
          else if ($theExp < 58195) { $theLevel = 49;}
          else if ($theExp < 64288) { $theLevel = 50;}
          else if ($theExp < 71013) { $theLevel = 51;}
          else if ($theExp < 78437) { $theLevel = 52;}
          else if ($theExp < 86633) { $theLevel = 53;}
          else if ($theExp < 95681) { $theLevel = 54;}
          else if ($theExp < 105670) { $theLevel = 55;}
          else if ($theExp < 116697) { $theLevel = 56;}
          else if ($theExp < 128871) { $theLevel = 57;}
          else if ($theExp < 142311) { $theLevel = 58;}
          else if ($theExp < 157148) { $theLevel = 59;}
          else if ($theExp < 173529) { $theLevel = 60;}
          else if ($theExp < 191614) { $theLevel = 61;}
          else if ($theExp < 211579) { $theLevel = 62;}
          else if ($theExp < 233622) { $theLevel = 63;}
          else if ($theExp < 257958) { $theLevel = 64;}
          else if ($theExp < 284825) { $theLevel = 65;}
          else if ($theExp < 314487) { $theLevel = 66;}
          else if ($theExp < 347236) { $theLevel = 67;}
          else if ($theExp < 383392) { $theLevel = 68;}
          else if ($theExp < 423310) { $theLevel = 69;}
          else if ($theExp < 467382) { $theLevel = 70;}
          else if ($theExp < 516039) { $theLevel = 71;}
          else if ($theExp < 569760) { $theLevel = 72;}
          else if ($theExp < 629070) { $theLevel = 73;}
          else if ($theExp < 694553) { $theLevel = 74;}
          else if ($theExp < 766850) { $theLevel = 75;}
          else if ($theExp < 846671) { $theLevel = 76;}
          else if ($theExp < 934799) { $theLevel = 77;}
          else if ($theExp < 1032098) { $theLevel = 78;}
          else if ($theExp < 1139523) { $theLevel = 79;}
          else if ($theExp < 1258129) { $theLevel = 80;}
          else if ($theExp < 1389078) { $theLevel = 81;}
          else if ($theExp < 1533655) { $theLevel = 82;}
          else if ($theExp < 1693280) { $theLevel = 83;}
          else if ($theExp < 1869518) { $theLevel = 84;}
          else if ($theExp < 2064099) { $theLevel = 85;}
          else if ($theExp < 2278932) { $theLevel = 86;}
          else if ($theExp < 2516125) { $theLevel = 87;}
          else if ($theExp < 2778005) { $theLevel = 88;}
          else if ($theExp < 3067142) { $theLevel = 89;}
          else if ($theExp < 3386373) { $theLevel = 90;}
          else if ($theExp < 3738830) { $theLevel = 91;}
          else if ($theExp < 4127973) { $theLevel = 92;}
          else if ($theExp < 4557619) { $theLevel = 93;}
          else if ($theExp < 5031985) { $theLevel = 94;}
          else if ($theExp < 5555725) { $theLevel = 95;}
          else if ($theExp < 6133979) { $theLevel = 96;}
          else if ($theExp < 6772421) { $theLevel = 97;}
          else if ($theExp < 7477315) { $theLevel = 98;}
          elseif ($theExp < 8255580) { $theLevel = 99;}

          return $theLevel;

      }

      ?> 
```

你输入你的经验，它会给你你的等级。这两个数字是从 MySQL 数据库中提取的......

所以，假设我们有`$level`和`$exp`。

`$level`鉴于我的 is`1`和`$exp`is ，我将如何找到剩下的经验以达到下一个级别`0`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:18:09.580

我相信你应该为两者创建一个数组`exp`，`level`它会更容易操作，例如：

```
function levels($theExp, $next = null) {
    $levels = array(
            2 => 52,
            3 => 110,
            4 => 175
           );
    foreach($levels as $level => $exp){
        if($exp > $theExp){
            return ($exp-$theExp);
        }
    }
    return 'MAX LEVEL';
}
$thisLevel = levels(63); // 47 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:06:06.787

您应该使用循环而不是编写那么多条件，甚至是一个 switch 语句。无论如何，为了找到剩下的 exp，你必须计算即将到来的级别 exp 和当前 exp 之间的差异：

```
echo 'Remaining exp to level 3:' , 110 - $theExp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:19:42.180

制作一个包含经验限制的级别数组，即

```
$levels = array(
  1 => 0,
  2 => 52,
  3 => 110,
  ...
); 
```

然后，当您知道当前的 exp 时，您可以遍历级别数组

```
function getNextLevel(&$levels,$experience) {
    $levelscount = count(array_keys($levels));
    $currentlevel = 0;
    for ($a = 1; $a <= $levelscount; $a++) {
        if ($levels[$a] > $experience) {
            $for_next_level = $levels[$a]-$experience;
            return array('level'=>$a-1, 'for_next_level'=>$for_next_level);
        } else if ($levels[$a] == $experience) {
            $for_next_level = $levels[$a+1]-$experience;
            return array('level'=>$a, 'for_next_level'=>$for_next_level);   
        }
    }
    return array('level'=>$levelscount, 'for_next_level'=>null); // if maxed the experience
}

getNextLevel($levels,50); // Array ( [level] => 1 [for_next_level] => 2 )
getNextLevel($levels,52); // Array ( [level] => 2 [for_next_level] => 58 ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T04:36:53.847

另一种方法是编写一个数学函数；水平作为经验的函数。如果你绘制你的水平近似值，你会得到一个看起来像这样的图表：

![在此处输入图像描述](../Images/cb1158d37557b1a67d6a46fe1304c4b0.png)

这可以用这个表达式非常准确地近似（相关误差为 0.99968917）：

![在此处输入图像描述](../Images/84732f923fc3664569b01002e7b92ef9.png)

```
function levels($exp) {
    if( $exp < 52 ) return( 2 );
    if( $exp > 8255580 ) return( 99 );

    $exp2 = pow($exp, 2);
    $exp3 = pow($exp, 3);
    $exp4 = pow($exp, 4);

    $part_a = 
        (-7083090.21554248 * $exp) -
        (2660.03667387467 * $exp2) -
        (0.00893506217859665 * $exp3);

    $part_b =
        (9.21358754706152e-13*$exp4) -
        246214420.822165 -
        (511314.94011467 * $exp) -
        (52.7886099211375 * $exp2) -
        (9.50051322037161e-5*$exp3);

    return( intval($part_a / $part_b) );
} 
```

这显然是对等式的粗略估计，但它在没有意大利面条代码的情况下工作得很好。它在 100% 公差范围内通过了您的二进制剪辑测试，只有大约 40/96 次，但是当它关​​闭时，它会偏离头发长度。请参阅此图以进行拟合比较：http: [//i.imgur.com/DHfJE.png](https://i.imgur.com/DHfJE.png)

**编辑：**回答你原来的问题，“经验离开到一个新的水平”现在由数学计算。由于这种方法是基于数学的，方​​程是可逆的，所以当你求解经验时，你可以写一个反函数（注意这也是一个粗略的估计，并且在下限中出错，所以你需要为 exp 改进它-水平 < 2500):

```
function experience( $level ) {
    if( $level < 20 ) {
        return( intval(
            52.4648221531097*$level + 
            0.441063182292944*pow($level,3) + 
            0.00123813768395424*pow($level,5) - 
            57.3134003957015 - 
            0.0279703679732544*pow($level,4) - 
            1.81609930709489e-5*pow($level,6)
        ) );
    }

    return( intval(
        2520.69249517965 + 
        (5.46368150243298e-6*pow($level,6)) + 
        (1.30082368317228e-13*pow($level,10)) - 
        (9.417224294e-10*pow($level,8))
    ));
} 
```

因此，要通过这种方法计算下一级所需的经验：`$needed = experience($current_level + 1) - experience($current_level);`

# design-patterns - 设置多个属性的正确模式是什么，每个属性都会触发昂贵的刷新操作？

> ID：12455234
> 
> 赞同：2
> 
> 时间：2012-09-17T08:02:14.080
> 
> 标签：design-patterns, gwt, optimization, user-interface, widget

假设您有一个用户界面小部件，并且在某些状态更改时，您需要设置执行一些操作。所以你做这样的事情：

```
widget.setSize(400, 300);
widget.setHeader("whatever");
widget.setData(new int[] {2, 3, 5});
widget.setFancyThingEnabled(true); 
```

然后假设这些操作中的每一个都会触发小部件的整体刷新。那是低效的。

我知道解决这个问题的几种方法，但是正确/最好/最优雅的模式是什么？我知道我可以：

*   创建一些`Property`对象，我可以填写然后将其提供给小部件。
*   有一些`setRefresh(enabled:boolean)`方法来包装交易。
*   只允许通过回调方法设置属性，然后将在事务中执行。
*   将刷新放在队列中并等待一段时间，然后再继续。

我正在使用 GWT，它在任意慢速机器上的浏览器上运行，但这几乎适用于任何环境。

**编辑：** 请记住，UI 是一个示例，我指的是从一个状态到另一个状态的转换会在其他中间状态上触发太多不必要的计算的一般场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:05:00.910

[这个策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)怎么样：

```
widget
  .startAction() // instance of WidgetAction returned
  .setSize(400, 300)
  .setHeader("whatever")
  .setData(new int[] {2, 3, 5})
  .setFancyThingEnabled(true)
  .close(); // actual changes made for UI 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:37:45.767

不必要的，因为浏览器已经为您执行此操作。这是可能的，因为在整个当前 JavaScript 事件处理程序完成之前不必进行渲染。与一些桌面 GUI 框架相比，这实际上是 Web 开发的一大优势。

# facebook - Facebook API - auth.login 未触发

> ID：12455235
> 
> 赞同：2
> 
> 时间：2012-09-17T08:02:21.493
> 
> 标签：facebook, facebook-javascript-sdk, facebook-authentication

我一直在使用代码通过我的应用程序连接到 Facebook，但当我再次检查它时它突然不起作用。更具体地说，我可以连接到 Facebook，但 auth.login 订阅没有触发，我需要在登录到 Facebook 后做一些事情。这是我的代码：

```
 window.fbAsyncInit = function () {
    FB.init({ appId: facebookAppId,
        status: true, // check login status
        cookie: true, // enable cookies to allow server to access session 
        xfbml: true,  // enable XFBML and social plugin
        oauth: true   // enable OAuth 2.0
    });
    $('#sender').val('linked');

    FB.getLoginStatus(function (response) {
        if (response.authResponse) {
            FB.logout();
        }
    });

    FB.Event.subscribe('auth.login', function (response) {
        if (response.status == 'connected') {

            //Get data Facebook returned and save

            //Hide button

            //Display Success Message
        }
        else {
            //Display Failed Message
        }
    });
};

(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js";
    fjs.parentNode.insertBefore(js, fjs);
} (document, 'script', 'facebook-jssdk')); 
```

我的 HTML 页面中有这个按钮：

```
<fb:login-button scope="publish_stream,offline_access">{0}</fb:login-button> 
```

一些附加信息：

我注意到连接到 Facebook 时添加了额外的步骤。最后我检查了一下，我只需要使用我的凭据登录，但我注意到当前的登录过程有两个额外的步骤。我不知道这些额外的步骤是否与它有关，但我只是把它扔在那里：

1.  一个对话框，其中包含有关该应用程序的一些信息以及一个显示“使用 Facebook 登录”的按钮。
2.  另一个对话框，应用程序在其中询问用户是否允许发布。

那么，我做错了什么？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:27:17.883

两件事情：

*   我开始认为 facebook 在 'auth.login' 中做了一些改变，现在慢慢地对越来越多的人不起作用了。请参阅有关它的相关问题 -

[FB.Event.Subscribe 不适用于某些用户](https://stackoverflow.com/questions/14314844/fb-event-subscribe-not-working-for-some-users/14359311#14359311)

[自动登录 facebook - FB.Event.subscribe auth.login 不起作用](https://stackoverflow.com/questions/14339899/auto-login-facebook-fb-event-subscribe-auth-login-doesnt-work)

*   因为你很久以前问过，如果你使用 php sdk，你可能需要刷新你的 SDK 文件，因为它不断变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-16T16:48:12.510

我有一个问题是刷新页面后没有触发“auth.login”，我更改了：

```
 FB.Event.subscribe('auth.login'... 
```

至

```
`FB.Event.subscribe('auth.authResponseChange'...` 
```

# pipe - 雅虎管道 RSS 图标

> ID：12455237
> 
> 赞同：4
> 
> 时间：2012-09-17T08:02:44.647
> 
> 标签：pipe, yahoo, favicon, yahoo-pipes

有谁知道我如何使用我自己的图标，它与提要相关联？如果我在 Google 阅读器中订阅我的提要，它旁边会显示雅虎徽标。我正在使用 Yahoo Pipes 来优化客户的 RSS 提要，所以如果有 Yahoo 徽标而不是客户的徽标，那就太糟糕了。

任何帮助将不胜感激！

谢谢！

# php - 如果我需要使用php阅读器读取带有“01”之类的数字的excel文件，我该怎么办？

> ID：12455238
> 
> 赞同：0
> 
> 时间：2012-09-17T08:02:50.417
> 
> 标签：php, excel

如果我需要使用php阅读器读取带有“01”之类的数字的excel文件，我该怎么办？

他们不读取像 ="variables" 这样的数据。

我应该使用任何其他excel阅读器吗？

我知道如何使用“mso-number-format”下载这样的文件来处理它。

请帮帮我。

```
require_once '../../lib/reader.php';
$data = new Spreadsheet_Excel_Reader();

$data->setOutputEncoding('utf8');
$data->read('data/'.$_FILES["FILE1"]["name"]);
error_reporting(E_ALL ^ E_NOTICE);

for ($i = 2; $i <= $data->sheets[0]['numRows']; $i++) {

            for ($j = 1; $j <= $data->sheets[0]['numCols']+1; $j++) {
        $strValue = addslashes(trim(strip_tags($data->sheets[0]['cells'][$i][$j]))); // addslashes , trim, strip_tags

        if ($j ==1) $a = $strValue; // 
        if ($j ==2) $b = $strValue; // 
        if ($j ==3) $c = $strValue; // 
    }

echo $a.$b.$c 
```

![](../Images/43286e644d220d6bdd2ca28e3407cc2b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:50:11.553

如果您正在从 Excel 工作表中读取一个数字，那么它很可能被保存为一个简单的数字 ratehr 而不是一个字符串。使用 sprintf() 或 str_pad() 读取并格式化它；或检查单元格的数字格式掩码并将其应用于您的号码。

**编辑**

看起来有人在捏造工作簿以使用公式，而不是将单元格值设置为字符串，或应用格式掩码（不是特别明智）。

查看 Spreadsheet_Excel_Reader 的代码（第 1424-1429 行），它处理读取导致字符串值的公式，它实际上并没有在单元格中设置字符串值（这就是您获得空单元格值的原因）。 ...这显然是库中的一个错误。要么你需要解决这个问题；或者切换到可以实际读取给出字符串结果值的公式的 Excel 库；或修复原始电子表格，使其将“001”值设置为字符串或格式掩码数字，而不是公式。

# vbscript - Pin 以编程方式在 Windows 8 上启动快捷方式

> ID：12455244
> 
> 赞同：0
> 
> 时间：2012-09-17T08:03:00.027
> 
> 标签：vbscript, windows-8, installshield-2011

我已经使用 Installshield 2011 创建了一个安装程序。这个安装程序在 StartMenu-->Programs 中创建了一个快捷方式，并且它还在安装过程中运行了一个 vbscript。此 VB 脚本在 StartMenu-->Programs 中创建另一个快捷方式。

问题是 Installshield 创建的快捷方式会自动“固定到开始”，因此在 Windows 8 的 Metro UI 上显示为磁贴，但 VBScript 创建的快捷方式是“未固定到开始”，并且只有在单击后才可见“ Metro UI 桌面上的所有应用程序”。

我可以在 VBScript 中进行哪些更改以使快捷方式固定启动。有没有我可以使用的 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:42:11.240

我这里没有 Windows 8，所以我不确定这是否可行，但试一试不会有什么坏处：

```
Set sa   = CreateObject("Shell.Application")
Set fldr = sa.NameSpace("C:\PATH\TO\SHORTCUT\FOLDER")
Set lnk  = fldr.ParseName("SHORTCUT.lnk")
For Each verb In lnk.Verbs
  If verb.Name = "Pin to Tas&kbar" Then verb.DoIt()
Next 
```

# php - 教义 2\. orm:schema-tool:update 。设置起始ID

> ID：12455245
> 
> 赞同：9
> 
> 时间：2012-09-17T08:03:04.987
> 
> 标签：php, doctrine-orm, fixtures

当我使用`./bin/doctrine orm:fixtures:load`示例数据填充表时，首先迁移设置自动增量表 ID，如 1、2、3、4、5 等...

在第二个`orm:fixtures:load`迁移命令之后，它会清除所有数据并设置 5、6、7、8、9 等 ID...

当我多次加载灯具时，如何将 AI id 计数器重置为 1？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-17T08:23:25.320

`$ app/console help doctrine:fixtures:load`

默认情况下，Doctrine Data Fixtures 使用 DELETE 语句从数据库中删除现有行。如果要改用 TRUNCATE 语句，可以使用 --purge-with-truncate 标志：

```
./app/console doctrine:fixtures:load --purge-with-truncate 
```

截断将重置自动增量。

更新

控制台命令适用于 Symfony，但仅使用 Doctrine 时应该是相同的：

```
./bin/doctrine orm:fixtures:load --purge-with-truncate 
```

更新#2关于抛出异常的评论

**如果您有外键**，则只能`AUTO_INCREMENT`通过常规 SQL 重置：

```
$connection = $this->getEntityManager()->getConnection();
$connection->exec("ALTER TABLE <tablename> AUTO_INCREMENT = 1;"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-21T04:52:09.270

在 Zend 2 中，我使用了下面提到的代码来截断自动增量值并将其重置为 1。在您的存储库中使用此代码。

```
// To delete all records
$queryBuilder = $this->createQueryBuilder('c');
$queryBuilder->delete();
$queryBuilder->getQuery()->execute();

//Reset table auto increment.
$tableName = $this->getClassMetadata()->getTableName();
$connection = $this->getEntityManager()->getConnection();
$connection->exec("ALTER TABLE " . $tableName . " AUTO_INCREMENT = 1;"); 
```

# javascript - JavaScript将css添加到动态表格单元格

> ID：12455251
> 
> 赞同：-1
> 
> 时间：2012-09-17T08:03:32.303
> 
> 标签：javascript, html, css

我想将我的一个表格单元格文本对齐我这样做：

```
var cell4 = row.insertCell(3);
cell4.css("text-align","right"); 
```

但我得到：

```
TypeError: cell4.css is not a function

cell4.css("text-align","right"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:07:14.167

尝试`$(cell4).css("text-align","right");`确保您在 jQuery 对象上调用 .css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:09:23.740

您必须使用 textAling 代替 text-align

```
cell4.textAlign = "right"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:11:24.560

试试这个

```
var cell4 = row.insertCell(3);
cell4.style.textAlign = "right"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T08:11:58.857

根据[w3schools。](http://www.w3schools.com/cssref/pr_text_text-align.asp), JavaScript 语法是对象。**样式**.textAlign="right"

# python - Python 正确的全局用法

> ID：12455253
> 
> 赞同：1
> 
> 时间：2012-09-17T08:03:43.450
> 
> 标签：python, global

我的代码目前看起来像：

```
import modules
class
functions
main code block (if __name__ == "__main__":) 
```

在整个程序中，我想添加一个计数器。我的想法是添加

```
global counter
counter = 0 
```

然后通过程序添加到计数器。问题是，当我开始在函数中添加计数器时，将全局命令放在哪里并不重要，它不会协调变量。

放置全局命令的正确位置在哪里（即程序的开始等）以及实现此目的的正确方法是什么（是使用全局命令还是通过使用类？

非常感谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T08:05:19.863

您需要将全局命令放在需要重新绑定全局变量的*每个*函数中。

你不需要把它放在只读取全局的函数中，或者改变值但不重新绑定它的函数中。你不需要把它放在函数之外。

整数不是可变的，因此您需要`global counter`在任何更新计数器的函数中。如果您使用了可变对象，那么您根本不需要使用`global`。例如

```
class Counter:
    def __init__(self):
       self.value = 0
counter = Counter()

def someFunction():
    counter.value += 1 
```

甚至制作`someFunction`类的方法。

`global`关键字（以及`nonlocal`更新版本的 Python）仅影响当前范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-03T16:08:19.050

在我看来，您必须使用 C 或其他允许真正的程序全局变量的语言进行编程。

不幸的是，Python 没有。正如两个回答者已经建议的那样，获得对共享命名空间的访问权限的最简单方法是将一个模块导入到需要访问共享计数器的每个其他模块中。

无论您使用`itertools.counter`@Jon_Clements 之类的还是@HVNSweeting 之类的简单（模块）全局整数，在很大程度上都无关紧要。重要的是，Python 中没有可供程序员使用的真正的全局命名空间。

甚至不要考虑修改内置插件！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:05:42.147

您需要将变量的每次访问声明为使用它的全局变量，而不是整个程序一次。基本上是这样的：

```
# module
globalVar = 0

def someFuncion():
    global globalVar
    globalVar += 1 # will add to global 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T08:11:52.273

你可以创建一个单独的模块，在那里初始化你的计数器，然后将它导入到你需要的地方。

myglob.py

```
#myglob.py
myvar = 0 
```

主文件

```
#main.py
import myglob

def addvarone():
    myglob.myvar += 1

if __name__ == "__main__":
    addvarone()
    print myglob.myvar 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T09:10:41.437

我会选择一个单独的模块（可能称为计数器）并放置如下内容：

```
from itertools import count

_counter = count(1) # assuming += 1

def get(): # or a more suitable name?
    return next(_counter)

# possibly add a 'peek' function? 
```

然后在其他模块中使用它而不是需要它......

```
import counter
import others...

def x(a, b, c):
    curcout = counter.get()
    # ...
pass 
```

# android - 配置 Cygwin Path 变量以查找 Android NDK

> ID：12455254
> 
> 赞同：4
> 
> 时间：2012-09-17T08:03:49.310
> 
> 标签：android, android-ndk, cygwin

我正在尝试将我的 PC 设置为将 Android NDK 用于我的项目。我已经安装了 Cygwin。我下载了Android NDK。假设我将 NDK 放在 PC 上的以下文件夹中：

```
c:\Android_ndk\<android ndk folder in here> 
```

如何配置 Cygwin 的路径以找到 ndk？我认为以下内容可能部分正确：

```
export PATH=$PATH:/cygdrive/C/Android_ndk/<android ndk folder in here> 
```

但是，我什至不确定我的斜线是否正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T08:23:48.253

转到 `..\cygwin\home\Eclipse`。您将找到一个名为`.bashrc`. 使用记事本打开它并在文件末尾添加

`export PATH=$PATH:/cygdrive/c/Android_ndk/<android ndk folder in here>`

如果您已正确完成所有操作`which ndk-build`，cygwin 终端上的 on发出命令将为您提供

`/cygdrive/c/Android_ndk/<android ndk folder in here>/ndk-build`

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T16:08:17.707

使用最新的 NDK r8b，您根本不需要 cygwin！从 Windows 命令行或 Eclipse 中使用**ndk-build.cmd 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T03:01:21.770

在 .bashrc 中添加这样的代码

```
 NDK=D:/android/android-ndk-r9
 PATH=${NDK}:$PATH
 ANT=C:/bin/apache-ant-1.9.2
 PATH=${ANT}/bin:$PATH
 export PATH NDK 
```

# jquery - Maple 浏览器中的 css3 属性

> ID：12455257
> 
> 赞同：2
> 
> 时间：2012-09-17T08:04:03.573
> 
> 标签：jquery, css, samsung-smart-tv

我正在为使用三星 Maple 浏览器的三星智能电视创建一个应用程序。

我需要我的 css 文件中的 background-size 和 webkit-background-size 属性，但它们在浏览器中不受支持，我不想使用 image 标记。

它们是用于旧版本 IE（如 css3pi 等）的 js 脚本，通过包含它们，您可以在应用程序中使用 css3 属性。他们也有 Maple 浏览器的脚本吗？或者我可以在 Maple Browser 中使用这些属性的任何其他方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:35:50.230

具体来说，CSS3PIE 使用特定于 IE 的行为文件，但大多数其他此类脚本使用特征检测，然后添加 Javascript 来模拟 CSS 文件中的效果。假设 Maple 支持 Javascript，[Modernizr可能是您的最佳选择。](http://modernizr.com/)如果没有，那么您可能不走运。

# jquery - Jquery 在（实时）与（绑定）上的最佳性能

> ID：12455262
> 
> 赞同：0
> 
> 时间：2012-09-17T08:04:27.140
> 
> 标签：jquery, performance, bind, live, jquery-on

我对 on use as the previous live 和 on use as the previous bind 的性能有疑问。

我的问题是，如果我们必须在 dom 中创建多个（比如说数百个）元素并在每个元素上添加一个事件，那么在性能方面什么是更好的选择：

*   在现场使用“on”一次
*   每次我们创建一个元素作为绑定时使用“on”

谢谢您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:34:10.830

我已经对 jsperf 进行了一些测试，看起来像“live”一样使用的“on”似乎比每个元素上像绑定一样使用的“on”更好。我还添加了一个测试，其中“on”用作“绑定”，但在插入结束时，直接在父级上关闭所有元素（如果我们点击一​​个元素，然后在回调中测试）。

[http://jsperf.com/jquery-on-as-former-live-vs-on-bind-on-element-vs-on-bi](http://jsperf.com/jquery-on-as-former-live-vs-on-bind-on-element-vs-on-bi)

测试表明 as 'live' 解决方案和 as 'bind' on parent à 在性能方面相当。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:09:19.383

live() 是邪恶的。如果您使用 jQuery 1.7+，请使用 on() 方法。检查[第一个谷歌结果](http://www.jquery4u.com/jquery-functions/on-vs-live-review/#.UFbaIqT9HyA)以获取 on() 与 live() 的解释和性能图，并了解 live() 为什么不好

# grails - Grails + ZK + Spring Security

> ID：12455269
> 
> 赞同：1
> 
> 时间：2012-09-17T08:05:08.107
> 
> 标签：grails, spring-security, zk

我一直在研究基于[Grails](http://grails.org/)的 Web 应用程序。对于 UI，我通过[ZKGrails 插件选择了](http://grails.org/plugin/zkui)[ZK](http://www.zkoss.org/)框架。

现在，当应用程序的某些部分完成时，我决定处理用户管理和安全相关的事情。为此，我安装了我通常这样做的[spring security core plugin 。](http://grails.org/plugin/spring-security-core)现在这就是我被卡住的地方。如何在作曲家中使用 spring 安全服务以及如何从 gsps 中调用方法？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:52:07.427

```
First of all you have to download following .jar

spring-security-acl-3.0.2.RELEASE.jar
spring-security-config-3.0.2.RELEASE.jar
spring-security-core-3.0.2.RELEASE.jar
spring-security-taglibs-3.0.2.RELEASE.jar
org.springframework.aop-3.0.2.RELEASE.jar
org.springframework.asm-3.0.2.RELEASE.jar
org.springframework.beans-3.0.2.RELEASE.jar
org.springframework.context-3.0.2.RELEASE.jar
org.springframework.context.support-3.0.2.RELEASE.jar
org.springframework.core-3.0.2.RELEASE.jar
org.springframework.expression-3.0.2.RELEASE.jar
org.springframework.transaction-3.0.2.RELEASE.jar
org.springframework.web-3.0.2.RELEASE.jar
org.springframework.web.servlet-3.0.2.RELEASE.jar

more information here 

http://books.zkoss.org/wiki/Small_Talks/2010/April/Making_Spring_Security_Work_with_ZK 
```

# javascript - 编辑 Javascript 时 PHPStorm 异常缓慢

> ID：12455277
> 
> 赞同：30
> 
> 时间：2012-09-17T08:05:27.880
> 
> 标签：javascript, performance, phpstorm

我正在使用 PHPStorm (5.0) 作为 PHP IDE，但目前我正忙于使用 Javascript 构建一些前端的东西。问题是：PHPStorm 变得**非常**慢。它在编辑 Javascript 文件时使用所有 494M 内存。除了我的 Javascript 文件之外，我没有任何活动文件。文件本身只有 191 行长。

*   我使缓存无效；
*   我重新启动了 PHPStorm / 我的电脑；
*   我关闭了所有 Javascript 检查。

*我能做些什么*来加快速度吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-09-24T18:57:15.573

如果您正在运行的项目具有非常大的代码库，IDE 的性能可能会大幅下降，因为默认情况下它会监视已加载项目的所有子目录中的所有文件。

通常，大型代码库不需要对大部分文件进行观察。您可以通过转到`File/Settings/Project/Directories`并排除您不需要在其中观看/搜索的任何文件夹来提高性能。

如果您确实需要在这些文件中搜索，您可以选择包括排除的目录并再次搜索。

此外，禁用任何您不使用的插件也可以帮助提高性能，但不如目录的东西那么多。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-01T15:21:02.387

修复 1\. 禁用拼写。文件->设置->编辑器->检查->拼写

修复 2\. 如果在 linux 上试试这个：在 /phpstorm/bin/ 你找到 - phpstorm.vmoptions - phpstorm64.vmoptions

在 phpstorm 中转到 help->about 并检查 JRE 是否为 64。如果 64 编辑 phpstorm64.vmoptions。

在末尾插入这两行。-Dawt.java2d.opengl=true -Dsun.java2d.xrender=false

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T08:24:26.653

如果性能问题将问题提交到[YouTrack](http://youtrack.jetbrains.com/issues/WI#newissue=yes)并[上传 CPU 快照](http://devnet.jetbrains.net/docs/DOC-1253)，则每个问题都是独一无二的，需要进行调查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-02T11:19:49.293

I had the same issue a while ago, here is what helped me to resolve it.

First make sure you exclude the node_modules folder in Settings -> Directories.

This change made it better for me, but did not resolve all the performance issues I had with JavaScript files.

1.  Uninstall PHPStorm
2.  Download and Install the JetBrains Toolbox ([https://www.jetbrains.com/toolbox/app/?fromMenu](https://www.jetbrains.com/toolbox/app/?fromMenu))
3.  Install PHPStorm via the JetBrains ToolBox
4.  Open the PHPStorm settings menu within the Toolbox ([Screenshot](https://i.stack.imgur.com/wxfvV.png))
5.  Increase the maximum heap size to 1024 MB
6.  Restart PHPStorm

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-21T23:59:29.250

我刚刚使用 JetBrains 完成了一个相当详细的过程。原来这是我的辅助显示器。我有一个 28 英寸的视网膜显示器。如果我在真正的视网膜中以默认分辨率 1920x1080 运行它，它运行良好。当我提高分辨率时，性能真的开始下降。截至目前（2016 年 6 月），这是一个悬而未决的问题在他们的系统中没有解决方案。

我还发现，如果您使用 .gitignore，您还应该在 IDE 中将这些文件和目录标记为“已排除”。这对较大的项目有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-11T17:25:09.823

PHPStorm 和所有 Jetbrains 产品在打开大文件（超过 2000 行代码）时速度很慢。您可能有一台好的 PC，但问题不在于 PC 或处理器。在相同的硬件 Eclipse 上，如果我们谈论速度，Netbeans 会好得多。只需阅读以下内容：[https ://intellij-support.jetbrains.com/hc/en-us/community/posts/206999515-PhpStorm-extremely-slow-on-large-source-files](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206999515-PhpStorm-extremely-slow-on-large-source-files)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-03T11:50:56.463

到了 2018 年，情况就完全不同了。PHPStorm 提供了一种更改 JVM 选项的简单方法。

1.  从主菜单中，选择帮助 | 编辑自定义 VM 选项
2.  将值更改`Xmx`为更高的值。默认值为`750m`。增加它对`1024m`我来说已经足够了。
3.  现在你的 PHPStorm 应该像往常一样开始工作了。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-07-17T15:16:38.407

在你拥有的任何操作系统（我在 Windows、Linux 和 Mac 上使用它）上，PHPStorm 总是感觉比本机应用程序慢，只是因为 Java 更慢。我必须做很多调整才能让它感觉更快，唯一真正提高速度的是SSD硬盘。

尝试稍微调整一下`vmoptions`文件，您将获得更好的性能，但不要指望它表现得像原生应用程序。对于简单的文件编辑（不是项目），只需使用 Sublime Text、Vim 等编辑器即可。

# algorithm - 顺序遍历、前序遍历和后序遍历的最常见用例

> ID：12455282
> 
> 赞同：3
> 
> 时间：2012-09-17T08:05:48.343
> 
> 标签：algorithm, tree, binary-tree, binary-search-tree

我知道的定义：

1.  预购遍历
2.  按顺序遍历
3.  后序遍历

但我想知道 BST(Binary search tree) 的上述三种不同类型的遍历最常见的用例是什么。

# android - 点击地图标记后显示自定义对话框

> ID：12455290
> 
> 赞同：1
> 
> 时间：2012-09-17T08:06:06.897
> 
> 标签：android, google-maps, dialog

点击地图标记后，我试图在我的地图应用程序中显示自定义对话框。这是我根据 Android 开发人员指南的 onTap(int index) 代码，它不起作用。这里有什么问题？请帮忙 ！

```
@Override
    protected boolean onTap(int index) {
        // TODO Auto-generated method stub
          OverlayItem item = mOverlays.get(index);
          Context mContext = getApplicationContext();
          Dialog dialog = new Dialog(mContext);
          dialog.setContentView(R.layout.marker_view);
          dialog.setTitle(item.getTitle());
          TextView textAddress = (TextView) dialog.findViewById(R.id.tv_marker_address);
          TextView textPhone = (TextView)  dialog.findViewById(R.id.tv_marker_phone);
          textAddress.setText(item.getSnippet());
          ImageView image = (ImageView)  dialog.findViewById(R.id.marker_image); 
          dialog.show();
          Button btn = (Button)dialog.findViewById(R.id.btn1);
          btn1.setOnClickListener(this);
          return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:23:34.170

也许你需要先膨胀布局？

# objective-c - 如何找到被点击的视图的位置（使用 GMGridView 库）

> ID：12455291
> 
> 赞同：2
> 
> 时间：2012-09-17T08:06:24.503
> 
> 标签：objective-c, xcode, ipad, uibutton, gmgridview

我已经在我的程序中实现了 GMGridview。我在 github 上找到了这段代码。单击[此处](https://github.com/gmoledina/GMGridView) 我的程序是我的业务产品的网格视图。每个产品都是滚动视图中的自定义 UIButton。我正在寻找获取每个按钮（即产品）位置的方法，但每次我点击不同的按钮时，它仍然给我相同的位置。我不明白为什么会这样。它应该检测我单击的按钮。

我使用此代码来获取位置：

```
 CGPoint myPoint = CGPointMake (senderButton.frame.origin.x, senderButton.frame.origin.y); 
 CGPoint angelPoint= [senderButton.superview convertPoint:myPoint toView:self.view]; 
```

我也研究了这个问题的一些解决方案，但在这种情况下它对我不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:32:59.610

以网格方式创建按钮并为每个按钮设置标签：

这里只有 4 个按钮

```
CGFloat xPoint = 0.0;
    for (int t = 0; t < 4; t ++) {
        UIButton * button = [[UIButton alloc]initWithFrame:CGRectMake(xPoint,0.0,100.0,50.0)];
        [button setTag:t];
        [button addTarget:self action:@selector('your Selector')forControlEvents:UIControlEventTouchUpInside];
        [YOURVIEW addSubview:button];
        xPoint += 100.0;
    } 
```

然后从视图中提取每个按钮及其标签：

```
 for(int j = 0;j < 4;j++)
    {
        UIButton * removeButton = (UIButton *)[self.view viewWithTag:j];
        NSLog(@"Frame : X:%.2f Y:%.2f Width:%.2f Height:%.2f",removeButton.frame.origin.x,removeButton.frame.origin.x,removeButton.frame.size.width,removeButton.frame.size.height);

        // you can get access each button's frame here...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:27:54.577

通常，不需要对点击事件的坐标进行计算即可知道您点击了哪个按钮。事实上，这个`senderButton`论点正是在告诉你这一点。在构建网格时，您可能会考虑为每个按钮关联一个[`tag`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/tag)值（例如，序列号），然后在您的操作处理程序中使用该标记来识别更“逻辑”级别的按钮：

至于你原来的问题，你的代码似乎很好。我看到的唯一潜在问题是`self.view`. 它确定了哪个视图？您是否尝试过通过`nil`以便获得`UIWindow`空间中的坐标？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:55:17.357

您可以在 GMGridView 中编辑该`tapGestureUpdated`方法，以便它将您的点击位置（在您的按钮坐标中）传递给您的委托方法：

GMGridView.h：

```
#pragma mark Protocol SCLGridViewActionDelegate
@protocol SCLGridViewActionDelegate <NSObject>

@required
- (void)GMGridView:(SCLGridView *)gridView didTapOnItemAtIndex:(NSInteger)index atLocation: (CGPoint) location;
@end 
```

GMGridView.m:

```
#pragma mark tapgesture
- (void)tapGestureUpdated:(UITapGestureRecognizer *)tapGesture
{
       CGPoint locationTouch = [_tapGesture locationInView:self];
       NSInteger index = [self.layoutStrategy itemPositionFromLocation:locationTouch];

       if (index != kInvalidPosition) 
       {
            CGPoint locationInItem = [_tapGesture locationInView:[self cellForItemAtIndex:index]];
            [self.actionDelegate GMGridView:self didTapOnItemAtIndex:index atLocation:locationInItem];
       }
} 
```

**编辑**

如果您处于 gridView 是由视图控制器管理的视图的一部分的场景中，请确保您的视图控制器符合`SCLGridViewActionDelegate`并将您的视图控制器设置为操作委托：您的视图控制器`yourGridView.actionDelegate = self`在哪里`self`。然后实现了`didTapInItemAtIndex`在您的视图控制器中实现的方法。

# actionscript-3 - 使用动作脚本动态添加组件

> ID：12455293
> 
> 赞同：1
> 
> 时间：2012-09-17T08:06:47.340
> 
> 标签：actionscript-3, apache-flex

刚开始学习Flex。但我对基本代码感到震惊。我正在尝试检查如何通过动作脚本将组件（比如按钮）添加到应用程序容器。但我看不到输出中的按钮。下面是我的代码，

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
             creationComplete="init()">
<fx:Script>
    <![CDATA[

             import mx.controls.Alert;

             import spark.components.Button;
             import spark.layouts.BasicLayout;

             private function init():void{
                 var bl:BasicLayout = new BasicLayout();
                 var app:Application = new Application();
                 var button1:Button = new Button();
                 var button2:Button = new Button();

                 button1.label ="Button one";
                 button1.x = 100;
                 button2.label = "Two";
                 button2.x = 30;
                 layout = bl;
                 addChild(button1);
                 addChild(button2);

             }
    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations> 
```

我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:12:55.450

这段代码甚至应该抛出一个运行时错误，因为你不能`addChild`在这里使用。
从 Flex 4 开始，有一个新的组件集（称为`Spark`）。向 Spark 容器添加视觉项目时，必须使用该`addElement`方法。既然`s:Application`是 Spark 容器，你也应该在这里做。因此，只需在您的代码中替换`addChild`为`addElement`，它就会起作用。

您可能会问：**如果我不能使用它，为什么“addChild”仍然存在？**
嗯，答案是：遗产。所有 Flex 组件（即 mx 和 Spark）都继承自[UIComponent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html)，它实现`addChild`了 Flex 框架的方法（`addChild`实际上是[DisplayObjectContainer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html)类的纯 ActionScript 方法）。`addElement`做了一些额外的事情（我不会在这里太技术化），这就是你不能再使用的原因`addChild`。但是`addChild`仍然存在（继承自`UIComponent`）并且会抛出一个错误，告诉您您不能使用此方法。

这是[SkinnableComponent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/SkinnableComponent.html)的相关代码：

```
override public function addChild(child:DisplayObject):DisplayObject
{
    throw(new Error(resourceManager.getString("components", "addChildError")));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:19:51.290

我对 BasicLayOut 不熟悉，但我认为如果您保持代码简单，您可以看到该按钮：

```
 private function init():void{
            // var bl:BasicLayout = new BasicLayout(); 
            // var app:Application = new Application();
// 1\. Create button
             var button1:Button = new Button();
             var button2:Button = new Button();
// 2\. customize button
             button1.label ="Button one";
             button1.x = 100;
             button2.label = "Two";
             button2.x = 30;
// 3\. add button into the container, 'this' is Applciation
           //  layout = bl;
             addElement(button1); // addChild for Flex3
             addElement(button2);
         } 
```

修改你的代码再试一次，祝你好运！

# winforms - Visual Studio 安装项目 - 安装时包含 .reg 文件

> ID：12455296
> 
> 赞同：2
> 
> 时间：2012-09-17T08:06:55.783
> 
> 标签：winforms, visual-studio-2010, .net-3.5, registry, setup-project

我正在使用安装项目创建 WinForms 应用程序的 msi。我正在努力解决的最后一件事是在注册表中添加条目。

我必须在注册表中进行一些更改（或创建）一些条目以嵌入 SAP。客户端将向我发送一个我必须在安装时使用的 reg 文件。

谁能帮我解决这个问题？是否可以使用 reg 文件或者我必须通过代码（自定义操作）来完成？

这是我第一次必须创建这样的设置，所以请耐心等待。我试图搜索它，但还没有找到令人满意的答案。或者至少，我认为我没有...

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:13:30.673

VS Setup 项目有一个完整的注册表部分。只需选择解决方案资源管理器顶部的注册表按钮。然后，右键单击“目标机器上的注册表”节点，然后选择“导入...”。

这将打开一个文件打开对话框，查找`.reg`文件。选择您提供的文件，您就完成了。

# c++ - 从多线程程序中安全删除对象

> ID：12455297
> 
> 赞同：0
> 
> 时间：2012-09-17T08:07:11.463
> 
> 标签：c++, multithreading, thread-safety, mutex, delete-operator

**免责声明：Boost 和 C++11 都不允许。**

我有一个程序，我在其中创建了一个实例，`Foo`并在多个线程中对其进行操作。然后我想安全地删除它，这样那些线程就不会陷入分段错误。

`Foo`每次线程函数运行时，我都添加了一个互斥锁成员并将其锁定。为了不同的线程不会相互冲突。

```
class Foo
{
    public:
        pthread_mutex_t mutex;
};

void* thread ( void* fooPtr )
{
    Foo* fooPointer = (Foo*) fooPtr;

    while ( 1 )
    {
        if ( fooPointer )
        {
            pthread_mutex_lock ( &fooPointer->mutex );
            /* some code, involving fooPointer */
            pthread_mutex_unlock ( &fooPointer->mutex );
        }
        else
        {
            pthread_exit ( NULL );
        }
    }
} 
```

现在我想`foo`安全地删除，所以线程中不会发生错误。我添加了一个析构函数`Foo`：

```
Foo::~Foo()
{
    pthread_mutex_lock ( &mutex );
} 
```

现在，在所有线程完成当前循环之前，不会删除该对象。

问题是：删除实例后互斥锁会被解锁吗？删除实例后所有线程都会结束吗？我敢打赌答案是`no`。所以我改变了析构函数，但现在它似乎是线程不安全的：

```
Foo::~Foo()
{
    pthread_mutex_lock ( &mutex );
    pthread_mutex_unlock ( &mutex );
} 
```

线程函数可以在`pthread_mutex_unlock ( &mutex );`对象被删除之后和之前锁定互斥锁并开始操作实例吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T08:52:14.140

让我们从你的问题开始：

> 我有一个程序，我在其中创建了一个 Foo 实例，并在多个线程中对其进行操作。然后我想安全地删除它，这样那些线程就不会陷入分段错误。

您不能删除正在使用的对象。没有多少互斥锁可以解决这个问题。

> 我已经向 Foo 添加了一个析构函数

这仅在`Foo`被删除时运行。不过，它的内容并不重要：在其他线程仍在使用 Foo 时调用 dtor 是错误的。

> 我希望在删除实例时线程安全退出。这怎么可能？

嗯，这是正确的问题。我可以编写很多代码供您使用，但这些代码只是`boost::weak_ptr`. 所以，我不会打扰。只需自己获取升压代码。

> 不允许升压。

那你为什么要在 StackOverflow 上问呢？这基本上是相同的许可证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:50:07.827

这里缺少的是指示线程处理何时完成的条件。删除特定对象实例不是一个好的条件。您还没有向我们展示删除对象的位置。如果我们可以在代码中看到这一点，那么额外的上下文将会很有帮助。

我建议不要删除对象，而是在对象上设置一个标志（例如 bool active()）。然后所有线程都会检查这个标志，当它指示停止处理时，线程将停止。在当前删除 Foo 对象的位置设置此标志。然后一旦所有线程都停止，删除 Foo 对象。

如果您删除该对象并期望能够获得它的互斥锁，您可能会遇到崩溃，或者至少是不稳定的行为，因为互斥锁是 Foo 的成员，并且它将与对象一起被销毁。

这是我的意思的一个例子：

```
class Foo
{
    public:
        void lockMutex();
        void unlockMutex();
        // Active should be mutex protected as well
        // Or you could consider using a pthread_rwlock
        bool active() {return active_;}
        void setActive(bool a) {active_ = a;}
    private:
        pthread_mutex_t mutex;
        bool active_;
};

void* thread ( void* fooPtr )
{
    Foo* fooPointer = (Foo*) fooPtr;

    while ( 1 )
    {
        if ( fooPointer->active() )
        {
            fooPointer->lockMutex();
            /* some code, involving fooPointer */
            fooPointer->unlockMutex();
        }
        else
        {
            pthread_exit ( NULL );
        }
    }

    // somewhere else in the code
    fooPointer->setActive(false);
} 
```

Foo::setActive(true) 必须在构造函数中调用，或者在创建对象时调用。一旦线程停止，最有可能在 pthread_join() 完成之后，应该删除 Foo 对象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T09:20:02.570

您发布的代码不正确，因为 c++ 对象被步骤破坏：

```
obj->Foo::~Foo();

free memory //maybe delete if allocated by new 
```

所以你的来源只是保护析构函数而不是释放内存本身。

也许下面的源代码可以帮助你，它简单粗暴，但我认为它可以工作

```
 class Foo 
    {

       public:
         void dosomething() {}
    };

    template<typename T>
    class Protect
    {   
    public: 
        struct auto_lock {
            auto_lock(pthread_mutex_t& mutex)
                : _mutex(mutex)
            {
                pthread_mutex_lock ( &_mutex );
            }
            ~ auto_lock() 
            {
                pthread_mutex_unlock ( &_mutex );
            }
            pthread_mutex_t& _mutex;
        };

        Protect(T*& p): _p(p) {}
        T* get() { return _p; }

        void lock() { pthread_mutex_lock ( &_mutex ); }
        void unlock() { pthread_mutex_unlock ( &_mutex );}
        pthread_mutex_t& getlock() { return _mutex; }

        void safe_release() { 
            auto_lock l(_mutex);
            if (_p != NULL)  {
                delete _p;
                _p = NULL;
            }
        }
    private:
        T*& _p;
        pthread_mutex_t _mutex;
    };

void* thread ( void* proPtr )
{
    Protect<Foo>* proPointer = (Protect<Foo>*) proPtr;

    while ( 1 )
    {
        Protect<Foo>::auto_lock l(proPointer->getlock());
        Foo* fooPtr = proPointer->get();
        if ( fooPtr )
        {
            fooPtr->dosomething();
        }
        else
        {
            pthread_exit ( NULL );
        }
    }
} 
```

# visual-studio-2010 - 如何在庞大的解决方案中通过 ServiceContract 找到 WCF 主机/客户端？

> ID：12455300
> 
> 赞同：0
> 
> 时间：2012-09-17T08:07:14.393
> 
> 标签：visual-studio-2010, wcf

我有一个非常大的 VS2010 解决方案，它对我来说是全新的，在调试时我经常需要找到某个特定 ServiceContract 的主机/客户端。那可能吗？ReSharper 可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:17:39.667

1 是的，您可以`Resharper`使用`find your contract`使用。（只需点击）

2 你也可以安装`Productivity Tool`，她提供了很好的功能。

链接：http: [//visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)

3 您也可以`Call Hierrachy` 在 Visual Studion 中右键单击使用

# php - 在同一域上切换选项卡时 PHP 会话重置

> ID：12455301
> 
> 赞同：4
> 
> 时间：2012-09-17T08:07:19.090
> 
> 标签：php, session

我有一个带有私人后端 (www.mysite.com/admin) 的网站 (www.mysite.com)

当我在管理区域向站点添加内容并在同一浏览器窗口中的选项卡之间来回切换以查看我正在编辑的内容时，我的会话即将过期/结束/终止，我被重定向到再次登录页面。

我之前在许多网站（这是我自己制作的 CMS）上多次使用相同的代码，没有问题。我唯一能想到的是这个特定的网站托管在不同的 Web 服务器上，这可能是 php.ini 设置或服务器配置的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:17:01.527

这可能是多方面的结果，但我的第一反应是检查会话 cookie 是否很快过期。有时服务器标头可能会更改到期值。您可能还想检查服务器发送的缓存标头。如果您在管理区域使用异步功能，则服务器可能会以某种方式更改缓存文件的到期时间，这可能会影响到这一点。

我渴望看到这个问题的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:32:19.517

需要检查的几件事：

*   `session.cookie_lifetime`设置 - 可能太短；0 是默认值并保留 cookie 直到浏览器关闭
*   `session.cookie_path`设置 - 你会希望这是 '/'
*   会话存储 - 确保正在写入会话数据。
*   `session_close()`如果您的会话存储在数据库中，则显式调用。这将确保在您的对象和数据库资源被破坏之前编写它们。
*   如果通过任何类型的代理提供服务，请检查是否有任何更改的标头信息。
*   如果缓存，请检查您的动态页面（需要会话）是否由您的 Web 应用程序而不是缓存提供服务。
*   如果使用本地 /etc/hosts 进行测试，请先清除 cookie，以便新服务器的 cookie 是新鲜的并且不会冲突。
*   在您的浏览器中确认 cookie 确实被存储。也许它实际上并没有回到标题中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:21:16.897

你检查过你的浏览器cookies吗？（实际的客户端？）还是用另一个浏览器试试运气？听起来可能有点奇怪，但我遇到了类似的问题，就我而言，它与这些 cookie 有关。由于您的奇怪问题，可能值得弄清楚。您可能知道 phpsession 值存储在该 cookie 中，域也是如此。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T12:22:42.250

From experience, I can tell you a few things.

First, sessions need to be started with

```
session_start(); 
```

At the top of every page you want to use sessions.

Next, to save session data, you need to call another function to tell php that you are saving stored data. That function is

```
Session_write_close(); 
```

That function is needed on the bottom of the page when you are finished writing data to a session and want it saved for later use.

With those two combined, that should allow you to properly write to a session, save the data you entered into it, and access it later on your site.

Good luck.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T10:32:39.433

可能有几个原因。由于没有提供有关该站点的代码或详细信息，我假设问题可能出在您使用`htpasswd`. 如果您正在使用`htaccess`身份验证，那么您的会话将被破坏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T06:48:17.907

[看了这个题目](https://stackoverflow.com/questions/5561540/custom-php-ini-file-in-subfolder-causing-issues-with-sessions-variables)，问题就找到了。

我在根目录中有一个自定义的 php.ini，显然它干扰了 $_SESSION。我不知道为什么，但删除后一切正常。

起初，问题似乎是在几个浏览器选项卡中打开位于不同子文件夹中的页面，但它缩小到子文件夹问题以及 $_SESSION 无法通过它们访问的事实。

我要感谢所有花时间帮助我解决这个问题的人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-22T20:09:42.440

我以前遇到过这样的问题。我刚刚从本地主机上传了一个站点到远程主机，我还没有更改名称服务器。托管公司为我提供了一个临时网址，以便我可以查看我的网站。问题是这个url就像这样[https://server_name.grserver.gr:8443/sitepreview/http/my_site.gr/](https://server_name.grserver.gr:8443/sitepreview/http/my_site.gr/)，结果是任何浏览器都没有接受会话cookie，因为我没有SSL 证书，因此会话根本不起作用。我浏览了一下 plesk 面板，发现了另一个使用 http 协议的临时 url，这一切都很好。因此，如果您使用 https，请尝试检查您的 ssl 证书是否有问题（例如，如果它已过期）。你说问题发生在你登录管理页面时，

# drupal-7 - SUM 在视图中是否有效

> ID：12455303
> 
> 赞同：0
> 
> 时间：2012-09-17T08:07:23.260
> 
> 标签：drupal-7, sum, drupal-views

我想在视图查询中使用 SUM，但是当我查看生成的查询时，我在任何地方都看不到 SUM。你知道 SUM 是否应该工作吗？

![在此处输入图像描述](../Images/c7d63e678d1d37c04965ed8650f4aa60.png)

![在此处输入图像描述](../Images/883c2f1f44f4278929fdb9913fb5517d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:32:51.503

您应该使用[Views php](http://drupal.org/project/views_php)模块，该模块为您提供了一个全局 php 字段（或过滤器），可以完成您想要的操作，一些变量可用，例如 $row，$views ...，

有时视图不提供我的要求，我使用这个模块来实现我的自定义需求。（有关它的更多信息，请`README.TXT`在模块中阅读）

您也可以使用[omputed_field](http://drupal.org/project/computed_field)模块。这是计算域的另一个很棒的模块

# java - Java并发设计

> ID：12455307
> 
> 赞同：2
> 
> 时间：2012-09-17T08:08:07.827
> 
> 标签：java, concurrency

这是我想做的事情：

随时启动多个线程，每个线程运行5s左右。当一个线程运行时，其他线程必须等待。当正在运行的线程结束时，最新的线程开始运行，其他等待的线程停止。当然也会有这样的情况：一个线程启动后，就没有其他线程了。

我尝试使用 FutureTask，但失败了。这对我来说似乎太复杂了。谁能给我一些想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T08:12:28.903

您可能想看看[单线程 executor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor())，它将从任务队列中获取您的任务并按顺序调用它们。

如果您稍后决定添加一些并发性，使用此类会更方便

# bash - 请帮助我了解 grep 在 unix 中的用法，无法识别小写/大写

> ID：12455310
> 
> 赞同：0
> 
> 时间：2012-09-17T08:08:15.523
> 
> 标签：bash, unix, grep

我希望我的 shell 只能找出引用中的模式，但结果也返回了类似`"MSGxxxxx"` Anybody who can give me some advice?

这是我的脚本：

```
if egrep -e 'Msg|duplicate|deadlock|status = -|terminated due to disconnect' MYFILE.log
 then
    echo "I found something in your RAW data."    
  else
    echo "Nothing found!"
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:14:15.197

如果您希望模式与行尾匹配，请使用`$`. 如果您希望它与行首匹配，请使用`^`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:17:22.510

使用该`-w`标志以仅选择那些包含构成整个单词的匹配项的行。

```
if egrep -w -e 'Msg|duplicate|deadlock|status = -|terminated due to disconnect' file
then
    echo "I found something in your RAW data."    
else
    echo "Nothing found!"
fi 
```

或者，使用`\b`如下所示的单词边界：

```
if egrep -e '\bMsg\b|duplicate|deadlock|status = -|terminated due to disconnect' file
then
    echo "I found something in your RAW data."    
else
    echo "Nothing found!"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:17:59.573

您正在寻找 grep`-i`不区分大小写匹配的选项。

# svg - 压缩 SVG 或将 SVG 转换为 SVGz

> ID：12455333
> 
> 赞同：18
> 
> 时间：2012-09-17T08:09:39.343
> 
> 标签：svg, svgz

有没有办法压缩 SVG 文件？

有人告诉我 SVGz 是最好的方法，尽管我还没有找到一个转换器来转换我的 SVG 文件。

或者有没有可以导入 SVG 文件并导出到 SVGz 的应用程序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T08:11:49.980

它使用 GZip：

[http://en.wikipedia.org/wiki/Scalable_Vector_Graphics#Compression](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics#Compression)

如果您在 Web 服务器上托管 SVG 文件，并且有一个正确配置的 Web 服务器，那么您的 Web 服务器将已经压缩发送到客户端的文件，因此不需要将 SVG 压缩为 SVGz（实际上是不需要的）。

要测试您的 Web 服务器是否配置正确，请参阅：[如何判断我的服务器是否在提供 GZipped 内容？](https://stackoverflow.com/questions/9140178/how-can-i-tell-if-my-server-is-serving-gzipped-content)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-15T16:36:59.103

我知道这是一篇较旧的帖子，但我认为根据您的要求实际列出可以以 svgz 格式保存的应用程序可能会有所帮助。Adobe Illustrator 的 Save As 将允许您保存为 svgz 格式，以及[Inkscape](http://inkscape.org/)、[7Zip](http://www.7-zip.org/)，如果您是命令行的粉丝并使用 Windows，这是一个相当简单的[GZip for Windows](http://gnuwin32.sourceforge.net/packages/gzip.htm)解决方案。

# android - 在 webview 中显示谷歌地图而不是使用通常的 mapView 是否存在性能损失

> ID：12455335
> 
> 赞同：1
> 
> 时间：2012-09-17T08:09:46.830
> 
> 标签：android, ios, map, webview, native

我使用`Titanium`，它有一个基于 iOS 和 Android 的本地特定地图构建的地图视图。

`native map`使用 a和`opening a webView with google maps loaded inside`.有什么区别？

本地地图和从 web 加载的 web 视图之间的性能差异会是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T15:56:53.993

根据我们的经验，MapKit（即 Native）比使用包含 Google Maps 的 UIWebView 更快、更流畅。启动速度较慢，因为所有地图渲染代码都必须从 google 的服务器下载，并且在浏览器中渲染速度要慢得多。理论上，在浏览器中运行的应用程序可以像 Native 一样快速流畅，但实际上这种情况很少发生。

即使在 iPhone 4S 上，本机和浏览器之间的差异也很明显。Android 甚至更慢，因为除了可能是最新的设备之外，Web 浏览器不使用硬件加速。

如果您有选择，请始终选择本地人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:37:08.417

使用 a`WebView`而不是原生地图 SDK 时会出现性能损失。不过，这并不是那么重要（在速度更快的手机上几乎不明显）。

使用原生 API 的主要优势在于它们与传感器和 GPS 等移动功能的集成更加紧密。但缺点是原生 API 不会支持 Web API 的所有功能，并且不会像 Web API 那样频繁地更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T07:36:36.777

回复很晚，但为了给我 2 美分，性能差异来自地图管理方式。使用 WebView，您可以将 javascript API 代码用作常规网页，但由于 android 浏览器的不同，它似乎是“降低”的一组性能，因为它不像标准桌面浏览器那样响应迅速。有人认为这个问题来自移动数据连接中的有限带宽。相反，本机 google api 不使用 javascript 代码，而是直接下载地图图块并显示在屏幕上。这使应用程序更快。获取地图图块很容易，但由于 Google TOS 是禁止的。只有与谷歌达成协议，并且显然谷歌官方应用程序有它，你才能做到这一点......

# javascript - 在 jqGrid 中对日期列进行排序

> ID：12455337
> 
> 赞同：2
> 
> 时间：2012-09-17T08:10:05.470
> 
> 标签：javascript, jquery, jquery-ui, jqgrid

我正在使用[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=start)在用户界面中显示记录，并且我想对日期列进行排序。它以 .的形式返回我的日期`Sat, Sep 1, 01:41 AM`。我怎么能用 jqGrid 做到这一点？

该列的我的 Colmodel 是：

```
{name:'transactiontime', index:'transactiontime',  sorttype:'text', align:"right"}, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:15:12.797

尝试以下操作`formatoptions`：

```
{name: 'transactiontime', sorttype: 'date', align: "right", formatter: 'date',
    formatoptions: {srcformat: 'ISO8601Long', newformat: 'D, M d, H:i A'}} 
```

请参阅[演示](http://www.ok-soft-gmbh.com/jqGrid/simplelocalgridwithiso8601long1.htm)，这是[对答案](https://stackoverflow.com/a/6477167/315935)中演示的简单修改。

这`srcformat`可能取决于数据的输入格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:03:01.500

使用`sorttype:'date'`和 datefmt：

`datefmt`控制`sorttype:date`（当 datetype 设置为 local 时）和 editrules {date:true} 字段的格式。它确定该列的预期日期格式并使用类似 PHP 的日期格式。当前为“/”、“-”和“。” 支持作为日期分隔符。有效格式为：

*   y,Y,yyyy 四位数年份
*   YY, yy 两位数年份
*   m,mm 几个月
*   d,dd 几天。

当然，您也可以在服务器端进行排序，如果它更轻松的话。您可以在服务器端使用`sidx`and`sord`字段。

# java - 进行查找并编写查询以从 sql server 获取数据

> ID：12455340
> 
> 赞同：1
> 
> 时间：2012-09-17T08:10:29.467
> 
> 标签：java, sql-server, database, jdbc

在使用 Tomcat 作为服务器并使用 Derby 作为数据库时，我进行了查找并执行了如下查询：

```
 Context initContext = new InitialContext();
        Context envContext = (Context)initContext.lookup("java:comp/env");
        DataSource ds = (DataSource)envContext.lookup("jdbc/PollDatasource");
        Connection connection = ds.getConnection();
        // write the query that tells the current weight of actor
        String currentWeightQuery = "SELECT " + justPolled + ",total FROM pollresult";
        PreparedStatement currentWeight = connection.prepareStatement(currentWeightQuery);
        ResultSet cwSet = currentWeight.executeQuery(); 
```

现在我使用*Microsoft SQL Server 2005*并且必须从 java 桌面应用程序查询数据库。我需要做什么来查询 sql server 2005 ？我已经加载了 sqlserver-jdbc 驱动程序并连接到数据库，但我不知道如何从数据库中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:57:24.777

在上面的最后一行代码之后试试这个：

```
while (cwSet.next()) {
    String string = cwSet.getString(1); // instead of the 1 you can also use the name of the column as a String
    int i = cwSet.getInt("total"); //could also have used getInt(2)
    // etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:33:36.213

现在您需要迭代 ResultSet：[从结果集中检索和修改值](http://docs.oracle.com/javase/tutorial/jdbc/basics/retrieving.html)。

ResultSet 实际上是 SQL Server 中游标的包装器。在这种情况下，您可能只会得到一个结果。您需要使用 java.sql.ResultSet 的一种 getter 方法从查询中检索值，具体取决于查询结果的预期数据类型。作为方法参数，您可以使用列名作为字符串 ("")，或者使用查询中列的序列号，从 1 开始。（一个！）

# php - Zend_Cache 从命令行保存并从浏览器访问

> ID：12455343
> 
> 赞同：1
> 
> 时间：2012-09-17T08:10:46.733
> 
> 标签：php, zend-framework

可能是我，这非常容易，但我想不出办法。我有在命令行中运行的脚本，它使用 Zend_Cache 保存缓存

```
$frontendOptions = array(
            'lifetime' => NULL,
            'automatic_serialization' => true
        );

$backendOptions = array(
            'cache_dir' => "/home/tmp/cache"
        );

$cache = Zend_Cache::factory('Core',
                    'File',
                    $frontendOptions,
                    $backendOptions);
$vars = Array("id1" => "12121", "id2" => "2232");
$cache->save($vars, "p_11"); 
```

我可以从命令行访问保存的缓存：

```
$cache->load("p_11"); 
```

在上述两种情况下，我都有使用 php-cli 在命令行中运行的 app.php 文件。

现在，我想使用浏览器访问 p_11 缓存，例如[http://mytestserve.lan/test_cache.php](http://mytestserve.lan/test_cache.php)

我已经用上面的缓存工厂创建了对象。所有参数与上述相同。但是，当我尝试加载缓存 p_11 时，我没有从命令行设置变量。什么地方出了错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:03:25.897

当您第一次通过命令行访问缓存文件时，它可能是以您作为所有者和某些访问掩码（可能是 0600）创建的。

但是当您尝试通过浏览器打开文件时，您将充当完全不同的用户（例如，www 或 apache）。只是也许 apache 用户无法访问该文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T02:48:18.687

我同意@akond 的观点，您可能应该尝试使用后端配置`cache_file_umask`的`cache_file_perm`选项：

```
$backendOptions = array(
    'cache_dir'        => "/home/tmp/cache",
    'cache_file_umask' => 0775, 
    'cache_file_perm'  => 0775); 
```

# php - 如何在php函数中使用表单值？

> ID：12455351
> 
> 赞同：1
> 
> 时间：2012-09-17T08:11:27.420
> 
> 标签：php, mysql, html

我是 php 的新手。我已经使用 php 编写了自动完成文本框，并且我有一个提交按钮。我没有给出表单操作。

这是我用于自动完成文本框的 HTML 表单代码。这个自动完成文本框选择值

```
<form  method="post" autocomplete="off">
    <p>
        <b>Theater Name</b> <label>:</label>
        <input type="text" name="theater" id="theater" />
    </p>
    <input type="submit" value="Submit" />
</form> 
```

我有另一个 php 函数，它根据 where 子句检索值。在 where 语句中，我想使用表单中的选定值。

例如：从剧院名称 =“表单值”的剧院中选择地址

如何在php函数中使用表单值？谁能帮助我？

```
 <?php
$con = mysql_connect("localhost","root");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("theaterdb", $con);

$result = mysql_query("SELECT * FROM theter
WHERE theater_name="<!-- This could be value that we get after clicking submit button-->);

while($row = mysql_fetch_array($result))
  {
  echo $row['thearer_name'];
  echo "<br />";
  }
?> 
```

提前致谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:13:27.377

您可以从中获取值`$_POST`by `$_POST['theater']`。

并且注意，你不应该直接在 sql 中使用这个值，你需要对它进行转义以防止 sql 注入。

```
$theater = mysql_escape_string($_POST['theater']);
$result = mysql_query("SELECT * FROM theter WHERE theater_name='$theater'"; 
```

最后，您可以看一下[PDO](http://jp2.php.net/manual/en/book.pdo.php)，这是旧`mysql_*`功能的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:16:03.977

首先，尝试使用 mysqli 而不是 mysql (mysqli_query, mysqli_connect)。使用它有许多安全/速度优势，并且具有几乎完全相同的功能。

虽然上述答案提到使用 $_POST['theater'] （您输入的名称），但请务必在将您的帖子放入查询之前对其进行转义。

```
$con = mysqli_connect("localhost","root", "YOUR PASSWORD HERE", "YOUR DATABASE HERE");
if (!$con)
  {
  die('Could not connect: ' . mysqli_error());
  }

 // No need for this, please see the updated mysqli_connect as the 4th parameter selects your DB
 //mysqli_select_db("theaterdb", $con);

// Please notice the last parameter of the mysqli_real_escape_string is your Input's POST
$query = "SELECT * FROM theater WHERE theater_name=".mysqli_real_escape_string($con, $_POST['theater']);

$result = mysqli_query($con, $query);

while($row = mysqli_fetch_array($result))
  {
  echo $row['thearer_name'];
  echo "<br />";
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:19:42.990

首先，将您的提交按钮代码更改为以下内容：

```
<input name="submit" type="submit" value="Submit" /> 
```

现在，这是您应该用于查询的代码：

```
<?php
if (isset($_POST['submit'])) {
    $con = mysql_connect("localhost","root");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("theaterdb", $con);

    $result = mysql_query("SELECT * FROM theater
    WHERE theater_name='" . mysql_real_escape_string($_POST['theater']) . "'");

    while($row = mysql_fetch_array($result))
    {
        echo $row['theater_name'];
        echo "<br />";
    }        
} 
```

首先，我检查用户是否提交了表单。然后，我转义他提交的数据并将其插入到您的查询中。

****注意：我写的所有内容都是基于在提交表单后执行代码的假设。***

****另一个注意事项：您应该阅读有关使用 PDO 而不是 MYSQL 函数的信息。***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T08:13:30.793

```
$_POST["your_variable_name"] // for POST
$_GET["your_variable_name"] // for GET 
```

有关详细信息，请访问：[http ://www.php.net/manual/en/language.variables.external.php](http://www.php.net/manual/en/language.variables.external.php)

# javascript - 在Javascript中将字符添加到二维数组

> ID：12455353
> 
> 赞同：0
> 
> 时间：2012-09-17T08:11:37.970
> 
> 标签：javascript, arrays, multidimensional-array

我真的很难用 Javascript 填充我的二维数组。

我有一个不同的数组，里面有很多我想添加到我的“板”的字母，但即使是板似乎也不能正常工作。每当我尝试使用 draw Board 方法将板打印到网页时，我都会在字母 A 所在的位置得到 NaN。其余的显示数字 0。

```
var ROW = 10;
var COLUMN = 10;
var board = [['A', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]];

function drawBoard(board) {
    var str = '';
    for (var x = 0; x < ROW; x++){
        str += '<div class="row">';
        for (var y = 0; y < COLUMN; y++){
            str += '<div class="column">' +
            + board[x][y] + '</div>' + '</div>';
        }
        str += '</div>';
    }
    $('#board').append(str);
}

$(function(){
    drawBoard(board);
}); 
```

我想要做的是有这个字符串：

```
var Letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M']; 
```

为 board[x][y] = Letters.pop() 创建一个 for 循环。然后用新字母显示板。

有没有比只运行两个 for 循环更好的方法将数组添加到二维数组？为什么我的电路板显示 NaN 而不是字母。我尝试了很多不同的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:16:02.460

回答第一个问题。如果您查看您的代码：

```
 str += '<div class="column">' +
        + board[x][y] + '</div>' + '</div>'; 
```

you can see that you have a `+ +board[x][y]`, not a `+` when adding `board[x][y]`. The unary `+` tries to convert the value of `board[x][y]` to a number before concatenating giving you the `NaN` error( as @Bergi pointed out).

To add an element to the end of an array you can use the `push()` method (in your case`board.push(Letters)`). This will place the element, which can be an array, at the end of the array.

If you want to replace a line in the array you can use `board[x] = Letters`.

# ef-code-first - DatabaseGenerated 字段的实体框架 addorupdate 错误

> ID：12455355
> 
> 赞同：1
> 
> 时间：2012-09-17T08:11:40.057
> 
> 标签：ef-code-first, entity-framework-migrations

这是我的模型类：

```
public abstract class BaseEntity
{
    [Key]
    public Guid Guid { get; set; }

    [DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int Id
    {
        get;
        set;
    }
}

public class Menu : Abstract.BaseEntity
{
    public string Title { get; set; }

    public string Url { get; set; }
}

public class SpaceShipEntities : DbContext
{
    public DbSet<Menu> Menu { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
    }
} 
```

我使用迁移。还有我的配置类：

```
internal sealed class Configuration : DbMigrationsConfiguration<SpaceProject.Models.SpaceShipEntities>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
    }

    protected override void Seed(SpaceProject.Models.SpaceShipEntities context)
    {
        context.Menu.AddOrUpdate(
            c => c.Title,
            new Menu() { Guid = Guid.NewGuid(), Title = "Главная" }
        );
    }
} 
```

当我在空数据库中使用包命令“Update-Database -Verbose”时，新行已插入数据库。但是当我第二次使用“Update-Database -Verbose”，并且 Seed 方法尝试更新行时，我有以下错误：

> 更新记录时发生错误。有关详细信息，请参阅内部异常。---> System.InvalidOperationException：不支持更改列模板“身份”。列：“ID”。表：“CodeFirstDatabaseSchema.Menu”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:27:43.027

如果您将 Guid 用作键，则无论如何都会对 Guid 进行索引。我会使用 Id 作为键并使用 [DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)] 装饰 Guid，然后使用：

```
protected override void Seed(SpaceProject.Models.SpaceShipEntities context)
    {
        context.Menu.AddOrUpdate(
            c => c.Guid,
            new Menu() { Guid = Guid.Parse("..."), Title = "Главная" }
        );
    } 
```

# apache-pig - PigServer 还是 PigRunner？哪个更好？

> ID：12455358
> 
> 赞同：5
> 
> 时间：2012-09-17T08:11:45.443
> 
> 标签：apache-pig

我已经使用 PigServer 类编写了嵌入式猪程序。但我知道我们也可以使用 PigRunner 类执行查询。

**谁能告诉我哪个更好？请解释原因。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:17:26.223

PigRunner 本质上呈现与命令行程序“pig”相同的界面，其优点是无需进入系统 shell 即可调用它，并且它返回 PigStats 对象。因此，运行完整的用户提供的脚本很方便。

然而，PigServer 允许动态创建和注册查询，然后对结果进行编程迭代。因此，它为 PIG 提供了更加灵活和完整的接口。

# jquery - jquery 相互依赖的下拉列表

> ID：12455359
> 
> 赞同：0
> 
> 时间：2012-09-17T08:11:47.953
> 
> 标签：jquery

我有 3 个相同元素的下拉列表。在第一个列表中选择的值不应显示在第二个下拉列表中。在第二个列表中选择的值不应显示在第三个下拉列表中。如何使用jquery做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:33:32.860

查看演示：http: [//jsfiddle.net/ezKDB/](http://jsfiddle.net/ezKDB/)

Jquery 插件：[https ://github.com/WilliamHuey/mutually_exclusive_list_jquery](https://github.com/WilliamHuey/mutually_exclusive_list_jquery)

用法：

```
$('select.classNameForEachList').onlyBeOne(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:21:18.527

这是一个例子：

***HTML***

```
<select class="sel-1">
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
</select>

<select class="sel-2">
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
</select>

<select class="sel-3">
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
</select> 
```

***jQuery***

```
var allSelects = $('select[class^=sel-]');
allSelects.on('change', function() {
  allSelects.find('options').show();
  allSelects.not(this).find('option[value="'+ this.value +'"]').hide();
}); 
```

***[工作演示](http://jsfiddle.net/Mr6wp/2/)***

希望这会给你一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:34:11.610

这是可能的解决方案：

```
<html>
<body>
<select id="first" data-child="#second">
<option value="1">one</option>
<option value="2">two</option>
<option value="3">three</option>
<option value="4">four</option>
<option value="5">five</option>
<option value="6">six</option>
<option value="7">seven</option>
</select>

<select id="second" data-child="#third">
</select>

<select id="third">
</select>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">

$(document).ready(init);

function mapItems(index, elem){
    var items = [];
    items.push({value:$(elem).val(), text:$(elem).text()});    
    return items;
}

function replaceItems(items, appendTo){
    appendTo.empty();
    for(var i in items){
        var item = items[i];
        if(item.value && item.text){
            appendTo.append("<option value='"+item.value+"'>"+item.text+"</option");
        }
    }
}

function selected(e){        
    var items = $(this).find("option:not(:selected)").map(mapItems);
    var child = $($(this).attr("data-child"));
    replaceItems(items, child);
    child.change();
}

function init(){
    var first = $("select#first");    
    var second = $("select#second");    
    var third = $("select#third");
    first.change(selected);
    second.change(selected);
    first.trigger('change');
}​
</script>
</body>
</html> 
```

它不是很漂亮，但它有效。[**在此处**](http://jsfiddle.net/goranobradovic/JLMJn/)查看演示。

**更新**我已经清理了代码。这是最后一个版本的链接：http: [//jsfiddle.net/goranobradovic/JLMJn/2/](http://jsfiddle.net/goranobradovic/JLMJn/2/)

**更新 2**我已经把所有的 html 放在这里，只需将它复制到空的 html 文件中就可以了。

# python - Windows 7 上的 python x86-64 安装程序

> ID：12455365
> 
> 赞同：2
> 
> 时间：2012-09-17T08:12:01.720
> 
> 标签：python, windows-7-x64

我正在尝试在 Windows 7 64 位虚拟机上安装 64 位版本的 python。我从[这里](http://www.python.org/getit)获得了 Python 2.7.3 Windows X86-64 安装程序。安装工作直接进行，但是当我启动 python 时，我得到：

```
Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win 32 
```

如果我尝试：

```
import sys
sys.maxint
2147483647 
```

这并不是我对 64 位 python 的期望，并且与我从 fedora 64 位安装中得到的不同：

```
9223372036854775807 
```

有任何想法吗 ？

问候， 博格丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:00:29.887

这是因为[Windows 64 位 ABI 与 Linux 不同](http://en.wikipedia.org/wiki/LLP64#64-bit_data_models)。

Python 实现使用 C`long`类型作为 Python`int`类型，而 C`long`在 64 位 Windows 上仍然只有 32 位宽。

`intobject.h`从 Python看：

```
typedef struct {
    PyObject_HEAD
    long ob_ival;
} PyIntObject; 
```

# ios - NSString 在创建 .ipa 时不起作用，但在模拟器上工作，甚至直接安装到设备上

> ID：12455366
> 
> 赞同：1
> 
> 时间：2012-09-17T08:12:05.173
> 
> 标签：ios

```
select avg(weight) from ProgressTracker where date in ('2012-09-16','2012-09-17','2012-09-18'); 
```

大家好，

在此先感谢。此 sqlite 命令在模拟器上运行良好，甚至可以通过电缆将应用程序安装到设备，但无法通过创建 .ipa 执行安装。请帮忙。

# moq - 使用 Moq 和 Mvc 伪造 Http 上下文

> ID：12455367
> 
> 赞同：0
> 
> 时间：2012-09-17T08:12:16.160
> 
> 标签：moq

我正在尝试伪造 http 上下文来测试控制器。我的环境是 MVC 3 和 Moq 4。到目前为止，我已经尝试了一些选项，包括：

一个。

```
var searchController = new MySearchController(_mockResolver.Object.Resolve<IConfiguration>());
var mockContext = new Mock<ControllerContext>();
searchController.ControllerContext = mockContext.Object;
var result = searchController.Render(); 
```

湾。

```
var searchController = new MopSearchController(_mockResolver.Object.Resolve<IConfiguration>());
searchController.MockControllerContext();
var result = searchController.Render();

public static class MockHttpHelper
{
    public static Mock<HttpContextBase> MockControllerContext(
                                this Controller controller, string path = null)
    {
        var mockHttpCtx = MockHttpHelper.MockHttpContext(path);
        var requestCtx = new RequestContext(mockHttpCtx.Object, new RouteData());
        var controllerCtx = new ControllerContext(requestCtx, controller);
        controller.ControllerContext = controllerCtx;
        return mockHttpCtx;
    }

    public static Mock<HttpContextBase> MockHttpContext(string path)
    {
        var mockHttpCtx = new Mock<HttpContextBase>();
        var mockReq = new Mock<HttpRequestBase>();

        mockReq.SetupGet(x => x.RequestType).Returns("GET");
        mockReq.SetupGet(req => req.Form).Returns(new NameValueCollection());
        mockReq.SetupGet(req => req.QueryString).Returns(new NameValueCollection());

        mockHttpCtx.SetupGet(x => x.Request).Returns(mockReq.Object);

        return mockHttpCtx;
    }
} 
```

这些都不起作用，我在下面得到了例外。谁能指出我的工作示例的方向？我在网上看到很多关于同一主题的问题，但考虑到日期（2008-2010 年的帖子）和 MVC 版本（即 1 和 2），我觉得我错过了一些东西/或试图模拟更多比我在 MVC3 中需要的。

```
System.NullReferenceException : Object reference not set to an instance of an object.
at System.Web.Mvc.ChildActionValueProviderFactory.GetValueProvider(ControllerContext controllerContext)
at System.Web.Mvc.ValueProviderFactoryCollection.<>c__DisplayClassc.<GetValueProvider>b__7(ValueProviderFactory factory)
at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
at System.Linq.Enumerable.ToList(IEnumerable`1 source)
at System.Web.Mvc.ValueProviderFactoryCollection.GetValueProvider(ControllerContext controllerContext)
at System.Web.Mvc.Controller.TryUpdateModel(TModel model) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:22:50.513

是的，正如您所指出的，您真正缺少的只是设置控制器的`ValueProvider`. 即使您将此控制器与 Get 操作一起使用但没有 Post 操作，控制器仍会`ValueProvider`在创建时实例化，因此您需要在测试场景中执行相同的操作。这是我在测试控制器时使用的基类。我使用[NBehave 的 NUnit 包装器](http://nuget.org/packages/nbehave.spec.nunit/)`SpecBase`进行单元测试，因此如果您愿意，请忽略参考

```
public abstract class MvcSpecBase<T> : SpecBase<T> where T : Controller
{
    protected T Controller { get; set; }

    protected string RelativePath = string.Empty;

    protected string AbsolutePath = string.Empty;

    protected void InitialiseController(T controller, NameValueCollection collection, params string[] routePaths)
    {
        Controller = controller;
        var routes = new RouteCollection();
        RouteConfig.RegisterRoutes(routes);
        var httpContext = ContextHelper.FakeHttpContext(RelativePath, AbsolutePath, routePaths);
        var context = new ControllerContext(new RequestContext(httpContext, new RouteData()), Controller);
        var urlHelper = new UrlHelper(new RequestContext(httpContext, new RouteData()), routes);
        Controller.ControllerContext = context;
        Controller.ValueProvider = new NameValueCollectionValueProvider(collection, CultureInfo.CurrentCulture);
        Controller.Url = urlHelper;
    }
} 
```

然后，在您的测试中，创建您的控制器，然后调用此行：

```
InitialiseController(controller, new FormCollection()); 
```

# magento - 有没有办法知道客户是否使用了优惠券代码？

> ID：12455369
> 
> 赞同：3
> 
> 时间：2012-09-17T08:12:21.073
> 
> 标签：magento

我为我的网站设置了优惠券代码，但只有注册客户可以使用并且只能使用一次，有没有办法知道客户是否使用了优惠券代码？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:01:49.003

有一个表格`salesrule_customer`包含所有使用的规则，包括优惠券。在该字段中`times_used`，您将获得每个客户的号码。

`coupon`获取和`rule_id`打开表之间的连接`salesrule_coupon`。

总结一下，这是您应该使用的查询：

```
SELECT sco.code, scu.customer_id, scu.times_used FROM salesrule_coupon sco
INNER JOIN salesrule_customer scu ON sco.rule_id = scu.rule_id
GROUP BY scu.customer_id; 
```

如果您想过滤您的优惠券代码添加`WHERE`部分：

```
SELECT sco.code, scu.customer_id, scu.times_used FROM salesrule_coupon sco
INNER JOIN salesrule_customer scu ON sco.rule_id = scu.rule_id
WHERE sco.code='your_code'
GROUP BY scu.customer_id; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T08:22:44.910

只需制作一个mysql表：`used_coupons`

并插入`username`和`coupon_code`每次使用优惠券。

然后，如果用户输入优惠券代码，只需检查条目是否存在。如果条目存在，则优惠券已使用。

# rotation - 用加速度计检测加速度的变化频率

> ID：12455370
> 
> 赞同：1
> 
> 时间：2012-09-17T08:12:23.337
> 
> 标签：rotation, accelerometer, frequency

我有一个 3 轴加速度计，我需要检测加速度的变化频率。当物体直线移动而不旋转时没关系 - 在这种情况下，我可以简单地忽略 g（重力加速度），它将具有恒定的方向并且不会影响频率。但是当物体在移动时旋转时我该怎么办？是否甚至可以（以某种方式）仅用加速度计减去 g 而没有陀螺仪？可能有一些粗略计算、近似的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:05:03.400

如果您的加速度计的增益在所有 x、y 和 z 方向上都相同，则以下方法可能有效。

您不知道汽车的方向，因此无法从传感器读数中减去重力。然而，当汽车开始移动或出现急刹车或加速时，测得的加速度矢量的**长度**也会发生变化。

我会使用一个低通滤波器来滤除你肯定会在汽车中得到的非常高频的噪声。它需要一些调整和测试，但应该不会太难。

当然**这是一种解决方法**，真正的解决方案是使用陀螺仪。总之祝你好运！

# python - Ipdb 和方法文档

> ID：12455374
> 
> 赞同：8
> 
> 时间：2012-09-17T08:12:39.013
> 
> 标签：python, ipython, pdb

我要分析一个国外API的方法，我平时是怎么做的，写个测试脚本，或者找个例子代码，做个

```
ipdb.set_trace() 
```

我想在哪里进行实验，而不是查看当前可用的变量、对象及其方法。但是，当我想以 Ipython 提供的方式查看文档时

```
object.method? 
```

我明白了

```
*** SyntaxError: invalid syntax (<stdin>, line 1) 
```

* * *

如果我尝试

```
help(object.method) 
```

它给

```
*** No help on (object.method) 
```

* * *

这是否意味着所选方法没有文档，或者我使用了错误的调用方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-25T08:40:51.490

实际上`!help(object.method)`有效，你只需要表明`!`它是一个 python 命令，而不是*ipdb* help 命令。不幸的是，虽然方便的问号不能那样工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T15:58:41.320

该`help()`函数实际上是一个包装器，`pydoc.help()`这意味着您可以执行以下操作：

```
ipdb> import math
ipdb> import pydoc
ipdb> pydoc.help(math.log) 
```

# javascript - 使用 ASP.net 网页使用 android 手机摄像头扫描条形码？

> ID：12455377
> 
> 赞同：1
> 
> 时间：2012-09-17T08:12:50.090
> 
> 标签：javascript, android, asp.net

我是asp开发者。我想使用 android 手机摄像头作为扫描仪。我怎样才能做到这一点？输出需要放在网页上的文本框中。是否有任何 API 或 Javascript 用于此？

# iphone - 警告声音没有在设备中播放？

> ID：12455381
> 
> 赞同：0
> 
> 时间：2012-09-17T08:13:00.633
> 
> 标签：iphone, ios, ipad

我有一个 Ipad 应用程序，在我操作成功后我正在播放一些声音。它之前工作正常。我正在这样做`

```
NSError *error;
NSString *bell = [[NSBundle mainBundle] pathForResource:@"sound" ofType:@"aif"];
AVAudioPlayer *av = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:bell] error:&error];
if(error) {
    NSLog(@"%@",&error);
}
[av play]; 
```

但现在声音没有在 ipad 设备中播放。但在模拟器中它工作正常？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:36:59.790

检查文件是否存在：

```
 NSError *error;
 NSString *bell = [[NSBundle mainBundle] pathForResource:@"sound" ofType:@"aif"];
 if([[NSFileManager defaultManager] fileExistsAtPath:bell]){
  AVAudioPlayer *av = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:bell] error:&error];
  if(error) {
   NSLog(@"%@",&error);
  }
  [av play];
 }
 else 
 {
   NSLog(@"File doesnot exist");
 } 
```

**注意**：检查手机是否设置为静音模式

# asp.net - ASP WebMail：设置 SMTP 身份验证？

> ID：12455383
> 
> 赞同：0
> 
> 时间：2012-09-17T08:13:16.623
> 
> 标签：asp.net, email, razor, smtp, webmatrix

我正在 WebMatrix 中使用 Razor C# 语言开发网页。我有一个托管网站，我正在尝试将电子邮件系统合并到其中。

根据[这篇关于 WebMail](http://www.w3schools.com/aspnet/webpages_ref_webmail.asp)的文章，我已经在我的 _AppStart.cshtml 页面中设置了 WebMail 设置。我从我的服务提供商那里得到了我的设置。他为我提供了一个使用 CDO 对象的示例代码：

```
 dim config, sch     
    set config = CreateObject("CDO.Configuration")
    sch = "http://schemas.microsoft.com/cdo/configuration/"

    with config.Fields
        .item(sch & "sendusing") = 2 ' cdoSendUsingPort
        .item(sch & "smtpserver") = "myserver"
        .item(sch & "smtpserverport") = 25
        .item(sch & "smtpusessl") = False
        .item(sch & "smtpconnectiontimeout") = 60           
        .item(sch & "smtpauthenticate") = 1 'basic auth
        .item(sch & "sendusername") = "myemail@email.com"
        .item(sch & "sendpassword") = "password"
        .update
    end with

    Set myMail=CreateObject("CDO.Message")

    With myMail
        .Configuration = config
        .Subject = Request.Form("txtSubject")
        .From = Request.Form("txtFrom")
        .To = Request.Form("txtTo")
        .TextBody = Request.Form("txtMessage")
        Call .Send()
    End With 
```

如您所见，上面的代码是在 CDO 中编写的。我正在尝试在 Razor 中使用 WebMail。我卡住的唯一一点是我的电子邮件服务器不是 SSL，但需要基本身份验证。我在 WebMail 中找不到任何身份验证设置。如何在 WebMail 中设置 SMTP 验证？这是我当前的代码：

```
WebMail.SmtpServer = "myserver";
WebMail.SmtpPort = 25;
WebMail.EnableSsl = false;
WebMail.UserName = "myemail@email.com";
WebMail.Password = "password";
WebMail.From = "Support <myemail@email.com>"; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:56:48.540

邮件服务器的基本身份验证通常包括提供用户名和密码。您可以使用`WebMail.UserName`和`WebMail.Password`属性设置它们。

顺便说一句，您的提供商已经为您提供了在经典 ASP 中使用 CDO 发送邮件的示例代码。它对你没有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:01:04.483

这是 c# 中的一个基本示例。Smtp 类接受用户名密码。

```
 MailMessage mail = new MailMessage("emailfrom","emailto");

        mail.From = new MailAddress("emailfrom");
        mail.Subject = txtsbjct.Text;
        string Body = txtmsg.Text;
        mail.Body = Body;

        mail.IsBodyHtml = true;
        SmtpClient smtp = new SmtpClient();
        smtp.Host = "localhost"; 
        smtp.Credentials = new System.Net.NetworkCredential
      ("youremail", "yourpassword"); 
```

# jsf-2 - 将文本字段映射到 JSF 中的枚举

> ID：12455388
> 
> 赞同：0
> 
> 时间：2012-09-17T08:13:41.723
> 
> 标签：jsf-2, enums

我想将我的输入文本字段映射到 java 枚举类型。我是否可以将输入文本字段映射到 JSF 中的 java 枚举。我不想使用下拉列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:52:00.133

是的，只需按照通常的方式将其直接绑定到枚举属性即可。JSF/EL 有内置的枚举转换器。

```
<h:inputText value="#{bean.someEnum}" /> 
```

和

```
private SomeEnum someEnum; 
```

您只需要处理输入的值必须与枚举名称**完全**匹配的事实，否则会出现转换错误。

* * *

**与具体问题无关**，从用户体验的角度来看，下拉列表对于指定一组常量中的一个比输入文本字段*更加*用户友好，在输入文本字段中，最终用户很容易打错字或很难记住允许的值。这正是枚举属性经常与下拉列表或单选按钮结合使用的原因，这不是枚举属性的技术限制。

# c# - 实体框架 - 按名称获取实体

> ID：12455389
> 
> 赞同：15
> 
> 时间：2012-09-17T08:13:46.703
> 
> 标签：c#, entity-framework, reflection

我有以下代码（示例）：

```
public dynamic GetData(string name) 
{
    using(var ctx = GetObjectContext()) 
    {
        switch (name) 
        {
        case "entity1":
            return ctx.entity1.ToList();
        case "entity2":
            return ctx.entity2.ToList();
        ......
        default:
            return null;
        }
    }
} 
```

我想避免在这个示例中切换。如何按名称找到所需的实体类，调用 ToList() 方法并返回数据？我可以使用反射来做到这一点吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-17T08:16:21.383

您可以使用反射来完成此操作，但是您还需要使用泛型，因为 ToList() 方法返回的列表类型对于每种实体类型都不同。

您可以像这样通过反射访问属性获取器：

```
var enumerable = typeof([ClassNameOfContext]).GetProperty(name).GetValue(ctx, null); 
```

而`[ClassNameOfContext]`ctx 是其实例的类的名称。这在您的代码中并不明显，但您知道 :-)

问题是这`enumerable`将是一个`object`并且必须转换为您正在访问的实体类型`IEnumerable<EntityType>`在哪里。`EntityType`换句话说，这取决于您传递的名称。如果您使用泛型来确定类型，您将能够正确地转换对象而不必返回`dynamic`偶数。

```
public TEntity Get<TEntity>(string name)
{
    ... 
```

并从上面转换线：

```
var enumerable = (IEnumerable<TEntity>)(typeof([ClassNameOfContext]).GetProperty(name).GetValue(ctx, null));
return enumerable.ToList(); 
```

干得好！

*附录：可以想象，您也可以摆脱字符串参数 - 应尽可能避免在字符串中包含类型或属性的名称，因为它不是类型安全的。编译器无法识别它，并且诸如重构之类的 IDE 功能也没有考虑到它。这里的问题是属性名称通常是实体类型名称的复数形式。但是您可以使用反射来查找类型与`TEntity`. 我把它作为练习:-)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-31T11:35:12.030

您可以使用这样的代码

```
private IEnumerable<TEntity> GetList<TEntity>(string connectionString, Func<object, T> caster)
{
    using (var ctx = new DbContext(connectionString))
    {
        var setMethod = ctx.GetType().GetMethod("Set").MakeGenericMethod(typeof(T));

        var querable = ((DbSet<object>)setMethod
        .Invoke(this, null))
        .AsNoTracking()
        .AsQueryable();

        return querable
            .Select(x => caster(x))
            .ToList();
    }
} 
```

像这样调用：

```
var branchList = GetList<Branch>("connectionStringName", x => (Branch)x); 
```

您可以删除 .AsNoTracking() 并删除 .ToList()，然后您将获得纯 IQueryable，您可以进一步查询。

# c - 找到包含所有矩形的最小区域

> ID：12455392
> 
> 赞同：10
> 
> 时间：2012-09-17T08:14:04.927
> 
> 标签：c, algorithm, math, area

这是一道面试题。
我们得到了各种矩形的尺寸，我们必须找出可以包围所有矩形的面积（最小）？矩形也可以旋转。

```
test case:-
input:
3   //number of rectangles
8 8
4 3
3 4

output:
88

11x8:
+ - - - - - - + + - +
|             | |   |
|             | |   |
|             | + - +
|             | + - +
|             | |   |
|             | |   |
+ - - - - - - + + - + 
```

[在将矩形拟合到最小可能区域](https://stackoverflow.com/questions/5371104/fitting-rectangles-in-the-smallest-possible-area) 之前，我查看了一个类似的问题
，上述方法着眼于所有可能性、旋转，并确定所有布局案例中所有此类可能性的最小值。
难道我们不能建立一个算法，首先找到矩形面积的总和，然后寻找最大长度，宽度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T09:23:03.757

这个问题没有绝对的解决方案，但是有几个近似的解决方案，你可以[在这里](http://www.codeproject.com/Articles/210979/Fast-optimizing-rectangle-packing-algorithm-for-bu)阅读其中的一些。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-17T19:55:42.030

[非正方形基准上的最佳矩形包装](http://www.aaai.org/ocs/index.php/AAAI/AAAI10/paper/download/1678/1933)：

> 给定一组矩形，我们的问题是找到所有最小面积的封闭矩形，这些矩形将包含它们而不重叠。我们将封闭矩形称为边界框。优化问题是**NP-hard**，而决定一组矩形是否可以打包在给定边界框中的问题是**NP-complete**，通过减少 bin-packing (Korf 2003)。

[最佳矩形包装的新改进](http://ijcai.org/papers09/Papers/IJCAI09-092.pdf)：

> Korf [2003] 将矩形打包问题分为两个子问题：最小边界框问题和包含问题。前者找到一个面积最小的边界框，可以包含给定的一组矩形，而后者试图将给定的矩形打包在给定的边界框中。解决最小边界框问题的算法将解决包含问题的算法称为子程序。

### 最小边界框问题

> 解决最小边界框问题的一种简单方法是找到描述可行和潜在最优边界框集的最小和最大区域。可以用这个范围内的区域生成所有维度的边界框，然后按照面积的非递减顺序进行测试，直到找到所有最小面积的可行解。最小面积是给定矩形的面积之和。最大面积由贪心解决方案的边界框确定，通过将边界框高度设置为最高矩形的高度，然后在从左到右扫描时将矩形放置在第一个可用位置，并且对于从左到右扫描的每一列从下到上。

另请参见[最佳矩形包装：新结果](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.140.200&rep=rep1&type=pdf)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T09:03:02.987

首先，您应该检查，是否可以旋转封闭矩形？无论如何，您可以忽略“矩形”条件并以点为单位解决任务。你有点数组（它们是矩形的顶点）。你的任务是找到面积最小的封闭矩形。如果封闭矩形无法旋转，则解决方案很愚蠢并且复杂度为 O(n)。

生成矩形数组并制作点数组，这些点是矩形的顶点。接下来很简单：

```
long n; // Number of vertexes
point arr[SIZE]; //Array of vertexes
long minX = MAXNUMBER, minY = MAXNUMBER, maxX = -MAXNUMER, maxY = -MAXNUMBER;
for (long i = 0; i < 4 * n; i++)
{
    minX = MIN(minX, arr[i].x);
    minY = MIN(minY, arr[i].y);
    maxX = MIN(maxX, arr[i].x);
    maxY = MIN(maxY, arr[i].y);
}
long width = maxX - minX, height = maxY - minY;
printf("%ddX%ld", width, height); 
```

另一个任务，如果矩形可以旋转。那么你应该首先：

1.  构建矩形中所有点的最小凸多边形。您可以使用任何现有的算法。复杂度 O(n log n)。例如“格雷厄姆的扫描”：[http ://en.wikipedia.org/wiki/Graham%27s_scan](http://en.wikipedia.org/wiki/Graham%27s_scan)
2.  对凸多边形使用简单的算法。链接：[http ://cgm.cs.mcgill.ca/~orm/maer.html](http://cgm.cs.mcgill.ca/~orm/maer.html)

您在 wiki 中的任务链接：[http ://en.wikipedia.org/wiki/Minimum_bounding_rectangle](http://en.wikipedia.org/wiki/Minimum_bounding_rectangle)

# wpf - ValueConverter 的行为类似于单例

> ID：12455394
> 
> 赞同：2
> 
> 时间：2012-09-17T08:14:17.607
> 
> 标签：wpf, binding, datatemplate, valueconverter

我有一个需要外部有状态模块才能工作的 ValueConverter。所以我从 Freezable 继承了它并声明了依赖属性。

```
public class Decorator : Freezable, IValueConverter
{
  public static readonly DependencyProperty HighlighterProperty =
      DependencyProperty.Register("Highlighter", typeof (IHighlighter), typeof (Decorator), new PropertyMetadata(null));

  public ITypeNameHighlighter TypeNameHighlighter
  {
    get { return (ITypeNameHighlighter)GetValue(TypeNameHighlighterProperty); }
    set { SetValue(TypeNameHighlighterProperty, value); }
  }
  //...
} 
```

然后我使用 DataTemplate 和 DataTemplateSelector 来显示一个视图。在资源中创建一个Decorator实例并在绑定中使用

```
<DataTemplate x:Key="ViewTemplate">
...

<ListView ...>
  <Control.Resources>
    <GUI:Decorator x:Key="Decorator" **Highlighter="{Binding Highlighter}"** />
  </Control.Resources>
...

<GridViewColumn>
  <GridViewColumnHeader  ... />

    <GridViewColumn.CellTemplate>
      <DataTemplate>
        <GUI:RichTextBlock RichText="{Binding Path=Title, Converter={**StaticResource Decorator**}}" />
      </DataTemplate>
  </GridViewColumn.CellTemplate>
</GridViewColumn>
</ListView>
...
</DataTemplate> 
```

问题是当创建多个 View 实例时，它们都使用一个（第一个）Decorator 实例将实体转换为 RichText（而实际上创建了几个 Decorator 实例 - 一个按视图）。Highlighter 有一个状态，这就是为什么每个 View 都必须使用自己的 Decorator 实例的原因。

任何评论为什么会有这种行为？任何想法如何解决它？

**更新：** DJ 问我“为什么需要多个转换器实例”，所以我将描述该任务。

应用程序中有多个相同视图的实例。每个视图都包含自己的文本过滤器，用于从 ListView 中过滤掉元素。ViewModel 端有一个 Highlighter，它有一个过滤器文本和字符串（在我们的例子中是 ListView 元素标题）作为输入，并返回标题的哪些部分与过滤器文本匹配的信息。Decorator converts 具有从 Highlighter 返回的标题和信息作为输入，RichText 作为输出。

我同意 WPF 提供的表单中的 ValueConverter 不是很适合这个问题。但我在 View 方面看不到任何其他优雅的方式。

爱德华

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:10:47.270

将 x:Shared=False 放在声明转换器资源的位置。在每次调用时，它都会为您提供新对象。

```
<GUI:Decorator x:Shared=False x:Key="Decorator" **Highlighter="{Binding Highlighter}"** /> 
```

# flash - Flash 在 html 中不可读？

> ID：12455395
> 
> 赞同：0
> 
> 时间：2012-09-17T08:14:35.563
> 
> 标签：flash, flash-cs6

我有一个客户可能会遇到的最愚蠢的问题。他们要了一个横幅，我在cs6中做了一个。他们回电话说当我们将它插入 html 代码并上传时，flash 没有显示，他们的“聪明人”告诉我这是因为它是用最新版本制作的，需要转换为旧版本. 我保存为cs5项目，但他们说还是一样。我只是想知道，有什么方法可以将 cs6 文件转换为 flas 8 文件，或者它与为 html 代码制作的版本有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:29:17.900

将您的 fla 保存为 CS5 将无济于事。您必须更改 Flash 的目标版本。

去

```
File -> Publish Settings -> Flash -> Change Player to Flash PLayer 8 
```

发布并传递给他们 SWF。使用哪个 Flash IDE 无关紧要。

# jqgrid - JQGrid - 设置扩展列宽

> ID：12455397
> 
> 赞同：0
> 
> 时间：2012-09-17T08:14:39.387
> 
> 标签：jqgrid

我正在深入定制带有子网格的 jqGrid 的外观。我必须做的一件事是更改配置选项支持的展开/折叠按钮，没问题。

问题是展开/折叠按钮所在的列的宽度与图像的大小相同，我想增加它的宽度。

我试图“破解” CSS，但我找不到一个很好的方法。

那么，有没有办法一致地设置展开/折叠列宽？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:44:00.853

我只是把我的做法。

```
.jqGridWrapper .ui-sgcollapsed .ui-icon { margin: 8px; } 
```

.jqGridWrapper 是一个应用于包装网格元素的 div 的类。我使用它来确保我的 css 自定义只会影响该 div 中的内容。

干杯!

# python - 相关内联上的 python django list_display

> ID：12455398
> 
> 赞同：4
> 
> 时间：2012-09-17T08:14:42.570
> 
> 标签：python, django, django-models, django-admin

> **可能重复：**
> [Django ModelAdmin 中的“list_display”可以显示 ForeignKey 字段的属性吗？](https://stackoverflow.com/questions/163823/can-list-display-in-a-django-modeladmin-display-attributes-of-foreignkey-field)

我想在来自另一个相关模型的模型的管理列表视图中显示一些信息。

```
class Identity(models.Model):
  blocked = models.BooleanField()
  ...

class Person(models.Model):
  modelARef = OneToOneField("Identity", primary_key=True)
  descr     = models.CharField(max_length=255)
  name      = models.CharField(max_length=255) 
```

用户应该能够在管理页面上添加/编辑“人员”。由于不支持反向内联，我必须在管理页面上显示“身份”，然后内联“人员”。“身份”仅包含“人员”的附加信息，这些信息应在管理页面上可见。

现在，当我有一个“身份”管理页面时，如何在“身份”的 list_display 上显示“人员”模型中的字段？

问候

编辑：我可以向“身份”添加一些函数来查询相关的“人员”并返回所需的值，但如果我这样做，就不可能对该列进行排序。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T08:32:44.860

您可以使用 a`list_display`添加自定义列。我还建议更新`get_queryset()`以确保仅在一个查询中获取相关对象，而不是每行查询一次。

```
class IdentityAdmin(admin.ModelAdmin):
    list_display = ('blocked', 'person_name')

    def person_name(self, object):
        return object.person.name

    person_name.short_description = _("Person name")

    def get_queryset(self, request):
        # Prefetch related objects
        return super(IdentityAdmin, self).get_queryset(request).select_related('person') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:19:55.080

不是直接的，但是您可以创建一个打印出您想要的内容的方法，并将方法名称添加到 list_display。请参阅[list_display 上的文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)

# javascript - Facebook 分享按钮上的自定义文本

> ID：12455400
> 
> 赞同：1
> 
> 时间：2012-09-17T08:14:53.880
> 
> 标签：javascript, facebook, share

它曾经是这样完成的：

```
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script>
<a type="button_count" share_url="http://google.pl" name="fb_share">Share this page on Your's wall</a> 
```

它曾经生成一个带有文本“在你的墙上分享这个页面”的分享按钮，而不是普通的“分享”。自上次更新以来，它不再起作用了。是否可以更改共享按钮上的文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:59:29.637

# 使用 Facebook JS SDK：

您现在必须使用[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)，它是 Facebook JavaScript SDK 的一部分。

* * *

# 没有 Facebook JS SDK：

如果你不想被他们的 SDK 打扰，你可以使用这个简单的链接：

```
<a href="https://www.facebook.com/dialog/feed?app_id=140586622674265&link=[[URL]]&name=[[TITLE]]&redirect_uri=http%3A%2F%2Fs7.addthis.com%2Fstatic%2Fpostshare%2Fc00.html" target="_blank">Share this page on your wall</a> 
```

如果您使用此链接共享 Google.com，则如下所示： [https ://www.facebook.com/dialog/feed?app_id=140586622674265&link=http%3A%2F%2Fgoogle.com&name=Google&redirect_uri=http %3A%2F%2Fs7.addthis.com%2Fstatic%2Fpostshare%2Fc00.html](https://www.facebook.com/dialog/feed?app_id=140586622674265&link=http%3A%2F%2Fgoogle.com&name=Google&redirect_uri=http%3A%2F%2Fs7.addthis.com%2Fstatic%2Fpostshare%2Fc00.html)

另外，请承认这三件事：

*   您需要将`[[URL]]`和替换`[[TITLE]]`为要共享的页面及其标题（均为 url 编码）的链接。
*   Feed 对话框必须显示帖子来自哪个 Facebook 应用程序。上面 URL 中的`app_id`参数是 AddThis 中的参数。创建一个 Facebook 应用程序并将其自己的 id 放在 URL 中以使用您想要的名称而不是“AddThis Sharing”。不过，您可以保留`app_id`来自 AddThis，它工作得很好。
*   最后一个参数（`redirect_uri`）是用户分享后重定向到的页面。它目前是 AddThis 的一个页面，其中包含一些将关闭选项卡/窗口的 JavaScript。这样，对话框在不再需要时就会消失。您也不必更改它，效果很好。

# c# - 我应该使用哪个目录（如果有）来存储我的加载项的设置文件？

> ID：12455411
> 
> 赞同：1
> 
> 时间：2012-09-17T08:16:00.057
> 
> 标签：c#, file, io, outlook-addin

我开发了一个加载项，现在我想让它在 Outlook 启动时存储/检索设置。我已经检查了当前的工作目录，`Environment.CurrentDirectory`但是当我尝试访问`File.WriteAllText`它时，由于访问权限而失败。所以，我的问题是双重的。

1.  任何目录都够用还是有推荐的目录？
2.  我需要将设置存储在本地文件中还是有更简洁的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:52:10.697

我使用的`Environment`类如下。

```
String dir = Environment.GetFolderPath(
  Environment.SpecialFolder.ApplicationData); 
```

语法有点冗长，但它做得很好。不过，不确定您是否拥有加载项的完全访问权限。另外，很高兴知道是否有人会建议更好的存储方法。曾经我使用过网络服务，直到我发现我的用户经常会坐在火车上做他的工作（阅读：离线）。除非他在上船之前没有重新启动机器，否则它会起作用。

# java - 空格键后ajax搜索不起作用

> ID：12455413
> 
> 赞同：0
> 
> 时间：2012-09-17T08:16:02.417
> 
> 标签：java, javascript, ajax, jsp

我有以下基于名字和姓氏搜索的代码。一旦我在名字后按空格，搜索结果就会消失。如何在按空格后显示搜索结果。我在名字/姓氏的文本框中调用 ajax 函数。

```
<script type="text/javascript">
function lookup(inputString) {
if(inputString.length == 0) {
$('#suggestions').hide();
} else {
 $.post("states.jsp", {queryString: ""+inputString+""}, function(data){
if(data.length >0) {
$('#suggestions').show();
$('#autoSuggestionsList').html(data);
}
});
}
}
function fill(thisValue) {
$('#inputString').val(thisValue);
setTimeout("$('#suggestions').hide();", 200);
 }
</script> 
```

// States.JSP 文件

```
 String sql = "SELECT EMP_EMPLOYEE_ID, EMP_FNAME, EMP_LNAME FROM UAP.dbo.UAP_EMPLOYEE     where EMP_FNAME LIKE '%"+name+"%' OR EMP_LNAME LIKE '%"+name+"%';";
Statement stm = con.createStatement();
stm.executeQuery(sql);
ResultSet rs= stm.getResultSet();
while (rs.next ()){

 out.println("<li onclick='fill(\""+rs.getString("EMP_FNAME")+" " +rs.getString("EMP_LNAME")+"\");'>"+rs.getString("EMP_FNAME")+"  "+rs.getString("EMP_LNAME")+"   </li>");
}}catch(Exception e){
out.println("Exception is ;"+e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:20:48.903

SQL 语句中的变量`name`，尝试修剪其中的所有前导和尾随空格。那应该可以了。因为姓氏和名字在两个不同的列中。当你击中空间。像这样`John<whitespace>`的值被发送到查询。现在显然在你的名字列名必须是`John`唯一的，没有空格。当查询尝试查找带有尾随空格的名称 John 时，它可能会失败。因此，您的搜索结果会在您点击空格后消失。

# extjs - 如何判断 Component 是否激活 LoadMask？

> ID：12455415
> 
> 赞同：3
> 
> 时间：2012-09-17T08:16:06.907
> 
> 标签：extjs

我有一个窗口和一个表单，其中将 LoadMask 放在其提交上。在提交过程中，我抓住`ESC`了窗口上的按键，不允许用户在表单提交期间关闭它。

如何确定是否形成了活动的 LoadMask？

也许像商店`isLoading()`方法之类的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T09:20:25.847

如果你屏蔽`Element`（例如`grid.getEl().mask()`）那么有这样的方法：`grid.getEl().isMasked()`。如果你使用`LoadMask`然后试试这个：

```
var myMask = new Ext.LoadMask(grid, {msg:"Please wait..."});
myMask.show();

Ext.ComponentMgr.each(function(i, value){
    if ((value instanceof Ext.LoadMask) && value.isVisible() && 
        (value.ownerCt === panel || value.floatParent == panel))
    {
        alert('masked');
        return false;
    }
}); 
```

工作样本：http: [//jsfiddle.net/Hsy5c/8/](http://jsfiddle.net/Hsy5c/8/)

# sql-server-2008 - Intellisense 在 SQL Server 2008 中不起作用

> ID：12455416
> 
> 赞同：2
> 
> 时间：2012-09-17T08:16:13.993
> 
> 标签：sql-server-2008, intellisense

我在我的系统中使用 SQL Server 2008。我有一个带有一些表的数据库。当我键入如下查询时：

```
Select * from Tblname 
```

在查询窗口中，数据库中的表名没有列出。当我键入如下查询时：

```
 Select COUNT(Id) from Table1 
```

在我输入后`Select`它没有列出默认关键字，如 COUNT、SUM 等

我该如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T16:32:05.630

这可能是因为您没有从左上角的可用数据库下拉列表中选择包含该表的数据库。

检查这一点的另一种方法是使用 databaseName.dbo.Tblname 来确保您正在引用包含该表的数据库。

# ios - iOS通讯簿-如何知道添加/编辑/删除了哪个联系人？

> ID：12455417
> 
> 赞同：9
> 
> 时间：2012-09-17T08:16:18.533
> 
> 标签：ios, objective-c, abaddressbook

我的应用程序需要在我们的服务器上存储用户的联系人（当然要获得用户的许可。）其中一个要求是将设备通讯录上的任何更改（添加/编辑/删除）反映到服务器。

是否有一种简单的方法/最佳实践来确定在重新启动应用程序之前更改了哪些地址簿联系人？

我所看到的只是通知应用程序地址簿更改的回调方法，但似乎没有记录的方法来确定哪些联系人被添加、编辑或删除。

我现在想的是手动将新的联系人列表与存储在设备上的联系人列表进行比较，然后更新应用程序和服务器的更改。但是我认为如果用户有大量的联系人，这可能太多了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-17T09:44:08.950

您必须使用[ABAddressBookRegisterExternalChangeCallback](https://developer.apple.com/library/ios/DOCUMENTATION/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABAddressBookRegisterExternalChangeCallback)注册您的课程，并传递一个 ABAddressBookRef 和回调（在我的示例中为“addressBookDidChange”）

```
ABAddressBookRef addressBook = //...

ABAddressBookRegisterExternalChangeCallback(addressBook, addressBookDidChange(__bridge_retained  void *)self);

void addressBookDidChange(ABAddressBookRef addressBook, CFDictionaryRef info, void  *context)
{
    //Something changed from last application launch, insert your logic here...

    //If you want to handle it in a "Objective-C" method you can do something like:
    [((__bridge ABManager*) context) yourObjectiveCMethod];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T13:22:32.407

研究使用 libsqlite3.dylib 并创建一个 sql 数据库，该数据库将访问为所有需要的属性生成的平面文件，然后定期将您的数据库与用户的设备进行比较。确保两个数据库只从 abaddressbook 框架中获取您需要的基本必需品。

带有 sqlite3 库的示例 iOS 项目在这里：

[http://www.techotopia.com/index.php/An_Example_SQLite_based_iOS_7_Application](http://www.techotopia.com/index.php/An_Example_SQLite_based_iOS_7_Application)

& 在这里使用 ABAddressbook 为联系人的多值属性执行此操作的详细信息：

[http://linuxsleuthing.blogspot.com/2012/10/addressing-ios6-address-book-and-sqlite.html](http://linuxsleuthing.blogspot.com/2012/10/addressing-ios6-address-book-and-sqlite.html)

# swing - 如何配置 checkstyle 幻数规则以便忽略某些包？

> ID：12455418
> 
> 赞同：1
> 
> 时间：2012-09-17T08:16:20.000
> 
> 标签：swing, sonarqube, checkstyle

我使用声纳，我想知道如何只配置 checkstyle 幻数规则，以便它忽略一些包含`Swing`相关类的包。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:46:46.500

您应该使用[声纳关闭违规插件](http://docs.codehaus.org/display/SONAR/Switch+Off+Violations+Plugin)来执行此操作。

# javascript - 当我点击其他地方时，jquery modal让它关闭

> ID：12455421
> 
> 赞同：0
> 
> 时间：2012-09-17T08:16:23.973
> 
> 标签：javascript, jquery, youtube, modal-dialog

目前我只学习 javascript 并且可以在这里得到一些帮助，因为我对从这里去哪里有点困惑。我有一个使用 jquery 的模态站点，我可以在单击图像时显示它，但是当我单击其他地方时它不会将其关闭。我试过切换，但无论我点击哪里，它都会打开和关闭。我试过隐藏，但它完全停止工作（假设它应用隐藏功能，即使我点击链接）这是我到目前为止所拥有的，任何帮助都会很棒......

```
jQuery('#youtube').click(function(){
jQuery('#youtubemodal').show();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:09:43.080

为此我想出了自己的解决方法，我设置了一个深色背景的 div，不透明度为 40%，当加载模式时，它会出现在整个页面中。

```
#modalbackground {
width:100%;
height:100%;
background-image: url('images/modalbackground.png');
background-repeat: repeat;
position:fixed;
z-index:600;
display:none;

} 
```

然后我把这个 div 放在一切之外，以确保它覆盖整个页面

```
<div id="modalbackground"> </div> 
```

然后我应用此代码以确保当我单击新的深色“背景”时 div 和模式关闭。

```
jQuery('#youtube').click(function(){
jQuery('#youtubemodal').show();

});

jQuery('#youtube').click(function(){
jQuery('#modalbackground').show();

});

jQuery('#modalbackground').click(function(){
jQuery('#modalbackground').hide();
});

jQuery('#modalbackground').click(function(){
jQuery('#youtubemodal').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:20:41.243

创建一个检查显示然后隐藏的 youtubemodal 的函数。

```
$("document").click(function() {
    if( $('#youtubemodal').is(':visible') ) {
        $('#youtubemodal').hide();
    } 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:27:00.750

这是您需要做的：

```
$('#youtube').click(function(){
    $('#youtubemodal')
        .show()
        .on("click", function(e){
            e.stopPropagation();
        });
    $(document).on("click.youtubemodal", function(){
        $(this).off(".youtubemodal");
        $('#youtubemodal').hide();
    });
});​ 
```

这是它的行为方式：

*   当您单击图像时，会出现模态
*   当模态出现时，我们添加一个侦听器，`document`以便当您单击*任何位置*时，模态将被隐藏（并且侦听器也会被删除）
*   当模态出现时，我们还为它添加一个监听器，这样如果你点击模态，如果不隐藏它：只有在你点击它外部时，模态才会隐藏

注意：如果您没有使用 jQuery 1.7 或更高版本，请替换`.on()`为`.bind()`,`.off()`和`.unbind()`

# delphi - 从 MSBuild 在 OS X 上运行 Delphi 程序

> ID：12455424
> 
> 赞同：3
> 
> 时间：2012-09-17T08:16:32.943
> 
> 标签：delphi, delphi-xe2

我们的大部分自动化构建都在 Windows 上运行，但生成帮助文件索引和代码签名需要 OS X。有没有办法从 MSBuild 在 OS X 上运行 Delphi 程序？从 IDE 中执行此操作非常简单，但我想自动化它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:20:25.357

对于多平台构建步骤的自动化，我强烈推荐像[Hudson这样的 CI 工具](http://hudson-ci.org/) / [Jenkins](http://jenkins-ci.org/)这样的 CI 工具。

您可以将构建任务分配给在 OSX 上运行的特定代理。构建的组件将在正确的操作系统上创建。

如果您的目标是完全构建自动化，CI 工具值得一看或两个。

# graphics - 图像大小调整：什么是“过滤器”？

> ID：12455426
> 
> 赞同：6
> 
> 时间：2012-09-17T08:16:42.797
> 
> 标签：graphics, 2d, image-scaling, cg

我正在尝试了解图像调整大小的工作原理-请有人向我解释一下“过滤器”有什么用？

*   过滤器是否计算源像素对目标像素的贡献？

*   有像“box”和“gaussian”这样的过滤器，但是有没有一个叫做“bicubic”的过滤器？我是否在这里混合了两个概念，一个是“卷积滤波器”和......？

*   是否可以对放大和缩小使用相同的过滤器？（很高兴看到这样的示例代码）

*   是否需要先在一个维度上拉伸图像，然后再在另一个维度上拉伸？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T22:22:15.393

在图像大小调整中，过滤器避免了一种称为[混叠](http://en.wikipedia.org/wiki/Aliasing)的现象。如果您尝试在没有过滤器的情况下调整大小，则锯齿通常表现为令人讨厌的像素化效果，在动画时尤其明显......

回答你的观点：

*   过滤器会计算每个源像素对每个目标的贡献程度。对于调整大小，您需要一个*线性过滤器*，这非常简单：过滤器可以看作是一个小灰度图像；实际上，您将过滤器集中在与每个输出像素对应的位置上，将每个附近的像素乘以该位置的过滤器值，然后将它们相加以获得输出像素值。

*   所有这些过滤器都是“卷积过滤器”，因为卷积是上述操作的数学名称。“盒子”过滤器实际上看起来像一个盒子——盒子内的每个像素的权重都是相等的，而“高斯”过滤器是更圆的斑点，在边缘向零羽化。

*   放大和缩小最重要的是为您的过滤器选择合适的*尺寸。*简而言之，您希望根据输入和输出中分辨率最低的任何一个来缩放过滤器。第二个最重要的事情是避免坏过滤器：“盒子”过滤器是您尝试调整大小而不过滤时通常得到的；计算机图形硬件提供的“双线性”过滤器产生平庸的放大，但提供的尺寸错误用于缩小。

*   出于性能原因，希望先在一个维度上缩放图像，然后再在另一个维度上缩放图像。这意味着您的过滤器运行得更快：时间与过滤器宽度成正比，而不是与过滤器面积成正比。这里讨论的所有过滤器都是“可分离的”，这意味着您可以通过这种方式应用它们。

如果您选择高质量的过滤器，确切的形式并不像您想象的那么重要。有两类好的滤波器：全正滤波器，如“gaussian”，倾向于模糊的一面，负波瓣滤波器，如“lanczos”，锐利，但可能会产生轻微的振铃效应。请注意，“双三次”过滤器是一个类别，其中包括全正的“B-spline”，以及具有负波瓣的“Mitchell”和“Catmull-Rom”。

# javascript - 设置字数限制

> ID：12455435
> 
> 赞同：3
> 
> 时间：2012-09-17T08:17:28.143
> 
> 标签：javascript, jquery

在我的拼写游戏中，我将 html 中的单词存储在“ul”中。这些单词然后填充一个网格，以便人们可以拼写它们。问题是列表中的所有单词都会出现，我想要它，所以我可以在某处说出我想从列表中取出多少单词来填充网格。最好我希望它在 html 中，但在脚本中会很好。

有人可以告诉我如何去做吗？

这是单词列表...

```
<ul style="display:none;" id="wordlist">

    <li data-word="mum" data-audio="http://www.wav-sounds.com/cartoon/porkypig2.wav" data-pic="http://www.clker.com/cliparts/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png"></li>

    <li data-word="cat" data-audio="http://www.wav-sounds.com/cartoon/bugsbunny2.wav" data-pic="http://www.clker.com/cliparts/c/9/9/5/119543969236915703Gerald_G_Cartoon_Cat_Face.svg.med.png"></li>

    <li data-word="bear" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/a/2/c/0/1195440948271207911zeimusu_spotty_dog.svg.med.png"></li>

    <li data-word="bug" data-audio="http://www.wav-sounds.com/cartoon/daffyduck2.wav" data-pic="http://www.clker.com/cliparts/4/b/4/2/1216180545881311858laurent_scarabe.svg.med.png"></li>

    <li data-word="rat" data-audio="http://www.wav-sounds.com/cartoon/bugsbunny1.wav" data-pic="http://www.clker.com/cliparts/C/j/X/e/k/D/mouse-md.png"></li>

    <li data-word="father" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/3/a/6/6/119544474191128182Gerald_G_Man_Face_6_-_World_Label.svg.med.png"></li>

  </ul> 
```

由于动态创建网格的脚本相当长，因此只需提琴就更容易了... [http://jsfiddle.net/smilburn/Dxxmh/18/](http://jsfiddle.net/smilburn/Dxxmh/18/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:09:50.147

在我看来，您只需要将 UL 的数量更改为您想要的字数

```
for (i = 0; i < ul.children.length; ++i) {
    listOfWords.push({
        "name": ul.children[i].getAttribute("data-word"),
        "pic": ul.children[i].getAttribute("data-pic"),
        "audio": ul.children[i].getAttribute("data-audio")
    });
} 
```

只有两个s 处于活动状态的[DEMO](http://jsfiddle.net/mplungjan/HZX6k/)`LI` - 它提供了两组单词

否则做

```
var maxWords = 20; // larger or equal to 6 to cover the picture
for (i = 0; i < maxWords; ++i) {
  listOfWords.push({
    "name": ul.children[i].getAttribute("data-word"),
    "pic": ul.children[i].getAttribute("data-pic"),
    "audio": ul.children[i].getAttribute("data-audio")
  });
}

for (var x = 0; x < listOfWords.length; x++) { // change here too 
```

* * *

随机的

```
var maxWords = 20; // larger or equal to 6 to cover the picture
var alreadyStored ="";
var aWord,idx;
while (listOfWords.length < maxWords) {
  idx = Math.floor(Math.random()*ul.children.length);
  aWord = ul.children[idx].getAttribute("data-word");
  if (alreadyStored.indexOf("@"+aWord+"@")!=-1) continue;
  listOfWords.push({
    "name": aWord,
    "pic": ul.children[idx].getAttribute("data-pic"),
    "audio": ul.children[idx].getAttribute("data-audio")
  });
  alreadyStored += "@"+aWord+"@";
}
alreadyStored =null; 
```

# qt - 与 QtOpenGl 之类的抽象相比，使用 OpenGl 的绘图要求应该有多低？

> ID：12455441
> 
> 赞同：1
> 
> 时间：2012-09-17T08:18:07.333
> 
> 标签：qt, opengl

我需要做一些 3-D 应用程序并计划为此选择一些库。我以前有使用 Qt-qml 的经验。

我阅读了有关 OpenGL 的信息，发现基本上当您的绘图要求非常*低*时必须使用它。

我还发现有一个叫做 QtOpenGl 的东西。

Q1。QtOpenGl 是否不如 OpenGL 强大，因为它只是提供了一些 OpenGL 功能的包装器？还是与使用具有更高抽象级别的优势的 OpenGL 一样好？

Q2。我还发现有一种叫做 Qt-3D 和 Qt-Quick3D 的东西。由于我以前使用 qml 的经验，我运行了一些示例示例并发现它易于使用。

有人可以分享与 OpenGL 本身相比它有多*强大的经验吗？*

我的基本问题是我应该使用 OpenGl 而不是像 QtOpenGl 这样的更高抽象的绘图要求应该有多*低？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:13:00.267

Q1：Qt OpenGL 模块并不完全是 OpenGL 的封装。它是 GLX、WGL 或 AGL 的包装器。无论如何，您都可以使用 Qt OpenGL 引擎使用 QPainter 进行渲染。查看文档以查看它是否对您来说足够低。反正只有2D。

Q2：据我所知，Qt3D 将成为 Qt5 的一部分。这取决于你想做什么。如果你想实现 3D 游戏，那可能是相当冒险的。只有您知道它是否足以满足您的需求。

# android - 当网页从android的网络视图中的另一个网页重定向时如何跟踪网页

> ID：12455446
> 
> 赞同：1
> 
> 时间：2012-09-17T08:18:29.730
> 
> 标签：android

我在 webview 中加载“www.gmail.com”，登录后将加载一个新网页，即我们的 gmail 帐户页面。

当我提交登录详细信息并且新网页正在加载时，我必须跟踪该 url，我不需要任何硬编码值来重定向到任何网页，我想在从另一个网页加载网页时获取该 url，如何我做到了。请帮助我。

这是我的代码：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    title_text=(TextView)findViewById(R.id.urltxt);
    showWeb=(WebView)findViewById(R.id.webview_details_body);
    showWeb.setWebViewClient(new HelloWeb());
    showWeb.getSettings().setBuiltInZoomControls(true);
    showWeb.getSettings().setLoadWithOverviewMode(true);//show the webpage in fullsize with all info
    showWeb.getSettings().setUseWideViewPort(true);
    WebSettings webSettings = showWeb.getSettings();
    webSettings.setJavaScriptEnabled(true);

    showWebClick();

}
private void showWebClick() {
            showWeb.loadUrl("http://www.gmail.com/");

}

public boolean onKeyDown(int keyCode,KeyEvent event){
    if((keyCode==KeyEvent.ACTION_DOWN)&&showWeb.canGoBack()){
        showWeb.goBack();
        return true;
    }
     return super.onKeyDown(keyCode, event);
    }
public class HelloWeb extends WebViewClient{
    @Override
    public boolean shouldOverrideUrlLoading(WebView vw,String url){
        vw.loadUrl(url);
        s=vw.getUrl();
        title_text.setText( s);
        return super.shouldOverrideUrlLoading(vw, url);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:49:45.647

您`webview`很可能会使用其重定向的 url 调用其中一个或其中一个`shouldOverrideUrlLoading`。`onLoadResource``webviewclient`

如果我理解您的问题是正确的，请尝试覆盖`onLoadResource`您`WebViewClient`并查看 url 参数。

Using`onLoadResource`还将生成其他资源的 url，例如图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:26:18.370

您可以使用 webview 客户端的 getUrl() 方法来实现此目的。

但是，这并不总是与传递给 WebViewClient.onPageStarted 的 URL 相同，因为尽管该 URL 的加载已经开始，但当前页面可能没有改变。

您可以参考以下链接：

[http://developer.android.com/reference/android/webkit/WebView.html#getUrl%28%29](http://developer.android.com/reference/android/webkit/WebView.html#getUrl%28%29)

所以你必须在 onPageFinished 方法上调用 geturl 方法。会很好的。

@Override public void onPageFinished(WebView view, String url) {

```
 /*do your stuff here.*/

    } 
```

# jquery - 无法手动更改可拖动 div 的顶部/左侧？

> ID：12455447
> 
> 赞同：1
> 
> 时间：2012-09-17T08:18:36.920
> 
> 标签：jquery

我的[代码](http://jsfiddle.net/dSc9V/4/)：

# HTML

```
<div id="score">&nbsp;</div>

<div class="myDiv">1</div>
<div class="myDiv">2</div>
<div class="myDiv">3</div> 
```

# CSS

```
#score
{
    height:50px;
}

.myDiv
{
    width:40px;
    height:40px;
    margin:10px;
    border:1px solid #000000;
    float:left;
    cursor:pointer;
    text-align:center;
    line-height:40px;
    position:relative;
    top:0;
    left:0;
}​ 
```

# jQuery

```
$(".myDiv").draggable({
    start: function () {
        ImmagineDrag = $(this);
    },
    drag: function () {
        currentImageX = ImmagineDrag.position().top;

        $('#score').html(currentImageX);

        if(currentImageX > 200) {
            ImmagineDrag.css({ 'top': '0', 'left': '0' });
        }            
    },
    stop: function () {
    }
});​ 
```

例如，我希望当我将元素拖动超过 200 像素（y 轴）时，它将当前 div 移动到 0 0 的位置。似乎这不起作用。我该怎么做/强迫它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:48:26.313

试试这个，

[演示](http://jsfiddle.net/9QmbG/1/)

```
jQuery(document).ready(function($) {
        $(".myDiv").draggable({
            start: function () {
                ImmagineDrag = $(this);
            },
            drag: function () {
                currentImageX = ImmagineDrag.position().top;

                $('#score').html(currentImageX);

                if(currentImageX > 200) {   
                    ImmagineDrag.css({ 'top': '0', 'left': '0' });
                    return false; 
                }            
            },
            stop: function () {
            }
    }); 
```

[参考](https://stackoverflow.com/questions/730409/jquery-ui-call-start-drag-manually#answer-7881680)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T19:03:07.413

好的，我一直在玩这个，我有一些代码可以让你继续前进，我认为这段代码正在做你想做的事，请参阅[**jsfiddle**](http://jsfiddle.net/RXBjH/)。

我不得不看一下 jqueryui 源代码以找到一种方法来做你想做的事，代码使用一些私有属性并调用私有方法来实现这一点。我的 hack 背后的基本思想是我想 [`cursorAt`](http://jqueryui.com/demos/draggable/#cursor-style)在事件时设置属性`drag`，因为`cursorAt`仅在拖动事件时由 jqueryui 源评估`start`，所以即使您稍后更改它，也不会使用新值。

因此，通过调用`_adjustOffsetFromHelper()`它重新解释您作为新`cursorAt`属性传递的参数并应用它。

现在一个棘手的部分是找出正确的**顶部**和**左侧**值以传递新`cursorAt`属性。我通过使用私有属性`.offset.click.top`和尽可能地近似它们`.offset.click.left`，但是对于某些**顶部**不匹配并且必须硬编码一个值的东西，它可能是一些边距偏移等，您可以使用其他私有属性`.offset.top`来尝试摆脱硬编码的值。

要进一步改进此代码，您最好查看 [**可拖动的 jqueryui 源代码**](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.draggable.js)，特别是该`_mouseStart()`方法（在**drag_start**时间执行的代码）具有一些您可能会发现有用的定位变量。

**jsFiddle代码的粘贴：**

HTML：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script>

<div id="score">&nbsp;</div>

<div class="myDiv">1</div>
<div class="myDiv">2</div>
<div class="myDiv">3</div> 
```

CSS：

```
#score
{
    height:50px;
}

.myDiv
{
    width:40px;
    height:40px;
    margin:10px;
    border:1px solid #000000;
    float:left;
    cursor:pointer;
    text-align:center;
    line-height:40px;
    position:relative;
    top:0;
    left:0;
}​ 
```

JAVASCRIPT：

```
var adjusted = false;
$(".myDiv").draggable({
    start: function () {
        ImmagineDrag = $(this);
        startImageX = ImmagineDrag.position().top;
        startImageY = ImmagineDrag.position().left;
    },
    drag: function () {
        currentImageX = ImmagineDrag.position().top;
        currentImageY = ImmagineDrag.position().left;

        $('#score').html(currentImageX);

        if(currentImageX > 200) {
            if (!adjusted) {
                adjusted = true;
                drg = ImmagineDrag.data("draggable");
                ctop = drg.offset.click.top;
                cleft = drg.offset.click.left;
                newtop = currentImageX - startImageX + ctop;
                newleft = currentImageY - startImageY + cleft;
                drg._adjustOffsetFromHelper({top:newtop-12,left:newleft});
            }
        }            
    },
    stop: function () {
    }
});​ 
```

​ ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:46:29.170

就在您的以下行之后：

```
ImmagineDrag.css({ 'top': '0', 'left': '0' }); 
```

添加这个：

```
return false; 
```

那应该做你想做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T08:23:08.820

拖动处理程序不断更新位置，您可以将代码移动到[停止处理程序](http://jsfiddle.net/dSc9V/7/)。这样，当您停止拖动时，它会恢复到 0,0 点。

[可拖动插件内置了将移动限制](http://jqueryui.com/demos/draggable/#constrain-movement)到轴或边界元素的功能，您应该改用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T08:23:32.130

```
var ImmagineDrag  = null,
    currentImageX = null;

$(".myDiv").draggable({
    start: function() {
        ImmagineDrag = $(this);
    },
    drag: function() {
        currentImageX = ImmagineDrag.position().top;
        $('#score').html(currentImageX);
    },
    stop: function() {
        // place your CSS code to stop function
        if (currentImageX > 200) {
            ImmagineDrag.css({
                'top': '0',
                'left': '0'
            });
        }
    }
}); 
```

***[演示](http://jsfiddle.net/dSc9V/8/)***

# c# - 项目中未包含 C# 表单

> ID：12455452
> 
> 赞同：0
> 
> 时间：2012-09-17T08:19:09.887
> 
> 标签：c#, visual-studio-2008

我遇到了这个奇怪的错误/冲突。我的申请中有两个表格。两者都有相同的命名空间，当我尝试创建下一个形式的对象时，它不会出现。这是我在 Form1 中的代码

```
Form2 form2 = new Form2();
form2.Show();
this.Hide(); 
```

当我在项目中添加另一个表单（如 form3.cs）时，它会显示出来。为什么这个“form2”不见了？虽然它在项目中可用。

表格 1 代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;
using System.Data.SqlServerCe;
using UHF_Demo;

namespace UHF_Demo
 {
   public partial class Form1 : Form
    {
      public Form1()
      {
        InitializeComponent();
    }

    private void submit_Click(object sender, EventArgs e)
    {
         {

        string query = "Select * from login_info where username = '" + username_tb.Text + "' and password = '" + password_tb.Text + "'";

        SqlCeConnection conn = new SqlCeConnection();

        conn.ConnectionString = @"Data Source =\Program Files\valcan\employeedb.sdf";

        SqlCeCommand cmd = new SqlCeCommand(query, conn);

        conn.Open();

        SqlCeDataReader dr = cmd.ExecuteReader();

        int counter = 0;

        while (dr.Read())
        {
            counter = counter + 1;

        }
        if (counter > 0)
        {
         Form2 form2 = new Form2();
            form2.Show();
            this.Hide();
        }
        else
        {
            MessageBox.Show("Invalid Login name or Password. Please try again ....");
        }

        conn.Close();
        dr.Close();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        // TODO: This line of code loads data into the 'locationds.login_info' table. You can move, or remove it, as needed.
        this.login_infoTableAdapter.Fill(this.locationds.login_info);

       }
      }
     }
    }} 
```

Form2 代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using System.Threading;
using System.Globalization;
using System.IO;

namespace UHF_Demo
{

public partial class MR6651_DEMO : Form
{
    public bool BeingId = false;

    byte[,] TagBuf = new byte[100, 14];
    byte TagCnt = 0;
    ComPort Port0 = new ComPort();
    private CultureInfo culinfo = CultureInfo.CurrentCulture;
    public MR6651_DEMO()
    {
        InitializeComponent();
        double CostomiseFQ = 900.000;
        for (int i = 0; i < 60; i++)
        {
            comboBox1.Items.Add(CostomiseFQ.ToString("#0.000")+"M");
            comboBox2.Items.Add(CostomiseFQ.ToString("#0.000") + "M");
            CostomiseFQ +=0.5;
        }
        MEMBANK.SelectedIndex = 1;
        WORDPTR.SelectedIndex = 0;
        WORDCNT.SelectedIndex = 0;
        cmbFreqType.SelectedIndex = 2;
        VALUE.Text = "";
        //tabPage3.Parent = null;
        if (culinfo.ToString() == "zh-CN")
        {
            this.Text = "UHF¶ÁÐ´ÑÝÊ¾";
            TabPage page1 = tabControl1.TabPages[0];
            page1.Text = "»¶Ó­";
            TabPage page2 = tabControl1.TabPages[1];
            page2.Text = "EPC²âÊÔ";
            //TabPage page3 = tabControl1.TabPages[2];
            //page3.Text = "6B²âÊÔ";
            label5.Text = "¹¦ÂÊ";
            label8.Text = "ÆµÂÊ";
            labStatusBar.Text = "×¼±¸¾ÍÐ÷";
            btnQueryPower.Text = "²éÑ¯";
            btnSetPower.Text = "ÉèÖÃ";
            EXIT.Text = "ÍË³ö";
            chkAutoClr.Text = "¹ýÂËÖØ¸´±êÇ©";
            ID.Text = "Ê¶±ð";
            btnEPClist.Text = "ÁÐ±í";
            button1.Text = "EPC¿é²Ù×÷";
            CLEAR.Text = "Çå¿Õ";
            label2.Text = "×ÖµØÖ·";
            label3.Text = "×Ö³¤¶È";
            label4.Text = "Êý¾Ý";
            READ.Text = "¶ÁÈ¡";
            WRITE.Text = "Ð´Èë";
            INIT.Text = "³õÊ¼»¯";
            label10.Text = "×Ö½ÚµØÖ·";
            label7.Text = "×Ö½Ú³¤¶È";
            label9.Text = "Êý¾Ý";
            btn6BID.Text = "Ê¶±ð";
            btn6BRead.Text = "¶ÁÈ¡";
            btn6BWrite.Text = "Ð´Èë";
            btn6BLock.Text = "Ëø¶¨";
            chkClear6B.Text = "¹ýÂËÖØ¸´±êÇ©";
            btn6BClear.Text = "Çå¿Õ";
            btnSaveFile.Text = "±£´æÎÄ¼þ";
            label1.Text = "Êý¾Ý¿é";
            cmbFreqType.Items.Clear();
            cmbFreqType.Items.Add("ÖÐ¹ú");
            cmbFreqType.Items.Add("±±ÃÀ");
            cmbFreqType.Items.Add("Å·ÖÞ");
            cmbFreqType.Items.Add("×Ô¶¨Òå");
            cmbFreqType.SelectedIndex = 2;
            listViewEPC.Columns[0].Text = "EPCÂë";
            listViewEPC.Columns[1].Text = "±àºÅ";
            label11.Text = "ÆðÊ¼Æµµã";
            label12.Text = "ÖÕÖ¹Æµµã";
            btn_locktid.Text = "ËøTID";
            btn_seelocktid.Text = "²é¿´TIDËø";
        }
    }
    private void EPC_DEMO_Load(object sender, EventArgs e)
    {
        if (Port0.Open() == 0)
        {
            if (culinfo.ToString() == "zh-CN")
            {
                labStatusBar.Text = "Í¨Ñ¶¶Ë¿Ú´ò¿ª³É¹¦!";
            }
            else
            {
                labStatusBar.Text = "Start conmunicate commport success!";
            }
            //aStatus = Port0.SetRf(10, 2);
            Thread.Sleep(500);
            btnQueryPower_Click(sender, e);
            Sound.PlayWAV(@"\Application Data\Rfid\wav\shutter.wav");
            for (int i = 0; i < 223; i++)
                ADDR6B.Items.Add(i.ToString());
            ADDR6B.SelectedIndex = 0;
            ByteCnt6B.SelectedIndex = 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:04:56.307

在您的 Form 2 代码中，没有名为 Form2 的类的类定义。我想这就是找不到它的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:05:03.110

你没有`Form2`课。你有一`MR6651_DEMO`堂课。尝试创建一个实例。您的编译器应该准确地告诉您出了什么问题。

文件名与包含在其中的类没有任何关系——它们经常匹配是卫生和理智的问题。=)

# node.js - 使用 node.js 缓存代理

> ID：12455453
> 
> 赞同：0
> 
> 时间：2012-09-17T08:19:13.240
> 
> 标签：node.js, proxy

有没有在 node.js 上创建缓存 http 代理服务器的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:02:41.457

您没有指定要在 node.js 中创建代理的原因。这是关于 node.js 中的代理的简单教程。[此](http://thechangelog.com/post/872114581/node-http-proxy-reverse-proxy-for-node-js)[node.js](http://toolbox.no.de/categories/Proxy)下可用的代理列表。这里是示例[代码](https://github.com/d11wtq/node-http-cache)。

# linux - 需要帮助从 Linux(ubuntu) 连接 MSSQL SERVER

> ID：12455455
> 
> 赞同：3
> 
> 时间：2012-09-17T08:19:35.080
> 
> 标签：linux, perl, unixodbc

我刚刚在 Ubuntu 中安装了 ODBC 驱动程序，但在从 Perl 连接数据库时仍然遇到问题。这是我在我的机器上所做的描述。

我从easysoft 网站安装了MSSQL 驱动程序和Unix ODBC。我机器中的路径详细信息如下：

ODBC 安装路径：-`user/local/easysoft/unixodbc`

数据源和驱动路径：`user/local/etc`示例代码：

```
#!/usr/bin/perl  
use strict;  
use DBI;   
my $dsn="DBI:ODBC:DRIVER={SQL Server};Server=xxx.xxx.xxx.xxx,1433;database=DB_name";  
my $dbh = DBI->connect($dsn, "username", "password" ,{AutoCommit => 1} )
            or die DBI::errstr; 
```

错误：

```
DBI connect('DRIVER={SQL Server};Server=xxx.xxx.xxx.xxx,1433;database=DB_name','username',...) failed: unixODBCDriver Manager Can't open lib 'SQL Server' : file not found (SQL-01000) at sample.pl line 5 
unixODBCDriver ManagerCan't open lib 'SQL Server' : file not found (SQL-01000) at sample.pl line 5. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:01:32.293

```
DRIVER={SQL Server} 
```

您的代码正在尝试连接到 odbcinst.ini 文件中的 [SQL Server] 驱动程序。但是，如果您使用的是[Easysoft ODBC-SQL Server 驱动程序](http://www.easysoft.com/products/data_access/odbc-sql-server-driver/index.html)，您将需要使用：-

```
Driver={Easysoft ODBC-SQL Server} 
```

# excel - 一个单元格中的多个功能，Microsoft Excel 2003

> ID：12455460
> 
> 赞同：1
> 
> 时间：2012-09-17T08:19:45.383
> 
> 标签：excel, excel-formula

我想在一个单元格中添加多个函数，显示单独的答案，例如 |

`="Total 1 =>" &SUM(A3:A44)`
`="Count 1 =>" &COUNT(B5:B88)`

所有这些功能都进入一个单元格，例如这里的单元格`A1`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:07:27.943

只需将它们连接在一起...

```
="Total 1 =>" & SUM(A3:A44) & " Count 1 =>" & COUNT(B5:B88) 
```

# java - 运行解压缩代码后，primefaces 表单冻结

> ID：12455461
> 
> 赞同：0
> 
> 时间：2012-09-17T08:19:48.327
> 
> 标签：java, file-upload, primefaces, unzip, commandlink

所以我使用 Primefaces 3.0 上传了一个 zip 文件，之后我的 bean 代码解压缩了该文件。primefaces文件上传代码如下：

```
 <h:form id="step3" enctype="multipart/form-data" >
            <p:panel id="p3" header="STEP 2: Upload Data File(s)" visible="#{uploadData.panel2}">
                <h:outputText value="Select data files to upload." />
                <br />
                <br />
                <p:fileUpload fileUploadListener="#{uploadData.handleFileUpload}"
                        id="fu2"
                        mode="advanced"
                        update="messages3, b2"
                        multiple="true"
                        disabled="#{uploadData.fileupload}" />
                <p:growl id="messages3" showDetail="true" />
                <br />
                <div class="finish_button">
                    <p:commandLink id="b2" value="." actionListener="#{uploadData.storedetails('add')}" update="messages3, b2, fu2, @form step2:fu1" disabled="#{uploadData.button2}" />
                </div>
            </p:panel>
        </h:form> 
```

上传文件工作正常，我使用标准的 primefaces 展示代码，然后我的代码执行此操作（所有这些代码都在视图范围的 bean 中）：

```
 ret = d.unzip(fname, dir+"/");
            button2 = false; 
```

'd' 是一个无范围的类。解压缩功能也适用，因为所有文件都在目标目录中解压缩，但是发生了一些事情，即使 button2 设置为 false，我也无法在运行解压缩后在我的界面中单击它。解压如下：

```
public int unzip(String filename, String zipPath) {

    try {
        ZipFile zipFile = new ZipFile(filename);
        Enumeration e = zipFile.entries();

        while(e.hasMoreElements()) {
            ZipEntry entry = (ZipEntry)e.nextElement();
            File destinationFilePath = new File(zipPath,entry.getName());

            //create directories if required
            destinationFilePath.getParentFile().mkdirs();

            //if the entry is directory, leave it. Otherwise extract it
            if(entry.isDirectory()) {
                continue;
            }
            else {
                System.out.println("Extracting " + destinationFilePath);

                //Get the InputStream for current entry of the zip file 
                BufferedInputStream bis = new BufferedInputStream(zipFile.getInputStream(entry));

                int b;
                byte buffer[] = new byte[1024];

                //read the current entry from the zip file, extract it
                //and write the extracted file
                FileOutputStream fos = new FileOutputStream(destinationFilePath);
                BufferedOutputStream bos = new BufferedOutputStream(fos, 1024);

                while ((b = bis.read(buffer, 0, 1024)) != -1) {
                    bos.write(buffer, 0, b);
                }

                //flush and close streams
                bos.flush();
                bos.close();
                bis.close();
                fos.close();
            }
        }
        zipFile.close();
        return 1;
    }
    catch(IOException e) {
        showmessage("Uh oh", "There was a problem unzipping the files: "+e.getMessage());
        return -1;
    }
} 
```

上传和解压缩一个小文件（3Mb）工作正常，文件解压缩后我可以单击表单中的 b2。但是对于大文件，即使我将 b2 设置为 disabled='true' 并尝试上传和解压缩，在代码解压缩后整个文件 b2 仍然无法在表单中单击。因此，由于没有更好的词，关于解压缩过程的某些内容似乎是“挂起”表单或不使其响应，但我不知道为什么。在表单之外，我还有其他响应式按钮 - 它只是与上传小部件相同的表单内的那个按钮。

# android - 在 Android Json 对象中编码特殊字符

> ID：12455462
> 
> 赞同：0
> 
> 时间：2012-09-17T08:19:49.500
> 
> 标签：android, encoding

我正在向服务器发送 json 对象，我的 url 具有 json 对象。Json 对象具有特殊字符，如何在 android 中编码特殊字符，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:26:21.880

使用[UrlEncode.encode(yourstring, "UTF-8")](http://developer.android.com/reference/java/net/URLEncoder.html) ;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:30:50.287

如果我理解您，您想使用 url 本身（即作为参数）发送一个 json 对象。如果安全性对您不重要（它将是可见的），您可以使用`[Base64][1]`.

例如，您可能应该使用您的`json`对象将其转换为`byte[]`，称为`jsonbytes`，然后使用`Base64.encodeToString(jsonbytes, Base64.URL_SAFE)`并将其作为参数发送。

然后，您的服务器应该将此 Base64 编码的字符串转换为 json 对象，如果您使用的是 PHP，这往往很简单：

```
$jsonString = base64_decode($_GET['json']);
$json = json_decode($jsonString, TRUE); 
```

这将为您提供 PHP 中的关联数组。如果您只想要 json 字符串，请跳过最后一步。

# c++ - 在全局变量的标题和源中的“extern int x”中使用extern关键字是否正确？

> ID：12455467
> 
> 赞同：2
> 
> 时间：2012-09-17T08:20:03.540
> 
> 标签：c++, global-variables, extern

有一个名为的变量`BOT_TIME`随我的游戏难度而变化，因此不是`const`. 有很多文件使用它。我打算将它用作全局变量。

**1）**在`constants.h`我声明它`extern int BOT_TIME`。在`constants.cpp`，我声明它`extern int BOT_TIME`。

BUILD => 所有源中对变量的未定义引用（是的，我已经包含了标题）。

**2）**在`constants.h`我声明它`int BOT_TIME`。在`constants.cpp`，我声明它`int BOT_TIME`。由于`non-consts`默认情况下`extern`，我决定保留该关键字。

BUILD => 变量的多个定义（显示在包含 constants.h 的每个源文件中）

**3）**在`constants.h`我声明它`extern int BOT_TIME`。在`constants.cpp`，我声明它`int BOT_TIME`。

这行得通。

问题出在哪里？

将变量初始化为 in`constants.cpp`使其适用于情况 1 和 3。

这是怎么回事？哪种方法是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:21:47.490

您可以根据需要多次声明一个变量，您可以而且必须只定义一次。

```
extern int BOT_TIME; 
```

是一个声明。

```
int BOT_TIME; 
```

是一个定义。

定义必须出现在单个实现文件中。

> 由于默认情况下非常数是 extern ，所以我决定保留该关键字。

没有。你怎么想的？

要回答问题：

1）没有定义，只有声明。

2）假设是错误的。您多次定义符号。

3）它有效，因为这是正确的方法。

从评论：

当你用 声明一个变量时`extern`，你指定它有外部链接，是的，但你只声明，而不是定义它。如果您不使用`extern`关键字，它仍然具有外部链接，但它也是一个定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T08:24:52.763

您需要在头文件中声明变量并在源文件中定义一次且仅一次。
正确的方法是：

**常量.h**

```
//declare the symbol as extern
extern int BOT_TIME; 
```

**常量.cpp**

```
#include "constants.h"
//define the symbol once and only once
int BOT_TIME; 
```

**XXXX.cpp**

```
#include "constants.h"

//Include the header file which declares it extern in any source file 
//you want to access it
//use BOT_TIME 
```

您可以多次声明一个变量，但您只能定义一次。
如果您多次定义一个变量，则违反了**[一次定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)**。

```
extern int BOT_TIME; 
```

是一个声明，并且`#1`只进行两次相同的声明，这是允许的，但它不起作用，因为您从未定义变量。请注意，每个`extern`变量都必须定义一次，否则编译器找不到它的定义并因此抱怨。

在`#2`您在不同的翻译单元中多次定义相同的符号。这违反了单一定义规则，因此链接器报告相同。

`#3`是正确的方法。

**好读：**
[定义和声明有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:34:27.430

```
extern int x;     // declaration
int x;            // definition
extern int x = 3; // definition 
```

通常，您需要在头文件中声明，用于需要了解`x`. 您需要**一个**定义，在一个源文件中，以便实际上有一个 object `x`。

# sql-server-2008 - T-SQL 替换“西里尔符号”返回 '????'

> ID：12455473
> 
> 赞同：0
> 
> 时间：2012-09-17T08:20:36.623
> 
> 标签：sql-server-2008, tsql, encoding, replace

我有一个函数可以将 CSV 列表转换为表中的 nvarchar(max) 记录。我注意到它不适用于西里尔字母，问题是这里的替换：

```
DECLARE @XML xml = N'<r><![CDATA[' + REPLACE(@List, ',', ']]></r><r><![CDATA[') + ']]></r>' 
```

如何使替换与西里尔符号一起使用？例如'тест'。

@List 是 NVARCHAR(MAX)，我使用的是 SQL Server 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:42:44.773

您是否将`@List`变量定义为 nvarchar？替换将适用于 nvarchars

```
declare @list nvarchar(50) = N'те,ст'
select @list
DECLARE @XML xml = N'<r><![CDATA[' + REPLACE(@List, ',', ']]></r><r><![CDATA[') + ']]></r>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:01:01.630

该`N''`表示法用于声明 Unicode 字符串文字。如果您定义一个变量 NVARCHAR，它会自动启用 Unicode（因此不需要（或者更确切地说：没有办法）额外声明`N`for @variables - 它是字符串文字的一部分）。

由于您在 中获得西里尔字符`SELECT N'тест'`，您应该检查变量 @List 的分配位置，以及它的值是什么。

不确定您的 CSV 解析器如何处理 Unicode 字符，但问题的根源可能是

*   不处理文件编码
*   在分配给 @List 之前分配给 VARCHAR 列或变量

# c# - 由 FullTypeName 演员

> ID：12455477
> 
> 赞同：2
> 
> 时间：2012-09-17T08:20:43.743
> 
> 标签：c#, casting

我必须将一个对象转换为一个对象，在那里我只有`typename`一个字符串。

例如：

我有 type-string`System.DateTime`和 string `2012-09-17T10:19:23.5369243+02:00`。现在我想要一个`DateTime`带有字符串值的对象。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:36:39.650

通常这种转换不会通过演员表暴露出来。这有很多原因（对于另一个问题，这可能是一个不错的话题）。

有时，对象的字符串表示对于该对象来说是相当“标准的”。例如，颜色可能总是被序列化为逗号分隔的 RGB 三元组。

当您需要解析的类型引入依赖于语言环境的表示时，事情变得更加困难：例如，日期。在这种情况下，框架设计者决定不引入类似的接口，而是使用第三个对象： s、s 和转换类`IParseable`来做这种事情。它使您的代码更加复杂，但它允许管理将工作委托给另一个类的非常复杂的转换，请查看：`TypeConverter``TypeDescriptor`

*   [MSDN 上的System.ComponentModel.TypeConverter](http://msdn.microsoft.com/en-us/library/System.ComponentModel.TypeConverter.aspx)。
*   [MSDN 上的System.ComponentModel.TypeDescriptor](http://msdn.microsoft.com/en-us/library/system.componentmodel.typedescriptor%28v=vs.100%29.aspx)。
*   [理解 TypeDescriptor：设计时代码的元数据引擎](http://blogs.msdn.com/b/parthopdas/archive/2006/01/03/509103.aspx)

对于原始类型，您甚至可能不需要使用它们：您可以依赖`IConvertible`接口和[System.Convert](http://msdn.microsoft.com/en-us/library/system.convert%28v=vs.100%29.aspx)类。

你不能用强制转换来做到这一点（感谢上帝，在我看来），但你可以编写一个`Parse`接受 a`string`并返回你需要的类型的泛型方法，比如：

```
T Parse<T>(string value) 
```

我记得有一个不错的开源类型转换库（[Universal Type Converter](http://www.codeproject.com/Articles/248440/Universal-Type-Converter)）。它使用可能找到的将类型转换为另一种类型的所有内容来管理大量转换（例如，想象一下您可以为一个`bool`值使用多少种不同的字符串表示形式）。即使您不直接使用它，您也应该阅读文章以了解它是如何工作的（并查看源代码以了解极端情况是如何处理的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:42:01.000

您的问题的答案可以在所有其他答案中找到，等待拼凑。:)

1.  从您的类型字符串中获取类型，就像 akhisp 所说：

    ```
    Type dateTimeType = Type.GetType("System.DateTime"); 
    ```

2.  现在，使用类型转换器将字符串更改为 DateTime：

    ```
    object date = Convert.ChangeType("2012-09-17T10:19:23.5369243+02:00", dateTimeType); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:25:46.187

我要做的是使用 Type.GetType(String) 方法来获取对象的类型。然后我会调用 Activator.CreateInstance(Type Object[]) 来构造该对象的实例，假设您知道有一个接受字符串的构造函数。

# javascript - 在 Json 对象中搜索元素

> ID：12455479
> 
> 赞同：2
> 
> 时间：2012-09-17T08:21:15.033
> 
> 标签：javascript, jquery, arrays, json, indexing

我有一个对象数组（JSONized）。像这样的东西：

```
popUpList = [{
    "id":1,
    "Name":"My Pop Up",
    "VideoUrl":"www.xyz.com/pqr",
    "AddToBasketUrl":"www.abc.com?addtoBaketid=1",
    "addedToBasket": true
},
{
    "id":2,
    "Name":"My 2nd Pop Up",
    "VideoUrl":"www.xyz.com/mno",
    "AddToBasketUrl":"www.abc.com?addtoBaketid=2",
    "addedToBasket": false
}] 
```

我的情况是可以从弹出窗口或主页添加剪辑。因此，当从页面将某些内容添加到购物篮时，我需要编辑 JSON 对象。

我尝试使用 $.inArray() 和类似的方法。我认为要么我没有以正确的方式做这件事，要么错过了一些东西。或者，这不适用于 JSON 对象，我必须遍历每个对象。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:46:11.897

[`Array.indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)(what `$.inArray`is) 确实需要元素来搜索并返回它的索引。

如果您需要搜索以前不知道的元素，则需要手动循环（Underscore 之类的库有帮助器）：

```
var idToSearchFor = …;
for (var i=0; i<popUpList.length; i++)
    if (popUpList[i].id == idToSearchFor) {
        // do something
    } 
```

如果您想建立一个索引以更快地访问弹出窗口，您也可以这样做。它还具有明确的优点（每个 id 只有一个元素）：

```
var popUpsById = {};
for (var i=0; i<popUpList.length; i++)
    popUpsById[popUpList[i].id] = popUpList[i];

if (idToSearchFor in popUpsById)
    // do something with popUpsById[idToSearchFor]
else
    // create one? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:36:32.827

我不太确定您要明确搜索什么，您可以使用以下方法访问对象中的每个值：

```
 vat id = "1";

    // this given example wont work for you bec. of your structure
    // but its all about the idea.

    var objectOne = yourJsonObject[id];

    // You can also append them
    var myValue = yourJsonObject.address.zip; 
```

与获取的第一个对象的任何其他项目类似。

为此，我将创建一个如下所示的自定义搜索功能：

```
$.each(popUpList, function(i, v) {
    var entryYouWantToFind = "addedToBasket";
        if(v[entryYouWantToFind])
        {
            // do your stuff here.
        }
    }
}); 
```

我希望我能给你提示。

# delphi - XPATH 中的正则表达式

> ID：12455480
> 
> 赞同：3
> 
> 时间：2012-09-17T08:21:16.920
> 
> 标签：delphi, xpath

如何使用 XPATH 的匹配功能在 XML 标记中搜索整个单词？

以下代码返回“未知方法**匹配**”：

```
XML_Doc:=CreateOleObject('Msxml2.DOMDocument.6.0') as IXMLDOMDocument3;
XML_DOC.selectNodes('/DATI/DATO[matches(TEST_TAG,"\bTest\b")]'); 
```

示例 XML 文件

```
<DATI>
 <DATO>
   <TEST_TAG>Test</TEST_TAG>
 </DATO>
 <DATO>
   <TEST_TAG>Test21</TEST_TAG>
 </DATO>
 <DATO>
   <TEST_TAG>Abc</TEST_TAG>
 </DATO>
</DATI> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:35:42.273

`matches`是 XPath 2，Msxml 只支持 XPath 1。
据我所知，Delphi 没有支持 XPath 2 的库。（虽然我为 Freepascal 写了一个 XPath 2 库，但移植应该没有那么难）

你可以使用

```
/DATI/DATO[not(contains(TEST_TAG," "))] 
```

查找不包含空格的单词，即 XPath 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:35:01.610

**假设您所说的“单词”是指**：

> *以拉丁字母开头，包含的所有字符都是拉丁字母或十进制数字*，

可以使用 XPath 表达式准确地找到这些：

```
 //TEST_TAG
    [contains('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',
              substring(.,1,1)
              )
   and
     not(
     translate(.,
               'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',
               '')
         )
    ] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <xsl:copy-of select=
     "//TEST_TAG
        [contains('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',
                  substring(.,1,1)
                  )
       and
         not(
         translate(.,
                   'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',
                   '')
             )
        ]
   "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于此 XML 文档**（提供的文档，但添加了非法“单词”）时：

```
<DATI>
    <DATO>
        <TEST_TAG>Test</TEST_TAG>
    </DATO>
    <DATO>
        <TEST_TAG>#$%Test21</TEST_TAG>
    </DATO>
    <DATO>
        <TEST_TAG>Abc</TEST_TAG>
    </DATO>
</DATI> 
```

**计算上述 XPath 表达式并将所选元素复制到输出：**

```
<TEST_TAG>Test</TEST_TAG>
<TEST_TAG>Abc</TEST_TAG> 
```

**请注意**：

当前接受的答案错误地产生了这个：

```
<TEST_TAG>#$%Test21</TEST_TAG> 
```

作为字符串值为“单词”的元素。

# python - 检查 Flask 中 request.args 中是否存在键

> ID：12455484
> 
> 赞同：20
> 
> 时间：2012-09-17T08:21:35.377
> 
> 标签：python, flask

我正在使用烧瓶。

我正在做一个 ajax 帖子，我需要检查是否存在密钥

我尝试了以下方法，但没有奏效

```
if request.args.has_key('campaign_id_crid'):
        print True 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-17T08:53:28.933

您的示例在 python 2.x 代码中运行良好

无论如何，虽然`dict.has_key`仍然是关于（在现有的 2.x 代码中 - 但在 Python 3 中删除），但通常认为使用更 Pythonic 的`in`运算符，例如：

```
if 'campaign_id_crid' in request.args:
    pass # do something 
```

# c# - 如何在windows应用程序中打开表格内的word文档

> ID：12455487
> 
> 赞同：3
> 
> 时间：2012-09-17T08:21:39.737
> 
> 标签：c#, winforms

我需要在 Windows 窗体应用程序的面板控件中打开一个 word 文档来查看/编辑文件并保存。

我使用这个声明：

```
 [DllImport("user32.dll")]
    public static extern int FindWindow(string strclassName, string strWindowName);

    [DllImport("user32.dll")]
    static extern int SetParent(int hWndChild, int hWndNewParent);

    [DllImport("user32.dll", EntryPoint = "SetWindowPos")]
    static extern bool SetWindowPos(
        int hWnd,               // handle to window
        int hWndInsertAfter,    // placement-order handle
        int X,                  // horizontal position
        int Y,                  // vertical position
        int cx,                 // width
        int cy,                 // height
        uint uFlags             // window-positioning options
    );

    [DllImport("user32.dll", EntryPoint = "MoveWindow")]
    static extern bool MoveWindow(
        int hWnd,
        int X,
        int Y,
        int nWidth,
        int nHeight,
        bool bRepaint
    );

    const int SWP_DRAWFRAME = 0x20;
    const int SWP_NOMOVE = 0x2;
    const int SWP_NOSIZE = 0x1;
    const int SWP_NOZORDER = 0x4;
    const int SWP_FRAMECHANGED = 0x20;
    ToolsComponents.MSWord word = new ToolsComponents.MSWord();

    private void toolStripButton2_Click(object sender, EventArgs e)
    {
        word.CreateWordDocument();
        word.OpenFile(@"C:\Users\ME\Documents\test.docx", true);
        int wordWnd = FindWindow("Opusapp", null);
        if (wordWnd != 0)
        {
            int ret = SetParent(wordWnd, pnlShowForm.Handle.ToInt32());

            //int ret2 = FindWindow("Opusapp", null);
            //ret = SetParent(wordWnd, pnlShowForm.Handle.ToInt32());
            SetWindowPos(wordWnd, pnlShowForm.Handle.ToInt32(), 0, 0, pnlShowForm.Bounds.Width - 20, pnlShowForm.Bounds.Height - 20, SWP_FRAMECHANGED | SWP_NOZORDER | SWP_NOMOVE | SWP_DRAWFRAME);
            MoveWindow(wordWnd, -5, -33, pnlShowForm.Bounds.Width + 10, pnlShowForm.Bounds.Height + 57, true);
        }
    }

    private void frmDocumentManager_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (word != null)
        {
            word.CloseDoc(true);
            word.Quit();
        } 
```

但这不是一个好的解决方案，并且在运行时有问题。有时 MS word 和文档在表格之外开始，我无法控制。

# magento - 何时分配 Magento 中的两个属性集？

> ID：12455491
> 
> 赞同：1
> 
> 时间：2012-09-17T08:21:52.770
> 
> 标签：magento, attributes, magento-1.7

我在一个 magento 安装中有两个网站。

我想要一些应该在两个网站上展示的产品。

两个网站的价格和其他事情都会有所不同。

在 Website1 中，我必须使用一些自定义属性，但在 Website2 中，这些自定义属性不是必需的。

> 我应该为个人网站特定产品创建两个属性集吗？
> 
> 由于两个网站都会使用某些产品，因此在维护产品方面是否会产生任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:54:27.060

Magento 默认为此提供选项。

*   您可以设置产品应用到哪些网站。
*   您可以在多个级别（网站、商店视图）上修改产品信息。

因此，如果您使用相同的产品并正确管理它，这可能不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:47:04.350

**产品实体在应用程序中只有一个属性集**；无法为产品定义多个属性集。属性可以定义为具有网站范围，这将允许您在网站级别为这些属性设置值。但是，属性元数据（例如“在前端的产品视图页面上可见”、“在分层导航中使用”等）是全局评估的。可配置的选项也必须是全局的，但由于这些选项值应该代表库存项目，这不应该是一个问题。

产品已经需要与网站主动关联，并且产品定价可以配置为全球或网站（请参阅 参考资料`System > Configuration > Catalog > Price > Catalog Price Scope`），因此您可以满足这两个要求。

# uiview - 无法在 UITableView 中选择单元格

> ID：12455492
> 
> 赞同：0
> 
> 时间：2012-09-17T08:21:55.890
> 
> 标签：uiview, xcode4, uitableview

我想创建一个从视图一侧滑动的菜单，因此我以编程方式创建了一个 UIView 和一个 UITableView，但是，当它出现时我无法选择视图中的单元格，这是我创建视图的代码和表格：

```
paintView=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 160, 400)];
[paintView setBackgroundColor:[UIColor clearColor]];    
tablaConfig = [[UITableView alloc]initWithFrame:CGRectMake(-160, 0, 160, 400) style:UITableViewStylePlain];
tablaConfig.delegate = self;
tablaConfig.dataSource = self;
tablaConfig.userInteractionEnabled = YES;
tablaConfig.scrollEnabled = NO;
tablaConfig.backgroundColor = [UIColor lightGrayColor];
[paintView addSubview:tablaConfig]; 
```

这是我让表格出现和消失的代码：

```
- (IBAction)btnTablaConfig:(id)sender {

    if (selector) {
        if (self.view.frame.origin.x == 0) {

            //[self.view addSubview:paintView];

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:0.5];
            CGRect rect = self.view.frame;

            // Move right.
            rect.origin.x += 160;
            rect.size.width -= 160;

            self.view.frame = rect;
            [UIView commitAnimations];
            selector = false;
            tablaConfig.userInteractionEnabled = YES;
       }

    }
    else {

        if (self.view.frame.origin.x == 160) {
            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:0.5]; // if you want to slide up the view
            CGRect rect = self.view.frame;
            rect.origin.x -= 160;
            rect.size.width += 160;

            self.view.frame = rect;
            [UIView commitAnimations];
            selector = true;
            tablaConfig.userInteractionEnabled = NO;
        }
        //[paintView removeFromSuperview];
    }
} 
```

希望你能帮忙

**编辑**：

当我使用这个时，我可以选择单元格，但是失去了滑动效果，我怎样才能同时获得？

```
- (IBAction)btnTablaConfig:(id)sender {

if (selector) {
    [self.view addSubview:tablaConfig];
    selector = false;
}
else {
    [tablaConfig removeFromSuperview];
    selector = true;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-28T15:23:19.757

我也遇到了这个问题，我也没有发现。

我正在使用`NIDropDown`自定义控件 tableview 显示，但我无法选择或滚动。问题是当我这样做时`[anySuperView addSubview:anyTableView];`

我`anySuperView`的尺码 (75) 小于我`anyTableView`的尺码 (400)。所以我做了`superViews`尺寸（500），我的问题解决了。

任何可以提供更多技术细节的机构将不胜感激。

这么晚才回答这个问题，因为我在其他任何地方都找不到解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:04:35.700

我不太确定你在找什么。但是如果您希望单元格在选中时突出显示，则需要将这行代码添加到您的 tableView 中： cellForRowAtIndexPath:

```
yourcell.selectionstyle = UITableViewSelectionStyleBlue 
```

你也可以使用 UITableViewSelectionStyleGray。如果你想在他们选择行时执行一些操作，你可以使用 tableviewdelegate 方法：

> 管理选择
> 
> – tableView:willSelectRowAtIndexPath:
> 
> – 表视图：didSelectRowAtIndexPath：
> 
> – tableView:willDeselectRowAtIndexPath:
> 
> – tableView:didDeselectRowAtIndexPath:

UITableViews 可能很棘手，但可以在 Apple 的参考资料中轻松找到类似的内容：

[http://developer.apple.com/library/ios/navigation/](http://developer.apple.com/library/ios/navigation/)

只需搜索班级或代表或您正在使用的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:34:07.487

它有一个类似的问题。我通过将我的表格视图添加到更远的位置并设置一个标志来跟踪它是否已安装来解决它。在您的代码中，移动 [paintView addSubview:tablaConfig]; 进入 btnTablaConfig: 方法，在第一次展开表时执行它。该问题似乎涉及查看初始化代码时间。

# css - 我无法在 CSS3 中使用通配符

> ID：12455494
> 
> 赞同：1
> 
> 时间：2012-09-17T08:22:10.727
> 
> 标签：css, css-selectors, wildcard

我有这个html：

```
<div>
    <input class="orderrow-1" type="text"></input>
    <input class="orderrow-2" type="text"></input>
</div> 
```

这个CSS：

```
input[class^='orderrow-']
{
    border: 1px solid #e2e2e2;
    color: #333;
    font-size: 1em;
    margin: 5px 5px 6px 0px;
    padding: 5px;
    width: 100px;
    text-align: right;
} 
```

我尝试使用以“orderrow-”开头的类来设置所有输入字段的样式，但上面不起作用。有什么建议么？

编辑：对不起，上面确实有效。问题是我有两个案例。像这样：

```
<div>
    <input class="trigger orderrow-1" type="text"></input>
    <input class="trigger orderrow-2" type="text"></input>
</div> 
```

当 orderrow-1 之前有东西时，选择器不起作用。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:38:21.523

问题是您使用前缀匹配`^=`，这意味着它将匹配以类属性`orderrow-`的实际值开头的类属性（包括所有类名）的值，如果您想要通配符选择器，它会“触发 orderrow-2”规范建议这样做：`*=`它在任何时候查找包含字符串的值。

例子：

```
input[class ^="orderrow-"], input[class *=" orderrow-"]
{
    border: 1px solid #e2e2e2;
    color: #333;
    font-size: 1em;
    margin: 5px 5px 6px 0px;
    padding: 5px;
    width: 100px;
    text-align: right;
}

input.orderrow-1 {
    border: 1px solid #F00;
} 
```

重要的是要注意，因为属性选择器和 class 选择器具有相同的特性，您应该将 overribe放在属性**下方**，以确保样式的正确级联*（根据我的示例 - [jsfiddle](http://jsfiddle.net/5aztP/)）。

**编辑：**根据评论在示例中使用更精确的选择器。

[docs](http://www.w3.org/TR/css3-selectors/#attribute-substrings)查看三个不同通配符选择器的文档。

*我*有时会*编造词，但只要你明白我的意思......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:16:13.207

应该可以在这里查看我对各种 css3 伪类的代码笔测试[http://codepen.io/jamiepaterson/pen/cADfs](http://codepen.io/jamiepaterson/pen/cADfs)

您想要的是此测试中的紫色文本颜色。

# sql-server-2008 - 数据库和日志恢复作业失败

> ID：12455495
> 
> 赞同：0
> 
> 时间：2012-09-17T08:22:18.437
> 
> 标签：sql-server-2008, database-restore

我有一个日常流程，可以将数据库从一台服务器恢复到另一台服务器。它恢复了数据库的数据库备份文件，如果找到 TLog 备份文件，它也会恢复它们。

该过程现在可以运行一段时间，没有任何问题。今天失败了 错误信息：

```
Message
Executed as user: AOI\sa_SqlAgentSrv_PRD. RegQueryValueEx() returned error 2, 'The system cannot find the file specified.' [SQLSTATE 01000] (Message 22001)  IF EXISTS (select * from sysdatabases where name = 'SiteDbStandby')   ALTER DATABASE SiteDbStandby SET SINGLE_USER WITH ROLLBACK IMMEDIATE  
RESTORE DATABASE [SiteDbStandby] FROM DISK = '\\SqlBackup\Databases\SiteDb.bak' WITH NORECOVERY  , REPLACE , MOVE 'SiteDb_data' to 'G:\MSSQL10.DB2\MSSQL\DATA\SiteDbStandby_SiteDb_data.mdf' , MOVE 'SiteDb_log' to 'J:\MSSQL10.DB2\MSSQL\DATA\SiteDbStandby_SiteDb_log.ndf' [SQLSTATE 01000] (Message 0)  Processed 191216 pages for database 'SiteDbStandby', file 'SiteDb_data' on file 1\. [SQLSTATE 01000] (Message 4035)  Processed 4 pages for database 'SiteDbStandby', file 'SiteDb_log' on file 1\. [SQLSTATE 01000] (Message 4035)  
RESTORE DATABASE successfully processed 191220 pages in 20.366 seconds (73.352 MB/sec). [SQLSTATE 01000] (Message 3014)  
RESTORE LOG SiteDbStandby FROM DISK = '\\SqlBackup\Logs\SiteDb_20120916_011017.BAK' WITH NORECOVERY 
RESTORE LOG SiteDbStandby FROM DISK = '\\SqlBackup\Logs\SiteDb_20120916_021929.BAK' WITH NORECOVERY 
RESTORE LOG SiteDbStandby FROM DISK = '\\SqlBackup\Logs\SiteDb_20120916_031349.BAK' WITH NORECOVERY 
RESTORE LOG SiteDbStandby FROM DISK = '\\SqlBackup\Logs\SiteDb_20120915_231017.BAK' WITH NORECOVERY 
RESTORE LOG SiteDbStandby FROM DISK = '\\SqlBackup\Logs\SiteDb_20120916_001017.BAK' WITH NORECOVERY [SQLSTATE 01000] (Message 0)  The log in this backup set begins at LSN 42459000001303500001, which is too recent to apply to the database. An earlier log backup that includes LSN 42459000001302800001 can be restored. [SQLSTATE 42000] (Error 4305)  RESTORE LOG is terminating abnormally. [SQLSTATE 42000] (Error 3013).  The step failed. 
```

可以看到它尝试从凌晨1点恢复16.9的日志文件，从凌晨2点恢复16.9的日志文件，从凌晨3点恢复16.9的日志文件，然后从下午23点恢复15.9的日志文件，从凌晨12点恢复16.9的日志文件.

日志的恢复顺序搞砸了。

我回顾了这项工作的历史，我们有大约 3 周的每日处决历史。在每一次执行中，顺序都是正确的。例如：

```
Executed as user: AOI\sa_SqlAgentSrv_PRD. RegQueryValueEx() returned error 2, 'The system cannot find the file specified.' [SQLSTATE 01000] (Message 22001)  IF EXISTS (select * from sysdatabases where name = 'SiteDbStandby')   ALTER DATABASE SiteDbStandby SET SINGLE_USER WITH ROLLBACK IMMEDIATE  
RESTORE DATABASE [SiteDbStandby] FROM DISK = '\\SqlBackup\Databases\SiteDb.bak' WITH NORECOVERY  , REPLACE , MOVE 'SiteDb_data' to 'G:\MSSQL10.DB2\MSSQL\DATA\SiteDbStandby_SiteDb_data.mdf' , MOVE 'SiteDb_log' to 'J:\MSSQL10.DB2\MSSQL\DATA\SiteDbStandby_SiteDb_log.ndf' [SQLSTATE 01000] (Message 0)  Processed 191032 pages for database 'SiteDbStandby', file 'SiteDb_data' on file 1\. [SQLSTATE 01000] (Message 4035)  Processed 6 pages for database 'SiteDbStandby', file 'SiteDb_log' on file 1\. [SQLSTATE 01000] (Message 4035)  
RESTORE DATABASE successfully processed 191038 pages in 21.703 seconds (68.768 MB/sec). [SQLSTATE 01000] (Message 3014)  
RESTORE LOG SiteDbStandby FROM DISK = '\\SqlBackup\Logs\SiteDb_20120914_231026.BAK' WITH NORECOVERY 
RESTORE LOG SiteDbStandby FROM DISK = '\\SqlBackup\Logs\SiteDb_20120915_001019.BAK' WITH NORECOVERY 
RESTORE LOG SiteDbStandby FROM DISK = '\\SqlBackup\Logs\SiteDb_20120915_011032.BAK' WITH NORECOVERY 
RESTORE LOG SiteDbStandby FROM DISK = '\\SqlBackup\Logs\SiteDb_20120915_021140.BAK' WITH NORECOVERY 
RESTORE LOG SiteDbStandby FROM DISK = '\\SqlBackup\Logs\SiteDb_20120915_031053.BAK' WITH NORECOVERY [SQLSTATE 01000] (Message 0)  Processed 0 pages for database 'SiteDbStandby', file 'SiteDb_data' on file 1\. [SQLSTATE 01000] (Message 4035)  Processed 7 pages for database 'SiteDbStandby', file 'SiteDb_log' on file 1\. [SQLSTATE 01000] (Message 4035)  
RESTORE LOG successfully processed 7 pages in 0.009 seconds (5.588 MB/sec). [SQLSTATE 01000] (Message 3014)  Processed 0 pages for database 'SiteDbStandby', file 'SiteDb_data' on file 1\. [SQLSTATE 01000] (Message 4035)  Processed 0 pages for database 'SiteDbStandby', file 'SiteDb_log' on file 1\. [SQLSTATE 01000] (Message 4035)  
RESTORE LOG successfully processed 0 pages in 0.009 seconds (0.000 MB/sec). [SQLSTATE 01000] (Message 3014)  Processed 0 pages for database 'SiteDbStandby', file 'SiteDb_data' on file 1\. [SQLSTATE 01000] (Message 4035)  Processed 1229 pages for database 'SiteDbStandby', file 'SiteDb_log' on file 1\. [SQLSTATE 01000] (Message 4035)  
RESTORE LOG successfully processed 1229 pages in 0.196 seconds (48.965 MB/sec). [SQLSTATE 01000] (Message 3014)  Processed 0 pages for database 'SiteDbStandby', file 'SiteDb_data' on file 1\. [SQLSTATE 01000] (Message 4035)  Processed 3 pages for database 'SiteDbStandby', file 'SiteDb_log' on file 1\. [SQLSTATE 01000] (Message 4035)  
RESTORE LOG successfully processed 3 pages in 0.013 seconds (1.277 MB/sec). [SQLSTATE 01000] (Message 3014)  Processed 0 pages for database 'SiteDbStandby', file 'SiteDb_data' on file 1\. [SQLSTATE 01000] (Message 4035)  Processed 0 pages for database 'SiteDbStandby', file 'SiteDb_log' on file 1\. [SQLSTATE 01000] (Message 4035)  
RESTORE LOG successfully processed 0 pages in 0.009 seconds (0.000 MB/sec). [SQLSTATE 01000] (Message 3014)  
use master restore database SiteDbStandby with recovery [SQLSTATE 01000] (Message 0)  
RESTORE DATABASE successfully processed 0 pages in 4.360 seconds (0.000 MB/sec). [SQLSTATE 01000] (Message 3014)  use SiteDbStandby ALTER AUTHORIZATION ON DATABASE::SiteDbStandby TO sa ALTER DATABASE SiteDbStandby SET COMPATIBILITY_LEVEL = 100 [SQLSTATE 01000] (Message 0).  The step succeeded. 
```

因此，正确的顺序是前一天的晚上 11 点、当天的上午 12 点、当天的凌晨 1 点、凌晨 2 点和凌晨 3 点。

所有日志都存在于它们的共享文件夹目录中。一切看起来都很正常。

您是否碰巧想到了为什么工作失败的想法？

提前致谢，

罗尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:57:11.560

我们在 RESTORE LOG 动态查询中添加了 ORDER BY 子句。

这确保将使用正确的恢复日志顺序。

# variables - 将环境变量传递给 Tomcat 7.0 Web 应用程序上下文

> ID：12455497
> 
> 赞同：3
> 
> 时间：2012-09-17T08:22:32.793
> 
> 标签：variables, tomcat, environment, sudo, context.xml

Apache Tomcat 7.0、CentOS 5.8 i386

Web 应用程序需要特定的环境变量**XY**才能出现在其上下文中。该变量在*/etc/profile*中设置为计算的结果（即不是静态值），并且它也被运行在同一系统上的其他本机应用程序使用（因此它必须是环境变量方法）。

Tomcat 是通过使用专用 tomcat 用户和*sudo*的通用脚本启动的。通过*sudo传递**XY*的第一个问题通过*/etc/sudoers*中的显式定义得到解决（感谢 stackoverflow）：

 **```
Defaults    env_keep ="XY" 
```

这意味着环境变量*XY*由*sudo*保留，这不是默认情况。

现在环境变量*XY*在 tomcat 进程中是可见的。这可以通过*ps*和*/proc/tomcat-PID/environ*或 */your_tomcat/bin/startup.sh* 中的显式*echo $XY*（由 init.d 脚本使用*sudo*调用）来验证。但是在tomcat进程中看到*XY*并不代表web app可以看到。Web 应用程序将其环境转储到日志文件中

```
LOGGER.debug("Environment: " + System.getenv()); 
```

令我惊讶的结果是：根本没有*XY*，虽然 tomcat 有！

在阅读了 tomcat 7.0 的上下文文档后（注意区分 7.0 和旧版本的 tomcat），我在 */your_tomcat/conf/context.xml* 中添加了以下条目：

```
<Context>
...
<Environment name="XY" value="INIT_VALUE" type="java.lang.String"/>  
...
</Context> 
```

现在*System.getenv()*的输出确实包含我的*XY*环境变量，**但**它具有来自*/etc/profile*的正确值，而不是我在*context.xml*中指定的值**INIT_VALUE**。换句话说，我的*/etc/profile*确实覆盖了**INIT_VALUE**，这是我需要的，但不是我所期望的，因为文档中没有关于此的消息。

 ****我是否发现可能在更高版本的 tomcat 中删除的未记录行为，或者这是要走的路？所以最后我很高兴有一个可行的解决方案，但我不太相信这是一种推荐的和正确的传递环境变量的方法。任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T08:56:24.790

Tomcat 环境条目与系统环境变量不同。标记指定的环境条目`<Environment>`是 ​​JNDI，可以使用`InitialContext.lookup`under访问`java:/comp/env`，而`System.getEnv()`关于系统环境变量（tomcat 进程本身的）。******

# r - 查找当前工作区中的所有函数

> ID：12455503
> 
> 赞同：8
> 
> 时间：2012-09-17T08:22:47.653
> 
> 标签：r, function, workspace

我想在我当前的工作空间中找到所有功能，并考虑`is.function`用于此目的。

“问题”是`is.function`需要一个真正的 R *object*，而不是对象的字符串*名称*。

这是我的解决方案，但使用`eval(substitute(...))`似乎有点涉及。关于更直接的方式的任何想法，或者这是唯一可以做到的方式？

**示例内容**

```
x <- TRUE
y <- 10
foo1 <- function() message("hello world!")
foo2 <- function() message("hello world again!") 
```

**查找所有函数对象**

```
wscontent <- ls(all.names=TRUE)
funs <- sapply(wscontent, function(ii) {
    eval(substitute(is.function(OBJ), list(OBJ=as.name(ii))))
})
> funs
     foo1      foo2      funs wscontent         x         y 
     TRUE      TRUE     FALSE     FALSE     FALSE     FALSE 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T08:32:30.563

怎么样

```
lsf.str() 
```

这应该列出所有功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T08:33:45.037

您可以使用 eapply：

```
which(unlist(eapply(.GlobalEnv, is.function))) 
```

...或使用 as.list 应用：

```
which(sapply(as.list(.GlobalEnv), is.function)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:31:13.217

```
funs <- sapply(wscontent, function(x) is.function(get(x))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T12:01:13.383

不久前我写了一个更通用的玩具：

```
lstype<-function(type='closure'){
inlist<-ls(.GlobalEnv)
if (type=='function') type <-'closure'
typelist<-sapply(sapply(inlist,get),typeof)
return(names(typelist[typelist==type]))
} 
```

# c#-4.0 - 访问谷歌地球插件中点击的气球内容

> ID：12455504
> 
> 赞同：0
> 
> 时间：2012-09-17T08:22:57.543
> 
> 标签：c#-4.0, google-earth-plugin, winforms-interop

我有一个谷歌地球插件，我使用 c# 中的 Winform 库制作了各种地标和气球。现在，我可以在地图上看到这些地标，当我单击地标时，我可以看到我已解析的内容。

现在，我的要求是，当用户单击气球时，我想在插件外部的文本框中显示该气球的内容。

我没有找到任何方法可以记录单击了哪个地标并且我可以访问气球的内容。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T00:03:02.003

您应该可以在这里找到您需要的所有信息

[https://developers.google.com/earth/documentation/balloons](https://developers.google.com/earth/documentation/balloons)

编辑：我不确定你在网页中显示文本的方法，试试这样的

```
 function addData(text) { 
           // var TheTextBox = document.getElementById("Mytextbox"); 
           // TheTextBox.value = TheTextBox.value + text;
           document.getElementById('Mytextbox').innerHTML = '<p>' + text + '</p>';

           // if still having problems, try using an alert to see value of your 'text'
           alert(text);
      } 
```

另一个想法-不要听气球打开，而是听点击

```
 google.earth.addEventListener(ge.getGlobe(), 'click', placemarkClicked);

      function placemarkClicked(event) {
           var obj = event.getTarget();
           // determine if the user clicked on a Placemark
           if (obj.getType() == 'KmlPlacemark') {
               event.preventDefault();
               var placemark = obj;
               var placemark_name = placemark.getName();
               var placemark_desc_active = placemark.getBalloonHtmlUnsafe();

           // proceed to use the name and description as you like 
```

# html - Firefox 和 Internet Explorer 中的 HTML5 输入类型日期、颜色、范围支持

> ID：12455506
> 
> 赞同：26
> 
> 时间：2012-09-17T08:22:58.450
> 
> 标签：html, internet-explorer, firefox, cross-browser

我已经使用许多带有 HTML5 的表单构建了我所有的网站（使用`input`types`date`和.）`color``range`

在谷歌浏览器中一切正常。

但是当我打开 Internet Explorer 和 Firefox 时，所有输入字段都变成了`input`type `text`。

我可以下载一种方法或脚本来强制正确显示此输入吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-17T09:08:43.573

由于 HTML5 尚未完全标准化，并非所有浏览器都支持这些输入类型。*预期*的行为是回退到`<input type="text">`.

↪[有关浏览器对 HTML5 输入类型的支持的更多信息，请参见此处。](http://caniuse.com/#search=input%20type)

您可以使用 Modernizr 库或一些自定义 JavaScript[测试支持。](http://diveintohtml5.info/detect.html#input-types)如果您检测到某个 HTML5 功能不可用，您可以回退到[基于](http://www.queness.com/post/10081/11-javascript-color-pickers-plugins)[JavaScript](http://jqueryui.com/demos/datepicker/)的[替代方案](https://startpage.com/do/search?q=javascript%20slider%20input)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-30T08:08:19.230

如果缺少特殊输入，所有浏览器都会回退到输入类型文本。它都是关于小部件和验证的。

**以下支持范围小部件**

火狐桌面 23

![火狐 29](../Images/5d140afb208f14c0ceada5f557f77e03.png)

Opera 桌面版

![歌剧](../Images/185311d763b360b67b5fb16c2dbb848d.png)

铬桌面

![铬桌面](../Images/4511419c08f885b1f68aa1d48e1238a8.png)

Chrome 手机

![铬手机](../Images/0d148ede51c1592cfafa9b00f6de734d.png)

IOS Safari 5

![IOS Safari 5](../Images/b0136c45e57e8b0d84083458222f6296.png)

.

.

.

**以下浏览器现在支持颜色小部件**

火狐桌面版 29

![Firefox 29 色输入 Ubuntu](../Images/b576ef01a2302da645728abf47149bf9.png)

Opera 桌面版 11

![Opera桌面颜色输入](../Images/9bd28ea0bd73a77d4c0a384a50467853.png)

Chrome 桌面 20：

![chrome 输入类型 颜色 Ubuntu](../Images/b60853243ae9ff6f59bcde5fd59c59c1.png)

Android 4.4 / Chrome 手机：

![chrome手机颜色输入](../Images/8d4814d02bf5e37c4561933ca7d43c89.png)

歌剧手机：

![Opera 移动颜色输入](../Images/ec617af8b096e415d7707d3a31682d4f.png)

黑莓：

![黑莓颜色输入](../Images/272dda1ce24eba30d6f8daa100722ab9.png)

火狐操作系统 1.3

Firefox 操作系统现在支持颜色输入，但我仍然没有屏幕截图

如果你想要你可以使用这个[http://www.eyecon.ro/colorpicker/](http://www.eyecon.ro/colorpicker/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-24T00:29:40.210

我在输入类型 = 范围时遇到了类似的问题。除了 Internet Explorer 10 之外，所有浏览器都可以正常工作。Internet Explorer 没有问题，因为我可以在其他网站上看到滑块。解决方案是关闭我网站的兼容性视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T04:32:28.393

我认为最好的解决方案是使用 jquery 插件。

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Slider - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    $( "#slider" ).slider();
  });
  </script>
</head>
<body>

<div id="slider"></div>

    </body>

</html> 
```

[http://jqueryui.com/slider/](http://jqueryui.com/slider/)

# c++ - Eclipse cdt：包含正确的头文件，编译，但突出显示源代码：“未解决的包含”

> ID：12455508
> 
> 赞同：6
> 
> 时间：2012-09-17T08:23:11.950
> 
> 标签：c++, eclipse, shared-libraries, eclipse-cdt

我有一个项目使用来自另一个项目的共享库。在项目设置中，我为 GCC 和 G++ 编译器（-L 和 -l 选项）放置了正确的包含路径和库。这一切都编译得很好，这里没有问题。但是没有正确分析源代码。我包含的头文件（位于另一个项目中）被标记为“未解决的包含，并且在我使用它的任何地方，源也被突出显示。

```
#include "myHeader.h" 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T11:13:59.387

您在这里（可能）缺少的一个是告诉索引器在哪里寻找这些标题。我通常管理自己的 Makefile，所以我不知道如何让它同时适用于 eclipse 管理的 makefile 和 Indexer。可能您会发现下面的解决方案可以解决这两个问题。

关于解决方案；**右键单击**项目资源管理器（或资源资源管理器）中的项目，然后**选择 Properties**。现在在“ **C/C++ 常规**”>“**路径和符号**”下，单击“**包含”选项卡**并**选择“GNU C++”**。然后在右侧，您可以通过单击**“添加...”**按钮**添加各种包含路径（类似于 gcc/g++ 上的 -I 选项）。**

 **应用并单击“确定”后，索引器将需要一段时间来清除那些未解析的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:24:34.620

应该像这样包含一个标题

```
#include "myHeader.h" 
```

或者如果它是标准的 lib 头文件：

```
#include <string> 
```

其他一切都是无效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:33:03.243

请记住在**“预处理器包含路径、宏等”**中启用**提供程序。**.**

# java - 将 GL_TEXTURE_RECTANGLE_ARB 用于带有 LWJGL 的 spritesheet 时闪烁

> ID：12455512
> 
> 赞同：1
> 
> 时间：2012-09-17T08:23:22.637
> 
> 标签：java, opengl, lwjgl, flicker, sprite-sheet

我在尝试使用 LWJGL 开发游戏时遇到了一些奇怪的闪烁问题。我正在尝试按照本教程中的建议使用 GL_TEXTURE_RECTANGLE_ARB：http: [//youtu.be/Xj_qZ3Cw08Q](http://youtu.be/Xj_qZ3Cw08Q)。

这是该问题的简短视频：http: [//youtu.be/WUr_8aqoOrk](http://youtu.be/WUr_8aqoOrk)。

在我看来，随着相机的移动（通过 glTransformf()），为每个图块绘制的精灵偶尔会显示一些相邻的纹理，就像这里引起问题的原因：[LWJGL random lines inbenween shapes](https://stackoverflow.com/questions/10421726/lwjgl-random-lines-inbenween-shapes)。但是，我已经将 MIN_FILTER 和 MAG_FILTER 设置为 GL_NEAREST，所以这似乎不是问题。

我已经尽可能简化了游戏，以在没有太多无关细节的情况下演示问题。您可以在此处获取 .zip：[https](https://dl.dropbox.com/u/22396951/Copy%20of%20Fezless.zip) ://dl.dropbox.com/u/22396951/Copy%20of%20Fezless.zip 。

编辑：这是快速（呃）一目了然的代码。

**Fezless.java**

```
package com.mrmikeanderson.fezless;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.nio.ByteBuffer;
import java.util.HashMap;
import java.util.Map;

import org.lwjgl.BufferUtils;
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;

import de.matthiasmann.twl.utils.PNGDecoder;
import static org.lwjgl.opengl.ARBTextureRectangle.*;
import static org.lwjgl.opengl.GL11.*;

public class Fezless {

    int w, h;
    boolean running;
    final int FPS = 60;
    double t = 0.0;
    final double dt = 1.0 / 60.0;
    Sprite currentSprite;
    Player player;
    Map<String, Sprite> spriteMap;
    int tiles;
    float camX, camY, shakeX, shakeY;

    String[] tileGrid = { "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "grass", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "dirt", "air", "air", "tardis", "air", "air", "air", "air", "air", "air", "air", "air", "air", "grass", "grass", "grass", "grass", "grass", "grass", "grass", "grass", "air", "air", "air", "air", "dirt", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "air", "air", "air", "air", "deadplant", "dirt", "air", "air", "air", "air",
            "air", "air", "plant", "air", "air", "air", "air", "air", "air", "air", "air", "stone", "dirt", "dirt", "stone", "air", "air", "air", "deadplant", "dirt", "dirt", "grass", "grass", "grass", "grass", "grass", "grass", "grass", "grass", "grass", "air", "air", "air", "air", "air", "air", "air", "stone", "air", "air", "air", "air", "air", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "grass", "grass", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "dirt", "dirt", "dirt", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "dirt", "dirt", "dirt", "dirt", "grass", "grass", "grass", "air", "air", "air", "air", "air", "air", "deadplant", "dirt", "dirt", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "dirt", "dirt", "dirt", "dirt", "dirt", "grass", "air", "air", "air", "air", "air", "dirt", "dirt", "dirt", "stone", "stone", "stone", "stone",
            "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "dirt", "dirt", "dirt", "dirt", "dirt", "grass", "plant", "air", "air", "air", "dirt", "dirt", "dirt", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "grass", "grass", "grass", "air", "air", "air", "dirt", "dirt", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "grass", "air", "air", "dirt", "dirt", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "dirt", "air", "air", "dirt", "dirt", "dirt", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "dirt", "dirt",
            "dirt", "dirt", "air", "air", "air", "air", "dirt", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "dirt", "dirt", "dirt", "air", "air", "air", "air", "air", "air", "stone", "stone", "stone", "stone", "dirt", "dirt", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "dirt", "dirt", "air", "air", "air", "air", "air", "air", "air", "air", "air", "dirt", "dirt", "dirt", "dirt", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "dirt", "dirt", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "stone", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "dirt", "stone", "stone", "stone", "dirt", "stone",
            "stone", "stone", "stone", "stone", "stone", "stone", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "air", "dirt", "dirt", "dirt", "dirt", "stone", "stone", "stone", "stone", "stone", "stone" };

    public Fezless(int w, int h) {
        this.w = w;
        this.h = h;
    }

    public void start() {
        init();
        running = true;
        run();
    }

    void init() {
        initDisplay();
        initGL();
        initSprites();
        player = new Player(13f, 4f, this);
//      level = new Level(player, this);
        camX = 14f;
        camY = -6f;
        shakeX = shakeY = 0f;
    }

    void initDisplay() {
        try {
            Display.setDisplayMode(new DisplayMode(w, h));
            Display.create();
        } catch (LWJGLException e) {
            e.printStackTrace();
        }
    }

    void initGL() {
        glMatrixMode(GL_PROJECTION);
        double w = Display.getWidth() / 8;
        double h = Display.getHeight() / 8;
        glOrtho(-w / 2, w / 2, h / 2, -h / 2, -1f, 1f);
        glClearColor(.4f, .769f, 1f, 1f);
        glEnable(GL_TEXTURE_RECTANGLE_ARB);
        glEnable(GL_BLEND);
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
        glMatrixMode(GL_MODELVIEW);
    }

    void initSprites() {
        spriteMap = new HashMap<String, Sprite>();
        int texture = glGenTextures();
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, texture);
        InputStream in = null;
        try {
            in = new FileInputStream("res/tiles.png");
            PNGDecoder decoder = new PNGDecoder(in);
            ByteBuffer buffer = BufferUtils.createByteBuffer(4 * decoder.getWidth() * decoder.getHeight());
            decoder.decode(buffer, decoder.getWidth() * 4, PNGDecoder.Format.RGBA);
            buffer.flip();
            in.close();
            glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
            glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
            glTexImage2D(GL_TEXTURE_RECTANGLE_ARB, 0, GL_RGBA, decoder.getWidth(), decoder.getHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, 0);
        tiles = loadSpritesheet();
        spriteMap.put("air", new Sprite("air", 0, 0, 8, 8));
        spriteMap.put("gonzo", new Sprite("gonzo", 0, 8, 8, 16));
        spriteMap.put("grass", new Sprite("grass", 8, 0, 8, 8));
        spriteMap.put("plant", new Sprite("plant", 16, 8, 8, 8));
        spriteMap.put("deadplant", new Sprite("deadplant", 16, 16, 8, 8));
        spriteMap.put("dirt", new Sprite("dirt", 8, 8, 8, 8));
        spriteMap.put("stone", new Sprite("stone", 8, 16, 8, 8));
        spriteMap.put("platform", new Sprite("platform", 24, 0, 8, 8));
        spriteMap.put("obsidian", new Sprite("obsidian", 16, 0, 8, 8));
        spriteMap.put("tardis", new Sprite("tardis", 32, 0, 16, 24));
    }

    void run() {
        while (running && !Display.isCloseRequested()) {
            shakeX = (float) Math.sin(t + 100);
            shakeY = (float) Math.cos(t);

            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
            glLoadIdentity();
            glTranslatef(-camX * 8 + shakeX, camY * 8 + shakeY, 0f);

            for (int x = 0; x < 25; x++) {
                for (int y = 0; y < 21; y++) {
                    drawSprite(tileGrid[x + y * 25], x, y);
                }
            }
            player.render();

            t += dt;
            Display.update();
            Display.sync(FPS);
            Display.setVSyncEnabled(true);
        }
        cleanUp(false);
    }

    public void drawSprite(String name, float x, float y) {
        x *= 8;
        y *= 8;
        currentSprite = spriteMap.get(name);
        int u = currentSprite.x;
        int v = currentSprite.y;
        int u2 = currentSprite.x2;
        int v2 = currentSprite.y2;
        int w = currentSprite.w;
        int h = currentSprite.h;
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, tiles);
        glBegin(GL_QUADS);
        glTexCoord2f(u, v);
        glVertex2f(x, y);
        glTexCoord2f(u, v2);
        glVertex2f(x, y + h);
        glTexCoord2f(u2, v2);
        glVertex2f(x + w, y + h);
        glTexCoord2f(u2, v);
        glVertex2f(x + w, y);
        glEnd();
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, 0);
    }

    int loadSpritesheet() {
        int texture = glGenTextures();
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, texture);
        InputStream in = null;
        try {
            in = new FileInputStream("res/tiles.png");
            PNGDecoder decoder = new PNGDecoder(in);
            ByteBuffer buffer = BufferUtils.createByteBuffer(4 * decoder.getWidth() * decoder.getHeight());
            decoder.decode(buffer, decoder.getWidth() * 4, PNGDecoder.Format.RGBA);
            buffer.flip();
            in.close();
            glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
            glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
            glTexImage2D(GL_TEXTURE_RECTANGLE_ARB, 0, GL_RGBA, decoder.getWidth(), decoder.getHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, 0);
        return texture;
    }

    void cleanUp(boolean error) {
        Display.destroy();
        System.exit(error ? 1 : 0);
    }

    public static void main(String[] args) {
        Fezless f = new Fezless(800, 600);
        f.start();
    }
} 
```

**播放器.java**

```
package com.mrmikeanderson.fezless;

import java.awt.Rectangle;

public class Player {

    Fezless f;
    float x, y;
    boolean falling = false;
    String sprite;
    Rectangle boundingBox;

    public Player(float x, float y, Fezless f) {
        this.x = x;
        this.y = y;
        this.f = f;
        sprite = "gonzo";
    }

    public void render() {
        f.drawSprite(sprite, x, y);
    }
} 
```

**精灵.java**

```
package com.mrmikeanderson.fezless;

public class Sprite {

    String name;
    int x, y, x2, y2, w, h;

    public Sprite(String name, int x, int y, int w, int h) {
        this.name = name;
        this.x = x;
        this.y = y;
        this.w = w;
        this.h = h;
        x2 = x + w;
        y2 = y + h;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:46:38.680

这可能是 Z-Buffer 战斗。

您是否尝试过禁用 Z 测试`glDisable(GL_DEPTH_TEST);`？还是将背景清除到更远的距离（[参考](http://www.opengl.org/sdk/docs/man/xhtml/glClearDepth.xml)一下`glClearDepth`）？如果您选择使用 Z-Buffer 测试，您还应该将玩家形象移近相机。

# android - 使用复合可绘制对象在 TextView 中设置实际文本填充

> ID：12455514
> 
> 赞同：22
> 
> 时间：2012-09-17T08:23:29.683
> 
> 标签：android, textview, padding, compound-drawables

我有`ListView`一个`ArrayAdapter`. 对于项目，我只使用一个`TextView`布局。我希望某些行设置复合可绘制对象。

问题：有没有办法为包含在其中的实际文本设置填充，`TextView`以便复合可绘制对象也不会得到填充？其他解决方案是锁定文本的宽度。我需要添加`ImageViews`到我的布局吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-06-19T02:36:00.503

非常简单：

```
android:drawablePadding="5dp" 
```

它将根据方向自动使用填充。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-05T15:33:27.677

*我将其发布为答案，以便遇到此帖子的人找到答案。*

没有直接的方法只为文本设置填充，但您可以为整体设置**正**`TextView`填充并为可绘制对象设置**负**填充。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-10-24T00:59:41.290

改进 Gio 的建议，这可能是针对过时的 API/SDK ......

TL:DR - 只适用[`android:drawablePadding`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawablePadding)于增加图像和文本之间的距离。

说明： 现在在和 original[`android:drawablePadding`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawablePadding)之间应用填充，在这种情况下是包含文本的 TextView；`CompoundDrawable``View`

`android:padding` 和修饰符现在适用于整个组，包括所有化合物。

做消极积极的黑客似乎不再起作用了。

因此，根据可绘制位置（drawableTop/Left/...），填充将应用到它的相反方向，就在可绘制对象旁边，换句话说，在两个元素之间。例如，应用`drawablePadding="10dp"`到左侧放置的可绘制对象将具有与将个人设置`ImageView`到 TextView 左侧的效果类似`paddingRight="10dp"`（至少在填充方面）。

# objective-c - 从 alertView clickedbuttonAtIndex 方法访问值

> ID：12455516
> 
> 赞同：-3
> 
> 时间：2012-09-17T08:23:33.690
> 
> 标签：objective-c, ios, xcode, uialertview

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
        NSString *enteredName = [[alertView textFieldAtIndex:0]text];
        NSLog(@"name===>%@",enteredName);
} 
```

如何在 viewDidLoad 或任何其他函数中访问“enteredName”值。我用过 alert.alertViewStyle = UIAlertViewStylePlainTextInput;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:04:29.483

```
 message.alertViewStyle = UIAlertViewStylePlainTextInput;

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"Login"])
 {

    UITextField *username = [alertView textFieldAtIndex:0];
    UITextField *password = [alertView textFieldAtIndex:1];

    NSLog(@"Username: %@\nPassword: %@", username.text, password.text);

  }
} 
```

# javascript - CakePHP Cookie 无法从 JavaScript 读取

> ID：12455518
> 
> 赞同：3
> 
> 时间：2012-09-17T08:23:38.513
> 
> 标签：javascript, cakephp, cookies

我正在使用`setcookie()`from在 CakePHP 中创建一个 cookie `/cake/contoller_name/method/parameter this page`。但我无法从 JavaScript 读取这个 cookie。但是，当上述 cookie 设置为 时`/cake/contoller_name/method this page`，我可以从 JavaScript 读取此 cookie。

所以我意识到我们不能从带有参数的页面设置和更改 cookie。在服务器端，我们可以在 Cake 中读取这些 cookie，但不能从 JavaScript 中读取。注意：参数以“蛋糕样式”传递，而不是常规查询字符串；例如：`/cake/controller/param1/param2`。示例代码

**案例一：** 网址：/cake/payroll/salary 页面：payroll_controller.php

```
function salary(){ 
    setcookie('TEST_COOKIE','TEST_DATA',0); 
} 
```

**案例2：** URL：/cake/payroll/salary/14 页面：payroll_controller.php

```
function salary(){ 
    setcookie('TEST_COOKIE','TEST_DATA',0); 
} 
```

Javascript代码：

```
function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
}

alert(getCookie('TEST_COOKIE')); 
```

我可以使用 JS 读取案例 1 中的 cookie，但不能读取案例 2 中的 cookie。如何在 CakePHP 的任何页面上设置 cookie 并从 JavaScript 读取这些 cookie？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:04:03.250

您必须遵循 3 个步骤：

1.  使用 CakePHP Cookie 组件。让框架完成艰巨的任务：[http ://book.cakephp.org/2.0/en/core-libraries/components/cookie.html](http://book.cakephp.org/2.0/en/core-libraries/components/cookie.html)

2.  阅读这篇关于 JavaScript 和 cookie 的文章。您还可以在这里找到 3 个用于删除/创建/读取 cookie 的函数：[http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

3.  如果您使用 Firefox，请安装 Firebug 并使用 FireCookie 扩展： http: [//www.softwareishard.com/blog/firecookie/](http://www.softwareishard.com/blog/firecookie/)

最新的 Firebug 已经安装了 FireCookie。

在 FireCookie 中，您可以检查 cookie 是否真的存在并查看它们的名称和值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:58:53.667

试试这个代码来设置cookie

```
setcookie('TEST_COOKIE','your data',0,"/"); 
```

# model-view-controller - 如何在 mvc 中创建 3-d 图

> ID：12455521
> 
> 赞同：0
> 
> 时间：2012-09-17T08:23:57.177
> 
> 标签：model-view-controller, 3d, drawing

我想创建一个 3d 图表

我所说的图是指节点和边的意义。我有一个邻接矩阵以及每个节点的坐标矩阵。最终我希望为这些节点和边缘着色

gplot 函数是 3d 的。scatter3 函数不允许边缘。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:37:03.857

好吧，我不知道任何第三方库，但无论如何我个人都会采用自定义方法。

你可以自己画图。为此，您可以使用[Html 5 Canvas](http://www.w3schools.com/html5/html5_canvas.asp)方法，但这具有需要浏览器支持的限制。

或者您可以在服务器端动态创建图像。这就是我想要的。假设您拥有绘制图形所需的所有信息，您可以使用`img`指向 MVC 操作的标记加载页面。在加载（和创建）图像时，您应该显示某种漂亮的加载动画（[这里是一个很好的资源](http://www.ajaxload.info/)）。

在服务器端创建图像，您可以使用 Bitmap 类和相关`System.Drawing`方法（[这里是一个示例](http://www.java2s.com/Code/CSharp/2D-Graphics/Drawshapestothebitmapinmemory.htm)）。就 MVC 操作而言，您可以执行以下操作：

```
public ActionResult GetGraph(int id)
{
    byte[] image = CreateGraphImage(id);
    return File(image, "image/png");
} 
```

与您的 html 类似：

```
<img src="@(Url.Action("GetGraph"))" /> 
```

不幸的是，我无法在绘图方面为您提供帮助，自从我从事任何 3D 图形工作以来已经太久了，并且与我从事图形和矩阵工作的时间一样长。

# java - @SearchableComponent 和前缀

> ID：12455522
> 
> 赞同：1
> 
> 时间：2012-09-17T08:24:20.853
> 
> 标签：java, jakarta-ee, compass-lucene

我正在阅读有关 Compass（遗留代码）的文档，但我不了解 @SearchableComponent 和 prefix 属性。有人可以在不参考文档的情况下尝试用自己的话解释它们的含义，以及您应该如何使用它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T11:11:06.480

3岁的问题，但希望有人会偶然发现这个问题并获得一些价值。

您可以选择指定的前缀将构成存储字段的属性名称的一部分。Compass 本质上将遍历对象图并为每个可索引属性构造名称。

如果不为 a 指定前缀`@SearchableComponent`，您可能会有如下内容：

```
@Searchable(root=true)
class Customer {
    @SearchableProperty(name="name")
    String name;

    @SearchableComponent
    Address billingAddress;

    @SearchableComponent
    Address mailingAddress;
}

@Searchable(root=false)
class Address {
    @SearchableProperty(name="street")
    String street;

    @SearchableProperty(name="suburb")
    String suburb;
} 
```

这将创建以下 3 个索引字段：

*   `name`
*   `street`
*   `suburb`

如您所见，您最终将 Mailing 和 Billing address 字段都存储在相同的索引路径中 - `street`& `suburb`。

现在，这可能是也可能不是您想要的。如果您需要区分邮寄地址和帐单地址（例如查找具有不同邮寄地址和帐单地址的人），您可以使用前缀。看看下面的修改后的代码，它添加了前缀：

```
@Searchable(root=true)
class Customer {
    @SearchableProperty(name="name")
    String name;

    @SearchableComponent(prefix="billing_")
    Address billingAddress;

    @SearchableComponent(prefix="mailing_")
    Address mailingAddress;
}

@Searchable(root=false)
class Address {
    @SearchableProperty(name="street")
    String street;

    @SearchableProperty(name="suburb")
    String suburb;
} 
```

这将为您提供搜索键，如下所示：

*   `name`
*   `billing_street`
*   `billing_suburb`
*   `mailing_street`
*   `mailing_suburb`

通过这种方式，您可以将邮寄地址和帐单地址字段作为不同的条目进行搜索。

总而言之，添加前缀是否会提供价值取决于您的用例。

# android - 在 ListView 中重用类似于 convertView 的自定义膨胀视图

> ID：12455529
> 
> 赞同：3
> 
> 时间：2012-09-17T08:24:51.023
> 
> 标签：android, android-layout

我目前正在开发一个包含时间表屏幕的应用程序，该屏幕以高度定制的方式构建并包含许多“重复”视图。

我已经在 XML 中设置了我需要的每个单独的视图（例如，一个包含事件标题和时间的框的视图），我在自定义视图类中对其进行了扩展。例如：

```
public class EventCell extends RelativeLayout {
    private TextView eventTitle;
    private TextView eventTime;
    private Button favouritesButton;

    public EventCell(Context context) {
        super(context);
        setupView(context);
    }

    public EventCell(Context context, AttributeSet attrs) {
        super(context, attrs);
        setupView(context);
    }

    private void setupView(Context context) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.timetable_event, this);

        eventTitle = (TextView) findViewById(R.id.event_title);
        eventTime = (TextView) findViewById(R.id.event_time);
        favouritesButton = (Button) findViewById(R.id.favourites_button);   
    }
    ...
} 
```

这很好，除了这个视图在其包含的活动中被重用了很多。例如，它可能被实例化 50 次。我的问题是这会浪费大量内存并导致某些设备崩溃。

在 ListViews 中，有一个 getView() 方法，它提供了一个 convertView 参数，可让您检查当前行是否已被实例化，然后让您更新其上的值。对于这个自定义视图，我所追求的是类似的东西；理想情况下重用它而不是多次实例化它。

如果没有办法，绕过它的最佳方法是什么？这些视图本身并不是特别复杂，但似乎仍然设法使大多数设备屈服。

# c# - Lightswitch 循环遍历 C# 中的子记录

> ID：12455532
> 
> 赞同：1
> 
> 时间：2012-09-17T08:24:59.477
> 
> 标签：c#, parent-child, visual-studio-lightswitch

我有一个 Lightswitch 项目，它有一个订单表和一个订单线表。我希望能够使用 C# 中的代码（用于发送电子邮件）循环考虑与当前父订单相关的所有订单数据。

我似乎找不到任何关于如何做到这一点的参考资料。虽然我确定我缺少一些基本的东西。

任何帮助，将不胜感激。

干杯，麻木

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:42:55.583

从集合`Details screen`中使用这个`Orders`

```
foreach (var orderLine in this.OrderLinesCollection)
{
    //send emails here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:31:55.540

我不确定 Lightswitch 究竟是如何工作的，但我确实知道 C# 是如何工作的：）

```
var order = getOrder(id) // just some way to get an order with an collection of orderlines
foreach(var line in order.OrderLines)
{
   //Do your thing here
} 
```

我希望这个能帮上忙？

# android - 隐藏软键盘问题

> ID：12455534
> 
> 赞同：3
> 
> 时间：2012-09-17T08:25:22.660
> 
> 标签：android, soft-keyboard

我有一个网格视图，其中包含活动上的编辑文本，下面有一个自定义键盘，正如您在下面的代码中看到的那样，我添加了按钮来输入数字。但问题是每当我点击gridview中的edittexts时都会弹出软键盘。

我尝试放入`android:windowSoftInputMode="stateHidden"`清单文件，但在我的情况下它甚至没有隐藏软键盘。我引用了很多资源，包括 stackoverflow，甚至没有留下一个帖子。我认为我的 main.xml 文件有问题。我们不能把它隐藏在 gridview 的孩子中吗（我知道这看起来很傻，但这是我在尝试了很多事情之后得到的最后一个疑问）。有人可以建议我哪里出错了吗？如果您用您的答案测试以下代码，然后建议我是否可行，将不胜感激。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <FrameLayout
                android:id="@+id/fLayout1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/background3">
        <GridView xmlns:android="http://schemas.android.com/apk/res/android" 
                android:id="@+id/gridview"
                android:layout_width="fill_parent" 
                android:layout_height="fill_parent"
                android:columnWidth="18dp"
                android:numColumns="6"
                android:verticalSpacing="0dp"
                android:horizontalSpacing="1dp"
                android:stretchMode="columnWidth"
                android:gravity="center"
                android:listSelector="@null"/>
        </FrameLayout>

        <FrameLayout
                android:id="@+id/fLayout2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="4"
                android:background="@drawable/background2">

        <TableLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/keypad"
                android:orientation="vertical"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:stretchColumns="*">

        <TableRow>
        <Button android:id="@+id/keypad_1"
        android:text="1"
        android:background="@drawable/custombutton">
        </Button>
        <Button android:id="@+id/keypad_2"
        android:text="2"
        android:background="@drawable/custombutton">
        </Button>
        <Button android:id="@+id/keypad_3"
        android:text="3"
        android:background="@drawable/custombutton">
        </Button>

        <Button android:id="@+id/keypad_4"   
        android:text="4"
        android:background="@drawable/custombutton">
        </Button>

        <Button android:id="@+id/keypad_5"
        android:text="5"
        android:background="@drawable/custombutton">
        </Button>

        </TableRow>
        <TableRow>

        <Button android:id="@+id/keypad_6"
        android:text="6"
        android:background="@drawable/custombutton">
        </Button>

        <Button android:id="@+id/keypad_7"
        android:text="7"
        android:background="@drawable/custombutton">
        </Button>
        <Button android:id="@+id/keypad_8"
        android:text="8"
        android:background="@drawable/custombutton">
        </Button>
        <Button android:id="@+id/keypad_9"
        android:text="9"
        android:background="@drawable/custombutton"> 
        </Button>

        <Button android:id="@+id/keypad_10"
        android:text="C"
        android:background="@drawable/custombutton">
        </Button>

        </TableRow>
        <TableRow>
        <Button android:id="@+id/submit"
        android:text="submit"
        android:layout_span="5"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/custombutton">

        </Button>
        </TableRow>
        </TableLayout>

        </FrameLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:28:26.823

您是否尝试在`onCreate()`方法中添加此行？

`getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);`

或者

尝试你之前在清单中所做的，而不是`stateHidden`写`stateAlwaysHidden`

或者

您是否尝试过在 上放置一个`onTouch`监听器`EditText`？如果我没记错的话，它将“消耗”触摸事件并且键盘不应该出现。就像是：

```
editText_input_field.setOnTouchListener(otl);

private OnTouchListener otl = new OnTouchListener() {
    public boolean onTouch (View v, MotionEvent event) {
            return true; // the listener has consumed the event
    }
 }; 
```

取自[这里](https://stackoverflow.com/questions/1845285/how-to-block-virtual-keyboard-while-clicking-on-edittext-in-android)

让我知道是否有任何效果:)。如果没有，我会考虑其他一些解决方案...

# android - 方向改变时键盘消失

> ID：12455535
> 
> 赞同：0
> 
> 时间：2012-09-17T08:25:26.870
> 
> 标签：android, android-webview

在 Android Web 视图中，当我更改方向时，键盘消失，有什么方法可以防止键盘在方向更改时消失。请找到我的代码以供参考，

Android-Manifest.xml

```
 <activity
        android:name="com.alere.mya.WebContainerActivity"
        android:configChanges="orientation|keyboardHidden|keyboard"
        android:label="@string/app_name"
        android:scrollbarAlwaysDrawVerticalTrack="true"
        android:theme="@android:style/Theme.NoTitleBar"
        android:windowSoftInputMode="stateUnchanged" android:launchMode="singleInstance">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

活动，

公共无效 onConfigurationChanged（配置 newConfig）{

```
 ImageView imageView = (ImageView) findViewById(R.id.imageView1);
    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        imageView.setImageDrawable(this.getResources().getDrawable(
                R.drawable.default_landscape));
        Log.d("on Landscape Orientation", webview.toString());
        webview.loadUrl(MyaConstant.orientationLandscape);

    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
        Log.d("on Portrait Orientation", webview.toString());
        imageView.setImageDrawable(this.getResources().getDrawable(
                R.drawable.m_logo));
        webview.loadUrl(MyaConstant.orientationPortrait);
    }
    if (onGraph) {
        getCurrentOrientation();

    }
    super.onConfigurationChanged(newConfig);

} 
```

这里有什么问题。任何人都可以建议我吗？

我尝试将 super.onConfigurationChanged 作为第一行到最后一行。仍然没有回应。

# javascript - 异步模块定义：beta.verb() 和 require("beta").verb() 的区别

> ID：12455537
> 
> 赞同：3
> 
> 时间：2012-09-17T08:25:29.553
> 
> 标签：javascript, requirejs, js-amd

我正在从[wiki.commonjs.org](http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition)学习异步模块定义 ，我想知道这段代码的含义是什么。
特别是，我的问题是：
`return beta.verb();`和`return require("beta").verb();`有同样的效果。
如果不是，有什么区别？

```
define("alpha", ["require", "exports", "beta"], function (require, exports, beta) {
    exports.verb = function() {
        return beta.verb();
        //Or:
        return require("beta").verb();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:00:04.513

`beta``require("beta")`在调用回调函数之前已经初始化为 的值。根据该页面上的定义`define`：

> 必须*在执行模块工厂函数之前*解析依赖项[参数] ，并且解析的值应作为参数传递给工厂函数，参数位置对应于依赖项数组中的索引

# regex - 正则表达式匹配时在行首附加一个字符串

> ID：12455538
> 
> 赞同：1
> 
> 时间：2012-09-17T08:25:30.150
> 
> 标签：regex, perl, append

例如，我有一个文件

```
Car   class    rating
ford    c        ok
merc    a        Vgood
BMW     a        Toogood
kia     c         ok 
```

当分别找到“a”和“c”时，我想在行首附加“prefer”和“dontprefer”。

我一直在通过将带有“a”和“c”的行分隔到不同的文件中然后附加所需的来做到这一点。

```
perl -ne '/a/ && print' file1.l > file2.l 

perl -ple 's/^/prefer/' file2.l 
```

我一直在为每个正则表达式匹配执行此操作，然后在附加后合并所有文件。

那么是否有任何其他简单的代码可以将字符串附加到同一个文件中，而不是每次匹配正则表达式时都挂起文件？

样本输出：

```
 .  .          Car   class    rating

dontprefer    ford    c        ok
prefer        merc    a        Vgood
prefer        BMW     a        Toogood
dontprefer    kia     c         ok 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:42:36.853

```
perl -lne 'print"prefer     ".$_ if(/\s+[a]\s+/);print "dontprefer ".$_ if(/\s+[c]\s+/) ' your_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:41:25.303

```
$ perl -pale 'BEGIN { %tag = ( a => "prefer", c => "dontprefer" ); } $_ = "$tag{$F[1]}\t$_" if exists $tag{$F[1]};' infile > outfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:29:40.207

像这样的东西怎么样：

```
use strict;
use warnings;

my %prefs = (
    a => 'prefer', 
    c => 'dontprefer',
);

while (my $line = <>) {

    my $class = (split /\s+/, $line)[1];
    print $prefs{$class} if $class && $prefs{$class};
    print $line;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T09:16:45.090

尝试这个

```
perl -pe 's/(?=\S+\s+(a|(c))\s+)/($2&&"dont").($1&&"prefer\t")/e' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T11:28:25.623

您似乎是在 shell 中执行此操作，因此我将提供除 perl 之外的其他一些解决方案。

首先，`awk`有时是一种比 perl 更简单的编程语言：

```
$ awk '$2=="a"{p="prefer\t"} $2=="c"{p="dontprefer"} NR==1{p="\t"} {printf("%s\t%s\n",p,$0)}' input.txt
                Car   class    rating
dontprefer      ford    c        ok
prefer          merc    a        Vgood
prefer          BMW     a        Toogood
dontprefer      kia     c         ok 
```

接下来，`sed`虽然很神秘，但可以让您将逻辑压缩到一个非常紧凑的空间中：

```
$ sed '1s/^/^I^I/;/ a /s/^/prefer^I^/;/ c /s/^/dontprefer^I/' input.txt
                Car   class    rating
dontprefer      ford    c        ok
prefer          merc    a        Vgood
prefer          BMW     a        Toogood
dontprefer      kia     c         ok 
```

' `^I`s 是制表符。请注意，根据您的平台，您`sed`可能有一些选项可以让您更有效地打印选项卡（或执行其他操作）。这个 sed 脚本应该可以在任何地方工作。它的缺点还在于它匹配`a`或匹配该行的`c` *任何位置*，而不仅仅是第二列。它还假设您使用空格而不是制表符来分隔字段。如果这些问题很重要，可以扩展正则表达式来处理这些问题，但他当然适用于您的示例数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T08:33:45.850

我不确定这是否对您有帮助，

> 您可以在 linux 中使用 SED 命令与一行进行匹配并在行首添加“prefer”和“dontprefer”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T08:33:04.650

试试这个正则表达式：

```
perl -pe 's/(?=.*?\sa\s)/prefer\t$1/ && print $1' 
```

它将先行检查该行中是否有“a”，在这种情况下，用前面的“prefer”替换该行。

放在一起：

```
perl -pe 's/(?=.*?\sa\s)/prefer\t$1/g' file1.l | perl -pe 's/(?=.*?\sc\s)/dontprefer\t$1/g' > file2.l 
```

# c# - 将数据表加载到 xml 并将 xml 加载回数据表

> ID：12455539
> 
> 赞同：1
> 
> 时间：2012-09-17T08:25:34.160
> 
> 标签：c#, xml, datatable, dataset

所以我有一个我将数据查询到一个 DataTable

```
using (SqlDataAdapter adapter = new SqlDataAdapter(cmd))
{
       DataSet dataSet = new DataSet();
       adapter.Fill(dataSet, "AccessRights");

       return dataSet.Tables[0];
} 
```

现在我开始构建 XML 以发送回客户端

```
string tableData = null;
using(StringWriter sw = new StringWriter())
{                    
      rightsTable.WriteXml(sw);
      tableData = sw.ToString();                    
}

 StringBuilder build = new StringBuilder();               
 using (XmlWriter writer = XmlWriter.Create(build, new XmlWriterSettings { OmitXmlDeclaration = true }))
 {
      writer.WriteStartElement("useraccess");
      writer.WriteCData(xmlTable.OuterXml);
      writer.WriteEndElement();
 } 
```

现在在客户端上，我需要从 Xml 中获取 DataTable

```
XmlCDataSection cDataNode = (XmlCDataSection)xdoc.SelectSingleNode("./mp_getindividualaccessrights_response/data/useraccess").ChildNodes[0];
string xmlDataString = cDataNode.Data.ToString();
StringReader sReader = new StringReader(xmlDataString);
string s = sReader.ToString();
DataSet ds = new DataSet();

ds.ReadXml(sReader);

return ds.Tables[0]; 
```

如果数据库中有数据将返回 DataTable 中的列和行，则此方法有效

如果数据库中没有结果，我的问题就出现了，那么即使没有行数据，我也希望将列存储在 xml 字符串中（当 dt.WriteXml() 时）。但是当 dt.WriteXml() 返回的 xml 字符串是一个我不想要的空标签时会发生什么。基本上我希望标签在数据库查询中有列，即使没有数据行，例如

我知道事实上 DataTable 有列 (dt.Tables[0].Columns.Count) 我得到一个大于 0 的数字，而当我 (dt.Tables[0].Rows.Count) 我得到 0。这很好原因当我查询时，我没有找到我正在寻找的结果，但列仍然存在。但是当我 DataTable.WriteXML() 列消失的那一刻。

无论是否找到行，我都希望列显示在 xml 字符串中。但 DataTable.WriteXml 似乎没有正确执行此操作。

有人可以在这个问题上帮助我吗？

编辑：添加了一些测试代码以更好地说明这个问题

```
DataTable dt = new DataTable();
        DataColumn[] dtc = new DataColumn[] { new DataColumn("Name"), new DataColumn("Age"), new DataColumn("Surname") };
        DataSet ds = new DataSet();
        ds.Tables.Add(dt);
        dt.Columns.AddRange(dtc);

        string xmlString = null;
        using (StringWriter sw = new StringWriter())
        {
            ds.WriteXml(sw);
            xmlString = sw.ToString();
        }

        XmlDocument doc = new XmlDocument();
        StringBuilder build = new StringBuilder();
        using (XmlWriter writer = XmlWriter.Create(build, new XmlWriterSettings { OmitXmlDeclaration = true }))
        {
            writer.WriteStartElement("Root");
            writer.WriteCData(xmlString);
            writer.WriteEndElement();
        }

        XmlDocument xdoc = new XmlDocument();
        xdoc.LoadXml(build.ToString());

        XmlCDataSection cDataNode = (XmlCDataSection)xdoc.SelectSingleNode("./Root").ChildNodes[0];
        string xmlDataString = cDataNode.Data.ToString();
        StringReader sReader = new StringReader(xmlDataString);
        DataSet ds1 = new DataSet();

        ds1.ReadXml(sReader);

        Console.WriteLine(ds1.Tables[0].Columns.Count);

        Console.ReadLine(); 
```

![数据集到 xml 输出](../Images/f7616e927ac56b4e4b0fdb5ad112fffa.png)

从上图中：这返回原因是我的 DataTable 中没有行，但 DataTable 确实有列，这些列没有反映在我需要的 xml 中。所以基本上我需要让xml看起来如下

```
<DataSet>
   <Name></Name>
   <Age></Age>
   <Surname></Surname>
<DataSet> 
```

但是 ds.WriteXml() 不允许这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:54:32.430

无论是否存在行数据，这都是为了显示列而需要执行的操作。Schema 将保留数据表元数据。只需确保将 XmlWriteMode 和 XmlReadMode 设置为 Schema

```
ds.WriteXml(sReader, XmlWriteMode.WriteSchema);
ds.ReadXml(sReader, XmlReadMode.ReadSchema); 
```

这将保留所有表数据，包括列名和列数据类型。

# android - 上传同一android应用的多个apk

> ID：12455545
> 
> 赞同：0
> 
> 时间：2012-09-17T08:25:46.007
> 
> 标签：android, google-play

我开发了一个在 Eclipse 中有 5 或 4 个不同项目的应用程序。我的一个 apk 包含 xlarge mdpi、大 hdpi 和普通 hdpi 的配置。其他有正常的xhdpi。现在，出于某种原因，我必须为 google nexus s 和 Samsung S3 制作单独的 APK。但两者具有相同的配置，即 normal-xhdpi-1280x720。如何使用多个 apk 支持将它们上传到 google play？我可以为这些添加到我的清单中，以及如何将受人尊敬的 apk 用于相应的设备？请注意，所有这些都使用构建版本 2.2。我想根据屏幕尺寸和密度来配置它们。

# jquery - 响应式背景jQuery问题

> ID：12455548
> 
> 赞同：1
> 
> 时间：2012-09-17T08:26:00.210
> 
> 标签：jquery, drupal-7, responsive-design

我正在尝试在自定义 Drupal 主题中制作响应式背景幻灯片。幻灯片部分由 Drupal 的模块（视图、幻灯片）覆盖，图像由 CSS 定位。现在，我编写了一个简单的 jQuery 代码，可以让图像拉伸并填满屏幕。我以为一切都很好，直到我在 IE 中测试它。后来，我发现了更多的问题。所以，他们在这里：

```
1\. In IE9, this code works only on first image, others keep their original sizes. 
2\. In IE8 there is no background images at all on the screen. 
3\. In Firefox, after a while, browser crash. 
```

我的这个小代码可能有严重问题，但我找不到什么：

```
 $(document).ready(function() {
    stretchBg();
    var windowWidth;
    var windowHeight;
    var imageWidth;
    var ratio;
    var imageHeight;
    function stretchBg() {
    windowWidth = $(window).width();
windowHeight = $(window).height();
$('#background img').each(function() {
  imageWidth =  $(this).attr('width');
  ratio = parseFloat(windowWidth / imageWidth).toFixed(2);
  imageHeight = $(this).attr('height') * ratio;
  if(windowHeight <= imageHeight) {
    $(this).attr('width', windowWidth);
    } else {
    $(this).attr('height', windowHeight);
  }
}); 
    }  
    $(window).resize(function() {
    stretchBg();
    });
    }); 
```

注意：我对图像使用 attr() 而不是 width()，因为它们被 display:none 属性隐藏，并且在加载之前无法检索它们的尺寸。

**非常感谢您，非常感谢您的帮助。**

# map - Scheme中平方列表中的值总和

> ID：12455550
> 
> 赞同：1
> 
> 时间：2012-09-17T08:26:07.060
> 
> 标签：map, lisp, scheme

我试图让以下程序工作，但由于某种原因，它一直告诉我我的输入不包含正确数量的参数，为什么？这是程序

```
(define (sum f lst)
   (cond
     ((null? lst)
       0)
     ((pair? (car lst))
      (+(f(sum (f car lst))) (f(sum (f cdr lst)))))
     (else
       (+ (f(car lst)) (f(sum (f cdr lst))))))) 
```

这是我的输入：`(sum (lambda (x) (* x x)) '(1 2 3))`

谢谢！

顺便说一句，我不相信代码，我只是玩这个（http://groups.engin.umd.umich.edu/CIS/course.des/cis400/scheme/listsum.htm）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:11:41.477

您确实向过程传递了错误数量的参数，`sum`并且`f`注意表达式是错误的`(sum (f car lst))`，`(sum (f cdr lst))`当然您的意思是`(sum f (car lst))`，`(sum f (cdr lst))`-您不想将`f`（单参数过程）应用于您的两个参数传递，并`sum`期望两个参数，但只有一个传递。试试这个：

```
(define (sum f lst)
  (cond ((null? lst)
         0)
        ((pair? (car lst))
         (+ (sum f (car lst)) (sum f (cdr lst))))
        (else
         (+ (f (car lst)) (sum f (cdr lst)))))) 
```

更重要的是：您`f`在错误的地方调用了该过程。最后一行只需要一个调用，因为 when`(car lst)`只是一个数字而不是一个列表 - 在其他地方，两者`(car lst)`和`(cdr lst)`都是需要遍历的列表；`f`只需作为参数传递，以正确推进递归。

让我们用一个更有趣的输入来尝试更正的过程——事实上，这个过程能够找到任意嵌套列表的总和：

```
(sum (lambda (x) (* x x)) '(1 (2) (3 (4)) 5))
> 55 
```

您应该看一下[The Little Schemer](https://rads.stackoverflow.com/amzn/click/com/0262560992)或[How to Design Programs](http://www.ccs.neu.edu/home/matthias/HtDP2e/)，这两本书都将教您如何为列表列表上的此类递归问题构建解决方案。

# android - 如何画出不同颜色的线条？

> ID：12455554
> 
> 赞同：1
> 
> 时间：2012-09-17T08:26:18.217
> 
> 标签：android, android-layout, color-picker

我开发了一个在屏幕上绘制线条的应用程序。我想为线条使用不同的颜色，但所有线条都以相同的颜色出现。

我的代码中有一个颜色选择器来更改颜色，我想每次通过选择颜色来绘制不同颜色的线条，但到目前为止，因为我正在构建线条并渲染它。当我最初选择红色并画一条线时，然后选择蓝色并画一条线，现在旧线也变成蓝色而不是红色，但是我希望红色保持红色，蓝色这样的任何人都可以帮忙吗？

我的代码如下

**我的演示.java：**

```
public class MyDemo extends Activity implements
        ColorPickerDialog.OnColorChangedListener {

    private LinearLayout root;

    private Button btnReset;
    private Button btnPickColor;
    public static int selectedColor = Color.BLACK;
    MyImageView view;
    private static final String COLOR_PREFERENCE_KEY = "color";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_demo);

        root = (LinearLayout) findViewById(R.id.root);
        btnReset = (Button) findViewById(R.id.reset);
        btnPickColor = (Button) findViewById(R.id.pickColor);

        final MyImageView view = new MyImageView(this);
        view.setLayoutParams(new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT,
                LinearLayout.LayoutParams.FILL_PARENT));
        root.addView(view);

        btnReset.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                view.reset();
            }
        });

        btnPickColor.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // color picker class call
                int color = PreferenceManager.getDefaultSharedPreferences(
                        MyDemo.this).getInt(COLOR_PREFERENCE_KEY, Color.WHITE);
                new ColorPickerDialog(MyDemo.this, MyDemo.this, color).show();

            }
        });
    }

    public void colorChanged(int color) {
        PreferenceManager.getDefaultSharedPreferences(this).edit()
                .putInt(COLOR_PREFERENCE_KEY, color).commit();
        selectedColor = color;
    }

} 
```

**MyImageView.java：**

```
public class MyImageView extends ImageView implements View.OnTouchListener {

    private int id = -1;
    private Path path;
    private List<Path> paths = new ArrayList<Path>();
    private List<PointF> points = new ArrayList<PointF>();
    boolean multiTouch = false;
    MyDemo demo;

    public MyImageView(Context context) {
        super(context);
        this.setOnTouchListener(this);
        Log.d("Constructor", " Control in constructor");
    }

    public void reset() {
        paths.clear();
        points.clear();
        path = null;
        id = -1;
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        int colorPicked = MyDemo.selectedColor;
        if (colorPicked != Color.BLACK) {
            Paint paint = createPen(colorPicked);
            paint.setStyle(Paint.Style.STROKE);
            for (Path path : paths) {
                canvas.drawPath(path, paint);
            }
            for (int i = 0; i < points.size(); i++) {
                PointF p = points.get(i);
                canvas.drawText("" + p.x, p.y, i, createPen(colorPicked));
            }
        } else {
            Paint paint = createPen(colorPicked);
            paint.setStyle(Paint.Style.STROKE);
            for (Path path : paths) {
                canvas.drawPath(path, paint);
            }}
            for (int i = 0; i < points.size(); i++) {
                PointF p = points.get(i);
                canvas.drawText("" + p.x, p.y, i, createPen(colorPicked));
            }
        }

    private PointF copy(PointF p) {
        PointF copy = new PointF();
        copy.set(p);
        return copy;
    }

    public boolean onTouch(View v, MotionEvent event) {
        int action = event.getAction();
        switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            multiTouch = false;

            id = event.getPointerId(0);
            PointF p = getPoint(event, id);
            path = new Path();
            path.moveTo(p.x, p.y);
            paths.add(path);
            points.add(copy(p));
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            multiTouch = true;
            for (int i = 0; i < event.getPointerCount(); i++) {
                int tId = event.getPointerId(i);
                if (tId != id) {
                    points.add(getPoint(event, i));
                }
            }
            break;
        case MotionEvent.ACTION_MOVE:
            if (!multiTouch) {
                p = getPoint(event, id);
                path.lineTo(p.x, p.y);
            }
            break;
        }
        invalidate();
        return true;
    }

    private PointF getPoint(MotionEvent event, int i) {
        int index = 0;
        return new PointF(event.getX(index), event.getY(index));
    }

    public Paint createPen(int color) {
        Paint pen = new Paint();
        pen.setColor(color);
        float width = 3;
        pen.setStrokeWidth(width);
        return pen;
    }

} 
```

**ColorPickerDialog.java：**

```
public class ColorPickerDialog extends Dialog {

    public interface OnColorChangedListener {
        void colorChanged(int color);

    }

    private final OnColorChangedListener mListener;
    private final int mInitialColor;

    private static class ColorPickerView extends View {
        private final Paint mPaint;
        private final Paint mCenterPaint;
        private final int[] mColors;
        private final OnColorChangedListener mListener;

        ColorPickerView(Context c, OnColorChangedListener l, int color) {
            super(c);
            mListener = l;
            mColors = new int[] { 0xFFFF0000, 0xFFFF00FF, 0xFF0000FF,
                    0xFF00FFFF, 0xFF00FF00, 0xFFFFFF00, 0xFFFF0000 };
            Shader s = new SweepGradient(0, 0, mColors, null);

            mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
            mPaint.setShader(s);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeWidth(32);

            mCenterPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
            mCenterPaint.setColor(color);
            mCenterPaint.setStrokeWidth(5);
        }

        private boolean mTrackingCenter;
        private boolean mHighlightCenter;

        @Override
        protected void onDraw(Canvas canvas) {
            float r = CENTER_X - mPaint.getStrokeWidth() * 0.5f;

            canvas.translate(CENTER_X, CENTER_X);

            canvas.drawOval(new RectF(-r, -r, r, r), mPaint);
            canvas.drawCircle(0, 0, CENTER_RADIUS, mCenterPaint);

            if (mTrackingCenter) {
                int c = mCenterPaint.getColor();
                mCenterPaint.setStyle(Paint.Style.STROKE);

                if (mHighlightCenter) {
                    mCenterPaint.setAlpha(0xFF);
                } else {
                    mCenterPaint.setAlpha(0x80);
                }
                canvas.drawCircle(0, 0, CENTER_RADIUS
                        + mCenterPaint.getStrokeWidth(), mCenterPaint);

                mCenterPaint.setStyle(Paint.Style.FILL);
                mCenterPaint.setColor(c);
            }
        }

        @Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            setMeasuredDimension(CENTER_X * 2, CENTER_Y * 2);
        }

        private static final int CENTER_X = 100;
        private static final int CENTER_Y = 100;
        private static final int CENTER_RADIUS = 32;

        private int ave(int s, int d, float p) {
            return s + java.lang.Math.round(p * (d - s));
        }

        private int interpColor(int colors[], float unit) {
            if (unit <= 0)
                return colors[0];
            if (unit >= 1)
                return colors[colors.length - 1];

            float p = unit * (colors.length - 1);
            int i = (int) p;
            p -= i;

            // now p is just the fractional part [0...1) and i is the index
            int c0 = colors[i];
            int c1 = colors[i + 1];
            int a = ave(Color.alpha(c0), Color.alpha(c1), p);
            int r = ave(Color.red(c0), Color.red(c1), p);
            int g = ave(Color.green(c0), Color.green(c1), p);
            int b = ave(Color.blue(c0), Color.blue(c1), p);

            return Color.argb(a, r, g, b);
        }

        private static final float PI = 3.1415926f;

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX() - CENTER_X;
            float y = event.getY() - CENTER_Y;
            boolean inCenter = java.lang.Math.sqrt(x * x + y * y) <= CENTER_RADIUS;

            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                mTrackingCenter = inCenter;
                if (inCenter) {
                    mHighlightCenter = true;
                    invalidate();
                    break;
                }
            case MotionEvent.ACTION_MOVE:
                if (mTrackingCenter) {
                    if (mHighlightCenter != inCenter) {
                        mHighlightCenter = inCenter;
                        invalidate();
                    }
                } else {
                    float angle = (float) java.lang.Math.atan2(y, x);
                    // need to turn angle [-PI ... PI] into unit [0....1]
                    float unit = angle / (2 * PI);
                    if (unit < 0) {
                        unit += 1;
                    }
                    mCenterPaint.setColor(interpColor(mColors, unit));
                    invalidate();
                }
                break;
            case MotionEvent.ACTION_UP:
                if (mTrackingCenter) {
                    if (inCenter) {
                        mListener.colorChanged(mCenterPaint.getColor());

                    }
                    mTrackingCenter = false; // so we draw w/o halo
                    invalidate();
                }
                break;
            }
            return true;
        }
    }

    public ColorPickerDialog(Context context, OnColorChangedListener listener,
            int initialColor) {
        super(context);

        mListener = listener;
        mInitialColor = initialColor;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        OnColorChangedListener l = new OnColorChangedListener() {
            public void colorChanged(int color) {
                mListener.colorChanged(color);
                dismiss();
            }
        };

        LinearLayout layout = new LinearLayout(getContext());
        layout.setOrientation(LinearLayout.VERTICAL);
        layout.setGravity(Gravity.CENTER);
        layout.setPadding(10, 10, 10, 10);
        layout.addView(new ColorPickerView(getContext(), l, mInitialColor),
                new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.WRAP_CONTENT,
                        LinearLayout.LayoutParams.WRAP_CONTENT));
        setContentView(layout);
        setTitle("Pick a Color");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:50:14.583

试试这个，它会帮助你

```
 @Override
  protected void onDraw(Canvas canvas) {

    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    int colorPicked = MainActivity.selectedColor;

    paint1 = createPen(colorPicked);
     for (Path p : paths){       
         canvas.drawPath(p, paint1);
         paint1.setColor(colorPicked);
     }

}

private Paint createPen(int color) {
    // TODO Auto-generated method stub

    paint1 = new Paint();
    paint1.setAntiAlias(true);
    paint1.setDither(true);
    paint1.setStyle(Paint.Style.STROKE);
    paint1.setStrokeJoin(Paint.Join.ROUND);
    paint1.setStrokeCap(Paint.Cap.ROUND);
    paint1.setStrokeWidth(3);
    return paint1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:23:47.207

我不确定，但问题在于你的 onDraw 方法

```
Paint paint = createPen(colorPicked);
paint.setStyle(Paint.Style.STROKE);
for (Path path : paths) {
    canvas.drawPath(path, paint);
} 
```

您首先选择一种颜色（这是您选择的最后一种颜色），然后使用相同的颜色绘制每条路径。我认为解决方案可能是创建颜色数组，其中包含您创建的每条路径的颜色，并在绘制每条路径之前选择相应的颜色

# c - 在函数和“fprintf”开头定义变量

> ID：12455556
> 
> 赞同：0
> 
> 时间：2012-09-17T08:26:30.203
> 
> 标签：c, variables, scanf

我希望你能帮助我解决一些我不确定的事情，即使编译器没有抱怨它们：

在这里我需要编写一个获取输入和输出的程序，在输入文件中存储了我不知道它们的数量除以空格的整数，我需要读取这些数字，按数字总和比较对它们进行排序并打印出来输出文件中的排序数字。这就是我写的，然后是关于这段代码的几个简短问题：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <assert.h>

int myComp(const void *a, const void *b){

    int x=(*(int*)a);
    int y=(*(int*)b);
    int sumForx=0;
    int sumFory=0;

    while (x){
        sumForx=sumForx+(x%10);
        x=(x-(x%10))/10;
    }

    while (y){
            sumFory=sumFory+(y%10);
            y=(y-(y%10))/10;
        }
    if (x>y) return 1;
    else if (x<y) return -1;
    else return 0;

}

int main(int argc, char** argv) {

    FILE* inFile;
    FILE* outFile;
    int size=0;
    int tmp;

    if (argc!=3) {
        printf("Please enter 3 arguments");
        assert(0);
    }
    inFile=fopen(argv[1], "r");
    if (inFile==NULL) {
        printf("path to the input file has not found");
        assert(0);
    }
    outFile=fopen(argv[2], "w");

    if (outFile==NULL) {
        printf("path to the output file has not found");
        assert(0);
    }

    while (fscanf(inFile, "%d", &tmp)==1) {
        size++;
    }

    int arr[size];

    fseek(inFile, 0, SEEK_SET);
    int i=0;
    while (fscanf(inFile, "%d", &tmp)==1) {
        arr[0]=tmp;
        i++;
    }

    qsort(arr,size,sizeof(int),myComp);

    int j;
    for (j=0;j<size;j++){
        fprintf(outFile,"%d",arr[j]);
        fprintf(outFile,"%c",' ');
    }

    fclose(inFile);
    fclose(outFile);

    return 1;

} 
```

1.  我在主程序中不断定义新变量，在不同的地方——我记得我不应该这样做，因为所有变量都必须在函数的开头定义，除非有内部函数/括号的局部变量，这是这里不是这种情况——但编译器仍然可以接受——正确的做法是什么？

2.  如果 (1) 的答案是“你必须在函数的开头定义所有变量”——在我的情况下，我必须`int* arr`在计算大小后定义动态并为其分配空间，否则我不能使用`int arr[size]`，因为计算了大小在所有变量都已经定义之后，包括整数数组。

3.我想在打印到文件时在这些数字之间输入一个空格，`fprintf(outFile,"%c",' ');`每次输入整数后是否正确？

4.欢迎任何其他更正！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:48:14.880

在函数开头声明所有变量的要求可以追溯到标准的先前版本（C89，C99 已过时，C11 已过时）。

由于您使用的是可变长度数组 ( `arr[size]`)，这在该标准的先前版本中是不可能的，因此您显然使用了一个中等体面的编译器，它不会遵守自 1999 年以来不再适用的限制。 -)

至于打印一个空间，`fprintf( outfile, " " )`或者（甚至更好）`fputc( ' ', outfile )`会做。

至于进一步的更正，我有不阅读/评论未注释来源的习惯。你有一种我强烈反对的编码风格，但至少你在应用它时是一致的。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:56:17.163

**1：**只要您使用的是支持 C99 标准或更高版本的编译器，就可以在函数体的任何位置声明变量。正如您所说，早期的编译器要求您在块范围的开头声明变量。

但是，通过进一步限制某些变量的范围，您可以做得比在您的代码中做得更好。代替：

```
int j;
for (j = 0; j < size; j++) { ... } 
```

您可以将其简化为：

```
for (int j = 0; j < size; j++) { ... } 
```

这也限制了语句`j`后面的块可访问的范围。`for`

**2：**动态大小的数组仅在 C99 及更高版本中受支持，因此代码不会在不支持较新标准的编译器上编译。

**3：**您可以简单地在初始格式字符串中添加额外的空格：

```
fprintf(outfile, "%d ", arr[j]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:36:50.990

1.  这取决于您使用的 C 版本。如果您使用 ANSI C (c89)，您将收到有关此问题的警告或错误。但是大多数（如果不是全部）现代编译器几乎在代码的任何地方都支持声明。
2.  这又取决于您的编译器。旧的编译器不能像这样分配静态数组，现代编译器可以。
3.  `fprintf(outFile, " ");`也是完全合法的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:48:32.823

```
printf("Please enter 3 arguments"); 
```

可执行文件名称通常不称为参数，因此通常是

```
printf("Please enter 2 arguments - input filename and output filename e.g.:\n");
printf("%s file1.txt file2.txt\n",argv[0]); 
```

这个

```
arr[0]=tmp; 
```

应该

```
arr[i]=tmp; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T08:53:13.083

1.  如果您使用 gcc，它将允许您将变量放在函数中的任何位置。然而，其他编译器（例如 MSVC 2008）遵循*ansi c* ie c89 并且可能会抱怨它。正确的做法取决于您的应用程序。如果您希望它可以跨编译器移植，则声明应位于语句之前。
2.  这也是特定于编译器和 C 标准的，因此类似于第 1 点的推理适用。
3.  为此，您的代码看起来不错，但我使用类似：

    `fprintf(outFile, "%d ", arr[j]);`

在一行中实现类似的功能。

# node.js - 节点 gm - 使用裁剪和调整大小导致错误

> ID：12455559
> 
> 赞同：1
> 
> 时间：2012-09-17T08:26:37.480
> 
> 标签：node.js, resize, crop, graphicsmagick

以下代码引发错误。

> 错误：命令失败：gm convert：几何不包含图像（无法裁剪图像）。

```
var gm = require('gm');

gm('/origin.jpg')
.resize(600)
.write('/beforeCrop', function (err) {
    // beforeCrop is 600 * 450
    gm('/beforeCrop')
    .crop(70, 70, 100, 100)
    .resize(50, 50)
    .write('/result', function (err) {
        if (err) throw err;
    });
}); 
```

似乎 gm 无法解析**beforeCrop**的大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T01:08:38.057

为什么不通过管道连接到流并即时读取呢？

```
var gm = require('gm');

gm('/origin.jpg')
.resize(600)
.stream(function (err,stdout,stderr) {
    // beforeCrop is 600 * 450
    gm(stdout) // gm can read buffers ;)
    .crop(70, 70, 100, 100)
    .resize(50, 50)
    .write('/result', function (err) {
        if (err) throw err;
    });
}); 
```

我还考虑像这样裁剪后管道到另一个流：

```
var gm = require('gm');

gm('/origin.jpg')
.resize(600)
.stream(function (err,stdout,stderr) {
    // beforeCrop is 600 * 450
    gm(stdout) // gm can read buffers ;)
    .crop(70, 70, 100, 100).stream(function (err,stdout,stderr) {
        gm(stdout).resize(50, 50)
        .write('/result', function (err) {
            if (err) throw err;
        });
    });
}); 
```

在同一条链上进行这两项操作时，我遇到了一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:02:40.113

您似乎正在读取和写入系统的根目录。除非您以 root/管理员身份运行，否则您将没有正确的权限来执行此操作，如果您是，您可能（当然，如果这是 Web 服务器的一部分）打开了一个巨大的安全漏洞。

# c# - 操纵gridview列值

> ID：12455560
> 
> 赞同：1
> 
> 时间：2012-09-17T08:26:38.307
> 
> 标签：c#, asp.net, datetime, gridview

我的意图是转换一个 int 表示的月份值（因为它在数据库表中）

将它（在 GridView 中显示）转换为字符串（月份名称）并将其作为 int 返回到数据库（转换回原始类型，int 表示的月份）。

这些是我的 GridView 中的相关元素，

```
<asp:GridView ID="GV_DaysPerMonth" runat="server" DataSourceID="dsWorkDayPerMonth" 
        AutoGenerateColumns="False" DataKeyNames="recordID" AllowPaging="True" 
        CellPadding="4" ForeColor="#333333" GridLines="None" Font-Names="arial" PageSize="12" 
        OnRowDataBound="GV_DaysPerMonth_RowDataBound"
        OnRowEditing="GV_DaysPerMonth_RowEditing"
        OnRowUpdating="GV_DaysPerMonth_RowUpdating">
    <AlternatingRowStyle BackColor="White" />
    <Columns>

                <asp:TemplateField HeaderText="חודש" ControlStyle-Width="100" HeaderStyle-Width="120" ItemStyle-HorizontalAlign="Center"> 
                    <ItemTemplate> 
                        <%# Eval("theMonth")%> 
                    </ItemTemplate> 
                    <EditItemTemplate> 
                        <asp:TextBox ID="TBX_theMonth" runat="server" Text='<%# Bind("theMonth")%>' /> 
                    </EditItemTemplate> 
```

```
<asp:GridView ID="GV_DaysPerMonth" runat="server" DataSourceID="dsWorkDayPerMonth" 
        AutoGenerateColumns="False" DataKeyNames="recordID" AllowPaging="True" 
        CellPadding="4" ForeColor="#333333" GridLines="None" Font-Names="arial" PageSize="12" 
        OnRowDataBound="GV_DaysPerMonth_RowDataBound"
        OnRowEditing="GV_DaysPerMonth_RowEditing"
        OnRowUpdating="GV_DaysPerMonth_RowUpdating">
    <AlternatingRowStyle BackColor="White" />
    <Columns>

                <asp:TemplateField HeaderText="Current Month" ControlStyle-Width="100" HeaderStyle-Width="120" ItemStyle-HorizontalAlign="Center"> 
                    <ItemTemplate> 
                        <%# Eval("theMonth")%> 
                    </ItemTemplate> 
                    <EditItemTemplate> 
                        <asp:TextBox ID="TBX_theMonth" runat="server" Text='<%# Bind("theMonth")%>' /> 
                    </EditItemTemplate> 
```

我正在使用这些 Helper 方法从代码后面

```
 public static CultureInfo ILci = CultureInfo.CreateSpecificCulture("he-IL");

    public static string GetMonthName(int mInt)
    {
        DateTime fullDate = new DateTime(2012, mInt, 2);
        string[] tempDayArray = fullDate.ToString("MMMM", ILci).Split(' ');
        return tempDayArray[0];
    }
    public static int GetMonthAsInt(string mStr)
    {
        return DateTime.ParseExact(mStr, "MMMM", ILci).Month; 
```

为了完成这个简单的任务，但几乎没有错误，我想举一个例子来说明实现它的正确方法。我认为这很简单，原因是通过显示 int

```
<%# manipulation Function( Eval("columnName")) %> 
```

会“正常工作”

但是当我用 Bind("columnName") 尝试它时，它对我来说太复杂了

我错误地假设值在 Cells[1] 中，而实际上它在 Cells[0] 中

所以我确实有它在正常模式和编辑模式下虽然不是可编辑但通过标签作为查看模式而不是文本框

```
protected void GV_DaysPerMonth_RowDataBound(object sender, GridViewRowEventArgs e)
{

    RowNum = GV_DaysPerMonth.Rows.Count;
    GridViewRow CurRow = e.Row;        // Retrieve the current row. 

    if (CurRow.RowType == DataControlRowType.DataRow)
    {
        bool isntEmptyMonth = string.IsNullOrEmpty(e.Row.Cells[0].Text) == false;
        if (isntEmptyMonth)
        {
            e.Row.Cells[1].Text = RobCS.RDates.GetMonthName(Convert.ToInt32((e.Row.Cells[0].Text)));
        }

    }
}

so i think it might be the **missing handler for the edit mode** ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:30:19.723

这是从 int 中获取字符串 Month 名称的方法：

```
CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(1); 
```

更多信息在这里：

[在 c# 中将整数转换为月份名称的最佳方法？](https://stackoverflow.com/questions/218908/best-way-to-turn-an-integer-into-a-month-name-in-c)

要将月份编号转换为 sql server 中的月份名称，请看这里：

[SQL中将月份数字转换为月份名称函数](https://stackoverflow.com/questions/185520/convert-month-number-to-month-name-function-in-sql)

- - 编辑

好的，在 RowDataBound 上，您需要将 int 转换为字符串，所以它类似于：

```
void CustomersGridView_RowDataBound(Object sender, GridViewRowEventArgs e)
{

   if(e.Row.RowType == DataControlRowType.DataRow)
   {
      // Display the month name. When you GridView is bound for the first time, you 
      // will bind the month number, which you can get in e.Row.Cells[1].Text. If 
     // Cells[1] does not work, try Cells[2], till you get the correct value. The 
     // convert the int to month name and assign it to the same Cell.
     e.Row.Cells[1].Text = GetMonthNameFromInt(e.Row.Cells[1].Text)

   }

} 
```

在 Row_updating 上，您想再次将月份名称转换为 int，然后更新您的数据集（或保存到数据库）

```
protected void GridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
{    

   //Update the values.
   GridViewRow row = GridView.Rows[e.RowIndex];
   var monthName = ((TextBox)(row.Cells[1].Controls[0])).Text;
   var monthNumber = GetMonthNumber(monthName);

  // code to update your dataset or database with month number 

  //Reset the edit index.
  GridView.EditIndex = -1;

  //Bind data to the GridView control.
  BindData();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:48:18.057

页面类：

```
private static CultureInfo culture = CultureInfo.CreateSpecificCulture("he-IL");

public static string GetMonthName(string monthNum)
{
    return culture.DateTimeFormat.GetMonthName(Convert.ToInt32(monthNum));
} 
```

网格视图：

```
 <ItemTemplate> 
        <%# GetMonthName(Eval("theMonth").ToString())%> 
    </ItemTemplate> 
    <EditItemTemplate>
        <asp:DropDownList ID="ddlMonth" runat="server" SelectedValue='<%# Bind("theMonth")%>'>
            <asp:ListItem Value="1" Text="תשרי"></ListItem>
               etc...
        </asp:DropDownList>
   </EditItemTemplate> 
```

在您的 EditTemplate 中有一个带有 ListItems: value="1" Text="תשרי" 等的 DropDownList ，因此它是传递给您的数据层进行编辑的月份编号。

# modelica - 被算法部分的 when 子句弄糊涂了

> ID：12455561
> 
> 赞同：1
> 
> 时间：2012-09-17T08:26:41.637
> 
> 标签：modelica

```
model try
  Real x(start = 1);

algorithm 
  when x >= 7 then
      reinit(x, 5);
  end when;

equation
      der(x) = 1 ;

end try; 
```

`when`每当保护条件从 false 更改为 true 时，都应该触发该语句。但在 OpenModelica 中并非如此。`try`OpenModelica 中的示例显示`when`仅触发一次。我想知道这是OpenModelica的错误还是我的一些误解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T21:09:48.767

你是对的。我很确定这将是 OpenModelica 中的一个错误。该模型的工作原理与您在 Dymola 2013 中所期望的一样。

我的猜测是，这与您的 when 条件涉及`x`并且内部的语句最终改变`x`（相同的变量）这一事实有关。可能是它没有注意到监视器函数中的 reinit 用于确定 when 子句应该触发的点。

# configuration - 如何让 SSIS (dtexec) 使用备用配置文件？

> ID：12455565
> 
> 赞同：4
> 
> 时间：2012-09-17T08:26:55.730
> 
> 标签：configuration, ssis

我已将我的 SSIS 配置配置为从 XML 文件加载。当我使用 dtexec 运行包时，我为我正在处理的每个国家/地区指定不同的配置文件。在 Visual Studio 中，我将其指定为 France.dtsConfig（我必须选择一个，这是第一个）。

当我运行包时，`dtexec /FILE Import.dtsx /Reporting V /ConfigFile "C:\Italy.dtsConfig"`我仍然看到输出告诉我“包正在尝试从 XML 文件 France.dtsConfig 进行配置”。

我想我可以通过为每个国家/地区提供不同的 dtsConfig 文件来覆盖配置。这可能吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T23:12:36.027

我正在使用 SQL Server 2008 R2，我遇到了同样的问题，配置覆盖显然被忽略了。我发现我需要的技巧是从包（包配置）中删除 XML 配置设置，然后在运行包时应用您指定的 XML 配置文件。但是，没有发出关于使用该文件的消息（并且由于您从包中删除了 XML 配置定义，因此也不会发出该消息）。

MSDN 有一个[解释](http://technet.microsoft.com/en-us/library/ms141682%28v=sql.105%29.aspx)（转到“了解如何在运行时应用 SSIS 包配置”部分），起初对我来说没有意义，但在发现没有定义 XML 配置文件给出了预期的结果后，我可以看看它想说什么。

在我的例子中，我使用 XML 文件来设置找到 [SSIS 配置] 表的服务器的实例名称。在设计时，这是连接管理器对象中的 DEVServer，我想覆盖 TESTSvr 的值。遵循规则：

1.  “该实用程序在设计时按照包中指定的顺序应用包中指定的配置。” 所以值 DEVServer 是从包中加载的。
2.  “该实用程序然后应用您在命令行上指定的任何选项。” 我的 XML 文件 (TESTSvr) 中的值现在已加载。我可以在这里提供我喜欢的任何文件名，它将被加载（无论是法国还是意大利）。
3.  “然后，该实用程序会在设计时按照包中指定的顺序重新加载包中指定的配置。......该实用程序使用指定的任何命令行选项来重新加载配置。” 注意规则的第二部分，关于使用命令行值。由于我们当前已将服务器设置为 TESTSvr，因此该值现在用于从 [SSIS 配置] 表中加载您想要的其他配置值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-18T09:13:29.523

我没有参考记录此行为的文章，但我已确认。如果包配置中指定为配置文件的文件在运行时可用，它将优先使用命令行中指定的文件。

根据我的经验和观点，这与在命令中指定某些内容应覆盖内置默认值的正常行为相反。

要使用 dtexec 命令中指定的配置文件，请重命名或删除*Package Configurations Organizer中**XML 配置文件*的*配置字符串*中指定的文件。

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-16T06:55:04.040

找到方法了！

在设计器中，只需取消选中 SSIS -> 包配置下的“启用包配置”选项，然后保存。

dtexec 仍将遵循 /conf 开关上提供的配置文件，但即使可访问，它也不再尝试使用设计时配置文件。

我仍然同意这是一种奇怪的行为，无论如何 /conf 都应该覆盖设计时设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T08:48:01.120

这应该工作

```
 /CONFIGFILE "C:\Italy.dtsConfig"   /REPORTING V 
```

指定完整的配置文件位置`double quotes`

编辑 ：

在 MSDB 中部署包后，执行包的命令是

```
 DTEXEC  /SQL "\Package.dtsx" /SERVER "Server Name"
          /CONFIGFILE "C:\Italy.dtsConfig"  /REPORTING V 
```

否则，如果您已在文件系统中部署，则

```
 DTEXEC  /f "Physical Package Location"
 /CONFIGFILE "C:\Italy.dtsConfig" /REPORTING V 
```

检查您是否指向正确的包

[MSDN](http://msdn.microsoft.com/en-us/library/ms162810%28v=sql.105%29.aspx)

```
 You can use the /ConfigFile option to load additional configurations 
  at run time that you did not specify at design time. However, you cannot
  use the /ConfigFile option to replace configured values that you also
  specified at design time 
```**

# java - 如何添加到无界列表？（泛型）

> ID：12455567
> 
> 赞同：0
> 
> 时间：2012-09-17T08:27:00.427
> 
> 标签：java, generics, hashmap

我有兴趣做以下事情：
构建一个`Map<SomeObject<?>, ?>`. 我想使用 2 个列表来添加键和值：

```
List<SomeObject<?>> keys;  
List<?> values; 
```

但我不知道如何在这个列表中添加对象。有任何想法吗？[这](https://stackoverflow.com/questions/12421301/dictionary-like-data-structure-is-this-a-good-practice)
是使用@Ivan 想法的延续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:30:03.700

> 每个条目可以不同，但​​键值对必须相同 T

您不能单独使用字段声明来执行此操作。

您可以做的是提供 getter/setter，它们在每个条目的基础上执行检查。

```
final Map<Class, Object> classObjectMap = new LinkedHashMap<Class, Object>();

public <T> void putMap(Class<T> tClass, T t) {
    classObjectMap.put(tClass, t);
}

@SuppressWarnings("unchecked")
public <T> T getMap(Class<T> tClass) {
    return (T) classObjectMap.get(tClass);
} 
```

该字段本身不提供检查，因为您无法在每个条目的基础上定义关系。使用 getter 和 setter，您可以确保类型是正确的，并且只要您只使用它们就会按预期工作。

* * *

您选择的类型意味着您无法添加到它们。我会让类型允许添加。您可以使用类型擦除来解决此问题，但这并不理想。

> 我没有说它不起作用。我说我不知道​​如何构建包含不同类型对象的列表（混合列表）

你可以有一个`List<Object>`可以包含任何对象的。或者更简单的只是`List`。

不相关的混合类型的集合很少是一个好主意。这通常意味着您避免像 DVO 或 DTO 一样创建自定义类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:37:59.673

例如，您不能将对象添加到其泛型类型`List`具有通配符的 a 中。`?`

这是因为编译器无法检查您添加的对象是否允许用于集合的实际类型。例如：

```
// A List that should only contain strings
List<?> list = new List<String>();

// This is not allowed, because the compiler only knows that 'list'
// is a List<?>; so it can't be sure here that integers are allowed in the list
list.add(123); 
```

请参阅[哪些方法和字段可通过通配符参数化类型的引用变量访问/不可访问？](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ304)在 Angelika Langer 的 Java 泛型常见问题解答中，通过示例获得更长的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:16:57.033

基本上你*可以*做到这一点，但有一点技巧 - 因为你知道键和值的大小，你可以在 map.keys() 和 map.values() 上使用“toArray”方法。这会给你2个数组

```
 class Key<T> {
    }
    Map<Key<?>, ?> map = new HashMap<Key<?>, Object>();
    Key[] keyz = map.keySet().toArray(new Key[0]);
    Object[] values = map.values().toArray(new Object[0]);
    List<Key<?>> lstKey = Arrays.<Key<?>>asList(keyz);
    List<?> lstVal = Arrays.asList(values); 
```

Java中的数组是协变的，这使得它成为可能。

# javascript - 我可以用这种类型的字符串创建一个日期对象吗？在javascript中？

> ID：12455568
> 
> 赞同：-1
> 
> 时间：2012-09-17T08:27:13.123
> 
> 标签：javascript, date

您好，我有一个 XML 文件和一个“创建于”标签，用于存储日期和时间，如下所示 2012-09-15 02:08:46 我正在尝试创建一个新的 Date 对象，以便我可以轻松打印出日期和月份年。但它不喜欢这种格式。

像这样的东西

```
var theDate = new Date(Date.parse(storyDate));

console.log(theDate.getMonth());
theDate = theDate.getDate() + ", " + theDate.getMonth(); 
```

谢谢

更新：我可以让它在 Chrome 但不是 Firefox 中工作。更新：找到答案，谢谢大家。为什么投反对票？事实证明这是一个合理的问题。我错过了一个T。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:48:03.817

```
var theDate = new Date(Date.parse(storyDate.replace(' ', 'T'))); 
```

日期和时间之间需要“T”。（至少在 FireFox 中）

[有效的日期时间格式](http://www.w3.org/TR/NOTE-datetime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:46:11.010

我会使用正则表达式手动解析日期。

```
var dateStr = "2012-09-15 02:08:46"
var dateRegex = /^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/
var dateParts = dateRegex.exec(dateStr)
var year = dateParts[1], 
    month = parseInt(dateParts[2], 10) - 1,
    day = dateParts[3],
    hour = dateParts[4],
    minutes = dateParts[5],
    seconds = dateParts[6];
var date = new Date(year, month, day, hour, minutes, seconds);
//
console.log(date.getMonth())
console.log(date.getDate() + ", " + date.getMonth()); 
```

# android - Android导航模式，深度导航和向上按钮

> ID：12455569
> 
> 赞同：0
> 
> 时间：2012-09-17T08:27:15.040
> 
> 标签：android, android-intent

我的子活动屏幕都有一个“向上”按钮，触摸时会运行以下代码：

```
...
case android.R.id.home: finnish();break;
... 
```

如果我通常通过**A->B->C从活动****A**导航到活动**C**，我如何在保持适当的向上按钮功能的同时直接导航到**C**（按下活动**C**应该让我回到活动**B**）？

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:29:00.410

```
startActivity(new Intent(context,B.class));
startActivity(new Intent(context,C.class)); 
```******

# powershell - 运行 Importpfx.exe 以导入证书的奇怪结果

> ID：12455572
> 
> 赞同：0
> 
> 时间：2012-09-17T08:27:35.497
> 
> 标签：powershell, certificate

我正在编写一个 Powershell 脚本来自动设置 Windows 2008 R2 服务器，而需要做的一件事是将多个证书导入不同的商店。在对如何最好地实现这一点进行了一些研究之后，我发现 Importpfx.exe 是我的目标的最佳选择，即将一个 .pfx 文件导入受信任的人存储，另一个 .pfx 文件导入个人存储, 均适用于计算机帐户。然后，我还需要在导入个人存储后的证书上管理私钥。

起初，我认为 Importpfx.exe 这样做是正确的，但是在研究了如何通过 Powershell 管理私钥之后，我了解到这可以通过编辑与导入证书对应的文件的 acl 来完成，该文件应该是在这里找到“C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys”。这就是我开始注意到导入的证书不太对劲的地方。导入证书后在此文件夹中搜索新文件后，我注意到此文件夹中没有添加新文件。

我在整个 C 盘中搜索了所有按修改日期排序的文件，发现新文件已添加到此文件夹“C:\Users\'user'\AppData\Roaming\Microsoft\Crypto\RSA\S-1-5- 21-2545654756-3424728124-1046164030-4917" 而不是预期的文件夹。虽然我能够通过证书存储手动管理证书的私钥（因为我是导入它的用户），但没有其他用户能够登录机器并管理私钥，收到错误消息“找不到用于解密的证书和私钥”（考虑到相应文件所在的文件夹，这将是有意义的）。

在尝试导入 .pfx 文件之前，我使用一个函数来获取证书的指纹。我曾经运行的代码是：

```
function GetCertificateThumbprint ( [string]$certPreFix, [string]$certPassword, [string]$certFolder, [string]$domain, [bool]$addIfNotFound, [hashtable]$return)

$storePath = "cert:\LocalMachine"
$storeDir = "My"
$storeName = [System.Security.Cryptography.X509Certificates.StoreName]::My
if($certPreFix -eq "XXX")
{
    $storeDir = "TrustedPeople"
    $storeName = [System.Security.Cryptography.X509Certificates.StoreName]::TrustedPeople
}
$storePath = [System.IO.Path]::Combine($storePath, $storeDir)
#Build the certificate file name and get the file
$certFileName = $certPreFix + "." + $domainName + ".*"
$certFile = Get-ChildItem -Path $certFolder -Include $certFileName -Recurse
if ($certFile)
{
#   The certificate file exists so get the thumbprint   
    $Certificate = New-Object system.Security.Cryptography.X509Certificates.X509Certificate2($certFile, $certPassword)
    $certThumbprint = $Certificate.Thumbprint
    if($addIfNotFound)
    {
#       Check for the certificate's thumbprint in store and add if it does not exist already    
        if(-not(Get-ChildItem $storePath | Where-Object {$_.Thumbprint -eq $certThumbprint}))
        {
            Set-Location "$Env:windir\Tools"
            .\importpfx.exe -f $certFile -p $certPassword -t MACHINE -s $storeDir
        }
    }
} 
```

谁能看看我是否做错了什么？有没有人遇到过这个问题并以某种方式解决它？这引起了我的问题，因为我无法正确自动执行“管理私钥”任务！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:10:26.787

我刚刚遇到了同样的问题。创建证书对象时必须指定*MachineKeySet* [X509KeyStorageFlag ：](http://msdn.microsoft.com/en-US/library/system.security.cryptography.x509certificates.x509keystorageflags.aspx)

```
New-Object system.Security.Cryptography.X509Certificates.X509Certificate2($certFile, $certPassword, "PersistKeySet,MachineKeySet") 
```

希望这可以帮助某人。

# iis-express - iisClientCertificateMappingAuthentication 的加密密码 = 密钥集不存在

> ID：12455573
> 
> 赞同：1
> 
> 时间：2012-09-17T08:27:50.447
> 
> 标签：iis-express, password-encryption, appcmd

为 IIS 客户端证书映射身份验证添加 oneToOneMappings 时。出于显而易见的原因，我们想要加密密码。但是如果我们尝试运行以下脚本：

```
appcmd.exe set config "Default Web Site" -section:system.webServer/security/authentication/iisClientCertificateMappingAuthentication 
    /+"oneToOneMappings.[userName='testUser',password='securePassWord!1',certificate='CERTIFICATE_BLOB']" /commit:apphost 
```

我们得到keyset不存在错误。

```
ERROR ( hresult:80090016, message:Failed to commit configuration changes.
Keyset does not exist 
```

我们如何解决这个问题？

（我们在 Windows XP 上运行）

[参考1](http://msdn.microsoft.com/en-us/library/bb422423%28v=vs.90%29.aspx)

[参考文献 2](http://www.iis.net/configreference/system.webserver/security/authentication/iisclientcertificatemappingauthentication)

[参考文献 3](http://www.iis.net/learn/get-started/getting-started-with-iis/getting-started-with-appcmdexe)

# android - 登录eclipse在android中显示地图

> ID：12455576
> 
> 赞同：0
> 
> 时间：2012-09-17T08:28:05.610
> 
> 标签：android, eclipse, google-maps

当我尝试显示地图时，我得到了以下日志。

日志是： -

```
09-17 13:01:49.846: E/ActivityManager(89):   0.1% 33/zygote: 0% user + 0.1% kernel / faults: 32 minor
09-17 13:01:49.846: E/ActivityManager(89):   0.1% 85/logcat: 0% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):   0% 37/qemud: 0% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):  +0% 337/com.android.deskclock: 0% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):  +0% 363/zygote: 0% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89): 99% TOTAL: 69% user + 29% kernel + 0.4% softirq
09-17 13:01:49.846: E/ActivityManager(89): CPU usage from 6214ms to 7514ms later:
09-17 13:01:49.846: E/ActivityManager(89):   36% 89/system_server: 27% user + 9% kernel / faults: 246 minor
09-17 13:01:49.846: E/ActivityManager(89):     15% 98/er.ServerThread: 12% user + 2.7% kernel
09-17 13:01:49.846: E/ActivityManager(89):     7.2% 99/ActivityManager: 4.5% user + 2.7% kernel
09-17 13:01:49.846: E/ActivityManager(89):     2.7% 241/Binder Thread #: 2.7% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):     1.8% 95/Binder Thread #: 0.9% user + 0.9% kernel
09-17 13:01:49.846: E/ActivityManager(89):     1.8% 96/Binder Thread #: 0.9% user + 0.9% kernel
09-17 13:01:49.846: E/ActivityManager(89):     1.8% 123/PowerManagerSer: 1.8% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.9% 94/Compiler: 0.9% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.9% 240/Binder Thread #: 0.9% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.9% 256/Binder Thread #: 0% user + 0.9% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.9% 257/Binder Thread #: 0.9% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):   10% 174/app_process: 9% user + 0.9% kernel / faults: 51 minor
09-17 13:01:49.846: E/ActivityManager(89):   5% 208/com.android.phone: 3.9% user + 1.1% kernel / faults: 221 minor
09-17 13:01:49.846: E/ActivityManager(89):     3.9% 208/m.android.phone: 3.3% user + 0.5% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.5% 210/HeapWorker: 0% user + 0.5% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.5% 218/GC: 0% user + 0.5% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.5% 235/Binder Thread #: 0.5% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):    +0% 355/Binder Thread #: 0% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):    +0% 356/Binder Thread #: 0% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):   3.8% 180/com.android.systemui: 3.2% user + 0.5% kernel / faults: 119 minor
09-17 13:01:49.846: E/ActivityManager(89):     3.8% 180/ndroid.systemui: 3.2% user + 0.5% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.5% 192/Binder Thread #: 0.5% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.5% 193/Binder Thread #: 0.5% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):   4.1% 276/com.google.process.gapps: 2.9% user + 1.1% kernel / faults: 54 minor
09-17 13:01:49.846: E/ActivityManager(89):     2.9% 276/e.process.gapps: 2.9% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.5% 282/Binder Thread #: 0.5% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):    +0% 358/AsyncTask #1: 0% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):    +0% 360/Thread-21: 0% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):   3.8% 299/com.android.launcher: 2.2% user + 1.6% kernel / faults: 186 minor
09-17 13:01:49.846: E/ActivityManager(89):     2.7% 333/launcher-loader: 1.1% user + 1.6% kernel
09-17 13:01:49.846: E/ActivityManager(89):     1.1% 299/ndroid.launcher: 1.1% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):   4.5% 62/bootanimation: 3.6% user + 0.9% kernel
09-17 13:01:49.846: E/ActivityManager(89):     5.4% 65/BootAnimation: 4.5% user + 0.9% kernel
09-17 13:01:49.846: E/ActivityManager(89):   3.3% 32/surfaceflinger: 2.5% user + 0.8% kernel
09-17 13:01:49.846: E/ActivityManager(89):     3.3% 59/SurfaceFlinger: 1.6% user + 1.6% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.8% 32/surfaceflinger: 0% user + 0.8% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.8% 61/Binder Thread #: 0% user + 0.8% kernel
09-17 13:01:49.846: E/ActivityManager(89):   3.5% 42/adbd: 2.6% user + 0.8% kernel / faults: 2 minor
09-17 13:01:49.846: E/ActivityManager(89):     4.4% 78/adbd: 4.4% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):     2.6% 42/adbd: 2.6% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.8% 77/adbd: 0% user + 0.8% kernel
09-17 13:01:49.846: E/ActivityManager(89):   1.1% 337/com.android.deskclock: 0% user + 1.1% kernel / faults: 11 minor
09-17 13:01:49.846: E/ActivityManager(89):     0.5% 337/droid.deskclock: 0% user + 0.5% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.5% 350/AsyncHandler: 0.5% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):   0.7% 1//init: 0% user + 0.7% kernel
09-17 13:01:49.846: E/ActivityManager(89):   0.9% 85/logcat: 0.9% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):   0.5% 284/android.process.acore: 0.5% user + 0% kernel / faults: 31 minor
09-17 13:01:49.846: E/ActivityManager(89):     0.5% 286/GC: 0.5% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89):     0.5% 316/ApplicationsPro: 0.5% user + 0% kernel
09-17 13:01:49.846: E/ActivityManager(89): 100% TOTAL: 77% user + 22% kernel + 0.8% softirq
09-17 13:01:53.555: E/TelephonyManager(276): Hidden constructor called more than once per process!
09-17 13:01:55.266: E/TelephonyManager(276): Original: com.google.android.location, new: com.google.android.gsf
09-17 13:02:09.415: E/TelephonyManager(89): Hidden constructor called more than once per process!
09-17 13:02:09.415: E/TelephonyManager(89): Original: android, new: android
09-17 13:02:10.956: E/SoundPool(89): error loading /system/media/audio/ui/Effect_Tick.ogg
09-17 13:02:10.976: E/SoundPool(89): error loading /system/media/audio/ui/Effect_Tick.ogg
09-17 13:02:10.976: E/SoundPool(89): error loading /system/media/audio/ui/Effect_Tick.ogg
09-17 13:02:10.976: E/SoundPool(89): error loading /system/media/audio/ui/Effect_Tick.ogg
09-17 13:02:11.017: E/SoundPool(89): error loading /system/media/audio/ui/Effect_Tick.ogg
09-17 13:02:11.017: E/SoundPool(89): error loading /system/media/audio/ui/KeypressStandard.ogg
09-17 13:02:11.017: E/SoundPool(89): error loading /system/media/audio/ui/KeypressSpacebar.ogg
09-17 13:02:11.036: E/SoundPool(89): error loading /system/media/audio/ui/KeypressDelete.ogg
09-17 13:02:11.056: E/SoundPool(89): error loading /system/media/audio/ui/KeypressReturn.ogg
: E/(): Device disconnected 
```

我的 .java 文件代码是：-

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainactivity);        

         mapview=(MapView)findViewById(R.id.zoom);
        LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);
        View zoomView=mapview.getZoomControls();

        zoomLayout.addView(zoomView,
                 new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));

        mapview.displayZoomControls(true);

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    } } 
```

我正在使用平台级别：3.2 和 ADI-13 的模拟器

请帮助我。我无法理解如何克服这个日志

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:33:59.147

`CPU calculations`当您在`MainUI`线程上运行繁重时，会显示日志的前半部分（直到出现错误） 。

（我不确定这是否正确，但是当我这样做时我看到了那些日志条目）。

后半部分说系统是`unable to load those files`。

检查他们是否在那里，如果你有`r/w permissions`。

如果没有，请编辑`manifest`文件中的设置。

# wix - 从按钮单击设置属性

> ID：12455579
> 
> 赞同：0
> 
> 时间：2012-09-17T08:28:21.473
> 
> 标签：wix

谁能告诉我当用户单击我的 Wix 安装程序中的按钮时是否可以设置属性。我正在使用 Wix 3.6。我知道你可以设置目录，但我已经尝试过使用它的属性，但它给出了值必须是目录 ID 的错误：

```
 <Publish Dialog="KeyDlg" Control="Demo" Property="[VARIANT]" Value="Demo" Order="1">1</Publish> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:21:18.147

看一下元素的`Property`属性。[`<Publish/>`](http://wix.sourceforge.net/manual-wix3/wix_xsd_publish.htm)

# android - 两个奇怪的问题

> ID：12455581
> 
> 赞同：1
> 
> 时间：2012-09-17T08:28:24.233
> 
> 标签：android, android-layout

我遇到了两个奇怪的问题：

1-我`previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);`在一个应用程序中使用，它工作正常，我尝试在另一个应用程序中使用相同的方法，我发现 eclipse 用黑线交叉这个方法，并说当我使用相同的方法时，这个方法已被弃用另一个应用程序，它可以正常工作，没有任何问题 JAVA 代码：

公共类 AugReal00 扩展 Activity {

```
SurfaceView cameraPreview;
SurfaceHolder previewHolder;
Camera camera;
Boolean inPreview;

SurfaceHolder.Callback surfaceCallback = new Callback() {   

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        camera.stopPreview();
        camera.release();
        camera = null;  
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        try {
            //Open The Camera
            this.camera = android.hardware.Camera.open();
            this.camera.setPreviewDisplay(this.holder);
        } 
        catch(IOException ioe) {
            ioe.printStackTrace(System.out);
        }   
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub
        android.hardware.Camera.Parameters parameters = camera.getParameters();

        parameters.setSceneMode(parameters.SCENE_MODE_SPORTS);
        parameters.setFlashMode(parameters.FLASH_MODE_ON);
        parameters.setPreviewSize(width/2, height/2);
        parameters.setPictureSize(width/2, height/2);
        camera.setParameters(parameters);
        camera.startPreview();
    }
};// end of surfaceCallback Listener

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_aug_real00);

    inPreview = false;
    cameraPreview = (SurfaceView) findViewById(R.id.cameraPreview);
    previewHolder = cameraPreview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    //previewHolder.se;
}   

public void OnResume() {
    super.onResume();
    camera = Camera.open();
}// end of OnResume

public void OnPause() {
    if (inPreview) {
        camera.stopPreview();
    }
    camera.release();
    camera=null;
    inPreview=false;
    super.onPause();
}// end of OnPause. 
```

2-我写了一个简单的程序，我发现eclipse给了我以下错误

```
syntax error, insert } to complete class body 
```

虽然所有的括号都已关闭，但一切都应该正常工作。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:32:53.503

1.  检查您的旧应用 sdk 版本号。在下一个版本中可以弃用相同的 api。

2.  您尚未闭合打开的支架。确保正确插入所有支架。

# c - 是否可以使用预处理器（宏）将 C 字符串文字转换为大写？

> ID：12455582
> 
> 赞同：11
> 
> 时间：2012-09-17T08:28:27.553
> 
> 标签：c, macros, c-preprocessor

忽略有时有更好的非宏方法可以做到这一点（遗憾的是，我有充分的理由），我需要使用宏编写一大堆通用代码。本质上是一个宏库，将为某些预先指定的类型生成大量函数。

为了避免破坏大量预先存在的单元测试，库必须做的一件事是，对于每种类型，生成该类型的名称以全部大写进行打印。例如，类型“flag”必须打印为“FLAG”。

我可以手动为每种类型写出常量，例如

#define flag_ALLCAPSNAME 标志

但这并不理想。我希望能够以编程方式执行此操作。

目前，我已经一起破解了这个：

```
char capname_buf[BUFSIZ];
#define __MACRO_TO_UPPERCASE(arg) strcpy(capname_buf, arg); \
 for(char *c=capname_buf;*c;c++)*c = (*c >= 'a' && *c <= 'z')? *c - 'a' + 'A': *c;
__MACRO_TO_UPPERCASE(#flag) 
```

它在某种程度上做了我想要的（即在这段代码之后，capname_buf 的内容为“FLAG”），但我更喜欢一个允许我使用宏定义字符串文字的解决方案，避免需要这个愚蠢的缓冲区。

我看不到如何做到这一点，但也许我错过了一些明显的东西？

我编写了一个可变参数 foreach 循环宏（就像[这个](https://stackoverflow.com/a/1872506/747916)），但是我不能改变由#flag 生成的字符串文字的内容，并且在任何情况下，我的循环宏都需要一个字符指针列表来迭代（即它迭代列表，而不是索引等）。

想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T08:43:51.710

在可移植的 C99 中不可能有一个将常量字符串转换为所有大写字母的宏（特别是因为字母的概念与字符编码有关。UTF8 字母与 ASCII 字母不同）。

但是，您可能会考虑其他一些解决方案。

*   自定义您的编辑器来做到这一点。例如，您可以编写一些 emacs 代码，根据需要更新每个 C 源文件。

*   `#define`在你的 C 源代码上使用一些预处理器（也许是一个简单的 C 代码生成器脚本，它会在一些`#include`-d 文件中发出一堆）。

*   使用[GCC 扩展](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/C-Extensions.html)可能有

    ```
    #define TO_UPPERCASE_COUNTED(Str,Cnt)
    #define TO_UPPERCASE(Str) TO_UPPERCASE_COUNTED(Str,__COUNT__) {( \
       static char buf_##Cnt[sizeof(Str)+4]; \
       char *str_##Cnt = Str; \
       int ix_##Cnt = 0; \
       for (; *str_##Cnt; str_##Cnt++, ix_##Cnt++) \
         if (ix_##Cnt < sizeof(buf_##Cnt)-1) \
             buf_##Cnt[ix_##Cnt] = toupper(*str_##Cnt); \
       buf_##Cnt; )} 
    ```

*   自定义 GCC，也许使用[MELT](http://starynkevitch.net/Basile/gcc-melt/)（一种扩展 GCC 的领域特定语言），让您`__builtin_capitalize_constant`完成这项工作（*编辑*：MELT 现在是一个非活动项目）。或者用你自己的[GCC 插件](https://gcc.gnu.org/onlinedocs/gccint/Plugins.html)在 C++ 中编写代码（注意，它只适用于一个给定的 GCC 版本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-05T11:29:21.300

完全使用 c 预处理器是不可能做到这一点的。这样做的原因是预处理器将输入作为（原子）读取，并`pp-tokens`从中组成输出。预处理器没有任何结构可以以`pp-token`任何方式将 a 分解为单个字符（无论如何，没有人可以帮助您）。

在您的示例中，当预处理器读取字符串文字时，`"flag"`预处理器基本上是一个原子文本块。它具有有条件地删除这些块或将它们粘合在一起形成更大块的构造。

在某种意义上，唯一允许您分解 a 的构造`pp-token`是通过一些表达式。然而，这些表达式只能在算术类型上工作，这就是为什么它们在这里对你没有帮助。

您的方法通过使用 C 语言结构来规避这个问题，即您在运行时进行转换。预处理器唯一要做的就是插入 C 代码来转换字符串。

# asynchronous - 通过 cron 作业/作业队列使用 ImageMagick 异步调整图像大小

> ID：12455584
> 
> 赞同：3
> 
> 时间：2012-09-17T08:28:35.013
> 
> 标签：asynchronous, cron, imagemagick, thumbnails, image-resizing

这个问题的重点是为由 cron 作业/作业队列引导的异步图像大小调整过程找到一个完美的解决方案。

*图像正在上传并以原始大小保存在服务器上。调整大小过程会拾取它们，调整大小并将它们保存为两种新大小。对于这项工作，我使用 Imagemagick 和以下设置 [nice -n 19 convert -density 500 "' . $fullpath . '" -resample ' 。$dpi 。' "' . $destFolder . '/%d.jpg"']。“nice”不会阻止命令使用 100% CPU。它所做的就是说，如果任何其他进程需要 CPU，它将获得比“好”进程更高的优先级。如您所见，这只是一些改进:(因为我确定如果用户同时上传图片，服务器肯定会崩溃。*

**我的意图是通过服务器而不是通过 Flash 或 Java 在本地处理所有图像。因此，如果我无法获得更多的服务器 CPU 和 RAM，我认为我需要通过 cron 作业实现异步调整大小作业队列，该作业提供有限的 CPU 和内存使用。在处理图像时，用户会获得一个带有信息的缩略图，“您的图像将很快可用”，以阻止他再次上传相同的图像。这是我目前的基本想法。**

我在 Debian Linux 服务器上为这个 Web 应用程序使用 PHP 框架。非常感谢任何有关此类 cron 作业/作业队列/实施想法的帮助、指导提示或信息资源！！！

提前谢谢了！

干杯

汤米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T16:03:09.723

我不知道现成的解决方案，但是如果您可以制作一个可以从目录/数据库中选择和上传图像的 PHP 文件 - 您可以在 www.iron.io 设置一个工作人员并完成此任务！

可能实现一个 REST API 来进行远程交互也是一个好主意。祝你好运！

# javascript - 三.js - 未捕获的类型错误：对象函数（）{}没有方法'getTangentAt' TubeGeometry.js:175

> ID：12455586
> 
> 赞同：0
> 
> 时间：2012-09-17T08:28:41.330
> 
> 标签：javascript, html5-canvas, three.js

绘制螺旋曲线时出现此错误。我添加了最新的 Curve.js 和 TubeGeormetry.js。这是因为画布渲染还是我做错了什么？我正在关注这个例子[http://mrdoob.github.com/three.js/examples/webgl_geometry_extrude_splines.html](http://mrdoob.github.com/three.js/examples/webgl_geometry_extrude_splines.html)

```
 <!DOCTYPE html>
    <html lang="en">
        <head>
            <title>3d Model using HTML5 and three.js</title>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
            <style>
                body {
                    font-family: Monospace;
                    background-color: #f0f0f0;
                    margin: 0px;
                    overflow: hidden;
                }
            </style>
        </head>
        <body>

            <script src="three.min.js" type="text/javascript"></script>
            <script src="Curve.js" type="text/javascript"></script>
            <script src="TubeGeometry.js" type="text/javascript"></script>      
            <script src="Stats.js" type="text/javascript"></script>
            <script src="Detector.js" type="text/javascript"></script>

            <script>
            // variables
            var container, stats;

            var camera, scene, renderer, splineCamera, cameraHelper, cameraEye;

            var text, plane, tube, tubeMesh, parent;

            var targetRotation = 0;
            var targetRotationOnMouseDown = 0;

            var mouseX = 0;
            var mouseXOnMouseDown = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            var binormal = new THREE.Vector3();
            var normal = new THREE.Vector3();

            // extrudePath, Helix Curve
            extrudePath = new THREE.Curve.create(   
                    function() {

                    },  
                    function(t) {   
                        var a = 30; // radius
                        var b = 150; //height
                        var t2 = 2 * Math.PI * t * b / 30;
                        var tx = Math.cos(t2) * a,
                            ty = Math.sin(t2) * a,
                            tz = b * t;

                        return new THREE.Vector3(tx, ty, tz);   
                    }   
                );

            // Tube Geometry
            var segments = 400;
            var closed = false;
            var debug = false;
            var radiusSegments = 12;

            // add tube
            addTube();      

            function addTube()
            {
                alert('hello');                     
                tube = new THREE.TubeGeometry(extrudePath, segments, 2, radiusSegments, closed, debug);

                // Tube Mesh
                tubeMesh = THREE.SceneUtils.createMultiMaterialObject( tube, [
                    new THREE.MeshLambertMaterial({
                        color: color,
                        opacity: geometry.debug ? 0.2 : 0.8,
                        transparent: true
                    }),
                    new THREE.MeshBasicMaterial({
                        color: 0x000000,
                        opacity: 0.5,
                        wireframe: true
                })]);
                parent.add(tubeMesh);
            }

            init();                     
            animate();

            function init(){

                // container
                container = document.createElement( 'div' );
                document.body.appendChild( container );

                // info div
                info = document.createElement( 'div' );
                info.style.position = 'absolute';
                info.style.top = '10px';
                info.style.width = '100%';
                info.style.textAlign = 'center';
                info.innerHTML = 'Drag to spin the cylinder<br/> You can identify cylinder face by clicking on it.</br>';           
                container.appendChild( info );

                // camera
                camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 10000 );
                camera.position.set(0,150,400);

                // scene            
                scene = new THREE.Scene();
                camera.lookAt(scene.position);

                // light            
                scene.add( new THREE.AmbientLight( 0x404040 ) );
                light = new THREE.DirectionalLight( 0xffffff );
                light.position.set( 0, 1, 0 );
                scene.add( light );

                // CONTROLS
                controls = new THREE.TrackballControls( camera );

                // Grid
                geometry = new THREE.Geometry();
                geometry.vertices.push( new THREE.Vector3( - 500, 0, 0 ) );
                geometry.vertices.push( new THREE.Vector3( 500, 0, 0 ) );

                for ( var i = 0; i <= 20; i ++ ) {

                    line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                    line.position.z = ( i * 50 ) - 500;
                    scene.add( line );

                    line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                    line.position.x = ( i * 50 ) - 500;
                    line.rotation.y = 90 * Math.PI / 180;
                    scene.add( line );
                }

                parent = new THREE.Object3D();
                parent.position.y = 100;
                scene.add( parent );

                // projector
                projector = new THREE.Projector();

                // renderer
                renderer = new THREE.CanvasRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );
                container.appendChild( renderer.domElement );               

                // stats
                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.top = '0px';
                container.appendChild( stats.domElement );

                document.addEventListener( 'mousedown', onDocumentMouseDown, false );
                document.addEventListener( 'mouseover', onDocumentMouseOver, false );
                document.addEventListener( 'touchstart', onDocumentTouchStart, false );
                document.addEventListener( 'touchmove', onDocumentTouchMove, false );               

                window.addEventListener( 'resize', onWindowResize, false );

            }           

            function onWindowResize() {

                camera.left = window.innerWidth / - 2;
                camera.right = window.innerWidth / 2;
                camera.top = window.innerHeight / 2;
                camera.bottom = window.innerHeight / - 2;
                camera.aspect = window.innerWidth / window.innerHeight;
                //camera.updateProjectionMatrix();
                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            function onDocumentMouseDown( event ) {
                event.preventDefault();

                document.addEventListener( 'mousemove', onDocumentMouseMove, false );
                document.addEventListener( 'mouseup', onDocumentMouseUp, false );
                document.addEventListener( 'mouseout', onDocumentMouseOut, false );

                mouseXOnMouseDown = event.clientX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;         
            }

            function onDocumentMouseMove( event ) {

                mouseX = event.clientX - windowHalfX;

                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;

            }

            function onDocumentMouseUp( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentMouseOut( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentMouseOver( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentTouchStart( event ) {

                if ( event.touches.length === 1 ) {

                    event.preventDefault();

                    mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotationOnMouseDown = targetRotation;

                }

            }

            function onDocumentTouchMove( event ) {
                if ( event.touches.length === 1 ) {
                    event.preventDefault();
                    mouseX = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;
                }
            }

            function animate() {
                requestAnimationFrame( animate );
                render();
                update();
            }

            function update()
            {
                controls.update();
                stats.update();
            }

            function render() {             
                parent.rotation.y += ( targetRotation - parent.rotation.y ) * 0.05;         
                camera.updateMatrixWorld();
                renderer.render( scene, camera );
            }           

            </script>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T15:50:37.280

您没有正确实例化曲线对象。你应该做

```
extrudePath = new (THREE.Curve.create(...))(); 
```

或者以更容易理解的方式。

```
CustomCurve = THREE.Curve.create(...);
extrudePath = new CustomCurve(); 
```

# android - 尝试通过android中的命令行运行ffmpeg时出现异常

> ID：12455588
> 
> 赞同：2
> 
> 时间：2012-09-17T08:28:54.293
> 
> 标签：android, command-line, ffmpeg

我想通过 android 应用程序中的命令行参数使用 ffmpeg。为此目的：

1.  我已经交叉编译了 ffmpeg lib 并得到了 libffmpeg.so
2.  我已将 libffmpeg.so 存储在应用程序的文件目录中。

这是我正在使用的代码：

```
public class MainActivity extends Activity {

    Process p;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

            String[] cmd =new String[4];
        cmd[0]="/data/data/com.example.ffmpegnew/files/libffmpeg";
        cmd[1]="-i";
        cmd[2]="mnt/sdcard/music/baba.mp4";
        cmd[3]="mnt/sdcard/music/outfile.mp4";

        p = Runtime.getRuntime().exec(cmd,null, new File("/data/data/com.example.ffmpegnew/files"));

        }
        catch(Exception e)
        {
            System.out.println("exception"+e);
        }

    }

} 
```

这是我得到的例外：

```
09-17 13:47:01.679: I/System.out(3752): exceptionjava.io.IOException: Error running exec(). Command: [/data/data/com.example.ffmpegnew/files/libffmpeg.so, -i, mnt/sdcard/music/baba.mp4, mnt/sdcard/music/outfile.mp4] Working Directory: /data/data/com.example.ffmpegnew/files Environment: null 
```

请告诉我如何解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:54:17.857

我猜您正在尝试使用以下 Linux 命令运行 .so 文件：

/data/data/com.example.ffmpegnew/files/libffmpeg.so -i mnt/sdcard/music/baba.mp4 mnt/sdcard/music/outfile.mp4

您实际上是指运行 ffmpeg 可执行文件（参见 man ffmpeg）吗？

ffmpeg -i mnt/sdcard/music/baba.mp4 mnt/sdcard/music/outfile.mp4

我认为第一步可能是制作你的命令，然后你的代码片段在常规 Linux 上运行，然后将其转移到 Android。

PS。无论如何，“mnt/...”中缺少前导“/”；应该是“/mnt/...”

聚苯乙烯。其他讨论可能会有所帮助[1](https://stackoverflow.com/questions/4725773/ffmpeg-on-android?rq=1)

# java - 在java中选择正确的引擎

> ID：12455592
> 
> 赞同：2
> 
> 时间：2012-09-17T08:29:01.070
> 
> 标签：java, lwjgl, jogl, jmonkeyengine

我需要制作一个类似于乐高设计师的程序（仅适用于 DNA 零件而不是乐高）。有很多不同的选项可供选择，我不确定哪种选项最适合我的需求。 [JOGL](http://jogamp.org/jogl/www/)，[lwjgl](http://www.lwjgl.org/)，[JMonkeyEngine](http://jmonkeyengine.com/)，我相信还有其他人。

你能推荐一个最适合我需要的吗？

[这](http://www.google.co.il/search?hl=en&sugexp=les;&cp=7&gs_id=q&xhr=t&q=lego%20designer&bav=on.2,or.r_gc.r_pw.r_qf.&biw=1234&bih=905&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&ei=6d1WUJb5NO6k0AXWooHgDA)就是程序最终应该看起来的样子。还有一张照片：

![在此处输入图像描述](../Images/9561bd677cf7fa532a5e6be3c33203d4.png)

我只知道一点 JOGL 编程，但在我进入它之前，我想确定它对我来说是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:42:35.473

我建议为此使用 jMonkeyEngine。它在底层使用 LWJGL，但提供了一些更高级别的构造，这将使您的生活更加轻松 - 特别是它实现了一个场景图，您可以使用它来构建您的世界/模型。

LWJGL 也可能是一个不错的选择，但它更底层（实际上是 OpenGL 的薄包装器）。因此，您需要自己实现大部分 3D 引擎部件。

# rvm - 如果我想将它与 phusion passanger 一起使用，我应该执行哪种类型的 rvm 安装

> ID：12455598
> 
> 赞同：0
> 
> 时间：2012-09-17T08:29:53.327
> 
> 标签：rvm, passenger

我在 ubuntu 12.04.1 LTS 上。

我已经安装了 apache2 作为 www-data 运行。

我想使用 ruby​​ 1.9.3。

我需要安装passanger。

问题是我应该使用哪种安装方法来安装 rvm。我应该使用单用户还是多用户安装。

如果我必须使用单用户安装，我是作为我的用户还是作为 www-data 安装它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:35:32.437

在我的生产系统上，我在系统范围内安装 RVM。这样我就可以登录（或其他任何人都可以登录）并使用相同的 ruby​​ 和 gemset 在系统上启动控制台。我确信有办法用单用户做到这一点，但这对我来说一直是最简单的。

但是，对于乘客，我建议针对系统 ruby​​ 安装它。这样做的原因是因为每次更改或升级 ruby​​ 时，都会炸毁您的乘客安装，您需要更改 Apache 配置并重新运行乘客安装。这是因为乘客和您的应用程序不需要在同一个 ruby​​ 安装上运行。

# ruby-on-rails - Rails - 嵌套表单

> ID：12455599
> 
> 赞同：1
> 
> 时间：2012-09-17T08:29:56.277
> 
> 标签：ruby-on-rails

我有投注比赛的用户。单次投注称为“Tipp”，用户在“tipp.tipp1”和“tipp.tipp2”中预测比赛得分

我的表单有问题，应该保存用户的“tipps”。

使用下面的代码，我得到“无法批量分配受保护的属性：tipp”，尽管我设置了“accepts_nested_attributes_for :tipps”和“attr_accessible :tipps_attributes”。

我希望我已经提供了所有必要的代码。在此先感谢您的帮助！

这是参数输出：

参数：

```
{
 "utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"mPPpCHjA3f/M2l1Bd3ffO1QUr+kdETGkNE/0CNhbJXE=",
 "user" =>{
          "tipp"=>{
                    "6"=>{"tipp1"=>"4","tipp2"=>"6"},
                    "7"=>{"tipp1"=>"-1","tipp2"=>"-1"},
                    "8"=>{"tipp1"=>"-1","tipp2"=>"-1"}
                  }
            },
 "commit"=>"Update User",
 "user_id"=>"1"
} 
```

缩短代码：

控制器：

1) 用户

```
class UsersController < ApplicationController

def edit_tipps
    @user = current_user
end

def update_tipps
    @user = current_user
    if @user.update_attributes(params[:user])
        flash[:notice] = "success (maybe)"
        redirect_to user_edit_tipps_path(@user)
    else
        flash[:error] = "errors"
        redirect_to user_edit_tipps_path(@user)
    end
end 
```

楷模：

1) 用户

```
class User < ActiveRecord::Base 
attr_accessible :email, :password, :password_confirmation, :tipps_attributes

has_many :tipps
accepts_nested_attributes_for :tipps
end 
```

2) 小费

```
class Tipp < ActiveRecord::Base
attr_accessible :match_id, :points, :round_id, :tipp1, :tipp2, :user_id

belongs_to :user
end 
```

我的表格：

```
<%= form_for @user, :url => { :action => "update_tipps" }  do |user_form| %>
    <% @user.tipps.each do |tipp| %>
    <%= user_form.fields_for tipp, :index => tipp.id do |tipp_form|%>
        <%= tipp_form.text_field :tipp1 %><br/>
        <%= tipp_form.text_field :tipp2 %><br/>
    <% end %>
    <% end %>
    <%= submit_or_cancel(user_form) %> 
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:53:23.397

而不是做你所做的，你可以尝试：

1\. 代替：

```
 <% @user.tipps.each do |tipp| %>
  <%= user_form.fields_for tipp, :index => tipp.id do |tipp_form|%> 
```

我会这样做：

```
 <%= user_form.fields_for :tipps do |tipp_form| %> 
```

或者：2。

```
class User < ActiveRecord::Base 
attr_accessible :email, :password, :password_confirmation, :tipps_attributes, :tipps 
```

祝你好运

# java - DocumentBuilder 线程安全吗？

> ID：12455602
> 
> 赞同：48
> 
> 时间：2012-09-17T08:30:23.083
> 
> 标签：java, multithreading, performance, dom, singleton

我正在查看的当前代码库使用 DOM 解析器。以下代码片段在 5 个方法中重复：

```
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
 DocumentBuilder builder = factory.newDocumentBuilder(); 
```

如果在循环中调用包含上述代码的方法或在应用程序中多次调用该方法，我们将承担为每次调用此类方法创建一个新的 DocumentBuilderFactory 实例和一个新的 DocumentBuilder 实例的开销。

围绕 DocumentBuilder 工厂和 DocumentBuilder 实例创建一个单例包装器是一个好主意，如下所示：

```
public final class DOMParser {
   private DocumentBuilderFactory = new DocumentBuilderFactory();
   private DocumentBuilder builder;

   private static DOMParser instance = new DOMParser();

   private DOMParser() {
      builder = factory.newDocumentBuilder();
   }

   public Document parse(InputSource xml) {
       return builder.parser(xml);
   }
} 
```

如果上述单例在多个线程之间共享，是否会出现任何问题？如果没有，通过使用上述方法在应用程序的整个生命周期中只创建一次 DocumentBuilderFactory 和 DocumentBuilder 实例，是否会提高性能？

**编辑 ：**

我们唯一可能遇到的问题是 DocumentBuilder 在解析 XML 文件时是否保存了一些状态信息，这可能会影响下一个 XML 文件的解析。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-17T08:52:06.717

有关同一问题的其他问题，请参阅评论部分。**您的问题的简短回答：不，**将这些类放在一个单例中是不行的。DocumentBuilderFactory 和 DocumentBuilder 都不能保证是线程安全的。如果您有多个解析 XML 的线程，请确保每个线程都有自己的 DoumentBuilder 版本。每个线程只需要其中一个，因为您可以在重置 DocumentBuilder 后重用它。

**编辑**一个小片段，表明使用相同的 DocumentBuilder 是不好的。对于 java 1.6_u32 和 1.7_u05，此代码失败并显示`org.xml.sax.SAXException: FWK005 parse may not be called while parsing`. 在构建器上取消注释同步，它工作正常：

```
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        final DocumentBuilder builder = factory.newDocumentBuilder();

        ExecutorService exec = Executors.newFixedThreadPool(10);
        for (int i = 0; i < 10; i++) {
            exec.submit(new Runnable() {
                public void run() {
                    try {
//                        synchronized (builder) {
                            InputSource is = new InputSource(new StringReader("<?xml version=\"1.0\" encoding=\"UTF-8\" ?><俄语>данные</俄语>"));
                            builder.parse(is);
                            builder.reset();
//                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            });
        }
        exec.shutdown(); 
```

所以这是你的答案 - 不要`DocumentBuilder.parse()`从多个线程调用。是的，这种行为可能是特定于 JRE 的，如果您使用的是 IBM java 或 JRockit 或给它一个不同的 DocumentBuilderImpl，它可能工作正常，但对于默认的 xerces 实现 - 它不会。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-03-25T04:31:19.463

JAXP 规范 (V 1.4) 说：

> 预计 SAXParserFactory 实现的 newSAXParser 方法、DocumentBuilderFactory 的 newDocumentBuilder 方法和 TransformerFactory 的 newTransformer 方法将是线程安全的，没有副作用。这意味着应用程序程序员应该期望能够从共享工厂一次在多个线程中创建转换器实例，而不会产生副作用或问题。

[https://jaxp.java.net/docs/spec/html/#plugabililty-thread-safety](https://jaxp.java.net/docs/spec/html/#plugabililty-thread-safety)

因此，例如，您应该能够通过 DocumentBuilderFactory.newInstance 创建单个 DocumentBuilderFactory 实例，然后使用该单个工厂通过 DocumentBuilderFactory.newDocumentBuilder 为每个线程创建一个 DocumentBuilder。您还可以创建一个 DocumentBuilders 池。

我找不到任何地方说，例如，静态方法 DocumentBuilderFactory.newInstance 是线程安全的。该实现看起来是线程安全的，因为正在进行一些方法同步，但规范明确指出 DocumentBuilderFactory.newDocumentBuilder 是线程安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T08:39:05.033

你需要知道三件事：

1.  创建工厂的成本是多少？如果成本低，您的性能增益可能接近于零。
2.  创建构建器的成本是多少？如果成本低，您的性能增益可能接近于零。
3.  工厂和/或建造者线程安全吗？如果没有，您需要确保使用`synchronized`关键字使访问它们的方法成为线程安全的。

我不熟悉您正在使用的 DocumentBuilder 类，但所有这些信息都应在其 javadoc 或其他文档中提供。如果某些对象的创建成本很高，他们通常会将这些信息扔给您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-14T14:38:40.300

主要是为了回答您的问题，**Document Builder**不是线程安全的。但是我们可以通过两种方式使它成为线程安全的：

*   同步的
*   线程本地

对于 Synchronized，我们可以做的只是创建一个同步块，这对我们有用，我们应该在小块上使用同步，因为它非常昂贵，有时会使事情变得非常慢。

```
 DocumentBuilder documentBuilder=DocumentBuilderFactory.newInstance().newDocumentBuilder();
   synchronized(documentBuilder)
   {
      documentBuilder.parse(xmlFile.getInputStream());           
   } 
```

我们可以遵循的另一种更好的方法是使用 ThreadLocal。

```
 public class XmlParser {

    private static ThreadLocal<DocumentBuilder> documentBuilder;

    public XmlParser() {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        documentBuilder = ThreadLocal.withInitial(() -> documentBuilder(factory));
    }
    private DocumentBuilder documentBuilder(DocumentBuilderFactory factory) {
        try {
            return factory.newDocumentBuilder();
        } catch (ParserConfigurationException e) {
            throw new Exception("file is not valid);
        }
    }
    public Document parse(MultipartFile xmlFile) {
        try {
            Document parse = documentBuilder.get().parse(xmlFile.getInputStream());
            documentBuilder.remove();
            parse.normalizeDocument();
            return parse;

        } catch (IOException | SAXException e) {
            throw new Exception(e);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-16T06:14:38.713

我们是否可以重用 DocumentBuilder 实例而不是每次都创建它，因为我们的新对象创建占用了 3% 的 CPU 利用率。

样本：-

类级变量：- private static volatile DocumentBuilder builder = null;

```
 if (Common.builder == null) {
        synchronized (DocumentBuilder.class) {
            if (Common.builder == null) {
                SplunkLogger.info("DocBuilderInstance=New_Instance");
                Common.builder =
                        XMLUtil.getDocumentBuilderFactory()
                        .newDocumentBuilder(); // DocumentBuilderFactory.newInstance().newDocumentBuilder();
            } else {
                SplunkLogger.info("DocBuilderInstance=Re-Use_Existing_Instance_InnerIf");
            }
        }
    } else {
        SplunkLogger.info("DocBuilderInstance=Re-Use_Existing_Instance");
}
    final InputSource source = new InputSource();
    source.setCharacterStream(new StringReader(responseString));
    final Document doc = Common.builder.parse(source);
    return doc.getElementsByTagName(firstKey);
} 
```

# xcode4 - XCode 在错误行打开文件以获取自定义构建脚本

> ID：12455610
> 
> 赞同：2
> 
> 时间：2012-09-17T08:31:15.447
> 
> 标签：xcode4

如果这个问题已经被问过，我很抱歉。如果有的话，我似乎在任何地方都找不到。

我有一个自定义构建脚本，用于语法检查一些 php 文件并将它们上传到服务器，这是作为构建过程的一部分执行的。由于此脚本用于解析内联 php 语句（使用宏嵌入到目标 c 块中），因此该脚本在每次构建时都发生是相当重要的。实际执行工作正常，我也希望能够在出现错误时打开特定文件，并将光标定位在大致位置。

我发现，由于 xcode 在我的系统上配置为默认打开 .php 文件（不确定这是否是常态，或者我是否在某个时候手动执行），使用

```
open filename.php 
```

在 shell 脚本中打开文件。

我也希望能够指定行号。

例如类似的东西

```
open filename.php --args --jump-to-line 1234 
```

（--args 是“打开”的开关，意味着将参数传递给 Xcode）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-23T09:39:11.083

您可以使用该`xed`命令。但仅适用于 Xcode 3，不适用于其他编辑器。对于 Xcode 4，试试[这个](https://gist.github.com/dunkelstern/2250729)

看[`man xed`](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xed.1.html)

# c++ - 从文件中读取并避免空白行中的空格

> ID：12455612
> 
> 赞同：1
> 
> 时间：2012-09-17T08:31:37.087
> 
> 标签：c++, whitespace, removing-whitespace

我目前正在做一个项目，我正在阅读命令，我需要避免空白行出现空格。到目前为止，我做得很好，但由于某种原因，我似乎无法弄清楚如何让它发挥作用。我以为`if(opcode == "\t" || opcode == " ")continue;`会照顾好，但没有。如果有人可以请看一下并帮助我，那就太好了。

这是我正在阅读的命令的一个小示例。它们采用 [label] 操作码 [arg1][,arg2] 格式。

```
#Sample Input
LA 1,1
LA 2,2
\t <<<<<<<Here just to show that it's a blank line with only a tab
TOP NOP 
```

这是我的代码：

```
 int counter = 0;
int i = 0;
int j = 0;
int p = 0;

while (getline(myFile, line, '\n'))
{

    if (line.length() == 0)
    {
        continue;
    }

    if (line[0] == '#')
    {
        continue;
    }

    // If the first letter isn't a tab or space then it's a label

    if (line[0] != '\t' && line[0] != ' ')
    {

        string delimeters = "\t ";

        int current;
        int next = -1;

        current = next + 1;
        next = line.find_first_of( delimeters, current);
        label = line.substr( current, next - current );

        Symtablelab[i] = label;
        Symtablepos[i] = counter;

        if(next>0)
        {
            current = next + 1;
            next = line.find_first_of(delimeters, current);
            opcode = line.substr(current, next - current);

            if (opcode != "WORDS" && opcode != "INT")
            {
                counter += 3;
            }

            if (opcode == "INT")
            {
                counter++;
            }

            if (next > 0)
            {
                delimeters = ", \n\t";
                current = next + 1;
                next = line.find_first_of(delimeters, current);
                arg1 = line.substr(current, next-current);

                if (opcode == "WORDS")
                {
                    counter += atoi(arg1.c_str());
                }
            }

            if (next > 0)
            {
                delimeters ="\n";
                current = next +1;
                next = line.find_first_of(delimeters,current);
                arg2 = line.substr(current, next-current);

            }
        }

        i++;

    }

    // If the first character is a tab or space then there is no label and we just need to get a counter
    if (line[0] == '\t' || line[0] == ' ')
    {
        string delimeters = "\t \n";
        int current;
        int next = -1;
        current = next + 1;
        next = line.find_first_of( delimeters, current);
        label = line.substr( current, next - current );

    if(next>=0)
        {
            current = next + 1;
            next = line.find_first_of(delimeters, current);
            opcode = line.substr(current, next - current);

            if (opcode != "WORDS" && opcode != "INT")
            {
                counter += 3;
            }

            if (opcode == "INT")
            {
                counter++;
            }

            if (next > 0)
            {
                delimeters = ", \n\t";
                current = next + 1;
                next = line.find_first_of(delimeters, current);
                arg1 = line.substr(current, next-current);

                if (opcode == "WORDS")
                {
                    counter += atoi(arg1.c_str());
                }

            }

            if (next > 0)
            {
                delimeters ="\n\t ";
                current = next +1;
                next = line.find_first_of(delimeters,current);
                arg2 = line.substr(current, next-current);

            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:34:36.347

使用 std::stringstream 并从您的行中读取 std::string 变量。这样，空白将被省略。

[更新]如果你想从头开始删除空白：

`s.erase(s.find_last_not_of(" \n\r\t")+1);`

[UPDATE2] 或者只是在阅读时数单词：

就像在这个例子中一样：

```
#include <iostream>
#include <sstream>
#include <string>

int main() {

  std::string line;
  while (std::getline(std::cin, line))
  {
      std::string lineNoWS = line;
      lineNoWS.erase(lineNoWS .find_last_not_of(" \n\r\t")+1);
      if (lineNoWS.empty())
        std::cout << "EMPTY LINE\n";

      std::string word;
      unsigned words = 0;
      std::istringstream line_is(line);
      while(line_is >> word)
      {
         std::cout << '\'' << word << "'\n"; 
         ++words;
      }
      std::cout << "(" << words << ")ENDLINE\n"; 
  }
} 
```

只需将 std::cin 替换为您的`ifstream(file)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:23:34.103

您可能应该尝试使命令的阅读更加“通用”。假设一行有效必须以标签开头，并且您的标签只能包含“字母”，而不是检查 '\t'、'\n'、'\r'、'#'、(...) 为什么你不只是使用函数**isalpha**吗？

然后您需要获取参数，并假设它们由“，”分隔，您最好的方法是根据“，”分隔符分割行。

一些示例代码，可以为您提供“标签”和带有“参数”的向量，我建议您也验证标签（例如检查标签是否仅由字母组成，并假设您知道“命令”验证您为特定标签检索的参数的数量和类型。

```
std::ifstream inStream("c:\\data\\dump.txt");   
    if(!inStream.fail())
    {
        while(!inStream.eof())          
        {
            std::string strLine;
            std::getline(inStream, strLine);

            // Label ?
            if( isalpha(strLine[0]))
            {
                int iIndexOf = strLine.find(" ");
                if(iIndexOf != string::npos)
                {
                    std::string strLabel = strLine.substr(0, iIndexOf);

                    // Arguments ?
                    std::vector<std::string> vArguments;
                    std::stringstream ss(strLine.substr(iIndexOf, strLine.size() - iIndexOf));  

                    std::string strArgument;
                    while(std::getline(ss, strArgument, ','))   
                    {                           
                        if(strArgument.size()!=0)                                                           
                            vArguments.push_back(strArgument);
                    }

                    std::cout << "label: " << strLabel << std::endl << "arguments list: ";
                    for(size_t i=0; i<vArguments.size(); i++)
                        std::cout << vArguments[i] << ";";
                    std::cout << std::endl;
                }
                else
                {
                    // No Arguments
                    std::string strLabel = strLine;                                     
                    std::cout << "label: " << strLabel << std::endl;                    
                }
            }           
        }

        inStream.close();
    } 
```

# html - 来自 w3c 链接检查器的断开链接问题

> ID：12455614
> 
> 赞同：1
> 
> 时间：2012-09-17T08:31:45.553
> 
> 标签：html, validation, hyperlink, w3c-validation

当我使用 W3C 链接检查器检查我的网站时，检查器显示：

状态：**403 禁止**

“**链接被禁止！这需要修复。通常的嫌疑人：缺少 index.html 或 Overview.html，或缺少 ACL** ”

但是该链接工作正常。如何从该链接检查器解决此问题？

截屏： ![在此处输入图像描述](../Images/26fe9f41d4485c55469b51f24ae7aab3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:11:13.167

这个问题通常被过度热心的安全过滤所使用，它要么假设所有机器人都是邪恶的，要么假设所有使用某些库的机器人都是邪恶的。

checklink 软件使用 LWP 库，该库经常进入此类黑名单。获取checklink传递链接的两种方式是：

*   下载[checklink](http://search.cpan.org/dist/W3C-LinkChecker/)，编辑其用户代理字符串，然后从本地系统而不是 W3C 服务器运行它。（另请参阅：[安装 CPAN 模块](http://www.cpan.org/modules/INSTALL.html)。）
*   更改链接指向的服务器上的安全过滤（这显然要求您有权访问该服务器）

或者，您可以在每次执行检查时手动检查链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:35:04.560

并非总是可以遵循所有标准。如果您已经测试过链接工作正常，请继续。

# php - 如何在 jpgraph 页面中嵌入 php 代码

> ID：12455616
> 
> 赞同：0
> 
> 时间：2012-09-17T08:31:51.803
> 
> 标签：php, javascript, jquery, html, jpgraph

下面是我的 jp 图形代码

```
 include_once ("jpgraph/jpgraph.php");
            include_once ("jpgraph/jpgraph_scatter.php");

            // Some data for the points
            $datax = array(3.5,13.7,3,4,6.2,6,3.5,8,14,8,11.1,13.7);
            $datay = array(10,22,12,13,17,20,16,19,30,31,40,43);

            // A new scatter graph
            $graph = new Graph(300,200,'auto');
            $graph->SetShadow();
            $graph->SetScale("linlin");

            //$graph->img->SetMargin(40,40,40,40);        

            $graph->title->Set("Scatter plot with Image Map");
            $graph->title->SetFont(FF_FONT1,FS_BOLD);

            // Client side image map targets
            $targ=array("pie_csimex1.php#1","pie_csimex1.php#2","pie_csimex1.php#3",
            "pie_csimex1.php#4","pie_csimex1.php#5","pie_csimex1.php#6",
            "pie_csimex1.php#7","pie_csimex1.php#8","pie_csimex1.php#9" );

            // Strings to put as "alts" (and "title" value)
            $alts=array("val=%d","val=%d","val=%d","val=%d","val=%d","val=%d","val=%d","val=%d","val=%d");

            // Create a new scatter plot
            $sp1 = new ScatterPlot($datay,$datax);

            // Use diamonds as markerss
            $sp1->mark->SetType(MARK_DIAMOND);
            $sp1->mark->SetWidth(10);

            // Set the scatter plot image map targets
            $sp1->SetCSIMTargets($targ,$alts);

            // Add the plot
            $graph->Add($sp1);

            // Send back the HTML page which will call this script again
            // to retrieve the image.
            $graph->StrokeCSIM(); 
```

上面的代码通过显示分散图可以正常工作...但是我想在同一页面中嵌入一些 php 代码，如果我这样做它不起作用....根据一些专家的建议，我替换了 `$graph->StrokeCSIM();`

用`$fileName = "./lang/12345.png"; $graph->img->Stream($fileName);

```
 echo('<img src="./lang/12345.png" />');` 
```

它使用 12345.png 创建一个文件并且不显示图形...我该如何解决这个问题？

用代码更新问题....

```
 $_GET['Variance']=$Variance;
            $_GET['Emp_RecFactor']=$Emp_RecFactor;

            // Some data for the points
            $datax =$Emp_RecFactor;
            $datay =$Variance;

            // A new scatter graph
            $graph = new Graph(600,600);
            $graph->SetScale('intlin',-10,10,0,100);
            $graph->yscale->ticks->Set(1);
            $graph->xscale->ticks->Set(5);

            //$graph->img->SetMargin(40,40,40,40);        

             $graph->xaxis->title->Set("Reco-Factor");
            $graph->yaxis->title->Set("Variance");
            $graph->title->Set("Equity Graph Of All Employees");
            $graph->title->SetFont(FF_FONT1,FS_BOLD);

            // Client side image map targets
            $targ=array("pie_csimex1.php#1","pie_csimex1.php#2","pie_csimex1.php#3",
            "pie_csimex1.php#4","pie_csimex1.php#5","pie_csimex1.php#6",
            "pie_csimex1.php#7","pie_csimex1.php#8","pie_csimex1.php#9" );

            // Strings to put as "alts" (and "title" value)
            $alts=array("val=%d","val=%d","val=%d","val=%d","val=%d","val=%d","val=%d","val=%d","val=%d");

            // Create a new scatter plot
            $sp1 = new ScatterPlot($datay,$datax);

            // Use diamonds as markerss
            $sp1->mark->SetType(MARK_DIAMOND);
            $sp1->mark->SetWidth(10);

            // Set the scatter plot image map targets
            $sp1->SetCSIMTargets($targ,$alts);

            // Add the plot
            $graph->Add($sp1);

            // Send back the HTML page which will call this script again
            // to retrieve the image.

            $graph->Strokecsim(); 
```

test2.php 包含...

```
 echo "<p>hello</p>";
            include "Talent_Graphcopy.php"; // containing the graph code
            echo "<p>goodbye</p>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:08:48.680

$graph->StrokeCSIM() 以图像映射的形式生成图形。包含此代码的 PHP（我们称之为图形脚本）能够生成支持的 HTML 和图形图像本身。

当不带参数调用图形脚本时（例如[http://contoso.com/graph.php](http://contoso.com/graph.php)），将生成 HTML。生成的 HTML 包含一个 IMG 标记，该标记通过一个魔术参数（例如 ）指向脚本本身`<img src="graph.php?_jpg_csimd=1"`。当使用魔法参数调用脚本时，会生成图像。

您不能将生成 HTML 输出的 PHP 代码放入图形脚本中，因为它会阻止图像生成功能正常工作。如果要将自定义 HTML 与图形输出混合，可以将图形脚本包含在另一个 PHP 脚本中。

例如 Display.php

```
echo "<p>hello</p>";
include "Talent_Graphcopy.php"; // containing the graph code
echo "<p>goodbye</p>"; 
```

Talent_Graphcopy.php

```
// fancy graph code...
$graph->StrokeCSIM("Talent_Graphcopy.php"); 
```

将图形脚本的名称指定为 StrokeCSIM 的参数。它告诉脚本将 IMG SRC 设置为指向图形脚本本身以生成图形。如果不指定，IMG SRC 将指向 Display.php... 这是错误的，因为浏览器会向 Display.php 请求图像，它显然无法提供。

# php - 如何在不使用 # 、 Codeigniter 、 Jquery 的情况下将网页聚焦到定义的位置

> ID：12455618
> 
> 赞同：0
> 
> 时间：2012-09-17T08:31:56.027
> 
> 标签：php, jquery, codeigniter

嗨，我正在使用`codeigniter`和`jquery` 。

我正在使用此代码将页面聚焦到定义的位置（此处为 div）。

```
 jQuery(function() {

      var profile_url = "<?php echo $widgets['basic_info_widget']['prof_url']; ?>";
        if(((window.location+"/") != (baseurl+profile_url)) && (window.location != (baseurl+profile_url))) {
            location.hash = '#menu';        
        }   
    }); 
```

通过这个，我将页面重点放在`<div id='menu'></div>`

```
location.hash = '#menu' 
```

但问题是脚本运行时`#menu`添加在 url 之后

```
http://example.com#menu

*can i fous this div without adding #menu at the end of the url . 
```

喜欢

```
 http://example.com 
```

请帮忙 。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:43:35.243

检查这个**[演示](http://jsfiddle.net/W8vdu/)**

```
$(document).ready(function (){
    $("html, body").animate({scrollTop: $("#second_div").offset().top }, 2000);
   });​ 
```

使用[**滚动顶部**](http://api.jquery.com/scrollTop/)

# php - 确认图像存在于 Amazon S3 服务器上——CURL 或 fsockopen

> ID：12455619
> 
> 赞同：1
> 
> 时间：2012-09-17T08:32:04.577
> 
> 标签：php, curl, amazon-s3, file-get-contents, fsockopen

我有一些代码已经检查远程服务器上是否存在图像文件。使用 CURL 或 Fsockopen 这应该是微不足道的，但我有一个问题。

例如，考虑这个 URL： http: [//media-cache-ec3.pinterest.com/upload/202450945720262211_0utXb0QZ_f.jpg](http://media-cache-ec3.pinterest.com/upload/202450945720262211_0utXb0QZ_f.jpg)

其上的 HTTP 标头如下：

```
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: max-age=31536000
Content-Type: image/jpeg
Date: Mon, 17 Sep 2012 08:10:59 GMT
ETag: "31d93cdf91def38bcdbd70786805ba2a"
Expires: Tue, 17 Sep 2013 08:10:59 GMT
Last-Modified: Mon, 17 Sep 2012 05:27:21 GMT
Server: ECS (dfw/56F1)
x-amz-id-2: Lr9D66o3dW5NN15dXhh04MSKIrwqugtFH51g8XoloI+7tItd2ITxJp3KDhVpKWm5
x-amz-request-id: 4F9888DFA41E82C6
X-Cache: HIT
Content-Length: 168738 
```

然而，实际页面返回：

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.
<Error>
<Code>AccessDenied</Code>
<Message>Access Denied</Message>
<RequestId>3AB3633B5D289688</RequestId>
<HostId>
/FOF1nsbJ6slumpg2YHnhV5L+j12z3U/fp5coyi/BGG8JRT3nAtPrCHcIV3p3B0Z
</HostId>
</Error> 
```

我认为只获取 URL 的内容就足够了，但无论我使用 CURL、fsockopen 还是 file_get_contents()，实际内容都是一些二进制垃圾。然而，将浏览器指向该 URL 会显示一些来自 Amazon 的 S3 的 XML，我想这就是 Pinterest 使用的。

所以，问题：关于如何从响应正文（现在打印为二进制垃圾）中检查是否有“AccessDenied”消息的任何提示？

这是我正在使用的代码： http: [//chopapp.com/#1hcycm6x](http://chopapp.com/#1hcycm6x)

谢谢！

# sencha-touch - SenchaTouch onItemDisclosure 2 图标

> ID：12455621
> 
> 赞同：0
> 
> 时间：2012-09-17T08:32:14.107
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个列表，我希望每行有两个图标，使用`onItemDisclosure`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:10:13.140

我不知道如何在两个图标上实现**onItemDisclousre()**但这可能会对您有所帮助。
在下面的示例中，我在每个**itemlist上放置了一个图像，并且在****itemtap 事件**上提供了功能 。这将用于使用单个项目列表执行多项任务**。**

```
//demo.js

Ext.define("Stackoverflow.view.demo", {
extend: "Ext.Container",
requires:"Ext.dataview.List",
alias: "widget.demo",

config: {
    layout: {
        type: 'fit'
    },
    items: [
    {
        xtype: "list",
        store: "store",
        itemId:"samplelist",
        loadingText: "Loading Notes...",
        emptyText: "<div class=\"notes-list-empty-text\">No notes found.</div>",
        onItemDisclosure: true,
        itemTpl:"<div class='x-button related-btn' btnType='related' style='border: none; background: url(\"a.png\") no-repeat;'></div>"+
                   "<div class=\"list-item-title\">{title}</div>"
        grouped: true
    }

    ],
    listeners:
    [
            {
            delegate: "#samplelist",
            event: "disclose",
            fn: "onDiscloseTap"
        }
    ]
},    
onDiscloseTap: function (list, record, target, index, evt, options) {

    this.fireEvent('ondisclosuretap', this, record);
}
}); 
```

// 演示控制.js

```
 Ext.define("Stackoverflow.controller.Democontrol", {
  extend: "Ext.app.Controller",
    config: {
    refs: {
        // We're going to lookup our views by xtype.
        Demo: "demo", 
        Demo1: "demo list",
          },
    control: {
        Demo: { 
               ondisclosuretap: "Disclosure", 
         },
        Demo1: { 

             itemtap:"imagetap" 

        }

    }
},

 Disclosure: function (list, record,target,index,e,obj) {
   Ext.Msg.alert('','Disclosure Tap');

},

  imagetap: function (dataview,index,list,record, tar, obj) { 
     tappedItem = tar.getTarget('div.x-button');
    btntype = tappedItem.getAttribute('btnType');
    if(btntype == 'related')
    {
    Ext.Msg.alert('','Image/Icon Tap');
    }
},

// Base Class functions.
launch: function () {
    this.callParent(arguments);

 },
init: function () {
    this.callParent(arguments);

}
}); 
```

//app.css

```
 .related-btn
   {
      width: 100px;
      height: 100px;
      position: absolute;
  bottom: 0.85em;
      right: 2.50em;
    -webkit-box-shadow: none;
   } 
```

希望这会帮助你。
再见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-01T19:09:24.307

您可以通过在列表项的 itemTpl 内手动添加披露图标来执行此操作。在您的视图中添加以下内容：

```
 {
            xtype: 'list',
            onItemDisclosure: true,
            cls: 'my-list-cls',
            itemTpl: [
                '<div class="x-list x-list-disclosure check-mark" style="right: 48px"></div>'                 
            ]
        } 
```

请注意，`div`内部`itemTpl`有 CSS 类“x-list x-list-disclosure check-mark”。我设置`style="right: 48px"`是因为我希望这个图标出现在常规披露图标（带有右箭头的那个）的左侧，并且这个规则在右侧留下了足够的空间来显示箭头图标。

然后，在您的 app.scss 中，添加：

```
.my-list-cls {
  .x-list.check-mark.x-list-disclosure:before {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    content: '3';
    font-family: 'Pictos';
    color: #fff;
    text-align: center;
    text-shadow: 0 0 0;
  }
} 
```

这将控制您的新披露图标的样式。通过设置`content: '3';`，您将图标从默认的向右箭头更改为复选标记。（在此处查看所有可用图标：[Pictos 字体](http://pictos.cc/classic/font)）。

结果：
![煎茶触控列表](../Images/ab0fceffecaacef22654efedb29b9443.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:08:36.753

这是可能的，但并不容易。简而言之，您必须扩展类[Ext.dataview.List](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.List)和/或[Ext.dataview.element.List](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.element.List)。

# windows - 同步错误。无法在本地计算机上启动 Rsync 服务

> ID：12455623
> 
> 赞同：3
> 
> 时间：2012-09-17T08:32:17.667
> 
> 标签：windows, rsync

我面临一个问题：

```
Could not start Rsync service on Local Computer.
Error 1069: The service did not start due to a logon failure. 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T14:51:41.970

在安装过程中，您可能已经看到提示输入用户名和密码的位置，默认用户名和密码已经输入。您需要将其更改为您登录的用户。如果您以管理员身份登录，请输入管理员凭据

# cordova - 如何在电话间隙调用基于肥皂的 Web 服务

> ID：12455625
> 
> 赞同：0
> 
> 时间：2012-09-17T08:32:20.003
> 
> 标签：cordova

你能给我另一种调用基于肥皂的网络服务的方法吗？最近我用这个例子.. [http://www.codeproject.com/Articles/12816/JavaScript-SOAP-Client](http://www.codeproject.com/Articles/12816/JavaScript-SOAP-Client)

但问题是我没有使用 ASP.net 或者。我正在使用电话间隙。问题是当我在 Firefox 中调试它时，它显示 wsdl 为空或 wsdl 未定义。但是当我在 IE 中运行相同的程序时它会工作很好。问题是将来如果我想调试 js，我无法做到这一点。所以我需要另一种方法来调用肥皂客户端 Web 服务。

再一次，我会告诉你，我没有使用 asp.net，而是使用 phonegap 技术，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:21:24.987

这可能无法回答 OP 的问题，但对于使用[CodePlex](http://javascriptsoapclient.codeplex.com)的 Javascript SOAP 客户端并收到“wsdl 为空”错误的任何其他人可能有用。

我的 ASMX 文件的 URL 错误！

# javascript - 关于 xslt 和 javascript 的查询

> ID：12455630
> 
> 赞同：1
> 
> 时间：2012-09-17T08:32:33.310
> 
> 标签：javascript, jquery, xslt

我在 xslt 中编写了将 xml 文件转换为 html 文件的代码。该 html 文件包含表格（大约 10 个表格），现在

我的要求是我需要显示表中出现了多少次“action”、“trace”、“verification”等词。我设法用jquery做

jsfiddle 看到我的工作的链接是：http: [//jsfiddle.net/trinathguptha89/s3Ppq/1/](http://jsfiddle.net/trinathguptha89/s3Ppq/1/)

我需要知道有什么方法可以让我单独使用 xslt 或 javascript 来做到这一点

我的 xslt 代码是：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="Report/Scripts">
<html>
   <head>
   <title>Mobiuss.rtp Test Execution Results</title>
   <script type="text/javascript" src="jquery.js"></script>
   <style>
   .sortable {table-layout: fixed; width:100%; height:25px; border:1px solid #ccc; background-color:#8B7D7B}
   .sortable th {padding:4px 6px 6px; background:#444; color:#fff; text-align:center; color:#ccc}
   .sortable td {padding:2px 4px 4px; background:#fff; border-bottom:1px solid #ccc;}
   .sortable tr {text-overflow:scroll}
   .sortable tr:hover {color:#FFB90F}
   </style>
   </head>
   <body>
   <xsl:for-each select="Script">
   <h1><xsl:value-of select="@File"/></h1>
    Execution log
   <br>
   </br>
   <div></div>
   <table class="sortable">
   <tr>
   <th>Time</th>
   <th>Position</th>
   <th>Type</th>
   <th>Message</th>
   </tr>
   <xsl:for-each select="Message">
   <tr>
   <td> <xsl:value-of select="@Time"/></td>
   <td>Line <xsl:value-of select="@Line"/></td>
   <td> <xsl:value-of select="@Type"/></td>
   <td> <xsl:value-of select="@Message"/></td>
   </tr>
   </xsl:for-each>
   </table>
   </xsl:for-each>       
   </body>
   </html>   
</xsl:template>
 </xsl:stylesheet> 
```

## 上面代码形成的表格可以在我上面给出的 jsfiddle 链接中看到

我的 xml 文件放在这里

```
 <?xml version="1.0" encoding="utf-8"?>
 <Report App="RIATest" Version="4.7" Project="D:\Projects\Automation\RIATest\Nomura\Nomura.rtp">
  <Startup>
  <Message Time="2012-08-30 15:32:38.578" Type="Info" Message="Launching iexplore.exe &quot;http://mobiuss-dev.operasolutions.com:8080/nomura-test/&quot;"/>
  <Message Time="2012-08-30 15:32:38.625" Type="Info" Message="Application launched (process id=4108)."/>
  <Message Time="2012-08-30 15:32:38.625" Type="Info" Message="Waiting for connection from agent..."/>
  <Message Time="2012-08-30 15:32:46.453" Type="Info" Message="Agent connection accepted. Application id=nomura-ui, index=0"/>
</Startup>
<Scripts>
<Script File="Login.rts" Time="2012-08-30 15:32:46.468">
  <Message Time="2012-08-30 15:32:46.531" Type="Verification" Line="8" Col="58"  Message="Verification passed: SparkApplication(&quot;nomura-ui&quot;)=&gt;visible is equal to true"/>
  <Message Time="2012-08-30 15:32:46.578" Type="Verification" Line="10" Col="50" Message="Verification passed: FlexForm(&quot;loginForm&quot;)=&gt;visible is equal to true"/>
  <Message Time="2012-08-30 15:32:46.625" Type="Verification" Line="12" Col="65" Message="Verification passed: FlexLabel(&quot;Username::Username:&quot;)=&gt;text is equal to &quot;Username:&quot;"/>
  <Message Time="2012-08-30 15:32:46.656" Type="Verification" Line="14" Col="65" Message="Verification passed: FlexLabel(&quot;Password::Password:&quot;)=&gt;text is equal to &quot;Password:&quot;"/>
  <Message Time="2012-08-30 15:32:46.671" Type="Verification" Line="17" Col="39" Message="Verification passed: comp=&gt;label is equal to &quot;Log In&quot;"/>
  <Message Time="2012-08-30 15:32:46.703" Type="Verification" Line="18" Col="35" Message="Verification passed: comp=&gt;enabled is equal to true"/>
  <Message Time="2012-08-30 15:32:46.718" Type="Verification" Line="19" Col="35" Message="Verification passed: comp=&gt;visible is equal to true"/>
  <Message Time="2012-08-30 15:32:46.734" Type="Verification" Line="22" Col="35" Message="Verification passed: comp=&gt;enabled is equal to true"/>
  <Message Time="2012-08-30 15:32:46.750" Type="Verification" Line="23" Col="54" Message="Verification passed: comp=&gt;label is equal to &quot;Forgot your password?&quot;"/>
  <Message Time="2012-08-30 15:32:46.765" Type="Verification" Line="24" Col="36" Message="Verification passed: comp=&gt;selected is equal to false"/>
  <Message Time="2012-08-30 15:32:46.781" Type="Verification" Line="25" Col="35" Message="Verification passed: comp=&gt;visible is equal to true"/>
  <Message Time="2012-08-30 15:32:46.796" Type="Verification" Line="28" Col="61" Message="Verification passed: comp=&gt;text is equal to &quot;CORPORATE BOND SPREAD SIGNAL&quot;"/>
  <Message Time="2012-08-30 15:32:46.812" Type="Verification" Line="29" Col="35" Message="Verification passed: comp=&gt;visible is equal to true"/>
  <Message Time="2012-08-30 15:32:46.906" Type="Action" Line="32" Col="64" Message="SparkTextInput(&quot;Username::userName&quot;)=&gt;textSelectionChange(0,0)"/>
  <Message Time="2012-08-30 15:32:47.000" Type="Action" Line="33" Col="63" Message="SparkTextInput(&quot;Username::userName&quot;)=&gt;textInput(&quot;arun.sekar&quot;)"/>
  <Message Time="2012-08-30 15:32:47.031" Type="Action" Line="35" Col="61" Message="SparkTextInput(&quot;Password::password&quot;)=&gt;textInput(&quot;opera100&quot;)"/>
  <Message Time="2012-08-30 15:32:47.093" Type="Action" Line="36" Col="32" Message="SparkButton(&quot;Log In&quot;)=&gt;click()"/>
  </Script>
 </Scripts>
 <Results>
<Summary scripts="2" time="8.515" errors="2"/>
<Script name="Login.rts" time="0.625" errors="0"/>
<Script name="NOM_0002.rts" time="50.000" errors="2" message="Verification failed: comp=&gt;selected is not equal to expected value true, it is actually equal to false"/>
 </Results>
</Report> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:46:50.090

您可以在 xslt 中轻松完成此操作

动作类型的所有示例：

```
<xsl:value-of select="count(Script/Message[@Type='Action'])"/> 
```

每个表的示例：

```
<xsl:for-each select="Script">
    Table - <xsl:value-of select="position()"/>
    <xsl:value-of select="count(Message[@Type='Action'])"/>
</xsl:for-each> 
```

对于行颜色，您可以使用它：

```
<xsl:variable name="Colour">
<xsl:choose>
  <xsl:when test="contains(@message,'Verification failed:')">background-color:red;</xsl:when>
  <xsl:when test="contains(@message,'Verification passed:')">background-color:green</xsl:when>
  <xsl:otherwise> </xsl:otherwise>
</xsl:choose>
</xsl:variable>

 <tr style="{$Colour}">
   <td> <xsl:value-of select="@Time"/></td>
   <td>Line <xsl:value-of select="@Line"/></td>
   <td> <xsl:value-of select="@Type"/></td>
   <td> <xsl:value-of select="@Message"/></td>
 </tr> 
```

# ruby - Ruby Float#round 方法在 round(2) 中的行为不正确

> ID：12455633
> 
> 赞同：1
> 
> 时间：2012-09-17T08:32:42.203
> 
> 标签：ruby, floating-point, floating-accuracy, ruby-1.9.3

我了解到建议使用`BigDecimal`而不是`Float`，但这要么是一个错误，要么突出了`Float`. `Float#round(2)`“1.015”、“1.025”和“1.035”似乎有问题。

```
1.015.round(2)
 => 1.01    # => WRONG .. should be 1.02
1.025.round(2)
 => 1.02    # => WRONG .. should be 1.03
1.035.round(2)
 => 1.03    # => WRONG .. should be 1.04
1.045.round(2)
 => 1.05    # => CORRECT
1.016.round(2)
 => 1.02    # => CORRECT 
```

`round(3)`工作正常。

```
1.0015.round(3)
 => 1.002  # => CORRECT
1.235.round(2)
 => 1.24   # => CORRECT 
```

为了在 Rails 应用程序中修改这个，我这样做了：

```
config/initializers/float_mp.rb

require 'bigdecimal'

class Float
  def round(val=0)
     BigDecimal.new(self.to_s).round(val).to_f
  end
end 
```

这似乎是一种奇怪且昂贵的解决方法。这可能是一个错误`Float#round`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:10:48.117

AFAICS ruby​​ round() 工作正常。大概它只是 libm 中 round() 函数的一个包装器。

所以原因是你的浮点文字不能用二进制精确表示。例如，“1.015”多打印几位小数给出“1.0149999999999999”；因此，当四舍五入到两位小数时，1.01 比 1.02 更接近真实值。对于您的其他示例，依此类推。

另请记住，默认的 IEEE 754 舍入模式是“四舍五入，与偶数相等”，这与您在学校可能熟悉的“四舍五入，从零开始”不同。

# mysql - Mysql 连接

> ID：12455639
> 
> 赞同：0
> 
> 时间：2012-09-17T08:33:07.103
> 
> 标签：mysql, concatenation

如何在mysql中进行连接？我有一个表`logs`，其中有一个字段，该字段`logs_status`由格式如`log_name`+OK 的值组成，例如`some_logeOK`，所以我需要加入`log_name`ok 并全选

```
WHERE `logs_status` = `log_name`+OK 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:33:58.000

在 MySQL 中，您应该使用**[`CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)**

```
WHERE `logs_status` = CONCAT(`log_name`, 'OK') 
```

# objective-c - NSTextField becomeFirstResponder 在 awakeFromNib 中不起作用

> ID：12455650
> 
> 赞同：8
> 
> 时间：2012-09-17T08:34:19.743
> 
> 标签：objective-c, ios, cocoa

我想在表单加载时设置焦点，但它在 awakeFromNib 中不起作用。

```
[myTextField becomeFirstResponder]; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T13:29:26.147

只是引用[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/becomeFirstResponder)：

```
Use the NSWindow makeFirstResponder: method, not this method, to make an object the first responder. Never invoke this method directly. 
```

改为这样做：

```
[[myTextField window] makeFirstResponder:myTextField]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-23T01:37:31.043

这个问题的 Swift 版本：

```
textField.window?.makeFirstResponder(textField) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T11:43:51.197

```
- (BOOL) becomeFirstResponder
 {
 if (someCondition)
 {
     return NO;
 }

 BOOL retVal = [super becomeFirstResponder];

 // do your stuff
 return retVal;
} 
```

# fortran - Fortran 90 中的行读取和编辑

> ID：12455652
> 
> 赞同：1
> 
> 时间：2012-09-17T08:34:27.050
> 
> 标签：fortran, fortran90

我是 Fortran 新手，我正在尝试编写一个程序来读取一个 .txt 文件，其中我有 24480 行和 6000 列。在每一行（作为个体）中，我的基因型表示为 1 和 2，例如，如果在第一行中，我有 204 个基因型，则该基因型的前半部分（=102）属于个体的父亲，后半部分属于基因型属于个人的大坝。此外，每一行都有不相等的值。那么，我如何为 Fortran 定义逐行读取此文件并将每行分为两行并将每个元素 (i) 放在平均值 + i 旁边。

例如，我将文件的两行显示为简要： row1：112122121112122111112121111211122121111121 row2：211121111121122222121112121211121221212121111121112 1212

等等。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T21:25:42.457

您需要将每一行作为字符串读取，使用 len_trim() 获取其长度，然后将每一半读入整数数组：

```
 character*10000 line

     read(unit,'(a)')line
     len=len_trim(line)
     read(line,'(10000i1)')a(:len/2),b(:len/2) 
```

# jsp - 如何获取一个数组列表中的所有选择框值

> ID：12455653
> 
> 赞同：-1
> 
> 时间：2012-09-17T08:34:31.063
> 
> 标签：jsp, struts2

我已经在 jsp 中生成了动态选择框，并给出了名称 cb01、cb03..cb63 等。现在我想在 Action 类变量中获取这些选择框值，例如在 ArrayList 或 Map 或数组中。请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:49:18.153

在 JSP 中选择标记`multiple="true"`

```
<s:select name="mylist" id="id_mylist" list="countryList" multiple="true"/> 
```

在提交表单时调用以下 Java 脚本。这实际上会将列表中的所有元素标记为已选中。

```
function doSubmit(){
 var mylistvar =document.getElementById("id_mylist");        
             if(mylistvar  !=null){      
                for(var x=0;x<mylistvar.options.length;x++){        
                    mylistvar.options[x].selected=true;
                }
             }

} 
```

上面使用的 ArrayList 变量可能如下所示。

```
private ArrayList<String> countryList = new ArrayList<String>(); 
```

这样，当表单提交时，列表中的所有值都将作为数组列表直接绑定到服务器。

# android - 如何在我的项目中使用“android-misc-widgets”

> ID：12455657
> 
> 赞同：0
> 
> 时间：2012-09-17T08:34:53.703
> 
> 标签：android, open-source, widget, panel

我正在创建一个项目，我想在我的项目中使用[这个开源代码](http://code.google.com/p/android-misc-widgets/)。我下载了文件并运行了该项目，该项目没有任何问题，但是当我创建一个新的单独项目并尝试使用该开源代码中的小部件时，我遇到了一些错误，例如“ `com.android.layoutlib.bridge.MockView cannot be cast to android.view.ViewGroup" , "error: Error parsing XML: unbound prefix`”。

请谁能告诉我如何将开源代码集成到我的应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:51:47.477

看起来**`com.android.layoutlib.bridge.MockView`**不是您可以**`ViewGroup`**在新项目中投入和使用的东西。

在开源代码中检查 MockView 的定义，然后在将其投射到您自己的项目中之前检查[文档。](http://developer.android.com/guide/topics/ui/overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:04:22.583

最终配置它关于如何使用它.. 制作了一个库项目并在我的原始项目中引用它。完毕

# database - 如何按频率对 Google 数据库（或托管在 AWS 上的数据库）中的 ngram 进行排序

> ID：12455658
> 
> 赞同：1
> 
> 时间：2012-09-17T08:34:53.817
> 
> 标签：database, hadoop

我正在寻找一种按频率订购 Google Book 的 Ngram 的方法。

原始数据集在这里：http: [//books.google.com/ngrams/datasets](http://books.google.com/ngrams/datasets)。在每个文件中，ngram 按字母顺序排序，然后按时间顺序排序。

我的电脑功能不够强大，无法处理 2.2 TB 的数据，所以我认为唯一的排序方法是“在云中”。

AWS 托管的版本在这里：[http](http://aws.amazon.com/datasets/8172056142375670) ://aws.amazon.com/datasets/8172056142375670 。

有没有一种经济有效的方法来找到 10,000 个最常见的 1 克、2 克、3 克、4 克和 5 克？

举个例子，数据集包含多年的数据：

```
As an example, here are the 30,000,000th and 30,000,001st lines from file 0 
of the English 1-grams (googlebooks-eng-all-1gram-20090715-0.csv.zip):

circumvallate   1978   313    215   85 
circumvallate   1979   183    147   77

The first line tells us that in 1978, the word "circumvallate" (which means 
"surround with a rampart or other fortification", in case you were wondering) 
occurred 313 times overall, on 215 distinct pages and in 85 distinct books 
from our sample. 
```

理想情况下，频率列表仅包含 1980 年至今的数据（每年的总和）。

任何帮助，将不胜感激！

干杯，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T21:09:36.160

我会推荐使用[猪](http://pig.apache.org/)！

Pig 让这样的事情变得非常简单直接。这是一个示例猪脚本，它几乎可以满足您的需要：

```
raw = LOAD '/foo/input' USING PigStorage('\t') AS (ngram:chararray, year:int, count:int, pages:int, books:int);
filtered = FILTER raw BY year >= 1980;
grouped = GROUP filtered BY ngram;
counts = FOREACH grouped GENERATE group AS ngram, SUM(filtered.count) AS count;
sorted = ORDER counts BY count DESC;
limited = LIMIT sorted 10000;
STORED limited INTO '/foo/output' USING PigStorage('\t'); 
```

AWS Elastic MapReduce 上的 Pig 甚至可以直接对 S3 数据进行操作，因此您也可能会替换`/foo/input`S3`/foo/output`存储桶。

# deployment - Portlet 在门户关闭或重新启动时从 Liferay 中删除/取消部署

> ID：12455661
> 
> 赞同：1
> 
> 时间：2012-09-17T08:35:00.290
> 
> 标签：deployment, liferay, portlet

我有一个惊人的问题：在 Liferay 门户重新启动时，一些 portlet 未部署，但并非总是如此，我无法重现这种情况发生的时间和原因。

问题是重新启动后，portlet 被取消部署，必须再次重新部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:00:14.683

我有一个类似的问题。执行以下步骤以获取有关错误的更多详细信息。

在 portlet`WEB-INF/classes`文件夹中添加文件`logging.properties`并添加以下代码行：

```
org.apache.catalina.core.ContainerBase.[Catalina].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].handlers = java.util.logging.ConsoleHandler 
```

这将提供有关该问题的更多详细信息。添加此文件后，尝试重新创建问题并检查日志。

这适用`Liferay`于在 Tomcat 上运行的（任何版本）。

# sql - 参数中没有值的情况下，如何将表中的所有值传到ssrs中？

> ID：12455665
> 
> 赞同：6
> 
> 时间：2012-09-17T08:35:21.323
> 
> 标签：sql, sql-server, reporting-services, sql-server-2008-r2

我正在传递两个参数，即`@AccountId`和`@key`。我想显示数据库中存在的所有值，`@AccountId`以及`@key`当参数中没有值时，即`@AccountId`和`@key`。我想对同一个数据集执行此操作。这是可能的还是我创建了不同的数据集？

我正在使用的查询是：

```
CREATE PROCEDURE [dbo].[GetDenyList]
@AccountId nvarchar(100),
@key nvarchar(400)
AS
select New_AccountId AS 'AccountId/Key', New_Description AS 'Reason',CreatedOn AS 'Date'
  from abc.dbo.New_keydenylist 
 where New_AccountId is not null
   AND @AccountId = New_AccountId
 union all
select new_key AS 'AccountId/Key', New_Description AS 'Reason',CreatedOn AS 'Date' 
  from abc.dbo.New_keydenylist 
 where New_key is not null
   and @Key=New_key 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:52:43.300

如果我很好地理解了您的问题，则无论传递给`WHERE`子句的参数值如何，您都必须使用始终评估为 true 的任何谓词。例如`WHERE 1 = 1`：

```
 WHERE 1 = 1
 AND (@AccountId IS NOT NULL OR AccountId = @AccountId) 
```

与`@key`参数相同：

```
 WHERE 1 = 1
 AND (@key IS NOT NULL OR New_key = @key) 
```

如果两个参数`@key`和`@AccountId`都是`NULL`或其中之一，则该`WHERE`子句仍然有效并返回所有未显示的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:53:42.897

检查参数是否为空或等价：

```
AND ((@AccountId IS NULL) OR (@AccountId = New_AccountId)) 
```

# c - 优化按位运算

> ID：12455667
> 
> 赞同：1
> 
> 时间：2012-09-17T08:35:43.413
> 
> 标签：c, bit-manipulation

我有一个无符号整数，`N = abcd`其中`a`, `b`,表示从到 的位。我想得到以下数字`c``d``msb``lsb`

```
x1 = ab0cd
x2 = ab1cd 
```

在 C 中使用按位运算最快的方法是什么？

我现在正在尝试如下

```
unsigned int blockid1 = N>>offset;
unsigned int key1 = (blockid<<(1+offset))|(((1<<offset)-1)&N);
unsigned int key2 = (key1)|(1<<offset); 
```

这里的 offset 是我要插入的位置`0`和`1`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:33:33.933

```
const unsigned int mask = (~0) << offset;  // same as -(2**offset)
unsigned int key1 = N + (N & mask);
unsigned int key2 = key1 - mask; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:56:59.940

你应该看看 Jasper Neumann 关于位排列的页面。它包括一个在线代码生成器。但是，对于您的特定情况，它可能会非常复杂（如果我们认为 0 或 1 是 MSB，则排列一位）。

注意：我让你用谷歌搜索地址，因为它没有域名，并且 SO 不允许直接 IP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:39:00.833

由于您的输入只有 4 位宽，这意味着总共只有 16 个输出，我建议至少测试（即实现和分析）一个查找表。

这些天来，由于 ALU 超快和内存慢（ish），查找通常不会更快，但它总是值得测试。一个小表意味着它不会过多地污染缓存，这可能使其比一系列算术指令更快。

由于您的输出也很小，因此完整的表格可以表示为：

```
const static uint8_t keys[16][2]; 
```

32 字节非常小，如果您经常这样做（即在紧密循环中连续多次），表应该完全适合缓存。

# pixel - Photoshop中的dpi和像素是一样的吗？

> ID：12455669
> 
> 赞同：0
> 
> 时间：2012-09-17T08:36:05.450
> 
> 标签：pixel, dpi

这让我很困扰，我对 Android UI 设计还是个新手。Photoshop中的dpi和像素是一样的吗？

就像我将创建一个 320dpi 的 xhdpi 一样，320dpi 是否与 320 像素/英寸分辨率的设置相同？

因为当我设计例如启动器图标 96x96 xhdpi 之类的图标时，我在 Photoshop 上的分辨率设置为 320 像素/英寸分辨率。然后我将通过在分辨率上调整图像大小来调整图像大小。（例如：xhdpi 的 320 分辨率将更改为 hdpi 的 240）这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:18:00.857

不，对于 Photoshop，它们是不同的。如果您想为 Android 设计，您必须提供相同资产的 4 个不同文件：ldpi、mdpi、hdpi 和 xdpi。它们在维度上有所不同。你可以看看[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。

在我看来，像 Illu 或 Inkscape 这样的矢量程序会做得更好：Android 中的 dpi 和导出 dpi 是相同的。以 72 屏幕 dpi 创建您的 UI，然后以不同的 dpi 导出。

# php - 使用 PHP 将文本文件读入数组 - 建议

> ID：12455670
> 
> 赞同：0
> 
> 时间：2012-09-17T08:36:10.683
> 
> 标签：php, mysql

我有以下代码，一个函数获取用户名列表并将它们放入数组中，然后执行名为函数 get_all_friends 的函数，代码工作正常且没有错误，我的问题是如果我有大量用户名可以说是 10k，如何调整代码？

就像从文件中读取包括所有用户名名称并将它们放入数组中一样

```
$file_handle = fopen("users.txt") 
```

请指教 ！

```
<?PHP
    $user1 = "usernamehere";
    $user2 = "usernamehere";
    $user3 = "usernamehere";
    $u[] = $user1;
    $u[] = $user2;
    $u[] = $user3;

    function get_all_friends($users) 
    {
        $connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, TOKEN_KEY, TOKEN_SECRET);
        $list = array();
        foreach($users as $user)
        {
            $result = $connection->get( 'friends/ids', array(
            "screen_name"=> $user)
            );

            foreach($result->ids as $friend) 
            {
                $list[] = $friend;
            }

        }
        return $list;
    }

    //call the function
    $result = get_all_friends($u);

    foreach($result as $res)
    {
        $query = "INSERT INTO friends (userid, name, grade, flag) VALUES ($res, 'name', 100, 0 ) ";
        mysql_query($query);    
    }

    //to print the databse result
    echo "row<br />";
    $res = mysql_query("SELECT * FROM friends");  
    while ($row = mysql_fetch_assoc($res)) 
    {
        print_r($row);
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:43:56.987

类似以下的东西应该可以工作（未经测试）：

```
$filename = "users.txt";
$file_handle = fopen($filename, "r");
$contents = fread($file_handle, filesize($filename));
$usernames = preg_split("/ (,|\\n) /", $contents);
fclose($file_handle); 
```

用户名必须用逗号或换行符分隔。

虽然，如果您确定用户名将仅由新行或逗号分隔，则此代码会更快：

```
$filename = "users.txt";
$file_handle = fopen($filename, "r");
$contents = fread($file_handle, filesize($filename));
// new line:
$usernames = explode("\n", $contents);
// or comma:
$usernames = explode(",", $contents);
fclose($handle); 
```

请仅选择 $usernames 定义之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:43:33.743

专门回答这个问题，检查`file(..)`- “将整个文件读入数组”

[http://php.net/manual/en/function.file.php](http://php.net/manual/en/function.file.php)

尽管您可能不想这样做，但如果文件很大，您最好按顺序阅读或进行某种直接导入。

# sublimetext2 - Sublime Text 2 键设置覆盖 zen 编码设置

> ID：12455671
> 
> 赞同：0
> 
> 时间：2012-09-17T08:36:13.477
> 
> 标签：sublimetext2, emmet

我已经在 Windows 7 上的 Sublime Text 2 中安装了 zen 编码。但是 html 和 css 的快捷方式在我的 Mac 上无法使用。例如：如果我们扩展 rz，结果应该是 resize: 但 ST2 会将其扩展为 background-size:。我尝试在 Preferences.Sublime-settings 文件中将自动完成选项更改为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:15:50.010

看起来 CSS 模糊自动完成模式在旧 Zen Coding 插件中处于启用状态。尝试使用新插件：[https ://github.com/sergeche/emmet-sublime](https://github.com/sergeche/emmet-sublime)

# java - SWT 界面未运行时显示 MessageBox

> ID：12455673
> 
> 赞同：3
> 
> 时间：2012-09-17T08:36:23.883
> 
> 标签：java, swt

我有一个 Java SWT 应用程序，我正在使用这段代码来显示一个消息框。

```
 Display.getDefault().asyncExec(new Runnable() {

        @Override
        public void run() {
            try {

                MessageBox objError = new MessageBox(SysTray.shell, SWT.ICON_ERROR);
                objError.setMessage(strMessage);
                objError.open();
                SysTray.shell.getDisplay().dispose();
                System.exit(1);

            } catch (Exception e) {
                e.printStackTrace(); // Nothing to be handled here.
            }

        }

    }); 
```

当我的 SWT UI 没有创建时，这段代码不会被执行，因此这个块不会运行。这发生在我的 UI 线程崩溃的情况下。

如何检查我的 UI 是否已创建，如果尚未创建，我仍想向用户显示消息框。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T14:02:33.540

MessageBox 的第一个参数是周围的外壳。

您必须定义一个显示器，并在显示器内定义一个外壳，以显示消息框。

```
Display display = new Display();
Shell shell = new Shell(display);
// Define message box
shell.open();
while (!shell.isDisposed()) {
    if (display.readAndDispatch()) {
        display.sleep();
    }
}
display.dispose(); 
```

编辑添加并回答评论：

要确定是否存在 Display 和 Shell -

```
 Display display = Display.getCurrent();
    if (display != null) {
        Shell[] shells = display.getShells();
    } 
```

# asp.net - 生成ics文件时无法显示北欧æ ø å (æ ø å)

> ID：12455677
> 
> 赞同：0
> 
> 时间：2012-09-17T08:36:38.770
> 
> 标签：asp.net, vb.net, ado.net, outlook, icalendar

我对此很陌生，但是有一个生成 ics 文件的脚本，可以 100% 地为 iCal 和 Outlook 工作，但我看不出我是如何修复编码的。

当我的数据库中有一个带有北欧 æ ø å (æ ø å) 的文本时，我得到的字母为 ?。有人可以帮我设置它以使用 iso-8859-1。

或者我是否需要制作 6 个替换代码，用 html-tag (æ ø å) 替换字母！？

我的代码是

```
Imports System.Data.OleDb
Imports System.Data
Imports RF.Event2

Partial Class _new
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then

    End If
End Sub

Protected Sub btnExport_Click(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim ical As New iCalendar()

    Dim strConnection As OleDbConnection = New OleDbConnection(ConfigurationManager.ConnectionStrings("ConnStr").ConnectionString)
    Dim strQuery As String = String.Empty

    strQuery = "SELECT * FROM [Events] WHERE ([EventType]='K' OR [EventType]='E' OR [EventType]='T') ORDER BY [EventDate] ASC"
    Dim daEvents As New OleDbDataAdapter(strQuery, strConnection)
    Dim dtEvents As New DataTable
    strConnection.Open()
    daEvents.Fill(dtEvents)
    strConnection.Close()

    If (dtEvents.Rows.Count > 0) Then

        For i As Integer = 0 To dtEvents.Rows.Count - 1
            Dim ev As New [Event]()
            ev.Title = dtEvents.Rows(i)("EventHome")
            ev.Description = dtEvents.Rows(i)("EventNote")
            ev.Location = dtEvents.Rows(i)("EventPlace")
            ev.StartTime = DateTime.Parse(dtEvents.Rows(i)("EventDate"))
            ev.EndTime = DateTime.Parse(dtEvents.Rows(i)("EventDate").AddMinutes(90))
            ical.Events.Add(ev)
        Next
    End If
    ' Set the content-type of the response and file name
    ' so Windows knows how to handle the response.
    Context.Response.Buffer = True
    Context.Response.ContentType = "text/calendar"
    Context.Response.ContentEncoding = Encoding.GetEncoding("iso-8859-1")
    Context.Response.Charset = "iso-8859-1"
    Context.Response.AddHeader("content-disposition", "inline;filename=Sport.ics")

    ' Write the bytes of the iCalendar item output to the resonse stream
    Context.Response.BinaryWrite(New System.Text.ASCIIEncoding().GetBytes(ical.Output))
    Context.Response.[End]()

    'Dim enc As System.Text.Encoding = System.Text.Encoding.GetEncoding("iso-8859-1")
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:40:35.017

您正在写入使用`ASCIIEncoding`将有问题的字符映射到“？”的流。

您可以通过一些修改来修复您的代码并使其抵抗此错误：

```
Context.Response.ContentEncoding = Encoding.GetEncoding("iso-8859-1") 
Context.Response.Charset = Context.Response.ContentEncoding.WebName
Context.Response.AddHeader("content-disposition", "inline;filename=Sport.ics") 

' Write the bytes of the iCalendar item output to the resonse stream 
Context.Response.BinaryWrite(Context.Response.ContentEncoding.GetBytes(ical.Output)) 
```

# php - 将while循环更新为mysqli

> ID：12455679
> 
> 赞同：1
> 
> 时间：2012-09-17T08:36:38.917
> 
> 标签：php, mysql, html, loops, mysqli

大家好，我有以下问题要解决。我有一个自动建议搜索字段。我想将我的代码从使用 mysql 更新为 mysqli。这就是为什么我有这个代码（$db=mysqli）：

```
if (isset($_POST['search_term']) == true && empty($_POST['search_term']) == false) {

    $search_term = $db->real_escape_string(htmlentities(trim($_POST['search_term'])));

    $search_term_query = "SELECT `a` FROM `b` LIKE '$search_term%'";
    $result_search_query = $db->query($search_term_query);

    while (($row = $result_search_query->fetch_assoc()) !== false) {

        echo '<li>', $row['a'], '</li>';
    }

} 
```

出于某种原因，我得到：

> 在非对象上调用成员函数 fetch_assoc()

那么对象的问题在哪里？如果有人可以帮助我，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:48:00.833

这意味着 $result_search_query 不是您期望的对象。可能的原因：

1.  与数据库的连接失败
2.  查询执行失败

请查看[http://php.net/manual/en/mysqli-result.fetch-assoc.php](http://php.net/manual/en/mysqli-result.fetch-assoc.php)和[http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php)中的示例。它应该向您展示如何捕获错误。

# asp.net-web-api - System.Web.Routing.RouteCollection 不包含“MapHttpRoute”的定义 - VS 2012，Web API

> ID：12455689
> 
> 赞同：22
> 
> 时间：2012-09-17T08:37:21.647
> 
> 标签：asp.net-web-api, visual-studio-2012

我刚刚安装了 Visual Studio 2012 并开始查看 MVC 4 和 Web Api。我用 Web API 创建了一个新的 MVC 4 应用程序。基于一些示例和教程，我开始配置我的路线：

```
routes.MapHttpRoute(
                name: "Controller only",
                routeTemplate: "api/{controller}"
            ); 
```

但是，这会导致`RouteCollection`不包含`MapHttpRoute`. 我是否缺少一些已安装的 DLL？据我所见，我已经安装了所有正确的 DLL 和版本。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-17T10:53:02.480

`System.Web.Http`我已经通过在 RouteConfig.cs 中添加对它的引用来解决它

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-10-23T23:17:04.440

尝试参考：System.Web.Http 和 System.Web.Http.WebHost.dll

然后为命名空间添加一条 using 语句：System.Web.Http

注意：也可能是您的智能感知出现故障。在这种情况下，只需手动输入您的代码并构建。

希望有帮助

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-10T11:20:02.733

只是添加使用`System.Web.Mvc;`解决了我的问题

# javascript - 如何用标签包装内容？

> ID：12455690
> 
> 赞同：1
> 
> 时间：2012-09-17T08:37:23.227
> 
> 标签：javascript, jquery, hyperlink

当我单击其中一个`li`项目时，我想打开一个包含表单的 div：

```
$(settings.dom.wrapperID).wrap('<a href="#login-box"/>');
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<ul id="js-news">

  <li class="news-item">This is text 1 ...</li>
  <li class="news-item">This is text 2 ...</li>
  <li class="news-item">This is text 3 ...</li>
  <li class="news-item">This is text 4 ...</li>

</ul>
```

如果我制作一个普通的 a 标签并放入`#login-box`链接可以正常工作，但不能使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:38:17.677

当然，通过`http://`在链接之前添加，如下所示：

```
$(settings.dom.wrapperID).wrap('<a href="http://www.google.com"/>'); 
```

# ffmpeg - 在构建有关 ffmpeg 的演示时，它发生：未定义的对 `av_register_all' 的引用

> ID：12455691
> 
> 赞同：7
> 
> 时间：2012-09-17T08:37:26.733
> 
> 标签：ffmpeg

这个问题困扰了我好几天。

编译并安装 ffmpeg 后，我尝试使用它构建一个演示，但它总是失败。

演示是：

```
#include "libavcodec/avcodec.h"
#include "libavformat/avformat.h"

int main(int argc,char *argv[]) {
    av_register_all();
    return 1;
} 
```

使用`gcc main.c -o main.o`，会发生错误：`undefined reference to 'av_register_all'`

使用: 构建，`gcc main.c -o main.o -lm -ld -lz -lavcodec -lavformat -lavutil`会发生另一个错误：`/usr/bin/ld: cannot find -ld`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-06-28T12:38:44.917

将包含放在外部“C”块中可能会起作用。

```
extern "C"{
    #include <libavcodec/avcodec.h>
    #include <libavformat/avformat.h>
    #include <libswscale/swscale.h>
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-23T11:50:45.063

[如此处](http://ffmpeg.org/pipermail/ffmpeg-user/2012-September/009837.html)所述 ，库的顺序很重要，因此在您的情况下，希望以下内容可以工作：

```
gcc main.c -o main.o -lavformat -lavcodec -lavutil  -lz -lm -lpthread 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-08T10:39:46.990

```
gcc filename.c -o outputfilename -lavformat -lavcodec -lavutil  -lz -lm -lpthread -I'/usr/local/include' -lswresample 
```

上面的命令将有助于正确编译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T12:15:39.590

看看[这个项目](https://github.com/mpenkov/ffmpeg-tutorial)如何构建示例代码。

Makefile 很容易理解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-13T03:54:15.787

这对我有用：

```
gcc <your source code> -o main -lavformat -lavcodec -lavutil -lm -lpthread -I'/usr/local/include' -lswresample 
```

# c# - WebAuthenticationBroker 使用 LiveID 进行身份验证返回成功状态但没有安全令牌

> ID：12455692
> 
> 赞同：2
> 
> 时间：2012-09-17T08:37:38.033
> 
> 标签：c#, microsoft-metro, windows-runtime, .net-4.5, acs

我正在使用 ACS 在 Windows 8 应用程序中进行身份验证。我正在观察我所期望的，因为 UI 显示了身份验证对话框，并且在成功输入我的 LiveID 凭据后，我以成功状态返回到我的代码，但**我没有收到安全令牌**，我只是得到“https://XXXXX .accesscontrol.windows.net/v2/wsfederation?wa=wsignin1.0" in result.ResponseData

代码如下：

```
 string loginUriString = "https://XXXXX.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=http%2f%YYYYY.cloudapp.net";
    string redirectUriSting = "https://XXXXX.accesscontrol.windows.net:443/v2/wsfederation";

    string authToken;
    bool IsAuthenticated = false;

    private async Task AuthenticateAsync()
    {           
        var requestUri = new Uri(loginUriString, UriKind.RelativeOrAbsolute);

        var redirectUri = new Uri(redirectUriSting, UriKind.RelativeOrAbsolute);

        //var testUri = WebAuthenticationBroker.GetCurrentApplicationCallbackUri();

        var result = await WebAuthenticationBroker.AuthenticateAsync(
            WebAuthenticationOptions.None,
            requestUri,
            redirectUri);

        if (result.ResponseStatus != WebAuthenticationStatus.Success)
            throw new Exception(string.Format("Login failed : {0}", result.ResponseErrorDetail));

        //authToken = ExtractTokenFromResponse(result.ResponseData);

        //if (!string.IsNullOrEmpty(authToken))
        //{
        _client.DefaultRequestHeaders.Authorization =
            new System.Net.Http.Headers.AuthenticationHeaderValue("OAuth", result.ResponseData);

        IsAuthenticated = true;
        //}
    } 
```

我在这里看到了另一个 SO 问题，似乎是一个类似的问题，但没有别的。我有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:07:31.953

只是继续浏览，`WebAuthenticationBroker`直到下一个请求的页面是`callbackUri`参数指定的页面。那时它会返回最终的 URL 给你，所以如果你想取回任何东西，它需要在那个 URL 中编码。

在依赖方的 ACS 控制面板中，您需要指定站点上某处的返回 URL。例如`https://YYYYY.cloudapp.net/federationcallback`. 然后创建一个控制器来处理接受该 URL 的帖子。该帖子将有一个表单字段`wresult`，该字段是一些包含从 ACS 返回的令牌的 xml。

`WebAuthenticationBroker`然后，您可以通过重定向将令牌发送回`https://YYYYY.cloudapp.net/federationcallback/end?token={whatever you want to return}`

然后，您需要将身份验证代理的使用更改为以下内容：

```
var webAuthenticationResult = await WebAuthenticationBroker.AuthenticateAsync(
            WebAuthenticationOptions.None,
            new Uri("https://XXXXX.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=http%3a%2f%2fYYYYY.cloudapp.net%2f"),
            new Uri("https://YYYYY.cloudapp.net/federationcallback/end")
        );

// The data you returned
var token = authenticateResult.ResponseData.Substring(authenticateResult.ResponseData.IndexOf("token=", StringComparison.Ordinal) + 6); 
```

# c#-4.0 - Google Bigquery 中的 Quaterly、Weekly 日期函数

> ID：12455693
> 
> 赞同：3
> 
> 时间：2012-09-17T08:37:40.500
> 
> 标签：c#-4.0, google-bigquery

[我可以使用这里](https://developers.google.com/bigquery/docs/query-reference#timestampfunctions)的函数从我的表中获取每年和每日、星期几的数据。但是我需要方法来实现另外两种类型的函数 Quaterly 和 Weekly，比如 SQL Offers 中的 DatePart。建议任何实现它的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:30:13.233

在您链接到的同一页面上提到了函数 UTC_USEC_TO_WEEK。这将帮助您获得工作日。

对于季度，类似这样的查询可能会起作用......

```
select INTEGER(INTEGER(SUBSTR(date_time, -14, 2))/3) AS QUARTER, count(date_time) as count
from company.summary GROUP BY QUARTER 
```

我的日期时间字符串为年-月-日+时间格式，例如...

> 2012-07-01 23:59:59

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-06T01:08:44.097

尝试使用这个

EXTRACT(QUARTER FROM date) 作为季度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:06:19.143

您可以使用`STRFTIME_UTC_USEC(timestamp_usec,'date_format_str')`%m 格式来接收月份 (1-12) 和 if 语句。一个例子是：

> IF(STRFTIME_UTC_USEC(timestamp_usec,'%m') IN (1,2,3),'Q1',IF(STRFTIME_UTC_USEC(timestamp_usec,'%m') IN (4,5,6),'Q2',IF( STRFTIME_UTC_USEC(timestamp_usec,'%m') IN (7,8,9),'Q3','Q4')))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-09T09:17:50.687

# 标准 SQL

`CASE WHEN EXTRACT(MONTH FROM date) BETWEEN 7 AND 9 THEN 'Q1' WHEN EXTRACT(MONTH FROM date) BETWEEN 10 AND 12 THEN 'Q2' WHEN EXTRACT(MONTH FROM date) BETWEEN 1 AND 3 THEN 'Q3' WHEN EXTRACT(MONTH FROM date) BETWEEN 4 AND 6 THEN 'Q4' END AS quarter`

# wpf - 在代码中设置 CustomWpfDataGrid 样式？

> ID：12455696
> 
> 赞同：0
> 
> 时间：2012-09-17T08:37:45.860
> 
> 标签：wpf, styles, wpfdatagrid

我正在尝试在代码中设置样式但一直无法做到，

在xml中

```
<Style x:Key="DataGridStyle1" TargetType="{x:Type DataGrid}">
    <Setter Property="Template" Value="{DynamicResource DataGridControlTemplate1}"/>
</Style>

<Style x:Key="DataGridStyle2" TargetType="{x:Type DataGrid}">
     <Setter Property="Background" Value="AntiqueWhite"/>
</Style> 
```

这是自定义控件：

```
public class CustomDataGrids : DataGrid
{
    public CustomDataGrids()
    {
        ResourceDictionary res = Application.LoadComponent(new Uri("CustomDataGridStyle.xaml", UriKind.Relative)) as ResourceDictionary;
        this.Style = (Style)res["DataGridStyle1"];
        this.ColumnHeaderStyle = (Style)res["ColumnHeaderStyle1"];
    }
} 
```

当 Style=DataGridStyle2 时它工作得很好，但是当 Style=DataGridStyle1 时，它不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:46:48.920

我想问题是模板，所以我必须这样做：

```
This.Template=(System.Windows.Controls.ControlTemplate)res["DataGridControlTemplate1"]; 
```

# ruby-on-rails-3 - 不在控制器中时访问记录器对象

> ID：12455698
> 
> 赞同：2
> 
> 时间：2012-09-17T08:37:51.187
> 
> 标签：ruby-on-rails-3

我有一些代表我的应用程序逻辑的业务类，我想从这些类中编写日志，就像在控制器中一样，我如何实现对记录器的引用。

如果你想告诉我在构造函数中发送它，请不要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-09T03:45:43.713

当您知道您的对象将在 Rails 环境中时——例如，一个服务对象，从控制器实例化和调用——那么您可以使用从控制器或模型`Rails.logger`中获取方法引用的相同记录器。`logger`

例如，来自`app/services/payments.rb`：

```
rescue Stripe::CardError => e
  error = e.message
  Rails.logger.error "Stripe card error for account #{@account}, error #{e}" 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-17T09:15:01.633

我很困惑......我只是使用例如

```
logger.info("in model") 
```

或者

```
logger.info("in controller") 
```

一直在我的模型和控制器中，这是 rails 3.2/ruby 1.9.3。当然，我可能完全误解了一些东西。

# jquery - 使用 jQuery 使用 colspan 显示/隐藏表格列

> ID：12455699
> 
> 赞同：7
> 
> 时间：2012-09-17T08:37:51.460
> 
> 标签：jquery, html, css

我有一个 HTML 表格，如[http://jsfiddle.net/Lijo/auny3/](http://jsfiddle.net/Lijo/auny3/)所示。该表有 10 列 - 分为三个列组。我需要使用“Show Associate”和“Hide Associate”按钮隐藏/显示名为“Associate Info”的colgroup（包括其行数据）。

使用 jQuery 执行此操作的最佳方式（就性能而言）是什么？

如果您有比[http://jsfiddle.net/Lijo/auny3/8/更好的答案，请回答](http://jsfiddle.net/Lijo/auny3/8/)

注意：我正在使用 [http://www.sacdeveloper.com/Community/Articles/tabid/86/ctl/ArticleView/mid/458/articleId/1/Group_columns_in_an_ASPNet_Gridview.aspx中给出的 ASP.Net GridView 生成表格](http://www.sacdeveloper.com/Community/Articles/tabid/86/ctl/ArticleView/mid/458/articleId/1/Group_columns_in_an_ASPNet_Gridview.aspx)

**参考**：

1.  [http://jsfiddle.net/Lijo/auny3/8/](http://jsfiddle.net/Lijo/auny3/8/)

2.  [http://jsfiddle.net/Lijo/auny3/12/](http://jsfiddle.net/Lijo/auny3/12/)

3.  [http://jsfiddle.net/Lijo/auny3/11/](http://jsfiddle.net/Lijo/auny3/11/)

4.  [http://jsfiddle.net/Lijo/auny3/13/](http://jsfiddle.net/Lijo/auny3/13/)

**选择的答案**

1.  [http://jsfiddle.net/Lijo/UqdQp/2/](http://jsfiddle.net/Lijo/UqdQp/2/)

![在此处输入图像描述](../Images/1ad474f4e4d1c0efae25f45de3492ae5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:49:59.150

嗨，现在习惯了

**jQuery**

```
$(document).ready(function(){

$("#show").click(function(){
    $("#showhide").show();
    });

    $("#hide").click(function(){
    $("#showhide").hide();
    });
}) 
```

并对您的 html 进行一些更改

***[现场演示](http://jsfiddle.net/auny3/6/)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T09:02:59.243

或者你可以使用`nth-child`选择器：

```
$('input').click(function(){
    if($(this).val() == "Hide Associate"){
    $('th:nth-child(2), td:nth-child(2), th:nth-child(3):not(:first), td:nth-child(3), th:nth-child(4), td:nth-child(4), th:nth-child(5), td:nth-child(5)').hide();
    }else{
        $('th:nth-child(2), td:nth-child(2), th:nth-child(3):not(:first), td:nth-child(3), th:nth-child(4), td:nth-child(4), th:nth-child(5), td:nth-child(5)').show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T09:35:29.680

在这里，使用您当前的 HTML，并且如果您的 Associate Info 标头存储了更多列（脚本正在寻找其`colspan`属性以获取适当数量的列），它将继续工作。

```
$("input").on("click", function(e){
    e.preventDefault();

    var label = $(".resultGridTable .tableColGroupAssociate"),
        colspan = parseInt(label.attr("colspan"), 10),
        associate = $("tr:gt(0)")
                        .find("th:gt(0):lt("+ colspan +"), td:gt(0):lt("+ colspan +")")
                        .add(label);

    if($(this).val() == 'Hide Associate') associate.hide();
        else associate.show();
});​ 
```

[**演示**](http://jsfiddle.net/pioul/UqdQp/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T11:11:19.993

我已经概括了@Pioul 提供的想法。因此，如果您喜欢这个答案，也请为@Pioul 投票。这种通用方法可在[http://jsfiddle.net/Lijo/UqdQp/10/中找到](http://jsfiddle.net/Lijo/UqdQp/10/)

参考：

1.  [当表包含跨列单元格时使用 jQuery 查找列索引](https://stackoverflow.com/questions/1166452/finding-column-index-using-jquery-when-table-contains-column-spanning-cells/12472926#12472926)

2.  [根据单元格中的值选择表格单元格](https://stackoverflow.com/questions/12471642/select-table-cells-based-on-the-value-in-the-cell)

代码

```
var associateStartElementString = "EmpID";
var financialStartElementString = "Type";

var associateHTMLElements;
var financialHTMLElements;

var associateHideClass = '.tableColGroupAssociate';
var financialHideClass = '.tableColGroupTransaction';

$(document).ready(function () {

////////Hide Sections

//Associate Hide
$('.associateHide').live("click", function (e) {
    e.preventDefault();

    var hideClass = associateHideClass; 
    associateHTMLElements = HideSection(hideClass, associateStartElementString);

    $('.btnAssociate').show();

});

//Financial Hide
$('.financialHide').live("click", function (e) {
    e.preventDefault();

  var hideClass = financialHideClass ;

    financialHTMLElements = HideSection(hideClass, financialStartElementString);

    $('.btnFinancial').show();

});

////SHOW 
$('.btnAssociate').click(function()
{
    associateHTMLElements.show();

      var firstHeaderLineElement = $(".resultGridTable").find(associateHideClass );

    firstHeaderLineElement.show(); 

});

$('.btnFinancial').click(function()
{
    financialHTMLElements.show();

      var firstHeaderLineElement = $(".resultGridTable").find(financialHideClass );

    firstHeaderLineElement.show(); 

});

//Function 1
function HideSection(hideClass, startElementString) 
{

var htmlElement = GetTableSections(hideClass, startElementString);

var firstHeaderLineElement = $(".resultGridTable").find(hideClass);

var variableToSet;

if (!(htmlElement === undefined)) {

    variableToSet = htmlElement;
    htmlElement.hide();
    firstHeaderLineElement.hide();
}

return variableToSet;
}

//Function 2
function GetTableSections(hideClass, referenceHeaderCellValue) {

var firstHeaderLineElement = $(".resultGridTable").find(hideClass);
var colspan = parseInt(firstHeaderLineElement.attr("colspan"));

var startElementIndex = GetNonColSpanIndex(referenceHeaderCellValue);

if (startElementIndex > 0) {

    startElementIndex = (startElementIndex - 1);

    var selectedElements = $("tr:gt(0)")
                                    .find("th:gt(" + startElementIndex + "):lt(" + colspan + "), td:gt(" + startElementIndex + "):lt(" + colspan + ")");

    return selectedElements;

}

}

//Function 3
function GetNonColSpanIndex(referenceHeaderCellValue) {

var selectedCell = $("th").filter(function (i) {
    return ($.trim($(this).html())) == referenceHeaderCellValue;

});

var allCells = $(selectedCell).parent('tr').children();
var normalIndex = allCells.index($(selectedCell));
var nonColSpanIndex = 0;

allCells.each(
    function (i, item) {
        if (i == normalIndex)
            return false;

        var colspan = $(selectedCell).attr('colspan');
        colspan = colspan ? parseInt(colspan) : 1;
        nonColSpanIndex += colspan;
    }
    );

return nonColSpanIndex;
};

}
); 
```

# java - 从 gaej 进行经过身份验证的 api 调用

> ID：12455701
> 
> 赞同：0
> 
> 时间：2012-09-17T08:37:57.693
> 
> 标签：java, google-app-engine, google-api, google-apps

我想从谷歌应用引擎应用程序访问谷歌 AuditService api。用户已经使用`UserService`谷歌凭据登录到我的应用程序。

有没有一种方法可以在不需要用户重新验证我的应用程序的情况下进行经过身份验证的调用。

```
AuditService service = new AuditService("userEmail", "password", "domain name", "application name"); 
```

在上面的调用中，我没有用户电子邮件和密码，但是当用户第一次登录到我的应用程序时`user`，我有我使用的对象。有什么方法可以使用这个对象进行经过身份验证的调用？`UserService``user`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:52:06.470

看起来您可以通过存储和提供身份验证令牌而不是用户的凭据来做到这一点。在第一个请求中，照常进行用户名/密码身份验证，然后使用[service.getAuthToken(...)](https://developers.google.com/gdata/javadoc/com/google/gdata/client/GoogleService#getAuthToken%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)生成授权令牌。将该令牌与您的用户模型一起存储。对于后续请求，不要使用获取用户凭据的 AuditService 构造函数，而是使用省略它们的构造函数：[AuditService(domain, applicationName)](http://code.google.com/p/gdata-java-client/source/browse/trunk/java/src/com/google/gdata/client/appsforyourdomain/audit/AuditService.java?r=296#80)。构造完成后，调用[service.setUserToken(token)](https://developers.google.com/gdata/javadoc/com/google/gdata/client/GoogleService#setUserToken%28java.lang.String%29)以提供存储的令牌。然后，您应该能够发出经过身份验证的请求。请务必处理将由无效/过期令牌引发的 AuthenticationExceptions。

# php - OR 和 || 有什么区别？PHP中的运算符？

> ID：12455706
> 
> 赞同：0
> 
> 时间：2012-09-17T08:38:15.077
> 
> 标签：php, operators

> **可能重复：**
> [逻辑运算符，|| 或？](https://stackoverflow.com/questions/5998309/logical-operators-or-or)

我一直认为 OR 是另一种写 || 的方式 PHP 中的运算符。我更喜欢使用 OR 而不是 || 的唯一方法 是它使代码更容易阅读，因为 || 可能会与 II 或 11 或其他什么混淆...

有一天，我偶然发现了这件事：

```
<?php 
      $a = 'string_b';
      $active = ($a == 'string_a') OR
                ($a == 'string_b') OR
                ($a == 'string_c');  
   var_dump($active); // Prints FALSE;
?> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:42:08.470

唯一的区别是运算符优先级，请参阅[运算符优先级](http://php.net/manual/en/language.operators.precedence.php)。`||`具有比 更高的优先级`OR`。

顺便说一句，`var_dump($a)` **返回** `null`但**打印**正确的东西，`string_b`. 但是，`var_dump($active)`确实会产生意想不到的结果，`false`。实际上，`=`具有比 更高的优先级`or`，因此您的代码相当于：

```
($active = ($a == 'string_a')) OR ($a == 'string_b') OR ($a == 'string_c'); 
```

它首先分配`false`给 active，然后执行第一个的正确部分`OR`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T08:40:32.027

一样的。但`||`优先级高于`OR` [http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:49:03.267

= 的优先级高于 OR。因此，首先评估 $active = ($a == 'string_a') ，这是错误的。将整个右侧括在它自己的一组括号中，您将得到您期望的结果。

```
<?php 
      $a = 'string_b';
      $active = (
                 ($a == 'string_a') OR
                 ($a == 'string_b') OR
                 ($a == 'string_c')
                );
   var_dump($active); // Prints TRUE;
?> 
```

# node.js - nodejs中的自定义REPL

> ID：12455708
> 
> 赞同：2
> 
> 时间：2012-09-17T08:38:17.230
> 
> 标签：node.js, read-eval-print-loop

我正在尝试从文档中使用 REPL 中内置的 nodejs。

[http://nodejs.org/api/repl.html](http://nodejs.org/api/repl.html)

添加项目的示例如下：

`repl.start().context.m = msg;`

我似乎找不到添加多个菜单的方法。我试过做：

```
menus = {m = 'hello', f = 'foo'}
repl.start().context = menus 
```

但这也行不通。我得到：

```
testREPL> m
TypeError: needs a 'context' argument.
    at REPLServer.self.eval (repl.js:113:21)
    at Interface.<anonymous> (repl.js:250:12)
    at Interface.EventEmitter.emit (events.js:88:17)
    at Interface._onLine (readline.js:199:10)
    at Interface._normalWrite._line_buffer (readline.js:308:12)
    at Array.forEach (native)
    at Interface._normalWrite (readline.js:307:11)
    at Socket.ondata (readline.js:90:10)
    at Socket.EventEmitter.emit (events.js:115:20)
    at TCP.onread (net.js:395:14) 
```

有谁知道如何让这个工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:15:45.007

您不能分配给该`context`属性，您必须为其添加属性。您正在尝试用您自己的对象“覆盖”它。尝试自己分配每个属性：

```
var context = repl.start({}).context;
context.m = 'hello';
context.f = 'foo'; 
```

# gpgpu - 如何启用 cuda 仅用于计算目的，而不是用于显示

> ID：12455711
> 
> 赞同：4
> 
> 时间：2012-09-17T08:38:36.450
> 
> 标签：gpgpu

我正在使用 nvidia gt 440 gpu。它用于显示和计算目的，导致计算时性能降低。我可以仅出于计算目的启用它吗？如果是这样，我怎样才能禁用它使用显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:30:06.790

这取决于——你是在 Windows 还是 Linux 上工作？您的机器中是否还有其他显示适配器（显卡）？

如果您在 Linux 上，您可以在没有 X Windows Server（即，从终端）和 SSH 进入盒子（或将您的显示器连接到另一个适配器）的情况下运行。

如果您使用的是 Windows，则需要有第二个显示适配器。只要您的显示器连接到 GeForce 440 GT，就无法仅将其用于计算目的。这还包括远程桌面，除非你有 Tesla 卡，否则它根本无法工作，因为 WDDM（Windows 显示驱动程序模型）的设计方式（它不能从会话 0 中访问，这是 RDP 的位置服务运行）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T01:36:43.213

我在 Linux 上使用英特尔集成显卡进行显示，使用 GPU 进行计算。您需要从 bios 进行设置才能在 mobo 上使用集成显卡。这将使您的 GPU 空闲。这取决于您可用的硬件。=)

它对性能有多大影响？我之前确实检查过，Windows 中的显示确实占用了一些内存（小于 10mb）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:38:09.630

检查您是否拥有 /dev/nvidia* 设备的写入权限。Linux的[CUDA C 入门指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Getting_Started_Linux.pdf)包含一个在启动时自动设置正确权限的脚本。

# qt - connectSlotsByName 可以连接到选择模型更改吗？

> ID：12455717
> 
> 赞同：0
> 
> 时间：2012-09-17T08:39:04.110
> 
> 标签：qt, signals-slots

在我的主窗口 ( `QMainWindow`) 中，我有一个`QTableView`(名为`commandsTableView`)。现在我想对它的选择变化做出反应。

我做了一个插槽并手动将其连接到`ui.commandsTableView->selectionModel()`. 一切正常。

但后来我想：为什么不使用自动连接（尤其是会有更多的连接要做）？至少它会为一致的命名规则增加更多的力量。

但是我找不到正确的名称语法。我试过：

*   `on_commandsTableView_selectionModel_selectionChanged`,
*   `on_commandsTableViewSelectionModel_selectionChanged`,
*   `on_commandsTableView_selectionChanged`,
*   `on_commandsTableView___selectionChanged`

但都没有奏效。在所有情况下，运行应用程序时都会输出一条消息（带有相应的插槽名称，这里仅作为示例首先给出）：

```
QMetaObject::connectSlotsByName: No matching signal for on_commandsTableView_selectionModel_selectionChanged(QItemSelection,QItemSelection) 
```

*（为什么没有响应连接错误的断言 - 我无法理解。在我发现那些 - 以及类似的 - 输出消息之前，我花了很多时间想知道出了什么问题。）*

返回的对象`ui.commandsTableView->selectionModel()`名称为空。但是`selectionModel`在拨打电话之前将其设置为`connectSlotsByName`也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:50:07.030

根据**[文档](http://doc.qt.nokia.com/4.7-snapshot/qmetaobject.html#connectSlotsByName)** `connectSlotsByName()`仅支持签名，例如

`void on_<object name>_<signal name>(<signal parameters>);`

根据它检查的唯一形式**[的来源](http://qt.gitorious.org/qt/qtbase/blobs/8e7b86de2c69c9c48c8431bf6ea9e6b0b29f00f8/src/corelib/kernel/qobject.cpp#line3219)**（观察它如何收集子列表，然后将父方法名称与子名称匹配）。

因此，为了能够使用自动连接，您将需要一个命名选择模型，该模型将从调用`connectSlotsByName()`开始一直存在。每次更改选择模型（不太可能）或模型（可能）时，您都必须命名选择模型并再次自动连接。但是，唉`connectSlotsByName()`，会复制所有其他连接，因为它似乎没有检查连接是否是唯一的，所以我们必须手动将信号连接到模型、场景*等动态子节点。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:18:43.860

我想这是

```
on_selectionModel_selectionChanged(const QItemSelection & selected, const QItemSelection & deselected) 
```

# windows-server-2008-r2 - Windows Server 2008 R2 Enterprise 下 Python 2.6 需要 pyodbc dll

> ID：12455725
> 
> 赞同：1
> 
> 时间：2012-09-17T08:39:32.660
> 
> 标签：windows-server-2008-r2, python-2.6, pyodbc

我想知道**Windows Server 2008 R2 Enterprise**下的**Python 2.6**可以使用 哪个版本的**pyodbc dll**，如果提供相同的链接，我将不胜感激。

 ****[虽然我在这里](http://code.google.com/p/pyodbc/)得到了所有版本的 pyodbc.exe ，但我需要与上述操作系统兼容的 dll。最好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:16:19.720

看起来很简单...根据服务器的处理器架构使用[32 位](http://code.google.com/p/pyodbc/downloads/detail?name=pyodbc-3.0.6.win32-py2.6.exe&can=2&q=)或[64 位安装程序。](http://code.google.com/p/pyodbc/downloads/detail?name=pyodbc-3.0.6.win-amd64-py2.6.exe&can=2&q=)****

# c# - 指针悬停时如何在gridview中指定项目的样式

> ID：12455726
> 
> 赞同：3
> 
> 时间：2012-09-17T08:39:39.700
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

我使用gridview列出所有项目，我想实现一个效果，当指针悬停在一个项目上时，它显示为一种样式，指针移开后，样式消失，任何人都可以给我一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T09:41:35.150

您想要更改网格的 ItemContainerStyle。为此，请执行以下操作：

右击左边的GridView，选择Edit Additional Templates，Edit Generated Item Container(ItemContainerStyle)，Edit a Copy。

在生成的样式中，您会发现一个名为“Hover”的 VisualStateGroup。这些是当用户将鼠标悬停在项目上时对容器发生的更改。

# c# - 使用 1 个按钮访问多个数据库

> ID：12455728
> 
> 赞同：0
> 
> 时间：2012-09-17T08:40:00.930
> 
> 标签：c#, .net, sql-server

我正在尝试在 C# 中使用 .net 创建一个应用程序。我面临的问题是我有一个`comboBox`链接到 5 个数据库。我想在`dataGrid`. 每当我选择任何列时，内容必须显示在多文本框中（即整个信息说名称、年份等），以便我可以和连接环境`INSERT`中的数据。我可以只用这3个按钮来修改每个数据库的数据吗？基本上，我不希望每个数据库有多个按钮来修改数据库。`DELETE``UPDATE`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:42:08.213

您可以将其他参数传递给事件处理程序并修改适当的数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:51:23.873

是的你可以。

创建五个连接对象：

```
DataBase conn1;
DataBase  conn2;
DataBase  conn3;
DataBase  conn4;
DataBase  conn5; 
```

在`buttonClickEventHandler`（例如删除）：

```
if(comboBox.SelectedIndex == 1) 
{
   DeleteItems(conn1);
} 
```

创建一个`DeleteItems`方法：

```
public void DeleLeteItems(DataBase db)
{
   //delete items from db here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:50:23.940

为什么不存储组合框中的信息，它会告诉您使用的数据库，然后您可以拥有类似的东西

```
object selectedItem;
private void ComboboxSelectionChanged(...)
{
     selectedItem = combobox.SelectedItem;
}
private void ButtonClickEventHanlder(...)
{
    if(selectedItem == firstdatabase)
      //do this
    else if (selectedItem == seconddatabase)
      //do something else in the other db
    ...
} 
```

# php - Html 到 jpeg 作为缩略图

> ID：12455729
> 
> 赞同：-4
> 
> 时间：2012-09-17T08:40:03.907
> 
> 标签：php, javascript, html, screenshot, thumbnails

> **可能重复：**
> [使用 PHP 的网站截图](https://stackoverflow.com/questions/757675/website-screenshots-using-php)

有人能告诉我如何在没有任何“API”支持的情况下使用 php 或 js 从网页中取出缩略图吗？否则，也可以将 HTML 转换为 PS 并将 PS 转换为 jpeg。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:43:51.293

[WKHtmlToImage](http://code.google.com/p/wkhtmltopdf/)能够使用 webkit 引擎呈现网页。不过，您将不得不在服务器端启动一个可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:42:28.967

试试[幻影 JS](http://code.google.com/p/phantomjs/wiki/Interface)。它可用于从命令行渲染 HTML，使用各种输出格式。可以通过设置缩放系数来创建缩略图。

# sql - 带/不带参数的性能问题

> ID：12455730
> 
> 赞同：4
> 
> 时间：2012-09-17T08:40:21.730
> 
> 标签：sql, sql-server, performance, tsql

我有一些性能问题。

我有一个大约 200 万行的表。

```
CREATE TABLE [dbo].[M8](
    [M8_ID] [int] IDENTITY(1,1) NOT NULL,
    [APPLIC] [char](8) NOT NULL,
    [NIVALERTE] [numeric](1, 0) NOT NULL,
    [LOGDH] [datetime2](7) NULL,
    [USERX] [char](20) NOT NULL,
    [TACHE] [char](3) NOT NULL,
    [PRG] [char](32) NOT NULL,
    [DOS] [numeric](3, 0) NOT NULL,
    [ERRNUM] [numeric](5, 0) NOT NULL,
    [LOGTXT] [char](200) NOT NULL) 
```

我用 C# 和 ADO.NET 阅读它们

在管理工作室（SQL Server 2008 R2）中，使用该查询：

```
SELECT 
    M8.M8_ID, M8.APPLIC, M8.NIVALERTE, M8.LOGDH, M8.USERX, M8.TACHE, 
    M8.PRG, M8.DOS, M8.ERRNUM, M8.LOGTXT
FROM 
    M8 AS M8 WITH(NOLOCK) 
WHERE 
    ((M8.APPLIC LIKE 'DAV' ) )
ORDER BY 
    M8.LOGDH DESC, M8.M8_ID ASC
OPTION (FAST 1) 
```

第一行大约需要 1 分钟。

但是，随着

```
DECLARE @APPLIC_ZOOMAPRESCLE_ZOOM_LIKE_APPLIC_WHERE_0 as char(8) = 'DAV'

SELECT 
   M8.M8_ID, M8.APPLIC, M8.NIVALERTE, M8.LOGDH, M8.USERX, M8.TACHE, 
   M8.PRG, M8.DOS, M8.ERRNUM, M8.LOGTXT
FROM 
   M8 AS M8 WITH(NOLOCK) 
WHERE 
   ((M8.APPLIC LIKE @APPLIC_ZOOMAPRESCLE_ZOOM_LIKE_APPLIC_WHERE_0 ) )
ORDER BY 
   M8.LOGDH DESC, M8.M8_ID ASC
OPTION(FAST 1) 
```

我在 4 秒后得到第一行。

PS：我知道，我没有 % 之类的。

编辑：这里是执行计划[https://www.dropbox.com/sh/jgai5f9txbs84x6/EP5_hj8DNv](https://www.dropbox.com/sh/jgai5f9txbs84x6/EP5_hj8DNv)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T21:12:05.760

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:53:52.583

也许这 2 个问题会让你更好地理解`LIKE`和`=`运算符所涉及的性能问题：

*   [像 vs = 运算符](https://stackoverflow.com/questions/6142235/sql-like-vs-performance)这个链接到第二个
*   [等于（=）与 LIKE](https://stackoverflow.com/questions/543580/equals-vs-like)

# xslt - 动态生成子pom

> ID：12455731
> 
> 赞同：0
> 
> 时间：2012-09-17T08:40:22.353
> 
> 标签：xslt, maven

我一直想知道是否可以基于一种特征模型（[http://en.wikipedia.org/wiki/Feature_model](http://en.wikipedia.org/wiki/Feature_model) ）动态生成子 pom（通过 XSLT 或类似的东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:50:35.303

如果您希望它们成为反应堆构建的一部分，则不是。

在任何插件开始运行之前，反应器（所有项目和要针对它们运行的​​插件的列表）必须是完整且确定的。

`/project/parent/groupId`这就是为什么 (XPath) , `/project/parent/artifactId`, `/project/parent/version`, `/project/groupId`,`/project/artifactId`和中的属性替换`/project/version`是不允许的，因为这会导致一个不确定的构建计划。

但是，如果您想通过 XSLT 创建一堆项目，然后在随后的反应器（读取 Maven 调用）中对它们进行处理，那将是可行的。

您可以使用[Mojo 的 XML Maven 插件](http://mojo.codehaus.org/xml-maven-plugin/)为您执行 XSLT，然后使用[Maven Invoker 插件](http://maven.apache.org/plugins/maven-invoker-plugin/)来分叉一个新的反应器，但是您将处于一个中途的房子并坚持您配置调用程序的生命周期阶段。

# iphone - 向右翻转 UIView1 到 UIView2

> ID：12455735
> 
> 赞同：0
> 
> 时间：2012-09-17T08:41:05.967
> 
> 标签：iphone, uiview, uiviewcontroller, flip

我有两个`UIViews`VW1 和 VW2 在同一个`UIViewController`。我正在尝试从 VW1 向右翻转到 VW2 并使用以下我不知道如何以及在何处调用该方法的代码？

```
-(void)FlipFromRight
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:uiView2  cache:YES];

    [UIView commitAnimations];
} 
```

上面的代码对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:53:06.763

你需要做：

```
if ([VW1 superview])
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.0];  
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:aTableBGView cache:NO];

        [VW1 removeFromSuperview];
        [mainView addSubview:VW2];
        [mainView sendSubviewToBack:VW1];
    }
    else
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.0];  
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:aTableBGView cache:NO];

        [[mainView viewWithTag:2001] removeFromSuperview]; // VW2's tag ID
            [mainView addSubview: VW1];
        [mainView sendSubviewToBack: VW2];
    }   
    [UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:22:37.063

这里在导航栏或 MainViewcontroller 上添加一个类似名称“btnSwipe”的 uIButton，然后只给出按钮标题，例如“Left”。之后用下面的方法给出动作事件

```
-(IBAction)FlipFromRight:(id)sender
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    if ([btnSwipe.titleLabel.text isEqualToString:@"Left"])
   {
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:uiView1  cache:YES];
[btnDraw setTitle:@"Right" forState:UIControlStateNormal];
   }
else{
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:uiView2  cache:YES];
[btnDraw setTitle:@"Left" forState:UIControlStateNormal];
}

    [UIView commitAnimations];
} 
```

这里只需将 IBAction 从 xib 提供给 btnSwipe 即可

我希望这对你有用..

:)

# java - 如何在没有迭代器的情况下迭代 Set/HashSet？

> ID：12455737
> 
> 赞同：304
> 
> 时间：2012-09-17T08:41:32.777
> 
> 标签：java, loops, set, hashset

如何在没有以下内容的情况下迭代`Set`/ `HashSet`？

```
Iterator iter = set.iterator();
while (iter.hasNext()) {
    System.out.println(iter.next());
} 
```

* * *

## 回答 #1

> 赞同：531
> 
> 时间：2012-09-17T08:43:08.133

您可以使用[增强的 for 循环](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)：

```
Set<String> set = new HashSet<String>();

//populate set

for (String s : set) {
    System.out.println(s);
} 
```

或者使用 Java 8：

```
set.forEach(System.out::println); 
```

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2016-08-25T23:10:06.493

至少有六种额外的方法可以迭代一个集合。以下是我所知道的：

**方法一**

```
// Obsolete Collection
Enumeration e = new Vector(movies).elements();
while (e.hasMoreElements()) {
  System.out.println(e.nextElement());
} 
```

**方法二**

```
for (String movie : movies) {
  System.out.println(movie);
} 
```

**方法三**

```
String[] movieArray = movies.toArray(new String[movies.size()]);
for (int i = 0; i < movieArray.length; i++) {
  System.out.println(movieArray[i]);
} 
```

**方法四**

```
// Supported in Java 8 and above
movies.stream().forEach((movie) -> {
  System.out.println(movie);
}); 
```

**方法五**

```
// Supported in Java 8 and above
movies.stream().forEach(movie -> System.out.println(movie)); 
```

**方法6**

```
// Supported in Java 8 and above
movies.stream().forEach(System.out::println); 
```

这是`HashSet`我用于示例的：

```
Set<String> movies = new HashSet<>();
movies.add("Avatar");
movies.add("The Lord of the Rings");
movies.add("Titanic"); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-09-17T08:46:14.273

**将您的集合转换为数组** 也可以帮助您迭代元素：

```
Object[] array = set.toArray();

for(int i=0; i<array.length; i++)
   Object o = array[i]; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-07-23T07:19:53.593

为了演示，请考虑以下集合，其中包含不同的 Person 对象：

```
Set<Person> people = new HashSet<Person>();
people.add(new Person("Tharindu", 10));
people.add(new Person("Martin", 20));
people.add(new Person("Fowler", 30)); 
```

> 人物模型类

```
public class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    //TODO - getters,setters ,overridden toString & compareTo methods

} 
```

1.  for 语句有一种设计用于通过集合和数组进行迭代的形式。这种形式有时被称为增强的 for 语句，可用于使您的循环更加紧凑和易于阅读。

> ```
> for(Person p:people){
>   System.out.println(p.getName());
> } 
> ```

2.  Java 8 - java.lang.Iterable.forEach（消费者）

> ```
> people.forEach(p -> System.out.println(p.getName())); 
> ```

```
default void forEach(Consumer<? super T> action)

Performs the given action for each element of the Iterable until all elements have been processed or the action throws an exception. Unless otherwise specified by the implementing class, actions are performed in the order of iteration (if an iteration order is specified). Exceptions thrown by the action are relayed to the caller. Implementation Requirements:

The default implementation behaves as if: 

for (T t : this)
     action.accept(t);

Parameters: action - The action to be performed for each element

Throws: NullPointerException - if the specified action is null

Since: 1.8 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-08-15T15:37:19.817

您可以使用函数式操作来获得更简洁的代码

```
Set<String> set = new HashSet<String>();

set.forEach((s) -> {
     System.out.println(s);
}); 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-06-07T01:22:20.497

以下是一些关于如何迭代 Set 及其性能的提示：

```
public class IterateSet {

    public static void main(String[] args) {

        //example Set
        Set<String> set = new HashSet<>();

        set.add("Jack");
        set.add("John");
        set.add("Joe");
        set.add("Josh");

        long startTime = System.nanoTime();
        long endTime = System.nanoTime();

        //using iterator
        System.out.println("Using Iterator");
        startTime = System.nanoTime();
        Iterator<String> setIterator = set.iterator();
        while(setIterator.hasNext()){
            System.out.println(setIterator.next());
        }
        endTime = System.nanoTime();
        long durationIterator = (endTime - startTime);

        //using lambda
        System.out.println("Using Lambda");
        startTime = System.nanoTime();
        set.forEach((s) -> System.out.println(s));
        endTime = System.nanoTime();
        long durationLambda = (endTime - startTime);

        //using Stream API
        System.out.println("Using Stream API");
        startTime = System.nanoTime();
        set.stream().forEach((s) -> System.out.println(s));
        endTime = System.nanoTime();
        long durationStreamAPI = (endTime - startTime);

        //using Split Iterator (not recommended)
        System.out.println("Using Split Iterator");
        startTime = System.nanoTime();
        Spliterator<String> splitIterator = set.spliterator();
        splitIterator.forEachRemaining((s) -> System.out.println(s));
        endTime = System.nanoTime();
        long durationSplitIterator = (endTime - startTime);

        //time calculations
        System.out.println("Iterator Duration:" + durationIterator);
        System.out.println("Lamda Duration:" + durationLambda);
        System.out.println("Stream API:" + durationStreamAPI);
        System.out.println("Split Iterator:"+ durationSplitIterator);
    }
} 
```

该代码是不言自明的。

持续时间的结果是：

```
Iterator Duration: 495287
Lambda Duration: 50207470
Stream Api:       2427392
Split Iterator:    567294 
```

我们可以看到`Lambda`耗时最长而`Iterator`最快。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-18T11:46:12.057

枚举（？）：

```
Enumeration e = new Vector(set).elements();
while (e.hasMoreElements())
    {
        System.out.println(e.nextElement());
    } 
```

另一种方式（java.util.Collections.enumeration()）：

```
for (Enumeration e1 = Collections.enumeration(set); e1.hasMoreElements();)
    {
        System.out.println(e1.nextElement());
    } 
```

爪哇 8：

```
set.forEach(element -> System.out.println(element)); 
```

或者

```
set.stream().forEach((elem) -> {
    System.out.println(elem);
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-23T16:33:37.793

但是，已经有非常好的答案可用。这是我的答案：

```
1\. set.stream().forEach(System.out::println); // It simply uses stream to display set values
2\. set.forEach(System.out::println); // It uses Enhanced forEach to display set values 
```

此外，如果此 Set 是自定义类类型，例如：客户。

```
Set<Customer> setCust = new HashSet<>();
    Customer c1 = new Customer(1, "Hena", 20);
    Customer c2 = new Customer(2, "Meena", 24);
    Customer c3 = new Customer(3, "Rahul", 30);

setCust.add(c1);
setCust.add(c2);
setCust.add(c3);
    setCust.forEach((k) -> System.out.println(k.getId()+" "+k.getName()+" "+k.getAge())); 
```

// 客户类：

```
class Customer{
private int id;
private String name;
private int age;

public Customer(int id,String name,int age){
this.id=id;
this.name=name;
this.age=age;
} // Getter, Setter methods are present.} 
```

# java - 什么是 JSF 中的“请求范围变量”

> ID：12455739
> 
> 赞同：2
> 
> 时间：2012-09-17T08:41:44.700
> 
> 标签：java, jsf-2

我正在阅读一篇题为：“ [JSF 2 GETs Bookmarkable URLs](http://java.dzone.com/articles/bookmarkability-jsf-2) ”的文章。

文章有以下段落：

> **介绍视图参数**
> API 文档描述了一个视图参数，由 javax.faces.component.UIViewParameter 组件类表示，作为请求参数和模型属性之间的声明性绑定。与模型属性的绑定使用 EL 值表达式（例如，#{blog.entryId}）来表示。如果省略表达式，则请求参数将绑定到具有相同名称的请求范围变量。

有人可以提供一个请求范围变量的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:41:05.047

“请求范围变量”是存储为`HttpServletRequest`.

```
request.setAttribute("foo", foo); 
```

此属性在 EL 中以通常的方式可用`#{foo}`。它`HttpServletRequest`本身的生命周期正好是一个 HTTP 请求-响应周期。一旦与 HTTP 请求关联的 HTTP 响应完全到达客户端（Web 浏览器），则该`HttpServletRequest`实例（包括其所有属性）将被丢弃。顺便说一下，JSF 请求范围的托管 bean 也存储为`HttpServletRequest`.

由于 JSF 在基本 HTTP Servlet API 的“顶部”运行，如果您还了解 HTTP 和 Servlet API 的工作原理，这一切都更容易理解。这个答案可能会带来一些启示：[servlet 是如何工作的？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading/3106909#3106909)。

* * *

您接下来的问题可能是*“这与引用的段落有什么关系？”* 好吧，它基本上是在告诉你，当你省略 的`value`属性时`<f:viewParam>`，它会被作为变量放在请求范围内。

所以，如果你使用

```
<f:viewParam name="entryId" /> 
```

代替

```
<f:viewParam name="entryId" value="#{blog.entryId}" /> 
```

`#{entryId}`然后它在请求范围内变得可用。

```
<p>The entry ID view parameter is: #{entryId}</p> 
```

然而，这不是通常使用视图参数的方式。您也可以只使用`#{param}`地图，从而使整个过程变得`<f:viewParam>`多余。

```
<p>The entry ID view parameter is: #{param.entryId}</p> 
```

### 也可以看看：

*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:45:47.077

为每个单独的请求实例化一个请求范围的变量。因此，请求范围的变量实例不存在于另一个请求的上下文中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:46:26.567

一个请求范围的变量，顾名思义，只在当前的 http 请求中有效。请求变量的一个很好的用途是在将请求从 servlet 转发到 jsp 时。例如在 servlet 中设置变量，稍后在 jsp 中用 ${myvar} 读取相同的变量

示例（小服务程序）

```
request.setAttribute ("greeting", "world");        
getServletConfig().getServletContext().getRequestDispatcher("/jsp/page.jsp").forward(request, response); 
```

示例（jsp）

# 你好 ${问候}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:00:54.990

id 与 Managed-bean 配置中的 entryId 映射，或者您可以使用注释。

```
<managed-bean>
   <managed-bean-name>blog</managed-bean-name>
   <managed-bean-class>com.acme.Blog</managed-bean-class>
   <managed-property>
     <property-name>entryId</property-name>
      <value>#{param['id']}</value>
   </managed-property>
</managed-bean> 
```

@RequestScope：（这是托管 bean 的**默认范围**）。这会将 bean 置于请求范围内。它为每个 HTTP 请求创建一个新实例。通常，bean 被实例化两次，一次是在显示表单时，一次是在提交时。

# php - Symfony2：安装 CCDNMessageMes sageBundle

> ID：12455744
> 
> 赞同：0
> 
> 时间：2012-09-17T08:42:12.080
> 
> 标签：php, symfony

我正在尝试安装 Symfony 包 CCDNMessageMes​​sageBundle。

为此，我：

*   安装 Symfony (2.0.17)
*   `php bin/vendors install`用 git执行
*   按照[这里的指示](https://github.com/codeconsortium/CCDNMessageMessageBundle/blob/master/Resources/doc/install.md "文档：安装 CCDNMessage MessageBundle 1.2")

问题出现在本文档的第 4 步（运行供应商安装脚本）：

有很多错误 - 这是第一行：

> 安装/更新 CCDNMessageMes​​sageBundle f7ee2c184257011e2991b34ac5cfe9a8b01c6889
> HEAD 现在位于 f7ee2c1
> 更新文档
> 
> PHP 致命错误：`'CCDNMessage\MessageBundle\CCDNMessageBundle'`在第 20 行的 xxxxxxxxxxxx\app\AppKernel.php 中找不到类...

有关信息：

AppKernel.php，第 20 行包含：

```
new CCDNMessage\MessageBundle\CCDNMessageBundle(), 
```

作为数组的最后一个元素`$bundles`。

autoload.php 包含这个 registerNamespaces ：

```
$loader->registerNamespaces(array(
  'Symfony' => array(__DIR__.'/../vendor/symfony/src', __DIR__.'/../vendor/bundles'),
  'Sensio' => __DIR__.'/../vendor/bundles',
  'JMS' => __DIR__.'/../vendor/bundles',
  'Doctrine\\Common' => __DIR__.'/../vendor/doctrine-common/lib',
  'Doctrine\\DBAL' => __DIR__.'/../vendor/doctrine-dbal/lib',
  'Doctrine' => __DIR__.'/../vendor/doctrine/lib',
  'Monolog' => __DIR__.'/../vendor/monolog/src',
  'Assetic' => __DIR__.'/../vendor/assetic/src',
  'Metadata' => __DIR__.'/../vendor/metadata/src',
  'CCDNMessage' => __DIR__.'/../vendor/bundles',
)); 
```

在 deps 结束时，我输入了：

```
[CCDNMessageMessageBundle]
  git=http://github.com/codeconsortium/CCDNMessage.git
  target=/bundles/CCDNMessage/MessageBundle
  version=v1.2 
```

我想我已经完成了文档中的所有步骤！

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:48:04.647

deps中的git url是错误的，应该是

```
[CCDNMessageMessageBundle]
  git=git://github.com/codeconsortium/CCDNMessageMessageBundle.git
  target=/bundles/CCDNMessage/MessageBundle
  version=v1.2 
```

或使用 HTTP

```
[CCDNMessageMessageBundle]
  git=http://github.com/codeconsortium/CCDNMessageMessageBundle.git
  target=/bundles/CCDNMessage/MessageBundle
  version=v1.2 
```

# jquery-ui - 使用 jquery 进行连续的水运动

> ID：12455750
> 
> 赞同：0
> 
> 时间：2012-09-17T08:42:39.433
> 
> 标签：jquery-ui

我的图像宽度为 4096 像素，屏幕宽度为 960 像素。我必须创建连续的水运动。为此，我使用 32 个图像的精灵我的代码如下

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Lets learn grammer</title>
    <script language="javascript" type="text/javascript" src="jquery.js"></script>
    <script>
    function moveBack(){
        var i=0;
        setInterval(function(){
            if(i<23){
                i++;
                $('#bck').css('background-position',((i)*-130));
            }else{
                //for(var j=0; j<=4;j++){
                    $('#bck').css('background-position',0);
                //}
                i=0;
            }
        }, 50); 
    }
    </script>
    <style type="text/css">
    #bck{
        position:absolute;
        width:960px;
        height:540px;
        background-image:url("water.png");
        background-repeat:repeat-y;
        top:0px;
        left:0px;
        border:1px solid red;
    }

    </style>
</head>
<body onload="moveBack()">
<div id="bck"></div>
</body> 
```

这段代码将整个精灵移动到终点，然后停止。但我想继续运动，直到我停止执行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:39:57.470

```
<head>     
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">     
<title>Lets learn grammer</title>     
<script language="javascript" type="text/javascript" src="jquery.js"></script>             
<script>     
function moveBack()
{         
        var i=0;         
        setInterval(function()
        {             
            //if(i<23){
                        i++;                 
                        $('#bck').css('background-position',((i)*-130));             
            //}
            //else{                 //for(var j=0; j<=4;j++){
            //$('#bck').css('background-position',0);                 
            //}                 i=0;             }         
        }, 50);
  }     
</script>     
<style type="text/css">     
#bck
{         
    position:absolute;         
    width:960px;         
    height:540px;         
    background-image:url("water.png");         
    background-repeat:repeat-x;         
    top:0px;         
    left:0px;         
    border:1px solid red;     
}      
</style> 
</head> 
<body onload="moveBack()"> 
<div id="bck"></div> 
</body> 
```

这是你想要的吗？如果是，请注意更改：

*   setInterval() 的变化
*   背景重复：重复-x；而不是背景重复：重复-y；

# jquery - jQuery：根据值列表将 attr 添加到每个元素

> ID：12455758
> 
> 赞同：1
> 
> 时间：2012-09-17T08:43:18.740
> 
> 标签：jquery

我编写了这段代码以添加`attr`到已在`index`变量上定义值的选项元素：

```
$(document).ready(function (){

    $('option').each(function() {
      var index = '1';
      if($(this).attr('value') == index)
        $(this).attr('selected','selected');
    });

}); 
```

如何将 attr 添加到`index`变量中列出的值的每个元素。像这样的东西：

```
 var index = '1,2,5,8,7,9';
      if($(this).attr('value') == index)
... 
```

更新：这是我的 html 代码：

```
<select name="category[]" multiple="multiple" id="category">
    <option class="level-0" value="1">Jobs</option>
    <option class="level-1" value="24">CSS</option>
    <option class="level-0" value="5">Products</option>
</select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:48:13.457

```
$('#category option').each(function() {
  var index = [1,2,5,8,7,9],
      value = parseInt( this.value, 10); // convert the value to integer
  if($.inArray(value, index) >= 0)
    $(this).attr('selected','selected'); //or, $(this).prop('selected', true);
}); 
```

***[工作样本](http://jsfiddle.net/WgNG9/2/)***

* * *

# 无数组

```
$('#category option').each(function() {
  var index = '1,2,5,8,7,9',
      value = this.value;
  if(index.indexOf(value) >= 0)
    $(this).attr('selected','selected'); //or, $(this).prop('selected', true);
}); 
```

***[工作样本](http://jsfiddle.net/WgNG9/3/)***

* * *

# 使用`filter()`

```
var index = '1,2,5,8,7,9';
$('#category option').filter(function() {
  return index.indexOf(this.value) >= 0;
}).attr('selected', 'selected'); 
```

***[工作样本](http://jsfiddle.net/WgNG9/5/)***

* * *

# 使用`.attr('selected', callback)`

```
var index = '1,2,5,8,7,9';
$('#category option').attr('selected', function(i, val) {
  if( index.indexOf( this.value) >= 0 )
  return 'selected';
}) 
```

***[工作样本](http://jsfiddle.net/WgNG9/9/)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T08:45:15.953

将值组合成一个数组，然后使用原生 js 数组`indexOf`方法：

```
var index = [1,2,5,8,7,9];
if( index.indexOf( $(this).val() ) > -1) {
    //...
} 
```

* * *

要对多个元素执行此操作，您将使用[`.each()`](http://api.jquery.com/each/)：

```
var index = [1,2,5,8,7,9];
$("#category option").each( function() {
    if( index.indexOf( $(this).val() ) > -1) {
        $(this).prop('selected', true);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:47:17.923

您无需遍历`option`s

```
$("select").each(function(){
  var index = $(this).val();
  if($.inArray([1,2,5,8,7,9], index) > -1)
     $(this).prop("selectedIndex", index);  //set selected index
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T08:47:52.723

使用`select`jQuery，您可以做的更简单。

你可以这样做：

```
$("#select-id").val(value);  
// eg: $("#select-id").val('5'); will make the option whose value is 5 to be selected. 
```

***[检查演示。](http://jsfiddle.net/PbnGz/)***

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T08:58:04.643

如果您只想`index`以逗号分隔的字符串形式快速解决当前设置，请尝试以下操作：

```
$(this).prop('selected', 
  (new RegExp('('+index.split(',').join('|')+')'))
    .test(this.value)
); 
```

# dll - 水晶报告剩余文本似乎不是公式的一部分缺少dll

> ID：12455759
> 
> 赞同：2
> 
> 时间：2012-09-17T08:43:22.203
> 
> 标签：dll, crystal-reports-8.5

尝试查看报告时出现错误：“剩余文本似乎不是公式的一部分”。据我了解，有些 dll 丢失了，因为在某些 xp 机器上我没有收到任何错误，而在某些机器上却有。我的问题是如何找出我缺少哪个 dll？哪些水晶用于观看？我的公式对于该部分非常简单：

```
iif ({PRODUCT.PRODUCTCODE}="LT",true,false); 
```

如果在windows文件夹中添加一个同名的dll文件，我的意思是替换，我还是要注册它吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:06:17.083

假设如果您想在水晶报表上显示“迄今为止”公式字段，那么就会发生这种类型的错误。所以我们需要在你的源代码文件中编写如下代码。

```
 rpt.DataDefinition.FormulaFields["to_date"].Text = "'" + txt_to_date.Text.Trim() + "'";  crystalReportViewer_month_report.ReportSource = rpt; 
```

我们需要`txt_to_date.Text.Trim()`在单引号“'”之间括起来。

# android - 使用片段时选项卡内容不显示

> ID：12455761
> 
> 赞同：3
> 
> 时间：2012-09-17T08:43:24.270
> 
> 标签：android, tabs, android-fragments

我正在尝试使用片段创建可滚动的选项卡。

选项卡也在显示和滚动。但问题是标签内容没有显示。我正在使用片段来显示内容。我是这个主题的新手：片段。我在这段代码中遗漏了什么吗？

请帮我。

```
public class SrollableTab extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        ActionBar bar = getActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);
        bar.addTab(createTab("Tab 1"));
        bar.addTab(createTab("Tab 2"));
        bar.addTab(createTab("Tab 3"));
        bar.addTab(createTab("Tab 4"));
        bar.addTab(createTab("Tab 5"));
        bar.addTab(createTab("Tab 6"));

        if (savedInstanceState != null) {
            bar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
        }
    }

    public Tab createTab(String tabTitle)
    {
        ActionBar bar = getActionBar();     
        Tab tab = bar.newTab().setText(tabTitle).setTabListener(new TabFragment());
        return tab;
    }

    class TabFragment extends Fragment implements TabListener
    {

        @Override
        public void onCreate(Bundle fragmentState)
        {
            super.onCreate(fragmentState);              
        }
        @Override
        public View onCreateView(LayoutInflater inflator, ViewGroup container, Bundle savedState)
        {       
            View view = inflator.inflate(R.layout.tab_content, container, false);
            TextView t = (TextView)view.findViewById(R.id.txtTab);
            t.setText("tab content");   
            return view;

        }
        @Override
        public void onActivityCreated(Bundle savedState)
        {
            super.onActivityCreated(savedState);
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {

        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {

        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {

        }   
    }
} 
```

**tab_content.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#ffffff" >

    <TextView android:id="@+id/txtTab" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="hello"  
        android:textColor="#ff0000"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-09T01:18:20.557

这可能很旧，但找到了我自己的解决方案。

我已经使用[PagerSlidingTabStrip](https://github.com/astuetz/PagerSlidingTabStrip)一段时间了，直到我开始使用新材料[TabLayout](https://developer.android.com/reference/android/support/design/widget/TabLayout.html)。两者都适用于 Activity，但不适用于 Fragments。[这是关于片段错误](https://code.google.com/p/android/issues/detail?id=181850)的一些讨论。

我想出的解决方法是，在其构造函数参数上设置 viewpager 的 adater（通常使用 FragmentPagerAdapter 扩展）时，它需要 FragmentManager，而不是使用活动的 FragmentManager，而是使用片段的[getChildFragmentManager()](https://developer.android.com/reference/android/support/v4/app/Fragment.html#getChildFragmentManager())。

那修复它。Android 的错误仍然让我烦恼。

干杯

# jquery - 在网页中快速加载图像

> ID：12455763
> 
> 赞同：1
> 
> 时间：2012-09-17T08:43:29.890
> 
> 标签：jquery, html, css, image, user-interface

我在我的页面中使用文本框，我使用文本框的图像使 UI 看起来更好（将图像叠加在文本框上）。我使用文本框图像的左侧部分（我的自定义图像对于文本框）和右侧部分图像，并使用两个`<span>`标签的背景属性应用这两个图像`<input>`，如下所示

```
<span class="right-side-BG-image-for-test-box>
    <span class="left-side-BG-image-for-test-box>
       <input/>
    </span>
</span> 
```

当我聚焦或单击文本框时，我使用 jQuery 将类添加`focus`到标签周围的两个跨度中`<input>`，并给出不同的`background`图像（左和右）以突出显示文本框已聚焦。

我的问题是，通过使用四个 img 标签（在具有源属性的文本框之前引用具有`display:none`css 属性的这四个图像（两个普通图像和两个焦点图像）的图像路径，是否会提高图像的加载时间？，因为我不希望用户在用户单击文本框时在加载焦点图像时遇到一些时间延迟？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:48:00.337

尝试尽快预加载焦点图像但不要显示它

```
<img src='home-focus.jpg' style='display:none;'>
<img src='about-focus.jpg' style='display:none;'> 
```

这将确保图像已经加载到页面中，即使页面完全加载后页面实际上不需要显示它。

一旦 jquery/javascript 需要图片，浏览器将不再请求图片资源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:55:59.447

您可以在其中使用图像，`background`然后将其提供`background:none;`给您的`input:focus`班级

**CSS**

```
input{
background:url('xxx.jpg') no-repeat 0 0;
}

input:focus{
background:none;
} 
```

# scala - Akka 在响应非 Actor 代码时避免包装未来

> ID：12455764
> 
> 赞同：6
> 
> 时间：2012-09-17T08:43:30.777
> 
> 标签：scala, akka, future

我正在用 Akka 2 制作一个小型缓存演员，为了让演员不被阻塞，我在期货中执行所有计算。然而一个问题是这个actor还需要与它本身不在actor中的代码进行交互，所以我需要使用“ask”模式来获取一个值。

我的问题是，在使用询问模式时，如何避免将计算的 Future 包装在另一个 Future 中？

例如

```
val f = myCache ? GetOrCalc("myKey", myCalculation) // this will be a Future[Future[...]] but I would like a Future[...]

// meanwhile, inside the actor
def receive = {
    case GetOrCalc(key, calculation) =>
        if (keyNotExists) sender ! Future { calculation() } // calculation() is long-running
        else sender ! cacheMap(key)
} 
```

理想情况下，我可以使用 Future.pipeTo 函数，但恐怕这不会被视为非参与者代码的“响应”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T15:27:00.087

这是解决方案：

```
val f = myCache ? GetOrCalc("myKey", myCalculation)

def receive = {
    case GetOrCalc(key, calculation) =>
        if (keyNotExists) Future { calculation() } pipeTo sender
        else sender ! cacheMap(key)
} 
```

Send-And-Receive-Future">http://doc.akka.io/docs/akka/2.0.3/scala/actors.html#Ask_Send-And-Receive-Future

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T09:21:18.857

将 onComplete 添加到计算未来。

```
def receive = {
    case GetOrCalc(key, calculation) =>
        if (keyNotExists) // calculation() is long-running
            Future { calculation() } onComplete {
                case Right(result) => result match {
                        case Some(value) => sender ! value
                        case None => sender ! Status.Failure(new Exception("Cannot find the value"))
                    }
                case Left(ex) =>
                    sender ! Status.Failure(ex)

            }
        else sender ! cacheMap(key)
} 
```

还有一篇关于使用Akka搭建缓存系统的文章。[http://letitcrash.com/post/30509298968/case-study-an-auto-updating-cache-using-actors](http://letitcrash.com/post/30509298968/case-study-an-auto-updating-cache-using-actors)

# actionscript-3 - 空格键递增字符串值

> ID：12455770
> 
> 赞同：0
> 
> 时间：2012-09-17T08:43:56.473
> 
> 标签：actionscript-3

如何在字符串中从用户那里获取输入时处理空格键。我的代码是

```
btnSearch.addEventListener(MouseEvent.CLICK, getData);
function getData(event:MouseEvent)
{
   var input:String = textfieldName.text; 
   if((input != null)&&(input.length != 0)&&(input != "")) 
   { 
       func(input); 
   } 
} 
```

当用户按退格键时，调用 func 并且输入字符串长度增加了单击空格键的次数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:52:23.160

您首先要做的是验证输入，例如您可以修剪所有空白（您也可以在文本字段上执行此操作，例如通过将允许的字符应用于限制属性

```
textfieldName.restrict = "0-9";//this will restrict to only integer values 
```

要剥离您的 getData 处理程序，您可以执行以下操作：

```
//trim begin
while(input && input.charAt(0) == " ")
{
    input = input.substr(1);
} 
```

在您从文本字段读取输入值之后放置。

最好的祝福

# php - 扫描PDF文件并通过php上传

> ID：12455772
> 
> 赞同：0
> 
> 时间：2012-09-17T08:44:11.273
> 
> 标签：php, javascript

通过扫描仪进纸器扫描后如何上传pdf文件？我正在使用[OCX](http://www.chestysoft.com/ximage/default.asp) 插件将图像上传到服务器，但在我正在处理的应用程序中，我必须将 PDF 文档上传到服务器。即使不是免费的，您能否建议我插件或库，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:48:43.430

引用我的评论

> 使用 PHP 我很确定这是不可能的，让用户扫描 PDF 然后上传 PDF 怎么样？

例如，您可以让他们将所有 PDF 扫描为`.jpeg`'s 甚至`.pdf`'s，然后正常上传。

但是，您可以查看支持此功能的 Internet Explorer 的 ActiveX 插件。

[http://www.codeproject.com/Articles/45241/How-to-Scan-Tiff-and-PDF-from-the-Web](http://www.codeproject.com/Articles/45241/How-to-Scan-Tiff-and-PDF-from-the-Web)

或通过 FTP 上传到 Web 服务器的第三方软件：

[http://www.z-scan2send.com/scan-to-web.html](http://www.z-scan2send.com/scan-to-web.html)

对于 Chestysoft 的 csXImage，我认为不存在支持 PDF 的插件，但它可以编写 PDF。见[http://www.chestysoft.com/ximage/manual.htm#sect1.8.9](http://www.chestysoft.com/ximage/manual.htm#sect1.8.9)

> csXImage 可以将图像保存为 PDF 文件。图像总是每页保存一个，页面大小设置为图像大小。

进一步了解手册：

> 支持以下文件类型：.bmp、.gif、.jpg、.jpeg、.jpe、.png、.wbmp、.wbm、.pcx、.psd、.tif 和 .tiff。

# c# - 补丁法线算法

> ID：12455773
> 
> 赞同：7
> 
> 时间：2012-09-17T08:44:11.990
> 
> 标签：c#, wpf, 3d, patch, normals

我正在努力重现一个**名为“patchnormal”的 MATLAB 算法**，它首先计算所有面的法线向量，然后根据面的角度加权的面法线计算顶点法线。（见下图）

在面向此类数学用途的 WPF C# 中似乎没有可用于 3D 网格的免费库。**或者有吗？**

**所以问题是：** 如何为我的所有顶点计算这个（红色）向量？是否可以对其进行优化以用于实时仿真？

[![PatchNormal 插图图像](../Images/9c6b74c7431729233cbfaf24a4f9a985.png)](https://i.stack.imgur.com/kHm8s.png)
[（来源：[hostingpics.net](http://img15.hostingpics.net/pics/820428PatchNormals.png)）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:42:20.617

您可以计算两条边之间的角度，如下所示：

```
given:  edge vectors E and F for a given face of your vertex,

E_normalized = normalize(E)
F_normalized = normalize(F)
cross_normal = cross(E_normalized, F_normalized)
sin_theta = length( cross_normal )
cos_theta = dot(E_normalized, F_normalized)

results:
    face normal = normalize(cross_normal)
    face angle theta = atan2(sin_theta, cos_theta) 
```

然后，相应地加权法线：

```
total_vector = vec(0,0,0)
for(each face adjacent to a particular vertex):
    [compute normal and theta as above]
    total_vector += normal * theta
return normalize(total_vector) 
```

为了实时优化，我会首先分析一下到底是什么让事情变慢了。我猜想`atan2()`每个顶点计算多次可能会很昂贵，但改进它确实需要找到一些替代角度加权法线的方法。

# javascript - 如何在javascript中调用电话插件

> ID：12455774
> 
> 赞同：0
> 
> 时间：2012-09-17T08:44:14.850
> 
> 标签：javascript, cordova, cordova-2.0.0

好的，我正在尝试实现一个电话间隙插件，它由两部分组成。我正在使用cordova 2.0.0 和eclipse。

这是java部分：

```
package org.apache.cordova;

 import java.io.File;
    import java.io.FileOutputStream;
import java.io.IOException;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;

import android.graphics.Bitmap;
import android.os.Environment;
import android.view.View;

public class Screenshot extends Plugin {

    @Override
    public PluginResult execute(String action, JSONArray args, String callbackId) {
        // starting on ICS, some WebView methods
        // can only be called on UI threads
        final Plugin that = this;
        final String id = callbackId;
        super.cordova.getActivity().runOnUiThread(new Runnable() {
            //@Override
            public void run() {
                View view = webView.getRootView();

                view.setDrawingCacheEnabled(true);
                Bitmap bitmap = Bitmap.createBitmap(view.getDrawingCache());
                view.setDrawingCacheEnabled(false);

                try {
                    File folder = new File(Environment.getExternalStorageDirectory(), "Pictures");
                    if (!folder.exists()) {
                        folder.mkdirs();
                    }

                    File f = new File(folder, "screenshot_" + System.currentTimeMillis() + ".png");

                    FileOutputStream fos = new FileOutputStream(f);
                    bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
                    that.success(new PluginResult(PluginResult.Status.OK), id);

                } catch (IOException e) {
                    that.success(new PluginResult(PluginResult.Status.IO_EXCEPTION, e.getMessage()), id);
                }
            }
        });

        PluginResult result = new PluginResult(PluginResult.Status.NO_RESULT);
        result.setKeepCallback(true);
        return result;
    }

} 
```

这是javascript部分：

```
cordova.define("cordova/plugin/screenshot", function(require, exports, module) {
    var exec = require('cordova/exec');

    /**
     * This class exposes the ability to take a Screenshot to JavaScript
     */
    var Screenshot = function() {};

    /**
     * Save the screenshot to the user's Photo Library
     */
    Screenshot.prototype.saveScreenshot = function() {
        exec(null, null, "Screenshot", "saveScreenshot", []);
    };

    var screenshot = new Screenshot();
    module.exports = screenshot;

});

if (!window.plugins) {
    window.plugins = {};
}
if (!window.plugins.screenshot) {
    window.plugins.screenshot = cordova.require("cordova/plugin/screenshot");
} 
```

我试图在另一个页面上用另一个 javascript 函数调用它，但没有成功。我将图像的锚点隐藏在画布上，然后是这一行：

```
setTimeout(takeScreenShot,500); 
```

**编辑**——在西蒙麦克唐纳的回答之后做出的，这与一个javascript函数有关：

```
function takeScreenShot() {
window.plugins.screenshot.saveScreenshot();
} 
```

以下 java 打印：

```
System.out.println(folder);
System.out.println("screenshot_" + System.currentTimeMillis() + ".png"); 
```

产生以下结果：

```
/mdt/sdcard/Pictures
screenshot_1347893081276.png 
```

**编辑**关闭并再次打开设备后，我拍摄的屏幕截图出现了，手机似乎缓存了它们，并没有实际将它们存储到所选文件夹中。

我已确保我的 config.xml 和我的 android 清单具有正确的权限和代码行。有人看到我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:20:11.820

您的代码中没有任何地方调用过 saveScreenshot 方法。您的 takeScreenShot 方法应如下所示：

```
function takeScreenShot() {
    window.plugins.screenshot.saveScreenshot();
} 
```

然后屏幕截图应保存在“/sdcard/Pictures”中。这将在以下情况下起作用：

1.  您记得在 config.xml 中为屏幕截图插件添加了一个插件行
2.  您提到这是在另一个页面上，因此请确保该页面具有 screenshot.js 的脚本标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T15:24:04.657

您是否尝试过绝对路径？

```
File sdCard = Environment.getExternalStorageDirectory();
File folder = new File (sdcard.getAbsolutePath() + "Pictures"); 
```

# jsp - 关于插入数据库

> ID：12455775
> 
> 赞同：-1
> 
> 时间：2012-09-17T08:44:18.727
> 
> 标签：jsp, jdbc

我正在尝试从注册 jsp 页面的数据库 swingmail 中插入 Dealer_Register 表，但是这些值没有被插入，你能告诉我的程序中是否有任何异常出现，请告诉原因

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package testing;
import java.io.*;
import java.sql.*;
import javax.servlet.*;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author Admin
 */

public class regdbservlet extends HttpServlet {
 /*  private static String algorithm = "DESede";
        private static Key key = null;
        private static Cipher cipher = null;

 private static byte[] encrypt(String input)throws Exception {
            cipher.init(Cipher.ENCRYPT_MODE, key);
            byte[] inputBytes = input.getBytes();
            return cipher.doFinal(inputBytes);
        }
*/
    /** 
     * Processes requests for both HTTP <code>GET</code> and <code>POST</code> methods.
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse res)
    throws ServletException, IOException {
       /* key = KeyGenerator.getInstance(algorithm).generateKey();
        cipher = Cipher.getInstance(algorithm);

        response.setContentType("text/html;charset=UTF-8");*/
        PrintWriter out = res.getWriter();
        String firstname=request.getParameter("firstname");
        String surname=request.getParameter("surname");
        String email=request.getParameter("email");
        String zipcode=request.getParameter("zipcode");
        String userId=request.getParameter("userId");
        String dealer_password=request.getParameter("dealer_password");
        String town=request.getParameter("town");
        String country=request.getParameter("country");
        //String input = dealer_password;
         //byte[] encryptionBytes = encrypt(input);
        //String passw=new String(encryptionBytes);
        String url = "jdbc:microsoft:sqlserver://localhost:1433;DatabaseName=swingmail";
        String user = "sa";
        String pwd = "sa";

        Connection con=null;
       // Statement st=null;
        //ResultSet rs=null;
        try {
              Class.forName("com.microsoft.jdbc.sqlserver.SQLServerDriver");
              con =  DriverManager.getConnection(url,user,pwd);
              //String sql = "INSERT INTO memory VALUES ('" + surname + "','" + firstname + "'," + userId + ","+ zipcode +",'"+ email +"','"+ dealer_password +"','"+ town +"','"+ country +"')" ;
              String sql = "insert into  Dealer_Register values (?,?,?,?,?,?,?,?)";
              PreparedStatement ps =con.prepareStatement(sql);
              ps.setString(1, surname);
              ps.setString(2, firstname);
              ps.setString(3, userId);
              ps.setString(4, zipcode);
              ps.setString(5, email);
              ps.setString(6, dealer_password);
              ps.setString(7, town);
              ps.setString(8, country);
              out.println("<html>");
              out.println("<head>");
              out.println("<title>Servlet regdbservlet</title>");
              out.println("</head>");
              out.println("<body>");
              out.println("<h1>Servlet regdbservlet at " + request.getContextPath () + "</h1>");
              out.println("</body>");
              out.println("</html>");

        }
         catch(Exception  cnfe){
            cnfe.printStackTrace();
        }
        finally {
            out.close();
        }
    }
        // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /** 
     * Handles the HTTP <code>GET</code> method.
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
                   processRequest(request, response);

    } 

    /** 
     * Handles the HTTP <code>POST</code> method.
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {

            processRequest(request, response);

    }

    /** 
     * Returns a short description of the servlet.
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:46:45.360

你永远不会执行你的语句：

```
ps.executeUpdate(); 
```

您也不提交连接：

```
con.commit(); 
```

并且连接真的应该在 finally 块中关闭。您应该始终关闭您打开的连接。

注意：我真的建议避免注释代码部分。在插入语句中依赖列的默认顺序也是不好的做法。该声明应如下所示

```
insert into Dealer_Register (id, foo, bar, baz, ...) values (?,?,?,?,?,?,?,?) 
```

最后，请尊重 Java 命名约定。Java 中的类以大写字母开头。

# apache - Customiz Apache solr 自动完成模块

> ID：12455777
> 
> 赞同：1
> 
> 时间：2012-09-17T08:44:20.320
> 
> 标签：apache

我想将 apache solr 自动完成关键字建议显示为如下组：-

----来自texonomy的建议-----

*   学期1

*   学期2

*   第三学期

----来自产品的建议---

*   产品3

*   产品4

*   产品10

----来自页面的建议---

*   内容X

*   内容Y

*   内容Z

实际上我是drupal的新手，所以有人可以帮助我怎么可能。

# c++ - 在 std::vector 中某个值的元素之前插入一个元素

> ID：12455779
> 
> 赞同：2
> 
> 时间：2012-09-17T08:44:32.400
> 
> 标签：c++

您能否建议一种在 std::vector 中的另一个值之前插入一个值的更好方法：

```
template<class T>
void insert(std::vector<T>& container, const T& valueToInsertBefore, const T& valueToInsert)
{
    std::vector<T>::iterator i = container.begin();
    std::vector<T>::iterator end = container.end();
    for(;i!=end;++i)
    {
        if(*i==valueToInsertBefore)
        {
            i = container.insert(i, valueToInsert); 
            i++;                                
            end = container.end();                  
        }
    }

} 
```

**更新：**

应该为在 std::vector 中找到的每个 valueToInsertBefore 实例插入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:47:49.867

用于[`std::find()`](http://en.cppreference.com/w/cpp/algorithm/find)定位值而不是显式循环：

```
std::vector<T>::iterator i = v.begin();
while (v.end() != (i = std::find(i, v.end(), valueToInsertBefore)))
{
    // insert() returns an iterator to the inserted element.
    // The '+ 2' moves past it and the searched for element.
    //
    i = v.insert(i, valueToInsert) + 2;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T09:30:05.520

`std::vector`由于需要重新分配，以防它相当大和/或之前插入的元素经常出现，因此可能会变得相当低效。使用这样的副本的更简单的方法可能对 CPU 更友好（以需要更多内存为代价）：

```
template<class T>
void insert(std::vector<T>& container,
            const T& valueToInsertBefore,
            const T& valueToInsert)
{
    std::vector<T> result;
    result.reserve( container.size() );

    std::vector<T>::const_iterator it, end = container.end();
    for ( it = container.begin(); it != end; ++it ) {
        if ( *it == valueToInsertBefore ) {
            result.push_back( valueToInsert );
        }
        result.push_back( *it );
    }

    container.swap( result );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:46:40.810

```
container.insert(std::find(container.begin(), container.end(), valueToInsertBefore), valueToInsert); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T08:50:49.650

你最好改变容器，列表更适合这种操作。使用插入，您有使迭代器和指针无效的风险，并且您还需要重新分配内存。

[http://www.cplusplus.com/reference/stl/vector/insert/](http://www.cplusplus.com/reference/stl/vector/insert/)

# objective-c - 合并两个 UIBezierPath 点

> ID：12455781
> 
> 赞同：1
> 
> 时间：2012-09-17T08:44:41.613
> 
> 标签：objective-c, ios5, calayer, uibezierpath, quartz-core

我希望能够从此图像中选择一些区域，并更改所选区域的颜色。

![在此处输入图像描述](../Images/495fd1ceefadddbbcc91733e4c723d4b.png)

为此，我想到了使用`CALayer`and `UIBezierPath`。

*   我已经从图像中清除了彩色区域，然后我获取了每个区域点并`UIBezierPath`在图像下方绘制了一个。
*   每个区域我有 3`CALayer`秒，每个区域`CALayer`都有一个`UIBezierPath`预定义的点。

* * *

![在此处输入图像描述](../Images/8e2315ef734dd696e9699db20d041ff0.png)

当用户点击一个图层时，它会显示所选图层而不填充`UIBezierPath`，只是在 周围有一个边框`UIBezierPath`，结果如下所示：

![在此处输入图像描述](../Images/a347011b392d351d3128d2d6ef2be784.png)

*   我`UIView`在图像上添加了一个`Opacity = 0.6f`并重新绘制了上面的所有`CALayer`s。
*   所有层都隐藏在新的`UIView`

* * *

一切都很好，下一步是合并选定的区域：

*   我从第一个区域取点并将其添加到第二个区域的点
*   我`UIBezierPath`用新点创建了一个新点

## 我的问题是结果是错误的：

![在此处输入图像描述](../Images/e788d93fdc2d0d3488cf89c0f3f109e2.png)

* * *

1.  **如何将 a`UIBezierPath`与正确的点顺序合并？**
2.  **有没有更好的方法来完成这样的事情而不使用`UIBezierPath`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:44:08.477

从上面的图片来看，路径是错误的，因为没有遵循点的**顺序**，这几乎把你的路径搞砸了。我不认为贝塞尔路径首先是执行此操作的正确工具，因为您有矩形或点对点连接。所以你有一个 Poligon 而不是 Bezier Path 对象。然而 UIKit 似乎将所有这些捆绑到一个 UIBezierPath 对象中（如果你问我，不是最佳命名）。

这里棘手的事情是找出两个形状真正相互接触的位置，并像以前一样在序列中添加点，然后撕掉中间的垂直线并将路径连接到另一个结构。

另一种选择是使用位图并简单地将位图合并并创建一个新形状。这在很大程度上取决于您的基础数据是如何表示和管理的。您也可以简单地保留两个形状，然后将它们加入一个元对象以同时绘制它们。

# javascript - 将外部 CSS 文件添加到 BoilerplateJS 项目

> ID：12455785
> 
> 赞同：2
> 
> 时间：2012-09-17T08:45:13.517
> 
> 标签：javascript, uicomponents, boilerplatejs

我正在尝试将一些 UI 组件合并到我目前正在处理的 BoilerplateJS 项目中，具体来说，我想在 BoilerplateJs 中实现这个 [http://wijmo.com/wiki/index.php/Getting_Started_with_Wijmo] 示例零件。如何将外部 css 文件添加到我的 BoilerplateJs 项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:17:40.630

有几种方法可以导入样式表。

1.  直接在索引文件中。（在您的情况下，最适合 jQueryUI 和 Wijmo 等库的样式表）
2.  作为主题，在[主题模块中](https://github.com/ectechno/boilerplatejs/tree/master/src/modules/baseModule/theme)
3.  作为模块的一部分，位于[模块文件夹](https://github.com/ectechno/boilerplatejs/tree/master/src/modules/sampleModule1/departments)中（最适合模块特定样式，例如模块内的位置和模块图像）。

对于特定于模块的样式，您可以按文件路径包含文件[（示例）](https://github.com/ectechno/boilerplatejs/blob/master/src/modules/sampleModule1/departments/component.js)：

```
Boiler.ViewTemplate.setStyleLink(cssPath); 
```

或通过 CSS 文本本身：

```
Boiler.ViewTemplate.setStyleText(cssText); 
```

# ruby - 在 Rack 应用程序中包含本地 gem

> ID：12455788
> 
> 赞同：0
> 
> 时间：2012-09-17T08:45:20.290
> 
> 标签：ruby, gem, rack

我正在创建一个机架应用程序 gem。我将我的 gem 本地包含在我的 gem 文件中，但我不能将它包含在我的`config.ru`文件中。

新宝石规范

```
# -*- encoding: utf-8 -*-
lib = File.expand_path('../lib', __FILE__)
$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)
require 'novo/version'

Gem::Specification.new do |gem|
  gem.name          = "novo"
  gem.version       = Novo::VERSION
  gem.authors       = ["Tobias Sandelius"]
  gem.email         = ["tobias@sandeli.us"]
  gem.description   = %q{TODO: Write a gem description}
  gem.summary       = %q{TODO: Write a gem summary}
  gem.homepage      = ""

  gem.files         = `git ls-files`.split($/)
  gem.executables   = gem.files.grep(%r{^bin/}).map{ |f| File.basename(f) }
  gem.test_files    = gem.files.grep(%r{^(test|spec|features)/})
  gem.require_paths = ["lib"]
end 
```

配置.ru

```
require 'novo'

# Set site root
NOVO_ROOT = Dir.pwd

run Novo::Dispatcher.new 
```

我收到以下错误：

```
`require': cannot load such file -- novo (LoadError) 
```

我错过了一些东西，但不知道是什么？

# objective-c - iPhone 的图像尺寸 - 纵向与横向

> ID：12455795
> 
> 赞同：-1
> 
> 时间：2012-09-17T08:46:01.740
> 
> 标签：objective-c, ios, image, uiimageview

我有尺寸为 320 x 480 的图像。我在这些图像的底部留了一个空白区域，以说明 iPhone 屏幕底部的标签栏。

320 x 480 在 iPhone 的纵向模式下看起来不错，但在横向模式下看起来会拉长。

这些图像以编程方式加载。

我该怎么做才能不让它们看起来很紧张，也许如何使用更高的分辨率。

我的理解是更高的分辨率意味着图像对于 iPhone 屏幕来说太大了。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:59:38.577

我想你正在使用`UIImageView`. 默认情况下`contentMode`，any 的属性`imageView`设置为`UIViewContentModeScaleToFill`这意味着它将填充整个视图，从而拉伸图像。

将其更改为 - `[imgView setContentMode: UIViewContentModeScaleAspectFit]`，这样做是为了尊重图像的纵横比。

[苹果文档中的](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/doc/c_ref/UIViewContentModeScaleToFill)更多内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:02:09.570

iPhone 和 iPad 的屏幕尺寸如下所示。根据模式，您可以创建图像大小。

苹果手机：

纵向：320x460 横向：480x300

iPad：纵向：768x1004 横向：1024x748

# java - 如何使用 Apache CXF 的工具“wsdl2java”删除包的名称

> ID：12455798
> 
> 赞同：2
> 
> 时间：2012-09-17T08:46:09.790
> 
> 标签：java, web-services, apache, cxf, wsdl2java

所以这是我的问题。

我正在使用 wsdl2java 工具将我的 Web 服务转换为 Java API。问题是，当我生成 java 存根时，我的代码包含类似的内容：

```
public void function(com.xxxxx.ssssss.Myclass myclass){...} 
```

我的问题是：

如何`com.xxxxx.sssss.`从整个代码中删除这部分“”，并将其放入导入部分，以及所有这些，而不是手动，因为它太长了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:28:09.307

这些类中的绝大多数根本不应该被编辑。只需从 WSDL 生成它们，然后不要管它们。是的，它们会很冗长，但你只需要忍受它（或者为 CXF 项目提供更好的代码生成器，当然！）

*您可以*编辑的一类是使用该选项`…Impl.java`生成的骨架 ( )。`-impl`事实上，这是您*应该*编辑的源文件，因为它将包含服务的实现逻辑，这是您的工作。只要您实现了正确的接口并拥有正确的注释，您就可以生成一次，然后可以根据需要更改它。特别是，使用重构工具来生成`import`声明非常好（我发现这在 Eclipse 中很容易做到；如果其他 Java IDE 不支持类似的东西，我会感到震惊）。

如果您开始显着更改原始 WSDL，那么唯一真正美中不足的是。虽然添加和删除方法并不难处理，但更改越大，支持的工作就越多。您可能需要仔细查看是否应该从头开始重新生成服务框架，但这将花费您所有的更改；如果您期望做很多事情，最好将服务的大部分实际实现分解到工作类中，这样您只需要重建与 SOAP 服务的实际连接。（幸运的是，使用 Spring DI 使得这种分解真的很容易管理，所以*无论如何*使用它是个好主意。）

# jquery - ajax 从服务器检索所有文件

> ID：12455807
> 
> 赞同：0
> 
> 时间：2012-09-17T08:46:49.823
> 
> 标签：jquery, ajax

嗨，我在从我的服务器调用 AJAX 时遇到了一些麻烦。

目标是我试图从我的服务器上的目录中检索所有文件，然后将它们自动填充到 js 树视图中，但我不断收到此错误：

```
GET http://url/app/webroot/files/?_=1347870792047 403 (Forbidden) jquery.min.js:4
f.support.ajax.f.ajaxTransport.send jquery.min.js:4
f.extend.ajax jquery.min.js:4
(anonymous function) index:2095
f.Callbacks.o jquery.min.js:2
f.Callbacks.p.fireWith jquery.min.js:2
e.extend.ready jquery.min.js:2
c.addEventListener.B 
```

我用来获取文件的代码如下：

```
$.ajax({
            url: "http://url/app/webroot/files/",
            type: 'GET',
            cache: false,
            dataType: 'html',
            timeout: 100000,

            success: function(data, textStatus, xhr) 
            {
                $('#tree1').tree({
                data: data
                });
            } 
```

如果我在此文件夹中指定一个文件，我可以检索它，但我如何检索此目录中的所有文件？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:55:14.770

不仅 chmod 777 适用于所有服务器，对于初学者来说，请检查服务器日志..您可能会收到（禁止）错误的另一个原因是由于用户组。确保属于当前用户的目录。一些主机添加了这种选项，例如“1&1主机”所以..如果

```
[Directory:] (belongs to Santa Clause) 
[Permission:] (777) 
```

如果您是圣诞老人的小帮手，将无法工作:)您必须像这样..

```
[Directory] (Santas Little Helper)  
[Permission] (777) 
```

使用 chown -R （尝试在服务器或 ftp 上执行此操作）而不是重试。希望这可以解决问题。您也可以尝试`dataType: script`看看情况如何。作为旁注，您可能需要服务器端脚本来提取目录的所有文件..但我可能是错的..我以前从未尝试过这个......这似乎有点危险，但它也取决于环境.

# hash - 删除字节时的 SHA 冲突概率

> ID：12455809
> 
> 赞同：2
> 
> 时间：2012-09-17T08:46:53.253
> 
> 标签：hash, cryptography, sha

我正在实现一些使用可变长度的 id 的程序。这些 id 标识一条消息并发送到将执行某些操作（与问题无关）的代理。但是，代理中此 ID 的最大长度为 24 个字节。我正在考虑使用 SHA 对 id 进行散列（在发送到代理之前）并删除一些字节，直到它仅获得 24 个字节。

但是，我想知道这会增加多少碰撞。所以这是我到目前为止得到的：

我发现对于“完美”的哈希，我们有一个公式`p^2 / 2^n+1`来描述冲突的概率，`p`消息的数量在哪里，消息`n`的大小在哪里。这是我的问题开始的地方。我假设从最终哈希中删除一些字节，函数仍然保持“完美”，我仍然可以使用相同的公式。所以假设我得到：

```
 5160^2 / 2^192 + 1 = 2.12x10^-51 
```

其中 5160 是消息的选择数，192 基本上是 24 字节中的位数。

**我的问题：**

*   我的假设正确吗？通过删除一些字节，哈希是否保持“完美”。

*   如果是这样并且由于概率非常小，我应该删除哪些字节？最重要还是最不重要？这真的很重要吗？

PS：欢迎任何其他达到相同结果的建议。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:54:39.663

> 但是，代理中此 ID 的最大长度为 24 个字节。我正在考虑使用 SHA 对 id 进行散列（在发送到代理之前）并删除一些字节，直到它仅获得 24 个字节。

SHA-1 仅输出 20 个字节（160 位），因此您需要填充它。至少如果所有字节都有效，并且您不限于十六进制或 Base64。我建议改用截断的 SHA-2。

> 我的假设正确吗？通过删除一些字节，哈希是否保持“完美”。

差不多。截断散列应该保留其所有重要属性，显然是在与较小输出大小相对应的降低的安全级别上。

> 如果是这样并且由于概率非常小，我应该删除哪些字节？最重要还是最不重要？这真的很重要吗？

这根本不重要。NIST 定义了一种截断的 SHA-2 变体，称为 SHA-224，它使用不同的初始状态获取 SHA-256 的前 28 个字节进行哈希计算。

* * *

我的建议是使用 SHA-256，保留前 24 个字节。这需要大约 2^96 次散列函数调用才能找到一个冲突。这目前是不可行的，即使对于极其强大的攻击者也是如此，而且对于意外碰撞来说基本上是不可能的。

# regex - 雅虎管道修剪所有项目标题

> ID：12455810
> 
> 赞同：1
> 
> 时间：2012-09-17T08:46:53.287
> 
> 标签：regex, truncate, yahoo-pipes

经过大量的努力，我创建了两个我将使用的 yahoo Pipes。

但是其中一个有一个小问题......我正在缩短标题长度以留出足够的空间......以及一个适合推文的链接。

它正确地修剪了第一个帖子......但是它将之后的所有帖子修剪为 0 长度（在最后添加一些额外的文本之前）。

问题是我没有在某个点之后对所有项目使用循环，但原因是输出始终是来自循环的项目，我需要输出在某个点是数字，以便我可以喂在该数字中作为变量来修剪长度。管道可以在这里找到： http://pipes.yahoo.com/pipes/pipe.info?_id= [3e6c3c6b2d23d8ce0cf66cb3efc5fb56](http://pipes.yahoo.com/pipes/pipe.info?_id=3e6c3c6b2d23d8ce0cf66cb3efc5fb56)

通常，我在顶部框中插入任何 RSS 提要，例如中间的“新博客文章：”和最后一个框中的“#bussiness #hashtags”。

如果你能看到我可以让这个雅虎管道为所有帖子工作而不仅仅是最上面的帖子，请告诉我。这没什么大不了的，因为我暂时只发帖，推特的最高帖子......但是可能会有一个点，我需要所有这些看起来都一样。

# javascript - clearTimeout 不适用于未定义的弹出框变量

> ID：12455811
> 
> 赞同：0
> 
> 时间：2012-09-17T08:46:54.350
> 
> 标签：javascript, twitter-bootstrap, timeout, coffeescript, popover

好的，所以我在 users.js.coffee 中有一些咖啡脚本，它在滚动用户名时运行 twitter 引导弹出窗口（目前正在工作）现在我想要做的是使用超时来隐藏弹出窗口，如果用户这样做不要将鼠标悬停在弹出窗口上。

这是我的代码（当前抛出 Uncaught ReferenceError: timeoutObj is not defined on scrollover of the popover）我的问题显然与 timeoutObj 变量有关，尽管它应该在 mouseleave 方法中设置？

```
$ ->
 timeoutObj = undefined
 $(".comment-user-name").popover({
   trigger: "manual"
   placement: 'top'
   template: '<div class="popover" onmouseover="clearTimeout(timeoutObj);$(this).mouseleave(function() {$(this).hide(); });"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'
 })
 $(".comment-user-name").mouseenter((event, ui) ->
   $(".comment-user-name").popover('show') 
 )
 $(".comment-user-name").mouseleave((event, ui) ->
   timeoutObj = setTimeout (-> $(".comment-user-name").popover('hide') ), 3000
 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:26:14.293

这是正确的代码：

```
$ ->
      timeoutObj = null
      $(".comment-user-name").popover(
          {
          trigger  : "manual"
          placement: 'top'
          template : '<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'
          }
      )

      $(".popover").onmouseover(
          (event, ui) ->
              clearTimeout(timeoutObj)
              $(this).mouseleave(-> $(this).hide())
      )
      $(".comment-user-name").mouseenter((event, ui) -> $(".comment-user-name").popover('show'))
      $(".comment-user-name").mouseleave((event, ui) -> timeoutObj = setTimeout (-> $(".comment-user-name").popover('hide') ), 3000) 
```

您不能在中使用 timeoutObj`'<div class="popover" onmouseover="...`

# php - PHP preg_match 检查图像

> ID：12455812
> 
> 赞同：0
> 
> 时间：2012-09-17T08:46:54.907
> 
> 标签：php, regex, preg-match

我正在使用用户选择的 wordpress 图像。它们可能会或可能不会被 wordpress 调整大小，并将它们的大小添加到图像的末尾，如下所示：

原图：image.jpg wordpress 版本：image-300x200.jpg

我将如何搜索以查看图像是否已添加到其中？最简单的方法是检查它是否在变量末尾有一个 'x' 8 个字符，但是图像中实际上可能有一个 x 的可能性很小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:50:51.770

你这个：

```
$is_resized=preg_match('|^.*-[0-9]{1,4}x[0-9]{1,4}\..*$|',$imagename) 
```

# android - Android ICS 错误：以编程方式显示包含 ListView 的屏幕，导致列表变得无法聚焦

> ID：12455813
> 
> 赞同：1
> 
> 时间：2012-09-17T08:46:57.933
> 
> 标签：android, listview, focus, android-4.0-ice-cream-sandwich

我们有 2 个屏幕：第一个屏幕包含一个用于显示下一个屏幕的按钮和一个`ListView`. 这些`ListView`项目起初是可聚焦的。但是当从第二个屏幕返回到第一个屏幕（调用`setContentView( )`）时，似乎列表无法再聚焦了。

我很确定这是一个 Android 4.0 错误，只是检查是否有其他人遇到过。这是代码片段：

```
public class ListTestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        createFirstScreen();
        createSecondScreen();

        setContentView(mFirstScreen);
    }
    public void createFirstScreen()
    {
        mFirstScreen = new LinearLayout(this);
        mNextBtn = new Button(this);
        mNextBtn.setText("Next");
        mNextBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                setContentView(mSecondScreen);
            }
        });

        mListView = new ListView(this);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                  "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                  "Linux", "OS/2" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                  android.R.layout.simple_list_item_1, android.R.id.text1, values);
        mListView.setAdapter(adapter);

        mFirstScreen.addView(mNextBtn);
        mFirstScreen.addView(mListView);
    }

    public void createSecondScreen()
    {
        mSecondScreen = new LinearLayout(this);
        mBackBtn = new Button(this);
        mBackBtn.setText("Back");
        mBackBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                setContentView(mFirstScreen);
            }
        });
        mSecondScreen.addView(mBackBtn);
    }

    private LinearLayout mFirstScreen;
    private ListView mListView;
    private Button mNextBtn;
    private Button mBackBtn;
    private LinearLayout mSecondScreen;
} 
```

# c - pthread_cancel 在 solaris 下不起作用

> ID：12455815
> 
> 赞同：1
> 
> 时间：2012-09-17T08:47:07.890
> 
> 标签：c, pthreads, solaris

```
#include <stdio.h>
#include <pthread.h>
#include <stdlib.h>
#include <string.h>

char a[]="Hello";

void * thread_body(void * param) {
        while(1)
                printf("%s\n", param);
}

int main(int argc,  char *argv[]) {
        pthread_t threadHello;
        int code;
        pthread_create(&threadHello,  NULL,  thread_body,  a);
        pthread_cancel(threadHello);
        pthread_exit(0);
} 
```

当我在 Solaris 10 (SunOS 5.10) 下编译和运行它时，它并没有停止。但在 Linux 下，它按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:33:30.763

根据 POSIX，`printf`（以及所有 stdio）*可能*是一个取消点。它不是必需的。我怀疑 Solaris 只是没有选择使其成为一体。你试过像`sleep`这里这样的另一个功能吗？

如果你真的需要`printf`被取消，你可能需要实现你自己`printf`的类似函数作为包装器`dprintf`，但如果你依赖于 stdio 的内置锁定功能，那将不会那么好。

# c# - Asp.net MVC-4 Basic 按钮点击计数页面 - 初学者

> ID：12455816
> 
> 赞同：0
> 
> 时间：2012-09-17T08:47:13.877
> 
> 标签：c#, asp.net, .net, asp.net-mvc

使用 mvc-4 基本模板，我正在创建一个带有 HTML 按钮的视图。点击后会显示。该按钮被点击了多少次。

创建模型

**ButtonTest.cs**

```
namespace testmvc4basic.Models
{
    public class ButtonTest
    {
        public int clickCount { get; set; }
    }
} 
```

创建视图 **强类型视图**

```
@model testmvc4basic.Models.ButtonTest

@{
    ViewBag.Title = "ButtonTest";
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

## 按钮测试

* * *

在尝试创建控制器时，使用对话框 ![在此处输入图像描述](../Images/bbb3f67b71f16043bec1db2723297a24.png)

**我得到不受支持的上下文类型。请问我错过了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:59:07.547

1.  如果您已经创建了数据库上下文，并且所需的上下文没有出现在添加控制器对话框的列表中 - 尝试构建解决方案，然后再次尝试添加控制器，您的模型类应该会出现。
2.  如果您没有数据库上下文，并且仍想使用相同的模板添加控制器，则需要创建从 DbContext 或对象上下文继承的数据库上下文类。
3.  或者，如果您不想使用上下文，您应该选择另一个模板而不指定任何上下文

# asp.net - 如何同时发送两个 HTTP 请求

> ID：12455818
> 
> 赞同：0
> 
> 时间：2012-09-17T08:47:28.557
> 
> 标签：asp.net, asynchronous, parallel-processing, webrequest

我创建了一个方法，它根据我提供的纬度、经度地址从 Foursquare（用于场所）和 Google（用于街道）获取数据。它旨在显示您周围的位置。然后将两个 api 的结果名称放在一个列表中

它看起来像这样：

```
 var httpFoursquareResponse = (HttpWebResponse)httpFoursquareWebRequest.GetResponse();
 var httpGoogleResponse = (HttpWebResponse)httpGoogleWebRequest.GetResponse();
 List<string> foursquarePlacesNames=getNames(httpFoursquareResponse);
 List<string> googleStreetsNames=getStreets(httpFoursquareResponse);
 var result=foursquarePlacesNames.Union(googleStreetsNames);
 return result; 
```

问题：1）我希望同时发送请求（所以我不必等待第一个得到第二个）。但是如果我使用 AsyncCallbacks，我怎么能做那个联合，因为我将有两个响应由两个不同的线程处理。

2) 如果超过 5 秒过去并且我没有来自其中一项服务的响应，我想返回我拥有的任何数据，并且不再关心响应

你将如何实施这样的事情？我认为这是一个很常见的情况，但我没有在网上找到任何解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:29:44.950

你可以使用 Asyncmanager 来做这件事。请为此获取两个链接。这会对你有所帮助。

1.http://www.devproconnections.com/article/aspnet2/calling-web-services-asynchronously

2.http://www.c-sharpcorner.com/UploadFile/rmcochran/multithreadasyncwebservice05262007094719AM/multithreadasyncwebservice.aspx

# php - 我们如何关联两个自定义字段，例如如果我在一个中选择某个值，它会自动显示在 wordpress 中的另一个中？

> ID：12455822
> 
> 赞同：0
> 
> 时间：2012-09-17T08:47:49.227
> 
> 标签：php, wordpress

我们如何关联两个自定义字段，例如如果我在一个中选择某个值，它会自动显示在 wordpress 中的另一个中？假设，我创建了两个自定义内容类型，如食谱和节目。现在我分别创建两个自定义字段（类型关系），一个在名为related_shows 的食谱下，另一个在名为related_recipes 的节目中。现在我从Recipes 中的related_shows 字段中选择一个（显示帖子）。我想要什么，当我转到 Shows 发布时，它会自动在相关食谱字段中显示该食谱，由 own.Because that Shows 我们已经在食谱（related_recipes）中分配。我们怎么能做到这一点？多对多关系，比如我们在Recipes中选择related_shows，它会自动在Shows(related_recipes)中显示该Recipes，我们不需要在那里添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:23:01.220

如果您的“自定义内容类型”是 WordPress 自定义帖子类型，您可以使用[Posts 2 Posts 插件](http://wordpress.org/extend/plugins/posts-to-posts/)将它们关联起来。它应该做你需要的。

# css - 使用lesscss的CSS变量

> ID：12455824
> 
> 赞同：1
> 
> 时间：2012-09-17T08:47:53.693
> 
> 标签：css, less

我正在阅读[lesscss.org](http://lesscss.org/#-variables)，我想知道为什么：

```
@nice-blue: #5B83AD;
@light-blue: @nice-blue + #111;
#header { color: @light-blue; } 
```

编译以下输出

```
#header { color: #6c94be; } 
```

并不是

```
#header { color: #6c93ad; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:04:06.280

这是因为 #111 是 #111111 的缩写，并准确解释了您在此处看到的内容

# php - 如何限制每分钟与我的 Web 应用程序的连接？

> ID：12455830
> 
> 赞同：1
> 
> 时间：2012-09-17T08:48:07.247
> 
> 标签：php, proxy, nginx, limiting

我尝试使用 nginx (http://nginx.org/) 来限制每分钟的请求数量。例如我的设置是：

```
server{
limit_req_zone $binary_remote_addr zone=pw:5m rate=20r/m; 
}
location{
limit_req zone=pw nodelay;
} 
```

我在 Nginx 中发现的是，即使我每分钟尝试 1 个请求，我也可以在那一分钟内多次返回。当然，快速刷新页面会给我限制页面消息，即“503 服务暂时不可用”返回码。

我想知道可以应用什么样的设置来将请求限制为每分钟 20 个请求。我不只是在寻找防洪保护，因为 Nginx 提供了这一点，例如，如果页面不断刷新，它会限制用户并在一段时间后让他们在一段时间后重新进入（除非你应用 nodelay 设置）。

如果除了 HAProxy 之外还有 Nginx 的替代品（因为它很慢）。我在 Nginx 上的设置也充当了真实站点的反向代理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:26:51.447

没错，有两件事：

1.  limit_conn 指令与 limit_conn_zone 结合使用可以限制来自 ip 的（同时）连接数（请参阅[http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_conn](http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_conn)）
2.  limit_req 指令与 limit_req_zone 结合使用可以限制每个时间单位来自给定 ip 的请求数（请参阅[http://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req](http://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req)）

笔记：

*   您需要在 http 块而不是 serverblock 中执行 limit_conn_zone/limit_req_zone
*   然后，您可以使用带有 limit_con/limit_req 设置的 etup 区域在 server/location 块内引用您在 http 块中设置的区域名称（如适当）

由于您在下面说明您希望限制请求，因此您需要 limit_req 指令。特别是要获得每分钟最多 5 个请求，请尝试添加以下内容：

```
http {
  limit_req_zone $binary_remote_addr zone=example:10m rate=5r/m;
}

server {
   limit_req zone=example burst=0 nodelay;
} 
```

注意：显然将它们添加到您现有的 http/server 块中

# javascript - SEO：使用 javascript 移动内容？

> ID：12455838
> 
> 赞同：2
> 
> 时间：2012-09-17T08:48:29.357
> 
> 标签：javascript, html, dom, seo

出于 SEO 的原因，我在 html 代码的早期放置了一段文字，但从视觉上看，这段文字应该位于页面底部。我不能只用 CSS 做到这一点。我的问题：如果我使用 javascript 移动 DOM 中的文本，这对 SEO 来说是个问题吗？没有隐藏或删除，只是移动了。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:29:57.523

如果您出于搜索引擎优化的原因将文本放在开头，但因为它不是针对用户而将其向下移动，谷歌会将其解释为对最终用户的误导。如果他们会注意到一个段落？疑。但是，如果您要采用这种常见做法，我相信这将属于 Blackhat SEO 的范畴，尽管与您**可以**做的其他事情相比它是温和的。

您必须记住，最终通过 Google 访问您网站的访问者是 Google 的客户。如果用户认为他/她被误导了，那就是谷歌做得不够好。设计时请记住这一点。

如果您正在寻找一个提示，那就是永远不要做这样的事情。如果您设计的网站和文字脚本足够好，让访问者觉得它很有用，谷歌就会看到这一点，排名也会随之而来。无论如何，这一直是我的经验——从长远来看，捷径（对我来说）从来没有奏效过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:36:53.890

任何“我希望机器能更显眼地看到内容，但让用户看不到它”的操作都简单地称为[隐藏](http://en.wikipedia.org/wiki/Cloaking)，一旦被捕获，就会对您的索引产生负面影响。

需要多少钱？取决于许多因素，包括被引诱到您的网站的用户的抱怨，如果它确实只有“SEO 原因”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:58:52.680

首先最重要的内容是良好的 SEO 实践。

您不能说移动内容本身就是不好的 SEO 做法。以维基百科的 HTML 为例。例如，HTML 中的详细信息页面（文章）的内容位于导航的 HTML 之前。机器人会更显眼地看到它，它是页面上最重要的东西，仅此而已。

另一个例子：为什么在 HTML 中首先放置内容并“向上移动”带有一些完全用 JS 编码的图像的滑块是不好的做法？像这样的东西。

在 YT 上的一个视频中，Matt Cutts 讨论了一个类似的问题，它使用 Javascript 和对话框元素来切换文本的显示（显示/隐藏），这很常见。只要使用典型的短语（开、关、更多、查看更多，诸如此类）并且您使用常用工具，您看起来就不会可疑。

像往常一样，魔鬼将在细节中。

# sql - 如何从 SQL Server 上的多个值中获取层次结构？

> ID：12455839
> 
> 赞同：0
> 
> 时间：2012-09-17T08:48:32.863
> 
> 标签：sql, sql-server, set

我有只有一列的表 RD：

```
-----
rd_id
-----
3 
2 
6 
7 
8 
```

我有两列的表 DL，这个表上存储了层次结构：

```
----------------------
dl_id     dl_parent
----------------------
1         2               
2         Null
3         Null
4         6
6         7
7         8
8         Null 
```

现在的问题是如何使用 RD 表的成员从 DL 表中获取层次结构。结果将是：

```
--------------
rd_id   dl_id
--------------
3         3

2         2

6         6
6         7
6         8

7         7
8         8

8         8 
```

从星期五开始，我一直在努力解决这个问题，但仍然无法解决它。我知道我可以使用公用表表达式从一个值遍历递归（例如，使用输入 6 创建一个函数并产生 6、7、8）。但我不知道如何使用多个值（rd_id）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:23:17.857

这会产生正确的结果。数据设置：

```
declare @RD table (rd_id int not null)
insert into @RD(rd_id) values
(3),
(2),
(6),
(7),
(8)

declare @DL table (dl_id int not null,dl_parent int null)
insert into @DL(dl_id,dl_parent) values
(1,2),          
(2,Null),
(3,Null),
(4,6),
(6,7),
(7,8),
(8,Null) 
```

和查询：

```
;with AllValues as (
    select rd_id,rd_id as dl_id from @RD
    union all
    select rd_id,dl_parent
    from AllValues av
        inner join
        @DL dl
            on
                av.dl_id = dl.dl_id
    where
        dl.dl_parent is not null
)
select * from AllValues 
```

结果：

```
rd_id       dl_id
----------- -----------
3           3
2           2
6           6
7           7
8           8
7           8
6           7
6           8 
```

解释：

在 CTE 的锚点中，我们只需`rd_id`从`@RD`表中选择两次 - 因为您的样本暗示每个输入行都应该在两列中产生具有相同值的输出行。

`@DL`然后，我们根据第二列连接到表中我们可以找到的任何匹配的父行。如果我们找到一个父项，那么我们生成一个新行，将父项值代入第二列。这一直持续到没有新的行产生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:26:27.170

您必须使用动态视图来创建递归查询，如下所示：

```
with n as (
select dl_id, dl_id as ancestor
from dbo.dl
union all
select np1.dl_id, n.ancestor
from dl as np1 , n
where n.dl_id = np1.dl_parent)
select * from n
where dl_id in (select rd_id from rd)
order by dl_id, ancestor 
```

# cakephp - cakephp 中的“重复密钥更新”

> ID：12455847
> 
> 赞同：1
> 
> 时间：2012-09-17T08:49:20.350
> 
> 标签：cakephp

INSERT INTO table1 ('id','name','cust_id','add') 值 ('5','RENJITH','5','2012-08-04 15:07:38') ON DUPLICATE KEY UPDATE 'cust_id'='5' WHERE 'table1.id' IN ('1','2','3')

> **在 cakephp 中制作？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:00:14.037

像这样的东西应该在模型类中工作：

```
//check if key duplikates
$duplicate = $this->find('first', array('conditions' => array('Model1.id' => 5)));

if($duplicate) {
  $this->updateALL(array('Model1.cust_id' =>5), array('Model1.id' => array(1,2,3)));
} else {
  $data['Model1'] = array('Model1.id' = 5, 'Model1.name' => 'RENJITH','Model1.cust_id' => 5, 'Model1.add' => strtotime('2012-08-04 15:07:38'));

  $this->create();
  $this->save($data);
} 
```

# html - CSS顶部：xx；mac/windows 的区别

> ID：12455848
> 
> 赞同：0
> 
> 时间：2012-09-17T08:49:32.430
> 
> 标签：html, css

我的网站在 Mac 上的外观与 Windows（每个浏览器）上的不同，所以它不应该是浏览器的问题，而是 Mac/Windows 的问题：

这是我的代码：

```
height: 359px;
top: 243px;
overflow: hidden;
width: 100%;
position: absolute;
left: 0px;
text-align: center;
z-index: 10; 
```

所以没什么特别的，但这在mac上看起来不错，但在windows中它看起来不错：

```
top: 271px; 
```

有28px的差异，...为什么？

那么，我如何才能仅在 mac 或 windows 上定位（所有浏览器） - 还是有其他解决方案？

# c# - 接口：没有 Getter 的 Setter

> ID：12455849
> 
> 赞同：19
> 
> 时间：2012-09-17T08:49:32.630
> 
> 标签：c#

我最近遇到了一个接口，它只定义了一个像这样的 setter：

```
public interface IAggregationView
{
   DataTable SetSiteData { set; }
} 
```

我对此进行了查询，相信这是微软提倡的WebPart设计（针对SharePoint）的做法之一。事实上，这个例子是直接从他们的例子中复制而来的。

我认为这是一个不好的模式，我不明白为什么有人应该能够设置一个值，然后不能再次读取它，我相信一个 setter 应该总是伴随着一个 getter（但不一定是其他方式）。

我想知道是否有人可以解释只有一个二传手的好处，为什么微软可能会在这种情况下建议它，以及它是否真的是一个值得遵循的好模式？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-17T08:58:00.717

有两种情况我可以看到这可能是合理的：

1.  无法获取值*，*例如密码；但是，我个人会用一种`void SetPassword(string)`方法代替它
2.  它设计的 API*不需要*读取该值，并且纯粹是为了公开所需的最低 API

关于我的第一点，如果使用 API 本质上是一个为属性分配值的自动映射器，则该`Set...` *方法可能并不理想；*在那种情况下，属性确实更可取。

关于您的“我不明白为什么有人应该能够设置一个值，然后就无法再次读取它”-但是，在同一点上，可以争辩说设置该值的人*已经知道该值*（他们设置它），所以他们没有**要求**这样做。

但是，是的; 拥有一个仅设置的属性是非常不寻常的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-17T09:16:32.360

`get`和在接口属性中的作用与`set`类中的作用略有不同。

```
public interface IAggregationView
{
   DataTable SetSiteData { set; }
}

class AggregationViewImp : IAggregationView
{
   public DataTable SetSiteData { get; set; }  // perfectly OK
} 
```

该接口指定该属性*至少*应该有一个公共设置器。getter 的定义和可访问性留给实现类。

所以如果接口合约只需要写，`get`可以保持打开状态。无需要求公共吸气剂。

因此，您也不能真正在接口中指定只读属性。只有“至少读取权限”。

```
interface IFoo
{
    int Id { get;  }
}

class Foo : IFoo
{
    public int Id { get; set; }  // protected/private set is OK too
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-17T11:49:50.103

我可以想象将它用于（手动）依赖注入。一个类可能需要注入一个仅在内部使用的协作者。当然，通常会选择在类的构造函数中执行此操作，但有时可能希望在运行时更改协作者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T09:03:48.490

实现该接口的类可以添加一个 getter。该属性的大多数使用可能是通过实现类，而不是通过接口本身。在这种情况下，大多数代码都可以获取和设置属性。接口的唯一原因可能是有一些通用代码访问一个类族的方法/属性的公共子集。该代码只需要设置器，而不需要获取器。界面记录了这一事实。

接口只是声明一组“原子需要”操作的工具（例如，如果您需要调用方法 A，则需要读取属性 B 并设置属性 C）。

与往常一样，*这取决于*.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T08:55:25.697

根据我的经验，此类接口的出现是由于某些特殊需要，而不是出于架构原因。例如，在 ASP.NET 应用程序中，当人们想要维护全局状态时，有时会从这样的接口派生 Global.asax 生成的类型。有人可能会在应用程序的单独部分创建初始化值，并需要将其发布到全局位置。

我通常喜欢用一个`SetXxx`方法替换一个只设置的属性，并让该方法检查它最多被调用一次。这样我就清楚地执行了“初始化风格”，它的气味要少得多（恕我直言）。

当然，一个人不能设置*永远不会*产生这样的东西，但它是应该避免的，并且肯定会在代码审查期间提出问题。

# lua - 如何从 corona sdk 的图库中获取图像？

> ID：12455850
> 
> 赞同：0
> 
> 时间：2012-09-17T08:49:41.490
> 
> 标签：lua, coronasdk

在我的应用程序中，我如何从图库中获取图像并将其与我的应用程序一起使用。请帮助我，我在网上搜索我无法得到明确的答案。给出一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:49:28.210

你可以使用[media.show](http://docs.coronalabs.com/api/library/media/show.html)

```
media.show( media.PhotoLibrary, listener) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-17T23:22:25.553

对不起，但你不能。

你可以保存到画廊虽然......

# common-lisp - 我可以为 shell 命令指定目录吗？

> ID：12455851
> 
> 赞同：1
> 
> 时间：2012-09-17T08:49:43.007
> 
> 标签：common-lisp, sbcl, ccl, ecl

我使用以下函数来运行 shell 命令：

```
(defun sh (cmd)
  #+clisp (shell cmd)
  #+ecl (si:system cmd)
  #+sbcl (sb-ext:run-program "/bin/sh" (list "-c" cmd) :input nil :output*standard-output*)
  #+clozure (ccl:run-program "/bin/sh" (list "-c" cmd) :input nil :output*standard-output*))) 
```

例如，如何为命令指定当前目录`python -m CGIHTTPServer` ？

真挚地！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:22:22.653

在 ECL 中，您可以在 SYSTEM 之前使用 EXT:CHDIR，它会更改*默认路径名默认值*和当前目录的值，正如操作系统和 C 库所理解的那样。

顺便说一句：如果可能，请改用 (EXT:RUN-PROGRAM "command" list-of-args)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T18:15:38.497

一种更便携的方法是使用*路径名*和动态绑定`*default-pathname-defaults*`，这将有效地设置您当前的工作目录。我今天遇到了同样的问题。以下是 Conrad Barski 对 Land of Lisp 文本的工作改编`dot->png`，*它*指定了当前工作目录：

```
(defun dot->png (filespec thunk)
  "Save DOT information generated by a thunk on a *STANDARD-OUTPUT* to a FILESPEC file. Then use FILESPEC to create a corresponding png picture of a graph."
  ;; dump DOT file first
  (let ((*default-pathname-defaults*
          (make-pathname :directory (pathname-directory (pathname filespec)))))
    ;; (format t "pwd (curr working dir): ~A~%" *default-pathname-defaults*)
    (with-open-file (*standard-output* 
                     filespec
                     :direction :output
                     :if-exists :supersede)
      (funcall thunk))
    #+sbcl
    (sb-ext:run-program "/bin/sh" 
                        (list "-c" (concatenate 'string "dot -Tpng -O " filespec))
                        :input nil
                        :output *standard-output*)
    #+clozure
    (ccl:run-program "/bin/sh" 
                     (list "-c" (concatenate 'string "dot -Tpng -O" filespec))
                     :input nil
                     :output *standard-output*))) 
```

发布希望这对处于类似情况并在此线程中运行的人有用。

# c++ - 通过 c++ 接口导出整个类

> ID：12455852
> 
> 赞同：-2
> 
> 时间：2012-09-17T08:49:44.597
> 
> 标签：c++, winapi, visual-c++, dll

好的，我将重写问题。1\. 做够了吗

```
class __declspec(dllexport) CXyz {
public:
int Food() {printf("Food\n");}
}; 
```

这样该类就可以在 exe 中像这样使用：

```
#include "CXyz.h"
CXyz obj;
obj.Food(); 
```

2.当我做CXyz x（成员和方法代码分配）时会发生什么，我的意思是它是否分配了一个大小为（近似成员大小+方法的函数指针）的线性结构，并且方法代码在.code部分的程序？当我执行 CXyz *pX 时会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:50:21.607

1.  不够。在客户端，CXyz 必须声明为 __declspec(dllimport)。这通常通过条件编译来完成，当某些宏在 Dll 中扩展为 __declspec(dllexport) 并在客户端项目中扩展为 __declspec(dllimport) 时。使用 VS 应用程序向导创建示例 Dll，在向导步骤之一中选中“导出符号”，然后查看它是如何完成的。当然，客户端项目应该与服务器 .lib 文件链接，并且服务器 Dll 应该在运行时可用。

2.  仅分配类成员（可能还有 vtable）。汇编级别的类方法是具有隐藏“this”参数的全局函数。

# javascript - 如何测试ajax错误回调？

> ID：12455853
> 
> 赞同：17
> 
> 时间：2012-09-17T08:49:48.137
> 
> 标签：javascript, jquery, selenium, qunit

在 ajax 请求中如何测试错误回调？是否可以模拟网络连接错误？

```
 $.ajax({
        url: "myUrl",       
        type: 'post',
        dataType : "json",
        data : ({
            myJson
        }),
        success : function(jsonSaveResponse) {  

        },
        error: function (xhr) {

    } 

    }); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-17T09:43:41.180

您可以简单地将不正确的 URL 放入 AJAX 调用的 URL 属性中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T08:51:54.020

我所做的只是在发出 AJAX 请求之前关闭服务器，这将模拟服务器没有响应。

请记住，您需要重新打开它才能刷新以进行更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:54:16.417

您必须存根 ajax 请求，并返回将触发错误回调的自定义响应。[您可以使用Jasmine](http://pivotal.github.com/jasmine/)等 Javascript 测试框架轻松完成此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-13T16:34:22.397

如果您的 URL 是 PHP 页面，您可以执行以下操作：

```
<?php
    header("HTTP/1.0 404 Not Found");
    exit();
    //the rest of your code 
```

当您测试完错误函数后，您可以简单地将其注释掉。

# php - 从 file_get_contents() 获取 URL

> ID：12455855
> 
> 赞同：0
> 
> 时间：2012-09-17T08:49:56.250
> 
> 标签：php, api

我正在为一项服务编写 API，现在我需要限制对某些 URL 的一些调用。假设您是用户并且您选择只有 stackoverflow.com 可以看到您的信息，或者 stackoverflow.com、facebook.com 和 google.com 不能看到您的信息。

我在后端有系统（白名单与黑名单），但现在我需要找到一种方法从调用中获取 URL。

是的，有些人会使用 curl，这很容易，但很多人会简单地使用 file_get_contents()，而且这个 API 有图像输出，所以有些人会使用

```
<img src="http://domain.com/api/something.jpg" /> 
```

任何想法如何获取 url，而无需开发人员将 url 实际编码为调用 url？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:55:23.590

检查请求客户端的 IP 地址 ( `$_SERVER['REMOTE_ADDR']`)。您可以将允许连接到您的 API 的服务器的 IP 地址列入白名单。对于图像输出，您可以使用`$_SERVER['HTTP_REFERER']`并确保它来自您已列入白名单的域。

但是，我不推荐这种实现方式。您应该使用 API 密钥。这些就像使用您的 API 为客户提供的密码。只有拥有 API 密钥的人才能访问您的 API。同时，当他们的服务器更改 IP 地址时，他们仍然能够访问您的 API。

# iphone - IOS 删除应用程序所需的时间

> ID：12455856
> 
> 赞同：-1
> 
> 时间：2012-09-17T08:49:57.920
> 
> 标签：iphone, cocoa-touch

我想知道程序员是否可以做些什么来加快 IOS 删除应用程序的时间。我实际上指的是按下“x”删除按钮所需的时间和出现对话框的时间。我的猜测是，这是操作系统对应用程序的文件大小进行一些计算时，存储在应用程序包中的文件总数可能会影响删除过程，但我想确定是这种情况。我找不到任何参考。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:57:50.070

> 我的猜测是，这是当操作系统对应用程序的文件大小进行一些计算时，存储在应用程序包中的文件总数可能会影响删除过程

你可以做一个简单的测试来验证这个假设是否正确。

1.  长按应用程序图标；当“x”出现时，点击它；等到对话框出现；

2.  转到另一个应用程序并执行相同的操作；

3.  转到另一个应用程序并执行相同的操作；

4.  ...

为了使测试更“有说服力”，您可以在步骤 2/3/... 选择一个应用程序，您知道该应用程序在本地存储许多文件并且具有大量文件。

就我而言，我已经看到第一次出现对话框需要相当长的时间。随后，对话框将几乎立即出现。

所以，我不认为这取决于应用程序；而是关于设备的状态，需要释放一些内存，加载一些代码等......一旦完成，这很快，直到再次释放。

所以，遗憾的是，我不认为开发人员可以做任何事情来减少点击“x”和出现对话框之间的时间。

# html - html 元标记，避免浏览器 url 改变

> ID：12455858
> 
> 赞同：-1
> 
> 时间：2012-09-17T08:50:00.383
> 
> 标签：html, spring, model-view-controller, jsp

我在我的 spring mvc 应用程序的 jsp 页面中有以下 url，我的控制器向一个 jsp 前进，它具有以下内容：

```
 <meta http-equiv="refresh" content="0;URL='/app/static/test'" 
```

这会导致页面正确加载，但是浏览器 url 会发生变化。

是否可以避免网址更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:57:29.243

刷新元标记触发 GET /app/static/test （就像您在浏览器的地址字段中键入它一样）。没有办法避免它。

# jquery - 为什么这个 jQuery UI sortreceive 事件没有触发？

> ID：12455859
> 
> 赞同：0
> 
> 时间：2012-09-17T08:50:03.770
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-sortable

我有一个可拖动的绑定到多个可排序对象。可排序的所有表行（“spec_row”类）并正确连接到可拖动。

我正在使用委托绑定来管理可排序事件。以下是一些示例绑定：

```
$("div#tabs").on("sortstart", "tr.spec_row", function(event, ui) { alert("start"); });
$("div#tabs").on("sortchange", "tr.spec_row", function(event, ui) { alert("change"); });
$("div#tabs").on("sortstop", "tr.spec_row", function(event, ui) { alert("stop"); }); 
```

在上述所有事件中，都会按预期弹出相应的警报消息。但是由于某种原因，“sortreceive”事件没有执行：

```
$("div#tabs").on("sortreceive", "tr.spec_row", function(event, ui) { alert("receive"); }); 
```

真正让我困惑的是，我以前使用 ID（而不是类）来唯一标识规范行（但由于超出此问题范围的原因而不得不更改为类）。当我使用 ID 时，“sortreceive”事件执行得很好。

对于它的价值，我使用的是 jQuery UI 1.8.16（并且没有我可以看到的错误报告）。

我会从南非一路寄一张明信片（明信片上有狮子和大象什么的）给能解决这个问题的人！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:31:28.677

试试这个：http: [//jsfiddle.net/aamir/zXGL8/2/](http://jsfiddle.net/aamir/zXGL8/2/)

# javascript - javascript中的事件处理问题

> ID：12455862
> 
> 赞同：0
> 
> 时间：2012-09-17T08:50:07.747
> 
> 标签：javascript, html, dom, javascript-events

有一个文本框与**onkeyup**事件侦听器相关联（一个 JavaScript 函数，比如说提醒某些东西）。举个例子——

```
<input type='text' name='text1' onkeyup='exec(this.value);'/>
<script>
exec = function(textdata) { alert(textdata); }
</script> 
```

在这种情况下，每次用户敲击键盘上的东西时都会出现警报消息。

是否有任何处理方式，事件处理程序仅在几秒钟不活动后才会继续。也就是说，在这种情况下，只有当用户输入了长文本并且正在考虑是否要添加更多内容时，才会出现警报消息。例如，他输入他的名字并等待 2 秒钟，然后出现警报消息，并且在他输入他的名字的每个字母时不会出现警报消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:07:56.520

您需要使用`onkeyup`而不是`onchange`希望每次按下键时都运行一个函数。试试这个你想要的功能

```
<input type='text' name='text1' onkeyup='exec(this.value);'/>
<script>

var timer; //This needs to be a global variable

exec = function(textData){

  clearTimeout(timer);

  timer = setTimeout(function(){ alert(textData) }, 2000);  
}
</script> 
```

每次用户按下一个键（在文本框中输入一个字符）时，都会调用该函数并清除计时器。然后将计时器设置为在 2 秒后提醒文本框的值，如果他们在 2 秒过去之前再次按下任何键，则计时器将重置。[这](http://jsfiddle.net/yMFts/)是一个工作的jsFiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:04:07.263

在您的代码中，仅在您每次离开文本框时才会提醒文本。这就是 的行为`onchange`。你需要在它被触发之前失去对它的关注。

`onkeyup`每次`alert()`用户在文本框中按下某些东西时。

# c# - 从 C# 中的 Listview 标签获取标签文本值

> ID：12455867
> 
> 赞同：0
> 
> 时间：2012-09-17T08:50:23.380
> 
> 标签：c#, listview

**C＃**

```
protected void imgbtn5_Click(object sender, EventArgs e)
{
    Session["theme"] = lbl5.Text;
    foreach (ListViewItem item in theme5.Items)
    {
        Label country = (Label)item.FindControl("lblcountry");
        Session["country"] = country.ToString();        
        Label price = (Label)item.FindControl("lblprice");
        Session["price"] = price.ToString();         
    }       
} 
```

这里因为 foreach 会话值再次变为空。请提出其他方法。

**aspx**

```
<asp:ListView ID="theme5" runat="server" DataSourceID="SqlDataSource5">
<ItemTemplate>
<asp:Label ID="lblcountry" runat="server" Text='<%#Eval("Country") %>' />
</ItemTemplate>
</asp:ListView> 
```

在这里，我想获取我的标签文本值并将其传输到会话。我想有问题：

```
Label country = (Label)theme5.FindControl("lblcountry"); 
```

在这个国家，我在调试时发现空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:38:12.650

**您正在添加标签而不是标签文本**

```
protected void imgbtn5_Click(object sender, EventArgs e)
{
    Session["theme"] = lbl5.Text;
    foreach (ListViewItem item in theme5.Items)
    {
        Label country = (Label)item.FindControl("lblcountry");
// here insted of country.ToString() you Should use 
        Session["country"] = country.Text.ToString();        
        Label price = (Label)item.FindControl("lblprice");
        Session["price"] = price.Text.ToString();         
    }       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:02:40.207

您可以尝试使用此代码

```
var index = ...;

var result = (label)theme5.Items[index].FindControl("lblcountry"); 
```

您可以使用此代码基于`Itemcommand`

```
<asp:ListView ID="theme5" runat="server" DataSourceID="SqlDataSource5">
    <ItemTemplate>
    <asp:Button ID="btn"
    Text="..."
    CommandName="YourCommand"
    CommandArgument='<%# Container.DataItemIndex %>'
    runat="server"   ItemCommand="Test_ItemCommand" />
    </ItemTemplate>
</asp:ListView>

protected void Test_ItemCommand(object sender, ListViewCommandEventArgs e)
{

 if (e.CommandName.Equals("YourCommand"))
 {
      var result = (label)theme5.Items[Convert.ToInt32(e.CommandArgument)].FindControl("lblcountry"); 
 }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:04:30.613

我认为您需要访问theme5当前选定的项目并获取该项目中的标签：

```
Label lblcountry = 
  (Label)theme5.Items[theme5.SelectedIndex].FindControl("lblcountry"); 
```

# java - spring orm 添加到 pom.xml 时的 spring orm 异常

> ID：12455872
> 
> 赞同：0
> 
> 时间：2012-09-17T08:50:45.480
> 
> 标签：java, spring, spring-mvc

我是 spring 开发的新手，我尝试为 spring orm 添加 maven 依赖项，在 pom.xml 文件中它在服务器启动时给出以下异常。此外，当我删除该依赖项时，异常发生了。你能告诉我这有什么问题吗？

谢谢。

```
SEVERE: Unable to process Jar entry [org/springframework/orm/jpa/JpaObjectRetrievalFailureException.class] from Jar [jar:file:/home/madhumal/mavenproj/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/NurseryApplication/WEB-INF/lib/spring-orm-3.1.2.RELEASE.jar!/] for annotations
org.apache.tomcat.util.bcel.classfile.ClassFormatException: Invalid constant pool reference: 99\. Constant pool size is: 25
    at org.apache.tomcat.util.bcel.classfile.ConstantPool.getConstant(ConstantPool.java:184)
    at org.apache.tomcat.util.bcel.classfile.ConstantPool.getConstant(ConstantPool.java:203)
    at org.apache.tomcat.util.bcel.classfile.SourceFile.getSourceFileName(SourceFile.java:92)
    at org.apache.tomcat.util.bcel.classfile.JavaClass.<init>(JavaClass.java:122) 
```

下面是我的 pom.xml 文件。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>mad.maventest2.app</groupId>
    <artifactId>NurseryApplication</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>NurseryApplication</name>

    <properties>
        <spring.version>3.1.2.RELEASE</spring.version>
        <hibernate.version>4.1.6.Final</hibernate.version>
    </properties>

    <dependencies>

        <!-- Spring 3 dependencies -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <!-- Spring Security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <!-- <dependency> -->
        <!-- <groupId>org.hibernate</groupId> -->
        <!-- <artifactId>hibernate-core</artifactId> -->
        <!-- <version>${hibernate.version}</version> -->
        <!-- </dependency> -->

        <!-- <dependency> -->
        <!-- <groupId>org.hibernate</groupId> -->
        <!-- <artifactId>hibernate-entitymanager</artifactId> -->
        <!-- <version>${hibernate.version}</version> -->
        <!-- </dependency> -->

        <!-- other dependencies -->
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.6</version>
        </dependency>

    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                    <wtpversion>1.5</wtpversion>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:10:40.707

`org.apache.tomcat.util.bcel.classfile.ClassFormatException: Invalid constant pool reference: 99\. Constant pool size is: 25`

看起来 jar 文件有问题。-- 从您的本地 m2 中删除它。存储库和 Maven 将再次下载它。我希望这能解决问题。

# java - 使用准备好的语句获取数据

> ID：12455873
> 
> 赞同：0
> 
> 时间：2012-09-17T08:50:47.790
> 
> 标签：java, sql, jdbc, prepared-statement

这是我的查询

```
select id,name,address from emp_details where gender = ? 
```

输入：女，男

在这通常我需要只获取女性数据或只获取男性数据但有时我需要使用相同的查询来获取女性和男性数据..

可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:02:16.760

只需反转查询：

```
select id,name,address from emp_details where gender <> ? 
```

并指定“男性”获得女性，“女性”获得男性，“随便”获得两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:56:45.143

使用子句

```
where gender in ? 
```

并作为参数一个字符串数组

```
new String[]{"m","f"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T09:00:46.143

```
SELECT id , name , address
FROM emp_details 
WHERE gender IN (?,?); 
```

仅限男性或女性 => 两者都设置？相同的值

[PreparedStatement IN 子句的替代方案？](https://stackoverflow.com/questions/178479/preparedstatement-in-clause-alternatives)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T08:53:39.693

使用相同的查询，不，这是不可能的。使用不带任何 where 子句的查询来执行此操作：

```
select id,name,address from emp_details 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T09:09:39.127

```
 String gender="Female ";

    String sql = "select id,name,address from emp_details";

    if(gender!=null && !"".equals(gender))

     {      
        sql+=" where gender = ?";

     } 
```

# stylecop - StyleCop 拼写中断 TeamCity

> ID：12455878
> 
> 赞同：2
> 
> 时间：2012-09-17T08:51:05.033
> 
> 标签：stylecop, teamcity-7.0

我刚刚将 StyleCop 从 4.7.36.0 升级到 4.7.37.0（后者现在包括拼写支持）。它在我的本地机器上运行良好。

但是，当它在 TeamCity 中运行时（它以前工作的地方），我现在得到：

```
 Violations
         Line 1   An exception occurred while parsing the file: 
System.ComponentModel.Win32Exception, %1 is not a valid 
    Win32 application at StyleCop.Spelling.SpellChecker.Speller..ctor(String path) 
```

它似乎在寻找一个拼写程序。也许应该在构建服务器上激活一些 Windows 功能。但是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:59:49.500

这已在 StyleCop 4.7.38.0 中修复。

# dom - 使用 DOM 从网站获取 HTML

> ID：12455881
> 
> 赞同：4
> 
> 时间：2012-09-17T08:51:18.510
> 
> 标签：dom, powershell

我正在尝试在 powershell 中编写一个脚本，我可以在运行查询后使用它从网站获取 HTML。

在我自己的机器上，我可以运行以下内容，没有问题，但是当我尝试在 Server 2008 机器上运行它时，我没有得到 Document.Body.InnerHTML 命令的输出，所有 Document.GetElementById 部分都可以正常工作.

```
 $ie = New-Object -com InternetExplorer.Application
    $ie.silent = $true
    $ie.navigate2("http://www.mxtoolbox.com/")
    while($ie.busy) {start-sleep 1}
    $ie.Document.getElementById("ctl00_ContentPlaceHolder1_txtToolInput").Value = "mx:domain.co.uk"
    $ie.Document.getElementById("ctl00_ContentPlaceHolder1_btnAction").Click()
    Start-Sleep -Seconds 10
    $ie.Document.body.innerHTML | Out-File "C:\NETESP\MXRecords\MXRecordsHTML.txt" -Encoding ASCII
    $ie.Quit() 
```

我需要在服务器 2008 盒子上安装什么东西才能使它返回一个值吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:38:33.047

可能是时间问题？我无法在 2008 年进行测试，但可以尝试一下：

```
$ie = New-Object -com InternetExplorer.Application
$ie.silent = $false
$ie.navigate2("http://www.mxtoolbox.com/")
while($ie.busy) {start-sleep 1}
$ie.Document.getElementById("ctl00_ContentPlaceHolder1_txtToolInput").Value = "mx:domain.co.uk"
$ie.Document.getElementById("ctl00_ContentPlaceHolder1_btnAction").Click()

# wait for the result page 
While($ie.LocationURL -eq 'http://www.mxtoolbox.com/') {
    Write-Warning "Waiting for result"
    Start-sleep 1
}

# grab the table html
$table = $ie.Document.getElementsByTagName('TABLE') | Where-Object {$_.className -eq 'table table-striped table-bordered table-condensed tool-result-table'}
$table.outerHTML | Out-File "C:\NETESP\MXRecords\MXRecordsHTML.txt" -Encoding ASCII
$ie.Quit() 
```

# python - Django Gunicorn wsgi

> ID：12455883
> 
> 赞同：3
> 
> 时间：2012-09-17T08:51:35.877
> 
> 标签：python, django, wsgi, gunicorn

您好我正在尝试将我的 django 1.4.1 应用程序与 Gunicorn 0.14.6 集成。我像这样从命令行启动 gunicorn 服务器 -

```
gunicorn -c /home/code/gunicorn_config.py 
```

我得到了这个回溯-

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py", line 459, in spawn_worker
    worker.init_process()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/workers/base.py", line 99, in init_process
    self.wsgi = self.app.wsgi()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/app/base.py", line 101, in wsgi
    self.callable = self.load()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/app/wsgiapp.py", line 24, in load
    return util.import_app(self.app_uri)
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/util.py", line 292, in import_app
    app = eval(obj, mod.__dict__)
  File "<string>", line 1, in <module>
NameError: name 'application' is not defined 
```

我哪里错了？这是什么`application`变量以及我需要在哪里修改它？

另外，由于我使用的是 Django1.4.1 `wsgi.py`，我的项目中已经有一个文件，我需要更改它吗？

**更新：**这是我的`gunicorn_config.py`文件内容 -

```
import os
import sys
import multiprocessing

def app_path():
    sys.path.append('/home/code/po/')
    sys.path.append('/home/code/po/ball/')
    return

def num_cpus():
    cpus = 0
    try:
        cpus = os.sysconf("SC_NPROCESSORS_ONLN")
    except:
        cpus =  multiprocessing.cpu_count()

    if cpus: return cpus
    else: return 3

#defining the behavior of gunicorn
app_path()

bind      = "127.0.0.1:8080"
workers   = num_cpus()*2 + 1
debug     = True
daemon    = False
accesslog = '/home/code/logs/guni_access.log'
errorlog  = '/home/code/logs/guni_error.log'
loglevel  = 'debug'
django_settings  = '/home/code/po/po/'
pythonpath       = '/home/code/po/' 
```

@moopet - 我什至不认为该`wsgi.py`文件被调用，我如何让 gunicorn 选择该文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:48:38.667

你`django_settings`的不正确。`django_settings`应该采用可从您设置的 Python 路径导入的 python 模块导入的形式。所以

```
pythonpath = '/home/code/po'
django_settings = 'po.settings' 
```

更详细地说，`application`gunicorn 将尝试从您提供的 Python 模块导入默认变量（应该是 WSGI 应用程序对象）。

所以换一种方式考虑。假设您正在尝试运行一个简单的 Flask wsgi 应用程序。实际的 WSGI 应用程序被定义为并存`application`在于`/home/code/views.py`. 然后以下将手动开始使用 gunicorn 提供服务

```
export PYTHONPATH=/home/code
gunicorn -w 2 views:application 
```

所以视图模块内的变量应用程序。您可以阅读有关[Django 如何为您提供应用程序对象的](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/)信息。

您可能需要将 gunicorn 指向`po.wsgi`模块本身。从目前提供的信息来看，有点难以判断。如果该模块被正确创建，它应该包含一个名为`application`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:33:56.383

Check if another package you have installed already contains a file called wsgi.py. (gevent does.) If so, likely the wrong wsgi.py file is being loaded. Try renaming your wsgi.py file to something else (e.g. app_wsgi.py) and add run your app using

```
gunicorn -c /home/code/gunicorn_config.py app_wsgi 
```

# iphone - Cocos2d，iOS：从缓存中删除精灵的正确方法是什么？

> ID：12455884
> 
> 赞同：2
> 
> 时间：2012-09-17T08:51:41.443
> 
> 标签：iphone, caching, cocos2d-iphone, automatic-ref-counting, sprite

**我有一个不是**单例实例的 GameScene 类。因此，每次用户选择新关卡时，我都会分配和取消分配它，并将“静态”/“共享”数据保存在不同的单例类（例如 GameManager）中。

我正在使用**ARC**。我想了解在内存管理的角度下我的方法是否正确。换句话说，在清理时调用“removeUnusedSpriteFrames”就足够了吗？这会删除 game-art-forLevelOne-hd.plist 中的所有精灵吗？我也应该对 CCSpriteBatchNode 做点什么吗？

```
-(void) loadGameArtFileForLevelOne  //I do this in a switch but this is to simplify the reading 
{
    CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache];
    [frameCache addSpriteFramesWithFile:@"game-art-forLevelOne-hd.plist"];
    CCSpriteBatchNode * sharedSpriteBatchNode = [CCSpriteBatchNode batchNodeWithFile:@"game-art-forLevelOne-hd.png"];    
 }

//As dealloc is deprecated for ARC code, I prefer to remove unused sprites and texture on cleanup
-(void) cleanup
{
    [[CCSpriteFrameCache sharedSpriteFrameCache] removeUnusedSpriteFrames];     
} 
```

我在 CCSpriteBatch 节点的 dealloc 方法中添加了一个 CCLOG 调用。当我加载 GameScene 然后返回菜单时，我按预期看到了“删除未使用的纹理”的日志，但**我没有看到 CCSpriteFrameCache 的 dealloc 方法的任何日志。*** *!! 警告：请参阅下面的编辑 - 我的错误！**

**编辑：对不起，我的意思是我没有看到 CCSpriteBatch 的 dealloc 方法的任何日志**

这让我有点担心，因为我想“释放”并删除与关卡精灵相关的所有内存。

一旦我理解了这一点，我就会“优化”这一点（例如，每个级别都有一个精灵表 - 例如世界 1 - 并且每个背景都有一个精灵表）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:39:13.610

你可以用这个..

```
 [[CCSpriteFrameCache sharedSpriteFrameCache] removeSpriteFrames]; 
```

如果您需要更多，请使用关注。

```
[[CCDirector sharedDirector] purgeCachedData];
[[CCTextureCache sharedTextureCache] removeAllTextures];
[CCTextureCache purgeSharedTextureCache];
[[CCSpriteFrameCache sharedSpriteFrameCache] removeSpriteFrames];
[CCSpriteFrameCache purgeSharedSpriteFrameCache]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:02:57.773

编辑：

我假设您正在`CCSpriteBatchNode`某处添加节点，尽管您发布的代码没有显示它（您还提到，它发生在开关中，所以我认为在完全不同的设置中）。如果是这样，它不会被释放，直到您从添加它的位置删除它。

在这里，也许需要澄清一下。

这`CCSpriteFrameCache`是一个缓存：一个存储所有精灵的存储空间，以便随时可以重用。

这`CCSpriteBatchNode`是一种在 Open GL 层中提高性能的机制，原则上与缓存完全无关。

我了解，如果您通过批处理节点使用的某些精灵仍然存在于某些层/节点/场景中，则它不会被视为“未使用”并且不会被您的清理代码删除。实际上，它正在使用中。当您从所有引用它的节点中删除它时，缓存的精灵将变为“未使用”。

至于你的问题：

> 换句话说，在清理时调用“removeUnusedSpriteFrames”就足够了吗？

好吧，我认为这取决于你的应用程序什么可以被认为是好的清理。从缓存中删除未使用的精灵当然可以；但你也可以做其他事情：卸载你加载的音频资源；删除场景中未使用的部分（如果需要，可以重新加载）；等等

希望这可以帮助。

> **我没有看到 CCSpriteFrameCache 的 dealloc 方法的任何日志。**

`CCSpriteFrameCache`是一个单例，所以它应该存在于程序的整个生命周期中（它可能会有所不同，但我敢打赌就是这种情况）：

```
 CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache]; 
```

所以，我不会担心缓存没有被删除；重要的是它的内容被清空了。

# r - 大型 xdf 文件上的随机森林，无需读入数据帧

> ID：12455886
> 
> 赞同：5
> 
> 时间：2012-09-17T08:52:05.870
> 
> 标签：r, random-forest

有没有办法在大型（大约 10gb）xdf（revolution R 格式）文件上运行随机森林？显然，我可以尝试 rxReadXdf 并将其转换为数据帧……但我的机器只有 8gb 内存，将来我可能会处理更大的数据集。例如，使用 foreach 循环，我想在我的四核机器上运行 1000 棵树：

```
#'train.xdf" is a 10gb training data set
rf<- foreach(ntree=rep(250, 4), .combine=combine, 
             .packages='randomForest') %do%
    randomForest(amount2~.,data="train", ntree=ntree, importance=TRUE,
                 na.action=na.omit, replace=FALSE) 
```

但 randomForest 无法接收“train”（一个 xdf）文件。有没有办法直接在 xdf 上运行随机森林而不读取数据帧？

干杯，agsub

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:32:09.320

不，如果不更改作为**randomForest**包基础的 R 代码，即使这样也可能是不可能的，因为作为 RF 方法基础的 FORTRAN 例程可能需要将所有数据保存在内存中。一般来说，最好为您的机器获得更多的 RAM 堆栈或找到一些更大的工作站/机器集群来运行此问题。

（为什么要 1000 个随机森林？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:01:19.110

随机森林通常是深度优先训练的，即在当前节点上训练，然后在子节点上递归训练。这需要将整个数据集保存在内存中。

为了克服这个限制，我编写了随机森林训练框架来增量处理数据（有时称为“在线”），一次从不保存多个条目。这需要树的广度优先构建，并且需要使用在线算法计算纯度统计。树的每一层只看到一次数据，因此您的 xdf 文件不需要存储在内存中，而是会被读取 D 次，其中 D 是树的最大深度。

我知道这可能没有帮助，因为您无法更改给定的代码，但也许您会找到这些算法的在线版本的实现（试试[Amir Safar 的小组](http://www.ymer.org/amir/software/online-random-forests/)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-25T09:07:46.540

要克服内存限制，请使用：

```
max_size_of_pagefiles <- 60000 # in MBs
memory.limit(size = max_size_of_pagefiles) 
```

我使用 SSD 作为驱动器来存储页面文件，并且可用空间量可以用作内存（以下示例适用于 Windows）：

```
freespace <- as.numeric(gsub("Total # of free bytes        : ", "", 
   system2('fsutil', 'volume diskfree c:', stdout = TRUE)[1]))/(1024*1024)
memory.limit(size = freespace*0.9) 
```

# inheritance - JPA 继承、Spring Roo 和 Spring Data JPA 的设计问题

> ID：12455893
> 
> 赞同：1
> 
> 时间：2012-09-17T08:52:28.450
> 
> 标签：inheritance, jpa, spring-roo, spring-data-jpa

我目前正在开发一个 Spring Roo/JPA 应用程序，最近我切换到**基于 JPA 继承**的域模型。总结一下我的域模型，我有一个抽象`Member`实体，它由两个实体子类化：`Male`和`Female`.

在我所有的 Spring MVC 控制器中，我希望避免总是注入两个服务依赖项（一个处理`Male`实体，另一个处理`Female`实体）。我宁愿拥有一项`MemberService`服务（连同相应的`MemberRepository`），它会返回一个`Male`实例或一个`Female`实例。

以上是否可以使用 Spring Roo 注释，例如：

*   `@RooService(domainTypes = { Member.class })`或者那个：
*   `@RooJpaRepository(domainType = Member.class)`?

例如，这会`Member findByEmail(String email);`返回一个我可以***转换***为`Female`or`Male`类型的对象吗？

**更一般地说，在 Spring 控制器和 Spring 服务级别处理实体继承的最佳实践是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:10:28.530

我认为最好的方法是为男性和女性提供一个存储库，使用：

```
repository jpa --interface ~.repository.MaleRepository --entity ~.domain.Male
repository jpa --interface ~.repository.FemaleRepository --entity ~.domain.Female 
```

你得到：

```
@RooJpaRepository(domainType = Female.class)
public interface FemaleRepository {
}

@RooJpaRepository(domainType = Male.class)
public interface MaleRepository {
} 
```

然后为这些模型的应用程序创建服务层（每个模型的服务）

```
service --interface ~.service.MaleService --entity ~.domain.Male
service --interface ~.service.FamaleService --entity ~.domain.Female 
```

然后你得到：

```
@RooService(domainTypes = { Male.class })
public interface MaleService {
}

@RooService(domainTypes = { Female.class })
public interface FemaleService {
} 
```

这是假设您的男性和女性对象具有不同的责任，因此需要将其划分为不同的类，按照您给它们的名称（男性和女性）我认为他们没有，但我不知道您的业务逻辑和当然这只是一个例子（但对你真正的问题有多忠实？）。

继承的想法不仅是与“is-a”后代共享通用功能，而且保留 OO 逻辑的意义，当我说我的意思时，例如，在这种情况下，您可以使用名为 sex 的属性解决问题如果男性和女性具有相同的属性；如果不是这种情况，那么为这些专用对象创建不同的存储库和服务就不会很痛苦。

# visual-studio-2012 - VS2012 崩溃解决方案

> ID：12455894
> 
> 赞同：3
> 
> 时间：2012-09-17T08:52:41.410
> 
> 标签：visual-studio-2012, solution-explorer

> **可能重复：**
> [在 Visual Studio 的解决方案资源管理器窗口中一次折叠所有文件](https://stackoverflow.com/questions/4273552/collapse-all-files-at-once-in-solution-explorer-window-in-visual-studio)

如何在 Visual Studio 2012 中仅使用一个快捷方式折叠解决方案？

当前不是选定的项目，而是整个解决方案！电源命令支持折叠所选项目并手动选择解决方案，它实际上会折叠解决方案，但这不是我想要的。

使用快捷方式后，无论选择什么项目，无论打开或使用什么文件，我都想折叠整个解决方案资源管理器。

有谁知道这个插件或其他任何东西？

# php - PHP 使用带有 OOP 的多维数组

> ID：12455902
> 
> 赞同：0
> 
> 时间：2012-09-17T08:53:04.250
> 
> 标签：php, oop, multidimensional-array, shopping-cart

不久前我做了一个系统，其中涉及一个基本的购物车。购物车是一个非常简单的 OOP 系统，一次添加 1 个数量的商品。这是将商品添加到购物车的功能。

```
 function add_item($itemid,$qty=1,$price = FALSE, $info = FALSE)
{ 

    if($this->itemqtys[$itemid] > 0)
            { // the item is already in the cart..
      // so we'll just increase the quantity

        $this->itemqtys[$itemid] = $qty + $this->itemqtys[$itemid];
        $this->_update_total();
    } else {
        $this->items[]=$itemid;
        $this->itemqtys[$itemid] = $qty;
        $this->itemprices[$itemid] = $price;
        $this->iteminfo[$itemid] = $info;
    }
    $this->_update_total();
} 
```

问题是一些产品有变体（尺寸、颜色等），但是当他们在同一订单中选择不同的变体时，产品没有正确添加 - 所有相同的产品都属于一个变体。

我认为使用多维数组或数组中的数组来产生类似的东西是一个想法：

```
$this->iteminfo[$itemid][$var]; 
```

从产品中获取 var 不是问题，我只是在苦苦思索如何将产品及其变体添加到购物车中，并且只有在再次添加变体时才更新此产品/变体组合的数量。如果添加了不同的变体，它会将产品添加到购物车的新条目中吗？

希望这是有道理的：/谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:57:07.833

这对我来说似乎不是很 OOP。您应该为购物车项目创建一个类，其中包含数量、价格、变化等，然后将此类的对象添加到购物车对象中的项目数组中。

然后，您的方法将变成以下内容：

```
function add_item($itemid, $qty=1, $variation ="", $price = FALSE, $info = FALSE){ 

    // use itemid concatenated with variation 
    // to get a unique key for every item in your cart 
    if(array_key_exists($itemid . $variation, $this->items)){ 

        // the item is already in the cart..
        // so we'll just increase the quantity
        $item = $this->items[$itemid];

        // this assumes a method in the Item class to add to the quantity
        $item->addToQuantity($qty);

        // put the updated item in the cart
        $this->items[$itemid] = $item;
    } else {
        // create a new item object
        $item = new Item();
        $item->setId($itemid);
        $item->setQuantity($qty);
        $item->setPrice($price);
        $item->setInfo($info);
        $item->setVariation($variation);

        // add it to the items array using a unique key
        $this->items[$itemid . $variation] = $item;
    }
    $this->_update_total();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T08:57:36.200

我建议使用单维（al）数组，而不是用普通的旧整数和字符串填充它，而是在其中放置一个对象。这样会*更加*健壮，您可以轻松循环以获取所需的任何内容 - 以及将来能够进一步扩展对象。

这样的事情甚至会起作用：

```
class itemToBuy
{
    public $itemID;
    public $qty;
    public $price;
    public $info;
    public $whoKnowsWhat;
}

class yourShoppingCart
{
    function add_item($newItem)
    {
        $itemInserted==false;
        $itemsInCart=count($this->itemqtys);
        for($i=0;$i<$itemsInCart;$i++)
        {
            if($this->itemqtys[$i]->itemID==$newItem->itemID)
            {
                $this->itemqtys[$i]->qty+=$newItem->qty;
                $itemInserted=true;
            }
        }
        if(!itemInserted)
        {
            $this->itemqtys[]=$newItem;
        }
        $this->_update_total();
    } 
} 
```

然后只传递对象实例，`itemToBuy`而不是你现在传递的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:59:32.660

您可以为每个项目的变量设置一个变化值`$this->itemqtys`，然后您可以检查如下：

```
<?php
// add a extra $var for checking the variations
function add_item($itemid,$qty=1,$price = FALSE, $info = FALSE, $var=FALSE) {
    if( ( $this->itemqtys[$itemid] > 0 ) && ( $this->itemqtys[$itemid]['var'] == $var ) ) {
          // item already in cart, update
    } else {
          // add item to the cart, along with the variation.
    }
}
?> 
```

希望这可以帮助。

# java - 如何在android中将字符串转换为日期

> ID：12455905
> 
> 赞同：1
> 
> 时间：2012-09-17T08:53:17.447
> 
> 标签：java, android, simpledateformat

我将字符串转换为日期：

```
DateFormat formatter = new SimpleDateFormat("yyyyMMddhhmmss");
String datenow="20120917121823";
Date date2 = (Date) formatter.parse(datenow); 
```

现在是下午 12 点。为什么转换后是“Mon Sep 17 00:18:23 GMT+07:00 2012”

你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:00:13.237

因为 hh in hours 将小时数从 1 到 12 您可以在[此处](http://developer.android.com/intl/es/reference/java/text/SimpleDateFormat.html)查看编码。你应该使用：

```
DateFormat formatter = new SimpleDateFormat("yyyyMMddHHmmss");
String datenow="20120917121823";
Date date2 = (Date) formatter.parse(datenow); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T08:55:24.113

您可以使用：

```
SimpleDateFormat formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzzz yyyy");
    try {
        String temp = "Mon Sep 17 00:18:23 GMT+07:00 2012";
        Date expiry = formatter.parse(temp);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# iphone - 将图片添加到推文

> ID：12455906
> 
> 赞同：-3
> 
> 时间：2012-09-17T08:53:22.703
> 
> 标签：iphone, ios5, twitter, uiimage

我的应用程序中有一个推文按钮，它也与代码挂钩

```
{    
    UIGraphicsBeginImageContext(self.view.bounds.size);

    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage *screenshotImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    UIImageWriteToSavedPhotosAlbum(screenshotImage, nil, nil, nil);
} 
```

我需要知道如何将使用此代码创建的图像放到

```
[tweetSheet addImage:_______]; 
```

这样他们就可以将图像连同他们的推文一起推文。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:57:43.627

波纹管方法返回您当前的视图图像

```
-(UIImage *)captureView
{

    CGRect rect = [self.view bounds];

    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

接着

```
[tweetSheet addImage:[self captureView]]; 
```

试试这个它的工作......希望，这对你有帮助......

:)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-17T08:56:35.070

我找到了执行此操作的代码，您只需添加

```
 [tweetSheet addImage:[UIImage imageNamed:@"screenshotImage"
                         ]]; 
```

# grails - Grails - 域对象未保存在集成测试中

> ID：12455909
> 
> 赞同：5
> 
> 时间：2012-09-17T08:53:28.540
> 
> 标签：grails, integration-testing

我正在关注 Grails In Action 书中的一个示例。我的集成测试失败，因为示例代码中的搜索返回空引用。我使用了对 findAll() 的调用，现在看来我的测试数据没有保存；all.size 归零。

```
void testBasicDynamicFinders() {

        new User(userId: 'glen', password: 'secret', profile: new Profile(email: 'glen@glensmith.com')).save()
        new User(userId: 'peter', password: 'sesame', profile: new Profile(homepage: 'http://www.peter.com/')).save()

        def all = User.findAll()
        assertEquals 2, all.size()
} 
```

我曾尝试使用 save(flush: true) 无济于事。

我还在 try...catch 结构中包含了一个保存语句，但似乎没有引发异常。

Grails 真的是在踢我的屁股。请帮我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T09:27:35.247

如果你使用

```
save( failOnError:true ) 
```

然后它应该向您显示阻止保存域对象的任何验证错误:-)

# language-agnostic - 我应该缩进所有赋值语句，以便所有“=”符号都在同一行吗？

> ID：12455913
> 
> 赞同：2
> 
> 时间：2012-09-17T08:53:45.170
> 
> 标签：language-agnostic, coding-style, indentation

我的一些同事遵循这种缩进风格，他们`=`在赋值语句中的每个运算符之前和之后添加空格/制表符。即使块中只有一个赋值语句，他们甚至会这样做。我全力以赴编写可读、漂亮的代码。但是，真的需要在整个文件中进行这种对齐吗？

下面给出了演示这种缩进的示例代码。

```
 public function getCMSSectionData($args="1")
    {
        $sql                    =   "SELECT * FROM     med_cms_section WHERE $args";            
        $data                   =   $this->getdbcontents_sql($sql); 
        return $data;
    }

    public function insertCMSSection($dataArray)
    {

        $sendCount  =   100;

        $sql        =   "select * from med_email_pending order by priority desc limit ".$sendCount;
        $res        =   $this->db_query($sql);

        while($row = mysql_fetch_array($res))
        {
            $id         =   $row["id"];
            $to         =   $row["to"];
            $from       =   $row["from"];
            $subject    =   $row["subject"];
            $message    =   $row["message"];
            $priority   =   $row["priority"];
            $this->sendmail($to,$from,$subject,$message);
            $this->sendmail("user@example.com",$from,$subject,$message);
            $sql        =   "delete from med_email_pending where id=".$id;
            $this->db_query($sql);
        }
    } 
```

这不是：-

```
$sql = "SELECT * FROM med_cms_section WHERE $args";         
$data = $this->getdbcontents_sql($sql); 
```

比这更好：-

```
$sql                    =   "SELECT * FROM med_cms_section WHERE $args";            
$data                   =   $this->getdbcontents_sql($sql); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:45:46.117

不，这是一个可怕的想法，至少有一个原因。如果您需要添加一行，您可能需要重新格式化其他几行。当您想查看源代码管理中的修订之间进行了哪些更改时，这会使您的差异查看器感到困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T09:14:18.103

不。它使代码更改更加困难（您必须手动对齐..除非您的 IDE 为您执行此操作）而且我认为它不会使代码更具可读性。也许这是主观的。

# python - 我怎样才能使这个 Cython 扩展更快？

> ID：12455917
> 
> 赞同：0
> 
> 时间：2012-09-17T08:53:56.840
> 
> 标签：python, optimization, cython, pyrex

这是我的第一个 cython (pyx) 模块。我怎样才能让它更快？具体来说，我正在最后一行寻求帮助。它可以编译并运行，但我担心它会被转换为 Py* 对象，这可能会快得多。

另外，如果您发现任何明显的错误，请告诉我！

```
ctypedef unsigned short UInt8

DEF BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"

def encode_16_bytes(char *thebytes):
    cdef UInt8 *b      # the bytes cast to an array of UInt8
    cdef int i         # used to assign a value to the buffer
    cdef int j         # used to count up through the bytes
    cdef char buf[23]  # the resulting buffer of characters

    # initialize variables
    for i in range(23): # set buf array to zeros
        buf[i] = '\0'
    b = <UInt8 *>thebytes
    i = 0
    j = 1

    i += 1
    buf[i] = BASE64[(b[0] >> 6) & 0x3F]
    i += 1
    buf[i] = BASE64[b[0] & 0x3F]

    # iterate through the bytes 4 words at a time, setting each byte to its
    # mapped BASE64 counterpart
    while j < 16:
        i += 1
        buf[i] = BASE64[(b[j] >> 2) & 0x3F]
        i += 1
        buf[i] = BASE64[((b[j] << 4) | (b[j + 1] >> 4)) & 0x3F]
        i += 1
        buf[i] = BASE64[((b[j + 1] << 2) | (b[j + 2] >> 6)) & 0x3F]
        i += 1
        buf[i] = BASE64[b[j + 2] & 0x3F]
        j += 3

    # join up the characters into a string
    return "".join([chr(buf[i]) for i in range(23)]) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:10:58.183

您可以通过将 "".join(...) 替换为以下内容，从 C 字符缓冲区中创建 Python 字节字符串：

```
bytes_string = chr[:23] 
```

或更一般地说：

```
bytes_string = chr[:buffer_length] 
```

[请参阅此处](http://docs.cython.org/src/tutorial/strings.html)以获取参考和更多示例。

# php - PHP 匈牙利表示法的“Codesniffer”

> ID：12455919
> 
> 赞同：1
> 
> 时间：2012-09-17T08:54:02.863
> 
> 标签：php, hungarian-notation, codesniffer

我在我的项目中使用*[PHAN](http://en.wikibooks.org/wiki/PHP_Programming/Alternative_Hungarian_Notation)*，想知道是否有某种代码嗅探器来验证代码是否符合 PHAN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T05:17:30.747

我的猜测是您可以使用 Codesniffer (http://pear.php.net/manual/en/package.php.php-codesniffer.php)，但您必须创建自己的自定义嗅探器。它看起来并不难，所有文档都在那里。

您可以做的是检查每个变量名称是否由合法前缀组成。

您可以做的是检查私有类变量是否以 _ 开头。

您无法做的是检查是否使用了正确的类型前缀。这是因为 PHP 变量是动态类型的，并且可以在变量的生命周期内改变。静态代码分析器不可能计算出我们的。

# c++ - 在 std::strcpy 中使用 char*

> ID：12455931
> 
> 赞同：2
> 
> 时间：2012-09-17T08:54:29.917
> 
> 标签：c++

这是我的代码...

```
char* m1;
char* m2 = "sth";
strcpy(m1, m2); 
```

该代码引发了运行时错误，所以我尝试了...

```
char m1[];
char m2[] = "sth"; 
```

那可以毫无错误地运行。但是，我想使用...

`char* s`

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:55:55.067

你应该`allocate`记住`m1`. 例如

```
char* m1 = new char[4];
char* m2 = "sth";
strcpy(m1, m2);
// so smth with m1
delete[] m1; 
```

但是，既然您使用 C++ 编写，为什么不使用`std::string`?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:56:51.893

问题是您没有分配任何内存来存储 strcpy 方法的结果。你需要：

```
char* m1 = (char *) malloc(sizeof(char) * 4) /* 4 being the size of 3 chars + trailing \0 */
char* m2 = "sth"; 
```

比你可以做的 strcpy

最后你必须释放任何动态分配的内存 ag

```
free(m1) 
```

m2 是静态分配的，不必释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:02:40.897

在 C++ 中，你宁愿这样做：

```
// don't forget to #include <string>
std::string m1;
std::string m2 = "sth";
m1 = m2; 
```

如果你需要一个`const char*`（例如，对于一些 API 调用）你可以得到一个

```
const char* str = m1.c_str(); 
```

问题消失了。

另外，您不再需要为缓冲区大小和适当的释放而烦恼。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:23:36.853

我相信即使你的第二个例子也是无效的

```
char m1[];
char m2[] = "sth"; 
```

m1 没有任何有效的内存来存储复制的数据。而且，我相信您应该在声明中包含数组维度（您没有在这里声明方法参数）

通常你应该有类似的东西

```
char m1[10];
char m2[] = "sth"; 
strcpy(m1, m2); 
```

回到问题。很多人说你应该分配内存才能使用 char*。没错，但更准确地说，您应该让指针指向有效的内存。

分配内存是一种方法，但您也可以执行以下操作：

```
char outdata[100];
char* m1 = &(outdata[10]);
char* m2 = "foo";
strcpy(m1, m2); 
```

这里没有明确的分配，仍然是一个有效的例子。

我相信 OP 仍然不了解什么是数组，什么是指针。对此进行一些额外的阅读和思考。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-17T09:07:57.677

首先，在执行复制之前，您必须确保目标指针有足够的内存来保存副本，否则会出现运行时错误。所以你需要这个：

```
char* m1;
char* m2 = "sth";
m1 = new char[strlen(m2)+1]; // <---- reserve memory for m1
strcpy(m1, m2);
// remember to delete[] m1 
```

另一种处理字符串的方法是使用`std::string`类，如果你这样做，内存管理不会打扰你。

```
std::string m1("");
std::string m2("sth");
m1 = m2; // no strcopy needed, no memory management needed 
```

最后，如果由于某种原因您必须处理指针，请注意 new/delete 对，并记住[必须使用 delete[] 删除使用 new[] 保留的内存](https://stackoverflow.com/questions/2486034/delete-an-array-of-objects)。

以及额外的建议：而不是`memcpy`我更喜欢使用`std::copy`：

```
char* m1;
char* m2 = "sth";
m1 = new char[strlen(m2)+1]; // <---- reserve memory for m1
std::copy(std::begin(m2), std::end(m2), std::begin(m1));
// remember to delete[] m1 
```

因为如果您使用and函数，它适用于 the`char *`和`std::string`version ：`std::begin``std::end`

```
std::string m1("");
std::string m2("sth");
std::copy(std::begin(m2), std::end(m2), std::begin(m1)); 
```

编辑：只要`m2`静态保留它就可以工作，因此可以在编译时推断出长度。

# jenkins - 詹金斯使用什么外壳？

> ID：12455932
> 
> 赞同：71
> 
> 时间：2012-09-17T08:54:37.927
> 
> 标签：jenkins

`shell`调用命令时在 Jenkins 中使用什么 shell ？我在 Linux 机器上运行 Jenkins。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-17T11:04:49.560

从“执行外壳”部分的帮助/问号图标：

> 运行用于构建项目的 shell 脚本（默认为 sh，但这是可配置的）。

如果您转到管理 Jenkins --> 配置系统，您将找到一个选项（称为“Shell 可执行文件”）来设置您希望您的 shell 脚本使用的 shell 的名称或绝对路径...

对于我没有配置此选项的系统...它使用 bash！

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-12-17T09:12:09.023

就像在任何 shell 脚本文件中一样，只需在脚本的第一行声明您的 shell：

```
#!/bin/bash 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-10-08T00:34:26.980

Jenkins 默认`sh`在`PATH`环境变量中查找，但是结果（例如`/bin/sh`）可能指向不同的 shell。例如，在 Ubuntu 6.10 或更高版本上，`/bin/sh`是 Dash 的符号链接。

因此，对于“Jenkins 中使用什么外壳......”这个问题，这取决于。为了避免不确定性，您可以：（以 Bash 为例）

1.  在 Manage Jenkins > Configure System > Shell > Shell executable 中显式配置 shell 可执行文件，例如`/bin/bash`. （系统范围的配置）
2.  使用 shebang 行指定应使用的解释器，例如，`#!/usr/bin/env bash`（特定于工作）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-17T08:56:18.613

我尝试通过将以下 shell 命令添加到我的 Jenkins 构建来打印 env。

```
env 
```

输出显示 SHELL 已`tcsh`针对我的实例设置为。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-06-14T17:44:01.730

*您可以使用Jenkins > Manage Jenkins > Configure System > Shell executable*设置默认 shell 。

对于使用不同于默认 shell 的作业，请使用 shebang 开始*执行 shell*构建步骤，例如：

```
#!/usr/bin/tcsh -e -x

command1
command2
   ... 
```

你甚至可以`/usr/bin/env`使用 Python：

```
#!/usr/bin/env python3 
```

**请注意，后面**不允许有空格**`#!`：**

 **```
#! /usr/bin/tcsh    # Wrong 
```

这将给出错误，

```
java.io.IOException: Cannot run program "" 
```

我在 Jenkins 1.625.3 上测试了上述内容**

# jquery-ui - jQuery UI 自动完成：下拉菜单不显示

> ID：12455934
> 
> 赞同：0
> 
> 时间：2012-09-17T08:54:40.740
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我一直在努力让 jQuery UI 自动完成功能使用远程源工作。我得到了每个请求的正确结果（使用 Chromes Inspector），但由于某种原因没有显示下拉框。这是搜索字段：

```
<form action={'/content/search'|ezurl} class="search-form">
    <fieldset>
        <input type="text" id="Search" name="Search" class="text" />
        <input type="submit" name="SearchButton" class="submit" value="search" />
    </fieldset>
</form> 
```

和javascript：

```
$(function() {

$("#Search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "/content/search",
                dataType: "get",
                data: {
                    maxRows: 12,
                    query: request.term,
                    filter: 'author'
                }
            });
        },
        type:"json",
        select: function(event, ui) 
        {
            window.location =  ui.item.url;
        }
   });
}); 
```

返回：

```
[{"html":"<li><a href=\/Author\/Per_Asmund\/(language)\/nor-NO>Asmund, Per<\/a><\/li>","url":"\/Forfattere\/Per_Asmund\/(language)\/nor-NO","id":"210"},
{"html":"<li><a href=\/Forfattere\/Per_AErlend\/(language)\/nor-NO>Erlend, Per<\/a><\/li>","url":"\/Forfattere\/Per_AErlend\/(language)\/nor-NO","id":"238"}] 
```

我可能只是错过了一些东西，但我一生都无法弄清楚。任何帮助都深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:05:03.103

您错过了参数`response`中的电话`source`

```
 $.ajax({
            url: "/content/search",
            dataType: "JSON", // edit: fixed ;)
            data: {
                maxRows: 12,
                query: request.term,
                filter: 'author'
            },
            success: function(data) { response(data); } // add this line
        }); 
```

但在这种情况下，也许一些[更简单的用法](http://jqueryui.com/demos/autocomplete/#remote)应该更好。

# jquery - jQuery表单中的输入数量

> ID：12455935
> 
> 赞同：1
> 
> 时间：2012-09-17T08:54:42.030
> 
> 标签：jquery, forms, size

我有一个表格，我想知道表格中输入的数量。

我正在尝试像这样访问它：

`alert($(this).parents("form").(':input').size());`

从表单中的按钮单击调用此函数的位置，`.parents()`用于从页面获取正确的表单，我需要一个处理程序来处理输入，例如使用`$('input').size()`但用于特定表单。

有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T08:56:18.770

要计算该`form`元素中的输入数量，您可以执行以下操作：

```
$(this).parents("form").find('input').length 
```

* * *

参考：

*   [jQuery 查找（）](http://api.jquery.com/find/)
*   [jQuery 长度](http://api.jquery.com/length/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:56:55.897

```
$(this).parents("form:input").length 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T08:56:47.543

尝试这个：

```
 alert($(this).parents('form :input').length); 
```

# visual-studio - 如何在 svn 中查看提交描述？

> ID：12455936
> 
> 赞同：1
> 
> 时间：2012-09-17T08:54:41.803
> 
> 标签：visual-studio, svn, ankhsvn

我第一次使用带有 Visual Studio + AnkhSVN 插件的 Apache Subversion。我一个人用，只是为了测试。如果我提交新的更新，总有一个字段可以描述我的更改（提交消息）。我认为这是一个好主意，因为我总是可以协议我在那里做的事情。但不知何故，我从来没有在任何地方看到过这段文字。所以这个协议没有任何意义？或者我怎么能看到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:01:51.523

提交消息将存储在 subversion 存储库中 - 您需要查看提交日志才能看到它。

当您右键单击文件 Subversion -> 查看历史记录时，可以看到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:43:58.970

**什么是日志（提交）消息？**日志消息是与存储库中的更改一起存储的已提交更改的人类可读描述。

即使用命令行，您始终可以查看与每个修订相关的存储库日志和日志消息：[`svn log URL[@REV] [PATH...]`](http://www.visualsvn.com/support/svnbook/ref/svn/c/log/)

我建议您查看 SVNBook 文章[“基本工作周期”](http://www.visualsvn.com/support/svnbook/tour/cycle/)。它描述了 Apache Subversion 的基本工作流程，您的问题也包含在其中。不要害怕文章中的命令行——它会让你很好地理解你实际在做什么。

# xml-parsing - 使用 JAX-B 将标签的值和子标签作为字符串获取，或者告诉我另一个标准。可以做到这一点的解析器

> ID：12455939
> 
> 赞同：1
> 
> 时间：2012-09-17T08:54:59.660
> 
> 标签：xml-parsing, jaxb

我有一个具有以下格式的 XML（一个简化的示例）

```
<Service id = "1">
<Message>
<options id="standard"> 
                    <option name="autorendered"> 
                        <value> 1</value> 
                    </option> 
                    <option name="environment"> 
                        <value> V</value> 
                    </option> 
                    <option name="document_name"> 
                        <value> Mail - MY Test Mail2.pdf</value> 
                    </option> 
                    <option name="document_provider"> 
                        <value> LNotes</value> 
                    </option> 
</options>
</Message>
</Service>

<Service id = "2">
    <Message>
    <options id="standard"> 
                        <option name="autorendered"> 
                            <value> 4</value> 
                        </option> 
                        <option name="environment"> 
                            <value> V</value> 
                        </option> 
                        <option name="document_name"> 
                            <value> attachment1.jpg</value> 
                        </option> 
                        <option name="document_provider"> 
                            <value> LNotes</value> 
                        </option> 
    </options>
    </Message>
    </Service> 
```

现在，当我使用 JAXB 并创建映射类时，它可以正常工作。但是我需要 Message 标记的值，无论它们之间是什么字符串，但如果我这样做，它会返回空值。但是如果我有一个像 hello 和 use 这样的标签`service.getMessage()`，它会正确地返回我`hello`。

`<options>.....</option>`我希望 service.getMessage作为字符串返回。

如果在 JAX-B 中不可能，请建议我使用其他方法，例如 Jaxpath、Xpath、Stax 或其他一些标准公认的方法。

我的服务类看起来像这样 -

```
public class Service {      
    private Request request;

    @XmlElement(name = "Request")
    public Request getRequest() {
        return request;
    }

    public void setRequest(Request edmsRequest) {
        this.request = request;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:00:06.127

当 JAXB 创建 POJO 时，是否有一个方法可以根据需要创建字符串？
您可以创建一个实用程序方法来做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:55:34.450

`@XmlAnyElement`注释可用于在生成的对象结构中将 XML 文档的部分保留为 XML 。`@XmlAnyElement`注释允许您设置一个`DomHandler`允许您控制 XML 的表示方式：DOM、String 等。

**例子**

*   [如何使用 JAXB 编组有时包含 XML 内容有时不包含的字符串？](https://stackoverflow.com/questions/12428727/how-to-marshall-a-string-using-jaxb-that-sometimes-contains-xml-content-and-some/12429211#12429211)
*   [使用 JAXB 提取 XML 元素的内部文本](https://stackoverflow.com/questions/5537416/using-jaxb-to-extract-inner-text-of-xml-element/5553682#5553682)
*   [http://blog.bdoughan.com/2011/04/xmlanyelement-and-non-dom-properties.html](http://blog.bdoughan.com/2011/04/xmlanyelement-and-non-dom-properties.html)

# java - 评估所有锦标赛场景

> ID：12455943
> 
> 赞同：0
> 
> 时间：2012-09-17T08:55:22.677
> 
> 标签：java, data-structures, branch, fork

我有一个`Tournament`包含匹配列表的对象，每个对象都有 player1 或 player2 获胜的概率，存储在`Map<Player, Float>`.
我在比赛列表中进行迭代，`i`并`i + 1`使用他们的获胜者创建一个新的比赛。获胜者是这样选择的：如果 p1（或 p2）以高于某个阈值的概率获胜，我选择它，否则我必须分支并评估两种情况（情况 1：p1 获胜 - 情况 2：p2 获胜）。
我的目标是创建所有可能的场景并评估所有可能的锦标赛获胜者。
我可以在没有分支的情况下做到这一点（只需递归评估所有比赛获胜者，直到只有最后一场比赛），但如果我想要所有场景，我真的不知道该怎么做。
有任何想法吗？我应该使用哪种数据结构？是否可以做类似 C 的事情`fork`并使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:57:18.713

> 是否可以做类似 C fork 的事情并使用它？

您可以使用 ExecutorService 提交任意数量的任务。假设它们受 CPU 限制，您可能希望使用固定线程池，其大小为`Runtime.getRuntime.availableProcessors()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:04:10.393

您可能正在寻找某种树浏览算法。您可以使用[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)或[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)。使用递归基本上是使用后者，但要注意，Java 堆空间不够用是很常见的，最终您将不得不自己实现它。

BFS 和 DFS 非常相似，它们在使用数据结构时有所不同。BFS 使用队列，由 JSE 实现`LinkedList`，而 DFS 使用栈，由`Stack`类实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:10:54.373

最后我用蒙特卡洛方法解决了。我多次参加比赛（10k），每次模拟都会根据他的概率选择每场比赛的获胜者。由于我运行了很多次，我确信我会遇到所有可能的情况（我一步一步地保存它们，以及预测的锦标赛获胜者）。它被证明是快速有效的，不需要额外的数据结构（只需一组保存所有场景和一张地图来保存锦标赛获胜者的概率）。

# wcf - DBContext 模板的 DataMember 和 DataContract 属性

> ID：12455953
> 
> 赞同：1
> 
> 时间：2012-09-17T08:56:03.667
> 
> 标签：wcf, entity-framework, dbcontext

我刚开始使用 EF 的项目。在 VS 2012 中，edm 模型的默认模板现在是 DBContext 代码生成的模板。我进行了很多搜索，但在任何地方都找不到关于如何将 WCF 与 DbContext 一起使用的说明。我需要构建一个 WCF 服务（不是 WCF 数据服务），所以我的问题是：

1.  我是否必须添加 WCF DataContract/DataMember 属性才能进行序列化。我应该如何将 DBContext 与 WCF 一起使用（我没有使用任何 DTO）。我将通过网络发送从 DBContext 模板生成的 POCO。

2.  如果我必须添加属性，有没有办法像[在这篇文章中](https://stackoverflow.com/questions/3678121/adding-datamember-datacontract-attributes-in-entity-framework-poco-template)那样修改模板以自动添加 DataMember/DataContract 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:34:10.630

DBContext 用于实体到实体的映射。它用于将数据保存到数据库中。但是，如果您想传递出去，那么您只需创建一个 prtail 类，然后创建 Metadatatype，然后您可以自定义该实体，然后您可以发送它。

请查看实体框架中的元数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:07:57.470

我设法使用[答案](https://stackoverflow.com/questions/3678121/adding-datamember-datacontract-attributes-in-entity-framework-poco-template)编辑模板，因为我使用的是 Entity 4.x 而不是 EF 5。[用户](https://stackoverflow.com/users/287824/eka808)在[同一答案](https://stackoverflow.com/questions/3678121/adding-datamember-datacontract-attributes-in-entity-framework-poco-template)的评论中提到了模板的唯一区别。

# delphi - 如何在 dll 中实例化通常需要 parent(TWinControl) 的类？

> ID：12455954
> 
> 赞同：0
> 
> 时间：2012-09-17T08:56:05.107
> 
> 标签：delphi, delphi-7

我必须动态地使用通常具有视觉部分的组件。该可视部分可以关闭，但是当我创建它需要父组件时。

我必须在 dll 库中使用该组件。是否有可能以及如何解决该问题？我怎样才能通过父母？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:20:37.473

创建一个隐藏的窗口句柄，例如使用[`AllocateHWnd(nil)`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.AllocateHWnd). 然后通过调用[`CreateParented`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TWinControl.CreateParented)传递隐藏的窗口句柄来创建您的控件。

# postgresql - 计算下一个主键 - 特定格式

> ID：12455962
> 
> 赞同：2
> 
> 时间：2012-09-17T08:56:34.583
> 
> 标签：postgresql, primary-key

我有一个表，其中包含一个 ID 列表，以及 IDName 等各种其他列。

表的主键是 ID 本身，但它不是 auto_increment。所以，我希望能够生成/计算下一个主键，但是有一个转折：

主键应采用特定格式，即 8 位 ID 由三部分组成：
`<the level><a code><a sequence #>`，例如`<2><777><0123> = 27770123`

因此，当我为表创建新 ID 时，我想要特定级别和代码的下一个序列号。例如，按照上面的示例，我可能想知道代码 777 的级别 2 的下一个序列号，结果应该是 ID 27770124（0124 是序列中的下一个）。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T09:39:17.277

这看起来像是[无间隙序列问题](https://stackoverflow.com/questions/6988910/postgresql-column-values-must-be-in-a-sequence)的变体；也看到[这里](https://stackoverflow.com/questions/1054843/how-to-prevent-primary-serial-primary-key-from-being-updated-with-number-not-in?rq=1)。

无缝序列存在严重的性能和并发问题。

仔细想想当多个插入同时发生时会发生什么。您必须准备好重试失败的插入，或者`LOCK TABLE myTable IN EXCLUSIVE MODE`在此之前`INSERT`一次`INSERT`只能进行一次。

## 使用带有行锁定的序列表

在这种情况下我会做的是：

```
CREATE TABLE sequence_numbers(
    level integer,
    code integer,
    next_value integer DEFAULT 0 NOT NULL,
    PRIMARY KEY (level,code),
    CONSTRAINT level_must_be_one_digit CHECK (level BETWEEN 0 AND 9),
    CONSTRAINT code_must_be_three_digits CHECK (code BETWEEN 0 AND 999),
    CONSTRAINT value_must_be_four_digits CHECK (next_value BETWEEN 0 AND 9999)
);

INSERT INTO sequence_numbers(level,code) VALUES (2,777);

CREATE OR REPLACE FUNCTION get_next_seqno(level integer, code integer)
RETURNS integer LANGUAGE 'SQL' AS $$
    UPDATE sequence_numbers 
    SET next_value = next_value + 1
    WHERE level = $1 AND code = $2
    RETURNING (to_char(level,'FM9')||to_char(code,'FM000')||to_char(next_value,'FM0000'))::integer;
$$; 
```

然后获取ID：

```
INSERT INTO myTable (sequence_number, blah)
VALUES (get_next_seqno(2,777), blah); 
```

这种方法意味着一次只有一个事务可以插入具有任何给定（级别，模式）对的行，但我认为它是无竞争的。

## 谨防死锁

如果两个并发事务尝试以不同的顺序插入行，仍然存在一个问题。对此没有简单的解决方法。您必须对插入进行排序，以便始终在高级别之前插入低级别和模式，每个事务执行一次插入，或者忍受死锁并重试。我个人会做后者。

问题示例，有两个 psql 会话。设置是：

```
CREATE TABLE myTable(seq_no integer primary key);
INSERT INTO sequence_numbers VALUES (1,666) 
```

然后在两个会话中：

```
SESSION 1                       SESSION 2

BEGIN;
                                BEGIN;

INSERT INTO myTable(seq_no)
VALUES(get_next_seqno(2,777));
                                INSERT INTO myTable(seq_no)
                                VALUES(get_next_seqno(1,666));

                                INSERT INTO myTable(seq_no)
                                VALUES(get_next_seqno(2,777));

INSERT INTO myTable(seq_no)
VALUES(get_next_seqno(1,666)); 
```

您会注意到会话 2 中的第二个插入将挂起而不返回，因为它正在等待会话 1 持有的锁。当会话 1 继续尝试在其第二次插入中获取会话 2 持有的锁时，它也会悬挂。无法取得任何进展，因此一两秒后 PostgreSQL 将检测到死锁并中止其中一个事务，允许另一个事务继续：

```
ERROR:  deadlock detected
DETAIL:  Process 16723 waits for ShareLock on transaction 40450; blocked by process 18632.
Process 18632 waits for ShareLock on transaction 40449; blocked by process 16723.
HINT:  See server log for query details.
CONTEXT:  SQL function "get_next_seqno" statement 1 
```

您的代码必须准备好处理此问题并重试*整个事务*，或者必须使用单插入事务或仔细排序来避免死锁。

## 自动创建不存在的（级别、代码）对

`sequence_numbers`顺便说一句，如果您希望在第一次使用时创建表中尚不存在的（级别，代码）组合，那么正确处理起来非常复杂，因为它是[upsert 问题](http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/)的变体。我个人会修改`get_next_seqno`为如下所示：

```
CREATE OR REPLACE FUNCTION get_next_seqno(level integer, code integer)
RETURNS integer LANGUAGE 'SQL' AS $$

    -- add a (level,code) pair if it isn't present.
    -- Racey, can fail, so you have to be prepared to retry
    INSERT INTO sequence_numbers (level,code)
    SELECT $1, $2
    WHERE NOT EXISTS (SELECT 1 FROM sequence_numbers WHERE level = $1 AND code = $2);

    UPDATE sequence_numbers 
    SET next_value = next_value + 1
    WHERE level = $1 AND code = $2
    RETURNING (to_char(level,'FM9')||to_char(code,'FM000')||to_char(next_value,'FM0000'))::integer;

$$; 
```

此代码可能会失败，因此您必须始终准备好重试事务。正如那篇 depesz 文章所解释的，更强大的方法是可能的，但通常不值得。如上所述，如果两个事务同时尝试添加相同的新 (level,code) 对，其中一个将失败：

```
ERROR:  duplicate key value violates unique constraint "sequence_numbers_pkey"
DETAIL:  Key (level, code)=(0, 555) already exists.
CONTEXT:  SQL function "get_next_seqno" statement 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:20:45.010

好的，到目前为止我已经想出了，我认为这将满足我的要求（除非有任何关于更优化方法的建议？）

```
SELECT ID 
FROM myTable 
WHERE ID > 27770000 
  AND ID < 27780000 
ORDER BY ID DESC 
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:13:46.930

除非您的应用程序的需求非常高，否则冲突的数量将非常低。因此，如果引发关键错误，我会简单地重试。

```
select coalesce(max(id), 27770000) + 1
from myTable
where id / 10000 = 2777 
```

如果该级别/代码尚不存在，则合并存在。

# python - Minidom：如何检查我是否有预期的根和孩子？

> ID：12455972
> 
> 赞同：3
> 
> 时间：2012-09-17T08:56:55.610
> 
> 标签：python, xml, minidom

我有这个xml结构，

```
<root>

    <child1>
    </child1>
    <child2>
    </child2>
    <child3 />
    <extendedchild:name>
    </extendedchild:name>

</root> 
```

我怎样才能检查 minidom ，那个 root 是`root`，那个 children 总是下面的元素？

```
child1
child2
child3
extendedchild 
```

我还想在上面的“子列表”（**outofroot，notachild**）中打印不在根目录或不在根目录的元素：...

```
 <notachild />
</root>
<outofroot /> 
```

**编辑**：似乎`outofroot`元素被`minidom`解析器处理，它给出了`xxxxxxx.xml has an error: junk after document element: line 12, column 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:01:47.843

至于根元素名称检查，看起来你可以这样做：

```
import xml.dom.minidom
dom = xml.dom.minidom.parseString(xmlString)
if dom.documentElement.tagName == "root" ... 
```

您应该能够 for..in 迭代根目录的`.childNodes`.

如果某些内容在根之外，则它不是格式良好的 XML 文档（只能有一个根节点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:04:15.543

您可以使用 minidom 遍历子节点并验证根节点的名称是`"root"`. 然后，您可以一次处理一个子项并验证其他要求。

```
if not root.tagName == "root":
   # do something
for node in root.childNodes:
   # do something more 
```

如有必要，您可以递归处理子节点。

```
def processChild(node):
    # do some checks on node
    for child in node.childNodes:
        processChild(child) 
```

# android - 如何在所选列表项上填充颜色

> ID：12455973
> 
> 赞同：1
> 
> 时间：2012-09-17T08:56:57.090
> 
> 标签：android

我想设置列表视图所选项目的颜色。我已经设置了列表视图项目和颜色。

```
 { 
    setListAdapter(new ArrayAdapter<String>(getActivity(),
R.layout.simple_list_item_checkable_1, android.R.id.text1,Data.PERSON));

    ListView listView = getListView();
    listView.setTextFilterEnabled(true);

    listView.setOnItemLongClickListener(new OnItemLongClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,int position, long id) {

    int childCount = parent.getChildCount();
    for (int i = 0; i < childCount; i++) {
    View listItem = parent.getChildAt(i);

    if (listItem != null)
    parent.setBackgroundColor(0x00000000);  
    view.setBackgroundColor(Color.RED);     
    }
      });       
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:01:05.487

您可以使用：

在包含 listView 的 XML 中声明以下属性。

```
android:listSelector="#AF5c12" // any color code to set color to selected item from list. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:02:14.487

使用`listSelector`属性设置选定项目的颜色：

```
<ListView android:id="@+id/list" 
  android:layout_width="fill_parent"
  android:layout_height="wrap_content" 
  android:layout_gravity="center"
  android:divider="@null" 
  android:dividerHeight="0dip"
  android:listSelector="@drawable/list_selector" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:02:14.763

您可以在 xml 中设置所选项目的颜色：

```
 <ListView
      android:listSelector="@android:color/holo_red_dark"
  </ListView 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:03:10.283

这样做：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

   <item android:state_pressed="true">
       <shape  >
         <solid android:color="#929292" />
       </shape>
   </item>

   <item>
     <shape  >
        <solid android:color="#FFFFFF" />
     </shape>
   </item>

 </selector> 
```

使用此属性`android:state_pressed="true"`，当您按下它时，它将为所选项目设置颜色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T10:33:52.460

对于最低 API 级别**11**：创建一个属性为**android:state_activated=true/false**的选择器文件， 并将其设置为列表项的背景。还包括代码：**listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);**

对于其他 API 级别：您必须创建一个自定义数组适配器并在其中添加以下方法。最初**选择位置 = -1;** // 这样做是为了在第一次加载列表时删除选择。

```
public void setseletion(int position) {
   this.selectedPosition = position; // selected position in the list
   notifyDataSetChanged();
} 
```

在 getView() 方法中，除了设置列表之外，还包括

```
public View getView(int position, View convertView, ViewGroup parent) {
if (position == selectedPosition) {
        convertView.setBackgroundColor(getResources().getColor(
                    R.color.gray));
} else {
        convertView.setBackgroundColor(getResources().getColor(
                    R.color.transparent));
} 
```

最后将其包含在列表视图的 OnItemClickListener 中。

```
public void onItemClick(AdapterView<?> arg0, View view, int position,
        long arg3) {
    MyArrayAdapter adapter = (MyArrayAdapter) listView.getAdapter();
    adapter.setseletion(position);
} 
```

# tfs - Team Foundation Server - 源代码设置

> ID：12455976
> 
> 赞同：0
> 
> 时间：2012-09-17T08:57:09.667
> 
> 标签：tfs

我目前正在为工作中的一个新项目设置 TFS，并提出了在源代码的根目录中仅包含以下 3 个目录的想法。

*   树干
*   分支机构
*   标签

主干 - 这将包含所有其他分支从中派生的代码库。

分支 - 这将包含开发期间使用的代码库的所有分支。

tags - 将包含使用以下结构标记的所有版本

标签\项目 x\version-1.1\staging

标签\项目 x\version-1.1\live

但是，这种标记目录结构让我想到，它们无法区分来自主干的发布和来自特定分支的发布。

因此，最好在主干和每个单独的分支中都有标签文件夹吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:12:18.143

When you build a production release version, you should tag it. The tag could include its origin, e.g.

-> Tags

```
-> Production from Trunk (02/02/2013 17:45:21)

-> Production from Branch [EBF - Incident 90210] (03/02/2013 19:13:11) 
```

This should be possible to automate with most continuous integration tools.

# javascript - 如何在javascript中动态设置组合框的值

> ID：12455981
> 
> 赞同：2
> 
> 时间：2012-09-17T08:57:29.913
> 
> 标签：javascript, html, combobox

这就是我使用 dwr 调用为组合框设置值的方式，

`var reportID = '<%=reportid%>'; var reportName = '<%=reportname%>'; loadReportNames(reportUserID);`

```
function loadReportNames(reportUserID){
    CustomiseReportAction.getReportNames(reportUserID, addReportNamesDropDown);
}
function addReportNamesDropDown(resultMap){
    dwr.util.removeAllOptions("reportnames");
    dwr.util.addOptions("reportnames",resultMap);
} 
```

加载组合框后，我将值设置为加载的组合，如下所示，

```
document.getElementById("reportnames").value=reportID; 
```

但未设置reportID，

可能是什么问题，请帮我解决这个问题。

```
UPDATE :

function addCombo() {
    var reportID = '<%=reportid%>';
    var reportName = '<%=reportname%>';
    var textb = document.getElementById("reportnames");

    var option = document.createElement("option");
    option.text = reportName;
    option.value = reportID;
    option.selected="selected";
    try {
        textb.add(option, null); //Standard
    }catch(error) {
        textb.add(option); // IE only
    }
    textb.value = "";
} 
```

使用上述方法它没有给我任何例外，但没有结果。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:08:36.803

**编辑**：我只是仔细检查了一下，它应该像你一样工作，所以忽略我原来的帖子。您确定 reportID 的内容与选项之一完全匹配吗？如果它是一个数字，而不是一个字符串，你可能想尝试

```
document.getElementById("reportnames").value = "" + reportID; 
```

**原文**：要设置组合框的选定选项（假设您的意思是 html“选择”），您需要将所需选项的“选定”属性设置为 true。

```
var select = document.getElementById("reportnames");
for (var i = 0; i < select.options.length; i++)
{
    if (...)
        select.options[i].selected = true;
} 
```

您将需要某种方法来识别该选项，我将通过在其中保存 reportID 来做到这一点。然后您可以将 ... 替换为：

```
select.options[i].ReportId == reportID 
```

如果您将 reportID 设置为每个选项的“id”属性，您甚至可以这样做：

```
document.getElementById(reportID).selected = true; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T11:46:11.233

我没有删除该值，而是添加了以下代码，它解决了我的问题。

```
function addCombo() {
    var reportID = '<%=reportid%>';
    var options= document.getElementById('reportnames').options;
    for (var i= 0, n= options.length; i < n ; i++) {
        if (options[i].value==reportID) {
            document.getElementById("reportnames").selectedIndex = i;
            break;
        }
    }
} 
```

# c# - 如何在 VS2010 中快速有效地取消搁置我的代码？是否可以？

> ID：12455985
> 
> 赞同：2
> 
> 时间：2012-09-17T08:57:48.050
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, tfs

我最近阅读了关于搁置的文章，并认为这是一个非常有用的概念。所以，下次有人来找我时，我的应用程序中有一个错误，我搁置了我正在做的大量工作，修复了错误（对类进行了大约 30/40 的更改并进行了一些重构）并签入了已修复的代码。

我现在想取消搁置我正在处理的代码，但也要保留我所做的更改。问题是，我已经对服务器上的文件进行了这些广泛的更改，这些更改还没有被搁置。

我可以在这里做什么？似乎需要数小时/数天才能再次合并所有内容。我知道 Eclipse 有一个很棒的功能，您可以在其中比较两个文件，并为每次更改决定您是使用服务器上的版本还是本地版本。像这样的东西，我可以选择搁置版本或本地版本，这将是完美的。

有什么东西可以让我的生活更轻松，还是我注定要翻阅搁置集，查看每个有冲突的文件，查看服务器版本，查看本地版本，将本地版本的部分复制到记事本文件中，将它们复制到服务器版本......等等等等。这似乎是一个可怕的混乱。

谁能帮我吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T14:34:00.043

不应要求您仅*选择*服务器版本或本地版本。您应该能够像以前那样使用 3 路合并工具来解决冲突。

听起来您在这里遵循推荐的做法：

*   如果您有某个文件，假设它是版本 2 的最新版本，并且您开始编辑它，您将对该文件进行待处理的更改。
*   当您搁置该文件（撤消挂起的更改）时，您将回到没有挂起更改的版本 2。
*   如果您编辑该文件并将其签入，则服务器将处于新版本（假设它是版本 3）
*   如果您随后取消搁置现有搁置集，您的更改将再次针对版本 2，这意味着当您的更改针对非最新版本挂起时：

    ![源代码管理资源管理器](../Images/324e3505d6e5398b572e1ef80d913d2f.png)

可以理解，这意味着你有冲突。当您执行“获取最新”或“签入”时，您将能够解决这些冲突。这些应显示在 Visual Studio 底部的视图中：

![分辨率选项](../Images/b773c591abc7b46ca2924c2fe44cc966.png)

正如您所注意到的，可以选择“获取服务器版本”和“保留本地版本”。但是您也应该有机会使用 AutoMerge（如果更改*可以*自动合并，即您没有在服务器和本地文件中都更改过的文件区域）和 Merge Changes In Merge Tool（这将打开一个三向合并工具。）

如果您在 Merge Tool 中选择 Merge Changes，您将获得内置的 3 路合并工具：

![三向合并工具](../Images/34a4309b4b3c76b989ea9dd38ba9f754.png)

如果你不喜欢内置的 3 路合并工具（我不喜欢 2010 中包含的那个，VS 2012 包含*更好*的体验），你可以在 Visual Studio 中插入任何 3 路合并工具选项：

![配置合并工具](../Images/2d91f05061558a2f174217c6dd0f1aa9.png)

如果完全缺少 Merge In Merge Tool 的选项，则 TFS 可能认为您正在处理二进制文件。在 TFS 中，当文件被标记为二进制文件时（更准确地说，当“文件合并”设置为“禁用”时）您将无法选择自动合并这些文件，或在合并工具中合并它们。这是一种优化，以避免在冲突期间下载两个额外的大型二进制文件副本，并避免试图将它们塞进合并引擎。

您可以通过打开团队资源管理器、右键单击您的项目集合并选择团队项目集合设置 > 源代码控制文件类型来配置“不可合并”的文件类型...确保列出您正在使用的文件类型在此对话框中作为“可合并”：

![文件类型对话框](../Images/2e6aed0ea9071864d8b6b22c5258e1f7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:54:14.593

在取消搁置之前单击`Get Specific Version...`您的项目。在新窗口中，将 Type 从更改`Latest Version`为其他选项之一（最适合您的情况，最有可能是 Changeset 或 Date）。您的目标是选择搁置更改时计算机上的更改集。

![在此处输入图像描述](../Images/a2a92e652eba7d24a16b8ad36e218a00.png)

一旦您签出与 selved set 相同的版本，您就可以无错误地取消搁置。然后执行`Get Latest`并解决当时发生的任何冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:05:11.223

我认为你可以检查你的代码然后加载你的搁置。如果需要，请撤消更改并再次签入。

在 TFS 和 VS2010 中也可以通过 line 进行合并。如果存在合并冲突，它会告诉您。Sourcecontrol 的一个不错的功能是您始终可以前后移动。

# jquery - Jquery标签：如何停止点击跳转？

> ID：12455997
> 
> 赞同：2
> 
> 时间：2012-09-17T08:58:29.523
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我添加了一些 JQuery 选项卡，每次单击其中一个选项卡时，链接的 ID 都会附加到 url 并跳转到 url，这真的很烦人。我已经寻找了一些修复程序，例如设置超时和停止回发，但似乎没有任何效果，有人有什么想法吗？

```
<script type="text/javascript">

      $(document).ready(function () {        

          $('.moo').click(function (evt) {
            // stops from submitting the form
            evt.preventDefault();
            return false;
        });

        $("#tabs").tabs();

        setTimeout(function () {
            if (location.hash) {
                window.scrollTo(0, 0);
            }
        }, 1);

    });

</script>

<div id="tabs">
    <ul>
        <li><a href="#tabs-1" class="moo" onclick="return false;" >Nunc tincidunt</a></li>
        <li><a href="#tabs-2" class="moo" onclick="return false;" >Proin dolor</a></li>
    </ul>

    <div id="tabs-1">
        <uc1:PrizeDrawMiniListControl ID="PrizeDrawMiniListControl1" runat="server" />
    </div>

    <div id="tabs-2">
        <uc2:MostViewedControl ID="MostViewedControl1" runat="server" />
    </div>
</div> 
```

编辑：

链接没有发回，它只是滚动

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:17:53.573

[http://jsfiddle.net/3au7K/](http://jsfiddle.net/3au7K/)现在工作正常。

将您的javascript函数更改为此

```
$(document).ready(function () {        

      $('.moo').click(function (evt) {
        // stops from submitting the form
        evt.preventDefault();
        return false;
    });

    $("#tabs").tabs();

    // This will work for dynamically added tabs as well

    $("#tabs ul li").delegate('a', 'click', function(e){
         e.preventDefault();
         return false;
    });
}); 
```

这个小技巧可以解决问题。它没有什么害处，因为 JQuery 选项卡在初始化后不需要 href 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:04:19.163

从锚标记中删除`onclick=return false;`并尝试这样：

```
$('a[href^="tabs-"]').on('click', function(e) {
  e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T19:40:48.920

这将防止任何锚从 jquery 选项卡跳转:) （将滚动位置移回原始点击）。

```
$('div.ui-tabs ul li a').click(function(e) {
  e.preventDefault();
  scroll_position = $(window).scrollTop();
  $('html, body').animate({
    scrollTop: scroll_position
  }, 0);
}); 
```

# r - 如何在单个密度图中获得多条线，并具有校正的比例？

> ID：12455998
> 
> 赞同：8
> 
> 时间：2012-09-17T08:58:29.857
> 
> 标签：r, scale, sample

> **可能重复：**
> [如何在 R 中叠加密度图？](https://stackoverflow.com/questions/6939136/how-to-overlay-density-plots-in-r)

我最近开始使用微阵列数据集，并试图掌握 R。我希望从我的结果数据中制作一些图，但是我被困在下面。

我有以下数据（myData），

```
cpg samp1 samp2 samp3 
cpg1 0.43 0.32 0.21 
cpg2 0.43 0.22 1.00 
cpg3 0.11 0.99 0.78 
cpg4 0.65 0.32 0.12 
cpg5 0.11 0.43 0.89 
```

我希望为此获得一个密度图，

我做了以下，

```
plot (density(MyData$samp1), col="red") 
lines (density(MyData$samp2), col="green") 
lines (density(MyData$samp3), col="blue") 
```

但是这样做并不能给我正确的绘图，因为并非所有样本曲线都符合绘图限制。我确实尝试过寻找答案，但老实说，我仍然无法解决这个问题。你能帮我知道如何为上述设置我的比例吗？或者我应该对上面的代码做些什么，以便所有曲线都在范围内？我有很多样本，所以我需要一个可以在正确缩放后自动为每个样本分配不同颜色曲线的东西。

提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T09:14:33.177

您将需要更改原始绘图的轴限制以适应所有内容。添加不同的行时，这不会自动为您完成：

例如

```
plot (density(MyData$samp1), col="red",ylim=c(0,3.5),xlim=c(-1,2)) 
lines (density(MyData$samp2), col="green") 
lines (density(MyData$samp3), col="blue") 
```

![在此处输入图像描述](../Images/6055d4a3084e350921d7de69c21a5ad5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T09:47:52.777

使用这个`lattice`包（我敢肯定一个`ggplot2`例子就在后面），你可以使用这个`densityplot`函数：

```
library(lattice)
densityplot(~ samp1 + samp2 + samp3, data = myData, auto.key = TRUE) 
```

![在此处输入图像描述](../Images/4240928f0513704f856f4b00b79dbd25.png)

或者`reshape2`在绘图之前使用该包将您的数据转换为高格式：

```
library(reshape2)

myDataM<-melt(myData)

densityplot(~ value, groups = variable, data = myDataM, auto.key = TRUE) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T09:36:47.953

您还可以自动生成 x 轴和 y 轴的限制：

```
ranges <-  apply(MyData, 2,
             function(x) { dens <- density(x); c(range(dens$x), range(dens$y)) })

plot(density(MyData$samp1), col="red",
       xlim = range(ranges[1:2, ]), ylim = range(ranges[3:4, ])) 
lines(density(MyData$samp2), col="green") 
lines(density(MyData$samp3), col="blue") 
```

![密度](../Images/8f6ebefa2aac9751bfb56a428fbdf499.png)