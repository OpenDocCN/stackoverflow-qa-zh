# StackOverflow 问答 11387000-11387999

# javascript - 如何使用 Javascript 手动调用 CSS 动画？

> ID：11387000
> 
> 赞同：2
> 
> 时间：2012-07-08T21:50:48.640
> 
> 标签：javascript, css, uiwebview

我正在使用带有 CSS 动画的 UIWebView，它在主体从 alpha 0 加载到 1 时为主体设置动画：

```
 NSString *HTML = [NSString stringWithFormat:@"<html> \n"
                      "<head> \n"
                      "<style type=\"text/css\"> \n"
                      "@-webkit-keyframes fadeIn {from {opacity: 0;-webkit-transition: opacity;}to {opacity: 1;}} \n"
                      "body {\n"
                      "-webkit-animation-name:fadeIn;\n"
                      "-webkit-animation-duration: 1.5s;\n"
                       ... 
```

我的问题是，我将如何使用 Javascript 手动调用此动画，以便在任何时候，如果我调用 JS，视图的动画从 0 到 1（而不仅仅是在加载时动画）？或者这对于 CSS 是不可能的？

基本上我想这样做：

```
[mainWebView stringByEvaluatingJavaScriptFromString:@"/*animate*/"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:08:00.503

您可以通过将过渡添加到主体并稍后添加一个类来更改属性，并在您选择时通过 jQuery 或任何其他库附加到主体的过渡来更改属性。这里有一个简单的例子：

[http://jsfiddle.net/Fwteu/4/](http://jsfiddle.net/Fwteu/4/)

还有一个示例，该示例通过回调为不透明度设置动画以显示主体：

[http://jsfiddle.net/tCfb5/](http://jsfiddle.net/tCfb5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:02:36.873

您只需`opacity: 0`在普通 CSS 中设置（通过类或其他方式），然后`domObject.style.opacity = 1`在加载时运行的 JavaScript 中进行设置。动画在属性更改时发生，因此您只需在希望动画发生时更改属性。

# python - 如何使用 App Engine 获取 Jinja2 中继承模板的特定回溯？

> ID：11387001
> 
> 赞同：2
> 
> 时间：2012-07-08T21:51:05.033
> 
> 标签：python, google-app-engine, jinja2

每当我的 App Engine 项目中继承的 Jinja2 模板出现错误时，我都会得到一个回溯，它仅指定导致继承的行，而不是导致错误的行。

例如，我创建了一个带有两个模板的虚拟项目，`page.html`并且`base.html`. `page.html`继承自`base.html`并`base.html`具有设计为导致错误的行。App Engine/Jinja 不会报告错误，而是`base.html`给我这个回溯：

```
Traceback (most recent call last):
  File "/home/kkinder/Software/google_appengine/lib/webapp2/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/home/kkinder/Software/google_appengine/lib/webapp2/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/home/kkinder/Software/google_appengine/lib/webapp2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/home/kkinder/Software/google_appengine/lib/webapp2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/home/kkinder/Software/google_appengine/lib/webapp2/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/home/kkinder/Software/google_appengine/lib/webapp2/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/home/kkinder/Projects/JinjaTestProject/main.py", line 11, in get
    self.response.out.write(self.jinja2.render_template('page.html'))
  File "/home/kkinder/Software/google_appengine/lib/webapp2/webapp2_extras/jinja2.py", line 158, in render_template
    return self.environment.get_template(_filename).render(**context)
  File "/home/kkinder/Software/google_appengine/lib/jinja2/jinja2/environment.py", line 894, in render
    return self.environment.handle_exception(exc_info, True)
  File "templates/page.html", line 1, in top-level template code
    {% extends 'base.html' %}
UndefinedError: 'doesnotexist' is undefined 
```

主要.py：

```
import webapp2
from webapp2_extras import jinja2

class MainHandler(webapp2.RequestHandler):
    @webapp2.cached_property
    def jinja2(self):
        return jinja2.get_jinja2(app=self.app)

    def get(self):
        self.response.out.write(self.jinja2.render_template('page.html'))

app = webapp2.WSGIApplication([('/', MainHandler)],
                             debug=True) 
```

page.html：

```
{% extends 'base.html' %}
{% block content %}
    Stuff
{% endblock %} 
```

base.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
</head>
<body>
<h1>{{ doesnotexist.foo }}</h1>
    {% block content %}{% endblock %}
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:49:17.070

不幸的是，在生产环境中无法在 GAE 上获得更好的 Jinja2 调试信息，因为它们限制了对所需软件包的访问。您可以在官方常见问题解答中找到有关此问题的更多信息[：我的回溯看起来很奇怪。发生了什么？](http://jinja.pocoo.org/docs/faq/#my-tracebacks-look-weird-what-s-happening)

# sql - 加入两个相似的表

> ID：11387007
> 
> 赞同：1
> 
> 时间：2012-07-08T21:51:30.643
> 
> 标签：sql, join, group-by

这是表 1 的数据。

```
BUYER_ID     |    ITEM_ID         |      CREATED_TIME 
-------------+--------------------+------------------------
1015826235       220003038067            2001-11-03 19:40:21
1015826235       300003861266            2001-11-08 18:19:59
1015826235       140002997245            2003-08-22 09:23:17
1015826235       200002448035            2001-11-11 22:21:11
1015826235      *260003553381*          *2005-05-27 07:09:56*
1015826235      *260003553382*          *2002-02-02 19:40:39*
2012926235      *260003553383*          *2002-06-01 06:58:47* 
```

如果您将 `Table1`数据与以下`Table2`数据进行比较，则在将特定 USER_ID 与 BUYER_ID 的 Table1 数据进行比较后，Table2 数据中的最后三行将丢失。

```
USER_ID     |    PRODUCT_ID    |   TIMESTAMPS
------------+------------------+-------------
1015826235       220003038067      1004841621
1015826235       300003861266      1005268799
1015826235       140002997245      1061569397
1015826235       200002448035      1005542471 
```

因此，在将 Table1 与 Table2 连接之后，我需要在上面的示例中显示两个结果中的任何一个 -

```
BUYER_ID   |     ITEM_ID       |    CREATED_TIME         |     USER_ID     |       PRODUCT_ID     |   TIMESTAMPS
-----------+-------------------+-------------------------+-----------------+----------------------+------------------
1015826235       260003553381       2005-05-27 07:09:56       1015826235          NULL              NULL
1015826235       260003553382       2002-02-02 19:40:39       1015826235          NULL              NULL 
2012926235       260003553383       2002-06-01 06:58:47       2012926235          NULL              NULL 
```

**或者**

```
BUYER_ID   |     ITEM_ID       |    CREATED_TIME         |    PRODUCT_ID  |   TIMESTAMPS
-----------+-------------------+-------------------------+----------------+--------------
1015826235       260003553381       2005-05-27 07:09:56         NULL              NULL
1015826235       260003553382       2002-02-02 19:40:39         NULL              NULL 
2012926235       260003553383       2002-06-01 06:58:47         NULL              NULL 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:55:48.010

我相信您所追求的是[LEFT JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)运算符；

```
SELECT * 
FROM Table1 
LEFT JOIN Table2 ON Table1.ITEM_ID = TABLE2.PRODUCT_ID AND Table1.BUYER_ID = Table2.USER_ID 
WHERE Table2.PRODUCT_ID IS NULL 
```

我们实际上要说的是“将表 2 中具有匹配产品和用户 ID 的所有行以及所有不匹配的行（左连接位）带回给我。然后只显示那些没有匹配的东西匹配表 2（IS NULL 位）。”

联接在这里得到了巧妙的解释：

[Jeff Atwood 的 SQL 连接可视化指南](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T21:57:59.120

您只需要使用 a `LEFT JOIN`，即使连接表中没有匹配项，它也会包含源表中的行，为来自它的字段选择 NULL。

```
SELECT Table1.BUYER_ID
     , Table1.ITEM_ID
     , Table1.CREATED_TIME
     , Table2.USER_ID
     , Table2.PRODUCT_ID
     , Table2.TIMESTAMPS
  FROM Table1
       LEFT JOIN Table2 ON Table1.BUYER_ID = Table2.USER_ID 
```

您可以通过添加将上述内容过滤到 Table2 中缺少的行（以获取您的示例）

```
 WHERE BUYER_ID NOT IN (SELECT USER_ID FROM Table2) 
```

或者，删除`NOT`以获取匹配的记录（您的第二个示例）。

（您也可以使用`WHERE PRODUCT_ID = NULL`@dash 建议的，但它表达的意图并不完全相同。）

# c++ - 开始使用 AES 进行 crypto++ 解密

> ID：11387014
> 
> 赞同：0
> 
> 时间：2012-07-08T21:53:08.357
> 
> 标签：c++, encryption, cryptography, aes, crypto++

我正在尝试学习一些有关密码学的知识，并尝试将 AES 解密与 c++ 中的 crypto++ 库一起使用。我有一个密文字符串和一个密钥字符串。使用这两个，我想解密这个密文。这是我的代码：

```
#include "mycrypto.h"
#include <stdio.h>
#include <cstdlib>
#include <string>

#include <aes.h>
#include <config.h>
#include <hex.h>
#include <files.h>
#include <cryptlib.h>
#include <modes.h>
#include <osrng.h>
#include <filters.h>
#include <sha.h>
#include <rijndael.h>

using namespace std;
using namespace CryptoPP;

int main()
{

    string myPlainText;
    string myKey = "140b41";
    string myCipherText = "4ca00f";

    byte key[AES::DEFAULT_KEYLENGTH];
    byte iv[AES::BLOCKSIZE];

    CryptoPP::CBC_Mode<AES>::DECRYPTION decryptor;
    decryptor.SetKeyWithIV(key, sizeof(key), iv);

    StringSource(myCipherText, true, new StreamTransformationFilter( decryptor, new StringSink(myPlainText)));

    return 0;
} 
```

我收到此代码的许多错误。最直接的是这个：

> “解密”不是“CryptoPP::CBC_Mode”的成员

任何人都可以用这段代码理顺我。我一直在阅读 crypto++ 文档，但我看不出我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:59:10.100

我认为`DECRYPTION`是拼写`Decryption`。至少，在[这个例子](http://www.cryptopp.com/wiki/CBC)中是这样的。

# c++ - 使用参数从 c++ 调用 v8 javascript 函数

> ID：11387015
> 
> 赞同：37
> 
> 时间：2012-07-08T21:53:11.507
> 
> 标签：c++, v8, embedded-v8

我正在使用 c++ 和 v8，并且遇到了以下挑战：我希望能够使用 v8 在 javascript 中定义一个函数，然后稍后通过 c++ 调用该函数。此外，我希望能够将参数从 c++ 传递给 javascript 函数。我认为下面的示例源代码可以最好地解释它。检查示例代码的末尾，看看我想要完成什么。

```
#include <v8.h>
#include <iostream>
#include <string>
#include <array>

using namespace v8;

int main(int argc, char* argv[]) {

    // Create a stack-allocated handle scope.
    HandleScope handle_scope;

    // Create a new context.
    Persistent<Context> context = Context::New();
    Context::Scope context_scope(context);
    Handle<String> source;
    Handle<Script> script;
    Handle<Value> result;

    // Create a string containing the JavaScript source code.
    source = String::New("function test_function(test_arg) { var match = 0;if(test_arg[0] == test_arg[1]) { match = 1; }");

    // Compile the source code.
    script = Script::Compile(source);

    // What I want to be able to do (this part isn't valid code..
    // it just represents what I would like to do.
    // An array is defined in c++ called pass_arg,
    // then passed to the javascript function test_function() as an argument
    std::array< std::string, 2 > pass_arg = {"value1", "value2"};
    int result = script->callFunction("test_function", pass_arg);

} 
```

有小费吗？

**更新：**

根据给出的建议，我已经能够整理出以下代码。它已经过测试并且可以工作：

```
#include <v8.h>
#include <iostream>
#include <string>

using namespace v8;

int main(int argc, char* argv[]) {

// Create a stack-allocated handle scope.
HandleScope handle_scope;

// Create a new context.
Persistent<Context> context = Context::New();

//context->AllowCodeGenerationFromStrings(true);

// Enter the created context for compiling and
// running the hello world script.
Context::Scope context_scope(context);
Handle<String> source;
Handle<Script> script;
Handle<Value> result;

// Create a string containing the JavaScript source code.
source = String::New("function test_function() { var match = 0;if(arguments[0] == arguments[1]) { match = 1; } return match; }");

// Compile the source code.
script = Script::Compile(source);

// Run the script to get the result.
result = script->Run();
// Dispose the persistent context.
context.Dispose();

// Convert the result to an ASCII string and print it.
//String::AsciiValue ascii(result);
//printf("%s\n", *ascii);

Handle<v8::Object> global = context->Global();
Handle<v8::Value> value = global->Get(String::New("test_function"));
Handle<v8::Function> func = v8::Handle<v8::Function>::Cast(value);
Handle<Value> args[2];
Handle<Value> js_result;
int final_result;

args[0] = v8::String::New("1");
args[1] = v8::String::New("1");

js_result = func->Call(global, 2, args);
String::AsciiValue ascii(js_result);

final_result = atoi(*ascii);

if(final_result == 1) {

    std::cout << "Matched\n";

} else {

    std::cout << "NOT Matched\n";

}

return 0;

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-08T23:58:37.967

我还没有对此进行测试，但这样的事情可能会起作用：

```
// ...define and compile "test_function"

Handle<v8::Object> global = context->Global();
Handle<v8::Value> value = global->Get(String::New("test_function")); 

if (value->IsFunction()) {
    Handle<v8::Function> func = v8::Handle<v8::Function>::Cast(value);
    Handle<Value> args[2];
    args[0] = v8::String::New("value1");
    args[1] = v8::String::New("value2");

    Handle<Value> js_result = func->Call(global, 2, args);

    if (js_result->IsInt32()) {
        int32_t result = js_result->ToInt32().Value();
        // do something with the result
    }
} 
```

* * *

**编辑：**

看起来您的 javascript 函数需要一个参数（由两个值组成的数组），但看起来我们是`func`通过传入两个参数来调用的。

要测试这个假设，您可以更改您的 javascript 函数以获取两个参数并比较它们，例如：

```
function test_function(test_arg1, test_arg2) { 
  var match = 0; 
  if (test_arg1 == test_arg2) { 
    match = 1; 
  } else { 
    match = 0; 
  } 
  return match; 
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-06-04T12:24:55.493

对于新版本的 v8，您可以使用`v8::Object::CallAsFunction`或`v8::Function::Call`调用 javascript 函数。这是最新版本（7.4.x）的示例

```
#include <iostream>
#include <libplatform/libplatform.h>
#include <v8.h>

int main(int argc, char* argv[])
{
    v8::V8::InitializeICUDefaultLocation(argv[0]);
    v8::V8::InitializeExternalStartupData(argv[0]);
    std::unique_ptr<v8::Platform> platform = v8::platform::NewDefaultPlatform();
    v8::V8::InitializePlatform(platform.get());
    v8::V8::Initialize();

    v8::Isolate::CreateParams createParams;
    createParams.array_buffer_allocator = v8::ArrayBuffer::Allocator::NewDefaultAllocator();
    v8::Isolate* isolate = v8::Isolate::New(createParams);

    std::cout << v8::V8::GetVersion() << std::endl;

    {
        v8::Isolate::Scope isolate_scope(isolate);
        v8::HandleScope handle_scope(isolate);

        v8::Local<v8::Context> context = v8::Context::New(isolate);
        v8::Context::Scope context_scope(context);

        v8::Local<v8::String> source = v8::String::NewFromUtf8(isolate, "var foo=function(){return 'foo get called';}");
        v8::Local<v8::Script> script = v8::Script::Compile(context, source).ToLocalChecked();

        v8::TryCatch tryCatch(isolate);
        v8::MaybeLocal<v8::Value> result = script->Run(context);
        if (result.IsEmpty()) {
            v8::String::Utf8Value e(isolate, tryCatch.Exception());
            std::cerr << "Exception: " << *e << std::endl;
        } else {
            v8::String::Utf8Value r(isolate, result.ToLocalChecked());
            std::cout << *r << std::endl;
        }

        v8::Local<v8::Value> foo_value = context->Global()->Get(v8::String::NewFromUtf8(isolate, "foo"));
        if (foo_value->IsFunction()) {
            v8::Local<v8::Value> foo_ret = foo_value->ToObject(isolate)->CallAsFunction(context, context->Global(), 0, nullptr).ToLocalChecked();
            v8::String::Utf8Value utf8Value(isolate, foo_ret);
            std::cout << "CallAsFunction result: " << *utf8Value << std::endl;

            v8::Local<v8::Object> foo_object = foo_value->ToObject(isolate);
            v8::Local<v8::Value> foo_result = v8::Function::Cast(*foo_object)->Call(context, context->Global(), 0, nullptr).ToLocalChecked();
            std::cout << "Call result: "  << *(v8::String::Utf8Value(isolate, foo_result)) << std::endl;
        } else {
            std::cerr << "foo is not a function" << std::endl;
        }
    }

    isolate->Dispose();
    v8::V8::Dispose();
    v8::V8::ShutdownPlatform();
    delete createParams.array_buffer_allocator;

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-04T17:50:03.247

另一种更简单的方法如下：

```
Handle<String> code = String::New(
  "(function(arg) {\n\
     console.log(arg);\n\
    })");
Handle<Value> result = Script::Compile(code)->Run();
Handle<Function> function = Handle<Function>::Cast(result);

Local<Value> args[] = { String::New("testing!") };
func->Call(Context::GetCurrent()->Global(), 1, args); 
```

基本上编译一些返回匿名函数的代码，然后用你想传递的任何参数调用它。

# php - 更新数据库时自动向管理员发送电子邮件

> ID：11387018
> 
> 赞同：0
> 
> 时间：2012-07-08T21:53:32.897
> 
> 标签：php, mysql, database, email

有没有一种方法可以配置在将新数据添加到 MySQL 数据库时自动发送电子邮件。最好在 PHP 中。

这个想法是，当新信息提交到数据库时，会自动生成一封包含新信息的电子邮件，其中包含用于在线查看信息的链接，并发送到预先配置的电子邮件地址。

这样做的目的是为了一个休假预订系统。同事将能够提交休假日期和时间，团队经理会在添加或更改时自动收到通知。

我曾尝试使用 Word Press，但它太笨重而且比我需要的强大得多。我还在 Stack Flow 上注意到了另外几个问题，但他们没有回复或答案，而且不是严格意义上的同一个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:11:44.760

我可能会先尝试[php mail() 函数](http://php.net/manual/en/function.mail.php)。

这是否足够取决于应用程序。例如，系统管理员可以通过使用 dbms 的本机命令行程序来更新我的任何数据库。他们还可以使用 GUI 实用程序，甚至像 Excel（也许）这样的工具来执行 php 根本看不到的更新。如果发生这种情况，您将不会看到任何有关这些更改的电子邮件。

至少一些 dbms 可以从数据库中执行电子邮件应用程序。但这可能会引发一些安全问题。（通常，我的数据库除了在备份/转储期间不会写入文件系统，并且它们不与电子邮件交互。）考虑一下如果某些管理员更新表中的每一行，您希望发生什么。（大多数情况下，该管理员将是您。）

就个人而言，我认为我不会为此使用电子邮件。这是（恕我直言）每天最多只能引起管理员注意一次的事情。为此，我可能首先尝试显示自管理员上次访问以来所做更改的网页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:42:59.760

如果您正在运行 SMTP 服务，则可以将文件输出到投递目录。如果您的容量很大，则可能会导致文件名重复，但有一些方法可以避免这种情况。

否则，您将需要创建一个 UDF。

这是一个示例触发解决方案：

```
 CREATE TRIGGER test.autosendfromdrop BEFORE INSERT ON test.emaildrop
 FOR EACH ROW BEGIN
  /* START THE WRITING OF THE EMAIL FILE HERE*/      
  SELECT  concat("To: ",NEW.To),
          concat("From: ",NEW.From),
          concat("Subject: ",NEW.Subject),
          NEW.Body
      INTO OUTFILE 
               "C:\\inetpub\\mailroot\\pickup\\mail.txt" 
          FIELDS TERMINATED by '\r\n' ESCAPED BY '';            
    END; 
```

要标记消息正文，您将需要这样的内容...

```
CREATE FUNCTION `HTMLBody`(Msg varchar(8192)) 
RETURNS varchar(17408) CHARSET latin1 DETERMINISTIC
BEGIN
declare tmpMsg varchar(17408);
set tmpMsg = cast(concat(
  'Date: ',date_format(NOW(),'%e %b %Y %H:%i:%S -0600'),'\r\n',
  'MIME-Version: 1.0','\r\n',
  'Content-Type: multipart/alternative;','\r\n',
  ' boundary=\"----=_NextPart_000_0000_01CA4B3F.8C263EE0\"','\r\n',
  'Content-Class: urn:content-classes:message','\r\n',
  'Importance: normal','\r\n',
  'Priority: normal','\r\n','','\r\n','','\r\n',
  'This is a multi-part message in MIME format.','\r\n','','\r\n',
  '------=_NextPart_000_0000_01CA4B3F.8C263EE0','\r\n',
  'Content-Type: text/plain;','\r\n',
  '  charset=\"iso-8859-1\"','\r\n',
  'Content-Transfer-Encoding: 7bit','\r\n','','\r\n','','\r\n',
  Msg,
  '\r\n','','\r\n','','\r\n',
  '------=_NextPart_000_0000_01CA4B3F.8C263EE0','\r\n',
  'Content-Type: text/html','\r\n',
  'Content-Transfer-Encoding: 7bit','\r\n','','\r\n',
  Msg,
  '\r\n','------=_NextPart_000_0000_01CA4B3F.8C263EE0--'
  ) as char);
 RETURN tmpMsg;
 END ; 
```

# javascript - Youtube api 播放列表的视频数量

> ID：11387020
> 
> 赞同：1
> 
> 时间：2012-07-08T21:54:05.733
> 
> 标签：javascript, jquery, api, youtube, playlist

我正在使用这个脚本：[https ://github.com/badsyntax/jquery-youtube-player](https://github.com/badsyntax/jquery-youtube-player)

我只从播放列表中获得了 24 个第一个视频。[YT api 手册](https://developers.google.com/youtube/2.0/developers_guide_protocol_playlists)说它最多可以包含 200 个视频。脚本有问题，还是api只返回24个视频？

* * *

在线示例：[http ://badsyntax.github.com/jquery-youtube-player/examples/player-multiple-playlists.html](http://badsyntax.github.com/jquery-youtube-player/examples/player-multiple-playlists.html)

# jquery - Wordpress - 在不同页面上使用多个可调整大小的背景

> ID：11387027
> 
> 赞同：1
> 
> 时间：2012-07-08T21:54:16.730
> 
> 标签：jquery, iphone, background, resize, width

我在这里让自己陷入了困境。我正在构建一个在每个页面上都加载了背景的网站（即使我将这些压缩到小于 250k，我正在处理超长的加载时间，所有其他图像都加载到每个页面上。我第一次尝试处理这个（特别是在 iPhone 上）是预缓存或预加载这些背景，但任何类型的无线连接的延迟仍然太长，所以我的目标是为不同的设备加载较小版本的背景。我我希望这里有人可以帮助我找到某种解决方案。

目前我正在通过 if (is_page()) elseif (is_page()) 语句加载背景，其中 javascript for ez bg resize 传递每个页面的图像。

```
<?php
if( is_page('About') ) { $img = 'images/img1.jpg'; }
elseif( is_page('Home') ) { $img = 'images/img2.jpg'; }
elseif( is_page('Page_Name') ) { $img = 'images/img3.jpg'; }
elseif( is_page('Videos') ) { $img = 'images/img4.jpg'; }
else { $img = 'images/img5.jpg'; }
?>
<script type="text/javascript">
$("body").ezBgResize({
    img     : "<?php echo $img; ?>",
    opacity : 1,
    center  : true
});
</script> 
```

我想做的是包含某种类型的变量，上面写着 **“如果是此页面，则显示此图像，如果是 iphone / ipad 版本，则显示此图像”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:00:05.203

您绝对应该在客户端执行此操作，因为您可以通过 Javascript 访问实际屏幕大小，而不是进行用户代理嗅探。尤其是如果您仍然依赖 Javascript 作为背景，请使用 ezBgResize。

您可以检查设备的屏幕分辨率，然后让 ezBgResize 使用高分辨率或低分辨率版本的图像。查看[ezBgResize 的随机背景示例](https://github.com/iamjpg/jQuery-Ez-Background-Resize/blob/master/random_image_example.html)和[这篇关于 Javascript 媒体查询的帖子以](http://www.quirksmode.org/blog/archives/2010/08/combining_media.html)获得灵感。

它可以是这样的：

```
/* This is an example for just one page, expand to your needs */

// Save the two (or more) different size image file names
var aboutPageBackgrounds = ["image1high.jpg", "image1low.jpg"];

// Check if we are on the about page (assuming an id is set on some element)
if( $("#aboutpage").length ) {
    // Use the high res version by default
    var image = aboutPageBackgrounds[0];

    // Switch to the low res version if the screen is small
    if( screen.width < 600 ) {
        image = aboutPageBackgrounds[1];
    }

    // Call ezBgResize with the resulting image path
    $("body").ezBgResize({
        img     : image,
        opacity : 1,
        center  : true
    });

} 
```

# jakarta-ee - 通过添加“/faces/faces”访问 JSF2.0 中的 jdbcRealm 安全文件夹

> ID：11387028
> 
> 赞同：1
> 
> 时间：2012-07-08T21:54:22.893
> 
> 标签：jakarta-ee, jsf-2, glassfish

我有带有 jdbcRealm 安全文件夹secureuser 和secureadmin 的Web 应用程序项目（NetBeans 7.1.2+GlassFish 3.1.2）。jdbc 安全性是通常的表单登录，增加了安全性约束。Glassfish 部署描述符和 web.xml 像往常一样定义。Servlet 配置是默认的“/faces/*”。

尝试访问“localhost8080/app/faces/secureduser/”形式的 url 时，安全性按预期工作。但是，如果另外使用“localhost8080/app/faces/faces/secureduser/”，则会绕过安全性。其他安全文件夹也是如此。

向安全约束中定义的 url 模式添加“/faces”，[因此，如果定义的模式是“/faces/secureduser”，则添加“/faces/faces/secureduser”]似乎总是覆盖安全性。

由于登录表单是 JSF，或者初始页面的设计要求至少超出了安全范围，因此无法使用对表单“app/faces/”的上下文进行过滤。

即使用户键入添加的前缀“/faces”，如何维护安全性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:50:40.017

这是 Servlet 3.0 规范中关于如何完成 URL 路径匹配的一段：

```
The first successful match is used with no further matches attempted: 
```

1.  容器将尝试找到请求路径与 servlet 路径的完全匹配。成功的匹配选择 servlet。
2.  容器将递归地尝试匹配最长的路径前缀。这是通过使用“/”字符作为路径分隔符一次将路径树下移一个目录来完成的。最长的匹配决定了选择的 servlet。
3.  如果 URL 路径中的最后一段包含扩展名（例如 .jsp），则 servlet 容器将尝试匹配处理扩展请求的 servlet。扩展名被定义为最后一个'.'之后的最后一段的一部分。特点。
4.  如果前三个规则都没有导致 servlet 匹配，则容器将尝试提供适合所请求资源的内容。如果为应用程序定义了一个“默认”servlet，它将被使用。许多容器为服务内容提供了一个隐式的默认 servlet。

容器必须使用区分大小写的字符串比较进行匹配

因此，完全匹配优先于前缀，前缀优先于扩展，最后是通用模式。

所以你可以做的只是添加一个`/*`没有指定角色的通用映射。通用映射最后匹配，如果没有指定角色，任何人都不能像这样访问资源：

```
<security-constraint>
    <web-resource-collection>
      <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint />
</security-constraint>

<!--No Authorization Required -->
<security-constraint>
    <web-resource-collection>
      <url-pattern>/faces/index.xhtml</url-pattern>
    </web-resource-collection>
</security-constraint>

<!--All roles can access -->
<security-constraint>
    <web-resource-collection>
      <url-pattern>/faces/users.xhtml</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>*</role-name>
    </auth-constraint>
</security-constraint> 
```

[Servlet 3.0 文档](http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/)请参阅第 12.1 节 URL 路径的使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:29:40.923

由于您尚未发布代码，因此无法弄清楚问题所在，请查看以下博客

[http://jugojava.blogspot.in/2011/02/jdbc-security-realm-with-glassfish-and.html](http://jugojava.blogspot.in/2011/02/jdbc-security-realm-with-glassfish-and.html)

您的 web.xml 是您指定页面访问权限的位置

前任：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>admin</web-resource-name>
        <url-pattern>/admin/*</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
        <role-name>ADMIN</role-name>
    </auth-constraint>
</security-constraint> 
```

在上面的例子中，只有 admin 用户可以访问 admin 文件夹下的页面（Web pages/admin）

**更新**

只需通过更改

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

我已将默认 /faces/ 更改为 *.xhtml。

并且还从安全约束中删除所有 /faces 应该解决访问问题（/faces/faces）。

# c - C - 使用 select() 时如何限制服务器中的入站连接数

> ID：11387030
> 
> 赞同：2
> 
> 时间：2012-07-08T21:54:57.463
> 
> 标签：c, sockets, tcp

我还是 C 套接字编程的新手，但我能够创建一些简单的客户端和服务器程序。我正在编写一个侦听 TCP 连接的服务器，它的职责是响应客户端的请求，然后在客户端发送特殊的字节序列时（或者当它断开连接时）关闭通信。

我开始使用无限循环中的函数对服务器进行编码`accept()`：服务器等待客户端，accept() 完成所有工作，close() 是最后的套接字描述符，然后再次返回等待接受一个新客户。

因为我想一次服务一个客户，所以我用这种方式调用了监听函数：`listen(mysocket, 1);`

一切都很顺利，但随后又出现了一个新问题。上面解释的服务器部分在一个单独的线程中运行（我们称之为线程#2），主线程（线程#1）必须能够告诉它终止。然后我创建了一个全局变量，如果这个变量设置为 1（由线程 #1），线程 #2 必须终止。问题是线程#2 在调用函数时卡住了`accept()`，因此它不能定期检查全局变量。

我显然需要该函数的超时值：“如果没有要接受的连接，请检查全局变量的值，如果设置为 0，则继续等待新连接，如果设置为 1，则终止”。

然后我搜索了一个解决方案，发现该`select()`功能可以满足我的需求。不过有点不同，我第一次发现了`fd_set`所有的 FD_* 宏。我修改了服务器部分以使其与该`select()`功能一起工作，并且一切都非常好，但这是最后一个问题，我无法解决的问题。如果以这种方式调用监听函数：`listen(socket, 1);`但服务器仍然同时接受并服务多个连接。这是否取决于因为`select()`与 fd_set 一起使用？我正在使用我在网上找到的一些示例，当连接被接受时，它会创建一个新的套接字描述符，该描述符与所有其他套接字描述符一起放入集合中。我只想接受一个客户端的连接，我编写了一个简单的代码来识别是否应该为连接的客户端提供服务，但是有没有办法断开它的服务器端？我知道我必须使用该`close()`函数来关闭套接字描述符，但是在使用时`select()`我正在使用 fd_set，我真的不知道该怎么做才能关闭它们。或者，有没有办法限制一组套接字描述符的数量？我找到了 FD_SETSIZE 宏，但我无法让它工作，我什至不确定它是否能解决问题。

感谢您的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T22:00:23.407

该`listen()`函数有一个`backlog`参数，用于确定有多少传入请求在被拒绝之前*可能处于未决状态。*这措辞谨慎，以便操作系统实现可以支持比您在调用中指定的*更多内容。*`listen()`您可能无法控制积压连接的确切数量。

如果您必须一次只支持一个客户端，则接受第二个连接但告诉新客户端该连接此时不可用，然后关闭新连接。这还有一个好处是您有机会告诉客户端连接不可用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:09:18.440

您也可以将 listen() 套接字放入 fd_set。（如果你已经这样做了，我不明白你的问题）如果选择表明监听套接字是可读的，你可以在监听套接字上调用接受。接受正好返回一个 fd。您也可以将返回的 fd 放入 fd_set。线程或多或少与此正交。（系统调用是原子的），但你当然可以把事情搞砸。

listen 的 backlog 参数或多或少无关；它只是指定系统应该同时维护多少个*胚胎*套接字（连接建立使用资源，甚至在套接字变得可用之前，如侦听返回新的 fd 所示）一旦完成三次握手，accept 将返回 fd，并且胚胎连接作为新的套接字 fd 诞生*。*

getdtablesize() 宏是旧时代的遗留物。在现代实现中，它基于 getrlimit()。

FD_SETSIZE 的根本问题是 fd_set 必须是一个左值，这样才能对其进行分配。所以它必须是固定大小的。（它可能是结构内的一个数组）为了避免固定大小的结构，您可以使用 poll() 而不是 select() （或使用多个较小的 fd_sets ;-)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-08T21:59:20.117

如果您使用的是 windows API，您可以尝试使用关键部分。

# c# - MVC3 Razor - 编辑可变长度列表

> ID：11387036
> 
> 赞同：1
> 
> 时间：2012-07-08T21:55:55.107
> 
> 标签：c#, ajax, asp.net-mvc-3, asp.net-mvc-partialview

我关注了 Steven Sanderson 的博客 - [http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

当我尝试添加另一行项目而不是添加行时，它会将我发送到带有返回的部分视图的 url。

如何防止这种情况发生并因此添加实际行？

# 我在下面的代码以及路径（因为我正在使用区域）：

## 我的WebUI

### 区域/客户端/MyMoveItems/Index.cshtml

```
@model IEnumerable<MovinMyStuff.Domain.Entities.MoveItem>
@using MovinMyStuff.WebUI.HtmlHelpers

@{
ViewBag.Title = "Index";
}

<h1>My Move Items</h1>
@using (Html.BeginForm())
{
<table class="move-item">
    <tr>
        <th>
            Item
        </th>
        <th class="dimension-header">
            L
        </th>
        <th class="dimension-header">
            W
        </th>
        <th class="dimension-header">
            H
        </th>
        <th class="weight-header">
            Wt
        </th>
        <th class="qty-header">
            Qty
        </th>
        <th>
            Addt'l Work
        </th>
    </tr>
    <tr>
        <td colspan="7">
            <div id="editorRows">
                @foreach (var item in Model)
                {
                    Html.RenderPartial("_MoveItemEditorRow", item);
                }
            </div>
        </td>
    </tr>
</table>
@Html.ActionLink("Add Item", "Add", new { area = "Client" }, new { id = "addItem" })
<input type="submit" value="Finished" />
} 
```

### 区域/客户端/MyMoveItems/_MoveItemEditorRow.cshtml

```
@model MovinMyStuff.Domain.Entities.MoveItem
@using MovinMyStuff.WebUI.HtmlHelpers

@using (Html.BeginCollectionItem("moveitems"))
{
    <div class="editorRow">
<tr>
    <td class="item-name">
        @Html.TextBoxFor(model => model.MoveItemType)
        @Html.ValidationMessageFor(model => model.MoveItemType)
</td>
<td class="item-dimension">
    @Html.EditorFor(model => model.Length)
    @Html.ValidationMessageFor(model => model.Length)
</td>
<td class="item-dimension">
    @Html.EditorFor(model => model.Width)
    @Html.ValidationMessageFor(model => model.Width)
</td>
<td class="item-dimension">
    @Html.EditorFor(model => model.Height)
    @Html.ValidationMessageFor(model => model.Height)
</td>
<td class="item-weight">
        @Html.EditorFor(model => model.Weight)
        @Html.ValidationMessageFor(model => model.Weight)
</td>
<td class="item-qty">
        @Html.EditorFor(model => model.Quantity)
        @Html.ValidationMessageFor(model => model.Quantity)
</td>
<td class="work-items-group">
    <table class="work-items">
        <tr>
            <td>Assembly</td>
            <td>
            @Html.EditorFor(model => model.Assemble)
            @Html.ValidationMessageFor(model => model.Assemble)
            </td>
        </tr>
    </table>
    <table class="work-items">
        <tr>
            <td>Glass</td>
            <td>
            @Html.EditorFor(model => model.HasGlass)
            @Html.ValidationMessageFor(model => model.HasGlass)
            </td>
        </tr>
    </table>
</td>
</tr>
</div>
} 
```

### 区域/客户端/控制器/MyMoveItemsControllers.cs

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MovinMyStuff.Domain.Entities;
using MovinMyStuff.Domain.Concrete;

namespace MovinMyStuff.WebUI.Areas.Client.Controllers
{ 
public class MyMoveItemsController : Controller
    {
    private EFDbContext db = new EFDbContext();

    //
    // GET: /Client/MyMoveItems/

    public ActionResult Index()
    {
        var moveitems = db.MoveItems.Include(m => m.Move);
        return View(moveitems);
    }

    [HttpPost]
    public ActionResult Index(IEnumerable<MoveItem> moveitems)
    {
        return View("Completed", moveitems);
    }

    public PartialViewResult Add()
    {
        return PartialView("_MoveItemEditorRow", new MoveItem());
    }
}
} 
```

### HtmlHelpers/HtmlPrefixScopeExtension.cs

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.Mvc;

namespace MovinMyStuff.WebUI.HtmlHelpers
{
public static class HtmlPrefixScopeExtensions
{
    private const string idsToReuseKey = "__htmlPrefixScopeExtensions_IdsToReuse_";

    public static IDisposable BeginCollectionItem(this HtmlHelper html, string collectionName)
    {
        var idsToReuse = GetIdsToReuse(html.ViewContext.HttpContext, collectionName);
        string itemIndex = idsToReuse.Count > 0 ? idsToReuse.Dequeue() : Guid.NewGuid().ToString();

        // autocomplete="off" is needed to work around a very annoying Chrome behaviour whereby it reuses old values after the user clicks "Back", which causes the xyz.index and xyz[...] values to get out of sync.
        html.ViewContext.Writer.WriteLine(string.Format("<input type=\"hidden\" name=\"{0}.index\" autocomplete=\"off\" value=\"{1}\" />", collectionName, html.Encode(itemIndex)));

        return BeginHtmlFieldPrefixScope(html, string.Format("{0}[{1}]", collectionName, itemIndex));
    }

    public static IDisposable BeginHtmlFieldPrefixScope(this HtmlHelper html, string htmlFieldPrefix)
    {
        return new HtmlFieldPrefixScope(html.ViewData.TemplateInfo, htmlFieldPrefix);
    }

    private static Queue<string> GetIdsToReuse(HttpContextBase httpContext, string collectionName)
    {
        // We need to use the same sequence of IDs following a server-side validation failure,  
        // otherwise the framework won't render the validation error messages next to each item.
        string key = idsToReuseKey + collectionName;
        var queue = (Queue<string>)httpContext.Items[key];
        if (queue == null) {
            httpContext.Items[key] = queue = new Queue<string>();
            var previouslyUsedIds = httpContext.Request[collectionName + ".index"];
            if (!string.IsNullOrEmpty(previouslyUsedIds))
                foreach (string previouslyUsedId in previouslyUsedIds.Split(','))
                    queue.Enqueue(previouslyUsedId);
        }
        return queue;
    }

    private class HtmlFieldPrefixScope : IDisposable
    {
        private readonly TemplateInfo templateInfo;
        private readonly string previousHtmlFieldPrefix;

        public HtmlFieldPrefixScope(TemplateInfo templateInfo, string htmlFieldPrefix)
        {
            this.templateInfo = templateInfo;

            previousHtmlFieldPrefix = templateInfo.HtmlFieldPrefix;
            templateInfo.HtmlFieldPrefix = htmlFieldPrefix;
        }

        public void Dispose()
        {
            templateInfo.HtmlFieldPrefix = previousHtmlFieldPrefix;
        }
    }
}
} 
```

### 脚本/mms-custom.js

```
$("#addItem").click(function () {
$.ajax({
    url: this.href,
    cache: false,
    success: function (html) { $("#editorRows").append(html); }
});
return false;
});

$("a.deleteRow").live("click", function () {
$(this).parents("div.editorRow:first").remove();
return false;
}); 
```

### 视图/共享/_ClientLayout.cshtml

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>@ViewBag.Title</title>
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.5.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/modernizr-2.5.3.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/mms-custom.js")" type="text/javascript"></script>
@(Html.Telerik().StyleSheetRegistrar()
    .DefaultGroup(group => group.Add("telerik.common.css")
                                .Add("telerik.default.css"))
)
</head>
<body>
    <section>
    @RenderBody()
</section>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:56:59.853

尝试这个：

**首先：**确保您`Scripts/mms-custom.js`的jQuery 代码（`$(document.ready`

如果这不能自行解决，请尝试以下操作：

**第二：**

```
$("#addItem").click(function () {
    $.ajax({
        url: this.href,
        cache: false,
        success: function (data) { $("#editorRows").append(data);  return false;}
    });
    return false;
}); 
```

代替您的代码：

```
$("#addItem").click(function () {
$.ajax({
    url: this.href,
    cache: false,
    success: function (html) { $("#editorRows").append(html); }
});
return 
```

使用该博客文章作为参考时，我遇到了类似的问题。

# android - Android 在异步任务期间使用适配器集对 ListView 进行过滤和排序

> ID：11387038
> 
> 赞同：1
> 
> 时间：2012-07-08T21:56:12.737
> 
> 标签：android, listview, search, asynchronous, filter

我正在使用从放置在服务器中的数据库中获取的数据制作 ListView。ListView 的每一行有两个 TextView，一个用于城市，另一个用于每个城市在数据库中的 ID，但是这个 textview（ID 的那个）在 ListView 中是隐藏的，所以用户只能看到城市。

一切正常，但现在我想在列表视图中添加一个搜索栏，以便过滤城市，但我遇到了以下问题：

1.-ListView的适配器是一个简单的适配器，你可以在代码上看到，我没有找到如何使用这样的适配器过滤Listview的例子。

2.-我通过异步任务获取 ListView 的信息，并在异步任务的*onPostExecute*方法中设置 ListView，同样，我没有找到在这样的地方过滤它的示例。

这是“相关”代码。如果有人需要完整的代码，请向我索取。

```
public class SQLWebVer extends ListActivity implements OnItemClickListener{
ProgressDialog barraProgreso;
    ArrayList<HashMap<String, String>> listaCiudades;
    .
    .//some more varibles for the class
    .
    protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sqlwebver);

    // Hashmap de la ListView
    listaCiudades = new ArrayList<HashMap<String, String>>();

    new cargaCiudades().execute();//this is the call to the async task

    }
    class cargaCiudades extends AsyncTask<String, String, String>{//the async task
    .
    .//here are the onPreExecute and doInBackground methods
    .
         protected void onPostExecute(String file_url) {
        barraProgreso.dismiss();//quita la barra de la pantalla
        runOnUiThread(new Runnable(){//actualiza la UI(la listView)

            public void run() {
                // TODO Auto-generated method stub
                ListAdapter adapter = new SimpleAdapter 
                                      (SQLWebVer.this, listaCiudades, 
                                      R.layout.sqlweblist_item,
                          new String[]{"key_id", "key_ciudad"},new int[]
                                      {R.id.ID_CIUDAD, R.id.CIUDAD});

                setListAdapter(adapter);
            }

        });
        }
     } 
```

我试图在 onCreate 和 onPostExecute 方法上添加过滤器功能，但是没有运气，有什么建议吗？

PD：BONUS 问题，我如何按城市的字母顺序对我的 ListView 进行排序，但保持每个 ID 与他的城市相关？（不更改 php 文件）

编辑：我通过创建一个实现可过滤的自定义基本适配器解决了这个问题。没有我一开始想的那么难；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:55:40.120

前段时间我解决了这个问题，但我忘记发布对我有用的答案，所以这里是：

```
package android.codigo;

import java.util.ArrayList;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.ImageView;
import android.widget.TextView;

public class MiAdaptador extends ArrayAdapter<Item2> {

    private ArrayList<Item2> allItems;
    @SuppressWarnings("unused")
    private ArrayList<Item2> subItems;

    public ArrayList<Item2> getItems() {
        return allItems;
    }

    public MiAdaptador(Context context, int textViewResourceId,
            ArrayList<Item2> items) {
        super(context, textViewResourceId, items);
        this.allItems = items;
        this.subItems = items;
    }

    @Override
     public int getCount(){
           return subItems.size();
     }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.item2_lista, null);
        }

        Item2 it = subItems.get(position);

        if (it != null) {
            TextView nombre = (TextView) v.findViewById(R.id.textView1);
            ImageView img = (ImageView) v.findViewById(R.id.imageView1);
            ImageView img2 = (ImageView) v.findViewById(R.id.imageView2);
            ImageView img3 = (ImageView) v.findViewById(R.id.imageView3);
            if (nombre != null) {
                nombre.setText(it.getNombre());
            }
            if (img != null) {
                img.setImageResource(it.getID());
            }
            if (img != null) {
                img2.setImageResource(it.getID2());
            }
            if (img != null) {
                img3.setImageResource(it.getID3());
            }
        }

        return v;

    }
    public Filter getFilter() {
        Filter filter = new Filter() {

            @Override
            protected FilterResults performFiltering(CharSequence prefijo) {

                FilterResults results = new FilterResults();
                ArrayList<Item2> aux = new ArrayList<Item2>();

                // El prefijo tiene que ser mayor que 0 y existir
                if (prefijo != null && prefijo.toString().length() > 0) {

                    for (int index = 0; index < allItems.size(); index++) {
                        Item2 si = allItems.get(index);
                        String nombre = si.getNombre();

                        String nom[] = nombre.split(" ");
                        for(int i=0; i<nom.length; i++){
                            if (nom[i].toLowerCase().startsWith(prefijo.toString().toLowerCase())) {
                                aux.add(si);
                            }
                        }
                    }
                    results.values = aux;
                    results.count = aux.size();
                } else {
                    synchronized (allItems) {
                        results.values = allItems;
                        results.count = allItems.size();
                    }
                }
                return results;
            }

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence prefijo,FilterResults results) {
                subItems = (ArrayList<Item2>) results.values;
                notifyDataSetChanged();

            }
        };
        return filter;
    }
} 
```

并将其添加到主类中：

```
ListView lv = (ListView)findViewById(R.id.list);
    lv.setTextFilterEnabled(true);
    lv.setAdapter(adapter);
    lv.setOnItemClickListener(this);

    TextWatcher filtro = new TextWatcher(){

        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub

        }

        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub
            adapter.getFilter().filter(e.getText().toString());//filtra el texto metido en el edittext en tiempo real
        }

    };

    e.addTextChangedListener(filtro);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:36:04.420

编辑：是的，尝试使用 BaseAdapter，我刚读到 SimpleAdapter 不能动态改变的东西或类似的东西......

我不太确定，但这就是我的想法......你是 AsyncTask 必须实现

@Override protected Void doInBackground(String... params) {

```
 SQLWebVer.this.runOnUiThread(new Runnable() {

            public void run() {

                ListAdapter adapter = new SimpleAdapter 
                                  (SQLWebVer.this, listaCiudades, 
                                  R.layout.sqlweblist_item,
                      new String[]{"key_id", "key_ciudad"},new int[]
                                  {R.id.ID_CIUDAD, R.id.CIUDAD});

            setListAdapter(adapter);
            }
        });
    } 
```

并且因为您说 ...extends AsyncTask ，您应该尝试使用字符串执行方法，例如：

```
new cargaCiudades().execute(""); 
```

希望这会有所帮助，我自己还没有尝试过，现在没有时间，但这是我乍一看的想法......

# arrays - WCF：服务器响应错误请求 (400)

> ID：11387039
> 
> 赞同：1
> 
> 时间：2012-07-08T21:56:16.967
> 
> 标签：arrays, wcf, exception, app-config, mtom

我的 WCF 客户端可以在 WCF 服务器上正常工作，除非在尝试传递自定义对象数组时调用服务器。当数组为 100 项时，它可以正常工作，但当项数为 3​​00 时，服务器会抛出异常 Bad Request (400)。所以我认为解决方案的关键在于配置文件。

首先是客户端的 app.config。WCF 客户端驻留在一个 DLL 中，即 Outlook 加载项。我将此 app.config 复制到 Outlook.exe.config 到 Outlook 安装目录 - Outlook 加载加载项所需的内容：

```
<configuration>
  <configSections>
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="MyProject.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <system.serviceModel>
        <bindings>
            <wsDualHttpBinding>
                <binding name="WSDualHttpBinding_IJabberSvc" closeTimeout="00:01:00"           openTimeout="00:02:00" receiveTimeout="00:10:00" sendTimeout="00:05:00"
                    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
                    <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                        maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00" />
                    <security mode="Message">
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
            </wsDualHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:9047/switchvox/alerter" binding="wsDualHttpBinding"
                bindingConfiguration="WSDualHttpBinding_IJabberSvc" contract="JabberService.IJabberSvc"
                name="WSDualHttpBinding_IJabberSvc">   
            </endpoint>
        </client>
    </system.serviceModel>
  <system.diagnostics>
    <trace autoflush="true" />
    <sharedListeners>
      <add name="sharedListener"
      type="System.Diagnostics.XmlWriterTraceListener"  initializeData="%AppData%\Mfg\ProjectName\Logs\SwitchvoxDialerTraceLog.svclog" />
    </sharedListeners>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Verbose, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="sharedListener"/>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="Verbose">
        <listeners>
          <add name="sharedListener" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics>

  <userSettings>
    <SwitchvoxDialer.Properties.Settings>
      <setting name="InstallSubFolder" serializeAs="String">
        <value>Mfg\\ProjectName</value>
      </setting>
      <setting name="DialerTitle" serializeAs="String">
        <value>ProjectName</value>
      </setting>
    </SwitchvoxDialer.Properties.Settings>
  </userSettings>
</configuration> 
```

服务器配置的相关部分如下所示：

```
 <system.serviceModel>
    <services>
      <service name="WcfServiceLib.JabberSvc" behaviorConfiguration="JabberSvc">
        <endpoint address="http://localhost:9047/switchvox/alerter"      binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_IJabberSvc" contract="WcfServiceLib.IJabberSvc" name="WSDualHttpBinding_IJabberSvc">
          <identity>

        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:9047/switchvox/alerter"/>
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="JabberSvc">
          <dataContractSerializer ignoreExtensionDataObject="true" maxItemsInObjectGraph="2147483646" />
          <serviceTimeouts transactionTimeout="00:10:00" />
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <wsDualHttpBinding>
        <binding name="WSDualHttpBinding_IJabberSvc" closeTimeout="00:01:00" openTimeout="00:02:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
                 bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                 maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
                 messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647"
                        maxStringContentLength="2147483647"
                        maxArrayLength="2147483647"
                        maxBytesPerRead="2147483647"
                        maxNameTableCharCount="2147483647"/>
          <reliableSession ordered="true" inactivityTimeout="00:10:00"/>
          <security mode="Message">
            <message clientCredentialType="Windows" negotiateServiceCredential="true" algorithmSuite="Default"/>
          </security>
        </binding>
      </wsDualHttpBinding>
    </bindings>
    <!-- Enable message tracing by adding this section - Remove for production code -->
    <diagnostics>
      <messageLogging logEntireMessage="true" logMessagesAtServiceLevel="true"
      logMessagesAtTransportLevel="true"
      maxMessagesToLog="100000" />
    </diagnostics>

  </system.serviceModel> 
```

app.config 在 bin/Debug 中生成 ServerName.exe.config （以前我将它作为嵌入式资源，但它也没有帮助......

正如您所看到的，我将缓冲区、消息等的所有数字增加到最大值，并确保时间值足够高......我确信问题在于服务器或客户端不知何故不知道关于这些增加的值，但无法弄清楚为什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:47:21.237

WCF 不会返回/显示大量关于其方面实际错误的信息（可悲）。尝试配置[WCF 跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:11:42.400

尝试使用 MTOM 进行消息编码。有关更多信息，请参阅以下链接：

[http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx) 和 [http://msdn.microsoft.com/en-us/library/aa395209.aspx](http://msdn.microsoft.com/en-us/library/aa395209.aspx)

如果这不起作用，请使用 Fiddler 获取有关错误的更多信息。一个 400 错误的请求可能意味着很多事情。

# java - IllegalStateException 错误

> ID：11387061
> 
> 赞同：0
> 
> 时间：2012-07-08T21:59:27.257
> 
> 标签：java, exception, servlets

我正在创建一个登录页面，工程师可以通过以“engg”开头的用户名登录。问题出在登录页面，当我使用正确的密码输入正确的输入时，它会给出“非法状态异常”。在错误的输入中它工作正常。就像当我在我的 oracle 表中给出“engg140”时，它给出了异常.代码是：

```
 import java.io.IOException;
      import java.io.PrintWriter;
        import java.sql.ResultSet;
      import java.sql.SQLException;

      import javax.servlet.ServletException;
      import javax.servlet.http.HttpServlet;
      import javax.servlet.http.HttpServletRequest;
      import javax.servlet.http.HttpServletResponse;

      import sun.java2d.pipe.GeneralCompositePipe;

       import accessdb.Dao;
         import accessdb.Getset;

    public class AdminLogIn extends HttpServlet {
 private static final long serialVersionUID = 1L;

/**
 * @return 
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    try {
    String username=request.getParameter("username"); 
    String password=request.getParameter("password");
    Getset g=new Getset();
    Dao dao=new Dao();

               if(username.equals("") || password.equals(""))

           {
                response.sendRedirect("login.jsp");

             }
         else{
    String newuname=username.substring(0,4);
//  System.out.println(""+username);
    if(newuname.equals("engg"))
    {
        ResultSet rs=dao.EnggLogInUseridCheck(g);

        System.out.println(""+newuname);

        while(rs.next())
        {
            String uname=rs.getString("uname");
            System.out.println(""+uname);
            if(uname.equals(username))
            {
                g.setuname(username);
                System.out.println(""+username);
                System.out.println(""+uname);
                ResultSet rs1=dao.EnggLogInPasswordCheck(g);
                while(rs1.next())
                {
                    String password1=rs1.getString("password");
                    if(password1.equals(password))
                    {    System.out.println(""+password1);
                         System.out.println(""+password);
                        response.sendRedirect("engghome.jsp");
                        break;

                    }
                    else
                    {
                        response.sendRedirect("login.jsp");
                        return;
                    }
                }

            }

        }
        response.sendRedirect("login.jsp");
    }
    else
    {
        response.sendRedirect("login.jsp");
        return;
    }

    }

    }   catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }
          } 
```

右输入的控制台输出如下：

```
 03:31:26,265 INFO  [STDOUT] engg
                           03:31:26,265 INFO  [STDOUT] engg172
                          03:31:26,265 INFO  [STDOUT] engg140
                          03:31:26,265 INFO  [STDOUT] engg140
                          03:31:26,265 INFO  [STDOUT] engg140
                         03:31:26,281 INFO  [STDOUT] 365125
                          03:31:26,281 INFO  [STDOUT] 365125
                           03:31:26,281 INFO  [STDOUT] engg141
                           03:31:26,281 ERROR [[AdminLogIn]] Servlet.service() for 
                              servlet                      
                          AdminLogIn threw exception
                           java.lang.IllegalStateException
                           at                                                                                       org.apache.catalina.connector.ResponseFacade.sendRedirect(ResponseFacade.java:435)
                         at AdminLogIn.doGet(AdminLogIn.java:80)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:241)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:580)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T03:35:26.490

您没有包括堆栈跟踪的“由”部分，这是最重要的部分（实际上，整个堆栈跟踪很重要）。

An, `IllegalStateException`on a`sendRedirect()`与 HTTP 协议有关，并且在对客户端的响应已经提交时发生。此时无法再发送重定向，因为 HTTP 标头已发送（或至少排队等待发送）并且无法更改。在您的代码中的某处，在您未显示的方法中，您已将某些内容写入输出流并导致响应被提交。

这与数据库无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T05:59:50.793

我认为响应已经提交，不允许您进行重定向。

在这里查看更多信息：

*   [响应原因已提交](https://stackoverflow.com/questions/11305563/cause-of-servlets-response-already-committed/11305612#11305612)
*   [sendRedirect 时出现 IllegalStateException](https://stackoverflow.com/questions/11305492/servlet-service-exception-when-using-sendredirect/11305737#11305737)

# glsl - Web-GL：每个程序的多个片段着色器

> ID：11387062
> 
> 赞同：5
> 
> 时间：2012-07-08T21:59:32.220
> 
> 标签：glsl, webgl, shader

有谁知道是否可以在单个 Web-GL“程序”中连续运行多个片段着色器？我正在尝试使用着色器效果复制我在 WPF 中编写的一些代码。在 WPF 程序中，我将包装具有多个边框的图像，并且每个边框都会附加一个效果（允许多个效果在同一个图像上连续运行）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T02:33:02.923

恐怕您可能需要稍微澄清一下您的问题，但无论如何我都会尝试回答：

WebGL 可以有效地支持任意数量的不同着色器。（当然存在一些实际限制，例如可用内存，但您必须非常努力地通过创建太多着色器来达到这些限制。）事实上，大多数“现实世界”WebGL/OpenGL 应用程序将使用许多不同的组合着色器以生成渲染到屏幕的最终场景。（一个简单的例子：水通常会使用与其周围环境的其他部分不同的着色器或一组着色器来渲染。）

在调度渲染命令时，一次只能有一个着色器程序处于活动状态。当前活动的程序是通过调用指定的，`gl.useProgram(shaderProgram);`之后将使用该程序渲染绘制的任何几何图形。如果要渲染需要多个不同着色器的效果，则需要按着色器对它们进行分组并分别绘制每个批次：

```
 gl.useProgram(shader1);
 // Setup shader1 uniforms, bind the appropriate buffers, etc.
 gl.drawElements(gl.TRIANGLES, shader1VertexCount, gl.UNSIGNED_SHORT, 0); // Draw geometry that uses shader1

 gl.useProgram(shader2);
 // Setup shader2 uniforms, bind the appropriate buffers, etc.
 gl.drawElements(gl.TRIANGLES, shader2VertexCount, gl.UNSIGNED_SHORT, 0); // Draw geometry that uses shader2

 // And so on... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T16:19:01.617

其他答案都在正确的轨道上。您要么需要动态创建将所有效果应用到一个着色器或帧缓冲区中的着色器，然后一次应用一个效果。有一个后面的例子here

[WebGL 图像处理（续）](https://webglfundamentals.org/webgl/lessons/webgl-image-processing-continued.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T08:24:03.747

正如 Toji 建议的那样，您可能想澄清您的问题。如果我理解正确，您想对图像应用一组后处理效果。

您的问题的简单答案是：不，您不能将多个片段着色器与一个顶点着色器一起使用。

但是，有两种方法可以做到这一点：首先，您可以在一个片段着色器中编写所有内容，最后将它们组合起来。这取决于你想要的效果！其次，您可以编写多个着色器程序（每个效果一个）并将结果写入片段缓冲区对象（渲染到纹理）。每个着色器都会获得前一个效果的结果并应用下一个效果。这会有点复杂，但它是最灵活的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T16:37:50.940

如果您的意思是在单个渲染过程中运行多个着色器，就像这样（从稀薄的空气中提取的示例）：

1.  顶点颜色
2.  质地
3.  灯光
4.  阴影

...每个阶段都附加到一个`WebGLProgram`对象，每个阶段都有自己的`main()`功能，那么不，GLSL 不能以这种方式工作。

GLSL 的工作方式更像 C/C++，其中您有一个`main()`作为程序入口点的全局函数，以及附加到它的任意数量的库。上面的四个示例都可以是一个单独的“库”，可以单独编译，但可以链接到一个程序中，并由一个`main()`函数调用，但它们可能并不都定义自己的`main()`函数，因为 GLSL 中的这些定义是共享的整个程序。

`main()`不幸的是，这要求您（至少）为您打算使用的每个着色器编写单独的函数，这会导致*大量*冗余编程，即使您打算重用库本身。这就是为什么我最终编写了一个美化的字符串处理程序来管理我的[Jax](http://blog.jaxgl.com/what-is-jax)的 GLSL 库；我不确定代码在我的框架之外会有多大用处，但您当然可以随意查看它，并使用您认为有帮助的任何内容。相关文件为：

*   [lib/assets/javascripts/jax/shader.js.coffee](https://github.com/sinisterchipmunk/jax/blob/b64d3c92bc2da27898e448f1ad38d683ed0b5e82/lib/assets/javascripts/jax/shader.js.coffee)
*   [lib/assets/javascripts/jax/shader/program.js.coffee](https://github.com/sinisterchipmunk/jax/blob/b64d3c92bc2da27898e448f1ad38d683ed0b5e82/lib/assets/javascripts/jax/shader/program.js.coffee)
*   [spec/javascripts/jax/shader_spec.js.coffee](https://github.com/sinisterchipmunk/jax/blob/b64d3c92bc2da27898e448f1ad38d683ed0b5e82/spec/javascripts/jax/shader_spec.js.coffee)（测试和使用示例）
*   [spec/javascripts/jax/shader/program_spec.js.coffee](https://github.com/sinisterchipmunk/jax/blob/b64d3c92bc2da27898e448f1ad38d683ed0b5e82/spec/javascripts/jax/shader/program_spec.js.coffee)（更多测试和使用示例）

祝你好运！

# udp - 使用netcat发送UDP包不绑定

> ID：11387067
> 
> 赞同：8
> 
> 时间：2012-07-08T22:00:12.270
> 
> 标签：udp, netcat

我正在尝试使用 netcat 来模拟 NAT 遍历协议。

我有一个实例正在侦听端口 6666 上的 UDP 数据包，如下所示：

数控-ul 6666

在另一个终端窗口中，我正在尝试定期从端口 6666 发送一个 UDP 数据包（以打开路由器上的返回路径。这将在每 20 秒重复一次以重新打开端口的脚本中）

nc -u -p6666 mypinghost.com 4444

问题是 netcat 在此 ping 调用中失败并显示以下消息：

nc：绑定失败：地址已在使用中

这意味着绑定到端口 6666 的侦听器正在阻止另一个进程从该端口发送，或者可能 netcat 正在尝试绑定到 6666 以进行侦听。

这就是 netcat 的编写方式，还是我可以通过某种方式给它发痒，让我在不绑定到端口的情况下发送数据包来监听？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T00:00:45.693

> 数控-ul 6666

侦听 UDP 端口 6666。

> nc -u -p6666 mypinghost.com 4444

使用 UDP 端口 6666 作为源端口，发送到 mypinghost:4444。

> nc：绑定失败：地址已在使用中

那将是第二次`netcat`调用，其中 6666 已被第一次调用。

> 这意味着绑定到端口 6666 的侦听器正在阻止另一个进程从该端口发送

正确的。

> 或者可能 netcat 正在尝试绑定到 6666 来监听。

***绝对是***这样*。你告诉它这样做，所以它做到了。*

 *您尝试在同一主机中的两个进程之间执行的操作是不可能的。一次只有一个进程可以使用特定的本地 UDP 端口，除非您使用`SO_REUSEADDRESS`，这`netcat`似乎没有实现。

正如另一张海报所建议的那样，解决方案在于使用单一流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T23:11:34.447

我不相信您可以以这种方式使用 netcat。我建议编写一个简单的 Python 脚本，在一个进程中完成发送和接收任务。这样，您可以独占该端口并仍然完成这两项任务。*

# mysql - MySQL：组值

> ID：11387068
> 
> 赞同：4
> 
> 时间：2012-07-08T22:00:20.457
> 
> 标签：mysql, group-by

假设我有一张`Connections`表格`[logID, user, time]`

一个示例集是：

```
| logID |  user |  time 
|-----------------------
|  91   | terry | 12:55:00  <--- Last by user
|  90   | terry | 12:54:26
|  89   | nami  | 12:52:12  <--- Last by user
|  88   | terry | 12:50:50  <--- Last by user
|  87   | terry | 12:49:21
|  86   | terry | 12:48:16
|  85   | terry | 12:46:07
|  84   | nami  | 12:31:22  <--- Last by user
|  83   | nami  | 12:30:30
|  82   | nami  | 12:29:26 
|  81   | terry | 12:27:12  <--- Last by user 
```

所需的查询应在用户列**更改时对它**进行 GROUP，并*选择该用户的最后一个时间戳*：

```
| logID |  user |  time 
|-----------------------
|  91   | terry | 12:55:00  <--- Last by user
|  89   | nami  | 12:52:12  <--- Last by user
|  88   | terry | 12:50:50  <--- Last by user
|  84   | nami  | 12:31:22  <--- Last by user
|  81   | terry | 12:27:12  <--- Last by user 
```

我一直在玩 GROUP BY，但没有得到任何地方......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T22:01:58.240

一种方法是使用用户变量：

```
SELECT   logID, @lastuser:=user AS user, time
FROM     mytable, (SELECT @lastuser:=NULL) init
HAVING   NOT @lastuser<=>user
ORDER BY time DESC 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/fe097/1/0)上查看。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T22:14:15.300

假设没有这样的差距，人们可以使用...

```
 SELECT a.logID, a.user, a.time
      FROM Connections a
 LEFT JOIN Connections b ON b.logID = a.logID + 1
     WHERE a.user <> b.user 
        OR b.user IS NULL
  ORDER BY a.logID desc; 
```

这是一个可以玩的[小提琴。](http://sqlfiddle.com/#!2/0f030/11)

# c# - 在点击事件中识别发件人按钮控件

> ID：11387070
> 
> 赞同：6
> 
> 时间：2012-07-08T22:00:40.413
> 
> 标签：c#, winforms, custom-controls

我制作了一个自定义按钮，其中包含一个名为`Data`.

我在运行时以编程方式将此按钮添加到我的 winform 中，并且在添加时我还为它们定义了一个单击事件。好吧，实际上我只有一种方法，并且我将新添加的按钮订阅到此方法。

但是在点击事件中，我想访问该`Data`字段并将其显示为消息框，但似乎我的投射不正确：

```
 CustomButton_Click(object sender, EventArgs e)
    {
        Button button;
        if (sender is Button)
        {
            button = sender as Button;
        } 

        //How to access "Data" field in the sender button? 
        //button.Data  is not compiling!
    } 
```

更新：

对不起，我提到`.Data`了智能感知中没有出现的“未编译”...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T22:02:43.500

您需要转换为具有 Data 字段的自定义类的类型。

就像是：

```
YourCustomButton button = sender as YourCustomButton; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T22:03:56.390

假设您的自定义按钮类型是`CustomButton`，您应该这样做：

```
CustomButton_Click(object sender, EventArgs e){
  CustomButton button = sender as CustomButton;
  if (button != null){
      // Use your button here
  } 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-26T21:04:53.263

如果您不想设置变量，那么简单的方法是：

```
((CustomButton)sender).Click 
```

或任何你想要的。

# css - 如何使用正则表达式找到大于 100% 的值？

> ID：11387072
> 
> 赞同：3
> 
> 时间：2012-07-08T22:00:59.990
> 
> 标签：css, regex, notepad++

我正在处理多个文件中的大量 CSS，并尝试调试布局问题，以查找诸如 `width:105%`

[**我只能在支持Search**](http://npp-community.tuxfamily.org/documentation/notepad-user-manual/searching/normal-search)中的正则表达式的 Windows 机器上访问[**notepad++**](http://notepad-plus-plus.org/)。[](http://npp-community.tuxfamily.org/documentation/notepad-user-manual/searching/normal-search)

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T22:06:05.720

```
([1-9]0[1-9]|[1-9]{2}\d|[2-9]\d{2}|\d{4,})\s*% 
```

应该对 101 及以上范围内的所有数字都有效。

```
101%
110%
210%
999 %
1000000000% 
```

都会匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T22:04:05.073

假设它们都是非负整数百分比并且不是以零为前缀的，你可以用`0% to 100%`- 否定任何东西，但只能在其中包含 % 的行上运行。

例如在命令行上

```
fgrep % something.css | egrep -v ":\s*[0-9]{1,2}%" | fgrep -v 100% 
```

正则表达式将匹配 0-99%，所以我自己删除 100%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T22:05:02.017

```
1(?:0[1-9]|[1-9]\d)% 
```

会是我的猜测。匹配`10*`(where `* > 0`) 或`1**`where`* > 10`

**编辑**

为了更好地处理 > 100 个数字（并且不限于 999）：

```
(?:\d{4,}|[1-9]0[1-9]|[1-9][1-9]\d|[2-9]\d{2}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T22:10:15.320

```
[1-9]0*\d{2,}% 
```

应该适用于任何 >= 100 的数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T22:11:59.880

我想用于查找大于 100%% 的值的正则表达式将是：

```
width\s?:\s?[0-9]*[1-9]{1}[0-9]{1}[0-9]{1}% 
```

这应该找到一切，甚至 190999%**

# javascript - 我可以发送不会淹没宽带的“低优先级”xmlhttprequest 请求吗？

> ID：11387087
> 
> 赞同：2
> 
> 时间：2012-07-08T22:02:46.883
> 
> 标签：javascript, jquery, xmlhttprequest

我有一个使用 jQuery 上传大量 POST 数据的脚本，但这会干扰所有其他请求，因为传出数据会淹没浏览器（以及其他东西，如 ssh 客户端）可能发出的任何其他请求。

是否有可能（不太可能，是的）告诉连接放慢一点，因为它不是优先事项，并让其他连接通过？

jQuery 被标记，因为这是我正在使用的主要库，但如果答案需要，我可以在较低级别上工作。

# c++ - G++ 无法使用 Boost for x86 编译代码

> ID：11387088
> 
> 赞同：0
> 
> 时间：2012-07-08T22:02:57.660
> 
> 标签：c++, boost, g++, linker-errors

我有一个问题：我使用 Boost ( `locks.hpp`) 编写代码。我的服务器正在运行 x64 Ubuntu (Linux)。当我用 编译这段代码时`-m64`，它构建得很好。但是当我尝试编译时`-m32`，我得到了这些错误：

```
g++ -fPIC -m32 -shared -Wl,-soname,test.so -ldl -o test.so test.cpp -lboost_thread

/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../libboost_thread.so when searching for -lboost_thread
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../libboost_thread.a when searching for -lboost_thread
/usr/bin/ld: skipping incompatible //usr/lib/libboost_thread.so when searching for -lboost_thread
/usr/bin/ld: skipping incompatible //usr/lib/libboost_thread.a when searching for -lboost_thread
/usr/bin/ld: cannot find -lboost_thread
collect2: ld returned 1 exit status 
```

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:57:59.047

尝试安装 32 位 boost 包：

```
sudo apt-get install libboost-thread-dev:i386 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T00:52:53.177

您需要 32 位版本的线程库。您的问题的[答案](https://stackoverflow.com/questions/1357742/how-do-i-force-a-32-bit-build-of-boost-with-gcc)已经在 stackoverflow.com 上。从源代码构建 boost 时使用*address-model选项。*Boost 为在 Linux 上构建提供了很好的[文档](http://www.boost.org/doc/libs/1_50_0/more/getting_started/unix-variants.html)。

```
bjam address-model=32 
```

# jquery - 用jquery过滤表格单元格的显示

> ID：11387092
> 
> 赞同：3
> 
> 时间：2012-07-08T22:03:42.593
> 
> 标签：jquery, filter, html-table

我有一个像下面这样的表格结构，我想在单击链接时使用 JQuery 过滤表格单元格的显示。例如，如果我有一个看起来像这样的链接，`<a href="#" title="cat">show cats</a>`我想隐藏除那些包含“猫”字样的表格单元格之外的所有表格单元格。我在想我可以使用“attr”、“contains”和“hide/show”的组合，所以我可以抓住我点击的链接的标题属性，然后将它与表格单元格中的文本匹配最后显示/隐藏我想要的单元格，但理论和实现是两件不同的事情，我什至不确定这是否可行或如何将它们组合在一起，所以我想我会在这里向专家寻求一些建议。

```
<table>
  <tr>
    <td>cat</td> 
    <td>cat</td>
  </tr>

  <tr>
    <td>dog</td>
    <td>dog</td>
  </tr>

  <tr>
    <td>horse</td>
    <td>horse</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T22:06:42.723

试试这个：

```
$('a').click(function(e){
   e.preventDefault();  // prevents default action of the anchor
   var con = $(this).attr('title');
   $('td').hide();
   $('td:contains("'+ con +'")').show()
}) 
```

[演示](http://jsfiddle.net/LkEkA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T22:08:23.480

对于这个例子，我给表一个 id `tableSelector`-

```
<table id="tableSelector"></table> 
```

* * *

```
$("a.toggle_link").on('click',function(e){
  e.preventDefault();
  var cells = $("#tableSelector td");
  var searchString = $(this).attr('title');
  cells.hide();
  $("#tableSelector td:contains('" + searchString + "')").show();
}); 
```

对于每`<a class="toggle_link">`一个被点击的，这段代码将隐藏所有的单元格，然后检查被点击的标题`<a>`并只显示包含该文本的单元格。

不要忘记`preventDefault()`功能。这将防止点击`<a>`没有真实标签的默认行为`href`- 通常会跳转到屏幕顶部。

# php - MySQL PHP CSV 文件导出

> ID：11387098
> 
> 赞同：0
> 
> 时间：2012-07-08T22:04:08.507
> 
> 标签：php, mysql, csv

首先，为下面的一些代码道歉。我是 PHP 和学习新手，我知道我编写的代码既不是最优雅也不是最高效的。

我正在尝试创建一个函数，该函数通过从 MySQL 中的表中导出数据来生成用于 excel 的 CSV 类型文件。到目前为止，我已经完成了所有工作，只是我想将表中的一个变量从“客户 ID”（一个数字）替换为“公司名称”（一个文本值），这样最终导出的文件更易于阅读.

到目前为止，我的代码是这样的（再次道歉！），

```
//Connect with db
global $smarty;
$tpl_vars = $smarty->get_template_vars();
global $gCms;
$db = &$gCms->GetDb();

//Check config settings
$config = $tpl_vars['invoice_export_columns'];
$headers = str_replace('"','\'',$config);
$rows = str_replace('"','',$config);
$start = $tpl_vars['from'];
$start = date("'Y-m-d'", $start);
$end = $tpl_vars['to'];
$end = date("'Y-m-d'", $end);

//Get client name
$modops = cmsms()->GetModuleOperations();
$joms = $modops->get_module_instance('JoMS');
$client = $tpl_vars['clientrp'];
$query = 'SELECT * FROM '.cms_db_prefix() .'module_joms_clients
    WHERE company_name = ?';
$row = $db->GetRow($query, array($client));
$client = $row['client_id'];
$clientid = "'$client'";

//Check available statuses
if (isset($tpl_vars['csvdraft'])) { $draft = '\'14\''; } else { $draft = '\'0\''; }
if (isset($tpl_vars['csvsent'])) { $sent = '\'15\''; } else { $sent = '\'0\''; }
if (isset($tpl_vars['csvpaid'])) { $paid = '\'25\''; } else { $paid = '\'0\''; }

//Connect with invoices
$db = cmsms()->GetDb();
$table = 'cms_module_joms_invoice_headers';
$file = 'export';

//Create headers
$result = mysql_query("SHOW COLUMNS FROM ".$table." WHERE Field IN ($headers);");
$i = 0;
if (mysql_num_rows($result) > 0) 
{
   while ($row = mysql_fetch_assoc($result)) 
   {                    
      $csv_output .= $row['Field'].", ";
      $i++;   
   }
}
$csv_output .= "\n";

//Create body
if ( $clientid == "''" ) {
$values = mysql_query("SELECT $rows FROM ".$table." WHERE invoicedate >= $start AND invoicedate <= $end AND (status_id = $draft OR status_id = $sent OR status_id = $paid) ");
} else {
$values = mysql_query("SELECT $rows FROM ".$table." WHERE invoicedate >= $start AND invoicedate <= $end AND (status_id = $draft OR status_id = $sent OR status_id = $paid) AND client_id = $clientid ");    
}
while ($rowr = mysql_fetch_row($values)) 
{
   for ($j=0;$j<$i;$j++) 
   {   
       $csv_output .= $rowr[$j].", ";       
   }
   $csv_output .= "\n";
}

//Write file
$myFile = "uploads/csv/invoice.csv";
$fh = fopen($myFile, 'w') or die("can't open file");
fwrite($fh, $csv_output);
fclose($fh); 
```

它们是表中名为 client_id 的列，当前在 csv 正文中作为 2 位数值输出。我想用这个代替实际的名字。在代码的前面，我设法反向执行相同的操作（在 //Get client name 下），但我不知道如何在生成 $csv_output 的同时反过来执行此操作。

$csv_output 看起来像这样，

invoicenumber client_id invoicedate status_id taxrate amountnett
100 2 2012-06-14 00:00:00 15 19.6 50
103 3 2012-06-16 00:00:00 15 20 23.5
104 2 2012-06-27 00:00:00 15 20 50

我想要做的是将列 client_id 中的值替换为“module_joms_clients”表中 company_name 列中的值。

我很欣赏这是一个很难回答的问题，但我想我会看看是否有人可以提供帮助。

编辑

我在下面尝试了这段代码，但它还没有工作，我不知道为什么。

```
//Create body
$values = mysql_query("SELECT $rows FROM ".$table." JOIN cms_module_joms_clients ON cms_module_joms_invoice_headers.client_id = cms_module_joms_clients.company_name WHERE invoicedate >= $start AND invoicedate <= $end AND (status_id = $draft OR status_id = $sent OR status_id = $paid) ");    
while ($rowr = mysql_fetch_row($values)) 
{
   for ($j=0;$j<$i;$j++) 
   {   
       $csv_output .= $rowr[$j].", ";       
   }
   $csv_output .= "\n";
} 
```

存储客户信息的表称为“cms_module_joms_clients”，客户的名称存储在“company_name”列下。客户端 ID 取自“cms_module_joms_invoice_headers”表，该行称为“client_id”。

我认为那是对的，但我想不是。

编辑

'cms_module_joms_clients' 表结构如下所示，

![在此处输入图像描述](../Images/3c9b433241ca33788f407438e3ee6ca9.png)

'cms_module_joms_invoice_headers' 表结构看起来像这样，

![在此处输入图像描述](../Images/3b83dbd7ae50b9e334b9f66e7241591f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:15:18.623

您正在寻找的是一个 JOIN。我缺少有关您的表结构的一些信息，但您需要做的是在 $rows 变量中包含“COMPANY_TABLE.COMPANY_NAME AS company_name”并将您的选择更改为如下内容：

```
$values = mysql_query(
   "SELECT
      $rows
    FROM ".$table."
    JOIN 
      module_joms_clients
    ON
      CLIENT_TABLE.COMPANY_ID = module_joms_clients.COMAPANY_ID
    WHERE
      invoicedate >= $start AND invoicedate <= $end AND
      (status_id = $draft OR status_id = $sent OR status_id = $paid) AND
      client_id = $clientid"
); 
```

如果您包含有关公司和客户表的一些详细信息，我可以更新查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:05:50.203

知道了。不是世界上最好的代码，我会努力的！但它确实适用于以下内容，

```
$values = mysql_query('SELECT '.$rows.'
        FROM '.cms_db_prefix().'module_joms_invoice_headers ih
        LEFT JOIN '.cms_db_prefix().'module_joms_clients cl
        ON ih.client_id = cl.client_id
        WHERE invoicedate >= '.$start.' AND invoicedate <= '.$end.' AND (ih.status_id = '.$draft.' OR ih.status_id = '.$sent.' OR ih.status_id = '.$paid.') AND ih.client_id != 0
        '); 
```

感谢大家的帮助

# symfony - Symfony2：捆绑路由可以命名空间吗？

> ID：11387100
> 
> 赞同：1
> 
> 时间：2012-07-08T22:04:13.480
> 
> 标签：symfony, routing, namespaces, twig

我有一个 MagazineBundle，它在它的一个 Twig 模板中有`path('portfolio')`一个带有前缀的不同包的根。

```
# app/config/routing.yml

LameMagazineBundle:
    resource: "@LameMagazineBundle/Resources/config/routing.yml"
    prefix:   /

LamePortfolioBundle:
    resource: "@LamePortfolioBundle/Resources/config/routing.yml"
    prefix:   /portfolio 
```

和

```
# src/Lame/PortfolioBundle/Resources/config/routing.yml

portfolio:
    pattern:  /
    defaults: { _controller: LamePortfolioBundle:Default:index } 
```

但是，如果我添加第三个包，可能是我已经下载并安装的一个包，并且该包也碰巧也有一个名为“portfolio”的路由，我是否必须重命名这些路由或者有没有办法给它们命名？

我尝试使用两个匹配的路由名称进行的实验导致最后一个声明的路由名称覆盖了第一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:07:39.310

它没有内置在路由系统中。您必须手动为您的路由名称加上 bundle 或其他命名空间的前缀。

具有路由前缀功能，`FOSRestBundle`但我不确定它的耦合程度，或者它是否可以在没有所有捆绑其他功能的情况下轻松使用。

[http://symfony.com/doc/master/bundles/FOSRestBundle/6-automatic-route-generation_multiple-restful-controllers.html#naming-collisions](http://symfony.com/doc/master/bundles/FOSRestBundle/6-automatic-route-generation_multiple-restful-controllers.html#naming-collisions)

# javascript - 如何在 GWT 中将 JSONObject 或 JavaScriptObject 分配给 $wnd[x]？

> ID：11387104
> 
> 赞同：0
> 
> 时间：2012-07-08T22:05:00.177
> 
> 标签：javascript, json, gwt, jsni

`var`我使用 GWT Dictionary 从我的 HTML 页面中读取了一些内容。`var`看起来像这样：

```
var test = {
    "a" : "123",
    "b" : "jg34l",
    ...
} 
```

现在我通过 AJAX-Call 为我的 JS var 获取新内容。目前我像这样覆盖它：

```
public native void set(String key, String value) /*-{
    $wnd["test"][key] = value;
}-*/;

public void onResponseReceived(Request request, Response response) {
    JSONObject obj = (JSONObject) JSONParser.parseLenient(response.getText());

    for (String key : obj.keySet()) {
        JSONString val = (JSONString) obj.get(key);
        set(key, val.stringValue());
    }
} 
```

如您所见，我得到了一个 JSON 字符串。解析它。将其转换为 JSONObject。获取每个键值对并使用 JSNI 方法设置对。

必须有更简单的方法来做到这一点？！我只想说： $wnd["test"] = myJsonObject

请帮助我，因为这是性能关键步骤（最多 1000 个键值对）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:49:16.733

您可以尝试使用[JSO](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay)（应该也比 快得多`JSONObject`）
像这样的东西：

```
public native void set(JavaScriptObject data) /*-{
   $wnd['test'] = data;
}-*/;

public void onResponseReceived(Request request, Response response) {
    JavascriptObject data = JsonUtils.safeEval(response.getText()).case();
    set(data);
} 
```

我自己没有试过，所以我不能说100%是否有效。

**更新**：您可以直接返回支持散列访问
的而不是字典：`JavaScriptObject`

```
public class MyDictionary extends JavaScriptObject {

    public native String get(String name) /*-{
        return this[name];
    }-*/;
}

public native MyDictionary getData() /*-{
   return $wnd['test'];
}-*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:33:44.223

这是我的 GWT Dictionary 版本（真正的动态语言切换）：

```
public native void setTranslation(String locale, JavaScriptObject translationData) /*-{
    $wnd[locale] = translationData;
}-*/

@Inject
TranslationProvider translationProvider;

public void onResponseReceived(Request request, Response response) {
    String newLocale = "en";
    JavaScriptObject translationData = JsonUtils.unsafeEval(response);
    setTranslation(newLocale, translationData);
    translationProvider.setLocale(newLocale);
    LocaleChangeEvent.fire(eventBus);
} 
```

每个显示可翻译文本的小部件都注册`LocaleChangeEvent`并实现`LocaleChangeEventHandler`：

```
public interface LocaleChangeEventHandler extends EventHandler {
    void onLocaleChange(LocaleChangeEvent event);
} 
```

在`onLocaleChange`方法中，它只是`get(...)`从`TranslationProvider`类中调用方法来接收它的字符串：

```
public class LocaleAwareLabel extends Label implements LocaleChangeEventHandler {
    TranslationProvider translationProvider;

    @Inject
    public LocaleAwareLabel(TranslationProvider translationProvider, EventBus eventBus) {
        this.translationProvider = translationProvider;
        eventBus.addHandler(LocaleChangeEvent.TYPE, this);
        get();
    }

    public void get() {
        this.setText(translationProvider.get("myDictionaryKey"));
    }

    @Override
    public void onLocaleChange(LocaleChangeEvent event) {
        get();
    }
} 
```

这里是`TranslationProvider`班级：

```
@Singleton
public class TranslationProvider {
    Dictionary dictionary;

    public void setActiveLocale(String locale) {
        dictionary = Dictionary.getDictionary(locale);
    }

    public String get(String key) {
        dictionary.get(key);
    }
} 
```

就是这样！

# c - 如何在 MOV 指令中使用物理地址？

> ID：11387106
> 
> 赞同：1
> 
> 时间：2012-07-08T22:05:12.033
> 
> 标签：c, linux, assembly, linux-kernel, x86

我想访问物理地址`0xfee00020`，这是 APIC 寄存器的内存映射的位置。我想使用“ `MOV`”指令读取或写入数据到这个位置。我应该先进行物理到虚拟地址的转换吗？应该如何在内联汇编中编写代码片段？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T22:56:51.477

您应该使用以下函数而不是直接访问地址（这可能有效，但绝对不可移植）：

1.  `request_mem_region()`
2.  `ioremap()`
3.  `writeb()/writew()/writel()`或者`readb()/readw()/readl()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T22:51:40.417

是的，您需要先对地址进行物理到虚拟地址的转换，通常使用 ioremap，然后才能使用它。在某些平台上，您可以直接使用 ioremap 的返回值作为指向您要访问的内存的指针。

# spring - 使用 Spring Annotaion 实现工厂设计模式

> ID：11387112
> 
> 赞同：1
> 
> 时间：2012-07-08T22:06:06.197
> 
> 标签：spring, annotations, design-patterns, factory

我有一个工厂类，它应该返回一个`classA`or的实例`classB`。这些类实现接口`XYZ`：

```
 interface xyz;
   getInstance()

   @service 
   classA implements xyz{
      public void checkStatus(){
      }
   }

   @service  classB implements xyz{
      public void checkStatus(){
      }
   } 
```

工厂类：

```
 @component
   class ABCFactory{
       @Autowire classA A;
       public static getInstance(str a){
           return classA;
       }
   } 
```

客户端代码：

```
 Class A a = ABCFactory.getInstance("A");
   a.checkStatus(); 
```

我得到空指针异常——可能`a`返回为空？

使用 spring 注释和自动装配 bean 实现工厂模式的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:20:28.820

很难确定为什么在没有看到 Spring 配置的情况下不会进行自动装配。我的第一个猜测是您没有打开组件扫描：

```
<context:component-scan base-package="org.example"/> 
```

将类似的内容添加到您的 spring 配置文件（使用正确的包）将告诉 Spring 扫描包结构以查找需要自动连接的字段以及可用于自动连接的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:49:32.627

`static`是万恶之源。你是怎么进入`classA`这里的？

```
@Component
class ABCFactory{
   @Autowire classA A;
   public static getInstance(str a){
       return classA;
   }
} 
```

`A`字段不是静态的，而`getInstance()`方法是 - 你的代码不会编译。

此外，依赖注入适用于实例，而不是`static`类。因此，您应该摆脱`static`：

```
@Component
class ABCFactory {
   @Autowire classA A;
   public xyz getInstance(str a){
       return A;
   }
} 
```

`ABCFactory`并在您需要的地方注入（例如在其他服务或控制器中）：

```
@Autowired
private ABCFactory factory; 
```

顺便说一句，您的设计在 Spring 环境中看起来很可疑，您想实现什么？

# php - PHP文件上传是否受max_input_time影响？

> ID：11387113
> 
> 赞同：31
> 
> 时间：2012-07-08T22:06:23.180
> 
> 标签：php

我正在研究在 PHP 中设置默认值的最佳值是什么。我看到了很多关于`max_input_time`.

这个答案说他认为文件上传不计入计时器： [https ://stackoverflow.com/a/3758522/518169](https://stackoverflow.com/a/3758522/518169)

在官方 PHP 文档中，有一个巨大的红色警告说：

> max_input_time 设置允许脚本接收输入的最长时间，以秒为单位；这包括文件上传。对于大文件或多个文件，或者连接速度较慢的用户，可能会超过默认的 60 秒

来源：[http://php.net/manual/en/features.file-upload.common-pitfalls.php](http://php.net/manual/en/features.file-upload.common-pitfalls.php)，最后更新时间：2012 年 7 月 6 日星期五

因此，从这一点看来，它似乎`max_input_time` **确实会影响**文件上传，并且要确保访问者即使通过慢速或移动连接也可以上传 20 MB 的文件，默认值 60 绝对不够！

您建议将此值设置为什么？300？

`max_execution_time`另外，和之间有什么关系`max_input_time`吗？例如，`max_execution_time`需要大于`max_input_time`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-09T13:04:43.193

经过一些快速的基准测试后**，我认为`max_input_time`处理连接速度较慢的用户的大量上传不会有任何影响。**

来自[http://us3.php.net/manual/en/info.configuration.php#ini.max-input-time](http://us3.php.net/manual/en/info.configuration.php#ini.max-input-time)

> 这设置了允许脚本解析输入数据（如 POST 和 GET）的最长时间（以秒为单位）。**它是从接收服务器上的所有数据到开始执行脚本的那一刻测量的。**

我正在使用 PHP 5.3.8 并使用以下 .htaccess 配置

```
php_value max_input_time 5
php_value max_execution_time 1
php_value upload_max_filesize "2048M"
php_value post_max_size "2048M" 
```

我的测试脚本是：

```
<?php
if (!empty($_FILES)) {
    echo '<pre>';
    var_dump($_FILES);
    echo '</pre>';
}
?>
<form enctype="multipart/form-data" method="POST">
    File: <input name="userfile" type="file" />
    <input type="submit" value="Upload" />
</form> 
```

**经过多次试验，我的 1.5G 文件上传**大约需要16-17 秒，**处理需要 4-5 秒**，执行时间基本上为 0。

随着`max_input_time 5`脚本完成。将其设置为 4 我们得到`PHP Fatal error: Maximum execution time of 4 seconds exceeded in Unknown on line 0, referer: http://localhost/test-upload.php`

它似乎`max_execution_time`也没有任何意义，因为我们在整个测试过程中都将它保持在 1。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-20T09:01:45.850

我对*max_input_time*进行了广泛的研究。网络传输时间不是一个因素。PHP 作为 Apache 处理程序 (mod_php) 或 Nginx/PHP-FPM -pair 产生了类似的结果：一旦传输完成，PHP 就会获取上传的文件，并且 Web 服务器会移交数据。在我的测试中，2 秒*max_input_time*足以处理 800 MiB 的上传。

所有细节都在[http://blog.hqcodeshop.fi/archives/185-PHP-large-file-uploads.html](http://blog.hqcodeshop.fi/archives/185-PHP-large-file-uploads.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-09T13:43:31.037

这将取决于 PHP 如何桥接到网络服务器。

从技术上讲，网络服务器有可能在收到请求标头后立即调用 PHP——在这种情况下，PHP 将不停地等待 POST 数据通过互联网，直到它可以填充请求变量（这很有可能将超过 max_input_time）。但更常见的是，网络服务器会延迟 PHP 的调用，直到它有完整的请求（超过 max_input_time 的可能性要小得多）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-14T17:08:02.780

从 PHP 5.4 开始，PHP 文件上传肯定会受到 max_input_time 的影响。我最近在上传时间超过 60 秒的文件上收到 500 错误。我在我的 php.ini 中更改了这个单一的值，它就消失了。

此外，手册中的措辞现在与接受的答案中引用的不同。它现在说：

> 这设置了允许脚本解析输入数据（如 POST 和 GET）的最长时间（以秒为单位）。计时从*服务器调用 PHP 的那一刻*开始，到执行开始时结束。

我使用的是 PHP 5.4.16 nts 和 IIS 7.5。显然，在文件上传之前调用了 PHP。

需要注意的一件有趣的事情是我的 PHP 错误日志给出了错误的错误。他们说“PHP 致命错误：超过 10000 秒的最大执行时间...”。我将 max_execution_time 设置为什么并不重要，它会给新数字带来相同的错误。

# android - Android：将额外内容传递给意图 - 无法接收我传递的内容

> ID：11387114
> 
> 赞同：2
> 
> 时间：2012-07-08T22:06:35.440
> 
> 标签：android, android-activity

我正在尝试做一件简单的事情：将变量从活动 A 传递到活动 B。我在活动 A 中有这个方法：

```
private void editAccount(CloudAccount account) {
    Intent intent = new Intent(this, EditAccountActivity.class);
    intent.putExtra("accountId", account.getId());
    this.showToast("ID passed: " + account.getId());
    startActivity(intent);
} 
```

此代码中的 Toast 显示“ID 已通过：1”。这是对的。现在，我开始活动 B：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Bundle extras = getIntent().getExtras();
    Toast.makeText(this, "ID received: " + extras.getString("accountId"), Toast.LENGTH_LONG).show(); 
```

此 toast 显示“收到的 ID：null”。这是不正确的。如果我测试 getInt("accountId") - 它返回 0。我的代码有什么问题？看起来很简单，没有出错的地方，但还是……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:27:31.357

那是个愚蠢的问题，实际上。当我试图接收 int 时，我一直在传递很长的时间。getLong() 效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T22:14:29.963

我想你想使用：

```
public int getIntExtra (String name, int defaultValue) 
```

或者在您使用捆绑包的情况下

```
public int getInt (String name) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T04:59:15.743

您可以使用 SharedPreferences 将数据从当前活动传递到下一个活动。您需要在 Activity A 中输入如下代码。

```
 private void editAccount(CloudAccount account) { 
      SharedPreferences preferences = getSharedPreferences("Preferences", 0);
      SharedPreferences.Editor editor = preferences.edit(); 
      Intent intent = new Intent(this, EditAccountActivity.class);  
      editor.putInt("accountId", account.getId()); editor.commit();    
      startActivity(intent); 
 } 
```

之后，您需要将此代码放在您的活动 B 中以从活动 A 接收您的 ID。

```
SharedPreferences preferences;
int id;

preferences = getSharedPreferences("Preferences", 0);

id =  preferences.getString("accountId", 0); 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T03:26:38.023

如果将**Integer**值传递给 Activity，则必须以其他意图获取该值

```
 empid = Extras.getInt(String str); 
```

在您的情况下，您必须使用 as

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
Bundle extras = getIntent().getExtras();
System.out.println("Received value is "+extras.getInt("accountId"));
Toast.makeText(this, "ID received: " + extras.getInt("accountId"), Toast.LENGTH_LONG).show(); 
```

您现在可以检查 logcat 的接收值。祝你好运

# excel - 根据同一工作簿中另一个工作表中的数据为工作表中的单元格着色

> ID：11387116
> 
> 赞同：0
> 
> 时间：2012-07-08T22:06:44.857
> 
> 标签：excel, excel-2007, excel-2010, vba

我有以下名为**Data**的工作表： ![在此处输入图像描述](../Images/0d0c924719ad4a681ced17f08161002c.png)

在同一个工作簿中，我有另一个名为**Employee Database**的工作表。 ![在此处输入图像描述](../Images/0731c85f58793e3dd2e985de986ea1b3.png)

在 Excel 中，如果“员工电子邮件地址”不在**员工数据库**中，如何将“员工电子邮件地址”以及**数据**工作表中相应的“公司”和“公司 URL”单元格着色为红色？

 **换句话说，我试图让**员工数据库**工作表看起来像这样： ![在此处输入图像描述](../Images/db4258e0ec231cbb526de1d527983b4d.png)

我刚刚举了一个例子，实际上我有超过 10,000 个单元格的数据可以做到这一点。我开始手动执行此操作，并意识到这将花费我很长时间。

我想知道是否有一个宏可以在 Excel 中执行此操作？

非常感谢您的帮助！我有上面截图的示例工作簿可供下载： [http ://www.mediafire.com/?dttztp66dvjkzn8](http://www.mediafire.com/?dttztp66dvjkzn8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:47:11.873

您可以在没有 VBA 的情况下执行此操作，但需要对工作`Data`表上的数据稍作更改。

我不建议在 Excel 中使用“数据透视表”或“小计”式的数据存储方式，在这种情况下，您*只需*在一个列中输入一次主键，然后填写旁边的关联数据，直到下一个主键。

就像合并的单元格一样，这只会在您以后想要重新组织数据时导致问题。

这是我所做的：

## 填写数据表上缺少的电子邮件地址

`A2`将单元格一直突出显示到列**B**`A`中数据的末尾。因此，如果您在单元格中有公司名称，但只有来自的电子邮件，您应该突出显示。这是因为我们在每行可用数据中填写了电子邮件地址。**`B2:B100``A2:A98``A2:A100`**

 **转到**编辑**»**查找和选择**»**转到特殊**，选择`Blanks`并单击`OK`。

![去特别的，空白](../Images/984322f968f3034a36cc1865893f3edd.png)

现在选择空白，输入`=` `↑`(向上箭头) ，然后按`Ctrl`+ `Enter`。A 列中的空白单元格将填写缺少的电子邮件地址。突出显示 A 列，复制并粘贴值。

## 为电子邮件创建动态命名范围

在`Employee Database`工作表上，在“引用”框中使用以下公式创建一个名为“电子邮件”的命名范围：

`=OFFSET('Employee Database'!$C$1,1,0,COUNTA('Employee Database'!$C:$C)-1,1)`

## 添加条件格式

在`Data`工作表上，突出显示`A2:C whatever`（例如：）`A2:C20000`，然后转到**主页**»**样式**»**条件格式**并使用以下公式：

`=ISNA(MATCH($A2,Emails,0))`

选择所需的配色方案并单击`OK`。这是它在我的计算机上的外观以及一些示例数据：

![突出显示未找到的样本数据](../Images/4635206fd43575816970209a8ab1e80f.png)

有一些小的限制：

*   您不能再在工作表上将 A 列留空`Data`。
*   数据行之间的工作表上不能有空白行`Employee Database`。这是由于动态范围的工作方式。

## 好处

这种方法的好处是，IMO，巨大的。

*   您可以在员工数据库表中添加或删除行，突出显示将自动调整。例如：如果我添加 d@gmail.com 并删除 c@nbc.com，表格上的格式会`Data`立即更新。

![更新的员工数据库](../Images/1a6013278806af52454ab4c3a1fd8ec1.png)

*   您不必更改现有的工作表结构（除了填写缺失的数据并添加范围名称）。无需额外的工作表。
*   您的工作簿可以保持无 VBA（如果还没有的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:28:51.150

这是你正在尝试的吗？这将创建一个带有输出的新工作表“Desired Result”。将其粘贴到模块中。

```
Option Explicit

Sub Sample()
    Dim wsData As Worksheet, wsDB As Worksheet, wsO As Worksheet
    Dim lRow As Long, i As Long
    Dim clrRng As Range

    Set wsData = Sheets("Data")
    Set wsDB = Sheets("Employee Database")
    Set wsO = Sheets.Add

    On Error Resume Next
    Application.DisplayAlerts = False
    Sheets("Desired Result").Delete
    Application.DisplayAlerts = True
    On Error GoTo 0

    With wsO
        .Name = "Desired Result"
        wsData.Cells.Copy .Cells

        lRow = .Range("B" & .Rows.Count).End(xlUp).Row

        For i = 2 To lRow
            If .Range("A" & i).Value = "" Then .Range("A" & i).Value = .Range("A" & i - 1).Value
        Next i

        For i = 1 To lRow
            If Application.WorksheetFunction.CountIf(wsDB.Columns(3), .Range("A" & i).Value) = 0 Then
                If clrRng Is Nothing Then
                    Set clrRng = .Rows(i)
                Else
                    Set clrRng = Union(clrRng, .Rows(i))
                End If
            End If
        Next i

        If Not clrRng Is Nothing Then clrRng.Interior.ColorIndex = 3

        For i = lRow To 2 Step -1
            If .Range("A" & i).Value = .Range("A" & i - 1).Value Then .Range("A" & i).ClearContents
        Next i
    End With
End Sub 
```****

# android - 用于开发的 Android 平板电脑

> ID：11387118
> 
> 赞同：0
> 
> 时间：2012-07-08T22:07:07.880
> 
> 标签：android, tablet

有人可以建议我应该使用哪种平板电脑来测试我的应用程序吗？我刚刚开始学习 Android 开发和移动 Web 应用程序开发。我在看 Ainol Elf 2、Ainol Aurora 2 和 Nexus 7，但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T22:30:49.110

任何平板电脑都可以。我会得到 Nexus 7，因为

1.  它很便宜（200 美元，而其他一些超过 500 美元）。

2.  它是由谷歌制造的（即三星和HTC 等制造商没有对用户界面进行修改）。

3.  它运行最新版本的 Android 4.1 Jelly Bean。

但老实说，这些平板电脑中的任何一款都不会出错。

# static-libraries - appharbor 未部署静态内容

> ID：11387120
> 
> 赞同：4
> 
> 时间：2012-07-08T22:07:21.577
> 
> 标签：static-libraries, web-deployment, appharbor

我刚开始在 AppHarbor 上托管一个 Web 应用程序，并将其配置为监听我的 github 存储库提交。

每次提交后，我都会在 AppHarbor 上看到运行测试和部署的构建，但是当我转到托管在 AppHarbor 上的应用程序页面时，我看不到任何图像，并且缺少 js 脚本。

我实际上可以在 github 源代码中看到它们，但是当我从 AppHarbor 下载包时，它们似乎从我的“静态”文件夹中丢失了......

还有其他人遇到这个问题吗？...有什么可能的原因吗？...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T05:46:23.430

我解决了问题-

发生这种情况的原因是内容没有被复制到输出目录。我不确切知道 AppHarbor 如何在那里构建部署脚本，但我将`Copy To Output Directory`选项值更改为`Copy Always`，这解决了问题。
（`Build Action`已经设置为`Content`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T22:09:32.593

确保文件包含在 C# 项目中，并且它们`Build Action`设置为`Content`.

# javascript - 如何传递原型函数？

> ID：11387127
> 
> 赞同：9
> 
> 时间：2012-07-08T22:08:23.777
> 
> 标签：javascript, prototype

我是 javascript 的新手，我需要一些帮助。我试图按函数对半径求和，但得到一个未定义的错误:(

```
function sumWithFunction(func, number) {
    return func() + number;
}

function Circle(X, Y, R) {
    this.x = X;
    this.y = Y;
    this.r = R;
}
Circle.prototype.getRadius = function () {
    return this.r;
}
Circle.prototype.increaseRadiusBy = function(number) {
    this.r = sumWithFunction(this.getRadius, number);
}

function addFivetoIt(func) {
    func(5);
}

var MyCircle = new Circle(0, 0, 10);
addFivetoIt(MyCircle.increaseRadiusBy); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-08T22:26:27.170

问题是您正在传递一个函数对另一个函数的引用，因此传递的函数失去了作用域！这是违规行：

```
Circle.prototype.increaseRadiusBy = function(number) {
    this.r = sumWithFunction(this.getRadius, number);
} 
```

JavaScript 对象在某些方面比它们看起来更简单。当您将`getRadius`方法添加到`Circle`原型时，您并没有像在经典 OO 中那样定义类方法。您只是定义原型的命名属性，并将函数分配给该属性的值。当您`this.getRadius`作为参数传递给静态函数时，例如`sumWithFunction`， 的上下文`this`会丢失。它使用`this`绑定到的关键字执行`window`，并且由于`window`没有`r`属性，浏览器会抛出未定义的错误。

换句话说，**该语句`this.getRadius()`实际上是在说“执行分配给 的`getRadius`属性的函数，并在 的*上下文*中`this`执行它。*`this`****如果不通过该语句显式调用函数，则不会分配上下文。*

 *一个常见的解决方案是为任何接收另一个函数的函数添加一个预期的参数，作为上下文。

```
function sumWithFunction(func, context, number) {
    return func.apply(context) + number;
}

function Circle(X, Y, R) {
    this.x = X;
    this.y = Y;
    this.r = R;
}
Circle.prototype.getRadius = function () {
    return this.r;
}
Circle.prototype.increaseRadiusBy = function(number) {
    this.r = sumWithFunction(this.getRadius, this, number);
}

function addFivetoIt(func, context) {
    func.apply(context,[5]);
}

var MyCircle = new Circle(0, 0, 10);
addFivetoIt(MyCircle.increaseRadiusBy, myCircle); 
```

一个更简单但不太健壮的解决方案是声明一个内联函数，该函数可以访问本地闭包中的上下文引用。

```
function sumWithFunction(func, number) {
    return func() + number;
}

function Circle(X, Y, R) {
    this.x = X;
    this.y = Y;
    this.r = R;
}
Circle.prototype.getRadius = function () {
    return this.r;
}
Circle.prototype.increaseRadiusBy = function(number) {
    var me = this;
    this.r = sumWithFunction(function() {
        return me.getRadius()
    }, number);
}

function addFivetoIt(func) {
    func(5);
}

var MyCircle = new Circle(0, 0, 10);
addFivetoIt(function(number) {
    return MyCircle.increaseRadiusBy(number);
}); 
```

但到目前为止，最简单的解决方案是使用 ECMAScript 的一个新特性，一个名为`bind`. [这里解释得很好](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)，包括并非所有浏览器都支持它的事实。这就是为什么很多库，比如 jQuery、Prototype 等，都有跨浏览器的函数绑定实用方法，比如[`$.proxy`](http://api.jquery.com/jQuery.proxy/).

```
function sumWithFunction(func, number) {
    return func() + number;
}

function Circle(X, Y, R) {
    this.x = X;
    this.y = Y;
    this.r = R;
}
Circle.prototype.getRadius = function () {
    return this.r;
}
Circle.prototype.increaseRadiusBy = function(number) {
    this.r = sumWithFunction(this.getRadius.bind(this), number); // or $.proxy(this.getRadius,this)
}

function addFivetoIt(func) {
    func(5);
}

var MyCircle = new Circle(0, 0, 10);
addFivetoIt(MyCircle.increaseRadiusBy.bind(MyCircle)); // or $.proxy(MyCircle.increaseRadiusBy,MyCircle) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-03T19:03:01.353

JavaScript 中的棘手[`this`之处在于它包含该函数在](https://masteringjs.io/tutorials/fundamentals/this)*默认情况下[*被调用时的属性的对象。*](https://masteringjs.io/tutorials/fundamentals/this)`MyCircle.increaseRadiusBy`因此，当您作为参数传递时，然后将其调用为`func()`，因此该函数不是任何对象的属性。最简单的设置方法`this`是使用`call()`函数：*

 *```
function addFivetoIt(func, context) {
    // The first parameter to `call()` is the value of `this` in the function
    func.call(context, 5);
}

var MyCircle = new Circle(0, 0, 10);
addFivetoIt(MyCircle.increaseRadiusBy, MyCircle); 
```

下面的方法，`func`在调用它之前设置为属性，也有效。在实践中你永远不会这样做，因为它为 增加了一个不必要的属性`context`，但它是展示如何`this`工作的一个很好的教学示例。

```
function addFivetoIt(func, context) {
    context.func = func;
    context.func(5);
}

var MyCircle = new Circle(0, 0, 10);
addFivetoIt(MyCircle.increaseRadiusBy, MyCircle); 
```**

# php - 在 PHP 中从 Vimeo 获取直接链接视频

> ID：11387128
> 
> 赞同：8
> 
> 时间：2012-07-08T22:08:45.153
> 
> 标签：php, download, vimeo

我想用 PHP 脚本直接链接到 Vimeo 的视频。我设法手动找到它们，但我的 PHP 脚本不起作用。这是倡议：例如我拍了这个视频：http: [//vimeo.com/22439234](http://vimeo.com/22439234)

当您进入页面时，Vimeo 会生成与当前时间戳和此视频相关联的签名。此信息存储在 JavaScript 变量中，大约在第 520 行之后： `window.addEvent ('domready', function () {`

然后，当您单击播放时，HTML5 播放器会读取此变量并发送 HTTP 请求：

```
http:// player.vimeo.com/play_redirect?clip_id=37111719&sig={SIGNATURE}&time={TIMESTAMP}&quality=sd&codecs=H264,VP8,VP6&type=moogaloop_local&embed_location= 
```

但它也适用于：

```
http:// player.vimeo.com/play_redirect?clip_id=37111719&sig={SIGNATURE}&time={TIMESTAMP}&quality=sd 
```

如果此 URL 未使用打开[http://vimeo.com/22439234](http://vimeo.com/22439234)的 IP 地址打开，则会返回带有错误消息的 HTTP 代码 200。

如果使用正确的 IP 地址打开此 URL，则标头“Location”将重定向到链接到视频文件： `http://av.vimeo.com/XXX/XX/XXXX.mp4?aksessionid=XXXX&token=XXXXX_XXXXXXXXX`

当我手动构建此链接时`http://player.vimeo.com/play_redirect?...`（“右键单击”>“源代码”>“第 520 行”），它可以工作。

但是对于 PHP 和正则表达式，它会返回`HTTP code 200`错误消息。

为什么 ？

根据我的观察，Vimeo 不会检查 HTTP 请求的标头`http:// player.vimeo.com/play_redirect?...` `GET`, `HEAD`, with cookies, without cookies, referrer 等......不会改变。

在 PHP 中，我使用函数`file_get_contents()`和`get_headers()`.

```
 <?php
    function getVimeo($id) {

    $content = file_get_contents('http://vimeo.com/'.$id);

    if (preg_match('#document\.getElementById\(\'player_(.+)\n#i', $content, $scriptBlock) == 0)
        return 1;

    preg_match('#"timestamp":([0-9]+)#i', $scriptBlock[1], $matches);
    $timestamp = $matches[1];
    preg_match('#"signature":"([a-z0-9]+)"#i', $scriptBlock[1], $matches);
    $signature = $matches[1];

    $url = 'http://player.vimeo.com/play_redirect?clip_id='.$id.'&sig='.$signature.'&time='.$timestamp.'&quality=sd';

    print_r(get_headers($url, 1));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-11T10:57:18.660

该算法如下所示：

*   输入数据：vimeoUrl。
*   内容 = 获取远程内容（vimeoUrl）。
*   解析内容以从 data-config-url 属性中查找和提取值。
*   导航到 data-config-url 并将内容加载为 JSON 对象： $video = json_decode($this->getRemoteContent($video->getAttribute('data-config-url')));
*   返回 $video->request->files->h264->sd->url — 这将返回标清质量视频的直接链接。

这是我的简单课程，为这一刻工作。

```
class VideoController
{

    /**
     * @var array Vimeo video quality priority
     */
    public $vimeoQualityPrioritet = array('sd', 'hd', 'mobile');

    /**
     * @var string Vimeo video codec priority
     */
    public $vimeoVideoCodec = 'h264';

    /**
     * Get direct URL to Vimeo video file
     * 
     * @param string $url to video on Vimeo
     * @return string file URL
     */
    public function getVimeoDirectUrl($url)
    {
        $result = '';
        $videoInfo = $this->getVimeoVideoInfo($url);
        if ($videoInfo && $videoObject = $this->getVimeoQualityVideo($videoInfo->request->files))
        {
            $result = $videoObject->url;
        }
        return $result;
    }

    /**
     * Get Vimeo video info
     * 
     * @param string $url to video on Vimeo
     * @return \stdClass|null result
     */
    public function getVimeoVideoInfo($url)
    {
        $videoInfo = null;
        $page = $this->getRemoteContent($url);
        $dom = new \DOMDocument("1.0", "utf-8");
        libxml_use_internal_errors(true);
        $dom->loadHTML('<?xml version="1.0" encoding="UTF-8"?>' . "\n" . $page);
        $xPath = new \DOMXpath($dom);
        $video = $xPath->query('//div[@data-config-url]');
        if ($video)
        {
            $videoObj = json_decode($this->getRemoteContent($video->item(0)->getAttribute('data-config-url')));
            if (!property_exists($videoObj, 'message'))
            {
                $videoInfo = $videoObj;
            }
        }
        return $videoInfo;
    }

    /**
     * Get vimeo video object
     * 
     * @param stdClass $files object of Vimeo files
     * @return stdClass Video file object
     */
    public function getVimeoQualityVideo($files)
    {
        $video = null;
        if (!property_exists($files, $this->vimeoVideoCodec) && count($files->codecs))
        {
            $this->vimeoVideoCodec = array_shift($files->codecs);
        }
        $codecFiles = $files->{$this->vimeoVideoCodec};
        foreach ($this->vimeoQualityPrioritet as $quality)
        {
            if (property_exists($codecFiles, $quality))
            {
                $video = $codecFiles->{$quality};
                break;
            }
        }
        if (!$video)
        {
            foreach (get_object_vars($codecFiles) as $file)
            {
                $video = $file;
                break;
            }
        }
        return $video;
    }

    /**
     * Get remote content by URL
     * 
     * @param string $url remote page URL
     * @return string result content
     */
    public function getRemoteContent($url)
    {
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
        curl_setopt($ch, CURLOPT_TIMEOUT, 20);
        curl_setopt($ch, CURLOPT_HEADER, false);
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
        curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
        curl_setopt($ch, CURLOPT_USERAGENT, 'spider');
        $content = curl_exec($ch);

        curl_close($ch);

        return $content;
    }

} 
```

使用：

```
$video = new VideoController;
var_dump($video->getVimeoDirectUrl('http://vimeo.com/90747156')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:54:47.497

尝试将有效的用户代理添加到每个请求的标头中。为此，您必须使用 cURL 或 HttpRequest 而不是 file_get_contents()。

经过这样的操作，我得到了一个下载视频文件的工作链接。

这是我的代码：

```
function getVimeo($id) {
    // get page with a player
    $queryResult = httpQuery('http://vimeo.com/' . $id);
    $content = $queryResult['content'];

    if (preg_match('#document\.getElementById\(\'player_(.+)\n#i', $content, $scriptBlock) == 0)
        return 1;

    preg_match('#"timestamp":([0-9]+)#i', $scriptBlock[1], $matches);
    $timestamp = $matches[1];
    preg_match('#"signature":"([a-z0-9]+)"#i', $scriptBlock[1], $matches);
    $signature = $matches[1];

    $url = 'http://player.vimeo.com/play_redirect?clip_id=' . $id . '&sig=' . $signature . '&time=' . $timestamp . '&quality=sd';

    // make the request for getting a video url
    #print_r(get_headers($url, 1));
    $finalQuery = httpQuery($url);
    return $finalQuery['redirect_url'];
}
// make queries via CURL
function httpQuery($url) {
    $options = array(
        CURLOPT_USERAGENT => 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/12.04 Chromium/18.0.1025.168 Chrome/18.0.1025.168 Safari/535.19',
        CURLOPT_RETURNTRANSFER => true,
    );
    $ch = curl_init($url);
    curl_setopt_array($ch, $options);
    $content = curl_exec($ch);
    $info = curl_getinfo($ch);
    curl_close($ch);
    $result = $info;
    $result['content'] = $content;

    return $result;
}

echo getVimeo(22439234); 
```

# hibernate - 什么是微 ORM？

> ID：11387129
> 
> 赞同：0
> 
> 时间：2012-07-08T22:08:55.567
> 
> 标签：hibernate, orm

为什么对象关系映射 (ORM) 框架被称为 Micro ORM 而不是全功能 ORM？哪些特性和/或不存在的特性构成了一个 ORM 框架，一个微型 ORM？

我从对 Hibernate、NHibernate、Entity Framework 的了解中获得了以下特性。但我想更多地了解这一点。[谷歌搜索](https://www.google.com/search?aq=f&sugexp=chrome,mod=5&sourceid=chrome&ie=UTF-8&q=what%20is%20micro%20orm)提供了很多库/框架结果，但在 TOP 结果中没有令人满意的 Micro ORM 定义。

*   缓存
*   二级缓存
*   继承映射
*   查询语言（HQL、JPAQL 等）
*   不同的映射策略
    *   每桌一节课
    *   ...
*   多对一、一对一、多对多映射
*   ...

以下库是否被视为微 ORM？为什么/为什么不？

*   .NET 中的[数据访问应用程序块](http://msdn.microsoft.com/en-us/library/ff649538.aspx)
*   [伊巴蒂斯](http://ibatis.apache.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:14:45.257

我相信 Micro ORM 的目标是简化实现并可能提高性能。我见过人们在后台编写使用 DataReader 的自定义 Micro ORM，以提供快速/只读的 ORM。

我不确定你提到的两个，但我知道 [Dapper](http://code.google.com/p/dapper-dot-net/)、[Massive](https://github.com/robconery/massive)和[PetaPoco](http://www.toptensoftware.com/petapoco/)是 Micro ORM 的好例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:17:39.713

一般来说，Micro ORM 不支持以下内容：

*   LINQ 查询或任何自定义查询语言
*   延迟加载
*   代理
*   缓存

它们往往简单易用。

Dan 列出的另一种替代方案是[MicroLite](http://microliteorm.wordpress.com)（免责声明：我是它的作者）。

# clojure - 从 REPL 中调用黑色页面

> ID：11387130
> 
> 赞同：3
> 
> 时间：2012-07-08T22:09:08.590
> 
> 标签：clojure, read-eval-print-loop, noir

是否可以调用（或者请求这个词？）一个用“defpage”定义的页面，并在 REPL 中完成 POST 变量？

我用 (defpage [:post "/form"] [req] (common/layout ...)) 创建了一个页面

我想看看 REPL 上布局调用的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T23:03:26.660

看看[noir.util.test](http://www.webnoir.org/autodoc/1.3.0/noir.util.test.html#var-with-noir)命名空间。[在 noir源代码](https://github.com/noir-clojure/noir/blob/master/test/noir/test/core.clj)中有一些使用示例

# android - 如何修改 ListView 的默认外观

> ID：11387131
> 
> 赞同：0
> 
> 时间：2012-07-08T22:09:15.883
> 
> 标签：android, listview

我想将 ListView 的默认外观更改为类似这样

```
[ CheckBox |  TextView ]
[ CheckBox |  TextView ]
[ CheckBox |  TextView ] 
```

我该怎么做？提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:13:20.200

查看本教程： [http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

它有你正在寻找的东西

# c - 构建 Newlib 的问题

> ID：11387134
> 
> 赞同：1
> 
> 时间：2012-07-08T22:09:30.527
> 
> 标签：c, compiler-errors

我正在尝试使用 CodeSourcery 中的 arm-none-eabi-XXX 为 ARM 设备交叉编译 Newlib 库，但我遇到了一些问题。运行 ./configure 和/或使其向我显示无法找到 arm-none-eabi-cc 的消息。我的路径设置正确。我可以以 root 和用户身份从终端调用 arm-none-eabi-xxx。

命令：

```
sudo ./configure --target=arm-none-eabi  --prefix=/usr/local/arm-eabi/bin --disable-newlib-supplied-syscalls 
```

结果：

```
checking for arm-none-eabi-cc... no
checking for arm-none-eabi-gcc... no
checking for arm-none-eabi-c++... no
checking for arm-none-eabi-g++... no

sudo make:
/bin/sh: arm-none-eabi-cc: command not found 
```

但是路径设置正确...

```
kris@caspinol /usr/local/newlib $ arm
arm2hpdl                 arm-none-eabi-c++        arm-none-eabi-elfedit    arm-none-eabi-gcov       arm-none-eabi-ld         arm-none-eabi-ranlib     arm-none-eabi-sprite     
arm-none-eabi-addr2line  arm-none-eabi-cc         arm-none-eabi-g++        arm-none-eabi-gdb        arm-none-eabi-nm         arm-none-eabi-readelf    arm-none-eabi-strings    
arm-none-eabi-ar         arm-none-eabi-c++filt    arm-none-eabi-gcc        arm-none-eabi-gdbtui     arm-none-eabi-objcopy    arm-none-eabi-run        arm-none-eabi-strip      
arm-none-eabi-as         arm-none-eabi-cpp        arm-none-eabi-gcc-4.6.3  arm-none-eabi-gprof      arm-none-eabi-objdump    arm-none-eabi-size       
kris@caspinol /usr/local/newlib $ arm 
```

我在配置阶段是否遗漏了一些参数？

非常感谢任何帮助。

提前致谢

# php - 使用 PHP 向 MySql 表中插入字段

> ID：11387136
> 
> 赞同：0
> 
> 时间：2012-07-08T22:09:38.870
> 
> 标签：php, mysql

我正在尝试生成一个脚本来将博客上的评论插入到 MySsl 数据库中的“评论”表中

```
<form action="insertcomment.php" method="post">
        <p class ="ctitle">Leave a Comment:</p>
        <p>
            <label for="name"><b>PostID:</b></label>
            <input type="text" id="postid" name="name" maxlength="4" /> <br/>

            <label for="name"><b>Name:</b></label>
            <input type="text" id="name" name="name" maxlength="25" /> <br/>

            <label for="email"><b>Email:</b></label>
            <input type="text" id="email" name="email" maxlength="50" /> <br/>

            <label for="website"><b>Website:</b></label>
            <input type="text" id="website" name="website" maxlength="25" /> <br/>

            <label for="content"><b>Comment:</b></label>
            <textarea id="content" name="content" cols="10" rows="4" maxlength="800"></textarea> <br/>

            <input type="submit" value="Submit Comment" name="submit_comment" /> <br/>
        </p>
        </form> 
```

我的PHP脚本如下：

```
<?php
include("dbconnect.php");
$con=new dbconnect();
$con->connect();
error_reporting(E_ALL);

if(isset($_POST['submit'])) {

    $sSql = "INSERT INTO comments
         ( post_id,name, email, website,content)
         VALUES ('$_POST[postid]','$_POST[name]', '$_POST[email]', '$_POST[website]',  '$_POST[content]')";

    mysql_query($sSql);

    echo '<h2> Your Comment is submitted</h2><br />';
}

?> 
```

但我无法将我的评论插入数据库。我的“评论”表有评论 ID、帖子 ID、姓名、电子邮件、网站、内容、发布日期字段。comment_id 是主键。它有选项 auto_increment。date_published 默认给出当前时间戳。我无法弄清楚我的错误是什么。任何想法将不胜感激。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:15:04.517

您应该使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://us.php.net/manual/en/book.pdo.php)，但如果您需要使用即将贬值的 mysql 插件：

```
<?php
include("dbconnect.php");
$con=new dbconnect();
$con->connect();
error_reporting(E_ALL);

if(isset($_POST['submit'])) {

foreach ($_POST as $key => $value) {
    $$key = mysql_real_escape_string($value); // You should always sanitize user inputs.
}

    $sSql = "INSERT INTO comments
         ( post_id,name, email, website,content)
         VALUES ($postid,'$name', '$email', '$website',  '$content')"; // No quotes around $postid because I'm assuming post_id column is an int type.

    mysql_query($sSql);

    echo '<h2> Your Comment is submitted</h2><br />';
}

?> 
```

请注意，单引号已从 $postid 中删除。这是因为如果表 post_id 是 int 类型，那么您不应该在整数值周围加上引号。

另外，请注意我使用了 mysql_real_escape_string() 函数来清理您的输入。您永远不应该将用户直接输入的变量引用到 SQL 中。这是非常危险的，因为用户可以使用 SQL 注入攻击来访问他们不应该甚至可能删除表的数据库。

尽管如此，我还是建议尽可能转换为 mysqli 或 PDO，因为 mysql 插件即将贬值。

# jquery - 将jQuery组合框的文本恢复为选定选项的文本，以防文本被用户空白？

> ID：11387140
> 
> 赞同：0
> 
> 时间：2012-07-08T22:09:57.997
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我遇到了最新的 jQuery 组合框的问题。用例如下所述。

1.  我在组合框中输入一些内容，这会显示所有匹配选项，然后我选择其中一个匹配选项。这会将组合框文本设置为所选项目的文本。
2.  现在，我将焦点移出组合框，然后回到组合框并删除所有文本，但不选择其他项目。**即使所选值存在，组合框仍显示空白文本。**这对我来说似乎不是很直观，因为空白文本应该意味着没有选择任何选项。

可以在此处找到说明此问题的视频：http: [//screencast.com/t/QLUtZYsL2](http://screencast.com/t/QLUtZYsL2)

**这就是我在上述用例中的目标：** 我想确保万一用户以某种方式删除组合框文本，然后在离开组合框时，文本将恢复为所选项目的文本。

带有 jQ​​uery 组合框的示例 html 页面如下所示。

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>jQuery UI Example Page</title>
<link type="text/css" href="css/cupertino/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<style>
.ui-combobox {
    position: relative;
    display: inline-block;
}
.ui-combobox-toggle {
    position: absolute;
    top: 0;
    bottom: 0;
    margin-left: -1px;
    padding: 0;
    /* adjust styles for IE 6/7 */
    *height: 1.7em;
    *top: 0.1em;
}
.ui-combobox-input {
    margin: 0;
    padding: 0.3em;
}
</style>
<script type="text/javascript">
    (function ($) {
        $.widget("ui.combobox", {
            _create: function () {
                var input,
                self = this,
                select = this.element.hide(),
                selected = select.children(":selected"),
                value = selected.val() ? selected.text() : "",
                wrapper = this.wrapper = $("<span>")
                    .addClass("ui-combobox")
                    .insertAfter(select);

                input = $("<input>")
                .appendTo(wrapper)
                .val(value)
                .addClass("ui-state-default ui-combobox-input")
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    source: function (request, response) {
                        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                        response(select.children("option").map(function () {
                            var text = $(this).text();
                            if (this.value && (!request.term || matcher.test(text)))
                                return {
                                    label: text.replace(
                                        new RegExp(
                                            "(?![^&;]+;)(?!<[^<>]*)(" +
                                            $.ui.autocomplete.escapeRegex(request.term) +
                                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                        ), "<strong>$1</strong>"),
                                    value: text,
                                    option: this
                                };
                        }));
                    },
                    select: function (event, ui) {
                        ui.item.option.selected = true;
                        self._trigger("selected", event, {
                            item: ui.item.option
                        });
                    },
                    change: function (event, ui) {
                        if (!ui.item) {
                            var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                                valid = false;
                            select.children("option").each(function () {
                                if ($(this).text().match(matcher)) {
                                    this.selected = valid = true;
                                    return false;
                                }
                            });
                            if (!valid) {
                                // remove invalid value, as it didn't match anything
                                $(this).val("");
                                select.val("");
                                input.data("autocomplete").term = "";
                                return false;
                            }
                        }
                    }
                })
                .addClass("ui-widget ui-widget-content ui-corner-left");

                input.data("autocomplete")._renderItem = function (ul, item) {
                    return $("<li></li>")
                    .data("item.autocomplete", item)
                    .append("<a>" + item.label + "</a>")
                    .appendTo(ul);
                };

                $("<a>")
                .attr("tabIndex", -1)
                .attr("title", "Show All Items")
                .appendTo(wrapper)
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass("ui-corner-all")
                .addClass("ui-corner-right ui-combobox-toggle")
                .click(function () {
                    // close if already visible
                    if (input.autocomplete("widget").is(":visible")) {
                        input.autocomplete("close");
                        return;
                    }

                    // work around a bug (likely same cause as #5265)
                    $(this).blur();

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete("search", "");
                    input.focus();
                });
            },

            destroy: function () {
                this.wrapper.remove();
                this.element.show();
                $.Widget.prototype.destroy.call(this);
            }
        });
    })(jQuery);

    $(function () {
        $("#combobox").combobox();
        $("#toggle").click(function () {
            $("#combobox").toggle();
        });
    });
</script>
</head>
<body>
<div class="demo">
    <div class="ui-widget">
        <label>
            Your preferred programming language:
        </label>
        <select id="combobox">
            <option value="">Select one...</option>
            <option value="ActionScript">ActionScript</option>
            <option value="AppleScript">AppleScript</option>
            <option value="Asp">Asp</option>
            <option value="BASIC">BASIC</option>
            <option value="C">C</option>
            <option value="C++">C++</option>
            <option value="Clojure">Clojure</option>
            <option value="COBOL">COBOL</option>
            <option value="ColdFusion">ColdFusion</option>
            <option value="Erlang">Erlang</option>
            <option value="Fortran">Fortran</option>
            <option value="Groovy">Groovy</option>
            <option value="Haskell">Haskell</option>
            <option value="Java">Java</option>
            <option value="JavaScript">JavaScript</option>
            <option value="Lisp">Lisp</option>
            <option value="Perl">Perl</option>
            <option value="PHP">PHP</option>
            <option value="Python">Python</option>
            <option value="Ruby">Ruby</option>
            <option value="Scala">Scala</option>
            <option value="Scheme">Scheme</option>
        </select>
    </div>
    <button id="toggle">
        Show underlying select</button>
 </div>
 <!-- End demo -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:21:22.773

您可以利用 change 事件缓存当前选定的文本和值，然后使用 focusout 或 blur 事件来确保离开时文本不会保持空白。如果您可以发布代码示例，我可以对其进行修改以向您展示我在说什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:19:37.010

我终于找到了出路，但让我从一些建设性的批评开始。jQuery 就像火箭科学。哈哈。jQuery 没有直观的事件模型，在这方面 javascript 击败了 jQuery。我花了很多时间试图在 jQuery 组合框上触发 change 或 blur 或 focusout 事件，但没有任何成功。因此，解决我在最初帖子中提到的问题的最佳解决方案是遵循下面给出的两种方法中的任何一种。

1.  将 blur 或 focusout 事件附加到 jQuery 组合框的父级。例如，一个 div 可以是父级，因为它里面有 jQuery 组合框。看看下面的代码。

    ```
     $(document).ready(function () {
        $("#dropdown_sel").combobox();
        $($('.ui-combobox-input')[0]).css('width', '500px');
        $("#toggle").click(function () {
            $("#dropdown_sel").toggle();
        });
        //line below attaches the focusout event
        $('#dropdown_sel').parent().bind('focusout', function () { if ($.trim($('#dropdown_sel option:selected').val()) != '') { $('#dropdown_sel').next().find('input').val($('#dropdown_sel option:selected').text()); } });
    }); 
    ```

2.  或者将 blur 或 focusout 事件附加到 jQuery 组合框的输入元素。看看下面的代码。

    ```
     $(document).ready(function () {
        $("#dropdown_sel").combobox();
        $($('.ui-combobox-input')[0]).css('width', '500px');
        $("#toggle").click(function () {
            $("#dropdown_sel").toggle();
        });
        //line below attaches the focusout event
        $('#dropdown_sel').next().find('input').bind('focusout', function () { if ($.trim($('#dropdown_sel option:selected').val()) != '') { $('#dropdown_sel').next().find('input').val($('#dropdown_sel option:selected').text()); } });
    }); 
    ```

如果您默认选择第一个选项来提示用户，则附加焦点事件的代码将更改为如下所示。在事件的逻辑中添加了一个 else 部分，其中 input 元素的文本设置为第一个选项的文本。

```
 $('#dropdown_sel').next().find('input').bind('focusout', function () { if ($.trim($('#dropdown_sel option:selected').val()) != '') { $('#dropdown_sel').next().find('input').val($('#dropdown_sel option:selected').text()); } else { $('#dropdown_sel').next().find('input').val($('#dropdown_sel option:first').text()); } }); 
```

# sqlalchemy - 我可以为不同的视图创建单独的查询吗？

> ID：11387141
> 
> 赞同：0
> 
> 时间：2012-07-08T22:10:03.633
> 
> 标签：sqlalchemy

我正在学习 sqlalchemy，但不确定我是否完全掌握它（我更习惯于手动编写查询，但我喜欢抽象查询和获取对象的想法）。我正在阅读本教程并尝试将其应用到我的代码中，并在定义模型时遇到了这一部分：

```
def __repr__(self):
    return "<User('%s','%s', '%s')>" % (self.name, self.fullname, self.password) 
```

它很有用，因为我可以只搜索用户名并仅获取有关我想要的用户的信息，但是有没有办法让我可以调用多个此类视图？还是我用错了，应该编写一个特定的查询来为不同的视图获取不同的数据？

为什么我要求我的网站有不同的模板的一些上下文，大多数页面只需要用户名、名字/姓氏，但有些页面需要 twitter 或 Facebook url（也是模型中的字段）之类的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:59:36.910

首先，`__repr__`它不是一个视图，所以如果你有一个`User`带有定义列的简单模型，并且你查询 a `User`，所有的列都将从数据库中加载，而不仅仅是那些在`__repr__`.

让我们以模型`Book`（来自后面提到的示例）为基础：

```
class Book(Base):
    book_id = Column(Integer, primary_key=True)
    title = Column(String(200), nullable=False)
    summary = Column(String(2000))
    excerpt = Column(Text)
    photo = Column(Binary) 
```

跳过加载某些列的第一个选项是使用[Deferred Column Loading](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#deferred-column-loading)：

```
class Book(Base):
    # ...
    excerpt = deferred(Column(Text))
    photo = deferred(Column(Binary)) 
```

在这种情况下，当您执行 query 时`session.query(Book).get(1)`，在从代码访问之前不会加载`photo`和列，此时将执行针对数据库的另一个查询以加载丢失的数据。 但是，如果您在查询之前知道您需要立即使用该列，您仍然可以使用 undefer 选项覆盖延迟行为：`excerpt`
`Book``photo``query = session.query(Book).options(undefer('photo')).get(1)`

基本上，这里的建议是*推迟*所有列（在您的情况下：除了用户名、密码等），并在每个用例（视图）中覆盖[`undefer`](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#sqlalchemy.orm.undefer)您知道该特定视图所需的列。另请参阅 的`group`参数`deferred`，以便您可以按用例（视图）对属性进行分组。

另一种方法是仅查询某些列，但在这种情况下，您获取的是`tuple`实例而不是模型实例（在您的情况下`User`），因此可能可以填写表单，但对于模型验证不太好：`session.query(Book.id, Book.title).all()`

# javascript - 控制 .mov () file with javascript? So my question is how do I start a movie with a call to a javascript / jquery function? Background: I have an object in my html that embeds is a .mov file like so: 问问题 问问题 2012-07-08T22:10:15.603 2183 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. So my question is how do I start a movie with a call to a javascript / jquery function? Background: I have an object in my html that embeds is a .mov file like so: <param name="src" value="movies/test.mov"> <param name="autoplay" value="false"> <param name="loop" value="false"> <param name="controller" value="false">   <param name="autoplay" value="false"> <param name="loop" value="false"> <param name="controller" value="false">    And it seems to be okay, until I want to play the movie with a call to javascript. I am using jQuery so I tried this from within a function: function startMovie(whom){ var playIt = 'movie'+ whom; $('#' + playIt).get(0).play(); } //and call the function startMovie(1); But then I get this error: Uncaught TypeError: Object # <htmlobjectelement>has no method 'play' Weird, but I'm no jQuery ninja so I tried to call it using good ole javascript: function startMovie(1){ var playIt = 'movie'+ whom; document.getElementById(playIt).Play(); } But now I get the following error in my console: Uncaught Error: Error calling method on NPObject. Which is very wierd, since if I put the following into my console the movie will start playing without errors: document.getElementById('movie1').Play() FWIW I am using Chrome on a Mac and the files are running on the local machine (no server). function startMovie(whom){ var playIt = 'movie'+ whom; document.getElementById(playIt).Play(); } startMovie('1'); Try that. javascriptjqueryobjectmovie.mov 4 1 回答 1 This answer is useful 3 function startMovie(whom){ var playIt = 'movie'+ whom; document.getElementById(playIt).Play(); } startMovie('1'); 试试看。 于 2012-07-08T22:14:24.450 回答 Related 2 java - 如何覆盖默认的 Spring JPA 异常翻译器行为？ 1 php - PHP settype 函数总是返回 true 3 php - if else 语句错误 1 c - dup 返回值始终为零 1 android - Android Gridview - 滚动时元素位置随机变化 2 java - 使用 ObjectOutputStream 更新二进制文件 5 linux - 如何在 Unix 中合并同一文本文件中的多行 3 java - Java：是否有一些实用的方法来计算 1 php - 如何使用提交按钮在同一页面上检索选定的下拉值 2 php - 在Query中获取MYSQL查询执行时间 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</htmlobjectelement>

> ID：11387143
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, jquery, object, movie, .mov

So my question is **how do I start a movie with a call to a javascript / jquery function?**

Background:

I have an object in my html that embeds is a .mov file like so:

```
<object CODEBASE="http://www.apple.com/qtactivex/qtplugin.cab" classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" width="100%" height="100%" class="movie1" id="movie1ie">
                <param name="src" value="movies/test.mov">
                <param name="autoplay" value="false">
                <param name="loop" value="false">
                <param name="controller" value="false">
                <!--[if !IE]>-->
                <object type="video/quicktime" data="movies/test.mov" width="100%" height="100%" class="movie1" id="movie1">
                    <param name="autoplay" value="false">
                    <param name="loop" value="false">
                    <param name="controller" value="false">
                </object>
                <!--<![endif]-->
            </object> 
```

And it seems to be okay, until I want to play the movie with a call to javascript. I am using jQuery so I tried this from within a function:

```
function startMovie(whom){
    var playIt = 'movie'+ whom;
    $('#' + playIt).get(0).play();
}
//and call the function
startMovie(1); 
```

But then I get this error:

```
Uncaught TypeError: Object #<HTMLObjectElement> has no method 'play' 
```

Weird, but I'm no jQuery ninja so I tried to call it using good ole javascript:

```
function startMovie(1){
    var playIt = 'movie'+ whom;
    document.getElementById(playIt).Play();
} 
```

But now I get the following error in my console:

```
Uncaught Error: Error calling method on NPObject. 
```

Which is very wierd, since if I put the following into my console the movie will start playing without errors:

```
document.getElementById('movie1').Play() 
```

FWIW I am using Chrome on a Mac and the files are running on the local machine (no server).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T22:14:24.450

```
function startMovie(whom){
    var playIt = 'movie'+ whom;
    document.getElementById(playIt).Play();
}
startMovie('1'); 
```

试试看。

# android - 警报对话框没有出现

> ID：11387144
> 
> 赞同：0
> 
> 时间：2012-07-08T22:10:24.473
> 
> 标签：android, dialog, alert, android-alertdialog

**混乱**

在我的模拟器上一切正常，对话框出现并完美运行。但是，在运行 3.0 android 的 galxy 选项卡上，当我打开与此平板电脑上的模拟器相同的应用程序时，什么也没有发生……这是怎么回事？

**错误**

C：错误：java.net.ConnectException：/192.168.0.182:1027 - 连接被拒绝

当我在平板电脑上运行我的应用程序时会出现一次此错误，但当我在模拟器上运行它时不会出现此错误。

**应用程序信息**

在我的应用程序上发生了什么，有一个由完全不同的东西托管的服务器（用于 CNC 机器）但是一次只能将一个平板电脑连接到机器，我需要它，所以如果我连接并且有人已经连接到该机器机器会出现一个选项，询问您是否要断开连接的其他人。这一切都在模拟器上正常工作，但在平板电脑上，一旦我点击连接（有人已经连接或未连接）并且如果有人连接，则不会出现警报对话框询问我是否要断开它们。但它使用完全相同的代码在模拟器上工作。

**代码**

```
public void disconnectOtherUser()
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(new ContextThemeWrapper(this, R.style.titleTextStyle));
        builder.setMessage("Do you want to disconnect the other user?")
               .setCancelable(false)
               .setPositiveButton("Yes", new DialogInterface.OnClickListener() 
               {
                   public void onClick(DialogInterface dialog, int id) 
                   {
                       Talk1028("X");
                       ConnectionTV.setText("Other user disconnected");
                       dialog.cancel();

                   }
               })
               .setNegativeButton("No", new DialogInterface.OnClickListener() 
               {
                   public void onClick(DialogInterface dialog, int id) 
                   {
                        dialog.cancel();
                   }
               });
        AlertDialog alert = builder.create();
        alert.show();

    } 
```

我在代码中的不同位置调用此方法以使对话框出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:17:35.563

我解决了我的问题。我所要做的就是给程序添加一个延迟，因为它正在比赛。但是我在模拟器上没有这个问题，因为模拟器以慢得多的帧速率运行。

# html - 将鼠标悬停在按钮上时更改字体颜色和背景图像

> ID：11387146
> 
> 赞同：0
> 
> 时间：2012-07-08T22:11:33.287
> 
> 标签：html, css

对于我的导航栏，我有几个按钮。将鼠标悬停在按钮上时，我希望更改背景图像并且希望更改字体颜色。背景图像变化很好，但我无法改变字体颜色。我将两者都包括在内，`.but1`并`.but2`了解每个按钮的外观，但到目前为止，我只`.but1`为悬停文本进行了编辑。

任何帮助，将不胜感激。谢谢！

**CSS：**

```
#buttons {
width:665px;
background:url(images/bg_but.jpg) left top no-repeat;
text-align:center;
height:46px;
margin-left:450px;
}

#buttons a {
font-family:OVerlock, cursive;
font-size:20px;
display:block;
float:left;
height:34px;
text-decoration:none;
color:#303030;
padding-top:12px;
padding-left:0;
text-align:center;
}

.but1 {
background:url(images/but1-4.png) left top no-repeat;
width:134px;
}

.but1:hover {
color:#FFF;
background:url(images/but11.png) left top no-repeat;
}

.but2 {
background:url(images/but2.png) left top no-repeat;
width:132px;
}

.but2:hover {
background:url(images/but22.png) left top no-repeat;
} 
```

**HTML**

```
<div id="buttons">
    <a href="#" class="but1"  title="">Home</a>
    <a href="#" class="but2" title="">Projects</a>
    <a href="#"  class="but3" title="">Paintings</a>
    <a href="#"  class="but4" title="">About</a>
    <a href="#" class="but5" title="">Contact</a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T22:15:38.687

选择器`#buttons a`比 更具体`.but1:hover`，因此它将优先。

将其更改为`#buttons .but1:hover`，它将更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:20:36.837

只需将您的重要信息添加到`.but1:hover`下面的代码中

```
.but1:hover {
color:#FFF !important;
background:url(images/but11.png) left top no-repeat;
} 
```

# php - 注意：尝试在第 46 行的 .../search.php 中获取非对象的属性

> ID：11387147
> 
> 赞同：0
> 
> 时间：2012-07-08T22:11:43.073
> 
> 标签：php, json

谁能帮我解决这个错误？一直在看它，但一直无法让它工作。前一阵子写了这个，上次离开时​​感觉它可以工作，但是当我重新访问它时，我一直无法运行它。感谢所有的帮助。

注意：尝试在第 46 行的 /Applications/MAMP/htdocs/search/views/layouts/search.php 中获取非对象的属性

警告：在第 46 行的 /Applications/MAMP/htdocs/search/views/layouts/search.php 中为 foreach() 提供的参数无效

第 46 行是 foreach 代码最后一行的第 4 行。

```
<?php

include($_SERVER['DOCUMENT_ROOT'].'/'.'search/scripts/JSON.php');
include($_SERVER['DOCUMENT_ROOT'].'/'.'search/scripts/search_fns.php');

$searchquery = urlencode(isset($_GET['search']) ? $_GET['search'] : "news");

// Google Search API

$url = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&"
. "q="
. $searchquery
."&key=ABQIAAAAYIeqEnf9yNjBzcHJK7yDdhSklBzi76D_F0lniPI7JR27aK7eCBSU-xpNs1axVS45y_PX_7_ibsScUA&userip=USERS-IP-ADDRESS&rsz=filtered_cse";

// sendRequest
// note how referer is set manually
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, "http://localhost");
$body = curl_exec($ch);
curl_close($ch);

// process the JSON string
$json = new Services_JSON;
$json = $json->decode($body);

$formattedresults = "";
$rating = "";

$search = $searchquery;

?>
<style type="text/css">
td img {display: block;}
</style>
<div id="main">

<?php
foreach($json->responseData->results as $searchresult)
{
if($searchresult->GsearchResultClass == 'GwebSearch')
{ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:51:34.693

可能它返回了一个空响应。在使用 foreach 之前，使用`is_object($json->responseData)`. 我还会检查属性“结果”是否存在`property_exists($json, 'results')`

# scala - 避免生成默认的 setter getter

> ID：11387153
> 
> 赞同：7
> 
> 时间：2012-07-08T22:12:53.850
> 
> 标签：scala

我将自己的 getter 和 setter 添加到变量中：

```
class Person{
    private var age = 0
    def currentAge = age
    def currentAge_=(age: Int) = this.age = age 
} 
```

查看编译版本给出：

```
public class Person implements scala.ScalaObject {
    private int age;
    private int age();
    private void age_$eq(int);
    public int currentAge();
    public void currentAge_$eq(int);
    public Person();
} 
```

我想避免自动生成默认的 getter 和 setter。可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-08T22:16:05.410

```
private[this] var age = 0 
```

所以`age`这只对实例可见。

# c++ - 设置类忽略定义的comp fn和默认比较错误

> ID：11387155
> 
> 赞同：0
> 
> 时间：2012-07-08T22:13:06.427
> 
> 标签：c++, visual-studio-2008, set

我正在使用与 STL Set 类基本相同的自定义 Set 类

问题是我以某种方式错误地实现了它，并且使用了默认比较函数而不是我定义的比较。

```
Set<Lexicon::CorrectionT> Lexicon::suggestCorrections(Lexicon::MatchesT & matchSet)
{
    Set<CorrectionT> suggest(compareCorr); //ordered Set
    suggestCorrectionsHelper(root, suggest, 0, matchSet.testWord, 0, matchSet.testTime);
    return suggest;
}

int compareCorr(Lexicon::CorrectionT a, Lexicon::CorrectionT b)
{
    if (a.editDistance < b.editDistance)
        return -1;
    else if (a.editDistance == b.editDistance)
            return 0;
    else
        return 1;
}

struct CorrectionT {
    int editDistance; //stackItems
    string suggestedWord; //stackItems
}; 
```

一些研究：

*   [类库](http://www.stanford.edu/class/cs106x/cs106lib/class_set.html)
*   [同一个类](https://stackoverflow.com/questions/5843594/problem-with-calling-libraries)的问题- 建议使用 STL Set 类，在这种情况下，我可能仍需要帮助了解如何定义比较函数，所以发布问题

我有 19 个 C2784 错误，所有这些错误都与某种形式的“错误 C2784：'bool std::operator ==(const std::_Tree<_Traits> &,const std::_Tree<_Traits> &)'：无法推断模板来自 'Lexicon::CorrectionT' 的 'const std::_Tree<_Traits> &' 的参数

并引用此代码

```
template <typename Type>
int OperatorCmp(Type one, Type two) {
    if (one == two) return 0;
    if (one < two) return -1;
    return 1;
} 
```

我的问题：你建议如何纠正这个问题？

尝试更改默认定义类型：

```
#include "lexicon.h"

//template <typename Type>
int OperatorCmp(Lexicon::CorrectionT one, Lexicon::CorrectionT two) {
    if (one.editDistance == two.editDistance) return 0;
    if (one.editDistance < two.editDistance) return -1;
    return 1;
}

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:09:02.607

STL 的比较函数`set`必须是[Strict Weak Ordering](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)，因此该类**与**STL 不同`set`。

该错误表明`OperatorCmp`正在使用默认值，我不知道为什么，但是您可以通过为您的类型定义`operator<`和来使该默认值起作用。`operator==``CorrectionT`

# python - 来自字典python的有效dstack数组

> ID：11387158
> 
> 赞同：1
> 
> 时间：2012-07-08T22:13:29.210
> 
> 标签：python, numpy, dictionary

我有一个按日期键入的字典，并填充了具有 numpy.array 属性的类。我想使用 np.dstack 从字典中的所有数组中创建一个大数组。我当前的代码是这样的：

```
import numpy as np
#PARTS is my dictionary
#the .partposit is the attribute that is an array of shape (50000, 12)
ks = sorted(PARTS.keys())
p1 = PARTS[ks[0]].partposit
for k in ks[1:]:
    p1 = np.dstack((p1, PARTS[k].partposit)) 
```

我的结果如我所料：

```
In [67]: p1.shape
Out[67]: (50000, 12, 163) 
```

但是，它很慢。有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T22:37:10.033

你可以试试这个：

```
>>> import numpy as np
>>> class A:
...     def __init__(self, values):
...         self.partposit = values
... 
>>> PARTS = dict((index, A(np.zeros((50000, 12)))) for index in xrange(163))
>>> p1 = np.dstack((PARTS[k].partposit for k in sorted(PARTS.keys())))
>>> p1.shape
(50000, 12, 163)
>>> 
```

花了几秒钟把它堆在我的机器上。

```
>>> import timeit
>>> timeit.Timer('p1 = np.dstack((PARTS[k].partposit for k in sorted(PARTS.keys())))', "from __main__ import np, PARTS").timeit(number = 1)
2.1245520114898682 
```

`numpy.dstack`接收一系列数组并将它们堆叠在一起，因此如果我们只给它列表而不是自己连续堆叠它们会更快。

> numpy.dstack(tup)
> 
> 按顺序深度（沿第三轴）堆叠数组。获取一系列数组并将它们沿第三轴堆叠以形成单个数组。

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.dstack.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dstack.html)

我也很好奇你的方法会持续多久：

```
>>> import timeit
>>> setup = """
... import numpy as np
... #PARTS is my dictionary
... #the .partposit is the attribute that is an array of shape (50000, 12)
... 
... class A:
...     def __init__(self, values):
...         self.partposit = values
... 
... PARTS = dict((index, A(np.zeros((50000, 12)))) for index in xrange(163))
... ks = sorted(PARTS.keys())
... """
>>> stack = """
... p1 = PARTS[ks[0]].partposit
... for k in ks[1:]:
...     p1 = np.dstack((p1, PARTS[k].partposit))
... """
>>> timeit.Timer(stack, setup).timeit(number = 1)
67.69684886932373 
```

哎哟！

```
>>> numpy.__version__
'1.6.1'

$ python --version
Python 2.6.1 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:41:03.327

此行创建一个新列表（浅拷贝），这是不必要的开销：

```
for k in ks[1:]: 
```

一种更有效的方法是：

```
itks =iter(ks)
next(itks)
for k in itks: 
```

此外，您可以通过以下方式消除重复查找：

```
entries = iter(sorted(((k, v.partposit) for k,v in PARTS.iteritems()), key=lambda(k,v):k))
p1 = next(entries)[1]
for k,v in entries: 
    p1 = np.dstack((p1, v)) 
```

这将使事情变得稍微快一些，因为它消除了 dict 中的复制和重复查找（虽然是恒定的时间，但不是免费的）。

# ruby-on-rails-3 - 设计可再确认

> ID：11387172
> 
> 赞同：23
> 
> 时间：2012-07-08T22:15:32.437
> 
> 标签：ruby-on-rails-3, devise, devise-confirmable

我想在我的用户模型中使用设计选项 :reconfirmable，所以每当用户更改他的电子邮件时，他需要通过电子邮件发送的链接来确认它。

最大的问题是，电子邮件永远不会发送......

我的设置是与设计 2.1.2 是：

用户模型：

```
attr_accessible: unconfirmed_email, ...

devise :invitable, :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable, :confirmable, :omniauthable 
```

在初始化器 devise.rb 中：

```
config.reconfirmable = true 
```

在路线中：

```
devise_for :users 
```

在表单中，模型字段 unconfirmed_email 被正确设置。我通过控制台检查了这一点。

当用户在页面上注册时，第一封确认电子邮件会毫无问题地发送出去。

我尝试通过将此代码添加到初始化程序目录以覆盖作为 after_update 钩子触发的设计方法来调试问题：

```
module Devise::Models::Confirmable
  def send_confirmation_instructions
    debugger
  end
end 
```

似乎从未调用过 send_confirmation_instructions，因为我从未使用过调试器。

我是否需要以某种方式调用 reconfirmable，或者在将模型属性“unconfirmed_email”设置为新的电子邮件地址时是否会自动触发？

感谢您的帮助，j。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-11T14:08:34.097

好吧，这很尴尬。。

在深入研究设计代码后，我发现您不需要设置`unconfirmed_email`用户模型的属性，只需更改现有的电子邮件属性即可。该属性`unconfirmed_email`仅用于 Devise 内部用于存储电子邮件地址，直到确认为止。

更高版本的 devise gem 在初始迁移中解释了这一点。这是`XXX_devise_create_users.rb`迁移中的“可确认”部分（注意最后一行的注释）：

```
 ## Confirmable
  t.string   :confirmation_token
  t.datetime :confirmed_at
  t.datetime :confirmation_sent_at
  t.string   :unconfirmed_email # Only if using reconfirmable 
```

抱歉打扰了，但希望这可以帮助遇到同样问题的人......

# fonts - Firefox 类型渲染比其他 OS X 浏览器更大胆 - 有解决方案吗？

> ID：11387178
> 
> 赞同：3
> 
> 时间：2012-07-08T22:16:57.637
> 
> 标签：fonts, cross-browser, text-rendering, typekit

是否有任何非 hacky 的 html/css/jquery 技巧来为 Firefox 用户实现更好的字体渲染？下面的屏幕截图（Safari 5/Chrome 20/Firefox 13）显示 Firefox 正在渲染用户代理字体以及 typekit 提供的字体更加粗体。

用户代理字体（Helvetica） ![用户代理字体（Helvetica）](../Images/ac9a7d12a59237237494f9900de5b386.png)

```
font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, sans-serif;
letter-spacing: 0.025em;
color: #333; 
```

Typekit 提供的字体 (Meta) ![Typekit 提供的字体 (Meta)](../Images/264bc7b4b2fbcfbdd7638767677f3f21.png)

```
font-family: "ff-meta-web-pro", Helvetica, Arial, sans-serif;
letter-spacing: 0.025em;
color: #333; 
```

在这两种情况下，这些字体大小都用于 h1、h2 和 p：

```
font-size: 1.4em;

font-size: 1.1em;

font-size: 0.75em; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:44:12.173

在执行 CSS 之前使用 CSS 重置：

*   [http://developer.yahoo.com/yui/reset/](http://developer.yahoo.com/yui/reset/)
*   [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:14:05.993

您没有指定您使用的是哪个操作系统，但看起来 Firefox 使用的是 ClearType 而不是标准的灰度抗锯齿。

# java - Java ImageIO.read() 在浏览器中失败

> ID：11387180
> 
> 赞同：0
> 
> 时间：2012-07-08T22:17:35.150
> 
> 标签：java, javax.imageio

我用 Java 制作了一个游戏，它自然会在其中使用多个图像。我使用Eclipse开发游戏，在Eclipse中运行没有问题。至此，游戏已经基本完成，所以我正在尝试将它放到互联网上，但我无法让这款游戏在浏览器中运行。

在浏览器中加载它只是显示一个白屏，没有错误，只是白色。我知道 Java 是最新的，我已经运行了其他 Java 应用程序来测试它，它们都没有任何问题。有一段时间我无法查看控制台，因为单击空白应用程序什么也没做，但最终我注意到转到任务栏中的通知允许我看到控制台。在那里它将错误列为

```
javax.imageio.IIOException: Can't read input file! 
```

并指向我在代码中加载的第一张图片。我有大约 2 打图像，但它转到第一个，在将其注释掉后，错误重定向到第二个，所以我认为这与每个图像都存在相同的问题。这些图像在 Eclipse 中加载良好，所以我知道文件路径是正确的，不知何故它不会显示在浏览器中。

加载第一个图像的 Java 代码：

```
image = ImageIO.read(new File("images/debug/player.jpg"));
Constants.imgPlayer = new Picture(getImage(getDocumentBase(), "images/debug/player.jpg"), image.getWidth(), image.getHeight()); 
```

当程序加载并将图像保存到我创建的这个图片类中时，它正在运行。Picture 类所做的只是保存 Image 对象以及宽度和高度，以备以后需要实际使用图像时使用。我必须使用的唯一原因`ImageIO.read()`是我可以获得每个图像的宽度和高度。

为了调试，我将一些代码更改为：

```
File testFile = new File("images/debug/player.jpg");
System.out.println("exists() = " + testFile.exists());
System.out.println("canRead() = " + testFile.canRead());

testFile.setReadable(true);
System.out.println("setReadable(true)");

System.out.println("canRead() = " + testFile.canRead());
image = ImageIO.read(testFile);
Constants.imgPlayer = new Picture(getImage(getDocumentBase(), "images/debug/player.jpg"), image.getWidth(), image.getHeight()); 
```

在 Eclipse 中，一切都是真实的，它存在，可以阅读，然后被阅读并工作。在浏览器（顺便说一下Chrome）中，一切都是假的，它不存在，无法读取，然后在尝试读取时抛出错误。

HTML 文件位于 [project]/bin/FinalProject.htm，但主类位于 [project]/bin/main/FinalProject.class。我想知道是否因为它们位于不同的文件夹中，文件路径需要不同。我尝试将 HTML 文件与类放在同一目录中，但它会说它找不到类，尽管我确定我更改了文件路径以匹配。

我现在不确定该怎么做，谷歌搜索并没有真正帮助。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:30:18.497

您正在尝试从本地文件系统读取文件。在浏览器沙箱中运行的 Java 不允许这样做。毕竟，您不希望其他人的游戏能够读取您的家庭银行记录或类似记录。

请改用图像资源。

```
image = getImage(getDocumentBase(),"player.jpg"); 
```

请参阅Java 文档中的[getImage](http://docs.oracle.com/javase/1.4.2/docs/api/java/applet/Applet.html#getImage%28java.net.URL,%20java.lang.String%29)。

# c# - C# 函数中的一对括号的名称是什么，它只存在于一个额外的范围级别？

> ID：11387181
> 
> 赞同：2
> 
> 时间：2012-07-08T22:17:50.160
> 
> 标签：c#, .net

以下面的 C# 函数为例：

```
 static void Main(string[] args)
    {
        var r = new Random();
        {
            var i = r.Next(); ;
            Console.WriteLine("i = {0}", i);
        }

        var action = new Action(delegate()
            {
                var i = r.Next();
                Console.WriteLine("Delegate: i = {0}", i);
            });
        action();
    } 
```

以下块仅作为 C# 语法糖存在，以在源代码中实施额外的变量范围层，[如本 SO Question 中所述](https://stackoverflow.com/questions/500006/what-is-the-purpose-of-anonymous-blocks-in-c-style-languages)。

```
 {
            var i = r.Next(); ;
            Console.WriteLine("i = {0}", i);
        } 
```

我通过使用 ILSpy 反编译生成的程序集并得到以下结果证明了这一点：

```
 private static void Main(string[] args)
    {
        Random r = new Random();
        int i = r.Next();
        Console.WriteLine("i = {0}", i);
        Action action = delegate
        {
            int j = r.Next();
            Console.WriteLine("Delegate: i = {0}", j);
        }
        ;
        action();
    } 
```

那么这个 C# 构造有名称吗？如果是这样，那是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T22:20:57.767

它被称为[语句块](http://msdn.microsoft.com/en-us/library/ms173143.aspx)。

实际上，在例如 an 之后`if (...)`的语句块和独立的语句块之间没有区别。语句块可以在可以使用语句的任何地方使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T22:20:46.803

我不知道在该特定上下文中使用的 { } 的特定名称，但他们引入的事物的名称称为*[嵌套范围](http://msdn.microsoft.com/en-us/library/aa691132%28v=vs.71%29.aspx)*。[（还可以参考goto 文档中](http://msdn.microsoft.com/en-us/library/aa664758%28v=vs.71%29.aspx)*嵌套范围*的用法）。

# asp.net - 使用 jquery mobile & asp.net & ajax 保留带有后退按钮的选定选项

> ID：11387184
> 
> 赞同：2
> 
> 时间：2012-07-08T22:18:02.773
> 
> 标签：asp.net, ajax, jquery-mobile

我认为这将是一个微不足道的功能，但我已经失去了相当多的头发试图弄清楚它。我有一个带有选择菜单的 jquery 移动网页。用户单击下拉列表中的项目，然后单击链接并导航到另一个页面。用户然后单击返回按钮。期望的结果是所选项目保持选中状态。现在，选择丢失了，它再次默认为列表中的第一个元素。

我尝试过的事情：1）使用带有自动回发的asp.net下拉列表。这保留了选定的选项，但随后我得到一个页面闪烁，因为整个页面都被回发了。

2) 在更新面板中包装 asp.net 下拉列表。这会保留，不会闪烁，但会消除 jquery 移动样式。还尝试了一些建议的解决方法来触发 jquery create 事件，但没有任何工作。

3）在javascript中的select change事件上写入cookie，在asp page_load事件中读取。但是，单击后退按钮时不会调用 page_load，因此这没有效果。

4) 尝试创建对网页方法的 jquery ajax 请求，但该方法必须是静态的，因此我无法使用它来修改页面。

还有其他想法吗？是我一个人还是这确实是一个已经解决了一百万次的问题？

作为一个仅供参考，我是网络编程的新手，所以如果你有答案，请拼出来:)（来自 c++/数据库背景）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:41:36.477

事实证明，在某些情况下，即使日期滚动条也无法使用后退按钮。例如，如果用户导航到另一个站点，然后使用后退按钮返回到我的 jquery 移动站点，我所有的 javascript dom 操作都将丢失。解决方案并非易事。我使用 html 5 本地存储来存储维护页面状态所需的所有内容。在 jqm 显示页面事件中，我检测是否所有全局变量都已被清除，如果是，则从本地存储重新加载状态。工作完美，但这是一项相当大的实施任务。当然，如果底层浏览器不支持本地存储，这一切都会崩溃。

# hibernate - Postgresql 与 Struts 2/Hibernate/Maven 和 Spring 的连接

> ID：11387185
> 
> 赞同：2
> 
> 时间：2012-07-08T22:18:56.363
> 
> 标签：hibernate, postgresql, maven, struts2

我按照教程使用 Struts 2、Maven、Hibernate 和 Spring 以及 Mysql 数据库创建了一个项目：[http ://www.mkyong.com/struts2/struts-2-spring-hibernate-integration-example/](http://www.mkyong.com/struts2/struts-2-spring-hibernate-integration-example/)

它正在工作，我现在想使用 Postgresql 数据库。为此，我编辑了一些配置文件以通过 postgresql 删除 mysql 配置：

*   在 pom.xml 中：

> ```
> <dependency>
> <groupId>postgresql</groupId>
> <artifactId>postgresql</artifactId>
> <version>9.1-901.jdbc4</version>
> </dependency> 
> ```

*   在 database.properties 中：

> ```
> jdbc.driverClassName=com.postgresql.jdbc.Driver
> jdbc.url=jdbc:postgresql://localhost:5432/my_base
> jdbc.username=...
> jdbc.password=... 
> ```

*   在 HibernateSessionFactory.xml 中：

> `<prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>`

这是 Eclipse 中的错误：

> GRAVE: Exception lors de l'envoi de l'évènement contexte initialisé (context initialized) à l'instance de classe d'écoute (listener) org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.BeanCreationException: Error创建 ServletContext 资源 [/WEB-INF/classes/config/spring/DataSource.xml] 中定义的名称为“dataSource”的 bean：设置属性值时出错；嵌套异常是 org.springframework.beans.PropertyBatchUpdateException；嵌套的PropertyAccessExceptions(1)是：PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' 抛出异常；嵌套异常是 java.lang.IllegalStateException：无法在 org.springframework.beans.factory 加载 JDBC 驱动程序类 [com.postgresql.jdbc.Driver]。StandardService.start(StandardService.java:525) at org.apache.catalina.core.StandardServer.start(StandardServer.java:754) at org.apache.catalina.startup.Catalina.start(Catalina.java:595) at sun .reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke (Method.java:597) at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289) at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) springframework.beans.PropertyBatchUpdateException；嵌套的PropertyAccessExceptions(1)是：PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property' driverClassName' 抛出异常；嵌套异常是 java.lang.IllegalStateException: 无法在 org.springframework.beans.AbstractPropertyAccessor 的 org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:104) 加载 JDBC 驱动程序类 [com.postgresql.jdbc.Driver]。 setPropertyValues(AbstractPropertyAccessor.java:59) 在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1276)

问题出在哪里 ？

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T22:41:57.380

```
Could not load JDBC driver class [com.postgresql.jdbc.Driver] at 
```

我相信正确的班级名称是`org.postgresql.Driver`

# macos - 铿锵声增强怪事

> ID：11387188
> 
> 赞同：2
> 
> 时间：2012-07-08T22:19:20.317
> 
> 标签：macos, boost, clang, macports

我正在做一个宠物项目，并且正在使用 clang++（特别是 MacPorts clang 3.1）。所以我决定切换到 libc++（使用 std::array 等），但我使用的是 boost（特别是 asio 和 regex），所以我不得不使用 libc++ 重新编译 boost。我删除了安装在 macports 中的 boost 并从源代码构建 boost，现在安装在 /usr/local/include 和 /usr/local/lib 中。从那以后，我无法编译。以下是我遇到的奇怪现象：

执行时：

```
clang++ -g  -std=c++11 -stdlib=libc++ -c main.cpp 
```

我得到一个与移动构造函数有关的奇怪编译错误（这个错误还有更多，但你可以看到它来自 boost）：

```
/usr/include/c++/v1/string:1952:10: error: overload resolution selected implicitly-deleted copy assignment operator
__r_ = _STD::move(__str.__r_);
     ^
/usr/include/c++/v1/string:1942:9: note: in instantiation of member function 'std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__move_assign' requested here
    __move_assign(__str, true_type());
    ^
/usr/include/c++/v1/string:1961:5: note: in instantiation of member function 'std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__move_assign' requested here
__move_assign(__str, integral_constant<bool,
^
/usr/local/include/boost/regex/v4/perl_matcher.hpp:207:16: note: in instantiation of member function 'std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::operator=' requested here
        s1 = traits_inst.transform(a, a + 1); 
```

但是，当我执行时（请注意“-I”，它必须在那个确切的位置）：

```
clang++ -I -std=c++11 -stdlib=libc++ -g -c main.cpp 
```

这会编译（但稍后链接会失败）。为什么是这样？-I do without a path 是什么意思？-stdlib= 必须以 -I 开头吗？

现在有趣的部分：

即使现在一切都编译了，但它不会链接。执行时：

```
clang++ main.o FTPClient.o FTPConnection.o -lboost_system -lboost_regex -std=c++11 -stdlib=libc++  -g  -o cli 
```

我收到消息：

```
Undefined symbols for architecture x86_64:
"__ZNSt3__112basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initIPKcEENS_9enable_ifIXsr21__is_forward_iteratorIT_EE5valueEvE4typeESA_SA_", referenced from:
  boost::re_detail::cpp_regex_traits_implementation<char>::lookup_collatename(char const*, char const*) const in libboost_regex.a(instances.o)
  boost::re_detail::cpp_regex_traits_implementation<char>::lookup_classname_imp(char const*, char const*) const in libboost_regex.a(instances.o)
  boost::re_detail::basic_regex_parser<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::fail(boost::regex_constants::error_type, long, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, long) in libboost_regex.a(instances.o)
  boost::re_detail::cpp_regex_traits_implementation<char>::lookup_classname(char const*, char const*) const in libboost_regex.a(instances.o)
  ld: symbol(s) not found for architecture x86_64 
```

现在我在想也许我缺少一些 -lboost 标志，但我不确定它是什么。这可能是什么原因？

非常感谢！

编辑：查看安装boost的日志时，我注意到了这一点：

```
..failed clang-darwin.link.dll /usr/local/lib/libboost_filesystem.dylib...
clang-darwin.link.dll /usr/local/lib/libboost_regex.dylib
Undefined symbols for architecture x86_64:
  "__ZNSt3__112basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initIPKcEENS_9enable_ifIXsr21__is_forward_iteratorIT_EE5valueEvE4typeESA_SA_", referenced from:
  boost::c_regex_traits<char>::transform(char const*, char const*) in c_regex_traits.o
  boost::c_regex_traits<char>::lookup_classname(char const*, char const*) in c_regex_traits.o
  boost::c_regex_traits<char>::lookup_collatename(char const*, char const*) in c_regex_traits.o
  boost::re_detail::RegExData::update() in cregex.o
  boost::RegEx::What(int) const in cregex.o
  boost::re_detail::pred2::operator()(boost::match_results<char const*, std::__1::allocator<boost::sub_match<char const*> > > const&) in cregex.o
  boost::re_detail::cpp_regex_traits_implementation<char>::lookup_collatename(char const*, char const*) const in instances.o
  ...
  "__ZNSt3__112basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6__initIPKwEENS_9enable_ifIXsr21__is_forward_iteratorIT_EE5valueEvE4typeESA_SA_", referenced from:
  boost::c_regex_traits<wchar_t>::transform(wchar_t const*, wchar_t const*) in wc_regex_traits.o

  boost::c_regex_traits<wchar_t>::lookup_classname(wchar_t const*, wchar_t const*) in wc_regex_traits.o
  boost::re_detail::cpp_regex_traits_implementation<wchar_t>::lookup_collatename(wchar_t const*, wchar_t const*) const in winstances.o
  boost::re_detail::cpp_regex_traits_implementation<wchar_t>::lookup_classname_imp(wchar_t const*, wchar_t const*) const in winstances.o
  boost::re_detail::cpp_regex_traits_implementation<wchar_t>::lookup_classname(wchar_t const*, wchar_t const*) const in winstances.o
ld: symbol(s) not found for architecture x86_64  
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是否意味着 boost regex 可能与 -libc++ 不兼容？

编辑 2：我尝试使用 std::regex，但我得到了这个：

```
Undefined symbols for architecture x86_64:
   "__ZNSt3__112basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initIPKcEENS_9enable_ifIXsr21__is_forward_iteratorIT_EE5valueEvE4typeESA_SA_", referenced from:
  std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > std::__1::regex_traits<char>::__lookup_collatename<char const*>(char const*, char const*, char) const in main.o
  unsigned int std::__1::regex_traits<char>::__lookup_classname<char const*>(char const*, char const*, bool, char) const in main.o
 ld: symbol(s) not found for architecture x86_64 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:36:22.780

一个有用但不令人满意的答案：libc++ 包含 std::regex，您可以使用它来代替 boost::regex。

# android - 如何将显示在 PagerView 中的图像添加到背景？

> ID：11387190
> 
> 赞同：0
> 
> 时间：2012-07-08T22:19:41.840
> 
> 标签：android, image, background, wallpaper

***有必要下载图像（在 SD 卡上）然后使用它吗？如果没有，该怎么做？*** 我在 PagerView 中有图像存储和图像显示（图像从互联网加载）。我需要从 PagerView 中选择一张图片并将其放在背景（壁纸）上。我无法在 ImagePagerActivity 中添加按钮以将图像添加到背景。错误：E/AndroidRuntime(14608)：java.lang.RuntimeException：无法启动活动 ComponentInfo{down.load.ascetix/down.load.ascetix.ImagePagerActivity}：java.lang.ClassCastException：down.load.ascetix.ImagePagerActivity。

* * *

ImagePager活动：

* * *

```
public class ImagePagerActivity  extends BaseActivity  {
    private ViewPager pager;
    private DisplayImageOptions options;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ac_image_pager);

        Bundle bundle = getIntent().getExtras();
        String[] imageUrls = bundle.getStringArray(Extra.IMAGES);
        int pagerPosition = bundle.getInt(Extra.IMAGE_POSITION, 0);
        options = new DisplayImageOptions.Builder()
            .showImageForEmptyUri(R.drawable.image_for_empty_url)
            .cacheOnDisc()
            .imageScaleType(ImageScaleType.EXACT)
            .build();
        pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(new ImagePagerAdapter(imageUrls));
        pager.setCurrentItem(pagerPosition);

            }
    @Override
    protected void onStop() {
        imageLoader.stop();
        super.onStop();
    }
    private class ImagePagerAdapter extends PagerAdapter {
        private String[] images;
        private LayoutInflater inflater;

        ImagePagerAdapter(String[] images) {
            this.images = images;
            inflater = getLayoutInflater();
        }

        public void destroyItem(View container, int position, Object object) {
            ((ViewPager) container).removeView((View) object);
        }

        public void finishUpdate(View container) {
        }

        public int getCount() {
            return images.length;
        }

        public Object instantiateItem(View view, int position) {
            final FrameLayout imageLayout = (FrameLayout) inflater.inflate(R.layout.item_pager_image, null);
            final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
            final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);
            imageLoader.displayImage(images[position], imageView, options, new ImageLoadingListener() {

                public void onLoadingStarted() {
                    spinner.setVisibility(View.VISIBLE);
                }

                public void onLoadingFailed(FailReason failReason) {
                    String message = null;
                    switch (failReason) {
                        case IO_ERROR:
                            message = "Input/Output error";
                            break;
                        case OUT_OF_MEMORY:
                            message = "Out Of Memory error";
                            break;
                        case UNKNOWN:
                            message = "Unknown error";
                            break;
                    }
                    Toast.makeText(ImagePagerActivity.this, message, Toast.LENGTH_SHORT).show();
                    spinner.setVisibility(View.GONE);
                    imageView.setImageResource(android.R.drawable.ic_delete);
                }

                public void onLoadingComplete() {
                    spinner.setVisibility(View.GONE);
                    Animation anim = AnimationUtils.loadAnimation(ImagePagerActivity.this, R.anim.fade_in);
                    imageView.setAnimation(anim);
                    anim.start();
                }

                public void onLoadingCancelled() {
                    // Do nothing
                }
            });
            ((ViewPager) view).addView(imageLayout, 0);
            return imageLayout;
        }

        public boolean isViewFromObject(View view, Object object) {
            return view.equals(object);
        }

        public void restoreState(Parcelable state, ClassLoader loader) {
        }

        public Parcelable saveState() {
            return null;
        }

        public void startUpdate(View container) {
        }
    }
} 
```

* * *

我的 .xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:padding="1dip">

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:adjustViewBounds="true" />

    <ProgressBar
        android:id="@+id/loading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:visibility="gone" />

</FrameLayout> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:30:41.490

您可以通过这种方式设置背景图像。这可能更容易。编码：

```
((ImageView)findViewById(R.id.background)).setBackgroundResource(R.drawable.<your image>); 
```

XML：

```
 <ImageView android:id="@+id/background"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/> 
```

设置背景看看这个： [http ://www.edumobile.org/android/android-beginner-tutorials/setting-an-image-as-a-wallpaper/](http://www.edumobile.org/android/android-beginner-tutorials/setting-an-image-as-a-wallpaper/)

# asp.net - 在 MVC3 应用程序中难以从 Paypal 确认即时付款通知 (IPN)

> ID：11387193
> 
> 赞同：1
> 
> 时间：2012-07-08T22:19:51.573
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, paypal-ipn, paypal-sandbox

我正在尝试让 Paypal 的 IPN 服务在我的应用程序中运行。

当我使用 Paypal Sandbox [IPN Simulator](https://developer.paypal.com/us/cgi-bin/devscr)设置为“Web Accept”的交易类型时，Paypal 说消息通过就好了（如果我弄乱了处理 IPN 的操作中的代码，Paypal 说有一个服务器错误，所以这似乎是正确的通信）。

*但是*，它似乎实际上并没有做任何事情。如果我在浏览器中导航到我的 IPN 操作`myapp.com/Paypal/IPN`，我会收到来自 paypal 的回复，上面写着`INVALID`（如预期的那样），这将通过`Debug.Write`. 当我在 Paypal 的模拟器中单击“发送 IPN”时，我根本没有收到任何调试消息，尽管我的 IPN 操作充满了`Debug.Write`行。（从本地环境外部进行的调用是否根本不允许`Debug.Write`输出？）

作为参考，这是我的 IPN 操作的大部分内容（为了清楚起见，我删除了各种逻辑）：

```
public ActionResult IPN()
{
    Debug.Write("entering ipn action ");
    var formVals = new Dictionary<string, string>();
    formVals.Add("cmd", "_notify-validate");

    string response = GetPayPalResponse(formVals, true);
    Debug.Write("IPN Response received: " + response + " <-- That was response. . . ");

    if (response == "VALID")
    {
        Debug.Write("Response Was Verified");
    }

    else
    {
        Debug.Write("RESPONSE WAS NOT VERIFIED");
    }

    return this.View();
}

string GetPayPalResponse(Dictionary<string, string> formVals, bool useSandbox)
{
    string paypalUrl = useSandbox
                            ? "https://www.sandbox.paypal.com/cgi-bin/webscr"
                            : "https://www.paypal.com/cgi-bin/webscr";

    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(paypalUrl);

    //Set values for the request back
    req.Method = "POST";
    req.ContentType = "application/x-www-form-urlencoded";

    byte[] param = Request.BinaryRead(Request.ContentLength);
    string strRequest = Encoding.ASCII.GetString(param);

    StringBuilder sb = new StringBuilder();
    sb.Append(strRequest);

    foreach (string key in formVals.Keys)
    {
        sb.AppendFormat("&{0}={1}", key, formVals[key]);
    }
    strRequest += sb.ToString();
    req.ContentLength = strRequest.Length;

    string response = "";
    using (StreamWriter streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII))
    {
        streamOut.Write(strRequest);
        streamOut.Close();
        using (StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream()))
        {
            response = streamIn.ReadToEnd();
        }
    }
    return response;
} 
```

我是否正确理解，如果 Paypal 实际上是向我的 IPN 操作提交请求，我应该收到与`Debug.Write`我在浏览器中访问 IPN 操作时相同的消息？

**在我看来，当 Paypal 将 IPN 模拟消息发送到我的 Web 应用程序时，实际上并没有发生任何事情，但是 Paypal 说一切正常，Paypal 不知何故知道我是否故意让 IPN 操作在引起错误时出现错误（所以它看起来实际上以某种方式调用该操作）。**

谁能帮我理解我在这里不理解的东西？

我只希望我的用户能够使用带有“立即购买”按钮的 Paypal 标准付款方式进行付款，并且能够在`false`确认已收到付款后将数据库值从“真”更改为“真”。

感谢您的时间。

*注意：我测试的另一种方法是，如果调用了该操作，则在我的数据库中更改某些内容（我只是做了类似`MyEntity.Value = new value`then`db.SaveAll();`的操作。如果我直接导​​航到浏览器中的操作，则对我的数据库进行了更改，但没有更改当我让贝宝 IPN 模拟器“ping”该操作时发生。*

**更新：**

好的，使用以下命令运行跟踪`trace.axd`：

```
<trace enabled="true" requestLimit="100" pageOutput="false" traceMode="SortByTime" localOnly="false" /> 
```

当我运行 Paypal IPN 模拟器或使用不在本地网络的设备浏览我的网页时，它的行为就像没有发生任何事情一样。

请注意，当我访问本地计算机上的页面时，我确实看到详细信息发生了变化：

```
8   7/8/2012 6:25:01 PM paypal/ipn  200 GET View Details
9   7/8/2012 6:25:02 PM paypal/themes/ui-lightness/jquery-ui-1.8.19.custom.css  404 GET View Details
10  7/8/2012 6:25:02 PM favicon.ico 404 GET View Details
11  7/8/2012 6:25:52 PM favicon.ico 404 GET View Details
12  7/8/2012 6:26:09 PM home/paypaltest 200 GET View Details 
```

**更新 2：**

通过将调试器附加到以下位置，我让调试器开始调试：`w3wp.exe`

`VERIFIED`当我使用 IPN 模拟器时，Paypal 似乎确实进入了我的页面并做出了响应。不知道这对我意味着什么。会更新。

**更新 3：**

通过调试工作，我能够正确测试所有内容，并且 IPN 验证实际上按预期工作 - 如果没有正确的调试消息，我无法判断。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:30:10.403

通过调试工作，我能够正确测试所有内容，并且 IPN 验证实际上按预期工作 - 如果没有正确的调试消息，我无法判断。

感谢您的时间。

# matlab - 使用 textscan 读取数据块

> ID：11387194
> 
> 赞同：0
> 
> 时间：2012-07-08T22:20:03.617
> 
> 标签：matlab, file-io, textscan

如何提取每个月的“平均”和“深度”数据？

```
MEAN, S.D., NO. OF OBSERVATIONS

                      January                February       ...            
 Depth       Mean   S.D.  #Obs       Mean   S.D.  #Obs       ...
     0      32.92   0.43     9      32.95   0.32    21      
    10      32.92   0.43    14      33.06   0.37    48      
    20      32.88   0.46    10      33.06   0.37    50      
    30      32.90   0.51     9      33.12   0.35    48      
    50      33.05   0.54     6      33.20   0.42    41      
    75      33.70   1.11     7      33.53   0.67    37      
   100      34.77            1      34.47   0.42    10      
   150                                                                                           
   200

                         July                  August               
 Depth       Mean   S.D.  #Obs       Mean   S.D.  #Obs       
     0      32.76   0.45    18      32.75   0.80    73      
    10      32.76   0.40    23      32.65   0.92   130      
    20      32.98   0.53    24      32.84   0.84   121     
    30      32.99   0.50    24      32.93   0.59   120      
    50      33.21   0.48    16      33.05   0.47   109      
    75      33.70   0.77    10      33.41   0.73    80      
   100      34.72   0.54     3      34.83   0.62    20      
   150                              34.69            1                                                     
   200 
```

它在数据之间有不可定义的空格数，并在开头有一个介绍行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:08:48.313

Matlab 的正则表达式对于从结构较少的文本中提取数据非常强大。一般来说，熟悉正则表达式真的很值得：http: [//www.mathworks.com/help/techdoc/ref/regexp.html](http://www.mathworks.com/help/techdoc/ref/regexp.html)

在这种情况下，您将定义模式以捕获每个观察组（平均 SD Obs），例如：32.92 0.43 9

在这里，我看到了每组数据的模式：每组前面有 6 个空格（正则表达式 = \s{6}），并且 3 个数据点被小于 6 个空格（\s+）分割。数据本身由两个浮点数 (\d+.\d+) 和一个整数 (\d+) 组成：

因此，将这些放在一起，您的捕获模式将如下所示（括号包围要捕获的数据模式）：

```
expr = '\s{6}(\d+\.\d+)\s+(\d+\.\d+)\s+(\d+)'; 
```

我们可以通过添加“？”为每个标记（即要在组中捕获的每个数据点）添加名称。括号内：

```
expr = '\s{6}(?<mean>\d+\.\d+)\s+(?<sd>\d+\.\d+)\s+(?<obs>\d+)'; 
```

然后，只需将您的文件读入一个字符串变量“strFile”并使用此定义的模式提取数据：

```
strFile = urlread('file://mydata.txt');
[tokens data] = regexp(strFile, expr, 'tokens', 'names'); 
```

变量 'tokens' 将包含一系列观察组，而 'data' 是一个具有 .mean .sd 和 .obs 字段的结构（因为这些是 'expr' 中的标记名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:57:53.120

例如，如果您只想获取前两列，那么 textscan() 是一个不错的选择。

```
fid = fopen('yourfile.txt');

tline = fgetl(fid);
while ischar(tline)
    oneCell = textscan(tline, '%n'); % read the whole line, put it into a cell
    allTheNums = oneCell{1}; % open up the cell to get at the columns

    if isempty(allTheNums) % no numbers, header line
        continue;
    end

    usefulNums = allTheNums(1:2) % get the first two columns
end

fclose(fid); 
```

`textscan`自动将您输入的字符串拆分到有空格的地方，因此列之间未定义的字符串数量不是问题。没有数字的字符串将提供一个数组，您可以将其测试为空以避免越界或错误数据错误。

如果您需要以编程方式确定要获取哪些列，您可以扫描“深度”和“平均”这两个词来查找索引。正则表达式在这里可能会有所帮助，但`textscan`也应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T05:29:26.220

以下是如何从文件中读取行的示例：

```
fid = fopen('yourfile.txt');

tline = fgetl(fid);
while ischar(tline)
    disp(tline)
    tline = fgetl(fid);
end

fclose(fid); 
```

在 while 循环中，您将希望使用[`strtok`](http://www.mathworks.com/help/techdoc/ref/strtok.html)（或类似的东西）将每一行分解为由空格分隔的字符串标记。

# c++ - 创建指向模板类的指针

> ID：11387195
> 
> 赞同：0
> 
> 时间：2012-07-08T22:20:20.963
> 
> 标签：c++, templates, c++11

我知道如果我使用基类，我可以有效地创建一个指向模板类的指针。有没有更简单的方法？

所以。这是使用基类的示例

```
class A {}
template <class T>
class B : public A {} 
```

现在，我可以创建一个实例`B<T>`并使用基类指向它`A`。有没有更简单的方法？更直接的方法？不涉及创建“虚拟”基类的一种。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T22:25:37.597

你的模板的不同实例——比如说`B<int>`和`B<char>`——是完全不同的类型，就像`int`和`char`是不同的类型一样。除非您从同一个基类派生它们，否则您不能有一个可以指向*任一类型对象的指针，如您的示例中所示。*就像您不能有一个可以指向 an`int`或 a的指针变量一样`char`。

但是如果你只希望你的指针指向一个特定的类型，你可以声明一个类型的指针或其他类型的`B<int> *`指针`B<char> *`。你不需要基类`A`。

当然，那个单一的特定类型可能被指定为某个其他模板的参数。例如，您可以有一个模板类`C<T>`，其中包含一个类型的指针`B<T> *`，因此 a`C<int>`将有一个`B<int> *`成员，而 a`C<char>`将有一个`B<char> *`成员。再一次，您不需要`A`基类。

# java - 一些设备和 Android 平板电脑之间的 WiFi 连接

> ID：11387198
> 
> 赞同：1
> 
> 时间：2012-07-08T22:20:41.400
> 
> 标签：java, android, wifi

我需要一些关于这种连接的理论知识。我有一个带开放wifi的路由器。我还有两个（这个数字最多可以更改为 15 个）设备连接到该网络和一个 android 平板电脑。

要点是同时在平板电脑上显示来自这两个设备的数据。

那么，在 Android（API 2.3）上开发这个想法的最佳想法是什么？使用套接字或 wifi 连接（在一个线程中）？感谢所有解决方案。干杯。

# spring - 无法在桌面应用程序中使用 @Autowired

> ID：11387201
> 
> 赞同：2
> 
> 时间：2012-07-08T22:20:58.413
> 
> 标签：spring, dependency-injection, desktop-application

我正在尝试在桌面应用程序中使用 spring，但我在**JPanel**的操作方法中遇到了自动装配问题。

我在我的主要方法中加载 applicationContext 如下：

```
public static void main(String[] args) {

        new ClassPathXmlApplicationContext(
                "classpath:/META-INF/spring/applicationContext.xml");
            MainFrame frame = new MainFrame();
    Signup signup = new Signup();
    frame.add(signup);
    frame.setResizable(false);
    frame.setTitle("Please input your data");
    frame.setBounds(100, 100, 450, 180);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);

} 
```

我可以看到它加载没有问题。

**我的面板代码：**

```
@Component
public class Signup extends JPanel {

    @Autowired
    private UserDao userDao;

    public Signup() {

        JButton btn_submit = new JButton("Submit");
        btn_submit.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                registerUser();
            }
        });

    }

    private void registerUser() {

        User newUser = new User();
        newUser.setName(username);
        newUser.setSalary(salary);
        userDao.addUser(newUser);

    }
} 
```

`context:component-scan`配置正确，我也在使用，但`context:annotation-config`我总是得到**NullPointerException**，`userDao.addUser(newUser);` 这意味着依赖注入没有正常工作。

请告知如何解决此问题。

**更新：** applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="
                http://www.springframework.org/schema/beans     
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="${project.groupId}" />

    <context:annotation-config />

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="propertyPlaceholderConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>

                <value>classpath:messages/application.properties</value>

            </list>
        </property>
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">

        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="${project.groupId}.domain" />

        <property name="hibernateProperties">
            <value>
                hibernate.dialect=org.hibernate.dialect.DerbyDialect
                hibernate.show_sql=false
                hibernate.format_sql=false
                hibernate.hbm2ddl.auto=validate
            </value>
        </property>

    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">

        <property name="driverClassName" value="org.apache.derby.jdbc.EmbeddedDriver" />

        <property name="url" value="jdbc:derby:test" />

        <property name="username" value="root" />

        <property name="password" value="root" />

    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />

</beans> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T22:26:47.513

如果您要在桌面环境中配置 Spring，那么***您***必须是使用`ApplicationContext`.

例如，如果您想获取`Signup`您在此处发布的课程，您可以在您的`main`方法中执行以下操作：

```
public static void main(String[] args) {
    ApplicationContext appContext = new ClassPathXmlApplicationContext(
            "classpath:/META-INF/spring/applicationContext.xml");
    Signup signup = appContext.getBean(Signup.class);
    //use signup here...
} 
```

用于`new Signup()`获取`Signup`类的新实例，这不会按您想要的方式工作，因为您希望它是 Spring 托管类！（实际上，您可以让它以这种方式工作，但这超出了我的回答范围）

# jquery - 带有 Json/Jquery 的 Yahoo Finance API 运行不正常？

> ID：11387206
> 
> 赞同：0
> 
> 时间：2012-07-08T22:22:12.540
> 
> 标签：jquery, json, search, yahoo, finance

我正在学习如何解析 json 和查询，并且正在研究其他问题：我看到有人使用下面的 URL 来获取股票代码和值。我也想得到实际的股票价值，但我稍后会弄清楚。

我的 jquery 代码应该解析它提供的 JSON 格式，但我是新手，它似乎并没有按照我理解的方式工作。对不起，如果这是一个“nooby”问题。

```
http://d.yimg.com/autoc.finance.yahoo.com/autoc?query=yahoo&callback=YAHOO.Finance.SymbolSuggest.ssCallback 
```

它返回这个，我重新格式化并验证它以使其可读并检查它：

```
YAHOO.Finance.SymbolSuggest.ssCallback({
   "ResultSet":{
      "Query":"google",
      "Result":[
         {
            "symbol":"GOOG",
            "name":"Google Inc.",
            "exch":"NMS",
            "type":"S",
            "exchDisp":"NASDAQ",
            "typeDisp":"Equity"
         },
         {
            "symbol":"GOOG.MX",
            "name":"Google Inc.",
            "exch":"MEX",
            "type":"S",
            "exchDisp":"Mexico",
            "typeDisp":"Equity"
         },
         {
            "symbol":"GGQ1.DE",
            "name":"GOOGLE-A",
            "exch":"GER",
            "type":"S",
            "exchDisp":"XETRA",
            "typeDisp":"Equity"
         },
         {
            "symbol":"GGQ1.SG",
            "name":"GOOGLE-A",
            "exch":"STU",
            "type":"S",
            "exchDisp":"Stuttgart",
            "typeDisp":"Equity"
         },
         {
            "symbol":"GGQ1.HA",
            "name":"GOOGLE-A",
            "exch":"HAN",
            "type":"S",
            "exchDisp":"Hanover",
            "typeDisp":"Equity"
         },
         {
            "symbol":"GGQ1.MU",
            "name":"GOOGLE-A",
            "exch":"MUN",
            "type":"S",
            "exchDisp":"Munich",
            "typeDisp":"Equity"
         },
         {
            "symbol":"GGQ1.F",
            "name":"GOOGLE-A",
            "exch":"FRA",
            "type":"S",
            "exchDisp":"Frankfurt",
            "typeDisp":"Equity"
         },
         {
            "symbol":"GOOG11BF.SA",
            "name":"GOOGLE      -DRN     MB",
            "exch":"SAO",
            "type":"S",
            "exchDisp":"Sao Paolo",
            "typeDisp":"Equity"
         },
         {
            "symbol":"GOOF.EX",
            "name":"GOOGLE-A",
            "exch":"EUX",
            "type":"S",
            "exchDisp":"EUREX Futures and Options Exchange ",
            "typeDisp":"Equity"
         },
         {
            "symbol":"GGQ1.HM",
            "name":"GOOGLE-A",
            "exch":"HAM",
            "type":"S",
            "exchDisp":"Hamburg",
            "typeDisp":"Equity"
         }
      ]
   }
}) 
```

这是我的代码的一部分，用于准确解析该 url：

```
function(data) {
                  $("#quotes").empty();
                  $.each(data.query.search, function(i, Result){
                    $("#quotes").append("<div>" + ResultSet.Result.symbol + "</a><br>" + ResultSet.Result.name + "<br><br></div>");
                  });
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:58:18.573

根据您尝试使用上面的代码和 JSON 结构实现的目标，您希望遍历每个`Result`对象并检索该对象的属性，然后将它们作为 div 输出，您可以：

```
$.each(data.ResultSet.Result, function(i, Result){  
  $("#quotes").append("<div>Symbol: "+Result.symbol+", Name: "+Result.name+" <br/><br/></div>");
}); 
```

[这是工作的jsFiddle](http://jsfiddle.net/c3Qra/)

# iphone - 高通SDK定制？

> ID：11387208
> 
> 赞同：1
> 
> 时间：2012-07-08T22:23:11.823
> 
> 标签：iphone, objective-c, ios, qcar-sdk

我正在尝试编辑 qualcomm sdk 的多目标和图像目标示例应用程序，以便我只能覆盖 UIKit 内容（例如按钮文本等），而不是使用简单的演示。但直到现在我都无法这样做。

请指导我在哪里进行任何更改或如何进行？

我还参考了论坛并尝试了示例，但他们都在使用我想摆脱的 openGL。

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:18:00.967

QCAR 的主要职责是为您提供一个称为`ModelView`矩阵的 4x4 矩阵，您可以使用它来叠加您的图形。这是一个 OpenGL 矩阵，我认为您无法在 UIKIT 中使用该矩阵。

如果您只想在检测到目标时覆盖一些 UI 内容，那么您不需要该矩阵。但是用户界面将以 2D 形式出现在屏幕上（而不是 3D 场景中的目标图像上），而这根本不是 AR。

另一种选择是将渲染引擎与 QCAR 结合起来，以避免使用纯 OpenGL ES API。对于 iPhone，我认为`OpenFramework`应该做这项业务。

# scala - Scala 中的泛型运算符

> ID：11387209
> 
> 赞同：0
> 
> 时间：2012-07-08T22:23:19.120
> 
> 标签：scala, generics, operators

是否可以在 Scala 中定义泛型运算符？

Scala 让我可以在函数上映射任意运算符，这非常有用。但是，在我可能希望操作员根据应用程序的状态进行更改的情况下，这似乎具有限制性。

* * *

举个例子：我有一个包含用户的表和一个包含他们各自关系的表。每个关系都有一个类型，例如：“friends-with”、“works-with”等。根据我的领域模型，我希望 DSL 允许：`is(john friends-with mary)`. 在这种情况下，`john`和`mary`都属于 Object `User`，它有一个通用的 operator `def <relationship> (a:User): Boolean = {...}`。

* * *

我想要实现的正是 Dynamic 允许我做的事情（见答案）。描述完美契合：

> 启用动态调用的标记特征。此特征的实例 x 允许对任意方法名称 meth 和参数列表 args 调用 x.meth(args)。如果 x 本身不支持调用，则将其重写为 x.applyDynamic("meth", args)。

更多信息在这里：[http ://www.scala-lang.org/api/current/scala/Dynamic.html](http://www.scala-lang.org/api/current/scala/Dynamic.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T01:03:57.593

查看 trait Dynamic，它将在 Scala 2.10 上可用（它在 Scala 2.9 上是实验性的）。

例如：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

case class User(name: String) extends Dynamic {
  def applyDynamic(relationship: String)(to: User) =
    Relation(relationship, this, to)
}
case class Relation(kind: String, from: User, to: User)

// Exiting paste mode, now interpreting.

defined class User
defined class Relation

scala> User("john") friendsWith User("mary")
res0: Relation = Relation(friendsWith,User(john),User(mary)) 
```

# javascript - 使用敲除添加项目时，在 jquery 移动网格中修改 div 的类

> ID：11387211
> 
> 赞同：1
> 
> 时间：2012-07-08T22:23:32.183
> 
> 标签：javascript, jquery, jquery-mobile, knockout.js

我想创建一个 3x3 网格，其中包含使用敲除绑定加载的图像

```
<fieldset class="ui-grid-b" data-bind="foreach: Icons">
 <div>
    <img alt="" src="../res/placeholder.png" style="width: 80px; height: 80px" />
 </div>
</fieldset> 
```

Images 属性来自视图模型，它通过 ajax 调用异步加载。

我需要像这样为每个图像设置 div：

第 1 格：`<div class="ui-block-a" />` 第 2 格：`<div class="ui-block-b" />` 第 3 格：`<div class="ui-block-c" />` 第 4 格：`<div class="ui-block-a" />` 第 5 格：`<div class="ui-block-b" />` 第 6 格：`<div class="ui-block-c" />` ...

所以类名是“ui-block-”+ div_index % 3

问题是我不知道如何设置类名。我尝试使用计算的 observable 但我无法获取实际对象（图标模型）以便能够返回 Icons.IndexOf(icon) % 3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T22:33:24.670

在 a 中使用 Knockout 2.1，`foreach`您可以访问该`$index`变量。

```
<div data-bind="attr: {'class': $root.indexLetter($index())}"> 
```

在您的 ViewModel 中创建一个方法，如下所示：

```
viewModel.indexLetter = function(index) {
    var abc = 'abc';
    return 'ui-block-' + abc.charAt(index % 3);
} 
```

# ubuntu - 没有提示的 RVM 安装

> ID：11387212
> 
> 赞同：1
> 
> 时间：2012-07-08T22:23:33.707
> 
> 标签：ubuntu, rvm

我正在尝试编写安装 Ruby 和 RVM 的脚本，但遇到了一些问题。当我尝试运行时：

```
rvm install 1.9.3-head 
```

RVM 显示一些文本并要求我按“q”继续。由于这将成为脚本的一部分，因此我需要弄清楚如何在不按“q”的情况下继续。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:18:48.540

交互模式下的 rvm 可能会问问题，为了避免他们在二进制模式下使用 rvm，有两种方法：

```
command rvm install 1.9.3 # when rvm was sourced 
```

和：

```
$rvm_path/bin/rvm install 1.9.3 # should work always 
```

# android - 选项菜单不从 xml 膨胀

> ID：11387220
> 
> 赞同：0
> 
> 时间：2012-07-08T22:25:13.370
> 
> 标签：android, menubar, android-inflate

我无法从 xml 扩展选项菜单。这是我的代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
} 
```

当我按下模拟器上的菜单按钮时它运行良好，但是当我在运行 ics 的实际设备上运行它时没有菜单栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:33:28.200

菜单按钮已从运行 Android 3.0 及更高版本的设备中删除，现在被视为“已弃用”。有[一篇很好的博客文章](http://android-developers.blogspot.de/2012/01/say-goodbye-to-menu-button.html)介绍了为什么、如何使用新的 ActionBar 以及如何保持对旧应用程序的旧版支持：

> `<uses-sdk>` 如果您的应用在没有专用菜单按钮的设备上运行，系统会根据您在清单元素中声明支持的 API 级别来决定是否将操作溢出添加到导航栏。逻辑归结为：
> 
> *   如果您将`minSdkVersion`或设置`targetSdkVersion`为 11 或更高，系统将不会添加旧版溢出按钮。
> *   否则，系统会在 Android 3.0 或更高版本上运行时添加旧版溢出按钮。
> *   唯一的例外是，如果您设置`minSdkVersion`为10或更低，设置`targetSdkVersion`为11、12或13，并且您不使用ActionBar，则在Android 4.0或更高版本的手机上运行您的应用时，系统会添加旧的溢出按钮。

如果您正在开始 Android 开发或正在创建新应用程序，请不要使用此类菜单，而应使用 ActionBar。

[“支持库”](http://developer.android.com/tools/extras/support-library.html#Using)中提供了帮助程序以实现向后兼容性：

> **库不支持**ActionBar 。但是，在创建选项菜单时，您可以*声明应在操作栏可用时将哪些项目添加到操作栏中*（在 Android 3.0 或更高版本上）。

# javascript - 存储 Ajax 响应以显示给其他用户

> ID：11387221
> 
> 赞同：1
> 
> 时间：2012-07-08T22:25:16.070
> 
> 标签：javascript, ajax, caching

有些人制作了一个 API 来显示一些战地统计数据，并要求人们不要在每次访问该站点时调用该 API，而是缓存响应并在定义的时间间隔内进行真正的调用。

我该如何处理？如何在前端将数据存储给其他用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:45:56.607

您使用的是什么服务器端语言？我会做一个 cron 作业来调用真实数据并将其放入数据库中，然后所有客户端调用都将发送到您端的数据库。

# android - 如何在 Android ICS 中灰显菜单项（设置 -> 安全 -> 屏幕锁定）？

> ID：11387224
> 
> 赞同：0
> 
> 时间：2012-07-08T22:26:05.080
> 
> 标签：android, locking, screen, device, administrator

我正在使用设备管理员为 ICS 开发应用程序。我需要将设置 -> 安全下的菜单选项“屏幕锁定”置灰，如果无法将设置 -> 安全 -> 屏幕锁定下的人脸解锁、图案、密码和密码置灰。

我在执行它的程序代码之后，无论是 Java 还是 XML。

提前致谢

乔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:38:00.657

阻止用户访问屏幕锁定类似于阻止用户访问他或她的设备。值得庆幸的是，这些类型的黑客在 Android 中是不可能的（即使通过设备管理员）。对不起。

# tsql - TSQL 使用 2 个日期之间的随机值更新日期时间

> ID：11387226
> 
> 赞同：2
> 
> 时间：2012-07-08T22:26:20.937
> 
> 标签：tsql, datetime, random

更新包含`DATETIME`TSQL 上的列且`RANDOM`值介于 2 个日期之间的表的最简单方法是什么？

我看到了与此相关的各种帖子，但是当您`ORDER BY DATE`更新后，它们的随机值确实是连续的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T00:47:30.533

# 假设

首先假设您有一个数据库，其中包含一个包含开始日期时间列和结束日期时间列的表，它们共同定义了一个日期时间范围：

```
CREATE DATABASE StackOverflow11387226;
GO

USE StackOverflow11387226;
GO

CREATE TABLE DateTimeRanges (
  StartDateTime DATETIME NOT NULL,
  EndDateTime DATETIME NOT NULL
);
GO

ALTER TABLE DateTimeRanges
ADD CONSTRAINT CK_PositiveRange CHECK (EndDateTime > StartDateTime); 
```

并假设该表包含一些数据：

```
INSERT INTO DateTimeRanges (
  StartDateTime,
  EndDateTime
)
VALUES
  ('2012-07-09 00:30', '2012-07-09 01:30'),
  ('2012-01-01 00:00', '2013-01-01 00:00'),
  ('1988-07-25 22:30', '2012-07-09 00:30');
GO 
```

# 方法

以下`SELECT`语句返回开始日期时间、结束日期时间和分钟精度大于或等于开始日期时间且小于第二个日期时间的伪随机日期时间：

```
SELECT
  StartDateTime,
  EndDateTime,
  DATEADD(
    MINUTE,
    ABS(CHECKSUM(NEWID())) % DATEDIFF(MINUTE, StartDateTime, EndDateTime) + DATEDIFF(MINUTE, 0, StartDateTime),
    0
  ) AS RandomDateTime
FROM DateTimeRanges; 
```

# 结果

因为`NEWID()`函数是不确定的，所以每次执行都会返回不同的结果集。这是我刚才生成的结果集：

```
StartDateTime           EndDateTime             RandomDateTime
----------------------- ----------------------- -----------------------
2012-07-09 00:30:00.000 2012-07-09 01:30:00.000 2012-07-09 00:44:00.000
2012-01-01 00:00:00.000 2013-01-01 00:00:00.000 2012-09-08 20:41:00.000
1988-07-25 22:30:00.000 2012-07-09 00:30:00.000 1996-01-05 23:48:00.000 
```

RandomDateTime 列中的所有值都介于 StartDateTime 和 EndDateTime 列中的值之间。

# 解释

这种生成随机值的技术归功于 Jeff Moden。他在 SQL Server Central 上写了一篇关于数据生成的[精彩文章。](http://www.sqlservercentral.com/articles/Data+Generation/87901/)阅读它以获得更全面的解释。需要注册，但非常值得。

这个想法是从开始日期时间生成一个随机偏移量，并将偏移量添加到开始日期时间以在开始日期时间和结束日期时间之间获得一个新的日期时间。

该表达式`DATEDIFF(MINUTE, StartDateTime, EndDateTime)`表示开始日期时间和结束日期时间之间的总分钟数。偏移量必须小于或等于该值。

该表达式`ABS(CHECKSUM(NEWID()))`为每一行生成一个独立的随机正整数。该表达式可以具有从 0 到 2,147,483,647 的任何值。此表达式修改第一个表达式以分钟为单位提供有效偏移量。

表达式`DATEDIFF(MINUTE, 0, StartDateTime)`表示开始日期时间和参考日期时间之间的总分钟数，参考日期时间`0`是 的简写`'1900-01-01 00:00:00.000'`。参考日期时间的值无关紧要，但重要的是在整个表达式中使用相同的参考日期。将此添加到偏移量以获取参考日期时间之间的总分钟数。

封装的 DATEADD 函数通过将前一个表达式产生的分钟数与参考日期时间相加，将其转换为日期时间值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-08T22:32:18.467

您可以[`RAND`](http://msdn.microsoft.com/en-us/library/ms177610.aspx)为此使用：

```
select cast(cast(RAND()*100000 as int) as datetime) 
```

从[这里](http://www.sqlservercentral.com/Forums/Topic499265-8-1.aspx#bm501386)

Sql-Fiddle 看起来相当不错：[http ://sqlfiddle.com/#!3/b9e44/2/0](http://sqlfiddle.com/#!3/b9e44/2/0)

# eclipse - 为什么在尝试运行 Java AppEngine 应用程序时会出现死锁？

> ID：11387229
> 
> 赞同：1
> 
> 时间：2012-07-08T22:26:36.397
> 
> 标签：eclipse, google-app-engine

我制作了一个应用程序留言簿来学习使用 Java 的 Google App Engine。但是，当我尝试将其作为 Web 应用程序运行时，Eclipse 会停止构建应用程序，因为它显然正在等待工作区构建。

![在此处输入图像描述](../Images/acd4edc69c98ee25087e4eeb50d65f27.png)

我尝试通过单击右侧的红色框来取消工作区的构建，但无济于事。我还尝试取消整个运行并重新运行，这产生了相同的情况。

为什么我无法运行 Web 应用程序？

# java - 使用 Gson 从 JSON URL 创建 java 对象的数组列表

> ID：11387231
> 
> 赞同：3
> 
> 时间：2012-07-08T22:27:23.070
> 
> 标签：java, json, list, parsing, gson

我能够将以下数据解析为 java 对象：

```
{
    "name": "testname",
    "address": "1337 455 ftw",
    "type": "sometype",
    "notes": "cheers mate"
} 
```

使用此代码：

```
public class Test 
{
    public static void main (String[] args) throws Exception
    {
        URL objectGet = new URL("http://10.0.0.4/file.json");

        URLConnection yc = objectGet.openConnection();
        BufferedReader in = new BufferedReader(
                new InputStreamReader(
                yc.getInputStream()));

        Gson gson = new Gson();

        try {
            DataO data = new Gson().fromJson(in, DataO.class);

            System.out.println(data.getName());
        }catch (Exception e) {
            e.printStackTrace();
        }
    }      
} 
```

但现在我想从以下 JSON 字符串中存储这些对象的列表：

```
[
    {
        "name": "testname",
        "address": "1337 455 ftw",
        "type": "sometype",
        "notes": "cheers mate"
    },
    {
        "name": "SumYumStuff",
        "address": "no need",
        "type": "clunkdroid",
        "notes": "Very inefficient but high specs so no problem."
    }
] 
```

有人可以帮我修改我的代码来做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T23:51:17.940

您可以将要反序列化的类型指定为数组或集合。

作为数组：

```
import java.io.FileReader;

import com.google.gson.Gson;

public class GsonFoo
{
  public static void main(String[] args) throws Exception
  {
    Data0[] data = new Gson().fromJson(new FileReader("input.json"), Data0[].class);
    System.out.println(new Gson().toJson(data));
  }
}

class Data0
{
  String name;
  String address;
  String type;
  String notes;
} 
```

作为列表：

```
import java.io.FileReader;
import java.util.List;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

public class GsonFoo
{
  public static void main(String[] args) throws Exception
  {
    List<Data0> data = new Gson().fromJson(new FileReader("input.json"), new TypeToken<List<Data0>>(){}.getType());
    System.out.println(new Gson().toJson(data));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:47:58.673

快速[浏览 Gson 用户指南](https://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Limitations)表明这可能是不可能的，因为反序列化器不知道元素的类型，因为数组中可能有不同类型的元素。

> 收藏限制
> 
> 可以序列化任意对象的集合但不能从中反序列化 因为用户无法指示结果对象的类型 在反序列化时，Collection 必须是特定的泛型类型

# c# - WPF 中的设计模式

> ID：11387237
> 
> 赞同：3
> 
> 时间：2012-07-08T22:28:56.057
> 
> 标签：c#, .net, wpf, mvvm

我正在制作我的第一个 WPF 应用程序，所以这个问题可能看起来很奇怪。我一直在阅读有关 MVVM 的内容，到目前为止它对我来说很有意义。但是，我不明白的是分离所有 XAML。

我的意思是：我假设您不会将所有内容都放在 MainWindow.xaml 中，而只是根据将要使用的内容折叠控件。我认为您会想要一个包含其他文件的 xaml 的容器。它是否正确？

您如何将 XAML 分离出来，使其不仅仅是一个文件中所有内容的混搭？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T22:53:11.303

> 您如何将 XAML 分离出来，使其不仅仅是一个文件中所有内容的混搭？

有很多方法，包括创建一个单独的[`UserControl`,`CustomControl`](http://wangmo.wordpress.com/2007/09/28/user-controls-vs-custom-controls/) ,[`Page`或`Window`](https://stackoverflow.com/questions/5243910/page-vs-window-in-wpf)

*例如*，如果您想`XAML`从*您*的`MainWindow.xaml`. _ *_*`UserControl`***`MyUserControl.xaml`***

 ***```
<UserControl x:Class="WpfApplication1.MyUserControl"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
    <Grid>
        <TextBlock>This is from a different XAML file.</TextBlock>
    </Grid>
</UserControl> 
```

然后`MainWindow.xaml`像这样使用这个控件：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:myControls="clr-namespace:WpfApplication1">
    <Grid>
        <myControls:MyUserControl/>
    </Grid>
</Window> 
```

请注意，您需要添加对您的命名空间的引用`UserControl`

```
xmlns:myControls="clr-namespace:WpfApplication1" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T00:52:31.157

我同意 Kevin 关于 UserControl 和 Window 的回答，所以我将只解决后续问题：

> 因此，当用户与我的应用程序交互时，我应该在 MainWindow 内容中折叠/可见的各种控件之间切换？

这是一个有效的选择。如果您正在使用大型应用程序，它可能会变得混乱。

我使用的其他选项是

*   在后面的代码中切换视图；即在单击事件上，您可以像在 WinForms 中那样添加和删除页面中的元素。这不是纯粹的 MVVM，有些人会从你的喉咙里跳下来，但我相信 MVVM 是一种工具，而不是一种宗教。
*   在您的 ViewModel 中提供 Views 作为属性，并从您的父 View 绑定到它们。我不知道这是否是纯 MVVM，当您需要根据复杂条件动态创建视图时很好，但它可能会变得复杂
*   使用 DataTemplates，它们本质上是根据提供的数据类型确定要使用的视图的规则。因此，如果数据是`Address`（或`AddressViewModel`），请使用`AddressView`. 如果数据是`CustomerViewModel`，请使用`CustomerView`。等等。

在我看来，DataTemplates 是首选模式——干净、易于维护和一个很好的标准。去 DataTemplate 看看绑定是如何工作的很简单，而我给出的其他两个选项可能会导致意大利面条代码落入坏人手中。

[MSDN在 WPF 中的 DataTemplates](http://msdn.microsoft.com/en-us/library/ms742521.aspx)上有一个不错的页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T00:26:18.640

使用 Caliburn 框架时，您可以使用较小的 Views 和 ViewModels 组成您的应用程序，并拥有一个将所有这些较小视图绑定在一起的 shell。shell 将同时显示一个或多个视图，具体取决于您希望应用程序的行为方式。这样做的好处 - 与上面提到的在其他地方硬编码 View/UserControl 名称的模式不同 - 是您只需创建一个 ContentControl 并将其绑定到正确的 ViewModel 属性，Caliburn 将通过以下方式为您找到正确的 View惯例。

假设你有一个 ShellViewModel 和一个 ShellView，它只是一个空窗口，还有另一个 View/ViewModel，你想在你的 shell 中显示。您不再需要在任何地方实例化您的视图，只需使用 POCO ViewModels 对象按自己的方式工作：

```
public class ShellViewModel : Screen
{
   public ChildViewModel Child { get; set; }

   public void SomeAction()
   {
       Child = new ChildViewModel(); //Or inject using factory, IoC, etc.
   }
}

public class ShellView : Window
{
}

<Window x:Class="WpfApplication1.ShellView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:cal="http://www.caliburnproject.org">
    <Grid>
        <ContentControl cal:View.Model="{Binding Child}" />
    </Grid>
</Window> 
```***

# actionscript-3 - Flash Builder：使用 AS3 更改舞台背景颜色

> ID：11387238
> 
> 赞同：1
> 
> 时间：2012-07-08T22:29:30.833
> 
> 标签：actionscript-3, flex4, flash-builder

我不是在谈论元/绑定，例如：

```
[SWF(backgroundColor="0xec9900")] 
```

我需要能够即时更改颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:44:53.453

在 Sprite 中绘制一个矩形并将其作为最低级别的子级添加到舞台。

```
var bg:Sprite;

function changeStageColor( color : uint ) : void {
    bg ||= new Sprite();
    bg.graphics.clear();
    bg.graphics.beginFill( color, 1 );
    bg.graphics.drawRect( 0,0, stage.stageWidth, stage.stageHeight );
    bg.graphics.endFill();
    stage.addChildAt( bg, 0 );
} 
```

用法：

```
changeStageColor( 0xFF0000 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:51:25.367

我在我的主要精灵中使用它：

```
this.opaqueBackground = 0xff0000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-01T19:06:08.950

在初始化我放：

```
this.backgroundSkin = new Quad(this.stage.stageWidth, this.stage.stageHeight, 0x007800); 
```

# mysql - 活动记录。包括连接表中的数据

> ID：11387242
> 
> 赞同：1
> 
> 时间：2012-07-08T22:30:13.917
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord

（Ruby/Rails 大师最好：P）

我有一个有趣的问题。希望它还没有回答（等等，是的，我知道了！）但我已经看过但找不到它。（希望不是因为不可能）

我有两个班级（我想保持这种状态）组和事件（见下文）。

```
class Group < ActiveRecord::Base
    has_and_belongs_to_many :events
end 
```

但是，在我的连接表 (group_events) 中，我有额外的列为事件提供了情有可原的情况......我希望这些信息在事件对象上可用。（例如，是否必须出席等）

我的第二个稍微相关的问题是，我可以不做以下事情：

```
class Event < ActiveRecord::Base
    has_and_belongs_to_many :groups
end

class GroupEvent < Event
    # Implies that a GroupEvent would be an Event, with all the other attributes of the group_events table minus the
    # two id's (group_id, event_id) that allowed for its existence (those would just be references to the group and event object)
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T23:35:08.163

我将首先重写，明确描述和模型`has_and_belongs_to_many`之间的关系。`Event``GroupEvent`

```
class Group < ActiveRecord::Base
  has_many :group_events
  has_many :events, :through => :group_events
end

class Event < ActiveRecord::Base
  has_many :group_events
  has_many :groups, :through => :group_events
end

class GroupEvent < ActiveRecord::Base
  belongs_to :group
  belongs_to :event
end 
```

然后，您可以在`Event`类中的方法引用您之后的 GroupEvent 属性。对于中的一些布尔`:attendance_mandatory`属性`GroupEvent`，您可以执行类似的操作

```
class Event < ActiveRecord::Base
  has_many :group_events
  has_many :groups, :through => :group_events

  def attendance_mandatory?(group)
    group_events.find(group.id).attendance_mandatory?
  end
end 
```

有了一些`Event`as`e`和关联`Group`as `g`，你现在可以做

```
e.attentdance_mandatory?(g) 
```

至于您的第二个问题，我认为您正在寻找我在上面第一个代码块中发布的内容。

```
class GroupEvent < ActiveRecord::Base
  belongs_to :group
  belongs_to :event
end 
```

每个包含您希望与之交互的数据的表都应该在您的应用程序中具有代表性模型。以上符合您规定的标准*（公开 a 的属性`GroupEvent`）*。

**注意：**您的语法`class GroupEvent < Event`用于[单表继承](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Single+table+inheritance) *（您可以将属性`attendance_mandatory`移到`events`表中，并将该`events`表用于常规`Event`和 a `GroupEvent`- 尽管这超出了本问题的范围）*

# c# - 如何在 .net 图表中设置轴属性？

> ID：11387250
> 
> 赞同：2
> 
> 时间：2012-07-08T22:31:34.080
> 
> 标签：c#, mschart

我的图表看起来都被抬高了。一方面，沿 x 轴的标签太多。对于两个，它将 x 轴信息作为 DateTime 对象。在这种情况下，我希望显示一天中的时间。

那么我怎样才能减少标签并使标签的内容是时间而不是日期呢？

[http://i1120.photobucket.com/albums/l493/powerfulcrunch/chart.png](http://i1120.photobucket.com/albums/l493/powerfulcrunch/chart.png)

```
private void drawMinuteGraph(string data)
    {
        Chart chart = new Chart();
        Series series = new Series("default");
        series.ChartType = SeriesChartType.Line;
        chart.Series.Add(series);
        ChartArea chartArea = new ChartArea();
        chart.ChartAreas.Add(chartArea);
        Axis x = new Axis(chartArea, AxisName.X);
        x.LineWidth = 90;
        Axis y = new Axis(chartArea, AxisName.Y);
        Data[] _data = data.getHistory("History", data);
        List<DateTime> dates = new List<DateTime>();
        List<double> values = new List<double>();
        foreach (Data __data in _data)
        {
            dates.Add(__data.timestamp);
            values.Add(__data.value);
        }
        chart.Height = 150;
        chart.Width = 150;
        chart.Series["default"].Points.DataBindXY(dates, values);
        flowLayoutPanel.Controls.Add(chart);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T23:00:59.033

使用 Axis.LabelStyle.Format 属性。格式化字符串：http: [//msdn.microsoft.com/en-us/library/az4se3k1.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

阅读本文了解如何设置间隔

[自定义标签间隔](http://support2.dundas.com/OnlineDocumentation/WebChart2005/Labels_Setting_a_Custom_Label_Interval.html)

# android - Activity 中的 onPause() 和 onStop()

> ID：11387258
> 
> 赞同：22
> 
> 时间：2012-07-08T22:33:22.377
> 
> 标签：android, android-emulator, onpause

我是 Android 开发的新手，我仍然无法理解活动中的`onPause()`和`onStop()`方法。

在我的应用程序中，我有一个名为 Counter 的静态类，它将变量的状态保存在应用程序的内存中。我的应用程序在模拟器中运行良好。我试图测试的是`onPause()`vs的不同行为`onStop()`。

对于`onPause`，我希望保留存储在 Counter 类成员中的值，而调用`onStop()`我希望将计数器值重置为零。所以我覆盖`onStop()`并将计数器类中的变量设置为零。但是，在模拟器中，我似乎无法让应用程序处于暂停状态。在模拟器中，我打开我的应用程序，练习它。然后我点击模拟器的主页按钮（不是后退按钮），并启动另一个应用程序，相信这会模仿`onPause()`活动。但是，模拟器似乎不支持这一点（我使用的是 armeabi v7a 模拟器），它似乎总是在调用`onStop()`，因为我的计数器值都回到零，根据我在`onStop()`. 这是模拟器固有的还是我做错了什么让我的活动进入暂停状态？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-08T22:57:30.243

我不确定您正在使用哪个模拟器进行测试，但`onPause`它是*始终*保证在您`Activity`失去焦点时调用的一种方法（我说*总是*因为在某些设备上，特别是那些运行 Android 3.2+ 的设备，`onStop`并不总是保证在被销毁之前被调用`Activity`）。

了解初学者生命周期的一个好方法`Activity`是用`Log`s 乱扔你的重写方法。例如：

```
public class SampleActivity extends Activity {

    /**
     * A string constant to use in calls to the "log" methods. Its
     * value is often given by the name of the class, as this will 
     * allow you to easily determine where log methods are coming
     * from when you analyze your logcat output.
     */
    private static final String TAG = "SampleActivity";

    /**
     * Toggle this boolean constant's value to turn on/off logging
     * within the class. 
     */
    private static final boolean VERBOSE = true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (VERBOSE) Log.v(TAG, "+++ ON CREATE +++");
    }

    @Override
    public void onStart() {
        super.onStart();
        if (VERBOSE) Log.v(TAG, "++ ON START ++");
    }

   @Override
    public void onResume() {
        super.onResume();
        if (VERBOSE) Log.v(TAG, "+ ON RESUME +");
    }

    @Override
    public void onPause() {
        super.onPause();
        if (VERBOSE) Log.v(TAG, "- ON PAUSE -");
    }

    @Override
    public void onStop() {
        super.onStop();
        if (VERBOSE) Log.v(TAG, "-- ON STOP --");
    }

   @Override
    public void onDestroy() {
        super.onDestroy();
        if (VERBOSE) Log.v(TAG, "- ON DESTROY -");
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-03T13:49:59.173

我知道您的问题是 6 个月前的问题，但万一其他人偶然发现了这个问题：

> 我做错了什么让我的活动进入暂停状态。

是的，你是。这个：

> 我点击了模拟器的主页按钮（不是返回按钮），然后启动另一个应用程序，相信这会模仿 onPause() 活动。

点击主页按钮确实会调用该`onPause()`方法，但由于主页按钮使您的活动不再可见，因此它将调用该`onStop()`方法（如提到的爱国者和米尔特）。

根据活动开发人员参考 ( [http://developer.android.com/guide/components/activities.html](http://developer.android.com/guide/components/activities.html) )，您可以显示一个对话框或简单地让设备进入睡眠状态。

或者，您调用一个只会部分阻碍调用活动的活动。因此，调用一个创建具有大小视图的窗口的活动：

```
 android:layout_width="100dp"
 android:layout_height="100dp" 
```

它不会覆盖整个屏幕，从而使调用活动部分可见，从而仅调用调用活动的`onPause()`方法。

克隆该活动，以便两个视图大小都是“match_parent”而不是“100dp”并调用它，调用活动的`onPause()`和`onStop()`方法都将被调用，因为调用活动将不可见。

当然也有例外，比如被调用的 Activity 导致应用程序崩溃`onCreate()`，`onStart()`或者调用 Activity`onResume()`的`onStop()`不会被调用，显然，我在这里只讨论一般情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-08T22:46:38.680

何时调用 onPause() 和 onStop() 之间的差异可能非常微妙。然而，正如[这里](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)所解释的，onPause() 通常会在当前 Activity 仍在运行时在另一个*Activity*获得焦点（可能是弹出窗口或透明窗口）时执行。如果您完全离开应用程序（例如，通过点击主页按钮），活动将不再可见，系统可能会执行 onStop()。我只说可能是因为，正如 Alex 所提到的，在某些情况下 onStop 在 Activity 被销毁之前没有被调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-08T22:59:38.073

暂停（）：

“如果一个活动失去了焦点但仍然可见（即一个新的非全尺寸或透明活动的焦点在你的活动之上），它就会被暂停。一个暂停的活动是完全活跃的（它保持所有状态和成员信息并保持连接到窗口管理器），但可以在内存极低的情况下被系统杀死。”

停止（）：

“如果一个活动被另一个活动完全遮挡，它就会停止。它仍然保留所有状态和成员信息，但是，它不再对用户可见，因此它的窗口是隐藏的，并且经常会在内存时被系统杀死其他地方需要。”

取自android参考活动类：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-09T17:00:40.387

我同意米尔特！

暂停（）：

“如果一个活动失去焦点但仍然可见（也就是说，一个新的非全尺寸或透明活动的焦点在你的活动之上），它就会被暂停。一个暂停的活动是完全活跃的（它保持所有状态和成员信息并保持连接到窗口管理器），但可以在内存极低的情况下被系统杀死。”

如果您在不按返回（按住 HOME）的情况下交换应用程序，那么操作系统将调用 onPause。当您在 onResume 中返回活动（再次按住 HOME）时，您应该保留所有私有变量。但是你不能控制用户，对吧？！

如果您预计用户将离开您的应用并且操作系统调用您的 onStop，如果您打算从中断的地方继续，则最好保存您的数据。

我也有一个计时器，我需要保存经过的时间，这样当用户返回时，我可以恢复数据。这是我要保存的示例：

```
@Override 
public void onSaveInstanceState(Bundle savedInstanceState) { 
  super.onSaveInstanceState(savedInstanceState); 
  // Save UI state changes to the savedInstanceState. 
  // This bundle will be passed to onCreate if the process is 
  // killed and restarted. 

  savedInstanceState.putLong("elapsedTime", elapsedTime);
  // etc. 
} 
```

还有我要恢复的代码：

```
@Override 
public void onRestoreInstanceState(Bundle savedInstanceState) { 
  super.onRestoreInstanceState(savedInstanceState); 
  // Restore UI state from the savedInstanceState. 
  // This bundle has also been passed to onCreate. 

  elapsedTime = savedInstanceState.getLong("elapsedTime");
} 
```

将这些方法放在你的类中，你就可以开始了。请记住，在我的例子中，字符串“elapsedTime”是系统的关键，它必须是唯一的。为您要保存的每条数据使用唯一的字符串。例如“startClock”、“ClockTextColor”等...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-08T23:06:58.683

如果您正在模拟 Android 4.x，您可以使用设置 -> 开发人员选项 -> 不保留活动和后台进程限制来控制系统处理后台活动的方式。对于旧版本，有一个名为 Dev Tools 的应用程序，其中包含相同的设置。但是，在内存不足的情况下，系统可以忽略这些设置并终止您的应用程序。增加分配给模拟器的内存量可能会有所帮助。

此外，如果您从 Eclipse 重新启动您的应用程序，它将终止前一个进程，而不是优雅地终止它。

# php - 设置 PHP 服务器以供公众访问

> ID：11387261
> 
> 赞同：0
> 
> 时间：2012-07-08T22:33:33.407
> 
> 标签：php, client-server

我是 PHP 新手，但我找不到好的示例 - 主要用于本地设置或高级内容。我在 EC2 服务器上创建了一个 PHP 页面。在本地访问它时它工作正常，但是，我需要做什么才能从不同的网络公开访问它？这可以在 Apache 和 IIS 上工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:36:23.030

对于 ec2，您必须确保在仪表板中打开端口 80。“安全组”

# optimization - 在解释语言中取消切换循环有什么用处？

> ID：11387264
> 
> 赞同：0
> 
> 时间：2012-07-08T22:33:54.450
> 
> 标签：optimization, gcc, loops, interpreted-language

我正在查看 GCC 对 -O3 的作用（我确保我的所有代码都可以编译），并且我想知道在解释语言中取消切换循环有多大用处。我想知道对于“生产”就绪的代码是否值得，例如当您使用谷歌的闭包编译器时，因为它会加快一点，但我想象的不是很多。无论如何，这真正产生了多少好处？我想这是 x 检查 y 循环。其中 x 是 if else if 或 case 切换的数量，y 是循环的数量。所以它是 x*y。但是，当您使用解释型语言时，它值多少钱？

我以一种完全理论上的方式问它，因为我只是想知道它，我怀疑它有什么意义，甚至可能让它倒退，因为它在运行它时必须读取每个字符。

好的，这就是我在谈论取消循环的内容。

我所说的任何在运行时编译和/或通过 VM 运行的语言也都是解释性的，例如；PHP、JavaScript、BASH、Ruby、Perl 等

不知道我上面写的有没有。但这就是我的意思，在那些你必须逐字节读取输入然后将其转换成你可以使用的东西的语言中。我也知道您可以采取其他措施来加快速度，但这是我能想到的最简单的解释方式。

正常循环。

```
for(i=0;i<10;++i){
    if(something==3){
        do_something;
    }
    else{
        do_something_else;
} 
```

未切换循环（根据我从clang文档中收集到的内容（gcc的废话）。

```
if(something=3){
 for(i=0;i<10;++i){
    do_something;
}
else{
 for(i=0;i<10;++i){
   do_something_else
 }
} 
```

上面的代码应该是他们所做的。

# html - div的高度随缩放级别而变化

> ID：11387267
> 
> 赞同：4
> 
> 时间：2012-07-08T22:34:36.323
> 
> 标签：html, css, scaling

在我的网站主页上，我有两列，每列包含不同数量的元素。两列的高度加起来为 410px，但是，根据浏览器的缩放级别，两列的底部可能不会对齐。它似乎在 Chrome 中最为明显，而在 Firefox 中根本没有出现。

我能做些什么来解决这个问题吗？

有问题的页面是[http://goo.gl/mHU3A](http://goo.gl/mHU3A)，页面底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:38:06.470

我不确定 Chrome 为什么要这样做（正如你所说，高度都等于 410px），但你可以做的一个“hack”是添加以下代码（到你的 css）：

```
.test-home { position: relative; }
.test-home .home-new-tutorial-all {
    position: absolute; /* forces it to sit in a specified position */
    bottom: 0; /* don't worry about a left/right, as all we're concerned with is making it sit at the bottom */
    width: 100%; /* required, otherwise it fits to the text-width only */
} 
```

这将强制`.home-new-tutorial-all`班级坐在底部，无论浏览器处于何种缩放状态。它使“Scripting for After Effects Pt 2”和本教程链接之间的边距/空间增加了一点，但鉴于此链接的风格不同，您可以说这是故意的。

抱歉，这不是 Chrome 行为异常的原因，但希望此修复程序适合 :)

祝你好运！

# android - listview 内存不足异常，但没有内存泄漏？

> ID：11387269
> 
> 赞同：3
> 
> 时间：2012-07-08T22:35:05.760
> 
> 标签：android, garbage-collection, android-3.0-honeycomb, out-of-memory, android-4.0-ice-cream-sandwich

在 Honeycomb 之后，Google 表示位图由堆管理（在[此处](http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html)讨论），因此如果不再可访问位图，我们可以假设 GC 处理并释放它。

我想创建一个演示来展示 listView 讲座所展示的想法的效率（来自[这里](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)），所以我制作了一个小应用程序。该应用程序让用户按下一个按钮，然后列表视图一直滚动到底部，同时它有 10000 个项目，它们的内容是 android.R.drawable 项目（名称和图像）。

出于某种原因，即使我没有保存任何图像，我也会内存不足，所以我的问题是：怎么可能？我错过了什么？

我已经在 Galaxy S III 上测试了该应用程序，但如果我使用本机版本的适配器，我会不断出现内存不足的异常。我不明白为什么会发生，因为我不存储任何东西。

这是代码：

```
public class MainActivity extends Activity
  {
  private static final int LISTVIEW_ITEMS =10000;
  long                     _startTime;
  boolean                  _isMeasuring   =false;

  @Override
  public void onCreate(final Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final ListView listView=(ListView)findViewById(R.id.listView);
    final Field[] fields=android.R.drawable.class.getFields();
    final LayoutInflater inflater=(LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // listen to scroll events , so that we publish the time only when scrolled to the bottom:
    listView.setOnScrollListener(new OnScrollListener()
      {
        @Override
        public void onScrollStateChanged(final AbsListView view,final int scrollState)
          {
          if(!_isMeasuring||view.getLastVisiblePosition()!=view.getCount()-1||scrollState!=OnScrollListener.SCROLL_STATE_IDLE)
            return;
          final long stopTime=System.currentTimeMillis();
          final long scrollingTime=stopTime-_startTime;
          Toast.makeText(MainActivity.this,"time taken to scroll to bottom:"+scrollingTime,Toast.LENGTH_SHORT).show();
          _isMeasuring=false;
          }

        @Override
        public void onScroll(final AbsListView view,final int firstVisibleItem,final int visibleItemCount,final int totalItemCount)
          {}
      });
    // button click handling (start measuring) :
    findViewById(R.id.button).setOnClickListener(new OnClickListener()
      {
        @Override
        public void onClick(final View v)
          {
          if(_isMeasuring)
            return;
          final int itemsCount=listView.getAdapter().getCount();
          listView.smoothScrollToPositionFromTop(itemsCount-1,0,1000);
          _startTime=System.currentTimeMillis();
          _isMeasuring=true;
          }
      });
    // creating the adapter of the listView
    listView.setAdapter(new BaseAdapter()
      {
        @Override
        public View getView(final int position,final View convertView,final ViewGroup parent)
          {
          final Field field=fields[position%fields.length];
          // final View inflatedView=convertView!=null ? convertView : inflater.inflate(R.layout.list_item,null);
          final View inflatedView=inflater.inflate(R.layout.list_item,null);
          final ImageView imageView=(ImageView)inflatedView.findViewById(R.id.imageView);
          final TextView textView=(TextView)inflatedView.findViewById(R.id.textView);
          textView.setText(field.getName());
          try
            {
            final int imageResId=field.getInt(null);
            imageView.setImageResource(imageResId);
            }
          catch(final Exception e)
            {}
          return inflatedView;
          }

        @Override
        public long getItemId(final int position)
          {
          return 0;
          }

        @Override
        public Object getItem(final int position)
          {
          return null;
          }

        @Override
        public int getCount()
          {
          return LISTVIEW_ITEMS;
          }
      });
    }
  } 
```

* * *

@all：我知道这段代码有优化（使用 convertView 和 viewHolder 设计模式），因为我提到了 Google 制作的 listView 的视频。相信我，我知道什么是更好的；这是代码的重点。

上面的代码应该表明最好使用您（和视频）显示的内容。但首先我需要展示幼稚的方式；即使是幼稚的方式也应该仍然有效，因为我不存储位图或视图，并且因为谷歌已经完成了相同的测试（因此他们得到了性能比较图）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T02:15:34.580

[蒂姆](https://stackoverflow.com/questions/11387269/android-out-of-memory-but-on-android-4-and-no-memory-leaks#comment15010689_11387269)的评论很到位。您的代码没有`convertView`在其`BaseAdapter.getView()`方法中使用并且每次都不断膨胀新视图这一事实是它最终会耗尽内存的主要原因。

上次我检查时，`ListView`会将方法返回的所有视图保留在其内部“回收站”容器中，只有在从其窗口分离`getView()`时才会清除该容器。`ListView`这个“回收站”是它如何生产所有这些并在适当的时候`convertView`将其送回的方式。`getView()`

作为测试，您甚至可以注释掉将图像分配给视图的代码部分：

```
 // final int imageResId = field.getInt(null);
                // imageView.setImageResource(imageResId); 
```

而且您仍然会在某一时刻遇到内存分配失败:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T04:37:11.087

您的代码有两点：

1.  正如之前的答案所提到的，您正在尝试创建这么多新对象，这就是问题的主要原因`OutOfMemory`。

2.  您的代码效率不足以连续加载所有对象（例如向上/向下滑动以进行滚动），嗯，它是滞后的。

这里提示解决这两个常见问题：

```
Field field = fields[position % fields.length];
View v = convertView;
ViewHolder holder = null;

if (v == null) {
    v = inflater.inflate(R.layout.list_item,null);
    holder = new ViewHolder();
    holder.Image = (ImageView) inflatedView.findViewById(R.id.imageView);
    holder.Text = (TextView)inflatedView.findViewById(R.id.textView);
    v.setTag(holder);
} else {
    holder = (ViewHolder) v.getTag();
}
return v; 
```

这是简单`ViewHolder`的高效`ListView`。

```
static class ViewHolder {   
    ImageView Image;
    TextView  Text;
} 
```

非常简单但非常有效的编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-22T19:32:58.913

当我用太多图像膨胀我的列表视图时，我已经收到 oom 错误很长时间了（即使图像已经被压缩）

在清单中使用它可能会解决您的问题：

```
android:largeHeap="true" 
```

这将为您的应用程序提供大量内存供您使用。

> 仅当您想要的输出没有替代方法时才使用它！

要了解使用 largeHeap 的缺点，请查看此[答案](https://stackoverflow.com/questions/27396892/what-are-advantages-of-setting-largeheap-to-true)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T08:40:45.673

您捕获的异常 e，但 OutOfMemoryError 是错误，而不是异常。所以如果你想赶上 OutOfMemory 你可以写类似

```
catch(Throwable e){} 
```

或者

```
catch(OutOfMemoryError e){} 
```

# php - XPath - 使用 php xpath 从父级获取文本

> ID：11387270
> 
> 赞同：2
> 
> 时间：2012-07-08T22:35:17.180
> 
> 标签：php, html, xml, xpath

我正在尝试从特定节点的父节点获取文本。例如：

```
<td colspan="1" rowspan="1">
  <span>
    <a class="info" shape="rect" 
             rel="empLinkData" href="/employee.htm?id=8468524">
        Jack Johnson
    </a>
  </span>
   (*)&nbsp;
</td> 
```

我可以使用以下方法成功处理锚标记：

```
$xNodes = $xpath->query('//a[@class="info"][@rel="empLinkData"]');

// $xNodes contains employee ids and names
foreach ($xNodes as $xNode)
{
    $sLinktext = @$xNode->firstChild->data;
    $sLinkurl = 'http://www.company.com' . $xNode->getAttribute('href');

    if ($sLinktext != '' && $sLinkurl != '')
    {
        echo '<li><a href="' . $sLinkurl . '">' .
                $sLinktext . '</a></li>';
    }
} 
```

现在，我需要从`<td>`标签中检索文本（在这种情况下，`(*)&nbsp;`在 span 标签关闭后立即出现），但我似乎无法正确引用它。

对我来说似乎最有意义的 xpath 是：

```
$xNodes = $xpath->query('//a[@class="info"]
          [@rel="empLinkData"]/ancestor::*'); 
```

但它正在从嵌套在此代码上方的其他地方检索错误的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:51:06.033

没有必要退回到树上。相反，直接选择`td`包含相关元素的：

```
//td[descendant::a[@class="info"][@rel="empLinkData"]]/text() 
```

**编辑：**正如@Dimitre 正确指出的那样，这会选择所有文本子项。你`td`有两个这样的节点：前面的纯空格文本节点和后面的`span`文本节点。如果您只想要第二个文本节点，请使用：

```
//td[descendant::a[@class="info"][@rel="empLinkData"]]/text()[2] 
```

或者：

```
//td[descendant::a[@class="info"][@rel="empLinkData"]]/text()[last()] 
```

如您所见，生成的表达式基本相同，但您确实需要定位正确的文本节点（如果您只想要一个）。另请注意，如果目标文本确实在 a 中，`td`那么直接定位该元素类型（不带通配符）会更安全。由于这是 HTML，您的实际文档几乎肯定包含其他几个元素，包括您可能不想定位的多个其他锚点。

**示例 PHP：**

```
$nodes = $xpath->query(
    '//td[descendant::a[@class="info"][@rel="empLinkData"]]/text()[last()]');
echo "[". $nodes->item(0)->nodeValue . "]"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:42:48.453

最深的 td 祖先：

```
//a[@class="info"][@rel="empLinkData"]/ancestor::td[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T23:52:55.690

**使用**：

```
//*[a[@class="info"][@rel="empLinkData"]]/following-sibling::text()[1] 
```

这会选择一个文本节点——正是想要的。

**请注意 XPath 表达式，如**：

```
//td[descendant::a[@class="info"][@rel="empLinkData"]]/text() 
```

**选择多个文本节点**——不仅是想要的文本节点。

# c++ - 将 unordered_map 的 unique_ptr 移动到另一个

> ID：11387272
> 
> 赞同：0
> 
> 时间：2012-07-08T22:35:32.920
> 
> 标签：c++, c++11, move, unordered-map, unique-ptr

我正在尝试将 unique_ptr 的 unordered_map 移动到另一个地图中，但得到下面的编译错误。

```
#include <memory>
#include <unordered_map>
#include <string>

int main()
{
    std::unordered_map<int, std::unique_ptr<int>> aMap;
    std::unordered_map<int, std::unique_ptr<int>> bMap;

    std::unique_ptr<int> ptr(new int);
    *ptr = 10;
    aMap.insert(std::make_pair(0, std::move(ptr)));

    std::move(aMap.begin(), aMap.end(), bMap.end());

    return 0;
}

1>------ Build started: Project: Testing, Configuration: Debug Win32 ------
1>Build started 08.07.2012 23:54:16.
1>InitializeBuildStatus:
1>  Creating "Debug\Testing.unsuccessfulbuild" because "AlwaysCreate" was specified.
1>ClCompile:
1>  main.cpp
1>d:\progs\visual studio 2010\vc\include\utility(260): error C2166: l-value specifies const object
1>          d:\progs\visual studio 2010\vc\include\utility(259) : while compiling     class template member function 'std::pair<_Ty1,_Ty2> &std::pair<_Ty1,_Ty2>::operator =(std::pair<_Ty1,_Ty2> &&)'
1>          with
1>          [
1>              _Ty1=const int,
1>              _Ty2=std::unique_ptr<int>
1>          ]
1>          d:\coding\testing\main.cpp(12) : see reference to class template instantiation 'std::pair<_Ty1,_Ty2>' being compiled
1>          with
1>          [
1>              _Ty1=const int,
1>              _Ty2=std::unique_ptr<int>
1>          ]
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.64
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:02:48.747

我认为这是一个问题，您无法将元素添加到地图或通过复制到末尾来设置。一个更简单的例子来说明这一点

```
std::set<int> aSet;
std::set<int> bSet;
aSet.insert(0);

std::move(aSet.begin(), aSet.end(), bSet.end()); 
```

为了解决这个问题，你需要一个 insert_iterator，所以

```
std::move(aSet.begin(), aSet.end(), inserter(bSet, bSet.begin())); 
```

或者

```
std::move(aMap.begin(), aMap.end(), inserter(bMap, bMap.begin())); 
```

在内部，插入迭代器将尝试在传入的容器中调用'insert'，因此它不会尝试执行'*(bMap.end()) = *(aMap.begin())'，而是调用'bMap。 insert(pos, *(aMap.begin()))'，尽管 pos 在这种情况下并不是非常重要。

# android - 有没有办法接受多个视图 ID 作为 xml 中的参数？

> ID：11387273
> 
> 赞同：0
> 
> 时间：2012-07-08T22:35:38.817
> 
> 标签：android

所以我写了一个“多滑动抽屉”小部件，它的工作原理与 Slidingdrawer 类似，只是它最多允许 4 个“抽屉”。但是，我真的更喜欢制作这个“n-drawers”，但我遇到的问题是 xml 中的参数。目前，我通过以下方式传递句柄/内容：

```
ns:handle1="@+id/slideHandleButton1"
ns:content1="@+id/contentLayout1"
ns:handle2="@+id/slideHandleButton2"
ns:content2="@+id/contentLayout2"
ns:handle3="@+id/slideHandleButton3"
ns:content3="@+id/contentLayout3" 
```

但显然这里有一些冗余。我原本以为我可以只使用'getChild（i）'来循环遍历子元素并在内部添加它们，但我的理解是getChild方法以视觉顺序返回子元素，而不是它们在xml中添加的顺序。所以我现在想做的是：

```
ns:handles="@id/contentLayout1,@id/contentLayout2,@id/contentLayout13" 
```

这将允许任意数量的抽屉。这可能吗？或者这个问题还有其他好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:57:57.917

您可以将您的小部件定义为具有参数（例如`handles`和`contents`），每个参数都引用一个数组。您可以使用标准符号定义数组：

**资源/值/arrays.xml**

```
<array name="my_widget_layouts">
    <item>@layout/contentLayout1</item>
    <item>@layout/contentLayout2</item>
    . . .
</array>

<array name="my_widget_buttons">
    <item>@+id/slideHandleButton1</item>
    <item>@+id/slideHandleButton2</item>
    . . .
</array> 
```

**在一些布局内：**

```
<com.example.MyWidget
    ns:contents="@array/my_widget_layouts"
    ns:handles="@array/my_widget/buttons"
    . . .
    /> 
```

然后在构建小部件时的 Java 代码中：

```
MyWidget(Context context, AttributeSet attrs) {
    Resources res = getResources();
    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.MyWidget);
    // Get the ID of the array containing the content layout IDs for this widget
    int contentsId = a.getResourceId(R.styleable.MyWidget_contents, 0);
    if (contentsId > 0) {
        // array of layouts specified
        TypedArray ta = res.obtainTypedArray(contentsId);
        int n = ca.length();
        mContentLayoutIds = new int[n];
        for (int i = 0; i < n; ++i) {
            mContentLayoutIds[i] = ta.getResourceId(i, 0);
            // error check: should never be 0
        }
        ta.recycle();
    }
    // similar code to retrieve the button IDs
    if (mContentLayoutIds.length != mHandleIds.length) {
        // content layout and button arrays not same length: throw an exception
    }
    . . .
    a.recycle();
    . . .
} 
```

# iphone - 如何检测 youtube 已完成在 iphone 上播放？

> ID：11387278
> 
> 赞同：0
> 
> 时间：2012-07-08T22:36:53.700
> 
> 标签：iphone, ios

如何检测 youtube 已完成在 iphone 上播放？我看不到 youtube 在另一个应用程序或网络 safari 中的播放情况如何。

但是我已经看到一些应用程序可以一个接一个地播放 youtube 视频，所以应该是这样，但是如何呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:00:18.777

如果您正在谈论将电影集成到您的应用程序中（我相信您可以通过将视频 URI 加载到 中来做到这一点`MPMoviePlayerController`），您会听`MPMoviePlayerPlaybackDidFinishNotification`. 如果你澄清你的问题，我可能知道另一种方法。

# javascript - 让 nicedit 允许 iframe

> ID：11387279
> 
> 赞同：1
> 
> 时间：2012-07-08T22:37:01.000
> 
> 标签：javascript, jquery, replace

如果用户键入：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/8FozVVP72Qk" frameborder="0" allowfullscreen></iframe> 
```

它成为了：

```
&lt;iframe width="420" height="315" src="http://www.youtube.com/embed/8FozVVP72Qk" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt; 
```

代码被显示而不是被解释。

所以只要 nicedit 文档是旧的并且不是很完整，我想我只是替换那些值，

我可以使用 replace() 函数，但是有这种格式转换的函数吗？

这就是我获得价值的方式：

```
$('body').on('submit','#new_blog',function(e){
   e.preventDefault();
   var textarea = $(this).find('textarea').val();
   var valueWithIframeSupport = textarea.replace('&lt;','<').replace('&gt;','>');
   /* This is what i had in mind but itdoesnt really seems an option*/
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:46:17.097

尝试[`html()`](http://api.jquery.com/html/)方法：

```
var s = '&lt;iframe width="420" height="315" src="http://www.youtube.com/embed/8FozVVP72Qk" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt';
$('#elem').html(s) 
```

[http://jsfiddle.net/4tW2u/3/](http://jsfiddle.net/4tW2u/3/)

# php - PHP 同时更新两个表

> ID：11387282
> 
> 赞同：0
> 
> 时间：2012-07-08T22:37:13.030
> 
> 标签：php, mysql

我有两张表，一张称为 admin，另一张称为 Permission。

*   Admin 表包含具有以下信息的用户列表（ID、用户名、密码）
*   权限表有以下信息（user_id、permission_name、user）

当我编辑用户时，我会在同一页面上显示所有信息，包括权限。

当我单击编辑时，我可以更新信息，但是因为如果一个表得到更新，我会收到错误消息，即使表已成功更新。

```
$sql = " UPDATE admin SET username='test', password='test' WHERE id=1;";
$result = mysql_query($sql, $connection);

if( mysql_affected_rows( $result ) == 1 )
{
   $sql = " UPDATE permission SET permission_name ='add_user', user='admin' WHERE user_id=1;";
   $result = mysql_query($sql, $connection);
   echo 'successfully';
}

else
{
   echo 'some error';
} 
```

当我只是不想更改用户的权限时，它确实给了我错误，因为我没有更改任何内容。但如果我对管理表进行更改，一切正常。

如果一个或两个都已成功更新，我如何显示成功消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T22:44:40.577

您可以将两个表连接在一起以同时更新它们：

```
UPDATE admin a
INNER JOIN permission b ON a.id = b.user_id
SET
    a.username = 'test',
    a.password = 'test',
    b.permission_name = 'add_user',
    b.user = 'admin'
WHERE a.id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:45:05.290

```
<?php

$success = true;

$sql = " UPDATE admin SET username='test', password='test' WHERE id=1;";
$result = mysql_query($sql, $connection);

if(!mysql_affected_rows( $result ))
   $success = false;

$sql = " UPDATE permission SET permission_name ='add_user', user='admin' WHERE user_id=1;";
$result = mysql_query($sql, $connection);

if(!mysql_affected_rows( $result ))
   $success = false;

echo ($success ? 'Success' : 'Error'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T22:53:13.783

在这种情况下，Zane Bien 的答案是您的最佳选择，但是对于您不能只组合查询的情况，您应该检查`(!$result)`而不是`(mysql_affected_rows($result) == 1)`，因为您正在尝试检查是否发生错误（这将导致 mysql_query 返回 false )，而不是表中是否实际更新了任何行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T23:16:13.480

存储过程怎么样：

```
DELIMITER $$
CREATED PROCEDURE DoUpdate(TheID INT, TheUser VARCHAR(255), ThePassword VARCHAR(255), ThePermission VARCHAR(255), ThePermissionUser VARCHAR(255))
BEGIN

    UPDATE admin 
    SET username= TheUser
        , password= ThePassword
    WHERE id = TheID;

    IF ROW_COUNT() = 1 THEN
        UPDATE permission 
        SET permission_name = ThePermission
            , user = ThePermissionUser
        WHERE user_id = TheID;
    END IF;
END $$ 
```

然后：

```
CALL DoUpdate(1, 'test', 'test', 'add_user', 'admin'); 
```

# asp.net-mvc-3 - 如何更好地利用实体模型验证？

> ID：11387284
> 
> 赞同：2
> 
> 时间：2012-07-08T22:37:21.767
> 
> 标签：asp.net-mvc-3, entity-framework

我目前有：

```
@Html.EditorFor(model => model.PurchasePrice) 
```

我想将其拆分为 2 个由小数分隔的单独字段（显然用于价格输入）。但是，如果我使用基本文本框来执行此操作，我将失去利用 ASP.NET 验证的能力。

有没有办法在 Razor 中或通过使用属性来做到这一点，以便我能够针对我的实体模型保留 JS 和服务器端验证？

我可以通过在视图模型中创建自己的函数来轻松地在其他地方做到这一点，但我是 MVC3 的新手，并不完全确定这是否是最佳路线或是否有更简单的方法。

编辑：

这是我正在考虑的一种方向，我不完全理解它是如何工作的。

我设置了 2 个字段，1 as`ppDollar`和 1 as `ppCents`。在控制器中我有：

```
modelname.PurchasePrice = Request["ppDollar"] + Request["ppCent"]; 
```

但是，我可以看看它并告诉它行不通。所以，我想问题真的是如何根据实体模型验证用户输入，以及如何更好地利用内置功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:55:54.863

您可以为特定类型创建自定义编辑器，这些类型由`EditorFor`. 您可以在网上找到很多关于如何做到这一点的示例，其中大多数都专注于自定义`DateTime`编辑器，但同样的想法适用于任何类型。快速搜索中的一个示例：

[http://buildstarted.com/2010/09/10/overriding-displayfor-and-editorfor-to-create-custom-outputs-for-mvc/](http://buildstarted.com/2010/09/10/overriding-displayfor-and-editorfor-to-create-custom-outputs-for-mvc/)

简而言之，过程是：

*   创建一个局部视图模板，放置在`Views\Shared\EditorTemplates`文件夹中，名称与类型相同（例如`Decimal.cshtml`）。
*   视图应使用您要显示的类型作为其模型：`@inherits System.Web.Mvc.WebViewPage<System.Decimal>`
*   使用某些字段命名约定或其他方式，使视图显示您想要的任何内容。
*   您还可以通过适当的`EditorFor`重载传递 HTML 属性，通过属性在模板中引用`ViewData.ModelMetadata.AdditionalValues`。

需要注意的一点：一旦定义了编辑器模板，它将用于*每次*调用`EditorFor`. `EditorTemplates`您可以通过将文件夹移动到适当的视图子文件夹而不是共享的子文件夹来将它们限定到特定的控制器。

# magento - Magento - 如何为产品包显示相同的图像？

> ID：11387286
> 
> 赞同：0
> 
> 时间：2012-07-08T22:37:33.107
> 
> 标签：magento

我按照 Magento 网站上的说明创建了一个捆绑产品，以使其具有多种尺寸。见附图： ![在此处输入图像描述](../Images/69cb5b222b53d1f0c0a38204352f830b.png)

我假设当我进行快速简单的产品创建时，它不会自动添加相同的图像。但由于该选项仅适用于大小，因此图像应该相同。问题是，当我转到购物车或结帐页面或任何其他页面时，没有产品图片。我的产品与尺寸相结合，超过 230 种产品，因此重新上传所有图像是一场噩梦。

问题是，我怎样才能让系统为所有不同的尺寸使用相同的图像？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:36:49.183

我对可配置产品也有类似的问题。我希望将分配给主要产品的图像也添加到所有选项中。所以我创建了一个扩展并观察了 catalog_product_save_after 事件。然后我在我的观察者中添加了这种代码：

```
 $product = $observer->getEvent()->getProduct();         
if ($product->getTypeId() == Mage_Catalog_Model_Product_Type::TYPE_CONFIGURABLE)
        {
            $main_image = $product->getImage();
            if($main_image != "no_selection")
            {
                $productTypeIns = $product->getTypeInstance(true);
                $childIds = $productTypeIns->getChildrenIds($product->getId());
                $importDir = Mage::getBaseDir('media') . DS . 'catalog/product';
                foreach ($childIds as $childId) 
                {
                    foreach($childId as $_childId) 
                    {
                        $childProduct = Mage::getModel('catalog/product')->load($_childId);  //You get your child products here
                        if ($childProduct->getImage()=="no_selection")
                        {
                            $childProduct->addImageToMediaGallery($importDir.$main_image,array ('image','small_image','thumbnail'),false,false);
                            $childProduct->save();
                        }
                    }           
                }
            }
        } 
```

# php - 索引数组可以用作关联数组吗？

> ID：11387288
> 
> 赞同：0
> 
> 时间：2012-07-08T22:37:51.470
> 
> 标签：php, arrays

我知道在 PHP 中的索引数组看起来像：

```
$array = ("hello", "world") 
```

与如下所示的关联数组相同：

```
$array = (0 => "hello", 1 => "world"); 
```

所以我的问题是这样的代码是否有效：

```
 $hello = $array[$array["hello"]]; 
```

我的想法是它转化为

```
$hello = $array[0] 
```

，这将等于

```
$hello = "hello" 
```

. 换句话说，将

```
$array["hello"] 
```

等于0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:40:41.203

不，您不能立即通过其值获取某个数组元素的键......除非您使用[array_flip](http://php.net/manual/en/function.array-flip.php)切换键和值：

```
$arr = array('hello', 'world');
$arr = array_flip($arr);
print $arr['hello']; // 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:09:24.737

让我们梳理一下思路：

```
$array = ("hello", "world") // This is implicitly indexed by integer. 
```

是相同的：

```
$array = (0 => "hello", 1 => "world"); // Explicit indexing. 
```

您可以通过执行验证`print_r($array)`；在任何一种情况下，输出都会显示一个索引数组。PHP 数组都是关联的。即使您没有指定键，数组中的值也会按整数索引号排序。

现在让我们来看看：

所以我的问题是这样的代码是否有效：

```
 $hello = $array[$array["hello"]]; 
```

这是代码将中断的地方。为什么？

`$array["hello"]`不是有效值。这引用的是“数组列表在索引“hello”处的值。

但是，`array("hello", "world")`没有“hello”的索引键。相反，它有一个**值**“hello”，它的**键**索引为 0。

确保阅读[PHP 数组](http://php.net/manual/en/language.types.array.php)并理解：

1.  PHP 数组都是关联的；键可以是字符串，或者如果没有明确设置，将是整数。
2.  关联数组采用键 => 值对的形式。如果你有一个键，你可以找到与之关联的值。
3.  当尝试从 PHP 数组中获取值时，语法是：`$array['key']`或者在多维`$array['firstlevelkey']['secondlevelkey']`等情况下。返回的值将是该特定键处的键 => 值对的值。

我希望这是有帮助的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T22:40:47.303

不，因为“hello”不是 $array 中的有效键。

*您可以使用 array_key_exists( key* ,*array*)检查密钥是否存在

# objective-c - 如何使用 Cocotron 在 Xcode 中设置 Windows 构建？

> ID：11387292
> 
> 赞同：5
> 
> 时间：2012-07-08T22:39:02.063
> 
> 标签：objective-c, windows, xcode, cocoa, cocotron

我已经设置了 Cocotron，我已经为 Windows 编译了 Foundation，并且我已经设置了一个使用该 Foundation 的项目。不过，我无法为 Windows 编译该项目，也找不到这样做的指南。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:33:07.267

从一个正常工作的 Mac 项目开始。复制 Mac 目标并将其名称更改为 Windows，并按照此处所述更改构建设置：http: [//www.cocotron.org/Tools/Build_Settings/?path= Tools/Build_Settings](http://www.cocotron.org/Tools/Build_Settings/?path=Tools/Build_Settings)

这实际上非常容易。请注意，如果您使用 中的脚本`Cocotron/1.0/bin/retargetBundle`，您甚至不需要弄清楚如何安装 Foundation DLL。

确保将 Cocotron 的 Foundation.framework 添加到您的项目中：Cocoa.framework 实际上并没有像在 OS X 上那样正确包含 Foundation 和 AppKit。

# java - 如何回滚@AfterClass 中的数据库更改？

> ID：11387294
> 
> 赞同：3
> 
> 时间：2012-07-08T22:39:10.767
> 
> 标签：java, junit, rollback

我知道如何配置 Spring/JUnit 以在每个测试用例后回滚。我所追求的是一种为所有测试用例启动和回滚一个事务的方法。

我正在使用 @BeforeClass 为几个测试用例准备我的 HSQL DB。然后我想在@AfterClass 中的所有测试用例结束后回滚更改。

实现此回滚的最佳方法是什么？

这是我的代码示例：

```
@BeforeClass
public static void setupDB(){
ApplicationContext context = new ClassPathXmlApplicationContext(
        "classpath:/spring/applicationContext-services-test.xml");
//- get beans and insert some records to the DB
...
}

@AfterClass
public static void cleanUp(){
   ??? what should go here?
} 
```

关于在 AfterClass 中进行回滚的最佳方法有什么想法吗？

谢谢大家..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T22:52:10.973

如果您可以在每次测试后回滚并使用 Spring，我的项目中的以下代码段可能会对您有所帮助：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:/net/sukharevd/shopzilla/model/application-context-dao.xml" })
@TestExecutionListeners(DependencyInjectionTestExecutionListener.class)
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
@Transactional
public class HibernateCategoryDaoTest extends AbstractTransactionalJUnit4SpringContextTests { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T22:53:14.100

您可能不想在课后进行回滚，而是在每次测试之后进行。不能保证每次测试都以相同的顺序运行，因此您可能会得到不同的结果。单元测试应该被隔离。

您可以使用 spring 测试运行器来注释您的类和回滚事务

```
@RunWith(SpringJUnit4ClassRunner.class)
@TransactionConfiguration(defaultRollback=true)
public static class YourTestClass {

    @Test
    @Transactional
    public void aTest() {
        // do some db stuff that will get rolled back at the end of the test
    }

} 
```

一般来说，虽然你也应该尽量避免在单元测试中碰到真实的数据库。命中数据库的测试通常是集成级别的测试（或者甚至更粗粒度的测试，如验收测试）。DBUnit [http://www.dbunit.org/](http://www.dbunit.org/)框架用于为单元测试存根数据库，因此您不需要使用真正的数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T23:12:53.490

我设法仅使用 Spring/JUnit（不使用 DBUnit）解决了这个问题。简而言之，解决方案是调用`transactionManager.getTransaction(def).setRollbackOnly();`@BeforeClass。

让我先解释一下我想做什么。我的主要动机是围绕这个流程：

1\. 启动事务
2\. 插入负载测试数据
3\. 在同一个测试数据上运行多个测试用例
4\. 回滚测试数据。

由于我在@BeforeClass 中构建负载测试数据，因此我希望在@AfterClass 中回滚。这似乎是不必要的，因为我可以简单地指示事务仅在我的@BeforeClass 中回滚！

所以我是这样做的：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:/spring/applicationContext-services-test.xml")
@TestExecutionListeners(inheritListeners = false, listeners = { SpecialDependencyInjectionTestExcecutionListener.class })
@TransactionConfiguration(defaultRollback = true)
@Transactional
public class loadTest {
...
private static HibernateTransactionManager transactionManager;
...

@BeforeClass
public static void setupDB() {
  //- set the transaction to rollback only. We have to get a new transaction for that.
  DefaultTransactionDefinition def = new DefaultTransactionDefinition();
  def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);
  transactionManager.getTransaction(def).setRollbackOnly();
  ...
  //- start loading the data using the injected services.
  ...
} 
```

这有助于在课程结束时回滚。

PS 这`SpecialDependencyInjectionTestExcecutionListener`是`DependencyInjectionTestExecutionListener`我用来覆盖 beforeTestClass 以强制在调用 @BeforeClass 之前加载 application.context 的扩展。归功于 Dmitriy 强调了这个 Listener，这是解决我脑海中另一个问题的提示。

感谢所有帮助突出显示和建议的人，这些人共同引导我找到了这个解决方案。

达菲尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T03:14:28.927

假设您没有使用 Spring。（因为使用 Spring，这里的其他答案更好。）然后您将有三个选择：

1.  使用[dbunit](http://www.dbunit.org/)为您处理数据加载/清理。（该网站目前已关闭，但如果您谷歌它，您可以看到一些教程。）
2.  为手动更新创建手动删除
3.  在您的数据库中创建一个回滚点作为设置的第一步。这是[在 Oracle 中执行此操作的方法。](http://www.symantec.com/business/support/index?page=content&id=HOWTO74599#uxrt-60_v72107532)

# google-apps-script - 将脚本从电子表格迁移到站点

> ID：11387302
> 
> 赞同：0
> 
> 时间：2012-07-08T22:41:18.110
> 
> 标签：google-apps-script

我想“迁移”到网站页面的各种电子表格中有一些脚本。我知道我需要做一些返工，但我想知道除了“复制/粘贴”之外是否还有其他方法。

有人有任何“最佳实践”可以分享吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:03:20.817

不是真的，复制粘贴**是**唯一的方法，并且可能仍然是您的解决方案。但是有一些闪亮的新功能，例如拥有独立的脚本或将其作为更适合您的库共享。

查看最近的[发行说明](https://developers.google.com/apps-script/release_notes)和[博客文章](http://googleappsdeveloper.blogspot.com.br/2012/06/big-updates-for-apps-script.html)。

# macos - 在文件名中转换 unix 时间戳

> ID：11387304
> 
> 赞同：0
> 
> 时间：2012-07-08T22:41:36.883
> 
> 标签：macos, terminal, applescript, unix-timestamp

我使用 MacOSX Lion，但我对 Windows 的解决方案也很满意，因为我在虚拟机中有 Windows XP：

我有数百个文件名中带有unix时间戳的文件，如下所示：

```
1341131403_-_db123456.sql.gz
1341390599_-_db123456.sql.gz
1341563401_-_db123456.sql.gz 
```

我希望将时间戳转换为可读时间戳，并使用该可读时间戳重命名文件，如下所示：

```
2012-07-01 08-30-03.sql.gz
2012-07-04 08-29-59.sql.gz
2012-07-06 08-30-01.sql.gz 
```

我花了几个小时在一个 applescript 解决方案上，但没有成功：

```
on open (the_input)
tell application "Finder"
set the_files to every item of the_input
set the_count to count of the_files
repeat with i from 1 to the_count
set current_file to item i of the_files
set old_name to (name of current_file) as string
set old_name to trim_line(old_name, "_-_db123456\. sql. gz", 1)
set new_name to (result of uts_convert(old_name)) as string
set the name of current_file to (new_name & file type of current_file)
end repeat
end tell
end open

on uts_convert(input)
set shellcommand1 to "date -r "
set shellcommand2 to " \"+%Y-%m-%d %H-%M\""
set the_output to do shell script (shellcommand1 & input & shellcommand2)
return the_output
end uts_convert 
```

任何帮助表示赞赏！我不在乎它是用 applescript 还是简单的终端命令或其他什么来完成的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:25:45.860

这是一个简单的 Perl 解决方案：

```
opendir($dir, ".");
while ($f = readdir($dir)) {
    if ($f =~ m/^(\d+)_-_db\d+\.sql\.gz/) {
        ($s, $i, $h, $d, $m, $y) = gmtime($1);
        rename($f, sprintf("%4d-%02d-%02d %02d-%02d-%02d.sql.gz", $y + 1900, $m + 1, $d, $h, $i, $s));
    }
}
closedir($dir); 
```

将其保存到 renamethings.pl 或与文件位于同一文件夹中的任何内容并运行：

```
perl renamethings.pl 
```

首先对文件进行备份可能是谨慎的做法，以防万一出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:03:48.223

尝试：

```
tell application "Finder" to set theFiles to every file of folder ((path to desktop) & "testfolder" as text)
set {TID, text item delimiters} to {text item delimiters, "_-_"}
repeat with aFile in theFiles
    set timestamp to text item 1 of (name of aFile as text)
    set newName to do shell script "date -r " & timestamp & " '+%Y-%m-%d %H-%M-%S'"
    set aFile's name to (newName & ".sql.gz")
end repeat
set text item delimiters to TID 
```

# javascript - 使用 Django 和 Javascript 访问 Twitter

> ID：11387310
> 
> 赞同：0
> 
> 时间：2012-07-08T22:43:00.287
> 
> 标签：javascript, ajax, twitter, django-socialauth

[这是对我在此处](https://stackoverflow.com/questions/11379398/accessing-twitter-through-javascript)发布的上一个问题的跟进。

基本上我一直在尝试实现一种通过javascript向twitter oauth资源发送请求的方法。我有一个运行 Django 应用程序的服务器，该应用程序使用 Django-social-auth 将用户注册到 Tiwtter。获得授权后，我获得了用户 access_token 和 oauth_token_secret。

在客户端，我有一个 javascript 应用程序，它调用我的服务器来计算适当的标头，我使用[python oauth2](https://github.com/simplegeo/python-oauth2/)来完成。执行此操作的代码如下：

```
url = request.POST['url']

params = {
    'oauth_version': "1.0",
    'oauth_nonce': oauth.generate_nonce(),
    'oauth_timestamp': int(time.time()),
    }

at = social.extra_data['access_token'].split('&oauth_token=')[1]
ats = social.extra_data['access_token'].split('&oauth_token=')[0].split('oauth_token_secret=')[1]

token = oauth.Token(key=at, secret=ats)
consumer = oauth.Consumer(key=settings.TWITTER_CONSUMER_KEY, secret=settings.TWITTER_CONSUMER_SECRET)

params['oauth_token'] = token.key
params['oauth_consumer_key'] = consumer.key

req = oauth.Request(method="GET", url=url, parameters=params)

signature_method = oauth.SignatureMethod_HMAC_SHA1()
req.sign_request(signature_method, consumer, token) 
```

然后将此请求参数发送到使用以下参数调用 Twitter 的客户端：

```
$.ajax({
    url: "https://api.twitter.com/1/statuses/home_timeline.json",
    data: parameters,
    dataType: 'jsonp',
    success: function(twitter_data) {
    console.log('twitter_data = ', twdata);
    },
    error: function(jqXHR, textStatus, errorThrown) {
    console.log('err = ', textStatus);
    console.log('err = ', errorThrown);
    }
}); 
```

它会生成对资源的请求，例如：

```
https://api.twitter.com/1/statuses/home_timeline.json?callback=jQuery17107030615725088865_1341786299930&oauth_nonce=15094349&oauth_timestamp=1341785696&oauth_consumer_key=[OAUTH_CONSUMER_KEY HERE]&oauth_signature_method=HMAC-SHA1&oauth_version=1.0&oauth_token=[OAUTH_TOKEN HERE]0&oauth_signature=pQwHlKmepgtym%2Ffj%2BupCGP8mv3s%3D&page=2&include_entities=true&_=1341786306712 
```

我仍然收到 401 Unauthorized 错误。我检查了三遍代码，所以想知道我是否遗漏了什么？？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:29:23.507

对于需要身份验证的请求，您必须将身份验证参数放在名为 的 HTTP 标头`Authorization`中，而不是放在 POST 参数中。此处的 Twitter API 文档对此进行了说明：[https](https://dev.twitter.com/docs/auth/authorizing-request) ://dev.twitter.com/docs/auth/authorizing-request 。

# ios - 具有自定义字体的 iOS navigationItem 标题失去垂直居中

> ID：11387311
> 
> 赞同：1
> 
> 时间：2012-07-08T22:43:11.363
> 
> 标签：ios, text, attributes, navigationitem

是否有任何文本属性，如 line-height 或任何其他有助于`UINavigationItem`标题垂直居中的功能？设置自定义字体后，它高于标准字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:49:52.880

当然，UINavigationBar 上有一个方法名为

```
- (void)setTitleVerticalPositionAdjustment:(CGFloat)adjustment forBarMetrics:(UIBarMetrics)barMetrics 
```

# facebook-graph-api - 获取好友状态信息隐私设置

> ID：11387313
> 
> 赞同：1
> 
> 时间：2012-07-08T22:43:25.293
> 
> 标签：facebook-graph-api, facebook-fql, status, privacy

有什么方法可以获取出现在我的新闻源上的朋友状态消息的隐私设置？[当使用本文](http://facebook.stackoverflow.com/questions/10894414/getting-the-privacy-setting-of-a-status-message)中描述的图形 api 时，只有我自己的状态消息有一个包含数据的 priacy 字段，在所有其他情况下该字段为空：

`"privacy": { "value": "" }`

我还尝试使用 fql（流）检索隐私数据，但结果与上述相同。

也许我错过了任何其他返回数据或任何已知解决方法的 api 调用。如果这是不可能的，请告诉我。

# c# - 在网格视图中根据日期为项目着色 - c# asp.net webforms

> ID：11387314
> 
> 赞同：2
> 
> 时间：2012-07-08T22:43:38.987
> 
> 标签：c#, asp.net, date, gridview, colors

我在网格视图中存储了多行信息，每行都包含一个日期。这个日期是历史性的，如果它超过一岁，如果它在 10 个月到一岁之间，我想对日期进行颜色编码。

这是我目前拥有的代码：

```
 foreach(GridViewRow row in gridview.Rows){
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            DateTime datepaid = Convert.ToDateTime(DataBinder.Eval(e.Row.DataItem, "date_stored"));
            DateTime date_now = DateTime.Now;
            TextBox1.Text = (date_sub_paid - DateTime.Now).ToString();
            if ((datepaid - DateTime.Now).Days >= -365)
            {
                e.Row.Cells[4].ForeColor = System.Drawing.Color.Red;
                e.Row.Cells[4].Font.Bold = true;
            }
            else if ((datepaid - date_now).Days >= -305 && (datepaid - date_now).Days < -365)
            {
                e.Row.ForeColor = System.Drawing.Color.Yellow;
            }
            else
            {
                e.Row.ForeColor = System.Drawing.Color.Black;
            }
        }
    } 
```

我的逻辑存在缺陷，因为输出不符合预期。有人可以帮忙吗？提前致谢。

编辑：：：

我已经编辑了代码，现在看起来它可以正常工作了：

```
foreach(GridViewRow row in subtracker_gridview.Rows){
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            DateTime datepaid= Convert.ToDateTime(DataBinder.Eval(e.Row.DataItem, "DATE"));
            DateTime date_now = DateTime.Now;
            TextBox1.Text = (date_now - datepaid).Days.ToString();

            if ((date_now - datepaid).Days >= 365)
            {
                e.Row.Cells[4].ForeColor = System.Drawing.Color.Red;
                e.Row.Cells[4].Font.Bold = true;
            }
            else if ((date_now - datepaid).Days >= 335 && (date_now - datepaid).Days < 365)
            {
                e.Row.Cells[4].ForeColor = System.Drawing.Color.Gold;
                e.Row.Cells[4].Font.Bold = true;
            }
            else
            {
                e.Row.Cells[4].ForeColor = System.Drawing.Color.Green;
                e.Row.Cells[4].Font.Bold = true;
            }
        } 
```

但是，第一行似乎被忽略并且没有着色？任何想法为什么会发生这种情况？谢谢你的帮助。

编辑#2：我删除了 foreach 循环。这不是必需的，并导致第一个日期被忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:53:57.297

第二个条件永远不会成立。没有大于 -305 且小于 -365 的数字 此外，如果第二个条件的前半部分为真，则不会达到它，因为第一个条件也为真。避免混淆，现在从解析的日期中减去并处理正数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T22:54:23.473

我认为没有什么可以满足条件：

```
if ((datepaid - date_now).Days >= -305 && (datepaid - date_now).Days < -365) 
```

我想不出任何大于或等于-305 的值也小于-365。

您最好计算一次“经过的时间”，然后将其保存在局部变量中，然后多次使用该值。否则，在未来的某个时刻，有人会换成`(datepaid - date_now)`别的东西，然后在另一个地方错过它。

# html - QT HTML 解析器 (+XQuery)

> ID：11387318
> 
> 赞同：1
> 
> 时间：2012-07-08T22:44:08.343
> 
> 标签：html, qt, parsing, xpath, xquery

我正在寻找一个 QT HTML 解析器工具。我有一些 html 源代码，我想在上面使用 XQuery。我已经尝试过使用 QWebPage + QWebElement，但我不喜欢这个解决方案，因为首先它不适用于非 gui 线程（因为 QWebPage），并且因为我们不能应用 XPath 而应用 CSS Path。我尝试的另一个解决方案是 QXmlQuery，它工作得很好，但唯一的问题是如果页面上有错误，它就不起作用。例如，我尝试的第一个页面缺少 systemId（在 DOCTYPE 标记中），因此解析被中止。

我听说我们可以使用 gecko 进行解析，但我不知道如何将它与 QT 一起使用。

你有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:18:08.877

我建议您在 HTML 页面上使用 tidy，然后使用 XQuery 处理它。

Zorba 是一个提供整洁模块的 C++ XQuery 处理器。[您可以在http://www.zorba-xquery.com/html/demo#tQZu6aq1K4KoGJm9m0oIPwKRt04=](http://www.zorba-xquery.com/html/demo#tQZu6aq1K4KoGJm9m0oIPwKRt04=)找到一个实时示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:45:19.030

BaseX 有一个[QT 客户端](https://github.com/BaseXdb/basex-api/tree/master/src/main/qt)，可以使用[TagSoup](http://docs.basex.org/wiki/Parsers#HTML_Parser)来清理 HTML 文档。

很抱歉，我无法为您提供 QT 示例，因为我根本不了解 QT。

# android - NotificationManager.cancel() 不起作用：通知未删除

> ID：11387320
> 
> 赞同：7
> 
> 时间：2012-07-08T22:44:32.870
> 
> 标签：android, android-service, foreground, android-notifications, notificationmanager

我一直在尝试使用以下方法删除服务设置的持久通知：

```
startForeground(1337, notification); 
```

我用来取消它的代码：

```
NotificationManager nManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
nManager.cancel(1337);  // cancel existing service notification, doesn't take effect
nManager.cancelAll(); //surpluous, but also doesn't take effect 
```

为了澄清我这样做的原因：服务以默认的持久通知开始。当我的应用程序运行时，它需要将此通知替换为另一个。在现有通知上使用`notify()`效果很好，但是，我还需要它来显示新通知的代码文本。这就是为什么我决定删除现有通知（使用上面的代码），创建一个新通知，然后我`startForeground()`再次调用并将新通知传递给它，所以我的服务仍然存在。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T23:19:48.597

问题是您使用`startForeground()`. 您不能仅仅因为系统坚持要求您在启动前台服务时提供通知而取消该通知。只要您的前台服务正在运行，该通知就会在那里。

在大多数情况下，服务确实不应该在前台。如果您可以为您的服务使用正常的优先级，那么您可以正常启动和停止您的通知。

如果您实际上正在做一些确实需要前台服务的事情，并且如果您真的想向用户显示代码文本，我相信您唯一的选择是发出另一个通知。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-21T05:48:50.750

您始终可以通过调用 stopForeground(boolean removeNotification) 从前台服务中删除通知。然后一个服务退出他的foregroundState，并在需要内存时再次被系统杀死。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-17T17:22:07.893

您可以通过传入一个空的 Builder 来更新通知。

```
if(showNotification){
    NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this)
            .setVisibility(Notification.VISIBILITY_SECRET)
            .setSmallIcon(R.mipmap.ic_spotify_white_24dp)
            .setTicker("Playing Now")
            .setContentTitle("Spotify")
            .setContentText("Preview");
    return mBuilder;
}else{
    NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this);
    return mBuilder;
} 
```

# php - 来自 PHP 的 PHP JSON GCM 请求

> ID：11387324
> 
> 赞同：2
> 
> 时间：2012-07-08T22:45:34.540
> 
> 标签：php, json, google-cloud-messaging

几天来，我尝试从[此处的 gcm 和 php 线程](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging)中实施许多解决方案，以使我的服务器将消息发送到 GCM 服务器，然后再发送到我的 Android 设备。我对 curl_exec($ch) 的调用一直返回 false。经过几天绞尽脑汁，阅读和搜索网络后，我似乎终于想通了。我不得不使用 GET 而不是 POST，我在[这里](https://stackoverflow.com/questions/3018378/php-curl-error-empty-reply-from-server)找到了，而且我不必验证 SSL。（我不记得我在哪里找到的......）

我希望这可以帮助遇到同样问题的人。并且请，如果有人可以对此进行改进，那么他们的更正更受欢迎。

这是上面链接的线程所建议的：

```
$ch = curl_init();

// WRITE MESSAGE TO SEND TO JSON OBJECT
$message = '{"data":{"message":"here is the message","title":"message   title"},"registration_ids":["'. $reg . '","'. $reg2 . '"]}';
curl_setopt($ch, CURLOPT_POSTFIELDS, $message);

curl_setopt($ch, CURLOPT_URL, $gcmurl);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

// WRITE JSON HEADERS
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
    'Content-Type: application/json',          
    'Authorization:key=' . $apiKey)
); 

$result = curl_exec($ch);
if(!$result > 0){
    echo "<p>An error has occurred.<p>";
    echo "<p>ERROR: $curl_error</p>";
}
else{
    $json_return = json_decode($result);
    echo var_dump($json_return);
    $info = curl_getinfo($ch);;

    echo "<p>httpcode: " . $info['http_code'] . "</p>";
}

curl_close($ch); 
```

为了让我能够正常工作，我必须执行以下操作。

```
$ch = curl_init();

$message = '{"data":{"message":"here is the message","title":"message title"},"registration_ids":["'. $reg . '","'. $reg2 . '"]}';
curl_setopt($ch, CURLOPT_POSTFIELDS, $message);

curl_setopt($ch, CURLOPT_URL, $gcmurl);

/*
* COMMENT OUT THE FOLLOWING LINE
*/
*//curl_setopt($ch, CURLOPT_POST, true);*
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

// WRITE JSON HEADERS
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
    'Content-Type: application/json',          
    'Authorization:key=' . $apiKey)
); 

/*
* ADD THESE 2 LINES
*/
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);

$result = curl_exec($ch);
if(!$result > 0){
    echo "<p>An error has occurred.<p>";
    echo "<p>ERROR: $curl_error";
}
else{
    $json_return = json_decode($result);
    echo var_dump($json_return);
    $info = curl_getinfo($ch);;
}

curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T13:39:52.153

你有没有`;extension=php_curl.dll`在你的 php.ini 中取消注释（远程或本地主机）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:04:07.313

```
 $headers = array(
      'Accept: application/json',
      'Content-Type: application/json',
    );
    $data =  json_encode($input);//Your json data...
    $handle = curl_init();
    curl_setopt($handle, CURLOPT_URL, $url);
    curl_setopt($handle, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($handle, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($handle, CURLOPT_SSL_VERIFYPEER, false);

    switch($method)
    {
    case 'GET':
    curl_setopt($handle,CURLOPT_HTTPGET,true);
    break;

    case 'POST':
    curl_setopt($handle, CURLOPT_POST, true);
    curl_setopt($handle, CURLOPT_POSTFIELDS, $data);

    break;

    case 'PUT':
    curl_setopt($handle, CURLOPT_CUSTOMREQUEST, 'PUT');
    curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
    break;

    case 'DELETE':
    curl_setopt($handle, CURLOPT_CUSTOMREQUEST, 'DELETE');
    break;

    case 'FILE':
    curl_setopt($handle, CURLOPT_HEADER, 0);
    curl_setopt($handle, CURLOPT_VERBOSE, 1);
    curl_setopt($handle, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
    curl_setopt($handle, CURLOPT_POST, true);
    echo $data;
    curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
    break;
    }

    $response = curl_exec($handle);
    $code = curl_getinfo($handle, CURLINFO_HTTP_CODE);

return  $response; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-09T01:48:35.373

这对我有用，因为它返回： `{"multicast_id":8298406095978893272,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1439084688510033%9bd2607ff9fd7ecd"}]}` 但我无法在客户端收到通知。

```
<?php

class GCM {

    //put your code here
    // constructor
    function __construct() {

    }

    /**
     * Sending Push Notification
     */
    public function send_notification($registatoin_ids, $message) {
        // include config
        require_once __DIR__ . '/db_config.php';

        // Set POST variables
        $url = 'https://android.googleapis.com/gcm/send';

        // $fields = array(
        //     'registration_ids' => $registatoin_ids,
        //     'data' => $message,
        // );
        $fields = '{"to":"caFPICUdKKM:APA91bEJW2vtQHy5IQcOM88WlT5zazf-D9LExvOaSGgAOHqSkHBeHWP34KV1BEKLA9n932BrZXTCwJajug4kcX2LrURY1NJPb9V-vmis1Ra8bo2Zw2BgIIXrfoDbM42Ip6RN_ic1C6eU","data":{"title":"Testing","body":"Success","icon":"R.mipmap.ic_launcher"}}';

        $headers = array(
            'Authorization: key=' . GOOGLE_API_KEY,
            'Content-Type: application/json'
        );
        // Open connection
        $ch = curl_init();

        // Set the url, number of POST vars, POST data
        curl_setopt($ch, CURLOPT_URL, $url);

        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        // Disabling SSL Certificate support temporarly
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

       // curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));
        curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);

        // Execute post
        $result = curl_exec($ch);
        if ($result === FALSE) {
            die('Curl failed: ' . curl_error($ch));
        }

        // Close connection
        curl_close($ch);
        echo $result;
    }

}

?> 
```

# objective-c - 使用 NSTableView 进行日志记录？

> ID：11387325
> 
> 赞同：1
> 
> 时间：2012-07-08T22:45:37.317
> 
> 标签：objective-c, xcode, macos, nstableview

我一直在努力研究如何使用表格视图，老实说，我有点卡住了。我想使用行数有限的表格视图（比如最多 50 行）。它从空开始，有 0 行。然后我想做一些类似的事情：

```
[self logMessage:@"Waiting for response"]; 
```

它在底部插入一个带有上述文本的新行。如果我再次调用这个伪函数：

```
[self logMessage:@"Server response received"]; 
```

它应该在前一行下方插入另一个新行，并确保它是可见的。一旦达到上述 50 条限制并插入新消息，我希望删除最旧的消息。所有这些都是可滚动的，默认情况下最新的是可见的。

我在寻找正确的做法吗？最后，我希望把它放在主窗口下方的一个漂亮的小抽屉里，如果需要，我可以从主菜单中切换。但正如我所说，我无法弄清楚如何正确使用表格视图，它似乎不像其他对象那样直接。

任何示例代码将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:19:06.627

由于日志查看器是 a 的只读应用程序`UITableView`，因此一旦您了解了基础知识，您的操作方式就相当简单。回想一下，表视图依赖于它们的数据模型来为它们提供需要显示的正确信息。

“日志的最后 50 行”的数据模型可以像`NSMutableArray`: 用于`insertObject:atIndex:`添加行和`removeLastObject`删除“溢出”行一样简单，如下所示：

```
NSMutableArray *logLines = [NSMutableArray array]; // <<== this goes into the init method

-(void) addLogLine:(NSString*)line {
    [logLines insertObject:line atIndex:0];
    while (logLines.count > 50) {
        [logLines removeLastObject];
    }
} 
```

现在您可以将其用作表格的“模型”：数据提供者可以通过查看;`logLines`来判断有多少行。`logLines.count`表中每一行的内容将是 中相应索引处的对象`logLines`，依此类推。查看`UITableView`您最喜欢的 iOs 教程部分，了解需要编写的“样板代码”，以便在`UITableView`.

# ios - Reskit 不调用回调

> ID：11387326
> 
> 赞同：0
> 
> 时间：2012-07-08T22:45:54.827
> 
> 标签：ios, xcode, restkit, rubymotion

我正在尝试将 restkit 与 cocoapods 和 ruby​​motion 一起使用，但无法获得一个简单的获取请求来工作。我可以在我的 Rails 应用程序日志中看到模拟器请求正在到达那里，但 restkit 从不调用它的回调。更糟糕的是，我大部分时间都没有收到任何错误消息，如果幸运的话，我得到的只是这个；

命令失败，状态为 (1)：[DYLD_FRAMEWORK_PATH="/Applications/Xcode.a...]

最终什么也没告诉我。这是我正在执行的代码：

```
class GameManager

  attr_accessor :games, :delegate

  def load_games
    RKClient.sharedClient.get("/games.json", delegate:self)
  end

  def objectLoader(objectLoader, didLoadObjects:objects)
    puts "Objects: #{objects}"
  end

  def objectLoader(objectLoader, didFailWithError:failError)
    puts "Error: #{failError}"
  end

  def request(request, didLoadResponse:response)
    if request.isGET
      if response.isOK
        puts response.bodyAsString
      else
        puts response.inspect
      end
    end
  end

end 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:01:43.863

要使用这些 RKObjectLoaderDelegate 回调，您需要使用 RKObjectManager 的实例发出请求： [http: //restkit.org/api/master/Classes/RKObjectManager.html](http://restkit.org/api/master/Classes/RKObjectManager.html)

RKClient 是处理 HTTP 请求的底层接口，通过 RKRequestDelegate 协议调用一组不同的回调： [http ://restkit.org/api/master/Protocols/RKRequestDelegate.html](http://restkit.org/api/master/Protocols/RKRequestDelegate.html)

不过，RKObjectManager 实例使用 RKClient 来发出请求，所以如果你使用 RKObjectManager 的实例，你可以让它的委托（你的 GameManager 实例）实现这两个协议，然后两个协议的回调都会触发。

# php - 小胡子模板中的嵌套数据

> ID：11387329
> 
> 赞同：2
> 
> 时间：2012-07-08T22:46:25.070
> 
> 标签：php, kohana, mustache, kohana-3.2

我是小胡子的新手，这是我正在尝试的第一个项目。我将它与 kohana 3.2 和 Kostache 模块以及 mustache 的 PHP 实现一起使用。

我收集了一系列体育比赛，每场比赛都有很多赛事，每场赛事都有 3 个我称之为“结果”的实体。我的任务是将它们全部显示在一张表中。以下模板显示了我需要如何显示此表。

```
{{#tournaments}}
    <h2>{{name}}</h2>
    <table class="event_list">
        {{#events.find_all}}
            <tr>
                <td>{{day}}</td>
            {{#outcomes.find_all}}
                <td class="outcome">{{name}}</td>
            {{/outcomes.find_all}}
            </tr>
        {{/events.find_all}}
    </table>
{{/tournaments}} 
```

现在是我的问题和问题。在显示“结果”时，我需要为每个 . 所以我的意思是每个事件都有 3 个“结果”，因此每个事件都有 3 个不同的 CSS 类。但在 {{#outcomes.find_all}} 循环中，我不知道它是第一个实体还是第二个或第三个实体。我该怎么办？

为了解决这个问题，我正在考虑使用函数。我想在这个视图的类中添加函数来呈现所有事件“结果”，这可能看起来像这样：

```
{{#tournaments}}
    <h2>{{name}}</h2>
    <table class="event_list">
        {{#events.find_all}}
            <tr>
                <td>{{day}}</td>
                {{print_outcomes}}
            </tr>
        {{/events.find_all}}
    </table>
{{/tournaments}} 
```

但显然我需要在该函数中传递“结果”的集合，然后我意识到我不能在该函数中传递任何东西。那么小胡子是如何解决这些问题的呢？

另外，如果我有这样的非常简单的功能：

```
public function print_outcomes(){
    return "<td>aa</td>";
} 
```

它会在输出之前通过 url_encode 传递它，这样我就可以得到

```
&lt;td&gt;aa&lt;/td&gt; 
```

那可以修吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:30:32.463

您可以尝试在视图模型中使用类似于以下的功能：

```
public function outcomes()
{
    $outcomes = ORM::factory('outcome')->find_all();

    $result = array();

    foreach ($outcomes as $outcome) 
    {
        $push = $outcome->object();

        $push['name']  = $outcome->name;
        $push['class'] = 'class_'.$outcome->name;

        $result[] = $push;
     } 
     return $result;
} 
```

然后在你的小胡子里你会有这样的东西：

```
{{#outcomes}}
    <td class="{{class}}">{{name}}</td>
{{/outcomes}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:10:03.257

Mustache 是无逻辑的，这意味着您想要的所有逻辑（除了简单的存在检查和循环）都应该通过将逻辑包含在您用作输入的 JSON 中来完成。

基本上，您需要将所有变量（例如 css 类）编码到 json 中。

按照您的示例，请参阅下面的 JSON 和模板（未经测试，但这应该可以帮助您）

JSON

```
{      
  tournaments:[
    {
      name: "tournamentA",
      events: [
        {
           day: "day1",
           outcomes:[
             {
                name: "outcomeTypeA",
                cssClass: "classA"
             },
             {
                name: "outcomeTypeB",
                 cssClass: "classB"
             },
             {
                name: "outcomeTypeC",
                cssClass: "classC"
             }
           ]
        },
        {
          //another event of tourA
        }
      ]
    }, 
    {
      //tournamentB, etc .
    }
  ] 
} 
```

模板

```
{{#tournaments}}
 <h2>{{name}}</h2>
 <table class="event_list">
     {{#events}}
         <tr>
             <td>{{day}}</td>
             {{#outcomes}}
                <td class="outcome {{cssClass}}">{{name}}</td>
             {{/outcomes}}
         </tr>
     {{/events}}
 </table> 
{{/tournaments}} 
```

实际上，您也可以以类似的方式使用函数：即：将函数嵌入到您需要它们的 json 中。在这种情况下，虽然这将是矫枉过正恕我直言。

但对于 ref 类似：

JSON

```
{      
  tournaments:[
    {
      name: "tournamentA",
      events: [
        {
           day: "day1",
           outcomes:[
             {
                name: "outcomeTypeA",
                 cssClass: function(){
                    return "classA";
                 }
             },
             {
                name: "outcomeTypeB",
                 cssClass: function(){
                    return "classB";
                 }
             },
             {
                name: "outcomeTypeC",
                 cssClass: function(){
                    return "classC";
                 }
             }
           ]
        },
        {
          //another event of tourA
        }
      ]
    }, 
    {
      //tournamentB, etc .
    }
  ] 
} 
```

由于这会重复很多，您可以将其外部化为助手

JAVASCRIPT：

```
 var myHelper = function(param){
   return "class"+param;
 } 
```

JSON

```
 .... {
        name: "outcomeTypeA",
        cssClass: function(){
          return myHelper("A");
        }
     },.... 
```

或者通过“名称”推断可能更好

```
 .... {
        name: "outcomeTypeA",
        cssClass: function(){
          return myHelper(this); //this refers to object literal on this level 
                                 //containing 2 properties: 'name' and 'cssClass'
        }
     },.... 
```

进而：

```
 var myHelper = function(obj){
   var param = obj.name.substring(obj.name.length-2); //get last char from 'name'-prop
   return "class"+param;
 } 
```

# r - 尝试使用 optim() 进行约束优化时出错

> ID：11387330
> 
> 赞同：6
> 
> 时间：2012-07-08T22:46:37.627
> 
> 标签：r, mathematical-optimization

我一直在使用 Excel 求解器来处理以下问题

求解方程中的 ab 和 c：

```
y = a*b*c*x/((1 - c*x)(1 - c*x + b*c*x)) 
```

受约束

```
0 < a < 100
0 < b < 100
0 < c < 100

f(x[1]) < 10
f(x[2]) > 20
f(x[3]) < 40 
```

我有大约 10 个 (x,y) 值对。我最小化 abs(y - f(x)) 的总和。而且我可以在每个 x 处约束我的函数结果的系数和值的范围。

我尝试了 nls（没有尝试施加约束），虽然 Excel 提供了我愿意提供的几乎所有起始值的估计值，但 nls 几乎从未返回答案。

我改用了 optim，但在应用约束时遇到了麻烦。

这是我到目前为止的地方-

```
best = function(p,x,y){sum(abs(y - p[1]*p[2]*p[3]*x/((1 - p[3]*x)*(1 - p[3]*x + p[2]*p[3]*x))))}
p = c(1,1,1)
x = c(.1,.5,.9)
y = c(5,26,35)
optim(p,best,x=x,y=y) 
```

我这样做是为了添加第一组约束-

```
optim(p,best,x=x,y=y,method="L-BFGS-B",lower=c(0,0,0),upper=c(100,100,100)) 
```

我收到错误““错误：ABNORMAL_TERMINATION_IN_LNSRCH”

并最终得到更高的错误值（$value）。所以好像我做错了什么。我根本不知道如何应用我的另一组约束。

有人能给我一个基本的想法，如何解决这个非统计学家可以理解的问题吗？我看了很多帖子，看了几本R书。R 书籍停在最简单的 optim 用法上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-08T23:43:55.847

绝对值引入了奇异性：您可能希望使用正方形，特别是对于基于梯度的方法（例如 L-BFGS）。

函数的分母可以为零。

参数出现在产品中并且您允许它们（任意接近）零的事实也可能导致问题。

您可以尝试使用其他优化器（[优化任务视图](http://cran.r-project.org/web/views/Optimization.html)上的完整列表），直到找到优化收敛的优化器。

```
x0 <- c(.1,.5,.9)
y0 <- c(5,26,35)
p <- c(1,1,1)
lower <- 0*p
upper <- 100 + lower
f <- function(p,x=x0,y=y0) sum( 
  (
    y - p[1]*p[2]*p[3]*x / ( (1 - p[3]*x)*(1 - p[3]*x + p[2]*p[3]*x) ) 
  )^2
)

library(dfoptim)
nmkb(p, f, lower=lower, upper=upper) # Converges

library(Rvmmin)
Rvmmin(p, f, lower=lower, upper=upper) # Does not converge

library(DEoptim)
DEoptim(f, lower, upper) # Does not converge

library(NMOF)
PSopt(f, list(min=lower, max=upper))[c("xbest", "OFvalue")] # Does not really converge
DEopt(f, list(min=lower, max=upper))[c("xbest", "OFvalue")] # Does not really converge

library(minqa)
bobyqa(p, f, lower, upper) # Does not really converge 
```

作为最后的手段，您始终可以使用网格搜索。

```
library(NMOF)
r <- gridSearch( f, 
  lapply(seq_along(p), function(i) seq(lower[i],upper[i],length=200)) 
) 
```

# php - PHP不同的服务器和安全性

> ID：11387333
> 
> 赞同：1
> 
> 时间：2012-07-08T22:46:50.060
> 
> 标签：php, mysql

我目前有几台服务器，主要的是一个 Web 服务器和一个内部存储服务器。数据存储在 SQL 服务器数据库中。

在不给用户太多访问权限的情况下，我如何从存储服务器中提取特定文档以从 Web 服务器显示给用户？

例如，我在存储服务器上有文档 c:/memberID/info.pdf，我想通过 PHP 将其显示给客户端，而不让他们访问内部存储服务器。

我希望这是有道理的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:48:02.887

调查`readfile`以及`headers`

```
<?php
$file = 'monkey.gif';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

# postgresql - 如何在 Postgres 中搜索所有多边形内的所有点

> ID：11387339
> 
> 赞同：1
> 
> 时间：2012-07-08T22:48:09.123
> 
> 标签：postgresql, postgis

我想在所有多边形内搜索特定用户的所有点并显示多边形

这些是我的桌子

```
users 

 id   points 
 1     1
 1     2
 1     3
 1     4
 2     3
 3     1

 poly

  polygon-points    poly-name
  (1,2,4,5)          store
  (1,3)              shoop 
```

我写了这段代码

```
BEGIN
FOR poly-name IN SELECT poly-name FROM poly

LOOP
    FOR points IN SELECT * FROM users
    LOOP
    points@poly-name
    END LOOP;

END LOOP;
RETURN;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:57:18.877

看来您正在使用 PostgreSQL 的内置`point`和`polygon`类型，但您想使用[`ST_Crosses`](http://postgis.refractions.net/documentation/manual-1.5/ST_Crosses.html)将 PostGIS`geometry`类型作为参数的 PostGIS 函数。

如果是这样，请从这里开始：[SQL query for point-in-polygon using PostgreSQL](https://stackoverflow.com/questions/1012504/sql-query-for-point-in-polygon-using-postgresql)

请注意，PostGIS 是 PostgreSQL 的附加组件。您可能没有安装它，并且可能需要安装它才能获得该`ST_Crosses`功能（以及*更多*功能）。

# html - CSS 列表样式有随机空间

> ID：11387340
> 
> 赞同：1
> 
> 时间：2012-07-08T22:48:27.387
> 
> 标签：html, css

我正在尝试编写一个页面，由于某种原因，我创建的列表存在随机 CSS 间距问题。在右下角，我在列表和它的 div 之间有一个随机空间。

![](../Images/33e538d0462d995614dbeff4a1271a25.png)

我认为它的样式很好，但我的代码在[jsFiddle](http://jsfiddle.net/myjDs/8/)

由于某种原因，它在那里工作正常。有任何想法吗？

如果需要，我可以提供整个页面链接。

我希望整个 css 列表跨越整个 div，但 div 的左墙与其列表之间存在巨大差距。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T23:07:54.653

您链接到的页面上的列表需要清除其填充（可能还有它的边距......某些浏览器具有不同的默认样式）。以下是您可以用来解决此问题的一些规则：

```
#navlist {
    list-style-type: none; /* Removes default list style */
    margin: 0;
    padding: 0;
} 
```

我强烈建议为 Firefox 获取[Firebug](http://getfirebug.com/)扩展。它使调试这样的布局问题变得非常容易。它还可以帮助您查看您正在编写的样式规则是否被样式表中其他地方的更具体的规则覆盖。

顺便说一句，您不应该使用该`center`元素。该元素已被弃用，应通过样式表处理，如下所示：`text-align: center;`

# java - 为什么我的 java 编译器级别与我安装的项目方面不匹配？

> ID：11387341
> 
> 赞同：63
> 
> 时间：2012-07-08T22:48:28.023
> 
> 标签：java, eclipse, google-app-engine

我在 Eclipse 3.7 中制作了一个名为 Guestbook 的简单 Java Google AppEngine 应用程序，并试图运行它。但是，我遇到了一个缺少快速修复的错误：

```
Description Resource    Path    Location    Type
Java compiler level does not match the version of the installed Java project facet.
Guestbook       Unknown Faceted Project Problem (Java Version Mismatch) 
```

我尝试导航到*Project |* 更改我的项目方面的*属性。*但是，我找不到处理“方面”的设置。

![在此处输入图像描述](../Images/061331f6719ca7924c6aaf9a594a4d29.png)

“已安装的 Java 项目方面”是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-07-08T23:05:03.317

您可以通过右键单击您的项目->属性->项目构面来查看您的构面，

在这里，您可以看到我的示例 Web 应用程序的方面： ![这里](../Images/39be3697719f128bd5d867c07bb91831.png)

我认为您的*Java*方面与安装的不匹配。我怀疑这个方面是 1.5 版。请检查一下。

附加组件：打开 Navigator 视图，展开 .settings 文件夹，打开文件 org.eclipse.wst.common.project.facet.core.xml 并手动将 Java 版本设置为 1.6。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-03T15:03:25.123

右键单击您的项目->属性->项目构面，

这将显示您当前项目方面的 java 版本。

就我而言，我的方面有正确的版本，但我的编译器没有，所以必须**右键单击项目->属性->Java编译器**

然后在编译器合规级别下拉列表下并更改为项目方面的版本。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-06-12T11:33:37.863

它很简单..在问题信息选项卡中，右键单击错误描述并选择快速修复...选择方面版本升级..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-22T10:19:53.437

我在 IBM RAD 工具 eclipse 中遇到了这个问题，它在下面得到了解决。

*   右键单击项目
*   特性
*   项目方面
*   配置（选择 WebSphere 应用程序服务器 v7.0 的默认配置）
*   申请

# cloudfiles - FileConveyor - 积云 - 文件未显示在 CloudFiles 上

> ID：11387342
> 
> 赞同：1
> 
> 时间：2012-07-08T22:48:32.730
> 
> 标签：cloudfiles, django-storage

我已经安装了 FileConveyor 和 django cumulus（它是 mosso 的替代品）。我创建了一个测试目录，`/home/drupal/conveyortest`将其用作scanPath。

当我启动 FileConveyor 守护进程时，我被告知 js 和 css 文件正在同步（并被删除）。当我查看我的 CloudFiles 容器时，我看到该`static/views_slideshow_galleria`文件夹​​已创建，但其中没有文件。应该有一个css文件和一个js文件，但是没有。

我究竟做错了什么？

```
- WARNING  - Created 'cumulus' transporter for the 'cloudfiles' server.
- WARNING  - Deleted '/home/drupal/conveyortest/views_slideshow_galleria/views_slideshow_galleria.css' as per the 'CSS, JS, images and Flash' rule.
- WARNING  - Synced: '/home/drupal/conveyortest/views_slideshow_galleria/views_slideshow_galleria.css' (CREATED).
- WARNING  - Deleted '/home/drupal/conveyortest/views_slideshow_galleria/views_slideshow_galleria.js' as per the 'CSS, JS, images and Flash' rule.
- WARNING  - Synced: '/home/drupal/conveyortest/views_slideshow_galleria/views_slideshow_galleria.js' (CREATED).
- WARNING  - Synced: '/home/drupal/conveyortest/views_slideshow_galleria/views_slideshow_galleria.css' (DELETED).
- WARNING  - Synced: '/home/drupal/conveyortest/views_slideshow_galleria/views_slideshow_galleria.js' (DELETED). 
```

这是我的 config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
  <!-- Sources -->
  <sources ignoredDirs="CVS:.svn">
    <source name="drupal" scanPath="/home/drupal/conveyortest" documentRoot="/home/drupal/conveyortest" basePath="/" />
  </sources>

  <!-- Servers -->
  <servers>
    <server name="cloudfiles" transporter="cumulus">
      <username>myusername</username>
      <api_key>myapikey</api_key>
      <container>FileConveyorTest</container>
    </server>
  </servers>

  <!-- Rules -->
  <rules>
    <rule for="drupal" label="CSS, JS, images and Flash">
      <filter>
        <extensions>ico:js:css:gif:png:jpg:jpeg:svg:swf</extensions>
      </filter>
      <processorChain>
        <processor name="filename.SpacesToDashes" />
      </processorChain>
      <destinations>
        <destination server="cloudfiles" path="static" />
      </destinations>
    </rule>
  </rules>
</config> 
```

# javascript - 如何刷新天气图层？

> ID：11387345
> 
> 赞同：3
> 
> 时间：2012-07-08T22:49:19.587
> 
> 标签：javascript, google-maps-api-3

有谁知道是否有办法刷新 Google Maps javascript API 中的天气层？

提供一些背景知识，我们有一个应用程序在浏览器中保持打开状态，并每隔几分钟更新地图上的一些信息。我们让用户在地图上打开天气图层，但天气只在创建图层时加载一次。一段时间后，它会过时，我们希望它保持最新状态。我已经尝试了一切，从重新创建图层并将地图设置为空，然后返回到当前地图，但温度永远不会重新加载。

任何建议都会有帮助。谢谢！

更新：一些代码片段展示了我如何尝试重新加载天气层。

```
//Global variable for the weather layer
var weatherLayer = null;

//When user clicks the weather button on the map
weatherLayer = new google.maps.weather.WeatherLayer({..});
weatherLayer.setMap(myMap);

//When I try to refresh the layer
weatherLayer.setMap(null); //This successfully hides it
weatherLayer = new google.maps.weather.WeatherLayer({...});
weatherLayer.setMap(myMap);  //This doesnt' reload the data.

//Tried resetting the options before and after recreating the layer to see if that would help, but it didn't
weatherLayer.setOptions({..new option set..}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:44:14.423

我能想到的唯一可能有帮助的是在天气层处于活动状态时运行的时间循环上创建一个新的天气层。

```
var weatherLayer = null;
var timer = null; // This is for the refresh timer

//Add the click hander to the weather button
$(weatherButton).click(function() {
    if(weatherLayer == null) {
        setWeatherLayer();
    } else {
        clearTimeout(timer);
        weatherLayer.setMap(null);
        weatherLayer = null;
    }
});

function setWeatherLayer() {
    //Create a new layer
    weatherLayer = new google.maps.weather.WeatherLayer({
        temperatureUnits: google.maps.weather.TemperatureUnit.FAHRENHEIT
    });
    weatherLayer.setMap(map);
    timer = setTimeout(setWeatherLayer, 5000);
} 
```

可能有一些更好的解决方案，但我认为这可行。

# eclipse - Eclipse 崩溃后无法启动

> ID：11387348
> 
> 赞同：0
> 
> 时间：2012-07-08T22:49:42.300
> 
> 标签：eclipse, startup

我收到一个关于 Eclipse 如何陷入循环的错误以及关于垃圾收集的一些信息……在我最终关闭它之后，我尝试重新打开它，但它不起作用。我从命令行尝试了以下操作：

日食-清洁

它仍然不起作用。[我在https://docs.google.com/document/d/1EPwYgHujbD8fX-W-b1DatJutgNv-ZnIkm8SP180R4XQ/edit](https://docs.google.com/document/d/1EPwYgHujbD8fX-W-b1DatJutgNv-ZnIkm8SP180R4XQ/edit)上发布了错误日志

这是一个新的错误日志（单次尝试打开 eclipse）

有人知道可以帮助我的eclipse错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T12:22:30.493

从工作区中删除 .metadata 文件夹或更改工作区文件夹。要让日食询问您的工作区应该在哪里，请按照以下步骤操作。

在 eclipse\configuration.settings 文件夹中找到文件 org.eclipse.ui.ide.prefs。

将 SHOW_WORKSPACE_SELECTION_DIALOG=false 更改为 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-20T21:43:09.040

我遇到了类似的崩溃，使用`-clean`选项启动 Eclipse 并没有帮助。我最终删除了该`.metadata\.plugins\org.eclipse.e4.workbench`文件，从而解决了此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T22:54:58.437

有时您的工作区已损坏，Eclipse 无法打开该工作区。

您可以打开/创建另一个工作区吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-19T15:21:15.127

我最终只是重新安装了eclipse ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-26T16:56:30.930

我遇到了 Eclipse 无法启动的问题。启动画面出现了一秒钟，但从未像 OP 所说的那样显示工作区选择屏幕。当我最后一次查看我的 eclipse.ini 文件时，我正要重新安装。我发现我把 m 离开了内存分配设置之一。这导致它崩溃而没有错误消息。因此，格式错误的 ini 文件可能会导致此问题。

# bash - 将两个文件中的字段与计算进行比较

> ID：11387350
> 
> 赞同：1
> 
> 时间：2012-07-08T22:49:52.870
> 
> 标签：bash, awk

作品！！

见下文...

**更新了我的脚本...**

问题是它只输出外部循环中的第一行。一些简单的事情是错误的，我没有看到。

该脚本从两个文件中读取并进行计算。这是文件...

```
$  awk -F',' '{print $1, $2, $3, $4}' s1.txt
2017 5155 41.46097500 -78.99436944
2017 5156 41.46157778 -78.99437500
2017 5157 41.46218611 -78.99437778
2017 5158 41.46278611 -78.99438056
2017 5159 41.46339722 -78.99438333
2017 5160 41.46399444 -78.99438611

$  awk -F',' '{print $11, $12}' data.txt
41.46098533 -78.99440559
41.46217481 -78.99440703
41.46158424 -78.99439119
41.46278446 -78.99439355
41.46338829 -78.99440672
41.46399091 -78.99439231 
```

```
#! /usr/bin/awk -f

BEGIN { 
   while (getline < "s1.txt") {
      split($0, ft, ",")
      line =    ft[1]
      station = ft[2]
      lat1 =    ft[3]
      lon1 =    ft[4]

      while (getline < "data.txt") {
          split($0, ft, ",")
          lat2 = ft[11]
          lon2 = ft[12]

          x = (lon2 - lon1) * cos((lat1 + lat2) / 2)
          y = (lat2 - lat1)
          d = sqrt(x * x + y * y) * 6371

          print line","station","lat1","lon1","lat2","lon2","d | "sort -t, -h -k7 |head -1" 

      }
   }
} 
```

输出..

```
2017,5155,41.46097500,-78.99436944,41.46098533,-78.99440559,0.198629 
```

这从 s1.txt 加载了第一行并比较了 data.txt 中的所有行。

我需要将 s1.txt 推进到下一行并循环它，直到到达 s1.txt 的末尾。

？？？

我添加了一些打印命令

```
#! /usr/bin/awk -f

BEGIN { 
   while (getline < "s1.txt") {
      split($0, ft, ",")
      line =    ft[1]
      station = ft[2]
      lat1 =    ft[3]
      lon1 =    ft[4]
      print "loop1"
      while (getline < "data.txt") {
          split($0, ft, ",")
          lat2 = ft[11]
          lon2 = ft[12]

          x = (lon2 - lon1) * cos((lat1 + lat2) / 2)
          y = (lat2 - lat1)
          d = sqrt(x * x + y * y) * 6371
          print "loop2"
          print line","station","lat1","lon1","lat2","lon2","d | "sort -t, -h -k7 |head -1" 

      }
   }
} 
```

看起来它可以通过一次。之后它不会进入第二个循环。

```
$ resolv.awk
loop1
loop2
loop2
loop2
loop2
loop2
loop2
loop2
loop2
loop2
loop1
loop1
loop1
loop1
loop1
loop1
loop1
2017,5155,41.46097500,-78.99436944,41.46104466,-78.99446284,0.656815 
```

如果我在内循环上使用中断，它会正确循环，但中断不会让它正常工作，因为它每次都从匹配文件中获取第一行。我想也许这些文件需要交换。匹配文件的内循环和数据的外循环。

或者一些关于break的条件语句。

```
#! /usr/bin/awk -f
BEGIN { 
   while (getline < "s1.txt") {
      split($0, ft, ",")
      line =    ft[1]
      station = ft[2]
      lat1 =    ft[3]
      lon1 =    ft[4]
      print "loop1"
      while (getline < "data.txt") {
          split($0, ft, ",")
          lat2 = ft[11]
          lon2 = ft[12]

          x = (lon2 - lon1) * cos((lat1 + lat2) / 2)
          y = (lat2 - lat1)
          d = sqrt(x * x + y * y) * 6371
      print "loop2"
          print line","station","lat1","lon1","lat2","lon2","d 
      break
      }
   }
}

    $ resolv.awk
loop1
loop2
2017,5155,41.46097500,-78.99436944,41.46104466,-78.99446284,0.656815
loop1
loop2
2017,5156,41.46157778,-78.99437500,41.46162354,-78.9943992,0.317363
loop1
loop2
2017,5157,41.46218611,-78.99437778,41.46215576,-78.99438806,0.200558
loop1
loop2
2017,5158,41.46278611,-78.99438056,41.46281488,-78.99439355,0.195243
loop1
loop2
2017,5159,41.46339722,-78.99438333,41.46458318,-78.99436234,7.55653
loop1
loop2
2017,5160,41.46399444,-78.99438611,41.46517654,-78.99437141,7.53154
loop1
loop2
2017,5161,41.46459722,-78.99438889,41.46580453,-78.99434083,7.69578
loop1 
```

**这个可行..** 我将不得不在脚本外部而不是按我最初计划的内部对重复项进行排序和删除。

```
#! /usr/bin/awk -f
BEGIN { 
   while (getline < "s2.txt") {
      split($0, ft, ",")
      line =    ft[1]
      station = ft[2]
      lat1 =    ft[3]
      lon1 =    ft[4]
      while (getline < "data.txt") {
          split($0, ft, ",")
          lat2 = ft[11]
          lon2 = ft[12]
          ln2 =  ft[14]
          stn2 = ft[15]

          x = (lon2 - lon1) * cos((lat1 + lat2) / 2)
          y = (lat2 - lat1)
          d = sqrt(x * x + y * y) * 6371
          print line","station","lat1","lon1","ln2","stn2","lat2","lon2","d
      }

      # edited here
      close ( "data.txt" )

   }
}

2017,5155,41.46097500,-78.99436944,2017,5155,41.46104466,-78.99446284,0.656815
2017,5155,41.46097500,-78.99436944,2017,5156,41.46162354,-78.9943992,4.13473
2017,5155,41.46097500,-78.99436944,2017,5157,41.46215576,-78.99438806,7.52324
2017,5156,41.46157778,-78.99437500,2017,5155,41.46104466,-78.99446284,3.42688
2017,5156,41.46157778,-78.99437500,2017,5156,41.46162354,-78.9943992,0.317363
2017,5156,41.46157778,-78.99437500,2017,5157,41.46215576,-78.99438806,3.68293
2017,5157,41.46218611,-78.99437778,2017,5155,41.46104466,-78.99446284,7.28552
2017,5157,41.46218611,-78.99437778,2017,5156,41.46162354,-78.9943992,3.58585
2017,5157,41.46218611,-78.99437778,2017,5157,41.46215576,-78.99438806,0.200558
2017,5158,41.46278611,-78.99438056,2017,5155,41.46104466,-78.99446284,11.103
2017,5158,41.46278611,-78.99438056,2017,5156,41.46162354,-78.9943992,7.40736
2017,5158,41.46278611,-78.99438056,2017,5157,41.46215576,-78.99438806,4.01615
2017,5159,41.46339722,-78.99438333,2017,5155,41.46104466,-78.99446284,14.9938
2017,5159,41.46339722,-78.99438333,2017,5156,41.46162354,-78.9943992,11.3004
2017,5159,41.46339722,-78.99438333,2017,5157,41.46215576,-78.99438806,7.90938

 resolv.awk |sort -h -k9 -t, |awk -F',' '!_[$1$2]++' | awk -F',' '!_[$7$8]++'
2017,5157,41.46218611,-78.99437778,2017,5157,41.46215576,-78.99438806,0.200558
2017,5156,41.46157778,-78.99437500,2017,5156,41.46162354,-78.9943992,0.317363
2017,5155,41.46097500,-78.99436944,2017,5155,41.46104466,-78.99446284,0.656815 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:44:29.910

好像你错过了`close` 陈述。

#！/usr/bin/awk -f

```
BEGIN { 
   while (getline < "s1.txt") {
      split($0, ft, ",")
      line =    ft[1]
      station = ft[2]
      lat1 =    ft[3]
      lon1 =    ft[4]

      while (getline < "data.txt") {
          split($0, ft, ",")
          lat2 = ft[11]
          lon2 = ft[12]

          x = (lon2 - lon1) * cos((lat1 + lat2) / 2)
          y = (lat2 - lat1)
          d = sqrt(x * x + y * y) * 6371

          print line","station","lat1","lon1","lat2","lon2","d | "sort -t, -h -k7 |head -1" 

      }

      # edited here
      close ( "data.txt" )

   }
} 
```

# mysql - 跨具有不同列名的表的 SQL 子查询

> ID：11387351
> 
> 赞同：1
> 
> 时间：2012-07-08T22:50:02.813
> 
> 标签：mysql, sql, subquery

假设我有两张桌子：`orderinfo`和`customerinfo`

它们看起来像这样：

### 订单信息：

```
OrderID
CustomerID
OrderCustomerName
OrderCustomerAddress 
```

### 顾客信息：

```
CustomerID
CustomerName
CustomerAddress 
```

两者都是独一无二的`OrderID`。`CustomerID`当要创建订单时，我需要将信息从 customerinfo 复制到 orderinfo，因为客户以后可能会更改他的信息。

我希望我可以用它`CustomerID` 来实现这一点。我应该如何编写子查询？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T23:04:53.820

当您插入新订单时，您可以使用以下简单的[**INSERT...SELECT**](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)查询语法获取客户数据的*“快照” ：*[](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

 **```
INSERT INTO orderinfo (CustomerID, OrderCustomerName, OrderCustomerAddress, status) 
SELECT CustomerID, CustomerName, CustomerAddress, 'P'
FROM customerinfo
WHERE CustomerID = <customerid here> 
```

这会在下订单的确切时间插入带有客户信息的新订单。

即使客户在表中更新他或她的信息，此信息仍将保持其插入方式，因为除了更改（它不应该发生变化，即使它确实发生了变化，它也不应该）`customerinfo`之外没有任何级联效应`CustomerID`不会更改*“快照”*数据）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T22:56:20.360

要使用`orderinfo`基于 a 的客户姓名和地址的当前值进行更新`CustomerID`，请使用 a `UPDATE` `JOIN`：

```
UPDATE
  orderinfo
  JOIN customerinfo ON orderinfo.CustomerID = customerinfo.CustomerID
SET 
  OrderCustomerName = CustomerName,
  OrderCustomerAddress = CustomerAddress
WHERE OrderID = <some_order_id> 
```

如果您想“冻结”与特定订单关联的客户信息，即使客户稍后在全局范围内更改该信息，这也很有用。如果我理解正确，那是你的意图。

您也可以使用桌子`AFTER INSERT`上的触发器来执行此操作。`orderinfo`然后您无需执行单独的查询：

```
CREATE TRIGGER update_order_cust_info AFTER INSERT ON orderinfo
FOR EACH ROW 
BEGIN
    UPDATE
      orderinfo
      JOIN customerinfo ON orderinfo.CustomerID = customerinfo.CustomerID
    SET 
      NEW.OrderCustomerName = CustomerName,
      NEW.OrderCustomerAddress = CustomerAddress
    WHERE OrderID = NEW.OrderID
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T22:58:55.533

你正在寻找的是

```
INSERT INTO orderinfo 
    (OrderID, CustomerID, OrderCustomerName, OrderCustomerAddress)
VALUES (
    '12345', 
    '789',
    (SELECT CustomerName FROM customerinfo WHERE CustomerID = '789'),
    (SELECT CustomerAddress FROM customerinfo WHERE CustomerID = '789')
) 
```

但我强烈建议您更改数据库结构。您尝试执行的操作违反了[数据库规范化规则](http://en.wikipedia.org/wiki/Database_normalization)。相反，请阅读 Wikipedia 上关于[慢慢变化的维度](http://en.wikipedia.org/wiki/Slowly_changing_dimension)的这篇文章，并按此方式实现它。**

# c# - 手动实现 string.IndexOf

> ID：11387353
> 
> 赞同：1
> 
> 时间：2012-07-08T22:50:15.957
> 
> 标签：c#, algorithm, data-structures

我需要在不使用任何与 c# 字符串搜索相关的内置方法的情况下实现 string.IndexOf 功能。

您能否为此建议一个简单的算法。搜索不涉及非常大的字符串。您可以假设要搜索的字符串的最大长度为 1000 个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T22:59:24.943

由于这听起来像家庭作业，我将提供指导而不是解决方案。维基百科上对字符串搜索算法有一个很好的概述：

[http://en.wikipedia.org/wiki/String_searching_algorithm](http://en.wikipedia.org/wiki/String_searching_algorithm)

尝试实现 Naïve 字符串搜索作为对该主题的一个很好的介绍。

> 查看一个字符串在另一个字符串中出现位置的最简单且效率最低的方法是逐个检查它可能在的每个位置，看它是否在那里。所以首先我们看看大海捞针的第一个字符中是否有针的副本；如果没有，我们看看是否有从大海捞针的第二个字符开始的针的副本；如果不是，我们从第三个字符开始，以此类推。在正常情况下，我们只需要对每个错误的位置看一两个字符就可以看出它是一个错误的位置，所以在平均情况下，这需要 O(n + m) 步，其中 n 是干草堆，m是针的长度；但在最坏的情况下，在像“aaaaaaaaab”这样的字符串中搜索像“aaaab”这样的字符串需要 O(nm) 步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T22:52:55.143

您是否尝试过查看其他语言的实现。例如Java？

这些源代码广泛可用，向专家学习始终是良好的第一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T23:10:56.660

另一个很好的指导是考虑“我可以避免一些搜索吗？” 例如，如果您的搜索字符串是`aaaa`并且搜索的字符串是`aaabaaaabaaa`并且您从位置 [0] 开始，您还需要在位置 [1] 进行搜索吗？

另外，搜索字符串中最适合开始匹配的字符是哪个？如果您的搜索字符串是`abcd`并且您搜索的字符串是`aababceabcd`，这是否暗示了您的匹配循环可能如何构建的某些方面？

# c# - 在 Visual Studio 2010 扩展中获取默认项目目录

> ID：11387354
> 
> 赞同：4
> 
> 时间：2012-07-08T22:50:23.383
> 
> 标签：c#, visual-studio-2010, visual-studio-extensions, visual-studio-sdk

如何从 Visual Studio 2010 扩展中获取默认项目创建目录？默认情况下，此目录为：

```
C:\Users\<username>\Documents\Visual Studio 2010\Projects 
```

我猜这是通过“工具”->“选项”窗口完成的，但我不知道如何通过 SDK 来解决这个问题。

乍一看，以下看起来应该让我接近：

```
DTE2 dte = CType(GetService(typeof(SDTE)), DTE2);
Object props = dte.Properties("Projects and Solutions", "General"); 
```

但我收到以下错误：

```
System.Runtime.InteropServices.COMException was unhandled by user code
ErrorCode=-2147352565
Message=Invalid index. (Exception from HRESULT: 0x8002000B (DISP_E_BADINDEX)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T03:07:38.817

找到它：http:
[//msdn.microsoft.com/en-us/library/ms165642.aspx](http://msdn.microsoft.com/en-us/library/ms165642.aspx)

> Visual Studio 运行一次后，当前 Visual Studio 实例的属性项名称存储在以下 Windows 注册表项中：HKCU\SOFTWARE\Microsoft\VisualStudio\10.0_Config\AutomationProperties。此位置始终具有明确的名称列表。类别名称是 AutomationProperties 项（数据库工具、FontsAndColors 等）的子项的名称。页面名称是类别键的子键的名称。例如，FontsAndColors 类别包含对话框和工具窗口、打印机和文本编辑器页面。您可以使用注册表编辑器查看注册表。

这是获取我正在寻找的值的代码：

```
string defaultProjectPath = (string)(DTE.Properties("Environment", "ProjectsAndSolution").Item["ProjectsLocation"].Value); 
```

请注意，注册表中的值与您在 Visual Studio 中看到的值不匹配，因此需要进行一些侦探工作才能获得您正在寻找的确切值。由于向后兼容性，我假设它是这样设置的。

# eclipse - 如何将 Eclipse 编译器设置导出到文件？

> ID：11387355
> 
> 赞同：2
> 
> 时间：2012-07-08T22:50:31.073
> 
> 标签：eclipse

在 Eclipse 中，我已将代码格式化、清理、导入订单等导出到文件中，并将它们检入 svn。

这对我的团队很有用，因此他们都可以使用相同的设置。

但是，我找不到对编译器选项执行相同操作的方法。有很多有用的设置默认情况下没有打开，而且每个人都手动更改它们容易出错。

我知道我可以使用 FindBugs（我们通过 CI 使用），但 Eclipse 编译器选项集成得更好、速度更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:59:07.327

共享所有这些设置的最佳方式是使用项目特定的设置。打开项目属性并选择要配置的各个部分（例如**Java Compiler**，然后选择选项**Enable project specific settings**。

![在此处输入图像描述](../Images/42e36cd7e7789d54eea69a6a7fc147ec.png)

您以这种方式配置的任何设置都存储在项目中名为`.settings`. `.classpath`将该文件夹与和文件一起签入源代码控制`.project`，并且每当签出项目时，Eclipse 将自动应用这些设置。工作区设置被项目特定的设置覆盖，因此使用此技术，其他工作区或用户如何配置其设置并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:52:07.030

@E-Riz 的答案是完全正确的。如果您发现您将来需要为您的团队成员同步超过列出的设置，那么您还应该查看 Google 的[工作区机制](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/)，它允许自动将任何一组首选项应用于工作区并在每个如果本地首选项对于共享设置仍然有效，则开始。

# python - 有没有办法将笔记本的选项卡设置在彼此下方？

> ID：11387362
> 
> 赞同：6
> 
> 时间：2012-07-08T22:51:44.407
> 
> 标签：python, user-interface, tabs, tkinter, ttk

到目前为止，在使用`ttk.Notebook`小部件时，但我无法将标签设置在彼此下方，它们一直向东堆积。

有没有办法让它们以某种方式堆叠？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-07-04T17:52:24.730

是的，请检查此代码：

```
import tkinter as tk
from tkinter import ttk

root = tk.Tk()

style = ttk.Style(root)
style.configure('lefttab.TNotebook', tabposition='wn')

notebook = ttk.Notebook(root, style='lefttab.TNotebook')

f1 = tk.Frame(notebook, bg='red', width=200, height=200)
f2 = tk.Frame(notebook, bg='blue', width=200, height=200)

notebook.add(f1, text='Frame 1')
notebook.add(f2, text='Frame 2')

notebook.grid(row=0, column=0, sticky="nw")

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T12:19:46.013

供参考 - 是

请参阅以下[右上角选项卡中的代码](https://stackoverflow.com/questions/20822553/align-tabs-from-right-to-left-using-ttk-notebook-widget)

并用于`'wn'`强制标签在左上角和向下堆叠

# javascript - Jquery - 相同的代码，但只有其中一个有效

> ID：11387365
> 
> 赞同：3
> 
> 时间：2012-07-08T22:52:32.610
> 
> 标签：javascript, jquery, html

考虑代码 A 和代码 B。它们看起来相同，但一个是我写的。另一个，从 W3 复制粘贴。代码 A（我写的那个）不起作用，但代码 B 可以。为什么是这样？我已经完成了一个字符串匹配，它说它不匹配，但是将它们放在记事本中（代码已经是一行）表明它根本没有什么不同。有什么我做错了吗？

代码 A：

```
$(document).ready(function(){
$(".sub").click(function(){
$(".sub").slideToggle("slow");
  });
​}); 
```

代码 B：

```
$(document).ready(function(){
$(".sub").click(function(){
$(".sub").slideToggle("slow");
  });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T23:00:12.037

在对帖子进行编辑之前，代码 A 中最后一行的大括号与代码 B 中的大括号具有不同类型的字符集。您可以在进行差异比较时看到这一点。

将原件复制/粘贴到 Notepad++ 中，您也会看到不同之处。

```
Code A: ?});

Code B: }); 
```

**编辑**
看起来这两个字符是`&#8203;`and的实体`}`。看看 SO Question: [What's HTML character code 8203](https://stackoverflow.com/q/2973698/9664)？

# c++ - 如何安全地将 `unsigned long int` 转换为 `int`？

> ID：11387370
> 
> 赞同：8
> 
> 时间：2012-07-08T22:53:13.333
> 
> 标签：c++

我有一个应用程序以 s的形式创建唯一**ID**`unsigned long int`。应用程序需要这种精度。

但是，我必须在只允许s的协议中发送这些**id 。**`int`协议的接收应用程序不需要这种精度。所以我的问题是：如何将 an 转换`unsigned long int`为 an `int`，尤其是当 the`unsigned long int`大于 an时`int`？

### 编辑：

该**协议**仅支持`int`. 我很高兴知道如何避免“翻车问题”

发送消息的应用程序需要在很长一段时间内知道唯一性，而接收方只需要在短时间内知道唯一性。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-08T23:01:55.237

这是一种可能的方法：

```
#include <climits>
unsigned long int uid = ...;
int abbreviated_uid = uid & INT_MAX; 
```

例如，如果`int`是 32 位，则这将丢弃除 UID 的低 31 位之外的所有位。它只会产生非负值。

这会丢失原始 中的信息`uid`，但您表示这不是问题。

但是您的问题很模糊，很难判断这是否适合您的目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T23:18:32.793

如您所知，在一般情况下，理论上不能安全地将 an 转换`unsigned long int`为 an 。`int`但是，在整数不太大的许多实际案例中确实可以这样做。

我可能会定义和使用这个：

```
struct Exc_out_of_range {};

int make_int(const unsigned long int a) {
    const int n = static_cast<int>(a);
    const unsigned long int a2 = static_cast<unsigned long int>(n);
    if (a2 != a) throw Exc_out_of_range();
    return n;
} 
```

使用`<limits>`标头的等效解决方案自然是可能的，但我不知道它是否比上述更好。（如果代码处于时间关键的循环中并且可移植性不是一个因素，那么您可以在汇编中对其进行编码，直接测试感兴趣的位或位，但除非作为汇编语言的练习，否则这将是一个麻烦。）

关于性能，值得注意的是 - 除非您的编译器非常旧 -`throw`除非使用，否则不会施加运行时负担。

@GManNickG 添加了从`std::exception`. 我个人对此并没有强烈的感觉，但建议是有根据的和赞赏的，我认为没有理由不遵循它。 [您可以在此处阅读有关此类继承的更多信息。](https://stackoverflow.com/q/1669514/1275653)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T23:46:22.513

升压有[`numeric_cast`](http://www.boost.org/doc/libs/1_50_0/libs/numeric/conversion/doc/html/boost_numericconversion/improved_numeric_cast__.html)：

```
unsigned long l = ...;
int i = boost::numeric_cast<int>(l); 
```

如果转换溢出，这将引发异常，这可能是您想要的，也可能不是。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-08T23:54:07.933

仅当您需要确保 abbreviated_uid 为非负数时，才需要 Keith Thompson 的“& INT_MAX”。如果这不是问题，并且您可以容忍负 ID，那么一个简单的强制转换（C 风格或 static_cast()）就足够了，其好处是***if*** `sizeof(unsigned long int)==sizeof(int)`，那么二进制表示在两端将是相同的（如果您将其转换回`unsigned long int`接收端，它将与发送端的值相同）。

接收者是否将有关 ID 的响应发送回发送者，原始发送者（现在是响应的接收者）是否需要将其与原始`unsigned long int`ID 匹配？如果是这样，您将需要一些额外的逻辑来将响应与原始 ID 匹配。如果是这样，请发布说明此类要求的编辑，我（或其他人）可以建议解决该问题的方法。该问题的一种可能解决方案是将 ID 分解为多个`int`部分，并在另一端将其重建为完全相同的`unsigned long int`值。如果您需要这方面的帮助，我或其他人可以提供帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-19T13:00:52.530

我遇到了这个问题，因为我必须有一个解决方案来将较大的整数类型转换为较小的类型，即使可能会丢失信息。

我使用模板想出了一个非常简洁的解决方案：

```
template<typename Tout, typename Tin>
Tout toInt(Tin in)
{
    Tout retVal = 0;

    if (in > 0)
        retVal = static_cast<Tout>(in & std::numeric_limits<Tout>::max());
    else if (in < 0)
        retVal = static_cast<Tout>(in | std::numeric_limits<Tout>::min());

    return retVal;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-09-24T13:31:24.810

您可以尝试使用`std::stringstream`and `atoi()`：

```
#include <sstream>
#include <stdlib.h>
unsigned long int a = ...;
std::stringstream ss;
ss << a;
std::string str = ss.str();
int i = atoi(str.c_str()); 
```

# php - AJAX 帖子 8 位是否干净？/ 与 Base64 的关系 / 替代方案？/ 它在哪里？

> ID：11387374
> 
> 赞同：1
> 
> 时间：2012-07-08T22:53:33.787
> 
> 标签：php, javascript, base64

Base64 仅使用每个字符 6 位 (2^6 = 64) 从图像文件创建文本数据。这导致效率低下。

根据[Base64 上的维基百科条目](http://en.wikipedia.org/wiki/Base64)，这种低效率是为了防止 8 位脏东西，如电子邮件。

Ajax Posting 8 位干净吗？如果是这样，是否有使用 Base64 的替代方法？

[php.net（维基百科也是如此）声称base64_encode](http://php.net/manual/en/function.base64-encode.php)的效率低 33% 。.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T23:33:23.570

有点儿。所有 JavaScript 字符串都是 UTF-16，而不是字节字符串。如果您使用 发送数据`send`，则在发送之前会将其编码为 UTF-8。因此，您可以将字节转换为 Unicode 代码点，然后将其编码为 UTF-8。当它到达服务器时，您必须对 UTF-8 进行解码，然后将代码点转换回字节。

对于 7 位数据，这根本不会扩大数据的大小。对于始终设置最高有效位的 8 位数据，它将使数据大小加倍。对于最高有效位设置一半时间的 8 位数据，它将使您的数据大小增加 50%，这比 Base64 33.3͞% 的增加要差。

另一方面，使用[`XMLHttpRequest`Level 2](http://www.w3.org/TR/2012/WD-XMLHttpRequest-20120117/)`send`将允许您通过传递、或来发送二进制数据[`ArrayBuffer`](http://www.khronos.org/registry/typedarray/specs/latest/#5)。但是，级别 2 仅在较新的浏览器中受支持。[`Blob`](http://dev.w3.org/2006/webapi/FileAPI/#blob)[`FormData`](http://www.w3.org/TR/2012/WD-XMLHttpRequest-20120117/#formdata)`XMLHttpRequest`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:08:02.583

我认为 AJAX 发布在这方面与通用 POST 请求相同；这就是为什么我们需要“multipart/form-data”来发送文件的内容，例如。通常数据会被 url 编码，但 Base64 可能是更好的方法，因为它（通常）更有效。

**更新**：以另一种方式看待这一点可能会有所帮助。) 您需要一些可能占用所有 8 位的值流来安全地通过 7 位过滤。完美的解决方案是使用“7-to-8”编码，这样每 7 个字节就变成了 8 个“安全”字符。但这不适用，因为其中一些 7 位字符实际上用于指定有关流的一些附加（元）信息......

现在你有一个两难选择：要么使用下一个整数（6 位 - 即 base64） - 要么尝试发明一个带有“非整数”除法器的方案。存在这样的方案（例如检查[Ascii85](http://en.wikipedia.org/wiki/Ascii85)），但它们很少使用。

# php - PHP Post 到 Simple Modal 然后更新页面

> ID：11387377
> 
> 赞同：0
> 
> 时间：2012-07-08T22:54:04.993
> 
> 标签：php, jquery, post, simplemodal

所以我试图做的是：

1.  用户单击单选 html 表单按钮。
2.  用户单击提交按钮以确认他的选择。
3.  SimpleModal 弹出并显示所选按钮的值。
4.  用户在 SimpleModal 中单击“接受”，父页面会相应更新。

我不太担心第 4 步，但我不确定如何将帖子信息传输到 SimpleModal。

作为参考，我正在使用 Eric Martin 提供的 SimpleModal Contact Form 演示。

我是 Ajax 和 jQuery 的新手。

我看到了这篇文章：[将值从 PHP 传递到 SimpleModal 联系表单](https://stackoverflow.com/questions/3258751/passing-a-value-from-php-to-the-simplemodal-contact-form)

他们遇到了类似的问题，但是他们没有从索引页面中检索帖子信息。

有没有办法检索此帖子信息并将其传递给为 SimpleModal 窗口调用的contact.php？

任何帮助是极大的赞赏。

我的索引（生成单选按钮的位置。）：

```
<div id='contact-form'>
<form action="index.php" method="get">
                    <?
                    echo "<h3>Degrees (double click a degree to add a generator):</h3><br />";

                    for($deg = $_SESSION['degmin']; $deg <= $_SESSION['degmax']; $deg++)
                    {
                        ?>
                        <table>
                        <tr>
                        <th>
                        <?
                        echo $deg;
                        for($gen = 0; $gen < $_SESSION['degree_gens'][$deg]; $gen++)
                        {
                            echo "<input type='radio' name='test' value='deg' />";
                        }
                        ?>
                        </th>
                        </tr>
                        </table>
                        <?
                        echo "<br /><br />";
                    }
                    ?>
                    <input type='submit' name='contact' value='Demo' class='contact demo'/>
                    </form>
                    </div> 
```

我的contact.js（当用户单击“演示”时从索引调用）：

```
$.get("data/contact.php", { r: $("input[name='test']:checked").val()}, function(data){
                // create a modal dialog with the data
                $(data).modal({
                    closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",
                    position: ["15%",],
                    overlayId: 'contact-overlay',
                    containerId: 'contact-container',
                    onOpen: contact.open,
                    onShow: contact.show,
                    onClose: contact.close
                });
            }); 
```

我的contact.php（模式显示此页面，试图输出帖子信息）：

```
<h1 class='contact-title'>Edit Generator(" . $_POST['test'] . "):</h1> 
```

-乍得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:10:29.023

据我了解，您想从外部 php 文件加载模式，因此您应该使用`GET`或`POST`参数传递变量，这是一个示例，您可以如何做到这一点，

# cantact.js

```
$.get("data/contact.php", { test: $("input[name='test']:checked").val()}, function(data){
    // create a modal dialog with the data
    $(data).modal({
        closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",
        position: ["15%",],
        overlayId: 'contact-overlay',
        containerId: 'contact-container',
        onOpen: contact.open,
        onShow: contact.show,
        onClose: contact.close
    });
}); 
```

# 联系人.php

```
<h1 class='contact-title'>Edit Generator(" . $_GET['test'] . "):</h1> 
```

* * *

`POST`并且`GET`是不同类型的 HTTP 请求方法。

在`jQuery`,

1.  如果你使用[$.get()](http://api.jquery.com/jQuery.get/)，你可以`$_GET`在 PHP 中获取参数。
2.  如果你使用[$.post()](http://api.jquery.com/jQuery.post/)，你可以`$_POST`在 PHP 中获取参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:23:11.107

```
$('form').submit(function(e){
  e.preventDefault();
  var ourVal = $('input:radio').val();

  $.modal('<div id="ourModal"><div id="modalText"></div></div>');
  $('#modalText').text(ourVal);
}); 
```

# .htaccess - tumblr 如何处理子域？

> ID：11387386
> 
> 赞同：1
> 
> 时间：2012-07-08T22:55:32.327
> 
> 标签：.htaccess, webserver, server-side, tumblr

Tumblr 如何处理*blogname* .tumblr.com 等帐户子域？它是 .htaccess 重定向吗？如果是这样，我可以使用什么代码在我的网站上制作类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:15:50.480

**Apache/2.2.3 (CentOS) && PHP**，所以它可以是*.htaccess*重定向，但我认为这是**服务器端和数据库**重定向，因为它比一个大的*.htaccess*文件更灵活、更快速的解决方案，每次你都会被锁定用新数据重写它。

相关链接：

*   [http://www.marco.org/2008/10/20/re-php-framework](http://www.marco.org/2008/10/20/re-php-framework)
*   [谁知道tumblr是用什么写的](https://stackoverflow.com/questions/3326136/anyone-know-what-tumblr-is-written-in)

# jquery - 如何在响应式设计中调用不同的 jquery 动作

> ID：11387391
> 
> 赞同：10
> 
> 时间：2012-07-08T22:56:39.317
> 
> 标签：jquery, responsive-design

我正在将我的项目转换为响应式设计。

您建议为每个断点实现不同的 jQuery 块的最方便和通用的解决方案是什么？

由于http请求的数量，我想将所有脚本保存在一个文件中。

这就是我发现的：

*   [breakpoint.js](http://xoxco.com/projects/code/breakpoints/) -> 定义所有在 CSS & JS 中加倍的断点
*   [http://responsejs.com/](http://responsejs.com/) -> 在正文数据属性中定义断点
*   [OnMediaQuery](http://www.springload.co.nz/love-the-web/responsive-javascript/) -> 为断点定义人类可读的名称（恕我直言，因为你没有绑定到像素）

我的问题是，它们都定义了回调，但我不知道在这些情况下如何绑定或取消任何 jQuery 事件侦听器。

例如我有：

```
$('#selector').click( function() {
    alert('selector clicked');
}); 
```

但这只有在最大宽度为 320 像素时才会发生。在屏幕尺寸高于该点击应返回 false 或执行任何其他操作

目前，我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-08T23:19:26.927

您可以在 JS 中创建自己的断点。像这样的东西。根据您的需要进行调整。

```
var isBreakPoint = function (bp) {
    var bps = [320, 480, 768, 1024],
        w = $(window).width(),
        min, max
    for (var i = 0, l = bps.length; i < l; i++) {
      if (bps[i] === bp) {
        min = bps[i-1] || 0
        max = bps[i]
        break
      }
    }
    return w > min && w <= max
}

// Usage
if (isBreakPoint(480)) { ... } // Breakpoint between 320 and 480 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-08T23:20:05.367

```
$('#selector').click(function() {
    if (parseInt($(window).width()) < 320) {
        ...
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-26T19:17:27.343

我弄乱了一些库和东西，最终使用了这种响应式侦听器。它使用 CSS 媒体查询作为断点，使用 UnderscoreJS 作为节流器。我看到的优点是断点都是在 CSS 中定义的，而不是分散在各种脚本周围。

在 上使用的示例 CSS`@media`断点：`:after``body`

```
body:after {
    content: 'widescreen';
    display: none;
}
@media screen and (max-width: 1024px){
    body:after {
        content: "extra-large";
    }
}
@media screen and (max-width: 768px){
    body:after {
        content: "large";
    }
}
@media screen and (max-width: 640px){
    body:after {
        content: "medium";
    }
}
@media screen and (max-width: 480px){
    body:after {
        content: "small";
    }
}
@media screen and (max-width: 320px){
    body:after {
        content: "tiny";
    }
} 
```

示例侦听器脚本等待基于`body:after`. 如您所见，在此示例中它被定义为 2 个范围，用于基于设备通用性的显示/隐藏/移动/创建小部件：

```
<script type ="text/javascript">
$(window).resize(_.debounce(function(e){
    var size = window.getComputedStyle(document.body,':after').content.replace(/"|'/g, ''),
        mobile = ["tiny", "small", "medium", "large"].indexOf(size),
        desktop = ["extra-large", "widescreen"].indexOf(size);

    $('.placehold').html('computed breakpoint: ' + size + '<br />mobile index = ' + mobile + '<br />desktop index = ' + desktop);

    if (mobile != -1) {
        $('.placehold2').html('mobile range');
    } else if (desktop != -1) {
        $('.placehold2').html('desktop range');
    }
}, 100)).trigger('resize');
</script> 
```

[http://jsfiddle.net/Dhaupin/nw7qbdzx/](http://jsfiddle.net/Dhaupin/nw7qbdzx/) - 只需调整 jsfiddle 中的输出窗格大小即可对其进行测试。

**编辑：**显然浏览器通过不同的方式呈现 :after 内容`window.getComputedStyle(document.body,':after').content`并插入单引号或双引号。添加了替换以清除它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-19T23:34:24.110

如果您的目标是现代浏览器（IE10 以上，而不是 IE 移动版），那么您应该使用新`window.matchMedia()`方法，因为所有各种浏览器之间关于它们如何测量滚动条宽度的差异意味着如果您使用例如`window.width()`，将会有小范围的像素，其中 CSS 的行为与 JS 不同（我发现这一点很难）。

本文详细介绍：[https ://www.fourfront.us/blog/jquery-window-width-and-media-queries](https://www.fourfront.us/blog/jquery-window-width-and-media-queries)

使用类似下面的东西，这样你的 JS 和 CSS 就可以在完全相同的断点上工作：

```
if (window.matchMedia("(min-width: 400px)").matches) {
  /* the viewport is at least 400 pixels wide, write code specific for that */
} else {
  /* the viewport is less than 400 pixels wide, write code specific for that */
} 
```

Mozilla 开发者网络在此处记录了这一点：[https ://developer.mozilla.org/en/docs/Web/API/Window/matchMedia](https://developer.mozilla.org/en/docs/Web/API/Window/matchMedia)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-26T10:03:52.693

如果您使用的是 Bootstrap 4，您可以使用这个 jQuery 插件通过检查元素的 CSS 显示属性来检查设置的断点。

[https://jacoblett.github.io/IfBreakpoint/](https://jacoblett.github.io/IfBreakpoint/)

然后像这样使用它

```
if ( xs == true ) { 
  alert("mobile first");
}

// Update on window resize
$( window ).resize( function(){
  $("h2").text( breakpoint ); 
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-10T12:36:14.350

你可以试试我的解决方案：

```
// Example for your Request
var clickCounter = 0;

$('#selector').click( function() {
    if (ifMaxWidth(320)) {
        console.log('selector clicked #'+ clickCounter++ +" times");
    }
});

// More examples
bpChecks();
$(window).on("orientationchange resize", function(event) { bpChecks(); });

function bpChecks()
{
    ifMinWidth(992, function() {
        console.log("hello from callback 1");
    });

    ifMaxWidth(1199, function() {
        console.log("hello from callback 2");
    });

    ifBetweenMinAndMaxWidth(992, 1199, function() {
        console.log("hello from callback 3");
    });
}

// Methods
function ifBetweenMinAndMaxWidth(minWidth, maxWidth, callback)
{
    var w = $(window).width();

    var result = w < maxWidth && w > minWidth;
    if (result) {
        console.log("width ("+ w +") is between "+ minWidth + " and " + maxWidth);
        if (callback !== undefined) { callback(); }
    } else {
        console.log("width ("+ w +") is NOT between "+ minWidth + " and " + maxWidth);
    }
    return result;
}

function ifMinWidth(minWidth, callback)
{
    var w = $(window).width();

    var result = w > minWidth;
    if (result) {
        console.log("width ("+ w +") is greater than "+ minWidth);
        if (callback !== undefined) { callback(); }
    } else {
        console.log("width ("+ w +") is NOT greater than "+ minWidth);
    }
    return result;
};

function ifMaxWidth(maxWidth, callback)
{
    var w = $(window).width();

    var result = w < maxWidth;
    if (result) {
        console.log("width ("+ w +") is smaller than "+ maxWidth);
        if (callback !== undefined) { callback(); }
    } else {
        console.log("width ("+ w +") is NOT smaller than "+ maxWidth);
    }
    return result;
};
```

```
#selector { 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  align-content: center;
  background: blue; 
  width: 250px; 
  height: 250px; 
}
#selector:hover { cursor:pointer; }
#selector p { color: white; }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div id="selector">
    <p>Click me</p>
</div>
```

# jquery - 根据各自点击的元素突出显示 div

> ID：11387393
> 
> 赞同：1
> 
> 时间：2012-07-08T22:56:59.010
> 
> 标签：jquery

我有五个 div

```
<div  id="box1">content 1</div>
<div  id="box2">content 2</div>
<div  id="box3">content 3</div>
<div  id="box4">content 4</div>
<div  id="box5">content 5</div> 
```

当我单击某个链接时，每个都会相应突出显示

```
<a class="light" id="1">link 1</a>
<a class="light" id="2">link 2</a>
<a class="light" id="3">link 3</a>
<a class="light" id="4">link 4</a>
<a class="light" id="5">link 5</a> 
```

这是我的jQuery

```
$(".light").live("click", function(){
var id = $(this).attr('id');
$("box"+id).css({'background':'red'});

}); 
```

停留在这一点上，当我单击另一个链接时，我想取消突出显示前一个框，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T22:58:00.720

你错过了这个`#`标志，请注意如果页面的文档类型不是 HTML5，`id`名称必须以字母 AZ 或 az 开头。

```
$(".light").live("click", function(){ // you can also use `on()` instead of `live()` which is deprecated
    var id = this.id;
    $('div[id^="box"]').css({'background':'none'})
    $("#box"+id).css({'background':'red'});
}); 
```

[演示](http://jsfiddle.net/2Frrr/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:03:09.250

嘿，看这里： http: [//jsfiddle.net/gehZ8/](http://jsfiddle.net/gehZ8/) **切换版本在这里** [http://jsfiddle.net/gehZ8/1/](http://jsfiddle.net/gehZ8/1/)

请注意您的 id as `number`，您可以这样做`var id = $(this).attr('id').replace(/a/, '');`会从字符串中获取最后一个数字，然后将其添加到您的 div 逻辑中，您可以随意玩耍`:)`

`live`如果您使用的是最新的 Jquery 使用`.on`事件，也可以代替。

希望这可以帮助，`B-)`

**代码**

```
$(document).ready(function() {
    $(".light").click(function() {
        var id = $(this).attr('id').replace(/a/, '');

        $("#box" + id).css({
            'background': 'red'
        });

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T23:01:09.900

如果您每次都突出显示并使用相同的颜色，则单击时应用/删除类会更容易。

**CSS**

```
.highlight{
  background-color: red;
} 
```

**jQuery**

```
$('.light').live('click', function(){
  var id = $(this).attr('id');
  $('[id^=box]').removeClass('highlight');
  $('#box'+id).addClass('highlight');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T23:17:08.640

## *[jsBin 演示](http://jsbin.com/ijorux/2/edit)*

你不需要`ID`周围的一切。只是类：

```
<a href="#" class="light">link 1</a>
<div class="box">content 1</div> 
```

并获取`index`点击的链接：

```
$("a.light").on("click", function(e){
    e.preventDefault();
    var thisIndex = $(this).index();
  $('.box').eq(thisIndex).css({background:'red'}).siblings().css({background:'none'});
}); 
```

我曾经`.eq()`首先使用 ; 指向相同的索引`.box`并定位所有其他框（以撤消背景）`.siblings()`；

[阅读 DOCS 了解更多精彩内容](http://api.jquery.com/)

如果要验证`href=""`链接的 HTML 使用属性，并且要防止默认单击行为，请使用 jQuery `e.preventDefault()`。

**我使用的`.on()`方法是 jQuery 1.7+`.live()`已弃用。**

# ubuntu - Monogame Linux 在启动时崩溃

> ID：11387399
> 
> 赞同：0
> 
> 时间：2012-07-08T22:57:58.397
> 
> 标签：ubuntu, mono, crash, monodevelop, monogame

从 Linux（Ubuntu 12.04）启动单人游戏时，我在控制台中收到以下错误

[Pastebin，粘贴在这里时的格式化不值得修复](http://pastebin.com/g2KpKNPp)

当我延迟任何逻辑的发生直到一定数量的游戏时间过去时，这个错误不会发生，但是必要的游戏时间量不断变化并且太长了。有什么方法可以解决此错误消息吗？

代码：初始化

```
public class Husk : Game
{
    public GraphicsDeviceManager graphics;
    public SpriteBatch regBatch;
    public World world;
    public static Texture2D pixel;
    string title;

    public Husk(string Title = "") // :base() seems to make the required elapsed time lesser.
    {
        title = Title;
        graphics = new GraphicsDeviceManager(this);
        HuskLib.Content.content = this.Content;
    }

    protected override void Initialize ()
    {
        regBatch = new SpriteBatch(graphics.GraphicsDevice);

        Window.Title = title;

        pixel = new Texture2D(graphics.GraphicsDevice, 1, 1);
        pixel.SetData<Color>(new Color[1]{Color.White});
    }
} 
```

我没有在我的游戏中使用任何线程，它可以通过 Monogame 在外部完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:06:20.693

您正在使用的库之一是引发分段错误 (SIGSEGV)。

我还在堆栈跟踪中看到您似乎正在使用线程。

我最好的猜测（没有看到任何源代码）是多个线程处于竞争状态。有时它们中的一个会达到期望数据被初始化的程度，但该数据尚未初始化。

如果您粘贴相关的源代码，您可能会得到更详细的帮助。

# iphone - InAppPurchase 无效的产品标识符 - 可能的原因

> ID：11387403
> 
> 赞同：12
> 
> 时间：2012-07-08T22:58:49.843
> 
> 标签：iphone, ios, ios5, in-app-purchase

在我的应用内购买试验中追查这个问题已经是一个漫长的夜晚，但我似乎无法解决这个问题。我的产品标识符不断返回为“无效的产品标识符”。希望有人指出；（使用当前的配置文件和 appId 我得到了推送通知）

1.  我的 App ID 已生成（没有通配符） - 已启用 inApp 购买

2.  我的 IAP（应用内购买）被添加到“管理您的应用内购买”中并被清除出售。

3.  我的 IAP 是在 24 小时前添加的（可能还要几个小时）并且处于“等待审核”状态

4.  我的应用程序本身被开发者拒绝 > 状态为“准备上传”，应用程序内购买已添加到应用程序中。

5.  我的手机没有越狱（至少现在没有，两种方式都没有）

6.  我正在使用 3GS、5.1 iOS。

7.  我当前的配置文件是“开发人员配置文件”而不是“分发配置文件”。“分发配置文件”仅在上传应用程序二进制文件时使用。

8.  我正在为 iOS 5.0 构建并且构建配置设置为调试。

9.  从字面上看，我现在删除了该应用程序 100 次。

10.  所有详细信息都在 iTunes Connect 中设置，包括银行详细信息。

11.  我创建了一个测试用户，并从设备上的“设置 > 商店”登录。

12.  我的`SKProductRequest`：

    ```
    SKProductsRequest *productRequest = [[SKProductsRequest alloc]initWithProductIdentifiers:[NSSet setWithObject:@"com.my_site.my_app.my_product"]]; 
    ```

可以提供任何其他信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T10:33:16.637

我不知道如何，也不知道它是否仍然有效。但这是一个有趣的解决方案，它让我解决了我的问题。

根据文档， SKProductRequest 应该是；

```
SKProductsRequest *productRequest = [[SKProductsRequest alloc]initWithProductIdentifiers:[NSSet setWithObject:@"com.my_site.my_app.my_product"]]; 
```

你的产品要求应该是这样的；

```
com.my_site.my_app.my_product 
```

但在我的情况下，我只是发送了我的产品 ID，就像这样，它**工作了**；

**解决方案#1**

```
SKProductsRequest *productRequest = [[SKProductsRequest alloc]initWithProductIdentifiers:[NSSet setWithObject:@"my_product"]]; 
```

在深入研究时，我发现对于某些人来说，这种表示法也有效；

**解决方案#2**

```
SKProductsRequest *productRequest = [[SKProductsRequest alloc]initWithProductIdentifiers:[NSSet setWithObjects:@"com.my_site.my_app","my_product",nil]]; 
```

我的设置没有问题，应该提供上面列出的东西，如果有人遇到无效产品标识符的问题，我建议他们访问 Troy Brant 的“无效产品 ID 列表的原因”，[这里](http://troybrant.net/blog/2010/01/invalid-product-ids/)。[您还可以在此处](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)找到他关于实施和设置 IAP 的详细演练。

如果您感到绝望，我强烈建议您尝试这两种解决方案，它们可以使您免于数小时的挫败感。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-27T05:27:21.693

请确保您没有错过以下列表中的任何内容。

*   请从设备中删除现有应用程序并从 Xcode 安装新版本。

*   您是否为您的 App ID 启用了应用内购买？

*   您项目的 .plist Bundle ID 是否与您的 App ID 匹配？

*   您是否为新的 App ID 生成并安装了新的配置文件？

*   您是否已将项目配置为使用此新的配置文件进行代码签名？

*   您在发出 SKProductRequest 时是否使用了完整的产品 ID？

*   将产品添加到 iTunes Connect 后，您是否等待了几个小时？

*   您的银行详细信息在 iTunes Connect 上是否有效？

*   你的设备越狱了吗？如果是这样，您需要恢复越狱才能使 IAP 正常工作。

**如果您对这些问题中的任何一个回答“否”，那就是您的问题。**

请参考[参考](https://stackoverflow.com/questions/1471454/storekit-in-app-purchase-invalid-product-identifiers)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-18T14:56:28.733

我的付费应用程序协议在 iTunes Connect 中无效。我一同意新的，它就解决了问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-14T13:10:03.837

就我而言，问题是我之前创建了“ *StoreKit 配置文件*”，然后在产品方案中进行了更改：

> 转到产品 > 方案 > 编辑方案并在选项下的运行/调试选项卡中选择 StoreKit 配置文件。

显然这个配置被用来代替我的 App Store Connect IAP。因此，解决方案是取消选中该选项。如果出于某种原因仍需要 StoreKit 配置文件，则不必删除它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T07:09:33.777

您正在使用最新的配置文件权利（在设置应用内购买后下载）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-13T22:26:43.397

花了几天的时间。这是我缺少的东西：

*   确保 iTunes Connect 中的 BundleID 与 Xcode 项目中的匹配。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-06T18:59:08.570

事情最终对我有用：

*   我使用 Xcode 自动配置文件，我在应用商店连接网页上与配置文件有点混淆。我确保 id 在 Xcode 和网页上匹配。
*   我只需要产品 ID，而不是完整的 com.company.app.product
*   我花了大约 2 个小时才完成工作，所以苹果服务器可能需要一些刷新时间

# c# - DatePicker 的 DisplayDates 未正确更新，并且不显示其新值

> ID：11387406
> 
> 赞同：0
> 
> 时间：2012-07-08T22:59:04.337
> 
> 标签：c#, wpf, datepicker

如果我在 dtpWeek1 中选择 8/6/2012，我希望下面的代码将 dtpWeek2 移动到 8/13，将 dtpWeek3 移动到 8/20，等等。

但是，无论我在 dtp1 中选择什么，它都会将 dtp2 移动到该月的第一天之后的一周（IOW，它始终是 8 号）。其余的 DatePickers（从 dtp3 到 dtp9）工作正常，因为它们比前一个多一周 - 但不是基于我在 dtp1 中选择的内容，因为它们始终是第 15、22 和29 日（大多数二月除外）。

就好像当我移到另一个月份时 DisplayDate 更改为 /1/ （这并非完全不合逻辑/令人惊讶），但是当我然后单击该月内的特定日期（例如 6 日）时，它会忽略它。

我使用了错误的事件吗？方法论错误？

```
private void dtpWeek1_SelectedDateChanged(object sender, SelectionChangedEventArgs e)
{
    dtpWeek2.DisplayDate = dtpWeek1.DisplayDate.AddDays(7);
    dtpWeek3.DisplayDate = dtpWeek1.DisplayDate.AddDays(14);
    dtpWeek4.DisplayDate = dtpWeek1.DisplayDate.AddDays(21);
    dtpWeek5.DisplayDate = dtpWeek1.DisplayDate.AddDays(28);
    dtpWeek6.DisplayDate = dtpWeek1.DisplayDate.AddDays(35);
    dtpWeek7.DisplayDate = dtpWeek1.DisplayDate.AddDays(42);
    dtpWeek8.DisplayDate = dtpWeek1.DisplayDate.AddDays(49);
    // TODO: Only add week 9 if it is within the month following the first month
    dtpWeek9.DisplayDate = dtpWeek1.DisplayDate.AddDays(56);
} 
```

此外，以编程方式分配其 DisplayDate 的所有 DatePicker 组件继续显示“选择日期” - 基于属性名称 (DisplayDate)，我希望它们实际显示它们的 DisplayDate。他们为什么不呢？我怎样才能让他们真正这样做？如果我单击它们将它们放下，我会看到上面描述的日期（8 日、15 日等），但他们为什么要这样隐藏他们的“光”呢？

最后，附带说明一下，以这种方式编写代码的后果是什么（我认为这可能会更慢甚至不可靠）：

```
private void dtpWeek1_SelectedDateChanged(object sender, SelectionChangedEventArgs e)
{
    dtpWeek2.DisplayDate = dtpWeek1.DisplayDate.AddDays(7);
    dtpWeek3.DisplayDate = dtpWeek2.DisplayDate.AddDays(7);
    dtpWeek4.DisplayDate = dtpWeek3.DisplayDate.AddDays(7);
    dtpWeek5.DisplayDate = dtpWeek4.DisplayDate.AddDays(7);
    dtpWeek6.DisplayDate = dtpWeek5.DisplayDate.AddDays(7);
    dtpWeek7.DisplayDate = dtpWeek6.DisplayDate.AddDays(7);
    dtpWeek8.DisplayDate = dtpWeek7.DisplayDate.AddDays(7);
    dtpWeek9.DisplayDate = dtpWeek8.DisplayDate.AddDays(7);
} 
```

* * *

将代码更改为：

```
 dtpWeek2.SelectedDate = dtpWeek1.DisplayDate.AddDays(7);
    dtpWeek3.SelectedDate = dtpWeek1.DisplayDate.AddDays(14);
    dtpWeek4.SelectedDate = dtpWeek1.DisplayDate.AddDays(21);
    dtpWeek5.SelectedDate = dtpWeek1.DisplayDate.AddDays(28);
    dtpWeek6.SelectedDate = dtpWeek1.DisplayDate.AddDays(35);
    dtpWeek7.SelectedDate = dtpWeek1.DisplayDate.AddDays(42);
    dtpWeek8.SelectedDate = dtpWeek1.DisplayDate.AddDays(49);
    dtpWeek9.SelectedDate = dtpWeek1.DisplayDate.AddDays(56); 
```

解决了日期不显示的问题。但是，他们仍然表现得好像我选择了 8/1 而不是 8/6。这些值为：

```
8/6
8/8
8/15
8/22
8/29
etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:36:00.550

好的，将评论变成答案：该`SelectedDate`属性应该像这样使用：

```
dtpWeek2.SelectedDate = dtpWeek1.SelectedDate.Value.AddDays(7); 
```

`SelectedDate`是`DateTime?`（可为空的），因此`.Value`在右侧。

# c# - 使用海洋在 Petrel 3D 窗口中绘制地震体积墙

> ID：11387411
> 
> 赞同：2
> 
> 时间：2012-07-08T22:59:46.453
> 
> 标签：c#, ocean, petrel

我可以通过海洋以编程方式在 3D 窗口中绘制 3D 地震数据体渲染吗？

我可以使用 Window3d.showobject(seismic_cube) 绘制随机内联/xline，但我想直接查看体积渲染而不进入设置选项卡。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:07:11.007

不，不可能使用 Ocean 以体渲染格式显示地震数据。

# asp.net - Linq 和 EF4，内连接条件语句

> ID：11387412
> 
> 赞同：1
> 
> 时间：2012-07-08T22:59:52.263
> 
> 标签：asp.net, asp.net-mvc-3, linq, entity-framework-4

```
OrdersRepository ordersRepository = new OrdersRepository();

var productInQuery = ordersRepository.ProductIn;
var orderInfoQuery = ordersRepository.OrderInfo;

var result = (from p in productInQuery
              from o in orderInfoQuery
              where p.refNo == o.refNo
              select new {
                 t1 = p.no,
                 t2 = o.no}).ToArray(); 
```

我为内部连接编写了上面的代码。我想**为 OrderInfo context 添加一些条件语句**。

```
...

if(orderDate != DateTime.MinValue){
   orderInfoQuery = orderInfoQuery.Where(x => x.orderDate == orderDate); 
}

// also I tried this too. no is integer in Mysql and I'm sure there is 222 value.
// but still it return always null...
orderInfoQuery = orderInfoQuery.Where(x => x.no == 222);

var result = (from p in productInQuery
                  from o in orderInfoQuery
                  where p.refNo == o.refNo
                  select new {
                     t1 = p.no,
                     t2 = o.no}).ToArray(); 
```

我添加了条件语句，但**它始终返回 null**。（我检查 DB(Mysql) 值是否存在）

它不是**内部连接**吗？

```
var result = (from p in productInQuery
              join o in orderInfoQuery on p.refNo equals o.refNo
              select new {
                 t1 = p.no,
                 t2 = o.no}).ToArray(); 
```

有哪位知道的，请指教~

谢谢！

[编辑]

OMG，我很抱歉，productIn 和 orderInfo 永远不会匹配。这就是为什么它总是返回 null。

请问我可以再问一次吗，

```
var result = (from p in productInQuery
  join o in orderInfoQuery on p.refNo equals o.refNo
  join x in productQuery on p.productNo equals x.no
  join t in productOutQuery on p.no equals t.productInNo into productIn
  from t in productIn.DefaultIfEmpty()
  orderby o.processDate descending
  select new
  {
      qty = p.qty,
      dateIn = o.processDate,
      dateOut = (DateTime?)(from m in orderInfoQuery where m.refNo == t.refNo select m.processDate).FirstOrDefault(),
      etaDate = (DateTime?)(from w in orderInfoQuery where w.refNo == t.refNo select w.eta).FirstOrDefault(),  
  }).ToArray(); 
```

这是我的 linq 代码，我现在想通过 etaDate 进行搜索。

我该如何编写 linq 代码。在上面的代码中，etaDate 只是子查询。我想得到

etaDate 与特定日期完全匹配的日期。

请问你能帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:31:43.643

您可能需要确保此处两个日期之间的类型：

```
orderDate != DateTime.MinValue 
```

和这里：

```
x.orderDate == orderDate 
```

日期格式相同。如果一个值具有不同的格式或增加了额外的精度，那么条件总是会失败。

# c++ - 调用默认构造函数

> ID：11387415
> 
> 赞同：2
> 
> 时间：2012-07-08T23:00:41.510
> 
> 标签：c++

我需要用户在 main() 中输入两个 bool 值，然后将其作为参数输入到单独文件中的类函数中。但是，如果没有输入布尔值，我也希望用户调用类中的默认构造函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:08:35.850

实现一个采用默认参数的构造函数。例如

```
 TestClass(bool bVal1 = false, bool bVal2 = false); 
```

您根据需要更改以实现所需的默认行为，然后如果您创建这样的实例

```
 TestClass test_instance;   // constructor uses default args
  TestClass test_instance2(true,false);  // constructor uses specified args 
```

那么构造函数会将参数视为构造函数声明中设置的默认值（如果没有提供）。

或者有2个构造函数

```
 TestClass();
  TestClass(bool bVal1, bool bVal2); 
```

并让类的用户使用合适的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:26:49.253

考虑以下情况：

```
struct Test {
  bool val1, val2;

  Test(bool val1, bool val2) : val1(val1), val2(val2) { }
}; 
```

最干净的解决方案看起来有点像这样：

```
int main() {
  bool val1 = true, val2 = true;//init with defaults
  if(userWantsToChangeDefaults) std::cin >> val1 >> val2;//obviously this is more or less pseudocode
  Test test(val1, val2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T23:32:09.043

只是为了证实[我的提示“使用解析器”](https://chat.stackoverflow.com/transcript/message/4434575#4434575)，这里有一个非常非常简单（阅读：缺少所有输入验证）的方法，基于 Boost Spirit。

你可以用普通的 IO 流来写这个，你基本上会得到@MFH 发布的内容。根据上下文，更简单的方法可能更合适。

```
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/support_istream_iterator.hpp>

struct MyClass
{
    bool _a, _b;
    MyClass(bool a, bool b) :_a(a), _b(b) { }
    MyClass(){}
};

BOOST_FUSION_ADAPT_STRUCT(MyClass,(bool,_a)(bool,_b));

namespace qi    = boost::spirit::qi;

int main()
{
    std::cin.unsetf(std::ios::skipws);
    boost::spirit::istream_iterator f(std::cin), l;

    MyClass data;
    using namespace qi;

    auto optbool = bool_ | attr(false);

    if (phrase_parse(f,l, 
            (optbool >> optbool),
            qi::blank, data))
    {
        std::cout << "data._a: " << std::boolalpha << data._a << "\n"
                  << "data._b: " << std::boolalpha << data._b << "\n";
    } else
        std::cerr << "Illegal input\n";
} 
```

# javascript - 如何动态更改 div 的高度？

> ID：11387416
> 
> 赞同：0
> 
> 时间：2012-07-08T23:00:56.450
> 
> 标签：javascript, html

我有一个`<div id="right_side_bar">`CSS：

```
#right_side_bar{
margin-top:38px;
    width:272px;
    margin-left:722px;
    background-color:#FFF;
    padding-bottom:20px;
    overflow-y:scroll;
} 
```

我在堆栈上看到了类似的问题，但我不知道如何让 right_side_bar 改变它的高度，以便它总是 100% 的窗口。我希望它被修复，这样它就不会随着页面的其余部分滚动。但正是 Gawker.com 在 div 本身可滚动的情况下做到这一点的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:03:42.423

这很简单：

```
#right_side_bar {
    position: fixed;
    top: 38px;
    bottom: 20px;
    background-color: white;
    overflow-y: scroll;
    width: 272px;
} 
```

# javascript - 选择下拉菜单的 OnBlur 效果

> ID：11387418
> 
> 赞同：0
> 
> 时间：2012-07-08T23:01:00.793
> 
> 标签：javascript, jquery

我有一个选择下拉菜单，如果用户单击该选择下拉菜单的“外部”，我希望它消失。这是我目前拥有的：

```
$(this).html($("<select/>", {
  id: 'sel',
  change: function() {
    selectdone(this, title_id, status_type);
  },
  blur: function() {
    selectdone(this, title_id, status_type);
  }, 
```

在上面，如果我在下拉列表之外单击，则不会发生任何事情。函数触发的唯一时间是我**更改**了选择下拉列表的值。

我将如何完成上述操作，以便当用户单击选择下拉列表之外的文档上的任何位置时，它会触发此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:12:51.480

我不认为这是可能的。[正如在另一个答案](https://stackoverflow.com/a/6823748/402706)中指出的那样，活动似乎`<select>`正在禁止接受其他输入。

[请参阅我更新的小提琴](http://jsfiddle.net/X8kwn/2/)。请注意，当您单击背景时，您会`test`在选择**未**展开时收到警报。当它**展开**并单击关闭时，警报不会触发。这似乎是浏览器的默认行为。在激活选择时，它似乎忽略了所有其他输入（包括鼠标移动）。

`selectedIndex`但是，我可以通过将-1设置为任何选定元素来触发您的事件。这样，任何有效的选项都会导致更改。

## [例子](http://jsfiddle.net/X8kwn/3/)

```
$(function(){    
    var title_id = '', status_type = ''; 
    $('body').html(
        $("<select/>", {
            id: 'sel',
            change: function() {
                selectdone(this, title_id, status_type);
            },
            blur: function() {
                selectdone(this, title_id, status_type);
            }
        })
        .append($('<option />', { 'text':'one'}))
        .append($('<option />', { 'text':'two'}))
    );

    $('#sel').prop('selectedIndex', -1); 
});

function selectdone(element, titleid, statustype){
    $(element).hide().prop('selectedIndex', -1); 
} 
```

# sql - 直接访问 SQL 函数或使用 WCF 服务与 SQL 函数对话——用于实现业务规则

> ID：11387419
> 
> 赞同：0
> 
> 时间：2012-07-08T23:01:02.450
> 
> 标签：sql, wcf

我们有一个数据库程序员团队，但公司没有网络程序员。因此将软件开发应用程序外包给了第三方。

数据库位于该软件应用程序的末端。我们负责该数据库的模式。该软件有许多网页屏幕，只要用户在屏幕上执行操作，它们就应该满足一组业务规则。我们正在考虑为这个业务规则实现构建一组 SQL 函数。我们将向 Web 开发人员公开一组 SQL 函数，这将允许他们验证业务规则并通知用户是否可以在屏幕上完成特定操作。

最近我读到了 WCF 服务。您可以创建一组 WCF 服务，Web 开发人员将在其代码中使用这些服务来验证业务规则。

我应该让 Web 开发人员直接访问 SQL 函数还是为每个业务规则创建 WCF 服务。这些 WCF 服务最终会在它们的实现中调用 SQL 函数。在这种情况下，哪个是更好的方法

1) 直接访问 SQL 函数或

2) 创建最终调用 SQL 函数的 WCF 服务

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:02:18.030

我更喜欢使用 WCF 来公开功能，因为它比每个直接访问数据库的客户端更具可扩展性。您可以使用[WCF 数据服务](http://msdn.microsoft.com/en-us/data/aa937697)来公开 CRUD 功能以及在那里执行的业务规则。

# python - 基数为 10 的 int() 的无效文字：'on' Python-Django

> ID：11387424
> 
> 赞同：7
> 
> 时间：2012-07-08T23:01:49.290
> 
> 标签：python, django-views

我正在从官方 django 教程中学习 django。当我从表单中投票时，我收到了这个错误。这可能是由 views.py 下的投票功能引起的

这是我的views.py/投票功能：

```
def vote(request,poll_id):
    p=get_object_or_404(Poll, pk=poll_id)
    try:
            selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
            return render_to_response('polls/detail.html', {'poll':p,
                                                            'error_message' : "didint select anything ",}, context_instance= RequestContext(request))

    else:
            selected_choice.votes += 1
            selected_choice.save()
            return HttpResponseRedirect(reverse('polls.views.results', args=(p.id,))) 
```

这是错误消息屏幕：

> **ValueError 在 /polls/2/vote/
> 
> 以 10 为底的 int() 的无效文字：'on'**
> 
> 请求方式：POST 请求网址：127.0.0.1:8000/polls/2/vote/
> 
> Django 版本：1.4 异常类型：ValueError 异常值：int() 的无效文字，基数为 10：'on' 异常位置：/usr/local/lib/python2.7/dist-packages/django/db/models/fields/ get_prep_value 中的**init .py，第 537 行**

这是我的 polls/urls.py ：

```
from django.conf.urls import patterns, include, url 
```

urlpatterns = patterns('polls.views',

```
 url(r'^$', 'index'),
    url(r'^(?P<poll_id>\d+)/$','detail'),
    url(r'^(?P<poll_id>\d+)/results/$','results'),
    url(r'^(?P<poll_id>\d+)/vote/$','vote'), 
```

)

这是 project/urls.py ：

```
from django.conf.urls import patterns, include, url 
```

urlpatterns = patterns('polls.views',

```
 url(r'^$', 'index'),
    url(r'^(?P<poll_id>\d+)/$','detail'),
    url(r'^(?P<poll_id>\d+)/results/$','results'),
    url(r'^(?P<poll_id>\d+)/vote/$','vote'), 
```

)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T23:19:10.997

当您尝试将字符串转换为整数时会收到此错误，但该字符串实际上不包含任何数字：

IE

```
number = int(string) 
```

从您的代码中，我在三个地方看到了整数的使用和可能的转换。当`p=get_object_or_404(Poll, pk=poll_id)`我们假设您已正确地将整数作为 poll_id 传递时。您能否发布与此视图相关联的 urlpattern 和示例 URL？

您还做出了一个假设，该假设`request.POST['choice']`将是一个整数并且可以这样转换。您没有捕获与此相关的异常，因此您需要检查此条目的值是什么。我会为此部分添加一些其他检查：

```
if request.method=="POST":
    choice = request.POST.get('choice', None)
    if choice is not None:
        selected_choice = p.choice_set.get(pk=choice)
... 
```

这两个最突出。

请发布您的 urlpattern 和更多您收到的错误消息（例如哪个特定行引发了您的异常）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-01T13:30:53.087

是的，我遇到了同样的错误，@cianof 解释的问题出在模板 polls/detail.html 和其他模板中。当您粘贴教程中的代码并且您的编辑器中有 80 个字符的边距时，会发生错误。

```
<input type="radio" name="choice" id="choice {{ forloop.counter }}" value="{{
choice.id }}" /> 
```

这不起作用，因为choice.id 靠近大括号`{{choice.id }}`，您应该始终在以下之间留一个空格：`{{ choice.id }}`

关于@garromark 发布的选角答案，我不能说什么，我是 Python 和 Django 编码的新手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-17T23:24:49.207

我也有这个错误。

我的情况是我的表单模板中有错字。仔细检查投票详细信息模板（“polls/detail.html”）是否有错别字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-17T08:53:17.950

我发生了同样的错误。我发现出了什么问题，原来只是一些小细节： 首先，在我的“polls/detail.html”模板中，有一个输入：

`<input type="radio" name="choice" id="choice {{forloop.counter}}" value="{{choice.id}}"/>`我`{{choice_id}}`以前有这就是为什么它没有得到价值。

其次，另一个错误说我的'polls/result.html'没有找到，然后我进入这个模板我发现了一个愚蠢的错误：

`<a href="{% url 'polls:detail' question.id %}">Vote again?</a>`

在标签里面，我有'polls.detail'，难怪找不到模板。;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-31T10:29:24.590

我收到了类似的错误。问题隐藏在这里：

```
def results(request, question_id):
    question = get_object_or_404(Question, pk=question_id)
    return render(request, 'polls/results.html', {'question: question'}) 
```

# xcode - XCode - 将目标移动到不同的项目

> ID：11387429
> 
> 赞同：4
> 
> 时间：2012-07-08T23:02:50.920
> 
> 标签：xcode, frameworks

我创建了一个 Xcode 项目，其中包含一个应用程序和一个框架。我想将框架移到另一个项目中。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:22:43.990

想通了...只需创建一个新项目并移动文件，然后在旧项目中删除该目标

# linq - Payload-LINQ 的含义

> ID：11387430
> 
> 赞同：-3
> 
> 时间：2012-07-08T23:02:53.363
> 
> 标签：linq, streaminsight

我是 LINQ 的新手，上面的代码对我来说执行得很好。

但我不明白为什么在最后一句中写的是 c.payload.Quantity 而不是 c.Quantity。

当我用谷歌搜索时，我知道值 Quantity 是从我们从 c 中的结果中获得的有效负载中获得的，这是否意味着有效负载是 filterQuery 的最终输出？

```
var orderData = new[]
{
 new {OrderDate = new DateTime(2011,1,1,8,30,00), ItemID = "100", UnitPrice = 0.99, Quantity =5},
 new {OrderDate = new DateTime(2011,1,1,8,31,00), ItemID = "200", UnitPrice = 3.99, Quantity =2},
 new {OrderDate = new DateTime(2011,1,1,9,02,00), ItemID = "200", UnitPrice = 1.50, Quantity =1},
 new {OrderDate = new DateTime(2011,1,1,9,07,00), ItemID = "100", UnitPrice = 4.10, Quantity =3}
};

var orders = orderData.ToPointStream(Application,ev=>PointEvent.CreateInsert(ev.OrderDate,ev),AdvanceTimeSettings.StrictlyIncreasingStartTime);

var filterQuery = from o in orders where o.Quantity>=2 select o;

(from o in filterQuery.ToIntervalEnumerable() where o.EventKind == EventKind.Insert 
select new {o.StartTime,o.EndTime,o.Payload.Quantity}).Dump("Heading"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:22:06.883

从 StreamInsight API 和事件模型到普通旧 .NET 序列的 ToIntervalEnumerable 转换。在后者中，除了有效负载之外，您还可以访问系统字段 StartTime、EndTime 和 EventKind。为了避免命名冲突，需要封装有效负载（想象由用户定义的有效负载有一个字段“StartTime”！）。这就是 Payload 字段的含义。

# php - PHP: header() 和 include/include_once/require/require_once

> ID：11387433
> 
> 赞同：1
> 
> 时间：2012-07-08T23:03:24.893
> 
> 标签：php, redirect, include, require

我正在调用 header('Location: [http://foo.com/foo/](http://foo.com/foo/) '); 在使用包含函数调用（无输出）的文件调用 include() 之后的文件中。每当我调用 include() 时，PHP header() 重定向都不起作用。这只发生在服务器上。无论我包含哪个 PHP 文件，都会发生这种情况。（本地文件在开发过程中上传到服务器。）

* * *

好吧，实际上我在 DOCTYPE 声明之前得到了一个空白字符，这非常糟糕！无论我包含一个还是两个文件，我都会得到一个空白字符。

```
 Neil@NEILCOMPUTER /c/wamp/www/workspace/worknet
    $ curl --verbose http://timescapezonecom.ipage.com/worknet/foo.php
    * About to connect() to timescapezonecom.ipage.com port 80 (#0)
    *   Trying 66.96.147.110... connected
    * Connected to timescapezonecom.ipage.com (66.96.147.110) port 80 (#0)
    > GET /worknet/foo.php HTTP/1.1
    > User-Agent: curl/7.21.1 (i686-pc-mingw32) libcurl/7.21.1 OpenSSL/0.9.8k zlib/1.2.3
    > Host: timescapezonecom.ipage.com
    > Accept: */*
    >
    < HTTP/1.1 302 Found
    < Date: Sun, 08 Jul 2012 23:19:12 GMT
    < Content-Type: text/html; charset=iso-8859-1
    < Content-Length: 206
    < Connection: close
    < Server: Nginx / Varnish
    < X-Powered-By: PHP/5.2.17
    < Set-Cookie: PHPSESSID=0310603f03176770c3feb46ea93d9fd3; path=/
    < Expires: Thu, 19 Nov 1981 08:52:00 GMT
    < Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
    < Pragma: no-cache
    < Location: http://www.google.com
    <
     <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
    <html><head>
    <title>302 Found</title>
    </head><body>
    <h1>Found</h1>
    <p>The document has moved <a href="http://www.google.com">here</a>.</p>
    </body></html>
    * Closing connection #0 
```

另一方面，当我在 foo.php 中不包含任何文件时，我在 doctype 之前得到一个零，我也觉得这很奇怪：

```
 Neil@NEILCOMPUTER /c/wamp/www/workspace/worknet 
    $ curl --verbose http://timescapezonecom.ipage.com/worknet/foo.php
    * About to connect() to timescapezonecom.ipage.com port 80 (#0)
    *   Trying 66.96.147.110... connected
    * Connected to timescapezonecom.ipage.com (66.96.147.110) port 80 (#0)
    > GET /worknet/foo.php HTTP/1.1
    > User-Agent: curl/7.21.1 (i686-pc-mingw32) libcurl/7.21.1 OpenSSL/0.9.8k zlib/1.2.3
    > Host: timescapezonecom.ipage.com
    > Accept: */*
    >
    < HTTP/1.1 302 Found
    < Date: Sun, 08 Jul 2012 23:25:28 GMT
    < Content-Type: text/html; charset=iso-8859-1
    < Content-Length: 206
    < Connection: close
    < Server: Nginx / Varnish
    < X-Powered-By: PHP/5.2.17
    < Set-Cookie: PHPSESSID=98c60264dbcdd024d91bae25db848186; path=/
    < Expires: Thu, 19 Nov 1981 08:52:00 GMT
    < Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
    < Pragma: no-cache
    < Location: http://www.google.com
    <
    0<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
    <html><head>
    <title>302 Found</title>
    </head><body>
    <h1>Found</h1>
    <p>The document has moved <a href="http://www.google.com">here</a>.</p>
    </body></html>
    * Closing connection #0 
```

这是文件 foo.php：

```
 <?php
        session_start();

        // I added the require just to make sure nothing is being printed there
        // (an error for example)
    //    require_once('include/connect.php');
    //   require_once('include/util.php');

        header("Location: " . "http://www.google.com");
        exit;
    ?> 
```

我真的很想知道文件开头的 0 来自哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:47:36.857

强烈建议不要对非模板文件使用 php 的结束标记。

```
<?php //VERY first line, no whit space
  // code
  // NO ?> *anywhere* 
```

通常它是 ?> 之后的换行符，这会导致您的错误。

# python - 属性错误：丰富的对比配置

> ID：11387439
> 
> 赞同：4
> 
> 时间：2012-07-08T23:04:55.767
> 
> 标签：python

我有一个`Point`具有`x`和`y`属性的类。我想`False`将一个`Point`对象与任何其他类型的对象进行比较。例如，`Point(0, 1) == None`失败：

```
AttributeError: 'NoneType' object has no attribute 'x' 
```

班上：

```
class Point():

    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __eq__(self, other):
        return self.x == other.x and self.y == other.y

    def __ne__(self, other):
        return not self.__eq__(other) 
```

如何配置`__eq__`以`False`与任何其他对象类型进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T23:08:57.313

我会检查另一个对象是否像一个`Point`对象而不是拒绝所有非`Point`对象：

```
def __eq__(self, other):
  try:
    return self.x == other.x and self.y == other.y
  except AttributeError:
    return False 
```

这样`Point(1, 1) == Vector(1, 1)`，如果您使用坐标向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:07:42.643

```
def __eq__(self, other):
    if not isinstance(other, Point):
        return False
    try:
        return self.x == other.x and self.y == other.y
    except AttributeError:
        return False 
```

首先检查类型，如果不是 Point 实例则返回 False。我们这样做是为了以防他们比较其他一些碰巧具有`x`or`y`属性但不一定是相同上下文的类型。

第二个捕获属性错误，以防有人继承 Point 并删除属性或以某种方式更改 Point。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T23:07:45.370

试试这个：

```
def __eq__(self, other):
        return isinstance(other, Point) and self.x == other.x and self.y == other.y 
```

# ios - 游戏中心：如何获得用户的分数？

> ID：11387443
> 
> 赞同：0
> 
> 时间：2012-07-08T23:05:47.667
> 
> 标签：ios, xcode4, game-center, gamekit

我做了一个游戏中心支持的游戏，它登录用户并正确提交他的分数，但我现在需要游戏从游戏中心获取分数，让用户在他必须恢复他的设备时检索他的分数或在其他设备中继续比赛。抱歉，如果问题没有正确发布，有人可以帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:11:03.560

如果用户使用相同的游戏中心 ID 登录，当您展示 GKLeaderBoardViewController 时，他的分数将自动同步。我从这个问题中唯一不明白的是“或在不同的设备中继续比赛”。

`GKLeaderBoard`有这个方法：

```
- (void)loadScoresWithCompletionHandler:(void (^)(NSArray *scores, NSError *error))completionHandler 
```

它会为您返回一系列分数，从那里开始，由您自己进行实验并提取所需的分数。`GKLeaderboardTimeScopeAllTime`如果您将分数用作计数器，则提示将 GKLeaderBoard 的 timeScope 设置为。

此外，如果您只是将分数用作计数器而没有其他用途，为什么不使用 iCloud 在设备之间同步进度。它更加自动化，并且不需要玩家拥有游戏中心。

# rest - 使用从 REST 服务返回的文本的最简单方法

> ID：11387455
> 
> 赞同：1
> 
> 时间：2012-07-08T23:08:39.257
> 
> 标签：rest, iframe, xmlhttprequest, jsonp, restful-url

我需要在我的网页上显示一个从 REST 服务返回的简单文本字符串。我目前正在使用 XMLHttpRequest：

```
<div id="returnedText"></div>
<script type="text/javascript">
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() {
    if(xhr.status == 200 && xhr.readyState == 4) {
    document.getElementById("returnedText").innerHTML=xhr.responseText;
}
};
xhr.open("GET",url,true);
xhr.send(null);
</script> 
```

没有更轻松的方法吗？我考虑过使用脚本标记，但有问题的 Web 服务不支持 JSONP。我还用 iframe 做了一个天真的尝试（将 REST url 作为 src），但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:10:55.223

我对 iframe 进行了另一次尝试，实际上效果很好：

```
<iframe src="url"></iframe> 
```

其中 url 是 REST 服务调用。

我第一次肯定做错了什么（可能是身份验证问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:36:04.927

好吧，iframe 路由很笨重，因为您要将 REST 响应加载到其中，然后通过 JS 访问它以获取响应。更重要的是，它会在浏览器的地址栏区域造成可见的负载。AJAX 的出现是为了消除 iframe hack :)

JSON-P 需要与 AJAX 一样多的设置，如果您的服务器不支持回调，那是一个无启动的。

AJAX 不需要被认为很重。将其加入到自己的实用程序功能中，或者更好的是，使用一个库，它可以在一行中完成这样的请求。jQuery 示例：

```
$.get('some/path').done(function(response) { /* do something */ }); 
```

# css - P 标签在 Firefox 中的显示低于 Internet Explorer，使用 CSS

> ID：11387456
> 
> 赞同：0
> 
> 时间：2012-07-08T23:08:51.317
> 
> 标签：css

我创建了一个在 Internet Explorer 上看起来很完美的网站，但是当它使用 Firefox 加载时，某些元素不对齐。

例如，将出现在坐标 20、20 上的 ap 标签将出现在 Firefox 中的坐标 20、40 上。出于某种原因，Firefox 更改了我的 p 标签的 'top' 属性，使得它们在火狐，比ie。请注意，“左”属性保持不受阻碍，但“顶部”（或 y 坐标）的值每次都会增加约 20 个像素！

我想知道为什么我的 P 标签出现在 Internet Explorer 中的正确位置，但在 Firefox 中却较低？

下面是我用于每个 p 标签的代码。如果您要在网页中使用相同的代码，您会清楚地看到 p 标签在 firefox 中的显示低于每次在 ie 中的显示。

```
p.myparagraph
{position: absolute;
 left:     20px;
 top:      170px;
 width: 20px;
 height: 19px;
 background-color:0033dd;
} 
```

**为什么我的 p 标签在 Firefox 中比在 Internet Explorer 中显示低 30 像素？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T23:17:02.107

默认情况下，每个浏览器都有自己的 CSS。为了解决这个问题，在应用自定义 CSS 之前使用某种 CSS 规范化（如 @You 所指出的）是一种很好的做法。**建议使用 CSS 规范化而不是彻底重置**，因为它

*   与许多 CSS 重置不同，保留有用的默认值。
*   规范化各种元素的样式。
*   更正错误和常见的浏览器不一致。

来源：[Normalize.css](http://necolas.github.com/normalize.css/)

另外，请检查[Initializr](http://www.initializr.com/)。它提供了更多功能，包括 IE6+ 兼容性/回退等。

如果不是这样，您可以使用基本的 CSS 重置，

```
html, body, div, span, applet, object, iframe, 
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
   margin: 0;
   padding: 0;
   border: 0;
   font-size: 100%;
   font: inherit;
   vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
   display: block;
}
body {
   line-height: 1;
}
ol, ul {
   list-style: none;
}
blockquote, q {
   quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
   content: '';
   content: none;
}
table {
   border-collapse: collapse;
   border-spacing: 0;
} 
```

来源： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:25:03.963

尝试使用重置样式表，然后自己设置所有样式。

我的重置样式表为大量标签（包括 P）设置了垂直对齐样式：基线；

这可能会有所帮助。

# jsoup - 获取 jsoup 中元素的字符偏移量

> ID：11387458
> 
> 赞同：6
> 
> 时间：2012-07-08T23:09:11.230
> 
> 标签：jsoup, lexical-analysis

我需要将 jsoup 元素映射回源 HTML 中的特定字符偏移量。换句话说，如果我的 HTML 看起来像这样：

```
Hello <br/> World 
```

我需要知道“Hello”从偏移量 0 开始，长度为 6 个字符，`<br/>`从偏移量 6 开始，长度为 5 个字符，等等。

我在返回此信息的 Element javadoc 中找不到 getter。可以找回吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:10:36.333

我不相信 Jsoup 有这个功能。这个问题似乎比 HTML 解析更接近词法分析。

我会编写一个语法，然后针对该语法编写一个词法分析器，它将标记 HTML，并提供您正在寻找的偏移量。

首先，使用 Jsoup 解析文档以验证它是有效的 HTML。

然后，根据语法对文档进行词法分析。语法可能如下所示：

```
Document := {optional-opening-tag} | {literal} {optional-opening-tag} | {optional-closing-tag}

optional-opening-tag := ["<" {literal} ">" {optional-opening-tag}|{literal} ] | ""

optional-closing-tag := "</ {literal} ">" | ""

literal := any string of characters not beginning with whitespace, or containing "<" 
```

将您找到的每个标记插入到存储标记、第一个字符的索引和长度的对象中。

# javascript - 如何在仅 HTML/jquery 的多页应用程序中处理脚本和 css 文件的链接

> ID：11387466
> 
> 赞同：0
> 
> 时间：2012-07-08T23:10:09.207
> 
> 标签：javascript, html, jquery-mobile, cordova

这是一个想法 - 构建一个基于 HTML5/jquery/jquerymobile/本地存储的移动/平板电脑应用程序，旨在通过 Phonegap 或 Nomad 进行本地移动设备支持。

这本身不是问题，而且基本上正在进行中。该应用程序最初是一个 .net Razor/MVC，但看起来它只是为了使用 Phonegap/Nomad 而进入 HTML5 页面，因此失去了 Layouts/Masterpages 的能力。

问题是有没有办法处理与链接到 javascript 和 css 资源有关的母版页类型功能，这样如果我们更改或更新，我们就不必手动更新多个文件？该应用程序可能会有大约 20 个单独的页面，我不想构建一个包含所有“页面”的大 HTML 页面，那样会变得太混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:42:19.980

嗨，杰夫，欢迎来到 SO（堆栈溢出）。好消息是，由于它是一个 phonegap 应用程序，您只需在您的应用程序开始的索引页面中定义 css 或 js 文件。其余的可以是“页面片段”。JQM 将利用 ajax 加载其他页面，并且`<head>`无论如何都会忽略该部分。JQM 只是查找`<div data-role="page">`并将其插入第一页。因此，请随时保持简单，并使用以下内容：

```
<div data-role="page">
    <div data-role="header">
        <h1>Page Fragment</h1>
    </div>
    <div data-role="content">
        <p>This page gets pulled into the first pages dom when you click on the link to it.</p>
    </div>
</div> 
```

**请注意，您不希望在 web 应用程序中执行此操作，因为有人可能会点击刷新或可能通过链接或直接输入到达该页面。但是，我认为没有理由在 phonegap 中不这样做，因为它们无法刷新等。**

# iphone - UIWebView 横向旋转不填满视图

> ID：11387467
> 
> 赞同：5
> 
> 时间：2012-07-08T23:10:28.117
> 
> 标签：iphone, ios, uiwebview, uiinterfaceorientation

我的 UIWebView 有问题。当视图加载时，它可以很好地加载任何方向，完美地填充整个页面等。

但是，如果我以纵向加载它，然后旋转设备，webview 不会一直填充到右侧，我终生无法弄清楚原因。

这是我的观点确实加载方法

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib

    if  ([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationPortrait){

        self.measurementsWebView.frame = CGRectMake(0, 0, 320, 367);

    }else if ([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeLeft || [[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeRight){

        self.measurementsWebView.frame = CGRectMake(0, 0, 480, 218);
    }

    NSString *path = [[NSBundle mainBundle] pathForResource:@"measurements" ofType:@"png"];
    [measurementsWebView loadHTMLString:[NSString stringWithFormat:@"<html><body><img src=\"file://%@\"></body></html>",path] baseURL:nil];
    measurementsWebView.scalesPageToFit = YES;

} 
```

如果我查看界面生成器，我试图找到允许我设置扩展宽度或您所称的面板的面板，但我能看到的就是这个。

![在此处输入图像描述](../Images/774e03fe5c9769a68d94cb41653a2922.png)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T05:00:29.617

除了手动设置框架，您还可以将自动调整大小的蒙版设置为：

`measurementsWebView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;`

如果屏幕上没有其他元素，它将调整 webView 的大小（根据调整大小时使用的值，我认为你没有`measurementsWebView`）。或者，直接来自笔尖，如下图所示：

![从笔尖自动调整大小](../Images/136d09f8f762742148130440a00585ce.png)

可以通过单击左下角名为**Autosizing**的框中的红色条来设置蒙版。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-25T00:05:53.203

`viewDidLoad`运行一次 - 当视图加载时。

如果您想在发生旋转时手动调整框架，请添加代码以调整其大小，`viewDidLayoutSubviews`每当视图旋转时都会调用该代码。

```
-(void)viewDidLayoutSubviews {

    [super viewDidLayoutSubviews];

    self.measurementsWebView.frame = self.view.bounds;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T00:00:16.017

在界面生成器中，显示“布局矩形”的下拉菜单，单击它并选择“框架矩形”。

或者，您可以覆盖`willAnimateRotationToInterfaceOrientation:`视图控制器中的方法并手动设置坐标/大小，就像您在`viewDidLoad`.

# sinatra - 从预定作业中渲染 Pony 邮件中的 haml 时未定义的方法“haml”

> ID：11387479
> 
> 赞同：4
> 
> 时间：2012-07-08T23:12:32.277
> 
> 标签：sinatra, haml, rufus-scheduler, pony

我有一个 sinatra 应用程序，它执行黄瓜测试并发送带有结果的电子邮件通知。电子邮件 gem 是 Pony，并且有一个用于此通知的 haml 模板。

此逻辑适用于路线：

```
require 'sinatra'
require 'haml'
require 'pony'

get "/execute_all/?" do
  execute_all_tests()
  Pony.mail :to => "recipients@email.com",
      :from => "do-not-reply@email.com",
      :subject => "Test results,
      :html_body => haml(:email_layout)

      redirect "/"

end 
```

但是，当我将计划作业与 rufus 调度程序一起用于这些操作时，出现以下异常：

```
scheduler caught exception:
undefined method `haml' for main:Object 
```

代码是来自路线的copypasta：

```
 scheduler = Rufus::Scheduler.start_new
   scheduler.every '2h' do
      execute_all_tests()
      Pony.mail :to => "recipients@email.com",
          :from => "do-not-reply@email.com",
          :subject => "Test results,
          :html_body => haml(:email_layout)
   end 
```

所有两种方法都在同一个文件中，执行该文件以运行 Sinatra 应用程序。

如何摆脱此异常，并按计划发送带有 haml 模板的电子邮件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T19:40:12.637

The `haml` method is only available in the context of a request to Sinatra (it is an instance method on `Sinatra::Base`), and it can’t be used outside of a Sinatra request.

In order to render a Haml template, you can use the Haml API directly:

```
haml_template = File.read(File.join(settings.views, 'email_layout.haml'))

scheduler = Rufus::Scheduler.start_new
  scheduler.every '2h' do
    execute_all_tests()
    Pony.mail :to => "recipients@email.com",
      :from => "do-not-reply@email.com",
      :subject => "Test results",
      :html_body => Haml::Engine.new(haml_template).render(binding)
  end
end 
```

Here I’m assuming `execute_all_tests` is using instance variables that are referenced in the Haml template, so we pass the `binding` to the Haml `render` method to access these variables. You might also need to pass in any Haml options you need as the second parameter to `new`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:33:22.877

您是否以同一用户身份运行 rufus 和 sinatra？这似乎是许多此类问题中反复出现的主题。

# symfony - 在 Symfony2 控制器上使用命名空间

> ID：11387480
> 
> 赞同：0
> 
> 时间：2012-07-08T23:12:34.850
> 
> 标签：symfony, php

我对 symfony2 很陌生（只是阅读它自己的 pdf 书），我很好奇它必须使用命名空间名称`namespace Acme\HelloBundle\Controller;`吗？

它的名称太长了，我可以用任何其他名称使它更短，还是我需要遵循目录路径约定来命名控制器的命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T23:18:20.340

它必须与目录结构相匹配。您可以在此处查看命名空间标准：

[https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)

# css - 文本溢出：省略号似乎不起作用

> ID：11387481
> 
> 赞同：32
> 
> 时间：2012-07-08T23:12:45.417
> 
> 标签：css

我在无序列表中有一个导航菜单：

```
<ul>        
    <li class="current">
        <a href="./">Home</a>
    </li>           
    <li class="">
        <a href="./location/">Location</a>
    </li>           
    <li class="">
        <a href="./rooms-and-rates/">Rooms &amp; Rates </a>
    </li>           
    <li class="">
        <a href="./facilities/">Facilities</a>
    </li>           
    <li class="">
        <a href="./things-to-do/">Things to do</a>
    </li>           
    <li class="">
        <a href="./eating-and-drinking/">Eating and Drinking</a>
    </li>           
</ul> 
```

当菜单标题太长时，我需要使用 text-overflow: ellipsis 所以我在我的 CSS 中设置菜单链接的样式：

```
 header nav ul li a { text-decoration: none; 
       text-overflow: ellipsis; 
       display: block; 
       overflow: hidden; 
       width: 150px; 
       height: 32px;
} 
```

然而，预期的效果并没有发生。它只是切断了整个最后一个词（并将其包裹在不可见的地方）。我的代码有什么问题，还是有一些我不知道文本溢出的警告：省略号？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-08T23:16:35.383

您需要添加`white-space: nowrap;`for`text-overflow: ellipsis;`才能工作。

**演示：http:** [//jsfiddle.net/ThinkingStiff/Dc7UA/](http://jsfiddle.net/ThinkingStiff/Dc7UA/)

### 输出：

![在此处输入图像描述](../Images/dac656591626b7db8ff53b3196dc6710.png)

### CSS：

```
a { 
    text-decoration: none; 
    text-overflow: ellipsis; 
    display: block; 
    overflow: hidden; 
    white-space: nowrap;
    width: 80px; 
    height: 32px;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-24T14:47:50.670

实际上*溢出：隐藏；*是必需的，因此您可能需要这三行：

```
text-overflow: ellipsis; 
display: block; 
overflow: hidden; 
```

# java - 使用反射加载一个类，然后在运行时编辑变量

> ID：11387482
> 
> 赞同：0
> 
> 时间：2012-07-08T23:13:26.303
> 
> 标签：java, class, variables, reflection, runtime

好的，所以我有一个正在加载另一个类的 java 文件，我希望 java 文件能够从正在运行的类中编辑和读取变量。

例如：我有一个按钮，按下它会设置一个变量（这是类文件）。我希望正在加载此类的 java 文件能够看到变量的新值读取它、设置它并执行所需的任何操作。我希望设置显示在正在运行的 java 类上的新值。

这是我到目前为止所尝试的，但是当我尝试编辑诸如获取 baseX 之类的值时，它不会显示在正在运行的类中。此外，当我在正在运行的类上做一些事情时，baseX 值应该会改变，但是当我改变它们时，这些东西不会打印到屏幕上。就好像反射无法在运行时读取东西一样。那么有什么作用呢？

```
Class c = Class.forName("Client");
        for (Method m : c.getMethods()) {
            if (m.getName().contentEquals("main")) {
                Object[] passedArgs = { args };
                m.invoke(null, passedArgs);
            }

        }
        Object instance = c.newInstance();

        Field baseX = c.getField("baseX");
        Field loggedIn = c.getField("loggedIn");

        boolean gotValues = false;
        while(!gotValues) {
            boolean loggedin = loggedIn.getBoolean(instance);
            if(loggedin) {
                System.out.println(baseX.get(instance));
            } else {
                System.out.println(loggedin);
                loggedIn.setBoolean(instance, true);
            }
        } 
```

另外，如果 getter/setter 方法在运行时工作，它们也可以工作，我可以这样做，以便当按下按钮 x 时，屏幕上的变量 y 会发生变化。什么是 Java Bean？另外，如果我只想调用一个方法而不获取值怎么办？或者如果我想添加自己的方法/代码怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:32:13.343

尝试这个：

```
public class Client {
  public Object baseX = new Object();
  public boolean loggedIn;
}
-----
public class Main {
  public static void main(String[] args) throws Exception {
    Class c = Class.forName("Client");
    /*for (Method m : c.getMethods()) {
      if (m.getName().contentEquals("main")) {
        Object[] passedArgs = {args};
        m.invoke(null, passedArgs);
      }

    }*/
    Object instance = c.newInstance();

    Field baseX = c.getField("baseX");
    Field loggedIn = c.getField("loggedIn");

    boolean gotValues = false;
    //while (!gotValues) {
      boolean loggedin = loggedIn.getBoolean(instance);
      if (loggedin) {
        System.out.println("Logged in!");
        System.out.println(baseX.get(instance));
      }
      else {
        System.out.println("NOT Logged in!");
        System.out.println(loggedin);
        loggedIn.setBoolean(instance, true);
        System.out.println(loggedIn.getBoolean(instance));
      }
    //}

  }
} 
```

# java - Hibernate：包 - 在更新或删除操作的情况下影响性能？

> ID：11387483
> 
> 赞同：0
> 
> 时间：2012-07-08T23:13:40.257
> 
> 标签：java, hibernate, collections, bag

从“Apress - 从新手到专业人士开始休眠”p。161，在那里他们解释了**包的收集**：

> 如果元素缺少正确的键，则会在对包的内容执行更新或删除操作时表现出性能影响。

1.  正确的密钥是什么意思？

2.  为什么在对包元素执行更新或删除操作的情况下会对性能产生影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:21:17.190

它们意味着基础数据库表上的主键。由于没有键，性能会受到影响，因此当键存在时需要表扫描而不是索引查找

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:40:29.110

假设您有一个实体父级，它有一个子级集合。在不使用列表中的索引列的情况下，Hibernate 将使用“Bag Semantics”来处理子项的集合。这意味着集合是无序的，并且可以包含重复项。如果您在删除孩子时查看 SQL 日志，您将看到一条删除语句删除所有孩子。后跟 # of children - 1 个插入，重新插入所有未删除的孩子。为什么不只是一个删除语句？

有关完整说明，请参阅此链接 (http://assarconsulting.blogspot.com/2009/08/why-hibernate-does-delete-all-then-re.html)。

显然，单个删除语句会更有效，对吧？在大多数情况下，我们实际上想要一个 Set，因为我们的实体通常是唯一的。但是，很多开发人员仍然使用 List（出于习惯）。默认情况下，对于没有索引列的列表，hibernate 将使用 Bag Semantics，性能较差。

# objective-c - 如何从 NSURLConnection 远程服务器调用返回的对象中获取值？

> ID：11387486
> 
> 赞同：0
> 
> 时间：2012-07-08T23:14:01.550
> 
> 标签：objective-c, ios, ios5, nsurlconnection

我有一些 Objective-c 代码可以对服务器进行异步（我认为是大声笑）调用，但我不太确定，处理从服务器返回的响应的正确方法是什么？

我做这样的事情：

```
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

    // ***************
    // TODO: ok I dont really understand what this is
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    // **************

    [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
     {         
      ... 
```

而且因为我对 Objective-C 很陌生，所以我什至不确定在哪里查看如何从对象中获取值，或者如何处理 NSData 或 NSResponse 对象。

我知道我的服务器有时会发回 JSON 响应，有时只是像“ok”这样的字符串

此外，让我更加困惑的是本教程：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

根据它我应该有一些单独的功能，比如

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

或者

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

所以我的问题是从请求的 3 个变量（错误、响应、数据）中获取基本返回数据的方法是什么，我应该什么时候实现我提到的教程建议的方法？似乎本教程有一个更优雅的解决方案......但我不确定它是否矫枉过正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T23:28:42.350

**错误**

NSError 有一个独特的小功能（尤其是在块内部），当一个变量及其地址作为参数传入时（在这种情况下，一个简单的 NSError*），该方法应该修改对象并返回一个可用的实例，以防万一的错误。在没有发生错误的正常用例中，这应该是`nil`，我们可以将其记录在块的完成处理程序部分中：

```
[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
{
(     iferror)
         NSLog(@"Connection Error - %@", [error localizedDescription]);
}]; 
```

* * *

**回复**

NSURLResponse 在您的情况下并不重要。正如苹果所说：

> 注意： NSURLResponse 对象不包含表示 URL 内容的实际字节。有关接收 URL 加载的内容数据的更多信息，请参阅 NSURLConnection。

您将使用 NSURLResponse 进行文件下载，仅此而已。JSON 由[NSURLConnection](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)对象返回。

* * *

**数据**

可能是整个交易中最重要的部分。您的 JSON 响应将包含在此数据中，这意味着必须将其转换为字符串，然后发送到解释器，以便我们可以从 JSON 值中提取实际的 ObjC 对象。几个广泛使用的类是专门为这些类构建的，包括[JSON Framework](https://github.com/stig/json-framework)、[JSONKit](https://github.com/johnezang/JSONKit)和[TouchJSON](https://github.com/TouchCode/TouchJSON)。

* * *

顺便说一下，一个**[NSOperationQueue](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)**很像一个线程池，但它扮演着管理角色。NSOperationQueue 对象被发送 NSOperation 对象，然后将其添加到其内部队列并在也由 NSOperationQueue 对象管理的线程上执行。考虑到 iOS 4.x 中 GCD 的出现，它们现在基本上没有用了，但是在遗留软件支持的情况下，它们对于执行异步（或同步，取决于是否在提交的操作上设置[isConcurrent](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperation/isConcurrent)属性）任务很有用后台线程。

# c# - 在 MVC3 (C#) 将 GMT DateTime 转换为用户本地时间和本地时间转换为 GMT DateTime

> ID：11387487
> 
> 赞同：2
> 
> 时间：2012-07-08T23:14:03.803
> 
> 标签：c#, asp.net-mvc-3, datetime

我也是 MVC3 和 C# 的新手。我将使用 C# 通过 MVC3 创建一个测试博客站点。用户可以在哪里写帖子，所以我需要存储用户发布的日期时间，并希望在每个其他用户那里显示该日期时间。对于这种情况，每个人都认为最好在**GMT中存储日期时间。**

我不知道如何获取用户**本地**日期时间并将其转换为**GMT**并存储。我不知道如何在每个用户本地日期时间中转换和显示存储的日期时间。

请帮我。请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:12:21.267

我将不得不恭敬地不同意 COLD TOLD 的观点。如果您使用`DateTime.Now`，您将获得运行您的应用服务器的机器的日期和时间。虽然这没关系，但在存储它时，您还需要将时区连同它一起存储。否则，在转换时，您将不知道要从哪个时区转换。如果您将其硬编码到您的应用程序中，然后您将其移动到不同时区的数据中心服务器，您将不得不更改该应用程序设置。

另一方面，如果您总是使用存储日期和时间，`DateTime.UtcNow`那么您只需要在数据库中存储 1 个值。当需要将其转换为时区语言环境时，您不必访问数据库来找出最初计算信息的时区 - 它始终是 UTC / GMT。

```
var destinationTimeZone = TimeZoneInfo.FindSystemTimeZoneById(
    "US Mountain Standard Time"); 

utc = DateTime.UtcNow;
mst = TimeZoneInfo.ConvertTimeFromUtc(utcTime, destinationTimeZone);

Console.WriteLine("UTC: " + utc.ToString("yyyy-MM-dd HH-mm-ss"));
Console.WriteLine("MST: " + mst.ToString("yyyy-MM-dd HH-mm-ss")); 
```

# apache - 带有子域的 mod_rewrite 未正确捕获模式

> ID：11387490
> 
> 赞同：0
> 
> 时间：2012-07-08T23:14:26.987
> 
> 标签：apache, mod-rewrite

我有一个符合以下条件的通配符虚拟主机：

```
RewriteCond %{HTTP_HOST} ^([a-z0-9_\-]+)\.([\d]+)\.mydomain\.com [NC] 
```

此规则有效：

```
RewriteRule ^/?$       /index.php?customer=%1&cluster=%2&%{QUERY_STRING} [L] 
```

但是，如果我尝试使模式复杂化：

```
RewriteRule ^([\w\-]+)/?$ /index.php?customer=%1&cluster=%2&load=$1&%{QUERY_STRING} [L] 
```

它没有抓住它。我错过了什么？

使用上述规则： [http://dev.0.mydomain.com:8080/](http://dev.0.mydomain.com:8080/)适用于第一条规则 [http://dev.0.mydomain.com:8080/x/](http://dev.0.mydomain.com:8080/x/)在第二条规则上失败（即修改第一条规则，只有一条规则）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:20:09.890

您的第二条规则不包括前导斜杠。假设您的规则在虚拟主机上下文中，则需要该部分。具体来说，`^([\w\-]+)`不匹配`/anything`。这将：`^/([\w\-]+)`.

# search - 如何在 Solr 中的多值字段中执行搜索？

> ID：11387492
> 
> 赞同：5
> 
> 时间：2012-07-08T23:15:09.160
> 
> 标签：search, solr, multivalue

我在 Solr 中执行搜索时遇到了困难。我的 Solr 有一个多值字段，如下面的文档：

```
<int name="id">2166324592435</int>
...others fields
<arr name="Series">
   <str>The Walking Dead<\str>
   <str>Game of Thrones<\str>
<\arr> 
```

多值字段系列具有文档引用的电视系列。在上面的例子中，我的文档提到了《行尸走肉》和《权力的游戏》。我可以拥有一个、两个或更多系列甚至没有系列的文档。

我想做的是在 Solr 中搜索。我想给出我想要的系列，Solr 应该返回关于我的查询的文档。我试过了，但我做不到。我尝试了以下方法：

```
q=series:The Walking Dead or series:Game of Thrones or ...&wt=json 
```

我觉得我做错了。正确的方法是什么？

提前致谢

蒂亚戈

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-27T13:50:13.953

尝试这样的事情：
`series:("The Walking Dead" OR "Game of Thrones")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T07:12:02.427

除了@user1452132 的回答 -

搜索`q=series:The Walking Dead`时，仅`the`在系列字段`walking dead`中搜索，而在默认搜索字段中搜索。

形成的查询将是系列：或文本：（行尸走肉）

您可以在请求 URL 中使用 debugQuery=on 调试查询。

您可以使用[Dismax 查询处理程序](http://wiki.apache.org/solr/DisMaxRequestHandler)使其更易于管理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-01T07:55:04.363

在`fq`参数中使用（过滤查询），

## 例如

```
 name:("Java" OR "Python")
    name:("Java" AND "Web")

    // multivalued fields
    author_ids:(1733 OR 58)
    author_ids:(1733 AND 58) 
```

## Solr 网址编码：

*   ':' 变成 '%3A'
*   空格变成'+'

## 因此，您可能会得到这样的 url：

> [http://localhost:8983/solr/xxx/select?q=programming&fq=title%3A](http://localhost:8983/solr/xxx/select?q=programming&fq=title%3A) ("Java"+AND+"web")&wt=json&indent=true&defType=edismax&qf=title&stopwords=true&lowercaseOperators=true

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T01:23:12.670

根据搜索的意图，尝试以下两个搜索

系列：“行尸走肉”或系列：“荆棘游戏”

系列：（行尸走肉）或系列：（荆棘游戏）

请阅读[solr 查询语法](http://wiki.apache.org/solr/SolrQuerySyntax)和底层[Lucene 查询语法](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-23T14:53:39.503

我认为您的实际问题是使用`OR`小写字母。当您执行类似操作时，将`or`在 中搜索该值`defaultTextField`。如果您的查询中有空格，也不要忘记加上引号 - 并且您正在寻找完全匹配的内容。

# java - 基于 2 点和半径绘制圆弧

> ID：11387493
> 
> 赞同：0
> 
> 时间：2012-07-08T23:15:42.307
> 
> 标签：java, graphics2d

我正在尝试在面板内绘制 Arc2D 对象。但是我不确定如何计算它。我给出的是起点 Point2D 和终点 Point2D 和半径。问题是半径变化时，startAngle和AngleExtent参数每次都不一样。另一个问题是，由于半径发生变化，包含圆弧的“待”圆的中心每次都在不同的点，另一个参数根据输入而变化，所以我不能使用（或不知道如何）使用 setCenter() 方法。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:30:10.510

两个点和一个半径定义*了两个*弧（二维）。`Circle`您可以通过计算以您的两个点为中心的两个半径的交点 (java.awt.geom.Area.intersects) 来找到它们的中心点`r`。圆弧的中心点将是您的两个初始点之间该区域周长上的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:37:51.487

你需要的不仅仅是这些。你需要两个点，半径和凹度。

想象在两个端点处有两个圆，每个圆都有一个半径。它们在两个不同的点相交（假设可以绘制）。其中之一是您的中心点，您可以通过了解凹度来选择哪一个（即圆弧是向上还是向下）。

您使用您选择的中心点绘制弧线并从一个端点到另一个端点。

你可以在这里找到找到两个圆的交点的公式：http: [//mathworld.wolfram.com/Circle-CircleIntersection.html](http://mathworld.wolfram.com/Circle-CircleIntersection.html)

请注意，您最好有两个交点。如果有零或无穷大，你不能很好地在它们之间画一条弧（你的弧不会跨越，或者你的弧的长度为零）。

# c++ - 如何在 OpenCV 中编辑/更新 YAML 文件？

> ID：11387497
> 
> 赞同：1
> 
> 时间：2012-07-08T23:16:57.097
> 
> 标签：c++, xml, opencv, yaml, yaml-cpp

在 OpenCV 中编辑/更新 YAML/YML 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:28:27.960

通常 YAML 中没有直接支持更新，因为它需要重写更新节点下的整个文件，因此 OpenCV 以及 yaml-cpp 中的原因不支持直接编辑节点值。因此，解决方法是再次重新创建/编写 YAML 结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:49:10.737

看起来 OpenCV 有一些原生的方式来读写 YAML。从[这个](https://stackoverflow.com/a/3220992/112)SO 答案中，我找到了以下 OpenCV C++ 接口的“备忘单”：

[https://code.ros.org/trac/opencv/export/3163/trunk/opencv/doc/opencv_cheatsheet.pdf](https://code.ros.org/trac/opencv/export/3163/trunk/opencv/doc/opencv_cheatsheet.pdf)

他们编写 YAML 的示例的一部分：

```
FileStorage fs("test.yml", FileStorage::WRITE);
fs << "i" << 5 << "r" << 3.1 << "str" << "ABCDEFGH"; 
```

如果您对更新现有 YAML 文件感兴趣，最好的方法是将现有文件读入您​​自己的数据类型，进行更改，然后将新数据写入文件。

# binding - 源为空/未定义时的 KnockoutJS 绑定

> ID：11387501
> 
> 赞同：45
> 
> 时间：2012-07-08T23:17:29.423
> 
> 标签：binding, knockout.js

是否有更短/更简洁的方法来进行 null/undefined 测试？

```
<select data-bind="options: SelectedBusinessLine() ? SelectedBusinessLine().Clusters() : [],
                               optionsText: 'Title',
                               value: SelectedCluster,
                               optionsCaption: 'Select Cluster..'">
            </select> 
```

代替

```
data-bind="options: SelectedBusinessLine() ? SelectedBusinessLine().Clusters() : [], 
```

我想

```
data-bind="options: SelectedBusinessLine().Clusters(), 
```

给予或接受（）

或者至少是一个更简单的空运算符检查'??' 选定的业务线 ?? []

或者一个绑定参数来自动检查 null 或静默失败。

如果可能的话，有什么想法吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-08T23:52:24.167

[此页面](http://www.knockmeout.net/2011/08/simplifying-and-cleaning-up-views-in.html)提供了几种解决方案。相关部分是这个：

防止空对象

如果您有一个包含对象的可观察对象并且您想绑定到该对象的属性，那么您需要小心它是否有可能为空或未定义。您可以编写您的绑定，如：

```
<span data-bind="text: selectedItem() ? selectedItem().name() : 'unknown'"></span> 
```

有很多方法可以处理这个问题。首选方法是简单地使用模板绑定：

```
var viewModel = {
  items: ko.observableArray(),
  selectedItem: ko.observable()
};

<ul data-bind="template: { name: 'editorTmpl', data: selectedItem }"></ul>
<script id="editorTmpl" type="text/html">
  <li>
    <input data-bind="value: name" />
  </li>
</script> 
```

使用此方法，如果`selectedItem`为 null，则它不会渲染任何内容。因此，您不会像在原始绑定中那样看到未知。但是，它确实具有简化绑定的额外好处，因为您现在可以直接指定属性名称而不是`selectedItem().name`. 这是最简单的解决方案。

只是为了探索一些选项，这里有一些选择：

你可以使用一个计算的 observable，就像我们之前做的那样。

```
viewModel.selectedItemName = ko.computed(function() {
  var selected = this.selected();
  return selected ? selected.name() : 'unknown';
}, viewModel); 
```

然而，这再次给我们的视图模型增加了一些我们可能不想要的膨胀，我们可能不得不对许多属性重复这一点。

您可以使用自定义绑定，例如：

```
<div data-bind="safeText: { value: selectedItem, property: 'name', default: 'unknown' }"></div>

ko.bindingHandlers.safeText = {
  update: function(element, valueAccessor, allBindingsAccessor) {
    var options = ko.utils.unwrapObservable(valueAccessor()),
    value = ko.utils.unwrapObservable(options.value),
    property = ko.utils.unwrapObservable(options.property),
    fallback = ko.utils.unwrapObservable(options.default) || "",
    text;

    text = value ? (options.property ? value[property] : value) : fallback;

    ko.bindingHandlers.text.update(element, function() { return text; });
  }
}; 
```

这个比原版好吗？我会说可能不会。它确实避免了我们绑定中的 JavaScript，但它仍然非常冗长。

另一种选择是创建一个增强的 observable，它提供了一种访问属性的安全方法，同时仍然允许实际值为 null。可能看起来像：

```
ko.safeObservable = function(initialValue) {
  var result = ko.observable(initialValue);
  result.safe = ko.dependentObservable(function() {
    return result() || {};
  });

  return result;
}; 
```

因此，这只是一个 observable，它还公开了一个名为 safe 的计算 observable，它总是返回一个空对象，但实际的 observable 可以继续存储 null。

现在，您可以像这样绑定它：

```
<div data-bind="text: selectedItem.safe().name"></div> 
```

当它为 null 时，您不会看到未知值，但它至少不会在`selectedItem`为 null 时导致错误。

我确实认为在这种情况下首选的选项是使用模板绑定，特别是如果您有许多这些属性要绑定。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-04-26T20:51:25.953

[另一个答案引用的优秀页面](http://www.knockmeout.net/2011/08/simplifying-and-cleaning-up-views-in.html)中未提及的一种方法是使用`with`

```
<div data-bind="with: selecteditem">
    <form>
        <fieldset>
            <div>
                <label>first name</label>
                <input data-bind="value: firstname"></input>
            </div>
            <div>
                <label>lasst name</label>
                <input data-bind="value: lastname"></input>
            </div>
        </fieldset>
        <div>
            <a href="#" data-bind="click: $root.savechanges">Save</a>
        </div>
    </form>
</div> 
```

如果`selecteditem`为 null，则整个 UI 将消失。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-17T15:17:59.087

“With”有效（可能其他人也有效......）

但是使用“With”，即使里面有条件，角色 UI 也会消失/出现......例如......我需要设置一个状态（真/假）按钮，但前提是状态不为空。 .

```
<!-- ko ifnot: Status() == null -->
<span data-bind="if: Status">
    <a class="rk-button rk-red-action" data-bind="click: changeStatus"><i class="rk-ico rk-ico-save"></i>Desativar</a>
</span>
<span data-bind="ifnot: Status">
    <a class="rk-button rk-black-action" data-bind="click: changeStatus"><i class="rk-ico rk-ico-save"></i>Ativar</a>
</span>
<!-- /ko --> 
```

这行得通。在这种情况下。

但有时就像 Simon_Weaver 所说的那样，只是“With”的作品！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T11:32:28.537

我更喜欢这种方法

创建自定义绑定

```
ko.bindingHandlers.safeText = {
    update: function (element, valueAccessor, allBindingsAccessor) {
        try {
            var tryGetValue = valueAccessor()();
            ko.bindingHandlers.text.update(element, valueAccessor());
        } catch (e) {
            ko.bindingHandlers.text.update(element, function () { return ""; });
        }
    }
}; 
```

用法

```
data-bind="safeText: function() { return my().nested.object.property; } 
```

您需要添加的唯一额外内容是使用 'function() { return ... }' 包装原始值

但是，这将停止值调用下方的所有错误。您可以通过仅查找“未定义”异常来改进自定义绑定。您可能还想通过添加默认文本选项来改进此绑定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-18T23:03:23.833

这些解决方案中的大多数在我设置属性的特定情况下都不起作用：

```
<div role="combobox" data-bind="attr: {
  'aria-activedescendant': activedescendant() ? activedescendant().id : null
}">
  ...
</div> 
```

`template`and绑定在`with`这里不起作用，因为如果我没有活跃的后代，那么我的 div 将是空的。对于我的解决方案，我创建了一个可观察的方法：

```
ko.observable.fn.get = function (propertyName, defaultValue) {
    var
    self = this(),
    propertyValue;

    if (self != null) {
        propertyValue = ko.unwrap(self[propertyName]);
    }

    return propertyValue || defaultValue;
} 
```

这使我可以将绑定更改为此：

```
<div role="combobox" data-bind="attr: {
  'aria-activedescendant': activedescendant.get('id')}">
  ...
</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-19T16:09:15.200

上述大多数解决方案对我来说都不是开箱即用的，因为我只想将它应用于 a 中的单个元素，`foreach`所以我稍微修改了接受答案的方法：

```
<span data-bind="text: ((typeof info).localeCompare('undefined')) ? info : ''"></span> 
```

# java - 从应用引擎提供缓存数据时的多线程

> ID：11387503
> 
> 赞同：1
> 
> 时间：2012-07-08T23:18:12.933
> 
> 标签：java, multithreading, google-app-engine, gwt, memcached

我有一个非常简单的问题，找不到答案，这让我认为我很可能错过了一些基本事实。

我正在使用 memcache 来缓存和提供大型静态数据，这通常可以让我们从单个实例中为数千个用户提供服务；然而，似乎由于应用引擎是单线程的，所以每个请求都被排队并按顺序服务，然后在为大量用户提供服务时最终启动多个实例......</p>

除了延迟，尤其是在启动新实例时，这会导致更大的定价问题。由于 Google 现在按实例小时数而不是 CPU 利用率收费，并且通过提供缓存数据，我们很可能只使用每个实例的可用 CPU 的一小部分，因此需要为许多不必要的额外实例收费，类似于[这篇](https://stackoverflow.com/questions/7344484/appengine-instance-hours-vs-cpu-time)文章...< /p>

我错过了什么吗？

提前感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:25:59.503

如果您通过在 appengine-web.xml 文件中将“threadsafe”元素设置为“true”来启用多线程，则 App Engine 不再是单线程的。

但是，在 MemCache 中缓存数据并不意味着您可以为单个实例提供无限数量的请求。Mem 缓存不运行您的应用程序代码，它只是让您为它节省前往数据存储的时间，因此速度更快。

根据您的代码和内存使用情况等，当 App Engine 看到一个实例（由于多线程现在一次服务多个请求）变得“太忙”时，它将启动新实例（这取决于许多仪表板设置以及您在 appengine-web.xml 中的热身请求设置）和更新的请求可能由这些请求提供服务。

因此，实例的使用取决于为您的请求提供服务的代码的持续时间，以及每个人的内存使用 - 而不是 MemCache。

如果通过说“静态数据”，您指的是 html 文件等，通过在 appengine-web.xml 中将它们标记为“静态”，那么实际上您可能根本不需要任何实例。它们由 Google 的内容分发网络（“CDN”）提供服务，无需启动您的实例或运行您的任何代码。

为此，客户端请求（例如来自浏览器的请求）只需要请求静态文件，而不会导致您的任何应用程序代码运行。

因此，基于所有这些 - 您可能需要重新提出您的问题 - 无论哪种方式，我希望它有所帮助。

# xcode - App运行时出现在Xcode后面

> ID：11387507
> 
> 赞同：1
> 
> 时间：2012-07-08T23:18:37.923
> 
> 标签：xcode, cocoa

当我在 Xcode 4.3.3 上运行我的可可应用程序时。使用狮子 10.7.4。应用程序启动并出现在 Xcode 后面。几次出现在前面，不知道发生了什么。有人遇到过这样的问题吗？我的主要 NSWindow 是一个无边框窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:00:11.070

在启动期间运行以下行：

```
[NSApp activateIgnoringOtherApps:YES]; 
```

# java - 未对以编程方式创建的 UI 元素执行 JSF 2.0 支持 bean 方法

> ID：11387509
> 
> 赞同：1
> 
> 时间：2012-07-08T23:19:04.257
> 
> 标签：java, jsf-2

我正在使用 JSF 的 java 类为一个简单的 HTML 页面创建 UI 元素，如下所示。然而 Bean::save() 和 Item.setValue(...) 方法并没有被执行。

项目.xhtml

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>Test</title>
    </h:head>
    <h:body>
        <h:panelGroup binding="#{bean.htmlPanelGroup}" />
    </h:body>
</html> 
```

Bean.java

```
@ManagedBean(name="bean")
@ViewScoped
public class Bean implements Serializable {
    private final Item item = new Item(1L, "hello");

    public void save() {
        // this method is not executed when the save button created below is clicked.
        System.out.println("item.value = " + item.getValue());
    }

    public Item getItem() { return this.item; }

    transient HtmlPanelGroup htmlPanelGroup;

    public void setHtmlPanelGroup(HtmlPanelGroup htmlPanelGroup) {
        this.htmlPanelGroup = htmlPanelGroup;
    }
    public HtmlPanelGroup getHtmlPanelGroup() {
        if (htmlPanelGroup == null) {
            FacesContext facesContext = FacesContext.getCurrentInstance();
            htmlPanelGroup = new HtmlPanelGroup();
            HtmlForm editForm = new HtmlForm();
            HtmlInputText value = new HtmlInputText();
            ValueExpression valueExpr = facesContext.getApplication().getExpressionFactory()
            .createValueExpression(facesContext.getELContext(), "#{bean.item.value}", String.class);
            value.setValueExpression("value", valueExpr);
            editForm.getChildren().add(value);
            HtmlCommandButton save = new HtmlCommandButton();
            save.setValue("save");
            MethodExpression methodExpr = facesContext.getApplication().getExpressionFactory()
            .createMethodExpression(facesContext.getELContext(), "#{bean.save}", String.class, new Class<?>[]{});
            save.setActionExpression(methodExpr);
            editForm.getChildren().add(save);
            htmlPanelGroup.getChildren().add(editForm);
        }
        return htmlPanelGroup;
    }
} 
```

项目.java

```
public class Item implements Serializable {
    private long id;
    private String value;

    public Item(long id, String value) {
        this.id = id;
        this.value = value;
    }

    public String getValue() { return value; }

    public void setValue(String value) { this.value = value; }

    public long getId() { return id; }

    public void setId(long id) { this.id = id; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:04:53.640

所有以编程方式创建的 JSF`UIForm`和组件都需要有一个固定的 ID 集，否则 JSF 会自动生成一个不会保存的 ID，然后 JSF 将无法根据请求参数映射中的这些 ID 提取提交的值`UIInput`。`UICommand`

因此，在您的特定情况下，您需要添加以下行（ID 完全由您选择）：

```
editForm.setId("form");
// ...
value.setId("value");
// ...
save.setId("save"); 
```

# python - 日期时间值不正确：''2012-07-14 23:00:00''

> ID：11387510
> 
> 赞同：4
> 
> 时间：2012-07-08T23:19:06.427
> 
> 标签：python, mysql, datetime

我在使用 Python/MySQL 的日期时间格式时遇到了一些问题。

我使用以下脚本（由 Python 字典提供）计算日期时间：

```
tempDate  = str(eachday.get("date").get("year")).zfill(4) + "-" + 
str(eachday.get("date").get("month")).zfill(2) + "-" + 
str(eachday.get("date").get("day")).zfill(2)   + " " + 
str(eachday.get("date").get("hour")).zfill(2)  + ":" + 
str(eachday.get("date").get("min")).zfill(2)   + ":" + 
str(eachday.get("date").get("sec")).zfill(2) 
```

这会产生一个看起来像 的值`2012-04-02 04:04:23`。

我可以毫无问题地插入 MySQL。

```
sql.execute("""INSERT INTO `db`.`table`(`id`, `fk_id`, `time`, `field1`, `field2`) VALUES (NULL, %s, %s, %s, %s);""", (fk_value, tempDate, value1, value2)) 
DB_CONN.commit() 
```

但是当我尝试使用该日期时间删除任何内容时，

```
sql.execute("""DELETE FROM `db`.`table` WHERE `time` = "%s";""", (tempDate))
DB_CONN.commit() 
```

它返回有关不正确日期时间值的警告：

```
Warning: Incorrect datetime value: ''2012-07-17 23:00:00'' for column 'time' at row 1 
```

如何在 Python 中按日期时间删除？这尤其令人困惑，因为插入相同的变量（没有改变）可以完美地工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T23:26:07.950

您不能`"%s"`在查询字符串中包含引号；mysqldb 模块为您添加它们（与在`INSERT`您不尝试在值周围加上引号的情况下所做的相同......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T23:36:12.573

您可以轻松使用该`datetime`模块，该模块在构建日期字符串时受到更多控制：

```
from datetime import datetime

eachday = {
    'date': {
        'day': 2, 
        'hour': 4, 
        'min': 4, 
        'month': 4, 
        'sec': 23, 
        'year': 2012
    }
}
keys = ('year','month','day','hour','min','sec')
dt = datetime(*(eachday['date'][k] for k in keys))
print dt.strftime('%Y-%m-%d %H:%M:%S')
# '2012-04-02 04:04:23' 
```

坚持使用日期时间的好处在于，无论如何它都是您将从 MySQLdb 获得的本机格式。您可以将其作为没有转换的值传递。所以真的，甚至不需要格式化日期字符串。

```
sql.execute("DELETE FROM `db`.`table` WHERE `time`=%s", (dt,)) 
```

最好将 datetime 值尽可能长时间地保留为 datetime 对象，而不是携带 int 组件。

# xcode - 在 IB 中移动项目而不更改其层次位置

> ID：11387521
> 
> 赞同：0
> 
> 时间：2012-07-08T23:20:40.900
> 
> 标签：xcode, interface-builder

我有一个情况，我有两个兄弟 UIView，一个是填充整个屏幕的 UIScrollView，另一个是位于其上方的小得多的 UIView。每当我尝试将较小的 UIView 移动到 UIScrollView 上时，IB 都希望将其移动到 UIScrollView 内。

如何在不将 UIView 放入 UIScrollView 的情况下移动 UIView 并保持兄弟关系？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:54:30.633

使用屏幕右侧的检查器区域手动调整 x 和 y 值。 ![在 IB/Xcode 中手动调整 x 和 y](../Images/138dfe0effdb088a92ed469fa7ca44cb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:43:08.817

您也可以在选择对象后简单地使用键盘箭头键。

# php - PDO - 准备好的语句不处理变量的权利

> ID：11387524
> 
> 赞同：0
> 
> 时间：2012-07-08T23:22:02.730
> 
> 标签：php, mysql, variables, pdo, prepared-statement

我有一个变量 ( `$q=$_GET["q"];`)，我想用它来运行我准备好的语句。它包含我的数据库表的列名。

变量的值来自下拉列表。当我运行以下代码时，输​​出是在列表中选择的**确切值。**所以它只是一个列名。

```
$q=$_GET["q"];

$dsn = "mysql:host=$host;port=$port;dbname=$database";

$db = new PDO($dsn, $username, $password);

$sql = "SELECT DISTINCT ? FROM repertoire";
$stmt = $db->prepare($sql);
$stmt->execute(array($q));

    echo "<select>";
    while ( $row = $stmt->fetchObject() ) {
        echo "<option>";
        echo "{$row->{$q}}";
        echo "</option>";
        }
    echo "</select>"; 
```

但是，当我更改此行时`$sql = "SELECT DISTINCT ? FROM repertoire";`

到`$sql = "SELECT DISTINCT ".$q." FROM repertoire";`我从数据库中获取所需的行...

我对 PHP 不是很好，所以我猜我的语法在某个地方是错误的。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T23:25:57.000

在 PDO 中，prepared statements 准备值，而不是表。

您需要直接处理用户输入和报价。

```
$q=$_GET["q"];

// Make sure you sanitize your user inputs using filter_inputs() or similar.

$dsn = "mysql:host=$host;port=$port;dbname=$database";

$colNames = new PDO($dsn, $username, $password); // Create object for getting column names.
$sql = "DESC repertoire Field"; // SQL for getting column names.
$stmt = $colNames->prepare($sql);
$stmt->execute();

$colList = $stmt->fetchAll(PDO::FETCH_COLUMN, 0); // Fetch the results into $colList array.

if (in_array($q, $colList)) { // If the value of $q is inside array $colList, then run.

    $db = new PDO($dsn, $username, $password);

    $sql = "SELECT DISTINCT $q FROM repertoire";
    $stmt = $db->prepare($sql);
    $stmt->execute(array($q));

        echo "<select>";
        while ( $row = $stmt->fetchObject() ) {
            echo "<option>";
            echo "{$row->{$q}}";
            echo "</option>";
            }
        echo "</select>";
} 
```

另请阅读：[PHP PDO 语句可以接受表名或列名作为参数吗？](https://stackoverflow.com/questions/182287/can-php-pdo-statements-accept-the-table-name-as-parameter)

编辑：我添加了一种方法来检查以确保 $q 是有效列，方法是基本上执行 SQL desc 以便从表曲目中获取所有列名。

# android - 如何像在 SWYPE 中一样在自定义键盘上画线？

> ID：11387526
> 
> 赞同：1
> 
> 时间：2012-07-08T23:22:24.070
> 
> 标签：android, draw

我正在做一个项目，我正在创建类似于 android 中的 SWYPE 键盘的东西。我不知道如何在键盘上画线。我已经浏览了 FingerPaint 示例并且知道如何在画布中绘制线条，但不知道如何在键盘上绘制，就像在 swype 中一样，并且还像在 SWYPE 中一样再次按下软输入键盘上的按钮。

我可以在某处提供有关当前已完成工作的其他信息/邮政编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:37:41.960

所以我想出了如何使用 fingerPaint 示例并覆盖 onMotionTouch() 方法。使用 invalidate() 函数在移动手指时显示绘图。

如果有人需要更多说明，我可以看看我是否可以在线发布我的代码。

R

# php - 类似于 array_map 的函数来重新索引数组

> ID：11387529
> 
> 赞同：1
> 
> 时间：2012-07-08T23:22:56.830
> 
> 标签：php, arrays, php-5.3

我最近一直在使用[`array_map`](http://php.net/manual/en/function.array-map.php)来替换这种代码：

```
$users = ...;
$usersIds = array();
foreach ($users as $user) {
   $usersIds[] = $user->getId();
} 
```

和

```
$users = ...;
$usersIds = array_map(function ($user) {
    return $user->getId();
}, $users); 
```

它更优雅，我*想*这更有效。

现在我想知道是否可以使用类似于以下的功能改进以下代码`array_map`：

```
$users = ...;
$indexedUsers = array();
foreach ($users as $user) {
    $indexedUsers[$user->getId()] = $user;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T23:39:12.787

由于您已经拥有密钥，因此只需将其组合起来：

```
$indexedUsers = array_combine($usersIds, $users); 
```

除此之外，`foreach`通常很优雅，尤其是您概述的这些琐碎案例不需要太多函数逻辑，所以我更喜欢这里的迭代器模式而不是函数式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T23:38:02.290

首先，我怀疑`array_map()`它比你原来的`foreach`循环更快。永远不要更改代码，因为您*认为*它更快。当然，如果你认为它更优雅并且速度差异微不足道，那么没人应该在意。

您通常可以考虑在以下情况下使用迭代器：

```
class ArrayGetIdIterator extends ArrayIterator
{
  public function key()
  {
    return $this->current()->getId();
  }
}

$indexedUsers = iterator_to_array(new ArrayGetIdIterator($users)); 
```

为了最大限度地减少样板代码并最大限度地提高可重用性，构造函数可以接受某种类型的参数（例如，要调用哪个函数），您可以创建一个静态帮助程序。

虽然，就我个人而言，我只是将您的原始代码包装成一个可重用的函数并收工。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T23:33:07.833

您可以在以前的成功基础上继续使用 array_combine ...

```
$get_user_id = function($user) {return $user->getId();};
$indexedUsers = array_combine(array_map($get_user_id, $users), $users); 
```

# java - 增强现实 - 图像尺寸变换

> ID：11387535
> 
> 赞同：1
> 
> 时间：2012-07-08T23:24:00.267
> 
> 标签：java, android, image-processing, augmented-reality

我目前正在开发一个应用程序，该应用程序将在相机视图上显示图像（基本上是增强现实），但发现图像看起来并不“真实”。这样做的原因是因为我的图像大小不会像现实生活中那样改变。

我拥有的数据是：图像原始尺寸（高度、宽度）、图像位置（lat、long、alt）、手机位置以及手机与图像之间的距离。

例如，假设我在 lat = 43, long = -70, alt = 0 处放置了一张增强现实图像。如果我开始用手机靠近这一点，我们应该会看到图像随着靠近而变大，但截至目前，尺寸的增加是线性的。然而，当我们开始更接近现实生活中的图像时，我们会看到它根据特定功能变得更大。

关于该功能可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:00:52.520

免责声明：这都是我认为的，我没有确切的功能。

**第 1 步：视口假设**

您需要考虑的是视口。走路时，你有一个视野。让我们通过考虑普通人在观看时不使用他们的周边视觉来简化这个场景（为简单起见，显然这在现实生活中是不正确的）。考虑到在向前看时，您会看到 180 度 - 并且没有外围设备，让我们假设左右 45 度都被移除。这将呈现一个 90 度宽的视口，在其底部，观察者将看到一个向左 45 度和向右 45 度的直角三角形。请注意，这些都不是测量的或纯粹的科学，但为了制作增强现实，某些假设可以使处理变得更容易。

**第 2 步：视口的好处**

现在，基于之前对视口的定义——考虑远距离的物体将占据该视图的哪个部分。这实际上可以开始生成真正的数学:)！当您靠近时，对象会变得更大，因为它占据了视图的更大部分。对象占据的视图部分取决于对象大小和视图大小之间的关系。在这种情况下，视图的大小是视口的弧长！

**第 3 步：一些数学**

让我们做另一个假设来简化这个过程。让我们假设我们不是查看真实的弧线，而是查看视口的斜边。当从距离**d**看时，以 90 度的视角看，视口的斜边将为

```
hypotenuse = 2.83 * d
//Note: 2.83 is approx. 2 * sqr. root of 2 
```

**第 4 步：结论和应用**

因此，如果您站在距离物体 100 英尺的地方，那么您的视口将是 283 英尺。如果物体（例如汽车的前部）占据 6 英尺，那么这将仅占全视图的 6/283 = 2%。

但是，如果您站在距同一辆车 50 英尺的位置，则该关系将为 6 / 141 = 4% 的全视图。

可以看到，这显然是一个线性关系。如果您知道对象的大小是多少（让我们称之为**s**），那么应该采取的视图百分比将是

```
view % = s / 2.83d 
```

此外，这里显示的是确定对象的大小非常重要，并且很难从单个 .jpg 图像中推断出来。我可以有一张 5 号足球的图片，大小为 2500 像素 x 2500 像素。这是否意味着它很大？不，但如果它的大小的唯一假设来自总像素数，它看起来会很大。沿着同样的思路，我可以有一个 100 像素 x 100 像素的地球图片，但我希望它不会显得那么小。

求解对象的大小将产生允许用户在增强现实中接近对象的结果。知道如何在用户接近时缩放图像是相当微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:06:11.850

来自[摄影论坛](http://www.thephotoforum.com/forum/photographic-discussions/264300-find-object-size-photo.html)：

假设您知道焦距，并且所讨论的对象是被聚焦的对象-您将必须知道视场的角度（您会知道，知道使用了哪个镜头- exif 甚至可能会告诉您角度）

一旦你知道了这一点，你就必须弄清楚这个物体占据了多少。

知道了这一点，你可以画一个等腰三角形。你会知道所有三个角的角度，以及它有多高。由此，您可以绘制一个知道一侧和所有角度的直角三角形。知道了这一点，你就可以算出另外两条边的长度了。

短边的长度乘以 2 就是对象的宽度。

您需要一个维度才能开始。这可能是相机到被摄体的距离，相关物体附近另一个物体的尺寸等等......知道了视野的角度，您可能会根据什么来计算相机的距离否则在框架中。

# c - 如何初始化（复杂？）结构

> ID：11387536
> 
> 赞同：0
> 
> 时间：2012-07-08T23:24:16.037
> 
> 标签：c, struct, initialization

让我们定义这个结构：

```
struct MyStruct {
    int firstInt;
    int secondInt;
    char * firstString;
    char * secondString;
}; 
```

我正在尝试初始化这样的结构：

```
MyStruct s = {4, 5, {'a', 'b', 'c'}, "abc"}; 
```

但它不起作用。有什么办法吗？（要求 firstString 结尾不能有 '\0'）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T23:34:24.173

由于您的要求是最后没有空终止符，因此您必须使用数组`firstString`：

```
struct MyStruct {
    int firstInt;
    int secondInt;
    char firstString[3];
    char * secondString;
}; 
```

然后你可以像这样初始化它：

```
MyStruct s = {4, 5, {'a', 'b', 'c'}, "abc"}; 
```

您不能用 with 初始化 a `char*`，`{'a', 'b', 'c'}`因为您必须为字符提供存储空间， a`char*`只能指向某物。`"abc"`恰好是一个常量字符串文字，它存储在只读内存中，因此您可以`char*`指出这一点。

此外，在 C++ 中，`"abc"`是一个我无法修改的常量，因此您应该更改`char * secondString;`为`const char * secondString;`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T23:53:05.673

您可以为此使用复合文字：

```
struct MyStruct {
    int firstInt;
    int secondInt;
    char * firstString;
    char * secondString;
};

struct MyStruct s = { 4, 5, (char[]){'a', 'b', 'c'}, "abc" }; 
```

这个结构是在 C99 中引入的；见[N1256 草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)第 6.5.2.5 节。一些编译器（尤其是微软的）可能不支持它。

请注意，在 C 中，类型`struct MyStruct`不能仅称为`MyStruct`; 这是 C 和 C++ 之间的区别。确保您正在编译您认为的语言。

需要注意的一件事是与复合文字关联的对象的生命周期。字符串字面量表示具有静态生命周期的数组对象，即该对象存在于程序的整个执行过程中。关联的数组对象`(char[]){'a', 'b', 'c'}`如果出现在函数体之外，则具有静态存储持续时间，但如果它出现在函数主体内部，则具有自动存储持续时间（与最里面的封闭块相关联）。如果您尝试`s`在定义它的块之外传递副本，这可能是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T23:30:12.767

一个微妙的点出现了。您的结构有两个`char *`，但没有存储来备份这些指针。你可能想要这样的东西：

```
struct MyStruct {
    int firstInt;
    int secondInt;
    char firstString[3];
    char secondString[4];
}; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-08T23:57:02.247

```
#include <iostream>

using namespace std;

struct MyStruct {
    int firstInt;
    int secondInt;
    char * firstString;
    char * secondString;
};

int main()
{
    char arr[] = {'a', 'b', 'c','\0'};
    MyStruct s = {4, 5, arr, "abc"};

    cout << s.firstString << endl;

    return 0;
}

MyStruct s = {4, 5, {'a', 'b', 'c'}, "abc"};

{'a', 'b', 'c'} have no memory to store.It's a r-value. 
```

- 我认为。^-^

# javascript - 如何在 createElement 中加载带有 document.write 的 javascript 文件？

> ID：11387537
> 
> 赞同：1
> 
> 时间：2012-07-08T23:24:26.460
> 
> 标签：javascript

有没有办法加载一个里面有 document.write 的 js 文件？

IE：

```
(function(){

    var test = document.createElement('script');
    test.type="text/javascript";
    test.src="http://xxxxxxxxxxx/test.js";
    document.getElementsByTagName('head')[0].appendChild(test);

})(); 
```

**测试.js：**

```
document.write('test !'); 
```

它总是返回有关 document.write async 的警报错误...

我想知道我是否这样做：

**测试.js：**

```
document.getElementsByTagName('body')[0].innerHTML = 'test !'; 
```

有用 ！

但就我而言，我无法访问 js 文件，那么我想知道是否有办法做到这一点？或者我需要与 php curl 交叉。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T23:35:38.297

`document.write()`设计用于在解析文档时使用。如果您在加载文档后从动态加载的脚本中使用它，那么它将清除当前文档并开始编写一个全新的文档。

如果您想从动态加载的脚本向当前文档添加内容，那么您应该使用 DOM 操作函数，例如`document.createElement()`and `.appendChild()`or `.insertBefore()`， not `document.write()`。

# jquery - 为什么 jQuery 插件会发生冲突，以及如何避免它们？

> ID：11387540
> 
> 赞同：0
> 
> 时间：2012-07-08T23:25:11.900
> 
> 标签：jquery, jquery-plugins

我经常组合多个 jQuery 插件，却发现它们不能一起正常工作。

下面的例子结合了两种效果：缩略图一一出现，滚动条消失。

这个在 html 底部有两个 jQuery，但只有“一个一个出现”在工作。它以某种方式禁用了滚动条功能：

[http://heidixu.com/creative/test/index2.html](http://heidixu.com/creative/test/index2.html)

而这个已经“一一出现”的jQuery注释掉了，并且显示：无；从取出的css中，突然滚动条功能又开始工作了：

[http://heidixu.com/creative/test/index2.html](http://heidixu.com/creative/test/index2.html)将鼠标悬停在内容区域上可以看到滚动条出现和消失。

如何让多个插件一起工作？

非常感谢！

编辑：为了使它更容易，我想我将代码附加到这个。

消失的滚动条：

```
<script type="text/javascript">
            $(function() {

                // the element we want to apply the jScrollPane
                var $el                 = $('#jp-container').jScrollPane({
                    verticalGutter  : -16
                }),

                // the extension functions and options  
                    extensionPlugin     = {

                        extPluginOpts   : {
                            // speed for the fadeOut animation
                            mouseLeaveFadeSpeed : 500,
                            // scrollbar fades out after hovertimeout_t milliseconds
                            hovertimeout_t      : 1000,
                            // if set to false, the scrollbar will be shown on mouseenter and hidden on mouseleave
                            // if set to true, the same will happen, but the scrollbar will be also hidden on mouseenter after "hovertimeout_t" ms
                            // also, it will be shown when we start to scroll and hidden when stopping
                            useTimeout          : true,
                            // the extension only applies for devices with width > deviceWidth
                            deviceWidth         : 980
                        },
                        hovertimeout    : null, // timeout to hide the scrollbar
                        isScrollbarHover: false,// true if the mouse is over the scrollbar
                        elementtimeout  : null, // avoids showing the scrollbar when moving from inside the element to outside, passing over the scrollbar
                        isScrolling     : false,// true if scrolling
                        addHoverFunc    : function() {

                            // run only if the window has a width bigger than deviceWidth
                            if( $(window).width() <= this.extPluginOpts.deviceWidth ) return false;

                            var instance        = this;

                            // functions to show / hide the scrollbar
                            $.fn.jspmouseenter  = $.fn.show;
                            $.fn.jspmouseleave  = $.fn.fadeOut;

                            // hide the jScrollPane vertical bar
                            var $vBar           = this.getContentPane().siblings('.jspVerticalBar').hide();

                            /*
                             * mouseenter / mouseleave events on the main element
                             * also scrollstart / scrollstop - @James Padolsey : http://james.padolsey.com/javascript/special-scroll-events-for-jquery/
                             */
                            $el.bind('mouseenter.jsp',function() {

                                // show the scrollbar
                                $vBar.stop( true, true ).jspmouseenter();

                                if( !instance.extPluginOpts.useTimeout ) return false;

                                // hide the scrollbar after hovertimeout_t ms
                                clearTimeout( instance.hovertimeout );
                                instance.hovertimeout   = setTimeout(function() {
                                    // if scrolling at the moment don't hide it
                                    if( !instance.isScrolling )
                                        $vBar.stop( true, true ).jspmouseleave( instance.extPluginOpts.mouseLeaveFadeSpeed || 0 );
                                }, instance.extPluginOpts.hovertimeout_t );

                            }).bind('mouseleave.jsp',function() {

                                // hide the scrollbar
                                if( !instance.extPluginOpts.useTimeout )
                                    $vBar.stop( true, true ).jspmouseleave( instance.extPluginOpts.mouseLeaveFadeSpeed || 0 );
                                else {
                                clearTimeout( instance.elementtimeout );
                                if( !instance.isScrolling )
                                        $vBar.stop( true, true ).jspmouseleave( instance.extPluginOpts.mouseLeaveFadeSpeed || 0 );
                                }

                            });

                            if( this.extPluginOpts.useTimeout ) {

                                $el.bind('scrollstart.jsp', function() {

                                    // when scrolling show the scrollbar
                                clearTimeout( instance.hovertimeout );
                                instance.isScrolling    = true;
                                $vBar.stop( true, true ).jspmouseenter();

                            }).bind('scrollstop.jsp', function() {

                                    // when stop scrolling hide the scrollbar (if not hovering it at the moment)
                                clearTimeout( instance.hovertimeout );
                                instance.isScrolling    = false;
                                instance.hovertimeout   = setTimeout(function() {
                                    if( !instance.isScrollbarHover )
                                            $vBar.stop( true, true ).jspmouseleave( instance.extPluginOpts.mouseLeaveFadeSpeed || 0 );
                                    }, instance.extPluginOpts.hovertimeout_t );

                            });

                                // wrap the scrollbar
                                // we need this to be able to add the mouseenter / mouseleave events to the scrollbar
                            var $vBarWrapper    = $('<div/>').css({
                                position    : 'absolute',
                                left        : $vBar.css('left'),
                                top         : $vBar.css('top'),
                                right       : $vBar.css('right'),
                                bottom      : $vBar.css('bottom'),
                                width       : $vBar.width(),
                                height      : $vBar.height()
                            }).bind('mouseenter.jsp',function() {

                                clearTimeout( instance.hovertimeout );
                                clearTimeout( instance.elementtimeout );

                                instance.isScrollbarHover   = true;

                                    // show the scrollbar after 100 ms.
                                    // avoids showing the scrollbar when moving from inside the element to outside, passing over the scrollbar                              
                                instance.elementtimeout = setTimeout(function() {
                                    $vBar.stop( true, true ).jspmouseenter();
                                }, 100 );   

                            }).bind('mouseleave.jsp',function() {

                                    // hide the scrollbar after hovertimeout_t
                                clearTimeout( instance.hovertimeout );
                                instance.isScrollbarHover   = false;
                                instance.hovertimeout = setTimeout(function() {
                                        // if scrolling at the moment don't hide it
                                    if( !instance.isScrolling )
                                            $vBar.stop( true, true ).jspmouseleave( instance.extPluginOpts.mouseLeaveFadeSpeed || 0 );
                                    }, instance.extPluginOpts.hovertimeout_t );

                            });

                            $vBar.wrap( $vBarWrapper );

                        }

                        }

                    },

                    // the jScrollPane instance
                    jspapi          = $el.data('jsp');

                // extend the jScollPane by merging 
                $.extend( true, jspapi, extensionPlugin );
                jspapi.addHoverFunc();

            });
        </script> 
```

缩略图一一出现：

```
<script type="text/javascript">
            $(function() {
                // Start showing the divs
                showDiv();
            });

            function showDiv() {
                // If there are hidden divs left
                if($('div:hidden').length) {
                    // Fade the first of them in
                    $('div:hidden:first').fadeIn();
                    // And wait one second before fading in the next one
                    setTimeout(showDiv, 500);
                }
            }
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:46:51.173

一般来说，jquery 插件应该独立工作。

他们可能不这样做的原因有很多，但所有这些都取决于一个或两个插件本身的缺陷。

由于 HTML 类名、id 等冲突，您经常会遇到 jquery 插件失败。例如，消失的滚动条很可能是一些冲突的 CSS，在您的工具中使用时不能很好地播放。

也很常见：插件中的一些 jquery 选择器覆盖了从另一个工具编写的一些 html。

一种解决方法 - 使用 iframe 元素将两个页面彼此分开。

或者查看插件，看看是否有任何方法可以为插件使用的类名创建前缀。这可能会有所帮助，因为它将使您的 css 类名保持独立。

否则，只需从 firebug 或其他工具查看 DOM。查看问题中涉及哪些 CSS 样式和 HTML 元素，以了解您可能会采取哪些措施来修复它。

# jquery - 仅当鼠标非常缓慢地离开 div 时，子菜单上的滑动效果才有效

> ID：11387541
> 
> 赞同：2
> 
> 时间：2012-07-08T23:25:16.997
> 
> 标签：jquery, navigation, padding, slidedown

我有以下脚本来处理子导航菜单的上下滑动：

```
$j('body').ready(function() {
    $j('.box').hover(function() {
        $j(this).find('.sub-menu').slideDown(500);
    },
        function() {
            $j(this).find('.sub-menu').slideUp(500);
        });
}); 
```

向下滑动工作正常，但向上滑动根本不起作用。相反，子菜单在离开 .box div 时突然消失了。所以我在包含 .box 的 div 中添加了 4px 的内边距，左右各 4px（这是我可以节省的！）。现在当鼠标缓慢地向左或向右离开div时，我确实得到了slideUp效果，但是以正常速度这样做时，仍然没有向上滑动。[您可以通过访问此页面](http://soteriabrighton.co.uk/)并将鼠标悬停在第二个导航项（“新闻”）上来了解我的意思。

padding 似乎有助于检测鼠标指针离开 div，但 slideUp 功能仍然无法正常工作，肯定有更好的解决方案吗？导航列表中“新闻”项的 HTML 是：

```
<li id="menu-item-144" class="menu-item menu-item-type-post_type menu-item-object-page">
<div class="box">
<div class="top_nav"></div>
<div class="clear">
<div class="bottom_nav"><div class="left_nav"></div><div class="center_nav"><a href="http://soteriabrighton.co.uk/news/">news</a></div><div class="right_nav"></div></a></div></div>
    <ul class="sub-menu">
    <li id="menu-item-459" class="menu-item menu-item-type-post_type menu-item-object-page">
    <div class="box">
    <div class="top_nav"></div>
    <div class="clear">
    <div class="bottom_nav"><div class="left_nav"></div><div class="center_nav"><a href="http://soteriabrighton.co.uk/news/events/">events</a></div><div class="right_nav"></div></a></div></div>
    </li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T00:22:04.503

实际上，主要问题是你有 13 个 CSS 文件和 30 个 javascript 文件，所以你可能不知道发生了什么！

禁用 javascript 时，您会看到在 CSS 中设置了悬停效果，在 JS 中设置了另一种效果，它们相互干扰。

删除 CSS 悬停功能，然后尝试：

```
$j('.box').on('mouseenter mouseleave', function(e) {
    $j('.sub-menu', this).stop(true, true)[e.type==='mouseenter'?'slideDown':'slideUp'](500);
}); 
```

注意它没有这些`$('body').ready...`东西，因为那只是不必要的，把它放在里面`$(function() {...}) instead.`

此外，不需要 30 个 javascript 文件，并且您不必将每个小函数都包装在 中`$j(function() {...});`，通常其中一个就足够了。

在 noConflict 模式下运行 jQuery 似乎也不是一个很好的理由，看起来它只是一个反复出现的主题，以尽可能多地添加插件/文件/whatnot（阅读：废话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:43:15.183

主要问题是您没有清除 jQuery 动画队列。

此外，您应该存储`$j(this).find('.sub-menu')`在全局变量中。

这是代码：

```
var subMenu; /* Global variable */

$j('body').ready(function() {
    $j('.box').hover(function() {
        if(subMenu == null)
        {
            subMenu = $j(this).find('.sub-menu');
        }
        subMenu.stop(); /* Clears animation before applying slideDown */
        subMenu.slideDown(500);
    },
        function() {
            if(subMenu == null)
            {
                subMenu = $j(this).find('.sub-menu');
            }
            subMenu.stop(); /* clears animation before applying slideUp */
            /* you might need to put a 'subMenu.show();' here in case it's not visible */
            subMenu.slideUp(500);
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:47:50.393

检查元素的事件。可能元素有更多的事件要处理。

# performance - 性能调整 Hive 查询

> ID：11387543
> 
> 赞同：13
> 
> 时间：2012-07-08T23:25:54.220
> 
> 标签：performance, exception, memory, hive

我有一个 Hive 查询，它选择大约 30 列和大约 400,000 条记录并将它们插入到另一个表中。我的 SQL 子句中有一个连接，它只是一个内部连接。

由于超出 Java GC 开销限制，查询失败。

奇怪的是，如果我删除连接子句并从表中选择数据（略高一些），那么查询就可以正常工作。

我对 Hive 很陌生。我不明白为什么这个连接会导致内存异常。

关于如何编写 Hive 查询，我应该注意些什么，以免它们引起这些问题？谁能解释为什么联接可能会导致此问题，但选择更多数据和相同数量的列却不会。

感谢您对此的想法。谢谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-10T02:32:42.063

根据 Hive 的版本和您的配置，您的问题的答案可能会有所不同。如果您可以共享您的确切查询以及两个表的创建语句以及它们的大小估计，那将会更容易。

为了更好地理解这个问题，让我们看看 Hive 中的“常规”内部连接是如何工作的。

**在 MapReduce 中加入 Hive：**

这是 Hive 中的内部连接如何编译为 MapReduce 的简化描述。通常，如果您有两个表 t1 和 t2 并带有如下连接查询：

```
SELECT
   t1.key, t1.value, t2.value
FROM
   t1
   JOIN
   t2 (ON t1.key = t2.key); 
```

其中，t1有以下内容：

```
k_1    v1_1
k_2    v1_2
k_3    v1_3 
```

其中，t2有以下内容：

```
k_2    v2_2
k_3    v2_3
k_4    v2_4 
```

我们希望连接结果是

```
k_2    v1_2    v2_2
k_3    v1_3    v2_3 
```

假设表存储在 HDFS 上，它们的内容将被拆分为文件拆分。映射器将文件拆分作为输入，并发出作为表的键列的键和作为表的值列和标志的组合的值（表示记录来自哪个表，即 t1 或 t2） .

对于 t1：

```
k_1, <v1_1, t1>
k_2, <v1_2, t1>
k_3, <v1_3, t1> 
```

对于 t2：

```
k_2, <v2_2, t2>
k_3, <v2_3, t2>
k_4, <v2_4, t2> 
```

现在，这些发出的记录经过混洗阶段，其中所有具有相同键的记录被组合在一起并发送到减速器。每个 reduce 操作的上下文是一个键和一个包含与该键对应的所有值的列表。在实践中，一个 reducer 将执行多个 reduce 操作。

在上面的示例中，我们将获得以下分组：

```
k_1, <<v1_1, t1>>
k_2, <<v1_2, t1>, <v2_2, t2>>
k_3, <<v1_3, t1>, <v2_3, t2>>
k_4, <<v2_4, t2>> 
```

这是减速器中发生的事情。对于值列表中的每个值，如果这些值对应于不同的表，reducer 将执行乘法运算。

对于 k_1，t2 没有任何值，也没有发出任何内容。

对于 k_2，发出值的乘法 - k_2、v1_2、v2_2（因为每个表都有一个值，1x1 = 1）

对于 k_3，会发出值的乘积 - k_3、v1_3、v2_3（因为每个表都有一个值，1x1 = 1）

对于 k_4，t1 没有任何值，也没有发出任何内容。因此，您从内部联接中获得了预期的结果。

**好的，那我该怎么办？**

1.  您的数据可能存在偏差。换句话说，当reducer获取数据时，某个key对应的value列表很长，导致出错。为了缓解这个问题，您可以尝试增加 JVM 可用的内存。您可以通过设置为hive-site.xml 中`mapred.child.java.opts`的值来执行此操作。您可以通过在 Hive shell 中`-Xmx512M`执行来查询此参数的当前值。`set mapred.child.java.opts;`

2.  您可以尝试使用“常规”连接的替代方法，例如地图连接。以上对连接的解释适用于连接发生在减速器中的常规连接。根据您使用的 Hive 版本，Hive 可能会自动将常规连接转换为更快的映射连接（因为连接发生在映射阶段）。要启用优化，请设置`hive.auto.convert.join`为`true`。此属性是在[Hive 0.7中引入的](https://issues.apache.org/jira/browse/HIVE-1642)

3.  除了设置`hive.auto.convert.join`为`true`，您还可以设置`hive.optimize.skewjoin`为`true`。这将解决 1 中描述的数据问题中的偏差。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T03:40:19.670

非常感谢马克的回复。非常感激。

几个小时后，我最终发现 join 语句中表的顺序有所不同。为了获得最佳性能和内存管理，最后一个连接应该是最大的表。

在 join 语句中更改我的表的顺序解决了这个问题。

[请参阅http://hive.apache.org/docs/r0.9.0/language_manual/joins.html](http://hive.apache.org/docs/r0.9.0/language_manual/joins.html)上的最大表最后

您上面的解释也非常有用。非常感谢

# css - div 高度同时最小浏览器高度和内部内容高度

> ID：11387548
> 
> 赞同：1
> 
> 时间：2012-07-08T23:26:49.320
> 
> 标签：css, height

我正在寻找解决我的 CSS 问题的方法。这是 Drupal 主题，所以内容会有不同的高度。我在底部固定了页脚，结构如下

```
<body>
  <div class="page-container">

    <div class="header">
    </div>

    <div class="content-container">

      <div class="content-insider">
       Different kind of content here
      </div>

    </div>
  </div>

  <div class="footer">
  </div>
</body> 
```

我需要 content-container 和 content-insider 的高度至少是浏览器窗口的高度，同时也是内部内容的高度。需要将背景一直扩展到底部。我尝试了一些解决方案（也来自[stackoverflow](https://stackoverflow.com/questions/6158975/css-100-height-layout)），但它们仅在内容短于浏览器高度时才有效。如果有更多内容，并且您向下滚动，则内容内幕会在到达浏览器底部之前切断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:22:11.747

这是粘页脚的情况。你可以谷歌它或继续阅读。

1.  在 .page-container 上设置 100% 的最小高度；
2.  将其 box-sizing 属性更改为 border-box ，以便通过添加一些 padding 填充，其高度保持等于 100% vs 100% + padding。然后，完成后，添加一个等于 .footer 高度的填充底部；
3.  通过将负边距顶部设置为等于其高度来向上拉页脚。

而已。这是一个小提琴，所以你可以看到它的实际效果：http: [//jsfiddle.net/joplomacedo/MqzGt/](http://jsfiddle.net/joplomacedo/MqzGt/)

# java - 多个arrayList之间的元素交集

> ID：11387550
> 
> 赞同：1
> 
> 时间：2012-07-08T23:27:33.273
> 
> 标签：java, data-structures, collections, arraylist, intersection

我在 MP3 文件的“注释”部分添加和删除 TAGS（字符串）。我主要依靠 ArrayList 来拆分 COMMENT 字符串。现在我想找到这些标签的交集（或者更好地说是 ArrayList 的字符串元素）。

我需要知道我是否选择了正确的集合，还有什么是找到这些交叉点的​​最佳方法？因为用户可能会选择 10 或 100 首歌曲 (ArrayLists) 并询问相交标签。我是否应该单独查找两个 ArrayLists 的相交标签，然后使用结果来查看第三个 ArrayList 等等？还是我需要更改我的数据结构。

抱歉写了一篇文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:31:58.523

如果你想计算交点，你几乎肯定应该使用 a`Set`而不是 a `List`。集合非常适合处理无序集合和操作，如联合和交集（使用`removeAll`和`retainAll`）。它们也更有效地回答诸如“这个元素是否包含在集合中？”之类的问题。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T08:18:16.690

如果您不想修改现有列表，请使用 org.apache.commons.collections 中的 ListUtils。

`ListUtils.intersection(list1, list2)`

# javascript - Sinonjs 无法读取未定义的属性“quoteStrings”

> ID：11387551
> 
> 赞同：0
> 
> 时间：2012-07-08T23:27:34.483
> 
> 标签：javascript, backbone.js, sinon

Sinon 给了我一些有趣的错误：

```
TypeError: Cannot read property 'quoteStrings' of undefined
    at ascii (http://localhost:3500/assets/sinon.js?body=1:164:36)
    at Function.array (http://localhost:3500/assets/sinon.js?body=1:207:25)
    at Object.ascii (http://localhost:3500/assets/sinon.js?body=1:179:26)
    at Object.format (http://localhost:3500/assets/sinon.js?body=1:594:36)
    at Object.<anonymous> (http://localhost:3500/assets/sinon.js?body=1:1065:43)
    at Function.toString (http://localhost:3500/assets/sinon.js?body=1:1744:54)
    at Function.verify (http://localhost:3500/assets/sinon.js?body=1:1761:49)
    at Context.<anonymous> (http://localhost:3500/assets/views/myview_spec.js?body=1:29:21)
    at Test.run (http://localhost:3500/assets/mocha.js:3322:32)
    at Runner.runTest (http://localhost:3500/assets/mocha.js:3630:10) 
```

这是导致它的测试：

```
 beforeEach ->
      # make a fake collection object
      collection =
        each: ->

      @subject = new App.Views.TaskList collection: collection
      @sandbox = sinon.sandbox.create()

    it 'renders each task in the collection', ->

      task = ['task model']
      @sandbox.stub(@subject.collection, 'each').yields task

      mock = @sandbox.mock(@subject).expects('renderTask')
                                    .withExactArgs(task, skipLayout: true)
      @subject.render()
      mock.verify() 
```

和被测代码：

```
 render: =>
    @collection.each (task) =>
      @renderTask task

    this 
```

### 更新：

事实证明，当我更新代码以通过测试时，我没有收到错误：

```
 render: =>
    @collection.each (task) =>
      @renderTask task, skipLayout: true

    this 
```

所以这一定和 sinon.js 期望失败有关。可能是一个 sinon.js 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:32:08.447

我在我的代码中看到了完全相同的错误。无法确定提交上游补丁的确切来源，所以我使用存根解决了问题：

```
mock = @sandbox.stub collection, 'renderTask'

@subject.render()

mock.callCount.should.equal 1
mock.calledWith.should.equal task, skipLayOut: true 
```

丑陋但有效。断言的确切语法将根据您的框架而有所不同；我在示例中使用 chai。

# mysql - 处理复杂的 ActiveRecord 关联

> ID：11387553
> 
> 赞同：0
> 
> 时间：2012-07-08T23:27:52.243
> 
> 标签：mysql, ruby, activerecord, associations, hierarchy

我正在尝试建立一个相当复杂的关系。从下面的 SQL 中可以看出，我在这里使用了三个（如果包括 User，则为四个）模型。成员、组和角色。

用户通过成员资格属于组，成员资格本身可以具有角色。因此，用户通过成员资格在组中具有角色。

我想要做的是通过用户在成员资格中的角色来订购特定组的成员资格。角色有一个与之相关的“等级”。因此，CEO = 3，部门主席 = 2，经理 = 1，工人 = 0（例如）。更复杂的是，一个角色可以从属于另一个角色。因此，CEO 可以是称为董事会的角色的一部分，而部门主席和经理可以是称为高层管理（或其他）角色的一部分。

正如您从下面的 SQL 中看到的那样，我已经开始工作了，我只需要弄清楚如何将其转换为 ActiveRecord 关联，以便当我找到一个组时，我可以说 group.memberships 并且应该根据到角色等级。

```
SELECT `memberships`.* from `memberships`
 INNER JOIN `groups` ON `groups`.id = `memberships`.group_id
 INNER JOIN `roles` ON `memberships`.role_id = `roles`.id
 INNER JOIN `roles` `role_cat` ON `role_cat`.id = `roles`.type_id

WHERE `groups`.id = "HHC" AND `memberships`.expiration > CURDATE()
ORDER BY `role_cat`.rank DESC, `roles`.rank DESC 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:38:57.787

如果您确定查询符合您的要求，这是我认为从中获得 AR 关系的最直接方法，因为您有一个`group`您想要查询的：

```
group.memberships.joins(:role).
  joins('join roles as roles_cat on role_cat.id=roles.type_id').
  where("groups.id='HHC' and memberships.expiration>curdate()").
  order('role_cat.rank desc, roles.rank desc') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:46:39.740

当您处理复杂的连接查询时，我发现最好创建一个表示连接模型的视图。

完成此操作后，如果有需要访问和使用的附件属性，`has_many :join_model_name`或者您只需要直接访问其中一个已连接的模型，则可以创建该模型，您可以使用`has_and_belongs_to_many :model_name`

当然可以在 6 个月内从经验中学到很多东西 :)

谢谢哈格林的帮助！

# f# - 如何使用具有 OAuth 授权的 F# ODATA TypeProvider

> ID：11387554
> 
> 赞同：2
> 
> 时间：2012-07-08T23:27:54.440
> 
> 标签：f#

我有一个需要 Oauth 令牌进行授权的 OData svc。元数据 URL 可[在此处](https://wamsstageclus001rest-hs.cloudapp-int.net/API/%24metadata?api-version=1.0)获得。

然而，

```
let MySvc = ODataService<"https://wamsstageclus001rest-hs.cloudapp-int.net/API/$metadata?api-version=1.0"> 
```

返回错误`reading schema, 404`。

我错过了什么？如何使用 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T19:33:21.637

VS2012 附带的 FSharp.Data.TypeProviders.dll 中有一个关于如何附加`$metadata`到 URL 的错误。

幸运的是，类型提供程序只是设计时需要的“另一个库”，因此为了解决这个错误（以及其他一些类型提供程序问题），我们目前的计划是在带外发布一个更新的类型提供程序库。从历史上看，在 VS2010 中，F# 团队在 VS 发布后一两个月对 F# 编译器/库源和 powerpack 进行了开源发布更新，因此，如果有人假设 VS2012 也是如此，那么这可能是我们向类型提供程序发布一些更新。（目前我无法提供更多发布时间表信息。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:12:04.747

您确定这是要使用的正确 URL。通常，您提供服务的 URL，服务提供者自行查找元数据。但是，您的代码提供了元数据的 URL。

因此，类型提供程序可能会向 URL 添加附加信息以使用它，而服务不知道如何处理这些复合 URL。

编辑：显然有人觉得我不清楚。

```
https://wamsstageclus001rest-hs.cloudapp-int.net/API/$metadata?api-version=1.0 
```

将成为，当 ODataAdapter 尝试获取元数据信息时

```
https://wamsstageclus001rest-hs.cloudapp-int.net/API/$metadata?api-version=1.0$metadata 
```

或类似的东西。如果您浏览到该特定站点，您将看到 404 错误。

但是，如果你给 ODataAdapter

```
https://wamsstageclus001rest-hs.cloudapp-int.net/API/ 
```

然后添加元数据不会导致 404 错误。您应该能够留下版本信息，因为它使用的是 URL 类而不是字符串操作（或者我希望如此），看起来如下所示

```
 https://wamsstageclus001rest-hs.cloudapp-int.net/API/?api-version=1.0 
```

# objective-c - 在 iOS 中保持套接字连接处于活动状态

> ID：11387560
> 
> 赞同：11
> 
> 时间：2012-07-08T23:29:14.110
> 
> 标签：objective-c, sockets, ios5, timeout, keep-alive

我有以下用 Objective-C 编写的代码，它将数据写入套接字。服务器在 Ubuntu 上运行 node.js：

```
NSString *url = @"anIPAddress";        
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;            
CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)url, 9000, &readStream, &writeStream);
self.inputStream = (NSInputStream *)readStream;            
self.outputStream = (NSOutputStream *)writeStream;
[self.inputStream setDelegate:self];            
[self.outputStream setDelegate:self];            
[self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];            
[self.outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];            
[self.inputStream open];            
[self.outputStream open]; 
```

我能够连接到服务器并发送信息。但是我注意到几分钟后连接超时（我认为是 5 分钟左右？）。我怎样才能保持这个连接活着？我知道存在断开连接，因为如果我连接到终端下的服务器也会发生同样的事情，我必须保持该连接处于活动状态。我想我的代码中也发生了同样的事情。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T23:58:05.050

最简单的答案是尝试使用`SO_KEEPALIVE`套接字选项。

如果端点之间没有数据流动，则很难检测到断开的连接，这使得此选项在某些方面无用，因为它不使用数据来检测断开的连接。但是，很容易添加到您的代码中查看。添加它，看看它是否有帮助......

这就是它在 C 或 C++ 中的完成方式

```
int opt = 1;
// Get the native socket handle from your socket class here...
int socket_handle = getNativeSocketHandle( self.outputStream );

/*Enabling keep alive*/
if( setsockopt( socket_handle, SOL_SOCKET, SO_KEEPALIVE, &opt, sizeof( opt ) ) < 0 )
{
   // failed setting socket option
} 
```

不那么简单的答案是将`ping`数据包添加到您的协议中并定期发送该 ping 数据包，以便您可以检测到断开的连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T00:05:02.947

您需要定期通过连接发送一些垃圾。试试这个：

```
NSTimer* t = [NSTimer scheduledTimerWithTimeInterval:240 target:self selector:@selector(timerMethod:) userInfo:[NSNumber numberWithInt:sockfd] repeats:YES]; 
```

然后在中声明`self`：

```
-(void)timerMethod:(NSTimer*)t
{
  send([[t userInfo] intValue], "Keepalive!", 11, 0);
} 
```

注意：替换`“Keepalive！” 为您的协议提供任何您想要的东西。唯一的要求是远程端（套接字服务器）忽略该消息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T04:44:53.643

我找到了如何做到这一点。由于服务器运行的是 node.js，所以我使用了

```
socket.setKeepAlive(true, 2000); 
```

并且以这种方式节点保持每个套接字打开。默认值为 false，所以这就是超时的原因。我希望这对其他人有用。感谢您的回复，我认为保持心跳（保持活动状态）也是一个好主意，但是使用此本地方法节点会处理它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-10T23:32:25.787

假设一个 NSOutputStream *oStream;

在 iOS 上这样做：

```
#if 1 // Using CF
CFDataRef data = (CFDataRef)CFWriteStreamCopyProperty((__bridge CFWriteStreamRef)oStream, kCFStreamPropertySocketNativeHandle);
if(data) {
    CFSocketNativeHandle socket_handle = *(CFSocketNativeHandle *)CFDataGetBytePtr(data);
    CFRelease(data);
#else // Using Foundation
NSData *data = (NSData *)[oStream propertyForKey:(__bridge NSString *)kCFStreamPropertySocketNativeHandle];
if(data) {
    CFSocketNativeHandle socket_handle = *(CFSocketNativeHandle *)[data bytes];
#endif
    NSLog(@"SOCK HANDLE: %x", socket_handle);

    /*Enabling keep alive*/
    if( setsockopt( socket_handle, SOL_SOCKET, SO_KEEPALIVE, &opt, sizeof( opt ) ) < 0 )
    {
       NSLog(@"Yikes 2: failed to set keepalive! ERRNO: %s", strerror(errno));
    } 
```

我之所以发布这个，是因为我花了几个小时才把它全部搞定，想节省别人的精力。

# c++ - 从 C++/Windows 中的名称和样式获取字体文件路径

> ID：11387564
> 
> 赞同：8
> 
> 时间：2012-07-08T23:29:52.827
> 
> 标签：c++, windows, fonts, freetype

我目前正在我的一个项目中实现 FreeType 2，因此需要我系统上的字体文件路径。我需要一个仅采用字体名称和所需字体样式（例如**粗体**或*斜体*）然后返回字体的文件路径的解决方案。

我已经尝试了这个[Stack Overflow question](https://stackoverflow.com/questions/4577784/get-a-font-filename-based-on-font-name-and-style-bold-italic)的答案，但它不适用于 Windows 7（可能也不适用于 Vista），但显然我需要一个适用于这些系统和未来系统的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T18:33:01.210

我曾经为 Windows 平台编写了代码，以查找基于“Arial Bold”或此类名称的字体文件。代码贴在下面。它正在扫描注册表并尝试查找字体名称与 Windows 字体目录中文件的匹配项。它可能不是防弹的，但它确实起到了一定的作用。获得文件名后，您可以将其传递给 FreeType。

```
// Get system font file path
std::string GetSystemFontFile(const std::string &faceName) {

  static const LPWSTR fontRegistryPath = L"Software\\Microsoft\\Windows NT\\CurrentVersion\\Fonts";
  HKEY hKey;
  LONG result;
  std::wstring wsFaceName(faceName.begin(), faceName.end());

  // Open Windows font registry key
  result = RegOpenKeyEx(HKEY_LOCAL_MACHINE, fontRegistryPath, 0, KEY_READ, &hKey);
  if (result != ERROR_SUCCESS) {
    return "";
  }

  DWORD maxValueNameSize, maxValueDataSize;
  result = RegQueryInfoKey(hKey, 0, 0, 0, 0, 0, 0, 0, &maxValueNameSize, &maxValueDataSize, 0, 0);
  if (result != ERROR_SUCCESS) {
    return "";
  }

  DWORD valueIndex = 0;
  LPWSTR valueName = new WCHAR[maxValueNameSize];
  LPBYTE valueData = new BYTE[maxValueDataSize];
  DWORD valueNameSize, valueDataSize, valueType;
  std::wstring wsFontFile;

  // Look for a matching font name
  do {

    wsFontFile.clear();
    valueDataSize = maxValueDataSize;
    valueNameSize = maxValueNameSize;

    result = RegEnumValue(hKey, valueIndex, valueName, &valueNameSize, 0, &valueType, valueData, &valueDataSize);

    valueIndex++;

    if (result != ERROR_SUCCESS || valueType != REG_SZ) {
      continue;
    }

    std::wstring wsValueName(valueName, valueNameSize);

    // Found a match
    if (_wcsnicmp(wsFaceName.c_str(), wsValueName.c_str(), wsFaceName.length()) == 0) {

      wsFontFile.assign((LPWSTR)valueData, valueDataSize);
      break;
    }
  }
  while (result != ERROR_NO_MORE_ITEMS);

  delete[] valueName;
  delete[] valueData;

  RegCloseKey(hKey);

  if (wsFontFile.empty()) {
    return "";
  }

  // Build full font file path
  WCHAR winDir[MAX_PATH];
  GetWindowsDirectory(winDir, MAX_PATH);

  std::wstringstream ss;
  ss << winDir << "\\Fonts\\" << wsFontFile;
  wsFontFile = ss.str();

  return std::string(wsFontFile.begin(), wsFontFile.end());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T02:01:35.080

请问为什么需要物理文件的路径？

*   如果只需要字体的二进制数据，可以使用[GetFontData](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144885(v=vs.85).aspx)。
*   如果需要字体的度量，您可以创建一个 HFONT，将 HFONT 选择到字体持有者 HDC 中，然后使用[GetOutlineTextMetrics](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144906(v=vs.85).aspx)。
*   如果您需要有关字体链接的信息，请查看我的项目：[font_link.cpp](http://code.google.com/p/gdipp/source/browse/gdipp_server/font_link.cpp)。
*   以上都是纯GDI函数。如果您确实需要字体路径，并且不介意使用 DirectWrite，请查看[IDWriteFontFile::GetReferenceKey](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371108(v=vs.85).aspx)和[IDWriteLocalFontFileLoader::GetFilePathFromKey](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371241(v=vs.85).aspx)。这将为您提供比 GDI 更多的未来保险。

# nsmutablearray - 使用包含 Point2d 元素的 NSMutableArray 的向量

> ID：11387568
> 
> 赞同：0
> 
> 时间：2012-07-08T23:30:12.253
> 
> 标签：nsmutablearray

我如何使用 NSMutableArray 来执行以下在 C++ 中完成的操作。

向量 BubblePacking (int _state, vector & _location_points, float _bubble_size);

我创建了一个 Point2D 类，但我不知道如何使它像在 c++ 中一样工作

// -------------Point2D 类

```
@interface EVAPoint2D : NSObject
{
    float x;
    float y;  

}

@property float x,y;

-(void)setXY: (float) xVal: (float) yVal;

@end 
```

// -------------Point2D 实现

```
@implementation EVAPoint2D
@synthesize x,y;

-(void) setXY:(float)xVal :(float)yVal{
    x=xVal;
    y=yVal;
}

@end 
```

现在我怎样才能让我需要使用 NSMutable 数组创建 Point2D 元素向量的目标 C

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:41:47.810

[NSMutableArray 类参考](https://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/)

你必须用 . 初始化一个 NSMutableArray `myArr = [[NSMutableArray alloc] init];`。然后，要添加一个对象，而不是`push_back(myPoint)`使用`[myArr addObject:myPoint]`. 要访问一个值，请使用`[myArr objectAtIndex:i]`而不是`myVector[i]`.

还要记住在将点对象添加到数组后释放它们，并在完成后释放数组。（当然，除非您使用的是 ARC）

# c - 在 ncurses 中使用退格键

> ID：11387572
> 
> 赞同：7
> 
> 时间：2012-07-08T23:31:24.407
> 
> 标签：c, ncurses

我设置了一个简单的 ncurses 程序，它使用 getch() 一次读取一个字符并将它们复制到缓冲区中。我遇到的问题是检测到按下退格键。以下是相关代码：

```
while((buffer[i] = c = getch()) != EOF) {
    ++i;
    if (c == '\n') {
        break;
    }
    else if (c == KEY_BACKSPACE || c == KEY_DC || c == 127) {
        i--;
        delch();
        buffer[i] = 0;
    }
    refresh();
} 
```

但是当尝试运行此代码时，这是尝试从“这是一个测试”行中删除字符后出现在屏幕上的内容：

```
this is a test^?^?^? 
```

内容为`buffer`：

```
this is a test 
```

使用 gdb 我知道正在调用检查删除/退格的 if 语句，那么我还应该做什么才能删除字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T23:42:24.313

当您输入 DEL 字符时，它看起来像是`^?`在屏幕上回显的内容。

您可能会调用`delch()`两次，但随后您必须弄清楚哪些字符作为两个字符（或更多）序列回显。

您最好的选择可能是自己调用`noecho()`并明确打印字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-21T17:23:53.553

实际上，通过使用表单库和 ncurses 有一种更简单的方法。如果您将代码更改为此：

```
while((buffer[i] = c = getch()) != EOF) {
    ++i;
    if (c == '\n') {
        break;
    }
    else if (c == KEY_BACKSPACE || c == KEY_DC || c == 127) {
        form_driver(Form, REQ_DEL_PREV);
    }
    refresh();
} 
```

它会退格没有问题。[您可以在此处](https://tldp.org/HOWTO/NCURSES-Programming-HOWTO/forms.html)找到 REQ_DEL_PREV 命令的一些（尽管有限）文档。

# python - 将文件上传到 Google Drive 上可公开写入的文件夹 - 使用 Python 且无需通过身份验证？

> ID：11387575
> 
> 赞同：1
> 
> 时间：2012-07-08T23:31:49.193
> 
> 标签：python, google-app-engine, google-drive-api

[python 示例源代码](https://developers.google.com/drive/examples/python#complete_source_code)通过身份验证/等的详细信息。我正在寻找一个简单的上传到具有公共可写权限的 Google Drive 文件夹。（计划稍后实施授权）。

我想替换以下代码以将文件上传到 Google Drive 文件夹。

```
f = open('output.txt')
for line in allLines:
       f.write (line)
f.close() 
```

（如果有什么不同，我计划通过 Google App Engine 运行它）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:17:42.687

你不能。对 Drive API 的所有请求都需要身份验证（来源：http: [//developers.google.com/drive/about_auth](http://developers.google.com/drive/about_auth)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-21T20:36:38.660

正如 Wooble 所说，没有身份验证就无法做到这一点。您可以使用此服务 + 文件上传小部件让您的网站访问者将文件上传到您的 Google Drive 文件夹：[https ://github.com/cloudwok/file-upload-embed/](https://github.com/cloudwok/file-upload-embed/)

# javascript - 如何为模板编写 .trigger() 代码？

> ID：11387577
> 
> 赞同：0
> 
> 时间：2012-07-08T23:32:07.147
> 
> 标签：javascript, jquery

我在下面有一个表格，其中包含一个文本框，并且在文本框旁边它包含一个称为“Open Grid”的超链接。如果用户单击此链接，则会打开一个网格，并在此网格上显示 3 到 26 的数字按钮。

```
<table id="optionAndAnswer" class="optionAndAnswer">
    <tr class="option">
    <td>1\. Option Type:</td>
    <td>
    <div class="box">
        <input type="text" name="gridValues" class="gridTxt maxRow" id="mainGridTxt" readonly="readonly" />
        <span href="#" class="showGrid" id="showGridId">[Open Grid]</span>
    </div>

    <table class="optionTypeTbl">
    <tr>

        <tr><td><input type="button" value="3" id="btn3" name="btn3Name" class="gridBtns gridBtnsOff">

        <input type="button" value="4" id="btn4" name="btn4Name" class="gridBtns gridBtnsOff">
        <input type="button" value="5" id="btn5" name="btn5Name" class="gridBtns gridBtnsOff">
        <input type="button" value="6" id="btn6" name="btn6Name" class="gridBtns gridBtnsOff">

        //...goes all the way to btn26
            </tr>

            </table>

            </td>
    </tr>
</table> 
```

现在，下面的代码能够触发其中一个网格按钮来声明单击了一个网格按钮。这段代码如下：

```
$('#btn'+gridValues).trigger('click'); 
```

现在上面的一切都很好。

问题：

我遇到的问题是用户可以添加一行，其中包含与顶部选项控件相同的模板。但在此选项和答案控件中，用户可以根据需要通过单击此模板中的一个网格按钮来更改选项类型。所以我的问题是我如何编写`.trigger()`正确指向此模板中的网格按钮？如果您查看上面的代码，它使用按钮的 id，但如果您查看下面的模板代码，它不包含 id，它只是将选项和控制功能从上面复制到模板中。

下面是模板：

```
function insertQuestion(form) {    

 var context = $('#optionAndAnswer');

    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'>");
    var $options = $("<div class='option'>Option Type:<br/></div>");
    var $questionType = '';

    $('.gridTxt', context).each( function() {

    var $this = $(this);
    var $optionsText = $("<input type='text' class='gridTxtRow maxRow' readonly='readonly' />")
    .attr('name',$this.attr('name')+"[]")
    .attr('value',$this.val())
    .appendTo( $options )
    .after("<span href='#' class='showGrid'>[Open Grid]</span>");

    $questionType = $this.val();

    });

    $td.append($options);
    $tbody.append($tr); 

} 
```

更新：

我在[这里](http://helios.hud.ac.uk/u0867587/Mobile_app/Text14.php)为这个应用程序创建了一个 URL 。请按照步骤使用该应用程序，然后您可以看到发生了什么：

*   步骤 1：当您打开应用程序时，您会在页面上看到一个绿色的加号按钮，单击它会显示一个模态窗口。
*   第2步：在模态窗口有一个搜索栏，输入“AAA”并提交搜索，你会看到一堆行出现。
*   第 3 步：在第一行中，您会在“选项类型”AD 下看到，单击该行中的“添加”按钮，模式窗口将关闭，您会在右侧的灰色文本框中看到“选项类型”文本框等于 4 并显示答案按钮 A、B、C 和 D，这是因为您记得该行的选项类型是“AD”。

现在这工作正常，但它只适用于顶部选项和答案控制，请按照以下步骤操作：

*   第 4 步：单击“添加问题”按钮，它会在下方添加一行，其中包含选项的详细信息和顶部的答案控件。
*   第5步：在您刚刚添加的行中，您会在左侧看到一个绿色的加号按钮，单击此按钮并在搜索框中执行相同的搜索“AAA”。
*   第 6 步：这次通过单击“添加”按钮选择最后一行，该行的“选项类型”为“AG”，因此应显示“答案”按钮 A、B、C、D、E、F 和G，但它没有这样做，它仍然显示“A，B，C，D”。

那么如何在附加行之一中更改选项和答案控件中显示的答案按钮？

您在应用程序的视图源中看到的`addwindow()`功能是单击“添加”按钮后发生的功能。“添加”按钮位于包含的 PHP 脚本中，该按钮的代码如下所示，其中包含您在模式窗口中执行搜索后看到的所有列：

```
 echo "<table border='1' id='resulttbl'>
      <tr>
      <th class='questionth'>Question</th>
      <th class='optiontypeth'>Option Type</th>
      <th class='noofanswersth'>Number of <br/> Answers</th>
      <th class='answerth'>Answer</th>
      <th class='noofrepliesth'>Number of <br/> Replies</th>
      <th class='noofmarksth'>Number of <br/> Marks</th>
      </tr>";
      foreach ($searchResults as $key=>$question) {
        echo '<tr class="questiontd"><td>'.htmlspecialchars($question).'</td>';
        echo '<td class="optiontypetd">'.htmlspecialchars($searchOption[$key]).'</td>';
        echo '<td class="noofanswerstd">'.htmlspecialchars($searchNoofAnswers[$key]).'</td>';
        echo '<td class="answertd">'.htmlspecialchars($searchAnswer[$key]).'</td>';
        echo '<td class="noofrepliestd">'.htmlspecialchars($searchReply[$key]).'</td>';
        echo '<td class="noofmarkstd">'.htmlspecialchars($searchMarks[$key]).'</td>';
        echo "<td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow('$question','$searchMarks[$key]','$searchNoofAnswers[$key]','$searchOption[$key]','$searchReply[$key]','$searchAnswer[$key]');\">Add</button></td></tr>";
}
      echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:12:21.373

恐怕我一定是坏消息的传递者。您遇到的问题源于整体设计。您的 HTML 和 javascript 确实需要自下而上的大修，目的是让所有 javascript 进入单个 $(function(){...}) 结构，从而进入相同的范围。为此，您需要：

*   在 javascript 中附加所有事件处理程序，以支持 HTML 属性方法（当前混合）。
*   清除 iFrame 以通过 AJAX 获取以前的问题。

在此过程中，您还将清除一些重复的点击处理（加按钮 img 及其`<a>...</a>`包装）。

然后，您可以开始找到解决问题的方法：

*   将与原始“选项和答案”块关联的所有事件处理委托给它和所有未来的“选项和答案”块通用的容器。公共容器可以是`document`但最好是更具体的东西。这似乎已经部分实现。
*   确保原始“选项和答案”块中的所有内部引用都适用于类而不是 id。`.closest()`并且`.find()`在这里会很有用。
*   单击“+”按钮时，存储对“选项和答案”块的引用（例如，表示其容器的 jQuery 对象，*相对*发现）。最简单的方法是将此引用存储在`$(function(){...})`范围内的变量中。（现在您正在从所有这些结构性变化中受益）。“添加”按钮的单击处理程序将使用此引用来影响正确的“选项和答案”块。
*   在“添加问题”中，使用 jQuery`.clone(true, true)`制作原始块的副本（然后将克隆插入 DOM）。如果已应用其他修复，则所有功能（单击处理程序）将自动附加到克隆。

我工作得很快，但仍然需要 1-2 天。

以下是我将如何组织 javascript。

```
$(function() {
    // **********
    // Data area
    // **********
    var $$ = { // reusable static jQuery objects
        'optionTypeTbl': $('#optionTypeTbl'),
        'o_and_a_proto': $("#proto"),
        'o_and_a_extras': $("#extras"),
        'modal': $("#modal")
    },
    $o_and_a_section = null;

    // ******************
    // Utility functions
    // ******************
    function trim(str) {
        return str.replace(/(^\s*)|(\s*$)/gi, "") // removes leading and trailing spaces
            .replace(/[ ]{2,}/gi," ") // replaces multiple spaces with one space 
            .replace(/\n +/,"\n"); // Removes spaces after newlines
    }

    // ****************
    // Initial actions
    // ****************
    $$.modal.hide();
    $("input.gridBtns").removeClass("gridBtnsOn");
    $("input.answerBtns").removeClass("answerBtnsOn");
    $$.optionTypeTbl.hide();
    // code above makes sure all buttons start in the OFF state (so all button are white).

    // **********************************************
    // Handlers for elements inside the main window
    // **********************************************
    $(document).on('click', function() {
        $$.optionTypeTbl.fadeOut('slow');
    });
    $("input.gridBtns", $$.optionTypeTbl).on('click', function() {
        var $this = $(this);
        var $container = $this.closest('.optionAndAnswer');
        $container.find(".gridBtns").removeClass("gridBtnsOn");
        $this.addClass("gridBtnsOn");
        $container.find(".gridTxt").val($this.val());
        //$container.siblings('span[name=gridValues[]]').val($this.val()); // ???
        $container.find('.answerBtns').each(function(index) {
            if (index < Number($this.val())) {
                $(this).show();
            } else {
                $(this).hide();
            }
        });
    });
    $$.o_and_a_proto.find(".showGrid").on('click', function(e) {
        var $this = $(this);
        var $container = $this.closest(".optionAndAnswer");
        $("input.gridBtns").removeClass("gridBtnsOn");
        var value = $container.find(".gridTxt").val();
        //$("#btn" + value.replace(/\s/g, '')).addClass("gridBtnsOn"); //???
        $$.optionTypeTbl.appendTo($this.closest("div.box")).show().css({
            left: $this.position().left,
            top: $this.position().top + 20
        });
        e.stopPropagation();
    });
    $$.o_and_a_proto.find(".plusimage").on('click', function() {
        $o_and_a_section = $(this).closest(".optionAndAnswer");
        $$.modal.modal();
    });
    $$.o_and_a_proto.find(".answerBtns").on('click', function() {
        //btnclick(this); // ???
    });
    $("#addQuestionBtn").on('click', function insertQuestion() {
        $$.optionTypeTbl.hide().appendTo(document);//ensure this itinerant table is not cloned
        $$.o_and_a_extras.append($$.o_and_a_proto.clone(true,true).attr('id','')).find("span#plussignmsg").remove();
    });

    // **********************************************
    // Handlers for elements inside the modal window
    // **********************************************
    $$.modal.find("#close").on('click', function() {
        $.modal.close();
        return false;
    });
    $$.modal.find("form").on('submit', function() {
        var form = $(this).get(0);
        $.ajax({
            url: 'previousquestions.php',
            data: {
                'searchQuestion': 1,
                'questioncontent': trim(form.questioncontent.value)
            },
            type: "get",
            success: function(html) {
                $("#searchResults").html(html);
            },
            error: function() {
                alert("Something went wrong");
            }
        });
        return false;
    });

    $$.modal.find("#searchResults").on('click', 'button.add', function() {
        var $container = $(this).closest("tr");
        var g = $container.find("optiontypetd").data('g');
        var btn = $container.find("answertd").text();
        $o_and_a_section.find("input.gridTxt").val(g);
        if($o_and_a_section.closest("#detailsBlock").length) { //if is original Options and Answers section
            //do something ???
            //$('#btn'+g).trigger('click'); //???
        }
        $.modal.close();
    });
}); 
```

这在一定程度上可行，但请注意，它需要对 HTML 和 CSS 进行相关更改。

# makefile - Makefile SHELL=怪异

> ID：11387581
> 
> 赞同：1
> 
> 时间：2012-07-08T23:33:08.613
> 
> 标签：makefile

在我的 Makefile 我有：

```
SHELL = /usr/bin/time -f "$@ total time: %E" /bin/sh 
```

这在我的一个 linux 机器上运行良好。但是，在另一个盒子上它会产生段错误。如果我删除那条线就可以了。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:38:18.843

你需要检查一下

1.  "$@" 按预期展开
2.  /usr/bin/time 效果很好
3.  查看目标机器上的 man time，看看那个版本的 time 是否识别“%E”

# android - 根据 android 版本，联系人选择器查询是否需要 read_contacts 权限？

> ID：11387586
> 
> 赞同：2
> 
> 时间：2012-07-08T23:33:46.227
> 
> 标签：android, android-intent

我们一直在尝试使用 Android 联系人选择器，以允许用户在应用程序不需要 READ_CONTACTS 权限的情况下选择联系人。以下意图似乎适用于 4.0 (ICS) 设备以及 2.3.3 模拟器：

```
Intent contactPickerIntent = new Intent(Intent.ACION_GET_CONTENT);
contactPickerIntent.setType(Phone.CONTENT_ITEM_TYPE); // returns content://com.android.contacts/data/...

Intent contactPickerIntent = new Intent(Intent.ACTION_PICK, Contacts.CONTENT_URI); // returns content://com.android.contacts/lookup/... 
```

但是，在 2.2 模拟器和某些 ICS 之前的模型（例如，HTC Thunderbolt、摩托罗拉 Droid）上，尝试查询返回的 UI 会导致权限拒绝异常：

```
Caused by: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/contacts/lookup/0r1-52345052324E483C32/1 from pid=273, uid=10036 requires android.permission.READ_CONTACTS 
```

这看起来像是操作系统或设备碎片问题；我们正在寻求对此主题的澄清，以便我们可以继续采用这种方法或替代方法。

想法？

# android - 使用 Android NFC 写入 Mifare 标签？

> ID：11387587
> 
> 赞同：5
> 
> 时间：2012-07-08T23:33:52.063
> 
> 标签：android, nfc, mifare

我正在尝试将一个简单的“Hello World”字符串写入 Mifare 1K 标签上扇区 0 的第一个块。该标签是全新的，具有默认配置。扇区尾部（块 3）在读取时为：`00 00 00 00 00 00 00 00 ff 07 80 69 ff ff ff ff ff ff ff ff`. 因此，访问条件是`ff 07 80 69`，这意味着我可以使用密钥 A 对每个块进行读写。

尽管如此，我还是无法在标签上写任何东西。这是我的代码：

```
try {
    mfc.connect();
    boolean auth = false;

    auth = mfc.authenticateSectorWithKeyA(0,MifareClassic.KEY_DEFAULT);

    if (auth) {

        String text = "Hello, World!";
        byte[] value  = text.getBytes();
        byte[] toWrite = new byte[MifareClassic.BLOCK_SIZE];        

        for (int i=0; i<MifareClassic.BLOCK_SIZE; i++) {
              if (i < value.length) toWrite[i] = value[i];
              else toWrite[i] = 0;
        }           

        mfc.writeBlock(0, toWrite);
   } 
```

我收到以下异常：`Transceived failed`.

我究竟做错了什么？

这是堆栈跟踪：

```
07-09 00:19:44.836: W/System.err(13167):    at android.nfc.TransceiveResult.getResponseOrThrow(TransceiveResult.java:52)
07-09 00:19:44.843: W/System.err(13167):    at android.nfc.tech.BasicTagTechnology.transceive(BasicTagTechnology.java:151)
07-09 00:19:44.843: W/System.err(13167):    at android.nfc.tech.MifareClassic.writeBlock(MifareClassic.java:453)
07-09 00:19:44.843: W/System.err(13167):    at com.example.andorid.apis.mifare.MainActivity.resolveIntent(MainActivity.java:128)
07-09 00:19:44.843: W/System.err(13167):    at com.example.andorid.apis.mifare.MainActivity.onNewIntent(MainActivity.java:275)
07-09 00:19:44.843: W/System.err(13167):    at android.app.Instrumentation.callActivityOnNewIntent(Instrumentation.java:1123)
07-09 00:19:44.843: W/System.err(13167):    at android.app.ActivityThread.deliverNewIntents(ActivityThread.java:2041)
07-09 00:19:44.843: W/System.err(13167):    at android.app.ActivityThread.performNewIntents(ActivityThread.java:2054)
07-09 00:19:44.843: W/System.err(13167):    at android.app.ActivityThread.handleNewIntent(ActivityThread.java:2063)
07-09 00:19:44.843: W/System.err(13167):    at android.app.ActivityThread.access$1400(ActivityThread.java:122)
07-09 00:19:44.843: W/System.err(13167):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1193)
07-09 00:19:44.851: W/System.err(13167):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 00:19:44.851: W/System.err(13167):    at android.os.Looper.loop(Looper.java:137)
07-09 00:19:44.851: W/System.err(13167):    at android.app.ActivityThread.main(ActivityThread.java:4340)
07-09 00:19:44.851: W/System.err(13167):    at java.lang.reflect.Method.invokeNative(Native Method)
07-09 00:19:44.851: W/System.err(13167):    at java.lang.reflect.Method.invoke(Method.java:511)
07-09 00:19:44.851: W/System.err(13167):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-09 00:19:44.851: W/System.err(13167):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-09 00:19:44.851: W/System.err(13167):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T07:22:16.693

您正在尝试写入块 0，这是不可能的。块 0 始终是只读的，即使访问条件表明它是可写的。块 0 包含 UID 和一些其他制造商数据。尝试写入块 1 或 2，看看您是否仍然有同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T00:53:40.180

在尝试从不再连接到阅读器的标签中读取时，我已经看到了这个特殊的异常。

我知道对于某些卡/读卡器组合，很难保持良好的连接。

例如，我的 Nexus S 无法与某些标签保持连接。Nexus S 没有最强的领域。我认为 Galaxy Note 在这方面是相似的。

尝试一些其他品牌的标签以及其他阅读器。

另外，我会尝试通过 for 循环运行您的读取，以查看它是否保持连接，如果这有意义的话。

# php - iOS Web 应用程序 - 如何确保我的应用程序登录是安全的

> ID：11387590
> 
> 赞同：0
> 
> 时间：2012-07-08T23:34:44.907
> 
> 标签：php, ios, security, web-applications, cookies

我正在为 iOS 设计一个 Web 应用程序 - 此应用程序将登录数据发送到远程服务器（通过 AJAX JSONP 请求）以验证用户登录。

所以我的本地应用程序将用户名和密码发送到远程服务器并返回真或假。

如何确保我的应用程序注册用户在本地应用程序和远程服务器上都已登录（或注销）？Cookie 无法同步工作（由于跨域策略）。

如果服务器返回并在服务器上的数据库中执行相同操作，我可以设置本地 cookie，`true`但是如何验证对服务器的请求来自本地应用程序，而没有有效的 cookie 在远程服务器上引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T23:46:42.670

查看会话。

[http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

# xslt-2.0 - 在输出中添加根节点

> ID：11387594
> 
> 赞同：0
> 
> 时间：2012-07-08T23:36:25.853
> 
> 标签：xslt-2.0

我的输出看起来像

```
<TransactionLog TID="1400" SeqNo="3337446" SQLTransaction="Insert into TankerLoads Values(141221,53,299,18,1,426148,6,'Nov 19 2007 12:00AM','Dec 30 1899 12:59PM',3.00,20682,0,'Zevo','Nov 19 2007 12:00AM',0)" /> 
```

我需要在其中添加`<root>`节点，使其如下所示

```
<root>
  <TransactionLog TID="1400" SeqNo="3337446" SQLTransaction="Insert into TankerLoads Values(141221,53,299,18,1,426148,6,'Nov 19 2007 12:00AM','Dec 30 1899 12:59PM',3.00,20682,0,'Zevo','Nov 19 2007 12:00AM',0)" />
</root> 
```

我使用下面的代码组合了所有记录，现在我需要添加根节点，我需要使用 OUTPUT METHOD AS TEXT 来显示它。请帮我。

```
<xsl:template match="text()">
  <xsl:value-of select="normalize-space(.)" />
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:01:16.780

**您可以在变量中捕获转换的输出，并将类似于以下的转换应用于变量的内容**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="vResult1">
   <TransactionLog TID="1400"
     SeqNo="3337446"
     SQLTransaction="Insert into TankerLoads Values(141221,53,299,18,1,426148,6,'Nov 19 2007 12:00AM','Dec 30 1899 12:59PM',3.00,20682,0,'Zevo','Nov 19 2007 12:00AM',0)" />
</xsl:variable>

 <xsl:template match="node()|@*" mode="pass2">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*" mode="pass2"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <root>
   <xsl:apply-templates select="$vResult1/*" mode="pass2"/>
  </root>
 </xsl:template>
</xsl:stylesheet> 
```

**当对任何 XML 文档（未使用）执行此转换时，会产生所需的正确结果**：

```
<root>
   <TransactionLog TID="1400" SeqNo="3337446"
                   SQLTransaction="Insert into TankerLoads Values(141221,53,299,18,1,426148,6,'Nov 19 2007 12:00AM','Dec 30 1899 12:59PM',3.00,20682,0,'Zevo','Nov 19 2007 12:00AM',0)"/>
</root> 
```

**或者，更好的是，将您现有的转换修改为如下所示：**

```
 <xsl:template match="/">
  <root>
   <xsl:apply-templates/>
  </root>
 </xsl:template> 
```

**或者，如果您的转换已经有模板匹配`/`：**

```
 <xsl:template match="/">
  <root>
   <!-- Put the body of your current template here -->
  </root>
 </xsl:template>
</xsl:stylesheet> 
```

# ruby-on-rails - 如何仅在使用 rspec 更新时测试模型对象的有效性？

> ID：11387602
> 
> 赞同：1
> 
> 时间：2012-07-08T23:38:51.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing, rspec, rspec2

我有一个像这样的个人资料模型；

```
class Profile < ActiveRecord::Base
  attr_accessible :first_name, :last_name
  belongs_to :user
  validates :user, presence: true
  validates :first_name, presence: true, on: :update
  validates :last_name, presence: true, on: :update
end 
```

我想编写一些 rspec 测试来测试 first_name 和 last_name 的验证，但我看不到如何`profile.should_not be_valid`在模型测试中仅在更新时运行。就像是;

```
it "should be invalid without a first name on update" do
  profile = FactoryGirl.build :profile
  profile.first_name = nil
  profile_should_not be_valid
end 
```

不区分更新或创建操作，我在 rspec 文档中看不到任何关于此的内容。当然，测试是一件相当普遍的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T23:50:30.617

`be_valid`在 rspec 中只是调用`valid?`模型。

```
profile = FactoryGirl.build :profile 
```

这将为 构建一个新模型实例`Profile`，但不会将其提交到数据库。您将使用它`profile`来进行创建测试。设置`:first_name`为`nil`应该和调用`profile.should be_valid`应该通过。

```
profile = FactoryGirl.create :profile 
```

这将构建模型实例**并将其插入**`Profile`数据库。您将使用它`profile`来进行更新测试。设置`:first_name`为`nil`should 和调用`profile.should be_valid`应该**失败**。

# android - 如何传递 ArrayList 活动之间

> ID：11387603
> 
> 赞同：2
> 
> 时间：2012-07-08T23:39:04.977
> 
> 标签：android, arraylist

我有一个`ArrayList<Bitmap>`使用该方法填充的，`getBitmapFromAsset()`并希望使用 Bundle 通过意图传递它。但是它允许我传递其他 ArrayLists，例如`ArrayList<String>`使用：

```
Intent intent = new Intent(myClass.this, Rclass.class);  
Bundle bundle = new Bundle();    
bundle.putStringArrayList("names", (ArrayList<String>) names);  
intent.putExtras(bundle);
startActivity(intent); 
```

但我不知道如何传递 Bitmap 类型的 ArrayList，因为我在 Bundle 中看不到该选项。关于如何执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T23:56:47.887

将位图本身从一个活动传递到另一个活动是非常低效的内存。如果你的位图是小尺寸的图标可能没问题，但如果它们是大位图，你可能会遇到内存不足的异常。

您是否考虑过对此进行一点重构，例如，使用具有位图 ID（或资产名称）的 HashMap 的单例到位图本身的 WeakReference。这个单例，我们称之为 BitmapHelper，如果它尚未加载或已被垃圾收集器释放，它将自动从资产重新加载位图。

在您拥有此 BitmapHelper 之后，只需将字符串数组中的位图 ID/资产名称传递给另一个活动即可。在其他活动中，您可以从 BitmapHelper 访问位图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T23:52:04.167

[Bitmap](http://developer.android.com/reference/android/graphics/Bitmap.html)默认实现[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)。

使用[Bundle.putParcelableArrayList(String key, ArrayList<? extends Parcelable> value)](http://developer.android.com/reference/android/os/Bundle.html#putParcelableArrayList%28java.lang.String,%20java.util.ArrayList%3C?%20extends%20android.os.Parcelable%3E%29)：

```
ArrayList<Bitmap> bitmaps = new ArrayList<Bitmap>();
bitmaps.add(bitmap);
bundle.putParcelableArrayList("names", bitmaps); 
```

# android - ADT 20 图形布局编辑器

> ID：11387606
> 
> 赞同：1
> 
> 时间：2012-07-08T23:39:16.703
> 
> 标签：android, adt

我最近将我的 ADT 更新到了 20.something 版本。从那以后，图形布局编辑器在使用 API 级别 3 时表现得很奇怪。

它只显示某种标签，而不是显示按钮。

见：http: [//imgur.com/a/Bbkwt](http://imgur.com/a/Bbkwt)

如果我将项目构建目标更改为 API 级别 7，一切正常。但是我们计划为我们的项目使用尽可能低的 API 级别，所以这并不是解决问题的真正有效方法。

当然，我已经阅读了大多数涉及类似问题的旧主题，但找不到任何合适的信息。

提前感谢您提供的任何帮助。

最好的问候，科幻

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:57:17.433

WYSIWYG 编辑器最近才可用。

我不会太担心布局编辑器中的显示方式，因为它仍然有很多错误。

如果它在您的模拟器和设备上运行良好，那么最合理的解释是布局编辑器错误。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:54:14.677

当有未完成的 API 修订要下载时，我遇到了这个问题，例如，我安装了 Android 2.2 API rev 2，但 rev 3 可用。下载更新似乎可以解决问题。

我注意到，当更改布局编辑器以显示 2.0 或 2.3.1 的渲染时，它仍然被破坏，但这些平台已经过时，所以这并不奇怪。我怀疑有些地方发生了变化，需要更新才能在布局视图中提供兼容性。

# kendo-ui - 如何在 KendoUI 中同时使用 rowTemplate 和 detailTemplate？

> ID：11387607
> 
> 赞同：6
> 
> 时间：2012-07-08T23:40:17.570
> 
> 标签：kendo-ui

我在使用带有详细信息网格的行模板时遇到问题。

基本上，当我组合使用它们时，渲染就会混乱。

请参阅此小提琴[http://jsfiddle.net/yzKqV/](http://jsfiddle.net/yzKqV/)以重现此错误（取消注释已注释掉的行并再次运行以查看错误）。

我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T02:11:12.410

我认为使用 detailTemplate 时 rowTemplate 不起作用的原因是它需要像层次网格一样定义 tr 和 first td 。( [http://jsfiddle.net/yzKqV/3/](http://jsfiddle.net/yzKqV/3/) )

```
<script id="rowTemplate" type="text/x-kendo-tmpl">
    <tr class="k-master-row"> 
        <td class="k-hierarchy-cell"><a href="\#" class="k-icon k-plus"></a></td>
        <td> #= FirstName # </td>
        <td> #= LastName # </td> 
    </tr>
</script> 
```

# java - 使用反射加载类并在运行时编辑变量

> ID：11387608
> 
> 赞同：0
> 
> 时间：2012-07-08T23:40:27.103
> 
> 标签：java, class, variables, reflection, runtime

> **可能重复：**
> [使用反射加载一个类，然后在运行时编辑变量](https://stackoverflow.com/questions/11387482/load-a-class-using-reflection-then-edit-the-variables-during-runtime)

好的，所以我有一个正在加载另一个类的 java 文件，我希望 java 文件能够从正在运行的类中编辑和读取变量。

例如：我有一个按钮，按下它会设置一个变量（这是类文件）。我希望正在加载此类的 java 文件能够看到变量的新值读取它、设置它并执行任何需要的操作。我希望设置显示在正在运行的 java 类上的新值。

这是我迄今为止尝试过的，但是当我尝试编辑诸如获取 baseX 之类的值时，它不会显示在正在运行的类中。此外，当我在正在运行的类上做一些事情时，baseX 值应该会改变，但是当我改变它们时这些东西不会打印到屏幕上。就好像反射无法在运行时读取东西一样。那么有什么作用呢？

```
 Class c = Class.forName("Client");
        for (Method m : c.getMethods()) {
            if (m.getName().contentEquals("main")) {
                Object[] passedArgs = { args };
                m.invoke(null, passedArgs);
            }

        }
        Object instance = c.newInstance();

        Field baseX = c.getField("baseX");
        Field loggedIn = c.getField("loggedIn");

        boolean gotValues = false;
        while(!gotValues) {
            boolean loggedin = loggedIn.getBoolean(instance);
            if(loggedin) {
                System.out.println(baseX.get(instance));
            } else {
                System.out.println(loggedin);
                loggedIn.setBoolean(instance, true);
            }
        } 
```

另外，如果 getter/setter 方法在运行时工作，它们也可以工作，我可以这样做，以便当按下按钮 x 时，屏幕上的变量 y 会发生变化。什么是 Java Bean？另外，如果我只想调用一个方法而不获取值怎么办？或者如果我想添加自己的方法/代码怎么办？

# performance - 消除重复执行同一程序的运行时间变化

> ID：11387611
> 
> 赞同：0
> 
> 时间：2012-07-08T23:40:29.163
> 
> 标签：performance, virtual-machine

我正在尝试设计一个在线编程竞赛评委，我需要确保的一件事是，当编译相同的代码时（假设要求），给定相同的输入，它应该花费完全相同的时间要执行的程序，每次完成。

目前，我正在使用一个简单的python脚本，它有2个线程，其中一个调用一个阻塞系统调用，开始执行测试代码，另一个跟踪时间并在时间后向子进程发送终止信号限制到期。顺便说一句，出于安全和方便的原因，我在虚拟机中执行此操作（设置适当的 chroot 太复杂，而且风险更大）。

但是，给定相同的条件（即，当我恢复快照时），我仍然会在任一侧大约 50 毫秒的范围内得到执行时间的变化。由于这阻止了设置严格的时间限制，是否有办法消除这种变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:06:18.320

我不是那个领域的专家，但我认为你做不到。即使您在虚拟机内部恢复快照，“外部”机器的状态也会大不相同。您有两个操作系统正在运行，每个操作系统都有多个进程，它们可能会在某个时候争夺资源。如果它是一个有互联网连接的网站或 PC，您可能会受到不同数量的连接（或请求）的影响，这将使进程开始运行并消耗请求等......如果某些应用程序试图访问硬盘，物理磁盘的初始位置对于寻道时间等很重要......

如果您想要一个“确定性”限制，您可能想检查您是否可以计算某个进程执行了多少条指令，或者类似的东西。

反正我参与过好几个编程内容，据我所知，他们不关心50毫秒的差异……如果你做一个合适的算法，你可以以很大的差距进入时间。因此，我建议您接受它，并将其包含在规则中。

# scala - 使用 lift-json 序列化没有字符串作为键的映射

> ID：11387612
> 
> 赞同：5
> 
> 时间：2012-07-08T23:40:38.420
> 
> 标签：scala, serialization, map, lift-json

似乎 lift-json 仅限于以字符串为键的地图。

绕过此限制的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T06:25:55.477

定义自己的`Serializer[Map[Any, Any]]`.

```
import net.liftweb.json._
import ext._

object MapSerializer extends Serializer[Map[Any, Any]] {
  def serialize(implicit format: Formats): PartialFunction[Any, JValue] = {
    case m: Map[_, _] => JObject(m.map({
      case (k, v) => JField(
        k match {
          case ks: String => ks
          case ks: Symbol => ks.name
          case ks: Any => ks.toString
        },
        Extraction.decompose(v)
      )
    }).toList)
  }

  def deserialize(implicit format: Formats): PartialFunction[(TypeInfo, JValue), Map[Any, Any]] = {
    sys.error("Not interested.")
  }
} 
```

然后将其添加到隐式`Formats`变量中。

```
implicit val formats = DefaultFormats + MapSerializer 
```

就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T21:45:35.190

除了前面的答案，您还可以定义：

def 反序列化（隐式格式：格式）：PartialFunction[(TypeInfo, JValue), Map[Any, Any]] = { Map() }

这不会破坏任何其他工作地图反序列化。

# javascript - 如何让 Chrome 扩展程序在页面加载时自动单击按钮？

> ID：11387615
> 
> 赞同：3
> 
> 时间：2012-07-08T23:41:25.423
> 
> 标签：javascript, button, google-chrome-extension, content-script

我正在尝试创建一个在页面加载时按下按钮的 Google Chrome 扩展程序。通过使用以下代码，我已经能够使用 VBscript for Internet Explorer 触发按钮：

```
IE.Navigate("javascript:changeIframe();") 
```

但是，现在我需要通过扩展在 Google Chrome 中进行操作。但是，按钮没有 id：

```
<input type="button" value="Start!" onclick="javascript:changeIframe();"> 
```

这是我迄今为止尝试过的，但似乎没有任何效果：

```
window.onload="javascript:changeIframe()";
javascript:changeIframe();
document.getElementById('').click();
document.getElementById('').submit(); 
```

似乎`.click`并`.submit`没有在 Google-Chrome 的 javascript 中定义？

奇怪的是，当我使用这个脚本时：

```
javascript:changeIframe(); 
```

在 Chrome 的 javascript 控制台中，它会自动按下按钮，一切正常。但是，当我将相同的脚本放在我的 .js 文件中时，它不起作用。

我只需要知道我必须在我的 .js 中放入什么，以便在页面加载时自动按下按钮。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T00:36:09.167

执行此操作的传统方法是*注入*代码¹：

```
var scriptNode          = document.createElement ('script');
scriptNode.textContent  = 'changeIframe ();';

document.body.appendChild (scriptNode); 
```

您通常都不必听`onload`，因为默认情况下内容脚本会在那个时候大致触发。

¹扩展JS在一个“孤立的世界”中运行，如果没有一些这里不需要的技巧，就无法与页面的javascript交互。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T09:36:36.260

很高兴您找到了解决方案，但我想我会向您展示另一种模拟点击的方式。
通过这种方式，您不必注入代码或知道 onclick 将运行的功能，只需获取按钮并模拟点击......

```
// https://developer.mozilla.org/en/DOM/element.dispatchEvent
function simulateClick(obj) {
  var evt = document.createEvent("MouseEvents");
  evt.initMouseEvent("click", true, true, window,
    0, 0, 0, 0, 0, false, false, false, false, 0, null);
  var canceled = !obj.dispatchEvent(evt);      
/*

  if(canceled) {
    // A handler called preventDefault
    alert("canceled");
  } else {
    // None of the handlers called preventDefault
    alert("not canceled");
  }
  */
}

var what = document.querySelector('input[type="button"][value="Start!"]');
simulateClick(what); 
```

# sql - 复制长表单条目表设计注意事项

> ID：11387616
> 
> 赞同：3
> 
> 时间：2012-07-08T23:41:31.753
> 
> 标签：sql, sql-server, database-design

我目前正在将基于纸张的系统转换为新的门户网站。当公司（医疗机构）招募新患者时，患者当前填写的特定表格。此表格包含 28 个问题，每个问题有多达 20 个不同的是/否选项。

我的问题是，我应该创建一个包含许多列的表（可能多达 300 个，主要包含 BIT 字段）还是应该以某种方式对其进行规范化？

所有字段都与单个实体相关联；一个病人在这里的原因。

根据我的数据库设计经验，通常不赞成包含 100 多列的大表，但我想看看社区对这个示例的看法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:08:35.560

当使用许多布尔 ( `BIT`) 字段时，有时最好使用`INT`一个按位求和的字段。这简化了存储和表定义，但使代码更加复杂。假设您有一个表格患者和一些具有不同含义的数值：正在服用药物、对扑热息痛过敏、是否患有糖尿病等。当您插入勾选的字段时，您只需将相应的数值相加。执行 select 语句时，您将进行位与比较：`TotalValue & Value = Value`. 这是一段代码：

```
CREATE TABLE #Patients(Id INT, PatientName VARCHAR(50), MiscIssues INT)

DECLARE @IsOnMedication TINYINT = 2
DECLARE @IsParacetamolAllergic TINYINT = 4
DECLARE @IsDiabetic TINYINT = 8

INSERT INTO #Patients
VALUES
    (1, 'A', @IsDiabetic + @IsOnMedication)
    , (2, 'B', @IsDiabetic + @IsOnMedication + @IsParacetamolAllergic)

SELECT * FROM #Patients WHERE MiscIssues & @IsDiabetic = @IsDiabetic

DROP TABLE #Patients 
```

另一种选择是使用自定义字段，但根据我的经验，当您拥有大量记录时，这种方法的效果很差。

# asp.net - 如何在三元运算符中使用 ASP.NET Eval() 函数？

> ID：11387618
> 
> 赞同：2
> 
> 时间：2012-07-08T23:41:56.877
> 
> 标签：asp.net, eval, ternary-operator

我希望评估我的数据集中的两个字符串，以使用三元运算符识别类描述。运行此代码时，我继续收到编译器错误，指出“预期表达式”。我认为它与字符串的比较有关，但我尝试了其他比较运算符，但似乎无法让它工作。

```
<ItemTemplate>
<tr>
   <td><%# FormatDateTime(Eval("GameDate"), DateFormat.ShortDate)%></td>
   <td class="<%# (Eval("Team1Score").ToString() > Eval("Team2Score").ToString()) ? 'Winner':'' %>"><%# Eval("Team1")%></td>
   <td><%# Eval("Team1Score")%></td>
   <td><%# Eval("Team2")%></td>
   <td><%# Eval("Team2Score")%></td>
</tr>
</ItemTemplate> 
```

这是我的示例数据：

```
 GameDate      Team1 Team1Score     Team2    Team2Score      Winner
    2012-04-14    Blues 5              Reds     3               Blues
    2012-04-13    A's   4              B's      2               A's
    2012-04-11    Blues 1              A's      1               Tie
    2012-04-13    B's   3              Reds     2               B's
    2012-04-10    Blues 7              B's      4               Blues 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T23:51:43.137

我认为问题在于您正在尝试在两个字符串之间进行比较。只需将值转换为 int 或类似的东西进行比较。因此，例如，将您的比较更改为如下所示：

```
<td class="<%# (Convert.ToInt32(Eval("Team1Score")) > Convert.ToInt32(Eval("Team2Score"))) ? 'Winner':'' %>"><%# Eval("Team1")%></td> 
```

或者您可以将其转换为适当的类型：

```
<td class="<%# ((int)Eval("Team1Score") > (int)Eval("Team2Score")) ? 'Winner':'' %>"><%# Eval("Team1")%></td> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-07T06:05:46.283

尝试这个

```
<%#Eval("Status").ToString()=="1" ? "ClubMember" : "Free User" %> 
```

# css - 如何使用调整大小栏处理调整大小事件？

> ID：11387621
> 
> 赞同：2
> 
> 时间：2012-07-08T23:42:59.747
> 
> 标签：css, jquery-ui, jquery-plugins, jquery

我为我的问题及其在[**jsFiddle**](http://jsfiddle.net/jxTUw/)上创建了一个简单的示例。基本上我想要两件事：

1.  调整窗口大小时，重新排列图表的大小以适合其容器；

2.  当调整大小栏移动时，重新排列图表的大小以适合其容器

注意：我正在使用[jQuery UI 布局插件](http://layout.jquery-dev.net/)进行布局管理，但我不知道如何使用移动的调整大小栏来处理调整大小事件。

我已经为此工作了很长时间，并且仍在寻找有关此的答案。感谢任何提供意见或建议的人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T23:59:06.097

OK 因此，要在 JQuery UI Layout 中触发 resize 事件，您可以为整个布局触发一个事件，也可以为每一块布局触发一个事件。

使用您的 jsFiddle 示例...调整视图大小的西布局可以像这样触发：

```
myLayout = $('body').layout({
// ...
west__onresize: function () {
    alert('only when west layout is redrawn') }, 
```

整个布局可以这样触发：

```
myLayout = $('body').layout({
// ...
onresize: function () {
    alert('whenever anything on layout is redrawn.') }, 
```

每当任何视图调整大小时，这些都会被命中。这也包括窗口调整大小事件。

# css - Chrome 改变内联样式

> ID：11387624
> 
> 赞同：0
> 
> 时间：2012-07-08T23:43:32.223
> 
> 标签：css, google-chrome, inline

我的一个客户向我展示了一个无法正确显示的页面，我不知道为什么。相关页面的 URL 是[http://www.honeysucklehillfarm.com/fun-farm](http://www.honeysucklehillfarm.com/fun-farm)，如果您在 Firefox（和 IE，令人惊讶的是）中查看该页面，它工作正常，但在 Chrome 中，三组旋转图像很多更小，挤在一起。据我所知，Chrome 正在将 DIV“views_slideshow_cycle_teaser_section_food_on_the_farm_shows-block”的内联样式（我假设由 jQuery rorator 设置）更改为 45px x 46px，而不是其他地方显示的 180x185。

有谁知道是什么原因造成的？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:27:00.993

在[http://www.honeysucklehillfarm.com/sites/all/themes/hshf/styles/style.css?m6v7zv](http://www.honeysucklehillfarm.com/sites/all/themes/hshf/styles/style.css?m6v7zv)的第 383 行中，您有代码：此宽度无效，`width:11.375;`应为或值。`px``em``%`

正如[j08691](https://stackoverflow.com/users/616443/j08691)所说，您应该考虑修复出现的错误和警告，但如果没有长时间调查，这些类型的错误可能是您的问题。

为什么有这么多嵌套`<div>`的呢？这似乎是一个过多的数量，这是在尖叫发生错误..！

# html - 使用 CSS 显示不同大小的 div

> ID：11387625
> 
> 赞同：1
> 
> 时间：2012-07-08T23:43:36.463
> 
> 标签：html, css

我如何显示具有不同高度的 div 以彼此靠近，而不管其高度如何，并且具有特定的边距，就像建筑物一样
我的意思是类似于本网站[http://via.me](http://via.me)
中的 div 我使用了 flaot:left 但它浮动只有最后一个 div 并留下一个空格这是我使用的代码[http://jsfiddle.net/D9rHB/6/](http://jsfiddle.net/D9rHB/6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T23:48:53.957

我认为 jQuery [Masonry](http://masonry.desandro.com/)插件将是您在这种情况下要寻找的：

> Masonry 是一个 jQuery 的动态网格布局插件。将其视为 CSS 浮动的另一面。浮动将元素水平排列然后垂直排列，而砌体垂直排列元素，将每个元素定位在网格中的下一个开放点。结果使不同高度的元素之间的垂直间隙最小化，就像石匠在墙上安装石头一样。

[JS 小提琴演示](http://jsfiddle.net/D9rHB/7/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T07:02:25.110

你可以这样做。为此，您必须拥有“绝对”的地位。

然后手动计算高度和顶部值以将 div 放置在您想要的任何位置。

为了使事情变得容易，所有 div 的宽度都相同。还要在每个中制作 div 的高度

列固定。

如果您需要更多说明如何执行此操作，请告诉我。

# php - 与array_pop()相反的函数是什么？

> ID：11387629
> 
> 赞同：11
> 
> 时间：2012-07-08T23:43:59.023
> 
> 标签：php

`array_pop()`返回数组的最后一个值并从数组中删除该值。

与 相反的函数是什么`array_pop()`，即返回并删除数组的第一个值？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-06T22:56:13.210

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-08T23:43:59.430

从php手册： -

> [array_shift()](http://www.php.net/manual/en/function.array-shift.php)将数组的第一个值移开并返回，将数组缩短一个元素并将所有内容向下移动。所有数字数组键都将被修改为从零开始计数，而文字键不会被触摸。

我知道这是一个微不足道的问题，但我在 Google 上搜索了 array_pop() 的对面，但没有弹出任何内容，所以我想我会在这里分享这个问题，它可能会为很多人节省大约 4 秒的时间:)

# php - Codeigniter 以一种形式验证文件上传和文本输入

> ID：11387631
> 
> 赞同：1
> 
> 时间：2012-07-08T23:44:14.687
> 
> 标签：php, forms, validation, codeigniter, file-upload

我有一个带有文本输入和文件输入的表单。使用 Codeigniter 的验证库验证两种输入类型的正确方法是什么？我找到了一些解决方案，但它们不能正常工作或看起来有点矫枉过正（创建新库或修改 CI 系统文件）。

在我看来，我正在使用 1 个多部分表单并同时显示文本验证错误和上传错误。

到目前为止，这是我的控制器中的内容...

```
function create() //create new post
{           
    $this->form_validation->set_rules('content', 'Entry', 'trim|required|xss_clean');
    $this->form_validation->set_rules('category_id', 'Category', 'trim|required|xss_clean|integer'); 

    //Text input fields
    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('new_post');
    }       
    else
    {
            $config['upload_path'] = './uploads/posts/';
            $config['allowed_types'] = 'jpg|png';               
            $config['max_size'] = '800'; //in KB

            $this->load->library('upload', $config);

            //File Upload
            if (! $this->upload->do_upload())
            {
                $upload_error['upload_error'] = array('error' => $this->upload->display_errors()); 

                $this->load->view('my_view', $upload_error);

                return FALSE;
            }

             //Add to database 
             $data = array (
               'user_id' => $this->tank_auth->get_user_id(),
               'category_id' => $this->input->post('category_id'),
               'content' => $this->input->post('content')
             );

             $this->Posts_model->create_post($data);

             $this->session->set_flashdata('success', 'Post_added!');
             redirect('posts');
    }       

} 
```

我一直`You did not select a file to upload.`在我的视野中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:41:46.587

您的文件输入的名称是什么？do_upload() 默认情况下期望它是“用户文件”，但是如果你有类似的东西，`<input type="file" name="image"...`你需要调用`$this->upload->do_upload('image')`

您还需要确保表单设置为多部分 - [http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T23:55:56.810

您正确使用了 CodeIgniter 的帮助程序，这可能更多地是 PHP 问题，而不是 CodeIgniter 问题。

看起来您的文件对于您的 PHP 配置来说可能太大了？PHP 似乎没有将文件传递给您。创建一个`php_info()`文件，看看是什么`UPLOAD_MAX_FILESIZE`设置？

此外，请确保您在`application/config/mimes.php`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:37:20.383

默认 codeigneter 上传类是 $this->upload->do_upload('field_name = userfile') ，所以你可以设置你制作的字段文件的名称，或者如果你想更改 name 字段，你可以使用 file 的默认 codeigneter name 字段对于您表单中的文件类型，请检查 codeigneter 如何为该类进行设置，实际上是简单的类且易于使用..，因为该类需要文件的参数名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-21T08:36:08.883

**使用 codeigniter 进行文件上传的表单字段验证**

**控制器：Upload.php**

注意：在基础级别创建文件夹**上传上传文件夹存储文件..**

```
<?php

class Upload extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->load->helper(array('form', 'url'));
    }

    function index()
    {
        //$this->load->view('upload_form', array('error' => ' ' ));
        $this->load->library('form_validation');
        $this->form_validation->set_rules('title', 'Title', 'trim|required|xss_clean');

        //Text input fields
        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('upload_form');
        }
        else
        {
            $config['upload_path'] = './uploads/';
            $config['allowed_types'] = 'gif|jpg|png';
            $config['max_size'] = '1024';
            $config['max_width']  = '1024';
            $config['max_height']  = '768';

            $this->load->library('upload', $config);

            if ( ! $this->upload->do_upload())
            {
                $error = array('error' => $this->upload->display_errors());

                $this->load->view('upload_form', $error);
            }
            else
            {
                $data = array('upload_data' => $this->upload->data());

                $this->load->view('upload_success', $data);
            }
        }

    }
}
?> 
```

**表格：（上传.form.php）**

```
<html>
<head>
<title>Upload Form</title>
</head>
<body>

<?php echo validation_errors(); ?>

<?php echo form_open_multipart();?>
Title: <input type="text" name="title" size="30" /><br/>
<input type="file" name="userfile" size="20" />

<br /><br />

<input type="submit" value="upload" />

</form>

</body>
</html>

**upload_success.php**

<html>
<head>
<title>Upload Form</title>
</head>
<body>

<?php echo validation_errors(); ?>

<?php echo form_open_multipart();?>
Title: <input type="text" name="title" size="30" /><br/>
<input type="file" name="userfile" size="20" />

<br /><br />

<input type="submit" value="upload" />

</form>

</body>
</html> 
```

# rdf - 如何更改一组三元组中的数据类型（或某些值）？

> ID：11387633
> 
> 赞同：5
> 
> 时间：2012-07-08T23:44:19.677
> 
> 标签：rdf, sparql

假设您认识的某个人不小心将一些三元组插入到数据类型为 xsd:datetime 而不是正确的 xsd:dateTime 的 RDF 数据库中。纠正这个问题的最简单方法是什么？

我知道我可以做这样的事情来找到坏数据：

```
select * where {
  ?s ?p ?o.
  filter (datatype(?o)=xsd:datetime)
} 
```

我可以获取这些结果，在文本编辑器中修复它们，删除坏的并插入好的......但我必须相信/希望有一种更简单的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T01:29:01.403

使用 SPARQL 1.1，您可以使用 SPARQL 更新命令执行此操作，如下所示：

```
DELETE { ?s ?p ?o }
INSERT { ?s ?p ?o2 }
WHERE
{
  ?s ?p ?o .
  FILTER(datatype(?o) = xsd:datetime)
  BIND(STRDT(STR(?o), xsd:dateTime) AS ?o2)
} 
```

更新命令适用于特定的图，因此您可能需要多次发出此`WITH <graph>`命令，为您需要更正的每个命名图添加 a 到命令的开头。

# java - Java GWT如何在应用自定义celltable / datagrid css样式时编写文件路径

> ID：11387648
> 
> 赞同：0
> 
> 时间：2012-07-08T23:49:11.623
> 
> 标签：java, gwt, datagrid, classpath, filepath

我正在使用 java GWT 2.4 编写 Web 应用程序。

我想将自定义 css 样式附加到 DataGrid，但我在编写 css 文件路径时遇到问题。以下是我的代码：

```
 interface DataGridResources extends DataGrid.Resources
 {
  @Source(value = { DataGrid.Style.DEFAULT_CSS,
  "filepath/myDataGridStyle.css" })  // I should put the correct css file path here. 
  DataGrid.Style dataGridStyle();
 } 
```

myDataGridStyle.css 文件与我的接口类不在同一个文件中。基本上文件分布如下：

我的网络项目

->源

---> com.test.java 文件

------> test1.java

------> test2.java

->war（同级src文件）

---> 网络信息

---> myDataGrid.css（这是我的css文件所在的位置。它就在war文件下。所有css样式都在这个文件中。）

myDataGrid.css 位于我的项目文件根目录下的 WAR 文件下。所以我的问题是如何将源文件路径重定向到正确的位置。

我的 css 文件放在与 src 文件相同级别的 WAR 文件中。比如我的接口文件放在myproject/src/com/test/javafiles。我的 myDataGridStyle.css 放在 myproject/war/myDataGridStyle.css 中。我该如何为此编写文件路径？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:07:52.017

将 *.css 文件放入 war 文件夹是不可能的。*.css 文件必须驻留在 java 包中（我更喜欢将它与接口放在同一个包中，这样可以相对引用该文件）。css 文件将被编译到您的 GWT 应用程序中。这就是为什么在战争中没有必要让您的 css 文件可用的原因。另一个原因是 css 资源可以在 css 代码中使用由编译器替换的特殊结构。但无法在详细信息中使用[这些](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)。

所以它应该是这样的：

```
 interface DataGridResources extends DataGrid.Resources
 {
  @Source(value = { DataGrid.Style.DEFAULT_CSS,
  "myDataGridStyle.css" })  // I should put the correct css file path here. 
  DataGrid.Style dataGridStyle();
 } 
```

和：

->源

---> com.test.java 文件

------> test1.java

------> test2.java

------> myDataGrid.css

# javascript - Javascript正则表达式替换多个字符串？

> ID：11387649
> 
> 赞同：0
> 
> 时间：2012-07-08T23:49:30.593
> 
> 标签：javascript, replace

我有一个这样的字符串：“http://something.org/dom/My_happy_dog_%28is%29cool！”

如何删除所有初始域、多个下划线和百分比内容？

现在我只是在做一些多次替换，比如

```
str = str.replace("http://something.org/dom/","");
str = str.replace("_%28"," "); 
```

继续，但这真的很难看..有什么帮助吗？

谢谢！

编辑：

确切的输入是“我的快乐狗很酷！” 所以我想摆脱初始地址并删除下划线和百分比并将空格放在正确的位置！

问题是尝试在 Chrome 上放置正则表达式“出了点问题”。是 Chrome 的问题还是我的正则表达式的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:52:26.660

您可以使用`unescape`来解码百分比：

```
str = unescape("http://something.org/dom/My_happy_dog_%28is%29cool!")
str = str.replace("http://something.org/dom/",""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:57:35.770

也许您可以使用正则表达式来提取您需要的内容，而不是摆脱您不想要的内容。你想保留什么？

您还可以将它们链接在一起，如下所示：

```
str.replace("http://something.org/dom/", "").replace("something else", ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T00:01:00.103

我建议：

```
var str =  "http://something.org/dom/My_happy_dog_%28is%29cool!";
str.substring(str.lastIndexOf('/')+1).replace(/(_)|(%\d{2,})/g,' '); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uCHa6/)。

我采用这种方法的原因是 RegEx 相当昂贵，并且通常很难微调到边缘情况变得不那么麻烦的程度。所以我选择使用简单的字符串操作来减少 RegEx 的工作。

实际上，上面创建了给定`str`变量的子字符串，从索引点`lastIndexOf('/')`（它完全符合您的预期）并添加`1`到该点，因此子字符串来自它之前的点*之后*的点`/`。

正则表达式：`(_)`匹配下划线，`|`仅用作`or`运算符，`(%\d{2,})`用于匹配连续出现两次并跟随`%`符号的数字字符。

围绕 regex 的每个部分的括号`|`用于标识匹配组，这些组用于标识哪些部分应该被`' '`传递给的第二个参数中的（单空格）字符串替换`replace()`。

参考：

*   [`lastIndexOf()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/lastIndexOf).
*   [`replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace).
*   [`substring()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T00:00:34.830

您还没有非常准确地定义问题。为了摆脱所有以你结尾的字符，`%<digit><digit>` 你会说

```
var re = /.*%\d\d/g;
var str = str.replace(re, ""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T00:02:49.967

好的，如果你想替换所有这些东西，我认为你需要这样的东西：

```
/(http:\/\/.*\.[a-z]{3}\/.*\/)|(\%[a-z0-9][a-z0-9])|_/g 
```

[测试](http://www.rubular.com/r/XIyuQceKxq)

```
var string = "http://something.org/dom/My_happy_dog_%28is%29cool!";
string = string.replace(/(http:\/\/.*\.[a-z]{3}\/.*\/)|(\%[a-z0-9][a-z0-9])|_/g,""); 
```

# objective-c - 创建多个 UILocalNotifications

> ID：11387650
> 
> 赞同：2
> 
> 时间：2012-07-08T23:50:02.407
> 
> 标签：objective-c, ios, xcode

每次输入某个方法时，我都想创建一个新的 UILocalNotification 。我认为这必须通过从数组或沿着这条线的东西读取来完成，但我无法弄清楚。如何在不硬编码以下内容的情况下动态地做这样的事情：

```
-(void) createNotification
 {
 UILocalNotification *notification1;
 } 
```

现在我希望能够在每次输入 createNotification 时创建通知 2、通知 3 等。出于特定原因，我可以取消相应的通知，而无需全部取消。

以下是我尝试过的，也许我很遥远……也许不是。无论哪种方式，如果有人可以提供一些输入，将不胜感激。谢谢！

```
-(void) AddNewNotification
{

UILocalNotification *newNotification = [[UILocalNotification alloc] init];
//[notificationArray addObject:newNotification withKey:@"notificationN"];
notificationArray= [[NSMutableArray alloc] init];

[notificationArray addObject:[[NSMutableDictionary alloc]
                   initWithObjectsAndKeys:newNotification,@"theNotification",nil]];

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:00:46.327

您快到了：使用数组当然是正确的做法！唯一的问题是每次执行`AddNewNotification`方法时都会不断创建数组的新实例。您应该创建`notificationArray`一个实例变量，并将其初始化代码移动`notificationArray= [[NSMutableArray alloc] init];`到声明的类的指定初始化程序中`notificationArray`。

如果您希望每次通知您插入一个单独的密钥以便以后找到它，请使用`NSMutableDictionary`而不是`NSMutableArray`. 重写`AddNewNotification`方法如下：

```
-(void) addNewNotificationWithKey:(NSString*)key {
    UILocalNotification *newNotification = [[UILocalNotification alloc] init];
    [notificationDict setObject:[[NSMutableDictionary alloc]
               initWithObjectsAndKeys:newNotification,@"theNotification",nil]
        forKey:key];

} 
```

当您调用该`addNewNotificationWithKey:`方法时，您可以为新添加的通知提供密钥，例如

```
[self addNewNotificationWithKey:@"notification1"];
[self addNewNotificationWithKey:@"notification2"]; 
```

等等。

# html - 禁用新的 Chrome 日期类型输入格式和占位符

> ID：11387655
> 
> 赞同：3
> 
> 时间：2012-07-08T23:50:30.733
> 
> 标签：html, google-chrome

最新版本的 Chrome 终于支持原生的日期类型输入，这很好，**但**它强制自己的日期格式和占位符文本，这不太适合我的布局。如何删除本地化的日期格式，使其显示为 ISO（它**当然**作为 ISO 发送，但只是在浏览器中不显示），以及如何删除本地化的占位符（日期类型不支持占位符属性请注意，所以它不能简单地被覆盖）？

**编辑：**我可以将占位符设置为背景颜色，但有什么不那么老套的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T00:40:17.533

[这个问题](https://stackoverflow.com/questions/14946091/are-there-any-style-options-for-the-html5-date-picker)涵盖了如何在 chrome 中设置（伪）元素的样式，据我所知，您可以详细了解最新版本的 chrome（截至写作时为 v27）您拥有的所有控件。

日期格式（例如 dd/mm/yyyy）始终设置为浏览器区域设置。

如果您想要更多控制，唯一的其他选择是使其 type='text' 并添加 JavaScript 日期选择器。一些 polyfill 允许您使用 JS 解决方案覆盖浏览器样式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-21T16:18:55.400

我添加了一种 input[type="date"] {-webkit-text-fill-color:#??????;} where ?????? 与输入的背景颜色相同。例如，如果输入的背景颜色是#ffffff，则添加 -webkit-text-fill-color:#ffffff 规则“隐藏”文本，因为它与背景颜色匹配。

# java - 缺少返回语句错误

> ID：11387661
> 
> 赞同：0
> 
> 时间：2012-07-08T23:51:35.807
> 
> 标签：java, return

我已经编写了一个代码，每当我尝试对其进行测试时，我都会收到一条错误消息：

```
"StreetAddress.java:62: missing return statement 

 }" 
```

这是代码：

```
public class StreetAddress
  {
     private String myStreet;
     private String myCity;
     private String myState;
     private String myZip;

 public StreetAddress( String street, String city, String state, String zip )
 {
  myStreet = street;
  myCity = city;
  myState = state;
  myZip = zip;
 }

 public void setStreet( String street )
{
 myStreet = street;
}

 public String getStreet()
{
 return myStreet;
}

 public void setCity( String city )
{
 myCity = city;
}

 public String getCity()
{
 return myCity;
}

 public void setState( String state )
{
 myState = state;
}

 public String getState()
{
 return myState;
}

 public void setZIP( String zip )
{
 myZip = zip;
}

 public String getZIP()
{
 return myZip;
}

public String mailingLabel()
{
 System.out.println( getStreet() );
 System.out.println( getCity() + ", " + getState() + " " + getZIP() );
}
}
} 
```

我不知道哪里缺少 } 我检查了我的代码好几次。请帮忙！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T23:54:32.557

这个功能：

```
public String mailingLabel()
{
 System.out.println( getStreet() );
 System.out.println( getCity() + ", " + getState() + " " + getZIP() );
} 
```

被声明为返回一个字符串，但缺少一个返回语句。要么让它无效，要么返回一些东西——不管是什么意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T22:10:54.987

```
public String mailingLabel()
{
 System.out.println( getStreet() );
 System.out.println( getCity() + ", " + getState() + " " + getZIP() );
} 
```

在上述方法中，您应该根据方法的签名返回一个字符串，但您没有返回字符串。

2个选项：

A. 保持方法签名相同，返回字符串：

```
public String mailingLabel()
{
 return getStreet() + getCity() + ", " + getState() + " " + getZIP();
} 
```

或者

B. 更改方法签名：

```
public void mailingLabel()
{
 System.out.println( getStreet() );
 System.out.println( getCity() + ", " + getState() + " " + getZIP() );
} 
```

# php - 从复杂的html页面获取内容？

> ID：11387664
> 
> 赞同：0
> 
> 时间：2012-07-08T23:52:09.623
> 
> 标签：php, html, simple-html-dom

我一直在尝试遍历这个 html 网页，以获取位于下面嵌套很深的代码部分中的企业名称。所有的 id 都是唯一的。我试过使用 simple_html_dom 但遇到了麻烦。我对 PHP 还很陌生，但同样是一个狂热的学习者，所以在正确的方向上我希望我能破解这个问题。

我尝试使用的网页是[http://yellow.co.nz/yellow+pages/funeral+home/New+Zealand?page=1&stageName=Composite+search&activeSort=name-asc&suppressMobileListings=false](http://yellow.co.nz/yellow+pages/funeral+home/New+Zealand?page=1&stageName=Composite%20search&activeSort=name-asc&suppressMobileListings=false)

```
<div class="result standard">
    <div class="resultBody"> 
        <div class="listingMain">
            <div class="vcard">
                <a class="fn openPreview">
                    <span>Biz Name</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:03:11.807

您可以尝试[Goutte](https://github.com/fabpot/Goutte)并执行类似的操作

```
use Goutte\Client;

$client = new Client();
$crawler = $client->request('GET', 'http://yellow.co.nz/yellow+pages/funeral+home/New+Zealand?page=1&stageName=Composite+search&activeSort=name-asc&suppressMobileListings=false');

$businessNames = array();
$crawler->filter('vcard > fn > span')->each(function($node, $i){
  $businessNames[] = $node->text();   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:58:26.970

当我过去遇到类似问题时（通过任意层次结构挖掘到我的目标节点），我发现 XPath 是最有用的解决方案：

[PHP DOM Xpath 文档](http://us3.php.net/manual/en/class.domxpath.php)

它允许您使用非常简单的 XPath 查询来立即定位感兴趣的节点。

# hex - 每个可执行文件都必须有一个 ELF 头？

> ID：11387672
> 
> 赞同：0
> 
> 时间：2012-07-08T23:53:07.097
> 
> 标签：hex, elf

每个可执行文件都必须有一个 ELF 头？

另外我想知道为什么库和标头的属性通常与 HEX 值相关联；这个十六进制与什么有关？为什么是 HEX 而不仅仅是二进制代码或其他东西。

我指的是使用的 HEX 值，`ldd`例如`readelf`，在 linux 下经常使用的 2 个实用程序。

这个问题是针对通用操作系统的，不是针对特定操作系统的，架构应该是 X86 或 ARM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:17:56.893

> 每个可执行文件都必须有一个 ELF 头

是的，每个 ELF 文件都以 ELF 文件头开头。如果不是，则根据定义，它不是有效的 ELF 文件。

> 为什么 HEX 而不仅仅是二进制代码或其他东西

您似乎对HEX 的含义感到*非常困惑。*任何整数都可以写成许多不同的表示形式。十进制 (base-10)、八进制 (base-8)、十六进制 (base-16) 是最常见的，但 base-20[并非闻所未闻](http://en.wikipedia.org/wiki/Vigesimal)。它只是一个数字，无论您选择如何表示它。

# emacs - 以批处理模式从字节编译文件中捕获错误

> ID：11387679
> 
> 赞同：1
> 
> 时间：2012-07-08T23:54:57.893
> 
> 标签：emacs, elisp, bytecode

我正在尝试编写一个makefile片段来将文件编译`.el`为`.elc`文件。我有以下片段：

```
.el.elc:
        $(EMACS) -q -Q --batch \
                       --eval "(progn
                                 (setq load-path (cons \"$(abs_srcdir)\" load-path)) 
                                 (setq load-path (cons nil load-path))
                                 (defun byte-compile-dest-file (f) \"$@\")
                                 (condition-case nil
                                   (byte-compile-file \"$<\")
                                   (error (kill-emacs 1))))" 
```

（我已经格式化了演示文稿的片段，`make`可能不喜欢这样布局。）

`$(abs_srcdir)`定义正确，但我有两个问题：

首先：目录布局如下：

```
+- foo.el <- foo.el lives in $(abs_srcdir)
+- _build/
++- bar.el
++- Makefile 
```

（也就是说，一个 VPATH 构建`foo.el`在 srcdir 中，我正在尝试构建`_build`。）

如果`bar.el`依赖于`foo.el`(via`(require 'foo)`和`(provide 'foo)`)，则尝试编译`bar.elc`失败并出现以下错误：

```
In toplevel form:
../bar.el:1:1:Error: Cannot open load file: foo 
```

这让我觉得很奇怪，因为我以为我在`$(abs_srcdir)`欺骗`load-path`。发生了什么事？

第二个问题是，即使发生这种情况，`emacs`也会以状态 0 退出，尽管我努力将`(byte-compile-file)`调用包装在`(condition-case)`. 这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:52:06.170

我遇到的第一个问题是，使用 VPATH 构建时，找不到构建目录中的文件（`(require)`例如，通过调用 ）。出于某种原因，consing on`nil`不起作用`load-path`，但 consing`$(abs_srcdir)`有效。

第二个问题是我无法捕捉到`(byte-compile)`. 这已由[wvxvw](https://stackoverflow.com/users/797257/wvxvw)解决：`(byte-compile)`不会引发错误，但`t`如果编译成功则返回。因此，类似：

```
(unless (byte-compile-file "$<") (kill-emacs 1)) 
```

效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:11:36.003

我清理了您提供的代码段，并在目录中做了一个测试用例`~/test`。我最终得到以下三个文件。

生成文件：

```
abs_srcdir=~/test

all: foo.elc bar.elc

clean:
        rm -rf *.elc

%.elc: %.el
    emacs -Q --batch --eval "(progn (add-to-list 'load-path \"$(abs_srcdir)\") (defun byte-compile-dest-file (f) \"$@\") (condition-case nil (byte-compile-file\"$<\") (error (kill-emacs 1))))" 
```

foo.el：

```
(defun foo-fun ()
  (message "foo"))

(provide 'foo) 
```

bar.el: (需要'foo)

```
(defun bar-fun ()
  (foo-fun))

(provide 'bar) 
```

这个例子对我有用，只有当我给 abs_srcdir 的定义错误时才会失败。

# php - 解析错误：语法错误，您的代码 PHP 中出现意外的 T_CONSTANT_ENCAPSED_STRING

> ID：11387689
> 
> 赞同：0
> 
> 时间：2012-07-08T23:57:29.900
> 
> 标签：php

```
$sSql = "INSERT INTO comments
     ( post_id,name, email, website,content)
     VALUES (".$_POST[postid]",'".$_POST[name]"', '".$_POST[email]"', '"$_POST[website]"',  '"$_POST[content]"')"; 
```

我收到以下错误。任何人都可以帮助解决这个问题吗？解析错误：语法错误，代码中出现意外的 T_CONSTANT_ENCAPSED_STRING

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:01:27.127

您的字符串未正确连接，您`.`在某些 $_POST[] 之前和之后丢失了一些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:57:58.260

请使用这个。你忘记了引语和宠爱。

```
$sSql = "INSERT INTO comments ( post_id,name, email, website,content) VALUES (".$_POST['postid'].",'".$_POST['name']."', '".$_POST['email']."', '".$_POST['website']."',  '".$_POST['content']."')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T00:00:41.007

错误在`string concatenation`丢失`.`和数组丢失`qoutes`

```
$sSql = "INSERT INTO comments
 ( post_id,name, email, website,content)
 VALUES (".$_POST['postid'].",'".$_POST['name']."', '".$_POST['email']."', '".$_POST['website']."',  '".$_POST['content']."')"; 
```

用于`mysql_escape_string`避免[sql 注入](http://php.net/manual/en/security.database.sql-injection.php)和避免 sql 注入的[最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T00:00:53.300

你需要用两个句点换行。`.$_POST[postid].`

此外，请确保您对`$_POST`参数进行转义，因为它可能会受到 SQL 注入的影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T00:01:09.013

$_POST 应该用作关联数组。所以键应该用引号引起来：$_POST['key']

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T00:01:51.053

这是因为您忘记了一些点 - 您的查询中开始出现意外字符串。

```
$sSql = "INSERT INTO comments
     ( post_id,name, email, website,content)
     VALUES (".$_POST['postid'].",'".$_POST['name']."', '".$_POST['email']."', '".$_POST['website']."',  '".$_POST['content']."')"; 
```

请先转义用户输入，然后再将其放入数据库。并注意数组键：它无需将它们设置为 '' 即可工作，因为 php 将它们视为常量，找不到此名称的已定义常量，并假定这必须是一个字符串。不必要。

# javascript - 特定网址的 Javascript 样式

> ID：11387698
> 
> 赞同：2
> 
> 时间：2012-07-08T23:59:12.613
> 
> 标签：javascript, url, styles

这是我的网站：[http](http://dkurf.esxsb.servertrust.com/) ://dkurf.esxsb.servertrust.com/ 我需要为此页面创建特定样式：[http](http://dkurf.esxsb.servertrust.com/ProductDetails.asp?ProductCode=dfhs) ://dkurf.esxsb.servertrust.com/ProductDetails.asp?ProductCode=dfhs 我没有可以访问该页面的 html，因此我需要覆盖整个站点仅针对该页面的样式。

这是托管我的电子商务商店的公司提供的一些 javascript（Volusion，ps 永远不要使用它们，它们是 CSS 的噩梦！）

```
<script type="text/javascript"> 
//<![CDATA[ 
if (location.pathname == "/ProductDetails.asp" || 
    location.pathname.indexOf("-p/") != -1 || 
    location.pathname.indexOf("_p/") != -1) 
    document
        .writeln("\n<style type='text/css'>.pricecolor{ background:#000; }</style>\n\n"); 
//]]> 
</script> 
```

但是，如果有人有任何建议，那将是非常有帮助的！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:46:39.460

未经测试，但应该可以工作。如果没有`<head>`标签，理论上应该会失败。

```
var appendStyle= function(css){

    var code = document.createTextNode(css);
    var style = document.createElement('style');
    style.type='text/css';
    style.media='all';
    style.appendChild(code);
    document.getElementsByTagName('head')[0].appendChild(style);

};

(function(){
    var _ol = typeof(window.onload)==='function' ? window.onload : function(){};    
    window.onload = function(){ 
        _ol.apply(this,arguments);  
        if(window.location.href.indexOf('ProductDetails.asp?ProductCode=dfhs')!==-1) { try{
            appendStyle("\
                .pricecolor{ background:#000; }\
                body{ background:#f0f }\
            ");
            alert('new style appended successfully');
        }catch(e){ alert('error appending style: '+e) }};
    }; 

}()); 
```

# ios - iPhone：如何在任务运行时将刷新 UIBarButtonItem 更改为 UIActivityIndi cator？

> ID：11387699
> 
> 赞同：0
> 
> 时间：2012-07-08T23:59:14.613
> 
> 标签：ios, xcode, refresh

我有一个刷新按钮，它执行一个函数来发起请求并接收响应。在解析响应时，我正在更改我上次更新的文本，以让用户了解正在发生的事情。我希望在“程序”运行时让刷新按钮成为 uiactivityindicator。我怎样才能做到这一点？这是我的故事板的屏幕截图，可帮助您了解设置。让我知道我是否可以提供其他任何东西。谢谢！

![故事板图像](../Images/19062c13e9ff053de6f87986cab8af83.png)

下图显示了我如何通过右侧的模拟指标下拉列表创建底栏。

![底部工具栏](../Images/87ff523493926944407b271dcdaa274b.png)

编辑：

这是我从标记答案中使用的更改代码。

```
// Create UIActivityIndicator UIBarButtonItem
UIActivityIndicatorView *activityView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
[activityView startAnimating];
UIBarButtonItem *loadingView = [[UIBarButtonItem alloc] initWithCustomView:activityView];

// Toolbar with LoadingView and LastUpdatedTitle with Flex Spacing
[self.navigationController.toolbar setItems:(NSArray *)[NSArray arrayWithObjects: loadingView, self.flexSpaceOne, self.lastUpdated, self.flexSpaceTwo, nil]]; 
```

当我想将它改回来时，我只需使用相同的`setItems:arrayWithObjets:`方法“重置”我的项目。除了那个时候我会用 self.refreshButton 改变加载视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:26:44.913

定义一些 ivars 以访问您的工具栏及其项目：

```
NSMutableArray *toolbarItems;
IBOutlet UIToolbar *toolbar; 
```

然后，在你开始任务的方法中，

```
UIActivityIndicatorView *activityView = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0, 0, 25, 25)];
UIBarButtonItem *loadingView = [[UIBarButtonItem alloc] initWithCustomView:activityView];
[toolbarItems replaceObjectAtIndex:0 withObject:loadingView];
toolbar.items = toolbarItems; 
```

然后在完成后执行相反的操作以再次添加刷新按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:30:15.340

这是使用块并启动另一个线程的好时机。

```
- (IBAction)refresh:(id)sender
{
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [spinner startAnimating];
    self.navigationItem.rightBarButtonItem = [[BarButtonItem alloc] initWithCustomView:spinner]; 
    dispatch_queue_t request = dispatch_queue_create("request data", NULL);
        dispatch_async(request, ^{
            // call the method to request data
            dispatch_async(dispatch_get_main_queue(), ^{
                self.navigationItem.rightBarButtonItem = sender;
                // populate the table with the data
        });
    });
    dispatch_release(request);
} 
```

你会注意到（当然）我没有把微调器放在你想要的地方。那是因为我对如何访问工具栏项目没有信心——但希望这会让你走上正确的轨道。

# python - 如何更改 shell 脚本的工作目录（这里是新手）

> ID：11387702
> 
> 赞同：0
> 
> 时间：2012-07-09T00:00:10.557
> 
> 标签：python, linux, shell

我有一个在相对目录中查找文件的 python 脚本。例如：python 脚本在`/home/username/projectname/`. 我有一个在`/home/username/projectname/subfolder`.

如果我从 shell 运行脚本，因为`python scriptname.py`它运行得很好。

但是，我正在尝试将脚本作为启动服务运行。我在 webmin 中设置它，我相信它使用终端命令来调用它。在启动命令中，我正在做这样的事情来调用脚本：

`execute python home/username/projectname/scriptname.py`. 该脚本启动正常，但我收到错误，因为它无法访问相对目录中的文件。

我猜有一种更好的方法可以从启动命令中调用 python 程序，以便它知道相对路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:12:30.373

```
import os

os.chdir("/tmp") 
```

也有：

```
os.getcwd() 
```

也许您需要以下内容？

```
import os.path

dir = os.path.dirname(__file__) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T00:19:48.433

`__file__`是用于运行脚本的路径。

将其复制到脚本文件中并尝试运行它：

```
import os

print "This script was run as: %r" % __file__
print "This script is: %r" % os.path.abspath(__file__)

script_dir = os.path.dirname(os.path.abspath(__file__))
print "This script is in directory: %r" % script_dir

print "When started, the current directory was: %r" % os.getcwd()

os.chdir(script_dir)
print "After calling os.chdir(), the current directory is: %r" % os.getcwd() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T00:06:12.360

启动 python 脚本（可能是 forkink）的进程有一个 pwd（它的工作目录）。这个想法是在fork和执行python之前更改进程的pwd。

您需要查看执行 shell 命令的进程的手册，并了解如何设置 pwd。（在 shell 中您使用 cd 或 pushd）

# php - 为什么该方法不返回属性值？

> ID：11387718
> 
> 赞同：0
> 
> 时间：2012-07-09T00:01:37.123
> 
> 标签：php, oop

这是一个简单的类，其方法应返回已分配给属性“问题”的字符串。为什么它不从方法输出中打印返回的属性值？

我没有收到任何错误消息，我得到的只是“这里是：”但该属性的值丢失了:(

```
class DisplayQuestion {
    public $question;

    function __construct ($question){
        $this->question = $question;
    }   

    function output(){
        echo "<p>Here is: $this->question</p>";         
    }
}   
$test = new DisplayQuestion("What's your question?");
$test->output(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:09:31.513

我在我的机器上完美地运行了该代码，这意味着还有另一个问题（不是代码）。检查您的 PHP 日志以及 HTTP 服务器的错误和访问日志，并（在您的开发服务器上）在您的 ini 文件中启用 display_errors 并查看发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:44:14.170

试试这个：

```
class DisplayQuestion {
    public $question = "bug test";

    function __construct ($question){
        $this->question = $question;
    }   

    function output(){
        echo "<p>Here is: $this->question</p>";         
    }
}   
$test = new DisplayQuestion("What's your question?");
$test->output(); 
```

如果您得到“Here is: bug test”，那么您的开发服务器上的 PHP 版本小于 5。在 PHP 4 中，__construct 不被识别为构造函数，因此您必须将其替换为以下内容：

```
class DisplayQuestion {
    var $question;

    function DisplayQuestion ($question){
        $this->question = $question;
    }   

    function output(){
        echo "<p>Here is: $this->question</p>";         
    }
}   
$test = new DisplayQuestion("What's your question?");
$test->output(); 
```

尝试通过在您的服务器上运行 phpinfo() 来确定您拥有的 PHP 版本。

# php - Yii CMenu 活动项目未设置

> ID：11387721
> 
> 赞同：0
> 
> 时间：2012-07-09T00:02:29.920
> 
> 标签：php, yii

我正在使用 Yii 的 CMenu 通过以下方式生成菜单：

```
$this->widget('zii.widgets.CMenu', array(
        'items'=>$this->mainMenu,
        'lastItemCssClass'=>'mitem-last',
        'activeCssClass'=>'mitem-active',
        'activateParents'=>true
)); 
```

我在页面上显示此菜单，`index.php?r=site/home`并期望以下菜单项具有`mitem-active`类：

```
[2] => Array
(
    [label] => test
    [url] => /index.php?r=site/home
) 
```

但是该项目呈现为

```
<li><a href="/index.php?r=site/home">test</a></li> 
```

如果我没记错的话`index.php?r=site/home`有路由`site/home`（这也是 的输出`$this->route`），事实上链接是使用创建的

```
$link['url']=$this->createUrl(current($mitem['url']),$params); 
```

其中`current($mitem['url'])`输出`site/home`和`$params`只是`array()`。

我错过了什么吗？

**编辑：** `$this->mainMenu`是一个由多个 s 组成的数组，`$link`内置在一个循环中（来自 xml）。

```
$this->mainMenu = array();
foreach($xml->mitem as $mitem){
    $link=array();

    ... compute some values like $link['label'], $params etc ...
    $link['url']=$this->createUrl(current($mitem['url']),$params);
    $this->mainMenu[]=$link;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:46:43.700

对于 CMenu，“items”数组格式为：

```
array(
    array('label'=>'Home', 'url'=>array('site/index')),
    array('label'=>'About', 'url'=>array('/site/page', 'view'=>'about')),
    array('label'=>'Contact', 'url'=>array('/site/contact')),
) 
```

不是

```
array(
    array('label'=>'Home', 'url'=>'index.php?r=site/index'),
    array('label'=>'About', 'url'=>'index.php?r=site/page&page=about'),
    array('label'=>'Contact', 'url'=>'index.php?r=site/contact'),
) 
```

如果您的商品如下所示：

```
array('label'=>'Home', 'url'=>'index.php?r=site/home'), 
```

这没用。您的商品必须是这样的：

```
array('label'=>'Home', 'url'=>array('site/home')), 
```

# apache - mod_rewrite 有多个查询字符串？

> ID：11387722
> 
> 赞同：3
> 
> 时间：2012-07-09T00:02:32.033
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试清理我博客上的一些 URL，所以我决定研究 mod_rewrite。我不知道我在做什么，所以我希望能得到一些帮助：PI 有链接，如`http://kn3rdmeister.com/blog/post.php?y=2012&m=07&d=04&id=4`. 尽管它有效，而且人们仍然可以获得我希望他们拥有的内容，但我不喜欢他们必须查看所有查询字符串。我想把上面的链接变成`http://kn3rdmeister.com/blog/2012/07/04/4.php`.

这就是我的 .htaccess 现在的样子。

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^y=([0-9){4})&m=([0-9]{2})&d=([0-9]{2})&id=([0-9]*)$
RewriteRule ^/blog/post\.php$ http://kn3rdmeister.com/blog/%1/%2/%3/%4.php? [L] 
```

就像我说的，我完全一无所知：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:41:38.437

如果您使用的是 apache 2.0 或更高版本，如果这些规则位于 .htaccess 文件中，您将需要删除前导斜杠（前缀），以便您的正则表达式如下所示：

```
# also note this needs to be a "]"--v
RewriteCond %{QUERY_STRING} ^y=([0-9]{4})&m=([0-9]{2})&d=([0-9]{2})&id=([0-9]*)$
RewriteRule ^blog/post\.php$ http://kn3rdmeister.com/blog/%1/%2/%3/%4.php? [L] 
```

这将使得当有人`http://kn3rdmeister.com/blog/post.php?y=2012&m=07&d=04&id=4`输入他们浏览器的 URL 地址栏时，他们的浏览器将被重定向到`http://kn3rdmeister.com/blog/2012/07/04/4.php`并且新的 URL 将出现在他们的地址栏中。

我假设你已经在你的服务器上设置了一些东西来处理像`blog/2012/07/04/4.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:32:33.647

首先你应该定义你的 URLs!!!

像：

`/blog`节目`front page`

`/blog/1234`节目`post 1234`

`/blog/date/2012`节目`posts by year`

`/blog/date/2012/06`节目`posts by year and month`

`/blog/date/2012/06/01`节目`posts by year and month and day`

等等...

第一个选项是将您定义的每个 URL 重写为 index.php。您的 index.php 只需处理提交的 GET 参数。

```
### Do only if rewrite is installed
<IfModule mod_rewrite.c>

### Start rewrite and set basedir
RewriteEngine on
RewriteBase /

### Rewrite only if no file link or dir exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

### Rewrite frontpage
RewriteRule ^blog$ /index.php?action=showfront [L,QSA]

### Rewrite post
RewriteRule ^blog/([0-9]+)$ /index.php?action=showpost_by_id&id=$1 [L,QSA]

### Rewrite posts by date
RewriteRule ^blog/date/([0-9]{4})$ /index.php?action=showposts_by_date&year=$1 [L,QSA]
RewriteRule ^blog/date/([0-9]{4})/([0-9]{2})$ /index.php?action=showposts_by_date&year=$1&month=$2 [L,QSA]
RewriteRule ^blog/date/([0-9]{4})/([0-9]{2})/([0-9]{2})$ /index.php?action=showposts_by_date&year=$1&month=$2&day=$3 [L,QSA]

### Rewrite posts by tag
RewriteRule ^blog/tag/([a-zA-Z0-9_-]+)$ /index.php?action=showposts_by_tag&tag=$1 [L,QSA]

</IfModule> 
```

在 index.php 中测试： print_r($_GET); print_r($_POST);

第二种选择是重写所有 URL，您的 index.php 需要处理所有可能的 URL。因此，首先它需要一个类似于路由器的东西，它将传入的 URL 分成几部分，然后发送请求的页面或错误页面。我一开始会尝试这个血腥的学校。

```
<IfModule mod_rewrite.c>

RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^ index.php%{REQUEST_URI} [L]

</IfModule> 
```

在 index.php 中测试：

```
print_r(explode('/', ltrim($_SERVER['PATH_INFO'], '/')));
print_r($_GET);
print_r($_POST); 
```

第三种选择是使用 PHP 框架。框架可以帮助您快速编写代码。它为您提供了许多基类，例如路由器。（例如 ZendFramework、Flow3、Kohana、Symfony、CodeIgniter、CakePHP、yii 等）。这会让你更先进。

第四个也是最懒惰的选择是使用现成的软件，如 Wordpress。

# c++ - 如何使用 QT、OpenGL、C++ 和 Linux 更改屏幕分辨率？

> ID：11387724
> 
> 赞同：7
> 
> 时间：2012-07-09T00:02:50.557
> 
> 标签：c++, linux, qt, opengl

我只想做一个全屏游戏。我知道如何在 Windows 上更改分辨率，但如何在 Linux 下更改分辨率？是否有针对此的跨平台 QT 解决方案？我的 GLWidget 周围也有边框。如何使小部件覆盖整个窗口？

我只是要发布代码：

```
#include <QtOpenGL>

class GLWidget : public QGLWidget
{
public:
    void initializeGL()
    {
        glClearColor(0.0f, 0.0f, 1.0f, 0.0f);
        glClearDepth(1.0f);
    }

    void paintGL()
    {
        glClear(GL_COLOR_BUFFER_BIT);
    }

    void resizeGL(int width, int height)
    {
        int side = qMin(width, height);
        glViewport((width - side) / 2, (height - side) / 2, side, side);
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(-0.5f, +0.5f, -0.5f, +0.5f, 4.0f, 15.0f);
        glMatrixMode(GL_MODELVIEW);
    }
};

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QDesktopWidget *desktop = app.desktop();
    QWidget window;
    GLWidget *glWidget = new GLWidget;
    QHBoxLayout *mainLayout = new QHBoxLayout;
    mainLayout->addWidget(glWidget);
    window.setLayout(mainLayout);
    window.setWindowTitle("Hello GL");
    window.resize(QSize(640, 480));
    window.show();
    window.showFullScreen();
    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T07:24:40.900

您可以使用[xrrsetscreenconfigandrate](http://linux.die.net/man/3/xrrsetscreenconfigandrate)，如下[所述](http://www.opengl.org/wiki/Programming_OpenGL_in_Linux%3a_Changing_the_Screen_Resolution)：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<unistd.h>
#include<X11/Xlib.h>
#include<X11/extensions/Xrandr.h>

Display                 *dpy;
Window                  root;
int                     num_sizes;
XRRScreenSize           *xrrs;
XRRScreenConfiguration  *conf;
short                   possible_frequencies[64][64];
short                   original_rate;
Rotation                original_rotation;
SizeID                  original_size_id;

int main(int argc, char *argv[]){
 //
 //     CONNECT TO X-SERVER, GET ROOT WINDOW ID
 //
 dpy    = XOpenDisplay(NULL);
 root   = RootWindow(dpy, 0);
 //
 //     GET POSSIBLE SCREEN RESOLUTIONS
 //
 xrrs   = XRRSizes(dpy, 0, &num_sizes);
 //
 //     LOOP THROUGH ALL POSSIBLE RESOLUTIONS,
 //     GETTING THE SELECTABLE DISPLAY FREQUENCIES
 //
 for(int i = 0; i < num_sizes; i ++) {
        short   *rates;
        int     num_rates;

        printf("\n\t%2i : %4i x %4i   (%4imm x%4imm ) ", i, xrrs[i].width, xrrs[i].height, xrrs[i].mwidth, xrrs[i].mheight);

        rates = XRRRates(dpy, 0, i, &num_rates);

        for(int j = 0; j < num_rates; j ++) {
                possible_frequencies[i][j] = rates[j];
                printf("%4i ", rates[j]); } }

 printf("\n");
 //
 //     GET CURRENT RESOLUTION AND FREQUENCY
 //
 conf                   = XRRGetScreenInfo(dpy, root);
 original_rate          = XRRConfigCurrentRate(conf);
 original_size_id       = XRRConfigCurrentConfiguration(conf, &original_rotation);

 printf("\n\tCURRENT SIZE ID  : %i\n", original_size_id);
 printf("\tCURRENT ROTATION : %i \n", original_rotation);
 printf("\tCURRENT RATE     : %i Hz\n\n", original_rate);
 //
 //     CHANGE RESOLUTION
 //
 printf("\tCHANGED TO %i x %i PIXELS, %i Hz\n\n", xrrs[1].width, xrrs[1].height, possible_frequencies[1][0]);
 XRRSetScreenConfigAndRate(dpy, conf, root, 1, RR_Rotate_0, possible_frequencies[1][0], CurrentTime);
 //
 //     SLEEP A WHILE
 //
 usleep(6000000);
 //
 //     RESTORE ORIGINAL CONFIGURATION
 //
 printf("\tRESTORING %i x %i PIXELS, %i Hz\n\n", xrrs[original_size_id].width, xrrs[original_size_id].height, original_rate);
 XRRSetScreenConfigAndRate(dpy, conf, root, original_size_id, original_rotation, original_rate, CurrentTime);
 //
 //     EXIT
 //
 XCloseDisplay(dpy); }
//
//      gcc -o Xrandr Xrandr.cc -lX11 -lXrandr -lstdc++
// 
```

# c# - 在 EXE 安装后保持提升的权限并在重新启动期间自动启动？

> ID：11387728
> 
> 赞同：1
> 
> 时间：2012-07-09T00:04:25.360
> 
> 标签：c#, vb.net, vb6, uac, autostart

基本上，我有一个安装了权限的 exe 应用程序（例如，用户在 Vista/Win7 UAC 检查中按下“允许”按钮），然后应用程序启动并将自身设置为自动运行，以便应用程序将自动重新启动再次重新启动计算机后（所有操作都在提升时完成）。自动启动是由用户请求的，而不是对他们强制执行。

此重启指令在注册表中的 CURRENT_USER 部分中设置，如下所示：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run 
```

问题是，当计算机重新启动时，Windows 不会让它执行，除非用户再次将其重新授权为**提升***的*进程（即，任务栏中会弹出一个任务栏图标，说明我的 EXE/进程的启动被阻止，并且用户可以使用任务托盘中图标上的菜单启动被阻止的应用程序）。

 **我想补充一点，我已将清单文件集成到 EXE 中，因此这方面没有问题，并且它在 XML 文件中准确地注册了它的意图。

为什么 Windows 在设计上这样做？如果一个exe被授权一次，那不应该意味着它被永久授权吗？

但我想问的主要问题是，我该如何解决这个问题？想象一下，每次应用程序需要自动运行时，我的用户都必须这样做？

另外，我想避免整个“你的应用程序首先不应该在提升模式下运行”的争论/讨论，或者“没有应用程序需要提升的权限，你需要重写它”的讨论。我可以向您保证，我的应用程序需要提升权限（不幸的是）。如果有兴趣，请在下面提供更多详细信息，无需解释或理解本文中的问题，但包括在内，因为我知道有些人会问）...

*额外不必要的阅读：*

...事实上，它在 87% 的启动中需要它（取决于用户的操作），并且在 13% 的情况下不需要它（也就是说，所有启动实例的 13%，而不是 13% 的用户( 2013\. 我将进行所有这些工作以拆分逻辑上不属于应用程序不同区域的功能 - 即使完成了所有这些工作，我上面提到的问题也没有得到解决（而是稍微最小化或延期）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:54:58.277

我不确定为什么用*任何*编程语言标记它，而且由于它确实是一个 ServerFault 问题，据我所知它甚至不属于这里。

处理此问题的正常方法是通过任务计划程序，使用*“以最高权限运行”*选项。所涉及的过程有几个已发布的描述，例如[Make Vista 在启动时使用 Task Scheduler 启动 UAC 受限程序](http://www.techrepublic.com/blog/window-on-windows/make-vista-launch-uac-restricted-programs-at-startup-with-task-scheduler/616)的旧描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T00:32:11.347

> 为什么 Windows 在设计上这样做？如果一个exe被授权一次，那不应该意味着它被永久授权吗？

这是一个意见问题，但这是我的。如果我昨天需要 Visual Studio 运行提升，因为我希望它 regsvr32 一个 DLL，那并不能证明我希望它今天在某些不同的应用程序上运行提升。

> 但我想问的主要问题是，我该如何解决这个问题？

我会使用服务。编程很重要，但这就是我自动运行提升进程的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T00:28:27.393

要么要求用户关闭 UAC，要么正如您已经提到的，重新设计您的应用程序，以便它在需要提升的点提升，或者在系统帐户下运行服务并让它做需要提升的事情。**

# ruby - argf.skip 和 argf.close 有什么区别？

> ID：11387737
> 
> 赞同：0
> 
> 时间：2012-07-09T00:06:32.787
> 
> 标签：ruby

查看#skip 的源文件在移动到下一个文件之前关闭。这是#close 应该实现的行为。该文档建议在使用#skip 时文件应保持打开状态。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T00:23:26.710

不多。但是有一个区别：`skip`如果没有更多文件，则不执行任何操作，`close`raises `IOError`。

# sql - 使用 SQL JOIN 比较两个表

> ID：11387739
> 
> 赞同：2
> 
> 时间：2012-07-09T00:07:09.093
> 
> 标签：sql, join, group-by

这是`Table1`数据。

```
USER_ID     |    PRODUCT_ID    |   TIMESTAMPS
------------+------------------+-------------
1015826235       220003038067     *1004941621*
1015826235       300003861266      1005268799
1015826235       140002997245      1061569397
1015826235      *210002448035*     1005542471 
```

如果将 数据与`Table1`以下`Table2`数据进行比较，则`PRODUCT_ID`最后一行`Table1`数据`ITEM_ID`中的数据。`Table2``TIMESTAMPS``Table1``CREATED_TIME``Table2`

```
BUYER_ID     |    ITEM_ID         |   CREATED_TIME 
-------------+--------------------+------------------------
1015826235       220003038067       *2001-11-03 19:40:21*
1015826235       300003861266        2001-11-08 18:19:59
1015826235       140002997245        2003-08-22 09:23:17
1015826235      *200002448035*       2001-11-11 22:21:11 
```

因此，在将 Table1 与 Table2 连接之后，我需要在上面的示例中显示这样的结果 - 以下输出中的任何一个对我来说都很好。

```
BUYER_ID    |     ITEM_ID       |    CREATED_TIME         |    PRODUCT_ID     |       TIMESTAMPS
------------+-------------------+-------------------------+-------------------+-----------------
1015826235       220003038067       *2001-11-03 19:40:21*      220003038067       *1004941621*
1015826235      *200002448035*       2001-11-11 22:21:11      *210002448035*       1005542471 
```

**或者**

```
BUYER_ID   |     ITEM_ID       |    CREATED_TIME         |     USER_ID      |       PRODUCT_ID     |   TIMESTAMPS
-----------+-------------------+-------------------------+------------------+----------------------+------------------
1015826235       220003038067       *2001-11-03 19:40:21*      1015826235           220003038067       *1004941621*
1015826235      *200002448035*       2001-11-11 22:21:11       1015826235          *210002448035*       1005542471 
```

任何帮助将不胜感激。

**更新：-**

```
select * from (select * from (select user_id, prod_and_ts.product_id as 
product_id, prod_and_ts.timestamps as timestamps from testingtable2 LATERAL VIEW
explode(purchased_item) exploded_table as prod_and_ts) prod_and_ts LEFT OUTER 
JOIN table2 ON ( prod_and_ts.user_id = table2.buyer_id AND table2.item_id =
prod_and_ts.product_id AND prod_and_ts.timestamps = UNIX_TIMESTAMP
(table2.created_time) ) where table2.buyer_id IS NULL) set_a LEFT OUTER JOIN
table2 ON (set_a.user_id = table2.buyer_id AND  ( set_a.product_id = 
table2.item_id OR set_a.timestamps = UNIX_TIMESTAMP(table2.created_time) )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:04:53.027

我相信下面应该返回一个像你列出的第二个表一样的表。

```
SELECT T2.BUYER_ID, T2.ITEM_ID, '*'+T2.CREATED_TIME+'*' as CREATED_TIME, T1.USER_ID, T1.PRODUCT_ID, '*'+T1.TIMESTAMPS+'*' as TIMESTAMPS
FROM Table1 T1
    INNER JOIN Table2 T2 ON T1.USER_ID = T2.BUYER_ID
    AND T1.PRODUCT_ID = T2.ITEM_ID
    AND T1.TIMESTAMPS <> T2.CREATED_TIME
UNION
SELECT T2.BUYER_ID, '*'+T2.ITEM_ID+'*' as ITEM_ID, T2.CREATED_TIME, T1.USER_ID, '*'+T1.PRODUCT_ID+'*' as PRODUCT_ID, T1.TIMESTAMPS
FROM Table1 T1
    INNER JOIN Table2 T2 ON T1.USER_ID = T2.BUYER_ID
    AND T1.TIMESTAMPS = T2.CREATED_TIME
    AND T1.PRODUCT_ID <> T2.ITEM_ID 
```

第一条语句获取 BUYER_ID 和 USER_ID 匹配、PRODUCT_ID 和 ITEM_ID 匹配但 TIMESTAMPS 和 CREATED_TIME 不匹配的所有行。

第二个获取 BUYER_ID 和 USER_ID 匹配、TIMESTAMPS 和 CREATED_TIME 匹配但 PRODUCT_ID 和 ITEM_ID 不匹配的所有行。

当然，如果有人多次购买相同的产品，或者有人同时购买 2 种不同的产品，这可能会造成混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:32:41.373

在我看来，您想在 USER_ID = BUYER_ID、PRODUCT_ID = ITEM_ID、TIME1 = TIME2 上 LEFT JOIN 两个表。

某些行将匹配所有三个字段并在所有三列中产生非空值。您要举报的其他人。

然后，您希望以相反的顺序对表运行相同的查询。

因此，您将在第一个表中拥有所有不匹配的行，在第二个表中拥有不匹配的行。

```
SELECT * from table1 LEFT JOIN table2 ON ( user_id = buyer_id AND item_id = product_id AND ts1 = ts2)
       WHERE buyer_id IS NULL
UNION
select * from table1 RIGHT JOIN table2 ON ( user_id = buyer_id AND item_id = product_id AND ts1 = ts2)
       WHERE product_id IS NULL; 
```

我认为没有办法调和两者。通常，您甚至不确定两个查询中的行数是否相同。也许您可以在两个不匹配的集合之间运行第二个查询，注意共享 userid 和 productid 或 userid 和时间戳的行。但是您还应该跟踪共享的线路吗？

例如，获取不匹配集 1 并尝试根据产品 id 或时间戳将其与 table2 匹配（两者都无法匹配，或者第一个 JOIN 会匹配，并且buyer_id 不会为 NULL）

```
 SELECT * FROM
     ( SELECT table1.user_id, table1.product_id, table1.ts1 FROM table1 LEFT JOIN table2 
          ON ( user_id = buyer_id AND item_id = product_id AND ts1 = ts2) WHERE buyer_id IS NULL ) AS set_a
     LEFT JOIN table2
     ON ( set_a.user_id = table2.buyer_id AND 
        ( set_a.product_id = table2.item_id OR set_a.ts1 = table2.ts2 )); 
```

与 table1 反向运行的相同操作会以另一种方式获取部分匹配项。

如果行的数量始终相同并且由用户 ID 匹配，则上面的查询将给出预期的结果。除了我在示例中将 ts1 和 ts2 定义为两个时间戳之外；时间戳和日期/时间之间的所有比较都需要适当的转换函数，例如

```
 ts1 = ts2 
```

可能变成

```
 DATETIME(ts1) = ts2 
```

或者

```
 ts1 = UNIX_TIMESTAMP(ts2) 
```

等等，取决于 ts1 和 ts2 的实际定义和平台（例如，MySQL vs SQL Server vs PostgreSQL ...）。

# android - 在哪里/如何在 Android 片段中获取 Intent().getExtras()？

> ID：11387740
> 
> 赞同：107
> 
> 时间：2012-07-09T00:07:11.060
> 
> 标签：android, android-intent, android-fragments, android-activity

对于活动，我曾经这样做：

在活动 1 中：

```
Intent i = new Intent(getApplicationContext(), MyFragmentActivity.class);
                i.putExtra("name", items.get(arg2));
                i.putExtra("category", Category);
                startActivity(i); 
```

在活动 2 中：

```
Item = getIntent().getExtras().getString("name"); 
```

你如何使用 Fragments 做到这一点？我也在使用兼容性库 v4。

它在 FragmentActivity 中吗？还是实际的片段？它采用哪种方法？创建？创建视图？其他？

我可以看看示例代码吗？

编辑：值得注意的是，我试图将 Activity 1 保留为 Activity（或者实际上是 ListActivity，我在单击时传递了 listitem 的意图），然后传递给一组选项卡式片段（通过片段 Activity）和我需要任一选项卡才能获得附加功能。（我希望这是可能的吗？）

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-02-07T08:31:57.103

你仍然可以使用

```
String Item = getIntent().getExtras().getString("name"); 
```

在 中`fragment`，您只需`getActivity()`要先调用：

```
String Item = getActivity().getIntent().getExtras().getString("name"); 
```

这可以节省您编写一些代码的时间。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2012-07-09T00:42:47.697

我倾向于做的事情，而且我相信这也是 Google 打算让开发人员做的事情，仍然是从`Intent`in 中获取额外的`Activity`数据，然后通过使用参数实例化它们将任何额外的数据传递给片段。

实际上，在 Android 开发博客上有[一个示例](http://android-developers.blogspot.co.nz/2011/02/android-30-fragments-api.html)说明了这个概念，您也会在几个 API 演示中看到这一点。尽管此特定示例是针对 API 3.0+ 片段给出的，但在使用`FragmentActivity`和`Fragment`来自支持库时也适用相同的流程。

您首先像往常一样在活动中检索意图附加内容，并将它们作为参数传递给片段：

```
public static class DetailsActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // (omitted some other stuff)

        if (savedInstanceState == null) {
            // During initial setup, plug in the details fragment.
            DetailsFragment details = new DetailsFragment();
            details.setArguments(getIntent().getExtras());
            getSupportFragmentManager().beginTransaction().add(
                    android.R.id.content, details).commit();
        }
    }
} 
```

与其直接调用构造函数，不如使用静态方法为您将参数插入片段中可能更容易。[谷歌给出](http://android-developers.blogspot.co.nz/2011/02/android-30-fragments-api.html)`newInstance`的例子中经常调用这种方法。实际上有一个方法，所以我不确定为什么上面的代码片段中没有使用它......`newInstance``DetailsFragment`

无论如何，在创建片段时作为参数提供的所有额外内容都可以通过调用`getArguments()`. 由于这会返回 a `Bundle`，因此其用法类似于 an 中的 extras `Activity`。

```
public static class DetailsFragment extends Fragment {
    /**
     * Create a new instance of DetailsFragment, initialized to
     * show the text at 'index'.
     */
    public static DetailsFragment newInstance(int index) {
        DetailsFragment f = new DetailsFragment();

        // Supply index input as an argument.
        Bundle args = new Bundle();
        args.putInt("index", index);
        f.setArguments(args);

        return f;
    }

    public int getShownIndex() {
        return getArguments().getInt("index", 0);
    }

    // (other stuff omitted)

} 
```

# sql-server-ce - 使用 Entity Framework 4.3 迁移时手动删除 SQL Server Compact 4.0 文件时找不到文件错误

> ID：11387741
> 
> 赞同：0
> 
> 时间：2012-07-09T00:07:36.463
> 
> 标签：sql-server-ce, entity-framework-4.3, sql-server-ce-4

我正在测试我们的应用程序以使用 SQL Server Compact 4.0 数据库。应用程序使用数据库（如果存在）或使用实体框架 4.3 迁移构建它（如果不存在）。

但是，当我在程序空闲时删除文件然后执行将导致数据库读取的操作时，我会收到`File not found`错误消息。这几乎不是真实世界的场景，但我确实想了解发生了什么。

似乎在后台某处，框架正在跟踪这样一个事实，即已经检查过是否需要创建数据库。如果确实如此，我不确定我是否喜欢那样。

那么，为什么在第一次访问时创建了数据库，而在程序运行时却没有重新创建呢？（我知道这会有很多很好的理由，但我想知道实现的位置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:33:52.573

因为数据库创建是 EF 初始化的一部分 - 当第一次使用上下文检索或持久化数据时，每个上下文类型的初始化通常只发生一次。在应用程序运行时删除数据库不是 EF 用例，因此如果您想支持这种情况，您必须自己处理。您可以尝试在`dbContext.Database.Initialize(true);`没有真正需要的情况下使用不要运行此操作来重新初始化 EF，因为初始化是非常昂贵的操作并且您的应用程序中没有线程。初始化运行时可以访问数据库。

# python - Python：从列表中获取 URL 并访问它

> ID：11387742
> 
> 赞同：-4
> 
> 时间：2012-07-09T00:07:43.437
> 
> 标签：python, list, for-loop, twill

我正在尝试从列表（~1500 个条目）中获取一个 URL，并使用 python 的**斜纹**库一个一个地访问它们。我使用斜纹布的原因是因为我喜欢它，而且我以后可能需要执行基本的表单填写。

我遇到的问题是声明循环的内容。我确信这实际上很容易解决，但目前我还没有想到这个解决方案。

```
 from twill.commands import *
            CONTAINER = open('urls.txt') #opening file
            CONTAINER_CONTENTS = CONTAINER.readlines() #reading
            CONTAINER_CONTENTS = map(lambda s: s.strip, CONTAINER_CONTENTS) #this is just to remove the ^N (newline) that was appended to each URL

            for i in CONTAINER_CONTENTS:
                  <educate me>
                  ..
                  go(url)
                  etc. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:16:54.323

```
from twill.commands import *

with open('urls.txt') as inf:
    urls = (line.strip() for line in inf)
    for url in urls:
        go(url)
        # now do something with the page 
```

# c# - 使用 backgroundWorker 和异步下载更新表单进度条的建议

> ID：11387744
> 
> 赞同：2
> 
> 时间：2012-07-09T00:07:59.227
> 
> 标签：c#, asynchronous, progress-bar, backgroundworker

这是我进入异步/线程的第一步，所以提前道歉。我需要一些关于实施以下内容的最佳方法的建议......

我有一个包含进度条的非静态窗体。我还有一个静态方法“HttpSocket”来管理异步 http 下载。因此，我无法直接从静态方法访问表单进度条。

所以我想到了使用 backgroundWorker 来运行作业。但是，因为 DoWork 也在调用异步方法，所以一旦发出所有 http 请求，backgroundWorker 就会报告完成，但我想根据接收到 http 响应和解析数据的时间来更新进度条。

我想出的一种糟糕的解决方法如下

```
private void buttonStartDownload_Click(object sender, EventArgs e)
{
  backgroundWorker1.RunWorkerAsync();
} 
```

并在 backgroundWorker1_DoWork 中放置一个 while 循环来比较请求/响应

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    //Trigger Asynchronous method from LoginForm
    DataExtract LoginForm = new DataExtract();
    LoginForm.DELogin();

    //Without While Loop backgroundWorker1 completes on http requests and not responses

    // Attempt to Monitor Progress of async responses using while loop
   // HttpSocket method logs RequestCount & ResponseCount

    while (HttpSocket.UriWebResponseCount < HttpSocket.UriWebRequestCount)
    {

        if (HttpSocket.UriWebResponseCount % updateInterval == 0) 
        {
            int myIntValue = unchecked((int)HttpSocket.UriWebResponseCount / HttpSocket.UriTotal);
            backgroundWorker1.ReportProgress(myIntValue);
        }

    }

}

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    // Change the value of the ProgressBar to the BackgroundWorker progress.
    progressBar1.Value = e.ProgressPercentage;

} 
```

但是，我意识到这不是最好的方法，因为 While 循环会影响性能并减慢通常很快但没有显示进度的异步过程。我正在寻求有关完成此任务的正确、最有效方法的建议，或者提供替代方法来从单独的异步线程更新表单进度条，无论是否使用 C#4.0 的 BackgroundWorker？

谢谢

○

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:23:00.333

如果不完全了解您的请求/响应模型的架构，后台工作程序中的 while 循环看起来好像基本上是忙于等待。

您可以通过在 while 循环的顶部插入睡眠操作来减少检查进度状态的频率，我还建议在报告进度之前删除检查以查看响应计数是否为整数值。

```
while (HttpSocket.UriWebResponseCount < HttpSocket.UriWebRequestCount) 
{ 
    Thread.Sleep(250); // sleep for 250 ms before the next check

    int myIntValue = (int)Math.Floor((double)HttpSocket.UriWebResponseCount / HttpSocket.UriTotal); 
    backgroundWorker1.ReportProgress(myIntValue); 
} 
```

希望静态属性 HttpSocket.UriWebResponseCount 和 HttpSocket.UriWebRequestCount 正在以线程安全的方式更新和读取。

# c# - 如何扩展 DataRow 类

> ID：11387746
> 
> 赞同：0
> 
> 时间：2012-07-09T00:08:19.300
> 
> 标签：c#, extension-methods, nullable, datarow

我想扩展 System.Data.DataRow 类，所以我做了以下代码（并`using`在我的类中添加了关键字）

```
namespace MyExtension
{
     public static class DataRowExt
      {
          public static string ToNullableDate(this DataRow dr)
          { return something;}
    }
} 
```

但是，当我尝试以下代码`ToNullableDate`时，Intellisense 中没有显示：

```
DataRow d = new DataRow();
d["Column"].ToNullableDate(); // ToNullableDate does not show up 
```

我的扩展方法声明中是否缺少任何内容？还是应该只创建一个新类并从 DataRow 类继承？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:11:38.507

你进入`using MyExtension`代码了吗？此外，扩展位于 DataRow 上，即 d，但您正在 d["Column"] 上查找它。

从您的评论看来，该值似乎为 null，您需要对此进行测试，而不是创建扩展...

```
 object value = d["Column"];
 if (value == DBNull.Value)
     // do something
 else
     // do something else 
```

如果你真的想要一个扩展方法，一种选择是在方法中传递列：

```
namespace MyExtension
{
   public static class DataRowExt
   {
       public static string ToNullableDate(this DataRow dr, string Column)
       { return something;}
   }
} 
```

然后像这样使用它：

```
d.ToNullableDate("Column"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T00:09:19.193

扩展方法将关闭，`d`而不是关闭索引器。

仅供参考，您可以这样做：

```
DataRow d = new DataRow();
d["Column"] as DateTime?; 
```

# php - 使用 PHP DOMDocument 更改标签属性值

> ID：11387748
> 
> 赞同：27
> 
> 时间：2012-07-09T00:08:38.213
> 
> 标签：php, dom, attributes, tags, domdocument

我想用 PHP DOMDocument 更改标签的属性值。

例如，假设我们有这行 HTML：

```
<a href="http://foo.bar/">Click here</a> 
```

我在 PHP 中加载上述代码如下：

```
$dom = new domDocument;
$dom->loadHTML('<a href="http://foo.bar/">Click here</a>'); 
```

我想使用 PHP 的 DOMDocument 扩展将“href”值更改为“http://google.com/”。这可能吗？

感谢您一如既往的帮助！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-09T00:11:43.747

```
$dom = new DOMDocument();
$dom->loadHTML('<a href="http://foo.bar/">Click here</a>');

foreach ($dom->getElementsByTagName('a') as $item) {

    $item->setAttribute('href', 'http://google.com/');
    echo $dom->saveHTML();
    exit;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T00:29:59.817

```
$dom = new domDocument;
$dom->loadHTML('<a href="http://foo.bar/">Click here</a>');

$elements = $dom->getElementsByTagName( 'a' );

if($elements instanceof DOMNodeList)
    foreach($elements as $domElement)
        $domElement->setAttribute('href', 'http://www.google.com/'); 
```

# ruby - ruby 'unroller' gem 的问题

> ID：11387751
> 
> 赞同：0
> 
> 时间：2012-07-09T00:08:59.313
> 
> 标签：ruby, rubygems, gem, trace, require

我在使用展开器时遇到问题。我已经安装了 gem 并编写了这个简单的程序来帮助专注于我遇到的问题：

```
#!/usr/bin/ruby

require 'rubygems'
require 'unroller'

Unroller::trace

def foo(p1, p2)
  puts p1
  puts p2
end

foo("param1", "param2") 
```

运行程序产生：

```
/Library/Ruby/Gems/1.8/gems/facets-2.9.3/lib/core/facets/filetest/separator_pattern.rb:5: warning: already initialized constant SEPARATOR_PATTERN
/Library/Ruby/Gems/1.8/gems/facets-2.9.3/lib/core/facets/string/bracket.rb:3: warning: already initialized constant BRA2KET
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- facets/methodspace (LoadError)
from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:36:in `require'
from /Library/Ruby/Gems/1.8/gems/unroller-1.0.0/lib/unroller.rb:4
from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:60:in `gem_original_require'
from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:60:in `require'
from ./ut:4 
```

我的 ruby​​ 版本是 ruby​​ 1.8.7 (2011-12-28 patchlevel 357)。我还在我的 Windows 开发盒上安装了 ruby​​ 并得到了相同的错误，并且 ruby​​ 版本是 1.9.3，所以它似乎与我正在使用的 Ruby 版本无关。

有人有想法么？

首先十分感谢！

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:21:34.157

这是`unroller`gem 的错误，在此处描述：[https](https://github.com/TylerRick/unroller/issues/1) ://github.com/TylerRick/unroller/issues/1 。`unroller`自动需要最新版本的`facets`gem，而 2.9 版打破了它。（顺便说一句，在加载依赖项时，gem 永远不应该使用 '>='，这就是为什么 '~>' 的原因。）

`facets`通过在需要之前使用捆绑器和硬编码 gem 到特定版本来本地修复并不难`unroller`（因此`facets`加载特定版本而不是最新的 2.9）。

创建`Gemfile`：

```
source 'http://rubygems.org'

gem 'facets', '2.8.4' 
gem 'termios' # you're gonna need this gem too, for some reason
gem 'unroller' 
```

运行`bundle install`，然后通过`bundle exec ruby test.rb`或`bundler/setup`在其中运行脚本：

```
require 'rubygems'
require 'bundler/setup'
require 'unroller'
... 
```

**更新：**或者如果您不想处理捆绑器，请先尝试一下，它也可以工作：

```
require 'rubygems'
gem 'facets', '2.8.4'
require 'unroller'
... 
```

# python - 我在 Python 列表中混合类型是否安全？

> ID：11387752
> 
> 赞同：49
> 
> 时间：2012-07-09T00:09:18.200
> 
> 标签：python

在 Python 列表中混合不同类型是否存在无法预料的问题？例如：

```
import random
data = [["name1", "long name1", 1, 2, 3],
        ["name2", "long name2", 5, 6, 7]]
name, long_name, int1, int2, int3 = random.choice(data) 
```

我正在使用这段代码在一个函数中随机设置几个相关参数，但即使 Python 支持它，我对在列表中混合这样的类型持谨慎态度。由于混合数据类型列表不会用于任何处理，除了变量赋值本身（它分配给的变量将，但不是列表本身），我认为这很好，但我想确保这一点不是秘密有问题的代码。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-09T00:10:54.313

没问题，您可以将任何类型存储在[列表](https://docs.python.org/3/library/functions.html#func-list)中，这与“过去”不同，当时其他语言的数组只需要存储一种类型的数据。

由于列表还可以存储其他列表和其他复合数据结构以及其他对象引用，因此由于可能存在多个层，处理或遍历列表可能会变得更复杂，而不仅仅是在简单的单级迭代中遍历数组. 这也与[浅拷贝和深拷贝](http://docs.python.org/library/copy.html)有关。

如果处理列表的代码知道这一点，由于这种将不同事物存储在列表中的能力，我想不出任何问题。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-09T01:13:45.020

该语言适合您在列表中混合类型，但您应该知道 Python 文化可能不赞成它。当您拥有已知的混合类型集合并且不同的索引具有不同的语义时，通常会使用元组。列表通常用于具有不同长度的统一序列的情况。

因此，您的数据将更传统地表示为：

```
data = [
    ("name1", "long name1", 1, 2, 3),
    ("name2", "long name2", 5, 6, 7),
    ...
] 
```

更简洁地说：元组像 C 结构一样使用，列表像 C 数组一样使用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-09T00:11:12.090

在一个列表中拥有多种数据类型并没有固有的问题。当然，如果您尝试将该列表用于期望它都是相同类型的东西，则可能会出现问题。在您的示例中，如果这就是您正在做的所有事情，那么它就不会成为问题。不过，您可能会考虑使用元组而不是列表。按照惯例，当序列的组成固定时使用元组；当您可以添加到序列或从序列中删除时，使用列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-03T05:31:19.000

如果您只是使用它来存储不同的可能输出（遵循您的函数合同），`name, long_name, int1, int2, int3`那么没问题。

如果其他不知道列表中的类型及其顺序的代码正在使用它，那么我确实看到了问题。一个简单的例子：

```
>>> min(['-2', 1])
1 
```

# javascript - iOS 媒体播放器和 JavaScript 重定向

> ID：11387755
> 
> 赞同：1
> 
> 时间：2012-07-09T00:09:36.747
> 
> 标签：javascript, objective-c, ios, xcode, media-player

我有一个 php 文件，它重定向到如下视频：

```
header('Location: site.com/video.mp4'); 
```

当我将此网址发送到媒体播放器时

```
[[MPMoviePlayerController alloc] initWithContentURL:@"http://mysite.com/my.php"]; 
```

它工作正常，没问题，视频正在媒体播放器上播放。

但现在我需要以 javascript 的方式执行此操作。但我不知道我该怎么做。

当我在 javascript 中执行此操作时，

重定向.html：

```
<script>
   window.location.replace('www.site.com/video.mp4');
</script> 
```

并将此 url 发送到媒体播放器

```
[[MPMoviePlayerController alloc] initWithContentURL:@"http://mysite.com/redirect.html"]; 
```

视频不来。

任何的想法 ？我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:48:51.003

这不可能。视频播放器没有将返回文件的内容解析为 HTML/JavaScript，而是认为它是一个视频流。由于返回的文档不是视频流，播放器将失败。

如果您需要服务器告诉客户端使用哪个文件/url，您可以返回一个包含 URL 的 JSON 对象，并让 iOS 应用程序将其用作视频 url，但是服务器重定向既干净又容易实施。

# mysql - Mysql INSERT IGNORE，实际上可以忽略哪些错误？

> ID：11387756
> 
> 赞同：2
> 
> 时间：2012-07-09T00:09:43.893
> 
> 标签：mysql, insert, innodb

我最近在我的 INNODB 数据库上遇到了一些锁定问题，导致一个非常轻量级（单行更新）的语句由于锁定争用而被终止。

我知道通过使用 INSERT IGNORE，您可以忽略基于约束的错误，例如 UNIQUE KEY 冲突。但是 INSERT IGNORE 是否也可以处理更严重的数据库错误，例如“超过锁定等待超时”？同样，如果 INSERT IGNORE 被 mysql 的死锁解决方案杀死，它会如何反应？

最终，我需要更好地了解哪个查询持有如此多的锁以阻止该语句成功。我已经添加了一些调试代码来做到这一点。

但与此同时，我希望使用 UPDATE LOW_PRIORITY 来解决这个问题，但 INNODB 不支持它。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:17:00.547

我相信所有错误都会被忽略。从[手册](http://dev.mysql.com/doc/refman/5.5/en/insert.html)：

> 如果使用 IGNORE 关键字，则执行 INSERT 语句时发生的错误将被视为警告。

它使用键违规作为被忽略的错误示例，但该语言似乎表明`IGNORE`关键字涵盖了更广泛的内容。这与同一页面上的其他措辞一致（强调添加）：

> *REPLACE在处理包含重复旧行的唯一键值的新行时*与 INSERT IGNORE 对应：新行用于替换旧行而不是被丢弃。

换句话说，*如果*忽略的错误是违反唯一键约束的，则执行语句的 REPLACE 部分。这表明（至少对我而言）其他错误虽然也被忽略，但不会触发 REPLACE 子句的执行。

# ruby-on-rails - Rails - 在参数中转义反斜杠会造成严重破坏？

> ID：11387760
> 
> 赞同：1
> 
> 时间：2012-07-09T00:10:31.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, params

我有一个表单，它传递与它之前的表单相同的参数：

```
<%= form_tag({:controller => "workouts", :action => "random"}) do %>
<%= hidden_field_tag :workout, params[:workout] %>
<%= hidden_field_tag :time, params[:time] %>
<%= submit_tag "Get Another", :class => 'btn' %> 
```

第一种形式工作正常，第二种形式“获取另一个”给了我`can't convert Symbol into Integer`这一行的错误：

```
@equipment_ids = params[:workout][:equipment_ids].collect{|s| s.to_i} 
```

传递的第一种和第二种形式的参数是：

```
 {"utf8"=>"✓",
 "authenticity_token"=>"qj/Q/YWvLKK3A3paAnEom4oTFtq44daX6dvEb8qmgtE=",
 "workout"=>{"equipment_ids"=>["",
 "508",
 "518"]},
 "time"=>"25",
 "commit"=>"Get Workout"}

 {"utf8"=>"✓",
  "authenticity_token"=>"qj/Q/YWvLKK3A3paAnEom4oTFtq44daX6dvEb8qmgtE=",
  "workout"=>"{\"equipment_ids\"=>[\"\",
  \"508\",
  \"518\"]}",
  "time"=>"25",
  "commit"=>"Get Another"} 
```

唯一的区别是转义的反斜杠。我不确定为什么这些会导致问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:35:38.153

我在尝试使用自定义 POST 请求手动提交表单时遇到了同样的问题。问题似乎是 net/http post_form 方法只能处理所有值都是字符串的单个哈希。如果您在哈希内部有哈希（就像脚手架生成的形式一样），它会将内部哈希视为字符串，并添加讨厌的反斜杠，正如您刚刚看到的那样会造成严重破坏:)

我的解决方案是使用较低级别的“post”方法，并手动编码散列。定义这个模块：

```
module HashToHttpParams
   def to_http_params
     map do |k, v|
       if v.is_a?(Hash)
         v.map do |kk, vv|
           "#{k}[#{kk}]=#{vv}"
         end.join('&')
       else
         "#{k}=#{v}"
       end
     end.join('&')
   end
 end 
```

然后将其添加到代码中的 Hash 类中：

```
Hash.send(:include, HashToHttpParams) 
```

最后在使用之前对你的参数哈希进行编码。在我的代码中，这看起来像：

```
Net::HTTP.start("localhost",3000) do |http|  
  http.post("/tests", params.to_http_params)  
end 
```

不知道是否有更好的解决方案，但这对我有用。

资料来源： http: [//porras.lacoctelera.net/post/2007/10/08/enviando-formularios-con-parametros-compuestos-con-ruby-y-net#c4300080](http://porras.lacoctelera.net/post/2007/10/08/enviando-formularios-con-parametros-compuestos-con-ruby-y-net#c4300080)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T00:30:57.983

将隐藏字段标记更改为：

```
<%= hidden_field_tag "workout[equipment_ids][]", params[:workout][:equipment_ids] %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T12:54:10.577

正如 Hallucynogenyc 所指出的，这是由`.post_form`( [docs](http://apidock.com/ruby/Net/HTTP/post_form/class) ) 方法只需要一个非嵌套的哈希值（即字符串）引起的。我有同样的问题，并通过切换使用该`.post`方法解决了它。

```
require "net/http"
uri = URI('http://www.yoururl.com')
http = Net::HTTP.new(uri.host)
response = http.post(uri.path, params.to_query) 
```

该`.to_query`方法对于转换哈希也很有用。

解决它的另一种方法是不使用 rails form 方法来创建参数。如果您只使用直接的 html，由于某种原因，该`.post_form`方法更喜欢它。

```
Email <input name="student_email" type="email" autofocus="true"> 
```

# python - Python：实例没有属性'sendAMail'

> ID：11387761
> 
> 赞同：0
> 
> 时间：2012-07-09T00:10:39.023
> 
> 标签：python, attributes, instance

我只是得到错误：

```
AttributeError: SecondLife instance has no attribute 'sendAMail' 
```

怎么了？（我检查了格式，这不是错误。我检查了语法，也没有错误。）

脚本中发生的是一个 url 用 cookie 打开，我想从中获取一些信息。

```
import urllib2, cookielib, re
import ClientForm
import re
import smtplib

kurse = ['Entwicklung von Multimediasystemen', 'Computergrafik', 'Gestaltung von Multimediasystemen', 'Verteilte Systeme']

class SecondLife:

    def __init__(self, usernames, password):
        self.username = usernames
        self.password = password
        self.url = 'https://lsf.htw-berlin.de/qisserver/rds?state=user&type=0&application=QISPOS'

        cookiejar = cookielib.LWPCookieJar()
        cookiejar = urllib2.HTTPCookieProcessor(cookiejar)
        # debugger = urllib2.HTTPHandler(debuglevel=1)

        opener = urllib2.build_opener(cookiejar)
        urllib2.install_opener(opener)

    def sendAMail(self, smtp_server, user, password, listener, subject, text):
        smtp = smtplib.SMTP(smtp_server)
        smtp.starttls()
        smtp.login(user,password)
        msg = "SUBJECT: " + subject + "\n\n" + text
        smtp.sendmail("bln.schade@gmail.com", listener, msg)
        smtp.quit()

    def login(self):
        response = urllib2.urlopen(self.url)
        forms = ClientForm.ParseResponse(response, backwards_compat=False)

        # forms[0] is 'GET', forms[1] is 'POST'
        form = forms[0]

        try:
            form['username'] = self.username
            form['password'] = self.password
        except Exception, e:
            print 'The following error occured: \n"%s"' % e
            print
            print 'A good idea is to open a browser and see if you can log in from there.'
            print 'URL:', self.url

            exit()

        self.page = urllib2.urlopen(form.click('submit')).read()

    def friends_online(self):

        self.login()

        final = ""
        final_asi = ""
        leistungsstand = ""
        match = re.search(r"asi=\w*\d*\"", self.page)

        if match:
            final = match.group()
            final_asi = re.sub("asi=", "", final)
            final_asi = re.sub("\"", "", final_asi)

            print "vorher: " + final
            print "nachher: " + final_asi

            leistungsstand_url = "https://lsf.htw-berlin.de/qisserver/rds?state=htmlbesch&application=sospos&moduleParameter=Student&navigationPosition=functions%2Cnotenspiegel&breadcrumb=notenspiegel&topitem=functions&subitem=notenspiegel&asi=" + final_asi
            leistungsstand = urllib2.urlopen(leistungsstand_url).read()
        else:
            print "not match"

        # Ausloggen
        logout = "https://lsf.htw-berlin.de/qisserver/rds?state=user&type=4&re=last&menuid=logout&category=auth.logout"
        urllib2.urlopen(logout).read()

        website = open("lsf.html", "w")
        website.write(leistungsstand)
        website.close()

        for kurs in kurse:
            print kurs

            if (re.search(kurs, "fajfjsjj Entwicklung von Multimediasystemen hahahah")):
                self.sendAMail("smtp.googlemail.com", "user", "passw", "bln.schade@gmail.com", "kurs" , "Eine neue Note ist im LSF eingetragen.")

        #self.final_asi.replace(new, "asi=","")
        #asi[0].replace("\"","")

        #print "Final " + asi

SL = SecondLife('xyz', 'xyz')
SL.friends_online() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:25:48.880

对我有用：`self.sendAMail`从实例中打印出来

```
<bound method SecondLife.sendAMail of <__main__.SecondLife instance at 0x101d91e18>> 
```

不过，我认为这*是*格式问题。如果我复制并粘贴您的代码并查看空格，我会看到空格和制表符的混合使用。尤其是：

```
In [20]: [line for line in d if 'def' in line]
Out[20]: 
['        def __init__(self, usernames, password):\n',
 '    \tdef sendAMail(self, smtp_server, user, password, listener, subject, text):\n',
 '        def login(self):\n',
 '        def friends_online(self):\n'] 
```

`\t`之前`def sendAMail`看起来很可疑。我 75% 确定不一致的空格是导致问题的原因。尝试使用 运行您的脚本`python -tt scriptname.py`，这将引发关于标签使用不一致的错误。

# hudson - 如何触发 Hudson 工作空间的手动清理

> ID：11387762
> 
> 赞同：3
> 
> 时间：2012-07-09T00:10:43.157
> 
> 标签：hudson

我们有一个有八个节点的 Hudson 集群。当某个特定的代码分支不再处于活动状态时，我们会禁用构建作业，但该作业的工作区仍然会占用所有节点上的空间。

我正在寻找一种跨所有节点触发工作区清理的方法。请注意，我不是在寻找“构建前干净的工作区”解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:10:40.353

我试过以下脚本，它适用于单节点，

```
 def hi = hudson.model.Hudson.instance
             hi.getItems(hudson.model.Job).each {
                job ->
                if(job.isDisabled())
                {
                   println(job.displayName)
                   job.doDoWipeOutWorkspace()
                 }
           } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T08:21:03.497

您不需要编写插件。您可以编写一个利用[Groovy 插件](http://wiki.hudson-ci.org/display/HUDSON/Groovy+plugin)编写 Groovy 系统脚本的作业。比方说，这项工作每晚都会运行。它将识别禁用的项目并删除它们的工作空间。这是您的脚本将利用的[Hudson 模型 API的链接。](http://www.jarvana.com/jarvana/view/org/jvnet/hudson/main/hudson-core/1.313/hudson-core-1.313-javadoc.jar!/index.html?hudson/model/Api.html)有一个 Groovy 脚本控制台，`http://<hudson-server>/script`对调试非常有用。

这是一个应该对您有直接好处的代码片段。在脚本控制台中运行它并检查输出：

```
def hi = hudson.model.Hudson.instance
hi.getItems(hudson.model.Job).each {
  job ->
    println(job.displayName)
    println(job.isDisabled())
    println(job.workspace)
} 
```

您可能还会发现[此答案](https://stackoverflow.com/a/10781891/1178189)中的代码片段很有用。他们指的是 Jenkins API，但在这个级别上，我认为 Jenkins 和 Hudson 之间没有区别。

**更新：**

以下是在多个从站上执行此操作的方法：创建一个在所有从站上运行的多配置作业（也称为“矩阵作业”）。在每个从属服务器上，以下系统 Groovy 脚本将为您提供每个作业*在该从属服务器上*的工作空间（以及启用/禁用标志）：

```
def hi = hudson.model.Hudson.instance

def thr = Thread.currentThread()
def build = thr?.executable
def node = build.executor.owner.node

hi.getItems(hudson.model.Job).each {
  job ->
    println("---------")
    println(job.displayName)
    println(job.isDisabled())
    println(node.getWorkspaceFor(job))
  } 
```

由于脚本在从站本身上运行，您可以直接从中清除工作区。当然，工作空间可能不存在，但这不是问题。请注意，您只编写一次脚本 - Jenkins 将自动在您在矩阵作业中指定的所有从属服务器上运行它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-09T09:39:21.957

以下 Groovy 脚本擦除所有节点上某些作业的工作区。从“Jenkins host”/computer/(master)/script 执行

在 TODO 部分，将作业名称更改为您需要的名称。

```
import hudson.model.*
// For each job
for (item in Hudson.instance.items)
{
  jobName = item.getFullDisplayName()
  // check that job is not building
  if (!item.isBuilding())
  {
    // TODO: Modify the following condition to select which jobs to affect
    if (jobName == "MyJob")
    {
      println("Wiping out workspaces of job " + jobName)
      customWorkspace = item.getCustomWorkspace()
      println("Custom workspace = " + customWorkspace)

      for (node in Hudson.getInstance().getNodes())
      {
        println("  Node: " + node.getDisplayName())
        workspacePath = node.getWorkspaceFor(item)
        if (workspacePath == null)
        {
          println("    Could not get workspace path")
        }
        else
        {
          if (customWorkspace != null)
          {
            workspacePath = node.getRootPath().child(customWorkspace)
          }

          pathAsString = workspacePath.getRemote()
          if (workspacePath.exists())
          {
            workspacePath.deleteRecursive()
            println("    Deleted from location " + pathAsString)
          }
          else
          {
            println("    Nothing to delete at " + pathAsString)
          }
        }
      }
    }
  }
  else
  {
    println("Skipping job " + jobName + ", currently building")
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-22T11:59:56.937

它有点晚了，但我遇到了同样的问题。我的脚本将检查是否至少有 2 GB 空间可用。如果不是这种情况，则节点上的所有工作空间都将被清除以释放空间。

```
import hudson.FilePath.FileCallable
import hudson.slaves.OfflineCause

for (node in Jenkins.instance.nodes) {
    computer = node.toComputer()
    if (computer.getChannel() == null) continue

    rootPath = node.getRootPath()
    size = rootPath.asCallableWith({f, c -> f.getUsableSpace()} as FileCallable).call()
    roundedSize = size / (1024 * 1024 * 1024) as int

    println("node: " + node.getDisplayName() + ", free space: " + roundedSize + "GB")
    if (roundedSize < 2) {
        computer.setTemporarilyOffline(true, [toString: {"disk cleanup"}] as OfflineCause)

        for (item in Jenkins.instance.items) {
            jobName = item.getFullDisplayName()

            if (item.isBuilding()) {
                println(".. job " + jobName + " is currently running, skipped")
                continue
            }

            println(".. wiping out workspaces of job " + jobName)

            workspacePath = node.getWorkspaceFor(item)
            if (workspacePath == null) {
                println(".... could not get workspace path")
                continue
            }

            println(".... workspace = " + workspacePath)

            customWorkspace = item.getCustomWorkspace()
            if (customWorkspace != null) {
                workspacePath = node.getRootPath().child(customWorkspace)
                println(".... custom workspace = " + workspacePath)
            }

            pathAsString = workspacePath.getRemote()
            if (workspacePath.exists()) {
                workspacePath.deleteRecursive()
                println(".... deleted from location " + pathAsString)
            } else {
                println(".... nothing to delete at " + pathAsString)
            }
        }

        computer.setTemporarilyOffline(false, null)
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-18T07:29:54.810

我最近还想清理我的 jenkins 工作区，但有点扭曲：我只想从不再存在的工作中删除工作区。这是因为 jenkins 在删除作业时并没有摆脱工作区，这很烦人。而且我们目前只使用一个主节点，没有单独的节点。

我在某处找到了一个脚本（再也找不到链接了），但为了我们的使用对其进行了一些调整，将其放入 jenkins 作业中，使用“执行系统 ​​Groovy 脚本”构建步骤，每天运行：

```
import hudson.FilePath
import jenkins.model.Jenkins
import hudson.model.Job

def deleteUnusedWorkspace(FilePath root, String path) {
  root.list().sort{child->child.name}.each { child ->
    String fullName = path + child.name

    def item = Jenkins.instance.getItemByFullName(fullName);
    println "Checking '$fullName'"

    try{
      if (item.class.canonicalName == 'com.cloudbees.hudson.plugins.folder.Folder') {
        println "-> going deeper into the folder"
        deleteUnusedWorkspace(root.child(child.name), "$fullName/")
      } else if (item == null) {
        // this code is never reached, non-existing projects generate an exception
        println "Deleting (no such job): '$fullName'"
        child.deleteRecursive()
      } else if (item instanceof Job && !item.isBuildable()) {
        // don't remove the workspace for disabled jobs!
        //println "Deleting (job disabled): '$fullName'"
        //child.deleteRecursive()
      }
    } catch (Exception exc) {
      println "   Exception happened: " + exc.message
      println "   So we delete '" + child + "'!"
      child.deleteRecursive()
    }
  }
}

println "Beginning of cleanup script."

// loop over possible slaves
for (node in Jenkins.instance.nodes) {
  println "Processing $node.displayName"
  def workspaceRoot = node.rootPath.child("workspace");
  deleteUnusedWorkspace(workspaceRoot, "")
}

// do the master itself
deleteUnusedWorkspace(Jenkins.instance.rootPath.child("workspace"), "")

println "Script has completed." 
```

不过可能需要一些个人调整。显然，您应该首先注释掉所有删除语句来运行此脚本，并确保在实际运行之前进行备份。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T03:18:07.677

听起来您正在寻找“禁用构建时删除工作区”解决方案。您可以编写一个 Hudson 插件来执行此操作。这可能是矫枉过正。

如果我必须这样做（我不会这样做，因为我们没有磁盘空间短缺），我会编写一个单元脚本来查找 hudson 目录下的所有禁用作业。作业由 XML 文件表示。然后我会让脚本删除任何匹配的工作区。而且我可能会在 cron 中设置它，以便它每晚或每周运行或任何适合环境的运行。

# ios - 存储工具包将保留未完成的交易多长时间？

> ID：11387776
> 
> 赞同：6
> 
> 时间：2012-07-09T00:13:22.343
> 
> 标签：ios, ios-simulator, storekit

我正在开发启用了应用内购买的此应用。幸福的道路都被覆盖了，一切都很好，我正在努力解决不幸福的道路。

简单来说，购买是绑定到服务器端组件的。购买时，当交易处于“已购买”状态时，我应该去服务器，这将启用用户的帐户。当请求返回时，我会清理一些东西并最终在 SKPaymentQueue 上调用 -finishTransaction:。

当服务器调用由于某种原因失败时，不愉快的路径几乎是。网络不可用，网络超时，用户在购买后立即关闭了应用程序，就在我可以进行服务器调用之前，你可以命名它。

我在 5.1 模拟器中使用沙盒帐户进行的测试表明，未完成的已购买交易将在下次启动时返回队列中，并且我的委托将被正确调用。但是，过了一会儿，比如 5 分钟，交易就消失了。考虑到沙盒帐户的整体稳定性，我愿意在模拟器的实现上称其为，但很难说。

处理这个问题的适当方法是什么？

额外的问题：苹果何时真正向某人收费？听起来应该是在名为 -finishTransaction: 的应用程序之后，但我在任何地方都找不到任何证据。

谢谢，/克拉

更新：在物理设备上进行测试，将近一个小时，交易仍然存在。看起来交易消失是模拟器的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:20:25.850

当我实现应用内购买时，我放弃了在模拟器中进行测试。行为太不一样了。在设备上测试它，看看它是否在那里工作。

我也对你关于充电的问题感兴趣，因为我也不完全确定（我的应用程序还没有发布；））。

# jquery - Jquery淡入一个div内的一个div

> ID：11387777
> 
> 赞同：0
> 
> 时间：2012-07-09T00:13:42.667
> 
> 标签：jquery, html, web

请帮助我。

这是我的网页。

```
<div id="wrapper">

   <div id="header">
      header text
   </div>

   <div id="content">
      content text
   </div>

</div> 
```

我想淡入#content 块。

当我使用 `$("#wrapper").fadeIn(1500);`它时它工作正常并且它在整个页面中消失但是当我使用 `$("#content").fadeIn(1500);`它时它永远不会工作，关于褪色没有任何事情发生。

我究竟做错了什么？

我也试过 `$("#wrapper #content").fadeIn(1500);`了，但没有运气，你们能告诉我如何只定位#content div吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T00:19:03.123

如果没有看到示例页面/代码，很难确定，但听起来你有`#wrapper`隐藏但没有`#content`.

因此，当您淡入时它可以工作`#wrapper`（从而显示所有包含的内容），但是当您淡入时它不起作用，`#content`因为它的父级 ( `#wrapper`) 仍然是隐藏的。

您可能希望查看将 更改为`#wrapper`默认可见并将更改`#content`为隐藏，以便淡入可以正确显示。

同样，这一切都只是在这一点上的猜想。如果您添加链接/示例，那么我们也许可以给出更好的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T00:19:23.590

它对我有用。请参阅此处的示例：http: [//jsfiddle.net/xwqPA/](http://jsfiddle.net/xwqPA/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T00:20:24.000

默认情况下将内容 div 设置为`display: none`：

```
<div id="wrapper">
  <div id="header">
    header text
  </div>
  <div id="content" style="display: none;">
    content text
  </div>
</div>​​​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T00:17:05.220

选择两个jQuery元素时，用逗号分开它们：

$("#wrapper, #content").fadeIn(1500);

查看[多个选择器](http://api.jquery.com/multiple-selector/)

编辑：由于这被否决了，我觉得有必要进一步澄清......你说#wrapper 本身的淡化是有效的。由此，我可以假设 #wrapper 默认是隐藏的。因此，如果您打算“显示”#wrapper 的任何子元素，则需要先将其淡入（或至少将其显示属性设置为 'block' using `show()`），然后才能尝试淡入 #content。这可以通过对包装器和内容 div 执行淡入淡出来完成，如上所示。

# reporting-services - 如何总结查找值的结果？

> ID：11387778
> 
> 赞同：1
> 
> 时间：2012-07-09T00:13:43.017
> 
> 标签：reporting-services, ssrs-2008

我有一个 SSRS 报告，其中一列是从另一个数据集中查找的结果。我需要显示此列的总数。对于每一行，我使用以下表达式：

```
=Lookup(Fields!InstallerID.Value, Fields!InstallerID.Value, 
        Fields!RoutedPoints.Value, "spCapacity_GetRoutedPoint") 
```

对于我正在使用的一整行：

```
=Sum(Lookup(Fields!InstallerID.Value, Fields!InstallerID.Value, 
            Fields!RoutedPoints.Value, "spCapacity_GetRoutedPoint"), 
     "spBSA_National_Productivity") 
```

但是值是错误的。

我怎样才能得到这个列的总和？

# maven - maven 中的错误：找不到前缀“get”的插件

> ID：11387780
> 
> 赞同：1
> 
> 时间：2012-07-09T00:14:39.877
> 
> 标签：maven, glassfish, maven-3

我正在运行以下命令让我的项目运行

```
mvn gwt:run >> D:\client.log 2>&1 
```

它给了我以下错误：

> [错误] 在当前项目和插件组 [org.apache.maven.plugins, org.codehaus.mojo] 中找不到前缀“get”的插件，可从存储库 [local (C:\Users\name.m2 \repository), nexus (https://nexus.companyname.com/nexus/content/groups/public/)] -> [Help 1] org.apache.maven.plugin.prefix.NoPluginFoundForPrefixException: No plugin found for prefix ' get' 在当前项目和插件组 [org.apache.maven.plugins, org.codehaus.mojo] 中可用的存储库 [local (C:\Users\RahulJ.m2\repository), nexus (https:/ /nexus.companyname.com/nexus/content/groups/public/)] 在 org.apache.maven.plugin.prefix.internal.DefaultPluginPrefixResolver.resolve(DefaultPluginPrefixResolver.java:94) 在 org.apache.maven.lifecycle.internal .MojoDescriptorCreator。在 org.apache.maven.lifecycle.internal.DefaultLifecycleTaskSegmentCalculator.calculateTaskSegments(DefaultLifecycleTaskSegmentCalculator.java:106) 的 org.apache.maven.lifecycle.internal.MojoDescriptorCreator.getMojoDescriptor(MojoDescriptorCreator.java:222) 中找到PluginForPrefix(MojoDescriptorCreator.java:262)在 org.apache.maven.lifecycle.internal.DefaultLifecycleTaskSegmentCalculator.calculateTaskSegments(DefaultLifecycleTaskSegmentCalculator.java:86) 在 org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:98) 在 org.apache.maven.DefaultMaven .doExecute(DefaultMaven.java:319) 在 org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156) 在 org.apache.maven.cli.MavenCli.execute(MavenCli.java:537) 在 org.apache。 maven.cli.MavenCli.doMain(MavenCli.java:196) 在 org。apache.maven.cli.MavenCli.main(MavenCli.java:141) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl。在 org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290) 在 org.codehaus 的 java.lang.reflect.Method.invoke(Method.java:597) 调用(DelegatingMethodAccessorImpl.java:25) .plexus.classworlds.launcher.Launcher.launch(Launcher.java:230) 在 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409) 在 org.codehaus.plexus.classworlds.launcher.Launcher .main(Launcher.java:352) [ERROR] [ERROR] [ERROR] 有关错误和可能解决方案的更多信息，请阅读以下文章：[错误] [帮助 1][http://cwiki.apache.org/confluence/display/MAVEN/NoPluginFoundForPrefixException](http://cwiki.apache.org/confluence/display/MAVEN/NoPluginFoundForPrefixException)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:48:28.427

您编写的命令似乎未绑定到您提供的日志。

该错误`No plugin found for prefix 'get' in the current project and in the plugin groups` 意味着您没有在 build 部分声明 get plugin 。

我想你试过了`mvn get:run`，但没有`mvn gxt:run`......你没有混合 E 和 W 字母（在你的 QWERTY 键盘上？；）

# javascript - 如何在Javascript中获得关联数组和常规数组之间的区别？

> ID：11387798
> 
> 赞同：3
> 
> 时间：2012-07-09T00:19:39.800
> 
> 标签：javascript, arrays, loops, associative-array

是否有可能在Javascript中获得关联数组和常规数组的区别？

前任。

```
array1 = [5, 1, 3];
array2 = [1 => 15, 2 => 20, 3 => 10, 4 => 5, 5 =>50 ]; 
```

区别应该是...

```
diff = [2 => 20, 4=> 5]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T00:33:09.417

我假设您的问题在您的声明中只是有一个小错字`array2`。这没什么大不了的。

无论如何，这里有一些技巧，但它给了你你想要的东西：

```
array1 = [5, 1, 3];
array2 = {1: 15, 2: 20, 3: 10, 4: 5, 5: 50};

var result = {};
for (var i in array2) {
    if (array1.indexOf(+i) < 0) {
        result[i] = array2[i];
    }
}

alert(JSON.stringify(result)); 
```

[工作示例](http://jsfiddle.net/rtoal/VjNHn/)

我的技巧是`+i`在`indexOf`调用中，因为您的“关联数组”的属性是字符串，但您`array1`包含数字。一元`+`从字符串中产生一个数字。有点骇人听闻，但它是一种惯用的 JavaScript 实践。

**附录**

正如 RobG 所指出的，`indexOf`它是一种 ES5 方法，因此如果您的 JavaScript 引擎是 ES3 或更低版本，您将需要`indexOf`自己实现。 [如何做到这一点的一个例子是在 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)。或者，您可以`indexOf`通过自己搜索数组来执行等效操作。

​</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T00:42:06.980

首先，正如前两位评论者所说，您的第二个数组应该是一个对象并且不是有效的 JavaScript。这是对象形式：

```
var object = { "1": 15, "2": 20, "3": 10, "4": 5, "5": 50 }; 
```

此功能可实现您想要的结果：

```
function findDiff(arr, obj)
{
    var tempObj = clone(obj);
    for (var i = 0; i < arr.length; i++)
    {
        var propId = arr[i];
        if (tempObj[propId] !== undefined)
            delete tempObj[propId];
    }
    return tempObj;
} 
```

此函数依赖于一个名为 的函数`clone`，该函数确保按值而不是引用`obj`复制到。`tempObj`这可以防止传递的对象被修改：

```
function clone(obj){
    if(obj == null || typeof(obj) != 'object')
        return obj;

    var temp = obj.constructor(); // changed

    for(var key in obj)
        temp[key] = clone(obj[key]);
    return temp;
} 
```

就这样称呼它：

```
var array = [5, 1, 3];
var object = { "1": 15, "2": 20, "3": 10, "4": 5, "5": 50 };

var diff = findDiff(array, object); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T02:50:49.053

您需要详细解释您期望操作的结果是什么。

一种解释是根据另一个数组中的值从一个数组中删除成员，因此给出：

```
array1 = [5, 1, 3];
array2 = [15, 20, 10, 5, 50 ]; 
```

你可能有一个功能：

```
function diff(arr1, arr2) {
  // Copy arrays so don't affect originals
  var t1 = arr1.slice();
  var t2 = arr2.slice();

  // sort t1
  t1.sort();

  // Remove members of arr2 from highest indexes to lowest
  var i = t1.length;
  while (i--) {
    t2.splice(t1[i], 1);
  }
  return t2;
} 

 alert(diff(array1, array2));  // 15, 10, 50 
```

请注意，数组是零索引的，并且 array2 中没有第 5 个成员，因此删除的值是 20 和 5（即分别具有索引 1 和 3 的成员）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:15:12.383

另一种选择是，对`JSON.stringify()`变量执行 a 并检查结果字符串的最左边或最右边的字符。如果是`{`or `}`，你有一个关联数组/对象，如果`[`or `]`，它是一个数组。我想这可能会有点贵，具体取决于阵列的大小，但它会完成这项工作。

*但是...*由于没有免费的午餐，所有动物都成对出现，如果您根据原始定义使用了变量，这只是一个合理的解决方案。
如果您定义了一个对象，如下所示：然后`obj = [1,2,3]`，稍后添加一个值，例如a`obj['w'] = 'ww'`只会`JSON.stringify(obj)`产生不要混合。在内部，我想，javascript 保留两个单独的变量表，一个用于对象，一个用于数组，无论哪个先定义，在使用 stringify 打印时都会得到点头。`[1,2,3]``obj['w']``ww`

更令人困惑的是，如果您首先将变量定义为对象，然后添加一个数组键，也就是

```
obj = {1: 11, 2: 22, 3: 33};
obj[4] = 44; 
```

新键会自动转换为字符串，从而在 stringify 中产生结果

```
{"1":11, "2": 22, "3": 33, "4": 44}  //sans the \", for better readibility 
```

令人困惑，但我想这就是你为一点无政府状态和易用性付出的代价。

# redirect - nginx：将移动请求重定向到 /mobile/$uri

> ID：11387800
> 
> 赞同：6
> 
> 时间：2012-07-09T00:20:02.940
> 
> 标签：redirect, proxy, nginx

我正在尝试设置我的 nginx 以将来自移动设备的所有请求重定向到 /mobile/$uri 我想出了这个解决方案，但它似乎不起作用。是语法问题还是对整个重定向概念的误解。

```
if ($http_user_agent ~* '(iPhone|iPod|android|blackberry)') {
     rewrite     ^(.*)   http://xxxx.org/mobile/$1 permanent;
} 
```

当我使用我的安卓手机时，我得到了类似 xxx.org/mobile/mobile/mobile/mobile....

有什么想法吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T12:23:57.227

您应该使用不同的位置：

```
location / {
    if ($http_user_agent ~* '(iPhone|iPod|android|blackberry)') {
        return 301 /mobile$request_uri;
    }
}

location /mobile/ {

} 
```

顺便说一句，[http://nginx.org/r/return](http://nginx.org/r/return)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T08:51:43.803

使用[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)它有适用于所有网络服务器和客户端/服务器端语言的脚本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-23T19:00:46.393

```
 #initliaze mobile
    set $mobile "";

    if ($request_uri !~* "^/mobile.*" ){
        set $mobile Y;
    }
    if ($http_user_agent ~* (iPhone|iPod|android|blackberry) ) {
        set $mobile "${mobile}E";
    }

    if ( $http_referer !~* "xxx\.org" ){
       set $mobile "${mobile}S";
    }

    if ( $host ~* "xxx\.org" ){
       set $mobile "${mobile}S";
    }

    if ($mobile = YESS){
        rewrite ^ $scheme://$host/mobile$request_uri ;
    } 
```

# php - 一种从输入中获取值并将其发送到 php 文件的干净方法

> ID：11387804
> 
> 赞同：0
> 
> 时间：2012-07-09T00:20:34.250
> 
> 标签：php, jquery, html, ajax

我正在寻找一种非常简单的方法来从所有输入元素（以及一些分隔符）中获取所有值，然后使用已经准备好的提交函数快速将它们发送到 PHP 文件。

我提出了一个非常粗略的解决方案，但需要对其进行大量优化。

现在，当我单击提交按钮时，我调用了一个函数

```
function $('#submit').click(function(){

var $divValues = new Array();
$divValues[0] = $('#divName').html();
$divtValues[1] = $('#divImgName').html();

var $values;
$values = $(':input').serializeArray();

$fileName = "php.php?firstVal=\""+$divValues[0]+"\"&secondVal=\""+$divtValues[1]+"\"&thirdVal=\""+$values['firstValName']+"\"&ect..." 

//then i simply call the ajax function which will send the information to the php file
fetch($fileName);    
}); 
```

也许我可以使用关联数组中的值的名称和在我的 php 文件中检索到的变量的名称匹配的事实，而不是将我的文件名设置为`..."&thirdVal=\"" ...`，而是使用 `$values['firstValName']`在此示例中将是第三个值的名称（虽然我不知道该怎么做）

或者也许有一种更简单的方法来完成我想要做的事情。关于如何以一种很好的方式实现这段代码的任何想法？

**更新：**

目前，我的 html 中没有表单元素，但只要我看到需要它以使代码更简单的解决方案，我就可以轻松添加一个...我知道我可以使用 serialize() 函数，但我的问题是关于处理返回的数组的好方法。（或者可能使用 2 个数组，一个具有名称，另一个具有值或二维数组）无论哪种方式，我只想看看什么是获取数据和`$fileName`为 PHP 文件创建具有正确值的简单方法

**我将不胜感激答案中的一些代码或伪代码，它们显示了一种使用所有值创建文件名的简单方法**

如果有人不明白我在问什么或需要一些澄清，那么他们应该随时在下面发表评论，以便我可以尝试让自己清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:32:53.210

由于您使用的是 jQuery，因此您可以将其 AJAX 方法与[serialize()](http://api.jquery.com/serialize/)应用于整个表单。[您可以单击此处](http://api.jquery.com/serialize/)阅读有关它的文档。[您还可以通过单击此处](http://api.jquery.com/jQuery.ajax/)、[此处](http://api.jquery.com/jQuery.get/)和[此处](http://api.jquery.com/jQuery.post/)来阅读有关 jQuery 的 AJAX 方法的文档。

应您的要求，这是一个非常简单的示例：

```
$.post("test.php", $("#testform").serialize()); 
```

您可以从我引用的文档中真正获得有关如何使用 $.post 或 $.get 函数的其余内容。

Serialize 还负责对所有变量进行 urlencoding，因此您不必担心这一点。

**编辑：**

没有必要有一个表格。你可以用上面的 serializeArray() 做你想做的事情，除了 (a) $(':input') 没有选择任何东西和 (b) 你应该使用 serialize() 而不是 serializeArray()。因此，如果没有表单，代码将如下所示：

```
$.post("test.php", $("input,select,textarea").serialize()); 
```

这将正确地请求具有正确编码的数据的脚本，然后您可以从 $_POST 或 $_GET 在 PHP 脚本中读取它，具体取决于您是使用 $.post 还是 $.get 来请求脚本。

# css - 媒体查询以检测设备是否为触摸屏

> ID：11387805
> 
> 赞同：144
> 
> 时间：2012-07-09T00:20:53.267
> 
> 标签：css, touch, media-queries

什么是最安全的方式，使用媒体查询，在不使用触摸屏设备时让事情发生？如果没有办法，您是否建议使用 JavaScript 解决方案，例如`!window.Touch`Modernizr 或 Modernizr？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-01-22T11:31:39.223

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-07-09T00:31:43.280

如今，CSS 媒体查询可用于为具有特定交互功能的设备定义样式，并且也[得到广泛支持](https://caniuse.com/css-media-interaction)。

[例如，悬停](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/hover)可用于测试用户的主要输入机制是否可以悬停在元素上（在没有模拟的支持触摸的设备中这是不正确的）

```
@media (hover: none) {
  a {
    background: yellow;
  }
} 
```

其他交互式测试有：pointer、any-pointer、hover 和 any-hover

### 上一个答案

我建议使用[modernizr](http://modernizr.com/docs/#features-misc)并使用它的媒体查询功能。

```
if (Modernizr.touch){
   // bind to touchstart, touchmove, etc. and watch `event.streamId`
} else {
   // bind to normal click, mousemove, etc.
} 
```

但是，使用 CSS 时，也有类似的伪类，例如在 Firefox 中。您可以使用[:-moz-system-metric(touch-enabled)](https://developer.mozilla.org/en/CSS/:-moz-system-metric%28touch-enabled%29)。但这些功能并非适用于所有浏览器。

对于[Apple](http://developer.apple.com/library/safari/#documentation/UserExperience/Reference/TouchEventClassReference/TouchEvent/TouchEvent.html)设备，您可以简单地使用：

```
if (TouchEvent) {
   //...
} 
```

特别是对于 iPad：

```
if (Touch) {
    // ...
} 
```

但是，这些*不适用于 Android*。

> [Modernizr](http://modernizr.com)提供了特征检测能力，检测特征是一种很好的编码方式，而不是基于浏览器的编码。

#### 样式化触摸元素

Modernizer 为这个确切的目的将类添加到 HTML 标记中。在这种情况下，`touch`您`no-touch`可以通过在选择器前加上 .touch 来设置与触摸相关的方面。例如`.touch .your-container`。^(致谢：本·斯威本)

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2013-08-23T07:44:46.950

截至 2013 年年中，CSS 解决方案似乎并未广泛使用。反而...

1.  [Nicholas Zakas 解释](http://www.nczonline.net/blog/2012/07/05/ios-has-a-hover-problem/)说 Modernizr`no-touch`在浏览器不支持触摸时应用了一个 CSS 类。

2.  或者用一段简单的代码在 JavaScript 中检测，允许您实现自己的类似 Modernizr 的解决方案：

    ```
    <script>
        document.documentElement.className += 
        (("ontouchstart" in document.documentElement) ? ' touch' : ' no-touch');
    </script> 
    ```

    然后你可以把你的 CSS 写成：

    ```
    .no-touch .myClass {
        ...
    }
    .touch .myClass {
        ...
    } 
    ```

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2018-05-11T04:35:06.617

实际上有一个媒体查询：

```
@media (hover: none) { … } 
```

除了 Firefox，它的[支持也相当不错](https://caniuse.com/#feat=css-media-interaction)。Safari 和 Chrome 是移动设备上最常见的浏览器，它可能就足够了，直到更广泛的采用。

* * *

## 回答 #5

> 赞同：38
> 
> 时间：2012-07-09T00:36:41.337

作为标准的一部分，媒体类型不允许您检测触摸功能：

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

因此，没有办法通过 CSS 或媒体查询*始终如一*地做到这一点，您将不得不求助于 JavaScript。

无需使用 Modernizr，您只需使用纯 JavaScript：

```
<script type="text/javascript">
    var is_touch_device = 'ontouchstart' in document.documentElement;
    if(is_touch_device) alert("touch is enabled!");
</script> 
```

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2017-05-26T09:00:29.220

2017 年，来自第二个答案的 CSS 媒体查询仍然无法在 Firefox 上运行。我找到了一个解决方案：[-moz-touch-enabled](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/-moz-touch-enabled "-moz-touch 启用")

* * *

所以，这里是跨浏览器媒体查询：

```
@media (-moz-touch-enabled: 1), (pointer:coarse) {
    .something {
        its: working;
    }
} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2020-02-01T22:39:50.947

这将起作用。如果它不让我知道

```
@media (hover: none) and (pointer: coarse) {
    /* Touch screen device style goes here */
} 
```

编辑：不再支持按需悬停

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-04-24T17:36:15.297

在所有浏览器全球支持 CSS4 之前，此解决方案将一直有效。当那一天到来时，只需使用 CSS4。但在那之前，这适用于当前的浏览器。

浏览器-util.js

```
export const isMobile = {
  android: () => navigator.userAgent.match(/Android/i),
  blackberry: () => navigator.userAgent.match(/BlackBerry/i),
  ios: () => navigator.userAgent.match(/iPhone|iPad|iPod/i),
  opera: () => navigator.userAgent.match(/Opera Mini/i),
  windows: () => navigator.userAgent.match(/IEMobile/i),
  any: () => (isMobile.android() || isMobile.blackberry() || 
  isMobile.ios() || isMobile.opera() || isMobile.windows())
}; 
```

负载：

老办法：

```
isMobile.any() ? document.getElementsByTagName("body")[0].className += 'is-touch' : null; 
```

较新的方式：

```
isMobile.any() ? document.body.classList.add('is-touch') : null; 
```

如果设备有触摸屏，上面的代码会将“is-touch”类添加到 body 标签中。现在，您的 Web 应用程序中的任何位置，您都可以调用 css for :hover`body:not(.is-touch) the_rest_of_my_css:hover`

例如：

```
button:hover 
```

变成：

```
body:not(.is-touch) button:hover 
```

该解决方案避免使用现代化器，因为现代化器库是一个非常大的库。如果您要做的只是检测触摸屏，那么当最终编译源的大小是要求时，这将是最好的。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2022-02-01T15:29:01.090

我相信使用 CSS（2022 年）查询触摸屏的更好方法是使用`(pointer:coarse)`，并且**绝对不是**使用`(hover:none)`，或组合，正如一些人所建议的那样：`(hover: none) and (pointer: coarse)`，因为`(hover:none)`不可靠 -[有些设备模拟长按（触摸）悬停，](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/hover#syntax)所以`(hover:none)`会不是真的。我在真正的触摸设备（电话，而不是仿真器）上遇到了这样的问题，没有任何其他输入（鼠标或其他东西），“具有”悬停功能，并且我的媒体查询失败。

可能最好的方法是使用 Modernizr，甚至两者都使用（Modernizr 和 CSS，虽然我没有看 Modernizr 做了什么测试，但可能与 CSS 相同:) 像：

```
.modernizr-touch-class .my-class { // properties }
@media (pointer:coarse) { .my-class { // the same properties } } 
```

但总而言之，这被认为不可靠。当您添加[modernizr](https://modernizr.com/download?setclasses) “触摸事件”测试时，它们会显示有关此问题的简短信息（带有几个链接）。这可能是阅读以找到特定问题的最佳解决方案的好东西，然后对其进行测试......

无论如何，我只是想说这`(hover:none)`是不可靠的（2022 年）。:D

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-08T15:19:21.950

使用 JS 或 jQuery 向 body 添加类触摸屏

```
 //allowing mobile only css
    var isMobile = ('ontouchstart' in document.documentElement && navigator.userAgent.match(/Mobi/));
    if(isMobile){
        jQuery("body").attr("class",'touchscreen');
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-30T19:35:31.783

我能够使用此解决此问题

```
@media (hover:none), (hover:on-demand) { 
Your class or ID{
attributes
}    
} 
```

# resources - 从 TabHost.addTab() 引发 ResourceNotFoundException

> ID：11387806
> 
> 赞同：1
> 
> 时间：2012-07-09T00:21:03.147
> 
> 标签：resources, tabs, android-tabhost

我有一个在 ICS 之前可以在 Android 操作系统中使用的音板。有一个 TabHost，其中动态添加了选项卡，每个选项卡都有一个由新 TabContentFactory 创建的不同 ScrollView。

在添加选项卡时，它会将其吐出到引发 ResourceNotFoundException 的日志中。我不*认为*我缺少任何资源，因为它在除 ICS 之外的所有资源上都可以正常工作。

我包括日志和相关代码。还有什么可以帮助缩小问题的范围吗？

**日志**：...

```
2012-07-08 16:26:53.507 E 7979/AndroidRuntime: FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.lysolpionex.HomestarRunnerSoundboard/com.lysolpionex.HomestarRunnerSoundboard.HomestarRunnerSoundboardActivity}: android.content.res.Resources$NotFoundException: Resource ID #0x0
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2205)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
    at android.app.ActivityThread.access$600(ActivityThread.java:139)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:156)
    at android.app.ActivityThread.main(ActivityThread.java:5008)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x0
    at android.content.res.Resources.getValue(Resources.java:1105)
    at android.content.res.Resources.loadXmlResourceParser(Resources.java:2344)
    at android.content.res.Resources.getLayout(Resources.java:944)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
    at android.widget.TabHost$LabelAndIconIndicatorStrategy.createIndicatorView(TabHost.java:579)
    at android.widget.TabHost.addTab(TabHost.java:227)
... 
```

**创建我的标签主机、向其添加标签等的代码是：**

```
private ViewGroup createTABForm() {
    //construct the TAB host
    TabHost tabHost = new TabHost(this);
    tabHost.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

    //the tabHost needs a tabWidget, a container for the visible tabs
    TabWidget tabWidget = new TabWidget(this);
    tabWidget.setId(android.R.id.tabs);
    HorizontalScrollView horizScrollView = new HorizontalScrollView(this);
    horizScrollView.addView(tabWidget);
    tabHost.addView(horizScrollView, new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

    //the tabHost needs a frameLayout for the views associated with each visible tab
    FrameLayout frameLayout = new FrameLayout(this);
    frameLayout.setId(android.R.id.tabcontent);
    frameLayout.setPadding(0, 100, 0, 0);
    tabHost.addView(frameLayout, new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    //call setup, since it's not initialized in XML
    tabHost.setup();

    /*-----------------*
     * set up the tabs *
     *-----------------*/
    Iterator<String> namesItr = characters.getNamesItr();
    Iterator<Drawable> drawableItr = characters.getDrawableItr();

    String name = null; //the current character's name
    final Context context = this;
    while(namesItr.hasNext()){  //iterate over all the characters
        name = namesItr.next();   //get this character's name
        final Drawable drawable = drawableItr.next();//the current character's icon
        final String finalName = name;  //silly final variable to satisfy compiler

        //set up the icons
        TabHost.TabSpec tabSpec = tabHost.newTabSpec(name+" Tab");
        tabSpec.setIndicator(name, drawable);

        tabSpec.setContent(new TabHost.TabContentFactory() {

            @Override
            public ScrollView createTabContent(String tag) {
                LinearLayout panel = new LinearLayout(HomestarRunnerSoundboardActivity.this);
                panel.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                panel.setOrientation(LinearLayout.VERTICAL);

                //iterate over all the sounds for this character
                Iterator<String> titlesItr = characters.getTitlesItrForChar(finalName);
                Iterator<Integer> idsItr = characters.getIDsItrForChar(finalName);
                String title = null;

                while(titlesItr.hasNext() && idsItr.hasNext()){
                    title = titlesItr.next();

                    final Button button = new Button(HomestarRunnerSoundboardActivity.this);
                    button.setText(title);
                    button.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
                    button.setGravity(Gravity.CENTER);
                    final String finalTitle = title;
                    final int finalID = idsItr.next();

                    button.setOnClickListener(new View.OnClickListener(){
                        @Override
                        public void onClick(View v) {
                            SoundManager.playSound(finalTitle);
                        }
                    });

                    /*---------------------------------------------------------------------------
                     * Sets the long-click action, in this case to save a sound and set it as a *
                     * ringtone/notification                                                    *
                     *--------------------------------------------------------------------------*/
                    button.setOnLongClickListener(new View.OnLongClickListener() {
                        @Override
                        public boolean onLongClick(View v) {
                        //save the file to the sd card
                        if(setFileAsRingAndNotifSound(finalID, finalTitle)){
                            Toast.makeText(HomestarRunnerSoundboardActivity.this, "Sound added to ringtones/alerts", Toast.LENGTH_SHORT).show();
                        }
                        else{
                            Toast.makeText(HomestarRunnerSoundboardActivity.this, "Error adding sound to ringtones/alerts", Toast.LENGTH_LONG).show();
                            Log.e(Utils.hsrTAG, "Error setting file as ringtone/notification sound.");
                        }
                        return true;
                      }
                    });
                    button.setMinWidth(m_nScreenW); //do I need this?
                    panel.addView(button);
                }

                ScrollView scrollView = new ScrollView(context);
                scrollView.addView(panel);

                return scrollView;
            }
        });

        tabHost.addTab(tabSpec);
    }

    return tabHost;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:23:25.897

我有同样的问题，但有点不同，在stackoverflow中搜索我发现了这个：我认为它可以帮助你

[Honeycomb 和 TabHost 规格](https://stackoverflow.com/questions/5408452/honeycomb-and-tabhost-specs)

# objective-c - 我怎样才能让我的二传手设置？

> ID：11387808
> 
> 赞同：0
> 
> 时间：2012-07-09T00:21:19.040
> 
> 标签：objective-c, ios, xcode, setter

我正在尝试对我的`arrayWithCurrentLadder`属性进行延迟实例化，以便我的数组至少被分配和启动一次。但是，似乎我的 setter 从未真正被调用过，因为当我尝试对数组中的对象做任何事情时，什么都没有发生，所以我决定尝试`NSLog`使用数组中的一个对象来确定我是否获得了实际值（我在那行代码旁边加了星号，这样你就可以看到了），调试器说`(null)`，所以我假设我的设置器实际上没有设置。我在我的设置器中添加了 random `NSLog`s 以再次查看，但消息甚至没有出现在调试器中。为什么我的二传手不设置？

```
#import "LViewController.h"

@interface LViewController ()
    @property (nonatomic) BOOL firstLadder; 
    @property (nonatomic, weak) NSMutableArray *arrayWithCurrentLadder;
    @property (weak, nonatomic) IBOutlet UIView *playingView;//connects playingView to LViewController
@end

@implementation LViewController

    @synthesize playingView = _playingView;
    @synthesize firstLadder = _firstLadder;
    @synthesize arrayWithCurrentLadder = _arrayWithCurrentLadder;

    -(void)setArrayWithCurrentLadder:(NSMutableArray *)arrayWithCurrentLadder {
        if(!_arrayWithCurrentLadder)
            _arrayWithCurrentLadder = [NSMutableArray arrayWithCapacity:10];

        NSLog(@"kgjfkjg");

        _arrayWithCurrentLadder = arrayWithCurrentLadder;

        NSLog(@"dkfjdk");

    }

    - (IBAction)buildLadder:(UIButton *)sender {
        if (self.firstLadder) {

        *******************************************************************************************
            NSLog(@"%@", [[self.arrayWithCurrentLadder lastObject] frame].origin.x);
        *******************************************************************************************    

            if (sender.frame.origin.x == [[self.arrayWithCurrentLadder lastObject] frame].origin.x) {
                sender.backgroundColor = [UIColor redColor];
                [self.arrayWithCurrentLadder addObject:sender];
            }   
        }

    }

    - (IBAction)startingLadder:(UIButton *)sender {
        if (!self.firstLadder) {
            [self.arrayWithCurrentLadder addObject:sender];
        }

        sender.backgroundColor = [UIColor redColor];
        self.firstLadder = YES;
    }

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:25:07.013

您应该覆盖 getter 而不是 setter：

```
- (NSMutableArray *)arrayWithCurrentLadder
{
    if (nil == _arrayWithCurrentLadder) {
        _arrayWithCurrentLadder = [[NSMutableArray arrayWithCapacity:10] retain];
    }

    return _arrayWithCurrentLadder;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:34:05.897

您的 setter 可能设置得很好，但您的`@property`声明意味着该对象没有被保留。

假设 ARC，a 的声明`weak` `@property`不会做你想做的事；除非您有其他东西强烈引用该对象，否则 ARC 运行时会在退出该方法时非常高兴地释放它。

另请注意，以下内容毫无意义；if() 测试和分配实际上是无操作的（并且在手动保留释放下会泄漏）。

```
if (!foo) foo = [[... alloc] init];
foo = somethingElse; 
```

# php - Nginx - 重写/到子文件夹

> ID：11387809
> 
> 赞同：0
> 
> 时间：2012-07-09T00:21:27.833
> 
> 标签：php, nginx

我有一个站点曾经位于文档根目录的根级别。我将它移动到新文档根目录中的子文件夹I。所有链接都是绝对的（/assets/styles.css、/folder/file.php）。我的子文件夹位于 example.com/sub/。有什么办法可以让 Nginx 将 /assets 重写为 example.com/sub/assets？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:38:48.870

你应该在你的 nginx.conf 中有这样的东西

```
 location /assets {
        root   /var/www/example.com/documentroot/;
        ...
    } 
```

它告诉 NginX 从该目录中获取“资产”。除非我弄错了，否则您应该简单地编辑“/var/www/example.com/documentroot/sub/”中的根文件夹。

或者，你在那里有一个完整的根：

```
 location / {
        root   /var/www/example.com/documentroot/;
        index index.php;
        ...
    } 
```

同样，您只需将“sub/”添加到“documentroot/”。

最后，如果您只想移动“资产”，请在 nginx.conf 中编辑或添加“位置/资产”配置节。

# database - 在mysql中存储会话

> ID：11387810
> 
> 赞同：1
> 
> 时间：2012-07-09T00:22:20.657
> 
> 标签：database, session, cookies

我听说过将会话存储在数据库中。有什么主要优势吗？我听说标准会话不适用于集群服务器。我在 MediaTemple 主持，这会是这个主持人的情况吗？

另外，如果我使用 session_only_cookie 并且我的用户禁用了 cookie，那么正常的会话会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:55:18.877

优点是过期会话的垃圾收集更容易一些，如果您有大量活动会话，会话数据检索可能会更快一些，以及多个服务器之间潜在的会话存储共享，正如您所提到的。

如果启用，会话将不适用于禁用 cookie 的用户`session.use_only_cookies`，但禁用它会引入通过复制 URL 泄漏会话 ID 的风险，通常不推荐；大多数禁用 cookie 的人也意识到后果，或者很快意识到它们。

# linux - 在嵌入式 Linux 中启用 GPIO 唤醒

> ID：11387824
> 
> 赞同：1
> 
> 时间：2012-07-09T00:26:41.637
> 
> 标签：linux, embedded-linux, interrupt, gpio

我正在尝试在嵌入式 Linux 上为 GPIO 启用唤醒事件，在搜索了一段时间后我想出了如何做到这一点，但是当我尝试这个时：

```
echo enabled > /sys/class/gpio/gpio<n>/power/wakeup 
```

我明白了

```
write error: Invalid argument 
```

这是否意味着它不受硬件支持？还是我需要在内核中启用某些东西？

编辑：

只是为了记录，sysfs GPIO已启用并且工作正常，我可以读/写GPIO值，但我似乎无法启用唤醒事件，我一直在阅读内核[文档](http://www.kernel.org/doc/Documentation/gpio.txt)，它说：

> “输入通常可以用作 IRQ 信号，通常是边沿触发，但有时是电平触发。**此类 IRQ 可配置为系统唤醒事件**，以将系统从低功耗状态唤醒。”

所以我想知道，我是否需要在内核中为 GPIO 配置唤醒事件？如果硬件不支持它，为什么我在**sysfs/class/gpio/gpio#/power/wakeup**下有一个唤醒文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:18:43.853

确保您的 GPIO 驱动程序（可能特定于您的板）处理唤醒功能。

# python - 回文函数在 Python 中不起作用

> ID：11387830
> 
> 赞同：2
> 
> 时间：2012-07-09T00:28:27.340
> 
> 标签：python, python-2.7

以下是更大计划的一部分。

```
wordStr = open("words.txt",'rU')

def isPalindrome(wordStr):
    palindromeCount = 0
    for word in wordStr:
        if word == word[::-1]:
            palindromeCount += 1
    print palindromeCount

isPalindrome(wordStr) 
```

words.txt 包含数千个单词，它与程序位于同一文件夹中。使用此功能，我试图通过并计算文本文件中回文（​​前后拼写相同）的单词数。它每次都简单地返回 0 ，甚至从未进入 if 语句，我不知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T00:33:05.050

`for word in wordStr`将遍历 wordStr 中的**行**。可能您的每一行都有一个行尾标记，例如`\n`. 如果你`print repr(word)`，你可能会看到它。

我会尝试

```
for word in wordStr:
    print repr(word)
    word = word.strip()
    [etc] 
```

作为第一关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T00:37:11.477

您需要从各个行中删除额外的换行符并让您的函数返回一个值：

```
wordFile = open("words.txt",'rU')

def PalindromeCount(wordFile):
    palindromeCount = 0
    for word in wordFile:
        word = word.strip()
        if word == word[::-1]:
            palindromeCount += 1
    return palindromeCount 
```

当我在这些数据上运行它时：

```
meatloaf
radar
ardra
fish 
```

我得到这个结果： `2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T05:24:54.713

```
sum(word == word[::-1] for word in wordStr.read().split()) 
```

# android - Android、Phonegap 和相机：我的应用程序被杀后如何获取图片？

> ID：11387833
> 
> 赞同：1
> 
> 时间：2012-07-09T00:29:18.360
> 
> 标签：android, cordova, camera

编辑：

对于那些现在看到这个的人，我们已经解决了这个问题。有关解释和可能的解决方案，请参阅我对[这个问题](https://stackoverflow.com/questions/11544992/taking-a-picture-from-the-camera-fails-20-of-the-time/11546276#11546276)和[这个问题的回答。](https://stackoverflow.com/questions/11505127/phonegap-does-not-restore-the-application-after-camera-activity/11544431#11544431)

好吧，我以为我已经解决了这个问题，但我没有。

发生的事情与在 Android 中启动相机很常见：一旦您拍照，内存需求会导致系统终止启动相机的应用程序。我的困难是，在我的应用程序被杀死后，我无法获取最近捕获的图像的 URI。我在搜索中看到了很多针对本机 Android 应用程序的解决方案，但对于 Phonegap 却没有。

由于相机开始的页面不是活动默认加载到的页面这一事实，这使情况变得更加复杂。当应用重启时，它想在这个应用的登录页面重启，而不是需要图片数据的URI的页面。

我让应用程序在它死之前保存它所在的最后一页，并在它启动时回想一下。我认为这会解决问题，但相机的回调仍然没有被调用。这可能是因为即使它返回到同一页面，它也返回到该页面的不同实例。

让我向您展示我到目前为止所拥有的。

这是调用相机的代码：

```
 function capturePhoto(){
        navigator.camera.getPicture(onPhotoURISuccess, onFail,
            { quality: 20, destinationType: Camera.DestinationType.FILE_URI } );
    };

    function onPhotoURISuccess(imageURI) {
        //Do some stuff with the image, like save the URI in localStorage
    } 
```

很基本，没什么特别的。只是 onPhotoURISuccess() 永远不会被调用。这是我保存和重新加载最后一页的方法。这一切都是在 DroidGap 活动中用 Java 完成的：

```
 //Save the last page that the user was on
    @Override
    public void onSaveInstanceState(Bundle savedState) {
        super.onSaveInstanceState(savedState);

        savedState.putString("lastPage", appView.getUrl());
    }

    //Recall the page
    @Override
    public void onCreate(Bundle savedState) {
        super.onCreate(savedState);

        //The default page is the login page
        String pageToLoad = "file:///android_asset/www/login.html";

        if(savedState != null && savedState.containsKey("lastPage")) {
            pageToLoad = savedState.getString("lastPage");
        }

        super.loadUrl(pageToLoad);
    } 
```

所以，到目前为止，我的想法是在 DroidGap 活动中以某种方式从相机中获取 onActivityResult，但我不确定它是如何工作的，我宁愿不为它创建一个 Phonegap 插件，因为我想保留代码尽可能跨平台。

另一个想法是从Phonegap 以某种方式告诉相机相对于应用程序的目录将图片保存在哪里。然后，需要图片的页面就可以抓取指定目录中的任何一张图片。但是，我还没有找到一种方法来做到这一点。

抱歉，如果我在搜索中忽略了某些内容，这是一个重复的问题，在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:54:37.833

对于那些现在看到这个的人，我们已经解决了这个问题。有关解释和可能的解决方案，请参阅我对这个问题和这个问题的回答。

# macos - Aptana 3 Studio 在启动 OSX Lion 时崩溃

> ID：11387834
> 
> 赞同：1
> 
> 时间：2012-07-09T00:29:26.277
> 
> 标签：macos, crash, aptana, aptana3

每次我在 OSX Lion 10.7.4 上启动 Aptana 3 Studio 时，它都会崩溃。我尝试使用 AppCleaner 删除 Aptana 3，然后重新下载并重新安装它。每次我尝试启动时仍然崩溃。

崩溃报告在这里： http: [//pastebin.com/3HzPvZEZ](http://pastebin.com/3HzPvZEZ)

我能做些什么！？我需要让 Aptana 为学校工作！

# magento - 如何仅显示分配给产品属性值？

> ID：11387835
> 
> 赞同：0
> 
> 时间：2012-07-09T00:29:45.270
> 
> 标签：magento

我正在使用[https://github.com/witrin/magento-attribute-option-image/](https://github.com/witrin/magento-attribute-option-image/)并尝试使用此代码获取产品视图页面图像和属性缩略图

```
$_product = $this->getProduct();
$_attribute = $_product->getResource()->getAttribute('color');
$_options = $_attribute->getSource()->getAllOptions(false);

foreach ($_options as $_option) {
    echo $_option['image'];
    echo $_option['thumbnail'];
} 
```

所以它显示了该属性的所有选项，而不是分配给产品

如何显示仅分配给产品值的属性？

我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:38:52.170

您应该通过以下方式更正它：

```
$_product = $this->getProduct();
$_attribute = $_product->getResource()->getAttribute('color');
$_options = $_attribute->getSource()->getAllOptions(false);

foreach ($_options as $_option) {

    //is this value assigned to the current product?
    if ($_product->getColor() == $_option['value']) {
        echo $_option['image'];
        echo $_option['thumbnail'];
        break; //we found it, no reason to continue searching
    }
} 
```

# ruby-on-rails - ActiveRecord 通过针对 STI 类的范围构建错误类的实例

> ID：11387836
> 
> 赞同：2
> 
> 时间：2012-07-09T00:29:47.807
> 
> 标签：ruby-on-rails, scope, polymorphic-associations, arel, sti

我希望能够`build`通过其 STI 类型在以特定模型类为目标的范围上调用该方法，并让 ActiveRecord 构建正确类的实例。

```
class LineItem < ActiveRecord::Base
  scope :discount, where(type: 'DiscountLineItem')
end

class DiscountLineItem < LineItem; end

> LineItem.discount.build # Expect an instance of DiscountLineItem here
=> #<LineItem ...> 
```

在这里，我期望的是 的实例`DiscountLineItem`，而不是 的实例`LineItem`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T00:43:51.623

尽管 ActiveRecord 没有将对象实例化为正确的类，但它确实正确设置了类型。您基本上有两种解决方法：

1）创建对象，然后从数据库中重新加载它：

```
item = LineItem.discount.create(attrs...)
item = LineItem.find(item.id) 
```

2) 使用 STI 类并直接从中构建对象：

```
DiscountLineItem.build 
```

有了 ActiveRecord 可以做的所有事情，这似乎是一种毫无意义的限制，并且可能不会太难改变。现在你激起了我的兴趣:)

**更新：**

这是最近[添加到 Rails 4.0](https://github.com/rails/rails/commit/89b5b31cc4f8407f648a2447665ef23f9024e8a5)的，带有以下提交消息：

> 允许您执行 BaseClass.new(:type => "SubClass") 以及 parent.children.build(:type => "SubClass") 或 parent.build_child 来初始化 STI 子类。确保类名是一个有效的类，并且它在关联所期望的超类的祖先中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T00:44:10.743

暂时忘掉吧`build`。如果你有一些`LineItem` `l`，你`l.discount`会得到`LineItem`实例，而不是`DiscountLineItem`实例。如果你想获取`DiscountLineItem`实例，我建议将范围转换为方法

```
def self.discount
  where(type: 'DiscountLineItem').map { |l| l.becomes(l.type.constantize) }
end 
```

现在您将获得一组`DiscountLineItem`实例。

# java - 如何正确调整数字？

> ID：11387838
> 
> 赞同：1
> 
> 时间：2012-07-09T00:29:51.527
> 
> 标签：java

我怎样才能使一些数字正确合理？我不明白。我对Java真的很陌生。:-/ 例如，每当我尝试使此代码正确合理时，它都会给我错误。这是我找到的一些示例代码：

```
import java.util.Scanner;

 public class JFindAlphabete
{
  static Scanner sc = new Scanner(System.in                                                      );

public static void main(String[] Theory)
{

    JWaffles MyWaffles = new JWaffles();

    MyWaffles.ProgramHeading();

    System.out.println("Enter a string:"                                                                                     );
    String SentenceContents = sc.nextLine(                                                                                   );

    int SpaceCount       = SentenceContents.length() - SentenceContents.replaceAll(" ", "").length(                          );
    int VowelCount       = SentenceContents.length() - SentenceContents.replaceAll("(?i)[aeiou]", "").length(                );
    int ConsonantCount   = SentenceContents.length() - SentenceContents.replaceAll("(?i)(?=[a-z])[^aeiou]", "").length(      );
    int SpecialCharCount = SentenceContents.length() - SentenceContents.replaceAll("(?i)[^a-z ]", "").length(                );
    int WordCount        = SentenceContents.trim().split("\\s+").length;

    System.out.println("There are " + VowelCount + " vowels in this sentance"                  );
    System.out.println("There are " + ConsonantCount + " consonants in this sentance"          );
    System.out.println("There are " + SpaceCount + " spaces in this sentance"                  );
    System.out.println("There are " + SpecialCharCount + " special characters in this sentance");
    System.out.println("There are " + WordCount + " words in this sentance"                    );

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:32:50.467

使用`System.out.format`该类，例如，您可以在[http://docs.oracle.com/javase/tutorial/java/data/numberformat.html](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)`System.out.format("There are %2d vowels in this sentence", vowelCount)`阅读一个很好的教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T00:33:03.367

您可以使用`System.out`'[`printf`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)方法代替`println`，并使用格式选项来正确调整您打印的值：

```
System.out.printf("There are %5d vowels in this sentance\n"     , VowelCount);
System.out.printf("There are %5d consonants in this sentance\n" , ConsonantCount); 
```

等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T00:32:28.640

看看[`java.util.Formatter`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)。

它允许您根据预定义的格式进行打印，包括固定宽度的数字（带有空格填充）。

这可能是您最接近“正确证明”这些数字的方法。

# c# - 复选框列表 - 动态列表 C#/XAML

> ID：11387841
> 
> 赞同：0
> 
> 时间：2012-07-09T00:30:08.660
> 
> 标签：c#, wpf, xaml

我有 3 张桌子

**用户：**

```
 id
  name 
```

**偏爱：**

```
 id:
  title: 
```

**用户偏好：**

```
 user_id
  preference_id 
```

如何为保存数据创建视图模型并创建这样的表单？

```
New User

Name
|------------|
|textbox     | 
|------------|

Your Preferences
[ ] Preference1
[ ] Preference2
[ ] Preference3
..
[ ] PreferenceN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:29:57.973

我相信，它应该看起来像这样：

使用 C# 的元代码

```
// You can realize INotificationChanged here too if you need
sealed class Preference 
{
  public Preference(string name, bool isSelected)
  {
    Name = name; 
    IsSelected = isSelected;
  }

  public string Name { get; private set; }
  public bool IsSelected { get; set; }  
}

sealed class User : INotificationChanged
{
  private ObservaleCollection<Preference> viewPreferences;

  public event PropertyChangedEventHandler PropertyChanged;

  public User(PreferenceCollection preferences)
  {
    PreferenceTitle = preferences.Title;
    // put info to collection
  }

  public ObservaleCollection<Preference> Preferences
  {
    get { return preferences; }
  }

  // You can remove set if you don't want to set it directly
  public UserId { get; set; }
  public UserName { get; set; }
  public PreferenceTitle { get; private set; }

  // Use it to update data in view
  protected void OnPropertyChanged(string name)
  {
      PropertyChangedEventHandler handler = PropertyChanged;
      if (handler != null)
      {
          handler(this, new PropertyChangedEventArgs(name));
      }
  }
} 
```

它只是一个模型的模型。当然，您需要添加验证，保存数据逻辑并将属性绑定到 xaml 表单

# java - 将大字符串拆分为 SET 项

> ID：11387844
> 
> 赞同：11
> 
> 时间：2012-07-09T00:30:56.903
> 
> 标签：java, set

> **可能重复：**
> [Java - 轻松将数组转换为集合](https://stackoverflow.com/questions/3064423/java-easily-convert-array-to-set)

有人可以帮助我使用可用于 SET 而不是 ArrayList 的以下表达式的版本吗？

```
ArrayList<String> items = new ArrayList<String>(Arrays.asList(comment.split(", "))); 
```

PS：评论是一大串用`","`. 需要通过将它们与逗号部分分开来制作单词的单个项目。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-09T00:35:23.333

您使用相同的方法，只需将转换后的数组传递给[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)实现的构造函数：

```
Set<String> items = new HashSet<String>(Arrays.asList(comment.split(", "))); 
```

没有第三方库就不可能进一步简化，但没有缺点，因为`Arrays.asList`在恒定时间*O(1)*中执行。

# objective-c - 一次访问 NSArray 的两个元素

> ID：11387847
> 
> 赞同：-1
> 
> 时间：2012-07-09T00:31:04.053
> 
> 标签：objective-c, cocoa, nsmutablearray

我正在使用 an`NSMutableArray`来保存一些对象，并且我需要在同一行中访问元素 at`i`和元素 at 。`i+1`另外，有没有办法访问`NSMutableArray`'s 的长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:33:53.767

你可以访问所有 NSArray 的方法，包括`objectAtIndex:`, 和`count`. 然后你需要一个传统的c循环：

```
int count = [myArray count] - 1; // -1 so we don't exceed bounds by getting i+1 on last element
for(int i = 0; i < count; i++) {
  id thisElement = [myArray objectAtIndex:i];
  id theNextElem = [myArray objectAtIndex:i+1];
  // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T00:33:47.883

试试这个：

```
for(int i = 0; i < [arry count]; i++)
{
  [arry objectAtIndex:i];
  [arry objectAtIndex:i+1];
} 
```

至于你的第二个问题，是的，使用选择器`count`。我认为您需要花一些时间阅读`NSMutableArray`文档。

# javascript - setTimeout() 语法？

> ID：11387848
> 
> 赞同：0
> 
> 时间：2012-07-09T00:31:15.240
> 
> 标签：javascript, jquery

我无法让以下 setTimeouts 工作：

```
$('a').click(function(){
    if( last ) {
        if( ($(this).attr('id') == last.attr('id')) ) {
            setTimeout( function(){ 
                $(this).parent().parent().css('visibility','hidden'); 
            },500); 
            setTimeout( function(){ 
                last.parent().parent().css('visibility','hidden'); 
            },500); 
            found++; 
        } 
        if (found == 3) { 
            alert('You won a sticker!'); 
            window.location.href = "#play2"; 
            location.reload(); //resets found to 0 
        } last = null; 
    } 
    else { 
        last = $(this) 
    } 
}); 
```

setTimeout 中的函数可以正常工作，因此它不是问题。我想知道我的语法是否有问题。但是，我找不到任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:34:41.137

在第一个`setTimeout` `this === window`. 您可能想要创建一个闭包

```
var that = this
setTimeout( function(){
    $(that).parent().parent().css('visibility','hidden');
 },500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T00:55:23.690

这不是`setTimeout()`语法问题。问题在于，在函数`this`内设置取决于该函数的调用方式，并且当您通过`setTimeout()`then调用函数时，`this`不再是单击事件中的 DOM 元素。您可以在传递给的函数*之外*保留对它的引用`setTimeout()`，这也可以节省您选择`$(this)`两次（如果您在函数和`if`语句中都使用保存的引用）。我看不出第二个有什么问题，`setTimeout()`因为它已经使用了函数外部的引用。

```
 var $this = $(this);
    if( ($this.attr('id') == last.attr('id')) ) {
        setTimeout( function(){ 
            $this.parent().parent().css('visibility','hidden'); 
        },500); 
        setTimeout( function(){ 
            last.parent().parent().css('visibility','hidden'); 
        },500); 
        found++; 
    } 
```

或者，如果你使用`.hide()`那么你可以使用 jQuery 的动画队列来`.delay()`代替`setTimeout()`：

```
 $(this).parent().parent().delay(500).hide(1); 
```

使代码更整洁，但`.hide()`会设置`display:none`而不是`visibility:hidden`，我承认这可能不是你想要的（你不能使用`.delay()`with`.css()`因为`.css()`不是动画方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T00:55:54.167

`this`处理程序内部的值`click`是对被单击元素的引用。`this`回调内部的值`setTimeout`是全局`window`对象。关键是函数内部的**值`this`是上下文相关的**（即它取决于**函数的调用方式**）。

您需要保存`this`对外部范围的值的引用，以便您可以在内部范围内使用它：

```
if ($(this).attr('id') == last.attr('id')) {
    var that = $(this);
    setTimeout( function() { 
        that.parent().parent().css('visibility','hidden'); 
    },500); 
    // ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T19:00:43.817

使用 jQuery 习语：

```
setTimeout(jQuery.proxy(function(){
  $(this).parent().parent().css('visibility','hidden');
}, this), 500); 
```

标准 JavaScript：

```
setTimeout(function(){
  $(this).parent().parent().css('visibility','hidden');
}.bind(this), 500); 
```

# javascript - 在 javascript 中更快地检查多个 div 的 xy 坐标或解析坐标的存储数组？

> ID：11387849
> 
> 赞同：-1
> 
> 时间：2012-07-09T00:31:23.657
> 
> 标签：javascript, arrays, coordinates

我正在制作一个 js 函数：
- 创建一个新 div
- 将新创建的 div 的 xy 坐标与其他已经存在的div 进行比较
- 如果新 div 的默认坐标已被现有 div 占据，则对角碰撞新 div

所以，如果我单击一个按钮并创建一个新的 div（一个可拖动的框），我只想快速扫描页面上已经存在的所有框的坐标，如果我找到一个已经有坐标的框放置在页面上的新框，将新框向下和向左一点。我可能还会把它放在一个循环中，以防最初的碰撞将它完全放到另一个盒子上。

我也在使用 jquery，如果这能得到回应。我已经知道如何进行编码，我的问题是方法。

我想知道哪个会更快地进行比较：

*   将所有现有的 div 坐标对存储在 js 数组中（当拖动任何 div/框时会更新，实际上是先发制人地使用下一种方法），然后运行一个函数检查索引是否存在

    - 或 -

*   一个循环遍历所有盒子 div 的 js 函数（它们都有一个共同的 css 类），直接在页面上检查所有现有的 div 坐标（而不是寻找存储在数组中的它们）

出于任何其他原因，我不需要将坐标存储在数组中，因此如果它一开始就不是更好的方法，那将是不必要的。将坐标存储在数组中基本上与后一种方法执行相同的过程，但我很好奇通过该数组的 javascript 是否会比首先检查坐标的过程更快。

我猜性能差异不会特别显着，但我很好奇哪种方法更明智。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:41:52.630

我不认为你的问题很清楚。当您只想检查被占用的 div 时，您的第一种方法是最快的，但是当您想检查最近的对时，这是一个众所周知的计算问题：[http](http://en.wikipedia.org/wiki/Closest_pair_of_points_problem) ://en.wikipedia.org/wiki/Closest_pair_of_points_problem 。

编辑：为什么不对潜水进行排序并将新的 div 添加到末尾？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:46:04.697

您可能会发现 elementFromPoint 可用于此目的

[https://developer.mozilla.org/En/DOM:document.elementFromPoint](https://developer.mozilla.org/En/DOM:document.elementFromPoint)

它仅在给定点为您提供最前面的元素。在您的情况下，这可能有效。只需确保在将新 div 放入 DOM 树**之前进行检查。**

我不确定这是否适用于绝对定位元素，当然还有浏览器支持。

# c# - 使用任务并行库的更好方法是什么

> ID：11387853
> 
> 赞同：7
> 
> 时间：2012-07-09T00:31:58.603
> 
> 标签：c#, .net, task-parallel-library, parallel.foreach

我刚开始使用 TPL，我想同时调用多个 Web 服务。据我所知，我看到了两种方法。

要么`Parallel.ForEach`：

```
List<ServiceMemberBase> list = new List<ServiceMemberBase>(); //Take list from somewhere.
        Parallel.ForEach(list, member =>
            {
                var result = Proxy.Invoke(member);
                //...
                //Do stuff with the result
                //...
            }); 
```

或者`Task<T>`：

```
List<ServiceMemberBase> list = new List<ServiceMemberBase>(); //Take list from somewhere.
        ForEach(var member in list)
        {
            Task<MemberResult>.Factory.StartNew(() => proxy.Invoke(member));
        }

        //Wait for all tasks to finish.
        //Process the result objects. 
```

不管语法是否正确，这些是等价的吗？

它们会产生相同的结果吗？如果不是，为什么？哪个更可取？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T00:45:27.330

对于您讨论的代码和用例，这两种方法本质上是等效的。

当您必须将输入范围划分为多个任务（此处不适用）时，Parallel.ForEach 很有用，或者更容易同步合并多个独立并行操作的结果（可能适用于此？）。

无论如何，您已经正确地注意到，在 Parallel.ForEach 案例中，您不必手动同步等待完成，而如果您手动启动任务，则必须自己管理该同步。在这种情况下，您可能会使用类似`Task.WaitAll(...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T01:02:23.167

如果不考虑或查看输出，我无法确定两者是否相同。但是我怀疑它们是否有那么大的不同。关于哪个更好的问题是主观的，具体取决于场景。回答哪个更可取也是非常主观的，在您提供的场景中，我会说我更喜欢 Parallel.ForEach**因为我可以阅读它，**但如果您的开发团队不习惯 Parallel 库，那么第二个版本就是那个去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T06:30:13.763

在两段代码之间，`Parallel.ForEach()`效率会更高，因为它`Task`一个接一个地处理多个项目。

但是他们都将使用尽可能多的线程`ThreadPool`，这在这种情况下不是一个好主意。那是因为`ThreadPool`如果你有非常短的、受 CPU 限制的 s，那么它擅长猜测最佳线程数`Task`，而这里的情况远非如此。

正因为如此，我认为最好的选择是将并行度手动限制为一个小数字（您必须测量以找出哪个数字可以提供最佳结果）：

```
List<ServiceMemberBase> list = …; //Take list from somewhere.
Parallel.ForEach(list, new ParallelOptions { MaxDegreeOfParallelism = 10 },
member =>
{
    var result = Proxy.Invoke(member);
    //...
    //Do stuff with the result
    //...
}); 
```

如果您可以异步执行 Web 服务调用，效率会更高。这样做并同时限制并行度并不是很容易，除非您使用的是 C# 5。如果您使用的是 C# 5，并且您还更新`Proxy`以支持基于任务的异步模式 (TAP)，您可以使用 TPL 数据流更有效地执行您的代码：

```
var actionBlock = new ActionBlock<ServiceMemberBase>(
    async member =>
    {
        var result = await Proxy.InvokeAsync(member);
        //...
        //Do stuff with the result
        //...
    }
    new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = 10 }); 
```

# mysql - JSON.parse 错误，不会解析我只是 JSON.stringify 的东西

> ID：11387864
> 
> 赞同：0
> 
> 时间：2012-07-09T00:33:10.013
> 
> 标签：mysql, json, node.js

所以我有一个非常大的对象，我用它来控制 nodejs 应用程序中的东西。有时我将此对象存储在数据库 [mysql] 中，因此如果进程崩溃或重新启动并且某些内容已更改，则将保存更改。很简单。

对象是这样的：[http ://snippi.com/s/z5nq0v5](http://snippi.com/s/z5nq0v5)

它被定义为 global.config。

所以要存储，我使用我的保存功能：

```
 client.query('SELECT data FROM settings WHERE (id = \''+ config.room +'\')',
        function(a, b, c) {
            if (!b[0]) {
                client.query('INSERT INTO settings (id, data) VALUES (?, ?)', [config.room, JSON.stringify(config)],
                    function (a) { if (a) throw a;Log("Saved settings"); }
                );
            } else {
                client.query('UPDATE settings SET data="?" WHERE id="'+config.room+'"',
                    [JSON.stringify(config)],
                function (a) { if (a) throw a;Log("Saved settings"); }
            );
            }
        }
    ); 
```

这似乎有效。但是，当我在更改某些内容后尝试加载它并保存时，出现错误。这是加载代码：

```
 client.query('SELECT data FROM settings WHERE (id = \''+ config.room +'\')',
        function(a, b, c) {
            console.log(b.length);
            if (a) return console.log(a);
            if (!b[0]) return db.save("settings");
            console.log(b[0].data);
            config = JSON.parse(b[0].data);
            Log("Loaded Settings");
        }
    ); 
```

如您所见，我真正要做的只是调用我之前字符串化的对象的 JSON.parse()。但是我遇到了一个错误。错误是

```
undefined:1
3Th0seB310W","ui
^
SyntaxError: Unexpected token ' 
```

但是在它所谈论的区域中没有'。如果你指的是那里的物体。

这些是 console.log(b[0].data) 的结果：[http://snippi.com/s/tknlgyo](http://snippi.com/s/tknlgyo)

任何帮助将不胜感激，如果需要，我会添加更多信息。注意：auth 码明显变了，只不过是像下面的 uid 一样的 hex 值，只是更长了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T00:47:28.850

console.log 的输出有单引号。这意味着您尝试解析的字符串具有它们。在解析之前剥离它们。

例如，这是一个使用节点的会话：

```
> console.log("abc")
abc 
```

您发布的代码段显示了单引号。节点没有把它们放在那里，所以它们一定是更早地获取了你的数据。确保在生成和存储字符串时抑制它们。

# c++ - 使用运算符重载打印链表

> ID：11387865
> 
> 赞同：2
> 
> 时间：2012-07-09T00:33:33.223
> 
> 标签：c++, singly-linked-list

我正在研究一个单链表。列表中的几个组件尚未在 main 中设置。但是，我正在制定类中的定义，并希望重载 cout << 运算符以打印列表的内容。

queue.cpp 中的最后一个定义是我试图让它逐个打印每个节点。我成功地重载了 cin 和 cout 以使用 Game 类，但我需要让 cout 使用 Queue 类来打印节点。我感谢所有的帮助/建议和反馈。

到目前为止，这是我的代码：

队列.h

```
#include <iostream>
#include <string>

#ifndef QUEUE_H_
#define QUEUE_H_

class Game
{
private:
    std::string title;
public:
    Game(const std::string & s);
    Game(); //default constructor
    ~Game();    //destructor 
    friend std::ostream & operator<<(std::ostream & os, const Game & g);  //allows cout << to be used object
    friend std::istream & operator>>(std::istream & is, Game & g);        //allows cin >> to be used with object
};

class Queue
{
private:
    struct Node
    {
        Game game;      //data stored in the node
        struct Node * next; //pointer to next node
    };
//  enum {Q_SIZE = 10};
    Node * front;   //pointer to front of Queue
    Node * rear;    //pointer to rear of Queue
    int items;      //current number of games in Queue
    const int qsize;    //max number of games in Queue
public:
    Queue(int qs);      //create a queue with a qs limit
//  Queue();
    ~Queue();
    bool isempty() const;
    bool isfull() const;
    int queuecount() const;
    bool enqueue(const Game & game);    //add game to end
    bool dequeue(Game & game);          //remove game from front
    friend std::ostream & operator<<(std::ostream & os, const Queue & q);
};
#endif 
```

队列.cpp

```
#include "queue.h"

using namespace std;

//Game methods
Game::Game(const string & s)
{
    title = s;
}

Game::Game()    //default constructor can be blank or empty
{
//  title = '\0';  //NULL
//  title = "JEGORRRRRE."; 
}

Game::~Game()
{
    cout << " destructor called" << endl;
}

ostream & operator<<(ostream & os, const Game & g)
{
    os << g.title;
    return os;
}

istream & operator>>(istream & is, Game & g)
{
    getline(cin, g.title); //code for reading line into a string object (pg. 131)
    return is;
}

//Queue methods
Queue::Queue(int qs)  : qsize(qs) //initialize qsize to qs because qsize is a const; must be done when the object is created
{
    front = rear = NULL;
    items = 0;
}

Queue::~Queue()
{
    Node * temp;
    while (front != NULL)       //while queue is not yet empty
    {
        temp = front;               //save address of front item
        front = front ->next;       //reset pointer to next item
        delete temp;                    //delete former front
    }
}

bool Queue::isempty() const
{
    return items == 0;
}

bool Queue::isfull() const
{
    return items == qsize;
}

int Queue::queuecount() const
{
    return items;
}

bool Queue::enqueue(const Game & game)
{
    if (isfull())
        return false;
    Node * add = new Node;  //creates node
    add->game = game;       //add accesses game member of struct and sets it to game
    add->next = NULL;       //add accesses next member of struct and sets it to NULL
    items++;                //increments the item count
    if (front == NULL)  //if queue is empty 
        front = add;    //place at front
    else
        rear->next = add; //else place at rear; in this case rear accesses the next member of struct and assigns the newly created node at next
    rear = add;     //rear points to new node; this line --> Node * add = new Node;
    return true;
}

bool Queue::dequeue(Game & game)    //place front item into item variable and remove from queue
{
    if (front == NULL)
        return false;
    game = front->game;         //set item to first item in queue
    items--;                                
    Node * temp = front;            //save location of first item
    front = front->next;            //reset front to next item
    delete temp;                        //delete former first item
    if (items == 0)
        rear = NULL;
    return true;
}

ostream & operator<<(ostream & os, const Queue & q)//figure out how to print nodes..
{
    //
    //return os;
} 
```

主文件

```
#include <iostream>
#include "queue.h"

using namespace std;

int main()
{
    cout << "Top Video Games of all Time\n___________________________"
        << "\nenter max number of games: \n";
    int q_size;
    (cin >> q_size).get();
    Queue list(q_size);

    Game temp;

    for (int c = 1; c < 11; c++)
    {
        cout << "Enter game title " << c << endl;   
        cin >> temp;
        list.enqueue(temp);
    }

//  cout << list;

    cout << "\n\n\n\n\n\n\n";
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:45:38.417

试试这个输出队列：

```
ostream & operator<<(ostream & os, const Queue & q)//figure out how to print nodes..
{
    for(Queue::Node* n = q.front; n != NULL; n = n->next)
    {
       os << n->game;
    }
    return os;
} 
```

它所做的只是获取队列的开头，遍历每个`Node`，打印其`game`，并返回`os`.

# uiview - 如何同时为 UIView.layer.shadow 和 UIView.center 设置动画

> ID：11387869
> 
> 赞同：1
> 
> 时间：2012-07-09T00:34:13.750
> 
> 标签：uiview, core-animation

我有点问题：

我有一个 UIView 需要同时完成两个动画。

1）我需要为`.layer.shadowRadius`.

2）我需要为`.center`属性设置动画（将视图从 A 点移动到 B 点）。

我真的很想用“新”的方式来做这个`UIView animateWithDuration:animations:`，但是我不能用这种方法为阴影设置动画。我现在必须使用 CABasicAnimation。

有没有办法轻松地结合这些？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:32:02.947

您应该创建两个`CABasicAnimations`（用于“shadowRadius”和“位置”）并配置它们的 to 和 from 值。

然后创建一个`CAAnimationGroup`并将动画设置为两个动画的数组。现在您可以在动画组上配置持续时间、时间等，它将应用于两个动画。

（您将动画组添加到您正在制作动画的图层，因为它包含其他两个动画）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:44:23.200

从[UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)：

> UIView 类的以下属性是可动画的：
> 
> @property 框架
> 
> @property 边界
> 
> @物业中心
> 
> @property 转换
> 
> @property 阿尔法
> 
> @property 背景颜色
> 
> @property 内容拉伸

所以你不能为`.layer.shadowRadius`属性设置动画。我想你将不得不继续使用 Core Animation。对不起。

# php - AJAX 表单提交回车

> ID：11387870
> 
> 赞同：1
> 
> 时间：2012-07-09T00:34:14.030
> 
> 标签：php, ajax

当用户点击按钮时，一切正常。但是当他们按下回车键时，页面就会重新加载。我究竟做错了什么？

这是我的完整代码：

```
<!doctype html>
<html>
<head>
    <title>Fun!</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>

    <link rel="stylesheet" href="" media="print" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

    <style type="text/css">
        body {
            font-family: arial;
        }
    </style>

    <script type="text/javascript">
        function get() {
            $.post('data.php', { name: form.name.value }, 
                function(output) {
                    $('#age').html(output).show();
                }
            );
        }
    </script>
</head>

<body>
    <div class="container">
        <form action="" name="form" method="post">
            <input type="text" name="name" /> <input type="button" value="Get" onClick="get();" />
        </form><br />

        <div id="age" style="display: none;">Result</div>
    </div>
</body>
</html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:44:39.743

您正在`onclick`为按钮设置事件，当按下 Enter 时这将不起作用，因为它不是点击。

起飞`onclick`并添加

```
onsubmit="event.preventDefault();get();return false;" 
```

到`<form>`.

`event.preventDefault();` `prevent`s 提交表单（`Default`动作）。

`return false;`适用于旧版本的 Internet Explorer，因为它们不支持`e.preventDefault();`. 现代浏览器忽略`return false;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:46:42.893

当用户按下回车键时，表单将被提交。您必须寻找`onsubmit`表单的事件，而不是使用`onclick`按钮的事件。

```
<form ... onsubmit="get();">
    ...
</form> 
```

现在您还必须防止页面实际提交（因为您使用 AJAX 完成了它）。`return false;`在函数末尾添加`get()`。

更好的做法是使用 jQuery 分配事件（因为无论如何您都在使用它），使用[`on()`](http://api.jquery.com/on/)方法。

# c# - 如何使用查询字符串和哈希重定向到另一个控制器？

> ID：11387874
> 
> 赞同：2
> 
> 时间：2012-07-09T00:34:27.673
> 
> 标签：c#, .net, asp.net-mvc, c#-4.0, asp.net-mvc-4

基于条件，我如何重定向到另一个控制器和操作，同时携带任何查询字符串和 URL 中的位置哈希。有没有内置的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:02:31.717

浏览器在执行 HTTP 请求时从不将哈希部分发送到服务器。因此，您无法重定向并保留哈希，因为您不知道哈希，它从未到达服务器。一些技术包括在调用控制器操作之前使用 javascript，该控制器操作应该执行重定向并以这样的方式操作 url，以便将哈希部分作为查询字符串参数发送。[因此，一旦您调用此控制器操作，您将能够使用GenerateUrl](http://msdn.microsoft.com/en-us/library/ee703653.aspx)方法生成带有哈希的 url ：

```
public ActionResult Blah(string hash)
{
    ... do something

    // Generate the url to redirect to using a hash
    var url = UrlHelper.GenerateUrl(
        null,                             // routeName
        "Foo",                            // actionName
        "Bar",                            // controllerName
        null,                             // protocol
        null,                             // hostName
        hash,                             // fragment
        null,                             // routeValues
        RouteTable.Routes,                // routeCollection
        ControllerContext.RequestContext, // requestContext
        false                             // includeImplicitMvcValues
    );

    return Redirect(url);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:26:51.190

有 RedirectToAction 方法，但它会向客户端生成 302，这意味着请求会更改（这不是您想要的）。

请看一下[如何在 ASP.NET MVC 中模拟 Server.Transfer？](https://stackoverflow.com/questions/799511/how-to-simulate-server-transfer-in-asp-net-mvc)，我相信它可以帮助你，虽然它不是内置的。

问候

# jquery - Backbone.js 获取集合而不设置模型值？

> ID：11387876
> 
> 赞同：1
> 
> 时间：2012-07-09T00:34:40.107
> 
> 标签：jquery, rest, collections, backbone.js, underscore.js

我正在尝试使用 fetch 初始化骨干网中的集合，我认为这是：

```
initialize: function()
{
    _.bindAll(this, 'render', 'addItem', 'appendItem');

    this.collection = new MembersCollection();

    this.collection.bind('add', this.appendItem);

    this.collection.fetch({success: _.bind(function(blah)
    {
        console.log(blah);

        this.render();

    }, this)});
} 
```

它似乎正在工作，我得到了一个成功的响应，具有正确数量的模型，它为每个模型呈现正确数量的视图，但是，如果我检查 model.attribute 值，它只包含我的默认值，没有来自服务器？

如果我检查我的 JSON 响应，我确实在那里看到了正确的数据，是否有什么我可能错过了设置数据所需的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:46:19.953

我想我最近遇到了类似的问题。从模型定义中删除我的默认值解决了这个问题，我不需要它，所以把它留在那里。我认为，也许，如果你定义了默认值，那么你需要包括你要设置的所有属性。但不要引用我的话。在没有默认值的情况下尝试它，看看它是如何进行的。如果您仍然有问题，您可能希望向我们提供您的模型定义和响应中返回的 json 样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T07:51:38.660

我有同样的问题——我的问题是由模型的解析方法引起的。

结果是，当为集合的 fetch 调用返回的数组中的每个项目创建模型时，会调用模型的 parse 方法。

从直接模型获取返回的 json/object 与集合返回数组中的 json/object 不同——这导致我的模型的 parse 方法在从数组项创建时返回 undefined。

# php - 获取 ModX Evolution 的资源？

> ID：11387885
> 
> 赞同：0
> 
> 时间：2012-07-09T00:36:18.917
> 
> 标签：php, content-management-system, modx

有谁知道 getResources 是否适用于 ModX Evolution？我一直试图让它工作一段时间，但没有成功。

如果没有办法让它工作，有没有人知道让多个资源显示在一个页面上的等效方法（以及他们的模板）？

非常感谢

```
[[!getResources? &parents=`58` &sortdir=`ASC` &sortby=`menuindex` &limit=`100` &includeTVs=`1` &processTVs=`1` &tpl=`eventtemp` ]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:54:40.180

您应该能够在 Evolution 中使用[Ditto](http://rtfm.modx.com/display/ADDON/Ditto)来复制它- 代码片段调用类似于：

```
[!Ditto? &parents=`58` &orderBy=`menuindex ASC` &display=`100` &tpl=`eventtemp`!] 
```

100 是相当多的资源，但要在一页上列出。查询可能有点慢，您确定要这样做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-08T15:53:42.453

试试这样的东西，对我来说效果很好

```
<a href="[~61~]" title="[!Ditto? &documents=`61` &tpl=`@CODE [+pagetitle+]`!]">a link text</a> 
```

# css - 在网格中覆盖透明框 css

> ID：11387887
> 
> 赞同：0
> 
> 时间：2012-07-09T00:36:53.663
> 
> 标签：css, overlay, transparent

我有一个图像，我想在其上显示一些文本信息。我在它下面有一个 div，其中包含信息，具有透明背景和格式化的所有内容。我可以用`margin-top: -50%`它把它拉到图像上，但由于我使用的是网格（[1140](http://cssgrid.net/)），所以当屏幕缩小时，事情就不匹配了。

这是我到目前为止所拥有的：

HTML（在 Slim 中）

```
.fourcol
  .book
    img src="#{book.image_url}"
    .book-info
      header
        h4.title
          = book.title
        h6.author
          = book.author
      p.description
        = book.description 
```

相关CSS：

```
.book-info {
      margin-top: -62%;
      padding: 1em;
      padding-bottom: 1.5em;
      float: left;
      background-color: black;
      opacity: .8; } 
```

图书信息如何缩放以使其底部始终位于图像的底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:41:36.857

您可以使用`position: absolute`on`.book-info`将其相对于 定位`.book`：

```
.book {
    position: relative;
    overflow: hidden; /* to clear the floats inside */
}

.book-info {
    position: absolute;
    bottom: 0;
} 
```

见[**演示**](http://jsfiddle.net/bg28d/5/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:47:12.767

您需要将包含信息的 div 放在还包含图像的包装器中。

```
<style type="text/css">
    #info 
    {
        position: relative;
        bottom: 0px;
        width: 100%;
        height: 4%;
        opacity: 0.5;
    }
    #theImage
    {
        width: 100%;
        height: 100%;
    }
    #wrapper
    {
         width: 15%;
         height: 15%;
         overflow: hidden;
    }
</style>

<div id="wrapper">
    <img id="theImage" src="..." alt="" />
    <div id="info">Information about the image</div>
</div> 
```

# android - Android CountDownTimer 无法正确呈现

> ID：11387889
> 
> 赞同：0
> 
> 时间：2012-07-09T00:37:07.093
> 
> 标签：android, view, textview, countdowntimer

我有一个简单的 Android 倒数计时器，其输出失真。我正在尝试创建一个简单的游戏，用户必须重复单击一个按钮，然后通过 8 个图像的过程将可绘制图像从一个更改为另一个。可绘制对象渲染得很好，但倒数计时器（应该从 30 秒开始）似乎会粘住和/或生成不代表当前经过的时间量的不正确数字。有没有人对为什么会发生这种情况或我应该调查什么来解决这个问题有任何建议？

## MultitapGame.java

```
 public class MultitapGame extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.multitapgame);

    final View btn = findViewById(R.id.gameButton);
    final View img = findViewById(R.id.game1);

    final TextView mTextField = (TextView) findViewById(R.id.gameCDT);
    final TextView mTextField2 = (TextView) findViewById(R.id.gameCDT2);
    final View mTextField3 = findViewById(R.id.gameCDT3);
    final View mTextField4 = findViewById(R.id.gameCDT4);

    img.setBackgroundResource(R.drawable.image1);

        btn.setOnClickListener(new OnClickListener() {

            public int count = 0;

        @Override
        public void onClick(View v) {

            setCount(getCount() + 1);
            new CountDownTimer(30000, 1000) {

                 public void onTick(long millisUntilFinished) {

                     int timeLeft =  (int) (millisUntilFinished / 1000) ;

                     ((TextView) mTextField).setText("seconds remaining: ");
                     final TextView mTextField2 = (TextView) findViewById(R.id.gameCDT2);
                        mTextField2.setText(String.valueOf(timeLeft + ""));

                 }

                 public void onFinish() {

                     int numTaps = count;
                     if(numTaps<150)
                     {
                         ((TextView) mTextField3).setText("Unlucky chucky! ");
                         ((TextView) mTextField4).setText("taps done: " + numTaps);
                     }
                     else
                     {
                         ((TextView) mTextField3).setText("Congrats Bro :-) !");
                         ((TextView) mTextField4).setText("taps done: " + numTaps);
                     }
                 }
              }.start();

            if(count==15)
            {
            img.setBackgroundResource(R.drawable.image2);}
            if(count==30)
            {
            img.setBackgroundResource(R.drawable.image3);}
            if(count==45)
            {
            img.setBackgroundResource(R.drawable.image4);}
            if(count==60)
            {
            img.setBackgroundResource(R.drawable.image5);}
            if(count==75)
            {
            img.setBackgroundResource(R.drawable.image6);}
            if(count==90)
            {
            img.setBackgroundResource(R.drawable.image5);}
            if(count==100)
            {
            img.setBackgroundResource(R.drawable.image6);}
            if(count==110)
            {
            img.setBackgroundResource(R.drawable.image5);}
            if(count==115)
            {
            img.setBackgroundResource(R.drawable.image6);}
            if(count==118)
            {
            img.setBackgroundResource(R.drawable.image5);}
            if(count==121)
            {
            img.setBackgroundResource(R.drawable.image6);}
            if(count==123)
            {
            img.setBackgroundResource(R.drawable.image5);}
            if(count==125)
            {
            img.setBackgroundResource(R.drawable.image6);}
            if(count==126)
            {
            img.setBackgroundResource(R.drawable.image5);}
            if(count==127)
            {
            img.setBackgroundResource(R.drawable.image6);}

            if(count==130)
            {
            img.setBackgroundResource(R.drawable.image7);}
            if(count==140)
            {
            img.setBackgroundResource(R.drawable.image1);}
            if(count==160)
            {
                Intent i = new Intent();
                i.setClassName("com.B00512756.angertwo",
                        "com.B00512756.angertwo.Strategies");
                startActivity(i);
                finish();}

        }

        public int getCount() {
            return count;
        }

        public void setCount(int count) {
            this.count = count;
        }
        });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:32:53.617

我认为问题在于在 onClick 方法中实现 CountDownTimer 。

我建议将其实现为扩展 CountDownTimer 的子类，例如：

```
public class MyCounter extends CountDownTimer{

        public MyCounter(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

                 @Override
                 public void onTick(long millisUntilFinished) {

                     mTextField.setText("seconds remaining: ");
                     mTextField2.setText(String.valueOf((int) (millisUntilFinished/1000) + ""));

                 }

                 @Override
                 public void onFinish() {

                     int numTaps = count;
                     if(numTaps<150)
                     {
                         mTextField3.setText("Unlucky chucky! ");
                         mTextField4.setText("taps done: " + numTaps);
                     }
                     else
                     {
                         mTextField3.setText("Congrats Bro :-) !");
                         mTextField4.setText("taps done: " + numTaps);
                     }
                 }

    } 
```

此外，最好使 onTick() 中的代码尽可能短，因为对的调用`onTick(long)`与该对象同步。因此`onTick(long)`，在前一个回调完成之前不会发生一次调用。仅当执行`onTick(long)`所需的时间与倒计时间隔相比显着时，这才有意义。因此，如果您的`onTick()`代码执行时间超过一秒，您的倒计时就会出现滞后。这就是为什么我把它缩短了。

最好在您的内部初始化您的 TextView`onCreate()`并将它们声明为公共类变量，这样您就不必在每次计数器滴答或完成时都这样做。

下一步是初始化你的计时器`onCreate`：

```
final MyCounter timer = new MyCounter(30000,1000); 
```

最后，您需要在您的`onClick()`方法中启动它：

```
timer.start(); 
```

# objective-c - 多行自动调整文本 UILabel

> ID：11387896
> 
> 赞同：1
> 
> 时间：2012-07-09T00:39:19.133
> 
> 标签：objective-c, ios, uilabel

是否有可能有一个自动调整 UIFont 大小的多行 UILabel 以使其适合 UILabel 的帧大小？如果没有，那么实现这一目标的最佳方法是什么？我不想将 UILabel/UITextView 的帧大小调整为任何值。到目前为止，我一直在这样做：

```
int currentFontSize = 18;
    UIFont *currentFont = [UIFont fontWithName:kProximaNovaBold size:currentFontSize];
    CGSize storyTitleSize = [storyTitle sizeWithFont:currentFont constrainedToSize:self.newsfeedStoryTitle_.frameSize];

    while (storyTitleSize.height >= self.newsfeedStoryTitle_.frameHeight){
        currentFontSize--;
        currentFont = [UIFont fontWithName:kProximaNovaBold size:currentFontSize];
        storyTitleSize = [storyTitle sizeWithFont:currentFont constrainedToSize:self.newsfeedStoryTitle_.frameSize];
    }

    [self.newsfeedStoryTitle_ setFont:currentFont];
    [self.newsfeedStoryTitle_ setText:storyTitle]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:46:38.383

你想要：`sizeWithFont:constrainedToSize:lineBreakMode:` [[来源]](http://developer.apple.com/library/ios/documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/sizeWithFont%3aconstrainedToSize%3alineBreakMode%3a)

```
//Calculate the expected size based on the font and linebreak mode of your label
CGSize maximumLabelSize = CGSizeMake(self.bounds.size.width, NSIntegerMax);

CGSize expectedLabelSize = [theString sizeWithFont:the Font constrainedToSize:maximumLabelSize lineBreakMode:theLineBreakMode];   

//adjust the label the the new height.
CGRect newFrame = theLabel.frame;
newFrame.size.height = expectedLabelSize.height;
theLabel.frame = newFrame; 
```

# javascript - 向modernizr添加测试的正确方法是什么？

> ID：11387897
> 
> 赞同：2
> 
> 时间：2012-07-09T00:39:46.857
> 
> 标签：javascript, modernizr, graceful-degradation

该测试已经存在于 github 存储库中，但是当我尝试将其包含在我的页面中时出现错误，因此我不确定如何将它包含在我的文档中。在我的 html`<head>`标记中，我链接了modernizr 脚本，然后链接到我正在添加的测试：

```
<script src="js/modernizr-2.5.3-min.js"></script>
<script src="js/css-pointerevents.js"></script> 
```

[css-pointerevents.js](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/css-pointerevents.js)

当我现在加载页面时，我收到一个 javascript 错误：`Uncaught TypeError: Object #<Object> has no method 'addTest'`它必须是对 css-pointervents.js ( `Modernizr.addTest('pointerevents', function(){`)第一行的引用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T04:42:30.363

这是因为 addTest 功能不包含在 Modernizr 的默认基础构建中。需要专门添加（在可扩展性下）[http://modernizr.com/download/](http://modernizr.com/download/)

# class - 组织 DAO 课程

> ID：11387899
> 
> 赞同：1
> 
> 时间：2012-07-09T00:40:40.493
> 
> 标签：class, associations

当涉及到类关联时，我想知道组织 DAO 类的**最佳**方式。

例如。假设您有一个 Customer 表和一个 Order 表，并且您想访问与该客户关联的订单，那么拥有该方法的最佳位置在哪里，例如 getCustomerOrder(int customerid, int orderid)？

客户等级？订单类？客户订单类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:13:12.340

*   看起来您正在使用 CustomerOrder 类（中间的表）。
*   Customer 和 Order 之间的关系是 C *..* O}（多对多）。
*   我建议将 放在`getCustomerOrder(int cusomerid, int orderid)`此类中，因为在运行时类实例，形式参数所需的值应该在 Customer 类和 Order 类的范围内。
*   如果 CustomerOrder 是中间表，则相关表模式的引用完整性应该具有强制执行此用法的约束。

我喜欢这个链接作为中间数据透视表或表格的一个很好的例子

[数据透视表](http://www.wellho.net/solutions/mysql-many-to-many-table-mapping-pivot-tables.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:45:16.770

实际上我不会使用这些。Customer Class、Order Class 和 CustomerOrder 类都是关于业务领域的类。getCustomerOrder(int customerid, int orderid) 方法是关于如何持久化数据。出于许多不同的原因（如[SoC](http://en.wikipedia.org/wiki/Separation_of_concerns)、[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)等...等），我将放入一个处理将数据持久保存到您想要持久保存的任何位置的类中。一种选择可能是 DBPersistenceSystem 或类似的东西。这也会有所帮助，因为 getCustomerOrder(int customerid, int orderid) 或 getCustomer(int customerid) 或 getOrder(int orderid) 的代码非常相似。如果你把它们都放在同一个类或一组类中，你最终会得到一个更好的设计。

# database - 如何减少 AWS RDS 中的 Oracle 撤消表空间？

> ID：11387902
> 
> 赞同：1
> 
> 时间：2012-07-09T00:41:05.907
> 
> 标签：database, oracle, amazon-web-services, amazon-rds, tablespace

我的 Oracle DB 中的撤消表空间占用了 180GB。我没有任何需要这么多空间的进程。数据库存在未知问题，导致撤消表大小在一段时间内重新增加；并且在反弹 RDS 实例后它已被纠正。现在的问题是如何减小撤消表空间的大小。我设法使用创建了一个新的撤消表

```
creat undo tablespace UNDO_T2; 
```

但未能告诉 oracle 使用新的 undo 表空间。这是我的查询及其错误：

```
alter system set undo_tablespace = UNDO_T2;

Error report:
SQL Error: ORA-02065: illegal option for ALTER SYSTEM
02065\. 00000 - "illegal option for ALTER SYSTEM"
*Cause: The option specified for ALTER SYSTEM is not supported
*Action: refer to the user manual for option supported 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:30:43.180

您在[命令](http://docs.oracle.com/cd/E14072_01/server.112/e10595/undo005.htm#i1106407)中有错字，带有额外的`e`. 除非您有一个奇怪的表空间名称，否则您也不需要引号。

```
alter system set undo_tablespacee = 'UNDO_T2'; 
```

... 应该：

```
alter system set undo_tablespace = UNDO_T2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:16:39.413

我使用以下命令成功地将 UNDO 表的大小调整为 16GB。这需要 RDS 实例的主用户权限。

ALTER TABLESPACE UNDO_T1 RESIZE 16G；

应该检查那里的 Oracle 实例的合适大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T03:37:11.897

您是否已将数据文件添加到此表空间？

# objective-c - 延迟初始化不工作 iPhone

> ID：11387903
> 
> 赞同：4
> 
> 时间：2012-07-09T00:41:05.873
> 
> 标签：objective-c, lazy-loading, lazy-initialization

所以我有很多自定义对象，它们可能包含大量数据，或者根据用户的输入包含很少的数据。如果只需要一点点，我显然不想为大量数据创建存储。所以我听说了初始化，这听起来正是我想要的；我只是无法让它工作。这是我尝试之一的示例：

```
@synthesize name;

...

- (NSString *)name {
    if (!name) name = [[NSString alloc] init];
    return name;
} 
```

然后在别的地方

```
myObject.name = localName; 
```

如果我`alloc`和`init`myObject 的名称在其初始化程序中，那么这很好。但是，当我尝试上述延迟初始化时，对象的名称`nil`在尝试设置后变为。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:50:14.253

```
@property (strong) NSString *name;

@synthesize name = _name;

- (NSString *)name {
    if (!_name) {
        _name = [[NSString alloc] init];
        ...
    }
    return _name;
} 
```

# python - pySerial 不喜欢低值

> ID：11387904
> 
> 赞同：1
> 
> 时间：2012-07-09T00:41:24.033
> 
> 标签：python, serial-port, microcontroller, pyserial, uart

在使用 MCU 时，我正在尝试通过 RS232 链接与 PC 桌面进行通信。

我做了一个非常简单的测试程序：每*n*毫秒发送一次*“Hello world！\n” 。*

 *最相关的链接连接参数是：

*   端口：/dev/ttyUSB0
*   波特率：57600 bps
*   8 个数据位
*   1 位停止
*   无奇偶校验和硬件控制

为了检查我是否收到了从 MCU 到 PC 的数据，我将 /dev/ttyUSB0 设置为：

```
%> stty -F /dev/ttyUSB0 57600 cooked 
```

进而，

```
%> cat /dev/ttyUSB0
Hello world!
Hello world!
Hello world!
... 
```

所以，我正确地接收到来自 MCU 的数据。

但是，这里的问题是，当我想将 Python 与 pySerial 模块一起使用时，数据是绝对错误的：

```
>>> s = serial.Serial('/dev/ttyUSB0', 57600)
>>> print s
Serial<id=0x195fed0, open=True>( 
    port='/dev/ttyUSB0', baudrate=57600, 
    bytesize=8, parity='N',  
    stopbits=1, timeout=None, 
    xonxoff=False, rtscts=False, 
    dsrdtr=False)

>>> s.read(14)
'\xc8\xe5\xec\xec\xef\xa0\xf7\xef\xf2\xec\xe4\xa1\x8a\x80' 
```

在这一点上，我已经为这个字符串更改了“ *Hello world！\n”*输出字符串（MCU 端）：*0xde, 0xad, 0xbe, 0xef*。而且，我用 pySerial 得到的是：

```
>>> s.read(4)
'\xde\xad\xbe\xef' 
```

有用！我又改了一次，现在是这样：*0x00, 0x01, 0x02, 0x03, 0x80, 0x81, 0x82, 0x83*。结果：

```
>>> s.read(8)
'\x80\x81\x82\x83\x80\x81\x82\x83' 
```

结论：pySerial 将字节值更改为小于 128 的相同值加上 128。

我不知道为什么会这样。我在其他场合（2.4 版）使用了 pySerial 模块，一切正常。我在 Ubuntu 11.10 和 Ubuntu 10.04 中尝试了 2.5 和 2.6 版本，但没有用。有什么线索吗？

PD：同情我的英文写作。我没有像我应该的那样精通英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:37:05.733

好吧，我的错！PySerial 完美运行。在 MCU 中修改代码，我发现一个错误取消了应该设置的位（我正在发送 7 位字符长度）。然后，接收到的帧显然部分是好的，部分是错误的。

现在，我可以理解为什么 pySerial 会显示不好的结果。然而，对我来说，我的 PC 如何从 7 位数据、8 位长度的字符重建是一个谜。我绝对相信 MCU 的代码很好，因为来自终端的数据是正确的：S*

# jpa - em.flush 数据通过 sql developer 不可见

> ID：11387908
> 
> 赞同：0
> 
> 时间：2012-07-09T00:41:52.803
> 
> 标签：jpa, entitymanager

这是一个简单的问题可能是

在我的代码中，我正在做

```
user = em.find(User,pk);
user.setName("name");
em.flush(); 
```

在使用调试器的这个 flush() statemenet 之后，我停止使用断点。我现在使用我的 sql 开发人员工具检查是否在 DB 中进行了更改。我没有看到数据库中完成的更改。

这对刷新命令意味着什么。

1.  刷新生成的 sql 将被发送到数据库，但然后在数据库上排队等待提交语句通过？sql语句还没有应用？

***修改1：*** 所以我第一次可能不清楚我要做什么

我有一个集群设置，在节点 1 上：在事务 1 中，我正在更改一些参数，比如用户实体的名称并在它们上执行 flush()，以便访问数据库。我还不能进行提交，因为事务中需要执行许多其他操作

与事务 1 中的此 On Node(Machine) 2 并行，我正在获取用户实体。现在在这个事务中，唯一的愿望是检查用户的最新姓名。这是并行发生的事情，也是我需要做的事情。有人可以让我知道如何做到这一点，以便分布式节点看到最新的变化。

```
Node 1                                       Node 2 
try{                                      try {
    em.getTransaction.begin                 em.getTransaction.begin
    user = em.find(User,pk);
    System.out.println.(user.getName())
    /* this prints JERRY*/
    user.setName("TOM");
    em.flush();
    ...
    ...                                     user = em.find(User,pk);
                                            System.out.println.(user.getName()) 
                                            /*This should print TOM*/

    ...
    em.commit()                             //no commit in this transaction  
 }  catch (Exception e) {                    } finally {

   //rollback                                 }
} finally {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:00:16.253

您可能是正确的，您的事务尚未提交，因此更改在持久化它们的事务之外不可见。您使用什么来启动和停止交易？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:01:08.797

flush() 不提交事务，只写入数据库。要查看另一个会话中的更改，您需要提交事务。

# java - 在 Eclipse 控制台输出中使用什么字体显示日文字符？

> ID：11387910
> 
> 赞同：0
> 
> 时间：2012-07-09T00:42:29.307
> 
> 标签：java, eclipse

我使用的是 Windows 7。在 Eclipse 中，我需要使用什么字体在控制台输出中显示日文字符？我看到的只是框而不是汉字/平假名/片假名，根据[这个 SO user](https://stackoverflow.com/a/10969413/739379)，这些框意味着 Eclipse 正在正确编码文本，并且没有安装正确的字体来显示文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:29:00.947

我认为 MS UI Gothic 9 是一个不错的选择。

# php - 在一天中的特定时间禁用项目php

> ID：11387911
> 
> 赞同：0
> 
> 时间：2012-07-09T00:42:34.453
> 
> 标签：php, mysql, time, restrictions

我有一个基于请求的网站，用户可以请求项目，我想在一天中的某些时间限制一些请求。

例如，用户`item5`只能在下午 5 点到 8 点之间请求。其余时间不可用。

我的网站是 PHP 和 MySQL 后端。

理想情况下，我会喜欢一个可以使用项目 ID 调用的函数，该函数会检查数据库中的时间值并返回真值或假值。

如果有人有一些示例代码，我将不胜感激，我已经尝试在 PHP 中按时阅读，但它让我头疼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:57:34.910

`available_start`这假设数据库在名为和的项目表中有两列`available_end`。这两个都假定为 DATETIME。

```
function isItemAvailableNow(item_id){
    # Globals are bad but this gets the point across
    global $db;

    # Get the item from the database
    $result = mysql_query("SELECT * FROM items WHERE id = " . mysql_real_escape_string(item_id, $db) . ";");
    $row = mysql_fetch_assoc($result);

    # Pull the beginning and ending availablity time out of the database result
    $available_start = $row['available_start']
    $available_end   = $row['available_end']

    # Get the current time in the same format as the MySQL DATETIME type
    $now = date('%Y-%m-%d %H:%i:%s');

    return ($now >= $available_start) && ($now <= $available_end);
} 
```

此代码尚未经过测试，我做了一些假设（例如您使用的是 MySQL），但这应该可以帮助您入门。

您还需要考虑时区，但这是另一个讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T01:05:57.903

`time()`, `date()`, 也许`mktime()`是你需要的。只需将当前时间与您允许/禁止查看内容的时间范围进行比较

[PHP date() 手册](http://www.php.net/manual/en/function.date.php)- 这真是一个强大的功能

还有一个时区问题，您可能会考虑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T01:04:53.353

您可以使用 time() 数据类型将 startTime 和 endTime 字段弹出到数据库中。在这些字段中，输入它们的可用时间以及它们必须返回的时间。

然后，查询返回可用项目是一件简单的事情。

```
tableAvailability
|--------------------------------|
| id     | availStart | availEnd |
|--------------------------------|
| 1      | 15:00:00   | 18:00:00 |
| 2      | 12:00:00   | 12:30:00 |
|--------------------------------|

$startTime='15:30:00';
$requiredTime=2; // Showing Hours for example

$sql="
select
    id
from
    tableAvailability
where
    ".$startTime." >= availStart
    and addTime('".$startTime."', '".$requiredTime.":00:00')<availEnd"; 
```

# java - Java linq 等效于获取列表中具有最高值的属性

> ID：11387916
> 
> 赞同：0
> 
> 时间：2012-07-09T00:43:58.847
> 
> 标签：java

我有一个结果列表，`ArrayList<PlacedObject> result`：

```
for(PlacedObject po : result){

     float[] results = new float[3];

     Location.distanceBetween(lastlocation.getLatitude()
     ,lastlocation.getLongitude()
     ,Double.parseDouble(po.lat)
     ,Double.parseDouble(po.lng) ,
     results);

     po.distance = results[0];
} 
```

设置后`po.distance`，我想按`distance`属性对列表进行排序。在 c# 中我会使用 linq，但在 java 中有没有类似的解决方案？

谢谢

* * *

当前解决方案：

```
Collections.sort(result, new Comparator<PlacedObject>(){
public int  compare(PlacedObject s1, PlacedObject s2) {
    return (int) (s1.distance - s2.distance);
}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:50:12.947

这是通过实现一个`Comparator<T>`类来完成的：

> 一个比较函数，它对某些对象集合进行总排序。比较器可以传递给排序方法（例如 Collections.sort 或 Arrays.sort），以允许精确控制排序顺序。

[它可以通过Collections.sort(list, compare)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)应用于您的列表。基本上，您实现自己的 Comparator 并将其传递给方法。

例如，实现可以使用匿名内部类：

```
Collections.sort(list, new Comparator<PlacedObject>() {

    @Override
    public int compare(PlacedObject po1, PlacedObject po2) {
        return Double.valueOf(po1.distance).compareTo(po2.distance);
    }
}); 
```

如果您只对最大值感兴趣，如您的标题所示，还有[Collections.max](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#max%28java.util.Collection,%20java.util.Comparator%29)以相同的方式应用。

# php - 是否可以使用带有表达式的 switch 语句作为案例？

> ID：11387918
> 
> 赞同：0
> 
> 时间：2012-07-09T00:44:07.730
> 
> 标签：php, switch-statement

使用`if`和`elseif`，可以轻松地进行下面的比较，但出于学习目的，我正在分析是否可以使用 具有相同的功能`switch`。

如果`$x`接收到正值或负值，我得到正确的输出，但如果`$x`接收`0`（零），我得到输出“低”，但正确的输出应该是“相等”。

这是代码：

```
$x = 0;

switch($x)
{
    case ($x < 0):
        echo 'Lower';
        break;

    case ($x == 0):
        echo 'Equal';
        break;

    case ($x > 0):
        echo 'Bigger';
        break;
    default:
        echo 'Not found';
} 
```

是否可以使用带有表达式的 switch 语句作为案例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T00:49:36.227

`switch($x)`将其替换为`switch(true)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T00:57:41.280

您实际上不再匹配数字，而是匹配布尔结果。

任何正数或负数都转换为 boolean`true`并且仅`0`转换为，因此基本上对于您要比较的`false`正数或负数or并给出您期望的结果。`true``($x < 0)``($x > 0)`

但是，`0`强制转换为`false`and `(0 == 0)`is`true`所以你永远不会在那里匹配。同样，您在 switch 中的第一条语句也是匹配的`0 < 0`。`false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T01:06:45.117

您正在比较 $x 是否等于测试结果，当 时`$x = 0`，$x 的布尔值为`false`。如果它不同于 0，则为`true`。这就是为什么你总是会陷入第一个返回的测试`false`。

试试这个：

```
$x = 0;

switch($x)
{

case 0:
    echo 'Equal';
    break;

case ($x < 0):
    echo 'Lower';
    break;

case ($x > 0):
    echo 'Bigger';
    break;

default:
    echo 'Not found';

} 
```

我还在评论中读到您想知道是否可以在每个`case`. `switch`是的，有可能 ：

```
$x = 0;

switch($x)
{

case ($x < 0):
    echo 'Lower';
    break;

case ($x > 0):
    echo 'Bigger';
    break;

case ($x <> 0):
    echo 'Equal';
    break;

default:
    echo 'Not found';

} 
```

`($x <> 0)`何时返回 false`$x = 0`并回显“Equal”

# jquery - AJAX/JQuery 加载整个页面而不是 div

> ID：11387924
> 
> 赞同：3
> 
> 时间：2012-07-09T00:44:45.467
> 
> 标签：jquery, ajax

我开始学习移动应用程序开发，我已经遇到了障碍。我有以下文件：

```
1\. android.html
2\. index.html
3\. android.js 
```

android.html 充当加载页面，并在页面加载时将 index.html 链接拉入其中。单击链接时，它仅意味着将远程页面的数据从#content div 加载到android.html 的#container div 中。但这似乎对我不起作用。

这是代码：

**android.html：**

```
<!DOCTYPE html>
<html>
    <head>
        <title>Jonathan Stark</title>
        <meta name="viewport" content="user-scalable=no, width=device-width" />
        <link rel="apple-touch-icon-precomposed" href="myCustomIcon.png" />
        <link rel="stylesheet" href="css/android.css" type="text/css" media="screen" />
        <script src="cordova-1.6.1.js" type="text/javascript"></script>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="android.js"></script>
    </head>
    <body>
        <div id="header"><h1>Test</h1></div>
        <div id="container"></div>
    </body>
</html> 
```

**索引.html：**

```
<html>
    <head>
        <title>Jonathan Stark</title>
        <meta name="viewport" content="user-scalable=no, width=device-width" />
        <link rel="stylesheet" type="text/css" href="android.css" media="only screen and (max-width: 480px)" />
        <link rel="stylesheet" type="text/css" href="desktop.css" media="screen and (min-width: 481px)" />
        <!--[if IE]>
            <link rel="stylesheet" type="text/css" href="explorer.css" media="all" />
        <![endif]-->
        <script src="cordova-1.6.1.js" type="text/javascript"></script>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="android.js"></script>
    </head>
    <body>
        <div id="container">
            <div id="header">
                <h1><a href="./">Jonathan Stark</a></h1>
                <div id="utility">
                    <ul>
                        <li><a href="about.html">About</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div id="nav">
                    <ul>
                        <li><a href="consulting-clinic.html">Consulting Clinic</a></li>
                        <li><a href="on-call.html">On Call</a></li>
                        <li><a href="development.html">Development</a></li>
                        <li><a href="http://www.oreilly.com">O'Reilly Media, Inc.</a></li>
                    </ul>
                </div>
            </div>
            <div id="content">
                <h2>About</h2>
                <p>Jonathan Stark is a web developer, speaker, and author. His consulting firm, Jonathan Stark Consulting, Inc., has attracted clients such as Staples, Turner Broadcasting, and the PGA Tour. ...</p>
            </div>
            <div id="sidebar">
                <img alt="Manga Portrait of Jonathan Stark" src="jonathanstark-manga-small.png">
                <p>Jonathan Stark is a mobile and web application developer who the Wall Street Journal has called an expert on publishing desktop data to the web.</p>
            </div>
            <div id="footer">
                <ul>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="blog.html">Blog</a></li>
                </ul>
                <p class="subtle">Jonathan Stark Consulting, Inc.</p>
            </div>
        </div>
    </body>
</html> 
```

我几乎把它用作所有链接/远程页面的基本页面。只需更改上面#content div 中的h2 标签标题。

**安卓.js：**

```
 $(document).ready(function() {
    loadPage();

});

function loadPage(url){
    if (url == undefined){

        $('#container').load('index.html #header ul',hijackLinks);

    }
    else{

    $('#container').load(url +  '#content',hijackLinks);    

    }

}

function hijackLinks(){

    $('#container').click(function(e) {

        e.preventDefault();

        loadPage(e.target.href);
    }); 

} 
```

有人能告诉我为什么上面的代码在我点击一个链接时会显示整个页面，而它的意思是只抓取远程页面的#content div？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T01:11:57.447

[http://api.jquery.com/load/](http://api.jquery.com/load/)

*如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格后面的部分是确定要加载的内容的 jQuery 选择器。*

换句话说，您在第二次调用之间需要一个空格，`url`否则`#content`jQuery`.load()`认为它是 url 的一部分。

改变：

```
$('#container').load(url +  '#content',hijackLinks); 
```

到：

```
$('#container').load(url +  ' #content',hijackLinks); 
```

此外，您的点击监听器应该在您的文档就绪回调中被调用。传入加载回调的函数实际上是一个`success`回调，在ajax调用成功时执行。当然，由于它在第一次加载完成时运行，它仍然会在文档就绪时被调用，但这种方式并不完全清楚，也没有必要将它放在那里。您可以`hijackLinks`从对 的调用中删除`.load()`。

`$(document).ready({ hijackLinks(); loadPages(); });`

PS 如果`hijackLinks`应该在链接单击时执行，请将`.click`方法中的选择器从更改`#container`为`#container a`。

# ruby-on-rails - RAILS：嵌套模型和回调中 nil:NilClass 的未定义方法“配置文件”

> ID：11387925
> 
> 赞同：0
> 
> 时间：2012-07-09T00:44:59.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, callback

这是一个实际的工作示例，我已根据上一篇文章中两位成员的请求对其进行了分解和简化，其中包含更多详细信息。我提取并重写了这些代码以解决持久性问题：nil:NilChass 的未定义方法“配置文件”近两天。

我使用 gem "faker"，和 SQLite 数据库浏览器省略控制器和视图，专注于建模问题。

最初的问题出现在 Goal.rb 中，错误消息指出：“nil:NilClass 的未定义方法 `profile'”。根据 SQLite DB Browser，用户和配置文件记录已成功创建。

问题在于 Goal.rb 模型下的一行“user.profile.lbm_lbs”。我不太明白为什么 user.profile 不存在，即使 user.profile 是通过 admin.profile = Profile.create!(name...) sample_data.rake (gem faker) appling bundle exec rake db:populate 创建的

我之前发布的链接： [RAILS: How to make new collection.build in a callback?](https://stackoverflow.com/questions/11381027/rails-how-to-make-new-collection-build-in-a-callback)

```
BffmModel::Application.routes.draw do
  resources :users do
    resource :profile
    resource :goal
    resource :tdee
    resources :progress_charts
  end
end

# == Schema Information
#
# Table name: users
#
#  id              :integer         not null, primary key
#  email           :string(255)
#  password_digest :string(255)
#  created_at      :datetime        not null
#  updated_at      :datetime        not null
#  remember_token  :string(255)
#

class User < ActiveRecord::Base
    attr_accessible :email, :email_confirmation, :password, :password_confirmation

    has_secure_password
    has_one :profile
    has_one :goal
    has_one :tdee
    has_many :progress_charts

    before_save { |user| user.email = email.downcase }
    before_save :create_remember_token

    VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

    validates :email, :confirmation => true, :presence => true, 
                        length: { maximum: 50 },
                        format: { with: VALID_EMAIL_REGEX },
                        uniqueness: { case_sensitive: false }

    validates :email_confirmation, :presence => true
    validates :password, length: { minimum: 6 }
    validates :password_confirmation, presence: true

    private

        def create_remember_token
            self.remember_token = SecureRandom.urlsafe_base64
        end
end

# == Schema Information
#
# Table name: profiles
#
#  id               :integer         not null, primary key
#  name             :string(255)
#  surname          :string(255)
#  gender           :string(255)
#  date_of_birth    :date
#  body_weight_lbs  :integer
#  height_in_feets  :integer
#  height_in_inches :integer
#  bf_pct           :decimal(5, 2)
#  bf_lbs           :decimal(5, 2)
#  lbm_lbs          :decimal(5, 2)
#  user_id          :integer
#  created_at       :datetime        not null
#  updated_at       :datetime        not null
#

class Profile < ActiveRecord::Base
    attr_accessible :name, :surname, :gender, :date_of_birth, :body_weight_lbs,
                    :bf_pct, :height_in_feets, :height_in_inches
    belongs_to :user

    before_save :set_gender
    before_save :calculate_body_fat_lbs
    before_save :calculate_lean_body_mass_lbs

    private

        def set_gender
            if self.gender == "1"
                self.gender = "Male"
            elsif self.gender == "2"
                self.gender = "Female"
            end
        end

        def calculate_body_fat_lbs
            self.bf_lbs = ( self.bf_pct / 100 ) * self.body_weight_lbs
            self.bf_lbs = self.bf_lbs.round(0)
        end

        def calculate_lean_body_mass_lbs
            self.lbm_lbs = self.body_weight_lbs - self.bf_lbs
        end
end

# == Schema Information
#
# Table name: goals
#
#  id                    :integer         not null, primary key
#  desired_bf_pct        :decimal(, )
#  goal_type             :string(255)
#  ideal_body_weight_lbs :decimal(5, 2)
#  ideal_bfm_lbs         :decimal(5, 2)
#  fat_to_lose_lbs       :decimal(5, 2)
#  lbm_to_gain_lbs       :decimal(5, 2)
#  user_id               :integer
#  created_at            :datetime        not null
#  updated_at            :datetime        not null
#

class Goal < ActiveRecord::Base
  attr_accessible :desired_bf_pct, :goal_type

  belongs_to :user

  before_save :set_goal
  before_save :calculate_ideal_body_weight_lbs

  private

    def set_goal
      if self.goal_type == "1"
        self.goal_type = "Lose Fat"
      elsif self.goal_type == "2"
        self.goal_type = "Gain Muscles"
      end
    end

    def calculate_ideal_body_weight_lbs

      self.ideal_body_weight_lbs = user.profile.lbm_lbs / ( 1 - ( self.desired_bf_pct / 100 ) )
      self.ideal_body_weight_lbs = self.ideal_body_weight_lbs.round(0)
    end
end 
```

/lib/tasks/sample_data.rake 作为测试数据

```
namespace :db do
  desc "Fill database with sample data"
  task populate: :environment do
    admin = User.create!(email: "mikey@example.com",
                         email_confirmation: "mikey@example.com",
                         password: "foobar",
                         password_confirmation: "foobar")

    admin.profile = Profile.create!(name: "Michael",
                                    surname: "Colins",
                                    gender: "Male",
                                    date_of_birth: "1975-03-05",
                                    body_weight_lbs: 200,
                                    bf_pct: 25.5,
                                    height_in_feets: 5,
                                    height_in_inches: 11 )

    admin.goal = Goal.create!(  desired_bf_pct: 12,
                                goal_type: "Lose Fat")

    admin.tdee = Tdee.create!( tdee_calc_type: "Harris-Benedict",
                  activity_lvl: "BMR x 1.2")
  end
end 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T02:00:30.147

```
admin.goal = Goal.create!(  desired_bf_pct: 12,
                            goal_type: "Lose Fat") 
```

这里的这条线让你绊倒了。

```
Goal.create!(  desired_bf_pct: 12,
               goal_type: "Lose Fat") 
```

这部分将创建一个新的`Goal`. 在此步骤中，`:user`未设置关系。这意味着`user`方法 in`Goal`将返回`nil`。由于`nil`没有方法`profile`，因此您不能在保存之前调用`user.profile`的`calculate_ideal_body_weight_lbs`方法中调用。`Goal`使用您拥有的代码，您必须显式设置`:user`关系。

```
Goal.create!(  desired_bf_pct: 12,
               goal_type: "Lose Fat",
               user: admin ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:56:40.920

显然`user`是零。你的问题听起来好像你不知道这个。也许您没有登录，或者您不了解该`user`方法的作用。

# c++ - 这个错误是什么：“没有合适的默认构造函数可用”？

> ID：11387926
> 
> 赞同：0
> 
> 时间：2012-07-09T00:45:02.647
> 
> 标签：c++, class, constructor

我正进入（状态：

> main.cpp(13)：错误 C2512：“myPlayer”：没有合适的默认构造函数可用

这是它所指的代码：

```
 myPlayer player; 
```

这是构造函数：

```
myPlayer (int myHealth, int myDamage, int myMoney, int myWeaponID, int myClass) : health(myHealth), damage(myDamage), money(myMoney),
    weapon_id(myWeaponID), p_class(myClass) {} 
```

另外，如何在 Visual Studio 11 上显示每一行的数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T00:47:30.567

您的构造函数被声明为采用 5 个参数，所有类型为`int`. 您没有提供任何参数。

您的选择是编写一个不需要参数的构造函数，或者在构造对象时提供参数，例如：`myPlayer player(1, 2, 3, 4, 5);`

# javascript - JavaScript Google Maps Geolocation How can I get the Zipcode, City, State from this?

> ID：11387930
> 
> 赞同：3
> 
> 时间：2012-07-09T00:46:10.640
> 
> 标签：javascript, jquery, google-maps, geolocation

OK, I am taking from an example I found, but my brain is fried from the heat, and google api's always do something to me, anyway

```
function codeLatLng(lat, lng)
{
    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({'latLng': latlng}, function(results, status)
    {
        if (status == google.maps.GeocoderStatus.OK)
        {
            //console.log(results)
            if(results[1])
            {
                //formatted address
                //alert(results[0].formatted_address)
                //find country name
                $('#geolocation_latlng').html(latlng);
                for(var i=0; i<results[0].address_components.length; i++)
                {
                    for(var b=0;b<results[0].address_components[i].types.length;b++)
                    {

                        //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate
                        if(results[0].address_components[i].types[b] == "administrative_area_level_1")
                        {
                            //this is the object you are looking for
                            city=results[0].address_components[i];
                            break;
                        }
                    }
                }
            //city data
            //alert(city.short_name + " " + city.long_name)
            }
            else
            {
                alert("Could not Determin Location");
            }
      }
      else
      {
          alert("Location dection failed: " + status);
      }
    });
} 
```

Its safe to assume the lat and lon are already being passed and I am getting a result, I commented out one alert for formated_address, What I am trying to do is figure out how I can take the zipcode, state, city from that formatted address and show it on screen. But like I said Im fried right now, and Im crunching a clock so I need a bit of help to kick start me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T01:24:58.090

[**My demo**](http://jsfiddle.net/yV6xv/132/) is comical collection of braces, but the idea is to look inside the [**results.types**](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingAddressTypes) for:

```
 "locality"                     // CITY
 "administrative_area_level_1"  // STATE
 "postal_code"                  // ZIP 
```

And as iterating, when you match these types, fill in the values. I asked for the country because this approach is explained in the docs to correspond to the US, but I have no idea, say if it's valid in Singapore. As they say, it's not an exact science.

So if you expand, you might have to check for country first, and match to another `wantedTypes` object with different correspondences to Google Maps' types (in another country the state might be Admin. area level 2).

I use the short name because most likely you want AZ and not Arizona. I didn't go as far to check if cities differ, e.g. St. Paul (short) vs. Saint Paul.

```
 if (status == google.maps.GeocoderStatus.OK) {
        if (results[0]) {
            var typeCorrespondence = {
                "city": "locality",
                "state": "administrative_area_level_1",
                "zipcode": "postal_code"
            };

            var geocoderResults = {};

            var components = results[0].address_components;

            for (var i = 0; i < components.length; i++) {
                for (var j = 0; j < components[i].types.length; j++) {

                    for (myType in typeCorrespondence) {
                        if (typeCorrespondence[myType] == components[i].types[j]) {
                            geocoderResults[myType] = components[i].short_name;
                        }
                    }
                }
            }
            $("#result").val(JSON.stringify(geocoderResults));
        }
    } 
```

# objective-c - (char **)(&samples) 声明了什么？

> ID：11387931
> 
> 赞同：3
> 
> 时间：2012-07-09T00:46:18.127
> 
> 标签：objective-c, ios

鉴于：`SInt16 *samples = NULL;`

声明什么`(char **)(&samples)`？

编辑以显示实际用例：

```
CMBlockBufferGetDataPointer(audioBlockBuffer, audioBlockBufferOffset, &lengthAtOffset, &totalLength, (char **)(&samples));
//  CMBlockBufferGetDataPointer(<CMBlockBufferRef theBuffer>, <size_t offset>, <size_t *lengthAtOffset>, <size_t *totalLength>, <char **dataPointer>) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T00:48:22.227

它将我假设为 16 位短路的数组解释为指向`char`s 的指针数组。这意味着，如果提供的短裤不是有效的指针，那么你就有大麻烦了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T00:49:05.020

鉴于变量只声明一次，这`(char **)(&samples)`是一个指针*表达式*，而不是一个*声明*。它投射一个`SInt16`指向`char**`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T02:36:35.097

**更新：**最初的问题是简单地问`What does (char **)(&samples) declare?`因此，在我的原始答案中，我试图在摘要中概述该语法的可能用途。但随后澄清，这是用于 的参数`CMBlockBufferGetDataPointer`。但为了完整起见，我会留下我原来的答案。

**原答案：**

此语法有两种可能的解释之一。首先，此语法可以用作指向 a 的指针的指针，该指针`SInt16`已转换为指向 a 的指针的指针`char`。顺便说一句，Apple 使用术语*间接引用*来表示这些指向指针的指针。或者，第二，这可能是一个指向数组的指针，该数组`SInt16`已被转换为指向数组的指针`char`。这取决于如何`(char **)&samples`使用它。

着眼于第一种解释，在您的示例中，变量`samples`被定义为，指向（有符号短整数）`(SInt16 *)`的指针（或*直接引用*） 。`SInt16`因此`&samples`是该`samples`指针的地址，可以在需要将指针传递给 a 的指针（间接引用）的任何情况下正确使用`SInt16`，即`(SInt16 **)`.

就您在何处使用指向指针的指针（间接引用）而言，当您有一个将为某个对象分配一些内存的方法并且它需要使用对这个新对象的引用来更新您的一个指针时，经常使用它. 这种结构最常见的 Cocoa 示例是频繁使用`(NSError **)`. [您可以在 Apple 的错误处理编程指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ErrorHandlingCocoa/CreateCustomizeNSError/CreateCustomizeNSError.html#//apple_ref/doc/uid/TP40001806-CH204-BAJIIGCC)中看到这方面的示例。

您的示例的奇怪之处在于，您将`&samples`对 a 的间接引用`SInt16`（或指向 数组的指针`SInt16`）转换为 a `(char **)`，`char`间接引用（或数组`char`）。这让我们所有经过改革的 C 程序员感到不寒而栗。如果你这样做，你应该对使用这个结构的代码非常非常满意，因为这有点危险。但我意识到我们有时会受到遗留代码的限制。

# iphone - 使用 MKiCloudSync 将 UserDefaults 同步到 iCloud。架构 i386 的未定义符号？

> ID：11387938
> 
> 赞同：0
> 
> 时间：2012-07-09T00:47:10.150
> 
> 标签：iphone, xcode, nsuserdefaults, sync, icloud

我正在尝试使用 MKiCloudSync 将我的用户默认设置同步到 iCloud，但是遇到了一个其他人似乎没有使用过这个插件的问题。在构建运行之前，我收到一条错误消息，指出架构 i386 的未定义符号。我知道这是一个相当不具体的错误，但有没有人有 MKiCloudSync 的经验或对问题可能有任何想法？我错过了一个框架吗？谢谢

![安慰](../Images/b3ddf51410c0ca894c67bf4933a97b33.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:21:33.200

在此处遵循解决方案[https://stackoverflow.com/a/10415850/1092219](https://stackoverflow.com/a/10415850/1092219)。.m 文件未正确添加

# mediaelement.js - 如何使用 youtube 视频更改源和加载媒体播放器？

> ID：11387940
> 
> 赞同：0
> 
> 时间：2012-07-09T00:47:13.747
> 
> 标签：mediaelement.js

我正在尝试构建一个播放列表，当第一个视频结束时，我正在更改源并调用调用加载。这在 html5 模式下对我不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T13:03:53.240

youtube pluginApi 的 setSrc 方法不存在或不正确：[https ://github.com/johndyer/mediaelement/issues/381](https://github.com/johndyer/mediaelement/issues/381)

您必须从 pluginApi 中直接调用 loadVideoByUrl() 或 loadVideoById()：

```
var myVideoPlayer = new MediaElementPlayer('#elementId');
myVideoPlayer.media.pluginApi.loadVideoById('myYoutubeId'); 
```

或者创建一个插件来扩展“媒体”索引并添加 setSrc() 来调用这些方法之一：

```
/* global mejs */

(function($) {
    $.extend(MediaElementPlayer.prototype, {
        buildmyyoutube: function(player, controls, layers, media) {
            if (!player.isVideo || media.pluginType !== 'youtube') {
                return;
            }

            $.extend(media, {
                /**
                 * mejs' youtube plugin's setSrc doesn't support youtube urls (the flash one does)
                 * 
                 * @param string urlOrId Can either be a youtube url http://www.youtube.com/watch?v=<YoutubeId>
                 *                       or directly a youtube id
                 */
                setSrc: function (urlOrId) {
                    var queryStr = urlOrId.match(/v=([^&]*)/);
                    var id = urlOrId;

                    if(queryStr !== null) {
                        id = queryStr[1];
                    }
                    this.pluginApi.loadVideoById(id);
                }
            });
        }
    });
})(mejs.$);

var myVideoPlayer = new MediaElementPlayer('#elementId', {features: ['myyoutube']});
myVideoPlayer.setSrc('myYoutubeId');
myVideoPlayer.setSrc('http://www.youtube.com/watch?v=myYoutubeId'); 
```

我没有按原样测试它，我不得不从我使用的一些代码中编辑它，但它应该可以工作。

# linux - 调试器和查找 ROP 小工具

> ID：11387944
> 
> 赞同：3
> 
> 时间：2012-07-09T00:47:35.510
> 
> 标签：linux, debugging, x86

正如标题所说，我正在寻找一个可以在 x86 Linux 上工作的调试器，它可以帮助找到 ROP gadgets，它们是一小段汇编指令。当我在 Windows 上时，我使用 Ollydbg，因为它有一个“搜索命令序列”实用程序，但我还没有找到类似的 Linux 调试器。尝试了 Evan 的调试器，但它没有搜索汇编指令的方法。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:11:59.667

[ROP Gadget](https://github.com/JonathanSalwan/ROPgadget)有一个`-asm`命令行参数（“在 exec 段上搜索特定指令”）并支持 ELF 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T07:00:50.130

我从这里知道一个很好的：[https ://github.com/0vercl0k/rp/downloads](https://github.com/0vercl0k/rp/downloads)

linux86版本还可以，不过我建议下载`win-x64`版本。据说更好。下载后，在终端中输入以下命令：

```
sudo mkdir /opt/rp
sudo mv rp-lin-x64 /opt/rp/
stat -c %a /opt/rp/rp-lin-x64
sudo chmod 755 /opt/rp/rp-lin-x64
sudo ln -s /opt/rp/rp-lin-x64 /usr/bin/rp64 
```

# iphone - 为什么我在 xcode 中找不到我的 Iphone 设备

> ID：11387947
> 
> 赞同：1
> 
> 时间：2012-07-09T00:48:18.647
> 
> 标签：iphone, ios

我已将我的 iphone 添加为设备并将其与配置相关联。然后我下载最新的配置并安装它（我之前已经成功添加了 ipad 作为测试设备）。

现在，在“管理器”中，我可以看到 iphone 设备，但是当我连接 iphone 设备时，我找不到运行我的应用程序的 iphone 设备。我的软件版本是4.2.1，是不是最新的版本导致了这个问题？或者可能的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:50:56.537

是的，iPhone 的软件版本很重要。它必须在项目中列出的最小部署目标范围内。所以：

1.  只需确保部署目标对于您的设备来说足够低。无论如何，如果您更改“iOS 部署目标”，您的设备应该会显示出来。（另外，顺便说一句，如果您更改了目标的最小部署（即，如果您更改了它，使其不再默认为项目的最小“iOS 部署目标”），您可能也必须调整该设置。）

2.  另外，如果您的 iOS 版本是 4.2.1，我想知道您是否正在处理 iPhone 3G（3GS 之前的型号）。我这么说是因为 4.2.1 是旧硬件上的最高 iOS 版本。无论如何，如果是这样的话，你应该明白 iPhone 3G 和早期的 iPod touch 使用的是 ARMV6 处理器，而不是 ARMV7 处理器。因此，例如，即使您将“iOS 部署目标”更改为 iOS 4.0，您也会看到您的 iPhone 3G 出现在您可以构建的设备列表中，但它不起作用（而且它不会给你任何有意义的错误信息）。如果您正在处理 3G 或更早版本，这只是一个问题。要支持那些较旧的设备（如果这是一个问题），除了上面讨论的“iOS部署目标”设置之外，您还必须转到“构建设置”选项卡，

3.  完成此操作后，您可能需要单击有关“验证设置”的按钮，因为它建议了与 cpu 相关的修复。不知道你是否需要它，但我让它修复我的项目。

4.  最后，您需要返回左侧的 Project Navigator 面板（您可以在其中看到所有源文件），找到您的应用程序的 plist（最简单的方法是在左下角的搜索框中键入“plist”文件），然后转到“所需的设备功能”。展开该列表，如果您在那里看到 armv7，只需删除 armv7 条目。

仅当您需要支持较旧的硬件时才需要第 2-4 点，但这不必要地复杂且不直观。希望这会有所帮助。

# spring - 使用注解覆盖 Bean 配置

> ID：11387950
> 
> 赞同：1
> 
> 时间：2012-07-09T00:48:51.773
> 
> 标签：spring, annotations, classpath, overriding, spring-annotations

用例：我通过类路径扫描@ComponentScan 配置了我的容器。对于我的测试配置，我需要能够模拟特定的 bean。

由于加载顺序，通过类路径扫描加载的 bean 在使用 @Configuration 时无法正确覆盖。下面的代码示例演示了该问题。BaseExample.java 展示了如何通过配置覆盖 bean。ScanExample.java 显示覆盖通过 @ComponentScan 加载的 bean 被跳过（见最后注释）。

[bitbucket](https://bitbucket.org/dcompiled/spring-override-bug)上提供了一个演示项目。

```
// BaseExample.java

package com.glassworks.mock;

import org.mockito.Mockito;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import com.google.common.base.Joiner;

public class BaseExample {
    private static final Logger log = LoggerFactory.getLogger(BaseExample.class);
    private static AnnotationConfigApplicationContext ctx;

    public static void main(String args[]) {
        ctx = new AnnotationConfigApplicationContext(Config.class, OverrideConfig.class);

        String beans[] = ctx.getBeanDefinitionNames();
        log.info("{} beans found: {}", beans.length, Joiner.on(",").join(beans));

        for(String bean : beans) {
            log.info("{}: {}", bean, ctx.getBean(bean));
        }
    }

    @Configuration
    public static class Config {
        @Bean
        public AccountDao accountDao() {
            log.debug("Creating accountDao [Config]");
            return new AccountDao();
        }
    }

    @Configuration
    public static class OverrideConfig {
        @Bean
        public Object accountDao() {
            log.debug("Creating accountDao [OverrideConfig]");
            return Mockito.mock(AccountDao.class);
        }
    }

} 
```

输出：21:05 信息 | com.glassworks.mock.BaseExample | accountDao：模拟 AccountDao，hashCode：666537607

```
[// ScanExample.java

package com.glassworks.mock;

import org.mockito.Mockito;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

import com.google.common.base.Joiner;

public class ScanExample {
    private static final Logger log = LoggerFactory.getLogger(ScanExample.class);
    private static AnnotationConfigApplicationContext ctx;

    public static void main(String args[]) {
        ctx = new AnnotationConfigApplicationContext(Config.class, OverrideConfig.class);

        String beans[] = ctx.getBeanDefinitionNames();
        log.info("{} beans found: {}", beans.length, Joiner.on(",").join(beans));

        for(String bean : beans) {
            log.info("{}: {}", bean, ctx.getBean(bean));
        }
    }

    @Configuration
    @ComponentScan("com.glassworks.services")
    public static class Config {

    }

    @Configuration
    public static class OverrideConfig {
        @Bean
        public AccountDao accountDao() {
            log.debug("Creating accountDao [OverrideConfig]");
            return Mockito.mock(AccountDao.class);
        }
    }

} 
```

输出：21:08 信息 | com.glassworks.mock.ScanExample | accountDao：com.glassworks.services.AccountDao@48805ebb

```
// AccountDao.java
package com.glassworks.services;

import org.springframework.stereotype.Repository;

@Repository
public class AccountDao {

} 
```

**注意** 值得注意的是，将日志记录设置为调试时，Spring 表示它正在跳过定义。这似乎是一个错误。

21:09 调试 | oscaConfigurationClassBeanDefinitionReader | 跳过加载 [BeanMethod:name=accountDao,declaringClass=com.glassworks.mock.ScanExample$OverrideConfig] 的 bean 定义：bean 'accountDao' 的定义已经存在。这可能是由于 XML 中的覆盖。

# android - greendao 从数据库和会话中删除

> ID：11387961
> 
> 赞同：8
> 
> 时间：2012-07-09T00:51:20.893
> 
> 标签：android, greendao

我正在将 greendao 用于一个 android 项目，并且想知道如何从数据库和会话缓存中正确删除和对象。目前我执行以下操作从数据库中删除：

```
ChatDao chatDao = daoSession.getChatDao();
chatDao.queryBuilder().buildDelete().executeDeleteWithoutDetachingEntities(); 
```

但是，正如方法名称和文档所述，这可能会在会话缓存中留下陈旧的对象，我怎样才能从那里删除对象呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T05:45:05.310

为了清除 DaoSession 中的缓存对象，请使用以下调用：

```
DaoSession.clear(); 
```

它将清除会话身份范围内的所有对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T12:13:53.163

正如 Anatoliy 所描述的，您可以使用 DaoSession.clear()。但是，它将清除会话中的所有对象。如果您想避免这种情况，您必须执行常规查询并删除结果实体（例如使用 deleteInTx）。

# php - PHP文件上传然后显示下载链接

> ID：11387962
> 
> 赞同：0
> 
> 时间：2012-07-09T00:51:28.397
> 
> 标签：php, file-upload

我正在使用下面的简单脚本通过 php 上传一个 zip 文件，然后将其解压缩到我的服务器上。

该文件将是一个压缩文件夹。上传完成后，我想回显一个指向新文件夹的链接。

因此，例如，如果我上传一个包含名为“bar”的文件夹的 zip 文件，在成功消息之后我想回显“http://foo.com/bar”。

非常感谢任何帮助。

```
<?php
if($_FILES["zip_file"]["name"]) {
$filename = $_FILES["zip_file"]["name"];
$source = $_FILES["zip_file"]["tmp_name"];
$type = $_FILES["zip_file"]["type"];

$name = explode(".", $filename);
$accepted_types = array('application/zip', 'application/x-zip-compressed',
'multipart/x-zip', 'application/x-compressed');
foreach($accepted_types as $mime_type) {
    if($mime_type == $type) {
        $okay = true;
        break;
    } 
}

$continue = strtolower($name[1]) == 'zip' ? true : false;
if(!$continue) {
    $message = "The file you are trying to upload is not a .zip file. Please try again.";
}

$target_path = "/home/var/foo.com/".$filename;  // change this to the correct    
site     path
if(move_uploaded_file($source, $target_path)) {
    $zip = new ZipArchive();
    $x = $zip->open($target_path);
    if ($x === true) {
        $zip->extractTo("/home/var/foo.com/"); // change this to the correct site path
        $zip->close();

        unlink($target_path);
    }
    $message = "Your .zip file was uploaded and unpacked.";
} else {    
    $message = "There was a problem with the upload. Please try again.";
}
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1   
/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>

<body>
<?php if($message) echo "<p>$message</p>"; ?>
<form enctype="multipart/form-data" method="post" action="">
<label>Choose a zip file to upload: <input type="file" name="zip_file" /></label>
<br />
<input type="submit" name="submit" value="Upload" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:07:46.447

快速浏览一下所有内容，我会说

```
$message = "Your .zip file was uploaded and unpacked. <a href=\"http://domain.com".$filename."\">Files</a>"; 
```

根据我在您的脚本中收集的内容，您告诉它直接上传到域的服务器目录路径。作为文件夹名称附加`$filename`到该路径，因此它会相应地创建一个文件夹。从此，它像您对任何其他链接一样对域进行硬编码，然后将相同的文件名变量附加到它的末尾，以便它显示您刚刚上传到的同一个文件夹。

这只是我的总体猜测，尽管再次只是快速浏览一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:13:41.260

通过详细查看您的代码，我想说我可以给出一些评论：

1）您应该使用 mkdir() 在您网站的上传目录中创建一个新目录（在这种情况下我假设它是根目录）。

2）您不需要在解压缩之前移动上传的文件。只需将其解压缩到新创建的目录中。确保没有另一个同名目录。上传的文件应该会被 PHP 自动删除，所以不需要取消链接。

3) 参考：

```
$name = explode(".", $filename); 
```

如果文件名有多个点会怎样？你真的应该使用 substr() 和 strrpos() 来获取最后一个点之后的所有内容。

4) 上传后，只需回显路径[http://www.yoursite.com/newdir](http://www.yoursite.com/newdir) - 看不到问题。如果您可以更具体地说明您遇到的困难，请发表评论。

# user-interface - 在 Gmod 中使用 Derma GUI 进行 SENT 时出错

> ID：11387963
> 
> 赞同：0
> 
> 时间：2012-07-09T00:51:32.480
> 
> 标签：user-interface, null, lua

我正在使用 Lua 在 Gmod 中创建一个 SENT，我希望它有一个使用 Derma 的简单 GUI 菜单。我已将以下内容放入我的 cl_init.lua 文件中：

```
local plantwinow = vgui.Create("DFrame")
plantwinow:SetSize(202, 102)
plantwinow:Center()
plantwinow:SetTitle("Level " +lvltext +" Plant")
plantwinow:SetDraggable(true)
plantwinow:SetSizable(false)
plantwinow:ShowCloseButton(true)
plantwinow:MakePopup() 
```

这给了我错误

```
prog.lua:1: attempt to index global 'vgui' (a nil value) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T19:22:51.233

尝试使用包含和 AddCSLuafile 注册您的文件，它是这样工作的：shared.lua：

```
if SERVER then
      AddCSLuaFile("cl_init.lua")
else
      include("cl_init.lua")
end 
```

如果你的插件/实体有 init.lua 那么请告诉我你的 init.lua。

# java - 提示计算器错误android 2.2应用程序

> ID：11387964
> 
> 赞同：0
> 
> 时间：2012-07-09T00:52:20.997
> 
> 标签：java, android, xml, eclipse

一个简单的 android 应用程序来计算提示，我无法弄清楚这个错误。java 代码没有错误，xml 有几个警告。两者都发错了，但是当我运行它时，应用程序立即退出并说“应用程序tipConverter（process.com.example.tipconverter）已意外停止。请再试一次。” 我不知道为什么。

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout
    android:id="@+id/widget0"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Tip Calculator"/>
    <TextView
        android:id="@+id/widget28"
        android:layout_width="99dp"
        android:layout_height="17dp"
        android:text="Amount of Bill"
        android:layout_x="40dp"
        android:layout_y="32dp"/>
    <TextView
        android:id="@+id/widget29"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Percentage to Tip"
        android:layout_x="40dp"
        android:layout_y="82dp"/>
    <TextView
        android:id="@+id/widget30"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Number of People"
        android:layout_x="40dp"
        android:layout_y="132dp"/>
    <TextView
        android:id="@+id/widget31"
        android:layout_width="wrap_content"
        android:layout_height="18dp"
        android:text="Tip Amout"
        android:layout_x="40dp"
        android:layout_y="262dp"/>
    <TextView
        android:id="@+id/widget32"
        android:layout_width="wrap_content"
        android:layout_height="18dp"
        android:text="Total Per Person"
        android:layout_x="40dp"
        android:layout_y="352dp"/>
    <TextView
        android:id="@+id/widget33"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Total To Pay"
        android:layout_x="40dp"
        android:layout_y="302dp"/>
    <Button
        android:id="@+id/btncalculate"
        android:layout_width="87dp"
        android:layout_height="wrap_content"
        android:text="Calculate"
        android:layout_x="40dp"
        android:layout_y="182dp"/>
    <Button
        android:id="@+id/btnreset"
        android:layout_width="86dp"
        android:layout_height="wrap_content"
        android:text="Reset"
        android:layout_x="140dp"
        android:layout_y="182dp"/>
    <EditText
        android:id="@+id/txtbillamount"
        android:layout_width="wrap_content"
        android:layout_height="35dp"
        android:text="100"
        android:textSize="18sp"
        android:layout_x="200dp"
        android:layout_y="22dp"/>
    <EditText
        android:id="@+id/txtpercentage"
        android:layout_width="51dp"
        android:layout_height="36dp"
        android:text="10"
        android:textSize="18sp"
        android:layout_x="200dp"
        android:layout_y="72dp"/>
    <EditText
        android:id="@+id/txtpeople"
        android:layout_width="wrap_content"
        android:layout_height="39dp"
        android:text="1         "
        android:textSize="18sp"
        android:layout_x="200dp"
        android:layout_y="122dp"/>
    <TextView
        android:id="@+id/txttipamount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:layout_x="200dp"
        android:layout_y="262dp"/>
    <TextView
        android:id="@+id/txttotal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:layout_x="200dp"
        android:layout_y="302dp"/>
    <TextView
        android:id="@+id/txtperperson"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:layout_x="200dp"
        android:layout_y="352dp"/>

</AbsoluteLayout> 
```

这是java

```
package com.android;

import com.example.tipconverter.R;
import android.app.Activity;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Button;
import android.view.View;

public class tipcalc extends Activity {
    private EditText txtbillamount;
    private EditText txtpeople;
    private EditText txtpercentage;
    private TextView txtperperson;
    private TextView txttipamount;
    private TextView txttotal;
    private Button btncalculate;
    private Button btnreset;
    private double billamount = 0;
    private double percentage = 0;
    private double numofpeople=0;
    private double tipamount = 0;
    private double totaltopay = 0;
    private double perperson = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initControls();
    }

    private void initControls() {
        txtbillamount = (EditText)findViewById(R.id.txtbillamount);
        txtpeople = (EditText)findViewById(R.id.txtpeople);
        txtpercentage = (EditText)findViewById(R.id.txtpercentage);
        txtperperson=(TextView)findViewById(R.id.txtperperson);
        txttipamount=(TextView)findViewById(R.id.txttipamount);
        txttotal=(TextView)findViewById(R.id.txttotal);
        btncalculate = (Button)findViewById(R.id.btncalculate);
        btnreset = (Button)findViewById(R.id.btnreset);
        btncalculate.setOnClickListener(new Button.OnClickListener() { 
            public void onClick (View v)  { 
                calculate(); 
            }
        });

        btnreset.setOnClickListener(new Button.OnClickListener() { 
            public void onClick (View v){ 
                reset(); 
            }
        });
    }

    private void calculate() {
        billamount=Double.parseDouble(txtbillamount.getText().toString());
        percentage=Double.parseDouble(txtpercentage.getText().toString());
        numofpeople=Double.parseDouble(txtpeople.getText().toString());
        tipamount=(billamount*percentage)/100;
        totaltopay=billamount+tipamount;
        perperson=totaltopay/numofpeople;
        txttipamount.setText(Double.toString(tipamount));
        txttotal.setText(Double.toString(totaltopay));
        txtperperson.setText(Double.toString(perperson));
    }

    private void reset() {
        txtbillamount.setText("");
        txtpeople.setText("");
        txtpercentage.setText("");
        txtperperson.setText("");
        txttipamount.setText("");
        txttotal.setText("");
    }
} 
```

任何提示或帮助将不胜感激。谢谢！

*编辑*

这是 logcat 打印的内容

```
07-09 02:49:02.208: D/AndroidRuntime(283): >>>>>>>>>>>>>> AndroidRuntime START     <<<<<<<<<<<<<<
07-09 02:49:02.208: D/AndroidRuntime(283): CheckJNI is ON
07-09 02:49:02.278: D/AndroidRuntime(283): --- registering native functions ---
07-09 02:49:02.598: D/AndroidRuntime(283): Shutting down VM
07-09 02:49:02.598: D/dalvikvm(283): Debugger has detached; object registry had 1 entries
07-09 02:49:02.608: I/AndroidRuntime(283): NOTE: attach of thread 'Binder Thread #3'  failed
07-09 02:49:02.878: D/AndroidRuntime(291): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
07-09 02:49:02.878: D/AndroidRuntime(291): CheckJNI is ON
07-09 02:49:02.958: D/AndroidRuntime(291): --- registering native functions ---
07-09 02:49:03.267: I/ActivityManager(58): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.tipconverter/com.example.tipconverter }
07-09 02:49:03.277: I/ActivityManager(58): Start proc com.example.tipconverter for activity com.example.tipconverter/com.example.tipconverter: pid=297 uid=10036 gids={}
07-09 02:49:03.317: D/AndroidRuntime(291): Shutting down VM
07-09 02:49:03.317: D/dalvikvm(291): Debugger has detached; object registry had 1 entries
07-09 02:49:03.577: D/AndroidRuntime(297): Shutting down VM
07-09 02:49:03.577: W/dalvikvm(297): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-09 02:49:03.597: I/ARMAssembler(58): generated scanline__00000077:03545404_00000004_00000000 [ 47 ipp] (67 ins) at [0x381c90:0x381d9c] in 289122 ns
07-09 02:49:03.597: E/AndroidRuntime(297): FATAL EXCEPTION: main
07-09 02:49:03.597: E/AndroidRuntime(297): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.tipconverter/com.example.tipconverter}: java.lang.ClassNotFoundException: com.example.tipconverter in loader dalvik.system.PathClassLoader[/data/app/com.example.tipconverter-1.apk]
07-09 02:49:03.597: E/AndroidRuntime(297):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
07-09 02:49:03.597: E/AndroidRuntime(297):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-09 02:49:03.597: E/AndroidRuntime(297):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-09 02:49:03.597: E/AndroidRuntime(297):  at   android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-09 02:49:03.597: E/AndroidRuntime(297):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 02:49:03.597: E/AndroidRuntime(297):  at android.os.Looper.loop(Looper.java:123)
07-09 02:49:03.597: E/AndroidRuntime(297):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-09 02:49:03.597: E/AndroidRuntime(297):  at java.lang.reflect.Method.invokeNative(Native Method)
07-09 02:49:03.597: E/AndroidRuntime(297):  at java.lang.reflect.Method.invoke(Method.java:521)
07-09 02:49:03.597: E/AndroidRuntime(297):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-09 02:49:03.597: E/AndroidRuntime(297):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-09 02:49:03.597: E/AndroidRuntime(297):  at dalvik.system.NativeStart.main(Native Method)
07-09 02:49:03.597: E/AndroidRuntime(297): Caused by: java.lang.ClassNotFoundException: com.example.tipconverter in loader dalvik.system.PathClassLoader[/data/app/com.example.tipconverter-1.apk]
07-09 02:49:03.597: E/AndroidRuntime(297):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
07-09 02:49:03.597: E/AndroidRuntime(297):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
07-09 02:49:03.597: E/AndroidRuntime(297):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
07-09 02:49:03.597: E/AndroidRuntime(297):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-09 02:49:03.597: E/AndroidRuntime(297):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
07-09 02:49:03.597: E/AndroidRuntime(297):  ... 11 more
07-09 02:49:03.617: W/ActivityManager(58):   Force finishing activity com.example.tipconverter/com.example.tipconverter
07-09 02:49:04.119: W/ActivityManager(58): Activity pause timeout for HistoryRecord{45075650 com.example.tipconverter/com.example.tipconverter}
07-09 02:49:14.293: W/ActivityManager(58): Activity destroy timeout for     HistoryRecord{45075650 com.example.tipconverter/com.example.tipconverter} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:06:37.300

您是否在 Android 清单中声明了您的活动？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:45:15.457

您可以查看日志：

```
[2012-07-08 18:05:33 - tipConverter] Starting activity    com.example.tipconverter.MainActivity on device emulator-5554 
```

它正在寻找 Android 清单文件中定义的 MainActivity.java。您可能已将其重命名为tipcalc.java。您需要在 Android 清单文件中进行调整。

**更新：**

这似乎是一个损坏的 Android 项目设置。结果，生成了一个错误的 APK。您可以检查 Android 项目的 .properties 和 .project 文件。如有疑问，请尝试从头开始创建一个新项目并比较所提及文件的差异。还要确保您拥有正确的目标 SDK 版本。

# python - Django 视图和模板，包括 Jinja2 和 Mako，教程和资源

> ID：11387972
> 
> 赞同：0
> 
> 时间：2012-07-09T00:54:33.440
> 
> 标签：python, django, jinja2, mako

我是 Python 和 Django 的新手，但现在对基本数据库和后端编程有了相当深入的了解。但是，我发现很难学习视图和模板层。我想知道除了官方 Django 文档之外，是否有人可以建议其他教程和资源。

我也是 HTML 新手，对使用 Mako 或 Jinja2 的教程持开放态度。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:33:50.640

我们在一个大型项目中使用 Mako+Django 已经快两年了，效果非常好。Mako 比标准的 Django 模板要好得多。当我已经必须了解 Python、Javascript、HTML、JQuery 等时，为什么还要学习*另一种模板语言？*使用 Mako，我可以在我的 HTML 页面中使用常规 Python，包括所有库。并且在后端集成了 Django，模板保持简单。

你可能想看看我的 Django+Mako 入门工具包。它以我喜欢的方式（不一定是标准方式）来制作模板，但它是一个完全设置并准备好运行的项目。您可以从它开始并自定义。 [http://warp.byu.edu/dist/django-mako.zip](http://warp.byu.edu/dist/django-mako.zip)

**更新**：博客已移至[http://www.goalbrecht.com/2013/10/django-mako-plus-a-starter-kit/](http://www.goalbrecht.com/2013/10/django-mako-plus-a-starter-kit/) ，该项目的其他更新在[Django-Mako-Plus 的 Github](https://github.com/doconix/django-mako-plus)上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:00:20.283

我们`Mako`在工作场所使用，我强烈建议不要使用它。这对您自己的视图非常有用，但是如果您想使用任何包含模板的第三方库，它们根本就不起作用。

除此之外，官方文档和谷歌搜索您遇到的特定问题是使用 django 模板时的最佳方式。不幸的是，我无法评论 jinja 模板。

# python - 这是什么噪音？

> ID：11387975
> 
> 赞同：2
> 
> 时间：2012-07-09T00:54:59.177
> 
> 标签：python, random, numpy, noise

会产生什么样的噪音`numpy.random.random((NX,NY))`？白噪声？如果它有所作为，我有时会制作 3D 或 1D 噪音（参数是`(NX,NY,NZ)`或`(N,)`）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T00:59:02.683

```
>>> help(numpy.random.random)
Help on built-in function random_sample:

random_sample(...)
    random_sample(size=None)

    Return random floats in the half-open interval [0.0, 1.0).

    Results are from the "continuous uniform" distribution over the
    stated interval.  To sample :math:`Unif[a, b), b > a` multiply
    the output of `random_sample` by `(b-a)` and add `a`::

      (b - a) * random_sample() + a
    ... 
```

正如帮助所说，`numpy.random.random()`提供“连续均匀”分布。

对于“高斯/白噪声”分布，请使用[`numpy.random.normal()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.normal.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:01:30.580

白噪声的平均值为 0，标准差为 1。因为，

```
std(numpy.random.random(1000000)) ≈ 0.2889 
```

和

```
mean(numpy.random.random(1000000)) ≈ 0.5 
```

numpy.random.random() 不会产生白噪声；根据定义。但是没有什么可以产生白噪声，因为它是一种理论结构。

# mysql - 在设计数据库时是否通常删除实际记录或切换“未显示标志”？

> ID：11387976
> 
> 赞同：0
> 
> 时间：2012-07-09T00:55:13.143
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, database-design, permissions

有时，出于预防犯罪的目的，您需要保留您的日志和记录。当您授予用户删除记录的权限时，就意味着您将失去证据。一般情况下，你真的会删除记录吗？或切换不显示标志以保留日志？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T01:00:56.427

如果您允许对数据进行任何修改，那么您将失去证据。也许你应该设计你的数据库，这样你就永远不会使用`UPDATE`or `DELETE`，only `INSERT`。

除非政府告诉您保留所有记录，否则我建议您不要太过分地去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T01:05:15.537

除了您提到的出于审计目的保留记录外，使用“已删除”标志还允许您合并“撤消”功能。

如果您以物理方式删除数据，那么要恢复旧数据将是一项相当大的工作。但是，如果您使用标志，那么它可以像重新设置标志以使数据重新出现一样简单。

如果您的数据库中发生大量删除，那么标志的缺点是您将保留大量未使用的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T02:53:56.557

您可以不只是删除，而是首先将记录插入到历史表中以进行任何类型的修改。然后，您将始终拥有可用数据，而主表中没有不必要的信息

# apache - 密码保护并且只允许一个IP地址访问一个目录？

> ID：11387982
> 
> 赞同：1
> 
> 时间：2012-07-09T00:56:45.520
> 
> 标签：apache, security, .htaccess

我的网站上有一个目录，我需要确保除了我自己之外没有人可以进入。从我所做的阅读来看，似乎有两种方法可以保护目录：

1.  使用 .htaccess 文件对目录进行密码保护
2.  拒绝访问除我自己以外的所有 IP 地址访问目录，也使用 .htaccess 文件

我需要尽可能安全地保护目录中的文件，所以我想我会使用这两种方法进行双重保护。

问题1：我错过了什么吗？（即我可以添加另一层保护吗？）

问题 2：我需要在 .htaccess 文件中放入什么才能使上述内容正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T01:17:15.760

您的 .htaccess 文件将包含：

```
AuthUserFile /usr/local/nate/safe_place/.htpasswd
AuthGroupFile /dev/null
AuthName "Protected Files"
AuthType Basic

require user nate
order deny, allow
deny from all
allow from 127.0.0.1 
```

该`.htaccess`文件位于您要保护的目录中。

`/usr/local/nate/safe_place/.htpasswd`您还需要一个包含文本 username:password_hash的 .htpasswd 文件（如上所示）。因此，如果我们使用“nate”作为示例并使用“secret”作为密码（请不要使用它），您会得到：

```
nate:XmN6pwFyy3Il2 
```

您可以使用此工具生成自己的密码文件： [http ://www.tools.dynamicdrive.com/password/](http://www.tools.dynamicdrive.com/password/)

只要确保没有人可以读取您的`.htpasswd`文件。另请注意，基本身份验证本身不加密。如果你在一个开放的网络上，任何人都可以看到你的密码和通过网络传输的所有秘密数据。如果确实是那个秘密，请确保您通过 https 访问您的网站。

您可以在此处阅读有关`.htaccess`文件的更多信息： [http ://www.javascriptkit.com/howto/htaccess.shtml](http://www.javascriptkit.com/howto/htaccess.shtml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T01:02:35.927

假设您正在运行 Apache 并且有一个允许使用文件的`AllowOverride`指令，那么以下应该是您的一个很好的起点：`.htaccess``<Limit>`

```
<Limit GET>
    Order deny,allow
    Deny from all
    Allow from IP_ADDRESS_HERE
</Limit> 
```

更多文档`<Limit>`：[http](http://httpd.apache.org/docs/current/mod/core.html#limit) ://httpd.apache.org/docs/current/mod/core.html#limit 和访问控制：[http ://httpd.apache.org/docs/2.2/howto/access.html](http://httpd.apache.org/docs/2.2/howto/access.html)

# ios - iOS 谷歌街景 API

> ID：11387983
> 
> 赞同：0
> 
> 时间：2012-07-09T00:56:53.003
> 
> 标签：ios, google-street-view

我想在 iPad（最新的）上设置一个带有“可浏览”街景的网页。我注意到街景上的滚动控件和小指南针类型视图似乎需要 Flash，这在iPad。那么是否可以仅使用 JavaScript 而没有 Flash 进行基本的滚动、全景等操作？

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:59:38.760

iOS 6 处于保密协议下，无法在此讨论。请将所有问题发送至[http://devforums.apple.com](http://devforums.apple.com)

# java - j2me如何显示在线图片？

> ID：11387984
> 
> 赞同：2
> 
> 时间：2012-07-09T00:56:55.083
> 
> 标签：java, image, java-me

我知道如何在 J2me 中显示本地图像。如何显示在线图像？以下代码（下面的图像 URL 仅用于演示目的）不会产生任何结果。

`Image logo = Image.createImage("http://whatever.com/img/whatever.png");`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:39:12.503

此类问题的第一个呼叫端口应该是[MIDP 2.0 Javadocs](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/index.html)。

在那里你会看到`createImage`有一个接受;的[重载。](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Image.html#createImage%28java.io.InputStream%29)`InputStream`这将做你需要的。

或者，您可以将整个图像下载到一个字节数组中，并使用[另一种替代形式](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Image.html#createImage%28byte%5B%5D,%20int,%20int%29)的`createImage`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:39:29.093

您需要通过手动加载图像`HttpConnection`

使用此方法加载图像：

```
public Image loadImage(String url) throws IOException {
    HttpConnection hpc = null;
    DataInputStream dis = null;
    try {
      hpc = (HttpConnection) Connector.open(url);
      int length = (int) hpc.getLength();
      byte[] data = new byte[length];
      dis = new DataInputStream(hpc.openInputStream());
      dis.readFully(data);
      return Image.createImage(data, 0, data.length);
    } finally {
      if (hpc != null)
        hpc.close();
      if (dis != null)
        dis.close();
    }
} 
```

另请参阅[本教程](http://www.java2s.com/Tutorial/Java/0430__J2ME/LoadImagewithHttpConnection.htm)

# jquery - 我无法协调 Wordpress 和 jQuery

> ID：11387990
> 
> 赞同：1
> 
> 时间：2012-07-09T00:57:40.200
> 
> 标签：jquery, wordpress

我阅读了 Wordpress 和 jQuery，发现你不能打电话`$()`，所以我切换到没有冲突。[在这里](http://jsfiddle.net/H4EPZ/3/)，我有一个关于我的问题的小提琴。

我已经查看了页面上的源代码并复制了菜单的 html。我以正确的顺序复制了两个加载的 JavaScript 文件。我输入了一些 alert('LOADED: JS File x') 框来验证它们是否加载。

我从我正在创建的主题的 style.css 中复制了与此问题相关的 CSS。

唯一的问题是它做了我想要的并期望它做的事情。那么有谁知道为什么它在 Wordpress 中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:34:54.237

如果您的 jQuery 代码执行您想要的操作并期望它在 WordPress 之外执行，那么问题在于 WordPress 中的实现。

正如 elclanns 所说，您可以在 WordPress 中使用 jQuery 时使用 $ 符号，但这完全取决于它在主题中的加载方式。WordPress 附带 jQuery 的副本，如果您使用他们提供的那个，您将不得不在无冲突模式下使用它，这意味着您可能不会使用“$”。另一个选项是取消注册 jQuery 的 WordPress 副本并从 CDN 或从您放在主题目录中的本地副本加载您自己的副本。请注意，这也取决于您的主题，我假设这是您自己的主题，但如果不是，您将不得不看看那里正在做什么。

首先检查源代码并查看是否正在加载 jquery。在你的其他脚本之前。

如果是，它要么是 WP 版本在头部排队，要么是在你的 functions.php 中被调用。

这里有几个链接可以帮助您开始确保以正确的方式加载 jquery，

基本思想： [http](http://digwp.com/2009/06/including-jquery-in-wordpress-the-right-way/) ://digwp.com/2009/06/includes-jquery-in-wordpress-the-right-way/ （请注意在本页底部，您还可以找到有关如何从 CDN 加载 WP 中的 js 库）

以及更多涉及但最终值得的文章： [http ://wp.tutsplus.com/articles/how-to-include-javascript-and-css-in-your-wordpress-themes-and-plugins/](http://wp.tutsplus.com/articles/how-to-include-javascript-and-css-in-your-wordpress-themes-and-plugins/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:07:11.250

您的问题几乎无法回答，因为它取决于您尚未发布的服务器代码。jsfiddle 示例几乎没有帮助，但这里有几个要点。

> 我阅读了 Wordpress 和 Jquery，发现你不能调用 $() 所以我切换到没有冲突。

是的你可以。这完全取决于您如何包含 jQuery。默认情况下，WordPress 将在无冲突模式下加载它，但您可以使用[`wp_enqueue_script`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)并[`wp_deregister_script`](http://codex.wordpress.org/Function_Reference/wp_deregister_script)阻止默认模式并加载您自己的版本。

> 我以正确的顺序复制了两个加载的 javascript 文件。我输入了一些 alert('LOADED: JS File x') 框来验证它们是否加载。

加载脚本的“正确”WordPress 方式是在您的文件中使用`wp_enqueue_script`and 。`wp_register_script``functions.php`

# php - php zipArchive 仅解压缩某些扩展

> ID：11387993
> 
> 赞同：2
> 
> 时间：2012-07-09T00:58:17.300
> 
> 标签：php, unzip, ziparchive

我需要解压缩上传的内容。但出于安全目的，必须验证文件只是图像文件，以便有人无法将 php 添加到 zip 中然后稍后运行它。

在进行解压缩时，我还需要保留文件结构。

```
$zip->extractTo($save_path . $file_name, array('*.jpg','*.jpeg','*.png','*.gif') ); 
```

不返回空值。有没有我可以使用的参数，或者我必须使用正则表达式循环遍历 zip 文件以匹配扩展名并创建文件夹并使用代码保存文件？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T01:09:01.337

来自[php.net](http://www.php.net/manual/en/ziparchive.extractto.php#100875)，处理 .txt 文件

```
<?php 
   $value="test.zip"; 
   $filename="zip_files/$value"; 
   $zip = new ZipArchive;
     if ($zip->open($filename) === true) {
      echo "Generating TEXT file.";
          for($i = 0; $i < $zip->numFiles; $i++) { 
             $entry = $zip->getNameIndex($i);
               if(preg_match('#\.(txt)$#i', $entry))
                {
                ////This copy function will move the entry to the root of "txt_files" without creating any sub-folders unlike "ZIP->EXTRACTO" function.
                 copy('zip://'.dirname(__FILE__).'/zip_files/'.$value.'#'.$entry, 'txt_files/'.$value.'.txt'); 
                } 
              }  
             $zip->close();
            }
    else{
         echo "ZIP archive failed";
        }
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T05:23:33.033

对于将来需要这个的人来说，这是我的解决方案。感谢 Ciro 的帖子，我只需要扩展你的一点。为了确保创建了所有文件夹，我首先为文件夹循环，然后进行提取。

```
$ZipFileName = dirname(__FILE__)."/test.zip";
$home_folder = dirname(__FILE__)."/unziped";

mkdir($home_folder);

$zip = new ZipArchive;
if ($zip->open($ZipFileName ) === true) 
{

    //make all the folders
    for($i = 0; $i < $zip->numFiles; $i++) 
    { 
        $OnlyFileName = $zip->getNameIndex($i);
        $FullFileName = $zip->statIndex($i);    
        if ($FullFileName['name'][strlen($FullFileName['name'])-1] =="/")
        {
            @mkdir($home_folder."/".$FullFileName['name'],0700,true);
        }
    }

    //unzip into the folders
    for($i = 0; $i < $zip->numFiles; $i++) 
    { 
        $OnlyFileName = $zip->getNameIndex($i);
        $FullFileName = $zip->statIndex($i);    

        if (!($FullFileName['name'][strlen($FullFileName['name'])-1] =="/"))
        {
            if (preg_match('#\.(jpg|jpeg|gif|png)$#i', $OnlyFileName))
            {
                copy('zip://'. $ZipFileName .'#'. $OnlyFileName , $home_folder."/".$FullFileName['name'] ); 
            } 
        }
    }
    $zip->close();
} else
{
    echo "Error: Can't open zip file";
} 
```

# cmake - cmake 是否取代了配置？

> ID：11387997
> 
> 赞同：1
> 
> 时间：2012-07-09T00:59:23.663
> 
> 标签：cmake

突然间，我开始看到这个 cmake doohickey。太好了，现在我已经习惯了配置/制作/制作安装，还需要学习一件事

它是如何工作的，什么是 configure --help 与 cmake 的等价物，以显示特定源代码的构建选项？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T01:16:06.037

[http://dev.mysql.com/doc/internals/en/autotools-to-cmake.html](http://dev.mysql.com/doc/internals/en/autotools-to-cmake.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:31:07.677

您可以[在交互模式下运行 CMake，](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#opt%3a-i)以获取有关（以及设置）当前 CMakeLists.txt 中每个缓存变量的有用信息：

```
cmake -i <path-to-source> 
```

如果您只想[列出所有非高级缓存变量](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#opt%3a-LAH)，请运行：

```
cmake -L <path-to-source> 
```

对于任何记录在案的 CMake 变量（例如 CMAKE_INSTALL_PREFIX），您可以通过运行获取更多信息：

```
cmake --help-variable CMAKE_INSTALL_PREFIX 
```

# ruby-on-rails - 学习学习：Rails

> ID：11387999
> 
> 赞同：3
> 
> 时间：2012-07-09T01:00:01.573
> 
> 标签：ruby-on-rails, git, rvm

自从我学习任何编码以来已经 20 年了，现在情况已经大不相同了。在玩了 cakephp 和 yii 之后，我决定使用 ROR。我玩得很开心！

我的问题不是关于 ROR，而是学习任何东西的最佳方式。我开始学习 ROR 并了解了版本控制和 git。这很有趣，让我花了几天时间真正学习它。我回到了轨道，发现了 RVM。这也很有趣，我花了几天时间学习。像这样继续下去。我几乎痴迷于我学到的每一件新东西。

真正的问题是：是在开始时学习足够多的东西，然后再回去学习工具的复杂性，还是在学习过程中真正学习每个工具更好？

希望这是有道理的，因为它更像是一个哲学问题而不是技术问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T01:18:41.490

我认为你现在不应该学习你最感兴趣的东西，因为这很容易失控......

我建议采用更**集中**的学习方法。选择一个有目标的真实项目（应该具有挑战性，但仍然现实）。然后沿途学习以实现您的目标。尽量不要学习不直接相关的东西，并确保你学到了想出一个非常好的、简单的解决方案所需的一切。完成后，选择下一个目标并重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T01:03:01.603

我认为你应该学习你目前最感兴趣的东西。