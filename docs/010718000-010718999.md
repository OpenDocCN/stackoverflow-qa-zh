# StackOverflow 问答 10718000-10718999

# javascript - 在jquery动画之前实现一个短暂的暂停

> ID：10718000
> 
> 赞同：0
> 
> 时间：2012-05-23T10:23:23.813
> 
> 标签：javascript, jquery

我正在编写一个简单的 jquery 菜单系统，该系统在鼠标悬停在文本链接上时显示/隐藏 DIV。

我想在幻灯片发生之前实现一个短暂的暂停，这样如果鼠标刚刚飞过菜单链接，菜单就不会下拉。

这就是我目前激活菜单的方式：

```
<script type="text/javascript"><!--
$('#aboutLink').mouseover(function() {$('#aboutMenu1').slideDown('fast');
$('#aboutLink').css("color", "#ff297b");});
 --></script> 
```

所以实际上我需要做的是在鼠标悬停时，等待说 300 毫秒，然后，如果鼠标仍然在链接上，做动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:28:02.147

我建议使用 hoverIntent：[http ://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

```
var config = {    
     sensitivity: 3, // number = sensitivity threshold (must be 1 or higher)    
     interval: 200, // number = milliseconds for onMouseOver polling interval    
     timeout: 500, // number = milliseconds delay before onMouseOut    
};

$(document).ready(function(){
  $('ul#menu > li').hoverIntent(
    // mouseover
    function(){
      $(this).find('>ul').fadeIn('fast');
    },
    // mouseout
    function(){
       $(this).find('>ul').fadeOut('fast');
    }  
  );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:29:38.767

你可能想做这样的事情：

```
var timeout;

$('#aboutLink').mouseover(function() {
    timeout = window.setTimeout(function() {
        $('#aboutMenu1').slideDown('fast');
        $('#aboutLink').css("color", "#ff297b");
    }, 300);
});

$('#aboutLink').mouseout(function() {
    if(timeout) {
        window.clearTimeout(timeout);
    }
}); 
```

首先你设置超时，这将在 300 毫秒后执行给定的函数，但如果用户离开 div，超时将被清除，不会发生任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:28:18.750

```
<script type="text/javascript"><!--
var timeout;
var delay = 300;

$('#aboutLink').hover(function() {
    timeout = setTimeout(function(){
       $('#aboutMenu1').slideDown('fast');
    }, delay);
}, function(){
   if(timeout) clearTimeout(timeout);
});
$('#aboutLink').css("color", "#ff297b");});
--></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T10:34:58.490

采用`window.setTimeout`

另外，我会推荐鼠标事件`mouseleave`和`mouseenter`（参见[http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)）。省去处理嵌套元素的麻烦

然后你有

```
var timeoutId;

$(...).mouseleave(function (ev) { 
    if (timeoutId) { 
        window.clearTimeout(timeoutId);  
    }
    else {
        // either remove the menu or set a similar timeout for disappearance
    }
});

$(...).mouseenter(function (ev) { 
    if (timeoutId) { 
        // clear pending timeouts for other menu items
        window.clearTimeout(timeoutId); 
    }
    else {
        // either remove other menus or transition them out
    }

    timeoutId = window.setTimeout(function () {
        // show menu
    }, 300); 
}); 
```

这样做会给您留下一个简单的逻辑，因为您总是在查看当前元素。通过清除任何超时，`mouseenter`您不必照顾其他元素。

您当然可以乱搞，并为每个单独的菜单条目设置超时 - 为您提供更好的过渡。但是你必须管理更多的复杂性。

# java - 在java中覆盖静态的替代方法

> ID：10718004
> 
> 赞同：4
> 
> 时间：2012-05-23T10:23:39.140
> 
> 标签：java, inheritance, static, abstract

我想知道：将属性适合作为大型继承结构一部分的类的最佳方法是什么。我想创建一个抽象的静态方法，每个类都会覆盖它，但是在快速谷歌之后似乎不起作用。有什么建议么？

我可以使它成为一个实例方法，但它确实是一个类级别的规范。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:26:14.273

我建议您创建一个抽象方法，就像您所想的那样，并让这个方法在每个类中的静态变量方面实现。

```
abstract class Base {
    abstract String getValue();
}

class A extends Base {

    static String aValue = "From A";

    String getValue() {
        return aValue;
    }
}

class B extends A {

    static String bValue = "From B";

    String getValue() {
        return bValue;
    }
} 
```

它在每个类中都需要更多的样板，而不仅仅是一个字段声明，但我相信这很难做任何事情。

# c++ - WH_KEYBOARD 和 WH_KEYBOARD_LL 之间的区别？

> ID：10718009
> 
> 赞同：21
> 
> 时间：2012-05-23T10:23:59.943
> 
> 标签：c++, c, winapi, hook, wh-keyboard-ll

两者的工作有什么区别？对于`WH_KEYBOARD_LL`，[我读到它安装了一个监视](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990(v=vs.85).aspx)*低级*键盘输入事件的钩子程序。*低级*键盘事件是什么意思？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-23T11:37:50.283

嗯，不要过分关注这个词，它并没有澄清任何事情。两者之间有很大的不同。WH_KEYBOARD_LL 安装一个钩子，需要在您自己的程序中实现回调。并且您必须抽出一个消息循环，以便 Windows 可以在它即将发送键盘消息时进行回调。这使得它很容易上手。

WH_KEYBOARD 的工作方式非常不同，它需要一个可以安全地注入到钩子进程中的 DLL。这使得开始变得非常困难，在不影响进程的情况下注入 DLL 并不容易。特别是在 64 位操作系统上。如果其他进程需要了解击键，则也不会处理您可能需要的进程间通信。就像一个键盘记录器。

WH_KEYBOARD 的优点是它可以访问键盘状态。这是 Windows 中的每个进程的属性。当您想使用挂钩将虚拟键转换为您自己的键入键时，活动键盘布局等状态以及修饰键和死键的状态非常重要。您无法从外部进程可靠地调用 ToUnicodeEx()。

如果没有遇到示例代码，你就无法挥动猫，谷歌会给你很多。因此，如果您以前从未编写过这样的钩子，请务必使用已知可工作的东西，这样可以避免很多麻烦。

# emacs - Emacs：创建自定义 pinbar 标签栏

> ID：10718014
> 
> 赞同：2
> 
> 时间：2012-05-23T10:24:23.340
> 
> 标签：emacs, elisp

我想创建一个自定义的 pinbar 或 tabbar（无论如何都是一个栏），其中显示了一组特定的经常访问的文件。我真的想要 bar 而不是文件集等。

我浏览了 pinbar.el 和 tabbar.el 但是我对 emacs lisp 的有限知识不允许我看到创建此栏的功能。我可以理解如何添加项目、删除项目等，但我如何首先创建一个指定位置、高度等的项目？

你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:29:41.863

您可以为此使用 Emacs 工具栏吗？

[http://www.gnu.org/software/emacs/manual/html_node/elisp/Tool-Bar.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Tool-Bar.html)

您可以为您想要的文件添加条目到工具栏。我不确定你想要什么文件......也许最简单的方法是将文件存储为书签：

[http://www.gnu.org/software/emacs/manual/html_node/emacs/Bookmarks.html](http://www.gnu.org/software/emacs/manual/html_node/emacs/Bookmarks.html)

然后在工具栏中显示前几个书签？

# java - 使用 Java 代理类时支持身份验证

> ID：10718019
> 
> 赞同：0
> 
> 时间：2012-05-23T10:24:51.003
> 
> 标签：java, proxy

我正在使用 java Proxy 类并将其传递给 HttpURLConnection.openConnection()。
有没有办法向 Proxy 类提供身份验证信息（就像 http.proxyUser 和 http.proxyPassword）？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:30:58.177

您可以为此目的使用[Authenticator ：](http://docs.oracle.com/javase/7/docs/api/java/net/Authenticator.html)

```
Authenticator.setDefault(new Authenticator() {

        @Override
        protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("login", "password".toCharArray());
        }
}); 
```

# c# - 同时使用两个不同的网络适配器

> ID：10718022
> 
> 赞同：1
> 
> 时间：2012-05-23T10:24:57.220
> 
> 标签：c#, network-programming

有无线适配器和拨号调制解调器连接到网络。还有两个文件，我们需要下载。（文件 1 和文件 2）

我可以使用 C# 同时通过不同的网络适配器下载两个不同的文件吗？例如：file1 需要通过无线网卡下载，file2 需要通过拨号方式下载。

操作系统 Win7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:30:47.470

您可以在 WebRequest 中选择您的传出 IP 地址，如下所示：

```
string sendingIp = "192.168.0.1";
int sendingPort = 5000;
Uri uri = new Uri("http://google.com");
HttpWebRequest wr = (HttpWebRequest)WebRequest.Create(uri);
ServicePoint sp = ServicePointManager.FindServicePoint(uri);
sp.BindIPEndPointDelegate =
    (servicePoint,remoteEp,retryCount) =>
         {
             return new IPEndPoint(IPAddress.Parse(sendingIp),sendingPort);
         };
var data = new StreamReader(wr.GetResponse().GetResponseStream()).ReadToEnd(); 
```

此代码无法正确处理处置。

# excel - atan2 函数在 javascript 和 Excellsheet 中的行为不同

> ID：10718023
> 
> 赞同：5
> 
> 时间：2012-05-23T10:25:00.333
> 
> 标签：excel, excel-formula, javascript

我正在尝试 atan2 数学函数，但我在 google excel 表中得到了错误的值。但在 javascript atan2 函数中获得正确的值。如何在 excelsheet 中获得该值？

我在 excel 中的价值是

```
atan2(8.6,2.7699)=0.3115 
```

而在 javascript 中是

```
atan2(8.6,2.7699)=1.259206466337312 
```

我在这里检查了 javascript 值[http://www.univie.ac.at/moe/rechner/rechner.html](http://www.univie.ac.at/moe/rechner/rechner.html)

谁能说出为什么会这样？

如果我想在 excel 中使用这个值，那么我应该使用什么公式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T10:30:39.297

在 Microsoft Excel 中，atan2 函数以相反的顺序获取参数，而 Google Docs 为保持一致性而做同样的事情。如果您翻转 javascript 中的参数，您会得到相同的“错误”值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T10:35:20.020

Excel 中 atan2 的函数签名是[ATAN2( **x** _num, **y** _num)](http://office.microsoft.com/en-gb/excel-help/atan2-HP005208991.aspx)而在 Javascript 中是[Math.atan2( **y,x** )](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/atan2)。注意参数的顺序。

如果您以适当的顺序提供参数，他们都应该给出大致相同的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:37:07.700

Excel`ATAN2`需要`x`-coordinate 后跟`y`坐标`ATAN2(x,y)`，但 JavaScript`ATAN2`的参数颠倒了：`ATAN2(y,x)`

# ruby-on-rails - rails 控制器良好实践

> ID：10718028
> 
> 赞同：0
> 
> 时间：2012-05-23T10:25:27.157
> 
> 标签：ruby-on-rails, methods, self

我有一个如下的SpecificController，

```
class SpecificController < ApplicationController    

  def specific_search # ===== Main =======

    self.set_instance_variables

    self.set_product_id_sub_category_id

    unique_ids = self.get_unique_ids(@product_id,@sub_category_id,["out of stock","permanently discontinued"])

    self.set_grid("online",unique_ids)

    self.set_grid("local",unique_ids)

  end

  def include_exclude # ===== Main =======

     @type = params[:type].to_s

     self.set_product_id_sub_category_id

     self.set_sub_category_name(@sub_category_id)

     unique_ids = self.get_unique_ids(@product_id,@sub_category_id,["permanently discontinued"])

     self.set_grid(@type,unique_ids)

  end

  def set_instance_variables #===== Sub ====

     @cities = Cities.find(:all)
     @areas = []
     @feature_array = Array.new
     @online_grids = Array.new
     @local_grids = Array.new

  end

  def set_product_id_sub_category_id #===== Sub ====

    if params[:specific_product_id].present? && params[:sub_category_id].present?

        @product_id = params[:specific_product_id].to_i
        @sub_category_id = params[:sub_category_id].to_i

    end

  end

  def get_unique_ids(product_id,sub_category_id,exclude_availabilities_array) #===== Sub ====
  - 
  -
  -
  unique_ids

  end

  def set_grid(grid_type,unique_ids) #===== Sub ====

    if grid_type == "online"

       @online_grids = OnlineGridDetails.get_grid(unique_ids)

    elsif grid_type == "local"

       @local_grids = LocalGridDetails.get_grid(unique_ids)

    end

  end

end 
```

**在上面的类中，标记为“主要”的方法是我正在使用的方法。其他标记为“Sub”的方法都由使用“self.”的主方法调用。这是一个好习惯吗？如果不是，那些“Sub”方法属于哪里？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:29:49.147

如果它可以帮助您浏览和阅读您的代码，那么，伙计。

我个人将所有辅助方法放在`private`文件底部的类部分。

# c# - 流阅读器中字符串中的反斜杠

> ID：10718029
> 
> 赞同：1
> 
> 时间：2012-05-23T10:25:27.953
> 
> 标签：c#, csv

我有一个奇怪的问题。

我尝试读取 csv 文件以进行数据迁移。这就是文件的外观（其 UTF8 格式）

```
"MIGRATIONID","ACCOUNTID","MIGRACCOUNTID","CONFIGID","MEDIUMID","PRIMCLASSID","SECCLASSID","SALESCODE","CONTENT","REGELNR","LIST_ATTRIBUTES","PACKAGE_TYPE","VERWIJSADVERTENTIE","NIET_PUBLICEREN"
"ITM-0015-0163","62222532","ACT-0000-4755","61635591","TGP","TG_P_GV_01","","TG_Print_GV","%NAME%|%STREETNAME%|%HOUSENUMBER%|%HOUSENUMBEREXT%||%POSTALCODE%|%LOCALITY%|%AREACODE%|%CONNECTIONNUMBER%|%URL%|%EMAIL%||%COMMERCIAL%||||||%PRODNR%","10","","","","FALSE"
"ITM-0015-0172","62222140","ACT-0000-4779","61636356","TGP","TG_P_GV_01","","TG_Print_GV","%NAME%|%STREETNAME%|%HOUSENUMBER%|%HOUSENUMBEREXT%||%POSTALCODE%|%LOCALITY%|%AREACODE%|%CONNECTIONNUMBER%|%URL%|%EMAIL%||%COMMERCIAL%||||||%PRODNR%","10","","","","FALSE" 
```

如您所见，它是逗号分隔的。

我使用流式阅读器阅读它：

```
System.IO.StreamReader file = new System.IO.StreamReader(documentFilePath, Encoding.UTF8);
while ((line = file.ReadLine()) != null)
{
    //perform the transformation
} 
```

我已经做了一百万次没有问题。但是，当读取行时，它们突然像这样出现（从调试监视复制）：

```
"\"ITM-0015-0163\",\"62222532\",\"ACT-0000-4755\",\"61635591\",\"TGP\",\"TG_P_GV_01\",\"\",\"TG_Print_GV\",\"%NAME%|%STREETNAME%|%HOUSENUMBER%|%HOUSENUMBEREXT%||%POSTALCODE%|%LOCALITY%|%AREACODE%|%CONNECTIONNUMBER%|%URL%|%EMAIL%||%COMMERCIAL%||||||%PRODNR%\",\"10\",\"\",\"\",\"\",\"FALSE\"" 
```

所有这些反斜杠来自哪里？我是不是读错了文件。我怎样才能防止这种情况？因为它破坏了我对数据的进一步处理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T10:27:02.803

调试器只显示值，就像它出现在代码中的文字中一样（请注意，它也被引号包围）。您可以单击小放大镜打开一个纯文本视图，该视图不会在此处放置反斜杠。

如果您对此表示怀疑，您可以将您阅读的文本写入控制台以进行验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:27:48.200

它们只是调试视图的产物。该字符串实际上只包含一个`"`，但调试视图将其显示为`\"`。将字符串写入控制台，或显示一个消息框，您会发现它们`\`实际上并不存在。

这使您可以查看是否`"`只是`"`包含在字符串中，还是`"`终止字符串。它与 C# 中用于字符串文字的语法相同。

无论什么破坏了您对数据的进一步处理，都不是`"`您在调试视图中看到的转义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:28:15.223

您也阅读报价。组合反斜杠 + 引号仅在调试器中显示（c# 字符串...），否则它只是一个引号。

如果您不需要它们，请修剪列值。

编辑：我可以在评论中看到您正在使用名称的第一列的值创建文件夹。文件夹名称不能包含`"`

# java - 在不让 Jackson 转换的情况下更改 Java Web 服务响应的标头

> ID：10718030
> 
> 赞同：0
> 
> 时间：2012-05-23T10:25:28.967
> 
> 标签：java, web-services, spring, hibernate, jackson

我在从我的 Web 应用程序向我的 Web 服务传输数据时遇到了一些问题。

所以我有一个带有 Spring、Hibernate 和 Jackson 的 Java JAX-RS Web 服务。到目前为止，我已经使用 JSON-P 从 Web 服务获取数据，但现在我需要进行 POST 调用，所以我正在尝试切换到 CORS。

使用 JSON-P 的旧代码：

```
@GET
@Path("/getUsers")
@Produces(MediaType.APPLICATION_JSON)
public ResponseEntity getUsers(@QueryParam("callback") String callback) {
    Set<User> list = null;
    list = userBo.getUsers();
    if (list != null) {
        return callback + "(" + list.toString() + ");";
    } else {
        return null;
    }
} 
```

我一直在尝试通过以下方式更改响应的标题：

```
@GET
@Path("/getUsers")
@Produces(MediaType.APPLICATION_JSON)
public ResponseEntity getUsers(@QueryParam("callback") String callback) {
    Set<User> list = null;
    list = userBo.getUsers();
    HttpHeaders headers = new HttpHeaders();
    headers.add("Access-Control-Allow-Origin", "*");
    headers.add("Access-Control-Allow-Methods", "GET, OPTIONS, POST");
    headers.add("Access-Control-Allow-Headers", "Content-Type");
return new ResponseEntity(list.toString(), headers, HttpStatus.OK);
} 
```

但是 Jackson 将整个 ResponseEntity 转换为 JSON 字符串。任何人都知道如何在不让杰克逊全部转换的情况下更改标题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:29:19.170

使用`Response`而不是`ResponseEntity`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T10:32:20.657

您可以使用常规的 HTTP 过滤器来做到这一点：

```
public class AddHeaderFilter implements Filter {
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {

            HttpServletResponseWrapper wrappedResponse = new HttpServletResponseWrapper((HttpServletResponse)response)
            chain.doFilter(request, wrappedResponse);
            wrappedResponse.addHeader("myheaderName", "myHeaderValue");

        }

} 
```

# xamarin.ios - Monotouch的子视图中没有调用WillAnimateRotation？

> ID：10718037
> 
> 赞同：0
> 
> 时间：2012-05-23T10:25:59.640
> 
> 标签：xamarin.ios, orientation

我将 RootViewController 添加到 Window 中，并且只调用了 UIViewController 类 WillAnimateRotation。

不会自动调用所有其他 UIViewControllers WillAnimateRotation。

但我手动调用它们。由于那个手动呼叫，我在定位方面面临很多问题。

有什么方法可以在打开每个视图时自动调用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T03:24:38.937

这可能是因为您插入了至少一个没有实现 should-rotate 方法的 ViewController。

# web-crawler - Jsoup：会话在一段时间后过期

> ID：10718043
> 
> 赞同：0
> 
> 时间：2012-05-23T10:26:12.667
> 
> 标签：web-crawler, jsoup

我已经使用 Jsoup 或从网站[https://widgets.vodafone.com](https://widgets.vodafone.com)中提取一些数据编写了 Java 代码。我通过使用 Firefox 插件“实时 HTTP 标头”读取标头并在登录时传递它们来做到这一点。虽然它工作得很好，但会话每两天过期一次。我编写这段代码的主要座右铭（这是它的完全自动化）仍未得到满足。

如果我重新登录并使用新的“身份验证 ID”和“cookie ID”更新代码，代码将再次开始工作。

有人可以告诉我如何使它工作。

PS 我为 developer.getjar.com 网站做了同样的事情，它就像一个魅力。到目前为止还没有给我任何问题。

谢谢，阿伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:00:58.010

某些 cookie 有过期日期。您实际上无能为力，只能控制 HTTP 403 异常。当它发生时，重做“登录”过程。

```
loginMethod();

while(true) {

    if(expired())
        loginMethod();

    if(processingOver())
        break;

    //Processing

} 
```

# android - 这个作业有什么问题？

> ID：10718044
> 
> 赞同：0
> 
> 时间：2012-05-23T10:26:12.967
> 
> 标签：android, view

我已经定义了一个这样的 XX 类：

```
 public class XX extends RelativeLayout {
    protected static final boolean DEBUG = true;

    public XX(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    }

    public XX(Context context, AttributeSet attrs) {
    super(context, attrs);
    if (DEBUG)
        Log.i(this.getClass().getSimpleName(), " ->2"
            + Thread.currentThread().getStackTrace()[2].getMethodName());
    //getAttributes(context, attrs);

    }

    public XX(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    if (DEBUG)
        Log.i(this.getClass().getSimpleName(), " ->3"
            + Thread.currentThread().getStackTrace()[2].getMethodName());
    //getAttributes(context, attrs);

    }

} 
```

在我的代码中我写：

```
RelativeLayout v = (RelativeLayout) this.findViewById(R.id.switch_TCMyTB);
XX x = (XX) v;  //<----- crashes here 
```

但它与作业崩溃。我假设因为 XX 扩展了视图，所以我可以将视图（RelativeLayout）分配给 XX 对象。

但它崩溃了。作业有什么问题？

编辑：

我`extends View`改为`extends RelativeLayout`. 也`View v`改为`RelativeLayout v`. 但我仍然得到一个classCastException ..???? 为什么？

尽管

```
RelativeLayout r = (RelativeLayout) v; 
```

当然工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:10:18.170

由于我对自定义组件并不完全熟悉，所以我只是尝试做一个例子。我无法回答你关于为什么它不起作用的问题。如果我的示例无法为您运行，您将需要提供一个 logcat。

我创建了一个自定义类：

```
public class TestLayout extends RelativeLayout {

    public TestLayout(Context context) {
        super(context);

    }

    public TestLayout(Context context, AttributeSet attrs) {
        super(context, attrs);

    }

    public TestLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
} 
```

这个类在包 com.test.cc 中

在我使用的 XML 布局中

```
 <com.test.cc.TestLayout 
    android:layout_width="10dip"
    android:layout_height="10dip"
    android:id="@+id/testLayout"    
    /> 
```

在此示例布局中。TestLayout 是 LinearLayout 的子级。`xmlns:android="http://schemas.android.com/apk/res/android"`如果它是 xml 布局中的最高级别组件，则添加。

然后在活动中：

```
//Called in onCreate mthod of an activity.    
setContentView(R.layout.test); //make sure you call this first
TestLayout l = (TestLayout)findViewById(R.id.testLayout); 
```

这对我来说很好。

这是在 2.2 和 3.2 设备上测试的。

因此，请确保先调用 setContentView(...)，然后再创建布局对象。还要确保在 xml 定义中包是正确的。虽然如果这是错误的，你会得到一个类 not foudn 异常

编辑||

我试着运行这个：

```
RelativeLayout l = (RelativeLayout)findViewById(R.id.testLayout);
TestLayout tl = (TestLayout)l; 
```

而且它也运行良好，没有任何例外。所以我认为问题出在其他地方。也许包名称错误或其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:39:46.673

以下代码在没有 ClassCastExceptions 的情况下运行
所以我的猜测是错误可能出在 XML 中。

```
public class Test {

  public static void main(String[] args) {
    B b = new B();
    Object o = b;
    A a = (A) o;
    B b2 = (B) a;
    System.out.println("done");
  }

  public static class A /* extends Object */ {
  }

  public static class B extends A {
  }
} 
```

# ios - iOS：有没有更好的方法将数据作为 POST 传输到服务器？

> ID：10718048
> 
> 赞同：0
> 
> 时间：2012-05-23T10:26:24.107
> 
> 标签：ios, xcode, string, url, post

我有一个长度为 1500 个字符的 URL 字符串。有人告诉我，这样的“巨大”字符串无法正确传输到服务器..（太长）。

有没有更好的 POST 方法？还是我应该拆分整个字符串？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:30:08.090

通过 HTTP POST 发送 1500 个字符没有问题。

# blackberry - 如何开始使用 Twitter for Blackberry 进行开发

> ID：10718057
> 
> 赞同：-4
> 
> 时间：2012-05-23T10:26:57.350
> 
> 标签：blackberry, twitter, twitter-oauth

我是 bb 应用程序开发的新手。现在我应该为黑莓开发一个 Twitter 应用程序。如何启动我的应用程序.. 是否有任何用于黑莓的 Twitter API？

我已经创建了登录页面的 UI，但是如何开始验证用户名和密码？我已经在 Twitter 上注册了我的应用程序，现在我有了消费者密钥和秘密，但我不知道如何使用它。

任何人都知道黑莓的 Twitter 应用程序或有任何 Twitter 的示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:09:15.833

您可以使用[TwitterAPIMe](http://kenai.com/projects/twitterapime/pages/Home)。
您可以在链接中找到如何使用 API。
我用过它，它很简单，而且性能很好。
PS，你必须是RIM4.6或更高

# c++ - 数组应该在 C++ 中使用吗？

> ID：10718061
> 
> 赞同：97
> 
> 时间：2012-05-23T10:27:06.317
> 
> 标签：c++, arrays, conventions

既然存在`std::list`，`std::vector`那么有理由在 C++ 中使用传统的 C 数组，还是应该避免使用它们，就像`malloc`？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-05-23T10:30:09.030

在[`std::array`](http://en.cppreference.com/w/cpp/container/array)可用的 C++11 中，答案是“是的，应该避免使用数组”。在 C++11 之前，您可能需要使用 C 数组在自动存储中（即在堆栈上）分配数组。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-05-23T11:32:37.617

当然，尽管`std::array`在 C++11 中，实际上仅适用于静态数据。C 风格的数组与 相比具有三个重要优点 `std::vector`：

*   它们不需要动态分配。出于这个原因，在您可能有很多非常小的数组的情况下，首选 C 样式数组。说一个像 n 维点这样的东西：

    ```
    template <typename T, int dims>
    class Point
    {
        T myData[dims];
    // ...
    }; 
    ```

    通常，人们可能会想象一个`dims`非常小（2 或 3） `T`的内置类型 ( `double`)，并且您最终可能会 `std::vector<Point>`拥有数百万个元素。您绝对不希望数百万个 3 double 的动态分配。

*   支持静态初始化。这只是静态数据的问题，例如：

    ```
    struct Data { int i; char const* s; };
    Data const ourData[] =
    {
        { 1, "one" },
        { 2, "two" },
        //  ...
    }; 
    ```

    这通常比使用向量 (and `std::string`) 更可取，因为它避免了*所有*的初始化顺序问题；在执行任何实际代码之前，数据已预先加载。

*   最后，与上述相关，编译器可以从初始化器中计算出数组的实际大小。您不必计算它们。

如果您可以访问 C++11，`std::array`则可以解决前两个问题，并且在第一种情况下绝对应该优先使用 C 样式数组。但是，它没有解决第三个问题，并且让编译器根据初始化程序的数量来确定数组的维度仍然是首选 C 样式数组的正当理由。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-23T10:29:22.907

永远不要说“从不”，但我同意他们的角色被 STL 的真实数据结构大大削弱了。

我还要说对象内部的封装应该尽量减少这样的选择的影响。如果数组是私有数据成员，您可以将其换入或换出，而不会影响您类的客户。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-05-23T10:32:56.947

我曾在无法使用动态内存分配的安全关键系统上工作。内存必须始终在堆栈上。因此，在这种情况下，您将使用数组，因为大小在编译时是固定的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-23T10:34:14.790

`array`in`c++`为您提供固定大小的快速替代动态大小`std::vector`和`std::list`. [std::array](http://en.cppreference.com/w/cpp/container/array)是`c++11`. 它提供了 std 容器的好处，同时仍然提供了 C 样式数组的聚合类型语义。

因此，在需要的地方，`c++11`我肯定会`std::array`在向量上使用 。但我会避免在`C++03`.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-23T10:29:52.383

大多数情况下，**不**，我想不出使用原始数组的理由，比如说，`vectors`。*如果代码是新的*。

如果您的库需要与需要数组和原始指针的代码兼容，您可能不得不求助于使用数组。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-10T16:22:09.417

我知道很多人都指出 std::array 用于在堆栈上分配数组，而 std::vector 则用于堆。但似乎都不支持非本地对齐。如果您正在执行任何想要使用 SSE 或 VPX 指令的数字代码（因此分别需要 128 或 256 字节对齐），C 数组似乎仍然是您最好的选择。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-05-30T02:52:20.513

我想说数组仍然有用，如果您要存储少量静态数据，为什么不呢。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-23T10:49:27.027

`std::vector`与我能想到的相比，数组（当然包装在需要时会自动管理其释放的东西中）的唯一优点是`vector`不能传递其数据的所有权，除非您的编译器支持 C++11 并移动构造函数。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-05-23T11:50:01.207

C 风格的数组是一种基本的数据结构，因此在某些情况下使用它会更好。然而，对于一般情况，使用更高级的数据结构来修整基础数据的角落。C++ 允许你用内存做一些非常有趣和有用的事情，其中​​许多都适用于简单的数组。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-01-23T09:26:23.813

您应该在内部使用 STL 容器，但您不应该在不同模块之间传递指向此类容器的指针，否则您将陷入依赖地狱。例子：

```
std::string foo;
//  fill foo with stuff
myExternalOutputProc(foo.c_str()); 
```

是一个很好的解决方案，但不是

```
std::string foo;
//  fill foo with stuff
myExternalOutputProc(&foo); 
```

原因是 std::string 可以以多种不同的方式实现，但 c 样式的字符串始终是 c 样式的字符串。

# eclipse - Eclipse 未拾取 Maven generate-sources 文件夹

> ID：10718062
> 
> 赞同：5
> 
> 时间：2012-05-23T10:27:06.397
> 
> 标签：eclipse, maven, m2eclipse, m2e

我正在将我的构建从 Ant 迁移到 Maven。Ant build 用于编译一个“代码生成器”，执行这个“代码生成器”，生成一组 Java 和 C 代码。然后它获取生成的 Java 代码并将其与一些附加代码一起编译生成一个 jar。

我已经很容易地在 Maven 中复制了这个，当我从命令行运行时它运行良好，但是 Eclipse 抱怨并且给了我一个与 pom 文件相关的错误

> 在 http://{our internal site repository}/nexus/content/groups/public 中找不到 {group.id}:{artifact.id}:pom:1.0.0-SNAPSHOT 已缓存在本地存储库中，解决方法将在快照的更新间隔过去或强制更新之前不会重新尝试

其中 group.id 和 artifact.id 是我的代码生成器插件的组和工件 id

并且任何引用生成代码的代码也无法编译。

我的 Maven 构建包括

*   仅包含代码生成器的 Java 代码的生成器项目。

*   一个生成器插件项目，其中仅包含将生成器包装为 Maven 插件的代码。这取决于生成器项目。

*   一个使用插件生成代码的 xyz 项目。代码最终位于该项目的 target/generated-sources/xxx 文件夹中。我已经按照[Maven 编译配置了 build-helper-maven-plugin，其中包含多个 src 目录](https://stackoverflow.com/questions/270445/maven-compile-with-multiple-src-directories)以包含这个额外的源目录。

如果我手动将生成的源文件夹添加到 Eclipse 构建路径，则所有与代码不存在相关的错误都会在该项目上消失，但不会在任何下游项目上消失，并且上面列出的“找不到...”错误仍然存​​在。

让我有点困惑的是，它指的是 ...:pom:1.0.0-SNAPSHOT，而实际上我的生成器插件被定义为 maven 插件。

这是一个明智的做法吗？

为什么我收到“未能找到...”错误？

为什么 Eclipse 不拾取我的生成源文件夹？

我还应该说我的 Eclipse IDE 中安装了 m2e 插件和用于 build-help-maven-plugin 的 m2e 连接器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:24:37.543

从存储库下载 lib 期间似乎出现了问题。我曾经有过同样的错误信息。

*   您是否查看了本地存储库？

    转到 .m2 文件夹并查找`/nexus/content/groups/public`. 如果文件夹在那里，请打开它并查看 lib 是否正确下载。如果没有，请尝试删除该文件夹并尝试运行`mvn install`以强制下载lib。

    在 Eclipse 中`Right button > Maven > Update Project`也可以运行。

*   你在使用像 Artifactory 这样的本地存储库，不是吗？`repo1-cache`还要在（或类似的）文件夹中查找 lib 。看看罐子有没有。

*   你在任何防火墙或代理后面吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T20:01:19.117

使用 eclipse Indigo3.7，我发现使用 spring 3.1.1 效果很好，其中也有 3.0.6 版本。一旦我设置好插件并将其放入 pom 的正确区域并包含 argline 和 endorseddirs 以将 java 源代码放入 target/generated-sources/cxf 文件夹，然后 maven 生成源代码就可以了。

……

```
 <properties>...

   <dependencyManagement>
      <dependencies>.....
   </dependencyManagement>

<dependencies>
   <dependency>....

</dependencies>

<!-- *************************** Build process ************************************* -->
<build>
    <finalName>projName</finalName>
    <plugins>
        <!-- Force Java 6 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <!-- Deployent on AS from console
        <plugin>
            <groupId>org.jboss.as.plugins</groupId>
            <artifactId>jboss-as-maven-plugin</artifactId>
            <version>${version.jboss.as.maven.plugin}</version>
        </plugin>
        -->

        <!-- wildbill added tomcat plugin -->
        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.0</version>              
        </plugin>

        <!-- Surefire plugin before 2.9 version is buggy. No need to declare here,
              it's being referenced below w/ the version
        <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12</version>
        </plugin>
        -->

        <!-- developer added these -->   
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <compilerArguments>
                    <endorseddirs>target/generated-sources/cxf</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12</version>
            <configuration>
                <forkMode>once</forkMode>
                <argLine>-Djava.endorsed.dirs=target/generated-sources/cxf</argLine>
            </configuration>
        </plugin>           
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <compilerArguments>
                    <endorseddirs>target/generated-sources/cxf</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <forkMode>once</forkMode>
                <argLine>-Djava.endorsed.dirs=target/generated-sources/cxf</argLine>
            </configuration>
        </plugin>                       
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>                       
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>javax.xml.bind</groupId>
                        <artifactId>jaxb-api</artifactId>
                        <version>2.2</version>
                    </artifactItem>
                    <artifactItem>
                        <groupId>javax.xml.ws</groupId>
                        <artifactId>jaxws-api</artifactId>
                        <version>2.2</version>
                    </artifactItem>
                </artifactItems>
                <outputDirectory>target/generated-sources/cxf</outputDirectory>
            </configuration>                      
        </plugin>                                                 
    </plugins>
</build>

<!-- *********************** Profiles ************************************ -->
<profiles>
    <profile>
        <!-- When built in OpenShift the 'openshift' profile will be 
            used when invoking mvn. -->
        <!-- Use this profile for any OpenShift specific customization 
            your app will need. -->
        <!-- By default that is to put the resulting archive into the 
            'deployments' folder. -->
        <!-- http://maven.apache.org/guides/mini/guide-building-for-different-environments.html -->
        <id>projName</id>
        <build>
            <plugins>                                                   
                <plugin>
                    <groupId>org.apache.cxf</groupId>
                    <artifactId>cxf-codegen-plugin</artifactId>
                    <version>2.5.2</version>                        
                    <executions>
                        <execution>
                            <id>process-sources</id>
                            <phase>generate-sources</phase>                                                                                               
                            <configuration>
                                <fork>once</fork>
                                <additionalJvmArgs>-Djava.endorsed.dirs=target/generated-sources/cxf</additionalJvmArgs>                                          
                            </configuration>
                            <goals>                             
                                <goal>wsdl2java</goal>
                            </goals>
                        </execution>
                    </executions>                       
                    <dependencies>
                        <dependency>
                           <groupId>com.sun.xml.bind</groupId>
                           <artifactId>jaxb-impl</artifactId>
                           <version>2.2</version>
                        </dependency>
                        <dependency>
                           <groupId>com.sun.xml.bind</groupId>
                           <artifactId>jaxb-xjc</artifactId>
                           <version>2.2</version>
                        </dependency>
                     </dependencies>
                </plugin>

                <!-- Actual war created in default target dir -->
                <plugin>
                    <artifactId>maven-war-plugin</artifactId>
                                                     <version>2.2</version>                                               
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

如果您的 wsdl 文件夹位于 ${basedir}/src/main/resources 中，它会自动找到它

希望这可以帮助！

# visual-studio-2010 - 使用 PowerShell 修改 Visual Studio 解决方案和项目文件

> ID：10718065
> 
> 赞同：8
> 
> 时间：2012-05-23T10:27:16.540
> 
> 标签：visual-studio-2010, powershell, automation

我们目前正在重新组织我们的源代码，在新的目录结构中移动内容。这会影响我们的 Visual Studio 解决方案和项目文件，其中诸如程序集引用、可能的输出目录、构建前和构建后事件等内容必须更新以反映我们的更改。

由于我们有许多解决方案和项目，我希望使用 PowerShell 部分自动化该过程，例如 VS 的 PowerShell“提供者”：

在一个理想的世界里，我可以做这样的事情：

```
$MySolution.Projects["MyProject"].PostBuildEvent = "copy <this> to <that>" 
```

我知道用于编写 Visual Studio 脚本的[PowerConsole](http://visualstudiogallery.msdn.microsoft.com/67620d8c-93dd-4e57-aa86-c9404acbd7b3/)（我还没有完全探索过）。但是，文档很少，我不确定它是否真的能满足我的需求。

还有什么可以轻松操作解决方案和项目文件的吗？最好在 PowerShell 中，但我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T10:39:35.330

根据我的经验，使用 PowerShell（从 Visual Studio 内部或外部）操作 Visual Studio 解决方案的最简单方法是将项目文件加载为 XML 并使用 PowerShell 来操作它。

```
$proj = [xml](get-content Path\To\MyProject.csproj)
$proj.GetElementsByTagName("PostBuildEvent") | foreach {
    $_."#text" = 'echo "Hello, World!"'
}
$proj.Save("Path\To\MyProject.csproj") 
```

如果您在 NuGet 包管理器控制台中运行脚本，您可以获得所有项目文件的路径，如下所示：

```
PM> get-project -all | select -expand FileName
C:\Users\Me\Documents\Visual Studio 10\Projects\MyProject\MyProject.csproj
C:\Users\Me\Documents\Visual Studio 10\Projects\MyProject\MyProjectTests.csproj
PM> 
```

# php - PHP文件下载在Linux中不起作用

> ID：10718066
> 
> 赞同：0
> 
> 时间：2012-05-23T10:27:18.020
> 
> 标签：php

我正在使用以下代码从服务器下载 mp3 文件。该代码在我的本地系统（Windows 操作系统）中运行良好。

但是，当我将代码移动到服务器（Linux）时，我收到了一个找不到文件的错误。我确定文件路径正确且文件可读

```
if ($fd = fopen ($filePath, "r")) {
    $fsize = filesize($filePath);
    $path_parts = pathinfo($filePath);
    $ext = strtolower($path_parts["extension"]);
    switch ($ext) {                 
        case "mp3":                 
        header("Content-type: audio/mpeg"); // add here more headers for diff. extensions
        header("Content-Disposition: attachment; filename=\"".$originalFileName."\""); // use 'attachment' to force a download
        break;
        default;
        header("Content-type: application/octet-stream");
        header("Content-Disposition: filename=\"".$originalFileName."\"");
    }
    header("Content-length: $fsize");
    header("Cache-control: private"); //use this to open files directly
    while(!feof($fd)) {
        $buffer = fread($fd, 2048);
        echo $buffer;
    }
}
fclose ($fd) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:19:15.693

这是我编写该代码的方式：

```
// A couple of sanity checks on the file path, return a meaningful error message for debugging
if (!file_exists($filePath)) {
  header('HTTP/1.1 404 Not Found');
  exit('The requested file was not found');
} else if (!is_readable($filePath)) {
  header('HTTP/1.1 403 Forbidden');
  exit('The requested file is not accessible');
}

// Get the content type from the extension
// Consider using finfo instead: http://php.net/manual/en/ref.fileinfo.php
$contentTypes = array(
  'mp3' => 'audio/mpeg',
  'jpg' => 'image/jpeg',
  'gif' => 'image/gif'
  // etc etc
);
$ext = strtolower(pathinfo($filePath, PATHINFO_EXTENSION));
$contentType = (isset($contentTypes[$ext])) ? $contentTypes[$ext] : 'application/octet-stream';

// Content-* headers
header("Content-Length: ".filesize($filePath));
header("Content-Type: {$contentType}");
// You will always want the same Content-Disposition: header, regardless of file type
// The only time you would need a different one is if you want to serve "inline" content
header("Content-Disposition: attachment; filename=\"{$originalFileName}\"");

// No-Cache headers
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past

// We don't want the script to time out on large files
set_time_limit(0);

// Output the file
readfile($filePath);
exit; 
```

# windows - Jenkins + Windows + CMake + 多种构建类型（调试、发布）

> ID：10718067
> 
> 赞同：10
> 
> 时间：2012-05-23T10:27:23.133
> 
> 标签：windows, jenkins, cmake

我怎样才能让詹金斯做以下事情？

从 SVN 签出trunk/，然后使用 CMake 构建配置调试和发布，而无需为配置重复作业。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T08:48:41.920

我花了一段时间才弄清楚这一点。这是我设法做到的。

1.  创建一个自由式的工作“结帐”。这项工作将完成所有不依赖于配置类型（调试/发布）的事情。
2.  在“源代码管理”下选择 Subversion
3.  填写存储库 URL。让它指向 /trunk 可能是个好主意。
4.  将本地模块目录设置为“。” （没有引号）
5.  结帐策略“模拟干净”很好
6.  构建触发器轮询单片机，将计划设置为“5 * * * *”以每 5 分钟检查一次。
7.  现在在高级项目选项下检查'使用自定义工作区'并将目录设置为例如“c：/ src”。我们不希望 Jenkins 使用其内部工作区，因为我们希望其他作业能够访问源。
8.  在 Build 下添加以下 Windows 批处理命令，用于清理构建目录。出于某种原因，CMake 没有提供执行此操作的方法。

    ```
    cd c:\
    rmdir /S /Q build
    mkdir build
    cd build

    cmake --version
    rem optionally: svn info c:\src
    cmake -G "Visual Studio 10" c:\src 
    ```

9.  创建另一个作业“构建”，这次将其设为“多配置”作业。该作业将为每个配置（调试/发布）运行。

10.  首先，将构建触发器设置为在作业“结帐”之后构建
11.  现在在配置矩阵下添加一个轴“配置”，其值为“调试版本”（空格 = 分隔符）。不幸的是，Jenkins 的 CMake builder 插件不适用于多配置作业。我们甚至不能使用 cmake --build，因为它总是构建 Debug 配置。要构建，我们必须使用另一个批处理脚本：

    ```
    cd c:\build
    call "%ProgramFiles(x86)%\Microsoft Visual Studio 10.0\VC\vcvarsall.bat"
    msbuild ALL_BUILD.vcxproj /verbosity:minimal /maxcpucount:1 /property:Configuration=%configuration% 
    ```

如果要构建整个解决方案，请指定 .sln 文件而不是 ALL_BUILD.vcxproj。如果您只想构建特定项目，请使用

```
 msbuild <solution>.sln /target:<project> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T11:10:04.807

使用[Jenkins 矩阵作业](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+matrix+project)。将轴之一定义为*build_mode*，其值为*Debug*和*Release*。然后您运行 CMake，它将为您将使用的编译工具（XCode、gcc、VisualStudio 等）创建两种配置。然后，您可以像使用环境变量一样使用*build_mode*，并将其传递给执行实际编译的构建步骤。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-26T05:10:14.137

使用 Visual Studio 生成器时，您可以将要构建的配置传递给 -`cmake --build`命令：

```
cmake --build . --config Release
cmake --build . --config Debug 
```

另请参阅[CMake 文档](http://www.cmake.org/cmake/help/v2.8.12/cmake.html#opt%3a--builddir)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-06T14:04:51.040

使用 Jenkins 一段时间后，我发现如果要重用源目录，应该尽可能少使用作业。

Jenkins 中的默认设置是每个构建使用不同的目录作为其工作区。这意味着您每次构建都要进行完整的 SVN 检出。这需要永远。

如果您想为每个构建使用相同的源目录，则必须担心同步：一次只能构建一个。据我所知，Jenkins 没有内置的同步方式。唯一的方法是只使用一个执行器。即使这样，您也无法控制执行者选择下一个工作的方式。

假设作业“SVN 更新”触发作业“构建”。有人启动“SVN update #33”，这应该会触发“Build #33”。但是，如果 Jenkins 的“轮询 SCM”功能同时安排“SVN 更新”#34，我还没有找到一种方法来告诉它“构建 #33”必须在“SVN 更新 #34”之前运行。所以你可能会在“Build #33”之前运行“SVN update #34”，一切都失败了。除非您手动禁用轮询作业。当然，提醒自己事后重新启用它。

无论如何。在使用 Jenkins 两年后，我将答案更改为：永远不要使用共享资源的多个作业（如源目录），并将所有逻辑烘焙到 shell 脚本中（用于循环配置）。

# javascript - 重复/循环 javascript 函数以检查 cookie 是否已更改

> ID：10718071
> 
> 赞同：0
> 
> 时间：2012-05-23T10:27:27.503
> 
> 标签：javascript, jquery, loops, cookies, repeat

我正在尝试制作一个每 5 秒重复一次的脚本。

将重复的脚本将检查是否存在 cookie。
如果 cookie 不存在，页面将被重定向。
如果 cookie 确实存在，则不会发生任何事情。

饼干工作正常，我唯一的问题是它不会重复！

我正在使用 jQuery 来识别/检查 cookie，并且工作正常。

我想知道代码有什么问题。

我在网上看了很多次，但没有找到我需要的东西。
这是我使用的 cookie 插件：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

```
var checkcookie = $.cookie('myCookie');

checklogin();
function checklogin(){
    setTimeout(function(){
        if(checkcookie == null){
            //if cookie not set
            window.location.href='/';
        }
        else{
            //if cookie set
        }

    }, 5000);

checklogin();//to recall the script after it is done
} 
```

或者，如果有人有另一种方法来检查 cookie 是否已更改，我很想知道！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:36:45.630

它工作正常，但您的 cookie 值不会改变 - 它设置一次并且永远。尝试将其包含在您的`setTimeout()`：

```
checklogin();

function checklogin(){
    setTimeout(function(){
        var checkcookie = $.cookie('myCookie');

        if(checkcookie == null){
            window.location.href='/';
        }
        else{
            //if cookie set
        }

    }, 5000);

    checklogin(); //to recall the script after it is done
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:38:21.100

如果您这样做，则 checklogin 调用必须在 setTimeout 函数内，否则每次都会立即调用它。

另外我会使用 setInterval 代替，所以你不需要你的递归函数：

```
setInterval(function(){
    if(checkcookie == null){
        window.location.href='/';
    }else{
        //if cookie set
    }
},5000); 
```

# python - 如何在 TkInter 中创建子窗口并与父窗口通信

> ID：10718073
> 
> 赞同：9
> 
> 时间：2012-05-23T10:27:36.677
> 
> 标签：python, tkinter

我正在使用 TkInter 创建一些对话框，并且需要能够在单击父级中的按钮时打开子子窗口（模态或非模态）。然后，子窗口将允许创建数据记录，并且需要将该数据（记录或操作已取消）传回父窗口。到目前为止，我有：

```
import sel_company_dlg

from Tkinter import Tk

def main():
    root = Tk()
    myCmp = sel_company_dlg.SelCompanyDlg(root)
    root.mainloop()

if __name__ == '__main__':
    main() 
```

这将调用允许用户选择公司的顶级对话框。公司选择对话框如下所示：

```
class SelCompanyDlg(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent)
        self.parent_ = parent
        self.frame_ = Frame( self.parent_ )
        // .. more init stuff ..
        self.btNew_ = Button( self.frame_, text="New ...", command=self.onNew )

    def onNew(self):
        root = Toplevel()
        myCmp = company_dlg.CompanyDlg(root) 
```

单击**新建 ...**按钮时，将显示创建公司对话框，允许用户填写公司详细信息并单击创建或取消。这是开场白：

```
class CompanyDlg(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent)
        // etc. 
```

我正在努力寻找调用子对话的最佳方式`onNew()`- 我有什么工作，但我不相信这是最好的方法，而且我看不出如何与子对话交流细节。

我尝试查看在线教程/参考资料，但我发现要么过于简单，要么专注于诸如`tkMessageBox.showinfo()`哪些不是我想要的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T10:58:05.677

至少有几种方法可以解决您的问题。您的对话框可以直接向主应用程序发送信息，或者您的对话框可以生成一个事件，告诉主应用程序数据确实要从对话框中提取。如果对话框只是改变了某些东西的外观（例如，字体对话框），我通常会生成一个事件。如果对话框创建或删除数据，我通常会将信息推送回应用程序。

我通常有一个应用程序对象作为整个 GUI 的控制器。通常这与主窗口是同一个类，或者它可以是一个单独的类，甚至可以定义为一个 mixin。此应用程序对象具有对话框可以调用以向应用程序提供数据的方法。

例如：

```
class ChildDialog(tk.Toplevel):
    def __init__(self, parent, app, ...)
        self.app = app
        ...
        self.ok_button = tk.Button(parent, ..., command=self.on_ok)
        ...
    def on_ok(self):
        # send the data to the parent
        self.app.new_data(... data from this dialog ...)

class MainApplication(tk.Tk):
    ...

    def on_show_dialog(self):
        dialog = ChildDialog(self)
        dialog.show()

    def new_data(self, data):
        ... process data that was passed in from a dialog ... 
```

创建对话框时，您传入对应用程序对象的引用。然后对话框知道调用此对象的特定方法以将数据发送回应用程序。

如果您不了解整个模型/视图/控制器，您可以轻松地传入一个函数而不是一个对象，有效地告诉对话框“当你想给我数据时调用这个函数”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-13T23:13:59.140

在我的一个项目中，我试图在我的根窗口（self）的子 tk.Toplevel 窗口（child1）中检查用户是否从根窗口中创建了 tk.Toplevel 窗口（child2），如果这个窗口（child2）目前出现在用户屏幕上。

如果不是这种情况，新的 tk.Toplevel 窗口应该由根窗口的子窗口 (child1) 创建，而不是由根窗口本身创建。如果它已经由根窗口创建并且当前出现在用户屏幕上，它应该获得 focus() 而不是由“child1”重新初始化。

根窗口被封装在一个名为 App() 的类中，两个“子”窗口都是由根类 App() 中的方法创建的。

如果提供给该方法的参数为 True，我必须以安静模式初始化“child2”。我想那是纠缠不清的错误。问题发生在 Windows 7 64 位上，如果这很重要的话。

我试过这个（例子）：

```
import tkinter as tk
from tkinter import ttk
class App(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        top = self.winfo_toplevel()
        self.menuBar = tk.Menu(top)
        top['menu'] = self.menuBar
        self.menuBar.add_command(label='Child1', command=self.__create_child1)
        self.menuBar.add_command(label='Child2', command=lambda: self.__create_child2(True))
        self.TestLabel = ttk.Label(self, text='Use the buttons from the toplevel menu.')
        self.TestLabel.pack()
        self.__create_child2(False)

    def __create_child1(self):
        self.Child1Window = tk.Toplevel(master=self, width=100, height=100)
        self.Child1WindowButton = ttk.Button(self.Child1Window, text='Focus Child2 window else create Child2 window', command=self.CheckForChild2)
        self.Child1WindowButton.pack()

    def __create_child2(self, givenarg):
        self.Child2Window = tk.Toplevel(master=self, width=100, height=100)
        if givenarg == False:
            self.Child2Window.withdraw()
            # Init some vars or widgets
            self.Child2Window = None
        else:
            self.Child2Window.TestLabel = ttk.Label(self.Child2Window, text='This is Child 2')
            self.Child2Window.TestLabel.pack()

    def CheckForChild2(self):
        if self.Child2Window:
            if self.Child2Window.winfo_exists():
                self.Child2Window.focus()
            else:
                self.__create_child2(True)
        else:
            self.__create_child2(True)

if __name__ == '__main__':
    App().mainloop() 
```

问题来了：我无法检查“child2”是否已经存在。出现错误：_tkinter.TclError: bad window path name

解决方案：

获得正确的“窗口路径名称”的唯一方法是，不是直接在“child2”窗口上调用 winfo_exists() 方法，而是调用“child1”窗口的主窗口并添加相应的属性，然后是您要使用的主窗口。

示例（编辑 CheckForChild2 方法）：

```
 def CheckForChild2(self):
        if self.Child2Window:
            if self.Child1Window.master.Child2Window.winfo_exists():
                self.Child1Window.master.Child2Window.focus()
            else:
                self.__create_child2(True)
        else:
            self.__create_child2(True) 
```

# facebook - Facebook Open-Graph 对象链接和多次发布

> ID：10718079
> 
> 赞同：1
> 
> 时间：2012-05-23T10:27:55.897
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

1\. 我已经使用 facebook 打开图将我的动作和对象添加到我的应用程序中。我到处寻找，但找不到如何让对象词可点击并跟随链接。我知道它可以做到，因为我已经看到它由 instagram 完成，例如：

John Doe 与 Instagram 合影。

“照片”这个词是链接的。我想知道该怎么做。

2\. 另一件事我到处找但找不到：我如何在一个帖子中对多个对象应用操作？例如，John Doe 通过 MyApp 购买了“项目 A”和“项目 B”

我在仪表板操作设置中看到了句子的示例，并且这些句子出现了，所以它们应该可以做到，但我不知道怎么做。

谢谢。有例句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:04:23.357

Facebook 会根据操作类型自动处理项目和名词的链接。例如，如果您`Read`在 a 上使用操作`Article`，Facebook 会自动将文章`"John Doe read "Article A" and "Article B" via MyApp`链接到原始文章。

如果您创建自定义`took`操作和`photo`对象类型，您可以看到 Facebook 如何为 Instagram 的操作生成链接。在 Instagram 的例子中，`photo`就是对象，它总是包含一个链接。

![例子](../Images/92f934cd97bfb6cddd7b097851b30af9.png)

# jquery - 在输入字段单击时显示 JQuery UI 日期选择器？

> ID：10718082
> 
> 赞同：8
> 
> 时间：2012-05-23T10:28:09.797
> 
> 标签：jquery, jquery-ui, focus, datepicker, jquery-ui-datepicker

好的，也许这是一个微不足道的问题，但我很想看看是否有人对此有任何想法：

我正在使用 JQuery UI。我有一个`<input id="#myfield" type="text">`字段，我打电话给`$('#myfield').datepicker()`. 每当字段获得焦点时，日期选择器就会显示。但是该字段是我表单中的第一个字段，并且在加载时已经成为焦点，因此单击该字段不会显示它。此外，如果我使用 Esc 键关闭日期选择器，则无法通过单击该字段再次打开它，原因相同：它已经成为焦点。

我知道我可以设置参数`.datepicker({showOn: 'button'})`，但我不想要按钮。有什么方法可以在字段获得焦点时显示日期选择器或在已经获得焦点时单击？我已经尝试过`$('#myfield').click( function () { $(this).focus() } )`，当我单击输入字段时，它会使日期选择器正确打开，但是当我选择一个日期时，它不会出现在字段中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T10:49:21.673

试试这个

```
<html>
<head>
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="jquery-ui-1.8.17.custom.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#date1').datepicker();

$('#date1').focus(function(){
    $('#date1').datepicker('show');
});

$('#date1').click(function(){
    $('#date1').datepicker('show');
});
//$('#ui-datepicker-div').show();
$('#date1').datepicker('show');
});
</script>
</head>
<body>
<input type="text" name="date1" id='date1'>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:48:12.300

这个问题不会回答您的问题，但可能是一种解决方法，如果您没有日期选择器按钮的问题与有日期选择器按钮有关......如果这有任何意义吗？

我有一个问题，我不想拥有按钮，因为用户在我的表单/页面上切换，我不希望按钮有焦点。（奇怪的用户界面体验）

如果这也是你的情况......你总是可以通过执行以下操作来消除它的焦点......（它也将间接解决你现在遇到的问题。）

```
$('#field').datepicker({
      showOn: 'button',
      buttonImage: "/image_path/image.png",
 }).next('img.ui-datepicker-trigger').attr('tabIndex', "-1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-19T13:14:55.397

我有一个类似的场景：页面上的第一个字段应该加载关闭，没有按钮，并且仅在用户单击时打开。但它位于一个封闭的“搜索栏”组件中，因此无法更改默认行为。这是我的解决方法：

```
$(document).ready(function () {
        //getting the controls on the form context
        var calendarios = $('.calendarBox', "#frmOccurrencesHistory");
        //set an invalid option - avoid open on focus and show the buttons
        calendarios.datepicker("option", "showOn", "click");
        //handle click button
        calendarios.each(function () {
            $(this).click(function () {
                $(this).datepicker('show');
            });
        });
    }); 
```

不漂亮，不完美，页面加载时日历会闪烁，但这就是我已经走了多远

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-23T09:25:42.603

```
 $("#datepicker").datepicker({
   dateFormat:'dd/M/yy',
   minDate: 'now',
   changeMonth:true,
   changeYear:true,
   showOn: "focus",
   //buttonImage: "YourImage",
   buttonImageOnly: true, 
   yearRange: "-100:+0",  
}); 

  $( "datepicker" ).datepicker( "option", "disabled", true ); 
```

# java - 将excel中的值分组有问题吗？

> ID：10718083
> 
> 赞同：0
> 
> 时间：2012-05-23T10:28:12.500
> 
> 标签：java, map

我有一个 excel 文件，如下所示。

```
1   Kr Veerappan    123 Hardware Team       02/04/2012  10:30:39    20:23:14
1   Kr Veerappan    123 Hardware Team       03/04/2012  09:46:01    19:58:16
1   Kr Veerappan    123 Hardware Team       04/04/2012  10:06:26    19:58:31
1   Kr Veerappan    123 Hardware Team       05/04/2012  11:38:51    19:32:17
1   Kr Veerappan    123 Hardware Team       06/04/2012  10:43:06    21:02:06
1   Kr Veerappan    123 Hardware Team       09/04/2012  11:02:32    22:05:14
1   Kr Veerappan    123 Hardware Team       10/04/2012  10:49:41    19:07:48
1   Kr Veerappan    123 Hardware Team       11/04/2012  10:16:42    20:30:13
1   Kr Veerappan    123 Hardware Team       12/04/2012  10:15:54    19:54:51
1   Kr Veerappan    123 Hardware Team       13/04/2012  10:18:30    19:05:55
1   Kr Veerappan    123 Hardware Team       18/04/2012  10:52:37    18:50:36
1   Kr Veerappan    123 Hardware Team       19/04/2012  10:24:59    20:29:59
1   Kr Veerappan    123 Hardware Team       20/04/2012  10:29:47    18:58:23
1   Kr Veerappan    123 Hardware Team       23/04/2012  10:24:31    20:11:29
1   Kr Veerappan    123 Hardware Team       24/04/2012  10:13:18    19:05:25
1   Kr Veerappan    123 Hardware Team       25/04/2012  10:44:53    16:30:13
1   Kr Veerappan    123 Hardware Team       26/04/2012  10:44:01    19:25:51
1   Kr Veerappan    123 Hardware Team       27/04/2012  10:58:37    19:24:37
1   Kr Veerappan    123 Hardware Team       30/04/2012  11:16:04    22:34:21
12310452    Ravi Pandit 123 Contractor      02/04/2012  10:59:52    20:10:36
12310452    Ravi Pandit 123 Contractor      03/04/2012  11:12:25    20:44:23
   115  Narayana Rao    123 Client Application Team     21/04/2012  15:59:41    16:52:10
115 Narayana Rao    123 Client Application Team     22/04/2012  10:35:03    12:24:54
117 Butchi B Paddi  123 Mobile Team     03/04/2012  10:16:02    19:19:50
117 Butchi B Paddi  123 Mobile Team     04/04/2012  10:15:47    20:44:08
117 Butchi B Paddi  123 Mobile Team     05/04/2012  11:03:18    18:48:46
117 Butchi B Paddi  123 Mobile Team     06/04/2012  10:54:41    18:26:38
117 Butchi B Paddi  123 Mobile Team     09/04/2012  11:34:15    19:31:29
117 Butchi B Paddi  123 Mobile Team     10/04/2012  12:15:34    21:14:02
117 Butchi B Paddi  123 Mobile Team     11/04/2012  09:29:16    20:11:02
117 Butchi B Paddi  123 Mobile Team     12/04/2012  12:08:09    20:17:53
117 Butchi B Paddi  123 Mobile Team     13/04/2012  11:42:39    20:04:53
117 Butchi B Paddi  123 Mobile Team     14/04/2012  11:08:13    19:05:49
117 Butchi B Paddi  123 Mobile Team     16/04/2012  11:29:49    18:42:21
117 Butchi B Paddi  123 Mobile Team     17/04/2012  14:13:40    19:09:58
117 Butchi B Paddi  123 Mobile Team     18/04/2012  10:43:03    19:50:01
117 Butchi B Paddi  123 Mobile Team     19/04/2012  11:07:09    18:29:44
117 Butchi B Paddi  123 Mobile Team     21/04/2012  10:07:04    18:08:43
117 Butchi B Paddi  123 Mobile Team     23/04/2012  11:28:05    19:46:04
117 Butchi B Paddi  123 Mobile Team     24/04/2012  11:46:01    19:36:22
117 Butchi B Paddi  123 Mobile Team     25/04/2012  10:59:08    19:56:39
117 Butchi B Paddi  123 Mobile Team     26/04/2012  11:56:34    20:22:05
117 Butchi B Paddi  123 Mobile Team     27/04/2012  11:41:21    19:43:51
117 Butchi B Paddi  123 Mobile Team     30/04/2012  11:58:35    20:21:36
119 Sarish Nayak    001 Mobile Team     02/04/2012  10:33:08    14:51:02
119 Sarish Nayak    001 Mobile Team     05/04/2012  10:29:07    19:37:37
119 Sarish Nayak    001 Mobile Team     06/04/2012  10:43:06    15:20:56
119 Sarish Nayak    001 Mobile Team     10/04/2012  09:54:19    18:42:37
119 Sarish Nayak    001 Mobile Team     11/04/2012  09:59:44    18:38:20
119 Sarish Nayak    001 Mobile Team     12/04/2012  10:53:42    18:48:43
119 Sarish Nayak    001 Mobile Team     13/04/2012  10:19:11    19:32:57
119 Sarish Nayak    001 Mobile Team     24/04/2012  09:38:58    19:46:15
119 Sarish Nayak    001 Mobile Team     25/04/2012  09:41:14    19:38:27
119 Sarish Nayak    001 Mobile Team     26/04/2012  10:15:53    20:08:55
119 Sarish Nayak    001 Mobile Team     27/04/2012  09:59:06    19:06:02
120 Manjunatha Dn   065 Hardware Team       02/04/2012  10:19:44    21:45:20
120 Manjunatha Dn   065 Hardware Team       03/04/2012  10:36:08    20:48:28
120 Manjunatha Dn   065 Hardware Team       04/04/2012  10:18:37    22:54:23
120 Manjunatha Dn   065 Hardware Team       05/04/2012  10:29:14    22:45:08
120 Manjunatha Dn   065 Hardware Team       06/04/2012  10:46:33    21:04:38
120 Manjunatha Dn   065 Hardware Team       09/04/2012  10:30:50    20:48:48
120 Manjunatha Dn   065 Hardware Team       10/04/2012  10:20:36    20:22:51
120 Manjunatha Dn   065 Hardware Team       11/04/2012  10:57:13    22:29:50
120 Manjunatha Dn   065 Hardware Team       12/04/2012  10:27:47    21:43:52
120 Manjunatha Dn   065 Hardware Team       13/04/2012  10:23:33    21:51:19
120 Manjunatha Dn   065 Hardware Team       16/04/2012  10:43:52    20:08:14
120 Manjunatha Dn   065 Hardware Team       17/04/2012  10:21:48    23:34:04
120 Manjunatha Dn   065 Hardware Team       18/04/2012  10:29:54    18:24:57
120 Manjunatha Dn   065 Hardware Team       19/04/2012  10:32:54    22:34:13
120 Manjunatha Dn   065 Hardware Team       23/04/2012  10:31:01    21:54:44
120 Manjunatha Dn   065 Hardware Team       24/04/2012  10:44:52    23:30:50
120 Manjunatha Dn   065 Hardware Team       25/04/2012  02:19:51    21:03:21
120 Manjunatha Dn   065 Hardware Team       26/04/2012  10:36:07    22:52:40
120 Manjunatha Dn   065 Hardware Team       27/04/2012  10:40:58    21:41:16
120 Manjunatha Dn   065 Hardware Team       30/04/2012  10:43:33    22:32:15
121 Ashwini Amol Kulkarni   123 Qa Team     02/04/2012  11:18:11    20:18:34
121 Ashwini Amol Kulkarni   123 Qa Team     03/04/2012  11:00:37    19:05:52
121 Ashwini Amol Kulkarni   123 Qa Team     04/04/2012  10:49:30    20:24:35
121 Ashwini Amol Kulkarni   123 Qa Team     05/04/2012  10:20:59    19:53:49
121 Ashwini Amol Kulkarni   123 Qa Team     06/04/2012  11:15:03    18:17:20
121 Ashwini Amol Kulkarni   123 Qa Team     09/04/2012  11:21:01    19:36:11
121 Ashwini Amol Kulkarni   123 Qa Team     10/04/2012  10:38:39    20:40:26
121 Ashwini Amol Kulkarni   123 Qa Team     11/04/2012  10:07:13    19:16:23
121 Ashwini Amol Kulkarni   123 Qa Team     12/04/2012  10:39:32    17:33:30
121 Ashwini Amol Kulkarni   123 Qa Team     13/04/2012  10:49:31    19:33:58
121 Ashwini Amol Kulkarni   123 Qa Team     16/04/2012  12:13:08    20:13:14
121 Ashwini Amol Kulkarni   123 Qa Team     17/04/2012  10:45:31    20:27:33
121 Ashwini Amol Kulkarni   123 Qa Team     18/04/2012  13:17:38    19:46:26
121 Ashwini Amol Kulkarni   123 Qa Team     19/04/2012  11:13:41    19:17:13
121 Ashwini Amol Kulkarni   123 Qa Team     23/04/2012  10:54:53    19:13:41
121 Ashwini Amol Kulkarni   123 Qa Team     24/04/2012  10:26:54    19:31:41
121 Ashwini Amol Kulkarni   123 Qa Team     25/04/2012  12:30:13    18:56:19
121 Ashwini Amol Kulkarni   123 Qa Team     26/04/2012  11:19:46    20:42:33
121 Ashwini Amol Kulkarni   123 Qa Team     27/04/2012  11:38:42    17:23:34
121 Ashwini Amol Kulkarni   123 Qa Team     30/04/2012  16:09:55    20:04:45
122 Melvin P Perinchery 073 Mobile Team     02/04/2012  11:12:52    20:51:39
122 Melvin P Perinchery 073 Mobile Team     03/04/2012  10:51:50    21:05:26
122 Melvin P Perinchery 073 Mobile Team     04/04/2012  11:27:50    19:03:20
122 Melvin P Perinchery 073 Mobile Team     09/04/2012  12:00:08    19:40:01
122 Melvin P Perinchery 073 Mobile Team     10/04/2012  11:57:59    20:14:18
122 Melvin P Perinchery 073 Mobile Team     11/04/2012  10:55:41    18:43:04
122 Melvin P Perinchery 073 Mobile Team     12/04/2012  13:37:39    19:02:58
122 Melvin P Perinchery 073 Mobile Team     13/04/2012  10:47:50    18:34:46
122 Melvin P Perinchery 073 Mobile Team     16/04/2012  11:05:04    19:59:02
122 Melvin P Perinchery 073 Mobile Team     17/04/2012  10:57:45    19:34:32
122 Melvin P Perinchery 073 Mobile Team     18/04/2012  11:15:32    19:23:40
122 Melvin P Perinchery 073 Mobile Team     19/04/2012  12:42:23    19:05:18
122 Melvin P Perinchery 073 Mobile Team     23/04/2012  11:16:11    19:14:55
122 Melvin P Perinchery 073 Mobile Team     24/04/2012  11:05:07    18:44:45
122 Melvin P Perinchery 073 Mobile Team     26/04/2012  11:28:21    18:30:26
122 Melvin P Perinchery 073 Mobile Team     27/04/2012  11:35:13    18:53:09
123 Srinivas R Kaka 065 Qa Team     02/04/2012  10:55:53    20:22:10
123 Srinivas R Kaka 065 Qa Team     03/04/2012  10:52:14    19:12:11
123 Srinivas R Kaka 065 Qa Team     04/04/2012  11:19:28    22:26:03
123 Srinivas R Kaka 065 Qa Team     05/04/2012  10:08:21    20:14:40
123 Srinivas R Kaka 065 Qa Team     06/04/2012  10:46:01    15:04:14
123 Srinivas R Kaka 065 Qa Team     09/04/2012  10:47:02    18:42:00
123 Srinivas R Kaka 065 Qa Team     10/04/2012  11:36:47    19:35:51
123 Srinivas R Kaka 065 Qa Team     11/04/2012  11:06:07    20:24:37
123 Srinivas R Kaka 065 Qa Team     12/04/2012  10:30:28    19:47:31
123 Srinivas R Kaka 065 Qa Team     13/04/2012  10:38:22    20:47:39
123 Srinivas R Kaka 065 Qa Team     16/04/2012  11:25:59    19:44:00
123 Srinivas R Kaka 065 Qa Team     17/04/2012  11:43:50    19:54:12
123 Srinivas R Kaka 065 Qa Team     18/04/2012  10:12:31    19:56:19
123 Srinivas R Kaka 065 Qa Team     19/04/2012  10:50:11    20:20:50
123 Srinivas R Kaka 065 Qa Team     21/04/2012  12:09:09    18:30:17
123 Srinivas R Kaka 065 Qa Team     23/04/2012  10:46:34    18:33:16
123 Srinivas R Kaka 065 Qa Team     24/04/2012  10:57:27    19:43:56
123 Srinivas R Kaka 065 Qa Team     25/04/2012  10:35:21    19:00:49
123 Srinivas R Kaka 065 Qa Team     26/04/2012  11:22:14    19:23:42
123 Srinivas R Kaka 065 Qa Team     27/04/2012  10:58:41    14:39:33
12310637    Manikantha  123 System Admin        02/04/2012  10:32:21    19:04:40
12310637    Manikantha  123 System Admin        03/04/2012  10:19:37    19:44:45
12310637    Manikantha  123 System Admin        04/04/2012  10:20:22    19:14:41
12310637    Manikantha  123 System Admin        05/04/2012  09:55:52    19:49:13
12310637    Manikantha  123 System Admin        06/04/2012  09:41:59    19:48:23
12310637    Manikantha  123 System Admin        09/04/2012  10:09:36    19:47:30
12310637    Manikantha  123 System Admin        10/04/2012  10:05:47    19:46:35
12310637    Manikantha  123 System Admin        11/04/2012  10:08:27    20:54:45
12310637    Manikantha  123 System Admin        12/04/2012  10:17:44    20:07:29
12310637    Manikantha  123 System Admin        13/04/2012  10:00:08    20:16:36
12310637    Manikantha  123 System Admin        16/04/2012  10:02:32    19:53:39
12310637    Manikantha  123 System Admin        17/04/2012  09:57:33    21:47:45
12310637    Manikantha  123 System Admin        18/04/2012  10:21:35    18:54:46
12310637    Manikantha  123 System Admin        19/04/2012  09:55:52    22:24:15
12310637    Manikantha  123 System Admin        23/04/2012  09:53:19    19:10:49
12310637    Manikantha  123 System Admin        24/04/2012  09:47:38    19:51:01
12310637    Manikantha  123 System Admin        25/04/2012  10:27:02    19:20:06
12310637    Manikantha  123 System Admin        26/04/2012  10:19:55    19:42:20
12310637    Manikantha  123 System Admin        27/04/2012  09:57:48    19:44:49
12310637    Manikantha  123 System Admin        30/04/2012  09:53:48    20:30:34
12310647    Plain Card  123 Temporary Card      02/04/2012  09:59:55    20:46:42
12310647    Plain Card  123 Temporary Card      03/04/2012  10:37:15    21:56:23
12310647    Plain Card  123 Temporary Card      04/04/2012  10:31:51    19:36:49
12310647    Plain Card  123 Temporary Card      05/04/2012  11:20:40    20:11:41
12310647    Plain Card  123 Temporary Card      06/04/2012  10:19:19    21:18:34
12310647    Plain Card  123 Temporary Card      09/04/2012  10:49:12    19:52:51
12310647    Plain Card  123 Temporary Card      10/04/2012  10:40:18    20:32:47
12310647    Plain Card  123 Temporary Card      11/04/2012  10:05:50    20:23:45
12310647    Plain Card  123 Temporary Card      12/04/2012  10:56:13    19:55:19
12310647    Plain Card  123 Temporary Card      13/04/2012  10:29:22    20:14:39
12310647    Plain Card  123 Temporary Card      16/04/2012  10:48:22    20:32:47
12310647    Plain Card  123 Temporary Card      18/04/2012  09:52:18    21:44:43
12310647    Plain Card  123 Temporary Card      19/04/2012  10:35:28    19:28:30
12310647    Plain Card  123 Temporary Card      23/04/2012  10:32:22    19:09:25
12310647    Plain Card  123 Temporary Card      24/04/2012  11:24:52    19:35:56
12310647    Plain Card  123 Temporary Card      25/04/2012  11:00:23    19:35:40
12310647    Plain Card  123 Temporary Card      26/04/2012  10:59:39    21:04:15 
```

我正在尝试将这些值分组到如下地图中：

```
private static Map showExcelData(List sheetData) {
        String tempEmpid="",strdepartment="";
        int j=1;

        Map employeeMap = new LinkedHashMap();
        Map tempEmployeeMap = new LinkedHashMap();

        for (int i = 0; i < sheetData.size(); i++) {
            List list = (List) sheetData.get(i);
                HSSFCell employeeid = (HSSFCell) list.get(0);
                HSSFCell department = (HSSFCell) list.get(3);
                HSSFCell date = (HSSFCell) list.get(5);

                strdepartment = department.getRichStringCellValue().getString();
                      if(!(employeeid.getRichStringCellValue().getString().equals("EmpID") || date.getRichStringCellValue().getString().equals("Date") || department.getRichStringCellValue().getString().equals("Department"))){

                           if(!(strdepartment.equals("Temporary Card") || strdepartment.equals("Contractor"))){
                                   employeeMap.put(employeeid.getRichStringCellValue().getString()+"_"+j,date.getRichStringCellValue().getString());
                                   j++;   
                            }
                       }// System.out.println("");
        }
        return employeeMap;
    } 
```

我认为在这里我可以根据员工 ID 对值进行分组，但坦率地说，我不知道该怎么做，因为我是 Java 中的新人。

所以我尝试从上述方法获取地图并尝试如下处理

```
employeeMap =  showExcelData(sheetData);
        String previousEemployeeID = "",employeeID[];
        Iterator<Map.Entry> entries = employeeMap.entrySet().iterator();
        int i=0;
        while (entries.hasNext()) {
            Map.Entry entry = entries.next();
            employeeID = entry.getKey().toString().split("_");
            System.out.println("employeeid : "+employeeID[0]);

            if(previousEemployeeID.equals(employeeID[0])){
                System.out.println(" If Key = " + entry.getKey() + ", Value = " + entry.getValue()+"  : possible key is : "+employeeID[0]+"_"+String.valueOf(i));
                i++;
            }else{
                if(i==0) System.out.println("previousEmployee id : "+entry.getKey()); 
                System.out.println("Else Key = " + entry.getKey() + ", Value = " + entry.getValue()+"  : possible key is : "+employeeID[0]+"_"+String.valueOf(i));
                i=0;
            }
            previousEemployeeID = employeeID[0];

        } 
```

在这里，我只想根据员工 id 对值进行分组，但实际上得到的答案很糟糕，如果我尝试在 map 的第一个元素上方被消除，而第二个元素的结果很好。

这是完整的代码：

```
package org.slingemp.attendance;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFCell;

import java.io.FileInputStream;
import java.io.IOException;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.ArrayList;
import java.util.Map;

public class ReadEmployeeAttendanceDesktop {

    @SuppressWarnings("unchecked")
    public static void main(String[] args) throws Exception {

        Map employeeMap = new LinkedHashMap();

        String fileName = "D:/workspace/FinalFileUpload/SampleData.xls";

        // Create an ArrayList to store the data read from excel sheet.
        List sheetData = new ArrayList();

        FileInputStream fis = null;
        try {

            fis = new FileInputStream(fileName);

            // Create an excel workbook from the file system.
            HSSFWorkbook workbook = new HSSFWorkbook(fis);

            HSSFSheet sheet = workbook.getSheetAt(0);// gets the first sheet on workbook

            Iterator rows = sheet.rowIterator();
            while (rows.hasNext()) {
                HSSFRow row = (HSSFRow) rows.next();
                Iterator cells = row.cellIterator();
                //count=count+1;
                List data = new ArrayList();
                while (cells.hasNext()) {
                    HSSFCell cell = (HSSFCell) cells.next();
                    data.add(cell);
                }

                sheetData.add(data);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (fis != null) {
                fis.close();
            }
        }
        employeeMap =  showExcelData(sheetData);
        String previousEemployeeID = "",employeeID[];
        Iterator<Map.Entry> entries = employeeMap.entrySet().iterator();
        int i=0;
        while (entries.hasNext()) {
            Map.Entry entry = entries.next();
            employeeID = entry.getKey().toString().split("_");
            System.out.println("employeeid : "+employeeID[0]);

            if(previousEemployeeID.equals(employeeID[0])){
                System.out.println(" If Key = " + entry.getKey() + ", Value = " + entry.getValue()+"  : possible key is : "+employeeID[0]+"_"+String.valueOf(i));
                i++;
            }else{
                if(i==0) System.out.println("previousEmployee id : "+entry.getKey()); 
                System.out.println("Else Key = " + entry.getKey() + ", Value = " + entry.getValue()+"  : possible key is : "+employeeID[0]+"_"+String.valueOf(i));
                i=0;
            }
            previousEemployeeID = employeeID[0];

        }
    }
    private static Map showExcelData(List sheetData) {
        String tempEmpid="",strdepartment="";
        int j=1;

        Map employeeMap = new LinkedHashMap();
        Map tempEmployeeMap = new LinkedHashMap();

        for (int i = 0; i < sheetData.size(); i++) {
            List list = (List) sheetData.get(i);
                HSSFCell employeeid = (HSSFCell) list.get(0);
                HSSFCell department = (HSSFCell) list.get(3);
                HSSFCell date = (HSSFCell) list.get(5);

                strdepartment = department.getRichStringCellValue().getString();
                      if(!(employeeid.getRichStringCellValue().getString().equals("EmpID") || date.getRichStringCellValue().getString().equals("Date") || department.getRichStringCellValue().getString().equals("Department"))){

                           if(!(strdepartment.equals("Temporary Card") || strdepartment.equals("Contractor"))){
                                   employeeMap.put(employeeid.getRichStringCellValue().getString()+"_"+j,date.getRichStringCellValue().getString());
                                   j++;   
                            }
                       }// System.out.println("");
        }
        return employeeMap;
    }
} 
```

所以请帮我做以下事情：

1.  根据员工 ID 对值进行分组。

在此先感谢安东尼拉吉小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:01:01.383

请执行下列操作，

```
1.Put the values based on employeeid
2.put the employee id in a separeate arraylist
3.Iterate both map and Arraylist
4.and put the values as follows in the map
Map<String,Map<String,String>> where first one employee id and other dates 
```

希望这会帮助你。

# javascript - 绘制图像时javascript堆栈溢出

> ID：10718087
> 
> 赞同：0
> 
> 时间：2012-05-23T10:28:27.577
> 
> 标签：javascript, image, html, firefox, canvas

我只是将大量图像（大约 5000 个）加载到“new Image()”对象中，并通过调用 canvas.drawImage(image, 0, 0); 在画布中绘制它们。

这在 IE10 上完全可以正常工作，但是一旦我使用 Firefox，我就会收到堆栈溢出错误，因为 Firefox 的内存使用量不知何故不断上升，直到溢出。有谁知道为什么？我认为 GC 在将它们绘制到画布后并没有真正收集我的图像。即使我使用 100 个 Image 对象并在绘制它们之前循环 Image 对象的 src，内存使用量也会不断增加。我将很快测试 Chrome 和 Safari，但仍然需要一个解决方案，因为每个人都在使用“最好的浏览器”Firefox。

编辑：

```
function play() {
    //calculated iLag here
    //calculated wondow.FrameCtr here
    var iFrameRate = Math.round(1000 / 25);
    var oImage = new Image();
    oImage.onload = function () {
        renderImage(this);
    }
    //window.Video is an array of window.URL.createObjectURL(data) (about 500 items)
    oImage.src = window.Video[window.FrameCtr];
    oImage = null;
    setTimeout(
            function () {
                play()
            }, iFrameRate - iLag
        );

function renderImage(oImage) {
  $("#video")[0].getContext("2d").drawImage(oImage, 0, 0);
} 
```

我确实循环了这个视频（500 个项目，25fps）10 次，ff 甚至无法播放一次，导致堆栈溢出。正如我之前提到的，它在 IE10 上运行良好，在 Chrome 上运行得更好，所以我不认为这里的问题是递归。除了使用 Image 对象和设置 src 之外，还有其他方法可以将二进制数据放入画布吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:32:53.157

它已经被记录为 Firefox 中的一个错误。您可以在[此处查看错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=405584)。它显示的最后修改日期为 2010-09-17，但我不确定它是否已在较新版本或什么中得到解决。

但我想新版本的 Firefox 应该没有这个问题。

# javascript - JavaScript + CSS3 动画的内存问题。怎么提高？

> ID：10718091
> 
> 赞同：0
> 
> 时间：2012-05-23T10:28:46.483
> 
> 标签：javascript, jquery, memory-leaks, css-animations

我创建了一个动画循环。一旦一个动画完成，它就会触发下一个动画，依此类推。似乎当我保持浏览器打开 1-2 分钟时，它开始变慢并消耗越来越多的资源，直到我的浏览器响应缓慢并且动画几乎不再运行。我怎样才能防止这种情况发生？这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style type="text/css">
html, body {
    margin: 0;
}
.shared {
    position: absolute;
    opacity: 0;
}
img#article-02 {
    top: 0;
    left: 0;
    width: 205px;
    height: 205px;
}
img#article-03 {
    top: 227px;
    left: 0;
    width: 205px;
    height: 205px;
}
img#article-04 {
    top: 318px;
    left: 227px;
    width: 431px;
    height: 114px;
}
@-webkit-keyframes article2 {
0%   {opacity: 0;}
10%  {opacity: 1;}
60%  {opacity: 1;}
70%  {opacity: 0;}
100% {opacity: 0;}
}
@-webkit-keyframes article3 {
0%   {opacity: 0;}
20%  {opacity: 1;}
70%  {opacity: 1;}
80%  {opacity: 0;}
100% {opacity: 0;}
}
@-webkit-keyframes article4 {
0%   {opacity: 0;}
30%  {opacity: 1;}
80%  {opacity: 1;}
90%  {opacity: 0;}
100% {opacity: 0;}
}
</style>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    animArticle02();
});

function animArticle02() {
    $("#article-02").css('-webkit-animation', 'article2 2s linear');
    var $element = $("#article-02").bind("webkitAnimationEnd", function(){
        this.style.webkitAnimationName = "";
        animArticle03();
    });
}
function animArticle03() {
    $("#article-03").css('-webkit-animation', 'article3 2s linear');
    var $element = $("#article-03").bind("webkitAnimationEnd", function(){
        this.style.webkitAnimationName = "";
        animArticle04();
    });
}
function animArticle04() {
    $("#article-04").css('-webkit-animation', 'article4 2s linear');
    var $element = $("#article-04").bind("webkitAnimationEnd", function(){
        this.style.webkitAnimationName = "";
        animArticle02();
    });
}
</script>
</head>
<body>
<img id="article-02" class="shared" src="article-02.png" alt="" />
<img id="article-03" class="shared" src="article-03.png" alt="" />
<img id="article-04" class="shared" src="article-04.png" alt="" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:36:15.383

它可能与重复的绑定和 jQuery 调用有关。试试这个脚本：

```
//shorthand .ready()
$(function() {

    //cache elements
    var ar2 = $("#article-02"),
        ar3 = $("#article-03"),
        ar4 = $("#article-04");

    //bind once
    ar2.bind("webkitAnimationEnd", function() {
        this.style.webkitAnimationName = "";
        animArticle03();
    });
    ar3.bind("webkitAnimationEnd", function() {
        this.style.webkitAnimationName = "";
        animArticle04();
    });
    ar4.bind("webkitAnimationEnd", function() {
        this.style.webkitAnimationName = "";
        animArticle02();
    });

    //animate
    function animArticle02() {
        ar2.css('-webkit-animation', 'article2 2s linear');
    }

    function animArticle03() {
        ar3.css('-webkit-animation', 'article3 2s linear');
    }

    function animArticle04() {
        ar4.css('-webkit-animation', 'article4 2s linear');
    }

    animArticle02();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-17T20:58:01.910

"transition" 和 "-webkit-keyframes" 都会导致 Chrome 上的内存泄漏。

# azure - 部署 Windows Azure，DNS 名称不起作用

> ID：10718092
> 
> 赞同：0
> 
> 时间：2012-05-23T10:28:53.960
> 
> 标签：azure, dns, subscription

我有两个 Windows azure 的免费订阅，因为我超过了第一个的限制，微软关闭了它。因此，我尝试从另一个订阅部署我的应用程序，并更改了一些设置，这似乎需要更长的时间，并且被分解的应用程序（在生产区域中）的 dns 名称似乎不起作用。（我已经等了大约 15 分钟......在另一个订阅中，链接几乎立即开始工作......）。另外我的微博好像很忙很长时间了..

该应用程序一直运行良好，现在我只是通过切换订阅而遇到所有这些麻烦？？我对此感到非常沮丧，尤其是因为我以前都工作得很好。现在我不得不“浪费”我的时间让所有的东西重新开始工作，我不能从任何新事物开始。我认为这不正常，但我似乎也找不到解决方案。

编辑：半个多小时后，dns 终于开始工作了，但这仍然不能解决部署极慢和 webrole 繁忙状态的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:50:35.717

请研究下面的讨论，以了解为什么部署应用程序的时间可能在 10-30 分钟之间变化：

[有没有办法减少 Azure 部署开始和调用角色 OnStart() 代码之间的时间？](https://stackoverflow.com/questions/10546624/is-there-a-way-to-reduce-time-between-azure-deployment-start-and-role-onstart/10555557#10555557)

以上细节将帮助您获得有关您的陈述的答案“..这仍然不能解决部署极慢和网络繁忙状态的问题..”..

要添加更多信息，当您的应用程序处于部署阶段时，它会经历多个状态，在某些情况下，在一种状态下花费的时间可能比预期的要长，在此期间您会​​看到状态为“忙碌”、“正在初始化”、“开始..”等这些状态实际上解释了您在部署期间所处的级别。我希望这可以帮助您了解部署期间所花费的时间。

# actionscript-3 - AS3 让孩子在 Gestureworks TouchSprite 中工作

> ID：10718095
> 
> 赞同：1
> 
> 时间：2012-05-23T10:29:01.853
> 
> 标签：actionscript-3, button, gesture

最近刚刚尝试使用 Gestureworks 多点触控。在这里，我对 TouchSprite 中的按钮有一些问题，下面是我的代码：

```
package 
{
    import com.gestureworks.core.GestureWorks;
    import com.gestureworks.core.TouchSprite;
    import com.gestureworks.events.GWGestureEvent;
    import com.gestureworks.events.GWTouchEvent;
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Loader;
    import flash.display.Stage;
    import flash.events.Event;
    import flash.display.Sprite;
    import flash.net.URLRequest;
    import flash.events.MouseEvent;
    import flash.events.TouchEvent;
    import flash.ui.Multitouch;
    import flash.ui.MultitouchInputMode;

    public class Main extends GestureWorks
    {
        private var myDisplay:TouchSprite;

        public function Main():void
        {
            super();

            key = "xxx";

            Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;
        }

        override protected function gestureworksInit():void
        {
            myDisplay = new TouchSprite();

            myDisplay.gestureReleaseInertia = true;
            myDisplay.gestureEvents = true;
            myDisplay.disableNativeTransform = false;
            myDisplay.disableAffineTransform = false;
            myDisplay.mouseChildren = true;
            myDisplay.gestureList = {"n-drag":true,"n-scale":true};

            myDisplay.addChild(boliviaMap);
            myDisplay.addChild(mapPink);
            addChild(myDisplay);

            myDisplay.addEventListener(GWGestureEvent.DRAG, gestureDragHandler);
            myDisplay.addEventListener(GWGestureEvent.SWIPE, gestureSwipeHandler);
            mapPink.addEventListener(TouchEvent.TOUCH_TAP, tapPink);
        }

        private function tapPink(e:TouchEvent):void
        {
            trace("PINK");
            indicatorTxt.text = "PINK";
        }

        private function gestureDragHandler(event:GWGestureEvent):void
        {
            trace("g drag: ", event.value.dx, event.value.dy);
            event.target.$x +=  event.value.dx;
            event.target.$y +=  event.value.dy;
            indicatorTxt.text = "g drag: " + event.value.dx + " " + event.value.dy;
        }
    }
} 
```

显然 myDisplay.mouseChildren = true; 将使 myDisplay 无法再拖动或缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:54:09.673

在添加 bigMap 按钮之前，请将 myDisplay 的 mouseChildren 属性设置为 true：

myDisplay.mouseChildren = true;

这应该将 mouseEvents 传递给内部的对象。

另外，根据您想要的效果（我假设这是用于某种多点触控屏幕），我建议您可能应该在 bigMap 上使用 TouchEvent.TOUCH_TAP 而不是 MouseEvent.CLICK(MouseEvents arent multi-touch如果同时在屏幕的另一部分有某种触摸，则不会响应）。

编辑：

假设 boliviaMap 和 mapPink 不是 TouchMovieClips 或 TouchSprites 然后做这样的事情：

```
myDisplay.graphics.beginFill(0x555555, 1);  
myDisplay.graphics.drawRect(0,0,500,500);
myDisplay.graphics.endFill(); 
```

然后添加您的孩子，假设 boliviaMap 和 mapPink 小于 500x500px：

```
myDisplay.addChild(boliviaMap);
myDisplay.addChild(mapPink); 
```

编辑 2- 将 TouchEvents 与 GWEvents 相结合的工作示例（无论如何对我来说）：

```
package  {

    import flash.display.MovieClip;
    import com.gestureworks.core.GestureWorks;
    import flash.ui.Multitouch;
    import flash.ui.MultitouchInputMode;
    import com.gestureworks.core.TouchSprite;
    import flash.display.Sprite;
    import flash.events.TouchEvent;

    public class Main extends GestureWorks {

        public function Main() {
            super(); 
            key = "INSERT YOUR GW KEY HERE";
            Multitouch.inputMode=MultitouchInputMode.TOUCH_POINT;
        }

        override protected function gestureworksInit():void 
        {
            trace("GestureWorks has initialized");
            var myTouchSprite:TouchSprite = new TouchSprite();
            myTouchSprite.graphics.beginFill(0x555555,1);
            myTouchSprite.graphics.drawRect(0,0,100,100);
            myTouchSprite.graphics.endFill();
            myTouchSprite.gestureReleaseInertia = false;
            myTouchSprite.gestureEvents = true;
            myTouchSprite.disableNativeTransform = false; 
            myTouchSprite.disableAffineTransform = false;
            myTouchSprite.gestureList = {"n-drag":true, "n-rotate":true};   
            myTouchSprite.mouseChildren = true;

            var myTappableSprite:Sprite = new Sprite();
            myTappableSprite.graphics.beginFill(0xAD3059,1);
            myTappableSprite.graphics.drawRect(30,30,40,40);
            myTappableSprite.graphics.endFill();
            myTappableSprite.addEventListener(TouchEvent.TOUCH_TAP, tappedThis);

            //myTouchSprite.addChild(myTappableSprite);
            myTouchSprite.addChild(myTappableSprite);
            addChild(myTouchSprite);
        }

        public function tappedThis(event:TouchEvent){
            trace("You tapped this");
        }
    }
} 
```

我还应该补充一点，这仅适用于触发 TouchEvents 的屏幕/设备（如果您使用鼠标单击 myTappableSprite，则不会触发该事件）。

# ruby - 在RubyMotion中将字符串解析为时间

> ID：10718099
> 
> 赞同：4
> 
> 时间：2012-05-23T10:29:14.537
> 
> 标签：ruby, rubymotion

我尝试将时间的文本表示解析为 ruby​​ Time 对象。

通常在红宝石中我会这样做：

```
require 'time'
Time.parse('2010-12-15T13:16:45Z')
# => 2010-12-15 13:16:45 UTC 
```

在 RubyMotion 中，我无法要求库并且 Time.parse 不可用：

```
(main)> require 'time'
=> #<RuntimeError: #require is not supported in RubyMotion>
(main)>
(main)> Time.parse
=> #<NoMethodError: undefined method `parse' for Time:Class> 
```

有没有办法要求 ruby​​ 提供的时间库，而不必复制和重写整个代码以使其与 RubyMotion 兼容？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T11:20:45.860

它不是自动的，但你可以使用`NSDateFormatter`

```
date_formatter = NSDateFormatter.alloc.init
date_formatter.dateFormat = "yyyy-MM-dd'T'HH:mm:ss'Z'"
date = date_formatter.dateFromString "2010-12-15T13:16:45Z"
puts date.description 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-04T23:45:40.207

虽然 Paul.s 的答案确实有效，但它让我毛骨悚然，在我的代码中查看它，所以我一直在寻找。

Matt Aimonetti 的 MacRuby 书有一些好东西：

[http://books.google.ca/books?id=WPhdPzyU1R4C&pg=PA43&lpg=PA43&dq=macruby+nsdate&source=bl&ots=j7Y3J-oBcV&sig=FTr0KyKae-FinH-HNEWBcAAma1s&hl=en&sa=X&ei=ANT0T7mkEM6jqwHx7LjeAw&&ved=0CGEQ=macEQAEwBA#%% 20nsdate&f=false](http://books.google.ca/books?id=WPhdPzyU1R4C&pg=PA43&lpg=PA43&dq=macruby+nsdate&source=bl&ots=j7Y3J-oBcV&sig=FTr0KyKae-FinH-HNEWBcAAma1s&hl=en&sa=X&ei=ANT0T7mkEM6jqwHx7LjeAw&ved=0CGEQ6AEwBA#v=onepage&q=macruby%20nsdate&f=false)

解析很简单：

```
NSDate.dateWithString(<your date string here>) 
```

或者

```
NSDate.dateWithNaturalLanguageString(<all kinds of date strings>) 
```

如果你绝对必须有一个 Time 对象：

```
Time.at(NSDate.date) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T17:29:26.243

[BubbleWrap 为此](http://bubblewrap.io/)添加了一些不错的包装器：

> 时间
> 
> Time Ruby 类添加了一个类级方法，用于将 iso8601 格式的字符串转换为 Time 实例。
> 
> Time.iso8601("2012-05-31T19:41:33Z")
> => 2012-05-31 21:41:33 +0200

这会给你一个 NSDate 实例，就这么简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T18:34:31.907

也许这已经被修复了。我在 RubyMotion 中解析时间没问题。

```
(main)> Time.parse("2016-01-21 10:33:07")
=> "2016-01-21 10:33:07 -0800" 
```

RubyMotion 4.8

```
$ motion --version
4.8 
```

# drag-and-drop - 如何在鼠标光标上设置 Droppable/Draggable 事件

> ID：10718100
> 
> 赞同：0
> 
> 时间：2012-05-23T10:29:15.770
> 
> 标签：drag-and-drop, wicket

我已经使用 Ajax 行为在 Wicket 中实现了拖放效果。如果我将图像拖到树节点上，则可放置接受的位置在图像的中间。如何在光标上设置这个位置（事件）？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:24:58.820

我也找到了。解决方案是：

```
DroppableAjaxBehavior b = new DroppableAjaxBehavior() {
    @Override
    public void onDrop(Component droppedComponent, AjaxRequestTarget target) {
        //do something to handle event
    }
};

b.setTolerance(ToleranceEnum.POINTER); 
```

# asp.net-mvc - 如何使用表单帖子安全地向/从外部服务传递和接收数据？

> ID：10718102
> 
> 赞同：1
> 
> 时间：2012-05-23T10:29:17.737
> 
> 标签：asp.net-mvc, asp.net-mvc-3, forms, security

我们需要将数据发布给为我们提供服务的合作伙伴。我们想通过一个表单帖子来做到这一点，以保持简单。

我们将使用 JavaScript 等将表单数据（id）发布到服务提供商网站上的表单中。服务需要获取此 id 并向用户显示一些相关数据。我们将此张贴描绘到他们服务器上的表单中，然后在弹出窗口中显示结果。如果用户对相关数据感到满意，他们将在弹出窗口（位于服务提供商服务器上）的表单上点击提交，并且服务提供商将发布到我们服务器上的控制器。

1.  用户点击我们网站上的链接
2.  这会将数据发布到服务提供商站点，并在弹出窗口/iframe 中显示来自服务提供商站点的内容
3.  用户检查弹出窗口中显示的数据并看到他们对此感到满意
4.  用户在弹出窗口中点击提交（服务提供商更新他们网站上的内容）
5.  服务提供商向我们的控制器提交表单数据（我们在我们的网站上更新了一些内容）

我们需要确保只有我们的服务器可以发布到他们的页面，并且只有他们可以发布到我们的页面。

我们正在使用 MVC3。他们正在使用他们选择的网络技术。

关于最简单、最快、最安全的方法的任何建议。显然需要防止重放攻击，并确保它们是唯一可以发布给我们的攻击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:15:49.070

> 我们想通过一个表单帖子来做到这一点，以保持简单。我们将发布到他们服务器上的网页，他们将进行一些处理并将数据发布回我们服务器上的控制器操作。

啊不，那是不可能的。如果您有一个 HTML`<form>`其操作指向某个 url（无论此 url 位于您的服务器上还是第三方服务器上），当提交此表单时，浏览器将 POST 到此 url 并重定向到它。这意味着虽然您将能够将请求发送到远程源，然后它可能会查询您域上的某些控制器操作，但您将无法在浏览器中显示此控制器操作的执行结果，因为浏览器将显示此远程 url 的执行结果。

因此，一种技术是将 HTML `<form>`POST 发送到您的控制器操作，该操作本身会将请求委托给远程服务（使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)），然后将一些视图返回给用户。

现在剩下的就是要求远程服务器的网络管理员只允许来自您的 Web 服务器 IP 地址的 HTTP 请求。

当然，这让用户有可能向您的控制器操作发送 HTTP 请求，从而间接访问远程服务。防止这种情况发生的唯一可能方法是使用身份验证并拒绝任何人对该控制器操作的公共访问。

# c++ - 调用 end() 时出现 std::multimap 错误

> ID：10718104
> 
> 赞同：0
> 
> 时间：2012-05-23T10:29:22.167
> 
> 标签：c++, null, iterator, multimap

如何检查多图的元素是否存在？
使用此代码：

```
typedef std::multimap<std::string, std::string> TagVal;
TagVal tv;
//... add values to tv ...
TagVal::const_iterator it = tv.find("abc");
if(it == TagVal::end())    // <--- ERROR
    cerr << "Error"; 
```

我收到以下编译时错误：

> 错误：不能调用成员函数 'std::multimap<...>::iterator std::multimap<...>::end() ... 没有对象。

平台：Linux、GCC 4.5.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:33:08.443

原因是它`end`不是一个静态方法，它必须在你得到迭代器的对象上调用：

```
if(it == tv.end())
    cerr << "Error"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:35:22.240

因为你已经初始化`tv`为

`TagVal tv;`

你必须调用 multimap 类的 end() 函数：

`it == tv.end()`

因为在该对象上调用 end() 并且它不是静态方法。

# asp.net-mvc - 尝试更新实体时出错

> ID：10718106
> 
> 赞同：0
> 
> 时间：2012-05-23T10:29:29.630
> 
> 标签：asp.net-mvc, entity-framework, dbcontext

我在我的 MVC 3 应用程序中使用实体框架 4.3，当尝试更新实体时（创建和删除工作正常）我收到此错误：

> 存储更新、插入或删除语句影响了意外数量的行 (0)

当我进入调试模式时，我看到在 [HttpPost] 方法上没有提供提要 ID：

```
public ActionResult Edit(Feed feed)
    {
        if (ModelState.IsValid)
        {
            db.Entry(feed).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        ViewBag.FolderId = new SelectList(db.Folders, "FolderId", "Name", feed.FolderId);
        return View(feed);
    } 
```

尽管在普通的 Get 方法中传递了 id。这些是我的实体

喂养：

```
public class Feed
{
    [ScaffoldColumn(false)]
    public int FeedId { get; set; }

    [StringLength(150, ErrorMessage = "The {0} must be less then {1} charecters")]
    public string Title { get; set; }

    [ScaffoldColumn(false)]
    public string Description { get; set; }

    [Required(ErrorMessage = "you must enter a valid link")]
    [StringLength(500, ErrorMessage = "The {0} must be less then {1} characters long.")]
    public string LinkUrl { get; set; }

    [ScaffoldColumn(false)]
    public DateTime PublishDate { get; set; }

    [ScaffoldColumn(false)]
    public string Image { get; set; }

    [ForeignKey("Folder")]
    [Required(ErrorMessage="you must choose a folder")]
    public int FolderId { get; set; }

    public virtual Folder Folder { get; set; }

    public Feed()
    {
        PublishDate = new DateTime(2012, 1, 1);
    }
} 
```

文件夹：

```
public class Folder
{    
    public int FolderId { get; set; }

    [Required(ErrorMessage = "you must enter a folder name")]
    [StringLength(150, ErrorMessage = "the {0} must be less then {1} charecters")]
    public string Name { get; set; }
} 
```

我一直在寻找解决方案，但它们都不起作用，例如尝试刷新方法，该方法在 DbContext 中不存在，或者在 FeedId 和 FolderId 上方定义 [Key] 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:33:39.877

显然，但是将 [ScaffoldColumn(false)] 属性放在我的模型中它并没有在我的视图中创建它，并且没有传递 id。

我添加`@Html.HiddenFor(model => model.FeedId)`到我的模型中并解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:52:20.830

您不应该手动维护实体状态 - 更改跟踪应该由上下文执行。

您正在使用视图模型并假设它应该附加到数据库。

你需要做类似的事情..,

```
Feed DbFeed = DBSet.Where(f => f.id = feed.Id);
DbFeed.Property = NewValue;
db.SaveChanges(); 
```

（请原谅可能不正确的语法 - 我默认在 VB 中工作）

也就是说，从 DB 上下文中获取 Feed 对象的新实例，然后对给定的对象执行更改。

这是因为上下文实际上并没有给你一个普通的`Feed`对象，而是一个包装它并具有相同属性的匿名类型。包装器覆盖您的方法并检测属性更改，这是它维护状态的方式。

您从视图返回的提要对象不包含此包装器，因此存在问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:53:49.440

实体框架跟踪对象，您从视图中获得的提要是未跟踪的。这种情况的模式是从数据库中获取要更新的对象，然后调用 UpdateModel 它将未跟踪实体的更改应用到跟踪实体，然后您可以保存..

```
 if (ModelState.IsValid)
    {
        var trackedEntity = db.Find(feed.Id)
        UpdateModel(trackedEntity);
        db.SaveChanges();
        return RedirectToAction("Index");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T13:42:20.437

显然你遇到了并发问题。您的更新状态应该运行为：

```
 UPDATE tableA SET colA = 'value' WHERE colX1 = 'compare1' AND colX2 = 'compare2'; 
```

这`colXn`可能是您的主键等，也可能是您正在使用的每一列。如果您不处理并发，如果有人与您同时获取数据，在您之前更改并保存它，您的`WHERE`语句将永远不会匹配，因为您正在更新的记录信息已经有了新信息。

# asp.net - 使用 MVC 扩展注册路由和区域时未显示 MVC 区域

> ID：10718109
> 
> 赞同：0
> 
> 时间：2012-05-23T10:29:45.863
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, autofac, asp.net-mvc-3-areas

我正在将[MVC Extension 与 Autofac 一起](http://mvcextensions.github.com/)使用，但我的区域存在问题。我不确定我做错了什么。

最初我有以下内容`global.asax.cs`：

```
public class MvcApplication : AutofacMvcApplication
{
     public MvcApplication()
     {
          Bootstrapper.BootstrapperTasks
               .Include<RegisterControllers>();
     }
}

protected override void OnStart()
{
     AreaRegistration.RegisterAllAreas();

     RegisterGlobalFilters(GlobalFilters.Filters);
     RegisterRoutes(RouteTable.Routes);

     base.OnStart();
}

public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
     filters.Add(new HandleErrorAttribute());
}

public static void RegisterRoutes(RouteCollection routes)
{
     routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

     routes.MapRoute(
          "Default", // Route name
          "{controller}/{action}/{id}", // URL with parameters
          new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
     );
} 
```

使用此代码，我的区域显示得很好。 `http://localhost:19857/Administration`显示我的索引视图。

如果我希望 MVC Extensions 为我注册我的路线和区域，那么`http://localhost:19857/Administration`什么都不显示，只是一个 404 错误。

这是`global.asax.cs`注册我的路线和区域的更新：

```
public class MvcApplication : AutofacMvcApplication
{
     public MvcApplication()
     {
          Bootstrapper.BootstrapperTasks
               .Include<RegisterAreas>()
               .Include<RegisterControllers>()
               .Include<RegisterRoutesBootstrapperTask>();
     }

     protected override void OnStart()
     {
          RegisterGlobalFilters(GlobalFilters.Filters);

          base.OnStart();
     }

     public static void RegisterGlobalFilters(GlobalFilterCollection filters)
     {
          filters.Add(new HandleErrorAttribute());
     }
} 
```

我的`RegisterRoutesBootstrapperTask class`：

```
public class RegisterRoutesBootstrapperTask : RegisterRoutesBase
{
     public RegisterRoutesBootstrapperTask(RouteCollection routes)
          : base(routes)
     {
     }

     protected override void Register()
     {
          Routes.Clear();

          Routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

          Routes.MapRoute(
               "Default",
               "{controller}/{action}/{id}",
               new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
          );
     }
} 
```

为什么我的区域不显示？

**更新**

当我去`http://localhost:19857/Administration`然后默认为仪表板控制器索引视图。这是我所在地区的注册码：

```
public override string AreaName
{
     get
     {
          return "Administration";
     }
}

public override void RegisterArea(AreaRegistrationContext context)
{
     context.MapRoute(
          "Administration_default",
          "Administration/{controller}/{action}/{id}",
          new { controller = "Dashboard", action = "Index", id = UrlParameter.Optional }
     );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:46:37.590

我似乎已经解决了这个问题。问题是`Routes.Clear();` 我把它拿出来了，现在一切正常。这是我对上面代码所做的更改：

```
public class RegisterRoutesBootstrapperTask : RegisterRoutesBase
{
     public RegisterRoutesBootstrapperTask(RouteCollection routes)
          : base(routes)
     {
     }

     protected override void Register()
     {
          Routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

          Routes.MapRoute(
               "Default",
               "{controller}/{action}/{id}",
               new { controller = "Home", action = "Index", id = UrlParameter.Optional }
          );
     }
} 
```

这是我的更新`global.asax.cs`：

```
public class MvcApplication : AutofacMvcApplication
{
     public MvcApplication()
     {
          Bootstrapper.BootstrapperTasks
               .Include<RegisterAreas>()
               .Include<RegisterControllers>()
               .Include<RegisterRoutesBootstrapperTask>()
               .Include<AutoMapperBootstrapperTask>();
     }
} 
```

# javascript - 哪种方法最快

> ID：10718110
> 
> 赞同：0
> 
> 时间：2012-05-23T10:29:47.053
> 
> 标签：javascript, jquery, optimization

我有一个简单的画廊滑块图像。当第一个图像可见时，左箭头被隐藏，当最后一个图像可见时，右箭头被隐藏。

为了隐藏和显示箭头，我使用了 hide 和 show 方法。但其他方法也可以工作，例如：fadeIn() / fade Out 和 css('visibility','hidden') / css('visibility','visible')

我想知道哪个是最优化的方法。最快的一个

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:38:13.737

不使用动画时来自[http://api.jquery.com/hide/.hide ()。](http://api.jquery.com/hide/)

> 这大致相当于调用 .css('display', 'none')，只是 display 属性的值保存在 jQuery 的数据缓存中，以便稍后可以将 display 恢复为其初始值。如果一个元素的显示值为 inline，然后被隐藏并显示，它将再次被显示为 inline。

fadeIn() 和 fadeOut() 使用动画并且会更慢并且需要更多处理（就像 hide() 设置了时间一样。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:41:37.487

根据[**这个测试**](http://jsperf.com/hide-test2)-`hide()`稍微快一点`fadeOut()`（因为它不使用动画）。但是如果你想要最快的方式来使用像`document.getElementById('a').style.display = 'none';`这样的原生 js 命令，速度会快 80%-90%。

# jquery - jQuery .removeClass() - 不删除类

> ID：10718111
> 
> 赞同：0
> 
> 时间：2012-05-23T10:29:48.530
> 
> 标签：jquery

我正在尝试删除一个课程，但由于某种原因它失败了，任何人都可以分享一些想法吗？

这是代码：

```
$(document).ready(function() {  
    if ($('.space-fill').height() > 22) {
         $('.space-fill').addClass('space-full');
    }
    else{
         $('.space-fill').removeClass('space-full');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:39:00.553

我做了一个疯狂的猜测，并说您必须遍历所有`.space-fill`元素才能读取它们的高度并应用该类：

```
$('.space-fill').each(function() {
    $(this).toggleClass('space-full', $(this).height() > 22);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:34:25.350

在您的`if`陈述中，您需要确保将苹果与苹果进行比较。

`parseInt($('.space-fill').height()) > 22`

# iphone - 通过替换标签在iphone中创建的html页面中的杂散字符

> ID：10718117
> 
> 赞同：0
> 
> 时间：2012-05-23T10:30:00.637
> 
> 标签：iphone, html, string

我在我的包中保存了一个 html 页面，我在 html 中有某些标签，例如 {PRICE} 等，这些标签在运行时被代码替换为实际值

```
str=[str stringByReplacingOccurrencesOfString:@"{PRICE}" withString:[self currencyForKey:@"my price"]]; 
```

我已确保此 currencyforkey 方法不返回空值，但在创建整个 html 页面后，通过将所有标签替换为此类值，并在 webview 中显示一些特殊的杂散字符，最终网页中包含一些特殊的杂散字符。这些特殊字符是

```
Ã¯Â»Â¿ Ã¯Â»Â¿Ã¯Â»Â¿ Ã¯Â»Â¿Ã¯Â»Â¿Ã¯Â»Â¿Ã¯Â»Â¿ Ã¯Â»Â¿Ã¯Â»Â¿Ã¯Â»Â¿Ã¯Â»Â¿ 
```

我检查了整个初始 html 页面和我的整个项目中是否有这些字符，但没有找到这些字符可能来自哪里？？？我正在使用 nsasciistring 编码从保存在包中的 html 创建字符串

```
NSString *path=[[NSBundle mainBundle] pathForResource:@"myhtml" ofType:@"html"];
        NSData *htmlData=[NSData dataWithContentsOfFile:path];
        NSString *tableStr=[[NSString alloc] initWithData:htmlData encoding:(NSStringEncoding)NSASCIIStringEncoding]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:55:21.607

您确定捆绑包中的 HTML 页面是 ASCII 编码的吗？如果它是 UTF-8 编码，那么使用 NSASCIIStringEncoding 很可能会导致显示意外的杂散字符。

# php - OpenLayers + Ajax：错误或错误

> ID：10718118
> 
> 赞同：0
> 
> 时间：2012-05-23T10:30:04.443
> 
> 标签：php, jquery, ajax, html, openlayers

我正在使用下面给出的代码来演示容器中的`OpenLayers`地图。`DIV`我不知道为什么，但我必须多次重新打开网页才能看到地图。这不是互联网连接速度的问题。我真的必须点击几个 jquery 选项卡，最后在指定的选项卡中打开地图。实际上没有生成错误消息。它发生在 Chrome 和 Firefox 中。我不知道这是一个错误还是我的错误。

请任何建议都非常感谢。

**主页.php**

```
 <script type="text/javascript">
      $(document).ready(function() {
            $("#tabs").tabs({
            ajaxOptions: {
                success: function( html ) {
                    $("#content").html(html);;
                }
            }
        });
      });           
    </script>
<div id="tabs">
    <ul>
        <li><a href="administration.php"><span>Administration</span></a></li>
        <li><a href="map.php"><span>Map</span></a></li>
    </ul>
</div> 
```

**地图.php**

```
<script src="http://www.openlayers.org/api/OpenLayers.js"></script>
<script>
    map = new OpenLayers.Map("basicMap");
    map.addLayer(new OpenLayers.Layer.OSM());       
    var points = new OpenLayers.Layer.Text( "Resource Locations",
                    { location: "dataLonLat.php",
                      projection: map.displayProjection
                   });
    map.addLayer(points);

    var geographic = new OpenLayers.Projection("EPSG:4326");
    var mercator = new OpenLayers.Projection("EPSG:900913");

    //Set start centrepoint and zoom 
    var lonLat = new OpenLayers.LonLat(2.07632,41.30408)
          .transform(
            geographic, // transform from WGS 1984
            mercator // to Spherical Mercator Projection
          );
    var zoom=16;
    map.setCenter (lonLat, zoom);  

  </script>

<div id="basicMap" style="width: 100%; height: 100%;">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:46:38.287

我认为您的脚本«map»脚本在#basicMap 添加到页面之前进行了评估。在`map.php`中，尝试将您的#basicMap 放在首位，然后将您的脚本标签放在后面。

# javascript - Javascript：即使使用 jquery.getScript()，也会出现随机“对象没有方法”错误

> ID：10718122
> 
> 赞同：2
> 
> 时间：2012-05-23T10:30:19.263
> 
> 标签：javascript, jquery, playframework

我一直在使用 JavaScript，我需要从另一个 .js 文件中调用一个函数。

该代码大部分时间都有效，但有时它会给我错误“对象没有方法里程表”。我什至将代码放在对 getScript() 的调用中，以确保它在尝试调用该`odometer()`函数之前已加载，但我仍然遇到随机错误。

继承人的代码：

```
var updateDisplay = function(){
    console.log("refreshing Odometers");
    $.getScript("/odometer.js", function(){
        $.getJSON(
            '/getData',
            {
                product: '',
                unit: unitSelection(),
                period: salesPeriod(),
                reportBegin: $("#datepickerfrom").val(),
                reportEnd: $("#datepickerto").val()
            },
            function(data){
                    $(".odometer").odometer({
                        odometerData:data
                    });
            });
    });
}; 
```

我在这一行收到一个错误：

```
$(".odometer").odometer({
    odometerData:data
}); 
```

它说“对象没有方法里程表”。

我正在使用 Play 框架进行开发，并且已经在 HTML 页面中导入了 jQuery 和我的其他 JavaScript 文件。

这是我的 JS 导入顺序：

1.  jQuery
2.  odometer.js（即使我使用 getScript，我也把它放在那里只是为了确保）
3.  main.js（给定的代码驻留在其中..）

我究竟做错了什么？

感谢您的帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:59:57.723

我认为

`$(".odometer").odometer({...})`

在里程表扩展到jQuery之前调用，流程可能是这样的

```
$(".odometer").odometer({...});     // first called
$.fn.odometer = function(){...};    // later it was extended to jQuery 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:29:14.587

似乎是ajax缓存设置的问题。

我从这个问题中找到了答案：

[jquery ajax 错误](https://stackoverflow.com/questions/8538139/jquery-ajax-bug)

添加后

```
$.ajaxSetup({ cache: true }); 
```

getScript 工作正常。感谢你们抽出时间来：）

# iphone - Cocoa：你如何命名你的初始化参数以不干扰 ivars？

> ID：10718124
> 
> 赞同：3
> 
> 时间：2012-05-23T10:30:27.070
> 
> 标签：iphone, cocoa, coding-style

让我们从一个例子开始：

```
@interface myClass : NSObject {
    NSString * title;
}

-(id)initWithTitle:(NSString*)title; 
```

编译器不喜欢这样，因为 title init 参数隐藏了 myClass 标题 ivar。

但我不喜欢这些选项：

```
-(id)initWithTitle:(NSString*)t;
-(id)initWithTitle:(NSString*)myTitle;
-(id)initWithTitle:(NSString*)_title; 
```

所以这是一个民意调查：你的约定是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T10:35:53.637

有些人更喜欢调用他们的 ivars `_title`，或者`title_`然后他们可以`title`在函数中用作参数名称。或者你只是调用它`aTitle`或`newTitle`. 没有正确或错误的方法来做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T10:39:36.053

我更喜欢使用`-(id)initWithTitle:(NSString *)aTitle;`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T10:45:47.563

我目前使用`pTitle`，但使用`inTitle`多年。

# android - setVolumeControlStream 在 ICS 上不起作用

> ID：10718125
> 
> 赞同：4
> 
> 时间：2012-05-23T10:30:27.247
> 
> 标签：android, android-audiomanager

我有一个管理电话的应用程序，我需要控制通话期间扬声器打开时的通话音量和来电时铃声的音量。

我在用着：

```
setVolumeControlStream( AudioManager.STREAM_MUSIC ); 
```

我的 Activity onCreate() 使用音量硬键控制流。到目前为止，我只能在扬声器打开时控制音量。此外，这仅适用于 GingerBread 设备，但对 ICS 设备没有影响。

是否有任何已知的不兼容性？我如何也可以控制铃声级别？我也试过：

```
setVolumeControlStream( AudioManager.STREAM_RING ); 
```

但同样对这两种设备都没有影响。

顺便说一句，我注意到在手机响铃时按下硬键会改变“多媒体应用音量”，而不是“铃声音量”（??）。

提前致谢。

# javascript - 用孩子创建 json 树结构

> ID：10718136
> 
> 赞同：0
> 
> 时间：2012-05-23T10:30:48.680
> 
> 标签：javascript, jquery, json

我有一个 json 树结构，通过按此小提琴上的调用来附加：http: [//jsfiddle.net/adrianjsfiddlenetuser/C6Ssa/4/](http://jsfiddle.net/adrianjsfiddlenetuser/C6Ssa/4/)

在小提琴上按调用多个图块并将生成的json复制/粘贴到http://jsonlint.com/，生成的json无效

我需要制作这个：

```
{
    "nodes": [
        {
            "url": "asdfas",
            "date": ""
        },
        {
            "url": "asdfas",
            "date": ""
        },
        {
            "url": "asdfasfdasas",
            "date": ""
        }
    ]
} 
```

这可以修改，以便可以将多个孩子添加到树结构中，我想我需要以某种方式修改 var 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:41:50.990

尝试：

```
var data = {nodes: []};

$("#add").on('click', function () {
    data.nodes.push({
        url: "some url",
        date: new Date
    });

    $("#myDiv").text(JSON.stringify(data));
}); 
```

如果不是，我不明白你的问题；）

[http://jsfiddle.net/gY5yQ/](http://jsfiddle.net/gY5yQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:44:41.737

看看这是否有帮助[http://jsfiddle.net/C6Ssa/12/](http://jsfiddle.net/C6Ssa/12/)

```
var data = [];

$("#add").click(add);
function add() {

data.push({
    param1: "stuff",
    param2:1,
    param3:1
});
var sample = {};
sample.node = data
$("#myDiv").text(JSON.stringify(sample));
} 
```

# android - 片段内片段中的上下文菜单 (ActionMode)

> ID：10718137
> 
> 赞同：1
> 
> 时间：2012-05-23T10:30:50.807
> 
> 标签：android, menu, android-fragments, actionbarsherlock

我在 Activity 的 Fragment A 中得到了 Fragment B。按预期工作。单击片段 B 中的项目时，我想显示一个[上下文菜单](http://developer.android.com/guide/topics/ui/menus.html#CAB)栏。

我正在使用 ActionbarSherlock。我在片段 B 中做了什么：

```
private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        MenuInflater inflater = mode.getMenuInflater();
        inflater.inflate(R.menu.entry_list_context_menu, menu);
        return true;
    }

    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        // make sure no item is selected when bar is shown
        adapter.clearSelection();
        adapter.notifyDataSetChanged();
        return false;
    }

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        Log.d("EntryList", "Item '" + item.getTitle()
                + "' clicked [onActionItemClicked()]");
        return true;
    }

    @Override
    public void onDestroyActionMode(ActionMode mode) {
        adapter.clearSelection();
        adapter.notifyDataSetChanged();
        contextualMode = null;
    }
};
private ActionMode contextualMode;

@Override
public void onItemClick(AdapterView<?> parentView, View itemView,
        int index, long id) {
    DocumentEntity entry = (DocumentEntity) itemView.getTag();
    // something went wrong
    if (entry == null) {
        Log.e("EntryList", "Tag-Less item clicked [onItemClick()]");
        return;
    }

    if (contextualMode != null) {
        Log.d("EntryList",
                "contextualMode is not yet initialized [onItemClick()]");
        contextualMode = getSherlockActivity().startActionMode(
                mActionModeCallback);
    } else {
        Log.d("EntryList",
                "contextualMode already initialized [onItemClick()]");
    }

    entry.setSelected(!entry.isSelected());
    Log.d("EntryList", "entry.selected set to " + entry.isSelected()
            + " [onItemClick()]");
} 
```

选择效果很好，但没有显示上下文操作栏。调试结果是：

> contextualMode 已初始化 [onItemClick()] entry.selected 设置为 'true' [onItemClick()]

没有设置 contextualMode 的其他位置...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:53:23.820

> 我在片段 A 中得到了片段 B...

Android 不支持在另一个 Fragment 中嵌入一个 Fragment。对不起。这使我相信您的问题超出了`ActionBar`没有显示您的上下文的事实。我建议你澄清你原来的帖子。

# objective-c - 无效的消费者自由职业者 API

> ID：10718141
> 
> 赞同：3
> 
> 时间：2012-05-23T10:31:03.227
> 
> 标签：objective-c, ios, xcode, api, freelancer.com-api

我正在将自由职业者 API 集成到 iOS 应用程序中，并且在身份验证过程 (getRequestToken) 期间，我收到以下错误：

```
<errors xmlns="http://api.freelancer.com/schemas/xml-0.1">
<error>
    <code>5002</code>
    <msg>General Token Authentication Error</msg>
    <longmsg>Authentication Failed. Reason: invalid consumer</longmsg>
</error> 
```

. 我在请求 URL 中附加了 oauth 请求所需的查询参数。网址是[http://api.sandbox.freelancer.com/RequestRequestToken/requestRequestToken.json?oauth_callback=](http://api.sandbox.freelancer.com/RequestRequestToken/requestRequestToken.json?oauth_callback=) 'oob'&oauth_consumer_key=' ***** '&oauth_signature_method='HMAC-SHA1'&oauth_signature='V58tFJMmk2%252FI6kcZl1m%252BaA%252FK7Bw%253D '&oauth_timestamp='1337768929'&oauth_nonce='EE982DEB-B6D0-47DD-9193-6CCA3F25446E'&oauth_version='1.0'。任何帮助，将不胜感激 。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:21:07.710

我建议您查看一些 Oauth 库来进行身份验证。

对于一个也许你可以看看 [http://code.google.com/p/oauth/](http://code.google.com/p/oauth/)

这将对您有很大帮助。

# android - 无法设置 OnTouchListener

> ID：10718142
> 
> 赞同：2
> 
> 时间：2012-05-23T10:31:04.257
> 
> 标签：android, ontouchlistener

Falks，这将是一个愚蠢的错误，但我真的猜不出它在哪里。我正在尝试设置 OnTouchListener 但未调用方法 onTouch。

这是我的代码：

```
 public class StepActivity extends SherlockActivity  
    {
    private Recipe recipe = null;
    private String TAG = "StepActivity";
    private ArrayList<Step> steps;
    private int caret = 0;
    private int currentStep = 1;
    private int stepQuantity;
    private TextView viewStepBody;
    private TextView stepNumber;
    private ImageView viewPicture;
    private String bodyText;
    private String picture;
    private String [] pictures = new String [5];

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.step_page);
        RelativeLayout view = new RelativeLayout(this);
        view.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View view, MotionEvent motion) {

                Log.i(TAG, "In onTouch");
                float downXValue = 0;
                // Get the action that was done on this touch event
                switch (motion.getAction())
                {

                    case MotionEvent.ACTION_DOWN:
                    {
                        Log.i(TAG, "In onTouch1");
                        // store the X value when the user's finger was pressed down
                        downXValue = motion.getX();
                        break;
                    }

                    case MotionEvent.ACTION_UP:
                    {
                        Log.i(TAG, "In onTouch2");
                        // Get the X value when the user released his/her finger
                        float currentX = motion.getX();            
                        // going backwards: pushing stuff to the right
                        if (downXValue < currentX)
                        {
                            Log.i(TAG, "In onTouch previous");
                            goPrevious();
                        }

                        // going forwards: pushing stuff to the left
                        if (downXValue > currentX)
                        {
                            Log.i(TAG, "In onTouch next");
                            goNext();
                        }
                        break;
                    }
                }
                // if you return false, these actions will not be recorded
                return true;
            }

        });

        viewStepBody = (TextView)findViewById(R.id.step_body);
        stepNumber = (TextView)findViewById(R.id.step_number);
        viewPicture = (ImageView)findViewById(R.id.picture);

        TextView recipeTitle = (TextView)findViewById(R.id.recipe_title);
        try {
            getSupportActionBar().setDisplayShowTitleEnabled(false);
            recipe = (Recipe)getIntent().getSerializableExtra("Recipe1");
            steps = recipe.getSteps();
            stepQuantity = steps.size();

            Log.d(TAG,"steps: " + steps.size());
            if (stepQuantity > 0) {
                Step step = steps.get(0);
                pictures[0] = Constants.URL + step.getImg_url();
                bodyText =  step.getInstruction();
                new DownloadImageTask().execute(pictures);
                recipeTitle.setText(recipe.getTitle());
            }
            updateInfo();
        } catch (Exception e) {
            Toast.makeText(this, "Error occured" + e.getMessage(), 200);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.step_menu, (com.actionbarsherlock.view.Menu) menu);
        return super.onCreateOptionsMenu(menu);
    }

    private void updateInfo() {
        new DownloadImageTask().execute(pictures);
        viewStepBody.setText(bodyText);
        stepNumber.setText(currentStep + "/" + stepQuantity);
    }

    private void goNext() {
        if (currentStep != stepQuantity) {
            caret++;
            currentStep++;
            Step newStep = steps.get(caret);
            pictures[0] = Constants.URL + newStep.getImg_url();
            bodyText = newStep.getInstruction();
            updateInfo();
        } else {
            caret = 0;
            currentStep = 1;
            Step newStep = steps.get(caret);
            bodyText = newStep.getInstruction();
            pictures[0] = Constants.URL + newStep.getImg_url();
            updateInfo();
        }
    }

    private void goPrevious() {
        if (currentStep != 1) {
            caret--;
            currentStep--;
            Step newStep = steps.get(caret);
            bodyText = newStep.getInstruction();
            pictures[0] = Constants.URL + newStep.getImg_url();
            updateInfo();
        }
        else {
            caret = stepQuantity - 1;
            currentStep = stepQuantity;
            Step newStep = steps.get(caret);
            bodyText = newStep.getInstruction();
            pictures[0] = Constants.URL + newStep.getImg_url();
            updateInfo();
        }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId())  {
        case R.id.next: 
            goNext();
            return true;
        case R.id.previous: 
            goPrevious();
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    } 
```

这是传递给 setContentView() 方法的 step_page.xml。

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:id="@+id/step_layout1">
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TextView android:id="@+id/recipe_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="23dp"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:textColor="#9d9d9d"
            android:textStyle="bold"
            android:layout_marginTop="4dp"/>

        <TextView android:id="@+id/step_word"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="25dp"
            android:layout_below="@+id/recipe_title"
            android:textColor="#000000"
            android:textStyle="bold"
            android:text="@string/step_word"
            android:layout_marginTop="4dp"/>

        <TextView android:id="@+id/step_number"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="25dp"
            android:layout_toRightOf="@+id/step_word"
            android:layout_below="@+id/recipe_title"
            android:textColor="#000000"
            android:textStyle="bold"
            android:layout_marginLeft="3dp"
            android:text="1/12"
            android:layout_marginTop="4dp"/>

        <ImageView
            android:id="@+id/picture"
            android:layout_width="300dp"
            android:layout_height="200dp"
            android:layout_below="@+id/step_word"
            android:layout_centerHorizontal="true"
            />

        <TextView android:id="@+id/step_body"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="22dp"
            android:textColor="#000000"
            android:paddingTop="2dp"
            android:layout_below="@+id/picture"
            /> 

    </RelativeLayout>
</ScrollView>
</RelativeLayout> 
```

这里建议的另一种方法不起作用。：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.step_page);
    RelativeLayout view = (RelativeLayout) findViewById(R.id.step_layout1);
    view.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motion) {

            Log.i(TAG, "In onTouch");
            float downXValue = 0;
            // Get the action that was done on this touch event
            switch (motion.getAction())
            {

                case MotionEvent.ACTION_DOWN:
                {
                    Log.i(TAG, "In onTouch1");
                    // store the X value when the user's finger was pressed down
                    downXValue = motion.getX();
                    break;
                }

                case MotionEvent.ACTION_UP:
                {
                    Log.i(TAG, "In onTouch2");
                    // Get the X value when the user released his/her finger
                    float currentX = motion.getX();            
                    // going backwards: pushing stuff to the right
                    if (downXValue < currentX)
                    {
                        Log.i(TAG, "In onTouch previous");
                        goPrevious();
                    }

                    // going forwards: pushing stuff to the left
                    if (downXValue > currentX)
                    {
                        Log.i(TAG, "In onTouch next");
                        goNext();
                    }
                    break;
                }
            }
            // if you return false, these actions will not be recorded
            return true;
        }

    }); 
```

有什么意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:06:48.887

与我认为您的想法相反`RelativeLayout view = new RelativeLayout(this);`，它不会为您的活动布局提供父 RelativeLayout 视图。您可以做的是为您的父 RelativeLayout 分配一个 id，使用 findViewById 获取它，然后将您的 onTouchListener 或其他任何东西附加到它上面。

编辑（因为您发布了 xml 布局）

您的父 RelativeLayout 没有暴露 - 整个屏幕都被 ScrollView 占据，因此它后面的 RelativeLayout 永远无法触摸。由于您的内部 RelativeLayout（ScrollView 中的那个）没有任何可点击的视图，因此您可以在其上附加 onTouch。

# android - 何时使用 ImageButton 而不是 ImageView？

> ID：10718143
> 
> 赞同：8
> 
> 时间：2012-05-23T10:31:08.500
> 
> 标签：android, android-layout

我对`ImageButton`. 我可以制作一个`ImageView`可点击并用作按钮，那么为什么我们明确需要一个`ImageButton`？在设计 Android 应用时，我发现它`ImageView`比. 所以我想知道使用的好处是什么？谢谢。`ImageButton``ImageButton``ImageButton`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T10:35:45.587

这个问题在这里得到了相当彻底的回答：[Difference between a clickable ImageView and ImageButton](https://stackoverflow.com/questions/5847136/difference-between-a-clickable-imageview-and-imagebutton)

总结一下：没有区别，除了默认样式。默认情况下，ImageButton 具有非空背景。

# c - C 联合和多态

> ID：10718150
> 
> 赞同：5
> 
> 时间：2012-05-23T10:31:46.723
> 
> 标签：c, struct, polymorphism, unions

> **可能重复：**
> [如何在 C 中模拟 OO 风格的多态性？](https://stackoverflow.com/questions/524033/how-can-i-simulate-oo-style-polymorphism-in-c)

我正在尝试使用联合在 C 中创建多态性。我执行以下操作。

```
typedef struct{
...
...
} A;

typedef struct{
...
... 
} B;

typedef union{
        A a;
        B b;
}C; 
```

我的问题是：我怎样才能有一个采用 C 类型但也允许 A 和 B 的方法。我希望以下工作：

如果我定义一个函数：

```
myMethod(C){
...
} 
```

然后，我希望这个工作：

```
main(){
A myA;
myMethod(myA);
} 
```

它没有。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T10:51:05.557

GNU 和 IBM 支持`transparent_union`扩展：

```
typedef union __attribute__((transparent_union)) {
        A a;
        B b;
} C; 
```

然后您可以透明地使用`A`s 或`B`s 或s ：`C`

```
A foo1;
B foo2;
C foo3;
myMethod(foo1);
myMethod(foo2);
myMethod(foo3); 
```

请参阅[transparent_union 类型属性（仅限 C）](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/type_attr_transp_union.htm#type_attr_transp_union)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:36:37.660

您必须使用显式类型转换：

```
A myA;
myMethod((C) myA); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:37:00.243

简短的回答是，在 C 中，你不能。

在 C++ 中，您可以重载`myFunction()`并提供多个实现。

在 C 中，您只能有一个`myFunction()`. 即使您可以声明该函数以便它可以采用或（例如 as ） `A`，它也无法知道它提供了三个中的哪一个。`B``C``void*`

# html - 如何在没有间距的情况下进行多个跨度 twitter bootstrap

> ID：10718152
> 
> 赞同：25
> 
> 时间：2012-05-23T10:32:00.110
> 
> 标签：html, css, twitter-bootstrap

我试图在一个页面上获得 3 列，在引导程序中它们之间没有任何间距

这是我得到的：

![跨度失败](../Images/41604df1d6eebd6942ff09fd63b178fc.png)

这就是我想要的：

![跨度赢](../Images/f4e3f13d465c7bf8ef3e3511a23c6b9e.png)

这是我目前正在使用的代码：

```
<div class="row">
    <div class="span4 blue1">
        <h1>span4 (1)</h1>
    </div>
    <div class="span4 blue2">
        <h1>span4 (2)</h1>
   </div>
    <div class="span4 blue3">
        <h1>span4 (3)</h1>
    </div>
</div> 
```

我真的不确定如何使用引导程序来实现我想要的 - 任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T12:40:22.243

您可以创建自己的类来删除`span`网格元素之间的空间，如下所示：

**CSS**

```
.no-space [class*="span"] {
    margin-left: 0;
} 
```

然后你可以将它包含在容器`.row`div 中：

```
<div class="row no-space">
    <div class="span3 blue1">
        <h1>span4 (1)</h1>
    </div>
    <div class="span3 blue2">
        <h1>span4 (2)</h1>
   </div>
    <div class="span3 blue3">
        <h1>span4 (3)</h1>
    </div>
</div> 
```

另请注意，`.row`容器类`20px`在左侧删除以容纳网格元素，因此您可能必须像这样删除它：

```
.no-space {
    margin-left:0;
} 
```

所以到处玩看看有什么用。

演示：http: [//jsfiddle.net/G36uQ/](http://jsfiddle.net/G36uQ/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-24T11:47:18.870

完整的类，用添加 .no-space 覆盖 .row-fluid。

```
/*
 * Bootstrap Grid System without space
 *
 * Overwrite Bootstrap grid system, removing margin
 * Usage : 
 * Simple add no-space class with row-fluid
 * <ul class="row-fluid no-space"> ... </ul>
 */
.row-fluid.no-space [class*="span"] {
  margin-left: 0%;
  *margin-left: -0.06944%;
}
.row-fluid.no-space [class*="span"]:first-child {
  margin-left: 0;
}
.row-fluid.no-space .controls-row [class*="span"] + [class*="span"] {
  margin-left: 0%;
}
.row-fluid.no-space .span12 {
  width: 99.99999999999999%;
  *width: 99.93055555555554%;
}
.row-fluid.no-space .span11 {
  width: 91.66666666666666%;
  *width: 91.59722222222221%;
}
.row-fluid.no-space .span10 {
  width: 83.33333333333331%;
  *width: 83.26388888888887%;
}
.row-fluid.no-space .span9 {
  width: 74.99999999999999%;
  *width: 74.93055555555554%;
}
.row-fluid.no-space .span8 {
  width: 66.66666666666666%;
  *width: 66.59722222222221%;
}
.row-fluid.no-space .span7 {
  width: 58.33333333333333%;
  *width: 58.263888888888886%;
}
.row-fluid.no-space .span6 {
  width: 49.99999999999999%;
  *width: 49.93055555555555%;
}
.row-fluid.no-space .span5 {
  width: 41.66666666666666%;
  *width: 41.597222222222214%;
}
.row-fluid.no-space .span4 {
  width: 33.33333333333333%;
  *width: 33.263888888888886%;
}
.row-fluid.no-space .span3 {
  width: 24.999999999999996%;
  *width: 24.930555555555554%;
}
.row-fluid.no-space .span2 {
  width: 16.666666666666664%;
  *width: 16.59722222222222%;
}
.row-fluid.no-space .span1 {
  width: 8.333333333333332%;
  *width: 8.263888888888888%;
}
.row-fluid.no-space .offset12 {
  margin-left: 99.99999999999999%;
  *margin-left: 99.8611111111111%;
}
.row-fluid.no-space .offset12:first-child {
  margin-left: 99.99999999999999%;
  *margin-left: 99.8611111111111%;
}
.row-fluid.no-space .offset11 {
  margin-left: 91.66666666666666%;
  *margin-left: 91.52777777777777%;
}
.row-fluid.no-space .offset11:first-child {
  margin-left: 91.66666666666666%;
  *margin-left: 91.52777777777777%;
}
.row-fluid.no-space .offset10 {
  margin-left: 83.33333333333331%;
  *margin-left: 83.19444444444443%;
}
.row-fluid.no-space .offset10:first-child {
  margin-left: 83.33333333333331%;
  *margin-left: 83.19444444444443%;
}
.row-fluid.no-space .offset9 {
  margin-left: 74.99999999999999%;
  *margin-left: 74.8611111111111%;
}
.row-fluid.no-space .offset9:first-child {
  margin-left: 74.99999999999999%;
  *margin-left: 74.8611111111111%;
}
.row-fluid.no-space .offset8 {
  margin-left: 66.66666666666666%;
  *margin-left: 66.52777777777777%;
}
.row-fluid.no-space .offset8:first-child {
  margin-left: 66.66666666666666%;
  *margin-left: 66.52777777777777%;
}
.row-fluid.no-space .offset7 {
  margin-left: 58.33333333333333%;
  *margin-left: 58.19444444444444%;
}
.row-fluid.no-space .offset7:first-child {
  margin-left: 58.33333333333333%;
  *margin-left: 58.19444444444444%;
}
.row-fluid.no-space .offset6 {
  margin-left: 49.99999999999999%;
  *margin-left: 49.86111111111111%;
}
.row-fluid.no-space .offset6:first-child {
  margin-left: 49.99999999999999%;
  *margin-left: 49.86111111111111%;
}
.row-fluid.no-space .offset5 {
  margin-left: 41.66666666666666%;
  *margin-left: 41.52777777777777%;
}
.row-fluid.no-space .offset5:first-child {
  margin-left: 41.66666666666666%;
  *margin-left: 41.52777777777777%;
}
.row-fluid.no-space .offset4 {
  margin-left: 33.33333333333333%;
  *margin-left: 33.19444444444444%;
}
.row-fluid.no-space .offset4:first-child {
  margin-left: 33.33333333333333%;
  *margin-left: 33.19444444444444%;
}
.row-fluid.no-space .offset3 {
  margin-left: 24.999999999999996%;
  *margin-left: 24.86111111111111%;
}
.row-fluid.no-space .offset3:first-child {
  margin-left: 24.999999999999996%;
  *margin-left: 24.86111111111111%;
}
.row-fluid.no-space .offset2 {
  margin-left: 16.666666666666664%;
  *margin-left: 16.52777777777778%;
}
.row-fluid.no-space .offset2:first-child {
  margin-left: 16.666666666666664%;
  *margin-left: 16.52777777777778%;
}
.row-fluid.no-space .offset1 {
  margin-left: 8.333333333333332%;
  *margin-left: 8.194444444444443%;
}
.row-fluid.no-space .offset1:first-child {
  margin-left: 8.333333333333332%;
  *margin-left: 8.194444444444443%;
} 
```

**用法**：

```
<ul class="media-list row-fluid no-space">
  <li class="media span4">
    <a class="pull-left" href="#">
      <img class="media-object" data-src="holder.js/64x64">
    </a>
    <div class="media-body">
      <h4 class="media-heading">Media heading</h4>
      ...

      <!-- Nested media object -->
      <div class="media">
        ...
     </div>
    </div>
  </li>
  <li class="media span4">
    <a class="pull-left" href="#">
      <img class="media-object" data-src="holder.js/64x64">
    </a>
    <div class="media-body">
      <h4 class="media-heading">Media heading</h4>
      ...

      <!-- Nested media object -->
      <div class="media">
        ...
     </div>
    </div>
  </li>
  <li class="media span4">
    <a class="pull-left" href="#">
      <img class="media-object" data-src="holder.js/64x64">
    </a>
    <div class="media-body">
      <h4 class="media-heading">Media heading</h4>
      ...

      <!-- Nested media object -->
      <div class="media">
        ...
     </div>
    </div>
  </li>
</ul> 
```

`[**Demo on Bootply**](http://bootply.com/62157)`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-21T17:08:14.593

我补充说：`offset0`正是出于这个原因

```
.row-fluid .offset0 {
    margin-left: 0
}
.row-fluid .span12.offset0 {
  width: 99.99999999999999%;
  *width: 99.93055555555554%;
}
.row-fluid .span11.offset0 {
  width: 91.66666666666666%;
  *width: 91.59722222222221%;
}
.row-fluid .span10.offset0 {
  width: 83.33333333333331%;
  *width: 83.26388888888887%;
}
.row-fluid .span9.offset0 {
  width: 74.99999999999999%;
  *width: 74.93055555555554%;
}
.row-fluid .span8.offset0 {
  width: 66.66666666666666%;
  *width: 66.59722222222221%;
}
.row-fluid .span7.offset0 {
  width: 58.33333333333333%;
  *width: 58.263888888888886%;
}
.row-fluid .span6.offset0 {
  width: 49.99999999999999%;
  *width: 49.93055555555555%;
}
.row-fluid .span5.offset0 {
  width: 41.66666666666666%;
  *width: 41.597222222222214%;
}
.row-fluid .span4.offset0 {
  width: 33.33333333333333%;
  *width: 33.263888888888886%;
}
.row-fluid .span3.offset0 {
  width: 24.999999999999996%;
  *width: 24.930555555555554%;
}
.row-fluid .span2.offset0 {
  width: 16.666666666666664%;
  *width: 16.59722222222222%;
}
.row-fluid .span1.offset0 {
  width: 8.333333333333332%;
  *width: 8.263888888888888%;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-23T11:19:53.960

您看到的列间距是网格系统的意图。

如果您不希望列之间有空格，您应该直接设置这些元素的样式，而不是使用网格布局样式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-27T14:06:14.477

如果您在 bootstrap 中检查 grid.less 文件，则 span* 网格在一个简单的 mixin 中定义：

```
#grid > .core(@gridColumnWidth, @gridGutterWidth); 
```

要构建一个没有空格的 span* 网格，您可以在 less 中使用：

```
.my-nospace-grid {
    #grid > .core(78px, 0px);
} 
```

这将给出 12*78px = 936px。

要选择您的值，请检查 variables.less 中定义的默认大小：

```
// GRID
// --------------------------------------------------

// Default 940px grid
// -------------------------
@gridColumns:             12;
@gridColumnWidth:         60px;
@gridGutterWidth:         20px;
@gridRowWidth:            (@gridColumns * @gridColumnWidth) + (@gridGutterWidth * (@gridColumns - 1));

// 1200px min
@gridColumnWidth1200:     70px;
@gridGutterWidth1200:     30px;
@gridRowWidth1200:        (@gridColumns * @gridColumnWidth1200) + (@gridGutterWidth1200 * (@gridColumns - 1));

// 768px-979px
@gridColumnWidth768:      42px;
@gridGutterWidth768:      20px;
@gridRowWidth768:         (@gridColumns * @gridColumnWidth768) + (@gridGutterWidth768 * (@gridColumns - 1));

// Fluid grid
// -------------------------
@fluidGridColumnWidth:    percentage(@gridColumnWidth/@gridRowWidth);
@fluidGridGutterWidth:    percentage(@gridGutterWidth/@gridRowWidth);

// 1200px min
@fluidGridColumnWidth1200:     percentage(@gridColumnWidth1200/@gridRowWidth1200);
@fluidGridGutterWidth1200:     percentage(@gridGutterWidth1200/@gridRowWidth1200);

// 768px-979px
@fluidGridColumnWidth768:      percentage(@gridColumnWidth768/@gridRowWidth768);
@fluidGridGutterWidth768:      percentage(@gridGutterWidth768/@gridRowWidth768); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-23T11:24:24.127

如果您使用较少的文件来生成引导 css，请在 variables.less 文件中将 @gridGutterWidth 设置为 0。否则，我认为更改 css 文件上的所有边距和填充确实很痛苦。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-17T13:27:58.293

我遇到了和你一样的问题，所以这是我在最新的 Bootstrap 版本 2.3.1 上解决这个问题的方法：

首先，您需要使用类“row”向父 div 添加一个“no-space”类，如下所示：

```
<div class="row-fluid no-space">
  <div class="span3">...</div>
  <div class="span3">...</div>
  <div class="span3">...</div>
  <div class="span3">...</div>
</div> 
```

然后根据您想要在该行中的元素数量修改您的 css，如下所示：

```
.no-space [class*="span"]{
  margin-left: 0 !important;
  width: 25% !important; // This is for 4 elements ONLY in the row
} 
```

宽度的数学公式是：

```
100 / number of elements in the row = width. 
```

就我而言，它是 4 个元素，所以它是：

```
100 / 4 = 25%; 
```

如果是 3 个元素，它将是：

```
100 / 3 = 33.3333333333%; 
```

如果您的项目中有多个案例存在此问题，您可能希望向 css 规则添加唯一的 id 或类，以免影响所有案例。

而已。无需重新下载引导程序并处理源文件
PS：此方法也适用于响应式设计；）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-31T11:38:18.857

```
 <div>
        <div class="container">
        <div class="row">
            <div class="span12">

                <div class="row">
            <div style="background:#000;" class="span6">testcont 1</div>
            <div style="background:#000;" class="span6">testcont 2</div>
            <div style="background:#000;" class="span6">testcont 3</div>
            <div style="background:#000;" class="span6">testcont 4</div>
                </div>
            </div>
            </div>
        </div> 
    </div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-12T17:31:09.053

我有一排有两列。对于三个，相应地调整。我将此添加到我的 .css 中，该 .css 在之后加载并因此覆盖 bootstrap.css。

```
 .no-space { /*apply to the row */
      left-margin:0;
 }

 .row-fluid .span6 {  /* overrides bootstrap.css to allow for no gutter */
   /* width: 48.051948051948045%;
   *width: 48.008658008658%; */

   width: 50%;
   *width: 50%;
 } 
```

html是：

```
 <div class="row-fluid no-space"> <!-- r -->

            <div class="span6">
                <h4 class="titles">xxx</h4>
                <img src="img/system/xxx.png">
            </div> 

            <div class="span6">
                <h4 class="titles">xxx</h4>
                <img src="img/system/xxx.png">
            </div> 

  </div><!--/r--> 
```

现在，我有两列宽度为 50%，中间没有装订线。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-09T12:09:02.540

一般来说，如果您仍然想保留装订线，但只是想缩小或加宽它而不在最右边创建间隙，那么只需确保相关边距和宽度相加为 100%，记住边距是不适用于最左边的跨度。因此，对于您的 3 列布局，如果您想要 0.5% 的装订线，则选择 3*33% + 2*0.5% = 100%

```
.row-fluid .span4 {
    width: 33%;
    margin-left: 0.5%;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-31T15:37:27.797

这是一个带和不带空格的等宽列的示例：http: [//codepen.io/ngeorgiev/pen/Lgxin/](http://codepen.io/ngeorgiev/pen/Lgxin/)

# jquery - jQuery datepicker 多个 onSelect

> ID：10718153
> 
> 赞同：0
> 
> 时间：2012-05-23T10:32:00.777
> 
> 标签：jquery, datepicker

我有两个单独工作的 onSelect 函数，但可以将它们组合起来吗？第一个将 altField 从 DateTime 转换为 TIMESTAMP 格式。第二个限制 UI 中的可选日期。我想我想要每个字段有 2 个 onSelect 函数，但我找不到语法。任何帮助，将不胜感激！

转换为时间戳：

```
$('#start_date').datepicker({
            inline: true,
            altField: 'input[name="event_start_date_min"]',
            altFormat: '@',
            onSelect : function(dateText, inst){
                    var epoch = $.datepicker.formatDate('@', $(this).datepicker('getDate')) / 1000;
                    $('input[name="event_start_date_min"]').val(epoch);
            }
        });
        $('#end_date').datepicker({
            inline: true,
            altField: 'input[name="event_start_date_max"]',
            altFormat: '@',
            onSelect : function(dateText, inst){
                    var epoch = ($.datepicker.formatDate('@', $(this).datepicker('getDate')) / 1000)+(60*60*24);
                    $('input[name="event_start_date_max"]').val(epoch);
            }
        }); 
```

限制日期：

```
$(document).ready(function(){
                $("#start_date").datepicker({
                    minDate: 0,
                    onSelect: function(selected) {
                      $("#end_date").datepicker("option","minDate", selected)
                    }
                });
                $("#end_date").datepicker({ 
                    minDate: 0,
                    onSelect: function(selected) {
                       $("#start_date").datepicker("option","maxDate", selected)
                    }
                });  
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:12:32.140

您是否尝试过将它们结合起来？

```
$(document).ready(function(){

    $("#start_date").datepicker({
        minDate: 0,
        onSelect: function(dateText, inst) {
            $("#end_date").datepicker("option","minDate", dateText)

            var epoch = $.datepicker.formatDate('@', $(this).datepicker('getDate')) / 1000;
            $('input[name="event_start_date_min"]').val(epoch);
        }
    });

    $("#end_date").datepicker({ 
        minDate: 0,
        onSelect: function(dateText, inst) {
            $("#start_date").datepicker("option","maxDate", dateText)

            var epoch = ($.datepicker.formatDate('@', $(this).datepicker('getDate')) / 1000)+(60*60*24);
            $('input[name="event_start_date_max"]').val(epoch);
        }
    });  
}); 
```

# c# - 如何访问动态类型的字段？

> ID：10718154
> 
> 赞同：0
> 
> 时间：2012-05-23T10:32:01.560
> 
> 标签：c#, linq, dynamic

我正在尝试使用从LINQ 检索到`QueryResultViewModel`的对象列表中调用的类来包装查询的结果。`dynamic`它们包含一个名为 的整数字段`Worked`。我不应该使用非动态类型，因为根据查询它还有其他字段。我试过了：

```
 var query = new HoursQuery( .. parameters .. );
    this.Result = new ObservableCollection<QueryResultViewModel>(
      query.Execute().Select( x => new QueryResultViewModel( x.Worked ))); 
```

但我得到“'object'不包含'Worked'的定义”，我不知道是否可以在不更改查询返回类型的情况下修复它。

执行代码也可能有用：

```
 var res = some_list.GroupBy(a => new { a.Employee, a.RelatedTask, a.Start.Month })
       .Select(g => new { K = g.Key, Worked = g.Sum(s => s.Duration.TotalHours) }); 
```

**编辑**：这很好用，但可能不是很优雅。

```
 public class HQueryDTO
    {
        public double Worked;
        public object K;
    }

    public IEnumerable<dynamic> Execute()
    {
        var list = base.Execute();
        return res = list.GroupBy(a => new { a.Employee, a.RelatedTask } )
          .Select(g => new HQueryDTO { K = g.Key, Worked = g.Sum(s => s.Duration.TotalHours) });
    } 
```

现在结果有一个类型，它可以返回动态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:40:15.050

我*假设*您在编译时收到该错误，在这种情况下只需`dynamic`通过强制转换引入：

```
.Select(x => new QueryResultViewModel( ((dynamic)x).Worked )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:44:20.850

I assume that the signature of `Execute` is something like `object Execute()`. If you return `dynamic`, it should work.

# c# - 最近的活动 Webpart sharepoint 2010？

> ID：10718158
> 
> 赞同：3
> 
> 时间：2012-05-23T10:32:23.367
> 
> 标签：c#, sharepoint, sharepoint-2010, web-parts

我需要在 sharepoint 2010 中创建最近的活动 webpart，

Webpart 应显示特定图书馆最近几天的活动。

您对如何处理有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:27:17.653

您首先需要打开审核日志记录，然后在日志中搜索针对该位置的活动。在那里，您将看到所有签入、签出、打开和上传、编辑等。

# java - 如何使用 CDI 进行方法参数注入？

> ID：10718162
> 
> 赞同：23
> 
> 时间：2012-05-23T10:32:37.530
> 
> 标签：java, dependency-injection, cdi, jboss-weld

是否可以使用 CDI 将参数注入方法调用？预期的行为将类似于场注入。查找首选生产商并使用产品。

我想做的是：

```
public void foo(@Inject Bar bar){
  //do stuff
} 
```

或者这个（使用较少混淆的语法）：

```
public void foo(){
  @Inject 
  Bar bar;
  //do stuff
} 
```

这种语法在这两种情况下都是非法的。有替代方案吗？如果不是 - 如果可能的话，出于某种原因，这会是一个坏主意吗？

谢谢

**编辑**——我的要求可能不够清楚——我希望能够直接调用该方法，将`bar`变量的初始化留给容器。Jörn Horstmann 和 Perception 的回答表明这是不可能的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-23T11:32:42.807

当容器实例化 bean 时，会为 bean 处理注入点，这确实限制了方法级注入的用例数量。当前版本的规范承认以下类型的方法注入：

*初始化方法注入*

```
public class MyBean {
    private Processor processor;

    @Inject
    public void setProcessor(final Processor processor) {
        this.processor = processor;
    }
} 
```

当一个实例`MyBean`被注入时，处理器实例也将被注入，通过它的setter方法。

*事件观察者方法*

```
public class MyEventHandler {
    public void processSomeEvent(@Observes final SomeEvent event) {
    }
} 
```

事件实例被直接注入到事件处理方法中（虽然，不是使用@Inject 注解）

*生产者方法*

```
public class ProcessorFactory {
    @Produces public Processor getProcessor(@Inject final Gateway gateway) {
        // ...
    }
} 
```

生产者方法的参数会自动注入。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-01T04:13:51.640

如果您真正想要的不是方法的参数（应该由调用者提供），而是每次调用方法时正确初始化的 CDI bean 实例，并且完全构造和注入，然后检查

`javax.inject.Provider<T>`

基本上，首先为类注入一个提供者

```
@Inject Provider<YourBean> yourBeanProvider; 
```

然后，在方法中，获取一个新的实例

```
YourBean bean = yourBeanProvider.get(); 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-17T17:41:07.120

当我最初对这个主题进行搜索时出现了这个问题，从那以后我了解到随着 CDI 1.1（包含在 JavaEE 7 规范中）的发布，现在有一种方法可以部分地执行 OP 想要的操作。你还是做不到

```
public void foo(@Inject Bar bar){
   //do stuff
} 
```

但是您可以“注入”一个局部变量，尽管您不使用`@Inject`而是以编程方式查找注入的实例，如下所示：

```
public void foo() {
    Instance<Bar> instance = CDI.current().select(Bar.class);
    Bar bar = instance.get();
    CDI.current().destroy(instance);
    // do stuff with bar here
} 
```

请注意，该`select()`方法可选地采用您可能需要提供的任何限定符注释。祝你好运获得`java.lang.annotation.Annotation`虽然的实例。遍历您的`Instance<Bar>`内容以找到您想要的可能会更容易。

我被告知您需要`Instance<Bar>`像我上面所做的那样销毁它，并且可以根据经验验证上述代码是否有效；但是，我不能发誓你*需要*摧毁它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-23T11:19:57.203

CDI 的该功能称为“初始化方法”。语法与您的代码不同，因为整个方法都用 进行`@Inject`了注释，方法参数可以通过限定符进一步注释以选择特定的 bean。[JSR 299](http://www.jcp.org/en/jsr/detail?id=299)的第 3.9 节显示了以下示例，它`@Selected`是一个限定符，如果只有一个 bean 实现，则可以省略该限定符。

```
@Inject
void setProduct(@Selected Product product) {
    this.product = product;
} 
```

请注意

> 应用程序可以直接调用初始化方法，但容器不会向该方法传递任何参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T22:08:29.387

您可以在您的方法中使用 BeanManager API 来获取上下文引用，或者根据您的最终目标，您可以注入一个

```
Instance<Bar> 
```

在方法之外并在方法中使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-08T13:56:41.353

如果您的目标是通过反射调用该方法，则可`InjectionPoint`以为每个参数创建一个。

以下是使用 CDI-SE 的示例：

```
import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;
import javax.enterprise.context.ApplicationScoped;
import javax.enterprise.context.Dependent;
import javax.enterprise.context.spi.CreationalContext;
import javax.enterprise.inject.se.SeContainer;
import javax.enterprise.inject.se.SeContainerInitializer;
import javax.enterprise.inject.spi.AnnotatedMethod;
import javax.enterprise.inject.spi.AnnotatedType;
import javax.enterprise.inject.spi.BeanManager;

public class ParameterInjectionExample {

    public static class Foo {

        // this method will be called by reflection, all parameters will be resolved from the BeanManager
        // calling this method will require 2 different Bar instances (which will be destroyed at the end of the invocation)
        public void doSomething(Bar bar, Baz baz, Bar bar2) {
            System.out.println("got " + bar);
            System.out.println("got " + baz);
            System.out.println("got " + bar2);
        }
    }

    @Dependent
    public static class Bar {

        @PostConstruct
        public void postConstruct() {
            System.out.println("created " + this);
        }

        @PreDestroy
        public void preDestroy() {
            System.out.println("destroyed " + this);
        }
    }

    @ApplicationScoped
    public static class Baz {

        @PostConstruct
        public void postConstruct() {
            System.out.println("created " + this);
        }

        @PreDestroy
        public void preDestroy() {
            System.out.println("destroyed " + this);
        }
    }

    public static Object call(Object target, String methodName, BeanManager beanManager) throws Exception {
        AnnotatedType<?> annotatedType = beanManager.createAnnotatedType(target.getClass());
        AnnotatedMethod<?> annotatedMethod = annotatedType.getMethods().stream()
                .filter(m -> m.getJavaMember().getName().equals(methodName))
                .findFirst() // we assume their is only one method with that name (no overloading)
                .orElseThrow(NoSuchMethodException::new);
        // this creationalContext will be valid for the duration of the method call (to prevent memory leaks for @Dependent beans)
        CreationalContext<?> creationalContext = beanManager.createCreationalContext(null);
        try {
            Object[] args = annotatedMethod.getParameters().stream()
                    .map(beanManager::createInjectionPoint)
                    .map(ip -> beanManager.getInjectableReference(ip, creationalContext))
                    .toArray();
            return annotatedMethod.getJavaMember().invoke(target, args);
        } finally {
            creationalContext.release();
        }
    }

    public static void main(String[] args) throws Exception {
        try (SeContainer container = SeContainerInitializer.newInstance().disableDiscovery().addBeanClasses(Bar.class, Baz.class).initialize()) {
            System.out.println("beanManager initialized");
            call(new Foo(), "doSomething", container.getBeanManager());
            System.out.println("closing beanManager");
        }
    }
} 
```

# android - 试图从 android 中的 jar 文件调用活动 - ClassNotFoundException

> ID：10718165
> 
> 赞同：1
> 
> 时间：2012-05-23T10:32:52.390
> 
> 标签：android, android-intent, jar

我有一个带有活动和一切的 Android 应用程序。但是，我正在尝试将其变成库并在另一个应用程序中使用它。APP编译成JAR文件就好了。

但是，当我从 jar 文件中调用活动时，它会立即因 ClassNotFound 异常而失败。

这就是我所说的意图：

```
 Intent dialerIntent = new Intent(this, SipHome.class);
    startActivity(dialerIntent); 
```

这里 SipHome.class 是在库 jar 文件中定义的。

我得到的错误是：

```
05-23 17:23:36.081: E/AndroidRuntime(21634): java.lang.RuntimeException: Unable to get provider com.thaifi.remote.db.DBProvider: java.lang.ClassNotFoundException: com.thaifi.remote.db.DBProvider in loader dalvik.system.PathClassLoader[/data/app/com.thaifi.remote-2.apk] 
```

知道可能是什么问题吗？

这是 jar 文件的 manifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.csipsimple"
    android:versionCode="1485"
    android:versionName="0.04-00" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:11:58.320

我发现这很简单。

只需在清单中声明活动（即使该活动的类在另一个 jar 文件中）并像调用任何其他活动一样调用它。

# jquery - 代码在控制台中工作，但不在头脑中

> ID：10718170
> 
> 赞同：0
> 
> 时间：2012-05-23T10:33:02.653
> 
> 标签：jquery

当我在 Google Chrome 控制台中输入此脚本时...

```
<script>
    $(document).ready(function() {  
        $("div").hover(
            function() { $("> span", this).show(); },
            function() { $("> span", this).hide(); 
        });
    });
</script> 
```

...它有效，没有问题。

当我在它之间添加`<head></head>`它不起作用。

谁能告诉我为什么？

**更新**

```
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
     <script type="text/javascript" lang="javascript">
    $(document).ready(function()
{
    $('div').hover(function()
    {
        $('> span', this).show();
    }, function()
    {
        $('> span', this).hide();
    });
});
    </script>
    <script type="text/javascript" lang="javascript">

    $.getJSON("http://twitter.com/statuses/user_timeline/username.json?callback=?&count=5", function(data) {

  $.each(data, function(index, value) { 
 $('.tweets').append('<div id='+data[index].id+'>'+data[index].text+'&nbsp<span style="display:none"class="hideTweeterIcons"><a href="https://twitter.com/intent/tweet?in_reply_to='+data[index].id+'"><img src="//si0.twimg.com/images/dev/cms/intents/icons/reply.png"></a><a href="https://twitter.com/intent/retweet?tweet_id='+data[index].id+'"><img src="//si0.twimg.com/images/dev/cms/intents/icons/retweet.png"></a><a href="https://twitter.com/intent/favorite?tweet_id='+data[index].id+'"><img src="https://si0.twimg.com/images/dev/cms/intents/icons/favorite.png"></a></span></div><hr>');

});     
});

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:35:44.487

您提供的代码使用的是[jQuery 库](http://jquery.com/)，请确保在使用 jQuery`$`函数之前包含对库的引用。此外，尝试`type`在脚本标签上指定 ，如下所示：

```
<script type="text/javascript">
    ...
</script> 
```

## 更新

修改代码后，我注意到`hover`功能设置不正确，试试这个：

```
$(document).ready(function()
{
    $('div').hover(function()
    {
        $('> span', this).show();
    }, function()
    {
        $('> span', this).hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:35:52.357

您需要确保 jQuery 代码在您添加到 jQuery 库之后。如果您使用的是 HTML5 样板，则会出现在页面底部。

# c++ - 使用自指针为类数据成员赋值时的差异

> ID：10718174
> 
> 赞同：0
> 
> 时间：2012-05-23T10:33:12.977
> 
> 标签：c++, oop, class, pointers

假设我有一个像这样的类：

```
Class MyClass 
{ 
  int myVar1;
  int myVar2;

  void myMethod(); 
} 
```

下面的两个赋值有什么不同吗？

```
void MyClass::myMethod()
{
   //VARIABLE ASSIGNMENT
   myVar1 = 99;

   //USING POINTER TO CLASS
   this->myVar2 = 99;
} 
```

有什么用

> 这->

变量赋值中的指针（除了其他情况，例如通过函数传递类等）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:35:31.577

这是同一件事，除非您碰巧在范围内有两个同名的变量。在这种情况下，您可以使用 this-> 进行区分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T10:36:30.370

在以下情况下会有所不同：

```
void MyClass::myMethod(int myVar1)
{
   myVar1 = 99; //doesn't change the member

   this->myVar1 = 99; //changes the member
} 
```

在你的情况下，没有区别。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T10:35:23.247

没有区别。有时使用`this->`帮助消除歧义，但不是在这里。

# django - 如何按两个字段的总数对 django 查询集进行排序？

> ID：10718180
> 
> 赞同：3
> 
> 时间：2012-05-23T10:33:37.350
> 
> 标签：django, django-models, django-orm

我想注释一个对象列表（每个对象都有一组`tags`和一个整数值`points`），以便它们可以按标签总数加上点数进行排序。

但是，我找不到任何方法来用两列的总和来注释对象。关于我应该如何做到这一点的任何想法？

这些是我正在使用的模型，其中的`leaderboard()`功能是我难以工作的模型。

```
class Game (models.Model):
    users = models.ManyToManyField(User, through='Player', related_name='games')

    def leaderboard (self):
        """ Return a list of players ranked by score, where score is the total of the count of the players tags and their points. """
        leaderboard = self.player_set.annotate(
            tagcount=models.Count('tags')
        ).extra(
            select={'score': 'tagcount + points'},
            order_by=('score',)
        )
        return leaderboard

class Player (models.Model):
    game = models.ForeignKey(Game)
    user = models.ForeignKey(User)
    points = models.SmallIntegerField(default=0, help_text="Points that have been awarded to the player")

class Tag (models.Model):
    game = models.ForeignKey(Game, related_name='tags')
    player = ForeignKey(Player, related_name='tags') 
```

**编辑2：**使用额外的解决方案

好的，所以我有额外的工作，通过手动计算标签的数量并将其添加到点上。

```
def leaderboard (self):
    """ Return a list of players ranked by score, where score is the total of the count of the players tags and their points. """
    return self.players.extra(
        select={'score': '(select count(*) from kaos_tag where kaos_tag.tagger_id=kaos_player.id) + points'},
        order_by=('-score',)
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:50:27.370

使用额外的

*   姜戈 | 查询集 API 参考 | Django 文档-> [https://docs.djangoproject.com/en/1.3/ref/models/querysets/#extra](https://docs.djangoproject.com/en/1.3/ref/models/querysets/#extra)

> ```
> players.objects.extra(
>     select={'fieldsum':'tags__count + points'},
>     order_by=('fieldsum',)
> ) 
> ```

# android - 即使没有更改联系人，也会调用内容观察者

> ID：10718181
> 
> 赞同：4
> 
> 时间：2012-05-23T10:33:37.787
> 
> 标签：android, contentobserver

我面临一个奇怪的问题，我正在使用`ContentObserver`来捕获联系人中的更改，但问题是`onchange()`即使我没有进行任何更改，也会调用该方法。这是我的代码：

```
getContentResolver().registerContentObserver(ContactsContract.Contacts.CONTENT_URI, true, new MyCOntentObserver());

public class MyCOntentObserver extends ContentObserver{
        public MyCOntentObserver() {
            super(null);
        }
        @Override
        public void onChange(boolean selfChange) {
        super.onChange(selfChange);
            Log.e("","~~~~~~"+selfChange);
        }  

        @Override
        public boolean deliverSelfNotifications() {
            Log.e("","~~~~~~ Change");
            return true;
        }
    } 
```

任何人都可以帮忙吗？
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:35:48.593

该`registerContentObserver`方法接受一个布尔`notifyForDescendents`变量，您将其设置为 true。也许将其设置为false？

否则，可能某些后台任务会干扰您的观察者。:)

# javascript - 录制html5音频

> ID：10718183
> 
> 赞同：9
> 
> 时间：2012-05-23T10:33:40.360
> 
> 标签：javascript, html5-audio

是否可以用 html5 录制声音？我已经下载了最新的金丝雀版本的 chrome 并使用以下代码：

navigator.getUserMedia = navigator.webkitGetUserMedia || navigator.getUserMedia; navigator.getUserMedia({audio: true}, gotAudio, noStream);

然后，这会提示用户允许录音，如果您说“是”，则会出现一条消息，说明 chrome 正在录音。但是，是否可以使用其中的原始数据访问音频缓冲区？我似乎无法找出方法。有一些尚未实施的建议规范有没有人知道它现在是否可以在任何浏览器上完成，并提供说明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T18:34:25.270

Webkit 和 Chrome 音频 API 支持录音，但是随着 API 的发展，维护使用它们的代码将变得很困难。

一个名为 Sink.js 的活跃开源项目允许录制并允许您推送原始样本：[https](https://github.com/jussi-kalliokoski/sink.js/) ://github.com/jussi-kalliokoski/sink.js/ 。由于该项目非常活跃，因此他们能够随时掌握 Webkit 和 Chrome 的变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:30:16.537

在这里您可以找到我的示例，但它（部分）不起作用。因为 AUDIO 录制尚未实现到 chrome。这就是为什么您会收到 404 错误，即找不到 BLOB。

下面还有一个表格，因为我的目标是将该 BLOB 发送到 php 文件，但由于不工作，我无法尝试。保存起来，以后可以用。

```
<audio></audio>
<input onclick="startRecording()" type="button" value="start recording" />
<input onclick="stopRecording()" type="button" value="stop recording and play" />
<div></div>
<!--
<form enctype="multipart/form-data">
<input name="file" type="file" />
<input type="button" value="Upload" />
</form>
-->

<script>
  var onFailed = function(e) {
    console.log('sorry :(', e);
  };

window.URL = window.URL || window.webkitURL;
navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia ||
                          navigator.mozGetUserMedia || navigator.msGetUserMedia || 
var localStream

var audio = document.querySelector('audio');
var stop = document.getElementById('stop');

    function startRecording(){
        if (navigator.getUserMedia) {
          navigator.getUserMedia({audio: true, video: false, toString : function() {return "video,audio";}}, function(stream) {
            audio.src = window.URL.createObjectURL(stream);
        document.getElementsByTagName('div')[0].innerHTML = audio.src;
            localStream = stream;
          }, onFailed);
        } else {
            alert('Unsupported');
          //audio.src = 'someaudio.ogg'; // fallback.
        }
    }

    function stopRecording(){
        localStream.stop();
        audio.play();
    }

    function sendAudio(){

    }
</script> 
```

注意：Firefox 的一些信息和操作方法：[https ://hacks.mozilla.org/2012/07/getusermedia-is-ready-to-roll/](https://hacks.mozilla.org/2012/07/getusermedia-is-ready-to-roll/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T09:35:19.723

现在可以使用音频上下文 API 和 getChannelData() 访问音频缓冲区。

这是 gitHub 上的一个项目，它直接以 MP3 格式录制音频并将其保存在网络服务器上：[https ://github.com/nusofthq/Recordmp3js](https://github.com/nusofthq/Recordmp3js)

在 recorder.js 中，您将看到音频缓冲区是如何通过通道单独访问的，如下所示：

```
this.node.onaudioprocess = function(e){
      if (!recording) return;
      worker.postMessage({
        command: 'record',
        buffer: [
          e.inputBuffer.getChannelData(0),
          //e.inputBuffer.getChannelData(1)
        ]
      });
    } 
```

有关实现的更详细说明，您可以阅读以下博文：http: [//nusofthq.com/blog/recording-mp3-using-only-html5-and-javascript-recordmp3-js/](http://nusofthq.com/blog/recording-mp3-using-only-html5-and-javascript-recordmp3-js/)

# ajax - 导航到primefaces中数据表的rowselect的另一个页面

> ID：10718192
> 
> 赞同：4
> 
> 时间：2012-05-23T10:34:30.250
> 
> 标签：ajax, jsf-2, primefaces, liferay-6

我有一个 primefaces 数据表，其中显示了记录数。

`I want navigate to another page on the rowSelect event (to edit the selected entity for example)`.

我能找到的最接近的示例/演示是使用 p:ajax 标记将 rowSelect 事件绑定到侦听器方法 [http://www.primefaces.org/showcase-labs/ui/datatableRowSelectionInstant.jsf](http://www.primefaces.org/showcase-labs/ui/datatableRowSelectionInstant.jsf)

我也得到了一篇相同的文章 [http://forum.primefaces.org/viewtopic.php?f=3&t=14664](http://forum.primefaces.org/viewtopic.php?f=3&t=14664)

，我尝试与他们一样实施。但它也没有奏效。

我正在尝试以这种方式指导我如果我错过了什么。

> ```
>  <p:dataTable var="product" value="#{addPatientBB.patientAddList}" paginator="true" rows="10" 
>              selection="#{addPatientBB.pat}" selectionMode="single"> 
> 
>     <p:ajax event="rowSelect" listener="#{addPatientBB.onRowSelect}" />  
> 
>         <p:column>  
>             <f:facet name="header">  
>                 <h:outputText value="FirstName" />  
>             </f:facet>  
>             <h:outputText value="#{product.firstName}" />  
>         </p:column>  
> 
>           <p:column>  
> 
>             <f:facet name="header">  
>                 <h:outputText value="Email" />  
>             </f:facet>  
>           <h:outputText value="#{product.email}" />    
> 
>            </p:column>  
> 
>         <p:column>  
>             <f:facet name="header">  
>                 <h:outputText value="Gender" />  
>             </f:facet>  
>           <h:outputText value="#{product.gender}" />    
> 
>            </p:column> 
> 
>      </p:dataTable> 
> ```

支持 bean 是：

```
@ManagedBean
@ViewScoped
public class AddPatientBB implements Serializable
{
    private Patient pat;

    public Patient getPat()
    {
    System.out.println("tried to get pat");
    return pat;
    }

    public void setPat(Patient pat)
    {
    this.pat = pat;
    System.out.println("tried to set pat");
    }

    public void onRowSelect()
    {
    System.out.println("inside onRow select  Method");
    ConfigurableNavigationHandler configurableNavigationHandler = (ConfigurableNavigationHandler) FacesContext.getCurrentInstance().getApplication().getNavigationHandler();

    System.out.println("navigation objt created");

    configurableNavigationHandler.performNavigation("Page?faces-redirect=true");

    // Page is my navigation page where I wish to navigate named as
    // "Page.xhtml"

    System.out.println("Navigation executed");

    }

} 
```

那么如何在 rowselect 事件中导航到另一个页面呢？以及如何在导航表单后显示其值。

我能够进入 onRowSelect() 方法，实际上问题是他无法获得或理解该路径：

> 可配置的NavigationHandler.performNavigation("Page?faces-redirect=true");

因此他无法在此行之后打印任何日志。为什么会这样？是因为我在使用 Liferay 吗？

解放军指导我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T07:38:04.387

好吧，我认为 onRowSelect 永远不会执行，因为您定义错误。

尝试这个：

```
public void onRowSelect(SelectEvent event)
{

  FacesContext.getCurrentInstance().getExternalContext().redirect("page.xhtml?id=" +pat.getId());

} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-08T07:24:31.450

如果您使用 FacesServlet，则使用 .jsf 而不是 .xhtml

```
public void onRowSelect(SelectEvent event)
{
  FacesContext.getCurrentInstance().getExternalContext().redirect("page.jsf?id="+pat.getId());
} 
```

# java - 使用带有花括号“{”的 split() 时出错

> ID：10718195
> 
> 赞同：5
> 
> 时间：2012-05-23T10:34:54.073
> 
> 标签：java, android, regex, split

使用`split()`大**括号时出现问题**

```
 String[] values = str_bj.split("{"); 
```

我需要拆分字符串，**`{`**但它在运行时会引发错误......

错误：：

```
05-23 16:01:30.232: ERROR/AndroidRuntime(6802): FATAL EXCEPTION: main
05-23 16:01:30.232: ERROR/AndroidRuntime(6802): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.obj/com.obj.ObjectDemoActivity}: java.util.regex.PatternSyntaxException: Syntax error U_REGEX_BAD_INTERVAL near index 2:
05-23 16:01:30.232: ERROR/AndroidRuntime(6802): /{
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):   ^
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at android.os.Looper.loop(Looper.java:123)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at java.lang.reflect.Method.invokeNative(Native Method)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at java.lang.reflect.Method.invoke(Method.java:521)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at dalvik.system.NativeStart.main(Native Method)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802): Caused by: java.util.regex.PatternSyntaxException: Syntax error U_REGEX_BAD_INTERVAL near index 2:
05-23 16:01:30.232: ERROR/AndroidRuntime(6802): /{
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):   ^
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at com.ibm.icu4jni.regex.NativeRegEx.open(Native Method)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at java.util.regex.Pattern.compileImpl(Pattern.java:383)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at java.util.regex.Pattern.<init>(Pattern.java:341)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at java.util.regex.Pattern.compile(Pattern.java:358)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at java.lang.String.split(String.java:2044)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at com.obj.ObjectDemoActivity.onCreate(ObjectDemoActivity.java:21)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-23 16:01:30.232: ERROR/AndroidRuntime(6802):     ... 11 more 
```

它似乎可以与其他角色一起使用，但不是`{`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-23T10:38:39.393

`{`用于表示正则表达式中的间隔，您需要对其进行转义，因为`String.split`确实使用正则表达式。

使用`str_bj.split("\\{");`或`str_bj.split("[{]");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:55:56.773

试试这个。示例。

```
String str = "YourString{YourString{YourString";
String[] temp;
String delimiter = "\\{";
SepString= str.split(delimiter);
  /* print test */
for(int i =0; i < SepString.length ; i++)
System.out.println(SepString[i]); 
```

# java - 设置可见（假）；从 JFrame 内部

> ID：10718198
> 
> 赞同：0
> 
> 时间：2012-05-23T10:35:09.963
> 
> 标签：java, swing, jframe

我找不到任何直截了当的答案来回答我的问题，希望你们可以！

我在“aClass”中创建了一个名为“aclass”的类，它是一个包含一堆 if 语句的操作处理程序，用于根据数据库检查输入的值。

我想做的是通过在 if 语句之一中使用 theFrame.setVIsible(false) 来隐藏在“aClass”中创建的 JFrame 'theFrame'，但是它不会让我，'theFrame' 似乎不在范围，我的 IDE 不会让我这样做。

当前版本的代码（请参阅下面的“这将不起作用”）：

```
public class aClass{
static JTextField USER_NAME;
static JPasswordField PASSWORD;
static JButton submit;

private static class Handler implements ActionListener {
    @Override

    public void actionPerformed(ActionEvent e) {
        String USER_NAME_I = USER_NAME.getText();   
        String PASSWORD_I = PASSWORD.getText();   

        try {
           Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(aClass.class.getName()).log(Level.SEVERE, null, ex);
        }
        try {
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/fake",
             /*DB USER_NAME*/       "fakeuname", 
             /*DB password*/       "fakepassword");              

            Statement st = con.createStatement();
            String FindQuery = "SELECT acc_pass FROM users where acc_name='"+USER_NAME_I+"'";      

            //System.out.println(FindQuery);                        

            ResultSet rs = st.executeQuery(FindQuery);              

            if(rs.next())                                           
            {
                String PASSWORD_DB = rs.getString(1);                   

                if(PASSWORD_DB.equals(PASSWORD_I))                         
                {   
                    //THIS WILL NOT WORK
                    loginFrame.setVisible(false);

                    //do something       
                }

                else                                                
                {
                    JOptionPane.showMessageDialog(null,
                            "Wrong Password",
                            "Error",1);
                }//end else

           }//end if (rs.next())
            else                                                    
            {
                JOptionPane.showMessageDialog(null,
                        "Wrong Username",
                        "Error",1);
            }//end else

        } catch (SQLException ex) 
        {
            Logger.getLogger(aClass.class.getName()).log(Level.SEVERE, null, ex);
        }//end catch (SQLException ex)
    }//end ActionEvent
}//end ActionListener

aClass(){                                                   

    JFrame loginFrame = new JFrame("Logon");                        
    loginFrame.setVisible(true);                                    
    loginFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);   

    USER_NAME = new JTextField(10);                                     
    PASSWORD = new JPasswordField(10);                                 
    loginFrame.setLayout(new GridLayout(0,1));

    JPanel loginPanel = new JPanel();                               
    loginFrame.add(loginPanel);

    loginPanel.add(new JLabel("User Name: "));                       
    loginPanel.add(USER_NAME);                                          
    loginPanel.add(new JLabel("Password: "));                      
    loginPanel.add(PASSWORD);                                         

    submit = new JButton("Submit");                                 
    loginPanel.add(submit);                                         
    submit.addActionListener(new Handler());                        

 }//end aClass

public static void main(String args[])
{
    new aClass();                           
}//end main
}//end class 
```

编辑：我对这个主题的了解有限，上面的代码是我找到的在线教程的编辑版本。我会摆弄一些，看看我是否可以让它与 JOptionPane 一起工作，如果我需要任何帮助，请再次编辑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:47:49.910

如何使用`loginFrame`变量 from `aClass()`into `actionPerformed`？

是的，我建议同样的事情，不要在这里使用框架，去`JDialog`或者`JOptionPane`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:56:19.647

actionPerformed() 方法不知道 loginFrame 的存在，因为 loginFrame 的范围是构造函数的本地范围。因此，要么将 loginFrame 的声明移出构造函数（即作为成员变量，如提交 JButton），要么将其传递给 Handler。传递给 Handle 的一种方法是在 Handler 类中有一个构造函数，该构造函数采用 JFrame。

# svn - 在 zend 框架上为 web 应用程序开发新界面的理想方式，同时保留原始界面？

> ID：10718200
> 
> 赞同：0
> 
> 时间：2012-05-23T10:35:13.363
> 
> 标签：svn, zend-framework, web-applications, user-interface

我有一个使用 Zend Framework 构建的 Web 应用程序，我想开始使用新界面。界面工作主要是 CSS 和一些 jQuery。可以说我的项目文件夹是`/var/www/application`

我目前没有使用 SVN，但我想为我的新接口文件设置一个存储库。我之前安装过 trac 并且我熟悉 SVN 基础知识。我只想将 SVN 用于这个新界面 CSS 工作只是为了掌握 SVN。

有没有办法可以使用我当前的 zend 框架项目，同时在一个新的界面上工作，如果可以的话怎么办？

如果不是，我是否应该将生产服务器的副本同步到开发服务器并开始替换所有 CSS、jQuery 和其他任何内容，然后在设计工作完成后将其同步回生产服务器？

或者我是否将我`/var/www/application`的存储库主干，将其分支用于我的 CSS 工作，然后提交，这似乎是正确的方式，但我还是 SVN 的新手，并且在做一些我无法撤消的事情之前只将它用于次要工作.

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:13:10.963

为了进行新设计，您实际上不必涉及版本控制。话虽如此，我认为在任何项目中使用版本控制总是一件好事。当我们这样做时，我建议您尝试 Git（推荐）或至少 Mercurial。

如果您的应用程序设置为使用模块，只需将当前模块复制到新模块并修改新模块的视图脚本以使用更新的 css/javascript。

使用框架中的助手和其他工具有更简洁的方法；然而，这是最务实和容易理解的方式（虽然有点笨拙）。

# mysql - 从字段“day”相同的表中获取记录

> ID：10718207
> 
> 赞同：0
> 
> 时间：2012-05-23T10:35:22.780
> 
> 标签：mysql

我有一张名为 itinerary 的表，其中列出了港口、到达和离开等

日期字段表示行程 1、2、3 等的日期

桌子是这样的

id, day, order, port, port_id, 类型, 到达, 离开, Cruise_id

我想选择在给定日期 Cruise_id 有多个停靠点的每条记录，以便我可以更新订单字段，以便当天的停靠点以正确的顺序列出......

例如

Cruise_id 25 有两个第 3 天的行程记录

我只想选择这些记录，然后我可以进行更新查询，但我很难正确选择它们

我想我完全偏离了轨道......

```
 SELECT * , COUNT( DAY ) FROM itinerary GROUP BY cruise_id LIMIT 0 , 30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:38:58.627

使用 a`HAVING`和 a`GROUP BY`这应该没问题：

```
SELECT *, COUNT(id) AS c
FROM itinerary
GROUP BY cruise_id, day
HAVING c > 1 
```

# css - 伪元素后编写的 CSS 不起作用

> ID：10718209
> 
> 赞同：2
> 
> 时间：2012-05-23T10:35:25.553
> 
> 标签：css, pseudo-element

我正在开发 Ruby-on-Rails 3.2.1。我遵循 DOM 结构。

**更新：**删除了[Gaby](https://stackoverflow.com/users/128165/gaby-aka-g-petrioli)`</img>`提到的标签。问题仍然存在。

```
<div class="frame">
        <img src='SOME_PATH' class="frame-image">
</div>​ 
```

并遵循 CSS

```
.frame { position:relative;border:1px solid #CCC;border-radius:2px;-moz-border-radius:2px; }
.frame:before
{
    position:absolute;
    content:'';
    border:2px solid #F2F2F2;
    height:100%;width:100%;
    box-sizing:border-box;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
}
img.frame-image     /* IT WON't BE APPLIED?! */
{
    min-width:30px;min-height:30px;
    max-width:200px;max-height:200px;
}​ 
```

我面临的问题是，应用到`img.frame-image`的 CSS 不起作用/没有得到应用。我在 Chrome 18 和 FireFox 12 上试过。我在 Chrome 的元素检查器或 FireBug 中看不到样式。它也不会被任何其他 CSS 覆盖。

对于演示，我尝试为此创建[**jsfiddle**](http://jsfiddle.net/Bongs/2CeFN/)。它在那里工作！

`img.frame-image`但令人惊讶的是，当我在CSS 之上编写CSS 时`.frame:before`，它起作用了！！

```
.frame { position:relative;border:1px solid #CCC;border-radius:2px;-moz-border-radius:2px; }
img.frame-image        /* NOW IT WILL BE APPLIED */
{
    min-width:30px;min-height:30px;
    max-width:200px;max-height:200px;
}​
.frame:before
{
    position:absolute;
    content:'';
    border:2px solid #F2F2F2;
    height:100%;width:100%;
    box-sizing:border-box;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
} 
```

知道为什么会这样吗？是框架 (RoR) 相关问题还是 CSS 语义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T10:47:30.147

首先删除[无效](http://dev.w3.org/html5/markup/img.html#img-tags)`</img>`的..

> **标签遗漏**
> 
> 该`img`元素是一个空元素。img 元素必须有一个开始标签**，但不能有**一个结束标签。

确保 CSS 已加载（*而不是使用缓存版本*）。
还要确保没有可能删除/更改您的课程的脚本。

（*我也希望 CSS 中的注释仅用于堆栈溢出，因为它们是无效的*）

* * *

**更新**

Firebug 在规则的开头显示了一个奇怪的空间，所以我运行

```
var txt = document.styleSheets[0].cssRules[3].cssText;
console.log(0, ':', txt[0],':', txt.charCodeAt(0) ); 
```

并得到`8203`了 charCode ...

这是零宽度空格字符。您需要将其删除，因为它被用作选择器的一部分（*因此失败*）。

* * *

要实时查看更改，请尝试运行

```
var txt = document.styleSheets[0].cssRules[3].cssText;
var fixedRule = txt.substring(1);

document.styleSheets[0].deleteRule(3);
document.styleSheets[0].insertRule(fixedRule, 3); 
```

从萤火控制台，你会看到它会被修复..（*脚本唯一要做的就是删除错误的规则并在删除第一个字符后重新插入*）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-23T11:58:42.207

尝试将名称从 frame-image 更改为 frameImage 或其他什么？删除连字符？

# java - 在 Java 中分配类

> ID：10718210
> 
> 赞同：0
> 
> 时间：2012-05-23T10:35:27.000
> 
> 标签：java

我有

```
 SomeClass sc1 = new SomeClass();
  SomeClass sc2 = sc1; 
```

sc2会因为sc1而改变（当sc1改变时）？如果没有，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:36:25.613

是的，任何更改`sc1`都将反映`sc2`为指向同一个对象的两个点。

所以说如果这是结构`SomeClass`

```
public SomeClass {
  String name;
  //getter setter
} 
```

如果你这样做

```
SomeClass sc1 = new SomeClass();
SomeClass sc2 = sc1;

sc1.setName("Hello");

System.out.println(sc2.getName()); // this will print hello since both sc1 and sc2 are pointing to the same object. 
```

但如果你这样做：

```
sc1.setName("Hello");
sc1 = null;
System.out.println(sc2.getName()); // this will print hello since only sc1 is null not sc2. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:36:57.640

是的，当然，因为它们都指的是同一个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:45:07.933

Its like - giving sc1 an additional name sc2.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T10:40:57.407

`sc2`并且`sc1`是单独的变量，它们都包含对同一对象的*引用（这是一个重要的区别！）。*对对象状态的任何更改都将通过两个引用同样可见。所以

```
sc2.setField("hi!");
sc1.getField(); // returns "hi!" 
```

但是，对引用本身的更改对其他人没有影响：

```
sc2 = null;
sc1.getField(); // still returns "hi!", no exception 
```

# objective-c - 创建 UIView 覆盖以捕获所有触摸和手势

> ID：10718212
> 
> 赞同：0
> 
> 时间：2012-05-23T10:35:28.310
> 
> 标签：objective-c, uiview, uiviewcontroller, uigesturerecognizer, uitouch

我有一个视图层次结构，其中包括一个带有嵌套 UIScrollView 的顶级 UIView，其中包含许多嵌套 UIViews，其中包含 UILabels、UITextFields 等。

我想在所有东西的顶部覆盖一个 UIView，这样我就可以拦截某些触摸和拖动事件（基本上是为了编辑整体布局）。

我希望 UIScrollView 仍然可以工作，所以我需要将（全部？）触摸和手势通过覆盖层传递到底层视图。当某些触摸发生时，我将拦截触摸并创建一个拖动情况，其中触摸的子视图将以编程方式在子视图内移动。

创建覆盖 UIView 以便（所有？）触摸和手势可以通过的最佳方法是什么？一些代码示例将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:39:35.353

子类化覆盖 UIView 并覆盖 touchesBegan, touches.. 方法，如下所示：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // Do your stuff
    [[[self view] nextResponder] touchesBegan:touches withEvent:event];
} 
```

对 touchesMoved、touchesEnded 和 touchesCancelled 执行相同的操作。

不是 100% 确定这会奏效，试一试:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:38:31.630

最后，我修改了我的结构，因此覆盖层使用平移手势处理了所有内容

# lua - 如何设置 Lua 块的块名？

> ID：10718213
> 
> 赞同：3
> 
> 时间：2012-05-23T10:35:31.497
> 
> 标签：lua, chunks

我目前正在使用 C API 调用`luaL_loadstring()`来加载一个块，但是这个调用没有命名该块的方法。

有没有办法在加载后命名一个块？

或者，我看到该`lua_load()`函数采用了一个 chunkname 参数，但我没有找到任何如何使用它的示例：如何将`luaL_loadstring()`调用替换为`lua_load()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:48:10.317

使用`luaL_loadbuffer(L,s,strlen(s),name)`.

# image - 将数据属性添加到 Drupal Views 图像

> ID：10718215
> 
> 赞同：2
> 
> 时间：2012-05-23T10:35:38.377
> 
> 标签：image, drupal, drupal-views

我有一个打印标题、正文和图像字段的视图。现在我希望能够将数据属性打印到图像标记中。目前它生成以下 HTML：

```
<img width="578" height="472" src="http://mydomain.com/sites/mydomain.com/files/image-small.jpg" typeof="foaf:Image"> 
```

但我想提供更大图像的 URL 作为数据属性。像这样：

```
<img width="578" height="472" src="http://mydomain.com/sites/mydomain.com/files/image-small.jpg" typeof="foaf:Image" data-big-image="http://mydomain.com/sites/mydomain.com/files/image-big.jpg" /> 
```

怎样才能做到这一点？我可以在视图中执行此操作还是需要更改视图模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:07:49.787

您可以使用[Views PHP](http://drupal.org/project/views_php)字段在 Views UI 中完成此操作。

您需要先添加大图像字段和小图像字段，然后将它们从显示中排除，以便稍后使用 $data 对象轻松引用它们。

添加一个 PHP 字段，将“值代码”留空。在“输出代码”中，只需构建您想要的 HTML：

```
<?php
print '<img src="' . $data->field_your_small_image_field['some']['array'] .
 '" data-big-image="' . $data->field_your_big_image_field['some']['array'] . '" />';
?>` 
```

在输出代码区域中执行`dsm($data);`（启用[Devel](http://drupal.org/project/devel)）以找到 URL 的确切数组键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:28:38.747

访问整个数据负载的任何简单方法是在视图 ui 中添加一个节点 id 字段，然后在循环之前的模板文件中添加以下内容：

```
 $nid = strip_tags($fields['nid']->content);
  $node = node_load($nid); 
```

执行 $node 的 var_dump() 以查看您可以使用哪些数据。

例如，获取图像路径类似于以下内容：

```
$node->field_cl_image['und'][0]['uri'] 
```

# php - 如何在 php 中将 ereg_replace 转换为 preg_replace？

> ID：10718223
> 
> 赞同：-1
> 
> 时间：2012-05-23T10:35:48.707
> 
> 标签：php

如何将下面的 ereg 语句转换为 preg_replace

```
 $message = ereg_replace("http://([.]?[a-zA-Z0-9_/-])*", "<a href=\"\\0\" target=\"_blank\">\\0</a>", $message);
 $message = ereg_replace("(^| |\n)(www([.]?[a-zA-Z0-9_/-])*)", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $message); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:42:24.827

```
$message = preg_replace('~http://([.]?[a-zA-Z0-9_/-])*~', '<a href="$0" target="_blank">$0</a>', $message);
$message = preg_replace('~(^| |\n)(www([.]?[a-zA-Z0-9_/-])*)~', '$1<a href="http://$2" target="_blank">$2</a>', $message); 
```

# android - android 中的平板电脑和手机都使用相同的应用程序

> ID：10718224
> 
> 赞同：0
> 
> 时间：2012-05-23T10:35:52.170
> 
> 标签：android, tablet, android-actionbar

我想为平板电脑和手机开发单个应用程序。因此，对于片段，我使用的是 android-support-v4 兼容性 jar，并且应用程序可以在所有版本的平板电脑和手机上运行。现在，我想在我的应用程序中使用带有选项卡的操作栏，并且在谷歌搜索时我得到了 ActionBarCompat 示例应用程序。我将其转换为库并添加到我的项目中。但我不知道如何在我的项目中使用这个库来创建操作栏。我该如何使用这个库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:39:53.627

干得好：

[动作栏 Android 开发者](http://developer.android.com/guide/topics/ui/actionbar.html)

[ActionbarSherlock 在旧设备上的兼容性](http://actionbarsherlock.com/)

# python - Django：更改“AM”和“PM”的文本

> ID：10718227
> 
> 赞同：-1
> 
> 时间：2012-05-23T10:35:54.977
> 
> 标签：python, django, parsing

我希望能够在代表 PM的`strptime`时间使用 Python。`9:00p``p`

似乎我最接近的赌注是`%p`开关：

[http://docs.python.org/library/time.html#time.strftime](http://docs.python.org/library/time.html#time.strftime)

问题是，它只解析`pm`or `PM`。我希望它接受`p`。

文档说它使用“区域设置相当于 AM 或 PM”。有没有办法让我将我的“语言环境等效”更改为`p`and `a`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:41:25.427

不幸的是，Windows 中的短时格式和长时格式都只支持`tt`AM 或 PM，似乎没有办法改变它。

你能不预处理字符串并使用`.replace('p', 'pm').replace('a', 'am')`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:43:42.447

问题是`strptime`当您最好将其视为便利功能时，您想要解析所有内容。更改“区域设置等效项”是制作神秘代码并让其他东西（如`strftime`）中断的好方法。

您最好*先*在字符串中替换`9:00p`with ，然后将其传递给. 您可能需要检查替换的合理性，例如“Thursp”不应该变成“Thurspm”。`9:00pm`*`strptime`*

 ** * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T13:30:49.700

您*可以*对其进行预处理。您*可以*更改作为 django 核心一部分的代码。

最坏的情况，您可以使用子类甚至猴子补丁。如果您决定改为显示一些代码，我们将很高兴为您指明前进的方向。*

# hibernate - 臭名昭著：此 SqlParameterCollection 的索引 n 无效，Count=

> ID：10718228
> 
> 赞同：19
> 
> 时间：2012-05-23T10:35:55.600
> 
> 标签：hibernate, nhibernate, lucene.net

这个例外：

此 SqlParameterCollection 的索引 n 无效，Count=

通常指向重复的映射信息（参见 Stack Overflow + Google）。我很确定我没有。还有其他原因吗？

我似乎已经确定了问题所在。我介绍了这个：

```
[DocumentId]
public virtual int GI
{
    get { return base.Id; }
    protected set { base.Id = value; }
} 
```

通过 lucene.net 使用搜索。这似乎干扰了FNH！我在这里有什么选择？

PS：

```
at System.Data.SqlClient.SqlParameterCollection.RangeCheck(Int32 index)
   at System.Data.SqlClient.SqlParameterCollection.GetParameter(Int32 index)
   at System.Data.Common.DbParameterCollection.System.Collections.IList.get_Item(Int32 index)
   at NHibernate.Type.Int32Type.Set(IDbCommand rs, Object value, Int32 index)
   at NHibernate.Type.NullableType.NullSafeSet(IDbCommand cmd, Object value, Int32 index)
   at NHibernate.Type.NullableType.NullSafeSet(IDbCommand st, Object value, Int32 index, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand statement, ISessionImplementor session, Int32 index)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object id, Object[] fields, Boolean[] notNull, Int32 j, SqlCommandInfo sql, Object obj, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object id, Object[] fields, Object obj, ISessionImplementor session)
   at NHibernate.Action.EntityInsertAction.Execute()
   at NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
   at NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   at NHibernate.Engine.ActionQueue.ExecuteActions()
   at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   at NHibernate.Impl.SessionImpl.Flush()
   at SharpArch.Data.NHibernate.DbContext.CommitChanges()
   at Updater1.Program.Main(String[] args) in C:\Users\bla\Documents\Visual Studio 2010\Projects\Bla\Updater1\Program.cs:line 97 
```

PP:

```
public class MappedSequenceMap : IAutoMappingOverride<MappedSequence>
    {
        public void Override(AutoMapping<MappedSequence> mapping)
        {
            mapping.Id(x => x.Id, "GI").GeneratedBy.Assigned();

            mapping.Map(x => x.Affiliation).Length(10000);
            mapping.Map(x => x.Gene).Length(10000);
            mapping.Map(x => x.OriginalIsolationCountry).Length(10000);
            mapping.Map(x => x.OriginalAffiliation).Length(10000);
            mapping.Map(x => x.PMIDs).Length(10000);
            mapping.Map(x => x.Product).Length(10000);
            mapping.Map(x => x.Fasta).Length(10000);
            mapping.Map(x => x.Note).Length(10000);
            mapping.Map(x => x.Strain).Length(10000);

            mapping.HasManyToMany(x => x.PubmedPublications).Table("SequencesPubmedPublications");
        }
    } 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-23T12:34:42.797

答案是：-

a）您在同一类中映射了重复的属性

b）如果您要公开外键并使用 a`<many-to-one ...`到映射文件中的相关实体，这是可能的。如果是这种情况，请添加 `insert="false" and update="false"`到外键属性并再次运行。

为了验证这一点，当您使用 fluent 和自动映射时，您需要查看 XML 映射。请参阅此 [链接][2] 和使用`ExportTo(..)`方法。完成此操作后`XML`，请查看是否有任何重复的属性甚至重复的映射文件。

在您的情况下，您有两个对 column 的引用`GI`：

```
<id name="Id" ...>
  <column name="GI" />
  <generator class="assigned" />
</id>

<property name="GI" ...>
  <column name="GI" />
</property> 
```

我认为你不能`[DocumentId]`在`Id`类属性上设置注释。我认为您可能需要放弃此类的自动映射并通过 fluent 手动配置！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-04T12:40:06.097

完全归功于@Rippo，Fluent NHibernate 中对我有帮助的等效答案是：

对于课程：

```
public class User
{
   public virtual Department {get; set;}
}

public class Department
{
   public virtual ICollection<User> Users {get; set;}
} 
```

如果您对`User`实体有以下映射：

```
//Problem mapping
Map(x => x.DepartmentId)          
References(x => x.Department)
   .Column("Id")
   .ForeignKey("DepartmentId")
   .Fetch.Join(); 
```

以下是可能的解决方案之一（由于`one-to-many`- 部分中的双重映射`one-Department-to-many-Users`）：

```
// !Solution
Map(x => x.DepartmentId)          
References(x => x.Department)
   .Column("Id")
   .ForeignKey("DepartmentId")
   .Fetch.Join()
   .Not.Insert()   // <- added this
   .Not.Update();  // <- and this 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-11T04:07:16.030

我有这个错误，在我的 Fluent IAutoMappingOverride 类中我有一个 mapping.IgnoreProperty(p => Property)，其中 Property 只是一个吸气剂。我删除了 IgnoreMap 语句并修复了它。这是 NH 3.3.1.4。可能与您的问题无关，但希望这对其他人有帮助。

# axapta - Dynamics AX 2009“用户组权限”

> ID：10718229
> 
> 赞同：0
> 
> 时间：2012-05-23T10:35:57.037
> 
> 标签：axapta, microsoft-dynamics

我想准备非常快速的“用户组权限”，但这非常困难，例如如果我想为管理添加访问权限 -> 位置查看此软件仅授予父级权限，但不授予此父级中的所有节点。我应该怎么做才能解决这个问题？

![在此处输入图像描述](../Images/913fd061b53c7ab995c9d9967101a8a7.png)

如果我要单击维度集，我需要对此父级中的所有子级授予权限。你知道我必须做什么吗？

```
public void MCOVgrantFullAccess(SecurityKeySet _startSecurityKeySet = null)
{
    //klasa systemowa dictionary http://msdn.microsoft.com/en-us/library/aa600103(v=ax.50).aspx
    Dictionary          dictionary = new Dictionary();

    DictSecurityKey     dictSecurityKey;
    int i;

    if (_startSecurityKeySet)
        securitySet = _startSecurityKeySet;
    else
        securitySet = SysSecurity::constructSecurityKeySet();

    // securityKeyCnt() An integer that indicates the number of security keys. http://msdn.microsoft.com/en-us/library/aa600103(v=ax.50).aspx
    // i = 365
    for (i=dictionary.securityKeyCnt(); i; i--)
    {
        dictSecurityKey = new DictSecurityKey(dictionary.securityKeyCnt2Id(1));
        if (!dictSecurityKey.parentSecurityKeyId())
        {
            securitySet.access(dictSecurityKey.id(), AccessType::Delete);
        }
    }
    SysSecurityFormSetup::delete(userGroupId, domainId); //Delete setup of form controls
    formSetupMap = new Map(Types::String, Types::Class); //Clear cache
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:09:10.643

如果您正在设置安全性，则“应该”遵循一个流程，您首先要收集最终用户执行的流程，根据这些流程定义安全角色，然后设置组。我接受过 MS 合作伙伴的安全培训，我们从未对任何内容进行硬编码。管理模块中有一个安全设置区域，在这里您可以定义用户组和其中的权限，然后将用户分配到一个组，也可以从这里为单个记录设置记录级别的安全性。

# php - 链接重写和删除旧链接

> ID：10718234
> 
> 赞同：0
> 
> 时间：2012-05-23T10:36:23.537
> 
> 标签：php, apache, mod-rewrite

我正在制作这个网站，我已经清理了我的网址。我在网上唯一找不到的是如何删除旧的，所以每个页面只有一个链接。

这是我的 .htaccess

```
RewriteBase /
RewriteCond %{HTTP_HOST} !^domain.eu$ [NC]
RewriteRule ^(.*)$ http://domain.eu/$1 [L,R=301]

RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://domain.eu/$1/ [L,R=301]

RewriteRule ^secured/ - [L]

RewriteRule ^login/$ paginas/login.php 
RewriteRule ^([a-zA-Z0-9]+)/$ index.php?taal=$1 
RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/$ index.php?taal=$1&pagina=$2

ErrorDocument 404 /paginas/error404.php 
```

那么如何使 index.php?taal=1&pagina=2 类型的链接不可用，以便人们只能使用 domain.eu/1/2/ ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:40:35.247

为什么要排除这些网址？如果较短的版本更好，并且无论如何用户都被重定向到他们，他们将开始使用较短的版本。在我看来，使“旧”网址停止工作的可用性很差。301 重定向是解决您问题的好方法！

# php - 如何在php中更改字符串的大小写？passw5ord 到 passw5ord？

> ID：10718236
> 
> 赞同：6
> 
> 时间：2012-05-23T10:36:28.263
> 
> 标签：php, facebook, string, case

如本[Meta Question](https://webapps.stackexchange.com/questions/26301/facebook-accepts-more-than-one-password)中所述，Facebook 接受与我们的密码完全相反的大小写变体。例如：

```
1.- paSSw5ORD  (Original password)
2.- PAssW5ord  (Case altered to exact opposite, Capital->Small and vice-versa.)
3.- PaSSw5ORD  (Only first letter's case altered) 
```

如果第一个是用户输入的原始版本，如何获得第二个变体（或者在用户输入第二个版本时获得第一个）？这是我对此的看法。

```
<?php

$pass = "paSSw5ORD"; //Example password
$pass_len = strlen($pass); //Find the length of string

for($i=0;$i<$pass_len;$i++){
    if(!(is_numeric($pass[$i]))){                 //If Not Number
        if($pass[$i]===(strtoupper($pass[$i]))){  //If Uppercase
            $pass2 .= strtolower($pass[$i]);      //Make Lowercase & Append
        } else{                                   // If Lowercase
            $pass2 .= strtoupper($pass[$i]);      //Make Uppercase & Append
        }
    } else{                  //If Number
        $pass2 .= $pass[$i]; //Simply Append
    }
}

//Test both
echo $pass."\r\n";
echo $pass2;
?> 
```

但是如何让它处理带有特殊字符的密码（在标准英文键盘上都可能？

```
!@#$%^&*()_+|?><":}{~[];',./     (Space also) 
```

这不适用于上述所有特殊字符。

```
if(preg_match('/^\[a-zA-Z]+$/', "passWORD")){
//Special Character encountered. Just append it and
//move to next cycle of loop, similar to when we
//encountered a number in above code. 
} 
```

我不是 RegEx 专家，那么如何修改上述 RegEx 以确保它处理所有上述特殊字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T10:45:05.057

To invert the case of a string I use this function:

```
function invert_case($string) {
  return preg_replace('/[a-z]/ie', '\'$0\' ^ str_pad(\'\', strlen(\'$0\'), \' \')', $string);
} 
```

I found it in the [php.net manual](http://www.php.net/manual/en/function.str-shuffle.php#55509) ages ago while I was looking to do the same thing. I just turned it into a function.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T10:50:22.037

这是一个切换字符串中字符大小写的函数。

```
<?php
     $string = "Hello";                                      // the string which need to be toggled case
     $string_length = strlen($string);                      // calculate the string length
     for($i=0;$i<$string_length;$i++){                        // iterate to find ascii for each character
          $current_ascii = ord($string{$i});                 // convert to ascii code
          if($current_ascii>64 && $current_ascii<91){        // check for upper case character
                 $toggled_string .= chr($current_ascii+32);   // replace with lower case character
          }elseif($current_ascii>96 && $current_ascii<123){    // check for lower case character
                $toggled_string .= chr($current_ascii-32);   // replace with upper case character
          }else{
                $toggled_string .= $string{$i};               // concatenate the non alphabetic string.
              }
        }
     echo "The toggled case letter for $string is <hr />".$toggled_string; // output will be hELLO
?> 
```

希望对你有帮助

[此链接](http://mydons.com/how-to-toggle-character-case-in-php-without-strlower-strupper-ucfirst-inbuilt-and-array-function/)中给出了相同的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T10:40:51.990

您需要探索`ctype_upper,ctype_lower`在字符串中查找大写和小写字母，然后您可以使用它`strtolower and strtoupper`来更改字母的大小写。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T11:24:15.197

此问题的先前答案仅适用于 az。这适用于所有 unicode 字符。

*   ö -> Ö
*   Å -> å
*   ü -> ü
*   等等

    ```
    function invert_case($str) {
        $inverted = '';
        for($i=0;$i<mb_strlen($str);$i++) {
            $char = $str[$i];
            $upper = mb_strtoupper($char);
            if($upper == $char) {
                $inverted .= mb_strtolower($char);
            } else {
                $inverted .= $upper;
            }
        }
        return $inverted;
    } 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-26T04:10:16.363

Joakim 的答案是正确的，但有一行是错误的：替换`$char = $str[$i];`为`$char = mb_substr($str, $i, 1);` 只有这样它才能适用于包括德语在内的所有 unicode 字符。

# c# - 解决包 uri 在 wpf 中不起作用

> ID：10718249
> 
> 赞同：1
> 
> 时间：2012-05-23T10:37:27.747
> 
> 标签：c#, wpf, xaml, uri, resourcedictionary

虽然我发现了很多“pack uri issue”问题，但我没有得到我的问题的答案。

我有一个棱镜解决方案，我希望一个`MyApplication.Resources`程序集包含我所有的应用程序范围的样式和模板。

所以

*   第 1 步：我已经创建了解决方案（WpfUsercontrollibrary）
*   第 2 步：创建文件夹 /Themes
*   第 3 步：创建了 Generic.Ribbon.xaml
*   第 4 步：创建 Generic.xaml
*   第 5 步：Generic.xaml 有一个 MergedDictionary 部分来合并所有 Generic.xxx.xaml 文件
*   第 6 步：在 prism 模块程序集中引用的 MyApplication.Resources 程序集
*   第 7 步：在我的模块视图中加载 Generic.xaml（类型： ***Microsoft.Windows.Controls.Ribbon.RibbonTab***

    ```
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/MyApplication.Resources;component/Themes/Generic.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary> 
    ```

我也尝试过绝对变体

```
<ResourceDictionary Source="pack://application:,,,/ElairoCRM.Resources;component/Themes/Generic.xaml"/> 
```

以上所有步骤均通过[MSDN doku 验证打包 uri](http://msdn.microsoft.com/en-EN/library/aa970069.aspx)以及互联网上的大量 stackoverflow 问题和 wpf 资源教程。

但没有任何效果。我错过了什么？

先感谢您。

***编辑：*** 我忘记了发生的错误：

> XamlParseException 与内部异常 FileNotFoundException 具有以下消息：未找到文件或程序集 \"MyApplication.Resources,culture=neutral" 或其依赖项之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:08:38.453

我自己解决了这个问题。我将 Resource 程序集中的 Generic.xaml 文件从主题文件夹复制到程序集根目录，并将 pack 参数更改为 component/Generic.xaml。现在一切都按预期工作。我没有找到有关此行为的文档。

# debian - 如何分析进入 debian linux 机器的 HTTP 请求

> ID：10718253
> 
> 赞同：1
> 
> 时间：2012-05-23T10:37:45.883
> 
> 标签：debian, packet-capture

我想分析 debian linux 机器的 http 流量。我知道我可以在任何其他机器上运行 fiddler 并捕获该特定机器的流量。但问题是如何。？还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:30:19.807

[捕手](https://github.com/ren85/catcher)目前处于 alpha 阶段，但应该能体面地完成工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:06:07.503

您可以使用 tcpdump 记录传入流量（例如 tcpdump -i eth0 "src 192.168.6.66 and dst port 80" -s 8129 -w http.dump）并稍后使用wireshark 在桌面上分析输出文件。

# java - 两种正则表达式模式有什么区别

> ID：10718254
> 
> 赞同：3
> 
> 时间：2012-05-23T10:37:48.223
> 
> 标签：java, regex

我试图在 Web 应用程序中验证公司名称并具有此正则表达式模式

```
^[a-zA-Z_'\\s,;.-0-9]{1,100}$ 
```

上述模式将拒绝价值**10004 Estates Limited**

但是如果我提出 0-9 那么模式就变成了

```
^[a-zA-Z0-9_'\\s,;.-]{1,100}$ 
```

然后它工作。对正则表达式和模式很陌生，但我知道我应该更多地使用它，所以我想清楚这一点。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T10:39:29.797

`-`是字符类中的一个特殊字符，因此是模棱两可的，并且可能得到and和 and`.-0-9`的含义，因此本质上是字符。`.``0``-``9``./09-`

要在字符类中包含连字符减号，您必须将其转义或将其放置在字符类的开头或结尾（这是您在第二个正则表达式中所做的，可能是偶然的）。

编辑添加：以上猜测似乎是正确的，至少对于.NET的正则表达式引擎：

```
PS> [char[]](32..127) -match '[a-zA-Z_''\s,;.-0-9]'

'
,
-
.
/
0
9
;
A
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:39:46.770

可能是因为第一个字符组里面的“-”

```
^[a-zA-Z_'\s,;.\-0-9]{1,100}$ 
```

逃避它，它应该没问题。

请记住，当在字符组内时，您必须转义的字符变为

```
backslash \
caret ^
hyphen - 
```

# scala - 如何在scala中使代码线程安全？

> ID：10718255
> 
> 赞同：4
> 
> 时间：2012-05-23T10:37:55.097
> 
> 标签：scala

我在 scala 中有一个代码，由于各种原因，有几行代码无法被更多线程同时访问。

如何轻松使其成为线程安全的？我知道我可以使用 Actors 模型，但我发现它对于几行代码来说有点过分了。

我会使用某种锁，但我在谷歌或 StackOverflow 上都找不到任何具体的例子。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-23T10:57:54.353

我认为最简单的解决方案是`synchronized`用于关键部分（就像在 Java 中一样）。这是它的Scala语法：

```
someObj.synchronized {
    // tread-safe part
} 
```

它很容易使用，但它会阻塞并且很容易导致死锁，因此我鼓励您查看[java.util.concurrent](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)或[Akka](http://akka.io/)可能更复杂但更好/非阻塞的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T10:42:28.727

您可以使用任何 Java 并发构造，例如[Semaphores](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html)，但我建议不要这样做，因为信号量容易出错并且使用起来很笨重。演员在这里真的是最好的方式。

创建演员不一定很难。在 scala-lang.org 上有一个简短但有用的关于演员的教程：[http ://www.scala-lang.org/node/242](http://www.scala-lang.org/node/242)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T11:00:19.843

如果它真的很简单，你可以使用同步：[http ://www.ibm.com/developerworks/java/library/j-scala02049/index.html](http://www.ibm.com/developerworks/java/library/j-scala02049/index.html)

或者您可以使用 jdk 中并发包中的一些类：http: [//docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)

如果你想使用actors，你应该使用akkaactors（他们将在未来取代scalaactors），见这里：[http](http://doc.akka.io/docs/akka/2.0.1/) ://doc.akka.io/docs/akka/2.0.1/ 。它们还支持诸如 FSM（有限状态机）和 STM（软件事务内存）之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:06:03.370

一般来说，尝试使用具有不可变数据结构的纯“函数”或方法，这应该有助于线程安全。

# android - 从设备连接到 Android 市场

> ID：10718256
> 
> 赞同：3
> 
> 时间：2012-05-23T10:37:57.967
> 
> 标签：android, in-app-billing

我在我的应用中使用应用内计费我在将其上传到 goolge play 帐户后对其进行测试我添加了测试产品并在设备上对其进行测试。请注意，应用内计费的所有先决条件均已完成。但它说“无法进入市场”任何建议/帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:41:45.233

请记住使用谷歌帐户配置设备并将您的电子邮件包含在市场测试帐户列表中。

您还应该在应用清单中包含计费权限

```
<uses-permission android:name="com.android.vending.BILLING" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:04:58.163

经过一整天的头脑风暴和测试，我知道在我的情况下，使用 Tab Widget 存在应用内计费问题之后，我删除了标签小部件，然后尝试了应用内计费，它工作正常，所以我得出的结论是，在我的情况下，标签小部件存在问题。

# objective-c - iOS5上的UIImagePickerController内存泄漏

> ID：10718257
> 
> 赞同：5
> 
> 时间：2012-05-23T10:38:05.220
> 
> 标签：objective-c, xcode, ios5, uiimagepickercontroller

我在 iOS5 和 XCode4.2 上开发的应用程序中使用 UIImagePickerController，出现内存泄漏，我不知道为什么会出现这种泄漏，请您给我答案。

![在这里我附上我的屏幕截图：](../Images/14cf5bbb5828b4064ac214b794df08fa.png)

和我的代码：

```
-(void)createImagePicker 
{
_picker = [[UIImagePickerController alloc] init];
_picker.sourceType = UIImagePickerControllerSourceTypeCamera;

_picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;

_picker.allowsEditing = YES;
_picker.showsCameraControls = NO;

_picker.cameraDevice = UIImagePickerControllerCameraDeviceRear; 

_picker.delegate = self;
_picker.wantsFullScreenLayout = YES;

} 
```

和 viewWillApper 方法：

```
 -(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(closeCameraButton:) name:@"ShowMainView" object:nil];
    [self createImagePicker];
    [m_cameraOverlayView setBackgroundColor:[UIColor clearColor]];
    [self presentModalViewController:_picker animated:NO];
    _picker.cameraOverlayView = m_cameraOverlayView;

    [cameraImgView setHidden:YES];
    [filterView setHidden:YES];
    m_cameraOverlayView.hidden = NO;
    cameraSelectedButton.hidden = NO;
    cancelButton.hidden = YES;
    selectButton.hidden = YES;

    for (id Object in [scrollview subviews])
    {
        if([Object isKindOfClass:[UIButton class]])
        {
            [Object removeFromSuperview];
        }
    }

    [m_toolbarImage setFrame:CGRectMake(0, 427, 320, 55)];
    [cameraSelectedButton setFrame:CGRectMake(128, 432, 86, 44)];

    [m_cancelButton setFrame:CGRectMake(10, 434, 82, 40)];
    [m_cancelButton setTitle:@"Close" forState:UIControlStateNormal];
    [m_cancelButton setBackgroundImage:[UIImage imageNamed:@"menu-bar-button.png"] forState:UIControlStateNormal];
    [m_cancelButton setTitleColor:[UIColor colorWithRed:110/256.0 green:52/256.0 blue:28/256.0 alpha:1.0] forState:UIControlStateNormal];

    [cancelButton setFrame:CGRectMake(120, 434, 35, 35)];
    [selectButton setFrame:CGRectMake(184, 434, 35, 35)];

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T22:38:29.730

无论是否使用 ARC，这似乎是 iOS 5 中 UIImagePickerController 的问题。

我有一个使用 xcode 3.2.5 为 iOS 4 开发的应用程序，当从库中拍摄或选择照片时（在运行 iOS 4.1 的设备上测试），仪器显示没有泄漏。如前所述，在运行 iOS 5.1 的设备上测试的相同代码泄漏。

我知道这不是答案，但问题似乎比原始问题更广泛。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T12:45:14.973

刚刚看到，即使是来自[此处](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Listings/MyViewController_m.html)链接的苹果的源代码也存在与我们相同的问题......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T12:02:56.977

您应该调用`[_picker release];`以放弃 _picker 内存的所有权，如 Apple Memory Management Docs 中所述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T12:55:22.877

我阅读了许多关于该问题的其他帖子。有人说这是 Apple 的问题，这就是 Zillian 建议 PhotoPicker 示例也泄漏的原因。解决方法是只创建一个 UIImagePickerController 实例，可能作为一个单例，并且永远不要释放它（或者让 ARC 为你释放它）。这样，您将始终使用相同的实例，并且它可能会泄漏更少的时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T11:15:25.013

您是否在模拟器上运行该应用程序？如果是这样，这是一个历史悠久的问题（或可能会回来）：

> 泄漏主要（但不完全）在模拟器上，而不是在设备上。

[http://blog.airsource.co.uk/index.php/2008/11/12/memory-usage-in-uiimagepickercontroller/](http://blog.airsource.co.uk/index.php/2008/11/12/memory-usage-in-uiimagepickercontroller/)

# vbscript - 如何将字典添加到数组

> ID：10718261
> 
> 赞同：2
> 
> 时间：2012-05-23T10:38:23.877
> 
> 标签：vbscript

简单的例子：

```
Dim d, a(0)
Set d = CreateObject("Scripting.Dictionary")
d.Add "a", "Athens"
d.Add "b", "Belgrade"
d.Add "c", "Cairo"
Set a(0) = d

WScript.Echo(TypeName(a)) 
```

输出：

`Variant()`

我看不到如何访问此对象的任何方法，它计数为 3，但它似乎是空的

令我惊讶的是，谷歌没有为这个问题列出任何有用的结果——如何在数组中分配字典？

我发现最近的是这个未回答的[链接](http://www.tek-tips.com/viewthread.cfm?qid=1397563)

我的问题是我有一个创建临时字典的循环，我计划用字典对象输入简单的一维数组，但没有成功

我还发现了类似此[链接](http://wiki.mcneel.com/developer/scriptsamples/dictionary)的内容，其中分别为字典键和字典项（值）创建了两个数组，这对我的情况来说太复杂了

那么这对 VBScript 有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:45:39.030

我可能误解了你的问题，但你可以像这样访问字典：

```
WScript.Echo(a(0).Item("b")) 
```

*编辑*

这段代码：

```
Dim d, a(0)
Set d = CreateObject("Scripting.Dictionary")
d.Add "a", "Athens"
d.Add "b", "Belgrade"
d.Add "c", "Cairo"
Set a(0) = d
WScript.Echo(a(0).Item("b"))

dim x
x = d.Items

dim i
for i = lbound(x) to ubound(x)
    WScript.Echo(x(i))
next 
```

在我的 Windows 7 机器上产生这个输出：

```
C:\>cscript test.vbs
Microsoft (R) Windows Script Host Version 5.8
Copyright (C) Microsoft Corporation. All rights reserved.

Belgrade
Athens
Belgrade
Cairo

C:\> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:06:56.240

一个例子 ：

```
Dim d
Set d = CreateObject("Scripting.Dictionary") 
d.Add "a", "Athens" 
d.Add "b", "Belgrade" 
d.Add "c", "Cairo" 

WScript.Echo(d("a")) '=> Athens

d("a") = "Brussels"

WScript.Echo(d("a")) '=> Brussels

a = d.Keys   ' Get the keys.
b = d.Items
For i = 0 To d.Count -1 ' Iterate the array.
  wscript.echo a(i) & " " & b(i)
Next

'=>a Brussels
'=>b Belgrade
'=>c Cairo 
```

# asp.net-mvc-3 - MVC3 文本框文本更改事件

> ID：10718263
> 
> 赞同：0
> 
> 时间：2012-05-23T10:38:28.107
> 
> 标签：asp.net-mvc-3

我有以下场景，使用 mvc3：

我有一个包含 RecordID、RecordName 和 RecordType 的数据库表。显示的是三个文本框，一个用于前面提到的每个字段。

我的问题是，当我在相关文本框中输入 RecordID 时，我希望能够显示该特定 RecordID 的 RecordName 和 RecordType。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T10:57:08.167

在视图中：

```
@Html.TextBoxFor(model => model.RecordId)
@Html.TextBoxFor(model => model.RecordName)
@Html.TextBoxFor(model => model.RecordType)

<script language="javascript">
$('#RecordId').change(function(){
    var recordId = this.value;
    $.getJSON("/MyController/GetRecordById",
        {
            id: recordId
        },
        function (data) {
            $('RecordName').val(data.Name);
            $('RecordType').val(data.Type);
        });
});
</script> 
```

在控制器中：

```
public JsonResult GetRecordById(int id)
{
    var record = recordRepository.GetById(id);
    var result = new {
                         Name = record.Name,
                         Type = record.Type
                     }

    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

# mod-rewrite - 使用 squid 代理错误配置 mod_rewrite/mod_proxy

> ID：10718270
> 
> 赞同：0
> 
> 时间：2012-05-23T10:39:02.650
> 
> 标签：mod-rewrite, mod-proxy, squid

我们正在将 squid 用于我们的一个应用程序，并且我们从一个网站收到一条滥用消息，上面写着`He used xrumer or other Tools or had a false configured mod_rewrite/mod_proxy who is abused`.

我们怀疑其他人正在代表我们使用这些 squid 代理，或者这些配置实际上没有正确设置。我对 squid 或 Apache mod 规则没有太多经验。

可能是什么问题？

squid.conf 是

```
#######
####### Recommended minimum Access Permission configuration:
#######
####### Only allow cachemgr access from localhost
http_access allow manager localhost
http_access deny manager
####### Deny requests to certain unsafe ports
http_access deny !Safe_ports
####### Deny CONNECT to other than secure SSL ports
http_access deny CONNECT !SSL_ports
####### We strongly recommend the following be uncommented to protect innocent
####### web applications running on the proxy server who think the only
####### one who can access services on "localhost" is a local user
#######http_access deny to_localhost
#######
####### Recommended minimum configuration:
#######
acl all src all
acl manager proto cache_object
acl localhost src 127.0.0.1/32 ::1
acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1
####### Example rule allowing access from your local networks.
####### Adapt to list your (internal) IP networks from where browsing
####### should be allowed
acl localnet src 10.0.0.0/8     ####### RFC1918 possible internal network
acl localnet src 172.16.0.0/12  ####### RFC1918 possible internal network
acl localnet src 192.168.0.0/16 ####### RFC1918 possible internal network
acl localnet src fc00::/7       ####### RFC 4193 local private network range
acl localnet src fe80::/10      ####### RFC 4291 link-local (directly plugged) machines
acl SSL_ports port 443
acl Safe_ports port 80          ####### http
acl Safe_ports port 21          ####### ftp
acl Safe_ports port 443         ####### https
acl Safe_ports port 70          ####### gopher
acl Safe_ports port 210         ####### wais
acl Safe_ports port 1025-65535  ####### unregistered ports
acl Safe_ports port 280         ####### http-mgmt
acl Safe_ports port 488         ####### gss-http
acl Safe_ports port 591         ####### filemaker
acl Safe_ports port 777         ####### multiling http
acl CONNECT method CONNECT
#######
####### INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS
#######
####### Example rule allowing access from your local networks.
####### Adapt localnet in the ACL section to list your (internal) IP networks
####### from where browsing should be allowed
http_access allow localnet
http_access allow localhost
####### Changed by XYZ (XYZ@ABC) to allow http_access from ALL
http_access allow all
####### And finally deny all other access to this proxy. Changed by Ankit Narang (ankitn@amazon.com).
#######http_access deny all
####### Squid normally listens to port 3128
http_port 80
####### We recommend you to use at least the following line.
hierarchy_stoplist cgi-bin ?
####### Uncomment and adjust the following to add a disk cache directory.
#######cache_dir ufs /var/spool/squid 100 16 256
####### Leave coredumps in the first cache dir
coredump_dir /var/spool/squid
####### Add any of your own refresh_pattern entries above these.
refresh_pattern ^ftp:           1440    20%     10080
refresh_pattern ^gopher:        1440    0%      1440
refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
refresh_pattern .               0       20%     4320
####### Changed by Ankit Narang (ankitn@amazon.com)
forwarded_for off
access_log none
#######Making Squid an anonymous proxy
request_header_access Allow allow all 
request_header_access Authorization allow all 
request_header_access WWW-Authenticate allow all 
request_header_access Proxy-Authorization allow all 
request_header_access Proxy-Authenticate allow all 
request_header_access Cache-Control allow all 
request_header_access Content-Encoding allow all 
request_header_access Content-Length allow all 
request_header_access Content-Type allow all 
request_header_access Date allow all 
request_header_access Expires allow all 
request_header_access Host allow all 
request_header_access If-Modified-Since allow all 
request_header_access Last-Modified allow all 
request_header_access Location allow all 
request_header_access Pragma allow all 
request_header_access Accept allow all 
request_header_access Accept-Charset allow all 
request_header_access Accept-Encoding allow all 
request_header_access Accept-Language allow all 
request_header_access Content-Language allow all 
request_header_access Mime-Version allow all 
request_header_access Retry-After allow all 
request_header_access Title allow all 
request_header_access Connection allow all 
request_header_access Proxy-Connection allow all 
request_header_access User-Agent allow all 
request_header_access Cookie allow all 
request_header_access All deny all 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:20:42.210

```
http_access allow all 
```

这绝对是错误的。您已经配置了一个开放代理，因此世界上的每个人都可以使用您的代理来上网。当您必须以某种方式限制访问时，我不确切知道您的情况。

例如，如果您使用 Squid 作为反向代理，您应该只允许访问您的后端 Web 服务器：

```
acl webserver dst x.x.x.x
http_access allow webserver
http_access deny all 
```

如果您使用代理作为转发代理来浏览网页：

acl mynetwork src xxxx/y http_access 允许 mynetwork http_access 拒绝所有

您可以使用身份验证。

# android - 如何在 Andengine 中导入 BitmapTextureAtlas？

> ID：10718272
> 
> 赞同：0
> 
> 时间：2012-05-23T10:39:11.327
> 
> 标签：android, import, bitmap, andengine

我添加了这一行。但它给出了错误。如何导入它？

```
 import org.andengine.opengl.texture.atlas.TextureAtlas; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:26:14.547

TextureAtlas 是一个抽象类，尝试导入

```
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas; 
```

或者

```
import org.andengine.opengl.texture.atlas.bitmap.BuildableBitmapTextureAtlas; 
```

取决于您使用的是哪一个

如果您使用 Eclipse 并且配置正确，您应该能够删除该行并且 Eclipse 将添加正确的导入语句 - 至少它在我的系统上是这样。

# lua - Lua，表的大小（#table_name 或 table.getn(table_name)，它有时返回 0

> ID：10718273
> 
> 赞同：3
> 
> 时间：2012-05-23T10:39:19.067
> 
> 标签：lua

什么`#table_name`时候返回非 0 值？再说一次，什么`table.getn(table_name)`时候返回非 0 值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T10:44:57.377

Go through the manual:

> **2.5.5 - The Length Operator**
> 
> The length operator is denoted by the unary operator #. The length of a string is its number of bytes (that is, the usual meaning of string length when each character is one byte).
> 
> The length of a table t is defined to be any integer index n such that t[n] is not nil and t[n+1] is nil; moreover, if t[1] is nil, n can be zero. For a regular array, with non-nil values from 1 to a given n, its length is exactly that n, the index of its last value. If the array has "holes" (that is, nil values between other non-nil values), then #t can be any of the indices that directly precedes a nil value (that is, it may consider any such nil value as the end of the array).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T13:30:24.427

如果表中的键不是整数（例如字符串），则长度运算符将返回 0。

# php - 在 MySQL 数据库中存储“敏感”数据

> ID：10718274
> 
> 赞同：5
> 
> 时间：2012-05-23T10:39:24.517
> 
> 标签：php, mysql, encryption, aes

**“敏感”数据应如何存储在 MySQL 数据库中？**

1）我应该更多地关注MySQL数据库的安全性并将数据存储为纯文本吗？

*   我找到了有关如何使 MySQL 数据库更安全的分步教程：
*   [http://www.symantec.com/connect/articles/securing-mysql-step-step](http://www.symantec.com/connect/articles/securing-mysql-step-step)

2）我应该加密数据吗？

*   如果是，那么应该如何进行加密？
    1.  使用 MySQL aes_encrypt/aes_decrypt？
    2.  使用 PHP AES 函数/算法加密/解密数据？
*   数据应该如何存储在 MySQL 中？
    1.  斑点
    2.  二进制
    3.  变量

就我而言，“敏感”数据是个人支付的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T11:33:27.207

这是两者的混合。两个现有的答案（在我写这个[https://stackoverflow.com/a/10718397/1015483](https://stackoverflow.com/a/10718397/1015483)和[https://stackoverflow.com/a/10718459/1015483](https://stackoverflow.com/a/10718459/1015483)的时候）是有效的 - 你需要看看大约 5 种方法我能想到的可能攻击

*   他们可以访问您的数据库服务器；所以是的，尽可能多地保护婴儿（马特的回答）
*   独立的数据劫持（有人以其他方式获取您的数据库数据，可能是备份，可能是他们猜测密码，如果您将数据从一个地方传输到另一个地方，可能是 MITM）。为此，您确实加密了您的数据。您也可以出于某种原因进行 CSV 转储并通过电子邮件发送给某人。哎呀。但它发生了。所以加密（vlzvt的回答）

但是没有提到三个要素：

*   他们可以访问您的 Web 服务器（如果与您的数据库服务器不同）。如果他们可以访问网络服务器，那么所有的赌注都会被取消，因为他们有你的密码，加密密钥很多。所以你需要让它比数据库服务器更安全。（马特可能是上面的意思 - 但请说清楚）
*   与上面类似，但不要忘记，如果有人可以访问 phpMyAdmin 或您的管理控制台。不要使用纯文本身份验证或配置存储的密​​码进行访问。
*   最后是您的应用程序本身（也是最难锁定的）。您需要防止可能泄露数据的 SQL 注入。如果有人确实通过未捕获的查询获得访问权限，加密数据将停止最小化问题 - 因此，加密是解决方案。

* * *

对于您问题的第 2 部分：

使用 MySQL 加密/解密函数将阻止有权访问原始数据的人，但不会阻止 MITM 或 SQL 注入，甚至用于传输的 CSV 转储。

因此，IMO（这只是我的意见和我的做法）是用 PHP 加密并通过网络发送加密数据，因为这会阻止所有捕获数据的方法，并且 CSV 转储将被“加扰” ”。

如果你这样做，你也可以使用 varbinary / blob 类型，因为它会阻止你不小心尝试在 phpMyAdmin 中读取/编辑。另外，名义上可能会节省一些字节（尽管这取决于索引和其他东西——因此仅凭这一点并不是一个成功的论点）。

* * *

现在是不利的一面：搜索和排序。您索引或搜索的任何内容，如果加密，将仅匹配填充到正确长度的整个、精确、区分大小写的字符串（通常搜索将不区分大小写，您可以使用 LIKE 进行部分搜索）。如果你想 ORDER BY 那么你需要原始字符串。所以在设计结构时要记住。

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T10:46:49.403

如果攻击者可以访问纯文本数据，最糟糕的情况是什么？鉴于您必须解密数据以使其有用，因此您也需要加密密钥可访问的地方，任何可以访问数据库的攻击者也可能能够访问密钥，除非这是为了存档而不是例如实时网站。我会专注于数据库服务器的安全性，除非您将 HDD 装满可能会丢失的数据，但这实际上取决于您为什么需要对其进行加密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T10:51:26.870

如果您需要保护可能被黑客入侵的数据库中的数据，您可以使用[mcrypt对其进行加密](http://www.php.net/manual/en/function.mcrypt-encrypt.php)

```
$key = "mykey";
$crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256,$key,$data,MCRYPT_MODE_ECB,$key); 
```

之后，您可以根据 ~ 预期的数据大小选择 BLOB、TEXT、MEDIUMTEXT 或任何内容。* 对于**VARBINARY/BINARY**，您可能需要先[打包](http://php.net/manual/en/function.pack.php)它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T11:43:17.767

加密操作有额外的成本。

您需要评估在您的场景中，如果您的数据增长到相当大的规模，这种额外成本是否会成为问题。

避免数据泄漏的第一个前沿是具有访问权限等配置文件的强大数据访问策略。这样做的缺点是您需要管理 mysql 并对其进行配置。

If you want care about the managment of profiles, you can encrypt the data assuming the extra cost in CPU and (depend of encyption algorithm) a extra storage space.

The security of the a system is equals to the security of more weak component, don't focus your effort only in encryptation task, this only give you the sensation of security, if the data can be decrypted, the only thing that the intruder needs is time and bruteforce to break the encryption

# time - 两点之间的时间测量

> ID：10718275
> 
> 赞同：0
> 
> 时间：2012-05-23T10:39:26.147
> 
> 标签：time, bluetooth, gps, distance, smartphone

我需要测量两点之间的时间。我不能使用简单的手表，因为我没有空闲的双手。（**山地车-下坡**）

我的第一个想法是设置两个 GPS 点并测量这些点之间的时间，但我认为它会不准确。

我的第二个想法是为每个点设置一个蓝牙设备，然后测量我到蓝牙设备的距离，检查最短距离并节省时间。

但是我意识到我需要 3 个蓝牙设备来计算距离，这有点烦人。

知道如何以 <1sec 的精度测量两点之间的时间吗？我想通过智能手机控制它。

编辑：

好的，我有另一个想法。也许我可以为每个点设置一个蓝牙设备。我将信号强度设置为 <=1m。比我可以轻松地开始和停止时间，直到我在我的 android 上收到蓝牙信号。你认为这将是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:08:15.007

您似乎正在尝试计算课程的总时间和分段时间。明确地说，忘记将蓝牙用于其他非持续传输的东西，连接时间很慢......（我根据经验说话）。当然，您想以便宜的价格进行，因为已经有专业的解决方案（[例如](http://www.sportstiminginternational.com/products.html)）。从我的角度来看，如果您想要准确的东西并能够将其与您的手机集成，您将需要以下内容：

1.  DIY光电池传感器。可能涉及简单的芯片（例如 msp430）、光电晶体管-二极管对、廉价的 433mhz 发射器和电池。
2.  为您的手机DIY 433mhz 接收器。已经有很多板子支持 android[开放附件库](http://developer.android.com/guide/topics/usb/adk.html)（例如[sparkfun 的 49 美元](http://www.sparkfun.com/products/10748)），因此您只需将其连接到 433mhz 接收器和手机。
3.  在您的 android 手机中进行自定义代码编程。能够接收来自拆分信号发送器的信号并跟踪所有时间。

这似乎是一个相当不错的项目，价格低于 250-200 美元（如果你自己做的话：P）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:30:53.790

一种不需要任何特殊硬件的可能解决方案是在终点线使用智能手机。您只需要一个带有网络连接的额外智能手机 (SP) 和一些软件。

1.  SP 将启动信号发送到您的手机。你一听到信号就开始。
2.  SP 使用其摄像头检测您何时到达终点线。
3.  SP 计算开始和停止之间的时间并显示它，并且可能还会将信息发送到您的手机。

也许您甚至可以录制带有时间戳的视频。

（当然，低成本的解决方案是让其中一个人在终点线使用秒表。）

# android - 在列表视图中拖动项目的问题

> ID：10718281
> 
> 赞同：1
> 
> 时间：2012-05-23T10:39:49.633
> 
> 标签：android

我创建了一个包含项目列表的 ListView。列表视图中的每个项目都有不同的图像。我想要的是拖放列表视图中的每个图像意味着我可以移动列表视图中项目的位置。

我想做的是：

1.  我可以将列表中的每个图像从一个位置拖放到另一个位置。

2.  单击列表视图上的每个图像时，我想打开一个对话框。

那怎么做呢？请帮我举个合适的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:01:15.973

检查Eric Harlow 给出的[这个非常简单的例子。](http://www.google.co.in/url?sa=t&rct=j&q=drag%20and%20drop%20example%20in%20android%20%20listview%20ericharlow&source=web&cd=3&ved=0CFkQFjAC&url=http://ericharlow.blogspot.com/2010/10/experience-android-drag-and-drop-list.html&ei=jsK8T5D3EcLSrQftorC1Dw&usg=AFQjCNEqVMKCVxxrP0TSWxnd3iaidbxUuQ&cad=rja)

他曾经

```
private ArrayList<String> mContent; //in DragNDropAdapter class 
```

根据您使用**Images的要求，在****整个包**中自定义它

```
private ArrayList<Image> mContent; //in DragNDropAdapter class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:23:04.793

在**DragNDropListView**中查看下面的代码。

```
@Override
    public boolean onTouchEvent(MotionEvent ev) {
        final int action = ev.getAction();
        final int x = (int) ev.getX();
        final int y = (int) ev.getY();  

        if (action == MotionEvent.ACTION_DOWN && x < this.getWidth()/4) { 
            mDragMode = true;
        } 
```

...

而不是上面的代码，使用它来仅在列表视图的中间启用拖放。

```
@Override
public boolean onTouchEvent(MotionEvent ev) {
    final int action = ev.getAction();
    final int x = (int) ev.getX();
    final int y = (int) ev.getY();

    int mWidth = this.getWidth() / 4;  //calculating the quarter part
    if (action == MotionEvent.ACTION_DOWN && x >= (mWidth * 2) && x < (mWidth * 3) ) {
        mDragMode = true;
    } 
```

...

1）无论**x**值是什么，您都需要检查它，就像您要启用拖放功能一样。

2）给用户一个完全的特权，以便他们可以从 lsit 项目的任何点拖动使用这个

```
if (action == MotionEvent.ACTION_DOWN ) //don't check for x-position.
{
..
} 
```

请看上面的代码，

希望这会帮助你。

顺便说一句，@Anshuman 好问题。

# silverlight - 通过属性制作易于使用的用户控件

> ID：10718286
> 
> 赞同：0
> 
> 时间：2012-05-23T10:40:03.583
> 
> 标签：silverlight, user-controls, dependency-properties

在我的 Silverlight 4 应用程序中，我尝试创建一个简单的 UserControl，它将由我的应用程序使用。为了简单起见，它应该有一个“标题”和一个占位符，我想在其中放置任何类型的控件。

```
<User Control ...>
  <Grid x:Name="LayoutRoot">
    <TextBlock x:Name="TextBlockHeader" Text="{Binding Title}" />
    <ContentPresenter x:Name="ContentPresenterObject" />
  </Grid>
</UserControl> 
```

在后面的代码中，我为 TextBlock 的文本创建了一个属性

```
public string Title
{
  get { return (string)GetValue(TitleProperty); }
  set { SetValue(TitleProperty, value); }
}

public static readonly DependencyProperty TitleProperty = DependencyProperty.Register("Title", typeof(string), typeof(MyAccordion), null); 
```

这样，当我在应用程序中使用 Control 时，我可以设置 Title 属性。

```
<local:MyAccordion Title="Test"/> 
```

但似乎，文本块 Text="{Binding Title}" 处的绑定不会使文本“测试”显示为文本块文本。

我的问题是：如何使属性标题显示为文本框文本，以及如何为 - 任何类型的用户控件包含 - contencontrol 执行此操作？

提前致谢，
弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:55:05.883

也许控件或页面的 DataContext 没有设置。- 首先，您应该阅读有关绑定的更多信息（“http://www.silverlight.net/learn/data-networking/binding/data-binding-to-controls-(silverlight-quickstart)”）。如果您正在从事实际项目并且将设计一些架构，您应该阅读有关 MVVM 模式的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:06:41.133

答案是 ElementPropertyBinding。我需要在绑定中引用用户控件或在构造函数中添加绑定。

**在 XAML 中创建绑定：**

```
<User Control ... x:Name="userControl">
  ...
  <TextBlock x:Name="TextBlockHeader" Text="{Binding Title, ElementName=userControl}" />
</UserControl> 
```

**在构造函数中创建绑定（后面的代码）**

```
public MyUserControl()
{
  // Required to initialize variables
  InitializeComponent();

  TextBlockHeader.SetBinding(TextBlock.TextProperty, new System.Windows.Data.Binding() { Source = this, Path = new PropertyPath("Title") });
} 
```

我仍然需要找出如何添加子控件，但这是另一个问题。

# c++ - 调用 SetWindowsHookEx 指向的方法

> ID：10718287
> 
> 赞同：0
> 
> 时间：2012-05-23T10:40:09.200
> 
> 标签：c++, c, windows, winapi, hook

```
HHOOK WINAPI SetWindowsHookEx(
 __in  int idHook,
 __in  HOOKPROC lpfn,
 __in  HINSTANCE hMod,
 __in  DWORD dwThreadId
); 
```

正如[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)所说，这`lpfn`是一个指向钩子过程的指针。让钩子程序为：

```
keyboardProcessing(.....) {
} 
```

我如何调用这个钩子程序？即使我调用这个钩子程序，我将如何接收击键？

***请解释`SetWindowsHookEx`功能如何以及它如何调用实际的程序员定义的钩子方法来处理键？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:49:49.973

[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)函数用于为某些 Windows 事件注册自定义处理程序。来自 MSDN：

> 将应用程序定义的挂钩过程安装到挂钩链中。您将安装一个挂钩程序来监视系统中某些类型的事件。这些事件与特定线程或与调用线程相同的桌面中的所有线程相关联。

这意味着，对于选定的钩子类型（例如键盘事件），Windows 将调用提供的过程 ( `lpfn`) 来通知发生了该类型的事件。例如，您可以使用它从键盘获取所有事件，即使它们没有被定向到您的应用程序窗口（想象编写一个宏记录器）。

> 我如何调用这个钩子程序？

您不必调用该过程，您将在调用中提供其地址，`SetWindowsHookEx`然后 Windows 将在需要时为您调用它。

> 即使我调用这个钩子程序，我将如何接收击键？

如前所述，您不必调用它，如果您注册一个钩子，`WH_KEYBOARD`那么 Windows 将为每个键盘事件调用该过程。不要忘记在您的过程中调用[CallNextHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644974%28v=vs.85%29.aspx) ，hook 是一个过程链，每个过程都负责调用链中的下一个过程。[最后在使用UnhookWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644993%28v=vs.85%29.aspx)退出应用程序之前释放钩子。

# c# - 使用英国数据库登录的 DateTime 属性上的 Linq To Sql 表关联

> ID：10718290
> 
> 赞同：0
> 
> 时间：2012-05-23T10:40:18.853
> 
> 标签：c#, sql-server, linq-to-sql

我有两张表父母和孩子。这两个表都有一个主键“MyDate”，在 Sql Server 中声明为 DateTime。两个表都有一条记录，其中 MyDate 设置为“2011-12-01 00:00:00.000”，即 2011 年 12 月 1 日。

在我的 Linq to SQL dbml (.Net 3.5) 中，我在 MyDate 属性上自动创建了两个表之间的关联。DataContext 使用在 SQL Server (2008) 中将其默认语言设置为“英式英语”的数据库登录。当我运行 Linq 查询时：

```
var query
  from parent in myDataContext.PARENTs
  select parent 
```

我取回父记录，但没有返回链接的子记录。

在 SQL Profiler 我有这个跟踪：

```
-- network protocol: TCP/IP
set quoted_identifier on
set arithabort off
set numeric_roundabort off
set ansi_warnings on
set ansi_padding on
set ansi_nulls on
set concat_null_yields_null on
set cursor_close_on_commit off
set implicit_transactions off
set language British
set dateformat dmy
set datefirst 1
set transaction isolation level read committed
exec sp_executesql N'SELECT [t0].[MyDate] FROM [dbo].[CHILD] AS [t0]
WHERE ([t0].[MYDATE] = @p0)','@p0 datetime',@p0='2011-12-01 00:00:00' 
```

这将返回 0 条记录；我已经通过使用相同的（英国）登录名直接在查询窗口中运行它来检查它。如果我注释掉“set dateformat dmy”，我仍然会得到 0 条记录。如果我使用非英国登录名运行它，我会得到一条记录。如果我使用 '01-12-2011 00:00:00' 作为日期（例如，英国日期格式）和英国登录，我会得到一条记录。

在我看来，Linq 在创建要在其查询中使用的日期字符串时没有使用正确的日期格式。由于它使用“set dateformat dmy”，为什么它不在它生成的日期字符串中使用该格式？

有没有相对简单的方法来解决这个问题？谢谢。

编辑：在我的模型中，Parent 和 Child 上的 MyDate 属性的服务器数据类型为“DateTime NOT NULL”，类型为“DateTime (System.DateTime)”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:45:17.010

尝试急切加载

[LINQ to SQL：懒惰和急切的加载问题](http://blog.stevensanderson.com/2007/12/02/linq-to-sql-lazy-and-eager-loading-hiccups/)

```
var query = (from parent in MyDataContext.Parents select parent)
                .Including(childs => parent.Childs); 
```

或者

试用

```
from parent in Parents select new
     {parent.Name, parent.Whatever,
     Childs =
         parent.Childs.where(c=>c.Date== parent.Date) }; 
```

# django-haystack - Django haystack，如何匹配部分单词？

> ID：10718295
> 
> 赞同：3
> 
> 时间：2012-05-23T10:40:48.417
> 
> 标签：django-haystack, whoosh

我在 Django 1.4 中使用 haystack 1.2.7 + whoosh 2.4.0（Python 是 2.7）

示例：搜索查询“sear”应匹配包含“search”、“sear”和“searching”（等）的项目。

我的设置：

```
HAYSTACK_SITECONF = 'verticalsoftware.search.search_sites'
HAYSTACK_SEARCH_ENGINE = 'whoosh'
HAYSTACK_WHOOSH_PATH = 'C:/whoosh/prodeo_index'
HAYSTACK_INCLUDE_SPELLING = True 
```

搜索索引：

```
class GalleryIndex(SearchIndex):
    text = indexes.CharField(document=True, use_template=True)
    content_auto = indexes.NgramField(model_attr='title') 
    def index_queryset(self):
        """Used when the entire index for model is updated."""
        return Gallery.objects.filter(date_added__lte=datetime.datetime.now()) 
```

还尝试使用 EdgeNgramField 和/或 RealTimeSearchIndex

自定义 urlCONF：

```
from django.conf.urls.defaults import *
from verticalsoftware.search.views import SearchWithRequest

urlpatterns = patterns('haystack.views',
    url(r'^$', SearchWithRequest(), name='haystack_search'), 
) 
```

自定义视图：

```
from haystack.views import SearchView
import operator
from haystack.query import SearchQuerySet, SQ

class SearchWithRequest(SearchView):

    __name__ = 'SearchWithRequest'

    def build_form(self, form_kwargs=None):
        if form_kwargs is None:
            form_kwargs = {}

        if self.searchqueryset is None:
            sqs = SearchQuerySet().filter(reduce(operator.__or__, [SQ(text=word.strip()) for word in self.request.GET.get("q").split(' ')]))
            form_kwargs['searchqueryset'] = sqs

        return super(SearchWithRequest, self).build_form(form_kwargs) 
```

对于 sqs，我已经尝试了所有可以想象的方法，使用过滤器和自动完成功能，如文档和我能找到的每个相关论坛帖子中所见；将 __startswith 和 __contains 与我的 content_auto 或文本字段结合使用根本没有帮助（后者根本不匹配任何内容；而前者仅匹配 1 个字符或完整的字符串）

上面粘贴的变体至少具有返回带有空格的字符串的结果的好处（每个单词仍然必须完全匹配相应的数据库条目，因此需要这篇文章）

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-06T12:55:45.903

晚了，但是建议把你的主文档字段（文本）改成`EdgeNgramField`or `NgramField`，否则搜索到的索引不能匹配单词片段，只有完整的单词匹配是可能的`CharField`。

此外，在调试 haystack 时，在 django shell 中播放有时很有用：

```
./manage.py shell
from haystack.query import SearchQuerySet
s = SearchQuerySet()
s.auto_query('sear')
s.auto_query('sear').count()
... 
```

# css - iOS5 - 水平溢出滚动由垂直触摸控制

> ID：10718296
> 
> 赞同：6
> 
> 时间：2012-05-23T10:40:49.327
> 
> 标签：css, ipad, ios5, safari

> **可能重复：**
> [在 iOS 5 中使用 -webkit-overflow-scrolling 滚动出现问题](https://stackoverflow.com/questions/7992952/issue-with-scrolling-in-ios-5-using-webkit-overflow-scrolling)

我有一个带有更宽子元素的 div，它设置为 -webkit-overflow-scrolling: touch。

在横向加载页面时，要水平滚动 div，您必须在 div 上垂直上下移动手指。所以向上滚动向左，向下滚动向右。切换到纵向然后返回横向滚动按预期工作后 - 水平触摸运动水平滚动。将 -webkit-overflow-scrolling 设置为 auto 我看不到这个问题。谷歌搜索不会返回任何结果，还有其他人遇到过这种行为吗？

我的CSS：

```
#stream-container-outer {
    width: 925px;
    margin: 0 auto;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
}
#stream-container {
    width: 900%;
} 
```

# controller - 从 Yii 中的控制器调用另一个控制器中的函数

> ID：10718302
> 
> 赞同：3
> 
> 时间：2012-05-23T10:41:09.683
> 
> 标签：controller, yii

我想从控制器调用另一个控制器中的函数。

```
class FirstController extends Controller {
      public function test1() { return 'OK'; }
}
class SecondController extends Controller {
      public function callTest1() { First::test1(); }
} 
```

--> 服务器错误
帮我解决它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T10:45:49.007

您不能直接调用该方法，因为它不是`static`，所以您必须先创建一个实例`FirstController`。当您想这样做时，请使用[`CWebApplication::createController`](http://www.yiiframework.com/doc/api/1.1/CWebApplication#createController-detail)：

```
// supply appropriate route in place of 'first/index'
list($first) = Yii::app()->createController('first/index');
$first->test1(); 
```

但是，不需要从另一个控制器调用方法；这是一种不好的代码气味。也许重构您的代码并将其从控制器中拉出（也许进入模型）会更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-10T11:45:36.127

调用 createController() 时不应使用“控制器”一词，并且应在调用函数之前获取结果的 [0] 元素

```
 $process = Yii::app()->createController('First'); //create instance of FirstController
 $process=$process[0];
 $process->test1(); //call function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-14T07:38:19.667

在 Yii2 基本应用程序中，以下组件将用于调用动作

```
Yii::$app->runAction('controllername/create', $params); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-07T14:12:24.847

您也可以使用`Yii::$app->runAction()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-28T07:30:59.910

您不能直接调用您的函数：首先创建控制器实例，然后调用函数：

```
$process = Yii::app()->createController('FirstController'); //create instance of controller

$process->test1(); //call function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-28T08:30:04.330

如果`test1`您`FirstController`的方法没有使用`$this`，您可以简单地制作它`static`。代替：

```
public function test1() { return 'OK'; } 
```

签名为：

```
public static function test1() { return 'OK'; } 
```

然后你可以从任何地方调用它：

```
FirstController::test1(); 
```

这一切都取决于您的需求...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-06T00:35:29.130

在通过代码调用时，最好使用 createControllerByID，而不是使用基于路由创建实例的 createController。

```
 $first = Yii::$app->createControllerByID('first');
    $first->test1(); 
```

确保 test1 是公共功能

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-08T11:28:28.177

这对我有用，

对于 PatientController 和方法 printPublicReport()，$params = $patientId, $appId, $testIds

```
 list($patient) = Yii::$app->createController('patients/print-public-report', $postDataAry); 

    $patient->printPublicReport($patientId, $appId, $testIds); 
```

# javascript - javascript单选按钮不起作用？

> ID：10718308
> 
> 赞同：0
> 
> 时间：2012-05-23T10:41:34.733
> 
> 标签：javascript, firefox, radio-button

我将输入类型收音机的属性添加为已检查 =“已检查”，在查看源中它显示但未反映在浏览器中。

编辑
`<input type="radio" name="status" value="Yes" checked="checked"/>
<input type="radio" name="status" value="No" />`

当检查萤火虫时，它显示checked="checked"，如上所示，但浏览器仍然没有检查任何按钮。

可能是什么原因？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:53:51.583

该`checked`属性设置*默认*选中状态，而不是当前状态。

将`checked`DOM 属性设置为`true`或`false`。

```
document.getElementById('for_example').checked = true; 
```

# blackberry - 如何在黑莓中使用字符串子序列方法？

> ID：10718316
> 
> 赞同：0
> 
> 时间：2012-05-23T10:41:51.767
> 
> 标签：blackberry

我想在黑莓中使用 String 的 subsequence 方法，该方法在 java API 中给出，但在 Blackberry API 中不存在。这是方法：

```
String.subSequence(int beginIndex, int endIndex) 
```

我想使用那个方法，所以如果我不能访问那个 API 怎么可能。您能否在 Blackberry 中发布带有代码/api 的代码/url，它将执行与子序列方法相同的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:20:52.810

Java SE`subSequence`是在 java.lang.String 中实现的，因为 String 是用来实现`CharSequence`接口的。如果您阅读[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#subSequence%28int,%20int%29)，它会说：

> *调用这种形式为 str.subSequence(begin, end) 的方法的行为与调用 str.substring(begin, end) 的行为方式完全相同。定义此方法是为了使 String 类可以实现 CharSequence 接口。*

`CharSequence`所以在 BlackBerry 中，由于它是在 Java 1.4 中引入的，因此没有接口，您可以使用它`substring`来代替，结果相同。

# jquery - 通过 jQuery 刷新部分 DOM

> ID：10718317
> 
> 赞同：1
> 
> 时间：2012-05-23T10:41:54.227
> 
> 标签：jquery

是否可以通过 jQuery 刷新部分 DOM？

我正在使用拖放，当一个 div 被丢弃时，我需要更新 dom，以便可以通过 dom 访问丢弃的项目新位置。

顺便说一句，我不是在寻找有关 jQuery 拖放的任何信息

因此，例如，只需刷新特定 ? 中包含的所有元素`<div>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:46:28.023

我认为您需要做的是在要填充此元素时调用的服务器上编写一个独特的脚本，然后调用：

```
$('#element').load('your_script.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:52:57.243

您需要使用以下方式获取需要刷新的页面的特定元素：

```
var newcontent = $.get(currentPagesURL + "#some-a-tag"); 
```

然后将其内容替换为：

```
$('#some-a-tag').html(newcontent); 
```

但是我的 jQuery 有点生疏了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:04:49.097

你试过“开”吗？

在“droppable” div 上（假设它被称为“drop-div”）

```
$(document).on('drop','#drop-div',function() { // Drop is an event fired by UI droppable
//do your thang.
}); 
```

# java - 如何使用 SWT 创建新控件（文本 + 按钮）？

> ID：10718320
> 
> 赞同：0
> 
> 时间：2012-05-23T10:42:07.380
> 
> 标签：java, swt

我正在使用 SWT，我想创建一个新控件，其中包括一个文本（org.eclipse.swt.widgets.Text）和一个按钮（org.eclipse.swt.widgets.Button），文本在左侧，按钮在右侧。

我花了很多努力寻找一个例子，但我没有找到......谁能给我一个很好的例子？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:34:57.600

你可以通过扩展来做到这一点`Composite`。在复合材料中，您可以根据需要使用所需的布局添加任何小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:36:05.473

你可以看看CCombo类。CCombo 模仿 Combo 小部件。CCombo 是查看自定义小部件设计的好例子。

# opencv - 英特尔 IPP 或 OpenCV

> ID：10718323
> 
> 赞同：2
> 
> 时间：2012-05-23T10:42:11.943
> 
> 标签：opencv, image-processing, intel-ipp

我想专攻图像和视频处理。哪个库更适合信号处理，英特尔 IPP 或 OpenCV？它们之间有什么区别？

Adem Metin Çalı

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-08T19:51:00.220

您可能不需要选择其中之一。如果您安装了 IPP，那么您可以编译 OpenCV 以在内部调用 IPP。我认为 OpenCV 编译器标志是`USE_IPP`.

您可以调查您想要使用的 OpenCV 功能是否可以利用 IPP 后端。

如果您告诉我们更多关于您正在构建的内容，我可以就 IPP、OpenCV 或两者的某种混合提供更详细的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T04:23:28.417

对我来说，这似乎不是一个非此即彼的情况。

[您可以直接从英特尔人员那里检查差异以及它们如何协同工作。](http://software.intel.com/en-us/articles/intel-integrated-performance-primitives-intel-ipp-open-source-computer-vision-library-opencv-faq#1)

对于我们中的一些人来说，虽然**OpenCV 是免费的，但 IPP 不是**。（当我检查许可证时约为 200 美元。）但是它涵盖了图像/视频处理以外的领域（例如，它还涵盖了声音处理和密码学）。

# sed - sed 删除行中除前 5 个以外的剩余字符

> ID：10718326
> 
> 赞同：7
> 
> 时间：2012-05-23T10:42:16.790
> 
> 标签：sed, character, line

使用 sed 删除除前 5 个前导字符外的所有字符的 sed 命令是什么？我已经尝试过“倒退”（恢复删除），但这不是最优雅的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T13:09:09.123

这可能对您有用（GNU sed）：

```
echo '1234567890' | sed 's/.//6g'
12345 
```

或者：

```
echo '1234567890' | cut -c-5
12345 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T11:00:36.817

试试这个（在行首重复 5 次 'any' 字符并将其保存在第一组中，然后重复任意次数的任何字符，并将匹配的字符串替换为第一组）：

```
sed 's/^\(.\{5\}\).*/\1/' 
```

或 mouviciel 建议的替代方案：

```
sed 's/^\(.....\).*/\1/' 
```

（只要您想要的第一个字符的数量不会变得太大，它就更具可读性）

# ios - UILabel：我怎样才能改变除底部之外的所有边框？

> ID：10718328
> 
> 赞同：1
> 
> 时间：2012-05-23T10:42:27.307
> 
> 标签：ios, uilabel, border

我知道我可以用

```
item.layer.cornerRadius = floatValue;
item.layer.borderWidth = intValue;
item.layer.borderColor = colorValue; 
```

但是我怎样才能只改变上、左、右边框呢？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:59:00.503

我不认为你可以直接这样做。

[对这个问题](https://stackoverflow.com/questions/7022656/calayer-add-a-border-only-at-one-side)有几个回答可能会有所帮助，包括一个链接到一些解决问题的[开源代码的回答。](https://github.com/adam-siton/AUISelectiveBordersView)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:00:48.027

您*可以使用*另一层来掩盖您不想看到的角落。这有一个缺点，你：

*   不能有影子
*   不能有另一个面具（如果你不一起做）
*   由于边框是在边框的中心抚摸的，因此会松开边框宽度的一半

如果这对您来说没问题，这里有一个示例代码可以帮助您入门

```
CGFloat borderWidth = 4.0;
[[myView layer] setBorderWidth:borderWidth];

CALayer *mask = [CALayer layer];
// The mask needs to be filled to mask
[mask setBackgroundColor:[[UIColor blackColor] CGColor]];
// Make the masks frame smaller in height
CGRect maskFrame = CGRectInset([myView bounds], 0, borderWidth);
// Move the maskFrame to the top
maskFrame.origin.y = 0;
[mask setFrame:maskFrame];
[[myView layer] setMask:mask]; 
```

# c# - 以对象为数据源的 RDLC

> ID：10718334
> 
> 赞同：1
> 
> 时间：2012-05-23T10:42:38.417
> 
> 标签：c#, winforms, reportviewer, objectdatasource

我试图从我的类对象中显示一个 rdlc 报告

这是课程

```
public class BillInfo
{
    public String Name { get; set; }
    public String Date { get; set; }
    public String splInstructions { get; set; }
    public List<OrderItem> oItems { get; set; }
    public String GrossTotal { get; set; }
    public String DiscountAmount { get; set; }
    public String NetTotal { get; set; }
}

public class OrderItem
{
    public OrderItem() { }
    public OrderItem(String sNo, String Qty, String Amt, String ttl) 
    {
        this.SNo = sNo;
        this.Quantity = Qty;
        this.Amount = Amt;
        this.Total = ttl;
    }

    public String SNo { get; set; }
    public String Quantity { get; set; }
    public String Amount { get; set; }
    public String Total { get; set; }
} 
```

现在我在数据源窗口中添加类**BillInfo**的数据源对象并添加了一个报表查看器，现在当我尝试将数据源值添加为账单信息类的对象时，它给了我这个奇怪的错误

```
this.BillDataViewer.LocalReport.ReportPath = "C:/Users/Guest1/Desktop/Billinator/Billinator/MainReport.rdlc";
this.BillDataViewer.LocalReport.DataSources.Add(new ReportDataSource("BillInfo", MainForm.GetBillData()));
this.BillDataViewer.RefreshReport(); 
```

我添加数据源的第二行给了我这个错误

```
Value does not fall within the expected range. 
```

" 在 Microsoft.Reporting.WinForms.ReportDataSource.set_Value(Object value)\r\n 在 Billinator.ReportViewer.ReportViewer_Load(Object sender, EventArgs e) 在 C:\Users\Guest1\Desktop\Billinator\Billinator\ReportViewer.cs:第 23 行\r\n 在 System.Windows.Forms.Form.OnLoad(EventArgs e)\r\n 在 System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)\r\n 在 System.Windows.Forms.Control .CreateControl()\r\n 在 System.Windows.Forms.Control.WmShowWindow(Message& m)\r\n 在 System.Windows.Forms.Control.WndProc(Message& m)\r\n 在 System.Windows.Forms .Control.ControlNativeWindow.WndProc(Message& m)\r\n at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)"

请建议我哪里出错了

# drupal-7 - 通过媒体浏览器处理 zip 文件

> ID：10718337
> 
> 赞同：1
> 
> 时间：2012-05-23T10:42:43.600
> 
> 标签：drupal-7, zip, wysiwyg, media

我正在使用媒体模块与媒体浏览器的所见即所得集成。

我需要创建一个新的文件类型（比如 zip）并为这种文件类型自定义格式化程序。因此，每当通过媒体浏览器上传 zip 文件时，我希望它与“zip”文件类型相关联，并且应该将格式化程序应用于用户选择的文件。

试图寻找一些教程，但没有太多帮助。有人可以指导我完成这个吗？

谢谢。

# ruby-on-rails - 如何从另一个部分布局内部正确呈现部分布局中的集合？

> ID：10718340
> 
> 赞同：0
> 
> 时间：2012-05-23T10:42:47.797
> 
> 标签：ruby-on-rails, partial, yield

我有一个购物车，我想在我的应用程序中以 3 种不同的方式呈现。

1.  在侧边栏中。仅显示购物车中的商品数量及其总价。
2.  在购物车主视图中。显示带有每个项目的产品、数量和总价链接的行项目。还显示增加/减少商品数量的按钮和从购物车中删除商品的按钮。
3.  在订单视图中，显示购物车内容的方式与主购物车视图相同，除了指向产品的链接、更改数量的按钮和“删除”按钮。

到目前为止，我这样渲染购物车：

`carts/_cart.html.erb`

```
<%= yield %> 
```

购物车侧边栏布局`carts/_sidebar.html.erb`

```
<ul>
  <li class="nav-header">Your Cart (<%= pluralize(@cart.total_items, "Item") %>)</li>
  <li>Total Due: <%= number_to_euro(@cart.total_price) %></li>
  <% unless @cart.line_items.empty? %>
  <li><%= link_to "View Cart & Checkout", cart_path(@cart) %></li>
  <li><%= link_to "Empty Cart", @cart, :method => :delete %></li>
  <% end %>
</ul> 
```

由`layouts/_sidebar.html.erb`_`<%= render :partial => 'carts/cart', :layout => 'carts/sidebar' %>`

购物车主布局`carts/_main.html.erb`

```
<table>
  <tr>
    <th>Product</th>
    <th>Quantity</th>
    <th>Price</th>
    <th>Subtotal</th>
    <th></th>
  </tr>
  <%= render @line_items %>
  <tr id="total_line">
    <td colspan="3">Total:</td>
    <td><%= number_to_euro(@cart.total_price) %></td>
    <td></td>
  </tr>
</table> 
```

哪个是从`carts/show.html.erb`

```
<h1><%= pluralize(@cart.total_items, "Item") %> in Your Cart</h1>
<%= render :partial => 'cart/cart', :layout => 'carts/main' %>
<%= link_to "Empty Cart", @cart, :method => :delete %>
<%= link_to "Checkout", new_order_path %> 
```

还有`carts/_order.html.erb`一个当前`orders/new.html.erb`以与购物车主视图相同的方式呈现。

我想要做的是创建 2 个不同的布局来呈现来自`carts/show.html.erb`和的行项目`orders/new.html.erb`。为此，我`<%= yield %>`有`line_items/_line_item.html.erb`

购物车主布局的行项目布局`line_items/_main.html.erb`

```
<tr>
  <td><%= link_to "#{line_item.product.brand.name} #{line_item.product.title}", product_path(line_item.product) %></td>
  <td>
    <%= link_to "-", decrement_line_item_path(line_item), :method => :post %>
    <%= line_item.quantity %>
    <%= link_to "+", increment_line_item_path(line_item), :method => :post %>
  </td>
  <td><%= number_to_euro(line_item.product.price) %></td>
  <td><%= number_to_euro(line_item.total_price) %></td>
  <td><%= link_to "Remove"), line_item, :method => :delete %></td>
</tr> 
```

以及用于新订单视图的类似订单项布局`line_items/_order.html.erb`

```
<tr>
  <td><%= "#{line_item.product.brand.name} #{line_item.product.title}" %></td>
  <td><%= line_item.quantity %></td>
  <td><%= number_to_euro(line_item.product.price) %></td>
  <td><%= number_to_euro(line_item.total_price) %></td>
</tr> 
```

这就是问题开始的地方。我不明白如何呈现集合。`carts/_main.html.erb`我尝试这样渲染订单项

```
<%= render :partial => 'line_items/line_item', :layout => 'line_items/main', :collection => @line_items %> 
```

从`carts/_order.html.erb`这样

```
<%= render :partial => 'line_items/line_item', :layout => 'line_items/order', :collection => @line_items %> 
```

但是我在 Carts#show 中遇到 LocalJumpError

```
Showing app/views/line_items/_line_item.html.erb where line #1 raised:

no block given (yield) 
```

任何其他 :collection 名称都不会呈现任何内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:58:33.907

好吧，我明白我做错了什么。首先，错误消息`no block given (yield)`意味着没有什么可以让步。其次，在这种情况下渲染局部时不需要使用 :layout 。

`layouts/_sidebar.html.erb`只需调用即可渲染购物车`<%= render :partial => 'carts/sidebar' %>`。

有一件事我不知道。当使用集合渲染部分时，:partial name 的第二部分成为该集合内的局部变量名称。

这是主购物车视图 ( `carts/_cart.html.erb`) 的部分内容：

```
<table>
  <tr>
    <td>Product</th>
    <td>Price</th>
    <td>Quantity</th>
    <td>Subtotal</th>
    <td></th>
  </tr>
  <%= render :partial => 'line_items/cart_item', :collection => @line_items %>
  <tr>
    <td colspan="3">Total:</td>
    <td><%= number_to_euro(@cart.total_price) %></td>
    <td></td>
  </tr>
</table> 
```

可以由`<%= render @cart %>`. 注意名称中的`/cart_item`部分`:partial`。这就是我们在 中引用集合项的方式`line_items/_cart_item.html.erb`：

```
<tr>
  <td><%= link_to "#{cart_item.product.brand.name} #{cart_item.product.title}", product_path(cart_item.product) %></td>
  <td><%= number_to_euro(cart_item.product.price) %></td>
  <td>
    <%= link_to "-"), decrement_line_item_path(cart_item), :method => :post %>
    <%= cart_item.quantity %>
    <%= link_to "+"), increment_line_item_path(cart_item), :method => :post %>
  </td>
  <td><%= number_to_euro(cart_item.total_price) %></td>
  <td><%= link_to "Remove"), cart_item, :method => :delete %></td>
</tr> 
```

与 Orders 控制器中显示的购物车相同。`carts/_order.html.erb`：

```
...
<%= render :partial => 'line_items/order_item', :collection => @line_items %>
... 
```

`line_items/_order_item.html.erb`：

```
<tr>
  <td><%= "#{order_item.product.brand.name} #{order_item.product.title}"%></td>
  <td><%= number_to_euro(order_item.product.price) %></td>
  <td>&times; <%= order_item.quantity %></td>
  <td><%= number_to_euro(order_item.total_price) %></td>
  <td></td>
</tr> 
```

希望这一切都有意义。

# javascript - 添加更多按钮，在表格底部添加一行

> ID：10718343
> 
> 赞同：1
> 
> 时间：2012-05-23T10:43:13.127
> 
> 标签：javascript, jquery, html

我有这样的表：

```
<table id="myTable" border="1">
  <tbody>
    <tr><td>Name</td></tr>
    <tr><td><input name="field-1" type="text" /></td></tr>
    <tr><td><input name="field-2" type="text" /></td></tr>
  </tbody>
</table> 
```

我想要一个添加更多按钮，所以每次我们单击添加更多按钮时，它都会添加一个具有唯一名称的新行，例如

```
<tr><td><input name="field-3" type="text" /></td></tr>
<tr><td><input name="field-4" type="text" /></td></tr> 
```

请提出解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:45:08.780

```
$('button#add_more').on('click', function() {
    var table = $('table#myTable tbody'),
        len = $('input[type=text]', table).length;
  table.append('<tr><td><input name="field-'+ (len+1)+'" type="text" /></td></tr>');
}) 
```

​</p>

**[DEMO](http://jsfiddle.net/xFmHw/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:50:52.690

演示 :: [http://jsfiddle.net/ankur20us/MTXhZ/](http://jsfiddle.net/ankur20us/MTXhZ/)

```
$('#click').click(function(){
    var totRows=$('#myTable tr').length;

    $('#myTable').append("<tr><td><input name='field-"+ totRows +"' type='text' /></td></tr>")

});​ 
```

# sql - SQL Server 视图定义中的奇怪字符 (�)

> ID：10718344
> 
> 赞同：0
> 
> 时间：2012-05-23T10:43:14.147
> 
> 标签：sql, sql-server, tsql, encoding, views

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:46:23.707

您需要以与编写脚本相同的编码来阅读脚本。即使那样，如果您的编辑器的字体不包含字符的字形，它可能仍然无法正确显示。

创建脚本时，您是选择编码还是接受默认编码？如果是后者，您需要找出使用了哪种编码。UTF-8 是可能的。

但是，在这种情况下，该字符可能不是错误表示。[Unicode 替换字符](http://www.fileformat.info/info/unicode/char/fffd/index.htm)解释了这个字符被用来替换一些其他无法表示的字符。在您的情况下，您正在查看的代码可能只是在说，如果我们有一些无法表示的数据，请将其视为连字符。换句话说，这可能与脚本生成/查看过程无关，而是一段经过深思熟虑的代码。

# android - 编辑文本的触摸事件上的日期选择器对话

> ID：10718348
> 
> 赞同：1
> 
> 时间：2012-05-23T10:43:31.350
> 
> 标签：android, date

我在下面附上了我的代码。我想在编辑文本的触摸事件事件上获得日期选择器的对话。我没有收到任何错误，但也没有收到任何日期对话。

请帮助我哪里错了。提前感谢。

```
String TAG = "AdvancedSearchActivity";
EditText txtArrCity, txtDepCity, txtDate, txtTime;
public String year, month, day;
public static final int DATE_DIALOG_ID = 1;
// OnDateSetListener dateListener;
String DATE;

/*
 * (non-Javadoc)
 * 
 * @see android.app.Activity#onCreate(android.os.Bundle)
 */
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.advance_search);

    txtArrCity = (EditText) findViewById(R.id.edittxt_ArrCity);
    txtDepCity = (EditText) findViewById(R.id.edittxt_DepCity);
    txtDate = (EditText) findViewById(R.id.edittxt_Date);
    txtTime = (EditText) findViewById(R.id.edittxt_Time);

    Calendar cal = Calendar.getInstance();
    year = String.valueOf(cal.get(Calendar.YEAR));
    month = String.valueOf(cal.get(Calendar.MONTH));
    day = String.valueOf(cal.get(Calendar.DAY_OF_MONTH));

    Log.i(TAG, "Year" + year);
    Log.i(TAG, "month" + (month + 1));
    Log.i(TAG, "Day" + day);
    updateDate();

    txtDate.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            showDialog(DATE_DIALOG_ID);
            Log.i(TAG, "Inside On touch");
            return false;
        }
    });

}

protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
        return new DatePickerDialog(TabSample.tabcontext,
                dateListener, Integer.parseInt(year),
                Integer.parseInt(month), Integer.parseInt(day));

    }
    return null;

}

// the callback received when the user "sets" the date in the dialog
private DatePickerDialog.OnDateSetListener dateListener = new DatePickerDialog.OnDateSetListener() {
    @Override
    public void onDateSet(DatePicker view, int years, int monthOfYear,
            int dayOfMonth) {
        // TODO Auto-generated method stub
        year = String.valueOf(years);
        month = String.valueOf(monthOfYear);
        day = String.valueOf(dayOfMonth);
        updateDate();
    }
};

private void updateDate() {

    month = String.valueOf((Integer.parseInt(month) + 1));
    if ((Integer.parseInt(month)) < 10) {
        Log.i(TAG, "@@@@@ month" + month);
        month = "0" + month;
        Log.i(TAG, "@@@@@ AFTER month" + month + " MONTH S" + month);
    }
    day = String.valueOf(day);
    if ((Integer.parseInt(day)) < 10) {
        day = "0" + day;
    }
    DATE = year + "-" + month + "-" + day;

    Log.i(TAG, "DATE : " + DATE);
    txtDate.setText(DATE);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T11:00:22.293

像这样试试

```
 public class name extends Activity {   
     private EditText dob;
        static final int DATE_DIALOG_ID = 0;
        @Override
            protected Dialog onCreateDialog(int id) {
                Calendar c = Calendar.getInstance();
                int cyear = c.get(Calendar.YEAR);
                int cmonth = c.get(Calendar.MONTH);
                int cday = c.get(Calendar.DAY_OF_MONTH);
                switch (id) {
                case DATE_DIALOG_ID:
                    return new DatePickerDialog(this,  mDateSetListener,  cyear, cmonth, cday);
                }
                return null;
            }
            private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
                // onDateSet method
                public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
                    String date_selected = String.valueOf(dayOfMonth)+" /"+String.valueOf(monthOfYear+1)+" /"+String.valueOf(year);
                    //Toast.makeText(getApplicationContext(), "Selected Date is ="+date_selected, Toast.LENGTH_SHORT).show();
                    dob.setText(date_selected);
                }
            };
        @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.bankregform);
            dob=(EditText)findViewById(R.id.dob);
        /* For DOB EditText*/
                dob.setOnTouchListener(new OnTouchListener(){ 
                    public boolean onTouch(View v, MotionEvent event) { 
                        if(v == dob)
                            showDialog(DATE_DIALOG_ID);
                        return false;              
                    }
                });
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T10:53:50.213

试试这个...`activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusableInTouchMode="false"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="36dp"
    android:layout_marginTop="36dp"
    android:ems="10"
    android:inputType="date" />

 </RelativeLayout> 
```

MainActivity.java

```
import java.sql.Date;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.DatePicker;
import android.widget.EditText;

public class MainActivity extends Activity {
static final int DATE_DIALOG_ID = 0;
private int mYear,mMonth,mDay;
EditText editText;

@SuppressWarnings("deprecation")
@SuppressLint("SimpleDateFormat")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Calendar c=Calendar.getInstance();
    mYear=c.get(Calendar.YEAR);
    mMonth=c.get(Calendar.MONTH);
    mDay=c.get(Calendar.DAY_OF_MONTH);
    //String dateFormat = "dd/MM/yyyy";
    editText = (EditText) findViewById(R.id.text);
    SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
    editText.setText( sdf.format(c.getTime()));

    editText.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            showDialog(DATE_DIALOG_ID);

        }
    });

  }
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this,
                        mDateSetListener,
                        mYear, mMonth, mDay);

        }

        return null;

    }

 private DatePickerDialog.OnDateSetListener mDateSetListener =    new    DatePickerDialog.OnDateSetListener() 
     {

        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;

editText.setText(new StringBuilder().append(mDay).append("/").append(mMonth+1).append("/").append(mYear));
        }

    };

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

`

# .net - Xml Deserialization - XmlElement wildcard in ElementName

> ID：10718352
> 
> 赞同：1
> 
> 时间：2012-05-23T10:43:58.773
> 
> 标签：.net, xml, wildcard, xml-deserialization

I'm trying to deserialize an external xml into an object. I have no control whatsoever on this xml.

Here's an example:

```
<response>
 <date>2012-05-23 00:00:00</date>
 <users>
  <userObject0>
   <name>John</name>
   <surname>Smith</surname>
  </userObject0>
  <userObject1>
   <name>Jane</name>
   <surname>Doe</surname>
  </userObject1>
 </users>
</response> 
```

I have no idea why it is done this way, and I cannot figure out how I can deserialize that xml to get an array of userObject.

Is it even possible?

**EDIT: Note that the project I'm working is in .net 2.0**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:59:09.020

如果数据不“适合” `XmlSerializer`，那么：不要使用`XmlSerializer`. 使用 xml 处理器，例如`XmlDocument`or `XDocument`，例如：

```
 var response = XElement.Parse(xml);
    var users = (from user in response.Element("users").Elements()
                 select new User {
                     Name = (string) user.Element("name"),
                     Surname = (string) user.Element("surname")
                 }).ToList() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T22:42:20.197

您可以使用 XmlSerializer 反序列化：

```
 // Remove numbers from userObject tags
    var xmlStringReplaced = Regex.Replace(xmlString, "<(/?)userObject[0-9]+>", "<$1userObject>");
    // XmlDeserialize the new XML string to a Response object
    var stringReader = new StringReader(xmlStringReplaced);
    var xmlSerialize = new XmlSerializer(typeof(Response), new XmlRootAttribute("response"));
    var response = (Response)xmlSerialize.Deserialize(stringReader); 
```

以及要反序列化为的类型：

```
public class Response
{
    [XmlIgnore]
    public DateTime Date { get; set; }

    [XmlElement("date")]
    public String DateXmlTemp
    {
        get { return Date.ToString("yyyy-MM-dd HH:mm:ss"); }
        set { Date = DateTime.Parse(value); }
    }

    [XmlArray("users")]
    [XmlArrayItem("userObject")]
    public List<UserObject> Users { get; set; }
}

public class UserObject
{
    [XmlElement("name")]
    public String Name { get; set; }

    [XmlElement("surname")]
    public String Surname { get; set; }
} 
```

如果您想在 userObject 标签中使用数字，您可以更改 Regex.Replace 以将其作为属性添加到标签中，然后使用 XmlAttribute("id") 属性将属性添加到 UserObject 类。

# c# - Validate dropdown from custom control in page

> ID：10718353
> 
> 赞同：0
> 
> 时间：2012-05-23T10:43:59.420
> 
> 标签：c#, asp.net

I have a custom control included in a form that includes a dropdown list. The form has a number of other required fields, so i was wondering how to validate this dropdown.

```
<gaia:TextBox ID="TitleTextBox" runat="server"/>
<gaia:RequiredFieldValidator runat="server" ControlToValidate="TitleTextBox"
                    ErrorMessage="Please fill in the press release title" Text="*" Display="None" ValidationGroup="save" />

<CN:ProductCategoryDropDown runat="server" ID="ProductCategoryDropDown" />
<gaia:CustomValidator runat="server" ID="ProductCategoryValidator" OnServerValidate="ProductCategory_Validate" ValidationGroup="save" 
                    Display="None" Text="*" ErrorMessage="Please select a category"  /> 
```

the code behind looks like this

```
protected void ProductCategory_Validate(object source, ServerValidateEventArgs args)
{
    args.IsValid = (ProductCategoryDropDown.SelectedValue>0);
} 
```

On the customvalidator above, I purposely left out the 'ControlToValidate' because it throws an error.

Please help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:49:52.673

最简单的方法是`CustomValidator`在`UserControl`.

然后，您可以为 Validation-Group 和另一个属性提供一个属性`ValidatorEnabled`来设置验证器组并启用/禁用验证器。

# java - prevent period intersection in concurrent insert

> ID：10718356
> 
> 赞同：2
> 
> 时间：2012-05-23T10:44:26.853
> 
> 标签：java, sql, db2

I have a table with fields: name|...|start_date|end_date

My code now is:

```
select .... 'check for period intersection
insert .... 'if check succesfull insert new row 
```

This code in one transaction. When two users try to insert new record in the same time with same fields(and periods intersects) two records inserted. But I want to avoid that inserting. First user must insert, other user must get conflict. How can I do it ?

P.S. I use IBM DB2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:05:58.797

结合一些错误提示，听起来[`MERGE`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0010873.html)正是您想要的。我假设您在 Linux/Unix/Windows 上使用 DB2，但`MERGE`自 v9.1 以来也一直在大型机 DB2 上。

```
MERGE INTO YOUR_TABLE YT
USING (
        VALUES ('val1', 'val2', 'val3')
    ) MG(v1, v2, v3)
 ON (TY.v1 = MG.v1)
WHEN MATCHED 
    SIGNAL SQLSTATE '70001'
    SET MESSAGE_TEXT = 'Record already exists!'
WHEN NOT MATCHED THEN
   INSERT(v1, v2, v3)
   VALUES(MG.v1, MG.v2, MG.v3
ELSE IGNORE; 
```

该`USING`子句可以与提供的值一起使用（就像我在这里一样），或者它可以是一个子选择。我在上面链接的信息中心的合并页面上还有其他示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:52:04.433

您可以使用英国或选择更新：

```
select .... 'check for period intersection FOR UPDATE WITH RS USE AND KEEP UPDATE LOCKS 
```

更新：尝试在选择之前锁定整个表：

```
LOCK TABLE TABLE_NAME IN EXCLUSIVE MODE 
```

这样，第二个事务在选择之前等待前一个事务提交。EXCLUSIVE MODE 也会锁定 select 语句，而不仅仅是更新和插入。

更新 2：如果“检查期间交叉点”仅使用与您插入的表相同的表中的列，则不要选择向表中添加约束检查。请参阅[http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc%2Ft0004984.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc%2Ft0004984.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:03:52.193

插入从选择中获取数据的查询。在选择中选择的值将需要插入的数据。where 子句可以检查条件，如果检查失败，则应返回 null。所以如果我想输入 id 5 不在表中

```
 Insert into test1(val) select "test" from (select case when id = 5 then null else 5 end '1' from sysP where id =5) aa 
```

此查询将在表 test1 中插入*测试*id =5 is not there in sysP table

# php - Accessing Hadoop from PHP

> ID：10718357
> 
> 赞同：4
> 
> 时间：2012-05-23T10:44:27.777
> 
> 标签：php, hadoop, thrift, hdfs

I need to access from PHP the HDFS on a Hadoop system which uses **cloudera packages** in **version 0.20.2+923.256**.

There is a thrift server for the namenode which runs and also one for the job tracker. I have the following function for accessing the hdfs, but I get an unknown method "**listStatus**" error. The thrift server is used also by HUE interface to access the HDFS and the job tracker.

Can you help me please to access that HDFS from PHP? Does that thrift uses another API? I didn't find any specification for that API.

```
$socket = new TSocket(IP,PORT);
$socket->setSendTimeout(10000);
$socket->setRecvTimeout(20000);
$transport = new TBufferedTransport($socket);
$protocol = new TBinaryProtocol($transport);

$client = new ThriftHadoopFileSystemClient($protocol);
$transport->open();
$pathname = new Pathname(array('pathname' => $file));
$result = $client->listStatus($pathname);
echo($result[0]->path);        
$transport->close();
return $result; 
```

Many thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T13:22:46.760

你可以给你这个 api，它很有帮助 [https://github.com/simpleenergy/php-WebHDFS](https://github.com/simpleenergy/php-WebHDFS)

# java - ejb3 isolated (autonomous) transaction inside session bean

> ID：10718360
> 
> 赞同：2
> 
> 时间：2012-05-23T10:44:49.213
> 
> 标签：java, transactions, ejb, transaction-isolation

I'm using XA (2-phase) transaction. I want to log to one log-table through Log class and Entity Manager. My method inside EJB Session bean looks like:

```
private void logError(Throwable throwable) {
    LogEntity logEntity = new LogEntity();
    // Set everything
    entityManager.persist(logEntity);
} 
```

I want to it in isolated (autonomous) transaction independent of any "outer" transaction. I have already tried to add `@TransactionAttribute(value = TransactionAttributeType.REQUIRES_NEW)` and `@TransactionAttribute(value = TransactionAttributeType.NOT_SUPPORTED)` before method name and does not work.

Before I call EJB3 method I create user transaction like:

```
try {
    UserTransaction transaction = (UserTransaction)context.lookup("javax.transaction.UserTransaction");
    transaction.begin();
    // Call EJB3 method
    transaction.commit();
} catch (Throwable t) {
    t.printStackTrace();
    try {
        transaction.rollback();
    } catch (SystemException e) {
        e.printStackTrace();
    }
} 
```

I want to Log no matter if commit is done or not. How to?

Regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:31:52.833

事务属性仅在通过代理调用时才相关。它们不适用于直接调用，其中包括私有方法。尝试以下类似的操作（它使用 EJB 3.1 无接口视图，但如果您只有 EJB 3.0，您可以创建一个单独的本地接口用于日志记录）：

```
@Stateless
@Local(BusinessInterface.class)
@LocalBean
public class MyBean {
  @EJB MyBean logger;

  @TransactionAttribute(REQUIRED)
  public void businessMethod() {
    try {
      ...
    } catch (Throwable t) {
      logger.logError(t);
      ...
    }
  }

  @TransactionAttribute(NOT_SUPPORTED)
  public void logError(Throwable t) {
    ...
  }
} 
```

重要的一点是对 logError 的调用是通过注入的 EJB 代理发生的，它允许容器控制在`logError`方法期间暂停 XA 事务。

# c# - linq to Entity中where子句中的扩展方法

> ID：10718361
> 
> 赞同：6
> 
> 时间：2012-05-23T10:44:51.667
> 
> 标签：c#, entity-framework, linq-to-entities

在 linq to Entities 中，我们需要一种类似于“sql like”的方法。我们已经为 IQueryable 实现了自己的扩展方法，因为 contains 方法对我们不起作用，因为它不接受像 '%a%b%' 这样的模式

创建的代码是：

```
private const char WildcardCharacter = '%';

public static IQueryable<TSource> WhereLike<TSource>(this IQueryable<TSource> _source, Expression<Func<TSource, string>> _valueSelector, string _textSearch)
{
    if (_valueSelector == null)
    {
        throw new ArgumentNullException("valueSelector");
    }

        return _source.Where(BuildLikeExpressionWithWildcards(_valueSelector, _textSearch));
}

private static Expression<Func<TSource, bool>> BuildLikeExpressionWithWildcards<TSource>(Expression<Func<TSource, string>> _valueSelector, string _textToSearch)
{
    var method = GetPatIndexMethod();

    var body = Expression.Call(method, Expression.Constant(WildcardCharacter + _textToSearch + WildcardCharacter), _valueSelector.Body);

    var parameter = _valueSelector.Parameters.Single();
    UnaryExpression expressionConvert = Expression.Convert(Expression.Constant(0), typeof(int?));
    return Expression.Lambda<Func<TSource, bool>> (Expression.GreaterThan(body, expressionConvert), parameter);
}

private static MethodInfo GetPatIndexMethod()
{
    var methodName = "PatIndex";

    Type stringType = typeof(SqlFunctions);
    return stringType.GetMethod(methodName);
} 
```

这工作正常，代码完全在 SqlServer 中执行，但现在我们将在 where 子句中使用此扩展方法：

```
myDBContext.MyObject.Where(o => o.Description.Like(patternToSearch) || o.Title.Like(patterToSerch)); 
```

问题是 where 子句中使用的方法必须返回一个布尔结果，如果它与像 '||' 这样的运算符一起使用的话 ，而且我不知道如何使我创建的代码返回一个布尔值并保持代码在 sqlserver 中执行。我想我必须将 BuildLinqExpression 方法返回的表达式转换为布尔值，但我不知道该怎么做

总结一下！首先，是否可以在 Linq 中创建我们自己的扩展方法来执行 SqlServer 中的代码的实体？如果这是可能的，我该怎么做？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:52:02.940

不，您不能教育 EF 处理您的自定义扩展方法，即使您有构建可用于 EF 的表达式的*代码*。

任何一个：

*   `SqlFunctions`直接在 EF`Where`表达式中使用方法
*   使用 an`ExpressionVisitor`将多个表达式组合成一个复合 ( `OrElse`/ `AndAlso`) 表达式（请注意，这不会帮助您获得想要的代码，但它会让您使用您的两种方法并`||`在它们上执行 a - 它看起来很复杂）

第一个更简单，更清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:28:53.327

在这里回答：[https ://stackoverflow.com/a/10726256/84206](https://stackoverflow.com/a/10726256/84206)

His code: [http://pastebin.com/4fMjaCMV](http://pastebin.com/4fMjaCMV)

Allows you to tag an extension method as `[Expandable]` and so long as the expression it returns works with linq2entities, it will replace your function call with the inner expression. Note that inline lambdas give errors, so I had to declare them as local variables or static variable such as the `IsCurrent` variable here:

```
static Expression<Func<PropertyHistory, bool>> IsCurrent = (p) => p.Starts <= DateTime.Now;

[ExpandableMethod]
public static IQueryable<PropertyHistory> AsOf(this IQueryable<PropertyHistory> source)
{
  return source.Where(IsCurrent);
} 
```

# c# - 检查'T'是否继承或实现了一个类/接口

> ID：10718364
> 
> 赞同：106
> 
> 时间：2012-05-23T10:44:58.653
> 
> 标签：c#, generics

有没有办法测试 T 是否继承/实现了一个类/接口？

```
private void MyGenericClass<T> ()
{
    if(T ... inherits or implements some class/interface
} 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-05-23T10:50:55.760

有一个名为[Type.IsAssignableFrom()](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)的方法。

检查是否`T`继承/实现`Employee`：

```
typeof(Employee).IsAssignableFrom(typeof(T)); 
```

如果您的目标是 .NET Core，则该方法已移至 TypeInfo：

```
typeof(Employee).GetTypeInfo().IsAssignableFrom(typeof(T).Ge‌​tTypeInfo()) 
```

请注意，如果您想约束您的类型`T`以实现某个接口或从某个类继承，您应该选择@snajahi 的答案，该答案使用编译时检查，通常类似于解决此问题的更好方法。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-23T10:46:35.120

您可以在类上使用约束。

```
MyClass<T> where T : Employee 
```

看看[http://msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-03-27T12:31:21.757

如果您想在编译期间检查：如果`T` *没有*实现所需的接口/类，则错误，您可以使用以下约束

```
public void MyRestrictedMethod<T>() where T : MyInterface1, MyInterface2, MySuperClass
{
    //Code of my method here, clean without any check for type constraints.
} 
```

我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-07-29T14:49:48.043

正确的语法是

```
typeof(Employee).IsAssignableFrom(typeof(T)) 
```

# 文档

> **返回值：** `true`如果`c`和 current`Type`表示相同的类型，或者如果 current`Type`在 的继承层次结构中`c`，或者如果 current`Type`是`interface`实现的`c`，或者 if`c`是泛型类型参数并且 current`Type`表示的约束之一`c`，或者if`c`表示值类型，而 current`Type`表示`Nullable<c>`（`Nullable(Of c)`在 Visual Basic 中）。`false`如果这些条件都不是`true`，或者如果`c`是`null`。

[来源](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom(v=vs.110).aspx)

# 解释

如果`Employee IsAssignableFrom T`then`T`继承自`Employee`.

用途

```
typeof(T).IsAssignableFrom(typeof(Employee)) 
```

`true` **仅**当任一时返回

1.  `T`并`Employee`代表同一类型；或者，
2.  `Employee`继承自`T`。

*在某些*情况下，这可能是预期用途，但对于原始问题（以及更常见的用法），要确定何时`T`继承或实现某些`class`/ `interface`，请使用：

```
typeof(Employee).IsAssignableFrom(typeof(T)) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-11-25T17:46:33.963

每个人真正的意思是：

```
typeof(BaseType).IsAssignableFrom(typeof(DerivedType)) // => true 
```

因为您可以从字面上将 a 的实例*分配给*a`DerivedType`的实例`BaseType`：

```
DerivedType childInstance = new DerivedType();
BaseType parentInstance = childInstance; // okay, assigning base from derived
childInstance = (DerivedType) parentInstance; // not okay, assigning derived from base 
```

什么时候

```
public class BaseType {}
public class DerivedType : BaseType {} 
```

* * *

如果您无法理解它，还有一些具体的例子：

*（通过 LinqPad，因此`HorizontalRun`and `Dump`）*

```
void Main()
{
    // http://stackoverflow.com/questions/10718364/check-if-t-inherits-or-implements-a-class-interface

    var b1 = new BaseClass1();

    var c1 = new ChildClass1();
    var c2 = new ChildClass2();
    var nb = new nobase();

    Util.HorizontalRun(
        "baseclass->baseclass,child1->baseclass,baseclass->child1,child2->baseclass,baseclass->child2,nobase->baseclass,baseclass->nobase",
        b1.IsAssignableFrom(typeof(BaseClass1)),
        c1.IsAssignableFrom(typeof(BaseClass1)),
        b1.IsAssignableFrom(typeof(ChildClass1)),
        c2.IsAssignableFrom(typeof(BaseClass1)),
        b1.IsAssignableFrom(typeof(ChildClass2)),
        nb.IsAssignableFrom(typeof(BaseClass1)),
        b1.IsAssignableFrom(typeof(nobase))
        ).Dump("Results");

    var results = new List<string>();
    string test;

    test = "c1 = b1";
    try {
        c1 = (ChildClass1) b1;
        results.Add(test);
    } catch { results.Add("FAIL: " + test); }

    test = "b1 = c1";
    try {
        b1 = c1;
        results.Add(test);
    } catch { results.Add("FAIL: " + test); }

    test = "c2 = b1";
    try {
        c2 = (ChildClass2) b1;
        results.Add(test);
    } catch { results.Add("FAIL: " + test); }

    test = "b1 = c2";
    try {
        b1 = c2;
        results.Add(test);
    } catch { results.Add("FAIL: " + test); }

    results.Dump();
}

// Define other methods and classes here
public static class exts {
    public static bool IsAssignableFrom<T>(this T entity, Type baseType) {
        return typeof(T).IsAssignableFrom(baseType);
    }
}

class BaseClass1 {
    public int id;
}

class ChildClass1 : BaseClass1 {
    public string name;
}

class ChildClass2 : ChildClass1 {
    public string descr;
}

class nobase {
    public int id;
    public string name;
    public string descr;
} 
```

## 结果

> 基类->基类
> 
> 真的
> 
> child1->基类
> 
> 错误的
> 
> 基类->child1
> 
> 真的
> 
> child2->基类
> 
> 错误的
> 
> 基类->child2
> 
> 真的
> 
> nobase->基类
> 
> 错误的
> 
> 基类-> nobase
> 
> 错误的

和

> *   失败：c1 = b1
> *   b1 = c1
> *   失败：c2 = b1
> *   b1 = c2

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-06-17T20:29:51.083

我相信语法是：`typeof(Employee).IsAssignableFrom(typeof(T));`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-24T07:28:03.180

尽管 IsAssignableFrom 是其他人所说的最佳方法，但如果您只需要检查一个类是否从另一个类继承，`typeof(T).BaseType == typeof(SomeClass)`那么也可以完成这项工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-25T21:18:11.897

判断对象是`o`继承类还是实现接口的另一种方法是使用`is`and`as`运算符。

如果你只想知道一个对象是继承了一个类还是实现了一个接口，`is`操作符将返回一个布尔结果：

```
bool isCompatibleType = (o is BaseType || o is IInterface); 
```

如果您想在测试后使用继承的类或实现的接口，`as`运算符将执行安全强制转换，如果兼容则返回对继承类或实现的接口的引用，如果不兼容则返回 null：

```
BaseType b = o as BaseType; // Null if d does not inherit from BaseType.

IInterface i = o as IInterface; // Null if d does not implement IInterface. 
```

如果您只有 type `T`，请使用@nikeee 的答案。

# c# - 在单独的线程上显示 WPF-“NotifyIcon”

> ID：10718369
> 
> 赞同：3
> 
> 时间：2012-05-23T10:45:07.443
> 
> 标签：c#, wpf, winforms, vsto

我目前正在开发一个办公室插件，我需要显示一个显示进度的通知对话框，我正在使用[Philipp Sumi 的 wpf-notifyicon](http://www.codeproject.com/Articles/36468/WPF-NotifyIcon)。

我需要从一个单独的线程显示[通知图标](http://www.codeproject.com/Articles/36468/WPF-NotifyIcon)，因为我有很多代码已经在主线程上执行，这会导致 wpf-notifyicon 阻塞并等待，因为 Windows 消息队列中的消息没有被处理。

我知道我宁愿在单独的线程上执行这个耗时的代码，并从主线程显示通知图标并相应地更新它，但不幸的是，这不是一个替代方案，因为整个解决方案是单线程的。

例子：

```
 private FancyPopup fancyPopup;

    private void button1_Click(object sender, EventArgs e)
    {
        notifyIcon = new TaskbarIcon();
        notifyIcon.Icon = Resources.Led;

        fancyPopup = new FancyPopup();

        Thread showThread = new Thread(delegate()
        {
            notifyIcon.ShowCustomBalloon(fancyPopup, System.Windows.Controls.Primitives.PopupAnimation.Fade, null);
        });

        showThread.Start();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        fancyPopup.TextB.Text = "Doing something...";

        //Keep the main thread busy.
        Thread.Sleep(5000);

        fancyPopup.TextB.Text = "Done doing something...";
    } 
```

**更新** 我已经能够使用这个更新的代码进一步取得进展：

我正在新线程上创建 TaskbarIcon 对象，并使用 Application.Run 处理该线程上的应用程序消息循环...

```
 private FancyPopup fancyPopup;

    private void button1_Click(object sender, EventArgs e)
    {
        Thread showThread = new Thread(delegate()
        {
            notifyIcon = new TaskbarIcon();
            notifyIcon.Icon = Resources.Led;

            fancyPopup = new FancyPopup();

            notifyIcon.ShowCustomBalloon(fancyPopup, System.Windows.Controls.Primitives.PopupAnimation.Fade, null);

            System.Windows.Forms.Application.Run();
        });

        showThread.SetApartmentState(ApartmentState.STA);
        showThread.Start();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        fancyPopup.Dispatcher.Invoke(new Action(delegate
        {
            fancyPopup.TextB.Text = "Doing something...";
        }));

        //Keep the main thread busy.
        Thread.Sleep(5000);

        fancyPopup.Dispatcher.Invoke(new Action(delegate
        {
            fancyPopup.TextB.Text = "Done doing something..."; 
        }));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:24:17.263

我已经解决了我的问题，我必须在单独的 STA 线程上初始化**notifyIcon并使用****Application.Run**以便开始在该线程上发送 windows 消息。

```
 var myThread = new Thread(delegate()
        {
            notifyIcon = new NotifyIcon();

            Application.Run();
        });

        myThread.SetApartmentState(ApartmentState.STA);
        myThread.Start(); 
```

然后我只需要调用通知对话框的 UI。

# c# - c# Fluent NHibernate 一对多关系对象返回null

> ID：10718375
> 
> 赞同：0
> 
> 时间：2012-05-23T10:45:17.197
> 
> 标签：c#, fluent-nhibernate, automapper

真的想绕开这个问题，但看不到透过树木的光线。可能错过了一些明显的东西！

在数据库中，当我创建对象时，它可以在任何问题中使用，但是当我尝试列出值时，链接为空......

有两个对象，`Question`和`Response`。一个问题可以有很多回答，所以这里是模型：

```
public class Question
{
    public int Id { get; set; }
    public int QuestionNumber { get; set; }
    public string QuestionText { get; set; }
    public IList<Response> Responses { get; set; } 

    public Question()
    {
        Responses = new List<Response>();
    }
}

public class Response
{
    public int Id { get; private set; }
    public Question Question { get; set; }
    public int ResponseValue { get; set; }
    public string ResponseText { get; set; }
} 
```

这是映射：

```
public class QuestionMap : ClassMap<Question>
{
    public QuestionMap()
    {
        Id(q => q.Id);
        Map(q => q.QuestionNumber);
        Map(q => q.QuestionText).Length(300).Not.Nullable();
        HasMany<Response>(q => q.Responses).Inverse().AsBag();
    }
}

public class ResponseMap : ClassMap<Response>
{
    public ResponseMap()
    {
        Id(x => x.Id);
        References<Question>(x => x.Question).Not.Nullable();
        Map(x => x.ResponseText);
        Map(x => x.ResponseValue);
    }
} 
```

所以当我使用

```
var responses = _session.CreateCriteria(typeof(Response)).List<Response>(); 
```

并调试并查看 Question 对象，它始终为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:32:35.433

默认情况下，NHibernate 中的所有关系都是惰性的。所以你有两个选择。在您的响应映​​射中设置 Not.LazyLoad() 或 Fetch 策略，或者在查询数据库时执行 fetch。

```
var responses = _session.CreateCriteria(typeof (Response))
                .SetFetchMode("Responses", NHibernate.FetchMode.Eager)
                .List(); 
```

当您使用 .SetFetchMode(...) 时，您可能需要在响应的映射中设置获取策略。只需使用这两个设置 - 一次一个或两个

PS：顺便说一句，我很困惑 not.lazyload 和 fetch 究竟是如何工作的，并发布了一个关于此的问题。[FluentNHibernate：LazyLoad 和 Fetch](https://stackoverflow.com/questions/10717845/fluentnhibernate-lazyload-and-fetch)

# javascript - 将倒计时脚本的日期更改为世界时

> ID：10718378
> 
> 赞同：1
> 
> 时间：2012-05-23T10:45:31.290
> 
> 标签：javascript, jquery

我尝试将此[倒计时 jQuery 脚本](http://tutorialzine.com/2011/12/countdown-jquery)的日期格式从本地时间更改为 UTC，但更改后它不起作用。我什至在那里问过，但没有得到答案。

```
<script>
    $(function(){
        var note = $('#note'),
        ts = new Date.UTC(2012, 0, 1),

        $('#countdown').countdown({
            timestamp: ts,
            callback: function(days, hours, minutes, seconds) {
                var message = "";
                message += days + " day" + ", ";
                message += hours + " hour"  + ", ";
                message += minutes + " minutes"  + " & ";
                message += seconds + " seconds" + " <br />";
                message += "time left";         
                note.html(message);
            }
        });
    });
</script> 
```

我改变了这个：

```
ts = new Date(2012, 0, 1), 
```

进入

```
ts = new Date.UTC(2012, 0, 1), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:00:32.930

您在此脚本中有一些错误：

1)`...e.UTC(2012, 0, 1),`应该以`;`

2)`Date.UTC`不是构造函数。尝试：`new Date(Date.UTC(2012, 0, 1));`

进一步阅读：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/UTC](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/UTC)

# android - 如何在 Android 模拟器 4.0 中启用网络摄像头？

> ID：10718386
> 
> 赞同：1
> 
> 时间：2012-05-23T10:46:10.410
> 
> 标签：android, video, android-emulator, emulation, webcam

在我的应用程序中，我想使用相机选项，所以我使用下面的代码来捕捉视频。

```
 public class CameraDemoActivity extends Activity
      {
  private static final int CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE = 200;
  private Uri fileUri;
  public static final int MEDIA_TYPE_VIDEO = 2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Context context = this;
    PackageManager packageManager = context.getPackageManager();

    // if device support camera?
    if (packageManager.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        //yes
        Log.i("camera", "This device has camera!");
        Toast.makeText(getBaseContext(), "Camera device", Toast.LENGTH_LONG).show();

        Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

        fileUri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);  // create a file to save the video
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);  // set the image file name
        intent.putExtra(MediaStore.EXTRA_DURATION_LIMIT,2);
        intent.putExtra(MediaStore.INTENT_ACTION_VIDEO_CAMERA, true);
        intent.putExtra(MediaStore.MEDIA_SCANNER_VOLUME, 100);

        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1); // set the video image quality to high

        // start the Video Capture Intent
        startActivityForResult(intent, CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE);

    }else{
        //no
        Log.i("camera", "This device has no camera!");
        Toast.makeText(getBaseContext(), "No Camera device", Toast.LENGTH_LONG).show();
    }

}

private static Uri getOutputMediaFileUri(int type){
      return Uri.fromFile(getOutputMediaFile(type));
}

/** Create a File for saving an image or video */
private static File getOutputMediaFile(int type)
{
    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_DOWNLOADS), "MyCameraApp");

    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            System.out.println("MyCameraApp");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    File mediaFile;
    if(type == MEDIA_TYPE_VIDEO) 
    {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "VID_"+ timeStamp + ".mp4");
    }
    else 
    {
        return null;
    }

    return mediaFile;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            // Video captured and saved to fileUri specified in the Intent
            Toast.makeText(this, "Video saved to:\n" +
                     data.getData(), Toast.LENGTH_LONG).show();
            System.out.println("Video saved to:"+data.getData());
        } else if (resultCode == RESULT_CANCELED) {
            Toast.makeText(this, "video cancel", Toast.LENGTH_LONG).show();
            // User cancelled the video capture
        } else {
            System.out.println("video capyured failed.>.1!!!!");
            // Video capture failed, advise user
        }
    }
} 
```

}

在上面的代码中，我在模拟器中获得了视频屏幕，但它就像录制为方块一样，这是黑色和白色的盒子......!!!!!!!!!!!!

在模拟器中，我无法获取实时视频，也无法启用网络摄像头。

有趣的是，此代码已在另一台计算机（戴尔网络摄像头）上成功运行。在该机器中，它启用网络摄像头并非常缓慢地录制视频，但这是在模拟器中识别和启用摄像头。

另一台机器是 Compaq，不幸的是它无法工作并且无法识别网络摄像头。

请任何帮助以激活此网络摄像头设施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T07:14:48.793

旧线程，但只是为解决此问题的任何人添加信息。您需要做的就是通过命令行替换您要使用相机的 avd 来启动模拟器：

```
emulator -camera-front webcam0 -avd <your_avd_name> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:55:04.463

[Tom Gibara 的教程](http://www.ecole.ensicaen.fr/~reynaud/android/webcam_in_android_emulator.html)有一个更新版本。您可以将 Webcam Broadcaster 更改为[使用 JMyron 而不是旧的 JMF](http://www.inter-fuser.com/2009/09/live-camera-preview-in-android-emulator.html)。

新的模拟器（sdk r15）管理网络摄像头；但它在集成网络摄像头方面存在一些问题（至少我的 ^^）

# android - Android 4：无法通过滑动关闭通知

> ID：10718388
> 
> 赞同：10
> 
> 时间：2012-05-23T10:46:27.670
> 
> 标签：android, android-notifications

我有一些代码可以创建一些通知，这真的很基础。

```
int icon = R.drawable.notification;
CharSequence tickerText = "Text";
long when = System.currentTimeMillis();
Notification notification = new Notification(icon, tickerText, when);

Context context = getApplicationContext();
CharSequence contentTitle = "Text";
CharSequence contentText = "Text";
Intent notificationIntent = new Intent(this, RequestActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
notification.flags |= Notification.DEFAULT_SOUND;
notification.flags |= Notification.DEFAULT_VIBRATE;
notification.flags |= Notification.DEFAULT_LIGHTS;
notification.flags |= Notification.FLAG_AUTO_CANCEL;

mNotificationManager.notify(notificationID, notification); 
```

在 2.1 中一切正常。在 4.0 中，除了滑动关闭操作不起作用外，一切正常。通知稍微偏向一边，然后粘住并反弹回来。任何想法？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T06:55:58.580

你不能刷掉你的通知，因为它处于“正在进行”状态。

**首先解决方案：**

用以下代码替换设置标志：

```
notification.defaults |= Notification.DEFAULT_SOUND;
notification.defaults |= Notification.DEFAULT_VIBRATE;
notification.defaults |= Notification.DEFAULT_LIGHTS;
notification.flags |= Notification.FLAG_AUTO_CANCEL; 
```

默认值用于 defaults-section，flags 用于 flags-section。

**现在它进行的原因是什么？**

您可能已经知道通知的标志（和默认值）是由[按位操作](http://en.wikipedia.org/wiki/Bitwise_operation)设置的。意味着每个标志都有一个常数值，它是 2 的幂。将它们相加会导致一组标志的唯一编号，这使得计算实际设置的标志变得非常快。

[Notification.DEFAULT_VIBRATE](http://developer.android.com/reference/android/app/Notification.html#DEFAULT_VIBRATE)和[Notification.FLAG_ONGOING_EVENT](http://developer.android.com/reference/android/app/Notification.html#FLAG_ONGOING_EVENT) 具有相同的常量值**2**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-16T12:19:44.453

你应该使用**[setOngoing （布尔持续）](http://developer.android.com/intl/es/reference/android/app/Notification.Builder.html#setOngoing(boolean))**

> 设置这是否是“持续”通知。用户不能关闭正在进行的通知，因此您的应用程序或服务必须注意取消它们。它们通常用于指示用户正在积极参与的后台任务（例如，播放音乐）或以某种方式挂起并因此占用设备（例如，文件下载、同步操作、活动网络连接）。

您可以使用

```
.setOngoing(false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-19T07:18:34.167

发出通知时只需插入此行...

```
// Will show lights and make the notification disappear when the presses it
notification.flags == Notification.FLAG_AUTO_CANCEL | Notification.FLAG_SHOW_LIGHTS; 
```

# mysql - 选择语句中的动态变量

> ID：10718391
> 
> 赞同：2
> 
> 时间：2012-05-23T10:46:28.303
> 
> 标签：mysql, select

我正在尝试编写一个使用多个关键字进行搜索的选择语句。例如

```
SELECT id FROM my_mod mm WHERE (mm.name LIKE '%joe%' OR mm.name LIKE '%jim%'); 
```

我想做的是在返回数据中有一个额外的列，该列计算该行与类似语句之一匹配的次数。

因此，对于上面的那个，如果有一个名字`jimjoe`，它的计数是 2，或者如果名字是`jim`它，它的计数是 1。有谁知道这样做的方法？

我还应该提到我不能使用临时表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:48:19.370

```
SELECT id, 
       CASE 
         WHEN mm.name LIKE '%joe%' 
              AND mm.name LIKE '%jim%' THEN 2 
         ELSE 1 
       end AS cnt 
FROM   my_mod mm 
WHERE  mm.name LIKE '%joe%' 
        OR mm.name LIKE '%jim%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:56:52.573

试试这个查询 -

```
SELECT
  COUNT(IF(name LIKE '%joe%', 1, NULL)) joe_count,
  COUNT(IF(name LIKE '%jim%', 1, NULL)) jim_count
FROM
  my_mod
WHERE
  name LIKE '%joe%' OR name LIKE '%jim%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:03:00.440

试试这个

```
select t.id,count(*) FROM
((select id from my_mod where name like '%jim%')
union all
(select id from my_mod where name like '%joe%')) t group by t. 
```

[我在这里检查它是如何工作的](http://sqlfiddle.com/#!2/a654d7/3)

# iphone - 如何使 UIWebview 透明。？

> ID：10718399
> 
> 赞同：2
> 
> 时间：2012-05-23T10:47:08.297
> 
> 标签：iphone, uiwebview

我有一个带有 Alpha = 1.0 的 UIWebView 的 XIB，背景设置为清除颜色并且未设置不透明。在这个 XIB 上，我使用以下代码将图像设置为背景：

UIWebView 显示静态 html：

```
<html><head></head><body style=\"margin:0 auto;text-align:center;background-color: transparent; color:white\">...</body></html> 
```

任何解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:48:02.100

试试这个...

```
webViewFirstTab.opaque=NO;

for (UIView* subView in [webViewFirstTab subviews])
{
    if ([subView isKindOfClass:[UIScrollView class]]) {
        for (UIView* shadowView in [subView subviews])
        {
            if ([shadowView isKindOfClass:[UIImageView class]]) {
                [shadowView setHidden:YES];
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-01T22:05:41.707

这对我在 iOS6 或 iOS7 上不起作用。UIWebView 包含一个 _UIWebViewScrollView，它包含一个 UIWebBrowserView。将所有 3 个视图的背景颜色设置为清除颜色不会导致透明背景。我也有这样的html：

有人让它在 iOS 6 或 7 上工作吗？

# c++ - c++ winhttp/wininet wrapper 在没有 mfc/atl 的情况下发布表单和上传文件

> ID：10718403
> 
> 赞同：1
> 
> 时间：2012-05-23T10:47:32.407
> 
> 标签：c++, file, post, wininet, winhttp

有人可以指点我一个不需要 mfc/atl 的基于 winhttp/wininet 的 c++ 包装器吗？这样我就可以让它在 MSVC express 中工作。

我也希望能够通过 HTML 表单使用 GET、POST 和上传文件。

我在 codeproject.com 中检查了几个，但找不到合适的包装器。

有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:42:56.833

在这里，我为您制作了一个以帮助您入门。如果您使用的是 MSVC，您应该学习如何深入挖掘 dll 并找到导出的函数。[DLL Export Viewer 就是我用来做这个的。](http://www.nirsoft.net/utils/dll_export_viewer.html)您需要找到 wininet.dll 在您的计算机上的位置并相应地更改代码。我希望这有帮助。所以这是我的 WinInetRTW 类（运行时包装器）。

```
// wininetrtw.h

#ifndef WININETRTW_H
#define WININETRTW_H

#include <iostream>
#include <string>
#include <sstream>
#include <windows.h>
#include <wininet.h>

typedef HINTERNET (__cdecl *HttpOpenRequestFuncPtr)(HINTERNET, LPCTSTR, LPCTSTR, LPCTSTR, LPCTSTR, LPCTSTR, DWORD, DWORD);
typedef HINTERNET (__cdecl *InternetConnectFuncPtr)(HINTERNET, LPCTSTR, INTERNET_PORT, LPCTSTR, LPCTSTR, DWORD, DWORD, DWORD_PTR);
typedef HINTERNET (__cdecl *InternetOpenFuncPtr)(LPCTSTR, DWORD, LPCTSTR, LPCTSTR, DWORD);
typedef HINTERNET (__cdecl *InternetOpenUrlFuncPtr)(HINTERNET, LPCTSTR, LPCTSTR, DWORD, DWORD, DWORD_PTR);
typedef BOOL (__cdecl *InternetReadFileFuncPtr)(HINTERNET, LPVOID, DWORD, LPDWORD);

class WinInetRTW {

public:
    WinInetRTW();
    ~WinInetRTW();

    // WinInet functions
    bool LoadLibrary(std::string&);
    bool HttpOpenRequest(HINTERNET hConnect, LPCTSTR lpszVerb, LPCTSTR lpszObjectName, LPCTSTR lpszVersion, LPCTSTR lpszReferer, LPCTSTR *lplpszAcceptTypes, DWORD dwFlags, DWORD_PTR dwContext);
    bool InternetConnect(HINTERNET hInternet, LPCTSTR lpszServerName, INTERNET_PORT nServerPort, LPCTSTR lpszUsername, LPCTSTR lpszPassword, DWORD dwService, DWORD dwFlags, DWORD_PTR dwContext);
    bool InternetOpen(LPCTSTR lpszAgent, DWORD dwAccessType, LPCTSTR lpszProxyName, LPCTSTR lpszProxyBypass, DWORD dwFlags);
    bool InternetOpenUrl(HINTERNET, LPCTSTR, LPCTSTR, DWORD, DWORD, DWORD_PTR);
    bool InternetReadFile(HINTERNET, LPVOID, DWORD, LPDWORD);

    // Helper methods
    bool InternetReadFileToBuffer(HINTERNET);

    // Results from respective methods
    HINTERNET InternetOpenResult;
    HINTERNET InternetConnectResult;
    HINTERNET HttpOpenRequestResult;
    HINTERNET InternetOpenUrlResult;
    std::stringstream InternetReadFileStream;

private:
    HttpOpenRequestFuncPtr HttpOpenRequestFunc;
    InternetConnectFuncPtr InternetConnectFunc;
    InternetOpenFuncPtr InternetOpenFunc;
    InternetOpenUrlFuncPtr InternetOpenUrlFunc;
    InternetReadFileFuncPtr InternetReadFileFunc;

};

#endif // WININETRTW_H

// wininetrtw.cpp

#include "wininetrtw.h"

WinInetRTW::WinInetRTW()
{
}

WinInetRTW::~WinInetRTW()
{
}

bool WinInetRTW::LoadLibrary(std::string& PathToDll)
{
    HINSTANCE dllInstance;
    dllInstance = ::LoadLibrary(PathToDll.c_str()); // Load library

    this->HttpOpenRequestFunc = reinterpret_cast<HttpOpenRequestFuncPtr>(::GetProcAddress(dllInstance, "HttpOpenRequest")); // Load function
    this->InternetConnectFunc = reinterpret_cast<InternetConnectFuncPtr>(::GetProcAddress(dllInstance, "InternetConnectA"));
    this->InternetOpenFunc = reinterpret_cast<InternetOpenFuncPtr>(::GetProcAddress(dllInstance, "InternetOpenA"));
    this->InternetOpenUrlFunc = reinterpret_cast<InternetOpenUrlFuncPtr>(::GetProcAddress(dllInstance, "InternetOpenUrlA"));
    this->InternetReadFileFunc = reinterpret_cast<InternetReadFileFuncPtr>(::GetProcAddress(dllInstance, "InternetReadFile"));

    if(!dllInstance){
        return false;
    }
    return true;
}

/*
 * http://msdn.microsoft.com/en-us/library/windows/desktop/aa384363(v=vs.85).aspx
 * */
bool WinInetRTW::InternetConnect(HINTERNET hInternet, LPCTSTR lpszServerName, INTERNET_PORT nServerPort, LPCTSTR lpszUsername, LPCTSTR lpszPassword, DWORD dwService, DWORD dwFlags, DWORD_PTR dwContext)
{
    InternetConnectResult = InternetConnectFunc(hInternet, lpszServerName, nServerPort, lpszUsername, lpszPassword, dwService, dwFlags, dwContext);
    if(!InternetConnectResult){
        return false;
    }
    return true;
}

/* 
 * http://msdn.microsoft.com/en-us/library/windows/desktop/aa385096(v=vs.85).aspx
 * */
bool WinInetRTW::InternetOpen(LPCTSTR lpszAgent, DWORD dwAccessType, LPCTSTR lpszProxyName, LPCTSTR lpszProxyBypass, DWORD dwFlags)
{
        this->InternetOpenResult = this->InternetOpenFunc(lpszAgent, dwAccessType, lpszProxyName, lpszProxyBypass, dwFlags);
        if(!this->InternetOpenResult){
            return false;
        }
        return true;
}

/*
 * http://msdn.microsoft.com/en-us/library/windows/desktop/aa385098(v=vs.85).aspx
 * */
bool WinInetRTW::InternetOpenUrl(HINTERNET hInternet, LPCTSTR lpszUrl, LPCTSTR lpszHeaders, DWORD dwHeadersLength, DWORD dwFlags, DWORD_PTR dwContext)
{
    InternetOpenUrlResult = InternetOpenUrlFunc(hInternet, lpszUrl, lpszHeaders, dwHeadersLength, dwFlags, dwContext);
    if(!InternetOpenUrlResult){
        return false;
    }
    return true;
}

/* 
 * http://msdn.microsoft.com/en-us/library/windows/desktop/aa385103(v=vs.85).aspx
 * */
bool WinInetRTW::InternetReadFile(HINTERNET hFile, LPVOID lpBufferOut, DWORD dwNumberOfBytesToRead, LPDWORD lpdwNumberOfBytesReadOut)
{
    return InternetReadFileFunc(hFile, lpBufferOut, dwNumberOfBytesToRead, lpdwNumberOfBytesReadOut);
}

bool WinInetRTW::InternetReadFileToBuffer(HINTERNET hFile)
{
    DWORD dwRead;
    char Buffer[1024];

    while (this->InternetReadFile(hFile, Buffer, 1023, &dwRead ) )
    {
        if ( dwRead == 0 )
            break;
        Buffer[dwRead] = 0;
        InternetReadFileStream << Buffer;
    }

    return true;
}

// main.cpp

#include "wininetrtw.h"

using namespace std;

int main(int argc, char **argv)
{
    // Find the path to the file on your own system.
    string PathToDll = "C:\\Windows\\winsxs\\x86_microsoft-windows-i..tocolimplementation_31bf3856ad364e35_9.4.8112.16441_none_1a52f663bc299b3d\\wininet.dll";
    WinInetRTW net;

    if(net.LoadLibrary(PathToDll)){
        cout << "Library loaded!\n";
        net.InternetOpen("InetURL/1.0", INTERNET_OPEN_TYPE_PRECONFIG, NULL, NULL, 0);
        if(net.InternetOpenUrl(net.InternetOpenResult, "http://www.google.com", NULL, 0, 0, 0))
        {
            net.InternetReadFileToBuffer(net.InternetOpenUrlResult);
            cout << net.InternetReadFileStream.str();
        }
    }
    else{
        cout << "Library failed to load.";
    }

    cin.get();
    return 0;
} 
```

# javascript - Stuck using array.splice() to shuffle a deck array

> ID：10718410
> 
> 赞同：0
> 
> 时间：2012-05-23T10:48:12.780
> 
> 标签：javascript, arrays

I'm trying to randomly shuffle a deck array of `Card` objects into a `newDeck` array of `Card` objects using `array.splice()`. I imagine my problem is either something to do with variable scope, or a misapprehension about `array.splice()`.

```
var deck = [new Card(), new Card(), new Card(), new Card(), new Card(), new Card()];
var newDeck = [];
var shuffle = function(){
    var i = "";
    for (i = 0; i < deck.length; i++){      
        newDeck[i] = deck.splice(Math.floor(Math.random() * deck.length, 1));
}    
};

shuffle(); 
```

Is there a better way to shuffle a deck?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:41:28.627

Yes, there is a misapprehension about `array.splice()`. Read the [docs](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice): It will return an array of the removed elements, in your case with one card: `[<object Card>]`. Also, with `deck.splice(Math.floor(Math.random() * deck.length, 1))`, the `1` (which i guess should be how many cards to remove) is an argument to `Math.floor`, not `splice` - you will remove all elements after the index. So, you seem to want:

```
function shuffle(deck) {
    var newDeck = [];
    for (var i = 0; i < deck.length; i++)    
        newDeck[i] = deck.splice(Math.floor(Math.random() * deck.length), 1)[0];
    return newDeck;
}    
shuffle([new Card(), new Card(), new Card(), new Card(), new Card(), new Card()]); 
```

You have asked for other ways to shuffle: You could use the very common

```
deck.sort(function(a, b){ return 0.5-Math.random(); }) 
```

or the algorithm from [underscore.js](http://underscorejs.org/#shuffle):

```
function shuffle(deck) {
    var newDeck = [];
    for (var i = 0; i < deck.length; i++) {    
        var rand = Math.floor(Math.random() * (i + 1));  
        newDeck[i] = newDeck[rand];
        newDeck[rand] = deck[i];
    }
    return newDeck;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:53:49.057

Reverse your `for` cycle:

```
for (i = deck.length - 1; i >= 0; i--)
    newDeck.push(deck.splice(Math.floor(Math.random() * deck.length))[0]); 
```

The problem you're having is that `deck.length` decreases every time the cycle executes `deck.splice`. Alternatively, you can save `deck.length` in a separate variable before running the script:

```
var length = deck.length;
for (i = 0; i < length; i++){      
    newDeck[i] = deck.splice(Math.floor(Math.random() * deck.length))[0]; 
```

Inside the cycle, though, you have to use `deck.length`.

Note: `Math.floor` takes just one argument. What was that ", 1" supposed to be? And initializing `i = ""` is pointless, since that value is unused. Just put `var i;`.

**Edit**: fixed a missing point about the return value of `Array.splice`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:04:56.163

You could as well use the `Array#shuffle` method from [underscore.js](http://underscorejs.org/#shuffle) in case you do not want to reinvent the wheel in that case ;)

# authorization - web.xml 中安全约束的适当做法

> ID：10718414
> 
> 赞同：2
> 
> 时间：2012-05-23T10:48:21.273
> 
> 标签：authorization, security, web.xml, security-constraint

`security-constraint`我可以通过在 web.xml 中定义（除其他外）来限制对 Web 应用程序的访问。每个安全约束包括 1)`<web-resource-collection>`包含一组受限资源，以及 2)`<auth-constraint>`包含一组授权用户（安全角色），这些用户可以访问此约束中定义的 web-resource-collection。

所以我认为我可以在每个约束中执行 a）定义单个资源（地址）和一组授权用户或 b）定义一组资源（地址）和单个授权用户。

我对吗？我的方法应该是什么。

例如，我定义了这样的约束：

```
<security-constraint>
    <display-name>ConstraintAdminUser</display-name>

    <web-resource-collection>
        <web-resource-name>adminResources</web-resource-name>
        <url-pattern>/protected/admin/*</url-pattern>
        <url-pattern>/protected/main/*</url-pattern>
        <url-pattern>/protected/user/*</url-pattern>
        <url-pattern>/protected/lang/*</url-pattern>
    </web-resource-collection>

    <auth-constraint>
        <role-name>AdminUserRole</role-name>
    </auth-constraint>

</security-constraint>

<security-constraint>
    <display-name>ConstraintUserOnly</display-name>

    <web-resource-collection>
        <web-resource-name>userResources</web-resource-name>
        <url-pattern>/protected/main/*</url-pattern>
        <url-pattern>/protected/user/*</url-pattern>
        <url-pattern>/protected/lang/*</url-pattern>
    </web-resource-collection>

    <auth-constraint>
        <role-name>UserOnlyRole</role-name>
    </auth-constraint>

</security-constraint> 
```

但我不知道这是否是一种“正确的方式”:)

# c# - EF 可选一对一

> ID：10718415
> 
> 赞同：2
> 
> 时间：2012-05-23T10:48:25.063
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4

我是 Entity Framework 的新手，在尝试映射我的实体时遇到了问题。

基本上我有一个 Location 实体，它可以有一个可选的父位置。所以我想在我的 Location 对象上拥有一组子位置以及当前位置的父位置。以下是我当前的位置实体：

```
public class Location : BaseEntity
{
    private ICollection<Location> _childLocations;

    public virtual ICollection<Location> ChildLocations
    {
        get { return _childLocations ?? (_childLocations = new List<Location>()); }
        set { _childLocations = value; }
    }

    public virtual int Id { get; set; }

    public virtual string Name { get; set; }

    public virtual Location ParentLocation { get; set; }
} 
```

但是，当涉及到映射时，我迷路了。以下是我迄今为止的尝试：

```
public partial class LocationMap : EntityTypeConfiguration<Location>
{
    public LocationMap()
    {
        this.ToTable("Location");
        this.HasKey(l => l.Id);
        this.Property(l => l.Name).HasMaxLength(100);

        this.HasMany(l => l.ChildLocations)
            .WithMany()
            .Map(m => m.ToTable("Location"));

        this.HasOptional(l => l.ParentLocation)
            .WithOptionalDependent()
            .Map(m => m.ToTable("Location"));
    }
} 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T10:53:25.447

你想要这样的东西：

```
this.HasOptional(l => l.ParentLocation)
    .WithMany(l => l.ChildLocations)
    .Map(m => m.ToTable("Location")); 
```

但不是关系的两个声明，即上面替换了您的示例中的下面两个

```
 this.HasMany(l => l.ChildLocations)
        .WithMany()
        .Map(m => m.ToTable("Location"));

    this.HasOptional(l => l.ParentLocation)
        .WithOptionalDependent()
        .Map(m => m.ToTable("Location")); 
```

# wordpress - 从类别中的最新帖子中获取 id 以在类别档案中使用

> ID：10718416
> 
> 赞同：0
> 
> 时间：2012-05-23T10:48:25.557
> 
> 标签：wordpress, categories

我正在尝试获取每个类别中最新帖子的 id，并使用该 id 获取元信息和缩略图并将其显示在相应类别旁边。我只是不知道该怎么做。

我一直在尝试这段代码，但它对我不起作用：

```
<?php
$args=array(
  'orderby' => 'name',
  'order' => 'ASC'
  );
$categories=get_categories($args);
foreach($categories as $category) : ?>

    <?php $randpost = get_posts(
        array(
            'numberposts' => 1,
            'category' => array( get_query_var($category->id)),
        ));
    $randpostid = ($randpost->ID);
    ?>

    <?php echo '<h2 class="newsitem"><a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a> </h2> '; ?>
    <?php echo '<p>'. $category->count . ' nummer</p>'; ?>

    <strong>Stad:</strong>
    <?php $city = get_post_meta($randpostid, 'city', true); ?>
    <?php echo $city ?> 

<?php endforeach; ?> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:14:48.240

你所拥有的一切看起来都是正确的，除了一行。你需要改变：

```
'category' => array( get_query_var($category->id)), 
```

到：

```
'category' => $category->cat_ID 
```

类别对象没有“id”属性，而是“cat_ID”属性。

**另外：**如果由于某种原因不能解决您的问题，我唯一能想到的另一件事就是更改这一行：

```
$randpostid = ($randpost->ID); 
```

到：

```
$randpostid = ($randpost[0]->ID); 
```

get_posts() 返回一个数组，但我不确定返回单个帖子时它是否为数组格式。无论哪种方式，第一次代码更改是必须的，第二次可能需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:18:00.443

如果您只是在显示最新帖子中的信息之后，您可能会以更简单的方式执行此操作。在您的页面模板中这样的东西应该可以工作（未经测试）：

编辑

根据OP评论编辑的答案：

```
<?php
$cat_args = array('orderby' => 'name','order' => 'ASC'); //for parameters see http://codex.wordpress.org/Function_Reference/get_categories

$categories=get_categories($cat_args);

foreach($categories as $category) { // for each category we as for the most recent post

$post_args = array('numberposts' => 1, 'category' => $category, 'orderby' => 'post_date', 'order' => 'DESC', );

$posts_array = get_posts( $post_args );

foreach($lastposts as $post) : setup_postdata($post); //Use setup_postdata to access parts of the object using regular WP template tags ?> 

    <?php post_id = get_the_ID(); // or you could just use $post->ID ?>

    <!--Do your stuff here-->

<?php endforeach; ?>

<?php } ?> 
```

# c++ - Openssl aes.h [链接器错误] 未定义的引用

> ID：10718418
> 
> 赞同：3
> 
> 时间：2012-05-23T10:48:39.520
> 
> 标签：c++, c, openssl, aes

我尝试使用 OpenSSL ibaries 制作带有 AES 解密的简单测试程序。编译器/链接器向我显示一个错误。编译器：Dev-Cpp

```
 [Linker error] undefined reference to `AES_set_decrypt_key'
  [Linker error] undefined reference to `AES_decrypt' 
```

代码：

```
#include <stdio.h>
#include <openssl/aes.h>
int main(){
AES_KEY k;
unsigned char key[]="2641cf97291c6ea02b930a4e2a824990";
unsigned char in[]="adc8f4ad114433ffaf4597c9738d257c504db763c29d238aa05bd21e1107809f";
unsigned char out[150];

AES_set_decrypt_key(key, 256, &k);
AES_decrypt(in, out, &k);

printf("%s\n", out);

} 
```

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:54:38.947

您应该链接到 openssl 库 - 将其添加到您的命令行：`-lssl -lcrypto`

编辑：您可能必须使用 -L 选项明确指定库的位置 - 也将 a 添加`-L<openssl_library_directory>`到命令中

# php - 选择查询中的错误

> ID：10718420
> 
> 赞同：0
> 
> 时间：2012-05-23T10:48:45.590
> 
> 标签：php, db2

我正在使用 as400 db2 iseries，但无法从数据库中获取数据。如果我使用 for 循环它工作正常，但是当我使用 while 循环时会出错。在这里我更新代码供您参考...

代码：

```
$database = 'xxxxxx';
$user = 'xxx';
$password = 'xxx';
$hostname = 'x.x.x.x';

 include('adodb.inc.php');

     $db = ADONewConnection('odbc');
     $dsn = "DRIVER={iSeries Access ODBC Driver};SYSTEM=$hostname;DATABASE=$database;";
     if($db->Connect($dsn,$user,$password)){
         $query = "SELECT * FROM IND0301F.XMAGLF0 WHERE XMCDMA='I01' AND XMCDUB=''"; 
         $res = odbc_exec($query); 
         while( $row = odbc_fetch_array($res) ) { 
             echo $row['XMARCD'];  exit;
          } 
     }

<?php // no direct access 
  //defined('_JEXEC') or die('Restricted access');
?>
<?php
 set_time_limit(0); 
  //echo "Current User is ". $uname=$_SESSION['username']; 
?>
<?php
$database = 'IND0301F';
$user = 'QUSER';
$password = 'QUSER';
$hostname = '10.10.0.30';
?>

<?php
     include('adodb.inc.php');

     $db = ADONewConnection('odbc');
     $dsn = "DRIVER={iSeries Access ODBC Driver};SYSTEM=$hostname;DATABASE=$database;";
     if($db->Connect($dsn,$user,$password)){
         $sql_count = "SELECT COUNT(*) FROM IND0301F.XMAGLF0 WHERE XMCDMA='I01' AND XMCDUB=''"; 
         $rs_count = $db->Execute($sql_count);
         $result_count = $rs_count->GetArray();
         $count_rd = $result_count[0][0];  
         $sql = "SELECT * FROM IND0301F.XMAGLF0 WHERE XMCDMA='I01' AND XMCDUB=''";
         $rs = $db->Execute($sql);
         if (!$rs) echo "<p>no records</p>";
         else 
             {
             $result = $rs->GetArray();
?>

<tr>
<th>VRVCODE</th>
<th>Description</th>
<th>UOM</th>
<th>WH</th>
<th>Stock </th>
<th>Material Requested but PO not placed</th>
<th>Ordered</th>
<th>Items expected to deliver in 1 month</th>
<th>Items expected to deliver in 2 month</th>
<th>Items expected to deliver in 3 month</th>
<th>Items expected to deliver in morethan 3  month</th>
</tr>

<?php 
            for($i=0;$i<$count_rd;$i++)
            { ?>          
                <tr  class="odd_gradeX">     
<?php
                    for($j=0;$j<=53;$j++)
                        {  // 0 3 4 7 9 17 18 19 20 21 22 
                         if(($j != 1) && ($j != 2) && ($j != 10) &&  ($j != 5) && ($j != 6) && ($j != 8) && ($j != 11) && ($j != 12) 
                          && ($j != 13) &&  ($j != 14) && ($j != 15) && ($j != 16)
                          && ($j != 23) &&  ($j != 24) && ($j != 25) && ($j != 26) && ($j != 27)
                          && ($j != 28) && ($j != 29) 
                          && ($j != 30) &&  ($j != 36) && ($j != 37) && ($j != 38) && ($j != 39)
                          && ($j != 31) && ($j != 32)  && ($j != 33) && ($j != 34) && ($j != 35)&& ($j != 40) && ($j != 41) && ($j != 42) && ($j != 43) && ($j != 44) && ($j != 45) && ($j != 46) && ($j != 47) && ($j != 48) && ($j != 49) && ($j != 50) && ($j != 51) && ($j != 52) && ($j != 53)){
                        ?>
                        <?php 
                        if(($j == 9)||($j == 17)||($j == 18) ||($j == 19) ||($j == 20) ||($j == 21) ||($j == 22)){ ?>
                        <td align="right">
                        <?php }  elseif(($j == 3)){ ?>
                  <td align="left"> <?php }
                           else { ?> 
                  <td align="center"> <?php } ?> 
                           <?php  
                             if($result[$i][$j]!='') 
                             { 
                             ?>   <?php 
                             echo $result[$i][$j];  ?> <?php   
                             echo "&nbsp;";              
                             } }
                              ?>
                  </td>
                    <?php } ?>
          </tr><?php
            }  ?>

<?php
           }
     } else {
         echo "Not working";
         echo 'SQLSTATE: '.$db->ErrorNo()."<br>";
         echo 'Message: '.$db->ErrorMsg()."<br><br>";
     } 
?> 
```

# javascript - 有没有更好的方法来获取这些数据？

> ID：10718421
> 
> 赞同：2
> 
> 时间：2012-05-23T10:49:03.503
> 
> 标签：javascript, jquery, arrays, underscore.js

我使用 jQuery 和**underscore.js**，我有`title1-2`并且我希望有相应的动作。

```
this.items = {
    menuItems: [
        { title: 'title1',
            data: [
                { title: 'title1-1',
                    action: 'action1-1'
                },
                { title: 'title1-2',
                    action: 'action1-2'
                }
                ]
        },
        { title: 'title2',
            data: [
                { title: 'title2-1',
                    action: 'action2-1'
                },
                { title: 'title2-2',
                    action: 'action2-2'
                }
            ]
        }
    ]
}; 
```

目前，我有以下代码来执行此操作：

```
var item = _.find(_.flatten(_.pluck(this.items.menuItems, 'data')), function (item) { return item.title === 'title1-2'; });
console.log(item.action); 
```

有没有更好的方法找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:50:09.130

切换到[`_.chain`](http://documentcloud.github.com/underscore/#chain)会使它更容易理解：

```
var item = _.chain(items.menuItems)
            .pluck('data')
            .flatten()
            .find(function(i) { return i.title === 'title1-2' })
            .value(); 
```

演示：http: [//jsfiddle.net/ambiguous/mPa3m/](http://jsfiddle.net/ambiguous/mPa3m/)

您也可以通过在 a中使用 a 来跳过[`pluck`](http://documentcloud.github.com/underscore/#pluck)and ：[`flatten`](http://documentcloud.github.com/underscore/#flatten)[`find`](http://documentcloud.github.com/underscore/#find)[`map`](http://documentcloud.github.com/underscore/#map)

```
var right_title = function(i) { return i.title === 'title1-2' };
var is_there    = function(i) { return i };
var item        = _.chain(items.menuItems)
                   .map(function(i) { return _(i.data).find(right_title) })
                   .find(is_there)
                   .value(); 
```

演示：http: [//jsfiddle.net/ambiguous/uRBuZ/](http://jsfiddle.net/ambiguous/uRBuZ/)

或者只是去老派并使用短路嵌套循环：

```
var i, j, sub, item;
for(i = 0, item = null; !item && i < items.menuItems.length; ++i)
    for(j = 0, sub = items.menuItems[i]; !item && j < sub.data.length; ++j)
        if(sub.data[j].title === 'title2-1')
            item = sub.data[j]; 
```

演示：http: [//jsfiddle.net/ambiguous/7xt5D/](http://jsfiddle.net/ambiguous/7xt5D/)

这个只复制了几个引用，所以它应该很容易记忆，它会在第一个可能的机会停止，所以它也很懒惰。

如果您经常这样做，那么建立一个索引以便您可以通过标题直接访问可能是有意义的：

```
var idx = { };
var i, j, sub, item;
for(i = 0, item = null; !item && i < items.menuItems.length; ++i)
    for(j = 0, sub = items.menuItems[i]; !item && j < sub.data.length; ++j)
        idx[sub.data[j].title] = sub.data[j];
console.log(idx['title1-2']); 
```

演示：http: [//jsfiddle.net/ambiguous/SJuHp/](http://jsfiddle.net/ambiguous/SJuHp/)

以上假设您的标题是唯一的，但`idx`如果这是一个问题，您可以轻松地切换到数组。您还必须跟踪对 in 的任何更改`this.items`，`idx`但如果您将其全部隐藏在一个对象中并且只通过该对象的方法来处理数据，这很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:32:26.187

巧妙的方法，但随着对象大小的增长（对子数组的多次操作）不是最有效的。我认为最好做两个 underscore.js 查找：首先是匹配 titlex 的*菜单项*，然后是匹配 titlex-y的*数据。*

```
var item = _.find(
    _.find(
        this.items.menuItems, function(item) {
            return item.title === 'title1'
        }).data,
    function(item) {
        return item.title = 'title1-2'
    }); 
```

# mysql - 生成时间序列

> ID：10718422
> 
> 赞同：1
> 
> 时间：2012-05-23T10:49:06.547
> 
> 标签：mysql, sql, hadoop, hive, time-series

我在一张表中有两列：时间，卷。

时间列的分辨率为秒 ( `format: YYMMDDHHmmss`)，体积是流量。我想编写一个脚本，可以计算由 5 个获胜窗口内的总交易量组成的时间序列；具有 5 分钟 bin 的时间序列。

我怎样才能做到这一点？通过...分组？

# java - 如何在 JAVA（Netbeans IDE）上进行自定义绑定

> ID：10718423
> 
> 赞同：2
> 
> 时间：2012-05-23T10:49:09.660
> 
> 标签：java, netbeans, binding

我想了解如何在 java 上进行自定义绑定，我在 google 上搜索但没有找到。这是一个简单的问题，我有两个`jSpinner`,`jSpin1`和`jSpin2`。 `jSpin2`值是 的一半`jSpin1`。

当我做绑定时，有

```
Binding source : jSpin1
Binding expression : ${value} 
```

所以与 中的值`jSpin2`完全相同`jSpin1`。那我怎么能把它的价值减半 `jSpin1`呢？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:12:10.513

据我了解，您使用的是 NetBeans GUI Builder。您可以通过以下步骤来做到这一点：

- 右键单击​​ jSpin2（在设计视图中）并选择“属性”<p> - 在对话框顶部选择“绑定”

- 单击“值”属性上的“...”按钮

- 从 'Binding Source'<p> 中选择 'jSpin1' - 从 'Binding Expression'<p> 中选择 'value' - 将 'Binding Expression' 编辑为 '${value/2}'<p>（也可以将 ' jSpin1[${value/2}]' 在 'value' 属性中）

# xcode - 使用 XCode 4 创建 MonoTouch 自定义单元格不起作用

> ID：10718426
> 
> 赞同：1
> 
> 时间：2012-05-23T10:49:22.813
> 
> 标签：xcode, xamarin.ios, custom-cell

我习惯于使用 Interface Builder 在 MonoTouch 中创建自定义单元格，但自从 XCode 4 集成了这个之后，我似乎无法让它工作。这是一个已知问题吗？有谁知道描述如何解决这个问题的文章？我有很多书籍，并找到了关于它在 XCode 3（接口生成器）中如何工作的文章，但我正在研究它在 XCode 4 中的工作原理！

此外，在 MonoTouch 中创建 iPad 视图控制器时，文件似乎是分开的（我得到了一个 fHeader.cs 和一个 fHeader.xib 文件），而在 fHeader.cs 文件是 xib 文件的“一部分”之前（在它下面分层）。为什么是这样？

我正在使用 Mono 2.10.9 - XCode 4.2 和 Monotouch 5.2.11

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T03:23:09.250

这有一个很好的教程：

[http://blog.arcticmill.com/2012/05/uitableview-with-custom-uitableviewcell.html](http://blog.arcticmill.com/2012/05/uitableview-with-custom-uitableviewcell.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:12:40.563

检查本教程：

[http://sabonrai.wordpress.com/2009/08/28/monotouch-sample-code-uitableview/](http://sabonrai.wordpress.com/2009/08/28/monotouch-sample-code-uitableview/)

通常，您创建一个 DataSource Delegate 并在那里覆盖该`GetCell`函数。

在此功能中，您可以创建自定义单元格。

# javascript - jQuery可拖动的内向外包含

> ID：10718428
> 
> 赞同：2
> 
> 时间：2012-05-23T10:49:37.977
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable

而不是在它周围包含可拖动元素，我怎么能把它放在里面？因此，只要元素的边缘不与其中的元素碰撞，您就可以将元素拖动到任何地方？ ![在此处输入图像描述](../Images/733d847e8c47a8c3c31c6d3d96c504cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:18:35.677

您可以通过制作一个真正的包含组件来伪造它，该组件限制您的可拖动元素，就好像它受到较小元素的约束一样。您只需要像这样制作真实容器的尺寸：

```
Container.height = (Draggable.height - Restrict.height) + Draggable.height
Container.width = (Draggable.width - Restrict.width) + Draggable.width 
```

![图表](../Images/4e4a8de0a085747974c8a25623b901a4.png)

然后，您还需要对抗拖动运动，以便在可拖动元素移动时，包含的限制元素似乎不会移动。那个或不动的部分都可以是一个浮动的 div。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:32:56.150

一种方法是使用`drag`事件并更新`ui.position`or`ui.offset`字段，以手动约束项目。

[这](http://jsfiddle.net/lingo/GKpC5)是一个 jsfiddle 来说明这个概念，尽管这并没有完全实现你所描述的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T21:40:15.263

如果其他人对此感兴趣，使用 Rusty 的代码和逻辑[这里是一个 JSfiddle 链接](http://jsfiddle.net/umL7Y)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:52:10.707

在@RustyTheBoyRobot 的回答的基础上，如果您知道可拖动的尺寸，您也可以仅在 CSS 中完成。

**现场示例**- jsbin.com/agovex

这样做的明显缺点是，如果您想在多种情况下重用它，它将无法工作，因为这些值在 CSS 中是硬编码的。但是，如果您只需要它用于已知尺寸的一件事，我发现 CSS 唯一的方法简单而优雅。只需一行 JavaScript 即可创建可拖动对象。

# javascript - 将图像 jquery 重新加载/替换为列表项

> ID：10718429
> 
> 赞同：3
> 
> 时间：2012-05-23T10:49:40.177
> 
> 标签：javascript, jquery, image, replace

大家好，我将图像作为列表项添加到无序列表html中，并使用jquery在无序列表中动态插入项目，使用下面的代码

```
 for(var i=1; i<=5; i++){       
   $('ul').append('<li class="stage1">'+ stage1img[i]+'</li>')
 } 
```

该图像将在页面加载时加载现在按钮单击我想替换所有图像。即所有列表项（li）与我尝试过的其他项目如下

```
for(var j=6; j<=10;j++){
      $('li.stage1').replaceWith('<li>'+ stage1img[j]+ '</li>');
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:53:59.193

我认为您出错的地方在于您的 jQuery 选择。尝试添加`.eq()`

```
for(var j=6; j<=10;j++){
  $('li.stage1').eq(j-6).replaceWith('<li>'+ stage1img[j]+'stage1 </li>');
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:44:41.210

我不是很精通 Javascript，但是如果你想要 ol，为什么不先删除旧的 ol，然后添加新的 ol。删除 ol 使用类似的东西：

```
<script type="text/javascript"><!--
$(document).ready(function() {
  // when the tag with id="btn" is clicked
  $('#btn').click(function() {
    // removes all LI with class="cls" in OL
    $('ol li.cls').remove();
  });
});
--></script> 
```

然后像以前一样附加新项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T11:05:54.153

我已经修改了您的代码，请尝试一下。

```
for(var j=6; j<=10;j++){
      $('li.stage1').replaceWith(stage1img[j]);
     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T11:06:33.183

如果要删除所有

*   items ..y 你不改变容器的 HTML 吗？

    ```
    var strHTML='';
    for(var j=6; j<=10;j++){
         strHTML +='<li>'+ stage1img[j]+ </li>';
         }

    //then consider <div> is the container of all this <li> simply do:
    $('div').html(strHTML); 
    ```

# ios - ios启动图像不会删除

> ID：10718430
> 
> 赞同：3
> 
> 时间：2012-05-23T10:49:49.693
> 
> 标签：ios

嗨，我创建了一个应用程序，但中途更改了 Default.png 图像，现在它只加载旧图像，但在 xcode 的摘要页面中，它将新图像显示为默认图像，但在模拟器中它加载旧图像并在我的iphone它不加载任何东西。它也不会让我删除它并重新添加它，它仍然使用旧图像或没有图像。

我努力了

清理项目从手机和模拟器中删除它

它仍然一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:45:00.270

确保您已删除项目导航器中标题为“default.png”的任何其他图像。为此，只需右键单击图像并点击删除。如果它不允许您删除它，请将其重命名为“default.png”以外的其他名称。希望你能解决你的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T20:12:31.940

您是否尝试将图像重命名为 Default.png 以外的名称？您可以在此处查看有关如何执行此操作的详细信息：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T20:21:10.150

您是否尝试过在图标下检查 xcode 中的 plist？对我来说，它恰好列出了 6 个图标。

![在此处输入图像描述](../Images/b636e5ead5060ce92b248a5deaedb898.png)

它还有助于在模拟器上进行重置内容和设置。

# ios - FusionChart 未显示在 iPad Phonegap 项目中

> ID：10718442
> 
> 赞同：1
> 
> 时间：2012-05-23T10:50:39.023
> 
> 标签：ios, xcode, ipad, cordova, fusioncharts

嗨，我正在开发一个基于 Phonegap 的 iOS 项目，其中我有一个必须显示融合图的部分，如果我在浏览器中运行我的 index.html，它工作正常，但在 iPad 中，该部分中的图形正在加载消息将来了，但即使我等待超过 10 分钟，图表也根本不可见。如何在我的 iPad 屏幕上呈现此融合图。提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:15:41.203

我不确定您是如何渲染它或您正在渲染多少数据，但是，我创建了一个在 XCode iPad 模拟器中工作的小示例。

请从以下位置找到示例项目：[http ://www.sudipto.net/download/ios/phonegap/app/fusioncharts/fusionchartsxt.zip](http://www.sudipto.net/download/ios/phonegap/app/fusioncharts/fusionchartsxt.zip)

注意：我主要遵循[http://docs.phonegap.com/en/1.7.0/guide_getting-started_ios_index.md.html#Getting%2520Started%2520with%2520iOS中的步骤](http://docs.phonegap.com/en/1.7.0/guide_getting-started_ios_index.md.html#Getting%2520Started%2520with%2520iOS)

和

[http://docs.fusioncharts.com/charts/contents/FirstChart/UsingPureJS.html](http://docs.fusioncharts.com/charts/contents/FirstChart/UsingPureJS.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T18:44:48.117

如果在此阶段可行：卸载 Phonegap 并将其替换为 Apache Cordova。Phonegapp 是 Apache 最优秀的 Cordova 的一个狡猾且以利润为导向的版本......

[阿帕奇科尔多瓦网站](http://cordova.apache.org/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-02T10:42:29.733

此处缺少cordov框架

# windows-phone-7 - 如何在WF7中删除图像

> ID：10718443
> 
> 赞同：0
> 
> 时间：2012-05-23T10:50:39.760
> 
> 标签：windows-phone-7

我有一个图像列表我添加了一个图标按钮以在选择图像时删除图像，我必须输入什么代码来删除内容图像我创建了一个名为 Images 的图片文件夹

```
List<Data> datasource = new List<Data>() 
        {
            new Data()
            {Text = "Chrysanthemum",ImageUri= "/Ima/Chrysanthemum.jpg"},
            new Data()
            {Text="Desert", ImageUri="/Ima/Desert.jpg"},
            new Data()
            {Text="Hydrangeas", ImageUri="/Ima/Hydrangeas.jpg"},
            new Data()
            {Text="Jellyfish", ImageUri="/Ima/Jellyfish.jpg"},
            new Data()
            {Text="Koala",ImageUri="/Ima/Koala.jpg"},
            new Data()
            {Text="Lighthouse", ImageUri ="/Ima/Lighthouse.jpg"},
            new Data()
            {Text="Penguins",ImageUri="/Ima/Penguins.jpg"},
            new Data()
            {Text="Tulips",ImageUri="/Ima/Tulips.jpg"}
        };
        this.listBox.ItemsSource = datasource;

     private void delete_Click(object sender, EventArgs e)
    {
       if (listbox.selectedItem!= null)

          ................
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:15:06.113

我不清楚你需要什么。但是如果您需要从列表中删除项目：

1.  制作`datasource`为`ObservableCollection`并将其设置为类的成员。
2.  从中删除项目`datasource`

如果您只需要从项目中删除图像。

1.  从中获取数据项`selectedItem`
2.  设置`ImageUri`为空。（`Data`应该实现`INotifyPropertyChange`。或者它应该继承`DependencyObject`并`ImageUri`应该是 DependencyProperty）

但在我看来，你应该用那里`Triggers`来解决它。

> 我创建了一个名为 Images 的图片文件夹

我没明白。你到底需要什么？

# javascript - 动态添加 div 会导致奇怪的样式共享

> ID：10718444
> 
> 赞同：0
> 
> 时间：2012-05-23T10:50:42.113
> 
> 标签：javascript, jquery, html, css

在将 div 动态添加到现有 div 时，我遇到了一个烦人的问题。我尝试使用该`appendChild`函数，以及 jQuery 的 append 函数；两者都给出相同的结果。您可以在这个 jsFiddle 上看到问题：

[http://jsfiddle.net/debu/5b3Qr/](http://jsfiddle.net/debu/5b3Qr/)

如果您按下“添加内容”按钮，它将添加几个动态创建的 div。在 for 循环中，它创建一个 div，然后添加两个包含文本的 div，然后将其附加到“mainDiv”。然后在 for 循环之外，我再创建两个 div；其中一个应用了一种样式，其背景颜色设置为浅橙色。

问题是，在 for 循环中创建的 div 似乎继承了这种橙色背景颜色，即使......好吧，即使在它们*之后*添加了具有该背景的元素。而且不像是橙色背景的div继承了橙色之后的段落；它保持原样，白色。

我已经玩了很多，但没有找到解决它的方法。有任何想法吗？

干杯，

得不

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:57:00.763

事实证明，您添加的 div （属于 class `compHolder`）已`float:left`应用。您需要清除`popupHeader3`以`clear:both;`阻止标题的背景影响这 3 个 div，然后它才会出现奇怪的行为。

像这样：

```
.popupHeader3 {
    background-color: #FFBA9B;
    margin-top:1px;
    color: #000000;
    font-family: "ProximaNova";
    font-size: 18px;
    clear:both;
} 
```

见：http: [//jsfiddle.net/zyZ7Z/](http://jsfiddle.net/zyZ7Z/)

# android - AlertDialog.builder 的 obj.create() 与 obj.show() 与 obj.create().show() 之间的区别

> ID：10718447
> 
> 赞同：7
> 
> 时间：2012-05-23T10:50:52.610
> 
> 标签：android, android-alertdialog

AlertDialog 的构建器类的 .create() 和 .show() 方法有什么区别吗？就像我们使用以下命令创建警报对话框一样：

```
AlertDialog.Builder builder = new 
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setMessage("");
builder.setPositiveButton(....)
builder.setNegativeButton(....) 
```

推荐使用什么练习，为什么？

```
builder.create() //I have seen this creates and displays the dialog 
```

或者

```
builder.show() //this also displays the dialog 
```

或者

```
builder.create().show() //well same thing 
```

我已阅读文档。但无法从中理解任何意义。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:54:03.870

`obj.create()-For create Dialog`

`obj.show()-For show Dialog` <- 没有它，如果你创建了，你就不能显示对话框。

**和**

`obj.create().show()-create and show Dialog i mean both same as above two in one statement.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-16T11:35:50.590

[builder.show()](https://developer.android.com/reference/android/app/AlertDialog.Builder#show())返回一个 AlertDialog 对象并立即显示它。如文档中所述，调用此方法在功能上等同于：

```
AlertDialog dialog = builder.create();
dialog.show(); 
```

[builder.create()](https://developer.android.com/reference/android/app/AlertDialog.Builder#create()) returns an AlertDialog object with the arguments supplied to the builder, without showing it. This might be useful if you want to create and store the AlertDialog object for additional processing, after which `dialog.show()` may be called.

# c# - 在单个视图状态对象中存储多个值

> ID：10718449
> 
> 赞同：0
> 
> 时间：2012-05-23T10:50:52.467
> 
> 标签：c#, asp.net

嗨，这里是关于 asp.net 状态管理的一个问题。我想将三个值存储到单个视图状态中。是否可以存储单个值，或者我将使用三个视图状态变量。

基本需求是，我正在使用 gridview **rowcommand**事件来查找三个值。我想在**button_click**事件中使用这些值。这是直接不可能的，所以我更喜欢 viewstate。

如果有其他方法可以发布。我是.net 开发的新手，所以请分享一些关于你的知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:03:14.533

您可以创建一个类，并使用 Serializable 属性对其进行标记。然后创建该类的列表实例并将其作为 1 项存储在视图状态中。这是当你有很多值要存储的时候。但是，我认为您的情况很简单：

```
[Serializable()]
class SomeData
{

    public string Value1 {get; set;}
    public string Value2 {get; set;}
    public string Value3 {get; set;}

} 
```

添加到视图状态：

```
ViewState.Add("myData", new SomeData () {Value1 = "A", 
    Value2 = "B", 
    Value2 = "3"}); 
```

在回发时从 ViewState 中取回：

```
var data = (SomeData)ViewState["myData"];
Label1.Text = string.Format("{0}, {1}, {2}", 
    data.Value1, data.Value2, data.Value3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:05:36.447

在您的场景中，您不需要 ViewState - 您可以将它们存储在后面代码中的变量中，因为 rowcommand 和 button_click 都会在同一个回发时触发。如果在回发中需要它们，您只需要将项目存储在 ViewState 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:58:17.043

您可以使用任何分隔符。例如：

```
ViewState["items"] = item1 + "~" + item2 + "~" + item3 
```

为了从 ViewState 中检索值，用“~”分割这些值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T11:02:33.767

你可以使用任何你想要的分隔符。但是，如果您使用三个单独的变量，您的代码会更简洁。

让 .net 处理视图状态。使用一个变量似乎是一种不必要的复杂化。

# android - 告诉 Android 布局充气器“wrap_content”应该有多大

> ID：10718450
> 
> 赞同：2
> 
> 时间：2012-05-23T10:50:53.513
> 
> 标签：android, layout

我想创建一个 custom `View`，这样当它作为一个维度参数膨胀时，`wrap_content`作为另一个维度参数`match_parent`，它将具有恒定的纵横比，填充设置为的任何维度`match_parent`，但提供具有另一个维度的布局充气器被“包裹”。我认为这是可能的，因为例如，全屏宽度`TextView`显然能够要求它有空间容纳两、三或任意数量的文本行（取决于宽度），但在通货膨胀之前不一定知道这一点-时间。

理想情况下，我想做的是覆盖`View`子类中的布局方法，这样当视图膨胀时，我得到布局信息，并为要包装的“内容”提供我自己的尺寸（即我的固定比例矩形）。

我需要创建很多这样的自定义视图，并将它们放在各种不同类型的布局中——有时使用一个——`Adapter`所以我真的想尽可能地控制它们的膨胀。这样做的最佳技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:59:48.237

您始终可以在 onMeasure 中检查是否符合纵横比。

我知道不是一个完整的答案，但它应该引导你到那里；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:53:08.870

我现在用下面的代码解决了这个问题。值得一提的是，我要覆盖的类是具有自`ViewGroup`定义子项的自定义，全部使用继承的`onMeasure`. 孩子是在构建时创建和添加的，我当然认为这是必要的。

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    float width = MeasureSpec.getSize(widthMeasureSpec);
    final int widthMode = MeasureSpec.getMode(widthMeasureSpec);

    float height = MeasureSpec.getSize(heightMeasureSpec);
    final int heightMode = MeasureSpec.getMode(heightMeasureSpec);

    float nominalHeight = getResources().getInteger(R.integer.nominalheight);
    float nominalWidth = getResources().getInteger(R.integer.nominalwidth);

    float aspectRatio = nominalWidth / nominalHeight;

    if( widthMode == MeasureSpec.UNSPECIFIED ) { //conform width to height
        width = height * aspectRatio;
    }
    else if (heightMode == MeasureSpec.UNSPECIFIED ) { //conform height to width
        height = width / aspectRatio;
    }
    else if( width / height > aspectRatio //too wide
            && ( widthMode == MeasureSpec.AT_MOST )
            ) { 
        width -= (width - height * aspectRatio);
    }
    else if( width / height < aspectRatio //too tall
            && ( heightMode == MeasureSpec.AT_MOST )
            ) { 
        height -= (height - width / aspectRatio);
    }

    int newWidthMeasure = MeasureSpec.makeMeasureSpec((int)width, MeasureSpec.AT_MOST);
    int newHeightMeasure = MeasureSpec.makeMeasureSpec((int)height, MeasureSpec.AT_MOST);
    measureChildren(newWidthMeasure, newHeightMeasure);

    setMeasuredDimension((int)width, (int)height);
} 
```

我根据资源中的标称矩形来定义纵横比，但显然还有很多其他方法可以做到这一点。

感谢[Josephus Villarey 首先](https://stackoverflow.com/users/611228/josephus-villarey)指出我`onMeasure(...)`。

# javascript - 使用javascript（可能是jquery）仅在一个处于活动状态的窗口（在一个网站内）播放声音

> ID：10718452
> 
> 赞同：3
> 
> 时间：2012-05-23T10:50:59.393
> 
> 标签：javascript, jquery

好吧，我找到了一堆关于window.onblur和window.onfocus等原生函数的答案......但它们无济于事，所以我想更具体一些

1.  假设您打开一个网站的多个标签
2.  假设您收到一条消息，并且有声音宣布消息
3.  当您打开了多个选项卡时，您会听到打开选项卡数量的声音。这是一首how'd'u'callit交响曲

到目前为止我找到的最佳解决方案，但不起作用 1\. window.onfocus 和 window.onblur 2\. 如果**var infocus**评估为真，则播放声音，如果不是，则不要播放 3\. 它是跨浏览器 4\. 它是简单 5\. 它不起作用

为什么最好的解决方案行不通？假设您将焦点切换到不同网站的另一个选项卡，您的网站会失去焦点，因此您将听不到声音。更糟糕的是，假设您切换到另一个程序，然后浏览器本身失去焦点，您将听不到声音

那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:01:04.227

您可以将最后一个 onFocus() 事件的时间戳保存在 JavaScript 变量和 cookie 中（访问设置为您的网站根目录）。然后，当您想播放警报声音时，您将变量和 cookie 的当前值进行比较，并且仅在两者匹配时才播放声音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:19:26.130

好吧，两周后我似乎找到了真正的解决方案。这实际上证明了如果你想做某事，不要寻求帮助，只要去做

这就是我所做的：

1.  创建一个带有随机 id 和当前时间 (winid + t1) 的 cookie。cookie 由加载时打开的每个选项卡创建。document.cookie = 'winid='+winid+t1;

2.  创建一个函数，它将更新设置的 cookie 中的当前时间，例如，每 3 秒（我有点不喜欢溢出客户端，所以它是 3 秒而不是 1）。如果该函数发现 cookie 中的 winid 和当前选项卡的 winid 不匹配并且已过去 3 秒，则该选项卡已关闭，请在同一函数内重新定义主选项卡。window.setInterval(setwinid,3000);

3.  就是这样，每次你需要，比如说，播放一个声音，你应该先检查一下，是不是要播放它的标签

诀窍是每个选项卡都有自己的 winid。但是只有一个 winid 存储在 cookie 中，被更新，因此允许一个选项卡执行操作。很简单。我实际上开始使用这种方法来更新所有标签框中的消息，而不仅仅是播放音乐

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:59:24.897

一种解决方案是拥有一个只播放一次通知的服务器端解决方案。您没有指定站点如何接收消息，但我假设它是某种形式的 AJAX 调用，它从服务器获取消息并将消息保存在数据库中。

向数据库添加一个标志，表示消息已发送。在用户的浏览器第一次查询新消息时设置标志。只有在没有设置标志的情况下，页面本身才播放声音，否则不播放声音。现在只有获取消息的第一页才会播放声音。

# language-agnostic - 在非常大的稀疏矩阵上应用 PCA

> ID：10718455
> 
> 赞同：17
> 
> 时间：2012-05-23T10:51:07.810
> 
> 标签：language-agnostic, machine-learning, sparse-matrix, pca

我正在使用 R 进行文本分类任务，我获得了一个大小为 22490 x 120,000 的文档项矩阵（只有 400 万个非零条目，不到 1% 的条目）。现在我想通过利用 PCA（主成分分析）来降低维度。不幸的是，R 无法处理这个巨大的矩阵，所以我将这个稀疏矩阵存储在“矩阵市场格式”的文件中，希望使用其他一些技术来做 PCA。

所以任何人都可以给我一些有用的库的提示（无论是什么编程语言），它可以轻松地用这个大规模矩阵做 PCA，或者我自己做一个手写的 PCA，换句话说，***首先计算协方差矩阵，然后然后计算协方差矩阵的特征值和特征向量***。

我想要的是***计算所有PC（120,000），并且只选择前N个PC，它们占90％的方差***。显然，在这种情况下，我必须先给出一个阈值来将一些非常小的方差值设置为 0（在协方差矩阵中），否则，协方差矩阵将不是稀疏的，其大小将为 120,000 x 120,000，即不可能用一台机器处理。此外，载荷（特征向量）将非常大，应该以稀疏格式存储。

非常感谢您的帮助！

注意：我使用的是 24GB RAM 和 8 个 cpu 内核的机器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T13:53:10.433

Python 工具包[scikit-learn](http://scikit-learn.org/)有一些 PCA 变体，它们[`RandomizedPCA`](http://scikit-learn.org/stable/modules/generated/sklearn.decomposition.RandomizedPCA.html#sklearn.decomposition.RandomizedPCA)可以处理[`scipy.sparse`](http://docs.scipy.org/doc/scipy/reference/sparse.html). [`scipy.io.mmread`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.io.mmread.html#scipy.io.mmread)应该能够解析 Matrix Market 格式（不过我从未尝试过）。

免责声明：我在 scikit-learn 开发团队。

**编辑**：稀疏矩阵支持`RandomizedPCA`在 scikit-learn 0.14 中已被弃用。`TruncatedSVD`应该代替它使用。有关详细信息，请参阅文档。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-24T21:25:34.140

您可以尝试使用潜在狄利克雷分配 (LDA)，而不是运行 PCA，它将文档-词矩阵分解为文档-主题和主题-词矩阵。这是一个 R 实现的链接： http: [//cran.r-project.org/web/packages/lda/](http://cran.r-project.org/web/packages/lda/) - 那里有很多实现，但如果你用谷歌搜索的话。

使用 LDA，您需要提前指定固定数量的主题（类似于主要组件）。一个可能更好的替代方案是 HDP-LDA ( [http://www.gatsby.ucl.ac.uk/~ywteh/research/npbayes/npbayes-r21.tgz](http://www.gatsby.ucl.ac.uk/~ywteh/research/npbayes/npbayes-r21.tgz) )，它可以学习构成您的良好表示的主题的数量语料库。

如果您可以将我们的数据集放入内存中（看起来可以），那么运行 LDA 代码也不会有问题。

正如 scicomp 论坛上的一些人所指出的，应该没有必要计算所有 120k 主成分。像[http://en.wikipedia.org/wiki/Power_iteration](http://en.wikipedia.org/wiki/Power_iteration)这样的算法计算矩阵的最大特征值，并且 LDA 算法将收敛到给定主题数量的数据的最小描述长度表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-22T14:46:53.847

在包[http://cran.r-project.org/web/packages/bigpca/bigpca.pdf](http://cran.r-project.org/web/packages/bigpca/bigpca.pdf)的R`big.PCA`中完成了这项工作。`bigpca`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-30T16:39:28.927

我想您将无法计算所有主要组件。但是您仍然可以获得数据集矩阵的降维版本。我在 MATLAB 中实现了一个简单的例程，可以很容易地在 python 中复制。

计算输入数据集的协方差矩阵，并将其转换为密集矩阵。假设 S 是您输入 120,000 * 22490 稀疏矩阵，这将是：

```
Smul=full(S.'*S);
Sm=full(mean(S));
Sm2=120000*Sm.'*Sm;
Scov=Smul-Sm2; 
```

对协方差矩阵应用 eigs 函数以获得前 N 个主要特征向量，

```
[V,D] = eigs(Scov,N); 
```

并通过将零中心矩阵投影到特征向量上来获得 pcs，

```
Sr=(S-Sm)*V; 
```

Sr 是 S 的降维版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-19T05:06:51.967

> 文本分类任务

我使用[稀疏矩阵的 PCA 技术解决](https://stackoverflow.com/a/53274972/2223158)[了几乎相同的问题](https://github.com/niitsuma/wordca)。这种技术可以处理非常大的稀疏矩阵。 [结果](https://github.com/niitsuma/wordca/blob/master/demo.sh)表明这种简单的 PCA 优于 word2vec。它打算简单的 PCA 优于 LDA。

# android - 无法在 Android 应用中接收 UDP 数据包

> ID：10718457
> 
> 赞同：0
> 
> 时间：2012-05-23T10:51:11.627
> 
> 标签：android, udp, handler

我只能用我的 Client.class 发送数据包，但我不能用我的 Server.class 接收数据包。客户端和服务器在每种情况下都是两个线程。要更新`MainActivity`我使用处理程序。处理程序有效（我对其进行了测试）但不是 Server.class。

```
public class Client implements Runnable {

    //@Override
    public void run() {
        do{
            try {
                    InetAddress serverAddr = InetAddress.getByName(Server.CLIENTIP);

                    DatagramSocket socket = new DatagramSocket();

                    byte[] buf = ("Test").getBytes();

                    DatagramPacket packet = new DatagramPacket(buf, buf.length,serverAddr,Server.CLIENTPORT);

                    socket.send(packet);
                }     
            catch (Exception e) {}
        }
        while(open == true);
    }
}

public class Server implements Runnable {

public static String CLIENTIP = "192.168.0.13";//send-ip
public static String SERVERIP = "10.0.0.18";//receive-ip
public static final int CLIENTPORT = 5000; //send-port
public static final int SERVERPORT = 5001; //receive-port

 //@Override
    public void run() {
        do
        {
            try {
                DatagramSocket socket = new DatagramSocket(SERVERPORT);

                    byte[] buf = new byte[256];
                    DatagramPacket rpacket = new DatagramPacket(buf, buf.length);

                    socket.receive(rpacket);

                    String x = new String(rpacket.getData());
                    MainActivity.glText = x;        
                    MainActivity.mHandler.post(MainActivity.mTimer);

                } 
            catch (Exception e) {}
        }
        while(open == true);
    }
} 
```

有没有人解决这个问题？感谢您的回答！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:00:46.713

如果您尝试使用粘贴的代码进行通信，则您正在侦听的端口号与您尝试发送的端口号不同。

您将无法从设备外部轻松连接服务器，因为您绑定到`localhost`地址（省略时为默认地址）：

```
DatagramSocket socket = new DatagramSocket(SERVERPORT); 
```

您应该绑定到可以从您的 PC 访问的地址：

```
DatagramSocket socket = new DatagramSocket(SERVERPORT02,
                        InetAddress.getByName(SERVERIP)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:10:33.587

你在用模拟器吗？如果是这样，您可能会转发端口，以便模拟器可以接收数据包。

要将端口从主机重定向到仿真器设备，请使用以下格式的 redir 命令：redir add ::

例如，要将目的端口为 5001 的 UDP 数据包转发到具有相同端口的模拟器中，可以使用：redir add udp:5001:5001

# c# - 使用 NET.TCP 的 WCF 传输 Windows 身份验证仅在本地工作

> ID：10718461
> 
> 赞同：2
> 
> 时间：2012-05-23T10:51:30.847
> 
> 标签：c#, wcf, wcf-binding, windows-authentication, net.tcp

我有一个本地运行的 WCF 服务和一个远程运行的客户端。我已经将双方的绑定匹配到：

```
<binding name="TcpBindingConfiguration_2">
  <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
  <security mode="Transport">
    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign"/>
    <message clientCredentialType="Windows"/>
  </security>
</binding> 
```

我有一个虚拟方法设置，它只返回 Thread.CurrentPrincipal.Identity.Name、ServiceSecurityContext.Current.WindowsIdentity.Name 和 OperationContext.Current.ServiceSecurityContext.WindowsIdentity.Name（如果有）。

在与服务器相同的机器上运行客户端时，传输模式工作得很好，并且所有三个身份名称都可用。但是，当从远程主机连接到我的本地计算机（在相同和不同域的主机上测试）时，我收到可怕的“服务器已拒绝客户端凭据”消息。

如果我将绑定更改为：

```
<binding name="TcpBindingConfiguration_1">
  <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
  <security mode="None"/>
</binding> 
```

建立连接并且虚拟方法不返回任何名称（正如我想象的那样）。

有人可以分享他们使用 net.tcp 绑定在不同主机（有时是不同的受信任域）上启用 Windows 身份验证的配置吗？我已经看到很多例子只是说将安全模式设置为无，这一切都很好，但我仍然想确定谁在拨打电话。

下一个是什么？获取 mode="Transport" 工作？使用 mode="None" 并实施其他类型的授权？更改为成功使用 Windows 身份验证的其他绑定？

如果已在其他地方回答此问题，我们深表歉意；我只是找不到明确回答的地方。

**更新：**这是我现在用来创建我的客户端的代码：

```
var endPointAddress = "net.tcp://" + remoteHost + ":8092/Marc/WcfService";
EndpointAddress address = new EndpointAddress(new Uri(endPointAddress), EndpointIdentity.CreateSpnIdentity("AppName/" + remoteHost), new AddressHeaderCollection());
NetTcpBinding binding = new NetTcpBinding();
binding.Security.Mode = SecurityMode.Transport;
binding.Security.Transport.ProtectionLevel = System.Net.Security.ProtectionLevel.EncryptAndSign;

using (var remoteService = new RemoteService.GuestServiceClient(binding, address))
{
    try
    {
        MessageBox.Show(remoteService.Hello("Marc"));
        remoteService.Close();
    }
    catch (Exception ex)
    {
        remoteService.Abort();
        MessageBox.Show("Error occurred:\n\n" + ex.Source + "\n\n" + ex.Message, "Could not connect to " + remoteHost, MessageBoxButton.OK, MessageBoxImage.Error);
    }
} 
```

remoteHost 被设置为远程机器的 IP 地址。

我应该使用频道和代理之类的东西吗？我在其他地方看到过其他代码，但是 GuestServiceClient() 的这种简单实例化似乎有效（至少在本地）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:13:34.010

我通常在代码中配置我的 WCF 服务，所以我不确定这将如何转换为配置文件。

根据我几年前的研究，您需要添加服务主体名称 (SPN) 作为客户端端点的一部分。服务器端不需要更改。

在代码中它看起来像这样：

```
string endPointAddress = String.Format("net.tcp://{0}:1111/ServiceName", ServerAddress);
EndpointAddress address = new EndpointAddress(new Uri(endPointAddress), EndpointIdentity.CreateSpnIdentity("AppName/" + ServerAddress), new AddressHeaderCollection());
NetTcpBinding binding = new NetTcpBinding();
binding.Security.Mode = SecurityMode.Transport; 
```

第二行是将 SPN 添加到连接信息的内容。在 EndpointIdentity.CreateSpnIdentity 中，字符串的格式为 AppName/ServerAddress。'AppName' 部分可以是任何东西，但我建议你的应用程序是独一无二的。我通常使用 FQDN (host.domain.com) 格式作为地址。

同样，我不确定这如何转换为配置文件。我希望这可以帮助您走上正确的道路。

# iphone - 锁定屏幕中的警报/通知

> ID：10718462
> 
> 赞同：1
> 
> 时间：2012-05-23T10:51:39.053
> 
> 标签：iphone, notifications, alert, locked

我想根据应用程序的给定时间做一个简单的**警报，如果手机被锁定，警报也会显示。**当按确定然后转到应用程序视图（如果手机被锁定）。如果我们不能以编程方式导航到应用**程序**，那么我可以手动进行屏幕解锁。但是当我解锁时，应用程序应该打开。那么有什么办法可以这样做吗？

是的，我知道我可以通过本地通知来做到这一点，但我的问题是：当我点击“查看详细信息”或任何其他按钮 + 我的手机被锁定时 - 我可以去我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:01:15.387

我认为您正在寻找本地通知，请参阅[关于本地通知和推送通知](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

# javascript - 在 JavaScript 中获取对象的键和值？

> ID：10718473
> 
> 赞同：20
> 
> 时间：2012-05-23T10:52:36.553
> 
> 标签：javascript, jquery

给定一个 JavaScript 对象数组，如何获取每个对象的键和值？

下面的代码显示了我想做的事情，但显然不起作用：

```
var top_brands = [ { 'Adidas' : 100 }, { 'Nike' : 50 }];
var brand_options = $("#top-brands");
$.each(top_brands, function() {
  brand_options.append($("<option />").val(this.key).text(this.key + " "  + this.value));
}); 
```

那么，我怎样才能得到数组`this.key`中`this.value`的每个条目呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-23T10:57:05.787

改变你的对象。

```
var top_brands = [ 
  { key: 'Adidas', value: 100 }, 
  { key: 'Nike', value: 50 }
];

var $brand_options = $("#top-brands");

$.each(top_brands, function(brand) {
  $brand_options.append(
    $("<option />").val(brand.key).text(brand.key + " " + brand.value)
  );
}); 
```

根据经验：

*   一个对象有*数据*和*结构*。
*   `'Adidas'`, `'Nike'`,`100`和`50`是*数据*。
*   对象键是*结构*。使用数据作为对象键在语义上是错误的。躲开它。

中没有语义`{Nike: 50}`。什么是“耐克”？什么是50？

`{key: 'Nike', value: 50}`稍微好一点，因为现在您可以迭代这些对象的数组，并且值位于可预测的位置。这使得编写处理它们的代码变得容易。

更好的是`{vendor: 'Nike', itemsSold: 50}`，因为现在值不仅位于可预测的位置，而且还具有有意义的名称。从技术上讲，这与上述相同，但现在人们也会理解这些值的含义。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-23T10:54:32.093

```
$.each(top_brands, function() {
  var key = Object.keys(this)[0];
  var value = this[key];
  brand_options.append($("<option />").val(key).text(key + " "  + value));
}); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-23T11:00:16.177

如果这是对象要存储的全部内容，那么最好的文字是

```
var top_brands = {
    'Adidas' : 100,
    'Nike'   : 50
    }; 
```

那么你所需要的只是一个`for...in`循环。

```
for (var key in top_brands){
    console.log(key, top_brands[key]);
    } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-23T10:57:19.440

```
$.each(top_brands, function(index, el) {
  for (var key in el) {
    if (el.hasOwnProperty(key)) {
         brand_options.append($("<option />").val(key).text(key+ " "  + el[key]));
    }
  }
}); 
```

但是如果你的数据结构是`var top_brands = {'Adidas': 100, 'Nike': 50};`，那么事情会简单得多。

```
for (var key in top_brands) {
  if (top_brands.hasOwnProperty(key)) {
       brand_options.append($("<option />").val(key).text(key+ " "  + el[key]));
  }
} 
```

或者分别使用jquery：

```
$.each(top_brands, function(key, value) {
    brand_options.append($("<option />").val(key).text(key + " "  + value));
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-10-27T12:50:12.150

```
for (var i in a) {
   console.log(a[i],i)
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-23T11:00:43.487

```
Object.keys(top_brands).forEach(function(key) {
  var value = top_brands[key];
  // use "key" and "value" here...
}); 
```

顺便说一句，请注意，`Object.keys`并且`forEach`在古代浏览器中不可用，但无论如何您都应该使用一些 polyfill。

# db2 - DB2 连接 SQL1042C 错误

> ID：10718474
> 
> 赞同：0
> 
> 时间：2012-05-23T10:52:40.147
> 
> 标签：db2

当我发出 DB2 CONNECT 命令时，我收到错误消息“SQL1042C 发生意外的系统错误”。最奇怪的是这个问题是间歇性的。

```
sqlcode: -1042; 
sqlstate: 58004; 
DB2 connect command: connect to dbname user db2admin using password; 
```

我的 DB2 版本是：DB2/NT64 9.5.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:45:24.300

[信息中心](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.messages.sql.doc/doc/msql01042c.html)提供了一些关于如何修复此错误的说明，其中之一涉及致电 IBM 寻求支持。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T14:09:17.437

您可能会在文件 db2diag.log 中找到其他信息，该文件位于 /home/db2inst1/sqllib/db2dump/db2diag.log 之类的位置。或者，您可以使用带有 db2diag -lastrecords 100 之类的选项的命令 db2diag

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-27T05:31:50.257

尝试使用

```
db2 "? sql-1042" 
```

了解更多信息。另一方面，如果您刚刚安装了新的 db2 软件代码，请尝试使用

```
db2iupdt instance_name 
```

更新 db2 实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-28T03:31:59.073

运行 db2iupdt，看起来像是二进制文件的问题，当您遇到此错误时请告诉我。如果可能，请上传以下命令输出 db2diag -g 'level=Critical'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-05T01:18:31.437

实际上 SQL1042C 的发生可能有很多原因。最好先检查 db2diag.log，因为它会给出关于这可能是什么的想法。

如果通过第一次连接激活数据库时发生这种情况，

```
db2stop
db2diag -A
db2start
db2 connect to dbname user db2admin using password
=> SQL1042C 
```

检查新 db2diag.log 上记录的内容。

正如William 之前提到的，当您立即不知道时，'db2iupdt' 是一个很好的尝试。

# linux - Bash：'$(( ))' 表示'expr' 而'[ ]' 表示'test'？

> ID：10718480
> 
> 赞同：5
> 
> 时间：2012-05-23T10:53:33.157
> 
> 标签：linux, bash

我最近一直在使用一些 bash 脚本，并且一直在查看手册页。从我收集的内容来看，是什么`$(( ))`意思？`expr``[ ]``test`

对于`$(( ))`：

```
echo $(( 5 + 3 )) 
```

具有与以下相同的输出：

```
echo $(expr 5 + 3) 
```

对于`[ ]`：

```
test 'str' = 'str' 
```

具有与以下相同的成功值：

```
[ 'str' = 'str' ] 
```

我的理解正确吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T11:09:02.597

该`((...))`构造等效于 bash 内置`let`。`let`做大部分相同的事情`expr`。

`$((...))`构造，请注意`$`开头的 ，将替换内部表达式的输出，就像做的`$(...)`那样。

该`[...]`构造实际上只是`test`.

有关更多信息，请参阅 bash 帮助页面。

*   `help "("`
*   `help let`
*   `help [`
*   `help test`

也可以看看：

*   [http://mywiki.wooledge.org/BashFAQ/031](http://mywiki.wooledge.org/BashFAQ/031)
*   [http://mywiki.wooledge.org/ArithmeticExpression](http://mywiki.wooledge.org/ArithmeticExpression)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T11:09:28.420

你是正确`[ ]`的`test`

关于`$(( ))`，这是一个更精细的替换`expr`。您可以计算比 with 更复杂的表达式`expr`。

# objective-c - 从 ViewController 调用 AppController 中的方法

> ID：10718483
> 
> 赞同：0
> 
> 时间：2012-05-23T10:53:47.320
> 
> 标签：objective-c, cocoa

我正在尝试为 OSX Lion 构建一个 Cocoa 应用程序。我的 AppController 代码中有这一行：

```
self.viewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil appController:self];
[_view addSubview:[_viewController view]];
[[_viewController view] setFrame:[_view bounds]]; 
```

LoginViewController 看起来像这样：

```
@implementation LoginViewController

@synthesize appController = _appController;

- (id) initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil appController:(AppController *)appController {

    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [self setAppController:appController];
        NSLog(@"Appcontroller init: %@", _appController);
    }    

    return self;
}

- (IBAction)login:(id)sender {

    NSLog(@"Appcontroller login: %@", _appController);
} 
```

登录方法与单击按钮相关联。

日志：

```
2012-05-23 12:45:49.574 QBLoader[3241:503] Appcontroller init: <AppController: 0x7fe2ab210440>
2012-05-23 12:45:52.085 QBLoader[3241:503] Appcontroller login: (null) 
```

为什么第二个日志行为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:18:46.160

由于您指出有多个实例`LoginViewController`，因此我会检查您的 xib 以查看您是否在任何地方创建了该类型的对象。特别是我会从你连接`-login:`动作的 xib 开始。如果您只有一个 的实例`AppController`，一种常见的方法是在您的中创建对象`MainMenu.xib`并将其附加到应用程序委托中的插座。然后你可以使用类似的东西`[[NSApp delegate] appController]`来访问它。

# oracle - Oracle：涉及其他记录的复杂约束

> ID：10718490
> 
> 赞同：0
> 
> 时间：2012-05-23T10:54:03.160
> 
> 标签：oracle, constraints

有没有办法让oracle通过约束检查表的其他记录？

举个例子：

我有一个名为的表`ENI_TRASC_VOCI_PWR_FATT`，我希望每条`tvp_regione`不为 null 的记录都有一条类似的记录`tvp_regione`= null。

对于类似的记录，我需要检查它在列上是否具有相同的值`TVP_CODICE_ASSOGGETAMEN`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:18:16.990

我能想到的唯一方法是在刷新物化视图上使用快速提交，使用如下查询定义：

```
select
  tvp_codice_assoggetamen,
  count(*)           rows_per_tca,
  count(tvp_regione) tvp_regione_per_tca
from
  eni_trasc_voci_pwr_fatt
group by
  tvp_codice_assoggetamen
/ 
```

在 MV 表上放置常规检查约束，例如 tvp_regione_per_tca = 1 如果 rows_per_tca = 2（您的要求对我来说不是很清楚）。

这通常是在 Oracle 中实现这种多行约束的唯一安全方法，没有在修改表之前锁定表以进行更改并使用代码进行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:39:13.640

根据[Oracle 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/clauses002.htm)：

> 检查约束条件不能包含以下构造：
> **子查询和标量子查询表达式**

所以你可能不得不使用触发器：

```
create or replace trigger trg
before insert or update on ENI_TRASC_VOCI_PWR_FATT
for each row

begin
   -- do whatever queries you need - I didn't understand what you want
   if <some condition> then
     raise_application_error(-20000,'no good');
   end if;
end; 
```

但要小心！触发器不像约束 - 想想如果两个用户更新表会发生什么......

# android - 弹出窗口停用边框

> ID：10718493
> 
> 赞同：5
> 
> 时间：2012-05-23T10:54:08.663
> 
> 标签：android

如果它们到达我的应用程序底部，我正在尝试创建覆盖显示通知。

我计划使用 PopupWindow 这样做，因为它很容易集成到每个活动中，而无需麻烦地拥有一个将叠加层作为屏幕上最后一个元素的 RelativeLayout。

我的测试代码如下所示：

```
 popUp = new PopupWindow(this);
 popUp.setContentView(LayoutInflater.from(this).inflate(R.layout.testwindow, null));
 popUp.showAtLocation(layout, Gravity.BOTTOM, 0, 0);
 popUp.update(0, 0, width, height); 
```

其中宽度和高度是我的设备的大小。但问题是弹出窗口不会覆盖整个屏幕，会显示一个小边框——这不在我的布局中——还有一些填充。

我已经尝试将布局文件中的边框设置为 0px，并为测量的屏幕宽度添加偏移量和额外宽度。但是左侧的填充无法删除。

我该怎么做才能将覆盖层拉伸到窗口的整个宽度？现在看起来像这样： ![不工作覆盖](../Images/a5f94174628ee443d90e1cabdefbee75.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-12T16:01:19.513

已经好几年了，但我正在为可能面临类似问题的其他人提出解决方案。

1.  您可以添加以下内容，但 BitmapDrawable 已弃用，现在需要您传入上下文。

`popUp.setBackgroundDrawable(new BitmapDrawable());`

或者

2.  我更喜欢这个解决方案，因为我传入 null 并避免潜在的泄漏和清理。

`popUp.setBackgroundDrawable(null);`

# ios - 使用 coreplot 绘制多个饼图

> ID：10718494
> 
> 赞同：0
> 
> 时间：2012-05-23T10:54:15.040
> 
> 标签：ios

如何使用 coreplot 绘制多个饼图。是否可以并排绘制这些饼图？

问候，

克里希纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:12:13.713

是的，克里希纳。您可以将多个饼图添加到同一个图表中，如下所示：

```
CPTGraphHostingView *hostingView = (CPTGraphHostingView *) self;
CPTXYGraph      *graph;
// set up the graph parameters
...
...
hostingView.hostedGraph          = graph;  
// Pie chart 1
CPTPieChart *pieChart1           = [[CPTPieChart alloc] init];
// Pie Chart 2
CPTPieChart *pieChart2           = [[CPTPieChart alloc] init];

// Add them to the graph
[graph addPlot:pieChart1];
[graph addPlot:pieChart2]; 
```

# java - 在 Java 中以编程方式杀死 selenium 服务器进程

> ID：10718495
> 
> 赞同：1
> 
> 时间：2012-05-23T10:54:15.993
> 
> 标签：java, eclipse, selenium, process

我正在通过我自己的 Eclipse 插件以编程方式在 selenium 服务器上启动 selenium html 套件。现在成功执行，浏览器启动并开始运行套件。但是，如果“智能”用户决定简单地关闭浏览器中间测试，则 selenium 服务器进程将在 Eclipse 中运行。如果它被用完，一切都很好，一旦套件完成，服务器就会关闭等。但是，在终止浏览器进程后，进程中似乎没有任何触发。

现在我知道如果我通过命令行执行此操作，我可以简单地 ctrl+c 并触发 shutdownhook 并友好地关闭服务器。但不幸的是，我通过我的 Eclipse 插件以编程方式创建了这个过程，并且不希望这个插件的场景卡在测试实际上已经关闭时认为它仍在运行。

有没有人经历过这种情况并找到解决这个问题的方法？我愿意接受建议。

我目前的想法是运行一个单独的线程来不断检查硒服务器的状态，看看它是否实际上是空闲的......但是我还没有找到关于在哪里可以检查硒服务器状态的信息？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:40:19.657

但是，您可以为 Selenium 套件编写方法，该套件将在测试完成后启动服务器并关闭服务器实例`startup()`。`teardown()`

因此，您可以使用 JUnit 或 TestNG 并添加这些方法来调用 selserver 启动和 selenium 服务器关闭。

# c++ - C ++冒泡排序，如何忽略相同的数字

> ID：10718496
> 
> 赞同：0
> 
> 时间：2012-05-23T10:54:21.397
> 
> 标签：c++, algorithm, sorting, bubble-sort

我正在使用冒泡排序对数组中的数字按从低到高的顺序进行排序。但是有些数字是相同的，但我不需要将它们打印两次。那么如何检查它是否已经打印而不重复操作呢？

冒泡排序：

```
for(int i=0;i<n-1;i++){
        for(int j=i+1;j<n;j++){

            if(m[i]>m[j]){
                temp=m[i];
                m[i]=m[j];
                m[j]=temp;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T10:58:40.143

由于数字在打印时已经排序，您可以存储最后打印的数字并在打印前与之比较。

就像是：

```
std::cout << m[0] << std::endl;
int last_print = m[0];

for(int i = 1; i < n; ++i)
{
  if(m[i] != last_print)
  {
    std::cout << m[i] << std::endl;
    last_print = m[i];
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T11:00:13.577

打印时过滤掉重复项（假设 m 为 int[]）

```
 int last = 0;
 for(int i=0;i<n;i++){
    int num = m[i];
    if (i == 0 || last != num) {
       // print num;
    }
    last = num;
 } 
```

或者如果你不喜欢太多的变量，可以这样

```
 for(int i=0;i<n;i++){
    if (i == 0 || m[i - 1] != [i]) {
       // print m[i];
    }
 } 
```

或者，您可以在排序时删除重复项

```
for(int i=0;i<n-1;i++){
    for(int j=i+1;j<n;){

        if (m[i]==m[j]) {  // remove
           m [j] = m [n - 1];  // replace with last
           n --;               // cut last
        } else {
          if(m[i]>m[j]){
            temp=m[i];
            m[i]=m[j];
            m[j]=temp;
          }
          j ++;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T10:55:48.923

您可以在打印后立即将号码添加到 a`std::set`中，并在打印之前检查所有号码是否在集合中。

编辑：我错过了数字排序的限制。在这种情况下， a`set`与仅跟踪最后打印的数字并仅打印与它不同的数字相比，是多余的并且效率较低。

# javascript - 修复 Fusion Tables 地图中的非工作搜索字段和表格

> ID：10718499
> 
> 赞同：0
> 
> 时间：2012-05-23T10:54:31.500
> 
> 标签：javascript, google-maps, google-fusion-tables

我被 Github 的一段调整后的代码困住了。[来源][https://github.com/chrislkeller/failed-us-banks-since-2000] 是这张关于美国银行倒闭的优秀地图。[此处的实时示例][http://www.projects.chrislkeller.com/failed-us-banks-since-2000/]。

我想在 2012 年欧洲杯上与所有球员制作一张地图。[这里是现场示例][http://www.jerryvermanen.nl/ekkaart/index.html] 我已经走了多远。

我在这张地图上有两个主要问题（忽略信息窗口，它仍然错过了一个包含特定比赛中玩家数量的额外字段。-我的搜索字段不起作用。为什么？代码中的哪些调整可以解决这个问题？-如果我点击我的表格，它不会捕捉到比赛（比赛所在国家/地区的 KML）。同样，为什么它不起作用，我怎样才能让它起作用？

在这里检查我的代码

```
<!DOCTYPE html>
<html lang="">

<head>

<meta charset="utf-8">

<!-- begin meta -->
<title>Selecties EK 2012</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="keywords" content="Ek 2012, voetbal, selecties" />
<meta name="description" content=">Vind alle spelers die naar het EK voetbal 2012 gaan op land van herkomst en club." />
<!-- end meta -->

<!-- begin css -->
<link rel="stylesheet" type="text/css" href="css/styles.css" media="screen" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

</head>
<!-- end header -->

<!-- begin body -->
<body onload="initialize()">

<!-- begin map container -->
<div id="map-container">

<!-- begin action bar -->
<div id ="map-action-bar">

</div>
<!-- end action bar -->

<!-- begin map -->
<div id="map_canvas"></div>
<!-- end map -->

<!--begin map explainer -->
<div id="map-explainer">
<h1>Selecties EK 2012</h1>
<p>Op ... juni begint het EK voetbal 2012\. De 24 deelnemende landen strijden voor een plek in de finale op ... juli, om vervolgens tot Europees Kampioen gekroond te worden.</p>

<p>Op welke spelers staan de schijnwerpers tijdens deze voetbalmaand? En welke competities leveren de meeste EK-gangers af?</p>

<!-- begin credits -->
<div id="smalltype">
<p>Gemaakt door <a href="http://twitter.com/#!/JerryVermanen" target="_blank">Jerry Vermanen.</a>
<p>Code via <a href="http://twitter.com/#!/ChrisLKeller" target="_blank">Chris Keller.</a></br>
<a href="www.jerryvermanen.nl" target="_blank">Download de data</a><br />
<a href="https://github.com/chrislkeller/failed-us-banks-since-2000" target="_blank">Code op GitHub</a>
</p>
</div>
<!-- end credits -->

</div>
<!-- end map explainer -->

<!-- begin table -->
<div id="visualization"></div>
<!-- end table -->

</div>
<!-- end map container -->

</body>
<!-- end body -->

<!-- scripts -->
<script type="text/javascript"src="http://maps.google.com/maps/api/js?sensor=false&region=us"></script>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript" src="scripts/ek2012.js"></script>
<!-- end scripts -->

<!-- begin analytics code -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setaccount', '']);
  _gaq.push(['_setdomainname', '']);
  _gaq.push(['_trackpageview']);

  (function() {
    var ga = document.createelement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getelementsbytagname('script')[0]; s.parentnode.insertbefore(ga, s);
  })();
</script>
<!-- end analytics code -->

</html>
<!-- end document --> 
```

和 js 文件

```
//write the map on page load
$(document).ready(function() {

    createMap();

});

//select menu - out-thought myself with this one and couldn't create dynamically
var searchVariables = '<select id="newComp">' +
'<option value="">Alle competities</option>' +
'<option value="Belgische competitie">Belgische competitie</option>' +
'<option value="Bundesliga">Bundesliga</option>' +
'<option value="Championship">Championship</option>' +

'</select>' +
'<select id="NewClub">' +
'<option value="">Alle EK-landen</option>' +
'<option value="ZWE">ZWE</option>' +
'<option value="IER">IER</option>' +
'</select>' +
'<input type="button" class="mapActionButton" value="Search" id="searchBanks" onclick="changeSearch()"/>' +
'<input type="button" class="mapActionButton" value="Reset Map" onClick="window.location.href=window.location.href" />';

//ft layer
var layer; 

//ft table
var tableid = 3976074;

//map
var map;

//geocoder instance
var geocoder = new google.maps.Geocoder();

//gviz
var table;

//FT data in gviz object
var datatable;

//infowindow
var infowindow;

//center of map
var center = new google.maps.LatLng(40,0);

//default zoom
var zoom = 1;

google.load('visualization', '1', {'packages':['table']});

function createMap() {

        //map options
        map = new google.maps.Map(document.getElementById('map_canvas'), {
            center: center,
            zoom: zoom,
            minZoom: 2,
            maxZoom: 6,
            scrollwheel: true,      
            disableDragging: true,
            mapTypeControl: false,
            navigationControl: true,
            streetViewControl: false,
            scaleControl: false,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.SMALL,
                position: google.maps.ControlPosition.RIGHT_TOP}
        });

        //intial fusion layer & supress fusion info window
        layer = new google.maps.FusionTablesLayer(tableid, {suppressInfoWindows: true});
        layer.setQuery("SELECT Location FROM " + tableid);
        layer.setMap(map);

        //writes the select menus to the search bar     
        document.getElementById('map-action-bar').innerHTML = searchVariables;

        //adds click listener on layer
        google.maps.event.addListener(layer, 'click', function(e) {
        if(infowindow) infowindow.close();
        else infowindow = new google.maps.InfoWindow();

            //write FT data to info window
            text = infowindow.setContent(
                '<p>De ' + e.row['Competitie'].value +
                ' levert ' + e.row['Speler'].value +
                ' internationals.'
            );          

            infowindow.setPosition(e.latLng);
            map.setCenter(e.latLng);
            infowindow.open(map);       
        });

        //query FT data for visualization
        var queryText = encodeURIComponent("SELECT Speler, Competitie, Land, Club FROM 3976074 ORDER BY Speler ASC");
        var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText);
        query.send(getData);
}

        //write FT data to table
        function getData(response) {
            table = new google.visualization.Table(document.getElementById('visualization'));
            datatable = response.getDataTable();
            table.draw(datatable, {showRowNumber: true});

            //add table listener when row clicked
            google.visualization.events.addListener(table, 'select', selectHandler);
        }
        //end function

        //match table data to map data
        function selectHandler() {

            //get lat/lng from FT
                var selection = table.getSelection();
                var Competitie = datatable.getValue(selection[0].row, 0);
                var Club = datatable.getValue(selection[0].row, 1);
                var Speler = datatable.getValue(selection[0].row, 2);
                var Land = datatable.getValue(selection[0].row, 3);

            infoWindowContent = (
            '<p>De ' + e.row['Competitie'].value +
                ' levert ' + e.row['Speler'].value +
                ' internationals.'
            );  

        }

        /* search function based on user's selection
        that I wrote longhand, though there must 
        be some kind of shortcut because I'm basically
        rewriting the main function again? */
        function changeSearch(comper, cluber) {
            if(infowindow) infowindow.close();
            layer.setMap();

                //assigns select menu values to variables
                comper = document.getElementById('newComp').value;
                cluber = document.getElementById('newClub').value;

            //sets new layer to map
            layer = new google.maps.FusionTablesLayer(tableid, {suppressInfoWindows: true});

            //with a query based on the variables
            layer.setQuery("SELECT Location FROM " + tableid + " WHERE Competitie CONTAINS '" + comper + "' AND Land CONTAINS '" + cluber);

            //and sets the map
            layer.setMap(map);

            /* here we build the table again but based on the variables from the menu values */
            var queryText = encodeURIComponent("SELECT Speler, Competitie, Land, Club" + tableid + " WHERE Competitie CONTAINS '" + comper + "' AND Land CONTAINS '" + cluber + "' ORDER BY 'Speler' ASC");
            var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText);
            query.send(getData);

            //adds a click listener on search layer
            google.maps.event.addListener(layer, 'click', function(e) {
             if(infowindow) infowindow.close();
             else infowindow = new google.maps.InfoWindow();

                //writes the info window on search layer
                infowindow.setContent(
                '<p>De ' + e.row['Competitie'].value +
                ' levert ' + e.row['Speler'].value +
                ' internationals.'
            );  

                infowindow.setPosition(e.latLng);
                map.setCenter(e.latLng);
                infowindow.open(map);
            });

        }
        //end function

  [1]: https://github.com/chrislkeller/failed-us-banks-since-2000
  [2]: http://www.projects.chrislkeller.com/failed-us-banks-since-2000/
  [3]: http://www.jerryvermanen.nl/ekkaart/index.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:06:33.433

我将您的示例简单化了一点并将其放在 jsFiddle 上：http: [//jsfiddle.net/odi86/SdX4h/](http://jsfiddle.net/odi86/SdX4h/)

你基本上有2个小错误：

*   第二个选择框的 id 是“NewClub”，但您使用“newClub”访问它，这不起作用，因为`document.getElementById()`区分大小写
*   您在函数中生成的 SQL 查询`changeSearch()`错误

这：

```
var queryText = encodeURIComponent("SELECT Speler, Competitie, Land, Club" + tableid + " WHERE Competitie CONTAINS '" + comper + "' AND Land CONTAINS '" + cluber + "' ORDER BY 'Speler' ASC"); 
```

应该：

```
var queryText = encodeURIComponent("SELECT Speler, Competitie, Land, Club FROM " + tableid + " WHERE Competitie CONTAINS '" + comper + "' AND Land CONTAINS '" + cluber + "' ORDER BY 'Speler' ASC"); 
```

不必每次更改搜索值时都重新创建 FusionTablesLayer，您可以使用以下语法（这也可以防止您出现上述 SQL 错误）：

```
var fields = "Speler, Competitie, Land, Club";
var tableId = 3976074;
var whereClause = "Competitie CONTAINS '" + comper + "' AND Land CONTAINS '" + cluber + "'";
layer.setOptions({
   query: {
            select: fields,
            from: tableId,
            where: whereClause
   }
}); 
```

# c# - 如何在 DB2 中忽略字符串比较的大小写（CurrentCultureIgnoreCase 不起作用）

> ID：10718501
> 
> 赞同：0
> 
> 时间：2012-05-23T10:54:36.210
> 
> 标签：c#, .net, entity-framework, db2

CurrentCultureIgnoreCase 操作在 SQL Server 实例上运行良好。但是，它不适用于我拥有的同一应用程序的 DB2 实例。

我尝试了以下方法：

工作（尽管担心性能下降）：

```
s.POSTCODE.Trim().ToLower() == q.Trim().ToLower(); 
```

不工作：

```
s.POSTCODE.Trim().Equals(q, StringComparison.OrdinalIgnoreCase); 
```

不工作：

```
s.POSTCODE.Trim().Equals(q, StringComparison.CurrentCultureIgnoreCase); 
```

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:02:51.387

采用`string.Equals()`

所以：`string.Equals(s.POSTCODE.Trim(), q.Trim(), StringComparison.CurrentCultureIgnoreCase);`

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:28:53.010

无论出于何种原因，唯一适用于 DB2 的字符串比较名称是：

```
s.POSTCODE.Trim().ToLower() == q.Trim().ToLower(); 
```

尝试了各种替代形式，但没有运气。

# sql - SQL 语句（插入/加入/联合所有？？？）

> ID：10718505
> 
> 赞同：0
> 
> 时间：2012-05-23T10:55:00.440
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

大家早，

我有两个 Web 表单（WeeklyAgenda 和 MonthlyAgenda），其中包含会议记录，它们都是我数据库中的单独表格。这些网页还允许用户向我的数据库中的操作表添加操作。

更新数据时，会议纪要和行动都有一个单独的按钮分配给它们。Actions 区域允许用户仅添加三个字段（Action、Owner 和 Targetdate）。

我的 Actions 表有我想要填充的其他列（AgendaID、AgendaDate、AgendaTypeDescription 和 ActionStatusID）。这些附加栏已经在网页上可用，因为它们是用户已经填写的议程表格的一部分。

我不想再次将这些字段添加到我的操作区域并让用户再次添加这些字段，而是希望通过尝试使用已经添加的这些字段（AgendaID、AgendaDate、AgendaTypeDescription 和 ActionStatusID）来节省自己和 Joe Bloggs 的时间。的议程表，并提取它们并以某种方式将它们与其余字段（操作、所有者和目标日期）一起导入，并将这些添加到操作表中。

本质上，数据已经存在，但分布在三个表中。

我一直在尝试在存储过程中在这些表之间建立连接，以便将额外的文件插入到 Actions 表中。

我不太确定如何完成这项工作，并尝试了 Joins 和 UNION ，但没有设法让它工作？

我知道我需要从 WeeklyAgenda 表和 MonthlyAgenda 表中加入 AgendaID、AgendaDate 和 AgendaTypeDescription。

到目前为止，这是我用于操作表存储过程的代码（无需附加字段即可工作）...

```
 ALTER PROCEDURE [dbo].[Add_Action_Insert]
     @ActionID INT OUTPUT,
@Action VARCHAR(MAX),
     @Owner VARCHAR(50),
     @TargetDate DATETIME
 AS
 INSERT INTO Action (
                    Action,
          Owner,
               TargetDate)                  
    VALUES (
        @Action,
        @Owner,
        @TargetDate)
    SELECT @ActionID = scope_identity() 
```

这就是我想将其更改为...

```
 Alter PROCEDURE [dbo].[Add_Action_Insert_Test]
     @ActionID INT OUTPUT,
@AgendaID INT,
@AgendaDate DATETIME,
@AgendaTypeDescription VARCHAR(50),
@Action VARCHAR(MAX),
     @Owner VARCHAR(50),
     @TargetDate DATETIME,
@ActionStatusID INT
  AS
  INSERT INTO Action (
        AgendaID,
        AgendaDate,
        AgendaTypeDescription,
        Action,
        Owner,
        TargetDate,
        ActionStatusID)                 
    VALUES (
        @AgendaID,
        @AgendaDate,
        @AgendaTypeDescription,
        @Action,
        @Owner,
        @TargetDate,
        @ActionStatusID)
    SELECT @ActionID = scope_identity() 
```

这是我现在在数据库中拥有的数据的图像...... ![我目前拥有的](../Images/620f73217bc4697d925616712ac08d2c.png)

这是我想要在我的数据库中的图像... ![我想达到什么](../Images/59e3c5bbf79fb00b7e7ae2b639eedc64.png)

我appriechiate我得到的任何信息和帮助。我只是不确定我是否需要从其他两个 tanles 中插入此附加信息或加入？

提前谢谢了。贝蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:42:15.357

我不确定您为什么*要将 AgendaDate*和*AgendaTypeDescription*列也分配给*Action*表。这两列应该只保留在*议程*表中。然后，当从*Action*表中检索数据时，您将像这样加入*Agenda*表：

```
SELECT ac.AgendaID, ag.AgendaDate, ag.AgendaTypeDescription, ag.Action, ac.Ownder, ac.TargetDate
 FROM MonthlyAgenda AS ag
 JOIN Action AS ac ON ag.AgendaID = ac.AgendaID
UNION
SELECT ac.AgendaID, ag.AgendaDate, ag.AgendaTypeDescription, ag.Action, ac.Ownder, ac.TargetDate
 FROM WeeklyAgenda AS ag
 JOIN Action AS ac ON ag.AgendaID = ac.AgendaID 
```

如果您决定在*Action表中保留**AgendaDate*和*AgendaTypeDescription*，您至少需要在 Add_Action_Insert_Test 过程中添加一个参数*@AgendaID*来标识该操作属于哪个议程。

 **然后您的程序将如下所示：

```
ALTER PROCEDURE [dbo].[Add_Action_Insert_Test] 
  @ActionID INT OUTPUT, 
  @AgendaID INT, 
  @Action VARCHAR(MAX), 
  @Owner VARCHAR(50), 
  @TargetDate DATETIME, 
  @ActionStatusID INT 
AS 
INSERT INTO Action ( 
    AgendaID, 
    AgendaDate, 
    AgendaTypeDescription, 
    Action, 
    Owner, 
    TargetDate, 
    ActionStatusID)                  
SELECT
    @AgendaID,
    AgendaDate,
    AgendaTypeDescription,
    @Action, 
    @Owner, 
    @TargetDate, 
    @ActionStatusID
FROM MonthlyAgenda WHERE AgendaID = @AgendaID
UNION
SELECT
    @AgendaID,
    AgendaDate,
    AgendaTypeDescription,
    @Action, 
    @Owner, 
    @TargetDate, 
    @ActionStatusID
FROM WeeklyAgenda WHERE AgendaID = @AgendaID

SELECT @ActionID = scope_identity() 
```

在此示例中，我假设*WeeklyAgenda*和*MonthlyAgenda*中的*AgendaID*值是分离的。这意味着 WeeklyAgenda 中的任何*AgendaID*都*不能*出现在*MonthlyAgenda 中*，反之亦然。例如，您可以通过在一个表中使用偶数 ID 和在另一个表中使用奇数 ID 来实现它（使用列的 IDENTITY 属性的一些高级设置）。**

# ios - iOS逐帧向前/向后播放视频

> ID：10718515
> 
> 赞同：3
> 
> 时间：2012-05-23T10:55:41.223
> 
> 标签：ios, video, avfoundation, frame, timelapse

我想在 iOS 设备上以慢动作显示视频。

我的视图包含一个视频（约 2 秒长）和一个滑块。

用户可以在电影中逐帧移动滑块和步进（向前和向后）。

`MPMoviePlayerController`缺乏逐帧步进的能力。

我读到了`MVAssetReader`，但我不知道如何使用它。

我没有固定的帧率，所以它应该从视频的元数据中提取这些信息。我真的需要展示每一帧。

有人可以给我一个线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:49:07.573

AV Player Demo WWDC 2010 示例代码的示例代码可以帮助您完成任务

从视频中剪切缩略图在 WWDC 2010 AV Editing with AV Foundation Framework 和许多其他关于使用示例代码编辑音频和视频的内容中进行了解释

如果您有开发者帐户（付费），那么您可以在 iTunes 上观看视频

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T22:02:04.720

AVFoundation 是一个非常强大的框架，但比 MPMoviePlayerController 需要更多的输入和理解才能使用。我强烈推荐 Dinesh 的建议来观看 WWDC 视频、查看示例代码并阅读文档。该文档非常有助于获得概念性的理解，但在涉及实际视频格式的细节时缺少一些细节。为此，示例代码和实验很好。

如果您想逐帧进行，那么我认为 AVPlayerItem stepByCount: 是要走的路。

```
// Setup a PlayerItem and a Player
NSURL* movieURL = [NSBundle URLForResource:@"movie" withExtension:@"mov" subdirectory:@"" inBundleWithURL:[NSBundle mainBundle].bundleURL];
AVURLAsset* movieAsset = [AVURLAsset assetWithURL:movieURL];
AVPlayerItem* playerItem = [AVPlayerItem playerItemWithAsset:movieAsset];
AVPlayer* player = [AVPlayer playerWithPlayerItem:playerItem];

// setup the layer so you can see it
AVPlayerLayer* playerLayer = [AVPlayerLayer playerLayerWithPlayer:player];
playerLayer.frame = self.view.bounds;
[self.view.layer addSublayer:playerLayer];

// Verify our assumptions, in production code you should do something better
NSAsset(player.currentItem.canStepForward, @"Assume this format can step forward");    
NSAsset(player.currentItem.canStepBackward, @"Assume this format can step backward");

[player.currentItem stepByCount:1];  // step forward a frame

[player.currentItem stepByCount:-1];  // step backward a frame 
```

# jquery - 部分后的 Jquery 和单选按钮事件可见

> ID：10718524
> 
> 赞同：0
> 
> 时间：2012-05-23T10:56:27.167
> 
> 标签：jquery

这是我第一次在 stackoverflow 上发布我的查询。我创建了一个表格，表格中有几个城市的下拉列表。在下拉更改相关的单选按钮组上显示。每个单选按钮的名称都与“preferred_location”相同。

在任何单选按钮选择上，我都想将一个复选框标记为已选中。我在网上尝试了很多可用的选项，它们听起来很简单，可以在演示中使用，但在我的代码中却没有。为了查看我在下面发布了我的代码示例：

jQuery脚本

```
$(document).ready(function(){
        $("#address input[name*='redio']").click(function() {
            $('#note').removeClass("inactive").addClass("active");
        });  
    }); 
```

要在更改下拉列表时显示单选按钮组，我使用以下代码

```
if(valuecheckdrop == "Coimbatore"){ 
   $("#address").html("<h2>Select date of info session:</h2>",
       "<p>",
       "<input type='radio' name='preferred_location' value='Radio1' class='redio' /> Radio1",
       "</p>",
       "<p class='sub'>address</p>",
       "<p class='option'>",
           "<input type='radio' name='preferred_location' value='Radio2'  class='redio' />Radio2",
       "</p>",
       "<p class='sub'>Address2</p>");
} 
```

在单选按钮的下拉更改组中显示，但单击单选按钮时没有任何反应。

是因为我在下拉更改事件上调用单选按钮吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:59:15.973

```
 $(document).ready(function () {
                $("#graduate").change(function () {
                    var valuecheckdrop = $("#graduate").val();
                     $('#cbTest').prop('checked', false);
                    if (valuecheckdrop == "") {
                        $("#note").show();

                        //$("#address").removeClass("addresson").addClass("addressoff");
                        //Or
                        $("#address").html('');

                    } else {
                        $("#note").hide();

                        //$("#address").removeClass("addressoff").addClass('addresson');

                        switch (valuecheckdrop) {
                            case 'Bangalore':
                                $("#address").html("<h2>Select date of info session:</h2><p><input type='radio' name='preferred_location' value='June 2, 2012, Sat 11am - 1pm The Presidency, No. 1 St Marks Road' class='redio' /> June 2, 2012 <span>(Sat 11am - 1pm)</span></p><p class='sub'>The Presidency, No. 1 St Marks Road</p><p class='option'><input type='radio' name='preferred_location' value='June 2, 2012, Sat 3pm - 5pm Manipal Center, Dickenson Road' class='redio' /> June 2, 2012 <span>(Sat 3pm - 5pm)</span></p><p class='sub'>Manipal Center, Dickenson Road</p><p class='option'><input type='radio' name='preferred_location' value='June 3, 2012, Sun 12noon - 5pm Taj Gateway Hotel, Residency Road' class='redio' />June 3, 2012 <span>(Sun 12noon - 5pm)</span></p><p class='sub'>Taj Gateway Hotel, Residency Road</p><p class='option'><input type='radio' name='preferred_location' value='June 4, 2012, Mon 11am - 1pm S&B Towers, MG Road' class='redio' />June 4, 2012 <span>(Mon 11am - 1pm)</span></p><p class='sub'>S&B Towers, MG Road</p>");
                                break;
                            case 'Chandigarh':
                                $("#address").html("<h2>Select date of info session:</h2><p><input type='radio' name='preferred_location' value='May 26, 2012, Sat 10:30am - 5:30pm The Park Hote, Anna Salai' class='redio' /> May 26, 2012 <span>(Sat 10:30am - 5:30pm)</span></p><p class='sub'>The Park Hote, Anna Salai</p><p class='option'><input type='radio' name='preferred_location' value='May 28, 2012, Mon 1pm - 3pm No. 16, Nungambakkam' class='redio' />May 28, 2012<span>(Mon 1pm - 3pm)</span></p><p class='sub'>No. 16, Nungambakkam</p><p class='option'><input type='radio' name='preferred_location' value='May 28, 2012, Mon 10am - 12noon Sindur Shopping Centre, Anna Nagar' class='redio' /> May 28, 2012 <span>(Mon 10am - 12noon)</span></p><p class='sub'>Sindur Shopping Centre, Anna Nagar</p>");
                                break;
                        }

                        //$("#address").find(':radio:first').prop('checked', true);
                    }
                });

                $("#graduate").trigger('change');

                $("#address").find(':radio').live('click', function (e) {
                    $('#cbTest').prop('checked', $("#address").find(':radio:checked').length > 0);
                });
            });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:00:35.370

试试这个

```
$(document).ready(function(){
    $("#address input[name*='radio']").on('click',function() {
        $('#note').removeClass("inactive").addClass("active");
    });
}); 
```

# java - 二维 AtomicInteger 数组

> ID：10718525
> 
> 赞同：4
> 
> 时间：2012-05-23T10:56:28.290
> 
> 标签：java, multidimensional-array, atomic

嘿，所以我想知道如何使[AtomicInteger](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicInteger.html)成为二维数组，从我在 javadocs [AtomicIntegerArray](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicIntegerArray.html)上找到的内容来看，它只是一维的。

```
int[] newArray = new int[100];
AtomicIntegerArray atomicarray = new AtomicIntegerArray(newArray); 
```

这会创建一个大小为 100 的 AtomicIntegerArray。但我想要一个具有二维的 atomicarray。我试过做..

```
AtomicInteger[][] atomicArray = new AtomicInteger[100][100];
atomicArray[00][00].set(1); 
```

但是遇到了..

> nz.ac.massey.threadpool.MyClass.(MyClass.java:20) 的 java.lang.NullPointerException

那么有什么想法吗？谢谢！:)...我以前没有对原子变量做过很多工作。

如果这是不可能的，我怎样才能将一个常规的原始整数两个暗淡数组最小化为一个 AtomicInteger 两个暗淡数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T11:03:27.033

只需创建一个长度为的一维数组`m * n`，然后您需要一个将一对整数映射`(i, j)`到一个整数的函数。`i * n + j`是一个好的开始。假设`m`是行`n`数和列数。

将所有整数保存在 AtomicIntegerArray 中是个好主意。或者你必须自己处理并发问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:01:20.340

您需要在访问它们之前实例化矩阵中的*所有位置，如下所示：*

```
atomicArray[i][j] = new AtomicInteger(); 
```

或者这样，如果你想用某个初始值初始化每个原子整数：

```
atomicArray[i][j] = new AtomicInteger(initialValue); 
```

那，对于`i,j`矩阵中的所有位置。通常你会使用几个嵌套`for`循环来做到这一点：

```
for (int i = 0; i < 100; i++) {
    for (int j = 0; j < 100; j++) {
        atomicArray[i][j] = new AtomicInteger();
    }
} 
```

# html - IE6 浮动 div 无法正确清除

> ID：10718526
> 
> 赞同：4
> 
> 时间：2012-05-23T10:56:30.547
> 
> 标签：html, css, internet-explorer-6, cross-browser

我正在尝试使用浮动元素制作一个 2 列的“表格”：

```
<ul>
  <li class="odd">This will appear on the left</li>
  <li class="even">This will appear on the right</li>
  <li class="odd">This will appear on the left (2)</li>
  <li class="even">This will appear on the right (2)</li>
  <li class="odd">This will appear on the left (3)</li>
  <li class="even">This will appear on the right (3)</li>
</ul> 
```

CSS：

```
ul { 
    margin: 20px 0px; 
    width: 880px;
}

li {
    position: relative;
    float: left;
    width: 410px;
    margin: 0px 0px 10px 0px;
    padding: 0;
}

.odd { clear: left; }

.even {
    clear: right;
    margin-left: 50px;
} 
```

[这是一个 JSFiddle](http://jsfiddle.net/aeBex/)

这很好用，但在 IE6 中，`even`元素不清晰，最终水平堆叠在第一行。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:00:51.623

如果你将元素设为容器的 50% 宽度，并将它们全部浮动到左侧，那么每个元素将浮动到最后一个元素旁边，直到有 2 个元素，然后下一个元素将出现在下一行。

```
ul { 
    width: 880px;
    overflow:hidden; /* to clear */
}

li {
    float: left;
    width: 50%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:45:55.953

这就是我所做的。这是对 errkk 答案的轻微改编，所以我会将他标记为已接受。

```
li { width: 48%; }

.odd { clear: both; }

.even { margin-left: 4%; } 
```

# wpf - 神经网络代码在控制台应用程序中有效，但在 WPF 应用程序中无效

> ID：10718527
> 
> 赞同：0
> 
> 时间：2012-05-23T10:56:36.917
> 
> 标签：wpf, c#-4.0, neural-network

我使用模型连接到数据库，它有电子邮件来处理它们并将它们输入到神经网络，NN的输出在consol上很好但在wpf上很差，换句话说，当电子邮件时测试消息的概率大于0.8556546是垃圾邮件，火腿的概率小于 0.005465465 ***当我***在 Wpf 上使用相同的代码时，结果模棱两可；换句话说，NN 对每次训练的同一消息给出不同的概率；例如：垃圾邮件测试消息的概率 0.25654654 、0.9999 和 0.45654564654、0.5564654654 ；火腿测试消息的结果相同；最后，我将 consol 作为项目添加到解决方案中以在其上运行代码，并被 wpf 项目引用以在 wpf 上显示结果，

**注意：** Wpf 和 Consol 的代码相同 *谢谢*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:30:49.600

没有充分的理由会这样。

所以当你运行测试时发生了一些事情。如果您使用的是同一个程序集，则差异可能是由测试集、操作系统、.NET 平台版本或其他外部影响（通常是测试人员或程序员）之间的差异造成的

# c# - 使用对象时的接口或类

> ID：10718531
> 
> 赞同：0
> 
> 时间：2012-05-23T10:56:57.537
> 
> 标签：c#, .net, interface

在我的项目中，我定义了一个接口来描述每个不同的数据库连接类必须具有的方法。这被称为`IDatabaseConnectivityObject`。我的每个类都实现了这个接口，以确保它们都包含相同的方法来运行查询、建立连接等。

考虑以下代码：

```
IDatabaseConnectivityObject adoDataBaseConnection = new DbProviderFactoryConnection();

DbProviderFactoryConnection adoDataBaseConnection = new DbProviderFactoryConnection(); 
```

上述行的行为是否相同？如果是，为什么？如果没有，那为什么不呢？两者有什么好处？

这可能是一个非常愚蠢的问题，但我没有使用接口那么久，我不确定第 1 行是做什么的。我的理解是你不能创建一个接口的实例，因为它只是定义了行为，那么这条线怎么可能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:01:05.117

> 上述行的行为是否相同？如果是，为什么？

在运行时是的。不同之处在于，如果您声明类型变量，`IDatabaseConnectivityObject`那么在编译时您将只能在变量上看到此接口的成员。另一方面，如果您将其声明为，`DbProviderFactoryConnection`那么您将看到该类的所有成员。

作为一种好的做法，建议在声明变量（在这种情况下）时始终使用层次结构中可能的最高类型，`IDatabaseConnectivityObject`这允许您访问消费者需要的所有成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:00:14.583

第一个将允许您交换`IDatabaseConnectivityObject`前进的不同实现。

这是一个很好的做法，因为它可以让您的系统更能抵抗向前发生的变化。保持较低的变革成本是关键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T11:03:22.243

接口定义了消费者可以依赖的合约，如果你愿意，也可以定义 API。如果您打算使用界面上存在的成员，则这两行在功能上是相同的。

使用接口只是表示你不在乎某些东西是如何实现的，只是为了契约而实现它。接口也促进了松散耦合。

针对接口进行编程的好处是，您是针对“协议”而不是“执行”或合同而不是实现进行编程。这对测试有很大的积极影响，因为您可以在测试期间模拟或存根接口以减少测试场景中无关依赖项的数量。

与上述类似的好处是，使用接口以及工厂模式、IoC 或 DI 之类的东西，您可以动态提供接口的不同实现——例如，为不同的客户提供不同的业务逻辑处理程序。

另一个好处是它有助于解决缺乏多重继承的问题。大多数东西都可以通过接口很好地表达，类可以实现多个接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T11:01:01.067

你已经要求福利了。

当您针对接口进行编程（并使用工厂创建具体类型）时，这使得单元测试更容易，因为您可以模拟放入逻辑（单元）的实例。

这实际上是一个“设计模式原则”：

> “编程到‘接口’，而不是‘实现’。” （四人帮 1995:18）

# c - 一个简单的 C 程序中稍微深奥的 gcc 错误

> ID：10718537
> 
> 赞同：-2
> 
> 时间：2012-05-23T10:57:09.210
> 
> 标签：c, gcc

我开始学习 C++，作为练习，我正在编写一个简单的游戏。虽然我认为我的逻辑已经接近完成，但我无法弄清楚为什么 gcc 抱怨我的代码。

这是我的代码：

```
#include <stdio.h>

void readGuess(int[4]);
int blackScore(int[4], int[4]);
int anotherGame(void);
int whiteScore(int[4],int[4]);
void printScore(int[4],int[4]);

int main(void){
    int codes[5][4] = {{1,8,9,2}, {2,4,6,8}, {1,9,8,3}, {7,4,2,1}, {4,6,8,9}};

    int i;
    for (i=0; i<5; i++){
        int guess[4];
        readGuess(guess);
        while(blackScore(guess, codes[i]) != 4) {
            printScore(guess, codes[i]);
            readGuess(guess);
        }

        printf("You have guessed correctly!!");
        if(i<4){
            int another = anotherGame();
            if(!another)
                break;
        }
    }

    return 0;
}
void readGuess(int[4] guess) {
    scanf("%d %d %d %d",&guess,&guess+1,&guess+2,&guess+3);
}

int blackScore(int[4] guess, int[4] code){
    int score = 0;
    int i;
    for(i = 0; i<4;++i){
        if(code[i]==guess[i]){
            score++;
        }
    }
    return score;
}

int whiteScore(int[] guess, int[] code){
    int score = 0;
    int i;
    for(i = 0; i<4;++i){
        int j;
        for(j = 0; j<4;++j){
            if(i!=j && (code[i] == guess[i])){
                score++;
            }
        }
    }
    return score;
}

void printScore(int[4] guess, int[4] code){
    printf("(%d,%d)\n",blackScore(guess,code),whiteScore(guess,code));
}

int anotherGame(void){
    while(1){
        printf("Would you like to play another game? [Y/N]\n");
        char result;
        result = getchar();
        if(result == 'Y')
            return 1;
        else if (result == 'N')
            return 0;
    }
} 
```

这些是错误：

```
testSource.c:34:23: error: expected ‘;’, ‘,’ or ‘)’ before ‘guess’
testSource.c:38:23: error: expected ‘;’, ‘,’ or ‘)’ before ‘guess’
testSource.c:49:22: error: expected ‘;’, ‘,’ or ‘)’ before ‘guess’
testSource.c:63:24: error: expected ‘;’, ‘,’ or ‘)’ before ‘guess’
testSource.c: In function ‘anotherGame’:
testSource.c:70:3: warning: ISO C90 forbids mixed declarations and code 
```

大家能帮我看看是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:00:28.907

更改`int[4] guess`为`int *guess`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:02:11.703

您的参数不应声明数组的大小。在您的参数中使用`int guess[]`而不是。`int[4] guess`

除非您使用GCC 的开关，否则也`result`需要在顶部声明。`anotherGame``-c99`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:01:40.317

我认为您的论点声明与 Java 混在一起：

```
void readGuess(int[4] guess) { 
```

它应该是

```
void readGuess(int guess[]) { 
```

您对其他功能也有同样的问题。

此外，原型并不总是与实际功能相匹配，例如`whiteScore`.

# objective-c - 隐藏 UINavigationBar 时的自定义动画

> ID：10718539
> 
> 赞同：4
> 
> 时间：2012-05-23T10:57:42.483
> 
> 标签：objective-c, ios, uinavigationbar

我正在制作一个应用程序，它在单击时显示/隐藏（在自定义动画中） UINavigationBar。

我创建了两个功能（一个用于显示，另一个用于隐藏）。显示 UINavigationBar 的功能完美运行：

```
- (void) showNavigationBar {
    [UINavigationBar beginAnimations:@"NavBarFadeIn" context:nil];
    self.navigationController.navigationBar.alpha = 0;
    [UINavigationBar setAnimationCurve:UIViewAnimationCurveEaseIn]; 
    [UINavigationBar setAnimationDuration:0.5];
    [UINavigationBar setAnimationTransition:UIViewAnimationOptionTransitionFlipFromTop
                                    forView:self.navigationController.navigationBar
                                      cache:YES];
    self.navigationController.navigationBar.alpha = 1;
    [UINavigationBar commitAnimations];
} 
```

但是隐藏它的功能，即使它是相同的，也不起作用。UINavigationBar 突然消失，没有动画。

```
- (void) hideNavigationBar {
    [UINavigationBar beginAnimations:@"NavBarFadeOut" context:nil];
    self.navigationController.navigationBar.alpha = 1;
    [UINavigationBar setAnimationCurve:UIViewAnimationCurveEaseIn]; 
    [UINavigationBar setAnimationDuration:0.5];
    [UINavigationBar setAnimationTransition:UIViewAnimationOptionTransitionCurlUp
                                    forView:self.navigationController.navigationBar
                                      cache:YES];
    self.navigationController.navigationBar.alpha = 0;
    [self.navigationController setNavigationBarHidden:YES animated:NO];
    [UINavigationBar commitAnimations];
} 
```

召唤：

```
- (void)contentView:(ReaderContentView *)contentView touchesBegan:(NSSet *)touches
{   
    if( [[self navigationController] isNavigationBarHidden] == NO)
    {
    if (touches.count == 1) // Single touches only
    {
            UITouch *touch = [touches anyObject]; // Touch info
            CGPoint point = [touch locationInView:self.view]; // Touch location
            CGRect areaRect = CGRectInset(self.view.bounds, TAP_AREA_SIZE, TAP_AREA_SIZE);

            if (CGRectContainsPoint(areaRect, point) == false) return;
        }
        [mainToolbar hideToolbar];
        [mainPagebar hidePagebar]; // Hide

        [self hideNavigationBar];
        lastHideTime = [NSDate new];
    }
} 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T11:45:43.960

它正在发生，因为您正在调用`[self.navigationController setNavigationBarHidden:YES animated:NO];`动画代码，但布尔值是不可动画的。布尔值没有“值之间”。

您应该调用`[self.navigationController setNavigationBarHidden:YES animated:NO];`在动画之后安排的方法

```
[UINavigationBar setAnimationDidStopSelector: @selector(myCoolMethod:)]; 
```

# html - 如何更改在 iPhone 中使用 UIWebView 加载的 HTML 文件中文本的字体大小

> ID：10718543
> 
> 赞同：0
> 
> 时间：2012-05-23T10:57:56.457
> 
> 标签：html, objective-c, css, ios5

我有 20 个 HTML 文件..所有这些文件都在我的包中...例如 HTML 文件中文本的字体大小是 15...这个大小对于 iPhone 来说已经足够了，但对于 iPad 来说它看起来非常小...如何我可以使用 iPhone 代码动态更改 HTML 文件中文本的字体大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:04:06.893

查看 CSS 媒体查询。您可以根据设备的物理属性（在您的情况下为`min-width`和`max-width`属性）应用不同的字体大小（和其他 CSS 属性）。

[https://developer.mozilla.org/en/CSS/Media_queries](https://developer.mozilla.org/en/CSS/Media_queries)

# java - 如何以编程方式使用 java 中的查询检索网页

> ID：10718544
> 
> 赞同：0
> 
> 时间：2012-05-23T10:57:57.940
> 
> 标签：java, nlp, search-engine, bing-api

我需要的是向搜索引擎提交查询并检索前 100 个网页以稍后处理其内容。将查询提交给搜索引擎并处理搜索引擎产生的网页应该在程序内完成。我应该使用搜索引擎 api，例如 google-api 或 bing-api 还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:01:57.473

总结评论中所说的话：是的，搜索引擎 API 是最好的方法。

将结果作为网页检索然后对其进行解析是可以想象的最糟糕的方法（如果您没有任何使使用 API 无法忍受的特定需求）。

# c - C pthread 加入一个结束的线程

> ID：10718545
> 
> 赞同：3
> 
> 时间：2012-05-23T10:57:57.930
> 
> 标签：c, join, pthreads, pthread-join

我正在构建 2 个通过 FIFO 进行通信的程序（客户端/服务器）。两个程序都有线程。当客户端的线程结束时，它不会被加入，并且 main 挂起。

这些程序执行以下操作：

服务器：

1.  main：从 FIFO1 读取
2.  main：创建线程来处理请求。
3.  主要：转到1
4.  线程：处理请求
5.  线程：向 FIFO2 发送响应
6.  线程：退出

客户：

1.  main：生成线程
2.  线程：从 FIFO2 读取 X 对客户端的响应
3.  线程：退出
4.  main：向 FIFO1 发送 X 个请求
5.  main：等待线程退出
6.  主要：检查响应

服务器运行良好，所有线程都相应地加入。

客户端在步骤 5 中失败。使用

```
pthread_join(&reader,NULL); 
```

永远挂主。我查过了，这个话题已经结束了。

使用

```
pthread_tryjoin_np(&reader,NULL); 
```

我明白了

> 错误代码=16

strerror 给出

> 设备或资源繁忙

创建线程：

```
pthread_attr_init(&attr);
pthread_attr_setdetachstate(&attr,PTHREAD_CREATE_JOINABLE);
pthread_create(&reader,&attr,trataResp,NULL); 
```

或使用： pthread_create(&reader,NULL,trataResp,NULL);

不会产生任何变化。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:39:42.627

那么 pthread_join 接收线程 ID，而不是它的地址。这一行：

```
pthread_join(&reader,NULL); 
```

应该：

```
pthread_join(reader,NULL); 
```

如果`reader`被声明为`pthread_t`.

希望这不仅仅是您的问题中的错字，而且这实际上有所帮助。

# vi - 如何在VI中进行点赞搜索

> ID：10718546
> 
> 赞同：0
> 
> 时间：2012-05-23T10:57:59.460
> 
> 标签：vi

我想在 vi 中进行类似搜索。例如，我使用命令 vi test.log 文件打开。现在我想做一个前向搜索，我正在寻找 [string1]%[string2] 其中 % 意味着这两个字符串之间可以有任意数量的字符（在一行中）。我们在 oracle 中有这种搜索（例如，我们经常搜索 'pattern%'）。如何在 vi 中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:03:45.317

打开文件后，只需键入：

```
/string1.*string2 
```

`/`引入搜索

`.`表示任何字符

`*`表示任意数量的它（即任意数量的任意字符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:03:46.597

如果字符串之间必须至少有一个字符：

```
/string1.\+string2 
```

如果字符串之间不需要任何字符：

```
/string1.*string2 
```

要使用这些，只需开始输入即可；前导`/`将进入 Vim 的搜索模式。请注意，如果它们在 Vim 的正则表达式语法中具有特殊含义，您可能必须转义其中的一些`string1`字符`string2`。

解释：

*   `.`代表任何字符（`\w`如果您只想匹配“单词”字符，则可以使用；即字母、数字和下划线）。
*   `*`表示“前面模式的 0 个或多个实例”。
*   `\+`表示“前面模式的一个或多个实例”。

Vim 的正则表达式语法与标准的 Perl 正则表达式语法略有不同，这就是为什么`+`量词前面需要一个斜杠的原因。在这里阅读更多：http: [//www.softpanorama.org/Editors/Vimorama/vim_regular_expressions.shtml](http://www.softpanorama.org/Editors/Vimorama/vim_regular_expressions.shtml)

# mysql - MySQL索引定义，有什么区别？

> ID：10718547
> 
> 赞同：1
> 
> 时间：2012-05-23T10:58:02.457
> 
> 标签：mysql

这两个指标有什么区别？我指的是“PRIMARY”下的两列和其他方式之间的区别..

![在此处输入图像描述](../Images/c59a302e5080b99e22ad8b353ad0851d.png)

![在此处输入图像描述](../Images/fb084785cecd56b0c2678fbf6b5f3d2c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:15:59.250

第一个表示该组合`user_id, wallet_type`是唯一的，第二个仅定义`visitid`为唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:10:31.980

第一个称为多列、复合或复合键。在这种情况下，主键约束是两列的组合，按列出的顺序（user_id，然后是 wallet_type）。合并后的两列对于每一行必须是唯一的。

因此，以下数据是可以的：

```
user_id(pk)  wallet_type(pk)
-------------------------
1            1
1            2
2            2 
```

请注意，行可以具有重复的 user_id 或 wallet_type，但不能同时具有：

```
user_id(pk)  wallet_type(pk)
-------------------------
1            1
1            2
2            2
1            1      // Duplicate key 
```

第二个例子只是一个普通的单列键，其中 visitid 列中的 just 值必须是唯一的：

```
visitid(pk)    session
-------------------------
1              1
1              2   // Duplicate key 
```

这有很多含义。

多列主键更大，所以它使用更多的存储空间，MySQL 遍历的速度稍慢。

此外，对于 InnoDB，插入会受到负面影响，因为主键是聚集索引，这意味着它们是按物理顺序存储的。较大的索引需要更长的时间来更新。但是，将行附加到末尾是可以的。

有一些好处，例如可以使用多列索引作为[覆盖](http://www.mysqlperformanceblog.com/2006/11/23/covering-index-and-prefix-indexes/)索引。

例如，以下查询将使用多列主键进行优化：

```
SELECT user_id, wallet_type FROM table1 WHERE user_id = 1
SELECT user_id, wallet_type FROM table1 WHERE user_id = 1 AND wallet_type = 2
SELECT user_id, wallet_type FROM table1 ORDER BY user_id, wallet_type
SELECT user_id, wallet_type FROM table1 WHERE user_id = 1 ORDER BY wallet_type
SELECT user_id, wallet_type FROM table1 WHERE user_id > 1 AND wallet_type > 2
SELECT user_id, wallet_type FROM table1 ORDER BY user_id, wallet_type 
```

但是，由于列有前缀，因此不会优化此查询：

```
SELECT user_id, wallet_type FROM table1 WHERE wallet_type = 2 
```

这是因为在 WHERE 子句中没有引用 user_id，但 user_id 是键中的第一列。您不能跳过一列。

# c++ - SetupVerifyInfFile 为 windows xp 返回 ERROR_INVALID_PARAMETER (0x57)

> ID：10718549
> 
> 赞同：0
> 
> 时间：2012-05-23T10:58:06.817
> 
> 标签：c++, setupapi

此代码在 Vista/Win7 上成功运行，但在 win xp 上失败（返回 ERROR_INVALID_PARAMETER）。互联网上没有关于这个问题的文档。有人知道错误在哪里吗？谢谢。

```
QList<std::pair<int, int> > versions;
versions << std::pair<int, int>(5, 0);
versions << std::pair<int, int>(5, 1);
versions << std::pair<int, int>(5, 2);
versions << std::pair<int, int>(6, 0);
versions << std::pair<int, int>(6, 1);

QList<int> architectures;
architectures << PROCESSOR_ARCHITECTURE_INTEL << PROCESSOR_ARCHITECTURE_AMD64;

for (int i = 0; i < versions.count(); i++)
{
    int major = versions[i].first;
    int minor = versions[i].second;

    for (int j = 0; j < architectures.count(); j++)
    {
        int arch = architectures[j];

        SP_INF_SIGNER_INFO_V2 signerInfo;
        signerInfo.cbSize = sizeof(SP_INF_SIGNER_INFO_V2);

        SP_ALTPLATFORM_INFO_V2 altPlatInfo;
        altPlatInfo.cbSize = sizeof(SP_ALTPLATFORM_INFO_V2);
        altPlatInfo.Platform = VER_PLATFORM_WIN32_NT;
        altPlatInfo.MajorVersion = major;
        altPlatInfo.MinorVersion = minor;
        altPlatInfo.Flags = SP_ALTPLATFORM_FLAGS_VERSION_RANGE;
        altPlatInfo.FirstValidatedMajorVersion = major;
        altPlatInfo.FirstValidatedMinorVersion = minor;
        altPlatInfo.ProcessorArchitecture = arch;
        SP_INF_SIGNER_INFO_V2 signerInfo;
        signerInfo.cbSize = sizeof(SP_INF_SIGNER_INFO_V2);

        bool result = SetupVerifyInfFile((wchar_t*)package.infFilePath.utf16(), 0, &signerInfo); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:48:05.807

我也无法让 UNICODE 版本的 SetupVerifyInfFile 在 XP 上工作。非 Unicode 版本工作正常。如果 package.infFilePath 仅包含 ASCII，您可以使用以下解决方法：

```
SP_INF_SIGNER_INFO_V2_A signerInfo;
signerInfo.cbSize = sizeof(SP_INF_SIGNER_INFO_V2_A);
bool result = SetupVerifyInfFileA(package.infFilePath.toUtf8(), 0, &signerInfo); 
```

# .net - 如何将 LINQ 扩展方法 Select 的调用转换为相应的表达式树

> ID：10718550
> 
> 赞同：1
> 
> 时间：2012-05-23T10:58:13.640
> 
> 标签：.net, vb.net, linq, entity-framework-4, expression-trees

以下 LINQ 查询分别。在 Visual Basic 2010 中调用扩展方法 Select 工作正常：

```
Dim qAvSalary = qJobData.Select(Function(e) e.AvSalary) 
```

但是这样做我无法使用字符串变量指定我想要查询的属性的名称（例如 AvSalary）。如果我使用 LINQ 表达式树，这应该是可能的。搜索并尝试了很长时间如何将查询转换为相应的表达式树，但没有成功。我的最终方法是：

```
' The IQueryable data to query.
Dim queryableData As IQueryable(Of JobData) = qJobData.AsQueryable()
Dim pe As ParameterExpression = Expression.Parameter(GetType(JobData), "e")
Dim sPropertyName = "AvSalary"      ' or some other property depending on the business logic
Dim propex = Expression.Property(pe, sPropertyName)

Dim selectCallExpr As MethodCallExpression = Expression.Call(
        GetType(Queryable),
        "Select",
        New Type() {queryableData.ElementType},
        queryableData.Expression,
        Expression.Lambda(Of Func(Of JobData, System.Nullable(Of Int32)))(
                    propex,
                    New ParameterExpression() {pe})) 
```

执行此语句会引发以下异常：

> 消息 = “Keine generische Methode “Select” für Typ “System.Linq.Queryable” ist mit den bereitgestellten Typargumenten und Argumenten kompatibel. Es sollten keine Typargumente bereitgestellt werden, wenn die Methode nicht generisch ist. “

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:49:22.320

Select 有两个类型参数。*from*和to类型*。*指定两者。

# iphone - 在objective-c的后台直接发送电子邮件

> ID：10718552
> 
> 赞同：2
> 
> 时间：2012-05-23T10:58:15.593
> 
> 标签：iphone, objective-c, ios5, xcode4

> **可能的重复：**
> [iPhone 发送电子邮件不使用 MessageUI](https://stackoverflow.com/questions/5172299/iphone-send-email-not-using-messageui)
> [锁定 MFMailComposeViewController 中的字段](https://stackoverflow.com/questions/6284599/mfmailcomposeviewcontroller-question-locking-the-fields)

我想在没有用户可见性的情况下直接从 iphone/ipad 发送电子邮件。我的意思是我想在不打开 MFMailcomposer 表的情况下发送我的电子邮件。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:25:09.730

为此，您必须从服务器端发送电子邮件。

因此，无论您想通过电子邮件发送什么数据，您只需将其传递给 Web 服务，然后从那里发送电子邮件给用户。

这是用户不知道该电子邮件已发送的唯一方式。并且不会打开默认的“MFMailcomposer”。

# javascript - 在 Rails 中自定义 javascript_include_tag 输出

> ID：10718556
> 
> 赞同：0
> 
> 时间：2012-05-23T10:58:32.877
> 
> 标签：javascript, ruby-on-rails, svg

我正在尝试使用一个简单的 rails 项目来组织和维护 SVG 游戏。我想使用内置的资产管道将我的 javascript 动态包含*在*输出 SVG 文件的正文中，但我无法找到获得正确脚本标记格式的最佳方法。

我正在使用这个（application.js 是我的清单文件）：

```
<%= javascript_include_tag "application" %> 
```

我得到了这个（如预期的那样）：

```
<script src="/assets/scriptname.js" type="text/javascript"></script> 
```

但我（想我）需要这个：

```
<script xlink:href="/assets/scriptname.js"></script> 
```

有没有一种明智的方法来修改或覆盖 javascript_include_tag 的标签属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:57:55.063

我不知道你为什么需要那个，但是））

```
= content_tag("script", "", { "xlink:href" => path_to_asset('scriptname.js') }) 
```

或者

```
= javascript_include_tag "", {"type" => nil, "src" => nil, "xlink:href" => path_to_asset('scriptname.js') } 
```

# javascript - 从 Javascript（多浏览器）读取二进制文件

> ID：10718558
> 
> 赞同：0
> 
> 时间：2012-05-23T10:58:40.677
> 
> 标签：javascript, internet-explorer, google-chrome, activexobject

我在客户端运行的 Javascript 代码需要读取存储在服务器中的二进制文件。我怎样才能为所有浏览器做到这一点？

我找到了只在 Internet Explorer 中工作的 ActiveXObject - FileSystemObject 的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:21:45.167

```
function getXHR(){
    var xhr;
    try{
        xhr = new XMLHttpRequest();
    }catch(e){
        try{
            xhr = new ActiveXObject("MSXML2.XMLHTTP.6.0");
        }catch(e2){
            try{
                xhr = new ActiveXObject("MSXML2.XMLHTTP");
            }catch(e3){}
        }
    }
    return xhr;
}

function getBinaryData(url, callback){
    var xhr = getXHR();
    xhr.open("GET", url, !!callback);
    if(callback){
        xhr.onload = function(){callback(xhr, true)};
        xhr.onerror = function(){callback(xhr, false)};
    }
    xhr.send();
    return callback ? undefined : xhr.responseText;
} 
```

然后，您将使用 getBinaryData 来获取文件。使用异步时，它将使用 xhr 对象本身的参数调用回调（您将读取 responseText 属性），以及它是否成功。同步地，它返回二进制数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:26:18.147

对于经典的 asp 服务器端 javascript（来自我拥有的旧文档服务器）

因为它是服务器端，所以所有浏览器都会下载文件，在这种情况下，这段代码不是为了直接访问文件，而是在用户登录检查后使用。

```
Server.ScriptTimeout=500;//this might take some time
var docs_type="application/pdf";
var filename="...";//put your filename here (relative path)
var objStream = Server.CreateObject("ADODB.Stream");

try {
   objStream.Open();
   objStream.Type=1;//binary
  objStream.LoadFromFile(Server.MapPath(filename));
        Response.AddHeader("Content-Length", objStream.Size);
        Response.ContentType=docs_type;//the type of document you are serving 
        Response.AddHeader("Content-Disposition", "attachment; filename=your_filename.pdf");
        while(!objStream.EOS&&Response.IsClientConnected) {
            Response.BinaryWrite(objStream.Read(4*1024*256));
            Response.Flush();
        }
    objStream.Close();
    Response.End();
  } catch(e) {
        Response.Write("Error serving document<br>");
        Response.End();
  }
} 
```

# java - java Date(long) 没有意义.. long 不足以以毫秒为单位存储当前日期

> ID：10718561
> 
> 赞同：0
> 
> 时间：2012-05-23T10:58:48.337
> 
> 标签：java, datetime, date

java Date 类期望很长：

但是当前的日期/时间到毫秒精度太大而无法长时间保存。

Hello.java:14：整数太大：1335250803004 long l = 1335250803004；

那么这到底是如何工作的呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T10:59:51.800

毫秒值表示自**1970 年 1 月 1 日 00:00:00.000 GMT** [[..]](http://docs.oracle.com/javase/1.6/docs/api/java/util/Date.html#Date%28long%29)

所以[它能够保持日期最多](http://ideone.com/7u0R5)

```
08-17-292278994 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:01:41.387

嗯？

```
public static void main(String[] args) {
    System.out.println(Long.MAX_VALUE);
    System.out.println(new Date().getTime());
    System.out.println(new Date().getTime() < Long.MAX_VALUE);
} 
```

印刷：

```
9223372036854775807
1337770864719
true 
```

# javascript - 使用开发人员工具更改 IE9 中的文档模式

> ID：10718563
> 
> 赞同：2
> 
> 时间：2012-05-23T10:58:53.540
> 
> 标签：javascript, cross-browser, internet-explorer-9

我正在努力让一个非常“聪明”编码的 JavaScript 应用程序在 Internet Explorer 上运行。它目前在 IE7-8 上运行良好，但一些脚本在 IE9 中静默失败，我还无法弄清楚原因。该项目有一个严格的截止日期，我不能抽出时间进行体面的调试，所以我正在考虑强制页面以 IE8 文档模式显示。

这在其他方面是成功的，但是*曾经*触摸过他们的文档模式选择器并将其设置为 IE9 模式的 IE9 用户不受`X-UA-Compatible`元标记的影响并得到一个空白页面。IE8 文档模式在 Document Mode 菜单中显示为“默认”，但用户选择的一种似乎总是覆盖页面建议的一种。

[这个](https://stackoverflow.com/questions/2950598/ie8-browser-mode-vs-document-mode)问题和它被接受的答案表明，在 IE8 中，浏览器在页面重新加载时恢复为默认文档模式。这在 IE9 中是否发生了变化？我是否有希望可靠地将 IE8 文档模式强制强制启用开发人员工具的 IE9 用户？

**编辑：**我设法及时修复了实际的错误，但我将这个问题悬而未决，因为我仍然对答案感兴趣。该错误与 IE9 相关，声称它支持 CSS 转换，但没有为其 transitionEnd 事件提供名称。

# google-app-engine - 带有 App 引擎的 C2DM

> ID：10718567
> 
> 赞同：0
> 
> 时间：2012-05-23T10:59:12.657
> 
> 标签：google-app-engine, android-c2dm

我正在构建一个应用程序并计划将 C2DM 与在我的应用程序服务器上运行的应用程序引擎一起使用，我想知道他们的示例项目或在线教程是否涉及使用 C2DM 和应用程序引擎，我尝试过 googleing 但我找不到我在寻找

一切顺利，并提前感谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:14:04.593

你试过官方文档吗？

有一个在 GAE 上运行[的示例。](https://developers.google.com/android/c2dm/#example)

# ruby-on-rails - 使用 options_from_collection_for_select

> ID：10718571
> 
> 赞同：0
> 
> 时间：2012-05-23T10:59:25.273
> 
> 标签：ruby-on-rails

我正在尝试使用

```
options_from_collection_for_select(collection, value_method, text_method, selected = nil) 
```

但我无法将正确的参数传递给它。`collection`元素上的类型应该是什么？（完整使用示例会有所帮助）

我必须使用类似`Name=AL`and的格式`ID=23`，就像它是州名和它的代码一样。

因此，对于使用我应该如何向它提供集合对象。

我试过`Hash`,`Map`和`Array`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:16:09.040

的第一个参数[`options_from_collection_for_select`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_from_collection_for_select)应该是一个任意集合（准确地说是任何具有[`map`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)方法的对象），例如一个`Array`.

`Array`以`Hash`es为例：

```
options_from_collection_for_select([ { :id => 1, :name => 'Foo' }, { :id => 2, :name => 'Bar' } ], 'to_s', 'to_s') 
```

当然这是一个愚蠢的例子，因为第二个参数是值的方法，第三个是名称的方法。所以该方法将调用项目`to_s`上的方法`Hash`来获取`id`和`value`，`<option/>`所以这将产生：

```
'<option value="{:id=&gt;1, :name=&gt;&quot;Foo&quot;}">{:id=&gt;1, :name=&gt;&quot;Foo&quot;}</option>\n<option value="{:id=&gt;2, :name=&gt;&quot;Bar&quot;}">{:id=&gt;2, :name=&gt;&quot;Bar&quot;}</option>' 
```

如果您提供适当的对象，例如`ActiveRecord::Base`对象：

```
options_from_collection_for_select(Article.all, 'id', 'title') 
```

它将产生更好的输出：

```
'<option value="28">FooBar</option>\n<option value="29">BarFoo</option>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T12:17:58.993

我想，你可以试试 options_for_select。

```
options_for_select([text1, value1], [text2, value2]]) 
```

# jquery - 将 JSON 发布到 Python CGI

> ID：10718572
> 
> 赞同：12
> 
> 时间：2012-05-23T10:59:25.617
> 
> 标签：jquery, python, html, ajax

我已经安装了 Apache2 并且 Python 正在工作。

我有一个问题。我有两页。

一个是 Python 页面，另一个是带有 JQuery 的 Html 页面

有人可以告诉我如何让我的 ajax 帖子正常工作。

```
<html>
<head>

</head>
<body>
<script>
    $(function()
    {
        alert('Im going to start processing');

        $.ajax({
            url: "saveList.py",
            type: "post",
            data: {'param':{"hello":"world"}},
            dataType: "application/json",
            success : function(response)
            {
                alert(response);
            }
        });
    });
</script>
</body>
</html> 
```

和 Python 代码

```
import sys
import json

def index(req):
    result = {'success':'true','message':'The Command Completed Successfully'};

    data = sys.stdin.read();

    myjson = json.loads(data);

    return str(myjson); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T11:20:00.287

好的，让我们转到您更新的问题。

首先，您应该以字符串表示形式传递 Ajax 数据属性。然后，由于您混合`dataType`和`contentType`属性，将`dataType`值更改为`"json"`：

```
$.ajax({
    url: "saveList.py",
    type: "post",
    data: JSON.stringify({'param':{"hello":"world"}}),
    dataType: "json",
    success: function(response) {
        alert(response);
    }
}); 
```

最后，稍微修改您的代码以使用 JSON 请求，如下所示：

```
#!/usr/bin/python

import sys, json

result = {'success':'true','message':'The Command Completed Successfully'};

myjson = json.load(sys.stdin)
# Do something with 'myjson' object

print 'Content-Type: application/json\n\n'
print json.dumps(result)    # or "json.dump(result, sys.stdout)" 
```

因此，在`success`Ajax 请求的处理程序中，您将收到带有`success`和`message`属性的对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-03-09T05:58:47.977

您应该像这样读取 json 数据：

```
#!/usr/bin/env python3

import os
import sys
import json

content_len = int(os.environ["CONTENT_LENGTH"])

req_body = sys.stdin.read(content_len)
my_dict = json.loads(req_body) 
```

* * *

使用以下代码，您可能会遇到问题：

```
 myjson = json.load(sys.stdin) 
```

或者写得不太简洁：

```
requ_body = sys.stdin.read()
my_dict = json.load(requ_body) 
```

当我的 cgi 脚本在服务器上时，这*确实*`apache`对我有用，但你不能指望它在一般情况下工作——正如我在我的 cgi 脚本在另一台服务器上时发现的那样。根据 cgi 规范：

```
RFC 3875                    CGI Version 1.1                 October 2004

4.2\.  Request Message-Body

   Request data is accessed by the script in a system-defined method;
   unless defined otherwise, this will be by reading the 'standard
   input' file descriptor or file handle.

      Request-Data   = [ request-body ] [ extension-data ]
      request-body   = <CONTENT_LENGTH>OCTET
      extension-data = *OCTET

   A request-body is supplied with the request if the CONTENT_LENGTH is
   not NULL.  The server MUST make at least that many bytes available
   for the script to read.  The server MAY signal an end-of-file
   condition after CONTENT_LENGTH bytes have been read or it MAY supply
   extension data.  Therefore, the script MUST NOT attempt to read more
   than CONTENT_LENGTH bytes, even if more data is available.  However,
   it is not obliged to read any of the data. 
```

关键线是：

> 脚本不得尝试读取超过 CONTENT_LENGTH 个字节，即使有更多数据可用。

显然，`apache`在将请求正文发送到 cgi 脚本后立即向 cgi 脚本发送一个 eof 信号，这会导致`sys.stdin.read()`返回。但是根据cgi规范，服务器不需要在请求体之后发送eof信号，我发现我的cgi脚本一直挂在`sys.stdin.read()`--当我的脚本在另一台服务器上时，最终导致超时错误.

因此，为了在一般情况下读取 json 数据，您应该这样做：

```
content_len = int(os.environ["CONTENT_LENGTH"])

req_body = sys.stdin.read(content_len)
my_dict = json.loads(req_body) 
```

服务器为cgi脚本设置了一堆环境变量，其中包含头信息，其中一个是CONTENT_LENGTH。

这是我使用时失败的 curl 请求的样子`myjson = json.load(sys.stdin)`：

```
-v      verbose output
-H      specify one header
--data  implicitly specifies a POST request 

Note that curl automatically calculates a Content-Length header 
for you. 
```

* * *

```
~$ curl -v \
> -H 'Content-Type: application/json' \
> --data '{"a": 1, "b": 2}' \
> http://localhost:65451/cgi-bin/1.py

*   Trying ::1...
* TCP_NODELAY set
* Connection failed
* connect to ::1 port 65451 failed: Connection refused
*   Trying 127.0.0.1...
* TCP_NODELAY set
* Connected to localhost (127.0.0.1) port 65451 (#0)
> POST /cgi-bin/1.py HTTP/1.1
> Host: localhost:65451
> User-Agent: curl/7.58.0
> Accept: */*
> Content-Type: application/json
> Content-Length: 16
> 
* upload completely sent off: 16 out of 16 bytes

=== hung here for about 5 seconds ====

< HTTP/1.1 504 Gateway Time-out
< Date: Thu, 08 Mar 2018 17:53:30 GMT
< Content-Type: text/html
< Server: inets/6.4.5
* no chunk, no close, no size. Assume close to signal end
< 
* Closing connection 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-06T09:50:48.857

在@7stud 的出色回答中添加一点内容，我在读取 unicode 时遇到了一些内容长度问题，我通过从缓冲区读取来修复了这些问题：

```
content_length = int(os.environ["CONTENT_LENGTH"])
data = sys.stdin.buffer.read(content_length).decode('utf-8') 
```

# vim - vim -X 标志为 .vimrc 条目

> ID：10718573
> 
> 赞同：5
> 
> 时间：2012-05-23T10:59:28.787
> 
> 标签：vim, xserver, tmux

是否有一个配置条目可以放在我的 .vimrc 中，这与`-X`运行 vim 时传递标志的效果相同。

提供一些上下文：我最近发现我在屏幕（tmux）会话中的vim启动时间非常长（~6秒）

使用该`vim --startuptime`标志，很明显问题是由于连接到 X 服务器以设置 X 剪贴板。

跑步`vim -X`修复了我缓慢的启动时间。我宁愿修改我的 .vimrc，而不是创建一个 bash 别名来解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T11:11:52.387

您可能需要查看`clipboard`设置 ( `:help 'clipboard'`)。以下是 Gary Johnson 的建议（[来源](http://vim.1045645.n5.nabble.com/slow-startup-in-gnu-screen-td1176250.html#a1176255)，[通过 web.archive.org](http://web.archive.org/web/20200319142123/http://vim.1045645.n5.nabble.com/slow-startup-in-gnu-screen-td1176250.html#a1176255)）。

* * *

你可能想在你的 .vimrc 中设置 'clipboard' 这样你就不必一直使用 -X 了。在我的情况下，我在从其他各种机器登录的机器上使用 vim，其中一些机器设置了 $DISPLAY，即使它们没有 X 服务器。这是我的 .vimrc 中的内容：

```
" Prevent vim from trying to connect to the X server when connecting 
" from home, which causes a startup delay of about 14 seconds. I 
" usually connect from home via screen. 
" 
"set clipboard=autoselect,exclude:cons\\\|linux\\\|screen 
" 
" Using $DISPLAY instead of 'term' should be more reliable. It avoids 
" the problem of starting vim without first starting screen and allows 
" screen to be used locally without losing vim's X features. 
" 
if $DISPLAY =~ '\(\(cos\|scs\)\d\+nai\d\+\)\|\(spkpc\d\+\)\|\(tc-garyjohn\)' 
set clipboard=autoselect,exclude:.* 
endif 
```

* * *

（请注意，您需要调整该`if $DISPLAY`行以匹配您自己的`$DISPLAY`变量）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-06T04:53:52.570

只需添加到您的**~/.vimrc**

```
set clipboard=exclude:.* 
```

主要对您的 root 用户执行此操作。其他用户应该可以正常连接`$DISPLAY`剪贴板。

# css - Amazon Kindle Web 浏览器的 CSS 媒体查询

> ID：10718575
> 
> 赞同：7
> 
> 时间：2012-05-23T10:59:36.567
> 
> 标签：css, kindle

我们希望在 Kindle 网络浏览器上为我们的网页使用更高对比度的样式以进行电子墨水显示。但是 Kindle 使用常规`screen`媒体类型。提到了 Kindle 的使用`amzn-mobi`和`amzn-kf8`媒体类型，但它们似乎只适用于电子书，不适用于网络浏览器。

我们总是可以查看用户代理字符串并相应地添加一个类，但是当有基于 CSS 的替代方案时，我们希望尽可能避免基于 JavaScript 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T21:24:38.090

我们决定跳过那次冒险，因为：

*   Kindle 不是唯一的电子书阅读器
*   并非所有 Kindle 都是电子墨水
*   没有简单的兼容方法来检测电子墨水显示器

由于这些原因，我们决定推迟实施任何特定样式，并增加设计中的默认对比度。

# java - 如何与 WebService 通信

> ID：10718580
> 
> 赞同：1
> 
> 时间：2012-05-23T10:59:54.443
> 
> 标签：java, web-services

我一直在研究用于在 Eclipse 中解析 xml 文档的 JAXB。编组器一切顺利。但是我想将编组的 xml 数据作为字符串发送到 web 服务，看看那里发生了什么。因此，我创建了一个 webservice 项目，提供 wsdl。Eclipse 生成了一个带有 5 个 java 类的 wsdl 包。Ws_mx_BindingStub、portType.java、PortTypeProxy.java、Service.java、ServiceLocator.java。我不知道我可以用这些类做什么并与 web 服务进行通信。我是网络服务的新手，无法获得好的教程。如果有人能解释我接下来的步骤，我将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:43:09.870

“使用 Java Web 服务的 SOA” Mark D. Hansen 这本书提供了有关 Web 服务系统运行时发生的情况的信息。除了您所看到的之外，它还提供了低级工作原理。我对详细学习 web 服务的建议是，您应该学习如何创建 web 服务、部署和运行命令 propmt。

有两种创建 Web 服务的通用方法。

1-buttom-up - 通过使用 Java 实现创建 Web 服务 - 编译 - 部署 2- 自上而下 - 学习 XSD 和 WSDL 创建 - 从 WSDL 文件创建 Web 服务 - 编译、部署和运行

在使用这些步骤之前，您应该选择一个应用程序服务器，例如 Glassfish

# perl - 读取 SD 文件并提取每个片段的信息

> ID：10718587
> 
> 赞同：0
> 
> 时间：2012-05-23T11:00:17.433
> 
> 标签：perl

我有一个 SD 文件要读取。我无法上传整个文件。所以我在下图中给出了一个快照。

![解释分子结构的 SD 文件（结构数据文件）。 803和AMH是两个分子。 此外，在同一个分子内有几个片段。 每个片段由四个美元符号 ($$$$) 分隔。](../Images/9e589504d56f1311d28a22ee9ee996b6.png) 这是一个解释分子结构的 SD 文件（结构数据文件）。803和AMH是两个分子。此外，在同一个分子内有几个片段。每个片段由四个美元符号 ($$$$) 分隔。我是 perl 的新手，因为我是一名生物医学研究学生。但是，我编写了一个脚本，它找到了 $$$$ 的出现，然后在它旁边的行中找到了分子代码（这里是 803）的出现。

```
{
    open (FILE, '<', "try_803.txt");    
    my $ligandcode="803";    
    while (<FILE>) {
        my $nextline = <FILE>;     
        if ( $_=~/\x24\x24\x24\x24/ &&  $nextline=~/$ligandcode/){    
            # do something
        }    
    }    
} 
```

这段代码检查了第一次出现的 $$$$，然后是 803。但是，我希望它进一步检查下一次出现的 $$$$，然后是 803。我不知道这种模式会出现多少次。从技术上讲，我无法事先指定片段的编号。你能帮我改进这段代码并找到问题的解决方案吗？我会很感激的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:05:26.817

您可以将输入记录分隔符设置为四个圆号、一个换行符和 803。

```
local $/ = '$$$$' . "\n803"; 
```

然后，您可以循环读取整个分子：

```
while (<FILE>) {
    my $molecule = $_;
} 
```

# c++ - 取消后调用 boost::asio 异步处理程序时没有错误

> ID：10718593
> 
> 赞同：5
> 
> 时间：2012-05-23T11:00:31.923
> 
> 标签：c++, windows, handler, boost-asio, asyncsocket

我的代码在单个线程中使用 boost::asio 和 io_service 来执行各种套接字操作。所有操作都是异步的，每个处理程序都依赖于`boost::system::error_code`（尤其是`boost::asio::error::operation_aborted`）来确定操作的结果。

**在我更改逻辑以建立多个并发**连接并选择最快的连接之​​前，它一直运行良好。也就是说，当第一个`async_read_some`处理程序触发时，我会取消其他套接字（关闭、关闭 - 一切）并继续当前的套接字。在 95% 的情况下，调用其他套接字的读取处理程序时会出现 operation_aborted 错误。但是有时，这些读取处理程序被调用而没有错误，告诉我它们已成功接收 N 个字节。

但是 socket::cancel() 的文档[指出](http://www.boost.org/doc/libs/1_46_1/doc/html/boost_asio/reference/basic_stream_socket/cancel/overload2.html)：

> 该函数使所有未完成的异步连接、发送和接收操作立即完成，取消操作的处理程序将传递`boost::asio::error::operation_aborted`错误。

所以，问题是：我真的可以依赖`operation_aborted`生产代码中的错误吗？如果可以，它是来自 boost 1.46.1 的 Asio 中的错误吗？如果我不能，是否有任何关于此的官方文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T19:21:14.420

好的，答案：

1.  不，我不能只依赖`operation_aborted`错误。
2.  当然，这不是 Asio 的 bug，只是我这方面经验不足。
3.  有一点官方[文档](http://www.boost.org/doc/libs/1_46_1/doc/html/boost_asio/reference/basic_deadline_timer/cancel/overload1.html)。它适用于计时器，而不是套接字，但同样的原则适用：

* * *

如果在调用 cancel() 时计时器已经过期，那么异步等待操作的处理程序将：

*   已经被调用；或者

*   已在不久的将来排队等待调用。

* * *

基本上，我错误地假设如果我为 io_service 使用单个线程，那么在某些处理程序执行时每个操作都会被阻塞。

我报告的行为实际上很有意义，似乎每个使用 Asio 的人都知道这一点。我梳理了 Asio 的邮件列表，并在[此处](http://sourceforge.net/mailarchive/message.php?msg_id=23289194)、[此处](http://sourceforge.net/mailarchive/message.php?msg_id=23509457)、[此处](http://sourceforge.net/mailarchive/message.php?msg_id=24070240)和[此处](http://sourceforge.net/mailarchive/message.php?msg_id=24078791)找到了很多关于该主题的讨论。

> 例如，当您在处理程序中但在您开始调用套接字取消之前，写入操作可能会成功完成，从而导致其完成处理程序被发布到队列中。据我了解，错误代码由已完成操作的状态确定，而不是在处理程序从队列中取出并执行时的套接字状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:26:25.920

考虑同时建立两个连接。两个处理程序都会触发，一个将首先处理，第二个在队列中（或在不同的线程上处理）。可以想出更多这样的例子。

因此，为了实现您的要求，您需要更多的逻辑。

# windows - Windows 消息与事件

> ID：10718602
> 
> 赞同：0
> 
> 时间：2012-05-23T11:00:56.790
> 
> 标签：windows, winapi, events, message

我是 MFC 和 Windows 消息传递概念的新手。Windows消息和事件之间有什么区别或相似之处？比如当用户按下一个键或控件的关闭按钮时，它会是消息还是事件？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T11:19:13.470

当用户按下一个键或执行任何其他形式的输入时，系统会将消息放入消息队列中。然后，您的应用程序必须在其消息循环中提取这些消息，并处理它们。

许多 UI 框架会为您处理这些消息并将它们转换为事件。请注意，您谈论的事件不是 Windows 定义的任何意义上的事件。事件的使用是指在您使用的任何编程语言/框架中定义的概念。[Windows 事件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686915.aspx)用于线程同步。

顶级消息循环可能如下所示：

```
MSG msg;
while(GetMessage(&msg, NULL, 0, 0) > 0)
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
} 
```

调用`DispatchMessage`导致调用窗口过程。GUI 框架通常实现该窗口过程并将消息转换为事件。

因此，执行摘要是：

1.  输入事件导致消息。
2.  GUI 框架将消息转换为事件。
3.  您实现事件处理程序来响应这些事件。

# symfony - 使用双连接优化 DQL

> ID：10718608
> 
> 赞同：0
> 
> 时间：2012-05-23T11:01:11.323
> 
> 标签：symfony, doctrine-orm, dql

我有这样的结构：单个个人资料可以参加多项研究，并且对于每项研究，都有一个`statute`外键字段`study_statute`。在每一行的 HTML 中，我需要显示个人资料的信息：profile.name、profile.study.field、profile.study.statute。我已经使用

```
$profileRepository->findAll() 
```

但它会产生很多查询，我想优化。目前有查询获取配置文件，每个配置文件要求研究，每个研究要求法规名称。因此，如果有 2 个个人资料，并且每个个人资料都参加了 2 项研究，我有

1（列表）+1（配置文件＃1的研究列表）+2（上述每个研究的研究名称）+1（配置文件＃2的研究列表）+2（上述每个研究的研究名称）查询。

如何优化这个？

在普通的 PHP 中，我会这样做：为所有与研究和研究名称连接的配置文件获取大表，并将其解析为多维数组 fe `$profile[1]['studies'][1]['name']`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:32:40.423

您可以使用 dql [fetch join](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html#joins)：

```
$profiles = $em->createQuery('select p, stu, sta from YourBundleName:Profile p join p.studies stu join stu.statute sta')
    ->getResult(); 
```

结果将与您使用`findAll`除了一件事之外的结果相同。所有相关实体都将被提取。如果您访问“研究”或“法规”学说，则不需要`lazy load`与另一个查询关联。

# java - 在 Dropbox 等窗口中更改特定文件的图标

> ID：10718610
> 
> 赞同：2
> 
> 时间：2012-05-23T11:01:12.767
> 
> 标签：java, windows, winapi, icons

我正在开发一个需要处理文件并将数据从客户端发送到服务器（针对特定文件夹）的应用程序。我希望该应用程序能够添加一个小勾号，就像投递箱上的勾号一样（绿色勾号表示同步，蓝色表示同步）。

对于文件夹，我想我可以使用 desktop.ini 文件。我无法找出一种处理文件的机制，尤其是当我没有一组有限的格式可以放在我正在观看的目录中时....

本质上，我试图在文件同步期间复制 Dropbox 的图标更改机制。

我现在正在使用java...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:35:23.960

您想在 shell 扩展中使用[覆盖图标](http://msdn.microsoft.com/en-us/library/cc144123%28v=vs.85%29.aspx)，但我不知道在 Java 中这样做的可行性。

有关更多示例和信息，请参阅[这些结果](https://www.google.co.uk/search?hl=en&q=windows+shell+overlay+icon)。

# php - PNG文件不保持透明度？

> ID：10718617
> 
> 赞同：1
> 
> 时间：2012-05-23T11:01:47.267
> 
> 标签：php, php-gd

我将在整个过程中使用这些变量：

```
$ROOTDIR = $_SERVER["DOCUMENT_ROOT"];
$ROOTFILE = "http://www.scottandjessiecooper.com/webtutorials/images/smiley.png";
$NEWFILE = "$ROOTDIR/images/tmp/new_smiley.png"; 
```

当我使用此功能时，透明度没有问题

```
function save_image($root, $saveto){
    copy($root, $saveto);
}
save_image( $ROOTFILE, $NEWFILE ); // root can be file or url 
```

但是我**需要**使用**IMAGE_RESOURCE**所以如果需要我可以操作**ROOTFILE**

所以我这样做了：

```
if ( file_exists( $NEWFILE ) ) unlink ($NEWFILE);
$image = imagecreatefrompng( $ROOTFILE );
imagepng( $image, $NEWFILE );
imagedestroy( $image ); 
```

现在当我使用这个时：

```
<img src="<?=$NEWFILE?>" /> 
```

我失去了透明度。背景变黑了！

所以我尝试输出图像以确保不是**保存**导致问题：

```
if ( file_exists( $NEWFILE ) ) unlink ($NEWFILE);
$image = imagecreatefrompng( $ROOTFILE );
header('Content-Type: image/png');
imagepng( $image );
imagedestroy( $image ); 
```

还是没用...

帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T11:10:50.567

您需要启用 Alpha 混合并保存 Alpha。我在 10 秒的谷歌搜索后发现了这个： [http ://www.php.net/manual/en/function.imagecreatefrompng.php#43024](http://www.php.net/manual/en/function.imagecreatefrompng.php#43024)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-20T02:31:59.100

我遇到了这个问题，发现 prehfeldt 的[回答](https://stackoverflow.com/a/10718745/1852838)有正确的想法，但实际上并没有帮助我解决这个问题。启用保存 alpha 通道信息的实用方法是在将图像资源输出到文件之前调用[imagesavealpha ：](http://php.net/manual/en/function.imagesavealpha.php)

```
imagesavealpha($image, true);
imagepng( $image, $NEWFILE ); 
```

如果不这样做，默认情况下 GD 会在您保存或输出图像时丢弃透明度信息。没有对您造成此问题的原因`copy`是它在文件级别进行了简单的逐字节复制，根本没有经过任何图像处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-03T10:59:07.527

这里的问题不在于`GD`或`PHP`。

问题出在 Photoshop 中。

如果您在打开而不是打开时保存`PNG`文件。`RGB mode``Indexed mode`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T11:44:50.083

这有帮助吗？

```
$info = getimagesize("smiley.png");
$image = imagecreatefrompng("smiley.png");
$image_new = imagecreatetruecolor($info[0],$info[1]);       
if ( ($info[2] == IMAGETYPE_GIF) || ($info[2] == IMAGETYPE_PNG) ) {
  $trnprt_indx = imagecolortransparent($image);   
  if ($trnprt_indx >= 0 ) {   
     $trnprt_color    = imagecolorsforindex($image, $trnprt_indx);   
     $trnprt_indx    = imagecolorallocate($image_new, $trnprt_color['red'], $trnprt_color['green'], $trnprt_color['blue']);   
     imagefill($image_new, 0, 0, $trnprt_indx);   
     imagecolortransparent($image_new, $trnprt_indx);
  }
  elseif ($info[2] == IMAGETYPE_PNG) {
     imagealphablending($image_new, false);   
     $color = imagecolorallocatealpha($image_new, 0, 0, 0, 127);   
     imagefill($image_new, 0, 0, $color);   
     imagesavealpha($image_new, true);
   }
}
imagecopy($image_new,$image,0,0,0,0,$info[0],$info[1]);
imagepng($image_new,"smiley2.png"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T11:10:34.597

如果背景为黑色，请尝试以下操作：

```
$black = imagecolorallocate($im, 0, 0, 0); 
// Make the background transparent 
imagecolortransparent($im, $black); 
```

（通过 PHP，PNG 的透明度从来都不是完美的）

# .net - F# 中的字符串解析 - 生成的 IL

> ID：10718619
> 
> 赞同：3
> 
> 时间：2012-05-23T11:01:57.400
> 
> 标签：.net, parsing, f#, il

我在 F# 中编写了一些小的字符串解析函数 - 为了更好地感受 F# 并了解如何用它解决此类任务。我尝试遍历一个字符串并通过递归搜索特定字符。

逻辑确实有效，但在我看来，生成的发布版本（打开优化）的 IL 代码确实看起来有点奇怪。所以我想有一种更好的方法可以在 F# 中以高性能的方式编写这些东西。

这是解析函数的样子：

```
let eatTag (input : string) index =
    let len = input.Length
    let nothing = 0, null, TagType.Open

    // more functions used in the same way
    // ...

    let rec findName i =
        if i >= len then nothing
        else
            let chr = input.[i]
            if isWhitespace chr then
                findName (i+1)
            elif chr = '/' then
                getName (i+1) (i+1) true
            else getName (i+1) i false

    let rec findStart i =
        if i >= len then nothing
        elif input.[i] = '<' then findName (i+1)
        else findStart (i+1)

    findStart index 
```

为 findStart 函数生成的 IL 代码如下所示：

```
 // loop start
    IL_0000: nop
    IL_0001: ldarg.2
    IL_0002: ldarg.1
    IL_0003: blt.s IL_000e

    IL_0005: ldc.i4.0
    IL_0006: ldnull
    IL_0007: ldc.i4.0
    IL_0008: newobj instance void class [mscorlib]System.Tuple`3<int32, string, valuetype TagType>::.ctor(!0, !1, !2)
    IL_000d: ret

    IL_000e: ldarg.0
    IL_000f: ldarg.2
    IL_0010: call instance char [mscorlib]System.String::get_Chars(int32)
    IL_0015: ldc.i4.s 60
    IL_0017: bne.un.s IL_0024

    IL_0019: ldarg.0
    IL_001a: ldarg.1
    IL_001b: ldarg.2
    IL_001c: ldc.i4.1
    IL_001d: add
    IL_001e: call class [mscorlib]System.Tuple`3<int32, string, valuetype TagType> findName@70(string, int32, int32)
    IL_0023: ret

    IL_0024: ldarg.0
    IL_0025: ldarg.1
    IL_0026: ldarg.2
    IL_0027: ldc.i4.1
    IL_0028: add
    IL_0029: starg.s i
    IL_002b: starg.s len
    IL_002d: starg.s input
    IL_002f: br.s IL_0000
// end loop 
```

此函数的 C# 视图 (ILSpy) 显示以下代码 - 这尤其是我认为我在这里做错了什么的原因。显然，函数参数以某种方式分配给自身......？！

```
internal static Tuple<int, string, TagType> findStart@80(string input, int len, int i)
{
        while (i < len)
        {
                if (input[i] == '<')
                {
                        return findName@70(input, len, i + 1);
                }
                string arg_2D_0 = input;
                int arg_2B_0 = len;
                i++;
                len = arg_2B_0;
                input = arg_2D_0;
        }
        return new Tuple<int, string, TagType>(0, null, TagType.Open);
} 
```

在以延续样式处理的其他函数中可以看到相同的问题。非常感谢任何指向我在做什么或假设错误的指针:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T11:24:43.810

这是尾调用消除。

删除尾调用并将尾调用转换为“跳转”到函数开头的过程。(iow 一个`while(true) { }`构造)。

您看到“相同”分配的原因是为了保持语义与正常调用函数一样。几乎不可能确定一个赋值是否可以有效地影响另一个，因此使用临时变量，然后将赋值返回给它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T11:39:08.457

如前所述，在这种情况下，编译器将递归函数转换为非递归函数。这只有在递归调用出现在“尾调用”位置并且函数调用自身时才有可能。一般来说，编译器有以下选项：

*   **将函数编译为循环**- 当函数调用自身并且调用处于尾调用位置时。这是最有效的替代方案，因为它消除了创建新堆栈帧并使用标准循环。

*   **`.tail call`使用IL 指令编译函数**- 当调用出现在尾调用位置时，但您正在调用不同的函数（例如，如果您有两个使用`let rec foo () = ... and bar () = ...`语法声明的相互递归函数）。这样可以避免创建新的堆栈帧（不会出现堆栈溢出），但效率较低，因为`.tail call`.NET 中的指令还没有进行太多优化。

*   **使用普通递归编译**- 当一个函数递归调用自身*然后进行*更多计算时，代码使用标准递归调用而不是*尾调用*编译（并且需要为每次调用分配一个新的堆栈帧，所以你可能会得到堆栈溢出）

在第一种情况下（在您的示例中）完成的优化如下所示： 通常，尾递归函数如下所示：

```
let rec foo x = 
  if condition then 
    let x' = calculateNewArgument x // Run some computation
    foo x'                          // (Tail-)recursively calls itself
  else 
    calculateResult x               // Final calculation in the branch that returns 
```

代码被转换为以下循环，该循环将参数存储在可变变量中：

```
let foo x = 
  let mutable x = x
  while condition do                // Check condition using current argument value
    x <- calculateNewArgument x     // Instead of recursion, run next iteration
  calculateResult x                 // Final calculation in the branch that returns 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T11:11:18.993

基本上，而不是像创建一个链

```
findstart(findstart(findstart(findstart..... 
```

编译器转换为一个循环，消除了函数调用。

这是[尾调用消除](https://en.wikipedia.org/wiki/Tail_call)，一个非常标准的函数式编程优化。这是因为将参数重新分配给函数的开销低于调用生成新堆栈帧的新函数的开销。

# java - 解析问题

> ID：10718622
> 
> 赞同：-1
> 
> 时间：2012-05-23T11:02:03.403
> 
> 标签：java, android

我有我需要制作自定义解析器的字符串，但我被困在大括号中，我该如何解析这个......

```
[TPIN{PrimaryPIN=6152987; IsValidUser=true; }, TPIN{PrimaryPIN=794032; IsValidUser=true; }] 
```

这是两个字段：

1.  主要密码
2.  是有效用户

我有想法通过拆分将它放入数组中，但这不是一个好主意，所以你能告诉我如何制作两个可以给我价值的数组，`PrimaryPIN`请`IsValidUser`帮助我解决这个问题。... .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:17:07.767

`PrimaryPin`这是and的简单解析器`IsValidUser`：

```
 String s = "[TPIN{PrimaryPIN=6152987; IsValidUser=true; }, TPIN{PrimaryPIN=794032; IsValidUser=true; }]";
    Pattern pinPattern = Pattern.compile("PrimaryPIN=([0-9]*);");
    Pattern vuPattern = Pattern.compile("IsValidUser=([^;]*);");
    ArrayList<String> pins = new ArrayList<String>();
    ArrayList<Boolean> validUser = new ArrayList<Boolean>();
    Matcher m = pinPattern.matcher(s);
    while (m.find()) {
        pins.add(m.group(1));
    }
    m = vuPattern.matcher(s);
    while (m.find()) {
        validUser.add("true".equals(m.group(1))?true:false);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:50:01.240

另一个基于@Paweł Nadolski 解决方案的解决方案，但只有一次迭代：

```
 String s = "[TPIN{PrimaryPIN=6152987; IsValidUser=true; }, TPIN{PrimaryPIN=794032; IsValidUser=true; }]";
    Pattern pinPattern = Pattern.compile("PrimaryPIN=([0-9]*); IsValidUser=(true|false);");
    Map<String, Boolean> pins = new HashMap<String, Boolean>();
    Matcher m = pinPattern.matcher(s);
    while (m.find()) {
        pins.put(m.group(1), new Boolean(m.group(2)));
    } 
```

# wpf - 我如何在我的网格中获取所选项目

> ID：10718623
> 
> 赞同：0
> 
> 时间：2012-05-23T11:02:05.180
> 
> 标签：wpf, grid

我对 WPF 完全陌生，我想在`mygrid`其中获取选定的元素，我`array of contacts objects` 需要访问选定的联系人并`Contactid`在某些方法中使用，例如 `deleteContactByID()`当用户单击删除按钮并刷新网格以隐藏行被删除时

```
<Window x:Class="WPFClient.ListOFContacts"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ListOFContacts" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Height="450" Width="700" xmlns:my="clr-namespace:WPFClient.PhoneBookServiceReference" Loaded="Window_Loaded">
    <Window.Resources>
        <CollectionViewSource x:Key="contactViewSource" d:DesignSource="{d:DesignInstance my:Contact, CreateList=True}" />
    </Window.Resources>
        <Grid DataContext="{StaticResource contactViewSource}" Name="myGrid" AllowDrop="True" ShowGridLines="False">
        <DataGrid AutoGenerateColumns="False" EnableRowVirtualization="True" Height="387" HorizontalAlignment="Left" ItemsSource="{Binding}" Margin="12,12,0,0" Name="contactDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected" VerticalAlignment="Top" Width="654" SelectionChanged="contactDataGrid_SelectionChanged">

             <DataGrid.Columns>

                <DataGridTemplateColumn x:Name="nameColumn" Header="Name" Width="auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Name}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn x:Name="emailColumn" Header="Email" Width="auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Email}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn x:Name="phoneNumberColumn" Header="Phone Number" Width="auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=PhoneNumber}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn x:Name="addressColumn" Header="Address" Width="auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Address}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn x:Name="mobilColumn" Header="Mobil" Width="auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Mobil}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn x:Name="Delete" Header="Delete" Width="auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Name="btnDelete">Delete</Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:09:55.270

您应该将`SelectedItem`DataGrid 的属性绑定到 DataContext 类型中的属性。在删除处理程序上，您只需访问类型的属性即可获取选定的联系人。在你的情况下：

```
<DataGrid SelectedItem={Binding SelectedContact} AutoGenerateColumns="False" EnableRowVirtualization="True" Height="387" HorizontalAlignment="Left" ItemsSource="{Binding}" Margin="12,12,0,0" Name="contactDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected" VerticalAlignment="Top" Width="654" SelectionChanged="contactDataGrid_SelectionChanged"> 
```

如果您已将 设置`DataContext`为 a ，`ViewModel`那么您需要`SelectedContact`在 ViewModel 类中拥有一个属性，就像您可能对其他属性所做的那样。

```
public Contact SelectedContact
{
    get; set; // Calling the NotifyPropertyChanged 
} 
```

然后在您的处理程序中，您只需要访问 SelectedContact 属性即可获取选定的联系人。

```
void handler()
{
    var selectedContact = SelectedContact;
    var contactId = selectedContact.ContactId; 
} 
```

我希望这能消除你的疑虑。

# java - 以编程方式将 eclipse 插件项目转换为 maven 项目

> ID：10718628
> 
> 赞同：1
> 
> 时间：2012-05-23T11:02:17.263
> 
> 标签：java, eclipse, maven, plugins

我有一个要求，我必须创建一个具有自定义文件夹结构的 Eclipse 插件项目，我能够成功地做到这一点。

下一步是我想使在运行时使用我的插件创建的项目具有 Maven 依赖管理，即我使用向导创建的每个项目都应该具有 Maven 依赖管理。

除了第谷之外，有没有人知道我如何做到这一点。

注意：在搜索解决方案时，我遇到了 tycho maven 插件，但它只构建了 eclipse 插件项目，并没有使其成为 maven 项目（根据我的理解）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:29:27.190

没有直接的方法可以使项目同时成为 Maven 项目*和*Eclipse 插件项目。Maven 和 Eclipse 构建系统有不同的规则，解决差异的想法也不同。

正如您所说，Tycho 并没有使 Eclipse 项目成为传统意义上的 Maven 项目（例如 Maven 风格的依赖管理），只是让 Maven 了解 Eclipse 规则。幸运的是，它允许您使用 Maven（至少使用 mvn3）编译插件非常简单。

如果您不需要在 Eclipse 中编译您的项目，您可以使用[Maven Pax](http://www.ops4j.org/projects/pax/construct/maven-pax-plugin/)等其他工具，但我不知道它们的功能和局限性。

所以一般来说，如果 Pax 工作正常，它可能会有所帮助，否则我不认为已经创建了一个工具，因为 Maven 和 OSGi/Eclipse 插件世界之间的主要逻辑差异。

# c - C（非 C++）的有限域（伽罗瓦域）线性代数库

> ID：10718629
> 
> 赞同：7
> 
> 时间：2012-05-23T11:02:21.827
> 
> 标签：c, linear-algebra, ffi, finite-field

我正在为 C 寻找一个[有限域/伽罗瓦域](http://en.wikipedia.org/wiki/Finite_field)精确线性代数库（C++ 是不可接受的，因为我需要能够编写一个 Haskell 绑定，而这[对于 C++ 来说显然很困难](http://www.haskell.org/haskellwiki/Cxx_foreign_function_interface)）。

我找到了像[FFLAS-FFPACK](http://www-ljk.imag.fr/membres/Jean-Guillaume.Dumas/FFLAS/)和[Givaro](http://givaro.forge.imag.fr/)这样的库，但这些是 C++ 模板库:-(

特别是我希望能够将[p] ^(n×1)和[p] ^(1×m)矩阵（向量）乘以[p n] ^(×m)矩阵。

那么，有人知道合适的 C 或“extern C”库吗？

PS：这是我关于同一问题的[Haskell 问题。](https://stackoverflow.com/questions/10665850/finite-field-linear-algebra-library-for-haskell)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:33:13.047

[PARI/GP](http://pari.math.u-bordeaux.fr/)是开源的，用 C 语言编写，它支持有限域上的一些基本线性代数。

当然，我不保证具体适用性 - 我与开发无关。

# sqlite - “：内存：”数据库中的表

> ID：10718633
> 
> 赞同：0
> 
> 时间：2012-05-23T11:02:36.093
> 
> 标签：sqlite

我有一个 :memory: 数据库。我想在该数据库中创建 5 个表。哪个是最好的普通表/临时表？当我们关闭连接时，表会自动删除吗？

我打算使用 sqlite_sequence 表来获取表的最后插入的 id。:memory: 数据库中是否有任何 sqlite_sequence 表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:31:35.910

`:memory:`像普通数据库一样使用普通表。关闭连接或退出进程后，所有数据和架构都将丢失。

只要有具有自动增量列的表，该`sqlite_sequence`表就会在那里，但是，您可以只使用`last_insert_rowid()`SQL 函数。

# javascript - 从jQuery对象下的数组中获取值

> ID：10718637
> 
> 赞同：0
> 
> 时间：2012-05-23T11:02:57.520
> 
> 标签：javascript, jquery, dom

我意外地不得不调试一些 jQuery。不是我的专业领域。当前脚本正在由 jQuery 呈现的文本框中寻找一个值并且失败。

查看 Chrome 中的 DOM，我可以看到有问题的元素下面有一个“FromDate”元素。变量浏览器将此列为 type `jQuery.fn.jQuery.init[1]`。它包含元素`0: HTMLInputElement, context: HTMLDocument, length: 1`和其他一些东西。

我追求的值在 0 对象内，但我似乎无法找到获取它的语法。据我所知，jQuery 将事物构造为数组，但执行`this.FromDate[0]`或`this.FromDate(0)`或`this.FromDate.0 all`产生错误“对象# 的属性'FromDate' 不是函数”。

我如何获得我的价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:07:38.717

您的变量是一个 jQuery 对象。

要访问其中包含的（第一个也是唯一的）DOM 元素，请使用：

```
myObject[0] 
```

或者

```
myObject.get(0) 
```

如果您只想获取`HTMLInputElement`您可以使用的值：

```
myObject.val() 
```

# java - 使用 HttpClient 重用会话/上下文

> ID：10718645
> 
> 赞同：0
> 
> 时间：2012-05-23T11:03:28.147
> 
> 标签：java, httpclient

我试图在与其他服务器连接时重用 HttpClient 的会话/上下文（以使 HttpClient 使用相同的连接）。为此，我使用了一个池连接管理器，每次我使用这个连接管理器创建 HttpClient ......但它仍然使用不同的上下文/会话连接到另一台服务器。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:15:47.790

我相信您混淆了连接持久性和 HTTP 状态/会话管理。HTTP 会话可以跨越多个连接。通常与持久连接无关。您想要的是重新使用 CookieStore 以及它包含的所有 cookie，用于所有逻辑相关的 HTTP 交换。有关更多详细信息，请参阅 HttpClient 教程的这一部分[http://hc.apache.org/httpcomponents-client-ga/tutorial/html/statemgmt.html#d5e849](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/statemgmt.html#d5e849)

# entity-framework - 如何使用代码优先迁移创建数据库？

> ID：10718648
> 
> 赞同：25
> 
> 时间：2012-05-23T11:03:43.463
> 
> 标签：entity-framework, entity-framework-4.3, entity-framework-migrations

我有使用 Entity Framwork 4.3 及其迁移的 ASP.NET MVC 3 项目。现在我希望 Entity Framework 使用我已经拥有的迁移为我创建一个数据库。当我尝试运行 Update-Database 脚本时，它给了我以下信息：

`Update-Database -Verbose -ProjectName AssemblyWithMigrations -StartUpProjectName WebProjectAssembly No migrations configuration type was found in the assembly '/* my name of assembly */'. (In Visual Studio you can use the Enable-Migrations command from Package Manager Console to add a migrations configuration).`

但是，当我尝试运行时，`Enable-Migrations`我看到以下内容：

`Migrations have already been enabled in project 'AssemblyWithMigrations '. To overwrite the existing migrations configuration, use the -Force parameter.`

所以，我想，问题是 EF 试图解决当前迁移版本以更新数据库。但是数据库不存在，它显然失败了。

问题是：如果数据库不存在，如何使用 EF 迁移来创建数据库？或者，使用 Nuget 控制台的正确方法是什么？

总而言之，我想要的是： 1\. 运行命令（也许`update-database`），它将使用我的 web.config 文件创建数据库 2\. 所有迁移都将按照创建顺序应用于创建的数据库。

谢谢。:)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-05-01T16:28:58.230

我意识到这是一个老问题，但到底是什么......

为了使迁移能够创建初始数据库，我发现以下方法效果很好。

1.  从 SQL Server 对象资源管理器中删除数据库
2.  从 Migrations 文件夹中删除所有现有的迁移。
3.  在 Package-Management-Console 中输入“Add-Migration InitialCreate”

    *[可选，取决于您的数据库初始化程序]*

4.  在 Package-Management-Console 中输入“update-database”

这将为您提供一个迁移脚本，它将带您从“无数据库”到拥有与您当前模型匹配的数据库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-29T14:55:54.580

Using Migrations is very useful but at times I have found it's better to use the following statements when working with databases.

Database initialization strategies: use any of the commented statements relevant to you.

```
public DataContext(): base("DefaultConnection") 
{
  // Database.SetInitializer<DataContext>(new CreateDatabaseIfModelChanges<DataContext>());
  // Database.SetInitializer<DataContext>(new CreateDatabaseIfNotExists<DataContext>());                                                            
  // Database.SetInitializer<DataContext>(new DropCreateDatabaseAlways<DataContext>());
} 
```

# c# - 在方法中声明一个类或结构

> ID：10718653
> 
> 赞同：34
> 
> 时间：2012-05-23T11:04:00.213
> 
> 标签：c#, .net

在 C# 中，是否可以像在 C++ 中那样在方法中声明类或结构？

例如 C++：

```
void Method()
{
   class NewClass
   {
   } newClassObject;
} 
```

我试过了，但它不允许我这样做。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-23T11:05:25.750

您可以像这样创建匿名类型：

```
var x = new { x = 10, y = 20 }; 
```

但除此之外：没有。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-23T11:10:36.643

是的，可以在 a 中声明 a `class`，`class`这些被称为`inner classes`

```
public class Foo
{
    public class Bar
    { 

    }
 } 
```

这就是你如何创建一个实例

```
Foo foo = new Foo();
Foo.Bar bar = new Foo.Bar(); 
```

在一个方法中，您可以创建一个`anonymous`类型的对象

```
void Fn()
{
 var anonymous= new { Name="name" , ID=2 };
 Console.WriteLine(anonymous.Name+"  "+anonymous.ID);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-23T11:07:43.770

**您可以在问题状态下在类**中声明它们，但不能在问题标题状态下在**方法中声明它们。**就像是：

```
public class MyClass
{
    public class MyClassAgain
    {
    }

    public struct MyStruct
    {
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-06T08:32:36.937

在 C# 中，此时方法中没有本地类，但有一些解决方法：

1.  使用预编译器将类描述移到方法之外（Roslyn 在这里会很有帮助）

2.  如果你已经有一个接口，你可以使用 NuGet 包 ImpromptuInterface 在你的方法中创建一个本地类

3.  使用本地方法来模拟一个类：

    ```
     class Program
     {
         static void Main(string[] args)
         {
             dynamic newImpl()
             {
                 int f1 = 5;
                 return new { 
                     M1 = (Func<int, int, int>)((c, d) => c + d + f1), 
                     setF1 = (Func<int,int>)( p => { var old = f1; f1 = p; return old; 
                            }) };
             }
             var i1Impl = newImpl();
             var i2Impl = newImpl();
             int res;
             res = i1Impl.M1(5, 6);
             Console.WriteLine(res);

             i1Impl.setF1(10);

             res = i1Impl.M1(5, 6);
             Console.WriteLine(res);

             res = i2Impl.M1(2, 3);
             Console.WriteLine(res);

             res = i1Impl.M1(1, 2);
             Console.WriteLine(res);
         }
     } 
    ```

以上打印： 16,21,10,13 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-10T08:12:51.630

今天您可以使用元组字段名称 [https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/value-tuples#tuple-field-names](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/value-tuples#tuple-field-names)

喜欢

```
void GetData() {
List <(string h,int hideClm, double cw, HtColumns t)> k1 = new List<(string h, int hideClm, double cw, HtColumns t)>();
        k1.Add((h: "",0,cw:50, t: new HtColumns() { type = "text" }));
        k1.Add((h: "Record time",0, cw: 190, t: new HtColumns() { type = "text" }));
        k1.Add((h: "Partner",0, cw: 290, t: new HtColumns() { type = "text" }));
} 
```

# php - 通过应用程序使用登录详细信息

> ID：10718660
> 
> 赞同：0
> 
> 时间：2012-05-23T11:04:55.830
> 
> 标签：php, sql, curl, login

我有一个 CURL（在 C++ 中）来发送我的用户并传递给 remauth.php 文件，所以我认为我在 remuth.php 上做错了（因为我是 php 基础，我的程序无法运行，因为身份验证未通过。）我通过应用程序使用登录。

我的卷曲：

```
bool Auth_PerformSessionLogin(const char* username, const char* password)
{
curl_global_init(CURL_GLOBAL_ALL);

CURL* curl = curl_easy_init();

if (curl)
{
    char url[255];
    _snprintf(url, sizeof(url), "http://%s/remauth.php", "SITEADDRESS.com");

    char buf[8192] = {0};
    char postBuf[8192];
    _snprintf(postBuf, sizeof(postBuf), "%s&&%s", username, password);

    curl_easy_setopt(curl, CURLOPT_URL, url);
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, AuthDataReceived);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, (void*)&buf);
    curl_easy_setopt(curl, CURLOPT_USERAGENT, "IW4M");
    curl_easy_setopt(curl, CURLOPT_FAILONERROR, true);
    curl_easy_setopt(curl, CURLOPT_POST, 1);
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, postBuf);
    curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE, -1);
    curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, false);

    CURLcode code = curl_easy_perform(curl);
    curl_easy_cleanup(curl);

    curl_global_cleanup();

    if (code == CURLE_OK)
    {
        return Auth_ParseResultBuffer(buf);

    }
    else
    {
        Auth_Error(va("Could not reach the SITEADDRESS.comt server. Error code from   CURL: %x.", code));

    }

    return false;
  }

curl_global_cleanup();
return false;
} 
```

和我的 remauth.php：

```
<?php
ob_start();
$host=""; // Host name 
$dbusername=""; // Mysql username 
$dbpassword=""; // Mysql password 
$db_name=""; // Database name 
$tbl_name=""; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$dbusername", "$dbpassword") or die(mysql_error());
mysql_select_db("$db_name") or die(mysql_error());

// Define $username and $password 
//$username=$username; 
//$password=md5($_POST['password']);
//$password=$password;

$username=$_POST['username']; 
$password=$_POST['password'];
//$post_item[]='action='.$_POST['submit'];

// To protect MySQL injection (more detail about MySQL injection)
$username = stripslashes($username);
$password = stripslashes($password);
$username = mysql_real_escape_string($username);
$password = mysql_real_escape_string($password);

$sql="SELECT * FROM $tbl_name WHERE username='$username'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $username and $password, table row must be 1 row
if($count==1){
$row = mysql_fetch_assoc($result);
if (md5(md5($row['salt']).md5($password)) == $row['password']){
    session_register("username");
    session_register("password"); 
    echo "#";
    return true;
 }
 else {
    echo "o";
    return false;
 }
}
else{
echo "o";
return false;
}
ob_end_flush();
?> 
```

//////////////////////////////

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:30:33.127

你收到卷曲错误吗？php脚本是否完全执行？

您是否添加了 SITEADDRESS 仅仅是为了发布，或者这是编译器应该用您要连接的网站替换的定义？如果是第二个，这将在 "" 内不起作用，因为它会被视为文字而不被替换。

此外，您调用 curl_global_cleanup() 两次，一次在 if 子句内，一次在函数末尾。你应该只调用一次。您的函数是否可能被多次调用？然后你应该把全局初始化和清理移到别处，因为 curl 假设它们在程序中只被调用一次。这不会解决您的实际问题，但这是一种很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:37:21.550

```
//To get the posted data without the fieldnames use: 

$data = file_get_contents('php://input');

//And then split the data by '&&'

$new_data = explode('&&', $data);

$username = $new_data[0];

$password = $new_data[1];

// more code... 
```

# javascript - Jquery获取有条件的孩子

> ID：10718662
> 
> 赞同：3
> 
> 时间：2012-05-23T11:04:59.870
> 
> 标签：javascript, jquery

我有一个 div `id='tips'`。它有多个孩子。我需要做的是我想获取`id='tips'`具有其样式的 div 的子元素，顶部 < 10px。这是代码片段。

```
<div id="tips">
   <div style="top: 5px; left: 150px;">
      Required Div
      <span class="arrow"></span>          
    </div>
   <div style="top: 15px; left: 150px;">
      Not-Required Div
      <span class="arrow"></span>          
    </div>
   <div style="top: 45px; left: 150px;">
      Child3
      <span class="arrow"></span>          
    </div>
</div> 
```

> 仅存在一个 top<10px 的 div 子 div。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T11:06:24.340

使用`filter()`：

```
var $child = $("#tips div").filter(function() {
    return parseInt($(this).css("top"), 10) < 10;
});

// you can do as needed with the element(s) here, this is just an example
$child.css("color", "#C00"); 
```

[**示例小提琴**](http://jsfiddle.net/KHbLx/)

# c# - Silverlight 使用转换器在列表视图中绑定对象

> ID：10718664
> 
> 赞同：2
> 
> 时间：2012-05-23T11:05:07.127
> 
> 标签：c#, silverlight, windows-phone-7, xaml

您好，我在强制更新列表视图时遇到了一点问题。我有 ObservableCollection，它包含具有属性 Buffer 的 TestClass 对象。

ObservalbeCollection 驻留在 ViewModel BaseViewModel

```
public partial class MainPage : PhoneApplicationPage {
   // Constructor
    public MainPage() {
      InitializeComponent();
      this.DataContext = new BaseViewModel();
    }
  }
}

public class BaseViewModel : INotifyPropertyChanged {
  public ObservableCollection<TestClass> TestList { get; set; }
  public BaseViewModel() {
    TestList = new ObservableCollection<TestClass>();
    TestList.Add(new TestClass() { Buffer = "1", SomeValue = 1 });
    TestList.Add(new TestClass() { Buffer = "2", SomeValue = 2 });
    TestList.Add(new TestClass() { Buffer = "3", SomeValue = 3 });
    TestList.Add(new TestClass() { Buffer = "4", SomeValue = 4 });
  }

  private TestClass selectedItem;
  public TestClass SelectedItem {
    get {
      return selectedItem;
    }
    set {
      if (selectedItem == value) {
        return;
      }

      selectedItem = value;
      selectedItem.Buffer += "a";
      selectedItem.SomeValue += 1;
      selectedItem = null;
      RaisePropertyChanged("SelectedItem");
    }
  }

  #region notifie property changed
  public event PropertyChangedEventHandler PropertyChanged;

  public void RaisePropertyChanged(string propertyName) {
    PropertyChangedEventHandler handler = this.PropertyChanged;
    if (handler != null) {
      handler(this, new PropertyChangedEventArgs(propertyName));
    }
  }
  #endregion
}

public class TestClass : INotifyPropertyChanged  {

  public TestClass() {
  }

  public int SomeValue { get; set; }

  private string buffer;
  public string Buffer {
    get {
      return this.buffer;
    }
    set {
      this.buffer = value;
      RaisePropertyChanged("Buffer");        
    }
  }

  #region notifie property changed
  public event PropertyChangedEventHandler PropertyChanged;

  public void RaisePropertyChanged(string propertyName) {
    PropertyChangedEventHandler handler = this.PropertyChanged;
    if (handler != null) {
      handler(this, new PropertyChangedEventArgs(propertyName));
    }
  }
  #endregion
} 
```

我正在将视图模型绑定到 Page。

页面xml：

```
<phone:PhoneApplicationPage 
     xmlns:converters="clr-namespace:PhoneApp2.Test">

<phone:PhoneApplicationPage.Resources>
    <converters:TestClassConverter x:Key="testConverter"/>
</phone:PhoneApplicationPage.Resources>

<ListBox Grid.Row="1" x:Name="tasksListBox" ItemsSource="{Binding TestList}"
                 SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
                 >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="SomeText"/>
                    <TextBlock Text="{Binding Path=Buffer}"/>
                    <TextBlock Text="{Binding Converter={StaticResource testConverter}}"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

现在第二个文本块在缓冲区更改时正确更新，但第三个仅更新一次（在列表加载时）。转换器只被调用一次。

我想使用第三个选项，因为：

a) 我使用 TestCalass 作为其他子类的基类

b）我想根据 TestClass 类型格式化输出并使用在 TestClass 中设置的其他参数

c) 我想使用 Localizable String 资源，但我不想在 TestClass 中使用它们，而是使用 POCO 对象。

编辑：我已经更新了源代码。第二个文本框发生变化，而第三个没有。所有类都期望 MainPage 驻留：

```
namespace PhoneApp2.Test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:10:17.047

如果在更新时更改`TestList`为 call是否有效`RaisePropertyChanged`？

（如果您提供了完整的复制品，我会检查自己。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:46:34.210

一旦更新其组件之一并且如果此更新由事件（如 PropertyChanged）宣布，则更新绑定。

绑定

```
<TextBlock Text="{Binding Converter={StaticResource testConverter}}"/> 
```

总是不变的：它总是绑定到同一个列表条目。因此，无论您在此列表条目中进行什么更改，都不会通知绑定。

如果引发 INotifyCollectionChanged 的​​ CollectionChanged 事件，AFAIK 将重新评估绑定。您可以通过在已引发的 PropertyChanged 事件之外引发 CollectionChanged 事件来执行此操作 - 但是这会重新评估整个列表并可能导致性能问题。

编辑：您需要引发 TestList 的 CollectionChanged 事件，这可能是不可能的。您可能需要从 ObservableCollection 中调用 BaseViewModel 才能执行此操作。

# knockout.js - 淘汰 if else 声明

> ID：10718666
> 
> 赞同：4
> 
> 时间：2012-05-23T11:05:17.037
> 
> 标签：knockout.js

我有一个使用css和knockout.js（绑定）制作的图表，如下所示

根据数据的值，我需要通过选择不同的 css 类来调整条的高度。

我尝试使用下面的淘汰赛 if 语句：

```
The <!-- ko --> and <!-- /ko --> 
```

但是，这不符合我的要求，因为我需要以下内容：

```
 <ul data-bind="foreach: ArrayData">
      <!-- ko if: value >= 300 and value <=250 -->
            <li class="height300Css">
        <!-- /ko -->
       <!-- ko if: value >= 200 and value <=300 -->
            <li class="height200Css">
        <!-- /ko -->
    </ul> 
```

有人可以提出任何替代方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T11:12:04.707

将计算的 observable 添加到返回正确 css 类的视图模型中，然后使用“attr”绑定（[http://knockoutjs.com/documentation/attr-binding.html](http://knockoutjs.com/documentation/attr-binding.html)）。

或者使用“css”绑定——但这需要您在视图文件中拥有整个选择逻辑。

* * *

示例代码：

```
var ViewModel = function() {
    var self = this;

    // ....

    self.cssClass = ko.computed(function() {
        var value = self.value();
        if (value >= 300 && value <= 250) {
            return 'height300Css';
        }
        // ...
    };
}; 
```

在视图中：

```
<li data-bind="attr: { class: cssClass }"> 
```

* * *

如果您正在处理一个对象数组，您可以将计算的 observable 添加到这些对象，或者您可以将一个普通函数添加到视图模型并在 foreach 循环期间调用它。

```
var ViewModel = function() {
    var self = this;

    self.items = ko.observableArray(...);

    self.getCssClass = function(item) {
        var value = item.value();
        // ...
    };
}; 
```

在视图中：

```
<li data-bind="attr: { class: $root.getCssClass($data) }"> 
```

演示：http: [//jsbin.com/awacew](http://jsbin.com/awacew)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T20:16:45.630

你可以只使用css绑定吗？

```
<ul id="MyList" data-bind="foreach:list">
    <li>
        <span data-bind="text: value, css: { height300Css: value >= 250 && value <= 300, height200Css: value >= 200 && value < 250 }"></span>
    </li>
</ul> 
```

顺便说一句，我确定这只是伪代码，但值永远不会 >= 300 AND <= 250，并且您需要使用 && 而不是 'and'，所以我更改了[小提琴](http://jsfiddle.net/jgoemat/zXcfx/1/)的表达式，因此 200-249 将是红色的250-300 是蓝色的。

# android - 使用 openFileOutput 时文件保存在哪里？

> ID：10718667
> 
> 赞同：7
> 
> 时间：2012-05-23T11:05:20.203
> 
> 标签：android, file, android-sdcard

是否可以知道由

```
ApplicationContext.openFileOutput(filename, Context.MODE_WORLD_READABLE); 
```

得到存储？我不需要任何 java 代码来打印路径，应该是`getFileStreamPath(filename)`，我只需要这些文件的默认存储位置。我没有在 android 的 javadoc 中找到任何有用的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:10:25.337

如果您的手机有根，请查看 /data/data。将有一个包含您的包名称的文件夹，其中包含您保存的所有文件。

但是您将需要 root 和一个 root 浏览器来观看这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:10:33.103

看到这个页面： http: [//developer.android.com/reference/android/os/Environment.html](http://developer.android.com/reference/android/os/Environment.html) 你可以得到一些目录路径。

我认为，如果您尝试直接使用`ApplicationContext.openFileOutput(filename, Context.MODE_WORLD_READABLE);`，该文件将在手机的根目录下创建，但我不确定，或者在 /data.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T11:19:43.187

如果您调用`getFilesDir()`并遍历它，您可以比较您使用的文件名字符串`openFileOutput`来创建该文件的确切路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T11:28:32.050

最好按照纪尧姆的回答并检查*当前*位置的环境。因为 openFileOutput 是 Context 类的一部分，所以它会根据当前使用的基本上下文进行更改。例如，在测试期间，您可以获得一个[RenamingDelegatingContext](http://developer.android.com/reference/android/test/RenamingDelegatingContext.html)，它通过重命名文件来覆盖 openFileOutput，并且可以将它们放置在任何需要的位置。

# sql-server - 由于更新冲突，快照隔离事务中止

> ID：10718668
> 
> 赞同：13
> 
> 时间：2012-05-23T11:05:20.477
> 
> 标签：sql-server, tsql, transactions, transaction-isolation, snapshot-isolation

以下陈述：

```
INSERT INTO dbo.Changes([Content], [Date], [UserId], [CompanyId]) 
  VALUES (@1, @2, @3, @4);
SELECT @@identity; 
```

给了我这个 SQL 错误 3960：

> 由于更新冲突，快照隔离事务中止。您不能使用快照隔离直接或间接访问数据库“myDatabase”中的表“dbo.Companies”来更新、删除或插入已被另一个事务修改或删除的行。重试事务或更改更新/删除语句的隔离级别。

据我了解，从错误消息中，我不应该`dbo.Companies`在另一个连接正在修改期间更新、删除或插入表`dbo.Companies`。

但是为什么当我向另一个表`dbo.Changes`（具有外键`dbo.Companies`）插入新行并且我没有删除引用的行时会发生这种情况`dbo.Companies`，但我只是更新行`dbo.Companies`而不是主键？这应该可以正常工作，不是吗？（这是 SQL Server 中的错误吗？）

**更新：**

表格如下所示：

```
dbo.Changes([Id] int PK, [Content] nvarchar, 
  [Date] datetime, [UserId] int, [CompanyId] int -> dbo.Companies.[Id])
dbo.Companies([Id] int PK, [Name] nvarchar) 
```

第二次更新正在做：

```
UPDATE dbo.Companies WHERE [Id] = @1 SET [Name] = @2; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:30:27.360

似乎 SQL Server将在它必须读取的任何记录上**获取更新锁，****即使它没有修改它**。

[有关此microsoft.public.sqlserver.server 线程](https://groups.google.com/d/topic/microsoft.public.sqlserver.server/x8yrxL5Ytxc/discussion)的更多信息：

> 如果没有关于 CustomerContactPerson 的支持索引，则声明
> 
> 从联系人中删除，其中 ID = @ID；
> 
> 将需要对 CustomerContactPerson 中的所有行进行“当前”读取，以确保没有引用已删除 ContactPerson 行的 CustomerContactPerson 行。使用索引，DELETE 可以确定 CustomerContactPerson 中没有相关行，而无需读取受其他事务影响的行。
> 
> 此外，在快照事务中，用于读取您将要转身和更新的数据的模式是在您读取时采用 UPDLOCK。这可确保您基于“当前”数据而不是“一致”（快照）数据进行更新，并且当您发布 DML 时，数据不会被锁定，并且您不会无意中覆盖另一个会话的变化。

我们的解决方法是**向外键添加索引**

在您的示例中，我怀疑向 Changes.CompanyId 添加索引会有所帮助。我不确定这是否是一个真正的解决方案。SQL Server 优化器可以选择不使用索引吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T09:29:09.430

SQL Server 可以看到对依赖表的更新，它可以修改插入的行为......对我来说似乎很公平，因为 SQL 无法猜测其他逻辑可能依赖于 [name] 列（触发器等）

如果您的应用程序实现了死锁重试逻辑，您可以修改它们以将错误号 3960 与错误号 1205 相同并自动重试...

# ruby-on-rails - 将内容插入 HABTM 表时的验证

> ID：10718669
> 
> 赞同：0
> 
> 时间：2012-05-23T11:05:21.140
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

我已经使用连接表 ( )设置了我的第一个 HABTM 表 (`hosts`和)。我的测试似乎工作正常，网页也是如此。 `owners``hosts_owners`

所以，我的下一个问题是如何插入新数据及其各自的关系（即连接表信息）。因为我预计将有两种主要的插入新数据的方法：

1.  以编程方式，从其他来源检索内容并保存到表中
2.  手动，用户将使用网页添加新条目。

那么，对于上述每一项，确保每次添加主机时至少添加一个所有者的“rails”方式是什么？（反之亦然。）我发现的所有书籍和文章似乎都停留在创建表格和模型的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:02:35.373

使用[验证回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html)。它类似于数据库触发器，但属于您的 Rails 模型。

例如。（不确定这是否有效，必须尝试）：

```
class Host < ActiveRecord::Base
  validates :has_at_least_one_owner?

  def has_at_least_one_owner?
    owners.any?
  end
end 
```

PS：也许你可以`validates_presence_of`改用，但不知道它是否适用于HABTM

# perl - perl 引用散列的取消引用

> ID：10718672
> 
> 赞同：4
> 
> 时间：2012-05-23T11:05:26.627
> 
> 标签：perl, hash

考虑以下简单的代码：

```
%hash = ('a'=>1,'b'=>2); 
print $hash{'b'};
print "\n",(\%hash)->{'b'};   #used when hashes are passed by reference
                              #to subroutines 
```

正如预期的那样，输出是一对 2。但我在想 $hash{key} 是否是作为 (\%hash)->{key} 完成的引用和取消引用的简写，或者它是达到相同结果的完全不同的途径。

请澄清一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:31:03.387

它们有些不同，因为与许多其他语言不同，所有复杂类型都只能作为引用使用，Perl 具有实际的普通哈希类型和单独的引用类型，可以充当任何其他类型的代理。[您可以在perlguts](http://p3rl.org/perlguts)中找到有关此的详细信息。

最后，这两个示例当然都从同一个存储中提取数据，但是第二次调用要长一些，因为它会花时间尽职地创建对普通 HV 的引用，然后按照您的要求将其取消引用。[`B::Concise`](http://p3rl.org/B%3a%3aConcise)您可以使用模块研究有关幕后工作的详细信息。

```
%hash = ('a'=>1,'b'=>2);
print $hash{'b'};
print (\%hash)->{'b'}; 
```

简洁的输出：

```
$ perl -MO=Concise deref.pl 
t  <@> leave[1 ref] vKP/REFC ->(end)
1     <0> enter ->2
2     <;> nextstate(main 1 deref.pl:1) v:{ ->3
b     <2> aassign[t3] vKS ->c
-        <1> ex-list lKP ->8
3           <0> pushmark s ->4
4           <$> const[PV "a"] s ->5
5           <$> const[IV 1] s ->6
6           <$> const[PV "b"] s ->7
7           <$> const[IV 2] s ->8
-        <1> ex-list lK ->b
8           <0> pushmark s ->9
a           <1> rv2hv[t2] lKRM*/1 ->b
9              <#> gv[*hash] s ->a
c     <;> nextstate(main 1 deref.pl:2) v:{ ->d
i     <@> print vK ->j
d        <0> pushmark s ->e
h        <2> helem sK/2 ->i
f           <1> rv2hv sKR/1 ->g
e              <#> gv[*hash] s ->f
g           <$> const[PV "b"] s ->h
j     <;> nextstate(main 1 deref.pl:3) v:{ ->k
s     <2> helem vK/2 ->t
q        <1> rv2hv[t7] sKR/1 ->r
p           <@> print sK ->q
k              <0> pushmark s ->l
o              <1> refgen lK/1 ->p
-                 <1> ex-list lKRM ->o
l                    <0> pushmark sRM ->m
n                    <1> rv2hv[t6] lKRM/1 ->o
m                       <#> gv[*hash] s ->n
r        <$> const[PV "b"] s ->s
deref.pl syntax OK 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:48:38.583

> *但我在想 $hash{key} 是否是作为 (\%hash)->{key} 完成的引用和取消引用的简写，或者它是达到相同结果的完全不同的途径。*

不，$hash{key} 只是对 %hash 的简单访问，就像 $array[0] 是对 @array 的简单访问一样。但是 \%hash 是对 %hash 的引用，因此需要取消引用才能访问它。语法`(\%hash)->{key}`将简写为：

```
do { my $temp_ref = \%hash; $temp_ref->{key} } 
```

但是如果你有 %hash ， $hash{key} 可以很好地工作而没有无用的引用/取消引用。散列和数组（通常）通过引用传递给子例程，因为 perl 的列表展平使得很难传递多个。（一个常见的例外是实现命名参数的函数。）

有关 perl 中引用的完整说明，请参见`perldoc perreftut`和`perldoc perlref`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:16:17.823

Perl 5 中的印记 ($ % @) 发生了变化，因为它反映了正在访问的值。

```
my @a = (10, 20, 30);  # Whole array
print $a[1];           # Single scalar element of @a
my %h = (a=>1, b=>2);  # Whole hash
print $h{a};           # Single scalar value from %h 
```

引用都以“$”开头的原因是它们都是标量。这有帮助吗？

# c# - 多个图钉 Bing 地图 windows phone 7

> ID：10718674
> 
> 赞同：2
> 
> 时间：2012-05-23T11:05:41.037
> 
> 标签：c#, windows-phone-7, bing-maps

您好，我在地图上显示多个图钉时遇到了一些问题。到目前为止，我已经尝试添加单个图钉或首先将它们放入 MapLayer 中，然后将 maplayer 添加到地图中，但我仍然只得到我创建的最后一个图钉。代码示例在这里：

```
MapLayer layer = new MapLayer();
                Pushpin pin1 = new Pushpin();
                GeoCoordinate geo= new GeoCoordinate();
                geo.Latitude = 45.8074417114258 ;
                geo.Longitude = 15.9677000045776;
                pin1.Location = geo;
                layer.Children.Add(pin1);
                Pushpin pin2 = new Pushpin();
                GeoCoordinate geo1 = new GeoCoordinate();
                geo1.Latitude = 45.9074417114258;
                geo1.Longitude = 15.8677000045776;
                pin1.Location = geo1;
                layer.Children.Add(pin2);

                map1.Children.Add(layer); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:56:18.870

您提供的示例代码设置了 pin1 的位置两次，而不是设置 pin2 的位置。

```
pin1.Location = geo1; 
```

应该

```
pin2.Location = geo1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:59:56.983

```
 Instead of doing this, create no of Pushpin objects  you want...
    and set the location of the pushpin..try this

    Pushpin pushpin1 = new Pushpin();
    pushpin1.Location = new GeoCoordinate(21.7679, 78.8718);

    Pushpin pushpin = new Pushpin();
    pushpin1.Location = new GeoCoordinate(45.8074417114258, 15.8677000045776);

    map1.Children.Add(pushpin1);
    map1.Children.Add(pushpin2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:17:06.787

尝试这个，

```
Pushpin pin2 = new Pushpin();
GeoCoordinate geo1 = new GeoCoordinate();
geo1.Latitude = 45.9074417114258;
geo1.Longitude = 15.8677000045776;
pin2.Location = geo1;
layer.Children.Add(pin2); 
```

# java - 在 Rest 服务中调用 Spring RestTemplate postForObject

> ID：10718676
> 
> 赞同：1
> 
> 时间：2012-05-23T11:05:42.327
> 
> 标签：java, spring, resttemplate

我目前正在开发一个需要调用同一服务器上提供的另一个 Rest-Method 的 Rest-Service。因此，例如路径 /myPath/foo 上的方法需要从路径 /myPath/restApi/bar 上的方法请求某些内容

如何在不使用 RestTemplate.postForObject(...) 方法中的完整路径的情况下使用 Spring RestTemplate（或其他东西）来做到这一点（不能使用完整路径，因为工件的 url 和端口不是在构建工件时已知）。

谢谢你的帮助！最好的问候，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:17:21.660

首先，为什么要使用 URL 访问同一服务器上的 REST 方法（看起来是同一个应用程序），而不是直接调用第二个 URL 后面的服务方法？如果这是同一个 servlet 容器，但有多个 WAR 文件，那就没问题了。

回到你的问题：你**确实**有主机和端口。您是说当客户端尝试访问时`/myPath/foo`，服务器应该访问`/myPath/restApi/bar`. 当您处于控制器/操作/处理程序方法/您的 REST 框架提供的任何东西时，`HttpServletRequest`以某种方式获取。拥有请求对象，您可以找出您的客户端用于连接到您的第一个 Web 服务的主机和端口。您可以使用该信息调用同一服务器上的第二个 Web 服务。

第二个想法：如果这是同一台服务器，你不能使用`localhost`吗？

# silverlight - 从 XAML 为 WPF 和 Silverlight 创建目录

> ID：10718679
> 
> 赞同：0
> 
> 时间：2012-05-23T11:05:52.663
> 
> 标签：silverlight, module, prism, mef, catalog

我正在通过具有 PRISM 和 MEF 模块化的 ProjectLinker 为 WPF 和 Silverlight 开发应用程序。我的模块是类库（在 WPF 中）和 Silverlight 类库（在 Silverlight 中）。现在我想通过 Catalog.xaml 从服务器加载 WPF 或 Silverlight 中的模块。

问题是： - Silverlight 无法加载 DLL，只能加载 XAP - WPF 不能加载 XAP，只能加载 DLL

我该怎么做 - 通过项目链接器开发（两个平台的代码相同），创建模块，从服务器下载并加载到应用程序？

我在引导程序中：在服务器 WCF 上我有 Catalog.xaml - 我下载它并... `catalog = Microsoft.Practices.Prism.Modularity.ModuleCatalog.CreateFromXaml(stream);`- 它工作但如果我通过加载模块运行应用程序我有一个错误（我试图将 DLL 加载到 Silverlight）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:17:49.580

Try this link *from the PRISM website*: [Sharing Code Between Silverlight and WPF](http://msdn.microsoft.com/en-us/library/ff921109%28v=pandp.40%29.aspx)

For the Module catalogs, you will either need to create separate XAML files, or use possibly use TT files to generate them from a common set of module names.

*As you need to carefully specify the dependencies for Silverlight to get the best start times, you might be better off maintaining separate files.*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:05:59.803

问题出在项目类型上。Silverlight 的项目必须是 Silverlight 应用程序。所以我改变了silverlight项目的类型，现在为WPF构建的是DLL，而silverlight是XAP。这是工作。

# haskell - 查找 snap-server 绑定的端口

> ID：10718681
> 
> 赞同：4
> 
> 时间：2012-05-23T11:05:58.577
> 
> 标签：haskell, haskell-snap-framework

使用 snap-server 的`httpServe`方法，我可以`setPort 0`指示服务器连接到下一个空闲端口。不幸的是，一旦我启动了 http 服务器，我就找不到任何方法来确定它实际启动的端口。例如，我的第一次尝试是从 2679 端口开始的——有什么方法可以确定这个数字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:50:03.597

我编写了[这个补丁](https://github.com/snapframework/snap-server/pull/24)，包含在`snap-server`0.9 及更高版本中，您可以使用它编写：

```
let hook dat = print $ socketPort $ head $ getStartupSockets dat
let config = setStartupHook hook $ setPort 0 mempty
httpServer config ... 
```

现在`hook`将在服务器准备好后调用，并将打印它启动的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:15:45.250

Config 结构有[一堆 getter](http://hackage.haskell.org/packages/archive/snap-server/0.6.0.1/doc/html/Snap-Http-Server-Config.html#v%3agetPort)，不是吗？

```
getPort :: Config m a -> Maybe Int 
```

返回要监听的端口（对于 http）

# android - 在不显示选择器的情况下启动 Native Camera

> ID：10718682
> 
> 赞同：5
> 
> 时间：2012-05-23T11:06:09.673
> 
> 标签：android

是否可以启动本机安卓相机应用程序来启动默认相机而不是显示意图选择器，然后启动活动以获得结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:12:57.387

您可以使用意图启动相机应用程序，例如： [Android 相机意图](https://stackoverflow.com/questions/2729267/android-camera-intent)

你可以像这样在你的意图中设置一个特定的类：
`Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");`
`intent.setClassName("com.android.camera", "com.android.camera.Camera");`

这不会显示意图选择器并启动默认的相机应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:04:33.323

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);            
 startActivityForResult(intent, TAKE_PICTURE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T09:10:41.083

```
imageView = (ImageView)findViewById(R.id.imageView1);
        Button photoButton = (Button)findViewById(R.id.button1);
        photoButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_REQUEST);
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
        if (requestCode == CAMERA_REQUEST) { 
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            imageView.setImageBitmap(photo);
        } 

    } 
```

在清单中

```
<uses-feature android:name="android.hardware.camera"/> 
```

# objective-c - 在导航控制器上添加按钮（来自代码）并使它们消失

> ID：10718686
> 
> 赞同：3
> 
> 时间：2012-05-23T11:06:25.073
> 
> 标签：objective-c, xcode4

我从“视图控制器”上方的代码中添加了一个按钮：

```
@implementation HBViewController
.....
.....
.....

- (void)viewDidLoad
{
    [super viewDidLoad];
    okButton = [[UIBarButtonItem alloc] initWithTitle:@"Ok" style:UIBarButtonItemStyleBordered target:self action:@selector(okayButtonPressed)];

    [self.navigationItem setRightBarButtonItem:okButton animated:NO];

}

- (void) okayButtonPressed{
NSLog(@"you pressed ok");
} 
```

...但是我怎样才能隐藏按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:11:25.847

```
 //to disable

        self.navigationItem.rightBarButtonItem.enabled = NO;

            //to hide - hide means setting nil will remove that button

        self.navigationItem.rightBarButtonItem = nil;

            //if u want to show again then create and assign new button again

        okButton = [[UIBarButtonItem alloc] initWithTitle:@"Ok" 

                  style:UIBarButtonItemStyleBordered

                  target:self action:@selector(okayButtonPressed)];

        [self.navigationItem setRightBarButtonItem:okButton animated:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:22:01.960

```
self.navigationItem.rightBarButtonItem = nil; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:13:13.523

只需将其设置为零

```
[self.navigationItem setLeftBarButtonItem:nil animated:YES]; 
```

# javascript - 基本的 Json/javascript 查询

> ID：10718689
> 
> 赞同：0
> 
> 时间：2012-05-23T11:06:32.830
> 
> 标签：javascript, json

嗨，我是 json 的新手。我正在尝试将 json 文件解析为网页，就像在这个线程中解释的那样......

[非常基本的 JSON 问题](https://stackoverflow.com/questions/7102092/very-basic-json-question)

但是，我的 json 文件是一大堆联系人，这些联系人不在上面示例中的“人”之类的数组中。相反，我的 json 文件的前 6 行如下所示。

```
{ "first_name": "Tom", "last_name": "Moore", "phone": "123456", "email": "tom@abc.ie" }
{ "first_name": "Fred", "last_name": "Power", "phone": "197412", "email": "fred@abc.ie" }
{ "first_name": "Ann", "last_name": "Doyle", "phone": "836547", "email": "ann@abc.ie" }
{ "first_name": "Phil", "last_name": "Jones", "phone": "927481", "email": "phil@abc.ie" }
{ "first_name": "Jane", "last_name": "Ross", "phone": "993377", "email": "jane@abc.ie" }
{ "first_name": "Tom", "last_name": "Moore", "phone": "123456", "email": "tom@abc.ie" } 
```

我怎样才能遍历它们以像上面的线程一样显示？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:09:07.330

您的 json 无效。它需要在外部使用方括号，并在项目之间使用逗号。它应该是：

```
[
    { "first_name": "Tom", "last_name": "Moore", "phone": "123456", "email": "tom@abc.ie" },
    { "first_name": "Fred", "last_name": "Power", "phone": "197412", "email": "fred@abc.ie" },
    { "first_name": "Ann", "last_name": "Doyle", "phone": "836547", "email": "ann@abc.ie" },
    { "first_name": "Phil", "last_name": "Jones", "phone": "927481", "email": "phil@abc.ie" },
    { "first_name": "Jane", "last_name": "Ross", "phone": "993377", "email": "jane@abc.ie" },
    { "first_name": "Tom", "last_name": "Moore", "phone": "123456", "email": "tom@abc.ie" }
] 
```

`$.getJSON`为您处理 json 解析 - 只需执行以下操作：

```
$.getJSON('/url/of/the/json/file', function(people) {
    alert(people[0].first_name)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:09:45.997

这不是 json 格式，因此您将无法使用适用于 json 的函数来处理它。我建议在服务器端使用 lib/function 来创建正确的 json 输出，然后在客户端使用它也会容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:13:03.443

```
var t = eval('[{ "first_name": "Tom", "last_name": "Moore", "phone": "123456", "email": "tom@abc.ie" },{ "first_name": "Fred", "last_name": "Power", "phone": "197412", "email": "fred@abc.ie" },{ "first_name": "Ann", "last_name": "Doyle", "phone": "836547", "email": "ann@abc.ie" },{ "first_name": "Phil", "last_name": "Jones", "phone": "927481", "email": "phil@abc.ie" },{ "first_name": "Jane", "last_name": "Ross", "phone": "993377", "email": "jane@abc.ie" },{ "first_name": "Tom", "last_name": "Moore", "phone": "123456", "email": "tom@abc.ie" }]');

for (i in t) {
var data = t[i];
  for (k in data) {
    alert(k+" >> "+data[k])
  }
} 
```

您可以将“k”作为键，将“data[k]”作为值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:00:01.720

如前所述，您的 JSON 无效，如果有疑问，您可以随时检查：

[http://jsonlint.com/](http://jsonlint.com/) 或 [http://json.parser.online.fr/](http://json.parser.online.fr/)

# c# - Ninject 属性或构造注入 ASP.NET MVC3

> ID：10718692
> 
> 赞同：1
> 
> 时间：2012-05-23T11:06:42.780
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, ninject

我正在使用 Ninject.MVC3。

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<Repository>().To<Repository>();
} 
```

在 App_Start 中像这样注册它们。它在请求此存储库的控制器上运行良好。但是我也有一些需要这个存储库的类。

```
 [Inject]
        public MemberShipService(Repository repository)
        {
            this.Repository = repository;
        } 
```

^来自类构造函数的示例。我尝试过构造函数注入，这只是给了我错误，因为它为构造函数请求了一个参数。属性注入根本不起作用。

我需要做一些额外的事情来使构造函数或属性注入在 asp.net mvc3 中工作吗？除了上面发布的行之外，我还没有在 NinjectWebCommon 中进行任何其他配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:10:19.417

您需要使用依赖解析器解析该类的实例才能使用它，创建您`MemberShipService`使用的实例：

```
var memberShipService = 
    DependencyResolver.Current.GetService(typeof(MemberShipService)) as MemberShipService; 
```

`Repository`这将使用您指定的构造函数绑定您的实例变量。

# c++ - 在 C++ 中的 Windows 上的串行端口上设置 low_latency 标志

> ID：10718693
> 
> 赞同：3
> 
> 时间：2012-05-23T11:06:43.083
> 
> 标签：c++, windows, serial-port

我有一个使用 boost asio 打开串行端口的程序。

默认情况下，串行端口具有保持线路空闲的延迟。在 Windows 平台上，我看到了 30 毫秒的延迟，而在 Linux 平台上，延迟是 20 毫秒。

对于 Linux 环境，我发现“linux.h”的“ioctl”类有一种方法可以使用一些标志（以及我需要的：low_latency）来设置串行设置。

代码如下：

```
boost::asio::basic_serial_port<boost::asio::serial_port_service>::native_type native = serial_port_.native(); // serial_port_ is the boost's serial port class.
struct serial_struct serial;
ioctl(native, TIOCGSERIAL, &serial);
serial.flags |= ASYNC_LOW_LATENCY; // (0x2000)
ioctl(native, TIOCSSERIAL, &serial); 
```

我也想减少我的 Windows 平台上的延迟。是否有一种等效的方法可以对带有 C++ 的 Windows 执行相同的操作？

顺便说一句，我看到有一些解决方案建议在 Windows 设备管理器中更改串行端口的属性，但我没有这些解决方案显示的这些属性，我需要一个代码解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:58:05.637

从 windows 中的 boost asio 获取本机句柄并将其传递给 SetCommTimeouts： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa363437 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363437(v=vs.85).aspx)

特别是看COMMTIMEOUT结构的ReadIntervalTimeout：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa363190 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363190(v=vs.85).aspx)

ReadIntervalTimeout 两个字节到达通信线路之间允许经过的最长时间，以毫秒为单位。在 ReadFile 操作期间，时间段从接收到第一个字节开始。如果任意两个字节到达的时间间隔超过此数量，则 ReadFile 操作完成并返回任何缓冲数据。零值表示不使用间隔超时。MAXDWORD 值与 ReadTotalTimeoutConstant 和 ReadTotalTimeoutMultiplier 成员的零值相结合，指定读取操作将立即返回已收到的字节，即使没有收到任何字节。

您还可以使用 GetCommTimeouts 查询当前值：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa363261 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363261(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T23:23:21.220

我记得在 NT4/Win2k/WinXP 时代遇到过这个问题，我想你遇到的问题是相似的。

使用 COMMTIMEOUT 结构总是在每次超时后添加时间片延迟，这意味着对于可变长度数据包，您总是添加 10 毫秒或 16 毫秒的延迟，具体取决于机器是否为 SMP 机器。例如，您无法真正获得 1 毫秒的超时。即使在具有完成端口的串行端口上的异步操作上使用 COMMTIMEOUT 也是如此。

为了消除这个问题，我使用了 IO Completion Ports 并且有一个单字符读取操作的管道未完成。当字节到达端口时读取完成，并且可以在主 IOCP 事件循环中出列。这以一些代码复杂性为代价提供了非常高的性能。

这种方法不适用于 boost::asio，因为只允许一个未完成的读取。您可以尝试为 Windows for asio 实现基于 Windows IOCP 的串行端口后端，或者您可以为串行通信使用单独的 IOCP 和线程。

# c# - 我无法写入配置文件

> ID：10718698
> 
> 赞同：5
> 
> 时间：2012-05-23T11:07:03.363
> 
> 标签：c#, configuration

我正在使用这个类来写入配置文件。代码已构建并且应用程序启动，但每次我检查 app.config 时，我都看不到里面有任何内容。

可能是什么问题呢？

这是代码：

```
public class ConfigSettings
    {
        private ConfigSettings() { }

        public static string ReadSetting(string key)
        {
            return ConfigurationManager.AppSettings[key];
        }

        public static void WriteSetting(string key, string value)
        {
            // load config document for current assembly
            XmlDocument doc = loadConfigDocument();

            // retrieve appSettings node
            XmlNode node = doc.SelectSingleNode("//appSettings");

            if (node == null)
                throw new InvalidOperationException("appSettings section not found in config file.");

            try
            {
                // select the 'add' element that contains the key
                XmlElement elem = (XmlElement)node.SelectSingleNode(string.Format("//add[@key='{0}']", key));

                if (elem != null)
                {
                    // add value for key
                    elem.SetAttribute("value", value);
                }
                else
                {
                    // key was not found so create the 'add' element
                    // and set it's key/value attributes
                    elem = doc.CreateElement("add");
                    elem.SetAttribute("key", key);
                    elem.SetAttribute("value", value);
                    node.AppendChild(elem);
                }
                doc.Save(getConfigFilePath());
            }
            catch
            {
                throw;
            }
        }

        public static void RemoveSetting(string key)
        {
            // load config document for current assembly
            XmlDocument doc = loadConfigDocument();

            // retrieve appSettings node
            XmlNode node = doc.SelectSingleNode("//appSettings");

            try
            {
                if (node == null)
                    throw new InvalidOperationException("appSettings section not found in config file.");
                else
                {
                    // remove 'add' element with coresponding key
                    node.RemoveChild(node.SelectSingleNode(string.Format("//add[@key='{0}']", key)));
                    doc.Save(getConfigFilePath());
                }
            }
            catch (NullReferenceException e)
            {
                throw new Exception(string.Format("The key {0} does not exist.", key), e);
            }
        }

        private static XmlDocument loadConfigDocument()
        {
            XmlDocument doc = null;
            try
            {
                doc = new XmlDocument();
                doc.Load(getConfigFilePath());
                return doc;
            }
            catch (System.IO.FileNotFoundException e)
            {
                throw new Exception("No configuration file found.", e);
            }
        }

        private static string getConfigFilePath()
        {
            return AppDomain.CurrentDomain.GetData("APP_CONFIG_FILE").ToString();
        }
    } 
```

之后我用它来写入文件：

```
ConfigSettings.WriteSetting("check", "true"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T11:17:03.610

您可以从 System.Configuration.ConfigurationSection 派生并使其变得非常简单：

```
public class MyConfigurationSection : System.Configuration.ConfigurationSection
{
    [ConfigurationProperty("myProperty")]
    public string MyProperty 
    {
        get { return (string)this["myProperty"]; }
        set { this["myProperty"] = value; }
    }
} 
```

然后在 app/web.config 中添加 configSection。

```
<configuration>
    <configSections>
        <section name="myConfiguration" type="MyConfigurationSection, MyAssembly" />
    </configSections>

    <myConfiguration myProperty="someValue" />
</configuration> 
```

您可以像这样在任何地方获取实例：

```
ConfigurationManager.GetSection("myConfiguration") as MyConfigurationSection 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T11:10:18.390

检查 YourExeName.config 文件而不是 app.config

# python - 将numpy数组转换为cython指针

> ID：10718699
> 
> 赞同：7
> 
> 时间：2012-05-23T11:07:09.410
> 
> 标签：python, numpy, cython

我有一个 numpy 数组，它来自 a `cv2.imread`，所以有`dtype = np.uint8`and `ndim = 3`。

我想将其转换为 Cython`unsigned int*`以与外部 cpp 库一起使用。

我正在尝试`cdef unsigned int* buff = <unsigned int*>im.data`但是我得到了错误`Python objects cannot be cast to pointers of primitive types`

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2019-02-22T17:27:59.650

更现代的方法是使用内存视图而不是指针：

```
cdef np.uint32_t[:,:,::1] mv_buff = np.ascontiguousarray(im, dtype = np.uint32) 
```

`[:,;,::1]`语法告诉 Cython 内存视图是 3D 并且 C 在内存中是连续的。将类型定义为 memoryview 而不是 numpy 数组的优点是

1.  它可以接受任何定义缓冲区接口的类型，例如内置数组模块或 PIL 成像库中的对象。
2.  Memoryviews 可以在不持有 GIL 的情况下传递，这对于并行代码很有用

要从 memoryview 获取指针，请获取第一个元素的地址：

```
cdef np.uint32_t* im_buff = &mv_buff[0,0,0] 
```

这比这样做更好，`<np.uint32_t*>mv_buff.data`因为它避免了强制转换，并且强制转换通常可以隐藏错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-24T10:35:07.777

感谢您的意见。通过以下方式解决：

```
cdef np.ndarray[np.uint32_t, ndim=3, mode = 'c'] np_buff = np.ascontiguousarray(im, dtype = np.uint32)
cdef unsigned int* im_buff = <unsigned int*> np_buff.data 
```

# wordpress - 有通用 Wordpress 扩展表的地方吗？

> ID：10718709
> 
> 赞同：0
> 
> 时间：2012-05-23T11:08:21.847
> 
> 标签：wordpress, database-design, database-performance

Wordpress 的数据模型通过它的“元”表（又名 wp_postmeta、wp_commentmeta、wp_usermeta）提供可扩展性。这种名称/值对链接非常灵活，并且受到 Wordpress API 的支持。庆祝它的所有充分理由，但如果您的交易中有很多扩展属性，它也会变得非常糟糕。例如，假设我有一个名为“Blood Test”的自定义帖子类型，我希望它能够捕获来自血液分析的 30-40 个不同的测量值。每次测试都使用这个 wp_postmeta 加入是否可行？可能不是。

我可以完全定制并左右构建表格，但我想知道的是，是否没有办法至少构建“80/20 规则”并拥有一个通用扩展表，该表提供静态数量的附加列放置 SQL 可搜索属性，然后以 JSON 对象的列结束，该对象将允许非 SQL 可搜索属性扩展到几乎无限量？如下图所示：

![比较两个模型](../Images/fda2ad285c66a29f8bec69214aea3cf0.png)

我在想，通过这样做，还可以扩展 Wordpress API，这样大多数开发人员就可以在很大程度上忽略这种结构差异。像这样的东西：

注册 API 示例：

```
$my_meta_ext = new WP_Meta_Extension( 'post' );
$my_meta_ext->add_tran_type( 'blood-measurement' , ( 'col1' => 'total-cholesterol' , 'col2' => 
'triglycerides', 'col3' => 'etc'); 
```

使用 API 示例：

```
add_ext_meta ( $term_id, 'blood-measurement.total-cholesterol', $meta_value ); 
```

好的，这是我对小组的明确问题：

1.  这有意义吗？你觉得这有什么价值吗？类似的东西是否已经以“插件”形式（或其他形式）存在？
2.  如果您要在所有类型（也称为帖子、评论、用户等）中使用一个扩展表，您是否能够在 mySQL 中构建一个高效的索引？每种类型都有一个表会更好吗？
3.  有没有人有任何指标——即使它们没有被完全证明——关于默认的 wordpress 扩展模型何时开始降低性能？
4.  如果您已经做过类似的事情......在扩展模型时学到了什么重要的经验教训？这是多么复杂的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:03:20.743

我把这个话题带到了伦敦的一个专业的 WordPress 工作组，虽然我们没有得到答案，但我们非常清楚地同意这种*类型*的解决方案将非常有价值。此外，我决定创建一个 GIT 存储库，目的是开发一个插件来解决这个问题（希望得到伦敦小组的慷慨支持，或者任何正在阅读本文并认为你可以提供帮助的人的慷慨支持）。

可以在这里找到存储库：

[https://bitbucket.org/ksnyder/wp-database-extension/](https://bitbucket.org/ksnyder/wp-database-extension/)

请理解，此时真的只有一个想法，一个高级设计，一个接口规范，但没有真正的代码。这当然会改变，如果你愿意帮助我们完成这项工作，它会改变得更快（请注意，我没有运行分布式开发的个人经验，但你必须在某个地方学习）。

# c# - 如何为 DetailsView 的插入和取消按钮分配不同的样式？

> ID：10718712
> 
> 赞同：2
> 
> 时间：2012-05-23T11:08:33.720
> 
> 标签：c#, asp.net

我在插入模式下有一个 DetailsView：

```
<asp:CommandField ShowInsertButton="True" ButtonType="Button" ControlStyle-CssClass="myButton" InsertText="My Insert text" /> 
```

当然，Insert/Cancel 两个按钮的样式相同。

**是否可以将这两个分别设置为一蓝一黄？**

在 FormView 中，您可以像这样单独定义按钮：

```
<asp:Button CommandName="Insert" Text="Insert" class="myButtonStyle1"  ID="myButtonID1" runat="server" CausesValidation="True" />

<asp:Button CommandName="Cancel" Text="Cancel" class="myButtonStyle2"  ID="myButtonID2" runat="server" CausesValidation="False" /> 
```

DetailsView 有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:21:04.710

最简单的解决方案是将“新建、插入、取消”CommandField 转换为 TemplateField。如果您使用 WYSIWYG 编辑器，则在 OK 按钮上方有一个按钮。这将生成以下（审查的）代码，您可以轻松地对其进行样式设置。

```
 <asp:TemplateField ShowHeader="False">
            <InsertItemTemplate>
                <asp:Button ID="LinkButton1" runat="server" CssClass="insertButton" CausesValidation="True" CommandName="Insert" Text="Insert" />
                &nbsp;<asp:Button ID="LinkButton2" runat="server" CssClass="cancelButton" CausesValidation="False" CommandName="Cancel" Text="Cancel" />
            </InsertItemTemplate>
        </asp:TemplateField> 
```

注意：我在下面的按钮中添加了 CssClass 属性，其 CSS 类名称为“insertButton、cancelButton”，它们都可以在您的样式表中进行配置。

更多注释：

1.  当需要按钮（不是链接按钮）时，不要使用结束标记 ( `</asp:button>`) - 将其替换为内联`/`标记。否则，它将无法正常工作。

2.  使用仅插入模式时，不需要审查的 ItemTemplate — 将其删除。

3.  避免使用 ControlStyle 控件，否则可能会导致类否决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:46:57.787

感谢 kapil-khandelwal，这是一个使用 jQuery 的解决方案，在 Zachary 新添加的答案之前一直在使用：

```
<script type="text/javascript" src="../Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
        $(document).ready(function () {
            $("input").each(function () {
                if ($(this).attr("type") == "submit") {
                    if ($(this).val() == "Insert") { $(this).addClass("Insert"); };
                };
                if ($(this).attr("type") == "button") {
                    if ($(this).val() == "Cancel") { $(this).addClass("Cancel"); };
                };
            });
        });
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:46:27.633

使用 jQuery (http://docs.jquery.com/Downloading_jQuery#Download_jQuery)：

```
<script src="../jquery-1.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        var list = $("input[type=button]");
        list.each(function (itemIndex) {
            if ($(this).val() == "Cancel")
            { $(this).addClass("Cancel"); }
            else {
                if ($(this).val() == "Insert")
                { $(this).addClass("Insert"); }
            }
        });
    });
</script> 
```

只需在 CSS 文件中添加两个类（“插入”和“取消”）。例如。

```
 <style type="text/css">
.Insert {background-color:Red;}
    .Cancel {background-color:Black;}
</style> 
```

# visual-studio-2010 - 在 .NET Visual Studio 中设置批处理断点？

> ID：10718714
> 
> 赞同：0
> 
> 时间：2012-05-23T11:08:55.097
> 
> 标签：visual-studio-2010, breakpoints

我有一个新的演示项目，我今天要学习。我想进行调试并遵循该过程并查看函数调用的顺序并遵循其逻辑。这个想法其实我心里已经有好几次了。

我想知道当我得到一个新项目时，是否可以在每个类的每个函数处批处理断点？我不是在说逐行按 F11，我希望断点位于每个函数的标题处，这样我就可以快速规划每个函数。

问候，汤姆

# python - 也许在字符串中添加额外的句子/单词

> ID：10718719
> 
> 赞同：4
> 
> 时间：2012-05-23T11:09:02.880
> 
> 标签：python, string

我不得不多次创建类似的代码：

```
if condition():
    word = " not"
else:
    word = ""

print "A five ounce bird could{0} carry a one pound coconut".format(word) 
```

我已经在这里将问题分解为基本问题，在“实践”中，会有额外的变量`"A"`, `"five"`, `"bird"`, `"a"`, `"one"`, 等，`"coconut"`因此它们可能都会发生变化，并且与它们一起添加了复数 s-es 和诸如此类的东西。

它总是让我觉得不太令人满意。之前需要的额外空间和两个讨厌`"not"`的空间之前`{0}`都没有空间，但由于我不希望有两个空格，如果`word`是空的，我看不出有任何其他方法可以做到这一点。

创建两个单独的消息会破坏[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，并且由于可能组合的数量，有时甚至不可行。

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:10:16.967

创建一个单词列表，必要时插入，然后插入`' '.join(words)`。

如果有逗号/句号，构建一个句子结构：

```
[['If', 'there', 'are', 'periods'], ', ', ['build', 'a', 'sentence', 'structure'], '.'] 
```

在标点符号中使用相应的空格（逗号后的空格，括号前的空格，...），然后是组内和各个组`' '.join()`内的单词。`''.join()`（感谢@Alfe 提出的以不同方式加入单词和组的建议）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:12:32.130

> 使用 DRY 创建两条单独的消息

如果您关心[i18n](http://en.wikipedia.org/wiki/Internationalization_and_localization)，那么创建两条单独的消息可能是唯一合理的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T11:29:53.653

由于在英语中（以及在我知道的其他语言中）空格必须在哪里以及在哪里不明确的规则，您可以使用所有句子部分（例如`['If', 'there', 'are', 'commas', ',', 'we', 'insert', 'them', '.']`）的简单列表，然后编写一个专门的连接函数，将英语规则应用于 where必须插入空格（例如，单词之间、逗号之后、左括号之前……）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T11:12:46.733

对于这种`" not"`情况，请保持简单：

```
print "A five ounce bird could{0} carry a one pound coconut".format(" not" if condition() else "") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T11:18:11.137

我会做...

```
word = ("could" if not condition() else "could not")

print "A five ounce bird {0} carry a one pound coconut".format(word) 
```

:P

编辑：对于一般情况，这就是你想要的，我会按组合来。例如。（好吧，这对我来说太 Go4 和简单化了，但说明了这一点）：

```
class Agglutinator(list):
    def __str__(self):
        return self._separator.join(str(x) for x in self)

class Paragraph(Agglutinator):
    """Returns dot separated sentences""" 
    _separator = '. '

class Sentence(Agglutinator):
    """Returns comma separated clauses""" 
    _separator = ', '

class Clause(Agglutinator):
    """Returns space separated words"""
    _separator = ' '

c1 = Clause(["A", "number", "of", "words", "make", "a", "clause"])
c2 = Clause(["and", "a", "number", "of", "clauses", "make", "a", "sentence"])
c3 = Clause(["A", "collection", "of", "sentences", "makes", "a", "paragraph"])

s1 = Sentence([c1, c2])
s2 = Sentence([c3])

print Paragraph([s1, s2]) 
```

这给了你：

```
A number of words make a clause, and a number of clauses make a sentence. A collection of sentences makes a paragraph 
```

详细说明一下，您可以将`Sentence`第一个单词大写，等等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-23T11:30:23.937

处理此问题的另一种方法，但不确定它是否是您正在寻找的

```
word = "not"

print "A five ounce bird could{0} carry a one pound coconut".format(" "+word if condition() else "") 
```

好的，还有一种方法。但事实上，几乎所有这些都是相似或相同的......

```
def format_word(word):
    if word:
        return " " + word
    else:
        return ""

print "A five ounce bird could{0} carry a one pound coconut".format(format_word(word)) 
```

但很可能，所有这些看起来都很烦人，因为它们实际上是相似的......

最后的**肮脏**方法可能是：

```
if condition():
    word = "not"
else:
    word = ""

wrd =  "A five ounce bird could {0} carry a one pound coconut".format(word)
print wrd.replace("  ", " ") # replace all double spaces with singular one... 
```

但是，是的，它也很脏......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T11:44:00.240

我将添加我刚刚想到的另一种可能性。子类化`string.Formatter`并添加自定义转换器，因此您可以键入

```
fmt = MyFormatter()
print fmt("Problem {not!w} solved", not="") 
```

`!w`如果变量为空/未指定，则格式化程序将删除所有带有转换器的字段之前的空格。这需要至少重新实现`vformat`and`convert_field`方法，但它应该是非常可行的。

# javascript - 之前触发 onchange 时未触发 onclick 事件

> ID：10718730
> 
> 赞同：3
> 
> 时间：2012-05-23T11:10:08.800
> 
> 标签：javascript, onclick, onchange

我有一个有趣的问题。

我有一个与它相关联的 onchange 事件的文本区域。然后我有一个链接到 onclick 事件的按钮。

当 onchange 事件在 textarea 上触发时，将处理放入 textarea 的文本。当我单击文本区域之外的内容时，通常会发生这种情况。

我所做的是以下内容：

1.  我在文本区域中输入了一个文本。
2.  输入后立即单击按钮以触发按钮上的 onclick 事件
3.  什么都没有发生，但是当我单击按钮时，textarea 上的 onchange 事件被触发，但按钮本身的 onclick 事件没有被触发。

为什么？我希望同时触发 onchange 和 onclick。有什么我需要做的，所以点击按钮不会“丢失”。我意识到我必须单击两次，因为第一次单击会导致 textarea 上的 onchange，然后第二次单击会触发按钮上的 onclick。

下面的代码显示了一个示例，只需尝试下面的代码。输入文本，然后直接单击该按钮。只有“textarea”弹出窗口会出现。

```
<textarea onchange="processText();" name="mytext"></textarea>
<button onclick="processButton();">Hello</button>
<script language="Javascript">
  function processText()
  {
    alert( 'textarea');
  }

  function processButton()
  {
    alert( 'button');
  }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T11:33:36.610

你需要重新检查你的假设。在您的示例中，*alert()*中断了程序流程，中断了*onclick*的处理。此代码（[此处为 jsfiddle](http://jsfiddle.net/J5kj2/)）演示了*onchange*默认情况下不会干扰*onclick*：

```
<textarea onchange="processText();" name="mytext"></textarea>
<button onclick="processButton();">Hello</button>
<div id="clicked"></div>
<div id="changed"></div>
<script language="Javascript">
  function processText()
  {
    document.getElementById('changed').innerHTML = "onchange fired";;
  }

  function processButton()
  {
    document.getElementById('clicked').innerHTML = "onclick fired";
  }
</script>​ 
```

*我遇到了类似的问题，但未处理onclick*事件的实际原因是被单击的元素由于*onchange*处理程序而向下滚动。当鼠标按钮被释放时，元素没有收到*mouseup*事件并且“点击”被中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:21:00.037

处理 textarea 上的 onblur 事件和按钮上的 onclick 事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T05:21:37.063

试试这个向组件添加事件监听器

```
document.getElementsByTagName("textarea")[0].addEventListener("change", function(){
    alert( 'textarea');
});

document.getElementsByTagName("button")[0].addEventListener("click", function(){
    alert( 'button');
}); 
```

如果定义**了 Id**，则使用**getElementById()**。

# java - 从 CertificationRequest 到 X509Certificate

> ID：10718737
> 
> 赞同：0
> 
> 时间：2012-05-23T11:10:26.563
> 
> 标签：java, x509certificate

实现 org.jscep.server.ScepServlet 我需要为方法 doEnroll( `List<X509Certificate> doEnroll(CertificationRequest certificationRequest)`) 提供一个实现。

如何从提供的 CertificationRequest 中返回 X509Certificate？

除了 CertificationRequest 我还有我需要用于签名的证书

从认证请求中获取公钥就足够了，因为我拥有用于​​生成证书的其余代码。

到目前为止我所拥有的：

```
protected List<X509Certificate> doEnroll(CertificationRequest certificationRequest) throws OperationFailureException, Exception {
    CaCertificate caCertificate = getSelfSignedCertificate();
    X509V3CertificateGenerator certGen = new X509V3CertificateGenerator();
    certGen.setSerialNumber(BigInteger.valueOf(System.currentTimeMillis()));
    certGen.setIssuerDN(caCertificate.getCertificate().getSubjectX500Principal());
    certGen.setNotBefore(notBefore);
    certGen.setNotAfter(notAfter);
    certGen.setSubjectDN(certificationRequest.getCertificationRequestInfo().getSubject());
    certGen.setPublicKey(publicKey); // this is basically what I need

    X509Certificate issuedCert = certGen.generate(caCertificate.getKeypair().getPrivate());

    List<X509Certificate> x509Certificates = new ArrayList<X509Certificate>();
    x509Certificates.add(issuedCert);

    return x509Certificates;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:11:30.497

在一个 jscep 测试类中找到了这个方法：

```
public static PublicKey getPublicKey(CertificationRequest csr) throws IOException {
    SubjectPublicKeyInfo pubKeyInfo = csr.getCertificationRequestInfo().getSubjectPublicKeyInfo();
    RSAKeyParameters keyParams = (RSAKeyParameters) PublicKeyFactory.createKey(pubKeyInfo);
    KeySpec keySpec = new RSAPublicKeySpec(keyParams.getModulus(), keyParams.getExponent());

    try {
        KeyFactory kf = KeyFactory.getInstance("RSA");
        return kf.generatePublic(keySpec);
    } catch (Exception e) {
        throw new IOException(e);
    }
} 
```

# google-maps - 将鼠标悬停在多边形上（显示文本）

> ID：10718743
> 
> 赞同：8
> 
> 时间：2012-05-23T11:10:37.467
> 
> 标签：google-maps, google-maps-api-3

我在谷歌地图上做了几个多边形。现在我想向多边形添加鼠标悬停（和鼠标悬停），这样当您将鼠标悬停在多边形上时，您可以看到该区域的名称。并且当您将鼠标移出时，名称就会消失（例如当您将鼠标悬停在浏览器中的按钮上时）

```
var map;
var infoWindow;

function initialize() {
    var myLatLng = new google.maps.LatLng(50.88111111111, 3.889444444444);
    var myOptions = {
        zoom: 12,
        center: myLatLng,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    var poly;
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var polyCoords = [
        verwissel(3.869506,50.906449),
        verwissel(3.869654,50.905664),
        verwissel(3.869934,50.904131),
        verwissel(3.870310,50.902717),
        verwissel(3.870471,50.901559),
    ];

    poly = new google.maps.Polygon({
        paths: HerzeleCoords,
        strokeColor: "#FF0000",
        strokeOpacity: 0.8,
        strokeWeight: 3,
        fillColor: "#FF0000",
        fillOpacity: 0.35
    });

    google.maps.event.addListener(Poly, "mouseover", function(showtext("polyname"));
google.maps.event.addListener(Poly, "mouseover", function(do not show text anymore); 
```

这就是我认为它的样子，但我不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T15:49:31.667

这是一个例子：http: [//jsfiddle.net/tcfwH/304/](http://jsfiddle.net/tcfwH/304/)

与浏览器工具提示不完全相同，但可以设置文本样式。我正在使用 MarkerWithLabel。每个标记都用于其多边形的名称。`white-space: nowrap`在 CSS 中切换多行框更改。也有 InfoBox 作为一个工作选项，但我发现它比 MarkerWithLabel 使用起来要复杂得多。

事件侦听器根据鼠标位置移动 MarkerWithLabel：

```
 google.maps.event.addListener(poly, "mousemove", function(event) {
    marker.setPosition(event.latLng);
    marker.setVisible(true);
  });
  google.maps.event.addListener(poly, "mouseout", function(event) {
    marker.setVisible(false);
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-21T13:38:26.523

我没有在各种浏览器中测试过这个，但在 Chrome 中它对我有用：调用包含地图“map_canvas”的 div。此外，为了使每个多边形都有自己的标题，请将属性“sourceName”设置为多边形的标题。

```
 perimeter.addListener('mouseover',function(){
            var map_canvas = document.getElementById("map_canvas");
            map_canvas.title = this.sourceName;
        });
    	perimeter.addListener('mouseout',function(){
            var map_canvas = document.getElementById("map_canvas");
            map_canvas.removeAttribute('title');
        });
```

# c++ - 我应该使用 SIMD 或矢量扩展还是其他东西？

> ID：10718744
> 
> 赞同：18
> 
> 时间：2012-05-23T11:10:38.383
> 
> 标签：我目前正在用c++, c++11, c++, gcc, sse, simd

[我目前正在用c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")（使用[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")）开发一个开源 3D 应用程序框架。我自己的数学库的设计类似于[XNA 数学库](http://msdn.microsoft.com/en-us/library/windows/desktop/ee415574%28v=vs.85%29.aspx)，也考虑了[SIMD](http://en.wikipedia.org/wiki/SIMD)。但是目前它并不是很快，并且它在内存对齐方面存在问题，但更多的是在另一个问题中。

几天前，我问自己为什么要编写自己的[SSE](http://de.wikipedia.org/wiki/Streaming_SIMD_Extensions)代码。当优化开启时，编译器还能够生成高度优化的代码。我也可以使用[GCC的“](http://gcc.gnu.org/)[向量扩展](http://gcc.gnu.org/onlinedocs/gcc/Vector-Extensions.html)” 。但这一切都不是真正可移植的。

我知道当我使用自己的 SSE 代码时我有更多的控制权，但这种控制通常是不必要的。

SSE 的一个大问题是动态内存的使用，即在内存池和面向数据的设计的帮助下，尽可能地受到限制。

**现在我的问题：**

*   我应该使用裸 SSE 吗？也许被封装了。

    ```
    __m128 v1 = _mm_set_ps(0.5f, 2, 4, 0.25f);
    __m128 v2 = _mm_set_ps(2, 0.5f, 0.25f, 4);

    __m128 res = _mm_mul_ps(v1, v2); 
    ```

*   还是编译器应该做这些脏活？

    ```
    float v1 = {0.5f, 2, 4, 0.25f};
    float v2 = {2, 0.5f, 0.25f, 4};

    float res[4];
    res[0] = v1[0]*v2[0];
    res[1] = v1[1]*v2[1];
    res[2] = v1[2]*v2[2];
    res[3] = v1[3]*v2[3]; 
    ```

*   或者我应该使用带有附加代码的 SIMD 吗？就像一个带有 SIMD 操作的动态容器类，需要额外`load`的`store`指令。

    ```
    Pear3D::Vector4f* v1 = new Pear3D::Vector4f(0.5f, 2, 4, 0.25f);
    Pear3D::Vector4f* v2 = new Pear3D::Vector4f(2, 0.5f, 0.25f, 4);

    Pear3D::Vector4f res = Pear3D::Vector::multiplyElements(*v1, *v2); 
    ```

    上面的例子使用了一个虚构的类，其中包含使用`float[4]`内部和使用`store`以及`load`在每个方法中，例如`multiplyElements(...)`. 这些方法使用 SSE 内部。

我不想使用其他库，因为我想了解更多关于 SIMD 和大型软件设计的信息。但是欢迎图书馆的例子。

**PS：**这不是一个真正的问题，而是一个设计问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T13:29:28.820

好吧，如果你想使用 SIMD 扩展，一个好方法是使用 SSE 内在函数（当然要远离内联汇编，但幸运的是，无论如何你没有将它列为替代方案）。但是为了清洁起见，您应该将它们封装在一个带有重载运算符的漂亮矢量类中：

```
struct aligned_storage
{
    //overload new and delete for 16-byte alignment
};

class vec4 : public aligned_storage
{
public:
    vec4(float x, float y, float z, float w)
    {
         data_[0] = x; ... data_[3] = w; //don't use _mm_set_ps, it will do the same, followed by a _mm_load_ps, which is unneccessary
    }
    vec4(float *data)
    {
         data_[0] = data[0]; ... data_[3] = data[3]; //don't use _mm_loadu_ps, unaligned just doesn't pay
    }
    vec4(const vec4 &rhs)
        : xmm_(rhs.xmm_)
    {
    }
    ...
    vec4& operator*=(const vec4 v)
    {
         xmm_ = _mm_mul_ps(xmm_, v.xmm_);
         return *this;
    }
    ...

private:
    union
    {
        __m128 xmm_;
        float data_[4];
    };
}; 
```

现在好消息是，由于匿名联合（UB，我知道，但给我看一个带有 SSE 的平台，这不起作用）你可以在必要时使用标准浮点数组（比如`operator[]`或初始化（不要使用`_mm_set_ps`） ) 并且仅在适当时使用 SSE。使用现代的内联编译器，封装可能是免费的（我很惊讶 VC10 用这个向量类优化了 SSE 指令以进行大量计算，不用担心不必要的移动到临时内存变量中，因为 VC8 似乎甚至喜欢没有封装）。

唯一的缺点是，您需要注意正确对齐，因为未对齐的向量不会给您带来任何好处，甚至可能比非 SSE 慢。但幸运的是，对齐要求`__m128`将传播到`vec4`（和任何周围的类）中，您只需要处理动态分配，C++ 有很好的方法。您只需要创建一个基类，其`operator new`和`operator delete`函数（当然在所有风格中）都已正确重载，并且您的向量类将从该基类派生。要将您的类型与标准容器一起使用，您当然还需要专门化`std::allocator`（也许`std::get_temporary_buffer`并且`std::return_temporary_buffer`为了完整起见），`operator new`否则它将使用全局。

但真正的缺点是，您还需要关注将 SSE 向量作为成员的任何类的动态分配，这可能很乏味，但也可以通过从这些类派生`aligned_storage`并放置整个`std::allocator`专业化来再次自动化一点乱成一个方便的宏。

JamesWy​​nn 的观点是，这些操作通常在一些特殊的繁重计算块（如纹理过滤或顶点变换）中组合在一起，但另一方面，使用这些 SSE 向量封装不会引入任何超过`float[4]`向量类的标准实现的开销. 无论如何，您都需要将这些值从内存中获取到寄存器中（无论是 x87 堆栈还是标量 SSE 寄存器）才能进行任何计算，所以为什么不一次全部使用它们（恕我直言，这应该不会比移动单个慢值（如果正确对齐）并并行计算。因此，您可以自由地将 SSE 实现切换为非 SSE 实现，而不会产生任何开销（如果我的推理错误，请纠正我）。

但是，如果确保所有`vec4`作为成员的类的对齐对您来说太乏味（恕我直言，这是这种方法的唯一缺点），您还可以定义一个专门的 SSE 向量类型，用于计算并使用标准的非用于存储的 SSE 向量。

* * *

**编辑：**好的，看看这里出现的开销参数（起初看起来很合理），让我们进行一些计算，由于运算符重载，它们看起来非常干净：

```
#include "vec.h"
#include <iostream>

int main(int argc, char *argv[])
{
    math::vec<float,4> u, v, w = u + v;
    u = v + dot(v, w) * w;
    v = abs(u-w);
    u = 3.0f * w + v;
    w = -w * (u+v);
    v = min(u, w) + length(u) * w;
    std::cout << v << std::endl;
    return 0;
} 
```

看看 VC10 是怎么想的：

```
...
; 6   :     math::vec<float,4> u, v, w = u + v;

movaps  xmm4, XMMWORD PTR _v$[esp+32]

; 7   :     u = v + dot(v, w) * w;
; 8   :     v = abs(u-w);

movaps  xmm3, XMMWORD PTR __xmm@0
movaps  xmm1, xmm4
addps   xmm1, XMMWORD PTR _u$[esp+32]
movaps  xmm0, xmm4
mulps   xmm0, xmm1
haddps  xmm0, xmm0
haddps  xmm0, xmm0
shufps  xmm0, xmm0, 0
mulps   xmm0, xmm1
addps   xmm0, xmm4
subps   xmm0, xmm1
movaps  xmm2, xmm3

; 9   :     u = 3.0f * w + v;
; 10   :    w = -w * (u+v);

xorps   xmm3, xmm1
andnps  xmm2, xmm0
movaps  xmm0, XMMWORD PTR __xmm@1
mulps   xmm0, xmm1
addps   xmm0, xmm2

; 11   :    v = min(u, w) + length(u) * w;

movaps  xmm1, xmm0
mulps   xmm1, xmm0
haddps  xmm1, xmm1
haddps  xmm1, xmm1
sqrtss  xmm1, xmm1
addps   xmm2, xmm0
mulps   xmm3, xmm2
shufps  xmm1, xmm1, 0

; 12   :    std::cout << v << std::endl;

mov edi, DWORD PTR __imp_?cout@std@@3V?$basic_ostream@DU?$char_traits@D@std@@@1@A
mulps   xmm1, xmm3
minps   xmm0, xmm3
addps   xmm1, xmm0
movaps  XMMWORD PTR _v$[esp+32], xmm1
... 
```

即使没有彻底分析每条指令及其用法，我也很有信心说没有任何不必要的加载或存储，除了一开始的那些（好吧，我让它们未初始化），无论如何都是必要的他们从内存到计算寄存器，最后，这是必要的，下面的表达式`v`将被输出。它甚至没有将任何东西存储回`u`and `w`，因为它们只是我不再使用的临时变量。一切都完美内联和优化。它甚至设法无缝地打乱点积的结果以进行以下乘法，而不会离开 XMM 寄存器，尽管该`dot`函数在 s 之后`float`使用实际返回 a 。`_mm_store_ss``haddps`

因此，即使我通常对编译器的能力有点过度怀疑，也不得不说，与通过封装获得的干净和富有表现力的代码相比，将自己的内在函数手工制作成特殊函数并没有真正的回报。尽管您可能能够创建杀手级示例，其中手工编写内部函数确实可以为您节省一些指令，但是您首先必须超越优化器。

* * *

**编辑：**好的，Ben Voigt 指出了联合的另一个问题，除了（很可能没有问题）内存布局不兼容之外，它违反了严格的别名规则，编译器可能会优化访问不同联合成员的指令，从而使代码无效。我还没有考虑过。我不知道它在实践中是否有任何问题，它当然需要调查。

如果这确实是一个问题，我们很遗憾需要删除该`data_[4]`成员并`__m128`单独使用该成员。对于初始化，我们现在不得不`_mm_set_ps`再次`_mm_loadu_ps`求助。`operator[]`变得有点复杂，可能需要一些`_mm_shuffle_ps`和的组合`_mm_store_ss`。但是对于非常量版本，您必须使用某种代理对象，将分配委托给相应的 SSE 指令。必须研究编译器可以在特定情况下以何种方式优化这种额外的开销。

或者您只使用 SSE 向量进行计算，并且只制作一个接口，用于在整个非 SSE 向量之间进行转换，然后在计算的外围设备中使用（因为您通常不需要访问内部的单个组件冗长的计算）。这似乎是*glm*处理这个问题的方式。但我不确定*Eigen*是如何处理它的。

但是，无论您如何解决它，仍然没有必要在不利用运算符重载的好处的情况下手工制作 SSE instrisics。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:36:39.283

我建议您了解表达式模板（使用代理对象的自定义运算符实现）。通过这种方式，您可以避免在每个单独的操作中执行破坏性能的加载/存储，并且在整个计算中只执行一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T11:40:17.023

我建议在严格控制的函数中使用裸 simd 代码。由于开销原因，您不会将它用于主向量乘法，因此此函数可能应该根据 DOD 获取需要操作的 Vector3 对象列表。有一个，就有很多。

# android - 比较并查看用户是否单击了正确的单选按钮以获取 android 测验答案

> ID：10718750
> 
> 赞同：0
> 
> 时间：2012-05-23T11:11:14.800
> 
> 标签：android

大家好，我需要做一个简单的安卓测验。那么我所做的就是在其他在线示例的帮助下完成这些。

**MyOSIActivity.java**

```
package com.mns.mp;

import tp.mns.mp.R;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;
import android.widget.Toast;

public class MyOSIActivity extends Activity {

    private RadioGroup radioAnswerGroup;
    private RadioButton radioAnswerButton;
    private Button btnSubmit;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        addListenerOnButton();

    }

    public void addListenerOnButton() {

        radioAnswerGroup = (RadioGroup) findViewById(R.id.radioAnswer);
        btnSubmit = (Button) findViewById(R.id.btnSubmit);

        btnSubmit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                // get selected radio button from radioGroup
                int selectedId = radioAnswerGroup.getCheckedRadioButtonId();

                // find the radiobutton by returned id
                radioAnswerButton = (RadioButton) findViewById(selectedId);

                Toast.makeText(MyOSIActivity.this,
                        radioAnswerButton.getText(), Toast.LENGTH_SHORT).show();

            }

        });

    }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <TextView
        android:id="@+id/Qn1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:text="@string/Qn_1"
       />

    <RadioGroup
        android:id="@+id/radioAnswer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_1" 
            android:checked="true" />

        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_2" />

         <RadioButton
            android:id="@+id/radio3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/radio_3" />

    </RadioGroup>

    <Button
        android:id="@+id/btnSubmit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/btn_submit" />

</LinearLayout> 
```

**字符串.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="hello">Hello World, MyAndroidAppActivity!</string>
    <string name="app_name">MyAndroidApp</string>
    <string name="Qn_1"> Question 1: Acknowledgement, Sequencing, and Flow control are characteristics of which OSI layer?</string>
    <string name="radio_1">Layer 2</string>
    <string name="radio_2"> Layer 3</string>
    <string name="radio_3"> Layer 4</string>
    <string name="btn_submit">Submit</string>

</resources> 
```

好的，现在我试图让系统在用户按下提交按钮后将用户答案与正确答案进行比较，在这种情况下它是第 4 层。然后如果用户答案错误，吐司将回复用户它是不正确的并显示正确答案。如果用户是正确的，那么它将正确地回复用户。所以我需要使用 if else 但问题是我仍然不熟悉它。如果你们给我指导，我将不胜感激，因为我真的需要它。非常感谢你：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:16:37.627

你可以通过很多方式做到这一点......如果你知道正确答案的ID，你可以这样做：

```
if (selectedId==correctId){
    //show toast saying it is correct
}
else{
    //toast incorrect
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-21T11:17:08.320

**在 kotlin 你可以使用..**

```
radioAnswerGroup.setOnCheckedChangeListener(RadioGroup.OnCheckedChangeListener { group, checkedId ->

//radioAnswerButton is your correct radio button id

val isChecked = radioAnswerButton.isChecked

  if (isChecked) {
      Log.e("is check","right answer--")
  }else{
      Log.e("is check","wrong answer")
  }

}) 
```

# object - 将 CBitmap 对象转换为 CxImage 对象 MFC

> ID：10718754
> 
> 赞同：1
> 
> 时间：2012-05-23T11:11:31.527
> 
> 标签：object, mfc, cbitmap

我有一个 CBitmap 对象“m_bmp”。我需要将其转换为 CxImage 对象。有任何想法吗？是否有任何从位图对象到 CxImage 可用的其他类型的直接转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:28:50.857

`m_Img.CreateFromHBITMAP((HBITMAP)m_bmp.m_hObject);`

m_Img 是一个 CxImage 对象。在初始化设备上下文以绘制到“m_bmp”之后，调用 CreateFromHBITMAP 函数。

# .net - NancyFX：带有查询字符串参数的路由总是返回 404 NotFound

> ID：10718763
> 
> 赞同：12
> 
> 时间：2012-05-23T11:12:20.163
> 
> 标签：.net, query-string, nancy

我有一个简单的南希模块。我想将查询字符串（qs）参数传递给处理程序。如果我没有任何 qs 参数，一切都很好。一旦我添加了一个参数，我就会返回一个 404 状态码。

**南希模块**

```
public class SimpleModule : NancyModule
{
    public SimpleModule()
    {
        Get["/"] = parameters => HttpStatusCode.OK;
    }
} 
```

**单元测试 - 通过**

```
[Fact]
public void SimpleModule__Should_return_statusOK_when_passing_query_params()
{
    const string uri = "/";
    var response = Fake.Browser().Get(uri, with => with.HttpRequest());
    response.StatusCode.ShouldBe(HttpStatusCode.OK);
} 
```

**单元测试 - 失败**

```
[Fact]
public void SimpleModule__Should_return_statusOK_when_passing_query_params()
{
    const string uri = "/?id=1";
    var response = Fake.Browser().Get(uri, with => with.HttpRequest());
    response.StatusCode.ShouldBe(HttpStatusCode.OK);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T13:16:08.793

您没有在 url 上传递查询，而是在浏览器上下文中使用 .Query 方法

```
var result = browser.Get("/", with => {
    with.Query("key", "value");
}); 
```

# java - 在休眠中设置一个字段以使用 sha1 使用注释进行加密

> ID：10718766
> 
> 赞同：0
> 
> 时间：2012-05-23T11:12:50.167
> 
> 标签：java, hibernate, sha, hibernate-annotations

我的表中有一个字段，我想在数据库中使用 sha1 函数保存它；如何在调用时使用注释配置休眠以使用 sha1 保存密码字段

`session.save(User);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:53:35.760

Hibernate 没有这样的注释。如果您使用 JPA，您可以定义一个 @PrePersist 方法来在保存用户对象之前计算 SHA-1 密码。如果您使用的是常规 Hibernate，则可以对实体侦听器执行相同操作。

不过，我建议您在代码中明确处理密码的散列，以便始终清楚何时完成以及如何完成。也可以将散列函数一直推送到数据库，但在所有选项中，这可能是最不受欢迎的。

不要忘记在散列之前给你的密码加盐！

# python - 在 Markdown 和 reStructuredText 中具有相同的 README

> ID：10718767
> 
> 赞同：124
> 
> 时间：2012-05-23T11:12:53.653
> 
> 标签：python, github, markdown, restructuredtext, pypi

我在 GitHub 上托管了一个项目。为此，我使用 Markdown 语法编写了我的 README，以便在 GitHub 上很好地格式化它。

由于我的项目是在 Python 中，我还计划将它上传到[PyPi](http://pypi.python.org/pypi)。PyPi 上用于 README 的语法是 reStructuredText。

我想避免处理两个包含大致相同内容的自述文件；所以我搜索了 RST（或其他方式）翻译器的降价，但找不到任何东西。

我看到的另一个解决方案是执行降价/HTML，然后执行 HTML/RST 翻译。[我在这里](http://www.siafoo.net/tools/html)和[这里](http://net.tutsplus.com/tutorials/other/vim-essential-plugin-markdown-to-html/)找到了一些资源，所以我想应该是可能的。

你有什么更适合我想做的想法吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-05-23T11:53:40.977

我会推荐[Pandoc](http://johnmacfarlane.net/pandoc/)，“将文件从一种标记格式转换为另一种标记格式的瑞士军刀”（查看页面底部支持的转换图表，令人印象深刻）。Pandoc 允许 markdown 直接对 reStructuredText 进行翻译。[这里](http://johnmacfarlane.net/pandoc/try)还有一个在线编辑器可以让您试用，因此您可以简单地使用在线编辑器来转换您的 README 文件。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-04-24T10:00:08.877

正如@Chris 建议的那样，您可以使用 Pandoc 将 Markdown 转换为 RST。这可以使用*pypandoc*模块和 setup.py 中的一些魔法简单地自动化：

```
from setuptools import setup
try:
    from pypandoc import convert
    read_md = lambda f: convert(f, 'rst')
except ImportError:
    print("warning: pypandoc module not found, could not convert Markdown to RST")
    read_md = lambda f: open(f, 'r').read()

setup(
    # name, version, ...
    long_description=read_md('README.md'),
    install_requires=[]
) 
```

这将自动将 README.md 转换为 RST，以便在 PyPi 上使用长描述。当*pypandoc*不可用时，它只会读取 README.md 而不进行转换——当他们只想构建模块而不是上传到 PyPi 时，不要强迫其他人安装 pypandoc。

所以你可以像往常一样在 Markdown 中编写，不再关心 RST 乱七八糟。;)

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2014-05-20T02:11:48.523

# 2019 更新

PyPI Warehouse[现在也支持](https://github.com/pypa/warehouse/issues/869)渲染 Markdown！您只需要更新您的包配置并将其添加`long_description_content_type='text/markdown'`到其中。例如：

```
setup(
    name='an_example_package',
    # other arguments omitted
    long_description=long_description,
    long_description_content_type='text/markdown'
) 
```

因此，不再需要将 README 保留为两种格式。

[您可以在文档](https://packaging.python.org/guides/making-a-pypi-friendly-readme/)中找到有关它的更多信息。

## 老答案：

GitHub 使用的[标记](https://github.com/github/markup)库支持 reStructuredText。这意味着您可以编写一个 README.rst 文件。

它们甚至支持使用`code`and`code-block`指令的语法特定颜色突出显示（[示例](https://github.com/canassa/superbar/blob/master/README.rst)）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-05-16T20:50:33.923

PyPI 现在支持 Markdown 进行长描述！

在`setup.py`中，设置`long_description`为 Markdown 字符串，添加`long_description_content_type="text/markdown"`并确保您使用的是最新工具（`setuptools`38.6.0+、`twine`1.11+）。

有关详细信息，请参阅[达斯汀英格拉姆的博客文章](https://dustingram.com/articles/2018/03/16/markdown-descriptions-on-pypi)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-04T17:03:51.100

您可能还对这样一个事实感兴趣，即可以在一个公共子集中编写，以便您的文档在呈现为降价或呈现为 reStructuredText 时以相同的方式出现：[https](https://gist.github.com/dupuy/1855764) : //gist.github.com/dupuy/1855764 ☺ </p>

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-05-05T12:03:45.933

对于我的要求，我不想在我的计算机上安装 Pandoc。我用过docverter。[Docverter](https://www.docverter.com/)是一个文档转换服务器，带有一个使用 Pandoc 的 HTTP 接口。

```
import requests
r = requests.post(url='http://c.docverter.com/convert',
                  data={'to':'rst','from':'markdown'},
                  files={'input_files[]':open('README.md','rb')})
if r.ok:
    print r.content 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-12T02:34:58.457

我遇到了这个问题，并使用以下两个 bash 脚本解决了这个问题。

请注意，我已将 LaTeX 捆绑到我的 Markdown 中。

```
#!/usr/bin/env bash

if [ $# -lt 1 ]; then
  echo "$0 file.md"
  exit;
fi

filename=$(basename "$1")
extension="${filename##*.}"
filename="${filename%.*}"

if [ "$extension" = "md" ]; then
  rst=".rst"
  pandoc $1 -o $filename$rst
fi 
```

转换为 html 也很有用。md2html：

```
#!/usr/bin/env bash

if [ $# -lt 1 ]; then
  echo "$0 file.md <style.css>"
  exit;
fi

filename=$(basename "$1")
extension="${filename##*.}"
filename="${filename%.*}"

if [ "$extension" = "md" ]; then
  html=".html"
  if [ -z $2 ]; then
    # if no css
    pandoc -s -S --mathjax --highlight-style pygments $1 -o $filename$html
  else
    pandoc -s -S --mathjax --highlight-style pygments -c $2 $1 -o $filename$html
  fi
fi 
```

我希望这会有所帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-10T19:30:25.757

使用`pandoc`其他人建议的工具，我创建了一个`md2rst`实用程序来创建`rst`文件。尽管此解决方案意味着您同时拥有 an`md`和 an `rst`，但它似乎是侵入性最小的，并且允许将来添加任何降价支持。我更喜欢它而不是改变`setup.py`，也许你也会：

```
#!/usr/bin/env python

'''
Recursively and destructively creates a .rst file for all Markdown
files in the target directory and below.

Created to deal with PyPa without changing anything in setup based on
the idea that getting proper Markdown support later is worth waiting
for rather than forcing a pandoc dependency in sample packages and such.

Vote for
(https://bitbucket.org/pypa/pypi/issue/148/support-markdown-for-readmes)

'''

import sys, os, re

markdown_sufs = ('.md','.markdown','.mkd')
markdown_regx = '\.(md|markdown|mkd)$'

target = '.'
if len(sys.argv) >= 2: target = sys.argv[1]

md_files = []
for root, dirnames, filenames in os.walk(target):
    for name in filenames:
        if name.endswith(markdown_sufs):
            md_files.append(os.path.join(root, name))

for md in md_files:
    bare = re.sub(markdown_regx,'',md)
    cmd='pandoc --from=markdown --to=rst "{}" -o "{}.rst"'
    print(cmd.format(md,bare))
    os.system(cmd.format(md,bare)) 
```

# java - 中介软件模式

> ID：10718770
> 
> 赞同：0
> 
> 时间：2012-05-23T11:13:06.857
> 
> 标签：java, design-patterns

我想用 Java 编写一个中介软件，我想知道我应该使用哪种设计模式来做到这一点。注意：在电信领域使用中介软件通过 FTP 收集和分发文件到不同的输出。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:52:38.670

不要从寻找设计模式开始。首先让需求非常清晰，然后考虑满足需求所产生的对象和职责。随着您改进对象设计，您开始发现需要控制依赖关系并增加灵活性，此时您将看到设计模式。

例如：假设您收到几种不同的数据格式并且需要在中介中转换它们。然后你可能有一些转换器类可以说 JSON->XML、CSV->XML、SpecialData->XML。您开始看到这些转换器类之间的共性以及实例的创建方式。然后可能会出现诸如 Facade 或 AbstractFactory 之类的模式。

# c++ - 如何避免沮丧？

> ID：10718771
> 
> 赞同：8
> 
> 时间：2012-05-23T11:13:07.017
> 
> 标签：c++, casting, visitor-pattern, downcast, state-pattern

我有一个*状态模式*的实现，其中每个状态都处理它从事件队列中获取的事件。因此基`State`类有一个纯虚方法`void handleEvent(const Event*)`。事件继承基`Event`类，但每个事件都包含其可以是不同类型的数据（例如，int、string...或其他）。`handleEvent`必须确定接收到的事件的运行时类型，然后执行*向下转换*以提取事件数据。事件是动态创建并存储在队列中的（因此在这里进行向上转换......）*。*

我知道向下转换是糟糕设计的标志，但**在这种情况下是否可以避免它？**我正在考虑*访问者模式*，其中基类 State 将包含每个事件的虚拟处理程序，但是再次向下转换将需要发生在从队列中取出事件并将其传递到当前状态的代码段中。（至少在这种情况下，大`switch(eventID)`只会在一个地方......）。**访客模式是避免向下转换的最佳方式（最佳实践）吗？**

这是伪代码（我`boost::shared_ptr`在这个例子中传递，但无论如何都会发生向下转换）：

```
enum EventID
{
   EVENT_1,
   EVENT_2,
   ...
};

class Event
{
   EventID id;
public:
   Event(EventID id):id(id){}
   EventID id() const {return id;}
   virtual ~Event() = 0;
};

class Event1 : public Event
{
   int n;
public:
   Event1(int n):Event(EVENT_1), n(n){}
   int getN() const {return n;}
};

class Event2 : public Event
{
   std::string s;
public:
   Event2(std::string s):Event(EVENT_2), s(s){}
   std::string getS() const {return s;}
};

typedef boost::shared_ptr<Event> EventPtr;

class State
{
   ...
public:
   ...
   virtual ~State() = 0;
   virtual void handleEvent(const EventPtr& pEvent) = 0;
};

class StateA : public State
{
   ...
public:
   void handleEvent(const EventPtr& pEvent)
   {
      switch(pEvent->id())
      {
         case EVENT_1:        
            int n = boost::static_pointer_cast<Event1>(pEvent)->getN();
            ...
            break;
         case EVENT_2:
            std::string s = boost::static_pointer_cast<Event2>(pEvent)->getS();
            ...
            break;
         ... 

      }
   }   
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T11:31:35.273

由于双重调度策略，典型的访问者模式不会表现出沮丧：

```
// Visitor.hpp
class EventBar;
class EventFoo;

class Visitor {
public:
    virtual void handle(EventBar const&) = 0;
    virtual void handle(EventFoo const&) = 0;
};

// Event.hpp
class Visitor;

class Event {
public:
    virtual void accept(Visitor&) const = 0;
}; 
```

和实现：

```
// EventBar.hpp
#include <Event.hpp>

class EventBar: public Event {
public:
    virtual void accept(Visitor& v);
};

// EventBar.cpp
#include <EventBar.hpp>
#include <Visitor.hpp>

void EventBar::accept(Visitor& v) {
    v.handle(*this);
} 
```

这里的重点是在is`v.handle(*this)`的静态类型中`*this`，`EventBar const&`它选择了正确的`virtual void handle(EventBar const&) = 0`重载`Visitor`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T11:45:44.393

事件的想法是通过通用（和不可知的）接口传递详细的对象。沮丧是不可避免的，也是设计的一部分。好与坏，这是有争议的。

访客模式只会将铸件隐藏在您面前。它仍然在幕后执行，类型通过虚拟方法地址解析。

因为你`Event`已经有了 id，所以它并不完全与类型无关，所以强制转换是非常安全的。在这里，您正在亲自查看类型，在访问者模式中，您正在让编译器处理它。

“凡涨必跌”。

# mysql - MySQL 更新 XML 属性

> ID：10718776
> 
> 赞同：2
> 
> 时间：2012-05-23T11:13:22.207
> 
> 标签：mysql, sql, xml, marc

在数据加载中，似乎一些 XML 属性映射不正确，我现在正在尝试纠正这个问题，但我正在努力解决 MySQL 对此 XML 列的处理。

我想更正所有出现的带有子字段（带有属性'code="3"'）的字段（带有属性'tag="520"'）的XML属性（非值）。下面的查询返回 0 行受影响，1 行找到。关于如何实现这一目标的任何线索。

```
UPDATE biblioitems
SET marcxml = UpdateXML(marcxml,'datafield[@tag="520"]/subfield[@code="3"]',
                     'datafield[@tag="520"][@ind1="3"]/subfield[@code="a"]')
WHERE biblionumber = '220405'; 
```

为了清楚起见，包括 XML 片段：

原始片段

```
<datafield tag="300" ind1=" " ind2=" ">
  <subfield code="f">article</subfield>
</datafield>
<datafield tag="520" ind1=" " ind2=" ">
  <subfield code="3">A description of something here</subfield>
</datafield>
<datafield tag="655" ind1=" " ind2=" ">
  <subfield code="a"></subfield>
</datafield> 
```

我想要的结果是：

```
<datafield tag="300" ind1=" " ind2=" ">
  <subfield code="f">article</subfield>
</datafield>
<datafield tag="520" ind1="3" ind2=" ">
  <subfield code="a">A description of something here</subfield>
</datafield>
<datafield tag="655" ind1=" " ind2=" ">
  <subfield code="a"></subfield>
</datafield> 
```

无法弄清楚如何突出显示代码块中的更改（它是 tag="520" 数据字段中的 ind1 属性，它是关联的子字段属性）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-29T07:01:47.140

您可以专门针对您希望用`attribute::att`轴重写的属性。

用于验证行为的示例 MySQL 代码

```
SELECT UpdateXML('<root><sub att="foo" xatt="bar">Content Text</sub><sec att="etc">Container</sec></root>', '/root/sub/attribute::att', 'att="something"') 
```

查询的结果将是

```
<root><sub att="something" xatt="bar">Content Text</sub><sec att="etc">Container</sec></root> 
```

请记住在 XPATH 查询中要具体，因为如果多个目标匹配，则不会更新任何内容。（通过测试观察）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:45:00.560

第三个参数[`UpdateXML`](http://dev.mysql.com/doc/en/xml-functions.html#function_updatexml)应该是新的 XML 片段，用于替换与第二个参数中给出的 XPath 匹配的文档部分。

您可以使用以下方法创建 XML 片段[`ExtractValue`](http://dev.mysql.com/doc/en/xml-functions.html#function_extractvalue)：

```
UPDATE biblioitems
SET    marcxml = UpdateXML(marcxml,
         'datafield[@tag="520"]',
         CONCAT(
           '<datafield tag="520" ind1="a" ind2="',
              ExtractValue(marcxml, 'datafield[@tag="520"]/attribute::ind2'),
           '">',
           '  <subfield code="a">',
             ExtractValue(marcxml, 'datafield[@tag="520"]/subfield'),
           '  </subfield>',
           '</datafield>'
         )
       )
WHERE  biblionumber = 220405; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/df680/1)上查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-20T13:16:39.520

`UPDATE biblioitems SET marcxml = UpdateXML(marcxml,'datafield[@tag="520"]/subfield[@code="3"]/@code', 'code="a"') WHERE biblionumber = '220405';`

请注意，UpdateXML 函数需要找到现有节点。如果要插入一个属性，则必须用多个替换现有属性。例如在 x 元素中插入属性 d： `select updateXML('<x a="aaa" b="bbb">xxxxxx<c>cccc</c></x>', 'x/@a', 'a="aaa" d="ddd"')`

# class - 使用自己的标签而不是 div

> ID：10718778
> 
> 赞同：0
> 
> 时间：2012-05-23T11:13:38.443
> 
> 标签：class, html, tags

我正在开发一个网络应用程序。使用自己的 html 标签比使用 div 更好吗？我的意思是使用自己的标签而不是类。这将更容易通过使用 id 拆分公共类来绑定动态内容。

例子

```
<div id="message">
My Message
</div> 
```

换成这个

```
<message>
   My message
</message> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:20:13.930

我不明白您为什么要这样做，因为现在 HTML5 支持很多语义标签，例如`<audio>`,等。通常，您可以通过特殊目的`<address>`实现块效果（即在块中组合或分组相关内容） 。`<div class="myblock"></div>`无论如何，正如您所要求的那样，您可以在 HTML 中使用自定义标签。您还可以使用 CSS 设置样式，并可以使用选择器对使用 JavaScript 的对象执行操作。

**注意：**之前的 IE9 版本不支持自定义标签。因此，您应该使用 JavaScript 创建这样的标签：

```
<script type="text/javascript">
    document.createElement('mytag');
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:22:44.877

不这样做的主要实际原因是 IE 8 和更早版本不允许您设置自定义标签的样式。正如 Vishal 所提到的，有一个解决方法，但是当 JavaScript 被禁用时它不起作用。正如他所指出的，您可以使用该`class`属性——您应该`id`仅将其用于唯一标识单个元素。

您还可以将`class`属性用于除`div`. 您可以首先选择一个元素，使其默认（非 CSS）呈现是最好的（在可用的替代方案中），然后添加一个`class`属性。

在 CSS 中，您通常会使用不带标签名称的类选择器，例如`.message`（如果您使用`class=message`）。

# ios - Xcode 4.3.2：断点停止工作 - Xcode 不显示代码

> ID：10718779
> 
> 赞同：1
> 
> 时间：2012-05-23T11:13:40.117
> 
> 标签：ios, xcode, debugging

我在 Xcode 4.3.2 中的不同 iOS 项目中遇到了一些奇怪的问题：

断点的正常行为应该是这样的：如果程序执行到带有断点的代码行，则执行停止并且代码行显示在 Xcode 中。然后可以使用“继续”、“跳过”或“步入”功能继续执行。使用“Step over”或“Step into”将显示接下来将执行的代码行。

第一部分（达到断点时停止执行）没有任何问题。但是 Xcode 没有显示相应的代码行。执行停止后，我可以使用 Step 函数，但 Xcode 不会再次显示代码行。这样断点就没什么用了，因为我看不到执行停止的地方。

问题并不总是出现。有时它可以工作，然后突然停止工作。一次断点起作用，而在下一次执行期间它不起作用。

大多数情况下，停止执行并再次运行应用程序可以解决问题。但它再次停止工作只是时间问题。有时只有重新启动 Xcode 才有效果。

顺便说一句：调试器设置为 GDB，因为 LLDB 有其他问题。

我发现了一些其他处理断点问题的帖子。但在所有情况下，问题都与我遇到的问题不同（执行根本没有停止，断点自动禁用等）。

有谁知道这个问题或知道如何解决它？

安德烈

# javascript - jquery IE 更改/单击事件不起作用

> ID：10718781
> 
> 赞同：-1
> 
> 时间：2012-05-23T11:13:49.093
> 
> 标签：javascript, jquery, function, internet-explorer

这是我的 HTML：

```
<div class="sss">
    <label class="label_radio" for="radio-01">
        <input name="vtip" id="radio-01" value="50" type="radio" />
        <img src="http://www.tui-travelcenter.ro/layouts/innobyte/images/radio_50.jpg" width="199" height="241" style="display:block">
    </label>
</div>
<div class="ddd">
    <label class="label_radio1" for="radio-02">
        <input name="vtip" id="radio-02" value="100" type="radio" />
        <img src="http://www.tui-travelcenter.ro/layouts/innobyte/images/radio_100.jpg" width="199" height="241" style="display:block">
    </label>
 </div>
 <div class="clear"></div> 
```

这是我的javascript：

```
$(document).ready(function () {
    $('#radio-01').change(function(){ 
        $(".label_radio").css({background: "#fff"});                           
        $(".label_radio1").css({background: "#fff"});                                   

        if($(this).is(":checked")) {                                                  
             $(".label_radio").css({background: "#000"});       
        } else {
         $(".label_radio").css({background: "#f00"}) ;          
        }
     });

     $('#radio-02').change(function(){                                 
        $(".label_radio").css({background: "#fff"});                                                          
        $(".label_radio1").css({background: "#fff"}); 

        if($(this).is(":checked")) $(".label_radio1").css({background: "#000"}); 
        else $(".label_radio1").css({background: "#fff"}) ; 
     });
 }); 
```

我有两个单选按钮，它们有一个自定义图像。单击时，它们会更改背景，因此您可以看到它已被选中。（这里是现场直播：tui-travelcenter.ro/concurs_vouchere.php - 2 张图片。）这在 Firefox、Chrome 中运行良好，但在 IE 中不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:21:01.487

要使其在 IE 中工作，请在您的代码中使用`$(".label_radio1").css({'background-color': "#fff"});`而不是。`$(".label_radio1").css({background: "#fff"});`

在你打电话的所有地方都做同样的事情`.css(..)`

* * *

**编辑**

在 IE 中，您的点击事件不会从 img 向上传播到标签，因此它会影响收音机（它是其标签）并触发收音机的更改事件。将此代码添加到您的 JS 以强制事件传播。

```
$('label img').click(function() {
    $(this).prev('input').attr('checked', true).change();
    return true;
}); 
```

# umbraco - 如何从 umbraco 博客发布新内容到 umbraco 网站？

> ID：10718783
> 
> 赞同：0
> 
> 时间：2012-05-23T11:14:01.463
> 
> 标签：umbraco, umbraco-blog

嗨，我在 umbraco 4 CMS 上有一个网站。我还想安装一个博客插件。

是否有可能将博客中的新闻拉入我的网站。

示例我想每天从博客发布新闻/帖子，并从我的网站创建指向博客页面的链接。

预习 ：

![网站](../Images/97b79c2164b75006d2bd5ad4769050c6.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:57:49.857

如果您使用的是 Blog4Umbraco，这样的事情应该可以工作。它要求您将源作为 ContentPicker 参数并将 maxItems 作为数字。它会做一些事情，比如格式化日期以便正确排序和检查过去的帖子（以防它们被安排）。

```
<xsl:param name="currentPage"/>

<xsl:variable name="documentTypeAlias" select="string('BlogPost')"/>
<xsl:variable name="source" select="/macro/source"/>
<xsl:variable name="maxItems" select="/macro/maxItems" />

<xsl:template match="/">

  <xsl:variable name="currPosts" select="umbraco.library:GetXmlNodeById($source)//BlogPost [@isDoc and umbraco.library:DateDiff(@createDate, umbraco.library:CurrentDate(), 'm') &lt; 0]"/>

  <xsl:for-each select="$currPosts">
    <xsl:sort select="umbraco.library:FormatDateTime(@createDate, 'yyyyMMdd')" data-type="number" order="descending" />
    <xsl:if test="position() &lt;= $maxItems">
      <div>

        <h4><xsl:value-of select="@nodeName"/></h4>
        <span class="homeBlogDate"><xsl:value-of select="umbraco.library:FormatDateTime(@createDate, 'M.dd.yy')"/></span>
        <p>
          <xsl:value-of select="umbraco.library:TruncateString(umbraco.library:StripHtml(bodyText), 140, ' ')" disable-output-escaping="yes"/>...
        </p>
        <a href="{umbraco.library:NiceUrl(@id)}" class="postReadMore">
          read more &gt;
        </a>
      </div>
    </xsl:if>
  </xsl:for-each>

</xsl:template> 
```

# java - 防止输入无效数据时 Java Swing JTable 失去焦点

> ID：10718784
> 
> 赞同：1
> 
> 时间：2012-05-23T11:14:02.697
> 
> 标签：java, swing, focus, jtable, tablecelleditor

我们目前在 java swing 中`JTable`有一个焦点问题。`JTextEditor`有`JTable`一个自定义单元格编辑器，它是一个`JTextField`.

问题是当正在编辑单元格并包含无效数据时，用户单击 a`JButton`时，文本字段将停止编辑并`JButton`调用 actionPerformed（单击）。`JTable#setValueAt`处理验证，因此如果 中的数据无效，则不会更新`JTextField`底层。`TableModel`

理想情况下，我们不想让`JButton`点击发生。焦点应保持在`JTable`或 上`JTextField`。

单击按钮将执行提交操作并关闭表格所在的框架。由于验证`TableModel#setValueAt`不会更新值，它会提交旧值。

这可以做到吗？我对 Swing 还很陌生，所以我不知道要检查什么。

不幸的是，我们的代码不是直截了当的。UI 是从 XML 构造的，使得按钮对表单上的任何其他内容一无所知（这是我继承的代码）。

在 .net 中，您可以通过处理 Validating 事件并设置取消标志来阻止控件失去焦点。Java是否有类似的机制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:59:45.990

在编辑结束后验证输入`setValueAt()`可能会很晚。编辑器本身可以排除无效值的导航，如链接到相应[教程部分的此](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#validtext)[示例](https://stackoverflow.com/a/7539298/230513)所示。

对于有效值，您可以在失去焦点时提交表：

```
table.putClientProperty("terminateEditOnFocusLost", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:10:59.673

您可以尝试在编辑器组件（即文本字段）上使用 inputverifier 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:14:03.603

当焦点从组件中丢失时，将调用 lost focus 方法（更多参考[http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html)）。因此，您可以在失去焦点时调用验证方法。

如果您不需要知道正在编辑的特定字段，您还可以在按钮内执行验证，如果不成功则阻止提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-23T05:36:33.157

我通过覆盖`stopCellEditing`我`JTable`的`CellEditor`.

```
@Override
public boolean stopCellEditing() {
   String s = (String) getCellEditorValue();       
   if (s != null) {           
       if (!testYourValue()) {           
           Toolkit.getDefaultToolkit().beep();           
           return false;
       }
   }
   return super.stopCellEditing();
} 
```

# java - 在树脂 3.0 中的 http post 响应中的内容长度为 0

> ID：10718785
> 
> 赞同：0
> 
> 时间：2012-05-23T11:14:02.893
> 
> 标签：java, php, post, curl, resin

我有一个客户端使用 http POST 方法将一些数据发布到我们的服务器。我们的服务器是带有java的resin 3.0。当我发送响应是否保存数据时，未设置响应的内容长度。客户端正在使用 curl 库（其上的 php 包装器），并且它们接收的内容长度为 0。当我尝试通过浏览器将表单提交到我们在同一 url 上的服务器时，它可以工作并显示响应。

我尝试使用 Apache HttpClient 通过 postmethod 提交数据，我收到的内容长度为 -1，但我确实得到了完整的响应。我无法理解问题出在哪里。我也做了一些谷歌，发现树脂在发送响应时做了一些分块编码。但我想它也适用于 GET 方法。但是对于 GET 方法，我的客户正在获取内容长度并且也能够获得响应。需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:54:14.127

“ [Content-Length](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13) ”是响应中的标头，它警告客户端响应的大小。它不是流的实际长度。

您可以使用 response.setContentLength(...); 设置它的值 在你的 Servlet 中。

# c# - WebClient 和 WebRequest，下载文件 > 4Gb

> ID：10718787
> 
> 赞同：1
> 
> 时间：2012-05-23T11:14:25.400
> 
> 标签：c#, http

每当我尝试从服务器下载文件（服务器在设备上，而不是在互联网上）> 4Gb 时，传输实际上只传输看起来是 (FileSize) % 4Gb 的文件。换句话说，对于一个刚刚超过 4.5Gb 的文件，我最终只传输了大约 600mb 的数据。

我认为这与内容长度标头等有关，但我不确定确切的机制是什么。我尝试过使用 WebClient 和 WebRequest 但两者都表现出相同的行为。

有谁知道我怎么能超过这个限制？这是我当前的循环：

```
 byte[] buffer = new byte[4096];

 WebRequest request = WebRequest.Create(new Uri(transferDetails.URL));

 using (WebResponse response = request.GetResponse())
 {
     using (Stream responseStream = response.GetResponseStream())
     {
         using (FileStream fileStream = new FileStream(actualPath, FileMode.Create, FileAccess.Write))
         {
             int count = 0;

             do
             {
                // Read a block.

                count = responseStream.Read(buffer, 0, buffer.Length);

                // Write out to the local file.

                if(count > 0)
                {
                    fileStream.Write(buffer, 0, count);
                }
         } while (count != 0);
     }
 } 
```

}

# java - 速度中的 For 循环

> ID：10718788
> 
> 赞同：1
> 
> 时间：2012-05-23T11:14:29.167
> 
> 标签：java, velocity

我想在 Velocity 视图中使用 for 循环。我想在速度视图中取一个计数器变量并循环直到它相等。例如

```
counter = 3
for(i=0; i< counter; i++){

...

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T11:16:39.560

您可以`foreach`通过定义一个范围并对其进行迭代来使用它。

```
#set($start = 0)
#set($end = 3)
#foreach($i in [$start..$end])
   ...
#end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-25T14:09:29.693

亚历克斯的回答很好，但请注意它总共循环了 4 次，因为开始和结束包含在速度`#foreach`循环中。如果您想要一个零索引循环并具有独占结束值，另一种方法是使用 builtin `$foreach.index`。如果要循环`$n`时间：

```
#foreach($unused in [1..$n])
    zero indexed: $foreach.index
#end 
```

在这里，`$unused`未使用，我们改为使用`$foreach.index`从 0 开始的索引。

在问题的情况下，`$n`是 3。

我们将范围从 1 开始，因为它包含在内，因此它将以`$unused`[1, 2, 3] 循环，而`$foreach.index`将以 [0, 1, 2] 循环。

有关更多信息，请参阅[用户指南](http://velocity.apache.org/engine/1.7/user-guide.html#foreach-loop)。

# android - 如何以编程方式在android中按下后退按钮？

> ID：10718789
> 
> 赞同：82
> 
> 时间：2012-05-23T11:14:32.150
> 
> 标签：android, android-activity, activity-finish

在我的应用程序中，我有一个注销功能。如果用户单击注销，它将转到主屏幕。现在我按返回按钮退出我的应用程序。但我想要的是我需要像后退按钮功能一样自动退出（即以编程方式）。我知道通过调用 finish() 将完成该功能。但问题是它进入了之前的活动。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-05-23T11:20:03.257

`onBackPressed()`受支持，因为：**API 级别 5**

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        onBackPressed();
    }
}

@Override
public void onBackPressed() {
    //this is only needed if you have specific things
    //that you want to do when the user presses the back button.
    /* your specific things...*/
    super.onBackPressed();   
} 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-05-23T11:27:47.863

您不需要覆盖`onBackPressed()`- 它已经定义为您的活动在用户按下后退按钮时默认执行的操作。因此，`onBackPressed()`只要您想“以编程方式按下”后退按钮，只需调用即可。

不过，这只会导致`finish()`被调用；）

我认为您对后退按钮的作用感到困惑。默认情况下，它只是对 的调用`finish()`，因此它只是退出当前活动。如果您在该活动背后有一些东西，则会显示该屏幕。

您可以做的是在从登录启动您的活动时，添加一个 CLEAR_TOP 标志，这样当您退出时登录活动将不存在。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-03T07:20:55.080

有时覆盖方法 onBackPressed() 很有用，因为如果您使用片段并且如果您按下后退按钮就会在它们之间进行更改，它们会返回到前一个片段。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-23T11:16:47.627

`onBackPressed`在您的活动中覆盖它后调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-01T08:22:26.427

你可以简单地使用 onBackPressed();

或者如果您使用的是片段，您可以使用 getActivity().onBackPressed()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-13T23:29:01.943

只需添加finish(); 在你的第一堂课'（登录活动） onPause(); 方法。就这样

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-13T17:17:30.817

**对于 Kotlin 用户和使用片段：**

`finish()`如果您正在浏览活动，请使用，但对于片段，您可以通过片段标签删除片段。

导航到片段时，请使用：

```
myFragment = myFragment(this)            

parentFragmentManager.beginTransaction()
                .setCustomAnimations(android.R.animator.fade_in, android.R.animator.fade_out)
                .add(R.id.baseFragmentContainer, myFragment, "MYFRAGMENT")
                .addToBackStack("myFragmentNameInStack")
                .commit() 
```

然后，当点击您的特定按钮并模拟“后退按钮”按下时，请执行以下操作：

```
 binding.someButton.setOnClickListener {
        activity?.supportFragmentManager?.
        popBackStack("myFragmentNameInStack", FragmentManager.POP_BACK_STACK_INCLUSIVE)
    } 
```

这将删除由 tag 添加的片段`"myFragmentNameInStack"`，在屏幕上显示前一个片段。

# android - 如何在 sencha touch 2.0 中保存复选框的状态和文本区域的数据？

> ID：10718791
> 
> 赞同：1
> 
> 时间：2012-05-23T11:14:35.767
> 
> 标签：android, checkbox, textarea, sencha-touch-2

我正在 sencha touch 2.0 中开发一个应用程序。我需要知道如何在屏幕之间保持复选框的状态，以及当我返回屏幕并再次返回时如何保持 textareafield 中的文本值文本区域屏幕。

举个例子，我有两个屏幕 A 和 B。在屏幕 A 中，我有一些标签和一个按钮。在屏幕 B 中，我有一个复选框和一个文本区域，现在我希望在屏幕 B 中选中复选框并输入一些textareafield 中的行并通过后退按钮进入屏幕 A。当我返回屏幕 B 时，我希望该复选框保持选中状态，并且 textareafield 保留我之前输入的相同文本。

请建议如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:29:34.820

这不是实现您需要的最简单但**推荐**`Ext.data.Model`的方法，只需将它们的内容存储到一个实例或`Ext.data.Store`.

这可能有点像用火箭杀死一只鸡，但它最适合 Sencha Touch。不知何故，您可以像纯 Javascript 一样使用全局变量，但这是一种不好的做法。只需将它们视为普通的 Sencha Touch 数据实例即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:07:42.123

使用 Store 只存储一个值有点疯狂。相反，您应该使用 browsers`localStorage`对象：

```
// get the value of the checkbox and set it in local storage
localStorage.setItem('my-checkbox', checkbox.getValue());

// set the value when the checkbox is visible after reload
checkbox.setValue(localStorage.getItem('my-checkbox')); 
```

更多信息在这里：[https ://developer.mozilla.org/en/DOM/Storage](https://developer.mozilla.org/en/DOM/Storage)

# javascript - javascript私有函数访问公共变量

> ID：10718796
> 
> 赞同：13
> 
> 时间：2012-05-23T11:15:12.440
> 
> 标签：javascript, class, private, public

我有这堂课：

```
function ctest() {
    this.var1 = "haha";
    this.func1 = function() {
        alert(this.var1);
        func2();
        alert(this.var1);
    }
    var func2 = function() {
        this.var1 = "huhu";
    }
} 
```

并称之为：

```
 var myobj = new ctest();
    myobj.func1(); 
```

不应该第二个警报会弹出“huhu”吗？func2 是私有的，它不能访问 var1 公共变量吗？

如果私有函数无法访问公共变量，我该怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-23T11:18:03.313

您需要为调用提供上下文`func2`：

```
this.func1 = function() {
    alert(this.var1);
    func2.call(this);
    alert(this.var1);
} 
```

如果没有上下文，调用将使用全局对象（即`window`） - 您应该会看到何时运行`window.var1`在两个警报之间创建的当前代码。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-23T11:25:21.963

函数与实例无关，因此您的调用`func2`最终会作为调用而没有`this`指向预期的实例。

您可以修复调用以包含上下文：

```
function ctest() {
    this.var1 = "haha";
    this.func1 = function() {
        alert(this.var1);
        func2.call(this);
        alert(this.var1);
    }
    var func2 = function() {
        this.var1 = "huhu";
    }
} 
```

或者您可以保留一个带有所需对象引用的变量：

```
function ctest() {
    var that = this;
    this.var1 = "haha";
    this.func1 = function() {
        alert(this.var1);
        func2();
        alert(this.var1);
    }
    var func2 = function() {
        that.var1 = "huhu";
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T11:30:43.513

另一种选择是使用[`Function.bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)：

```
function ctest() {
    this.var1 = "haha";
    this.func1 = function() {
        alert(this.var1);
        func2();
        alert(this.var1);
    }
    var func2 = function() {
        this.var1 = "huhu";
    }.bind(this);
} 
```

请注意，浏览器对此的支持并不完美。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T11:33:46.613

JS 中没有私有这样的东西，但是您可以使用[闭包](http://jibbering.com/faq/notes/closures/)来使用范围。

例如，假设在您的示例中您不需要公开`var1`为公共财产。您可以轻松地重写您的代码，如下所示：

```
function ctest() {
    var var1 = "haha";

    this.func1 = function() {
        alert(var1);
        func2();
        alert(var1);
    }

    var func2 = function() {
        var1 = "huhu";
    }
} 
```

因为`func1`和`func2`共享相同的范围——它们在相同的函数中定义`ctest`——它们可以访问相同的变量。当然在那种情况下你没有`var1`暴露，所以: `myobj.var1`will be `undefined`.

如果您想`var1`作为属性公开，那么您需要[绑定](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind) `func2`到您在构造函数中创建的对象实例：

```
function ctest() {
    this.var1 = "haha";
    this.func1 = function() {
        alert(this.var1);
        func2();
        alert(this.var1);
    }
    var func2 = function() {
        this.var1 = "huhu";
    }.bind(this);
} 
```

否则`func2`会有不同的上下文对象 ( `this`)。如果浏览器不支持`bind`并且您不想使用 shim（如上面的链接所示），您可以再次利用闭包：

```
function ctest() {
    this.var1 = "haha";
    this.func1 = function() {
        alert(this.var1);
        func2();
        alert(this.var1);
    }
    var context = this;
    var func2 = function() {
        context.var1 = "huhu";
    }
} 
```

IMVHO 不那么优雅。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T11:19:01.020

```
function ctest() {
    this.var1 = "haha";
    this.func1 = function() {
        alert(this.var1);
        func2(this);
        alert(this.var1);
    }
    var func2 = function(obj) {
        obj.var1 = "huhu";
    }
} 
```

还有其他方法可以解决此问题，请查看其他答案:)

# iphone - 如何使用 UISearchBar 在数组字符串中搜索第二个单词？

> ID：10718798
> 
> 赞同：0
> 
> 时间：2012-05-23T11:15:22.783
> 
> 标签：iphone, objective-c, search, uisearchbar

我必须使用 UISearchBar 在数组中搜索一个单词。例如，我在索引 2 处的数组中有“Chicken Salad”字符串。现在如果想使用最后一个单词“Salad”搜索它，我该怎么办？在我使用这段代码的时候，它工作得很好，但是如果你从第一个单词开始搜索。

```
(appDelegate.isAirlineSelection == YES) {
            for (int i = 0; i < [menuArray count]; i++) {
                if ([[[[menuArray objectAtIndex:i] itemName] uppercaseString] hasPrefix:search]||[[[[menuArray objectAtIndex:i] itemName] uppercaseString] hasSuffix:search]) {
                    [tableMenuArray addObject:[menuArray objectAtIndex:i]];
                    NSLog(@"Found");
                }
            } 
```

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:21:57.117

试试这种方式，它甚至会在单词之间进行搜索：

```
for(NSString *name in menuArray)        
{
    if ([name rangeOfString:search options:NSLiteralSearch|NSCaseInsensitiveSearch].location != NSNotFound)
        [tableMenuArray addObject:name];
            NSLog(@"Found");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:34:22.353

首先，您应该将数组名称分成两部分并创建两个数组，然后您可以轻松地使用搜索栏搜索第二个数组，并可以找到确切的结果，您想要什么。

```
for (NSString *name in lastnames)
    {

            NSComparisonResult result = [name compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
            if (result == NSOrderedSame)
            {
                [searchedNames addObject:name];
            }

    } 
```

# c++ - 尝试安装和使用 LAPACK++，加载共享库时出现问题

> ID：10718800
> 
> 赞同：0
> 
> 时间：2012-05-23T11:15:32.400
> 
> 标签：c++, shared-libraries, lapack++

我是使用库的新手，我在使用 lapack++ 并让它工作时遇到了一些麻烦。我将解释到目前为止我所做的和尝试的。

首先，我安装了 BLAS 和 LAPACK，一切顺利。我现在已经安装了 LAPACK++ 版本 2.5.2 (http://lapackpp.sourceforge.net/)，所以我可以在 C/C++ 中调用各种线性代数例程。在我配置、制作然后进行安装之后，它会将所有 C/C++ 头文件放在 /usr/local/include/lapackpp/ 中，其中一些是..

```
arch.h
bmd.h 
gmf.h    
lapackc.h 
lautil.h     
spdmd.h 
ultgmd.h
bfd.h
... 
```

以及 /usr/local/lib 中的以下文件

```
liblapackpp.la
liblapackpp.so
liblapackpp.so.14
liblapackpp.so.14.2.0 
```

现在，如果我尝试使用 g++ 编译简单的代码

```
#include <lapackpp/lapackpp.h>
using namespace std;

int main(int argc, char** argv) {
return 0;
} 
```

我得到以下输出...

```
In file included from /usr/local/include/lapackpp/lapackc.h:14,
from /usr/local/include/lapackpp/lapack.h:10,
from /usr/local/include/lapackpp/lapackpp.h:16,
from test.cpp:1:
/usr/local/include/lapackpp/lacomplex.h:45:23: error: laversion.h: No such file or directory
/usr/local/include/lapackpp/lacomplex.h:48:17: error: f2c.h: No such file or directory
In file included from /usr/local/include/lapackpp/lapackpp.h:47,
from test.cpp:1:
/usr/local/include/lapackpp/latmpl.h:36:22: error: lafnames.h: No such file or directory 
```

我通过在引起问题的头文件中明确写入头文件的位置来解决了这个问题。

例如。我用#include替换了#include

这样做之后，我的代码编译得很好。

现在如果我尝试编译代码

```
#include <cstdlib>
#include <iostream>
#include <lapackpp/lapackpp.h>

using namespace std;

int main(int argc, char** argv) {

LaGenMatDouble A(5,5);
cout << "This is a test." << endl;

return 0;
} 
```

通过键入

```
g++ test.cpp -o test -I usr/local/include/lapackpp 
```

我收到以下错误

```
/tmp/ccAq6nkP.o: In function `main':
test.cpp:(.text+0x22): undefined reference to `LaGenMatDouble::LaGenMatDouble(int, int)'
test.cpp:(.text+0x4f): undefined reference to `LaGenMatDouble::~LaGenMatDouble()'
test.cpp:(.text+0x67): undefined reference to `LaGenMatDouble::~LaGenMatDouble()'
collect2: ld returned 1 exit status 
```

（关于 LaGenMatDouble 的信息在[这里](http://lapackpp.sourceforge.net/html/classLaGenMatDouble.html) ）

这表明我可能错误地链接到图书馆？

经过一番谷歌搜索后，我意识到我需要使用 -I 链接到头文件，通过 -L 链接到共享库，通过 -llapackpp 链接库本身，所以我输入了

```
g++ test.cpp -o test -I usr/local/include/lapackpp -L usr/local/lib -llapackpp 
```

它编译了代码，现在当我通过键入 ./test 运行程序时出现错误

```
./test: error while loading shared libraries: liblapackpp.so.14: cannot open shared object file: No such file or directory 
```

现在我很困惑。

我不确定这是否与问题有关，但是当我输入

```
pkg-config lapackpp --libs 
```

我明白了

在 pkg-config 搜索路径中找不到包 lapackpp。也许您应该将包含 `lapackpp.pc' 的目录添加到 PKG_CONFIG_PATH 环境变量中找不到包 'lapackpp'

lapack 和 blas 也是如此。

我不确定该怎么做。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:34:38.313

链接很好，因为您告诉链接器库在哪里，但执行失败，因为加载器不知道您的库的位置（您可以检查 performing `ldd yourapp`，它显示了您的应用程序所需的库）。

通常，您可以通过变量告诉加载器库在哪里来解决这个问题 `LD_LIBRARY_PATH`，但它是一个粗略的工具。另一种解决方案是直接在可执行文件中对该指令进行编码，如此处所述[，](https://blogs.oracle.com/ali/entry/avoiding_ld_library_path_the)或者只是使用开关静态链接您的应用程序`-static`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:53:42.260

如果您正在使用包装 LAPACK（和/或 BLAS）的 C++ 库，则最好使用更现代的库，例如[Armadillo](http://arma.sourceforge.net)。除了使用 LAPACK 作为求解器和矩阵分解的后端之外，它还使用表达式模板来加速操作。

# java - 通过 selenium 在 Internet Explorer 中下载 Excel 文件

> ID：10718807
> 
> 赞同：1
> 
> 时间：2012-05-23T11:15:45.827
> 
> 标签：java, selenium, automation, download, webdriver

我必须自动化一个我必须使用 selenium ide 下载 excel 文件的情况。我在 Firefox 中通过使用自动下载文件并将其保存到用户定义的文件夹中的自定义配置文件功能来完成此操作。要在 Internet Explorer 中做同样的事情，IE 中是否有任何东西，例如自定义配置文件和首选项？如何提示 IE 自动下载文件..我正在使用 java 进行自动化..请帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:16:07.237

不，你不能在 IE 中轻松做到这一点，没有要配置的配置文件。

也就是说，您可以尝试：

*   如果可以的话，直接使用[这个](https://github.com/Ardesco/Ebselen/blob/master/ebselen-core/src/main/java/com/lazerycode/ebselen/customhandlers/FileDownloader.java)（或任何其他类似的 WebDriver 友好工具）下载文件。这将完全将 IE 排除在进程之外。
*   请参阅[如何使用 Java 从 Internet 下载和保存文件？](https://stackoverflow.com/questions/921262/how-to-download-and-save-a-file-from-internet-using-java)关于同一件事，只是通用 Java 而不是 WebDriver。
*   `Enter`如果一切都失败了，您可以在点击下载后尝试盲目按下，[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)有助于解决此问题。但是您不能真正指定文件夹。

# algorithm - 将十进制转换为纬度和经度

> ID：10718808
> 
> 赞同：5
> 
> 时间：2012-05-23T11:15:46.533
> 
> 标签：algorithm, delphi, math

我有一个将数据发送到我的服务器的 GPS 设备，我需要将设备发送的十进制值转换为纬度和经度。我数学不好，所以我所有的尝试都失败了，这里是规格：

**纬度**

占用4个字节，代表纬度值。

数字范围是从 0 到 162000000，表示范围从 0°到 90°。单位：1/500秒换算方法：

A) 将 GPS 模块中的纬度（度、分）数据转换为仅以分钟为单位的新形式；

B 将转换后的值乘以 30000，然后将结果转换为十六进制数

例如22°32.7658′,（22×60＋32.7658）×30000=40582974，则转换为十六进制数 0x02 0x6B 0x3F 0x3E

**经度**

占用4个字节，代表位置数据的经度值。数字范围从0到324000000，表示范围从0°到180°。单位：1/500秒，换算方法同纬度。

我想出了这个功能，但它似乎不起作用：

```
procedure GetDegree(const numar : DWORD; out min,sec : Extended);
var
  eu : Extended;
begin
  eu :=  numar / 30000;
  min := Trunc(eu / 60);
  sec := eu - min * 60;
end; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T11:31:17.800

`numar`以 1/500 秒为单位指定。因此，以下等式成立：

```
num/500 = seconds
num/500/60 = minutes
num/500/60/60 = degrees 
```

我会这样计算：

```
var
  degrees, minutes, seconds: Integer;
....
  degrees := num div (500*60*60);
  minutes := num div (500*60) - degrees*60;
  seconds := num div 500 - minutes*60 - degrees*60*60; 
```

如果您需要计算秒的小数部分，请这样做。请注意，这里根本不需要`Extended`。

```
var
  degrees, minutes: Integer;
  seconds: Double;
....
  degrees := num div (500*60*60);
  minutes := num div (500*60) - degrees*60;
  seconds := num/500 - minutes*60 - degrees*60*60; 
```

将您的值 40582974 代入这些公式，结果为：

```
degrees: 22
minutes: 32
seconds: 45 
```

从评论来看，您真正想要的是将度数作为整数，将分钟数作为浮点数。你可以这样做：

```
var
  degrees: Integer;
  minutes: Double;
....
  degrees := num div (500*60*60);
  minutes := num/(500*60) - degrees*60; 
```

将您的值 40582974 代入这些公式，结果为：

```
degrees: 22
minutes: 32.7658 
```

# android - 如何为子布局设置默认的android黑色，而其父布局具有另一种背景颜色？

> ID：10718810
> 
> 赞同：0
> 
> 时间：2012-05-23T11:15:48.123
> 
> 标签：android, android-layout, background-color

我在其父布局中有一个子布局。如果我为父级设置任何背景颜色，它也会为其子级设置相同的颜色。但我不想为孩子设置相同的颜色。（我想要默认的android黑色作为孩子的背景）。请帮我。
编辑：
我需要捕获子布局并稍后创建位图，所以我不应该为子设置任何背景颜色（但它的父级应该有一些颜色）。它应该只设置为默认的 android black。

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="#FFA500" >

    <RelativeLayout

        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_margin="15dp"
        android:layout_weight="1"
        android:gravity="center" >
    </RelativeLayout>
</LinearLayout> 
```

父线性布局有一些 BG 颜色。我没有为子相对布局设置任何 BG 颜色，但它采用了父的 BG 颜色。那么现在，我该如何为孩子设置 android 默认 BG 颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:24:16.060

您可以将子布局的背景颜色设置为透明。

放：

`android:background="00000000";`

前 2 个十六进制数字是背景的 alpha 分量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:31:30.593

> 如果我为父级设置任何背景颜色，它也会为其子级设置相同的颜色

不，它没有。默认情况下，您的孩子只有透明背景，因此看起来它是从其父级继承颜色。只需将其设置为透明以外的其他内容。

编辑：

抱歉，请阅读您的编辑。

如果您想稍后将图像添加到您的子视图，而不是设置`setBackgroundDrawable`或其他东西，请使用`setImageBitmap`. 它将保留您的子视图的透明颜色，同时显示您指定的图像。

# windows-phone-7 - 选中时的 WP7 文本框背景颜色

> ID：10718816
> 
> 赞同：2
> 
> 时间：2012-05-23T11:16:12.680
> 
> 标签：windows-phone-7

我正在开发一个非常简单的 WP7 应用程序只是为了好玩。我的视图上有一个文本框，当我单击它时，背景颜色变为白色。由于文本前景也是白色的，因此文本不显示。有没有办法覆盖这种默认样式？

![截屏](../Images/5ebb681e5c7293a0ebde1cd66073713f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:08:38.517

如果我正确理解了问题，您可以在 GotFocus 事件上更改 TextBox 的背景和前景画笔，如下所示：

```
 private void textBox1_GotFocus(object sender, RoutedEventArgs e)
 {
      textBox1.Background = new SolidColorBrush(Colors.Blue);
      textBox1.Foreground = new SolidColorBrush(Colors.Yellow);
 } 
```

# github - 通过 php api 从 github 获取下载

> ID：10718817
> 
> 赞同：0
> 
> 时间：2012-05-23T11:16:13.337
> 
> 标签：github, github-api

[我正在尝试在https://github.com/ornicar/php-github-api](https://github.com/ornicar/php-github-api)的帮助下从 github 上的 repo 获取所有下载

这个项目中没有下载对象，所以我创建了自己的：

类 Github_Api_Download 扩展 Github_Api{

```
public function getDownloads($repo, $username){
     $string =  'repos/'.urlencode($username).'/'.urlencode($repo).'/downloads';
     $response = $this->get($string);

    die(print_r($response));
    return $response;
} 
```

}

当我运行这个时，我只得到

*服务器错误 HTTP 401：未经授权*

1.  也应该可以在没有身份验证的情况下获得这个，因为如果我在浏览器中使用 url，它就可以工作
2.  我的身份验证工作正常，因为所有操作（例如创建新仓库等）都工作正常

任何人都可以帮助我吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:08:09.313

我之前一直在找这个，所以我写了自己的小函数并发布在我的博客上。希望这可以帮助。

[看一下这个](http://hypnorabbit.com/github-api-v3-php-quick-download/)

# iphone - 数组 #1 中的最高 4 个数字存储在另一个数组中

> ID：10718818
> 
> 赞同：0
> 
> 时间：2012-05-23T11:16:15.123
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

所以我在这里涉及三个不同的数组......

我正在循环通过 golferThreeIcons （NSMutableArray），我正在尝试获取最高的 4 个结果（golferThreeIcons 包含 # 作为字符串）并将它们存储到 topFourIconsNum （NSMutableArray）中，然后我计划存储最高的 id数组 topFourIconsId (NSMutableArray) 中的数字。

一件棘手的事情是 golferThreeIcons 从 99 开始，但我希望它像零一样。所以数字 99 不应该被添加到任何一个数组中......

示例： golferThreeIcons {2,1,5,3,9}

在循环完成后，我希望它显示类似这样的内容......

topFourIconsId {0,2,3,4} --- 0 对应 GolferThreeIcons 中的 2 --- 2 对应 Golfer 三个图标中的 5

topFourIconsNum {2,5,3,9} ----（任意顺序只要对应前四个图标id即可）

```
NSMutableArray *topFourIconsId = [NSMutableArray arrayWithObjects: @"0", @"0", @"0", @"0", @"0" ,nil];
NSMutableArray *topFourIconsNum = [NSMutableArray arrayWithObjects: @"0", @"0", @"0", @"0", @"0" ,nil];
int *ids = 0;
                for (NSString *s in golferThreeIconCounter) {
                    if(s != @"0") {
                        int sint = [s intValue];
                        int *idn = 0;
                        for(NSString *n in topFourIconsNum) {
                            int nint= [n intValue];
                            if(sint == 99 && nint == 0) {
                                NSString *idstring = [NSString stringWithFormat:@"%d", ids];
                                NSString *sintstring = [NSString stringWithFormat:@"%d", sint];
                                [topFourIconsId replaceObjectAtIndex:idn withObject:idstring];
                                [topFourIconsNum replaceObjectAtIndex:idn withObject:sintstring];
                                NSLog(@"IN %@",sintstring);
                                break;
                            }
                            else {
                                if (sint > nint) {
                                    NSString *idstring = [NSString stringWithFormat:@"%d", ids];
                                    NSString *sintstring = [NSString stringWithFormat:@"%d", sint];
                                    [topFourIconsId replaceObjectAtIndex:idn withObject:idstring];
                                    [topFourIconsNum replaceObjectAtIndex:idn withObject:sintstring];
                                    NSLog(@"IN %@",sintstring);
                                    break;
                                }
                            }
                            idn++;
                        }
                    }
                    ids++;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:31:49.070

只是一个疯狂的想法

将您的 golferThreeIcons 放在一个 NSDictionary 中，其中数组索引作为键，数组值作为值，然后根据它们的值对键进行排序：

```
NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"2", @"1", @"5", @"3", @"9", nil] forKeys:[NSArray arrayWithObjects:@"0", @"1", @"2", @"3", @"4", nil]];
NSArray *sortedKeys = [dict keysSortedByValueUsingSelector:@selector(caseInsensitiveCompare:)];

NSLog([sortedKeys description]); 
```

# android - 正确的工作流程以从 Internet 检索数据并在 Listview 中显示

> ID：10718820
> 
> 赞同：1
> 
> 时间：2012-05-23T11:16:20.367
> 
> 标签：android, service, android-asynctask

对我来说，很难理解下载 json 数据并在 ListView 中显示它们的正确工作流程。目前我正在使用 AsyncTask 下载和解析使用 ArrayAdapter 显示的数据。问题是 AsyncTask 在活动重新启动后无法生存。

所以我想知道服务是否是一个更好的解决方案但是如何将数据传递给 ArrayAdapter？我应该总是使用数据库作为中间层来存储和检索数据吗？

那么哪个更好呢？使用数据库的保留片段或服务中的AsyncTask？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:23:22.740

我使用一项服务来进行 http 数据检索和存储到 sqlite db。一旦服务存储了数据（或者如果有问题），我就会发出广播。我的片段/活动监听这些定义的广播，然后采取适当的行动。

我发现这是一个非常干净的解决方案，并且避免了在活动拆卸/旋转等时泄漏 asynctask 引用的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:23:02.333

最简单的解决方案是返回您当前的 AsyncTask`onRetainNonConfigurationInstance`或使用带有 setRetainInstance(true) 的 Fragment。

您可以使用 inCreate 访问 AsyncTask`getLastNonConfigurationInstance`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:23:11.647

这实际上取决于 Activity 究竟需要什么以及数据可以显示多长时间而不再次访问服务的要求。

解决上述问题的一种方法是，点击服务获取 json 数据并将其存储在数据库中。现在从数据库中获取数据并将其显示在 Activity 中。您现在可以实现一项服务以在需要时刷新数据。该服务将简单地点击网络服务并在需要时更新您的数据库内容。

# c# - 如果我在单独的文件中使用连接类，ADO.NET 如何添加参数？

> ID：10718822
> 
> 赞同：2
> 
> 时间：2012-05-23T11:16:24.753
> 
> 标签：c#, ado.net

如果我在单独的文件中使用类，ADO.NET 如何添加参数？

班级：

```
class SQLconnect
{
    public static void Sql(string Command_Text)
    {
        string connectionPath =
            "Data Source=USER\\SQLEXPRESS;Initial Catalog=db;Integrated Security=SSPI;";

        SqlConnection Connection = new SqlConnection(connectionPath);

        Connection.Open();

        SqlCommand Command = Connection.CreateCommand();
        Command.CommandText = Command_Text;
        Command.ExecuteNonQuery();

        Connection.Close();
    }
} 
```

范围：

```
 SQLconnect.Sql("INSERT INTO [dbo].[work] ([name],[code])VALUES(@name, @code)");

        SqlParameter param = new SqlParameter();
        param.ParameterName = "@name";
        param.Value = nameTextBox.Text;
        param.SqlDbType = SqlDbType.Text;
        //   Parameters.Add(param);

        param = new SqlParameter();
        param.ParameterName = "@code";
        param.Value = codeTextBox.Text;
        param.SqlDbType = SqlDbType.Text;
        //   Parameters.Add(param); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:42:34.643

一种选择是更新您的 SqlConnect.Sql() 方法以接受一组参数：

```
class SQLconnect
{
    public static void Sql(string Command_Text, params SqlParameter[] parameters)
    {
        string connectionPath =
            "Data Source=USER\\SQLEXPRESS;Initial Catalog=db;Integrated Security=SSPI;";

        SqlConnection Connection = new SqlConnection(connectionPath);

        Connection.Open();

        SqlCommand Command = Connection.CreateCommand();
        Command.CommandText = Command_Text;

        if(parameters != null && parameters.Length > 0) 
        {
          foreach(var p in parameters)
            Command.Parameters.Add(p);
        }

        Command.ExecuteNonQuery();

        Connection.Close();
    }
} 
```

那么您的调用代码将是这样的：

```
 SqlParameter param1 = new SqlParameter();
    param1.ParameterName = "@name";
    param1.Value = nameTextBox.Text;
    param1.SqlDbType = SqlDbType.Text;

    param2 = new SqlParameter();
    param2.ParameterName = "@code";
    param2.Value = codeTextBox.Text;
    param2.SqlDbType = SqlDbType.Text;

    SQLconnect.Sql("INSERT INTO [dbo].[work] ([name],[code])VALUES(@name, @code)", param1, param2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:06:52.057

这是我的版本希望对你有帮助

```
public class SqlConnect
{
    public string ConnectionString { get; private set; }
    public string CommandText { get; private set; }
    public SqlParameterCollection Parameters { get; private set; }

    public SqlConnect(string connectionString, string commandText)
    {
        ConnectionString = connectionString;
        CommandText = commandText;
        Parameters = null;
    }

    public SqlConnect(string connectionString, string commandText, SqlParameterCollection parameters)
        : this(connectionString, commandText)
    {
        Parameters = parameters;
    }

    public int Execute()
    {
        using (var connection = new SqlConnection(ConnectionString))
        {
            connection.Open();
            SqlCommand command = connection.CreateCommand();
            command.CommandText = CommandText;

            foreach (var sqlParameter in Parameters)
            {
                command.Parameters.Add(sqlParameter);
            }

            int rowsAffected = command.ExecuteNonQuery();
            connection.Close();
            return rowsAffected;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:37:45.550

您可以为数据库连接创建一个单独的类...然后为每个参数创建一个属性，如下所示

```
public class StudDataAccess
{
    public string connectionString = "Data Source=USER\\SQLEXPRESS;Initial Catalog=db;Integrated Security=SSPI;";
    public int pStudId
    {
        set;
        get;
    }
    public string pStudName
    {
        set;
        get;
    } 
    public void NewStudent()
    {
        SqlConnection conn = new SqlConnection(connectionString);
        conn.Open();
        SqlCommand cmd = new SqlCommand("AddStudent", conn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add("@StudId", SqlDbType.Int).Value = pStudId;
        cmd.Parameters.Add("@StudName", SqlDbType.VarChar, 50).Value = pStudName;            
        cmd.Prepare();
        cmd.ExecuteNonQuery();
        conn.Close();
    }  
} 
```

在这里，我们创建了两个参数 id ，name ，因此您可以从需要插入的类中设置它的值，选择数据。如下通过创建该类的对象

```
 StudDataAccess objDataAccess = new StudDataAccess();
        objDataAccess.pStudId =Convert.ToInt32(TextBox1.Text);
        objDataAccess.pStudName = TextBox2.Text;           
        objDataAccess.NewStudent(); //Call addstudent store procedure with parameters 
```

# android - Android 位图内存不足错误（mapviewBalloons）

> ID：10718823
> 
> 赞同：0
> 
> 时间：2012-05-23T11:16:28.890
> 
> 标签：android, bitmap, out-of-memory

我得到了著名的内存不足错误。但是我在这个问题上尝试了许多建议的解决方案，但没有任何运气。我知道为了防止位图超出内存，您可以创建一个可绘制的静态变量（Android 文档）。但这在我的应用程序中不起作用，因为您可以看到我有很多标记..

有人对解决方案有建议吗？

```
for(Poi p : poiarray){

                WeakReference<Bitmap> bitmap = new WeakReference<Bitmap>(p.get_poiIcon());
                if(bitmap!=null){

                    Drawable marker = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap.get(), 60, 60, true));
                annotationOverLays.add(new CustomAnnotation(marker,p,this,mapView));    
                //mapView.getOverlays().add(new CustomAnnotation(marker,p,this,mapView));   
                }
            }
            mapView.getOverlays().addAll(annotationOverLays); 
```

错误：

```
05-23 13:08:31.436: E/dalvikvm-heap(22310): 20736-byte external allocation too large for this process.
05-23 13:08:31.436: E/dalvikvm(22310): Out of memory: Heap Size=23111KB, Allocated=22474KB, Bitmap Size=1505KB
05-23 13:08:31.436: E/GraphicsJNI(22310): VM won't let us allocate 20736 bytes 
```

编辑：

我想我可能已经将问题本地化了。如果我单击几个注释，我可以触发内存不足异常。我使用[Here](https://github.com/jgilfelt/android-mapviewballoons)的 mapViewBalloons ，当我打开关闭 2 次时，我的应用程序崩溃但异常。有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:19:53.287

我遇到了同样的问题，以下代码对我有用：

```
public static Bitmap decodeFile(File f, boolean goodQuality){
        try {
            //Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //The new size we want to scale to
            final int REQUIRED_SIZE=100;

            //Find the correct scale value. It should be the power of 2.
            int scale=1;
            if(!goodQuality){
                while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
                    scale*=2;
            }
            //Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:27:33.923

有很多方法可以解决内存不足异常。尝试在您的 BitmapFactory.Options [http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inPurgeable设置 inPurgeable](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inPurgeable)

或尝试使用 PurgeableBitmap。 [http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/PurgeableBitmap.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/PurgeableBitmap.html)

将图像缩放到更小的尺寸。如果您有一个带有适配器的视图，请使用 FIFO 和固定大小制作一个列表...

# c# - 如何将类序列化为 xml 结构？

> ID：10718831
> 
> 赞同：0
> 
> 时间：2012-05-23T11:17:04.117
> 
> 标签：c#, xml, serialization, deserialization

我如何将下面的类 {0} 序列化为下面的 xml {1}。

所以，类名、属性名要与xml匹配。

{0}：

```
[Serializable]
public class ProfileSite
{
    [XmlAttribute("profileId")] 
    public int ProfileId { get; set; }

    [XmlAttribute("siteId")] 
    public int SiteId { get; set; }

    public Link[] Links { get; set; }

    public XElement Deserialize()
    {

    }
} 
```

{1}：

```
<profileSite profileId="" siteId="">
    <links>
      <link>
        <originalUrl></originalUrl>
        <isCrawled></isCrawled>
        <isBroken></isBroken>
        <isHtmlPage></isHtmlPage>
        <firstAppearedLevel></firstAppearedLevel>
      </link>
    </links>
  </profileSite> 
```

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:37:51.967

第一步是使用`Xml...`控制序列化以及是否具有属性或元素的相关属性来标记您的类。您的要求基本上改变了情况，并将主对象的属性作为属性，将所有子`Link`对象的属性作为元素：

```
[XmlRoot("profileSite")]
public class ProfileSite
{
    [XmlAttribute("profileId")] 
    public int ProfileId { get; set; }

    [XmlAttribute("siteId")] 
    public int SiteId { get; set; }

    [XmlArray("links"), XmlArrayItem("link")]    
    public Link[] Links { get; set; }

}

public class Link
{
    [XmlElement("originalUrl")]
    public string OriginalUrl{get;set;}
    // You other props here much like the above
} 
```

然后序列化它使用`XmlSerializer.Serialize`有许多[重载](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.serialize.aspx)占用不同的位置来输出结果。对于测试，您可以使用`Console.Out`.

```
XmlSerializer serializer = new XmlSerializer(typeof(ProfileSite));
serializer.Serialize(Console.Out, obj); 
```

您可能想要添加一个空的命名空间管理器，它可以阻止丑陋的额外`xmlns`属性：

```
XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
ns.Add("","");
XmlSerializer serializer = new XmlSerializer(typeof(ProfileSite));
serializer.Serialize(Console.Out, obj,ns); 
```

使用此示例对象的上述输出：

```
var obj = new ProfileSite{
            ProfileId=1,
            SiteId=2,
            Links = new[]{ 
                new Link{OriginalUrl="www.google.com" },
                new Link{OriginalUrl="www.foo.com" }
            }}; 
```

这是：

```
<?xml version="1.0" encoding="utf-8"?>
<profileSite profileId="1" siteId="2">
  <links>
    <link>
      <originalUrl>www.google.com</originalUrl>
    </link>
    <link>
      <originalUrl>www.foo.com</originalUrl>
    </link>
  </links>
</profileSite> 
```

最后，这是一个供您使用的工作示例： [http ://rextester.com/XCJHD55693](http://rextester.com/XCJHD55693)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:24:50.983

```
[XmlRoot("profileSite")]
public class ProfileSite
{
    [XmlAttribute("profileId")] 
    public int ProfileId { get; set; }

    [XmlAttribute("siteId")] 
    public int SiteId { get; set; }

    [XmlArray("links"), XmlArrayItem("link")]    
    public Link[] Links { get; set; }
} 
```

然后：

```
var ser = new XmlSerializer(typeof(ProfileSite));
var site = (ProfileSite) ser.Deserialize(source); 
```

# c# - 提高效率 - c# 中两个向量的对称矩阵乘法

> ID：10718835
> 
> 赞同：6
> 
> 时间：2012-05-23T11:17:29.853
> 
> 标签：c#, performance, vector, matrix, matrix-multiplication

按照以下初始线程，从 cMinor[高效地复制 c-sharp 中的对称矩阵。](https://stackoverflow.com/questions/9039189/make-efficient-the-copy-of-symmetric-matrix-in-c-sharp)

对于如何通过使用矩阵的数组实现而不是经典的使用一个线向量和一个列向量来构建对称方阵乘法的一些输入，我会很感兴趣

```
long s = 0;
List<double> columnVector = new List<double>(N); 
List<double> lineVector = new List<double>(N); 
//- init. vectors and symmetric square matrix m

for (int i=0; i < N; i++)
{
    for(int j=0; j < N; j++){
        s += lineVector[i] * columnVector[j] * m[i,j];
    }
} 
```

感谢您的输入 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T14:52:19.933

线向量乘以对称矩阵等于矩阵的转置乘以列向量。所以只需要考虑列向量的情况。

原来的`i`第-个元素`y=A*x`定义为

```
y[i] = SUM( A[i,j]*x[j], j=0..N-1 ) 
```

但由于`A`是对称的，总和被分成总和，一个在对角线下方，另一个在对角线上方

```
y[i] = SUM( A[i,j]*x[j], j=0..i-1) + SUM( A[i,j]*x[j], j=i..N-1 ) 
```

从另一个帖子中，矩阵索引是

```
A[i,j] = A[i*N-i*(i+1)/2+j]  // j>=i
A[i,j] = A[j*N-j*(j+1)/2+i]  // j< i 
```

对于`N×N`对称矩阵`A = new double[N*(N+1)/2];`

在`C#`上面的代码中是：

```
int k;
for(int i=0; i<N; i++)
{
    // start sum with zero
    y[i]=0;
    // below diagonal
    k=i;
    for(int j=0; j<=i-1; j++)
    {                    
        y[i]+=A[k]*x[j];
        k+=N-j-1;
    }
    // above diagonal
    k=i*N-i*(i+1)/2+i;
    for(int j=i; j<=N-1; j++)
    {
        y[i]+=A[k]*x[j];
        k++;
    }
} 
```

供您尝试的示例：

```
| -7  -6  -5  -4  -3 | | -2 |   | -5 |
| -6  -2  -1   0   1 | | -1 |   | 21 |
| -5  -1   2   3   4 | |  0 | = | 42 |
| -4   0   3   5   6 | |  1 |   | 55 |
| -3   1   4   6   7 | |  7 |   | 60 | 
```

要获得二次形式，请与乘法结果向量进行点积`x·A·y = Dot(x,A*y)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T11:19:20.770

您可以使用不安全的代码快速进行矩阵乘法。我已经[写了博客](http://bratched.com/en/home/dotnet/48-fun-with-matrix-multiplication-and-unsafe-code.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:04:31.160

尽可能快地进行矩阵乘法很容易：使用著名的库。大量的性能工作已进入此类库。你无法与之竞争。

# css - 使文本高度为 div 的 100%？

> ID：10718840
> 
> 赞同：14
> 
> 时间：2012-05-23T11:17:59.937
> 
> 标签：css, text, fonts, height

我正在尝试将文本设置为 a 的 100% 高度，`div`但它不起作用。
它只是成为 100% 的`body { font-size:?; }`.

有没有办法让它跟随 div 高度？高度是整个页面的 4%，当您调整大小/更改分辨率时，我不想让文本跟随它
。`div`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T10:41:22.340

为了得到我想要的结果，我不得不使用这段代码：

```
// Cache the div so that the browser doesn't have to find it every time the window is resized.
var $div = $('li.leaf.item');

// Run the following when the window is resized, and also trigger it once to begin with.
$(window).resize(function () {
   // Get the current height of the div and save it as a variable.
   var height = $div.height();
   // Set the font-size and line-height of the text within the div according to the current height.
   $div.css({
      'font-size': (height/2) + 'px',
      'line-height': height + 'px'
   })
}).trigger('resize');​ 
```

感谢 josuanhibbert@css-tricks 的帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-12T11:43:06.543

在 2015 年，您可以使用[视口单位](http://caniuse.com/#feat=viewport-units)。这将允许您以高度单位设置字体大小，代表视口高度的 1%。

所以在你的情况下`font-size: 4vh`会达到预期的效果。

注意：正如您所问的，这与父 div 无关，而是与视口高度相关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T11:26:47.023

使用 CSS 你无法做到这一点。而不是使用javascript。

检查这些：

1.  [http://fittextjs.com/](http://fittextjs.com/)
2.  [根据 div 的大小改变字体大小](https://stackoverflow.com/questions/7900533/have-font-size-change-according-to-size-of-div)
3.  [调整字体大小以适应 div](https://stackoverflow.com/questions/3401136/resize-font-to-fit-in-a-div-on-one-line)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-05T15:22:33.243

如果您想要仅使用 CSS 的 div 大小为 100% 的文本，则必须更改 font-size 和 line-height 属性。这是我的解决方案：

```
.divWithText {
    background-color: white;
    border-radius: 10px;
    text-align: center;
    text-decoration: bold;
    color: black;

    height: 15vh;
    font-size: 15vh;
    line-height: 15vh;
} 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2012-05-23T11:37:28.717

试试这个

```
font
{
  position:absolute;
  width:100%;
  height:100%;
  font-family:Verdana, Geneva, sans-serif;
  font-size:15px;
  font-weight:normal;
} 
```

# java - 使用Java通过FTP将所有目录复制到服务器

> ID：10718843
> 
> 赞同：6
> 
> 时间：2012-05-23T11:18:11.070
> 
> 标签：java, recursion, ftp

我需要将目录从本地磁盘复制到服务器。该目录包含许多目录、子目录和文件。（想想目录的层次结构树）。

以下是复制一个文件的示例：

```
 public void saveFilesToServer() throws IOException {
    FTPClient ftp = new FTPClient();
    ftp.connect(ftp.foobar.com);
    if (!FTPReply.isPositiveCompletion(ftp.getReplyCode())) {
        ftp.disconnect();
        log.fatal("FTP not disconnected");
    }

    ftp.login("foo", "qwerty");
    log.info("Connected to server .");
    log.info(ftp.getReplyString());
    ftp.changeWorkingDirectory("test");
    ftp.makeDirectory("somedir");
    ftp.changeWorkingDirectory("somedir");
    ftp.setFileType(FTPClient.BINARY_FILE_TYPE);    
    java.io.File srcFolder = new java.io.File(folderPath);      
    FileInputStream fis = new FileInputStream(srcFolder);
    ftp.storeFile (fileName, fis);
    ftp.disconnect();
    log.info("FTP disconnected");
} 
```

现在，我需要复制一个目录 ( `somedir`)，其中包含`somedir`.

我认为算法应该使用递归。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T12:28:38.973

以下是该问题的递归解决方案的示例：

```
public void saveFilesToServer(String remoteDest, File localSrc) throws IOException {
    FTPClient ftp = new FTPClient();
    ftp.connect("ftp.foobar.com");
    if (!FTPReply.isPositiveCompletion(ftp.getReplyCode())) {
        ftp.disconnect();
        log.fatal("FTP not disconnected");
    }

    ftp.login("foo", "qwerty");
    log.info("Connected to server .");
    log.info(ftp.getReplyString());

    ftp.changeWorkingDirectory(remoteDest);
    ftp.setFileType(FTPClient.BINARY_FILE_TYPE);

    try {
        upload(localSrc, ftp);
    }
    finally {
        ftp.disconnect();
        log.info("FTP disconnected");           
    }
}

public void upload(File src, FTPClient ftp) throws IOException {
    if (src.isDirectory()) {
        ftp.makeDirectory(src.getName());
        ftp.changeWorkingDirectory(src.getName());
        for (File file : src.listFiles()) {
            upload(file, ftp);
        }
        ftp.changeToParentDirectory();
    }
    else {
        InputStream srcStream = null;
        try {
            srcStream = src.toURI().toURL().openStream();
            ftp.storeFile(src.getName(), srcStream);
        }
        finally {
            IOUtils.closeQuietly(srcStream);
        }
    }
} 
```

[`IOUtils`](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)是[Apache Commons IO](http://commons.apache.org/io/)的一部分。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-23T11:23:46.957

```
upload(fileName){
  If (filename is not dir){
   ftpFile();
   return;
 }
 listoffiles = get the list of all files in dir 
    for each file : listoffiles {
    upload(file)
 } 
```

}

# javascript - 使用带有 TreeView 节点的 javascript 检查/取消选中功能

> ID：10718845
> 
> 赞同：0
> 
> 时间：2012-05-23T11:18:11.213
> 
> 标签：javascript, asp.net, treeview

我正在使用带有 TreeView 节点复选框检查/取消检查功能的以下 javascript。我在 treeview.parent、child 和兄弟姐妹中有三个级别。javascript 代码工作正常，但我需要相互依赖地检查和取消检查兄弟姐妹级别。不影响父级和孩子检查/取消检查。请有人帮我修改代码。

```
<script type="text/javascript">
        function OnTreeClick(evt) {
            var src = window.event != window.undefined ? window.event.srcElement : evt.target
            var isChkBoxClick = (src.tagName.toLowerCase() == "input" && src.type == "checkbox");
            if (isChkBoxClick) {
                var parentTable = GetParentByTagName("table", src);
                var nxtSibling = parentTable.nextSibling;
                if (nxtSibling && nxtSibling.nodeType == 1)//check if nxt sibling is not null & is an element node
                {
                    if (nxtSibling.tagName.toLowerCase() == "div") //if node has children
                    {
                        //check or uncheck children at all levels
                        CheckUncheckChildren(parentTable.nextSibling, src.checked);
                    }
                }
                //check or uncheck parents at all levels
                CheckUncheckParents(src, src.checked);
            }
        }

        function CheckUncheckChildren(childContainer, check) {
            var childChkBoxes = childContainer.getElementsByTagName("input");
            var childChkBoxCount = childChkBoxes.length;
            for (var i = 0; i < childChkBoxCount; i++) {
                childChkBoxes[i].checked = check;
            }
        }

        function CheckUncheckParents(srcChild, check) {
            var parentDiv = GetParentByTagName("div", srcChild);
            var parentNodeTable = parentDiv.previousSibling;

            if (parentNodeTable) {
                var checkUncheckSwitch;

                if (check) //checkbox checked
                {
                    checkUncheckSwitch = true;
                }
                else //checkbox unchecked
                {
                    var isAllSiblingsUnChecked = AreAllSiblingsUnChecked(srcChild);
                    if (!isAllSiblingsUnChecked)
                        checkUncheckSwitch = true;
                    else
                        checkUncheckSwitch = false;
                }

                var inpElemsInParentTable = parentNodeTable.getElementsByTagName("input");
                if (inpElemsInParentTable.length > 0) {
                    var parentNodeChkBox = inpElemsInParentTable[0];
                    parentNodeChkBox.checked = checkUncheckSwitch;
                    //do the same recursively
                    CheckUncheckParents(parentNodeChkBox, checkUncheckSwitch);
                }
            }
        }

        function AreAllSiblingsUnChecked(chkBox) {
            var parentDiv = GetParentByTagName("div", chkBox);
            var childCount = parentDiv.childNodes.length;
            for (var i = 0; i < childCount; i++) {
                if (parentDiv.childNodes[i].nodeType == 1) //check if the child node is an element node
                {
                    if (parentDiv.childNodes[i].tagName.toLowerCase() == "table") {
                        var prevChkBox = parentDiv.childNodes[i].getElementsByTagName("input")[0];
                        //if any of sibling nodes are not checked, return false
                        if (prevChkBox.checked) {
                            return false;
                        }
                    }
                }
            }
            return true;
        }

        //utility function to get the container of an element by tagname
        function GetParentByTagName(parentTagName, childElementObj) {
            var parent = childElementObj.parentNode;
            while (parent.tagName.toLowerCase() != parentTagName.toLowerCase()) {
                parent = parent.parentNode;
            }
            return parent;
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:28:33.067

```
// trvTest.Attributes.Add("onclick", "OnCheckBoxCheckChanged(event)"); 

function OnCheckBoxCheckChanged(event)
        {
            var obj = window.event.srcElement;
            var treeNodeFound = false;
            var checkedState;
            if (obj.tagName == "INPUT" && obj.type == "checkbox") 
            {
                var treeNode = obj;
                checkedState = treeNode.checked;
                do
                {
                    obj = obj.parentElement;
                } 

                while (obj.tagName != "TABLE")
                var parentTreeLevel = obj.rows[0].cells.length;
                var parentTreeNode = obj.rows[0].cells[0];
                var tables = obj.parentElement.getElementsByTagName("TABLE");
                var numTables = tables.length
                if (numTables >= 1)
                {
                    for (i=0; i < numTables; i++)
                    {
                        if (tables[i] == obj)
                        {
                            treeNodeFound = true;
                            i++;
                            if (i == numTables)
                            {
                                return;
                            }
                        }
                        if (treeNodeFound == true)
                        {
                            var childTreeLevel = tables[i].rows[0].cells.length;
                            if (childTreeLevel > parentTreeLevel)
                            {
                                var cell = tables[i].rows[0].cells[childTreeLevel - 1];
                                var inputs = cell.getElementsByTagName("INPUT");
                                if (inputs.length > 0)
                                    inputs[0].checked = checkedState;
                            }
                            else
                            {
                                return;
                            }
                        }
                    }
                }
            }
        } 
```

# python - 在 Sphinx 自动摘要中使用第一段而不是第一行

> ID：10718846
> 
> 赞同：3
> 
> 时间：2012-05-23T11:18:12.877
> 
> 标签：python, python-sphinx

我正在使用[Sphinx](http://sphinx.pocoo.org/)自动摘要指令来记录一个类，但我遇到了自动摘要仅严格显示自动摘要表中文档字符串的第一行的问题。例如，

```
.. currentmodule:: logging
.. autosummary::
  ~Logger.manager
  ~Logger.root 
```

生成一个表，其中包含：

```
manager   There is [under normal circumstances] just one Manager instance, which
root      A root logger is not that different to any other logger, except that 
```

我可以理解为什么这是默认设置，但是有没有办法让它显示第一句或第一段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:39:35.297

您的文档字符串显然来自标准库[日志记录](http://hg.python.org/cpython/file/477508efe4ab/Lib/logging/__init__.py)模块。它们看起来像这样：

```
class Manager(object):
    """
    There is [under normal circumstances] just one Manager instance, which
    holds the hierarchy of loggers.
    """ 
```

和

```
class RootLogger(Logger):
    """
    A root logger is not that different to any other logger, except that
    it must have a logging level and there is only one instance of it in
    the hierarchy.
    """ 
```

这是返回自动摘要字符串 ( [`autosummary/__init__.py`](https://bitbucket.org/birkenfeld/sphinx/src/6e960412308f/sphinx/ext/autosummary/__init__.py)) 的代码：

```
m = re.search(r"^([A-Z][^A-Z]*?\.\s)", " ".join(doc).strip())
if m:
    summary = m.group(1).strip()
elif doc:
    summary = doc[0].strip()
else:
    summary = '': 
```

`doc`是作为*行列表*的文档字符串。

自动摘要字符串应该是[docstring 的第一句](http://sphinx.pocoo.org/ext/autosummary.html#directive-autosummary)。但是，正则表达式存在问题：

1.  在首字母大写之后，句子不能包含额外的大写字母。
2.  在句点之后需要一个空白字符。

这意味着正则表达式不会匹配上面的任何文档字符串。如果模式更改为

```
^([A-Z].*?\.\s?) 
```

然后它将匹配两个文档字符串，并且完整的第一句话将出现在输出中。（这可能不是最佳的正则表达式，但至少它在这种情况下有效。）

# .htaccess - ssl重定向不起作用

> ID：10718853
> 
> 赞同：0
> 
> 时间：2012-05-23T11:18:38.577
> 
> 标签：.htaccess, redirect, ssl

我刚刚将我的域设置为使用 ssl 并将此代码添加到 .htaccess 文件（在根目录下）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(.*\.)*mysite.com$ [NC]
RewriteCond %{SERVER_PORT} !^443$
RewriteRule ^(.*)$ https://www.mysite.com/$1 [R] 
```

它重定向来自 mysite.com 的所有流量，但来自 WWW.mysite.com 的流量显示为不受信任。我尝试在 mysite.com 之前添加 www：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(.*\.)*www.mysite.com$ [NC]
RewriteCond %{SERVER_PORT} !^443$
RewriteRule ^(.*)$ https://www.mysite.com/$1 [R] 
```

但它没有用。能理解这段代码的人请帮忙..

更新：[https://mysite.com/](https://mysite.com/)工作正常，但 mysite.com（没有 https://）尝试重定向到[https://www.mysite.com/](https://www.mysite.com/)并出现“不受信任的证书消息，此证书仅适用于 mysite.com/"（很明显？）注意：mysite.com 实际上不是我的网站，我已将其替换为我的网站名称，因为我还不能透露我自己网站的地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:56:48.120

如果我正确理解您的问题，您需要将所有点击重定向到[https://mysite.com/](https://mysite.com/)而不是[https://www.mysite.com/](https://www.mysite.com/)。

如果是这种情况，那么您在上一个重写规则中存在问题 - 将其编辑为

```
RewriteRule ^(.*)$ https://mysite.com/$1 [R] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:51:45.003

此代码会将所有到您网站的流量从 HTTP 重定向到 HTTPS

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

# hibernate - Hibernate - 混合实体/组件继承映射

> ID：10718858
> 
> 赞同：1
> 
> 时间：2012-05-23T11:19:02.600
> 
> 标签：hibernate, inheritance, orm

假设我有以下类层次结构：

```
interface Client:
    String name
    String country

class RegisteredClient implements Client:
    String assignedId

class UnregisteredClient implements Client

class ClientRisk:
    Client client
    int riskLevel 
```

这个想法是`ClientRisk`可以链接到具有 id 的注册客户端（这是自定义的并且来自其他地方），或者一些自定义客户端（未注册）。现在存在以下数据库结构：

```
REGISTERED_CLIENT(ASSIGNED_ID, NAME, COUNTRY)
CLIENT_RISK(REG_CLIENT_ID, UNREG_NAME, UNREG_COUNTRY, RISK_LEVEL) 
```

我用 Hibernate 映射了这些实体，例如在 中有两个隐藏字段`ClientRisk`，一个是引用`RegisteredClient`，另一个`UnregisteredClient`是映射为组件。我添加了一个属性`client`，在运行时区分这两个字段。

这是一种丑陋的解决方案，并且无法扩展（例如，我不能只写`client.name`标准或 HQL）。另一方面，我不想将未注册的客户放到另一个表中，因为它是自定义的，无论如何都不会共享。我也不想映射`UnregisteredClient`为基于`CLIENT_RISK`表的实体，这会导致不必要的连接（`CLIENT_RISK JOIN CLIENT_RISK`）。

我的问题是，在 Hibernate 中处理这种情况的最佳方法是什么？

# xpages - xpages 中的数据透视表

> ID：10718864
> 
> 赞同：0
> 
> 时间：2012-05-23T11:19:30.590
> 
> 标签：xpages

我一直在寻找一种在 Xpages 中获得可旋转功能的方法。我发现了什么：

第一： [使用 Openlink Ajax Toolkit 的数据透视表](http://www.intec.co.uk/pivot-tables-in-xpages-with-openlink-ajax-toolkit/)

如果 Paul 可以提供一个示例 nsf 文件来查看它会很好，因为我不知道如何使用现有的笔记数据来实现它。

第二：[Pivot.js](http://rjackson.github.com/pivot.js/)

这使用 JQuery。这里的问题是它从 CSV 或 JSON 数据开始。我们如何使用笔记数据......如果有人可以提供一个工作样本来看看......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:56:12.457

在那个例子中，我想我只是硬编码了传递给 CSJS 函数的值。您需要在计算字段控件中或作为 CSJS 函数中的 SSJS 计算值。我认为该格式是一个 JSON 对象，因此 SSJS 只需要返回相同的格式。计算字段可能更容易，当然也更容易调试。您可以在我的博客或 Lotus Domino 应用程序开发 wiki 上的 Dojo 图表示例中看到它的实际效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:55:57.197

Scott Good 和我在 Lotusphere 2009 上做了一个 2 小时的关于在 Domino 中使用 AJAX 和 JSON 的演讲，他在 2009 年 8 月在芝加哥举行的 Midwest Lotus User Group Conference 上重复了该演讲。幻灯片和示例链接到 Scott 的博客[here](http://www.scottgood.com/jsg/blog.nsf/d6plinks/SGOD-7NHRKR)和[here](http://www.scottgood.com/jsg/blog.nsf/d6plinks/SGOD-7VBNUD)。

/新人

# objective-c - 如何更改导航栏背景

> ID：10718874
> 
> 赞同：1
> 
> 时间：2012-05-23T11:20:11.033
> 
> 标签：objective-c, ios, xcode, navigationbar

我尝试更改导航栏的背景。

搜索.h：

```
#import <UIKit/UIKit.h>

@interface Search : UIViewController

@end 
```

搜索.m：

```
#import "Search.h"

@implementation Search

- (void)viewDidLoad
{

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

UIImage *image = [UIImage imageNamed:@"navigation_header.png"];

[self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];

} 
```

我无法更改导航背景。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T16:26:23.523

这实际上比你想象的要简单。在您的应用委托中...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"NavBar.png"] forBarMetrics:UIBarMetricsDefault];
    return YES;
} 
```

这将普遍改变您的导航栏背景图像。

**注意：**我相信`UINavigationBar's`“外观”属性在 iOS 5 及更高版本中可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:33:14.967

视图控制器.h

```
IBOutlet UINavigationBar *navBar; 
```

viewController.m //颜色

```
- (void)viewDidLoad{  
[super viewDidLoad];
 [navBar setTintColor:[UIColor colorWithRed:0.0/255.0 green:100.0/255.0 blue:20.0/255.0 alpha:1.0]];
} 
```

//对于图像

```
 UIImage *image = [UIImage imageNamed:@"navigation_header.png"];
[self.navigationController.navBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:45:40.777

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.viewController = [[[Search alloc] initWithNibName:@"Search" bundle:nil] autorelease];
    navControl = [[UINavigationController alloc] initWithRootViewController:self.viewController];
[self.window addSubview:[navControl view]];
[self.window makeKeyAndVisible]; 
```

}

在 AppDelegate.m 中编写此方法。我想这会对你有所帮助。

# javascript - 我想要一些在另一个回调函数内部的结果

> ID：10718879
> 
> 赞同：0
> 
> 时间：2012-05-23T11:20:29.077
> 
> 标签：javascript, cordova, web-sql

我开始使用 javascript。我认为这个问题仅与 javascript 有关，但它涉及 PhoneGap 和 WebSQL。我的问题和我想做的在代码注释中。

```
var MyDatabase = function() {
    if (!(this instanceof MyDatabase)) return new MyDatabase();
}

MyDatabase.prototype = {
    db: window.openDatabase("my_database", "1.0", "My Database", 5000000),

    getAllPosts: function(callback) {
        var query = "SELECT * FROM posts",
            that = this,
            result;

        function onSuccess (transaction, resultSet) {
            console.log('get posts with success.');
            result = resultSet.rows; // I think this should work, but it doesn't
            if (typeof callback === 'function') callback.call(that, result);
        }

        function onError(transaction, error) {
            console.log(error);
        }

        this.db.transaction(function(t){ t.executeSql(query, [], onSuccess, onError) });

        return result; // result still undefined
    }
};

// Imagine that the posts table are created and has some rows seted.

var database = MyDatabase();

// The callback works fine.
database.getAllPosts(function(result) {
  // do something with result.
  console.log(result);
  // SQLResultSetRowList
});

// But in some cases I want to do this and I get result as undefined =(
var result = database.getAllPosts(); 
```

有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:26:39.240

您必须使用回调。你不能返回`result`你的代码，因为`onSuccess`还没有被调用，所以什么都不会设置`result`。

# image - 如何将 C# 图像转移到 Monotouch

> ID：10718881
> 
> 赞同：2
> 
> 时间：2012-05-23T11:20:32.120
> 
> 标签：image, xamarin.ios, uiimage

我正在通过 wcf 从 monotouch 连接到我的 windows c# 主机，并希望将图像流式传输回 monotouch，以便我可以显示它。

我的图像保存在一个 System.Drawing.Image 对象中，该对象在 monotouch 中不可用（它使用 UIImage）。

我希望将主机上的图像转换为这样的字符串：

```
 Image im = Image.FromFile(path);
        MemoryStream ms = new MemoryStream();
        im.Save(ms, im.RawFormat);
        byte[] array = ms.ToArray();
        return Convert.ToBase64String(array); 
```

然后在 MonoTouch 中使用相反的方法来重新获取我的图像：

```
 byte[] array = Convert.FromBase64String(imageString);
        Image image = Image.FromStream(new MemoryStream(array));
        return image; 
```

这在“纯”.net 环境中运行良好，但 monotouch 无法识别 Image 对象，因此它在该端失败。如何将 byte[] 转换回 UIImage？

我试过这样的事情：

```
 UIImage img = (UIImage)UIImage.FromObject(bytes); 
```

无济于事...

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:08:53.357

而不是通过`im.RawFormat`，尝试使用以下之一：

*   `ImageFormat.Bmp`
*   `ImageFormat.Png`

取决于您的图像通常是哪种格式。这些都在`System.Drawing.Imaging`，[请看这里](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imageformat.aspx)。

这可能会给其他客户端应用程序带来麻烦，我建议让客户端发送一些东西来确定服务器返回的格式。

# android - 从另一个应用程序访问一个应用程序的数据库

> ID：10718891
> 
> 赞同：6
> 
> 时间：2012-05-23T11:21:21.283
> 
> 标签：android, android-sqlite, android-database

我已经构建了一个应用程序，现在我想使用我的新备份应用程序复制该正在运行的应用程序的数据库。我通过`DB_PATH + DB_NAME`使用以下值创建我的数据库路径：

```
DB_PATH = "/data/data/iCam.Cam/";
DB_NAME = "testdb.db"; 
```

我有将数据库从给定路径复制到 SD 卡的代码。但是，当我最初使用以下方法检查数据库时，它返回`false`：

```
public boolean checkDataBase() {    
    SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        e.fillInStackTrace();
        // database does't exist yet.
    }

    if (checkDB != null) {
        checkDB.close();
    }

    return checkDB != null ? true : false;
} 
```

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T11:31:18.517

只有在自定义内容提供程序中创建了正在运行的应用程序数据库时，才能使用相同的数据库。

您不能直接从正在运行的应用程序访问数据库。

但是，如果您在自定义内容提供程序中创建正在运行的应用程序数据库，那么您可以在权限的帮助下直接访问数据库。

在这种情况下，您甚至不需要复制该数据库。

请参阅此[链接](http://ashwinrayaprolu.wordpress.com/2011/03/16/custom-content-provider-in-android/)以获取自定义内容提供程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T11:26:20.937

```
No 
```

除非应用程序通过 ContentProvider 为您提供接口，否则您无法访问其他应用程序的数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T11:25:50.873

使用 DDMS，您可以浏览 SQLite 数据库，因此请从此链接 [http://www.brighthub.com/mobile/google-android/articles/25023.aspx](http://www.brighthub.com/mobile/google-android/articles/25023.aspx) http://www.edumobile.org/android/阅读 DDMS 教程类别/android-beginner-tutorials/

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T11:28:23.057

阅读[安卓安全。](http://developer.android.com/guide/topics/security/security.html) 应用程序存储的任何数据都将分配给该应用程序的用户 ID，并且通常不能被其他包访问

# authentication - 在 nginx 上使用一次性 cookie 进行非常简单的身份验证

> ID：10718895
> 
> 赞同：18
> 
> 时间：2012-05-23T11:21:50.450
> 
> 标签：authentication, cookies, nginx, password-protection, http-authentication

我有一个仅供 3 位程序员私人使用的网站。它是由 nginx 直接提供的简单 HTML，但旨在供办公室内外使用。

我想要一个简单的密码或身份验证方案。我可以使用 HTTP 身份验证，但这些往往会经常过期，这让人们使用起来很痛苦。我也很紧张，有人闻比饼干更容易闻。

所以我想知道我是否可以在他们的浏览器上使用唯一的长 ID 在 JavaScript 中设置一个 cookie，并以某种方式告诉 nginx 只接受具有此 cookie 的请求（针对特定子域）。

这足够简单吗？我如何能

1.  告诉 nginx 通过 cookie 过滤
2.  在浏览器中，设置一个永不过期的cookie？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-08-15T12:02:06.203

[我从Christian Stocker 的博客文章](https://blog.liip.ch/archive/2017/01/12/no-nginx-basic-auth-with-either-network-or-cookie-set.html)中找到了一个看起来非常简单的解决方案。它执行以下规则：

1.  如果用户在内部 IP 上，则允许他们使用。
2.  如果用户设置了 cookie，则允许他们使用。
3.  如果两者都不匹配，则向用户显示 http 基本身份验证，**如果他们成功验证身份，则设置长期 cookie**

这真是两全其美。

这是配置：

```
map $cookie_letmein $mysite_hascookie {
  "someRandomValue" "yes";
  default           "no";
}

geo $mysite_geo {
  192.168.0.0/24 "yes"; #some network which should have access
  10.10.10.0/24  "yes"; #some other network which should have access
  default        "no";
}

map $mysite_hascookie$mysite_geo $mysite_authentication{
  "yesyes" "off";  #both cookie and IP are correct  => OK
  "yesno"  "off"; #cookie is ok, but IP not  => OK
  "noyes"  "off";  #cookie is not ok, but IP is ok => OK
  default  "Your credentials please"; #everythingles => NOT OK
}

server {
  listen 80;
  server_name mysite.example.org;
  location / {
    auth_basic  $mysite_authentication;
    auth_basic_user_file  htpasswd/mysite;
    add_header Set-Cookie "letmein=someRandomValue;max-age=3153600000;path=/"; #set that special cookie, when everything is ok
    proxy_pass http://127.0.0.1:8000/;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $remote_addr;
  }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-04-16T14:33:21.397

要让 Nginx 通过 cookie 过滤，如果 cookie**不**存在，您可以执行一些操作，然后对 3 个有权访问的人执行实际操作，例如：

```
server {
    listen 443 ssl http2;  # Use HTTPS to protect the secret
    ...
    if ($http_cookie !~ 'secretvalue') {
        return 401; 
    }
    location / {
       # Auth'd behaviour goes here
    }
} 
```

要设置一个永不过期的 cookie，请在服务器主机名上的页面上启动浏览器的 JavaScript 控制台，然后输入：

```
document.cookie = 'cookie=secretvalue;max-age=3153600000;path=/;secure'; 
```

从技术上讲，这不是永远的，但应该 100 年才能做到。如果您愿意，也可以使用`expires=`RFC1123 格式的绝对日期，并且可以`path`根据需要轻松调整。这也会`secure`在 cookie 上设置标志，因此它只会通过 HTTPS 发送。

还有一些浏览器插件允许您创建任意 cookie，但所有现代浏览器都有一个 JavaScript 控制台。

# vba - 如何从一条记录移动到另一条记录

> ID：10718898
> 
> 赞同：1
> 
> 时间：2012-05-23T11:21:58.587
> 
> 标签：vba, ms-access

我创建了一个`onclick`函数，它应该运行 SQL 语句，从语句中选择 URL，然后从 URL 依次打开 Excel 文件。

它可以工作，但如果查询返回 3 个结果，那么它会打开同一个 excel 文件 3 次。

它不是一个接一个地打开一个文件，而是打开同一个文件。

这就是我所拥有的：

```
 Dim strSQL As String
    Dim rs As DAO.Recordset
    Dim db As Database
    Dim appexcel As Object
    Set db = CurrentDb()
    strSQL = "SELECT * from [PROCESSED_CONTRACTS_PRINTALL]"
    Set rs = db.OpenRecordset(strSQL)
    urlval = rs!url
    rs.MoveFirst
    Do Until rs.EOF
    Set appexcel = CreateObject("Excel.Application")
    appexcel.workbooks.Open urlval
    appexcel.Visible = True
    rs.MoveNext
    Loop
    rs.Close
    Set rs = Nothing
    End Sub 
```

请问有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:34:23.683

怎么样，请注意 urlval 现在在循环内，而 Excel 在循环外。

```
Dim strSQL As String
Dim rs As DAO.Recordset
Dim db As Database
Dim appexcel As Object
Set db = CurrentDb()
strSQL = "SELECT * from [PROCESSED_CONTRACTS_PRINTALL]"
Set appexcel = CreateObject("Excel.Application")
appexcel.Visible = True
Set rs = db.OpenRecordset(strSQL)
rs.MoveFirst
Do Until rs.EOF
  urlval = rs!url
  appexcel.workbooks.Open urlval
  rs.MoveNext
Loop
rs.Close
Set rs = Nothing
End Sub 
```

# c# - 如何使用friends.getAppUsers

> ID：10718899
> 
> 赞同：0
> 
> 时间：2012-05-23T11:21:58.477
> 
> 标签：c#, facebook

我是新手`friends.getAppUsers`，我不知道如何使用它。我想搜索所有已注册到我网站的朋友。请详细解释我如何实现这一点，这将有很大帮助。

谢谢阿比纳夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:14:29.860

你可以简单地做到这一点

```
FB.api({
            method: 'fql.query',
            query: 'select name from user  where uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1'
        }, function(response){}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:43:48.200

您可以使用以下 Graph Query 获取您的朋友列表：

```
SELECT uid, name, is_app_user FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) 
```

然后，您将交叉引用`uid`您存储在数据库中的人员列表（使用单点登录或其他方式）。

# iphone - uiwebview 不会滚动到底部

> ID：10718903
> 
> 赞同：3
> 
> 时间：2012-05-23T11:22:21.680
> 
> 标签：iphone, ipad, uiwebview, load, epub

我是 iPad 开发者的新手，

我正在为我的应用程序制作 ePub 阅读器，我在其中加载我的 ePub 页面`UIWebView`

当我加载我的页面时，`webview`它只会滚动到一些限制，

这是我的代码片段，

```
- (void)viewDidLoad {
...

    _webview=[[UIWebView alloc]init];
    _webview.frame=CGRectMake(0, 0, 770, 960);
    [_webview setBackgroundColor:[UIColor grayColor]];
    _webview.delegate=self;
    [self.view addSubview:_webview];

    [self loadPage];
...
}

 - (void)loadPage{

  [_webview loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:_pagesPath]]];

    [self._webview sizeToFit];
    _webview.scalesPageToFit=TRUE;
    _webview.scrollView.bounces = NO;
    _webview.autoresizesSubviews = YES;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T14:55:28.360

删除所有行并只写这行，

```
_webview.scalesPageToFit=TRUE;
_webview.scrollView.bounces = NO; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T07:46:10.460

如果您无法正确滚动到底端，请使用`UIWebView`：

1）解决问题的一种方法（以编程方式）是使用适当的自动调整大小来`UIWebView`.

```
self.webView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin ; 
```

![在此处输入图像描述](../Images/87dc390ff57a91fdc2cac539066d5e91.png)

2）解决问题的其他方法（界面生成器）是使用适当的自动调整大小`UIWebView`。转到 Interface Builder->Web View->Size Inspector 并在所有地方勾选自动调整零件大小（如上图所示）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T06:38:19.437

1）尝试隐藏导航栏

```
self.navigationController.hidesBarsOnSwipe = YES; 
```

2）尝试使 WebViewScale 适合视图

```
webView.scalesPageToFit=YES;
webView.scrollView.bounces = NO; 
```

3）或者可能是 WebView 框架的问题，然后尝试

```
UIWebView *webView = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height-self.navigationController.navigationBar.frame.size.height)]; 
```

# html - 命令按钮块

> ID：10718904
> 
> 赞同：0
> 
> 时间：2012-05-23T11:22:22.277
> 
> 标签：html

```
 *<af:commandButton text="#{res['pci.buttons.save']}"
                          blocking="true"
                          disabled="#{claimFileDetailAddBean.buttonsDisabled "}    
                          action="#{claimFileDetailAddBean.save}"/>* 
```

## 我使用这个 html。我想; 按钮块继续进行，直到动作结束。这怎么可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:32:21.703

所以你想动态禁用/启用你的按钮？在这种情况下，您可以使用[javascript DOM](http://www.w3schools.com/jsref/default.asp) 您可以使用标签 object.disabled=true 禁用和 object.disabled=true 禁用。您所要做的就是为它创建一个函数。

顺便说一句：下次在你的问题中更具体。

# mysql - 如何在不丢失列数据的情况下更改 MySQL 表的列位置？

> ID：10718905
> 
> 赞同：101
> 
> 时间：2012-05-23T11:22:37.643
> 
> 标签：mysql, sql

我想在不丢失数据的情况下更改数据库表的列位置。

**例如：**

当前表：

```
+----+------+-------+----------+
| id | name | email | password |
+----+------+-------+----------+ 
```

至

```
+----+----------+------+-------+
| id | password | name | email |
+----+----------+------+-------+ 
```

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-05-23T11:23:46.083

尝试这个：

```
ALTER TABLE table_name MODIFY password varchar(20) AFTER id 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-01-08T17:32:01.617

希拉曼的回答是正确的；但如果您使用的是 phpMyAdmin，则有一种直观且实用的方法可以做到这一点。

1.  打开表
2.  选择“**结构**”选项卡
3.  点击“**移动列**”
4.  拖放列名称

[![移动列链接，结构选项卡的中间](../Images/d4020f61b29fb670686a1d0c0bd5ef98.png)](https://i.stack.imgur.com/2RpkZ.jpg) [![移动列弹出窗口](../Images/1c2faf54a133f1e50a538febe2509278.png)](https://i.stack.imgur.com/3Jl5N.jpg)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-06-06T06:12:40.650

如果您使用的是 MySQL 工作台，

1.  **右键单击表格**
2.  **更改表**
3.  **拖动列并重新排序**
4.  **单击应用并完成**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-13T20:32:34.153

此外，您可以这样做：

```
ALTER TABLE table_name CHANGE COLUMN column_name column_name data_type AFTER another_column_name; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-11T04:09:36.593

您可以使用修改/更改关键字。

```
ALTER TABLE [table] CHANGE COLUMN [column] [column] [column definition] AFTER [column]

ALTER TABLE [table] MODIFY COLUMN [column] [column definition] AFTER [column] 
```

例如：

```
ALTER TABLE table_name MODIFY password varchar(20) AFTER id

ALTER TABLE table_name MODIFY password varchar(20) varchar(20) AFTER id 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-30T11:48:49.927

如果您像我一样，使用 MySQL 工作台并在尝试实现 @Mohemmed Niyaz 答案时迷路了，您可以按照以下步骤操作，

*   在左上角，单击架构
*   找到并选择您的数据库，然后找到并选择您要修改的表
*   当您将鼠标悬停在表格名称上时，您会看到三个图标，单击设置（即中间的那个），或者您可以右键单击并选择`Alter Table` ，
*   然后单击列并将其拖动到您希望列所在的位置。
*   在您的右下角，您将看到应用（单击并应用）。

# sql - 行之间的最大差异

> ID：10718906
> 
> 赞同：0
> 
> 时间：2012-05-23T11:22:38.900
> 
> 标签：sql

我根本不擅长 SQL，所以这里是：

我有一个包含双精度列的表。我想选择它们之间最大差异为“5”的所有行。

我怎样才能做到这一点？

```
id         value

 1         4955.54
 2         2884.32
 3         8485.45
 4         4588.54
 5         8487.62 
```

结果

```
 id        value

 3         8485.45
 5         8487.62 
```

我怎样才能在 mySQL 中做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:25:52.443

```
select id, value from table t1 
  inner join table t2 on t1.id <> t2.id
 where ABS(t1.value-t2.value)<=5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:35:24.823

这有效，尽管您的意思是*最大*而不是*最小*差异：

```
SELECT v.id, v.value 
FROM Values v 
WHERE EXISTS(
    SELECT null from Values v2 
    WHERE v2.id <> v.id and
    ABS(v2.value - v.value) BETWEEN 0 AND 5
) 
```

*   [MSDN：存在（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms188336.aspx)
*   [MSDN：ABS（事务处理 SQL）](http://msdn.microsoft.com/en-us/library/ms189800.aspx)
*   [MSDN：之间（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms187922.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T11:25:01.163

如果值集很大，它可能效率低下。没有明显的方法可以有效地编写此查询，但这里有：

```
select     lo.val
,          hi.val
from       numbers lo
inner join numbers hi
on         hi.val - lo.val >= 5 
```

如果 val 列被索引，它可能有助于添加另一个条件，如下所示：

```
select     lo.val
,          hi.val
from       numbers lo
inner join numbers hi
on         hi.val > lo.val 
where      hi.val - lo.val >= 5 
```

# speech-recognition - SAPI 命令和控制模式中的 N 个最佳备用列表

> ID：10718908
> 
> 赞同：0
> 
> 时间：2012-05-23T11:22:45.057
> 
> 标签：speech-recognition, sapi

我在我的应用程序的命令和控制模式下使用语音识别引擎（进程内）。很多时候，我得到不正确的结果，并且没有其他替代建议的结果。

我想知道 SAPI 返回的替代品数量是否受某些参数控制？我已经知道引擎的 MaxAlternates 属性。我的意思是，是否有任何参数可以控制识别器“生成”的替代数量？例如，引擎是否只允许超过特定置信度阈值的替代结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:50:58.123

是的，候补人员有一个最低置信水平。SR 引擎根据语法构建马尔可夫模型，只有通过模型的可行路径导致语法中存在多个路径时，您才能获得替代模型。

作为一个（相当人为的）例子，如果你的语法有“红色”和“蓝色”，而你说“绿色”，你可能会得到一个“无法识别”事件，因为映射的音素真的没有路径语法中的任何东西。

如果您有“红色”和“头”，并且您说“床”，那么就有替代方案的可能性，因为通过模型的可行路径可以包含语法中的多个路径。

# c# - SAP 企业服务工作区

> ID：10718910
> 
> 赞同：2
> 
> 时间：2012-05-23T11:22:56.180
> 
> 标签：c#, .net, service, sap, enterprise

我正在尝试在 .Net/C# 中使用其中的一些服务。某些服务可以很容易地使用，但与其他服务相比，我遇到了**误导性错误**。

这是代码的一部分：

```
 input.AcademicProgramOfStudySelectionByName = new AcademicProgramOfStudyByNameQueryMessage_syncAcademicProgramOfStudySelectionByName();
        input.AcademicProgramOfStudySelectionByName.AcademicProgramOfStudyName.languageCode = "DE"; 
```

我在第二行收到错误“对象引用未设置为对象实例”。但我已经在第一行创建了对象！

相同的代码适用于其他一些服务！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:11:00.870

您创建了对象 `input.AcademicProgramOfStudySelectionByName`，但没有创建它的成员`input.AcademicProgramOfStudySelectionByName.AcademicProgramOfStudyName`。看起来， class 的构造函数`AcademicProgramOfStudyByNameQueryMessage_syncAcademicProgramOfStudySelectionByName`并没有填充它的 member `AcademicProgramOfStudyName`。因此，当您尝试将值分配给 的成员`AcademicProgramOfStudyName`并且该实例为`NULL`时，您会遇到异常。

示例代码：

```
 AcademicProgramOfStudyByNameQueryResponse_InClient client = 
        new AcademicProgramOfStudyByNameQueryResponse_InClient(); 

    client.ClientCredentials.UserName.UserName = "XX";
    client.ClientCredentials.UserName.Password = "YY";

    AcademicProgramOfStudyByNameQueryMessage_sync input =
        new AcademicProgramOfStudyByNameQueryMessage_sync();

    input.AcademicProgramOfStudySelectionByName = new AcademicProgramOfStudyByNameQueryMessage_syncAcademicProgramOfStudySelectionByName();

    // this is the member that currently is still NULL and has to be created:
    input.AcademicProgramOfStudySelectionByName.AcademicProgramOfStudyName = new <insert whatever class is needed here>

    // now this should work without throwing an exception
   input.AcademicProgramOfStudySelectionByName.AcademicProgramOfStudyName.languageCode = "DE";

    AcademicProgramOfStudyByNameResponseMessage_sync output = 
        new AcademicProgramOfStudyByNameResponseMessage_sync(); 

    output = client.AcademicProgramOfStudyByNameQueryResponse_In(input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:09:20.973

这真的很奇怪。看到这个比较：在这段代码中我得到了错误

```
 AcademicProgramOfStudyByNameQueryResponse_InClient client = 
            new AcademicProgramOfStudyByNameQueryResponse_InClient(); 

        client.ClientCredentials.UserName.UserName = "XX";
        client.ClientCredentials.UserName.Password = "YY";

        AcademicProgramOfStudyByNameQueryMessage_sync input =
            new AcademicProgramOfStudyByNameQueryMessage_sync();

        input.AcademicProgramOfStudySelectionByName = new AcademicProgramOfStudyByNameQueryMessage_syncAcademicProgramOfStudySelectionByName();
        input.AcademicProgramOfStudySelectionByName.AcademicProgramOfStudyName.languageCode = "DE";

        AcademicProgramOfStudyByNameResponseMessage_sync output = 
            new AcademicProgramOfStudyByNameResponseMessage_sync(); 

        output = client.AcademicProgramOfStudyByNameQueryResponse_In(input); 
```

在这段代码中我没有！

```
 CustomerSimpleByNameAndAddressQueryResponse_InClient client =
          new CustomerSimpleByNameAndAddressQueryResponse_InClient();

        client.ClientCredentials.UserName.UserName = "XX";
        client.ClientCredentials.UserName.Password = "YY";

        CustomerSimpleByNameAndAddressQueryMessage_sync input = new CustomerSimpleByNameAndAddressQueryMessage_sync();

        input.CustomerSimpleSelectionByNameAndAddress = new CustomerSimpleByNameAndAddressQueryMessage_syncCustomerSimpleSelectionByNameAndAddress();
        input.CustomerSimpleSelectionByNameAndAddress.CustomerAddressCityName = "Berlin";

        CustomerSimpleByNameAndAddressResponseMessage_sync output = new CustomerSimpleByNameAndAddressResponseMessage_sync();

        output = client.CustomerSimpleByNameAndAddressQueryResponse_In(input); 
```

# html - 从后面的代码创建动态 html 文件并在新窗口中打开

> ID：10718911
> 
> 赞同：1
> 
> 时间：2012-05-23T11:22:57.210
> 
> 标签：html, vb.net, popup

我让我的用户从我的网页编写自己的 HTML。

当他们单击预览按钮时，我背后的代码需要访问页面上的控件（所以我知道我不能在这里使用 Web 方法）。

它构建 HTML 并将其作为文件保存在服务器上。

我的问题是：创建文件后，我想在新窗口中自动打开文件，让用户看到他们得心应手的工作。

我正在使用 vb.net，但很高兴收到 c# 答案。

谢谢各位！. .

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -=-=-=--=-=-=-=-=-=--=-=-=--=-=- 非常感谢扬！！

我仍然有一个小问题......
我的代码是这样的：

```
If fileExists Then
        Do Until fileExists = False
            tmpFormPreviewFileName = "Test" & GetRandomNumber() & ".html"
            tmpFormPreviewFilePath = Server.MapPath("~") & "Pages\FormPreviews\" & tmpFormPreviewFileName
            fileExists = My.Computer.FileSystem.FileExists(tmpFormPreviewFileName)
        Loop
    End If

    My.Computer.FileSystem.WriteAllText(tmpFormPreviewFilePath, strHTML, False)

    'Now open the file in a new window
    btnPreview.OnClientClick = String.Format("window.open('/Pages/FormPreviews/{0}', 'myPopup', 'width=400,height=500')", tmpFormPreviewFileName) 
```

所以，问题是 - 在用户单击预览按钮之前我不知道文件名是什么，并且在`OnClientClick`用户第二次单击按钮之前事件不会触发（这当然会创建另一个 HTML 文件)

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -=-=-=--=-=-=-=-=-=--=-=-=--=-=-=-=-=-=-=-=-=-=-=- =- 我仍然无法让弹出窗口正常工作。这是我目前的代码：

```
'create a JavaScript command for opening the file in popup window
    Dim strScript As String = String.Format("window.open('/Pages/FormPreviews/{0}, 'myPopup', 'width=400,height=500')", tmpFormPreviewFileName)

    'register the JavaScript to be executed when web page loads
    ScriptManager.RegisterStartupScript(Me, Me.[GetType](), "openPopup", strScript, True)
    ScriptManager.RegisterStartupScript(Me, Me.[GetType](), "ShowMsg", "javascript:alert('Test Msg');", True) 
```

我的“ShowMsg”成功触发，但它上面的行（弹出代码）似乎不起作用。你能看出到底出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:12:59.593

1) 首先，您必须使保存的 HTML 文件可以通过网络访问。最简单的方法是将它们保存到您网站的某个子文件夹中——例如，让我们创建一个“/GeneratedPages”文件夹。

将文件保存到此文件夹时，您需要构建此文件夹的物理路径。您可以使用[Server.MapPath](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)方法。

您可能还必须设置访问权限以允许 Web 应用程序将数据写入文件夹。

2）现在我们来实现预览窗口的打开：

假设您的预览按钮在您的 ASXP 页面中声明如下：

```
<asp:Button ID="btnPreview" runat="server" Text="Preview" /> 
```

然后您只需将以下语句添加到代码隐藏中，例如添加到 Page_Load 方法中：

```
// sample name of one generate file
string pageName = "page1.html";     
btnPreview.OnClientClick = string.Format("window.open('/GeneratedPages/{0}', 'myPopup', 'width=400,height=500')", pageName); 
```

更多关于使用的*window.open*方法的信息可以在 Javascript 参考中找到，例如[这里](http://www.w3schools.com/jsref/met_win_open.asp)。

更新：如果在单击按钮后（在回发中）构建文件，那么您可以使用[RegisterStartupScript](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)方法。预览按钮的服务器端点击处理程序可以如下：

```
protected void btnPreview_Click(object sender, EventArgs e)
{
    string tmpFormPreviewFileName;

    // construct the filename and save the file
    // ...

    // create a JavaScript command for opening the file in popup window
    string script = string.Format("window.open('/Pages/FormPreviews/{0}, 'myPopup', 'width=400,height=500')", tmpFormPreviewFileName);

    // registger the JavaScript to be executed when web page loads
    ClientScript.RegisterStartupScript(GetType(), "openPupup", script, true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:50:27.660

我认为您在 JavaScript 中缺少引用（见下文）

```
Dim strScript As String = String.Format("window.open('/Pages/FormPreviews/{0}<-- here 
```

尝试这个：

```
Dim strScript As String = String.Format("window.open('/Pages/FormPreviews/{0}', 'myPopup', 'width=400,height=500')", tmpFormPreviewFileName) 
```

# google-chrome - 如何构建 chrome 扩展以将面板添加到 gmail 窗口？

> ID：10718913
> 
> 赞同：9
> 
> 时间：2012-05-23T11:23:02.763
> 
> 标签：google-chrome, google-chrome-extension, gmail

我想构建一个像[rapportive.com](http://rapportive.com/)这样的 chrome 扩展。我是 Chrome 扩展程序和 Gmail 内容脚本的新手。任何人都可以建议如何去做吗？

目前我正在阅读[谷歌的小工具文档](https://developers.google.com/gadgets/docs)。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T03:08:46.453

这里有一些说明可以帮助您入门。有更强大的方法来构建它，但这是您正在谈论的功能的“hello world”：

1.  您将需要定义添加到 gmail 上下文的内容脚本。这部分非常简单，可以使用 Google 文档中提供的任何内容脚本示例。您应该阅读并了解成为内容脚本的意义。
2.  内容脚本需要知道在 gmail 中的何处查找电子邮件地址。该地址将用于抓取用户的社交媒体信息。您将此电子邮件地址从内容脚本发送到扩展程序的后台页面。
3.  背景页面需要具有用户预先配置的社交媒体集成。基本上，您需要将后台页面插入 Facebook 的/Twitter 的/LinkedIn 的 API，并使用它们的 API 来收集有关电子邮件地址的信息。
4.  然后，后台页面将向您添加到 gmail 的内容脚本发送消息，其中包含电子邮件地址的社交媒体详细信息
5.  然后，内容脚本会修改 gmail 的用户界面以包含您的社交媒体详细信息。

您将面临的最大长期挑战是 gmail 的布局会意外更改并破坏电子邮件发现或修改后的 UI。这两个问题要么需要一些聪明才智来解决，要么需要你熬夜想知道谷歌是否会突然破坏你的扩展。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:46:13.383

我不知道谷歌小工具是什么，你提供的链接给出了 404，但我认为你甚至不需要这个。

您需要的是一个内容脚本，该脚本被注入到 gmail 页面中，并在其中添加了一个面板。因此，请从阅读有关[如何创建](http://code.google.com/chrome/extensions/overview.html)使用[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)的 Chrome 扩展程序开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-09T04:44:51.503

有一个新的 SDK 用于修改 gmail 中的 DOM 元素：[https ://www.inboxsdk.com/docs/](https://www.inboxsdk.com/docs/)

他们有一个有用的 API 来添加按钮和其他元素。

# spring - Spring @Transactional 在 JUnit 测试中不起作用？

> ID：10718916
> 
> 赞同：12
> 
> 时间：2012-05-23T11:23:08.247
> 
> 标签：spring, hibernate, junit4, spring-test, transactional

我正在使用 Spring 3.2、Hibernate 和 JUnit 4。

我的道课如下：

`@Transactional public class SomeDaoImpl implements SomeDao {`

如果直接从 Web 应用程序执行，则此工作的更新操作。但是，我看到执行更新方法的 junit 集成测试实际上并没有持久化更改。执行junit方法时是否有回滚事务？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-23T11:30:02.297

通过[引用](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/testing.html#testing-tx)，事务*不会*在 Spring 的测试上下文中持久化。如前所述，虽然不寻常，但如果您仍然需要这样做，您可以使用[`@TransactionConfiguration`](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/testing.html#integration-testing-annotations)并[`@Rollback`](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/testing.html#integration-testing-annotations)更改默认行为。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-23T11:27:09.907

DAO 不应该是事务性的。DAO 如何知道它是否应该参与更大的交易？

在典型的 Spring 分层架构中，服务应该拥有事务。

通常以回滚的方式为数据库运行单元测试。您不希望您的测试更改数据库，除非您已经设置了一个可以随意删除和重新创建的测试数据库。

问题应该是：您的测试如何按照书面形式提交事务？如果你从不提交，你将永远看不到记录。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-23T11:31:18.803

[从文档的“测试”部分](http://static.springsource.org/spring/docs/2.5.x/reference/testing.html)，您可以使用

```
 @Rollback(false) 
```

如果您不希望 SpringJUnit4ClassRunner 回滚您的事务，请注释。

# vim - vim - 撤消所有缓冲区/窗口/打开文件等

> ID：10718923
> 
> 赞同：8
> 
> 时间：2012-05-23T11:23:38.713
> 
> 标签：vim

在 vim 中，我想按时间顺序撤消*所有缓冲区中的**所有*更改。

 *例如，在 vim 会话中，我通常打开许多选项卡，每个选项卡中有许多窗口。使用`u`撤消（或`g;`/`g,`移动更改列表），vim 移动*对该*缓冲区所做的更改，即使在其他缓冲区中有最近所做的更改。（我承认，这是我大部分时间想要的。）

但是有没有办法按时间顺序向后移动所有缓冲区的变化？（我想 vim 会从一个选项卡跳到另一个选项卡，这没关系。）

为什么这会有用？......主要是这样当我在休息后恢复编码时，我可以提醒自己“我在做什么”，即我上次所做的所有更改。

（使用 macvim 7.3）

更新：关于使用 git / mercurial 的回应很有意义（特别感谢`git stash`），但我仍然觉得这个功能很有用，因为它让我按顺序返回最近的更改，使用语法着色，在 vim 内部等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:01:40.483

你可以走很长一段路`undolist`：

```
:bufdo echo expand('%') | undolist 
```

结果，例如对于一个简单的编辑会话：

```
SpiritParser.cpp
number changes  when               saved
     1       1  13:57:51
SpiritParser.h
number changes  when               saved
     1       1  13:57:55 
```

要对所有可见窗口执行此操作，请`windo`使用`bufdo`. 如果您有多个选项卡，请制作

```
:tabdo windo echo expand('%') | undolist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:46:11.350

您应该使用某种版本控制：Git、Mercurial、Subversion 等等……</p>

每天早上，您都可以阅读项目日志并查看以前的提交以查看更改的内容，可以创建分支以处理特定功能，编写干净且描述性的提交消息以更好地了解以前的更改等。

或者你可以做类似的事情`:windo u`。但这听起来很乱。*

# categories - Magento 类别管理器无法正常工作

> ID：10718930
> 
> 赞同：1
> 
> 时间：2012-05-23T11:24:05.257
> 
> 标签：categories, magento-1.6

当我在 magento 中打开类别管理器时，它显示错误并且屏幕看起来像这样

![在此处输入图像描述](../Images/ef6893705960d101990764facf66a845.png)

它出现在我增加了 .htaccess 和 php.ini 文件的内存限制后，因为我在前端得到了一个空白页。增加内存限制后，前端再次正常工作，但上述问题没有解决......

# ios - 更改搜索栏ios的文本颜色

> ID：10718931
> 
> 赞同：8
> 
> 时间：2012-05-23T11:24:08.173
> 
> 标签：ios, uisearchbar

是否可以更改搜索栏的文本颜色？我似乎无权访问 UISearchBarTextField 类...

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T11:34:25.430

首先，您在 中找到子视图`UISearchBar`，然后`UITextField`在子视图中找到然后更改颜色

试试这个代码： -

```
 for(UIView *subView in searchBar.subviews){
            if([subView isKindOfClass:UITextField.class]){
                [(UITextField*)subView setTextColor:[UIColor blueColor]];
            }
        } 
```

适用于 iOS 5 +

```
[[UITextField appearanceWhenContainedIn:[UISearchBar class], nil] setTextColor:[UIColor blueColor]]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-15T06:07:55.760

从 iOS 5 开始，正确的做法是使用外观协议。

例如：

```
[[UITextField appearanceWhenContainedIn:[UISearchBar class], nil] setTextColor:[UIColor blueColor]]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-04T12:45:19.073

您可以像这样设置属性，在您的控制器中调用它。

```
[[UITextField appearanceWhenContainedIn:[self class], nil] setDefaultTextAttributes:@{NSForegroundColorAttributeName:[UIColor whiteColor], NSFontAttributeName:[UIFont systemFontOfSize:14]}]; 
```

*请注意，这将更改控制器中的所有 UITextField

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-01T12:57:55.667

`UISearchBar`自原始帖子以来，原始层次结构发生了变化，`UITextField`不再是直接子视图。下面的代码对`UISearchBar`层次结构没有任何假设。

当您不想在整个应用程序中更改搜索栏的文本颜色时（即使用[appearanceWhenContainedIn](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIAppearance_Protocol/#//apple_ref/occ/intfcm/UIAppearance/appearanceWhenContainedIn:)），这也很有用。

```
/**
 * A recursive method which sets all UITextField text color within a view.
 * Makes no assumptions about the original view's hierarchy.
 */
+(void) setAllTextFieldsWithin:(UIView*)view toColor:(UIColor*)color
{
    for(UIView *subView in view.subviews)
    {
        if([subView isKindOfClass:UITextField.class])
        {
            [(UITextField*)subView setTextColor:color];
        }
        else
        {
            [self setAllTextFieldsWithin:subView toColor:color];
        }
    }
} 
```

用法：

```
[MyClass setAllTextFieldsWithin:self.mySearchBar toColor:[UIColor blueColor]]; 
```

# ruby - Rails 有很多关系

> ID：10718944
> 
> 赞同：0
> 
> 时间：2012-05-23T11:25:00.173
> 
> 标签：ruby, ruby-on-rails-3, mongodb, mongoid

我有两个模型，它们之间有两种关系

```
class Tracking
  include Mongoid::Document

  belongs_to :origin_courier, :class_name => "Courier", foreign_key: "origin_courier_id"
  belongs_to :destination_courier, :class_name => "Courier", foreign_key: "destination_courier_id"

end

class Courier
  include Mongoid::Document

  has_many :origins, class_name: 'Tracking', foreign_key: "origin_courier_id"
  has_many :destinations, class_name: 'Tracking', foreign_key: "destination_courier_id"
end 
```

当我为新创建的跟踪的 origin_courier 分配一个快递时，它运行良好。

```
1.9.3p194 :015 > t = Tracking.new
 => #<Tracking _id: 4fbcc2772cfb397930000003, _type: nil, created_at: nil, updated_at: nil, origin_courier_id: nil, destination_courier_id: nil> 
1.9.3p194 :016 > t.origin_courier = Courier.last
 => #<Courier _id: 4fbcbb072cfb397657000004, _type: nil, created_at: 2012-05-23 10:25:11 UTC, updated_at: 2012-05-23 10:25:11 UTC> 
1.9.3p194 :017 > t
 => #<Tracking _id: 4fbcc2772cfb397930000003, _type: nil, created_at: nil, updated_at: nil, origin_courier_id: BSON::ObjectId('4fbcbb072cfb397657000004'), destination_courier_id: nil> 
1.9.3p194 :018 > t.save
 => true 
1.9.3p194 :019 > t
 => #<Tracking _id: 4fbcc2772cfb397930000003, _type: nil, created_at: 2012-05-23 10:57:14 UTC, updated_at: 2012-05-23 10:57:14 UTC, origin_courier_id: BSON::ObjectId('4fbcbb072cfb397657000004'), destination_courier_id: nil> 
```

但是，当我为新创建的跟踪的 destination_courier 分配一个快递时，它会将值复制到 origin_courier

```
1.9.3p194 :020 > t2 = Tracking.new
 => #<Tracking _id: 4fbcc3002cfb397930000004, _type: nil, created_at: nil, updated_at: nil, origin_courier_id: nil, destination_courier_id: nil> 
1.9.3p194 :021 > t2.destination_courier = Courier.last
 => #<Courier _id: 4fbcbb072cfb397657000004, _type: nil, created_at: 2012-05-23 10:25:11 UTC, updated_at: 2012-05-23 10:25:11 UTC> 
1.9.3p194 :022 > t2.save
 => true 
1.9.3p194 :023 > t2
 => #<Tracking _id: 4fbcc3002cfb397930000004, _type: nil, created_at: 2012-05-23 11:00:39 UTC, updated_at: 2012-05-23 11:00:39 UTC, origin_courier_id: BSON::ObjectId('4fbcbb072cfb397657000004'), destination_courier_id: BSON::ObjectId('4fbcbb072cfb397657000004')> 
```

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:27:48.150

（您将新的哈希表示法（1.9.3）与旧的混合在一起`Tracking`）

你试过`inverse_of`代替`foreign_key`吗？

```
class Tracking
  include Mongoid::Document

  belongs_to :origin_courier, class_name: "Courier", inverse_of: :origins
  belongs_to :destination_courier, class_name: "Courier", inverse_of: :destinations

end 
```

和

```
class Courier
  include Mongoid::Document

  has_many :origins, class_name: 'Tracking', inverse_of: :origin_courier
  has_many :destinations, class_name: 'Tracking', inverse_of: :destination_courier
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T02:52:58.700

[https://github.com/mongoid/mongoid/issues/2038](https://github.com/mongoid/mongoid/issues/2038)

It is bug of Mongoid. Durran has fixed it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T15:54:20.410

回声“很奇怪”

以下修改也有效，我提出它只是因为它可能会阐明潜在问题。

```
class Courier
  include Mongoid::Document

  has_many :origin_trackings, class_name: "Tracking", foreign_key: :origin_tracking_id
  has_many :destination_trackings, class_name: "Tracking", foreign_key: :destination_tracking_id
end 
```

但我建议不要使用**foreign_key**，并建议Maxime Garcia 建议使用**inverse_of**。

对于**has_many/belongs_to**，关系只需要在一侧进行跟踪，即使在两侧都定义了关系，所以像 Active Record 一样，Mongoid 为您选择，在这种情况下有效地将单个链接放入 Tracking 实例中，而不是在 Courier 实例中增加一系列链接。

但是对于 Tracking and Courier 的 foreign_key origin_courier_id（或对于 Tracking and Courier 的 foreign_key destination_courier_id）可能发生的冲突不应导致 origin_* 和 destination_* 之间的混淆。我查看了元数据，它仅适用于已设置的链接，元数据看起来还不错。这当然是一个奇怪的问题，如果时间和优先级允许，进一步调查会很有趣。其他人对 Mongoid 内部结构有一些见解或知识吗？

# c# - 如果在 WPF 中的 selectionchanged 事件中弹出消息框，则不会填充 ComboBox

> ID：10718949
> 
> 赞同：0
> 
> 时间：2012-05-23T11:25:37.910
> 
> 标签：c#, .net, wpf

我的 WPF 应用程序中有一个复选框。选择更改时，`ComboBox`应显示模态窗口。但所选项目未反映在`ComboBox`. 我用谷歌搜索并找到了使用 Dispatched 的解决方案。但是有没有其他方法可以做到这一点？

我提到[了在 ComboBox 下拉列表后面弹出的 MessageBox](https://stackoverflow.com/questions/8126911/messagebox-pops-up-behind-combobox-drop-down-list-obscuring-content-in-messageb) ，为调度程序隐藏了 MessageBox 中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:18:50.220

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">

    <StackPanel>
        <ComboBox DropDownClosed="ComboBox_DropDownClosed">
            <sys:String>A</sys:String>
            <sys:String>B</sys:String>
            <sys:String>C</sys:String>
        </ComboBox>
    </StackPanel>
</Window> 
```

后面的代码：

```
using System;
using System.Windows;
using System.Windows.Controls.Primitives;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void ComboBox_DropDownClosed(object sender, EventArgs e)
        {
            MessageBox.Show((sender as Selector).SelectedItem.ToString());
        }
    }
} 
```

# c# - C#获取当前目录的真实路径

> ID：10718956
> 
> 赞同：2
> 
> 时间：2012-05-23T11:26:24.697
> 
> 标签：c#, file, file-io, path

我有一个项目，使用 Visual Web Developer 2008 构建。我希望能够提取（使用 C#）项目现在所在的当前文件夹。直到现在我不得不硬编码真正的路径。

这个项目托管在我的电脑上。

例如，我要生成的路径：

```
C:\Users\Guy\Desktop\Project 
```

谢谢！盖伊

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T11:28:36.367

基础程序集解析器目​​录：

```
AppDomain.CurrentDomain.BaseDirectory; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:28:12.043

最安全的方法：

```
string temp = Path.GetDirectoryName(Assembly.GetExecutingAssembly().CodeBase); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-21T02:13:53.503

如果你只是阅读，那么

```
Path.GetDirectoryName(Assembly.GetExecutingAssembly().CodeBase); 
```

作品。但是，如果您想写信，那么您必须使用：

```
AppDomain.CurrentDomain.BaseDirectory; 
```

或者你会得到一个

```
{"URI formats are not supported."} 
```

例外，因为您的路径是

```
file:\\C:\\Projects\ 
```

代替

```
C:\\Projects 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T11:29:18.753

要将页面（或虚拟目录）映射到文件系统位置（在运行时），您可以使用`Server.MapPath("/")`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T11:30:38.800

采用：

```
Path.GetDirectoryName(Assembly.GetExecutingAssembly().CodeBase); 
```

# php - PHP中字符串的int转换混淆

> ID：10718968
> 
> 赞同：1
> 
> 时间：2012-05-23T11:27:16.560
> 
> 标签：php, integer

我无法获得 $data 的确切值，我将其转换为整数，

```
<?php

$data = '9999999999';
echo $datan = (int) $data;

?> 
```

如何从**$datan获得****$data**的确切值？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:30:37.893

来自 PHP 文档：

> 整数的大小取决于平台，尽管通常值约为 20 亿的最大值（即 32 位有符号）。64 位平台的最大值通常约为 9E18。PHP 不支持无符号整数。自 PHP 4.4.0 和 PHP 5.0.5 起，可以使用常量 PHP_INT_SIZE 确定整数大小，使用常量 PHP_INT_MAX 确定最大值。

[http://php.net/manual/en/language.types.integer.php](http://php.net/manual/en/language.types.integer.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:31:48.533

检查`PHP_INT_MAX`您的系统。

如果您得到`2147483647`，则表示`PHP_INT_MAX`在`2147483647`您的系统中（32 位签名）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:33:15.073

检查你`PHP_INT_MAX`。它可能低于`9999999999`**

# php - 在同一个 Web 上提供不同的 XML 内容

> ID：10718969
> 
> 赞同：0
> 
> 时间：2012-05-23T09:32:59.020
> 
> 标签：php, redirect

我不知道这是否适合问这个问题，所以如果我做错了，我很抱歉。我认为这不是一个重复的问题。如果是的话，我也很抱歉。

目前，我有一个 Web 应用程序，它从一个独特的 XML 文档中获取其内容。URL 是“http://webapp.com/”

问题是现在我必须创建使用新的不同 XML 文档的 Web 的第二个版本，所以我必须为它们放置不同的 URL，如下所示：

[http://webapp.com/activities](http://webapp.com/activities)
[http://webapp.com/stages](http://webapp.com/stages)

我怎样才能将所有源代码放在服务器端的一个目录中（我想维护起来更好，资源缓存得更好，等等）但是这两个 URL 指向文件夹并使 PHP 加载 XML取决于网址？

我想我必须更改 .htaccess 文件以重定向到该文件夹​​，但我怎样才能知道我必须加载哪些 XML？并且用户必须在搜索栏上看到他使用的 URL，例如“http://webapp.com/activities”

有人可以帮我吗？谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:32:54.930

您可以使用 .htaccess 规则将 URL 重定向`http://webapp.com/{anything}`到`http://webapp.com/?q={anything}`. 然后在您的脚本中，您可以编写基于`$_GET['q']`和加载不同 XML 的条件。那就是如果我正确理解你的问题。

# php - 显示 1 insted of 01，带有用于波斯数字的 PHP 包

> ID：10718970
> 
> 赞同：0
> 
> 时间：2012-05-23T11:27:24.127
> 
> 标签：php, function, numbers, persian

有一个函数可以将英语标准数字转换为波斯语（波斯语）或阿拉伯语数字：

```
function farsinum($str){
  if (strlen($str) == 1){
    $str = "0".$str;
    $out = "";
    for ($i = 0; $i < strlen($str); ++$i) {
      $c = substr($str, $i, 1); 
      $out .= pack("C*", 0xDB, 0xB0 + $c);
    }
  }
  return $out;
} 
```

但是这个函数产生**01 02 03** ... 而不是**1 2 3** ... 我认为这里必须改变一些东西：

```
$out .= pack("C*", 0xDB, 0xB0 + $c); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:57:20.757

此函数将转换单个数字：

```
function farsinum ($digit) {
  return pack("C*", 0xDB, 0xB0 + substr($digit, 0, 1));
} 
```

如果你想转换一个大于 9 的数字，一个简单的循环将解决这个问题：

```
function farsinum ($number) {

  // Work with a string so we can use index access
  $number = (string) $number;

  // We'd better add some error checking, to make sure we only accept digits
  if (!ctype_digit($number)) return FALSE;

  // Loop characters and convert them
  for ($i = 0, $out = '', $length = strlen($number); $i < $length; $i++) {
    $out .= pack("C*", 0xDB, 0xB0 + $number[$i]);
  }

  // Return the result
  return $out;

} 
```

我找不到资源来解释负数和浮点数如何在波斯语文本中表示，如果您需要这样做，请告诉我您希望输出的外观，我会试一试。

# objective-c - 在 Objective-C 中通过 GET 方法发送 JSON

> ID：10718971
> 
> 赞同：2
> 
> 时间：2012-05-23T11:27:32.840
> 
> 标签：objective-c, ios, json, ipad, get

> **可能重复：**
> [iPhone SDK Xcode 4.2 iOS 5-如何将 json 发送到 url？（POST 和 GET）[已解决]](http://stackoverflow.com/questions/7673127/iphone-sdk-xcode-4-2-ios-5-how-do-i-send-a-json-to-url-post-and-get-resolv)

我有一个看似简单的问题。我正在尝试使用 JSON 将数据从我的 iPad 设备发送到服务器。问题是，我看到的所有关于将 JSON 发送到服务器的教程都使用 POST 方法。我的问题是，是否可以使用 GET 方法发送 JSON？如果您能给我一些有关如何操作的指示，那将非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:35:14.593

你真的应该说服你的老板要么在 POST 的正文中使用 JSON，要么以 GET 的形式使用 GET 参数：

```
http://www.example.com/?Argument1=Wert1&Argument2=Wert2 
```

但是如您所见，GET 示例不会采用 JSON 的形式。实际上，可以定义一个自定义标头，将您的 json 数据放入其中。但我强烈建议您不要这样做，因为恕我直言，这不是正确的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:28:58.163

这很简单。JSON 实际上是通过 QueryString 参数发送的。例如要发送字典，请使用以下 URL 格式

```
http://www.mywebsite.com/service.php?data={"key":"value", "key":"value"} 
```

或字典数组

```
http://www.mywebsite.com/service.php?data=[{"key":"value"}, {"key":"value"}] 
```

确保正确转义 url 字符串

# iphone - 关于应在 iphone 中动态显示的地图针点

> ID：10718977
> 
> 赞同：-2
> 
> 时间：2012-05-23T11:27:44.450
> 
> 标签：iphone, web-services, map

大家好，我有一个地图视图，我必须根据纬度和经度在地图上放置图钉地图上应仅通过 Web 服务反映在 Web 应用程序中的任何图钉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:58:07.650

试试这个代码：- 在 storeListArr 中存储来自 Web 服务的值

```
-(void)loadingMap
{
    [self.mapView setMapType:MKMapTypeStandard];
    [self.mapView setZoomEnabled:YES];
    [self.mapView setScrollEnabled:YES];

    NSLog(@"storeListArr = %@",storeListArr);

    for(int i=0; i<[storeListArr count];i++)
    {
        MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };

        region.center.latitude = [[[storeListArr objectAtIndex:0] objectForKey:@"lat"] floatValue];
        region.center.longitude = [[[storeListArr objectAtIndex:0] objectForKey:@"long"] floatValue];
        region.span.longitudeDelta = .05f;
        region.span.latitudeDelta =  .05f;

        [self.mapView setRegion: region    animated:YES];

        MyAnnotations *ann = [[MyAnnotations alloc] init];
        NSString *str=[[storeListArr objectAtIndex:i] objectForKey:@"store_name"];
         NSLog(@"Address %@",storeAddress);

        ann.title = str;
        ann.coordinate = region.center;
        [self.mapView addAnnotation:ann];
    }

    [self.mapView setDelegate:self];
} 
```

用于呼叫

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{  
     NSLog(@"MKAnnotationView");
    MKPinAnnotationView *pinView = nil;

    if(annotation != mapView.userLocation)
    {
        static NSString *defaultPinID = @"com.invasivecode.pin";
        pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];

        if ( pinView == nil )

        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];
        pinView.canShowCallout = YES;
        UIImage *flagImage = [UIImage imageNamed:@"MapPin.png"];
        pinView.image = flagImage;
        pinView.opaque = NO;

        UIButton *rightButton = [[UIButton alloc]initWithFrame:CGRectMake(0.0f,0.0f,28.0f,30.0f)];
        [rightButton setImage:[UIImage imageNamed:@"MapArrow"] forState:UIControlStateNormal];

        for (int i =0 ; i< [storeListArr count]; i++) 
        {

            if ([[[storeListArr objectAtIndex:i] objectForKey:@"lat"]  floatValue] == pinView.annotation.coordinate.latitude) 
            {
                UIImageView *img = [[UIImageView alloc]initWithFrame:CGRectMake(0.0f, 0.0f, 30.0f, 30.0f)];
                if([[storeListArr objectAtIndex:i] objectForKey:@"imageUrl"])
                {
                [img setImage:[[storeListArr objectAtIndex:i] objectForKey:@"imageUrl"]];

                }
                pinView.leftCalloutAccessoryView =img;

                [rightButton addTarget:self
                                action:@selector(showStoreDetail:)
                      forControlEvents:UIControlEventTouchUpInside];
                pinView.rightCalloutAccessoryView = rightButton;
            }
        }

    }
    else
        [mapView.userLocation setTitle:@"Current Location"];

       return pinView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:41:37.367

**向地图添加注释的清单**

在基于地图的应用程序中实现和使用注释的步骤如下所示。这些步骤假设您的应用程序在其界面的某处合并了一个 MKMapView 对象。

**1.** 使用以下选项之一定义适当的注释对象：

使用*MKPointAnnotation*类来实现一个简单的注解。这种类型的注释包含用于指定要在注释的屏幕标注气泡中显示的标题和副标题字符串的属性。 *(OR)* 定义一个符合 MKAnnotation 协议的自定义对象，如“定义自定义注释对象”中所述。这种类型的注解可以存储你想要的任何类型的数据。

**2.** 定义注释视图以在屏幕上显示数据。如何定义注释视图取决于您的需要，可能是以下之一：

如果注解可以用静态图像表示，则创建 MKAnnotationView 类的实例并将图像分配给它的 image 属性；请参阅“使用标准注释视图”。 *（或）* 如果要使用标准引脚注释，请创建*MKPinAnnotationView*类的实例；请参阅“使用标准注释视图”。如果静态图像不足以表示您的注释，则子类化 MKAnnotationView 并实现呈现它所需的自定义绘图代码。

**3.**在您的地图视图委托中 实现*mapView:viewForAnnotation:方法。*如果现有注释视图存在，则此方法的实现应使现有注释视图出列或创建一个新视图。如果您的应用程序支持多种类型的注释，则必须在此方法中包含逻辑，以便为提供的注释对象创建适当类型的视图。

**4.** 使用 addAnnotation: 或 addAnnotations: 方法将注释对象添加到地图视图。

请参阅[此处以](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/LocationAwarenessPG.pdf)获取完整参考。

# eclipse-plugin - 是否可以在 gef 中生成 XML 文件

> ID：10718978
> 
> 赞同：0
> 
> 时间：2012-05-23T11:27:47.210
> 
> 标签：eclipse-plugin, eclipse-emf, eclipse-gef, eclipse-gmf

是否可以从 GEF 中的 Shape 示例生成 XML 文件，与在 GMF 中生成的相同？就像在 GMF 中一样，如果我们选择 GMF 设计页面并使用 XML 文件打开它，它会提供有关模型图形的所有外部信息，就像我想用 GEF 生成一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:10:35.863

GEF 与其域模型的持久性方式之间确实没有任何联系。

这里有两种可能的解决方案： 1\. 如果您的域模型是纯 Java 对象 (POJO)，请尝试使用 JAXB，并使用 JAXB 注释对其进行注释。然后使用 JAXB 将它们持久化。2\. 切换到使用 EMF（它将为您提供开箱即用的 XML 序列化）并且可能切换到 GMF。

仅适用于 Shapes Example - 有一个 EMF 驱动的 Shapes Example 可以将模型序列化为 XMI，但可以轻松地将其更改为 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:50:52.793

在 GMF 中，您可以获得自动 XML 序列化，因为 GMF 构建在顶级 EMF 和 GMF 之上，使用 EMF 作为模型，使用 GEF 作为 MVC 框架。只使用 GEF 的编辑器必须按照他们喜欢的方式处理序列化。

# jquery - 在输入键上将焦点从文本框移动到 ajax 组合框

> ID：10718979
> 
> 赞同：0
> 
> 时间：2012-05-23T11:27:47.637
> 
> 标签：jquery, asp.net, ajax

我想将焦点从文本框移动到输入键上的 ajax 组合框

```
 <script type="text/javascript">
    $(document).ready(function () {
        $("#txtGroupSname").keydown(checkForEnter);
        function checkForEnter(event) {

            if (event.keyCode == 13) {
                document.getElementById("cmbUnder").focus();
                return false;
                //$("#cmbUnder").focus();
            }
        }
    }); 
```

txtGroupSname 是我的文本框，而 cmbUnder 是 ajax 组合框。

请有任何想法或建议。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:32:44.930

```
<script type="text/javascript">
$(document).ready(function () {
    $("#txtGroupSname").keydown(
    function checkForEnter(event) {

        if (event.keyCode == 13) {
            document.getElementById("cmbUnder").focus();
            return false;
            //$("#cmbUnder").focus();
        }
    });
}); 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:39:18.320

Asp.net 应用程序为所有元素生成了 clientId。如果您控制客户端 id，而不是您在服务器上的 id，则您在 html 中的 id。

确保您使用的是 clientId。您可能需要使用 RegisterClientScript 方法从 asp.net 发出 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:43:02.500

请先查看这个工作[的 jsfiddle 演示](http://jsfiddle.net/HFGm3/)。

*在此演示中，当您点击输入框内部时，焦点会转到选择框。为确保它已经发生，请尝试按键盘上的向下箭头键以选择不同的选项。*

* * *

通过以下代码修改上面的脚本：

```
$(document).ready(function () {
    $("#txtGroupSname").keydown(function(event) {
      // call checkForEnter function with event as a parameter
      checkForEnter(event);
    });

    function checkForEnter(event) {
        if (event.keyCode == 13) {
            // set focus to select box
            $("#cmbUnder").focus();
            //document.getElementById("cmbUnder").focus();
            return false;
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T06:23:55.853

```
if (e.which == 9 && isShiftKey == true) {
                if (document.getElementById("cmbUnder_OptionList").focus() == true) {
                    document.getElementById("txtGroupSname").focus();
                    StopDefaultAction(e);
                }
            } 
```

使用此代码从组合框移动到文本框上方

# javascript - 定义 jQuery 函数

> ID：10718983
> 
> 赞同：2
> 
> 时间：2012-05-23T11:27:51.343
> 
> 标签：javascript, jquery, html, css, function

以下两个函数按脚本工作，除非我在其周围添加 Function next () {;} 和 function prev () {'} 以定义自定义函数。

我在这里做错了什么？

```
function next() {

       $('#up').click(function() {
       $("#two").prev().animate({height:'80%'}, 500);
       });
    ;}

  function prev() {     
       $('#down').click(function() {
       $("#two").next().animate({height:'80%'}, 500);
       });
 ;} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T11:32:19.143

您`click`在该函数中分配事件，您的意思是在点击事件上调用该函数吗？尝试：

```
$(function () {
   $('#up').click(next); 
   $('#down').click(prev);
});

function next() {
   $("#two").prev().animate({height:'80%'}, 500);
;}

function prev() {     
   $("#two").next().animate({height:'80%'}, 500);
;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:32:37.150

它会工作，你也可以使用 prev(), next() after `$("#two").animate({height:'80%'}, 500);`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-23T11:35:50.190

你不能给

```
height:'80%' 
```

它应该是：

```
height:'80' 
```

'％' 不允许。

# php - Flickr API：如何获取 URL 以共享 Set 中的每张照片

> ID：10718984
> 
> 赞同：0
> 
> 时间：2012-05-23T11:27:53.557
> 
> 标签：php, flickr

在我的本地网络服务器中，我正在尝试生成用于粘贴到我的博客的文本，然后是以下问题： [如何从 flickr URL 获取静态图像 url？](https://stackoverflow.com/questions/1803310/how-to-get-static-image-url-from-flickr-url)

```
<a href="http://www.flickr.com/photos/53067560@N00/2658147888/" title="Chou fleurs by Nicolas de Fontenay, on Flickr">[<img src="https://i.stack.imgur.com/VC7Ng.jpg" width="500" height="375" alt="Chou fleurs">][1] 
```

我认为使用一些 API 函数并将 $variables 指定为：

*   53067560@N00
*   2658147888
*   “Flickr 上 Nicolas de Fontenay 的 Chou fleurs”
*   “ [http://farm4.staticflickr.com/3221/2658147888_826edc8465.jpg](http://farm4.staticflickr.com/3221/2658147888_826edc8465.jpg) ”
*   “500”
*   “375”
*   “周花”

，但不知道如何详细编码。理想情况下，一个函数

```
getFlickrImageURLforGrab(name of Set, # of photos) 
```

ex.) getFlickrImageURLforGrab(myset1, 10) 返回 Set myset1 中显示的前 10 张照片的 URL。你能展示一个简单的php示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:46:33.460

您链接到[flickr.photos.getSizes](http://www.flickr.com/services/api/flickr.photos.getSizes.html)的问题的答案。您还需要查看[flickr.photosets.getPhotos](http://www.flickr.com/services/api/flickr.photosets.getPhotos.html)的文档。

我不将 PHP 与 Flickr 的 API 一起使用，但搜索会出现[phpFlickr](http://phpflickr.com/)，这可能会帮助您完成一些繁重的工作。

# c# - 网格边界/单元格之间的间隙

> ID：10718985
> 
> 赞同：5
> 
> 时间：2012-05-23T11:27:59.863
> 
> 标签：c#, wpf, xaml, grid, cells

我创建了一个`ControlTemplate`包含`Grid`两行的 a 。

可悲的是，单元格之间似乎存在单个像素间隙。

如何消除间隙？

这是显示差距的屏幕截图：

![细胞间隙](../Images/dc6f8a21311c9389bb17d54d09062095.png)

...这是 XAML：

```
<Window x:Class="MAQButtonTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="695" Width="996">        
    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="OverridesDefaultStyle" Value="True"/>
        </Style>
        <ControlTemplate TargetType="Button" x:Key="ButtonTemplate">
            <Grid Width="444" Margin="0" ShowGridLines="False">
                <Grid.RowDefinitions>
                    <RowDefinition Height="51" />
                    <RowDefinition Height="36" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="0" Background="#286c97">
                    <TextBlock>This is the first piece of text</TextBlock>
                </Grid>
                <Grid Grid.Row="1" Background="#5898c0">
                    <ContentPresenter Grid.Row="0" />
                </Grid>
            </Grid>
        </ControlTemplate>
    </Window.Resources>
    <Grid>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid Grid.Column="0" Background="#e9f1f6"></Grid>
        <Grid Grid.Column="1" Background="#d2e3ed">
            <StackPanel>
                <TextBlock FontFamily="Segoe UI" FontSize="22" FontWeight="Medium" Margin="52,58,0,0" Foreground="#0c3d5d">Your Quizzes <TextBlock FontFamily="Segoe UI" FontSize="18" FontWeight="Medium" Foreground="#0c3d5d">(7)</TextBlock></TextBlock>
                <Grid Margin="0,20,0,0">
                    <Button Width="444" Background="{x:Null}" BorderThickness="0" Template="{StaticResource ButtonTemplate}" Click="DoSomething" BorderBrush="#032135">
                        <TextBlock Margin="6,2.8,0,0" FontFamily="Segoe UI" FontSize="19" Foreground="#032135" FontWeight="Medium">This is a second piece of text</TextBlock>
                    </Button>
                </Grid>
            </StackPanel>
        </Grid>

    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T11:54:18.163

只需在模板网格中添加**SnapsToDevicePixels="True"**

```
<ControlTemplate TargetType="Button" x:Key="ButtonTemplate">
                <Grid Width="444" Margin="0" ShowGridLines="False" SnapsToDevicePixels="True">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="51" />
                        <RowDefinition Height="36" />
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0" Background="#286c97">
                        <TextBlock>This is the first piece of text</TextBlock>
                    </Grid>
                    <Grid Grid.Row="1" Background="#5898c0">
                        <ContentPresenter Grid.Row="0" />
                    </Grid>
                </Grid>
            </ControlTemplate> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:38:32.030

放

```
SnapsToDevicePixels="True" 
```

在模板或按钮中的网格上，但最好使用 SnapsToDevicePixels="True" 设置器和模板内部样式创建新样式。

# magento - 如果帐单中不允许，需要隐藏“运送到此地址”框：Magento

> ID：10718988
> 
> 赞同：0
> 
> 时间：2012-05-23T11:28:18.690
> 
> 标签：magento, billing

我遇到了一个问题，只有当客户选择特定国家/地区时，我才需要隐藏账单信息底部的单选框“Ship to this Address”。关于如何处理的任何想法？

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:24:14.450

不想听起来讽刺，我会做以下事情：

*   `onchange`从计费国家/地区下拉列表中收听事件
*   如果下拉列表具有适当的值，则隐藏复选框

不需要任何 Magento 特定的东西，务实并从标准 Web 开发的角​​度来处理它。

# asp.net-mvc-3 - 将参数动态传递给 param 标签

> ID：10718991
> 
> 赞同：0
> 
> 时间：2012-05-23T11:28:34.703
> 
> 标签：asp.net-mvc-3, param

我想动态地将值传递给小程序的标签。我以这种方式从会话中获取 ID，并希望将 ID 值分配给小程序

```
var ID = Session[1]; 
```

这是将 ID 值动态传递给小程序的正确值还是有其他更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:30:14.197

对我来说似乎很好：

```
<applet ...
    <param name="someParamName" value="@Session["someKey"]" />
</applet> 
```

# c++ - 我可以绑定到采用默认参数的函数然后调用它吗？

> ID：10718994
> 
> 赞同：24
> 
> 时间：2012-05-23T11:28:43.140
> 
> 标签：c++, c++11, bind, default-arguments

如何绑定到采用默认参数的函数，而不指定默认参数，然后在没有任何参数的情况下调用它？

```
void foo(int a, int b = 23) {
  std::cout << a << " " << b << std::endl;
}

int main() {
  auto f = std::bind(foo, 23, 34); // works
  f();

  auto g = std::bind(foo, 23); // doesn't work
  g();

  using std::placeholders::_1;
  auto h = std::bind(foo, 23, _1); // doesn't work either 
  h();

} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-23T11:40:10.643

基本上，任何时候您编写`foo(x)`编译器都会将其转换为`foo(x, 23);`. 它仅在您实际使用函数名称直接调用时才有效。例如，您不能分配`&foo`给`void(*)(int)`，因为函数的签名是`void(int, int)`。默认参数在签名中不起作用。而且，如果将其分配给`void(*)(int, int)`变量，则有关默认参数的信息将丢失：您无法通过该变量利用默认参数。`std::bind`将 a 存储`void(*)(int, int)`在其内部的某个地方，因此丢失了默认参数信息。

C++ 中无法从函数外部获取参数的默认值，因此在绑定时您只能手动提供默认值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-23T11:44:05.017

我认为您可以使用 lambda 模拟您想要的行为。

类似这样的东西：

```
auto g = [] (){ foo( 23 ); }; 
```

编辑：刚刚检查过，似乎工作正常：http: [//ideone.com/SPSvi](http://ideone.com/SPSvi)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T11:51:51.787

我有两个解决方案：

1 - 您可以重载 foo() 并让它使用默认值调用原始文件：

```
void foo(int a, int b) 
{
    std::cout << a << " " << b << std::endl;
}

inline void foo(int a)
{
    foo(a, 23);
} 
```

2 - 您可以使用静态变量作为默认变量，然后在绑定过程中使用它：

```
static int foo_default_b = 23;
void foo(int a, int b = foo_default_b) 
{
    std::cout << a << " " << b << std::endl;
}

auto g = std::bind(foo, 23, foo_default_b);
g(); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-12-23T14:00:40.947

[这个答案](https://stackoverflow.com/questions/10931846/boostbind-for-a-member-function-with-default-value)与 R. Martinho Fernandes 的答案不一致。您确实可以使用`boost::bind`绑定到默认参数，您只需要放入占位符，如下所示：

```
boost::bind<void (int, int)>(foo, _1, _2)(12); 
```

`foo(12, 23)`正如预期的那样，这将调用。虽然我没有测试这个特定的代码，但我根据上面链接的答案在我的代码中做了类似的事情，它适用于`gcc 4.8.5`.

嗯，我刚刚注意到这是在询问`std::bind`，而不是`boost::bind`。我不知道有什么不同，如果有的话。

# c# - 在 C# 中使用 SQL 根据日期选择数据以从 VFP db 中检索数据

> ID：10718996
> 
> 赞同：0
> 
> 时间：2012-05-23T11:28:48.317
> 
> 标签：c#, visual-foxpro

我们正在使用使用 VFP 数据库的 Abra Suite 软件。我在 C# 中有一个小程序，我想用它从数据库中检索数据并从中生成一个 csv 文件。此时我的问题是根据我在 SQL 语句中指定的日期范围获取数据。下面是我的 SQL 语句，无论出于何种原因，我看到有 2008 年的记录（即 06/09/2008）。我在这里做错了什么？因为当我阅读 SQL 的工作原理时，我应该能够做到“WHERE chkdate BETWEEN '2007-06-01' '2007-06-06'”，但我总是得到“运算符/操作数类型不匹配”，这就是我使用的原因CAST 在我当前的 SQL 语句中。

```
string SelectCmd = "SELECT TOP 100 p_empno, p_fname, p_lname, chknumber, chkamount, CAST(chkdate AS varchar(10)) " +
        "FROM hrpersnl " +
        "INNER JOIN prckhist ON hrpersnl.p_empno = prckhist.empno " +
        "WHERE CAST(chkdate AS varchar(10)) BETWEEN '06/06/2007' AND '06/09/2007' " +
        "ORDER BY p_empno"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:12:46.143

在两个日期之间使用大括号而不是撇号，例如 {06/06/2007} 和 {06/09/2007}

# wpf - 从 TextBlock 投射时 TabItem ISSelected 属性不起作用

> ID：10718998
> 
> 赞同：1
> 
> 时间：2012-05-23T11:28:58.503
> 
> 标签：wpf, tabs

请帮助我，或告诉我方向。我一直在网上搜索这个问题，但找不到答案。我有 TextBlock，通过单击文本块，我将选项卡项添加到选项卡控件中。一切正常，除了 IS Selected= true; 选项卡项未被选中。我必须手动选择它。这是我的代码。

```
var tabControl = (sender as TextBlock).FindParent<TabControl>();

tabControl.Items.Add(new TabItem() { Header = "10 Last Documents", IsSelected = true, Content = rec, Width = 150 }); 
```

从 Button 投射时没关系。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:15:46.680

我无法解释为什么它适用于来自按钮的演员表。但是当您创建 UI 元素并立即想要更改其属性时，我经常看到这种行为。大多数情况下，UI 尚未构建或正在构建中，这会导致阻塞某些消息管道。

这是您的问题的解决方法：您的 UI 是否通过调度程序异步更改，以便系统有足够的时间逐步创建所有内容，并且应该正确处理您的 IsSelected ...。

代码：

```
 Action newTabAction = () => tabControl.Items.Add(new TabItem() { Header = "10 Last Documents", IsSelected = true, Width = 150 });
  Dispatcher.BeginInvoke(newTabAction); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:46:14.090

这也应该有效：

```
tabControl.Items.Add(new TabItem() { Header = "10 Last Documents", Content = rec, Width = 150 });
tabControl.SelectedIndex = tabControl.Items.Count - 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-15T20:30:20.343

我知道这很旧，但以防万一有人遇到这个问题，我在单击图像时发现了类似的问题。我发现 mousedown 会导致类似的问题，即激活选项卡不起作用，但是当切换到 mouseup 时它开始工作。