# StackOverflow 问答 11889000-11889999

# c# - 无法访问所有方法（或在 XAML 中引用方法失败）？

> ID：11889001
> 
> 赞同：0
> 
> 时间：2012-08-09T17:41:23.673
> 
> 标签：c#, wpf, xml

在我的 WPF 应用程序中，用户可以通过右键单击来选择命令。现在，我创建了一个按钮，并希望将此方法与该按钮相关联。

到目前为止我做了什么：

在 XAML 文件中，我有：

`<Button Content="Run Compare" Command="{x:Static RunCompare_Exectued}"></Button>`

然后在 ResourceDirectory 部分中，我试图引用我的文件，其中包含该方法为

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:myMethods="**Nothing Comes up here!!!**"
                    > 
```

通常我会按住*Ctrl 并点击空格*键，但没有显示任何内容，然后我尝试输入 clr-namespace:FileNameConatiningMethod ...但我收到错误消息：

**未定义的 CLR 命名空间。“clr-namespace” URI 指的是程序集中未包含的命名空间“Application.Commands”。**

任何帮助将不胜感激。

谢谢。

编辑：

我可以访问具有方法 A 和 B 的文件之一，但是，我无权访问不同源文件中的方法 C 和 D。通过在 XAML 文件的根标记中添加命名空间不应该可以吗？

假设我的命名空间是 ABC，所以我有：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:s="clr-namespace:ABC"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:21:51.783

请对照我在[MSDN](http://msdn.microsoft.com/en-us/library/bb613547.aspx)上找到的方法检查您的方法。

还请检查您的代码是否正在编译并且没有程序集引用冲突。

```
<ResourceDictionary 
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:system="clr-namespace:System;assembly=mscorlib">

  <!-- String resource that can be localized -->
  <system:String x:Key="localizedMessage">en-US Message</system:String>

</ResourceDictionary>

<Application.Resources>
  <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
      <ResourceDictionary Source="StringResources.xaml" />
    </ResourceDictionary.MergedDictionaries>
  </ResourceDictionary>
</Application.Resources> 
```

# android - Android 数据库 - 从服务器写入和读取

> ID：11889009
> 
> 赞同：0
> 
> 时间：2012-08-09T17:41:41.160
> 
> 标签：android, database

我需要设计一个 Android 应用程序，将数据库存储在设备上，并将该数据库的副本存储在服务器上。此应用程序还需要能够根据用户名、日期和其他三个参数查询信息。解决这个问题的最简单方法是什么？我是编程新手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:02:07.270

*   要在您的设备中创建数据库，您可以使用 Sqlite.Refer [Android Documentation for Storage](http://developer.android.com/guide/topics/data/data-storage.html#db)。
*   还要在您的服务器上创建此数据库的副本并同步这些服务器数据库和本地数据库。
*   （或）您可以使用[同步到云](http://developer.android.com/training/cloudsync/index.html)谷歌云存储并同步本地设备数据库和云数据库。

# ssis - 仅在转换失败时重定向错误行

> ID：11889010
> 
> 赞同：0
> 
> 时间：2012-08-09T17:41:55.580
> 
> 标签：ssis, data-conversion, dataflowtask

我在 ssis 中有一个数据转换任务，其中我正在更改列的数据类型并将错误输出配置为“重定向行”。

但是当我运行包时，我得到了这个，即使没有失败行，它也会执行成功和失败部分：

![在此处输入图像描述](../Images/229adfa80d51424ecd8ab6164bdd1827.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:53:41.120

正确，但仅仅因为它是绿色的并不意味着任何行都去了那里。它是绿色的，因为它已经成功并且零行沿着这条路走。

# java - 如何操作颜色值？

> ID：11889011
> 
> 赞同：1
> 
> 时间：2012-08-09T17:42:01.260
> 
> 标签：java, swing, colors, jtable, jcolorchooser

我创建了一个表，其中一个参数是颜色，就像这样

[![桌子](../Images/fdf1f112e25b4c297261a50a8829d077.png)](https://i.stack.imgur.com/Tej2A.png)

我没有从我创建的表模型中覆盖 getValue 方法，这意味着当我获得颜色值时，它们以对象的形式出现。如果我将它们存储为对象或字符串，我将得到如下值：

```
java.awt.Color[r=255,g=0,b=0] 
```

这是我的表格模型，以防万一：

```
private static final Object[][] DATA = {
     { "1", "Task 1", new Integer(10), false, new Integer(0), Color.red },
     { "2", "Task 2", new Integer(10), false, new Integer(0), Color.blue },
     { "3", "Task 3", new Integer(10), false, new Integer(0),
           Color.green },
     { "4", "Task 4", new Integer(10), false, new Integer(0),
           Color.orange },
     { "5", "Task 5", new Integer(10), false, new Integer(0),
           Color.black } };

 private MyTableModel myTableModel = new MyTableModel(DATA);

class MyTableModel extends DefaultTableModel {
private static final String[] COLUMN_NAMES = { "Station #", "Name",
     "avg Time", "Buffer", "Buffer Parts", "Color" };

public MyTableModel(Object[][] data) {
  super(data, COLUMN_NAMES);
}

@Override
public Class getColumnClass(int c) {
    //System.out.println("Class for " + c + ": " + getValueAt(0, c).getClass().toString());
    return getValueAt(0, c).getClass();        
}

@Override
public boolean isCellEditable(int row, int col) {

  if (col == 0) {
     return false;
  } else if (col == 4) {
     boolean di = (Boolean) getValueAt(row, (col - 1));
     if (!di) {
        return false;
     } else {
        return true;
     }
  } else {
     return true;
  }
}

public void printDebugData() {
  int numRows = getRowCount();
  int numCols = getColumnCount();

  for (int i = 0; i < numRows; i++) {
     System.out.print("    row " + i + ":");
     for (int j = 0; j < numCols; j++) {
        Object datum = getValueAt(i, j);
        // System.out.print("  " + data[i][j]);
        System.out.print("  " + datum);
     }
     System.out.println();
  }
  System.out.println("--------------------------");
 }
} 
```

表中的所有值都存储在哈希图中，这些值传递给另一个类，我需要在其中创建一个颜色向量左右来存储表上设置的颜色。

```
Station 1=[1, Task 1, 10, false, 0, java.awt.Color[r=255,g=0,b=0]]
Station 2=[2, Task 2, 10, false, 0, java.awt.Color[r=0,g=0,b=255]]
Station 3=[3, Task 3, 10, false, 0, java.awt.Color[r=0,g=255,b=0]]
Station 4=[4, Task 4, 10, false, 0, java.awt.Color[r=255,g=200,b=0]]
Station 5=[5, Task 5, 10, false, 0, java.awt.Color[r=0,g=0,b=0]] 
```

我环顾四周，但找不到任何信息，那么处理它的最佳方法是什么，以便我可以存储要与传递的值一起使用的颜色？

我希望我说清楚了，如果需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T17:48:50.080

您从中获得的值`getValueAt()`是实际`java.awt.Color`对象；只是方法的返回类型是`Object`. 您需要转换*值*：

```
Color color = (Color) tableModel.getValueAt(0, 5); 
```

现在你有了一个`Color`指向对象的变量，你可以用它做任何你想做的事情。

# android - 在 Android WebView 中获取 HTTP 状态码

> ID：11889020
> 
> 赞同：33
> 
> 时间：2012-08-09T17:42:36.923
> 
> 标签：android, http, android-webview

我正在开发一个在 WebView 中加载网站的 Android 应用程序，但有时该网站会返回 HTTP 代码 500。

我的问题是：有什么方法可以从带有侦听器或其他类的 WebView 获取 HTTP 状态代码？

我尝试实现 WebViewClient，但无法获取 WebView 收到的 HTTP 状态代码。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-23T17:14:40.837

这是不可能的（截至我写这篇文章的时候）。的文档`onReceiveError()`充其量是模棱两可的，但你看看这个问题，

> [http://code.google.com/p/android/issues/detail?id=968](http://code.google.com/p/android/issues/detail?id=968)

很明显，HTTP 状态代码不会通过该机制报告。开发人员如何编写却`WebView`无法检索 HTTP 状态代码真的让我大吃一惊。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-21T16:41:50.637

您可以使用 ajax 加载内容，然后使用 loadDataWithBaseURL 将其放入 webview。

创建一个这样的网页

```
<script type="text/javascript">
    function loadWithAjax() {
        var httpRequest = new XMLHttpRequest();
        var path = 'PATH';
        var host = 'HOST';
        var url = 'URL';

        httpRequest.onreadystatechange = function(){
            if (httpRequest.readyState === 4) { 
                if (httpRequest.status === 200) {
                    browserObject.onAjaxSuccess(host, url, httpRequest.responseText);
                } else {
                    browserObject.onAjaxError(host, url, httpRequest.status);
                }
            }
        };

        httpRequest.open('GET', path, true);
        httpRequest.send(null);
    }
</script>
<body onload="loadWithAjax()"> 
```

**browserObject**是注入到 javascript 中的 java 对象。

```
addJavascriptInterface(this, "browserObject"); 
```

并将其加载到 webView 中。您应该用您的值替换 path/url。

```
ajaxHtml = IOUtils.toString(getContext().getAssets().open("web/ajax.html"));
            ajaxHtml = ajaxHtml.replace("PATH", path);
            ajaxHtml = ajaxHtml.replace("URL", url);
            ajaxHtml = ajaxHtml.replace("HOST", host);

loadDataWithBaseURL(host, ajaxHtmlFinal, "text/html", null, null); 
```

然后像这样处理 onAjaxSuccess/onAjaxError：

```
 public void onAjaxSuccess(final String host, final String url, final String html)
    {
        ((Activity) getContext()).runOnUiThread(new Runnable()
        {
            @Override
            public void run()
            {
                loadDataWithBaseURL(url, html, "text/html", null, null);
            }
        });
    }

    public void onAjaxError(final String host, final String url, final int errorCode)
    {

    } 
```

现在您可以处理 http 错误。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-02-25T15:22:35.977

您可以覆盖方法 onReceivedHttpError 并且在那里您可以看到状态代码：

```
@Override
public void onReceivedHttpError(WebView view, WebResourceRequest request, WebResourceResponse errorResponse) {
    super.onReceivedHttpError(view, request, errorResponse);
    int statusCode = errorResponse.getStatusCode();
    // TODO: dou your logic..
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-26T18:24:43.343

看起来这可以通过 Android M API ( [https://code.google.com/p/android/issues/detail?id=82069#c7](https://code.google.com/p/android/issues/detail?id=82069#c7) ) 中的新回调实现。

> void onReceivedHttpError（WebView 视图、WebResourceRequest 请求、WebResourceResponse 错误响应）

不幸的是，这很可能在 Android M 之前的设备中不可用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-06T17:16:02.747

实际上，检查 HTTP 状态以查看内容是否可加载到 webview 中并不算太糟糕。假设：您已经设置了 webview，并且您拥有目标 URL 的字符串，然后......

```
 AsyncTask<Void, Void, Void> checkURL = new AsyncTask<Void, Void, Void>() {
        @Override
        protected void onPreExecute() {
            pd = new ProgressDialog(WebActivity.this, R.style.DickeysPDTheme);
            pd.setTitle("");
            pd.setMessage("Loading...");
            pd.setCancelable(false);
            pd.setIndeterminate(true);

            pd.show();
        }
        @Override
        protected Void doInBackground(Void... arg0) {
            // TODO Auto-generated method stub
            int iHTTPStatus;

            // Making HTTP request
            try {
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpGet httpRequest = new HttpGet(sTargetURL);

                HttpResponse httpResponse = httpClient.execute(httpRequest);
                iHTTPStatus = httpResponse.getStatusLine().getStatusCode();
                if( iHTTPStatus != 200) {
                    // Serve a local page instead...
                    wv.loadUrl("file:///android_asset/index.html");
                }
                else {

                    wv.loadUrl(sTargetURL);     // Status = 200 so we can loard our desired URL
                }

            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
                // Show a toast for now...
                Toast.makeText(WebActivity.this, "UNSUPPORTED ENCODING EXCEPTION", Toast.LENGTH_LONG).show();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
                // Show a toast for now...
                Toast.makeText(WebActivity.this, "CLIENT PROTOCOL EXCEPTION", Toast.LENGTH_LONG).show();

            } catch (IOException e) {
                e.printStackTrace();
                // Show a toast for now...
                Toast.makeText(WebActivity.this, "I/O EXCEPTION", Toast.LENGTH_LONG).show();

            }  catch (Exception e) {
                e.printStackTrace();
                // Show a toast for now...
                Toast.makeText(WebActivity.this, "GENERIC EXCEPTION", Toast.LENGTH_LONG).show();

            }

            return null;
        }

    };

    checkURL.execute((Void[])null); 
```

在其他地方，在 WebViewClient 中，关闭进度对话框

```
@Override  
    public void onPageFinished(WebView view, String url)  
    {
        // Do necessary things onPageFinished
        if (pd!=null) {
            pd.dismiss();
        }

    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-10T19:21:37.773

At this time you cannot get normal *HTTP* response code.

But as solution, if is possible to you to modify webapp server side, to use following:

On the server create some *JavaScript* function, let's say, `riseHttpError`.

On android side use *JavaScript* interface and when you need to tell android to handle http error, just call `Android.riseHttpError()` on server.

Android will handles this function and you will be able to do required actions on android side.

In my solution were required to get errors. You can send any code you want. :)

Of course, this is just another variation how to do it. So, probably there is others, much better solutions.

But if you can modify server side, I think, this will be better to do double request using `URLHandler`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-09T19:48:01.613

我认为不可能从 webView 以简单的方式（如果可能的话）获取状态代码。

我的想法是使用 WebViewClient 中的 onReceivedError() 方法（如您所说），并在 WebViewClient 中定义错误（此处提供了完整的错误列表：http: [//developer.android.com/reference/android/webkit/WebViewClient.html](http://developer.android.com/reference/android/webkit/WebViewClient.html)）并假设例如 504 状态代码等于 WebViewClient.ERROR_TIMEOUT 等。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-05-10T17:44:00.177

您应该在页面完成后使用它

```
@Override 
public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error){
    //Your code to do
    Toast.makeText(
        getActivity(), 
        "Your Internet Connection May not be active Or " + error,
        Toast.LENGTH_LONG
    ).show();
} 
```

# actionscript-3 - 在 AS3 中生成随机坠落物体

> ID：11889023
> 
> 赞同：0
> 
> 时间：2012-08-09T17:42:59.430
> 
> 标签：actionscript-3, flash, loops

我想创建一组随机对象以循环跌落舞台。

到目前为止，我已经创建了一个测试对象以随机 x 坐标下降。我无法弄清楚如何循环下降函数，以便对象的多个实例连续下降。

```
var randomX:Number = Math.random() * 800;

test_mc.x = randomX;
test_mc.y = 0;

var speed:Number = 10;

test_mc.addEventListener(Event.ENTER_FRAME, moveDown);

function moveDown(e:Event):void
{
 e.target.y += speed; 

 if(e.target.y >= 480)
 {
      test_mc.removeEventListener(Event.ENTER_FRAME, moveDown);
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:55:09.743

参考我的落雪效果代码。

雪的起始位置都是随机的，效果几乎和真实的雪落情况一样。如果你跑，你会感到惊讶。

The Snow is My Custom MovieClip（白色圆形，宽 15，高 15）

这是我的演示：[SnowEffect](http://www.swfcabin.com/open/1344529578)

这是我的资料来源：[SnowEffect Down](http://www.datafilehost.com/download-be9b2147.html)

```
this.addEventListener( Event.ENTER_FRAME, onEnter );

function onEnter( e: Event ):void {

    var s: Snow = new Snow();
    s.x=550*Math.random();
    s.y=-20;
    s.width=s.height=1+9*Math.random();// 1 ~ 9

    s.xSpeed=-2+4*Math.random();// -2 ~ 2
    s.ySpeed=1+4*Math.random();// 1 ~ 5

    s.at = -0.001 -0.001*Math.random();
    s.vt = 0;
    this.addChild( s );

    s.addEventListener( Event.ENTER_FRAME, onSnowEnter );
}

function onSnowEnter( e: Event ):void {
    var s:Snow=e.currentTarget as Snow;
    s.x+=s.xSpeed;
    s.y+=s.ySpeed;

    if (s.y>=480) {
        s.addEventListener( Event.ENTER_FRAME, onMeltingEnter );
    }
}

function onMeltingEnter( e: Event ): void {
    var s:Snow=e.currentTarget as Snow;
    this.addChild( s );
    s.removeEventListener( Event.ENTER_FRAME, onSnowEnter );
    s.vt += s.at;
    s.alpha += s.vt;
    if ( s.alpha <=0){
        s.removeEventListener( Event.ENTER_FRAME, onMeltingEnter );
        this.removeChild( s );
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:54:38.783

创建一堆对象，将它们添加到数组中，然后循环遍历数组：

```
var numOfObjects:int = 10;
var fallingObjectArray:Array = [];
var speed:Number = 10;

// Add 10 falling objects to the display and to the array
for(var i:int = 0; i < numOfObjects; i++) {
   var fallingObject:Sprite = new Sprite();
   fallingObject.graphics.beginFill(0xFF0000);
   fallingObject.graphics.drawCircle(0, 0, 15);
   fallingObject.graphics.endFill();
   addChild(fallingObject);
   fallingObject.x = Math.random() * stage.stageWidth;
   fallingObjectArray.push(fallingObject);
}

addEventListener(Event.ENTER_FRAME, moveDown);

function moveDown(e:Event):void
{    
   // Go through all the objects in the array and move them down
   for each(var fallingObject in fallingObjectArray) {
      fallingObject.y += speed;
      // If the object is past the screen height, remove it from display and array
      if(fallingObject.y+fallingObject.height >= stage.stageHeight) {
         removeChild(fallingObject);
         fallingObjectArray.splice(fallingObjectArray.indexOf(fallingObject), 1);
      }
   }
   // Once all objects have fallen off the screen, remove the listener
   if(fallingObjectArray.length <= 0) {
      removeEventListener(Event.ENTER_FRAME, moveDown);
   }
} 
```

上面的代码只是使用红色圆圈——你必须使用你拥有的任何图像（除非你喜欢红色圆圈......）。

# wpf - BindingExpression 的源发生更改时的通知？

> ID：11889025
> 
> 赞同：4
> 
> 时间：2012-08-09T17:43:04.477
> 
> 标签：wpf, data-binding

测试场景：

我有一个带有 DependencyProperty A 的控件。我有一个带有属性 A 的 ViewModel，我使用 OneWayToSource 绑定绑定到控件的 A 属性。Binding 由 Control 显式更新。

我在运行时切换了绑定的 ViewModel 实例，从而更改了我的 Binding 的底层 Source。发生这种情况时，我希望触发一个事件，告诉我的控件我现在可以更新其 DependencyProperty A 的值。原因是，一旦您更改绑定的 ViewModel，DependencyProperty A 的 DefaultValue 就会写入源。相反，我希望控件能够提供适当的值并手动更新源。

有人可能认为只听 DataContextChanged 事件就可以解决问题。但是，当这个事件被触发时，BindingExpression 的源仍然指向旧的 ViewModel。

我能想到的唯一解决方法是在 DataContextChanged 的​​ EventHandler 中使用 Dispatcher.BeginInvoke 和 DispatcherPriority.DataBind 优先级。

它有效，但我觉得不干净。

我正在寻找 Binding 类中的一个事件，该事件通知我源的更改......但是我找不到。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:01:34.340

也许我没有完全理解这个问题，但是您可以只使用[NotifyOnSourceUpdated](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.notifyonsourceupdated.aspx)或[NotifyOnTargetUpdated](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.notifyontargetupdated)属性（以及相应的[SourceUpdated](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.sourceupdated)或[TargetUpdated](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.targetupdated)事件）吗？

# r - 将 POSIXct 日期四舍五入到第二天

> ID：11889027
> 
> 赞同：4
> 
> 时间：2012-08-09T17:43:13.867
> 
> 标签：r, posixct

我有一个类似于[Round a POSIX date (POSIXct) with base R functionality](https://stackoverflow.com/questions/11325631/round-a-posix-date-posixct-with-base-r-functionality)的问题，但我希望始终将日期四舍五入到第二天午夜（00:00:00）。

基本上，我想要一个等效`ceiling`于 POSIX 格式日期的函数。与相关问题一样，我正在编写自己的包，并且我已经有几个包依赖项，所以我不想添加更多。有没有一种简单的方法可以在基础 R 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T17:55:27.357

也许

```
trunc(x,"days") + 60*60*24

> x <- as.POSIXct(Sys.time())
> x
[1] "2012-08-09 18:40:08 BST"
> trunc(x,"days")+ 60*60*24
[1] "2012-08-10 BST" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:00:34.337

一种快速而肮脏的方法是转换为 a `Date`（截断时间），加 1（表示 的一天`Date`），然后转换回`POSIX`第二天的午夜 UTC。正如@Joshua Ulrich 指出的那样，时区/夏令时问题可能会产生您意想不到的结果：

```
as.POSIXct(as.Date(Sys.time())+1)
[1] "2012-08-10 01:00:00 BST" 
```

# javascript - jQuery：根据第一个选择更改第二个下拉列表的选择

> ID：11889030
> 
> 赞同：0
> 
> 时间：2012-08-09T17:43:36.640
> 
> 标签：javascript, jquery, dropdownbox

我有两个下拉列表，当有人从 dropdown1 中选择值 2 时，我想创建它，dropdown2 会自动更改为值 4。

```
<select id="dropdwon1">
<option value="1">Item1</option>
<option value="2">Item2</option>
<option value="3">Item3</option>
</select>

<select id="dropdwon2">
<option value="3">Item1</option>
<option value="4">Item2</option>
<option value="5">Item3</option>
</select> 
```

我已经看到当值相同但当它们不同时如何做到这一点。寻找一个像下面这样的简单解决方案。

```
$("#dropdwon1").change(function(){
$("#dropdwon2").val($(this).val());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:46:53.807

根据您的描述，您似乎想要`selectedIndex`同步。

就是这样：

[jsFiddle 示例](http://jsfiddle.net/zyTck/)

```
$(function() {
    $("#dropdwon1").change(function() {
        $("#dropdwon2")[0].selectedIndex = $(this)[0].selectedIndex;
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:49:46.797

```
$("#dropdwon1").change(function(){
   $("#dropdwon2").val( +this.value + 2 );
}); 
```

**[演示](http://jsfiddle.net/PWzav/4/)**

`+this.value`将转换为数字，以便您可以添加`2`.

**或者**

```
$("#dropdwon1").change(function(){
   $("#dropdwon2").prop('selectedIndex', this.selectedIndex );
}); 
```

**[演示](http://jsfiddle.net/PWzav/5/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:49:55.977

这有效：

```
$('#dropdown1').change(function(){
   var ind = $(this).find('option:selected').index();
   $('#dropdown2 option').eq(ind).prop('selected', true);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-29T07:26:35.147

```
var ac1=$("#dd1").val();
$("#dd2").val(ac1); 
```

# google-apps-script - ScriptDB：遍历整个 DB 会引发异常。我做错了什么吗？

> ID：11889032
> 
> 赞同：0
> 
> 时间：2012-08-09T17:43:40.730
> 
> 标签：google-apps-script

在使用 ScriptDB 服务时，我创建了一个新的独立脚本，其中包含从[文档](https://developers.google.com/apps-script/scriptdb#whats_in_my_database)中获取的以下函数。代码在该行中抛出“ `Unexpected exception upon serializing continuation`”异常。`var results = db.query({});`我做错了什么还是 GAS 问题跟踪器有问题？

```
function showAll() {
  var db = ScriptDb.getMyDb();
  var results = db.query({});

  while (results.hasNext()) {
    var result = results.next();
    Logger.log(Utilities.jsonStringify(result));
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:44:16.987

不要使用调试器：我遇到了同样的问题，并在某处读到调试器会产生此错误。虽然我还没有做太多检查，但我同意这看起来像是一个调试器问题。

也许给问题加注星标：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=1267](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1267)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:53:11.147

是的，我调查了（谷歌搜索）这些持续错误，这似乎是谷歌后端的一个实现问题/限制，当我们作为 IDE 的用户设置断点并单步执行代码时，Rhino 运行时 Javascript 环境能够“暂停”。

我现在确保将调试行写入电子表格。它的设置速度可能较慢，但它可以 100% 工作，并且是良好的工程实践，并且从日志中调试通常比缓慢的逐行逐步执行代码要快。

# reflection - 在 WinRT Metro App C# 中，ConstructorInfo.ReflectedType 在哪里？

> ID：11889033
> 
> 赞同：0
> 
> 时间：2012-08-09T17:43:50.110
> 
> 标签：reflection, microsoft-metro, windows-runtime

它已被删除，我很好奇它是否位于反射 API 中的其他位置。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:57:20.100

删除了大部分反射，包括您提到的成员。这是为了确保通过认证的应用程序不会通过反射调用非公共 API。

# c# - 使用 WPF 中的 .exe 时弹出控件未打开，但在 VS 2010 中运行

> ID：11889036
> 
> 赞同：0
> 
> 时间：2012-08-09T17:43:57.120
> 
> 标签：c#, wpf, popup, exe

我的应用程序中有一个弹出窗口，它由组合框的选定值的更改激活。当我在 VS 2010 中调试时它工作正常，但当我在同一台计算机上使用 .exe 时它不会触发。

在使用 .exe 时，我应该使用弹出窗口的其他属性来使其保持打开状态吗？

```
 private void trigger_mode_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        MODE = trigger_mode.SelectedValue.ToString();
        switch (Convert.ToString(trigger_mode.SelectedValue))
        {
            case "triggerModeData":
                Popup_data.Placement = System.Windows.Controls.Primitives.PlacementMode.Mouse;
                Popup_data.StaysOpen = false;
                Popup_data.Height = 200;
                Popup_data.Width = 250;
                Popup_data.IsOpen = true;
                break;

            case "triggerModeRepeat":
                Popup_repeat.Placement = System.Windows.Controls.Primitives.PlacementMode.Mouse;
                Popup_repeat.StaysOpen = false;
                Popup_repeat.Height = 200;
                Popup_repeat.Width = 250;
                Popup_repeat.IsOpen = true;
                break;
        }
    } 
```

XAML 代码

```
 <Popup x:Name="Popup_repeat" AllowsTransparency="True">
        <StackPanel Background="BurlyWood">
            <TextBlock TextWrapping="Wrap" Name ="T1" Text="Please enter the time interval between triggers in milliseconds"/>
            <TextBox Name="T2" Text="Enter value here" KeyDown="T2_KeyDown"/>
            <TextBlock TextWrapping="Wrap">
                <TextBlock.Text>
                    Detail - In the trigger repeat the camera is triggered periodically with a specific time interval.
                    Please enter the time between each triggers in the textbox above by first deletign the line 'Enter value here'
                    and put the time interval value in milliseconds.
                </TextBlock.Text>
            </TextBlock>
        </StackPanel>
    </Popup>
    <Popup x:Name="Popup_data" AllowsTransparency="True">
        <StackPanel Background="BurlyWood">
            <TextBlock Name ="T3" TextWrapping="Wrap" Text="Please enter the time to wait after trigger in milliseconds."/>
            <TextBox Name="T4" Text="Enter value here" KeyDown="T4_KeyDown"/>
            <TextBlock TextWrapping="Wrap">
                <TextBlock.Text>
                    Detail - In the data trigger mode the camera waits a certain time after a mechanical pre-trigger and 
                    then sends a trigger to the camera to take a picture after that interval. If you are using this mode. 
                    Enter the time the camera has to wait after the trigger in teh textbox by first deleting the text 
                    'Enter value here' and thentype in the interval time in milliseconds"
                </TextBlock.Text>
            </TextBlock> 
        </StackPanel>
    </Popup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:34:42.483

如果您需要弹出窗口保持打开状态以接收输入，您需要将`StaysOpen`属性设置为`True`. 否则，一旦焦点或激活离开弹出窗口，弹出窗口就会关闭。

# google-chrome-extension - 有什么方法可以从 chrome 标签中删除 X 按钮？

> ID：11889044
> 
> 赞同：71
> 
> 时间：2012-08-09T17:44:25.287
> 
> 标签：google-chrome-extension

有没有办法修改 chrome 标签以删除关闭标签的按钮？

我已通读[chrome developer tab](http://developer.chrome.com/extensions/tabs.html)。但我没有看到任何关于关闭按钮的提及。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-06T16:28:19.157

**如果不分叉整个铬项目，目前是**不可能的。**请参阅[错误报告 #50913](http://code.google.com/p/chromium/issues/detail?id=50913)（状态：） `WontFix`。**

 **可能的解决方法：

1.  如果您右键单击一个选项卡，您可以`Pin Tab`。这将删除关闭按钮，但您仍然可以使用`ctrl`+关闭它`w`。不幸的是，这也会删除窗口标题。
2.  如果选项卡的宽度变得非常小，则会删除关闭按钮。

查看 SuperUser 上的相同问题：[*如何禁用 Google Chrome 选项卡上的关闭 (X) 按钮？*](https://superuser.com/questions/199384/how-to-disable-the-close-x-button-on-google-chrome-tabs).

也许您喜欢查看 Chromium 的[源代码](https://sites.google.com/a/chromium.org/dev/Home)并修复此问题？我认为你必须从[这里开始：`tab.cc`](https://code.google.com/searchframe#OAMlx_jo-ck/src/chrome/browser/ui/views/tabs/tab.cc&l=1567) .

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-12-25T10:16:03.747

**编辑：**以下修复仅适用于 Chrome 版本 69 和 71。

现在可以使用非活动标签！

我在尝试切换选项卡时遇到了很多问题，同时打开了 10-15 个选项卡，不小心关闭了一些重要的选项卡，其中键入了很多文本，这些文本无法通过 Ctrl+Shift+T 恢复

在这里如何做到这一点：

1) 打开 Google Chrome 浏览器，在地址栏中输入以下文本：

```
chrome://flags/#close-buttons-inactive-tabs 
```

这将使用相关设置直接打开标志页面。

2) 在非活动选项卡上设置名为关闭按钮的选项。使用标志名称旁边的下拉列表将其设置为已禁用。

[![2](../Images/8d36ae1ffe75aedd1ea7a81779ddce88.png)](https://i.stack.imgur.com/E4v8r.png)

3) 通过手动关闭谷歌浏览器重新启动它，或者您也可以使用将出现在页面最底部的重新启动按钮。

[![3](../Images/1b355c8d737ede78bec14506d431c9ee.png)](https://i.stack.imgur.com/6ahXT.png)

4) 关闭按钮将从非活动选项卡中消失。

前：

[![前](../Images/52ac4eb22d0335d21dee4b4cebb8da07.png)](https://i.stack.imgur.com/Y0oIX.png)

后：

[![后](../Images/b9e247ad95ced0b507b9122e32fe9a73.png)](https://i.stack.imgur.com/Dl4sa.png)

而已！

来源 - [https://winaero.com/blog/remove-close-buttons-inactive-tabs-google-chrome/](https://winaero.com/blog/remove-close-buttons-inactive-tabs-google-chrome/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-05-16T09:45:37.433

现在有基于 Chromium 的替代浏览器提供此功能 - 我真的很喜欢[Vivaldi](https://vivaldi.com)，其中不显示 X 按钮只是众多自定义选项之一。此外，由于它是基于 Chromium 的，您可以安装和使用任何 Chrome 扩展程序。如果您打开了许多选项卡并且需要更多高级用户类型选项，那就太完美了。**

# r - 将频率和汇总统计信息组合在一张表中？

> ID：11889047
> 
> 赞同：1
> 
> 时间：2012-08-09T17:44:53.023
> 
> 标签：r, plyr

我刚刚发现了 plyr[频率表的强大功能，其中包含 R 中的几个变量，](https://stackoverflow.com/questions/11852408) 我仍在努力理解它是如何工作的，我希望这里的一些可以帮助我。

我想创建一个表（数据框），我可以在其中组合频率和汇总统计信息，但无需对值进行硬编码。

这是一个示例数据集

```
require(datasets)

d1 <- sleep
# I classify the variable extra to calculate the frequencies 
extraClassified <- cut(d1$extra, breaks = 3, labels = c('low', 'medium', 'high') )
d1 <- data.frame(d1, extraClassified) 
```

我正在寻找的结果应该是这样的：

```
 require(plyr)

  ddply(d1, "group", summarise,  
  All = length(ID), 

  nLow    = sum(extraClassified  == "low"),
  nMedium = sum(extraClassified  == "medium"),      
  nHigh =  sum(extraClassified  == "high"),

  PctLow     = round(sum(extraClassified  == "low")/ length(ID), digits = 1),
  PctMedium  = round(sum(extraClassified  == "medium")/ length(ID), digits = 1),      
  PctHigh    = round(sum(extraClassified  == "high")/ length(ID), digits = 1),

  xmean    = round(mean(extra), digits = 1),
  xsd    =   round(sd(extra), digits = 1)) 
```

我的问题：如何在不对值进行硬编码的情况下做到这一点？

记录：我试过这段代码，但它不起作用

```
ddply (d1, "group", 
   function(i) c(table(i$extraClassified),     
   prop.table(as.character(i$extraClassified))),
   ) 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:46:00.807

这是一个帮助您入门的示例：

```
foo <- function(x,colfac,colval){
    tbl <- table(x[,colfac])
    res <- cbind(n = nrow(x),t(tbl),t(prop.table(tbl)))
    colnames(res)[5:7] <- paste(colnames(res)[5:7],"Pct",sep = "")
    res <- as.data.frame(res)
    res$mn <- mean(x[,colval])
    res$sd <- sd(x[,colval])
    res
}

ddply(d1,.(group),foo,colfac = "extraClassified",colval = "extra") 
```

不要把那个功能中的任何东西`foo`当作福音。我只是把它写在我的头上。当然改进/修改是可能的，但至少它是开始的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:18:37.800

感谢乔兰。我稍微修改了您的函数以使其更通用（不参考变量的位置）。

```
require(plyr)
            foo <- function(x,colfac,colval)
            {

              # table with frequencies
              tbl    <- table(x[,colfac])
              # table with percentages 
              tblpct <- t(prop.table(tbl))
              colnames( tblpct) <- paste(colnames(t(tbl)), 'Pct', sep = '')

              # put the first part together 
              res <- cbind(n = nrow(x), t(tbl), tblpct)
              res <- as.data.frame(res)

              # add summary statistics 

              res$mn <- mean(x[,colval])
              res$sd <- sd(x[,colval])
              res
            }

ddply(d1,.(group),foo,colfac = "extraClassified",colval = "extra") 
```

它有效！

PS：我仍然不明白（组）代表什么，但是

# ruby-on-rails - 是否有 Rails 列类型的文档？

> ID：11889048
> 
> 赞同：185
> 
> 时间：2012-08-09T17:44:52.940
> 
> 标签：ruby-on-rails

我正在寻找的不仅仅是[此页面上](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column)的简单类型列表：

> :primary_key, :string, :text, :integer, :float, :decimal, :datetime, :timestamp, :time, :date, :binary, :boolean

但是是否有任何文档实际*定义了*这些字段？

具体来说：

*   `:string`和有什么区别`:text`？
*   之间`:float`和`:decimal`？
*   `:time`、`:timestamp`和的区别特征是`:datetime`什么？

这些类型的细微差别是否记录在任何地方？

编辑：**数据库平台实现的要点与我要问的问题无关。** 比如说，如果`:datetime`在 Rails 文档中没有明确的预期含义，那么 db-adapter-writers 在选择相应的列类型时会怎么做？

* * *

## 回答 #1

> 赞同：401
> 
> 时间：2012-08-10T02:17:29.137

根据个人经验制定的指南：

*   **字符串**：
*   限制为 255 个字符（取决于 DBMS）
*   用于短文本字段（姓名、电子邮件等）
*   **文字**：
*   无限长度（取决于 DBMS）
*   用于评论、博客文章等。一般经验法则：如果它是通过 textarea 捕获的，请使用 Text。对于使用文本字段的输入，请使用字符串。
*   **整数**：
*   整数
*   **浮动**：
*   以浮点精度存储的十进制数
*   精度是固定的，这对于某些计算可能会产生问题；由于舍入不准确，通常对数学运算没有好处。
*   **十进制**：
*   十进制数存储的精度根据您的计算需要而变化；将这些用于需要准确的数学
*   有关浮点数和小数之间差异的示例和深入解释，请参见[这篇文章。](https://stackoverflow.com/questions/3039650/ruby-bigdecimal-sanity-check-floating-point-newb)
*   **布尔值**：
*   用于存储真/假属性（即只有两种状态的事物，如开/关）
*   **二进制**：
*   用于将图像、电影和其他文件以其原始原始格式存储在称为*blob的数据块中*
*   **：首要的关键**
*   这个数据类型是一个占位符，Rails 将其转换为您选择的数据库所需的任何主键数据类型（即`serial primary key`在 postgreSQL 中）。它的使用有些复杂，不推荐使用。
*   使用模型和迁移约束（例如`validates_uniqueness_of`和选项）来模拟您自己的字段之一的主键功能`add_index`。`:unique => true`
*   **日期**：
*   仅存储日期（年、月、日）
*   **时间**：
*   仅存储时间（小时、分钟、秒）
*   **日期**时间：
*   存储日期和时间
*   **时间戳**
*   存储日期和时间
*   注意：对于 Rails 而言，Timestamp 和 DateTime 的含义相同（使用任一类型来存储日期和时间）。对于 TL;DR 说明为什么两者都存在，请阅读底部段落。

这些是经常存在混淆的类型；我希望这有帮助。我真的不知道为什么没有关于这些的官方文档。另外，我想您提到的这些数据库适配器是由编写 Rails 的同一个人编写的，因此他们在编写适配器时可能不需要任何文档。希望这可以帮助！

注意：据我所知，Rails 包含了`:DateTime`和，主要是为了与数据库系统兼容。`:Timestamp`例如，MySQL 的`TIMESTAMP`数据类型存储为 unix 时间戳。[它的有效范围从 1970 年到 2038 年，时间存储为自上一个epoch](http://en.wikipedia.org/wiki/Epoch_%28reference_date%29#Computing)以来经过的秒数，这应该是标准的，但实际上可能因系统而异。MySQL 后来引入了这种`DATETIME`数据类型，它从“1000-01-01 00:00:00”开始存储为秒（从 5.6.4 开始可选小数秒），但代价是[大小增加](https://dev.mysql.com/doc/refman/8.0/en/storage-requirements.html#data-types-storage-reqs-date-time)。这`TIMESTAMP`保留数据类型是为了向后兼容。其他数据库系统也经历了类似的演变。Rails 认识到存在多种标准，并为这两种标准提供了接口。然而，Rails ActiveRecord 将`:Timestamp`和都默认`:DateTime`为存储在 MySql 中的 UTC 日期`DATETIME`，因此它对 Rails 程序员没有功能上的区别。这些存在以便*希望*区分两者的用户可以这样做。（有关更深入的解释，请参阅[此](https://stackoverflow.com/questions/3928275/in-ruby-on-rails-whats-the-difference-between-datetime-timestamp-time-and-da)SO 答案）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-06-06T14:13:10.257

从 Rails 主分支源代码中我发现：

[抽象 mysql_adapter](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/abstract_mysql_adapter.rb)

```
#activerecord/lib/active_record/connection_adapters/abstract_mysql_adapter.rb

  NATIVE_DATABASE_TYPES = {
    primary_key: "bigint auto_increment PRIMARY KEY",
    string:      { name: "varchar", limit: 255 },
    text:        { name: "text", limit: 65535 },
    integer:     { name: "int", limit: 4 },
    float:       { name: "float" },
    decimal:     { name: "decimal" },
    datetime:    { name: "datetime" },
    timestamp:   { name: "timestamp" },
    time:        { name: "time" },
    date:        { name: "date" },
    binary:      { name: "blob", limit: 65535 },
    boolean:     { name: "tinyint", limit: 1 },
    json:        { name: "json" },
  }

  # Maps logical Rails types to MySQL-specific data types.
  def type_to_sql(type, limit = nil, precision = nil, scale = nil, unsigned = nil)
    sql = case type.to_s
    when 'integer'
      integer_to_sql(limit)
    when 'text'
      text_to_sql(limit)
    when 'blob'
      binary_to_sql(limit)
    when 'binary'
      if (0..0xfff) === limit
        "varbinary(#{limit})"
      else
        binary_to_sql(limit)
      end
    else
      super(type, limit, precision, scale)
    end

    sql << ' unsigned' if unsigned && type != :primary_key
    sql
  end    

# and integer ...

  def integer_to_sql(limit) # :nodoc:
    case limit
    when 1; 'tinyint'
    when 2; 'smallint'
    when 3; 'mediumint'
    when nil, 4; 'int'
    when 5..8; 'bigint'
    else raise(ActiveRecordError, "No integer type has byte size #{limit}")
    end
  end

 # and text ..

  def text_to_sql(limit) # :nodoc:
    case limit
    when 0..0xff;               'tinytext'
    when nil, 0x100..0xffff;    'text'
    when 0x10000..0xffffff;     'mediumtext'
    when 0x1000000..0xffffffff; 'longtext'
    else raise(ActiveRecordError, "No text type has byte length #{limit}")
    end
  end

# and binary ...

    def binary_to_sql(limit) # :nodoc:
      case limit
      when 0..0xff;               "tinyblob"
      when nil, 0x100..0xffff;    "blob"
      when 0x10000..0xffffff;     "mediumblob"
      when 0x1000000..0xffffffff; "longblob"
      else raise(ActiveRecordError, "No binary type has byte length #{limit}")
      end
    end 
```

方法_ `super`_`type_to_sql`

```
#activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb
  def type_to_sql(type, limit = nil, precision = nil, scale = nil) #:nodoc:
    type = type.to_sym if type
    if native = native_database_types[type]
      column_type_sql = (native.is_a?(Hash) ? native[:name] : native).dup

      if type == :decimal # ignore limit, use precision and scale
        scale ||= native[:scale]

        if precision ||= native[:precision]
          if scale
            column_type_sql << "(#{precision},#{scale})"
          else
            column_type_sql << "(#{precision})"
          end
        elsif scale
          raise ArgumentError, "Error adding decimal column: precision cannot be empty if scale is specified"
        end

      elsif [:datetime, :time].include?(type) && precision ||= native[:precision]
        if (0..6) === precision
          column_type_sql << "(#{precision})"
        else
          raise(ActiveRecordError, "No #{native[:name]} type has precision of #{precision}. The allowed range of precision is from 0 to 6")
        end
      elsif (type != :primary_key) && (limit ||= native.is_a?(Hash) && native[:limit])
        column_type_sql << "(#{limit})"
      end

      column_type_sql
    else
      type.to_s
    end
  end 
```

# ruby - 无法在 rspec 和 rails 中测试发布请求

> ID：11889053
> 
> 赞同：0
> 
> 时间：2012-08-09T17:45:33.217
> 
> 标签：ruby, ruby-on-rails-3, capybara, rspec2

我一直在寻找整个互联网，但我似乎无法让它工作。

我要做的就是发送一个发布请求并在 rspec 中测试响应。

这是我的 controller_spec 中的内容：

```
it 'my test' do
  post 'api/company_id', :parameters => {key => 'value'}
  response.should be_success
end 
```

我收到此错误：意外 $end，期望关键字_end (SyntaxError)

这是在 post 语句发生的那一行（代码块中的第二行）。

我很难过，但任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:52:00.110

假设这不是您的复制/粘贴错误，看起来您只是缺少一个冒号`key`：

```
post 'api/company_id', :parameters => {:key => 'value'} 
```

# scala - 为什么 JodaTime 时间戳没有在 Squeryl 中重新初始化？

> ID：11889054
> 
> 赞同：0
> 
> 时间：2012-08-09T17:45:41.613
> 
> 标签：scala, jodatime, squeryl

将 Scala、JodaTime 和 Squeryl 用于 ORM。有一个烦人的问题是，一旦应用程序启动，使用 JodaTime 生成的时间戳不会在每次调用时重新初始化。相反，它只设置一次时间，而且每次调用 SQL 时都不会重新初始化。

代码如下。一、时间参数：

```
val todayEnd = new Timestamp(new DateMidnight(now,  DateTimeZone.forID("America/Los_Angeles")).plusDays(1).getMillis()) 
```

和 Squeryl 加入：

```
join(DB.jobs, DB.clients.leftOuter, DB.projects.leftOuter)((j,c,p) =>
        where((j.teamId === teamId)
          and (j.startTime < todayEnd)
          and (j.userId isNotNull)
          and (j.canceled === false)
          and (j.completed === false))
        select(j,c,p)
        on(j.clientId === c.map(_.id), j.projectId === p.map(_.id))) 
```

奇怪的是，如果我在*没有*`todayEnd`JodaTime 的情况下生成时间戳，那么它每次都会重新初始化。那么 JodaTime 有什么不同呢？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:14:21.893

发现了问题：显然管理 JOIN 的线程从未成功关闭，并且在 Akka 中被重新引用。这意味着该`todayEnd`变量从未被重新初始化。

所以带回家的教训是：管理你的线程。

## 更新

正如我进一步了解的那样，保存时间值的原始对象被设置为`val`. 事实证明，他们需要`def`。

坏的：

```
val today = new Date()
lazy val today = new Date() 
```

好的：

```
def today = new Date() 
```*

# android - 在 ListView 中点击 ImageView

> ID：11889058
> 
> 赞同：0
> 
> 时间：2012-08-09T17:45:50.830
> 
> 标签：android, android-listview

我有 ListView 项目：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/layerItem"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <ImageView
            android:layout_width="55dip"
            android:layout_height="fill_parent"
            android:id="@+id/layerImage"/>
    <TextView
            android:id="@+id/layerTitle"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:gravity="center_vertical"
            android:paddingLeft="6.0dip"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:minHeight="?android:attr/listPreferredItemHeight"/>
</LinearLayout> 
```

如何听触摸 ImageView 并获取项目编号？

私有 AdapterView.OnItemClickListener mLayersListListener = new AdapterView.OnItemClickListener() {

```
public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
    //here touch on ImageView or TextView?
} 
```

};

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:53:35.083

*ImageButton*可能是比*ImageView*更好的选择。无论哪种方式：

```
ImageButton mButton = (ImageButton)findViewById(R.id.layerImage);
mButton.setTag(new Integer(position));  // position is the item number
mButton.setOnClickListener (new OnClickListener() {
 public void onClick(View v)
 {
   // handle the image click/touch
   Integer position = (Integer)v.getTag();
 }
}); 
```

通过“获取项目编号”我假设您的意思是获取列表视图位置？使用标签对象是传递此信息的一种可能方式。

**但是为什么不在你的列表中使用 setOnItemClickListener()**呢？用户可以单击图像或文本，但此处理程序干净利落地传递列表项的位置：

```
ListView mList = ...;
mList.setOnItemClickListener(new OnItemClickListener()
{
 public void onItemClick(AdapterView<?> parent, View view, int position, long id)
 {
   // position is the item number
 }
}); 
```

}

# c++ - 虚拟功能无法显示正确的结果

> ID：11889060
> 
> 赞同：0
> 
> 时间：2012-08-09T17:45:58.473
> 
> 标签：c++

我已经完成了 C++ 程序，其中我的基类 ie`Shape`负责获取数据，以及其他两个派生类`Triangle`并`Rectangle` 计算面积。问题是我将该区域作为一些垃圾值。我已经完成了代码，请看一下并指导我。谢谢

```
 #include<iostream>
 using namespace std;

  class Shape{
  protected:  double b,h;

   public:void get_data()
      {
        cout<<"Enter the height\n";
        cin>>h;
         cout<<"Enter the breadth\n";
         cin>>b;

         }
   virtual void display_area(){}

  };

  class Rectangle:public Shape
  {
     public:void display_area(){
     cout<<"\n\nArea of Rectangle:" << b*h;
    }
   };

 class Triangle:public Shape
  {

    public:void display_area(){
     cout<<"\n\nArea of Triangle:"<<0.5*b*h; 
     }
 };

  int main()
  {
     Shape s;
     Triangle t;
     Rectangle r;
     Shape *ptr;

     ptr=&s;
     ptr->get_data();

     ptr=&t;
     ptr->display_area();

     ptr=&r;
     ptr->display_area();
     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:47:29.623

你打电话了`s.get_data()`，但没有`t.get_data`。因此在and`b, h`中会是垃圾。`t``r`

# html - 如何让这个表格只有 1 个像素边框？

> ID：11889065
> 
> 赞同：6
> 
> 时间：2012-08-09T17:46:09.820
> 
> 标签：html, css, html-table

我有这张桌子：

![桌子的形象](../Images/1473874890675bc3fb29de486222395d.png)

使用以下代码：

```
 <table border="1" id="comparativa">
        <tr>
            <td rowspan="2"></td>
            <td colspan="3" class="friuty">Fruity</td>
        </tr>
        <tr>
            <td class="lila">Intensed</td>
            <td class="lila">Medium</td>
            <td class="lila">Low</td>
        </tr>
        <tr>
            <td class="lila">Green</td>
            <td><img src="img/forsutpeque.png" /></td>
            <td><img src="img/donapeque.png" alt="" /></td>
            <td>-</td>
        </tr>
        <tr>
            <td class="lila">Mellow</td>
            <td>-</td>
            <td><img src="img/marpeque.png" alt="" /></td>
            <td>-</td>
        </tr>
        <tr>
            <td class="lila">Balanced</td>
            <td>-</td>
            <td><img src="img/cotxepeque.png" alt="" /></td>
            <td>-</td>
        </tr>
    </table> 
```

和以下CSS

```
#comparativa { 
    width:350px; 
    font-size:1.2em; 
    border-spacing:0px; 
    border-collapse:separate; 
    empty-cells:hide !important; 
    border:0; 
}
#comparativa tr td { 
    padding:2px 4px; 
    border:#9f4dc2 solid 1px; 
    text-align:center; 
    width:88px; 
    color:#bdac77; 
}
#comparativa tr td.friuty { 
    background:#9f4dc2; 
    color:#fff; 
    text-transform:uppercase; 
}
#comparativa tr td.lila { 
    background:#ecdff3; 
    text-transform:uppercase;  
    color:#9f4dc2; 
    text-align:left; 
    padding-top:2px; 
    padding-bottom:4px; 
    padding-left:10px; 
} 
```

我想让它的内部边框宽度为 1px，同时仍然保持空的左上角单元格而不显示边框：

问题是，如果我把`border-collapse:collapse`左上角的行与它的边框一起出现，即使是空单元格：隐藏...

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:55:39.220

您可以使用以下方法为左上角单元格指定覆盖样式：

```
#comparativa tr:first-child td:first-child { border-left: 0; border-top: 0; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:57:58.747

像这样？

[http://jsfiddle.net/apJkX/](http://jsfiddle.net/apJkX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:48:46.773

尝试给表格单元格一个类并将其边框宽度设置为 0px。

# ruby-on-rails - Slim（Rails）中内联元素内的块级元素

> ID：11889071
> 
> 赞同：1
> 
> 时间：2012-08-09T17:46:35.590
> 
> 标签：ruby-on-rails, slim-lang

我在这里尝试一些非常简单的东西。我将 Rails 3.2.6 与 Slim（slim：1.2.2，slim-rails：1.0.3）一起用于模板和 HTML5。HTML5 允许内联元素内的块级元素，但由于某种原因我无法让 Rails/Slim 允许它，并且搜索让我一无所获。

如果我做：

```
a.my_container href="#"
    div.inner_portion
        h2 Heading
        h4 Subheading 
```

它将呈现为：

```
<a class="my_container" href="#"></a>
<div class="inner_portion">
    <h2>Heading</h2>
    <h4>Subheading</h4>
</div> 
```

我也试图逃避周围的锚 html，以及 link_to ... 做。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T17:20:44.860

Rails 和 Slim（与浏览器相反）都不关心块和内联元素的嵌套。Slim 将完全按照您的指示嵌套所有内容，无论它是否是有效的 HTML。

因此，我假设您以某种方式弄错了缩进，您应该检查一下。

# python - 了解初学者的 Django 信号和接收器概念

> ID：11889073
> 
> 赞同：0
> 
> 时间：2012-08-09T17:46:40.620
> 
> 标签：python, django

任何人都可以用一个美丽的现实世界例子从一个非常简单的方面向我解释信号和接收器的概念。**首先，基本定义是什么**？我正在阅读信号和接收器的文档，但对于像我这样的 django 新手来说有点难以理解。

[https://docs.djangoproject.com/en/dev/topics/signals/](https://docs.djangoproject.com/en/dev/topics/signals/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T18:05:40.373

把它想象成无线电传输。

接收器被调谐以收听特定频率（这称为“收听信号”）。

其他一些程序在该频率上传输（提高信号或发射信号）。

接收器仅侦听它所调谐到的那些信号（接收器仅在它正在侦听的信号发出时运行）。

在 django 中，您可以是发送者或接收者。Django 带有一堆发射器；然后你编写接收器来收听各种频率。

一个信号可能是 - *“一个对象被保存”*。*因此，当发出“保存对象”*信号时，将执行每段正在侦听该信号的代码。

# java - Jfreechart - 多个 XY 图表的任何选项，例如多饼图？

> ID：11889077
> 
> 赞同：3
> 
> 时间：2012-08-09T17:46:59.763
> 
> 标签：java, jfreechart

除了 xy 图，还有什么类似于 multiPiePlot Chart 的吗？我有一个应用程序需要在一页上打印两个或三个 xy 图。我知道您可以将多个数据集放在同一个图上，但要求规定每个数据集必须是同一页面上的单独图表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T05:19:16.987

是的，只需将您的`ChartPanel`实例添加到`JPanel`具有`GridLayout(0, 1)`自上而下的排列中。此[示例](https://stackoverflow.com/a/7602126/230513)使用正交`GridLayout(1, 0)`来设置三个面板。

![图片](../Images/4b259fc18eed6a4e3cf600499f76d6ab.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T18:43:24.300

我使用了使用的解决方案rashgod，但我已经扩展了解决方案以支持我希望能够对我的应用程序进行的那种打印。

我希望能够像 JFreechart 通常那样打印，但是将其图形的倍数放在网格中的每个页面上，并让它很好地伸展并扩展到页面。使用此功能，我能够生成与下图匹配的打印：

![样品打印](../Images/05a64f2855d45ea0bb61ca3f94cdfd3e.png)

基本上我扩展了 JPanel 并实现了 Printable 接口。制作一个包含我可能想要显示/打印的所有 JFreecharts 的面板。面板将根据您提供的一些布局说明以网格方式排列它们。

面板的打印功能基本上采用正常的页面格式，但随后将页面细分为之前指定的网格。然后，它获取每个单元格并为每个单元格制作一个页面格式。然后它将告诉每个 JFreeChart ChartPanel 打印到每个 PageFormat 单元格。

# 自定义图表面板：

```
package com.company.jfreeChartCustom;

import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.geom.Rectangle2D;
import java.awt.print.PageFormat;
import java.awt.print.Paper;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JOptionPane;
import javax.swing.JPanel;

import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;

import com.lowagie.text.Row;

/**
 * The CustomChartPanel is used to display/print multiple JFreeCharts
 * Users should only interact with this class with the methods defined
 * below in order to get the proper functionality.  Using
 * inherited methods may produce unwanted display/print behavior if you
 * add components other than JFreeCharts.
 * 
 */
public class CustomChartPanel extends JPanel implements Printable{

    List<JFreeChart> charts = new ArrayList<JFreeChart>();
    List<ChartPanel> panels = new ArrayList<ChartPanel>();
    ChartLayoutInstructions layoutInstructions;

    public CustomChartPanel(){
        super();
    }

    public CustomChartPanel(JFreeChart chart){
        super();
        charts.add(chart);
    }

    /**
     * Creates a CustomChartPanel which displays 1 or more charts in a grid-like fashion
     * described by the layoutInstructions you pass in.  Note that if you pass in more
     * charts than there are columns specified in the ChartLayoutInstructions then excess
     * charts will not be displayed or printed.
     * @param charts
     * @param layoutInstructions
     */
    public CustomChartPanel(List<JFreeChart> charts, ChartLayoutInstructions layoutInstructions){
        super();
        this.layoutInstructions = layoutInstructions;
        for(JFreeChart chart : charts){
            this.charts.add(chart);
        }
        createUIComponents();
    }

    protected void createUIComponents(){
        int size = Math.min(layoutInstructions.getColumns() * layoutInstructions.getRows(), charts.size());
        this.setLayout(new GridLayout(layoutInstructions.getRows(), layoutInstructions.getColumns()));

        for(int i = 0; i < size; i++ ){
            System.err.println("Adding chart");
            ChartPanel chartPanel = new ChartPanel(charts.get(i));
            chartPanel.setMaximumDrawHeight(20000);
            chartPanel.setMinimumDrawHeight(0);
            chartPanel.setMaximumDrawWidth(20000);
            chartPanel.setMinimumDrawWidth(0);
            chartPanel.setPopupMenu(null);
            panels.add(chartPanel);
            this.add(chartPanel);
        }
    }

    public void createPrintJob(){
        PrinterJob job = PrinterJob.getPrinterJob();
        PageFormat pf = job.defaultPage();
        PageFormat pf2 = job.pageDialog(pf);
        if (pf2 != pf) {
            job.setPrintable(this, pf2);
            if (job.printDialog()) {
                try {
                    job.print();
                }
                catch (PrinterException e) {
                    JOptionPane.showMessageDialog(this, e);
                }
            }
        }
    }

    @Override
    public int print(Graphics g, PageFormat pf, int pageIndex)
            throws PrinterException {
        System.err.println("PRINTING");
        //Divide the current page format into sections based
        //on the layout instructions received in the constructor
        //a new pagelayout is created for each cell in the grid
        //that will then be passed along to the print method of
        //each chart panel.  

        if(pageIndex != 0){
            return NO_SUCH_PAGE;
        }

        List<PageFormat> pageFormats = new ArrayList<PageFormat>();

        //setup all the page formats needed for the grid cells.
        double x = pf.getImageableX();
        double y = pf.getImageableY();
        double cellWidth = pf.getImageableWidth() / layoutInstructions.getColumns();
        double cellHeight = pf.getImageableHeight() / layoutInstructions.getRows();

        for(int i=1; i <= layoutInstructions.getRows(); i++){
            double rowOffset = (i-1)*cellHeight + y;
            for(int j=1; j <= layoutInstructions.getColumns(); j++){
                PageFormat format = new PageFormat();
                Paper paper = new Paper();
                double columnOffset = (j-1)*cellWidth + x;
                paper.setImageableArea(columnOffset, rowOffset, cellWidth, cellHeight);
                format.setPaper(paper);
                pageFormats.add(format);
            }
        }

        //have each chartpanel print on the graphics context using its
        //particular PageFormat
        int size = Math.min(pageFormats.size(), panels.size());
        for(int i = 0; i < size; i++ ){
            panels.get(i).print(g, pageFormats.get(i), pageIndex);

        }

        return PAGE_EXISTS;
    } 
```

# 图表布局说明：

我计划扩展这个类以用于定义更高级的行为。这就是为什么我使用这个类，而不仅仅是在 CustomChartPanel 类的构造函数中定义行和列。

```
package com.company.jfreeChartCustom;

/**
 * ChartLayoutInstructions are used to specify how charts should be
 * layed out on screen and in print format.  
 *
 */
public class ChartLayoutInstructions {

    int rows;
    int columns;

    /**
     * Constructor
     * @param rows number of rows in the display/print grid
     * @param columns number of columns in the display/print grid
     */
    public ChartLayoutInstructions(int rows, int columns, boolean allowSwap){
        this.rows = Math.abs(rows);
        this.columns = Math.abs(columns);
    }

    public int getRows() {
        return rows;
    }

    public void setRows(int rows) {
        this.rows = Math.abs(rows);
    }

    public int getColumns() {
        return columns;
    }

    public void setColumns(int columns) {
        this.columns = Math.abs(columns);
    }
} 
```

# java - 工具包图像加载器

> ID：11889079
> 
> 赞同：0
> 
> 时间：2012-08-09T17:47:02.710
> 
> 标签：java

我正在阅读一本关于 Java 编程的书，如果我不明白它正在加载一个位图或者这里的代码，我就参与其中

```
Toolkit tk = Toolkit.getDefaultToolkit();
image = tk.getImage(getURL("castle.png")); 
```

我想告诉它图像实际在哪里或什么的get URl是什么？

当我像这样运行它时，它如何找到我得到这个错误的图像 -

```
Uncaught error fetching image:
java.lang.NullPointerException 
```

这是完整的代码 -

```
package randomshapes;

import java.awt.*;
import java.util.*;
import javax.swing.*;
import java.net.*;

public class RandomShapes extends JFrame{

  private Image image;

  public static void main(String [] args){
    new RandomShapes();
  }

  public RandomShapes(){
    super("DrawImage");
    setSize(600,600);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Toolkit tk = Toolkit.getDefaultToolkit();
    image = tk.getImage(getURL("castle.png"));
  }

  private URL getURL(String filename){
    URL url = null;
    try{
      url = this.getClass().getResource(filename);
    } catch (Exception e){ }
    return url;
  }

  public void paint(Graphics g){
    Graphics2D g2d = (Graphics2D) g;
    g2d.setColor(Color.WHITE);
    g2d.fillRect(0, 0, getSize().width, getSize().height);
    g2d.drawImage(image, 0, 40, this);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:03:36.607

使用 Toolkit 加载图像时，假定图像位于相对于您的项目根类路径的位置。我个人使用并推荐使用[ImageIO](http://docs.oracle.com/javase/7/docs/api/javax/imageio/package-summary.html)而不是 Toolkit 来加载图像。

例如，假设您具有以下结构：

```
com
 -> example
     -> game
     -> util
resources
 -> images
 -> fonts
    --> image.png 
```

要使用 ImagoIO 将 image.png 作为 BufferedImage，您只需执行以下操作：

```
BufferedImage image = ImageIO.read(SomeClass.class.getResource("/resources/images.image.png"); 
```

该方法被声明为抛出 IOException，但我将把它的处理留给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T15:08:59.023

我将非常具体地回答我的问题。在这种情况下，“图像加载失败”在这种情况下有点分散注意力。`getURL()`仔细看看方法：

```
private URL getURL(String filename){
  URL url = null;
  try{
    url = this.getClass().getResource(filename);
  } catch (Exception e){ }
  return url;
} 
```

JDK 方法[`URL Class<T>.getResource(String)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)返回“如果没有找到具有此名称的资源，则返回 null”。简单地说：`castle.png`找不到文件。[从这篇出色的博客文章](http://technotes.tostaky.biz/2012/08/understanding-absolute-and-relative.html)中了解有关资源路径的更多信息。

在构造函数`RandomShapes()`中，此行失败并显示`NullPointerException`：
`image = tk.getImage(getURL("castle.png"));`
方法`Image Toolkit.getImage(URL)`不接受`null`输入。

假设您的类位于 JAR 文件中，返回的 URL 将使用特殊的“jar:”方案，该方案由 Sun 专门设计用于提供 JAR 中文件的位置。

如果您的图像文件未存储在 JAR 中，您可以使用此技巧将文件路径转换为 ​​URL：`URL myImageUrl = new File("/my/images/folder/castle.png").toURI().toURL()`

不要想`File.toURL()`直接打电话；它被贬值以支持该`toURI().toURL()`技术。

# scala - Scala External DSL——多行字符串文字

> ID：11889081
> 
> 赞同：3
> 
> 时间：2012-08-09T17:47:09.740
> 
> 标签：scala, dsl

我正在尝试使用 scala 解析器组合器定义外部 DSL。我看到“stringLit”令牌解析器不使用三引号来容纳多行字符串。在 scala 解析器组合器世界中是否有类似于 multiLineStringLit 的东西？

在此先感谢，基肖尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:35:14.163

不是我知道的，但编写自己的并不难：

```
import scala.util.parsing.combinator._

object myParser extends JavaTokenParsers {
  def mlStringLiteral: Parser[String] = (
    "\"\"\"" +
    """(\n|[^"\p{Cntrl}\\]|\\[\\/bfnrt]|\\u[a-fA-F0-9]{4})*""" +
    "\"\"\""
  ).r
} 
```

这只是[`stringLiteral`](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/util/parsing/combinator/JavaTokenParsers.scala#L46)进行了一些小的编辑：我已将分隔符从`"`to更改为`"""`并添加`\n`到字符匹配中。

```
scala> val s = "\"\"\"This is a multi-\nline string literal.\"\"\""
s: java.lang.String = 
"""This is a multi-
line string literal."""

scala> myParser.parseAll(myParser.mlStringLiteral, s)
res0: myParser.ParseResult[String] = 
[2.24] parsed: """This is a multi-
line string literal.""" 
```

它与 Scala 的多行字符串文字的实现并不完全匹配（例如，字符串中不能有未转义`"`的字符），但它可以很容易地进行调整，并且可以按原样为您工作。

# python - Python 语言概述

> ID：11889088
> 
> 赞同：-4
> 
> 时间：2012-08-09T17:47:32.917
> 
> 标签：python

是否有任何网站可以让我拥有类似于[CoffeeScript 的主页的](http://coffeescript.org/)东西，在那里我可以通过示例获得简单而完整的语言概述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:49:08.227

我发现`Python Documentation`特别有用 - 尤其是教程部分。

**教程**：[http ://docs.python.org/tutorial/](http://docs.python.org/tutorial/)

如果您已经熟悉编程语言，`control flow`这是一个很好的起点。

**控制流文档**：[http ://docs.python.org/tutorial/controlflow.html](http://docs.python.org/tutorial/controlflow.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:49:28.240

你可以开始：[http ://wiki.python.org/moin/BeginnersGuide/Overview](http://wiki.python.org/moin/BeginnersGuide/Overview)

一个小概述：[http ://wiki.python.org/moin/SimplePrograms](http://wiki.python.org/moin/SimplePrograms)

和教程：[http ://docs.python.org/tutorial/](http://docs.python.org/tutorial/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:51:23.370

一个好的开始是： http: [//learnpythonthehardway.org/book/](http://learnpythonthehardway.org/book/)

# actionscript-3 - RTMFP 实时网络摄像头流式传输（一对多） - 问题

> ID：11889090
> 
> 赞同：2
> 
> 时间：2012-08-09T17:47:42.190
> 
> 标签：actionscript-3, flash, streaming, webcam, multicast

我正计划开发一个允许实时网络摄像头流的网站。我用 Adob​​e Cirrus 测试了 Adob​​e RTFMP 协议，它似乎适用于少量人，但我想知道当一个人流到 300 或更多时它会如何运作。我不使用任何 RTMFP 服务器（仅 rtmfp://p2p.rtmfp.net/MY_KEY）。

还有我的问题：

**1\. 是否可以仅使用 Adob​​e Cirrus 构建将处理多人流/观看流的 Flash 应用程序？（我的意思是没有设置我自己的服务器）**

**2\. 如果是，RTMFP 是否提供任何防火墙/NAT 穿越的东西？我的意思是当有人深入防火墙/路由器等时，它会连接吗？** 我问是因为我和朋友的情况很奇怪。当我通过我的应用程序流式传输网络摄像头时，他可以看到我。当他通过同一个应用程序进行流式传输时，我无法观看他。它甚至没有发现他是 NetGroup.Neightbour。我们在同一个网络中。会不会是他的软件问题？

**3\. 我应该使用任何像 Red5 这样的开源 RTMFP 服务器来创建它吗？**

如果您有任何其他想法应该如何实施，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-03T10:28:36.840

抱歉，我回答这个问题迟了，但我现在才发现。

> 1.  是否可以构建仅使用 Adob​​e Cirrus 来处理多人流式传输/观看流式传输的 Flash 应用程序？（我的意思是没有设置我自己的服务器）

答：是的，我以前做过，但是在服务器端，您需要构建一个框架来处理它。就我而言，我使用 rtmfp://p2p.rtmfp.net/MY_APP?variables=xxx) 来实例化我的框架并调用我的流。我还在我的应用程序网络服务器（另一台机器）上实现了一个 RESTFull 调用，以检测用户对内容的权限。Adobe 产品会建议使用它自己的实现，但随着时间的推移，您会发​​现它的简单实现不会持久。

> 2.  如果是，RTMFP 是否提供任何防火墙/NAT 穿越的东西？我的意思是当有人深入防火墙/路由器等时，它会连接吗？我问是因为我和朋友的情况很奇怪。当我通过我的应用程序流式传输网络摄像头时，他可以看到我。当他通过同一个应用程序进行流式传输时，我无法观看他。它甚至没有发现他是 NetGroup.Neightbour。我们在同一个网络中。会不会是他的软件问题？

回答：是的，NAT/防火墙后面的服务器可能会接受您的连接并为您提供流媒体服务，但是随着时间的推移，网络上的波动可能会使您的连接进入睡眠模式（如果您只是停下来查看图像），您将需要为了创建一个保持联系活跃的策略，我也在自己的策略中完成了这个。

> 3.  我应该使用像 Red5 这样的任何开源 RTMFP 服务器来创建它吗？

答：我不知道，这是你个人的选择，但我可以告诉你。我从第 2 版到第 4.5 版一直使用 Flash Media Server，在此我无需更改我的基础架构，之后我就离职了。但是在那个时候，我们公司需要 Adob​​e 的支持，它对我们问题的回答就像什么都没有。好像我们是糟糕的程序员，而 Adob​​e 从来不想研究我们自己的代码和业务方法。adobe 所做的是要求通过支付巨额资金来获得高级支持，只是为了调查我们的问题并对此发表任何看法。所以我决定为服务器端（FMS）编写公司自己的框架，这解决了一个将近两年的问题。我们自己的框架在 4k 在线用户之间创建了一个很好的流程（我们当时的最大峰值）。

所以我相信，因为如果 Red5 是免费的，你可以试一试。我知道今天最新版本的 FMS 仍然存在这个问题，但同时该产品现在具有单播、P2P 和多播三种操作模式。在我的时间，我使用单播模式和 P2P 甚至还没有准备好在该产品上创建服务。我真的相信 P2P 和多播模式是针对我上面描述的单播问题的“修复”。

我希望这可以帮助您和其他人判断您的情况。

# bash - 如何执行存储在一个bash变量中的两个命令

> ID：11889092
> 
> 赞同：8
> 
> 时间：2012-08-09T17:47:51.007
> 
> 标签：bash

假设有一个 bash 变量

> run1="日期"

我需要`date`执行

> ${运行1}

它有效，因为它打印当前时间。但是如果我在变量中放两个命令，

> run2="日期；回声 foo"

我无法执行存储在变量中的命令`run2`，因为`${run2}`抱怨

> 日期；：找不到命令

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T17:50:36.520

尝试：

```
eval ${run2} 
```

这应该会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:55:13.667

试试`eval "${run2}"`。这会将变量解释为要运行的命令序列。

# c# - 有没有更简单/更好的方法来做到这一点，因为 C# 中不允许向下转换？”

> ID：11889093
> 
> 赞同：1
> 
> 时间：2012-08-09T17:47:58.397
> 
> 标签：c#, .net, downcast

可能是一个有争议的话题，但是......我真的很讨厌我不能做以下事情：

```
class User 
{
   public string ImageURL {get;set;}
}

class UserUI : User 
{
   public Brush ImageBrush {get;set;}
}

User user = GetFromUserFromServer(); //returns User type object, not UserUI
UserUI userUI = user;
userUI.ImageBrush = CreateBrush(userUI.ImageURL); 
```

相反，我使用如下内容：

```
class User 
{
   public virtual string ImageURL {get;set;}
}

class UserUI : User 
{
   public override string ImageURL 
    {
        get
        {
            return base.ImageURL ;
        }
        set
        {
            if (value != base.ImageURL )
            {                    
                base.ImageURL = value;
                ImageBrush = CreateBrush(value);
            }
        }
    }

   public Brush ImageBrush {get;set;}

   public UserUI(User user)
   {
       ImageURL = user.ImageURL;
   }
}

User user = GetFromServer();
UserUI userUI = new UserUI(user); 
```

它更加冗长，每当我向用户添加字段时，我都需要确保将它们复制到 UserUI 构造函数中。

公平地说，允许向下转换会使所有这一切变得更容易，更不容易出错吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:54:06.827

呃……不。你认为当你这样做时应该发生什么，毕竟这和你的例子一样有效：

```
string whatever = "";
UserUI userUI = whatever;
userUI.ImageBrush = CreateBrush(userUI.ImageURL); 
```

毕竟，两者都继承自*object*。由于该属性不存在，userUI.ImageURL 是否会引发异常？要不然是啥？这*太疯狂了*。:)

**编辑：**你在上面的评论中说：

> “是的。我的论点是可能应该有一种转换为派生类型的方法，并且框架会自动复制两种类型中存在的字段，并将其他字段留空。在这种情况下，ImageURL 将被复制。

如果*这*就是你想要的，那么使用 Automapper：[https ://github.com/AutoMapper/AutoMapper/wiki](https://github.com/AutoMapper/AutoMapper/wiki)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T17:55:37.053

如果您阅读了[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，您会发现如果您需要向下转换，那么您的设计就有缺陷。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T18:08:26.157

这是一个很好的例子，您应该引用“优先组合优于继承”这句话。与其让 UserUI 从 User 继承，不如让它包含一个用户：

```
public class UserUI
{
  public User MyUser {get; set;} //or have it set in just a constructor, if that makes more sense
  public Brush ImageBrush {get;set;}
} 
```

然后，您不必将 a 设置`User`为 a ，而`UserUI`只需将现有的添加`User`到 a `UserUI`。

```
User someUser = ...;
UserUI = someUserUI = new SomeUserUI();
someUserUI.MyUser = someUser; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T18:02:08.197

如果从 GetFromServer() 返回的对象实际上是一个 UserUI 对象，那么您可以毫无问题地向下转换：

```
User user = GetFromServer();
UserUI userUI = (UserUI) user; // or: UserUI userUI = user as UserUI; 
```

如果`user`引用实际上不是 UserUI 对象，则没有什么可向下转换的（因此转换将引发异常）。如果这是您的情况，那么您需要`UserUI`根据原始`User`对象创建一个新对象，这就是您正在做的事情，并且与向下转换完全不同。

# jquery - 带有可滚动 div 的 JQuery UI 可排序连接列表不起作用

> ID：11889096
> 
> 赞同：1
> 
> 时间：2012-08-09T17:48:13.843
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable, jquery-scrollable

我有一个网络应用程序，用户可以在其中拖动许多不同组之间的项目，每个组都有自己的列表供项目进入。这些组本身落入具有固定高度的不同容器中，并且在用户拖动时需要可滚动一个物品。

基本上我有：

```
<body>
    <div id='leftContainer'>Fitlers And Other Stuff Over Here</div>

    <div id='middleContainer'>
        <div id='group1'>
            <ul class='.items'>
                <li class='.item' id='item1'></li>
                <li class='.item' id='item2'></li>
            </ul>
        </div>
        <div id='group2'>
            <ul class='.items'>
            </ul>
        </div>
        <div id='group3'>
            <ul class='.items'>
                <li class='.item' id='item3'></li>
            </ul>
        </div>

            ....

        <div id='groupN'>
            <ul class='.items'>
                <li class='.item' id='itemN'></li>
            </ul>
        </div>
    </div>

    <div id='rightContainer'>
        <div id='specialGroup'>
            <ul class='.items'>
                <li class='.item' id='item4></li>
                <li class='.item' id='item5></li>
            </ul>
        </div>
    </div>
</body> 
```

此项目可排序连接到任何“.items”列表。拖动项目时，它们需要在中间容器和右侧容器之间拖动，因此我使用 appendTo: 'body' 来解决 z-index 问题。中间容器和左侧容器都具有固定的高度（因此是单独的滚动条），并且如果拖动靠近该容器的顶部/底部边界，则需要可滚动。

```
$('.items').sortable({
    connectWith: '.items',
    opacity: 0.6, revert: true, cursor: 'move', cancel: '.incomplete',
    appendTo: 'body',
    helper: 'clone',
    placeholder: 'item-drop-placeholder'
}); 
```

使用此配置，在发生拖动时 middleContainer / rightContainer 不会滚动。相反，整个身体滚动。我试图实现我自己的例程来处理滚动相应的容器，同时拖动以下添加到 .sortable 选项。

```
scroll: false,
sort: scrollContainersDuringItemDrag

function scrollContainersDuringItemDrag(event, ui) {

    if (event.pageX is within middleContainerBoundary) {
        if (event.pageY is near bottom of middle container)
            $('#middleContainer').scrollTop($('#middleContainer').scrollTop() + 30);
        else if (event.pageY is near top of middle container)
            $('#middleContainer').scrollTop($('#middleContainer').scrollTop() - 30);
    }

    else if (event.pageX is within rightContainerBoundary) {
        if (event.pageY is near bottom of right container)
            $('#rightContainer').scrollTop($('#rightContainer').scrollTop() + 30);
        else if (event.pageY is near top of right container)
            $('#rightContainer').scrollTop($('#rightContainer').scrollTop() - 30);
    }
} 
```

自定义滚动例程有效，并且容器在拖动时按我的意愿滚动​​，但是到其他列表的排序连接停止在初始视图边界之外运行。

例如，如果我在中间容器的 group1 中有一个项目。我拖动它，它可以在不同组之间排序。如果第 4 组在第 1 组右侧可见而无需滚动，我可以毫无问题地将其拖到第 4 组。

但是，如果我将它拖到中间容器的底部并向下滚动容器，例如第 12 组现在滚动到视图中。我无法将该项目分类到第 12 组，因为拖动开始时它不在视图中。如果向下滚动后第 1 组仍然可见，我可以将项目放在第 1 组列表中的较低位置，然后将其重新拾取并将其移动到第 12 组。

向下滚动后，如何调整它以将其直接放入第 12 组？

# asp.net - 试图在同一行上获取 3 个 HTML 元素

> ID：11889098
> 
> 赞同：0
> 
> 时间：2012-08-09T17:48:18.433
> 
> 标签：asp.net

我在这个网站上搜索了答案并找到了类似的东西，但没有什么突出的答案，可能是因为我缺乏这方面的经验。我正在使用表格下方的 JQuery 滑块，并且滑块必须位于其自己的 div 中。我试图让“min”标签显示在滑块的左侧，“max”显示在右侧，所有 3 个元素都在同一行上。正如下面的代码所示，它将每个元素放在自己的行上，我也明白为什么会这样。

但是，我尝试向左浮动，将每个放在自己的 div 中，并将所有 3 个放在一个 div 中。我也尝试过这些的组合。我无法得到它，我尝试的每个实验都会导致对我来说没有逻辑意义的外观。

我错过了什么？谢谢你的帮助 ：）

```
<label id="min">0</label>
<div id="slider" style="width:450px"></div>
<label id="max">200</label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:51:13.280

您可以使用 CSS 浮动来做到这一点。

```
<style>
    #mySlider label, #mySlider div {float: left;)
</style>    
<div id="mySlider">
    <label id="min">0</label> 
    <div id="slider" style="width:450px">(slider)</div> 
    <label id="max">200</label> 
</div>    
​ 
```

[JS 小提琴示例](http://jsfiddle.net/eRUgf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:52:20.027

添加一些CSS：

```
#min,#max,#slide {
   float: left;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:56:19.870

您可以添加 CSS

```
#min, #max, #slider {
display:inline-block; vertical-align:top;
} 
```

这将确保所有元素都堆叠在一起，而不是每行一个。

您也可能会发现有关浮动与内联块的有趣阅读[http://www.ternstyle.us/blog/float-vs-inline-block](http://www.ternstyle.us/blog/float-vs-inline-block)

# python - PostgreSQL 连接应该集中在 Python Web 应用程序中，还是应该为每个请求创建一个新连接？

> ID：11889104
> 
> 赞同：8
> 
> 时间：2012-08-09T17:48:32.237
> 
> 标签：python, postgresql, web-applications, flask, psycopg2

我正在用 Python 构建一个 Web 应用程序（使用 Flask）。我不打算使用 SQLAlchemy 或类似的 ORM 系统，而是直接使用 Psycopg2。

我应该为每个新请求打开一个新的数据库连接（然后关闭它）吗？或者我应该使用一些东西来汇集这些连接？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T17:51:43.840

PgBouncer 对应用程序和服务器来说非常简洁和透明。

我们已经在生产中使用 PgBouncer 2 年了，没有一个问题。这是一个非常棒的 PostgreSQL 连接池。

[http://wiki.postgresql.org/wiki/PgBouncer](http://wiki.postgresql.org/wiki/PgBouncer)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-29T08:47:00.980

是的，连接池会有所帮助，但是是的，您必须根据数据库上的负载来找出实时连接或池大小的正确数字。

```
 from psycopg2.pool import SimpleConnectionPool
    from contextlib import contextmanager

    dbConnection = "dbname='dbname' user='postgres' host='localhost' password='postgres'"

    # pool define with 10 live connections
    connectionpool = SimpleConnectionPool(1,10,dsn=dbConnection)

    @contextmanager
    def getcursor():
        con = connectionpool.getconn()
        try:
            yield con.cursor()
        finally:
            connectionpool.putconn(con)

    def main_work():
        try:
            # with here will take care of put connection when its done
            with getcursor() as cur:
                cur.execute("select * from \"TableName\"")
                result_set = cur.fetchall()

        except Exception as e:
            print "error in executing with exception: ", e 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T18:24:12.837

答案取决于将发生多少这样的请求以及在您的 Web 应用程序中同时发生多少？如果您希望您的 Web 应用程序忙于同时登录的 100 甚至 1000 名用户，那么连接池通常是一个更好的主意。如果您只是将其作为一个辅助项目并且期望少于几百个用户，您可能会逃脱没有汇集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T17:50:37.950

如果此应用程序要同时为多个客户端提供服务，我认为连接池是最好的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-07T10:44:20.147

在 Flask、FastAPI 和所有依赖于具有多个工作人员的 wsgi/asgi 专用服务器的环境中，池化似乎是完全不可能的。这种行为的原因很简单：您无法控制池和主线程/进程。池实例仅可用于为一组客户端服务的单个线程 - 因此仅适用于一个工作人员。任何其他工作人员都将获得它自己的池，因此不能共享已建立的连接。

从逻辑上讲，这也是不可能的，因为您无法使用 python (2.x - 3.8) 在多核环境中的线程/进程之间共享这些对象状态。

# validation - 验证子域中的网站？

> ID：11889105
> 
> 赞同：0
> 
> 时间：2012-08-09T17:48:41.807
> 
> 标签：validation, css, internet-explorer-7, subdomain

我有一个托管在子域下的网站用于测试目的，并尝试使用 w3 验证器和拼图来验证 html 和 css。根据我使用的 URL - [http://alt.example.com](http://alt.example.com)（9 个框架集类型错误 4.01 Strict，CSS3 通过）或[http://www.example.com/alt](http://www.example.com/alt)（通过 HTML5/失败 CSS3 183 错误，主要是供应商扩展名）。为什么链接的验证方式不同，我应该关注哪一个？关于如何修复它们的任何想法都会很棒。

Mystique 主题，Mystique-Child 主题（具有自己的 style.css，使用 @import url 获取 core.css），WordPress 3.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:18:09.997

原因是 alt 的来源是：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
  <title>alt.example.com</title>

</head>
<frameset rows="100%,*" border="0">
  <frame src="http://www.example.com/alt" frameborder="0" />
  <frame frameborder="0" noresize />
</frameset>

<!-- pageok -->
<!-- 02 -->
<!-- -->
</html> 
```

换句话说，它不是真正的 301 重定向，或者只是映射到同一个文件夹，而是将另一个 URL 加载到一个糟糕的 iframe 版本中。检查您的托管设置，并将其更改为 301 重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:10:27.163

更好的选择是将其映射到同一个文件夹。这将允许您使用仅对托管在域根目录中的站点可用的某些功能，例如[site-root relative links](http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7c44a.html)。

尽管您*可以*使用 实现此映射`.htaccess`，但所有主要的 Web 托管控制面板都有将子域映射到文件夹的选项。一旦你这样做了，你就可以改变重定向的方向（大声笑）——它在你的控制之下。使用子域也是更好的风格。

因此，您可以关注[http://alt.example.com](http://alt.example.com)，并将对[http://www.example.com/alt](http://www.example.com/alt)的外部请求*重定向*到子域，同时在内部将其*映射*到目录 /alt

# mysql - CakePHP 数据库：SQLSTATE 28000 - 错误 1045 用户 'kcal'@'localhost' 的访问被拒绝

> ID：11889108
> 
> 赞同：1
> 
> 时间：2012-08-09T17:48:47.220
> 
> 标签：mysql, cakephp

我正在将我的网站从小型 VPS 转移到大型专用服务器。但这是一个奇怪的问题。

我不断收到此错误：

```
缺少数据库连接

错误：SQLSTATE [28000] [1045] 用户'kcal'@'localhost'的访问被拒绝（使用密码：YES）需要数据库连接

错误：确认您已创建文件：app/Config/database.php。

注意：如果要自定义此错误消息，请创建 app/View/Errors/missing_connection.ctp。

```

是：文件已创建，用户已创建，密码正确。（我什至把它改成了简单的东西。两次）

但是我仍然收到此错误。

我读到我需要 pdo_mysql 扩展，但默认情况下已安装。我有它，它已安装并启用！

我所有的其他应用程序都可以正常工作。不过，这是唯一的 CakePHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:39:09.650

访问被拒绝错误准确地表明 - Cake 能够与 MySQL 通信，并且表示访问被拒绝并指示 user@host。可能是因为用户无权访问 checkpoint_live 数据库。

由于您刚刚移动到新服务器，因此您可能需要为该特定用户@主机授予 MySQL 表的权限。使用相同的密码创建相同的用户是不够的。试试这个：

```
GRANT ALL PRIVILEGES ON checkpoint_live.* TO 'kcal'@'localhost';
FLUSH PRIVILEGES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:35:02.587

检查您在 app/Config/database.php 中输入的用户名密码。它应该看起来像：

```
class DATABASE_CONFIG {

public $default = array(
    'datasource' => 'Database/Mysql',
    'persistent' => false,
    'host' => '127.0.0.1',
    'login' => 'kcal',
    'password' => '---ORIGINIAL PASSWORD HERE---',
    'database' => 'checkpoint_live',
    'prefix' => '',
    'encoding' => 'utf8',
);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:18:44.373

检查您的登录名或密码中是否有多余的空格。我刚刚遇到了同样的问题，这是由密码开头的多余空格引起的。

# silverlight - 在标签中使用文本框而不仅仅是文本框有什么意义？

> ID：11889110
> 
> 赞同：1
> 
> 时间：2012-08-09T17:48:49.267
> 
> 标签：silverlight

我回答了上一个问题，提供了以下解决方案（并且帮助很大）：

```
<sdk:Label>
    <TextBlock Text="This is underlined" TextDecorations="Underline" />
</sdk:Label> 
```

似乎以下 XAML 会达到相同的结果：

```
 <TextBlock Text="This is underlined" TextDecorations="Underline" /> 
```

所以我的问题是：为什么要将 TextBlock 放在标签中？这给你带来什么好处？以一种或另一种方式做到这一点的标准是什么？

正如您可能猜到的那样，XAML 对象可能有一些基本的东西我还不了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:20:00.050

在大多数一般情况下，它不会给您带来任何优势。

实际上，在您定义的情况下，*TextBlock***不**应该用*Label*包装。

*标签*是一个*ContentControl*。*它使用ContentTemplate*呈现给它的任何类型的内容。默认情况下，当您尝试渲染字符串时，它会在内部使用*TextBlock*来渲染它。

因此，以下是相同的：

```
<Label>
    Text
</Label>

<Label>
    <TextBlock>
        Text
    </TextBlock>
</Label> 
```

在这种情况下，仅当您使用 App.xaml 中的隐式样式定义了自定义*ContentTemplate*以便将其应用于应用程序中的所有*标签时，使用**标签*才会给您带来优势。

 **否则，它是相同的，如果唯一的要求是显示一些带下划线的文本，则只应使用*TextBlock 。***

# php - 意外的引号破坏了 PHP 网页中的布局

> ID：11889112
> 
> 赞同：0
> 
> 时间：2012-08-09T17:49:01.623
> 
> 标签：php

我在[这里做一个网站](http://www.creativetuition.co.uk/)

我正在使用 index.php 和“包含”来拉入网站的各个页面。我看到的问题是，当主页加载时，有两个引号将主要内容向下推。奇怪的是，当您单击任何其他页面（甚至是“主页”链接）时，它们会消失并且一切都会恢复正常。

[在这里](http://i46.tinypic.com/2dj6neo.jpg)，您可以使用 Chrome 的 Inspect Element 工具查看标记中的引号：

这是 index.php 中的代码：

```
<?php include('header.php') ?>
<div id="acontainer">
  <?php include('homepage.php') ?>
</div>
<?php include('footer.php') ?> 
```

这是菜单的代码，它将不同的 PHP 文件加载到#acontainer 中：

```
<ul>
      <li><a class="menui" href="#" onclick="$('#acontainer').load('homepage.php');return false;"><span>Home</span></a></li>
      <li><a class="menui" href="#" onclick="$('#acontainer').load('tuition.php');return false;"><span>Tuition</span></a></li>
      <li><a class="menui" href="#" onclick="$('#acontainer').load('about.php');return false;"><span>About Me</span></a></li>
      <li><a class="menui" href="#" onclick="$('#acontainer').load('contact.php');return false;"><span>Contact Me</span></a></li>
      <li><a class="menui" href="#" onclick="$('#acontainer').load('faq.php');return false;"><span>FAQ</span></a></li>
    </ul> 
```

这是 homepage.php 中的代码：

```
<script type="text/javascript">

$(function(){
    $('#slideshow').cycle({
        fx:     'fade',
        speed:  'slow',
        timeout: 12000,
        pager:  '#slider_nav',
        pagerAnchorBuilder: function(idx, slide) {
            // return sel string for existing anchor
            return '#slider_nav li:eq(' + (idx) + ') a';
        }
    });
});

</script> 
```

```
<div class="header_blog">
    <div id="slider">
      <!-- start slideshow -->
      <div id="slideshow">
        <div class="slider-item"><a href="#" onClick="$('#acontainer').load('tuition.php');return false;"><img src="images/simple_img_1.jpg" alt="icon" width="917" height="398" border="0" /></a></div>
        <div class="slider-item"><a href="#" onClick="$('#acontainer').load('about.php');return false;"><img src="images/simple_img_2.jpg" alt="icon" width="917" height="398" border="0" /></a></div>
        <div class="slider-item"><a href="#" onClick="$('#acontainer').load('tuition.php');return false;"><img src="images/simple_img_3.jpg" alt="icon" width="917" height="398" border="0" /></a></div>
        <div class="slider-item"><a href="#" onClick="$('#acontainer').load('contact.php');return false;"><img src="images/simple_img_4.jpg" alt="icon" width="917" height="398" border="0" /></a></div>
      </div>
      <div class="clr"></div>
      <!-- end #slideshow -->
      <div class="controls-center">
        <div id="slider_controls">
          <ul id="slider_nav">
            <li><a href=""></a></li>
            <!-- Slide 1 -->
            <li><a href=""></a></li>
            <!-- Slide 2 -->
            <li><a href="#"></a></li>
            <!-- Slide 3 -->
            <li><a href="#"></a></li>
            <!-- Slide 4 -->
          </ul>
        </div>
        <div class="clr"></div>
      </div>
      <div class="clr"></div>
    </div>
    <div class="clr"></div>
    <div class="FBG">
      <div id="quote">
        <p>
        Welcome to <strong>Creative Tuition</strong>, home of personal guitar tuition for musicians of all ages and abilities around the North West of England. Book a free lesson today!
        </p>
      </div>
      <div class="clr"></div>
    </div>

    <div class="FBG" style="border-bottom : none;">   

        <div id="reasons-list">

            <h3 class="level">3 Reasons to Give Creative Tuition a Try</h3>
            <br />
            <ul id="reasons">
                <li>Your first lesson is FREE and includes a complete breakdown of where you are and where you want to be</li>
                <li>5 years of professional teaching experience and Grade 8: Rock Guitar Playing & Theory</li>
                <li>Creative and custom lesson plans completely tailorered for YOU</li>
            </ul>

            <p>Not enough? Find out more at our <a href="#" onClick="$('#acontainer').load('tuition.php');return false;">Tuition Page</a>.</p>
            <div class="clr"></div>.</p>

        </div>

        <div id='mediaspace'>This text will be replaced</div>

        <div id="reasons-video">
            <script type='text/javascript'>
              jwplayer('mediaspace').setup({
                'flashplayer': 'js/player.swf',
                'author': 'Creative Guitar Tuition',
                'file': 'http://www.youtube.com/watch?v=RyXTJkLRSEg',
                'controlbar': 'bottom',
                'width': '470',
                'height': '320'
              });
            </script>

        </div>
                <h3 class="level">Is Creative Guitar Tuition right for you?</h3>
                <br />
                <p>The creative and flexible lesson plan taught at Creative Guitar Tuition was developed through <span class="blue">5 years of professional teaching experience</span> at many of the UK’s major guitar outlets and institutions. This tried and tested teaching method not only includes the best content you will find but (and this is the key), through careful dissection of your ability and goals, we will work together to create a completely customised lesson plan.  This will ensure your musical progression does not deviate from your desired path to becoming a better musician. This will ensure you arrive at your musical destination in the shortest, most efficient and fun way possible.</p>
        <br />
        <div id="level">
            <div class="fourth">
                <h3>Beginner?</h3>
                <p>Are you just beginning your musical journey? Are you short on spare time and tired of trawling the Internet only to find hit and miss information?</p>
            </div>
            <div class="fourth">
                <h3>Intermediate?</h3>
                <p>Are you at intermediate level but feel that you're progression isn’t moving  as fast and in the direction you’d like?</p>
            </div>
            <div class="fourth">
                <h3>Advanced?</h3>
                <p>Are you an advanced player, but you’ve hit a wall and you're not sure how to push on to the next level?</p>
            </div>
            <div class="fourth">
                <h3>Not sure?</h3>
                <p>No matter what your ability, Creative Guitar Tuition will give you a free lesson so you can see just how much better you could be.</p>
            </div>
            <a class="free-lesson" href="#" onClick="$('#acontainer').load('contact.php');return false;" />
        </div>

    </div>
  </div>
          </div> 
```

任何线索可能导致这种奇怪的行为？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:58:55.063

您所看到的“引号”只是单个空格的显示。开发人员工具无法显示空间，因为该空间是空的。为了向您展示空间，开发人员工具使用引号。

解决方案是在包含文件的每个 final 之后删除空格和换行符`?>`，或者更好的是，只需省略 final `?>`。PHP 允许这样做，并且许多开发人员鼓励这样做，以避免您遇到这个确切的问题。

其他不需要的空格来源是 和 之间的空格或`>`换行符`<`。这些并不总是很容易找到或修复。我告诉你放一条评论

```
<div id="acontainer"><?php include('homepage.php') ?></div> 
```

在一条线上。这在这里有效，但在更复杂的情况下，您需要空格和换行符来增加可读性。在这种情况下，将换行符放在`>`or之前`?>`（这是允许的 HTML 和 PHP！）：

```
<div id="acontainer"
   ><?php include('homepage.php') 
   ?></div> 
```

但只有在您确实遇到不需要的空间问题时才这样做。大多数时候，空间是良性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-10T13:59:09.900

我正在寻求解决同样问题的帮助。帮助我的是将文件编码为“没有 BOM 的 UTF-8”（Notepad++ 有该选项）。如果您的文件使用 UTF-8 编码，那么这很可能是导致问题的原因。希望它可以帮助偶然发现该线程的人。

# c++ - C++\Win32对WaitForSingleObject函数返回值含义的困惑

> ID：11889117
> 
> 赞同：2
> 
> 时间：2012-08-09T17:49:11.570
> 
> 标签：c++, multithreading, winapi, mutex

我有一个用 创建的互斥锁`CreateMutex`，然后我`WaitForSingleObject`用来等待某个线程，直到互斥锁被释放并获得它的所有权（没有超时）。

所以，如果函数返回`WAIT_OBJECT_0`，我可以继续我的婚姻方式并执行线程的代码。

但是，如果函数返回`WAIT_ABANDONED`，我是否仍然可以执行代码，期望调用`WaitForSingleObject`我的 Mutex 的任何其他线程都会卡住，直到我释放？

* * *

如果拥有线程在没有释放互斥锁的情况下终止，我希望调用线程获得所有权并且事情继续照常进行。

* * *

编辑：让我感到困惑的是，MSDN 说在情况（2）中互斥锁的状态是未发出信号的，因为它与发出信号的状态（1）相反。这对我意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:52:29.807

如果你`WAIT_ABANDONED`回来了，这意味着你已经获得了互斥锁的所有权。问题是您不知道受它保护的资源的状态。

例如，假设线程 X 获得一个互斥体并开始操作受该互斥体保护的事物的状态，然后被杀死。状态未知，互斥锁未持有。当你去等待那个互斥体时，你会收到它，但你不会知道那个状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:08:06.313

获得 WAIT_ABANDONED 表明您的代码中存在相当严重的问题。当一个线程拥有一个互斥体但它在​​没有调用 ReleaseMutex() 的情况下终止时，您将获得此状态代码。

这可能是您的代码中的一个简单错误，只是忘记调用该函数。这可能是一些*非常*讨厌的事情的迹象，线程因异常而死并吞下了它。但是没有正确清理状态，包括忘记释放互斥锁。在没有清理的情况下吞下异常总是一个令人讨厌的错误生成器，它会使程序无法预测和无法诊断地失败。

# linux - 让 GNU Octave 与多核处理器一起工作。（多线程）

> ID：11889118
> 
> 赞同：19
> 
> 时间：2012-08-09T17:49:15.057
> 
> 标签：linux, multithreading, multicore, octave

我希望能够使用 gnu octave 对多个线程进行编程，以便它可以利用多个处理器。

我在 Fedora 17 Linux 上安装了 GNU Octave 并执行了以下操作：

```
yum install octave 
```

其中我的电脑上安装了最新版本的octave，3.6.2。它工作得很好，但是当你将两个巨大的矩阵相乘时，它会使 octave 使用的一个 CPU 陷入困境。如果矩阵乘法利用所有内核会很好，因为在这种情况下，CPU 显然是瓶颈。

octave 能否充分利用多核处理器并在多个线程上运行？是否有为此的库或编译时间标志？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-09T17:56:53.480

**解决方案**

Octave 本身是一个在一个内核上运行的单线程应用程序。您可以使用 octave 来使用诸如 ATLAS 之类的利用多个内核的库。因此，虽然 Octave 只使用一个内核，但当您遇到繁重的操作时，octave 会调用 ATLAS 中使用许多 CPU 的函数。

我能够做到这一点。首先从源代码编译“ATLAS”并使其可用于您的系统，以便 octave 可以找到它并使用这些库函数。ATLAS 会根据您的系统和内核数量进行自我调整。当您从源安装 octave 并指定 ATLAS 时，它会使用它，因此当 octave 执行大型矩阵乘法之类的繁重操作时，ATLAS 决定使用多少 CPU。

我无法让它在 Fedora 上工作，但在 Gentoo 上我可以让它工作。

我使用了这两个链接： ftp: [//ftp.gnu.org/gnu/octave/](ftp://ftp.gnu.org/gnu/octave/)

[http://math-atlas.sourceforge.net/](http://math-atlas.sourceforge.net/)

**我在安装 ATLAS 之前和之后运行了以下 octave 核心：**

```
tic
bigMatrixA = rand(3000000,80);
bigMatrixB = rand(80,30);
bigMatrixC = bigMatrixA * bigMatrixB;
toc
disp("done"); 
```

**使用多个处理器时矩阵乘法的速度要快得多，比以前使用单核时快 3 倍：**

```
Without Atlas: Elapsed time is 3.22819 seconds.
With Atlas:    Elapsed time is 0.529 seconds. 
```

我正在使用的三个加快速度的库是 `blas-atlas`, `cblas-atlas`, `lapack-atlas`.

如果 octave 可以使用这些而不是默认的 blas 和 lapack 库，那么它将使用多核。

使用 ATLAS 从源代码编译 octave 并不容易，需要一些编程技巧。

**使用 Atlas 的缺点：**

这个 Atlas 软件使用大量开销将您的 octave 程序拆分为多个线程。当然，如果您所做的只是巨大的矩阵乘法，它会更快，但是大多数命令不能通过 atlas 进行多线程处理。如果从内核中提取每一点处理能力/速度是重中之重，那么只需编写程序以与其自身并行运行，您就会有更好的运气。（将您的程序分成 8 个等效的程序，它们可以解决 1/8 的问题，并同时运行它们，当所有程序都完成后，重新组合结果）。

Atlas 帮助单线程 octave 程序表现得更像一个多线程应用程序，但它不是灵丹妙药。Atlas 不会使您的单线程 Octave 程序超出您的 2、4、6、8 核心处理器。您会注意到性能提升，但提升会让您寻找更好的方式来使用所有处理器。答案是编写程序使其自身并行运行，这需要大量的编程技巧。

**建议**

将您的精力投入到对最繁重的操作进行矢量化并将进程分布在 n 个同时运行的线程上。如果您等待进程运行的时间过长，最有可能加快进程的最容易实现的目标就是使用更高效的算法或数据结构。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-17T09:18:28.133

在[Octave-Forge](http://octave.sourceforge.net)上有两个处理并行计算的包：

*   [mpi](http://octave.sourceforge.net/mpi/)
*   [平行线](http://octave.sourceforge.net/parallel/index.html)

也可以使用该`fork()`函数生成子进程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-22T11:01:08.283

正如 Eric 所建议的那样，我尝试使用**ATLAS**并将我的性能提高了 3 倍（在 NN 学习应用程序中，主要成本是矩阵乘法）。令人惊讶的是，它似乎仍然只使用一个核心。经过进一步研究，我偶然发现了**OpenBLAS**，它开始使用开箱即用的多个内核，并将性能进一步提高了 2 倍（尽管我只有 2 个内核）。如果您想挤出更多，您也可以尝试使用**MKL**，但由于依赖关系，它在磁盘空间上很重。

我将 Arch Linux 与包 community/ **[atlas-lapack-base](https://www.archlinux.org/packages/community/i686/atlas-lapack-base/)**和 aur/ **[openblas-lapack 一起使用](https://aur.archlinux.org/packages/openblas-lapack/)**。安装它们中的每一个都会切换 Octave 中使用的默认值。

这是比较这些库的一个很好的基准：[http://www.tcm.phy.cam.ac.uk/~mjr/linpack/](http://www.tcm.phy.cam.ac.uk/~mjr/linpack/)

# memory - 在有限内存上顺序存储可变长度对象的最佳数据结构

> ID：11889128
> 
> 赞同：1
> 
> 时间：2012-08-09T17:50:01.703
> 
> 标签：memory, object, data-structures, store, memory-efficient

我在 MCU 上有有限的固定内存量，我应该在上面存储一些对象。内存量非常小，我必须在程序开始时分配所有内存用于存储对象（我不能使用动态内存分配）。

每个对象由多个属性组成，我们可以随时为任何对象添加或删除任意数量的属性。属性长度是可变的，因此对象的长度可能会不时变化。修改此属性时，属性的大小可能会发生变化。

对存储对象的关键操作是搜索和读取属性值。

现在，我正在寻找解决我的问题的最佳方法和最佳数据结构（速度快、元数据不多、内存写入少、搜索开销小）。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:45:19.043

这看起来仍然像动态内存分配，您可能会编写一个轻量级版本的 malloc/free。

如果您对存储的对象有一些先验知识，也许您可​​以相应地构建您的内存，但在您的问题中似乎您正在专门寻找通用算法。

# java - JAXB 防止 jaxb 使用共享实体进行序列化

> ID：11889130
> 
> 赞同：0
> 
> 时间：2012-08-09T17:50:07.733
> 
> 标签：java, hibernate, jpa, jaxb

我有4个实体，

purchaseRequest - 资金 - lineItemFunding purchaseRequest - lineItem - lineItemFunding - 资金

我正在使用 JAXB 并建立`@XmlTransient`关系。`lineItemFunding``ManyToOne`

当来自`purchaseRequest`-> `funding`- 我不希望它扫描`lineItemFunding`时，但来自`purchaseRequest`-> `lineItem`-> `lineItemFunding`-> `Funding`。我希望它对`Funding`. 我遇到的问题是，如果我`@XmlTransient`在`getFunding()`内部使用`lineItemFunding`，一切正常，但如果我删除它，我会收到以下错误。

```
Caused by: com.sun.istack.SAXException2: 
A cycle is detected in the object graph. 
This will cause infinitely deep XML: 
org.company.com.entities.Funding@2a2 
-> org.company.com.entities.LineItemFunding@82 
-> org.company.com.entities.Funding@2a2 
```

所以我的问题是，如何防止它尝试从资助实体对 lineItemFunding 进行深度扫描。以下是我的来源。

采购申请

```
@OneToMany(mappedBy = "purchaseRequest", cascade = CascadeType.ALL, orphanRemoval = true)
private List<LineItem> lineItems;

@OneToMany(mappedBy = "purchaseRequest", cascade = CascadeType.ALL, orphanRemoval = true)
private List<Funding> fundings; 
```

资金

```
@OneToMany(mappedBy = "funding", cascade = CascadeType.ALL, orphanRemoval = true)
private List<LineItemFunding> lineItemFundings;

@XmlTransient
@ManyToOne
@JoinColumn(name = "purchase_request_id", nullable = false)
private PurchaseRequest purchaseRequest; 
```

行项目

```
@OneToMany(mappedBy = "lineItem", cascade=CascadeType.ALL, orphanRemoval=true, fetch=FetchType.EAGER)
private List<LineItemFunding> lineItemFundings;

@XmlTransient
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name = "purchase_request_id", nullable = false)
private PurchaseRequest purchaseRequest; 
```

LineItemFunding

```
@XmlTransient
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name = "line_item_id", nullable = true)
private LineItem lineItem; 
```

// 需要移除这个 xmlTransient 以从 lineItem 方向深度扫描资金实体，但在资金方向中断它。资金不需要深入扫描 linItemFunding，因为 lineItemFunding 只是资金与 lineItem 的连接。

```
@XmlTransient
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name = "funding_id", nullable = true)
private Funding funding; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:54:32.457

刚刚解决了我自己的问题。除了从 lineItemFunding 中的 @ManyToOne 关系中删除 @XmlTransient 注释并将注释应用于 Funding 中的 @OneToMany 关系之外，我什么都不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:31:46.520

我试图避免使用在持久层以外的其他地方使用的实体，因为它们可能会被挥动，并且取决于所使用的持久性框架，我总是遇到这个问题。所以我使用了DTO。（这可能是旧时尚，但它解决了问题）

但是最近我看到了这一点，所以在您的情况下它可能会有所帮助 [http://wiki.eclipse.org/EclipseLink/Examples/SDO/JPA](http://wiki.eclipse.org/EclipseLink/Examples/SDO/JPA)

# ruby-on-rails - Heroku 上的预编译失败，initialize_on_precompile 设置为 false

> ID：11889131
> 
> 赞同：3
> 
> 时间：2012-08-09T17:50:22.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, heroku

我有一个正在尝试部署到 Heroku 的雪松堆栈的应用程序。

在部署的预编译阶段，我收到错误消息：

```
Your bundle is complete! It was installed into ./vendor/bundle
       Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       could not connect to server: Connection refused
       Is the server running on host "127.0.0.1" and accepting
       TCP/IP connections on port 5432?
       Tasks: TOP => environment
       (See full trace by running task with --trace)
       Precompiling assets failed, enabling runtime asset compilation 
```

通常我可以通过添加来解决这个问题

```
config.assets.initialize_on_precompile = false 
```

如[Heroku 文档](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar/)`config/initializers/production.rb`中所述。

不过，这一次似乎并没有解决问题。我还能尝试什么？

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.7'

gem 'jquery-rails'
gem 'mini_magick'
gem 'fog'
gem 'carrierwave'
gem 'mail_form'
gem 'client_side_validations'
gem 'remotipart', '~> 1.0'
gem 'thin'

group :production do
  gem 'pg'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

group :development do
  gem 'heroku'
  gem 'mailcatcher'
end

group :development, :test do
  gem 'rspec-rails'
  gem 'sqlite3'
end

group :test do
  gem 'capybara-webkit'
  gem 'database_cleaner'
  gem 'factory_girl_rails'
  gem 'database_cleaner'
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T06:56:39.197

你试过这个 Heroku 实验室修复吗？

[https://devcenter.heroku.com/articles/labs-user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)

最近才遇到，一直没有机会尝试，但是下次资产编译总是失败时会这样做......

这里还有一篇关于它的博客文章：

[http://blog.genuitytech.com/2012/01/31/heroku-labs-and-user-env-compile/](http://blog.genuitytech.com/2012/01/31/heroku-labs-and-user-env-compile/)

# javascript - Socket.IO 客户端库给出“欢迎使用 socket.io”消息

> ID：11889132
> 
> 赞同：4
> 
> 时间：2012-08-09T17:50:22.843
> 
> 标签：javascript, node.js, socket.io

一段时间后，我再次尝试使用 node.js 和 socket.IO，但它没有按预期工作：

## 我的设置

1.  从 github 下载 node.js 并在我运行在 debian 挤压上的**外部网络服务器上编译它**
2.  为 node.js 项目创建了一个目录
3.  使用 npm 在本地添加 socket.io
4.  创建了 socketIO_server.js 并添加了这行代码：

    ```
    var socketIO = require('socket.io').listen(8000); 
    ```

5.  启动了 socketIO_server.js 并且控制台日志显示“信息 - socket.io 已启动”

6.  打开[http://domain.tld:8000](http://domain.tld:8000)会显示消息“欢迎使用 socket.io”

## 问题

当我尝试通过[http://domain.tld:8000/socket.io/socket.io.js](http://domain.tld:8000/socket.io/socket.io.js)访问客户端库时，它还会显示消息“欢迎使用 socket.io”，但控制台日志显示“提供的静态内容/socket.io.js”。我不知道为什么会这样！我虽然并行运行的 nginx 服务器会导致这个问题，但停止服务器并没有改变任何东西。

感谢阅读和帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T21:25:33.813

这是由于在最近的更改中对 nodejs 的 EventEmitter 库的提交造成的。我在 socket.io 上打开了一个问题。

[https://github.com/LearnBoost/socket.io/issues/987](https://github.com/LearnBoost/socket.io/issues/987)

**更新**

从 socket.io 0.9.12 开始，此问题已得到修复

修复： [https ://github.com/LearnBoost/socket.io/blob/0.9.12/lib/manager.js#L116](https://github.com/LearnBoost/socket.io/blob/0.9.12/lib/manager.js#L116)

提交： [https ://github.com/LearnBoost/socket.io/commit/0d3313f536d0231932dd6617db449a071f5bc03a](https://github.com/LearnBoost/socket.io/commit/0d3313f536d0231932dd6617db449a071f5bc03a)

* * *

**侦听端口时无法提供 socket.io.js。（节点 0.9.1-pre，socket.io 0.9.9）**

由于最近提交到节点，您不能再拼接事件侦听器。这会导致 socket.io 在尝试访问 socket.io.js 客户端文件时显示欢迎消息，因为原始事件侦听器没有被删除。

破损示例：

```
var socketIO = require('socket.io').listen(8000); 
```

由于节点 0.9.1-pre 更改了您可以访问 EventEmitter 库的侦听器的方式，这会中断。

破坏socket.io的nodejs提交

> 使 EventEmitter.listeners(event) 返回 listeners 数组的副本，而不是数组本身。

```
EventEmitter.prototype.listeners = function(type) {
   if (!isArray(this._events[type])) {
     this._events[type] = [this._events[type]];
   }        
-  return this._events[type];   
+  return this._events[type].slice(0);
}; 
```

[https://github.com/joyent/node/commit/20e12e4be37f394672c001fdb9b05c0275731901#L1R245](https://github.com/joyent/node/commit/20e12e4be37f394672c001fdb9b05c0275731901#L1R245)

相对socket.io代码：

```
// reset listeners
this.oldListeners = server.listeners('request').splice(0); 
```

[https://github.com/LearnBoost/socket.io/blob/master/lib/manager.js#L115](https://github.com/LearnBoost/socket.io/blob/master/lib/manager.js#L115)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:51:09.197

几天前我遇到了这个问题。不得不将 socket.io 降级到 v0.8.7 并且工作正常。

# python - 这是查看可迭代项中的任何项目对于某个属性是否为真的有效且 Python 的方法吗？

> ID：11889134
> 
> 赞同：5
> 
> 时间：2012-08-09T17:50:26.797
> 
> 标签：python

假设您有一个可迭代的`thing`对象序列，称为`things`. 每个`thing`都有一个方法`is_whatever()`，如果它满足“任何”标准，则返回 True。我想有效地找出是否有任何项目`things`是什么。

这就是我现在正在做的事情：

```
any_item_is_whatever = True in (item.is_whatever() for item in items) 
```

这是一种有效的方法吗，即 Python 将在找到第一个 True 结果后立即停止从可迭代项生成项目？从风格上讲，它是pythonic吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T17:51:38.393

您应该使用内置函数`any()`：

```
any_item_is_whatever = any(item.is_whatever() for item in items) 
```

# winforms - Windows 形式的胖客户端应用程序 - 在同一台机器上安装多个版本

> ID：11889140
> 
> 赞同：0
> 
> 时间：2012-08-09T17:50:59.053
> 
> 标签：winforms, c#-4.0, windows-installer, thick-client

我们有一个旧的 Windows Form 胖客户端应用程序，它是一个内部工具。它作为 Windows 应用程序安装在每个人的桌面上。突然需要为同一内部工具的客户端特定版本创建单独的安装程序。有些人需要访问完全相同的应用程序的两个版本。我的问题是如何创建同一个应用程序的两个安装程序并让它在启动时显示以及桌面上的图标。我知道如果我更改设置属性上的产品代码，两个版本都会并排安装。对此的任何帮助将不胜感激。

谢谢，SDD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:47:51.807

在安装程序中，只需使用不同的产品 ID 和升级代码。具体如何执行取决于您拥有的安装程序类型。

# ios - IOS 5：使用在 UITableView 中加载的资产对象使用 StoryBoard 在另一个 ViewController 中显示

> ID：11889141
> 
> 赞同：1
> 
> 时间：2012-08-09T17:51:02.153
> 
> 标签：ios, ios5, tableview, alasset, tableviewcell

编辑：

从我之前的问题（如下）中，我掌握了我的资产（视频），并且我也有我的 PlayVideoViewController 的实现，但我一直在思考如何将这个资产传递给 playVideoViewController 对象。这是实现的代码片段：

*   (void)viewDidLoad { [超级 viewDidLoad];

    1.  ALAssetRepresentation *assetRepresentation = [asset defaultRepresentation];
    2.  NSURL *URL = [assetRepresentation url];
    3.  NSLog(@"url: %@", URL);

....}

在我的第 1 行中，它给了我一个“使用未声明的标识符‘资产’”的错误。如果我可以传递“资产”，那么我可以解决问题，但我看到的唯一示例使用 .nib 而不是情节提要，例如，使用 .NIB，调用是：PlayVideoViewController *playVideoViewController = [[PlayVideoViewController alloc] initWithNibName:@" PlayVideoViewController" bundle:nil 资产:asset]; 请帮助如何传递“资产”。

==

我无法弄清楚一件事，我希望有人可以帮助我。请注意，我使用的不是 .nib，而是故事板，这就是我被困在这里的原因。

我已将资产（视频）加载到 tableview 中，当用户选择 tableviewcell 时，应用程序将转换到仅播放视频的新视图控制器 (PlayVideoViewController)。从加载资产（*资产）并让用户选择它的类中，我有这个代码片段：

```
ALAsset *asset = [assets objectAtIndex:row];
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard.storyboard" bundle:nil];

PlayVideoViewController *playVideoViewController = [storyboard instantiateViewControllerWithIdentifier:@"PlayVideoViewController"];     
[self.navigationController pushViewController:playVideoViewController animated:YES ]; 
```

如何将选定的视频传递给 PlayVideoViewController 以便它只播放视频？我如何将其合并到我的代码中并请给我一个示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:00:57.100

这可能对其他人有帮助：为了解决这个问题，我只是在新的 viewcontroller 中创建了一个 ALAsset 对象，并在 storyBoard:instantiateViewControllerWithIdentifier 之后将该对象传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:55:36.757

`@property`在您的 PlayVideoViewController 的“ ”（接口）文件中创建一个“ ”，`.h`该文件采用文件 URL 或某种方式来引用您的视频。

然后，在你实例化你的 playVideoViewController 之后，在你推送之前，只需将该属性的值设置为文件 URL，这样你的新控制器就知道从哪里获取视频。

# xml - Sonar XML 插件：XPath 规则和命名空间

> ID：11889145
> 
> 赞同：0
> 
> 时间：2012-08-09T17:51:20.810
> 
> 标签：xml, xpath, namespaces, sonarqube

我们正在尝试实现[Sonar XML 插件](http://docs.codehaus.org/display/SONAR/XML+Plugin)来分析我们项目的 XHTML。我在使用 Xpath 规则和多个命名空间时遇到问题。我们想对文件运行 Xpath 检查它们是否包含多个不同的名称空间，但这似乎是不可能的。

默认情况下，Sonar 自动检测命名空间——在我们的例子中是 XML 或 XHTML 命名空间——并使用相关的模式。问题是我们在 XHTML 中使用[Primefaces 标签](http://www.primefaces.org/)，并且我们想使用 Sonar 的自定义 xpath 验证来检查一些带有 primefaces 标签的特定内容。例如`//p:outputPanel[not(@layout='block')`，在 XML 文件中查找特定元素。

我们将这个 XPath 规则放入 Sonar 并运行我们的检查：

```
mvn -f pom-xhtml.xml sonar:sonar 
```

发生的情况是，在其中**没有**Primefaces 标签的文件上，因此没有声明 Primefaces 命名空间，我们会收到以下错误：

```
[ERROR] [13:35:54.918] Could not analyze the file /Users/...snip.../header.xhtml
org.sonar.api.utils.SonarException: javax.xml.xpath.XPathExpressionException
    at org.sonar.plugins.xml.checks.XPathCheck.getXPathExpressionForDocument(XPathCheck.java:120) ~[na:na]
    ... snip ...
Caused by: javax.xml.xpath.XPathExpressionException: null
    at org.apache.xpath.jaxp.XPathImpl.compile(XPathImpl.java:408) ~[xalan-2.7.1.jar:na]
    at org.sonar.plugins.xml.checks.XPathCheck.getXPathExpressionForDocument(XPathCheck.java:118) ~[na:na]
    ... 40 common frames omitted
Caused by: org.apache.xpath.domapi.XPathStylesheetDOM3Exception: Prefix must resolve to a namespace: p
    ... snip ...
    ... 41 common frames omitted 
```

这种文件的一个例子可能是这一行文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<s:resource xmlns:s="http://jboss.com/products/seam/taglib" xmlns="http://www.w3.org/1999/xhtml" /> 
```

据我所知，因为 Sonar 正在尝试使用“p:”命名空间测试 Xpath 规则，所以它会在未声明该命名空间的文件上出错。我们宁愿不将所有命名空间添加到所有文件中，因为出于任何其他原因不需要它。

我看到 Sonar 可以处理自定义模式（使用 sonar.xml.schemas 选项），所以我创建了一个，然后将所需的名称空间导入其中。如果 Sonar 使用此模式进行分析，则可以声明 Xpath 检查所需的所有命名空间。

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <xs:import namespace="http://java.sun.com/jstl/core"/>
   <xs:import namespace="http://java.sun.com/jsf/facelets"/>
   <xs:import namespace="http://java.sun.com/jsf/html"/>
   <xs:import namespace="http://jboss.com/products/seam/taglib"/>
   <xs:import namespace="http://java.sun.com/jsf/core"/>
   <xs:import namespace="http://primefaces.prime.com.tr/ui"/>
</xs:schema> 
```

但是，当我尝试这样做时，我收到以下错误：

```
[ERROR] [12:59:30.197] Could not analyze the file /Users/...snip...header.xhtml
java.lang.NullPointerException: name
    at java.util.zip.ZipFile.getEntry(ZipFile.java:156) ~[na:1.6.0_33]
    ... snip ...
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) [plexus-classworlds-2.4.jar:na] 
```

这并不完全有帮助。如果我尝试一个空白模式：

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
</xs:schema> 
```

然后我们回到第一个错误。因此，声纳成功地指向了自定义模式，但它不起作用。因此，Sonar（或 Java？）似乎无法处理将其他名称空间作为 XML 模式的一部分导入。

我在我的架构中做错了什么可能导致这种情况吗？有没有人解决过涉及声纳的类似问题？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:51:34.260

好吧，这不是我要寻找的答案，但我们最终添加了所有需要为每个页面执行 XPATH 测试的名称空间声明。所以我们的短页变成了：

```
<s:resource xmlns:ui="http://java.sun.com/jsf/facelets" xmlns="http://www.w3.org/1999/xhtml" xmlns:c="http://java.sun.com/jstl/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:s="http://jboss.com/products/seam/taglib" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.prime.com.tr/ui" data="#{}" contentType="#{}" fileName="#{}"/> 
```

该页面不需要所有额外的命名空间声明，但它们使 XPath 检查在 Sonar 中工作。不理想，但......它的工作原理。

# c# - 部署我在 Visual Studio 2010 速成版中制作的 C# 应用程序

> ID：11889151
> 
> 赞同：1
> 
> 时间：2012-08-09T17:51:26.620
> 
> 标签：c#, .net, visual-studio, deployment, publish

我已经在 Visual Studio C# 2010 中完成了我的整个应用程序，并且它 100% 正常工作。部署我的应用程序的最佳方式是什么？

我需要它是单个文件，并且需要安装它：我的可执行文件、帮助文档文件、.NET 4 客户端配置文件以及某个目录的图标。我尝试了[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)应用程序，但它没有任何好的方法可以将我需要的其他文件打包在一起。我不能使用安装项目，因为我只有 Visual Studio 的 Express 版本。

我找到了一个我目前正在使用的名为[Inno Setup的程序。](http://en.wikipedia.org/wiki/Inno_Setup)它为我编译了安装程序，一切都很好，除了我找不到在安装中包含 .NET 4 客户端配置文件的方法；因此，当尝试在其他计算机上安装我的应用程序时，它总是会抛出错误，直到用户访问 Microsoft 的网站并下载 .NET；虽然这行得通，但它根本不是用户友好的，并且大多数将使用我的软件的客户都不精通计算机。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:19:22.357

研究使用[Windows Installer XML (WiX)](http://wix.sourceforge.net/)。您可以创建一个 Windows Installer 程序包来安装您的可执行文件、帮助文件、快捷方式等。.NET 4 客户端配置文件可以包含在引导程序中。如果需要，引导程序将调用客户端配置文件设置，然后调用您的 Windows 安装程序包。最近，WiX 已经包含了一个新系统，称为 Burn。

Windows Installer 是 Windows 上的标准安装程序包格式，可以在很多场景中轻松部署。与 Windows Installer 相比，第 3 方系统通常有很多缺点，这就是我避免使用 Inno Setup 等系统的原因。

# erlang - 在erlang中拆分ets

> ID：11889152
> 
> 赞同：1
> 
> 时间：2012-08-09T17:51:29.723
> 
> 标签：erlang, ets

我在使用 mapReduce 算法的课程中工作，所以我从一个大数据文件在 Erlang 中构建了一个 ets 表，我想同时处理它。结果表很大，我想知道是否有办法将一个大表拆分为几个较小的表，以便我可以使用 mapReduce 算法同时搜索表，有什么方法可以拆分一个大表表变成子表？？？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:59:51.023

我曾在一个 Intranet 应用程序上工作过，在该应用程序中，我大部分时间都必须将内容保存在 RAM 中。我创建了一个马厩`caching library`，帮助我抽象了这些`ETS`机制。在这个库中，我为工作人员`gen_servers`创建、拥有和公开`ETS`表的方法。我将它们命名为：`cache1`和`cache2`。这两个继续以冗余的方式将所有权转移给对方，以防其中一个出现问题。获取应用程序： [http](http://www.4shared.com/zip/z_VgKLpa/cache-10.html) : //www.4shared.com/zip/z_VgKLpa/cache-10.html 解压后使用`Emake file`重新编译，然后放入你的`Erlang Lib directory`

看看它是如何工作的，这里有一个shell吸引力。

```
F:\programming work\cache-1.0>erl -pa ebin
Eshell V5.9（使用 ^G 中止）
1> 应用程序：启动（缓存）。
好的
2> rd（学生，{姓名，年龄，性别}）。
学生
3> 缓存服务器：新（学生，设置，2）。
好的
4> cache_server:write(#student{name = "Muzaaya Joshua",
                        性别 = “男性”，年龄 = (2012 - 1987) })。
好的
5> cache_server:write(student,[#student{name = "Joe",sex = "Male"},
                #student{name = "Mike",sex = "Male"}]）。
好的
6> cache_server:read({student,"Muzaaya Joshua"})。
[#student{name = "Muzaaya Joshua",age = 25,sex = "Male"}]
7> 缓存服务器：读取（{学生，“乔”}）。
[#student{name = "Joe",age = undefined,sex = "Male"}]
8> 缓存服务器：获取表（）。
[{cache1,[学生]},{cache2,[]}]
9> rd（班级，{班级，no_of_students}）。
班级
10> 缓存服务器：获取表（）。
[{cache1,[学生]},{cache2,[]}]
11> 缓存服务器：新（类，集，2）。
好的
12> 缓存服务器：获取表（）。
[{cache1,[学生]},{cache2,[班级]}]
13> 缓存服务器：写（类，[
        #class{class = "Primary" ++ integer_to_list(N),
        no_of_students = 随机：统一（50）} || N <- 列表：seq(1,7)])
.
好的
14> cache_server:read({class,"Primary 6"})。
[#class{class = "小学六年级",no_of_students = 30}]
15> cache_server:delete({class,"Primary 2"})。
好的
16> 缓存服务器：获取缓存状态（）。
[{server_state,cache1,1,[学生]},
 {server_state,cache2,1,[class]}]
17> rd（食物，{名称，类型，值}）。
食物
18> 缓存服务器：新（食物，设置，2）。
好的
19> cache_server:write(food,[#food{name = "Orange",
                        类型=“水果”，价值=“维生素C”}]）。
好的
20> 缓存服务器：获取缓存状态（）。
[{server_state,cache1,2,[food,student]},
 {server_state,cache2,1,[class]}]
21>

```

现在，要了解 的重要性`ets:give_away/3`，让我们看看当`cache1`or`cache2`崩溃时会发生什么。请记住，当前服务器状态（显示表的当前所有者）是：

```
21> 缓存服务器：获取缓存状态（）。
[{server_state,cache1,2,[food,student]},
 {server_state,cache2,1,[class]}]
22>

```

让我崩溃`cache1`，我们看看。

```
22> gen_server:cast(cache1,stop)。
好的
        缓存服务器：cache2 已接管表：来自服务器的食物：cache1
23>
        缓存服务器：cache2 已从服务器：cache1 接管表：学生
23> 缓存服务器：获取缓存状态（）。
[{server_state,cache1,0,[]},
 {server_state,cache2,3,[student,food,class]}]
24>

```

同样，另一个：

```
24> gen_server:cast(cache2,stop)。
好的
        缓存服务器：cache1 已接管表：student from server：cache2
25>
        缓存服务器：cache1 已接管表：来自服务器的食物：cache2
25>
        缓存服务器：cache1 已接管表：来自服务器的类：cache2
25> 缓存服务器：获取缓存状态（）。
[{server_state,cache1,3,[class,food,student]},
 {server_state,cache2,0,[]}]
26>

```

而已 ！您可以使用源代码中的概念自己创建一些东西。该`ETS`库创建的表是`public`和，因此您可以使用函数`named`直接访问它们。`ETS`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:46:24.547

您可以同时搜索 ETS 表，而无需拆分表：

[http://www.erlang.org/doc/man/ets.html#new_2_read_concurrency](http://www.erlang.org/doc/man/ets.html#new_2_read_concurrency)

如果表很大，我建议您使用良好的匹配模式来帮助减少搜索大小：[http ://www.erlang.org/doc/man/ets.html#select-2](http://www.erlang.org/doc/man/ets.html#select-2)

# fortran - 如何对文件夹中的所有文件运行 FORTRAN 程序？

> ID：11889155
> 
> 赞同：3
> 
> 时间：2012-08-09T17:51:38.300
> 
> 标签：fortran, fortran77

截至目前，我正在打开一个扩展名为 .txt 的文件并在其上运行 fortran 代码。但是，如果我希望程序在具有各种扩展名的文件夹中的所有文件上运行。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:02:52.460

如果您被 FORTRAN77 卡住，一种可能的解决方案是从标准输入中读取输入文件名并相应地打开该文件：

```
character(len=9999) inputFile

read(unit=5,fmt=*)inputFile
open(unit=21,file=trim(inputFile)) 
```

然后，通过 shell 脚本循环在所有文件上执行您的程序：

```
for file in *;do
    echo $file | myFortranProgram
done 
```

如果您有更现代的编译器，则可以使用 Fortran 2003 功能`GET_COMMAND_ARGUMENT`：

```
character(len=9999) :: inputFile 

call GET_COMMAND_ARGUMENT(1,VALUE=inputFile)
open(unit=21,file=trim(inputFile)) 
```

然后如上所述通过循环执行您的程序：

```
for file in *;do
    ./myFortranProgram $file
done 
```

请记住，在循环文件时，您有责任确保您的 Fortran 程序能够处理这些文件，并且它能够处理异常，例如目录或其他一些文件扩展名，或者相应地从 shell 循环特定文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:55:53.690

我通常创建一个包含我想要处理的文件列表的文件，例如，在 Unix 操作系统上使用*ls*或*find命令。*这也允许使用编辑器修改列表。然后我设计 Fortran 程序从该文件中读取文件名，然后依次打开、处理和关闭这些文件。

如果您可以根据模式预测可能的文件名，则可以使用 INQUIRE 语句测试是否存在具有特定名称的文件。这可用于遍历所有可能的文件名。根据有多少可能的文件，这可能可行，也可能不可行。

# python - python - 如何将 unicode 文字添加到变量中？

> ID：11889156
> 
> 赞同：18
> 
> 时间：2012-08-09T17:51:40.453
> 
> 标签：python, unicode-literals

我见过一些这样的例子：

```
for name in os.listdir(u'somedir') : 
```

我的问题是我将 somedir 作为变量，那么如何附加 'u' 文字？

就像是

```
for name in ops.listdir(u+somedir) 
```

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T17:54:00.107

给定一个原始字节字符串，您可以通过解码将其转换为`unicode`对象 (Python 2.x) 或`str`对象 (Python 3.x)：

```
for name in ops.listdir(somedir.decode("utf-8")): 
```

使用对字节字符串进行编码的任何编码，而不是`"utf-8"`. 如果省略编码，将使用 Python 的标准编码（`ascii`在 2.x 中，`utf-8`在 3.x 中）。

有关详细信息，请参阅[Unicode HOWTO](http://docs.python.org/howto/unicode.html) ( [3.x](http://docs.python.org/py3k/howto/unicode.html) )。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T17:53:04.807

unicode(somedir)

例如使用内置函数

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-09T18:04:37.573

如果源`somedir`没有将其作为 Unicode 字符串提供（`isinstance(somedir, unicode)`为 False），那么您应该通过提供适当的字符编码对其进行解码（这取决于字节的来源）：

```
unicode_somedir = somedir.decode(encoding) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-13T22:51:57.570

简单的解决方案是使用 unicode 函数，如下所示：

x = unicode('1.2.3.4')

打印 x

u'1.2.3.4'

类型（x）

> 输入“unicode”

它现在将类型显示为 unicode。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-14T23:22:35.647

如果有人像我一样遇到这篇文章：

你可以做的一个小技巧是`(u'%s' % somedir)`

# java - 如何创建一个抽象类数组，以便可以将其初始化为特定的非抽象类（java）

> ID：11889162
> 
> 赞同：0
> 
> 时间：2012-08-09T17:51:59.180
> 
> 标签：java, arrays, generics, multidimensional-array, abstract

我有一个抽象类 Agent 和一堆扩展它的类，ModAgent，ClassAgent 等。

在另一个类 Toroid 中，我持有当前类型为 Agent[][] 的多维数组（嗯，嵌套数组，这是 java）。我想要做的是在 Toroid 的构造函数中采用实现代理的特定类型的对象，并将数组声明/初始化为该特定类型的代理，以便我可以访问 ClassAgent 中的特定方法未在代理中声明。谁能指导我如何去做？

其次，我有方法以列表形式返回该多维数组的较小部分。像数组一样，当前有一个返回类型的代理。有没有办法使返回类型特定于 Array 所持有的 Agent 类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:07:56.750

> 我想要做的是在 Toroid 的构造函数中获取实现代理的特定类型的对象，并将数组声明/初始化为该特定类型的代理

你可以使用类似的东西

```
public class Toroid <A extends Agent> {
    private final A[][] agents;

    public Toroid(Class<A> aClass) {
        Class<A[]> aClassArray = (Class<A[]>) Array.newInstance(aClass, 0).getClass();
        agents = (A[][]) Array.newInstance(aClassArray, 100); 
```

> 这样我就可以访问 ClassAgent 中未在代理中声明的特定方法。

你不能这样做，因为 A 只是一个代理。如果您想使用特定的方法，您将需要转换对象。

> 有没有办法使返回类型特定于 Array 所持有的 Agent 类型？

你可以退货`A[]`

# ios - MonoTouch UIWebView.LoadHtmlString 在设备上随机失败

> ID：11889169
> 
> 赞同：1
> 
> 时间：2012-08-09T17:52:19.953
> 
> 标签：ios, uiwebview, xamarin.ios

我`UIWebView`在表格的一个单元格中。我正在打电话`UIWebView.LoadHtmlString`，它在模拟器中运行良好，但在具有以下堆栈跟踪的设备上随机崩溃。

```
at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at EP.TapTeam.Application.Main (string[]) [0x00000] in /projects/tapteam/trunk/iOS/EP.TapTeam.UI/Main.cs:17
  at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>

Native stacktrace:

Thread started: 
 0   TapTeam                             0x01eb1d79 mono_handle_native_sigsegv + 244
 1   TapTeam                             0x01e9e429 mono_sigsegv_signal_handler + 172
 2   libsystem_c.dylib                   0x3669472f _sigtramp + 42
 3   UIKit                               0x32e452e9 -[UIWebView webView:didCommitLoadForFrame:] + 48
 4   UIKit                               0x32e445a7 -[UIWebViewWebViewDelegate webView:didCommitLoadForFrame:] + 22
 5   CoreFoundation                      0x3310d7a4 __invoking___ + 68
 6   CoreFoundation                      0x3308543d -[NSInvocation invoke] + 108
 7   CoreFoundation                      0x330850d9 -[NSInvocation invokeWithTarget:] + 36
 8   WebKit                              0x3328f7bd -[_WebSafeForwarder forwardInvocation:] + 408
 9   CoreFoundation                      0x3310d68d ___forwarding___ + 576
 10  CoreFoundation                      0x33084180 _CF_forwarding_prep_0 + 48
 11  CoreFoundation                      0x3310d7a4 __invoking___ + 68
 12  CoreFoundation                      0x3308543d -[NSInvocation invoke] + 108
 13  WebCore                             0x3210ec3d _ZL11SendMessageP12NSInvocation + 16
 14  WebCore                             0x321b1adf _ZL20HandleDelegateSourcePv + 66
 15  CoreFoundation                      0x330e1a79 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
 16  CoreFoundation                      0x330e375f __CFRunLoopDoSources0 + 382
 17  CoreFoundation                      0x330e44eb __CFRunLoopRun + 230
 18  CoreFoundation                      0x33074ec3 CFRunLoopRunSpecific + 230
 19  CoreFoundation                      0x33074dcb CFRunLoopRunInMode + 58
 20  GraphicsServices                    0x35f3f41f GSEventRunModal + 114
 21  GraphicsServices                    0x35f3f4cb GSEventRun + 62
 22  UIKit                               0x32c91d69 -[UIApplication _run] + 404
 23  UIKit                               0x32c8f807 UIApplicationMain + 670
 24  TapTeam                             0x000fe5b8 wrapper_managed_to_native_MonoTouch_UIKit_UIApplication_UIApplicationMain_int_string___intptr_intptr + 240
 25  TapTeam                             0x01de3568 EP_TapTeam_Application_Main_string__ + 152
 26  TapTeam                             0x003f3b74 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
 27  TapTeam                             0x01e9fc07 mono_jit_runtime_invoke + 1054
 28  TapTeam                             0x01f1a993 mono_runtime_invoke + 90
 29  TapTeam                             0x01f1d7eb mono_runtime_exec_main + 306
 30  TapTeam                             0x01f1da3f mono_runtime_run_main + 482
 31  TapTeam                             0x01ea472b mono_jit_exec + 94
 32  TapTeam                             0x01f70b84 main + 2224
 33  TapTeam                             0x00018fc0 start + 40 
```

我发现的唯一解决方法是延迟 1 秒调用 LoadHtmlString：

```
 NSTimer.CreateScheduledTimer(1f, () => {
            contentWebView.LoadHtmlString(someInfo, null);
        }); 
```

我想知道有没有真正的解决方案？

更新，我正在使用的代码：

```
public class OverviewControllerTableSource: UITableViewSource
{

public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
{
        var cell = tableView.DequeueReusableCell(_cellIdentifier) as OverviewCell_text;

        if (cell == null)
        {     
        cell = new OverviewCell_text(_cellIdentifier);  
        }

    return cell.Bind(_tableItems[indexPath.Section].Items[indexPath.Row]);
}

} 
```

和细胞

```
public partial class OverviewCell_text : UITableViewCell
{
    public OverviewCell_text (NSString cellId) : base(UITableViewCellStyle.Default, cellId)
    {
        NSBundle.MainBundle.LoadNib("OverviewCell_text", this, null);
            contentWebView.WeakDelegate = new UIWebViewDelegate();
            contentWebView.UserInteractionEnabled = false;
            contentWebView.Layer.CornerRadius = 5f;
            cellText.ScrollEnabled = false;
            contentWebView.BackgroundColor = UIColor.Clear;
    }

    public UITableViewCell Bind(string someInfo)
    { 
            // TODO next string without timer randomly crashes on device.
            if(someInfo != null)
            {
                NSTimer.CreateScheduledTimer(1f, () => {
                        contentWebView.LoadHtmlString(someInfo, null);
                });
        }

            return cell;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:13:32.640

将 UIWebView 设置为 ViewController 类的成员（不是内联变量）以进行垃圾收集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:33:52.277

我们需要查看一些代码才能真正为您提供帮助，但是，由于您的解决方法会增加延迟，因此您应该`UIWebView`在当前请求完成之前检查您是否没有重新进入内部。

IWO 请注意，这`UIWebView`不是[可重入](https://stackoverflow.com/q/9321991/220643)的，并且您的额外延迟使请求完成的可能性更大（但不安全）。

# xcode - 精灵表问题？

> ID：11889171
> 
> 赞同：0
> 
> 时间：2012-08-09T17:52:25.687
> 
> 标签：xcode, cocos2d-iphone, sprite, sprite-sheet

我用 Zwoptex 创建了精灵表并生成了 .plist 文件。我在将这些精灵表链接到我的 iOS 游戏时遇到问题。我将在 Zwoptex 上创建的 .plist 和 .png 文件加载到 Xcode，但无法识别更改。我不知道为什么会这样。游戏是用 cocos 创建的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:52:36.380

这是一个如何在 cocos2d 中使用 spriteSheet 的示例，我不确定这是否是您正在寻找的缺少细节的东西，但是

```
 [[CCSpriteFrameCache sharedSpriteFrameCache]addSpriteFramesWithFile:@"TreeSequance.plist"];
        CCSpriteBatchNode *treeSheet = [CCSpriteBatchNode batchNodeWithFile:@"TreeSequance.png"];

           CCSprite *smallerTree = [CCSprite spriteWithSpriteFrameName:@"Tree1.png"];

                smallerTree.position = ccp(500,500);
                [treeSheet addChild:smallerTree];
                [self addChild:treeSheet]; 
```

# php - Magento 的平面目录可见性列

> ID：11889175
> 
> 赞同：0
> 
> 时间：2012-08-09T17:52:46.347
> 
> 标签：php, magento, visibility, product, catalog

我几乎完成了我的平面目录的导出系统，但我对这个专栏有点怀疑`visibility`。我不知道我应该在那里放什么才能只获得可见和有效的产品。我能做些什么来解决这个问题？这是我现在正在使用的查询：

```
SELECT * FROM catalog_product_flat_1 WHERE visibility=4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:19:19.800

该列`visbility`与产品的活动状态无关，仅与产品处于活动状态时应显示的位置有关。该`visibility`列可能包含以下值之一：

*   1：单独不可见
*   2：目录
*   3：搜索
*   4：目录和搜索

因此，这取决于您是否还想获得仅在目录中可见而不是在搜索中可见的产品，如果这些产品确实存在。但很可能您确实`4`在关于可见性的 where 子句中使用。

# c++ - 删除字符串中<和>符号之间的单词c ++

> ID：11889176
> 
> 赞同：-1
> 
> 时间：2012-08-09T17:52:46.233
> 
> 标签：c++

我不知道从这里去哪里。我知道有些事情需要去做`ifstr.get(c)`。它复制了我在名为的文本文件中的确切单词，`project.txt`但我只需要删除任何具有字符`<`或`>`？任何帮助都会很棒。谢谢：）

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main() {
    string line;
    char c;

    ifstream ifstr("project.txt");
    ofstream ofstr("past.txt");
    if(ifstr.fail()){
        cout<<"error!"<<endl;
    } // if

    ifstr.get(c);
    while(!ifstr.eof()) {
        cout<<c;
        ifstr.get(c);

        ofstr<<line<<endl;
    } // while

    cout<<endl<<"copy complete"<<endl;

    ifstr.close();
    ofstr.close();

    system ("pause");
    return 0;
} // main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:09:10.997

我不确定，这就是你想要的。请看代码！

```
//we create a boolean value, to know if we started skipping
bool skipStarted = false;

while(ifstr.get(c))
{
    //if its a '<' and we havent started skipping jet,
    //then we start skipping, and continue to the next char.
    if(c=='<' && !skipStarted)
    {
        skipStarted = true;
        continue;
    }

    //if its a '>' and we started skipping,
    //then we finish skipping, and continue to the next char.
    if(c=='>' && skipStarted)
    {
        skipStared = false;
        ifstr.get(c);
        if(c==' ')
            continue; 
    }

    //if we are skipping, then we go to the next char.
    if(skipStarted)
        continue;

    //otherwise we simply output the character.
    ofstr<<c;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:23:32.437

只是在黑暗中的另一个镜头：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main() {

    ifstream ifstr("project.txt");
    ofstream ofstr("past.txt");
    if(ifstr.fail()){
        cout << "error!" << endl;
    } // if

    bool skipOutput = false;
    do
    {
        string word;
        ifstr >> word;
        if(!word.empty() && word[0] == '<')
        {
            skipOutput = true;
        }
        if(!skipOutput)
        {
            ofstr << word << " ";
            // replicate the output to stdout
            cout << word;
        }
        if(word[word.length()-1] != '>')
        {
            skipOutput = false;
        }
    } while(!ifstr.eof());
    cout << endl << "copy complete" << endl;

    ifstr.close();
    ofstr.close();

    //system ("pause"); Doesn't compile with my system
    return 0;
} // main 
```

如果您真的只是想过滤掉包含在 '<' 和 '>' 字符中的单词，这应该足够了。如果您的`<>`标签有更复杂的解析规则，您应该详细说明您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:35:37.517

标题中问题的伪代码（iostream-esque 条件）（也删除了尖括号）：

```
char c;
while (read_char_succeeded(&c))
    if (c == '<')
        while (read_char_succeeded(&c) && c != '>')
            ;
    else
        write_char(c); 
```

# java - 无法在 Selenium Webdriver（Java）中处理 showModalDialog 窗口

> ID：11889177
> 
> 赞同：1
> 
> 时间：2012-08-09T17:52:47.390
> 
> 标签：java, iframe, selenium, webdriver, showmodaldialog

我正在使用 Selenium webdriver(java) 自动化 Web 应用程序。我已经在应用程序的其他部分处理了弹出窗口，但我无法处理 showModalDialog 窗口。应用程序具有只读文本框，我必须通过单击“搜索”按钮来填充它，这将打开新的弹出窗口。

此文本框和 Serach 按钮的 HTML 代码如下。

```
 <tr>
 <td><label class="classLabel">Textbox<sup class="mandatory">*</sup></label></td>
 <td><input type="text" name="textbox" value="" readonly="readonly" class="someTextbox">
 <img src="/Some/url/search.gif" alt="Select Help" onclick="launch2()" />
 </td>
  </tr> 
```

单击搜索按钮后，将打开一个 showModalDialog 窗口，我必须单击一个单选按钮来填充文本框。

这个 showModalDialog 窗口有 iframe 元素，下面是 html 代码。

```
 <iframe src="/some/url.do?parameter=getData" width='100%' height='100%' border=0 >  
  </iframe> 
```

下面是我用来切换到弹出窗口并选择 iframe 的代码。在这里，测试用例只是在单击搜索按钮后停止，并且弹出窗口也出现了，但它没有处理弹出窗口。

```
 driver.findElement(By.cssSelector("img[alt=\"Select Help\"]")).click();
     String winHandleBefore = myD.getWindowHandle();        
       for(String winHandle : myD.getWindowHandles()){
       driver.switchTo().window(winHandle);
        }
       driver.switchTo().frame(0);
           driver.findElement(By.name("hier_data_id")).click(); 
```

如果有人知道如何处理 showModalDialog 窗口，那将非常有帮助。建议将不胜感激。提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:48:56.040

```
import java.util.Iterator;
import java.util.Set;

private static String popUp; 
```

//在弹出之前获取窗口句柄

```
Set<String> beforePopUp = driver.getWindowHandles();
    //do the click
driver.findElement(By.cssSelector("img[alt=\"Select Help\"]")).click();

  //get window handles after the click
Set<String> afterPopup = driver.getWindowHandles();

    //remove all window handles before the popup
 afterPopUp.removeAll(beforePopUp);
if(afterPopUp.size() == 1) {
popUp = (String) afterPopUp.toArray()[0];
 } else {// there might be more than on popups that might have been triggered by the click...do some error handling here}

 //switch to popUp
driver.switchTo().window(popUp);

//do your stuff 
```

# c++ - c ++：向量可以 包含派生类型的对象吗？

> ID：11889178
> 
> 赞同：9
> 
> 时间：2012-08-09T17:52:56.003
> 
> 标签：c++, vector, polymorphism, object-slicing

标题基本概括了所有内容。基本上，这样做是否合法：

```
class Base {
    //stuff
}

class Derived: public Base {
    //more stuff
}

vector<Base> foo;
Derived bar;
foo.push_back(bar); 
```

根据我看到的其他帖子，以下是可以的，但我不想在这种情况下使用指针，因为它更难使其线程安全。

```
vector<Base*> foo;
Derived* bar = new Derived;
foo.push_back(bar); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T17:55:45.070

不，`Derived`对象将被[*切片*](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)：所有其他成员都将被丢弃。

而不是原始指针，使用`std::vector<std::unique_ptr<Base> >`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T17:54:54.890

这是*合法*的，但会受到对象切片的影响。基本上，您将拥有一个`Base`对象向量。没有多态性，派生对象的类型信息将丢失...就好像您只是将`Base`对象添加到向量中一样。

您可以改用智能指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:06:04.267

```
vector<Base> foo;
Derived bar;
foo.push_back(bar); 
```

这等于推送 Base 对象，因为`push_back`声明如下：

```
void push_back ( const T& x ); 
```

因此，编译器将进行隐式降级转换并复制到向量内存池中。不，不可能包含`Derived`inside `vector<Base>`。他们会`Base`。

如果您添加一些虚函数，`Base`然后在其中覆盖它`Derived`，创建`Derived`对象，将其推入`vector<Base>`，然后从向量的新对象中调用它，您将看到`Base`调用了实现

# java - 我怎样才能使这个算法通用？

> ID：11889179
> 
> 赞同：0
> 
> 时间：2012-08-09T17:52:55.547
> 
> 标签：java

我正在研究 CMS 对象的对象缓存。我需要维护产品和子对象（选项和属性）之间的父/子关系。父级（产品）在第一个代码示例中进行了说明。

这很容易做到，但我正在寻找一种方法将孩子分配给父母，如第二个代码块所示，通用。

由于所有 CMS 对象都扩展了 CMSContent，因此我可以使用 ProductID。但是，有没有办法使字段（例如 ProductAttribute）通用，以便我可以将算法放入方法中并使用父对象和子对象调用该方法以进行属性分配？

我知道像 Hibernate 这样的 ORM 框架在这里是合适的，但这不适合，因为我有一个固定的数据库结构。

```
public class Product extends CMSContent {
    private List<ProductAttribute> productAttributes;
    private List<ProductOptions> productOptions;

    // getters,setters
} 
```

匹配它们的算法。

```
// attach Product Attributes to Product
for (Product p : listP) {
    Map<String, Object> parameters = new HashMap<String, Object>();
    for (ProductAttribute po : listPA) {
        parameters.put("pid", p.getPid());
        parameters.put("ref", po.getRid());

        int i = jdbcTemplate.queryForInt(sqlAttr, parameters);  // select count(*), 1 if matched.

        if (i == 1) {
            p.getProductAttributes().add(po);  // generic field?
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:15:51.143

产品中的这两种方法不会有帮助吗

```
public void add(ProductAttribute item){
  productAttributes.add(item);
}
public void add(ProductOption item){
  productOption.add(item);
} 
```

所以你应该能够只添加一个 ProductAttribute 或一个 ProductOption

# c# - “尝试重定向激活...”异常

> ID：11889182
> 
> 赞同：0
> 
> 时间：2012-08-09T17:53:04.143
> 
> 标签：c#, .net, exception, remoting

我的应用程序有一个 HTTP 通道可以在远程计算机上运行一个方法。我可以通过使用以下行在一台计算机上做到这一点：

```
System.Runtime.Remoting.RemotingConfiguration.RegisterWellKnownClientType(
   typeof(RemoteObject), uri); 
```

我还需要在另一台计算机上运行另一种方法。所以我使用了与上面相同的行，但将 URI 更改为另一台远程计算机的名称。但是，我得到了这个`RemotingException`：

> 尝试重定向已重定向的“RemoteClass.RemoteObject，RemoteObject”类型的激活。

我已经对此异常进行了一些研究，但没有找到太多关于它的信息。我已经查看了异常的文档，但并没有真正理解它。我试图找出错误的原因，并了解到如果我更改参数`typeof(RemoteObject)`以便`typeof()`应用于不同类型的对象，它工作正常。但是我仍然需要使用`RemoteObject`作为类型来运行该类中的方法。有解决办法吗？

# ajax - 从收集循环中获取表单字段值

> ID：11889187
> 
> 赞同：0
> 
> 时间：2012-08-09T17:53:23.293
> 
> 标签：ajax, forms, loops, collections, coldfusion

我正在遍历一个集合（表单）并测试表单字段名称中的“attachedFile”。成功后，我想将表单字段值添加到数组中。目前，我只获取表单字段名称而不是值。

```
<cfloop collection="#FORM#" item="field">
    <cfif FindNoCase('attachedFile',field) IS 1>
        <cfset fileNamesArray[fileNamesIndex] = field>
        <cfset fileNamesIndex = fileNamesIndex + 1>
    </cfif>
</cfloop> 
```

我尝试将索引[whatever]处的数组设置为#form.field#，但这会导致错误（未定义）。任何想法如何在这个循环中获得我的价值？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:03:19.950

```
<cfloop collection="#Form#" item="field">
    <cfset currentFieldName  = field>
    <cfset currentFieldValue = Form[field]>
</cfloop> 
```

[http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fe2.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fe2.html)

或者，如果您更喜欢脚本风格，并且您使用的是 CF9，请使用 for-in 循环

```
<cfscript>
    for (field in Form)
    {
        currentFieldName  = field;
        currentFieldValue = Form[field];
    }
</cfscript> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:52:08.267

在 Coldfusion 10 或 Railo 4 中，您可以在 cfscript 中使用 Underscore.cfc[库的](http://russplaysguitar.github.com/UnderscoreCF/)[filter()](http://russplaysguitar.github.com/UnderscoreCF/#filter)函数，如下所示：

```
var fileNamesArray = _.filter(form, function (value, field) {
    return FindNoCase('attachedFile', field);
}); 
```

filter() 函数返回一个通过真值测试的值数组，在本例中为 FindNoCase(...)。

使用函数式编程会产生更优雅和更具表现力的解决方案。

（注：我写的是Underscore.cfc）

# javascript - jquery用xml数据更新ul列表

> ID：11889189
> 
> 赞同：0
> 
> 时间：2012-08-09T17:53:26.710
> 
> 标签：javascript, jquery, html

我正在尝试使用 jQuery 函数更新我的 html 中的 ul 。我想阅读一个 xml（rss 提要），然后将每个标题添加到我的 ul 中。

jQuery 函数

```
<script type="text/javascript">

jQuery(function(){
 jQuery.getFeed({
    url: 'xml/rss-21.xml',
        success: function(feed) { 
       var $ul = $('ul#test').empty();  // the ul where xml will end up....

         $ul.append('<li data-theme="c"><a href="#page1" data-transition="slide">'feed.title'</a></li>');

  });
});
</script> 
```

HTML

```
<div id="result" 
                <ul data-role="listview" data-divider-theme="b" data-inset="true" id="test">
                    <li data-role="list-divider" role="heading">
                        News
                    </li>
                    <li data-theme="c">
                        <a href="#page1" data-transition="slide">
                            Dolbey and Alpha Systems Announce Strategic Alliance Partnership
                        </a>
                    </li>
                    <li data-theme="c">
                        <a href="#page1" data-transition="slide">
                            Dictate Into Your EMR
                        </a>
                    </li>
                    <li data-theme="c">
                        <a href="http://www.tristateis.com" data-transition="slide">
                            Win a Free Digital Pocket Memo
                        </a>
                    </li>
                </ul>
                  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:07:28.443

使用这个。这会将您的 RSS 作为 JSON 对象返回给回调函数：

```
function parseRSS(url, callback) {
   $.ajax({
   url: document.location.protocol + '//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=' + encodeURIComponent(url),
   dataType: 'json',
   success: function(data) {
   callback(data.responseData.feed);
   }
 });
} 
```

# string - 查找 M28K 是否唯一的算法

> ID：11889190
> 
> 赞同：0
> 
> 时间：2012-08-09T17:53:28.593
> 
> 标签：string, algorithm

今天小弟问了我一个问题，问题如下：

```
Given a list of strings & string M28K, where M28K represents a string which starts
from M, ends with K and has 28chars in between . Find if M28K is unique in the 
list of strings or not? 
```

我想出了以下算法来找到问题的解决方案：

对于每个字符串：

```
find string length(L)
  if(L==30) then
      if(str[0]=='M' && str[L-1]=='K') then
          verify rest of 28 characters are matching or not 
```

就时间复杂度而言，该解决方案似乎效率不高。谁能给出更好的算法来解决这个问题？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-09T18:17:20.717

我会去散列。通常，由于这听起来像是一个算法作业问题，以我的经验，我们不允许用散列来回答，因为它真的取决于你的散列函数。如果它不够好，那么您将不会获得每个字符串的唯一值。

我会根据字符串中的字符将字符串列表构建成二叉排序树。维护一个算法，如果字符串按字母顺序位于头节点之前，则将其放在左侧，如果在头节点之后，则将其放在右侧。当然是递归的。我们有一棵树。现在授予最坏的情况，这将在 O(n) 时间内完成，这实际上只是一个链表，但是在 m 或 n 区域的某个地方有一个好的头节点，这个查找可以在 O(log n) 内完成. 所以整个操作需要 O(n log n) 时间。

您提供的算法，最坏的情况将需要 O(n^2)。假设每个字符串有 30 个字符，并以 K 结尾并以 L 开头。除倒数第二个字符外。实际上，我们将搜索所有提供的字符串的 28 个字符。n^2 用于查找所有字符串的大小。每个字符串都需要 O(n) 时间，使其成为 n^2 算法。在我的算法中，我们每次都将问题减半，这提供了更快的搜索速度。

# xcode - xcode取消关联IBAction按钮h文件

> ID：11889193
> 
> 赞同：2
> 
> 时间：2012-08-09T17:53:33.680
> 
> 标签：xcode, ibaction

大家好，我如何取消关联ah文件中的按钮？我不小心将 IBAction 按钮关联到 h 文件如何删除关联？

我试图添加一张图片，但它不会让我感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:04:06.863

如果您单击按钮并查看该按钮的“连接检查器”（在 Xcode 项目窗口的右侧），您将能够“X”（即断开）操作连接。

当我这样做时，它应该如下所示：

![点击 X](../Images/d0891ecb5441bf79e11cce73a7cf3ff2.png)

# javascript - 关于 Node.JS、Jade 模板和 Javascript 选项对象

> ID：11889194
> 
> 赞同：0
> 
> 时间：2012-08-09T17:53:34.073
> 
> 标签：javascript, windows, node.js, command-line, pug

我目前正在 Windows 中使用 node.js 构建一个项目。我正在使用批处理文件来组装资源并通过命令行构建翡翠模板。使用 Jade，我使用开关 -o 来定义填充模板中本地化内容的 JS 对象

有一段时间，一切都很顺利。但是，对我的 JSON 查找的更改导致了错误：“输入行太长”

研究错误，我发现 Windows shell 对你的行的长度有限制。不幸的是，我的项目需要整个查找对象。但是，我开始想知道翡翠是否可以接受我的查找文件的路径，而不是包含文件内容的字符串。目前，我正在将内容构建到一个变量中并用那个ala调用jade：

```
SetLocal EnableDelayedExpansion
set content=
for /F "delims=" %%i in (%sourcedir%\assets\english.json) do set content=!content! %%i
::use the json file as a key for assembling the jade templates 
call jade %sourcedir% --out %destdir% -o"%content%"
EndLocal 
```

如果我可以使用查找文件的路径，那就容易多了。但是，我很确定如何做到这一点（如果可能的话）。Jade 的文档有点欠缺。

那么，简而言之，Jade 是否可以接受 JS 对象的文件路径而不是包含该对象的字符串？有没有更好的方法来构建不会超过限制的玉调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:56:52.857

编写一个 node.js 脚本，它将读取您的“资产”并调用玉。就像是：

```
var fs = require('fs'),
    _ = require('underscore'),
    async = require('async');

var sourceDir = 'path to the directory with your jade templates',
    destinationDir = 'path to the directory where you want the result html files to be contained in';

async.waterfall([
    async.parallel.bind(null, {
        serializedData: fs.readFile.bind(null, 'assets/english.json'),
        files: fs.readDir.bind(null, sourceDir),
    }),
    function (result, callback) {
        var data = JSON.parse(result.serializedData),
            files = result.files;
        async.parallel(_.map(files, function (file) {
            return async.waterfall.bind(null, [
                fs.readFile.bind(null, sourceDir + file),
                function (jadeSource, callback) {
                    process.nextTick(callback.bind(null, jade.compile(jadeSource)(data)));
                },
                fs.writeFile.bind(null, destinationDir + file)
            ]);
        }), callback);
    }
], function (err) {
    if (err) {
        console.log("An error occured: " + err);
    } else {
        console.log("Done!");
    }
}); 
```

然后在你的批处理文件中直接调用这个脚本，而不是枚举目录并手动调用jade。

它不仅可以解决您的问题，而且可以更快地工作，因为：

1.  I/O 操作是并行完成的；
2.  Node.js 在构建过程中只启动一次，而不是像现在这样为每个文件启动它。

# android - 安卓 Facebook 注销

> ID：11889200
> 
> 赞同：0
> 
> 时间：2012-08-09T17:53:44.877
> 
> 标签：android, facebook

我已使用 Android Facebook SDK 将 Facebook 连接集成到我的应用程序中。一切都很好，我只是有一个关于注销的问题。当用户退出实际的 Facebook 应用程序并返回到我的应用程序时，他们的会话仍然有效。**不应该注销 Facebook 本身会使我的应用程序的 Facebook 会话无效吗？**有没有人经历过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T06:31:20.267

我不清楚您的问题，如果您**在应用程序中从 Facebook 帐户注销问题，而**不是访问以下链接，这可能会对您有所帮助 :)

[android应用程序中的facebook sdk，只能登录，但无法注销？](https://stackoverflow.com/questions/17334545/by-using-facebook-sdk-in-android-app-only-able-to-login-but-not-able-logout)

# python - Python：file.read() 做什么？

> ID：11889202
> 
> 赞同：2
> 
> 时间：2012-08-09T17:53:55.820
> 
> 标签：python

*   操作系统：Ubuntu
*   语言：Python

所以我正在尝试读取文件的字节。我创建了一个仅使用 file.read() 并遍历字节的脚本。它涉及一个看起来像的角色

```
[ 0 0 ]
[ 0 3 ] 
```

我想我真正的问题是：这个角色代表什么？当我查看十六进制编辑器时，它显示为 ú，这是有道理的，因为十六进制是 FA。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:54:47.567

`file.read`将获取声明文件的二进制内容并将其填充到缓冲区中。

00 和 03 是控制字符 (00 = `NULL`, 03 = `END OF TEXT`)。您可能有兴趣参考 ASCII 表以了解更多详细信息。

**ASCII 表**：[http ://www.asciitable.com/index/asciifull.gif](http://www.asciitable.com/index/asciifull.gif)

# javascript - 选中时如何隐藏复选框中的复选标记

> ID：11889205
> 
> 赞同：1
> 
> 时间：2012-08-09T17:54:01.593
> 
> 标签：javascript, jquery, html, css

我在 23 列和 7 行的表中有复选框。我想以这样的方式设置复选框的样式，在选中时隐藏复选标记。要识别选中的项目，我需要更改复选框的背景图像，例如用颜色填充它。有人能告诉我如何在 Jquery/Javascript 和 CSS 中做到这一点吗？我尝试使用来自 [http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/custom-form-elements.js](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/custom-form-elements.js)的 Javascript 插件 在我的 php 页面中包含这个 Js 添加了 class= 样式。它似乎不起作用。

这是我的复选框的代码：

```
 <div id="checkboxes">
          <table id="custom-interval-tbl" class="form-layout" cellpadding="0" cellspacing="0">
              <?php foreach($days_of_week as $short => $long): ?>
                <tr>
                      <th scope="row"><?echo"<b>".$short."</b>"?></b></th>
                      <?php for($hour = 0; $hour <= 23; ++$hour): ?>
                        <td><input type="checkbox" class="styled" name="custom_interval[<?=$short?>][<?=$hour?>]" value="<?=$hour?>" <?=isset($custom_intervals[$short][$hour]) ? 'checked="checked"' : ''?> /></td>
                      <?php endfor; ?>
                </tr>
                 <?php endforeach; ?>
          </table>
          </div>
        </div> 
```

我需要更改脚本中的任何内容吗？感谢我们的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:59:08.270

```
$(document).ready(function() {
  $('input:checkbox').on('change', function(){
    $(this).hide();
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:26:56.353

您可以使用此表单元素样式化 jquery 插件。

[http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)

只是您需要使用没有选中图标的背景图像。

附加了一个示例背景图像，以便在没有选中图标的情况下使用。你可以简单地用原来的替换它。 ![在此处输入图像描述](../Images/78280955bd166426d7de485ddfe64ff1.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-05T10:09:28.323

将此代码放入您的 css 文件中：

```
 input[type="checkbox"]:focus{
 outline:none !important; } 
```

此处`:focus`指示选择复选框时的状态。并且 outline 属性指向轮廓（但与代码中的焦点一样）。它将影响您表格中的所有复选框，并且选择后不会显示任何复选标记。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-12T00:28:32.840

```
document.getElementById("input_checkbox_id").checked = false; 
```

# html - HTML5 App Cache 在 Firefox 11 中失败 - 适用于 Chromium

> ID：11889207
> 
> 赞同：2
> 
> 时间：2012-08-09T17:54:05.040
> 
> 标签：html, session-cookies, application-cache

我已经在 Chromium 下成功测试了 HTML5 Application Cache。例如：

```
CACHE MANIFEST
http://localhost/pycoh-mnt/materialRequisition/create 
```

上面的 URL 呈现一个 HTML5 文件。当我使用基于 cookie 的身份验证保护它时，**Firefox 11 失败**；我收到一个我找不到描述的错误，但我认为是由于 HTTP 重定向响应造成的。如果我公开 URL，它会正确缓存它。

另一方面，**Chromium 18**在这两种情况下都能正确处理缓存。恐怕 Firefox 在发出缓存请求时没有发送 cookie 信息。

任何的想法？谢谢！

PD。我忘了说我正在运行 64 位应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:02:19.707

检查是否在 FF 中禁用了第三方 cookie。当前 FF 中存在一个错误，当禁用 3rd 方 cookie 时，该错误会阻止在清单请求中发送 cookie：

[http://bugzilla.mozilla.org/show_bug.cgi?id=722683](http://bugzilla.mozilla.org/show_bug.cgi?id=722683)

# iphone - 为 iOS 模拟器设置默认比例

> ID：11889212
> 
> 赞同：3
> 
> 时间：2012-08-09T17:54:21.343
> 
> 标签：iphone, ios, xcode, ipad, ios-simulator

有没有办法设置 iOS 模拟器应该打开的默认比例，例如 75%？

New iPad 的原始分辨率对于我的显示器来说太大了，所以我每次想要测试应用程序时都必须按 ⌘+2 或 ⌘+3 ，同时能够看到整个屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:55:55.273

我以前看过这方面的问题，答案是否定的。如果答案是肯定的，我会喜欢它，但事实并非如此。我希望 Apple 在未来的版本中添加此功能。

# javascript - 在 JavaScript 中使用 parseFloat() 或 parseInt() 和正则表达式（转换 CSV 文件）

> ID：11889221
> 
> 赞同：0
> 
> 时间：2012-08-09T17:54:47.503
> 
> 标签：javascript, regex, string, floating-point, integer

我正在将 CSV 文件转换为本地二维数组。我想知道是否有更好的方法将字符串转换为浮点数/整数，而不是使用正则表达式，然后使用 parseFloat()/parseInt。

想法/建议？

```
// numex() - checkes to see if the string (str) is a number
// returns number.valid (true||false) and number.value = (float||int||string)
numex = function(str){
  number = {};
  number.valid = false;
  number.value = str;
  // if we see a number then convert it to a floating point or integer
  if((number.value.search(/[^0-9^\.^\$^\%^\-^\"^,^ ]+/) < 0) && str.length > 0) {  
    number.valid = true;
    number.value = str.replace(/[^\-^0-9^\.]+/g, ''); // TODO add % coversion code for example if we see a 10% covert it to .1
    if(number.value.search(/[\.]/) >= 0) {  
       number.value = parseFloat(number.value); // replace floating point
    } else {
       number.value = parseInt(number.value); // replace integers
    }
  }
  return number; // number.valid = true or false;
}

var num = numex("1.101");
alert(num.value); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:23:36.593

我认为您根本不需要使用正则表达式。试试这个：

```
var num = {};  
num.value = new Number(str);  
num.valid = !isNaN(num.value); 
```

Number 构造函数比 parseInt 和 parseFloat 更严格，因为它不接受像`10aaa`or`1.2bbb`这样的字符串，因此不需要执行正则表达式检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T03:16:06.973

我大大简化了代码，并使用了与 LeZuse 类似的东西。

isNaN(值) || 价值 == ""

[https://github.com/designpro/jCSV](https://github.com/designpro/jCSV)

# javascript - 从 Google 地图 URL 中提取 DirectionsResult

> ID：11889226
> 
> 赞同：0
> 
> 时间：2012-08-09T17:55:12.240
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在制作一个（新版本的）工具，将方向从谷歌地图转换为 GPX 文件。测试版运行良好：它使用 Google Maps Javascript API (v3) 在网站上嵌入地图，您可以使用与 Google Maps 主页面相同的方法创建路线。

然而，这个站点的一个（可能是常见的）用例（以及在 Google[更改其未记录的 &output=kml 接口](https://stackoverflow.com/questions/11680872/google-maps-output-kml-broken)之前的先前版本的工作方式！）是让人们在主 Google 地图上规划他们的路线并保存链接（像[这样一](https://maps.google.co.uk/maps?saddr=Unknown%20road&daddr=51.82571,-1.79752%20to:B4020%20to:51.72228,-1.43255%20to:B4001&hl=en&ll=51.70363,-1.654816&spn=0.305534,0.815735&sll=51.682774,-1.667175&sspn=0.305675,0.815735&geocode=Fe3uEwMd_znk_w;FS7MFgMdcJLk_ykD5mQuJTtxSDHgWC3MI4sNEw;FdYZFgMd7WHn_w;FSg4FQMdGiTq_ymp-yJAfMl2SDGhNuPMI4sNEw;FZq5EgMdyvfo_w&mra=dme&mrsp=2&sz=11&via=1,3&t=m&z=11)）以备将来使用。然后，他们会将此链接粘贴到站点中，并将该路由转换为 GPX 文件。

有什么方法可以从 Google Maps URL 或 Google Maps 主页面中提取[DirectionsResult](https://developers.google.com/maps/documentation/javascript/reference#DirectionsResult)（可能是通过将 URL 发送到 Google Maps API 进行解析或使用页面本身的书签）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:09:36.000

DirectionsResult 对象不在用户可以从 maps.google.com 获得的链接中。然而，端点和任何最终的航路点都是，并且给定相同的端点，路由引擎应该产生相同的结果。

* * *

## 编辑

以下是反汇编链接中的 URL。（我省略了＆符号）。我计算了 24 个航路点（包括 2 个终点）。唯一的谜团在于“地理编码”参数。

```
https://maps.google.co.uk/maps?
saddr=Unknown+road  //1
daddr=51.59782,-2.08838 //2
+to:51.74885,-1.94076   //3
+to:51.89255,-1.87129   //4
+to:51.82571,-1.79752   //5
+to:B4020   //6
+to:51.8183,-1.41985    //7
+to:51.72228,-1.43255   //8
+to:51.6239798,-1.3071767   //9
+to:B4001   //10
+to:51.34501,-1.34062   //11
+to:51.35822,-1.12071   //12
+to:51.31526,-1.02412   //13
+to:51.08784,-1.62069   //14
+to:51.29048,-1.73004   //15
+to:51.21761,-1.98589   //16
+to:51.397,-2.13542 //17
+to:Gloucester+Rd%2FA46 //18
+to:51.69001,-2.22161   //19
+to:51.81753,-2.07376   //20
+to:Southam+Ln  //21
+to:52.06075,-1.95706   //22
+to:52.1244,-1.64775    //23
+to:Unknown+road    //24

hl=en
sll=51.421477,-1.238708
sspn=0.804988,2.425232
geocode=Fe3uEwMd_znk_w%3BFfxREwMdRCLg_ylHpOCHwW1xSDHRnVfMI4sNEw%3BFfKfFQMd6GLi_ymv2fIl5RVxSDFAVssIXhupMA%3BFUbRFwMdRnLj_yk75kbkvCNxSDHw_q6FJ4sNEw%3BFS7MFgMdcJLk_ykD5mQuJTtxSDHgWC3MI4sNEw%3BFdYZFgMd7WHn_w%3BFTyvFgMdtlXq_ymvJFBAac52SDFgrE_MI4sNEw%3BFSg4FQMdGiTq_ymp-yJAfMl2SDGhNuPMI4sNEw%3BFSu4EwMd2A3s_ylFwdt-trl2SDF0LAm28EHw6A%3BFZq5EgMdyvfo_w%3BFXJ2DwMdNIvr_yn381tpGqh2SDHyCAjGbJ6ylw%3BFQyqDwMdOubu_ykbWNAI8p92SDEglIatLa4OEw%3BFTwCDwMdiF_w_yl5ij0IOid0SDHaHrE5DElJBg%3BFeCJCwMdLkXn_yl_I3MRXvFzSDEA3pytLa4OEw%3BFXChDgMdCJrl_ynf-pMZIeNzSDHByGFPQfQQEw%3BFcqEDQMdnrLh_yk5pddkcdxzSDGx1yhQQfQQEw%3BFYhBEAMdhGrf_yn9N9ICjnxxSDESypqQN61DoA%3BFczUEAMdiOLb_w%3BFRq6FAMd1hne_ylrQ8v5YQtxSDFgr3TNI4sNEw%3BFTqsFgMdYFvg_ykTvsctjBBxSDGlvLvm_K2I9g%3BFWphGAMd4rrg_w%3BFU5iGgMdPCPi_ym5URqPnOBwSDGQ6kLMI4sNEw%3BFfBaGwMdetvm_ylznhar3NNwSDFuGBHuA73ljw%3BFeB7GQMdItPn_w
mra=dpe
mrsp=11
sz=9
via=1,2,3,4,6,7,8,10,11,12,13,14,15,16,18,19,21,22
t=m
z=8 
```

这是地图参数的解释，（我知道的最好的）： http: [//mapki.com/wiki/Google_Map_Parameters](http://mapki.com/wiki/Google_Map_Parameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T11:48:18.387

新的 Google 地图不保证 URL 中存在所有路线点，对于缩短的 url 尤其如此。

不久前，我编写了一个工具，可以将新的 Google 地图格式转换为 gpx 文件。

[http://labs.coruscantconsulting.co.uk/garmin/gpxgmap/convert.php](http://labs.coruscantconsulting.co.uk/garmin/gpxgmap/convert.php)

它还可以返回 JSON 响应。

# c# - 使用 select() 的异步 .NET 套接字和标准套接字：为什么 select() 会阻止异步回调的发生？

> ID：11889227
> 
> 赞同：2
> 
> 时间：2012-08-09T17:55:11.680
> 
> 标签：c#, .net, winapi, c++-cli, winsock

我有一个用 C++/CLI 编写的应用程序，它使用了一个用 C# 编写的库。该应用程序是使用标准套接字 API 编写的，并使用 select() 来复用一堆普通的非异步套接字。但是，第三方库使用 .NET 套接字并使用异步结果和回调。

这是场景：我在主线程（一个主要使用本机样式代码的 C++/CLI 应用程序）中创建了一堆常规套接字。我创建了第三方库供应商的 C#“会话”对象，该对象在内部有一堆来自 .NET 类的异步套接字。

我注意到的是，如果我在实例化 C#“会话”对象的主线程中将 NULL 超时参数放入 select() 中，则根本不会为它们的 .NET 套接字进行异步回调。如果我使用 1 秒的超时时间，并且在我的非异步套接字上没有发生其他活动，那么在 select() 超时之前不会传递异步套接字回调。

不知何故， select() 正在阻止回调发生在 .NET 套接字上。我该如何避免这种情况？是否有一些替代的轮询方法可以用于旧的套接字，仍然允许 .NET 套接字传递它们的异步回调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:03:53.733

我找到了解决方案。

在 .NET 中使用的 AsyncCallbacks 中，你不能有任何阻塞的函数，包括 send()/recv() 函数——即使它们是非阻塞的[1]（至少根据我自己的测试）。在 AsyncCallback 中调用阻塞函数，行为未定义。一旦我从代码中摆脱了这种“不确定性”，事情就开始正常工作了。

我通过编写一些将 select() 换成 WaitForMultipleObjectsEx() 的策略类重新模板化了我的类，并通过在 AsyncCallback 中放置一个 SetEvent() 来触发多路复用来解决该问题。这似乎解决了大部分问题。

[1] 编辑：见下面的评论。我是否在非阻塞或阻塞套接字上使用 send() 似乎对“破坏事物”和进入未定义的行为没有影响。

# javascript - 在移动 Safari 上向下拖动时，触摸事件停止触发 - ipad html5

> ID：11889231
> 
> 赞同：2
> 
> 时间：2012-08-09T17:55:20.043
> 
> 标签：javascript, ipad, html, ios5, webkit

当我添加事件侦听器以考虑触摸事件时，例如 touchmove 和 touchstart

```
 document.addEventListener("touchstart", function(event){
            event.preventDefault();
            document.getElementById("fpsCounter").innerHTML = "touch start";
            trace("touch start");
        }, false);
        document.addEventListener("touchmove", function(event){
            event.preventDefault();
            var x = event.touches[0].pageX - getCanvasOffset().offsetLeft; 
            var y = event.touches[0].pageY - getCanvasOffset().offsetTop;

            document.getElementById("fpsCounter").innerHTML = "touch touchmove "+x+"  "+y;
            trace("touch touchmove");
        }, false);
        document.addEventListener("touchend", function(event){
            event.preventDefault();
            document.getElementById("fpsCounter").innerHTML = "touch end";
            trace("touch touch end");
        }, false);
        document.addEventListener("touchcancel", function(event){
            event.preventDefault();
            document.getElementById("fpsCounter").innerHTML = "touch cancel";
            trace("touch touch cancel");
        }, false);

    } 
```

touchMove 工作正常，直到我开始向下移动，因为整个 html 页面开始被 safari 向下滚动。当我释放时，html 页面弹回原来的位置。html 页面内的任何元素都不会溢出 ipad 的边界。我怎样才能防止浏览器的拖动 html 页面功能？我尝试 event.preventDefault() 没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:49:01.613

您可以尝试取消事件（移动而不仅仅是使用 preventDefault）

```
event.cancelBubble = true;
event.returnValue = false;
if (event.stopPropagation) event.stopPropagation();
if (event.preventDefault) event.preventDefault(); 
```

# asp.net - 遍历 xmltextreader

> ID：11889233
> 
> 赞同：0
> 
> 时间：2012-08-09T17:55:25.463
> 
> 标签：asp.net, .net, xmlreader, xmltextreader

我有以下格式的 xml。

```
<?xml version="1.0" encoding="UTF-8" standalone= "yes"?>
<rss>
<report name="rpt1">
<title>AAA</title>
<image></image>
<weblink></weblink>
<pdflink></pdflink>
<pdfsize></pdfsize>
</report>
<report name="rpt2">
<title>BBB</title>
<image>CCC</image>
<weblink>DDD</weblink>
<pdflink>EEE</pdflink>
<pdfsize>FFF</pdfsize>
</report>
</rss> 
```

现在我想迭代这个 xml 并获取报告节点，然后从那里得到子节点，如 title/pdflink/size 等，这将是直通的。使用 for 循环进行循环。我想使用 xmltextreader 来完成这个。我尝试使用while，但迭代后我只得到1个循环。我不知道为什么。如果通过 for 循环我如何迭代，for(loop when reader.element("reports)){} 然后获取其余节点并将它们放入数组或列表中。一旦我将它们存储在列表中我想在提要中对它们进行 dipaly。这是最好的方法吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:45:46.357

就我而言，我担心加载大型文档的性能。我所做的是在我的对象上定义一个构造函数来接收 XmlReader 和水合物 - 在阅读器到达完整节点后将其传回。

这使我可以在读取每个对象时将填充的对象返回为 IEnumerable。然后我启动一个新的任务/线程来处理该单个项目并返回处理文件。

```
private IEnumerable<Report> readReports(Stream reader)
{
    var settings = new XmlReaderSettings();
    settings.IgnoreWhitespace = true;
    var xmlReader = XmlReader.Create(reader, settings);
    xmlReader.MoveToContent();
    xmlReader.Read();
    while (!xmlReader.EOF)
    {
        if (xmlReader.Name.ToUpper() == "report") 
            yield return new Report(xmlReader);

        xmlReader.Read();
    }
}

public Report(XmlReader reader) : this()
{
    reader.MoveToContent();
    if (reader.IsEmptyElement)
    {
        reader.Read();
        return;
    }

    reader.Read();
    while (!reader.EOF)
    {
        if (reader.IsStartElement())
        {
            switch (reader.Name.ToLower())
            {
                case "order_id":
                    this.OrderId = reader.ReadElementContentAsString();
                    break;
                    // abreviated the rest of the fields
                default:
                    reader.Skip();
                    break;
            }
        }
        else if (reader.Name.ToLower() == "report") //this watches for the end element of the container and returns after populating all properties
            return;
    }
} 
```

如果有更好的方法或者这里有任何错误，请让我知道，我绝对会感谢社区其他人的任何反馈。

# html - 删除页脚中多余的黑色背景

> ID：11889235
> 
> 赞同：0
> 
> 时间：2012-08-09T17:55:28.143
> 
> 标签：html, css

我有一个html页面，背景是黑色的。主界面有点红色。请看图片。 ![网络](../Images/b4405c75754f4cbe548b19773b1c2b86.png)

如果您不知道，请忽略亚洲字体（嵌入图像中）。您可以看到左右两侧的红色部分下方也有很多黑色部分。

我真的不知道为什么会导致它。

整个html代码：

```
<!DOCTYPE>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title><style type="text/css">

</style>
</head>

<body bgcolor="#000000">
<!-- ImageReady Slices () -->
<div align="center">
<table border="0" cellpadding="0" cellspacing="0" width="815">
  <tbody><tr>
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="1" width="349"></td>
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="1" width="77"></td>
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="1" width="56"></td>
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="1" width="106"></td>
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="1" width="227"></td>
  <td></td>
</tr>
<tr>
  <td colspan="5" height="116"> <img src="http://img543.imageshack.us/img543/6433/test01.gif" alt="" usemap="#Map4" border="0" height="116" width="815"></td>
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="116" width="1"></td>
</tr>
<tr>
  <td colspan="2" align="left" bgcolor="#b52904" valign="top">
    <div align="center">
      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0" height="140" width="400">
        <param name="movie" value="Artwork/mainalbum.swf">
        <param name="quality" value="high">
    <embed src="Artwork/main.swf" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" height="140" width="400"></object>
    </div></td>
  <td colspan="3" rowspan="2"> <img src="http://img267.imageshack.us/img267/7442/test03.gif" alt="" usemap="#Map3" border="0" height="217" width="389"></td>
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="140" width="1"></td>
</tr>
<tr>
  <td colspan="2" rowspan="2"> <img src="http://img594.imageshack.us/img594/2240/test04.gif" alt="" height="109" width="426"></td>
  <td height="77"> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="77" width="1"></td>
</tr>
<tr>
  <td colspan="2" height="32"> <img src="http://img210.imageshack.us/img210/579/test05.gif" alt="" usemap="#Map2" border="0" height="32" width="162"></td>

  <td rowspan="3" align="left" bgcolor="#b52904" valign="top"><p><font color="#ffffff"><strong>News:</strong></font></p>

      <p><a href="cn/church_life.html">- Church life albums </a></p>
      <p><a href="cn/res_sermons.html">Sermon</a></p>
      </td>
      <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="32" width="1"></td>
     </tr>
        <tr>
        <td rowspan="3" bgcolor="#b52904" valign="top"> <img src="http://img820.imageshack.us/img820/9735/test07.gif" alt="" height="135" width="349"></td>
        <td colspan="2" align="left" valign="top"> <img src="http://img839.imageshack.us/img839/4696/test08.gif" alt="" usemap="#Map" border="0" height="53" width="133"></td>
       <td rowspan="3" bgcolor="#b52904">&nbsp; </td>
       <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="53" width="1"></td>
      </tr>
      <tr>
     <td colspan="2" rowspan="2" bgcolor="#b52904"><img src="http://img7.imageshack.us/img7/743/test10w.gif" height="82" width="133">
     </td>
     <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="80" width="1"></td>
    </tr>
    <tr>
    <td height="2"> <img src="http://img594.imageshack.us/img594/6978/test11m.gif" alt="" height="2" width="227"></td>
    <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="2" width="1"></td>
    </tr>
    </tbody></table>
    <!-- End ImageReady Slices -->
    </div>

   </body>
   </html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:57:24.947

删除`bgcolor="#000000"`以`<body>`摆脱黑色背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:05:17.767

要更改表格宽度，请将其设置为 100%：

```
<!DOCTYPE> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<title></title><style type="text/css"> 

</style> 
</head> 

<body bgcolor="#000000"> 
<!-- ImageReady Slices () --> 
<div align="center"> 
<table border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tbody><tr> 
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="1" width="349"></td> 
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="1" width="77"></td> 
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="1" width="56"></td> 
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="1" width="106"></td> 
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="1" width="227"></td> 
  <td></td> 
</tr> 
<tr> 
  <td colspan="5" height="116"> <img src="http://img543.imageshack.us/img543/6433/test01.gif" alt="" usemap="#Map4" border="0" height="116" width="815"></td> 
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="116" width="1"></td> 
</tr> 
<tr> 
  <td colspan="2" align="left" bgcolor="#b52904" valign="top"> 
    <div align="center"> 
      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0" height="140" width="400"> 
        <param name="movie" value="Artwork/mainalbum.swf"> 
        <param name="quality" value="high"> 
    <embed src="Artwork/main.swf" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" height="140" width="400"></object> 
    </div></td> 
  <td colspan="3" rowspan="2"> <img src="http://img267.imageshack.us/img267/7442/test03.gif" alt="" usemap="#Map3" border="0" height="217" width="389"></td> 
  <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="140" width="1"></td> 
</tr> 
<tr> 
  <td colspan="2" rowspan="2"> <img src="http://img594.imageshack.us/img594/2240/test04.gif" alt="" height="109" width="426"></td> 
  <td height="77"> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="77" width="1"></td> 
</tr> 
<tr> 
  <td colspan="2" height="32"> <img src="http://img210.imageshack.us/img210/579/test05.gif" alt="" usemap="#Map2" border="0" height="32" width="162"></td> 

  <td rowspan="3" align="left" bgcolor="#b52904" valign="top"><p><font color="#ffffff"><strong>News:</strong></font></p> 

      <p><a href="cn/church_life.html">- Church life albums </a></p> 
      <p><a href="cn/res_sermons.html">Sermon</a></p> 
      </td> 
      <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="32" width="1"></td> 
     </tr> 
        <tr> 
        <td rowspan="3" bgcolor="#b52904" valign="top"> <img src="http://img820.imageshack.us/img820/9735/test07.gif" alt="" height="135" width="349"></td> 
        <td colspan="2" align="left" valign="top"> <img src="http://img839.imageshack.us/img839/4696/test08.gif" alt="" usemap="#Map" border="0" height="53" width="133"></td> 
       <td rowspan="3" bgcolor="#b52904">&nbsp; </td> 
       <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="53" width="1"></td> 
      </tr> 
      <tr> 
     <td colspan="2" rowspan="2" bgcolor="#b52904"><img src="http://img7.imageshack.us/img7/743/test10w.gif" height="82" width="133"> 
     </td> 
     <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="80" width="1"></td> 
    </tr> 
    <tr> 
    <td height="2"> <img src="http://img594.imageshack.us/img594/6978/test11m.gif" alt="" height="2" width="227"></td> 
    <td> <img src="http://img33.imageshack.us/img33/9060/spacerusa.gif" alt="" height="2" width="1"></td> 
    </tr> 
    </tbody></table> 
    <!-- End ImageReady Slices --> 
    </div> 

   </body> 
   </html> 
```

# c# - 如何使用 c# 传输多个文件？

> ID：11889239
> 
> 赞同：1
> 
> 时间：2012-08-09T17:55:37.217
> 
> 标签：c#, sockets, tcp, file-transfer

我想将文件夹从客户端传输到服务器。我在此[链接](http://www.codeproject.com/Articles/24017/File-Transfer-using-Socket-Application-in-C-NET-2)上找到了传输文件的代码，并且工作正常。

但我想传输多个文件，但出现错误，因为只传输了 1 个文件。我修改了代码并使用了 FolderBrowseDialogue 而不是 OpenFileDialogue。我使用以下代码传输文件。

```
foreach (string f in Directory.GetFiles(dir))
{
    FTClientCode.SendFile(f);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:08:45.240

我发现了问题。当**backgroundWorker1**调用**StartServer()**时，问题出在服务器端，所以服务器只启动了一次，并且这个函数再也没有被调用过，所以我在**StartServer()**函数的末尾写了**StartServer()** ，所以在获取文件后它服务器再次启动并且等待接收下一个文件。这不好，因为函数一次又一次地调用自己并且没有终点。但我的要求只是接收文件而不做任何其他事情，这就是我使用它的原因。

# iphone - 从 self.view 中删除所有子视图的最佳方法是什么？

> ID：11889243
> 
> 赞同：88
> 
> 时间：2012-08-09T17:55:50.243
> 
> 标签：iphone, objective-c, ios, uikit

我在想也许这样的事情可能会奏效：

```
for (UIView* b in self.view.subviews)
{
   [b removeFromSuperview];
} 
```

我想删除各种子视图。UIImages，按钮，文本字段等。

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2012-08-09T17:59:39.720

```
[self.view.subviews makeObjectsPerformSelector: @selector(removeFromSuperview)]; 
```

它与您的变体相同，但稍短一些。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-02-22T02:52:48.960

```
self.view.subviews.forEach({ $0.removeFromSuperview() }) 
```

Swift 中的相同版本。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-08T16:47:48.627

迅速：

```
extension UIView {
    func removeAllSubviews() {
        for subview in subviews {
            subview.removeFromSuperview()
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-09T01:13:12.097

你可以这样使用

```
//adding an object to the view
view.addSubView(UIButton())

// you can remove any UIControls you have added with this code
view.subviews.forEach { (item) in
     item.removeFromSuperview()
} 
```

view 是您要从中删除所有内容的视图。您只是通过执行 forEach 删除每个子视图

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-26T03:37:27.337

对于 Swift 4+。您可以扩展`UIView`. 必要时调用它。

```
extension UIView {
    func removeAllSubviews() {
        subviews.forEach { $0.removeFromSuperview() }
    }
} 
```

# sql - SQL Server 审核同一张表中的数据

> ID：11889247
> 
> 赞同：3
> 
> 时间：2012-08-09T17:56:00.633
> 
> 标签：sql, audit-tables, audit-logging

我正在处理的一个项目要求对记录进行数字“签名”，之后任何修改都会创建该行的新“版本”。出于监管原因，不能修改“签名”记录，并且不应该经常修改新版本。过去，这样做是通过创建一个与主表具有相同架构的单独日志记录表以及一些额外的列来跟踪谁修改它以及何时修改它。

但是，在使用 SharePoint 进行一些工作后，将所有数据（包括不同版本）放入同一个表中，我想到了一种不同的方法，我找不到任何人这样做的例子：我可以把新版本的行放在右边在同一个表中并增加版本号。然后将版本号添加到PK。

优点：

*   实现很简单，只需创建一个“代替更新”触发器，它执行插入而不是更新行是“签名的”。我可以轻松地在触发器中添加要更新的 IsCurrentVersion 列。
*   查询旧版本很容易，只需获取具有我想要的 ID 的所有记录，让用户从列表中选择。
*   触发器很好，因为它保证如果签名后行不能被更新（出于监管和审计目的）。
*   不必将表的模式更改复制到镜像“记录”表。

缺点：

*   该表*可能*会变大一些，但大多数情况下，“签名”后记录不会更改。客户估计在当前使用水平下每年最多 100,000 行。SQL Server 可以处理数亿行，所以这看起来还不错。
*   索引和性能可能是一个问题。SharePoint 将 tp_CalculatedVersion int 添加到 PK，其中最新版本的计算数字始终为 0。我可以做同样的事情并根据版本号计算它。**这对性能有帮助吗？**
*   查询数据有一个额外的步骤，以确保您获得最新版本，但这可以在 SP 中处理。

*   **在这种情况下还有什么其他缺点。我错过了什么吗？？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:30:28.370

我以前在企业系统中看到过这种模式，但 IMO 并不成功。

*   您在这里混合了两个不同的问题，即实时数据和审计数据的存储。对这个表的查询总是需要记住他们是在寻找叶子数据还是审计数据（例如报告）——新的团队成员可能会觉得这不直观。您可能需要用视图等封装这种复杂性。
*   正如您所提到的，性能将始终是一个问题。插入新记录还需要更新以前的记录以将其标记为不活动。您可能还需要考虑更改聚集索引以将所有版本保持在同一页面上。
*   此表的外键将有问题。您是否引用了确切的版本记录？然后您是否修复了外键以指向新的实时叶子记录？

我能想到的这样做的一个好处是审计表 DDL 将始终与实时表同步 - 通常对实时表进行 2 表策略更改，并且审计和触发器 DDL 不会相应地更新。

总的来说，我仍然建议将您的审计表分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:10:09.450

如果要求不更改已签名的数据，则应将其移至另一个表。事实上，我可能会建议将其移至另一个数据库/模式，其中唯一允许对表进行的操作是插入和读取记录。如果您真的想阻止更新，您可以同时使用权限*和触发器。*

您不想乱用监管要求。使用主键与版本以及触发器组合的复杂模式表明可能存在更简单的方法。

历史记录会影响当前记录的性能。如果您最终遇到每条记录都更改了 100 次的情况，那么将它们保存在同一个表中只会减慢查询速度。当然，您可以以对数据进行分区的形式着手处理更复杂的问题。最后，解决方案更简单：将无法更改的数据保留在另一个无法更改的表中。您不想仅仅因为积累了很多历史就必须升级硬件。

我还建议在历史记录中包含一个生效日期和结束日期。这将允许您重建特定日期的所有数据，用户将来可能会发现这些数据有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T23:35:56.580

这是正确的。审计跟踪可以保留在内部报告/审计的应用程序中，但信息安全最佳实践要求将审计日志从生成它们的系统中提取到日志管理/SIEM 解决方案中。

# jquery - jquery在一页上的多个调整大小事件

> ID：11889248
> 
> 赞同：0
> 
> 时间：2012-08-09T17:56:01.723
> 
> 标签：jquery, html, resize, window

我在一页上有多个 div，每个都可以通过 jquery`.resize()`方法调整大小。

我还需要能够调整页面大小，我确信我无法做到这一点的原因是我对 jQuery 选择器机制的幼稚。

我的代码：

`<div class='droppedElement' blah...>` （这些是现在可以很好地调整大小的 's）

我现在有，

```
$('.droppedElement').live('mouseenter',function() {
    $(function() {
        $('.droppedElement').resizable(resizeOpts);
    });
}); 
```

但如果我尝试`$(window).resizable(...)`

我遇到冲突，浏览器停止运行。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:59:41.547

`window`指浏览器窗口。默认情况下应该可以调整大小。jQuery 无法处理这种调整大小的行为。你能链接一个例子吗？

用于`$(window).resize()`将侦听器附加到窗口调整大小。

# macros - 允许用户从 Confluence 调查宏中的选项列表中选择图片

> ID：11889249
> 
> 赞同：1
> 
> 时间：2012-08-09T17:56:04.073
> 
> 标签：macros, wiki, survey, confluence

我想知道如何将图片/图像功能添加到汇合调查宏。我希望用户从图片列表中选择一张图片来回答问题。首先，我需要找到一种方式，wiki 所有者可以上传图片供用户选择。其次，允许用户选择一张图片。我是一个尝试学习 confluence/wiki 技术的初学者。如果有人可以在这方面提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T08:39:12.167

在调查宏选项列表中使用图片而不是文字。

```
{survey:title=MyTitle|choices=!apple.png!,!orange.png!,!banana.png!|changeableVotes=true|showSummary=true|showTopSummary=true|showLast=true|visibleVoters=true}This is a survey{survey} 
```

你也可以有文字和图片。

```
{survey:title=MyTitle|choices=!apple.png! I like apples,!orange.png! I like oranges,!banana.png! I like bananas|changeableVotes=true|showSummary=true|showTopSummary=true|showLast=true|visibleVoters=true}This is a survey{survey} 
```

![图片和文字汇合调查](../Images/5a24ab7712e769f332bd6a549978f374.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:48:14.440

我对调查宏没有任何经验。有一次，当我需要在 confluence 上进行调查时，我只使用了 html 和 js。

在附加图像的主题上，我确实有经验。如果您转到“编辑”下拉菜单，您将看到指向“附件”的链接。在那里，您可以上传将附加到该页面的图像。

您可能想查看调查宏是否能够与图库宏一起工作。

# google-apps-script - 我可以更改我的代码以使我的脚本运行得更快吗？

> ID：11889250
> 
> 赞同：1
> 
> 时间：2012-08-09T17:56:09.673
> 
> 标签：google-apps-script

我试图找出两件事。

1.  我可以优化我的代码以使其运行得更快吗
2.  有没有办法测试我的脚本的速度。

我的脚本只是从 URL 中提取数据（例如：[https](https://www.sciencebase.gov/catalog/items?q=Water&max=100&format=json) ://www.sciencebase.gov/catalog/items?q=Water&max=100&format=json ），这些数据将粘贴到电子表格的第一个单元格中。然后它使用第一列存储标题和第二列存储摘要来填充单元格。

我正在使用将执行脚本 onEdit() 的触发器，以便在对电子表格的第一个单元格进行编辑时运行它。

任何指针，提示，甚至是去看看这里都表示赞赏

这是我的代码，

```
function respondToSearch() {

     // Gets the active sheet in a spreadsheet
     var ss = SpreadsheetApp.getActiveSpreadsheet(); 

     // Gets sheet 1 and sets the first column to a width of 200 and the second 
     column to width 500
     var sheet = ss.getSheets()[0].setColumnWidth(1, 200).setColumnWidth(2, 500);
     var activeSheet = SpreadsheetApp.getActiveSheet();

     // Gets the value from the top left cell in a range
     var dataRange = activeSheet.getDataRange().getValue();

     // Sends an HTTP request to fetch the URL
     var searchResponse = UrlFetchApp.fetch(dataRange);

     // Get the response as a string and parse (string is in JSON format) 
     var parsedResponse = Utilities.jsonParse(searchResponse.getContentText());

     // Array to hold letter corresponding to spreadsheet columns
     var cellLetters = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", 
     "m", "n", "o", "p", "q", "r", "s", "t"];

     // Loop through the "item" objects and display the properties in the 
     spreadsheet
     for (var i = 0; i < 2; i++) {  
       for (var j = 0; j < parsedResponse.items.length; j++) {      

       // Starts with items[0] (1st object) and displays the properties
       var parsedItems = [parsedResponse.items[j].title, parsedResponse.items[j]
       .summary];

       // If a property is not undefined print the property in the spreadsheet 
       else print "N/A"
       if (parsedItems[i] != undefined) {
         var print = parsedItems[i];
       }
       else {
         var print = "N/A";
       }

       // Stores the current letter corresponding to the current spreadsheet column
       var cellLtr = cellLetters[i];

       // Starts the row available to display data at number 2
       var cellNum = [j + 2];
       var cell = cellLtr + cellNum;

       sheet.setActiveCell(cell).setFontSize("9").setHorizontalAlignment("left")
       .setVerticalAlignment("top").setValue(print);
      }
     }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:10:20.750

> 我可以优化我的代码以使其运行得更快吗

我认为这是可能的。尝试重写代码以设置字体大小和对齐方式，而不是为每个单元格而是为整个范围。

> 有没有办法测试我的脚本的速度。

是的。代码应如下所示

```
var start = new Date();
my_time_consuming_function();
var diff = new Date() - start;
Logger.log("my_time_consuming_function takes: " + diff + " ms"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:50:38.887

您可以避免`parsedItems[i]`在`cellLtr`.`j`

```
for (var i = 0; i < 2; i++) {
    var cellLtr = cellLetters[i];
    for (var j = 0; j < parsedResponse.items.length; j++) {
        var print = (i == 0 ? parsedResponse.items[j].title : parsedResponse.items[j].summary);
        if (print == undefined)
            print = "N/A";

        var cell = cellLtr + (j + 2);

        sheet.setActiveCell(cell).setFontSize("9").setHorizontalAlignment("left")
            .setVerticalAlignment("top").setValue(print);
    }
} 
```

# ruby-on-rails - 使用 RVM 安装 Rails 的问题

> ID：11889257
> 
> 赞同：0
> 
> 时间：2012-08-09T17:56:58.177
> 
> 标签：ruby-on-rails, rvm

rvm list 显示：

```
ruby-1.9.3-head [ x86_64 ]  
ruby-1.9.3-p125 [ x86_64 ]  
ruby-1.9.3-p194 [ x86_64 ] 
```

* * *

`rails server`仅在 ruby​​-1.9.3-head 上受支持，但在 p125 或 p194 上不受支持，当运行诸如“rails s”之类的 rails 命令时，它们分别给我以下错误：

```
p125: Could not find activesupport-3.2.6 in any of the sources
Run `bundle install` to install missing gems. 
```

运行捆绑安装后，我得到：

```
Fetching gem metadata from https://rubygems.org/.......
Fetching gem metadata from https://rubygems.org/..
Could not find jquery-rails-2.0.0 in any of the sources

p194: /$usr_path/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find activesupport-3.2.6 in any of the sources (Bundler::GemNotFound) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:29:54.477

在山狮上安装 RVM 后我遇到了同样的问题

只需运行

```
bundle update 
```

解决问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:15:19.323

问题是`$ bundle install`失败了，所以`activesupport 3.2.6`没有成功安装。正如您[在此处](http://rubygems.org/gems/jquery-rails/versions)看到的，`jquery-rails 2.0.0`被猛拉，这就是为什么您会看到“在任何来源中都找不到 jquery-rails-2.0.0”错误。

打开`Gemfile`并将版本更新`jquery-rails`为“2.0.1”或“2.0.2”。重新运行`$ bundle install`然后一切都应该没问题。

# java - Java网络序列化在可序列化对象上失败

> ID：11889260
> 
> 赞同：1
> 
> 时间：2012-08-09T17:57:11.893
> 
> 标签：java, sockets, networking, serialization, tcp

我正在开发一个简单的客户端/服务器程序，现在它应该做的就是在连接时从客户端向服务器发送一个对象，然后从服务器发送一个包含响应的对象。

我的对象应该发送用户名和密码。是的，我知道还有其他方法可以验证 TCP 连接，但这是一个测试，可以帮助我在使用 java 联网时涉足。

我的对象是这样写的：

```
 import java.io.Serializable;

public class AuthAccount implements Serializable{
    private static final long serialVersionUID = -8918729105550799244L;
    private String username;
    private String password;

    AuthAccount(String user, String pass){
        username = user;
        password = pass;
    }
    String username(){
        return username;
    }
    String password(){
        return password;
    }
} 
```

套接字连接成功，但在这一行（`oos`is `ObjectOutputStream`）失败：

```
System.out.print("Sending login object to server...");
oos.writeObject(new AuthAccount("user", "password"));
System.out.println("Done!"); 
```

我不断收到错误：

> java.io.NotSerializableException: AuthAccount

我已经尝试使用 AuthAccount 测试类`char[] username = new char[30];`，以便拥有一个固定大小的对象。我更像是一个 C++ 人，但对于这个项目，java 对我来说很有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:01:21.390

您必须使用旧版本的构建，因为

```
public class Main {
    public static void main(String... args) throws IOException, ClassNotFoundException {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(new AuthAccount("u", "p"));
        oos.close();

        ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(baos.toByteArray()));
        Object aa = ois.readObject();
    }
}
 class AuthAccount implements Serializable{
    private static final long serialVersionUID = 1;
    private final String username;
    private final String password;

    AuthAccount(String user, String pass){
        username = user;
        password = pass;
    }
    String username(){
        return username;
    }
    String password(){
        return password;
    }
} 
```

运行没有错误。

# hadoop - Datanode进程未在Hadoop中运行

> ID：11889261
> 
> 赞同：42
> 
> 时间：2012-08-09T17:57:16.990
> 
> 标签：hadoop, configuration, process

[我使用本教程](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/#formatting-the-hdfs-filesystem-via-the-namenode)设置并配置了一个多节点 Hadoop 集群。

当我输入 start-all.sh 命令时，它会显示正确初始化的所有进程，如下所示：

```
starting namenode, logging to /usr/local/hadoop/libexec/../logs/hadoop-root-namenode-jawwadtest1.out
jawwadtest1: starting datanode, logging to /usr/local/hadoop/libexec/../logs/hadoop-root-datanode-jawwadtest1.out
jawwadtest2: starting datanode, logging to /usr/local/hadoop/libexec/../logs/hadoop-root-datanode-jawwadtest2.out
jawwadtest1: starting secondarynamenode, logging to /usr/local/hadoop/libexec/../logs/hadoop-root-secondarynamenode-jawwadtest1.out
starting jobtracker, logging to /usr/local/hadoop/libexec/../logs/hadoop-root-jobtracker-jawwadtest1.out
jawwadtest1: starting tasktracker, logging to /usr/local/hadoop/libexec/../logs/hadoop-root-tasktracker-jawwadtest1.out
jawwadtest2: starting tasktracker, logging to /usr/local/hadoop/libexec/../logs/hadoop-root-tasktracker-jawwadtest2.out 
```

但是，当我键入 jps 命令时，我得到以下输出：

```
31057 NameNode
4001 RunJar
6182 RunJar
31328 SecondaryNameNode
31411 JobTracker
32119 Jps
31560 TaskTracker 
```

如您所见，没有运行数据节点进程。我尝试配置单节点集群，但遇到了同样的问题。有人知道这里可能出了什么问题吗？有没有教程中没有提到的配置文件，或者我可能看过了？我是 Hadoop 的新手，有点迷失，任何帮助将不胜感激。

编辑：hadoop-root-datanode-jawwadtest1.log：

```
STARTUP_MSG:   args = []
STARTUP_MSG:   version = 1.0.3
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/$
************************************************************/
2012-08-09 23:07:30,717 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loa$
2012-08-09 23:07:30,734 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapt$
2012-08-09 23:07:30,735 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl:$
2012-08-09 23:07:30,736 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl:$
2012-08-09 23:07:31,018 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapt$
2012-08-09 23:07:31,024 WARN org.apache.hadoop.metrics2.impl.MetricsSystemImpl:$
2012-08-09 23:07:32,366 INFO org.apache.hadoop.ipc.Client: Retrying connect to $
2012-08-09 23:07:37,949 ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: $
        at org.apache.hadoop.hdfs.server.datanode.DataStorage.doTransition(Data$
        at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransition$
        at org.apache.hadoop.hdfs.server.datanode.DataNode.startDataNode(DataNo$
        at org.apache.hadoop.hdfs.server.datanode.DataNode.<init>(DataNode.java$
        at org.apache.hadoop.hdfs.server.datanode.DataNode.makeInstance(DataNod$
        at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode($
        at org.apache.hadoop.hdfs.server.datanode.DataNode.createDataNode(DataN$
        at org.apache.hadoop.hdfs.server.datanode.DataNode.secureMain(DataNode.$
        at org.apache.hadoop.hdfs.server.datanode.DataNode.main(DataNode.java:1$

2012-08-09 23:07:37,951 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: S$
/************************************************************
SHUTDOWN_MSG: Shutting down DataNode at jawwadtest1/198.101.220.90
************************************************************/ 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-12T17:29:07.673

你需要做这样的事情：

*   `bin/stop-all.sh` （或`stop-dfs.sh`在`stop-yarn.sh`2.x 系列中）
*   `rm -Rf /app/tmp/hadoop-your-username/*`
*   `bin/hadoop namenode -format` （或`hdfs`在 2.x 系列中）

解决方案来自： http: [//pages.cs.brandeis.edu/~cs147a/lab/hadoop-troubleshooting/](http://pages.cs.brandeis.edu/~cs147a/lab/hadoop-troubleshooting/)。基本上它包括从头开始重新启动，因此请确保您不会通过格式化 hdfs 来丢失数据。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-10-11T19:05:33.473

我遇到了同样的问题。我创建了一个 hdfs 文件夹“/home/username/hdfs”，其中包含在 hadoop/conf 的配置 xml 文件中引用的子目录名称、数据和 tmp。

当我启动hadoop并做jps时，我找不到datanode所以我尝试使用**bin/hadoop datanode手动启动datanode**。然后我从错误消息中意识到它在访问 dfs.data.dir=/home/username/hdfs/data/ 时存在权限问题，该文件在 hadoop 配置文件之一中被引用。我所要做的就是停止 hadoop，删除**/home/username/hdfs/tmp/***目录的内容，然后尝试这个命令 -`chmod -R 755 /home/username/hdfs/`然后启动 hadoop。我可以找到数据节点！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-01-23T14:42:38.573

我在运行数据节点时遇到了类似的问题。以下步骤很有用。

1.  在 [hadoop_directory]/sbin 目录中使用 ./stop-all.sh 停止所有正在运行的服务。
2.  使用 rm -r [hadoop_directory]/tmp 删除 tmp 目录（在 [hadoop_directory]/etc/hadoop/core-site.xml 中配置的路径）
3.  sudo mkdir [hadoop_directory]/tmp （创建一个新的 tmp 目录）
4.  转到 */hadoop_store/hdfs 目录，您在其中创建了 namenode 和 datanode 作为子目录。（在 [hadoop_directory]/etc/hadoop/hdfs-site.xml 中配置的路径）。采用

    ```
    rm -r namenode

    rm -r datanode 
    ```

5.  在 */hadoop_store/hdfs 目录下使用

    ```
    sudo mkdir namenode

    sudo mkdir datanode 
    ```

如果出现权限问题，请使用

```
 chmod -R 755 namenode 

   chmod -R 755 datanode 
```

6.  在 [hadoop_directory]/bin 中使用

    ```
     hadoop namenode -format (To format your namenode) 
    ```

7.  在 [hadoop_directory]/sbin 目录中使用 ./start-all.sh 或 ./start-dfs.sh 来启动服务。
8.  使用 jps 检查正在运行的服务。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-14T22:20:34.987

我在运行单节点伪分布式实例时遇到了同样的问题。无法弄清楚如何解决它，但一个快速的解决方法是手动启动一个 DataNode
`hadoop-x.x.x/bin/hadoop datanode`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-13T17:47:04.827

删除hadoop文件夹下的datanode，然后重新运行start-all.sh

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-09T18:51:14.350

需要遵循3个步骤。

（1）需要去日志查看最近的日志（在hadoop-2.6.0/logs/hadoop-user-datanode-ubuntu.log中）

如果错误是

> java.io.IOException：/home/kutty/work/hadoop2data/dfs/data 中不兼容的 clusterID：**namenode clusterID = CID-c41df580-e197-4db6-a02a-a62b71463089**；数据节点集群 ID = CID-a5f4ba24-3a56-4125-9137-fa77c5bb07b1

即namenode 集群ID 和datanode 集群ID 不相同。

（2）现在复制上述错误中**的名称节点集群ID，即CID-c41df580-e197-4db6-a02a-a62b71463089**

(3)将hadoopdata/dfs/data/current/version中的Datanode集群ID替换为Namenode集群ID

> clusterID = **CID-c41df580-e197-4db6-a02a-a62b71463089**

重启 Hadoop。将运行 DataNode

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-28T07:25:05.297

按照这些步骤操作，您的数据节点将重新启动。

1.  停止dfs。
2.  打开 hdfs-site.xml
3.  再次从 hdfs-site.xml 和 -format namenode 中删除 data.dir 和 name.dir 属性。
4.  然后删除 hadoopdata 目录，在 hdfs-site.xml 中添加 data.dir 和 name.dir 并再次格式化 namenode。
5.  然后再次启动 dfs。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-07-29T03:10:29.950

停止所有服务 - ./stop-all.sh 格式化所有 master 和 slave 中的所有 hdfs tmp 目录。不要忘记从奴隶格式化。

格式化namenode。（hadoop namenode -format）

现在启动namenode上的服务。./bin/start-all.sh

这对我启动 datanode 服务产生了影响。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-05-04T12:14:21.513

1.  首先停止dfs和纱线。
2.  删除 core-site.xml 文件中指定的 datanode 和 namenode 目录。
3.  重新创建目录。
4.  然后重新启动dfs和yarn如下。

    开始-dfs.sh

    启动纱线.sh

    mr-jobhistory-daemon.sh 启动历史服务器

    希望这工作正常。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-18T22:15:18.977

请控制 tmp 目录属性是否指向 core-site.xml 中的有效目录

```
<property>
  <name>hadoop.tmp.dir</name>
  <value>/home/hduser/data/tmp</value>
</property> 
```

如果目录配置错误，datanode 进程将无法正常启动。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-20T13:00:03.567

在行中运行以下命令：-

1.  stop-all.sh（运行 Stop All 以停止所有 hadoop 进程）
2.  rm -r /usr/local/hadoop/tmp/（您在 hadoop/conf/core-site.xml 中配置的 Hadoop tmp 目录）
3.  sudo mkdir /usr/local/hadoop/tmp （再次创建相同的目录）
4.  hadoop namenode -format（格式化你的namenode）
5.  start-all.sh（运行 Start All 以启动所有 hadoop 进程）
6.  JPS（它将显示正在运行的进程）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-09-06T12:53:25.520

第 1 步：- Stop-all.sh

第 2 步：- 到了这条路

```
cd /usr/local/hadoop/bin 
```

第 3 步：- 运行命令 hadoop datanode

现在DataNode工作

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-08-10T10:30:27.690

datanode.log 文件中的错误

```
$ more /usr/local/hadoop/logs/hadoop-hduser-datanode-ubuntu.log 
```

显示：

```
java.io.IOException: Incompatible clusterIDs in /usr/local/hadoop_tmp/hdfs/datanode: namenode clusterID = CID-e4c3fed0-c2ce-4d8b-8bf3-c6388689eb82; datanode clusterID = CID-2fcfefc7-c931-4cda-8f89-1a67346a9b7c 
```

**解决方案**：停止您的集群并发出以下命令，然后再次启动您的集群。

```
sudo rm -rf  /usr/local/hadoop_tmp/hdfs/datanode/* 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-02-02T11:00:08.823

检查中的`hadoop.tmp.dir`属性`core-site.xml`是否设置正确。如果您设置它，请导航到此目录，然后删除或清空此目录。如果你没有设置它，你导航到它的默认文件夹`/tmp/hadoop-${user.name}`，同样删除或清空这个目录。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-10-29T12:23:40.730

在 Mac 操作系统的情况下（伪分布式模式）：

打开终端

1.  停止dfs。'sbin/stop-all.sh'。
2.  `cd /tmp`
3.  `rm -rf hadoop*`
4.  导航到 hadoop 目录。格式化hdfs。`bin/hdfs namenode -format`
5.  `sbin/start-dfs.sh`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-08-21T11:26:04.943

试试这个

1.  停止所有.sh
2.  vi hdfs-site.xml
3.  更改属性的值`dfs.data.dir`
4.  格式化名称节点
5.  全部启动.sh

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-01-05T08:39:50.817

我在日志文件中得到了问题的详细信息，如下所示：“dfs.data.dir 中的目录无效：/home/hdfs/dnman1 的权限不正确，预期：rwxr **-xr-x**，而实际：rwxrwxr-x”和从那里我发现我的文件夹的 datanote 文件权限是 777。我更正为 755，它开始工作。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-05-30T07:15:58.983

您可以设置另一个，而不是删除“hadoop tmp dir”下的所有内容。例如，如果您的 core-site.xml 具有此属性：

```
<property>
  <name>hadoop.tmp.dir</name>
  <value>/home/hduser/data/tmp</value>
</property> 
```

您可以将其更改为：

```
<property>
  <name>hadoop.tmp.dir</name>
  <value>/home/hduser/data/tmp2</value>
</property> 
```

然后scp core-site.xml到每个节点，然后“hadoop namenode -format”，然后重启hadoop。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-07-30T16:16:48.810

这适用于较新版本的 Hadoop（我正在运行 2.4.0）

*   在这种情况下停止集群 sbin/stop-all.sh
*   然后去 /etc/hadoop 获取配置文件。

在文件中： hdfs-site.xml 寻找对应的目录路径 dfs.namenode.name.dir dfs.namenode.data.dir

*   递归删除两个目录（rm -r）。
*   现在通过 bin/hadoop namenode -format 格式化 namenode
*   最后是 sbin/start-all.sh

希望这可以帮助。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-09-23T07:08:28.863

您需要检查：

/app/hadoop/tmp/dfs/data/current/VERSION 和 /app/hadoop/tmp/dfs/name/current/VERSION ---

在这两个文件中，以及名称节点和数据节点的命名空间 ID。

当且仅当数据节点的 NamespaceID 与名称节点的 NamespaceID 相同时，您的数据节点才会运行。

如果它们不同，则使用 vi 编辑器或 gedit 将 namenode NamespaceID 复制到 Datanode 的 NamespaceID 并保存并重新运行守护程序，它将完美运行。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-11-14T05:10:02.407

如果格式化 tmp 目录不起作用，请尝试以下操作：

1.  首先停止所有实体，如 namenode、datanode 等（您将有一些脚本或命令来执行此操作）
2.  格式化tmp目录
3.  进入 /var/cache/hadoop-hdfs/hdfs/dfs/ 手动删除目录下所有内容
4.  现在再次格式化你的namenode
5.  启动所有实体，然后使用 jps 命令确认数据节点已启动
6.  现在运行您拥有的任何应用程序

希望这可以帮助。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-04-13T23:57:06.080

1.  我在 conf/core-site.xml 中配置了 hadoop.tmp.dir

2.  我在 conf/hdfs-site.xml 中配置了 dfs.data.dir

3.  我在 conf/hdfs-site.xml 中配置了 dfs.name.dir

4.  删除“/tmp/hadoop-/”目录下的所有内容

5.  将下面列出的目录的文件权限从 777 更改为 755`dfs.data.dir`

    数据节点开始工作。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-04-28T05:49:00.010

即使删除了重新制作的目录，数据节点也没有启动。因此，我使用它手动启动它`bin/hadoop datanode` 没有得出任何结论。我用相同的用户名打开了另一个终端，`jps`然后它向我展示了正在运行的 datanode 进程。它正在工作，但我只需要保持未完成的终端在旁边打开。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-09-25T23:36:51.973

按照这些步骤操作，您的数据节点将重新启动。

1）停止dfs。2) 打开 hdfs-site.xml 3) 从 hdfs-site.xml 中删除 data.dir 和 name.dir 属性并再次 -format namenode。

4）然后再次启动dfs。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-12-21T09:56:04.763

得到同样的错误。尝试启动和停止 dfs 几次，清除了之前答案中提到的所有目录，但没有任何帮助。

仅在重新启动操作系统并从头开始配置 Hadoop 后，该问题才得以解决。（在不重启的情况下从头开始配置 Hadoop 不起作用）

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-08-01T12:16:59.210

一旦我无法在 hadoop 中使用 jps 找到数据节点，我就删除了 hadoop 安装目录 ( `/opt/hadoop-2.7.0/hadoop_data/dfs/data`) 中的当前文件夹并使用 start-all.sh 和 jps 重新启动了 hadoop。

这次我可以找到数据节点，并且再次创建了当前文件夹。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-03-14T17:24:31.460

我已经应用了一些混合配置，它对我有用。
首先 >>使用 第二个
停止 Hadoop 所有服务 >> 检查位于您的 mapred-site.xml 并将其更改为. 第三>> 删除hadoop创建的临时文件夹 第四>> 在temp上添加递归权限。 第五>> 现在重新启动所有服务。首先检查包括datanode在内的所有服务是否正在运行。 [在此处输入图像描述](https://i.stack.imgur.com/1x4Ij.png)`${HADOOP_HOME}/sbin/stop-all.sh`

`${HADOOP_HOME}/etc/hadoop/mapred-site.xml``localhost``master`

`rm -rf //path//to//your//hadoop//temp//folder`

`sudo chmod -R 777 //path//to//your//hadoop//temp//folder`

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-07-30T15:51:30.740

删除下的文件`$hadoop_User/dfsdata`，`$hadoop_User/tmpdata` 然后运行：

```
hdfs namenode -format 
```

最后运行：

```
start-all.sh 
```

然后你的问题就解决了。

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2016-08-03T12:50:14.257

```
 mv /usr/local/hadoop_store/hdfs/datanode /usr/local/hadoop_store/hdfs/datanode.backup

    mkdir /usr/local/hadoop_store/hdfs/datanode

    hadoop datanode OR start-all.sh

    jps 
```

# c - 如何将 ISO-8859-8-i 转换为 UTF-8？

> ID：11889262
> 
> 赞同：2
> 
> 时间：2012-08-09T17:57:23.027
> 
> 标签：c, unicode, iconv

我收到一封使用 charset 的电子邮件`iso-8859-8-i`。iconv 说它是一个不受支持的字符集。我尝试使用`iso-8859-8`，但出现“无效的多字节序列”错误。知道如何将此字符串转换为 UTF-8 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T18:25:54.947

只需将编码名称替换为`"iso-8859-8"`. 后缀是为了`-i`表明它是按逻辑顺序排列的，而不是`"iso-8859-8"`传统意义上的倒退“视觉顺序”。无论如何都没有办法`iconv`专门处理“视觉顺序”，所以它应该很好地转换它。

至于“无效的多字节序列”，也许您将源/目标字符集参数顺序倒退了？如果这不是问题，那么您的文件可能包含未在 ISO-8859-8 字符集中定义的字节，即它是无效的......

# iphone - iPhone 将 ISBN13 转换为 ISBN10

> ID：11889266
> 
> 赞同：0
> 
> 时间：2012-08-09T17:57:38.197
> 
> 标签：iphone, ios, xcode4.2, barcode

我正在尝试对其进行编程，使其可以从 isbn 13 计算 isbn 10 的校验位。有人可以就如何执行它提供一些建议吗？

首先，在我继续计算isbn10的校验位之前，我如何实际循环遍历一个13位的isbn，删除前面的前缀978？先感谢您！：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:16:38.203

这是删除前 3 位数字的方法：

```
NSString *str = @"978XXXXXXXXX";
NSString *newStr = [str substringFromIndex:3]; 
```

至于你的 ISBN10：

十位国际标准书号的最后一个字符是一个校验位，计算方式是每个数字乘以它在数字中的位置（从右数），然后将这些乘积的和取模 11 为 0。最远的数字右边（乘以 1）是校验位，选择它使总和正确。它可能需要具有值 10，表示为字母 X。例如，采用 ISBN 0-201-53082-1​​。产品的总和是`0×10 + 2×9 + 0×8 + 1×7 + 5×6 + 3×5 + 0×4 + 8×3 + 2×2 + 1×1 = 99 ≡ 0`模 11。所以 ISBN 是有效的。虽然这似乎比第一种方案更复杂，但可以简单地通过将所有乘积相加然后除以 11 来验证。通过将两个变量 t 和 sum 初始化为 0 并重复执行，无需任何乘法即可计算总和`t = t + digit; sum = sum + t;`（可以用 C 表示为 sum += t += digit;）。如果最终总和是 11 的倍数，则 ISBN 有效。

取自[这里](http://en.wikipedia.org/wiki/Check_digit#ISBN_10)。

# c - 如何在 C 中创建一个动态结构数组

> ID：11889269
> 
> 赞同：0
> 
> 时间：2012-08-09T17:57:48.930
> 
> 标签：c, struct

我想将符号结构从一个函数发送到其他函数，并且我想创建一个数组，每个单元格将指向以下结构的不同值：

```
typedef struct symbol_def
{
    char*           sym_name;
char*           sym_type;
unsigned short  sym_address;
char            sym_is_ext;
}symbol; 
```

我正在尝试运行此代码：

//函数-1

```
void compile_input_file(char* input)
{
symbol* curr_symbol;
    //Intalize curr_symbol struct
    curr_symbol = (symbol*)malloc(sizeof(symbol));
    //memset((void)curr_symbol, 0, sizeof(symbol));
    parse_command(line, &parser, curr_symbol, &index);
} 
```

//函数-2

```
void parse_command(char* line, parse_params* parser, symbol* curr_symbol, int* index)
{
    sym = symbol_table_create(curr_symbol, "directive", sym_label, '0', index);
} 
```

//函数-3

```
symbol* symbol_table_create(symbol* curr_symbol,char* s_type, char* label, char is_ext, int* index)
{
    int temp = *index;
    curr_symbol = (symbol*)realloc(curr_symbol,sizeof(symbol*)*(temp+1));
    curr_symbol[temp].sym_type = s_type;
    curr_symbol[temp].sym_name = label;
    curr_symbol[temp].sym_address = 0;
    curr_symbol[temp].sym_is_ext = is_ext;
    temp++;
    *index = temp;

    return curr_symbol;
} 
```

问题是 curr_symbol 一直被覆盖。我的目的是建立一个符号表，在代码的每次迭代中，我都会在数组中添加另一个单元格

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:43:29.593

有一个问题，`realloc`它应该是`curr_symbol = (symbol*)realloc(curr_symbol,sizeof(symbol)*(temp+1));`你实际上分配的 sizeof`pointer`是 4 字节。

一条建议`Realloc`是一项代价高昂的操作，您应该仅在必要时使用它，而不是`malloc`在函数 3 而不是函数 1 中的每个实例上使用它。如果这样做，您甚至不需要通过 function2 传递指针。

或者检查一下是否`realloc`真的有必要。例如：- 检查指针是否已分配内存。`if(ptr!=null){ //realloc }`这也可以作为检查用例。

祝你好运。:)

# .net - StructureMap 和 ASP .Net Web API 和 .Net Framework 4.5

> ID：11889275
> 
> 赞同：9
> 
> 时间：2012-08-09T17:58:31.490
> 
> 标签：.net, dependency-injection, ioc-container, asp.net-web-api, structuremap

当前版本的 StructureMap 是否支持 ASP .Net Web API、MVC 4 和 .NET Framework 4.5？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-11T00:27:47.143

[如此处](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)所述，Web API 使用依赖解析器。

```
class StructureMapDependencyResolver : IDependencyResolver
{
    public IDependencyScope BeginScope()
    {
        return this; 
    }

    public object GetService(Type serviceType)
    {
        return ObjectFactory.GetInstance(serviceType);
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return ObjectFactory.GetInstances(serviceType);
    }

    public void Dispose()
    {
    }
} 
```

在您的 Global.asax.cs 中，包含此行以注册依赖解析器：

```
GlobalConfiguration.Configuration.DependencyResolver = new StructureMapDependencyResolver(); 
```

除此之外，新的 Web API 非常易于与 IoC 容器一起使用。

我还没有研究它，但我相信`BeginScope`我留空的方法可以用于子容器。

**编辑：**

上述实现效果很好；事实上，我更喜欢它而不是我将要告诉你的替代方案。这个将解析任何类型到最好的 StructureMap 的能力，并且会在出现问题时抛出错误。我喜欢看到错误，因为它们告诉我我做错了什么。

`GetService`但是，如果出现问题，API 预计将返回 null。所以为了符合 API，这是推荐的实现：

```
public object GetService(Type serviceType)
{
    if (serviceType.IsAbstract || serviceType.IsInterface)
        return ObjectFactory.TryGetInstance(serviceType);
    else 
        return ObjectFactory.GetInstance(serviceType);
} 
```

不同之处在于`TryGetInstance`只查找在容器中注册的类型，如果出现问题将返回 null。`serviceType.IsAbstract || serviceType.IsInterface`被认为足以决定使用哪种方法的检查。我最初的回答旨在简单明了，但@PHeiberg 在此处的评论中指出，这并不完全“正确”。既然你有了知识，就用看起来最好的东西。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T19:00:22.523

ASP.NET Web API Release 版本使用依赖解析器（[IDependencyResolver](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5ba693dff4a7#src/System.Web.Http/Dependencies/IDependencyResolver.cs)接口的实现），它还引入了新概念 - 依赖范围（[IDependencyScope](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5ba693dff4a7#src/System.Web.Http/Dependencies/IDependencyScope.cs)接口的实现）。正确实现 IDependencyScope 很重要 - 如果正确实现，它允许在释放 IDependencyScope 时释放资源（在范围内创建）。并在请求结束时处理。

当容器支持嵌套（或子）容器时，IDependencyScope 效果最好。StructureMap 从版本 2.6.1 开始。

我写了一篇如何在 Web API 中配置 StructureMap 的文章：[在 ASP.NET WebAPI 中配置 StructureMap](http://marisks.github.com/2012/08/19/configuring-structuremap-in-aspnet-webapi/)

您还可以查看 Mike Wasson 的文章： [使用 Web API 依赖解析器](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)

# c# - 为什么这个字幕代码不起作用？

> ID：11889284
> 
> 赞同：-2
> 
> 时间：2012-08-09T17:58:56.443
> 
> 标签：c#

我正在使用此代码来制作一个从右到左滚动的选取框标签。

```
 private int xPos = 651;

    private void timer1_Tick(object sender, EventArgs e)
    {
        if (this.Width == xPos)
        {
            //repeat marquee
            xPos = 651;
            this.Label7.Location = new System.Drawing.Point(651, 334);
            xPos--;
        }
        else
        {
            this.Label7.Location = new System.Drawing.Point(xPos, 334);
            xPos--;
        }
    } 
```

651 是表格的宽度。

此代码使标签从右向左移动，按应有的方式滚动表单，但不会再次从右侧重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:05:24.840

我很确定您可能已经看到了：[使用 Label control to create looping marquee text in c# winform](https://stackoverflow.com/questions/8323826/using-label-control-to-create-looping-marquee-text-in-c-sharp-winform)

阅读第一个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:13:16.350

该代码对我来说毫无意义

试试这个，像你想要的那样调整它。

```
 private bool goLeft;

    private void timer1_Tick(object sender, EventArgs e)
    {
        if (Label7.Width + Label7.Left >= this.Width)
        {
            goLeft = true;
        }
        else if (Label7.Left < 0)
        {
            goLeft = false;
        }

        Label7.Left += goLeft ? -10 : 10;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:14:57.730

虽然我同意从客户端使用选框会更容易，但这不是他要问的......

您在 this.Width 处启动 xPos 并递减它，因此，当 xPos 达到 0 而不是 this.Width 时，您需要重置 xPos。xPos 仅等于 this.Width 每次运行的第一次迭代。

```
private int xPos = this.Width;

private void timer1_Tick(object sender, EventArgs e) {
    if (xPos == 0) { xPos = this.Width; }
    this.Label7.Location = new System.Drawing.Point(xPos, 334);
    xPos--;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T18:02:59.920

我假设`this.Width`是一个正值，因此如果你重复减法，你只会在开始时达到这个值。试试 `if (xPos == 0)`吧

# ruby - 无法在系统范围的 rvm 安装上创建 gemset

> ID：11889285
> 
> 赞同：2
> 
> 时间：2012-08-09T17:58:57.493
> 
> 标签：ruby, gem, rvm, gemset

我正在尝试创建一个 gemset。首先，我做到了

```
$ rvm gemset create rails-1.3.7
mkdir: /usr/local/rvm/gems/ruby-1.9.2-p320@rails-1.3.7: Permission denied
Gemset 'rails-1.3.7' does not exist, 'rvm gemset create rails-1.3.7' first, or append '--create'.
Can not create environment file for 'rails-1.3.7', Could not use ruby. 
$ sudo rvm gemset create rails-1.3.7
Password:
Can not create gemset before using a ruby.  Try 'rvm use <some ruby>'.
$ rvm use 1.9.3
Using /usr/local/rvm/gems/ruby-1.9.3-p194
$ sudo rvm gemset create rails-1.3.7
Can not create gemset before using a ruby.  Try 'rvm use <some ruby>'.
$ sudo rvm use 1.9.3

RVM is not a function, selecting rubies with 'rvm use ...' will not work.
You need to change your terminal settings to allow shell login.
Please visit https://rvm.io/workflow/screen/ for example. 
```

[然后，根据https://stackoverflow.com/a/5716654/429850](https://stackoverflow.com/a/5716654/429850)的答案，我做到了

```
$ export rvm_gems_path="$HOME/.rvm/gems" 
$ rvm gemset create rails-3.1.7
/usr/local/rvm/scripts/functions/environment: line 94: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 105: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 105: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 105: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 105: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 105: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 105: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 105: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 105: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 105: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 107: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
/usr/local/rvm/scripts/functions/environment: line 107: /usr/local/rvm/environments/ruby-1.9.3-p194@rails-3.1.7: Permission denied
mkdir: /usr/local/rvm/wrappers/ruby-1.9.3-p194@rails-3.1.7: Permission denied 
```

如何在多用户 rvm 安装中创建 gemset？

**更新：**重新启动计算机，并将自己添加到 rvm 组后，我似乎仍然无法做到：

```
$ rvm use 1.9.2
Gemset '' does not exist, 'rvm gemset create ' first, or append '--create'.
$ rvm gemset create rails-3.1.7
'rails-3.1.7' gemset created (/Users/yasir/.rvm/gems/ruby-1.9.3-p194@rails-3.1.7).
$ rvm use 1.9.2
Gemset '' does not exist, 'rvm gemset create ' first, or append '--create'.
$ rvm rails-3.1.7
Unknown ruby interpreter version: '3.1.7'.
$ rvm 1.9.2
Gemset '' does not exist, 'rvm gemset create ' first, or append '--create'.
$ rvm gemset create 1.9.2
'1.9.2' gemset created (/Users/yasir/.rvm/gems/ruby-1.9.3-p194@1.9.2).
$ rvm 1.9.2
Gemset '' does not exist, 'rvm gemset create ' first, or append '--create'.
$ rvm use 1.9.2
Gemset '' does not exist, 'rvm gemset create ' first, or append '--create'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T06:51:15.553

对于多用户/系统范围的安装，您需要将需要访问的每个用户添加`rvm`到`rvm`组中。

# cordova - Phonegap 上的 OAuth2.0 教程？

> ID：11889286
> 
> 赞同：3
> 
> 时间：2012-08-09T17:59:01.170
> 
> 标签：cordova, oauth-2.0, android-browser

我正在PhoneGap 中开发Android 应用程序，并且必须使用OAuth 2.0。此外，OAuth 必须在外部/本机 Android 浏览器中，并且不能使用 ChildBrowser。

我很想坚持使用 JavaScript，但只要我有一个相当扎实的教程（PHP、Perl、Ruby 等），我也愿意学习其他东西。

我发现这个站点执行非 PIN OAuth 1.0a 身份验证，但不幸的是我真的需要 OAuth 2.0 教程。[http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1)

基本上，如果您找到任何好的示例或愿意举一些示例，我很乐意看到它们。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:07:48.273

如果您愿意使用任何提供程序，Facebook 会提供一个包含工作代码示例和 JavaScript SDK 的教程（FB 推荐用于移动应用程序和网站）。如果您正在寻找原生 Android 解决方案，他们还提供了包含 SDK 和 Android 代码示例的教程。 [https://developers.facebook.com/docs/concepts/login/login-architecture/](https://developers.facebook.com/docs/concepts/login/login-architecture/)

# javascript - 延迟 setTimeout()

> ID：11889289
> 
> 赞同：1
> 
> 时间：2012-08-09T17:59:11.723
> 
> 标签：javascript, ajax, html

我遇到了一些使用 ajax 从数据库中获取值的异步 JavaScript 代码的问题。

本质上，我想做的是在填充列表后刷新页面。为此，我尝试将以下代码插入到填充列表的函数中：

```
var timer1;
timer1 = setTimeout([refresh function], 1000); 
```

正如您可能想象的那样，当列表填充时间少于 1 秒时，这可以正常工作，但当需要更长的时间时会导致问题。所以我有了将这段代码插入到每次ajax调用成功时调用的函数中的想法：

```
clearTimeout(timer1);
timer1 = setTimeout([refresh function], 1000); 
```

所以理论上，每次获取列表元素时，计时器都应该重置，这意味着刷新函数只能在成功检索到最终列表元素后的 1 秒内调用。然而，在执行中，所有发生的事情都是 timer1 被重置*一次*，第一次到达第二个代码块。

任何人都可以看到问题可能是什么？或者如果有更好的方法来做到这一点？谢谢。

==========

编辑：要弄清楚我的 ajax 调用是如何工作的：代码结构的问题之一是~~ajax 调用实际上是嵌套的；原始 ajax 调用的回调方法本身就是另一个 ajax 调用，其回调方法包含数据库事务~~（不正确 - 见下文）。另外，我有两个这样的方法同时运行。我需要的是一种方法来确保在刷新页面之前所有级别的所有调用都已完成。这就是为什么我认为给这两种方法一个计时器，并在每次调用其中一个回调方法时重置它，会一直推回它的执行，直到所有线程都完成。

老实说，代码非常复杂——大约 140 行，包括辅助方法——我认为在这里发布它是不可行的。抱歉 - 如果没有代码没有人可以提供帮助，那么也许我会硬着头皮尝试以某种有意义的格式将其复制到这里。

==========

EDIT2：这是方法尝试执行的一般工作流程。该功能是一种“同步”功能，既可以向服务器发送数据，也可以从服务器检索数据。

*   I. 调用从本地数据库中检索项目的函数
*   一世。每次获取项目时，都会将其发送到服务器（ajax）
*   一种。当 ajax 回调时，该项目在本地更新以反映其成功/失败

*   二、从本地数据库中检索（单独的）项目列表

*   一世。每次获取项目时，都会从服务器（ajax）获取与该项目 ID 匹配的项目
*   一种。从服务器成功获取后，将比较项目
*   湾。如果服务器端项目更新，则更新本地项目

所以我在上面插入第二个代码块的地方是在“i”中。每个方法的部分，换句话说，ajax 应该（重复）回调的地方。我意识到我在上面的评论中有错误；实际上从来没有嵌套的 ajax 调用，而是数据库事务中的 ajax 调用中的数据库事务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:16:27.877

到目前为止，你做得很好。您要使用的技巧是将事件链接在一起，如下所示：

```
function refresh()
{
    invokeMyAjaxCall(param1, param2, param3, onSuccessCallback, onFailureCallback);
}

function onSuccessCallback()
{
    // Update my objects here

    // Once all the objects have been updated, trigger another ajax call
    setTimeout(refresh, 1000);
}

function onFailureCallback()
{
    // Notify the user that something failed

    // Once you've dealt with the failures, trigger another call in 1 sec
    setTimeout(refresh, 1000);
} 
```

现在，这样做的困难是：如果调用失败会发生什么？理想情况下，听起来您想确保不断更新来自服务器的信息，即使发生临时故障，您也想继续前进。

我在这里假设您的 AJAX 库允许您执行失败回调。但是，我见过一些库挂起而没有失败或成功的情况。如有必要，您可能需要使用一组单独的逻辑来确定与服务器的连接是否已中断并重新启动您的回调序列。

EDIT: I suspect that the problem you've got is a result of queueing the next call before the first call is done. Basically, you're setting up a race condition: can the first call finish before the next call is triggered? It may work most times, or it may work once, or it may work nearly all the time; but unless the setTimeout() is the very last statement in your "response-processing" code, this kind of race condition will always be a potential problem.

# android - Android SQLite 数据库外键不起作用

> ID：11889292
> 
> 赞同：1
> 
> 时间：2012-08-09T17:59:15.543
> 
> 标签：android, sqlite, foreign-keys

我正在使用 Android SQLite 数据库，其中有两个表。

Table`CHECKPOINTS`定义了 Table 中属性的外键`TOUR`。

将数据存储到数据库后，表格`Tour`将正确显示。但是，表中具有外键`TOUR_ID`的列`CHECKPOINTS`保持空白。我不知道为什么。

语法应该没问题，我还设置了`PRAGMA foreign_keys = ON;`. 在试验了一段时间后，我`Trigger`在`onCreate()`我的`DatabaseHelper`.

但是，现在我得到一个错误：

`android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0`.

数据库助手：

```
private static final String TABLE_CREATE_TOUR = "create table TOUR("
        + " ID integer primary key autoincrement, "
        + " NAME varchar(20)) ";

private static final String TABLE_CREATE_CHECKPOINT = "create table CHECKPOINT("
        + " ID integer primary key autoincrement, "
        + " TOUR_ID integer not null, "
        + " FOREIGN KEY (TOUR_ID) REFERENCES TOUR(ID)) ";

public void onCreate(SQLiteDatabase database) {
    database.execSQL(TABLE_CREATE_TOUR);
    database.execSQL(TABLE_CREATE_CHECKPOINT);

    database.execSQL("CREATE TRIGGER fk_checkpoint_tourid BEFORE INSERT ON CHECKPOINT "
                    + " FOR EACH ROW BEGIN "
                    + " SELECT CASE WHEN ((SELECT ID FROM TOUR WHERE ID = new.TOUR_ID ) IS NULL) "
                    + " THEN RAISE (ABORT, 'Foreign Key Violation') END; "
                    + " END;");

} 
```

数据源：

```
public void open() throws SQLException {
    database = dbhelper.getWritableDatabase();

    // Enable foreign key constraints
    if (!database.isReadOnly()) {
         database.execSQL("PRAGMA foreign_keys = ON;");
    } 
} 
```

有没有人知道如何让这件事发生？

编辑：

插入表中`TOUR`：

```
 public long InsertTour(String name){
    ContentValues values = new ContentValues();
    values.put("NAME", name);

    return database.insert("TOUR", null, values);       
} 
```

该表`CHECKPOINT`包含更多如上所述的数据。这是插入：

```
public Entry createEntry(String PARAM1, String PARAM2, long PARAM3, String PARAM4) {
    ContentValues values = new ContentValues();
    values.put("COLUMN1", PARAM1);
    values.put("COLUMN2", PARAM2);
    values.put("COLUMN3", PARAM3);
    values.put("COLUMN4", PARAM4);

    long insertId = database.insert("CHECKPOINT", null, values);

    Cursor cursor = database.query("CHECKPOINT", allColumns, "ID = " + insertId, null, null, null, null);
    cursor.moveToFirst();

    return cursorToEntry(cursor);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:31:37.617

很难判断出了什么问题，因为您没有提供完整的详细信息，但从您的回答中，我认为您对外键有错误的概念，并且您期望某些内容会自动“*通过外键填充*”。

外键约束用于强制表之间**存在**关系。也就是说，您将无法插入表中不存在的`checkpoint`行。`tour_id``tour`

[在http://www.sqlite.org/foreignkeys.html](http://www.sqlite.org/foreignkeys.html)阅读更多内容

# asp.net - asp.net razor：从数据库中检索数据

> ID：11889298
> 
> 赞同：0
> 
> 时间：2012-08-09T17:59:40.873
> 
> 标签：asp.net, asp.net-mvc

我是 MVC 框架的新手。我的查询是我必须从数据库 sql
数据库接收数据。并显示在 .cshtml .plz 帮助中......

```
 public ActionResult Index()
    {
        var model = (from p in am.AMS_Page_Accesses
                     where p.Role_id == "m"
                     select new {
                      p.Name,
                      p.Id,
                      p.Link
                      }).ToList();
        var  abc= new linkname
          {    

          }  

       return View(abc);
    } 
```

模型

```
public class linktab
    {            
        public  string id { get; set; }
        public  string Name { get; set; }
        public string link { get; set; }    
    }
    public class linkname
    {
        public List<linktab> menu { get; set; }
    } 
```

在 .cshtml 中

```
 @foreach (var a in Model)
    {
     <div>a.Name</div>
     <div>a.Id</div>
     <div>a.Link</div>
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:40:05.167

您没有显示您的视图模型到底是什么，根据您收到的错误，您似乎根本没有指定它（使用`@model`指令）。

试试这个

```
public ActionResult Index()
{
    var model = (from p in am.AMS_Page_Accesses
                 where p.Role_id == "m"
                 select new linktab
                 {
                     Id = p.Id,
                     Link = p.Link,
                     Name = p.Name
                 }).ToList();

    var abc = new linkname
    {
        menu = model
    }  

    return View(abc);
} 
```

在您看来：

```
@model linkname

@foreach (var a in Model.menu)
{
   <div>a.Name</div>
   <div>a.Id</div>
   <div>a.Link</div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:40:38.950

您正在发送一个空集合更改您的操作，如下所示，

**我假设您认为它被强输入到链接选项卡列表中**

```
public ActionResult Index()
{
    var model = (from p in am.AMS_Page_Accesses
                 where p.Role_id == "m"
                 select new linktab{
                  Name = p.Name,
                  id = p.Id,
                  link = p.Link
                  }).ToList();

   return View(model);
} 
```

**如果不是这种情况，并且您的模型是类链接名的强类型，您应该像这样执行您的操作**

```
public ActionResult Index()
{
    var model = (from p in am.AMS_Page_Accesses
                 where p.Role_id == "m"
                 select new linktab{
                  Name = p.Name,
                  id = p.Id,
                  link = p.Link
                  }).ToList();
    linkname abc= new linkname
    {    
       menu = model
    }  
   return View(abc);
} 
```

您可以更改视图中的代码，如下所示

```
@foreach (var a in Model.menu)
{
    <div>a.Name</div>
    <div>a.Id</div>
    <div>a.Link</div>
} 
```

# java - jFLAC。拆分 FLAC 文件

> ID：11889302
> 
> 赞同：3
> 
> 时间：2012-08-09T17:59:53.520
> 
> 标签：java, audio, split, flac

我需要将 flac 文件拆分为多个部分。我正在使用 jFLAC 库来读取 flac 文件

```
FLACDecoder decoder = new FLACDecoder(inputStream); 
```

然后我试图解码到 SeekPoints 之间的父文件

```
decoder.decode(seekPointFrom, seekPointTo); 
```

我也不太明白如何正确地获得秒值的这个搜索点。例如，我需要从 0 秒到 150 秒的第一个搜索点。如何获得正确的搜索点对象？Seekpoint cinstructor 是

```
/**
 * The constructor.
 * @param sampleNumber  The sample number of the target frame
 * @param streamOffset  The offset, in bytes, of the target frame with respect to beginning of the first frame
 * @param frameSamples  The number of samples in the target frame
 */
public SeekPoint(long sampleNumber, long streamOffset, int frameSamples) {
    this.sampleNumber = sampleNumber;
    this.streamOffset = streamOffset;
    this.frameSamples = frameSamples;
} 
```

解码器也有一些监听器来监听每个读取块动作。

```
 @Override
    public void processPCM(ByteData pcm) {
        try {
            outputStream.write(pcm.getData(), 0, pcm.getLen());
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

写入完成后，我想播放新的 flac 文件，但我的播放器提示该文件不正确。我需要做什么才能打开我的 flac 文件？也许我需要向这个文件或其他东西写一些标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-26T22:20:08.313

关于 FLAC SeekPoints，不能保证会有一个对应于给定秒的 SeekPoints - 整个音频文件中可能只有几个 SeekPoints。

因此，我最近使用搜索功能更新了 jFLAC，以让您至少找到最近的音频帧： [https ://github.com/nguillaumin/jflac/commit/585940af97157eb11b60c15cc8cb13ef3fc27ce3](https://github.com/nguillaumin/jflac/commit/585940af97157eb11b60c15cc8cb13ef3fc27ce3)

关于写出一个新文件，解码的数据将是原始 PCM 样本。因此，如果您想要一个有效的 FLAC 文件作为输出，则需要将其通过管道传输到 FLAC 编码器中。或者，您可以写出 Wave 标头并转储原始 PCM 样本，然后将生成的 Wave 文件转换为 FLAC 文件。

# javascript - 单击按钮检查多个复选框列表

> ID：11889305
> 
> 赞同：0
> 
> 时间：2012-08-09T18:00:04.353
> 
> 标签：javascript, asp.net

我的网页上有三个不同的复选框列表。我想要一个复选框，说明“选择全部”，检查复选框后，选中所有三个复选框列表复选框。我正在查看这个示例，该示例通过单击选择按钮检查一个复选框列表，但我希望在 javascript 中检查所有三个复选框列表复选框。下面是我的代码

```
 <asp:CheckBox ID="chkCheckAll" runat="server" Text="Check/Uncheck All"  
                                        Style="font-weight: 700"      CausesValidation="false" oncheckedchanged="chkCheckAll_CheckedChanged" AutoPostBack="true" 
                                          />

   <asp:CheckBoxList ID="chkList_MetricsSeverity" runat="server"   RepeatDirection="Horizontal"
                                                RepeatColumns="3" Width="1060px">
                                            </asp:CheckBoxList>

 <asp:CheckBoxList ID="chkList_MetricsAvgMedian" runat="server" RepeatDirection="Horizontal"
                                                RepeatColumns="3" Width="1060px">
                                            </asp:CheckBoxList>

 <asp:CheckBoxList ID="chkList_Counts" runat="server" RepeatDirection="Horizontal"
                                                RepeatColumns="3" Width="1060px">
                                            </asp:CheckBoxList> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:18:26.473

看看[这里](http://www.dotnetcurry.com/ShowArticle.aspx?ID=77)......你可以找到在 asp.net 和 javascript 方式中实现上述内容的方法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:45:50.213

这就是需要做的事情。下面是代码

```
 function CheckAll() {

        var chkbx = document.getElementById('<%=chkCheckAll.ClientID %>');

        var chkbxList1 = document.getElementById('<%=chkList_MetricsSeverity.ClientID %>');

        var chkbxList2 = document.getElementById('<%=chkList_MetricsAvgMedian.ClientID %>');

        var chkbxList3 = document.getElementById('<%=chkList_Counts.ClientID %>');
        if (chkbx.checked == true) {
            var chkbxListCount = chkbxList1.getElementsByTagName('input');
            for (var i = 0; i < chkbxListCount.length; i++) {
                chkbxListCount[i].checked = true;
            }
            var chkbxListCount = chkbxList2.getElementsByTagName('input');
            for (var i = 0; i < chkbxListCount.length; i++) {
                chkbxListCount[i].checked = true;
            }
            var chkbxListCount = chkbxList3.getElementsByTagName('input');
            for (var i = 0; i < chkbxListCount.length; i++) {
                chkbxListCount[i].checked = true;
            }
        }
        else {
            var chkbxListCount = chkbxList1.getElementsByTagName('input');
            for (var i = 0; i < chkbxListCount.length; i++) {
                chkbxListCount[i].checked = false;
            }
            var chkbxListCount = chkbxList2.getElementsByTagName('input');
            for (var i = 0; i < chkbxListCount.length; i++) {
                chkbxListCount[i].checked = false;
            }
            var chkbxListCount = chkbxList3.getElementsByTagName('input');
            for (var i = 0; i < chkbxListCount.length; i++) {
                chkbxListCount[i].checked = false;
            }
        } 

    } 
```

# iphone - 没有触发与方向相关的通知。为什么？

> ID：11889307
> 
> 赞同：0
> 
> 时间：2012-08-09T18:00:07.263
> 
> 标签：iphone, objective-c, ios, notifications, nsnotificationcenter

我希望在设备方向发生变化时收到通知。我已经设置了一个假设接收通知的测试方法。我正在尝试几个不同的观察者来实现这一点，但他们都没有工作。为什么 testMethod 没有被解雇？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    // register for orientation change notification

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(testMethod)     name:@"UIDeviceOrientationDidChangeNotification" object:nil];

    [[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(testMethod)
                                             name: UIApplicationWillChangeStatusBarOrientationNotification
                                           object: nil];
    [[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(testMethod)
                                             name: UIApplicationDidChangeStatusBarOrientationNotification
                                           object: nil];
}

- (void)testMethod
{
    NSLog(@"phone was rotated");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:23:16.353

我不小心在手机上启用了旋转锁。始终在不止一部手机上进行测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:03:51.683

您需要使用方向通知，即 UIDeviceOrientationDidChangeNotification。不要将它放在@"UIDeviceOrientationDidChangeNotification" 中，因为您不知道常量的实际内容，即 UIDeviceOrientationDidChangeNotification。看来您正在使用视图控制器。你应该使用 willRotateToInterfaceOrientation:duration: 和 didRotateFromInterfaceOrientation:

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:12:04.800

bool 类型的结尾 设置方向 .write 在视图的所有结束中返回 yes ..在 potrait 和横向模式下的方向发生

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T19:51:33.183

如果您需要的只是方向更改通知，则无需根本不需要使用BegingEnerationDeviceOlientation。你只需要使用`didRotateFromInterfaceOrientation:`方法。

如果它没有被触发，则意味着您不在正确的视图控制器中。此方法*仅*在顶部视图控制器（即窗口的根视图控制器）中调用，尽管我认为 UINavigationControllers 会很好并将其交给他们的视图控制器。

换句话说，听起来您正试图在错误的视图控制器中捕捉到这一点。

# javascript - jquery .after 删除整个 li 或 table 元素

> ID：11889308
> 
> 赞同：0
> 
> 时间：2012-08-09T18:00:10.707
> 
> 标签：javascript, jquery, html

我发现使用 jquery .after 将 div 插入 li 时出现问题。从本质上讲，该操作是删除整个 li ......我不知道为什么。我还看到了在不同的表格元素上使用 .after 的这种问题，这对我来说更有意义，因为我可以看到这会破坏表格。

看看这个 jsfiddle：http: [//jsfiddle.net/XrUtq/](http://jsfiddle.net/XrUtq/)

我必须这样做的原因是因为我必须想出一种通用的方法，以便能够将 div 作为 DOM 中的 CLOSE 放置到我无法控制的另一个元素（可能是任何一种元素）。然后 div 将相对/绝对定位在页面上以越过它所追求的元素。我这样做是因为我们需要一个解决方案，而不是将 div 附加到正文，因为如果视图发生更改，那么附加的元素将保留在页面上，而不是与它应该显示的内容一起消失。

我希望我已经把问题说得够清楚了。我试过这样的方法：

```
if (nodeName === 'td' || nodeName === 'tr' || nodeName === 'th' || nodeName === 'tbody'){           
    popover.appendTo(editable.closest(':visible:not(tr):not(td):not(table):not(tbody)'));
}
else if(editable.is(':visible')){
    popover.after(editable);
}
else{
    $('body').append(popover);
} 
```

但这并不能解释当前 li 的问题。

感谢您的帮助/建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:02:31.590

您正在使用稍微不正确的语法（有点倒退），请改用：

**改变这个：**

```
$('<div>Blabablabla</div>').after($('.editable')); 
```

**对此：**

```
$('.editable').after('<div>Blabablabla</div>'); 
```

**[工作固定示例](http://jsfiddle.net/XrUtq/2/)**

jQuery`.after(CONTENT)`在您选择的元素之后插入提供的内容。该`after`方法应该附加到您的 jQuery 选择器中。在您的代码中，您将选择器放置在`after`方法内。

我认为您打算使用`.insertAfter()`which 将与您的原始语法一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:03:14.833

[http://jsfiddle.net/XrUtq/1/](http://jsfiddle.net/XrUtq/1/)

```
$('li').click(function(){
    $('.editable').after('<div>Blabablabla</div>');
}); 
```

[jQuery`.after()`](http://api.jquery.com/after/)`.editable`在匹配集合（项目）中的每个元素之后插入一个目标元素（div ）。您使用的语法适用于[jQuery`.insertAfter()`](http://api.jquery.com/insertafter/)，这是做类似事情的另一种方法。

```
$('li').click(function(){
    $('<div>Blabablabla</div>').insertAfter('.editable');
}); 
```

# code-snippets - 忽略 Sublime Text 中的默认片段

> ID：11889312
> 
> 赞同：2
> 
> 时间：2012-08-09T18:00:39.133
> 
> 标签：code-snippets, sublimetext2

我已经创建了我自己的`html.sublime-snippet`添加文档类型和一些元标记的自定义版本，并将其保存在`User`目录中。
现在，当我尝试触发我的代码片段时，默认版本和我的自定义版本都显示为选项。
有什么方法可以半永久禁用默认代码段，以便只有我的版本可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:35:45.747

Python 默认的`@property`. 我在[这里](http://www.sublimetext.com/forum/viewtopic.php?p=44783#p44783)找到了可行的解决方案。你会是类似的：

*   在 .config/sublime-text-2/Packages 中将`HTML`文件夹复制到 (例如) `HTML Customized`。
*   软管/编辑出冒犯你的片段`HTML Customized`。
*   添加`HTML`到`ignored_packages`首选项中的条目以禁用标准`HTML`片段。

**没有抓住！**

有人叫*marcuso*在 Sublime Text 论坛上发布了这个解决方案。他配得一切荣耀。（还有*Matt York ，他在*[此评论](https://stackoverflow.com/questions/11889312/ignore-default-snippet-in-sublime-text#comment15847617_11893771)中提到了该主题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:12:28.163

选项：

1.  您可以更改`tabTrigger`新片段的
2.  您可以更改`tabTrigger`默认代码段的
3.  您可以注释掉`tabTrigger`默认代码段的行：

    `<!-- <tabTrigger>html</tabTrigger> -->`

问题：当您更新 ST 时，我相信它会覆盖对默认配置文件所做的任何更改。因此，如果您注释掉`tabTrigger`默认代码段中的注释，它将在您下次升级 ST 后取消注释。

# php - ownCloud中的递归目录列表

> ID：11889316
> 
> 赞同：0
> 
> 时间：2012-08-09T18:00:54.183
> 
> 标签：php, owncloud

我正在编写我想递归列出目录的代码。到目前为止，我已经编写了列出 1 级目录的代码。有人对我如何无限递归有任何想法吗？

```
$res = OC_Files::getDirectoryContent('');
$list = array();
foreach($res as $file) {
    if ($file['type'] == 'dir') {
        $res1 = OC_Files::getDirectoryContent('/'.$file['name']);
        foreach($res1 as $res2) {
            if ($res2['type'] == 'file') $list[] = $file['name'].'/'.$res2['name'];
        }

    } else $list[] = $file['name'];
}

foreach($list as $entry)
echo $entry.'</br>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:07:53.193

试试这个：

```
function traverse_directory($dir) {
    $res = OC_Files::getDirectoryContent($dir);
    $list = array();
    foreach($res as $file) {
        if ($file['type'] == 'dir') {
            traverse_directory($dir . '/' . $file['name'])
        } else {
            $list[] = $file['name'];
        }
    }
    foreach($list as $entry) {
        echo $entry.'</br>';
    }
}

traverse_directory(''); 
```

# javascript - 如何在不指定父级宽度的情况下防止子级 div 扩展父级？

> ID：11889317
> 
> 赞同：5
> 
> 时间：2012-08-09T18:00:59.297
> 
> 标签：javascript, jquery, css, html

我希望有人来清理我大脑中的蜘蛛网。我试图在这里说明（系统不允许我发布 GIF，所以我使用 ASCII 艺术）

```
|--------------------------------------------------------------------|
| Browser Window                                                     |
|                                                                    |
| |--------------------------------------------------|               |
| |  Parent DIV                                      |               |
| |                                                  |               |
| |  |-----------------------------------------|     |               |
| |  | Child DIV #1                            |     |               |
| |  |                                         |     |               |
| |  |                                         |     |               |
| |  |                                         |     |               |
| |  |                                         |     |               |
| |  |                                         |     |               |
| |  |                                         |     |               |
| |  |-----------------------------------------|     |               |
| |                                                  |               |
| |                                                  |               |
| |  |-----------------------------------------|     |               |
| |  | Child DIV #1                            |     |               |
| |  |                                         |     |               |
| |  |                                         |     |               |
| |  |                                         |     |               |
| |  |                                         |     |               |
| |  |                                         |     |               |
| |  |                                         |     |               |
| |  |-----------------------------------------|     |               |
| |                                                  |               |
| |                                                  |               |
| |--------------------------------------------------|               |
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
|--------------------------------------------------------------------| 
```

我想要一个包含 2 个子 DIV 的父 DIV。子 div #1 中有一个很长的段落。子 DIV #2 包含显示在表格中的可变宽度内容。

我希望父 DIV 扩展到子 DIV #2 的宽度，我希望子 DIV #1 仅扩展到父 DIV 的宽度，而不是进一步扩展父 DIV。

我将所有 3 个 DIV 设置为 float:left。

如果我只包含子 DIV #2，则父 DIV 会扩展到表格的宽度（加上填充等）——这正是我想要的。只要我包含 DIV #1，父 DIV 就会扩展到浏览器窗口的宽度，因为子 DIV #1 也一样宽。

我可以限制父 DIV 的宽度，但是我不想这样做，因为子 DIV #2 的宽度可变。我可以限制子 DIV #1 的宽度，但我不想这样做，因为我希望它与子 DIV #2 的宽度相同，并且 DIV #2 具有可变宽度。

我不想限制任何高度，因为每个盒子中的内容量是可变的。

是否有另一种方法来获得这些结果？

谢谢，

拉尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:52:08.307

有趣的问题。在投降到 js 解决方案之前，我尝试了很多，但我能得到这些结果的唯一方法是按照希望我帮助他的回答中所建议的去做。

我带着一个[工作样本](http://jsfiddle.net/fZChZ/1/)来到这里：

基本上，使用 jQuery，您可以编写如下代码：

```
$(document).ready(function() {
    $('#div1').css('width', $('#div2').css('width'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:07:32.693

我不完全确定我理解你，但我会尝试从两个内部 div 中删除 float:left 。我会将父级的宽度设置为自动，将子级 1 的宽度设置为 100%。这应该允许父级将自己的大小调整为更大的 div（子级 2），然后让子级 1 扩展到其容器的大小。我希望这有帮助。另外，如果您可以发布一个 js fiddle 让我看看您有什么，我可能会提供更好的帮助。

# resize - 在不调整图像大小的情况下导出 iOS vCard

> ID：11889320
> 
> 赞同：0
> 
> 时间：2012-08-09T18:01:12.750
> 
> 标签：resize, addressbook, thumbnails, vcf-vcard

我的 iPhone 应用程序目前正在使用 AddressBook 框架的 ABPersonCreateVCardRepresentationWithPeople 方法将用户的联系人备份到 .vcf 文件。

但是这种方法会缩小联系人的图像，我希望可以选择将它们保持在原始大小。

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:48:50.070

1.  仍然继续让所有的电子名片通过`ABPersonCreateVCardRepresentationWithPeople`并将它们保存在一个`NSDictionary`关键是人的身份证和价值是电子名片的地方

2.  遍历地址簿中的所有人员并使用获取图像数据`ABPersonCopyImageData`并将其保存在`NSDictionary`其中键是人的 ID 而值是图像数据的 base64 字符串表示形式。

3.  遍历第一个`NSDictionary`并将 base64 编码（`PHOTO`标签中的一长串字符）替换为第二个字典中该人 ID 的值。

4.  在任何你想要的地方使用第一个字典的值，因为现在，这些值应该包含带有原始大小图片的 vCard。

# installation - 强制 Installshield 在安装主应用程序之前安装 SQL Server CE

> ID：11889323
> 
> 赞同：0
> 
> 时间：2012-08-09T18:01:46.350
> 
> 标签：installation, sql-server-ce, windows-installer, installshield

任何线索如何强制 Installshield 在安装主应用程序*之前安装 SQL Server CE？*

（安装项目中包含SQL Server CE）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:01:16.303

您使用的是什么版本的 InstallShield 和项目类型？您可能希望将您的先决条件配置为由 setup.exe 在主安装程序 UI 之前运行的“安装先决条件”。

# c# - 修复 WCF 循环引用序列化

> ID：11889324
> 
> 赞同：0
> 
> 时间：2012-08-09T18:01:46.823
> 
> 标签：c#, wcf, serialization

我有课：

```
[Serializable]
[System.Runtime.Serialization.DataContract(IsReference = true)]
public class SymbolElem
{
    public SymbolElem() // Constructor
    {
        Children = new List<SymbolElem>();
    }

    public List<SymbolElem> Children { get; set; }
    public string Name { get; set; }
} 
```

我想要一个服务，它会`SymbolElem`使用命名管道返回给我。一开始我以为我有一个错误，因为我返回了很多对象。

无论如何，这里是服务的方法：

```
public SymbolElem TestMethod()
{
     Common.SymbolElem root = new Common.SymbolElem() {
             Name="root"
     };

     Common.SymbolElem child = new Common.SymbolElem() {
                    Name = "child"
     };                   

     root.Children.Add(child);

     return root;
} 
```

**可以，但是当我执行以下操作时：**

```
public SymbolElem TestMethod()
{
     Common.SymbolElem root = new Common.SymbolElem() {
             Name="root"
     };

     Common.SymbolElem child = new Common.SymbolElem() {
                    Name = "child"
     };                   

     root.Children.Add(child);
     child.Children.add(root);   // <------------ this causes an exception after returning s1!!!!

     return root;
} 
```

**这是一个例外：**

```
System.ServiceModel.Dispatcher.NetDispatcherFaultException was unhandled
  Message=The formatter threw an exception while trying to deserialize the message: There was an error while trying to deserialize parameter http://tempuri.org/:GetSymbolsResult. The InnerException message was ''EndElement' 'SymbolElem' from namespace 'http://schemas.datacontract.org/2004/07/SymbolFileParser.Common' is not expected. Expecting element '_x003C_BitOffset_x003E_k__BackingField'.'.  Please see InnerException for more details.
  Source=mscorlib
  Action=http://schemas.microsoft.com/net/2005/12/windowscommunicationfoundation/dispatcher/fault
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameterPart(XmlDictionaryReader reader, PartInfo part, Boolean isRequest)
       at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameter(XmlDictionaryReader reader, PartInfo part, Boolean isRequest)
       at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, String action, MessageDescription messageDescription, Object[] parameters, Boolean isRequest)
       at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message message, Object[] parameters, Boolean isRequest)
       at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeReply(Message message, Object[] parameters)
       at System.ServiceModel.Dispatcher.ProxyOperationRuntime.AfterReply(ProxyRpc& rpc)
       at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at ConsoleApplication4.ServiceReference1.ISymbolFileParser.GetSymbols(String filePath)
       at ConsoleApplication4.ServiceReference1.SymbolFileParserClient.GetSymbols(String filePath) in C:\Users\Antonio\Desktop\SymbolFileParser\ConsoleApplication4\Service References\ServiceReference1\Reference.cs:line 371
       at ConsoleApplication4.Program.Main(String[] args) in C:\Users\Antonio\Desktop\SymbolFileParser\ConsoleApplication4\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.Runtime.Serialization.SerializationException
       Message='EndElement' 'SymbolElem' from namespace 'http://schemas.datacontract.org/2004/07/SymbolFileParser.Common' is not expected. Expecting element '_x003C_BitOffset_x003E_k__BackingField'.
       Source=System.Runtime.Serialization
       StackTrace:
            at System.Runtime.Serialization.XmlObjectSerializerReadContext.ThrowRequiredMemberMissingException(XmlReaderDelegator xmlReader, Int32 memberIndex, Int32 requiredIndex, XmlDictionaryString[] memberNames)
            at ReadSymbolElemFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )
            at System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
            at System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
            at System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
            at System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 id, RuntimeTypeHandle declaredTypeHandle, String name, String ns)
            at ReadArrayOfSymbolElemFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString , XmlDictionaryString , CollectionDataContract )
            at System.Runtime.Serialization.CollectionDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
            at System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
            at System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
            at System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator xmlReader, Type declaredType, DataContract dataContract, String name, String ns)
            at System.Runtime.Serialization.DataContractSerializer.InternalReadObject(XmlReaderDelegator xmlReader, Boolean verifyObjectName, DataContractResolver dataContractResolver)
            at System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(XmlReaderDelegator reader, Boolean verifyObjectName, DataContractResolver dataContractResolver)
            at System.Runtime.Serialization.DataContractSerializer.ReadObject(XmlDictionaryReader reader, Boolean verifyObjectName)
            at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameterPart(XmlDictionaryReader reader, PartInfo part, Boolean isRequest)
       InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:09:27.607

问题是 DataContractSerializer 不知道如何处理循环引用。您可以在父项上指定[IsReference](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.isreference.aspx)属性。[如此处](http://www.mostlydevelopers.com/blog/post/2009/02/03/fixing-wcf-circular-reference-serialization.aspx)所述。

# javascript - Word Array to String

> ID：11889329
> 
> 赞同：13
> 
> 时间：2012-08-09T18:02:05.340
> 
> 标签：javascript, jquery, arrays, string

how to do this in Javascript or Jquery?

Please suggest in 2 steps:

1.- Word Array to Single Byte Array.

2.- Byte Array to String.

Maybe this can help:

```
function hex2a(hex) {
    var str = '';
    for (var i = 0; i < hex.length; i += 2)
        str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
    return str;
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-09T23:24:45.957

What you are trying to achieve is already implemented in CryptoJS. From the [documentation](http://code.google.com/p/crypto-js/#The_Hasher_Output):

> You can convert a WordArray object to other formats by explicitly calling the toString method and passing an encoder.

```
var hash = CryptoJS.SHA256("Message");
alert(hash.toString(CryptoJS.enc.Base64));
alert(hash.toString(CryptoJS.enc.Hex)); 
```

Honestly I have no idea why you want to implement that yourself... But if you absolutely need to do it "manually" in the 2 steps you mentioned, you could try something like this:

```
function wordToByteArray(wordArray) {
    var byteArray = [], word, i, j;
    for (i = 0; i < wordArray.length; ++i) {
        word = wordArray[i];
        for (j = 3; j >= 0; --j) {
            byteArray.push((word >> 8 * j) & 0xFF);
        }
    }
    return byteArray;
}

function byteArrayToString(byteArray) {
    var str = "", i;
    for (i = 0; i < byteArray.length; ++i) {
        str += escape(String.fromCharCode(byteArray[i]));
    }
    return str;
}

var hash = CryptoJS.SHA256("Message");
var byteArray = wordToByteArray(hash.words);
alert(byteArrayToString(byteArray)); 
```

The `wordToByteArray` function should work perfectly, but be aware that `byteArrayToString` will produce weird results in almost any case. I don't know much about encodings, but ASCII only uses 7 bits so you won't get ASCII chars when trying to encode an entire byte. So I added the `escape` function to at least be able to display all those strange chars you might get. ;)

I'd recommend you use the functions CryptoJS has already implemented or just use the byte array (without converting it to string) for your analysis.

# android - 如何在android中的imageview上添加自定义视图

> ID：11889332
> 
> 赞同：1
> 
> 时间：2012-08-09T18:02:15.233
> 
> 标签：android, android-imageview, android-custom-view

我正在制作一个 android 应用程序，用户在其中从图库中选择并加载图像。我完成了在图像视图中加载我的图像。图像视图上方有一个按钮。当用户单击按钮时，必须在图像上绘制一个具有默认位置和尺寸的矩形。用户可以通过单击边来重新调整该矩形的大小，也可以将矩形拖动到图像视图中的任意点。我对 Google 和堆栈溢出进行了一些研究，发现我需要为我的矩形创建一个自定义视图并将其绘制在 imageview 上。我找到的解决方案展示了如何制作自定义视图以及如何向其中添加触摸事件。但问题是我没有找到如何在活动中的图像视图上添加 myCustomView 的解决方案。请帮我解开这个疑惑。

下面是我的主要活动，其中有一个按钮（加载图像）用户单击它以从图库中加载图像。图像的路径被发送到其他活动。

```
public class MainActivity extends Activity {
    private static int RESULT_LOAD_IMAGE = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button buttonLoadImage = (Button) findViewById(R.id.buttonLoadPicture);
    buttonLoadImage.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            Intent i = new Intent(
                    Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

            startActivityForResult(i, RESULT_LOAD_IMAGE);
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK
            && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();
        Intent i = new Intent(MainActivity.this, ImageActivity.class);
        i.putExtra("key", picturePath);
        startActivity(i);
        finish();

    }
}
} 
```

下面是在 imageview 上显示图像并且必须调用 mycustomview 的活动。

```
public class ImageActivity extends Activity {
 Paint paint = new Paint();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_image);

    Bundle bundle = getIntent().getExtras();
    final String value = bundle.getString("key");
    Bitmap bmp = BitmapFactory.decodeFile(value);
    ImageView imageView = (ImageView) findViewById(R.id.imgView);
imageView.setImageBitmap(bmp);

    Button buttonExit = (Button) findViewById(R.id.buttonExit);
    buttonExit.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            finish();
        }
    });

    Button buttonDrawRect = (Button) findViewById(R.id.DrawRect);
    buttonDrawRect.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {

        }
    });
} 
```

![在此处输入图像描述](../Images/9b59ac9653c4644e7c81eaefef7ac692.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:34:43.960

浏览这些链接。可以帮助你

[Android中的重叠视图](https://stackoverflow.com/questions/961944/overlapping-views-in-android)

[如何在android中的其他视图上添加覆盖视图？](https://stackoverflow.com/questions/3790511/how-to-add-overlay-view-over-other-view-in-android)

还要检查链接的帖子

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:35:20.683

基本上在 SurfaceView 上绘制图像。然后对于任何过去的事情，设置 android:background="@null" 以获得透明度。这就是你如何分层这样的东西。不要设置为 null 而是设置为 @null。

# c# - 我想将一个字符串数组传递给 main 但保留空格

> ID：11889333
> 
> 赞同：1
> 
> 时间：2012-08-09T18:02:18.243
> 
> 标签：c#, string, arguments, spaces

我想将一个字符串传递给 main，但我遇到了空格问题。

我将字符串传递`"C:\Documents and Settings\desktop\..."`给`Main(string[] args)`并且我有：

```
args[0] = "C:\Documents" 
args[1] = "and"
args[2] = "Settings\desktop\..." 
```

但我想要的是：

```
args[0] = "C:\Documents and Settings\desktop\..." 
```

有什么方法可以保留空格但连接到字符串的一个元素？该代码还应该使用给定文件路径中的任意数量的空格，在这种情况下不仅仅是 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:06:48.983

这通常通过在引号中传递参数来处理。

例如，如果您将其称为：

```
yourApp.exe "C:\Documents and Settings\desktop..." 
```

您将在第一个 arg ( `args[0]`) 中获得字符串。

例如，使用这个程序：

```
using System;

internal class Program
{
    private static void Main(string[] args)
    {
        foreach (var arg in args) Console.WriteLine(arg);

        Console.ReadKey();
    }
} 
```

如果您使用命令行参数运行它：

```
"C:\Documents and Settings\desktop..." 
```

（加上引号），这将打印：

> C:\文档和设置\桌面...

如果这不是一个选项，并且您只有一个参数，您可以随时加入结果：

```
using System;

internal class Program
{
    private static void Main(string[] args)
    {
        string argument = String.Join(" ", args);

        Console.WriteLine(argument);
        Console.ReadKey();
    }
} 
```

这将在不将路径括在引号中的情况下工作，但它假定整个路径是单个路径，“单词”之间只有一个空格，并且没有其他参数。就个人而言，我建议将调用用引号引起来，因为这是标准约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:06:31.350

当您从命令行调用程序时，您不能只引用字符串吗？

例子：`myprog "This is one argument"`

```
namespace test
{
    class Program
    {
        /*
         * EXAMPLE: test arg1 "arg2 with spaces" arg3
         * args[0]=arg1...
         * args[1]=arg2 with spaces...
         * args[2]=arg3...
         */
        static void Main(string[] args)
        {
            for (int i = 0; i < args.Length; i++)
                System.Console.WriteLine("args[{0}]={1}...", i, args[i]);
        }
    }
} 
```

# xml - Ajax 调用 Struts2 动作产生 javax.xml.transform.TransformerException

> ID：11889337
> 
> 赞同：0
> 
> 时间：2012-08-09T18:02:51.870
> 
> 标签：xml, ajax, jquery, struts2

我正在尝试编写一个从 Ajax 调用 Struts2 操作并使用 XML 取回数据的小示例。当调用执行时，我得到一个`javax.xml.transform.TransformerException`（如下所示）。最后，我想从 Ajax 调用返回的数据 XML 中获取 name 属性。

我可能在这里遗漏了一些简单的东西，但我不知道遗漏了什么。

我在 struts.xml 中的操作：

```
<action name="AjaxFormSubmit" class="test.FormSubmit" >
    <result type="xslt">
        <param name="exposedValue">fName</param>
    </result>
</action> 
```

Javascript：

```
$.ajax({
    url: "AjaxFormSubmit.action",
    error: function( data )
    {
        alert( "error" );
        alert( data );
    },
    success: function( data )
    {
        alert( "success" );
        alert( data );
    }
}); 
```

我的动作课：

```
public class FormSubmit extends ActionSupport {

    public FormSubmit()
    {
        System.out.println( "in FormSubmit constructor" );
    }

    private String fName;

    public String getFName() {
        return fName;
    }

    public void setFName(String fName) {
        System.out.println( "setting fName: " + fName );
        this.fName = fName;
    }

    public String execute() throws Exception
    {
        System.out.println( "in execute" );

        return SUCCESS;
    }
} 
```

例外：

```
Aug 9, 2012 1:32:20 PM com.opensymphony.xwork2.util.logging.commons.CommonsLogger error
SEVERE: Unable to render XSLT Template, 'null'
Error transforming result - [unknown location]
    at org.apache.struts2.views.xslt.XSLTResult$1.error(XSLTResult.java:351)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.postErrorToListener(TransformerImpl.java:788)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:731)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:336)
    at org.apache.struts2.views.xslt.XSLTResult.execute(XSLTResult.java:392)
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: javax.xml.transform.TransformerException: Operation not supported.
    ... 68 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:42:27.763

我认为 的实现`XSLTResult`已更改，`location`现在需要参数。

但是当您使用下面的 XSL 文件时，您仍然可以查看生成的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
        <xsl:template match="/">
            <xsl:copy-of select="*"/>
        </xsl:template>
    </xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:26:37.160

缺少的是 XSL 模板，如错误所示：

```
SEVERE: Unable to render XSLT Template, 'null' 
```

“ [xslt”结果类型文档](http://struts.apache.org/2.x/docs/xsl-result.html)声明“位置”参数定义模板。

你真的想要一个 XSL 结果，还是只是 XML？你真的在改造它吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T12:30:30.103

试试这个，将在 Struts 2.0.14 中使用 jsonplugin-0.32.jar 帮助您。它对我有用。

struts.xml：

```
<struts>
     <package name="example" extends="json-default">
        <action name="HelloWorld" class="example.HelloWorld"  >
            <result type="json" />
        </action>
              <action name="HelloWorld1" class="example.HelloWorld"  >
            <result name="success" >example/HelloWorld.jsp</result>
        </action>
    </package>
</struts> 
```

动作类 Helloworld.java：

```
package prabhakar;

import glb.DB;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

/**
 * Prabhakar
 */
public class HelloWorld  {

    private List<StateMaster> stateList= new ArrayList<StateMaster>();
    private List<RegnMaster> regnList= new ArrayList<StateMaster>();

    private Integer stateId;
    public Integer getStateId()
    {
    return this.stateId;
    }
    public void setStateId(Integer stateId)
    {
    this.stateId=stateId;
    }
    public List<StateMaster> getStateList() {
        return stateList;
    }

    public void setStateList(List<StateMaster> stateList) {
        this.stateList = stateList;
    }
     public void setRegnList(List<RegnMaster> regnList) {
        this.regnList = regnList;
    }
    public List<RegnMaster> getRegnList() {
        return regnList;
    }

    public String execute() throws Exception {

        stateList=DB.getStateData()//
        if(stateId !=null)
          {
         regnList=DB.getRegnByStateId(stateId);
          }

        //setMessage(getText(MESSAGE));
        return "success";
    }

    /**
     * Provide default valuie for Message property.
     */

} 
```

您可以直接调用 HelloWorld.action 来查看 JSON 数据，也可以将 JSON 数据绑定到下面的表单元素。

JSP 页面 HelloWorld.jsp：

```
 /*
     Prabhakar
  */

<%@ page contentType="text/html; charset=UTF-8" %>

<%@ taglib prefix="s" uri="/struts-tags" %>
<script>
<%@include file="../js/jquery-1.7.1.min.js"%>
</script>
    <html>

<!-- JavaScript Plugins -->
  <script>
       function getLoad(){

       var stateId = $('#state').val();

$.getJSON('HelloWorld.action', {'stateId': stateId},
    function(data) {

           var divisionList = (data.regnList);

                var options = $("#regn");
                options.find('option')
    .remove()
    .end();
     options.append($("<option />").val("-1").text("--Select--"));
$.each(divisionList, function() {

    options.append($("<option />").val(this.regnId).text(this.regnName));
});
    }
);}
   </script>

<!-- jQuery-UI Dependent Scripts -->

    <body>
        State List <s:select name="stateId" list="stateList" id="state" listKey="stateId" onchange="getLoad()" listValue="stateName" headerKey="0" headerValue="--select--" />
        Regn List <s:select name="regnId"  list="regnList" listKey="regnId" id="regn" listValue="regnName" headerKey="0" headerValue="--select--" />
    </body>
</html> 
```

:) :)

# javascript - 当我在正则表达式中放置空格键时，为什么我的 Javascript test() 函数会失败？

> ID：11889342
> 
> 赞同：1
> 
> 时间：2012-08-09T18:03:00.333
> 
> 标签：javascript, html, regex

我有这个：

```
var regex=/[a-z\d,]+$/i;

if (!/[a-z\d,]+$/i.test(user_input)){
      alert('format is invalid');
} 
```

这可行，但是当我想在正则表达式中包含“”字符（空格）时，函数失败或不会触发 if 语句中的块。

```
var regex=/[a-z\d ,]+$/i; 
```

我究竟做错了什么？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:12:01.483

添加开始模式`^`

```
/^[a-z\d ,]+$/i.test(user_input) 
```

否则，只有在行尾匹配时才进行测试。在这里尝试：[正则表达式](http://regexpal.com/?flags=gi&regex=%5E%5Ba-z%5Cd%20,%5D%2b%24&input=123%20This%20is%20a%20Test)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:05:25.773

空格由 表示`\s`：

```
 var regex=/[a-z\d\s,]+$/i; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:09:58.857

如上所述，空格由“\s”表示。

```
 var regex=/[a-z\d\s,]+$/i; 
```

如需更多说明，请访问以下网址：
[http ://www.javascripter.net/faq/regularexpressionsyntax.htm](http://www.javascripter.net/faq/regularexpressionsyntax.htm)

# xslt - XSLT value-of 具有多个不同类型的子级

> ID：11889347
> 
> 赞同：0
> 
> 时间：2012-08-09T18:03:36.883
> 
> 标签：xslt, xpath, value-of

为什么我会得到这些数据：

```
<A>
  <B>block 1</B>
  <B>block 2</B>
  <C>
    no
  </C>
  <B>block 3</B>
</A> 
```

而这个转变：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method= "html" indent="yes"/>

<xsl:template match="A/B">
  <xsl:value-of select="."/> <br/>
</xsl:template>

</xsl:stylesheet> 
```

以下输出：

```
block 1
block 2
no block 3 
```

我希望它是：

```
block 1
block 2
block 3 
```

那么：为什么要包含 C 块？

//编辑这里的东西测试： [http ://www.ladimolnar.com/JavaScriptTools/XSLTransform.aspx](http://www.ladimolnar.com/JavaScriptTools/XSLTransform.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:10:24.067

由于[默认模板规则](http://docstore.mik.ua/orelly/xml/xmlnut/ch08_07.htm)。

```
<xsl:template match="*|/">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="text()|@*">
  <xsl:value-of select="."/>
</xsl:template> 
```

XSL 处理器依次检查每个节点，寻找匹配的模板。如果没有找到，它会使用默认模板，该模板只输出文本。在您的情况下，会发生以下情况（“不匹配”表示*您的*样式表中不匹配）：

```
/A         no match, apply-templates (default element template)
/A/B       match, output text
/A/B       match, output text
/A/C       no match, apply-templates
/A/C/text  no match, output text (default text template)
/A/B       match, output text 
```

要跳过路径`/A/C`，只需添加一个空模板

```
<xsl:template match="A/C"/> 
```

这将匹配不需要的元素并抑制输出。

# javascript - 使用 javascript 设置表格行的样式属性

> ID：11889349
> 
> 赞同：2
> 
> 时间：2012-08-09T18:03:56.263
> 
> 标签：javascript, html, css

假设我有这样的页面

```
<html>    
    <body>
        <table id="t1">
            <tr><th>Head1</th><th>Head2</th></tr>
            <tr><td>1</td><td>2</td></tr>
            <tr><td>3</td><td>4</td></tr>
      </table>
   </body>
</html> 
```

我的 CSS

```
table th { background:color1;} 
table td { background:color2;} 
```

如何使用 javascript 语句更改除标题行之外的所有行的背景颜色。遍历每一行和每一列是唯一的方法吗？

我可以得到`document.getElementById('t1').rows[1]`和`rows[2]`改变背景。但是还有另一种有效的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T18:17:25.177

您可以遍历元素并更改背景

```
var els = document.getElementById("t1").getElementsByTagName("td");

for(var i=0;i<els.length;i++){
  els[i].style.background = "green"   
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T18:07:34.550

在行上放一个类并将背景放在 css 中，就像对表格一样

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T18:37:33.667

你可以试试这个：

```
table th {background: color1;}
table tbody {background: color2;}

<table id="t1">
    <tr><th>Head1</th><th>Head2</th></tr>
    <tbody id="t2">
        <tr><td>1</td><td>2</td></tr>
        <tr><td>3</td><td>4</td></tr>
    </tbody>
</table> 
```

在脚本中：

```
document.getElementById('t2').style.backgroundColor=color3; 
```

**编辑**

也可以将规则添加到特定的`styleSheet`.

CSS：

```
table th {background: color1;}
table td {background: color2;} 
```

脚本：

```
var sSheet = document.styleSheets[0];
if (sSheet.insertRule) {
    sSheet.insertRule('td {background-color: color3}', sSheet.cssRules.length);
} else { // For IE < 9
    sSheet.addRule('td', 'background-color: color3', -1);
} 
```

您还可以修改现有规则本身：

```
var tdRule,
    sSheet = document.styleSheets[0];       
if (sSheet.cssRules) {
    tdRule = sSheet.cssRules[1];
} else { // For IE < 9
    tdRule = sSheet.rules[1];
}
tdRule.style.backgroundColor = color3; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T18:39:29.690

我使用 JQuery。

```
$('td').css('background','#3232'); 
```

# r - 抖动点时避免重叠

> ID：11889353
> 
> 赞同：11
> 
> 时间：2012-08-09T18:04:12.997
> 
> 标签：r, plot

在阅读科学论文时，我经常会遇到点在没有相互重叠的情况下抖动的情节。[我怀疑它们中的许多是用一个名为GraphPad Prism](http://www.graphpad.com/)的程序绘制的，但肯定有一种方法可以在 R 中做同样的事情。虽然它并不完美（如下面的红点）我认为它看起来比随机抖动要好得多.

![无重叠的抖动点](../Images/a5074221957b28f85de263ecf0735a8a.png)

如果有人知道如何做到这一点，最好使用一些基本功能，我会很高兴知道。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T00:16:33.707

这是一个使用 ggplot2 的解决方案`geom_dotplot()`：

```
library(ggplot2)
set.seed(1234)

dat = data.frame(y=c(rpois(20, 4), rpois(20, 1), runif(20, 0, 20)), 
                category=rep(c("group_1", "group_2", "group_3"), c(20, 20, 20)))

dotplot_1 = ggplot(dat, aes(x=category, y=y)) + 
            geom_dotplot(aes(fill=category), binaxis="y", 
                         stackdir="center", binwidth=0.8) +
            stat_summary(fun.y=median, fun.ymin=median, fun.ymax=median, 
                         geom="crossbar", width=0.7)

ggsave("dotplot_1.png", dotplot_1, width=6, height=4) 
```

![在此处输入图像描述](../Images/ff479e4c8ba26d59f34c4f6b0281f984.png)

# iphone - 是否有共享和同步 iOS 模拟器 Applications 文件夹的方法

> ID：11889354
> 
> 赞同：5
> 
> 时间：2012-08-09T18:04:13.470
> 
> 标签：iphone, ios, macos, ipad

我们的销售团队经常需要演示当前正在开发的应用程序。我们使用了多种方法将它们安装在他们的笔记本电脑上，但一切都非常手动。

我们最初使用的方法是让我们下载源代码并为每个推销员编译每个项目。非常耗时且烦人。

然后我们变得更聪明一点，并意识到我们可以复制 iOS 模拟器的 Applications 文件夹，然后将其复制到每个推销员笔记本电脑上的 iOS 模拟器的 Applications 文件夹中。好多了，但仍然是将它们全部复制到每台笔记本电脑的手动部分。

所以我开始寻找一些 Mac 的文件夹同步选项，并发现了这种技术[http://www.youtube.com/watch?v=iWoXPWlu_Dk](http://www.youtube.com/watch?v=iWoXPWlu_Dk)

非常棒，似乎完全符合我的需要。我有一个中央共享文件夹，我可以将新的 iOS 应用程序放入其中，然后销售人员的笔记本电脑会自动与该应用程序文件夹同步，新的应用程序就会出现，而无需将笔记本电脑放在这里。

不幸的是，当它是符号链接或别名时，iOS 模拟器似乎无法识别 Applications 文件夹。是否有一些 Mac 魔法可以使这项工作发挥作用？（我通常是一个 Windows 人，最近才在 iOS 世界工作，所以这里可能缺少一些基本的东西）。

我希望应用程序文件夹 /Application Support/iPhone Simulator/5.1/Applications 是一个共享文件夹，它会自动为它们同步，抓取我们为演示准备的任何新应用程序（并将它们更新为旧应用程序）。似乎是让他们早期构建的一种不错的平稳方式。

我们已经为实际设备使用了像 TestFlight 这样的服务，这是一个很好的选择，但是当他们手边没有设备或者只是在他们的笔记本电脑上浏览演示时，我们希望有一个很好的简单过程来保存他们为他们的模拟器安装更新了新版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:52:59.917

由于我只有一台 Mac，因此尚未对此进行测试，但请尝试一下：

1.  安装 Dropbox
2.  在那里创建一个共享文件夹并从 /Users/USERNAME/Library/Application Support/iPhone Simulator/5.1/Applications 复制您的应用程序
3.  创建一个 shell 脚本将它们复制回模拟器的位置，并将其添加到共享文件夹中。它应该看起来像这样：

    ```
    #!/bin/sh

    cp -R ~/Dropbox/Appfolder/appname ~/Library/Application Support/iPhone Simulator/5.1/Applications/ 
    ```

4.  让您的用户同步他们的保管箱以获取文件，然后运行 ​​shell 脚本来复制文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:48:01.130

首先是一些背景知识，你真的不需要这个，但我喜欢教学:)。

在 Unix 和现在的 MacOS 上，有两种基本的链接。“正常”链接和符号链接。别名，在 windows、unix 和 mac 上是一种符号链接：链接包含对原始文件的引用。正常或硬链接创建指向数据的第二个目录条目，如果您删除原始文件，操作系统知道还有另一个指向它的条目，因此它仅在所有硬链接时才实际删除文件（或目录）链接已被删除。硬链接的缺点是它们必须在同一个文件系统上，这样文件系统才能统计有多少硬链接。

好的，我刚刚安装了Dropbox，它似乎在用户的主目录中创建了一个真正的文件夹，所以除非你是一个复杂的磁盘分区方案，或者文件库1，其中用户的主目录实际上是一个加密磁盘图像，您可以使用硬链接。这也意味着您不需要复制或同步，因为 Dropbox 已经在这样做了。

没有更正但实际上没有指出的一件事是，在您的帖子中，您似乎正在复制到`/Application Support`，而不是`~/Library/Application Support`或`/Library/Application Support`。由于您的基本方案在没有 Dropbox 的情况下工作，我认为这是一个错字。

在我给你命令之前，你可能想用 Finder 删除旧的 iPhone Simulator Applications 目录，而不是使用该`rm`命令，因为该`rm`命令可能具有非常大的破坏性。

好的，最后，执行链接的命令；只要文件名包含空格，引号就很重要。此示例适用于 ~/Library

```
rm  -rf "~/Library/Application Support/iPhone Simulator/5.1/Applications"

ln "~/Dropbox/Simulator Applications" "~/Library/Application Support/iPhone Simulator/5.1/Applications" 
```

这应该有效，您现在可以停止阅读，剩下的只是更多的教育:)

波浪号 ( `~`) 是用户主目录的快捷方式。使用没有这个的命令来`/Library`代替。

如果你想确定你有确切的路径，你可以将文件和文件夹从查找器窗口拖到终端，路径被粘贴而不是文件。

如果你在搞乱根文件系统中的东西，你可能需要超级用户权限。如果您使用管理员帐户登录，则可以运行具有超级用户访问权限的单个命令，如下所示。

```
sudo ln  "/Library/Application Support/iPhone Simulator" fred 
```

shell 会询问*您的*密码，然后以超级用户身份为您运行命令。 `sudo`记住授权几分钟，然后您必须再次进行身份验证。

# xcode - Xcode - 在一台设备上测试两个不同版本的项目

> ID：11889356
> 
> 赞同：2
> 
> 时间：2012-08-09T18:04:22.837
> 
> 标签：xcode

对于 AB 测试，我有两个不同版本的 Xcode 项目，我想在同一设备上加载它们。有没有办法加载两个版本而无需创建另一个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:10:28.043

您希望在您的设备上拥有同一个应用程序的两个不同版本。

因此，在您的 Xcode 应用程序中创建第二个目标（可能复制第一个目标），然后您需要做的就是拥有一个具有*不同*捆绑 ID 的第二个 Info.plist 文件。其他所有内容（即编译的文件、为目标设置的设置等）都是相同的。

Bundle ID 对您的 iDevice 很重要，因此您可以在其上拥有多个名称相似的应用程序，但它们在每种情况下都必须具有不同的 bundle ID。

# asp.net-mvc-3 - 带有验证的独立组件

> ID：11889357
> 
> 赞同：2
> 
> 时间：2012-08-09T18:04:24.107
> 
> 标签：asp.net-mvc-3, validation, model-binding

我有一个名为**Foo**的模型，它有一个名为**MyProp的****Bar**类型的属性。当我将此模型发布到控制器时，我希望模型绑定器验证**MyProp**，因为它具有所需的属性，就像它使用字符串一样。我需要它在 Bar 类中独立或作为一个单独的类。我曾尝试在**Bar**类上使用 IValidatableObject ，但似乎无法检查**Foo**类是否在**MyProp上具有****Required**属性？所以现在我别无选择，需要一些帮助。下面是我的问题的一些示例代码。

 **```
public class Foo {
    [Required]
    public Bar MyProp { get; set; }
}

public class Bar {
    [ScaffoldColumn(false)]
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:36:42.623

这是我的问题的一种解决方案，我可以使用内置的 required 属性并仍然获得自定义行为。这只是一些概念验证代码。

该模型：

```
public class Page : IPageModel {
    [Display(Name = "Page", Prompt = "Specify page name...")]
    [Required(ErrorMessage = "You must specify a page name")]
    public PageReference PageReference { get; set; }
} 
```

模型粘合剂：

```
public class PageModelBinder : DefaultModelBinder {
    protected override void OnModelUpdated(ControllerContext controllerContext, ModelBindingContext bindingContext) {
        foreach (PropertyDescriptor property in TypeDescriptor.GetProperties(bindingContext.ModelType)) {
            var attributes = property.Attributes;
            if (attributes.Count == 0) continue;
            foreach (var attribute in attributes) {
                if (attribute.GetType().BaseType == typeof(ValidationAttribute) && property.PropertyType == typeof(PageReference)) {
                    var pageReference = bindingContext.ModelType.GetProperty(property.Name).GetValue(bindingContext.Model, null) as PageReference;
                    Type attrType = attribute.GetType();
                    if (attrType == typeof (RequiredAttribute) && string.IsNullOrEmpty(pageReference.Name)) {
                        bindingContext.ModelState.AddModelError(property.Name,
                            ((RequiredAttribute) attribute).ErrorMessage);
                    }
                }
            }
        }
        base.OnModelUpdated(controllerContext, bindingContext);
    }
} 
```

模型绑定器提供程序：

```
public class InheritanceAwareModelBinderProvider : Dictionary<Type, IModelBinder>, IModelBinderProvider {
    public IModelBinder GetBinder(Type modelType) {
        var binders = from binder in this
                      where binder.Key.IsAssignableFrom(modelType)
                      select binder.Value;

        return binders.FirstOrDefault();
    }
} 
```

最后是 global.asax 注册：

```
var binderProvider = new InheritanceAwareModelBinderProvider {
    {
        typeof (IPageModel), new PageModelBinder() }
    };
ModelBinderProviders.BinderProviders.Add(binderProvider); 
```

结果：[http ://cl.ly/IjCS](http://cl.ly/IjCS)

那么您如何看待这个解决方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T22:57:15.440

问题是没有调用 html 字段`MyProp`，并且 MVC 不会对此属性进行任何验证。

实现目标的一种方法`Bar`是`Bar's`在`Foo`. 您可以使用*AutoMapper*将管道代码最小化。

另一种解决方案是编写一个自定义验证属性来验证`null`值并使用它来代替`Required`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:51:29.653

## 解决方案 1

而不是使用`[Required]`，尝试自定义`ValidationAttribute`

```
public class Foo {
    [RequiredBar]
    public Bar MyProp { get; set; }
}

public class Bar {
    [ScaffoldColumn(false)]
    public int Id { get; set; }
    public string Name { get; set; }
}

public class RequiredBar : ValidationAttribute {

    public override bool IsValid(object value)
    {
        Bar bar = (Bar)value;

        // validate. For example
        if (bar == null)
        {
            return false;
        }

        return bar.Name != null;
    }
} 
```

## 解决方案二：

简单的把`Required`Bar对应的需要的属性放在上面，例如

```
public class Foo {
    //[RequiredBar]
    public Bar MyProp { get; set; }
}

public class Bar {
    [ScaffoldColumn(false)]
    public int Id { get; set; }

    [Required]
    public string Name { get; set; }
} 
```**

# c - 为什么我没有得到预期的输出？

> ID：11889358
> 
> 赞同：0
> 
> 时间：2012-08-09T18:04:29.140
> 
> 标签：c, printf

```
int main()
{
  int x;
  float y;
  char c;

  x = -4443;
  y = 24.25;
  c = 'M';

  printf("\nThe value of integer variable x is %f", (float)x);
  printf("\nThe value of float variable y is %d", y);
  printf("\nThe value of character variable c is %f\n",c);
    return 0;
} 
```

输出：

```
The value of integer variable x is -4443.000000
The value of float variable y is 0
The value of character variable c is 24.250000 
```

为什么我没有得到预期的输出？

但是当我使用外部铸造时，我得到了预期的输出：

```
The value of integer variable x is -4443.000000
The value of float variable y is 24
The value of character variable c is 77.000000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:08:14.283

> 为什么我没有得到预期的输出？

简短的回答：因为你的期望是错误的。

您正在指示编译器从 where `y`is 读取一个整数。这是错误的。格式说明符不会告诉编译器进行强制转换，只是期望什么类型，并相信*您*提供正确的类型。

该行为可能是由于**例如**a`float`存储在 8 个字节中。`0`在这种情况下，高位字节将是。但是 an`int`存储在 4 个字节中。所以你告诉编译器`int`从哪里`y`读取，它读取前 4 个字节，即是`0`，然后打印`0`...

编辑：正如约翰在评论中指出的那样，这是 UB，这意味着任何事情都可能发生：

**7.21.6.1/9**

> 如果转换规范无效，则行为未定义。282) 如果任何参数不是相应转换规范的正确类型，则行为未定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:30:58.233

许多计算平台以不同的方式传递不同类型的参数。在某些平台上，浮点参数在特殊的浮点寄存器中传递。在大多数平台上，整数参数在通用处理器寄存器中传递。大型参数（例如结构）存储在内存中的某个位置，而是传递一个指针（对 C 源代码不可见）。一旦使用了少数可用于参数的寄存器，其余参数通常会在堆栈上传递。

当您调用 printf 时，编译器与您传递给格式字符串中的转换说明符的参数不匹配。（除非一个好的编译器会检查并在类型不匹配时发出警告。）为了运行，printf 例程读取格式字符串，当它找到转换说明符时，它会从相应参数**应该**读取的位置读取数据是。如果您指定“%d”但传递一个浮点数，printf 例程可能会从通用处理器寄存器读取数据，但浮点值在浮点寄存器中。因此，打印的值将是发生在通用处理器寄存器中的任何数据。

类似地，当您指定“%f”但传递一个整数时，printf 例程可能从浮点寄存器中读取，但整数值在通用处理器寄存器中。

编译器**不会**将 printf 参数转换为目标类型，并且**可能不会**警告您不匹配。您必须将格式字符串中的转换说明符与参数类型相匹配。

奖励：[这里是](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/LowLevelABI/000-Introduction/introduction.html)描述如何在一个平台（Mac OS X）上将参数传递给子例程的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:07:39.137

您不能将 char 格式化为 float `"%f"`，使用`"%c"`or`"%d"`代替。我发现[http://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)是一个很好的参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T18:07:13.180

格式说明符和参数类型不匹配，我认为这会导致未定义的行为。`printf`不会为您进行强制转换，因此您必须显式转换参数。

# ruby-on-rails - rails sqlite3 gem 不会在 OS X Mountain Lion 上构建：私有方法 `split' 需要 true:TrueClass

> ID：11889362
> 
> 赞同：2
> 
> 时间：2012-08-09T18:04:52.500
> 
> 标签：ruby-on-rails, macos, build, sqlite

我无法构建 rails sqlite3 gem。无论我安装 sqlite3-ruby 还是只安装 sqlite3，它都失败了。由于 sqlite3 是由 macports 安装的，所以它都在 /opt/local 中。我用rvm。我正在使用新更新的 OS X Mountain Lion Macbook。

```
flyer$ which sqlite3
/opt/local/bin/sqlite3
flyer$ ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [i686-darwin11.4.0]
flyer$ rails -v
Rails 2.3.14

flyer$ gem install sqlite3-ruby -- --with-opt-dir
Building native extensions.  This could take a while...
ERROR:  Error installing sqlite3-ruby:
    ERROR: Failed to build gem native extension.

        /Users/russ/.rvm/rubies/ruby-1.8.7-p358/bin/ruby extconf.rb --with-opt-dir
/Users/russ/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/mkmf.rb:1164:in `dir_config': private method `split' called for true:TrueClass (NoMethodError)
    from /Users/russ/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/mkmf.rb:1745:in `init_mkmf'
    from /Users/russ/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/mkmf.rb:1770
    from extconf.rb:3:in `require'
    from extconf.rb:3
***dir_config: dir is true, target is opt, idefault is , ldefault is 

Gem files will remain installed in /Users/russ/.rvm/gems/ruby-1.8.7-p358/gems/sqlite3-1.3.6 for inspection.
Results logged to /Users/russ/.rvm/gems/ruby-1.8.7-p358/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out 
```

开头的那一行`***dir_config:`是我在 mkmf.rb 第 1164 行之前添加的 puts 语句的输出。第 1164 行是

```
defaults = Array === dir ? dir : dir.split(File::PATH_SEPARATOR) 
```

请注意，我无法升级 ruby​​ 或 rails，因为我需要匹配我的托管服务提供商的版本。我相信这是在我的 Mountain Lion 升级之前构建的，我今天确实安装了最新的 XCode。

我知道这一定是我的问题（我怀疑这很愚蠢），但我不知道怎么做。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:10:18.530

我没有足够的声誉来发表评论，所以我想我会发布一个可能没有帮助的答案。老实说，我也真的不明白这个错误，但我想知道它是否与 Ruby 版本或操作系统有关。我看到有些人就 Mountain Lion 的本地库问题发表了一些看法。我在 SO 上找到[了这个答案；](https://stackoverflow.com/a/3009142/877472)我会尝试他的第二个和第三个选项（不是雪豹选项），看看这是否有什么不同。

# jquery - jQuery 从 URL 设置活动选项卡

> ID：11889365
> 
> 赞同：1
> 
> 时间：2012-08-09T18:05:03.043
> 
> 标签：jquery, tabs

我有这个标签系统：

```
$(document).ready(function(){
    $('#tabs div').hide();
    $('#tabs div:first').show();
    $('#tabs ul li:first').addClass('active');
    $('#tabs ul li a').click(function(){
        if($(this).parent().hasClass('active')) {
            /** active **/
        } else {
            $('#tabs ul li').removeClass('active');
            $(this).parent().addClass('active');
            var currentTab = $(this).attr('href');
            $('#tabs div').hide();
            $(currentTab).show('slide', {}, 500);
        }
        return false;
    });
});

<div id="tabs">
        <ul>
            <li><a href="#tab-1">1</a></li>
            <li><a href="#tab-2">2</a></li>
            <li><a href="#tab-3">3</a></li>
            <li><a href="#tab-4">4</a></li>
            <li><a href="#tab-5">5</a></li>
        </ul>

        <div id="tab-1">
Content tab1
</div>
<div tab2... etc 
```

如果我在 URL 的末尾添加#tab-3，它应该会自动显示并设置选项卡 3 处于活动状态，而无需我单击它。

这可能以简单的方式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T18:13:29.757

在进一步查看您的代码后进行编辑 -

如果每次 DOM 准备好时都在这两行中编写代码，那么您总是会看到第一个选项卡。

```
$('#tabs div:first').show();
$('#tabs ul li:first').addClass('active'); 
```

在决定是否应该显示第一个选项卡之前，您必须先检查“#tab”的 url。

```
$(function(){
    ...
    var hash = window.location.hash;
    if(hash){
        $('a[href="' + hash +'"]').parent('li').addClass('active');
        var elementID = hash.replace('#', '');
        $(elementID).show();
    } else {
        $('#tabs div:first').show();
        $('#tabs ul li:first').addClass('active');
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:19:47.237

这应该可以工作：

```
$(window).bind( 'hashchange', function( event ) {
    var hash=window.location.hash;
    if(!hash){return;}
    $('a[href="'+hash+'"]').click();
});​
$(window).trigger('hashchange'); 
```

# php - 如何在不知道其长度的情况下从给定的 HTML 标记中提取特定的子字符串？

> ID：11889366
> 
> 赞同：0
> 
> 时间：2012-08-09T18:05:04.600
> 
> 标签：php, html

我想做类似的事情：

```
<?php
$text = "<font style='color: #fff'>";
$replaceandshow = str_replace("<font style=\"?\">", "the font style is ?", $text);
echo $replaceandshow;
?> 
```

例如？是颜色：#fff，但我希望 PHP 会自行跟踪它，是否可能 + 如果可能，我该怎么做？

PS：有人给了我一个代码，但它现在可以工作了，它为我显示了一个白页。

```
<?php
$colorstring = "<font style='#fff'>";
$searchcolor = preg_replace('[a-fA-F0-9]{3,6}','[font style=$1]Test[/font]',$colorstring);
echo $searchcolor; 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:18:38.603

由于您基本上需要从任何 HTML 中提取任何属性，因此您可以使用 php XML 解析来执行此操作。

```
<?php
$doc=new DOMDocument();
$doc->loadHTML("<html><body>Test<br><font style='color: #fff;'>hellow</font><a href='www.somesite.com' title='some title'>some site</a></body></html>");
$xml=simplexml_import_dom($doc); // just to make xpath more simple
$fonts=$xml->xpath('//font');
foreach ($fonts as $font) {
    echo 'font style = '.$font['style']."<br />";
}

$as=$xml->xpath('//a');
foreach ($as as $a) {
    echo 'href = '.$a['href'] . ' title = ' . $a['title']."<br />";
}
?> 
```

这将返回：

```
font style = color: #fff;
href = www.somesite.com title = some title 
```

您可以为需要提取的每个 HTML 标记使用不同的 foreach 循环，然后输出您想要的任何属性。

基于[如何使用 php 从 html 中提取 img src、title 和 alt 的答案？](https://stackoverflow.com/questions/138313/how-to-extract-img-src-title-and-alt-from-html-using-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:23:28.283

由于错误报告已关闭，您将获得白页。您的代码中的错误是缺少分隔符`preg_replace`。此外，要使用反向引用，您应该将匹配所需的表达式括在括号中。

```
preg_replace('/([a-fA-F0-9]{3,6})/','the font style is $1',$colorstring); 
```

应给出正确的输出。

您可能会考虑使用更严格的表达式，因为当前表达式对匹配其他字符串（如“FFFont”）非常开放。另一件需要注意的是，表达式可能会导致类似的输出。

```
<font style='color: the color is #fff'> 
```

尝试：

```
/<font style='color: #([a-fA-F0-9]{3,6})'>/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:17:53.587

这将适用于简单的`style`属性：

```
$text = "<font style='color: #fff'>";
preg_match("/<font style=['\"]([^'\"]+)['\"]>/", $text, $matches);
echo "The font style is ".$matches[1]; 
```

对于更复杂的事情（例如：如果它包含引号），您需要使用 HTML 解析器，例如[http://www.php.net/manual/en/class.domdocument.php](http://www.php.net/manual/en/class.domdocument.php)

# visual-studio-2010 - LNK4204 警告和 D3D 文件加载崩溃

> ID：11889371
> 
> 赞同：0
> 
> 时间：2012-08-09T18:05:24.677
> 
> 标签：visual-studio-2010

大约一个月前，我开始深入研究 Frank Luna 的“Directx11 3d 编程简介”。到目前为止，我没有遇到任何问题，并且已经完成了本书的大部分内容。最近，我不得不切换计算机并开始设置本书中的第一个演示，以确保一切都正确配置。大约一个月前，我在我的旧电脑上设置了这个演示，没有任何问题，现在我什至无法让这个基本演示在新电脑上运行。我不确定这些警告是否与崩溃有关。

警告如下：

```
 1>     Creating library C:\Users\Rizzmond\Desktop\test\Debug\test.lib and object C:\Users\Rizzmond\Desktop\test\Debug\test.exp
            1>Effects11d.lib(d3dx11dbg.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(d3dxGlobal.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(EffectAPI.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(EffectLoad.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(EffectNonRuntime.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(EffectReflection.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(EffectRuntime.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>LinkEmbedManifest:
            1>     Creating library C:\Users\Rizzmond\Desktop\test\Debug\test.lib and object C:\Users\Rizzmond\Desktop\test\Debug\test.exp
            1>Effects11d.lib(d3dx11dbg.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(d3dxGlobal.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(EffectAPI.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(EffectLoad.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(EffectNonRuntime.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(EffectReflection.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>Effects11d.lib(EffectRuntime.obj) : warning LNK4204: 'C:\Users\Rizzmond\Desktop\test\Debug\vc100.pdb' is missing debugging information for referencing module; linking object as if no debug info
            1>  test.vcxproj -> C:\Users\Rizzmond\Desktop\test\Debug\test.exe 
```

崩溃来自 D3D11CompileFromFile 在尝试加载文件时返回 D3D11_ERROR_FILE_NOT_FOUND。我已经完全按照我之前所做的那样设置了这个演示，所以我无法理解为什么它无法加载这个“color.fx”文件。您可以在此处的图片中看到相关代码和解决方案资源管理器：http: [//i.imgur.com/vVUe5.jpg](http://i.imgur.com/vVUe5.jpg)

我已经尝试清理和重建解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:10:25.133

This error occurs when debug version of a library is linked to the project, but corresponding debug database file (.pdb) is not accessible. You need to re-build Effects11d.lib from sources to generate .pdb on your new computer. Sources of the library are reported to be available: [http://www.d3dcoder.net/phpBB/viewtopic.php?f=4&t=241](http://www.d3dcoder.net/phpBB/viewtopic.php?f=4&t=241)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T17:21:45.187

我遇到了类似的问题

```
---------------------------
Unexpected error encountered
---------------------------
File: d:\3dgameprogramming\code\chapter 6 drawing in direct3d\box\boxdemo.cpp
Line: 310
Error Code: D3D11_ERROR_FILE_NOT_FOUND (0x887c0002)
Calling: D3DX11CompileFromFile
Do you want to debug the application?
--------------------------- 
```

问题是：D3DX11CompileFromFile() 找不到“fx\color.fx”，只需将“....\Code\Chapter 6 Drawing in Direct3D\Box\FX”复制到与可执行文件相同的目录即可。而且不需要重新编译。

[图片](http://i.stack.imgur.com/fhHxU.png)

# c# - 带有 Silverlight 的 WCF 服务中的 EventHandler：系列中的第三个事件永远不会被触发

> ID：11889377
> 
> 赞同：0
> 
> 时间：2012-08-09T18:05:40.683
> 
> 标签：c#, .net, wcf, silverlight, silverlight-5.0

您好，提前感谢您的帮助。我正在使用 WCF 服务处理 silverlight 应用程序。我有一个包含三个操作合同的服务合同：GetModuleObjects()、GetServerObjects() 和 GetMonitorGroupObjects()，它们分别从数据库中检索模块、服务器和服务器组。我有将三个事件添加到 Main 中的 Service Client 实例的代码。前两个事件正确触发，但由于某种原因，第三个事件中的代码永远无法到达，这是一个问题。我在 Main.xaml.cs 中的代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using SilverlightTreeviewTest.ServiceReference1;
using System.Collections.ObjectModel;

namespace SilverlightTreeviewTest
{
    public partial class MainPage : UserControl
    {
        static public ObservableCollection<ModuleObject> TableModuleObjects = new ObservableCollection<ModuleObject>();
        static public ObservableCollection<ServerObject> TableServerObjects = new ObservableCollection<ServerObject>();
        static public ObservableCollection<ServerGroupOCollection> TableMonitorGroupObjects = new ObservableCollection<ServerGroupOCollection>();

        public MainPage()
        {

            InitializeComponent();
            Service1Client MyWebService = new Service1Client();

            MyWebService.GetModuleObjectsCompleted += new EventHandler<GetModuleObjectsCompletedEventArgs>(MyWebService_GetModuleObjectsCompleted);
            MyWebService.GetModuleObjectsAsync();
        }

        void MyWebService_GetModuleObjectsCompleted(object sender, GetModuleObjectsCompletedEventArgs e)
        {
            dataGrid1.ItemsSource = e.Result;
            foreach (DataTest_ModuleObject item in e.Result)
            {
                ModuleObject module = new ModuleObject((string)item.ModuleName,(int)item.ModuleStatus,(int)item.ServerID,(int)item.ID);
                TableModuleObjects.Add(module);
            }

            Service1Client WebServiceForServers = new Service1Client();
            WebServiceForServers.GetServerObjectsCompleted += new EventHandler<GetServerObjectsCompletedEventArgs>(WebServiceForServers_GetServerObjectsCompleted);
            WebServiceForServers.GetServerObjectsAsync();
        }

        void WebServiceForServers_GetServerObjectsCompleted(object sender, GetServerObjectsCompletedEventArgs e)
        {
            //get each server entry from table and create ServerObject for each
            //find the modules from the module collection then add server to server collection
            foreach (DataTest_ServerObject item in e.Result)
            {
                ServerObject server = new ServerObject((string)item.ServerName,(int)item.ID,(int)item.Group_Id);
                server.FindModules(TableModuleObjects);
                TableServerObjects.Add(server);

            }

            //fire event to retrieve Monitor groups from db and assign servers to them
            Service1Client WebServiceForGroups = new Service1Client();
            WebServiceForGroups.GetMonitorGroupObjectsCompleted += new EventHandler<GetMonitorGroupObjectsCompletedEventArgs>(WebServiceForGroups_GetMonitorGroupObjectsCompleted);
            WebServiceForGroups.GetServerObjectsAsync();
        }

        void WebServiceForGroups_GetMonitorGroupObjectsCompleted(object sender, GetMonitorGroupObjectsCompletedEventArgs e)
        {
            //get each MonitorGroup entry from table and create MonitorGroupObject(ServerGroupOCollection) for each
            //find associated servers and then add the group to the collection of groups
            foreach (DataTest_MonitorGroupObject item in e.Result)
            {
                ServerGroupOCollection mGroup = new ServerGroupOCollection((string)item.MonitorGroup_Name, (int)item.ID, (int)item.MonitorGroup_Type);
                mGroup.FindServers(TableServerObjects);
                TableMonitorGroupObjects.Add(mGroup);
            }
        }

    }
} 
```

我不明白为什么第三个事件永远不会被触发并且它的代码永远不会到达。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:00:07.000

在 WebServiceForServers_GetServerObjectsCompleted 中，您正在为 GetMonitorGroupObjectsCompleted 注册一个 EventHandler，然后调用 GetServerObjectsAsync 方法。

当然，您的意思是调用 GetMonitorGroupObjectsAsync （或类似的）。

# asp.net-mvc - 如何扩展 MVC 4 身份验证

> ID：11889380
> 
> 赞同：0
> 
> 时间：2012-08-09T18:05:45.993
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我们使用的是 VS 2012 (C#) 附带的默认 MVC 4 模板，我们喜欢开箱即用的用户注册和身份验证。现在我们需要通过以下方式扩展此功能：

1.  允许用户更改其初始用户名和电子邮件地址（目前，他们只能更改密码）；
2.  添加与用户相关的额外字段，例如关于同一用户的显示名称、国家/地区等，以便他们在我们的网站上拥有扩展的个人资料。

我们浏览了互联网，有很多文章，但没有一篇符合我们上面的 2 点。也许是因为这是一个简单的问题。

任何指向文章、教程或帖子的链接都会有很大帮助！

# .net - 从 HTML 源获取特定信息

> ID：11889381
> 
> 赞同：0
> 
> 时间：2012-08-09T18:05:49.407
> 
> 标签：.net, html, regex, vb.net, parsing

我整天都在编程以实现我的目标。起初我尝试使用正则表达式 (Regex)，但它接缝太复杂且效率低下，尽管它确实在一定程度上实现了我的目标。

这是我正在使用的网站的链接：

```
http://thewarezscene.org/forums/memberlist.php?start=20 
```

如果您查看页面的源代码（该站点目前似乎已关闭），您会注意到这个重复出现的链接标签：

```
<a href="http://thewarezscene.org/forums/username-u14088.html">USERNAME</a> 
```

每个新页面都有一个注册到该站点的每个人的列表。以 20 递增。例如。开始=20，开始=40，开始=60。我知道如何从 HTML 页面获取所有元素，但是仅获取特定链接格式的链接文本的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:15:07.560

使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)之类的 HTML 解析器来解析 HTML。

> 什么是 Html Agility Pack (HAP)？
> 
> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

正则表达式不太适合解析 HTML，如[本答案所示](https://stackoverflow.com/a/1732454/1583)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:23:08.943

如果要获取 href 中存在参数“start”的所有元素

```
$("a[href*='start=']") 
```

# javascript - 在“a”语法上定义类

> ID：11889383
> 
> 赞同：0
> 
> 时间：2012-08-09T18:05:56.427
> 
> 标签：javascript

我在使用的这个脚本中发现了一个缺陷；它正在调用全局“a”标签——这让我很生气。

在下面的代码片段中的“a”标签中定义特定类链接的正确方法是什么？

```
var allLinks = document.getElementsByTagName('.mainnav'); 
```

显然这不起作用；要么`.mainnav a`

**完整片段：**

```
var ss = {
  fixAllLinks: function() {
    // Get a list of all links in the page
    var allLinks = document.getElementsByTagName('.mainnav');
    // Walk through the list
    for (var i=0;i<allLinks.length;i++) {
      var lnk = allLinks[i];
      if ((lnk.href && lnk.href.indexOf('#') != -1) && 
          ( (lnk.pathname == location.pathname) ||
        ('/'+lnk.pathname == location.pathname) ) && 
          (lnk.search == location.search)) {
        // If the link is internal to the page (begins in #)
        // then attach the smoothScroll function as an onclick
        // event handler
        ss.addEvent(lnk,'click',ss.smoothScroll);
      }
    }
  }, 
```

**更新：**换出不同的标签后；并尝试使用脚本停止运行的类调用。这是完整的插件；[http://www.kryogenix.org/code/browser/smoothscroll/](http://www.kryogenix.org/code/browser/smoothscroll/)我只想将它与特定的类一起使用，而不是所有的“a”标签。

建议；谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:12:09.227

`.mainnav`不是标签，所以`getElementsByTagName`不会工作。也许您正在寻找：

```
var allLinks = document.getElementsByClassName('mainnav'); 
```

[https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

或在 jQuery 中：

```
$('.mainnav'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:12:51.087

我看到你`jquery`的标签里有。你真的应该使用 jQuery，这使得这更容易做到。搜索 中的所有`a`标签`.mainnav`非常简单：`$(".mainnav a");`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:14:26.747

`document.getElementsByTagName`通过标签而不是类获取元素。正确的语法是`document.getElementsByTagName('a');`，并且会得到所有`a`的锚标签。我认为如果你想获得所有具有 class 的标签`mainnav`，那么你需要使用 jQuery：

```
 $('.mainnav'); 
```

或者

```
 var allLinks = document.getElementsByClassName('mainnav'); 
```

# android - 执行shell脚本时android程序崩溃

> ID：11889384
> 
> 赞同：0
> 
> 时间：2012-08-09T18:05:56.120
> 
> 标签：android

我创建了使用 cp adb shell 命令复制文件的备份脚本。经过几天的测试，我真的很困惑，因为有时程序崩溃了，我只是不知道为什么。我应该怎么做才能避免这个问题？

每次复制完成时，我都会刷新我的自定义 BaseAdapter。我不认为这是使用 notifyDataSetChanged() 或 meybe 后绘制视图的问题？在我的 LogCat 输出下方。

当循环在命令之后执行命令时，我得到了很多绿色（INFO/DEBUG）信息，然后我的程序崩溃了......

```
...
DEBUG/exec  cp /data/app/org.apache.android.media-1.apk /mnt/sdcard/allbackup/backup/2012-08-09_18@51@47!63/apps/org.apache.android.media.apk
DEBUG/exec  cp /data/app/com.cyrilmottier.android.listviewtipsandtricks-1.apk /mnt/sdcard/allbackup/backup/2012-08-09_18@51@47!63/apps/com.cyrilmottier.android.listviewtipsandtricks.apk
DEBUG/exec  cp /data/app/org.alexis.littre-1.apk /mnt/sdcard/allbackup/backup/2012-08-09_18@51@47!63/apps/org.alexis.littre.apk
DEBUG/exec  cp /data/app/jp.susatthi.ManifestViewer-1.apk /mnt/sdcard/allbackup/backup/2012-08-09_18@51@47!63/apps/jp.susatthi.ManifestViewer.apk
DEBUG/exec  cp /data/app/com.mxtech.videoplayer.ad-1.apk /mnt/sdcard/allbackup/backup/2012-08-09_18@51@47!63/apps/com.mxtech.videoplayer.ad.apk
DEBUG/exec  cp /data/app/com.rerware.android.MyBackupRoot-1.apk /mnt/sdcard/allbackup/backup/2012-08-09_18@51@47!63/apps/com.rerware.android.MyBackupRoot.apk
INFO/DEBUG  *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
INFO/DEBUG  Build fingerprint: 'samsung/GT-I9000/GT-I9000/GT-I9000:2.2/FROYO/XWJPH:user/release-keys'
INFO/DEBUG  pid: 8761, tid: 8761  >>> pl.backup <<<
INFO/DEBUG  signal 11 (SIGSEGV), fault addr 00001fd8
INFO/DEBUG   r0 00000035  r1 482347e0  r2 003fbf80  r3 4003fbf8
INFO/DEBUG   r4 007f7f00  r5 00001fa0  r6 bef5a240  r7 00001f84
INFO/DEBUG   r8 00000000  r9 000001fb  10 4003fbf8  fp 4818e7b8
INFO/DEBUG   ip 4b58caa7  sp bef5a1f8  lr 4b58ccdb  pc 4b58c690  cpsr 28000030
INFO/DEBUG   d0  6472656767756265  d1  0000005a41400000
INFO/DEBUG   d2  0000003c00000003  d3  0044abb800000001
INFO/DEBUG   d4  0000000000000000  d5  0000000000000000
INFO/DEBUG   d6  0000000100000001  d7  408000003f800000
INFO/DEBUG   d8  4194000041900000  d9  3ff0000000000012
INFO/DEBUG   d10 3ff0000000000000  d11 0000000000000000
INFO/DEBUG   d12 0000000000000000  d13 0000000000000000
INFO/DEBUG   d14 0000000000000000  d15 0000000000000000
INFO/DEBUG   d16 0000000700000000  d17 c053000000000000
INFO/DEBUG   d18 0000000000000000  d19 0000000000000000
INFO/DEBUG   d20 3ff0000000000000  d21 8000000000000000
INFO/DEBUG   d22 0000000000000000  d23 0006000300070002
INFO/DEBUG   d24 0101010101010101  d25 0000000000000000
INFO/DEBUG   d26 0016001600170016  d27 0016001600170016
INFO/DEBUG   d28 002f002e002f002e  d29 3ff0000000000000
INFO/DEBUG   d30 0000000000000000  d31 3ff0000000000000
INFO/DEBUG   scr 60000012
DEBUG/exec  cp /data/app/com.androidemu.n64-1.apk /mnt/sdcard/allbackup/backup/2012-08-09_18@51@47!63/apps/com.androidemu.n64.apk
DEBUG/exec  cp /data/app/com.androidemu.nes-1.apk /mnt/sdcard/allbackup/backup/2012-08-09_18@51@47!63/apps/com.androidemu.nes.apk
INFO/DEBUG           #00  pc 4b58c690  /dev/ashmem/dalvik-jit-code-cache (deleted)
INFO/DEBUG           #01  lr 4b58ccdb  /dev/ashmem/dalvik-jit-code-cache (deleted)
INFO/DEBUG  code around pc:
INFO/DEBUG  4b58c670 01000100 00280000 4321c584 01020018 
INFO/DEBUG  4b58c680 43dcdd1a 49190054 f2a568b0 2800071c 
INFO/DEBUG  4b58c690 63e963a8 c703d010 a1094c13 f7aea20a 
INFO/DEBUG  4b58c6a0 e011ed78 f8d7e008 290000ec 6ef7dc01 
INFO/DEBUG  4b58c6b0 a10347b8 ecf2f7ae 6df1480b 1c2d4788 
INFO/DEBUG  code around lr:
INFO/DEBUG  4b58ccb8 1c0800cc 1c116029 071cf2a5 606a2800 
INFO/DEBUG  4b58ccc8 c703d010 a1094c13 f7aea20a e011ea5e 
INFO/DEBUG  4b58ccd8 f8d7e008 29000698 6ef7dc01 a10347b8 
INFO/DEBUG  4b58cce8 e9d8f7ae 6df1480b 1c2d4788 4300e047 
INFO/DEBUG  4b58ccf8 43cecc74 0000e7fe 00000000 00000000 
INFO/DEBUG  stack:
INFO/DEBUG      bef5a1b8  40020e00  /dev/ashmem/mspace/dalvik-heap/zygote/0 (deleted)
INFO/DEBUG      bef5a1bc  80945327  /system/lib/libdvm.so
INFO/DEBUG      bef5a1c0  430cb368  
INFO/DEBUG      bef5a1c4  440990a5  /system/framework/framework.odex
INFO/DEBUG      bef5a1c8  00000000  
INFO/DEBUG      bef5a1cc  8094d7c7  /system/lib/libdvm.so
INFO/DEBUG      bef5a1d0  809a23f4  /system/lib/libdvm.so
INFO/DEBUG      bef5a1d4  00000001  
INFO/DEBUG      bef5a1d8  00000001  
INFO/DEBUG      bef5a1dc  00000008  
INFO/DEBUG      bef5a1e0  430cb304  
INFO/DEBUG      bef5a1e4  43d3e79a  /system/framework/framework.odex
INFO/DEBUG      bef5a1e8  43cece82  /system/framework/framework.odex
INFO/DEBUG      bef5a1ec  80973339  /system/lib/libdvm.so
INFO/DEBUG      bef5a1f0  df002777  
INFO/DEBUG      bef5a1f4  e3a070ad  
INFO/DEBUG  #00 bef5a1f8  438bc000  /system/framework/core.odex
INFO/DEBUG      bef5a1fc  bef5a240  [stack]
INFO/DEBUG      bef5a200  0028cb90  [heap]
INFO/DEBUG      bef5a204  0000cd38  [heap]
INFO/DEBUG      bef5a208  000361b0  [heap]
INFO/DEBUG      bef5a20c  000003a0  
INFO/DEBUG      bef5a210  809a22e0  /system/lib/libdvm.so
INFO/DEBUG      bef5a214  809a6ee0  /system/lib/libdvm.so
INFO/DEBUG      bef5a218  bef5a4e8  [stack]
INFO/DEBUG      bef5a21c  80922798  /system/lib/libdvm.so
INFO/DEBUG      bef5a220  0000cd30  [heap]
INFO/DEBUG      bef5a224  bef5a240  [stack]
INFO/DEBUG      bef5a228  8092271c  /system/lib/libdvm.so
INFO/DEBUG      bef5a22c  00000000  
INFO/DEBUG      bef5a230  000003a0  
INFO/DEBUG      bef5a234  80921638  /system/lib/libdvm.so
INFO/DEBUG      bef5a238  bef5a3ac  [stack]
INFO/DEBUG      bef5a23c  bef5a3ac  [stack]
DEBUG/exec  cp /data/app/com.opera.browser-1.apk /mnt/sdcard/allbackup/backup/2012-08-09_18@51@47!63/apps/com.opera.browser.apk
INFO/DEBUG  dumpmesg > /data/log/dumpstate_app_native.log
INFO/BootReceiver   Copying /data/tombstones/tombstone_00 to DropBox (SYSTEM_TOMBSTONE)
INFO/dumpstate  begin
DEBUG/dalvikvm  GC_FOR_MALLOC freed 15878 objects / 1113800 bytes in 802ms
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
INFO/dalvikvm   threadid=3: reacting to signal 3
ERROR/dalvikvm  Failed to write stack traces to /data/anr/traces.txt (379 of 2308
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   threadid=3: reacting to signal 3
ERROR/dalvikvm  Failed to write stack traces to /data/anr/traces.txt (1785 of 2784
ERROR/dalvikvm  Failed to write stack traces to /data/anr/traces.txt (-1 of 3335
ERROR/dalvikvm  Failed to write stack traces to /data/anr/traces.txt (-1 of 2316
ERROR/dalvikvm  Failed to write stack traces to /data/anr/traces.txt (-1 of 2337
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
ERROR/dalvikvm  Failed to write stack traces to /data/anr/traces.txt (1870 of 4332
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
INFO/dalvikvm   Wrote stack traces to '/data/anr/traces.txt'
DEBUG/SntpClient    request time failed: java.net.UnknownHostException: north-america.pool.ntp.org
DEBUG/SntpClient    request time failed: java.net.UnknownHostException: north-america.pool.ntp.org
DEBUG/SntpClient    request time failed: java.net.UnknownHostException: north-america.pool.ntp.org
DEBUG/VoldCmdListener   asec list
INFO/dumpstate  done
DEBUG/Zygote    Process 8761 terminated by signal (11) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:04:54.420

请看一下这种感觉：

工作正常：

```
while(true) {   
    long czas = android.os.SystemClock.uptimeMillis();
    Storage.executeCmd("cp /data/app/com.rerware.android.MyBackupRoot-1.apk /mnt/sdcard/allbackup/backup/aplikacja"+String.valueOf(czas)+".apk", null);
} 
```

工作正常：

```
while(true) {   
    Message msg = new Message(); // customadapter.notifydatachanged() in main activity
    msg.arg1 = 1;
    mHandler.sendMessage(msg);
} 
```

2 分钟后崩溃（睡眠 = 100）

```
while(true) {   
    long czas = android.os.SystemClock.uptimeMillis();           
    Storage.executeCmd("cp /data/app/com.rerware.android.MyBackupRoot-1.apk /mnt/sdcard/allbackup/backup/aplikacja"+String.valueOf(czas)+".apk", null);
    sleep(100);

    Message msg = new Message(); // customadapter.notifydatachanged in main activity
    msg.arg1 = 1;
    mHandler.sendMessage(msg);
    Log.d("ods test", "ods test");                  
    sleep(100); 
} 
```

25 分钟后崩溃（睡眠 = 200）

```
while(true) {   
    long czas = android.os.SystemClock.uptimeMillis();           
    Storage.executeCmd("cp /data/app/com.rerware.android.MyBackupRoot-1.apk /mnt/sdcard/allbackup/backup/aplikacja"+String.valueOf(czas)+".apk", null);
    sleep(200);

    Message msg = new Message(); // customadapter.notifydatachanged in main activity
    msg.arg1 = 1;
    mHandler.sendMessage(msg);
    Log.d("ods test", "ods test");               
    sleep(200);
} 
```

一个问题 WHAAAAAAAAAT？必须有进程冲突......因为 cp 命令在 ps 列表中创建新进程

PS：1000 毫秒延迟似乎工作正常（测试 2 小时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:16:43.987

This is due to an invalid memory reference. I would suggest it has to do with some native libraries. That is the meaning of the signal 11\. Most likely not in java code I think. More likely an included jni library I would guess.

See also [SIGNAL 11 SIGSEGV crash Android](https://stackoverflow.com/questions/4973310/signal-11-sigsegv-crash-android)

You might need to clear the cache. Reaching Cache limit is another possibility.

To find out more you can use ndk-stack to print out the crash dump of you app. Read the docs\NDK-STACK.html in your ndk directory for full step about using it.

Might also be firmware: see [Android Java App Crashing with SIGSEGV](https://stackoverflow.com/questions/7724704/android-java-app-crashing-with-sigsegv)

# haskell - haskell 安全复制示例

> ID：11889387
> 
> 赞同：4
> 
> 时间：2012-08-09T18:06:05.743
> 
> 标签：haskell

（源[http://hackage.haskell.org/packages/archive/safecopy/0.6.1/doc/html/Data-SafeCopy.html](http://hackage.haskell.org/packages/archive/safecopy/0.6.1/doc/html/Data-SafeCopy.html)）

如果将联系人数据类型重命名为数据 Contacts_v0

```
type Name     = String
type Address  = String
data Contacts = Contacts [(Name, Address)]
instance SafeCopy Contacts where
     putCopy (Contacts list) = contain $ safePut list
     getCopy = contain $ Contacts <$> safeGet 
```

假设如何将 Contacts_v0 分配给旧的现有数据？

```
type Name = String
type Address = String
type Phone = String

data Contacts_v0 = Contacts_v0 [(Name, Address)]
instance SafeCopy Contacts_v0 where
     putCopy (Contacts_v0 list) = contain $ safePut list
     getCopy = contain $ Contacts_v0 <$> safeGet

data Contact = Contact { name    :: Name
                        , address :: Address
                        , phone   :: Phone }
instance SafeCopy Contact where
    putCopy Contact{..} = contain $ do safePut name; safePut address; safePut phone
    getCopy = contain $ Contact <$> safeGet <*> safeGet <*> safeGet

data Contacts = Contacts [Contact]
instance SafeCopy Contacts where
     version = 2
     kind = extension
     putCopy (Contacts contacts) = contain $ safePut contacts
     getCopy = contain $ Contacts <$> safeGet

instance Migrate Contacts where
     type MigrateFrom Contacts = Contacts_v0
     migrate (Contacts_v0 contacts) = Contacts [ Contact{ name    = name
                                                        , address = address
                                                        , phone   = "" }
                                               | (name, address) <- contacts ] 
```

从上面的库文档中，我正在尝试这样做。

```
{-# LANGUAGE RecordWildCards, TypeFamilies #-}
import Control.Applicative
import Data.SafeCopy

type Name = String
type Address = String
type Phone = String

data Contacts = Contacts [(Name, Address)] deriving (Show)
instance SafeCopy Contacts where
     putCopy (Contacts list) = contain $ safePut list
     getCopy = contain $ Contacts <$> safeGet

data Contacts_v0 = Contacts_v0 [(Name, Address)] deriving (Show)
instance SafeCopy Contacts_v0 where
     putCopy (Contacts_v0 list) = contain $ safePut list
     getCopy = contain $ Contacts_v0 <$> safeGet

data Contact = Contact { name :: Name, address :: Address, phone :: Phone } deriving (Show)
instance SafeCopy Contact where
    putCopy Contact{..} = contain $ do safePut name; safePut address; safePut phone
    getCopy = contain $ Contact <$> safeGet <*> safeGet <*> safeGet

{-
data Contacts = Contacts [Contact]
instance SafeCopy Contacts where
     version = 2
     kind = extension
     putCopy (Contacts contacts) = contain $ safePut contacts
     getCopy = contain $ Contacts <$> safeGet

instance Migrate Contacts where
     type MigrateFrom Contacts = Contacts_v0
     migrate (Contacts_v0 contacts) = Contacts [ Contact{ name    = name, address = address, phone   = "" }
                                               | (name, address) <- contacts ]
-}

main :: IO ()
main = do
    let test = Contacts [("gert","home")]
    print test
    --let testNew = how do you migrate test using migrate?
    --print testNew 
```

请注意，如果他们将新的重命名为 Contacts_v2 而不是重命名旧的，对我来说会更有意义。

也许我应该改写这个问题，safecopy 什么时候有用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T12:39:57.753

```
{-# LANGUAGE RecordWildCards, TypeFamilies#-}
import Control.Applicative
import Data.SafeCopy
import Data.Binary
import Data.Serialize.Get
import Data.Serialize.Put

type Name = String
type Address = String
type Phone = String

data Contact = Contact { name :: Name, address :: Address, phone :: Phone } deriving (Show)
instance Binary Contact where
    put Contact{..} = do put name; put address; put phone
    get = do name <- get; address <- get; phone <- get; return Contact{..}
instance SafeCopy Contact where
    putCopy Contact{..} = contain $ do safePut name; safePut address; safePut phone
    getCopy = contain $ Contact <$> safeGet <*> safeGet <*> safeGet

data Contacts = Contacts [Contact] deriving (Show)
instance Binary Contacts where
    put (Contacts set) = put set
    get = fmap Contacts get
instance SafeCopy Contacts where
     version = 2
     kind = extension
     putCopy (Contacts contacts) = contain $ safePut contacts
     getCopy = contain $ Contacts <$> safeGet
instance Migrate Contacts where
     type MigrateFrom Contacts = Contacts_v0
     migrate (Contacts_v0 contacts) = Contacts[Contact{name=name,address=address,phone=""}|(name,address)<-contacts]

data Contacts_v0 = Contacts_v0 [(Name, Address)] deriving (Show)
instance Binary Contacts_v0 where
    put (Contacts_v0 set) = put set
    get = fmap Contacts_v0 get
instance SafeCopy Contacts_v0 where
    putCopy (Contacts_v0 list) = contain $ safePut list
    getCopy = contain $ Contacts_v0 <$> safeGet

main :: IO ()
main = do
    -- 
    -- instance Binary 
    --
    let c' = Contacts[Contact{name="gert",address="home",phone="test"},Contact{name="gert2",address="home2",phone="test2"}]
    let e' = encode c'
    print e'
    let d' = decode e'
    print (d':: Contacts)

    let c = Contacts_v0 [("gert_v0","home_v0"),("gert2_v0","home2_v0")]
    let e = encode c
    print e
    let d = decode e
    print (d:: Contacts_v0)
    --can not do print (d:: Contacts) meaning you are screwed

    --
    -- instance SafeCopy
    --
    let c'' = Contacts_v0 [("gert_v0","home_v0"),("gert2_v0","home2_v0")]
    let e'' = runPut (safePut c'')
    print e''
    let d'' = runGet safeGet e''
    case d'' of
        Left _ -> print "error"
        Right d'' -> print (d'':: Contacts)
    --can do print (d:: Contacts) or print (d:: Contacts_v0) meaning you are safed 
```

# javascript - 如何在wordpress中设置此代码

> ID：11889388
> 
> 赞同：0
> 
> 时间：2012-08-09T18:06:07.673
> 
> 标签：javascript, jquery-ui, jquery, css

我在 wordpress 中使用此代码来显示 jquery，但它没有显示。

```
if (typeof jQuery == 'undefined'){
    document.write(unescape("%3Cscript src="<?php bloginfo('template_directory'); ?>/js/jquery.js" type='text/javascript'%3E%3C/script%3E"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:08:05.820

尝试这个：

```
if (typeof jQuery == 'undefined'){
    document.write(unescape("%3Cscript src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type='text/javascript'%3E%3C/script%3E"));
} 
```

# iis-7 - 无法在网页上显示有意义的错误消息

> ID：11889390
> 
> 赞同：0
> 
> 时间：2012-08-09T18:06:09.807
> 
> 标签：iis-7, asp-classic, web-config

```
<system.web>
    <compilation debug ="true" targetFramework="2.0"/>
    <customErrors mode="Off"/>
</system.web> 
```

我正在尝试获取某种类型的有意义的错误消息，而不是一些通用的 HTTP 500 错误消息。通常，当我在其他应用程序上将 customErrors 设置为关闭时，与给我带来麻烦的此网页无关，它通常会在我的其他应用程序上产生有意义的错误消息。

这个页面也是用经典的asp创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:14:33.587

经典 ASP 不使用 web.config AFAIK（无论如何我一直使用 IIS）。

在 IIS7 中，选择您的站点，双击“ASP”模块，展开“调试属性”，然后将“向浏览器发送错误”设置为 True。

# mysql - GROUP_CONCAT() 和 CONCAT_WS() 的区别？

> ID：11889391
> 
> 赞同：27
> 
> 时间：2012-08-09T18:06:16.330
> 
> 标签：mysql

`GROUP_CONCAT()`我一直在寻找关于和之间区别的令人满意的解释，但没有成功`CONCAT_WS()`。

它们是否像我认为的那样密切相关？

这两个功能在使用、速度等方面有什么区别？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-09T18:18:10.627

`GROUP_CONCAT`当您希望在单行中具有来自不同列行的非 NULL 值时使用。为此，您需要 GROUP BY 才能工作。

`CONCAT_WS`是连接两个或多个字符串。

例子，

`GROUP_CONCAT(CONCAT_WS(' ', firstname, lastname) ORDER BY id ASC SEPARATOR ',');`

输出类似的东西，

`John Doe,Blah Blah,Tom Cruise,Lorem Ipsum`

这里名称之间的空格是因为`CONCAT_WS`，而一行中的整个结果是因为`GROUP_CONCAT`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-02-24T17:53:00.663

图片区别：

[http://www.w3resource.com/mysql/string-functions/mysql-concat_ws-function.php](http://www.w3resource.com/mysql/string-functions/mysql-concat_ws-function.php) [![在此处输入图像描述](../Images/9a90ecd143ef39e9ba40905904e05227.png)](https://i.stack.imgur.com/MNnWg.png)

**下面**是 GROUP_CONCAT****

 **[http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php](http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php) [![在此处输入图像描述](../Images/6e81dfbbff0b2cca67aa3d60a492d07e.png)](https://i.stack.imgur.com/1pf2Q.gif)**

# c++ - C++：类内的直接访问器或访问函数？

> ID：11889393
> 
> 赞同：2
> 
> 时间：2012-08-09T18:06:26.857
> 
> 标签：c++, class, accessor

我有一个名为“顶点”的类的两个版本，一个使用直接访问器获取坐标：

```
struct vertex
{
    // Coordinates
    std::array<double, 3> coords;

    // Direct accessors
    double & x;
    double & y;
    double & z;

    // Constructor
    template<typename... T> vertex(T &&... coordinates) :
        coords{{ std::forward<T>(coordinates)... }},
        x( coords[0] ), y( coords[1] ), z( coords[2] )
    { }
}; 
```

和其他使用访问功能的：

```
struct vertex
{
    // Coordinates
    std::array<double, 3> coords;

    // Access functions
    double & x() { return coords[0]; }
    double & y() { return coords[1]; }
    double & z() { return coords[2]; }

    // Constructor
    template<typename... T> vertex(T &&... coordinates) :
        coords{{ std::forward<T>(coordinates)... }}
    { }
}; 
```

对于这种特定情况，哪种方法更好？我将不胜感激任何其他建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:12:10.637

我认为吸气剂更好。第一种方法创建更大尺寸的对象而没有真正的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:14:17.313

出于封装目的，我通常会遍历函数。

但这是一个非常特殊的情况，因为您正在处理顶点。如果您计划操作大量这些对象（渲染或变形网格），那么直接访问在性能方面有一些好处。

一些图形库在需要效率的实时环境中使用直接访问（一些书籍也建议）进行类似矢量的操作。

以[Ogre::Vector3](http://www.ogre3d.org/docs/api/html/OgreVector3_8h_source.html)为例。

尽管如此，我不会在你的第一个解决方案中做你正在做的事情。就像其他人说的那样，您无缘无故地将已用空间加倍（最终有很多顶点）。从我的角度来看，在高性能的背景下，这可能是最好的顶点：

```
class Vertex
{
public:
   double X;
   double Y;
   double Z;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:10:13.230

我会使用该功能-它使您将来可以更轻松地改变主意。此外，您不能这样做：

```
double & x() { return coords[0]; }
double & y() { return coords[1]; }
double & z() { return coords[2]; }

double x() const { return coords[0]; }
double y() const { return coords[1]; }
double z() const { return coords[2]; } 
```

与访问者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T18:14:49.513

好吧，我会说第一个更好，原因如下：

*   您不太可能在顶点坐标上执行额外的处理 mid-get 或 mid-set。
*   由于对顶点的操作通常在循环中完成，并且顶点通常与渲染有关，因此第一个选项（直接访问）可能会为您提供更好的性能。
*   如果您要使用微不足道的 getter 和 setter 直接访问成员，那么封装不是必须的。这只是教条的面向对象。

话虽如此，第二种方法也有优势，例如不变的界面更能适应变化。我还是坚持第一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T18:10:58.543

如果您真的想要对成员的直接写访问权（在这种情况下您似乎这样做并且*可能*是合适的），那么我建议您使用内联函数。如果您希望这样做，这使您可以灵活地分析并将额外的功能注入到未来的访问中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T18:11:45.410

我认为最好的解决方案是删除第二个选项的引用并添加设置器。但如果这些是唯一的选择，那么第二个会稍微好一些。

# javascript - Acrobat 表单和 javascript 计算

> ID：11889396
> 
> 赞同：0
> 
> 时间：2012-08-09T18:06:32.683
> 
> 标签：javascript, adobe, acrobat

在一个表单中，标签下有**4 个单选按钮**`Q3`。我也有一个标记为`lictype`每个单选按钮的文本字段`Button Radio Choice Value`

*   收音机1 =`Pre`
*   收音机2 =`Pro`
*   收音机3 =`Ult`
*   收音机4 =`Uns`

选中单选按钮时。我希望该按钮的值显示在`lictype`文本字段中。

这是我在计算中尝试的 JS。

```
var q3 = this.getField("value")

if (q3.value == "Pre”){
{
lictype.value = “Pre";
}
elseif (q3.value == "Pro”)
{
lictype.value = “Pro";
}
elseif (q3.value == "Ult”)
{
lictype.value = “Ult";
}
else (q3.value == "Uns”)
{
lictype.value = “Uns";
} 
```

![视觉描述](../Images/df048c243195a9b450172be8d23b3b86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:52:01.943

如果有人感兴趣：我可以通过使用`JS`在 ACROBAT 属性菜单中的元素上执行显示/隐藏来完成此操作。

1.  为每个单选按钮设置不同的文本字段
2.  将每个单选按钮的属性设置为`SHOW`，然后`HIDE`设置相应的文本字段。

在文本字段中：将它们全部堆叠在所需位置，并`default value`在属性面板中将每个设置为其各自的值名称。

问题解决了！

# delphi - 如何在 FOR ... TO ... DO 中等待 TWebBrowser 加载？

> ID：11889398
> 
> 赞同：1
> 
> 时间：2012-08-09T18:06:46.613
> 
> 标签：delphi

我有这个代码：

```
 for i:=0 to Memo1.Lines.Count-1 do
       begin
           while WebBrowser1.Busy do Application.ProcessMessages;
           WebBrowser1.OleObject.Document.Links.item(cat[i]).click;
           subcatList;
       end; 
```

但是 WebBrowser1 运行了几次，尽管程序的期望值。如何不在后台启动 WebBrowser1 或解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:09:57.827

需要实现TWebBrowser、BeforeNavigate2、DocumentComplete和NavigateComplete2这3个事件

```
 TForm1 = class(TForm)
    private
      CurDispatch: IDispatch; 
      FDocLoaded: Boolean;    
    ....

    procedure TForm1.WebBrowser1BeforeNavigate2(ASender: TObject; const pDisp: IDispatch;
      const URL, Flags, TargetFrameName, PostData, Headers: OleVariant;
      var Cancel: WordBool);
    begin
      CurDispatch := nil;
      FDocLoaded := False;
    end;

    procedure TForm1.WebBrowser1DocumentComplete(ASender: TObject; const pDisp: IDispatch;
      const URL: OleVariant);
    begin
      if (pDisp = CurDispatch) then  
      begin
        FDocLoaded := True;
        CurDispatch := nil;
      end;
    end;

    procedure TForm1.WebBrowser1NavigateComplete2(ASender: TObject; const pDisp: IDispatch;
      const URL: OleVariant);
    begin
      if CurDispatch = nil then
        CurDispatch := pDisp;
    end; 
```

现在您可以使用 FDocLoaded 变量来了解页面是否已加载到 WebBrowser

```
 WebBrowser1.Navigate('www.stackoverflow.com');
    repeat Application.ProcessMessage until FDocLoaded; 
```

问候

# javascript - 在选定的单选按钮旁边显示一个文本框

> ID：11889400
> 
> 赞同：1
> 
> 时间：2012-08-09T18:06:54.193
> 
> 标签：javascript, jquery, html, css

我有 1 个单选按钮组和 2 个单选按钮选项。如果选中单选按钮，我想在它旁边显示一个文本字段。

这是我的[小提琴](http://jsfiddle.net/TbPhs/)

我尝试使用 jQuery 和 .css 函数，但它不起作用。我希望人们能够在他们选择的单选按钮旁边的文本字段中输入他们的网站 URL。如果我选择第一个，它旁边会出现一个文本框。如果我切换到另一个，文本框将消失并出现在第二个单选按钮旁边。

任何帮助，将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T18:10:46.903

您可以使用`display`属性代替`visibility`：

```
input[type=text] {
  display: none
} 
```

```
$('input[type=radio]').change(function() {
   $('input[type=text]').hide()
   $(this).parent().next().show()
}); 
```

[演示](http://jsfiddle.net/TbPhs/9/)

1.  [`show()`](http://api.jquery.com/show/)
2.  [`hide()`](http://api.jquery.com/hide/)
3.  [`next()`](http://api.jquery.com/next/)
4.  [`parent()`](http://api.jquery.com/parent/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:17:07.387

这将起作用：

```
//hide both by default
$('#siteCourtier').hide();
$('#siteAgence').hide();

$('#courtierRadio').change(function() {
   if($('#courtierRadio').is(':checked'))
   {
       $('#siteCourtier').show();
       $('#siteAgence').hide();
   }
});

$('#agenceRadio').change(function() {
   if($('#agenceRadio').is(':checked'))
   {
       $('#siteAgence').show();
       $('#siteCourtier').hide();
   }
}); 
```

# java - 带连接池的 PreparedStatement 池

> ID：11889401
> 
> 赞同：2
> 
> 时间：2012-08-09T18:06:56.227
> 
> 标签：java, tomcat, jdbc-pool

> **可能重复：**
> [dbcp 中的准备好的语句池](https://stackoverflow.com/questions/281744/prepared-statement-pooling-in-dbcp)

我正在构建一个使用 Tomcat 的数据库连接池机制供其内部使用的 Web 应用程序。我也在尝试汇集准备好的语句，以便应用程序更有效地检索数据。

据我了解，当连接、结果集和语句关闭时，连接将返回到池中。如果设置了适当的标志，放弃的连接也会关闭并返回到池中。关闭连接意味着释放所有数据库游标和缓存语句，包括准备好的语句。那么准备好的语句池有什么意义呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T19:10:12.803

一个通用的答案:)

连接对象并没有真正关闭，而是仅在您调用 close() 时返回到池中，并且准备好的语句池在每个连接的基础上工作，并且只要连接对象保持活动状态，它们就会被缓存。

# cocoa-touch - 根据属性更改视图的初始化

> ID：11889402
> 
> 赞同：0
> 
> 时间：2012-08-09T18:07:00.717
> 
> 标签：cocoa-touch, uiview

我正在尝试构建一种方法来使用不同的组件动态初始化视图。因此，我需要在初始化时即时执行此操作。我正在考虑使用具有默认值的结构，如果在任何给定时间`BOOL`启用更改的属性，我可以重新加载输入视图。

因此，我可以遍历`BOOL`属性并检查是否发生了变化。有没有更好的方法来做到这一点，或者这听起来对吗？

架构：

UIView -> 按钮 1 到 10 等距放置。根据用户的喜好，可以打开/关闭按钮，但默认情况下它们都是打开的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:16:12.270

You can use key value coding observer to identify when a value has changed. This could be your trigger to do the necessary update. Polling a boolean value for changes is an unnecessary step and might cause your app to become unresponsive. Also, evaluate if the action that causes the necessity to update/change the view is an action, then you can just implement the changes inside the proper action. For more information, check the Key-Value Observing Programming Guide : [http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)

# c# - 我们可以将 objectdatasource 控件分配给数据集吗？

> ID：11889412
> 
> 赞同：2
> 
> 时间：2012-08-09T18:07:41.837
> 
> 标签：c#, dataset, datasource

我有两个问题：

1.  我们可以将 objectdatasource 控件分配给数据集吗？
2.  我们可以使用对象数据源控件将两个或多个表返回到 gridview 或 detailsview。

我的主要关注点是我必须将对象数据源存储在数据集中，否则我的应用程序将需要进行大量更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:06:18.217

“ObjectDataSource”没有数据。他只是简单的返回一个方法的结果，这个方法应该返回一个IEnumerable。IEnumerable 可以是 POCO、String、Int32 等。

> 如何将对象数据源控件数据存储到数据集中

如果您返回“System.Data.DataTable”，然后，**是**的，在这种情况下，您可以将其存储在“System.Data.DataSet”中。但对我来说，意义不大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:13:11.647

1 是的，您可以将 objectdatasource 分配给 DataSet

```
private DataSet GetDataSet(ObjectDataSource ods)
{
var ds = new DataSet();
var dv = (DataView)ods.Select();
if (dv != null && dv.Count > 0)
{
var dt = dv.ToTable();
ds.Tables.Add(dt);
}
return ds;
} 
```

2 是的，您可以返回很多表，但是当您绑定时，您需要指定索引表。

```
GridView1.DataSource = YourDataSet.Tables[0];
GridView2.DataSource = YourDataSet.Tables[2]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T18:15:52.400

```
private void Form5_Load(object sender, EventArgs e)
{
    // Creating and configuring the ObjectDataSource component:
    var objectDataSource = new Telerik.Reporting.ObjectDataSource();
    objectDataSource.DataSource = GetAllData(); // GetData returns a DataSet with three tables
    objectDataSource.DataMember = "Product"; /// Indicating the exact table to bind to. If the DataMember is not specified the first data table will be used.
    objectDataSource.CalculatedFields.Add(new Telerik.Reporting.CalculatedField("FullName", typeof(string), "=Fields.Name + ' ' + Fields.ProductNumber")); // Adding a sample calculated field.

    // Creating a new report
    Telerik.Reporting.Report report = new Telerik.Reporting.Report();

    // Assigning the ObjectDataSource component to the DataSource property of the report.
    report.DataSource = objectDataSource;

    // Use the InstanceReportSource to pass the report to the viewer for displaying
    Telerik.Reporting.InstanceReportSource reportSource = new Telerik.Reporting.InstanceReportSource();
    reportSource.ReportDocument = report;

    // Assigning the report to the report viewer.
    reportViewer1.ReportSource = reportSource;

    // Calling the RefreshReport method (only in WinForms applications).
    reportViewer1.RefreshReport();
}

static DataSet GetAllData()
{
    const string connectionString =
        "Data Source=(local)\\SQLEXPRESS;Initial Catalog=AdventureWorks;Integrated Security=True";

    string selectCommandText = "SELECT Name, ProductCategoryID FROM Production.ProductCategory;" +
        "SELECT Name, ProductCategoryID FROM Production.ProductSubcategory;" +
        "SELECT Name, ProductNumber FROM Production.Product;";

    SqlDataAdapter adapter = new SqlDataAdapter(selectCommandText, connectionString);
    DataSet dataSet = new DataSet();

    // The data set will be filled with three tables: ProductCategory, ProductSubcategory 
    // and Product as the select command contains three SELECT statements.
    adapter.Fill(dataSet);

    // Giving meaningful names for the tables so that we can use them later.
    dataSet.Tables[0].TableName = "ProductCategory";
    dataSet.Tables[1].TableName = "ProductSubcategory";
    dataSet.Tables[2].TableName = "Product";
    return dataSet;
} 
```

# ruby-on-rails - Gemfile 中未使用的 gem 会占用 Rails 中的内存吗？

> ID：11889413
> 
> 赞同：4
> 
> 时间：2012-08-09T18:07:42.697
> 
> 标签：ruby-on-rails, gem, bundle

这可能是一个愚蠢的问题：

如果我在 Gemfile（和捆绑安装）中添加 gem 并且不在 rails 应用程序中使用它，它会影响消耗的内存大小吗？通常我使用我的应用程序模板，其中包含我可能使用的所有宝石。我担心它可能会不必要地消耗内存。

谢谢。

山姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T18:12:31.443

所有 gem 都在 rails 启动时加载。您必须添加`require: false`不要在启动时加载宝石并手动要求它。如果您的 Gemfile 中有许多未使用的 gem，您的启动时间会变慢。

# c# - XSL 模板变量不打印

> ID：11889414
> 
> 赞同：1
> 
> 时间：2012-08-09T18:07:49.063
> 
> 标签：c#, xslt, .net-4.0

我不太了解 XSL 模板，因为我在两个小时前才第一次看到一个。

我有以下模板：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:FormData="ext:FormVal" 
     xmlns:FormUrl="ext:UrlFinder"                    
     >
  <xsl:param name="note"/>
  <xsl:param name="title"/>

  <xsl:template match="/">
    <html>
      <head>
        <title>EW Email Notification- File Note insertion Failed</title>
      </head>
      <body>
        <p>
          Failed to insert File note for form with refrence - <xsl:value-of select="FormData:get_RefFormId()" /> <br/>
          <a>
            <xsl:attribute name="href">
              <xsl:value-of select="FormUrl:get_RootUrl()"></xsl:value-of>FormAction/ViewForm?formId=<xsl:value-of select="FormData:get_FormId()"></xsl:value-of>
            </xsl:attribute>Click here </a> to open the form.
        </p>
        <p>
          Please insert this file note manually.
        </p>
        <p>
          <h3>
            Title:
          </h3>
          <out>          <xsl:value-of select="$title"></xsl:value-of>
          </out>

        </p>
        <p>
          <h3>
            Note:
          </h3>
         <xsl:value-of select="$note"></xsl:value-of>
        </p>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

大部分都是别人写的。我添加了`note`and`title`参数。但是，由于某种原因，它们没有出现在打印输出中。

但是，`FormData:get_FormId()`有效。

我正在传递这样的变量：

```
dictionary["note"] = note;
dictionary["title"] =title;
dictionary["ext:FormVal"] = formVal;
dictionary["ext:UrlFinder"] = urlFinder;
var objxslt = new XslCompiledTransform();

objxslt.Load(Helper.GetEmbeddedXmlResource(templateAssembly, templateName));

var xmldoc = new XmlDocument();
xmldoc.AppendChild(xmldoc.CreateElement("DocumentRoot"));

XPathNavigator xpathnav = xmldoc.CreateNavigator();
var xslarg = new XsltArgumentList();

foreach (DictionaryEntry entry in dictionary)
{
    xslarg.AddExtensionObject(entry.Key.ToString(), entry.Value);
}

var emailbuilder = new StringBuilder();
var xmlwriter = new XmlTextWriter(new System.IO.StringWriter(emailbuilder));
objxslt.Transform(xpathnav, xslarg, xmlwriter, null);

var xemaildoc = new XmlDocument();
xemaildoc.LoadXml(emailbuilder.ToString());

XmlNode titlenode = xemaildoc.SelectSingleNode("//title");
string subjecttext = titlenode.InnerText;

XmlNode bodynode = xemaildoc.SelectSingleNode("//body");
string bodytext = bodynode.InnerXml; 
```

该变量`bodytext`包含所有模板，但我希望打印参数的地方有空白。

谁能帮我确定`note`和`title`参数未显示在输出中的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:24:30.887

好的，这就是我所做的。我没有直接传递字符串`note`，`title`而是创建了一个类：

```
public class InsertFileNoteContainer
{
    public String Note { get; set; }
    public String Title { get; set; }
} 
```

我用 key 把它放在字典里`ext:IFC`。

在我做的模板中：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:FormData="ext:FormVal" 
     xmlns:FormUrl="ext:UrlFinder" 
     xmlns:Container="ext:IFC"          
     > 
```

和`<xsl:value-of select="Container:get_Title()"></xsl:value-of>`

和`<xsl:value-of select="Container:get_Note()"></xsl:value-of>`

请注意，因为我是 XSL 模板的新手，所以我不知道为什么会这样。如果有人能明白为什么在这里引入一个类在使用字符串参数失败的情况下有效，请告诉我。

# c# - 制作弹出模式（包含自定义用户控件）

> ID：11889418
> 
> 赞同：2
> 
> 时间：2012-08-09T18:08:00.543
> 
> 标签：c#, winforms

我正在考虑更新一些现有代码并制作一个包含自定义用户控件的弹出模式，并想知道这是否可能？

我知道如果我要将自定义 UserControl 放在另一个表单中，这可以很容易地实现，但这似乎有点矫枉过正。

（CommentBox 是自定义控件）

```
CommentBox comment = CommentManager.GetComments(commentType, foreignID);

.//Some code to determine location of the popup
.
.
Popup popup = new Popup(comment);
popup.Show(grid.PointToScreen(viewerLocation)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:54:32.767

如果它必须是模态的，那么您必须使用表单。

如果您只是需要它在表单上弹出，然后查看`ToolStripDropDown`并`ToolStripControlHost`提供该功能。这是一个示例：[Padding/Size/Margin，当使用 ToolstripControlHost 作为弹出控件时](https://stackoverflow.com/a/8099941/719186)

# sql-server - sql server 选择子查询错误

> ID：11889422
> 
> 赞同：0
> 
> 时间：2012-08-09T18:08:10.347
> 
> 标签：sql-server

我在 select 语句下方运行，并且 100% 确定第二行导致问题，因为子查询运行良好。

是 `Where (first,second) IN`有效的陈述吗？

我做这个查询的原因是我将用删除替换第一个选择，所以我只想确保我得到了我想要的集合。

```
select * from edit_proj_isbn e
where (e.record_id, e.proj_isbn)
IN
(
    select t_r.record_id, t_r.proj_isbn from editorial e,
    (
        select ed.record_id as record_id, substring(d.file_name, 1, 13) as epubisbn, epi.proj_isbn as proj_isbn, ed.asset_subtype as asset_subtype
        from editorial ed join doc_renditions d on ed.record_id = d.record_id join edit_proj_isbn epi on ed.record_id =  epi.record_id 
        where (ed.asset_subtype like 'epub' or ed.asset_subtype like 'updf' )
        and substring(d.file_name, 1, 13) not like epi.proj_isbn
    ) AS t_r
    where t_r.record_id=e.record_id
) 
```

我得到以下错误，第二行突出显示：

> *消息 4145，级别 15，状态 1，第 2 行
> 在预期条件的上下文中指定的非布尔类型表达式，靠近“，”。*

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:11:03.853

> Where (first,second) IN 是一个有效的语句吗？

不，这不是一个有效的陈述。`WHERE`您需要为每一个单独的子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:22:55.427

使用 CTE 的快速赃物：

```
with Timmy as (
  select t_r.record_id, t_r.proj_isbn from editorial e, 
  ( 
    select ed.record_id as record_id, substring(d.file_name, 1, 13) as epubisbn, epi.proj_isbn as proj_isbn, ed.asset_subtype as asset_subtype 
    from editorial ed join doc_renditions d on ed.record_id = d.record_id join edit_proj_isbn epi on ed.record_id =  epi.record_id  
    where (ed.asset_subtype like 'epub' or ed.asset_subtype like 'updf' ) 
    and substring(d.file_name, 1, 13) not like epi.proj_isbn 
  ) AS t_r 
where t_r.record_id=e.record_id )
select * from edit_proj_isbn
  where record_id in ( select t_r.record_id from Timmy ) and proj_isbn in ( select t_r.proj_isbn from Timmy ) 
```

# c# - DotNetZip 在提取过程中消耗所有 CPU 资源

> ID：11889424
> 
> 赞同：3
> 
> 时间：2012-08-09T18:08:16.913
> 
> 标签：c#, performance, dotnetzip

我有一个使用 DotNetZip 提取大量 zip 文件的过程。此进程必须是后台进程，因为用户可以在提取过程中使用机器。在较旧的机器（例如 1.5Ghz、1Gb RAM）中，它会消耗所有 CPU 并降低机器速度。我试图降低进程优先级和线程优先级，但它继续减慢机器速度。有人有什么想法吗？

# linux - 自动化 Killall 然后 Killall 级别 9

> ID：11889425
> 
> 赞同：3
> 
> 时间：2012-08-09T18:08:24.927
> 
> 标签：linux, bash, shell, kill, kill-process

有时我想要`killall`某个进程，但运行`killall`不起作用。因此，当我尝试再次启动该过程时，它会失败，因为上一个会话仍在运行。然后我不得不乏味地运行`killall -9`它。所以为了简化我的生活，我创建了一个`realkill`脚本，它是这样的：

```
PIDS=$(ps aux | grep -i "$@" | awk '{ print $2 }') # Get matching pid's.
kill $PIDS 2> /dev/null # Try to kill all pid's.
sleep 3
kill -9 $PIDS 2> /dev/null # Force quit any remaining pid's. 
```

**那么，这是最好的方法吗？我可以通过哪些方式改进此脚本？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T18:13:38.917

`killall`如果可以，请避免，因为在所有 UNIX 平台上没有一致的实现。[Proctools](http://sourceforge.net/projects/proctools/) `pkill`和`pgrep`更可取：

```
for procname; do
    pkill "$procname"
done

sleep 3
for procname; do
    # Why check if the process exists if you're just going to `SIGKILL` it?
    pkill -9 "$procname"
done 
```

（编辑）如果您有应该在被杀死后重新启动的进程，您可能不想盲目地杀死它们，因此您可以先收集 PID：

```
pids=()
for procname; do
    pids+=($(pgrep "$procname"))
done
# then proceed with `kill` 
```

也就是说，如果可以的话，你真的应该尽量避免使用`SIGKILL`。它不会让软件有机会自行清理。如果程序在收到 a 后不会立即退出，`SIGTERM`则它可能正在等待某些东西。找出它在等待什么（硬件中断？打开文件？）并修复它，你可以让它干净地关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:16:33.850

Without understanding what exactly the process does, I would say it probably isn't ideal cos you may have a situation where the processes you are killing are really doing some useful shutdown/cleanup work. Forcing it down with `kill -9` may short-circuit that work and could cause corruption if your process is in fact writing data.

Assuming there is no danger of data corruption and it's ok to short-circuit the shutdown, can you just `kill -9` the process the first time and be done with it. Do you have access to the developers of the process you are killing to understand what is going on that might prevent the shutdown from happening? The process might have blocked the INT and TERM for good reason.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T19:05:28.653

这不太可能，但有可能在这 3 秒的等待中，一个新进程可能已经接管了该 PID，并且第二次 kill 将杀死它。

# c# - 使用 IEnumerable 在动态类型视图中

> ID：11889427
> 
> 赞同：0
> 
> 时间：2012-08-09T18:08:41.820
> 
> 标签：c#, asp.net-mvc, razor

```
var s = myInventoryEntities.p_Forms().Select(i => new  { i.Customer, i.Order_ID }).Distinct().ToList();

ViewBag.MyData = s;

return View(); 
```

这给了我

```
 { Customer = "Bob", Order_ID = 2644550 } 
```

在我的剃须刀代码中

我遍历数据

```
@foreach ( var x in @ViewBag.MyData){
x.Customer // Does not exist! :(
} 
```

请帮忙！

“对象”不包含“客户”的定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:20:12.830

ViewBag 数据的生命周期非常有限。您确定您是从设置 ViewBag 数据的相同操作方法进入此视图的吗？

建议：尽量避免动态类型如 ViewData/ViewBag。坚持强类型可以让你的代码更好的可读性/可维护性。

如果您的域对象和您要显示的内容相同，请不要费心创建 ViewModel。否则创建一个视图模型

```
public class CustomerOrder
{
  public string CustomerName
  public int OrderID { set;get;}
  //other properties as relevant (to the view)
} 
```

并返回它而不是 ViewBag

```
public ActionResult GetOrders()
{

  var s = myInventoryEntities.p_Forms().
          Select(i => new  CustomerOrder {
                                           CustomerName= i.Customer, 
                                           OrderID=i.Order_ID
                                         }).Distinct().ToList();
  return View(s);
} 
```

并且在视图中

```
@model IList<CustomerOrder>
@foreach ( var x in Model)
{
   <p>@x.Customer</p>
} 
```

# java - 仍然执行复杂键的 Spring @Cacheable

> ID：11889428
> 
> 赞同：7
> 
> 时间：2012-08-09T18:09:01.407
> 
> 标签：java, spring, caching

我在春季（3.1）中使用@Cacheable有以下内容：

春天：

```
<?xml   version="1.0" encoding="UTF-8" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oauth="http://www.springframework.org/schema/security/oauth2"
    xmlns:sec="http://www.springframework.org/schema/security"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:cache="http://www.springframework.org/schema/cache"
    xmlns:mongo="http://www.springframework.org/schema/data/mongo"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/security/oauth2 
                            http://www.springframework.org/schema/security/spring-security-oauth2-1.0.xsd
                            http://www.springframework.org/schema/data/mongo
                            http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
                            http://www.springframework.org/schema/cache 
                            http://www.springframework.org/schema/cache/spring-cache.xsd
                            http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
                            http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
                            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
                            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">

<cache:annotation-driven />
<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager" p:cache-manager-ref="ehcache" />
<!-- Ehcache library setup -->
<bean id="ehcache"  class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
    p:config-location="classpath:ehcache.xml" /> 
```

马文：

```
 <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache-core</artifactId>
        <version>2.5.3</version>
    </dependency> 
```

要缓存的方法：

```
@Cacheable(value="cahceName", key="concat(#param1).concat(‘-’).concat(#param2)")
    public String cachedMethod(String param1,String param2) 
```

唉，当我调试代码时，我看到缓存的方法被多次调用，即使 param1 和 param2 相同（即不使用 cahce）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-09T19:17:02.777

钥匙看起来不正确 -

你可能的意思是——`@Cacheable(value="cacheName", key="#param1.concat(‘-’).concat(#param2)")`

此外，如果在没有调试信息的情况下完成编译，则表达式评估器将无法使用 param1、param2 参数名称。相反，您可以通过以下方式使用 p0、p1 等来引用它们：

`@Cacheable(value="cahceName", key="#p0.concat('-').concat(#p1)")`

**更新：**

我在这里有一个单页测试，它演示了它是如何工作的 - [https://gist.github.com/3315275](https://gist.github.com/3315275)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-10T06:54:45.763

就我而言，问题是由于使用了错误的缓存提供程序（[Caffeine](https://github.com/ben-manes/caffeine)）配置引起的：

```
@Bean
public Caffeine<Object, Object> caffeineCacheBuilder() {
    return Caffeine.newBuilder()
        .initialCapacity(100)
        .maximumSize(1000)
        .expireAfterAccess(10, TimeUnit.MINUTES)
        .weakKeys(); // cause problems when concatenated keys used
} 
```

正如文档所说，`weakKeys()`方法：

> 指定存储在缓存中的每个键（不是值）都应包装在 WeakReference 中（默认情况下，使用强引用）。
> 
> **警告：**使用此方法时，生成的缓存将使用标识 ({@code ==}) 比较来确定键的相等性。因此，它的 {@link Cache#asMap} 视图在技术上会违反 {@link Map} 规范（与 {@link IdentityHashMap} 的做法相同）。

# c# - 获取父子关系

> ID：11889436
> 
> 赞同：-2
> 
> 时间：2012-08-09T18:09:35.987
> 
> 标签：c#, collections, recursion

假设我们有一个具有 TreeView 的 Windows 应用程序，您可以展开该视图的节点并向下钻取到子节点，它们可能还有更多子节点，所以现在我们可以展开该节点并走得更远，等等。所以在我的源代码我有一个方法`Foo(string fatherNode)`可以获取我们单击的父节点并找到子节点并列出它们：

这个方法的高层主体是这样的：

```
private void Foo(string fatherNode)
{
  // call some DB scripts and grab data you need to work with.
  int numberOfKids = // get it from the thing you populated from the DB call.
  for(int i = 1  to numberOfKids)
  {
     Node Child = // grab child[i] from the list we populated from DB calls
     //Add it to the treeView
  }
} 
```

好吧，该代码对 UI 应用程序很有用，我们单击一个节点，它运行此方法一次并收集它需要的数据，现在我需要编写另一个方法，利用上述方法的有用行一次抓取所有东西并编写让我们说一个文件的全部信息。

所以在我的脑海里，对我来说似乎是一种递归方法。但仍然无法弄清楚全貌，Prob 应该有两个集合，一个给父亲，一个给孩子，循环遍历孩子并进行递归调用以获取更多孩子并将它们添加到集合中，等等

我想知道您是否可以清除迷雾，我需要做的高级操作，集合应该是什么样子，在哪里添加它们，在哪里调用递归方法调用等等......**请**不要专门考虑“treeview”对象，我只是用它作为一个例子来更好地解释这个问题。最主要的是我发布的 Foo 方法的结构。这就是我应该使用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:52:51.350

好吧，即使在其他答案之后，我也不确定这是否是您要寻找的东西。但是，请检查一下：

**自相关实体（Node）**

```
public class MyEntity
{
    public MyEntity() { }

    public MyEntity(string Name, int ID, int? ParentID)
    {
        this.Name = Name;
        this.ID = ID;
        this.ParentID = ParentID;
    }

    public string Name { get; set; }
    public int ID { get; set; }
    public int? ParentID { get; set; }
} 
```

**建树方法**

```
 public static StringBuilder GetFamilyTree(List<MyEntity> AllTheEntities)
    {
        StringBuilder Return = new StringBuilder();

        List<MyEntity> OrderedEntities = AllTheEntities.OrderBy<MyEntity, int>(x => x.ID).ToList();

        foreach (MyEntity CurrentEntity in AllTheEntities.Where<MyEntity>(x => !x.ParentID.HasValue))
        {
            Return.AppendLine(GetEntityTree(AllTheEntities, CurrentEntity));
        }

        return Return;
    }

    public static string GetEntityTree(List<MyEntity> AllTheEntities, MyEntity CurrentEntity, int CurrentLevel = 0)
    {
        StringBuilder Return = new StringBuilder();

        Return.AppendFormat("{0}{1}", "\t".Repeat(CurrentLevel), CurrentEntity.Name);
        Return.AppendLine();

        List<MyEntity> Children = AllTheEntities.Where<MyEntity>(x => x.ParentID.HasValue && x.ParentID.Value == CurrentEntity.ID).ToList();

        if (Children != null && Children.Count > 0)
        {
            foreach (MyEntity CurrentChildEntity in Children)
            {
                Return.Append(GetEntityTree(AllTheEntities, CurrentChildEntity, CurrentLevel + 1));
            }
        }

        return Return.ToString();
    } 
```

**一个小助手类**

```
public static class StringExtension
{
    public static string Repeat(this string text, int times)
    {
        string Return = string.Empty;

        if (times > 0)
        {
            for (int i = 0; i < times; i++)
            {
                Return = string.Concat(Return, text);
            }
        }

        return Return;
    }
} 
```

**用法**

```
 List<MyEntity> AllMyEntities = new List<MyEntity>();
        AllMyEntities.Add(new MyEntity("1", 1, null));
        AllMyEntities.Add(new MyEntity("1.1", 2, 1));
        AllMyEntities.Add(new MyEntity("1.1.1", 3, 2));
        AllMyEntities.Add(new MyEntity("2", 4, null));
        AllMyEntities.Add(new MyEntity("2.1", 5, 4));

        Console.Write(GetFamilyTree(AllMyEntities).ToString()); 
```

**结果**

```
1
    1.1
        1.1.1
2
    2.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:21:45.183

循环`Foo(child)`内调用。`for`我想这会解决你的问题。如果树很大，请不要递归。使用堆栈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:21:47.910

你想做一个简单的树遍历算法。这是伪代码中 DFS（深度优先搜索）的简单实现：

```
TraverseTree(Tree t)
{
   DoSomethingWith(t); // like writing the contents of the node to the file.

   if (t == null) // leaf
    return;

   foreach(Tree child in t.Children) // recursively traverse the children.
   {
      TraverseTree(child);
   }
} 
```

您可以按照执行计算的顺序进行操作。[在此处](http://en.wikipedia.org/wiki/Tree_traversal)查看更多详细信息

# objective-c - 在主调度队列上显示 UI 元素会导致元素出现然后消失

> ID：11889438
> 
> 赞同：3
> 
> 时间：2012-08-09T18:09:45.080
> 
> 标签：objective-c, cocoa-touch, grand-central-dispatch

我想在开始一项长任务之前显示一个进度 HUD，并在任务完成后将其关闭。现在 UI 会冻结一段时间，然后 HUD 会显示一秒钟然后消失。再过 4-5 秒后，任务完成并显示结果，但进度 HUD 已经消失。

```
- (void) addProcess:(NSString *)searchTerm
{
    dispatch_sync(dispatch_get_main_queue(), ^{
        UIApplication *app = [UIApplication sharedApplication];
        app.networkActivityIndicatorVisible = YES;
        [SVProgressHUD showWithMaskType:SVProgressHUDMaskTypeGradient];
    });

    //DO SOME VERY LONG STUFF HERE

    dispatch_sync(dispatch_get_main_queue(), ^{
        UIApplication *app = [UIApplication sharedApplication];
        app.networkActivityIndicatorVisible = NO;
        [SVProgressHUD dismiss];
    });
} 
```

我`SVProgressHUD`用于进度HUD。我正在`addProcess`使用该方法调用`dispatch_async()`

如果我使用旧的`+[NSThread detach...]`，它可以完美地工作，但我不想再使用它了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T18:17:17.143

A couple of things:

1.  The key observation is to always use `dispatch_async` unless you need `dispatch_sync`. You don't need synchronous operation here, so just use `dispatch_async` for your UI updates.

2.  If you're running `addProcess` from the main queue, it doesn't need to dispatch the first UI update back to the main queue. Obviously, if you're running this from a background queue, you do.

3.  The original question had the dispatch to the background queue within `addProcess`, which makes more sense to me (keeps all the GCD stuff nicely encapsulated). You've updated your answer to say that you're invoking this via `dispatch_async([self addProcess])` (by which I presume you meant to a global queue, not the main queue), which I'm less crazy about. I address both scenarios in my code samples below.

So, in short, if you're invoking this via `[self addProcess]` (without dispatching that, itself, to the background queue) I'd suggest:

```
- (void) addProcess:(NSString *)searchTerm
{
    UIApplication *app = [UIApplication sharedApplication];
    app.networkActivityIndicatorVisible = YES;
    [SVProgressHUD showWithMaskType:SVProgressHUDMaskTypeGradient];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        //DO SOME VERY LONG STUFF HERE

        dispatch_async(dispatch_get_main_queue(), ^{
            UIApplication *app = [UIApplication sharedApplication];
            app.networkActivityIndicatorVisible = NO;
            [SVProgressHUD dismiss];
        });
    });
} 
```

Or, alternatively,

```
- (void) addProcess:(NSString *)searchTerm
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        dispatch_async(dispatch_get_main_queue(), ^{
            UIApplication *app = [UIApplication sharedApplication];
            app.networkActivityIndicatorVisible = YES;
            [SVProgressHUD showWithMaskType:SVProgressHUDMaskTypeGradient];
        });

        //DO SOME VERY LONG STUFF HERE

        dispatch_async(dispatch_get_main_queue(), ^{
            UIApplication *app = [UIApplication sharedApplication];
            app.networkActivityIndicatorVisible = NO;
            [SVProgressHUD dismiss];
        });
    });
} 
```

And if you're doing ...

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [self addProcess]; 
}); 
```

then it's just:

```
- (void) addProcess:(NSString *)searchTerm
{
    dispatch_async(dispatch_get_main_queue(), ^{
        UIApplication *app = [UIApplication sharedApplication];
        app.networkActivityIndicatorVisible = YES;
        [SVProgressHUD showWithMaskType:SVProgressHUDMaskTypeGradient];
    });

    //DO SOME VERY LONG STUFF HERE

    dispatch_async(dispatch_get_main_queue(), ^{
        UIApplication *app = [UIApplication sharedApplication];
        app.networkActivityIndicatorVisible = NO;
        [SVProgressHUD dismiss];
    });
} 
```

# php - 如何创建具有通配符域的 MySQL 用户？

> ID：11889439
> 
> 赞同：0
> 
> 时间：2012-08-09T18:09:47.170
> 
> 标签：php, mysql

我正在尝试设置一个 MySQL 服务器，我们的 Internet 网络上的任何人都可以访问它。

我可以通过 PHP 连接到使用 localhost 的服务器，但不能使用我的 IP 作为主机名：

```
Warning: mysqli::mysqli() [mysqli.mysqli]: (28000/1045): Access denied for user 'user'@'user.corp.companyname.com' (using password: YES) in /Library/WebServer/Documents/doc.php on line 38 
```

我已经使用主机 localhost、% 和 * 设置了相同的 MySQL 用户，但 MySQL 似乎仍然不接受未知主机。

**更新**

好吧，我放弃了：网络上的其他机器似乎没有问题建立MySQL连接，所以当使用我的IP作为主机时，只是我的本地机器拒绝验证。

# c++ - 如何将 BYTE 数组中的两个字节存储为 int （或类似的东西）？

> ID：11889440
> 
> 赞同：0
> 
> 时间：2012-08-09T18:09:49.873
> 
> 标签：c++, bittorrent

我正在用 C++ 编写一个 bittorrent 客户端，它从包含几个 6 字节字符串的跟踪器（服务器）接收消息。前 4 个字节表示对等方的 IP 地址，接下来的 2 个字节表示对等方正在侦听的端口号。

我已经研究出如何将 ip 字节转换为人类可读的 ip 地址，但我正在努力将表示端口号的两个字节转换为 int （或类似的东西）

到目前为止，这是我的努力：

```
BYTE portbinary[2];
unsigned short peerport;

//trackers[i]->peersBinary[j * 6 + 4] is the first byte
portbinary[0] = trackers[i]->peersBinary[j * 6 + 4];
//trackers[i]->peersBinary[j * 6 + 5] is the second byte
portbinary[1] = trackers[i]->peersBinary[j * 6 + 5];
peerport = *portbinary; 
```

经过检查 peerport 似乎只包含第一个字节的整数表示，我该如何解决这个问题？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:28:22.340

我更喜欢使用按位运算而不是类型双关语，因为它根本不会带来字节序问题（端口号是一个大字节序数，而今天的许多系统都是小字节序）。

```
int peerport = (portbinary[0] << 8) | portbinary[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:23:38.750

由于看起来数据是对齐的，您可以使用

```
peerport = ntohs(*(uint16_t *)(trackers[i]->peersBinary + j * 6 + 4)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:26:49.593

由于`portbinary`是 的数组`BYTE`，则`*portbinary`等价于`portbinary[0]`。

实现结果的便携式方法可能是：

```
peerport = portbinary[0];
peerport = 256*peerport + portbinary[1]; 
```

这假设`portbinary`是按网络字节顺序传递的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T18:22:01.263

工会解决方案：

```
union port_extractor
{
    BYTE raw_port[2];
    unsigned short port_assembled;
}; 
```

如果您的计算机字节序与您从网络获取的表示相同，这将起作用。抱歉，我不知道它是如何通过 bittorrent 协议实现的。

如果字节序相反，那么您必须使用的解决方案就不是那么好：

```
unsigned short port_assembled = (unsigned short)raw_port[first_byte] | ((unsigned short)raw_port[second_byte] << 8);
// first_byte = 0, second_byte = 1 or vice versa 
// depending on source data endianess 
```

# windows - NSIS 安装程序大小增加了 50%。我应该去哪里看？

> ID：11889441
> 
> 赞同：0
> 
> 时间：2012-08-09T18:09:55.163
> 
> 标签：windows, installation, nsis

经过几次代码修改后，我的应用程序安装程序从 900K 变为 1.5M。我安装后，安装文件夹的大小分别为3.0M和3.2M。不知道出了什么问题。有谁知道我应该在哪里看？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:16:41.723

也许您使用了一个带有大 dll 文件的插件。检查您的插件调用（包含 的行`::`）。如果您自己编译插件，您可能会错误地使用调试信息编译它们，这会增加 dll 的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T23:14:40.453

`SetCompress`，，，`SetCompressor`这将是我的第一个猜测`SetCompressorDictSize`......`SetDatablockOptimize`

# mysql - MySql 访问冲突或语法错误

> ID：11889448
> 
> 赞同：3
> 
> 时间：2012-08-09T18:10:34.913
> 
> 标签：mysql, sql, access-violation

当我尝试执行它下面的 sql 语句时，我收到以下错误。

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL   syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'like, agree, favor, discriminator) VALUES ('5023fb89189df', 0, '2012-08-09 14:03' at line 1 
```

完整的sql语句如下

```
INSERT INTO activity (id, hide_author, created, updated, access, location, disabled, created_ip, updated_ip, params, body, audit, hide_activity, author, owning_activity, like, agree, favor, discriminator) VALUES ('5023fa5a63d1b', NULL, '2012-08-09 13:58:50', '2012-08-09 13:58:50', NULL, NULL, 0, '192.168.1.1', NULL, NULL, 'Exactly, I would prefer to be able to defend myself when the unthinkable happens', NULL, 0, '50143c83e3f5a', '5023e63dafe18', 1, NULL, NULL, 'commentpost') 
```

我没有看到语法有任何错误，但也许你们可以就可能导致哪种访问冲突提出一些建议。我应该寻找什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:15:04.553

“Like”是 SQL 中的保留字。用反引号括起来。这是计算机上“1”旁边的键，如下所示：

```
INSERT INTO activity (id, hide_author, created, updated, access, location, disabled, created_ip, updated_ip, params, body, audit, hide_activity, author, owning_activity, `like`, agree, favor, discriminator) VALUES ('5023fa5a63d1b', NULL, '2012-08-09 13:58:50', '2012-08-09 13:58:50', NULL, NULL, 0, '192.168.1.1', NULL, NULL, 'Exactly, I would prefer to be able to defend myself when the unthinkable happens', NULL, 0, '50143c83e3f5a', '5023e63dafe18', 1, NULL, NULL, 'commentpost') 
```

# mathematica-8 - 在 NDSolve 中使用 NIntegrate

> ID：11889451
> 
> 赞同：4
> 
> 时间：2012-08-09T18:10:49.737
> 
> 标签：mathematica-8

我正在尝试数值求解偏微分方程，其中不齐项是另一个函数的积分。像这样的东西：

NDSolve[{D[f[x, y], x] == NIntegrate[h[x,y+y2],{y2, x, y}],f[0,y] == 0}, f, { x, 0, 1}, {y,0,1}]

其中 h[x,y] 是先前定义的众所周知的函数。但似乎 Mathematica 不知道如何评估积分。

我不经常使用 Mathematica，所以我确信有一个简单的解决方案。有人可以告诉我我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-24T13:10:07.197

It is not really clear from the question, but I had a similar problem and the solution in my case was to follow the advice from the [wolfram forums](http://forums.wolfram.com/mathgroup/archive/2008/May/msg00815.html) to put the integral in an extra function and force real input.

So in your case this would be

```
integral[x_Real,y_Real] := NIntegrate[h[x,y+y2],{y2, x, y}];
NDSolve[{D[f[x, y], x] == integral[x,y], f[0,y] == 0}, f, {x, 0, 1}, {y,0,1}] 
```

# php - 为什么 ？在 Zend_Db 的 LIMIT 中不起作用

> ID：11889457
> 
> 赞同：-2
> 
> 时间：2012-08-09T18:11:12.617
> 
> 标签：php, mysql, zend-framework, zend-db

我有以下内容：

```
public function getAll($limit = 100)
{   
    //if ($thread != 0) { $threadq = "WHERE threadId=$threadId"; }

    $query = <<<EOF
    SELECT 
        x.*
    FROM x

    ORDER BY dater DESC
    LIMIT ?
EOF;
    return self::$db->fetchAll($query, $limit);
} 
```

似乎它变成了`LIMIT x`，`LIMIT 'x'`因此 MySQL 查询解析器出错并抱怨。

但是做得`LIMIT $limit`很好

为什么这不起作用？还有另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:15:02.090

替换参数必须在数组内，即使只有一个：

```
return self::$db->fetchAll($query, array($limit)); 
```

对于您不需要使用的查询的限制部分？替换通配符！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T16:56:33.783

我要疯了，建议你保持简单并使用[Zend_Db_Select](http://framework.zend.com/manual/en/zend.db.select.html)。这似乎是一个简单的查询。

这个演示使用默认的[ZF DbTable](http://framework.zend.com/manual/en/zend.db.table.html#zend.db.table.defining)作为适配器（我可以很容易地使用`Zend_Db_Table::getDefaultAdapter();`），但是它可以适应几乎任何类型的查询：

```
<?php

class Application_Model_DbTable_User extends Zend_Db_Table_Abstract
{
    protected $_name = 'user';
    protected $_primary = 'id';

public function getAll($limit = 100)
{
    $select = $this->select();//This is the adapter for this table and implies SELECT * FROM user 
    $select->order('name', 'DESC') //can also pass an array of columns
           ->limit($limit);//limit has a second arg for offset

    return $this->fetchAll($select);//returns a rowset object, if an array is required append ->toArray to the fetchall().
}   
} 
```

# iphone - 在objective-c中调用另一个类的方法

> ID：11889458
> 
> 赞同：1
> 
> 时间：2012-08-09T18:11:28.140
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我通常知道，当你想调用另一个对象的方法时，你会这样做：

`NewObject *object = [NewObject alloc]init];`

`[object callMethod];`

但是我创建了一个本身不是对象的类，这意味着它没有属性或内存管理。它有几种计算一些东西的方法。

从任何其他类中，我所要做的就是导入该类的标头并执行以下操作：

```
#import "MyClass.h"

[MyClass callMethod]; 
```

为什么在这种情况下我不必分配 init？它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:13:31.120

因为你正在调用一个类方法。你只需要`alloc init`对象。类只需要包含但不需要`alloc init`编辑。所以你不需要启动一个`NSString`类，比如说。

编辑：

让我们举一些无意义的例子：

```
+ (void)classMethod {
    NSLog("Hi!");
}

[SomeClass classMethod];     // prints Hi!

- (void)instanceMethod {     // (say it's an instance method of NSString)
    NSLog(self);
}

[@"someNSString" instanceMethod];   // prints someNSString. But you need to have a string first, otherwise you cannot use this method. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:21:33.837

听起来您正在尝试调用类方法。这些方法被定义为：

*   +(void) myStaticMethod;

代替

*   -（无效）我的方法；

加号表示该方法不使用任何字段，因此不需要实例化对象。

在您的示例中，“object”是已分配内存并初始化的类“NewObject”的实例。其中 - 作为您的示例，“MyClass”只是一个类，因为它具有如上所述声明的静态成员，因此不需要实例化。

类方法提供了一种将一堆相关函数组合到一个位置的好方法，而不是将它们分散在常规命名空间中，就像通常在直接 C 中所做的那样。您还可以同时拥有类方法和实例方法类，在需要时使用类，并在需要时实例化类以使用实例类。

编辑：更改术语以引用类方法而不是静态方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:16:32.900

There is a difference between "instance" methods (normal ones), that have to be called on an object and have access to `self`, and "class" methods (called static, in many programming languages), that are invoked on the class and thus do not have a `self`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T18:26:15.430

类方法类似于 C++ 静态方法，因为它们可以在不创建类的具体实例的情况下被调用。这样做的用处是您可以调用类的专用工厂方法来创建新实例；或者，您可以在可能会或可能不会根据任务提供具体实例的类的范围内定义实用程序库。

看看 NSDate 和 NSNumber 是 Foundation 框架中很好的例子。

# jquery - blueimp jQuery 文件上传没有被触发

> ID：11889459
> 
> 赞同：2
> 
> 时间：2012-08-09T18:11:32.927
> 
> 标签：jquery, jquery-plugins, file-upload, blueimp

我正在尝试使用 blueimp 文件上传插件来异步上传图像，但是当我尝试上传它们时没有任何反应。根本没有触发任何回调函数。我正在使用此函数将文件上传器绑定到文件输入。

```
var initFileUpload = function (gender) {
//Used to bind fileupload plugin and send files

//bind file upload
$('#add_form').fileupload({
    namespace: gender+'_image',
    singleFileUploads: true,
    formData: [{name:'gender', value: gender}],
    fileInput: $("#"+gender+'_image'), 
    done: function(e, data){
        alert('success '+data.result);
    }

});
//Bind event callbacks
$('#add_form').bind('fileuploadsend', function (e, data) {
    console.log('sent');
});
$('#add_form').bind('fileuploaddone', function (e, data) {
    console.log('done');
});
$('#add_form').bind('fileuploadfail', function (e, data) {
    console.log(data.result);
});
$('#add_form').bind('fileuploadalways', function (e, data) {
    console.log(data.result);
});

} 
```

灵感来自[此处的多文件上传教程。](https://github.com/blueimp/jQuery-File-Upload/wiki/Multiple-File-Input-Fields-in-one-Form-v4)我这样做是因为我有 3 个不同名称的不同输入。然后我在我的 ajax 调用中手动触发发送功能，或者尝试触发。

```
$.ajax({
      type: "POST",
      url: "/manage/processadditem",
      data: $("#add_form").serialize(),
      dataType: "html",
      success: function( response, textStatus, XHR )
      {
        if(response.indexOf('invalid') >= 0 || response.indexOf('Exception') >= 0){
            //Show them their errors
            alert(response);
        }
        else{
            //Upload item images
            //Send files
            $('#add_form').fileupload('send', {fileInput: $("#neutral_image"), url: '/manage/items/itemimage/test' });
            $('#add_form').fileupload('send', {fileInput: $("#male_image"), url: '/manage/items/itemimage/test' });
            $('#add_form').fileupload('send', {fileInput: $("#female_image"), url: '/manage/items/itemimage/test' });
            alert('should have uploaded image to cdn.completeset.com/items/test_nla.jpg if gender was neutral');
        }

      },
      error: function(jqXHR, textStatus, errorThrown){
        alert('An error occurred, please try again later.');
      }
    }); 
```

我在[此处](https://github.com/blueimp/jQuery-File-Upload/wiki/API)的程序文件上传部分下的文档中发现，您可以使用 send 方法手动发送文件，`$('#fileupload').fileupload('send', {files: filesList});`这就是我试图用来发送文件的行。不幸的是，我根本没有从任何回调函数中得到任何类型的响应，我也不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:03:03.427

我刚刚在这里使用了 malsup 表单插件。[http://malsup.com/jquery/form/#ajaxForm](http://malsup.com/jquery/form/#ajaxForm)在与 blueImp 苦苦挣扎 2 天后，我在几分钟内启动并运行了这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T07:04:06.920

试试这个，你可以在这里下载工作示例；

[jQuery Blueimp 文件上传器](https://github.com/maxpavlov/jQuery-File-Upload.MVC3)

# javascript - ZF：js 被识别但在动作视图中不起作用

> ID：11889461
> 
> 赞同：1
> 
> 时间：2012-08-09T18:11:42.340
> 
> 标签：javascript, zend-framework

我遇到了 javascript 问题，我可以`<script type="text/javascript" src=""></script>`在操作视图的代码源中`http://localhost/application/public/controller/action`看到 js 函数并不能真正工作，并且在`"http://localhost/application/public/controller/"`页面中一切正常！任何人都可以帮助我。`layout.phtml`我的js文件`http://localhost/application/public/controller/`在所有页面的代码源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:36:36.993

显然，问题似乎出在 JS 的路径上。

没有看到代码，我只是猜测您可能没有使用 baseUrl 视图助手。

在您的 layout.phtml 中，尝试使用 baseUrl 帮助程序[http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.baseurl调用您的图像、JS 和 CSS](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.baseurl)

假设您将所有 js 文件存储在公共文件夹中名为 js 的文件夹中。

```
<script type='text/javascript' src='<?php echo $this->baseUrl('js/xyz.js'); ?>'></script> 
```

如果这不能解决您的问题，请告诉我。

# iphone - 显示来自 plist 的随机问题

> ID：11889463
> 
> 赞同：0
> 
> 时间：2012-08-09T18:11:46.327
> 
> 标签：iphone, ios, random, plist

我有一个充满问题和答案（带有指定问题）的列表，显示在界面上，但我想随机显示问题。请参阅我在下面尝试的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if (questions && configDictionary) {

        for (int i = 0; i < [questions count]; ++i) { int r = (random() % [questions count]); [questions exchangeObjectAtIndex:i withObjectAtIndex:r]; }

        [questionLabel setText:[[questions objectAtIndex:currentQuestonIndex] objectForKey:@"question"]];
        NSArray *answers = [[questions objectAtIndex:currentQuestonIndex] objectForKey:@"answers"];
        [answerLabel0 setText:[answers objectAtIndex:0]];
        [answerLabel1 setText:[answers objectAtIndex:1]];
        [answerLabel2 setText:[answers objectAtIndex:2]];
        [answerLabel3 setText:[answers objectAtIndex:3]];
        [pointsPerAnswerLabel setText:[NSString stringWithFormat:@"+%d points", [[configDictionary objectForKey:kPointsPerCorrectAnswer] intValue]]];
        [currentQuestionNumberLabel setText:[NSString stringWithFormat:@"question %d", currentQuestonIndex+1]];
    }
}

Someone please help? 
```

我收到警告“NSArray”可能无法响应“exchangeObjectAtIndex:withObjectAtIndex:”然后它在尝试运行后崩溃。

请参阅下面的 .h 文件：

```
@interface ViewController : UIViewController {
    NSDictionary *configDictionary;
    NSMutableArray *questions;
    int currentQuestonIndex;
    NSMutableArray *questionsCorrectlyAnswered;
    NSTimer *timer;
    int totalTimeLeft;
    int currentTimeLeft;

    BOOL saveTime;
}
@property (retain, nonatomic) NSMutableArray *questions; 
```

它仍然崩溃。

我以前查看的表格视图：

```
- (void)tableView:(UITableView *)_tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    gameViewController = [[QuizViewController alloc] initWithNibName:@"QuizViewController"bundle:nil];
    [(QuizViewController*) gameViewController setMasterViewController:self];
    [(QuizViewController*) gameViewController setTitle:[[quizzes objectAtIndex:indexPath.row] objectForKey:@"quizName"]];
    [(QuizViewController*) gameViewController setQuestions:[[quizzes objectAtIndex:indexPath.row] objectForKey:@"questions"]];
    [gameViewController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [self presentModalViewController:gameViewController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:18:56.947

无论您在哪里设置“ `questions`”（您不会在代码中显示），您都需要将其设置为“ `NSMutableArray`”而不是不可变（不可更改、不可交换）“ `NSArray`”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:43:50.363

这是我的尝试。不是您问题的确切答案，但我过去确实做过类似的事情。我所做的是我有一系列评论，我想在每次启动应用程序时随机化。所以我就是这样做的。

```
NSMutableArray *funnyArray =[[NSMutableArray alloc] initWithObjects:
                                 @"Got Milk?",
                                 @"Got Food?",
                                 @"Life Is Like A Box of Chocolates", nil];

//Randmonize Array
    NSUInteger count = [funnyArray count];

    for (NSUInteger i = 0; i < count; ++i) 
    {
        // Select a random element between i and end of array to swap with.
        int nElements = count - i;
        int n = (arc4random() % nElements) + i;
        [funnyArray exchangeObjectAtIndex:i withObjectAtIndex:n];
    } 
```

现在在您的情况下，您将仅随机化问题。但是您希望问题和答案对随机排列在一起。我不确定你能怎么做。也许困难的方法是在您的数组中的问题旁边放一个数字，例如 1。我的牛奶在哪里？当您从数组问题中获得随机 str 时，您可以去掉“1”并在答案数组中查找“1”。我建议像其他人建议的那样使用 nsmutablearrays。只是我的2美分。

# sql - Active Record 占位符/子集条件

> ID：11889464
> 
> 赞同：0
> 
> 时间：2012-08-09T18:11:48.767
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord

我有以下查询：

```
Score.where("build_id => ? AND metric_id => ? ",params[:buildIds], params[:metricIds]) 
```

其中 params[:buildIds], params[:metricIds] 是整数数组。我收到此错误：

```
PG::Error: ERROR:  operator does not exist: integer => integer
LINE 1: SELECT "scores".* FROM "scores"  WHERE (build_id => 1,2 AND ...
                                                         ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
: SELECT "scores".* FROM "scores"  WHERE (build_id => 1,2 AND metric_id => 1,13 ) 
```

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:42:44.913

最简单的做法是将两个`where`调用链接在一起，让 ActiveRecord 找出需要什么 SQL：

```
Score.where(:build_id => params[:buildIds]).where(:metric_id => params[:metricIds]) 
```

这将为您在 SQL 中生成`IN`s，因此数据库应该看到如下内容：

```
where build_id in (1, 2) and metric_id in (1, 13) 
```

错误消息告诉您 PostgreSQL 中没有`=>`两边都有整数的运算符。那是因为`=>`是 Ruby 语法，而不是 PostgreSQL 语法（当然，除非您安装了 hstore 并且 hstore 的`=>`两边都需要字符串）。

# spring - 如何在集成测试阶段使用 Spring 嵌入式数据库初始化脚本？

> ID：11889466
> 
> 赞同：12
> 
> 时间：2012-08-09T18:11:54.430
> 
> 标签：spring, integration-testing, embedded-database

我可以使用 Spring 以编程方式创建和初始化嵌入式数据库：

```
@Before
public void setUp() {
    database = new EmbeddedDatabaseBuilder()
            .setType(EmbeddedDatabaseType.H2)
            .addScript("schema.sql")
            .addScript("init.sql")
            .build();
    ....
} 
```

或通过 Spring 配置：

```
<jdbc:initialize-database data-source="dataSource">
  <jdbc:script location="classpath:schema.sql"/>
  <jdbc:script location="classpath:init.sql"/>
</jdbc:initialize-database> 
```

这里我的脚本`schema.sql`和`init.sql`存储在目录中`src/test/resources`。因此，如果使用嵌入式数据库的测试运行：

```
mvn test 
```

然后文件，在里面`src/test/resources`是可用的，一切都很好。

*但是现在假设我想在集成测试*中将嵌入式数据库与嵌入式 Web 服务器（Jetty 或嵌入式 Tomcat）一起使用，通过

```
mvn integration-test 
```

现在在这个后期阶段，我想做一个几乎端到端的测试，假设嵌入式数据库中有某些数据，点击 Web 服务的某些 url 返回预期的 HTTP 响应。但是此时，嵌入式网络服务器中部署的战争没有文件，`src/test/resources`因此我的初始化脚本不存在，我得到了错误

> 原因：java.io.FileNotFoundException：类路径资源[schema.sql]无法打开，因为它不存在

现在，如果我将脚本放入其中，一切*都会*`src/main/resources`正常工作，但这些脚本仅用于填充嵌入式数据库进行*测试*，它们根本不*属于*war 文件。有谁知道如何设置集成测试以便可以使用嵌入式数据库，而不会污染将要部署的实际战争文件？

我希望 Spring 的嵌入式数据库初始化可以使用文件以外的东西。我考虑过 JNDI，但这似乎需要使用测试数据的资源定义来污染 web.xml 文件，这些测试数据将（再次）出现在可部署的战争中。或者也许有使用货物的选择？一些我不知道的 Spring 编程技巧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T22:02:47.477

你应该能够做到这一点：

```
<jdbc:initialize-database data-source="dataSource">
    <jdbc:script location="file:///${project.basedir}/src/test/resources/schema.sql"/>
    <jdbc:script location="file:///${project.basedir}/src/test/resources/init.sql"/>
</jdbc:initialize-database> 
```

# ios - 取消 NKAssetDownload 有效，重新下载无效。有什么解决办法吗？

> ID：11889470
> 
> 赞同：3
> 
> 时间：2012-08-09T18:12:07.047
> 
> 标签：ios, newsstand-kit

谁能解释我如何取消并重试 NKAssetDownload？

目前我试过这个：

```
NKAssetDownload * download = [issue.downloadingAssets objectAtIndex:0];
currentConnection = [download downloadWithDelegate:self]; 
```

要取消下载，我会这样做：

```
 [currentConnection cancel]; 
```

这可行，但是 NKAssetDownload 保留在 NKIssue 下载资产表中。下次我想下载相同的问题时，我再次执行相同的代码（ downloadWithDelegate ）。然而，这并没有做任何事情。就好像 NKAssetDownload 实例仍然使用我之前取消的相同 NSURLConnection ，因此它不会启动下载。真正的问题是我无法从 NKIssue 中删除 NKAssetDownload，因此无法创建一个指向同一 URL 的新 URL 以重试下载。据我所知，除了从库中删除 NKIssue （这会丢弃所有内容）并重新创建之外，没有办法取消下载并稍后重试。有谁知道如何做到这一点？

关于 SO [Is it possible to cancel an NKAssetDownload 有一个相关的问题吗？](https://stackoverflow.com/questions/8646121/is-it-possible-to-cancel-an-nkassetdownload) 但提供的唯一解决方案是删除 NKIssue，这不是我想要做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:07:12.430

Newsstand 下载队列由 Newsstand 框架维护。开发人员无法控制暂停/取消下载（除了从 NKLibrary 中删除 NKIssue）。

您可以实现以下 NSURLConnectionDelegate 方法来重试任何失败的下载。

```
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
```

我检查了如果下载失败并且这个名为 nkIssue.downloadingAssets.count 的方法始终为 0。您可以再次添加问题的资产并开始下载。

如果要暂停NS下载，恐怕没有办法。如果你想取消下载，唯一的方法是从NKLibrary中删除NKIssue，我认为这没有问题。您可以随时再次添加 NKIssue 并随时开始下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T17:54:18.013

我认为最好“重置”这个问题。因为取消时问题状态没有更新`NSURLConnection`并且永远保持“下载”。而且您也不需要指向`NSURLConnection`.

注意：这将删除与此问题相关的所有已完成下载。

```
-(NKIssue*) resetIssue:(NKIssue*)issue{
    NSString* issueName = [issue name];
    NSDate* issueDate = [issue date];
    NKLibrary * lib = [NKLibrary sharedLibrary];
    [lib removeIssue:issue];
    return [lib addIssueWithName:issueName date:issueDate];
} 
```

# javascript - 创建自定义 Javascript 对象的一些惯用方法是什么

> ID：11889471
> 
> 赞同：2
> 
> 时间：2012-08-09T18:12:07.643
> 
> 标签：javascript, oop

我正在创建一个自定义对象，以在我工作的一些内部应用程序中使用。我研究了一些方法来做到这一点——这就是我想出来的。

```
function ISGrader(text)
{
this.text = text;

this.printInfo = function(){
    alert("Object working " + text);    
}

this.putGrade = function(score)
{
           alert(score);
}
 } 
```

我相信这显示了构造函数类型的功能，以及我将构建的一些简单的入门方法。

上述是好的做法还是有另一种更标准的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:18:36.537

我更喜欢这种模式（[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)），但这纯粹是意见：

```
var ISGrader = (function (text) {
    // anything declared here is "private"
    var printInfo = function() {
        alert("Object working " + text);    
    };

    var putGrade = function (score) {
        alert(score);
    };

    // put "publicly" accesible things in the returned object
    return {
        text: text,
        printInfo: printInfo,
        putGrade: putGrade
    };
})(text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:47:08.547

我更喜欢类似于下面的模式。您可以将其视为 4 步方法：

```
(function(parent) {

// 1\. Declare private variables and functions that will be
// accessible by everybody within the scope of this 
// function, but not outside of it.
var doSomethingAwesome = function() { .. }; // private function
var coolInteger = 42; // private variable

// 2\. Create the constructor function
function ISGrader() {
    ..
}

// 3\. Create shared public methods on the prototype object.
// These will be created only once, and shared between all objects
// which is more efficient that re-creating each method for each object.
ISGrader.prototype.printInfo = function() { .. };
ISGrader.prototype.putGrade = function(score) { .. };

// 4\. Expose the constructor to the outside world.
parent.ISGrader = ISGrader;

})(window); 
```

将所有内容都包含在自执行匿名函数中的原因是为了确保我们在内部创建的私有变量不会泄漏到封闭范围之外，并且基本上保持事物清洁。

像这样声明构造函数的另一个好处是，您可以`window`通过更改一个单词轻松地将父对象从 say 更改为另一个命名空间对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:19:52.980

始终建议使用“原型”来完成。这样你也可以继承它的属性并创建新的。

```
var ISGrader = function(text) {
    this.text = text;

    var _privateVar = text;

    this.updatePrivateVar = function(newText) {
        _privateVar = newText;
        alert("private variable updated");
    }
}
ISGrader.prototype.text = "";
ISGrader.prototype.printInfo = function() {
    alert("Object working " + this.text);
}
ISGrader.prototype.putGrade = function(score) {
    alert(score);
}

var isGrader = new ISGrader("hello");
isGrader.printInfo();

// Inherit and create a new definition
var ISGrader2 = function() {}
ISGrader2.prototype = new ISGrader();

var isGrader2 = new ISGrader("hello2");
isGrader2.printInfo();
isGrader2.updatePrivateVar("hello3"); 
```

演示：http: [//jsfiddle.net/rkspP/3/](http://jsfiddle.net/rkspP/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T18:20:06.800

虽然不是真正的答案，但我推荐 Douglas Crockford 的书[JavaScript：The Good Parts](https://rads.stackoverflow.com/amzn/click/com/0596517742)，因为它很好地向您介绍了该语言的“好的部分”，并讨论了在 JavaScript 中创建对象的不同方法的优缺点。

如果您只是想了解 JavaScript 对象中成员可见性的说明，也可以查看此资源：http: [//javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T18:22:34.753

如果您计划在`ISGrader`单个页面上创建多个对象，则将函数粘贴在分配给`ISGrader`这样的原型对象中会更节省内存：

```
function ISGrader(text) {
    this.text = text;
}

ISGrader.prototype = {
    printInfo: function() {
        alert("Object working " + this.text);
    },
    putGrade: function(score) {
        alert(score);
    }
} 
```

# python - 在熊猫中将数据转换为缺失

> ID：11889474
> 
> 赞同：10
> 
> 时间：2012-08-09T18:12:21.163
> 
> 标签：python, numpy, pandas

我有`DataFrame`一个混合了 0 和其他数字的数字。我想将 0 转换为缺失。

例如，我正在寻找可以转换的命令

```
In [618]: a=DataFrame(data=[[1,2],[0,1],[1,2],[0,0]])

In [619]: a
Out[619]: 
   0  1
0  1  2
1  0  1
2  1  2
3  0  0 
```

到

```
In [619]: a
Out[619]: 
   0   1
0  1   2
1  NaN 1
2  1   2
3  NaN NaN 
```

我尝试了 pandas.replace(0, NaN)，但我收到一个错误，即未定义 NaN。而且我看不到任何可以从中导入 NaN 的地方。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T18:13:34.037

做吧`from numpy import nan`。（您必须将 DataTable 转换为浮点类型，因为您不能`NaN`在整数数组中使用。）

# java - 替换空行和空格java

> ID：11889478
> 
> 赞同：-1
> 
> 时间：2012-08-09T18:12:54.113
> 
> 标签：java, lines

我有一个类似下面的 java 字符串，它有多行和空格。需要将它们全部删除，使它们成为一行。

这些是 xml 标签，编辑器不允许包含小于符号

```
<paymentAction>  

           Authorization

</paymentAction> 
```

应该成为

```
<paymentAction>AUTHORIZATION</paymentAction> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:16:25.177

Calling `theString.replaceAll("\\s+","")` will replace all whitespace sequences with the empty string. Just be sure that the text between the tags doesn't contain spaces too, othewerise they'll get removed too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:19:05.607

您本质上想要将您拥有的 XML 转换为[Canonical Form](http://en.wikipedia.org/wiki/Canonical_XML)。以下是一种方法，但它需要您使用该库。如果您不想依赖外部库，那么您的另一个选择是使用 XSLT。

Apache XML Security 项目中的[Canonicalizer类：](http://santuario.apache.org/Java/api/org/apache/xml/security/c14n/Canonicalizer.html)

注意：通常不建议处理非 xml 感知 API (String.replaceAll())，因为您最终会处理特殊/异常情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:23:04.387

这是一个开始。可能还不够，但应该朝着正确的方向发展。

```
xml.replaceAll(">\\s*", ">").replaceAll("\\s*<, "<"); 
```

但是，我想说必须有一种方法可以从 XML 创建文档，然后按照 Pangea 的建议以规范的形式对其进行序列化。

# claims-based-identity - 如何使用 Thinktecture.IdentityServer.45 在令牌中返回多个身份？

> ID：11889480
> 
> 赞同：3
> 
> 时间：2012-08-09T18:13:08.933
> 
> 标签：claims-based-identity, sts-securitytokenservice, jwt, thinktecture-ident-model, thinktecture-ident-server

在[Thinktecture.IdentityModel.45](https://github.com/thinktecture/Thinktecture.IdentityModel.45)库中，我可以`Microsoft.IdentityModel.Claims.ClaimsIdentityCollection`通过执行以下操作来获得：

```
 Dim handler = New JsonWebTokenHandler()
 handler.Configuration = config ' set elsewhere
 Dim identities = handler.ValidateToken(handler.ReadToken(token)) 
```

我们有一个系统，用户可以在其中登录，然后选择他们所属的组织环境。每个上下文都应该代表令牌中可用的内容（每个组织的一个身份和一组特定声明）。如何让[Thinktecture.IdentityServer.45](https://github.com/thinktecture/Thinktecture.IdentityServer.45)返回包含多个身份的令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:35:21.263

WIF 通常不是为此而设计的。并且只有某些令牌类型完全支持这一点。

# terminal - 来自终端的命令“subl”不起作用

> ID：11889484
> 
> 赞同：41
> 
> 时间：2012-08-09T18:13:22.663
> 
> 标签：terminal, sublimetext2, osx-mountain-lion

我是 Mac 新手（Mountain Lion）并尝试为终端设置“subl”命令，如下所述：

> 第一个任务是创建一个到 subl 的符号链接。假设您已将 Sublime Text 2 放在 Applications 文件夹中，并且您的路径中有 ~/bin 目录，您可以运行：
> 
> ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/bin/subl

但它不起作用。我现在在我的用户下有一个文件夹 /bin/ ，这个文件夹包括一个别名。但是当我在`subl --help`终端内提示时，我得到了错误`-bash: subl: command not found`

有人可以帮助我吗？

KR & thx, 费边

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-05-06T00:44:52.027

将目录更改为：

```
/usr/local/bin 
```

然后运行它：

```
ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" subl 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-09T19:00:12.723

我现在找到了解决方案 - RVM 有问题。解决方法是输入命令

```
ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/.rvm/bin/subl 
```

进入终端。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-05-20T09:37:45.790

[Sublime Text 3](https://www.sublimetext.com/3)发生在我身上。

这个符号链接对我有用，我只需要将符号链接目标更改为**/usr/local/bin/subl**

```
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl 
```

解决方案来源[Paul Byrne 在这里回答](https://stackoverflow.com/questions/26931544/subl-command-not-working-properly?rq=1)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-01-04T22:32:21.130

使用[Homebrew](http://brew.sh/)安装 Sublime 通常会自动创建正确的符号链接。

```
brew install Caskroom/cask/sublime-text 
```

然后可以像这样访问 Subl：

```
# Open Sublime at current directory
subl . 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-25T02:04:26.123

为这个问题选择的解决方案是将 subl 符号链接放在 ~/.rvm/bin 文件夹中，这绝对不是通用解决方案，因为该目录是他安装的程序的一部分。

尽管路径中的任何目录都可以使用，但最常见的解决方案是在主文件夹中创建一个 bin 目录，通过放入`export PATH=$PATH:~/bin`.bash_profile 将其设置在路径中，然后使用这个新路径运行原始问题中所示的链接命令.

过去，通常将 subl 符号链接放在 /usr/local/bin 中，但从 10.2 版开始，此目录在 OSX 中不再存在，并且 /usr/local 目录不再位于默认路径中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-11-07T17:49:55.137

# **为 MAC OSX Mavericks 解决了问题！**

我在这个 GitHubGist 上找到了这个答案： [https ://gist.github.com/artero/1236170](https://gist.github.com/artero/1236170)

## 从 Mac OS X 终端启动 Sublime Text 2

```
ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/local/bin/sublime 
```

这是我发现澄清了许多 StackOverflow 响应仅暗示但未明确解释的部分：

> 现在让我们检查一下是否一切都会顺利进行。输入这个：
> 
> 打开 ~/.bash_profile
> 
> （在某些情况下，配置文件名为 ~/.profile）
> 
> 您应该在文件的顶部看到以以下开头的一行：export PATH=
> 
> 这包含当您在终端中键入命令时将为可执行二进制文件查找的所有目录。由于我们在 /usr/local/bin 目录中创建了一个指向 subl 的符号链接，称为 sublime，让我们检查该目录是否列在同一行。
> 
> 如果是，那就完美了。我们继续吧。如果没有，只需像这样添加并保存文件：
> 
> 导出 PATH=/usr/local/bin:(...)
> 
> 注意：此示例中的“(...)”表示将在同一行列出并用冒号分隔的其他文件夹。
> 
> 如果您的 bash_profile 中尚未设置 PATH，则可以键入：
> 
> 导出 PATH=/usr/local/bin:$PATH
> 
> 如果必须将 /usr/local/bin 添加到 PATH，请在继续之前运行以下命令：
> 
> 源〜/ .bash_profile
> 
> 这将使用新添加的目录重新加载您的 .bash_profile。
> 
> 测试
> 
> 打开终端窗口并运行：
> 
> 崇高的文件名（用实际文件名替换“文件名”）

希望这也有助于其他人澄清。目前（2014 年秋季）使用 Mac OSX Mavericks。干杯

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-08-16T15:34:54.797

如果你只是想让**命令使用 sublime text 打开文件**，并且你不想将它用作所有命令的默认编辑器，为什么不给你的`~/.bash-profile`?

```
alias subl="open -a 'Sublime Text'" 
```

这将适用于打开文件和目录

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-08-31T21:37:49.647

在带有 OSX Yosemite 10.10.5 和 sublime text 3 Build 3083 的 MAC 上遇到了同样的问题！

将 git 配置为满足上述要求可以完美地使用：

```
git config --global core.editor "/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl -n -w" 
```

并测试它是否适用于：

```
git config -e 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-13T13:26:39.257

它适用于 Mac OSX 10.8.2，**echo $PATH**显示正确链接的 subl 符号链接，如本文所述。Sublime Text 2 页面上的其他建议似乎不适用于新 Mac

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-23T07:21:13.260

我发现 subl 有一个别名。键入`alias`以查看所有已定义的别名。找到源并将其注释掉，或使用`unalias subl`取消设置。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-26T13:12:30.360

对于 .bashrc 或 .zshrc

```
alias subl="open . -a /Applications/Sublime\ Text.app" 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-15T06:05:26.810

Catalina 的自动沙盒功能似乎破坏了`subl`命令。

使用以下别名作为替代

```
alias subl="open $1 -b com.sublimetext.3" 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-04-13T00:04:46.257

在`$ subl .`没有为我工作之后，

我试过`$ bundle exec subl .`了，它奏效了。

**解决方案：输入`$ bundle exec subl .`，它应该可以工作。**（显然，省略了 $）

# mercurial - 如何找到将我的变更集移动到另一个分支的合并？

> ID：11889485
> 
> 赞同：3
> 
> 时间：2012-08-09T18:13:25.877
> 
> 标签：mercurial

几个月前，我在默认分支的一个文件中进行了更改。今天我们发现更改以某种方式合并到另一个分支中。当我`hg log`针对该文件运行时，我只看到原始变更集。我没有看到该变更集是如何进入分支的。

在分支之间合并时，我可以传递什么 revset 查询`hg log`来跟踪变更集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T06:53:03.053

如果有问题的变更集位于命名分支上，您可以使用`hg log -r 'descendants(<the_rev>) and branch(default)'`，并且显示的第一个变更集应该是合并。

# c# - 在 DTO 上使用身份验证过滤器时电线类型无效

> ID：11889490
> 
> 赞同：3
> 
> 时间：2012-08-09T18:13:49.557
> 
> 标签：c#, protobuf-net, servicestack

> 线型无效；这通常意味着您在没有截断或设置长度的情况下覆盖了文件；看到[使用 Protobuf-net，我突然得到一个关于未知线型的异常](https://stackoverflow.com/q/2152978/23354)

我刚刚将`[Authenticate()]`过滤器添加到我的 DTO 中：

```
[RestService("/tr/file/")]
[RestService("/tr/file/{Path*}")]
[DataContract]
[Authenticate()]
public class File
{
    [DataMember(Order = 1)]
    public string Path { get; set; }
} 
```

我得到了那个错误。我已经阅读了建议的链接，但没有任何关于它如何影响身份验证的提示。我的第一个想法是用户名/密码字段没有`(Order=N)`. 我使用的`ProtoBufServiceClient`应该是错误和标签显而易见的。

以前有人遇到过这种情况，我应该尝试什么来解决？

这是我的 Get() 服务方法：

```
public override object OnGet(TRServiceLib.Types.File request)
{
    if (string.IsNullOrEmpty(request.Path))
        throw new ArgumentNullException("File path cannot be empty.");

    string path = System.IO.Path.Combine(this.Config.RootDirectory, Utils.GetSafePath(request.Path));

    System.IO.FileInfo file = new System.IO.FileInfo(path);
    if (!file.Exists)
        throw new System.IO.FileNotFoundException(request.Path);

    return new FileResponse()
    {
        Name = file.Name,
        Contents = System.IO.File.ReadAllBytes(path)
    };
} 
```

PS：没有`[Authenticate()]`过滤器属性，一切都按预期工作。

# objective-c - ObjC：NSDictionary allKeysForObject *包含*（这可能吗？）

> ID：11889492
> 
> 赞同：1
> 
> 时间：2012-08-09T18:13:56.607
> 
> 标签：objective-c, nsdictionary

我对 Objective-C 很陌生，遇到了 NSDictionary 方法 `allKeysForObject:`。似乎非常有用。但是，我有一个 NSDictionary，它有几个 NSArrays（长度均为 2）并且由 NSStrings 键入。基本上，键是项，数组定义了它们的两个属性。如果我想提取所有具有特定属性的项目名称，可以用类似的东西来完成`allKeysForObject`，还是应该只循环字典并增长一个可变数组（似乎效率低下）。

我会包含一个代码片段，但我觉得这个问题足够概念化，代码不会真正澄清任何事情。哦，什么鬼。这是一些简化的代码：

```
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:[NSArray arrayWithObjects:[NSNumber numberWithInt:1],[NSNumber numberWithInt:2],nil],@"Car",[NSArray arrayWithObjects:[NSNumber numberWithInt:2],[NSNumber numberWithInt:3],nil],@"Boat",nil];
NSLog(@"%@",[dict allKeysForObject:???]); // this is the line I am not at all sure about. 
```

编辑：感谢您到目前为止的回复。不过，我并不清楚我的问题。我正在寻找一种方法来做更一般的事情。我不想检索特定对象的所有键，例如`[1,2]`，但我想在字典中查找所有数组，包括 NSNumber 1 并返回这些键。因此，如果我添加`@"Plane",[NSArray arrayWithObjects:[NSNumber numberWithInt:1],[NSNumber numberWithInt:3],nil]`，我想以某种方式查询 NSNumber 1 并获取`@"Car"`and `@"Plane"`。我感觉这不是这种方法的设计目的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T18:26:56.117

您正在寻找`-keysOfEntriesPassingTest:`...

```
NSArray * selectedKeys = [dict keysOfEntriesPassingTest:^(id key, id obj, BOOL *stop)
                          {
                              return [obj containsObject:[NSNumber numberWithInt:2]];
                          }]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-09T18:24:10.623

在您的示例中，如果您致电

```
[dict allKeysForObject: [NSArray arrayWithObjects: 
                            [NSNumber numberWithInt:2],
                            [NSNumber numberWithInt:3],
                            nil]]] 
```

你应该得到一个只包含 @"Boat" 的数组

# php - FB Open Graph OAuthException: (#3502) og:type 是 website 而不是 namespace:object

> ID：11889493
> 
> 赞同：3
> 
> 时间：2012-08-09T18:13:58.560
> 
> 标签：php, facebook-opengraph

我正在尝试使用 og 向我的网站添加自定义操作和对象。正如我之前搜索过的问题中所述，调试器正确地抓取了网站并确认它是它应该的方式，没有任何错误、警告或异常。

但是，当我使用 php sdk 发布到该对象时，我从 FB 收到此异常：

> OAuthException: (#3502) URL //mypage.com/image/details 上的对象的 og:type 为“网站”。属性 'photo' 需要一个 og:type 'app_prod:photo' 的对象。

[注意我已经删除了所有的“http://”，这样 stackoverflow 就不会将它们呈现为链接]

php sdk 调用：

> $ret_obj = $facebook->api('/me/app_prod:love', 'POST', array(
> 'photo' => '//mypage.com/image/details',
> 'access_token' => $token )) ;

页面的头部如下所示：

> <head prefix="og: //ogp.me/ns# fb: //ogp.me/ns/fb# app_prod: //ogp.me/ns/fb/app_prod#">
> 
> <meta property="fb:app_id" content="APP_ID">
> <meta property="og:type" content="app_prod:photo">
> <meta property="og:url" content="http://mypage. com/image/details">
> <meta property="og:title" content="我喜欢的图片">
> <meta property="og:image" content="http://images.mypage.com/8f9117301e00dbfb.jpg ">
> <meta property="og:description" content="这里是描述">

我仔细检查过的事情：

1.  我有正确的应用程序 ID。

2.  当我使用 facebook 提供的 curl 命令执行该操作时，它可以正常发布。

3.  我的 head 和 meta 标签正是我从 facebook 提供的对象“代码”中复制的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T08:20:17.250

我在这里和 Stackoverflow 上找到[了](https://stackoverflow.com/questions/7975498/submitting-object-to-facebook-via-open-graph-doesnt-work-but-then-works-after)[解决](http://alvinwoon.com/blog/?p=267)方案。

> 该问题通常是由服务器竞争条件引起的——应用程序无法同时处理两个 HTTP 请求。有时当用户执行一个操作并且应用程序立即调用一个 FB 打开图形请求时，可能还没有生成新的对象页面。

```
var openGraphUrl = '/me/' + OG_NAMESPACE + ':' + OG_ACTION + '?' + OG_OBJECT + '=' + siteURL;
var scrapeUrl    = '/?ids='+siteURL+'&scrape=true';
_.setTimeout(function(){
  FB.api(scrapeUrl, 'post',
    function(response) {
      if (!response || response.error) {
        console.log('scrap: '+response.error.message);
      } else {
        FB.api(openGraphUrl, 'post',
          function(response) {
        if (!response || response.error) {
          console.log('OG: '+response.error.message);
        } else {
          console.log('Successful! Action ID: ' + response.id);
            }
          }
        );
      }
    });
}
, 5000); 
```

# regex - 适用于 IE 的美国电话正则表达式

> ID：11889494
> 
> 赞同：0
> 
> 时间：2012-08-09T18:14:00.257
> 
> 标签：regex, internet-explorer-7, phone-number

我一直在使用以下正则表达式进行美国电话号码验证，但发现它在 IE7 中不起作用。我知道前瞻问题，并且能够通过将长度问题移到开头来修复密码验证，但无法弄清楚如何调整电话号码一：

```
/^(?:(?:(\s*\(?([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\)?\s*(?:[.-]\s*)?)([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})$/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:34:31.640

我相信你正在寻找这个正则表达式：

```
/^\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*[.-]?\s*([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*[.-]?\s*([0-9]{4})\s*$/ 
```

# android - 从后台更新 Android Fragment 的 ListView

> ID：11889495
> 
> 赞同：1
> 
> 时间：2012-08-09T18:14:03.080
> 
> 标签：android, asynchronous, android-listview, android-fragments

这几天我一直在寻找，但没有成功，所以我发布了这个问题，希望有人能回答。

设置（使用 android-support-library-v4，修订版 12）：

我有 1 个带有 ViewPager 的主要活动。

我有 1 个片段类，称为 DataFragmentClass，它由一个 ListView 组成。这个片段类从互联网上异步加载数据并将其显示在列表视图中。但是，这个片段类可以加载两种类型的数据，称为 DataTypeA 和 DataTypeB。

我所做的是在我的主要活动中创建这个片段的两个实例，如下所示：

```
Fragment[] mFragmentList = new Fragment[2];
mFragmentList[0] = DataFragmentClass.newInstance(Modes.DataTypeA);
mFragmentList[1] = DataFragmentClass.newInstance(Modes.DataTypeB); 
```

然后我将此数组传递给我的 ViewPager，它工作正常。

创建后，Fragments 将开始异步加载数据：

```
 @Override  
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  

        View view = inflater.inflate(R.layout.genericlistview, container, false);

        DataProvider mDataProvider = new DataProvider(this.getActivity());
        mDataProvider.addListener(mDataResponseAdapter);

        return view;  
    } 
```

第一个数据加载一切正常 - DataTypeA 将加载到 Fragment1，DataTypeB 将加载到 Fragment2。

但是，任何后续加载都会导致数据“溢出”。所有数据（类型 A 和 B）现在都加载到 Fragment2 中。

我已将问题缩小到 ListView 更新。

我要做的是：

```
 Runnable updateListView = new Runnable(){

            @Override
            public void run() {
                adapter.add(myNewData);
                adapter.notifyDataSetChanged();
            }           
        };

    DataFragmentClass.this.getActivity().runOnUiThread(updateListView); 
```

我认为在这些方面出了点问题：

1.  在 UI 线程上发布可运行文件时。
2.  当远程服务器返回数据时。

任何建议都会非常有帮助。谢谢！

# c# - 使用 ASP.NET 和 YoutubeFisher 访问 YouTube，但收到 HTTP 错误 403

> ID：11889500
> 
> 赞同：1
> 
> 时间：2012-08-09T18:14:36.080
> 
> 标签：c#, httpwebrequest, http-headers, json.net

我正在尝试将[YoutubeFisher](http://youtubefisher.codeplex.com/)库与 ASP.NET 一起使用。我制作了一个 HttpWebRequest 来抓取 html 内容，处理比赛以提取视频链接并在网页上显示链接。我设法使它在本地主机上工作。我可以检索视频链接并在 locahost 上下载视频。但是当我将它推送到服务器时，它只有在我从同一服务器发送请求时才有效。如果客户端浏览器访问该页面，客户端可以正常看到链接，但是当单击链接时，客户端会收到 HTTP 错误 403，每次客户端单击链接时，即使链接是正确的。

我的分析是，当服务器使 HttpWebRequest 抓取 HTML 内容时，它也会发送 HTTP 标头。我认为，从 YouTube 服务器发回的 HTML 内容（指向视频文件的链接）只会响应与从服务器发送的 HTTP 标头匹配的请求。因此，当客户端单击链接时，它会使用不同的 HTTP 标头向 YouTube 服务器发送请求。

因此，我正在考虑从客户端获取 HTTP 标头，然后在发出 HttpWebRequest 之前修改服务器 HTTP 标头以包含客户端的 HTTP 标头信息。我不太确定这是否可行。据我所知，HTTP heer 无法修改。

下面是从 YouTubeFisher 库生成 HttpWebRequest 的代码，

```
public static YouTubeService Create(string youTubeVideoUrl)
        {
            YouTubeService service = new YouTubeService();
            service.videoUrl = youTubeVideoUrl;

            service.GetVideoPageHtmlSource();
            service.GetVideoTitle();
            service.GetDownloadUrl();

            return service;
        }

        private void GetVideoPageHtmlSource()
        {
            HttpWebRequest req = HttpWebRequest.Create(videoUrl) as HttpWebRequest;
            HttpWebResponse resp = req.GetResponse() as HttpWebResponse;
            videoPageHtmlSource = new StreamReader(resp.GetResponseStream(), Encoding.UTF8).ReadToEnd();
            resp.Close();
        } 
```

> 客户端浏览页面，但链接存在，但给出 HTTP 403：

![在此处输入图像描述](../Images/bcb00a03f55d89d61a33117463c9ec3e.png)

![在此处输入图像描述](../Images/7eee49c416194d14fe0b103f0a25acef.png)

> 从服务器本身浏览页面，一切都按预期工作：

![在此处输入图像描述](../Images/802e2c8056f02e6eed39d8b9e257318e.png)

那我如何代表客户端发出 HttpWebRequest 呢？我对这个问题的分析正确吗？

谢谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:20:14.220

在过去，我只是假设 youtube 对这些链接进行了编码，以便它们仅适用于原始请求 IP。如果是这样的话，那就更难了。我不知道是否是这种情况，请在沿着这条路线前进之前尝试转发所有标题元素......

想到的唯一可能性是您必须使用 javascript 请求将页面下载到客户端的浏览器，然后将其上传到您的服务器进行处理，或者在 javascript 中进行处理。

或者你可以让客户端通过你的服务器下载视频流，这样你的服务器就会传递数据。这显然会占用大量带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:20:43.980

使用诸如 Charles、Fiddler 甚至 Firebug 之类的 http 监视器来找出在成功案例中从浏览器发送了哪些额外的标头。我怀疑您需要复制一个或多个`accept`,`user-agent`或`referer`.

# ios - 使用 NIB 重用自定义单元

> ID：11889501
> 
> 赞同：1
> 
> 时间：2012-08-09T18:14:41.683
> 
> 标签：ios, uitableview, nib, recycle

嗨，我是 IOS 开发新手，我创建了一个`UITableView`使用在 nib 中创建的自定义单元格的程序。下面是我`ViewController`加载单元格的代码，但是如果我上下滚动 3 次，应用程序会崩溃，因为我认为我没有正确地重用单元格。我四处搜索，但我发现的大部分代码/解决方案似乎已经过时了。我的代码低于任何帮助，非常感谢！

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"CustomCell";
    CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:@"cellIdentifier"];
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        for (id currentObject in topLevelObjects){
            if ([currentObject isKindOfClass:[UITableViewCell class]]){
                cell =  (CustomCell *) currentObject;
                break;
            }
        }
    }
    cell.TITLE.text = [NSString stringWithFormat:@"\"%@\"", [TITLE objectAtIndex:indexPath.row]];
    cell.desc.text = [desc objectAtIndex:indexPath.row];
    cell.votes.text = [votes objectAtIndex:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:04:10.213

更改行

```
CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:@"cellIdentifier"]; 
```

成为

```
CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier: CellIdentifier]; 
```

转到您`CustomCell`在 IB 中的 .xib 文件，查找该`identifier`字段并将其设置为`CustomCell`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-25T00:33:13.367

您可以为 tableView 注册 nib，例如：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"CustomCell";
    CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        [tableView registerNib:[UINib nibWithNibName:@"CustomCell" bundle:nil] forCellReuseIdentifier:cellIdentifier];
        cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    }

    //...

    return cell;
} 
```

# php - MySQL 行数据到 PHP 数组键/值

> ID：11889512
> 
> 赞同：1
> 
> 时间：2012-08-09T18:15:07.040
> 
> 标签：php, mysql, wordpress

所以我正在尝试将一些 Wordpress 与后端集成。他们的 MySQL 架构不是很好，尤其是当您添加 Woocommerce 时。

我想出了以下查询：

```
SELECT wp.* 
FROM   wp_postmeta wp
       INNER JOIN (SELECT post_id 
                   FROM   wp_postmeta
                   WHERE  ( `meta_key` = '_shipping_method' 
                            AND `meta_value` = 'free_shipping' ) 
                           OR ( `meta_key` = '_order_items' 
                                AND `meta_value` LIKE '%search%' )) a 
               ON a.post_id = wp.post_id 
ORDER  BY wp.post_id DESC 
```

在这张桌子上运行[http://i.imgur.com/YBaGq.jpg](http://i.imgur.com/YBaGq.jpg)为某些人选择正确的东西。

现在，当我在 PHP 中对此进行 var_dump 时，它会像这样（截断） - [http://pastebin.com/WR3byT8k](http://pastebin.com/WR3byT8k)

有什么方法可以将其正确映射到数组，以便我可以使用简单的东西，例如：

```
echo $content['_billing_first_name']; 
echo $content['_billing_last_name']; 
```

这将输出：
`John` `Citizen`

请记住，所有内容都是动态的，所以我不能只使用行号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:33:04.210

如果您有一组需要检索的固定元键（不一定是固定顺序），您可以使用类似于数据透视表的技术在查询本身中执行此操作。

```
SELECT 
  post_id,
  MAX(CASE WHEN meta_key = '_billing_first_name' THEN meta_value ELSE NULL END) AS _billing_first_name,
  MAX(CASE WHEN meta_key = '_billing_last_name' THEN meta_value ELSE NULL END) AS _billing_last_name,
  MAX(CASE WHEN meta_key = '_some_other_attribute' THEN meta_value ELSE NULL END) AS _some_other_attribute,
  MAX(CASE WHEN meta_key = '_another_attribute' THEN meta_value ELSE NULL END) AS _another_attribute,
  ...
  ...
FROM wp_post_meta
GROUP BY post_id 
```

这些`CASE`语句确定您要提取的参数并将其分配给列。它们被包装在`MAX()`聚合中，只是为了消除键不匹配时导致的 NULL，将其折叠成单行，每个属性都有列，而不是多行，其中大部分是 NULL 值。

如果做不到这一点（如果您的属性集意外变化），您将需要在代码中进行迭代。不过那会很乱。

### 在 PHP 中：

使用 PHP，如果您有一个要检索的 meta post 键数组，您可以遍历所有行，如果`meta_key`是您想要的，则将其存储`meta_value`到一个数组中：

```
// Assumes your WP query results are already stored into the array $your_db_rows

// Will hold your final processed results
$output = array();
// If you want only a specific set of meta_key names rather than all meta_key names
$keys_you_want = array('_billing_first_name','_billing_last_name','_some_other_attribute');

// Loops over the result set
foreach ($your_db_rows_array as $row) {
  // If the current row holds one of the meta_key you are looking for
  if (in_array($row['meta_key'], $keys_you_want)) {
    // Put it onto the output array using the meta_key as the array key
    $output[$row['meta_key'] = $row['meta_value'];
  }
  // Otherwise do nothing...
}
var_dump($output); 
```

要得到 all `meta_key`，只需省略`in_array()`测试和`$keys_you_want`数组。这会将`meta_key`遇到的每个存储到`$output`.

```
// Loops over the result set for all values of meta_key, not a specific set
foreach ($your_db_rows_array as $row) {
  // Put it onto the output array using the meta_key as the array key
  $output[$row['meta_key'] = $row['meta_value'];
}
var_dump($output); 
```

# javascript - 指定元素 ID 的正确 JavaScript 语法是什么？

> ID：11889513
> 
> 赞同：1
> 
> 时间：2012-08-09T18:15:08.093
> 
> 标签：javascript, html

我有一堆用户输入要从 javascript 存储。我喜欢遍历一些计数器，因为它存储输入而不是一次分配一个。这是指定元素 ID 的正确语法吗？目前它对我不起作用，并抱怨例如 catMaxInput: [Exception: ReferenceError: catMaxInput is not defined]

```
var catInput = [], catMaxInput = [], catCostSFHR = [],  catOccHRStart=[], catOccHREnd =[];
        var z = 1;
        for (var i=0; i<3; i++){
            catMaxInput[i] = (Math.round(parseFloat(document.getElementById("cat\"" + z + "\"Max").value))); 
            z++;
        }

        for (var c=0; c<3; c++){
            catTotalArea[c] = (Math.round(parseFloat(document.getElementById("cat\"" + z + "\"TotalArea").value)));
            z++;
        } 
```

到目前为止，这是表格：

```
<tr>
          <td>CAT 1</td>
          <td><input name="data1Max4" type="text" id="cat1Max" value="20" /></td>
          <td><input name="data1Max7" type="text" id="cat1TotalArea" value="50,000 SF" /></td>
          <td><input name="data1Max10" type="text" id="cat1CostSFHR" value="$ 100.00" /></td>
          <td><input name="data1Max13" type="text" id="cat1OccHRStart" value="6:00am" /></td>
          <td><input name="data1Max16" type="text" id="cat1OccHREnd" value="12:00pm" /></td>
        </tr>
        <tr>
          <td>CAT B</td>
          <td><input name="data2Max5" type="text" id="cat2Max" value="70" /></td>
          <td><input name="data2Max8" type="text" id="cat2TotalArea" value="20,000 SF" /></td>
          <td><input name="data2Max11" type="text" id="cat2CostSFHR" value="$ 50.00" /></td>
          <td><input name="data2Max14" type="text" id="cat2OccHRStart" value="12:00pm" /></td>
          <td><input name="data2Max17" type="text" id="cat2OccHREnd" value="8:00pm" /></td>
        </tr>
        <tr>
          <td>CAT C</td>
          <td><input name="data3Max6" type="text" id="cat3Max" value="100" /></td>
          <td><input name="data3Max9" type="text" id="cat3TotalArea" value="30,000 SF" /></td>
          <td><input name="data3Max12" type="text" id="cat3CostSFHR" value="$ 0.00" /></td>
          <td><input name="data3Max15" type="text" id="cat3OccHRStart" value="8:00pm" /></td>
          <td><input name="data3Max18" type="text" id="cat3OccHREnd" value="6:00am" /></td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:17:07.120

的结果`"cat\"" + i +"\"Max"`是一个值为`i`between的字符串`"`。

您可能需要这样`"cat" + i +"Max"`。

您正在转义并在不需要的地方添加双引号。

```
var catInput = [], catMaxInput = [], catCostSFHR = [],  
                                             catOccHRStart=[], catOccHREnd =[];

for (var i=0; i<3; i++){
  catMaxInput[i] = (Math.round(parseFloat(
                            document.getElementById("cat" + i +"Max").value))); 
}

for (var c=0; c<3; c++){
  catTotalArea[c] = (Math.round(parseFloat(
                      document.getElementById("cat" + c+  "TotalArea").value)));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T18:18:52.097

代替：

```
getElementById("cat\"" + i +"\"Max")
getElementById("cat\"" + c+  "\"TotalArea") 
```

和：

```
getElementById("cat"+i+"Max")
getElementById("cat"+c+"TotalArea") 
```

**更新**：在 ES6 中你可以这样做：

```
getElementById(`cat${i}Max`)
getElementById(`cat${c}TotalArea`) 
```

有更好的方法可以做到这一点：

[如何遍历 javascript 中的表格行和单元格？](https://stackoverflow.com/questions/3065342/how-do-i-iterate-through-table-rows-and-cells-in-javascript)

# javascript - 有人可以向我解释这段 JavaScript/Ajax 代码的作用吗？

> ID：11889516
> 
> 赞同：0
> 
> 时间：2012-08-09T18:15:19.593
> 
> 标签：javascript, ajax

我正在学习 Ajax，我正在学习[这个例子](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_suggest)。这是做什么的？我不明白语法`variable = function(){`如何将函数分配给变量？

```
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:19:05.223

当 readyState 改变时，如果请求完成并且响应准备好（`readyState==4`）并且文档正确加载（HTTP 状态代码`200`= OK！），则将响应文本附加到具有 id 的元素`#txtHint`。

* * *

`onreadystatechange`存储每次`readyState`属性更改时要自动调用的函数（或函数的名称）。

`readyState`保存 XMLHttpRequest 的状态。从 0 到 4 的变化：

*   0：请求未初始化
*   1：服务器连接建立
*   2：收到请求
*   3：处理请求
*   4：请求完成，响应就绪

`status`接受 HTTP 响应代码：

*   200：“好的”
*   404页面不存在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:34:51.970

我知道每个人都在说这是一个回调，但是您提出的问题可以通过将您感到困惑的内容与一些更熟悉的代码进行比较来更好地回答。

```
function myFunction()
{
    ...
} 
```

所以我们知道调用`myFunction()`将运行该代码。

在 Javascript 中，您可以通过多种方式声明函数。这意味着：

```
var myFunction = function()
{
    ...
} 
```

与上面的第一个示例完全相同。它创建一个您可以使用调用的函数`myFunction()`。

将回调添加到您的问题中，我们可以看到

```
xmlhttp.onreadystatechange = function()
{
    ...
} 
```

无非就是为对象 xmlhttp 的 onreadystatechange 属性分配一个函数并包含代码。这意味着每次 xmlhttp 对象发生状态更改时，都会调用函数中的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:58:09.057

我想解决这个评论：`I've never been able to understand callbacks.`

考虑这个类比：

> 您需要租用刚刚在 VHS 上放映的那部电影，所以您打电话给 Blockbuster 并询问服务员是否有副本。可悲的是，他们正忙于与成千上万试图同时租用“迷宫”的大卫鲍伊粉丝打交道，而他没有时间为你查找信息。所以相反，他要你的电话号码。在未来的某个时候，当成群结队的人离开并且他有时间时，他会查找您需要的信息，然后用您提供的号码给您回电。事实证明这部电影已经售罄，所以他建议改为“黑水晶”。

在您的情况下，您正在处理一个需要很长时间才能完成工作的实体，因为它需要与远程服务器通信，因此它本质上会询问您的电话号码，以便在完成后您会被回叫是，与请求的数据。

现在更有意义了吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T18:27:23.830

`onreadystatechange`是一个回调。它在特定事件发生时触发。`onreadystate`当请求就绪状态改变时发生。

简而言之`onreadystate`

```
Stores a function (or the reference of a function) to be called automatically each time the readyState property changes 
```

现在换行 `xmlhttp.readyState==4 && xmlhttp.status==200`

`readyState : Holds the status of the XMLHttpRequest.`

```
 Changes from 0 to 4: 
0: request not initialized 
1: server connection established
2: request received 
3: processing request 
4: request finished and response is ready 
```

并`status`保持状态

```
200: "OK"
404: Page not found 
```

所以`xmlhttp.readyState==4 && xmlhttp.status==200`当响应准备好并且没有问题时条件为真

`xmlhttp.responseText`包含从服务器发送的响应。

因此`document.getElementById("txtHint").innerHTML=xmlhttp.responseText;`，将带有 id 的元素的 HTML 更改`txtHint`为收到的响应。

希望以上都是有道理的！！！

# java - 使用 ORDER BY 和 UNION 进行 ORACLE 查询

> ID：11889518
> 
> 赞同：1
> 
> 时间：2012-08-09T18:15:30.510
> 
> 标签：java, sql, oracle, sql-order-by

我有以下查询，效果很好！

唯一的事情是我需要 DESC 顺序中的结果集，并且我附加到查询末尾的以下 ORDER BY 子句会生成以下 Oracle 错误：

ORA-00933：SQL 命令未正确结束 00933\. 00000 -“SQL 命令未正确结束” *原因：
*操作：行错误：46 列：54

这是查询。同样，此查询有效。只是当我添加以下行时：

```
FINAL_SEARCH order by FINAL_SEARCH.DOC_HDR_ID desc 
```

一切都破裂了。

有任何想法吗？我相信我的 ALIAS 与它有关，但我可能是错的。

询问 -

```
 Select * from ( select DISTINCT(DOC_HDR.DOC_HDR_ID), 
    DOC_HDR.INITR_PRNCPL_ID, 
    DOC_HDR.DOC_HDR_STAT_CD, 
    DOC_HDR.CRTE_DT, 
    DOC_HDR.TTL, 
    DOC_HDR.APP_DOC_STAT, 
    DOC1.DOC_TYP_NM, 
    DOC1.LBL, DOC1.DOC_HDLR_URL, 
    DOC1.ACTV_IND  
    from KREW_DOC_TYP_T DOC1, KREW_DOC_HDR_T DOC_HDR   
    where DOC_HDR.INITR_PRNCPL_ID IN ( '10000000001' )  and 
        ( DOC1.DOC_TYP_NM =  'PO' or  
          DOC1.DOC_TYP_NM = 'POA' or  
          DOC1.DOC_TYP_NM = 'POC' or  
          DOC1.DOC_TYP_NM= 'POPH' or  
          DOC1.DOC_TYP_NM ='PORH' or  
          DOC1.DOC_TYP_NM = 'POR' or  
          DOC1.DOC_TYP_NM = 'PORT' or  
          DOC1.DOC_TYP_NM = 'POSP' or 
          DOC1.DOC_TYP_NM = 'POV') and 
          DOC_HDR.DOC_HDR_STAT_CD!= 'I' and  
          DOC_HDR.DOC_TYP_ID = DOC1.DOC_TYP_ID ) 

    UNION 

    Select DISTINCT DOC_HDR.DOC_HDR_ID, 
            DOC_HDR.INITR_PRNCPL_ID, 
            DOC_HDR.DOC_HDR_STAT_CD, 
            DOC_HDR.CRTE_DT, 
            DOC_HDR.TTL, 
            DOC_HDR.APP_DOC_STAT, 
            DOC1.DOC_TYP_NM, 
            DOC1.LBL, 
            DOC1.DOC_HDLR_URL, 
            DOC1.ACTV_IND 
     FROM KREW_DOC_TYP_T DOC1, 
   KREW_DOC_HDR_T DOC_HDR 
   WHERE DOC1.DOC_TYP_NM = 'PO' AND CAST(DOC_HDR.DOC_HDR_ID AS VARCHAR(14)) = ANY ( 
      Select PPT.FDOC_NBR 
      FROM PUR_PO_T PPT, PL_PURCHASE_LOG_PO_T PPL 
      WHERE PPT.AP_PUR_DOC_LNK_ID = ANY ( 
         Select PRT.AP_PUR_DOC_LNK_ID 
         FROM PUR_REQS_T PRT, 
              KREW_DOC_HDR_T DOC_HDR 
         WHERE CAST(DOC_HDR.DOC_HDR_ID AS VARCHAR(14)) = PRT.FDOC_NBR AND 
           DOC_HDR.INITR_PRNCPL_ID IN ( '10000000001' ) )) FINAL_SEARCH order by FINAL_SEARCH.DOC_HDR_ID desc; 
```

更新 - 我删除了 ALIAS 并在两个查询之后放置了“ORDER BY”语句，它在 SQL Developer 中工作；但是，当我通过使用 Java 生成此查询的 Web 应用程序执行此查询时，我收到一个关于无效符号的 ORACLE 错误。无效符号是用于终止第一个 ORDER BY 语句的分号。它不会在 SQL Developer 中以其他方式工作，但显然当我执行通过 Web 应用程序生成的相同语句时 - 它失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:25:03.683

您需要计算括号 - 合并的两个查询应该在一个括号中 - 然后您的别名和 SELECT * FROM 将起作用。

```
SELECT *
    FROM ( (SELECT DISTINCT (doc_hdr.doc_hdr_id),
                            doc_hdr.initr_prncpl_id,
                            doc_hdr.doc_hdr_stat_cd,
                            doc_hdr.crte_dt,
                            doc_hdr.ttl,
                            doc_hdr.app_doc_stat,
                            doc1.doc_typ_nm,
                            doc1.lbl,
                            doc1.doc_hdlr_url,
                            doc1.actv_ind
              FROM krew_doc_typ_t doc1, krew_doc_hdr_t doc_hdr
             WHERE doc_hdr.initr_prncpl_id IN ('10000000001')
               AND (doc1.doc_typ_nm = 'PO'
                 OR doc1.doc_typ_nm = 'POA'
                 OR doc1.doc_typ_nm = 'POC'
                 OR doc1.doc_typ_nm = 'POPH'
                 OR doc1.doc_typ_nm = 'PORH'
                 OR doc1.doc_typ_nm = 'POR'
                 OR doc1.doc_typ_nm = 'PORT'
                 OR doc1.doc_typ_nm = 'POSP'
                 OR doc1.doc_typ_nm = 'POV')
               AND doc_hdr.doc_hdr_stat_cd != 'I'
               AND doc_hdr.doc_typ_id = doc1.doc_typ_id)
          UNION
          SELECT DISTINCT doc_hdr.doc_hdr_id,
                          doc_hdr.initr_prncpl_id,
                          doc_hdr.doc_hdr_stat_cd,
                          doc_hdr.crte_dt,
                          doc_hdr.ttl,
                          doc_hdr.app_doc_stat,
                          doc1.doc_typ_nm,
                          doc1.lbl,
                          doc1.doc_hdlr_url,
                          doc1.actv_ind
            FROM krew_doc_typ_t doc1, krew_doc_hdr_t doc_hdr
           WHERE doc1.doc_typ_nm = 'PO'
             AND CAST (doc_hdr.doc_hdr_id AS VARCHAR (14)) =
                     ANY (SELECT ppt.fdoc_nbr
                            FROM pur_po_t ppt, pl_purchase_log_po_t ppl
                           WHERE ppt.ap_pur_doc_lnk_id =
                                     ANY (SELECT prt.ap_pur_doc_lnk_id
                                            FROM pur_reqs_t prt,
                                                 krew_doc_hdr_t doc_hdr
                                           WHERE CAST (
                                                     doc_hdr.doc_hdr_id AS VARCHAR (14)
                                                 ) = prt.fdoc_nbr
                                             AND doc_hdr.initr_prncpl_id IN
                                                         ('10000000001'))))
         final_search
ORDER BY final_search.doc_hdr_id DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:26:03.717

我认为您正在使用额外的括号')'

```
 Select * from ( select DISTINCT(DOC_HDR.DOC_HDR_ID), 
    DOC_HDR.INITR_PRNCPL_ID, 
    DOC_HDR.DOC_HDR_STAT_CD, 
    DOC_HDR.CRTE_DT, 
    DOC_HDR.TTL, 
    DOC_HDR.APP_DOC_STAT, 
    DOC1.DOC_TYP_NM, 
    DOC1.LBL, DOC1.DOC_HDLR_URL, 
    DOC1.ACTV_IND  
    from KREW_DOC_TYP_T DOC1, KREW_DOC_HDR_T DOC_HDR   
    where DOC_HDR.INITR_PRNCPL_ID IN ( '10000000001' )  and 
        ( DOC1.DOC_TYP_NM =  'PO' or  
          DOC1.DOC_TYP_NM = 'POA' or  
          DOC1.DOC_TYP_NM = 'POC' or  
          DOC1.DOC_TYP_NM= 'POPH' or  
          DOC1.DOC_TYP_NM ='PORH' or  
          DOC1.DOC_TYP_NM = 'POR' or  
          DOC1.DOC_TYP_NM = 'PORT' or  
          DOC1.DOC_TYP_NM = 'POSP' or 
          DOC1.DOC_TYP_NM = 'POV') and 
          DOC_HDR.DOC_HDR_STAT_CD!= 'I' and  
          DOC_HDR.DOC_TYP_ID = DOC1.DOC_TYP_ID  

    UNION 

    Select DISTINCT DOC_HDR.DOC_HDR_ID, 
            DOC_HDR.INITR_PRNCPL_ID, 
            DOC_HDR.DOC_HDR_STAT_CD, 
            DOC_HDR.CRTE_DT, 
            DOC_HDR.TTL, 
            DOC_HDR.APP_DOC_STAT, 
            DOC1.DOC_TYP_NM, 
            DOC1.LBL, 
            DOC1.DOC_HDLR_URL, 
            DOC1.ACTV_IND 
     FROM KREW_DOC_TYP_T DOC1, 
   KREW_DOC_HDR_T DOC_HDR 
   WHERE DOC1.DOC_TYP_NM = 'PO' AND CAST(DOC_HDR.DOC_HDR_ID AS VARCHAR(14)) = ANY ( 
      Select PPT.FDOC_NBR 
      FROM PUR_PO_T PPT, PL_PURCHASE_LOG_PO_T PPL 
      WHERE PPT.AP_PUR_DOC_LNK_ID = ANY ( 
         Select PRT.AP_PUR_DOC_LNK_ID 
         FROM PUR_REQS_T PRT, 
              KREW_DOC_HDR_T DOC_HDR 
         WHERE CAST(DOC_HDR.DOC_HDR_ID AS VARCHAR(14)) = PRT.FDOC_NBR AND 
           DOC_HDR.INITR_PRNCPL_ID IN ( '10000000001' ) ))) FINAL_SEARCH order by FINAL_SEARCH.DOC_HDR_ID desc; 
```

首先删除最后一个括号形式 where 条件，然后尝试。最后还要加一个括号`) FINAL_SEARCH order by`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:27:12.973

您忘记了一些括号：

```
Select * from ( select DISTINCT(DOC_HDR.DOC_HDR_ID), 
    DOC_HDR.INITR_PRNCPL_ID, 
    DOC_HDR.DOC_HDR_STAT_CD, 
    DOC_HDR.CRTE_DT, 
    DOC_HDR.TTL, 
    DOC_HDR.APP_DOC_STAT, 
    DOC1.DOC_TYP_NM, 
    DOC1.LBL, DOC1.DOC_HDLR_URL, 
    DOC1.ACTV_IND  
    from KREW_DOC_TYP_T DOC1, KREW_DOC_HDR_T DOC_HDR   
    where DOC_HDR.INITR_PRNCPL_ID IN ( '10000000001' )  and 
        ( DOC1.DOC_TYP_NM =  'PO' or  
          DOC1.DOC_TYP_NM = 'POA' or  
          DOC1.DOC_TYP_NM = 'POC' or  
          DOC1.DOC_TYP_NM= 'POPH' or  
          DOC1.DOC_TYP_NM ='PORH' or  
          DOC1.DOC_TYP_NM = 'POR' or  
          DOC1.DOC_TYP_NM = 'PORT' or  
          DOC1.DOC_TYP_NM = 'POSP' or 
          DOC1.DOC_TYP_NM = 'POV') and 
          DOC_HDR.DOC_HDR_STAT_CD!= 'I' and  
          DOC_HDR.DOC_TYP_ID = DOC1.DOC_TYP_ID ) 

    UNION 

    (Select DISTINCT DOC_HDR.DOC_HDR_ID, 
            DOC_HDR.INITR_PRNCPL_ID, 
            DOC_HDR.DOC_HDR_STAT_CD, 
            DOC_HDR.CRTE_DT, 
            DOC_HDR.TTL, 
            DOC_HDR.APP_DOC_STAT, 
            DOC1.DOC_TYP_NM, 
            DOC1.LBL, 
            DOC1.DOC_HDLR_URL, 
            DOC1.ACTV_IND 
     FROM KREW_DOC_TYP_T DOC1, 
   KREW_DOC_HDR_T DOC_HDR 
   WHERE DOC1.DOC_TYP_NM = 'PO' AND CAST(DOC_HDR.DOC_HDR_ID AS VARCHAR(14)) = ANY ( 
      Select PPT.FDOC_NBR 
      FROM PUR_PO_T PPT, PL_PURCHASE_LOG_PO_T PPL 
      WHERE PPT.AP_PUR_DOC_LNK_ID = ANY ( 
         Select PRT.AP_PUR_DOC_LNK_ID 
         FROM PUR_REQS_T PRT, 
              KREW_DOC_HDR_T DOC_HDR 
         WHERE CAST(DOC_HDR.DOC_HDR_ID AS VARCHAR(14)) = PRT.FDOC_NBR AND 
           DOC_HDR.INITR_PRNCPL_ID IN ( '10000000001' ) ))) FINAL_SEARCH order by FINAL_SEARCH.DOC_HDR_ID desc; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T18:34:15.020

消除 ”;” Web 应用程序中用于填充数据集/数据表的符号。

您还可以按块顺序使用列顺序作为别名，例如：

选择.....按 1 asc, 4 desc 排序

# sql - 使用空日期更新所有表

> ID：11889519
> 
> 赞同：0
> 
> 时间：2012-08-09T18:15:30.260
> 
> 标签：sql, sql-server-2008

我得到了这个选择查询的帮助，我用它来获取两列中具有空值的所有表

```
select count(*)
from (
   select LastModifiedDate from Table1
      union all
   select LastModifiedDate from Table2
      union all
   select LastModifiedDate from Table3
) a 
where LastModifiedDate is null 
```

要更新所有三个表，那么有更好的方法吗

```
Update table1
SET LastModifiedDate = GETDATE()
WHERE LastModifiedDate is null

Update table2
SET LastModifiedDate = GETDATE()
WHERE LastModifiedDate is null 
```

等等？抱歉，我将查询拆分为一个查找 CreationDate 和一个查找 LastModifiedDate

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:21:06.247

您想更新三个表，如果其中任一列为 NULL，则将两列设置为当前日期时间。

三个表更新语句就可以了。没有比这更简单的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:31:41.473

是的，有更好的方法。正如 Gordon Linoff 在评论中指出的那样，您可能会用您提出的查询覆盖有效的创建日期。

试试这个：

```
Update table1
SET CreationDate = ISNULL(CreationDate,GETDATE())
  , LastModifiedDate = GETDATE()
WHERE CreationDate is null or LastModifiedDate is null

Update table2
SET CreationDate = ISNULL(CreationDate,GETDATE())
  , LastModifiedDate = GETDATE()
WHERE CreationDate is null or LastModifiedDate is null

Update table3
SET CreationDate = ISNULL(CreationDate,GETDATE())
  , LastModifiedDate = GETDATE()
WHERE CreationDate is null or LastModifiedDate is null 
```

使用`ISNULL`将保留现有`CreationDate`数据。您不想将其用于`LastModifiedDate`，因为您将要修改行，因此该值应该更改。

但是，没有理由尝试重组您的陈述，因为它们没有任何问题。

# xslt - xsl:for-each 的问题

> ID：11889523
> 
> 赞同：2
> 
> 时间：2012-08-09T18:15:58.587
> 
> 标签：xslt

我一定错过了处理 XML 文档的一些基本概念。这是我的源 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Root>
  <Element>visitorNameAlt</Element>
  <Element>visitorScore</Element>
  <Element>visitorTimeouts</Element>
  <Element>Blank</Element>
  <Element>homeNameAlt</Element>
  <Element>homeScore</Element>
  <Element>homeTimeouts</Element>
  <Element>Blank</Element>
  <Element>period</Element>
  <Element>optionalText</Element>
  <Element>flag</Element>
  <Element>Blank</Element>
  <Element>scoreLogo</Element>
  <Element>sponsorLogo</Element>
</Root> 
```

还有我的 XSL 样式表：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" indent="yes"/>

<xsl:template match="/">
    <xsl:for-each select="/Root">
        <xsl:value-of select="position()"/>
        <xsl:value-of select="Element"/>
    </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

我想要的只是从源 XML 文档中提取“元素”名称，并将它们的相对位置放在前面。

我的输出只是“1”，后跟第一个元素，仅此而已。

我是 XSLT 的新手，但已经使用 for-each 成功处理了其他文档。

提前致谢。

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:20:59.030

您正在循环 Root 标签，而不是 Element 标签。试试这个：

```
<xsl:template match="/">
  <xsl:for-each select="/Root/Element">
     <xsl:value-of select="position()"/>
     <xsl:value-of select="."/>
  </xsl:for-each>
</xsl:template> 
```

请注意，您必须将 select 的第二个值更改为“。” 或“文本（）”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:24:18.517

XSLT 不是命令式编程语言。XSLT 处理器依次抓取每个元素并尝试将其与您的样式表相匹配。写这个的惯用方法是*没有*for-each：

```
<xsl:template match="/Root">
    <xsl:apply-templates select="Element"/>
</xsl:template>

<xsl:template match="Element">
    <xsl:value-of select="position()"/>
    <xsl:value-of select="."/>
</xsl:template> 
```

第一个模板匹配根并告诉处理器将样式表应用`Element`到`Root`. 第二个模板匹配这些节点，并输出所需的信息。

# iphone - Adding buttons to custom navigation bar

> ID：11889525
> 
> 赞同：1
> 
> 时间：2012-08-09T18:16:00.007
> 
> 标签：iphone, objective-c, ios

In my viewDidLoad method I have the following:

```
navigBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonSystemItemAction target:self action:@selector(btnClicked:)];
[self.view addSubview:navigBar]; 
```

The button does not show up at all! What am I missing?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:24:37.910

```
// create the navigation bar and add it to the view
UINavigationBar *navigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
[self.view addSubview:navigationBar];

// create a button
UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonSystemItemAction target:self action:@selector(btnClicked:)];

// create a UINavigationItem and add the button in the right hand side
UINavigationItem *navItem = [[UINavigationItem alloc] initWithTitle:nil];
navItem.rightBarButtonItem = button;

// add the UINavigationItem to the navigation bar
[navigationBar pushNavigationItem:navItem animated:NO]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T19:48:35.320

首先阅读：

> 当您将导航栏用作独立对象时，您有责任提供其内容。与其他类型的视图不同，您不直接将子视图添加到导航栏。相反，您使用导航项（UINavigationItem 类的实例）来指定要显示的按钮或自定义视图。导航项具有用于指定导航栏左侧、右侧和中心的视图以及用于指定自定义提示字符串的属性。
> 
> 导航栏管理 UINavigationItem 对象的堆栈。尽管堆栈主要用于支持导航控制器，但您也可以使用它来实现自己的自定义导航界面。堆栈中最顶部的项表示其内容当前由导航栏显示的导航项。您可以使用 pushNavigationItem:animated: 方法将新导航项推送到堆栈上，并使用 popNavigationItemAnimated: 方法将项从堆栈中弹出。为了用户的利益，可以对这两种变化进行动画处理。

所以基本上你需要做的是：

```
[navigBar pushNavigationItem:self.navigationItem animated:NO]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T18:20:53.127

在导航栏上设置按钮。然后你创建一个`BarButtonItem`导航。

```
barbutton=[UIBarButtonItem alloc] ]initWithTitle......
navigation.navigationController.rightBarButton= barbutton; 
```

# linux - Subject Name not showing in my email using mail command

> ID：11889526
> 
> 赞同：2
> 
> 时间：2012-08-09T18:16:01.790
> 
> 标签：linux, shell, unix, solaris, sunos

I am using mail command to send an email. It works fine.

```
echo "Ignore this email" | mail -s "Test Data" DL-host-PD-WAS-TT_Emp@corp.host.com 
```

But the only confusion I have is, in my email I didn't get any subject and it always show as `(no subject)` in my email as I am also specifying subject option in the above command as `-s` but it is not working I guess somehow.

I am running SunOS.

```
bash-3.00$ uname -a
SunOS lvsaishdc3in0001 5.10 Generic_142901-02 i86pc i386 i86pc 
```

And also I am not seeing `To:` list in my email. How can I make this thing works?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:28:21.593

在所有 Solaris 系统上，您不应该使用`"mail"`，而应该使用`"mailx"`. 尝试使用`mailx`. [http://www.cisl.ucar.edu/tcg/consweb/Solaris/mail.html](http://www.cisl.ucar.edu/tcg/consweb/Solaris/mail.html)

像这样修改你的命令 -

```
echo "Ignore this email" | mailx -s "Test Data" DL-host-PD-WAS-TT_Emp@corp.host.com 
```

# javascript - document.documentElement.appendChild() does not work

> ID：11889527
> 
> 赞同：2
> 
> 时间：2012-08-09T18:16:10.273
> 
> 标签：javascript, svg

I tried some simple examples like the following one:

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <script type="text/javascript">
    <![CDATA[

      function test() {
        var svgElement = document.documentElement;
        var tnode = document.createTextNode('thx for the click');
        var t = document.createElement('text');
        t.setAttribute('x','20');
        t.setAttribute('y','32');
        t.setAttribute('class','ext');
        t.setAttribute('id','text1');
        t.appendChild(tnode);
        svgElement.appendChild(t);
      }
    ]]>
    </script>
  </defs>
  <rect width="100" height="100" y="50" x="50" onclick="test();" />
</svg> 
```

This one shows a rectangle and if you click, test() gets executed (see running version [here](http://hala.li/test2.svg)). As I see on the DOM with Firebug, the new element gets actually appended:

![Screenshot of Firebug](../Images/3b81f09f65e92711f52d9245fe96580f.png)

But the error is - it does not get showed! Why does it get appended but not shown? I've spent so much time in this problem, but no idea.

I copied this example out of a SVG workshop and I tried it in Chrome and Firefox.

Please help :/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T18:29:13.600

您需要在 SVG 命名空间中创建元素，即

```
var t = document.createElementNS('http://www.w3.org/2000/svg', 'text'); 
```

# c# - Allowing a user to run multiple copies of the same program

> ID：11889530
> 
> 赞同：1
> 
> 时间：2012-08-09T18:16:19.927
> 
> 标签：c#, visual-studio-2008

My customer has my VS2008 Windows Forms application installed. He wants to be able to run multiple copies of it on the same PC. The first time he selects the program icon, it starts and runs fine. When he tries to start a second version of the same program, nothing happens.

There's no problem with computer resources. The program collects data from a custom USB device. When he wants to collect data from a second device, he wants to start another copy of the application running. There could be > 2 devices attached needing application programs running. In the days of VB6, this wasn't a problem.

Any suggestions short of installing multiple copies of the application?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:24:13.057

这通常通过项目设置来控制。

要解决此问题，请打开项目的属性，选择应用程序节点并确保`Make single instance application`未选中。

# android - 绘制带圆角的 ImageView 时的效率

> ID：11889531
> 
> 赞同：6
> 
> 时间：2012-08-09T18:16:23.570
> 
> 标签：android, graphics, android-custom-view

我有一个`ImageView`用于绘制圆角图像的子类。代码基于[this answer](https://stackoverflow.com/a/3292810/73003)，如下：

```
public class ImageViewRoundedCorners extends ImageView {
    ...
    @Override
    protected void onDraw(Canvas canvas) {
        Bitmap scaledBitmap = Bitmap.createBitmap(getMeasuredWidth(),
                                                  getMeasuredHeight(),
                                                  Bitmap.Config.ARGB_8888); 
        Canvas scaledCanvas = new Canvas(scaledBitmap);
        super.onDraw(scaledCanvas); 
        drawRoundedCornerBitmap(canvas, scaledBitmap, 
                                getMeasuredWidth(), getMeasuredHeight());

        scaledBitmap.recycle();
    }

    protected void drawRoundedCornerBitmap(Canvas outputCanvas, Bitmap input, int w, int h) {
        Bitmap output = Bitmap.createBitmap(w, h, Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        mPaint.reset();
        mPaint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);

        mPaint.setStyle(Paint.Style.FILL);
        canvas.drawPath(mClipPath, mPaint);

        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
        canvas.drawBitmap(input, 0, 0, mPaint);

        outputCanvas.drawBitmap(output, 0, 0, null);
    }
} 
```

使用此代码，图像被绘制成适当的圆角。为了避免前两行的分配`drawRoundedCornerBitmap`，我想直接绘制到`outputCanvas`，这是最初传递给的画布`onDraw`。新的实现如下所示：

```
protected void drawRoundedCornerBitmap(...) {
    mPaint.reset();
    mPaint.setAntiAlias(true);
    outputCanvas.drawARGB(0, 0, 0, 0);

    mPaint.setStyle(Paint.Style.FILL);
    outputCanvas.drawPath(mClipPath, mPaint);

    mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
    outputCanvas.drawBitmap(input, 0, 0, mPaint);
} 
```

出于某种原因，此代码似乎忽略了 Porter-Duff 模式，而只是使用正常（非圆角）角绘制图像。为什么会这样？绘制到`Bitmap`使原始代码工作的中间体有什么意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:19:47.517

创建一个可绘制的 Romain Guy 已经为您完成了这项工作。我们不是链接工厂，但他的博客文章对其进行了广泛的解释，并提供了一种有效的方法。[圆角](http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/)

真正的基本原则是创建一个`BitmapShader`并将其附加到一个对象，该对象以自定义方式`Paint`绘制，您只需将其应用于.`Drawable``Drawable``ImageView`

使用 drawable 意味着 Image 只在画布上绘制一次，这意味着只绘制一次图像，然后 ImageView 所做的只是缩放 drawable。

# tinymce - TinyMCE strip_tags function like php?

> ID：11889533
> 
> 赞同：2
> 
> 时间：2012-08-09T18:16:24.360
> 
> 标签：tinymce

how can I accept just certain tags and strip_tags all others when paste text to editor? just like php's strip_tags function?

and how can I remove all styles from that tags?

input is a string.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-15T01:41:39.927

我有这个功能

```
var strip_tags = function(str,tags,attrs){
    var reg2 = /\s*(\w+)=\"[^\"]+\"/gm;
    var reg = /<\s*(\w+).*?>/gm;
    str = str.replace(reg,function(match, i) {
        var r_ = match;
        var reg_ = /<\s*(\w+).*?>/gm;
        var m_ = reg_.exec(match);
        if(m_!=null){
            if(tags.indexOf(m_[1])>=0){
                r_ = match.replace(reg2,function(match_, i) {
                    var reg2_ = /\s*(\w+)=\"[^\"]+\"/gm;
                    var m = reg2_.exec(match_);
                    if(m!=null){
                        if(attrs.indexOf(m[1])>=0){
                            return match_;
                        }
                    }
                    return '';
                });
            }else{
                r_ = '';
            }
        }else{
            r_ = '';
        }
        return r_;
    });
    var reg3 = /<\/\s*(\w+).*?>/gm;
    str = str.replace(reg3,function(match, i) {
        var r_ = match;
        var reg_ = /<\/\s*(\w+).*?>/gm;
        var m_ = reg_.exec(match);
        if(m_!=null){
            if(tags.indexOf(m_[1])>=0){
                return match;
            }
        }
        return '';
    });
    return str;
};
tinyMCE.init(
    ...
    plugins: "paste...
    paste_preprocess : function(pl, o) {
        var allowed_tags = ['ul','li','b','p','table','tr','td'];
        var allowed_attributes = ['href','colspan','rowspan'];
        o.content = strip_tags(o.content,allowed_tags,allowed_attributes);
    },
    ...
); 
```

# python - Python中嵌套列表的算术运算

> ID：11889537
> 
> 赞同：2
> 
> 时间：2012-08-09T18:16:39.273
> 
> 标签：python, numpy, python-2.7, nested-lists

我试图减去嵌套列表（来自雅虎财经的历史股价数据列表）中的值，但我遇到了问题。我正在尝试简单的减法（即高 - 低），但我无法实现这一点。我可能遗漏了一些关于列表本质的基本知识，但我很难过。

我正在使用的嵌套列表的示例：

```
[['2012-07-31', '16.00', '16.06', '15.81', '15.84', '13753800', '15.8'],
 ['2012-07-30', '16.15', '16.15', '15.90', '15.98', '10187600', '15.9'],
 ['2012-07-27', '15.88', '16.17', '15.84', '16.11', '14220800', '16.1'],
 ['2012-07-26', '15.69', '15.88', '15.62', '15.80', '11033300', '15.8'],
 ['2012-07-25', '15.52', '15.64', '15.40', '15.50', '15092000', '15.5'],
 ['2012-07-24', '15.74', '15.76', '15.23', '15.43', '19733400', '15.4'],
 ['2012-07-23', '15.70', '15.81', '15.59', '15.76', '14825800', '15.7'],
 ['2012-07-20', '15.75', '15.94', '15.68', '15.92', '16919700', '15.9'],
 ['2012-07-19', '15.71', '15.86', '15.64', '15.73', '15985300', '15.7'],
 ...] 
```

我想从第三个“列”中减去第四个“列”并用结果填充另一个列表（顺序很重要。）实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:21:00.607

您可以使用列表推导：

```
from decimal import Decimal
result = [(row[0], Decimal(row[2]) - Decimal(row[3])) for row in data] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:19:13.267

您的第一个问题是您的列表包含字符串而不是数字。如果您想减去数字，您需要将它们转换为数字（例如，`float`在您创建列表时使用）。

似乎您想按分量添加和减去数字，将您的数据视为具有行和列的表。为此，您应该使用[`numpy`](http://numpy.scipy.org/)，这是为此设计的库。您可能还想查看[pandas](http://pandas.pydata.org/)，它是一个基于 numpy 的库，可提供强大的功能，用于按行和列对数据进行切片和切块。（如果您碰巧从文件中读取数据，这些库还提供了一些工具，可以让您读取，例如 CSV 文件，并将数据作为数字和/或日期而不是字符串导入。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:27:50.480

最好的方法是使用`numpy`，python 从未设计用于处理大量数据，`numpy`因为它的相当多的子例程是使用编译为本机二进制文件的其他语言实现的，并且它可以使用加速线性代数真正加快计算速度的库。

这是一个简单的例子：

```
>>> import numpy
>>> values = numpy.random.rand(5, 5) # 5 by 5 matrix with random values
>>> values[:, 3] - values[:, 2] # numpy is 0 index, so the fourth column is 3 and the third is 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T18:38:30.413

在本机 Python 中，如果您想保留嵌套列表（称其为“表”；其中的每个列表都是“行”），那么创建差异列表的简洁、惯用的方法是：

```
differences = [float(row[3]) - float(row[4]) for row in table] 
```

这样`differences[i] == table[i][3] - table[i][4]`。

如果表中的数值数据将被其他代码使用，您可能希望将字符串转换为表中的浮点数：

```
table = [[r[0], float(r[1]), float(r[2]),
         float(r[3]), float(r[4]), r[5], float(r[6])] for r in table] 
```

这样差异表将由

```
differences = [r[3] - r[4] for r in table] 
```

# php - Warning: mysql_result() expects parameter 1 to be resource, boolean given in xxx.php on line 26

> ID：11889540
> 
> 赞同：1
> 
> 时间：2012-08-09T18:16:44.923
> 
> 标签：php

I try to fix it, but i just can not see where the problem is? somebody help me please! Thank you so much

```
function user_exists($email){
    $email = mysql_real_escape_string($email);
    $query = mysql_query("SELECT COUNT('user_id') FROM 'users' WHERE 'email'='$email'");
    return (mysql_result($query, 0) == 1 ) ? true:false; //this is line 26
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:18:41.537

尝试删除查询中字段名和表名周围的引号：

```
$query = mysql_query("SELECT COUNT(user_id) FROM users WHERE email='$email'"); 
```

绝对始终确保您在运行查询后检查返回值，并在出现问题时回显数据库错误消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T18:19:07.973

首先，您不需要在`return`.

这个

```
return (mysql_result($query, 0) == 1); 
```

做同样的事情，不需要处理额外的逻辑。

其次，您的查询使用`'`字段名称。它不是字段名称的单引号，而是一个反引号 (`)。

```
$query = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `email`='$email'"); 
```

**请注意：**您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇 SO 文章](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:19:57.573

mysql_query 出错时返回 false。您应始终检查错误情况并在检测到错误时采取措施

```
function user_exists($email){
    $email = mysql_real_escape_string($email);
    $sql = "SELECT COUNT('user_id') FROM 'users' WHERE 'email'='$email'";
    if(!($query = mysql_query($sql))) die(mysql_error());
    return (mysql_result($query, 0) == 1);
} 
```

# java - JSON Conversion to Java Object

> ID：11889547
> 
> 赞同：2
> 
> 时间：2012-08-09T18:17:09.457
> 
> 标签：java, json, jackson

I was trying to parse the following string from Python into Java Object, but the Java Object that I have created for it shows the properties as `null` I could see the `id` part of it not the other properties.

Please find the Java Class below:

```
public String getId()
{
    return id;
}

public void setId(String id)
{
    this.id = id;
}
@JsonProperty("remote-system-desc")
public String getRemote_system_desc()
{
    return remote_system_desc;
}

@JsonProperty("remote-system-desc")
public void setRemote_system_desc(String remote_system_desc)
{
    this.remote_system_desc = remote_system_desc;
}
@JsonProperty("remote-system-capabilities")
public String getRemote_system_capabilities()
{
    return remote_system_capabilities;
}

@JsonProperty("remote-system-capabilities")
public void setRemote_system_capabilities(String remote_system_capabilities)
{
    this.remote_system_capabilities = remote_system_capabilities;
}

@JsonProperty("remote-chassis-id")
public String getRemote_chassis_id()
{
    return remote_chassis_id;
}

@JsonProperty("remote-chassis-id")
public void setRemote_chassis_id(String remote_chassis_id)
{
    this.remote_chassis_id = remote_chassis_id;
}

public List<ExternalSwitchPort> getPorts()
{
    return ports;
}

public void setPorts(List<ExternalSwitchPort> ports)
{
    this.ports = ports;
}
@JsonProperty("remote-system-name")
public String getRemote_system_name()
{
    return remote_system_name;
}

@JsonProperty("remote-system-name")
public void setRemote_system_name(String remote_system_name)
{
    this.remote_system_name = remote_system_name;
} 
```

> "externalSwitches": [{"id": "00:15:60:00:eb:80", "remote-system-desc": "ProCurve J4904A Switch 2848, revision I.10.77, ROM I.08.07 (/sw/code/build/mako(mkfs))", "remote-system-capabilities": "bridge,router", "remote-chassis-id": "00:15:60:00:eb:80", "ports": [{"remote-port-desc": "33", "id": "enc0:iobay2:X5", "remote-port-id": "33"}], "remote-system-name": "VirtSW Rack9"}, {"id": "00:13:21:dd:35:00", "remote-system-desc": "ProCurve J4904A Switch 2848, revision I.10.77, ROM I.08.07 (/sw/code/build/mako(mkfs))", "remote-system-capabilities": "bridge,router", "remote-chassis-id": "00:13:21:dd:35:00", "ports": [{"remote-port-desc": "19", "id": "enc0:iobay1:X5", "remote-port-id": "19"}], "remote-system-name": "swr5-hpqcorp"}]}

I am not able to find out whether it's due to the data content or because it's not able to properly parse the properties `remote-system-desc` but I have mentioned that in the JSON property.

# android - Create folder in Instrumentation context

> ID：11889548
> 
> 赞同：4
> 
> 时间：2012-08-09T18:17:12.290
> 
> 标签：android, instrumentation, android-testing

I am writing instrumentation tests for my app and want to create a temporary folder to store some files. However, I dont want to do that in the targetContext but rather in the test context.

In other words:

```
// Works, but this creates the folder in the target app.
File dir = getInstrumentation().**getTargetContext()**.getDir("directory", MODE_WORLD_READABLE);  

// Does not work, the exists() returns false.
File dir = getInstrumentation().**getContext()**.getDir("directory", MODE_WORLD_READABLE); 
```

I've tried a bunch of other stuff, it seems as if the `Instrumentation` `context` implementation ignores these calls?

Thoughts?

# php - wordpress integration with codeigniter base functions conflict

> ID：11889551
> 
> 赞同：0
> 
> 时间：2012-08-09T18:17:21.963
> 
> 标签：php, wordpress, codeigniter

I have developed the CRM based web application what i need to do is to integrate the wordpres with my CI first i have the problem when i include the main WP file

```
require('./wp-blog-header.php'); 
```

in my one of the CI view file the error i was getting that function site_url() conflicts this function is the base function of both WP and CI ,although i found a solution to include the WP file in the main index.php file of CI but there is uncertainity too that after this the session library of CI stops working is.

How to show the posts of WP in the footer of my CRM?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:33:10.797

在我的 CodeIgniter 视图中使用 include 或 require 时，我确保我链接到的文件位于 CodeIgniter 应用程序文件夹之外，因为由于一些权限问题，我无法在那里使用文件。我的解决方案是在我的网络目录中保留一个文件夹。您也不能在这里使用 base_url 或 site_url CodeIgniter 函数，因为您想要获取服务器路径而不是文件的网址。所以你可以使用 php 变量`$_SERVER['DOCUMENT_ROOT']`来返回你的 web 目录的根目录。它可能看起来像这样：

```
 require($_SERVER['DOCUMENT_ROOT'].'wp-blog-header.php'); 
```

如果 wp-blog-header.php 在您的网络根目录中，这将起作用。

# r - Convert modified julian date to UTC

> ID：11889553
> 
> 赞同：0
> 
> 时间：2012-08-09T18:17:34.397
> 
> 标签：r, date, zoo, julian-date

I have a large file with about 200000 lines and I'd like to get the file in a way that I can use the zoo package to plot the file and to truncate by date,month and time. The first column is the modified julian date and the second is temperature.

I'd appreciate any help. The file looks like:

```
4812663507.000000,1.76438
4812663512.000000,1.65121
4812663517.000000,1.60362
4812663522.000000,1.51509 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-06T05:13:23.567

从评论中，时间以某种 MDJ 秒为单位，因此您可以使用 Gabor 的提示将其转换为时间索引：

```
library(zoo)
z <- read.zoo("myfile.dat", sep = ",",
              FUN = function(x){as.POSIXct(x,origin='1858-11-17',tz='UTC')}) 
```

其中 1858-11-17 是每个[http://en.wikipedia.org/wiki/Julian_day的 MJD 时代](http://en.wikipedia.org/wiki/Julian_day)

或者，您可以指定原点并添加秒数 - 因为：

```
z <- read.zoo("myfile.dat", sep = ",",
              FUN = function(x){as.POSIXct('1858-11-17',tz='UTC')+x}) 
```

那么您似乎想要及时按各种粒度聚合的数据：

```
plot(aggregate(z,cut(time(z),breaks='year'   ),mean)) 
plot(aggregate(z,cut(time(z),breaks='quarter'),mean)) 
plot(aggregate(z,cut(time(z),breaks='month'  ),mean))
plot(aggregate(z,cut(time(z),breaks='day'    ),mean)) 
plot(aggregate(z,cut(time(z),breaks='hour'   ),mean))
plot(aggregate(z,cut(time(z),breaks='6 min'  ),mean)) 
plot(aggregate(z,cut(time(z),breaks='min'    ),mean)) 
plot(aggregate(z,cut(time(z),breaks='10 sec' ),mean)) 
plot(aggregate(z,cut(time(z),breaks='sec'    ),mean)) 
```

# iphone - 验证从移动（iPhone）应用程序到 ASP.Net Web API 的请求（我的设计请求反馈）

> ID：11889556
> 
> 赞同：50
> 
> 时间：2012-08-09T18:17:51.690
> 
> 标签：iphone, security, authentication, asp.net-web-api, token

我正在设计一个有移动伴侣的网站（最初只有 iPhone）。该网站将是一个 ASP.Net MVC 3 应用程序。我还将有一个 ASP.Net Web API 站点 (MVC 4) 来向 iPhone 应用程序公开服务。iPhone 应用程序将有自己的表单来捕获用户的用户名和密码，并将其发送到 JSON 标头中的 Web API。

我想从一开始就考虑安全性，而不是事后考虑。*无论如何，我都不是安全专家。*我已经进行了大量研究，以了解其他人如何处理来自 Web 服务的移动应用程序客户端的身份验证。我想我已经想出了一个不错的解决方案，它不涉及连接到第三方 oAuths。

我将非常感谢你们任何人可以提供的任何和所有意见、建议、批评和一般 WTF。:)

我最大的担忧是：

1.  确保对 Web API 的调用得到授权
2.  最大限度地降低重放攻击的风险（因此在下面的调用中使用时间戳）

iPhone 应用程序将这样开发：
*两个字符串被硬编码到 iPhone 应用程序中（每个用户的值相同）：*

1.  **应用程序 ID**
    这是一个字符串，用于识别访问 Web API 的客户端类型（iPhone、Android、Windows 手机等）。

3.  **应用程序的哈希加盐**
    这是一个字符串，用于为与用户无关的请求加盐哈希。

*两个字符串存储在 iPhone 应用程序的本地数据库中（每个用户唯一的值）：*

1.  **API 用户访问令牌**
    这是 Web API 在成功验证后提供给客户端的字符串（令牌），允许客户端访问 Web API，而无需在每个请求中发送用户名和密码。

2.  **User's Hashing Salt**
    这是一个字符串，用于对针对已建立用户帐户的请求进行加盐哈希。

iPhone 将通过以下方式调用 Web API：

**API 方法：创建帐户**
客户端发送：

*   新帐户数据（用户名、密码、名字、姓氏等）
*   应用程序 ID
*   UTC 时间戳
*   UTC 时间戳的哈希值 + 应用程序的哈希盐加盐的应用程序 ID

API 返回：

*   新用户的散列盐

    这里的想法是，在创建帐户时，我可以使用应用程序的硬编码盐，因为如果盐泄露（通过反编译或其他方式）不会带来巨大的安全风险。

    但是对于访问和修改用户数据的方法，我将使用仅由该用户拥有的盐，因此攻击者不能使用它来冒充他人。

**API 方法：获取帐户**
（用于获取用户在网站上创建但尚未在 iPhone 上同步的帐户的哈希盐。当用户尝试在 iPhone 上登录并且 iPhone 检测到它有该用户名没有记录。）

客户发送：

*   用户名
*   密码（使用应用程序的哈希盐进行哈希处理）
*   应用程序 ID
*   UTC 时间戳
*   UTC 时间戳的哈希值 + 应用程序的哈希盐加盐的应用程序 ID

API 返回：

*   现有用户的哈希盐

**API 方法：登录（验证）**
客户端发送：

*   用户名
*   密码（使用用户的哈希盐进行哈希处理）
*   应用程序 ID
*   UTC 时间戳
*   UTC 时间戳的哈希值 + 使用用户的哈希盐加盐的应用程序 ID

API 返回：

*   API 用户访问令牌

**API 方法：任何命令（即创建帖子、更新配置文件、获取消息等）**
客户端发送：

*   命令数据
*   API 用户访问令牌
*   应用程序 ID
*   UTC 时间戳
*   UTC 时间戳的哈希值 + 应用程序 ID + API 用户访问令牌用用户的哈希盐加盐

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-24T10:17:39.913

我使用 asp.net mvc 4.0/web api 基本会员资格做到了。您可能会发现它很有帮助。

是的，肯定使用 SSL

[https://github.com/aamir-poswal/Mobile-Apps-Authentication-Authorization-ASP.NET-WEB-MVC-4.0](https://github.com/aamir-poswal/Mobile-Apps-Authentication-Authorization-ASP.NET-WEB-MVC-4.0)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-20T19:56:30.417

在 VS 2013 中，您可以使用“Asp MVC SPA 应用程序”模板生成一个工作实现，该实现在登录时生成 Oauth2 令牌承载并使用 [Authorize] 属性为 WebApi 控制器调用授权。它使用成员资格和实体框架在 SQL Server 中本地存储用户和散列。只需删除您不需要的 asp mvc 部分并保留 WebApi 的 Auth 部分。更多详细信息：http: [//msdnrss.thecoderblogs.com/2013/09/understanding-security-features-in-the-spa-template-for-vs2013-rc/](http://msdnrss.thecoderblogs.com/2013/09/understanding-security-features-in-the-spa-template-for-vs2013-rc/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T20:33:23.567

我的建议

1.  身份验证和授权。在 2 个不同的服务器上构建它（在某些项目中我也使用了 3 个）。反向代理服务器非常适合这一点。在一台服务器上进行身份验证并在另一台服务器上授权。

这是我认为在使用 Web API 的移动安全中最重要的一步。

1.  封装一切。

2.  对所有安全信息使用 SSL。就我而言，我将它用于一切。

3.  对于您的时间戳，请选择您可以获得授权的合适时间。不要把它写得很短，因为网络嗅探器可以访问数据包，您的应用程序会变慢或过长。

如果您想要一个 3 服务器架构 对于您的请求，您还需要一个应用程序密钥，用于生成访问密钥（来自服务器 1）。此访问密钥将验证您的请求，在成功验证后（来自服务器 2），您可以使用该密钥授权来自另一台服务器（服务器 3）的请求

您提到的要求是标准规范。真的看不出有什么问题。

# php - 来自 __construct() 的错误数组值

> ID：11889558
> 
> 赞同：0
> 
> 时间：2012-08-09T18:17:52.583
> 
> 标签：php, facebook

这段代码的目的只是分离配置数据。如果我`$config`直接在 example.php 中使用该数组，则一切正常。但是在下面的代码中，我得到了不同的值。

脸书.php

```
 <?php
    class Facebook extends AppController{
        public  function __construct() {
            $config = array();
            $config['appId'] = '400xxx6'; //YOUR_APP_ID
            $config['secret'] = 'f70f01e76xxx7e'; //YOUR_APP_SECRET
            $config['cookie'] = false;
            return $config;
        }
    }
    ?> 
```

例子.php

```
<?php 
App::import('Config', 'Facebook');

$a = new Facebook();
var_dump($a);
?> 
```

为什么要`$var_dump($a);`返回这样的东西？

```
object(Facebook)[50]
  protected 'appId' => null
  protected 'apiSecret' => null
  protected 'user' => null
  protected 'signedRequest' => null
  protected 'state' => string 'e4ac55f1xxx87a88' (length=32)
  protected 'accessToken' => null
  protected 'fileUploadSupport' => boolean false 
```

我想要的是原始数组。错误是什么？

```
array
  'appId' => string '400xxx6' (length=15)
  'secret' => string 'f70f01e76xxx7e' (length=32)
  'cookie' => boolean false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:25:05.473

我很确定当你这样做时：

```
$a = new Facebook(); 
```

被实例化的类不是你创建的。我相信你使用 Facebook PHP SDK，他们的类名也是`Facebook`. 你有冲突的类名。

将您的班级名称更改为其他类似的名称`FacebookConfig`，您会没事的。

此外，将数组存储在类实例中会更有意义，例如：

```
class FacebookConfig extends AppController{

    public $config = array();

    public function __construct() {
        $this->config = array();
        $this->config['appId'] = '400xxx6'; //YOUR_APP_ID
        $this->config['secret'] = 'f70f01e76xxx7e'; //YOUR_APP_SECRET
        $this->config['cookie'] = false;
    }
} 
```

# entity-framework - 实体框架 - 存储过程

> ID：11889559
> 
> 赞同：0
> 
> 时间：2012-08-09T18:17:54.157
> 
> 标签：entity-framework, stored-procedures

我的存储过程如下所示：

```
create Procedure procLoc
AS
BEGIN
      select 
          pr.name, loc.address
      from 
          Profile pr 
      join 
          Location loc on pr.id = loc.id
END 
```

对于出现的添加功能导入对话框，有以下选项

*   没有任何
*   标量
*   复杂的
*   实体

在这种情况下我会选择哪个选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:25:45.633

由于您的存储过程返回多个值：`pr.name,loc.address`，您将只有 2 个选择 - 复杂或实体。如果您已经有一个使用名称/地址属性映射的实体，您可以选择它，否则选择复杂的。我通常单击`Get Column Information`按钮，然后`Create New Complex type`让它为我生成一个。

# ios - BrightCove 视频在 iPad 中播放时卡住了

> ID：11889561
> 
> 赞同：0
> 
> 时间：2012-08-09T18:17:58.283
> 
> 标签：ios, ios-simulator, brightcove

我有这个用于在网站上显示视频的 java 脚本。该视频在网站上启动并正常播放。但是，当我插入相同的 javascript 并将其放入字符串中并尝试在 iPad 模拟器上加载视频时，它会卡住。难道我做错了什么？

代码

```
NSMutableString *playerString = [[[NSMutableString alloc] init] autorelease];
        [playerString appendString:@"<!-- Start of Brightcove Player --> <div style=\"display:none\"> </div> <!-- By use of this code snippet, I agree to the Brightcove Publisher T and C found at https://accounts.brightcove.com/en/terms-and-conditions/. --> <script language=\"JavaScript\" type=\"text/javascript\" src=\"http://admin.brightcove.com/js/BrightcoveExperiences.js\"></script> <object id=\"myExperience1778612770001\" class=\"BrightcoveExperience\"> <param name=\"bgcolor\" value=\"#FFFFFF\" /> <param name=\"width\" value=\"480\" /> <param name=\"height\" value=\"270\" /> <param name=\"playerID\" value=\"1776746869001\" /> <param name=\"playerKey\" value=\"AQ~~,AAABnWrZAiE~,vOZcyTPVgHpcrcOyFdRZXnunkRSWEVpt\" /> <param name=\"isVid\" value=\"true\" /> <param name=\"isUI\" value=\"true\" /> <param name=\"dynamicStreaming\" value=\"true\" /> <param name=\"@videoPlayer\" value=\"1778612770001\" /> </object> <!-- This script tag will cause the Brightcove Players defined above it to be created as soon as the line is read by the browser. If you wish to have the player instantiated only after the rest of the HTML is processed and the page load is complete, remove the line. --> <script type=\"text/javascript\">brightcove.createExperiences();</script> <!-- End of Brightcove Player -->"];
        NSLog(@"\n------------Script :%@\n-----------------------", playerString);
//videoPlayer is the webview
        [self.videoPlayer loadHTMLString:playerString baseURL:nil]; 
```

![播放器在点击播放按钮后卡在 iPad 中](../Images/4731fd7369dcdadec332e2e20a9e3729.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:59:32.197

我必须提供正确的基本网址......这有效

# android - WebView with BuiltInZoomControls throwing Exceptions and crashing

> ID：11889562
> 
> 赞同：6
> 
> 时间：2012-08-09T18:17:59.397
> 
> 标签：android, android-webview

I am using a WebView with BuiltInZoomControls enabled. I can view the data in WebView properly and also i can use the zoom controls to zoom it. But when i click back to move to previous screen i get Exception and app crashes. ( Other thing it works properly if i don't use zoom controls. i mean zoom controls are enabled in WebView but i have not used, just viewed the WebView content and clicked back.)

WebView:

```
mWebView.getSettings().setBuiltInZoomControls(true);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setPluginsEnabled(true);
mWebView.getSettings().setDomStorageEnabled(true);
mWebView.getSettings().setSupportZoom(true);
mWebView.getSettings().setPluginState(PluginState.ON); 
```

Exceptions:

```
Activity com.web.ui.DetailActivity has leaked window android.widget.ZoomButtonsController$Container@4110c4e0 that was originally added here
.....

FATAL EXCEPTION: main
E/AndroidRuntime(670): java.lang.IllegalArgumentException: Receiver not registered: android.widget.ZoomButtonsController$1@4110c2d0

.... 
```

And onDestroy of Activity i am also adding this:

```
mWebView.getSettings().setBuiltInZoomControls(false); 
```

Any idea what could be the issue. Need help.

Thanks

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-02-11T13:11:55.207

将此添加到您的活动中：

```
@Override
public void finish() {
    ViewGroup view = (ViewGroup) getWindow().getDecorView();
    view.removeAllViews();
    super.finish();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T16:44:07.970

确保你这样做

```
setVisible(false); 
```

在`onDestroy()`您调用 super 或在 webView 对象上调用 destroy() 之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-14T20:07:41.900

我遇到了同样的问题并尝试了给出的解决方案，但是我一直遇到异常。唯一对我有用的代码是

```
public void onDetachedFromWindow(){
    super.onDetachedFromWindow();
    setVisible(false);
} 
```

但是，我仍然不明白为什么`setVisible(false);`在`onDestroy()`. 如果有人知道解释，如果您可以发布/评论，我将不胜感激。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T12:26:14.830

我遇到了同样的问题。我通过在三秒后调用 WebView.destroy() 来修复它（直到缩放控件的动画完成）

```
@Override
    protected void onDestroy() {
   mWebView.postDelayed(new Runnable() {

                @Override
                public void run() {
                    try {
                        mWebView.destroy();
                    } catch (Exception ex) {

                    }
                }
            }, 3000); 
```

# ruby-on-rails-3.2 - 如何在 Active Admin 中为自定义生成的页面添加导出为 csv 选项

> ID：11889565
> 
> 赞同：3
> 
> 时间：2012-08-09T18:18:11.817
> 
> 标签：ruby-on-rails-3.2, activeadmin

我有一个自定义生成的页面，其中列出了数据库记录。例如：假设我列出了所有用户。

如何将下载作为 csv 选项添加到此页面。

```
ActiveAdmin.register_page "My Page" do
  menu :label => "My Page"

  content do
    @user = User.all
    div do
      # view page for listing users
      render '/admin/dashboard/my_users_list/', { :user => @user } 
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T03:26:28.877

ActiveAdmin 已经包含资源的 CSV 格式，请参阅[自定义 CSV 格式](http://activeadmin.info/docs/4-csv-format.html)

> Active Admin 在每个资源的索引屏幕上提供 CSV 文件下载。默认情况下，它将呈现一个包含已注册模型的所有内容列的 CSV 文件。

这意味着，您可以在自定义页面中构建一个指向该已存在路由的链接

```
link_to "User CSV", admin_users_path( :format => :csv ) 
```

# cocoa - MVC 设计：我需要多少个阵列控制器？

> ID：11889566
> 
> 赞同：4
> 
> 时间：2012-08-09T18:18:13.850
> 
> 标签：cocoa, binding, nsarraycontroller

我有一个非常简单的 MVC 设计问题。

我有一个带有一堆属性的类，以及一个展示该类实例的表单。一些类属性是数组——一些是要在一维表视图中呈现的 NSString 数组，有些是要在二维表视图中呈现的子对象数组（每个子对象属性一列）。我实际上不想对任何这些表中的数据做任何事情 - 只是在可滚动的只读表视图中显示内容。

在我第一次尝试绑定时，我添加了一个绑定到类实例的对象控制器。然后，我尝试将每个表视图的每一列绑定到类的“选择”成员，模型键路径指定实例的数组属性（对于二维表，子的成员目的）。我很惊讶这不适用于一维表的列。

接下来，我为*每个*表添加了一个数组控制器，将其绑定到对象控制器的“选择”成员。对于一维表，我将列绑定到没有模型键路径的数组控制器；对于二维表，我使用指定子对象属性的模型键路径将列绑定到数组控制器。这行得通——但是对于一个有七个表的窗口，我有*七个*阵列控制器！这感觉有点矫枉过正，因为这些表除了呈现数据之外没有做任何事情。

我的问题很简单：我的设计是否符合良好的 MVC 实践——我真的*需要*所有这些阵列控制器吗？或者是否有更简单的方法来指定我的绑定（对于一维和/或二维表），这将使我能够消除一些数组控制器？当我在一个对象中有一个字符串数组要显示在一个单列表中时，使用绑定到对象和表的数组控制器感觉有点矫枉过正。

作为一个辅助问题——我真的需要担心过多的阵列控制器吗？它们是我应该自由使用的轻量级对象，还是我应该保存的资源密集型对象，尤其是在像 iOS 这样的有限资源环境中？

# cocos2d-iphone - 使用 CCLayerPanZoom 暂时禁用触摸

> ID：11889579
> 
> 赞同：0
> 
> 时间：2012-08-09T18:18:58.937
> 
> 标签：cocos2d-iphone

我最近在我的项目中添加了 CCLayerPanZoom cocos2d 扩展，并让我的游戏场景像我想要的那样缩放和滚动。现在，当玩家采取某些行动时，我希望能够在他们执行某项操作时暂时禁用平移/缩放，但不知道该怎么做。我四处搜索并在论坛中找到以下代码，但它不起作用或我不知道如何使用它。

有谁知道如何使用不同的代码或下面的代码正确执行此操作？

```
-(void)enableTouches:(BOOL)enable {

    if(enable) {
        [[CCTouchDispatcher sharedDispatcher] addStandardDelegate:self priority:0];
        _panZoomLayer.isTouchEnabled = YES;
        CCLOG(@"LayerPanZoom enabled.");
    } else {
        [[CCTouchDispatcher sharedDispatcher] removeDelegate:self];
        _panZoomLayer.isTouchEnabled = NO;
        CCLOG(@"LayerPanZoom disabled.");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:45:05.077

我终于想通了，我想我会把答案贴在这里分享。我发布的代码不起作用，因为我发回的是 self 而不是 _panZoomLayer。所以这里是让你自己工作的步骤。

1.  如文档所述，将 CCLayerPanZoom 实施到您的项目中。
2.  添加以下代码作为调用新 CCLayerPanZoom 类的方法。

    ```
    -(void)enableTouches:(BOOL)enable {
       if(enable) {
          [[CCTouchDispatcher sharedDispatcher] addStandardDelegate:_panZoomLayer priority:0];
          CCLOG(@"LayerPanZoom enabled.");
       } else {
          [[CCTouchDispatcher sharedDispatcher] removeDelegate:_panZoomLayer];
          CCLOG(@"LayerPanZoom disabled.");
       }} 
    ```

注意：确保将父类的实例作为要删除的委托。

3.  为了重新启用并使其正常运行，您必须在调用重新注册委托之前从 CCLayerPanZoom 类中的数组中删除所有条目。我在 CCLayerPanZoom 类中创建了一个新方法，如下所示，并在上面的 addStandardDelegate 方法之前调用它。

    -(void)removeTouchesFromArray { [self.touches removeAllObjects]; }

然后一切都很好！我花了一段时间来学习如何使用这个扩展，但是一旦你弄清楚了它就完美了。我可以单指平移、双指缩放/平移、设置整个场景的中心位置、限制平移过去的边缘以及设置最小/最大比例。我知道人们对此有很多问题，但它是一个很好的扩展，只是需要一些混乱来理解它。如果您有任何问题，请告诉我。希望这对其他人有帮助。

# c - 如何在运行时查找 MOSEK 符号常量？

> ID：11889587
> 
> 赞同：0
> 
> 时间：2012-08-09T18:19:27.273
> 
> 标签：c, optimization, mosek

大多数将整数值作为参数的 mosek 选项都有一些与之相关的符号常量。例如，MSK_IPAR_CPU_TYPE 可以是 MSK_CPU_POWERPC_G5、MSK_CPU_INTEL_PM 等。这些值是 mosek.h 中定义的宏。但是，我知道必须可以在运行时查找它们，因为预编译的 mosek 可执行文件可以做到这一点。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:04:27.357

我终于想通了...
`MSK_putnaintparam`，`MSK_putnastrparam`例如，其中带有 na 的 put 函数可以让您传入名称。

# java - 选择接口或抽象类

> ID：11889588
> 
> 赞同：4
> 
> 时间：2012-08-09T18:19:30.840
> 
> 标签：java, interface, abstract-class

在一次采访中，有人要求我证明什么时候选择接口，什么时候选择抽象类，以及在什么情况下你会从这两个中选择一个......我已经提出了我对接口的分析，那就是......

> 接口是类型声明或定义多方合同的最佳选择。如果多个程序员在一个项目的不同模块中工作，他们仍然通过定义接口而不是等待实际实现准备好来使用彼此的 API。
> 
> 这为我们在编码和开发方面带来了很大的灵活性和速度。使用接口还可以确保最佳实践，例如“为接口编程而不是实现”，并产生更灵活和可维护的代码。

但是我没有充分的理由来证明抽象类的合理性，请指教..！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-09T18:31:03.760

抽象类用于将多个具体类组合在一个实体下。

例如，以抽象类为例`Animal`。动物不是具体的东西。这是一个动物家族。但它们都有某些共同点，例如，每个都有一个`speak()`选项（好吧，除了 fish 和 sort）。但每个人都以不同的方式实现它。通过这种方式，您可以仅覆盖不同的方法，例如`sleep() or breath()`常见的方法（再次，鱼是不同的 :)）。

另一方面，接口是“动作”的更直接定义。这就是为什么 Java 中的大多数（如果不是全部）接口都以“able”（Comprable、Serializable...）结尾. 例如，一条狗不是 Animable。

基本上，总结起来，我认为最好的定义就是这个。当你有一个类`A is kind of B`和接口时使用抽象类`A can do B`。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T18:22:35.357

当您想要提供部分实现时使用抽象类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T18:26:00.687

*   如果需要，抽象类可以具有默认行为（实现），接口不能。

*   抽象类可以为所有方法或没有方法提供默认行为，而接口则不能。

*   抽象类可以与所有子类共享状态，接口不指定状态。

*   您可以实现*多个*接口，您只能扩展一个（抽象）类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T18:23:34.043

接口声明与实现它的任何东西的合同。这是保证类将包含接口中的方法。

抽象类的相似之处在于它的任何子类也必须实现抽象方法，但您也可以拥有包含代码的工作方法。

我在 Android 编程中经常使用接口进行回调。如果我有很多类似的数据要显示并且只想对实现进行小的更改，我会使用很多抽象类。使用抽象类来减少重复代码，同时仍然有不同的实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T18:26:30.860

您对接口的定义是正确的。

抽象类应该服务于完全不同的目的。例如，假设您正在为动物模拟器实现几个类。'Animal' 定义了几种行为，这些行为可能已经有了基本的实现，但它本身并不是可以实例化的东西。'Mamal' 也是如此，它是 'Animal' 的一个 bubclass。只有一个子类'Tiger'不会是抽象的，但是老虎所做的大部分不是特定于老虎的事情都会在它的抽象超类中实现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-09T18:35:38.007

**1.**一般来说，`Abstract class` **当我们需要强制关闭** `Sub-Class` **from** `Super-Class`的某些功能时，需要 An ，**让子类可以灵活地添加其他功能。**

**例如：**

`Let Car be the Abstract Super-Class, which has 4 Tyres, 1 Steering ,etc...`

`Now the Sub classes like Santro i10, Maruti-800, Mahindr Bolero etc are Sub classes,` `but they need to have 4 Tyres, 1 Steering to be called a car, not they can have a radio` `or not as an additional feature.`

**2.** `Interface`是在java中引入的，因为**没有Multiple Inheritance。**

**3.** `Interface`更多的是**关于提供一个** `role`.

**例如：**

`Let Dog be the Super-Class`.

`Wild Dogs and Pet Dogs are Sub-Classes.`

`Wild Behavior and Pet Behavior are Interfaces`

`Now as both Wild Dog and Pet Dog are dogs, but with different behavious. Then they must` `implement the Wild Behavior or Pet Behavior respectively`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-24T01:55:29.597

当您希望您的类仅在情况需要时实现方法时，您会想要使用抽象类。

一个例子是，如果您有一辆超级汽车，并且您希望您的子级别有车轮的话，他们可以为您提供多个车轮。如果它们是船，您将不需要它们，因此合同将强制您仍然执行，而您可以直接忽略抽象类。

# c# - 如何将包装器写入 TransactionScope

> ID：11889590
> 
> 赞同：3
> 
> 时间：2012-08-09T18:19:33.977
> 
> 标签：c#, design-patterns

嗨，我在我的应用程序的几个地方使用 TransactionScope。像：

```
using (var scope = new TransactionScope())
{
        ToDo1();
        ToDo2();
        scope.Complete();
} 
```

我希望有可能在一个地方禁用我的所有 TransactionScope。

我想像 MyTransactionScope 类之类的东西，我可以在其中定义是否要使用它。

你能给我一个提示如何实现它吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T18:44:47.530

我已经做到了。你不能继承`TransactionScope`，因为它是密封的。相反，您将类包含在`MyTransactionScope`类中。还要实现`IDisposable`，以便您可以在 using 构造下调用它。以及expose`.Complete()`等相关方法。这些方法将在内部调用内部包含的对象。

```
public sealed class MyTransactionScope : IDisposable
{
    TransactionScope _transactionScope = null;

    #region Overloaded Constructors
    public MyTransactionScope()
    {
        _transactionScope = new TransactionScope();
    }

    public MyTransactionScope(Transaction transactionToUse)
    {
        _transactionScope = new TransactionScope(transactionToUse);
    }
    #endregion

    public void Complete()
    {
        _transactionScope.Complete();
    }

    public void Dispose()
    {
        _transactionScope.Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:29:53.120

如果您的意思是我认为的意思，那么您应该能够使用`Suppress`事务范围选项：

```
using (var scope = new TransactionScope())
{
        using(TransactionScope scope2 = new TransactionScope(TransactionScopeOption.Suppress)) {
           ToDo1();
           scope2.Complete();
        }

        // If ToDo2 throws an exception and the transaction is rolled back,
        // ToDo1 will still be committed since it did not participate in the
        // original (ambient) transaction.
        ToDo2();       
        scope.Complete();
} 
```

# sql-server - 试图防止在刷新时重新发布数据

> ID：11889592
> 
> 赞同：0
> 
> 时间：2012-08-09T18:19:47.017
> 
> 标签：sql-server, forms, asp-classic

使用预先存在的代码只是我添加的一个简单补丁

```
//first get the variables
bridge = namef & valuef
//a paranoid double check
if session("gap") = session("oldgap") then session("gap") = "null"
//the actual comparison
if bridge = session("gap") then
 drawbridge = ""
else
 drawbridge = inputscrubber("action")
end if
session("oldgap") = session ("gap")
session("gap") = namef & valuef 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:22:59.910

您应该使用[PRG](http://en.wikipedia.org/wiki/Post/Redirect/Get)（发布/重定向/获取）模式来避免此类问题。

这个想法是，一旦表单发布，您就可以对其进行处理并重定向到*不同*的页面。此时用户可以毫无问题地刷新。

# python - 如何更新数据存储 ListProperty 实体添加新元素（不替换旧元素）？

> ID：11889593
> 
> 赞同：0
> 
> 时间：2012-08-09T18:19:46.553
> 
> 标签：python, google-app-engine, list, datastore

我有这堂课：

```
class Contract(db.Model):
    book_number = db.IntegerProperty(required = True)
    initial_page = db.IntegerProperty(required = True)
    final_page = db.IntegerProperty(required = True)
    contract_type = db.StringProperty(required = True)
    parties = db.ListProperty(int)
    date = db.DateTimeProperty (required = True, auto_now = True, auto_now_add = True)

class ContractingParty(db.Model):
    person = db.ReferenceProperty(Person, required=True, collection_name="party_to_contracts")
    contract = db.ReferenceProperty(Contract, required=True)
    condition = db.StringProperty() 
```

我使用此代码创建一个名为`Contract`which`parties`属性为空列表的实体：

```
 parties = []
    contract_record = Contract(book_number = int(numBook),
                               initial_page = int(numInitialPage),
                               final_page = int(numFinalPage),
                               contract_type = choosed_contract_type,
                               parties = parties)
    contract_record.put() 
```

但是我必须`parties`使用 ContractingPerson 实体的 ID 填充该属性。所以，在代码的其他部分，我更新`parties`了实体的属性`Contract`，这样：

```
contracting_party_record = ContractingParty(person = person_key,
                                                      contract = contract_key,
                                                      condition = get_condition)
contracting_party_record.put()
contracting_party_id = contracting_party_record.key().id()
contract = Contract.get_by_id(contract_id)
contract.parties.append(contracting_party_id)
#contract.parties.extend(contracting_party_id)
contract.put() 
```

但是当我查询数据存储时，这样：

```
parties = db.GqlQuery("SELECT * FROM ContractingParty WHERE contract =:c_key", c_key = contract_key).fetch(20) 
```

我只得到了我创建的最后一个 ContractingParty 实体。似乎`contract.parties.append(contracting_party_id)`正在用新列表替换旧列表。然后，我尝试使用`contract.parties.extend(contracting_party_id)`. 但是，现在，我得到了这个错误：

```
File "C:\Users\Py\Desktop\contract\main.py", line 363, in post
    contract.parties.extend(contracting_party_id)
TypeError: 'long' object is not iterable 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:34:24.077

在像 contract.partys.append(contracting_party_id) 这样的列表上附加项目不会取代以前的列表，它也不应该在你的情况下这样做。

你想要做的是使用`append`而不是`extend`.

虽然`extend`期望像另一个列表一样可迭代，但`append`将一个项目添加到列表中。

```
>>> l = [1,2,3]
>>> l.append(4)
>>> l
[1, 2, 3, 4] 

>>> l = [1,2,3]
>>> l.extend([4,5,6])
>>> l
[1, 2, 3, 4, 5, 6]
>>> 
```

这里的文档：[http ://docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)

# ruby - Ruby gets() 没有返回正确的字符串

> ID：11889594
> 
> 赞同：1
> 
> 时间：2012-08-09T18:19:50.420
> 
> 标签：ruby, if-statement, input, gets

在听到所有关于它的好消息后，我决定今天试一试 Ruby，但到目前为止，它只是让我很难过。很久以前，我在学习 Python 时做了一个“搜索引擎”，它只是将数据存储在一个数组中并检查搜索关键字是否在其中，我一直在尝试在 Ruby 中做同样的事情。

虽然它不像 Python 那样直观，但我让搜索功能正常工作。不过，我在处理用户输入时遇到了麻烦。我想检查输入是否等于*insert*、*search*和*quit*，但它不起作用。我真的不知道如何使用gets，所以我假设这个问题与gets 相关。

```
while true
  puts 'What do you want to do?'
  choice = $stdin.gets

  puts choice # => quit

  if choice == 'quit'
    break
  end
end 
```

***if***语句不起作用。我到底做错了什么？看在上帝的份上，这在***C++***中是微不足道的！

我真的很感激一些帮助。Ruby 对我来说太陌生了……谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T18:21:56.457

我认为获取包括输入末尾的换行符。尝试`gets.chomp`改用

```
irb(main):001:0> input = $stdin.gets
hello
=> "hello\n"
irb(main):002:0> input = $stdin.gets.chomp
hello
=> "hello" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:25:33.180

davidrac 是正确的，你需要砍掉`\n`

[从这里](https://stackoverflow.com/questions/5304055/question-about-gets-in-ruby)引用答案

> 问题是您从用户那里得到一个换行符。当他们输入“y”时，您实际上得到的是“y\n”。您需要使用字符串上的“chomp”方法将换行符剔除，以使其按预期工作

# dynamic - 强类型与静态类型以及弱类型与动态类型之间的区别

> ID：11889602
> 
> 赞同：47
> 
> 时间：2012-08-09T18:20:19.740
> 
> 标签：dynamic, static, strong-typing, weak-typing

据我了解，动态类型与弱类型相同，强类型与静态类型相同，但我不确定我是否正确。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-09T18:32:02.653

## [静态类型与动态类型：](http://en.wikipedia.org/wiki/Type_system#Static_typing)

**静态类型是在编译时进行类型检查。**您必须在代码中为变量定义类型，并且您对数据执行的任何操作都将由编译器检查。

动态类型是在运行时进行类型检查。如果您尝试对不兼容的类型执行操作，而不是在编译代码时出现错误，您将得到运行时错误。但是，您将受益于拥有更多通用函数，因为它们可以为多种数据类型编写一次。

## [强类型与弱类型：](http://en.wikipedia.org/wiki/Strong_and_weak_typing)

**当您具有强类型时，您将只能通过直接操作该数据类型的对象来对数据进行操作。**

弱类型化允许您在不考虑其类型的情况下对数据进行操作。一些语言通过指针来做到这一点。其他语言会在执行操作之前将您的一种类型转换为另一种类型。

我包含的链接有更详细（可能更清晰）的解释。

# ios - 是否可以在 ios 和 android 中使用 haxe nme 构建 opengl 游戏？

> ID：11889606
> 
> 赞同：3
> 
> 时间：2012-08-09T18:20:26.003
> 
> 标签：ios, opengl-es, haxe, nme

我知道 haxe nme 可以在后端使用 opengl 来显示游戏的 2D 精灵，但是是否可以直接从 nme 操作 opengl 来构建跨平台的 ios 和 android 纯 3D opengl 游戏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T01:33:51.637

就在几天前，haxelang Google Group 上出现了这个问题。

来自讨论[是否有任何 3d 引擎在 NME 上工作？](https://groups.google.com/d/msg/haxelang/BMKaQhUyZoo/8cHtOyQb2tEJ)：

> 桌面和移动设备上的 NME 前端渲染器目前使用 OpenGL(ES) 1.x（我认为 Hugh 也在开发即将推出的 OpenGL(ES) 2.x 渲染器）。也就是说，对于 NME 来说，整个显示列表无非就是一个 3D 场景。
> 
> 由此推断，并假设您只针对移动和桌面平台，这几乎意味着您可以在 NME 上轻松使用任何 OpenGL 函数。
> 
> 现在，问题来了：到目前为止，您还没有可以在 NME 上使用的 Haxe 的 opengl 绑定。实现起来应该不难（也许作为 NME 扩展），因为您基本上可以编写一对一的映射，但尚未完成 AFAIK

简短的回答 - 有可能，但尚未实施。如果你想继续让它工作，最好的地方是[Haxe 邮件列表](http://groups.google.com/group/haxelang?hl=en)或[NME 论坛](http://www.haxenme.org/community/forums/)。

# orchardcms - 果园：TinyMce 引发潜在危险的 Request.Form 错误

> ID：11889616
> 
> 赞同：1
> 
> 时间：2012-08-09T18:20:59.537
> 
> 标签：orchardcms

我在自定义模块上使用 TinyMce。在保存时，我得到潜在危险的 Request.Form 错误。

我知道为什么以及这意味着什么，但不知道推荐的解决方案是什么。

我已经找到了

```
 <httpRuntime requestValidationMode="2.0"/> 
```

在我的 Orchard-root 的 web.config 中

这可以安全使用吗

```
[ValidateInput(false)]
public class AdminController : Controller { 
```

在我的控制器之上？

在其他使用 TinyMce 的 Orchard 模块（如 Blog-Types）上如何解决这个问题？

Thnx莱因哈德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:48:16.913

查看 Orchard 核心模块中的 AdminController。完整类型是 Orchard.Core.Contents.Controllers.AdminController。

它具有您提到的属性...

```
[ValidateInput(false)] 
```

所以，只要你小心你接受的东西和你用它做什么，你就可以安全地走这条路。

不过我应该提一下，Orchard 很少需要新的控制器。听起来您应该只将 BodyPart 用于您正在构建的内容。BodyPart 可以使用多种风格。纯文本、html、markdown 以及您想自己实现的任何内容。

# asp.net - 在浏览器的 ASP.NET 应用程序中使用本机 dll（在客户端）

> ID：11889618
> 
> 赞同：1
> 
> 时间：2012-08-09T18:21:01.700
> 
> 标签：asp.net, activex

我们有一个用于电子银行的 ASP.NET 应用程序，我们需要在那里实现一个数字签名 - 以便银行的客户可以向银行发送订单并使用数字签名（使用他们的私钥）对它们进行加密签名。

我有一个本机 dll，其中包含特定的加密功能 - 我们需要在客户端使用这个 dll。

问题是：**如何从网络浏览器调用本机 dll**？

我们可以制作一个 ActiveX 并从 html 页面加载它，并使用 JavaScript 与 ActiveX 进行通信。**ActiveX**可以调用本**机 dll**。这种情况在技术上可行吗？

还有其他选择可以解决这个问题吗？

问候，米哈伊尔

# asp.net - 当在 aspx 中启用特定按钮时，我需要在按下按钮时显示弹出消息

> ID：11889619
> 
> 赞同：0
> 
> 时间：2012-08-09T18:21:02.870
> 
> 标签：asp.net

我正在做一个项目，但我很难做到。我需要在明天之前完成它，所以我需要你的帮助。问题是我有一个网站有一个名为编辑的按钮。用户必须单击该按钮才能向他显示两个按钮，一个称为“保存”，另一个称为“取消”，网页上还有另一个按钮，称为“提交时间到主席”。用户必须先输入小时数并保存，然后按提交按钮。如果用户没有保存并按下提交按钮，弹出消息会告诉他需要先输入小时并保存。这是代码

此代码用于提交按钮

`<asp:Button ID="ButtonSubmitChair" runat="server" Text="Submit Schedule to Chair" SkinID="AspButton" onclick="ButtonSubmitChair_Click"/>`

protected void ButtonSubmitChair_Click(object sender, EventArgs e) { objMs.UpdateStatus("SC", Convert.ToInt32(Session["FacId"]), Convert.ToInt32(Session["TermId"])); DetailsViewMainSchedule.DataBind(); GvTeachingSchedule.DataBind(); GvResearchSchedule.DataBind(); OfficeHoursGridView.DataBind(); GridViewOffCampus.DataBind(); 更新面板1.更新（）；UpdatePaneloffcamp.Update(); 更新面板3.更新（）；//ButtonSubmitChair.Enabled = GetSubmitButtonStatus(); ButtonSubmitChair.Enabled = false; //RZL 添加禁用按钮

```
 string facmail = "";
        string facname = "";

        DataTable dt1 = objF.GetFacultyEmailId(Convert.ToInt32(Session["FacId"]));
        if (dt1.Rows.Count > 0)
        {
            facmail = dt1.Rows[0]["Email"].ToString();
            facname = dt1.Rows[0]["name"].ToString();

        }
        DataTable dt = objF.GetChairEmail(Convert.ToInt32(Session["DeptID"]));
        string chairname = "";
        string chairmail = "";

        if (dt.Rows.Count > 0)
        {

            chairname = dt.Rows[0]["name"].ToString();
            chairmail = dt.Rows[0]["Email"].ToString();
        }
        string FacultyComments = ((TextBox)(DetailsViewMainSchedule.FindControl("TextBoxFCItem"))).Text;
        string ChairComments = ((TextBox)(DetailsViewMainSchedule.FindControl("TextBoxCCItem"))).Text;
        string DeanComments = ((TextBox)(DetailsViewMainSchedule.FindControl("TextBoxDCItem"))).Text;
        if (FacultyComments == "")
            FacultyComments = "No Comments";
        if (ChairComments == "")
            ChairComments = "No Comments";
        if (DeanComments == "")
            DeanComments = "No Comments";

        try
        {
            objM.message(facname, chairname, FacultyComments, ChairComments, DeanComments, chairmail, facmail, "sc");
        }
        catch (Exception ex)
        {
            Response.Redirect("schedule.aspx?" + pageQueryString);
        } 
```

}`

1.  这是编辑 aspx `<asp:TemplateField ShowHeader="False"> <ItemTemplate> <asp:LinkButton ID="LinkButtonEdit" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit" Visible="<%# GetEditStatus() %>"></asp:LinkButton></ItemTemplate><EditItemTemplate> <asp:LinkButton ID="LinkButtonSave" runat="server" CausesValidation="True" CommandName="Update" Text="Save"></asp:LinkButton>&nbsp;<asp:LinkButton ID="LinkButtonCancel" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton></EditItemTemplate><InsertItemTemplate> <asp:LinkButton ID="LinkButtonInsert" runat="server" CausesValidation="True" CommandName="Insert" Text="Insert" onclick="LinkButtonInsert_Click"></asp:LinkButton>&nbsp;<asp:LinkButton ID="LinkButtoncancel" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton></InsertItemTemplate></asp:TemplateField>` 在此处输入代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:29:40.937

如何设置像 Session("isSaved")= true 这样的 Session 变量

当用户点击保存时。提交按钮看起来像

```
if not Session("isSaved")= true then 
    modalForm.Show
else
    'DoSubmit
end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:11:39.680

您可以使用 ModalPopup，只需设置代码隐藏，如果有错误则显示 Popup，否则，提交！

[http://everymanprogrammer.com/index.php/using-the-ajax-modalpopup-a-beginners-guide/](http://everymanprogrammer.com/index.php/using-the-ajax-modalpopup-a-beginners-guide/)

# linux - 如何在Linux中捕获桌面屏幕并在窗口上绘制

> ID：11889621
> 
> 赞同：3
> 
> 时间：2012-08-09T18:21:08.890
> 
> 标签：linux, window, capture, bitblt

我是 linux 新手，我需要将我的 windows 程序移植到 linux 并需要以下帮助。

1.  我需要捕获屏幕。
2.  我需要创建一个覆盖整个屏幕的没有边框和标题的窗口。
3.  我需要在该窗口上绘制捕获屏幕。
4.  我需要以 XX% 的不透明度在窗口上混合黑色图片。

所有这些都可以通过 Windows 上的 GetDC(NULL)、BitBlt() 和 AlphaBlend() 轻松完成。

Linux 看起来很难做这些简单的程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:50:30.227

对于 Linux；你可以随时查看[scrot](http://scrot.sourcearchive.com/documentation/0.8-9/files.html)的源代码——一个小而简单的截图程序。

# php - HTML-PHP 邮件表单 | 隐藏服务器信息

> ID：11889624
> 
> 赞同：0
> 
> 时间：2012-08-09T18:21:26.447
> 
> 标签：php, html, forms

从邮件表单发送邮件时，如何隐藏服务器信息？截图：[https ://dl.dropbox.com/u/46445635/php%20mail.png](https://dl.dropbox.com/u/46445635/php%20mail.png)

邮件表单链接是：blogsoc.org/mail，我的 mail.php 代码是：

```
sorry the code has been deleted 
```

请告诉我必要的更改。并且。我能收到“谢谢！您的邮件已发送”。消息显示在同一页面而不是打开另一个页面？

# r - 在ggplot2中的单个方面注释文本

> ID：11889625
> 
> 赞同：193
> 
> 时间：2012-08-09T18:21:29.203
> 
> 标签：r, ggplot2, facet, facet-wrap, facet-grid

我想使用以下代码在绘图的最后一个方面注释一些文本：

```
library(ggplot2)
p <- ggplot(mtcars, aes(mpg, wt)) + geom_point()
p <- p + facet_grid(. ~ cyl)
p <- p + annotate("text", label = "Test", size = 4, x = 15, y = 5)
print(p) 
```

![在此处输入图像描述](../Images/4a9ca6eb1a6eca5243b40ce783623683.png)

但是这段代码在每个方面都对文本进行了注释。如何仅在一个方面获得带注释的文本？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-08-09T18:34:30.997

通常你会做这样的事情：

```
ann_text <- data.frame(mpg = 15,wt = 5,lab = "Text",
                       cyl = factor(8,levels = c("4","6","8")))
p + geom_text(data = ann_text,label = "Text") 
```

它应该可以在不完全指定因子变量的情况下工作，但可能会引发一些警告：

![在此处输入图像描述](../Images/9c51806036eb3f22d5a18fe2a1019fe3.png)

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2017-12-15T16:42:28.840

这是没有文本注释的图：

```
library(ggplot2)

p <- ggplot(mtcars, aes(mpg, wt)) +
  geom_point() +
  facet_grid(. ~ cyl) +
  theme(panel.spacing = unit(1, "lines"))
p 
```

[![没有文本注释的绘图](../Images/c3f4f5ad9ff5ab253e133f1f9b5e68c5.png)](https://i.stack.imgur.com/0kY7A.png)

让我们创建一个额外的数据框来保存文本注释：

```
dat_text <- data.frame(
  label = c("4 cylinders", "6 cylinders", "8 cylinders"),
  cyl   = c(4, 6, 8)
)
p + geom_text(
  data    = dat_text,
  mapping = aes(x = -Inf, y = -Inf, label = label),
  hjust   = -0.1,
  vjust   = -1
) 
```

[![在边缘绘制带有文本注释的图](../Images/5994af2a3b6aa9737e651c82f0bb1ab8.png)](https://i.stack.imgur.com/x4sj2.png)

或者，我们可以手动指定每个标签的位置：

```
dat_text <- data.frame(
  label = c("4 cylinders", "6 cylinders", "8 cylinders"),
  cyl   = c(4, 6, 8),
  x     = c(20, 27.5, 25),
  y     = c(4, 4, 4.5)
)

p + geom_text(
  data    = dat_text,
  mapping = aes(x = x, y = y, label = label)
) 
```

[![使用手动定位的文本标签绘图](../Images/e314df5c4005872e8fe3e79be0d18192.png)](https://i.stack.imgur.com/Lw7To.png)

我们还可以跨两个方面标记图：

```
dat_text <- data.frame(
  cyl   = c(4, 6, 8, 4, 6, 8),
  am    = c(0, 0, 0, 1, 1, 1)
)
dat_text$label <- sprintf(
  "%s, %s cylinders",
  ifelse(dat_text$am == 0, "automatic", "manual"),
  dat_text$cyl
)
p +
  facet_grid(am ~ cyl) +
  geom_text(
    size    = 5,
    data    = dat_text,
    mapping = aes(x = Inf, y = Inf, label = label),
    hjust   = 1.05,
    vjust   = 1.5
  ) 
```

[![由两个变量刻面](../Images/4d933523a8e1cd1335946060087d3983.png)](https://i.stack.imgur.com/hoZK5.png)

笔记：

*   您可以使用`-Inf`和`Inf`将文本放置在面板的边缘。
*   您可以使用`hjust`和`vjust`来调整文本对齐方式。
*   文本标签数据框`dat_text`应该有一列适用于您的`facet_grid()`或`facet_wrap()`。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2018-09-07T07:14:21.117

如果有人正在寻找一种简单的方法来标记报告或出版物的方面，那么[`egg`](https://rdrr.io/cran/egg/src/R/tag_facet.r)（[CRAN](https://cran.r-project.org/web/packages/egg/)`tag_facet()`）包具有非常漂亮的`tag_facet_outside()`功能。

```
library(ggplot2)

p <- ggplot(mtcars, aes(qsec, mpg)) + 
  geom_point() + 
  facet_grid(. ~ am) +
  theme_bw(base_size = 12)

# install.packages('egg', dependencies = TRUE)
library(egg) 
```

### 里面的标签

**默认**

```
tag_facet(p) 
```

![](../Images/9bf6979cb19d992cb3a04758612b24f9.png)

**注意：**如果您想保留条形文字和背景，请尝试添加[`strip.text`并`strip.background`](https://rdrr.io/cran/egg/src/R/tag_facet.r)返回`theme`或`theme(strip.text = element_blank(), strip.background = element_blank())`从原始`tag_facet()`功能中删除。

```
tag_facet <- function(p, open = "(", close = ")", tag_pool = letters, x = -Inf, y = Inf, 
                      hjust = -0.5, vjust = 1.5, fontface = 2, family = "", ...) {

  gb <- ggplot_build(p)
  lay <- gb$layout$layout
  tags <- cbind(lay, label = paste0(open, tag_pool[lay$PANEL], close), x = x, y = y)
  p + geom_text(data = tags, aes_string(x = "x", y = "y", label = "label"), ..., hjust = hjust, 
                vjust = vjust, fontface = fontface, family = family, inherit.aes = FALSE) 
} 
```

**右上方对齐并使用罗马数字**

```
tag_facet(p, x = Inf, y = Inf, 
          hjust = 1.5,
          tag_pool = as.roman(1:nlevels(factor(mtcars$am)))) 
```

![](../Images/9d1cc81e2ff679434e0769839cd85b1d.png)

**左下对齐并使用大写字母**

```
tag_facet(p, 
          x = -Inf, y = -Inf, 
          vjust = -1,
          open = "", close = ")",
          tag_pool = LETTERS) 
```

![](../Images/6aa65930e75a48defc77707f4b4df2d6.png)

**定义自己的标签**

```
my_tag <- c("i) 4 cylinders", "ii) 6 cyls")
tag_facet(p, 
          x = -Inf, y = -Inf, 
          vjust = -1, hjust = -0.25,
          open = "", close = "",
          fontface = 4,
          size = 5,
          family = "serif",
          tag_pool = my_tag) 
```

![](../Images/c888378db56f61ecd4fb3968c2bc6078.png)

### 在外面标记

```
p2 <- ggplot(mtcars, aes(qsec, mpg)) + 
  geom_point() + 
  facet_grid(cyl ~ am, switch = 'y') +
  theme_bw(base_size = 12) +
  theme(strip.placement = 'outside')

tag_facet_outside(p2) 
```

![](../Images/220f7da3ce12df35d4dca781f9067e67.png)

**编辑：使用**[stickylabeller](https://github.com/rensa/stickylabeller)包添加另一种选择

```
- `.n` numbers the facets numerically: `"1"`, `"2"`, `"3"`...
- `.l` numbers the facets using lowercase letters: `"a"`, `"b"`, `"c"`...
- `.L` numbers the facets using uppercase letters: `"A"`, `"B"`, `"C"`...
- `.r` numbers the facets using lowercase Roman numerals: `"i"`, `"ii"`, `"iii"`...
- `.R` numbers the facets using uppercase Roman numerals: `"I"`, `"II"`, `"III"`...

# devtools::install_github("rensa/stickylabeller")
library(stickylabeller)

ggplot(mtcars, aes(qsec, mpg)) + 
  geom_point() + 
  facet_wrap(. ~ am, 
             labeller = label_glue('({.l}) am = {am}')) +
  theme_bw(base_size = 12) 
```

![](../Images/843413593ada11cecf9e1482e2128aec.png)

^(由[reprex 包](https://reprex.tidyverse.org)创建(v0.2.1))

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-12-12T14:45:05.680

我认为对于上面的答案 lab="Text" 是没用的，下面的代码也可以。

```
ann_text <- data.frame(mpg = 15,wt = 5,
                       cyl = factor(8,levels = c("4","6","8")))
p + geom_text(data = ann_text,label = "Text" ) 
```

但是，如果您想在不同的子图中进行不同的标记，则可以这样：

```
ann_text <- data.frame(mpg = c(14,15),wt = c(4,5),lab=c("text1","text2"),
                       cyl = factor(c(6,8),levels = c("4","6","8")))
p + geom_text(data = ann_text,aes(label =lab) ) 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-01-25T01:19:04.090

稍微扩展 joran 的出色答案，以阐明标签数据框的工作原理。

您可以将“mpg”和“wt”分别视为 x 和 y 坐标（我发现跟踪原始变量名称比重命名它们更容易，如在 Kamil 的同样出色的答案中）。每个标签需要一行，“cyl”列显示每行与哪个方面相关联。

```
ann_text<-data.frame(mpg=c(25,15),wt=c(3,5),cyl=c(6,8),label=c("Label 1","Label 2"))

ann_text
>  mpg wt cyl  label
>  25  3   6   Label 1
>  15  5   8   Label 2

p <- ggplot(mtcars, aes(mpg, wt)) + geom_point()
p <- p + facet_grid(. ~ factor(cyl))
p + geom_text(data = ann_text,label=ann_text$label) 
```

[![带标签的绘图](../Images/e62bd66068f8e81f60e76f1c8e726180.png)](https://i.stack.imgur.com/XFXe9.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-30T18:04:08.650

我不知道`egg`包，所以这里是一个简单的`ggplot2`包解决方案

```
library(tidyverse)
library(magrittr)
Data1=data.frame(A=runif(20, min = 0, max = 100), B=runif(20, min = 0, max = 250), C=runif(20, min = 0, max = 300))
Data2=data.frame(A=runif(20, min = -10, max = 50), B=runif(20, min = -5, max = 150), C=runif(20, min = 5, max = 200)) 
```

```
bind_cols(
Data1 %>% gather("Vars","Data_1"),
Data2 %>% gather("Vars","Data_2")
) %>% select(-Vars1) -> Data_combined 
```

```
Data_combined %>%
  group_by(Vars) %>%
  summarise(r=cor(Data_1,Data_2),
            r2=r^2,
            p=(pt(abs(r),nrow(.)-2)-pt(-abs(r),nrow(.)-2))) %>%
  mutate(rlabel=paste("r:",format(r,digits=3)),
         plabel=paste("p:",format(p,digits=3))) ->
  label_df 
```

```
label_df %<>% mutate(x=60,y=190) 
```

```
Data_combined %>%
  ggplot(aes(x=Data_1,y=Data_2,color=Vars)) +
  geom_point() + 
  geom_smooth(method="lm",se=FALSE) +
  geom_text(data=label_df,aes(x=x,y=y,label=rlabel),inherit.aes = FALSE) + 
  geom_text(data=label_df,aes(x=x,y=y-10,label=plabel),inherit.aes = FALSE) + 
    facet_wrap(~ Vars) 
```

# c# - 使用指针类型从 C# 调用 Delphi DLL 时的 PInvokeStackImbalance

> ID：11889626
> 
> 赞同：1
> 
> 时间：2012-08-09T18:21:29.407
> 
> 标签：c#, delphi, pointers, dll

我正在尝试从 C# 调用在 Delphi 中开发的外部提供的 DLL。但是，在尝试传递 Delphi 类型“指针”的参数时调用函数时，我似乎总是遇到堆栈不平衡错误。

下面是 DLL 的开发者提供的定义：

```
procedure SetSeparator( const aIsEuropean: Pointer ); stdcall; 
  external 'DLLName.dll'; 
```

我在 C# 中的前向声明是：

```
[DllImport(EXPERT_RT_NAME, EntryPoint = "SetSeparator", 
      CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)] 
public static extern void SetSeparator(string strSeparator); 
```

在 C# 中调用它的代码是：

```
string s = "1";
SetSeparator(s); 
```

调用时，收到的错误是：

> 调用 PInvoke 函数 '::SetSeparator' 使堆栈不平衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

调用约定是指定的，所以我很确定没关系。我认为参数是问题？

我尝试使用 IntPtr 更改 PInvoke 编组，并更改参数周围的各种选项。还有另一个（无参数）调用似乎有效（但在我可以用这个和其他几个类似的调用初始化 DLL 之前，我不能确定）。

另外，我有一些电话需要传递一个指针才能接收信息。

希望有人可以提供帮助，因为我已经花了很多时间研究这个问题，尽管跟进了我认为相关的所有内容并且没有选择。

不幸的是，我无法访问 Delphi 代码的源代码。

# php - 如何使 ldap 尊重 php 中的 Active Directory 密码历史记录

> ID：11889633
> 
> 赞同：1
> 
> 时间：2012-08-09T18:21:51.653
> 
> 标签：php, active-directory, passwords, ldap

我有权访问强制执行 5 个密码历史记录限制的 Active Directory。您拥有的最后 5 个密码中的任何密码都不适合设置或重置为您的密码。

我正在使用 php 并尝试使用 ldap 调用来重置用户的密码。我可以使用 ldap_modify 调用很好地重置密码。不幸的是，ldap_modify 根本不关心 Active Directory 的密码历史规则，它会将密码重置为您选择的任何内容，而不会出现警告或错误。

有什么办法让 ldap 尊重这个限制？

我已经研究了一段时间，但没有找到任何可靠的解决方案。非常感谢任何提示或评论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-05T17:46:59.997

最近我遇到了同样的问题，发现[了这篇文章](http://laviefrugale.blogspot.com.br/2013/01/enforcing-active-directory-password.html)。显然，密码修改被认为是管理密码重置，您必须为 AD 指定其他选项以应用其规则。

根据帖子，该控件必须在服务器上可用。它存在于 Windows Server 2008 R2 Service Pack 1 中，并且可以使用此修补程序安装在 2008 R2 中：http: [//support.microsoft.com/ ?id=2386717](http://support.microsoft.com/?id=2386717)

然后在对 php 代码发出修改命令之前配置选项：

```
$ctrl1 = array(
    // LDAP_SERVER_POLICY_HINTS_OID for Windows 2012 and above
    "oid" => "1.2.840.113556.1.4.2239",
    "value" => sprintf("%c%c%c%c%c", 48, 3, 2, 1, 1));

$ctrl2 = array(
    // LDAP_SERVER_POLICY_HINTS_DEPRECATED_OID for Windows 2008 R2 SP1 and above
    "oid" => "1.2.840.113556.1.4.2066",
    "value" => sprintf("%c%c%c%c%c", 48, 3, 2, 1, 1));

if (!ldap_set_option($ds, LDAP_OPT_SERVER_CONTROLS, array($ctrl1, $ctrl2))) {
    error_log("ERROR: Failed to set server controls");
}

$result = ldap_mod_replace($ds, $dn, $entry); 
```

非常感谢帖子作者 bmaupin（找不到他/她的名字）。我决定回答这个问题，因为我在寻找相同问题的解决方案时来到这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:31:41.963

如果 MODIFY 因任何原因失败，目录服务器应在 MODIFY 响应中返回非零结果代码。在违反属性约束的情况下（例如，历史中的密码，或自上次密码更改以来经过的时间不足，或任何其他属性约束违反），目录服务器必须返回[约束违反](https://www.rfc-editor.org/rfc/rfc4511#appendix-A)的整数结果代码(19)。

LDAP 协议不知道服务器实现如何处理密码策略。LDAP 客户端必须使用上述结果代码来确定 LDAP 请求是否成功。也就是说，LDAP 客户端与服务器实现是*隔离的。*

用户条目是否受密码策略 - 或任何其他属性约束确定 - 取决于服务器，而不是协议。如果 MODIFY 请求成功，即使客户端期望它失败，则问题出在服务器端或密码策略的约束。

# iphone - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“executeFetchRequest：错误：获取请求必须具有实体。”

> ID：11889637
> 
> 赞同：4
> 
> 时间：2012-08-09T18:22:09.583
> 
> 标签：iphone, core-data, ios-simulator, ios

应用程序在运行时崩溃。它在模拟器中运行良好，但在 iPhone 上却不行。

8 月 9 日 14:20:44 未知 Mobile[1152]：***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“executeFetchRequest：错误：获取请求必须具有实体。”

我应该寻找什么来确定为什么它在设备上中断但在模拟器上工作？

我在一个地方读到 AppDelegate 中的名称可能不正确，因为它在模拟器中不区分大小写，但对我来说看起来不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:30:54.983

“获取请求必须有一个实体”

您必须使用 Core Data，当您调用时`[fetchRequest setEntity:entity]`，实体可能为零？在调试器中运行以追溯原因。

您应该从 Simulator 中删除您的应用程序，以确保您重新开始并强制 Core Data 构建您的持久存储。这可以解释为什么您在设备上看到与在模拟器中不同的行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T21:26:48.100

检查 CoreData 模型文件是否存在，如果您已更改它，请从设备中删除该应用程序并再次运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T00:00:58.543

确保任何时候您提及您的实体时，您的名称都是正确的。例如，我的实体名称是“锻炼”，而我不小心得到了如下所示的“锻炼”。

```
 NSEntityDescription *workouts = [NSEntityDescription entityForName:@"Workouts" inManagedObjectContext:_managedObjectContext]; 
```

一旦我用“锻炼”代替它，一切都很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-02T06:50:38.250

检查您是否调用了与您在模型中定义的实体名称完全相同的名称，`MyEntity`例如`MyAttributes`

# javascript - 基于位置的Javascript div淡入淡出

> ID：11889645
> 
> 赞同：2
> 
> 时间：2012-08-09T18:23:03.707
> 
> 标签：javascript, function, loops, position

我想单击一个 div 并让它和其他 div 一个接一个地淡出。我希望一个 div 褪色和下一个 div 褪色之间的时间与 div 之间的距离成正比。

所有这些 div 都是更大 div 的子级。

我有可以淡化 div 的代码。我现在正在尝试编写一个函数，该函数将查看每个像素的父 div 的宽度，并在遇到它们时淡化任何 div。

这是javascript：

```
function sweep(){
    var n3_position = #note_3.position();
    for (i=0;i<900;i++){
        if n3_position.left == i {
            fade('note_3');
        }
    }
}
function fade(el){
    setTimeout(function(){
        $(el).fadeOut("slow",function(){
            document.getElmentById(el).style.display="none";
        }); 
    }, 100);
} 
```

这是相关的HTML：

```
<a onclick="sweep()"><div id="note_1"></div></a> 
```

因此，一旦 for 循环变量 i 等于第三个音符左侧的 x 位置，单击第一个音符（div 是音符）应该会导致第三个音符消失。最终，sweep() 将为所有 div 位置创建变量并检查它们中的每一个，但现在，为了测试，它只是这个。父 div 是 900px 宽，所以这就是 for 循环上限的原因。

现在发生的一切都不算什么。

感谢所有帮助。提前感谢您的专家帮助。

-Oijl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:42:48.640

我认为您的第一个功能有一些错误。试试下面的方法，看看它是否更适合你。

```
function sweep(){
    var n3_position = document.getElementById('note_3').offsetLeft;
    for (i=0;i<900;i++){
        if (n3_position == i) {
            fade('note_3');
        }
    }
} 
```

您在循环中的 if 条件周围缺少括号。此外，#note_3 不返回元素，因此它是无效的。

此外，第二个函数中存在一些错误。以下是一些可以帮助您入门的内容：

```
function fade(el){
    setTimeout(function(){
        $('#' + el).fadeOut("slow");
    }, 100);
} 
```

由于您通过 Id 引用元素，因此您缺少所需的“#”。此外，您可能不需要将显示样式更改为 none，因为 fadeOut 方法会为您处理。

# wpf - 在 WPF 中打印和缩放图像

> ID：11889651
> 
> 赞同：1
> 
> 时间：2012-08-09T18:23:28.030
> 
> 标签：wpf, image, printing, scaling

我正在尝试使用 WPF 打印带有标题的图像。

在原始表单中（我从屏幕控件中获取图像，然后从数据库中获取图像），图像大于页面，因此我需要对其进行缩放。

我想要页面顶部的标题（我可能还想在标题中添加更多行），然后缩放图像以适应剩余的页面区域（同时保持纵横比）。我还希望页面根据图像的方向正确定位。

我到目前为止的代码（从各个页面窃取）......

```
PrintDialog printDialog = new PrintDialog();
printDialog.PrintTicket.PageOrientation = this.image.ActualWidth > this.image.ActualHeight ? PageOrientation.Landscape : PageOrientation.Portrait;

if (printDialog.ShowDialog() == true) {

    Size size = new Size(printDialog.PrintableAreaWidth, printDialog.PrintableAreaHeight);
    StackPanel stackPanel = new StackPanel { Orientation = Orientation.Vertical, RenderSize = size };

    TextBlock title = new TextBlock { Text = @"Form", FontSize = 20 };
    stackPanel.Children.Add(title);

    Image image = new Image { Source = this.image.Source, Stretch = Stretch.Uniform };
    image.RenderTransform = new ScaleTransform(1, 1);
    stackPanel.Children.Add(image);

    stackPanel.Measure(size);
    stackPanel.Arrange(new Rect(new Point(0, 0), stackPanel.DesiredSize));

    printDialog.PrintVisual(stackPanel, @"Form image");

} 
```

问题是，图像总是太大，标题中的文本打印不正确（我只看到几条垂直线）。我知道我的问题在于我设置大小和/或缩放的方式，但我就是看不到它。

有什么建议么？

# plugins - TRAC 是否与 MediaWiki 的“CreateBox”有相似之处？

> ID：11889656
> 
> 赞同：0
> 
> 时间：2012-08-09T18:23:39.317
> 
> 标签：plugins, trac

我以前使用过 MediaWiki 出色的[CreateBox](http://www.mediawiki.org/wiki/Extension%3aCreateBox)插件，使页面创建变得非常容易。

本质上，`CreateBox`向用户呈现一些预定义的参数（例如，页面名称可能带有来自当前日期的建议），这些参数将用于填充模板（[PageTemplates](http://trac.edgewall.org/wiki/PageTemplates)是完美的目标）。

**TRAC 是否有等效的插件/功能？**（必须与 0.11.7 一起使用）如果有一个用于创建新 wiki 页面的下拉菜单，并带有`PageTemplate`s 作为选项，那将是非常棒的。

**更新**：答案是用来`ParameterizedPageTemplates`获取`/newpage/`接受`/newpage/?page=Page&template=Template`格式化 URL 的处理程序。然后使用 TRAC 的内置 HTML 处理器创建一个像这样的表单输入

```
{{{
#!html
<form name="input" action="/project/template/newpage">
    <input type="text" name="page" />
    <input type="submit" name="template" value="Template" />
</form>
}}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:00:07.550

我在 Trac 之外做过类似的事情。正如您所提到的，您可以将一个小的 HTML 页面和几行 Javascript 组合在一起来实现一个接口，该接口可以根据用户提供的参数自动重定向到特定的 wiki 页面。您可以在 Trac 外部托管此页面并从 Trac 接口链接到它，而不是尝试在 Trac 内部实现这一点。

例如，我的系统使用类似于`http://myserver/trac`Trac 的 URL，并且我正在托管一个页面，`http://myserver/tools/NewWikiPage`该页面实现了我的“新 wiki 页面”创建界面。为了方便访问，我在 WikiStart 上列出了指向此页面的链接，但如果您愿意，也可以轻松地将其添加到工具栏。

我发现这是最简单的解决方案。很有可能将其包装起来并使其成为 Trac 插件，但出于我的目的，我发现将其作为单独的页面托管就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:31:26.640

最近编写了一个插件，我认为它可以满足您的需求：

[https://github.com/netjunki/trac-NewPageMacro](https://github.com/netjunki/trac-NewPageMacro)

它提供了一个`[[NewPage]]`宏，您可以将其插入到您的 wiki 页面中。它支持 wiki 页面模板的参数、指定父页面和一些其他自定义；它包括在呈现表单之前的权限检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T20:46:51.380

我不知道有一个插件可以提供类似的 CreateBox 体验，但我发现默认的 Trac 行为非常接近。[按照PageTemplates](http://trac.edgewall.org/wiki/PageTemplates)上的说明创建模板后，下次尝试创建新页面时，您会看到类似于以下页面的页面。

在下面的示例中，我只需输入新 URL https:///wiki/WorkFlow 即可创建页面，其中 WorkFlow 是我要创建的新页面。Trac 给了我关于我可能一直在寻找的页面或基于我可用的模板创建新页面的能力的建议。

![在此处输入图像描述](../Images/f70100ef5616ad36275c001a3718cee3.png)

# c# - 使用 C# 的烦人的 Windows 消息框

> ID：11889661
> 
> 赞同：1
> 
> 时间：2012-08-09T18:24:15.103
> 
> 标签：c#, windows, messagebox

当您在应用程序中使用以下代码关闭或重新启动计算机时，Windows 会显示一个带有警告图标的消息框，上面写着“Windows 将在不到一分钟的时间内重新启动”，并且它有一个关闭按钮。有什么办法可以防止这种情况甚至显示？

```
Process.Start("shutdown", "-r"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T18:26:06.720

如果您`shutdown.exe /?`在命令提示符下键入，您将看到所有可用的开关。你会想要`-t`

```
Process.Start("shutdown", "-r -t 0"); 
```

# xcode - Xcode 4 颜色主题在 xcode 4.4.1 中不起作用

> ID：11889664
> 
> 赞同：2
> 
> 时间：2012-08-09T18:24:30.760
> 
> 标签：xcode, xcode4

我想为 xcode 尝试一个新的颜色主题，所以我下载并安装了为 xcode 4 制作的颜色主题。当我转到首选项并单击安装后的任何一个时，它只会显示默认主题。他们不兼容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T22:44:15.153

如果您有 .xccolortheme 主题文件，则需要将其转换为 .dvtcolortheme。

您可以使用此 ruby​​ 脚本轻松转换它：http: [//digitalflapjack.com/blog/2011/jan/24/xcodedpthemes/](http://digitalflapjack.com/blog/2011/jan/24/xcodedpthemes/)

我最近使用这个脚本来转换晨风主题： http: [//www.natestedman.com/post/morrowind-for-textmate-xcode/](http://www.natestedman.com/post/morrowind-for-textmate-xcode/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T17:41:22.910

看起来 Xcode 4.4.1 对自定义颜色主题 (.dvtcolortheme) 使用了不同的格式。

然而，它只是一个带有（一点点）不同标签的 plist，所以我可以通过简单地用 TextEdit 打开两个文件并手动修改复制我从旧 .xccolortheme 获得的值的值来导出我的旧首选项（.xccolortheme）文件。请注意，.dvtcolortheme 格式的颜色有 4 个值 (RGBA)，而不是 .xccolortheme 的 3 个。要获得正确的值，只需使用 1 作为 alpha。

.dvtcolortheme 除了一些不在 .xccolortheme 中的标签。对于那些颜色......好吧，设置你喜欢的颜色（最好使用 Xcode，因为这样你也可以预览）。

# javascript - 如何使用外部接口将参数从 javascript 传递到 as3

> ID：11889667
> 
> 赞同：0
> 
> 时间：2012-08-09T18:25:00.953
> 
> 标签：javascript, actionscript-3, arguments

我找到了如何从 javascript 调用 actionscript，但我也需要传递一些参数（动态），我该怎么做？

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:41:11.207

根据我的经验，您必须调用 flash 对象上的函数。

我使用以下 javascript 函数来获取 flash 对象

```
function GetSWF(id) {
    if (window.document[id] != null)
        if (window.document[id].length == null)
            return window.document[id];
    else
        return window.document[id][1];
    else
    if  (typeof(document[id]) == 'undefined')
        return $('#'+id)[0];
    else
    if (document[id].length == null)
        return document[id];
    else
        return document[id][1];
} 
```

然后调用函数如下

```
var flash = GetSWF('idOfSWF');
if (typeof flash.sendToActionScript === 'function'){
    flash.sendToActionScript(yourObject,orParameter);
} 
```

AS3 如下所示

```
if (ExternalInterface.available){
    ExternalInterface.addCallback("sendToActionScript",receivedFromJavascript);
}
function receivedFromJavascript(myObject:Object,myParameter:String):void{
    // Do something
} 
```

希望这可以帮助。

编辑：

刚刚注意到我在 GetSWF 函数中使用了少量 jQuery。我会看看并尝试删除它。（它的线`return $('#'+id)[0];`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:32:01.870

请试试这个：

```
ExternalInterface.addCallback("sendMsg", generateMsg);

function generateMsg(str):void {
    trace(str);
} 
```

JS：

```
msg = "";
function setMsg(myMsg) {
    msg = myMsg;
    SendDataToFlashMovie(myMsg);
} 
```

# android - PhoneStateListener 是否在 Phonegap 插件中工作？

> ID：11889672
> 
> 赞同：4
> 
> 时间：2012-08-09T18:25:28.813
> 
> 标签：android, phonegap-plugins, phone-state-listener

我正在尝试在 Android 的 phonegap 插件中使用 PhoneStateListener 获取 cdma 信号强度。PhoneStateListener 是否在 Phonegap 插件中工作？或者请让我知道我的代码有什么问题。

```
public void getNetworkSignalStrength()
    {   
        Runnable runnable = new Runnable(){

            @Override
            public void run() {
                // TODO Auto-generated method stub
                TelephonyManager phonyManager  = (TelephonyManager)ctx.getSystemService(Context.TELEPHONY_SERVICE);

                PhoneStateListener mListener = new PhoneStateListener(){
                    @Override
                    public void onSignalStrengthsChanged(SignalStrength signalStrength) {
                        Log.d("PhoneStateListener", "I am here");
                        int strengthAmplitude = signalStrength.getCdmaDbm();
                        cdmaStrength = String.valueOf(strengthAmplitude);
                        super.onSignalStrengthsChanged(signalStrength);
                    }
                };
                phonyManager.listen(mListener,PhoneStateListener.LISTEN_SIGNAL_STRENGTH);  

            }

        };
        this.ctx.runOnUiThread(runnable);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:14:26.997

PhoneStateListener.LISTEN_SIGNAL_STRENGTH 已弃用。请尝试使用 PhoneStateListener.LISTEN_SIGNAL_STRENGTHS..

# ruby-on-rails - 升级到 Rails 3 后 nil:NilClass 的未定义方法“接受”

> ID：11889679
> 
> 赞同：4
> 
> 时间：2012-08-09T18:25:53.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, mysql-5.1

我刚刚将我的 Rails 应用程序从 Rails 2.3.8 升级到 Rails 3.2.7，我遇到了 Activerecord 的问题。

如果我尝试使用 Activerecord 访问我的数据库（例如：Employee.last），我会收到以下错误：

```
NoMethodError: undefined method `accept' for nil:NilClass
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `to_sql'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/connection_adapters/abstract/database_statements.rb:18:in `select_all'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/querying.rb:38:in `find_by_sql'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/explain.rb:40:in `logging_query_plan'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/querying.rb:37:in `find_by_sql'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation.rb:171:in `exec_queries'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation.rb:160:in `to_a'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/explain.rb:33:in `logging_query_plan'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation.rb:159:in `to_a'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation/finder_methods.rb:378:in `find_first'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation/finder_methods.rb:122:in `first'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation/finder_methods.rb:336:in `find_one'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation/finder_methods.rb:312:in `find_with_ids'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation/finder_methods.rb:107:in `find'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/querying.rb:5:in `__send__'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/querying.rb:5:in `find' 
```

我正在使用带有 Ruby 1.8.7 的 Rails 3.2.7。我之前使用的是 mysql 2.7 版本，但升级时遇到错误，所以我现在使用 mysql2 (0.311) 以及 activerecord-myql2-adapter (0.0.3)。

问题似乎与此类似：

[Rails 3：Model.all => NoMethodError：nil:NilClass 的未定义方法“接受”](https://stackoverflow.com/questions/9296444/rails-3-model-all-nomethoderror-undefined-method-accept-for-nilnilclass)

但是我尝试了那里提供的所有解决方案，但没有一个奏效。

编辑：如果我取出 'activerecord-mysql2-adapter' gem，我会收到以下错误。

```
Address Load (0.7ms)  SELECT `addresses`.* FROM `addresses` LIMIT 1
NoMethodError: undefined method `generated_methods?' for #<Class:0x7f10733eb2e8>
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/markos_validates_timeliness-2.3.2.2/lib/validates_timeliness/active_record/attribute_methods.rb:46:in `define_attribute_methods'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/attribute_methods.rb:168:in `respond_to?'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activesupport-3.2.7/lib/active_support/callbacks.rb:398:in `__run_callback'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activesupport-3.2.7/lib/active_support/callbacks.rb:385:in `_run_find_callbacks'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activesupport-3.2.7/lib/active_support/callbacks.rb:81:in `send'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activesupport-3.2.7/lib/active_support/callbacks.rb:81:in `run_callbacks'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/base.rb:523:in `init_with'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/inheritance.rb:68:in `instantiate'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/querying.rb:38:in `find_by_sql'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/querying.rb:38:in `collect!'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/querying.rb:38:in `find_by_sql'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/explain.rb:40:in `logging_query_plan'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/querying.rb:37:in `find_by_sql'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation.rb:171:in `exec_queries'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation.rb:160:in `to_a'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/explain.rb:33:in `logging_query_plan'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation.rb:159:in `to_a'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation/finder_methods.rb:378:in `find_first'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/relation/finder_methods.rb:122:in `first'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/querying.rb:5:in `__send__'
from /home/aneyer/.rvm/gems/ruby-1.8.7-p370@rails3/gems/activerecord-3.2.7/lib/active_record/querying.rb:5:in `first' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T21:01:42.080

弄清楚了。事实证明，很久以前有人制作的自定义 gem 导致了一些错误。移除那个宝石修复了它。

对于那些有类似问题的人，请确保删除“activerecord-mysql2-adapter”gem。这就是导致最初问题的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-06T13:52:11.323

我在 Gemfile 中将 'activerecord-mysql2-adapter' 更改为 'mysql2'，然后它工作了

# ruby-on-rails - 如何在未来创建对象但忽略每年/每年的 TimeZone 切换？

> ID：11889681
> 
> 赞同：0
> 
> 时间：2012-08-09T18:25:58.810
> 
> 标签：ruby-on-rails, timezone

我创建了多个具有不同`scheduled_on`属性的计划对象。例如，每个对象都有一个日期，在每个月的第一天下午 4:00 降落。

一旦其中一个对象发生时区更改。该应用程序智能地提前或落后一小时对其进行配置，使其相对于其父时区。

问题是应用程序会将对象保存为下午 4:00（太平洋标准），最终将显示为（PDT 或提前一小时或下午 5:00）。这意味着我需要它在 UTC 中节省一个小时的时间，这样当时间到时，无论我们在哪个时区，它都会显示为下午 4 点。

在 Rails 中确保这一点的最佳技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:26:39.610

我将通过指出一些关于在 Rails 中添加与时区相关的时间的好处来回答这个问题。

当您添加时间时，尽管时区发生变化，但时间会以 UTC 分配以保持相同的时间：

```
t = Time.now
-> 2012-08-10 13:17:01 +0200
t + 90.days
-> 2012-11-08 13:17:01 +0100 
```

DateTime 不会这样做。DateTime 将在它开始的同一 TimeZone 中上升一个小时或下降一个小时：

```
 dt = DateTime.now
 => Fri, 10 Aug 2012 13:16:54 +0200 
 dt + 90.days
 => Thu, 08 Nov 2012 13:16:54 +0200 
```

但是 DateTime 是获取两个日期之间天数的唯一方法，您可以通过减去两个 DateTimes 来做到这一点。这一点，你不能用时间来做，因为当减去时间时，它不会除以完美的 24 小时，*因为*时区切换，你会得到一个无理数。

这是针对我的问题的。但是我通过将 Time 转换为 DateTimes 以查找距离的天数解决了我的问题，然后重新转换回时间以找到相对于 TimeZone 更改的 UTC 时间：

```
original_job.to_time + ( new_date.to_datetime - original_job.to_datetime ).to_i.days 
```

# data-binding - 连接 IObservableVector 到 WinJS 列表视图

> ID：11889688
> 
> 赞同：-1
> 
> 时间：2012-08-09T18:26:20.123
> 
> 标签：data-binding, windows-runtime, winjs

我们正在用 C++ 和 JavaScript 开发一个 Metro 风格的应用程序。C++ 端为我们提供了[`IObservableVector<T>`](http://msdn.microsoft.com/en-us/library/windows/apps/br226052.aspx)实例。JavaScript 端使用[`WinJS.UI.ListView`](http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx)控件。

列表视图通常连接到[`WinJS.UI.IListDataSource`](http://msdn.microsoft.com/en-us/library/windows/apps/br211786.aspx)实例。最典型的是，一个人接受[`WinJS.Binding.List`](http://msdn.microsoft.com/en-us/library/windows/apps/hh700774.aspx)并使用它的`dataSource`属性。

但是，想要连接`IObservableVector<T>`到列表视图似乎很自然。有没有办法做到这一点？比如有没有把`IObservableVector<T>`s变成`List`s或者`IListDataSource`s的适配器？

我们可以采用的一种方法是编写我们自己的自定义[`WinJS.UI.IListDataAdapter`](http://msdn.microsoft.com/en-us/library/windows/apps/br212603.aspx)实现，该实现`IObservableVector<T>`与[`WinJS.UI.VirtualizedDataSource`](http://msdn.microsoft.com/en-us/library/windows/apps/hh701413.aspx). 但是，有人已经这样做了吗？它似乎应该在框架中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:41:02.527

WinJS 1.0 不支持 WinRT 更改通知接口（INotifyPropertyChanged、IObservableVector）。如果要将它们连接在一起，则需要编写适配器/数据源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:55:02.910

基于@Chris Tavares 的有用（如果令人沮丧）的回应，我编写了这样一个适配器：

[https://github.com/NobleJS/WinningJS/blob/master/lib/ObservableVectorDataSource.js](https://github.com/NobleJS/WinningJS/blob/master/lib/ObservableVectorDataSource.js)

它目前是只读的（因此您无法更新数据源并期望更改传播到可观察向量），但在我们的应用程序中效果很好。

# http - 什么是必需的 HTTP 标头字段

> ID：11889690
> 
> 赞同：9
> 
> 时间：2012-08-09T18:26:34.803
> 
> 标签：http, header

我知道任何 HTTP 请求都需要以下标头字段。

*   主持人

我发现该文档描述了一些[HTTP 标头字段](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)，但没有所需字段的列表。

我的问题是；

*   还需要哪些其他标题字段？
*   建议的标题字段是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T22:43:56.270

看起来 HOST 是唯一必需的标头字段

# git - 使用远程标签时分叉 GIT 存储库的生命周期教程

> ID：11889693
> 
> 赞同：2
> 
> 时间：2012-08-09T18:26:41.250
> 
> 标签：git, tags, fork

## 免责声明

我对 GIT 有点陌生，所以如果我完全错了，请原谅。我已经使用 Subversion 很长时间了，看到了 GIT 的巨大好处，并且正在积极尝试进行转换。但是，我提出了这个问题，我似乎无法找到一个好的教程或操作方法。这就是上游标签的正确使用。

## 我做了什么

我的示例是 github.com 托管存储库 redmine。它包含许多用于稳定版本和分支的标签以及当前正在运行的 master。

我已经通过发布在我自己的系统上分叉了它

```
cd /srv/git-repos
git clone --mirror https://github.com/redmine/redmine.git redmine.git 
```

然后我通过执行以下操作克隆了我的本地分叉

```
cd /opt
git clone /srv/git-repos/redmine.git 
```

然后我按照 github.com 的说明添加远程上游

```
cd /opt/redmine
git remote add upstream https://github.com/redmine/redmine.git 
```

很酷，此时我在我的系统上有一个 redmine 的分叉副本，我可以提交并从中推送和拉取。我还添加了真正的 redmine 作为上游，我也可以从中提取。

所以我想做的第一件事就是在我当前安装正在运行的状态下获取这个新的 repo。

似乎很容易：

```
# Checkout the older tag I'm on
git checkout v1.1.0

# Add a plugin as a submodule
git submodule add git://github.com/delaitre/redmine_time_tracker.git vendor/plugins/redmine_time_tracker
git submodule update --init --recursive 
```

现在我想把它提交到我的叉子上（我很确定我已经出错了）

```
git commit -m 'Added a new submodule' 
```

## 我在哪里

惊人的！我现在回到了我从不使用 git 开始的地方，但一切都是版本化且安全的，并且希望更易于管理。

## 问题

重点是在升级到上游标签的新版本（v1.4.0）之前我想保证安全。

那么，如何在保留对本地分支的提交的同时切换到上游的新标签？

我在上面说过（我想我已经出错了）。从一些额外的阅读中，我认为我应该以某种方式分支远程标签，并根据远程标签提交一个新分支。这是因为我确定我现在处于“分离的 HEAD 状态”，这显然很糟糕。

## 寻找

1.  如何从标签分支。
2.  命名此“分支标签”的最佳做法是什么（例如 _v1.2.0、my_v1.2.0、local_v1.2.0）
    *   我是不是过于肛门，谁在乎它的名字？
3.  **下一步**：如何合并新的远程标签（即 v1.4.0）
4.  我如何提交这个新的合并标签等。

## 结论

我是否完全偏离了基础，坚果，完全错了，或者没有抓住重点？这是不常见的情况吗？我是否错过了有关如何执行此操作的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:25:57.027

> 如何从标签分支。

git checkout -b newBranch yourTag

注意：

*   `git clone --mirror https://github.com/redmine/redmine`就足够了（无需提及.git，这将创建一个“redmine”目录，而不是 readmine.git 目录，这是为裸仓库保留的命名约定）
*   `git checkout aTag`将使您处于**[分离的 HEAD 模式](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)**，这意味着此时您需要创建一个新分支：

```
git checkout aNewBranch

```

这将从您当前的提交（现在未附加到任何分支）创建它。
并注意子模块：它们本身在分离的 HEAD 模式下检出：请参阅“[如何使用分离的 HEAD 使子模块附加到实际的 HEAD？](https://stackoverflow.com/a/8644339/6309) ”和“[如何`git clone --recursive`重新创建子模块的远程和分支？](https://stackoverflow.com/questions/10666085/how-do-i-get-git-clone-recursive-to-recreate-submodules-remotes-and-branche/11451714#11451714) ”

# c# - 使用各种小数/基数分隔符解析小数的方法

> ID：11889694
> 
> 赞同：1
> 
> 时间：2012-08-09T18:26:48.787
> 
> 标签：c#, parsing, internationalization, decimal, separator

我做了很多文件解析，其中涉及解析十进制等数据类型。为了帮助使代码更具可读性，我一直在使用以下方法：

```
public static decimal? ToDecimal(this string data)
{
    decimal result;
    if (decimal.TryParse(data, NumberStyles.Integer | NumberStyles.AllowDecimalPoint, CultureInfo.InvariantCulture, out result))
        return result;

    return null;
} 
```

这适用于以句点/句点作为小数分隔符表示的小数。但是，我希望此函数与其他标准小数分隔符一起使用，尤其是逗号。（我读到还有一个阿拉伯小数分隔符：[http](http://en.wikipedia.org/wiki/Decimal_mark#Other_numeral_systems) ://en.wikipedia.org/wiki/Decimal_mark#Other_numeral_systems ，但这大概也依赖于能够解析东方阿拉伯数字）。

Culture.CurrentCulture 不合适，因为数据不一定是在进行处理的机器上创建的。所以我现在得到了这个：

```
private static CultureInfo CreateCultureWithNumericDecimalSeparator(string separator)
{
    var cultureInfo = (CultureInfo)CultureInfo.InvariantCulture.Clone();
    cultureInfo.NumberFormat.NumberDecimalSeparator = separator;
    return cultureInfo;
}

private static CultureInfo[] cultureInfos = new CultureInfo[]
{
    CultureInfo.InvariantCulture,
    CreateCultureWithNumericDecimalSeparator(",") // Normal comma
};

public static decimal? ToDecimal(this string data)
{
    foreach (CultureInfo cultureInfo in cultureInfos)
    {
        decimal result;
        if (decimal.TryParse(data, NumberStyles.Integer | NumberStyles.AllowDecimalPoint, cultureInfo, out result))
            return result;
    }

    return null;
} 
```

这可行，但解析两次，特别是考虑到 TryParse 正在检查各种设置（千分隔符、十六进制说明符、货币符号、指数等）似乎有点繁重。这可能不是性能问题，但我很想知道是否有更有效的方法可以做到这一点，或者甚至可能是框架内的现有方法？甚至可能是一种可以处理现代使用的其他数字系统的方法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:04:00.477

该框架似乎没有直接提供此功能。有趣的是，对[另一个问题](https://stackoverflow.com/questions/8926792/converting-numbers-from-western-arabic-digits-1-2-3-to-eastern-arabic-digit)的回答表明，该框架没有提供任何解析东方阿拉伯数字的机制，即使使用文化集也是如此。由于东方阿拉伯数字的要求对于我的应用程序来说只是理论上的，所以我坚持使用上面已经得到的代码。如果我实施更具体的内容，我会发布它！

# sql - 为什么 IsNull(LTrim(RTrim(Lower(null))), -1) 是 *？

> ID：11889696
> 
> 赞同：10
> 
> 时间：2012-08-09T18:26:53.223
> 
> 标签：sql, sql-server-2008, tsql

今天我在工作场所测试一些东西，遇到了这个

情况1：

```
Declare @a nvarchar(20)
Set @a = null
Select IsNull(LTrim(RTrim(Lower(@a))), -1) 
```

案例二：

```
Select IsNull(LTrim(RTrim(Lower(null))), -1) 
```

案例 1 的结果是，`-1`但`*`在案例 2 中，我期望两种情况下的结果相同。任何原因？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T18:38:29.973

在没有数据类型声明的情况下，这种情况下的 null 被声明为 varchar(1)。您可以通过将结果选择到 #temp 表中来观察这一点：

```
Select IsNull(LTrim(RTrim(Lower(null))), -1) as x INTO #x;
EXEC tempdb..sp_help '#x'; 
```

在您将看到的结果中：

```
Column_name   Type      Length
-----------   -------   ------
x             varchar   1 
```

由于 -1 无法放入 varchar(1)，因此您将得到 * 作为输出。这类似于：

```
SELECT CONVERT(VARCHAR(1), -1); 
```

如果你想折叠成一个字符串，那么我建议将整数括在单引号中，这样就不会因整数 <-> 字符串转换而导致的混淆：

```
SELECT CONVERT(VARCHAR(1), '-1'); -- yields "-"
SELECT CONVERT(VARCHAR(30), '-1'); -- yields "-1" 
```

我不会对 SQL Server 将如何处理显式提供的“值”做任何假设`null`，尤其是当复杂的表达式难以预测哪些评估规则可能胜过数据类型优先级时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:44:13.913

在 SQL Server 中，有“类型化 NULL”和“非类型化 NULL”。

在第一种情况下，NULL 是有类型的——它知道 NULL 是 a `varchar(20)`，因此当您的函数包装内部值时，该数据类型会在整个表达式中传播。

在第二种情况下，NULL 是无类型的，因此它必须从周围的表达式中推断出 NULL 的类型。该`IsNull`函数计算第一个操作数的数据类型并将其应用于整个表达式，因此 NULL 默认为`varchar(1)`：

```
PRINT sql_variant_property(IsNull(LTrim(NULL), -1), 'BaseType'); -- varchar
PRINT sql_variant_property(IsNull(LTrim(NULL), -1), 'MaxLength'); -- 1 
```

另一个复杂之处是它`IsNull`没有以与它相同的方式进行类型提升`Coalesce`（尽管 Coalesce 由于不是函数而有其自身的问题 - 它被扩展为 CASE 表达式，有时由于重复表达式评估而导致意外的副作用）。看：

```
SELECT Coalesce(LTrim(NULL), -1); 
```

这导致`-1`数据类型`int`！

查看[Sql Server 数据类型优先级](http://msdn.microsoft.com/en-us/library/ms190309.aspx)，您会发现它`int`远高于`varchar`，因此整个表达式变为`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:43:48.937

裸露的 NULL 被传递给 LOWER()，它需要一个字符。这默认为一个字符宽。值“-1”不适合此字段，因此返回“*”。

您可以通过以下方式获得相同的效果：

```
select isnull(CAST(NULL as varchar(1)), -1) 
```

以下代码也会导致问题：

```
declare @val varchar;
set @val = -1
select @val 
```

请注意，COALESCE() 不会导致此问题。

我很确定这是完全记录在案的行为。

# php - 使用 PHP 中的原始时区从 ISO-8601 日期格式化字符串

> ID：11889697
> 
> 赞同：1
> 
> 时间：2012-08-09T18:26:54.597
> 
> 标签：php, date, datetime, formatting

我有一个带有任意时区的 ISO8601 字符串。我**不想**转换到我的时区。相反，我想保留原始时区。我希望能够格式化输出，类似于*gmdate*格式化日期/时间的方式。例如：

```
$output =  my_date_function( 'F d, ga', $thetime ); 
```

应该输出：

```
$thetime = '2012-09-24T21:00:00-0700';
     => September 24, 9pm

$thetime = '2012-09-24T21:00:00-0500';
     => September 24, 9pm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:41:36.983

我不知道它是否会起作用，但我认为 DateTime::createFromFormat 可以自动完成。您还可以创建一个确定时区的函数并使用它创建一个 DateTimezone 对象。 [http://php.net/manual/en/datetime.createfromformat.php](http://php.net/manual/en/datetime.createfromformat.php) 根据文档：

> 如果省略 timezone***并且 time 不包含 timezone***，则将使用当前时区

*代码：*

```
$stime = '2012-09-24T21:00:00-0500';
$t = DateTime::createFromFormat(DateTime::ISO8601, substr($stime, 0, 19));
$output = $t->format('F d, ga'); 
```

# objective-c - 在 UITableView Objective-C 中设置复选框的限制

> ID：11889704
> 
> 赞同：0
> 
> 时间：2012-08-09T18:27:35.633
> 
> 标签：objective-c, ios, xcode, uitableview, storyboard

我以编程方式创建具有不同部分和行的表格，我在表格内创建复选框，并将图片作为一个框

我想为此复选框设置限制

你能帮帮我吗

**编辑 ：**

**我的问题是我怎样才能只选择一个复选框 - 选择限制**

以及如何取消选择一个框并删除复选标记

这是复选框行的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
    NSArray *contents = [[self sectionContents] objectForKey:key];
    NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

    if (indexPath.section != 2) {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
        cell.textLabel.text =contentForThisRow;
        return cell;
    }
    else {
        CheckBoxAbsenceTableViewCell *cell = (CheckBoxAbsenceTableViewCell*)[tableView dequeueReusableCellWithIdentifier:@"CheckBoxAbsenceTableViewCell"];

        cell.imageView.image=[UIImage imageNamed:@"emptycheck-box.png"];
        cell.checkBox.image = image;
        if(indexPath.row == 0){
            cell.absenceCode.text =@"Red";
        }
        else if (indexPath.row == 1){
            cell.absenceCode.text =@"Green";

        }else if(indexPath.row == 2){
            cell.absenceCode.text =@"Blue";
        }
        return cell;
    }
}  

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
  {
      CheckBoxAbsenceTableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
      selectedCell.checkBox.image =[UIImage imageNamed:@"checkmark.png"];
  } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:56:20.063

从 UI 设计的角度来看，您*应该*使用 cell.accessoryType 和 UITableViewCellAccessoryCheckmark 附件。

您需要跟踪数据模型中选定（即选中）的 indexPath。让我们称之为 self.idxPathSelected。

这 didSelectRowAtIndexPath 将为所选行添加复选标记，并从先前选择的行中清除复选标记：

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 [tableView deselectRowAtIndexPath:indexPath animated:NO];
 UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
 cell.accessoryType = UITableViewCellAccessoryCheckmark;

 if (self.idxPathSelected != nil)
 {
  cell = [tableView cellForRowAtIndexPath:self.idxPathSelected];
  cell.accessoryType = UITableViewAccessoryNone;
 }

 self.idxPathSelected = [NSIndexPath indexPathForRow:indexPath.row inSection:indexPath.section];

} 
```

在你的 cellForRowAtIndexPath 中，是这样的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
...

 if ((self.idxPathSelected != nil) && ([self.idxPathSelected compare:indexPath] == NSOrderedSame))
  cell.accessoryType = UITableViewCellAccessoryCheckmark;
 else
  cell.accessoryType = UITableViewCellAccessoryNone;
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:56:41.480

简单的解决方案是将`UIInteger _selectedIndex`实例变量添加到您的视图控制器。
在 viewDidLoad 中将其设置为 -1（未选择任何行）
然后当用户选择一个单元格时，保存所选索引并重新加载 tableView：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
  {  
      _selectedIndex = indexPath.row;
      [self.tableView reloadData];
  } 
```

更改`cellForRowAtIndexPath`方法，使其仅选择选定的单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
    NSArray *contents = [[self sectionContents] objectForKey:key];
    NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

    if (indexPath.section != 2) {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
        cell.textLabel.text =contentForThisRow;
        return cell;
    }
    else {
        CheckBoxAbsenceTableViewCell *cell = (CheckBoxAbsenceTableViewCell*)[tableView dequeueReusableCellWithIdentifier:@"CheckBoxAbsenceTableViewCell"];

        if (indexPath.row == _selectedIndex) {
            cell.checkBox.image =[UIImage imageNamed:@"checkmark.png"];
        }
        else {
            cell.checkBox.image = [UIImage imageNamed:@"emptycheck-box.png"];;
        }

        if(indexPath.row == 0){
            cell.absenceCode.text =@"Red";
        }
        else if (indexPath.row == 1){
            cell.absenceCode.text =@"Green";

        }else if(indexPath.row == 2){
            cell.absenceCode.text =@"Blue";
        }
        return cell;
    }
} 
```

# asp.net-mvc - 错误：强制转换 System.Data.Objects.ObjectQuery

> ID：11889705
> 
> 赞同：0
> 
> 时间：2012-08-09T18:27:40.273
> 
> 标签：asp.net-mvc, vb.net, linq, asp.net-web-api

我正在尝试查询我的 EF 模型（使用 ASP.NET MVC WebApi），但只有第一个版本（使用 SingleOrDefault）有效，第二个版本无效，我无法理解它！

在职的：

```
Public Overloads Shared Function GetById(id As Integer) As MEDIA
    Dim db As New EFEntities()
    Dim r As New MEDIA()
    r = db.MEDIA.SingleOrDefault(Function(p) p.id = id)

    Return r
End Function 
```

不工作：

**错误：无法将“System.Data.Objects.ObjectQuery`1[Data.MEDIA]”类型的对象转换为“Data.MEDIA”类型**

```
Public Overloads Shared Function GetById(id As Integer) As MEDIA
    Dim db As New EFEntities()
    r = From media In db.MEDIA
            Where media.id= id _
            Select media

    Return r
End Function 
```

如果有人能告诉我如何运行**第二个版本**并解释问题所在，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:18:49.680

在您的第一个示例中，该行：

```
r = db.MEDIA.SingleOrDefault(Function(p) p.id = id) 
```

初始化单个 MEDIA 对象。

但是，在您的第二个示例中，该行：

```
r = From media In db.MEDIA
        Where media.id= id _
        Select media 
```

初始化 MEDIA 对象的集合 - 不兼容的类型。

如果您将第二个示例中的返回表达式更改为：

```
Return r.SingleOrDefault() 
```

并坚持它`Dim`的初始化`r`工作。

# css - 两个浮动 div，中间有一个灵活的 div

> ID：11889706
> 
> 赞同：5
> 
> 时间：2012-08-09T18:27:41.023
> 
> 标签：css, layout, html, css-float

我在固定宽度的标题中需要以下内容：

1.  一个不同宽度的 div 向左浮动。
2.  一个不同宽度的 div 向右浮动。
3.  以它们为中心的 h2 占据了任何剩余空间。

浮动 div 包含大小可能不同的内容。

我尝试了各种方法，但都失败了。我知道一种解决方案是绝对定位外部 div，然后将 h2 拉伸到整个宽度并将文本居中，使其居中，但必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T18:41:33.663

带有最少标记的基本**[jsFiddle 示例。](http://jsfiddle.net/j08691/EqabH/)**

**HTML**

```
<div id="container">
    <div id="left">left</div>
    <div id="right">right</div>
    <h2>H2</h2>
</div>​ 
```

**CSS**

```
#container {
    border:1px solid #999;
}
#left {
    float:left;
}
#right {
    float:right;
}
h2 {
    text-align:center;
    margin:0;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T18:35:44.313

您可以使用`display: inline-block`而不是`float`，然后使用 CSS`calc`来获得中间的正确宽度`div`：

**HTML：**

```
<div id="wrapper">
    <div id="one"></div><div id="two"></div><div id="three"></div>
</div>​ 
```

**CSS：**

```
#wrapper {
    min-width: 300px;
}
#one, #two, #three {
    display: inline-block;
    height: 300px;
}
#one {
    background: lightgreen;
    width: 100px;
}
#two {
    background: lightblue;
    width: 100%;
    width: calc(100% - 300px);
    width: -webkit-calc(100% - 300px);
    width: -moz-calc(100% - 300px);
}
#three {
    background: lightgreen;
    width: 200px;
}​ 
```

**[jsFiddle 演示](http://jsfiddle.net/QXG7M/1/)**

然后你可以把`h2`里面放在中间`div`，在这种情况下`#two`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T18:42:05.020

考虑以下 HTML：

```
<div id="parent">
    <div id="left">Left</div>
    <h2>Heading</h2>
    <div id="right">Right</div>
</div> 
```

CSS 代码：

```
#parent {
    width: 80%;
    margin: auto;
    display: table;
}

#parent div, #parent h2 {
    display: table-cell;  
}

#left, #right {
    width: 50px;
} 
```

演示：http: [//jsfiddle.net/MAhmadZ/pMfLx/](http://jsfiddle.net/MAhmadZ/pMfLx/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T18:53:21.463

试试这个我认为它可以解决你的问题

```
<style type="text/css">
div{
display: inline-block;
vertical-align: top;
height: 50px;
border: 1px solid red;
position: static;
}

#one{
float: left;
width: 100px;
}

#three{
float: right;
width: 100px;
}
</style>

<div id="outerDiv" style="width: 500px;height: 500px;border: 1px solid red;">

    <div id="one"></div>
    <div id="two"></div>
    <div id="three"></div>
</div>

<script type="text/javascript">
var spaceLeft = document.getElementById("one").offsetWidth;

var spaceRight = document.getElementById("three").offsetWidth;

var totalSpace = document.getElementById("outerDiv").offsetWidth;

document.getElementById("two").style.width = totalSpace-(spaceLeft+spaceRight+4) + "px";
</script> 
```

# grails - 需要帮助创建基于域和查找表的 Grails executeQuery

> ID：11889709
> 
> 赞同：1
> 
> 时间：2012-08-09T18:27:54.463
> 
> 标签：grails, hql, grails-orm

我有两个类：样本和参数。我还有一个 sample_sample_parameter 查找表，用于保存样本 id 和参数 id。这是在我的 grails 应用程序中映射的。

我能够编写一个适用于松鼠的 sql 查询：

```
select s.* from sample s, sample_sample_parameters sp where s.id = sp.sample_id and sp.sample_parameter_id = 41 
```

其中 41 将替换为从 gsp 页面传递给操作的 parameter.id 变量。我也试图让它与 executeQuery 一起工作，但它告诉我样本没有被映射。

如何将此查询转换为可识别的形式？

```
class Sample {

Date collectionDate // date the sample was collected
Date sampleReceivedDate // date the sample arrived on site
Date dateCreated
String sampleComments // details about the sample
String labAccessionID // internal reference
String sampleGender // is it from a male or female?
String sampleAge // the age of the animal the sample was taken from
String sampleBreed // the breed of animal
String sampleNameID // patient name
String filepath

String enteredby

String sg
String mosm

static searchable = true

static hasMany =[sampleParameters:SampleParameter, ficsruns:Ficsrun]//[tags:Tag]// a Sample can have many parameters
/* mappedBy allows two tables share a common table. It creates two join tables, one for each. 
 * SampleParameter is the table being shared by Sample and SampleType tables */
static mappedBy=[sampleParameters:"samples"]//[tags:"domainClass1s"]/*http://www.van-porten.de/2010/09/multiple-many-to-many-in-grails/*/
static belongsTo = [sampleType:SampleType, labFinding:LabFinding, sampleSource:SampleSource, species:SpeciesList] // creates dependencies

static constraints = {

    sampleType(blank:false)
    sampleNameID(blank:false)
    collectionDate(blank:false)
    sampleReceivedDate(blank:false)
    sampleComments(nullable:true, maxSize:1000)
    labAccessionID(nullable:true)
    sampleGender(blank:false, inList:["M","F","NM","SF", "UNK"])
    sampleAge(nullable: true)
    sampleBreed(nullable:true)
    sampleSource(blank:false)
    species(blank:false)
    labFinding(nullable:true)
    filepath(nullable:true)
    enteredby(nullable:true)
    sg(nullable:true)
    mosm(nullable:true)
    dateCreated()
}

/* This section is for static mapping to the hematology database*/
   static mapping = {
    version false
    id generator:'sequence', params:[sequence:'SHARED_SEQ']   
   }

   String toString(){
    "${sampleNameID}"
  }
}

class SampleParameter implements Comparable{

String name
String value

static hasMany = [
samples:Sample,         //domainClass1s: DomainClass1,
sampleTypes:SampleType  //domainClass2s: DomainClass2
]
static mapping = {
    version false
    id generator:'sequence', params:[sequence:'SHARED_SEQ']   
}

  static mappedBy =        [samples:"sampleParameters",sampleTypes:"sampleParameters"]//[domainClass1s: "tags", domainClass2s: "tags"]
  static belongsTo =[Sample,SampleType] //[DomainClass1, DomainClass2]

  static constraints = {
     name(blank:false)
     //value()
     //value(unique:true)
     value (unique: 'name')
 }

@Override public String toString() {
return name + " " + value
}

@Override
public int compareTo(Object o) {
    if (o == null || this == null) {
        return 0;
    } else {
        return value.compareTo(o.value)
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:52:30.783

作为第一个建议，当您拥有参数的 id 时，请执行以下操作。

```
Parameter p = Parameter.get(params.id) // or wherever your id is stored
List<Sample> samples = Sample.findAllByParameter(p) // this assumes, the parameter property is actually named 'parameter' 
```

当然，现在没有错误处理，但你会明白的。

欢迎来到 GORM，欢迎来到 Grails。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:42:02.173

问题是您没有在 executeQuery 方法中使用 HQL 查询。相反，您使用的是本机 sql。从手册：

> executeQuery 方法允许执行任意 HQL 查询。

查看[规范](http://grails.org/doc/latest/ref/Domain%20Classes/executeQuery.html)以了解执行此操作的方法。顺便说一句，这比原生 sql 更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:56:15.227

```
List<Sample> samples = Sample.findAllBySampleParameter(SampleParameter.get(variable)) 
```

试试看？

# php - 如何制作乘/除sql表？

> ID：11889717
> 
> 赞同：0
> 
> 时间：2012-08-09T18:28:50.033
> 
> 标签：php, mysql, sql

我正在尝试在网上商店中进行乘法运算，以显示实际价格：

**折扣*税*产品价格*1件=实际价格**

我的表名称：

**表“产品”-结构“产品价格”** //即产品价格（正常数字）

**Table "_config" / Param "tax"** // 即是税（它是百分比（%））

**表“产品”/结构“产品折扣”** //即折扣（百分比（%））

我需要经过计算才能使其在表格中可见，就像这样`'<td>'.$realprice.'</td>'.`

// 我尝试添加这一行：`$sql = 'select sum( preco * (1 - desconto /100) *1 )AS total FROM Products');`但没有成功。

*   preco 表示价格

*   descont 是折扣的意思

对不起英语不好...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:36:00.237

如果您想为 Products 表中的每一行获取每个产品的“实际价格”，则不需要 SUM 聚合。

```
 SELECT preco * (1 - desconto /100.0) AS total FROM Products 
```

此外，如果`desconto`是整数类型，您要确保在除以 100 时不会得到整数除法运算。通过指定`100.0`，这是一个十进制文字，而不是整数。（我也没有看到任何税收计算，税率是这样的......

```
 SELECT preco * (1-desconto/100.0) * (1-taxrate/100.0) AS total FROM Products 
```

您可能还想对其应用 ROUND 函数，以消除小数美分或其他任何东西，可能在您乘以数量之后（在我的示例中省略）。

# php - 如何使用 Array 进行字符串循环？

> ID：11889718
> 
> 赞同：0
> 
> 时间：2012-08-09T18:28:54.750
> 
> 标签：php, mysql, arrays, foreach

我怎样才能以更好的方式做到这一点？

```
$query = mysql_query("SELECT * FROM table WHERE region='example1'");
$num_rows_example1 = mysql_num_rows($query);    

$query = mysql_query("SELECT * FROM table WHERE region='example2'");
$num_rows_example2 = mysql_num_rows($query);    

$query = mysql_query("SELECT * FROM table WHERE region='example3'");
$num_rows_example3 = mysql_num_rows($query); 
```

也许有一个数组和 Foreach？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:31:32.083

您的查询可能是

```
SELECT region, count(*) as num_regions FROM table GROUP BY region 
```

现在您只需执行一个查询，它会返回每个区域的行数！

现在你可以使用你的数组来执行一些 PHP 魔法了

```
$regions = array('example1', 'example2', 'example3');

foreach ($regions as $region) {
    // do something with the MySQL result
} 
```

**请注意**您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇 SO 文章](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:34:04.847

```
$query = mysql_query("SELECT region, COUNT(region) AS count FROM table GROUP BY region");

while($row = mysql_fetch_assoc($query)) {
  ${$row[region]} = $row[count];
} 
```

当您`echo $example1;`生成该区域的计数时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:31:39.797

首先也是最重要的：

请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[*红框*](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定哪个，[这篇文章](http://goo.gl/3gqF9)会帮助你。如果您选择 PDO，[这里有很好的教程](http://goo.gl/vFWnC)。

现在已经不碍事了：

```
$query = "SELECT `region`, count(*) AS `count` FROM `table` GROUP BY `region`"; 
```

# c# - WPF Designer - 在元素内选择元素

> ID：11889719
> 
> 赞同：1
> 
> 时间：2012-08-09T18:28:58.480
> 
> 标签：c#, .net, wpf, user-interface, gui-designer

我是 WPF 的新手，所以我会接受每一条建议。我的问题：我使用 Designer 以我喜欢的方式放置 UI 的不同组件。这很棒。这种类型的 XAML 结构出现了问题：

```
<Window>
<Grid>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        /* Couple of buttons */
    </Grid>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="223*"/>
            <RowDefinition Height="99*"/>
        </Grid.RowDefinitions>
        <TabControl Margin="85,0,0,0" Padding="0,-5,0,0" Grid.RowSpan="2">
            <TabItem Visibility="Collapsed">
                <Grid>
        /* textboxes and labels */
                </Grid>
            </TabItem>
            <TabItem Visibility="Collapsed">
                <Grid>
                    <Border Visibility="Hidden" Margin="136,66,76,66" Panel.ZIndex="10" BorderThickness="1" Width="320" Height="180">
                        <Grid Background="White">
                            <Grid.Effect>
                                <DropShadowEffect BlurRadius="10" RenderingBias="Quality" Direction="270" ShadowDepth="3" Opacity="0.1"/>
                            </Grid.Effect>
                            /* labels, textboxes and buttons */
                        </Grid>
                    </Border>
                    <TabControl Margin="0,0,0,38">
                        <TabItem>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                /* other elements */
                            </Grid>
                        </TabItem>
                        <TabItem>
                            <Grid> 
                                <Grid>
                                    /* checkboxes */
                                </Grid>
                                <Grid>
                                    /* checkboxes */
                                </Grid>
                                /* labels */
                            </Grid>
                        </TabItem>
                        <TabItem>
                            <Grid>
                            </Grid>
                        </TabItem>
                    </TabControl>
                    /* buttons and labels */
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Grid> 
```

通常当我想在场景中移动某些东西时，我只需选择它并拖动/更改它，因为它比用 XAML 编写要容易得多。但是，使用上面的代码，如果我想从内部 TabControl 中选择一些东西，我就是不能。它会自动选择上面的那个，这使得管理 UI 有点困难。我猜这与 Z-Index 有关，但我不太确定。我知道这可能是一个愚蠢的问题，但这让我很挣扎，所以如果有人向我解释这一点，我将非常感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T12:19:28.630

我遇到了同样的问题——我正忙着在 WPF 设计器中布置我的应用程序，而我之前可以移动的东西是不可选择和不可拖动的，而且`TabControl`总是在窃取焦点。

问题似乎与`TabItem`正在崩溃有关。我发现不可能在 TabItem 中选择任何具有`Visibility="Collapsed"`.

如果您需要移动东西，请尝试将可见性更改为`Visible`临时 - 我能够在设计器中移动东西，然后再将可见性设置回来。

我还没有特别彻底地测试过它，它有点杂乱无章，但它对我来说足够好做布局了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:46:53.027

好吧，我的猜测是，您的网格彼此重叠，这些网格正在捕获点击并阻止选择下面的元素（就像您提到的 z 顺序）。

需要注意的几点

这并不是真正特定于设计师的，如果您在每个元素上分层放置了 Hit Testable 元素，即使它们看起来透明，它们仍然会捕获点击并“窃取”焦点。您可以做各种事情来防止这种情况发生，一个选项可能是设置 IsHitTestVisible=false 在您希望点击“通过”到其下方元素的元素上。另一种选择是将元素的背景设置为 {x:Null}，而不是默认设置（透明）。

您可以使用可能位于 VS 窗口（或 View | Other Windows | Document Outline）左侧的 Document Outline 面板来导航可视化树......可视化。这将允许您“选择”一个项目，即使它位于其他项目下方。但是，即使它在文档大纲中被选中，它也不会浮动到设计表面的顶部，因此您将无法拖动它来定位它，但您可以抓取重新调整大小处理并访问所选元素的属性窗口。

最终你必须“隐藏”它上面的元素以获得你想要的拖动定位。

# ios - 如何将 FBProfilePictureView 转换为 UIImage？

> ID：11889725
> 
> 赞同：16
> 
> 时间：2012-08-09T18:29:20.530
> 
> 标签：ios, facebook-graph-api, uiimage, facebook-ios-sdk

使用 FBProfilePictureView 一切正常，但我需要从 FBProfilePictureView 获取该图片并将其转换为 UIImage。

我该怎么做？

我尝试使用这个：

```
UIGraphicsBeginImageContext(self.profilePictureView.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
self.TestPictureOutlet.image = viewImage; 
```

但这对我的解决方案不起作用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-18T14:55:45.607

FBProfilePictureView 是一个 UIView，这个 UIView 包含一个 UIImageView，也就是你的图片，你可以从那个 UIImageView 中获取 UIImage：

profilePictureView 是一个 FBProfilePictureView

```
UIImage *image = nil;

for (NSObject *obj in [profilePictureView subviews]) {
    if ([obj isMemberOfClass:[UIImageView class]]) {
        UIImageView *objImg = (UIImageView *)obj;
        image = objImg.image;
        break;
    }
} 
```

**编辑：**更快地添加另一种方式，但做同样的事情

```
__block UIImage *image = nil;

[self.view.subviews enumerateObjectsUsingBlock:^(NSObject *obj, NSUInteger idx, BOOL *stop) {
    if ([obj isMemberOfClass:[UIImageView class]]) {
        UIImageView *objImg = (UIImageView *)obj;
        image = objImg.image;
        *stop = YES;
    }
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T11:55:58.743

上面提到的两个解决方案都可以很好地从 FBProfilePictureView 中获取 UIImage 对象。唯一的问题是，您需要延迟一些才能从 FBProfilePictureView 获取图像。喜欢：

```
[FBRequest requestForMe] startWithCompletionHandler:
     ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
         if (!error) {

             myNameLbl.text = user.name;
             profileDP.profileID = user.id;

//NOTE THIS LINE WHICH DOES THE MAGIC

[self performSelector:@selector(getUserImageFromFBView) withObject:nil afterDelay:1.0];

}];

- (void)getUserImageFromFBView{

    UIImage *img = nil;

     //1 - Solution to get UIImage obj

     for (NSObject *obj in [profileDP subviews]) {
         if ([obj isMemberOfClass:[UIImageView class]]) {
             UIImageView *objImg = (UIImageView *)obj;
             img = objImg.image;
             break;
         }
     }

    //2 - Solution to get UIImage obj

//    UIGraphicsBeginImageContext(profileDP.frame.size);
//    [profileDP.layer renderInContext:UIGraphicsGetCurrentContext()];
//    img = UIGraphicsGetImageFromCurrentImageContext();
//    UIGraphicsEndImageContext();

//Here I'm setting image and it works 100% for me.

   testImgv.image = img;

} 
```

问候！

Aamir Ali - iOS 应用程序开发人员

@时代集团 (TGD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:41:55.163

这里的解决方案。

脚步：

> 确保您将 FB 用户 ID 分配给“FBProfilePictureView”类的对象，在我的情况下，此类对象是“userPictureImageView”

```
-(void)saveFBUserImage
{

    CGSize imageSize = self.userPictureImageView.frame.size;

    UIGraphicsBeginImageContext(imageSize);
    CGContextRef imageContext = UIGraphicsGetCurrentContext();

    [self.userPictureImageView.layer renderInContext: imageContext];
    UIImage* viewImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    NSData *imageData = UIImageJPEGRepresentation(viewImage,1);

    UIImage * img = [UIImage imageWithData:imageData]; 

    NSString *filePath  =  <specify your path here>;

    CGSize size = img.size;

    if(size.height > 50)
        size.height = 50;
    if(size.width > 50)
        size.width = 50;

    CGRect rect = CGRectMake(0.0f, 0.0f,  size.width, size.height); 
    CGSize size2 = rect.size;

    UIGraphicsBeginImageContext(size2);

    [img drawInRect:rect];
    img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    NSData *newImageData = UIImageJPEGRepresentation(img, 1.0);
    [newImageData writeToFile:filePath atomically:YES];
} 
```

而已。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T08:31:56.537

我发现上述解决方案非常有效，但这里是更新的代码，我发现它更容易上手。

```
 @property FBSDKProfilePictureView *pictureView;

 if ([FBSDKAccessToken currentAccessToken]) {

    self.pictureView=[[FBSDKProfilePictureView alloc]init];

    [self.pictureView setProfileID:@"me"];
    [self.pictureView setPreservesSuperviewLayoutMargins:YES];
    [self.pictureView setPictureMode:FBSDKProfilePictureModeNormal];
    [self.pictureView setNeedsImageUpdate];
    [self performSelector:@selector(getUserImageFromFBView) withObject:nil afterDelay:1.0];

}

-(void) getUserImageFromFBView
{
UIImage *image = nil;

for (NSObject *obj in [self.pictureView subviews]) {
    if ([obj isMemberOfClass:[UIImageView class]]) {
        UIImageView *objImg = (UIImageView *)obj;
        image = objImg.image;
        break;
    }
}
[self.profilePic setImage:image forState:UIControlStateNormal];
} 
```

希望这可以帮助。在这里，我延迟了 1 秒以等待个人资料图片加载。

# ios - 从 NSArray 动态生成 NSPredicate

> ID：11889728
> 
> 赞同：2
> 
> 时间：2012-08-09T18:29:29.393
> 
> 标签：ios, nspredicate

我有大量不同的 NSObject 类型，它们都具有不同的属性，我试图抽象出一个方法，该方法允许我通过简单地传入我希望过滤的属性的 NSArray 来过滤对象的 NSArray。我过滤的数字键可能从 1 到其他任何值。

这是过滤 NSArray 的示例

> ```
> NSArray *filterBy = [NSArray arrayWithObjects:
>                        @"ManufacturerID",
>                        @"CustomerNumber",nil]; 
> ```

这些键也存在于我正在过滤的 NSArray 的对象中，所以基本上这需要生成如下内容：

> ```
> NSPredicate *pred = [NSPredicate predicateWithFormat:@"%K == %@ AND %K == %@",
>                        [filterBy objectAtIndex:0], 
>                        [items valueForKey: [filterBy objectAtindex:0],
>                        [filterBy objectAtIndex:1], 
>                        [items valueForKey: [filterBy objectAtIndex:1]]; 
> ```

这会产生类似的东西：`ManufacturerID==18 AND CustomerNumber=='WE543'`

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T20:00:59.060

这很简单。一探究竟：

```
NSMutableArray *subpredicates = [NSMutableArray array];
for (NSString *filterKey in filterBy) {
  NSString *filterValue = [items valueForKey:filterKey];
  NSPredicate *p = [NSPredicate predicateWithFormat:@"%K = %@", filterKey, filterValue];
  [subpredicates addObject:p];
}
NSPredicate *final = [NSCompoundPredicate andPredicateWithSubpredicates:subpredicates]; 
```

# xml - JBoss AS 7.1.1 jboss-deployment-structure.xml

> ID：11889729
> 
> 赞同：0
> 
> 时间：2012-08-09T18:29:39.523
> 
> 标签：xml, jboss, ejb, ejb-3.0, jboss7.x

我正在使用 JBoss AS 7.1.1，但无法让我的 EJB 3.0 服务器项目运行。我得到错误

`JBAS014777: Services which failed to start: service jboss.deployment.unit."GrahamsProj.ear".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit."GrahamsProj.ear".STRUCTURE: Failed to process phase STRUCTURE of deployment "GrahamsProj.ear"`

我查了一下，错误似乎与我的`jboss-deployment-structure.xml`. 这是我的样子：

```
<jboss-deployment-structure> 
    <deployment> 
        <dependencies> 
            <module name="org.slf4j" /> 
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

我不知道我是否有任何依赖关系，因为我从在线示例中获得了上述内容。我所知道的是错误意味着它不喜欢我的`jboss-deployment-structure.xml`文件。我该怎么做才能使文件结构正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:00:35.703

我会删除它。

我不是 AS7 专家（有人吗？），但我相信只有在您有特别微妙的部署要求时才需要它。对于简单的模块依赖项，您可以[在清单中放置一个 Dependencies 条目](https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7)。

但是，由于 SLF4J 是[标准的隐式依赖](https://docs.jboss.org/author/display/AS7/Implicit+module+dependencies+for+deployments#Implicitmoduledependenciesfordeployments-Whicharetheimplicitmoduledependencies?)项之一，您甚至不需要这样做。您可以继续使用它，就像使用 JDK 或 Java EE API 一样。

# uitableview - 如何更新/重新加载/刷新 UITableView 中的节标题视图？

> ID：11889733
> 
> 赞同：10
> 
> 时间：2012-08-09T18:29:53.977
> 
> 标签：uitableview, header

当我单击一行时，我愿意更改 UITableView 的特定标题视图。

我已经阅读**了所有**关于它的帖子。我尝试了“reloadData”、“setNeedDisplay”、“reloadSections:withRowAnimation:”和其他几个想法......没有什么可做的。我的标题视图要么不更新，要么只在我移动表格视图时才会更新（这不是我愿意实现的）。

我的代码现在看起来像这样（关于 UITableView 委托方法）：

```
-(NSInteger)numberOfSectionsInTableView:(UITableView*)tableView {
    if(tableView==_storeTableView){
        return [_storeDataArray count];
    } else {
        return 1;
    }
}

-(UIView*)tableView:(UITableView*)tableView viewForHeaderInSection:(NSInteger)section {
    if(tableView==_storeTableView){
        HouraStoreHeaderModel *headerModel = [self.headerInfoArray objectAtIndex:section];
        if (!headerModel.headerView) {
            NSString *shelfName = headerModel.shelf;
            headerModel.headerView = [[[HouraStoreHeaderView alloc] initWithFrame:CGRectMake(0.0, 0.0, _storeTableView.bounds.size.width, 80) title:shelfName section:section subheaderNumber:([headerModel.openedSubHeaders count]-1) delegate:self] autorelease];
        }
        return headerModel.headerView;
    } else {
        return nil;
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if(tableView==_storeTableView){
        HouraStoreHeaderModel *headerModel = [self.headerInfoArray objectAtIndex:section];
        NSDictionary *myDict = _storeDataDict;
        for (NSInteger i = 0; i < [headerModel.openedSubHeaders count]; i++) {
            myDict = [myDict objectForKey:[headerModel.openedSubHeaders objectAtIndex:i]];
        }
        NSInteger numberOfRowsInSection = [[myDict allKeys] count];
        return headerModel.open ? numberOfRowsInSection : 0;
    } else if(tableView==_searchTableView){
        return [_resultArray count];
    } else {
        return 0;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
    }
    if(tableView==_storeTableView){
        HouraStoreHeaderModel *headerModel = [self.headerInfoArray objectAtIndex:indexPath.section];
        NSDictionary *myDict = _storeDataDict;
        for (NSInteger i = 0; i < [headerModel.openedSubHeaders count]; i++) {
            myDict = [myDict objectForKey:[headerModel.openedSubHeaders objectAtIndex:i]];
        }
        cell.accessoryView=[[[HouraStoreCellView alloc] initWithFrame:CGRectMake(0.0, 0.0, _storeTableView.bounds.size.width, 50) title:[[myDict allKeys] objectAtIndex:indexPath.row]] autorelease];
        return cell;
    } else if (tableView==_searchTableView) {
        cell.textLabel.text = [_resultArray objectAtIndex:indexPath.row];
        return cell;
    } else {
        return cell;
    }
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    HouraStoreHeaderModel *headerModel = [self.headerInfoArray objectAtIndex:section];
    NSInteger height = 59.0 + ([headerModel.openedSubHeaders count]-1)*41.0;
    return height;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if(tableView==_storeTableView){
        HouraStoreHeaderModel *headerModel = [self.headerInfoArray objectAtIndex:indexPath.section];
        NSDictionary *myDict = _storeDataDict;
        for (NSInteger i = 0; i < [headerModel.openedSubHeaders count]; i++) {
            myDict = [myDict objectForKey:[headerModel.openedSubHeaders objectAtIndex:i]];
        }
        if ([[myDict objectForKey:[[myDict allKeys] objectAtIndex:indexPath.row]] isKindOfClass:[NSDictionary class]]) {
            [self cellOpened:indexPath];
        } else {
            [_activityIndicatorView startAnimating];
            [[NSNotificationCenter defaultCenter] addObserver:self
                                                     selector:@selector(_listProductsFoundedFinished:)
                                                         name:HouraSearchProductsDone
                                                       object:nil]; 
            NSString *searchString = [[myDict allKeys] objectAtIndex:indexPath.row];
            searchString = [searchString stringByReplacingOccurrencesOfString:@"\"" withString:@"\\u0022"];
            [_singleton.util beginSearchProducts:searchString context:@"2"];
        }
    } else if(tableView==_searchTableView){
        _searchBar.text = [_resultArray objectAtIndex:indexPath.row];

        [_searchBar resignFirstResponder];
        [_activityIndicatorView startAnimating];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(_listProductsFoundedFinished:)
                                                     name:HouraSearchProductsDone
                                                   object:nil]; 
        [_singleton.util beginSearchProducts:_searchBar.text context:@"2"];
    }
}

-(void)headerView:(HouraStoreHeaderView*)headerView headerOpened:(NSInteger)headerOpened {
    if (self.openSectionIndex!=NSNotFound) {
        [self closeAllHeaders];
    }
        //[self closeAllHeaders];
    HouraStoreHeaderModel *headerModel =nil;

    headerModel = [self.headerInfoArray objectAtIndex:headerOpened];
    headerModel.open = YES;
    headerModel.headerView.disclosureButton.selected = YES;

    NSDictionary *myDict = _storeDataDict;
    for (NSInteger i = 0; i < [headerModel.openedSubHeaders count]; i++) {
        myDict = [myDict objectForKey:[headerModel.openedSubHeaders objectAtIndex:i]];
    }
    NSInteger countOfRowsToInsert = [[myDict allKeys] count];

    NSMutableArray *indexPathsToInsert = [[NSMutableArray alloc] init];
    for (NSInteger i = 0; i < countOfRowsToInsert; i++) {
        [indexPathsToInsert addObject:[NSIndexPath indexPathForRow:i inSection:headerOpened]];
    }

    NSMutableArray *indexPathsToDelete = [[NSMutableArray alloc] init];

    NSInteger previousOpenSectionIndex = self.openSectionIndex;
    if (previousOpenSectionIndex != NSNotFound) {

        HouraStoreHeaderModel *previousHeaderModel = [self.headerInfoArray objectAtIndex:previousOpenSectionIndex];
        previousHeaderModel.open = NO;
        previousHeaderModel.headerView.disclosureButton.selected = NO;
        [previousHeaderModel.headerView toggleOpenWithUserAction:NO];
        NSInteger countOfRowsToDelete = [[[_storeDataDict objectForKey:previousHeaderModel.shelf ] allKeys] count];
        for (NSInteger i = 0; i < countOfRowsToDelete; i++) {
            [indexPathsToDelete addObject:[NSIndexPath indexPathForRow:i inSection:previousOpenSectionIndex]];
        }
    }
    UITableViewRowAnimation insertAnimation;
    UITableViewRowAnimation deleteAnimation;
    if (previousOpenSectionIndex == NSNotFound || headerOpened < previousOpenSectionIndex) {
        insertAnimation = UITableViewRowAnimationTop;   
        deleteAnimation = UITableViewRowAnimationBottom;
    } else {
        insertAnimation = UITableViewRowAnimationBottom;
        deleteAnimation = UITableViewRowAnimationTop;
    }

    [_storeTableView beginUpdates];
    [_storeTableView deleteRowsAtIndexPaths:indexPathsToDelete withRowAnimation:deleteAnimation];
    [_storeTableView insertRowsAtIndexPaths:indexPathsToInsert withRowAnimation:insertAnimation];
    [_storeTableView endUpdates];

    self.openSectionIndex = headerOpened;
}

-(void)headerView:(HouraStoreHeaderView*)headerView headerClosed:(NSInteger)headerClosed {

    HouraStoreHeaderModel *headerModel = [self.headerInfoArray objectAtIndex:headerClosed];

    headerModel.open = NO;
    headerModel.headerView.disclosureButton.selected = NO;
    [headerModel cleanOpenedSubHeaders];
    [self.headerInfoArray replaceObjectAtIndex:headerClosed withObject:headerModel];

    NSInteger countOfRowsToDelete = [_storeTableView numberOfRowsInSection:headerClosed];

    if (countOfRowsToDelete > 0) {
        NSMutableArray *indexPathsToDelete = [[NSMutableArray alloc] init];
        for (NSInteger i = 0; i < countOfRowsToDelete; i++) {
            [indexPathsToDelete addObject:[NSIndexPath indexPathForRow:i inSection:headerClosed]];
        }
        [_storeTableView deleteRowsAtIndexPaths:indexPathsToDelete withRowAnimation:UITableViewRowAnimationTop];
    }
    self.openSectionIndex = NSNotFound;
}

-(void)cellOpened:(NSIndexPath*)indexPath {
    HouraStoreHeaderModel *headerModel = [self.headerInfoArray objectAtIndex:indexPath.section];
    [self headerView:headerModel.headerView headerClosed:indexPath.section];
    [headerModel addOpenedSubHeaders:[[[_storeDataDict objectForKey:headerModel.shelf] allKeys] objectAtIndex:indexPath.row]];
    [self.headerInfoArray replaceObjectAtIndex:indexPath.section withObject:headerModel];
    headerModel = [self.headerInfoArray objectAtIndex:indexPath.section];
    [self headerView:headerModel.headerView headerOpened:indexPath.section];
}

-(void)closeAllHeaders {
    for (NSInteger i = 0; i < [self.headerInfoArray count]; i++) {
        HouraStoreHeaderModel *headerModel = [self.headerInfoArray objectAtIndex:i];
        [self headerView:headerModel.headerView headerClosed:i];
    }
} 
```

我想做的是，当我单击一行时，部分标题会更新，因此它包含一个带有行文本的新按钮。然后我关闭该行并在部分行中重新加载新数据。我设法完美地处理了这些行。但我找不到更新此标题视图的方法。

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-18T02:30:24.953

你直接改就行了。我在头文件中为一个标签创建了一个实例变量，我将把它放在我将创建的头视图中：

```
@interface MainViewController : UITableViewController {
    // creating my datasource array instance variable
    NSArray *_items;

    // this is the label I will add to the header view when I create it
    UILabel *_headerLabel;
}

@end 
```

在我的 tableView 中，当他们选择一行时，我调用一个函数来简单地更改标签上的文本：

```
@implementation MainViewController

- (id)init {
    self = [super initWithStyle:UITableViewStyleGrouped];

    / filling my datasource with test strings
    _items = @[@"one", @"two"];

    return self;
}

- (void)changeHeaderLabel:(NSString *)newLabel {
    // when this function gets called and is passed a string, I will simply
    // set the text on the label to the new string and viola!
    _headerLabel.text = newLabel;
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // this table will only have a single section for demo purposes
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // return the count of my datasource array
    return _items.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // attempt to create a cell by reusing one with a given identifier
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    // if I wasn't able to reuse one
    if (cell == nil) {
        // create one from scratch with that identifier
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
    }

    // now simply set the text on the cell from my data source array of strings
    cell.textLabel.text = _items[indexPath.row];

    // and return the cell
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // deselect the row so the cell automatically fades out after selection
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    // here you could do one of two things, either get a reference to the cell itself,
    // and then get the value stored in it's textLabel
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *newHeaderTitleString = selectedCell.textLabel.text;

    // OR you can get it right from your datasource
    NSString *newHeaderTitleString = _items[indexPath.row];

    // then just call the above function with the string as the single param
    [self changeHeaderLabel:newHeaderTitleString];
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    // here I just create a view that will span the whole frame and is an arbitrary height
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 80)];
    // set the background color to clear
    headerView.backgroundColor = [UIColor clearColor];

    // then I initialize my instance variable with a frame that's centered in the view
    // for aesthetic purposes
    _headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, self.view.frame.size.width - 10, 80)];

    // then I set the text color, add an autoresizing mask so if the view rotates
    // it still remains centered properly, set the text to some starting value, 
    // and add it to the headerView I previously created
    _headerLabel.textColor = [UIColor darkGrayColor];
    _headerLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    _headerLabel.text = @"Before";
    [headerView addSubview:_headerLabel];

    // then I return the headerView
    return headerView;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    // return an arbitrary height here for testing
    return 80;
} 
```

结果如下：

![在此处输入图像描述](../Images/4e4362bebbf9ec1e5e8e3b1828dcfb69.png)

![在此处输入图像描述](../Images/074a6f7371c984beea19530a7c92d622.png) ![在此处输入图像描述](../Images/a54022db70f1d787cebd1e13f28cedda.png)

如果您有任何问题，请告诉我！这只是一个演示它的快速示例，但您可能希望以完全不同的方式自定义视图。这至少应该可以解决您的问题并为您提供工作的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T00:03:47.943

您是否尝试过将传入的属性`reloadRowsAtIndexPaths:withRowAnimation:`设置为？因此，仅重新加载第 3 节的标题，例如，看起来像`row``NSIndexPath``NSNotFound`

```
NSIndexPath * headerIndexPath = [NSIndexPath indexPathForRow: NSNotFound section:3];
[self.tableView reloadRowsAtIndexPaths:@[headerIndexPath] withRowAnimation: UITableViewRowAnimationAutomatic]; 
```

我什么都不保证，但我很确定它以前可以工作，因为我用过几次。

但即使它有效，它仍然是一个随时可能被 Apple 破解的 hack。

# 编辑

好的不要紧。我在 Xcode 5 中使用 iOS 7 进行了尝试，出于某种原因，即使使用`NSNotFound`行号，它仍然会重新加载整个部分（及其所有单元格）。所以这不再起作用了，该死的。

# android - Android GridView 从下到上加载图像问题

> ID：11889734
> 
> 赞同：0
> 
> 时间：2012-08-09T18:30:00.330
> 
> 标签：android, gridview, asynchronous

我正在使用 GridView 显示图像并以异步方式加载这些图像。一切正常，唯一的问题是图像从下到上加载到 GridView 中，而不是从上到下。真的无法理解如何解决这个问题。请在这个问题上帮助我。

EDIT1：GridView 适配器代码：

```
public class ImageThumbAdapter extends BaseAdapter {

        private Activity context;
        private ArrayList<HashMap<String, String>> mImageList;
        private ImageLoader mImageLoader;
        private int mItemHeight = 0;
        private int mNumColumns = 0;
        private GridView.LayoutParams mImageViewLayoutParams;

        public ImageThumbAdapter(Activity c,
                ArrayList<HashMap<String, String>> imageList) {
            context = c;
            mImageList = imageList;
            mImageLoader = new ImageLoader(context);
            mImageViewLayoutParams = new GridView.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        }

        public int getCount() {
            return mImageList.size();
        }

        public Object getItem(int position) {
            return mImageList.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public void addImage(HashMap<String, String> image) {
            mImageList.add(image);
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            // Now handle the main ImageView thumbnails
            ImageView imageView;

            if (convertView == null) { // if it's not recycled, instantiate and
                                        // initialize
                imageView = new ImageView(context);
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setLayoutParams(mImageViewLayoutParams);
            } 
            else { // Otherwise re-use the converted view
                imageView = (ImageView) convertView;
            }

            if (imageView.getLayoutParams().height != mItemHeight) {
                imageView.setLayoutParams(mImageViewLayoutParams);
            }

            String imageName = String.format(
                    "gallery_",
                    mImageList.get(position).get(TAG_THUMB_URL));

            imageView.setTag(imageName);
            mImageLoader.setDefualtStub(R.drawable.ic_thumbnail);

            mImageLoader.DisplayImage(
                    mImageList.get(position).get(TAG_THUMB_URL), context,
                    imageView, imageName, new ImageLoadingListener());

            return imageView;
        }

        ....

    } 
```

Edit2：位置日志

```
08-10 23:16:23.132: I/System.out(785): Position: 0
08-10 23:16:23.142: I/System.out(785): Position: 0
08-10 23:16:23.142: I/System.out(785): Position: 1
08-10 23:16:23.152: I/System.out(785): Position: 2
08-10 23:16:23.152: I/System.out(785): Position: 3
08-10 23:16:23.152: I/System.out(785): Position: 4
08-10 23:16:23.162: I/System.out(785): Position: 5
08-10 23:16:23.162: I/System.out(785): Position: 6
08-10 23:16:23.162: I/System.out(785): Position: 7
08-10 23:16:23.172: I/System.out(785): Position: 8
08-10 23:16:23.172: I/System.out(785): Position: 9
08-10 23:16:23.172: I/System.out(785): Position: 10
08-10 23:16:23.182: I/System.out(785): Position: 11
08-10 23:16:23.182: I/System.out(785): Position: 12
08-10 23:16:23.192: I/System.out(785): Position: 13
08-10 23:16:23.192: I/System.out(785): Position: 14
08-10 23:16:23.192: I/System.out(785): Position: 15
08-10 23:16:23.312: D/dalvikvm(785): GC_EXPLICIT freed 434K, 20% free 9440K/11655K, paused 5ms+5ms
08-10 23:16:23.322: D/ImageLoader(785): gallery_http:%0%0s3.amazonaws.com%0DEV_ALC_USRDATA%013222763351652338265%0cms_Gallery%02x_1342687302114.143.121.36Apple-icon.gif.jpg Image doesn't exits in cache
08-10 23:16:23.322: D/ImageLoader(785): gallery_http:%0%0s3.amazonaws.com%0DEV_ALC_USRDATA%013222763351652338265%0cms_Gallery%02x_1342687302114.143.121.36Apple-icon.gif.jpg Downloading from server
08-10 23:16:23.902: D/dalvikvm(785): GC_EXPLICIT freed 98K, 19% free 9502K/11655K, paused 5ms+5ms
08-10 23:16:23.902: I/System.out(785): Position: 0
08-10 23:16:23.912: I/System.out(785): Position: 0
08-10 23:16:23.932: D/ImageLoader(785): igallery_http:%0%0s3.amazonaws.com%0DEV_ALC_USRDATA%013222763351652338265%0cms_Gallery%02x_1342687299114.143.121.3627.png.jpg Image doesn't exits in cache
08-10 23:16:23.952: D/ImageLoader(785): igallery_http:%0%0s3.amazonaws.com%0DEV_ALC_USRDATA%013222763351652338265%0cms_Gallery%02x_1342687299114.143.121.3627.png.jpg Downloading from server
08-10 23:16:25.202: D/dalvikvm(785): GC_EXPLICIT freed 110K, 18% free 9614K/11655K, paused 4ms+6ms
08-10 23:16:25.212: I/System.out(785): Position: 0
08-10 23:16:25.222: I/System.out(785): Position: 0
08-10 23:16:25.242: D/ImageLoader(785): igallery_http:%0%0s3.amazonaws.com%0DEV_ALC_USRDATA%013222763351652338265%0cms_Gallery%02x_1342572563101.98.165.177bleyendall.png.jpg Image doesn't exits in cache
08-10 23:16:25.262: D/ImageLoader(785): igallery_http:%0%0s3.amazonaws.com%0DEV_ALC_USRDATA%013222763351652338265%0cms_Gallery%02x_1342572563101.98.165.177bleyendall.png.jpg Downloading from server
08-10 23:16:26.122: D/dalvikvm(785): GC_EXPLICIT freed 89K, 17% free 9691K/11655K, paused 4ms+5ms
08-10 23:16:26.122: I/System.out(785): Position: 0
08-10 23:16:26.132: I/System.out(785): Position: 0

... 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T18:11:13.750

在我发现 gridview 的 stackFromBottom 属性之前，我遇到了同样的问题。

在 gridview 的 xml 中，输入：

```
android:stackFromBottom="false" 
```

# java - StreamCorruptedException 与 ObjectInputStream 上的大量数据

> ID：11889735
> 
> 赞同：2
> 
> 时间：2012-08-09T18:30:18.157
> 
> 标签：java, corruption, objectinputstream

我有一个基于 TCP 的服务器-客户端设置，其中客户端向服务器发送了许多数据集。读/写使用 ObjectInput/OutputStream。在正常情况下我没有任何问题，但是当数据流变大时，我得到了 StreamCorruptedException: invalid type code。无效代码每次都不一样。我打开套接字一次并调用同步方法从多个线程发送数据。

客户：

```
socket = new Socket("localhost", sockNum);
out = new ObjectOutputStream(socket.getOutputStream());
in = new ObjectInputStream(socket.getInputStream());

public synchronized void sendMsg(Message msg){
    try{
        out.writeObject(security.signObject(msg, privKey));
        out.reset();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

服务器：

```
ServerSocket server = new ServerSocket(sockNum);
Socket client = server.accept();
ObjectInputStream in = new ObjectInputStream(client.getInputStream());

while(threadActive){
    Object line = in.readObject();
    handleObject(line);
} 
```

**更新：我在每次发送后添加了 out.reset() ，但这对问题没有帮助。我还在循环中添加了睡眠语句以降低数据速率。这消除了错误，但不是真正的解决方案。**

编辑：所以自从我最初提出这个问题以来已经有一段时间了，但我又遇到了这个问题。我尝试设置我的系统，以便在每条发送消息后，线程等待“确认”消息作为回报。如果接收进程有 StreamCorruptedException，它会发回“重新发送”而不是 ack。这似乎导致的问题多于解决方案。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:33:50.847

听起来您正在以多线程方式写入输出流，即您正在写入示例之外的其他地方。

顺便说一句：您是否定期重置（）流以防止内存泄漏？

# iphone - 在越狱的 iPhone 上执行二进制文件

> ID：11889742
> 
> 赞同：2
> 
> 时间：2012-08-09T18:31:01.017
> 
> 标签：iphone, binary, jailbreak, nstask

由于 iPhone 将其应用程序沙箱化，因此我无法访问该`/bin/`文件夹。因此，我使用 SSH 连接`/bin/date`从 iPhone 上获取二进制文件，并将其包含在我的项目中。当我使用`NSLog`它时，我的文件的路径是正确的：`/var/mobile/Applications/95078888-DDA8-4C1E-93DC-1F9E0A26E70A/Documents/date`. 我遇到的问题如下。有谁知道我该如何解决这个错误？

*注意：如果我在模拟器中运行它并使用此代码执行与 mac OSX 兼容的任何二进制文件，它可以工作，但是当我尝试使用 iPhone 二进制文件在设备上运行它时，它会给我带来问题。

错误：

> 2012-08-09 14:23:13.757 TestBinary [7891:707] 由于未捕获的异常**“NSInternalInconsistencyException”**而终止应用程序，原因：“无法分叉：errno 1”
> 
> First throw call stack: (0x359b388f 0x335d7259 0x359b3789 0x359b37ab 0x34deb915 0xda5af 0x3590d3fd 0x330cee07 0x330cedc3 0x330ceda1 0x330ceb11 0x330cf449 0x330cd92b 0x330cd319 0x330b3695 0x330b2f3b 0x336a522b 0x35987523 0x359874c5 0x35986313 0x359094a5 0x3590936d 0x336a4439 0x330e1cd5 0xd9ecd 0xd9e98)
> 
> 终止称为抛出异常
> 
> 节目接收信号：“SIGABRT”。数据格式化程序暂时不可用，将在“继续”后重试。（找不到 dlopen 函数，所以无法加载共享库。）
> 
> mi_cmd_stack_list_frames：堆栈中没有足够的帧。
> 
> mi_cmd_stack_list_frames：堆栈中没有足够的帧。

调用日期文件的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *path = [NSString stringWithFormat:@"%@/date", documentsDirectory];

NSLog(@"%@", path);

NSTask *task = [[NSTask alloc] init];
[task setLaunchPath: path];

NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];

NSFileHandle *file;
file = [pipe fileHandleForReading];

[task launch];

NSData *data;
data = [file readDataToEndOfFile];

NSString *string;
string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];

label.numberOfLines=0;
label.text = string;

[string release];
[task release]; 
```

我的 NSTask 文件：

```
#import <Foundation/NSObject.h>

@class NSString, NSArray, NSDictionary;

@interface NSTask : NSObject

- (id)init;

- (void)setLaunchPath:(NSString *)path;
- (void)setArguments:(NSArray *)arguments;
- (void)setEnvironment:(NSDictionary *)dict;
- (void)setCurrentDirectoryPath:(NSString *)path;
- (void)setStandardInput:(id)input;
- (void)setStandardOutput:(id)output;
- (void)setStandardError:(id)error;

- (NSString *)launchPath;
- (NSArray *)arguments;
- (NSDictionary *)environment;
- (NSString *)currentDirectoryPath;

- (id)standardInput;
- (id)standardOutput;
- (id)standardError;

- (void)launch;

- (void)interrupt; 
- (void)terminate; 

- (BOOL)suspend;
- (BOOL)resume;

- (int)processIdentifier; 
- (BOOL)isRunning;

- (int)terminationStatus;

@end

@interface NSTask (NSTaskConveniences)

+ (NSTask *)launchedTaskWithLaunchPath:(NSString *)path arguments:(NSArray *)arguments;

- (void)waitUntilExit;

@end

FOUNDATION_EXPORT NSString * const NSTaskDidTerminateNotification;
#endif 
```

编辑1：

我使用以下目录解压：[https ://github.com/samsoffes/ssziparchive](https://github.com/samsoffes/ssziparchive)

这是我解压缩并执行的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *path2 = [[NSBundle mainBundle] pathForResource:@"date" ofType:@"zip"];
[SSZipArchive unzipFileAtPath: path2 toDestination:documentsDirectory];

NSString *path = [NSString stringWithFormat:@"%@/date", documentsDirectory];

NSFileManager* fileManager = [NSFileManager defaultManager];
NSMutableDictionary *attributes = [NSMutableDictionary dictionaryWithDictionary:[fileManager attributesOfItemAtPath:path error:nil]];

[attributes setValue:[NSNumber numberWithShort: 0777] 
              forKey:NSFilePosixPermissions];
NSError* err;
[fileManager setAttributes: attributes ofItemAtPath: path error: &err];

NSTask *task = [[NSTask alloc] init];
[task setLaunchPath: path];

NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];

NSFileHandle *file;
file = [pipe fileHandleForReading];

[task launch];

NSData *data;
data = [file readDataToEndOfFile];

NSString *string;
string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];

label.numberOfLines=0;
label.text = string;

[string release];
[task release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:31:15.770

我不确定**为什么**会发生这种情况，但是当 Xcode 构建时，它会以某种方式破坏`date`二进制文件。如果您查看原始`date`文件（在您的项目文件夹下），然后在 Xcode*构建*目录下找到相同的文件（例如）：

```
/Users/myusername/Library/Developer/Xcode/DerivedData/HelloJB-gsokzlpnejddadbccgrfkxnumkyl/Build/Products/Release-iphoneos/HelloJB.app 
```

您可以`diff`对这两个文件运行命令，它会告诉您这些二进制文件不同。这足以导致这个问题。

出于某种原因，Xcode 正在查看这种类型的资源，并对其进行处理。`pngcrush`例如，我知道它会尝试在您的应用程序的 png 资源上使用某种实用程序。也许这是相似的。

无论如何，我发现解决此问题的一种方法是将`date`文件压缩到 Mac 上。然后，将`date.zip`其作为捆绑资源包含在您的项目中。清洁和建造。Xcode 不会损坏 zip 文件。

现在，当您的应用程序启动时，它需要`date.zip`从其捆绑资源中解压缩文件，并将解压缩后的版本存储在**Documents**或**Caches**或您想要的任何位置。您可能还需要记住设置执行权限。

[看到这个以编程方式解压缩文件](https://stackoverflow.com/a/3304652/119114)

**更新：**

之后，您可能必须将文件设置为具有可执行权限。像这样的东西：

```
NSFileManager* fileManager = [NSFileManager defaultManager];
NSMutableDictionary* attributes = [[NSMutableDictionary alloc] init];
NSNumber* permission = [NSNumber numberWithLong: 0755];
[attributes setObject:permission forKey: NSFilePosixPermissions];
NSError* err;
[fileManager setAttributes: attributes ofItemAtPath: filePath error: &err]; 
```

# shell - diff -i（大写'i'）在选项传递为变量时不起作用

> ID：11889744
> 
> 赞同：2
> 
> 时间：2012-08-09T18:31:12.450
> 
> 标签：shell, unix, diff, gnu

`diff`我正在编写一个脚本来使用 GNU 版本的命令找出文件之间的差异。在这里，我需要忽略 html 注释 <!-- 以及匹配的任何模式（通过文件作为输入提供）。

文件`wxy/a`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
some text here
           <property name="loginUrl" value="http://localhost:15040/ab/ssoLogin"/>
     <!--property name="cUrl" value="http://localhost:15040/ab/ssoLogin" /-->
</beans> 
```

文件`xyz/a`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
some text there
           <property name="loginUrl" value="http://localhost:15045/ab/ssoLogin"/>
     <!--property name="cUrl" value="http://localhost:15045/ab/ssoLogin" /-->
</beans> 
```

模式输入文件`input.conf`：：

```
[a]
http://.*[:0-9]*/ab/ssoLogin
[some other file]
....
.... 
```

我的脚本会读取文件名 [a] 的 input.conf 并将其放入临时文件lines_to_ignore，现在我读取文件lines_to_ignore 并将模式附加到如下所示的变量中

`compare_file.sh`

```
diff_ignore_options="-I \"\!--\"" # Ignore option for <!-- Comments

for iline in `cat lines_to_ignore`; do
    diff_ignore_options=${diff_ignore_options}" -I \"$iline\""
    echo "-----------------------------------------------------------"
    diff -I "\!--" -I "$iline" wxy/a xyz/a
    echo "-----------------------------------------------------------"
done

diff $diff_ignore_options wxy/a xyz/a 
```

现在输出：

```
-----------------------------------------------------------
19c19
< some text here
---
> some text there
-----------------------------------------------------------

19,21c19,21
< some text here
<            <property name="loginUrl" value="http://localhost:15040/ab/ssoLogin"/>
<      <!--property name="cUrl" value="http://localhost:15040/ab/ssoLogin" /-->
---
> some text there
>            <property name="loginUrl" value="http://localhost:15045/ab/ssoLogin"/>
>      <!--property name="cUrl" value="http://localhost:15045/ab/ssoLogin" /--> 
```

为什么 diff 命令中的变量替换不起作用？

```
diff $diff_ignore_options wxy/a xyz/a 
```

我想以可变的方式进行操作，因为我可能必须在某些文件中匹配多个模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:57:08.263

问题`!`在于 shell 用于历史扩展的字符。此外，您在`$diff_ignore_options`变量中包含转义的双引号字符；由于您要忽略的模式不包含任何`"`字符，因此您不希望这样做。

这应该有效（注意使用单引号以避免将`!`其视为元字符）：

```
diff_ignore_options='-I !--'
diff $diff_ignore_options this_file that_file 
```

然后您可以添加更多这样的模式：

```
diff_ignore_options="$diff_ignore_options -I foobar" 
```

# php - Codeigniter - 当用户输入 index.php 时显示 404 页面

> ID：11889745
> 
> 赞同：1
> 
> 时间：2012-08-09T18:31:17.287
> 
> 标签：php, codeigniter

当用户在 URL 中键入 index.php 时，我需要显示 404 页面：

```
http://localhost:8080/site_name/index.php/home 
```

我在 routes.php 中添加了这个`$route['index.php/(:any)'] = 'custom404';`

它没有帮助；当用户键入`http://localhost:8080/site_name/index.php/home`主页时显示而不是 404 未找到。

**知道当用户在 URL 中键入 index.php 时如何显示 404 页面吗？**

**我的 htaccess：**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /site_name/index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:33:28.983

将默认控制器设置为 custom404

```
$route['default_controller'] = "custom404"; 
```

或者你可以试试这个：

```
$route['index.php/^(.+)$'] = "custom404"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:42:37.023

您可以一起从您的网址中删除 index.php。CodeIgniter 默认启用，但您可以轻松删除它，只需按照其用户指南中的指南进行操作：http: [//codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)

编辑：还应该知道 url 中的 index.php 不是你的控制器的一部分，它只是 CodeIgniter 放在那里的东西，所以你不能通过使用你的路由来删除它。

# objective-c - 无法在 iOS 中加载邮件客户端

> ID：11889747
> 
> 赞同：0
> 
> 时间：2012-08-09T18:31:24.010
> 
> 标签：objective-c, xcode, mfmailcomposeviewcontroller

我注意到我多次使用邮件功能，所以我决定为重复多次的函数创建一个独立的类，而不是多次复制粘贴代码

类调用成功，邮件函数调用成功，但是调用函数后手机邮件客户端没有出现

这是我的代码

在主类中，我执行以下调用

```
-(void)emailFunction{
...

CommonlyUsed Email = [[CommonlyUsed alloc] init];
[Email sendMail:receipient :CC :BCC :subject :body];

...
} 
```

在我的 CommonUsed.h 中，我有以下 IDE：

```
#import <UIKit/UIKit.h>
#import <MessageUI/MFMailComposeViewController.h>
#import <MessageUI/MessageUI.h>

@interface CommonlyUsed : UIViewController <MFMailComposeViewControllerDelegate>{ 
```

在 CommonUsed.m 我有以下内容：

```
-(void)sendMail:(NSString*)receipient:(NSString*)cc:(NSString*)bcc:(NSString*)subject:(NSString*)body{

 MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];
    [ composer setMailComposeDelegate:self];

 if ( [MFMailComposeViewController canSendMail]){
if (receipient) {
            [composer setToRecipients:[NSArray arrayWithObjects:receipient, nil]];
        }

        if (cc) {
            [composer setCcRecipients:[NSArray arrayWithObjects:receipient, nil]];
        }

        if (bcc) {
            [composer setBccRecipients:[NSArray arrayWithObjects:receipient, nil]];
        }

        if (subject) {
             [composer setSubject:subject];
        }

 [composer setMessageBody:body isHTML:HTMLBody];

        [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];

        [self presentModalViewController:composer animated:YES];
        }
}

- (void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {
    if(error){
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"error" message:[NSString stringWithFormat:@"error %@", [error description]] delegate:nil cancelButtonTitle:@"dismiss" otherButtonTitles:nil, nil];
        [alert show];
        [self dismissModalViewControllerAnimated:YES];
    }
    else{
        [self dismissModalViewControllerAnimated:YES];
    }

    } 
```

代码编译并运行没有错误我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:53:22.797

您发送`presentModalViewController:`到您`Email`的 class实例`CommonlyUsed`，但此实例不是视图层次结构中的视图控制器。

您必须发送`presentModalViewController:`到当前活动的视图控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:11:32.807

而不是这样做：

`[self presentModalViewController:composer animated:YES];`

做这个：

`[[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentModalViewController:composer animated:YES];`

或这个：

`[[[[UIApplication sharedApplication] keyWindow] rootViewController] presentModalViewController:composer animated:YES];`

您的电子邮件类当前不是活动视图控制器，因此它无法呈现模式视图控制器，您需要使用活动视图控制器，例如主 UIWindow 的 rootViewController。

**编辑**：

如果您在 emailClient 被解除时使用 ARC，则您的对象（委托）将从内存中删除，因此解决方案是将 CommonlyUsed 类设为 Singleton：

```
+(CommonlyUsed *)sharedInstance {

    static CommonlyUsed * cu = nil;

    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{

        cu = [[CommonlyUsed alloc] init];

    });

    return cu;
} 
```

所以你会这样使用它：

```
CommonlyUsed * email = [CommonlyUsed sharedInstance];
[email sendMail:receipient :CC :BCC :subject :body]; 
```

# ember.js - Ember 路由器 - 从同一级别的不同控制器加载内容

> ID：11889748
> 
> 赞同：0
> 
> 时间：2012-08-09T18:31:27.073
> 
> 标签：ember.js, ember-old-router

有两条路由 ( `comments`, )`trackbacks`嵌套在`post`我直接通过`content`. 不幸的是，控制器似乎没有完全初始化并且内容没有被加载。`commentsController``trackbacksController``/posts/1/trackbacks`

这是看起来的`Router`样子：

```
Router = Ember.Router.create
  root: Ember.Route.extend
    index: Ember.Route.extend
      route: '/'

    post: Ember.Route.extend
      route: '/posts/:post_id'

      index: Ember.Route.extend
        route: '/'
        redirectsTo: 'comments'

      comments: Ember.Route.extend
        route: '/comments'
        connectOutlets: (router) ->
          controller = router.get('postController')
          controller.connectOutlet 'comments', controller.get('comments')

      trackbacks: Ember.Route.extend
        route: '/trackbacks'
        connectOutlets: (router) ->
          controller = router.get('postController')
          controller.connectOutlet 'trackbacks', controller.get('trackbacks') 
```

这是`TrackbacksController`：

```
App.TrackbacksController = App.ArrayController.extend
  init: ->
    console.log App.router.get('attributesController.content') # : []
    @_super() 
```

是否有`router.commentsController`手动初始化以从中获取内容的最佳实践`trackbacksController`？我的方法有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:58:25.330

`controllers`您可以使用控制器的属性从控制器访问所有控制器。例如，从 trackbacksController 中，您可以使用`this.get('controllers.commentsController')`

编辑：我意识到我没有得到你的问题。我认为这两个控制器之间存在一些依赖关系，从我的角度来看，您不能依赖应用程序初始化顺序。因此在 init 方法中，您将无法访问其他控制器。

但是我认为你可以在 trackbacksController 中放置一个观察者，它观察`controllers.commentsController.content`or `controller.commentsController.@each`，所以当 commentsController 被填充时，你会得到通知。

# asp-classic - 使用带有经典 ASP 的 DotNetZip 在 zip 文件的根目录添加文件

> ID：11889749
> 
> 赞同：0
> 
> 时间：2012-08-09T18:31:30.887
> 
> 标签：asp-classic, dotnetzip

我在 Windows 2008 服务器上安装并运行良好的 DotNetZip。

使用经典的 ASP 页面，我想将一堆以逗号分隔的文件捆绑给用户，然后以 zip 文件的形式发送。

以下代码工作正常，但它存储了所有路径信息，因此 zip 文件中的文件位于一些荒谬的目录中，例如`C:\Inetpub\wwwroot\appname\_temp\`

我正在使用以下代码：

```
Set objZip = CreateObject("Ionic.Zip.ZipFile")
sFileArray = Split(sFileArray, "|")
For iCount = 0 To UBound(sFileArray)
If sFileArray(iCount) <> "" Then
objZip.AddFile sFileArray(iCount)
End If
Next
objZip.Name = sFilePath & "test.zip"
objZip.Save()
objZip.Dispose()
Set objZip = Nothing 
```

我看到`AddFile`如果添加第二个参数，该方法允许您指定希望添加的文件驻留在 zip 文件中的位置。根据文档`objZip.AddFile sFileArray(iCount), ""`应该把文件放在 zip 文件的根目录下。

但是，当我添加该参数时，出现以下错误：

```
 Wrong number of arguments or invalid property assignment: 'objZip.AddFile' 
```

有人知道我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:32:03.613

我认为您误解了文档。如果第二个参数是`null`，则使用要添加的文件的目录路径。如果第二个参数是空字符串“”，则文件将添加到 zip 中的根级别。快速查看 Ioniz.zip.dll 表明，`AddFile`方法的单参数覆盖只是调用双参数覆盖，第二个参数设置为 null。

因此，您的添加文件应如下所示：

```
objZip.AddFile sFileArray(iCount), "" 
```

得到你想要的结果。

# android - Android Emulator Galaxy s3 设置不使用 xhdpi 资产

> ID：11889753
> 
> 赞同：0
> 
> 时间：2012-08-09T18:31:36.740
> 
> 标签：android

根据[此处](http://developer.android.com/guide/practices/screens_support.html#testing)的 Android 文档 来测试 xhdpi 正常大小的设备，您必须拥有 640*960 的皮肤。如果我这样做，我会看到我的 drawable-xhdpi 资源已被使用。

但是，galaxy s3 模拟器设置为 WXGA720 皮肤，密度为 320。drawable-xhdpi 不用于此模拟器。我客户的 CTO 拥有新的 s3，所以我想在发送之前确保它可以正常工作。关于为什么 s3 模拟器不使用 xhdpi 资产的任何想法？

# asp.net - 什么会导致 IE9 重定向失败？

> ID：11889759
> 
> 赞同：1
> 
> 时间：2012-08-09T18:31:57.423
> 
> 标签：asp.net

我正在查看一个不是我编写的现有 Web 表单应用程序。它在 IE8 和 FF 中按预期工作，但在 IE9 中失败：

> “Internet Explorer无法显示该网页”

该代码是一个执行 context.Response.Redirect 的简单处理程序。

使用 Fiddler，我可以看到 302 响应，所以一切看起来都很好。

任何想法为什么 IE9 的行为不同，或者我可以做些什么来修复？

由于请求代码而编辑：

当然，这是行： context.Response.Redirect("file:" & Filename.Replace("/", "\"))

提琴手显示：

```
HTTP/1.1 302 Found
Date: Thu, 09 Aug 2012 19:01:24 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Location: file:J:\Replay\Meetings\Meetings-2012.pdf
Cache-Control: private
Content-Type: text/html; charset=utf-8
Content-Length: 254

<html><head><title>Object moved</title></head><body>
<h2>Object moved to <a href="file:J:\Replay\Meetings\Meetings-2012.pdf">here</a>.</h2>
</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:53:51.680

这可能是区域海拔问题。具体来说，IE 试图阻止一个安全区域中的站点将自己提升到另一个安全区域。从本地计算机外部重定向到本地计算机被认为是危险的。

可能的修复（我不确定这些是否适用于 IE9）：
1\. 将触发这些重定向的站点添加到受信任区域。
2\. 更改您的安全设置。请注意“权限较低的 Web 内容区域中的网站可以导航到该区域”设置（Internet 选项 -> Internet 区域 -> 自定义级别）。您需要将“我的电脑区”设置为“启用”或“提示”。我怀疑这可以通过将“我的电脑区”添加到您的区域列表（[http://support.microsoft.com/kb/315933](http://support.microsoft.com/kb/315933)）或直接编辑“我的电脑区”（通过注册表）来完成。您可能还需要添加 HKCU\Software\Microsoft\Internet Explorer\Main\Disable_Local_Machine_Navigate 键（设置为 0 REG_DWORD）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:16:02.417

我只是想确定一下，但是您的磁盘上是否有*J:\Replay\Meetings\Meetings-2012.pdf*文件？file : *//*协议仅用于访问本地文件。我想没关系，正如您所写的那样，它在其他浏览器中按预期工作。

如果是这样，我已经读到这种错误可能是由文件的无效 url 引起的。尝试像这样重定向：

```
context.Response.Redirect("file://" & Filename); 
```

让我知道这是否有帮助。

# git - 使用 git-ftp 将子文件夹推送到 ftp

> ID：11889760
> 
> 赞同：9
> 
> 时间：2012-08-09T18:31:59.337
> 
> 标签：git, deployment, ftp, git-ftp

如何使用 git-ftp 仅将某个子文件夹（html5 样板的发布文件夹）推送到指定的 ftp 目录？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T21:03:38.090

有两种可能：

**一种**

1.  使发布文件夹成为 git 存储库。
2.  在该仓库中使用 git ftp

**B（好多了）**

使用 git-ftp 的[syncroot 选项](https://github.com/git-ftp/git-ftp/blob/master/man/git-ftp.1.md#options)指定要同步的目录，就好像它是 git 项目根路径一样。在 [git-ftp] 下的 .git/config 中添加

```
syncroot = publish/ 
```

# ruby-on-rails - Rails 协会表格

> ID：11889764
> 
> 赞同：0
> 
> 时间：2012-08-09T18:32:16.440
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我只是想知道我应该如何构建一个 bookManager 。他所遵循的模型

```
|-------------|1---------*|-------------|
| Customer    |           | BookManager |
|-------------|           |-------------|
| ID          |           | ID          |
| First       |           | customer_id |
| Last        |           | isDeleted   |
| Email       |           | isVisible   |
| Password    |           | description |
|-------------|           |-------------| 
```

关联如下

```
class Customer < ActiveRecord::Base
# RELATIONSHIP
    has_many :book_managers
    accepts_nested_attributes_for :book_managers, allow_destroy: :true
    attr_accessible :admin, :first_name, :last_name, :middle_name, :email, :email_confirmation, :password, :password_confirmation, :image, :book_managers_attributes,  :locale
end

class BookManager < ActiveRecord::Base
    belongs_to :customer
    attr_accessible :customer_id, :visible, :description
end 
```

表单就像这样 Customer#edit 视图

```
 <h3>Book</h3>
  <div><%= render 'book_managers/form' %></div> 
```

BookManagers/表格

```
<%= form_for(@book_manager) do |f| %>
  <fieldset>
    <%= f.label :description %>
    <%= f.text_field :description %>
  </fieldset>

  <fieldset>
    <%= f.check_box :visible %>
    <%= f.label :visible %>
  </fieldset>

  <div class="actions">
    <%= f.submit %>
  </div> 
```

这是大奖的难题。控制器 目前我在 BookManager 控制器中什么都没有，因为它的调用者往往拥有数据信息。但我真的对客户控制器感到困惑。

我想要的是关联并填写 BookManager 与客户及其属性。这就是我现在所拥有的。

客户控制器

```
 @customer = Customer.find(params[:id])

#       @book_manager = BookManager.new
#       bm = @customer.book_managers.build
#       bm.books.build

        @book_manager = @customer.book_managers.build 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:22:55.410

使用名为 fields_for 的东西来构建子模型

```
<%= form_for @customer do |customer_form| %>
  First name: <%= customer_form.text_field :first_name %>
  Last name : <%= customer_form.text_field :last_name %>
  <%= fields_for @book_manager do |book_manager_fields| %>
    Admin?  : <%= book_manager_fields.check_box :admin %>
  <% end %>

  <%= f.submit %>
<% end %> 
```

这种性质的东西。因此，当您提交时，它会将所有数据一起发布在您的参数上。

`@customer.save`还可以节省图书管理员

# c++ - 模板类成员函数的特化 - 在 Linux 上使用 g++-4.7

> ID：11889765
> 
> 赞同：1
> 
> 时间：2012-08-09T18:32:18.687
> 
> 标签：c++, linux, templates, g++, partial-specialization

我从这个线程中知道 -[模板类成员函数只专门化](https://stackoverflow.com/questions/5949992/template-class-member-function-only-specialization) ，如果我专门化一个类模板，我需要专门化所有成员函数。

所以，我的理由是我会“实例化”一个模板类。（不确定它是否正确的说法）

然后，由于这个实例化的类是一个成熟的类，我可以专门化一个特定的方法。

```
// I have a template class like this - 
template<class T, T invalidVal, int e> class A
{ 
     static inline bool dummy(T value) 
    {
        return 0;
    }
 }

 // Now I create classes from the above template class with 
 // T=void*, invalidVal=NULL & e=0 
 // And with T=void *, invalidVal=NULL & e=1 
 // And I typedef these classes to use them later
 typedef A<void *, (void *)NULL, 0> A_0;
 typedef A<void *, (void *)NULL, 1> A_1;

 // So now, what I was expecting was that A_0 & A_1 are classes and 
 // they can have their own specialized dummy() method
 // So I tried following - 
 inline bool A_0::dummy(void *value) 
 {
     return value != invalidVal;
 }

 inline bool A_1::dummy(void *value)
 {
     return value == invalidVal;
 } 
```

上面的代码在 Windows 环境下工作。（视觉工作室 2008）

但是这种专业化在 Linux 上不起作用 - 使用 g++-4.7。通过阅读其他一些线程，我还将 -std=c++11 传递给我的 g++ 编译命令。

我收到以下 2 个错误 -

```
1\. specializing member ‘A<void*, 0u, 0>::dummy’ requires ‘template<>’ syntax 
2\. invalidVal was not declared in this scope 
```

现在，错误号。`template<>`如果我在前面添加一个让我更担心的 1 消失`inline bool A_0::dummy(void *value)`，因为我知道专业化并没有如我所愿地发生。

错误编号 2不会消失。

我对模板类成员函数专业化越来越感到困惑。我在这里错过了什么？g ++抱怨的任何原因？有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:43:07.453

我不确定您所说的“专业化没有按我的意愿发生”是什么意思。你到底想要什么？

在您的代码中，您试图在不专门化类本身的情况下执行模板类成员的*显式专门化。*C++ 中所有形式的显式特化都需要`template<>`语法

```
template<>
inline bool A_0::dummy(void *value) 
{
  // Whatever
}

template<>
inline bool A_1::dummy(void *value)
{
  // Whatever
} 
```

这就是它在 C++ 中的方式。仅仅因为你在 typedef-names 后面“隐藏”了专门的类名并不意味着你不必使用`template<>`语法。

`template <>`Visual C++ 显然允许您作为非标准扩展跳过部分。

此外，专用版本对模板参数名称一无所知（它们不再有任何参数），这意味着它们`invalidVal`完全不知道该名称。要么`invalidVal`用显式替换`NULL`（如在显式参数列表中），要么`invalidVal`通过类使值作为常量静态成员可用

```
template<class T, T invalidVal, int e> class A
{ 
  static const T iv; // declaration
  ...
};

template <class T, T invalidVal, int e>
const T A<T, invalidVal, e>::iv = invalidVal; // definition

template <> inline bool A_0::dummy(void *value) 
{
   return value != iv;
} 
```

# python - 函数不返回列表

> ID：11889767
> 
> 赞同：0
> 
> 时间：2012-08-09T18:32:20.770
> 
> 标签：python, python-2.7

我有一个简单的脚本来生成英国彩票号码（7 个号码，包括 1 到 49）。我的代码有一个函数，可以在列表中生成 7 个随机数，在列表中运行设置以删除重复数字，检查列表中是否还有 7 个成员，如果没有，该函数会调用自身生成 7 个新数字。

但是，当函数调用自身时，它不会返回列表。

我很高兴知道我在这里做错了什么。

```
from random import randint

def lotto():

    l = []
    for r in range(1,8):
        l.append(randint(1,49))

    print "DEBUG: l=", l
    print "DEBUG: set(l)=", set(l), len(set(l))

    if(len(set(l)) !=7):
        lotto()
    else:
        print "Before return l, l = ", l
        return l

def main():
    numbers = lotto()
    print numbers 
```

这是一个无法正常工作的示例运行：

```
DEBUG: l= [44, 32, 12, 12, 33, 16, 31]
DEBUG: set(l)= set([32, 33, 44, 12, 16, 31]) 6
DEBUG: l= [46, 20, 10, 24, 16, 35, 44]
DEBUG: set(l)= set([35, 10, 44, 46, 16, 20, 24]) 7
Before return l, l =  [46, 20, 10, 24, 16, 35, 44]
None 
```

并且运行正常的示例运行：

```
DEBUG: l= [20, 5, 21, 37, 10, 44, 38]
DEBUG: set(l)= set([37, 38, 10, 44, 20, 21, 5]) 7
Before return l, l =  [20, 5, 21, 37, 10, 44, 38]
[20, 5, 21, 37, 10, 44, 38] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:34:17.530

您没有返回递归调用的结果。

```
if(len(set(l)) !=7):
    return lotto() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:34:22.740

递归调用

```
lotto() 
```

实际上并不返回由`lotto()`. 你需要使用

```
return lotto() 
```

反而。（请注意，最好使用循环而不是尾递归调用。）

也就是说，对于您的实际问题，有一个更简单的解决方案，即[`random.sample()`](http://docs.python.org/library/random.html#random.sample). Python2.x版本：

```
import random
print random.sample(xrange(1, 50), 7) 
```

Python 3.x 版本：

```
import random
print(random.sample(range(1, 50), 7)) 
```

# javascript - 无法设置图片背景图片

> ID：11889768
> 
> 赞同：0
> 
> 时间：2012-08-09T18:32:35.970
> 
> 标签：javascript, html, background-image

大家好，我正在使用 html5 和 JavaScript，但我遇到了问题

所以我有 div 我像这样动态附加

```
container.append('<div id=del_' + container_id + ' style = " background-image: url(' + "del_btn.png" + ') no-repeat center center;"/>'); 
```

我的 div 已创建，但我无法看到背景图像，任何人都可以指导我出了什么错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:20:35.490

问题可能是图像的路径。在您的示例中，图像需要与 html 位于同一文件夹中。如果您将它放在网站根目录的子文件夹中，例如“脚本”，则路径应为`/scripts/del_btn.png`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:52:14.280

使用`background`而不是`background-image`，因为`background-image`只接受图像 url 作为值。

```
container.append('<div id=del_' + container_id + ' style = " background: url(' + "del_btn.png" + ') no-repeat center center;"/>'); 
```

并为 div 设置 css

```
display: block;
width:  100px; /* for example */
height: 100px; /* for example */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:35:24.903

尝试

```
container.append('<div id=del_' + container_id + ' style = " background-image: url(\'del_btn.png\') no-repeat center center;"/>'); 
```

你不需要`+`这里

**编辑**逃脱'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T19:19:21.070

您说它与 javacript 文件位于同一文件夹中。

例如，如果您的 JS 文件位于与 html 页面不同的文件夹中，请说`scripts`

您还需要将图像路径修改为类似`'scripts/del_btn.png'`

# actionscript-3 - 网络摄像头火闪效果

> ID：11889773
> 
> 赞同：0
> 
> 时间：2012-08-09T18:33:11.127
> 
> 标签：actionscript-3, flash

ActionScript3 中是否有任何可用的源代码可以执行以下操作：http: [//gskinner.com/blog/archives/2005/11/flash_8_webcam_1.html](http://gskinner.com/blog/archives/2005/11/flash_8_webcam_1.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:43:17.233

[http://blog.soulwire.co.uk/code/actionscript-3/webcam-motion-detection-tracking](http://blog.soulwire.co.uk/code/actionscript-3/webcam-motion-detection-tracking)

上面的链接不完全是您要查找的内容，但类似。您可能会获取带有示例的原始 processing.org IDE，其中一个是网络摄像头背景差异程序，如果您自己想出一些问题，您可以从那里复制算法。使用 flash BitmapData 方法并用几帧调整 blendModes 可以得到一些有趣的东西。

# php - PHP在同一页面上更新MySQL数据库

> ID：11889776
> 
> 赞同：0
> 
> 时间：2012-08-09T18:33:27.220
> 
> 标签：php, mysql

我想创建一个 PHP MySQL 脚本来显示数据，然后允许用户编辑数据，但不必离开页面即可。

那么是否可以在表单中显示 MySQL 数据，允许用户单击并编辑它（就像普通的电子邮件表单一样），然后单击保存按钮并更新数据。

我知道保存按钮会重新加载同一页面，我只是不希望用户必须转到不同的页面来编辑数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:38:20.367

是的，这是可能的。只需使用

```
<form action="" method="post"> 
```

也可以不用重新加载——使用 JavaScript 和 AJAX。[jQuery](http://api.jquery.com/jQuery.ajax/)使 AJAX 的使用更加简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:24:00.263

我建议不要将您的表单发布到用于显示数据的页面。如果用户点击浏览器的刷新按钮，表单将被再次发送，这可能会做你不想要的事情。

使用[POST/REDIRECT/GET 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)：将您的表单发布到用于处理它的页面，然后该页面必须发送一个标题以重定向到您的显示页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:37:06.753

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') { 
   // now you know the form has been submitted 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T19:16:21.183

**如果您不使用 java 脚本（Ajax），您可以使用 $_REQUEST .. 并使用 meta 将用户发送到 sql 列表页面。**

例如 ：

```
<?php

if($_REQUEST['do']=="showform"){
///// Show insert form   
echo "<form action=\"test.php\" method=\"get\" enctype=\"text/plain\">

<input type=\"text\" name=\"name\" />
<input type=\"hidden\" value=\"insert\" name=\"do\" />
<input type=\"submit\" value=\"Add\" />

</form> " ;

$sql=$db->query("select * from names order by id decs ");
while($r=mysql_fetch_array($sql)){

    ///
    /// print your data 
    ///
}    

}

if($_REQUEST['do']=="insert"){

    $name=mysql_real_escape_string($_GET['name']);
    /// call your insert function here 
    /// for Example

  $sql=$db->query(" insert into names(name) values('$name')");

  if($sql){///  
   echo "<META HTTP-EQUIV='refresh' CONTENT='1; URL=test.php?do=showform'>"; 
  } 
  else{

    echo "erorr";
  }

}

?> 
```

这个唯一没有java脚本的方法我希望会有用

# ruby-on-rails - 在 Rails 中将数据公开为 XML 和 JSON

> ID：11889778
> 
> 赞同：2
> 
> 时间：2012-08-09T18:33:29.427
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我试图了解如何在 XML 和 JSON 中公开我的数据。我现在已经为数据制作了 HTML 视图，但我不太了解 response_to 块以及如何使用 JSON 和 XML 进行响应......同时可以控制结构。有人可以帮我从哪里开始阅读并学习如何做到这一点吗？我自己寻找它的运气并不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:38:14.333

您可以从阅读[本指南](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)开始。它很好地了解了渲染在 Rails 中的工作原理。

[这篇文章](http://blog.plataformatec.com.br/2009/08/embracing-rest-with-mind-body-and-soul/)也很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:39:44.013

我使用 rabl gem 来格式化我公开的 JSON。

您的 users_controller#show 操作的 respond_to 块可能如下所示：

```
respond_to do |format|
  format.html
  format.json
end 
```

然后你可以在 /app/views/users/show.json.rabl 中创建一个 rabl 模板：

```
object @user
attributes :id, :username, :first_name, :last_name 
```

[您可以在此处](https://github.com/nesquena/rabl/)找到有关 rabl的更多信息

# c# - 如何在C#中用'#'分割字符串

> ID：11889780
> 
> 赞同：2
> 
> 时间：2012-08-09T18:33:39.037
> 
> 标签：c#, string, split

我试图拆分包含这些字符的字符串#

```
domicilioSeparado = domicilio.Split(@"#".ToCharArray()); 
```

但每次数组只包含一个成员。我尝试了很多组合，但似乎一切正常，我还尝试用空格替换字符串，它有点工作 - 问题是它仍然是一个字符串。

```
domicilio = domicilio.Replace(@"#", @" "); 
```

我该如何解决这个问题？

完整代码：

```
String[] domicilioSeparado;
String domicilio = dbRow["DOMICILIO"].ToString();

domicilioSeparado = domicilio.Split(@"#".ToCharArray());
if (Regex.IsMatch(domicilioSeparado.Last(), @"\d"))
{
    String domicilioSinNum = "";
    domicilioSinNum = domicilioSeparado[0];
    custTable.Rows.Add(counter, dbRow["CUENTA"], nombre,
        paterno, materno, domicilioSinNum, domicilioSeparado.Last(), tipoEntidad);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T18:44:51.667

如果您只想在分隔符上拆分字符串，在本例中为“#”，则可以使用以下命令：

```
domicilioSeparado = domicilio.Split("#"); 
```

那应该给你你想要的。您的第二次尝试只是将字符串中的所有字符 '#' 替换为 ' '，这似乎不是您想要的。我们可以看到您要拆分的字符串吗？这可能有助于解释为什么它不起作用。

编辑：

好的，这就是我认为您的代码应该看起来的样子，试一试，让我知道它是如何进行的。

```
List<string> domicilioSeparado = new List<string>();
String domicilio = dbRow["DOMICILIO"].ToString();

domicilioSeparado = domicilio.Split("#");

if (Regex.IsMatch(domicilioSeparado.Last(), @"\d"))
{
    String domicilioSinNum = "";
    domicilioSinNum = domicilioSeparado[0];
    custTable.Rows.Add(counter, dbRow["CUENTA"], nombre,
        paterno, materno, domicilioSinNum, domicilioSeparado.Last(), tipoEntidad);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:51:33.223

尝试这个：

```
string[] domicilioSeparado;
domicilioSeparado = domicilio.Split('#'); 
```

一些注意事项： 1 - 它是 ('#')，而不是 ("#")；2 - 替换不拆分字符串，它只替换该部分，保持为单个字符串。

如果您想要一个包含整个数组打印的示例：

```
string domicilio = "abc#def#ghi";
string[] domicilioSeparado;
domicilioSeparado = domicilio.Split('#');
for (int i = 0; i < domicilioSeparado.Length; i++)
{
   MessageBox.Show(domicilioSeparado[i]);
} 
```

它将为 domicilioSeparado 中的每个元素打开一个消息框。

# java - 通过在会话中使用字符串在 jsp 页面中换行

> ID：11889782
> 
> 赞同：1
> 
> 时间：2012-08-09T18:33:45.310
> 
> 标签：java, html, jsp, jstl

我有`doPost`一个 servlet -

```
protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        request.getSession().setAttribute("sysMsg","now we gonna to break line \n");

        // forward to printLine.jsp page 
            dispather.forward(request, response) ; 
    } 
```

和jsp页面（说，`printLine.jsp`） -

```
<html>
<head>
<title></title>
</head>
<body>
    <font size="30" color="Red">${sysMsg} </font>
</body>
</html> 
```

我希望在finally break line`printLine.jsp`的打印中`sysMsg`...对于在 servlet 中设置他时放在`\n`最后的`sysMsg`那个，但是这种方式行不通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:34:59.000

试试`<br/>`吧

```
request.getSession().setAttribute("sysMsg","now we gonna to break line <br/>"); 
```

# android - View.view.layout(l, t, r, b)

> ID：11889787
> 
> 赞同：0
> 
> 时间：2012-08-09T18:33:58.657
> 
> 标签：android

View.view.layout 如何在 Android 中工作？我似乎无法找出一致的行为。如果是定位，为什么需要 4 个坐标而不是 2 个？这是否意味着它可以缩放和定位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:38:40.100

> 这是布局机制的第二阶段。（首先是测量）。在这个阶段，每个父级调用其所有子级的布局来定位它们。这通常使用存储在度量 pass() 中的子度量来完成。具有子级的派生类应覆盖 onLayout。在这种方法中，他们应该在他们的每个孩子上调用布局。

[查看源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/view/View.java#View.layout%28int%2Cint%2Cint%2Cint%29)

# c++ - 从已经关闭的套接字接收数据？

> ID：11889791
> 
> 赞同：6
> 
> 时间：2012-08-09T18:34:09.293
> 
> 标签：c++, c, sockets, unix, client-server

假设我有一个服务器应用程序 - 使用 UNIX 套接字通过 TCP 连接。

连接是异步的——换句话说，客户端和服务器的套接字是非阻塞的。

假设以下情况：在某些情况下，服务器可能决定向已连接的客户端发送一些数据并立即关闭连接：使用`shutdown`with `SHUT_RDWR`。

所以，我的问题是 - 是否可以保证，当客户端调用时`recv`，它将接收（由服务器发送的）数据？

或者，要接收数据，`recv`必须在服务器的`shutdown`? 如果是这样，我应该怎么做（或者，更准确地说，我应该怎么做），以确保数据被客户端接收？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T18:38:41.737

您可以使用“setsockopt(SO_LINGER)”控制此行为：

> *   [男人 setockopt](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=%2Fcom.ibm.ztpf-ztpfdf.doc_put.cur%2Fgtpc2%2Fcpp_setsockopt.html)
> 
> SO_LINGER 如果存在数据，则等待完成关闭功能。如果启用此选项并且在调用关闭函数时存在未发送的数据，则在关闭函数期间调用应用程序将被阻塞，直到数据传输或连接超时。close 函数在不阻塞调用者的情况下返回。此选项仅对流套接字有意义。

也可以看看：

*   [男人读](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=%2Fcom.ibm.ztpf-ztpfdf.doc_put.cur%2Fgtpc2%2Fcpp_read.html)

*   [Beej 的网络编程指南](http://beej.us/guide/bgnet/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T22:26:58.490

不能保证你会收到任何数据，更不用说这些数据了，但是当套接字关闭时等待处理的数据与所有其他数据一样受到*同样*的保证：如果它到达，它将按顺序到达并且完好无损，并且受 TCP 的最佳努力。

注意“异步”和“非阻塞”是两个不同的东西，而不是同一事物的两个术语。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-12T22:26:00.137

一旦你成功地将数据写入套接字，它就会在内核的缓冲区中，直到它被发送和确认为止。关机不会导致缓冲数据丢失。关闭套接字不会导致缓冲数据丢失。即使发送进程的死亡也不会导致缓冲数据丢失。

您可以使用 观察缓冲区的大小`netstat`。SendQ 列是内核仍要传输的数据量。

客户端确认所有内容后，该端口将从服务器中消失。这可能发生在客户端读取数据之前，在这种情况下，它将在客户端的 RecvQ 中。基本上你没有什么可担心的。在成功写入 TCP 套接字后，每个组件都在尽最大努力确保您的数据不受损害地到达目的地，而不管发送套接字和/或进程发生了什么。

好吧，也许要担心一件事：如果客户端在服务器关闭后尝试发送任何内容，它可能会在从套接字读取所有可用数据之前获得一个 SIGPIPE 并死掉。

# function - 从相邻工作表中查找单元格并将其复制到当前工作表

> ID：11889794
> 
> 赞同：-1
> 
> 时间：2012-08-09T18:34:17.290
> 
> 标签：function, excel, vba

如果它们满足某些条件，我需要创建一个宏（或函数）来将相邻工作表中的单元格复制到当前工作表中。

下面是与当前工作表相邻的工作表，其中包含 Owner、Ticket 和 Comments 字段。我需要将这些字段复制到当前工作表中相应的应用程序名称和对象（连接为唯一 ID）。

![在此处输入图像描述](../Images/90a6288bd4d80acb02a54551635116a5.png)

下面是我需要将上述字段复制到的当前工作表。请注意，应用程序未按相同顺序列出。情况就是这样，因为我永远不知道数据的顺序，或者相同的数据是否会出现在新的工作表中。

![在此处输入图像描述](../Images/1ad9d2b762c493fe8e328e93f51342a1.png)

到目前为止，我已经尝试过这个功能：

=IF(INDIRECT(NextSheetName()&"!A3")&INDIRECT(NextSheetName()&"!B3") = A3&B3, INDIRECT(NextSheetName()&"!D3"), "0")

仅在工作表以相同顺序具有相同数据的情况下才有效。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:44:12.230

如果您想使用 VBA 执行此操作，请尝试以下操作。代码将匹配的行从源工作表复制到目标工作表，并将源上的匹配行记录到目标，以防您发现这很有用。我将工作表命名为“源”和“目标”，并假设您想要匹配 A 列和 B 列的串联。

源和目标中的行数无关紧要，匹配项出现的顺序也无关紧要。

我写了两个不同的版本。第一个有效，但我并不喜欢它，因为它循环遍历源范围，为目标中的每个值寻找匹配项。第二个版本使用一个构建一次的字典。然后匹配搜索词无需遍历范围即可完成。请注意，要使用字典，您需要参考 Microsoft Scripting Runtime。

**第一个版本：（功能，但需要多个循环）**

```
Sub GetTwoColumnMatches()

    Dim wsrc As Worksheet
    Dim wTgt As Worksheet
    Dim rng As Range
    Dim cell As Range
    Dim lLastTargetRow As Long
    Dim lMatchedRow As Long
    Dim sConcat As String

    Set wsrc = Sheets("Source")
    Set wTgt = Sheets("Target")
    lLastTargetRow = wTgt.Range("A" & wTgt.Rows.Count).End(xlUp).Row

    Set rng = wTgt.Range("a2:a" & lLastTargetRow)
    For Each cell In rng
        sConcat = cell & cell.Offset(, 1)
        lMatchedRow = Matches(sConcat)
        If lMatchedRow <> 0 Then
            wTgt.Range("a" & cell.Row & ":e" & cell.Row).Value = _
            wsrc.Range("a" & lMatchedRow & ":e" & lMatchedRow).Value
            wTgt.Range("f" & cell.Row) = lMatchedRow
        End If
    Next
End Sub

Function Matches(SearchFor As String) As Long
    Dim wsrc As Worksheet
    Dim rng As Range
    Dim cell As Range
    Dim lLastSourceRow As Long
    Dim lSourceRow As Long

    Set wsrc = Sheets("Source")
    lLastSourceRow = wsrc.Range("a" & wsrc.Rows.Count).End(xlUp).Row

    Set rng = wsrc.Range("a2:a" & lLastSourceRow)
    Matches = 0
    For Each cell In rng
        If cell & cell.Offset(, 1) = SearchFor Then
            Matches = cell.Row
            Exit For
        End If
    Next
End Function 
```

**第二版：（优化，需要参考Microsoft Scripting Runtime）**

```
Sub GetTwoColumnMatches()

    Dim wsrc As Worksheet
    Dim wTgt As Worksheet
    Dim rng As Range
    Dim cell As Range
    Dim srcRng As Range
    Dim srcCell As Range

    Dim lLastTargetRow As Long
    Dim lLastSourceRow As Long
    Dim lMatchedRow As Long
    Dim lSourceRow As Long

    Dim sConcat As String
    Dim dict As Dictionary

    Set wsrc = Sheets("Source")
    Set wTgt = Sheets("Target")
    lLastTargetRow = wTgt.Range("A" & wTgt.Rows.Count).End(xlUp).Row

    Set wsrc = Sheets("Source")
    lLastSourceRow = wsrc.Range("a" & wsrc.Rows.Count).End(xlUp).Row

    'Create the dictionary
    Set dict = New Dictionary

    Set srcRng = wsrc.Range("a2:b" & lLastSourceRow)
    For Each srcCell In srcRng
        sConcat = srcCell & srcCell.Offset(, 1)
        If Len(sConcat) > 0 Then dict.Add sConcat, srcCell.Row
    Next

    Set rng = wTgt.Range("a2:a" & lLastTargetRow)
    For Each cell In rng
        sConcat = cell & cell.Offset(, 1)
        lMatchedRow = dict.Item(sConcat)
        If lMatchedRow <> 0 Then
            wTgt.Range("a" & cell.Row & ":e" & cell.Row).Value = _
            wsrc.Range("a" & lMatchedRow & ":e" & lMatchedRow).Value
            wTgt.Range("f" & cell.Row) = lMatchedRow
        End If
    Next
End Sub 
```

正确选择 Microsoft Scripting Runtime 后，您的引用将如下所示：

![参考 Microsoft 脚本运行时](../Images/4a4698c0ab7f6f86125eded4222b68fd.png)

# hibernate - Spring中Hibernate的Sql连接异常

> ID：11889797
> 
> 赞同：0
> 
> 时间：2012-08-09T18:34:24.620
> 
> 标签：hibernate, tomcat, jpa, glassfish

我们使用 Spring 和 hibernate(JPA) 开发了一个示例 Web 应用程序。我们使用 tomcat 作为容器来部署应用程序，我们使用 JPA 实体管理器连接到 db，直接在 persistence.xml 中提供 db 详细信息。然后我们将其更改为 Glassfish 以进行部署。当我们开始使用 Glassfish 时，无法建立数据库连接。例外是

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: Error in allocating a connection. Cause: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
Error Code: 0
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:309)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:138)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:94)
    at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:592)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:233)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:394)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:185)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:242)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:230)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:376)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:517)
    at $Proxy158.createEntityManager(Unknown Source)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:232)
    at $Proxy160.find(Unknown Source)
    at doaTest.StudentTsDao.getStudent(StudentTsDao.java:21)
    at doaTest.StudentTsDao$$FastClassByCGLIB$$3354787e.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:618)
    at doaTest.StudentTsDao$$EnhancerByCGLIB$$3645c492.getStudent(<generated>)
    at controllers.ServiceController.invokeService(ServiceController.java:20)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:859)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:883)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:781)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1534)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.sql.SQLException: Error in allocating a connection. Cause: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.gjc.spi.base.DataSource.getConnection(DataSource.java:117)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:126)
    ... 61 more
Caused by: javax.resource.spi.ResourceAllocationException: Error in allocating a connection. Cause: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.enterprise.connectors.ConnectionManagerImpl.internalGetConnection(ConnectionManagerImpl.java:310)
    at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:190)
    at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:165)
    at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:160)
    at com.sun.gjc.spi.base.DataSource.getConnection(DataSource.java:110)
    ... 62 more
Caused by: com.sun.appserv.connectors.internal.api.PoolingException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.enterprise.resource.pool.datastructure.RWLockDataStructure.addResource(RWLockDataStructure.java:103)
    at com.sun.enterprise.resource.pool.ConnectionPool.addResource(ConnectionPool.java:282)
    at com.sun.enterprise.resource.pool.ConnectionPool.createResourceAndAddToPool(ConnectionPool.java:1497)
    at com.sun.enterprise.resource.pool.ConnectionPool.createResources(ConnectionPool.java:940)
    at com.sun.enterprise.resource.pool.ConnectionPool.initPool(ConnectionPool.java:230)
    at com.sun.enterprise.resource.pool.ConnectionPool.internalGetResource(ConnectionPool.java:511)
    at com.sun.enterprise.resource.pool.ConnectionPool.getResource(ConnectionPool.java:381)
    at com.sun.enterprise.resource.pool.PoolManagerImpl.getResourceFromPool(PoolManagerImpl.java:242)
    at com.sun.enterprise.resource.pool.PoolManagerImpl.getResource(PoolManagerImpl.java:167)
    at com.sun.enterprise.connectors.ConnectionManagerImpl.getResource(ConnectionManagerImpl.java:341)
    at com.sun.enterprise.connectors.ConnectionManagerImpl.internalGetConnection(ConnectionManagerImpl.java:304)
    ... 66 more
Caused by: com.sun.appserv.connectors.internal.api.PoolingException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.enterprise.resource.pool.ConnectionPool.createSingleResource(ConnectionPool.java:920)
    at com.sun.enterprise.resource.pool.ConnectionPool.createResource(ConnectionPool.java:1181)
    at com.sun.enterprise.resource.pool.datastructure.RWLockDataStructure.addResource(RWLockDataStructure.java:98)
    ... 76 more
Caused by: com.sun.appserv.connectors.internal.api.PoolingException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.enterprise.resource.allocator.LocalTxConnectorAllocator.createResource(LocalTxConnectorAllocator.java:110)
    at com.sun.enterprise.resource.pool.ConnectionPool.createSingleResource(ConnectionPool.java:903)
    ... 78 more
Caused by: javax.resource.spi.ResourceAllocationException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.gjc.spi.DSManagedConnectionFactory.createManagedConnection(DSManagedConnectionFactory.java:127)
    at com.sun.enterprise.resource.allocator.LocalTxConnectorAllocator.createResource(LocalTxConnectorAllocator.java:87)
    ... 79 more
Caused by: java.sql.SQLNonTransientConnectionException: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
    at org.apache.derby.jdbc.ClientDataSource.getConnection(Unknown Source)
    at org.apache.derby.jdbc.ClientDataSource.getConnection(Unknown Source)
    at com.sun.gjc.spi.DSManagedConnectionFactory.createManagedConnection(DSManagedConnectionFactory.java:113)
    ... 80 more
Caused by: org.apache.derby.client.am.DisconnectException: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at org.apache.derby.client.net.NetAgent.<init>(Unknown Source)
    at org.apache.derby.client.net.NetConnection.newAgent_(Unknown Source)
    at org.apache.derby.client.am.Connection.initConnection(Unknown Source)
    at org.apache.derby.client.am.Connection.<init>(Unknown Source)
    at org.apache.derby.client.net.NetConnection.<init>(Unknown Source)
    at org.apache.derby.client.net.NetConnection40.<init>(Unknown Source)
    at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl40.newNetConnection(Unknown Source)
    ... 83 more
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:519)
    at java.net.Socket.connect(Socket.java:469)
    at java.net.Socket.<init>(Socket.java:366)
    at java.net.Socket.<init>(Socket.java:180)
    at javax.net.DefaultSocketFactory.createSocket(SocketFactory.java:196)
    at org.apache.derby.client.net.OpenSocketAction.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    ... 90 more

WARNING: StandardWrapperValve[dispatcher]: PWC1406: Servlet.service() for servlet dispatcher threw exception
javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: Error in allocating a connection. Cause: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
Error Code: 0
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:422)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:185)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:242)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:230)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:376)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:517)
    at $Proxy158.createEntityManager(Unknown Source)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:232)
    at $Proxy160.find(Unknown Source)
    at doaTest.StudentTsDao.getStudent(StudentTsDao.java:21)
    at doaTest.StudentTsDao$$FastClassByCGLIB$$3354787e.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:618)
    at doaTest.StudentTsDao$$EnhancerByCGLIB$$3645c492.getStudent(<generated>)
    at controllers.ServiceController.invokeService(ServiceController.java:20)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:859)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:883)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:781)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1534)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:619)
Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: Error in allocating a connection. Cause: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
Error Code: 0
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:309)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:138)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:94)
    at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:592)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:233)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:394)
    ... 56 more
Caused by: java.sql.SQLException: Error in allocating a connection. Cause: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.gjc.spi.base.DataSource.getConnection(DataSource.java:117)
    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:126)
    ... 61 more
Caused by: javax.resource.spi.ResourceAllocationException: Error in allocating a connection. Cause: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.enterprise.connectors.ConnectionManagerImpl.internalGetConnection(ConnectionManagerImpl.java:310)
    at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:190)
    at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:165)
    at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:160)
    at com.sun.gjc.spi.base.DataSource.getConnection(DataSource.java:110)
    ... 62 more
Caused by: com.sun.appserv.connectors.internal.api.PoolingException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.enterprise.resource.pool.datastructure.RWLockDataStructure.addResource(RWLockDataStructure.java:103)
    at com.sun.enterprise.resource.pool.ConnectionPool.addResource(ConnectionPool.java:282)
    at com.sun.enterprise.resource.pool.ConnectionPool.createResourceAndAddToPool(ConnectionPool.java:1497)
    at com.sun.enterprise.resource.pool.ConnectionPool.createResources(ConnectionPool.java:940)
    at com.sun.enterprise.resource.pool.ConnectionPool.initPool(ConnectionPool.java:230)
    at com.sun.enterprise.resource.pool.ConnectionPool.internalGetResource(ConnectionPool.java:511)
    at com.sun.enterprise.resource.pool.ConnectionPool.getResource(ConnectionPool.java:381)
    at com.sun.enterprise.resource.pool.PoolManagerImpl.getResourceFromPool(PoolManagerImpl.java:242)
    at com.sun.enterprise.resource.pool.PoolManagerImpl.getResource(PoolManagerImpl.java:167)
    at com.sun.enterprise.connectors.ConnectionManagerImpl.getResource(ConnectionManagerImpl.java:341)
    at com.sun.enterprise.connectors.ConnectionManagerImpl.internalGetConnection(ConnectionManagerImpl.java:304)
    ... 66 more
Caused by: com.sun.appserv.connectors.internal.api.PoolingException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.enterprise.resource.pool.ConnectionPool.createSingleResource(ConnectionPool.java:920)
    at com.sun.enterprise.resource.pool.ConnectionPool.createResource(ConnectionPool.java:1181)
    at com.sun.enterprise.resource.pool.datastructure.RWLockDataStructure.addResource(RWLockDataStructure.java:98)
    ... 76 more
Caused by: com.sun.appserv.connectors.internal.api.PoolingException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.enterprise.resource.allocator.LocalTxConnectorAllocator.createResource(LocalTxConnectorAllocator.java:110)
    at com.sun.enterprise.resource.pool.ConnectionPool.createSingleResource(ConnectionPool.java:903)
    ... 78 more
Caused by: javax.resource.spi.ResourceAllocationException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at com.sun.gjc.spi.DSManagedConnectionFactory.createManagedConnection(DSManagedConnectionFactory.java:127)
    at com.sun.enterprise.resource.allocator.LocalTxConnectorAllocator.createResource(LocalTxConnectorAllocator.java:87)
    ... 79 more
Caused by: java.sql.SQLNonTransientConnectionException: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
    at org.apache.derby.jdbc.ClientDataSource.getConnection(Unknown Source)
    at org.apache.derby.jdbc.ClientDataSource.getConnection(Unknown Source)
    at com.sun.gjc.spi.DSManagedConnectionFactory.createManagedConnection(DSManagedConnectionFactory.java:113)
    ... 80 more
Caused by: org.apache.derby.client.am.DisconnectException: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
    at org.apache.derby.client.net.NetAgent.<init>(Unknown Source)
    at org.apache.derby.client.net.NetConnection.newAgent_(Unknown Source)
    at org.apache.derby.client.am.Connection.initConnection(Unknown Source)
    at org.apache.derby.client.am.Connection.<init>(Unknown Source)
    at org.apache.derby.client.net.NetConnection.<init>(Unknown Source)
    at org.apache.derby.client.net.NetConnection40.<init>(Unknown Source)
    at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl40.newNetConnection(Unknown Source)
    ... 83 more
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:519)
    at java.net.Socket.connect(Socket.java:469)
    at java.net.Socket.<init>(Socket.java:366)
    at java.net.Socket.<init>(Socket.java:180)
    at javax.net.DefaultSocketFactory.createSocket(SocketFactory.java:196)
    at org.apache.derby.client.net.OpenSocketAction.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    ... 90 more 
```

我无法理解为什么。但是在Tomcat中它工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:38:17.033

看起来您还没有连接到您的数据库服务器。

在运行应用程序之前启动数据库服务器。

# python - Python 的 easy_install 和自定义标头/库位置

> ID：11889800
> 
> 赞同：1
> 
> 时间：2012-08-09T18:34:38.543
> 
> 标签：python, linux, shared-libraries, header-files, easy-install

我正在尝试[`adns-python`](http://code.google.com/p/adns-python/)使用 linux 安装并且必须[`adns`](http://www.chiark.greenend.org.uk/~ian/adns/)使用一些特殊选项重新编译，所以我似乎无法`easy_install <tarball>`像往常一样使用

```
(py26_default)[mpenning@localhost src]$ easy_install adns-python-1.2.1.tar.gz
Processing adns-python-1.2.1.tar.gz
Running adns-python-1.2.1/setup.py -q bdist_egg --dist-dir /tmp/easy_install-9cVl4i/adns-python-1.2.1/egg-dist-tmp-vvO8Ms
adnsmodule.c:10:18: error: adns.h: No such file or directory
adnsmodule.c:31: error: expected specifier-qualifier-list before âadns_stateâ 
```

`adns.h`安装在`/opt/adns/include/adns.h`; 如何使用本地安装进行 easy_install 安装`adns`？

**编辑**

在下面的尝试之后，我仍然发现一个`ld`错误，即使我导出`LD_LIBRARY_PATH`了......

```
(py26_default)[mpenning@localhost src]$ ls /opt/adns/lib/
libadns.a  libadns.so  libadns.so.1  libadns.so.1.2
(py26_default)[mpenning@localhost src]$ export LD_LIBRARY_PATH=/opt/adns/lib
(py26_default)[mpenning@localhost src]$ C_INCLUDE_PATH=/opt/adns/include easy_install ./adns-python-1.2.1.tar.gz
Processing adns-python-1.2.1.tar.gz
Running adns-python-1.2.1/setup.py -q bdist_egg --dist-dir /tmp/easy_install-x68T9f/adns-python-1.2.1/egg-dist-tmp-MpCzMP
/usr/bin/ld: cannot find -ladns
collect2: ld returned 1 exit status
error: Setup script exited with error: command 'gcc' failed with exit status 1
(py26_default)[mpenning@localhost src]$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T00:31:47.067

LD_LIBRARY_PATH 用于在运行时（运行可执行文件时）而不是在链接期间查找共享库。

要构建扩展，解压缩 tarball 并运行：

```
python setup.py build_ext -I/opt/adns/include -L/opt/adns/lib -R/opt/adns/lib 
```

安装：

```
python setup.py install 
```

您可以在以下位置指定 build_ext 选项`setup.cfg`：

```
[build_ext]
include_dirs=/opt/adns/include
library_dirs=/opt/adns/lib
rpath=/opt/adns/lib 
```

在这种情况下，您可以直接运行 easy_install。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:03:54.273

请尝试这样

```
INCLUDE_PATH=/opt/adns/include easy_install adns-python-1.2.1.tar.gz 
```

如果它不起作用，请尝试使用`CPLUS_INCLUDE_PATH`或`C_INCLUDE_PATH`

# .htaccess - 除一个目录外的域的Mod-rewrite

> ID：11889804
> 
> 赞同：0
> 
> 时间：2012-08-09T18:34:46.247
> 
> 标签：.htaccess, mod-rewrite

我是 htaccess 的新手，无法弄清楚这里发生了什么。我正在尝试使用 PAGEID=pageName 将所有重定向指向 index.php。

因此，domain.com/manager 将被推送到 index.php?PAGEID=manager。

现在，我有这个工作，但我需要它在它到达目录'test'时正常运行，但是每当我转到 domain.com/test 时，我都会被推送到 index.php?PAGEID=test

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/test
RewriteRule ^([\w/]*)$ index.php?PAGEID=$1 [L] 
```

关于如何使它工作的任何想法？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:50:24.717

我认为这个逻辑有一些问题。因为在这个例子'domain.com/test'中，我们写了一个条件，将domain.com之后的所有字符串（测试）替换为'index.php?pageid=test'。

问题是 'index.php' 在 domain 'domain.com/index.php?pageid..' 之后也是一个字符串。这里也将适用重写条件并将其重写。

我认为你应该尝试这样的事情。 [htaccess，将虚拟子域重定向到 URL 参数](https://stackoverflow.com/questions/4089750/htaccess-redirect-virtual-subdomain-to-url-parameter)

或者如果'test'是一个静态字符串，那么在重写条件下我们可以指定只替换字符串'test'到'index.php/pageid=test'

# php - php time() 和 microtime() 有时不一致

> ID：11889809
> 
> 赞同：5
> 
> 时间：2012-08-09T18:35:00.980
> 
> 标签：php, time, microtime

在使用 microtime()（使用 PHP 5）记录一些数据时，我遇到了一些与我的日志文件的时间戳略有不同的值，所以我只是尝试比较 time() 和 microtime() 的输出使用一个简单的脚本（usleep 只是为了限制数据输出）：

```
<?php
for($i = 0; $i < 500; $i++) {
    $microtime = microtime();
    $time = time();
    list($usec, $sec) = explode(" ", $microtime);
    if ((int)$sec > $time) {
        echo $time . ' : ' . $microtime . '<br>';
    }
    usleep(50000);
}
?> 
```

现在，由于 $microtime 在 $time 之前声明，我希望它更小，并且不应该输出任何内容；然而，这显然不是这种情况，并且 $time 时不时地小于从 microtime() 返回的秒数，如本示例（截断）输出所示：

```
1344536674 : 0.15545100 1344536675
1344536675 : 0.15553900 1344536676
1344536676 : 0.15961000 1344536677
1344536677 : 0.16758900 1344536678 
```

现在，这只是一个很小的差距；但是，我观察到一些系列的差异（相当）超过一秒......那么，这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T18:59:27.977

如果您查看 and 的实现[`time`](https://github.com/php/php-src/blob/master/ext/date/php_date.c#L1613)，[`microtime`](https://github.com/php/php-src/blob/master/ext/standard/microtime.c#L51)您会发现它们完全不同：

*   `time`只需调用 C[`time`](http://linux.die.net/man/2/time)函数。
*   `microtime`有*两种*实现：如果 C 函数[`gettimeofday`](http://linux.die.net/man/2/gettimeofday)可用（它应该在 Linux 系统上），则直接调用它。否则[他们会拉一些杂技来使用诡计](https://github.com/php/php-src/blob/master/ext/standard/microtime.c#L108)来计算时间。

由于 C`time`调用仅精确到一秒，因此它也可能有意使用低保真时间源。

此外，在现代 x86_64 系统上，[通过查看某些 CPU 寄存器，](http://lkml.indiana.edu/hypermail/linux/kernel/0702.0/0082.html)[这两个 C 函数都可以在*没有系统调用*](http://lkml.indiana.edu/hypermail/linux/kernel/0702.0/0082.html)的情况下实现。如果您在多核系统上，这些寄存器可能在内核之间不完全匹配，这可能是一个原因。

造成差异的另一个潜在原因是 NTPd（计时守护程序）或其他用户空间进程正在更改时钟。通常，应避免此类影响[`adjtime`](http://linux.die.net/man/3/adjtime)。

所有这些理由都​​非常深奥。要进一步调试问题，您应该：

*   确定操作系统和 CPU 架构[（提示：告诉我们！）]
*   尝试[在一个核心上强制执行该过程](https://unix.stackexchange.com/questions/23106/limit-process-to-one-cpu-core)
*   停止任何正在（或可能正在）调整系统时间的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:27:09.383

这可能是由于 microtime() 使用浮点数，因此[可能会出现舍入错误](http://php.net/language.types.float)。

您可以在 php.ini 中指定[浮点数的精度](http://php.net/precision)

# ios - 问题保存到 NSApplicationSupportDirectory

> ID：11889813
> 
> 赞同：2
> 
> 时间：2012-08-09T18:35:17.407
> 
> 标签：ios, ipad, nsfilemanager

我在 iPad 应用程序上保存到 NSApplicationSupportDirectory 时遇到了一个奇怪的问题。

我已经使用这个数据结构很长时间了，没有任何问题，它只出现在程序的前两次加载中。

第一次打开应用程序时，我从 mainBundle 打开一个文件并将其重新保存为默认设置文件，然后用于存储对应用程序中设置的任何更改。

我第二次打开应用程序时，该文件似乎还不存在，所以它再次创建它！第三次及之后，一切都很好。我无法弄清楚为什么它没有第一次保存它。

抱歉，如果这很混乱 - 它是数百页代码的一部分！

这是我的初始化：

```
///inside the init of the object
    NSFileManager* fileManager = [[NSFileManager alloc] init];
    NSError* err = nil;

    NSURL* dir = [fileManager URLForDirectory:NSApplicationSupportDirectory 
                                     inDomain:NSUserDomainMask 
                            appropriateForURL:nil 
                                       create:YES 
                                        error:&err];
    if (err) {
        NSLog(@"error finding app support directory %@", err);
    }

    currentSettingsURL = [NSURL URLWithString:kCurrentSettingsFilename relativeToURL:dir]; 

    if(![fileManager fileExistsAtPath:[currentSettingsURL path]])[self createDefaultFile];

    NSArray* files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[dir path] error:&err];
    NSLog(@"files %@", files); 
```

如果文件不存在，则在其中创建文件。

```
-(void)createDefaultFile{
NSURL* readURL = [[NSBundle mainBundle] URLForResource:@"smooth" withExtension:nil];    
NSMutableData* tempData = [NSMutableData dataWithContentsOfURL:readURL]; 
NSKeyedUnarchiver* unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:tempData];

///re archive
[self setCurrentPresets:[unarchiver decodeObjectForKey:@"presetData"]];

}

-(void)setCurrentPresets:(NSMutableArray*)presets{
currentPresets = presets;
[self saveCurrentSettings];
} 
```

这是保存文件的位置

```
-(void)saveCurrentSettings{
data = [[NSMutableData alloc] init];
NSKeyedArchiver* archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
[archiver encodeObject:currentPresets forKey:kCurrentSettingsFilename];
[archiver finishEncoding];  

if(![data writeToURL:currentSettingsURL atomically:YES])NSLog(@"error saving file");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:29:51.187

我只需要告诉它我的 NSApplicationSupportDirectory 是一个文件夹..

```
NSURL* dir = [fileManager URLForDirectory:NSApplicationSupportDirectory 
                        inDomain:NSUserDomainMask 
               appropriateForURL:nil 
                          create:YES 
                           error:&err];
    if (err) {
        NSLog(@"error finding app support directory %@", err);
    }

    NSURL* folder = [[NSURL alloc] initFileURLWithPath:[dir path] isDirectory:YES];
    currentSettingsURL = [NSURL URLWithString:kCurrentSettingsFilename relativeToURL:folder]; 
```

# c - 生成的分段故障核心

> ID：11889820
> 
> 赞同：-2
> 
> 时间：2012-08-09T18:35:44.230
> 
> 标签：c

//我调用了 3 次 strbrk ，但我需要检查是否为 != NULL ，怎么办？

```
if(strpbrk(posfind,"<") != NULL ){
    posfind =(char*)malloc(strlen(strpbrk(posfind,"<"))+strlen(posfind)*sizeof(char*));
    posfind =strcat(strpbrk(posfind,"<"),posfind);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:39:18.157

~~`strcat`不会为您分配新内存，您需要确保在调用它*之前有足够的空间。*看起来您在对 的调用中用完了空间`strcat`，因此 *WHAM*。~~

在更新的示例中，使用一些临时变量来存储`strpbrk(posfind, "<")`新的 malloc 内存的结果，如下所示：

```
char* temp = strpbrk(posfind, "<");
char* newstring = NULL;
if (temp != NULL) {
    // You had a typo with the size, and also don't forget to add a spot for the
    // terminating null character
    newstring = malloc((strlen(temp) + strlen(posfind) + 1) * sizeof(char));
    newstring = strcpy(newstring, temp);
    newstring = strcat(newstring, posfind);
    posfind = newstring;
} 
```

当然，您还应该检查所有返回值并释放我们不再使用的所有已分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:45:20.907

`strpbrk(posfind,"<")`返回一个空指针，您将其传递给`strcat`.

# r - 通过添加水平线和合并单元格来自定义 xtables？

> ID：11889823
> 
> 赞同：4
> 
> 时间：2012-08-09T18:36:01.393
> 
> 标签：r, xtable

我在 SO 上看到过类似的问题——其中大多数都没有得到回答。那些被回答的人通常建议不要使用 xtable，因为它不灵活定制。我附上了两张图片：1）我从 xtable 生成的表格 2）我的理想表格。我想在我的 1.png 中添加水平线，将其分为 3 个部分，并将部分称为学校、年级、学生。

1）有人看到任何可能的xtable解决方案吗？

2) 有没有办法将 xtable 的输出读取为字符串列表，然后通过添加一些乳胶代码来修改它以获得所需的表？你试过了吗？

3) 有没有其他可以用来代替 xtable 的包？ ![在此处输入图像描述](../Images/ea97968961446a69f4bde757ccf375de.png) ![在此处输入图像描述](../Images/0164922736239799d93549d1f43fb96c.png)

以下是一些可以使用的模拟数字（假设它是 1.png 的代码）：

```
library(xtable)

desc.matrix <- matrix(rep(NA,60),ncol = 4)
colnames(desc.matrix) <- c("Grade 3","Grade 4","Grade 5","Total")
rownames(desc.matrix) <- c("TRT-#Schools","TRT(Enroll>=85%)-#Schools", 
"TRT(Prog>=50%)- #Schools", "TRT(Prog >= 50% & Enroll>=85%)-#Schools",
"Control-#Schools","TRT-#Grades","TRT(Enroll>=85%)-#Grades", 
"TRT(Prog>=50%)-#Grades", "TRT(Prog >= 50% & Enroll>=85%)-#Grades",
"CTRL-#Grades","TRT-#Students","TRT(Enroll>=85%)-#Students", 
"TRT(Prog>=50%)-#Students", "TRT(Prog >= 50% & Enroll>=85%)-#Students",
"CTRL-#Students")

for (i in 1:ncol(desc.matrix)){
   desc.matrix[,i] <- c(1:(nrow(desc.matrix)))
}

xtable(desc.matrix) 
```

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T21:52:59.957

搜索 xtableGallery.pdf 并在其中搜索`hline.after`以查找如何将分隔线放置在您喜欢的任何位置的示例。如果你这样做`?xtable`了，那么去底部的索引，然后点击顶部关于小插曲的链接，你也可以在那里找到它。

# javascript - Chrome 不允许使用期限少于 4 小时的 cookie

> ID：11889824
> 
> 赞同：4
> 
> 时间：2012-08-09T18:36:04.593
> 
> 标签：javascript, google-chrome, cookies

我似乎无法在 Google Chrome 中设置寿命短的 cookie。它们要么没有被设置，要么立即被删除（无法确定是哪个，尽管结果都是一样的）。这只发生在未来到期时间为 4 小时或更短的情况下。如果过期时间大于 4 小时，并且在 Firefox 或 Safari 中没有出现问题，则相同的代码可以正常工作。这是一个例子：

不工作：

```
exp = new Date();
exp.setMinutes(exp.getMinutes() + 240);
document.cookie="name=value;expires=" + exp + ";path=/"; 
```

作品：

```
exp = new Date();
exp.setMinutes(exp.getMinutes() + 241);
document.cookie="name=value;expires=" + exp + ";path=/"; 
```

有没有人对如何解决这个问题有任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:57:00.290

事实上，我在这里查看了 Chromium 源[http://code.google.com/p/chromium/source/search?q=document.cookie+expire&origq=document.cookie+expire&btnG=Search+Trunk](http://code.google.com/p/chromium/source/search?q=document.cookie+expire&origq=document.cookie+expire&btnG=Search+Trunk)并参考了 cookie 并在他们所有的 expires= 语句，他们在日期对象上调用 .toGMTString() 或 .toUTCString() 所以它可能是一个特殊的日期格式化函数，当它隐含地将其转换为一种格式而不是明确设置一个时，它可能会搞砸。？！

而不是这个：

```
document.cookie="name=value;expires=" + exp + ";path=/"; 
```

试试这个：

```
document.cookie="name=value;expires=" + exp.toUTCString() + ";path=/"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:44:19.750

似乎使用 jQuery.cookie 对我有用：

```
Command: exp = new Date()
Output: Thu Aug 09 2012 11:39:21 GMT-0700 (Pacific Daylight Time)

Command: exp.setMinutes(exp.getMinutes() + 240)
Output: 1344551961739

Command: $.cookie('testCookie', 'test', {path: '/', expires: exp});
Output: "testCookie=test; expires=Thu, 09 Aug 2012 22:39:21 GMT; path=/" 
```

这是在 Windows 上的 Chrome 控制台中完成的。

注意：格林威治标准时间 22:39 是格林威治标准时间 -0700 的 15:39，因此到期时间为 4 小时。

编辑：我直接测试了您的代码，它似乎不接受设置为在不到 4 小时内过期的 cookie。这不使用 jQuery：

```
exp = new Date();
exp.setMinutes(exp.getMinutes() + 240);
document.cookie="testCookie2=test;expires=" + exp.toUTCString() + ";path=/"; 
```

# ios - 在原生、phonegap/Cordova 构建的 iOS 应用程序中更改键盘外观

> ID：11889830
> 
> 赞同：9
> 
> 时间：2012-08-09T18:36:44.730
> 
> 标签：ios, xcode, cordova, keyboard, appdelegate

我想更改出现在我的 Phonegap/Cordova 构建的本机 iOS 应用程序中的所有键盘的背景颜色，如下所示：

![在此处输入图像描述](../Images/bab9a5bf304c5abbf7dd681d6f741ccf.png)

当然，我已经彻底搜索了这个，主要找到了 2 个相关答案。[这里](https://stackoverflow.com/questions/11799840/change-the-color-of-the-iphone-keyboard-working-with-phonegap-cordova)的回答者说可以将Objective-C 代码添加到PhoneGap 项目的AppDelegate.m 文件中，如[本页](https://stackoverflow.com/questions/9728847/how-change-keyboard-background-color-in-ios)所示。我找到了**AppDelegate.m**文件，但似乎无法弄清楚如何在**所有 textfields**上将键盘外观设置为 UIKeyboardAppearanceAlert 的外观。回答者提供的代码示例：

```
 mytextfield.keyboardAppearance = UIKeyboardAppearanceAlert; 
```

编写基于cordova的应用程序，我无法区分任何文本字段ID来连接到上面的示例。Xcode / Cordova 中是否有一个文件列出了所有文本字段 ID，甚至更好：

**有没有一种方法可以通过 UIKeyboardAppearanceAlert 或类似方法将键盘外观设置为深色，*适用于所有文本字段*并与 Cordova 兼容？**

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T14:52:03.953

在各种社交媒体上广泛分享这个问题，更广泛和深入的研究，询问朋友和熟人等后，我只能得出结论，使用phonegap和cordova无法做到这一点。我希望有人能证明我很长。不过，就目前而言，这就是我要得出的结论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:14:38.327

据我所知，如果没有重大黑客攻击，Cordova 就无法做到这一点，Apple 可能不会对此表示赞赏。但不确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T21:04:08.383

如果不通过代码并手动将每个 uitextfields 键盘的样式设置为深色，则无法将其应用于应用程序中的所有文本字段。

编辑 2：不幸的是，如果不利用 Phonegap 框架，似乎没有任何可能的方法来做到这一点。如果没有如上所述的“入侵”它，这似乎是不可能的。

编辑：输入标签（来自 Apple 的 Mobile Safari 或 Phonegap）似乎没有任何 HTML 元素，您可以将其设置为使外观变为警报。所以（如果可能的话）搜索 UITextField *.

![就像在这张图片中...](../Images/3d0afc6312b4bc138a322628a8db4731.png)

就在应该看起来像这样的行的正下方：

```
UITextField *field = [[UITextField alloc] init...]; 
```

添加这一行

```
field.keyboardAppearance = UIKeyboardAppearanceAlert; // just like in your example... 
```

如果您对所有 UITextField 结果执行此操作，那么您的所有键盘都将与您描述中的图片一样。

# java - Java verbose:gc 如何读取输出？

> ID：11889831
> 
> 赞同：8
> 
> 时间：2012-08-09T18:36:53.140
> 
> 标签：java, performance, verbosegc

我有一个 Java 应用程序，它有一些性能问题，有人建议我在 verbose:gc 模式下运行它。这已经完成，但我不知道如何解释日志记录。是否可以向我解释这一切的含义或建议我可以做些什么来提高性能？

输出日志可以在以下位置找到： http: [//pastebin.com/uDNPEGcd](http://pastebin.com/uDNPEGcd)

在此先感谢， 亲切的问候， Maarten

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T18:42:36.000

`verbose:gc`在每次 gc 收集后立即打印并打印有关每一代内存详细信息的详细信息。这是关于如何阅读[详细 gc的博客](http://javaeesupportpatterns.blogspot.com/2011/10/verbosegc-output-tutorial-java-7.html)

如果您正在尝试查找内存泄漏，verbose:gc 可能还不够。使用一些可视化工具，如`jhat`（或）`visualvm`等，

```
 4416K->512K(4928K), 0.0081170 secs

Before GC used memory is 4416K
After GC used memory is 512K
Total allocated memory is 4928K 
```

# vba - Access 2010 编译错误用户定义类型未定义

> ID：11889833
> 
> 赞同：3
> 
> 时间：2012-08-09T18:36:58.373
> 
> 标签：vba, ms-access

我将 2003 年的数据库转换为 2010 年，而 2003 年创建的 VBA 脚本在 2010 年不起作用。我收到消息说存在编译错误 - 未定义用户定义类型。我没有使用 VBA 脚本编写的经验，也没有创建脚本，但了解它在数据库中完成的操作。它突出显示的具体项目是 DIM adoConn As New ADODB.Connection。

我将脚本包括在内，任何帮助都将是有益的，因为执行的操作对我们的工作流程来说是一笔巨大的财富。

```
Private Sub Error_code_exit(Cancel As Integer)

    On Error GoTo Error_code_exit

    Dim strSQLErrorCode As String
    Dim adoConn As New ADODB.Connection
    Dim adoRSErrorCode As New ADODB.Recordset

    Set adoConn = CurrentProject.Connection

    strSQLErrorCode = "SELECT [Error Matrix1].[Error Code], [Error Matrix1].CTC FROM [Error Matrix1];"

    adoRSErrorCode.Open strSQLErrorCode, adoConn, adOpenKeyset, adLockOptimistic

    If Not adoRSErrorCode.EOF Then

        Do

            If adoRSErrorCode.Fields("Error Code") = Me.Error_Code.Value Then
                If IsNull(adoRSErrorCode.Fields("CTC")) Then
                    Me.chkAgree = True
                    Exit Do
                End If
            End If

            adoRSErrorCode.MoveNext

        Loop Until adoRSErrorCode.EOF

    End If

    adoRSErrorCode.Close
    adoConn.Close

Exit_code_exit:
    Exit Sub

Error_code_exit:

    MsgBox Err.Description
    Resume Exit_code_exit

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T18:41:42.540

您需要设置对 ADODB 库的引用。这是 ：

```
Microsoft ActiveX Data Objects x.x Library 
```

在代码窗口中，选择 Tools->References 并向下滚动到您需要的引用，然后勾选它。如果您使用 DAO 记录集并且它们未明确定义为，您的代码可能会遇到另一个问题`DAO.Recordset`

# c# - 在 WinForm 中为文本框自定义用户控件添加标签

> ID：11889834
> 
> 赞同：4
> 
> 时间：2012-08-09T18:37:01.770
> 
> 标签：c#, winforms, user-controls

我正在编写一个有很多文本框的 Windows 窗体应用程序。我想在文本框中添加标签或标题，这样我就不必将很多标签拖到表单上并处理定位等。到目前为止，我已经找到了两种可能的方法来做到这一点。

1.  使用标签和文本框创建用户控件。如何使控件、标签和文本框根据输入的文本适当调整大小，因为该控件将是可重复使用的并且将输入不同的文本大小。如何让文本框的所有属性和事件保持不变。

2.  扩展一个普通的文本框并添加一个称为标签或标题的字符串属性，并在文本框的左侧显示此属性。我知道这可以在带有 CSS 的 Web.UI 中完成，但它是否可以在 winform 中以及如何实现？

关于如何做这些的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T18:40:01.650

您可以创建一个包含标签和文本框的[UserControl 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.aspx)当您将用户控件添加到表单时，其中的标签和文本框将同时添加。您可以公开标签和文本框的属性以在设计或运行时分配值。

使用这种方法，您可以添加多个用户控件以标准化布局。至于根据文本调整控件的大小，您必须订阅事件并手动更改大小。

例如，您可以订阅`TextChanged`标签和文本框的事件。当事件触发时，您计算字符串的大小，然后相应地调整控件的宽度和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:46:44.700

如果您的文本框过多，我建议您切换到[DataGridView](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)。GridView 组件非常适合您所描述的内容，但它当然需要您接受网格布局。

使用 GridView 所涉及的好处之一是在您看到它实际运行之前很难理解：它一次只创建一个 HWINDOW（如果您处于编辑模式，则创建两个）。如果您在整个表单中创建标签和文本框，则每一个都会在操作系统中注册为 HWINDOW 对象。所有这些 HWINDOW 对象都需要时间来显示！在 .NET 1.0 中，WinForms 非常慢，以至于带有超过两打控件的对话框无法使用。尽管 .NET 2.0 在这方面要好得多，但是通过使用管理大量数据的单个控件（而不是每个管理一个数据的大量控件），您仍然可以获得明显更好的性能。

哦，如果您愿意，还有另一个选择：您也可以尝试使用[PropertyGrid](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.aspx)。它的优点是它还会显示帮助并允许您为每个元素创建复杂的编辑控件。

# android - Android DOM解析器，获取列表中的第一项

> ID：11889837
> 
> 赞同：0
> 
> 时间：2012-08-09T18:37:10.690
> 
> 标签：android, dom

我只是想只获得`<song>`列表中的第一个；我正在使用的代码工作正常，但只能`<song>`在我的列表中获取类似标签 ( ) 的最后一个条目。这是我的 XML：

```
 <songs id="stationid">
<song>
<title>
<![CDATA[ Last Breath ]]>
</title>
<artist>
<![CDATA[ Xela ]]>
</artist>
<album>
<![CDATA[ For Frosty Mornings And Summer Nights ]]>
</album>
<albumart>
<![CDATA[ ]]>
</albumart>
<date>1344536317</date>
</song>
<song>
<title>
<![CDATA[ Turn On Switch Off (Starring Valerie Trebeljahr) ]]>
</title>
<artist>
<![CDATA[ Static ]]>
</artist>
<album>
<![CDATA[ Flavour Has No Name ]]>
</album>
<albumart>
<![CDATA[ ]]>
</albumart>
<date>1344536000</date>
</song>
<song>
<title>
<![CDATA[ Aim Low ]]>
</title>
<artist>
<![CDATA[ Sheik & Beige ]]>
</artist>
<album>
<![CDATA[ Sty Wars - A Collection of Por ]]>
</album>
<albumart>
<![CDATA[ ]]>
</albumart>
<date>1344531485</date>
</song>
    </songs> 
```

和我的代码：（我只想检索第一个列表项，因为提要随着歌曲的变化而更新，我想要当前播放的歌曲始终位于列表顶部）

```
 package com.example.networking;

import android.app.Activity;
import android.os.Bundle;

import java.io.IOException;
import java.io.InputStream;

import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import android.util.Log;

import android.widget.ImageView;
import android.widget.Toast;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;

import java.io.InputStreamReader;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element; 
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class NetworkingActivity extends Activity {   

    private InputStream OpenHttpConnection(String urlString) 
    throws IOException
    {
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString); 
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))                     
            throw new IOException("Not an HTTP connection");        
        try{
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            response = httpConn.getResponseCode();                 
            if (response == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();                                 
            }                     
        }
        catch (Exception ex)
        {
            Log.d("Networking", ex.getLocalizedMessage());
            throw new IOException("Error connecting");
        }
        return in;     
    }

private String WordDefinition(String word) {
    InputStream in = null;
    String strDefinition = "";
    try {
        in = OpenHttpConnection(
"http://api.somafm.com/songs/groovesalad.xml");
        Document doc = null;
        DocumentBuilderFactory dbf = 
            DocumentBuilderFactory.newInstance();
        DocumentBuilder db;            
        try {
            db = dbf.newDocumentBuilder();
            doc = db.parse(in);
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }            
        doc.getDocumentElement().normalize(); 

        //---retrieve all the <song> elements---
        NodeList definitionElements = 
            doc.getElementsByTagName("song"); 

        //---iterate through each <song> elements---
        for (int i = 0; i < definitionElements.getLength(); i++) { 
            Node itemNode = definitionElements.item(i); 
            if (itemNode.getNodeType() == Node.ELEMENT_NODE) 
            {            
                //---convert the song node into an Element---
                Element definitionElement = (Element) itemNode;

                //---get all the <artist> elements under 
                // the <song> element---
                NodeList wordDefinitionElements = 
                    (definitionElement).getElementsByTagName(
                    "artist");

                strDefinition = "";
                //---iterate through each <artist> elements---
                for (int j = 0; j < wordDefinitionElements.getLength(); j++) {                    
                    //---convert an <artist> node into an Element---
                    Element wordDefinitionElement = 
                        (Element) wordDefinitionElements.item(j);

                    //---get all the child nodes under the 
                    // <artist> element---
                    NodeList textNodes = 
                        ((Node) wordDefinitionElement).getChildNodes();

                    strDefinition += 
                        ((Node) textNodes.item(0)).getNodeValue() + ". \n";    
                }

            } 
        }
    } catch (IOException e1) {
        Log.d("NetworkingActivity", e1.getLocalizedMessage());
    }   
    //---return the definitions of the word---
    return strDefinition;
}

private class AccessWebServiceTask extends AsyncTask<String, Void, String> {
    protected String doInBackground(String... urls) {
        return WordDefinition(urls[0]);
    }

    protected void onPostExecute(String result) {
        Toast.makeText(getBaseContext(), result, Toast.LENGTH_LONG).show();
    }
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

  //---access a Web Service using GET---
        new AccessWebServiceTask().execute("apple");

}
} 
```

如果有人可以帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:51:28.520

当您第一次点击内部循环中的最后一条语句时，您应该打破 WordDefinition 中的外部 for 循环。您可以这样做，例如，通过设置一个标志并在 for

```
boolean flag = false;    
for (int i = 0; i < definitionElements.getLength && !flag; i++) {
...
    strDefinition += 
                    ((Node) textNodes.item(0)).getNodeValue() + ". \n";
    flag = true;
    break; 
```

我更喜欢使用 XPath，如下所示：

```
private String WordDefinition(String word) {
    InputStream in = null;
    String strDefinition = "";
    XPathFactory xPathFactory = XPathFactory.newInstance();
    XPath xPath = xPathFactory.newXPath();

    try {
        in = OpenHttpConnection(
                "http://api.somafm.com/songs/groovesalad.xml");
        XPathExpression xPathExpression = xPath.compile("/songs/song[1]/artist");
        Node node = (Node) xPathExpression.evaluate(new InputSource(in), XPathConstants.NODE);
        strDefinition = node.getTextContent();
    }
    catch (IOException e1) {
        Log.d("NetworkingActivity", e1.getLocalizedMessage());
    }
    catch (XPathExpressionException e1) {
        Log.d("NetworkingActivity", e1.getLocalizedMessage());
    }
    // ---return the definitions of the word---
    return strDefinition;
} 
```

# php - 从网页运行命令

> ID：11889839
> 
> 赞同：0
> 
> 时间：2012-08-09T18:37:22.913
> 
> 标签：php, html

我正在处理一个项目，您可以在其中输入 youtube 视频链接（例如[http://www.youtube.com/watch?v=qKpLtHw7IKQ](http://www.youtube.com/watch?v=qKpLtHw7IKQ)），并将视频下载到与 html 相同的目录。

我已经有一个可以在终端中运行的 shell 脚本，但现在我需要设置一个网页，在其中粘贴链接并单击一个按钮并下载它。在服务器端，它应该如下所示：`./youtube-mp3 http://www.youtube.com/watch?v=qKpLtHw7IKQop`

任何人都可以帮助我处理 html/php 代码吗？我是 html 和 php 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:51:37.733

您应该使用 exec()：

```
<?php
exec("./youtube-mp3 http://www.youtube.com/watch?v=qKpLtHw7IKQop");
?> 
```

# objective-c - NSRegularExpression enumerateMatchesInString: [...] usingBlock 永远不会停止

> ID：11889841
> 
> 赞同：1
> 
> 时间：2012-08-09T18:37:34.723
> 
> 标签：objective-c, ios, regex

我正在调用上述函数，它正确地遍历所有匹配项。但是，在处理完所有匹配的块后，它并没有完成执行。我可能做错了什么？

使用的正则表达式是：`/\[([^\[\{,]*(,\n)?)*\]/`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:32:06.953

从您对自己问题的回答来看，您似乎通过传递`NSMatchingReportCompletion`. 我怀疑你可能治愈了症状而不是疾病。

我想知道您是否可能不小心将错误的`options`值传递给`enumerateMatchesInString`. 例如，很容易像这样错误地调用它：

```
[regex enumerateMatchesInString:stringToSearch
                        options:NSRegularExpressionCaseInsensitive
                          range:NSMakeRange(0, [stringToSearch length])
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                         // This is called many times, 
                         // even when there is no match!
                     }]; 
```

乍一看，这看起来不错，编译器没有抱怨，但是我们得到了块被调用太多次的不良行为，通常使用`result == nil`.

`NSMatchingReportCompletion`您可以通过添加到,来解决这个问题`options`，而不是多次调用该块，它仅在匹配时调用，并在完成时再次调用。这解决了它，但它是一个不优雅的解决方案，并且忽略了问题的根源。

问题在于，对于...的参数而言，这`NSRegularExpressionCaseInsensitive`根本不是一个合适的值，而是 ) 的值。更糟糕的是，恰好与 相同，这会产生您描述的行为。`options``enumerateMatchesInString``options``regularExpressionWithPattern``NSRegularExpressionCaseInsensitive``NSMatchingReportProgress`

正确的解决方案是简单地传递一个 的`options`值`0`，如下所示，并且`enumerateMatchesInString`仅在匹配时调用，而不是为临时进度而不是在完成时调用：

```
[regex enumerateMatchesInString:stringToSearch
                        options:0
                          range:NSMakeRange(0, [stringToSearch length])
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                         // do stuff here
                     }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:19:09.783

我已通过`NSMatchingReportCompletion`作为选项传递并在匹配为零时将停止设置为 YES 来解决此问题。

# ruby-on-rails - mongrel_rails cluster::start 不起作用，寻找守护进程/守护进程

> ID：11889842
> 
> 赞同：0
> 
> 时间：2012-08-09T18:37:39.147
> 
> 标签：ruby-on-rails, mongrel, mongrel-cluster

我有一个包含以下内容的 mongrel_cluster.yml 文件：

```
cat mongrel_cluster.yml
---
port: "8000"
servers: 2
pid_file: tmp/pids/mongrel.pid
log_file: log/mongrel.log
cwd: /home/directory 
```

当我尝试开始

```
mongrel_rails cluster::start 
```

它说

```
LoadError: no such file to load -- daemons/daemonize
require at org/jruby/RubyKernel.java:1033 
```

我没有root访问权限。但是我已经看到[了这个](http://myridia.com/dev_posts/view/62)链接，我假设我们不需要任何 root 访问权限来测试链接中第 5 点中所说的命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:49:32.860

[http://www.ruby-forum.com/topic/54226](http://www.ruby-forum.com/topic/54226)这是 Zed Shaw 关于 Mongrel 版本的 ruby​​ 论坛帖子。问题在于`mongrel_rails`脚本（不是宝石）

`mongrel_rails`使用守护进程 gem，这就是错误的原因。通过以下方式安装它：

```
gem install daemons 
```

# python - 如何在 Python 中发送身份验证和 HTTP 请求？

> ID：11889843
> 
> 赞同：0
> 
> 时间：2012-08-09T18:37:42.687
> 
> 标签：python, twitter

我是 Python 新手，我一直在尝试连接 Twitter 的公共数据流作为练习项目。我已经做到了这一点：

```
>>> import urllib2
>>> url = urllib2.urlopen("https://stream.twitter.com/1/statuses/sample.json")
Trackback...(omitted)
urllib2.HTTPError: HTTP Error 401: Unauthorized 
```

预计会出现 401 错误，但是我不知道如何继续前进。我目前正在阅读 Twitter Authentication API Docs，他们推荐第三方库，我可以这样做，但我想避免，因为我真的想了解发生了什么。我认为您必须将 OAuth 数据放在标题中？我应该使用 add_header() 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:44:51.940

您发布的链接需要 HTTP 身份验证：

```
>>> from urllib2 import *
>>> password_mgr = HTTPPasswordMgrWithDefaultRealm()
>>> url = "https://stream.twitter.com/1/statuses/sample.json"
>>> password_mgr.add_password(None, url, 'USERNAME', 'PASSWORD')
             #worked with my real twitter credentials ^ 
>>> h = HTTPBasicAuthHandler(password_mgr)
>>> opener = build_opener(h)
>>> page = opener.open(url)
>>> page.getcode()
200 
```

看到[这个](http://www.voidspace.org.uk/python/articles/urllib2.shtml#id5)

# java - 哪个更有效率？（垃圾收集）

> ID：11889847
> 
> 赞同：2
> 
> 时间：2012-08-09T18:37:51.583
> 
> 标签：java, memory-management, garbage-collection

好的，我的问题如下：假设您有一个像下面这样的课程。在运行时：
每次循环运行时都会创建一个新的动作监听器吗？
第二类比第一类效率高得多吗？
在第一堂课中是否创建了 100 个新的 ActionListener 对象？

```
public class Foo extends JFrame {
    public Foo() {
        for (int i = 0; i < 100; i++) {
            JTextField someField = new JTextField();
            someField.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    //DO SOMETHING HERE
                }
            });
        }
    }
} 
```

与类似的类：

```
public class Foo extends JFrame {
    public Foo() {
        ActionListener someActionListener = new ActionListener(){
            public void actionPerformed(ActionEvent e) {
                //DO SOMETHING HERE
            }
        }; 
        for (int i = 0; i < 100; i++) {
            JTextField someField = new JTextField();
            someField.addActionListener(someActionListener);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:42:57.673

第二个示例可以节省 1-2 KB（价值约 0.003 美分），但鉴于功能不一样，正确性更为重要。

相比之下，你在最低工资上的 1 秒时间值 0.2 美分，所以如果你花一秒钟的时间思考它，那可能就是浪费时间。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:44:22.170

在第一个程序中，您运行了`new ActionListener()`100 次。您最终将得到 100 个`ActionListener`对象。

在第二个程序中，您只运行`new ActionListener()`一次。所以你最终只会得到 1 个`ActionListener`对象。

显然，在第一个程序中，您占用了更多内存。但是这些程序并不等价，因为在第一个中，每个`JTextField`都有自己的`ActionListener`，而在第二个中，它们都共享一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:42:10.873

> 每次循环运行时都会创建一个新的动作监听器吗？

在第一堂课，是的。

> 第二类比第一类效率高得多吗？

第二个类为每个新`JTextField()`对象提供相同的动作侦听器。这更有效（节省一些内存）。但是，您应该知道所有 100 个`JTextField()`对象都有**相同的动作侦听器**。

此外，如果您要遇到这种情况，您应该`someActionListener = new ActionListener()`进入`Foo`

# android - 不同屏幕布局上的 ImageButton 大小

> ID：11889848
> 
> 赞同：0
> 
> 时间：2012-08-09T18:37:53.690
> 
> 标签：android, xml, android-layout, imagebutton

我在 2x2 网格中有一个带有 4 个 ImageButton 的屏幕（使用 TableLayout）。

我需要支持所有不同的屏幕尺寸。所以我创建了 4 个布局文件夹（小、中、大和特大）。

它适用于 ImageButton 的位置。但是在大屏幕和超大屏幕上，ImageButton 的尺寸太小了。

我尝试使用 mdpi 和其他文件夹之间的 x0.75、x1、x1.5 和 x2 关系使用 4 个不同密度的文件夹（drawable-ldpi、drawable-mdpi、drawable-hdpi 和 drawable-xhdpi）来解决这个问题.

但我认为这不起作用或不是解决此问题的正确方法。

这是正确的解决方法吗？

我担心小屏幕但密度高。或低密度的中等屏幕。在那些情况下可能不起作用，对吧？

我的另一个想法是在每个大小文件夹的每个布局上强制 ImageButton 的大小（以倾角测量）。这是更好的解决方法吗？

我真的输了。我想应用最佳/正确的解决方案。

有人可以帮助我吗？

感谢并为我糟糕的英语感到抱歉

**更新：**

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:gravity="center_horizontal">

    <TableRow
        android:gravity="center"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_marginTop="60dip"  >

        <ImageButton
            android:id="@+id/newCard_button"
            android:layout_margin="10dip"    
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"             
            android:background="@drawable/selector_new_card_button"/>

        <ImageButton
            android:id="@+id/showLastTicket_button"
            android:layout_margin="10dip"      
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"          
            android:background="@drawable/selector_show_last_ticket_button"/>

    </TableRow>

    <TableRow
        android:gravity="center"        
        android:layout_height="fill_parent"
        android:layout_width="fill_parent">

         <ImageButton
            android:id="@+id/cancelLastTransaction_button"
            android:layout_margin="10dip"      
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"           
            android:background="@drawable/selector_anulla_button"/>

        <ImageButton
            android:id="@+id/searchCustomer_button"
            android:layout_margin="10dip"      
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:background="@drawable/selector_search_customer_button"/>

    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:00:16.563

好的，所以我建议使用相对较新的限定符`sw600dp`和`sw720dp`（最短宽度：600dp 或 720dp）为这些屏幕定义更大的尺寸——基本上是 7 英寸和 10 英寸的平板电脑。您可以定义一个特定`dimen`变量并在资源文件夹中具有更大的值`values-sw600dp`，或者实际上在资源文件夹中完全创建不同的布局`layout-sw600dp`，具体取决于需要更改的程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:51:05.827

您可以尝试通过提供精确值（例如 50dip 而不是换行内容）来调整布局中 ImageButton 的宽度和高度值。dip 值将在不同的屏幕中以不同的大小出现，因为 dip 表示与密度无关的像素。

# android - 根据 GPS 位置或手动地址执行“x”（android /iDevice）

> ID：11889849
> 
> 赞同：0
> 
> 时间：2012-08-09T18:38:02.033
> 
> 标签：android, iphone, gps

所以我对 GPS 和应用程序几乎一无所知，但我确实想弄湿我的脚，并且对基于 GPS 或手动地址的简单应用程序有一个（我的想法很简单）的想法。

我基本上需要知道你是否可以做这样的事情

```
if GPS Location is (11.111/22.222) { Show(**THIS STUFF**) }
or if manual address is (555 Main St, Salem, OR) { Show(**THIS STUFF**)} 
```

在 android 或 iphone

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:42:32.197

您应该使用 android location api 获取 GPS 位置，并检查 onLocationChanged() 方法： if(myLocation.getLatitude==11.111 && mylocation.getLongitude==22.222)

在手动地址上您应该使用 android maps api。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:42:36.070

你可以。它比这复杂得多。两个平台的应用程序都可以做到这一点。快速搜索 Google、Apple Store 和 Android Market 将告诉您当前的应用程序是什么。

如果你想自己做这件事，你需要学习一些新概念。地理围栏（地理缓冲区）。地理位置（地址到坐标转换）。并阅读有关如何有效使用您正在为其编写的设备提供的位置服务的信息。

# java - 从 Java 运行 R 脚本

> ID：11889853
> 
> 赞同：0
> 
> 时间：2012-08-09T18:38:08.123
> 
> 标签：java, eclipse, r

我有一个需要从 Java 调用并运行的 R 脚本。我试过这个代码：`Runtime.getRuntime().exec("Rscript pathTo/R/myScript.R")`。我从 windows 命令运行它工作正常，但是当我在 Eclipse 中使用此代码运行 java 类时，什么也没有发生。控制台没有显示任何内容没有错误没有日志。有人能告诉我如何从 Java 运行这个脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:08:33.080

默认情况下，`Process`从 java 启动的标准输入、标准输出和标准错误重定向到管道，您可以在 java 中访问这些管道。除非您从标准输出和错误管道中读取并自己将文本传输到 Java 应用程序的输出，否则不会看到任何输出。此外，如果管道的内部缓冲区已满，则子应用程序甚至可能在等待 root 写入其数据时阻塞。所以这个过程可能会挂起并且永远不会终止。

从 Java 7 开始，您可以让子进程使用[`ProcessBuilder.inheritIO`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#inheritIO%28%29). 这样可以省去您自己从这些流中读取的所有麻烦。

# php - PDO 不会执行更新

> ID：11889854
> 
> 赞同：0
> 
> 时间：2012-08-09T18:38:10.013
> 
> 标签：php, mysql, pdo

我正在尝试使用`PDO`这样做来更新mysql中的一行，我不知道它为什么不执行。一切似乎都是正确的，但它不会执行，也不会产生任何错误。

首先我得到我通过发送的值`$.ajax`

```
$idRequest = $_POST['idRequest'];
$dateStarted = $_POST['dateStarted'];
$requester = $_POST['requester'];
$quantity = $_POST['quantity'];
$qaauthorization = $_POST['qaauthorization'];
$qengineer = $_POST['qengineer'];
$performer = $_POST['performer'];
$voltage = $_POST['voltage'];
$goal = $_POST['goal'];
$measurementunit = $_POST['measurementunit'];
$account = $_POST['account'];
$centercost = $_POST['centercost'];
$ela = $_POST['ela'];
$it = $_POST['it'];
$testtype = $_POST['testtype'];
$brand = $_POST['brand'];
$model = $_POST['model'];
$part = $_POST['part'];
$objective = $_POST['objective'];
$production = $_POST['production'];
$reason = $_POST['reason'];
$specifications = $_POST['specifications']; 
```

然后我创建查询

```
 $queryRQ = "UPDATE
                request
            SET
                `idRequester` = ? , `idQEngineer` = ? , `RequestDate` = ? , `idModelNumber` = ?,`idPartDescription` = ? ,`idTestType` = ? , `ReasonForTesting` = ? ,
                `Quantity` =?,`Goal` = ?,`idMeasurementUnit` = ?, `Voltage` = ?, `AccountNumber` = ?, `CenterCost` = ?, `ELA` = ?,`ITNumber` = ?, `idPerformer` = ?, `DateStarted` = NOW(), `DateCompleted` = NULL,
                `Specifications` =?, `idObjective` = ?, `idProduction` = ?, `idBrand` = ?, `Available` = 1 , `Pending` = 0)
            WHERE
                idRequest = ?"; 
```

最后，当 i`prepare`和`execute`the`$stmt`似乎什么都没有发生时，它不会产生任何错误

```
$reqVals = array($requester,$qengineer,$dateStarted,$model,$part,$testtype,$reason,
                    $quantity,$goal,$measurementunit,$voltage,$account,$centercost,$ela,$it,$performer,
                    $specifications,$objective,$production,$brand, /* WHERE */ $idRequest);
$stmtRQ = $pdo->prepare($queryRQ);
$stmtRQ->execute($reqVals); 
```

我通过用以下内容包围所有内容来报告错误`try - catch`：

```
try{
 // EVERYTHING
} catch(PDOException $e){
    echo(json_encode($e->getMessage());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:44:36.143

你有一个额外的 NULL 关键字，看起来不合适......

```
`DateStarted` = NOW(), NULL,
                       ^^^^^ 
```

还有一个看起来无效的右括号...

```
 `Pending` = 0)
              ^ 
```

为了发现这类事情，以特定方式格式化 SQL 语句（即使它是更多行）有很大帮助......这是一个格式错误的 SQL 语句，它与您的相同，它具有无关的 NULL 关键字和不匹配的结束（右）括号：

```
UPDATE request
   SET `idRequester`       = ?
     , `idQEngineer`       = ?
     , `RequestDate`       = ?
     , `idModelNumber`     = ?
     , `idPartDescription` = ?
     , `idTestType`        = ?
     , `ReasonForTesting`  = ?
     , `Quantity`          = ?
     , `Goal`              = ?
     , `idMeasurementUnit` = ?
     , `Voltage`           = ?
     , `AccountNumber`     = ?
     , `CenterCost`        = ?
     , `ELA`               = ?
     , `ITNumber`          = ?
     , `idPerformer`       = ?
     , `DateStarted`       = NOW()
     , NULL
     , `Specifications`    = ?
     , `idObjective`       = ?
     , `idProduction`      = ?
     , `idBrand`           = ?
     , `Available`         = 1
     , `Pending`           = 0
     )
 WHERE idRequest = ? 
```

* * *

如果这条 SQL 语句被发送到数据库，那么数据库肯定会引发异常。更根本的问题是您的代码要么没有准备此语句，要么没有按照您期望的方式公开 SQL 异常。

# xml - XSLT 2.0 根据外部 xml 文件修改元素值

> ID：11889855
> 
> 赞同：1
> 
> 时间：2012-08-09T18:38:09.497
> 
> 标签：xml, xslt-2.0, xpath-2.0

我正在尝试通过将 XML 文档中的某些文本节点与外部文件中的元素属性匹配来替换/修改它们。

那是我的 XML 文件：

```
<root>
    <level_1>
        <item_1>xxxxx</item_1>
        <item_2>yyyyy</item_2>
        <item_3>zzzzz</item_3>
    </level_1>
</root> 
```

XSLT 代码：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:functx="http://www.functx.com">
    <xsl:param name="additionalInfoPath"/>
    <xsl:output indent="yes" />
    <xsl:function name="functx:contains-any-of" as="xs:boolean" 
              xmlns:functx="http://www.functx.com" >
  <xsl:param name="arg" as="xs:string?"/> 
  <xsl:param name="searchStrings" as="xs:string*"/> 

  <xsl:sequence select=" 
   some $searchString in $searchStrings
   satisfies contains($arg,$searchString)
 "/>
</xsl:function>
    <xsl:variable name="additionalInfo" select="doc($additionalInfoPath)"/>
    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="*[functx:contains-any-of(string-join(ancestor-or-self::*/upper-case(local-name()),'/'),$additionalInfo//AdditionalInfoData[@Type='ExtraInfo']/InfoDataValue/@TargetElement)]/text()">
                <xsl:value-of select="$additionalInfo//AdditionalInfoData[@Type='ExtraInfo']/InfoDataValue[contains(string-join(current()/ancestor-or-self::*/upper-case(local-name()),'/'),@TargetElement)]/text()"/>
    </xsl:template>
</xsl:stylesheet> 
```

以及为替换提供值的外部 XML 文档：

```
 <AdditionalInfoRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <AdditionalInfoData Type="ExtraInfo">
    <InfoDataValue Name="ITEM_1" TargetElement="ITEM_1" TargetElementValue="">111111</InfoDataValue>
    <InfoDataValue Name="LEVEL_1$ITEM_3" TargetElement="LEVEL_1/ITEM_3" TargetElementValue="">333333</InfoDataValue>
  </AdditionalInfoData>
</AdditionalInfoRoot> 
```

请注意，在外部文档中，目标元素的名称是大写的，我无法控制它，并且由于“LEVEL_1/ITEM_3”之类的原因，我需要在根的完整 xpath 中使用 contains。

这个解决方案有效，但它有点麻烦，我认为必须有一个更好的解决方案，我无法设计......

非常欢迎任何改进这一点的建议或提示！

感谢 Vlax

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T16:09:44.887

**这可能更简单**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vLookupDoc">
   <t>
     <e path="ITEM_1">111111</e>
     <e path="LEVEL_1/ITEM_3">333333</e>
   </t> 
 </xsl:variable>

 <xsl:template match="node()[not(self::text())]|@*">
   <xsl:copy>
     <xsl:apply-templates select="node()|@*"/>
   </xsl:copy>
 </xsl:template>

 <xsl:template match="text()">
  <xsl:variable name="vRep" select=
   "$vLookupDoc/*/e
      [ends-with(
        string-join(current()/ancestor::*[parent::*]/lower-case(name(.)), '/'),
        lower-case(@path)
                 )
      ]
       /string(.)
   "/>

   <xsl:sequence select="(., $vRep)[last()]"></xsl:sequence>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <level_1>
        <item_1>xxxxx</item_1>
        <item_2>yyyyy</item_2>
        <item_3>zzzzz</item_3>
    </level_1>
</root> 
```

**产生了想要的正确结果：**

```
<root>
      <level_1>
            <item_1>111111</item_1>
            <item_2>yyyyy</item_2>
            <item_3>333333</item_3>
      </level_1>
</root> 
```

# html - CSS div 布局代替表格

> ID：11889860
> 
> 赞同：0
> 
> 时间：2012-08-09T18:38:27.767
> 
> 标签：html, css, alignment, css-tables

有没有办法在没有表格的情况下让三个或四个元素相互对齐，如下所示：

![http://i.imgur.com/fvPQw.png](../Images/bb67a1247f24cc5adc508ca300fd49d6.png)

我问这个是因为目前我正在使用表格，但表格拒绝让我将“测试”框设置为特定高度，并使填充物成为实际填充空间的填充物。目前，它只允许填充物具有指定的高度，并要求“测试”框填充所有剩余空间。如果您能为我找到一种方法来设置表格底行的高度，那么我也会接受它作为答案，但我认为最好的方法可能是使用 css 布局

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:51:49.200

是的。您可以使用一系列 div 来模仿屏幕截图中的类似表格的布局。

例如，您的 HTML 布局将是这样的：

```
<div class="header"><p>Top bar</p></div>
<div class="wrapper">
    <div id="leftCol">
        <div id="topLeft">Top Left</div>
        <div id="centerLeft">Filler</div>
        <div id="bottomLeft">Test</div>
    </div>

    <div id="rightCol">
        <p>SPAM!</p>                
        <div class="clear"></div>
    </div>
</div>​ 
```

然后你会像这样应用样式：

```
.clear {
    clear: both;
}

#leftCol {
    float: left;
    width: 300px; /* explicit width on left column */
}

#topLeft {
    height: 100px; /* arbitrary height of top left spot; do not define for auto-sizing */
}

#centerLeft {
    height: 50px; /* another arbitrary height */
}

#bottomLeft {
    height: 200px; /* another arbitrary height */
} 
```

​</p>

我以[JSFiddle](http://jsfiddle.net/5YdP7/)为例。基本上，您将“左栏”浮动在左侧，并让您的内容存在于右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:42:39.893

是的，只需确保将每个 div 的左边距和宽度设置为相同，您可以更改顶部和底部边距以使其适合您的需要。这样，您还可以更改任何您想要的 div 的高度

# opengl - GLSL 着色器使 ATI/AMD GPU 崩溃

> ID：11889863
> 
> 赞同：2
> 
> 时间：2012-08-09T18:38:35.133
> 
> 标签：opengl, glsl

我一直在做一个项目，实验室计算机装有 ATI 系列 6700。该项目是 C++ 和 OpenGL，所以对于着色器，我使用 GLSL。它基本上是一个具有细节层次的行星，因此发送到着色器的多边形数量取决于相机位置，并且距离越近，多边形越多以获得更好的定义。请记住，我确实对细节水平进行了限制，否则当相机离得太近时，由于疯狂的细分，一切都会崩溃。

然而，当在实验室计算机上运行程序时，网格会出现奇怪的抽动（一些顶点出现在其他位置），最重要的是，当我靠得太近时，帧率会下降，最终整个画面都冻结了，我的两个屏幕都转动了黑色，当 Windows 再次可见时，会显示一条消息，说明驱动程序遇到问题并且必须恢复。

我尝试在具有 nvidia GT555M 的个人笔记本电脑上运行我的项目，但没有出现上述问题。没有抽搐，没有帧率下降，也没有崩溃。此外，当我在实验室计算机中禁用着色器时，程序不会崩溃，也不会出现抽搐，但帧率仍然下降。所有这些让我觉得这与 NVidia 和 ATI 解释和编译 GLSL 的方式有关。

首先，我应该说我只创建一个具有 17x17 顶点的 VBO，其中每个顶点只有 16 个字节，3 个浮点数用于位置，4 个字节用于性能填充。所以在创建 VBO 并绘制它时，我没有启用 COLOR、TEXTURE 或 NORMAL，因为只有关于顶点位置的信息。

然而，在 GPU 方面，我可能正在使用非标准的 GLSL 或类似的东西，因为我读过 ATI 卡只能使用标准化的 GLSL。所以这是我的顶点着色器和片段着色器：

[http://pastebin.com/DE6ijidq](http://pastebin.com/DE6ijidq) [http://pastebin.com/Q8xUAguw](http://pastebin.com/Q8xUAguw)

请记住，C++ 所做的是创建 6 个 16 x 16 正方形的网格，每个网格用于立方体的一侧，但它们以原点为中心，因此在主体的第一行中，我相应地替换它们以创建立方体，然后我使用爆炸立方体技术使其成为一个球体并对其进行处理。我没有指定 GLSL 版本，而是使用了不同的变量，这可能是问题所在。有没有办法让它也与 ATI 卡兼容？我应该指定一个版本，如果是，是哪一个？我应该使用 in 和 out 变量，但是如何？我一直在 RenderMonkey 中测试我的着色器，由于某种原因它仍然使用变化。

# android - 处理程序发布的可运行对象看到错误的对象状态（竞争条件？）

> ID：11889865
> 
> 赞同：1
> 
> 时间：2012-08-09T18:38:35.123
> 
> 标签：android, concurrency, message-loop

我在这里遇到了一个非常奇怪的问题，对象状态错误，我在使用`Handler.postDelayed`. 我使用它来安排 2D 绘图的绘图调用，并且此绘图代码检查某些状态字段（如整数和布尔值）。

现在，这些状态字段可能会*在*我安排抽奖后发生变化，但是由于所有方法，甚至延迟调用都在同一个线程上执行（对吗？），因此不应存在由于共享状态而导致的可见性问题。

尽管如此，我有时会看到例如`false`在预定抽签中的标志，即使它不可能是，因为我`true`在安排抽签之前将其设置为并且不再触摸它。一些伪示例代码：

```
public void scheduleDraw() {
    boolean flag = true;
    handler.postDelayed(runnable);
}

runnable = new Runnable() {
    public void run() {
        // flag is false here
    }
} 
```

这怎么可能发生？我不完全确定 Android 是如何实现这些消息循环的，但我检查了调度绘制的方法和调度方法本身的线程标识，它们都在同一个线程（主 UI 线程）上调用。

这让我发疯，有人可以帮忙吗？

**更新** 我注意到问题是由于内部类检查了一次标志，而外​​部类检查了一次。绘制代码作为内部类的一部分运行，并看到标志处于正确状态，而外部类，即使它包含对内部类实例的引用，总是将标志视为假（不正确的状态）。我仍然不明白这个问题，但它似乎与类嵌套有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:28:11.437

我可以在这里看到几个问题。

首先，在您的示例代码中，您将 flag 声明为 scheduleDraw() 中的本地范围变量。我什至看不到 runnable 如何访问它。

假设这只是一个错字并且该标志是一个类变量......简单地将布尔值设置为 true 并不意味着所有线程都会立即看到相同的值。在 Java 中，一些变量写入可以在线程本地缓存，这意味着其他线程实际上会看到不一致的值。避免这种情况的一种方法是声明一个变量 volatile。例如：

```
private volatile boolean flag; 
```

这样做会告诉 Java 运行时这个变量永远不应该在线程本地缓存，所有的读取和写入都应该直接进入“主内存”。

另一种解决方案是使用java.util.concurrent.atomic 包中的[AtomicBoolean实例](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicBoolean.html)

```
private AtomicBoolean flag = new AtomicBoolean();
...
flag.set(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:06:38.367

我发现了问题：外部类保留了对内部类的引用，其中几个实例可以同时处于活动状态（并切换）。由于它们共享外部类的处理程序，外部类有时会在处理程序回调中收到来自刚刚变为非活动的处理程序回调的延迟消息。

我现在不再在外部类和内部类之间共享任何变量。

非常感谢您的帮助！赞赏。

# html - CSS margin-top 在 Firefox 和 IE 中无法正确显示（适用于 Chrome 和 Opera）

> ID：11889866
> 
> 赞同：0
> 
> 时间：2012-08-09T18:38:35.570
> 
> 标签：html, css, internet-explorer, firefox, google-chrome

我的网站页边距有问题。到目前为止，margin-top 似乎在 Firefox 和 IE 中都不起作用，而在 Chrome 和 Opera 中却可以完美运行。我不确定到底是什么问题，我尝试了多种技术并查看了互联网，但到目前为止我还没有看到任何解决方案。

这是我网站的链接：http: [//lukgaming.0fees.net/](http://lukgaming.0fees.net/)

请在 chrome 或 Opera 中查看它的外观以及 Firefox 或 IE 的外观。

该位置还有另一个问题：Firefox 中登录框的相关功能 - 登录框在其他 3 种浏览器（IE、Chrome 和 Opera）中运行良好。

任何帮助，将不胜感激。

注意：我指的是所有这些浏览器的最新版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:50:19.887

您的 js 文件中有 HTML，名为`mingle.js`

这会导致 Firefox 和 chrome 出现错误。这是js文件末尾的HTML

```
<div style="text-align: center;"><div style="position:relative; top:0; margin-right:auto;margin-left:auto; z-index:99999">
<!-- Hosting24 Analytics Code -->
 <script type="text/javascript" language="javascript" src="http://stats.hosting24.com/do.php"></script>
 <noscript>
 <a href="http://www.hosting24.com/" target="_blank"><img src="http://stats.hosting24.com/do.php" alt="web hosting" border="0"></a>
 </noscript>
 <!-- End of Website Analytics Code -->
</div></div> 
```

# javascript - jQuery没有正确格式化html

> ID：11889869
> 
> 赞同：0
> 
> 时间：2012-08-09T18:38:41.337
> 
> 标签：javascript, jquery, html

如果您需要，我可以上传问题的图片，但我需要最后一个项目看起来像其他项目。我阅读了一个 rss 提要并获取了第一个标题，然后将其填充到列表中。我尝试像其他格式一样格式化它，但它不起作用。这是我的功能：

```
<script type="text/javascript">

jQuery(function() {

    jQuery.getFeed({
        url: 'xml/rss-21.xml',
        success: function(feed) {

            var html = '';

            for(var i = 0; i < 1; i++) {

                var item = feed.items[i];

                html += '<li data-theme="c">'
                + '<a href="#page1" data-transition="slide">'
                + item.link
                + '">'
                + item.title
                + '</a>'
                + '</li>';
            }

            jQuery('#result').append(html);
        }    
    });
});

</script> 
```

我需要将其格式化为：

```
<li data-theme="c">
                    <a href="http://www.tristateis.com" data-transition="slide">
                        Win a Free Digital Pocket Memo
                    </a>
                </li> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:42:18.077

当您附加到`html`：

```
html += '<li data-theme="c">'
            + '<a href="#page1" data-transition="slide">'
            + item.link
            +" "               
            + item.title
            + '</a>'
            + '</li>'; 
```

除了格式化字符串之外，您还可以做些什么来获得更多控制权：

```
var li = $('<li></li>',{
   'data-theme' : 'c',
});

var link = $('<a></a>',{
    href : item.link
    text : item.title,
    'data-transition' : 'slide'
}); 
```

然后`li.append(a);`这样更容易编辑，也是一种更好的做法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:42:59.283

```
html += '<li data-theme="c">'
+ '<a href="#page1" data-transition="slide">'
+ item.link
+ '">' // problem here
+ item.title
+ '</a>'
+ '</li>'; 
```

应该

```
html += '<li data-theme="c">'
+ '<a href="#page1" data-transition="slide">'
+ item.link
+ item.title
+ '</a>'
+ '</li>'; 
```

**编辑：**

您需要将链接放在正确的位置：

```
html += '<li data-theme="c">'
+ '<a data-transition="slide" href="'
+ item.link + '" >'
+ item.title
+ '</a>'
+ '</li>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:54:48.457

看起来您实际上并没有在这里创建链接，href 应该是 item.link （假设这是正确的值）

```
html += '<li data-theme="c">'
        + '<a href="' + item.link +'" data-transition="slide">'
        + item.title
        + '</a>'
        + '</li>'; 
```

# python - 解析类似于 archlinux pacman 的命令行参数

> ID：11889870
> 
> 赞同：0
> 
> 时间：2012-08-09T18:38:48.147
> 
> 标签：python, argparse

我正在创建一个使用与[`pacman`](http://www.archlinux.org/pacman/pacman.8.html)Arch Linux 相同风格的 python 脚本，总结如下：

```
prog <operation> [options] [targets] 
```

*   *操作*的形式是 -X（连字符，大写字母），调用脚本时需要一个。
*   *选项*的形式是 -x（连字符，小写字母），并且对于不同的操作*可能意味着不同的东西*。

例如：

*   `pacman -Syu`表示使用和选项执行`sync`操作，使用新软件包升级整个系统。`refresh``sysupgrade`
*   `pacman -Qu`表示使用选项执行`query`操作`upgrades`，列出所有过时的包。
*   `pacman -Ss <arg>`表示使用选项执行`sync`操作，该`search`选项期望另一个参数作为要在同步包中搜索的模式。

**妙语：**

我一直在研究 python 的[argparse](http://docs.python.org/dev/library/argparse.html)库，试图弄清楚如何实现它。到目前为止，我遇到了一些问题/设计问题：

*   `argparse`只接受以连字符为前缀的参数作为可选参数。当绝对需要一个时，我所有的“操作”都会显示为可选参数。
*   我可以让我的脚本有一个“位置”/必需的参数，这将是操作（我必须将操作切换为单词，比如`upgrade`or `add`），然后是可选参数。然而，这仍然不能解决相同选项符号工作不同的问题，也不会让我轻松列出`--help`文本中所有支持的操作。

处理这个参数解析的最流畅的方法是什么？我不反对更改命令的用法，但正如我上面所说，据我所知，它似乎对我的情况没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:42:01.463

One option would be to make `-S` and `-Q` part of a mutually exclusive option group with the `required` keyword argument set to `True`. This wouldn't enforce the requirement to make those the first arguments given, nor would it restrict which other options could be used with each. You'd have to enforce the latter after calling `parse_args`.

Another option I thought of was to make `-S` and `-Q` subcommands. Calling `add_parser` with a first argument starting with '-' seems to be legal, but the errors you get when you actually try to call your script makes me think that either the support is buggy/unintended, or that the error reporting is buggy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:50:06.033

所以我发现这个对隐藏在 argparse 帮助中的[子命令的支持。](http://docs.python.org/dev/library/argparse.html#sub-commands)这正是我所需要的，唯一需要注意的是我没有将`-X`其用作操作的格式；我只是使用像`add`和这样的词`search`。

为了完整起见，这是使用上面链接中的子解析器的示例：

```
>>> # create the top-level parser
>>> parser = argparse.ArgumentParser(prog='PROG')
>>> parser.add_argument('--foo', action='store_true', help='foo help')
>>> subparsers = parser.add_subparsers(help='sub-command help')
>>>
>>> # create the parser for the "a" command
>>> parser_a = subparsers.add_parser('a', help='a help')
>>> parser_a.add_argument('bar', type=int, help='bar help')
>>>
>>> # create the parser for the "b" command
>>> parser_b = subparsers.add_parser('b', help='b help')
>>> parser_b.add_argument('--baz', choices='XYZ', help='baz help')
>>>
>>> # parse some argument lists
>>> parser.parse_args(['a', '12'])
Namespace(bar=12, foo=False)
>>> parser.parse_args(['--foo', 'b', '--baz', 'Z'])
Namespace(baz='Z', foo=True) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:45:56.063

另一种选择是使用`getopt`：[http ://docs.python.org/library/getopt.html](http://docs.python.org/library/getopt.html)

# string - 连接来自多个输出和输入组件的值

> ID：11889871
> 
> 赞同：1
> 
> 时间：2012-08-09T18:38:52.697
> 
> 标签：string, jsf, append, concat

我有 2 个 outputText 字段、1 个必填字段和 1 个可选字段。如何连接或附加所有值并将其设置为单个模型属性？

```
<h:outputText value="AT-" />
<h:outputText value="#{yearOfDate}"/>
<p:inputMask value="#{requiredRefNo}" required="true" mask="9999"/>
<p:inputMask value="#{optionalRefNo}" mask="aa"/> 
```

在给定的示例中，我有例如字符串 AT-2012-6060-VI。如何附加所有值并将其设置为单个模型属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:21:33.260

对您来说，使用扩展的支持组件为此创建一个[复合组件](https://stackoverflow.com/tags/composite-component/info)可能是最简单的[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)，其中所需的格式由[`UIInput#getSubmittedValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#getSubmittedValue%28%29).

这是最简单形式的启动示例：

`/resources/components/refNo.xhtml`

```
<ui:component
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:p="http://primefaces.org/ui"
>
    <cc:interface componentType="refNoComposite" />
    <cc:implementation>    
        AT-#{cc.year}-<p:inputMask id="ref1" required="true" mask="9999"/>-<p:inputMask id="ref2" mask="aa"/>
    </cc:implementation>
</ui:component> 
```

`com.example.RefNoComposite`

```
@FacesComponent("refNoComposite")
public class RefNoComposite extends UIInput implements NamingContainer {

    public RefNoComposite() {
        getStateHelper().put("year", new SimpleDateFormat("yyyy").format(new Date()));
    }

    @Override
    public String getFamily() {
        return UINamingContainer.COMPONENT_FAMILY;
    }

    @Override
    public Object getSubmittedValue() {
        return new StringBuilder()
            .append("AT")
            .append('-')
            .append(getYear())
            .append('-')
            .append(((UIInput) findComponent("ref1")).getSubmittedValue())
            .append('-')
            .append(((UIInput) findComponent("ref2")).getSubmittedValue())
            .toString();
    }

    public String getYear() {
        return (String) getStateHelper().eval("year");
    }

} 
```

随机 Facelets 页面中的使用示例：

```
xmlns:cc="http://java.sun.com/jsf/composite/components"
...
<h:form>
    <cc:refNo value="#{bean.value}" />
    <p:commandButton value="submit" action="#{bean.submit}" />
</h:form> 
```

注意：如果您还想验证该值，则需要覆盖[`UIInput#validateValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#validateValue%28javax.faces.context.FacesContext,%20java.lang.Object%29)支持组件中的方法。顺便说一下，第二个论点正是`getSubmittedValue()`.

# python - 有没有办法用 Django 动态更改 UpdateView 中使用的模型？

> ID：11889874
> 
> 赞同：0
> 
> 时间：2012-08-09T18:39:05.253
> 
> 标签：python, django, django-models, django-forms, django-views

我正在编写的应用程序包括用于创建事件的管道。An`Event`由一类用户提出，然后由管理员批准和编辑。对我来说，问题是 , 有一个子类`Event`，`ScoredEvent`管理员应该能够即时指定它。这会添加一个`ScoredEvent.competition`外键并覆盖`Event.participants`以将它们放入一个包含每个参与者的关联分数的表中。

理想情况下，普通用户创建一个仅包含名称和简短描述的事件（通过限制非管理员 CreateEventForm 上的字段很容易做到），然后管理员可以在批准时返回并填写其他字段事件。

我遇到的问题是我不知道管理员在编辑审批表单视图时如何将其更改`Event`为 a`ScoredEvent`或如何实现。我对该页面的设想是一个编辑视图，其中带有一个标记为“Tie To Competition”的复选框，选中该复选框后，管理员将可以选择一个竞赛，然后将事件保存为`ScoredEvent`. 如果未选中该框，则该事件将继续作为`Event`.

这个应该在哪里处理？我的直觉是我应该在 forms.py 或 Templates 中做一些特别的事情，但我不知道我应该从哪里开始。

```
class Event(models.Model):                                                       
    """Representation of any community event"""                                  
    name = models.CharField(max_length=50, unique_for_date="start_datetime")     
    slug = models.SlugField(max_length=57) # length +7 for datestamp             
    description = models.TextField()                                             
    location = models.CharField(max_length=100, blank=True)                      
    start_datetime = models.DateTimeField('Start', blank=True)                   
    end_datetime = models.DateTimeField('End', blank=True)                       
    participants = models.ManyToManyField(Participant)                                                                                            

    def save(self, *args, **kwargs):                                             
        if not self.slug:                                                        
            self.slug = slugify(self.name)+'-'+datetime.now().strftime("%d%m%y") 
        super(Event, self).save(*args, **kwargs)                                 

    def __unicode__(self):                                                       
        if self.start_datetime:                                                       
            return "%s (%s)" % (self.name, self.start_datetime.date())           
        else:                                                                    
            return self.name                                                     

class ScoredEvent(Event):                                                        
    """Representation of an event that is tied to a competition"""               
    competition = models.ForeignKey(Competition)                                 
    participants = models.ManyToManyField(Participant, through="ScoredParticipant")

    def is_scored(self):                                                         
        """Returns true if any of the participants has a score, else returns false"""
        for participant in self.participants.objects.all():                              
            if participant.score != 0:                                           
                return False                                                     
        return True                                                              

class ScoredPartcipant(models.Model):                                            
    """Participant and associated score for an event"""                          
    participant = models.ForeignKey(Participant)                                 
    event = models.ForeignKey(ScoredEvent)                                                                                                               
    score = models.IntegerField(default=0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:48:05.147

覆盖`get_queryset`并改变是否发布其中一个字段：

```
def get_queryset(self):
    if self.request.POST.has_key('competition'):
        return ScoredEvent.objects.all()
    else:
        return super(MyView, self).get_queryset() 
```

因此，只是为了更好地解释一下：您将使用您提到的“与竞争挂钩”选项通过 Javascript 向表单添加一个字段。然后，如果该字段在 POST 中发送，它将切换为使用`ScoredEvent`。

如果您想根据当前对象的内容自动切换，则需要为此覆盖`get_object`。类似于以下内容：

```
def get_object(self, queryset=None):
    obj = super(MyView, self).get_object(queryset=queryset)
    try:
        return ScoredEvent.objects.get(pk=obj.pk)
    except ScoredEvent.DoesNotExist:
        return obj 
```

它基本上尝试再次查找对象，就好像它是 a`ScoredEvent`并在找到时返回该版本，而不是`Event`.

您可能还需要类似地覆盖`get_form_class`以确保它在它是 a或正在成为 a时验证为`ScoredEvent`应该：`ScoredEvent``ScoredEvent`

```
from django.forms import models as model_forms

def get_form_class(self):
    if isinstance(self.object, ScoredEvent):
        return model_forms.modelform_factory(ScoredEvent, ScoredEventForm)
    else:
        return super(MyView, self).get_form_class() 
```

# c# - Windows Azure 中 Silverlight 应用程序的表单身份验证

> ID：11889877
> 
> 赞同：1
> 
> 时间：2012-08-09T18:39:21.563
> 
> 标签：c#, silverlight, forms, authentication, azure

我正在将一个 n 层 Silverlight 应用程序迁移到 Windows Azure，但遇到了困难。登录后，Web 服务无法知道谁通过了身份验证。我的云项目有两个角色：

*   Web UI：在 Azure 上，它的 IP 是 111.222.33.44:80
*   Web服务：在Azure上，它的IP是111.222.33.44:8080

**网页界面配置：**

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
        <forms name="COOKIENAME" loginUrl="~/Login/login.aspx" timeout="2880" />
    </authentication>
    <authorization>
        <deny users="?" />
    </authorization>
    <machineKey validation="SHA1" decryption="AES" validationKey="VKEY" decryptionKey="DKEY"></machineKey>
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID" />
</system.web> 
```

**Web 服务的配置**

```
<system.web>
    <authentication mode="Forms">
        <forms name="COOKIENAME" loginUrl="~/Login/login.aspx" timeout="2880" />
    </authentication>
    <authorization>
    <deny users="?" />
    </authorization>
    <machineKey validation="SHA1" decryption="AES" validationKey="VKEY" decryptionKey="DKEY"></machineKey>
</system.web> 
```

在 Web UI 角色中，Login/login.aspx 提交用户名和密码。使用 方法创建一个 cookie `FormsAuthentication.SetAuthCookie(username, myVar);`。然后，用户被重定向到`Default.aspx`包含 Silverlight 应用程序的位置。

当它启动时，Silverlight 应用程序通过返回从 Web 服务角色获取用户名`HttpContext.Current.User.Identity.Name`。

在本地云模拟器中一切都很好，但是当我在 Windows Azure（暂存）中部署我的项目时，Web 服务不知道我已连接。我使用了 Fiddler，我看到页面 111.222.33.44:8080/Login/login.aspx 正在被查询（该页面在 Web 服务角色中不存在，这是一种了解用户是否经过身份验证的方法）。

我怀疑 Web 服务无法检索用户名，因为它无法检索由 Web UI 角色创建的 cookie。是否真的可以让它工作，还是我必须将 Web 服务角色与 Web UI 角色合并？

两个角色的机器密钥是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:17:44.997

AFAIK 这两个角色不会共享 cookie。

在类似的情况下，我有一个托管 silverlight 客户端的 web 项目，以及 silverlight 应用程序使用的 web 服务。

用户将登录网站并访问 silveright 客户端。已使用 param 属性为客户端提供了 Web 服务身份验证令牌

```
<object data="data:application/x-silverlight-2," type="application/x-silverlight-2">                
   <param name="Token" value="<%=Token %>" /> 
```

令牌一旦被 Web 服务解密，就会包含登录用户的 ID。

现在，Silverlight 客户端可以访问无状态 Web 服务，并且 Web 服务知道请求与哪个登录用户相关。

我将我的 WebService 和 WebRole 分开，以便服务可以处理 CPU 繁重的工作，让 Web 角色能够快速快速地为网页提供服务。

这有帮助吗？

# c# - 更改工作表名称

> ID：11889878
> 
> 赞同：1
> 
> 时间：2012-08-09T18:39:23.740
> 
> 标签：c#, excel, excel-interop

我正在使用 Excel 互操作来创建一个 excel 文件并向其输出数据，我想根据用户从组合框中的选择来更改工作表名称。但是，我无法从组合框获取输入以显示为工作表名称。但是，如果它来自文本框，我可以获得与工作表名称相同的值。我什至正在使用`comboBox.SelectedItem.ToString()`并将其设为字符串，然后尝试将其应用为工作表名称。用空格替换任何非字母字符也不起作用。字符串只有字母字符和空格，但不会替换原始工作表名称。

这是我用来尝试更改工作表名称的代码。

```
worksheet = (Excel.Worksheet)workbook.Worksheets.Add(Missing.Value, workbook.Worksheets[sheetCount], Missing.Value, Missing.Value);
workbook.Worksheets[sheetCountPlusONe].Name = "Results " + registrationForm.selectedEvent; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:42:31.337

Try this. I am assuming that `registrationForm` is the combobox.

You have to use the `GetItemText` method which analyzes the selected item and finally returns the text of that item.

```
string WsName = this.registrationForm.GetItemText(this.registrationForm.SelectedItem); 
```

**TRIED AND TESTED**

```
 private void Form1_Load(object sender, EventArgs e)
    {
        this.comboBox1.Items.Add("Sheet1111");
        this.comboBox1.Items.Add("Sheet2222");
        this.comboBox1.Items.Add("Sheet3333");
    }

   private void btnOPen_Click(object sender, EventArgs e)
    {
        Microsoft.Office.Interop.Excel.Application xlexcel;
        Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
        Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;

        object misValue = System.Reflection.Missing.Value;
        xlexcel = new Excel.Application();

        xlexcel.Visible = true;

        //~~> Open a File
        xlWorkBook = xlexcel.Workbooks.Open("C:\\sample.xlsx", 0, true, 5, "", "", true,
        Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

        // Set Sheet 1 as the sheet you want to work with
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

        string WsName = this.comboBox1.GetItemText(this.comboBox1.SelectedItem);

        xlWorkSheet.Name = WsName;

       //
       //~~> Rest of code
       //
    } 
```

# azure - 还没开始玩！CentOS 上的 Microsoft Azure 中的应用程序

> ID：11889879
> 
> 赞同：0
> 
> 时间：2012-08-09T18:39:29.313
> 
> 标签：azure, playframework, centos

我创建了一个虚拟机 CentOS。在端口 80 和 443 上的控制面板中创建端点。在 CentOS 中向 iptables 添加规则：

```
# Generated by iptables-save v1.4.7 on Thu Aug  9 18:07:49 2012
*filter
:INPUT ACCEPT [142:12032]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [146:18544]
-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 443 -j ACCEPT
COMMIT
# Completed on Thu Aug  9 18:07:49 2012 
```

运行应用程序：

```
CompilerOracle: exclude jregex/Pretokenizer.next
Listening for transport dt_socket at address: 8000
18:07:05,799 INFO  ~ Starting /srv/play-1.2.5/localevent
18:07:05,808 INFO  ~ Module .svn is ignored, name starts with a dot
18:07:06,820 WARN  ~ You're running Play! in DEV mode
18:07:06,975 INFO  ~ Listening for HTTP at /127.0.0.1:80 (Waiting a first request to start) ... 
```

我去了地址：*.сloudapp.net

但是应用程序没有启动。可能是什么原因？

## #更新1

SELinux 被禁用。CentOS 版本 - 6.2

## #更新2

为测试安装了 Apache。显示主页 Apache。在 httpd.conf 中添加了从 80 到 9000 端口的代理。Play 在 9000 端口启动。Apache 返回 503 错误。Wget 127.0.0.1:9000 一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:55:43.047

查看日志 Apache：

```
[error] (13) Permission denied: proxy: HTTP: attempt to connect to 127.0.0.1:9000 (127.0.0.1) failed
[error] ap_proxy_connect_backend disabling worker for (127.0.0.1) 
```

解决方案：

```
setsebool httpd_can_network_connect 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:22:06.140

AFAIK，您必须向 Azure 虚拟机添加一个端点才能允许连接到 80 TCP 端口。

例如，通过将您的私有和公共端口设置为 80，请参阅此[文档](http://blogs.msdn.com/b/tconte/archive/2012/06/08/running-redis-on-a-centos-linux-vm-in-windows-azure.aspx)，在“将 Redis 暴露给外部”部分下。

# facebook - 可能会使用 appsecret 损害应用程序吗？

> ID：11889887
> 
> 赞同：1
> 
> 时间：2012-08-09T18:40:22.127
> 
> 标签：facebook

我搜索了很多，但找不到类似的问题……所以，我需要问你一个关于 Facebook 应用程序的问题。如果有人窃取了我的 appsecret（这是可能的），他们可以用它做任何事情吗？示例删除应用程序或更改某些内容以及如何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:02:30.747

使用 client_id 和 client_secret，可以使用管理 api 更改应用程序的所有方面。所以不要分享。

# javascript - 弹出一个自定义邮件黑猩猩表格

> ID：11889890
> 
> 赞同：0
> 
> 时间：2012-08-09T18:40:29.473
> 
> 标签：javascript, jquery, ajax, popup, bpopup

我想在页面加载时弹出一个自定义设计的邮件黑猩猩表单，例如 Groupon/Fab 等。我已经复制了表单的代​​码，现在将它作为我们服务器上的一个页面，但是我没有运气在页面加载时创建页面/表单的弹出窗口。我已经尝试过 shadowbox、bpopup 和其他没有运气的东西。我可以让它在按钮按下时“弹出”，但弹出基本上只是加载整个表单页面，而不是提升端口页面，将其居中并调暗和锁定背景。jquery 不是我的强项，所以任何帮助将不胜感激。另外，我不喜欢 jquery，所以如果像 ajax 这样的其他东西对于这个应用程序来说会更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:43:47.580

我会尝试使用 jQuery 的 ready() 函数。 [http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# shell - 未知路径的 Shell 脚本 shebang

> ID：11889892
> 
> 赞同：23
> 
> 时间：2012-08-09T18:40:41.900
> 
> 标签：shell, shebang, env

是否可以在不知道要执行的程序路径的情况下指定 shebang 行？

也许不指定路径

```
#!node 
```

或指定几个选项

```
#!/usr/local/bin/node
#!/usr/bin/node 
```

跨平台解决方案的加分项（各种风格的 linux、BSD、OSX 等...）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-09T18:50:51.710

`/usr/bin/env`专为跨平台解决方案而设计。

```
env executes utility after modifying the environment as specified on
the command line.  The option name=value specifies an environmental
variable, name, with a value of value.  The option `-i' causes env
to completely ignore the environment it inherits.

If no utility is specified, env prints out the names and values of
the variables in the environment, with one name=value pair per line. 
```

所以有些东西是：

```
#!/usr/bin/env node 
```

将是跨平台的“正道”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-19T20:03:28.343

与人们可能认为没有标准位置相反，`env`因此我们只能获取有关其位置的一些信息：

*   `/usr/bin/env`- macOS (10.12)
*   两者`/bin/env`，`/usr/bin/env`-Fedora (25)

我相信其他人将能够扩展该列表。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-09T18:43:09.137

在 shebang 之后放置一个空格。如果程序在环境变量 PATH 中，它应该去。

```
#! perl 
```

当然，Perl 的一个特例是

```
:
eval 'exec perl -S $0 ${1+"$@"}'
  if 0; 
```

这适用于 unix*和*OSX，即使没有 @Jens 指出的 /usr/bin/env

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-09T18:49:39.803

不要使用shebang。

```
node <<eof
your node program here
eof 
```

# sql - SQL query to select all fields where creation date is more than 30 minutes old

> ID：11889898
> 
> 赞同：0
> 
> 时间：2012-08-09T18:41:25.757
> 
> 标签：sql

I have a table with some example columns below:

```
id       creationdate                 name
1        2012-08-09 14:14:22.225      ken
2        2012-08-09 13:11:20.212      john 
```

I want to get all rows where `creationdate` is older than 30 min. from now.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T18:45:58.060

You want to make sure the creation date value is LESS than now minus 30, not greater. The lower the value of a datetime, the older it is.

```
SELECT
        Id,
        creationdate,
        name
    FROM TableName
    WHERE creationdate < DATEADD(MINUTE, -30, GETDATE()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:44:09.213

This will work, alternatively you could use '*' instead of listing columns if that works for your environment. If you are dealing with UTC then use GETUTCDATE().

```
SELECT
    Id,
    creationdate,
    name
FROM TableName
WHERE creationdate > DATEADD(MINUTE, -30, GETDATE()); 
```

# java - 从字符串中提取电子邮件

> ID：11889903
> 
> 赞同：0
> 
> 时间：2012-08-09T18:41:38.520
> 
> 标签：java, xml, string, parsing, email

因此，我正在从 Eudora 解析一个 .mozeml 文件并将它们转换为 mbox 文件（mbox 已损坏并被删除，但 mozeml 文件仍然存在，但无法导入它们）。有超过 200,000 封电子邮件，并且不确定什么是正确处理此问题的好方法。

我正在考虑创建一个 Java 程序，它将读取 .mozeml 文件（它们是 xml，utf-8 格式）解析数据，然后以这种格式编写一个 mbox 文件[http://en.wikipedia.org/wiki/ Mbox#家庭](http://en.wikipedia.org/wiki/Mbox#Family)。

问题只是 xml 文件没有将 To 行和消息分开；它只是一个完整的字符串。我不完全确定如何正确处理。

例如，这是消息的外观

```
 "Joe 1" &lt;joe1@gmail.com&gt;joe2@gmail.comHello this is an e-mail... 
```

或者

```
 "Joe 1" &lt;joe1@gmail.com&gt;"Joe 2" &lt;joe2@gmail.com&gt;Hello this is an e-mail... 
```

有很多测试用例可以检查它是否是.com/.net/com.hk/.co.jp/etc。对于第一个。第二个更容易一些，因为 to 行的结尾是 >。所以，我不确定第一个案例，并确保它对于 200,000 封电子邮件是准确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:04:48.810

尝试使用 antlr 库来解析字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:41:08.387

Here's a standard email regex modified for your format:

```
Pattern pattern = Pattern.compile(";[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}");
String text = "\"Joe 1\" &lt;joe1@gmail.com&gt;joe2@gmail.com Hello this is an e-mail...";
Matcher matcher = pattern.matcher(text);

while (matcher.find()) {
    System.out.println(matcher.group().replaceFirst(";", ""));
} 
```

It's not going to work if, as in your first example, the email runs directly into the message (`joe2@gmail.comHello this`), and it assumes your email addresses always begin with `;`. You can put other delimiters in there, though.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:14:49.777

解决这个问题的第一个想法是使用正则表达式和扫描仪来循环查找下一封电子邮件。

```
class EmailScanner {
    public static void main(String[] args) {
        try {
            Scanner s = new Scanner(new File(/* Your file name here. */););
            String token;
            do {
                token = s.findInLine(/* Put your email pattern here. */);
                /* Write your token where you need it. */
            } while (token != null);
        } catch (Exception e) { 
            e.printStackTrace(); 
        }
    }
} 
```

可以轻松找到可能的电子邮件模式。例如`^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$`或`^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.(?:[a-zA-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)$`参见[http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T19:17:20.390

如果您知道所有域后缀是什么，您可以使用一些 regex-fu 来做到这一点：

[a-zA-Z_\.0-9]+@[a-zA-Z_\.0-9]+\.(com|edu|org|net|us|tv|...)

您可以在此处找到顶级域名列表：[http ://en.wikipedia.org/wiki/List_of_Internet_top-level_domains](http://en.wikipedia.org/wiki/List_of_Internet_top-level_domains)

我相信完整的正则表达式应该是这样的：

[a-zA-Z_\.0-9\-]+@[a-zA-Z_\.0-9\-]+\.(.aero|.asia|.biz|.cat|.com|. coop|.info|.int|.jobs|.mobi|.museum|.name|.net|.org|.pro|.tel|.travel|.xxx|.edu|.gov|.mil|.ac| .ad|.ae|.af|.ag|.ai|.al|.am|.an|.ao|.aq|.ar|.as|.at|.au|.aw|.ax|.az |.ba|.bb|.bd|.be|.bf|.bg|.bh|.bi|.bj|.bm|.bn|.bo|.br|.bs|.bt|.bv|。 bw|.by|.bz|.ca|.cc|.cd|.cf|.cg|.ch|.ci|.ck|.cl|.cm|.cn|.co|.cr|.cs| .cu|.cv|.cx|.cy|.cz|.dd|.de|.dj|.dk|.dm|.do|.dz|.ec|.ee|.eg|.eh|.er |.es|.et|.eu|.fi|.fj|.fk|.fm|.fo|.fr|.ga|.gb|.gd|.ge|.gf|.gg|.gh|。 gi|.gl|.gm|.gn|.gp|.gq|.gr|.gs|.gt|.gu|.gw|.gy|.hk|.hm|.hn|.hr|.ht| .hu|.id|.ie|.il|.im|.in|.io|.iq|.ir|.is|.it|.je|.jm|.jo|.jp|.ke|.kg |.kh|.ki|.km|.kn|.kp|.kr|.kw|.ky|.kz|.la|.lb|.lc|.li|.lk|.lr|.ls|。 lt|.lu|.lv|.ly|.ma|.mc|.md|.me|.mg|.mh|.mk|.ml|.mm|.mn|.mo|.mp|.mq| .mr|.ms|.mt|.mu|.mv|.mw|.mx|.my|.mz|.na|.nc|.ne|.nf|.ng|.ni|.nl|.no |.np|.nr|.nu|.nz|.om|.pa|.pe|。pf|.pg|.ph|.pk|.pl|.pm|.pn|.pr|.ps|.pt|.pw|.py|.qa|.re|.ro|.rs|.ru| .rw|.sa|.sb|.sc|.sd|.se|.sg|.sh|.si|.sj|.sk|.sl|.sm|.sn|.so|.sr|.ss |.st|.su|.sv|.sy|.sz|.tc|.td|.tf|.tg|.th|.tj|.tk|.tl|.tm|.tn|.to|。 tp|.tr|.tt|.tv|.tw|.tz|.ua|.ug|.uk|.us|.uy|.uz|.va|.vc|.ve|.vg|.vi| .vn|.vu|.wf|.ws|.ye|.yt|.yu|.za|.zm|.zw)

当然，我不确定这是否是 TLD 的完整列表，而且我知道 ICANN 最近开始允许自定义 TLD，但这应该会涵盖绝大多数电子邮件地址。

# json - 如何将 JSON 转换为 Scala 中的类型

> ID：11889907
> 
> 赞同：16
> 
> 时间：2012-08-09T18:41:52.697
> 
> 标签：json, scala, playframework

我的问题是我收到来自 Twitter 的 JSON 文本。然后我想将此文本转换为 scala 中的本机对象。有没有标准的方法来做到这一点？我也在使用 Play 2

这是我所拥有的

```
import scala.io.Source.{fromInputStream}
import java.net._

val url = new URL("https://api.twitter.com/1/trends/1.json")
val content = fromInputStream( url.openStream ).getLines.mkString("\n")
val json = Json.parse(content)
val a = (json \ "trends" )
Ok(a(0)) 
```

我想从 JSON 中获取所有趋势名称

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T20:06:34.090

我个人更喜欢`lift-json`，但使用[Play 的 JSON 库](http://www.playframework.org/documentation/2.0.1/ScalaJson)很容易做到这一点：

```
import play.api.libs.json._
import scala.io.Source

case class Trend(name: String, url: String)

implicit object TrendReads extends Reads[Trend] {
  def reads(json: JsValue) = Trend(
    (json \ "name").as[String],
    (json \ "url").as[String]
  )
}

val url = new java.net.URL("https://api.twitter.com/1/trends/1.json")
val content = Source.fromInputStream(url.openStream).getLines.mkString("\n")
val trends = Json.parse(content) match {
  case JsArray(Seq(t)) => Some((t \ "trends").as[Seq[Trend]])
  case _ => None
} 
```

现在这会产生以下结果：

```
scala> trends.foreach(_.foreach(println))
Trend(#TrueFactsAboutMe,http://twitter.com/search/?q=%23TrueFactsAboutMe)
Trend(#200mFinal,http://twitter.com/search/?q=%23200mFinal)
Trend(Jamaica 1,2,3,http://twitter.com/search/?q=%22Jamaica%201,2,3%22)
Trend(#DontComeToMyHouse,http://twitter.com/search/?q=%23DontComeToMyHouse)
Trend(Lauren Cheney,http://twitter.com/search/?q=%22Lauren%20Cheney%22)
Trend(Silver & Bronze,http://twitter.com/search/?q=%22Silver%20&%20Bronze%22)
Trend(Jammer Martina,http://twitter.com/search/?q=%22Jammer%20Martina%22)
Trend(Japan 2-0,http://twitter.com/search/?q=%22Japan%202-0%22)
Trend(Prata e Bronze,http://twitter.com/search/?q=%22Prata%20e%20Bronze%22)
Trend(Final 200m,http://twitter.com/search/?q=%22Final%20200m%22) 
```

所以，是的，看起来差不多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T19:49:51.443

看看[Lift-Json](https://github.com/lift/lift/tree/master/framework/lift-base/lift-json/)。它是 Lift Web 框架的一部分，但可以用作独立库。它可以将 json 解析为案例类（以及这些类的集合，例如列表和地图），并且不需要您添加注释。它还支持将类渲染为json，以及对json的合并和查询。

这是取自他们网站的示例：

```
import net.liftweb.json._
implicit val formats = DefaultFormats // Brings in default date formats etc.

case class Child(name: String, age: Int,
                birthdate: Option[java.util.Date])
case class Address(street: String, city: String)
case class Person(name: String, address: Address,
                 children: List[Child])
val json = parse("""
         { "name": "joe",
           "address": {
             "street": "Bulevard",
             "city": "Helsinki"
           },
           "children": [
             {
               "name": "Mary",
               "age": 5
               "birthdate": "2004-09-04T18:06:22Z"
             },
             {
               "name": "Mazy",
               "age": 3
             }
           ]
         }
       """)

json.extract[Person] 
/* Person = Person(joe, Address(Bulevard,Helsinki),
                  List(Child(Mary,5,Some(Sat Sep 04 18:06:22 EEST 2004)), 
                       Child(Mazy,3,None)))
 */ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T19:24:54.603

我建议使用[Jackson JSON 处理器](http://jackson.codehaus.org/)。它适用于 Java 和 Scala。您只需在类中添加注释，这些注释描述了您希望如何将 JSON 数据映射到本机对象。

一个例子：

```
import scala.reflect.BeanProperty
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.annotate._

class User {
  @BeanProperty var gender: String = null
  @BeanProperty var verified: Boolean = false
  @BeanProperty var userImage: Array[Byte] = null
  @BeanProperty var name: Name = null
}

case class Name {
  @BeanProperty var first: String = null;
  @BeanProperty var last: String = null;
}

object Json {
  def main(argv: Array[String]) {
    val input = """{
  "name" : { "first" : "Joe", "last" : "Sixpack" },
  "verified" : false,
  "userImage" : "Rm9vYmFyIQ=="
}""";

    val mapper = new ObjectMapper(); // can reuse, share globally
    val user: User = mapper.readValue(input, classOf[User]);

    print(user.name.first);
  }
} 
```

这个解决方案有点麻烦，你必须用 注释每个字段`@BeanProperty`，但我不知道更简单的方法。

* * *

备注：据我所知，Jackson 不使用`javax.bean.Introspector`，它试图通过自己检查方法来找到 getter/setter。如果是这样，事情会更容易，可以只写

```
@scala.reflect.BeanInfo
case class Name {
    var first: String;
    var last: String;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-10T09:20:27.710

尝试 Jerkson 库：[https ://github.com/codahale/jerkson/](https://github.com/codahale/jerkson/)

它是一个基于 Jackson 的 scala json 库。它包含在播放 2 中：[http ://www.playframework.org/documentation/2.0.2/ScalaJson](http://www.playframework.org/documentation/2.0.2/ScalaJson)

例子：

```
 case class Person(id: Long, name: String)
    parse[Person]("""{"id":1,"name":"Coda"}""") //=> Person(1,"Coda") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-12T09:58:56.650

使用 Json.parse(string) 转换为 jsvalue 然后添加运算符 as[T] 以提取值

# vba - VBA - 组合框值始终为空

> ID：11889908
> 
> 赞同：0
> 
> 时间：2012-08-09T18:41:53.270
> 
> 标签：vba, combobox, null

我现在只使用 VBA 大约两个星期，所以如果我用错误的名称称呼事物，对不起。无论如何，我一直在使用组合框时遇到问题。盒子里装满了物品，我可以看到它们，滚动浏览它们并单击它们。但是，当我单击检查组合框值的按钮时，无论我在其中选择了什么项目，该值始终为 null 并被

```
If IsNull(ToolReportBox.Value) = True Then
    MsgBox "Please Enter a tool"
    Exit Sub
End If 
```

如果我在那里没有此检查并尝试将值分配给诸如

```
Dim toolName_str As String
    toolName_str = ToolReportBox.Value 
```

稍后在程序中抛出错误“运行时错误'94'：无效使用Null”

除了使它成为一个列表框之外，还有其他人有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:49:21.270

您需要确保在“数据”选项卡中为包含数据的列设置了“绑定列”属性。例如，如果您将其设置为 1，它将查看 RowSource 并从那里列出的第一列中获取值。确保该列中有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:49:36.933

检查组合框中的值 - `forms!frmName!ToolReportBox.column(0)`（然后增加到 1,2,3，但是组合框中有很多列） - 这是以防万一你看到的实际上不是返回的值。

这通常发生在`ListWidth`组合框中的属性为零时

# ruby-on-rails - Rails 追加不向 has_many 添加对象：通过

> ID：11889922
> 
> 赞同：2
> 
> 时间：2012-08-09T18:42:41.290
> 
> 标签：ruby-on-rails, ruby, has-many-through

尝试通过 has_many :through 关系添加对象时，我遇到了奇怪的行为。

我的模型：

```
Class Player < ActiveRecord::Base
  has_many :player_to_team_histories
  has_many :team_histories, through: :player_to_team_histories
end
Class TeamHistory < ActiveRecord::Base
  has_many :player_to_team_histories
  has_many :players, through: :player_to_team_histories
end 
```

编码：

```
>>p = Player.first
>>p.team_histories.count
0
>>p.team_histories.append TeamHistory.create
>>p.team_histories.count
0
>>p.team_histories.push TeamHistory.create
>>p.team_histories.count
1
>>p.team_histories << TeamHistory.create
>>p.team_histories.count
2 
```

为什么不`append`将新创建的添加`TeamHistory`到`team_histories`数组中？

我正在使用 Ruby 1.9.2。

**更新**

向 Github 发布问题： [https ://github.com/rails/rails/issues/7364](https://github.com/rails/rails/issues/7364)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:31:12.093

据我所知，`append`不是 ActiveRecord 方法，而是传递给表示`team_histories`. 此方法可用但无法正确保存关联可能是错误或疏忽，但同时您应该只使用`push`或`<<`用于此目的。

# javascript - 获取网站访问者的语言环境（语言）？

> ID：11889925
> 
> 赞同：4
> 
> 时间：2012-08-09T18:42:49.763
> 
> 标签：javascript, html

我正在开发一个网站，我试图猜测如何让客户获得当前的语言环境......这个网站确实使用了很多 JQuery 和 Javascript，那么有什么方法可以使用它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:44:26.813

试试[这个](https://github.com/dansingerman/jQuery-Browser-Language) `jQuery`插件来获取浏览器语言设置。

示例用法：

```
$.browserLanguage(function( language , acceptHeader ){
    alert("You have your browser language set to " + language);
}) 
```

# c - 为什么微软将他们的函数调用写在多行上？

> ID：11889929
> 
> 赞同：2
> 
> 时间：2012-08-09T18:43:03.193
> 
> 标签：c, driver

所以我目前正在尝试为 PCI 设备编写驱动程序。我一直在查看 WDK 文档附带的一些示例，并在其源代码中发现了一些我不熟悉的内容。

这就是微软如何进行他们的函数调用（至少我认为是这样的）

```
VOID
PLxEvtIoWrite(
    IN WDFQUEUE         Queue,
    IN WDFREQUEST       Request,
    IN size_t            Length
) 
```

他们有这样格式化函数调用的原因吗？将返回类型放在自己的行上让我困惑了很长时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:44:39.190

这只是试图使代码更具可读性/自我记录。换行符没有语法意义，它们只是单独分解参数。

它对于那些具有更多参数和更长类型注释的函数更有用。

举个例子：[`IoCreateFileEx`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff548283.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:47:57.340

如果你的函数有很多参数（这是不好的做法，但微软倾向于这样做），那么编写这样的原型而不是类似的东西更易于人类阅读和感知

```
struct MyRetValType **MagicFunctionName(uint32_t arg1, struct W32_MEM_DESCRIPTOR mem, const union foo **restrict *parm2, va_list argptr, unsigned long long int (*success_callback)(int code, void *context), void *(*error_callback)(int error, void *context)); 
```

# python - 在 Requirements.txt 中为 Virtualenv 指定 Python 版本

> ID：11889932
> 
> 赞同：26
> 
> 时间：2012-08-09T18:43:08.327
> 
> 标签：python, virtualenv, pip

我正在使用 virtualenv 与团队一起开发 django 应用程序。我们部署的服务器正在运行 python 2.6，但我们机器的默认值是 2.7.3。有没有办法在代码库中的 requirements.txt 文件或类似的文件中指定 python 版本？

我知道 requirements.txt 是 pip 的东西，python 版本是 virtualenv 的东西，但是不必告诉每个加入团队的新人如何设置他们的 virtualenv 真的很方便。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T18:58:22.553

pip 和 virtualenv 都没有安装 python（尽管[pip 尝试](https://github.com/pypa/pip/issues/583)了）。他们使用您指定的任何内容。

您可以编写一个提到所需 Python 版本的 README，或者提供一个可以部署到 localhost 并在那里指定版本的[结构脚本。](http://fabfile.org)例如，[安装 virtualenv、pip、distribute 的说明](https://stackoverflow.com/a/5177027/4279)。

对于那些不阅读说明的人来说，可能有一个 CI 系统（[jenkins](http://jenkins-ci.org/)，[buildbot](http://trac.buildbot.net/)）可以使用支持的 python 版本（提交之前/之后）运行单元测试。

要管理多个 python 安装，您可以使用类似[pythonz](https://github.com/saghul/pythonz)的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T18:58:27.187

> 不必告诉每个加入团队的新人如何设置他们的 virtualenv 真的很方便

只需将其添加到您在加入时为新成员提供的正常说明中即可；当您告诉他们有关内部文档 wiki、wifi 的密码和三明治送货店的电话号码时，就在同一个地方。

不必告诉人们并让他们自己弄清楚是*非常不方便的；*他们第一次提交的东西`collections.Counter`只是为了发现它破坏了构建，因为服务器没有 2.7.x

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-08-30T16:34:17.940

你不能把它放进去`requirements.txt`，但你可以在脚本的顶部添加这个代码：

```
import sys
if sys.version_info[0:2] != (2, 6):
    raise Exception('Requires python 2.6') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T22:10:23.387

根据您的评论，这里唯一的问题应该是确保没有仅 2.7 的代码进入您的代码库。为此，我建议使用[`tox`](http://tox.testrun.org/latest/)，并将其配置为创建一个`2.6`测试环境，这样当您的同事运行您的测试套件时，测试就会在`2.6`虚拟环境中运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-29T23:33:40.643

您还可以通过以下命令指定默认 Python：

```
sudo update-alternatives  --set python /usr/bin/python3.7 
```

# sql - 具有多个条件的 SQL LocalDB SELECT 语句

> ID：11889937
> 
> 赞同：1
> 
> 时间：2012-08-09T18:43:28.177
> 
> 标签：sql, sql-server, vb.net, sql-server-2012, localdb

我为我的 .NET 项目创建了一个存储过程，它是这样的，

```
ALTER PROCEDURE [dbo].[Search_PM_SELECTED]
(
    @acID varchar(50),
    @pmCat varchar(50),
    @pmTitle varchar(50),
    @pmUsername varchar(50),
    @pmSiteURL varchar(100)
)
AS
    SELECT * FROM pmPassword
    WHERE acID  = @acID and
    pmCat like '%' + @pmCat + '%' or
    pmTitle like '%' + @pmTitle + '%' or
    pmUsername like '%' + @pmUsername + '%' or
    pmSiteURL like '%' + @pmSiteURL + '%'; 
```

我要完成的是选择与这些字段匹配的所有记录，但它们必须在**acID**内。为了进一步解释，请看下面；

```
 acID    pmCat      pmTitle    pmUsername       pmSiteURL  
 1      Windows     Google       MyName     www.somewhere.com     
 2      Network     FTP          MyName     www.somewhere.com 
```

上面应该看起来像一张桌子。我只想显示**acID = 1**

的项目 请注意，每当我添加一条记录时，**acID**会自动递增，这是我仅在 VB 中完成的。**acID 不是 PK**。我的 PK 是**pmID**，它没有包含在查询中，因为我没有用它。

我正在使用**VB**和**SQL LocalDB** (2012)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:45:54.810

`AND`的优先级高于`OR`。您需要添加括号以获得所需的内容：

```
SELECT *
FROM pmPassword
WHERE acID = @acID
AND
(
    pmCat LIKE '%' + @pmCat + '%' 
    OR pmTitle LIKE '%' + @pmTitle + '%'
    OR pmUsername LIKE '%' + @pmUsername + '%'
    OR pmSiteURL LIKE '%' + @pmSiteURL + '%'
); 
```

您的查询解释如下：

```
SELECT *
FROM pmPassword
WHERE (acID = @acID AND pmCat LIKE '%' + @pmCat + '%')
OR pmTitle LIKE '%' + @pmTitle + '%'
OR pmUsername LIKE '%' + @pmUsername + '%'
OR pmSiteURL LIKE '%' + @pmSiteURL + '%' 
```

# python - Django：上传的文件没有被垃圾收集，导致内存问题

> ID：11889939
> 
> 赞同：6
> 
> 时间：2012-08-09T18:43:35.120
> 
> 标签：python, django, memory, file-upload, heroku

我有一个处理上传文件的 Django 视图，当它被重复调用时，我们总是会遇到内存溢出错误。（我们在 Heroku 上，所以每个 web dyno 有 512mb 的内存）。

内存溢出错误表明每次调用都会根据文件大小增加内存使用量，并且内存使用量永远不会下降。我认为服务器将图像读入内存以将其保存到 Django 模型中，但完成后永远不会释放内存。

我认为必须有对函数返回后持续存在的图像的引用，以防止图像被垃圾收集。但我想不出那可能是什么。

这是代码的简化版本，我对其进行了测试以确保它具有相同的问题：

```
def simplified_add_image(request, biz_id):
    if request.is_ajax():
        # the file is stored raw in the request
        newBI = NewBusinessImage(business_id=biz_id, name=request.GET.get("name"), primary_image=True)
        newBI.id = uuid.uuid4()
        newBI.save()
        uniquename = biz_id + ".." + get_a_uuid() + ".jpg"

        newBI.original_image.save(uniquename, ContentFile(request.read()))

        # this starts a series of tasks to process the image into various sizes.
        # don't think it's the problem because it runs on a separate server, and the
        # web server is the one that goes over memory
        tasks.image_meta_task.delay(uniquename, newBI.id)

        return StockJSONResponse(request, {
            "success" : True,
        }) 
```

我真的很感激任何帮助。非常感谢！

粘土

**以下是评论中要求的其他信息：**

我们将文件存储在 AmazonS3 上：

```
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
STATIC_URL = 'https://s3.amazonaws.com/%s/' % AWS_STORAGE_BUCKET_NAME
from S3 import CallingFormat
AWS_CALLING_FORMAT = CallingFormat.SUBDOMAIN 
```

这是 NewBusinessImage 模型

```
class NewBusinessImage(models.Model):
    id = UUIDField(auto=True,primary_key=True,version=4, default=uuid.uuid4())
    business = models.ForeignKey('Business')
    name = models.CharField(max_length=100)
    original_image = models.ImageField(upload_to='photos/originals/')
    thumbnail = models.ImageField(upload_to='photos/thumbnails/')
    display_image = models.ImageField(upload_to='photos/displays/')
    enlarged_image = models.ImageField(upload_to='photos/enlarged/')
    num_views = models.PositiveIntegerField(editable=False, default=0)
    primary_image = models.BooleanField(default=False) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-03T20:08:57.690

根据 Django 文档，它附带 2 个文件上传处理程序。内存和临时文件处理程序（[链接到文档）](https://docs.djangoproject.com/en/1.8/topics/http/file-uploads/#upload-handlers)

如果您将设置[FILE_UPLOAD_HANDLERS](https://docs.djangoproject.com/en/1.8/ref/settings/#file-upload-handlers)设置配置为仅包含“django.core.files.uploadhandler.TemporaryFileUploadHandler”，则它永远不应将文件保存到内存中，并且从技术上讲永远不会导致您目前面临的内存问题。

另一种选择是将[FILE_UPLOAD_MAX_MEMORY_SIZE](https://docs.djangoproject.com/en/1.8/ref/settings/#std:setting-FILE_UPLOAD_MAX_MEMORY_SIZE)设置为少量，这将导致上传直接进入磁盘。

# google-api - 以编程方式为 Google API 创建产品/客户端 ID

> ID：11889942
> 
> 赞同：1
> 
> 时间：2012-08-09T18:43:50.373
> 
> 标签：google-api, google-api-java-client

我正在寻找一种以编程方式为 Google API 创建**项目**（不是产品，我的错误）和/或客户端 ID 的方法，我已经用尽我的 google-fu 来查找与此相关的任何内容。

有谁知道这是否可能，或者产品和客户 ID 是否都需要手动创建？

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:56:16.157

您是在谈论要包含在 Google 购物和网页搜索中的产品吗？

Content API for Shopping 允许您以编程方式创建它们：[https ://developers.google.com/shopping-content/](https://developers.google.com/shopping-content/)

# jquery - 对具有相同类的多个对象进行 jquery 验证

> ID：11889945
> 
> 赞同：1
> 
> 时间：2012-08-09T18:43:53.800
> 
> 标签：jquery, validation

我有一个克隆文本框的场景。然后对于每个框输入，我针对 db（通过 ajax 调用）验证输入是否正确。如果输入无效，我会显示一个错误框，最后我有一个 jquery 验证器方法，该方法检查是否有任何框有错误消息，然后它会引发错误并且表单不会发布。但问题是验证器显示所有文本框的错误消息，无论值是对还是错。

```
 <table id="next_module" class="table">
                <thead>
                        <th>Message Id</th>

                </thead>
                <tbody>

        <tr id="row_0">
                    <td>
                        <input id="messge-id_0" class="valid_next_messge_module numeric messgeing_id required" name="messge-id_0" type="text" onblur="get_messge_detail($(this));" value="">
                        <label id="txterr_0" class="next_messge_error" style="display: none;color:red;width:0px">*</label></td>
        </tr>
        </tbody>
        </table>

            <script>
            var $underscore = $("#next_module tbody tr:first");
            var $clone = $underscore.clone();
            $clone.attr('id', $clone.attr("id") + i );
            $clone
            .find("input,label")
            .each(function() {
                $(this).attr({
                    id: this.id + i,
                    name: this.name + i,
                    value:'',
                    src:''
                });
            });
            $clone
            .appendTo("#next_module")
            .show();
            i++;
            </script>

            <script>
            function get_messge_detail(obj)
            {
                var messge_id = $.trim(obj.val());
                var id_num = (obj.attr('id')).split('_')[1];
                if(messge_id)
                {
                var url = "/server/messge/ajax_get_messge_detail/";
                var data = {'messge_id':messge_id};

                $.ajaxSetup({async:false});

                $.post(url, data, function (response) {

                    if (response["msg"])
                    {
                        no error found 
                    }
                    else
                    {
                        $("#"+(obj.attr('id'))).focus();
                        $("#txterr_"+ id_num).show();
                    }
                });
            }

            jQuery.validator.addMethod("valid_next_messge_module", function() {
                var status  =  false;
                if (parseInt( $('.next_messge_error:visible').length) > 0)
                    return false;
                else
                    return true;
            }, "Please enter valid next messgeing module id.");

            </script> 
```

# c# - IList 的最快实现 /ICollection 在添加/删除元素方面

> ID：11889948
> 
> 赞同：2
> 
> 时间：2012-08-09T18:44:13.080
> 
> 标签：c#, .net, c#-4.0, collections

我在一个类（我们称之为**MyClass**）中发现了一些非常讨厌的代码，它广泛使用**了 List of T.Add/Remove**方法。此外，同一个类将该集合公开为具有 T 类型 IList 的属性，因此更改类型将涉及一些重构。

此外，该 MyClass 集合用作事件侦听器对象的容器，因此客户端代码只需订阅（将自身添加到集合中）和取消订阅（将自身从集合中删除）。顺序无关紧要，无论是列表的开始/中间/结束。

为了提高性能，我想替换内部实现细节，将 List of T 替换为.... 不知道是什么。我尝试了 T 的 LinkedList，但它没有实现 T 的 IList。我[在 MSDN 上查看了 T 的 IList](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)，但没有实现 IList 的类列表，因此我可以比较文档。

另一件事是我试图将 T 的 IList 更改为 T 的 ICollection，这可能是一个解决方案（因为**MyClass**的客户端代码使用 Add/Remove 方法，因此不需要重构）但发生了有趣的事情：

```
 LinkedList<string> list = new LinkedList<string>();
        list.Add("test"); 
```

由于出现错误，此代码无法编译：

> “System.Collections.Generic.LinkedList”不包含“Add”的定义，也没有扩展方法“Add”

但是当我将其更改为：

```
 ICollection<string> list = new LinkedList<string>();
        list.Add("test"); 
```

然后我工作了。你能解释一下为什么第一个示例没有编译+告诉.NET Framework 中 T 的 IList 在添加/删除项目方面的最快实现是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T18:45:48.450

`LinkedList<T>`基本上`ICollection<T>`使用[显式接口实现](http://msdn.microsoft.com/en-us/library/ms173157.aspx)来实现。因此，该`Add`方法仅在您将其“视为”时可用`ICollection<T>`。

关键是如果你知道你使用的是链表，你应该使用`AddFirst`or`AddLast`代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:56:15.933

没有一个单一的类在添加和删除方面是最快的。它们都是为了在某些情况下更快而构建的，它们也都有其缺点。 `List`大多数时候可以快速添加到末尾，但它会定期进行昂贵的添加，涉及复制每个元素。当您开始在接近开始时添加项目时，它会变得越来越昂贵。去除在最后是便宜的，并且随着你向开始移动而变得越来越昂贵。

`LinkedList`可以有效地添加到开头或结尾，但是这些添加仍然比添加到 a 的末尾要慢很多`List`（但没有任何非常大的添加）。`LinkedList`添加到快速获取昂贵的开始或结束以外的位置。在大多数实际情况下，`LinkedList`从性能的角度来看，这不是一个好的选择。

我可以继续，但需要一段时间。重点仍然是我们需要了解有关如何使用集合的更多详细信息，以便提出更高性能的替代方案（或使用现有集合的不同方式）。

由于您已经描述了您所拥有的只是一组不需要排序的数据，只需要有效地添加/删除/迭代所有最好的集合都是`HashSet<T>`. 您可以自己对基于散列的数据结构的内部工作进行一些研究（这很酷），但关键是它是一个*无序*的数据结构，具有非常有效的元素添加/删除，并且您可以有效地迭代。这非常适合您的情况。使用基于哈希的数据结构要记住的一件事是，您的对象需要具有有意义的实现`GetHashCode`（`Equals`默认的通常不适用于您的自定义类型）。如果您使用类似`int`或`string`作为关键，它已经有了很好的实现。

# c# - HttpContext.Current.Request.ApplicationPath 在生产中为空

> ID：11889950
> 
> 赞同：3
> 
> 时间：2012-08-09T18:44:15.170
> 
> 标签：c#, asp.net

在我的开发服务器上`HttpContext.Current.Request.ApplicationPath`正确返回路径，但在生产中它返回空。

为什么会这样？

我正在使用它来构建 URL，现在在生产中，链接不起作用，如下所示：

```
http://section/page1.aspx 
```

但应该是：

```
https://www.example.sub.com/section/page1.aspx 
```

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:01:35.607

该`ApplicationPath`属性返回应用程序所在文件夹的路径，不包括域名。

我想您已将应用程序放在与开发服务器中的域名同名的文件夹中。然后该属性返回文件夹的名称，而不是实际的域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T07:49:32.693

请试试这个

```
public static string RootURL {
get {
    var _with1 = System.Web.HttpContext.Current.Request;
    return _with1.Url.Scheme + "://" + _with1.Url.Host + _with1.ApplicationPath;
} 
```

}

当您需要带有应用程序路径的root url时使用此功能，
请尝试让我知道您是否有问题......

# jquery - 无法提交在 Jquery 模型中加载的页面

> ID：11889954
> 
> 赞同：2
> 
> 时间：2012-08-09T18:44:23.120
> 
> 标签：jquery, asp.net, popup, modal-dialog

我正在从母版页加载 Jquery 模型中的 aspx 页面，页面在弹出窗口中加载正常。但弹出不会触发任何服务器端事件。

**母版页代码**

```
<div id="Exceptionsdialog"></div>  

function OpenExceptions() {
    $('#Equipmentdialog').load('Popups/Test1.aspx', function () {
       $(this).dialog({
            modal: true,
            width: 900,
            height: 400
        });
    });
} 
```

但是没有一个服务器方法被触发，或者当我提交页面或任何按钮单击事件时收到错误消息，指出找不到资源。

```
<Page Language="C#" AutoEventWireup="false"  CodeBehind="Exceptions.aspx.cs" Inherits="LabSafe.Web.Popups.Exceptions" />
<head runat="server">
<title></title>
<script type="text/javascript">
    function OpenJquerypopup() {
        alert("Hello");
    }
</script>
<form id="form1" runat="server">
    <div id="div_assetSearchBar">
        <asp:Button runat="server"  id="btn_ViewExceptions" Text="View Exceptions"  OnClick="btn_ViewExceptions_Click" />
    </div> 
```

[截屏](http://i.stack.imgur.com/odzTz.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:50:59.707

jQuery modals 是通过克隆 DOM 元素并将它们放置在 body 标记处来创建的。这会创建有效的 DOM 元素，并且在客户端可以正常工作。

然而，asp.net 控件要发送事件，它们必须在表单标签内（asp.net 只创建一个表单标签）。

解决方案是创建对话框，然后将元素放回表单标签中。

```
function OpenExceptions() {
    $('#Equipmentdialog').load('Popups/Test1.aspx', function () {
       $(this).dialog({
            modal: true,
            width: 900,
            height: 400
        });
       $('#Equipmentdialog').parent().appendTo(jQuery("form:first"));
    });
} 
```

您的服务器事件现在应该可以完美触发。

# html - 1 个内容栏和 2 个侧边栏的 CSS 代码

> ID：11889956
> 
> 赞同：0
> 
> 时间：2012-08-09T18:44:27.007
> 
> 标签：html, css

我创建了一个“菜鸟”页面，我想使用 CSS 对其进行样式化，并且在某种程度上我已经做了一些事情。

我希望我的内容出现在中心，同时带有（白色背景）和两个侧边栏（左右）`color:blue`；

对于这个页面：[http](http://blogsoc.org/mail) ://blogsoc.org/mail 我在这里编辑代码：blogsoc.org/mail1

像这样（截图）：[https ://dl.dropbox.com/u/46445635/stack%20question%20copy.png](https://dl.dropbox.com/u/46445635/stack%20question%20copy.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:49:16.470

将所有内容放入`#container`块中。

```
body { background-color: blue; }
#container { margin: 0 auto; width: 989px; background: white; } 
```

`margin: 0 auto`使您的块垂直居中。

`width: 989px`是 1024x768 屏幕的安全区域。

示例 HTML：

```
<html>
    <head>
        <style>
            body { background-color: blue; }
            #container { margin: 0 auto; width: 989px; background: white; }
        </style>
    </head>
    <body>
        <div id="container">
            <!-- All your current content -->
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:55:35.483

看看这个[http://jsfiddle.net/R8S6h/2/show/](http://jsfiddle.net/R8S6h/2/show/)

*（去掉`show/`看代码）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:03:27.717

你可以试试（[http://jsfiddle.net/wh8RS/](http://jsfiddle.net/wh8RS/)和[http://jsfiddle.net/wh8RS/show/](http://jsfiddle.net/wh8RS/show/)）：

CSS：

```
html,body{
 overflow:auto;
}
body{
 margin:0;
 width:100%;
 height:100%;
 position:fixed;
 top:0;
 left:0;
}
.clear{clear:both;}
#wrapper{
 overflow:hidden;
 min-height:100%;
}
#sidebarleft,#sidebarright{
 background-color:blue;
 width:250px;
 max-width:25%;
 margin-bottom: -10000px;
 padding-bottom: 10000px;
 min-height:100%;
}
#sidebarleft{
 float:left;
}
#sidebarright{
 float:right;
}
#main{overflow:hidden} 
```

HTML：

```
<body>
<div id="wrapper">
<div id="sidebarleft">Text 1</div>
<div id="sidebarright">Text 2</div>
<div id="main">Text 3</div>
<div class="clear"></div>
</div>
</body> 
```

# android - 在 textview 中更改文本

> ID：11889961
> 
> 赞同：0
> 
> 时间：2012-08-09T18:44:45.097
> 
> 标签：android, textview

那么是否可以动态更改textview中部分文本的文本大小假设我们有一个方法可以做到这一点......我错过了什么......我想让x变量是y的两倍......他们是字符串顺便说一句...

```
private void Data_transfer() {

    test3.setText( x + "   " + y);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:52:15.597

您可以使用`Spannable`带 a的[类型在一个字段](https://stackoverflow.com/questions/1529068/is-it-possible-to-have-multiple-styles-inside-a-textview)`TextView`中设置多种样式。

在你的情况下，你可以这样做，使用[`fromHtml()`](http://developer.android.com/reference/android/text/Html.html#fromHtml(java.lang.String))生成`Spannable`字符串的方法：

```
test3.setText( Html.fromHtml( "<font size='10'>" + x + "</font>   <font size='5'>" + y + "</font>" ) ); 
```

当然，您可以更改`10`并更改`5`为您喜欢的任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:46:28.590

```
private void Data_transfer() {

TextView tv = (TextView)findViewById(R.id.textView1);
tv.setText("Welcome to android");

} 
```

# javascript - 无法让动态大小的 jscrollpane api 工作

> ID：11889971
> 
> 赞同：0
> 
> 时间：2012-08-09T18:45:24.567
> 
> 标签：javascript, jquery, jquery-plugins, jscrollpane, jquery-jscrollpane

我一直在尝试使用[jscrollpane](http://jscrollpane.kelvinluck.com/)为某些内容添加自定义滚动条。数据是通过 ajax 提取的，[jscrollpane api](http://jscrollpane.kelvinluck.com/ajax.html)很好地工作。

但我试图使滚动窗格的高度始终为用户浏览器窗口高度的 70%。jscrollpane[网站](http://jscrollpane.kelvinluck.com/dynamic_height.html)说我可以使用以下代码使其工作，但我没有运气。

```
$(function () {
    $('.scroll-pane').each(

    function () {
        $(this).jScrollPane({
            showArrows: $(this).is('.arrow')
        });
        var api = $(this).data('jsp');
        var throttleTimeout;
        $(window).bind('resize', function () {
            if ($.browser.msie) {
                // IE fires multiple resize events while you are dragging the browser window which
                // causes it to crash if you try to update the scrollpane on every one. So we need
                // to throttle it to fire a maximum of once every 50 milliseconds...
                if (!throttleTimeout) {
                    throttleTimeout = setTimeout(

                    function () {
                        api.reinitialise();
                        throttleTimeout = null;
                    }, 50);
                }
            } else {
                api.reinitialise();
            }
        });
    })

}); 
```

当我将 css 更改为百分比时，自定义滚动条完全失败，我得到一个默认的 chrome 滚动条，它是窗口高度的 100%。

[http://jsfiddle.net/loren_hibbard/2yEsG/](http://jsfiddle.net/loren_hibbard/2yEsG/)

非常感谢你！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-09T19:33:41.513

resize 和 jsfiddle 的 api 似乎存在一些兼容性问题。jscrollpane 仍然是一个了不起的扩展。谢谢。

# javascript - 日期格式转换javascript

> ID：11889973
> 
> 赞同：0
> 
> 时间：2012-08-09T18:45:45.053
> 
> 标签：javascript

考虑如果我们有一个格式的日期`Sat Jul 28 2012`，是否有一个通用的函数可以将它转换成任何想要的格式？

比如说`28-07-2012`，

决定分隔符，如 - 或 /

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:48:48.057

Javascript 的 Date 对象有*很多*不同的版本`toString`和不同的 getter，所以应该很容易得到你想要的输出。向下滚动浏览[此文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date#Methods)以查看您的一些选项。如果您单击它们，它们也有很好的示例。

此外，Date 构造函数非常擅长接收大多数字符串并对其进行转换。

```
var myDate = new Date("Sat Jul 28 2012");
alert(myDate.toLocaleDateString()); 
```

或者使用包装在一个函数中的不同的 getter 和字符串连接来制作你自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:51:42.057

你可以写一个函数来做，我不认为有一个 Native 方法：

```
function convert(dateObj) {
   var format = dateObj.getFullYear()+"-";
   format += dateObj.getMonth()+"-";
   format += dateObj.getDate();
   return format;
} 
```

您可以根据需要自定义它。这是[日期对象的方法列表](http://www.w3schools.com/jsref/jsref_obj_date.asp)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T18:49:05.577

Javascript 仅将其输出为您在上面提供的标准格式。您可以尝试使用`getDate()`, `getDay()`,`getMonth()`方法（以及其他方法）来提取必要的数据并将其转换为您的喜好。

请参考[W3Schools 对 JavaScript Date 对象的描述](http://www.w3schools.com/jsref/jsref_obj_date.asp)。

# c# - nhibernate - queryover - 如何对连接查询进行动态排序

> ID：11889980
> 
> 赞同：2
> 
> 时间：2012-08-09T18:45:56.423
> 
> 标签：c#, nhibernate, fluent-nhibernate, queryover

我在管理面板中有一个用户帐户表，该表包含来自不同数据库表（SQL 数据库中的表）的数据。并且用户帐户表必须支持分页和排序。当我尝试使用从 Account db 表中获取的“FirstName”对数据进行排序时，.net 会抛出异常，指出 Location db 表没有“FirstName”列。我的方法是这样的：

```
 Account acc = null; //bunu bu şekilde tanımlamadan olmuyor :S
        AccountLogin accl = null; //bunu bu şekilde tanımlamadan olmuyor :S
        Program prog = null;
        Location school = null;
        Location town = null;
        Location city = null;

        //Takip edilen bloggerın tüm blog sayfalarını çek
        var query = Session.QueryOver<Account>(() => acc)
            .Left.JoinQueryOver<AccountLogin>(x => x.Logins, () => accl)
            .Left.JoinQueryOver(x => acc.AtentedToProgram, () => prog)
            .Left.JoinQueryOver(x => acc.LiveIn, () => school)
            .Left.JoinQueryOver(x => school.Parent, () => town)
            .Left.JoinQueryOver(x => town.Parent, () => city)
            .Where(x =>                                   acc.CreateDate.IsBetween(DateTime.Now.AddMonths(-12)).And(DateTime.Now)
                   );

        if (program_id != 0)
            query.And(x => prog.program_id == program_id);

        search = search??"";

        string[] searchedTags = search.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);

        if (searchedTags != null && searchedTags.Count() > 0)
        {
            Disjunction dis = new Disjunction();

            for (int i = 0; i < searchedTags.Count(); i++)
            {
                dis.Add(Expression.Like(Projections.Property(() => accl.UserName), searchedTags[i], MatchMode.Anywhere));
                dis.Add(Expression.Like(Projections.Property(() => acc.FirstName), searchedTags[i], MatchMode.Anywhere));
                dis.Add(Expression.Like(Projections.Property(() => acc.LastName), searchedTags[i], MatchMode.Anywhere));
                dis.Add(Expression.Like(Projections.Property(() => acc.Email), searchedTags[i], MatchMode.Anywhere));
            }

            query.And(dis);
        }

        if (city_id != 0)
            query.And(x => city.LocationId == city_id);

        if (town_id != 0)
            query.And(x => town.LocationId == town_id);

        if (school_id != 0)
            query.And(x => school.LocationId == school_id);

        var countquery = query.Clone().ToRowCountQuery().FutureValue<int>();

        pager.TotalPageNumber = countquery.Value;

         //acc.GetType().GetProperty(pager.SortColumn)
        var orderred = query.OrderBy(Projections.Property(pager.SortColumn));

            return ordered.Skip(pager.Skip).Take(pager.Take).List(); 
```

> var orderred = query.OrderBy(Projections.Property(pager.SortColumn)); 线路有问题。

问题是，当我将 pager.SortColumn 参数作为字符串传递给 OrderBy 方法时，它无法知道哪个表具有该列，并尝试从最后加入的 db 表的 Location db 表中获取“Firstname”。我该如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:03:21.357

you use `JoinQueryOver` but never use the x in the lambdas afterwards. What you probably intended was `JoinAlias` to create the alias.

```
.Left.JoinAlias<AccountLogin>(x => x.Logins, () => accl)
.Left.JoinAlias(() => acc.AtentedToProgram, () => prog)
.Left.JoinAlias(() => acc.LiveIn, () => school)
.Left.JoinAlias(() => school.Parent, () => town)
.Left.JoinAlias(() => town.Parent, () => city) 
```

# dynamics-crm - 如何在后面的代码中从 CRM 元数据源获取数据项列表？

> ID：11889983
> 
> 赞同：-3
> 
> 时间：2012-08-09T18:46:04.380
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-4

如何在后面的代码中从 CRM 元数据源获取数据项列表？

我有一个 CRM 元数据源，例如

```
<crm:CrmMetadataDataSource ID="dsquestionOptionset" runat="server" EntityName="contact"
     AttributeName="securityquestion"/> 
```

在 html 中。

我想从数据源中获取代码中的数据项列表。

“securityquestion”是一个整数值，它链接到一个选项集。

我试过了

```
 var listOfItems=dsquestionOptionset.Items; 
```

但不可能

任何帮助表示赞赏

维努

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:53:07.140

您需要查询元数据。一个示例（来自此处：http: [//msdn.microsoft.com/en-us/library/gg509035.aspx](http://msdn.microsoft.com/en-us/library/gg509035.aspx)）将类似于：

```
RetrieveAttributeRequest retrieveAttributeRequest =
    new RetrieveAttributeRequest
{
    EntityLogicalName = Contact.EntityLogicalName,
    LogicalName = "new_picklist",
    RetrieveAsIfPublished = true
};

// Execute the request.
RetrieveAttributeResponse retrieveAttributeResponse =
    (RetrieveAttributeResponse)_serviceProxy.Execute(
    retrieveAttributeRequest);

// Access the retrieved attribute.
PicklistAttributeMetadata retrievedPicklistAttributeMetadata =
    (PicklistAttributeMetadata)
    retrieveAttributeResponse.AttributeMetadata;

// Get the current options list for the retrieved attribute.
OptionMetadata[] optionList =
    retrievedPicklistAttributeMetadata.OptionSet.Options.ToArray(); 
```

# java - 我可以使用 Java 的 Robot 类 (Java.awt.robot) 模拟游戏手柄按钮按下吗？

> ID：11889984
> 
> 赞同：6
> 
> 时间：2012-08-09T18:46:22.503
> 
> 标签：java, arduino, keyevent, awtrobot, rxtx

我正在使用 Arduino Uno 通过 USB 或蓝牙将（正版）SNES 控制器连接到计算机。

[Arduino 使用snespad 库](http://code.google.com/p/nespad/)捕获控制器的按钮按下和释放。它将按钮按下和释放作为字符进行通信（例如，'a' 用于按下 A，'A' 用于释放'A'）。接下来，Java 程序使用[rxtx 库](http://rxtx.qbang.org/wiki/index.php/Main_Page)监听串行输出。最后，[Java 机器人使用](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html)[keyPress](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html#keyPress%28int%29)和[keyRelease](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html#keyRelease%28int%29)模拟按键。

不幸的是，这种方法有一些缺点。主要问题是键映射。我有点武断地决定哪些按钮是哪些键盘键。

Java 似乎没有任何游戏手柄[KeyEvents](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/KeyEvent.html)。当我说“游戏手柄 KeyEvent”时，我的意思是类似于 Android SDK 的内容：http: [//developer.android.com/reference/android/view/KeyEvent.html](http://developer.android.com/reference/android/view/KeyEvent.html) (ctrl+f "game pad" or "button" .)

我的问题是，有没有办法使用 Java 的机器人类来模拟游戏板按钮按下而不是击键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:37:26.960

在 JAVA 中使用机器人类

您可以通过以下方式创建虚拟按键/释放...

```
Robot robo=new Robot();
robo.keyPress(KeyEvent.VK_A);
//don't forget to release it else you'll land up in infinite loop
robo.KeyRelease(KeyEvent.VK_A); 
```

干杯

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-28T22:12:22.193

根据我的经验，您应该能够轻松地将游戏手柄按钮映射到键盘按钮我知道的唯一映射 i,j,k,l 去环顾四周，w,a,s,d 去四处移动

# jquery - 如何使用变量检索 JSON 对象元素？

> ID：11889985
> 
> 赞同：3
> 
> 时间：2012-08-09T18:46:25.720
> 
> 标签：jquery, getjson

使用`$.getJSON`，我得到了一个非常大的结果，其中包含我们每个产品的元素。我需要使用变量访问一些属性，但无法弄清楚要这样做的 jQuery 语法。

```
$.getJSON("datasource.php",function(licensed){
    // Hardcoded works
    alert ( licensed.product5200.order_id );

    // How to use a variable instead, something like this:
    var MyVar = "product5200";
    alert ( licensed.MyVar.order_id );
}); 
```

编辑：有没有办法在我开始使用它之前确定“product5200”是否存在？
`console.info('Is It There?:' + licensed['product5200'].hasOwnProperty);`

回答：`console.info('Is It There?:' + licensed.hasOwnProperty('product5200'));`

**JSON 对象**（*为清楚起见显示为 PHP 数组*）

```
[licensed] => Array
    (
        [product5200] => Array
            (
                [product_id] => 5200
                [order_id] => 159004882
            )
        [product5204] => Array
            (
                [product_id] => 5204
                [order_id] => 159004882
            ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:48:41.223

您也可以对对象使用数组访问表示法。

```
licensed[MyVar].order_id 
```

应该管用。

顺便说一句，我建议`console.log`over `alert`，尤其是在 Chrome 中（它可以让您检查记录对象的内容）。

# file - Automator 或 Applescript，检测文件夹中的新文件

> ID：11889992
> 
> 赞同：2
> 
> 时间：2012-08-09T18:46:59.633
> 
> 标签：file, osx-lion, applescript, automator

我正在尝试编写一些可以检测某个指定目录中的新文件的东西。我最好希望这个脚本无限期地继续运行，每当我看到一个新文件时，我都可以复制它并将其移动到其他地方。我知道这必须是可能的，因为 Dropbox 做到了，但我只是不知道如何让它工作或从哪里开始。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:23:57.713

这是文件夹操作的另一个示例。您应该将脚本保存在 ~/Library/Scripts/Folder Action Scripts 中。

```
 on adding folder items to theFolder after receiving theFiles

    -- This should make the folder action wait until large files have finished copying to the folder
    set fSizes to {0}
    repeat
        tell application "System Events" to set end of fSizes to size of theFolder
        if (item -1 of fSizes) = (item -2 of fSizes) then exit repeat
        delay 1
    end repeat

    -- If you want to do something with each file ...
    repeat with aFile in theFiles
        -- your code goes here  
    end repeat

end adding folder items to 
```

请记住，如果您的脚本将任何内容保存到目标文件夹，则会再次触发文件夹操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:36:10.080

您正在寻找的内容（在将新文件添加到“热文件夹”时生成 Applescripts）称为“文件夹操作”，并且可以在网上找到许多教程，这些教程应该为您指明正确的方向。

例如，这里有一个：[“AppleScript：探索文件夹操作的力量，第一部分”](http://www.tuaw.com/2009/02/16/applescript-exploring-the-power-of-folder-actions-part-i/)

# java - 如何在 url 请求中发送数组

> ID：11889997
> 
> 赞同：72
> 
> 时间：2012-08-09T18:47:27.993
> 
> 标签：java, web-services, spring, url, spring-mvc

我的要求如下：

我想给出演员姓名、开始日期、结束日期并获取他在那段时间演过的所有电影。

因此，我的服务请求是这样的。

```
 http://localhost:8080/MovieDB/GetJson?name=Actor&startDate=20120101&endDate=20120505 
```

现在，我想改进它。我想给出一个开始日期、结束日期和多个演员的名字，并希望看到那个时期所有这些演员的电影。

我不确定我的网址应该如何支持这样的事情。

我正在使用 Spring 编写基于 Java 的 Web 服务。

下面的代码是为了支持一个演员

```
 @RequestMapping(value = "/GetJson", method = RequestMethod.GET) 
    public void getJson(@RequestParam("name") String ticker, @RequestParam("startDate") String startDate, @RequestParam("endDate") String endDate) {
   //code to get results from db for those params.
 } 
```

我正在考虑的一种解决方案是使用 % 符号来分隔演员姓名。例如：

```
 http://localhost:8080/MovieDB/GetJson?name=Actor1%Actor2%Actor3&startDate=20120101&endDate=20120505 
```

现在，在控制器中，我将使用 % 解析名称字符串并取回所有演员的姓名。

这是做到这一点的好方法还是有标准方法？

谢谢

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-08-09T18:54:17.277

用逗号分隔：

```
http://localhost:8080/MovieDB/GetJson?name=Actor1,Actor2,Actor3&startDate=20120101&endDate=20120505 
```

或者：

```
http://localhost:8080/MovieDB/GetJson?name=Actor1&name=Actor2&name=Actor3&startDate=20120101&endDate=20120505 
```

或者：

```
http://localhost:8080/MovieDB/GetJson?name[0]=Actor1&name[1]=Actor2&name[2]=Actor3&startDate=20120101&endDate=20120505 
```

无论哪种方式，您的方法签名都必须是：

```
@RequestMapping(value = "/GetJson", method = RequestMethod.GET) 
public void getJson(@RequestParam("name") String[] ticker, @RequestParam("startDate") String startDate, @RequestParam("endDate") String endDate) {
   //code to get results from db for those params.
 } 
```

# sql-server - SQL Server - 强大的客户端数据保护（多租户）

> ID：11889998
> 
> 赞同：4
> 
> 时间：2012-08-09T18:47:31.087
> 
> 标签：sql-server, sql-server-2008, database-design, multi-tenant

我们正在考虑使用单个 SQL Server 数据库来存储多个客户端的数据。我们认为将所有数据放在一个数据库中可以使事情比“每个客户端单独的数据库”设置更易于管理。

我们最大的担忧是意外访问错误的客户端。如果我们不小心将一个客户的数据显示给另一个客户，那将是非常非常糟糕的。我们执行了很多查询，并且害怕有人说“给我写一个关于这个和这个的查询，以便在 15 分钟内向客户展示会议。” 如果有人粗心并忽略了`WHERE`过滤正确客户的子句，那么我们将遇到严重的麻烦。SQL Server 是否有强大的设置或设计模式，使得不可能（或至少非常困难）意外地从单个“全局”数据库中提取错误的客户端数据？

需要明确的是，这不是客户直接或通过应用程序使用的数据库（目前）。我们正在谈论由我们的几个程序员访问的数据库，我们害怕搞砸自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:00:48.203

至少，您应该将客户端数据放在单独的模式中。在 SQL Server 中，架构是授权单位。只有为给定客户授权的人才能看到该客户的数据。除了其他保护之外，您还应该使用数据库的内置授权功能。

现在，听起来您处于这样一种情况，即一小部分人正在为每个人访问所有数据。好吧，如果你成功了，那么你将来可能需要更多的人。事实上，您可能会让一些客户直接访问数据。如果是他们的数据，他们会希望应用程序在其上运行。

如果您计划增长，我最好的建议是将每个客户的数据放在单独的数据库中。我将构建系统，以便该数据库可以位于远程服务器上。如果它需要与公共数据同步，则开发一种复制策略来移动该数据。

*您*可能认为让一个客户看到另一个客户的数据是不好的。从商业角度来看，这是致命的——就像“公司倒闭，没有工作”一样致命。您的客户可能比您更关心这种保密性。而且，确保保护的架构将使他们更加舒适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:25:26.860

多租户数据架构 [http://msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)

这就是我们所做的（不幸的是mysql）：

1.  每个表中的“租户”列
2.  表在一个模式中 [1]
3.  视图在另一个模式中（为了更容易的安全性和命名）。视图不得包含租户列。view 根据当前用户对租户执行 WHERE
4.  租户值由插入时触发器设置，基于用户

假设您所有的 DDL 都在源代码控制下的 .sql 文件中（应该是这样），那么拥有许多数据库或模式并不是那么困难。

[1] mysql 中的模式称为“数据库”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:51:30.433

您可以为每个表设置一个内联表值函数，该函数采用必需的参数`@customerID`并将该特定表过滤到该客户的数据。如果整个应用程序仅使用这些 TVP，则该应用程序在**构造上将是安全的**。

可能会有一些性能影响。确切的数字取决于架构和查询。但是，它们可以为零，因为内联 TVP 与查询的其余部分一起内联和优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-30T14:06:11.397

您只能通过带有强制性 customerid 参数的存储过程来限制对数据的访问。如果您允许您 IT 构建视图，迟早有人会忘记您所说的 where 子句。但是，每个客户的模式已经预先过滤了视图，这将启用自助服务和额外的价值，我猜。

# c++ - c ++阶乘数字中的零个数

> ID：11889999
> 
> 赞同：0
> 
> 时间：2012-08-09T18:47:31.867
> 
> 标签：c++

> **可能重复：**
> [计算因阶乘导致的数字尾随零](https://stackoverflow.com/questions/1174505/counting-trailing-zeros-of-numbers-resulted-from-factorial)

它被赋予一个整数“p”。我必须找到一个数字“n”，其中“n 阶乘”最后的“p”数字为零。这是我认为的解决方案，但我不确定它是否是解决此问题的方法。我是否必须创建一个函数来计算阶乘和另一个函数来获得零？

```
int p;
int count5=0;
int i;
int copy_i;

printf("Enter p: ");
scanf("%d",&p);

for(i=1; ;i++)
{
    copy_i=i;

    while(copy_i/5)
    {
        if(copy_i%5==0)
        {
            count5++;
            copy_i=copy_i/5;
        }
        else
        {
            break;
        }
    }

    if(count5==p)
    {
        printf("The minimum number n is: %d.",i);
        break;
    }
    else if(count5>p) 
    {
        printf("No match for n! with %d zero.",p);
        break;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:52:14.270

这听起来像是一个 Project Euler 问题，所以我不会给出明确的解决方案。不过这里有两个提示：

*   您不必实际计算阶乘来找出它最后有多少个零。
*   如果一个数可以被 2^N 和 5^N 整除，则该数的末尾至少有 N 个零。