# StackOverflow 问答 11174000-11174999

# sql-server - 如何运行 SQL Server 2012 服务

> ID：11174004
> 
> 赞同：1
> 
> 时间：2012-06-24T00:07:06.590
> 
> 标签：sql-server, visual-studio-2012, sql-server-2012

我已经安装了 Microsoft Visual Studio 2012 (Ultimate) ，它安装了所有的 SQL 文件，但是我在开始菜单中找不到 SQL Server 管理器，就像旧版本一样，所以我无法启动服务，或还有其他方式来运行服务，所以我可以连接到 SQL Server？

![这里是安装图](../Images/c850b4d291dfc9375480a9a6a5c9ef73.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-26T09:38:57.080

在运行窗口中，键入`"C:\Windows\SysWOW64\mmc.exe" /32 C:\windows\SysWOW64\SQLServerManager12.msc`。我之前确实遇到过同样的问题（Sql Server 配置管理器不在开始菜单中），我不得不将它固定到任务栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T03:19:32.567

使用“sqlserver.exe”从命令行启动 SQL Server - MSDN 参考[此处](http://msdn.microsoft.com/en-us/library/ms162819)。[或者，您可以从该链接](http://www.microsoft.com/en-us/download/details.aspx?id=29062)下载 SQL Server Management Studio，如下所示。

![在此处输入图像描述](../Images/5dc272c0985aca6b052f5e8501775fcc.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T00:17:04.403

SQL Sever 2012 服务是通过[Microsoft® SQL Server® 2012 Express](http://www.microsoft.com/en-us/download/details.aspx?id=29062)安装的，因为除非您使用自定义安装程序，否则 VS 2012 不会安装它。

在计算机中安装 Microsoft® SQL Server® 2012 Express 后，您可以使用 SSMS 和其他工具来管理计算机上的 SQL 服务。

# php - php - PayPal IPN 不工作（在沙盒上）

> ID：11174009
> 
> 赞同：0
> 
> 时间：2012-06-24T00:08:22.953
> 
> 标签：php, mysql, paypal, sandbox, paypal-ipn

**更新：我什至尝试过让整个 PHP 脚本成为一行，在查看脚本时向我发送电子邮件，但它仍然不会向我发送电子邮件。**

我已经尝试了一切，或者我觉得。我已经设置了脚本（非常基本，所以我可以学习如何使用它）以根据 IPN 响应（已完成、无效等）插入一行

但是，它似乎没有做任何事情。

我试过使用沙盒内置的 IPN 测试器，但它什么也没做。我尝试使用基于沙盒的捐赠者按钮，并将“notify_url”作为隐藏输入类型，但它没有做任何事情。

唯一一次实际插入一行是当我直接通过浏览器访问文件时（当然是 IPN 文件）。在这种情况下，它会插入一行说明这是无效付款。

我到底做错了什么，还是 PayPal 的沙箱暂时搞砸了？

```
<?php
require("../functions.php");
sql();

// read the post from PayPal system and add 'cmd'
$req = 'cmd=' . urlencode('_notify-validate');

foreach ($_POST as $key => $value) {
    $value = urlencode(stripslashes($value));
    $req .= "&$key=$value";
}

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://www.sandbox.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: www.paypal.com'));
$res = curl_exec($ch);
curl_close($ch);

// assign posted variables to local variables
$item_name = $_POST['item_name'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$payer_email = $_POST['payer_email'];

if (strcmp ($res, "VERIFIED") == 0) {
    // check the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment
    if($payment_status == "Completed") {
        mysql_query("INSERT INTO donators (username)
VALUES ('completed')");
    } else {
        mysql_query("INSERT INTO donators (username)
        VALUES ('wrong payment status')");
    }

}
else if (strcmp ($res, "INVALID") == 0) {
    mysql_query("INSERT INTO donators (username)
    VALUES ('invalid')");
}
?> 
```

捐赠人表格：

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="QJUZ2AGANUWYS">
<input name="notify_url" value="http://mysite.com/libs/paypal/ipn.php" type="hidden">
<input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:28:49.997

> 如本页所述： [https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_GetExpressCheckoutDetails](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_GetExpressCheckoutDetails)
> 
> “NOTIFYURL 自 63.0 版起已弃用。请改用 PAYMENTREQUEST_0_NOTIFYURL。”

[链接在这里发帖](https://stackoverflow.com/a/8146303/563460)

此外，作为代码注入点，请勿**将**您的 IPN 地址放入您的 HTML 代码中。任何人都可以查看它，因此知道文件的位置。为了安全起见，把它放在你的后台 PHP 脚本中，在你的`Paypal functions`文件中，在函数调用`ConfirmPayment`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:16:14.623

无效付款可能来自您使用信用卡或沙盒帐户的信用卡模拟。扔掉条件`if (strcmp ($res, "VERIFIED") == 0) {`，你会没事的。

我不知道沙盒内置的 IPN 测试器，抱歉，可能有人会在这方面为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T22:03:32.830

你试过修剪 $res 吗？

```
strcmp(trim($res), "VERIFIED") 
```

代替

```
strcmp($res, "VERIFIED") 
```

这就是最终让它为我工作的原因......

# facebook - 在 Facebook 上获取用户喜欢的帖子？

> ID：11174011
> 
> 赞同：5
> 
> 时间：2012-06-24T00:09:22.783
> 
> 标签：facebook, facebook-graph-api, facebook-like

给定一个经过身份验证的用户，我可以在 Facebook 上找到该用户喜欢的帖子吗？

我读过“故事”和“最近的活动”，但我似乎无法找到如何为特定用户获取这些数据。任何帮助表示赞赏！

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-09T04:34:04.197

我希望它会有所帮助。在带有 Graph Api v2.1 的官方 FB SDK 中，只有一种方法（因为 fql 在 2.1 中不再可用） - 对于每个帖子，您应该将请求发送到`https://graph.facebook.com/v2.1/{post-id}/likes`. 您也可以使用`.../{post-id}/likes?limit=XXX`. 作为回应，您将获得一系列喜欢的内容，如下所示：

```
data": [
    {
      "id": "xxxxxxxx", 
      "name": "yyyyyy"
    }, 
    ....
] 
```

接下来，您应该尝试在那里找到您的用户 ID。如果它在这里 - 用户喜欢这篇文章。如果不是 - 用户不喜欢这篇文章。该数组还可以包含带有链接到下一页的分页数据。

但这里有一个小问题——如果帖子包含数千个赞，时间就会太长。我们最近向 Facebook 询问了这个问题，现在我们正在等待答案。它适用于少于几千个赞的帖子。

# php - 将字符串拆分为多个数组？

> ID：11174021
> 
> 赞同：0
> 
> 时间：2012-06-24T00:11:37.763
> 
> 标签：php

我有一个像这样的字符串

```
$sitesinfo = 'site 1 titles-example1.com/
site 2 titles-example2.com/
site 3 titles-example3.com/
site 4 titles-example4.com/
site 5 titles-example5.com/'; 
```

我曾经像这样将行分成1个数组

```
$lines = explode("/",$sitesinfo); 
```

然后当我循环时，我将每一行放入一个数组对象中没有问题我需要做什么将每行分成两部分并将每一部分添加到一个数组中，所以结果是这样的

```
$titles = array("site 1 titles","site 2 titles","site 3 titles","site 4 titles","site 5 titles");
$domains = array("example1.com","example2.com","example3.com","example4.com","example5.com"); 
```

所以我可以在脚本中使用它们

我做了很多尝试但失败了:(

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:13:49.413

这个怎么样：

```
foreach ($lines as $line) {
  $t = explode('-', trim($line), 2);
  if (count($t) < 2) {
    echo "Failed to parse the line $line";
    continue;
  }
  $titles[] = $t[0];
  $domains[] = $t[1];
} 
```

说明：每一行都被“-”符号分成两部分（如果更少，那是一个错误 - 该行不包含“-”，因此根本不应该处理）。第一部分被推入`$titles`数组，第二部分被推入`$domains`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T00:21:32.580

首先将字符串拆分为每一行（按行尾字符）。

然后在第一部分将每行分成两部分`-`并将这些部分添加到结果中。您可以稍后为每个部分自己命名：

示例/[演示](http://codepad.org/bTvUGYJ3)：

```
$lines = explode("\r\n", $sitesinfo);
$r = array(null, null);
foreach($lines as $line) {
    list($r[0][], $r[1][]) = explode("-", $line, 2) + array(1 => NULL);
}
list($titles, $domains) = $r;
unset($r); 
```

或正则表达式变体（[Demo](http://codepad.viper-7.com/jMsuuP)）：

```
preg_match_all('~([^-]+)-(.*)~', $sitesinfo, $matches);
list(, $titles, $domains) = $matches;
unset($matches); 
```

结果：

```
array(5) {
  [0]=>
  string(13) "site 1 titles"
  [1]=>
  string(13) "site 2 titles"
  [2]=>
  string(13) "site 3 titles"
  [3]=>
  string(13) "site 4 titles"
  [4]=>
  string(13) "site 5 titles"
}
array(5) {
  [0]=>
  string(13) "example1.com/"
  [1]=>
  string(13) "example2.com/"
  [2]=>
  string(13) "example3.com/"
  [3]=>
  string(13) "example4.com/"
  [4]=>
  string(13) "example5.com/"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T00:25:41.360

正则表达式替代：

```
$sitesinfo = 'site 1 titles-example1.com/
site 2 titles-example2.com/
site 3 titles-example3.com/
site 4 titles-example4.com/
site 5 titles-example5.com/';

preg_match_all('~([^-]+)-(.*)~',$sitesinfo,$matches);
$titles = array_map('trim',$matches[1]);
$domains = array_map('trim',$matches[2]); 
```

# objective-c - 目标 C 中的百分比登录

> ID：11174023
> 
> 赞同：1
> 
> 时间：2012-06-24T00:12:11.627
> 
> 标签：objective-c

谁能告诉我如何在目标C（NSString）中做百分号？我的意思是，格式说明符是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T00:13:54.237

尝试 ％％。您必须对其进行转义，因为它是格式说明符符号。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-24T00:15:29.833

%% 就像在正常的 c 中一样。事实上，所有格式说明符都与 sprintf 中的相同。

# python - AttributeError("'str' 对象没有属性 'read'")

> ID：11174024
> 
> 赞同：184
> 
> 时间：2012-06-24T00:12:14.270
> 
> 标签：python, python-2.7, urllib2, attributeerror

在 Python 中，我收到一个错误：

```
Exception:  (<type 'exceptions.AttributeError'>,
AttributeError("'str' object has no attribute 'read'",), <traceback object at 0x1543ab8>) 
```

给定python代码：

```
def getEntries (self, sub):
    url = 'http://www.reddit.com/'
    if (sub != ''):
        url += 'r/' + sub

    request = urllib2.Request (url + 
        '.json', None, {'User-Agent' : 'Reddit desktop client by /user/RobinJ1995/'})
    response = urllib2.urlopen (request)
    jsonStr = response.read()

    return json.load(jsonStr)['data']['children'] 
```

这个错误是什么意思，我做了什么导致它？

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2012-06-24T00:33:50.790

问题是`json.load`你应该传递一个像对象一样`read`定义函数的文件。所以要么你使用[`json.load(response)`](http://docs.python.org/library/json.html#json.load)要么[`json.loads(response.read())`](http://docs.python.org/library/json.html#json.loads)。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2019-12-20T09:28:12.953

好的，这是一个旧线程但是。我有同样的问题，我的问题是我使用`json.load`而不是`json.loads`

这样，json 加载任何类型的字典都没有问题。

[官方文档](https://docs.python.org/3/library/json.html)

> json.load - 使用此转换表将 fp（支持 .read() 的文本文件或包含 JSON 文档的二进制文件）反序列化为 Python 对象。
> 
> json.loads - 使用此转换表将 s（包含 JSON 文档的 str、bytes 或 bytearray 实例）反序列化为 Python 对象。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-10-29T19:51:44.813

**如果您收到这样的 python 错误：**

```
AttributeError: 'str' object has no attribute 'some_method' 
```

您可能通过用字符串覆盖您的对象而意外毒害了您的对象。

**如何用几行代码在python中重现这个错误：**

```
#!/usr/bin/env python
import json
def foobar(json):
    msg = json.loads(json)

foobar('{"batman": "yes"}') 
```

**运行它，它会打印：**

```
AttributeError: 'str' object has no attribute 'loads' 
```

**但是更改变量名的名称，它工作正常：**

```
#!/usr/bin/env python
import json
def foobar(jsonstring):
    msg = json.loads(jsonstring)

foobar('{"batman": "yes"}') 
```

当您尝试在字符串中运行方法时会导致此错误。String 有一些方法，但不是您要调用的方法。因此，停止尝试调用 String 未定义的方法，并开始寻找您毒害对象的位置。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2020-03-02T16:31:51.153

您需要先打开文件。这不起作用：

```
json_file = json.load('test.json') 
```

但这有效：

```
f = open('test.json')
json_file = json.load(f) 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-06-24T02:19:32.810

```
AttributeError("'str' object has no attribute 'read'",) 
```

这正是它所说的：某物试图`.read`在你给它的对象上找到一个属性，你给它一个类型的对象`str`（即，你给它一个字符串）。

错误发生在这里：

```
json.load (jsonofabitch)['data']['children'] 
```

好吧，您不是在寻找`read`任何地方，因此它必须发生在`json.load`您调用的函数中（如完整回溯所示）。那是因为`json.load`正在尝试`.read`你给它的东西，但是你给了它`jsonofabitch`，它当前命名一个字符串（你通过调用创建`.read`）`response`。

解决方法：不要给`.read`自己打电话；该函数将执行此操作，并希望您直接给它，`response`以便它可以这样做。

您也可以通过阅读函数的内置 Python 文档（try`help(json.load)`或整个模块 (try `help(json)`) 或通过查看[http://docs.python.org](http://docs.python.org)上的这些函数的文档来了解这一点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-07-30T23:12:55.550

代替 json.load() 使用 json.loads() 它会起作用：例如：

```
import json
from json import dumps

strinjJson = '{"event_type": "affected_element_added"}'
data = json.loads(strinjJson)
print(data) 
```

# python - 用于插入数据的模态窗口关闭后如何在表单中重新加载选择元素？

> ID：11174026
> 
> 赞同：0
> 
> 时间：2012-06-24T00:12:51.033
> 
> 标签：python, google-app-engine, jquery

我正在 App Engine Python 上开发一个网络应用程序。

我有一个带有选择元素的表单，它将列出系统上的所有注册用户。

如果选择了第一个选项“加载用户...”，则应显示用于注册用户的模式窗口，并且在窗口关闭后，应更新组合框以显示更新后的列表，默认选择最新用户. 我只想更新组合框而不是整个页面，因为表单上可能已经有许多“非空”字段。

我怎么能在 jQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:40:46.057

据我了解，模式窗口是作为当前 DOM 的一部分生成的。显示注册用户列表的模式窗口将可以访问调用页面的 DOM。当单击关闭按钮或链接时，您可以让模态窗口的代码对调用页面上的选择元素进行更新。

在您的模态窗口代码中，我假设您在提交按钮上附加了一个单击事件，您可以在该函数的末尾执行表单 ajax 提交，以将表单返回到您的服务器进行处理。

例如：

```
$('#submit').click(function(){
 //some activity
 $("#callingPageForm").ajaxSubmit({url: 'server.php', type: 'post'})
 //close window
}); 
```

有关在 ajax 请求中提交表单的更多信息，请[点击此处](https://stackoverflow.com/questions/1960240/jquery-ajax-submit-form)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T00:45:59.517

```
<select id="users">
    <option value="blah">Select a user</option>
    <option value="load">Load Users...</option>
</select> 
```

Jquery（未测试）：

```
$('select#users').on('change',function(){
    if($(this).val() == 'load'){
        //show add user dialog
    }
    }); 
```

添加用户请求成功后：

```
$('#add-new-user-form').submit(function(){
    //get data from form and make a dataString to post to server
    var username = $('input[name="username"]').val();
    //similar for other fields
    var dataString = 'username='+ username + '&email=' + email + '&pass=' + pass;
    $.ajax({  
        type: "POST",  
        url: "url/to/your/backend/code",  
        data: dataString,  
        success: function(responseData) { 
            //check how to return JSON or any other data using your backend
            var newUser = responseData;
            var newSelect = $('<select id="users"/>');
            newSelect.append('<option value="' + newUser.value + '" >' + newUser.name + '</option>');
            $('#users').replaceWith(newSelect);
            $("#users option[value='" + newUser.value + "']").attr('selected', 'selected');
            }  
    });  
    return false;//prevent default form submission
    } 
```

# python - 如何判断 Pyramid/python 是否正在加载正确的 .egg？

> ID：11174028
> 
> 赞同：3
> 
> 时间：2012-06-24T00:13:15.297
> 
> 标签：python, pyramid, easy-install, kotti

这是一个奇怪的问题，但在过去的 3 个小时里一直让我发疯。我想玩一个基于金字塔的 cms [Kotti](https://github.com/Pylons/Kotti/)，但我使用 easy_install first( `sudo easy_install kotti`) 安装它时犯了一个错误。我的行为很奇怪，我不确定它是程序本身的方式还是我安装它的方式。

我想更改代码的某些部分并查看它是如何工作的，但我的更改没有生效。通过easy_install安装它后，我做了：

```
virtualenv mysite --no-site-packages
bin/easy_install pyramid
git clone https://github.com/Pylons/Kotti.git
cd Kotti
sudo ../bin/python setup.py develop
../bin/pserve app.ini --reload 
```

我去了 127.0.0.0:5000 并看到它正在工作。第一页的文字是“恭喜！您已成功安装 Kotti”。所以我进入了 kotti 目录并做了 a `grep "Congratulations" *.*`，发现它来自[populate.py](https://github.com/Pylons/Kotti/blob/master/kotti/populate.py)。所以我打开文件并将该行更改为另一段文本并保存。因为我在 pserve 上有 --reload 标志，所以我注意到它在终端上重新加载了我的代码，当我回到站点时，数据没有改变。

我很困惑，因为当我更改 python 代码时服务器会重新加载，所以它会看到更改但它没有反映在浏览器中（只是为了测试它是否是浏览器缓存，我尝试使用不同的浏览器并清除缓存）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T01:45:28.667

当您第一次运行 Kotti Web 应用程序时，与大多数 CMS 系统一样，它会运行一组数据填充方法（包括您提到的 populate.py 代码）来设置数据库并插入您看到的所有内容。--reload 只是告诉部署服务器在您处理文件系统时监视文件更改。

如果要重新运行安装/填充代码，则需要删除创建的数据库。如果您没有对他们的示例 app.ini 文件进行任何更改，它可能是 Kotti.db。

或者，按照 CMS 系统的预期，使用 CMS 进行更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T00:17:07.227

运行`python -v`将显示所有导入

# php - php 安全地检索会话数据

> ID：11174033
> 
> 赞同：3
> 
> 时间：2012-06-24T00:14:09.723
> 
> 标签：php, session, security

我正在对密码进行哈希处理，在读取会话数据时匹配用户代理，以及安全登录用户所需的一切。我对安全检索/读取会话数据的方法感兴趣。例如，我正在使用一个从会话数据数组中获取用户 ID 的函数......

在数据库表中：

```
a:6:{s:9:"user_data";s:0:"";s:7:"user_id";s:1:"3";s:9:"firstname";s:4:"Tina";s:8:"lastname";s:3:"Fey";s:8:"username";s:8:"lizlemon";s:6:"status";s:1:"1";} 
```

功能（Codeigniter）：

```
 function get_user_id()
    {
        if (is_numeric($this->ci->session->userdata('user_id'))) 
        {
            return $this->ci->session->userdata('user_id');
        }
        else
        {
            exit();
        }
    } 
```

我只检查 id 是否为数字。即使会话数据已安全添加到数据库，我们是否应该担心检索会话数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T03:17:49.527

您**永远不**应该编写自己的会话处理程序。使用`sesion_start()`和`$_SESSION[]`超级全局。这也为使用[PHP 安全会话功能](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-secure)打开了大门，例如 cooke_secure、http_only cookies 和 use_only_cookies。

session_start() 生成一个非常安全的会话 id，它是一个加密随机数。您可以配置 PHP 以从中提取这个值，`/dev/urandom`这是一个非常安全的熵池，并且可能是生成会话 id 的最佳方式。

# linux - 并行任务在 VM Workstation 中的 Ubuntu 12.04 上不起作用

> ID：11174044
> 
> 赞同：1
> 
> 时间：2012-06-24T00:15:42.767
> 
> 标签：linux, bash, ubuntu, parallel-processing, ubuntu-12.04

在我运行 Ubuntu 12.04 的虚拟机中发生了一些奇怪的事情。以下脚本，我之前成功用于在 7 个内核上一起运行 7 个任务，现在不能正常工作了！

```
Prog out file1.bin fids 72000 > logs/fitlog1.log &
Prog out file2.bin fids 72000 > logs/fitlog2.log &
Prog out file3.bin fids 72000 > logs/fitlog3.log &
Prog out file4.bin fids 72000 > logs/fitlog4.log &
Prog out file5.bin fids 72000 > logs/fitlog5.log &
Prog out file6.bin fids 72000 > logs/fitlog6.log &
Prog out file7.bin fids 72000 > logs/fitlog7.log & 
```

Prog 是可执行文件的名称。

以前（2 天前），当我运行这个脚本时，每个应用程序都在一个内核上执行并且日志记录是可以的。现在，这些应用程序不再同时启动。2 或 3 个内核启动然后停止，只有 1 个继续运行。

谁能解释一下这种行为？

系统是 Windows 7 上 VM 工作站上的 Ubuntu 12.04。日志文件中根本没有显示任何错误。

感谢您的任何努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T20:02:07.157

顺便说一句，描述太模糊了。奇怪的行为应该有很多可能性，但一般来说，当你想将 Linux 上的进程绑定到特定的 CPU 内核时，从以下开始：

```
man cpuset 
```

否则内核会尝试循环分配负载，并且进程将在其运行期间在内核之间“移动”。

# javascript - 使用 Jasmine 检查 Backbone/requireJs 项目

> ID：11174053
> 
> 赞同：2
> 
> 时间：2012-06-24T00:17:56.167
> 
> 标签：javascript, unit-testing, backbone.js, requirejs, jasmine

我有一个使用 RequireJS 加载的项目，我想测试模型。

我有以下测试：

```
require(['../../js/models/lead_sharing'], function(Lead_sharing_Model) {
    describe('when instantiated', function () {
        it('should exhibit attributes', function() {
            var test = new Lead_sharing_Model({
                attribute : 3
            });
            expect(test.get('attribute')).toEqual(3);
        });
    });
}); 
```

但我有一个错误“失败并出现错误：SyntaxError: Unexpected token”...

实际上，我不知道是否可以使用 Jasmine 测试主干/requireJs 项目。确实，我如何在不需要配置的情况下包含我的视图/模型...（例如路径的定义...）

谢谢

Ps：只是一个小的编辑来指定我想用aa js cmd进行测试。在浏览器中没有。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T04:32:20.297

当然可以用 jasmine 测试一个骨干网/requirejs 项目。将应用程序使用的相同需求配置拉入驱动单元测试的 html 页面。例如：

```
<!doctype html>
<html lang="en">
<head>
  <link rel="stylesheet" href="vendor/jasmine.css">
</head>

<body>
  <script src="vendor/jasmine.js"></script>
  <script src="vendor/jasmine-html.js"></script>
  <script src="../assets/js/libs/jquery.js"></script>
  <script src="../assets/js/libs/underscore.js"></script>
  <script src="../assets/js/libs/backbone.js"></script>

  <!-- This points to the require config that is also used by the main app. -->
  <script data-main="../app/config" src="../assets/js/libs/require.js"></script>

  <script>
    require({ paths: { spec: "../test/spec" } }, [
      // Pull in all your modules containing unit tests here.
      "spec/lead-sharing-specs"
    ], function() {
      jasmine.getEnv().addReporter(new jasmine.TrivialReporter());
      jasmine.getEnv().execute();
    });
  </script>
</body>
</html> 
```

由于您想在浏览器之外运行它，请查看[PhantomJS](http://phantomjs.org/)、[grunt](https://github.com/cowboy/grunt)和[grunt-jasmine-task](https://github.com/creynders/grunt-jasmine-task)。

# java - 在java中打开windows资源管理器

> ID：11174055
> 
> 赞同：6
> 
> 时间：2012-06-24T00:18:28.440
> 
> 标签：java, path, directory, explorer

我一直在 Stack Overflow 上寻找这个问题的答案，但我找不到适合我的答案。

使用 Java，如何创建一个按钮，将资源管理器窗口启动到指定目录？如果这是可能的，我如何使它适用于 OSX 和 Linux？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T00:28:37.063

我不确定它在其他操作系统中是如何工作的，但在 Windows 中你可以使用类似这样的东西

```
Desktop.getDesktop().open(new File("c:\\")); 
```

## 编辑

找到[了另一种方式](https://stackoverflow.com/a/10967320/1393766)（从该答案中检查指向 FileExplorer 类的链接）。您也可以`System.getProperty("os.name")`用来确定操作系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T00:38:43.933

```
javax.swing.JButton myButton = new javax.swing.JButton("BUTTON TEXT");
myButton.addActionListener(new java.awt.event.ActionListener() {

  @Override
  public void actionPerformed(ActionEvent e) {
    java.awt.Desktop.getDesktop().open(new java.io.File("MY PATH NAME HERE"));
  }
}); 
```

# asp.net - SQL Server 2012 连接字符串：找不到服务器？

> ID：11174057
> 
> 赞同：3
> 
> 时间：2012-06-24T00:18:59.003
> 
> 标签：asp.net, sql-server, visual-studio

我刚刚安装了 VS2012 pro RC 和 SQL server Express 2012。我去运行我的应用程序，我得到了这个错误：

> 连接字符串中的数据源值指定了一个未安装的 SQL Server 实例。要解决此问题，您可以选择安装匹配的 SQL Server 实例或修改连接字符串中的数据源值。

我使用 VS2012 Developer preview 很长时间了，它曾经工作得很好。这是 web.config 文件中的连接字符串：

```
<add name="MySiteDBConnectionString"
     connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\MySiteDB.mdf;Integrated Security=True;User Instance=True"
     providerName="System.Data.SqlClient"/> 
```

当我转到 Management Studio 时，我收到以下错误消息。当我去浏览服务器时，列表是空的。

![在此处输入图像描述](../Images/ab0ed3d9f352b7bc26431ce3804921ce.png)

问题出在哪里，我该如何解决？

谢谢。 ![在此处输入图像描述](../Images/482ff9cca2558099639354df6010ff3a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T00:59:18.893

您需要确保 SQL Server 服务正在运行。`web.config`当您使用那个愚蠢`AttachDbFileName`的功能建立连接时，Visual Studio 可能会为您启动它。检查您的服务控制面板小程序并确保它`SQL Server (SQLEXPRESS)`正在运行。如果它没有运行，请启动它。

当您在那里时，确保`SQL Browser`服务正在运行不会有什么坏处。

使用合适的外壳也无妨。如果实例被调用`SQLEXPRESS`，那么不要调用它`SqlExpress`或`SQLExpress`. 我从未听说过这种破坏性的连接，但要保持一致。您也可以尝试其他变体以防万一：

`(local)\SQLEXPRESS`
`localhost\SQLEXPRESS`
`127.0.0.1\SQLEXPRESS`
`Your_Computer_Name\SQLEXPRESS`

您还应该验证为此实例启用了哪些连接协议。转到开始 > 程序 > SQL Server > 配置工具 > 配置管理器，展开 SQL Server 网络配置，然后突出显示`Protocols for SQLEXPRESS`- 在右侧，您应该会看到共享内存、命名管道、TCP/IP。其中哪些已启用？

**编辑**

您应该[从这里下载 SQL Server 2012 Express](http://msdn.microsoft.com/en-us/evalcenter/hh230763.aspx)。安装它。然后创建一个数据库。将 Visual Studio 指向该数据库。停止，我的意思是***STOP***，使用`User Instance`和`AttachDbFileName`功能。这些东西本应使开发更容易，但归根结底，它们几乎无所作为，反而使开发成为后方的皇家痛苦。

另一种选择是使用[SqlLocalDb](http://msdn.microsoft.com/en-us/library/hh212961.aspx)进行本地开发。上个月，我写了一篇[详尽的“入门”教程](http://www.mssqltips.com/sqlservertip/2694/getting-started-with-sql-server-2012-express-localdb/?utm_source=AaronBertrand)，可能会有所帮助。

# objective-c - MKMapView 的暗淡部分

> ID：11174058
> 
> 赞同：1
> 
> 时间：2012-06-24T00:19:13.310
> 
> 标签：objective-c, ios, xcode, mkmapview, uilabel

我有一个覆盖在`MKMapView`. 唯一的问题是，在某些地方它不是完全可读的，因为地图是卫星图像。此外，我的地图视图放大了整个过程，它专注于一家**商店**。

我查看了 Apple 的新地图应用程序，发现它们在标签所在的地图区域上变暗（放置了一个略带黑色的阴影）。因此，标签将更加明显和突出。

这是苹果所做的图片，看看标签，在它周围你可以看到地图稍微变暗/变暗：

![在此处输入图像描述](../Images/d4444fdd72a03cce0eca9e1cd7abe552.png)

您对如何添加阴影/使地图视图变暗有任何想法吗？另外，一些示例代码不会有什么坏处，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T00:31:50.400

您可以使用带有透明度的渐变叠加并将其添加`UILabel`到渐变叠加`UIView`中。

有用的入门链接：http: [//mrohs.com/2011/overlay-with-gradient-and-transparency](http://mrohs.com/2011/overlay-with-gradient-and-transparency)

# asp.net - 用户控制不起作用

> ID：11174059
> 
> 赞同：0
> 
> 时间：2012-06-24T00:19:19.283
> 
> 标签：asp.net, user-controls

[http://binaryjack.com/userControl.aspx](http://binaryjack.com/userControl.aspx)

每条记录都使用用户控件显示。我在用户控件中嵌入了删除按钮。

重新创建问题：点击第一个DELETE按钮，最后一行被删除；在此之后，我必须单击删除按钮（其中任何一个）两次才能使其工作。

1.  使用用户控件（与占位符结合）显示一堆记录是不好的做法吗？我查询以获取所有记录，然后使用 Foreach 循环填充每个用户控件并将每个 UC 插入占位符。

2.  为什么删除按钮没有正确响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:27:42.343

没有看到你的代码很难说。但是，这似乎是一个刷新问题。如果你点击删除然后点击刷新，记录就消失了。检查您如何刷新数据，您会发现问题。

# android - 从服务调用活动

> ID：11174061
> 
> 赞同：0
> 
> 时间：2012-06-24T00:20:00.097
> 
> 标签：android, service, android-intent

我有一个包含服务方法的警报服务的服务类。这些方法在警报服务被激活时被调用。我想要做的是在服务类中调用的这些方法之一中调用另一个类的意图（当警报响起时）。它所做的只是在调用意图时标记错误。这只发生在激活警报服务时调用的方法中（服务类中的方法）。这是因为类`extends Service`而不是`extends Activity`？我不确定，有什么想法吗？

`onStart`（下面是我的服务类，当在应用程序强制关闭的方法中调用另一个活动的意图时。）

```
public class MyAlarmService extends Service {
    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        Toast.makeText(this, "MyAlarmService.onCreate()", Toast.LENGTH_LONG).show();
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "MyAlarmService.onBind()", Toast.LENGTH_LONG).show();
        return null;
    }

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);

        Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG).show();

        //////////////////////////////////////////////////////////////////////////////////

        Intent i = new Intent("com.exercise.AndroidAlarmService.HELLO"); 
        startActivity(i); 

        The intent that is send to open another class, an activity.
        **

        /////////////////////////////////////////////////////////////////////////////////
    }

    @Override
    public boolean onUnbind(Intent intent) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "MyAlarmService.onUnbind()", Toast.LENGTH_LONG).show();
        return super.onUnbind(intent);
    }
} 
```

LogCat 上的这些错误之一是：

> 06-24 01:11:36.857: E/AndroidRuntime(10805): java.lang.RuntimeException: 无法使用 Intent { flg=0x4 cmp=com.exercise.AndroidAlarmService/ 启动服务 com.exercise.AndroidAlarmService.MyAlarmService@412f23f8。 MyAlarmService（有附加功能）}：android.util.AndroidRuntimeException：从 Activity 上下文外部调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是你想要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:36:06.367

您是否尝试过错误日志的建议？

```
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:24:56.817

您可以使用您的服务调用活动`onStart()`......

```
@Override 
public void onStart(Intent intent, int startId)  { 
    ...
    Log.i("Service", "onStart() is called"); 
    Intent callIntent = new Intent(Intent.ACTION_CALL); 
    callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
    callIntent.setClass(<Set your package name and class name here>);
    startActivity(callIntent);
    ...

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T05:32:05.690

您可以通过启用其他人建议的标志来做到这一点。默认情况下阻止它的原因是因为服务很容易在后台被系统自动重启。如果您在服务的 onStart 期间启动活动，则无论用户可能在做什么，此活动都会启动。这将是糟糕的用户体验。请牢记这一警告，并针对这种情况进行解决。

# android - 在 HDPI/MDPI 分辨率的小屏幕上字体尺寸过大

> ID：11174063
> 
> 赞同：2
> 
> 时间：2012-06-24T00:20:45.340
> 
> 标签：android, screen, font-size, screen-resolution

我正在尝试支持各种屏幕分辨率。当我有小屏幕但 HDPI 分辨率时，按钮/字体会变形。因为，HDPI 屏幕的字体更大，而 LDPI 屏幕的字体更小。但是，当小屏幕具有 HDPI 分辨率时，android 从 hdpi 文件夹中选择字体大小并弄乱字体大小。它变得很大并且超出了屏幕的宽度/高度。

这种情况的最佳解决方案是什么？是否有任何选项可以创建诸如 values-small-ldpi、values-small-hdpi 之类的文件夹（基本上同时指定屏幕尺寸和分辨率）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:37:55.250

我相信答案是肯定的（也就是说，您应该能够创建`values-small-hdpi`等文件夹）。[这个答案](https://stackoverflow.com/a/4562292/321697)似乎也支持这一点。

以下是限定符的完整列表：[资源目录限定符](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

# c# - 需要帮助在 Windows Phone 中解析 XML 提要

> ID：11174068
> 
> 赞同：0
> 
> 时间：2012-06-24T00:23:23.547
> 
> 标签：c#, xml, linq, windows-phone-7, httpwebrequest

我有一个通过 httpwebrequest 检索到的 XML 提要，我在解析提要时遇到问题，因为它与我过去尝试过的时间不同。到目前为止，我有网址 [http://webservices.nextbus.com/service/publicXMLFeed?command=routeConfig&a=sf-muni&r=N](http://webservices.nextbus.com/service/publicXMLFeed?command=routeConfig&a=sf-muni&r=N)

我存储在其中

```
 XDocument doc = XDocument.Parse(feedString); 
```

而且我知道，当我出于调试目的将所有内容都转储到列表框中时，我得到了所有内容，我只是在解析提要时遇到问题：

```
<body copyright="All data copyright San Francisco Muni 2012.">
<route tag="N" title="N-Judah" color="003399" oppositeColor="ffffff" latMin="37.7601699" latMax="37.7932299" lonMin="-122.5092" lonMax="-122.38798">
<stop tag="5240" title="King St & 4th St" lat="37.7760599" lon="-122.39436"   stopId="15240"/>
<stop tag="5237" title="King St & 2nd St" lat="37.7796199" lon="-122.38982" stopId="15237"/>
<stop tag="7145" title="The Embarcadero & Brannan St" lat="37.7846299" lon="-122.38798" stopId="17145"/>
<stop tag="4510" title="Embarcadero Folsom St" lat="37.7907499" lon="-122.3898399" stopId="14510"/>
<stop tag="5629" title="Tunnel Entry Point Inbound Nea" lat="37.79279" lon="-122.39126" stopId="15629"/> 
```

等等等等

我想将每个停止标记中的每个属性存储到一个数组中，但我完全不知道如何开始。

谢谢

更新：我想我让它在第一个 msdn 链接上工作，但这只会得到第一行：

```
 using (XmlReader reader = XmlReader.Create(new StringReader(feed)))
        {
            reader.ReadToFollowing("stop");
            reader.MoveToFirstAttribute();
            string tag = reader.Value;

            reader.MoveToNextAttribute();
            string title = reader.Value;

            reader.MoveToNextAttribute();
            string lat = reader.Value;

            reader.MoveToNextAttribute();
            string lon = reader.Value;

        } 
```

我将如何使用上面的代码遍历每个站点？

谢谢

编辑：#2

此循环有效，但始终显示第一行停止属性：

```
using (XmlReader reader = XmlReader.Create(new StringReader(feed)))
           {
               reader.ReadToFollowing("stop");
               while (reader.MoveToNextAttribute())
               {

               // Move the reader back to the element node.

                   //reader.ReadToFollowing("stop");
                   reader.MoveToFirstAttribute();
                   string tag = reader.Value;
                   MessageBox.Show(tag);

                   reader.MoveToNextAttribute();
                   string title = reader.Value;
                   MessageBox.Show(title);
                   reader.MoveToNextAttribute();
                   string lat = reader.Value;
                   MessageBox.Show(lat);
                   reader.MoveToNextAttribute();
                   string lon = reader.Value;
                   MessageBox.Show(lon);

               }
               reader.MoveToElement();
           } 
```

我觉得我离弄清楚它很近了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:48:20.393

这是在 Linq 的帮助下的完整解决方案。看看`result`里面有什么

```
using (WebClient w = new WebClient())
{
    string xml = w.DownloadString("http://webservices.nextbus.com/service/publicXMLFeed?command=routeConfig&a=sf-muni&r=N");
    XDocument xDoc = XDocument.Parse(xml);
    var result = xDoc.Descendants("stop")
                    .Select(n => new
                    {
                        Tag = (string)n.Attribute("tag"),
                        Title = (string)n.Attribute("title"),
                        Lat = (string)n.Attribute("lat"),
                        Lon = (string)n.Attribute("lon"),
                        StopId = (string)n.Attribute("stopId")
                    })
                    .ToArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:41:00.127

解析 XML 文件的方法有很多。这是一种简单的方法：

```
 XDocument doc = XDocument.Load(feedString);
        var stops = doc.Document.Descendants(XName.Get("route"));
        // Loop over all stops in the XML
        foreach (var stop in stops)
        {

        } 
```

我不确定“将每个停止标记中的每个属性存储到一个数组中”是什么意思，但我会定义一个类型：

```
class RouteStop
{   // make setters private and init them in ctor to make it immutable
    public string Tag {get; set;} //maybe int ?
    public string Title {get; set;}
    public double Latitude {get; set;}
    public double Longitude {get; set;}
    public int ID {get; set;}
} 
```

然后定义一个RouteStop列表

```
List<RouteStop> routeStops = new List<RouteStop>(); 
```

并简单地在 foreach 循环中的创建对象中

```
foreach (var stop in stops)
{
    var tag = stop.Attribute("tag").Value;
    var title = stop.Attribute("title").Value;
    var long = double.Parse(stop.Attribute("lon").Value, 
                            CultureInfo.InvariantCulture);
    //etc
    routeStops.add(new RouteStop() { Tag = tag } //and so on
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T00:53:55.133

这是您可以使用的东西：

```
XmlReader xmlReader = XmlReader.Create("http://webservices.nextbus.com/service/publicXMLFeed?   command=routeConfig&a=sf-muni&r=N");
List<string> aTitle= new List<string>();

// Add as many as attributes you have in your "stop" element

while (xmlReader.Read())
{
 //keep reading until we see your element
 if (xmlReader.Name.Equals("stop") && (xmlReader.NodeType == XmlNodeType.Element))
 {
   string title = xmlReader.GetAttribute("title");
   aTitle.Add(title);

   // Add code for all other attribute you would want to store in list.
  }
} 
```

最后调用列表并根据索引获取所有项目。

# git - 如何从 github 的结帐中推送？

> ID：11174077
> 
> 赞同：0
> 
> 时间：2012-06-24T00:26:58.240
> 
> 标签：git, github

编码后，我意识到我犯了一个错误。我用了

```
git checkout 7e57dbf5a7245... 
```

恢复到较旧的提交。现在当我提交使用

```
git commit -a 
```

它说我正在致力于[分离的 HEAD f69ae14]。当我使用

```
git push origin master 
```

它说一切都是最新的......我输入什么来将这个[分离的头]提交推回主人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:44:45.137

您当前的日志必须是这样的

```
*-*-*-*[7e57db]-*-*-*<master>
       \
        *-*-*-*<HEAD> 
```

现在您应该重置`master`到当前`HEAD`位置，创建`master`当前分支并将其推送到`origin`：

```
git branch -f master HEAD
git checkout master
git push origin master 
```

请注意，您将丢失`7e57db`和 current之间的所有提交`master`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T23:30:57.887

离开 max 所说的，您的日志最初看起来像：

```
*-*[7e57db]-*-*<master> 
```

您签出 7e57db 和`git commit`，最终得到：

```
*-*[7e57db]-*-*<master>
   \
    *<HEAD> 
```

您真正想做的是在 HEAD 提交，并将它在 7e57db 上引入的更改重播到 master 上。您为此使用的命令是`git rebase`. 具体来说，一旦你做出了提交，你将运行：

```
git rebase master 
```

此时您的历史将是：

```
*-*[7e57db]-*-*<old-master>-*<master> 
```

然后你可以`git push origin master`更新远程参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T00:43:21.643

您可以通过使用将头部重置为分离的头部

```
git reset --hard 7e57dbf5a7245...
# and then 
git push origin master --force 
```

通过这样做，您将失去新旧头之间的更改。

如果您想保留这些更改，您可以从分离的头创建一个新分支并将其合并到您的头中，然后提交您的更改并推送新分支。

# java - FPS 在全屏模式下下降，但在 Window/Applet 中正常？

> ID：11174080
> 
> 赞同：2
> 
> 时间：2012-06-24T00:27:52.703
> 
> 标签：java, fullscreen, frame-rate

我一直在研究游戏引擎。它可以在窗口模式、全屏模式或小程序模式下创建游戏。FPS 在小程序模式和窗口模式下很好（给我 90-120 fps，地图中最多 3000 个对象），但在全屏模式下，它下降到 25-50 fps。这是窗口类。

[https://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/core/GWindow.java](https://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/core/GWindow.java)

找不到问题出在哪里。在 Windows 上运行更多是好的，但在 Ubuntu 上它有这个问题。列出显示模式给了我位深度 -1 这是我机器上的完整列表。

```
1600     900     -1
1440     900     -1
1440     900     -1
1280     800     -1
1280     800     -1
1152     864     -1
1024     768     -1
1024     768     -1
1024     768     -1
832      624     -1
800      600     -1
800      600     -1
800      600     -1
800      600     -1
640      480     -1
640      480     -1
640      480     -1
640      480     -1
720      400     -1 
```

我发现位深度 -1 表示 BIT_DEPTH_MULTI，这是 DisplayMode 类中的一个常量。因此，设置模式将 fps 提高到 60-70fps，但仍不如窗口模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T04:01:45.320

Java2D 是否在 Ubuntu 上使用硬件加速？看看一些[Java 2d 标志](http://docs.oracle.com/javase/6/docs/technotes/guides/2d/flags.html)，尤其是那些打开 OpenGL 的标志。

在 Windows 上，默认使用 Direct3D 加速。在 Linux 上，默认情况下您*不会*`-Dsun.java2d.opengl=true`获得 OpenGL，因此请尝试在启动 JVM 时使用命令行选项将其打开。

# oop - 静态语言的隐私

> ID：11174081
> 
> 赞同：2
> 
> 时间：2012-06-24T00:27:59.397
> 
> 标签：oop, unit-testing, language-agnostic, private, language-design

虽然我理解实现/接口区分的价值，但我不明白为什么大多数 OO 系统在访问私有成员时会出现错误。

我确实不想在我的主程序中访问私人成员。
但我希望能够访问测试和调试。

是否有任何充分的理由发出错误而不是警告？在我看来，我被迫要么编写我可以测试的代码，但不利用接口的语言支持，或者使用语言支持，但在测试中遇到困难。

**编辑**

对于那些建议使用公共接口的人。可以，但不太方便。
在概念层面上，我发现不关心谁或何时相当粗略的隐私。
朋友班似乎是一个合理的解决方案。另一个可能是“所有公共”编译器开关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:03:39.183

> 在我看来，我被迫要么编写我可以测试的代码，但不利用接口的语言支持，或者使用语言支持，但在测试中遇到困难。

为什么需要访问`private`变量和函数？它们要么在某些时候被`public`函数调用（但间接地），要么它们只是不可访问的代码片段，根本不应该存在，因为无法调用它们。想一想，如果**完全**`private`不可能从类外部以任何方式调用该方法，它会被运行吗？

 **如果你真的想测试一个`private`方法，你可以把它拉到它自己的类中。另外，如果它非常复杂以至于它真的需要最好地单独测试，那么它就有机会首先得到它的机会。另一种选择是在您需要/想要测试它时将其公开，但实际上并不更改“真实”代码（保留它`private`）。正如其他人所说，某些语言还具有通过稍微公开它们来帮助您测试这些方法的功能，例如 C++ 中的朋友、C [# 中的内部](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.80%29.aspx)和[Java 中的包私有。](https://stackoverflow.com/questions/5416074/java-package-private-terminology) [有时 IDE 自己甚至会提供帮助。](http://msdn.microsoft.com/en-us/library/bb385974.aspx)

> 是否有任何充分的理由发出错误而不是警告？

一个很大的原因不是你不能打电话给他们，而是*其他人*不能打电话给他们。想象一下，您正在编写一个将被大量客户使用的库。您已经标记了他们不需要调用的所有内容`private`，并且他们需要的所有功能都是公开的。程序员继续使用您的库，用它编写一堆代码，并从他们自己和他们自己的客户中产生满意的客户。

几个月后，您决定为您非常成功的库增添趣味，并发现您需要进行一些重构。因此，您 [重命名、添加/删除参数、删除] 一些`private`方法，但要小心保持所有公共方法的接口完全相同，以使升级过程无缝。***但是***在这个世界中，编译器只在您访问变量时发出警告而不是错误`private`，并且您的一些客户端程序员编写了调用这些`private`方法的代码。现在，当他们尝试升级到您的库的新版本时，他们会遇到一堆真正的错误，因为他们无法调用这些错误`private`方法了。现在他们要么必须花时间找出代码出了什么问题，要么重写他们不记得的大部分代码（我是否提到这是两年后的事？）。因此，他们必须完全重新学习如何使用您的库并重写他们的客户端代码，这对任何人来说都不是一件有趣的事情。现在他们很不高兴，因为你如此不体谅你，以至于你的升级真的破坏了他们所有的代码，让他们的生活变得更加困难。

猜猜看，当他们修复代码时，他们研究并调用了您的新`private`方法，因此如果您决定在发布升级时更改他们的界面，整个循环将重新开始。对你来说稍微方便一点的只是让你有一群不满意的客户。

> 等等，他们不是白痴调用我的私有方法吗？他们为什么不看警告？这是他们的错，不是我的！

嗯，是的，这是他们的错，他们本可以通过注意这些警告来防止问题的发生。但并不是每个人都是想要修复和理解警告的代码质量狂热者，而且相当多的人只是忽略了它们。问题是，如果编译器发出错误以尝试访问变量和方法而不是警告，那么您可以自己阻止整个事情`private`，因为否则`private`关键字可能根本不存在。您可能已经失去了一点时间，因为这些方法更难测试，但您已经获得了阻止不聪明的人滥用您的代码并将导致他们在路上出现的任何问题归咎于您的能力。

我最喜欢的软件开发（以及一般的产品设计）的原则之一是事情应该易于正确使用，并且很难或不可能不正确地使用。真正的私有成员就是这个建议的体现，因为它们确实使您的代码无法正确使用。

> [假设性反驳：]好吧，使用我的代码的人应该足够聪明，可以弄清楚。我只要求他们多花一点时间来正确使用代码。

所以你有意识地拒绝花必要的时间来提高你的代码质量，让它更容易使用？然后我不想与你的代码有任何关系。显然，您的时间比您的客户的时间更重要，因此我将花费 2.5 秒来关闭您的项目的网页并单击下一个 Google 结果。您使用的库成员比您想象的要多得多`private`，而光荣的事情是您不必花费一毫秒的时间来担心它们，因为它们对您完全隐藏并且只会分散注意力从提供的更简单和更好的做事方式`public`界面。如果所有内容都是公开的或发出微弱警告的私有内容，那么在真正找到所需内容之前，您必须筛选更多功能。

每当您`private`在成员函数之前键入时，您就已经赋予自己在未来任何时候以您想要的任何方式更改它的权力，因为除了您之外没有人可以触摸它。第二次其他人尝试访问它时，他们将收到一个显示停止错误，因为编译器支持你，并且当你已经以更可用的形式完美地提供了他们需要的一切时，他们不会让他们对你的代码做任何愚蠢的事情在您的`public`界面中。

是的，它会让现在的测试变得稍微困难​​一些，但它也确保了你将来在重构时不必担心它，并使你的代码*更*容易被其他人使用。继续并暂时将其公开（我有点喜欢您的“全公开编译器切换”想法 :)，但是当您完成后不要忘记将其切换回来，您和您的客户都可以享受使用更简单和更简单的工作的乐趣更具适应性的代码。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:35:23.113

显而易见的原因是太多人似乎忽略了许多（全部？）警告。在某些语言（例如，Python）中，它几乎就像您所说的那样——“私有”的东西基本上是反对外部代码直接使用它的建议，但编译器并没有强制执行。

至于这有多大意义，我怀疑它因语言而异——在诸如 C++ 之类的语言中，对它们的态度（“防止墨菲，而不是马基雅维利”）*可以*被视为将其作为警告而不是错误的理由。

我认为可以肯定地说，在 Ada 中，至少可以说，这会得到*更冷*的接受（这并不是说我认为 C++ 程序员也会热情地接受它，只是他们可能不太讨厌这个想法和大多数 Ada 程序员一样）。

另一方面，我不得不怀疑一个无法通过其外部接口进行测试（至少相当好）的类的设计。在你做不到的罕见（无论如何应该是罕见的）场合，我认为让测试类成为朋友（用 C++ 的说法，尽管许多其他人有类似的概念）是相当容易证明的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T00:35:26.590

完全封装有几个优点：

*   **安全**。具有强封装性的强类型OOP语言可以对程序中数据的安全性有一定的保证。Java 语言的设计考虑了安全性，因此某些库类（例如，`String`或`SecurityManager`）不能访问其字段。这可以防止恶意代码对这些对象做坏事，并允许代码假定对象是安全的。

*   **可维护性**。`private`保留字段和方法的主要原因之一`private`是允许实现无缝更改；只要没有对公共接口进行更新，使用更新的类的代码就可以在没有任何更改的情况下工作。如果您允许访问`private`字段然后更改实现，则可能会破坏无限量的代码。

*   **稳定性/可验证性/可测试性**。类通常在其字段上施加不变量 - 例如，动态数组的实现可能需要跟踪使用多少空间的字段实际上对应于元素的总数。允许人们任意访问`private`字段，即使有警告，也可以打破这些不变量。如果不能依靠不变量，就很难或不可能推断代码的正确性。此外，如果您确实在代码中的某处破坏了不变量，则可以想象，您必须查看程序中可以访问该对象的每一段代码，因为它们中的任何一个都可能正在访问`private`场地。通过强封装，这些不变量不会被破坏，并且通过`friend`s 或包私有机制的半封装，查看的代码量是有限的。

至于您关于测试的问题 - 许多语言允许在某些情况下破坏封装；C++ 有`friend`，Java 有 package-private 等，所以类可以说“通常你不能碰这些，但可以做例外”。然后，您可以将测试代码`friend`与主类放在同一个包中，以便更彻底地对其进行测试。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T00:43:33.963

我看到的方式是，您需要忘记访问对象中的任何内容，除非您有办法在该对象的接口中执行此操作。如果您尝试直接访问特定于实现的私有成员，我认为正确的 OO 系统应该发出错误（而不是警告）。我最近参加了 Kevlin Henney 关于这个主题的精彩演讲，我发现它非常有用，可以在此处查看副本：http: [//www.infoq.com/presentations/It-Is-Possible-to-Do-OOP- in-Java](http://www.infoq.com/presentations/It-Is-Possible-to-Do-OOP-in-Java)（请注意，主要是关于 java，但也包括与其他 OO 系统的比较）

对于大多数时间的测试，我发现大部分被测代码都被公共接口调用覆盖。只有在极少数情况下，我才需要使用运行时反射之类的东西来获得绝对 100% 的覆盖率。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T00:57:29.830

我正要发帖，*“严格执行封装可以防止你的老板踩到你的私人成员。”* 直到我意识到这听起来可能是错误的，但转念一想这可能是对的。**

# javascript - 使用javascript输出html

> ID：11174085
> 
> 赞同：1
> 
> 时间：2012-06-24T00:28:31.830
> 
> 标签：javascript, jquery, html, function, bookmarklet

我有一个引用另一个 .js 文件的 javascript 链接。我一直在尝试输出图像（用于测试目的），但我不确定这样做的正确方法是什么。

```
 alert("beginning");
    //var link = $("<a href='http://juixe.com'>Hello, <b>World</b>!</a>");
    //$('body').append(link);
    //document.write("hi");
    //document.write("<div><img src='http://s3-media2.ak.yelpcdn.com/bphoto/xqC6Iy5mOLb_8mwMKGv8_w/l.jpg' /></div>");
    alert("before function");
(function(){

    alert("middle");
    var links = $("<a href='http://juixe.com'>Hello, <b>World</b>!</a>");
    $('body').append(links);
    alert("after middle");
    //alert($("img").attr("id"));
    document.write("hi");
    document.write("<div><img src='http://s3-media2.ak.yelpcdn.com/bphoto/xqC6Iy5mOLb_8mwMKGv8_w/l.jpg' /></div>");

    alert("end");
}()); 
```

我能够警觉开始，一直到中间。好像`var links`不行啊 我正在尝试在此`.js`文件中使用 HTML。本质上，我希望能够做一些模态窗口，但我现在正试图输出图像以用于测试目的。

另外，这是jquery的正确方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:46:49.743

你的代码是一个奇怪的组合。Jquery 代码几乎总是需要在页面加载后运行，而在页面加载`document.write`后永远不能使用。

您错误地将 jQuery 包装在立即执行的函数中。jQuery 的正确包装在：

```
$(document).ready(function(){
  /* html of page exists now, run jQuery here */
});// notice no extra "()" after close brace as you have 
```

或做同样事情的速记版本：

```
$(function(){
  /*html of page exists now, run jQuery here */
});// notice no extra "()" after close brace  as you have 
```

如果您更改所有`document.write`to`$('body').append(/* your content*/)`并将所有代码放入上述包装器中，您将获得更好的成功。

jQuery 文档和 API 中有大量信息。可以在此处找到有关我展示的包装的更多详细信息的良好起点：http: [//docs.jquery.com/How_jQuery_Works](http://docs.jquery.com/How_jQuery_Works)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T00:54:17.090

您最大的问题已在另一个答案中得到解决。`append`您未正确包装 JQUery，因此本质上 JQuery 在到达您的语句时还没有准备好执行。

没有必要将您的 html 包装在 JQuery 对象中（在这种情况下）：

```
var links = "<a href='http://juixe.com'>Hello, <b>World</b>!</a>";
$('body').append(links); 
```

或者简单地说：

```
$('body').append("<a href='http://juixe.com'>Hello, <b>World</b>!</a>"); 
```

就最佳实践而言，根据上下文使用`append`或是不错的选择`appendTo`。`prepend`您还可以使用：

```
$("body").html("/*Your HTML here*/") 
```

`document.write`归根结底，您有很多选择，但不惜一切代价避免。非 JQuery 方法将`.innerHTML`与 DOM 元素一起使用。在没有 JQuery 的情况下，这也是一个很好的方法。

# java - Java中的继承和识别对象类型

> ID：11174087
> 
> 赞同：1
> 
> 时间：2012-06-24T00:28:44.957
> 
> 标签：java, inheritance, polymorphism, subclass, abstract

好的，所以我正在处理一个带有抽象类 A 的项目。假设类 a1、a2 和 a3 都继承自类 A，并带有一些可能对每个子类都是唯一的附加方法。现在，这些对象可以作为用户交互的结果与其他对象配对，但只能配对某些类型的对象，即对象B只能使用a1，对象C只能使用a2，并且用户尝试将它们配对否则会导致告诉他们他们不能。我当然想避免使用 instanceof，因为这在很大程度上是一种不好的做法，但我认为我目前有一个相当严重的脑胀气病例。我想在父类中添加一个 getType() 或一些这样的方法来返回每个子类唯一的字符串，但这感觉很陈旧。获取班级名称的感觉大致相同。我'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:01:48.203

如果您真的决定不使用 instanceof，并且无论出于何种原因，您都无法为实例类之外的配对定义参数，请向抽象类添加一组新方法，这些方法可以执行以下两项操作之一：

a) 方法worksWithTypeB、worksWithTypeC 等等，在子类中适当地定义它们。然而，这很像类型检查。

b) 将类型 B 和 C 使用的方法转移到抽象类；通常在 B 和 C 可以使用的类中定义它们（假设 B 类型使用 a1.methodB，C 类型使用 a2.methodC），但定义它们以抛出在方法中不会的异常否则存在（因此 a1.methodC 抛出异常，a2.methodB 也是如此）。

尽管正如 ilcavero 所说，在这种情况下，类型检查并没有什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:59:04.153

我正在考虑通过在这种情况下使用泛型来解决问题。

为此，您需要定义一个类，该类通常存储两个值，例如

类对<k，v扩展A>

现在您将向哈希图中添加您可以拥有的所有类型的对。当需要该类型的一对时，您将通过其名称获得该对。

缺点：

您必须将所有想要的对添加到容器中

您必须将一对与名称相关联

请注意，在大规模情况下，这将是一个糟糕的解决方案。

# php - 从 Wordpress 自定义元框调用数据

> ID：11174092
> 
> 赞同：0
> 
> 时间：2012-06-24T00:30:46.720
> 
> 标签：php, wordpress

好的，我在帖子编辑屏幕上为我的自定义帖子类型创建了一个自定义元框。我希望能够用它做的是允许用户输入一个链接，然后有一个按钮显示帖子以将用户带到指定的链接。我会用什么钩子来调用元框数据？

谢谢！

杰温顿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:34:49.707

我不确定我是否理解这个问题，但是：

1 - 要显示自定义元数据，您不需要挂钩，而是需要一个函数。

它被称为[get_post_meta()](http://codex.wordpress.org/Function_Reference/get_post_meta)（单击链接了解更多信息。）

2 - 如果你想创建一个链接，通常要做的是有 2 个元字段，一个用于 URL 本身，一个用于 URL 显示文本（或您的按钮）。

然后你不能这样做，例如：

```
$my_URL = get_post_meta($post_id, $my_URL, true); ?>
$my_URL_mask = get_post_meta($post_id, $my_URL_mask, true); ?> 
```

接着

```
 <a href="<? echo $my_URL; ?>" rel="whatever" title = "go to <?echo $my_URL;?>" alt="<?php echo $my_URL; ?>" /> <? echo $my_URL_mask ?> </a> 
```

现在，如果您的自定义字段值将是例如：

```
$my_URL = 'CLICK HERE';
$my_URL = 'http://codex.wordpress.org/Function_Reference/get_post_meta'; 
```

这将为您创建一个与上面类似的链接文本链接。

如果您不想要 url 掩码，而只希望将 URL 显示为文本 - 那么只需使用一个 value 。

3 - 如果您希望它显示在 BUTTON 中，那就是另一回事了，它与 CSS 相关 - 这将取决于您希望按钮的外观，在这种情况下 - 您只需将这些值放入标记中。

# actionscript-3 - 如何减慢网络摄像头的复制速度

> ID：11174094
> 
> 赞同：0
> 
> 时间：2012-06-24T00:31:32.473
> 
> 标签：actionscript-3, video, webcam

我需要做的很简单：这个测试的目的是在相机捕捉到白色像素时显示我的网络摄像头的速度，所以：

1/ 我创建了一个相机

```
this.cam = Camera.getCamera();
this.velocidad = 24;  // I set up the fps in 24
this.cam.setMode(ancho,alto,velocidad);

vid = new Video(640,480);
vid.width = ancho;
vid.height = alto;
vid.attachCamera(cam);
addChild(vid); 
```

2 /所以现在，当像素被识别时，我需要将相机的当前速度更改为 12 以降低用户速度

我已经尝试使用此代码，但相机被冻结并且没有任何变化。我不知道我是否必须删除相机的当前实例并使用 disire fps 重新设置

```
cam.setMode(640,480,12); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:25:58.247

请参阅[`Camera.setMode()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setMode%28%29)请求不同的帧速率，但请注意可用的帧速率取决于相机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T05:31:19.770

我认为仅使用配置设置、属性或方法是不可能的。

可能的解决方案是捕获凸轮并将其帧存储为位图并按顺序播放（或渲染）它们。

如果这不是一个商业项目，您可以使用这个：[http](http://code.google.com/p/flvrecorder/) ://code.google.com/p/flvrecorder/来录制并加载视频以根据需要播放。

**编辑：**
这里有更多链接，因为我现在无法为您编写代码：

[在 AS3 中对捕获的视频进行后处理，在 Flash 视频播放器中的视频播放器中创建慢动作](https://stackoverflow.com/questions/5781951/post-processing-captured-video-in-as3-creating-slow-motion)
[播放慢动作、快进、快退](https://stackoverflow.com/questions/6261681/playing-slow-motion-fast-forward-rewind-in-a-video-player-in-flash-video-play)

此外，您可以在 Google 上搜索“as3 video slow”，它会为您提供更多参考资料和一些示例。

# sql - 使用可能的 Group By 子句协助 SQL 查询？

> ID：11174095
> 
> 赞同：1
> 
> 时间：2012-06-24T00:31:39.027
> 
> 标签：sql, sql-server

我在 .NET 中已经有一段时间了，但在 SQL 世界中我仍然是入门级的。我需要一些帮助来构建我认为应该是一个简单的查询。

我有一个关联实体，它允许一个表中的客户拥有多个电话号码（存储在单独的表中）。获取与该特定客户相关的号码很简单。但是，我需要一个查询来仅显示共享电话号码的客户。

我想也许这可以使用 GROUP BY 子句并指定 HAVING Count(*) > 1 （或其他东西）来完成，但这并没有让我得到我正在寻找的结果......

需要这样做，因为它违反了我们在 BLL 中实现的业务逻辑，需要解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:50:50.367

我会通过电话号码加入并再次返回给客户，这样您就可以显示*谁*与谁匹配*以及*通过*哪个*号码：

```
SELECT c1.*, c2.*, p1.phone_number
FROM customer c1
JOIN customer_phone_number p1 ON p1.customer_id = c1.id
JOIN customer_phone_number p2 
    ON p1.phone_number = p2.phone_number and p2.customer_id != p1.customer_id 
JOIN customer c2 ON c2.id = p2.customer_id 
```

# javascript - 如何访问多维数组中的值？

> ID：11174096
> 
> 赞同：0
> 
> 时间：2012-06-24T00:31:40.710
> 
> 标签：javascript

我有以下代码：

```
<html>
<body>
<div style="background-color: lightblue;" onClick="alert(myArray[0][1])">
this is a div
</div>

<script type="text/javascript">
var myArray = new Array();
myArray[0][0] = 0;
myArray[0][1] = 00012;
myArray[0][2] = 00006;
myArray[1][0] = 1;
myArray[1][1] = 00004;
myArray[1][2] = 00001;
</script>
</body>
</html> 
```

当我点击 div 时，什么也没有发生；没有警报。但是，当我将警报的内部更改为字符串（例如“test”）时，会出现警报框。

我究竟做错了什么？如何获取多维数组中项目的值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:34:05.353

像这样写出来：

```
<div style="background-color: lightblue;" onClick="alert(myArray[0][1])">
    this is a div
</div>

<script type='text/javascript'>
    var myArray = [];
    myArray.push([0, 00012, 00006]);
    myArray.push([1, 00004, 00001]);
</script> 
```

**编辑**

问题是当你写这个时：

```
var myArray = new Array();
myArray[0][0] = 0; 
```

*myArray*中的第一个项目是未定义的，所以你不能用它做任何事情。使用此方法，您必须先创建数组：

```
var myArray = new Array();
myArray[0] = new Array();
myArray[0][0] = 0; 
```

但我认为将平方符号与*push*一起使用的方法更简洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T01:03:51.557

您的代码的第一行：

```
var myArray = new Array(); 
```

...将创建一个没有元素的新的*一维*数组。`myArray`然后当你说：

```
myArray[0][0] = 0; 
```

...您正在尝试访问尚不存在的维度。也就是说，因为虽然它`myArray[0]`是一个数组，但它还没有任何元素 - 所以就像说.`undefined``myArray``myArray[0][0]``undefined[0]`

这就是为什么您必须先分配`myArray[0]`以引用新数组，然后才能访问`myArray[0][0]`. 同样的事情也适用于`myArray[1]`，因为 JavaScript 本身没有多维数组，它有数组的数组。所以这就是您所需要的（对现有代码进行最小的更改）：

```
var myArray = [];
myArray[0] = [];
myArray[0][0] =  00012;
myArray[0][1] = 00012;
myArray[0][2] = 00006;
myArray[1] = [];
myArray[1][0] = 1;
myArray[1][1] = 00004;
myArray[1][2] = 00001; 
```

注意`[]`相当于`new Array()`。

一个更易于阅读和键入的选项是通过数组字面量语法创建子数组：

```
var myArray = [];
myArray[0] = [00012, 00012, 00006];
myArray[1] = [1, 00004, 00001]; 
```

或者，最简单的（特别是如果这些是硬编码值）是通过嵌套数组文字在一个语句中创建整个事物（忽略空格）：

```
var myArray = [
                [00012, 00012, 00006],
                [1, 00004, 00001]
              ]; 
```

（另请注意，数字数据的前导零会消失：如果要保留零，请使用字符串（`"00012"`而不是）。）`00012`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T00:45:13.887

这是您声明多维数组的方式：

```
MultiArray = new Array(2)

MultiArray [0] = new Array(2)

MultiArray [0][0] = "Tom"

MultiArray [0][1] = "scientist"

MultiArray [1] = new Array(2)

MultiArray [1][0] = "Beryl"

MultiArray [1][1] = "engineer" 
```

# php - 如何管理 ftp 以确保替换另一个文件？

> ID：11174110
> 
> 赞同：0
> 
> 时间：2012-06-24T00:35:20.920
> 
> 标签：php, file, upload, ftp

我正在创建一个页面以通过 PHP 页面将图像上传到 FTP，我想确保它使用同一路径中不存在的名称保存图像。所以我只需要如何上传文件然后它应该返回图像保存的名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:39:17.897

当您实际保存它时，它会使用您指定的名称保存它。如果存在同名文件，则不会将其另存为单独的文件，而是会覆盖现有文件。如果你想避免这种情况，你需要先检查文件是否存在，然后在保存之前选择一个新名称。

# asp.net-mvc - MVC 模型复制

> ID：11174115
> 
> 赞同：0
> 
> 时间：2012-06-24T00:36:01.483
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model, dry

我对 ASP.NET MVC 很陌生，所以如果这是我应该知道的，请原谅我。我还没有看到任何明显的文档，所以这里是：

我有一个 LINQ to Entities 数据模型和一个 MVC 项目。我使用了很多 javascript/jquery，因此选择通过 WebAPI 作为 json 对象从客户端访问我的数据。但是，我不想将所有实体对象属性都传递给客户端，因此我在我的 MVC 项目中添加了单独的模型，我在其中处理 MVC 模型验证和绑定到我的视图。此外，为了在我的 jquery 中使用它，我创建了模型的 json 版本。

这只是项目的开始，我不想从错误的角度开始。为我的业务层中的每个实体拥有三个版本的模型将是一场噩梦！我确信我的项目的整体结构是一个非常普通的结构，但看不到很多开发人员满足于这样的代码重复。必须有更好的方法来实现它。

有什么想法吗？非常感谢任何输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:48:08.433

回答您上面的评论 - 您可以将您的 javascript 视图模型创建为标准 js 对象。我倾向于使用 Knockout.js，所以它看起来像这样：

```
jsController.Resource = function (data) {

    self.UserId = ko.observable(data.UserId);
    self.FullName = ko.observable(data.Name);
    self.RoleName = ko.observable(data.RoleName);
    self.RoleId = ko.observable(data.RoleId); 
} 
```

然后使用 ajax post 方法将其发布到您的 MVC 操作

```
jsController.addToUndertaking = function (resource, isAsync) {
    mylog.log("UndertakingId at post = " + jsController.undertakingId);

    var action = $.ajax({
        type: "POST",
        url: "/TeamMember/AddUserToUndertaking",
        data: resource,
        cache: false,
        async: isAsync
    });

    action.done(function () {
        resource.AllocatedToUndertaking(true);
    //Do other funky stuff
    });
}; 
```

创建您的 MVC 操作，以便它接受表单集合，如下所示：

```
public ActionResult AddUserToUndertaking(FormCollection postedResource)
    {
        if (Request.IsAjaxRequest() == false)
        {
            const string msg = "Non ajax request received";
            Logger.ErrorFormat(msg);
            throw new SecurityException(msg);
        }

        if (postedResource == null)
        {
            Logger.Debug("Null resource posted - terminating.");
            return new HttpStatusCodeResult(500);
        }

        var resource = new AllocatedResourceAjaxViewModel(postedResource);
    //Do something Funky
       return new HttpStatusCodeResult(200);
    } 
```

然后你从表单集合创建你的 MVC 视图模型（我倾向于通过将表单集合作为构造函数方法传递给视图模型来做到这一点）。

```
public class AllocatedResourceAjaxViewModel
{
    public int UserId { get; set; }
    public string Name { get; set; }
    public string RoleName { get; set; }
    public int RoleId { get; set; }

    public AllocatedResourceAjaxViewModel()
    {}

    public AllocatedResourceAjaxViewModel(NameValueCollection formData)
    {
        UserId = JsFormDataConverter.Int(formData["UserId"]);
        Name = Convert.ToString(formData["FullName"]);
        RoleName = Convert.ToString(formData["RoleName"]);
        RoleId = JsFormDataConverter.Int(formData["RoleId"]);

    }

} 
```

由于您的 javascript VM 中的 null int 将导致传递“未定义”字符串，因此您需要一个转换器方法来安全地提取非字符串。

```
public static class JsFormDataConverter
{
    public static bool Boolean(string formValue, bool defaultValue = false)
    {
        if (formValue.ToLower() == "true") return true;
        if (formValue.ToLower() == "false") return false;
        return defaultValue;
    }

    public static int Int(string formValue, int defaultValue = 0)
    {
        int result;
        return int.TryParse(formValue, out result) 
            ? result 
            : defaultValue;
    }

} 
```

你去吧。我相信你可以在上述方面有所改进，但这会让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:56:07.207

我一直工作的方式是你有你的模型，例如订单和订单线，你可以在其中存储所有数据，并通过 SQL 直接从数据库中获取水分，或者通过 NHibernate 或实体等 ORM 直接从数据库中获取水分。框架。

然后你有 ViewModels——它们用于将数据从你的应用程序传输到视图——或者直接，即绑定到 OrderViewModel 的强类型视图，或者通过返回 JsonResult 的操作。

OrderViewModel 不是 Order 的重复，因为它旨在仅保存需要在屏幕上显示的数据（如果您有许多不同的视图以不同的方式显示 Order，那么拥有许多不同的 ViewModel 是完全可以接受的 -每个视图一个，只包含每个视图所需的字段）。ViewModel 也不应包含除其他 ViewModel 之外的任何复杂类型。这有助于防止意外数据访问视图（考虑安全性和性能）。

所以给定

```
public class Order
{
    public int Id { get; set; }
    public DateTime OrderDate { get; set; }
    public User User { get; set; }
    public string  Description { get; set; }
    public List<OrderLine> OrderLines { get; set; }
}

public class OrderLine
{
    public int Id { get; set; }
    public Order Order { get; set; }
    public String Description { get; set; }
    public int Quantity { get; set; }
    public int Weight { get; set; }
    public int Price { get; set; }
}

public class User
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

你可以有两个 ViewModel

```
public class OrderViewModel
{
    public int ID { get; set; }
    public List<OrderLineViewModel> OrderLines { get; set; }
    public DateTime OrderDate { get; set; }
    public int UserId { get; set; }
    public string Description { get; set; }
}

public class OrderLineViewModel
{
    public int Id { get; set; }
    public int OrderId { get; set; }
    public String Description { get; set; }
    public int Quantity { get; set; }
    public int Weight { get; set; }
    public int Price { get; set; }
} 
```

然后可以根据需要将视图模型序列化为 JSON 或使用验证属性等进行标记。

# sql-server-2008 - sql server 2008中的复杂sql查询

> ID：11174118
> 
> 赞同：0
> 
> 时间：2012-06-24T00:36:37.853
> 
> 标签：sql-server-2008, join

我的数据库中有 4 个主要表。

1.  季节 --> 季节ID
2.  试验 --> 试验ID
3.  竞争 --> CID,名称
4.  营地 --> campID,DivisionID(FK)
5.  部门 ---> 部门 ID
6.  参赛者--->参赛者ID

现在参赛者属于/是一个部门的成员。

那么一个部门属于一个阵营。

所有这些都导致了我的性能表。

**性能表**

```
SeasonID|TrialID|CampID|DivID|CompetionID|CtestantID|Score1 |Score2 |Total
1           1        1    1       1          1         20      20     40
1           1        1    1       2          1         20      15     30 
1           2        1    1       1          2         10       5     15
1           2        1    1       2          2         5        5     10
1           2        1    1       1          1         10      30     40
1           2        1    1       2          1         20      10     30 
```

如何查询该成绩表，以提供每个参赛者在每场比赛中的比赛名称、总分和排名（排名高于总分）按试验和季节？

例子：

在第 1 季和第 2 季中，我想要：

```
 SeasonID| TrialID | ContestantID| Competition | TotalScore | Rank
   1          2           1            1            40         1
   1          2           2            1            15         2
   1          2           1            2            30         1
   1          2           2            2            10         2 
```

我该怎么做？我已经尝试过表变量、数据透视和连接，但我只能按比赛排名，但我不知道如何汇总结果以获得上述结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:49:58.190

我不确定你是如何计算你想要的结果的。我认为这就是你所追求的，但如果是这样，`TotalScore`你的问题的预期结果应该是最后一条记录的 10，而不是 20。

```
SELECT SeasonID, TrialID, ContestantID, CompetitionID, Total,
    DENSE_RANK() OVER(PARTITION BY CompetitionId ORDER BY Total DESC) AS [Rank]
FROM PerformanceTable 
```

# masm32 - 无法显示 CR 和 LF

> ID：11174119
> 
> 赞同：1
> 
> 时间：2012-06-24T00:36:48.200
> 
> 标签：masm32

我试图在我的代码中显示回车和换行，但它不起作用。如果我将代码打印为字符串，它就可以工作。需要帮助。提前致谢。

; 一个 16 位 DOS 程序，从 STDIN 接收单个字符，然后将其打印到 ;STDOUT

```
 .MODEL small
    .stack 100h

    .data

    char_prompt     db  'Please input a character: ','$'
    out_msg1        db  'Character entered is: ','$'
    out_msg2         db 0dh,0ah, '$'    

    .code
    start:

    mov ax, @data
    mov ds, ax ; Set DS segment

    mov dx, offset char_prompt; display msg1
    mov ah,9    
    int 21h    

    mov ah, 01h ;store char in BL
    int     21h
    mov bl, al

    mov dl, 0dh; ;output CR
    mov ah, 02h  
    int 21

    mov dl, 0ah ;output LF
    mov ah, 02h
    int 21

    mov dx, offset out_msg1 ;display msg2
    mov ah,9
    int 21h    

    mov     dl, bl ;display char  
    mov     ah, 02h  
    int 21h

    mov ax, 4C00h
    int 21h

    end start 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:46:46.027

您的代码是错误的：仔细查看 int 部分：

```
mov dl, 0dh; ;output CR
mov ah, 02h  
int 21

mov dl, 0ah ;output LF
mov ah, 02h
int 21 
```

你缺少什么？INT 21 不正确！！它应该是 INT 21H

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T00:42:08.450

试试这个：

```
mov ah, 06h
mov dl, 0dh ; CR
int 21h

mov ah, 06h
mov dl, 0ah ; LF
int 21h 
```

不得不说，这是过去的爆炸...... :)

不得不去我最喜欢的网站[Ralf Brown](http://www.ctyme.com/rbrown.htm)的[中断列表](http://www.ctyme.com/intr/rb-2558.htm)……记住直接控制台输出的指令是什么……

***编辑：***正如枪手指出的那样……是的，'h'不见了……我太老了……：P他应该得到赞成票等:)

# python - 二阶邻居

> ID：11174122
> 
> 赞同：0
> 
> 时间：2012-06-24T00:38:17.917
> 
> 标签：python, algorithm, graph-theory, graph-algorithm

### 给定一个有几百万条边的有向图，我试图为每个节点找到：

1.  邻居的邻居列表（我们称他们为`two_nei`）。

2.  每个`two_nei`（称为`cn`）的公共邻居的数量。

### 我处理这个问题的方法是：

1.  创建一个`dict`以每个节点为键，一个`list`包含所有邻居作为值（`neighbor_dictionary`）。

2.  创建一个`dict`以每个节点为键，一个`list`包含所有邻居的邻居（`two_nei`对于这个节点）作为值（`second_dictionary`）。

3.  现在我想为图中的每个节点创建一个`list`（因为不知道该做什么） 。`dict`这些字典中的每一个都将包含每个`two_nei`节点作为键，值将是它们拥有的公共邻居的数量。

如您所见，这很容易变得复杂。我相信在 python 中有一种更简单、更优雅的方法来做到这一点。我是一个数学专业的人，我没有上过数据结构和算法方面的课程，但我相信我们可以使用队列来解决这个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T04:06:54.043

这是一个函数，它返回图中两个节点的共享第二邻居的数量。它使用[networkx](http://networkx.lanl.gov/)作为图表。根据每个节点中的数据量以及图的连接密集程度，这可能不起作用，因为它会在内存中创建潜在的大集合。

```
def num_shared_second_neighbors(graph, node1, node2):
    """Number of second neighbors shared by node1 and node2 in graph."""
    return len(set(second_neighbors(graph, node1)).intersection(set(second_neighbors(graph, node2))))

def second_neighbors(graph, node):
    """Yield second neighbors of node in graph.
    Neighbors are not not unique!
    """
    for neighbor_list in [graph.neighbors(n) for n in graph.neighbors(node)]:
        for n in neighbor_list:
            yield n 
```

该函数`second_neighbors`是一个生成器，它通过执行简单的图遍历来生成节点的非唯一第二个邻居。该函数`num_shared_second_neighbors`仅返回两个节点的秒邻居集合交集的节点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-15T04:36:18.870

[这是您使用NetworkX](https://networkx.org/documentation/stable/index.html)编写的所需功能：

### 1\. 邻居的邻居列表

```
def get_second_neighbors(graph, node) -> list:
    """
    Returns a list of unique second neighbors for a given node in the graph.
    """
    return [second_neighbor 
            for first_neighbor in graph.neighbors(node)
            for second_neighbor in graph.neighbors(first_neighbor) 
            if second_neighbor != node]) 
```

### 2.共享邻居数

```
def get_num_shared_neighbors(graph, node1, node2) -> int:
    """
    Returns a number of second neighbors shared by node1 and node2 in the graph.
    """
    return len(set.intersection(set(get_second_neighbors(graph, node1)), 
                                set(get_second_neighbors(graph, node2)))) 
```

我希望*列表理解*使它*优雅*且易于理解。

# postgresql - 使用 SELECT 结果多次调用 PL/pgSQL 函数

> ID：11174124
> 
> 赞同：2
> 
> 时间：2012-06-24T00:39:00.277
> 
> 标签：postgresql, postgresql-8.4

我有一个 PL/pgSQL 函数，它需要一个输入参数，它是它工作的表的主键。我这样称呼它：

```
select myFunction('0001'); 
```

`'0001'`然后它对特定表标识的行中的数据进行一些计算并执行`UPDATE`.

如何为查询返回的每个主键重复调用该函数？类似于以下内容：

```
select myFunction(select ID from theTable); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T00:54:09.797

也许您应该按如下方式调用该函数：

```
select myfunction(id) from thetable; 
```

`id`是表的pk。

# javascript - 将参数传递给主干中的事件

> ID：11174125
> 
> 赞同：14
> 
> 时间：2012-06-24T00:39:16.210
> 
> 标签：javascript, events, backbone.js, backbone-events

首先，我进行了一些搜索，但在 stackoverflow/google 上没有任何答案为我提供了我想要的东西。

这是我的代码片段：

```
//in the view
this.collection.on("add",triggerthis)
this.collection.add(predefinedModel)
triggerthis: function(a, b, c, d){
    //etc.
} 
```

基本上，我希望能够在 add 上传递参数并在 triggerthis 中接收参数。这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-24T01:49:19.817

如果不使用未记录的功能，您将无法以您想要的方式执行此操作。

如果我们看一下[`Collection#add`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L598)，我们会看到：

```
add: function(models, options) {
  //...
  for (i = 0, l = add.length; i < l; i++) {
    (model = add[i]).trigger('add', model, this, options);
  }
  //...
} 
```

注意 的第四个参数`trigger`。如果我们查看文档化的接口[`trigger`](http://backbonejs.org/#Events-trigger)：

> **扳机** `object.trigger(event, [*args])`
> 
> 触发给定**事件**的回调，或以空格分隔的事件列表。**触发**的后续参数将传递给事件回调。

因此，`add`将调用侦听器，因为`f(model, collection, options)`where`options`与`options`您传递给的内容相同`Collection#add`。结果是，如果你这样做：

```
this.collection.add(predefinedModel, { undocumented: 'arguments' }) 
```

那么你可以在你的回调中这样做：

```
triggerthis: function(model, collection, options) {
    console.log(options.undocumented);
} 
```

演示：http: [//jsfiddle.net/ambiguous/bqWwQ/](http://jsfiddle.net/ambiguous/bqWwQ/)

您当然可以通过`options`这种方式隧道整个数组或对象。

事件的第三个参数`"add"`没有记录（至少我找不到），与文档最接近的是[0.3.3 Changelog 条目](http://backbonejs.org/#changelog)中的注释：

> 无处不在的`options`参数现在作为所有`"change"`事件的最终参数传递。

我不推荐这种方法，但如果你需要它就在那里；您当然需要在您的测试套件中涵盖这一点，并且您需要确保您不使用`options`Backbone 将使用的任何键。

* * *

一种更安全的方法是为模型附加一些额外的属性：

```
model.baggage = { some: 'extra stuff }; 
```

然后在回调中将其剥离：

```
triggerthis: function(model, collection) {
    var baggage = model.baggage;
    delete model.baggage;
    //...
} 
```

演示：http: [//jsfiddle.net/ambiguous/M3UaH/](http://jsfiddle.net/ambiguous/M3UaH/)

您还可以将不同的回调用于不同的目的，或者将您的额外参数作为完整的模型属性传递。

还有[`_.bind`](http://underscorejs.org/#bind)：

```
this.collection.on("add", _.bind(function(collection, model, extra) { ... }, context, collection, model, 'whatever you want')); 
```

但这将从左到右绑定参数，因此您必须指定回调所需的*所有参数。*

演示：http: [//jsfiddle.net/ambiguous/jUpJz/](http://jsfiddle.net/ambiguous/jUpJz/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T01:42:55.593

如果传递给函数的值始终相同，则可以使用（或本机，如果可用）[部分应用它](http://en.wikipedia.org/wiki/Partial_application)`_.bind``Function.bind`

例如，您将处理程序绑定到的位置`add`（假设`triggerThis`是您视图中的方法）：

```
this.collection.on('add', _.bind(this.triggerThis, this, a, b, c, d)); 
```

的定义`triggerThis`：

```
triggerThis: function(a, b, c, d /*, model, collection, options - if you need them*/) {
  ...
} 
```

如果要将参数传递给*单个*add 调用，可以使用第二个`options`参数`add`，然后在事件处理程序中处理它。

例如

```
this.collection.on('add', this.triggerThis, this);
this.collection.add(model, {
  someCustomValue: 'hello';
}); 
```

然后在您的处理程序中：

```
triggerThis: function(model, collection, options) {
  var val = options.someCustomValue;
  ...
} 
```

# c++ - 可以使用成员函数来初始化初始化列表中的成员变量吗？

> ID：11174129
> 
> 赞同：36
> 
> 时间：2012-06-24T00:40:30.453
> 
> 标签：c++, initialization-list

好的，成员变量[可用于](https://stackoverflow.com/questions/10720377/can-member-variables-be-used-to-initialize-other-members-in-an-initialization-li)初始化初始化列表中的其他成员变量（注意初始化顺序等）。成员函数呢？具体来说，这个片段是否符合 C++ 标准？

```
struct foo{
  foo(const size_t N) : N_(N),  arr_(fill_arr(N)) { 
    //arr_ = fill_arr(N); // or should I fall back to this one?
  }

  std::vector<double> fill_arr(const size_t N){
    std::vector<double> arr(N);
    // fill in the vector somehow
    return arr;
  }

  size_t N_;
  std::vector<double> arr_;
  // other stuff
}; 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-24T02:51:57.770

是的，您在初始化列表中使用成员函数是有效的并且符合标准。

数据成员按照它们的声明顺序进行初始化（这就是为什么它们应该按照它们的声明顺序出现在初始化列表中的原因 - 您在示例中遵循的规则）。`N_`首先初始化，您可以将此数据成员传递给`fill_arr`. `fill_arr`在构造函数之前调用，但是因为这个函数不访问未初始化的数据成员（它根本不访问数据成员），所以它的调用被认为是安全的。

以下是 C++ 标准最新草案 (N3242=11-0012) 中的一些相关例外：

> § 12.6.2.13：可以为正在构造的对象调用成员函数（包括虚拟成员函数，10.3）。（...）但是，如果这些操作是在 ctor-initializer 中执行的（或在直接或间接调用的函数中）来自 ctor-initializer) 在基类的所有 mem-initializer 完成之前，操作的结果是未定义的。例子：

```
class A { public:    A(int); };

class B : public A {
   int j;
public:
   int f();
   B() : A(f()), // undefined: calls member function
                 // but base A not yet initialized
   j(f()) { }    // well-defined: bases are all initialized
};

class C {
public:
   C(int);
};

class D : public B, C {
   int i;
public:
   D() : C(f()), // undefined: calls member function
                 // but base C not yet initialized
   i(f()) { } // well-defined: bases are all initialized
}; 
```

> §12.7.1：对于具有非平凡构造函数的对象，在构造函数开始执行之前引用对象的任何非静态成员或基类会导致未定义的行为。例子

```
struct W { int j; };
struct X : public virtual W { };
struct Y {
   int *p;
   X x;
   Y() : p(&x.j) { // undefined, x is not yet constructed
   }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T00:59:51.483

**初始化初始化列表中的对象时，该对象尚未完全构造。**
如果这些函数试图访问尚未构造的对象部分，那么这是未定义的行为，否则很好。
看到[这个答案](https://stackoverflow.com/a/3899583/981787)。

# ios - iOS 5 JSON 解析导致 Cocoa 错误 3840

> ID：11174130
> 
> 赞同：30
> 
> 时间：2012-06-24T00:40:31.063
> 
> 标签：ios, xcode, json, ios5.1

我很难在 iOS 5 上解析下面的 JSON 字符串。

```
{"States": [{"Name": "Arizona","Cities": [{"Name": "Phoenix"}]},{"Name": "California","Cities": [{"Name": "Orange County"},{"Name": "Riverside"},{"Name": "San Diego"},{"Name": "San Francisco"}]},{"Name": "Nevada","Cities": [{"Name": "Las Vegas"}]}]} 
```

这是我的代码：

```
- (void) parseJson {
NSError *jsonError = nil;
NSData *jsonData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Locations-JSON" ofType:@"rtf"]];

if (jsonData) {
    NSDictionary *jsonObjects = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&jsonError];

    if (jsonError) {
        NSLog(@"JSON Error: %@", [jsonError localizedDescription]);

        return;
    }

    NSLog(@"%@", jsonObjects);
}
} 
```

我不断收到此错误：

`JSON Error: The operation couldn’t be completed. (Cocoa error 3840.)`

我很感激这方面的一些帮助，因为我显然无法解决这个问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-24T00:50:48.380

让我觉得不正确的一件事是：

```
[[NSBundle mainBundle] pathForResource:@"Locations-JSON" ofType:@"rtf"] 
```

你的数据是一个RTF文件？？它应该是一个`txt`文件（或任何其他类型的纯文本文件）。RTF 文件通常包含文本格式数据，如下所示：

```
{\rtf1\ansi\ansicpg1252\cocoartf1138\cocoasubrtf470
{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
\margl1440\margr1440\vieww10800\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural

\f0\fs24 \cf0 \{"States": [\{"Name": "Arizona","Cities": [\{"Name": "Phoenix"\}]\},\{"Name": "California","Cities": [\{"Name": "Orange County"\},\{"Name": "Riverside"\},\{"Name": "San Diego"\},\{"Name": "San Francisco"\}]\},\{"Name": "Nevada","Cities": [\{"Name": "Las Vegas"\}]\}]\}} 
```

*当我将其*作为数据读入并尝试将其解析为 JSON 时，我收到了您所看到的 3840 错误。该错误的描述说：

> 数据已损坏，无法读取。（字符 2 周围的对象中没有值的字符串键。）

所以在我看来，你实际上并没有 JSON。你有 RTF 数据。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-28T15:01:32.923

我遇到了类似的问题。当我从服务器下载 JSON 数据时，我的 JSON 解析器会间歇性地工作。您是否从该函数中获取了 JSON 数据？

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

此函数返回的 NSData 可能是部分数据。您需要将数据附加到类型为：NSMutableData 的实例变量。然后您在另一个函数中处理您的 JSON，如下所示：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

阅读本文了解详情。这个对我有用

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-10-06T06:51:10.013

我能够通过将`NSData`对象转换为以下内容来解决我的 JSON 3840 错误`NSString`：

```
NSError *error;

NSObject *object = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

if (object == nil) {
    NSString *serverResponse = [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding];

    NSLog(@"\n\nError:\n%@\n\nServer Response:\n%@\n\nCrash:", error.description, serverResponse);
    [NSException raise:@"Invalid Data" format:@"Unable to process web server response."];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T00:25:14.927

如果您是因为 JSON 而不是因为 RTF 而来到这里的，请查看这个答案： [IOS JSON Deserialization failure - STIG/NSJSONSerializer](https://stackoverflow.com/questions/11594617/ios-json-deserialization-failure-stig-nsjsonserializer/11596858#11596858)

# c++ - 二叉树数据存储实现

> ID：11174131
> 
> 赞同：1
> 
> 时间：2012-06-24T00:40:33.340
> 
> 标签：c++, database, data-structures, binary-tree

我已经开始在 C++ 中使用二叉树，我必须说我真的很喜欢这个想法，而且事情对我来说很清楚，直到我想到将数据按顺序存储在磁盘上，以便以后我可以立即读取一大块数据。到目前为止，我已将所有内容（节点）存储到内存中......但这只是一个简单而不是现实生活中的应用程序。我对将整个二叉树存储在磁盘上不感兴趣，因为这将再次无用，因为您必须再次将其读回内存！我所追求的是一种方法，例如 MYSQL。我还没有找到任何关于这方面的好文章，所以如果有人包含一些网址或书籍，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:13:57.057

与 b-tree 和 b+tree 的主要区别： - 叶节点被链接以实现快速锁定顺序读取。可以指向升序，可以指向降序，或两者兼而有之（就像我在一个 IBM DB 中看到的那样）

*   你应该把它写在磁盘上，如果表或文件增长，你就会有内存问题。（对文件的搜索操作非常快。您可以在不到 1 秒的时间内在磁盘上创建一个 1 GB 的文件... C# filestream,method .SetFilesize）

*   如果您设法拥有多个读取器/写入器，则需要对索引和表（或文件）进行并发控制....您要在内存中执行此操作吗？如果发生电源故障，你如何回滚？是的，你没有。

IE：字段 f1 已编入索引。

WHERE 1=1（不需要访问b+tree，全部给我，顺序无关）

WHERE 1=1 ORDER BY f1 ASC/DESC（需要访问b+tree，按升序/降序给我）

WHERE f1>=100 （需要访问b+tree，锁定叶子节点=100的位置，并给所有叶子节点项跟随右指针。如果这个过程是多线程读取，它们可能会带有奇怪的顺序，但没有问题...没有 order by in 子句）。

WHERE f1>=100 order by f1 asc （需要访问b+tree，锁定叶子节点=100的位置，并给所有叶子节点项跟随右指针。这个过程不应该是跟随b+tree的多线程，顺其自然.

字段 f2 使用 b+tree 和类型字符串进行索引。

其中 name like '%ODD' （在内部，比较值必须反转并且所有符号都留在末尾 Like 以 'DDO' 开头并以任何结尾。'DDOT' 在组中，因此 'TODD' 必须属于结果！！！！棘手，棘手的逻辑；P）

使用此语句，WHERE 名称如 '%OD%'（中间有 'OD'）。事情变得很热:)))) 在内部，结果是“OD%”的子结果的 UNION，子结果反转了“DO%”。之后，删除开始 'OD' 和结束 'OD' 中间没有 'OD' ，否则它是一个有效的结果（'ODODODODOD' 它是一个有效的结果。无效的结果 'ODABCD' 和 'ABCDOD' ）。

考虑一下我所说的，如果你要做深入的话，请检查更多的事情： - 文件上的 FastIO：C# Filestream no_buffered_flag，打开 wriththought 磁盘标志。- 内存映射文件/内存视图：是的，我们可以根据需要将大文件分成小部分进行操作 - 索引：位图索引、散列索引（散列函数；完美散列函数；散列函数的模糊性）、稀疏索引、密集索引、 b+tree，r-tree，反向索引。- 多线程：锁、互斥体、信号量 - 事务性考虑（日志文件、2 阶段提交；3 阶段提交）；- 锁（数据库、表、页面、记录） - 死锁：3 种杀死它的方法（较长的冲突进程；较年轻的冲突进程；锁定更多对象的进程）。现代 RDBM 混合使用了 3 种方式... - SQL 解析（AST-Tree）。- 缓存经常性查询。- 触发器、过程、视图等。

*   不要在内存中加载所有内容，智能解决方案会根据需要加载部件，并在不再可用时释放。为什么=> 您的数据库引擎（和 PC）使用更少的内存变得更加灵敏。使用 b+tree 锁定分支叶节点只需要 2 个磁盘 IO。知道了锁定值，你就得到了记录长指针。寻找位置的主文件，阅读内容。这太快了。内存更快……是的，但是你能把 10 GB 的 b+tree 放在内存上吗？如果是这样，您的数据库引擎程序如何开始运行？慢慢地？

忘记二叉树和传统的 btree：它们是学术教程。现实生活中，它们被哈希表或 b+trees 取代（B PLUS TREE 显示存储并按升序排列- [http://en.wikipedia.org/wiki/B%2B_tree](http://en.wikipedia.org/wiki/B%2B_tree)）

*   考虑为多个磁盘中的 db 数据使用数据空间。您可以并行化磁盘 IO 性能。不要忘记镜像它们...每个数据空间都应该有一个表片段和一个索引片段，以及一个部分日志文件。您应该开发协调器，它可以明智地呈现子单元的查询。

IE: 3 个数据空间...... INSERT INTO 等......只应该发生在 1 个表空间中。

但是 select * from TB_XPTO，应该呈现给所有数据空间。

select * from TB_XPTO order by a indexed field，应该呈现给所有数据空间。每个数据空间都执行指令，所以现在我们按子顺序有 3 个子集。

结果将在协调器上，在那里将再次对其进行重新排序。混淆，但快！！！！！！

协调者应该控制主事务。

如果数据空间 A 已提交 数据空间 B 已提交 数据空间 C 处于未提交状态，则协调器将回滚 C、B 和 A。

如果数据空间 A 已提交 数据空间 B 已提交 数据空间 C 已提交，则协调器将提交整个事务。

协调器日志：创建主事务 UID 121212，子事务（1111,2222,3333）

数据空间 A LOG 1111 INSERT len 字节数组 1111 INSERT len 字节数组 COMMIT 1111

数据空间 B LOG 2222 INSERT len 字节数组 2222 INSERT len 字节数组 COMMIT 2222

DATA SPACE C LOG 3333 INSERT len byte array 3333 ---> No more nothing.....电源故障在这里！！！！！！！！！

在启动协调器检查数据库是否正确关闭，如果没有，它将检查他的日志文件。好吧，缺少像 COMMIT 121212 这样的主提交行。所以它会查询数据空间的日志一致性。A，B 回复 COMMITED，但 C 在检查了他的日志文件后，检测到失败。回复未提交。Master Coordinator FORCES TABLESPACE A,B,C FOR ROLLBACK 1111,2222,3333 之后，他自己回滚他的主事务并将 DB state=OK。

这里的要点是插入、选择、更新和删除的速度

*   考虑保持指数平衡。索引上的许多删除将使其不平衡。不平衡的索引会降低其性能.... 在索引文件的头部添加一个堆，用于控制它。这里的一些数学会有所帮助。如果删除高于 5% 的记录，则对其进行平衡并重置计数器。如果索引字段的更新结束，也应该计算它。

*   考虑字段索引时要聪明。如果列是 Gender，则只有 2 个选项（我希望，lol.... ops，也可以为空....），位图索引应用得很好。如果一个字段的独特性（我认为我拼写不好）是 100%（所有值都是异构的），就像应用于像 Oracle 那样的字段的序列，或者像 SQL Server 那样的标识字段，那么 b+tree 就可以很好地应用. 如果一个字段是一种几何类型，比如在 Oracle 中，R-Tree 是最好的。对于字符串，反向索引非常适用，如果是异构的，则使用 b+tree。

*   休斯顿，我们有问题.... NULL 值字段，也应该在索引中考虑。它也是一个价值！！！！IE: F1 为空

*   添加一些套接字功能：Async TCP/IP SERVER

- 如果您删除记录，请不要立即调整文件大小。将其标记为已删除。你也应该在这里做一些指标。如果未使用空间 > x 且事务 =0，则执行数据库锁定并重新分配指针，然后调整数据库大小。DB文件上出现了一些空格，你可以尝试做一些页锁而不是数据库锁...事情可以继续进行，没有人受伤....测量DB的最后一个解锁页面，为您锁定它。检查您可以用您的页面填充的已删除页面。未找到，释放锁；如果找到，移动到新位置，修复指针，将旧页面标记为已删除，调整文件大小，释放锁定。为什么这么多手术？保持日志格式良好！！！！您可以将页面拆分为小页面，但会出现碎片（啊……我们失去了速度指挥官？）……这里有 2 个算法。最佳拟合和最差拟合....谷歌搜索。最好的是....

如果你解决了所有这些问题，你可以大声喊出“DAM，我建立了一个数据库......我要命名它为 ORACLE！！！！” ;P

# python - 使用代理从python中的网页下载源代码的最快方法是什么？

> ID：11174132
> 
> 赞同：0
> 
> 时间：2012-06-24T00:40:37.237
> 
> 标签：python, html-parsing, web-scraping, urllib2, scraper

我已经在使用 urllib2 来使用代理获取页面，但是它花费的时间太长了，而且我知道使用代理需要更长的时间，但是如果我在 firefox 或 ie 中测试代理，仍然需要很长时间。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:59:45.440

为了更快地下载页面，无论是否使用代理，您都需要同时执行此操作。尝试 gevent 库。有一个并发下载示例[https://bitbucket.org/denis/gevent/src/tip/examples/concurrent_download.py](https://bitbucket.org/denis/gevent/src/tip/examples/concurrent_download.py)

# mongodb - 从地图中获取密钥并在一个查询中使用它检索数据

> ID：11174137
> 
> 赞同：0
> 
> 时间：2012-06-24T00:41:12.907
> 
> 标签：mongodb

我在 mongo 有两个系列。首先是实际数据：

```
{ "_id" : "internal_key1", "data" : "some data1" }
{ "_id" : "internal_key2", "data" : "some data2" }
{ "_id" : "internal_key3", "data" : "some data3" } 
```

另一个是一些外部服务为我的内部密钥提供的密钥映射：

```
{ "_id" : "ext_key111", "internal" : "internal_key1" }
{ "_id" : "ext_key222", "internal" : "internal_key2" }
{ "_id" : "ext_key333", "internal" : "internal_key3" } 
```

如果我只有外部密钥，我可以通过一个查询以某种方式检索数据（例如，给定“ext_key111”检索“some data1”）吗？当然，不包括类似 eval 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:04:22.610

最简洁的答案是不。

您基本上要求加入，而 MongoDB 明确不允许加入。

*但是*，根据您的要求，您可能能够摆脱以下结构：

```
{ "_id" : "internal_key1", "ext_id": "ext_key111", "data" : "some data1" } 
```

您可以在`ext_id`. 您甚至可以使它看起来与您的数据相匹配的唯一性。

```
db.ensureIndex({ ext_id: 1 }, { unique: true, background: true }) 
```

# bash - 将文本文件从包含 X 的行剪切到包含 Y 的第一行

> ID：11174138
> 
> 赞同：2
> 
> 时间：2012-06-24T00:41:12.757
> 
> 标签：bash, shell, filter, sed, awk

我有许多文本文件，其中包含银行交易。

每个文件都有一个可变长度的自定义标题。

在每个文件中，事务恰好在包含文本的第一（也是唯一）行之后开始：

```
FECHA OPERACION FECHA VALOR CONCEPTO    IMPORTE SALDO 
```

在每个文件中，事务恰好在包含文本的第一（也是唯一）行之前结束：

```
PROCHAIN 
```

“边界”之后的每一行都是一个事务，每行一个事务，直到关闭守卫。

每个文件有一个事务块。

如何仅使用命令行工具方便有效地提取所有事务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T00:46:15.223

```
sed '1,/FECHA/d;/PROCHAIN/,$d' inputfile 
```

# mysql - MySQL 按另一行上的匹配数排序查询响应

> ID：11174141
> 
> 赞同：1
> 
> 时间：2012-06-24T00:41:31.317
> 
> 标签：mysql, select, join

我有两张桌子：

大学 (id) 和 users_colleges (user_id, college_id)

我想选择当前用户没有的所有大学 (user_id != @current_user) 按 user_colleges 表中的匹配数排序，即使它是 0。

我正在尝试但没有成功：

```
SELECT b.id, COUNT(b.id) AS count
FROM (`users_colleges` AS a)
RIGHT JOIN `colleges` AS b ON `b`.`id` = `a`.`college_id`
GROUP BY `b`.`id`
ORDER BY COUNT(b.id) DESC 
```

这是返回所有大学订购的正确方式。问题是计数不匹配的大学返回 1（应该为 0），并且它还返回用户已经拥有的大学。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:43:11.530

您应该计算外部连接的表中的字段。这意味着当连接失败时它不计算 NULL 值。

```
SELECT c.id, COUNT(uc.college_id) AS count
FROM colleges AS c
LEFT JOIN users_colleges AS uc
ON c.id = uc.college_id
GROUP BY c.id
ORDER BY COUNT(uc.college_id) DESC 
```

要不返回用户已经拥有的大学，您可以添加 WHERE 子句：

```
WHERE NOT EXISTS
(
    SELECT *
    FROM users_colleges AS uc2
    WHERE uc2.college_id = c.id
    AND uc2.user_id = '42'
) 
```

# eclipse - 在 FreeBSD 上升级 Eclipse 后 Pydev 丢失

> ID：11174142
> 
> 赞同：1
> 
> 时间：2012-06-24T00:41:43.450
> 
> 标签：eclipse, pydev

我最近在我的 FreeBSD 9.0 发布机器上更新了我的端口，我认为 eclipse 升级是由于上游端口迫使 Eclipse 被重建。现在 Pydev 不见了。我尝试卸载然后重新安装 Eclipse，然后在 Eclipse 中使用 pydev.org/updates 安装 Pydev。它似乎安装正常，但我无法创建 Pydev 项目或使用 Pydev 视图。我尝试删除我的 ~/.eclipse 文件夹以强制创建一个新文件夹，然后重新安装 Eclipse 和 Pydev 无济于事。我究竟做错了什么？我正在运行 Eclipse Indigo 版本 3.7.1 构建 ID：R3_7_1

[这个问题与我的最相似](https://stackoverflow.com/questions/8540050/eclipse-upgrade-killed-pydev)，但解决方案对我不起作用。我还尝试根据 StackOverflow 上的另一个问题将我的安装站点指向：[http](http://update-production-pydev.s3.amazonaws.com/pydev/updates/site.xml) : //update-production-pydev.s3.amazonaws.com/pydev/updates/site.xml，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:58:13.947

经过更多的测试，我终于得到了最新的 FreeBSD 端口来工作。我必须以 root 身份启动和安装插件。我再次运行它时它没有工作，但是，这个[伟大的故障排除文档](http://www.eclipse.org/eclipse/platform-core/documents/3.1/debug.html)有所帮助。我有条不紊地一步一步完成了每一步，日志表明我的 /usr/local/lib 文件试图解压缩时出错。我的用户没有对该目录的写入权限，但 root 有。不知道为什么上次以root运行它没有工作，也许我没有以root安装插件。它现在有效，所以我很高兴。感谢法比奥，您的意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:53:01.237

我不确定 FreeBSD 是如何打包东西的，所以，也许一个简单的出路是从 Eclipse.org 获取 Eclipse 并在全新安装上安装 PyDev（或者如果你也在做 Web 工作，我建议抓住 Aptana Studio 3，预装了 PyDev，所以，你不必担心配置它）。

详见：[http](http://pydev.org/download.html) : //pydev.org/download.html

# node.js - 在 localhost 上使用 client.html 聊天并在线运行 server.js？

> ID：11174147
> 
> 赞同：1
> 
> 时间：2012-06-24T00:42:55.997
> 
> 标签：node.js, localhost, socket.io

我可以创建简单的聊天应用程序，例如 client.html 在我的 localhost 服务器上，server.js 上传到 nodester.com 并在线运行（使用 socket.io）？

例如，如何调整[这个问题](https://stackoverflow.com/questions/6818029/node-js-socket-io-simple-chat)中的简单聊天代码以按照上述方式工作（某些服务器在线上的 server.js 和我的本地主机上的 client.html）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:34:03.717

绝对地。让聊天应用程序在 AWS 上运行，聊天客户端在 localhost 上运行。假设其他人也应该可以。

# android - 点火位置不接收位置更新

> ID：11174152
> 
> 赞同：1
> 
> 时间：2012-06-24T00:43:34.230
> 
> 标签：android, maven, aspectj

我尝试使用[点火位置](https://github.com/kaeppler/ignition/tree/master/ignition-location)在我的活动中获取位置更新。[示例项目](https://github.com/kaeppler/ignition/tree/master/ignition-location/ignition-location-samples)确实有效。到目前为止，我做了以下事情：

1.  将点火位置 apklib 依赖项添加到我的 pom.xml
2.  为类 (@IgnitedLocationActivity()) 和 Location 成员变量 (@IgnitedLocation) 添加了注解
3.  实现的生命周期方法：onCreate、onResume、onPause、onStart、onStop、onDestroy
4.  从示例 pom.xml 添加插件配置
5.  在我的活动中实现 OnIgnatedLocationChangedListener

但是位置不是自动设置的。没有要显示的日志，因为没有调用 onIgnatedLocationChanged()。

据我了解，点火位置的工作原理是通过 aspectj 在构建过程中将某些设置器添加到我的 Activity 中。我的活动似乎没有发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:50:28.410

当我从示例 pom.xml 中删除父项目引用时，示例项目停止工作。所以我知道这与示例项目上方的 pom 有关。

我需要从父 pom 添加以下内容：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>aspectj-maven-plugin</artifactId>
  <version>1.4</version>
  <configuration>
    <aspectLibraries>
      <aspectLibrary>
        <groupId>com.github.ignition</groupId>
        <artifactId>ignition-location</artifactId>
        <type>apklib</type>
      </aspectLibrary>
    </aspectLibraries>
    <source>1.6</source>
  </configuration>
  <executions>
    <execution>
      <phase>process-sources</phase>
      <goals>
        <goal>compile</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

[示例项目pom.xml](https://github.com/kaeppler/ignition/blob/master/ignition-location/ignition-location-samples/pom.xml)中缺少执行。

# php - 在 URL 中加载带有 #id 的网页

> ID：11174157
> 
> 赞同：0
> 
> 时间：2012-06-24T00:44:59.157
> 
> 标签：php, html

我正在开发一个 Wordpress 博客，其中将提供一个选项，可以从文章标题标签自动创建目录 (TOC)`<H2>` `<H3>` `<H4>`

目录链接从页面内容中的标题标签自动创建...

```
<a href="#item1">TOC Item 1</a>

<a href="#item2">TOC Item 2</a>

<a href="#item3">TOC Item 3</a> 
```

页面中这些链接的目标...

```
<h2 id="item1">TOC Item 1</h2>

<h2 id="item2">TOC Item 2</h2>

<h2 id="item3">TOC Item 3</h2> 
```

我的问题是我正在处理的主题有一个围绕`50`像素的固定标题。因此，当您单击目录中的链接以转到其目标 id 时，由于 50 像素的标题，该项目被隐藏。

我希望找到一个解决方案，以便我可以使链接转到页面上的某个位置，该位置在页面中始终比实际目标 ID 高 50 像素左右。

关于解决方案的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:46:21.767

像这样的东西会起作用：

```
<h2><span style="position: absolute; margin-top: -50px;" id="item1"></span>TOC Item 1</h2> 
```

# jquery - 要求在 jQuery Mobile 上有一个不可见的按钮是不是太过分了？

> ID：11174159
> 
> 赞同：0
> 
> 时间：2012-06-24T00:45:45.713
> 
> 标签：jquery, jquery-mobile, cordova

我为此苦苦挣扎了一段时间，所以想我会把答案放在这里。

我怎样才能在 jQM 上有一个不可见的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:45:46.447

使用此标签创建按钮 -

`<input type="[yourchoice, mine was submit]" id="[yourchoice]" data-role="none" />`

关键部分是`data-role="none"`. 这意味着 jQM 会忽略它，因此当您使用 时`$.hide()`，您不会在屏幕上留下随机的空渲染块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:26:14.983

在我的情况下，如果输入被隐藏（如果没有隐藏 - 它可以工作），我无法通过按“开始”按钮在提交时接收点击事件。我使用 css 解决它：“宽度：1 像素；高度：1 像素；背景：透明；边框：0；”。可能它也对某人有帮助。

# sql - 从 SQL 表中查找第一个待处理事件

> ID：11174161
> 
> 赞同：0
> 
> 时间：2012-06-24T00:45:50.090
> 
> 标签：sql, sqlite

我有一个包含电视指南数据的表。

在简化形式中，列如下所示...

```
_id, title, start_time, end_time, channel_id 
```

我想要做的是创建一个现在/下一个格式的电视节目列表。生成“现在”列表（当前正在广播的内容）很容易，但试图获取显示“下一个”的列表会给我带来问题。

我试过这个...

```
SELECT * from TV_GUIDE where start_time >= datetime('now') GROUP BY channel_id 
```

果然，这为每台电视提供了一个电视节目，但它为我提供了表格`channel_id`中的最后一个节目（按日期/时间） 。`TV_GUIDE`

SQL 不是我的强项，我正在努力找出为什么只返回最后的电视节目。看来我需要做一个查询的子查询（或子查询的查询）。我尝试了 and 的组合，`ORDER BY`但`LIMIT`它们没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:03:18.017

我相信您首先必须根据您的标准从 TV_GUIDE 中选择情侣 (channel_id, )。然后，您将显示符合这些条件的 TV_GUIDE 记录：

```
SELECT source.* from TV_GUIDE AS source
JOIN (SELECT channel_id, MIN(start_time) AS start_time
    FROM TV_GUIDE
    WHERE start_time >=  now() GROUP BY channel_id ) AS start_times
ON (source.channel_id = start_times.channel_id 
    AND source.start_time = start_times.start_time)
ORDER BY channel_id; 
```

这首先选择具有最短开始时间的所有节目，每个频道一个，从而为您提供频道 ID 和开始时间。然后从同一个表的 JOIN 中填写其他信息（MySQL 有时允许您从单个查询中检索该信息，但我觉得获取它是一个坏习惯 - 也许您添加了一个字段，它不再起作用）。

您可能希望在组合字段（start_time、channel_id）上添加索引。为了安全起见，将其设为唯一索引。

# php - 使用 PHP & Linux 从 PDF 文件中提取绘制的路径

> ID：11174165
> 
> 赞同：1
> 
> 时间：2012-06-24T00:46:30.110
> 
> 标签：php, linux, pdf, plugins

我正在寻找可以从图形 PDF 中提取（和删除）绘制路径的解决方案/API（即像 PDFLib）。例如，描绘在 Illustrator 或 Indesign 中绘制的图片或徽标的路径（不是 JPG 剪切路径），设置为特定专色（即“CutContour”）。我需要获取构成该路径的数据以提取用于切割系统。

虽然 PDFLib 可以提取文本，但它不能提取图形元素。我什至对 PHP 之外的解决方案持开放态度！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:49:22.440

我找不到任何 php pdf 解析器，但是...

如果您不反对使用替代语言，我发现了一个可以解析 pdf 文件的 ruby​​ gem。从文档看来，您可以获取文件对象的哈希值。

[http://rubygems.org/gems/pdf-reader](http://rubygems.org/gems/pdf-reader)

如果您正在寻找一种可能有效但似乎很困难的纯编程解决方案。

否则，我知道您可以在 Adob​​e Illustrator 中打开 pdf 文件并以这种方式提取图形。你甚至可以编写一些 javascripts 来自动化这个过程。不过，这个解决方案显然不适用于 linux。

# javascript - 单击具有特定值的锚点时运行 jQuery 函数

> ID：11174166
> 
> 赞同：1
> 
> 时间：2012-06-24T00:46:30.223
> 
> 标签：javascript, jquery, anchor

我想要一个函数在单击具有 `value="frb" 的特定锚点时运行。

这是锚

```
<a href="<?php echo $l1; ?>" value="frb" class="button">Accept</a> 
```

这是我尝试过的：

```
$('body').on('click', value[frb], function(e) {
    e.preventDefault();
}); 
```

这不起作用，我找不到任何使用它的例子，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:29:11.033

`value`不是锚标记的有效属性。取而代之的是，您可以使用`data-value`如下：

***HTML***

```
<a href="<?php echo $l1; ?>" data-value="frb" class="button">Accept</a> 
```

***jQuery***

```
$('body').on('click', 'a[data-value=frb]', function(e) {
    e.preventDefault(); // prevent page reload
    alert( this.href );
}); 
```

**[工作样本](http://jsfiddle.net/vrYNy/2/)**

### 笔记：

[**@Musa**](https://stackoverflow.com/users/1353011/musa)已经提到过`data`属性，但是在他使用的 jQuery 代码片段中`a[value=frb]`，它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T00:53:44.000

的第二个参数[`.on()`](http://api.jquery.com/on/)应该是选择器字符串

```
$('body').on('click', 'a[value=frb]', function(e) {
    e.preventDefault();
}); 
```

同样`a`标签没有 value 属性，您应该使用 data 属性代替

```
<a href="<?php echo $l1; ?>" data-value="frb" class="button">Accept</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T00:49:30.937

尝试这个：

```
$(function(){
    $('a[value=frb]').click(function(e) {
        e.preventDefault();
    });
}); 
```

它将函数分配给具有指定“值”属性的所有锚点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T00:50:44.773

**工作演示** [http://jsfiddle.net/KQy36/](http://jsfiddle.net/KQy36/)

**或** [http://jsfiddle.net/WP7JS/](http://jsfiddle.net/WP7JS/)

接口：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

哦顺便说一句： http: [//www.w3schools.com/tags/tag_a.asp](http://www.w3schools.com/tags/tag_a.asp)（查看有效的`a`标签属性）

Anyhoo，希望这会有所帮助，

**代码**

```
$('a[value="frb"]').on('click', function(e) {
    alert('yeah wha?');
    e.preventDefault();
});​ 
```

**或者**在我下面的另一篇文章中。`:)`

```
$('a').on('click', function(e) {

    if ($(this).attr("value") === "frb") {
        alert('yeah wha? I am frb');
        e.preventDefault();
    } else {

        alert('not frb');
        e.preventDefault();
    }

});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T02:47:11.690

由于链接标签没有 value 属性，我们需要对 html 进行更改：

```
<span class="frb"><a href="<?php echo $l1; ?>" class="button">Accept</a></span> 
```

然后添加这个来注册点击事件。

```
$(document).ready(function(){
  $('span.frb').click(function(e) {
    e.preventDefault();
  });
}); 
```

# javascript - JS后缀操作中的左侧表达式无效？

> ID：11174170
> 
> 赞同：15
> 
> 时间：2012-06-24T00:47:21.533
> 
> 标签：javascript

我正在使用 javascript 并遇到错误。错误是这样的：

后缀操作中的左侧表达式无效。

脚本很长，但我认为这是这个问题。奇怪的是，当我在本地运行它时，它可以工作，但是当它被打包时，使用asset_packager，它失败了。

任何想法为什么我可能会收到此错误？

**更新：**在做了更多研究后，我发现了这个功能。该错误似乎发生在“while”语句之后，我认为它是“++ + a +”。这是一个插件，所以我不想弄乱代码......但你认为这可能是它吗？

```
m.getInternetExplorerMajorVersion = function() {
            var a = m.getInternetExplorerMajorVersion.cached = typeof m.getInternetExplorerMajorVersion.cached != "undefined" ? m.getInternetExplorerMajorVersion.cached : function() {
                var a = 3, b = d.createElement("div"), c = b.getElementsByTagName("i");
                while ((b.innerHTML = "<!--[if gt IE "++ + a + "]><i></i><![endif]-->") && c[0])
Uncaught ReferenceError: Invalid left-hand side expression in postfix operation
                    ;
                return a > 4 ? a : !1
            }();
            return a
        } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-11T13:33:51.160

你没有说是哪个插件，但我正在处理同样的问题，杰弗里，我认为是同一个插件，因为我的代码看起来几乎一样。

我听从了你的引导。该插件是 History.js，来自页面： [https](https://github.com/browserstate/History.js/) ://github.com/browserstate/History.js/ ，我使用的是捆绑的 html4+html5 版本，该版本已最小化。

我改变了那个片段

```
innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->" 
```

进入

```
innerHTML="<!--[if gt IE "+ (++a)+"]><i></i><![endif]-->" 
```

它完成了这项工作！

我开始怀疑到底是什么问题。最重要的嫌疑人当然是缩小“压缩”。在正常情况下，以下代码是正确的

```
var a=0; "begining of string "+ ++a+" the rest of string"; 
```

并返回`"begining of string 1 the rest of string"`

然而，缩小消除了空白并将其变成了浏览器可以理解的内容：

```
var a=0;"begining of string "+++a+" the rest of string"; 
```

是什么给了我们错误`Uncaught ReferenceError: Invalid left-hand side expression in postfix operation`

编辑：正如[Sam](https://stackoverflow.com/users/822138/sam)指出的，问题是由缩小引起的，而不是 gzip 压缩，当然:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-24T03:41:08.697

此错误是对一个`++`或非`--`引用的引用，例如返回值。问题出在代码中的其他地方。

# android - Android SQLite：从表中检索值时调用 getColumnIndex 是一种好习惯吗？

> ID：11174171
> 
> 赞同：1
> 
> 时间：2012-06-24T00:47:30.277
> 
> 标签：android, android-cursor, android-sqlite

现在，我的代码如下所示：

**SqlTables.java：**

```
// Separate file
public enum SqlTables {
    TABLE_1("table_1"),
    .
    .
    .
    TABLE_N("table_n");
    final String name;
    private SqlTables(String name) {
        this.name = name;
    }
} 
```

**Table1Columns.java：**

```
// Separate file
public enum Table1Columns {
    ...
} 
```

**SqlDatabaseInterface.java：**

```
Cursor c = db.query(SqlTables.TABLE_1.toString(), null...);
final int indexId = c.getColumnIndexOrThrow(
        Table1Columns.ID.toString());
final int indexName = c.getColumnIndexOrThrow(
        Table1Columns.NAME.toString());
while (c.moveToNext()) {
    final String id = c.getString(indexId);
    final String name = c.getString(indexName);
} 
```

我没有找到任何关于 Android 如何将列映射到索引的文档，所以虽然我已经确认它是基于查询中列的顺序，但我不能保证这将 100% 有效时间，或者未来的更新将保持这种行为。使用的好处`getColumnIndexOrThrow(...)`是保证我的索引总是正确的，只要它们引用的列包含在查询中。缺点是，除了乏味之外，它使我的代码更难阅读，并大大增加了我的方法的长度。另一方面，我可以只指定索引而不调用`getColumnsIndexOrThrow`，这会缩短我的代码，但是缺少文档会让人感觉不对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T00:50:23.403

不，您绝对不应该**将**列索引值硬编码到您的代码中。如果这样做，您的数据库将几乎无法管理（因为对表进行更改可能会导致索引值发生更改）。

据我所知，您的代码很难阅读，因为：

1.  您正在通过对`toString()`. 摆脱它们……它们完全是多余的。

2.  您使用的`final`关键字方式太多，它会使您的代码变得混乱。在您可能意外更改变量值的情况下，这应该用作预防措施。这不是那些情况之一......

3.  您正在跨多行传播简单的陈述。只需使用一行，它就会更容易阅读。

也就是说，上述任何编码实践在技术上都没有问题。我只是说，如果您真的关心使您的代码易于阅读，那么您可能希望将它们视为建议。

# python - Python的多处理和内存

> ID：11174172
> 
> 赞同：21
> 
> 时间：2012-06-24T00:47:56.640
> 
> 标签：python, multiprocessing

我正在使用`multiprocessing.imap_unordered`对值列表执行计算：

```
def process_parallel(fnc, some_list):
    pool = multiprocessing.Pool()
    for result in pool.imap_unordered(fnc, some_list):
        for x in result:
            yield x
    pool.terminate() 
```

根据设计，每次调用`fnc`都会返回一个 HUGE 对象。我可以将此类对象的 N 个实例存储在 RAM 中，其中 N ~ cpu_count，但不多（不是数百个）。

现在，使用这个函数会占用太多内存。内存完全用在主进程中，而不是在工人中。

如何`imap_unordered`存储完成的结果？我的意思是工作人员已经返回但尚未传递给用户的结果。我认为它很聪明，只根据需要“懒惰地”计算它们，但显然不是。

看起来因为我不能`process_parallel`足够快地消耗结果，池不断地从`fnc`某个地方排队这些巨大的对象，内部，然后爆炸。有没有办法避免这种情况？以某种方式限制其内部队列？

* * *

我正在使用 Python2.7。干杯。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T10:14:58.273

通过查看相应的源文件 ( ) 可以看到`python2.7/multiprocessing/pool.py`，IMapUnorderedIterator 使用一个`collections.deque`实例来存储结果。如果有一个新项目进来，它会在迭代中添加和删除。

正如您所建议的，如果在主线程仍在处理该对象时另一个巨大的对象进入，那么这些对象也将存储在内存中。

你可能会尝试是这样的：

```
it = pool.imap_unordered(fnc, some_list)
for result in it:
    it._cond.acquire()
    for x in result:
        yield x
    it._cond.release() 
```

如果它试图将下一个对象放入双端队列，这应该会导致任务结果接收器线程在处理项目时被阻塞。因此，内存中的巨大对象不应超过两个。如果这适用于您的情况，我不知道；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T00:01:10.700

我能想到的最简单的解决方案是添加一个闭包来包装您的`fnc`函数，该函数将使用信号量来控制一次可以执行的同时作业执行的总数（我假设主进程/线程将增加信号量）。可以根据作业大小和可用内存计算信号量值。

# ruby - 如何构建一个非常基本的 Guard 示例？

> ID：11174175
> 
> 赞同：6
> 
> 时间：2012-06-24T00:48:31.117
> 
> 标签：ruby, guard

[我的目标是使用Guard](http://rubygems.org/gems/guard)构建一个简单的自定义守卫。我的应用程序的 gem install 和 bundler 安装很顺利。我的 Guardfile 包含：

```
notification :growl

guard 'eyeball' do
  watch %r{^app/(.*)}
  watch %r{^config/(.*)}
  watch %r{^lib/(.*)}
end 
```

好的，接下来，我需要告诉 Guard 在比赛发生时该怎么做。但我不知道在哪里做。（在这种情况下，我想观察我的应用程序的更改并运行一些任意代码。假设没有[可用的警卫来满足我的需求](https://github.com/guard/guard/wiki/List-of-available-Guards)。我想自己学习如何去做。）

在真正的“大错特错，看看接下来会出现什么错误”风格中，当我运行时，`guard`我收到以下错误消息：

```
错误：无法加载 'guard/eyeball' 或找到类 Guard::Eyeball
错误：无法加载此类文件 -- 守卫/眼球
错误：无效的Guardfile，原始错误是：
nil:NilClass 的未定义方法“新”
错误：在 Guardfile 中未找到任何保护，请至少添加一个。
Guard 使用 Growl 发送通知。
Guard 现在在 '/Users/my-user-name/dev/my-project-name' 观看

```

所以，这给了我一个提示，我需要创建一个`guard/eyeball.rb`文件。也许？但是我应该如何从文档中知道这一点？

我已经（数次）阅读了非常详细和有用的[Guard README](https://github.com/guard/guard/blob/master/README.md)，但还没有找到一个很好的简单示例来向某人展示如何“只是基础”地编写自己的警卫。出乎意料的是，RailsCast 也没有真正回答我的问题：请参阅[RailsCast #264 Guard](http://railscasts.com/episodes/264-guard?view=asciicast)。

我是否忽略了[Guard README](https://github.com/guard/guard/blob/master/README.md)中的某些内容？你能帮忙或指出一个很好的例子吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T01:01:17.143

甜的！我刚刚在 Guard wiki 上找到了一个 Wiki 页面，标题为[Create a guard](https://github.com/guard/guard/wiki/Create-a-guard) to answer my questions。自述文件中没有提到它，所以我不得不挖掘它。

# haskell - 交互式和编译的 Haskell 之间的不同结果（Project Euler 20）

> ID：11174184
> 
> 赞同：7
> 
> 时间：2012-06-24T00:50:24.727
> 
> 标签：haskell

我在 Project Euler 上做问题 20 - 找到 100 的数字之和！（因素，而不是热情）。

这是我写的程序：

```
import Data.Char

main = print $ sumOfDigits (product [1..100])

sumOfDigits :: Int -> Int
sumOfDigits n = sum $ map digitToInt (show n) 
```

我用它编译`ghc -o p20 p20.hs`并执行它，只`0`在我的命令行上。

困惑的是，我调用`ghci`并运行了以下行：

`sum $ map Data.Char.digitToInt (show (product [1..100]))`

这返回了正确的答案。为什么编译的版本不起作用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T00:52:47.740

原因是类型签名

```
sumOfDigits :: Int -> Int
sumOfDigits n = sum $ map digitToInt (show n) 
```

采用

```
sumOfDigits :: Integer -> Int 
```

你会得到和 GHCi 一样的东西（你想要的）。

`Int`是机器字大小“整数”`Integer`的类型，而 是数学上正确、任意精度的类型`Integers`。

如果你输入

```
:t product [1..100] 
```

进入 GHCi 你会得到类似的东西

```
product [1..100] :: (Enum a, Num a) => a 
```

也就是说，对于具有 Enum 和 Num 类型类实例的任何类型，`product [1..100]`都可以是该类型的值

```
product [1..100] :: Integer 
```

这应该返回，远大于您的机器可能能够在您的机器上表示单词。可能是因为翻车

```
product [1..100] :: Int 
```

将返回 0

鉴于此，您可能会认为

```
sum $ map Data.Char.digitToInt (show (product [1..100])) 
```

不会进行类型检查，因为它有多种可能的不兼容解释。但是，为了可以用作计算器，Haskell 默认`Integer`在这种情况下使用，从而解释你的行为。

出于同样的原因，如果你没有给出`sumOfDigits`明确的类型签名，它会做你想做的，因为最通用的类​​型是

```
sumOfDigits :: Show a => a -> Int 
```

# vim - vim : 如果文件可读

> ID：11174185
> 
> 赞同：1
> 
> 时间：2012-06-24T00:50:27.713
> 
> 标签：vim

我使用此功能为特定扩展加载配置

```
function! LoadSnippets(extension)                                                        
    let file = expand("~/.vim/templates/".a:extension.".snippets.vim")                   
    if filereadable(file)                                                                
        silent! execute 'source '.file                                                   
    endif                                                                                
endfunction  

autocmd BufRead,BufNewFile * silent! call LoadSnippets('%:e') 
```

但从`if`不真实。没有`if`，该功能可以正常工作。

为什么`filereadable`找不到文件？

### 编辑

我尝试

```
fnamemodify(file,':p') 
```

但是是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:50:35.177

在自动命令中，您将*字符串* `'%:e'`传递给您的函数。然后，在你的函数的第一行，这个字符串被连接成 form `"~/.vim/templates/%:e.snippets.vim"`。

此时`%`并`:e`没有对 Vim 有任何特殊意义。它们不会被扩展，`expand()`并且生成的路径永远不会指向可读文件。

直接传递`'%:e'`给`expand()`将起作用，这将解决它：

```
autocmd BufRead,BufNewFile * silent! call LoadSnippets(expand('%:e')) 
```

# php - 为什么mysqli的搜索栏中没有出现成功的结果

> ID：11174191
> 
> 赞同：1
> 
> 时间：2012-06-24T00:51:26.030
> 
> 标签：php, mysqli

我拥有的 Mysqli 代码没有显示成功搜索的结果。该查询在语句方面是正确的，因为这是在 MYSQL 中测试的。但是当尝试使用 mysqli 时，我似乎无法在成功搜索后显示结果。我究竟做错了什么？在进行错误报告时我没有收到任何错误，并且查询中没有拼写错误。我不知道是不是因为查询需要在循环之外，或者我错误地绑定了参数或类似的东西，但是代码曾经在旧的 mysql 代码中工作，但我无法让它在 mysqli 中工作（不能由于我的 PHP 版本，使用 PDO）

应用程序的 URL 在[这里](http://helios.hud.ac.uk/u0867587/Mobile_app/previousquestions.php)。如果您输入“AAD”，它会说它找不到任何结果，而实际上它应该这样做，因为数据库中有 5 行包含术语“AAD”

下面是表单代码：

```
<form action="previousquestions.php" method="get">
      <p>Search: <input type="text" name="questioncontent" value="<?php echo $questioncontent; ?>" onchange="return trim(this)" /></p>
      <p><input id="searchquestion" name="searchQuestion" type="submit" value="Search" /></p>
      </form> 
```

下面是整个 mysqli 代码及其注释

```
//Get terms entered in the textbox    
$questioncontent = (isset($_GET['questioncontent'])) ? $_GET['questioncontent'] : '';

$searchquestion = $questioncontent;
$terms = explode(" ", $searchquestion);

//Start of query      
$questionquery = "
SELECT q.QuestionId, q.QuestionContent, o.OptionType, an.Answer, r.ReplyType,
FROM Answer an 
INNER JOIN Question q ON q.AnswerId = an.AnswerId
JOIN Reply r ON q.ReplyId = r.ReplyId 
JOIN Option_Table o ON q.OptionId = o.OptionId 

WHERE ";

$i=0;
//loop through each term
foreach ($terms as &$each) { 
$each = '%'.$each.'%';    
$i++;         

//if only 1 term entered then perform this LIKE statement       
if ($i == 1){         
$questionquery .= "q.QuestionContent LIKE ? ";     
} else {     
//If more than 1 term then add an OR statement    
$questionquery .= "OR q.QuestionContent LIKE ? ";    
} 
}  
//group terms by terms entered in chronilogical order                
$questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY "; $i = 0; foreach ($terms as $each) {     
$i++;      

//if multiple terms, then display results that contains all terms first, then start displaying other results by knocking off 1 term at a time                    
if ($i != 1)         
$questionquery .= "+";     
$questionquery .= "IF(q.QuestionContent LIKE ? ,1,0)"; 
} 

$questionquery .= " DESC "; 

//bind the parameters by the amount of terms there are      
$types = "";
for($i = 0; $i<sizeof($terms); $i++) {
$types .= "s";
}

//merge the parameters and the terms    
$eachterms = array_merge( array($types), $terms);

//prepare quert    
$stmt=$mysqli->prepare($questionquery);
//in array call all the parameters and its terms      
call_user_func_array(array($stmt, 'bind_param'), $eachterms);
//execute terms 
$stmt->execute();
//bind the result
$stmt->bind_result($dbQuestionContent); 

//display the results of the successful search
$output = "";
$output .= "
<table border='1' id='resulttbl'>
<tr>
<th class='questionth'>Question</th>
</tr>
";
while ($stmt->fetch()) {
$output .= "
<tr>
<td class='questiontd'>{$dbQuestionContent['QuestionContent']}</td>
</tr>";
}
$output .= "        </table>";

echo $output;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:14:21.200

此错误消息的原因`$stmt`是不是[*MySQLi_Stmt*对象](http://php.net/mysqli_stmt)。原因是您传递给`$mysqli->prepare`.

```
"… q.QuestionContent LIKE '%'.$each.'%' " 
```

这会导致类似：

```
… q.QuestionContent LIKE '%'.<value of each>.'%' 
```

这里的问题：`.`不是 MySQL 中的字符串连接运算符（您需要使用`+`），并且`$each`可能不是正确引用的 MySQL 字符串声明，因此它会导致有效的表达式。

除此之外，将数据直接插入到您的语句中，您破坏了使用准备好的语句的主要原因之一：将命令和数据彼此分开，以便数据不会被误解为命令（即 SQL 注入）。

因此，不要直接插入字符串值，`?`而是放置 a 。然后准备语句并将[参数绑定](http://php.net/mysqli_stmt.bind_param)到它以执行：

```
$questionquery = "
SELECT q.QuestionId, q.QuestionContent, o.OptionType, an.Answer, r.ReplyType,
FROM Answer an 
INNER JOIN Question q ON q.AnswerId = an.AnswerId
JOIN Reply r ON q.ReplyId = r.ReplyId 
JOIN Option_Table o ON q.OptionId = o.OptionId 

WHERE ";

$paramTypes = '';
$params = array();
$i=0;
//loop through each term
foreach ($terms as $each) {
    $i++;
    //if only 1 term entered then perform this LIKE statement
    if ($i == 1){
        $questionquery .= "q.QuestionContent LIKE ? ";
    } else {
        //If more than 1 term then add an OR statement
        $questionquery .= "OR q.QuestionContent LIKE ? ";
    }
    $params[] = "%$each%";
    $paramTypes .= "s";
}  
//group terms by terms entered in chronilogical order                
$questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY ";
$i = 0;
foreach ($terms as $each) {
    $i++;
    //if multiple terms, then display results that contains all terms first, then start displaying other results by knocking off 1 term at a time
    if ($i != 1) $questionquery .= "+";
    $questionquery .= "IF(q.QuestionContent LIKE ? ,1,0)";
    $params[] = "%$each%";
    $paramTypes .= "s"
}
$questionquery .= " DESC ";

//prepare query
$stmt=$mysqli->prepare($questionquery);
//bind parameters
call_user_func_array(array($stmt, 'bind_params'), array_merge(array($paramTypes), $params));
//execute query
$stmt->execute(); 
```

哦，又一次：你真的应该看看[全文搜索](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)。它可以使整个手动查询构建过时：

```
… WHERE MATCH (q.QuestionContent) AGAINST ("search terms" IN NATURAL LANGUAGE MODE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:34:27.007

更改语句：

```
$questionquery .= "IF(q.QuestionContent LIKE '%'.$each.'%' ,1,0)";
$questionquery .= "q.QuestionContent LIKE '%'.$each.'%' ";
$questionquery .= "OR q.QuestionContent LIKE '%'.$each.'%' "; 
```

对此（分别）：

```
$questionquery .= "IF(q.QuestionContent LIKE '%" . $each . "%' ,1,0)";
$questionquery .= "q.QuestionContent LIKE '%" . $each . "%' ";
$questionquery .= "OR q.QuestionContent LIKE '%" . $each . "%' "; 
```

另外，我认为您需要为您的`$stmt`变量执行此操作：

```
$stmt = $mysqli->stmt_init();
$stmt->prepare($questionquery);
//execute query
$stmt->execute(); 
```

# ruby-on-rails - 如何使用连接表将数据相互关联？

> ID：11174192
> 
> 赞同：0
> 
> 时间：2012-06-24T00:51:31.997
> 
> 标签：ruby-on-rails, has-many-through

我有三个模型：Lesson、Situation、Fate(join table)。在这个应用程序中，一个情境可以有很多课，一个课可以属于多个情境。

我基本上希望表格看起来像这样。

情况

id.....名字............描述

1 ......订购食物......您进入餐厅并订购食物。

2.....自我介绍。你第一次见到某人并自我介绍。

课

id.......名字............描述............lesson_text

1......订购食物....如何订购食物..等等等等，这就是您订购食物的方式。

2......叫服务员。怎么叫服务员Blah blah blah，这就是你叫服务员的方式

3 支付食物费用 如何支付食物费用等等等等，这就是你支付食物费用的方式。

4 问候一个人 如何问候一个人 Blah blah blah，这就是你问候一个人的方式。

5 问一个问题 如何问一个问题 Blah blah blah，这就是你提问的方式。

命运

情况_id 课程_id 必填

1..................1................是的

1..................2................是的

1..................3................没有

2..................3................是的

2..................4.......是的

2..................5................是的

我已经设置了表格，但我不确定如何将课程与情况联系起来。

这是我的应用程序目前的样子

情况控制器

```
class SituationsController < ApplicationController

  def index
    @situations = Situation.all
  end

  def new
    @situation = Situation.new
  end

  def create
    @situation = Situation.new(params[:situation])
    respond_to do |format|
      if @situation.save
        format.html { redirect_to @situation }
      end
    end
  end

  def show
    @situation = Situation.find(params[:id])
    @lesson = @situation.lessons.new
  end

  def edit
    @situation = Situation.find(params[:id])
  end

  def update
    @situation = Situation.find(params[:id])
    respond_to do |format|
      if @situation.update_attributes(params[:situation])
        format.html { redirect_to @situation }
      end
    end
  end

  def destroy
    @situation = Situation.find(params[:id])
    @situation.destroy
    respond_to do |format|
      format.html { redirect_to situations_path }
    end
  end
end 
```

课程控制器

```
class LessonsController < ApplicationController
  def index
    @lessons = Lesson.all
  end

  def new
    @lesson = Lesson.new
  end

  def create
    @lesson = Lesson.new(params[:lesson])
    respond_to do |format|
      if @lesson.save
        format.html { redirect_to @lesson }
      end
    end
  end

  def show
    @lesson = Lesson.find(params[:id])
  end

  def edit
    @lesson = Lesson.find(params[:id])
  end

  def update
    @lesson = Lesson.find(params[:id])
    respond_to do |format|
      if @lesson.update_attributes(params[:lesson])
        format.html { redirect_to @lesson }
      end
    end
  end

  def destroy
    @lesson = Lesson.find(params[:id])
    @lesson.destroy
    respond_to do |format|
      format.html { redirect_to lessons_path }
    end
  end
end 
```

路线

```
root :to => 'situations#index'

  resources :situations do
    resources :lessons
  end
  resources :difficulties 
```

情况.rb

```
class Situation < ActiveRecord::Base
  attr_accessible :name, :description

  has_many :fates
  has_many :lessons, :through => :fates
end 
```

课程.rb

```
class Lesson < ActiveRecord::Base
  attr_accessible :name, :description, :difficulty_id, :lesson_text

  has_many :fates
  has_many :situations, :through => :fates
end 
```

命运.rb

```
class Fate < ActiveRecord::Base

  belongs_to :lesson
  belongs_to :situation
end 
```

谢谢您的帮助！对于混乱的格式，我真的很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:29:23.050

因此，如果您正在创建一个新情况，并且还想创建与之相关的新课程..

应用程序/模型/situation.rb

```
attr_accessible :name, :description, :difficulty_id, :lesson_text, :lessons_attributes             
accepts_nested_attributes_for :lessons 
```

应用程序/控制器/situations_controller.rb

```
def new
 @situation = Situation.new
 2.times do{@situation.lessons.build}

  respond_to do |format|
   format.html 
  end
 end 
```

应用程序/视图/课程/_form.html.erb

```
<% form_for @situation do |f| %>

  <%= f.text_field :name %>
  <%= f.text_field :description %>

  <%  f.fields_for :situations do |lesson_field| %>  
   <%= lesson_field.text_field :name %>
   <%= lesson_field.text_field :lesson_text %>
  <%  end %>

 <%= f.submit %>
<% end %> 
```

本质上你需要一个嵌套形式（有很多例子）。我在 iPhone 上输入了这个，希望它有效）

# c - 段错误 iPhone 可执行文件

> ID：11174193
> 
> 赞同：2
> 
> 时间：2012-06-24T00:51:34.883
> 
> 标签：c, command-line-interface, segment

当我在我的 iphone 上运行我的 CLI 程序时，我得到一个 Segment fault: 11 错误。我不知道该怎么办，我是C的菜鸟。

```
int main (int argc, const char * argv[])
{
if (argc > 1 && (!strcmp(argv[1],"--help") || !strcmp(argv[1],"-h"))) {

    printf("#### redhai 1.2 ####\n");
    printf("-j Jailbreak\n");
    printf("-i Device info\n");
    printf("-a About\n");
    printf("*END OF HELP*\n");
    printf("####################\n");
    return 0;
}else if (!strcmp(argv[1],"-j")) {
    printf("Coding the jailbreak portion!\n");
    return 0;
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T00:53:48.503

您在`argv[1]`没有首先检查它是否存在的情况下访问。您需要先检查是否`argc > 1`.

```
} else if (argc > 1 && !strcmp(argv[1],"-j")) {
//         ^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:56:10.950

问题在于逻辑。如果小于或等于，您可能会传递`NULL`给。要修复它，请重新排序检查，如下所示：`strcmp``argc``1`

```
int main (int argc, const char * argv[])
{
    if (argc > 1) {
        if (!strcmp(argv[1],"--help") || !strcmp(argv[1],"-h")) {
            printf("#### redhai 1.2 ####\n");
            printf("-j Jailbreak\n");
            printf("-i Device info\n");
            printf("-a About\n");
            printf("*END OF HELP*\n");
            printf("####################\n");
        } else if (!strcmp(argv[1],"-j")) {
            printf("Coding the jailbreak portion!\n");
        }
    }
    return 0;
} 
```

# mobile - 如何在 HTML5 应用程序中利用移动软件键盘上的“开始”或“提交”按钮？

> ID：11174194
> 
> 赞同：7
> 
> 时间：2012-06-24T00:52:21.200
> 
> 标签：mobile, jquery-mobile, cordova

带有软件键盘的移动设备在填写 Web 表单时通常会更改键盘，以允许用户一键提交并避免点击表单的“提交”按钮。

如何从 phonegap/cordova/其他 HTML5 应用程序访问此功能？

我为此苦苦挣扎了一段时间，所以在这里分享答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T00:52:22.217

[Matt Nunes 的这篇](http://blog.mattnunes.com/2012/02/ajax-form-submission-in-phonegap-using-the-soft-keyboard/#comment-253)博客文章告诉我，`type="submit"` `input`应该是表单中的第一个按钮。

一旦您知道这一点，您可能会感到满意，但我想隐藏该按钮 - 当您希望用户使用他们的键盘时为什么要有它？有关如何执行此操作的概述，请查看此相关问题 -[在 jQuery Mobile 上设置不可见按钮是否太过分了？](https://stackoverflow.com/questions/11174159/is-it-too-much-to-ask-to-have-an-invisible-button-on-jquery-mobile)

实际上，当用户点击软键盘上的“开始”按钮时，它会在浏览器中显示为按钮`click`上的a `submit`。所以，

(1) 覆盖默认事件

(2) 利润。

希望这可以帮助某人。

# ruby-on-rails - 在 Rails 中构造一个新对象，它是活动记录关联的一部分

> ID：11174205
> 
> 赞同：0
> 
> 时间：2012-06-24T00:54:08.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这只是一个简单的问题。我试图通过将参数传递给构造函数来在 Rails 中创建一个新对象。但是，当我执行代码时，我得到

```
SQLite3::SQLException: no such column: awards.user_id: SELECT "awards".* FROM "awards"  WHERE "awards"."user_id" = 1 
```

这意味着该对象未正确构造。我应该使用*create*而不是*new*吗？那也行不通。

```
def refresh_awards(user)

new_awards = []

if (user.karma < 40 ) #test award

    a = Award.new(:name => "Nobody Award", :description => "From Jonathan", :category => "Community", :value => 1337, :level => 0, :handle => "nobody_award")
    user.awards.append(a)
    new_awards.append(a)

end

new_awards.each do |a|

    flash[:notice] = "You received the " + a.name + "!"

end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:08:45.630

你添加`has_many :awards`到`User`模型中了吗？你添加`belongs_to :user`到`Award`模型中了吗？您是否将列添加`user_id`到`Award`模型中（使用迁移）？您需要做这三件事才能使用`user.awards`您正在使用的方法。阅读[有关关联的 Rails 指南以](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFUQFjAA&url=http://guides.rubyonrails.org/association_basics.html&ei=RWjmT9mME429iAertYRZ&usg=AFQjCNEiaqyRhMemV_2s_ZqwjTaYdA42bQ&sig2=1XnJTum0xuhqfgrEgwu2_A)获取更多详细信息。

此外，`append`不是 Ruby 方法 - 最接近的方法是`<<`. 你会像这样使用它：

```
a = Award.new(:name => "Nobody Award", :description => "From Jonathan", :category => "Community", :value => 1337, :level => 0, :handle => "nobody_award")
user.awards << a 
```

但是您可以使用以下方法将其整理成一行代码`create`：

```
a = user.awards.create(:name => "Nobody Award", :description => "From Jonathan", :category => "Community", :value => 1337, :level => 0, :handle => "nobody_award") 
```

编辑：要`user_id`在模型中创建列，请`Award`从终端运行以下代码（在您的应用程序目录中）：

```
rails generate migration AddUserIdToAward user_id:integer
rake db:migrate 
```

# bash - Bash 脚本 - 递归复制目录中文件的最新版本

> ID：11174207
> 
> 赞同：1
> 
> 时间：2012-06-24T00:54:15.133
> 
> 标签：bash, unix

下面，我正在尝试查找可能位于多个目录中的文件的最新版本。

示例目录：

```
~inventory/emails/2012/06/InventoryFeed-Activev2.csv    2012/06/05
~inventory/emails/2012/06/InventoryFeed-Activev1.csv    2012/06/03
~inventory/emails/2012/06/InventoryFeed-Activev.csv     2012/06/01 
```

这是 bash 脚本：

```
#!/bin/bash

FILE = $(find ~/inventory/emails/ -name INVENTORYFEED-Active\*.csv | sort -n | tail -1)
#echo $FILE #For Testing

cp $FILE ~/inventory/Feed-active.csv; 
```

我得到的错误是：

```
./inventory.sh: line 5: FILE: command not found 
```

该脚本应按照上面的尝试复制最新文件。

两个问题：

首先，这是实现我想要的最佳方法吗？其次，上面有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T00:59:25.913

`=`它看起来不错，但标志周围有空格。这行不通。尝试：

```
#!/bin/bash

FILE=$(find ~/inventory/emails/ -name INVENTORYFEED-Active\*.csv | sort -n | tail -1)
#echo $FILE #For Testing

cp $FILE ~/inventory/Feed-active.csv; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T01:00:53.023

> ... 上面有什么问题？

变量赋值。您不应该在`=`标志周围放置额外的空格。以下应该有效：

```
FILE=$(find ~/inventory/emails/ -name INVENTORYFEED-Active\*.csv | sort -n | tail -1) 
```

> ...这是实现我想要的最佳方法吗？

可能不是。但最好的方法取决于许多因素。也许无论谁编写这些文件，都可以首先将它们放在正确的位置。您还可以检查文件修改时间，但这也可能会失败......所以只要它适合你，我会说去吧:)

# jquery - 如何使用 jsfiddle 中的最新 jQuery 进行工作 ajax？

> ID：11174212
> 
> 赞同：1
> 
> 时间：2012-06-24T00:55:18.223
> 
> 标签：jquery, jsfiddle

我的[ajax jsfiddle](http://jsfiddle.net/radek/3RhE7/2/)不适用于最新的 jQuery (1.7.2) 但 1.4.x 没问题。使用萤火虫我可以看到响应是正确的，但没有触发成功。

知道如何使它适用于最新的吗？

```
function ajaxcall() {
    $.ajax({
        type: 'post',
        url: '/echo/html/',
        dataType: 'html',
        data: {
            // 'html': button + script,
            'html': "test",
        },
        success: function(data) {
            //alert("ajax finished");
            $('#table').html(data);
        },
        dataType: 'text/html'
    });
} 
```

最终工作版本在[这里](http://jsfiddle.net/radek/3RhE7/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:12:39.687

编辑：

这是一个使用`/echo/html/`jQuery的工作版本`$.ajax()`。

```
$(document).ready(function(){
    var $button = $('#createissue');

    var test = function(){
        $.ajax({
            url: '/echo/html/',
            type: 'post',
            success: show,
            data: {
                delay: 5,
                html: '<table><tr>' +
                    '<th>summary</th><td>This is a summary for an issue</th>'+
                    '<th>reporter</th><td>Christopher Robin</th>'+
                    '<th>assignee</th><td>Jared from Subway</th>'+
                    '<th>securitylevel</th><td>Hands in the air! Everyone is suspect.</th>'+
                    '<th>description</th><td>Something descriptive goes here, I suppose.</th>'+
                    '</tr></table>'
            }
        });
    };

    var show = function(table) {
        console.log(table);       
        $(document.body).append(table);
    };

    $button.click(test);
}); 
```

[http://jsfiddle.net/userdude/YCecC/1/](http://jsfiddle.net/userdude/YCecC/1/)

* * *

我知道我在某个地方有一个，但不幸的是我没有准备好纯 html 版本。

```
var test = function(){
    $.ajax({
        url: '/echo/json/',
        success: show,
        type: 'post',
        data: {
            delay: 5,
            json: JSON.stringify({
                summary: 'This is a summary for an issue',
                reporter: 'Christopher Robin',
                assignee: 'Jared from Subway',
                securitylevel: 'Hands in the air! Everyone is suspect.',
                description: 'Something descriptive goes here, I suppose.'
            })
        }
    });
};

var show = function(json) {
    var $row,
        $cell,
        rows = {};

    $tbody.empty();

    for (field in json) {
        $row = $tr.clone();

        $cell = $td.clone();
        $cell.text(field);

        $row.append($cell);

        $cell = $td.clone();
        $cell.text(json[field]);

        $row.append($cell);

        rows[field] = $row;
    }

    $tbody.append(
        rows.summary,
        rows.securitylevel,
        rows.reporter,
        rows.assignee,
        rows.description
    );

    $table.append($tbody);

    $(document.body).append($table);
}; 
```

[http://jsfiddle.net/userdude/YCecC/](http://jsfiddle.net/userdude/YCecC/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T03:47:55.803

使用`dataType: 'html'`应该这样做

```
function ajaxcall() {
    $.ajax({
        type: 'post',
        url: '/echo/html/',
        dataType: 'html',
        data: {
            // 'html': button + script,
            'html': "test",
        },
        success: function(data) {
            //alert("ajax finished");
            $('#table').html(data);
        },
    });
} 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/XUqTq/)**

希望这可以帮助

# sql - 从 int 到 varchar 的数字

> ID：11174220
> 
> 赞同：1
> 
> 时间：2012-06-24T00:57:47.813
> 
> 标签：sql, database, postgresql

我在 postgresql 数据库中有列。它们是彩票号码。确切地说，长度为四位数。最初，我将列的数据类型设为 int。我插入了所有的彩票号码。在我插入所有数字后，我意识到它把我的零切掉了。例如 0925 是 925。我将数据类型固定为 varchar，但现在我需要弄清楚如何使用相同的数据将其从 int 修复为 varchar。数据长度必须为 4 位。我试图弄清楚有多少问题编号，但我无法编写一个选择语句来告诉我有多少行少于 4 位。

我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T00:59:59.393

> 我试图弄清楚有多少问题编号，但我无法编写一个选择语句来告诉我有多少行少于 4 位。

```
SELECT COUNT(*)
FROM lottery
WHERE char_length(x) < 4 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!1/1fce8/1)

要修复它们，您可能会发现`lpad`有用。请注意，`WHERE`实际上并不需要该子句。

```
UPDATE lottery
SET x = lpad(x, 4, '0') 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!1/7d155/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T01:01:32.790

使用以下格式格式化您的数字[`to_char()`](http://www.postgresql.org/docs/current/interactive/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE)：

```
SELECT to_char(123, 'FM0000'); 
```

您甚至可以将它们保留为整数并在查询中使用表达式。

或者，要将您的列从整数转换回原位文本：

```
ALTER TABLE tbl ALTER column col TYPE text USING to_char(col, 'FM0000'); 
```

由于您似乎已经将数字转换为`varchar`，因此表达式需要额外转换为整数：

```
SELECT to_char(col::int, 'FM0000')
FROM   tbl; 
```

# sql - 在 Excel 中查找 Access 数据库

> ID：11174223
> 
> 赞同：1
> 
> 时间：2012-06-24T00:59:15.270
> 
> 标签：sql, excel, ms-access

我想做一些非常简单的事情：我有一个 Access 数据库，其中一张表将数千个产品 ID 映射到产品信息字段。在 Excel 工作表中，用户可能会在第一列中输入 100 个产品 ID。我需要剩余的列从 Access 数据库中提取相应 ID 的信息。具体来说：

1.  如果我使用 MS-Query，它似乎坚持输出是一个表。我只是希望输出在单个单元格内。最好是涉及 SQL 类型查询的公式。
2.  我不希望自动更新任何值，而是希望仅根据用户需求更新所有列（用户可以通过菜单选择刷新，或者工作表上基于 VBA 的刷新按钮也可以）。

我认为这将是一个简单的用例，但似乎很难找到解决方案。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:17:28.803

在 Excel 中工作，您可以使用 ADO 连接到数据库。对于 Access 和 Excel 2007/2010，您可以：

```
''Reference: Microsoft ActiveX Data Objects x.x Library
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset

''Not the best way to refer to a workbook, but convenient for 
''testing. it is probably best to refer to the workbook by name.
strFile = ActiveWorkbook.FullName

''Connection string for 2007/2010
strCon = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strFile _
    & ";Extended Properties=""Excel 12.0 xml;HDR=Yes;"";"

cn.Open strCon

''In-line connection string for MS Access 
scn = "[;DATABASE=Z:\Docs\Test.accdb]"
''SQL query string
sSQL = "SELECT a.Stuff, b.ID, b.AText FROM [Sheet5$] a " _
& "INNER JOIN " & scn & ".table1 b " _
& "ON a.Stuff = b.AText"
rs.Open sSQL, cn

''Write returned recordset to a worksheet
ActiveWorkbook.Sheets("Sheet7").Cells(1, 1).CopyFromRecordset rs 
```

另一种可能性是从 MS Access 返回单个字段。此示例使用后期绑定，因此您不需要库引用。

```
Dim cn As Object
Dim rs As Object
Dim strFile As String
Dim strCon As String
Dim strSQL As String
Dim s As String
Dim i As Integer, j As Integer

strFile = "z:\docs\test.accdb"

strCon = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strFile

''Late binding, so no reference is needed

Set cn = CreateObject("ADODB.Connection")
Set rs = CreateObject("ADODB.Recordset")

cn.Open strCon

''Select a field based on a numeric reference
strSQL = "SELECT AText " _
       & "FROM Table1 a " _
       & "WHERE ID = " & Sheets("Sheet7").[A1]

rs.Open strSQL, cn, 3, 3

Sheets("Sheet7").[B1] = rs!AText 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:23:35.417

好的，这可能看起来有点冗长 - 创建一个 Excel 表 - 在第一行（从第二列开始）你有字段名，就像你在访问表中一样，在第一列你有所需的键值（例如客户 ID）。当您运行宏时，它会填写找到的内容...

```
Sub RefreshData()
  Const fldNameCol = 2 'the column with the first fieldname in it'
  Dim db, rst As Object

  Set db = DBEngine.workspaces(0).OpenDatabase("C:\path\to\db\name.accdb")
  Set rst = db.openrecordset("myDBTable", dbOpenDynaset)

  Dim rng As Range
  Dim showfields() As Integer
  Dim i, aRow, aCol As Integer

  ReDim showfields(100)
  Set rng = Me.Cells

  aRow = 1 'if you have the fieldnames in the first row'
  aCol = fldNameCol

  '***** remove both '' to speed things up'
  'On Error GoTo ExitRefreshData'
  'Application.ScreenUpdating = False'

  '***** Get Fieldnames from Excel Sheet'
  Do
    For i = 0 To rst.fields.Count - 1
      If rst.fields(i).Name = rng(aRow, aCol).Value Then
        showfields(aCol) = i + 1
        Exit For
      End If
    Next
    aCol = aCol + 1
  Loop Until IsEmpty(rng(aRow, aCol).Value)
  ReDim Preserve showfields(aCol - 1)

  '**** Get Data From Databasetable'
  aRow = 2 'startin in the second row'
  aCol = 1 'key values (ID) are in the first column of the excel sheet'
  Do
    rst.FindFirst "ID =" & CStr(rng(aRow, aCol).Value) 'Replace ID with the name of the key field'
    If Not rst.NoMatch Then
      For i = fldNameCol To UBound(showfields)
        If showfields(i) > 0 Then
          rng(aRow, i).Value = rst.fields(showfields(i) - 1).Value
        End If
      Next
    End If
    aRow = aRow + 1
  Loop Until IsEmpty(rng(aRow, aCol).Value)

ExitRefreshData:
  Application.ScreenUpdating = True
  On Error GoTo 0
End Sub 
```

如果您不希望在 excel 表中使用您的字段名，请将“从 Excel 表中获取字段名”段落替换为：

```
 fieldnames = Split("field1name", "", "", "field3name")
  For j = 0 To UBound(fieldnames) - 1
    For i = 0 To rst.fields.Count - 1
      If rst.fields(i).Name = fieldnames(j) Then
        showfields(j + fldNameCol) = i + 1
        Exit For
      End If
    Next
  Next
  ReDim Preserve showfields(UBound(fieldnames) - 1 + fldNameCol) 
```

并将其添加到顶部

```
dim j as integer
dim fieldnames 
```

# python - 在 django 模板中渲染日期时间对象时出错

> ID：11174225
> 
> 赞同：2
> 
> 时间：2012-06-24T00:59:19.450
> 
> 标签：python, django, datetime

对于博客应用程序，我试图获取所有月份的列表，其中发布了帖子，但在模板中找到了一组错误的月份。我四处寻找，发现了以下结果，

```
>>> date_list = Entry.objects.filter().dates('pub_date','month') 
```

上面的代码，给了我一组正确的月份，

```
>>> date_list[6]
 datetime.datetime(2012, 6, 1, 0, 0, tzinfo=<UTC>) 
```

月份表示六月，但是当使用模板渲染时，月份会减一，即“可能”

```
>>> t = Template("The month is {{ month|date:'m' }}  ")
>>> c = Context({"month": date_list[6]})
>>> t.render(c)
 u'The month is 05  ' 
```

而真正的价值是

```
 >>> date_list[6].month
   6 
```

一切运行良好，除了几个月的这个错误，我错过了一些基本的东西还是 django 模板引擎本身的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:17:30.020

你的时区是什么时候？日期为 UTC，因此 UTC 时间的 2012-06-01 00:00:00 仍然可以是另一个时区的前一天，例如东部的 2012-05-31 20:00:00。

这是相关[文档的链接](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)

# java - 比较直接和非直接 ByteBuffer 的 get/put 操作

> ID：11174231
> 
> 赞同：11
> 
> 时间：2012-06-24T01:00:28.690
> 
> 标签：java, memory, nio, bytebuffer

从非直接字节缓冲区获取/放置是否比从直接字节缓冲区获取/放置更快？

如果我必须从直接字节缓冲区读取/写入，最好先读取/写入线程本地字节数组，然后用字节数组完全更新（写入）直接字节缓冲区？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-24T09:47:15.203

> 从非直接字节缓冲区获取/放置是否比从直接字节缓冲区获取/放置更快？

如果您将堆缓冲区与不使用本机字节顺序的直接缓冲区进行比较（大多数系统是小端，直接 ByteBuffer 的默认值是大端），性能非常相似。

如果您使用本机有序字节缓冲区，则多字节值的性能会显着提高。因为`byte`无论你做什么，它都没有什么区别。

在 HotSpot/OpenJDK 中，ByteBuffer 使用 Unsafe 类，并且许多`native`方法被视为[内在函数](https://wikis.oracle.com/display/HotSpotInternals/PerformanceTechniques)。这是依赖于 JVM 的，并且 AFAIK Android VM 在最近的版本中将其视为内在的。

如果您转储生成的程序集，您可以看到 Unsafe 中的内在函数被转换为一条机器代码指令。即他们没有JNI 调用的开销。

实际上，如果您进行微调，您可能会发现 ByteBuffer getXxxx 或 setXxxx 的大部分时间都花在边界检查上，而不是实际的内存访问。*出于这个原因，当我必须*获得最佳性能时，我仍然直接使用 Unsafe （注意：Oracle 不鼓励这样做）

> 如果我必须从直接字节缓冲区读取/写入，最好先读取/写入线程本地字节数组，然后用字节数组完全更新（写入）直接字节缓冲区？

我不想看到那比什么更好。;) 这听起来很复杂。

通常最简单的解决方案更好更快。

* * *

您可以使用此代码自行测试。

```
public static void main(String... args) {
    ByteBuffer bb1 = ByteBuffer.allocateDirect(256 * 1024).order(ByteOrder.nativeOrder());
    ByteBuffer bb2 = ByteBuffer.allocateDirect(256 * 1024).order(ByteOrder.nativeOrder());
    for (int i = 0; i < 10; i++)
        runTest(bb1, bb2);
}

private static void runTest(ByteBuffer bb1, ByteBuffer bb2) {
    bb1.clear();
    bb2.clear();
    long start = System.nanoTime();
    int count = 0;
    while (bb2.remaining() > 0)
        bb2.putInt(bb1.getInt());
    long time = System.nanoTime() - start;
    int operations = bb1.capacity() / 4 * 2;
    System.out.printf("Each putInt/getInt took an average of %.1f ns%n", (double) time / operations);
} 
```

印刷

```
Each putInt/getInt took an average of 83.9 ns
Each putInt/getInt took an average of 1.4 ns
Each putInt/getInt took an average of 34.7 ns
Each putInt/getInt took an average of 1.3 ns
Each putInt/getInt took an average of 1.2 ns
Each putInt/getInt took an average of 1.3 ns
Each putInt/getInt took an average of 1.2 ns
Each putInt/getInt took an average of 1.2 ns
Each putInt/getInt took an average of 1.2 ns
Each putInt/getInt took an average of 1.2 ns 
```

我很确定 JNI 调用需要超过 1.2 ns 的时间。

* * *

为了证明它不是“JNI”调用，而是它周围的胡言乱语导致了延迟。您可以直接使用 Unsafe 编写相同的循环。

```
public static void main(String... args) {
    ByteBuffer bb1 = ByteBuffer.allocateDirect(256 * 1024).order(ByteOrder.nativeOrder());
    ByteBuffer bb2 = ByteBuffer.allocateDirect(256 * 1024).order(ByteOrder.nativeOrder());
    for (int i = 0; i < 10; i++)
        runTest(bb1, bb2);
}

private static void runTest(ByteBuffer bb1, ByteBuffer bb2) {
    Unsafe unsafe = getTheUnsafe();
    long start = System.nanoTime();
    long addr1 = ((DirectBuffer) bb1).address();
    long addr2 = ((DirectBuffer) bb2).address();
    for (int i = 0, len = Math.min(bb1.capacity(), bb2.capacity()); i < len; i += 4)
        unsafe.putInt(addr1 + i, unsafe.getInt(addr2 + i));
    long time = System.nanoTime() - start;
    int operations = bb1.capacity() / 4 * 2;
    System.out.printf("Each putInt/getInt took an average of %.1f ns%n", (double) time / operations);
}

public static Unsafe getTheUnsafe() {
    try {
        Field theUnsafe = Unsafe.class.getDeclaredField("theUnsafe");
        theUnsafe.setAccessible(true);
        return (Unsafe) theUnsafe.get(null);
    } catch (Exception e) {
        throw new AssertionError(e);
    }
} 
```

印刷

```
Each putInt/getInt took an average of 40.4 ns
Each putInt/getInt took an average of 44.4 ns
Each putInt/getInt took an average of 0.4 ns
Each putInt/getInt took an average of 0.3 ns
Each putInt/getInt took an average of 0.3 ns
Each putInt/getInt took an average of 0.3 ns
Each putInt/getInt took an average of 0.3 ns
Each putInt/getInt took an average of 0.3 ns
Each putInt/getInt took an average of 0.3 ns
Each putInt/getInt took an average of 0.3 ns 
```

因此，您可以看到该`native`调用比您预期的 JNI 调用要快得多。这种延迟的主要原因可能是 L2 缓存速度。;)

全部在 i3 3.3 GHz 上运行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T02:10:39.293

直接缓冲区保存 JNI 中的数据，因此 get() 和 put() 必须跨越 JNI 边界。非直接缓冲区将数据保存在 JVM 领域。

所以：

1.  如果您根本不使用Java 领域的数据，例如只是将一个通道复制到另一个通道，那么直接缓冲区会更快，因为数据根本不必跨越JNI 边界。

2.  相反，如果您在 Java 领域中处理数据，非直接缓冲区会更快。它是否重要取决于有多少数据必须越过 JNI 边界以及每次传输的量。例如，一次从直接缓冲区获取或放置一个字节可能会变得非常昂贵，而一次获取/放置 16384 个字节将大大摊销 JNI 边界成本。

要回答您的第二段，我将使用本地 byte[] 数组，而不是线程本地的，但是如果我在 Java 领域使用数据，我根本不会使用直接字节缓冲区。正如 Javadoc 所说，直接字节缓冲区应该只在它们提供可衡量的性能优势的情况下使用。

# iphone - 使用 NSArray 获取对象的最小值和最大值

> ID：11174235
> 
> 赞同：0
> 
> 时间：2012-06-24T01:01:04.913
> 
> 标签：iphone, ios4, nsarray, ios5

我有一个双对象的 NSArray.... 我目前有一个 for 循环来遍历 NSArray 并对它们进行平均。我正在寻找一种方法来确定 NSArray 中的最小值和最大值，但不知道从哪里开始......下面是我必须获得平均值的当前代码。

```
NSArray *TheArray = [[NSArray alloc] initWithArray:self.fetchedResultsController.fetchedObjects];
    int TotalVisitors = [TheArray count];
    double aveRatingSacore = 0;

for (int i = 0; i < TotalVisitors; i++)
        {
            Visitor *object = [TheArray objectAtIndex:i];
            double two = [object.rating doubleValue];
            aveRatingSacore = aveRatingSacore + two;
        }

        aveRatingSacore = aveRatingSacore/TotalVisitors; 
```

任何帮助、建议或代码将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-24T01:47:53.800

那这个呢？

```
NSArray *fetchedObjects = self.fetchedResultsController.fetchedObjects;
double avg = [[fetchedObjects valueForKeyPath: @"@avg.price"] doubleValue];
double min = [[fetchedObjects valueForKeyPath: @"@min.price"] doubleValue];
double max = [[fetchedObjects valueForKeyPath: @"@max.price"] doubleValue]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T01:12:34.617

```
NSArray *TheArray = [[NSArray alloc] initWithArray:self.fetchedResultsController.fetchedObjects];
int TotalVisitors = [TheArray count];
double aveRatingSacore = 0;
double minScore = 0;
double maxScore = 0;

for (int i = 0; i < TotalVisitors; i++)
        { 
            Visitor *object = [TheArray objectAtIndex:i];
            double two = [object.rating doubleValue];
            aveRatingSacore = aveRatingSacore + two;
            if (i == 0) {
                minScore = two;
                maxScore = two;
                continue;
            }
            if (two < minScore) {
                 minScore = two;
            }
            if (two > maxScore) {
                 maxScore = two;
            }
        }

aveRatingSacore = aveRatingSacore/TotalVisitors; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T01:19:34.693

设置两个双打，一个用于最小，一个用于最大。然后在每次迭代中，将 each 设置为现有 min/max 和迭代中当前对象的 min/max。

```
double theMin;
double theMax;
BOOL firstTime = YES;
for(Visitor *object in TheArray) {
  if(firstTime) {
    theMin = theMax = [object.rating doubleValue];
    firstTime = NO;
    coninue;
  }
  theMin = fmin(theMin, [object.rating doubleValue]);
  theMax = fmax(theMax, [object.rating doubleValue]);
} 
```

firstTime 位只是为了避免涉及零的误报。

# iphone - ABPersonSetImageData 非常慢

> ID：11174238
> 
> 赞同：1
> 
> 时间：2012-06-24T01:01:30.543
> 
> 标签：iphone, objective-c, abaddressbook

我正在编写一个与 iPhone 通讯录接口的应用程序。

这是我的代码的相关部分（来自`UIImagePickerControllerDelegate`）

```
-(void)imagePickerController:(UIImagePickerController *)picker 
       didFinishPickingImage:(UIImage *)image 
                 editingInfo:(NSDictionary *)editingInfo
{
    ABPersonSetImageData(record, (__bridge CFDataRef)UIImagePNGRepresentation(image), &error);
} 
```

我的应用程序允许您使用相机拍照（使用`UIImagePictureController`），然后将其作为联系人存储在您的通讯录中。

我发现上面的操作会挂起 5-10 秒。1）有更好的方法吗？2）为什么这么慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:15:07.507

[另存为 JPEG](http://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageJPEGRepresentation)：

```
UIImageJPEGRepresentation (UIImage *image, CGFloat compressionQuality); 
```

将比 快[`UIImagePNGRepresentation`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImagePNGRepresentation)，尤其是如果`compressionQuality`设置为低值。但是，这仍然是一个 CPU 密集型过程，因此无法避免等待。

您能做的最好的事情就是显示工作正在完成的消息，这样界面就不会感觉没有响应。使用类似的东西[`SVProgressHUD`](https://github.com/samvermette/SVProgressHUD)来做到这一点。

# emacs - Emacs - 在括号之间选择

> ID：11174242
> 
> 赞同：2
> 
> 时间：2012-06-24T01:02:20.173
> 
> 标签：emacs, elisp, parentheses

我的 .emacs.d 中有以下 defun：

```
;;; http://emacswiki.org/emacs/ParenthesisMatching
(defun goto-match-paren (arg)
  "Go to the matching  if on (){}[], similar to vi style of % "
  (interactive "p")
  ;; first, check for "outside of bracket" positions expected by forward-sexp, etc.
  (cond ((looking-at "[\[\(\{]") (forward-sexp))
        ((looking-back "[\]\)\}]" 1) (backward-sexp))
        ;; now, try to succeed from inside of a bracket
        ((looking-at "[\]\)\}]") (forward-char) (backward-sexp))
        ((looking-back "[\[\(\{]" 1) (backward-char) (forward-sexp))
        (t nil)))

(defun select-in-parens ()
  (interactive)
  (goto-match-paren 1)
  (set-mark (point))) 
```

我最初只有第一个功能。然后我添加了第二个，我打算选择整个 s 表达式。现在，我将其中一个绑定到 M-[，另一个绑定到 M-]。当我去一个paren并按下“goto”键时，它会做我想要的 - 跳到另一个。如果我在那之后点击“选择”键......它会做同样的事情，而不标记区域，然后反复点击它会在括号之间跳转。但是，如果我在那之后执行“goto”，它*确实会*标记该区域，并且反复击中它会跳回并取消标记它。

所以基本上我有我想要的功能......但是颠倒了，我不知道为什么。有人可以解释这里发生了什么，并可能提供解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:50:54.263

也许在移动点之前设置标记？

```
(defun select-in-parens ()
  (interactive)
  (set-mark (point))
  (goto-match-paren 1)) 
```

# cakephp - 我如何禁用 cakephp 测试套件？

> ID：11174247
> 
> 赞同：-1
> 
> 时间：2012-06-24T01:03:22.553
> 
> 标签：cakephp, test-suite

您是否在使用 cakephp 编写的应用程序中测试此 url？

> www.yourCakephpApp.com/test

你会看到这样的页面：

> [http://www.eliteprojects.org/cake/app/webroot/test.php](http://www.eliteprojects.org/cake/app/webroot/test.php)

我如何禁用测试套件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T09:13:03.380

`/yourapp/test.php`您可以通过或访问 CakePHP 的内置测试套件的网络运行器`/test.php`，具体取决于您的服务器配置。`/test`除非您专门添加了这样的路由或目录中命名的文件/路径，否则 Going 应该会给您一个`test`404错误`webroot`。

您可以通过在服务器配置中拒绝访问它或简单地删除文件来禁用 Web 运行器。但是，很少有理由这样做，因为：

1.  CakePHP 开发平台的一个主要部分是其全面的测试支持。这就像使用 CakePHP 并删除烘焙控制台一样。
2.  测试运行程序设计为仅在开发期间可访问。因此，除非您在生产中使用 > 0 的调试模式（您不应该这样做），否则将无法从该 URL 访问 Web 运行器。

最后，如果您是 Cake 新手，**您需要阅读[Cake 食谱](http://book.cakephp.org/2.0/en/contents.html)**。从第一部分开始，一直到博客教程。这将回答您的大部分问题并避免许多常见错误（例如您错误地配置了服务器的 docroot 以及没有正确设置 URL 重写）。

*注意：我将 Cookbook 的部分加粗，因为它是学习 Cake 开发的重要资源，如果您遇到任何问题或有疑问，它是您应该首先咨询的地方。事实上，人们对#cakephp 感到非常恼火，因为新用户提出的基本问题与食谱中已经回答的基本问题相同——尤其是如果您还没有完成博客教程。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T04:00:35.553

它不应该发生。

访问您的主网页后，您似乎正在运行 IIS，并且您的服务器被错误配置为运行 CakePHP 项目。Cake 需要 mod_rewrite 才能工作，但它`htaccess`仅适用于 Apache 服务器。

虽然我不太确定如何做到这一点，但 CakePHP 文档确实告诉了您如何实现这一点。在这里查看这本书：

[http://book.cakephp.org/2.0/en/installation/advanced-installation.html#url-rewrites-on-iis7-windows-hosts](http://book.cakephp.org/2.0/en/installation/advanced-installation.html#url-rewrites-on-iis7-windows-hosts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T01:23:59.157

为什么不能注释掉 test.php 的内容并添加 header("Location: index.php");

??

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T08:53:58.500

`app/webroot/test.php`只需在您的生产环境中删除。

# c - 比较 C 中的两个变量

> ID：11174255
> 
> 赞同：-2
> 
> 时间：2012-06-24T01:04:54.023
> 
> 标签：c, pointers, struct, binaryfiles

我在比较两个变量时遇到了一些麻烦，希望有人能提供帮助。

基本上我所做的是：

```
printf("\n\n +* Introduza o %d Prato:", i + 1);

scanf("%s", &pratos_novo->prato);

ver=verifica_prato(pratos_novo->prato);
  if(ver == 1)
/*PROCESS*/ 
```

当被问到时，我放了 M1，因为它确实存在于 .bin 文件中

函数调用：

```
int verifica_prato(char* p) {

    k = (struct item*) malloc(sizeof(item));
        while((fread(k, 1, sizeof(item), f)) != NULL) {
            if((*k).id == p){
                fclose(f);
                return 1;
            }
        }
    fclose(f);
    return 0;
} 
```

我的目标是在我放 M1 时返回 1。

结构项目：

```
struct item{
    char id[5];
    int ing[10];
    float qtd[10];
}; 
```

问题就在这里 : `(*k).id==p)`，值永远不会相同，我 100% 确定 .bin 文件中确实存在 M1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:12:56.423

当您需要比较字符串时，您正在比较指针。

替换`if((*k).id==p)`为`if( strcmp( (*k).id, p) == 0 )`以比较字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:12:41.683

```
if((*k).id==p) 
```

您只比较两个指针，使用`strcmp`函数比较两个字符串。

# image - 从坐标和强度值创建 3D 图像

> ID：11174256
> 
> 赞同：0
> 
> 时间：2012-06-24T01:05:05.237
> 
> 标签：image, matlab, graphics, 3d

我正在尝试创建一个大小为 1000x1000x1000 的 3D 数组，其中所有元素（对应于体素）为零，然后将 2000 到 2001 范围内的随机值而不是 0 分配给数组中的某些特定元素，最后将其存储为二进制文件。

名为“coord”的数组是我需要为它们分配 3D 数组中的随机值的点的 Nx3 矩阵坐标 (x,y,z)。））

我应该提到坐标矩阵的所有 x,y,z 值都是浮点数：0<=x<=1000 0<=y<=1000 0<=z<=1000

我的目标是以二进制格式（MATLAB 的默认二进制格式除外）导出 3D 矩阵，以便我可以将它与其他程序一起使用。这是我到目前为止所做的：

> ```
> load coord;
> a=coord(:,1);
> b=coord(:,2);
> c=coord(:,3);
> d=rand(1000,1)*2000;
> dd = 0:2:1000;
> [xq,yq,zq] = meshgrid(dd,dd,dd);
> vq = griddata3(a,b,c,d,xq,yq,zq,'nearest');
> h=figure;
> plot3(a,b,c,'ro')
> %=========================================%
> fid=fopen('data.bin','w');
> fwrite(fid,vq,'single');
> fclose(fid); 
> ```

在上面的代码中，a、b 和 c 是每个点的坐标，d 是所需范围的相应强度值。虽然可以创建 3D 网格（使用 meshgrid）然后插入网格点的强度值（使用 griddata3），但最终结果 (vq) 不会是实际点 (ai,bi,ci) 和相应的强度，而是一组对可视化非常有用的插值点（例如，如果您想拟合适合实际数据的 3D 表面）。我只是想找到一种将实际数据点及其强度存储到文件中并将其导出的方法。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:44:17.000

如果您想保存到允许导入可视化软件的文件，一系列 Tiff 文件很可能会很方便，即

```
maxValue = 2000; % this is the maximum signal that can possibly occur
                 % according to your code

for z = 1:size(vq,3)
   %# convert slice z to 16 bit
   currentSlice = vq(:,:,z);
   currentSlice = uint16(round(currentSlice/maxValue))
   %# save to file
   imwrite(currentSlice, sprintf('testImg_z%04i.tif',z),'tif');
end 
```

请注意，如果创建尺寸为 1000x1000x1000 的双精度数组，则需要 8GB 的​​连续 RAM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:07:30.990

怎么样：

```
%# 3D array
voxels = zeros([1000 1000 1000]);

%# round points coordinates, and clamp to valid range [1,1000]
load coords
coords = round(coords);
coords = min(max(coords,1),1000);

%# convert to linear indices
idx = sub2ind(size(voxels), coords(:,1), coords(:,2), coords(:,3));

%# random values in the 2000 to 2001 range
v = rand(size(idx)) + 2000;

%# assign those values to the chosen points
voxels(idx) = v; 
```

# python - pylab.scatter 在相同数据上绘制与 excel 不同的图表

> ID：11174263
> 
> 赞同：0
> 
> 时间：2012-06-24T01:07:11.710
> 
> 标签：python, matplotlib

我正在尝试使用 pylab scatter 函数绘制一些数据。我正在使用

```
pylab.scatter(X, Y)
pylab.show() 
```

X 和 Y 是 python 列表，其中每个元素都是 << int >> 数据类型。当我使用上面的方法绘制图表时，我得到一个直线图。但是，当我使用 excel 绘制相同的数据时，它是一个长尾图。正确的分布是长尾。为什么我在使用 pylab 时会得到一条直线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:22:27.157

道歉！该问题与 pylab 无关。

问题是我已将 X 和 Y 初始化为 -

```
X = Y = list() 
```

因此，无论我在列表 Y 中插入什么值，它都与 X 相同。因此是直线。

# android - 如何将我的 Android 应用程序与 Couchbase 服务器同步？

> ID：11174266
> 
> 赞同：4
> 
> 时间：2012-06-24T01:07:16.910
> 
> 标签：android, couchdb, couchbase, ektorp, touchdb

我正在努力区分所有不同的沙发*技术。对于我正在开发的 Android 游戏，我一直在使用 CouchDB 和使用 Couchbase Server 之间摇摆不定，缺乏文档令人沮丧。

**我对技术的理解：**

*   *CouchDB* - 一种非 SQL 数据库，过去几年一直在开发，并使用 RESTful API 进行通信。它已被其主要开发人员放弃，转而使用 Couchbase Server。

*   *Couchbase Server* - 一个大型数据库的企业解决方案，其中低延迟是最重要的。它使用 memcached 将“热”数据保存在内存中，但数据保存在 CouchDB 数据库中。

*   *Couchbase Mobile - CouchDB* **<--Legacy**的移动实现

***   *TouchDB* - CouchDB 的移动实现。

    *   *Ektorp* - 一个允许开发人员与 Java 中的 CouchDB 实例对话和同步的框架。** 

 **我的列表中缺少的是从**Android**（以及最终的 iOS）与**Couchbase Server 通信的框架。**

 **这样的框架存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:47:36.610

我假设您**不**希望Android 上的*Couchbase Server*，而是希望您的 Android 应用程序与某个远程服务器上的*Couchbase Server*实例通信。

*Couchbase Server* 的主要接口**是**memcached，因此任何适用于 Android 的 memcached 库都可以使用。如果需要，任何剩余的 Couch 调用都是简单的 HTTP 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:52:15.357

要将应用程序同步到 Couchbase 服务器，通常是构建在 TouchDB 之上的应用程序，您正在寻找的框架是[Couchbase wiki 中列出的](http://www.couchbase.com/wiki/display/couchbase/Mobile+Syncpoint)Mobile Syncpoint 。这是一项正在进行中的开源工作，但用于开发邮件列表的坐标，以及来自该 wiki 的概念链接。

通常你会在 TouchDB 上使用 Ektorp，然后使用 Mobile Syncpoint 同步到在某个数据中心运行的 Couchbase 服务器。****

# javascript - 如何用其他div的内容改变div的高度

> ID：11174270
> 
> 赞同：0
> 
> 时间：2012-06-24T01:07:35.627
> 
> 标签：javascript, css

我的网站页面中有两个 div 一个在另一个旁边（一个左一个右），我想使用 javascript 将左侧的高度更改为右侧的内容

我试图获得正确 div 的动态高度：

```
function getHeight() {
    var doc = document.getElementById('div.right');

    if (document.all) // ok I.E
    {
        H = doc.currentStyle.height;
    }
    else // ok FF
    {
        H = document.defaultView.getComputedStyle(doc, null).height;
    }
}​ 
```

但我停在这里，因为我不知道如何将 javascript 变量传递给我的样式 CSS 页面，我的意思是我不知道如何自动将此值应用于同一页面中的其他 div（左 div）。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:14:17.757

只需使用

```
document.getElementById('div.left').style.height = H; 
```

编辑

1.  AFAIK，您无法从 javascript 修改外部样式表
2.  div 的高度是在提供、加载文档时还是在加载文档后的任意时间确定的？

我上面建议的代码是这样使用的（我假设你的 IE 代码是正确的）

```
function getHeight() {
    var doc = document.getElementById('div.right');
    if (document.all) // ok I.E
    {
        H = doc.currentStyle.height;
    }
    else // ok FF
    {
        H = document.defaultView.getComputedStyle(doc, null).height;
    }
    document.getElementById('div.left').style.height = H;//✔
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:12:54.493

只是为了帮助人们，我发现了一个很棒的代码，可以使用一点 Jquery 自动更改两个 div 的高度：

```
<script type='text/javascript'>
    $(window).load(function(){
    var lh = $('#div.right').height();
     var rh = $('#div.left').height();
     if (lh >= rh){
    //alert('left : ' + lh);
    $('#div.left').height(lh);
    } else {
    //alert('right : ' + rh);
    $('#div.right').height(rh);
    };
    });
    </script> 
```

它适用于所有导航员。

# android - 安装错误：包含 INSTALL_PARSE_FAILED_MANIFEST_MALFORMED 代码

> ID：11174275
> 
> 赞同：1
> 
> 时间：2012-06-24T01:08:37.077
> 
> 标签：android, android-intent, android-emulator

好的，所以我一直在搜索和搜索，但没有找到任何帮助。当我启动 AVD 时，它说：

```
No Launcher activity found!
The launch will only sync the application package on the device! 
```

一旦模拟器打开，就会出现这种情况。

```
Installation error: INSTALL_PARSE_FAILED_MANIFEST_MALFORMED 
```

我很确定我的 AndroidManifest 是正确的：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mshaw.avanos"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    <activity
        android:name=".AvanosActivity"
        android:label="@string/app_name"
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
        <action android:name="android.intent.action.CALL" />
    </intent-filter>
    </activity>
</application> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:11:08.073

您的`application`和`activity`标签没有关闭`>`。

尝试：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mshaw.avanos"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name">
    <activity
    android:name=".AvanosActivity"
    android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

    <intent-filter>
    <action android:name="android.intent.action.CALL" />
    </intent-filter>
    </activity>
</application> 
```

# php - 在 PHP 中处理大文本文件

> ID：11174278
> 
> 赞同：-4
> 
> 时间：2012-06-24T01:09:35.240
> 
> 标签：php, large-files

如何在 PHP 中处理大文本文件？在 python 中，可以使用生成器并逐行读取文件，而无需将整个文件加载到内存中。PHP中有类似生成器的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:45:19.320

您可以在批处理命令中运行您的 php 脚本...

创建一个新文件（run.bat）右键单击并编辑并将其放入文件中：

```
c:/PHP/php.exe -f .\yourscript.php 
```

将 url 更改`php.exe`为 yourscript.php 到它所在的位置，然后用这个循环真正的文件：

```
<?php
$data=file("the big file.txt");
$lines=count($data);

$x=0;
while($x<=$lines){

print $data[$x]."\n";

sleep(1); //print out new line every 1 sec 

$x++;} 
```

# jquery - 简单的 JQuery 动画队列

> ID：11174281
> 
> 赞同：0
> 
> 时间：2012-06-24T01:10:12.650
> 
> 标签：jquery, jquery-ui

这里有一点帮助来找出运行这段代码的错误：

```
$('p:first').animate({
    height: '+=100px',
    color:'green'
},{
    duration: 'slow',
    easing: 'swing',
    complete: function(){alert('done!');},
    queue: 'false'
}); 
```

我包括下面的插件，但动画不执行。

```
<script type="text/javascript" src="js/jquery.color.js"></script>
<script src="js/jquery-1.7.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="js/jquery-ui-1.8.17.custom.min.js" type="text/javascript" charset="utf-8"></script> 
```

我已经用萤火虫检查过了，也没有出现错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:17:34.933

```
queue: `false` 
```

应该

```
queue: false // without quote 
```

**完整代码**

```
$('p:first').animate({
    height: '+=100px',
    color:'green'
},{
    duration: 'slow',
    easing: 'swing',
    complete: function(){alert('done!');},
    queue: false // without quote
}); 
```

**[演示](http://jsfiddle.net/QStkd/372/)**

### 笔记

`jquer.color`应该包括之后`jquery library`。因此包含顺序应如下所示：

```
<script src="js/jquery-1.7.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="js/jquery.color.js" type="text/javascript" ></script>
<script src="js/jquery-ui-1.8.17.custom.min.js" type="text/javascript" charset="utf-8"></script> 
```

# java - Java 如何以及在何处使用 NullPointerException 初始化变量

> ID：11174285
> 
> 赞同：0
> 
> 时间：2012-06-24T01:10:54.313
> 
> 标签：java, exception

我在收到此错误时遇到问题：

> 线程“主”java.lang.NullPointerException 中的异常
> 
> > 在 com.noxia.Main.startCombat(Main.java:101)
> > 
> > 在 com.noxia.Area1.createArea1Enemy(Area1.java:43)
> > 
> > 在 com.noxia.Main.main(Main.java:30)

我知道我需要初始化变量，因为它们为空，但我似乎无法弄清楚我需要把什么放在哪里。我已将代码最小化以仅显示相关部分，因为遗漏了许多其他变量和方法，但这似乎与问题有关。任何帮助将不胜感激 =)

```
public class Main {
    Player p;
    Enemy e;
    Area1 a1;        

    public static void main(String[] args) {
        Main main = new Main();
        main.a1 = new Area1();            
        main.p = new Player(100);
        //the line directly below this is line 30 where the error occurs
        main.a1.createArea1Enemy(10);
    }

    public void startCombat()
    {
        //the line directly below this is line 101 where the error occurs       
        while (p.getCurrentLife() > 0 & a1.e.getLife() > 0)
        {
            p.playerAttack();
            if (p.getCurrentLife() > 0 & a1.e.getLife() > 0)
            {
                e.enemyAttack();
            }
        }   
    }

public class Player extends Main {
    private int currentLife;

    public int getCurrentLife()
    {
        return currentLife;
    }
    public void setCurrentLife(int cl)
    {
        currentLife = cl;
    }

    public Player(int cl)
    {
        currentLife = cl;
    }

public class Enemy extends Main {
    private int life;

    public int getLife()
    {
        return life;
    }
    public void setLife(int lf)
    {
        life = lf;
    }

    public Enemy (inf lf)
    {
        life = lf;
    }

public class Area1 extends Main {

    public void createArea1Enemy(int enemyCounter)
    {
        while (enemyCounter > 0)
        {
            String[] enemyList = {"Enemy1", "Enemy2"} //code for Enemy2 left out below
            int enemyListLength = enemyList.length; 
            int randomEnemy = (int) (Math.random() * enemyListLength);

            if (enemyList[randomEnemy].equals("Enemy1"))
            {
                Enemy enemy1 = new Enemy("Enemy1", 100);
                //the line directly below this is line 43 where the error occurs
                startCombat();
            }
        enemyCounter--;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T01:22:36.413

简单的答案是你必须`e`在调用之前设置一个敌人`startCombat`。

但更好的方法是删除`e`，并将敌人对象传递给`startCombat`使用方法参数。该`e`字段在概念上是错误的。`Main`要理解错误，请尝试根据对象的状态对它的含义做出连贯的解释。

* * *

显然这是初学者代码......你写的东西有很多不好的地方：

*   类的字段应该用于对象状态，而不是用于将参数值传递给方法。
*   你应该避免编写访问类内部的代码......就像你的 main 方法一样。
*   最佳实践是为外部类创建字段`private`，并定义 getter 和/或 setter 方法（根据需要）以访问/修改它们。
*   您需要学习如何编写带参数的构造函数。
*   您需要正确设计代码。一切扩展都`Main`意味着不会有关于对象“意味着”什么的理性模型。还有一个问题，`Enemy`和的每个实例`Area1`都有自己的 、 和 字段的副本`p`，`e`以及`a1`一大堆不合适的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T01:17:54.197

主要问题是您从不初始化`Enemy e;`. 您创建了一个敌人，但从未将其分配给`this.e`.

更改此行：

```
Enemy enemy1 = new Enemy("Enemy1", 100); 
```

对此：

```
this.e = new Enemy("Enemy1", 100); 
```

您的代码还有许多其他问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T01:18:10.533

了解如何正确编写构造函数。这段代码是*错误*的。

我完全看不出为什么 a `Play`、`Area1`和`Enemy`应该扩展 Main。

# spring - Spring XML 命名空间：如何找到它们背后的实现类？

> ID：11174286
> 
> 赞同：29
> 
> 时间：2012-06-24T01:10:56.637
> 
> 标签：spring, spring-mvc, spring-security

在我的 Spring 3.1 应用程序中，有时我需要更改上下文文件中某些 Spring 命名空间的默认行为。为此，我创建了实现某些接口或扩展 Spring 使用的默认类的自定义类。

但是我发现很难确切知道 Spring 在其命名空间后面使用的那些类是什么！找到它们所需的步骤是什么？

例如，安全命名空间：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:sec="http://www.springframework.org/schema/security"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                           http://www.springframework.org/schema/security 
                           http://www.springframework.org/schema/security/spring-security-3.1.xsd"> 
```

和类似的东西：

```
<sec:http>
    ...
    <sec:logout />
</sec:http> 
```

如何找到“<sec:logout />”命名空间使用了哪些类？我没有通过查看[http://www.springframework.org/schema/security/spring-security-3.1.xsd](http://www.springframework.org/schema/security/spring-security-3.1.xsd)找到信息！

我应该去哪里看？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-24T09:05:26.737

每个 Spring 命名空间都有一个关联的[`NamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/xml/NamespaceHandler.html)实现。命名空间模式映射到 Spring JAR 中各种`spring.schemas`文件中的模式文件（另请参阅[Spring DI applicationContext.xml xsi:schemaLocation 究竟是如何使用的？](https://stackoverflow.com/questions/10768873)）。

XML 模式命名空间也映射到`spring.handlers`文件中的处理程序类（因为每个 Spring JAR 可能会引入不同的命名空间）。为方便起见，这里列出了最常见的命名空间：

# 弹簧芯

*   `aop`-[`AopNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/aop/config/AopNamespaceHandler.html)
*   `c`-[`SimpleConstructorNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/xml/SimpleConstructorNamespaceHandler.html)
*   `cache`-[`CacheNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/cache/config/CacheNamespaceHandler.html)
*   `context`-[`ContextNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/config/ContextNamespaceHandler.html)
*   `jdbc`-[`JdbcNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/config/JdbcNamespaceHandler.html)
*   `jee`-[`JeeNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/ejb/config/JeeNamespaceHandler.html)
*   `jms`-[`JmsNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jms/config/JmsNamespaceHandler.html)
*   `lang`-[`LangNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/scripting/config/LangNamespaceHandler.html)
*   `mvc`-[`MvcNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/config/MvcNamespaceHandler.html)
*   `oxm`-[`OxmNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/oxm/config/OxmNamespaceHandler.html)
*   `p`-[`SimplePropertyNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/xml/SimplePropertyNamespaceHandler.html)
*   `task`-[`TaskNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/scheduling/config/TaskNamespaceHandler.html)
*   `tx`-[`TxNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/config/TxNamespaceHandler.html)
*   `util`-[`UtilNamespaceHandler`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/xml/UtilNamespaceHandler.html)

# 春季安全

*   `security`-[`SecurityNamespaceHandler`](http://static.springsource.org/spring-security/site/docs/2.0.x/apidocs/org/springframework/security/config/SecurityNamespaceHandler.html)
*   `oauth`-[`OAuthSecurityNamespaceHandler`](http://static.springsource.org/spring-security/oauth/apidocs/org/springframework/security/oauth/config/OAuthSecurityNamespaceHandler.html)

# 弹簧集成

*   `int`-[`IntegrationNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/config/xml/IntegrationNamespaceHandler.html)
*   `amqp`-[`AmqpNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/amqp/config/AmqpNamespaceHandler.html)
*   `event`-[`EventNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/event/config/EventNamespaceHandler.html)
*   `feed`-[`FeedNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/feed/config/FeedNamespaceHandler.html)
*   `file`-[`FileNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/file/config/FileNamespaceHandler.html)
*   `ftp`-[`FtpNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/ftp/config/FtpNamespaceHandler.html)
*   `gemfire`-[`GemfireIntegrationNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/gemfire/config/xml/GemfireIntegrationNamespaceHandler.html)
*   `groovy`-[`GroovyNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/groovy/config/GroovyNamespaceHandler.html)
*   `http`-[`HttpNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/http/config/HttpNamespaceHandler.html)
*   `ip`-[`IpNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/ip/config/IpNamespaceHandler.html)
*   `jdbc`-[`JdbcNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/jdbc/config/JdbcNamespaceHandler.html)
*   `jms`-[`JmsNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/jms/config/JmsNamespaceHandler.html)
*   `jmx`-[`JmxNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/jmx/config/JmxNamespaceHandler.html)
*   `mail`-[`MailNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/mail/config/MailNamespaceHandler.html)
*   `redis`-[`RedisNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/redis/config/RedisNamespaceHandler.html)
*   `rmi`-[`RmiNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/rmi/config/RmiNamespaceHandler.html)
*   `script`-[`ScriptNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/scripting/config/jsr223/ScriptNamespaceHandler.html)
*   `security`-[`IntegrationSecurityNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/security/config/IntegrationSecurityNamespaceHandler.html)
*   `sftp`-[`SftpNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/sftp/config/SftpNamespaceHandler.html)
*   `stream`-[`StreamNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/stream/config/StreamNamespaceHandler.html)
*   `twitter`-[`TwitterNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/twitter/config/TwitterNamespaceHandler.html)
*   `ws`-[`WsNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/ws/config/WsNamespaceHandler.html)
*   `xml`-[`IntegrationXmlNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/xml/config/IntegrationXmlNamespaceHandler.html)
*   `xmpp`-[`XmppNamespaceHandler`](http://static.springsource.org/spring-integration/api/org/springframework/integration/xmpp/config/XmppNamespaceHandler.html)

如果您浏览这些类中的每一个的源代码，您将很快发现`BeanDefinitionParser`负责解析实际 XML 定义的各种实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T02:39:46.560

几乎所有这些都被命名`*BeanDefinitionParser`。第一步是，使用您的浏览器，调出 Spring JavaDocs 并点击`<Ctrl>-F`（或`<Command>-F`）。搜索 BeanDefinitionParser。在匹配的类中，一两个根据它们的名称看起来像是处理您正在研究的命名空间元素。可能需要花一些时间查看这些类的源代码，但您最终会找到您想要的。

或者，在您的 IDE 中，您可以浏览`BeanDefinitionParser.java`并执行“Find Usages”（IntelliJ）或“Type Hierarchy”（Eclipse）来查找该接口的所有实现者。有少数类不遵循`*BeanDefinitionParser`命名约定。您的 IDE 将为您提供一个完整的列表。

我认为 Spring 实际上应该在其参考文档的 Namespace 部分中记录处理每个元素的类的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T02:28:37.047

每个 XML 命名空间都由其[NamespaceHandler](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/xml/NamespaceHandler.html)解析。安全命名空间的处理程序类是[SecurityNamespaceHandler](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/config/SecurityNamespaceHandler.html)，它在 spring-security-config-XXX.jar 文件的 META-INF 内的 spring.handlers 文件中指定。

http 元素由[HttpSecurityBeanDefinitionParser](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/config/http/HttpSecurityBeanDefinitionParser.html)解析，其子元素 logout 由`org.springframework.security.config.http.LogoutBeanDefinitionParser`(package-protected) 解析。

[另请参阅编码 NamespaceHandler](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/extensible-xml.html#extensible-xml-namespacehandler)中的注释和[Spring Security 命名空间注册了哪些 bean？](https://stackoverflow.com/questions/7960170/what-beans-are-registered-by-the-spring-security-namespace)如果您打算自定义它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T03:58:43.617

对于 Spring Security，它有很好的文档记录：参见[附录 B。安全命名空间](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-namespace.html)

另请参阅此博客文章：[在 SPRING SECURITY NAMESPACE 背后](http://blog.springsource.org/2010/03/06/behind-the-spring-security-namespace/)

# constructor - 在统一注入对象上指定属性

> ID：11174287
> 
> 赞同：1
> 
> 时间：2012-06-24T01:11:03.337
> 
> 标签：constructor, unity-container, code-injection

我在使用 Unity 时遇到了一个有趣的问题，不胜感激。

我想在构造函数中注入一个对象数组，并且我想在注入期间将每个对象与一个代码相关联。请注意，可以有多个对象具有相同的代码，所以我不能有字典。

我基本上是在尝试将小对象注入到包含对象中，然后包含对象将在必要时使用代码访问这些对象。

我可以使用 KeyValuePair；如果我必须构造一个复合对象（如下所示），我也会找到。我宁愿不做的是预先单独注册代码/对象元素的所有组合。我不介意注册每个注入的对象。

我想做这样的事情（我知道这是无效的）：

```
<register type="IMyObject" mapTo="MySmallObject1" name="SmallObject1" />
<register type="IMyObject" mapTo="MySmallObject2" name="SmallObject2" />
<register type="IMyObject" mapTo="MySmallObject3" name="SmallObject3" />

<register type="ContainingObject1" name="Name1">
  <constructor>
    <param name="objects">
      <array>
        <value>
          <!-- This could resolve to a KeyValuePair or a composite object -->
          <property name="Code" value = "01" />
          <property name="Operation" >
            <dependency name="SmallObject1" />
          </property>
        </value>
        <value>
          <property name="Code" value = "02" />
          <property name="Operation" >
            <dependency name="SmallObject2" />
          </property>
        </value>
      </array>
    </param>
  </constructor>
</register>

<register type="ContainingObject2" name="Name2">
  <constructor>
    <param name="objects">
      <array>
        <value>
          <property name="Code" value = "01" />
          <property name="Operation" >
            <dependency name="SmallObject3" />
          </property>
        </value>
      </array>
    </param>
  </constructor>
</register> 
```

所以在第一个包含的对象中，我注入了两对：代码 01 与 SmallObject1，代码 02 与 SmallObject2。第二，只有一对：代码 01 和 SmallObject3。我知道我可以编写一个自定义类型转换器，它可以采用“01，SmallObject1”形式的字符串，并通过解析代码中的类型名称将其转换为字符串和对象。如果可能的话，我希望避免这种情况，并在配置中控制所有这些。

有任何想法吗？

谢谢！菲尔

# gnuplot - gnuplot 可以生成散点图吗？

> ID：11174289
> 
> 赞同：1
> 
> 时间：2012-06-24T01:11:58.437
> 
> 标签：gnuplot

我想在二维图中显示两个实值分析函数 f,g（两个实变量 x,y）的图像。即我想采样 (x,y) 并使 gnuplot 在每个采样点的二维 f,g 平面中显示一个点 (f(x,y),g(x,y))。当然，我可以在外部程序中采样 (x,y) 并输出一个 2 列数据文件来生成这个图。它甚至不需要更多的努力来做到这一点。我之所以问，主要是因为 gnuplot 可能有内置例程来以比等间距的二维网格更聪明的方式对 (x,y) 进行采样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:59:22.830

这取决于您希望如何改变 x 和 y。我想，如果你正在做一个散点图，它可能并不重要。如果我正确理解您的问题，您可以相对轻松地做到这一点。

```
set parametric

#view from inifity on the z-axis
set view map

#example functions
f(x,y)=sin(x)*cos(y)
g(x,y)=cos(x)*sin(y)

splot f(u,v),g(u,v),0 w points 
```

但是，这只会在均匀间隔的 x 和 y 处采样。如果您想要一些更聪明/更复杂的东西，您可以编写另一个函数来将 x 转换为您想要的 x 的任何其他函数 - 例如：

```
X(x)=x**2
f(x,y)=sin(X(x))*cos(y)
... 
```

# c++ - 仿函数和初始化器列表的副本

> ID：11174293
> 
> 赞同：4
> 
> 时间：2012-06-24T01:12:24.610
> 
> 标签：c++, gcc, c++11, functor, initializer-list

我对复制仿函数和/或初始化程序时会发生什么感到有些困惑。在下面的代码中，我认为我会一直复制/移动对象，但不管它是 Segfaults。我似乎做错了什么，但还没有弄清楚我的错误假设是什么。奇怪的是，在*cppreference.com*我找不到复制或移动构造函数，`initializer_list`所以我想知道在这些情况下实际发生了什么。

```
#include <string>
#include <vector>
#include <functional>
#include <iostream>

std::initializer_list<std::function<std::string()>> getInitializer() {
  return {
    []() -> std::string {
      return "If";
    }
  };
}

int main() {
    std::function<int(std::string)> func;
    {
        auto init = getInitializer();

        func = [init](std::string text) -> int {
            std::vector<std::function<std::string()>> vec(init);

            for( auto& el : vec ) {
                std::cout << el();
            }
            std::cout << text << std::endl;
            return 5;
        };
    }

    return func(" you see this - the world is all right!");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T01:41:43.150

我对 s 没有太多经验`initializer_list`，但标准似乎建议 an 的实现`initializer_list`就好像它是一对指向数组的指针。at 的列表`getInitializer`具有*自动生命周期*，支持它的数组也是如此。您最终会返回一对指向不再存在的数组的指针。

标准的相关部分是 8.5.4 [decl.init.list] 第 5 和 6 项：

> 5.-`std::initializer_list<E>`从初始化列表构造一个类型的对象，就好像实现分配了一个由 N 个类型元素组成的数组*，*其中`E`N*是*初始化列表中的元素数。该数组的每个元素都使用初始值设定项列表的相应元素进行复制初始化，并且`std::initializer_list<E>`构造对象以引用该数组。如果需要进行窄化转换来初始化任何元素，则程序格式错误。
> 
> 6.- 数组的生命周期与对象的生命周期相同`initializer_list`。

* * *

因此，对于您的特定情况，实现大致相当于：

```
std::initializer_list<std::function<std::string()>> getInitializer() {
  std::function<std::string()> __a[1] = {
    []() -> std::string {
      return "If";
    }
  };
  return std::initializer_list<std::function<std::string()>>(__a, __a+1);
} 
```

# javascript - 隔离变量值并将单个函数附加到每个变量的函数

> ID：11174301
> 
> 赞同：0
> 
> 时间：2012-06-24T01:14:05.473
> 
> 标签：javascript, jquery, jquery-ui

我有各种触发各种警报消息的锚标签和输入按钮。警报消息已经构建为函数。触发器有不同的类。我创建了单独的脚本来让这些触发器中的每一个触发它们各自的功能。现在我试图通过构建一个函数来简化这个过程，该函数将动态地附加正确的警报消息函数和正确的触发器类。

我创建了一个 allTriggers 变量（如下所示），我可以在其中加载每个触发器的所有类。

```
var allTriggers = $('.firstColumn a, .uploadAttachment, .tabGroup .tab a, .checkForChanges') 
```

不，这是我正在努力的部分。我想构建一个函数，将正确的警报消息（函数）附加到正确的触发器

换句话说...

如果 allTriggers 的值 = 类 .uploadAttachment 的触发器，则执行函数 uploadFunction。

如果 allTriggers 的值 = 类 .firstColumn a 的触发器，则执行函数 removeMessageFunction。

等等。

我想这样做，以便程序员稍后可以进来并根据需要向这个简单的 var 和函数添加触发器和警报，它将填补我已经工作的脚本的其余部分的空白。

我正在处理的功能类似于下面的功能，但这不起作用

```
function popupOKFunction() {
        if (allTriggers == '.firstColumn a') {
                removeMessageFunction ();
        }
        if (allTriggers == '.uploadAttachment') {
                uploadFunction ();
        } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:26:56.237

您可以使用关于 JavaScript 的两个事实：1）一个可以（几乎）使用任何字符串作为对象属性的名称；2）函数是一等公民，可以像（再次 - 几乎）大多数值一样使用。

所以对你有用的不是一个函数——而是一个对象：

```
var controlHandlers = {
  '.firstColumn a': removeMessageFunction,
  '.uploadAttachment': uploadFunction,
  ...
}; 
```

...然后您可以使用类似...的内容对其进行迭代

```
for (var selector in controlHandlers) {
   $(selector).click(controlHandlers[selector]);  
} 
```

**更新：**如果您最终决定只使用一个函数，相同的方法将很有用 - 但要显示不同的消息：这些消息将作为参数在此函数中发送。像这样：

```
var controlMessages = {
  '.firstColumn a': "Do not ever touch this link! Ever!",
  '.uploadAttachment': "Now I'm angry!",
};
...
for (var selector in controlMessages) {
  $(selector).click(function() { 
    alertingFunction(controlMessages[selector]);
  });
} 
```

`alertingFunction`在这种情况下，应定义为采用单个参数 - 要显示的消息。

# python - 可以在 Gtk3 应用程序中使用旧的 Gtk2 小部件吗？

> ID：11174304
> 
> 赞同：3
> 
> 时间：2012-06-24T01:14:34.763
> 
> 标签：python, gtk, gtk3

我正在开发一个新界面，但它依赖于仅适用于 Gtk2 的自定义小部件。

有一种方法可以同时使用这两个版本，还是我必须使用 Gtk2 重写我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:55:02.340

这取决于小部件，但是，单个小部件不应该太难移植。大多数时候移植相对容易。他们还一直在开发一个兼容性模块，该模块使一些旧语法能够与 GTK 3 一起使用。查看[https://live.gnome.org/PyGObject/IntrospectionPorting](https://live.gnome.org/PyGObject/IntrospectionPorting)

我通过做一些搜索/替换（像 gtk. 变成 Gtk.、ICON_SIZE_MENU 变成 IconSize.MENU 等）和一些小的调整来移植一些旧的应用程序。

理想情况下，您会在 GTK 3 中继续您的应用程序，并帮助他们将其小部件移植到新的 API。您不会想永远使用 GTK 2。

# c++ - 使用自定义类作为 Q_PROPERTY

> ID：11174307
> 
> 赞同：2
> 
> 时间：2012-06-24T01:16:01.173
> 
> 标签：c++, qt, qobject

我有两个班，`TestA`和`TestB`。`TestA`延伸`QObject`。我已经设置了一些`Q_PROPERTY`这样的。

```
Q_PROPERTY(QString a_string READ getString WRITE setString)
Q_PROPERTY(int a_int READ getInt WRITE setInt) 
```

当然，我还创建了合适的 getter 和 setter。这个类工作得很好。

在我的第二堂课中`TestB`，我想创建一个`Q_PROPERTY`是 a 的`TestA`，所以我在`testb.h`.

```
Q_PROPERTY(TestA testa READ getTestA)
public:
TestA *getTestA();
private:
TestA mTestA; 
```

而这在`testb.cpp`.

```
TestA *TestB::getTestA() {return &mTestA;} 
```

当我尝试编译它时，我收到以下错误消息。

```
moc_testb.cpp: In member function 'virtual int TestB::qt_metacall(QMetaObject::Call, int, void**)':
moc_testb.cpp:75: error: no match for 'operator=' in '*(TestA*)_v = TestB::getTestA()'
../qttest/testa.h:7: note: candidates are: TestA& TestA::operator=(const TestA&) 
```

有人能告诉我我需要做什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:21:27.893

我认为该错误与 READ 操作有关。它导致引用的 QT 函数期望 testa 是 TestA 类型的对象，该对象由函数 getTestA 返回。但是，getTestA 返回一个指向 TestA 类型对象的指针。

我认为您可以通过将 getTestA 的原型更改为 `TestA getTestA();`

并声明如下： `TestA TestB::getTestA() {return mTestA;}`

# php - 从 php 调用 javascript

> ID：11174323
> 
> 赞同：-2
> 
> 时间：2012-06-24T01:20:14.323
> 
> 标签：php, javascript, html

我已经设置了一个覆盖脚本，可以让我显示一个覆盖弹出窗口，可以这么说，它工作得很好，因为我可以通过按钮等调用它......但是我希望能够查看用户是否已经来到页面在他们的标题中存在 subid，如果没有，那么我希望覆盖出现。

这是需要从中调用叠加层的代码

```
 if (isset($_GET['eid'])) {

 if ($_GET['eid'] == ""){
 // CALL THE overlay_choose_house from here
 } else{
     $estate_id = $_GET['eid'];
 }

} 
```

这是被调用的代码

```
<script>
$(document).ready(function(){
$('#overlay_choose_house').bind('click', function(event){
    if (event.target == $('#overlay_choose_house').get(0))
        overlay_choose_house(); 
});
});
</script> 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:28:28.720

一种方法：

```
<script>
    $(document).ready(function(){
        $('#overlay_choose_house').bind('click', function(event){
            if (event.target == $('#overlay_choose_house').get(0))
            overlay_choose_house(); 
        });

        <?php if ($_GET['eid'] == ""){ ?>overlay_choose_house();<?php } ?>

    }); 
```

或者这个，替换：

```
// CALL THE overlay_choose_house from here 
```

和

```
$x = true; 
```

和以前一样：

```
<?php if ($x){ ?>overlay_choose_house();<?php } ?> 
```

# python - 装载夹具时的安全问题

> ID：11174324
> 
> 赞同：1
> 
> 时间：2012-06-24T01:20:27.273
> 
> 标签：python, deployment, fixtures

当新的虚拟机启动时，我需要将固定装置加载到系统中。我已经抛弃了 MongoDB 和 Postgres。但是每当有新机器启动时，我不能只是坐在电脑前。我希望能够只“发出”一个命令或脚本自动执行它。

但是像`pg_dump`转储 PostgreSQL 这样的命令需要密码。问题是，我用来部署这些设备的脚本应该在版本控制之下。包含此密码的文件（如果这是进行自动化的唯一方法）将不会被提交。如果需要提交，则部署存储库仅限内部开发人员使用。

我的问题是……在这种情况下，您认为什么是好的做法？我正在考虑使用 Python`Popen`来发出这些命令。

谢谢。

我也可以把它放在缓存服务器中......但不确定它是否是唯一“更好”的方式......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:30:05.537

无论您要以哪种方式加载数据，您都必须授予加载夹具的用户在数据库上写入的权限。

使用 Postgres，您可以为特定用户授予无需密码的登录权限，并消除共享密码的问题，或者您可以将密码存储在主目录中的 pgpass 文件中。

就我个人而言，我发现fabric 是一个非常好的部署工具，在这种特定情况下，我将使用它连接到远程机器并发出`psql -f 'dump_data.sql' -1`命令。

# php - 仅全文搜索显示 1 个结果

> ID：11174325
> 
> 赞同：-1
> 
> 时间：2012-06-24T01:20:34.527
> 
> 标签：php, mysql, sql, full-text-search

我正在输出搜索查询的结果，但由于某种原因，它不会输出多个结果。可能是因为我累了，但有人发现我犯的错误吗？

我想要做的就是使用搜索栏中输入的单词搜索我的数据库，并找到输入的所有匹配项或接近匹配项。

我错过了什么吗？

```
$search = $_POST['search'];

// We preform a bit of filtering 

$filtered = mysql_real_escape_string($search);

//Select what add to look for.
$ad_type = $_POST[''];

 //Now we search for our search term, in the field the user specified 
 $sql = "SELECT * FROM busadverts WHERE MATCH(advert_name, advert_description, advert_tags) AGAINST('". $filtered ."  IN BOOLEAN MODE')"; 

 $result = mysql_Query($sql) or die(mysql_error());
//And we display the results 

 while($row = mysql_fetch_array( $result )) 
 { 

 $adname = $row['advert_name'];
 $adimage = $row['advert_image'];
 $addesc = $row['advert_description'];
 $adurl = $row['advert_url'];

 $searchresult .= "<div style='width: 800px; height: 200px;'>
<div class='titleBar' style='text-align: center; background: #000; color: #fff;'>"
. $adname . "
</div>
<div class='advertimage' style='width: 150px; height: 150px; float: left; background: #111;text-align: center;'> 
<img src='" . $adimage . "' /> 
</div>
<div class='advertdescription' style='width: 635px; height: 150px; float: left;  background: #222;color: #fff; padding-left: 15px;'>Description: <br />"
. $addesc ." 
<br /><br /> Website link: <a href='" .$adurl."'>" 
. $adurl . "</a>
</div>

</div>"; 

} 

 //This counts the number or results - and if there wasn't any it gives them a little  message explaining that 
$anymatches=mysql_num_rows($result); 
if ($anymatches == 0) 
{ 
echo "Sorry, but we can not find an entry to match your query<br><br>"; 
} 

   mysql_free_result($result); 

//And we remind them what they searched for 
echo "<b>Results: </b> " .$search. "" ; 
echo $searchresult; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:14:15.423

如果您想搜索包含`test`您应该`*`用作通配符的单词的任何内容

```
$sql = "SELECT * FROM busadverts WHERE MATCH(advert_name, advert_description, advert_tags) AGAINST('*". $filtered ."*'  IN BOOLEAN MODE)"; 
```

此外，看起来您的`'`撇号在该`Against`部分中已关闭。

# matlab - Matlab 绘制 XTickLabel 有效字符串

> ID：11174326
> 
> 赞同：2
> 
> 时间：2012-06-24T01:20:41.860
> 
> 标签：matlab, plot

我有一个情节：

```
x = [0 1 2 3];
y = [0 0 1 1];

plot (x, y, 'k'); 
```

我想在 X 轴上使用标签，它可以工作：

```
set(gca,'XTick',[0:3]) % This automatically sets 
labels = ['0'; 'T'; 'T'; '1';];
set(gca,'XTickLabel',labels) 
```

但是，当我更改`T`为`T0`. 它不起作用。

**Q1：**有效的字符串是`XTickLabel`什么？

**Q2：**如何使用 T0、T1 之类的字符串。或者是否可以使用带有子索引的字符，如乳胶格式的 $A_2$。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T01:37:10.120

如果要设置不同长度的字符串，则需要使用元胞数组，即

```
labels = {'0','T','T0','somethingCompletelyDifferent'} 
```

将工作。

如果你想使用 Latex 来格式化刻度标签，你需要[从 Matlab File Exchange 下载一个函数](http://www.mathworks.com/matlabcentral/fileexchange/15986)。

# android - 为什么 cygwin 用于 android NDK

> ID：11174327
> 
> 赞同：2
> 
> 时间：2012-06-24T01:20:58.283
> 
> 标签：android

刚接触android NDK，我按照帖子中提到的教程学习了NDK

[面向初学者的 Android NDK 教程/指南。](https://stackoverflow.com/questions/7899740/android-ndk-tutorial-guide-for-beginners)

本教程要求安装 Cygwin 以构建基于 ndk 的 android 应用程序。

我可以从我的 Windows 命令行工具运行 ndk-build 并仍然生成本机 .so 文件。

我不明白为什么需要cygwin？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T03:53:18.423

因为您需要构建 Linux（特别是 android）二进制文件而不是 windows x86/64 二进制文件。Cygwin 是一个在 Windows 中运行的 Linux 环境，它允许在 Windows 上交叉编译 Linux 二进制文件。

# java - 测试弱引用

> ID：11174328
> 
> 赞同：9
> 
> 时间：2012-06-24T01:21:06.863
> 
> 标签：java, unit-testing, weak-references

在 Java 中测试弱引用的正确方法是什么？

我最初的想法是执行以下操作：

```
public class WeakReferenceTest {

    public class Target{
        private String value;    

        public Target(String value){
            this.value = value;
        }    
        public String toString(){
            return value;
        }
    }

    public class UsesWeakReference{    
        WeakReference<Target> reference;   

        public UsesWeakReference(Target test){
            reference = new WeakReference<Target>(test);
        }    
        public String call(){
            Target test = reference.get();
            if(test != null){
                return test.toString();
            }
            return "empty";
        }
    }

    @Test
    public void testWeakReference(){    
        Target target = new Target("42");

        UsesWeakReference usesWeakReference = new UsesWeakReference(target);    
        WeakReference<Target> triggerReference = new WeakReference<Target>(target);    
        assertEquals("42", usesWeakReference.call());

        target = null;    
        while(triggerReference.get() != null){
            System.gc();
        }

        assertEquals("empty", usesWeakReference.call());    
    }    
} 
```

我对该方法的保留是使用 System.gc()，因为我知道它在不同的 JVM 上的行为可能不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T01:41:54.680

没有 100% 防弹的方法来测试使用引用类型的代码。Reference 对象的行为取决于 GC 运行的时间，并且没有 100% 可靠的方法来强制 GC 运行。

你能做的最好的事情是：

*   检查您在运行测试时是否设置了正确的 JVM 选项，并且
*   编写您的测试，以便在`System.gc()`无操作**或**愿意禁用或跳过测试或忽略测试失败的情况下它不会失败。

（您应该能够`System.gc()`通过查看调用前后使用的内存量来检测被忽略的内容；例如通过调用`Runtime.totalMemory()`）

* * *

实际上，还有另一个“解决方案”。让您的单元测试产生大量垃圾......足以保证您将触发垃圾收集。（不是一个好主意，IMO。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-28T14:29:19.957

旧问题的新答案；我在处理完全相同的问题时发现了您的问题：我想编写一个单元测试，以验证如果 WeakReference 的所指对象变为空，我的测试类是否会执行非常具体的操作。

我首先编写了一个简单的测试用例，将所指对象设置为空；然后调用`System.gc()`；并且有趣的是：至少在我的日食中，这对于我`weakRefernce.get()`返回 null 来说已经“足够好”了。

但是谁知道这是否适用于未来几年将运行此单元测试的所有未来环境。

所以，再想一想：

```
@Test
public void testDeregisterOnNullReferentWithMock() {
    @SuppressWarnings("unchecked")
    WeakReference<Object> weakReference = EasyMock.createStrictMock(WeakReference.class);
    EasyMock.expect(weakReference.get()).andReturn(null);
    EasyMock.replay(weakReference);
    assertThat(weakReference.get(), nullValue());
    EasyMock.verify(weakReference);
} 
```

也很好用。

含义：这个问题的通用答案是为您创建对象的 WeakReference 的工厂。所以，当你想测试你的生产代码时；你为它提供了一个模拟工厂；并且该工厂将反过来模拟 WeakReference 对象；现在您可以完全控制该弱引用对象的行为。

而且“完全控制”比*假设*GC 可能会做你希望它做的事情要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-12T16:47:20.940

今天遇到一个类似的问题。

TLDR 解决方案：扩展 WeakReference 并覆盖 .get()

* * *

试图使用 mockk 来模拟`WeakReference<*>`这样的：

```
val weakRef = mockk<WeakReference<String>>()

@Test
fun testWeakRef() {
   every {weakRef.get()} returns "apple"
   // ... etc, etc
} 
```

但是，我然后得到一个

```
Missing mocked calls inside every { ... } block: make sure the object inside the block is a mock 
```

还不确定为什么 mockk 不喜欢模拟 WeakReference。

**因此，只需在您的测试目录中**扩展该类即可。

 **```
class MockWeakReference<T>(initialValue: T? = null) : WeakReference<T>(null) {

    private var mockValue = initialValue

    override fun get(): T? {
        return mockValue
    }

    fun setMockValue(value: T?) {
        mockValue = value
    }
} 
```

然后而不是使用`every`or `when`，只需使用`mockWeakRef.setMockValue($x)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-29T18:07:56.180

我想背负 GhostCat 向 Monica C 致敬的回答，该回答说要使用模拟。这当然是一条路线，但是在实现这一点时，我注意到它本身实际上有一个`clear()`功能`WeakReference`。因此，您可以创建一个工厂实例并简单地自己清除所指对象，而不是创建模拟的繁重工作。我使用的方法是用 Kotlin 编写的，所以希望语法不会太刺耳，但这正是我所拥有的。

我们的工厂看起来像这样，您可以将`invoke()`函数视为构造函数，从功能上讲就是它正在做的事情，实际上它使我们免于为默认行为实现类。

```
interface WeakReferenceFactory {
    fun <T> create(referent: T): WeakReference<T>

    companion object {
        // Allows us to create a production ready instance with WeakReferenceFactory(), avoids having to implement a concrete instance.
        operator fun invoke(): WeakReferenceFactory {
            return object : WeakReferenceFactory {
                override fun <T> create(referent: T): WeakReference<T> {
                    return WeakReference(referent)
                }
            }
        }
    }
} 
```

对于我们的测试，我们可以使用附加`clear()`功能实现工厂，这样做允许我们保留我们在测试中使用的实例的引用，然后简单地将其传递给工厂以进行清除。

```
class WeakReferenceFactoryFake : WeakReferenceFactory {
    private val managedReferents = mutableListOf<WeakReference<*>>()

    fun <T> clear(referent: T) {
        managedReferents.filter { it.get() == referent }
            .forEach { it.clear() }
    }

    override fun <T> create(referent: T): WeakReference<T> {
        val weakReference = WeakReference(referent)
        managedReferents.add(weakReference)
        return weakReference
    }
} 
```

然后在你的测试中你会有这样的东西（对不起 Foo's 和 Bar's）。

```
class FooTest {
    private val fakeWeakReferenceFactory = WeakReferenceFactoryFake()

    private val subject: Foo = Foo(fakeWeakReferenceFactory)

    @Test
    fun `given foo, when bar is cleared, then bar should be null`() {
        val bar = Bar()
        foo.put(bar)

        fakeWeakReferenceFactory.clear(bar)

        assert(bar).isNull()
    }
} 
```**

# c# - 这段代码需要什么样的同步？

> ID：11174329
> 
> 赞同：3
> 
> 时间：2012-06-24T01:21:33.580
> 
> 标签：c#, multithreading, locking

我有一个线程服务器应用程序存储`List<Item> dataList`. 有一个写入线程可以修改、添加和删除列表中的项目，并且有多个线程从这个列表中读取。

需要什么样的同步来确保写入按调用顺序发生并为读取提供最大性能，即如果写入繁忙，读取必须只提供读取之前的先前值。

我目前使用`ReaderWriterLockSlim`它单独的读取和写入锁定功能，但感觉好像调用 ReadLocks 有很多昂贵的开销，这是不必要的，因为我想要的只是保证按顺序写入？

据我了解，阅读引用类型和值类型应该提供原子访问，因此可能不需要锁定？

性能是一个大问题，我的同步结构的优化似乎可以提高很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:56:48.337

听起来你有一个生产者/消费者模式。在 .Net 4 中，命名空间中有[ConcurrentQueue<T> 类](http://msdn.microsoft.com/en-us/library/dd267265)`System.Threading.Concurrent`。您仅在从队列中添加和删除时进行同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:43:27.173

如果没有同步，读取操作可能会从写入操作之前和之后获取部分信息（例如：旧列表中的 30% 和新列表中的 70%）。如果这不是问题，那么只要有一个写入器，您就不需要使用任何同步。

如果您的列表包含对象，您可能更喜欢将新数据写入新对象，然后将这个新元素与 inlist 交换。除非有一些我不知道的内部机制，否则更改引用应该是原子的。

```
Object temp = new Object();
temp.value = 5;
temp.name = "whatever";
list[5] = temp; 
```

代替：

```
list[5].value = 5;
list[5].name = "whatever"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T10:15:09.523

`ReaderWriterLockSlim` 在这里并不真正需要，除非有可能由于某些重要原因您无法进入锁。
一个简单`Lock(syncObj)`就足够了，只需在读/写操作之前放置锁。

如果`TryEnter`需要，我们需要查看您的代码。

# android - Android 按键时有两声响

> ID：11174334
> 
> 赞同：1
> 
> 时间：2012-06-24T01:22:55.810
> 
> 标签：android, button, audio

按下按钮时，我尝试使用两种声音：按下按钮时发出一种声音，释放按钮时发出另一种声音。我怎样才能做到这一点？

我目前在单击按钮时播放声音：

```
 button.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {

            mp = MediaPlayer.create(Test.this, R.raw.mysound);   
            mp.start();
            mp.setOnCompletionListener(new OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer mp) {
                    // TODO Auto-generated method stub
                    mp.release();
                }

            });
        }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:27:38.017

尝试使用`OnTouchListener`：

```
public boolean onTouch(View v, MotionEvent ev) {
    int action = ev.getAction() & MotionEvent.ACTION_MASK;
    if (action == MotionEvent.ACTION_DOWN) {
        // Play "click" sound
    } else if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL) {
        // Play "unclick" sound
    }
} 
```

`OnTouchListener`您可以使用`setOnTouchListener()`与您已经演示过的相同的方式将其附加到一个`OnClickListener`。

# php - 注册客户错误的自定义菜单

> ID：11174335
> 
> 赞同：-1
> 
> 时间：2012-06-24T01:23:03.580
> 
> 标签：php, authentication

当我尝试在客户登录时显示一组不同的菜单时出现错误，当有人登录时，页脚只是从底部跳到顶部。当我删除此自定义菜单时，网站很好。有人可以帮忙吗？

谢谢你。

我用于菜单开关的代码是

```
 <div class="login">

<?php if ($regid=='') { ?>
        <a href="registration" class="login_style"> Register </a> |
        <a href="login" class="login_style"> Login </a></div>
<?php }?>       

<?php if ($regid!='') { ?>

        <div class="login"> 

                    <a href="my_order" class="login_style"> My Orders </a> |
                    <a href="view_profile" class="login_style"> View Profile </a> |
                    <a href="edit_profile" class="login_style"> Edit Profile </a> |
                    <a href="changepass" class="login_style"> Change Password </a> |
                    <a href="signout" class="login_style"> Signout </a> 

        </div>
<?php }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:27:29.607

看起来你有：

`<div class="login">`

两次。可能是未关闭的标签导致了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:39:26.057

同意楼上。标签未关闭，这将导致错误。尝试：

```
<div class="login">
<?php if ($regid=='') { ?>
        <a href="registration" class="login_style"> Register </a> |
        <a href="login" class="login_style"> Login </a></div>
    <?php } else if ($regid!='') { ?>
        <a href="my_order" class="login_style"> My Orders </a> |
        <a href="view_profile" class="login_style"> View Profile </a> |
        <a href="edit_profile" class="login_style"> Edit Profile </a> |
        <a href="changepass" class="login_style"> Change Password </a> |
        <a href="signout" class="login_style"> Signout </a> 
    <?php }?>
</div> 
```

# ruby-on-rails - Rails：如何列出 ActiveRecord 的所有可访问属性？

> ID：11174346
> 
> 赞同：2
> 
> 时间：2012-06-24T01:26:51.230
> 
> 标签：ruby-on-rails

假设我有一个名为`Widget`. 如果我选择一个小部件...

```
widget = Widget.find(1) 
```

...然后我可以使用`widget.attributes.keys`.

但是如果我不想找到一个小部件怎么办？

有没有办法列出 Widget 类的所有属性（继承自`ActiveRecord::Base`）而不必先检索一个特定的 Widget？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T01:34:33.153

您可以直接从数据模型中获取属性：

```
Widget.column_names 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-06T19:42:48.243

如果您需要“可访问属性”，即用 标记为可访问的属性`attr_accessible`，那么您可以使用[`Widget.accessible_attributes`](http://apidock.com/rails/ActiveModel/MassAssignmentSecurity/ClassMethods/accessible_attributes).

# c - 调用函数时 C 程序崩溃。

> ID：11174348
> 
> 赞同：1
> 
> 时间：2012-06-24T01:27:02.440
> 
> 标签：c

因此，我向用户询问 novo->prato （一个列表项），但是在函数调用或它之前的 scanf 的某个地方，程序崩溃了，我看不出代码有什么问题。

这些是声明和函数。

```
typedef struct pedido pedido, *ppedido;

struct ingrediente{
    char nome[15];
    int id;
    int qtd;
    int limite;
    int consumo_medio;
};

struct item{
    char id[5];
    int ing[10];
    float qtd[10];
};

struct pedido{
    char id[5];
    int prioridade;
    int mesa, n_pratos;
    struct prato *prato[TAM];
    ppedido prox;
};

struct prato{
    char id[5];
};

int verifica_prato(char prato[])
{
    FILE *f;
    struct item aux;

    int i=0, j=0;

    f = fopen("menu.bin", "rb");

    while((fread(&aux, sizeof(struct item), 1, f)) == 1){
        if((strcmp(prato, aux.id)) == 0)
        i++;
    }
    fclose(f);

    if(i == 0){
        printf("Prato nao existe no menu.\n");
        return 1;
    }

    if(i > 1)
        return 0;
    } 
```

这是函数 ia 调用的地方。

```
for(i=0;i<novo->n_pratos;i++){
    do{
        printf("Introduza o ID do prato %d: ", i+1);
        scanf("%s", &novo->prato[i]);
        printf("%s", novo->prato[i]);
        k = verifica_prato(novo->prato[i]); //this function
        if(k == 0)
            w = verifica_ing(novo->prato[i]->id);
        }while(k != 0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T01:49:22.890

在`verifica_prato()`
该行之后，`f = fopen("menu.bin", "rb")` 您应该检查文件是否成功打开。
利用 `if( f != NULL )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:44:53.507

总是`novo->n_pratos`小于`TAM`？如果`n_pratos`超过`TAM`，可能会出现边界错误，因为`TAM`已定义为数组大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T08:12:25.320

verifca_prato 的签名不应该是 int verifica_prato(struct prato) 还是调用应该是 verifica_prato(novo->prato[i]->id);

# c - 如何解决链表中损坏的指针？

> ID：11174349
> 
> 赞同：2
> 
> 时间：2012-06-24T01:27:09.843
> 
> 标签：c, linked-list

如果我发现链表中的指针（链接）字段已损坏，我该如何解决这个问题？

我在面试中被问到这个问题。我说不行，解决不了。面试官说有可能。有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T01:47:17.423

假设它是一个双向链表：

如果损坏的是“下一个”指针，则可以从尾部开始并使用“上一个”指针，向头部遍历列表，同时保持对遍历的最后一个元素的引用。当您找到具有错误指针的元素时，您只需将该元素的“下一个”指针指向被遍历的最后一个元素。

如果双向链表中的“前一个”链接损坏，则可以反转该过程 - 从头部开始，遍历直到找到错误的“前一个”指针，并使用对遍历的最后一个元素的引用来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:44:29.027

在双循环链表中，如果任何一个指针（前一个或下一个指针）损坏，我们可以解析损坏的指针。

如果下一个指针不正确，我们可以反向遍历链表，然后纠正它，否则如果前一个指针不正确，我们可以正向遍历链表纠正它。

现在我们必须考虑如何识别列表中损坏的链接（指针）。我们使用分别为每个节点分配动态内存（`malloc`或）。`calloc`如果我们调用`malloc`或`calloc`频繁调用小内存可能会影响系统的性能。而不是这样，我们可以在初始阶段分配一大堆堆内存，然后我们可以为每个节点创建实现自己的内存分配功能。并且也仅将其用于创建列表节点以识别列表的损坏链接。

这提高了系统的性能，也有助于通过检查分配给列表的初始内存的限制来识别节点的链接是否损坏。

一旦我们获得指向节点的指针，我们必须在访问该节点中的数据之前先进行以下检查。

```
check_limit(node);
check_limit(node->next);
check_limit(node->previous); 
```

我们还可以检查 是否`node->previous`等于`current_node`。

在此之后，也有可能`node->next`指向错误的地址，但在初始内存限制之内。在这种情况下，我们可以读取`node->next->previous`（这不会导致崩溃，即使`next`指向错误的地址但在初始内存限制内）并检查它是否等于`node`。

并且应该`NULL`始终设置未使用的初始内存空间（使用`memset`）。

通过这些方式，我们可以找出列表中 99% 的损坏指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T12:56:47.967

在开发我的嵌入式作业时，我经常使用前向链接队列。我记数以及头指针。队列有一个 check() 方法，该方法运行 [count] 个链接，如果结果指针与头部不同，则调用关键错误处理程序。它不是万无一失的，但它足以很好地捕获双推和其他此类常见的队列错误。

注意：在多线程应用程序中，队列必须被锁定才能安全检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-25T10:36:46.490

在双循环链表中，如果损坏的指针指向节点的内存位置之一，则首先使用遍历和标记方法找到循环。这将给出具有损坏指针的节点的位置，然后以相反的顺序遍历，然后找出具有 prev 节点位置的节点作为第一步结果节点。在该节点旁边分配损坏节点的指针。问题已修复在反之亦然的场景中逆时针反转。上述解决方案需要 o(N) 空间来匹配遍历的节点地址。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-24T01:29:43.017

也许你应该摆脱它？真的，在一般情况下这是不可能的，当我们不能只用其他人插入列表的任何元素时。

# objective-c - 需要超级菜鸟目标 C 帮助

> ID：11174350
> 
> 赞同：0
> 
> 时间：2012-06-24T01:27:17.550
> 
> 标签：objective-c

好的，所以我喜欢学习目标 c 的一天。我知道这是一个非常基本的问题，但它会极大地帮助我学习。所以代码只是一个基本的计数器，但我想添加一些东西，所以当计数器达到某个数字时，会出现不同的消息。我尝试了很多不同的事情，但我失败了。提前致谢。

```
#import "MainView.h"

@implementation MainView

int count = 0;

-(void)awakeFromNib {

    counter.text = @"count";

}

- (IBAction)addUnit {

    if(count >= 999) return;

    NSString *numValue = [[NSString alloc] initWithFormat:@"%d", count++];
    counter.text = numValue;
    [numValue release];
}

- (IBAction)subtractUnit {

    if(count <= -999) return;

    NSString *numValue = [[NSString alloc] initWithFormat:@"%d", count--];
    counter.text = numValue;
    [numValue release]; {

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:50:56.183

首先，与其将计数作为全局变量，不如将其放在您的界面中更为合适。关于你的问题，你的代码应该改成这样。

```
- (IBAction)addUnit {

    //if(count >= 999) return;  Delete this line, there is absolutely no point for this line this line to exist. Basically, if the count value is above 999, it does nothing.

    NSString *numValue;
    if (count>=999)
    {
        //Your other string
    }
    else
    {
        numValue = [[NSString alloc] initWithFormat:@"%d", count++];   
    }
    counter.text = numValue;
    [numValue release];//Are you using Xcode 4.2 in ARC?  If you are you can delete this line
} 
```

然后，您可以将其他方法更改为类似的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:32:10.247

这个怎么样？

```
#import "MainView.h"

@implementation MainView

int count = 0;
int CERTAIN_NUMBER = 99;

-(void)awakeFromNib {

    counter.text = @"count";

}

- (IBAction)addUnit {

    if(count >= 999) return;

    NSString *numValue = [[NSString alloc] initWithFormat:@"%d", count++];
    if(count == CERTAIN_NUMBER) {
        counter.text = numValue;
    }
    else {
        counter.text = @"A different message"
    }
    [numValue release];
}

- (IBAction)subtractUnit {

    if(count <= -999) return;

    NSString *numValue = [[NSString alloc] initWithFormat:@"%d", count--];
    if(count == CERTAIN_NUMBER) {
        counter.text = numValue;
    }
    else {
        counter.text = @"A different message"
    }
    [numValue release]; {

    }

} 
```

# javascript - 如何正确接收来自 XUL iframe 的 DOMContentLoaded 事件？

> ID：11174359
> 
> 赞同：4
> 
> 时间：2012-06-24T01:30:47.393
> 
> 标签：javascript, dom, firefox-addon, dom-events, xul

我正在开发一个将网页加载到 XUL iframe 中的最小 Firefox 扩展。（我也尝试了`html:iframe`，但遇到了相同的结果。）页面可能需要一些时间才能完全加载 - 我正在尝试接收`DOMContentLoaded`事件，它应该在事件之前`load`发生。

（主要原因是我试图注入一个 CSS 样式表，这应该在 DOMContentLoaded 事件之后立即完成，而不是等待页面出现“无样式”直到加载事件。但是，这将用于还有其他原因，因此特定于 CSS 的替代方案不是可行的解决方法。）

但是，到目前为止，我只能接收`load`事件 - 而不是`DOMContentLoaded`事件`readyState`。

使用下面的 XUL 应该很容易重现该问题，并且只需在 Firefox 位置栏中输入 XUL 的路径给定其`chrome://`URL（类似于[此](http://kb.mozillazine.org/Chrome_URLs)）：

```
<?xml version="1.0"?>
<!DOCTYPE window>
<window xmlns:html="http://www.w3.org/1999/xhtml"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

    <script type="application/x-javascript">
        window.addEventListener("DOMContentLoaded", function(event){
            try{
                var outElem = document.getElementById("out");
                var out = function(s){
                    outElem.value += s + "\n";
                };

                var frameTest = document.getElementById("iframe-test");

                out("start: " + frameTest.contentDocument.readyState);
                frameTest.addEventListener("DOMContentLoaded",
                    function(e){
                        out("DOMContentLoaded! " + e);
                    },
                    true);
                frameTest.addEventListener("readystatechange",
                    function(e){
                        out("readystatechange: " + e);
                    },
                    true);
                frameTest.addEventListener("load",
                    function(e){
                        out("load: " + e + ", state: " + frameTest.contentDocument.readyState);
                    },
                    true);
                out("all listeners registered, frame location: " + frameTest.contentWindow.location + ", state: " + frameTest.contentDocument.readyState);
            }catch(e){
                alert(e);
            }
        }, true);
    </script>

    <iframe id="iframe-test" type="content" src="http://www.google.com" height="400" width="400"/>
    <textbox id="out" rows="10" cols="80" multiline="true"/>

</window> 
```

我在调试文本框中收到的输出是：

```
start: uninitialized
all listeners registered, frame location: about:blank, state: uninitialized
load: [object Event], state: complete 
```

我不知道为什么我没有收到任何`DOMContentLoaded!`或`readystatechange:`输出。

[https://gist.github.com/2985342](https://gist.github.com/2985342)提供了另一个同样不起作用的最小示例。

我已经引用的页面包括：

*   [在 XUL 中，我如何知道浏览器标签已完成加载？](https://stackoverflow.com/questions/835313/in-xul-how-do-i-know-a-browser-tag-has-finished-loading)
*   [规避同源政策的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)
*   [https://developer.mozilla.org/en/DOM/element.addEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)
*   [https://developer.mozilla.org/en/DOM/DOM_event_reference](https://developer.mozilla.org/en/DOM/DOM_event_reference)

我在 irc.mozilla.org/#extdev 上提到了这一点，但只能获得“对其他人有效”和“最好使用捕获侦听器”的响应。- 这就是为什么我在上述所有调用中都`useCapture`设置了第三个参数（尽管我还没有注意到将它设置为 false 或完全省略它的任何区别）。`true``addEventListener`

我希望以“正确的方式”做到这一点，而不是诉诸于`contentDocument.readyState`.

**更新：** 例如，当通过“实时 XUL 编辑器”（[https://addons.mozilla.org/en-US/firefox/addon/extension-developer/](https://addons.mozilla.org/en-US/firefox/addon/extension-developer/)的一部分）进行采样时，此示例和其他类似示例按预期工作- 但不是作为`chrome://test/content/test.xul`文件加载时。当通过位置栏加载时，是否存在导致此问题的受限权限等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:59:59.203

根据 Gecko 文档，[DOMFrameContentLoaded](https://developer.mozilla.org/en-US/docs/Web/Reference/Events/DOMFrameContentLoaded)应该用作替代事件侦听器：

> DOMFrameContentLoaded 事件在框架完成加载和解析时执行，无需等待样式表、图像和子框架完成加载。此事件与 DOMContentLoaded 类似，但仅适用于帧。

Firefox 和 Opera（Mini 或 desktop 12 并在其下使用 Presto 引擎）支持此事件：

> 目前，Firefox 和 Opera 都实现了 DOMFrameContentLoaded 事件。
> 
> 加载帧后，Opera 会在 owner 上调度一个事件`iframe`。然后此事件冒泡到`window`.
> 
> Firefox 在 owner 上的文档上调度一个事件`iframe`。它冒泡到`window`. 该元素的目标是`iframe`其内容已加载的元素。如果所有者文档本身包含在 a 中`frame`，则会向父文档分派一个事件。`event target`仍然是加载内容时的框架（依此类推到父文档链的顶部）。

**参考**

*   [Webkit 错误 33604 - iframe.contentWindow 不会触发 DOMContentLoaded（实现 DOMFrameContentLoaded？）](https://bugs.webkit.org/show_bug.cgi?id=33604)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:56:54.683

当您通过 Firefox 菜单 > Web Developer > Error Console > 打开 XUL 页面时，是否会出现此问题`open("chrome://yourpage.xul", "", "width=640,height=480");`？地址栏下方的浏览器被标记为内容主，这使得其中的页面以受限的权限运行，而不管页面来自什么协议（这是违反直觉的，被授予）。这可能是导致您的问题的原因，但不幸的是，我无法告诉您确切的原因。

此类微妙问题的下一步涉及连接到 irc.mozilla.org#developers 并在西海岸醒来时询问您的问题 :)。

# windows - 批处理脚本：无法正确检查循环

> ID：11174360
> 
> 赞同：0
> 
> 时间：2012-06-24T01:31:17.580
> 
> 标签：windows, batch-file

好的，我几乎完成了这项工作，但需要一些帮助才能消除错误。

用户删除功能效果很好，并且输出 TEMP 文件如下：

```
"All Users"
"Default"
"Default User"
"Public" 
```

":UserDeleteJoin" 如果我​​用回显检查它，将输出以下内容

```
Public,Default User,Default,All Users 
```

完成我所描述的完整代码如下：

```
set UsersPath=%systemdrive%\Users\
DEL /F /Q /A:H %UsersPath%\desktop.ini 2>nul>nul
forfiles /p %UsersPath% /m * /d -45 /c "cmd /c echo @file">%TEMP%\users.temp
FOR /F "skip=1 tokens=1 delims=" %%P IN (%TEMP%\users.temp) DO CALL:UserDeleteJoin %%P
set userdelete=%userdelete:"=%
set userdelete=%userdelete:~0,-1%
echo %userdelete%
pause
GOTO:USERPRESERVE

:UserDeleteJoin
if UserDeleteJoin_Skip=="" (set userdelete=%1 & set UserDeleteJoin_Skip=1) ELSE (set userdelete=%1,%userdelete%)
goto:eof 
```

这样就解决了主要问题，现在只有脚本的其余部分，我最初是从“http://mstoneblog.wordpress.com/2010/12/08/user-profile-cleaning-script-for-windows -7/" 效果很好，但我想添加仅删除超过 x 天的用户配置文件的功能。

所以我有初始用户保留功能，因为我需要它来保持普通用户。

```
set userpreserve="All Users,Default,Default User,Hell Bomb" 
```

下一个脚本块没有改变，但我会发布它以完成。这将包括上面的行并涵盖 :UserDeleteJoin 函数之后剩下的所有内容。

```
USERPRESERVE
set userpreserve="All Users,Default,Default User,Hell Bomb"

FOR /f "tokens=*" %%a IN ('reg query "hklm\software\microsoft\windows nt\currentversion\profilelist"^|find /i "s-1-5-21"') DO CALL :REGCHECK "%%a"
GOTO VERIFY

:REGCHECK
set SPACECHECK=
FOR /f "tokens=3,4" %%b in ('reg query %1 /v ProfileImagePath') DO SET USERREGPATH=%%b %%c
FOR /f "tokens=2" %%d in ('echo %USERREGPATH%') DO SET SPACECHECK=%%d
IF ["%SPACECHECK%"]==[""] GOTO REGCHECK2
GOTO USERCHECK

:REGCHECK2
FOR /f "tokens=3" %%g in ('reg query %1 /v ProfileImagePath') DO SET USERREGPATH=%%g
GOTO USERCHECK

:USERCHECK
FOR /f "tokens=3 delims=\" %%e in ('echo %USERREGPATH%') DO SET USERREG=%%e
FOR /f "tokens=1 delims=." %%f IN ('echo %USERREG%') DO SET USERREGPARSE=%%f
ECHO %USERPRESERVE%|find /I "%USERREGPARSE%" > NUL
IF ERRORLEVEL=1 GOTO DELETECHECK
IF ERRORLEVEL=0 GOTO SKIP

:DELETECHECK
ECHO %userdelete%|find /I "%USERREGPARSE%" > NUL
IF ERRORLEVEL=1 GOTO SKIP
IF ERRORLEVEL=0 GOTO CL
GOTO:EOF

:SKIP
ECHO Skipping user clean for %USERREG%
GOTO :EOF

:CLEAN
ECHO Cleaning user profile for %USERREG%
::rmdir "C:\Users\%USERREG%" /s /q > NUL
ECHO Cleaning user registry for %USERREG%
::reg delete %1 /f
::IF EXIST "C:\Users\%USERREG%" GOTO RETRYCLEAN1
GOTO :EOF 
```

我很确定问题出在错误检查上，但我无法确定，因为它只想点击配置文件“Trinity Tech Corp”和“Hell Bomb”，而忽略所有其他配置文件，尽管其他设置是什么。不幸的是，似乎无法缩小问题的范围，但这可能是因为我已经研究了很久。

我添加到原始脚本的部分脚本如下：

```
IF ERRORLEVEL=1 GOTO DELETECHECK 
```

和

```
:DELETECHECK
ECHO %userdelete%|find /I "%USERREGPARSE%" > NUL
IF ERRORLEVEL=1 GOTO SKIP
IF ERRORLEVEL=0 GOTO CL
GOTO:EOF 
```

当我运行脚本时给我的输出如下，它应该跳过这两个文件夹，但它不会删除其他用户配置文件。

```
Skipping user clean for Trinity Tech
Skipping user clean for Hell Bomb 
```

其他解决方案：我认为这可以变得更简单，我可以弄清楚如何让 FORFILES 列出所有不超过 45 天的文件夹，然后我可以像为“：UserDeleteJoin”所做的那样简单地做另一个循环并且会不必编辑原始脚本的主要部分。如果有人知道我该怎么做，我可以避免我现在遇到的所有问题。

完整脚本

```
@ECHO OFF

set UsersPath=%systemdrive%\Users\
DEL /F /Q /A:H %UsersPath%\desktop.ini 2>nul>nul
forfiles /p %UsersPath% /m * /d -45 /c "cmd /c echo @file">%TEMP%\users.temp
FOR /F "skip=1 tokens=1 delims=" %%P IN (%TEMP%\users.temp) DO CALL:UserDeleteJoin %%P
set userdelete=%userdelete:"=%
set userdelete=%userdelete:~0,-1%
GOTO:USERPRESERVE

:UserDeleteJoin
if UserDeleteJoin_Skip=="" (set userdelete=%1 & set UserDeleteJoin_Skip=1) ELSE (set userdelete=%1,%userdelete%)
goto:eof

:USERPRESERVE
set userpreserve="All Users,Default,Default User,Hell Bomb"

FOR /f "tokens=*" %%a IN ('reg query "hklm\software\microsoft\windows nt\currentversion\profilelist"^|find /i "s-1-5-21"') DO CALL :REGCHECK "%%a"
GOTO VERIFY

:REGCHECK
set SPACECHECK=
FOR /f "tokens=3,4" %%b in ('reg query %1 /v ProfileImagePath') DO SET USERREGPATH=%%b %%c
FOR /f "tokens=2" %%d in ('echo %USERREGPATH%') DO SET SPACECHECK=%%d
IF ["%SPACECHECK%"]==[""] GOTO REGCHECK2
GOTO USERCHECK

:REGCHECK2
FOR /f "tokens=3" %%g in ('reg query %1 /v ProfileImagePath') DO SET USERREGPATH=%%g
GOTO USERCHECK

:USERCHECK
FOR /f "tokens=3 delims=\" %%e in ('echo %USERREGPATH%') DO SET USERREG=%%e
FOR /f "tokens=1 delims=." %%f IN ('echo %USERREG%') DO SET USERREGPARSE=%%f
ECHO %USERPRESERVE%|find /I "%USERREGPARSE%" > NUL
IF ERRORLEVEL=1 GOTO DELETECHECK
IF ERRORLEVEL=0 GOTO SKIP

:DELETECHECK
FOR /f "tokens=3 delims=\" %%e in ('echo %USERREGPATH%') DO SET USERREG=%%e
FOR /f "tokens=1 delims=." %%f IN ('echo %USERREG%') DO SET USERREGPARSE=%%f
ECHO %userdelete%|find /I "%USERREGPARSE%" > NUL
IF ERRORLEVEL=1 GOTO SKIP
IF ERRORLEVEL=0 GOTO CL
GOTO:EOF

:SKIP
ECHO Skipping user clean for %USERREG%
GOTO :EOF

:CLEAN
ECHO Cleaning user profile for %USERREG%
::rmdir "C:\Users\%USERREG%" /s /q > NUL
ECHO Cleaning user registry for %USERREG%
::reg delete %1 /f
::IF EXIST "C:\Users\%USERREG%" GOTO RETRYCLEAN1
GOTO :EOF

:RETRYCLEAN1
ECHO Retrying clean of user profile %USERREG%
rmdir "C:\Users\%USERREG%" /s /q > NUL
IF EXIST "C:\Users\%USERREG%" GOTO RETRYCLEAN2
GOTO :EOF

:RETRYCLEAN2
ECHO Retrying clean of user profile %USERREG%
rmdir "C:\Users\%USERREG%" /s /q > NUL
GOTO :EOF

:VERIFY
FOR /f "tokens=*" %%g IN ('reg query "hklm\software\microsoft\windows nt\currentversion\profilelist"^|find /i "s-1-5-21"') DO CALL :REGCHECKV "%%g"
GOTO REPORT

:REGCHECKV
set SPACECHECKV=
FOR /f "tokens=3,4" %%h in ('reg query %1 /v ProfileImagePath') DO SET USERREGPATHV=%%h %%i
FOR /f "tokens=2" %%j in ('echo %USERREGPATHV%') DO SET SPACECHECKV=%%j
IF ["%SPACECHECKV%"]==[""] GOTO REGCHECKV2
GOTO USERCHECKV

:REGCHECKV2
FOR /f "tokens=3" %%k in ('reg query %1 /v ProfileImagePath') DO SET USERREGPATHV=%%k
GOTO USERCHECKV

:USERCHECKV
FOR /f "tokens=3 delims=\" %%l in ('echo %USERREGPATHV%') DO SET USERREGV=%%l
FOR /f "tokens=1 delims=." %%m IN ('echo %USERREGV%') DO SET USERREGPARSEV=%%m
ECHO %USERPRESERVE%|find /I "%USERREGPARSEV%" > NUL
IF ERRORLEVEL=1 GOTO VERIFYERROR
IF ERRORLEVEL=0 GOTO :EOF

:VERIFYERROR
SET USERERROR=YES
GOTO :EOF

:REPORT
IF [%USERERROR%]==[YES] (
        set RESULT=FAILURE
)       ELSE (
        set RESULT=SUCCESS
)

Pause
:EXIT
exit

:EOF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:17:22.790

从原来的问题：

> 我在想这可以变得更简单，因为我可以弄清楚如何让 FORFILES 列出所有不超过 45 天的文件夹

您已经获得了 45 天之前的文件夹列表。您可以简单地使用 FINDSTR 来查找不在该列表中的条目。

```
forfiles /p %UsersPath% /m * /c "cmd /c echo @file" | findstr /vixg:"%TEMP%\users.temp" 
```

* * *

您确定要删除“desktop.ini”吗？还是您只是删除它，以便您只有文件夹要处理？

如果您只希望 FORFILES 列出文件夹，则可以执行以下操作：

```
forfiles /p %UsersPath% /m * /d -45 /c "cmd /c if @isdir=="TRUE" echo @file">%TEMP%\users.temp 
```

# python - 为什么 Python 的 @staticmethods 与装饰类的交互如此糟糕？

> ID：11174362
> 
> 赞同：4
> 
> 时间：2012-06-24T01:31:51.597
> 
> 标签：python, python-2.7, decorator, memoization

最近，StackOverflow 社区帮助我开发了一个相当简洁的`@memoize`装饰器，它不仅能够以一般的方式装饰函数，还能够装饰方法和类，也就是说，无需预先知道它将装饰什么类型的东西。

我遇到的一个问题是，如果您使用 装饰一个类`@memoize`，然后尝试使用 装饰其中一个方法`@staticmethod`，这将无法按预期工作，即您根本无法调用`ClassName.thestaticmethod()`。我想出的原始解决方案如下所示：

```
def memoize(obj):
    """General-purpose cache for classes, methods, and functions."""
    cache = obj.cache = {}

    def memoizer(*args, **kwargs):
        """Do cache lookups and populate the cache in the case of misses."""
        key = args[0] if len(args) is 1 else args
        if key not in cache:
            cache[key] = obj(*args, **kwargs)
        return cache[key]

    # Make the memoizer func masquerade as the object we are memoizing.
    # This makes class attributes and static methods behave as expected.
    for k, v in obj.__dict__.items():
        memoizer.__dict__[k] = v.__func__ if type(v) is staticmethod else v
    return memoizer 
```

但后来我了解到`functools.wraps`，它的目的是让装饰器函数伪装成被装饰函数，以更干净、更完整的方式，实际上我是这样采用的：

```
def memoize(obj):
    """General-purpose cache for class instantiations, methods, and functions."""
    cache = obj.cache = {}

    @functools.wraps(obj)
    def memoizer(*args, **kwargs):
        """Do cache lookups and populate the cache in the case of misses."""
        key = args[0] if len(args) is 1 else args
        if key not in cache:
            cache[key] = obj(*args, **kwargs)
        return cache[key]
    return memoizer 
```

虽然这看起来很不错，但`functools.wraps`绝对不支持`staticmethod`s 或`classmethod`s。例如，如果你尝试过这样的事情：

```
@memoize
class Flub:
    def __init__(self, foo):
        """It is an error to have more than one instance per foo."""
        self.foo = foo

    @staticmethod
    def do_for_all():
        """Have some effect on all instances of Flub."""
        for flub in Flub.cache.values():
            print flub.foo
Flub('alpha') is Flub('alpha')  #=> True
Flub('beta') is Flub('beta')    #=> True
Flub.do_for_all()               #=> 'alpha'
                                #   'beta' 
```

这将适用于我列出的第一个实现`@memoize`，但会`TypeError: 'staticmethod' object is not callable`在第二个实现中引发。

我真的真的很想解决这个问题`functools.wraps`而不必带回那种`__dict__`丑陋，所以我实际上用纯 Python 重新实现了我自己`staticmethod`的，它看起来像这样：

```
class staticmethod(object):
    """Make @staticmethods play nice with @memoize."""

    def __init__(self, func):
        self.func = func

    def __call__(self, *args, **kwargs):
        """Provide the expected behavior inside memoized classes."""
        return self.func(*args, **kwargs)

    def __get__(self, obj, objtype=None):
        """Re-implement the standard behavior for non-memoized classes."""
        return self.func 
```

据我所知，`@memoize`这与我上面列出的第二个实现完美结合。

所以，我的问题是：为什么标准内置函数本身不能`staticmethod`正常运行，和/或为什么不`functools.wraps`预测这种情况并为我解决它？

这是 Python 中的错误吗？还是在`functools.wraps`？

覆盖内置的注意事项是什么`staticmethod`？就像我说的，它现在似乎工作正常，但我担心我的实现和内置实现之间可能存在一些隐藏的不兼容，这可能会在以后爆发。

谢谢。

编辑澄清：在我的应用程序中，我有一个函数进行昂贵的查找，并且经常被调用，所以我记住了它。这很简单。除此之外，我有许多代表文件的类，并且在文件系统中有多个代表同一个文件的实例通常会导致状态不一致，因此每个文件名只强制一个实例很重要。`@memoize`使装饰器适应此目的并仍然保留其作为传统记忆器的功能本质上是微不足道的。

三种不同用途的真实世界示例如下`@memoize`：

*   [在一个函数上](https://github.com/robru/gottengeography/blob/master/gg/gpsmath.py#L76)
*   [在一个方法上](https://github.com/robru/gottengeography/blob/master/gg/widgets.py#L35)
*   [在包含静态方法的类上](https://github.com/robru/gottengeography/blob/master/gg/camera.py#L36)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T01:58:16.927

给你几个想法：

*   *静态*方法的操作与类装饰器的操作完全正交。将函数变成静态方法只会影响属性查找期间发生的事情。类装饰器是类的编译时转换。

*   *functools.wraps*中没有“错误” 。它所做的只是将函数属性从一个函数复制到另一个函数。

*   正如目前所写的那样，您的*memoize*工具没有考虑到 classmethods 和 staticmethods 的不同调用签名。这是*memoize*的弱点，而不是课堂工具本身。

我想你已经想象过类装饰器、静态方法、类方法和 functools 等工具具有某种相互集成的智能。相反，所有这些工具都非常简单，需要程序员有意识地设计它们的交互。

ISTM 认为，根本问题是既定目标在某种程度上没有明确说明：“装饰器不仅能够以一般方式装饰函数，还能够装饰方法和类，即，无需预先知道它将装饰什么类型的东西。 "

尚不完全清楚*memoize*在每种情况下的语义是什么。Python 的简单组件无法以能够猜出您真正想要做什么的方式自动组合自己。

我的建议是，您首先列出一个使用各种对象的 memoize 示例列表。然后开始构建您当前的解决方案，让它们一次一个地工作。在每个步骤中，您将了解您的规范与 meoize 实际所做的不匹配的地方。

另一个想法是*functools.wraps*和*类装饰器*对于这个问题并不是绝对必要的。两者都可以手动实现。从连接你的工具开始做你想做的事。一旦它开始工作，然后看看用包装和装饰器替换步骤。这比在可能不适合的情况下试图强迫工具满足你的意愿要好。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T02:08:34.363

装饰类用于潜在地改变类的构造。这是一种方便，但与`__new__`.

```
# Make the memoizer func masquerade as the object we are memoizing.
# This makes class attributes and static methods behave as expected.
for k, v in obj.__dict__.items():
    memoizer.__dict__[k] = v.__func__ if type(v) is staticmethod else v
return memoizer 
```

上面的代码强制你的包装器在你的实例中的方法上。

```
class Flub:
    @memoize
    @staticmethod
    def do_things():
        print 'Do some things.'
Flub.do_things() 
```

我相信这应该是您应该使用的代码 - 请记住，如果您没有收到 args，那么 args[0] 将`IndexError`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T00:57:10.600

问题是您的装饰器正在接受一个类（即 的实例`type`）并返回一个函数。这（几乎）是[类别错误](http://en.wikipedia.org/wiki/Category_mistake)的编程等价物；类可能看起来像函数，因为它们可以被调用（作为构造函数），但这并不意味着返回实例的函数等同于该实例类型的类。例如，没有办法`instanceof`给出正确的结果，而且你的装饰类不能再被子类化（因为它不再是一个类了！）

您应该做的是调整您的装饰器以检测何时在类上调用它，并在这种情况下构造一个具有所需行为的包装类（使用`class`语法或通过3 参数构造函数）。`type`或者 memoize `__new__`（尽管请注意，如果它是适当的类型，`__init__`将在返回值上调用`__new__`它，即使它是一个已经存在的实例）。

# c# - C# 内存泄漏？

> ID：11174366
> 
> 赞同：4
> 
> 时间：2012-06-24T01:32:25.933
> 
> 标签：c#, regex, memory-leaks

由于高内存使用率，以下代码在一段时间后崩溃（我打开任务管理器并且其使用的内存不断增加）。但我看不到任何内存泄漏，除了垃圾收集没有完成它的工作。有什么建议么？

```
//Load a list of regex
//Load a list of phrases
//Open a output file

foreach (string regexString in regexList)
{
    int num = 0;

    Regex regex = new Regex(regexString, RegexOptions.Compiled | RegexOptions.IgnoreCase);

    foreach (string phrase in phraseList)
            num += regex.Matches(phrase).Count;

    if (num > 0)
    {
        output.WriteLine(String.Join(" ", num, phrase));
        output.Flush();
    }
} 
```

编辑：

完整代码： http: [//pastebin.com/0SQYn44z](http://pastebin.com/0SQYn44z)

编辑2：

我找到并发布了解决方案（foreach 循环）感谢所有试图提供帮助的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T01:58:10.277

我无法从您的示例中看出，但`RegexOptions.Compiled`标志可能会导致问题。来自 msdn：

> Compiled 指定将正则表达式编译为程序集。这会产生更快的执行速度，但会增加启动时间。调用 CompileToAssembly 方法时，不应将此值分配给 Options 属性。

如果将正则表达式编译为程序集，则在重新启动应用程序之前无法卸载生成的代码，因为 .Net 不会卸载程序集。

这意味着如果您有很多不同的正则表达式，并且您不重用它们，那么编译的正则表达式通常不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T01:54:59.063

您的正则表达式可能会使用过多的回溯，从而导致执行时间长和内存使用量高

您可以发布正则表达式和输入，以便我可以确定吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T07:11:18.473

看到你的代码后，我已经可以推荐不要使用两个，而是一个组合的正则表达式。就像是：

```
Regex regex = new Regex(
        @"\b(?:" + s1 + " " + s2 + "|" + s2 + " " + s1 + @")\b",
        RegexOptions.IgnoreCase); 
```

请注意，那里的一系列`+`运算符将转换为单个`String.Concat(params string[])`调用。只有 2 到 4 个部分，它甚至不会创建临时数组，因为`Concat`这种情况下有更多专门的重载。`Join`总是使用一个临时数组并且还需要处理分隔符字符串，即使它是空的。

您可能要记住的另一件事是，在调试模式下运行程序与在发布模式下运行程序有很大不同。例如，该`keywords`列表将保持活动状态，直到函数返回。我建议明确限制其生命周期并尽快清理其他对象。可能类似于以下内容：

```
string[] keywordArray;
using (StreamReader keywordsFile = new StreamReader("keywords.txt"))
{
    List<string> keywords = new List<string>();
    string keyword;
    while ((keyword = keywordsFile.ReadLine()) != null)
        keywords.Add(keyword);

    keywordArray = keywords.ToArray();
} 
```

或者完全跳过它：

```
string[] keywordArray = File.ReadAllLines("keywords.txt"); // internally uses above code 
```

但是，不知何故，我觉得将您的巨大提要文件作为一个整体加载到内存中是一个坏主意。`FeedItem`如果您可以一次反序列化一个并从[迭代器方法](http://msdn.microsoft.com/en-us/library/dscyy5s0%28VS.80%29.aspx)中返回它，则需要的内存会少得多。然后，您需要做的就是重组算法以将提要项目的循环作为最外层循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T07:54:18.583

让我们看看我是否做对了。您有一个很大的关键字列表，并且对于其中两个单词的每个排列，您通过将它们连接在一起并在中间有一个空格来创建一个新字符串，再加上另一个单词顺序颠倒的字符串（这是不必要的，顺便说一句） . 最后，您从每个字符串创建一个 Regex 对象。

完成此操作后，您开始遍历 FeedItem 对象列表，获取每个对象的两个属性并将它们形成一个字符串，就像您对关键字所做的那样，并尝试将该字符串与两个正则表达式中的每一个进行匹配。简而言之，我认为您应该暂时搁置指责并专注于重构您的代码。事实上，我建议你暂时忘记正则表达式。你没有使用他们的任何力量，他们正在分散你对真正问题的注意力。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T02:41:29.880

您可以使用一些无需调用 Dipose() 即可实现 IDisposable 的类型：

*   流阅读器
*   StreamWriter
*   XmlReader

将这些类型的使用包装在 using 语句中，看看这是否对您有所改善。

# python - 使用 pandas 在 Python 中对来自多个数据文件的数据进行平均

> ID：11174367
> 
> 赞同：4
> 
> 时间：2012-06-24T01:32:34.683
> 
> 标签：python, statistics, pandas

我有来自我运行的一个实验的 30 次重复运行的 30 个 csv 数据文件。我正在使用 pandas 的`read_csv()`函数将数据读入 DataFrames 列表。我想从这个列表中创建一个 DataFrame，其中包含每列 30 个 DataFrame 的平均值。有没有内置的方法来实现这一点？

为了澄清，我将在下面的答案中扩展示例。假设我有两个 DataFrame：

```
>>> x
          A         B         C
0 -0.264438 -1.026059 -0.619500
1  0.927272  0.302904 -0.032399
2 -0.264273 -0.386314 -0.217601
3 -0.871858 -0.348382  1.100491
>>> y
          A         B         C
0  1.923135  0.135355 -0.285491
1 -0.208940  0.642432 -0.764902
2  1.477419 -1.659804 -0.431375
3 -1.191664  0.152576  0.935773 
```

我应该使用什么合并函数来使用 DataFrame 创建一个 3D 数组？例如，

```
>>> automagic_merge(x, y)
                      A                      B                      C
0 [-0.264438,  1.923135] [-1.026059,  0.135355] [-0.619500, -0.285491]
1 [ 0.927272, -0.208940] [ 0.302904,  0.642432] [-0.032399, -0.764902]
2 [-0.264273,  1.477419] [-0.386314, -1.659804] [-0.217601, -0.431375]
3 [-0.871858, -1.191664] [-0.348382,  0.152576] [ 1.100491,  0.935773] 
```

所以我可以计算这些列表而不是整个列的平均值、sem 等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T17:49:49.077

看看这个：

```
In [14]: glued = pd.concat([x, y], axis=1, keys=['x', 'y'])

In [15]: glued
Out[15]: 
          x                             y                    
          A         B         C         A         B         C
0 -0.264438 -1.026059 -0.619500  1.923135  0.135355 -0.285491
1  0.927272  0.302904 -0.032399 -0.208940  0.642432 -0.764902
2 -0.264273 -0.386314 -0.217601  1.477419 -1.659804 -0.431375
3 -0.871858 -0.348382  1.100491 -1.191664  0.152576  0.935773

In [16]: glued.swaplevel(0, 1, axis=1).sortlevel(axis=1)
Out[16]: 
          A                   B                   C          
          x         y         x         y         x         y
0 -0.264438  1.923135 -1.026059  0.135355 -0.619500 -0.285491
1  0.927272 -0.208940  0.302904  0.642432 -0.032399 -0.764902
2 -0.264273  1.477419 -0.386314 -1.659804 -0.217601 -0.431375
3 -0.871858 -1.191664 -0.348382  0.152576  1.100491  0.935773

In [17]: glued = glued.swaplevel(0, 1, axis=1).sortlevel(axis=1)

In [18]: glued
Out[18]: 
          A                   B                   C          
          x         y         x         y         x         y
0 -0.264438  1.923135 -1.026059  0.135355 -0.619500 -0.285491
1  0.927272 -0.208940  0.302904  0.642432 -0.032399 -0.764902
2 -0.264273  1.477419 -0.386314 -1.659804 -0.217601 -0.431375
3 -0.871858 -1.191664 -0.348382  0.152576  1.100491  0.935773 
```

为了记录，没有必要交换级别和重新排序，只是为了视觉目的。

然后你可以做类似的事情：

```
In [19]: glued.groupby(level=0, axis=1).mean()
Out[19]: 
          A         B         C
0  0.829349 -0.445352 -0.452496
1  0.359166  0.472668 -0.398650
2  0.606573 -1.023059 -0.324488
3 -1.031761 -0.097903  1.018132 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T03:21:48.760

我想出了一种方法。

pandas DataFrames 可以与 DataFrame.add() 函数一起添加：http: [//pandas.sourceforge.net/generated/pandas.DataFrame.add.html](http://pandas.sourceforge.net/generated/pandas.DataFrame.add.html)

所以我可以将 DataFrames 加在一起，然后除以 DataFrames 的数量，例如：

```
avgDataFrame = DataFrameList[0]

for i in range(1, len(DataFrameList)):
    avgDataFrame = avgDataFrame.add(DataFrameList[i])

avgDataFrame = avgDataFrame / len(DataFrameList) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T01:40:39.623

看看`pandas.concat()`功能。当您读入文件时，您可以使用`concat`将生成的 DataFrame 合并为一个，然后只需使用普通的 pandas 平均技术对它们进行平均。

要使用它，只需将要连接的 DataFrame 列表传递给它：

```
>>> x
          A         B         C
0 -0.264438 -1.026059 -0.619500
1  0.927272  0.302904 -0.032399
2 -0.264273 -0.386314 -0.217601
3 -0.871858 -0.348382  1.100491
>>> y
          A         B         C
0  1.923135  0.135355 -0.285491
1 -0.208940  0.642432 -0.764902
2  1.477419 -1.659804 -0.431375
3 -1.191664  0.152576  0.935773
>>> pandas.concat([x, y])
          A         B         C
0 -0.264438 -1.026059 -0.619500
1  0.927272  0.302904 -0.032399
2 -0.264273 -0.386314 -0.217601
3 -0.871858 -0.348382  1.100491
0  1.923135  0.135355 -0.285491
1 -0.208940  0.642432 -0.764902
2  1.477419 -1.659804 -0.431375
3 -1.191664  0.152576  0.935773 
```

# windows - 是否可以使用 MBCS 编译 Metro 风格的 C++ 应用程序

> ID：11174368
> 
> 赞同：1
> 
> 时间：2012-06-24T01:33:48.937
> 
> 标签：windows, windows-8, microsoft-metro

是否可以使用 MBCS 而不是 UNICODE 编译适用于 Windows 8 的 Metro 风格 C++ 应用程序。在 Visual Studio 2012 中，选择“字符集”的选项似乎不适用于 Metro 风格应用程序，并且默认定义了“UNICODE”。我们是否被迫使用 UTF16 字符串？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T02:43:11.630

您被迫使用 UTF16 字符串 - WinRT 字符串数据类型是 unicode，因此与 winrt API 交互的每个字符串都需要是 unicode。

您可以使用任何您想要的字符集自由地编写您的应用程序，但您需要在调用任何 winrt API 之前转换为 UTF16。

# java - 了解java中泛型的使用

> ID：11174371
> 
> 赞同：6
> 
> 时间：2012-06-24T01:34:28.083
> 
> 标签：java, generics

我试图了解类泛型是如何工作的，而这一点对我来说毫无意义。

因此，例如，如果我有以下课程：

```
class A<E> {
    void go (E e) { } 
}

class B extends A { } 
```

然后我尝试

```
A<? extends A> a1 = new A<A>();
A<? extends A> a2 = new A<B>();

a1.go(new A()); // i get a compiler error
a2.go(new B()); // i get a compiler error 
```

go 方法不应该接受 A 或 A 的任何子类吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T02:26:03.430

其原因是基于 Java 如何实现泛型。

**数组示例**

使用数组，您可以做到这一点（数组是协变的，正如其他人所解释的）

```
Integer[] myInts = {1,2,3,4};
Number[] myNumber = myInts; 
```

但是，如果你尝试这样做会发生什么？

```
Number[0] = 3.14; //attempt of heap pollution 
```

最后一行可以编译得很好，但是如果你运行这段代码，你可以得到一个`ArrayStoreException`. 因为您试图将双精度数放入整数数组（无论通过数字引用访问）。

这意味着你可以欺骗编译器，但不能欺骗运行时类型系统。之所以如此，是因为数组就是我们所说*的可具体化类型*。这意味着在运行时 Java 知道这个数组实际上被实例化为一个整数数组，它恰好是通过 type 的引用访问的`Number[]`。

所以，如您所见，一件事是对象的实际类型，另一件事是您用来访问它的引用的类型，对吧？

**Java泛型的问题**

现在，Java 泛型类型的问题是类型信息被编译器丢弃并且在运行时不可用。这个过程称为[类型擦除](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)。在 Java 中实现这样的泛型是有充分理由的，但这是一个很长的故事，它与与预先存在的代码的二进制兼容性有关。

但这里重要的一点是，由于在运行时没有类型信息，因此无法确保我们不会造成堆污染。

例如，

```
List<Integer> myInts = new ArrayList<Integer>();
myInts.add(1);
myInts.add(2);

List<Number> myNums = myInts; //compiler error
myNums.add(3.14); //heap polution 
```

如果 Java 编译器没有阻止你这样做，那么运行时类型系统也不能阻止你，因为在运行时没有办法确定这个列表应该只是一个整数列表。Java 运行时允许你将任何你想要的东西放入这个列表中，而它应该只包含整数，因为当它被创建时，它被声明为一个整数列表。

因此，Java 的设计者确保您不能欺骗编译器。如果你不能欺骗编译器（就像我们可以用数组做的那样），你也不能欺骗运行时类型系统。

因此，我们说泛型类型是*不可具体化的*。

显然，这会妨碍多态性。考虑以下示例：

```
static long sum(Number[] numbers) {
   long summation = 0;
   for(Number number : numbers) {
      summation += number.longValue();
   }
   return summation;
} 
```

现在你可以像这样使用它：

```
Integer[] myInts = {1,2,3,4,5};
Long[] myLongs = {1L, 2L, 3L, 4L, 5L};
Double[] myDoubles = {1.0, 2.0, 3.0, 4.0, 5.0};

System.out.println(sum(myInts));
System.out.println(sum(myLongs));
System.out.println(sum(myDoubles)); 
```

但是如果你试图用泛型集合实现相同的代码，你将不会成功：

```
static long sum(List<Number> numbers) {
   long summation = 0;
   for(Number number : numbers) {
      summation += number.longValue();
   }
   return summation;
} 
```

如果您尝试这样做，您会得到编译器错误...

```
List<Integer> myInts = asList(1,2,3,4,5);
List<Long> myLongs = asList(1L, 2L, 3L, 4L, 5L);
List<Double> myDoubles = asList(1.0, 2.0, 3.0, 4.0, 5.0);

System.out.println(sum(myInts)); //compiler error
System.out.println(sum(myLongs)); //compiler error
System.out.println(sum(myDoubles)); //compiler error 
```

解决方案是学习使用 Java 泛型的两个强大特性，即协变和逆变。

**协方差**

使用协方差，您可以从结构中读取项目，但不能向其中写入任何内容。所有这些都是有效的声明。

```
List<? extends Number> myNums = new ArrayList<Integer>();
List<? extends Number> myNums = new ArrayList<Float>()
List<? extends Number> myNums = new ArrayList<Double>() 
```

你可以阅读`myNums`：

```
Number n = myNums.get(0); 
```

因为您可以确定无论实际列表包含什么，它都可以向上转换为一个数字（毕竟任何扩展数字的东西都是一个数字，对吧？）

但是，不允许将任何内容放入协变结构中。

```
myNumst.add(45L); //compiler error 
```

这是不允许的，因为 Java 无法保证泛型结构中对象的实际类型。它可以是任何扩展 Number 的东西，但编译器不能确定。所以你可以读，但不能写。

**逆变**

使用逆变器，您可以做相反的事情。您可以将事物放入通用结构中，但无法从中读出。

```
List<Object> myObjs = new List<Object();
myObjs.add("Luke");
myObjs.add("Obi-wan");

List<? super Number> myNums = myObjs;
myNums.add(10);
myNums.add(3.14); 
```

在这种情况下，对象的实际性质是一个对象列表，通过逆变，你可以将数字放入其中，基本上是因为所有数字都有对象作为它们的共同祖先。因此，所有数字都是对象，因此这是有效的。

然而，假设你会得到一个数字，你就不能安全地从这个逆变结构中读取任何内容。

```
Number myNum = myNums.get(0); //compiler-error 
```

如您所见，如果编译器允许您编写此行，您将在运行时收到 ClassCastException。

**获取/放置原则**

因此，当您只打算将泛型值从结构中取出时使用协变，当您只打算将泛型值放入结构中时使用逆变，当您打算同时使用两者时使用精确的泛型类型。

我拥有的最好的例子是以下将任何类型的数字从一个列表复制到另一个列表。它只从源头*获取*物品，它只*将*物品放在命运中。

```
public static void copy(List<? extends Number> source, List<? super Number> destiny) {
    for(Number number : source) {
        destiny.add(number);
    }
} 
```

由于协变和逆变的力量，这适用于这样的情况：

```
List<Integer> myInts = asList(1,2,3,4);
List<Integer> myDoubles = asList(3.14, 6.28);
List<Object> myObjs = new ArrayList<Object>();

copy(myInts, myObjs);
copy(myDoubles, myObjs); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T01:48:33.247

当你声明

```
A<? extends A> a1 = new A<A>(); 
```

编译器只知道`a1`的类型参数是`A`或其某个子类——它不知道是哪一个。

如果将其更改为`A<A> a1`，那么它将知道 的实例`A`是合法参数。这同样适用于`a2`。

在相关说明中，该行

```
class B extends A 
```

使用原始类型。你应该说`Class B extends A<SomeType>`or `Class B<E> extends A<E>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T02:05:41.127

错误消息是：类型 A 中的方法 go(capture#1-of ? extends A) 不适用于参数 (A)

原因：您对参考 a1 并不具体。它是在捕获永远无法复制的“？扩展 A”时定义的。同样，当您创建一个新的 A() 时，它会传递另一个“？扩展 A”的捕获，即 A 本身，它不能转换为前者。

# iphone - 为 NSManaged 对象设置委托

> ID：11174375
> 
> 赞同：0
> 
> 时间：2012-06-24T01:36:12.883
> 
> 标签：iphone, ios

我在将 Core Data 对象的委托设置为我拥有的某个视图控制器时遇到问题。我得到了错误，这让我相信它没有合成访问器方法：

```
2012-06-23 18:21:20.566 App[34164:12803] -[NSManagedObject setSyncDelegate:]:    unrecognized selector sent to instance 0x907cf30
2012-06-23 18:21:20.567 App[34164:12803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSManagedObject setSyncDelegate:]: unrecognized selector sent to instance 0x907cf30' 
```

NSManagedObject SavedPhoto 具有以下 .h：

```
@interface SavedPhoto : NSManagedObject

@property (nonatomic, strong) NSString *fileName;
@property (nonatomic, strong) id<SyncPhotoDelegate> syncDelegate;

@end 
```

和.m：

```
@implementation SavedPhoto

@dynamic fileName;
@synthesize syncDelegate = _syncDelegate;

@end 
```

我正在尝试在视图控制器中设置委托，如下所示：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSManagedObjectContext *context = [appDelegate managedObjectContext];
SavedPhoto *savedPhoto = (SavedPhoto *)[NSEntityDescription insertNewObjectForEntityForName:@"SavedPhoto" inManagedObjectContext:context];
[savedPhoto setSyncDelegate:self]; 
```

其中“self”是一个实现了 SyncPhotoDelegate 协议的视图控制器。甚至可以在 NSManagedObject 中拥有综合属性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T01:39:31.650

看起来该实例实际上不是您的班级之一。我会检查您的模型文件以确保其配置正确。请注意，在您的控制台输出中它说的是`[NSManagedObject setSyncDelegate:]`而*不是* `[SavedPhoto setSyncDelegate:]`

# javascript - 未定义的子 ID 可编辑

> ID：11174380
> 
> 赞同：1
> 
> 时间：2012-06-24T01:37:56.127
> 
> 标签：javascript, jquery, jeditable

可编辑设置

```
$('.editable').editable('includes/notes/save.php', {
    loadurl     : 'includes/notes/load.php?id=' + $(this).find("div").prop("id"),//undefined child ID
    type        : 'text',
    onblur      : 'submit',
    indicator   : '<img src="includes/notes/indicator.gif">',
    style       : 'display: inline'
}); 
```

html

```
<tr class="items">
    <td>
        <?php echo $data['item_name']; ?>
    </td>

    <td>
        <div class="editable inventory-notes">
            <!-- need to get the child id below into jeditable -->
            <div id="<?php echo $data['id']; ?>">
                <div class="add_note"></div>
                <div class="edit_note"></div>
                <div class="delete_note"></div>
            </div>
        </div>
    </td>

</tr> 
```

如何将 ID`$data['id']`转换为 jeditable `loadurl`？我正在使用 jQuery 1.6.2。该数据集大约有 1,200 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:39:06.813

```
var id = $('.editable').find("div:first").attr("id");

$('.editable').editable('includes/notes/save.php', {
    loadurl     : 'includes/notes/load.php?id=' + id
    type        : 'text',
    onblur      : 'submit',
    indicator   : '<img src="includes/notes/indicator.gif">',
    style       : 'display: inline'
}); 
```

我看到第二个参数`.editable()`是 an`Object`而不是 a `Function`，所以`this`在这里不起作用。您必须存储之前的内容并在配置中`id`使用它。`.editable()`

### 根据评论

我认为您的整个代码都在`click()`处理程序中，您需要使用

```
var id = $(this).find('div:first').attr('id'); 
```

获得当前点击`id`。

# javascript - 几个函数 ajax json jquery/php

> ID：11174381
> 
> 赞同：1
> 
> 时间：2012-06-24T01:38:29.473
> 
> 标签：javascript, jquery, ajax, json

[http://emafia.co.uk/map/](http://emafia.co.uk/map/)：使用右侧的顶部链接查看我目前拥有的内容。

有人可以帮我解决以下问题吗？

*   修复一次只能选择 1 个文本框
*   提交函数更新 mysql 数据库中的值并返回结果*（有人告诉我为此使用 JSON，但是我尝试过的每个 JSON 函数都无法让它发布数据并接收它）*

到目前为止我的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>land</title>
<link href="style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="map.js"></script>
<style type="text/css">
.credits{font-size: 1.6em; line-height: 2em; margin: 0 0 0 10px;}
</style>
</head> 
```

这是 HTML 正文：

```
<body>
<p class="credits">&nbsp;</p>

<form action="" method="get">
    <div id="map-box">
        <div id="container-map">
            <img src="images/map.gif" alt="Map" name="map1" border="0" usemap="#map1Map" id="map" />
            <map name="map1Map" id="map1Map">
                <area class="sw" shape="poly" coords="162,319,162,303,186,303,186,264,162,264,162,287,175,282,160,297,140,298,110,335,138,335" alt="sw" />
                <area class="s" shape="poly" coords="186,264,206,264,206,312,179,313,162,318,162,303,186,303" alt="s" />
                <area class="se" shape="poly" coords="206,312,243,311,268,298,268,287,251,283,255,279,206,279" alt="se" />
                <area class="e" shape="poly" coords="206,279,255,279,270,267,276,241,252,230,246,238,237,233,221,233,221,264,206,264" alt="e" />
                <area class="em" shape="poly" coords="221,264,196,264,196,209,214,209,214,233,221,233" alt="em" />
                <area class="wm" shape="poly" coords="162,264,196,264,196,209,162,209" alt="wm" />
                <area class="w" shape="poly" coords="162,209,122,209,130,240,141,236,143,251,119,267,123,281,144,279,154,288,162,288" alt="w" />
                <area class="yl" shape="poly" coords="214,233,238,233,245,225,225,173,212,167,176,167,176,185,186,185,186,208" alt="yl" />
                <area class="nw" shape="poly" coords="186,209,169,209,174,184,163,187,156,169,163,155,160,153,176,137,176,185,186,185" alt="nw" />
                <area class="ne" shape="poly" coords="177,167,213,167,209,165,201,128,192,122,176,137" alt="ne" />
                <area class="scot" shape="poly" coords="160,153,192,122,177,110,163,114,170,104,179,100,172,93,178,92,198,49,193,42,162,42,141,51,148,32,166,14,169,1,144,7,125,2,114,34,86,47,86,55,106,69,106,79,95,83,95,98,109,97,113,108,106,138,111,138,116,113,132,131,121,153,124,161,131,159,137,166" alt="scot" />
                <area class="ni" shape="poly" coords="117,176,97,192,91,193,83,190,79,179,70,182,71,187,64,190,53,182,58,163,71,154,80,147,91,143,99,143" alt="ni" />
            </map>
        </div> <!--#container-map-->

        <div id="areas">
            <ul id="regions">
                <li class="nw">North West England <span class="nw-n"></span></li>
                <li class="ne">North East England <span class="ne-n"></span></li>
                <li class="yl">Yorkshire &amp; Lincolnshire <span class="yl-n"></span></li>
                <li class="wm">West Midlands <span class="wm-n"></span></li>
                <li class="em">East Midlands <span class="em-n"></span></li>
                <li class="sw">West &amp; South West <span class="sw-n"></span></li>
                <li class="e">East <span class="e-n"></span></li>
                <li class="s">South <span class="s-n"></span></li>
                <li class="se">London &amp; South East <span class="se-n"></span></li>
                <li class="scot">Scotland <span class="scot-n"></span></li>
                <li class="ni">Northern Ireland <span class="ni-n"></span></li>
                <li class="w">Wales <span class="w-n"></span></li>
            </ul>

            <div id="counties">

                <!--start-->
                <div id="st-c" class="counties-container">
                    <p class="tip">This is where you can wage war over territory, fight for the territory by blowing up drug factorys, destorying bullet rings and even try to do a hit on the owner to completly take over the land... more info shortly</p>
                    <p class="tip">Tip: Double clicking a region will select all counties in that region. (if there is multiple countrys in the region)</p>
                </div>

                <!--nw-->
                <div id="nw" class="counties-container">
                    <h2>North West</h2>

                    <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="nw-t">

<p><b>Results:</b> <span id="results"></span></p>

  <form>
    <br/>
    <input type="checkbox" name="check" value="Manchester" id="ch1"/>

    <label for="ch1">Manchester</label>

    <input type="checkbox" name="check" value=" And Man city" id="ch2"/>

    <label for="ch1">Man city </label>
    <br>
    <br>
    <br>

    <label for="r1">Bomb Factory's</label>
    <input type="radio" name="radio" value=": Bomb" id="r1"/>

    <label for="r1">Attack Guards</label>
    <input type="radio" name="radio" value=": Attack" id="r2"/>

    <label for="r1">Leave</label>
    <input type="radio" name="radio" value=": Leave" id="r3"/>
  </form>

  <input type="submit" name="sub" value="Submit"/>

                    </fieldset>
                </div>

                <!--ne-->
                <div id="ne" class="counties-container">
                    <h2>North East</h2>
                    <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="ne-t">                      
                        <input type="checkbox" /><label>Northumberland</label>                    
                    </fieldset>           
                </div>

                <!--yl-->
                <div id="yl" class="counties-container">
                    <h2>Yorkshire &amp; Lincolnshire</h2>
        <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="yl-t">
                        <input type="checkbox" /><label>Yorkshire</label>
                    </fieldset>
                </div>

                <!--wm-->
                <div id="wm" class="counties-container">
                    <h2>West Midlands</h2>
        <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="wm-t">
                        <input type="checkbox" /><label>Staffordshire</label>
                    </fieldset>
                </div>

                <!--em-->
                <div id="em" class="counties-container">
                    <h2>East Midlands</h2>
        <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="em-t">
                        <input type="checkbox" /><label>Derbyshire</label>
                    </fieldset>

                </div>

                <!--sw-->
                <div id="sw" class="counties-container">
                    <h2>South West</h2>
                    <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="sw-t">
                        <input type="checkbox" /><label>Cornwall</label>
                    </fieldset>
                </div>

                <!--e-->
                <div id="e" class="counties-container">
                    <h2>East</h2>
                    <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="e-t">
                        <input type="checkbox" /><label>Essex</label>
                    </fieldset>

                </div>

                <!--s-->
                <div id="s" class="counties-container">
                    <h2>South</h2>
                    <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="s-t">

                        <input type="checkbox" /><label>Hampshire</label>

                    </fieldset>
                </div>

                <!--se-->
                <div id="se" class="counties-container">
                    <h2>South East</h2>
                    <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="se-t">
                        <input type="checkbox" /><label>London</label>
                    </fieldset>
                </div>

                <!--scot-->
                <div id="scot" class="counties-container">
                    <h2>Scotland</h2>
                    <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="scot-t">

                        <input type="checkbox" /><label>Edinburgh</label>

                    </fieldset>
                </div>

                <!--ni-->
                <div id="ni" class="counties-container">
                    <h2>Northern Ireland</h2>
                    <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="ni-t">
                        <input type="checkbox" /><label>Belfast</label>
                    </fieldset>  

                </div>

                <!--w-->
                <div id="w" class="counties-container">
                    <h2>West</h2>
                    <p class="select"><a class="selectall" title="Select All">Select All</a> | <a class="deselectall" title="Deselect All">Deselect All</a></p>
                    <fieldset class="w-t">

                        <input type="checkbox" /><label>Wrexham</label>

                    </fieldset>
                </div>

            </div> <!--.counties-->

        </div> <!--.areas-->

<div class="clear"></div>

</div> <!--#map-box-->

</form>

</body>
</html> 
```

这是我在页面中的 JavaScript：

```
<script>
    function showValues() {
      var fields = $(":input").serializeArray();
      $("#results").empty();
      jQuery.each(fields, function(i, field){
        $("#results").append(field.value + " ");
      });
    }

    $(":checkbox, :radio").click(showValues);
    $("select").change(showValues);
    showValues();

    $('#form').submit(function() {
    if ($('input:checkbox', this).is(':checked') &&
        $('input:radio', this).is(':checked')) {
        // everything's fine...
    } else {
        alert('Please select something!');
        return false;
    }
});
</script> 
```

# date - 比较两个日期 Google Apps 脚本

> ID：11174385
> 
> 赞同：25
> 
> 时间：2012-06-24T01:39:32.697
> 
> 标签：date, datetime, google-apps-script, date-manipulation

**比较两个日期**的最佳方法是什么？

```
var int = e.parameter.intlistbox;
var startDate = rSheet.getRange(parseInt(int) + 1 ,1).getValues();
// returns Sat Jun 30 2012 00:00:00 GMT-0300 (BRT) 
var toDay = new Date();
// Sat Jun 23 2012 22:24:56 GMT-0300 (BRT)

if (startDate > toDay){ .... 
```

我看到了 .toString() 选项，但这似乎只适用于 == 或 === 运算符。

这件事有什么清楚的吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-24T07:58:15.487

该`Date`对象具有`valueOf`返回自 1970-01-01 午夜以来的毫秒数的方法。您可以使用它来比较日期。就像是

```
var date01 = new Date();
var date02 = new Date(2012, 5, 24);
if (date01.valueOf() > date02.valueOf()) {
   ....
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-25T16:23:11.420

前段时间有人发过这个，我觉得很有帮助

```
function testDate() {
    var futureDate = new Date('8/31/2020');
    var todayDate = new Date();
    Logger.log(DateDiff.inMonths(todayDate, futureDate));
    Logger.log(DateDiff.inYears(todayDate, futureDate));             
}

var DateDiff = {    
    inDays: function(d1, d2) {
        var t2 = d2.getTime();
        var t1 = d1.getTime();

        return parseInt((t2-t1)/(24*3600*1000));
    },
    inWeeks: function(d1, d2) {
        var t2 = d2.getTime();
        var t1 = d1.getTime();

        return parseInt((t2-t1)/(24*3600*1000*7));
    },
    inMonths: function(d1, d2) {
        var d1Y = d1.getFullYear();
        var d2Y = d2.getFullYear();
        var d1M = d1.getMonth();
        var d2M = d2.getMonth();

        return (d2M+12*d2Y)-(d1M+12*d1Y);
    },
    inYears: function(d1, d2) {
        return d2.getFullYear()-d1.getFullYear();
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-18T14:35:34.953

```
// Date, Date -> Number
// Get the number of days between two dates

test("Date Diff In Days", 5, function(){
  ok(DateDiffInDays(new Date("January 1, 2000"), new Date("January 1, 2000")) == 0, "Ok");
  ok(DateDiffInDays(new Date("January 1, 2000"), new Date("January 2, 2000")) == 1, "Ok");
  ok(DateDiffInDays(new Date("January 1, 2000"), new Date("January 11, 2000")) == 10, "Ok");
  ok(DateDiffInDays(new Date("January 11, 2000"), new Date("January 1, 2000")) == -10, "Ok");
  ok(DateDiffInDays(new Date("January 1, 2000"), new Date("April 10, 2000")) == 100, "Ok");
});

function DateDiffInDays(a, b) 
{
  var _MS_PER_DAY = 1000 * 60 * 60 * 24;
  // Discard the time and time-zone information.
  var utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());
  var utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());
  return Math.floor((utc2 - utc1) / _MS_PER_DAY);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-10T22:52:50.593

哇，我来晚了。我发现将日期转换为一年中的整数天是最容易的。所以 1 月 1 日是 1 日，2 月 1 日是 32 日，以此类推。

这是那个脚本：

```
today = parseInt(Utilities.formatDate(new Date(),"EST","D")); 
```

如果您要从电子表格中获取一个值，只需将该值放入新的 Date() 中：

```
today = parseInt(Utilities.formatDate(new Date(rSheet.getRange(parseInt(int) + 1 ,1).getValues()),"EST","D")); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-25T16:32:32.907

我做了一些工作，不是那么迷人，但它似乎有用。

```
var startDate = rSheet.getRange(parseInt(int) + 1 ,1).getValues();
var toDay = new Date();

 var sYyyy = Utilities.formatDate(new Date(startDate), "GMT-2","yyyy");
 var sMm = Utilities.formatDate(new Date(startDate), "GMT-2","MM");
 var sDd = Utilities.formatDate(new Date(startDate), "GMT-2","dd");

 var tYyyy = Utilities.formatDate(new Date(toDay), "GMT-2","yyyy");
 var tMm = Utilities.formatDate(new Date(toDay), "GMT-2","MM");
 var tDd = Utilities.formatDate(new Date(toDay), "GMT-2","dd");

 if (sYyyy + sMm + sDd > tYyyy + tMm + tDd) {.... 
```

我也会查看其他答案并试一试。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-24T07:57:53.213

日期对象可以像任何其他变量一样进行比较。唯一棘手的事情是，例如，如果您需要比较同一天的两个日期并期望得到 date A = date B ，在这种情况下，您会遇到问题，因为日期还包括小时和分钟（以及秒 + 毫秒）！（这就是为什么我建议在您所指的帖子中使用字符串来检查相等性）。您可以做的是在两个变量中将小时、分钟、秒和毫秒设置为 0，以便仅在日、月、年进行比较。请参阅[w3schools 日期参考页面](http://www.w3schools.com/jsref/jsref_obj_date.asp)以了解如何执行此操作。

另一种可能性是将两个日期都转换为字符串，并使用`Utilities.formatDate()`和播放`substrings()`来获取您需要的数据，但我想这不是一个非常优雅的继续方式;-)

# c# - 如何使内联数组初始化像字典初始化一样工作？

> ID：11174388
> 
> 赞同：21
> 
> 时间：2012-06-24T01:41:14.817
> 
> 标签：c#, syntax, initialization, magic-methods

为什么可以这样初始化`Dictionary<T1,T2>`：

```
var dict = new Dictionary<string,int>() { 
    { "key1", 1 },
    { "key2", 2 }
}; 
```

`KeyValuePair<T1,T2>`...但不是以完全相同的方式初始化一个对象数组：

```
var kvps = new KeyValuePair<string,int>[] {
    { "key1", 1 },
    { "key2", 2 }
};
// compiler error: "Array initializers can only be used in a variable 
// or field initializer.  Try using a new expression instead." 
```

我意识到我可以通过`new KeyValuePair<string,int>() { "key1", 1 }`为每个项目编写等来使第二个示例工作。但我想知道是否可以使用与第一个示例相同类型的简洁语法。

如果不可能，那么是什么让*Dictionary*类型如此特别？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-24T01:47:16.080

集合初始值设定项语法被转换为`Add`具有适当数量参数的调用：

```
var dict = new Dictionary<string,int>();
dict.Add("key1", 1);
dict.Add("key2", 2); 
```

这种特殊的初始化语法也适用于其他具有`Add`方法和实现的类`IEnumerable`。让我们创建一个完全疯狂的类，只是为了证明没有什么特别之处，`Dictionary`并且这种语法适用于任何合适的类：

```
// Don't do this in production code!
class CrazyAdd : IEnumerable
{
    public void Add(int x, int y, int z)
    {
        Console.WriteLine(x + y + z); // Well it *does* add...
    }

    public IEnumerator GetEnumerator() { throw new NotImplementedException(); }
} 
```

现在你可以这样写：

```
var crazyAdd = new CrazyAdd
{
    {1, 2, 3},
    {4, 5, 6}
}; 
```

输出：

```
6
15 
```

在线查看它：[ideone](http://ideone.com/AeG4J)

至于您询问的其他类型：

*   它不适用于数组，因为它没有`Add`方法。
*   `List<T>`有一个`Add`方法，但它只有一个参数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-24T01:49:01.693

它确实适用于 Dictionary，因为它有一个`Add`需要两个参数的重载。数组甚至没有`Add`方法，更不用说有两个参数的了。

该类`Dictionary`专门设计用于`KeyValuePair<,>`内部使用，这是您不需要手动调用构造函数的唯一原因，而是调用两个参数`Add`并在引擎盖下构造 KeyValuePair。

每个其他`IEnumerable<KeyValuePair<,>>`都没有这个特殊的实现，因此必须以这种方式初始化：

```
var array = new KeyValuePair<int, int>[] {
    new KeyValuePair<int, int>(1, 2),
    new KeyValuePair<int, int>(3, 4)
}; 
```

您可以使用自己的类创建相同的行为，比如假设您实现了这个：

```
class ThreeTupleList<T1, T2, T3> : List<Tuple<T1, T2, T3>>
{
    public void Add(T1 a, T2 b, T3 c)
    {
        this.Add(new Tuple<T1, T2, T3>(a, b, c));
    }

    // You can even implement a two-argument Add and mix initializers
    public void Add(T1 a, T2 b)
    {
        this.Add(new Tuple<T1, T2, T3>(a, b, default(T3)));
    }
} 
```

你可以像这样初始化它，甚至可以混合使用三个、两个和一个参数的初始化器：

```
var mylist = new ThreeTupleList<int, string, double>()
{
    { 1, "foo", 2.3 },
    { 4, "bar", 5.6 },
    { 7, "no double here" },
    null
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T01:43:00.777

你的问题源于它是一个数组，而不是一个集合。

```
var kvps = new KeyValuePair<string,int>[] {
    { "key1", 1 },
    { "key2", 2 }
}; 
```

真的应该是：

```
var kvps = new KeyValuePair<string, int>[] {
    new KeyValuePair<string, int>("key1", 1),
    new KeyValuePair<string, int>("key2", 2)
}; 
```

赠品是括号。`[]`是一个数组。`{}`是一个集合。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T02:09:39.150

感谢多个回答者指出*Add*方法是使初始化语法起作用的~~神奇~~ *秘诀。*所以我可以通过继承有问题的类（KeyValuePair）来实现我的目标：

```
public class InitializableKVPs<T1,T2> : IEnumerable<KeyValuePair<T1,T2>>
{
    public void Add(T1 key, T2 value) 
    {
        throw new NotImplementedException();
    }

    public IEnumerator<KeyValuePair<string,string>>  GetEnumerator()
    {
        throw new NotImplementedException();
    }

    IEnumerator  IEnumerable.GetEnumerator()
    {
        throw new NotImplementedException();
    }
} 
```

这现在被编译器接受：

```
var kvps = new InitializableKVPs<string,int> {
    { "key1", 1 },
    { "key2", 2 }
}; 
```

**编辑**：Philip Daubmeier 的回答对此有一个实际、简洁的实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-06T15:14:35.730

# 覆盖 C# 6.0 语法的 IDictionary

如果有人像我一样来到这里，希望为新的 C# 6.0 字典初始化器语法保存一些击键，它可以完成，但需要从 IDictionary 派生。您只需要实现 this[] set 方法即可使其工作，这会留下大量未实现的方法。

类实现如下所示：

```
// Seriously!  Don't do this in production code! Ever!!!
public class CrazyAdd2 : IDictionary<string, int>
{
    public int this[string key]
    {
        get { throw new NotImplementedException(); }
        set {Console.WriteLine($"([{key}]={value})"); }
    }

#region NotImplemented
// lots of empty methods go here
#endregion
} 
```

然后使用它：

```
var crazyAdd2 = new CrazyAdd2
{
    ["one"] = 1,
    ["two"] = 2,
}; 
```

和输出：

```
([one]=1)
([two]=2) 
```

这是一个演示整个事情的小提琴：

[https://dotnetfiddle.net/Lovy7m](https://dotnetfiddle.net/Lovy7m)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T01:50:04.927

您可能看不到它，但它是相同的语法。唯一的区别是数组将元素作为输入，而字典采用二维数组。

```
int[] a = new int[]{5,6};
int[,] a = new int[]{{5,6},{3,6}};
Dictionary<int,int> a = new Dictionary<int,int>{{5,6},{3,6}}; 
```

# ios - 如何针对登录过程的钥匙串检查/比较文本字段中的值？

> ID：11174397
> 
> 赞同：0
> 
> 时间：2012-06-24T01:43:50.740
> 
> 标签：ios, core-data, keychain, nsfetchrequest, nsentitydescription

我正在创建一个多用户 iPhone 应用程序，并且正在尝试完成用户登录过程中的编码。我可以成功创建一个帐户，并将用户输入的数据存储到 Core Data DB 中，并将 pin 存储到 Keychain 中，所以现在我正在尝试完成登录过程。下面列出的以下代码是我到目前为止所拥有的，我收到一个错误，**“帐户”没有可见的@interface 声明选择器“密码：”**

```
- (IBAction)processLogin:(id)sender {

// hide keyboard
[_textFieldUsername resignFirstResponder];
[_textFieldPin resignFirstResponder];

// First - make activity indicator visible, then start animating, then turn of wrong user / pin label
_welcomeActivityIndicator.hidden = FALSE;
[_welcomeActivityIndicator startAnimating];
[_wrongUserPin setHidden:YES];

// check if username and pin text fields are populated
if ([_textFieldUsername.text length ] == 0 &&  [_textFieldPin.text length ] == 0)
{
    [_welcomeActivityIndicator stopAnimating];
    [_wrongUserPin setHidden:NO];   
}

// CORE DATA
// NSManagedObjectContext *context = _managedObjectContext;

NSFetchRequest *request= [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Account" inManagedObjectContext:_managedObjectContext];
NSPredicate *predicate =[NSPredicate predicateWithFormat:@"username=%@",self.textFieldUsername.text];

// TODO check pin
Account *pinAccount = [[Account alloc] init];

// GETTING ERROR ON BELOW LINE OF CODE! - ERR0R - No visible @interface for 'Account' declares the selector 'password:'
[pinAccount password:_textFieldPin.text];

[request setEntity:entity];
[request setPredicate:predicate];

NSError *error = nil;

NSArray *array = [_managedObjectContext executeFetchRequest:request error:&error];
if (array != nil) {
    NSUInteger count = [array count]; // may be 0 if the object has been deleted.
    NSLog(@"Username may exist, %@",count);
}

else {
    NSLog(@"Username does not exist.");
}
} 
```

Account 类文件**m**和**h**如下所示：

**帐户.m**

```
- (NSString*)password 
{
if (self.username)
    return [KeychainHelper getPasswordForKey:self.username];
return nil;
}

- (void)setPassword:(NSString*)aPassword 
{
if (self.username) [KeychainHelper setPassword:aPassword forKey:self.username];

}
- (void)prepareForDeletion
{
if (self.username) [KeychainHelper removePasswordForKey:self.username];
}
@end 
```

**帐户.h**

```
#import "AccountBase.h"

@interface Account : AccountBase {

}

// nonatomic - don't worry about multithreading

@property (nonatomic, assign) NSString *password;

- (void)setPassword:(NSString*)aPassword;

@end 
```

我将不胜感激任何想法或想法，并感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:10:30.877

嗯，小错字？采用：

`[pinAccount setPassword:_textFieldPin.text];`

代替：

`[pinAccount password:_textFieldPin.text];`

? 或者我可能遗漏了一些东西......

**[更新]**

*   您正在调用一个名为**(NSString *)password**的选择器。
*   您的错误消息说选择器在界面中不可见。（我认为这意味着您打错了字，实际上是指“setPassword”。）

相反，我认为错误是在您的 .h 文件中，**(NSString *) 密码**选择器未在界面中定义，因此任何外部代码都看不到它。

即您可以将此行添加到您的 .h 文件中：

```
- (NSString *)password; 
```

（我可能会将选择器从*密码*重命名为不同的名称，以免与属性混淆。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T06:17:02.140

它没有调用 Account.h 接口中声明的方法。并且`[pinAccount password:_textFieldPin.text];`正在调用一个与Account 的属性共享同名的函数，即该属性的getter。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:28:19.903

我能够使用以下代码检查/验证引脚。

```
// CORE DATA
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Account" inManagedObjectContext:_managedObjectContext];

// set entity for request
[request setEntity:entity];

// filter results using a predicate
NSPredicate *pred =[NSPredicate predicateWithFormat:(@"username = %@"), _textFieldUsername.text];

// set predicate for the request
[request setPredicate:pred];

NSError *error = nil;

// store DB usernames in results array
NSArray *results = [_managedObjectContext executeFetchRequest:request error:&error];

NSLog(@"The returned results are %@",results);

// check text field against results stored in DB
for (Account *anAccount in results) {
    if ([anAccount.username isEqualToString:_textFieldUsername.text]){
        NSLog(@"Your username exists");
        if ([anAccount.password isEqualToString:_textFieldPin.text]){
            NSLog(@"Your pin is correct"); 
```

# assembly - PC 启动：dl 寄存器和驱动器号

> ID：11174399
> 
> 赞同：8
> 
> 时间：2012-06-24T01:44:22.087
> 
> 标签：assembly, x86, bootloader, x86-16, bios

我在互联网上的某个地方读到，在跳转到 0x7c00 之前，BIOS 将启动设备的“驱动器号”加载到 %dl 中。但是这个“驱动器号”是什么？连接到计算机的每个设备都由 BIOS 分配一个编号？如果是这样，我怎么知道给定设备分配给哪个号码？

阅读 GRUB 的源代码，我发现当 %dl 设置了位 0x80 和 0x70 时，它会用 0x80 覆盖整个寄存器。这是为什么？这是代码：

```
jmp 3f      /* grub-setup may overwrite this jump */
testb $0x80, %dl
jz 2f
3:
/* Ignore %dl different from 0-0x0f and 0x80-0x8f.  */
testb $0x70, %dl
jz 1f
2:     
movb $0x80, %dl
1: 
```

顺便一提。网上有没有关于电脑启动过程的详细资源？特别是关于 BIOS 在将控制权交给引导加载程序之前所做的事情以及用于与之通信的标准代码（如“驱动器编号”）。我希望编写自己的引导加载程序，但我发现的一切都太模糊了，技术上还不足以在我的引导加载程序开始运行时通知计算机的确切状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T03:11:58.413

BIOS int 13h 函数接受驱动器号。它应该是 BIOS 中的那种驱动器号`DL`，因为它本身使用 int 13h 来加载引导扇区。

# android - 启动“最近的应用程序”不是通过按住主页按钮

> ID：11174402
> 
> 赞同：-3
> 
> 时间：2012-06-24T01:45:10.463
> 
> 标签：android

我想从我的应用程序中启动最近的活动应用程序，而无需按住主页按钮。我如何启动该对话活动？那可能吗 ？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:01:41.883

不，这是不可能的。操作系统不提供对此的访问（此外，在 Android 3.0+ 上，对话框已完全改变）。

但是，您可以使用['s](http://developer.android.com/reference/android/app/ActivityManager.html#getRecentTasks%28int,%20int%29)以及（或其子类）创建自己的[对话框，以处理相同的任务。](http://developer.android.com/guide/topics/ui/dialogs.html)[`ActivityManager``getRecentTasks`](http://developer.android.com/reference/android/app/ActivityManager.html#getRecentTasks%28int,%20int%29)[`Dialog`](http://developer.android.com/reference/android/app/Dialog.html)

# javascript - 如何在 href 中使用 JavaScript 变量？

> ID：11174412
> 
> 赞同：1
> 
> 时间：2012-06-24T01:48:05.990
> 
> 标签：javascript, html, variables, hyperlink

我有一个从表单字段中获取的 JavaScript 变量，我正在尝试将它用于`href = value`链接中。在 HTML 中输出这个 JavaScript 变量的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T01:53:27.033

这应该是你需要的。

```
var link = "http://www.google.com/";
var a = document.getElementById('yourlinkId');
a.href = link; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T01:50:03.507

通过 javascript 更新 href 值。使用 jQuery 之类的东西很简单：

```
var link = "www.google.com";
$("a").attr("href", link); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-24T01:51:31.307

如果您不使用 jQuery，请尝试以下操作：

```
document.write('<a href="'+variable+'">Link to some site</a>'); 
```

# php - 更新我刚刚创建的记录

> ID：11174420
> 
> 赞同：2
> 
> 时间：2012-06-24T01:50:38.517
> 
> 标签：php, mysql

我正在创建一个人事招聘网站，但在将新数据添加到上一页创建的记录时遇到问题。

为了便于使用，我将表格分成了多个步骤（每个步骤都在一个新页面上），其中第 1 步在候选人数据库表中创建记录并插入候选人的个人详细信息（姓名、姓氏、联系方式、性别等）并将用户发送到下一页（步骤 2），其中可以上传个人资料图片，并将图像的路径插入到新创建记录的字段中。

问题在于我似乎无法获取调用相关记录的记录 ID 的代码。我想过使用 mysql_insert_id 但问题是双重的。首先，我不确定我是否知道如何正确使用它，并且在这方面的多次谷歌搜索让我一点也不聪明。其次，由于公司将在全国拥有多个分支机构，因此有可能两个用户同时添加候选人，而用户 A 最终可能会将照片添加到用户 B 创建的记录中。

我曾尝试使用 $_POST 来获取记录 ID，但是一旦将数据插入表中，数据似乎并没有将数据传递到下一页。

我对 PHP 并不完全陌生，但这不是我以前做过的事情，因为我曾经有一个朋友会处理这种事情，但不幸的是，他几个月前去世了，所以我不得不学习如何去做我一直这样下去，但收效甚微。

我希望我对我的问题足够清楚，因为我有点茫然。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:55:57.537

最好使用 php PDO 。在那里，有一个函数可以获取插入行的 ID（[http://us3.php.net/manual/en/pdo.lastinsertid.php](http://us3.php.net/manual/en/pdo.lastinsertid.php)）。当你运行插入代码时，在它之后运行它，它会给你刚刚插入的行的 ID。现在，将该 ID 附加到用户的链接或会话变量（或任何其他用户特定的），您将能够轻松跟踪每个人将能够编辑的最后一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:57:30.497

首先，我将使用 PDO（或 mysqli）插入已弃用的 mysql_* 扩展。

使用 PDO，在执行语句后，您可以使用两个函数来获取所需的 ID：

```
$stmt->execute($values);     // $stmt contains the prepared statement

$return_code = $stmt->rowCount();
// $return_code = 1 : new record
// $return_code = 2 : updated record

if ($return_code == 1)
{
    $ID_YOU_NEED = $db->lastInsertId();    // $db is the database connection
} 
```

顺便说一句，我之所以使用，`rowCount()`是因为我通常`ON DUPLICATE KEY UPDATE`在大多数插入查询中使用，您可以跳过该步骤。

然后我会将 ID 存储在会话中~~或将其添加为下一个表单的隐藏字段~~。

顺便说一句，根据要求，在所有需要的信息都进来之前，我不会在数据库中存储任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T01:59:36.567

第一的，

在将记录插入数据库的页面中，您需要获取新创建记录的 id。使用[mysqli::insert-id](http://www.php.net/manual/en/mysqli.insert-id.php)还有其他方法可以做到。

第二，

将记录 id 存储在用户的会话中，并在后续页面中使用它来更新记录。出于安全原因，将 id 存储在会话中很重要，而不是作为 url GET 值或“隐藏”字段。

# c#-4.0 - 如何在自定义编写的 PowerShell cmdlet 中安全地处理密码？

> ID：11174425
> 
> 赞同：2
> 
> 时间：2012-06-24T01:51:11.587
> 
> 标签：c#-4.0, powershell, cmdlets

假设我有一个自定义的 PowerShell Cmdlet，它可以导出数据并使用密码对其进行加密。

```
[Cmdlet(VerbsData.Export, "SampleData")]
public class ExportSampleData : PSCmdlet
{
    [Parameter(Mandatory = true)]
    public string Password
    {
        get;
        set;
    }

    /* additional parameters */
} 
```

如何安全地妥善处理密码？例如，我想阻止管理员在控制台中键入该值时显示该值。其他选项包括读取包含加密密码的文件。

我知道 PSCredential 但这需要一个在这种情况下没有意义的用户名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T05:25:34.193

如果只想获取密码，可以使用

`Read-Host``–asSecureString`带有参数的 cmdlet 。

此参数屏蔽输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:55:27.130

您可以在[此答案](https://stackoverflow.com/a/10173670/608772)中找到一种使用计算机密码进行加密的方法（适用于安全机器）。

使用@Christian 响应，您可以像这样将密码放入磁盘：

```
PS > $cred.Password | ConvertFrom-SecureString | Set-Content c:\temp\password.txt 
```

并用以下方式检索它：

```
$password = Get-Content c:\temp\password.txt | ConvertTo-SecureString
$cred = New-Object System.Management.Automation.PsCredential "UserName",$password 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T02:06:01.883

将 Password 参数的类型更改为 SecureString；如果管理员省略 -Password 参数，PowerShell 将通过提示管理员输入必填参数并在他们键入时显示星号来做正确的事情。

理想情况下，您的 cmdlet 的实现会将 SecureString 传递给一些原生支持 SecureString（最安全）的 API；如果没有，您必须从 SecureString 中提取密码。这是一篇关于如何做到这一点的好文章：[如何正确地将 SecureString 转换为字符串](http://blogs.msdn.com/b/fpintos/archive/2009/06/12/how-to-properly-convert-securestring-to-string.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-23T05:20:06.683

如果您正在编写 C# PowerShell Cmdlet，并且其中一个参数要求用户输入密码，则应该对其进行混淆处理。

要做到这一点，你需要`using System.Security;`

然后你的参数类型应该是`SecureString`.

所以使用你的例子：

```
[Cmdlet(VerbsData.Export, "SampleData")]
public class ExportSampleData : PSCmdlet
{
    [Parameter(Mandatory = true)]
    public SecureString Password
    {
        get;
        set;
    }

/* additional parameters */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-29T11:24:13.933

SecureString-Handling 让您感觉更加安全，即使情况并非如此。您可以像这样轻松加密任何 SecureString...

```
$mrsh = [System.Runtime.InteropServices.Marshal]
$ptr  = $mrsh::SecureStringToBSTR($secureString)
$pass = $mrsh::PtrToStringAuto($ptr) 
```

甚至不用像这样的 webclient-object 编组......

```
$cred = Get-Credential
$web = [Net.WebClient]::new()
$web.Credentials = [System.Net.NetworkCredential]::new($cred.UserName,$cred.Password)
$pass = $web.Credentials.Password 
```

因此，总而言之，密码和 SecureString-Password 都不应永久存储为文件或其他任何内容。使此信息的生命周期尽可能短 - 例如，从输入密码到清除密码变量及其所有继承变量，如下所示：

```
Remove-Variable pass, cred, web -ea 0 
```

# r - 计算经过的“时间”，其中参考时间取决于一个因素

> ID：11174428
> 
> 赞同：0
> 
> 时间：2012-06-24T01:52:21.400
> 
> 标签：r, plyr

我正在尝试计算数据框中的经过时间，其中经过时间的“开始”值取决于数据框中因子列的值。（为了简单的问题，我将时间值视为数字而不是时间对象 - 我的问题是关于拆分应用组合，而不是时间对象）。我的数据框如下所示：

```
df <- data.frame(id=gl(2, 3, 5, labels=c("a", "b")), time=1:5) 
```

我想通过从每次中减去每个因子级别的最小时间来计算经过时间（尽管为了这个示例，我将只处理数值，而不是时间值）。所以我想将数据框拆分为，从列中的每个元素中`id`减去最小值，然后返回一个带有转换值的向量（或数据框）。我想最终得到类似的东西：`y``y`

```
> dfTrans
id  time  elapsed
a      1        0
a      2        1
a      3        2
b      4        0
b      5        1 
```

对 plyr 来说似乎是一项完美的任务，但我找不到简单的解决方案。

我能想到的最好的是

```
elapsed <- dlply(df, .(id), function(x) x$time - min(x$time))
elapsed_comb <- NA
for(i in 1:length(names(elapsed))) {
  elapsed_comb <- c(elapsed_comb, elapsed[[i]])
}
elapsed_comb <- elapsed_comb[-1]
df$elapsed <- elapsed_comb 
```

这是不雅的，而且看起来很脆弱。肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T04:51:47.633

当结果是一个长度与数据帧中的行数相同的向量时，您应该首先考虑“ave”函数：

```
 df$elapsed <- ave(df$time, df$id, FUN=function(x) x -min(x) )
 df
  id time elapsed
1  a    1       0
2  a    2       1
3  a    3       2
4  b    4       0
5  b    5       1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T02:06:27.283

这是一个ddply解决方案

```
ddply(df, .(id), summarize, time = time, elapsed = seq(length(id))-1) 
```

一个使用 rle 代替

```
df$elapsed <- unlist(sapply(rle(as.numeric(df$id))$lengths, seq))-1 
```

# mysql - Mysql数据分区和修剪

> ID：11174429
> 
> 赞同：0
> 
> 时间：2012-06-24T01:53:05.860
> 
> 标签：mysql, partitioning

我们的主表 tblLink 在其他几个表中也将其主键作为外部表，其中一个表将是 tblMainData，随着时间的推移将有数百万行。

我们希望根据 tblLink 中的插入日期仅保留 3 个月的数据。

其余的我们要清除并保留以生成历史报告。在这种情况下，最好的机制是什么？下面是我们的表结构的样子。

```
CREATE TABLE IF NOT EXISTS `tblLink` (
  `linkID` int(5) NOT NULL,
  `compID` int(5) NOT NULL,
  `vehicleID` int(5) NOT NULL,  
  `deviceID` int(5) NOT NULL,
  `locationFromID` int(5) NOT NULL,
  `locationToID` int(5) NOT NULL,
  `employeeIDInsert` int(5) NOT NULL,
  `dateTimeInsert` datetime NOT NULL,
  `dateTimeStartJourney` datetime NOT NULL,
  `dateTimeEnd` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `dateTimeEndJourney` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',   
  `linkStatus` enum('a','d','e','m') NOT NULL,
  PRIMARY KEY (`linkID`)  
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `tblEmailLog` (
  `emailLogID` int(11) NOT NULL AUTO_INCREMENT,
  `compID` smallint(6) NOT NULL,
  `linkID` int(11) NOT NULL DEFAULT '0',
  `userID` smallint(6) NOT NULL,
  `alertCodeID` tinyint(4) NOT NULL,
  `eventAlertID` int(11) NOT NULL,
  `userEmail` varchar(100) NOT NULL,
  `alertDateTime` datetime NOT NULL,
  `alertInsertDateTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`emailLogID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `tblEventAlert` (
  `eventAlertID` int(11) NOT NULL AUTO_INCREMENT,
  `compID` int(5) NOT NULL,
  `mainDataID` int(5) NOT NULL,
  `vehicleID` int(5) NOT NULL,
  `eventAlertSentEmail` varchar(50) DEFAULT NULL,
  `eventAlertMessage` varchar(255) NOT NULL,
  PRIMARY KEY (`eventAlertID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `tblMainData` (
  `mainDataID` int(11) NOT NULL AUTO_INCREMENT,
  `linkID` int(5) NOT NULL,
  `header` varchar(3) NOT NULL,
  `deviceSerialNumber` varchar(20) NOT NULL,
  `latitude` double NOT NULL,
  `longitude` double NOT NULL,
  `speed` float NOT NULL,
  `course` int(3) NOT NULL,
  `dateTimer` datetime NOT NULL,
  `gpsDateTime` datetime NOT NULL,
  `insertDateTime` datetime NOT NULL,
  `odoMeter` float NOT NULL DEFAULT '0',
  `driverID` int(5) NOT NULL, 
  `eventAlertID` int(11) NOT NULL DEFAULT '0',
  `mainDataInsertDateTime` datetime NOT NULL,
  `gpsString` varchar(450) NOT NULL,
  PRIMARY KEY (`mainDataID`),
  KEY `dateTime` (`dateTimer`),
  KEY `linkID` (`linkID`),  
  KEY `eventAlertID` (`eventAlertID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `tblSubData` (
  `subDataID` int(11) NOT NULL AUTO_INCREMENT,
  `mainDataID` int(11) NOT NULL,
  `linkID` int(11) NOT NULL,
  `eventAlertID` int(11) NOT NULL,
  `deviceSerialNumber` varchar(20) NOT NULL,
  `subdeviceSerialNumber` varchar(20) NOT NULL,
  `dateTimer` datetime NOT NULL,
  `eventType` varchar(2) NOT NULL
  PRIMARY KEY (`subDataID`),
  KEY `mainDataID` (`mainDataID`),
  KEY `linkID` (`linkID`),
  KEY `eventAlertID` (`eventAlertID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:31:34.237

您可以实现每 3 个月的日期范围分区，以便提高性能，并且对 3 个月数据的查询不会扫描历史数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:25:27.960

这是一个例子.,

==

创建表 t2

(

日期

)

按范围划分（TO_DAYS（dt））

(

分区 p01 值小于 (TO_DAYS('2007-01-01')),

分区 p02 值小于 (TO_DAYS('2007-04-01')),

分区 p03 值小于 (TO_DAYS('2009-07-01')),

分区 p04 值小于（最大值）

);

==

# php - 如何改进此输出以不包含如此多的 html？

> ID：11174431
> 
> 赞同：2
> 
> 时间：2012-06-24T01:53:31.473
> 
> 标签：php

我对 php 很陌生，想知道如何改进这段代码。我知道它并不完美，但鼓励任何建设性的批评，因为我正在努力提高自己的 PHP 水平。请我问的是，如果您确实以一种改进的方式回答，您可以稍微扩展一下答案，让我知道为什么它更好，这样我就可以全面了解改进。

```
public function displayArticle(){
    //Check to see if we are getting the home page
    if($_GET['page'] == 'home'){
        //Display the results formatted
        $content = "<article class=\"igpPost\">";
            $content .= "<div class=\"igpPost-Divider\"></div>";
            $content .= "<header>";
            $content .= "<h3><a href=\"#\">Ready Up – StarCraft 2, LoL, and Dota 2 pros head to DreamHack Summer</a></h3>";
            $content .= "<div class=\"igpPost-AuthTime\"><span>Posted By: </span><a href=\"#\">Cameron Lockhart</a> <span>at 07:44PM on June 15, 2012</span></div>";
            $content .= "<div class=\"igpPost-AuthTime\"><span>Tags: </span><a href=\"#\">TAG HERE</a> ,<a href=\"#\">TAG HERE</a> ,<a href=\"#\">TAG HERE</a> ,<a href=\"#\">TAG HERE</a> ,<a href=\"#\">TAG HERE</a> ,<a href=\"#\">TAG HERE</a></div>";
            $content .= "<div class=\"igpPost-Img\"><img src=\"images/news/DreamHack-Summer-2012-logo.jpg\"/></div>";
            $content .= "</header>";
            $content .= "<p>Did last week’s MLG Spring Championship leave you thirsting for more eSports? Then DreamHack Summer 2012 has you covered. With well-attended tournaments for StarCraft 2, League of Legends, and Dota 2, DreamHack should keep you busy throughout the weekend and into the work-week. It starts tomorrow at 11 AM Eastern, and continues through Monday, with the StarCraft 2 Grand Final scheduled for 5:15 PM Eastern.</p>";
            $content .= "<footer class=\"igpPost-Footer\">";
            $content .= "<div class=\"igpPost-ReadMore\">";
            $content .= "<h1><a href=\"#\">Read More..</a></h1>";
            $content .= " </div>";
            $content .= "</footer>";
            $content .= "</article>";
    }
        //If it is not the home page and it is a single article
        if($_GET['article']){
            //Display the article formatted
        }
} 
```

此外，这显然不是一个完整的脚本，但看起来它对 PHP 来说似乎很重要。我阅读了一些教程，我认为他们将我带向了错误的方向，因为它们是正确的并使用了良好的 PHP。

更新：我通过并尝试修改一些代码，以便提供更具描述性的概述：

```
$sql = "SELECT * FROM articles LIMIT $number";
        $stmt = $pdo->query($sql);
        $stmt->setFetchMode(PDO::FETCH_ASSOC);

        while($row = $stmt->fetch()){
            //Display the results formatted
            $content = "<article class=\"igpPost\">";
            $content .= "<div class=\"igpPost-Divider\"></div>";
            $content .= "<header>";
            $content .= "<h3><a href=\"index.php?article=" . $row['id'] ."\">" . $row['title'] . "</h3>";
            $content .= "<div class=\"igpPost-AuthTime\"><span>Posted By: </span><a href=\"#\">" . $row['author'] . "</a> <span>at " . formatDateTime($row['datetime']) . "</span></div>";
            $content .= "<div class=\"igpPost-AuthTime\"><span>Tags: </span>";
            $content .= "<div class=\"igpPost-Img\"><img src=\"" . $row['imglocation'] ."\"/></div>";
            $content .= "</header>";
            $content .= "<p>" . $row['content'] . "</p>";
            $content .= "<footer class=\"igpPost-Footer\">";
            $content .= "<div class=\"igpPost-ReadMore\">";
            $content .= "<h1><a href=\"index.php?article=" . $row['id'] ."\">Read More..</a></h1>";
            $content .= " </div>";
            $content .= "</footer>";
            $content .= "</article>";

            echo $content;
        } 
```

这就是我想要的，我基本上试图将 html 与 PHP 分开，但在需要的地方插入动态内容。这都在一个班级里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:01:36.017

您可以在这里使用各种东西，包括 heredoc 语法（与您所拥有的直接等效）：

```
 $content = <<<END
<article class="igpPost">
    <!-- ... -->
</article>
END; 
```

（请注意，您不能缩进该`END;`部分。）

另一种选择是使用输出缓冲和`include`内容脚本：

```
ob_start();
include 'someViewFile.php';
$content = ob_get_contents();
ob_end_clean(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:17:13.940

我不知道减少 HTML，因为我不知道您的具体需求，但是，您可以使用 HEREDOC 大大简化 PHP 代码。

HEREDOC ( [PHP Manual HEREDOC](http://us3.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc) ) 是一种用于输出字符串和在双引号内输出变量的方法。不同之处在于无需转义其中的任何引号。

您的代码可以像这样使用 HEREDOC：

```
$sql = "SELECT * FROM articles LIMIT $number";
    $stmt = $pdo->query($sql);
    $stmt->setFetchMode(PDO::FETCH_ASSOC);

    while($row = $stmt->fetch()){
        //Display the results formatted
        $dateTime = formatDateTime($row['datetime']) // functions cannot be used in HEREDOCS, so I replace it with the variable $dateTime declared here
        $content = <<<HERE
<article class="igpPost">
<div class="igpPost-Divider"></div>
<header>
    <h3><a href="index.php?article="$row['id']">$row['title']</h3>
    <div class="igpPost-AuthTime"><span>Posted By: </span><a href="#">$row['author']</a> <span>at $dateTime</span></div>
    <div class="igpPost-AuthTime"><span>Tags: </span>
    <div class="igpPost-Img"><img src="$row['imglocation']"/></div>
    </header>
    <p>$row['content']</p>
    <footer class="igpPost-Footer">
    <div class="igpPost-ReadMore">
    <h1><a href="index.php?article="$row['id']">Read More..</a></h1></div>
    </footer>
</article>
HERE;
echo $content;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T02:05:58.660

尽可能退出 PHP，除非您需要对`$content`变量执行其他操作。我不确定你何时/何地/如何调用你的函数，但我假设经过一些检查，什么不是

```
<?php 
  //Do any checks/validation etc here before you send something out to the server

?>
<html><head><!--HEADER STUFF HERE--></head>
<body>
<!-- anything you want before your content here -->

<?php
if($_GET['page'] == 'home'){
?>
<div class="igpPost-Divider"></div>
<header>
 ....
</footer>
</article>
<?php
}
  //If it is not the home page and it is a single article
    if($_GET['article']){ ?>
       <!-- HTML for article here --> 
    <?php
    }
?>
</body>
</html> 
```

# perl - Perl 中的“做”函数

> ID：11174434
> 
> 赞同：2
> 
> 时间：2012-06-24T01:54:57.407
> 
> 标签：perl

最近，我有一个 perl 脚本，它使用“do”调用另一个 perl 脚本；IE。

`do "./script2.pl $arg1 $arg2";`

我的 script2.pl 旨在使用 2 个参数。

但是，以上述方式调用 script2.pl 不会将参数传递给 script2.pl。

我知道还有另一种使用“system”的方法，但是我的script1.pl 需要通过“require”获取一些变量值。

我真的可以使用“do”并将参数传递给我的 script2 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-24T05:07:03.307

如果您正在调用的脚本需要参数，它将在变量中期望它们`@ARGV`。如果您使用`do`，`@ARGV`则调用脚本中的 将在被调用脚本中可见。

```
{
    local @ARGV = ($arg1, $arg2);
    do './script2.pl';
} 
```

像这样使用将恢复块末尾的`local`旧值，有点像说`@ARGV`

```
@ARGV_old = @ARGV;
@ARGV = ($arg1,$arg2);
do './script2.pl';
@ARGV = @ARGV_old; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T02:28:50.883

`system()`简短的回答是，如果你想用参数调用另一个脚本，你可能想要使用：

```
use autodie;
system('./script2.pl', $arg1, $arg2);

# OR if you don't want to install autodie from CPAN
system('./script2.pl', $arg1, $arg2) == 0
    or die "cannot run script2.pl: $!"; 
```

如果您需要共享解释器，您可能希望以完全不同的方式执行此操作。例如，对于快速脚本，我有时会`require`这样使用：

```
our $SHARED_VALUE = 0;
our $OTHER_VALUE = 42;

require 'script2.pl'; 
```

在`script2.pl`中，您可以定义：

```
our ($SHARED_VALUE, $OTHER_VALUE); 
```

当`script2.pl`通过 require 加载时，这些变量将被设置。这仍然不是最好的方法。

更好的是，使用包来共享代码，但这会超出问题的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T02:10:53.220

如果你想共享变量，那么它们应该在同一个模块中。否则你在写意大利面条。

如果你想构造你的代码，以便一个文件封装一些功能，那么让它成为一个模块并让“使用模块”包含它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T02:16:00.147

不，您不能将参数传递给带有`do`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-28T15:26:16.680

您还可以在主程序中注入您的脚本

```
 eval `cat ./script2.pl` 
```

这样它就可以访问主程序的所有范围变量。

# google-apps-script - GAS 可以在 List Feed Spreadsheets API 中使用结构化查询吗？

> ID：11174437
> 
> 赞同：0
> 
> 时间：2012-06-24T01:55:02.600
> 
> 标签：google-apps-script, google-spreadsheet-api

正如线程标题所问的那样，我想知道在 Google Apps 脚本中是否可以调用电子表格 API 中的结构化查询。或者那不可行？该文档有关于协议、Java 和 .NET 的示例，但没有针对 GAS 的示例。如果有可能，如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:01:38.000

我已经为 GAS 创建了电子表格列表 API 包装器库。请看。 [关联](https://github.com/soundTricker/SpreadsheetDB-For-Google_Apps_Script)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T21:04:49.750

这是我用来从脚本执行查询并检索其结果的函数：

```
function myFunction() 
{
   var ss = SpreadsheetApp.getActive();
   var sh = ss.getActiveSheet();
   var qry = "=QUERY(E1:e12,\"select E\")"
   var frng = sh.getRange("C14:C14");
   frng.setFormula(qry);
   var startRow = 14;  
   var lastRow = sh.getLastRow();  
   var msg = "values:";
   for (var i = 14; i <= lastRow; i++)
   {
      var cx = sh.getRange("C" + i);
      var val = cx.getValue();
      var msg = msg + ", " + val;
   }
   Browser.msgBox(msg);
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T16:14:28.617

我是 Google Apps 脚本的新手。但是在使用调试器时，我注意到以下对象锚定到“this”对象。

```
Jdbc     (the methods are listed below)
  Types
  ResultSet
  Statement
  Connection
  ParameterMetaData
  DatabaseMetaData
  ResultSetMetaData
  RowIdLifetime 
```

对我来说，这意味着您可以访问任何与 JDBC 交互的数据库。考虑到脚本在 Google 服务器上运行，您可能非常受限于可以使用/访问的数据库管理系统。

我不知道单个数据库管理系统的实际设置。到目前为止，我还没有使用过一个。

希望这可以帮助。

# r - R：将带有嵌入标识符的列表转换为数据框

> ID：11174444
> 
> 赞同：1
> 
> 时间：2012-06-24T01:57:03.697
> 
> 标签：r, dataframe

我是 R 的新手，通过查看这个精美网站上的其他问题，我学到了很多东西！

但现在我正在处理一个我无法从其他示例中弄清楚的数据管理问题，所以我希望你能提供帮助。

我有一组从 csv 文件中读入的调查回复，并整理成一个矢量，格式如下例所示：

```
test <- c(
  "[1234],Bob Smith,",
  "Q-0,Male",
  "Q-1,18-25",
  "Q-2,Computer Science",
  ",",
  "[5678],Julie Lewis",
  "Q-0,Female",
  "Q-1,18-25",
  ",",
  ","
) 
```

请注意，它`","`出现在自己的行上，因为我曾经处理`fill=TRUE`过`read.csv`并非所有行的长度都相同的事实。另请注意，并非所有受访者都回答了所有问题。

我需要把它变成如下结构的数据框：

```
 ID      name         gender   age    major
1    [1234]  Bob Smith    Male     18-25  Computer Science
2    [5678]  Julie Lewis  Female   18-25  NA
   ... 
```

似乎我无法将向量逐行读入矩阵或数据框中，因为并非所有问题都已被所有受访者回答。关于如何处理这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:46:27.193

首先以正确的格式读取 csv 文件可能会省去很多麻烦。`read.csv`是一个强大的功能，应该能够处理您的数据，并且这种处理不应该是必要的。

但是，这里有：

```
x <- matrix(test, byrow=TRUE, ncol=5)
x <- x <- sub("Q-\\w+,", "", x)
x[x==","] <- NA
x <- cbind(matrix(unlist(strsplit(x[, 1], ",")), byrow=TRUE, ncol=2), x[, -1])
x <- as.data.frame(x, stringsAsFactors=FALSE)
names(x) <- c("ID", "Name", "Gender", "Age", "Major", "V1") 
```

这导致：

```
x

      ID        Name Gender   Age            Major   V1
1 [1234]   Bob Smith   Male 18-25 Computer Science <NA>
2 [5678] Julie Lewis Female 18-25             <NA> <NA> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:35:15.447

这有点笨拙，但它有效。

这是数据：

```
test <- c(
"[1234],Bob Smith,",
"Q-0,Male",
"Q-1,18-25",
"Q-2,Computer Science",
",",
"[5678],Julie Lewis",
"Q-0,Female",
"Q-1,18-25",
",",
"[1234],Bob Smith,",
"Q-1,18-25",
"Q-2,Computer Science",
","
) 
```

这是操作代码：

```
#remove rows with just a comma
test <- test[test!=","]
#find id cases and remove the commas between the id and the name
#and add an id label
idcases <- grep("\\[.*\\]",test)
test[idcases] <- paste("id,",gsub(",","",test[idcases]),sep="")
#find id values positions and end position
idvals <- c(idcases,length(test)+1)
#generate a sequence identifier for each respondent
setid <- rep(1:(length(idvals)-1),diff(idvals))
#put the set id against each value
result1 <- paste(setid,test,sep=",")
#split the strings up and make them a data.frame
result2 <- data.frame(do.call(rbind,strsplit(result1,",")))
#get the final dataset with a reshape
final <- reshape(result2,idvar="X1",timevar="X2",direction="wide")[,-1]
#clean up the names etc
names(final) <- c("name","gender","age","major")
final$id <-  gsub("(\\[.*\\])(.*)","\\1",final$name)
final$name <- gsub("(\\[.*\\])(.*)","\\2",final$name) 
```

这使：

```
> final
         name gender   age            major     id
1   Bob Smith   Male 18-25 Computer Science [1234]
5 Julie Lewis Female 18-25             <NA> [5678]
8   Bob Smith   <NA> 18-25 Computer Science [1234] 
```

# html - 我可以做吗 尺寸包括儿童 与位置：绝对？

> ID：11174447
> 
> 赞同：0
> 
> 时间：2012-06-24T01:57:38.463
> 
> 标签：html, css, css-position

我正在建立一个网站并且遇到了一些问题。

如果 HTML 代码是这样的：

```
<div class="parent">    
    <div class="child">
         **contents1**
    </div>

     **contents2**
</div> 
```

和 CSS 样式表，如：

```
.parent{ position: relative;}
.child{ position: absolute; top: 10px; left: 20px;} 
```

在这种情况下，*'parent'*的边框不包含*'child'*的区域，而只包含内容 2 的边界框。

有没有办法解决它？

我希望父的边界框包括其子边界框，而不管它们的位置属性如何。

我也许可以通过*JQuery*计算父级的大小，

但我认为有一种方法可以只使用 CSS。

希望能得到肯定的答复。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:16:15.410

`position:absolute;`将元素从文档流中取出——这几乎是该属性的重点。

但是，如果您`.child`的高度是静态的，则可以通过对其父级应用适当的填充来摆脱，如下所示：

```
.parent{position:relative;padding-top:60px;} /*(40+10*2)px*/
.child{position:absolute;top:10px;left:20px;height:40px;} 
```

[摆弄](http://jsfiddle.net/ovfiddle/Tuy3v/1/)

如果您仍想考虑`.child`尺寸，那么绝对定位可能已被滥用，并且您可能会选择替代方案（如果没有更好的上下文很难提出建议）

我通常建议您也不要使用[匿名块](http://www.w3.org/TR/CSS2/visuren.html#anonymous-block-level)。

# ios - CALayer 上 CABasicAnimation 变换的问题

> ID：11174448
> 
> 赞同：0
> 
> 时间：2012-06-24T01:57:42.870
> 
> 标签：ios, cocoa, core-animation, calayer

我正在尝试为 CAGradientLayer 上的变换设置动画，但是无论我做什么，我似乎都无法进行更改。此代码运行后，图层仍然不可见（即 scale.y 仍为 0.0f）。

```
@implementation NickView

+(Class) layerClass {
    return [CAGradientLayer class];
}

- (void) didMoveToWindow {    
    self.backgroundColor = [UIColor clearColor];

    CAGradientLayer* gLayer = (CAGradientLayer*)self.layer;

    [gLayer setColors:
     [NSArray arrayWithObjects:
      (id) [UIColor blackColor].CGColor,
      (id) [UIColor redColor].CGColor,
      (id) [UIColor blackColor].CGColor,
      nil]];

    gLayer.transform = CATransform3DMakeScale(1.0, 0.0f, 1.0f);
    [self performSelector:@selector(doAnimation) withObject:nil afterDelay:3.0f];
}

- (void) doAnimation  {
    CABasicAnimation* a = [CABasicAnimation animationWithKeyPath:@"transform.scale.y"];
    a.delegate = self;
    a.duration = 5.0f;
    a.toValue = [NSNumber numberWithFloat:1.0f];
    [self.layer addAnimation:a forKey:@"anim"];
} 
```

}

有谁知道为什么这不会导致图层的 scale.y 被动画回 1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:25:35.067

我似乎记得使用 0 的比例会导致图层折叠到零大小。尝试使用 0.001 而不是 0 的大小。

# ios - CIFilter 输出宽高为零

> ID：11174451
> 
> 赞同：0
> 
> 时间：2012-06-24T01:58:10.447
> 
> 标签：ios, core-image

我正在尝试过滤从 imagePicker 获得的图像。原始图像在我的代码中存储得非常好，但是当我尝试使用 CIFilter 对其进行过滤时，生成的 UIImage“filteredImage”大小为 0x0 像素。

我在这里发布了完整的功能，它是图像选择器委托方法。

**更新：**过滤器“CISepiaTone”有效，并为我提供了尺寸正确的图像。但是 CIColorMonochrome 在 iOS 上也可用，我通过询问 CIFilter 来检查可用的过滤器选项。

**更新 2：**找到它 - inputColor 参数必须是 CIColor 类型而不是 UIColor，我在参考中忽略了这一点。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    // Filter the image
    CIImage *filterImage = [[CIImage alloc] initWithCGImage:image.CGImage];
    CIFilter *colorMono = [CIFilter filterWithName:@"CIColorMonochrome"];
    [colorMono setDefaults];
    [colorMono setValue:filterImage forKey:@"inputImage"];
    [colorMono setValue:[UIColor yellowColor] forKey:@"inputColor"];

    CIImage *outputImage = [colorMono outputImage];
    CIContext *con = [CIContext contextWithOptions:nil];
    CGImageRef filteredImageRef = [con createCGImage:outputImage fromRect:[outputImage extent]];
    UIImage *filteredImage = [UIImage imageWithCGImage:filteredImageRef scale:1.0f orientation:UIImageOrientationUp];
    // filteredImage dimensions are 0x0 px here!

    CGImageRelease(filteredImageRef);

    // Save image in imageStore
    CFUUIDRef uniqueId = CFUUIDCreate(kCFAllocatorDefault);
    CFStringRef uniqueIdStringRef =  CFUUIDCreateString(kCFAllocatorDefault, uniqueId);

    NSString *key = (__bridge NSString *)uniqueIdStringRef;
    [[FPImageStore sharedStore] setImage:filteredImage forKey:key];
    imageKey = key;

    CFRelease(uniqueId);
    CFRelease(uniqueIdStringRef);

    // Dismiss imagePicker viewController
    [self dismissViewControllerAnimated:YES completion:nil];    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:21:33.010

inputColor 参数的类型必须是 CIColor 而不是 UIColor，我在参考中忽略了这一点。

# java - Java 中的 BigDecimal

> ID：11174454
> 
> 赞同：7
> 
> 时间：2012-06-24T01:59:46.813
> 
> 标签：java, bigdecimal

我正在考虑使用 BigDecimal 来比较两个四舍五入为 2 位的货币值。例如，我希望以下结果为 0，因为我将应该舍入为 0.02 的值与 0.02 的值进行比较。但它产生 -1 !! 有正确的方法吗？

这也应该适用于更大的数字，比如 123.45 vs 123.4534 ...当使用“compareTo”时应该产生 0。

我试过使用数学上下文，但它看起来并不优雅......有正确的方法吗？

```
BigDecimal spread = new BigDecimal(0.01934);
spread.setScale(2, RoundingMode.HALF_EVEN);
System.out.format("0.0193 ? 0.02 = %d\n", spread.compareTo(new BigDecimal(0.02))); 
```

解决方案是：

```
BigDecimal spread = new BigDecimal(0.01934).setScale(2, RoundingMode.HALF_EVEN);
BigDecimal loSpread = new BigDecimal(0.02).setScale(2, RoundingMode.HALF_EVEN);
System.out.format("0.0193 ? 0.02 = %d\n", spread.compareTo(loSpread)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T02:04:27.450

首先，BigDecimal 是不可变的。您必须从 setScale 方法调用返回结果：

```
spread = spread.setScale(2, RoundingMode.HALF_EVEN); 
```

接下来，您必须提高第二个 BigDecimal 的准确性，因为它是从双精度派生的——不是一个非常准确的实体。所以尝试一个字符串：

```
 spread.compareTo(new BigDecimal("0.02")) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T02:13:05.767

0.02 被评估为

```
java.math.BigDecimal = 0.0200000000000000004163336342344337026588618755340576171875 
```

你也必须在那里设置Scale(2, RoundingMode.HALF_EVEN)。

# clojure - 跳过 AOT 的原因？

> ID：11174459
> 
> 赞同：30
> 
> 时间：2012-06-24T02:02:07.777
> 
> 标签：clojure, noir

在许多黑色应用程序中，我看到了以下声明。跳过 aot 的目的是什么？什么时候用，什么时候不用？有什么优点/缺点吗？

```
:main ^{:skip-aot true} sample-app.server 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-12T11:42:08.590

This isn't specific to noir but one scenario you might want to skip AOT for a given namespace is when deploying your code to a PaaS provider such as heroku.

Heroku performs AOT compilation of your code by default so consider this snippet in your server.clj:

```
(db/connect! (System/getenv "DB_URL"))

(defn start [port]
  (run-jetty app {:port port :join? false :max-threads 100})) 
```

In principle this code seems harmless and will work locally regardless of it being AOT-compiled.

However during compilation on heroku, the environment variable "DB_URL" isn't available yet so the `connect!` statement above will try to connect to `nil` and throw an exception.

Skipping AOT compilation of this namespace is one way of preventing this.

Another, and my preferred approach at the moment would be to change it slightly to this:

```
(defn bootstrap! []
  (db/connect! (System/getenv "DB_URL")))

(defn start [port]
  (bootstrap!)  
  (run-jetty app {:port port :join? false :max-threads 100})) 
```

That way it's a little clearer what your intention is and you avoid attempting a database connection during compilation.

I learned this the hard way and documented it in [this blog post](http://www.leonardoborges.com/writings/2012/09/10/clojure-leiningen-heroku-aot-compilation-gotchas/).

Hope this is useful.

# android - RelativeLayout 中的 SurfaceView 不会绘制

> ID：11174460
> 
> 赞同：0
> 
> 时间：2012-06-24T02:02:25.927
> 
> 标签：android, layout, surfaceview

我有一个 XML 布局，想向其中添加我自己的自定义 SurfaceView 并在其画布上绘图。当我调试时，画布运行它的 onDraw 并进入 unlockandpost 功能，但它总是只是一个黑屏。这是我的代码。我已经尝试了几个小时并尝试了多种替代方法，例如将我的自定义 SurfaceView 添加到 XML 中而不是动态添加它，但我得到了相同的结果。

任何帮助，将不胜感激，

谢谢你。

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white"
>
<ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/guitar_neck">
</ImageView>
<RelativeLayout
        android:id="@+id/letter_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
/> 
```

```
 public class BeginGame extends Activity implements OnClickListener {
public RelativeLayout game_screen;
public LetterBar theBar;
public SurfaceHolder holder;
public static int width, height;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    try {
        theBar = new LetterBar(this);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Display display = getWindowManager().getDefaultDisplay(); 
    width = display.getWidth();  // deprecated
    height = display.getHeight();  // deprecated

    setContentView(R.layout.game_menu);
    game_screen = (RelativeLayout)findViewById(R.id.letter_bar);
    game_screen.addView(theBar);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

} 
```

}

```
 public class LetterBar extends SurfaceView implements SurfaceHolder.Callback {
private int width, height, toneWidth, toneHeight;
private Paint backgroundPaint, paint;

private Resources res;
private Drawable myImage;
private Bitmap neck, b;

private LetterThread _thread;

public LetterBar(Context context) throws IOException {
    super(context);
    // TODO Auto-generated constructor stub

    getHolder().addCallback(this);
    _thread = new LetterThread(getHolder(), this);

    paint = new Paint();
    paint.setColor(0xFFFFFF);
    backgroundPaint = new Paint();
    backgroundPaint.setARGB(0, 255, 255, 255);

    res = context.getResources();

    neck = BitmapFactory.decodeFile("/assets/guitar_neck.gif");

    InputStream bitmap=null;
    b = BitmapFactory.decodeResource(context.getResources(), R.drawable.guitar_neck);
    toneWidth = b.getWidth();
    toneHeight = b.getHeight();
}

@Override
public void onDraw(Canvas canvas){
    canvas.drawText("TEST", 20, 20, paint);
    canvas.drawBitmap(b, 0, 0, paint);
}

@Override
public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder arg0) {
    // TODO Auto-generated method stub
    setWillNotDraw(false);
    _thread.setRunning(true);
    _thread.start();
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // simply copied from sample application LunarLander:
    // we have to tell thread to shut down & wait for it to finish, or else
    // it might touch the Surface after we return and explode
    boolean retry = true;
    _thread.setRunning(false);
    while (retry) {
        try {
            _thread.join();
            retry = false;
        } catch (InterruptedException e) {
            // we will try it again and again...
        }
    }
}
 }

 public class LetterThread extends Thread {
private SurfaceHolder _surfaceHolder;
private LetterBar letter_bar;
private boolean _run = false;

public LetterThread(SurfaceHolder surfaceHolder, LetterBar bar) {
    _surfaceHolder = surfaceHolder;
    letter_bar = bar;
}

public void setRunning(boolean run) {
    _run = run;
}

@Override
public void run() {
    Canvas c;
    while (_run) {
        c = null;
        try {
            c = _surfaceHolder.lockCanvas(null);
            synchronized (_surfaceHolder) {
                letter_bar.onDraw(c);
            }
        } finally {
            // do this in a finally so that if an exception is thrown
            // during the above, we don't leave the Surface in an
            // inconsistent state
            if (c != null) {
                _surfaceHolder.unlockCanvasAndPost(c);
            }
        }
    }
}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:11:10.957

目前您`paint`和`backgroundPaint`两者都有 alpha `0`。

试试这个：

```
paint = new Paint();
paint.setColor(0xFFFFFFFF); // Added alpha bits out front to make it visible white
backgroundPaint = new Paint();
backgroundPaint.setARGB(255, 255, 255, 255); // 255 alpha bit, so it's visible black 
```

# php - 什么条件使 Minecraft 帽子透明

> ID：11174461
> 
> 赞同：1
> 
> 时间：2012-06-24T02:03:16.897
> 
> 标签：php, transparency, skin, minecraft

基本上我正在编写一个显示 Minecraft 皮肤的 PHP 脚本。我知道 Minecraft 皮肤中唯一可以透明的部分是蒙版覆盖区域，或“帽子”。该脚本运行良好，直到我找到了像 Notch（Minecraft 的创造者）这样的皮肤，除了主体部分外，它的背景都是全黑的。我知道纯黑色 (#000000) 不能作为透明度键，因为我见过皮肤在蒙版上有黑色部分但仍然透明的情况。此外，当我在 Photoshop 中打开我的个人皮肤时，背景区域几乎是黑色的 - #101010，即 RGB(16,16,16)，但在游戏中仍然显示为透明。我的问题是如何确定帽子的像素是否透明？我可能想多了。

这是 Notch 的皮肤——![](../Images/beb73bb9d3ca39840436a3029a0f839f.png)

矿 -![在此处输入图像描述](../Images/28a1a1fe1bc487d0c647b056f7c6249c.png)

我在 Photoshop 中的 -![](../Images/c2d24fc9b3980beb8cb82ff6c0353b85.png)

我对黑色透明键有什么误解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T02:10:52.287

包含透明度的图像可以将透明颜色设置为任何值。大多数情况下，当我创建这样的文件时，我实际上是让透明的颜色变得花哨，比如明亮的粉红色或其他东西，这样就很明显了。但是，确切的透明度本身是在文件中设置的，而不是在 php 本身中。使用 Photoshop 之类的程序，您可以进入图像选项（例如[http://answers.yahoo.com/question/index?qid=20090430191631AA61iQJ](http://answers.yahoo.com/question/index?qid=20090430191631AA61iQJ)）并设置所需的确切 RBG。

如果您无法按原样显示文件，我将假设您正在对图像进行一些动态操作 - 这可能会导致透明度信息丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:23:27.647

您上传的图片不透明。

Minecraft 中的所有图片都是 PNG，PNG 格式具有透明度。在 Photoshop 中编辑图片时，您可以看到透明部分为灰色和白色的正方形。如果我没记错颜色表中设置为索引 255 的那些图片的透明度。并且可以是任何颜色。

看下面的图片：

![http://i.imgur.com/Bqo0s.png](../Images/2ed8a687cf5c737e71bfc6845bf3ec3f.png) ![在此处输入图像描述](../Images/72dcf2b9ddbfad995a79b2854c7b24ad.png)

它们都具有背景透明度。但是当您将它们保存到您的计算机时，其中一个的背景会显示为黑色，而另一个显示为紫红色（#FF00FF）。

将网页另存为时，可以在 Photoshop 中设置透明度颜色`Matte color`

在 PHP PNG 库中，您可以读取透明度颜色索引 (PNG8)

# php - 我的搜索有效，但如果使用了很多单词，它会返回大量不相关的东西

> ID：11174462
> 
> 赞同：0
> 
> 时间：2012-06-24T02:03:49.090
> 
> 标签：php, javascript, sql

我的搜索有效，但如果使用了很多单词，它会返回大量不相关的东西。任何关于如何将搜索固定到哪里的想法，如果搜索长短语，它会拉出一个更窄的结果，而不是更多的东西。我认为这个功能可能正在为每个单独的文章标题搜索每个关键字，我不确定它有什么问题

```
function search_results($search_for) {
$returned_results = array();
$where = "";

$search_for = preg_split('/[\s]+/', $search_for);
$total_search_words = count($search_for);

foreach($search_for as $key=>$search_term) {
    $where .= "`review_title` LIKE '%$search_term%'";

    if($key != ($total_search_words - 1)) {
        $where .= " OR ";
    }
}
$value = $_POST['search_value'];
$results = "SELECT * FROM `reviews` WHERE `review_referral` = '$value' AND $where";
$results_num = ($results = mysql_query($results)) ? mysql_num_rows($results) : 0;

if($results_num === 0) {
    return false;
} else {

    while($results_row = mysql_fetch_assoc($results)) {
        $returned_results[] = array(
                            'review_title' => $results_row['review_title'],
                            'review_body' => $results_row['review_body'],
                            'user_id' => $results_row['user_id'],
                            'user_firstname' => $results_row['user_firstname'],
                            'user_lastname' => $results_row['user_lastname'],
                            'review_id' => $results_row['review_id'],
                            'review_body' => $results_row['review_body'],
                            'review_referral' => $results_row['review_referral'],
                            'rating' => $results_row['rating'],
                            'review_date' => $results_row['review_date'],
                            'review_category' => $results_row['review_category'],
                            'review_url' => $results_row['review_url'],
                            'referral_category' => $results_row['referral_category'],
        );

    }

return $returned_results; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:05:57.243

如果您想缩小搜索范围，您应该使用 AND 而不是 OR。

```
if($key != ($total_search_words - 1)) {
    $where .= " AND ";
} 
```

# php - 使用 PayPal 为我的捐赠系统制定策略时遇到问题

> ID：11174464
> 
> 赞同：-1
> 
> 时间：2012-06-24T02:04:43.170
> 
> 标签：php, redirect, paypal-ipn, eclipse-pdt

我希望用户输入捐赠金额，按捐赠，让它自动将他们重定向回他们输入游戏内用户名的页面，然后就完成了。

我原本打算使用 IPN，但它显然不会自动返回。当我启用自动返回时，它不会传递变量，它只是重定向。

然后我在某个地方看到我应该使用 PDT，这对我来说是一个完全不同的世界。我没有看到太多关于它的教程，甚至没有来自 PayPal 的测试工具。这让我相信那不是我应该做的。

有人可以指导我如何设置一个按照我一开始描述的方式工作的系统吗？我希望它需要最少的用户交互。只需输入捐款金额，提交，输入他们的用户名，完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:33:10.333

您可以使用[捐赠按钮](https://www.paypal.com/us/cgi-bin/?cmd=_donate-intro-outside)Paypal 网页，您可以在其中找到创建按钮的向导，以及与之关联的任何相关代码。

**另请参阅：** [捐赠按钮入门](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_donation_buttons)

使用 Paypal 高级功能，您可以自定义网站的退货地址等等：

请参阅[第 2 页 - 指定捐赠按钮的高级功能](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_donation_buttons#id08AAF0RH0WS)

* * *

为了获得更个性化的用户体验，您可以查看[网站支付标准的 HTML 变量，](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)其中记录了用于与 Paypal 交互的参数，并允许您使用自己的 HTML 环境（直到某一点......）。

# html - 如何改变输入框的大小？

> ID：11174465
> 
> 赞同：0
> 
> 时间：2012-06-24T02:05:26.420
> 
> 标签：html, css, checkbox, textbox

我正在使用这个 css 文件，但让我烦恼的一件事是 css 文件使输入有点大。

[http://jsfiddle.net/fcfku/](http://jsfiddle.net/fcfku/)并进入“显示高级选项”。

如何设置尺寸？同样对于复选框（对于 TOS），如何更改检查图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T02:22:13.070

必须调整以下规则：

```
input, textarea, select {
    /*line-height*/
    font: 12px/1.5 'Open Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;
    /*possibly excessive padding*/
    padding: 5px 10px;
}

input, select {
    /*height applied to too many elements*/
    height: 30px;
} 
```

此外，应该首先应用 css 重置，*即*在任何其他规则之前

# java - 多次读取 JApplet 中的文件

> ID：11174471
> 
> 赞同：0
> 
> 时间：2012-06-24T02:06:36.483
> 
> 标签：java, bufferedreader, japplet

我不认为这是我的代码的问题，所以我将解释一下情况，希望它可以被清除。我有一个 JApplet，它正在读取一个包含所有玩家姓名的 .txt 文件。当我创建一个播放器时，这个文件被更新以使用 php 将播放器添加到列表中，这工作正常，我可以在加载小程序时从文本文件中读取播放器列表，如果我创建一个字符，php 文件会更新我的文本立即归档。如果我尝试使用与启动时正常读取的相同方法再次从文本文件中读取播放器列表，则它不会读取更新的文件。所以基本上我想知道小程序是否只是在启动时预加载所有文件，而不是每次都直接从 web 服务器或 web 目录中读取它们，它将文件保存在与我的网站相同的位置。如果是这种情况，是否有办法让它更新文件。它只发生在浏览器中。在 Eclipse 中，它可以毫无问题地读取更改的文件。

```
try{
     URL url = new URL("http://mywebsitegoeshere.com/playerNames.txt");

     BufferedReader br = new BufferedReader(new InputStreamReader(url.openStream()));

     String line = "";

     while(null != (line = br.readLine())) {
        if(line.equals(name + ".txt")){
           return true;
        }
     }
     br.close();

}catch(Exception er){} 
```

这只是我代码的一小部分，我从中删除了一些内容，以了解我如何阅读文件。我正在使用 php 编辑文件，效果很好。我只需要知道 JApplet 是如何读取我的文件的，因为当我第一次读取文件时它会很好地读取它，然后在更改 Web 服务器上的 .txt 文件后，它会读取原始文件而不是更改后的文件。我可能只需要改变我存储用户信息的方式，我只是认为这对于这个小游戏来说是一种简单的方法。

# javascript - 将事件添加到动态创建的元素的奇怪结果

> ID：11174474
> 
> 赞同：0
> 
> 时间：2012-06-24T02:07:21.873
> 
> 标签：javascript, events

此代码将运行（至少在 Firefox 中），并将创建 onmouseover 事件处理程序并将其附加到指定为具有子菜单的三个元素上，方法是在名称前加上一个 _。它不会将处理程序添加到不应该拥有它的处理程序中。

如果我在 Firebug 中进行追踪，一切似乎都运行良好；也就是说，处理程序附加了正确的 id 和 navtitle。

在浏览器中，正确的元素会触发 mouseover 事件。但是，在每种情况下传递给该事件处理程序的参数都是“6”和“其他”，尽管事实上没有事件处理程序甚至附加到“其他”。我想我已经正确地确定了一切，所以我不明白为什么会这样。

我在这里想念什么？

谢谢！

// 我将添加子元素的父元素

```
var navdiv = document.getElementById('nav') 

var navarray = ['','Home', '_Books', '_Pictures', '_Characters','Other'] 
```

// 水平菜单

```
var nnav = navarray.length

for (var ii = 1; ii < nnav; ii++) 
{

// get title and determine whether it has a submenu
var subflag = false
var navtitle = navarray[ii]
var firstchar = navtitle[0]
if (firstchar == '_') 
{
    navtitle = navtitle.substring(1, navtitle.length - 1)
    navtitle += '*'
    subflag = true

}

// Create Div

var naventry = document.createElement('div')
var navid = 'nav' + navarray[ii]
naventry.setAttribute('id', navid)
naventry.setAttribute('class', 'navitem')
// Create Link
var lnk = document.createElement('a')
lnk.setAttribute('href', navarray[ii] + '.html')
if (subflag) // will have a submenu
{
    lnk.onmouseover = function () { dropmenu(ii, navtitle) }
}

var txtnode = document.createTextNode(navtitle)
lnk.appendChild(txtnode)

naventry.appendChild(lnk)
navdiv.appendChild(naventry)
lnk = null
}

function dropmenu(which, ntitle) 
{
alert('In drop menu: Id = ' + which + '  ' + ntitle)
return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:22:31.593

`dropmenu(ii, navtitle)` 是原因，因为`ii`等于`nnav`循环终止的时间。您需要拍摄快照`ii`并将其传递给`dropmenu`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T02:22:37.307

改变这个，

```
if (subflag) // will have a submenu
{
    lnk.onmouseover = function () { dropmenu(ii, navtitle) }
} 
```

对此

```
if (subflag) // will have a submenu
{
    (function(i){
        lnk.onmouseover = function () { dropmenu(i, navtitle) }
    })(ii);
} 
```

我希望它能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T03:00:59.903

尝试`mouseover`像这样分配您的处理程序：

```
lnk.onmouseover = function () {
    return function () {
        dropmenu(ii, navtitle);
    }
}; 
```

这使处理程序成为一个[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)，它将保留创建处理程序时的值`ii`和值`navtitle`。

# playframework - 如何将 Set[String] 作为查询参数传递给异常？

> ID：11174475
> 
> 赞同：2
> 
> 时间：2012-06-24T02:08:11.227
> 
> 标签：playframework, playframework-2.0, anorm

我想形成一个包含一组字符串作为参数的 SQL 查询：

```
SQL("SELECT * FROM TABLE somecolumn in {someset}")
.on("someset" -> Set("v1', "v2", "v3")) 
```

但上面生成的 SQL 查询无效：

```
play.api.Application$$anon$1: Execution exception [[MySQLSyntaxErrorException: You have an   error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '_binary'??\0sr\0\'scala.collection.immutable.$colon$colon?\\c[???m\0L\0+scala' at line 1]] 
```

不支持 Sets/Traversables 作为 anorm 中的参数类型，还是有其他方法可以做到这一点？

# php - 何时添加到存档？

> ID：11174478
> 
> 赞同：1
> 
> 时间：2012-06-24T02:09:01.460
> 
> 标签：php, compression, jpeg, archive

我正在建立一个网站，作为公司广告作品的投资组合。他们上传文件，可以在画廊等中查看。他们想要的另一个功能是让特权用户能够下载整个画廊。

我面临两个选择（我能想到的）在文件上传时添加到现有存档中，这将增加响应时间或在每次有人希望下载图库时构建存档。

我不知道 php 提供的压缩实用程序背后的机制或数据结构，所以我问你哪个最便宜？

图像都是 jpeg，因此压缩没有效果，可能会有数百张高分辨率图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T02:19:19.783

第三种选择：设置为“cron”作业以每天构建存档。这意味着该过程与用户活动无关，保证会发生并且不会阻止用户。

* * *

编辑：回答关于使用哪个实用程序的第二部分。

PHP 手册给出了简要概述： http: [//php.net/manual/en/phar.fileformat.comparison.php](http://php.net/manual/en/phar.fileformat.comparison.php) - 但基本上有两种类型或存档/压缩： - Zip、gzip、bzip（压缩，但有能够将多个文件压缩到一个存档） - rar、tar（存档到单个文件，能够减少构建存档的大小）

如果您不希望通过压缩获得太多收益，请查看其中一种归档功能（tar/rar 等）。最著名的是“rar”，但许可证不允许 PHP 创建 rar 文件，因此您需要使用“tar”。Tar 是最常见的 Linux 文件。您可以通过名为“phar”的 PHP 库[http://www.php.net/manual/en/intro.phar.php](http://www.php.net/manual/en/intro.phar.php)来做到这一点。

如果你认为你可能想要挤出一些额外的东西，gzip 可能是最好的（但你应该测试看看）。所以拿你的 tar 并用 gzip 压缩。Phar 还可以在一个简单的类中为您处理（phar::compress）。

最后说明：如果您在 Linux 服务器上，则可以通过 exec() 调用 tar 和 gzip 命令（按此顺序）获得绝对最佳的结果，因为它是 Linux 的基础。

# objective-c - 核心数据：对可转换字段中的值进行排序和解密

> ID：11174480
> 
> 赞同：0
> 
> 时间：2012-06-24T02:10:04.243
> 
> 标签：objective-c, ios, sorting, core-data, nsdata

我在可转换字段中有一些加密的 NSString 存储。我需要解密并按字母顺序列出所有值。

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] 
                                    initWithKey:@"trans_word" 
                                    ascending:YES
                                    comparator:^NSComparisonResult(id obj1, id obj2) {
    NSString* s1 = [encryptObj decryptingfromValue:obj1]; 
    NSString* s2 = [encryptObj decryptingfromValue:obj2]; 
    NSLog(@"xxx");
    return [s1 compare:s2];
}];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors]; 
```

似乎该块没有性能。你能给我一些提示吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T02:21:48.160

在 iOS 和 10.6 之前的 OS X 上以及使用基于 SQLite 的存储时，不支持块谓词。

> **特别注意事项**
> 
> 在 Mac OS X v10.6 中，Core Data 在内存和原子存储中支持这种方法，但在基于 SQLite 的存储中不支持。[（关联）](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html#//apple_ref/occ/clm/NSPredicate/predicateWithBlock%3a)

# android - findViewById() 在嵌套布局中找不到 id？

> ID：11174481
> 
> 赞同：0
> 
> 时间：2012-06-24T02:10:30.597
> 
> 标签：android

我的 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="240dp"
android:layout_height="320dp"
android:gravity="center" 
android:background="@drawable/borders"  
 >....<LinearLayout 
        android:id="@+id/arearight"         
        android:layout_above="@+id/areabotleft"
        android:layout_below="@id/txtDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_alignParentRight="true"
        android:gravity="center_vertical"
        >
        <ImageView 
            android:id="@+id/img_sun"
            android:scaleType="fitXY"
            android:src="@drawable/sun-icon"
            android:contentDescription="@string/shop"
            android:layout_width="48dp"
            android:layout_height="48dp"
            /> ...... 
```

我使用 findViewbyid 查找 img_sun (ImageView) 但找不到？LinearLayout 嵌套在 RelativeLayout 中。我应该做...得到 img_sun ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:40:48.540

1）首先清理你的项目

2）如果您当前的活动有多个布局，请检查您的视图是否在所有布局中都定义了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:46:23.760

“我使用 findViewbyid find img_sun (ImageView)” 嗯，这当然不是正确的语法......它应该看起来像这样：

```
ImageView iv = (ImageView) findViewById(R.id.img_sun); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:33:31.617

检查您的活动中是否有类似“yourpackagename.R”的导入。如果然后尝试将其删除..还要进行彻底清洁..

# spotify - Spotify 应用的 oAuth 回调返回“不允许加载本地资源”

> ID：11174485
> 
> 赞同：1
> 
> 时间：2012-06-24T02:11:00.690
> 
> 标签：spotify

我目前正在开发一个需要 oAuth 才能登录 GetGlue 的 spotify 应用程序。

它使用 GetGlue 服务成功加载了身份验证对话框。但是，在进行 oauth 回调时，它会返回以下 JavaScript 错误：“不允许加载本地资源：sp://getglue/”（sp://getglue 是我的应用程序名称）。

我正在使用 Spotify 文档中指定的 showAuthenticationDialog 函数：

```
auth.showAuthenticationDialog('http://getglue.com/oauth/authorize/?oauth_token='+_token+'&oauth_callback=sp://getglue', 'sp://getglue', {
    onSuccess : function(response) {
        console.log("Response: " + response);
    },
    onFailure : function(error) {
        console.log("Error: " + error);
    },
    onComplete : function() { }
}); 
```

我在网上能找到的最接近我的问题是这个 stackoverflow 问题 - [Twitter ouath callback in Spotify Apps](https://stackoverflow.com/questions/9531709/twitter-ouath-callback-in-spotify-apps)。在那，回复说：

> “showAuthenticationDialog 的工作原理是监视对第二个参数中给出的 URL 的请求，然后拦截它们并在回调中将其传递给您”

在我的情况下似乎没有发生这种情况？

关闭此身份验证窗口然后返回错误 1？（例如，我的 console.log 中的“错误：1”）

在我的 Spotify oAuth 实施中，我在这里遗漏了什么吗？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:15:52.497

# ios - UIView 子类没有被释放

> ID：11174488
> 
> 赞同：2
> 
> 时间：2012-06-24T02:11:34.123
> 
> 标签：ios, uiview, nstimer, objective-c-2.0

我有一个没有被释放的子类 UIView。我知道只有一个类正在创建我的视图的实例。我认为我有一个 NSTimer ivar。如果我注释掉该计时器并且当我点击此视图控制器上的取消按钮时，将调用此视图中的 dealloc。如果我不注释掉计时器，则永远不会调用 dealloc。

```
//CustomUIView
- (id) initWithFrame:(CGRect)frame 
{
    self = [super initWithFrame:frame];
    if (self) {
        _pollTimer = [[NSTimer scheduleTimerWithTimeInterval:0.2 target:self selector:@selector(onPollTimerFired:) userInfo:nil repeats:YES] retain];
    }
} 
```

我想保留对这个计时器的引用，因为有时我希望暂停计时器。现在，我可以在我的视图上为计时器设置一个属性，并且在引用了我的自定义 uiview 的类的 dealloc 方法中，我可以在释放所述视图之前使其无效。我不太喜欢这种方法，因为我不想将此计时器暴露给外部实体。

有人有想法么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T05:25:02.113

[`NSTimer`始终保持其目标](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html#//apple_ref/occ/clm/NSTimer/scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:)。这有两个含义：

1.  您不应该让视图（这是计时器的目标）保留计时器，因为这会创建一个循环。

2.  只要计时器保持活动状态，您的视图就永远不会被释放。

相反，您应该`invalidate`在视图完成时调用计时器。完成此操作后，视图将`dealloc`在其引用计数变为零时被吃掉。

通常，当视图从其父视图中移除时会发生这种情况；如果您希望它继续使用其计时器直到发生这种情况然后被释放，您可以覆盖`removeFromSuperview`以使计时器无效，然后调用`super`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:54:31.507

您不应该保留计时器。像这样安排计时器：`_pollTimer = [NSTimer scheduleTimerWithTimeInterval:0.2 target:self selector:@selector(onPollTimerFired:) userInfo:nil repeats:YES];`以及每当您想使其无效时：`[_pollTimer invalidate]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T02:13:07.807

# 编辑：

在你的`-dealloc`方法中，试试这个：

```
- (void) dealloc
{
    [_pollTimer invalidate];

    /*
        If not using ARC:
        [_pollTimer release], _pollTimer = nil;
        [super dealloc];
    */
} 
```

* * *

你忘了调用`super`的执行`-initWithFrame:`！哎呀！

```
- (id) initWithFrame:(CGRect)frame 
{
    if ((self = [super initWithFrame:frame]))
    {
        _pollTimer = [[NSTimer scheduleTimerWithTimeInterval:0.2 target:self selector:@selector(onPollTimerFired:) userInfo:nil repeats:YES] retain];
    }

    return self;
} 
```

这应该会更好。

# express - 带有 Mongoose 模型的 ExpressJS 应用程序结构

> ID：11174489
> 
> 赞同：1
> 
> 时间：2012-06-24T02:12:02.003
> 
> 标签：express, mongoose

我想知道我的猫鼬模型在 ExpressJS 应用程序的上下文中应该放在哪里？我不想把所有东西都放到 server.js/coffee 中。某处有例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:59:37.383

将它们放在一个名为的目录中`app/models`，并像下面这样构建您的应用程序：[ExpressJS 如何构建应用程序？](https://stackoverflow.com/a/7350875/266795)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T00:15:52.610

我创建了一个 data/models.js 模块，用于导出我正在使用的各种模型。例如models.js：

```
var mongoose = require("mongoose");
mongoose.connect("localhost", "databaseName");

var userSchema = mongoose.Schema({
  name: "string",
  email: "string",
  password: "string"
});

exports.User = mongoose.model("User", userSchema); 
```

这允许我在应用程序的其他地方要求模型，如下所示：

```
var mongoose = require("mongoose")
  , User = require("../data/models").User 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-03T01:12:35.233

它应该如下：models.js: module.exports = mongoose.model(“User”, userSchema);

Server.js: Const User = require(“../data/models”);

# ruby-on-rails - 逐步升级到 Rails 资产管道

> ID：11174491
> 
> 赞同：3
> 
> 时间：2012-06-24T02:12:20.930
> 
> 标签：ruby-on-rails, asset-pipeline

我有一个相当复杂的 Rails Web 应用程序，它已经有将近 4 年的历史了:)。它每天都有许多客户使用它，所以当我对它进行彻底的改变时，我必须少一点漫不经心。

我已经设法将它迁移到 rails 3.2.2 并且仍然可以使用，但是有很多代码仍然使用 Scriptaculous、Prototype 的 Ajax 调用（例如，用于分页）等等。

我想慢慢地将所有这些迁移到使用 jQuery UJS 和 Coffeescript，但我必须逐个进行这些更改，最好是一次一个控制器跨越多个“版本”。

但我看到打开资产是一个布尔开关。

您是如何在不破坏大量代码的情况下将现有代码迁移到资产管道的？我应该采取哪些预防措施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:41:29.573

如果还不算太晚，这里是我们发现启用资产管道的技巧，公共文件夹中仍然有许多 css 和 js：

为了保留静态文件的“旧”标签助手，我们在它们被资产管道覆盖之前给它们起别名。`require 'rails/all'`我们在 application.rb上面添加这个片段：

```
require 'rails'

ActiveSupport.on_load(:action_view) do
  alias_method :without_asset_pipeline_js,  :javascript_include_tag
  alias_method :without_asset_pipeline_css, :stylesheet_link_tag
  alias_method :without_asset_pipeline_img, :path_to_image
end 
```

因此，在我们看来，我们仍然可以访问它们。但是我们必须改变所有的标签......所以，我们添加一个初始化器来恢复“旧”标签，并在“新”标签前加上“asset_”（或其他）。现在，我们可以同时拥有 public/ 中的静态资产文件和资产管道管理的资产。

目前，我们没有遇到这种方法的麻烦（除了它不适用于图像！），但我们是开始......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T02:50:29.133

这些 Railscast 剧集对我帮助很大。

1.  [http://railscasts.com/episodes/279-understanding-the-asset-pipeline](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)
2.  [http://railscasts.com/episodes/282-upgrading-to-rails-3-1](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)
3.  [http://railscasts.com/episodes/318-upgrading-to-rails-3-2](http://railscasts.com/episodes/318-upgrading-to-rails-3-2)

摘要：

设置您的 Gemfile

```
group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'yui-compressor' # i'm using yui for compressor
end 
```

将您的资产（javascripts、字体、css、图像等）移动到应用程序/资产，如下所示：

```
app/
  assets/
    fonts/
    images/
    javascripts/
    stylesheets/ 
```

在 css 上，将 url 助手更改为 font-url、image-url 或 assets-url 之类的东西。你可以在这里找到更多信息，[https://github.com/rails/sass-rails](https://github.com/rails/sass-rails)。也许您会想要使用登台服务器来检查资产流水线是否工作正常，至少对于您的应用程序服务的静态资产。还要确保不止一次加载 javascript 文件。（在我升级到资产管道之前，这让我很头疼）。

希望这有帮助。

# php - 在 PHP 中扩展静态类 - 避免在扩展类中共享多个类的变量

> ID：11174496
> 
> 赞同：3
> 
> 时间：2012-06-24T02:14:05.103
> 
> 标签：php, oop, static, extends

我似乎无法在 PHP 中扩展静态类。

PHP代码：

```
<?php
    class InstanceModule {
        public static $className = 'None';
        public static function PrintClassName() {
            echo self::$className . ' (' . __CLASS__ . ')<br />';
        }
    }

    class A extends InstanceModule {
        public static function Construct() {
            self::$className = "A";
        }
    }

    class B extends InstanceModule {
        public static function Construct() {
            self::$className = "B";
        }
    }
?> 
```

我的调用代码，以及我的期望：

```
<?php
    //PHP Version 5.3.14

    A::PrintClassName(); //Expected 'None' - actual result: 'None'
    B::PrintClassName(); //Expected 'None' - actual result: 'None'

    A::Construct();

    A::PrintClassName(); //Expected 'A' - actual result: 'A'
    B::PrintClassName(); //Expected 'None' - actual result: 'A'

    B::Construct();

    A::PrintClassName(); //Expected 'A' - actual result: 'B'
    B::PrintClassName(); //Expected 'B' - actual result: 'B'

    A::Construct();

    A::PrintClassName(); //Expected 'A' - actual result: 'A'
    B::PrintClassName(); //Expected 'B' - actual result: 'A'
?> 
```

实际完整输出：

```
None (InstanceModule)
None (InstanceModule)
A (InstanceModule)
A (InstanceModule)
B (InstanceModule)
B (InstanceModule)
A (InstanceModule)
A (InstanceModule) 
```

所以这里发生的事情（从看起来）是，一旦我设置`self::$className`了任何一个扩展类，它就会覆盖另一个类的变量。我认为这是因为我使用静态类，并且只能有一个类，而`InstanceModule`不是像我之前对. 我试过改用关键字，但似乎没有什么区别。`A``B``extends``static::$className`

如果有人能指导我正确的方向，我在这里做错了什么，以及如何解决这个问题，那就太好了。

***编辑***：澄清一下，这段代码做了我想要的，但显然是一个可怕的解决方法，因为它会破坏扩展和重用函数的整个想法：

```
<?php
    class A {
        public static $className = 'None';
        public static function PrintClassName() {
            echo self::$className . ' (' . __CLASS__ . ')<br />';
        }
        public static function Construct() {
            self::$className = "A";
        }
    }

    class B {
        public static $className = 'None';
        public static function PrintClassName() {
            echo self::$className . ' (' . __CLASS__ . ')<br />';
        }
        public static function Construct() {
            self::$className = "B";
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T02:42:32.003

由于 $className 是静态的并且在父类中，当您在 A 或 B 中设置 className 时，它​​会更改父类中的变量，读取变量时也是如此。除非您在扩展类中覆盖 className，否则您将从最初在 InstanceModule 中定义的同一内存位置存储和检索信息。

如果在 A/B 中重新定义 className，则可以分别从 InstanceModule 或 A/B 使用 parent:: 或 self:: 访问 className。根据您要执行的操作，抽象类也可能发挥重要作用。

请参阅PHP5 手册中的[静态关键字](http://php.net/manual/en/language.oop5.static.php)或[类抽象](http://php.net/manual/en/language.oop5.abstract.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-25T05:36:44.687

这似乎**仍然**是 php 7.3 中的一个问题（在此处发布原始问题 7 年后）。

使用的答案`__callStatic`看起来可能有效，但对于应该简单的事情来说，它相当复杂。而其他 2 个答案似乎并没有真正为这个问题提供一个有效的解决方案，所以我在这里包括我自己的解决方法作为答案。

您可以用静态数组替换静态变量：

```
<?php
    class InstanceModule {
        public static $className = [];
        public static function PrintClassName() {
            $calledClass = get_called_class();
            if(empty(self::$className[$calledClass])){
              $thisClassName = "none";
            }else{
              $thisClassName = self::$className[$calledClass];
            }
            echo $thisClassName . ' (' . __CLASS__ . ')<br />';
        }
    }

    class A extends InstanceModule {
        public static function Construct() {
            $calledClass = get_called_class();
            self::$className[$calledClass] = "A";
        }
    }

    class B extends InstanceModule {
        public static function Construct() {
            $calledClass = get_called_class();
            self::$className[$calledClass] = "B";
        }
    }
?> 
```

因此，每个子类的“静态”值`InstanceModule`都存储在一个键下，该键具有它所源自的类的名称。

对我来说，兄弟类共享静态属性似乎是一个 PHP 错误......这绝不应该发生，尤其是当父类是抽象的时。这种解决方法不是很漂亮，但它是我使用的唯一一种不太复杂的方法。

使用此解决方法，您可以获得所需的结果：

```
<?php   
    A::PrintClassName(); //Expected 'None' - actual result: 'None'
    B::PrintClassName(); //Expected 'None' - actual result: 'None'

    A::Construct();

    A::PrintClassName(); //Expected 'A' - actual result: 'A'
    B::PrintClassName(); //Expected 'None' - actual result: 'None'

    B::Construct();

    A::PrintClassName(); //Expected 'A' - actual result: 'A'
    B::PrintClassName(); //Expected 'B' - actual result: 'B'

    A::Construct();

    A::PrintClassName(); //Expected 'A' - actual result: 'A'
    B::PrintClassName(); //Expected 'B' - actual result: 'B'
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T00:28:25.737

我会让基类保留一个子类实例的存储库，以便您可以正确分离属于每个类的数据，而不是从静态基类变量中提取该数据。

您可以使用`__callStatic()`基类上的魔术方法来完成对不存在的子类的调用方法，如下所示。不幸的是，由于该魔术方法的可见性，需要将静态存储库变量声明为 public。

```
abstract class Base
{
    public static $repo = array();

    public static function __callStatic($name, $args)
    {
        $class = get_called_class();

        if (!isset(self::$repo[$class])) {
                echo "Creating instance of $class\n";
                self::$repo[$class] = new $class();
        }

        return call_user_func_array(array(self::$repo[$class], $name), $args);
    }

        protected function PrintClassName()
        {
                echo __CLASS__, " (", get_called_class(), ")\n";
        }

        protected abstract function Construct($a);
}

class A extends Base
{
        protected function Construct($a)
        {
                echo __CLASS__, ": setting x := $a\n";
        }
}

class B extends Base
{
        protected function Construct($a)
        {
                echo __CLASS__, ": setting y := $a\n";
        }
}

A::PrintClassName();
B::PrintClassName();

A::Construct('X');
B::Construct('Y'); 
```

输出：

```
Creating instance of A
Base (A)
Creating instance of B
Base (B)
A: setting x := X
B: setting y := Y 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T02:47:22.567

我认为针对您的情况的最佳答案是使用[`get_called_class()`](http://www.php.net/manual/en/function.get-called-class.php)函数而不是当前`$className`变量，这将返回后期静态绑定类名，而不是返回当前类名`__CLASS__`或`get_class()`仅返回当前类名。

如果您将`PrintClassName()`函数更改为仅输出`get_called_class()`返回的内容，您的输出将如下所示。现在你只需要合并一个默认值，它当然会在类之间共享，所以如果你要继续使用静态方法，你必须在两个类中都有这个标志。

```
A
B
A
B
A
B
A
B 
```

# android - 小部件在 ICS 中显示“未安装应用程序”Toast

> ID：11174497
> 
> 赞同：13
> 
> 时间：2012-06-24T02:14:05.500
> 
> 标签：android, android-widget

我通过 Eclipse 创建了一个可以在我的 Galaxy Nexus 上正常工作的小部件，但是当我创建一个签名的 apk，从手机上卸载调试版本，然后安装新的 apk 并尝试将它放在主屏幕上时，我得到以下 Toast消息：“未安装应用程序”。

任何想法为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-26T02:02:49.367

实际上，我刚刚发现出了什么问题。我正在基于相同的代码制作几个小部件，并且在构建之前我重构并更改了包名称。我错过了更新 appwidget-provider xml 中的“android:configure”字段，所以这导致配置活动“找不到”。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-07T22:31:23.223

我刚刚遇到了这个问题，解决方案是我在这里没有提到的：我更改了用于配置小部件的活动，但忘记为它添加一个意图过滤器到我的 AndroidManifest.xml。

```
<activity android:name="com.mypackage.ConfigureWidget" 
          android:label="@string/configureWidget">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-08T06:03:58.967

同样的问题也出现在我的应用程序中。我所做的是我只是从 appwidget-provider xml 中删除了“android:configure”字段，它开始继续正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T10:28:11.930

检查您是否在清单中提供了“maxSdkVersion”参数..这可能会给您特定设备的错误...最好改为提供 targetSdkVersion....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-27T08:55:43.707

如果它对我的错误有帮助，我错误
地添加了 android:exported="false" 并且总是让我的配置活动不弹出
，导出的必须是 true 才能使小部件配置工作

总之，请确保以下
1) 活动 android:name 确实指向正确的包名，尤其是您使用“.widget.xxxxxActivity”（注意句号）
2) android:exported="true"
3)您的配置活动如下

```
 <intent-filter>
    <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE"/>
  </intent-filter> 
```

4) 在您的 appwidget-provider 中，确保 android:configure="您在步骤 1 中的正确配置活动

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-01T04:57:05.223

我遇到了同样的问题，感谢[https://stackoverflow.com/a/11187572/3763837](https://stackoverflow.com/a/11187572/3763837)我可以解决这个问题。默认情况下它是 21，我改为 19。现在应用程序运行良好。 `<uses-sdk android:minSdkVersion="11" android:targetSdkVersion="19" />`

# javascript - SHIFT-单击 jqgrid 多选缺少最后一行

> ID：11174499
> 
> 赞同：4
> 
> 时间：2012-06-24T02:14:22.520
> 
> 标签：javascript, jquery, jqgrid, multi-select, shift

我采用了[这篇文章](https://stackoverflow.com/questions/4186533/jqgrid-multiselect)中的代码并制作了[这个小提琴](http://jsfiddle.net/yNw3C/758/)。尝试单击第一行，然后按住 shift 单击最后一行。如果你注意到这段代码做得很好，除了最后一行，你点击的那一行，没有被选中。我一直在为此挠头。谁能帮我更改代码，以便多选也选择最后一行？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T11:05:33.557

尝试替换这个：`if ((shouldSelectRow = id == startID || shouldSelectRow)) {`用这个：

```
if ((shouldSelectRow = id == startID || shouldSelectRow) && (id != rowid)){ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T13:49:36.793

我同意 Michael Gendin 的观点，即您不应选择 id 等于 的行`rowid`。这是你的主要错误。不过，我会重写演示的大部分代码以使用行的 DOM 元素的[rowIndex](http://www.w3schools.com/jsref/prop_tablerow_rowindex.asp)，而不是枚举网格的所有行。此外，在您当前的代码中，在 IE 中选择文本并不方便，因此我建议您将其删除。[您在这里](http://jsfiddle.net/yNw3C/769/)找到的修改后的演示我使用了以下`beforeSelectRow`回调代码：

```
beforeSelectRow: function (rowid, e) {
    var $this = $(this), rows = this.rows,
        // get id of the previous selected row
        startId = $this.jqGrid('getGridParam', 'selrow'),
        startRow, endRow, iStart, iEnd, i, rowidIndex;

    if (!e.ctrlKey && !e.shiftKey) {
        $this.jqGrid('resetSelection');
    } else if (startId && e.shiftKey) {
        $this.jqGrid('resetSelection');

        // get DOM elements of the previous selected and the currect selected rows
        startRow = rows.namedItem(startId);
        endRow = rows.namedItem(rowid);
        if (startRow && endRow) {
            // get min and max from the indexes of the previous selected
            // and the currect selected rows 
            iStart = Math.min(startRow.rowIndex, endRow.rowIndex);
            rowidIndex = endRow.rowIndex;
            iEnd = Math.max(startRow.rowIndex, rowidIndex);
            for (i = iStart; i <= iEnd; i++) {
                // the row with rowid will be selected by jqGrid, so:
                if (i != rowidIndex) {
                    $this.jqGrid('setSelection', rows[i].id, false);
                }
            }
        }

        // clear text selection
        if(document.selection && document.selection.empty) {
            document.selection.empty();
        } else if(window.getSelection) {
            window.getSelection().removeAllRanges();
        }
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T00:15:01.733

添加`$('#grid').disableSelection();`以删除烦人的文本选择

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T22:43:07.187

正如奥列格的回答中所讨论的，这是一个调整后的 beforeSelectRow ，它执行附加的选择。

在我的例子中，我们的用户选择了一堆要导出的行，所以额外的选择通常并不意味着他们想要开始一个新的选择。

```
 beforeSelectRow: function(rowid, e) {
      var $this = $(this), rows = this.rows,

      // get id of the previous selected row
      startId = $this.jqGrid('getGridParam', 'selrow'),
      startRow, endRow, iStart, iEnd, i, rowidIndex;

      if (!e.ctrlKey && !e.shiftKey) {
          //intentionally left here to show differences with
          //Oleg's solution. Just have normal behavior instead.
          //$this.jqGrid('resetSelection');
      } else if (startId && e.shiftKey) {
          //Do not clear existing selections
          //$this.jqGrid('resetSelection');

          // get DOM elements of the previous selected and
          // the currect selected rows
          startRow = rows.namedItem(startId);
          endRow = rows.namedItem(rowid);

          if (startRow && endRow) {
              // get min and max from the indexes of the previous selected
              // and the currect selected rows
              iStart = Math.min(startRow.rowIndex, endRow.rowIndex);
              rowidIndex = endRow.rowIndex;
              iEnd = Math.max(startRow.rowIndex, rowidIndex);

              // get the rowids of selected rows
              var selected = $this.jqGrid('getGridParam','selarrrow');

              for (i = iStart; i <= iEnd; i++) {
                  // if this row isn't selected, then toggle it.
                  // jqgrid will select the clicked on row, so just ingore it.
                  // note that we still go <= iEnd because we don't know which is start or end.
                  if(selected.indexOf(rows[i].id) < 0 && i != rowidIndex) {
                    // true is to trigger onSelectRow event, which you may not need
                    $this.jqGrid('setSelection', rows[i].id, true);
                  }
              }
          }

          // clear text selection (needed in IE)
          if(document.selection && document.selection.empty) {
              document.selection.empty();
          } else if(window.getSelection) {
              window.getSelection().removeAllRanges();
          }
      }
      return true;
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-05T11:19:59.140

Oleg 的解决方案不适用于所有选择模式（上/下）。感谢他的部分解决方案。

我用这段代码纠正了这个问题：

您需要 2 个变量来存储当前的起始行 ID 和结束行 ID。另一个用于存储选择的一面。

```
var _currentStartSelectRow, _currentEndSelectRow, _isSideDown = null; 
```

beforeSelectRow 回调的代码调用：

```
beforeSelectRow: function (rowid, e) {
                var $this = $(this), rows = this.rows,
                // get id of the previous selected row
                previousId = $this.jqGrid('getGridParam', 'selrow'),
                previousRow, currentRow;

                if (!e.ctrlKey && !e.shiftKey) {
                    _isSideDown = null;                       
                        $this.jqGrid('resetSelection');                       

                } else if (previousId && e.shiftKey) {
                    $this.jqGrid('resetSelection');

                    // get DOM elements of the previous selected and the currect selected rows
                    previousRow = rows.namedItem(previousId);
                    currentRow = rows.namedItem(rowid);
                    if (previousRow && currentRow) {
                        //Increment
                        if (previousRow.rowIndex < currentRow.rowIndex) {
                            if (_isSideDown == false || _isSideDown == null) {
                                _currentStartSelectRow = previousRow.rowIndex;
                                _currentEndSelectRow = currentRow.rowIndex;
                            }
                            else {
                                _currentEndSelectRow = currentRow.rowIndex;
                            }
                            _isSideDown = true;
                        }
                        //Decrement
                        else {
                            if (_isSideDown == null) {
                                _currentStartSelectRow = currentRow.rowIndex;
                                _currentEndSelectRow = previousRow.rowIndex;
                                _isSideDown = false;
                            }
                            else if (_isSideDown == true) {
                                if (currentRow.rowIndex < _currentStartSelectRow) {
                                    _currentStartSelectRow = currentRow.rowIndex;
                                    _isSideDown = false;
                                }
                                else {
                                    _currentEndSelectRow = currentRow.rowIndex;
                                }
                            }
                            else {
                                _currentStartSelectRow = currentRow.rowIndex;
                            }

                        }

                        for (i = _currentStartSelectRow; i <= _currentEndSelectRow; i++) {
                            // the row with rowid will be selected by jqGrid, so we don't need to select him:
                            if (i != currentRow.rowIndex) {
                                $this.jqGrid('setSelection', rows[i].id, false);
                            }
                        }
                    }

                }
                return true;
            }, 
```

# c++ - 为什么 C++ 中没有 sort(v)？

> ID：11174501
> 
> 赞同：11
> 
> 时间：2012-06-24T02:15:11.007
> 
> 标签：c++, stl

我一直想知道为什么没有

```
sort(v);// same as std::sort(v.begin(),v.end()) 
```

如果我很久以前没记错的话，我看到一个 boostcon 剪辑，演讲者说这个概念是必需的，但我不明白为什么。顺便说一句，我尝试了这个（在 VS 11 中），从我所看到的情况来看，它工作得很好。

```
template <typename Container>
void sortfx(Container& c)
{
    std::sort(c.begin(),c.end());
}
int main()
{

    std::vector<double> v;
    //std::list<double> v; this causes compile errors
    v.push_back(1701);
    v.push_back(1729);
    v.push_back(74656);
    v.push_back(2063);
    sortfx(v);
    assert(std::is_sorted(begin(v),end(v)));

} 
```

编辑：Bjarne 自己解释了这些概念，并以排序为例 :) [https://www.informit.com/articles/article.aspx?p=2080042&WT.rss_f=Article&WT.rss_a=An%20Interview%20with%20Bjarne%20Stroustrup&WT .rss_ev=a](https://www.informit.com/articles/article.aspx?p=2080042&WT.rss_f=Article&WT.rss_a=An%20Interview%20with%20Bjarne%20Stroustrup&WT.rss_ev=a)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T10:06:39.777

需要概念的不是`std::sort(v)`->扩展，而是替代排序函数采用附加参数进行比较 - 。`std::sort(v.begin(), v.end())``std::sort(v.begin(), v.end(), compare)`

如果您有 call `std::sort(v, compare)`，则实现*将*`std::sort(start, end)`需要将其与非容器区分开来的概念。

标题`<algorithm>`中充满了具有此类问题的模板。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T02:50:23.293

来自[学习标准 C++ 作为一种新语言 (PDF)](http://www.research.att.com/~bs/new_learning.pdf) Stroustrup，C/C++ 用户期刊。第 43-54 页。1999 年 5 月：

> 在这种情况下，普通的 sort(v) 会更简单，但有时我们想要对容器的一部分进行排序，因此更一般地指定我们想要排序的内容的开始和结束。

这对我来说很有意义。正如您所展示的，创建一个包装器很简单，并且在没有包装器的情况下使用它并不是非常麻烦。花费一秒钟`sort()`的时间似乎并不值得。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T02:33:10.773

`<algorithm>`函数不能直接在容器上工作。它们只与迭代器交互，没有任何容器的上下文知识。如果您出于自己的目的使用短的全范围排序符号，我认为没有什么害处，但是您必须假设对象具有开始/结束接口，这也恰好是双向迭代器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T02:37:42.427

这没有什么需要概念的。范围实际上并不比迭代器复杂。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T02:39:53.410

如果您只想对容器的一个子集进行排序怎么办？

我最近几乎发布了一个类似的问题，关于为什么`for_each`不是成员函数`Container`而不是独立的。IE`v.for_each([&sum] (int i) { sum += i; });`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-28T17:36:39.400

*这不需要*概念——但是（正如在 C++11 标准化期间提出的那样）它们会使实现这一点变得相当容易。

就目前而言，您*可以*通过为`std::sort`. 当然，问题在于这`std::sort`不是唯一的算法，因此毫无疑问，您也希望对许多其他算法也这样做（很可能几乎所有算法）。

概念（特别是概念图，如果有记忆的话）将提供一种相当干净的方式来以相对集中的方式提供（等效的）所有这些重载，因此您将所有这些适配器放在一个地方而不是 N 个地方（一个对于每个算法）。更好的是，只要它们符合正常约定，它也适用于其他算法。

目前相当多的人认为范围是应该处理的方式——算法应该在范围上运行，并且任何容器都应该定义一个范围（但也应该有其他方法来定义范围）。虽然这可能作为一个总体想法很好，但似乎（至少在我看来）对于应该构成一个范围的确切细节、应该如何定义它们等方面存在相当多的分歧。

如果你真的想探索这个，Boost 已经有一个[范围库](http://www.boost.org/doc/libs/release/libs/range/doc/html/index.html)，其中包括大多数标准算法的基于范围的版本（以及许多其他算法）。至少在内存服务的情况下，这包括一些从容器创建范围的适配器，因此`sort(c)`无需显式指定范围或迭代器即可工作。

# c++ - 在 XCode 3.xx GDB 中打印 Qt 数据结构（QList、QString 等）

> ID：11174508
> 
> 赞同：7
> 
> 时间：2012-06-24T02:16:30.620
> 
> 标签：c++, xcode, qt, gdb, qlist

我正在尝试在 XCode 中调试一些 Qt 容器，而我从 GDB 得到的结果没有用：

```
 print l1
$1 = (QSharedPointer<QList<SNAPSHOT> > &) @0x102780650: {
  <QtSharedPointer::ExternalRefCount<QList<SNAPSHOT> >> = {
    <QtSharedPointer::Basic<QList<SNAPSHOT> >> = {
      value = 0x1161e47e0
    }, 
    members of QtSharedPointer::ExternalRefCount<QList<SNAPSHOT> >: 
    d = 0x1161ace00
  }, <No data fields>}
Current language:  auto; currently c++
(gdb) print strQuery
$2 = {
  d = 0x1161e2890 
```

如何从 l1 (QList) 和 strQuery (QString) 获得一些有用的输出？
我已经尝试过使用这个.gdbinit，它添加了一些宏，比如“printq4string”，但是当打印出我需要在每个成员变量上手动运行的结构时，这些宏使用起来非常痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T16:12:39.867

好吧，这让我发疯了，但我明白了。

首先确保您的项目设置为使用 GCC 4.2 而不是纯 LLVM 编译，如下所示： ![在此处输入图像描述](../Images/f036816fa7c2a8a5eebed6fad630216a.png)

LLVM 现在被设置为 XCode 4 中的默认编译器，它不会为类内部的结构添加正确的调试信息。

现在在你的 ~/.gdbinit 中添加：

```
define pqts
    printf "(QString)0x%x (length=%i): \"",&$arg0,$arg0.d->size
    set $i=0
    while $i < $arg0.d->size
        set $c=$arg0.d->data[$i++]
        if $c < 32 || $c > 127
                printf "\\u0x%04x", $c
        else
                printf "%c", (char)$c
        end
    end
    printf "\"\n"
end 
```

你现在可以简单地输入，它会很好地`pqts s1`转储你。`QString`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-06T19:03:20.363

对于字符串，`p my_string.toStdString().c_str()`有效

```
(gdb) p my_string.toStdString().c_str()
$5 = 0x55556d10d7d0 "abc 123 test string" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T17:26:59.433

我阅读了源代码并提出了这种次优方法，我将其留给社区来改进：

```
 QString s1("This should be easy");

    QList<QString> s;
    s.push_back("Can you debug me?");

(gdb) print/c s1.d.data[0]@30
$2 = {84 'T', 104 'h', 105 'i', 115 's', 32 ' ', 115 's', 104 'h', 111 'o', 117 'u', 108 'l', 100 'd', 32 ' ', 98 'b', 101 'e', 32 ' ', 101 'e', 97 'a', 115 's', 121 'y', 0 '\0', 0 '\0', 0 '\0', 0 '\0', 0 '\0', 0 '\0', 0 '\0', 0 '\0', 14 '\016', 0 '\0', 0 '\0'}

(gdb) print/c ((QString*)s.d.array).d.data[0]@20
$12 = {67 'C', 97 'a', 110 'n', 32 ' ', 121 'y', 111 'o', 117 'u', 32 ' ', 100 'd', 101 'e', 98 'b', 117 'u', 103 'g', 32 ' ', 109 'm', 101 'e', 63 '?', 0 '\0', 0 '\0', 0 '\0'} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T09:23:58.283

我通常使用`p *varName.shd`which 将其作为 QShared 转储，其中包含字符串数据，但我不确定这是否适用于 QList，肯定适用于 QString。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-22T11:00:36.787

我知道这是一个老问题，但我只是将这个字符串函数添加到我的实用程序中：

```
char* q(const QString& string)
{
    return(string.toUtf8().data());
} 
```

然后，`p q(myString)`工作。

# winforms - 没有通过 WinForms、WPF 或 Metro 的 DirectInput 的操纵杆输入？

> ID：11174510
> 
> 赞同：1
> 
> 时间：2012-06-24T02:16:49.920
> 
> 标签：winforms, input, microsoft-metro, hid, joystick

是否可以从 WinForms、WPF 或 Metro 事件中获取 JoyStick 输入（没有 DirectInput）？或者来自 WinProc 回调可能使用 HID？注意：我在 API 中使用广泛的原因是因为如果我能找到一个解决方案，我可能可以将它移植到我需要的任何地方。

我还没有在谷歌上找到明确的答案，我问的原因是因为我听说获得键盘和鼠标输入的首选方法是使用 Window 事件系统....所以我认为拥有它会很好操纵杆输入的工作方式相同。

如果 HID 可以做到这一点（我确定是这样），有人可以为我指出一个好的研究起点吗？

**编辑：我发现“原始输入”可能是我的解决方案：** [原始输入](http://msdn.microsoft.com/en-us/library/ms645543%28VS.85%29.aspx)

# database - 服务器端 ODBC

> ID：11174520
> 
> 赞同：2
> 
> 时间：2012-06-24T02:20:06.170
> 
> 标签：database, odbc, server-side

我想实现一个特定的数据库（不能确切地说它做了什么），但我想知道我需要做什么才能使我的服务器符合 odbc 标准，以便任何 odbc 库都可以与之交互/我用谷歌搜索了它但只有客户端相关的东西。[stackoverflow 中有另一篇文章](https://stackoverflow.com/questions/335008/creating-a-custom-odbc-driver)，但他们没有回答这个问题。

谢谢

ps：这是一个新程序，我不是在谈论现有的rdbms

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:47:07.203

为了达到最佳性能，您可以查看经过验证的 SDK，例如 SimbaEngine SDK，它将满足您的规定要求。这是“在 5 天内构建 ODBC - [http://simba.com/build-odbc-sdk-driver.htm](http://simba.com/build-odbc-sdk-driver.htm) ”的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:14:16.977

我不知道任何链接，但在我看来，这个问题最简单的解决方案是

1.  采用 ODBC 客户端规范
2.  采用开源 ODBC 驱动程序
3.  从这里设计适合您的用例需求的需求。. . .
4.  实施。

# javascript - jQuery：希望对隐藏元素的高度（）答案为 0

> ID：11174521
> 
> 赞同：0
> 
> 时间：2012-06-24T02:21:18.370
> 
> 标签：javascript, jquery, height, hidden

有很多关于如何获取/设置隐藏元素高度的帖子（例如[this](https://stackoverflow.com/questions/2345784/jquery-get-height-of-hidden-element-in-jquery-1-4-2)和[this](https://stackoverflow.com/questions/3632120/jquery-height-width-and-displaynone)）。

不过，我想要的是一个高度查询，它给出了`0`隐藏元素和`visible height`可见元素的答案。我可以用一堆`if`语句来做到这一点，但有没有更简单的方法？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T02:36:01.833

您可以制作自己的 jQuery 方法来执行您想要的操作：

```
jQuery.fn.visHeight = function() {
    var h = this.height();
    if (h != 0 && !this.is(":visible")) {
        h = 0;
    }
    return(h);
}; 
```

# html - HTML - 嵌套表单解决方法？

> ID：11174524
> 
> 赞同：4
> 
> 时间：2012-06-24T02:21:46.773
> 
> 标签：html, forms

为了向不太了解 PHP 的人证明我自己，我需要使用一些由可能不再被允许编程的人设计和构建的笨拙的系统。基本上，已经决定允许用户在实际完成注册之前为他们的个人资料上传图片。就在那儿，在注册表的中间，一个完全独立的表单（功能上，它必须看起来一样），带有一个文件上传字段、一个单独的提交按钮和一个图像显示区域。显然，客户在另一个网站上看到了 AJAX 图像上传，并决定，“这很酷，我们想要那个！” 没有真正知道表单是如何工作的，也没有考虑到为什么一个未注册的用户应该首先上传东西

我最初的想法是在其他地方创建一个不可见的表单，并在单击按钮时复制文件框的值，然后进行 AJAX 提交。这不起作用，因为 JavaScript 无法编辑文件框的值。可以理解。

第二次尝试是创建嵌套表单。通过[一些黑客攻击](http://anderwald.info/internet/nesting-form-tags-in-xhtml/)，我确实设法让 FireFox 看到两个表单，但提交内部表单会提交外部表单。“未定义的行为”，我相信是这个词。有道理，你不应该嵌套表格。

所以 - 忽略这绝对没有意义的事实，并且真的应该告诉客户 - 有没有办法在页面上创建文件上传表单，可以通过 AJAX 提交，并且明显位于另一个形式？我希望避免仅仅在页面的其他地方创建表单，并使用可恶的 CSS hack 将其固定到位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:55:59.510

我不知道这对您来说是否足够巧妙，但是`iframe`在表单中间嵌入一个并在该窗口中上传文件怎么样？它可能不够纯粹的邪恶，无法真正变得如此聪明和狡猾，但它可能会奏效。

我可以看到的唯一副作用是提交父级时，嵌入的`iframe`. 如果您足够小心并确保在`iframe`不使用文件上传时将其删除，我认为您应该没问题。

**家长**

```
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form submit="http://www.google.com/search" method="get">
    <div>
        <input type="text" name="q" value="[ Search Google Here ]"/>
    </div>
    <iframe src="http://jfcoder.com/test/embed.php" style="width: 200px; height: 200px;"></iframe>
    <div>
        <button type="submit">Submit this Page's Form</button>
    </div>
</form>
</body>
</html> 
```

**嵌入式**

```
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<?php

if ($_GET['q']) {
    echo "<p><strong>GET SUBMITTED</strong></p>";
}

?>
<form submit="embed.php" method="get">
    <div>
        <input type="text" name="q" value="Type whatever"/>
        <button type="submit">Submit this Page's Form</button>
    </div>
</form>
</body>
</html> 
```

[http://jfcoder.com/test/parentform.php](http://jfcoder.com/test/parentform.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:52:31.283

### 编辑：

请阅读：[嵌套的 html FORM 无法访问 - 多表单问题](https://stackoverflow.com/questions/2159602/nested-html-form-is-inaccessible-multiple-forms-problem?rq=1)

该答案表明表单元素不能包含其他表单元素，因此即使它*可以*在浏览器上运行并不意味着您应该使用这种技术。尝试将其全部放入一种形式，如下所示：

```
<form action="register.php" method="POST" enctype="multipart/formdata">
 <input name="username" type="text" />
 <input name="password" type="password" />
 <input name="avitar" type="file" />
 <input name="image" type="submit" value="Upload" />
 <input name="register" type="submit" value="Register" />
</form> 
```

或者更好的是，使用 jQuery/AJAX 在不离开页面的情况下上传 avitar。

### 原始答案：

您可以使用一些 javascript 解决此问题。这是一个快速的、未经测试的示例：

```
<head>
 <script>
  var submitted = false;

  function canSubmit() {
   if(submitted) return false;
   submitted = true;
   return true;
  }
 </script>
</head>
<body>
 <form action="register.php" method="POST" onsubmit="return canSubmit();">
  <input name="username" type="text" />
  <input name="password" type="password" />
  <form action="upload.php" method="POST" onsubmit="return canSubmit();" enctype="multipart/formdata">
   <input name="avatar" type="file" />
   <input type="submit" value="Upload" />
  </form>
  <input type="submit" value="Register" />
 </form>
</body> 
```

另一种方法是只为表单提供相同的操作，并为提交按钮命名，这样您就可以知道哪个提交了。这仅适用于用户单击提交按钮并且在选择其中一个文本框时不只是按 Enter 键，但对于文件上传表单，用户必须单击提交按钮。

# objective-c - Objective-C 中实例方法与类方法的目的

> ID：11174526
> 
> 赞同：17
> 
> 时间：2012-06-24T02:21:48.877
> 
> 标签：objective-c, class, methods, instance

我已经检查了所有这些问题...

*   [差异类和实例方法](https://stackoverflow.com/questions/3245174/difference-class-and-instance-methods)
*   [类方法和实例方法的区别？](https://stackoverflow.com/questions/4375443/difference-between-class-methods-and-instance-methods)
*   [类方法和实例方法有什么区别？](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods)

...他们所解释的只是当向类发送消息时如何在类的实例上使用实例方法以及如何与类一起使用类方法。这很有帮助，但我很想知道**为什么**要使用类方法与实例方法。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-24T02:35:45.607

一般来说，当您需要对对象的特定实例进行操作的代码时，您应该创建实例方法。当您需要做一些涉及该类的事情但可能不对该类的任何特定对象进行操作时，您可以创建一个类方法。

在实践中，你会发现*几乎所有的方法都应该是实例方法*。只要看看任何现有的 Objective-C 类，如`NSString`、`NSArray`、`UIView`等，你就会发现它们的绝大多数方法都是实例方法。类方法最常见的用途（再次看一下我提到的类）是为了方便返回`autorelease`对象的构造函数或单例访问器。

考虑中的`length`方法`NSString`。为什么这是实例方法而不是类方法？它是一种实例方法，因为只有询问特定实例的`NSString`长度是多少才有意义。一般要求`NSString`长度（即，如果长度是类方法）没有任何意义。

另一方面，假设我们要添加一个方法，`NSNumber`该方法将返回可以存储在给定系统上的最大整数值。在这种情况下，它应该是一个*类方法*，因为我们只是在问一个`NSNumber`与任何特定实例无关的一般问题。

# java - Java方法泛型理解

> ID：11174531
> 
> 赞同：0
> 
> 时间：2012-06-24T02:22:44.270
> 
> 标签：java, generics

我想弄清楚为什么我不能`super`在泛型方法声明中使用？请参阅下面的示例，它无法编译，但我不确定为什么。

```
public class A<E> {
    public <T extends A> void test1(T t) {   // Compiles fine
    }
    public <T super A> void test2(T t) {     // Compilation error??
    }
    public <T super A> <T> void test3(T t) { // Compilation error??
    }
}

class A {}
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:39:59.977

类型参数和类型参数之间存在差异。通配符 ( `super`and `extends`) 用于类型参数，也就是说，当您实际定义类型参数的相应值时，您在调用站点声明它们。或者，关键字`extends`可用于类型参数约束。

## 类型参数与类型参数

因此，在定义`class List<T>{}`中，`T`称为类型参数。当您声明 type 的引用时`List`，您可以在调用站点为 提供类型参数`T`，该参数可以是不变量（即`List<String> jedis`）或带有 super 或扩展的通配符（即`List<? extends Number> myNums`, `List<? super String> names`）。

## 类型参数约束

该关键字`extends`还可以用于完全不同的目的来声明给定类型参数的约束。例如，声明：

```
class List<T extends CharSequence>{} 
```

类型参数`T`是受约束的。这意味着每当您为类型参数声明类型参数`T`时，它必须是类型`CharSequence`或其任何子类型。

因此，这`List<String>`将是有效的声明，但`List<Integer>`不会。

`super`在类型参数约束的声明中不允许使用关键字，可能是因为它没有多大意义，在您的声明中，什么可能是有效的类型参数，因为它本身`T`不是`A`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T08:15:53.090

想一想，如果一个方法可以有签名

```
public <T super A> void test2(T t) {
} 
```

那么它可以将任何对象作为参数。为什么？因为，例如，您总是可以推断`T`为`Object`(`Object`是 的超类型`A`)，并且任何对象都是 的实例`Object`，所以它可以工作。所以以这种方式声明它是非常多余的。你可以写

```
public void test2(Object t) {
} 
```

为了同样的效果。

# python - 在 python 中使用 unicode

> ID：11174532
> 
> 赞同：2
> 
> 时间：2012-06-24T02:24:33.830
> 
> 标签：python, utf-8, encode

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T02:26:28.713

You want to `decode` (not `encode`) to get a unicode string from a byte string.

```
>>> s = '\xd0\xbc\xd0\xb0\xd1\x80\xd0\xba\xd0\xb0'
>>> us = s.decode('utf-8')
>>> print us
марка 
```

Note that you may not be able to `print` it because it contains characters outside ASCII. But you should be able to see its value in a Unicode-aware debugger. I ran the above in IDLE.

**Update**

It seems what you actually have is this:

```
>>> s = u'\xd0\xbc\xd0\xb0\xd1\x80\xd0\xba\xd0\xb0' 
```

This is trickier because you first have to get those bytes into a bytestring before you call `decode`. I'm not sure what the "best" way to do that is, but this works:

```
>>> us = ''.join(chr(ord(c)) for c in s).decode('utf-8')
>>> print us
марка 
```

Note that you should of course be decoding it *before* you store it in the database as a string.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T02:29:04.837

Mark is right: you need to decode the string. Byte strings become Unicode strings by decoding them, encoding goes the other way. This and many other details are at [Pragmatic Unicode, or, How Do I Stop The Pain?](http://bit.ly/unipain).

# sql - oracle中如何使用级联

> ID：11174533
> 
> 赞同：1
> 
> 时间：2012-06-24T02:25:37.367
> 
> 标签：sql, oracle, ora-00907

```
create table loginDetails(
 userId   varchar(30),
 cellPhoneNo    varchar(10),    
 displayName  varchar(20),
 password   varchar(20),
 secretQuestion varchar(50),
 secretAnswer varchar(50),
 joiningDate    date,
 foreign key(userId) references userDetails(userId) on delete cascade on update cascade
); 
```

错误是在 oracle 中使用的。

```
foreign key(userId) references userDetails(userId) on delete cascade on update 
```

级联 *

> 第 9 行的错误：ORA-00907：缺少右括号

此查询在 mysql 上有效，但在 oracle 中无效？请任何人告诉我它在oracle中是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:10:06.600

Oracle 不支持主键的级联更新。主键应该是唯一且不可变的，因此它永远不需要更改。由于您永远不应该更新主键，因此不需要级联这些更新。

通常，您可能还应该使用`VARCHAR2`数据类型而不是`VARCHAR`. 目前，这些数据类型是相同的，但 Oracle`VARCHAR`将来可能会更改类型的语义，以使空字符串的处理方式与`NULL`. 假设您不希望您的应用程序在将来这些语义发生变化时可能会中断，那么使用`VARCHAR2`.

# http - 从 https 转换为 http seo 的含义

> ID：11174534
> 
> 赞同：0
> 
> 时间：2012-06-24T02:25:50.800
> 
> 标签：http, https, seo

我正在考虑从 https 转换为 http（网站的主要部分将是 http，但安全部分将是 https）。当我搜索网站时 Google 已经将 https 版本列为 #4 时，seo 的含义是什么？我能做些什么来减轻这些后果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:02:37.100

切换到 http 应该不会对您的排名产生任何影响，因为它与页面上的内容没有任何关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:14:34.420

为什么要从https切换到http？https 更安全，对客户没有负面影响，谷歌明确鼓励网站管理员使用 https 来打造“更安全”的网络。

如果您仍想从 http 迁移到 https，则应确保您的 https 版本重定向到带有 301（永久移动）标头的 http 版本，以防止重复内容（相同页面、相同内容、不同 url）

# git - 无法从 git 获取或提交

> ID：11174540
> 
> 赞同：0
> 
> 时间：2012-06-24T02:26:30.263
> 
> 标签：git, github

第一次使用比特桶。一位队友创建了一个存储库并将我添加为管理员用户（具有读/写访问权限）。它说未经授权：

[https://alexoh86@bitbucket.org/margaretmz/language-app-angelhack.git](https://alexoh86@bitbucket.org/margaretmz/language-app-angelhack.git)：未授权

曾经有一段时间我能够获取和提交（但是当我提交时，存储库中没有显示任何更改，并且在我进行获取时没有任何文件更新）。不知道那是怎么发生的。未授权的错误消息稍后再次出现。

关于什么可能是错的任何想法？

编辑：应该提到我正在使用 Eclipse 插件从 repo 提交/获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:38:54.407

看起来存储库在 github 上，而不是 bitbucket。这可能就是你遇到问题的原因。bitbucket 上没有名为 margaretmz 的用户，也没有任何名为 language-app 的项目。

看起来正确的 URL 是：

[https://github.com/margaretmz/language-app](https://github.com/margaretmz/language-app)

虽然目前没有任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:27:03.063

这发生在我身上。我唯一的解决方案是重新启动计算机。

# javascript - 带有 Google Maps 和 Weather Image 的网页只能在 IE 中使用，而不能在 Chrome 中使用？

> ID：11174542
> 
> 赞同：1
> 
> 时间：2012-06-24T02:26:56.903
> 
> 标签：javascript, html, google-maps

此网页打开谷歌地图和天气 gif 图像。它在 IE 中运行良好，但在 Chrome 中不行。有人可以告诉我我应该改变什么才能在 Chrome 中进行这项工作吗？

*已删除网址

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:30:24.807

我在单独的页面上进行了测试，大小写很重要。脚本名称为 map_canvas，而 div 名称为 Map_canvas。应该是一样的。

# ios - iOS UINavigationBar 向下移动视图

> ID：11174543
> 
> 赞同：1
> 
> 时间：2012-06-24T02:27:00.883
> 
> 标签：ios, resize, uinavigationbar

我有一个在 UINavigationController 中使用的视图，并按预期自动下推以适应窗口。但是，我需要呈现与模型相同的视图，并且它没有 UINavigationController（或需要一个），所以我只需添加一个 UINavigationBar，如下所示：

```
if (presentedAsModal == YES) {
    UINavigationBar *navigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    [self.view addSubview:navigationBar];

    UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" 
    style:UIBarButtonSystemItemDone target:nil action:@selector(dismissModalViewControllerAnimated:)];

    UINavigationItem *item = [[UINavigationItem alloc] initWithTitle:@"Title"];
    item.leftBarButtonItem = leftButton;
    item.hidesBackButton = YES;
    [navigationBar pushNavigationItem:item animated:NO];

    [[UIBarButtonItem appearance] setTintColor:[UIColor colorWithRed:0/255.0f green:180/255.0f blue:220/255.0f alpha:1.f]];
    [[UINavigationBar appearance] setTintColor:[UIColor colorWithRed:0/255.0f green:140/255.0f blue:180/255.0f alpha:1.f]];
    } 
```

但是，navigationBar 不会自动下推 VC，它最终会覆盖我的部分视图。添加导航栏后，有没有办法让 VC 调整大小以适应新的可用空间（我不想手动执行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:51:47.120

您可以将 vc 嵌入到导航控制器中以进行模态演示，或者做一些修改边界原点的小技巧：

```
CGRect bounds = self.bounds;
bounds.origin.y = -44;
self.bounds = bounds;
...
UINavigationBar *navigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, -44, 320, 44)];
... 
```

# wordpress - 在 Wordpress 插件中实现自动 Github API v3 调用

> ID：11174545
> 
> 赞同：1
> 
> 时间：2012-06-24T02:27:58.747
> 
> 标签：wordpress, github-api

我正在尝试升级一个旧的 Wordpress 插件，该插件在他们的网站上列出了用户的最新提交。使用 github API v2 非常简单，但是 v3 使它变得更加复杂。

功能方面，它非常简单：当插件运行时，它会列出 Wordpress 站点上的提交，并每 N 分钟自动刷新其内容（可由 Wordpress 管理员配置）。管理员只需设置一次，它会计算出何时重新查询 github 以获取最新数据。

但是对于 github API v3，任何获取公共数据的请求都需要 OAUTH 令牌。在一遍又一遍地阅读他们的文档之后，似乎无法自动按照我想要的方式工作。

首先，我不想将用户的 github 密码存储在任何地方（因为在 API 调用中使用它需要进行双向加密，这不够安全），所以基本的身份验证方法已经失效。此处留下“Web 应用程序流程”示例 (http://developer.github.com/v3/oauth/)。但这涉及将实际用户重定向到 github 以接受请求。这也不好。

我是否误解了任何东西，或者根本不可能重新创建插件以像现在一样工作？

如果我不清楚任何事情，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:35:50.983

> 但是对于 github API v3，任何获取公共数据的请求都需要 OAUTH 令牌。

这是不正确的。对于公共数据 - 您可以在不传递任何凭据的情况下查询 GitHub 的 API 端点。例如，请参阅此 API 调用以获取用户信息：[https ://api.github.com/users/izuzak](https://api.github.com/users/izuzak)

因此，要获取用户执行的所有事件，只需像这样调用 API： [https ://api.github.com/users/izuzak/events](https://api.github.com/users/izuzak/events)

请注意，这会为您提供**所有**事件，而不仅仅是提交事件（例如，它还为您提供观察事件），因此您必须将它们过滤掉。查看所有事件类型：http: [//developer.github.com/v3/activity/events/types/](http://developer.github.com/v3/activity/events/types/)

此外，始终可以选择以下选项，而不是调用 API 端点：

*   为用户使用 ATOM 提要（注意用户活动页面上的提要小图标，例如[https://github.com/izuzak?tab=activity](https://github.com/izuzak?tab=activity)）： [https://github.com/izuzak.atom](https://github.com/izuzak.atom)
*   或等效的 JSON 文档：[https ://github.com/izuzak.json](https://github.com/izuzak.json)

尽管如此，这两者都为您提供了用户的所有事件，而不仅仅是提交。

# ruby-on-rails-3 - Heroku上的Redmine pg错误

> ID：11174546
> 
> 赞同：1
> 
> 时间：2012-06-24T02:28:08.493
> 
> 标签：ruby-on-rails-3, heroku, redmine

我用 rails 3.2.6 安装了最新版本的 redmine。它在 mysql 数据库上的开发中运行良好，但我将它上传到使用 postgres 的 heroku。我收到与设置模型相关的错误，我无法查看任何页面。

```
Processing by WelcomeController#index as HTML
Completed 500 Internal Server Error in 5ms

ActiveRecord::StatementInvalid (PG::Error: ERROR:  relation "settings" does not exist
:SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
FROM pg_attribute a LEFT JOIN pg_attrdef d
ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attrelid = '"settings"'::regclass
AND a.attnum > 0 AND NOT a.attisdropped
ORDER BY a.attnum
):
app/models/setting.rb:152:in `check_cache'
app/controllers/application_controller.rb:81:in `user_setup' 
```

我尝试调试它，但似乎与设置模型相关的任何内容都有问题。只是想知道是否有人遇到过这个问题或可以提供见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T10:03:28.967

我在进入 redmine 欢迎页面时遇到了同样的 500 内部错误（在浏览器中：localhost:3000）。在控制台，它显示相同的错误消息：

> ... statementInvalid ... 关系设置不存在 ...

所以我追随 Ultmation 的踪迹，然后回去做

```
$ rake db:migrate
$ rake redmine:load_default_data
$ rails server 
```

然后我去浏览器，和 localhost:3000。错误消失了，我可以看到 redmine 起始页。

# objective-c - 如何使用应用内购买移除广告？

> ID：11174552
> 
> 赞同：0
> 
> 时间：2012-06-24T02:29:41.583
> 
> 标签：objective-c, in-app-purchase, iad

我无法找出购买后我的 iAd 没有被删除的原因。

这是我在具有 iAd 的文件中尝试的内容：

```
#define kInAppPurchaseUpgradeProductId @"kInAppPurchaseUpgradeProductId"

NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
BOOL adsAreOff = [defaults boolForKey:kInAppPurchaseUpgradeProductId];

if (!adsAreOff)
{
    adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
    adView.frame = CGRectOffset(adView.frame, 0, -50);
    adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierPortrait];
    adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    CGRect adFrame = adView.frame;
    adFrame.origin.y = self.view.frame.size.height-adView.frame.size.height;
    adView.frame = adFrame;
    adView.backgroundColor = [UIColor clearColor];
    [self.view addSubview:adView];
    adView.delegate=self;
    self.bannerIsVisible=NO;
}
else 
{
    [adView removeFromSuperview];
} 
```

这是我在应用内购买代码中尝试的内容：

```
-(void)purchaseUpgrade
{
    SKPayment * payment = [SKPayment paymentWithProductIdentifier:kInAppPurchaseUpgradeProductId];
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
}

-(IBAction)purchaseButtonTapped
{
    NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:adView forKey:kInAppPurchaseUpgradeProductId];

    // I tried this first, didn't work
    //[defaults setBool:TRUE forKey:kInAppPurchaseUpgradeProductId];

    [defaults synchronize];

    [self purchaseUpgrade];
} 
```

这是在正确的地方处理，还是应该在`paymentQueue`方法中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:38:27.147

`NSUserDefaults`确保在购买应用程序后设置密钥时同步您的：

```
// After a purchase is made:
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:SOMETHING forKey:kInAppPurchaseUpgradeProductId]
[defaults synchronize]; 
```

# delphi - 设计时的 Firemonkey ScrollBox 编辑

> ID：11174556
> 
> 赞同：1
> 
> 时间：2012-06-24T02:30:24.000
> 
> 标签：delphi, firemonkey, design-time, scrollbars

我正在 Firemonkey 中设计一个应用程序，其中一些控件位于滚动框内。有没有办法通过在设计时以某种方式移动滚动条来编辑滚动框显示区域之外的部分内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T03:54:19.233

我也有过同样的经历。我可以让滚动框在设计模式下滚动的唯一方法是使用鼠标滚轮。如果不是这样，我不知道一个人如何在滚动框的可视部分之外进行设计。这就是你目前所做的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:37:12.500

我认为你不能*直接*这样做（因为滚动条没有暴露在 prop.inspector 中）。似乎唯一的方法是在结构树中选择要编辑的对象，然后在检查器中设置其属性，例如位置。

或者，您可以创建一个 ScrollBox 后代并发布滚动条（将**存储**设置为 false），以便可以在设计时更改它们的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T13:28:11.327

您应该使用自定义设备选项，并调整视图大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-02T05:27:54.990

可能回答太晚了。但是您可以将所有控件添加到一个 trectangle 中，然后在结构面板中拖动该矩形以使其成为滚动框的子项。将trectangle的位置更改为(0, 0)；现在您可以更改矩形的位置以查看无法通过显示区域访问的其他控件。检查这些图片

[![参见图片1，position.y:= 0](../Images/c89c16ecb0f8e469077b037f7ac07d47.png)](https://i.stack.imgur.com/KWPDq.jpg) [![参见图片2，position.y:= -80](../Images/5b71cb78cb84b8042c70613ab3b98f5c.png)](https://i.stack.imgur.com/yKEV0.jpg)

# css - 需要帮助设置 Google 翻译按钮的样式

> ID：11174558
> 
> 赞同：3
> 
> 时间：2012-06-24T02:30:43.940
> 
> 标签：css, styles, google-translate

我无法通过 CSS 在我的网站上设置 Google 翻译按钮的样式。具体来说，我想将背景/文本颜色从默认的白色/黑色更改为与我的页面匹配的颜色。到目前为止，我已经尝试了几种方法，包括此处另一个线程中提供的方法，但无济于事。我正在使用简单的下拉按钮，HTML 代码如下。在此先感谢您的帮助！

```
<div id="google_translate_element" style="float:left; padding-left:15px"></div>

<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'ca,da,de,el,en,es,fr,it,ja,ko,nl,pl,pt,ru,sv,tl', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T03:24:18.133

只需在您的`<scripts>`标签之后粘贴以下内容

```
<style>
    div#google_translate_element div.goog-te-gadget-simple{background-color:green;}
    div#google_translate_element div.goog-te-gadget-simple a.goog-te-menu-value span{color:yellow}
    div#google_translate_element div.goog-te-gadget-simple a.goog-te-menu-value span:hover{color:#fff}
</style>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**更新了悬停的** [**演示**](http://jsfiddle.net/heera/pu6M6/1/) **。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-20T12:51:04.240

jQuery的默认样式：

```
$('document').ready(function () {
    $('#google_translate_element').on("click", function () {

        // Change font family and color
        $("iframe").contents().find(".goog-te-menu2-item div, .goog-te-menu2-item:link div, .goog-te-menu2-item:visited div, .goog-te-menu2-item:active div, .goog-te-menu2 *")
            .css({
                'color': '#687074',
                'font-family': 'tahoma'
            });

        // Change hover effects
        $("iframe").contents().find(".goog-te-menu2-item div").hover(function () {
            $(this).css('background-color', '#18BA9B').find('span.text').css('color', 'white');
        }, function () {
            $(this).css('background-color', 'white').find('span.text').css('color', '#687074');
        });

        // Change Google's default blue border
        $("iframe").contents().find('.goog-te-menu2').css('border', '1px solid #18BA9B');

        // Change the iframe's box shadow
        $(".goog-te-menu-frame").css({
            '-moz-box-shadow': '0 3px 8px 2px #666666',
            '-webkit-box-shadow': '0 3px 8px 2px #666',
            'box-shadow': '0 3px 8px 2px #666'
        });
    });
}); 
```

# python - 工厂类，传递给子类构造函数的参数数量错误

> ID：11174561
> 
> 赞同：2
> 
> 时间：2012-06-24T02:31:38.203
> 
> 标签：python, subclassing

我在看[Python: Exception in the separate module works wrong](https://stackoverflow.com/questions/11173945/python-exception-in-the-separated-module-works-wrong)它使用多用途 GnuLibError 类来“代替”各种不同的错误。每个子错误都有自己的 ID 号和错误格式字符串。

我认为最好将其编写为 Exception 类的层次结构，并着手这样做：

```
class GNULibError(Exception):
    sub_exceptions = 0  # patched with dict of subclasses once subclasses are created
    err_num = 0
    err_format = None

    def __new__(cls, *args):
        print("new {}".format(cls)) # DEBUG
        if len(args) and args[0] in GNULibError.sub_exceptions:
            print("  factory -> {} {}".format(GNULibError.sub_exceptions[args[0]], args[1:])) # DEBUG
            return super(GNULibError, cls).__new__(GNULibError.sub_exceptions[args[0]], *(args[1:]))
        else:
            print("  plain {} {}".format(cls, args)) # DEBUG
            return super(GNULibError, cls).__new__(cls, *args)

    def __init__(self, *args):
        cls = type(self)
        print("init {} {}".format(cls, args)) # DEBUG
        self.args = args
        if cls.err_format is None:
            self.message = str(args)
        else:
            self.message = "[GNU Error {}] ".format(cls.err_num) + cls.err_format.format(*args)

    def __str__(self):
        return self.message

    def __repr__(self):
        return '{}{}'.format(type(self).__name__, self.args)

class GNULibError_Directory(GNULibError):
    err_num = 1
    err_format = "destination directory does not exist: {}"

class GNULibError_Config(GNULibError):
    err_num = 2
    err_format = "configure file does not exist: {}"

class GNULibError_Module(GNULibError):
    err_num = 3
    err_format = "selected module does not exist: {}"

class GNULibError_Cache(GNULibError):
    err_num = 4
    err_format = "{} is expected to contain gl_M4_BASE({})"

class GNULibError_Sourcebase(GNULibError):
    err_num = 5
    err_format = "missing sourcebase argument: {}"

class GNULibError_Docbase(GNULibError):
    err_num = 6
    err_format = "missing docbase argument: {}"

class GNULibError_Testbase(GNULibError):
    err_num = 7
    err_format = "missing testsbase argument: {}"

class GNULibError_Libname(GNULibError):
    err_num = 8
    err_format = "missing libname argument: {}"

# patch master class with subclass reference
# (TO DO: auto-detect all available subclasses instead of hardcoding them)
GNULibError.sub_exceptions = {
    1: GNULibError_Directory,
    2: GNULibError_Config,
    3: GNULibError_Module,
    4: GNULibError_Cache,
    5: GNULibError_Sourcebase,
    6: GNULibError_Docbase,
    7: GNULibError_Testbase,
    8: GNULibError_Libname
} 
```

这以 GNULibError 作为工厂类开始 - 如果您使用属于可识别子类的错误号调用它，它会返回一个属于该子类的对象，否则它会将自身作为默认错误类型返回。

基于此代码，以下内容应该完全等效（但不是）：

```
e = GNULibError(3, 'missing.lib')
f = GNULibError_Module('missing.lib')

print e  # -> '[GNU Error 3] selected module does not exist: 3'
print f  # -> '[GNU Error 3] selected module does not exist: missing.lib' 
```

我添加了一些战略打印语句，错误似乎在`GNULibError.__new__`：

```
>>> e = GNULibError(3, 'missing.lib')

new <class '__main__.GNULibError'>
  factory -> <class '__main__.GNULibError_Module'> ('missing.lib',)  # good...
init <class '__main__.GNULibError_Module'> (3, 'missing.lib')        # NO!
                                            ^
                                           why? 
```

我称子类构造函数为`subclass.__new__(*args[1:])`- 这应该删除 3，子类类型 ID - 但它`__init__`仍然得到 3！如何修剪传递给的参数列表`subclass.__init__`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:59:14.013

您不能影响传递给 的内容`__init__`，只要您使用像现在这样返回自身子类的“工厂类”来执行此操作。仍然传递“3”参数的原因是因为您仍然从`__new__`. 等到`__new__`被调用时，再决定传递给 . 的内容为时已晚`__init__`。如[文档中所述](http://docs.python.org/reference/datamodel.html#object.__new__)（强调添加）：

> 如果`__new__`() 返回一个 cls 的实例，则新实例的`__init__`() 方法将像 一样被调用`__init__(self[, ...])`，其中 self 是新实例**，其余参数与传递给 的参数相同`__new__()`**。

换句话说，当您调用 时`GNULibError(3, 'missing.lib')`，为时已晚 --- 通过使用这些参数调用类，您已确保这些参数将传递给`__init__`. `__new__`可以返回与您可能获得的实例不同的实例，但它不能阻止正常初始化的发生。

正如@Ned Batchelder 所建议的，你最好使用工厂函数而不是“工厂类”，因为函数没有这个`__new__`/`__init__`机器，你可以只返回你想要的类的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T02:34:42.993

这比它需要的要复杂得多。不要试图让一个类创建另一个类的对象。编写一个工厂函数来创建你的异常，不要乱用`__new__`. 正如您所发现的那样，这太棘手了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T03:07:17.400

在您的用例中 - 我同意 Ned - 它需要更复杂。

您可以尝试诸如（基于您的派生类似乎没有做任何事情但与错误消息不同的事实）。

```
class GNULibError(Exception):
    pass # put logic code here

GNULibErrors = {
    1: type('GNULibError_Directory', (GNULibError,), {'message': 'suitable whatever here'})
} 
```

并从那里调整...

# google-visualization - 使用 JSON 填充图表时 Google Chart 中的工具提示

> ID：11174562
> 
> 赞同：1
> 
> 时间：2012-06-24T02:32:01.520
> 
> 标签：google-visualization

我目前正在使用 JSON 填充我的 Google 图表，但我还需要自定义工具提示。目前我的 JSON 看起来像这样：

```
{
    "cols": [
        {"id": "", "label": "date", "type": "string"},
        {"id": "", "label": "price", "type": "number"}
    ],
    "rows": [
        {"c":[{"v": "Apr 24th","f":null}, {"v": 56000,"f":"56000"}]},
        {"c":[{"v": "May 3rd","f":null}, {"v": 68000,"f":"68000"}]},
        {"c":[{"v": "May 13th","f":null}, {"v": 50400,"f":"50400"}]}
    ]
} 
```

但是，如果我也像这样在 JSON 中指定我的工具提示：

```
{
    "cols": [
        {"id": "", "label": "Date", "type": "string"},
        {"id": "", "label": "price", "type": "number"},
        {"id": "", "role": "tooltip", "type": "string"}
    ],
    "rows": [
        {"c":[{"v": "Apr 24th","f":"null"}, {"v": 56000,"f":"56000"}, {"v": "24 April, Price - 56000, Seller-abcd"}]},
        {"c":[{"v": "May 3rd","f":"null"}, {"v": 68000,"f":"68000"}, {"v": "3 May, Price - 68000, Seller-abcd"}]},
        {"c":[{"v": "May 13th","f":"null"}, {"v": 50400,"f":"50400"}, {"v": "23 May, Price - 50000, Seller-abcd"}]}
    ]
} 
```

我收到一个错误，即系列中的所有值都应具有相同的数据类型。

我的客户端代码如下所示：

```
var jsonData = $.ajax({
    url: '../phps/testPhp.php',
    dataType:"json",
    async: false
}).responseText;

var dataTable = new google.visualization.DataTable(jsonData);

var minVal = 50000;
var maxVal = 70000;    

var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

var options = {
    width: 375, height: 240,
    legend: 'none',
    pointSize: 5,
    backgroundColor: 'transparent',
    vAxis: { minValue: 45000, maxValue: 70000 }
};

chart.draw(dataTable, options); 
```

如果有人知道解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T23:02:52.650

工具提示列定义错误；应该是这样的：

```
{"id": "", "role": "tooltip", "type": "string", "p" : { "role" : "tooltip" } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-04T13:49:39.143

扩展@Marc Polizzi 的答案，一些图表类型可以接受[不同的`roles`数据（数据、工具提示、注释等）](https://developers.google.com/chart/interactive/docs/roles)。我将展示如何通过 AJAX（动态）填充和通过使用 PHP 构建的 javascript 显示。

这是一个单数组、多列 JSON 数据集（在响应 AJAX 请求的 php 文件中），其侦听器称为`yourAjaxListener.php`，例如：

```
$grafico = array(
 'average' => array(
    'cols' => array(
        array('type' => 'string', 'label' => 'Plant Variety'),
        array('type' => 'number', 'label' => 'Avg'),
        array('type' => 'number', 'label' => 'Harvested_Hectares'),
        array('type' => 'number', 'label' => 'Kilos_Harvested'),
        array('type' => 'number', 'label' => 'Harvested_Acres'),
        array('type' => 'number', 'label' => 'Bushels_Harvested'),
        array('type' => 'number', 'label' => 'Tooltip')
    ),  
    'rows' => array()
 )
); 
```

这将生成下面的输出

> {"average":{"cols":[{"type":"string","label":"Plant Variety"},{"type":"number","label":"Avg"},{" type":"number","label":"Harvested_Hectares"},{"type":"number","label":"Kilos_Harvested"},{"type":"number","label":"Harvested_Acres" },{"type":"number","label":"Bushels_Harvested"},{"type":"number","label":"Tooltip"}],"rows":[{"c":[ {"v":"Mon 6210 Ipro\n18 英亩"},{"v":"153"},{"v":"435996"},{"v":"165280"},{"v": 18},{"v":2755},{"v":"153 bu/ac"}]},{"c":[{"v":"Tmg 7062 Ipro\n21.9 英亩"},{"v":"150"},{"v":"529600 "},{"v":"197537"},{"v":22},{"v":3292},{"v":"150 bu/ac"}]},{"c":[ {"v":"Bmx Potencia RR\n15.2 英亩"},{"v":"141"},{"v":"367527"},{"v":"128179"},{"v ":15},{"v":2136},{"v":"141 bu/ac"}]},{"c":[{"v":"As 3575 Ipro\n34.7 英亩"} ,{"v":"139"},{"v":"839901"},{"v":"289269"},{"v":35},{"v":4821},{"v ":"139 bu/ac"}]}]}}9 英亩"},{"v":"150"},{"v":"529600"},{"v":"197537"},{"v":22},{"v":3292} ,{"v":"150 bu/ac"}]},{"c":[{"v":"Bmx Potencia RR\n15.2 英亩"},{"v":"141"},{ "v":"367527"},{"v":"128179"},{"v":15},{"v":2136},{"v":"141 bu/ac"}]}, {"c":[{"v":"As 3575 Ipro\n34.7 英亩"},{"v":"139"},{"v":"839901"},{"v":"289269 "},{"v":35},{"v":4821},{"v":"139 bu/ac"}]}]}}9 英亩"},{"v":"150"},{"v":"529600"},{"v":"197537"},{"v":22},{"v":3292} ,{"v":"150 bu/ac"}]},{"c":[{"v":"Bmx Potencia RR\n15.2 英亩"},{"v":"141"},{ "v":"367527"},{"v":"128179"},{"v":15},{"v":2136},{"v":"141 bu/ac"}]}, {"c":[{"v":"As 3575 Ipro\n34.7 英亩"},{"v":"139"},{"v":"839901"},{"v":"289269 "},{"v":35},{"v":4821},{"v":"139 bu/ac"}]}]}}{"v":"150 bu/ac"}]},{"c":[{"v":"Bmx Potencia RR\n15.2 英亩"},{"v":"141"},{" v":"367527"},{"v":"128179"},{"v":15},{"v":2136},{"v":"141 bu/ac"}]},{ "c":[{"v":"As 3575 Ipro\n34.7 英亩"},{"v":"139"},{"v":"839901"},{"v":"289269" },{"v":35},{"v":4821},{"v":"139 bu/ac"}]}]}}{"v":"150 bu/ac"}]},{"c":[{"v":"Bmx Potencia RR\n15.2 英亩"},{"v":"141"},{" v":"367527"},{"v":"128179"},{"v":15},{"v":2136},{"v":"141 bu/ac"}]},{ "c":[{"v":"As 3575 Ipro\n34.7 英亩"},{"v":"139"},{"v":"839901"},{"v":"289269" },{"v":35},{"v":4821},{"v":"139 bu/ac"}]}]}}[{"v":"As 3575 Ipro\n34.7 英亩"},{"v":"139"},{"v":"839901"},{"v":"289269"},{" v":35},{"v":4821},{"v":"139 bu/ac"}]}]}}[{"v":"As 3575 Ipro\n34.7 英亩"},{"v":"139"},{"v":"839901"},{"v":"289269"},{" v":35},{"v":4821},{"v":"139 bu/ac"}]}]}}

`average`这是正确接收 AJAX 后调用 ajax 并显示子数组的 javascript

```
function drawChart() {  
 var jsonDataVariety = $.ajax({
      url: "/yourpath/yourAjaxListener.php",
      dataType: "json",
      async: false
      }).responseText;
 var jsonVariety = eval("(" + jsonDataVariety + ")");
 var jsonSubTotalVariety = new google.visualization.DataTable(jsonVariety.average); 
```

现在我将为数组创建一个视图，您记得它有 7 列（从 0 开始计数）。

第一个参数 =`0`表示我们使用 x 轴上的第一列。第二个参数 =`5`表示我们使用 y 轴上的第 6 列。

```
 var viewSubTotalVariety = new google.visualization.DataView(jsonSubTotalVariety);
 viewSubTotalVariety.setColumns([0, 5, 
```

然后我们建立将显示在`annotation`列上的数字（在下面的示例中 = 2755、3292...）中显示的数据。

```
 { calc: "stringify",
                     sourceColumn: 5,
                     type: "string",
                     role: "annotation" }, 
```

最后我们确定工具提示文本将是什么，其数据来自第 6 列（第 7 列）。

```
 { sourceColumn: 6,
                     type: "string",
                     role: "tooltip" }]); 
```

然后是确定哪个 HMTL 元素将接收图表并调用函数来绘制它，使用来自 `viewSubTotalVariety`而不是原始 JSON 数据集的数据

```
 var chart7 = new google.visualization.ColumnChart(document.getElementById('bar7_div'));
 chart7.draw(viewSubTotalVariety, optionsSubTotalVariety);
} 
```

这会产生这样的东西 [![条形图生产蒲式耳](../Images/affa3ddaeef66c8e584787dca44124e0.png)](https://i.stack.imgur.com/uiLgG.jpg)

# ruby-on-rails-3 - Apache/Passenger rufus cron 作业不工作

> ID：11174563
> 
> 赞同：0
> 
> 时间：2012-06-24T02:32:06.050
> 
> 标签：ruby-on-rails-3, cron, passenger, rufus-scheduler

我有一个在 Apache/Passenger 上运行的 Rails 应用程序。我有一个在后台运行并通过电子邮件发送通知的 rufus cron 作业。当我在 WEBrick 服务器上运行开发中的应用程序时，电子邮件会像应该发送的那样发送。当我在 Apache/Passenger 上启动生产中的应用程序时，电子邮件不会发送。做这项工作的类在 config/initializers/task_scheduler.rb

```
require 'rubygems'
require 'rufus/scheduler'

Rails.logger.info "Starting the scheduler"

## to start scheduler
scheduler = Rufus::Scheduler.start_new

## Every day at 6 AM, send email for projects that haven't been updated in 14 days
Rails.logger.info "Adding the Stale Email job to the scheduler"
scheduler.cron("* * * * *") do
  Rails.logger.info "Running every minute"
  projects = Project.stale
  projects.each do |project|
    Rails.logger.info "Inside the loop"
    days = (Time.now - project.updated_at).to_i / 1.day
    ProjectMailer.stale(Jetway::Application.config.stale_email, project, days).deliver
    Rails.logger.info "Sent stale email for project #{project.name}; it's #{days} days stale."
  end
end 
```

现在它每分钟都在运行，所以我可以调试。这是我的日志文件输出。

```
Started GET "/assets/availity_spinner.gif" for 99.44.242.76 at 2012-06-23 21:46:28 -0400
Served asset /availity_spinner.gif - 304 Not Modified (0ms)
Starting the scheduler
Adding the Stale Email job to the scheduler 
```

您可以看到日志语句以及我们对代码的了解程度。我在博客中读到，Passenger 会杀死线程，特别是围绕 cron 作业。我被困住了，试图找到一个方向来解决这个问题。请指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:10:25.937

将以下行添加到您的 apache2 配置并重新启动您的 apache2 服务器

```
RailsAppSpawnerIdleTime 0
PassengerMinInstances 1 
```

# java - 如何在循环中检查所有任务的完成 while\for

> ID：11174567
> 
> 赞同：1
> 
> 时间：2012-06-24T02:33:17.690
> 
> 标签：java, for-loop, while-loop

我有一个 Routine 对象的 ArrayList，我必须使用此方法来更新任务的各种状态

```
 while(!allRoutineComplete){
        for (Routine routine : routineList) {
            if(!(routine.isBlocked()) && !(routine.isFinished())) {
                routine.run();
                }
        }
        for (Routine routine : routineList) {
            routine.updateStatus();
            if(routine.isFinished()){
                completedRoutineNumber++;
            }
            if(completedRoutineNumber==routineList.size()){
                allRoutineComplete=true;
            }
        }
    } 
```

不幸的是，我的实现中的布尔值`allRoutineComplete`在所有例程完成之前设置为真。

我的代码有什么问题？

如何有效检查所有任务的完成情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:22:40.993

您必须在第一个循环中移动所有例程完成检查，`for`否则例程完成循环更多次。

尝试使用这个：

```
while(!allRoutineComplete){
            for (Routine routine : routineList) {
                if(!(routine.isBlocked()) && !(routine.isFinished())) {
                    routine.run();
                    if(routine.isFinished()){
                        completedRoutineNumber++;
                    }
                    if(completedRoutineNumber==routineList.size()){
                    allRoutineComplete=true;
                    }
                }
            }
            for (Routine routine : routineList) {
                routine.updateStatus();
            }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T02:44:26.277

我怀疑问题是您没有在 while 循环的顶部设置 completedRoutineNumber = 0 。由于您正在迭代整个例程列表，因此如果一半例程已完成并且 while 循环运行两次以上，即使只有一半例程完成， completedRoutineNumber 将第三次超过routineList.size() 。

# javascript - 如何在 JS 中使用正则表达式

> ID：11174568
> 
> 赞同：0
> 
> 时间：2012-06-24T02:33:20.993
> 
> 标签：javascript, regex

```
replace(/(?<=<\?php)[\w\W]*(?=\?>)/g, " "); 
```

我想替换 and 之间的单词`<?php`，`?>`但它在 JavaScript 中不起作用。我听说 JavaScript 不支持正则表达式。我还能如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T02:37:33.597

JavaScript 不支持`(?<=`正则表达式中的lookbehinds（部分）。但是，您可以将其替换为`<?php ?>`并删除断言：

```
replace(/<\?php.+?\?>/g, "<?php ?>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T02:37:23.457

向后看和向前看不起作用，而是重写你的正则表达式。

```
replace(/(<\?php)([\w\W]*)(\?>)/g, "$1$3") 
```

# html - HTML 表单何时能够使用 PUT 和 DELETE 方法？

> ID：11174574
> 
> 赞同：2
> 
> 时间：2012-06-24T02:36:03.660
> 
> 标签：html, crud, w3c

在大约 2 年前讨论并标记为 WONTFIX(1) 之后，现在它似乎正在最终得到修复 (2) 的过程中。

有谁知道这最终会被添加到主要浏览器中吗？（更接近“一个月”或更接近“一年”？）

特别糟糕的是，Chrome 和 Firefox 不仅忽略了 PUT 和 DELETE，而且在其位置发送了一个 GET 请求，暴露了 URI 中的所有表单变量。

*   (1) [https://www.w3.org/Bugs/Public/show_bug.cgi?id=10671](https://www.w3.org/Bugs/Public/show_bug.cgi?id=10671)
*   (2) [https://www.w3.org/html/wg/tracker/issues/196](https://www.w3.org/html/wg/tracker/issues/196)

# javascript - 尽管在正则表达式中使用了全局修饰符，但仅返回一项

> ID：11174582
> 
> 赞同：1
> 
> 时间：2012-06-24T02:38:07.720
> 
> 标签：javascript, jquery, regex, markup, modifier

我正在使用下面的 javascript 代码尝试在下面的 html 标记中提取数字，而不是给出所有匹配项，尽管我在正则表达式中使用了修饰符，`gallery-entry_`但它只返回第一个匹配项。`g`知道为什么吗？

```
<script type="text/javascript">
    var _gallery = jQuery('ul.gallery').html();
    var _pat = /"gallery-entry_([0-9]+)"/gim;
    var _items   = _pat.exec(_gallery);
    alert('str='+_items[0]); // shows str="gallery-entry_1"
    alert('item #1='+_items[1]); // shows item #1=1
    alert('total='+_items.length); // shows total=2
</script> 
```

这是标记：

```
<ul class="gallery">
<li id="gallery-entry_1"><a href="" title=""><img src="" width="116" height="116" alt=""></a></li>
    <li id="gallery-entry_2"><a href="" title=""><img src="" width="116" height="116" alt=""></a></li>
    <li id="gallery-entry_6"><a href="" title=""><img src="" width="116" height="116" alt=""></a></li>
    <li id="gallery-entry_10"><a href="" title=""><img src="" width="116" height="116" alt=""></a></li>
    <li id="gallery-entry_14"><a href="" title=""><img src="" width="116" height="116" alt=""></a></li>
    <li id="gallery-entry_22"><a href="" title=""><img src="" width="116" height="116" alt=""></a></li>
    <li id="gallery-entry_30"><a href="" title=""><img src="" width="116" height="116" alt=""></a></li>
    <li id="gallery-entry_31"><a href="" title=""><img src="" width="116" height="116" alt=""></a></li>         
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T02:40:50.583

`exec`总是返回一项。

您可以`exec`在循环中使用，也可以`String.prototype.match()`改为使用。

```
_gallery.match(_pat); 
```

也就是说，使用正则表达式来获取您想要的数据似乎不是一个很好的选择。

如果您想要 ID，请使用`.map()`.

```
var _items = $('ul.gallery > li').map(function(i,el) {
                                          return el.id;
                                     }).toArray(); 
```

# java - 在 Android Paint 类中使用 PorterDuffXfermode 更改位图上的亮/暗强度

> ID：11174583
> 
> 赞同：3
> 
> 时间：2012-06-24T02:38:51.710
> 
> 标签：java, android, graphics, shader, paint

好的，我的原始问题已经改变。我如何改变这种影响的强度？

```
 DayToNight.setXfermode(new PorterDuffXfermode(Mode.DST_IN)); 
```

在我的梦想世界中，它会像这样工作

```
 DayToNight.setXfermode(new PorterDuffXfermode(Mode.DST_IN(10))); 
```

10 是强度级别。

* * *

举个例子，如果我有一支闪烁的蜡烛，当蜡烛燃烧得很亮时，我希望我在屏幕上绘制的位图保持其origanol 颜色和亮度，当它闪烁时，我希望位图几乎变黑，并且我想要当光线变暗时使位图变暗。

我有方程式、计时器和所有的东西，只是没有如何实际应用它来改变颜色/亮度。也许燃烧图像是我正在寻找的东西？我只是想改变亮度大声笑。

我觉得使用paint.setShader 可能是一个解决方案，但是这方面的信息与我所能找到的相比非常有限。任何帮助，将不胜感激。

编辑：为了清晰起见，我正在寻找一种在将位图绘制到画布时使它们变亮/变暗的方法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T03:26:48.943

这两种方法可以解决您的问题：

1.  在位图后面放置一个黑色矩形并设置位图的不透明度。

2.  绘制位图时在 Paint 上使用 ColorFilter。要使位图变暗，请使用半透明黑色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T20:46:37.223

嘿，我使用了一种技巧来删除黑线。在我的擦除按钮中，我将颜色设置为白色，而不是使用 XferMode .. 它可以工作并且看起来不错..

```
if(erase){
paintColor = Color.parseColor(newColor);
drawPaint.setColor(paintColor);
} 
```

# javascript - 如何让 IE9 尊重 jquery hover()

> ID：11174586
> 
> 赞同：1
> 
> 时间：2012-06-24T02:39:14.127
> 
> 标签：javascript, jquery

我有一个 div 在悬停时动画（我正在使用 jquery 的 .hover() 方法）。div 包含一个带有选择的表单。打开选择并悬停在选项上会使 IE9 将其解释为已“取消悬停”父 div，从而导致第二个悬停动画触发。你可以在这里看到它：

[http://www.oliveboutiquehotelpr.com/temp/](http://www.oliveboutiquehotelpr.com/temp/)

关于如何避免这种情况的任何想法？它在所有其他主要浏览器中都能正常工作。

抱歉，这是一个 jsFiddle：http: [//jsfiddle.net/jun6g/1/](http://jsfiddle.net/jun6g/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T03:26:59.813

通过添加一个反映选择焦点的变量并检查每次它想要动画，我已经解决了你的问题。此处的 Javascript 代码 ( [JSFiddle](http://jsfiddle.net/jun6g/16/) )
**更新**
我已经解决了在您打开它后选择再次出现问题的问题，并在框关闭时通过对选择进行毛刺来关闭它。代码和链接已更新。

```
 var selectfocused = false;
  $('#block-block-5').mouseover(function () {
      selectfocused = false;
  });
  $('#block-block-5 select').focus(function () {
      selectfocused = true;
  }).blur(function () {
      selectfocused = false;
  });
  $('#block-block-5').hover(function () {
      if (selectfocused == false) {
          console.log(selectfocused);
          $(this).stop().animate({
              top: 0,
              opacity: 1
          });
      }
  }, function () {
      if (selectfocused == false) {
          $('#block-block-5 select').blur();
          $(this).stop().animate({
              top: -294,
              opacity: 0.6
          });
      }
  }); 
```

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:13:54.250

此页面没有选择。无论如何，选择元素没有悬停。

# android - 如何从 Android 应用搜索 Google Play 并获取包名

> ID：11174588
> 
> 赞同：-1
> 
> 时间：2012-06-24T02:39:50.867
> 
> 标签：android, search, google-play

我正在寻找一种方法（如果可能）从我自己的应用程序中搜索应用程序，然后获取包名称，以便我可以在 Google Play 上链接到它。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T04:19:06.433

如上面评论中所述，您可以使用这个非官方的 Android Market API 开源项目在 Google Play 上执行搜索并提取包标识符：

[http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

# c# - 如何在 Moq 中设置重载方法调用？

> ID：11174590
> 
> 赞同：5
> 
> 时间：2012-06-24T02:39:56.923
> 
> 标签：c#, moq, overloading

我正在尝试模拟映射接口`IMapper`：

```
public interface IMapper<TFoo, TBar> {
    TBar Map(TFoo foo);
    TFoo Map(TBar bar);
} 
```

在我的测试中，我将模拟映射器设置为期望调用每个（围绕 NHibernate`update`操作）：

```
//...
_mapperMock.Setup(m => m.Map(fooMock.Object)).Returns(barMock.Object);
_mapperMock.Setup(m => m.Map(barMock.Object)).Returns(fooMock.Object);
//... 
```

但是，当进行第二次`Map`调用时，映射器模拟会抛出，因为它只需要一次调用。

在运行时设置期间观看映射器模拟，我可以看到`Map(TFoo foo)`重载被注册，然后在`Map(TBar bar)`设置重载时看到它被替换。

这是 Moq 处理设置方式的问题，还是在这种情况下我需要使用不同的语法？

**编辑** 这是来自测试构造函数的实际实例化代码：

```
public class TestClass {
    private readonly MockRepository _repository = new MockRepository(MockBehavior.Strict);

    public TestClass() {
        //...
        _mapperMock = _repository.Create
            <IMapper<RequestData.Foo, ResponseData.Bar>>();
        //...
     }
} 
```

**编辑 2**

这是一个完整的失败测试用例：

```
public interface IMapper<TFoo, TBar> {
    TFoo Map(TBar bar);
    TBar Map(TFoo foo);
}

public class Foo {
    public override int GetHashCode() {
        // return base.GetHashCode();
        return 1;
    }
}

public class Bar {
    public override int GetHashCode() {
        // return base.GetHashCode();
        return 2;
    }
}

[Test]
public void TestIt()
{
    // Arrange
    var _mapperMock = new Mock<IMapper<Foo, Bar>>(MockBehavior.Strict);
    var fooMock = new Mock<Foo>();
    var barMock = new Mock<Bar>();

    _mapperMock.Setup(m => m.Map(fooMock.Object)).Returns(barMock.Object);
    _mapperMock.Setup(m => m.Map(barMock.Object)).Returns(fooMock.Object);

    // Act - breaks on first line below this comment
    var bar = _mapperMock.Object.Map(fooMock.Object);
    var foo = _mapperMock.Object.Map(barMock.Object);

    // Assert
    _mapperMock.Verify(x => x.Map(fooMock.Object), Times.Once());
    _mapperMock.Verify(x => x.Map(barMock.Object), Times.Once());
} 
```

如果我在其中一个或两个上注释掉`GetHashCode()`覆盖，则测试用例通过。或者，如果我不使用and ，则测试用例通过。`Foo``Bar``Mock``Foo``Bar`

**编辑 3** 我针对这个问题打开了[Moq Issue 347](http://code.google.com/p/moq/issues/detail?id=347)，其中包含更详细的测试用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:06:46.930

不确定您的`Foo`课程是`Bar`什么样的，但我通过了这个测试（Moq 4.0.10827.0，这是 NuGet 中的最新测试）

```
using Moq;
using NUnit.Framework;

namespace ConsoleApplication1
{
    [TestFixture]
    public class Tests
    {
        [Test]
        public void TestIt()
        {
            // Arrange
            var _mapperMock = new Mock<IMapper<Foo, Bar>>();
            var fooMock = new Mock<Foo>();
            var barMock = new Mock<Bar>();

            _mapperMock.Setup(m => m.Map(fooMock.Object)).Returns(barMock.Object);
            _mapperMock.Setup(m => m.Map(barMock.Object)).Returns(fooMock.Object);

            // Act
            var bar = _mapperMock.Object.Map(fooMock.Object);
            var foo = _mapperMock.Object.Map(barMock.Object);

            // Assert
            Assert.AreSame(bar, barMock.Object);
            Assert.AreSame(foo, fooMock.Object);

            _mapperMock.Verify(x => x.Map(fooMock.Object), Times.Once());
            _mapperMock.Verify(x => x.Map(barMock.Object), Times.Once());
        }
    }

    public class Bar
    {
    }

    public class Foo
    {
    }
} 
```

# c# - 从一开始就建立 IDocument 的最有效方法是什么

> ID：11174593
> 
> 赞同：2
> 
> 时间：2012-06-24T02:40:02.743
> 
> 标签：c#, .net, c#-4.0, roslyn

我想使用以下类作为具体示例逐步构建一个新的 IDocument 对象。您可以从您喜欢的任何对象开始并使用您喜欢的任何中间对象，只要生成的对象是最后代表完整类的 IDocument。

第 1 步：添加一个名为 MyNamespace 的新命名空间。此时打印出当前对象应如下所示：

```
namespace MyNamespace
{
} 
```

步骤#2：向这个命名空间添加一个名为 MyClass 的新类。此时打印出当前对象应如下所示：

```
namespace MyNamespace
{
    public class MyClass
    {
    }
} 
```

步骤#3：向这个类添加一个名为 MyMethod 的新方法。此时打印出当前对象应如下所示：

```
namespace MyNamespace
    {
        public class MyClass
        {
            public void MyMethod()
            {
            }
        }
    } 
```

我遇到的问题是，理论上你可以用无数种方法来解决这个问题，或者至少错误地认为你可以解决这个问题。各种不同对象（如 WithChanges、UpdateDocument、各种 Syntax 对象上的方法、ParseCompilationUnit 等）中的无尽方法和构造函数。

基本上，我想以增量方式构建它，每一步都有一个不同的对象，例如我可以打印到控制台，而不是一个大语句在一行中创建整个事情。我已经多次阅读 CTP 6 月版本附带的所有文档，正如我所提到的，我迷失在看似无穷无尽的各种构造函数和方法的组合中。此外，我对一种也考虑性能的方式感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T05:10:17.313

要按照您的建议逐步构建所有内容，我会编写类似于下面的代码的内容。我还鼓励您查看 ImplementINotifyPropertyChanged 示例，因为它进行了大量的语法构造和重写。请注意，正如您所建议的，您可以通过多种方式执行此操作。这是因为 API 旨在支持编辑器等场景，因此您也可以通过为用户键入的每次击键应用文本更改来构建它。哪个 API 是正确的取决于您要实现的目标。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Roslyn.Compilers;
using Roslyn.Compilers.CSharp;
using Roslyn.Services;
using Roslyn.Services.CSharp;

class Program
{
    static void Main(string[] args)
    {
        // Create the solution with an empty document
        ProjectId projectId;
        DocumentId documentId;
        var solution = Solution.Create(SolutionId.CreateNewId())
            .AddProject("MyProject", "MyProject", LanguageNames.CSharp, out projectId)
            .AddDocument(projectId, @"C:\file.cs", string.Empty, out documentId);

        var document = solution.GetDocument(documentId);
        var root = (CompilationUnitSyntax)document.GetSyntaxRoot();

        // Add the namespace
        var namespaceAnnotation = new SyntaxAnnotation();
        root = root.WithMembers(
            Syntax.NamespaceDeclaration(
                Syntax.ParseName("MyNamespace"))
                    .NormalizeWhitespace()
                    .WithAdditionalAnnotations(namespaceAnnotation));
        document = document.UpdateSyntaxRoot(root);

        Console.WriteLine("-------------------");
        Console.WriteLine("With Namespace");
        Console.WriteLine(document.GetText().GetText());

        // Find our namespace, add a class to it, and update the document
        var namespaceNode = (NamespaceDeclarationSyntax)root
            .GetAnnotatedNodesAndTokens(namespaceAnnotation)
            .Single()
            .AsNode();

        var classAnnotation = new SyntaxAnnotation();
        var newNamespaceNode = namespaceNode
            .WithMembers(
                Syntax.List<MemberDeclarationSyntax>(
                    Syntax.ClassDeclaration("MyClass")
                        .WithAdditionalAnnotations(classAnnotation)));
        root = root.ReplaceNode(namespaceNode, newNamespaceNode).NormalizeWhitespace();
        document = document.UpdateSyntaxRoot(root);

        Console.WriteLine("-------------------");
        Console.WriteLine("With Class");
        Console.WriteLine(document.GetText().GetText());

        // Find the class, add a method to it and update the document
        var classNode = (ClassDeclarationSyntax)root
            .GetAnnotatedNodesAndTokens(classAnnotation)
            .Single()
            .AsNode();
        var newClassNode = classNode
            .WithMembers(
                Syntax.List<MemberDeclarationSyntax>(
                    Syntax.MethodDeclaration(
                        Syntax.ParseTypeName("void"),
                        "MyMethod")
                        .WithBody(
                            Syntax.Block())));
        root = root.ReplaceNode(classNode, newClassNode).NormalizeWhitespace();
        document = document.UpdateSyntaxRoot(root);

        Console.WriteLine("-------------------");
        Console.WriteLine("With Method");
        Console.WriteLine(document.GetText().GetText());
    }
} 
```

# c++ - 如果函数没有结束运行，则在 5 分钟内停止函数

> ID：11174598
> 
> 赞同：1
> 
> 时间：2012-06-24T02:42:01.847
> 
> 标签：c++, timeout

我想在我的项目中添加一个功能。

我有 2 个函数在 for 循环中运行，因为我想在随机数组中找到函数的解决方案。我还有一个生成随机数组的函数。在每个循环中，由 random_array fun 生成的数组是 2 个函数的输入。这两个函数**在屏幕上打印解决方案**，它们不返回参数。

```
int main(){
    for (i=0;i<50 i++)
    {
    arr1=ramdom_array();
    func1(arr1)
    func2(arr1)
    }
} 
```

如果功能在 5 分钟内没有结束，我需要停止运行。 **我认为我必须放入这样的功能：**

```
void func1(array<array<int,4>,4> initial)
{
while (5minutes_not_passed)
{
//do staff
if(solution==true)
break;
}
} 
```

但我不知道在 5minutes_not_passed 中放什么。

函数的声明是这样的：

```
void func1(array<array<int,4>,4> initial)
void func2(array<array<int,4>,4> initial) 
```

我发现我可以使用线程库，但我认为与线程啮合不是一个好主意。我相信需要像计时器这样的东西。请注意，这些功能有时可能会在 5 分钟之前结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T02:45:54.657

使用**time_t**和**time**获取当前秒数。

将 5 * 60 添加到该值。

在循环的每次迭代中，获取**time**，如果它大于或等于您的限制，则突破

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:02:20.690

我建议在超时的线程中执行您的函数。这是一个类似问题的链接：

[C++：如何为任意函数调用实现超时？](https://stackoverflow.com/questions/879896/c-how-to-implement-a-timeout-for-an-arbitrary-function-call)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T03:06:23.997

我知道你说过你不想使用线程，但是 boost::thread 会让这变得非常容易。

```
boost::thread t(boost::bind(func1, arr1));
if(!t1.timed_join(boost::posix_time::minutes(5))){
    // thread still running, use interrupt or detach
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T03:10:21.507

或者也许你可以使用类似 kevents (freebsd) 的东西，它有一个计时器通知，信号处理也可以解决问题。 [http://www.linuxquestions.org/questions/programming-9/how-to-use-sigusr1-and-sigusr2-391489/](http://www.linuxquestions.org/questions/programming-9/how-to-use-sigusr1-and-sigusr2-391489/)

因此，在超时后，您需要向您的进程发送一个 SIGUSR1，然后在信号处理函数中，您可以拥有退出的逻辑。

# vb.net-2010 - 从我当前的项目中调用其他 VB 项目

> ID：11174601
> 
> 赞同：0
> 
> 时间：2012-06-24T02:43:15.343
> 
> 标签：vb.net-2010

我创建了一个记事本、一个井字游戏和一个科学计算器。所有这些都在不同的项目中。

现在，我正在创建另一个项目。它将有三个按钮，一个用于计算器，一个用于井字游戏，一个用于记事本。单击任何按钮时，应运行相应的项目。

例如，如果用户单击记事本，则记事本项目应该开始执行并且用户应该能够使用记事本。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:02:42.673

如果你的每个项目都在一个独立的 exe 中，你可以做这样的[事情](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)

```
 Dim myProcess As New Process()
    Dim myProcessStartInfo As New ProcessStartInfo(path_to_exe), "spawn")
    myProcessStartInfo.UseShellExecute = False
    myProcessStartInfo.RedirectStandardOutput = True
    myProcess.StartInfo = myProcessStartInfo
    myProcess.Start() 
```

# java - 多级继承和 foreach Java 循环

> ID：11174602
> 
> 赞同：1
> 
> 时间：2012-06-24T02:44:21.003
> 
> 标签：java

我有一堆表视图，其中有重复的代码。他们过去直接继承 AbstractView 类。所以然后我让它们继承 AbstractListView（这又会从 AbstractView 继承），这将是包含这些表的所有公共属性的新类。

因为我做了那个改变，所以这个循环的行为很奇怪：

```
for (AbstractViewPanel view : registeredViews) {
        view.modelPropertyChange(evt);
} 
```

这是arrayList：registeredViews：

```
private ArrayList<AbstractViewPanel> registeredViews; 
```

我已经运行了调试器，并且registeredViews arrayList 具有所有视图，包括表格视图。由于某种原因，它在集合中最后一个直接继承的视图处停止并完全跳过它们。

我所有的观点过去都是直接继承的：

```
public class someView extends AbstractViewPanel 
```

现在由于我的改变，一些观点是这样的：

```
public class someOtherView extends AbstractListView 
```

这是抽象列表视图：

```
public abstract class AbstractListView extends AbstractViewPanel 
```

这是 AbstractViewPanel

```
public abstract class AbstractViewPanel extends JPanel {

public abstract void modelPropertyChange(PropertyChangeEvent evt);

} 
```

该循环根本不会遍历任何继承 AbstractListView 的东西，但我会假设最后的所有视图都是 AbstractView 类型的。

**更新** 我设法找到了一种解决方法，它只涉及更改循环：

```
for (int i = 0; i < registeredViews.size(); i++) 
{
        registeredViews.get(i).modelPropertyChange(evt);
} 
```

我想知道为什么 foreach 样式循环让我头疼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:02:03.587

作为参考，我创建了您设计的骨架[sscce](http://sscce.org/)。`List<E>`implements `Iterable<E>`，所以没有*先验*的原因你`foreach`应该失败。这里有几件事要检查：

*   验证 GUI 对象*仅*在[事件分派线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

*   `ClassCastException`当 `SomeOtherView`从`List`. _

*   由于`List`是异构的，请参阅[Bloch，*Effective Java* 2nd ed。](http://java.sun.com/docs/books/effective/)，第 29 条：考虑类型安全的异构容器。”[这里](https://stackoverflow.com/a/6139572/230513)提到了该模式。

*   附录：*在这种情况下你不会看到并发修改异常吗？*

    不，[`ConcurrentModificationException`](http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html)“并不总是表明一个对象已被*不同*的线程同时修改。” 如果“列表已在[*结构上修改*](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractList.html#modCount)”在迭代器之外，则在尽最大努力的基础上抛出异常。更有可能的是，失败的迭代器是*在*添加一些视图之后但*在*添加其他视图之前获得的。如果列表是在初始线程上构建并在 EDT 上迭代的，这可能会发生意外。

SSCCE：

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Test {

    private List<AbstractViewPanel> registeredViews;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().init();
            }
        });
    }

    private void init() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setLayout(new GridLayout(0, 1));

        registeredViews = new ArrayList<AbstractViewPanel>();
        for (int i = 0; i < 2; i++) {
            registeredViews.add(new SomeView());
            registeredViews.add(new SomeOtherView());
        }
        for (AbstractViewPanel view : registeredViews) {
            f.add(view);
        }

        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    abstract class AbstractViewPanel extends JPanel {

        public AbstractViewPanel() {
            add(new JLabel(getClass().toString()));
        }
    }

    abstract class AbstractListView extends AbstractViewPanel {
    }

    class SomeView extends AbstractViewPanel {
    }

    class SomeOtherView extends AbstractListView {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T04:06:22.687

我相信您`modelPropertyChange`会更改`registeredViews`列表。

因此，当您使用计数器运行循环时`i`，循环仅限于循环开始时列表的大小。

但是当您使用 for each 循环运行时，如果`modelPropertyChange`更改列表，您的迭代器可能会给您带来一些问题。

# ruby-on-rails - Rails 建站建议

> ID：11174606
> 
> 赞同：1
> 
> 时间：2012-06-24T02:45:06.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我来自 PHP 世界，正在学习 Ruby/Rails。我有一个我用 PHP 做的网站，想把它转换成 Ruby/Rails。从我在 Rails 上阅读的 3 本书中，他们都构建了一个示例站点，其中每个页面都具有相同的布局，因此他们将文件“application.html.erb”用于所有页面的布局。但我的网站有两种不同的布局，一些页面包含 3 列，而其余页面使用 2 列。我想知道是否有人会建议我应该如何在 Rails 中设置两种不同的布局来解决这个问题？

以下是两种不同布局的示例：

*   [http://www.friendsfirstusa.com/](http://www.friendsfirstusa.com/)
*   [http://www.friendsfirstusa.com/members.php?name=all](http://www.friendsfirstusa.com/members.php?name=all)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T02:57:31.627

在 中创建两个布局`app/views/layouts`。使用[多种方法](http://guides.rubyonrails.org/layouts_and_rendering.html#finding-layouts)中的一种来指定应呈现的布局（整个指南值得一读）。还有一个[关于布局的 Railscast](http://railscasts.com/episodes/7-all-about-layouts)（尽管请记住它相当旧）。

# python - how to json serialize objects in python

> ID：11174614
> 
> 赞同：2
> 
> 时间：2012-06-24T02:48:00.053
> 
> 标签：python, json

Does python support random json serialization? I get this error:

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "commands.py", line 36, in toJson
    return json.dumps(self)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.py", line 201, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.py", line 264, in iterencode
    return _iterencode(o, 0)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.py", line 178, in default
    raise TypeError(repr(o) + " is not JSON serializable")
TypeError: <commands.SampleCommand object at 0x105d957d0> is not JSON serializable 
```

**Snippet:**

```
class SampleCommand(Command):
    def __init__(self,message=None):
        super(Command, self).__init__()
        pass

    def parse(self):
        pass

    def toJson(self):
        return json.dumps(self) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T02:54:37.473

json within python by default can only handle certain objects like dictionaries, list and basic types such as ints, strings and so on for more complex types you need to define your own serialization scheme

```
>>> help(json)
Extending JSONEncoder::

    >>> import json
    >>> class ComplexEncoder(json.JSONEncoder):
    ...     def default(self, obj):
    ...         if isinstance(obj, complex):
    ...             return [obj.real, obj.imag]
    ...         return json.JSONEncoder.default(self, obj)
    ...
    >>> dumps(2 + 1j, cls=ComplexEncoder)
    '[2.0, 1.0]'
    >>> ComplexEncoder().encode(2 + 1j)
    '[2.0, 1.0]'
    >>> list(ComplexEncoder().iterencode(2 + 1j))
    ['[', '2.0', ', ', '1.0', ']'] 
```

# jquery - 通过 Ajax 提交的多个 Jquery 日期选择器和表单

> ID：11174617
> 
> 赞同：2
> 
> 时间：2012-06-24T02:49:54.870
> 
> 标签：jquery, ajax, forms, datepicker

有人可以帮我为以下流程创建功能吗？我想在一个页面上有很多日期选择器，每个都有不同的形式。然后onChange，提交正确的表单。我目前正在一遍又一遍地重复代码以使这种行为起作用。这是该页面的所有代码。

```
<html>
<head>
<link rel='stylesheet' type='text/css' media='all' href='style.css' />
<link rel='stylesheet' type='text/css' media='all' href='jqueryui.css' />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>

<script type="text/javascript">
$(document).ready(function () {
    var $datepickers = $(".datepick");
    var $setallow = $(".showdate");
    var $removeallow = $(".hidedate");

    $removeallow.click(function() {
    var $remove = $(this).closest("form");
    $remove.children(".datepick").hide("normal");
        var formData = $remove.serialize();
        submitForm(formData);       
    });
    $setallow.click(function() {
    var $allow = $(this).closest("form");
    $allow.children(".datepick").show("normal");
        var formData = $allow.serialize();
        submitForm(formData);       
    });

    $datepickers.datepicker({ dateFormat: 'yy-mm-dd' });
    $datepickers.change(function() {
        var $form = $(this).closest("form");
        var formData = $form.serialize();
        alert($form.serialize());
    submitForm(formData);       
    });
});
</script>
</head>
<body>
<div>

<h1 align="center">Testing Datepicker</h1>
<div class="entry">
<table id="striping" cellspacing="0" cellpadding="2" width="100%"><tr class="textbold">
<td class="Label" nowrap="nowrap" width="500">
Title Name
</td>
<td class="Label" align="center" nowrap="nowrap" width="70">
Show</td>
<td class="Label" align="center" nowrap="nowrap" width="100">
Don't Show
</td>
<td class="Label" align="left" nowrap="nowrap" width="100">
Date (Year-Month-Day)
</td></tr>

<tr id="highlight">
<td nowrap="nowrap" height="33">Title 19</td>

<form id="form19">
<input name="id" type="hidden" value="19" />
<td align="center" nowrap="nowrap">
<input name="allow" class="showdate" type="radio" value="yes" id="show19" />
</td>
<td align="center" nowrap="nowrap">
<input name="allow" class="hidedate" type="radio" value="no" id="hide19" checked="checked" />
</td>
<td align="center" nowrap="nowrap">
<table width="100%">
<tr><td>
<input name="allowdate" class="datepick" id="datepicker19" type="text" size="12" maxlength="10" value="2012-06-25">
</td>
<td width="121"><div id="feedback"></div></td></tr>
</table>
</td>
<input type="hidden" name="token" value="69601e04ff3580695fa4aa1dc91d35b6" />
</form>

</tr>

<tr id="highlight">
<td nowrap="nowrap" height="33">Title 2</td>

<form id="form2">
<input name="id" type="hidden" value="2" />
<td align="center" nowrap="nowrap">
<input name="allow" class="showdate" type="radio" value="yes" id="show2" />
</td>
<td align="center" nowrap="nowrap">
<input name="allow" class="hidedate" type="radio" value="no" id="hide2" checked="checked" />
</td>
<td align="center" nowrap="nowrap">
<table width="100%">
<tr><td>
<input name="allowdate" class="datepick" id="datepicker2" type="text" size="12" maxlength="10" value="2012-06-25">
</td>
<td width="121"><div id="feedback"></div></td></tr>
</table>
</td>
<input type="hidden" name="token" value="69601e04ff3580695fa4aa1dc91d35b6" />
</form>

</tr>

</table>
</div>

<script>
    function submitForm(formData) {
        $.ajax({
            type: "POST",
            url: "update.php",
            data: formData,
            dataType: "json",
            cache: false,
            timeout: 8000,
            success: function(data) {
                    $("#feedback").html('<img src="icon_updated.png" border="0" />').fadeIn("fast");
                    setTimeout("$('#feedback').fadeOut('slow')", 1000);         
                },
            error: function(data) {
                    $("#feedback").html('<img src="icon_not_updated.png" border="0" />').fadeIn("fast");
                    setTimeout("$('#feedback').fadeOut('slow')", 1000);
                }
        });
    };
</script>

</body>
</html> 
```

我还尝试使用单选按钮来切换显示和不显示日期选择器元素，但没有成功。每页也有超过 2 个日期选择器。我想要一个[日期选择器](https://stackoverflow.com/questions/707603/apply-jquery-datepicker-to-multiple-instances)和一个[ajax 函数](https://stackoverflow.com/questions/8203127/jquery-ajax-request-with-multiple-forms)。我试过上面的链接没有运气。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:56:35.460

这些方面的东西应该适合你：

```
$(function() {
    //var $datepickers = $("#datepicker1, #datepicker2, #datepicker3");
    var $datepickers = $(".datepick");

    $datepickers.datepicker({ dateFormat: 'yy-mm-dd' });
    $datepickers.change(function() {
        var $form = $(this).closest('form');
        var formData = $form.serialize();

        submitForm(formData);       
    });
}); 
```

[现场演示](http://jsfiddle.net/5v4Cm/)

为了简化设置为 $datepicker 的选择器，您可以在文本框中添加一个 datepicker 类。

# iphone - UIImagePickerController 在预览中没有覆盖

> ID：11174620
> 
> 赞同：10
> 
> 时间：2012-06-24T02:50:22.487
> 
> 标签：iphone, uiimagepickercontroller

我正在开发一个使用 UIImagePickerController 的相机覆盖视图的 iPhone 应用程序。但是，我遇到的问题是，当拍摄照片并弹出预览屏幕时，我的叠加层仍在屏幕上。这看起来很奇怪。所以，我需要做两件事中的一件，这两件事都比我希望的要困难：

1.  当预览屏幕处于活动状态时移除覆盖
2.  不显示预览画面

我知道我可以通过设置 showsCameraControls = NO 来完成 #2 - 但是，我目前没有创建自己的相机控件，我仍然想使用默认控件。说我需要使用自定义构建的界面重新创建一个完美的 UI 只是为了绕过预览屏幕，这似乎是一种大锤方法。

另一方面，我觉得内置相机不使用预览屏幕很烦人，但苹果显然强迫应用程序竭尽全力避免使用它。似乎很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:57:14.737

确保将委托设置为`imagePicker.delegate=self;`

并调用委托方法

`- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info;` 您 `imagePicker.view`从 superview 中删除的位置（取决于您调用它的方式）

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-08T15:55:02.893

我关闭相机控制。这样做会关闭预览屏幕。所以从那里你可以制作我自己的预览屏幕（或者根本没有预览屏幕，我只是在调用 takePicture() 后使用照片。当你调用 takePicture() 函数时，你会得到你想要的回调正确远离是

```
let vc                      = UIImagePickerController()
vc.sourceType               = .camera
vc.showsCameraControls      = false
let mask                    = MyMaskXibClassMask(vc, self)
vc.cameraOverlayView        = mask.view
vc.cameraOverlayView?.frame = self.view.bounds
self.present(vc, animated: true, completion:
{
  if let camvc = vc.visibleViewController
  {
    camvc.addChild(mask)
  }
}) 
```

MyMaskXibClassMask 有你的按钮来拍照和你需要的任何其他东西。然后也在我们的MyMaskXibClassMask下

```
@IBAction func take_picture()
{
  camera.delegate = self
  camera.takePicture()
} 
```

当您调用“takePicture()”时，您的委托将被调用（因此您可以完全跳过预览）

```
func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey : Any]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T21:47:24.480

您必须`NSNotificationCenter`与@"_UIImagePickerControllerUserDidCaptureItem" 和@"_UIImagePickerControllerUserDidRejectItem" 一起使用。

进入预览视图时，您可以删除覆盖：) 可以在此处找到工作代码示例： [https ://stackoverflow.com/a/23899448/1933185](https://stackoverflow.com/a/23899448/1933185)

# map - 是否有一个与 std::map 完全相同但没有自动排序的容器？

> ID：11174624
> 
> 赞同：2
> 
> 时间：2012-06-24T02:50:37.760
> 
> 标签：map, containers

是否有其他容器具有与 std::map 相同的功能，但它不会自动对内容进行排序？由于 std::map 是一个“有序”容器。

当我向 std::map 栏添加东西时，我遇到了一个问题；字符串列表会自动按字母顺序排序。

我程序中的其他所有内容都可以正常工作。

我想知道是否有一个容器具有与 std::map 完全相同的功能但没有排序.. 所以我可以进行搜索并将 std::map 替换为 ???:??

有这样的吗？

在此先感谢--Jynks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:55:05.560

[`std::unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)从 C++11 开始有一个可用的容器。许多尚未完全兼容 C++11 的编译器也支持它。此容器不会按字母顺序排列您的项目，但作为关联容器，它不需要保留项目的插入（或任何其他）顺序。

如果您想保留容器中项目的某种顺序*并*使其作为关联容器（即映射）工作，您可以将自己的容器构建为链表和未排序映射的组合，类似于 Java 的[`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html).

# sql - SQL Full Trim Function - Access/VBA 代码我能做到，但我不知道 SQL 函数

> ID：11174625
> 
> 赞同：1
> 
> 时间：2012-06-24T02:51:24.390
> 
> 标签：sql, sql-server, function, ms-access, trim

我需要组合字段，然后修剪文本字段中间的多余空格。使用 Access 对我来说很容易，但创建 SQL 函数却让我望而却步。这就是我在 Access 中的做法，谁能帮我创建一个 SQL 函数？

在 VBA 访问查询中，我可以在查询中使用以下代码执行此操作：

```
FullTrim([tblLeadsResi].[House Number] & [tblLeadsResi].[Street] & " " & 
    [tblLeadsResi].[Street Suffix] & " " & [tblLeadsResi].[Post-directional] & 
    IIf(Not IsNull([tblLeadsResi].[Apartment Number])," #" & 
    [tblLeadsResi].[Apartment Number],"")) 
```

Access中的模块代码：（基本上，如果它是一个双空格，它不会添加第一个空格）

```
Public Function FullTrim(stText As String) As Variant
Dim intLen As Integer, stPart As String, stBlank As String, stNewText As String

    '   ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    '   ++++    Takes any spaces away from a Text Value     ++++
    '   ++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    If IsNull(stText) Or stText = "" Then
        FullTrim = ""
    Else
        For intLen = 1 To (Len(stText) - 1)
            stPart = Mid(stText, intLen, 1)
            stBlank = Mid(stText, intLen, 2)
            If stBlank <> "  " Then
                stNewText = stNewText & stPart
            End If
        Next intLen

        intLen = Len(stText)
        stPart = Mid(stText, intLen, 1)
        stNewText = stNewText & stPart

        stNewText = Trim(stNewText)
        FullTrim = stNewText
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:14:01.017

**创建**

```
CREATE FUNCTION dbo.FullTrim(@Value NVARCHAR(MAX))
RETURNS NVARCHAR(MAX)
AS
BEGIN
    DECLARE @Subs NVARCHAR(6)
    SET @Subs = '~@$$#%' -- Make this some string you will never have in your data
    RETURN LTRIM(RTRIM(REPLACE(REPLACE(REPLACE(@Value, '  ', ' ' + @Subs), @Subs + ' ', ''), @Subs, '')))
END 
```

**用法**

```
SELECT dbo.FullTrim('  This is a     string      with    many spaces ') 
```

**结果**

```
This is a string with many spaces 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:03:30.180

试试这个功能：

```
CREATE FUNCTION [dbo].[FullTrim](@text nvarchar(max))
RETURNS nvarchar(max)
AS
BEGIN
    RETURN replace(@text, ' ', '')
END 
```

...然后传递所有连接在一起的字段，例如：

```
SELECT dbo.FullTrim([tblLeadsResi.House Number] + [tblLeadsResi.Street] + ...) 
FROM tblLeadsResi
... 
```

# javascript - VIM 的 JavaScript 实现

> ID：11174628
> 
> 赞同：15
> 
> 时间：2012-06-24T02:52:07.647
> 
> 标签：javascript, vim

我正在寻找用 Javascript 实现的 Vi 变体。

不幸的是，我得到了配置 Vim 以编写 JavaScript 代码的所有类型的结果。

我发现的唯一有用的结果是 JSVI。

问题：我应该研究其他任何（也许更现代）的实现吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-13T18:55:00.590

你应该看看 Vim.js 一个用 Javascript 编写的完整的 Vim，在你的浏览器中工作

1.  持久的 ~/.vimrc
2.  从 Vim.js 执行 JavaScript
3.  读取本地文件
4.  从 Dropbox 读取文件

玩得开心 ！

[http://coolwanglu.github.io/vim.js/web/vim.html](http://coolwanglu.github.io/vim.js/web/vim.html)

如果你想要更快的东西，这里有一些麻省理工学院学生制作的 VI 实现： [http ://web.mit.edu/~georgiou/www/vi/](http://web.mit.edu/~georgiou/www/vi/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-24T15:32:06.170

[ACE](http://ace.ajax.org)编辑器具有 vim 键绑定以及来自其他流行编辑器的键绑定，但这不是 vim 的完整实现。

可以在[GitHub 上](http://github.com/ajaxorg/ace)找到 ACE 的源代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-18T21:09:43.253

试试[CodeMirror](http://codemirror.net/demo/vim.html)。它非常忠实地模拟了 VIM，并支持：

1.  正常模式下最常见的动作和运算符
2.  操作员/运动正交性
3.  视觉模式
4.  寄存器
5.  分数
6.  搜索和替换`/`, `*`, `g*`,`:substitute`
7.  宏
8.  文本对象

尽管如此，这绝不是 Javascript 中的完整 VIM 实现，它只是尽可能忠实地模拟最有用的功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-27T06:46:13.623

我正在为 Chrome/Opera/Firefox 扩展编写名为 wasavi 的 JavaScript 中的 vi 克隆。虽然 wasavi 还不完善，但支持几乎所有的 vi/ex 命令。

如果您有兴趣，请尝试：[http ://appsweets.net/wasavi/](http://appsweets.net/wasavi/)

源代码托管在[GitHub 上](https://github.com/akahuku/wasavi)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-20T18:26:21.283

Vimulator 看起来很有趣，虽然相当有限并且用于教授 vim（并且内置了相当烦人的延迟）： [https ://github.com/thoughtbot/vimulator](https://github.com/thoughtbot/vimulator)

它缺少撤消命令和 Shift-% 命令（用于匹配括号）。它至少有搜索功能。

至少有两个答案比这个更好： [http://coolwanglu.github.io/vim.js/web/vim.html](http://coolwanglu.github.io/vim.js/web/vim.html) 和 [http://codemirror.com](http://codemirror.com)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-29T15:47:44.623

检查[vim-in-textarea](https://github.com/jakub-m/vim-in-textarea)以及在线演示。它适用于 HTML 文本区域，*不会*改变样式或外观。

# javascript - Limiting the number of checkboxes selected by user in PHP

> ID：11174629
> 
> 赞同：0
> 
> 时间：2012-06-24T02:52:12.690
> 
> 标签：javascript, validation, forms

I created the follwing `table` which gives the user option to uses check boxes to ehter the selection. I limited the number of selection to four, but its selecting more than 4 choices.

HTML:

```
<table width="100%" border="0">
    <tr>
        <th width="37%" height="19" align="center" bgcolor="#CCCCCC">
            <strong>Biological</strong>
        </th>
        <th width="37%" align="center" bgcolor="#CCCCCC">
            <strong>Psychological</strong>
        </th>
        <th width="37%" align="center" bgcolor="#CCCCCC">
            <strong>Social</strong>
        </th>
    </tr>
    <tr>
        <td>
            <input type="radio" name="Antidepressant" id="Antidepressant" value="Antidepressant" onclick="chkcontrol(1)" />
            <label for="Antidepressant"></label>Antidepressant</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>
            <input type="radio" name="Antipsychotic oral" id="Antipsychotic oral" value="Antipsychotic oral" onclick="chkcontrol(2)" />
            <label for="Antipsychotic oral"></label>Antipsychotic oral</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>
            <input type="radio" name="Antipsychotic_depot" id="Antipsychotic depot" value="Antipsychotic depot" onclick="chkcontrol(3)" />
            <label for="Antipsychotic depot"></label>Antipsychotic depot</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>
            <input type="radio" name="Bblocker" id="B-blocker" value="B-blocker" onclick="chkcontrol(4)" />
            <label for="B-blocker"></label>B-blocker</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>
            <input type="radio" name="Benzodiazepine" id="Benzodiazepine" value="Benzodiazepine" onclick="chkcontrol(5)" />
            <label for="Benzodiazepine"></label>Benzodiazepine</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>
            <input type="radio" name="Mood_stabiliser" id="Mood stabiliser" value="Mood stabiliser" onclick="chkcontrol(6)" />
            <label for="Mood stabiliser"></label>Mood stabiliser</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>
            <input type="radio" name="ECT" id="ECT" value="ECT" onclick="chkcontrol(7)" />
            <label for="ECT"></label>ECT</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>
            <input type="radio" name="Otherbio" id="Other" value="Other" />
            <label for="Other"></label>Other</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

The script used to chec the number of selection:

```
function chkcontrol(j) {
    var total = 0;
    for (var i = 0; i < document.form1.ckb.length; i++) {
        if (document.form1.ckb[i].checked) {
            total = total + 1;
        }
        if (total > 4) {
            alert("Please Select only three")
            document.form1.ckb[j].checked = false;
            return false;
        }
    }
} 
```

Here's a screenshot:

![enter image description here](../Images/fda745b58df9d244cd8f240ca62368fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:05:05.773

After a few minor corrections:

```
<html>
<head>
<script type="text/javascript">
function chkcontrol(j) {
    var total=0;
    for(var i=0; i < document.form1.ckb.length; i++){
        if(document.form1.ckb[i].checked){
            total =total +1;
        }
        if(total > 4){
            alert("Please Select only four!")
            document.form1.ckb[j].checked = false ;
            return false;
        }
    }
}
</script>

</head>
<body>
<table width="100%" border="0">
    <form action="" id="form1" name="form1">
            <tr>
              <th width="37%" height="19" align="center" bgcolor="#CCCCCC"><strong>Biological</strong></th>
              <th width="37%" align="center" bgcolor="#CCCCCC"><strong> Psychological</strong></th>
              <th width="37%" align="center" bgcolor="#CCCCCC"><strong> Social</strong></th>
            </tr>
            <tr>
              <td><input type="radio" name="Antidepressant" id="ckb" value="Antidepressant" onclick="chkcontrol(0);" />
                <label for="Antidepressant"></label>Antidepressant</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><input type="radio" name="Antipsychotic oral" id="ckb" value="Antipsychotic oral" onclick="chkcontrol(1);" />
                <label for="Antipsychotic oral"></label>Antipsychotic oral</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><input type="radio" name="Antipsychotic_depot" id="ckb" value="Antipsychotic depot" onclick="chkcontrol(2);" />
                <label for="Antipsychotic depot"></label>Antipsychotic depot</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><input type="radio" name="Bblocker" id="ckb" value="B-blocker"  onclick="chkcontrol(3);"/>
                <label for="B-blocker"></label>B-blocker</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><input type="radio" name="Benzodiazepine" id="ckb" value="Benzodiazepine"  onclick="chkcontrol(4);"/>
                <label for="Benzodiazepine"></label>Benzodiazepine</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><input type="radio" name="Mood_stabiliser" id="ckb" value="Mood stabiliser"  onclick="chkcontrol(5);"/>
                <label for="Mood stabiliser"></label>Mood stabiliser</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><input type="radio" name="ECT" id="ckb" value="ECT"  onclick="chkcontrol(6);"/>
                <label for="ECT"></label>ECT</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><input type="radio" name="Otherbio" id="ckb" value="Other"  onclick="chkcontrol(7);"/>
                <label for="Other"></label>
                Other</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
        </form>
    </table>
</body>
</html> 
```

Still, it doesn't make sense as the form is not submitting its content anywhere, but it's a good POC.

# ruby - 一次性收集多个模式匹配并同时删除它们

> ID：11174630
> 
> 赞同：0
> 
> 时间：2012-06-24T02:52:30.723
> 
> 标签：ruby, regex

我有一堆如下所示的字符串：

```
str = 'CA3 03223-DG 0101-CA2 0101-CA1 0101 pyramidal cells c (PC-c)' 
```

也就是说，有一堆连字符分隔的前导字符串，例如“CA3 03223”，后跟一些单词（在上面的示例中，“pyramidal cells c (PC-c)”。我想在一行中收集所有的前导，连字符分隔的部分到一个数组中，同时从 中删除它们`str`。在这一行的末尾，我应该有一个如下所示的数组：

```
['CA3 03223', 'DG 0101', 'CA2 0101', 'CA1 0101'] 
```

并且`str`应该是：

```
'pyramidal cells c (PC-c)' 
```

我目前的解决方案是：

```
myarray = []; match = ''
myarray << match.strip[0..-2] while (match = str.slice!(/[A-Z0-9]{2,3} \d{3,}[\-\s]/)) 
```

相当丑陋，我知道。如何将其缩短为一条合理长度的线？我正在寻找类似的东西`String#scan`，它会删除它找到的匹配项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:21:59.910

像这样的东西可能是最干净的：

```
myarray, str = str.scan(re), str.gsub(re, '') 
```

如果你想要一个单行，你可以移动正则表达式内联，但我不会

# java - Spring 和 Soap API 错误：“无法使用 XSD 进行验证：您的 JAXP 提供程序”

> ID：11174641
> 
> 赞同：1
> 
> 时间：2012-06-24T02:57:46.447
> 
> 标签：java, spring, soap, paypal

我有一个基于 Spring 的 Java 应用程序，它使用他们的 Soap API 连接到 PayPal。它在 Jetty 上运行良好，但是当我尝试使用 Tomcat 部署它时，出现以下错误：

> 无法使用 XSD 进行验证：您的 JAXP 提供程序...

我怎么解决这个问题？正如错误提示的那样，我尝试更新到最新的 xerces jar 文件，但这没有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T03:02:30.313

为了解决这个问题，我必须在我的 JVM 中添加以下命令行参数：

```
-Djavax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl

-Djavax.xml.parsers.SAXParserFactory=com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl 
```

这可以在 Eclipse 中通过

*   在“服务器”视图中双击“Tomcat”

*   选择“打开启动配置”

*   选择“Arguments”，然后选择“VM Arguments”，然后粘贴上面的两行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T21:18:46.217

或者将 xerces.jar 、 xalan.jat 和 xml-apis.jar 添加到您的类路径中

# java - 调整 ExpandItem 的大小变得很紧张

> ID：11174649
> 
> 赞同：2
> 
> 时间：2012-06-24T03:00:10.073
> 
> 标签：java, swt

我有一个触发 StyledText 的调整大小和它所在的 ExpandItem 的高度的窗扇。它变得“跳跃”。换句话说，StyledText 倾向于扩大到所需的大小，然后在调整大小时恢复到其原始大小。最后一切都在正确的位置，但这是一个丑陋的过渡。

我可以在以下代码中进行哪些更改以摆脱“跳跃”？

```
 public static void main(String[] args) {
    final Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new FillLayout(SWT.VERTICAL));
    shell.setSize(400, 400);

    //Create the expand bar
    ExpandBar expandBar1=new ExpandBar(shell,SWT.None);

    //Create the first expand item.
    final ExpandItem expandItem1=new ExpandItem(expandBar1,SWT.None);
    final Composite composite=new Composite(expandBar1,SWT.NONE);
    final RowLayout layout=new RowLayout(SWT.VERTICAL);
    composite.setLayout(layout);
    expandItem1.setControl(composite);
    expandItem1.setHeight(100);

    //Add text
    final StyledText one=new StyledText(composite,SWT.BORDER|SWT.MULTI|SWT.WRAP|SWT.V_SCROLL);
    one.setText("aaaa\nbbbbbb\nccccc\ndddd");

    //Add a sash
    final Sash sash1=new Sash(composite,SWT.HORIZONTAL);
    sash1.setSize(sash1.getSize().x, 10);
    sash1.addListener(SWT.Selection,new Listener(){
        @Override
        public void handleEvent(Event event) {
            one.setSize(one.getSize().x,event.y);
            sash1.setLocation(0, event.y+5);
            expandItem1.setHeight(event.y+10);
            composite.redraw();
        }
    });

    //Create the second expand item.
    ExpandItem expandItem2=new ExpandItem(expandBar1,SWT.None);
    Composite composite2=new Composite(expandBar1,SWT.None);
    composite2.setLayout(new FillLayout());
    StyledText two=new StyledText(composite2,SWT.V_SCROLL);
    two.setText("two\nabadfae\nasdfaef\nadfef\nesfj;lef\nefsfe\nasefae\n...");
    expandItem2.setControl(composite2);
    expandItem2.setHeight(100);

    //Final junk
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) display.sleep();
    }
    display.dispose();
} 
```

注意：随时提供有关改进此代码的任何其他提示。我是 SWT 的新手。

# batch-file - 教我 Telnet 脚本

> ID：11174650
> 
> 赞同：3
> 
> 时间：2012-06-24T03:00:43.430
> 
> 标签：batch-file, telnet

这是我的情况。我正在使用摩托罗拉机盖。每次我关闭我的电脑或关闭调制解调器电源时，我的 Canopy 的 ESN 都会从默认值变回。

我`telnet`在启动时一次又一次地运行以使我的 Internet 连接正常工作。我想要一个批处理文件来完成这项工作，这样我就不必`telnet`一次又一次地运行。我正在使用 Windows 7 32 位。

以下是详细信息：

*   Canopy telnet 是 169.254.1.1（它没有任何密码）
*   我要放置的 ESN 是 db:68:d3

手动我可以使用这个脚本来做到这一点：

```
telnet 169.254.1.1
mac db:68:d3 
```

它完成了..

如果这里有人可以帮助我并为我制作这个脚本，那将是一个很大的帮助。我在这里制作了一个简单的脚本，但问题是它停止在`telnet`：

```
cd \
rem .
COLOR 0E
@ECHO OFF
cls
ECHO Change ESN
pause
ECHO ARE YOU SURE YOU WANT TO PROCEED? 
pause
ECHO ARE YOU SURE?
pause
telnet 169.254.1.1 >>>>>>>>>>>>>>>>>>>>>>>>>>>>after this the script below doesn't follow.
testing
enable
telnet+> mac db:68:d3
ECHO You have Changed ESN successfuly
ECHO Done.
Echo 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:09:52.653

您不能使用 bat 文件执行此操作，但您可以使用 windows 脚本和 vbscript 执行此操作，默认情况下也应该可用。将其保存为 autoscript.wsf（.wsf 是一个[windows 脚本文件](http://en.wikipedia.org/wiki/Windows_Script_File)）：

```
<job>
<script language="VBScript">
Option Explicit
On Error Resume Next
Dim WshShell
set WshShell=CreateObject("WScript.Shell")
WshShell.run "cmd.exe"
WScript.Sleep 1000
WshShell.SendKeys "telnet 169.254.1.1"
WshShell.Sendkeys("{Enter}")
WScript.Sleep 1000
WshShell.SendKeys "mac db:68:d3"
WshShell.Sendkeys("{Enter}")
WScript.Sleep 1000
WshShell.SendKeys "exit"
WshShell.SendKeys ("{Enter}")
WScript.Quit 
</script>
</job> 
```

并从你的 bat 文件中调用它

```
call autoscript.wsf 
```

或者直接运行

```
C:\> autoscript.wsf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:27:03.347

快速搜索显示您可以使用 putty 及其命令行实用程序`plink`来获得所需的结果。你可以在这里得到它们：[腻子下载页面](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)

将您的命令放在一个文件中（例如。`myCommandFile.txt`）：

```
mac db:68:d3
exit 
```

然后你应该能够从命令行运行`plink 169.254.1.1 -telnet <myCommandFile.txt`来设置你需要的 ESN。我不确定它是否会正确断开/终止`plink`，您必须使用您的设置对其进行测试。

确认它按预期工作后，将其放入批处理文件中

# ruby-on-rails - RubyMine 无法识别 Rails 应用程序

> ID：11174652
> 
> 赞同：6
> 
> 时间：2012-06-24T03:01:01.633
> 
> 标签：ruby-on-rails, ruby, intellij-idea, rubymine

我有一个关于使用从目录打开方法将 Rails 应用程序导入 RubyMine 的问题。我的计算机上有两个不同的 Rails 应用程序，但 RubyMine 仅将其中一个识别为 Rails 应用程序，而将另一个识别为普通目录。

这是一个问题，因为我想为我当前的项目从 RubyMine 中获取全部功能。任何人都可以提出解决方案/RubyMine 的方法来确定某个东西是否是 Rails 应用程序吗？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-01T10:28:04.693

对我来说，在项目根目录中**删除**并重新创建**项目设置文件夹**- **.idea** on linux 解决了错误识别。删除后**重启IDE**，再次**打开项目文件夹**。这解决了可能出现的其他小错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:54:22.397

检查您打开的目录是否有以下文件：

*   `config/routes.rb`-- 表示一个 Rails 应用程序
*   `config/application.rb`-- 可选，表示 Rails 3+ 应用程序

如果`config/routes.rb`存在，则项目配置为 Rails，否则您将获得一个普通的 Ruby 项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-17T21:26:53.353

对我来说，问题是当我实际使用 2.1.0 时，RubyMine 期望我使用的是 ruby​​ 1.9.3（没有安装 rails gem）。我通过打开首选项来修复它，单击`Languages & Frameworks`> `Ruby SDK and Gems`，选择 RVM: ruby​​-1.9.3 然后单击窗口底部的减号按钮将其删除。我也为 global ruby​​-1.9.3 做了这个。

这导致 RubyMine 使用 ruby​​-2.1.0 及其 gemset，这解决了我所有的问题 :-)

# c# - SQLiteDataReader.read() 清空结果？

> ID：11174654
> 
> 赞同：2
> 
> 时间：2012-06-24T03:01:17.140
> 
> 标签：c#, visual-studio-2010, sqlite, system.data.sqlite

我的 C# 类中有一个从 SQLite 数据库调用单个结果的方法。我的数据库连接成功打开，但是在不同的地方运行断点后，我发现了一些奇怪的东西。这是我的代码：

```
Dictionary<string, string> getResult(string id)
{
    dataConn.Open();
    SQLiteCommand comm = dataConn.CreateCommand();
    comm.CommandText = "SELECT * FROM [tableName] WHERE id='" + id + "'";
    SQLiteDataReader result = comm.ExecuteReader();
    Dictionary<string, string> resultDict = new Dictionary<string, string>();

    /*
    This doesn't work.
    while(result.Read())
    {
        resultDict.Add(result.GetName(0), result.GetString(0));
    }
    */

    result.Read();
    for (int i = 0; i < result.FieldCount; i++)
    {
        resultDict.Add(result.GetName(i), result.GetString(i));
    }
    result.Dispose();
    comm.Dispose();
    dataConn.Close();
    return resultDict;
} 
```

我知道我可以使用`SQLiteParameters`内联而不是内联，但由于某种原因，他们破坏了我的查询。

在我的第一个循环中，如果我在它开始之前放置一个断点，我可以看到我的查询返回了一个结果，这正是我所需要的。但是，当我进入循环时，在执行除 之外的任何代码之前`reader.Read()`，VS2010 会说“枚举没有产生任何结果”。但他们之前就在那里？

所以，我尝试了第二个循环。执行`reader.Read()`，然后循环返回的字段。当我这样做时，VS2010 会抛出错误“没有选择当前行。”。

我对此完全迷失了，我不知道出了什么问题，因为我与其他数据库文件的其余 SQLite 连接工作正常。我已经在 中测试了我的查询`SQLite Administrator`，并且我的查询执行得非常好。我的目标是最终得到一个字典，其中键是字段的名称，值是所述字段的结果。关于有什么问题的任何想法？或者，在修复它的过程中，有没有办法让这段代码更简单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T03:29:32.340

解决了。出于某种原因，使用`.GetString(0)`或`.GetString(i)`正在破坏它。但是，当我把它变成`.GetValue(0).ToString()`它时，它工作得很好。我不知道为什么会这样，它超出了我的范围，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:32:52.760

这是因为`GetValue(0)`没有返回字符串。

将其转换为字符串允许您将其添加到`Dictionary<string,string>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T09:50:41.573

我有一个类似的问题，在我的情况下，表格是空的，我要求某个列的 MAX() 。我通过首先检查 COUNT(*) 不是 0 来解决它。

# objective-c - 如何在没有 XIB 的 Xcode Empty Application 中显示 Web 视图？

> ID：11174660
> 
> 赞同：0
> 
> 时间：2012-06-24T03:02:42.500
> 
> 标签：objective-c, xcode, cocoa-touch, xcode4, xcode4.2

可能已经在某个地方找到了答案，但我一定不是在寻找正确的东西，所以在这里问......

当我在 Xcode 4.2.1 中创建一个新项目作为空应用程序时，是否可以在没有 Xib 文件的情况下显示 Web 视图？

似乎有很多关于如何将 Xib 添加到空应用程序的答案，但我想知道它是否可以在没有一个的情况下完成。任何指针表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:16:58.633

分配、初始化并添加到窗口 rootView

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIWebView *view = [[UIWebView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [view loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://google.com"]]];
    UIViewController *controller = [[UIViewController alloc] init];
    controller.view = view;

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = controller;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

# r - 在 R 中正确使用“cor”函数

> ID：11174667
> 
> 赞同：0
> 
> 时间：2012-06-24T03:05:09.567
> 
> 标签：r, statistics

我很想知道正确的 x（向量矩阵或数据框）输入是什么样的。我目前在两种不同类型的矩阵中使用该函数。但是，我不确定 R 将如何按照我的意图解释我的数据。我将通过示例解释矩阵的类型。

类型 1

```
 Gene1 Gene2 Gene3
    sample1
    sample2 
```

类型 2

```
 Sample1 Sample2 Sample3
gene 1
gene 2
gene 3 
```

这些格式中的任何一种都是有效的 x 参数吗？我输入了两种类型的矩阵并得到了一些结果，但不知道这是否正确使用该函数，这些只是随机数。感谢您的时间。我很抱歉这不是更有趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T03:40:49.823

当`X`是一个矩阵时，`cor(X)`将产生一个平方相关矩阵，其行数和列数等于原始矩阵中的列数。换句话说，`cor`在矩阵中的列之间产生相关性。这是一个简单的例子：

```
> x <- rnorm(5)
> y <- rnorm(5)
> cbind(x,y)
            x        y
[1,]  1.67287  1.70663
[2,] -1.23120  0.56948
[3,]  0.67538 -0.20596
[4,] -1.21077  0.11648
[5,]  0.60409  1.15405

> cor(cbind(x,y))
        x       y
x 1.00000 0.56329
y 0.56329 1.00000 
```

这是否回答你的问题？

# sql - 什么是海量存储方法（用于用户授权目的）的有效且合理的替代方案？

> ID：11174668
> 
> 赞同：0
> 
> 时间：2012-06-24T03:05:09.790
> 
> 标签：sql, ruby-on-rails, ruby, database, ruby-on-rails-3

我正在使用 Ruby on Rails 3.2.2 和 MySQL。在我之前关于[“如何为用户授权目的处理数据库中的大量记录存储”的](https://stackoverflow.com/questions/11114261/how-to-handle-massive-storage-of-records-in-database-for-user-authorization-purp)问题之后，因为相关答案（关于如何解决问题或如何完成我正在寻找的问题）不够详细或需要很多资源（至少对我来说），*我想知道什么是该方法的有效和合理的替代方案*。

简而言之，这个问题可以表述为：**当您必须获取*****多个*****“授权”记录时，****如何处理*“复杂”***（在 SQL 查询级别）用户授权？也就是说，例如，假设我的模型类中有一个方法，当您使用如下代码时，如何通过执行*尽可能少的 SQL 查询*来检索*多个*记录（记录可能是 10 或数十亿）*注意*：以下代码主要用于控制器操作）：*[`readable_by_user?`](https://stackoverflow.com/questions/11074008/what-is-a-common-approach-to-scope-records-by-those-that-an-user-can-read)***`index`****

 ***```
Article.readable_by_user(@current_user)
# => Returns all articles readable by the current user. 
```***

# android - 线程太慢了。执行代码的更好方法（Android AndEngine）？

> ID：11174672
> 
> 赞同：0
> 
> 时间：2012-06-24T03:07:39.133
> 
> 标签：android, multithreading, handler, andengine

我正在开发一个游戏，用户每次触摸都会创建精灵。然后我运行一个线程来检查这些精灵是否与其他精灵发生碰撞。问题是，如果我敲得太快，会导致空指针异常错误。我相信这是因为我的点击速度比我的线程运行速度快。这是我的线程：

```
public class grow implements Runnable{

        public grow(Sprite sprite){

        }
        @Override
        public void run() {
            float radf, rads; //fill radius/stationary radius
            float fx=0, fy=0, sx, sy;

            while(down){
                if(spriteC[spriteNum].active){
                    spriteC[spriteNum].sprite.setScale(spriteC[spriteNum].scale += 0.001);
                    if(spriteC[spriteNum].sprite.collidesWith(ground)||spriteC[spriteNum].sprite.collidesWith(roof)||
                            spriteC[spriteNum].sprite.collidesWith(left)||spriteC[spriteNum].sprite.collidesWith(right)){
                        down = false;
                        spriteC[spriteNum].active=false;
                        yourScene.unregisterTouchArea(spriteC[spriteNum].sprite);
                    }

                    fx = spriteC[spriteNum].sprite.getX();
                    fy = spriteC[spriteNum].sprite.getY();
                    radf=spriteC[spriteNum].sprite.getHeightScaled()/2;

                    Log.e("F"+Float.toString(fx),Float.toString(fy));
                    if(spriteNum>0)
                         for(int x=0;x<spriteNum;x++){

                                rads=spriteC[x].sprite.getHeightScaled()/2;
                                sx = spriteC[x].body.getWorldCenter().x * 32;
                                sy = spriteC[x].body.getWorldCenter().y * 32;

                                Log.e("S"+Float.toString(sx),Float.toString(sy));
                                Log.e(Float.toString((float) Math.sqrt(Math.pow((fx-sx),2)+Math.pow((fy-sy),2))),Float.toString((radf+rads)));
                                if(Math.sqrt(Math.pow((fx-sx),2)+Math.pow((fy-sy),2))<(radf+rads)){
                                        down = false;
                                        spriteC[spriteNum].active=false;
                                        yourScene.unregisterTouchArea(spriteC[spriteNum].sprite);
                                        Log.e("Collided",Boolean.toString(down));
                                }
                         }
                }    
            }
            spriteC[spriteNum].body = PhysicsFactory.createCircleBody(mPhysicsWorld, spriteC[spriteNum].sprite, BodyType.DynamicBody, FIXTURE_DEF);
            mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(spriteC[spriteNum].sprite, spriteC[spriteNum].body, true, true));
        }
    } 
```

更好的解决方案有人吗？我知道与处理程序有关，但我不完全知道它是什么或如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:19:31.163

正如您所指出的，您需要同步“增长” Runnable 的执行，以便当您快速按下按钮时 run() 方法不会与自身交错。您可能可以使用简单的同步方法或块来执行此操作，但如果您需要更高级的控制，也可以使用队列。

至于速度，用traceview分析一下，找出瓶颈。正如上面一位用户评论的那样，日志记录可能非常昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:10:56.730

我花了一段时间才弄清楚如何去做，但更新处理程序工作得很好。我只是使用了一个场景更新处理程序。在 onCreateScene 创建场景时，实现以下代码：

```
 scene.registerUpdateHandler(new IUpdateHandler() {

                @Override
                public void reset() {         
                }

                @Override
                public void onUpdate(float pSecondsElapsed) {
//Whatever you want to update. Any moving or scaling object essentially.
    } 
```

如果有人需要更多信息，请在[http://www.andengine.org/forums/](http://www.andengine.org/forums/)上向 rphello101 发送 PM 。

# android - Phonegap/Cordova 方向更改 Android 4

> ID：11174673
> 
> 赞同：0
> 
> 时间：2012-06-24T03:07:42.397
> 
> 标签：android, cordova, screen-orientation

我在更改设备方向时遇到问题（Android 4）。在其他版本中它工作正常。Cordova 版本：cordova-1.8.0.js / cordova-1.8.1.js 在 Android 4 中，应用程序崩溃或显示：“发生网络错误。(file:///android_asset/www/index.html)”我对此进行了很多搜索，没有答案可以解决问题。

在大多数情况下，用户建议添加： android:configChanges="orientation|keyboardHidden|screenSize"

在其他情况下： super.setIntegerProperty("loadUrlTimeoutValue",60000);

那对我不起作用:(

我的清单活动：

```
 <activity
        android:name=".AppNameActivity"
        android:label="@string/app_name" 
        android:configChanges="orientation|keyboardHidden|screenSize">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

该应用程序应在 Android 2.2 至 4 上运行。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:52:59.663

我现在正在遇到一模一样的问题。它在 phonegap 1.3.0 上对我有用，但升级到 cordova 1.8.1 或 1.9.0 产生了同样的问题。我发现的唯一解决方案是通过添加 screenOrientation 来避免方向的变化，如下所示

```
 <activity
        android:name=".AppNameActivity"
        android:screenOrientation="portrait"
        android:label="@string/title_activity_app"
        android:configChanges="orientation|keyboardHidden" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# javascript - “恢复”上的phonegap崩溃

> ID：11174674
> 
> 赞同：5
> 
> 时间：2012-06-24T03:07:59.513
> 
> 标签：javascript, cordova

我的 phonegap 应用程序运行良好，但在发送到后台或“暂停”时出现故障。当焦点返回到应用程序时，界面冻结的时间比例很高，然后应用程序在几秒钟后崩溃。重新启动时，它再次正常工作。

任何人都可以提供一些信息，说明可能导致这种情况的原因以及我应该从哪里开始尝试调试它？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:59:59.087

虽然不是答案，但仍然是一个有效的解决方案，我可以将音频框架更改为 HTML 音频或 Phonegaps 媒体对象。

我暂时选择了后者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:53:57.273

1.  打开 Cordova.plist 或 YourApplication-Info.plist（我不记得具体是哪一个）
2.  从下拉列表中创建名为“应用程序不在后台运行”的新选项
3.  设置为“是”
4.  ...
5.  利润！

# php - 使用 Active Record 类进行 sql 注入的 codeigniter 转义

> ID：11174676
> 
> 赞同：1
> 
> 时间：2012-06-24T03:09:24.013
> 
> 标签：php, mysql, codeigniter, insert, escaping

据我了解，使用 $this->db->insert() 转义值：

[http://codeigniter.com/user_guide/database/active_record.html#insert](http://codeigniter.com/user_guide/database/active_record.html#insert)

```
Note: All values are escaped automatically producing safer queries. 
```

但是当我查看 mysql 时，我的输入没有被转义，是否由于某种原因删除了一些如何？

担心这里的sql注入，这就是我问的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:19:42.437

当您为 SQL 语句转义字符串时，这并不一定意味着您稍后查看数据时应该看到添加的反斜杠。这意味着某些字符将被转义，SQL 语句将运行而不会出现任何错误。尝试使用**mysql_real_escape_string插入数据**

> 线路：557 [https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Input.php](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Input.php)
> 
> ```
> if ( ! is_php('5.4') && get_magic_quotes_gpc())
> {
>     $str = stripslashes($str);
> } 
> ```

接着

> 线路：285 [https://github.com/EllisLab/CodeIgniter/blob/develop/system/database/drivers/mysql/mysql_driver.php](https://github.com/EllisLab/CodeIgniter/blob/develop/system/database/drivers/mysql/mysql_driver.php)
> 
> ```
> $str = is_resource($this->conn_id) ? mysql_real_escape_string($str, $this->conn_id) : addslashes($str); 
> ```

该字符串通过**mysql_real_escape_string**或**添加斜杠**传递。因此，我们可以说考虑到了针对 SQL 注入的安全措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:07:57.313

通过“逃脱”，他们的意思是替换这个：

```
SELECT * FROM table1 WHERE field1 LIKE "some string with " quotes" 
```

为了这：

```
SELECT * FROM table1 WHERE field1 LIKE "some string with \" quotes" 
```

如果您想确保在保存之前对字符串进行转义，请考虑使用以下`$this->db->escape*`方法：[http ://codeigniter.com/user_guide/database/queries.html](http://codeigniter.com/user_guide/database/queries.html)

另外，检查：

*   [CodeIgniter - 为什么使用 xss_clean](https://stackoverflow.com/questions/5337143/codeigniter-why-use-xss-clean)
*   [http://codeigniter.com/user_guide/libraries/input.html](http://codeigniter.com/user_guide/libraries/input.html)
*   [SQL查询转义+codeigniter](https://stackoverflow.com/questions/10435109/sql-query-escaping-codeigniter)

# c++ - 理解 C++ 中的析构函数

> ID：11174678
> 
> 赞同：0
> 
> 时间：2012-06-24T03:10:02.627
> 
> 标签：c++, memory-management, destructor

众所周知，当一个函数返回时，堆栈分配的对象将被回收，并在此之前调用相关的析构函数。我的问题是：如何确定一个内存位置来表示对象，以便我们可以调用析构函数？这样做是否会产生任何运行时开销？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:13:43.427

我不确定您到底在问什么，但堆栈分配对象的内存位置在编译时是已知的。没有运行时开销来确定它们的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T03:16:03.530

堆栈分配对象的位置被计算为当前堆栈指针位置的偏移量，因此实际上不需要计算。

与动态内存管理器必须决定分配对象的堆分配对象不同，堆栈只是线性的并根据需要相应地增长，在编译时编译器将知道一个对象，例如，驻留在当前指针减少指定数量的字节，并在需要该变量时在整个二进制代码中使用该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T03:15:05.730

> 如何确定一个内存位置来表示对象，以便我们可以调用析构函数？

内存位置不能确定何时调用构造函数。编译器知道堆栈上分配了哪些变量，并创建适当的代码来调用相应的析构函数。

至少，它们通常在堆栈上。关键是无论内存存储在哪里，都可以使用相同的逻辑。存储在堆栈上仅仅意味着它们需要以一种或另一种方式调用。

# visual-studio-2008 - 在 VS 项目中访问 Visual Studio 的默认图标

> ID：11174681
> 
> 赞同：0
> 
> 时间：2012-06-24T03:10:48.600
> 
> 标签：visual-studio-2008, icons

我需要将 VS 用于项目的默认图标设置为我的项目中的另一个图标。有没有一种简单的方法可以访问它？

我试图去 .Properties.Resources 但它似乎不存在。它是存储在我的计算机上的某个地方还是内置在应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:19:54.870

马克霍尔在他上面的评论中说得对。

我的问题措辞有点不准确。我需要将我的项目中的图标与该默认图标相匹配，并用“GetValue”替换其中提到的“SetValue”函数，这会产生奇迹：

```
 FieldInfo iconField = typeof(Form).GetField("defaultIcon",
            BindingFlags.NonPublic | BindingFlags.Static);
  myIcon = (Icon)iconField.GetValue(iconField) 
```

# php - 如何在 Mac OS X 上设置 SMTP 服务器？

> ID：11174682
> 
> 赞同：10
> 
> 时间：2012-06-24T03:10:48.740
> 
> 标签：php, macos, email, mamp, osx-mountain-lion

我使用 PHP，我的机器上有[mamp](http://www.mamp.info/en/index.html)。我想在我的 PHP 代码中发送电子邮件：

```
<?php
 $to = "recipient@example.com";
 $subject = "Hi!";
 $body = "Hi,\n\nHow are you?";
 if (mail($to, $subject, $body)) {
   echo("<p>Message successfully sent!</p>");
  } else {
   echo("<p>Message delivery failed...</p>");
  }
 ?> 
```

**如何在我的 mac 机器上免费配置邮件服务器？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-29T21:57:41.783

以下完成了这项工作。[在此处](http://www.phase2technology.com/blog/how-to-enable-local-smtp-server-postfix-on-os-x-leopard/)查看源代码。

1.  编辑文件：`sudo emacs /System/Library/LaunchDaemons/org.postfix.master.plist`.
2.  `<key>RunAtLoad</key> <true/> <key>KeepAlive</key> <true/>`在结束`</dict>`标记之前添加。
3.  运行`sudo postfix start`。

检查 SMPT 是否正在运行：`telnet localhost 25`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-10-16T05:17:20.430

**选项1：**

CommandLineFu 有这样一个班轮在端口 25 上运行 SMTP 服务器：

```
sudo python -m smtpd -n -c DebuggingServer localhost:25 
```

这将在您的本地机器上运行一个假的 smtp 服务器。它不会发送任何内容，但会将其转储到控制台。

**选项 2：**

如果您对命令行不满意，那么 FakeSMTP 是一个带有 GUI 的免费假 SMTP 服务器，用于轻松测试应用程序中的电子邮件。它是用 Java 编写的。它非常好用且易于使用。

[http://nilhcem.com/FakeSMTP/][1]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:56:14.453

## [我可以在 linux mac 上安装任何 smtp 服务器吗？](https://superuser.com/questions/522679/are-there-any-smtp-server-i-can-install-on-linux-mac)

[使用 SMTP 身份验证从 PHP 发送邮件 - 示例：](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)

```
<?php
 require_once "Mail.php";

 $from = "Sandra Sender <sender@example.com>";
 $to = "Ramona Recipient <recipient@example.com>";
 $subject = "Hi!";
 $body = "Hi,\n\nHow are you?";

 $host = "mail.example.com";
 $username = "smtp_username";
 $password = "smtp_password";

 $headers = array ('From' => $from,
   'To' => $to,
   'Subject' => $subject);
 $smtp = Mail::factory('smtp',
   array ('host' => $host,
     'auth' => true,
     'username' => $username,
     'password' => $password));

 $mail = $smtp->send($to, $headers, $body);

 if (PEAR::isError($mail)) {
   echo("<p>" . $mail->getMessage() . "</p>");
  } else {
   echo("<p>Message successfully sent!</p>");
  }
 ?> 
```

[使用 SMTP 身份验证和 SSL 加密从 PHP 发送邮件 - 示例：](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)

```
<?php
 require_once "Mail.php";

 $from = "Sandra Sender <sender@example.com>";
 $to = "Ramona Recipient <recipient@example.com>";
 $subject = "Hi!";
 $body = "Hi,\n\nHow are you?";

 $host = "ssl://mail.example.com";
 $port = "465";
 $username = "smtp_username";
 $password = "smtp_password";

 $headers = array ('From' => $from,
   'To' => $to,
   'Subject' => $subject);
 $smtp = Mail::factory('smtp',
   array ('host' => $host,
     'port' => $port,
     'auth' => true,
     'username' => $username,
     'password' => $password));

 $mail = $smtp->send($to, $headers, $body);

 if (PEAR::isError($mail)) {
   echo("<p>" . $mail->getMessage() . "</p>");
  } else {
   echo("<p>Message successfully sent!</p>");
  }
 ?> 
```

# **相关话题：**

*   [在 mac 上安装 web 服务器](http://www.maclife.com/article/howtos/how_make_your_mac_web_server)
*   [山狮安装（购买）网络服务器](http://macs.about.com/od/usingyourmac/qt/Web-Hosting-With-Mountain-Lion.htm)
*   [Leopard 安装 SMTP 服务器](http://johnbain.org/blog/2008/07/08/configuring-a-smtp-mail-server-on-mac-os-x-leopard/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T03:46:23.600

试试这个 - [http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)

如果您希望 SMTP 服务器从 OSX 上发送邮件，这可能会有所帮助（实际上还没有尝试过，但似乎可以完成这项工作） - [http://email.about.com/cs/sendmail/gr/sendmail_enable .htm](http://email.about.com/cs/sendmail/gr/sendmail_enable.htm)

希望有帮助！

# jquery - 星不显示在 rails 3.0.9 - ajaxful_rating gem

> ID：11174683
> 
> 赞同：0
> 
> 时间：2012-06-24T03:11:03.453
> 
> 标签：jquery, ruby-on-rails-3

我使用导轨 3.0.9。

我的宝石文件：

```
gem 'ajaxful_rating', :git => 'git://github.com/edgarjs/ajaxful-rating.git', :branch => "rails3" 
```

我设置为 ajaxful 评级文件，但星号不显示。

查看图片：[http](http://awesomescreenshot.com/0c38t3g94) ://awesomescreenshot.com/0c38t3g94 。

请帮我解决这个问题！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:45:34.120

我在 Rails Rails 3.2.8 应用程序中遇到了同样的问题。我认为生成器仍然使用旧的资产管道方式。

转到项目根目录中的生成器创建的资产文件夹。您将找到文件夹`images`和`stylesheets`. 在 images 文件夹中还有一个名为`ajaxful_rating`. 将两个图像复制到`app/assets/images`. 然后`ajaxful_rating.css.scss`在样式表文件夹中找到并将其复制到`app/assets/stylesheets`目录中。

`background`将第 10 行和第 81 行的 css 属性修改为分别为 like`background: image-url("star.png") left -1000px repeat-x;`和`background-image: image-url("star_small.png");`。

您现在可以安全地删除根目录中的 assets 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T01:33:07.817

您必须更新 ajaxful_rating.css 才能显示图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T11:24:35.917

我遇到了这个问题并**解决**了。我使用了 gem 'ajaxful_rating'、'3.0.0.beta8'

*   错误原因：ajaxful_rating 在您的 app_name 文件夹中创建了新的资产文件夹（与 app、db、lib、config 等处于同一级别）。因此，ajaxful_rating.css.scss 和 stars 图像没有被复制到您的 app/assets 文件夹中。

**+ 如何解决：只需将 ajaxful_rating.css.scss 和由 ajaxful_rating 创建的 assets 文件夹中的图像复制到您的*app/assets*。**

# json - 带有 jQ uery、JSON 和 id 变量的咖啡脚本自动完成

> ID：11174698
> 
> 赞同：0
> 
> 时间：2012-06-24T03:14:50.053
> 
> 标签：json, jquery-ui, coffeescript

我有点卡在这里，似乎无法让 jQuery 自动完成为我工作。我正在尝试从 JSON 文档拉取自动完成。

IE：

```
http://REMOTE_HOST/names.json 
```

哪个返回类似：

```
[{"label":"Brian House", "id" : 1},
{"label":"Joe Green", "id" : 2},
{"label":"Fisher Gennings", "id" : 3},
{"label":"Sheila Williams", "id" : 4},
{"label":"Brett Nelson", "id" : 5},
{"label":"Angie Katz", "id" : 6},
{"label":"Zoe Middleton", "id" : 7},
{"label":"Parker Jones", "id" : 9}] 
```

我想要做的是在文本字段（user_friend_name）中自动完成标签，然后用 id 填充隐藏字段（user_friend_name_id）。

```
#user_friend_name
#user_friend_name_id 
```

我目前正在使用的咖啡脚本。

```
$(document).ready ->
        $('#user_friend_name').autocomplete
                source: "http://REMOTE_HOST/names.json"
                select: (event,ui) -> $("user_friend_name_id").val(ui.item.id) 
```

现在看起来我得到了所有名称的一个 JSON 拉取，但在您键入时没有选择或过滤。仅使用标准数组 ['foo', 'food', 'trees'] 作为源似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:56:05.397

假设您的数据如上所示返回，那么`ui.item.id`就是要访问的正确属性。

我做了一个你的例子。尝试使用`console.log()`和`console.dir()`调试属性。

[http://jsfiddle.net/fMWqU/](http://jsfiddle.net/fMWqU/)

如果您仍然没有运气，那么问题可能出在您的 json 文档上。确保文档与您的脚本在同一个域中，以防止跨域错误。我过去也注意到带有 Windows 行结尾的 json 文档会导致某些浏览器失败。尝试做一个常规`$.ajax()`并`console.dir()`在 done() 和 fail() 处理程序中使用。

```
xhr = $.ajax
  url : 'http://REMOTE_HOST/names.json'
  dataType : 'json'

xhr.done ->
  console.log arguments

xhr.fail ->
  console.log 'Fail! ', arguments 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:20:00.410

我相信它们应该具有价值而不是 id 属性。我不熟悉咖啡脚本，但我确信这是清晰的：

```
$.getJSON("http://REMOTE_HOST/names.json", function(response) {
    var newData = response.map(function(el) { return {label: el.label, value: el.id })
    $('#user_friend_name').autocomplete
        source: "http://REMOTE_HOST/names.json"
        select: (event,ui) -> $("user_friend_name_id").val(ui.item.value)
}) 
```

# python - 如何继承 OrderedDict？

> ID：11174702
> 
> 赞同：29
> 
> 时间：2012-06-24T03:16:56.733
> 
> 标签：python, inheritance, subclass, ordereddictionary

子类化 Python`dict`按预期工作：

```
>>> class DictSub(dict):
...     def __init__(self):
...         self[1] = 10
...         
>>> DictSub()
{1: 10} 
```

但是，用 a 做同样的事情是`collections.OrderedDict`行不通的：

```
>>> import collections
>>> class OrdDictSub(collections.OrderedDict):
...     def __init__(self):
...         self[1] = 10
...         
>>> OrdDictSub()
(…)
AttributeError: 'OrdDictSub' object has no attribute '_OrderedDict__root' 
```

因此，OrderedDict 实现使用了一个私有`__root`属性，它可以防止子类`OrdDictSub`表现得像`DictSub`子类。为什么？如何从 OrderedDict 继承？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-24T03:19:33.083

您需要`OrderedDict.__init__`从您的调用`__init__`：

```
class OrdDictSub(collections.OrderedDict):
    def __init__(self):
        super(OrdDictSub, self).__init__() 
```

你还没有给`OrderedDict`自己初始化的机会。从技术上讲，您也希望为您的`dict`子类执行此操作，因为您想要一个完全初始化的`dict`. 没有它就可以工作的事实`dict`只是运气。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T03:19:22.203

尝试在方法中初始化超类`__init__`：

```
def __init__(self):
    collections.OrderedDict.__init__(self)
    self[1] = 10 
```

这是初始化子类的正常方式。*一般来说，*您不必调用超类的`__init__`方法，但如果您不了解超类的实现，您真的应该调用`__init__`.

# iphone - iOS：如何使用网络图像调用系统图像查看器？

> ID：11174705
> 
> 赞同：0
> 
> 时间：2012-06-24T03:18:18.303
> 
> 标签：iphone, ios

我有一个应用程序将使用 UIImageView 显示一些图像，现在我想添加一个功能，当用户单击 UIImageView 时，它会在 iOS 图像应用程序中打开图像（可以放大/缩小，保存图像等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:27:33.107

iOS 没有默认的图像查看器。您需要在您的应用程序中实现一个视图控制器，该控制器可以查看/缩放/平移并保存您下载的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T05:47:25.007

我相信没有用于图像的控制器，例如用于视频/音频、邮件等的控制器...

如果您只想放大/缩小，请保存！您可以简单地`UIScrollView`用作 superView 用于`UIImageView`缩放和保存使用此代码

```
 UIImageWriteToSavedPhotosAlbum(scratchImage.image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

我希望这有帮助！

# ruby-on-rails-3 - Rails 3 升级 will_pagination 参数数量错误（2 为 1）

> ID：11174706
> 
> 赞同：2
> 
> 时间：2012-06-24T03:18:43.903
> 
> 标签：ruby-on-rails-3, upgrade, will-paginate

我正在将我的 rails 应用程序在 ruby​​ 1.9.3 上从 2.3.5 升级到 3.2.5。在旧应用程序中，我使用了 will_paginate 插件，我已将其转换为 gem。

现在升级后我收到以下错误：参数数量错误（2 比 1）

应用程序跟踪中的几行：Application Trace | 框架跟踪 | 全跟踪

```
will_paginate (3.0.3) lib/will_paginate/active_record.rb:124:in `paginate'
app/models/activity.rb:28:in `dashboard_activities'
app/controllers/dashboard_controller.rb:10:in `index'
actionpack (3.2.5) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.5) l 
```

我相信问题出在我正在使用分页的活动模型中的旧代码中。任何人都可以帮忙吗？

编码：

```
def dashboard_activities(page, total_records, date_range1 = nil, date_range2 = nil ) 
  unless date_range2.nil? 
    x =[ "is_delete = false AND status = 'open'  AND date(due_date) between ? and ?", date_range1, date_range2]
  else
    x =[ "is_delete = false AND status = 'open' AND date(due_date) = ? ", date_range1]  
  end       
  paginate(:all,
    :page =>page,
    :per_page =>total_records,
    :conditions => x,
    :order =>"due_date asc")
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:00:09.347

错误消息说明了一切：

paginate 方法只需要一个参数，那就是选项哈希。如果您省略 :all 参数，一切都会正常工作。

在 gem 版本 >= 3.0 中，您可以像这样调用较短的页面方法：

```
paginate(page: page, per_page: total_records, conditions: x, order: "due_date asc") 
```

有关详细信息，请参阅[will_paginate wiki](https://github.com/mislav/will_paginate/wiki)。

# javascript - 这是一个有效的 xpath 查询吗？

> ID：11174712
> 
> 赞同：1
> 
> 时间：2012-06-24T03:20:48.833
> 
> 标签：javascript, json

`//[dataOptions[id]]`似乎工作

但`//[dataOptions[id=value]]`不起作用

我试图让所有的父母都`dataOptions`在 where `dataOptions.id`equals `val`。第二个有效吗？我怀疑我用来解析查询的 JPath 有错误。但我不确定我的查询是否有效。

```
[
{
    "dataOptions": {
        "id": "id1",
        "count": "10"
    },
    "name": "Leon",
    "children": [
        {
            "dataOptions": {
                "id": "id2",
                "count": "10"
            },
            "name": "Leon",
            "children": [],
            "isExpanded": false
        },
        {
            "dataOptions": {
                "id": "id2",
                "count": "10"
            },
            "name": "Leon",
            "children": [],
            "isExpanded": false
        }
    ],
    "isExpanded": false
},
{
    "dataOptions": {
        "id": "id3",
        "count": "10"
    },
    "name": "Leon",
    "children": [],
    "isExpanded": false
},
{
    "dataOptions": {
        "id": "id4",
        "count": "10"
    },
    "name": "Leon",
    "children": [],
    "isExpanded": false
} 
```

]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:35:17.520

> `//[dataOptions[id]]`似乎工作
> 
> 但`//[dataOptions[id=value]]`不起作用

***这两者*****都具有非法语法**（谓词必须以节点 - 测试开头）。

> 我试图让`dataOption`s 的 所有父母都`dataOptions.id`平等`val`。

**使用**：

```
//*[dataOptions[id=val]] 
```

这将选择所有具有子元素且子元素具有相同字符串值的`dataOptions`元素。`id``val`

**或使用 if`val`不是元素名称而是文字字符串，然后使用**：

```
//*[dataOptions[id='val']] 
```

**更新**：OP 在最初询问 3 小时后编辑了问题——*现在*我们看到输入是 JSON。XPath 不知道 JSON —— 它只对 XML 文档进行操作。因此，不应将此问题标记为 XPath。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:32:45.897

有没有地方可以查看您尝试使用 JPath 的 JSON 数据？

您也可以尝试使用链式查询数据的方法。

```
var jp = new Path(JSONDATA);

jp.$('dataOptions').$(function(n){
    return( n.$('id').json == yourvalue );
}).json; 
```

JPath 的 XPath 部分只是使用一些正则表达式来创建类似上面的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-02T12:50:30.333

ShaggyInjun，我认为您正在寻找符合以下要求的内容：

```
//dataOptions[id]
//dataOptions[id="id2"] 
```

我最近编写了一个名为“defiant.js”的 js-lib - 可以使用 XPath 对 JSON 结构进行查询。放在这个上下文中 - 我在这个页面上粘贴了你的 JSON 数据：

[http://www.defiantjs.com/#xpath_evaluator](http://www.defiantjs.com/#xpath_evaluator)

...并针对该结构直观地测试了不同的 XPath 查询。评估程序突出显示 JSON 及其 XML 对应项中的匹配项。

我希望您发现“defiant.js”及其网站有用。

# java - 将具有完全匹配（像素到像素）重叠的图像拼接在一起

> ID：11174713
> 
> 赞同：6
> 
> 时间：2012-06-24T03:21:03.887
> 
> 标签：java, python, image-processing, wolfram-mathematica, image-stitching

我在一个文件夹中有一堆图像，它们实际上只是一个图像的片段，这些图像被分成重叠的部分。如何以编程方式快速重组这些图像以创建原始图像？

我更喜欢使用 python 或数学的解决方案（或者是现有的应用程序），但我也对其他想法持开放态度（我对 Java 相当精通）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-03-26T12:01:49.277

我意识到这个答案来得很晚，但是由于我花了一些时间在谷歌上搜索这个问题，我想我会使用 python 发布一个相当简单的解决方案。

```
import cv2
#works in version 4.2
cv2.__version__

#mode=0 photos, mode=1 scans
stitcher = cv2.Stitcher.create(mode=1)

img1 = cv2.imread("frame-0021.png")
img2 = cv2.imread("frame-0022.png")

result = stitcher.stitch((img1, img2))
cv2.imwrite("stitched.png", result[1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T21:42:08.390

好吧，我不再需要这样做来做我想做的事，但我会分享如果我用 python（psuedocode 和 python 的混合）编写它，我会怎么做。在这里，我假设后续图像的左上角始终是重叠点（在我的情况下确实如此）。如果您想检测任何角落的重叠，您将需要检测您所处的“角落”案例并为每个案例添加处理。

```
images = list of images to be stitched, loaded from directory
stitched_image = images[0]

for (image in images):
    if first image then skip it (continue)
    else combine_images(stitched_image, image)

def combine_images (stitched_image, image_to_add):
    top_left_corner = top left corner of image_to_add 
    // top_left_corner dimensions need to be big enough that you don't have a false positive, 
    // but not so big that the overlap doesn't exist
    coordinates = find_coordinates(stitched_image,top_left_corner)

    new_width = max(stitched_image.width,image_to_add.width + coordinates.x)
    new_height = max(stitched_image.height,image_to_add.width + coordinates.y)
    new_image = new Image(new_width,new_height) // See note 1
    new_image.paste(stitched_image,(0,0))
    new_image.paste(image_to_add,(coordinates.x,coordinates.y))

    stitched_image = new_image

def find_coordinates (image,sub_image):
    // See note 2 below for how to implement 
```

笔记：

1.  可以使用 PIL 完成创建图像并粘贴到其中：http: [//29a.ch/2009/5/14/concatenating-images-using-python](http://29a.ch/2009/5/14/concatenating-images-using-python)

2.  有关如何在图像中查找 sub_image（可能需要将图像转换为另一种表示形式）的信息，请参阅此问题：[Finding a subimage inside a Numpy image](https://stackoverflow.com/questions/7670112/finding-a-subimage-inside-a-numpy-image)。此外，对于任何熟练的程序员来说，手动检查像素矩阵中的像素以找到重叠部分一点也不难。如果您通过简单地首先在更有可能的区域中搜索来大致知道可能发生重叠的位置，则可以添加额外的优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T04:45:39.460

您是否打算使用特定于 Java 的解决方案？如果您对其他事情持开放态度，我正在为一个项目做类似的事情，并为 Linux 提供了一个 bash 脚本集。

为此，我使用了

1.  [来自 Ubuntu 存储库的Hugin](http://hugin.sourceforge.net/)和 hugin-tools
2.  [Panotools](http://search.cpan.org/dist/Panotools-Script/) perl 包装脚本
3.  [本指南](http://wiki.panotools.org/Panorama_scripting_in_a_nutshell)通过命令行获取生成功能。在示例中，`pto_gen`安装 hugin 后不存在，而是`match-n-shift`在 Panotools 脚本中替换了我的。

如果您想按顺序批量处理多个全景图，则必须想出一种对文件进行排序、执行和移动的方法。这是我编写脚本过程中有趣的部分。将图片拼接在一起很容易，确保它们之后去正确的地方有点棘手。

目前，使用具有 4 GB RAM 的 4 核 Xeon 系统，拼接 50 幅图像 360 度全景图需要大约 30-45 分钟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:15:59.957

在 Mathematica 中，您可以在重叠区域内使用 ImageCorrespondingPoints，然后使用 FindGeometricTransform 计算仿射变换，将一个图像带入另一个图像。请注意，图像和重叠区域的大小会影响转换的准确性。如果您正在做一些复杂的事情（例如组合卫星图像），您将需要一个整体几何模型来获得结果，然后将每个图像映射到它。在这种情况下，仿射变换可能是不够的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T03:40:37.780

你可以使用 Autopano 或类似的东西；如果你想自己动手，你可能会发现 SIFT 算法很有用[http://www.janeriksolem.net/2009/02/sift-python-implementation.html?m=1](http://www.janeriksolem.net/2009/02/sift-python-implementation.html?m=1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T03:47:46.170

你想要的是一个创建全景图的工具。有各种出售的工具具有各种功能。需要考虑的事情是：

1.  垂直和水平匹配位置
2.  图像之间的不同亮度
3.  校正相机旋转和角度

# ios5 - 工具栏和视图控制器的后退按钮问题！！！需要帮助

> ID：11174717
> 
> 赞同：0
> 
> 时间：2012-06-24T03:21:54.420
> 
> 标签：ios5, xcode4.3, uitoolbar, back-button

我目前有一个有 3-5 行的表格视图。目前正在设计一个 5 页的手册。这个想法是每一行都应该链接到他们自己的视图控制器。在 5 个单独的视图控制器中的每一个中，我在控制器底部都有工具栏，这些工具栏具有将其链接到下一页和上一页的按钮。我在 XCODE 4.3.2 中使用 storyboard 和 segues 来做到这一点。我遇到的问题是说我单击第 1 行。它带我到第 1 页并单击底部工具栏上的下一步，这将带我到第 2 页。现在我想返回到所有行的原始概述。我应该通过导航工具栏中的后退按钮来执行此操作，但它只会将我带到第 1 页。有人可以帮我吗？将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:34:56.257

A`UINavigationController`保留您已推入它的 s 的列表（堆栈）`UIViewController`，并且它显示的自动后退按钮将您在堆栈中向下移动一步。您只是将新的视图控制器推入堆栈，因此当它返回时，它会返回最后一页，而不是索引。有两种解决方法：直接操作堆栈（即用新页面替换旧页面，而不是将新页面推到顶部），或使用自定义后退按钮（可能使用`-popToViewController:animated:`选择器）。[`UINavigationViewController`请参阅API 文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006934)的“更新导航栏”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:41:25.780

要返回第一个视图控制器，请使用`- (NSArray *)popToRootViewControllerAnimated:(BOOL)animated`UINavigationController 的方法。

# c++ - 为什么字符串使用 char*？

> ID：11174721
> 
> 赞同：21
> 
> 时间：2012-06-24T03:24:17.490
> 
> 标签：c++, c

为什么 C/C++ 标准库中的大多数字符串函数都采用`char*`指针？

尽管大多数现代编译器（GCC，MSVC）默认情况下都将其视为已签名`char`，但标准中甚至没有指定 的`char`签名。

何时将字符串视为（可能）有符号字节有意义？AFAIK 在任何字符集中都没有低于零的有意义的字符值。`unsigned char`对于某些字符串操作，无论如何都必须将值强制转换为。

那么为什么 stdlibs 使用`char*`? 甚至`C++`- 特定的方法，例如`string::string(const char *);`?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T03:27:23.993

1.  我很确定大多数字符串函数早于`unsigned char`.
2.  Plain`char`可以是有符号或无符号类型。C 和 C++ 标准明确允许其中任何一个（它始终是与 or 不同的类型`unsigned char`，`signed char`但与一个或另一个具有相同的范围）。
3.  虽然 C 字符串函数使用`char *`,`std::string`是大多数 C++ 中使用的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-24T03:30:58.817

C 标准对于 plain 是有符号还是无符号的问题是不可知的`char`，并且唯一地`char`区别于`signed char`. 此外，包含大多数主要控制字符和英语可打印字符的基本 ASCII 字符集由 128 个字符组成，因此可以用带符号的字符充分表示`char`（至少在任何提供每字节 8 位的系统上）。正如 Jim Balter 所指出的（参见下面的评论），ASCII 并不构成 C 语言的完整基本字符集，但我怀疑它确实包含了大多数常用字符。还有一个庞大的 C 代码语料库依赖于 ASCII 的属性（尽管不一定是唯一的）（例如，`NUL`值为零的特殊字符、字母数字字符按顺序和升序排列等）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-24T10:47:56.697

Jim Balter 在评论中指出

> PDP-11 上处理字节的指令将它们视为有符号量，因此早期的 C 编译器就是这样处理它们的，而 unsigned 甚至不存在。

我强烈怀疑这是为什么默认字符类型`char`不需要无符号的答案，但是为了确定，需要从一些书面历史记录中引用。

至于为什么不需要在非二进制补码机器上签名（！），例如（我知道的唯一一个可能仍在使用的）Clearpath Dorado，a`signed char`不能保存 an 的所有值`unsigned char`，因为它在负零上浪费了一个位模式，或者该位模式用于任何用途。如果`char`需要签名，那么将一般数据重新解释为`char`值序列将是一个问题。因此，在这样的机器`char`上必须是未签名的，否则软件将不得不进行极端的扭曲来处理它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T03:35:06.587

正如 Bjarne 在*The C++ Programming Language*中所说，是否将 a`char`视为有符号或无符号取决于实现，并且 C++ 语言为每个实现提供两种类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-29T00:20:47.977

其他人已经探讨了当 C 最初被设计和（后来）标准化时这种情况的历史原因，但还有另一个原因是这种看似异常的现象一直持续到今天。

很简单，当你使用`char`for 字符时，你*不需要*知道它是有符号还是无符号。标准库提供了对字符进行操作的可移植函数，而不管其表示形式如何。如果您忽略这些函数并坚持对字符进行比较和算术运算，那么您应该得到每个错误。

`c >= ' '`举一个简单的例子，使用表达式或等效检查字符是否可打印是很常见的`c >= 0x20`，但您应该只使用`isprint(c)`。这样，您就不会将自己暴露在有符号/无符号的混淆中，也不会在程序中引入与平台相关的错误。

一旦你养成了只使用小整数（通常是 8 位）进行算术运算的习惯，并且仅在对字符数据进行操作时使用，那么使用`signed char`实现定义的单独类型似乎是完全自然的符号性，甚至更自然的是字符串处理函数总是使用and而不是有符号或无符号变体。的符号似乎与 的符号一样相关。`unsigned char``char``char``char``char *``char``bool`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T03:27:34.840

Char 既不是标准的签名也不是无符号的。见[https://stackoverflow.com/a/2054941/396583](https://stackoverflow.com/a/2054941/396583)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-24T08:26:40.887

> 为什么 C/C++ 标准库中的大多数字符串函数都采用 char* 指针？

在 C++ 中使用 std::string。在 C 中，当引入无符号类型时，使用模式已经非常成熟，我不会排除效率问题。

> 没有低于零的有意义的字符值

那么在 C++ 标准中的某个地方有一个约束，即基本字符集中的字符是正数。但认为这种约束适用于所有角色是天真的。

该约束强制允许 EBCDIC 作为编码系统的实现使其 char 无符号。

> 大多数现代编译器（GCC、MSVC）默认将 char 视为已签名。

gcc 行为取决于目标，并具有更改目标默认值的选项。

# c++ - 类层次结构设计，避免从基类向下转换到派生类

> ID：11174723
> 
> 赞同：1
> 
> 时间：2012-06-24T03:25:09.567
> 
> 标签：c++, design-patterns

我正在用 C++ 设计一个 DNS 解析库。DNS 数据包具有一组标准字段，后跟一个资源记录列表，该列表再次具有一组标准字段，后跟一个 RData 字段。RData 字段是根据 type 字段解析的。现在，我为 DNSRData 指定一个层次结构，以处理各种类型。代码看起来像这样：

```
class DNSRData {
  virtual void ToString() = 0;
  virtual void Parse() = 0;
}

class DNSRData_A : public DNSRData {
  void ToString();
  void Parse();
  uint32_t GetIP();
}

class DNSRData_CNAME : public DNSRData {
  void ToString();
  void Parse();
   const char* GetAlias();
}

class DNSResourceRecord {
  /* Standard Fields 
   ..... */
  int      type_; // Specifies the format for rdata_
  DNSRData *rdata_; 
}

class DNSPacket {
  /* Standard Fields
  ....*/
  vector<DNSResourceRecord *> rr_list_;
} 
```

现在这是我遇到的问题，每个 DNSRData 记录可能有不同的字段。我不想为基类中的所有字段添加访问器，因为它们存在于某些派生类中，而不存在于其他类中，例如 IP 地址仅存在于 DNSRData_A 中，而不存在于任何其他类中。

因此，当我想对 DNSRData 执行任何操作时，我会查找类型并执行从 DNSRData* 到 DNSRData_A* 的向下转换。

```
DNSRData *rdata = packet->GetResourceRecord().front(); //not really necessary for this example
if(resource_record.type == RR_CNAME) {
  DNSRData_CNAME *cname = (DNSRData_CNAME*)rdata;
} 
```

这可能会在以后导致大量问题，并且随着我们添加更多类型，它很快就会变得一团糟。关于如何在不将所有访问器添加到基类的情况下解决此问题的任何想法？

**编辑**：

更多上下文，这是高性能 DNS 跟踪解析库的一部分。当我们看到网络上的数据包时，很多操作就完成了。那么，什么会是一个搞砸设计的操作，假设我们得到一个 DNSPacket 并且我们现在解析它，我们想决定如何根据类型进一步处理它。

```
if(type == RR_CNAME) {
  DNSRData_CNAME *cname = dynamic_cast<DNSRData_CNAME*>(&rdata);
  char *alias = cname->GetAlias();
}else if (type = RR_A) {
  DNSRData_A *a = dynamic_cast<DNSRData_A*>(&rdata);
  uint32_t ip = a->GetIP();
} 
```

如您所见，其中涉及从基本类型 RData 到更具体的 RData 类型的向下转换。我想避免这种沮丧，并使用一种设计模式来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T04:41:56.540

如果我理解正确，我认为访问者模式就是您正在寻找的

[访客模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

```
class GetInfoVisitor
  {
    void visit(DNSRData_A* a)
    {
        uint32_t ip = a->GetIP();
    }
    void visit(DNSRData_CNAME * cname) 
    {        
        char *alias = cname->GetAlias();
    }   
  }

class DNSRData
{

    void action(Visitor& visitor) 
    {
        visitor.visit(this);
    }
}

int main()
{
 ...
 GetInfoVisitor getInfoVisitor;
 DNSRData *rdata = packet->GetResourceRecord().front();
 rdata->action(getInfoVisitor);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:07:17.623

首先，您可能需要考虑 dynamic_cast，而不是您在示例中使用的 c 样式转换。这将允许您检查转换是否成功，这可以避免潜在的严重错误。

其次，我认为可能需要更多背景信息来回答您的问题。几乎总是，良好地使用设计模式可以让您从一开始就避免这种情况。不过，鉴于手头的信息，我建议甚至在父类中创建一个称为操作的抽象虚函数，然后可以重写该函数以实现感兴趣的特殊逻辑。这将允许您在有人覆盖基类的任何时候考虑问题，因此代码更易于维护，并且由于避免查找类型而可以节省时间。

# c - C中的变量声明错误

> ID：11174728
> 
> 赞同：0
> 
> 时间：2012-06-24T03:26:01.563
> 
> 标签：c, variables, declaration

我在 C 中的变量声明时遇到了一些麻烦，希望您能帮助我。

这段代码：

```
int makeDir(const char* path, mode_t mode) {
    printf("Checkpoint 1\n");
    String parentPath;
    printf("Checkpoint 2\n");
    pDirTreeNode parent;
    printf("Checkpoint 3\n");
    int idx, grp;
    pinode inod;
    pdir algo=NULL;
    printf("Checkpoint 4\n");
    pdir direntry=NULL;
    printf("Checkpoint 5\n");
    t_bitarray *bitarr;

    parent = malloc(sizeof(struct dirTreeNode));
    parentPath = malloc(DIR_NAME_SIZE);
    direntry=malloc(sizeof(struct s_direct));

    [COMMENTED code]
} 
```

这些是数据类型声明：

```
typedef struct s_inode      *pinode;    
typedef struct s_direct     *pdir;      
typedef char                *String;    
typedef struct dirTreeNode  *pDirTreeNode; 
```

在 linux/ext2_fs.h 头文件中声明了 s_inode 和 s_direct

我已经执行了它，当程序到达它提示的功能时：

由于共享库事件/build/buildd/gdb-7.3/gdb/dwarf2loc.c:185：内部错误：dwarf_expr_frame_base：断言“framefunc！= NULL”失败。已检测到 GDB 内部的问题，进一步调试可能证明不可靠。

但它不会停止调试会话。然后，如果我执行其余代码：

```
*** glibc detected *** /home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev: realloc(): invalid next size: 0x0000000000a5cdf0 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7a6e6)[0x7fa21d6e26e6]
/lib/x86_64-linux-gnu/libc.so.6(+0x7d3e7)[0x7fa21d6e53e7]
/lib/x86_64-linux-gnu/libc.so.6(realloc+0xf9)[0x7fa21d6e6b39]
/home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev[0x402cd3]
/home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev[0x4017a4]
/home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev[0x400af7]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7fa21d68930d]
/home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev[0x4009e9]
======= Memory map: ========
00400000-00404000 r-xp 00000000 00:14 540784                             /home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev
00603000-00604000 r--p 00003000 00:14 540784                             /home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev
00604000-00605000 rw-p 00004000 00:14 540784                             /home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev
00a5c000-00a7d000 rw-p 00000000 00:00 0                                  [heap]
7fa214000000-7fa214021000 rw-p 00000000 00:00 0 
7fa214021000-7fa218000000 ---p 00000000 00:00 0 
7fa21b706000-7fa21b71b000 r-xp 00000000 08:16 526333                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7fa21b71b000-7fa21b91a000 ---p 00015000 08:16 526333                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7fa21b91a000-7fa21b91b000 r--p 00014000 08:16 526333                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7fa21b91b000-7fa21b91c000 rw-p 00015000 08:16 526333                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7fa21b91c000-7fa21d668000 rw-p 00000000 00:14 273074                     /home/vlad/Sistemas Operativos/ext2.disk
7fa21d668000-7fa21d7ff000 r-xp 00000000 08:16 526221                     /lib/x86_64-linux-gnu/libc-2.13.so
7fa21d7ff000-7fa21d9fe000 ---p 00197000 08:16 526221                     /lib/x86_64-linux-gnu/libc-2.13.so
7fa21d9fe000-7fa21da02000 r--p 00196000 08:16 526221                     /lib/x86_64-linux-gnu/libc-2.13.so
7fa21da02000-7fa21da03000 rw-p 0019a000 08:16 526221                     /lib/x86_64-linux-gnu/libc-2.13.so
7fa21da03000-7fa21da09000 rw-p 00000000 00:00 0 
7fa21da09000-7fa21da2a000 r-xp 00000000 08:16 523159                     /lib/x86_64-linux-gnu/ld-2.13.so
7fa21dc10000-7fa21dc13000 rw-p 00000000 00:00 0 
7fa21dc26000-7fa21dc29000 rw-p 00000000 00:00 0 
7fa21dc29000-7fa21dc2a000 r--p 00020000 08:16 523159                     /lib/x86_64-linux-gnu/ld-2.13.so
7fa21dc2a000-7fa21dc2c000 rw-p 00021000 08:16 523159                     /lib/x86_64-linux-gnu/ld-2.13.so
7fff21b19000-7fff21b3a000 rw-p 00000000 00:00 0                          [stack]
7fff21ba2000-7fff21ba3000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Checkpoint 1
Checkpoint 2
Checkpoint 3
Checkpoint 4
Checkpoint 5 
```

在调试会话中，代码实际上在 perror("1") 之后爆炸，所以看起来不仅仅是 perror 的问题......

提前致谢！

**编辑：**我更改了转储消息和函数代码以避免错误。此外，这是完整的主要代码：

```
pext2fs fsys; // Variable global

int main(int argv, char *argc[]) {
    fsys = malloc(sizeof(struct ext2system));

    getsysdata();

    /*                                              *
     *                                              *
     *                                              *
     * File System Client here                      *
     *                                              *
     *                                              *
     *                                              */

    /* ------------------>Código para probar funciones<------------------ */

    pDirTreeNode node;
    StringArray test;
    void **file=malloc(0);
    int ctrl, mode=0x1000;
    pdir *dirents;

    makeDir("\\Dir2\\DirCreadoInternamente", mode);
    node = getDirTreeNode("\\Dir2\\DirCreadoInternamente");
    //  dirents = list_dir(fsys->root);
    //  node = getDirTreeNode("\\Dir3\\UnDir");
    //  ctrl = getFile(&file, "\\Dir1\\LPD");
    //  printFile(file);

    /* ------------------>Fin del código de testing<------------------ */

    unmap(fsys->diskmap);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:32:26.570

该`perror()`函数根据 的当前值打印一条错误消息`errno`。*仅*在调用设置的函数后调用它才有意义`errno`。

例如：

```
String parentPath;
perror("2"); 
```

你没有做任何可以设置`errno`为有意义值的事情，所以你得到了垃圾。（`errno`可能被设置`EINVAL`为上一次调用的副作用`perror()`）。

的值`errno`告诉您发生了*哪个*错误。在检查它之前（通过检查`errno`或调用`perror()`），您应该首先确定*是否*发生错误。大多数设置的函数`errno`还返回一个指示成功或失败的值。例如，`malloc()`失败时返回一个空指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T03:31:57.617

各种库函数可以设置`errno`为任意值，但*除非它们返回错误值，否则实际上没有发生错误*，否则您不**应该**相信`errno`。

# html - 适应屏幕的 div 高度

> ID：11174731
> 
> 赞同：0
> 
> 时间：2012-06-24T03:26:44.060
> 
> 标签：html, css

我的导航面板目前具有以下属性：

```
<div id='navpanel' 
     style='float:left; width:300px; height:100%; overflow:hidden;
     background:URL(assets/img/bg_tr.png);'> 
```

但是，正如您在下面的屏幕截图中看到的那样，高度直到屏幕结束才会填充。我试图切换到“自动”，但结果相同。

有没有人知道无论我目前拥有什么屏幕分辨率，我如何才能让面板的高度下降到最后？一些建议将不胜感激 - 谢谢。

![在此处输入图像描述](../Images/ad276bdc10067093f551c14f00c17083.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:28:51.313

尝试添加这个：

```
<style type="text/css">
html, body {
   height: 100%;
}
</style> 
```

[http://jsfiddle.net/AnsJy/1/](http://jsfiddle.net/AnsJy/1/)

# delphi - 用于 64 位 UAC 提升的 Delphi 清单

> ID：11174743
> 
> 赞同：2
> 
> 时间：2012-06-24T03:29:53.870
> 
> 标签：delphi, 64-bit, manifest, uac, elevation

此清单中以管理员身份运行应用程序有什么不正确之处？它适用于 32 位，但与 64 位 exec 一起使用时会出现启动错误并关闭：“应用程序无法正确启动 (0xc000007b)。单击确定关闭应用程序。”

**编辑：问题已解决并关闭，以供将来参考：**

32/64 位的工作清单，通过 Project Options/Application/Runtime Themes/Custom Manifest->pick .manifest 文件添加。Delphi XE2 资源编译器似乎出于某种原因而搞砸了。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
        <dependency>
                <dependentAssembly>
                        <assemblyIdentity
                                type="win32"
                                name="Microsoft.Windows.Common-Controls"
                                version="6.0.0.0"
                                processorArchitecture="*"
                                publicKeyToken="6595b64144ccf1df"
                                language="*"
                        />
                </dependentAssembly>
        </dependency>
        <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
                <security>
                        <requestedPrivileges>
                                <requestedExecutionLevel
                                       level="requireAdministrator"
                                       uiAccess="false"/>
                        </requestedPrivileges>
                </security>
        </trustInfo>
</assembly> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:40:43.107

您的问题与您的清单无关。您可以通过创建一个空应用程序并将您的清单添加为自定义清单来验证是否如此。

错误代码 0xc000007b 是 64 位进程从 32 位 DLL 导入函数时得到的错误代码，这是对您的困境最合理的解释。使用[Dependency Walker](http://www.dependencywalker.com/)找出 32 位 DLL 正在解析哪些导入。

# python - 避免嵌套 for 循环

> ID：11174745
> 
> 赞同：31
> 
> 时间：2012-06-24T03:30:11.277
> 
> 标签：python, for-loop

我正在尝试使用 python 对另一个代码进行一些参数测试。我需要测试 6 个独立参数，但我需要它们的所有可能组合。

每个参数都有一个最小值、一个最大值和一个需要传递给它的步长值。突然出现在我脑海中的第一个简单的解决方案是嵌套的 for 循环结构，看起来很可怕，如下所示：

```
for var1 in xrange(min1,max1,step1):
    for var2 in xrange(min2,max2,step2):
        ...
            ...
                ...
                    for var6 in xrange(min6,max6,step6):
                        '''
                        Do something and be icky in the process due
                        to being in the middle of six nested for loops
                        ''' 
```

我决定，不！这不能成立。因此，我一直在尝试找出一种递归方式来执行此操作，或者至少不嵌套六次。我真的想不出一个好的计划来做到这一点。对我来说最大的障碍是每个变量都有不同的最小值、最大值和步长值。

到目前为止，我的想法并不是很有帮助。我一直在尝试使一些递归函数工作，但是如果不在函数中嵌套更多 for 循环，我就无法弄清楚。我在这里看到了很多对 itertools.product 的引用，但我也不太清楚如何使它工作。

编辑：我正在做的是创建一个以参数组合命名的目录，用这些参数编写一个文件，用这个文件运行另一个代码，并分析该代码的输出。除了最后一个循环之外，我实际上在任何 for 循环中都没有做任何事情。很多参数只有 2 个值，有的有 10 个，有的有 3 个……只是有点不同。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-24T03:33:19.377

以下是使用方法`product`：

```
x1 = xrange(min1,max1,step1)
x2 = xrange(min2,max2,step2)
x3 = xrange(min3,max3,step3)
...

for v1, v2, v3, v4, v5, v6 in itertools.product(x1, x2, x3, x4, x5, x6):
    icky_thing(....) 
```

或者更紧凑一点：

```
ranges = [
    xrange(min1,max1,step1),
    xrange(min2,max2,step2),
    xrange(min3,max3,step3),
    ...
]

for v1, v2, v3, v4, v5, v6 in itertools.product(*ranges):
    icky_thing(....) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-24T03:31:51.313

您可能可以使用`itertools.product`：[http](http://docs.python.org/library/itertools.html#itertools.product) ://docs.python.org/library/itertools.html#itertools.product 。

就像是

```
for var1, var2 in itertools.product(xrange(min1, max1, step1), xrange(min2, max2, step2)):
    # stuff 
```

. . . 只有所有六个变量都在那里。

# django - ImportError：在 Google 应用引擎中找不到 django.utils

> ID：11174750
> 
> 赞同：4
> 
> 时间：2012-06-24T03:31:28.490
> 
> 标签：django, json, google-app-engine

当我在谷歌应用引擎项目中使用来自 django.utils 的 simplejson 时，我收到此错误：

```
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
  File "/base/data/home/apps/s~testapp/1.359839747994604729/notify.py", line 8, in <module>
    from handlers.xmpp_handler import XMPPHandler
  File "/base/data/home/apps/s~testapp/1.359839747994604729/handlers/xmpp_handler.py", line 12, in <module>
    import commands
  File "/base/data/home/apps/s~testapp/1.359839747994604729/handlers/commands.py", line 4, in <module>
    from django.utils import simplejson
ImportError: No module named django.utils 
```

**片段：**

```
import datetime
from google.appengine.api import users
from google.appengine.ext import db
from django.utils import simplejson

class jsonEncoder(simplejson.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, datetime.datetime):
            return obj.isoformat()

        elif isinstance(obj, db.Model):
            return dict((p, getattr(obj, p)) 
                        for p in obj.properties())

        elif isinstance(obj, users.User):
            return obj.email()

        else:
            return simplejson.JSONEncoder.default(self, obj) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T04:07:17.830

您需要指定要在您的 django 中使用`app.yaml`：

```
libraries:
- name: django
  version: "1.2" 
```

有关受支持的 django 版本，请参阅[GAE 文档。](https://developers.google.com/appengine/docs/python/tools/libraries27)

在 Python 2.7 运行时，您应该使用 python 的[本机 json 库](https://developers.google.com/appengine/docs/python/python27/newin27#JSON_Version)而不是 simplejson。

# web-services - 如何在 Tomcat Servlet Container 中对 webapp 请求进行身份验证和授权

> ID：11174753
> 
> 赞同：0
> 
> 时间：2012-06-24T03:32:01.873
> 
> 标签：web-services, tomcat, web-applications, realm, xacml

在 Tomcat Servlet Container 中对 webapp 请求进行身份验证和授权的最佳方法是什么？

我有两个想法，

1 - 使用 Tomcat 领域。2 - 有一个 Web 服务，它提供了根据 XACML 策略评估用户请求的能力。这意味着如果我们将用户名、资源名（这里是 servlet）发送到该 Web 服务，它将根据 XACML 策略（我们可以更改或添加新策略）评估请求并说允许或拒绝。

什么是最好的方法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:21:18.313

我建议你使用 tomcat 领域或 servlet 过滤器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:02:20.790

Container Managed Authentication is the standard solution. That means you define a JAASRealm in Tomcat and define your own LoginModule(s) and JAAS configuration file. The LoginModules can do whatever you like. Tomcat will take care of ensuring a login when required, and of enforcing access control via the user's roles as set up by your login module and defined in web.xml. No filters required.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:44:41.193

我编写了一个 Servlet PEP，它从 HttpServletObject 和可能的附加信息（例如一天中的时间）创建 XACML 请求，并将其发送到 PDP。

为此，我实现了 javax.servlet.Filter。这确实是前进的最佳方式。然后，您可以在 web.xml 中定义过滤器的范围。

然后，我的 PEP 将 XACML 请求作为 SOAP 消息发送到 Axiomatics XACML 3.0 PDP。你在用什么？

也可以在 Youtube 上查看我的 SDK 视频，该视频展示了如何快速创建 Java PEP。[http://www.youtube.com/watch?v=Z_2M775uFxo](http://www.youtube.com/watch?v=Z_2M775uFxo)

# java - Android，改变位图的明暗度

> ID：11174759
> 
> 赞同：0
> 
> 时间：2012-06-24T03:33:41.153
> 
> 标签：java, android, bitmap, android-view

我需要在不同的时间、不同程度地改变位图的亮度/暗度。我该怎么做？

我正在自定义视图中将位图绘制到画布上。我想认为在 Paint 类中有一些方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:34:15.350

我会研究[Paint.setColorFilter(ColorFilter filter)](http://developer.android.com/reference/android/graphics/Paint.html#setColorFilter%28android.graphics.ColorFilter%29)方法和[LightingColorFilter](http://developer.android.com/reference/android/graphics/LightingColorFilter.html)。

使用 LightingColorFilter 上的正确值，您应该能够获得您想要的效果。

# iphone - 核心绘图图高度未填满托管视图

> ID：11174760
> 
> 赞同：0
> 
> 时间：2012-06-24T03:34:16.550
> 
> 标签：iphone, ios, uiview, graph, core-plot

我的 Core Plot 图表的高度明显短于其图表托管视图的高度（`CPTGraphHostingView`由 xib 创建）。宽度似乎很好。

我对“全屏”图形有相同的代码（托管视图与父视图大小相同`UIView`），它的高度和宽度都很好。只有占据大约一半屏幕的托管视图存在此问题。

我仍然可以通过将托管视图拉伸到应有的位置来实现所需的图形高度*，*但我想找出发生这种情况的原因并修复它。我应该尝试调整哪些属性？

（不是`paddingTop`或`paddingBottom`。我已经试过了。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:42:59.733

该图始终填充托管视图。托管视图的大小未按预期调整，或者图形和/或绘图区域框架上有额外的填充。

# c - 每个结构项都获取用户输入的最后一个值

> ID：11174766
> 
> 赞同：0
> 
> 时间：2012-06-24T03:35:48.020
> 
> 标签：c

我要求`d->id`将其放在列表中，但如果我要求多于一个，则所有列表项都会排在最后一个。

例如，如果`for`有 2 次迭代并且`novo->prato[0]`is `"M1"`（这是向用户询问的）并且`novo->prato[1]`is `"M3"`，则两个位置都保持`"M3"`。为什么？

这是代码：

```
typedef struct pedido pedido, *ppedido;
typedef struct prato prato, *pprato;

struct pedido{
    char id[5];
    int prioridade;
    int mesa, n_pratos;
    pprato prato[TAM];
    ppedido prox;
};

struct prato{
    char id[5];
};

int verifica_prato(ppedido p,int j)
{
    FILE *f;
    struct item aux;

    int i=0;

    f = fopen("menu.bin", "rb");
    if(f == NULL){printf("O sistema nao consegue aceder a memoria");return;}

    while((fread(&aux, sizeof(struct item), 1, f)) == 1){
        if((strcmp(p->prato[j]->id, aux.id)) == 0)
            i++;
    }
    fclose(f);

    if(i == 0){
    printf("Prato nao existe no menu.\n");
    return 1;
        }

    if(i > 1)
    return 0;
}

for(i=0;i<novo->n_pratos;i++){
        do{
            printf("ID do prato %d: ", i+1);
            scanf("%s", &d->id);
            novo->prato[i] = d;
            k = verifica_prato(novo,i);

        }while(k != 0);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:07:30.343

`d` 当您这样做时，您正在将指针分配给结构`novo->prato[i] = d`，因此每次您对其进行更改`d`时都会反映`novo->prato[i]`在 prato 数组中的所有值都指向相同的地址，即`d`。

我不确定您打算做什么，但一种方法可能是`d`在询问用户输入之前每次循环进行 malloc。请记住，您最终还需要考虑“释放”内存`prato[i]`。

# python - python将文件保存到用户文件夹（Windows）

> ID：11174769
> 
> 赞同：3
> 
> 时间：2012-06-24T03:36:42.373
> 
> 标签：python, windows, file

我在 Python 中有这个程序，它应该将文本文件保存到用户“我的文档”内的文件夹中。问题是程序不知道用户名，或者 Windows 版本不知道正确的路径。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T03:42:52.707

[文档](http://docs.python.org/library/os.path.html#os.path.expanduser)说，以下代码也扩展到了 Windows 上的用户主目录。

```
homeDir = os.path.expanduser("~") 
```

* * *

从文档中：

> 在 Windows 上，如果设置了 HOME 和 USERPROFILE，将使用，否则将使用 HOMEPATH 和 HOMEDRIVE 的组合。通过从上面派生的创建的用户路径中剥离最后一个目录组件来处理初始的 ~user。

* * *

还要研究一下使用[Win32APIs](https://stackoverflow.com/a/3927493/227884)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T03:40:54.893

从环境变量中获取：

```
os.environ['USERPROFILE'] 
```

或者

```
os.environ['HOME'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T03:41:06.003

[winpaths](http://pypi.python.org/pypi/winpaths/)包提供了检索所需值的函数。

# java - 将 JApplet 嵌入 JFrame

> ID：11174770
> 
> 赞同：3
> 
> 时间：2012-06-24T03:36:46.313
> 
> 标签：java, swing, applet, jframe, japplet

好的，所以我想知道是否有人可以告诉我哪里出错了。

我有一个名为 Game 的 JApplet，如果我使用 AppletViewer 从 eclipse 中运行它，它运行良好，还有一个名为 GUI 的 JFrame，它包含 JApplet。这是两者的代码：

PS。我从 Game 中删除了大部分代码以使其更小，它现在只是基本的。

游戏.java：

```
package com.ion.brickdodge;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;

import javax.swing.JApplet;

public class Game extends JApplet implements Runnable{

private static final long serialVersionUID = 1L;
Image man1;
Image man2;
Image cman; 
int WIDTH = 250;
int HEIGHT = 350;
int lives = 3;
int spx = WIDTH / 2;
int score = 0;

Image dbImage;
Graphics dbg;

public void init () {
    setSize  (WIDTH, HEIGHT);
    setFocusable(true);
    setBackground(Color.LIGHT_GRAY);

    man1 = getImage(getCodeBase(), "res/man1.png");
    man2 = getImage(getCodeBase(), "res/man2.png");

    cman = man1;

}

public void start() {
    Thread th = new Thread(this);
    th.start();
}

public void run() {
    Thread.currentThread().setPriority(Thread.MIN_PRIORITY);
    while(true){
        repaint();

        try {
            Thread.sleep(10);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
    }   
}

public void paint(Graphics g) {

    g.drawImage(cman, spx, 320, this);
    g.setColor(Color.BLACK);
    g.drawString("Score: " + score, 5, 10);
    g.drawString("Lives: " + lives, 5, 25);

}

public void update(Graphics g){
    if (dbImage == null)
    {
        dbImage = createImage (this.getSize().width, this.getSize().height);
        dbg = dbImage.getGraphics ();
    }

    dbg.setColor (getBackground ());
    dbg.fillRect (0, 0, this.getSize().width, this.getSize().height);

    dbg.setColor (getForeground());
    paint (dbg);

    g.drawImage (dbImage, 0, 0, this);
}
    } 
```

这是 GUI.java：

```
package com.ion.brickdodge;

import java.awt.BorderLayout;

import javax.swing.JApplet;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class GUI {

public static void main(String args[]) {
      JFrame frame = new JFrame("test");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.setSize(1000, 1000);

      JPanel panel = new JPanel(new BorderLayout());
      frame.add(panel);

      JApplet applet = new Game();
      panel.add(applet, BorderLayout.CENTER);
      applet.init();
      frame.pack();

      frame.setVisible(true);
    }
} 
```

当我运行它时抛出的错误 GUI.java 是......

```
Exception in thread "main" java.lang.NullPointerException
at java.applet.Applet.getCodeBase(Unknown Source)
at com.ion.brickdodge.Game.init(Game.java:30)
at com.ion.brickdodge.GUI.main(GUI.java:22) 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:59:52.243

注意：如果问题是“为什么会这样？” 答案是 JVM 会自动为 applet 设置一个 applet 上下文和存根。但除非将小程序加载到网页中，否则不会发生这种情况。如果您自己加载它，则需要实现、实例化和附加这些设施。

一旦您获得了通常由小程序元素提供的详细信息，这样做并不难。

（OTOH 最好的策略是将游戏转换为面板，将其放入框架中，然后使用 JWS 启动它。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T03:44:34.557

我会回答这个问题：我认为更好的解决方案是让你的 GUI 用于创建 JPanel。然后，如果您希望将 GUI 作为 applet 运行，您可以简单地创建 JPanel 并将其放置在 JApplet 的 contentPane 中。同样，如果要创建 JFrame，则创建 JPanel 并将其放置在 JFrame 的 contentPane 中。

其他问题：

*   考虑将图像作为资源获取，因为它们可能会保存在 jar 文件中。
*   不要直接在 JApplet 等顶级窗口中绘制，也不要使用paint 方法。
*   `paintComponent(...)`而是在 JPanel 的重写方法中绘制。这将允许您的代码利用 Swing 的双缓冲。
*   不要`update(...)`在 Swing GUI 中覆盖。这是为 AWT 完成的，但对于 Swing 应该避免。
*   不要在绘画方法中读取任何图像或执行任何其他 CPU 密集型操作。
*   查看 Swing 绘画教程，了解应该如何进行这种编码。您可以在此处找到介绍性教程，并[在](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)[此处](http://docs.oracle.com/javase/tutorial/uiswing/painting/)找到更高级的文章

# iphone - 将多对多关系迁移到 Core Data 中的连接表

> ID：11174773
> 
> 赞同：11
> 
> 时间：2012-06-24T03:38:02.570
> 
> 标签：iphone, ios, core-data, core-data-migration, simperium

我有一个 iPhone 应用程序，它使用多对多关系将标签和注释链接在一起。我目前正在使用 Core Data 的“关系”功能来实现这一点，但想迁移到使用连接表来代替。

这是我的挑战：我想从旧模型迁移到连接表模型，我需要弄清楚如何执行该数据迁移。

有没有很好的例子说明如何做到这一点？

更新：我在这里澄清我的问题以帮助解决这里发生的事情：我想尝试使用[Simperium](https://simperium.com/)来支持我们的应用程序，但 Simperium 不支持多对多关系（！）。

**作为我正在尝试做的一个例子，让我们以 iPhoneCoreDataRecipes 应用程序为例。**

这是我的核心数据方案目前的样子： ![在此处输入图像描述](../Images/3f3722720afd847cf1a56409f490a807.png)

...这就是我要过渡到的内容： ![在此处输入图像描述](../Images/734a59aec784e0053b798822a0c2b0f6.png)

**我如何从一个到另一个，并随身携带数据？**

众所周知，Apple 的核心数据迁移文档很少，而且我没有看到任何有用的演练来使用 NSEntityMapping 或 NSMigrationManager 子类来完成工作。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-02T23:13:16.760

以下是基本流程：

1.  创建数据模型的版本化副本。（选择模型，然后编辑器->添加模型版本）

2.  对数据模型的新副本进行更改

3.  将新数据模型的副本标记为当前版本。（单击顶级 xcdatamodel 项，然后在文件检查器中将“版本化数据模型”部分下的“当前”条目设置为您在步骤 1 中创建的新数据模型。

4.  更新您的模型对象以添加 RecipeIngredient 实体。还将配方和成分实体上的成分和配方关系替换为您在步骤 2 中创建的新关系到 RecipeIngredient 实体。（两个实体都添加了这个关系。我叫我的 recipeIngredients）显然，无论您在旧代码中创建从成分到配方的关系，您现在都需要创建一个 RecipeIngredient 对象..但这超出了这个答案的范围。

5.  在模型之间添加一个新映射（文件->新文件...->（核心数据部分）->映射模型。这将为您自动生成几个映射。RecipeToRecipe、IngredientToIngredient 和 RecipeIngredient。

6.  删除 RecipeIngredient 映射。还要删除它为RecipeToRecipe 和IngredientToRecipe 提供的recipeIngredient 关系映射（或您在步骤2 中调用的任何内容）。

7.  将 RecipeToRecipe 映射拖动到映射规则列表中的最后一个。（这很**重要**，以便我们确保在食谱之前迁移成分，以便我们在迁移食谱时可以将它们链接起来。）迁移将按照迁移规则列表的顺序进行。

8.  为RecipeToRecipe映射“DDCDRecipeMigrationPolicy”设置自定义策略（这将覆盖Recipes对象的自动迁移并为我们提供一个可以执行映射逻辑的钩子。

9.  通过将 NSEntityMigrationPolicy 子类化为 Recipes 来创建 DDCDRecipeMigrationPolicy 以覆盖 createDestinationInstancesForSourceInstance（请参阅下面的代码）。这将为每个食谱调用一次，这将让我们创建食谱对象，以及将其链接到成分的相关食谱成分对象。我们将让成分通过 Xcode 在步骤 5 中自动为我们创建的映射规则自动迁移。

10.  无论您在何处创建持久对象存储（可能是 AppDelegate），请确保将用户字典设置为自动迁移数据模型：

```
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType 
      configuration:nil 
      URL:storeURL 
      options:[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,  nil] 
      error:&error])
{
} 
```

**食谱的子类 NSEntityMigrationPolicy**

```
#import <CoreData/CoreData.h>
@interface DDCDRecipeMigrationPolicy : NSEntityMigrationPolicy
@end 
```

**覆盖 DDDCDRecipeMigrationPolicy.m 中的 createDestinationInstancesForSourceInstance **

```
- (BOOL)createDestinationInstancesForSourceInstance:(NSManagedObject *)sInstance entityMapping:(NSEntityMapping *)mapping manager:(NSMigrationManager *)manager error:(NSError **)error
{

    NSLog(@"createDestinationInstancesForSourceInstance : %@", sInstance.entity.name);

   //We have to create the recipe since we overrode this method. 
   //It's called once for each Recipe.  
    NSManagedObject *newRecipe = [NSEntityDescription insertNewObjectForEntityForName:@"Recipe" inManagedObjectContext:[manager destinationContext]];
    [newRecipe setValue:[sInstance valueForKey:@"name"] forKey:@"name"];
    [newRecipe setValue:[sInstance valueForKey:@"overview"] forKey:@"overview"];
    [newRecipe setValue:[sInstance valueForKey:@"instructions"] forKey:@"instructions"];

    for (NSManagedObject *oldIngredient in (NSSet *) [sInstance valueForKey:@"ingredients"])
    {
        NSFetchRequest *fetchByIngredientName = [NSFetchRequest fetchRequestWithEntityName:@"Ingredient"];
        fetchByIngredientName.predicate = [NSPredicate predicateWithFormat:@"name = %@",[oldIngredient valueForKey:@"name"]];

        //Find the Ingredient in the new Datamodel.  NOTE!!!  This only works if this is the second entity migrated.
         NSArray *newIngredientArray = [[manager destinationContext] executeFetchRequest:fetchByIngredientName error:error];

        if (newIngredientArray.count == 1)
        {
             //Create an intersection record. 
            NSManagedObject *newIngredient = [newIngredientArray objectAtIndex:0];
            NSManagedObject *newRecipeIngredient = [NSEntityDescription insertNewObjectForEntityForName:@"RecipeIngredient" inManagedObjectContext:[manager destinationContext]];
            [newRecipeIngredient setValue:newIngredient forKey:@"ingredient"];
            [newRecipeIngredient setValue:newRecipe forKey:@"recipe"];
             NSLog(@"Adding migrated Ingredient : %@ to New Recipe %@", [newIngredient valueForKey:@"name"], [newRecipe valueForKey:@"name"]);
        }

    }

    return YES;
} 
```

我会在 Xcode 和示例 Xcode 项目中发布设置的图片，但我似乎还没有任何关于堆栈溢出的声誉点......所以它不会让我这样做。我也会把这个发布到我的博客上。bingosabi.wordpress.com/。

另请注意，Xcode Core Data 模型映射的东西有点不稳定，偶尔需要一个“干净的”、良好的 Xcode 恢复器、模拟器反弹或以上所有方法才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T01:41:19.583

正如我在对该问题的评论中所建议的那样，您可能不想更改您的数据模型，而是在您的模型和不理解多对多关系的库之间建立一座桥梁。

您要创建的连接表实际上已经存在，您只需要另一种方式将数据呈现给该库。

这是否可行，取决于该库如何看待您的模型。它有多种方法可以查询您的实体的属性，或者您可能是指定要复制哪些属性/关系的人。

如果没有关于所有这些的任何细节，很难给出真正的答案，但总体思路是：

您有一些带有标题的托管对象，如下所示：

```
// Recipe.h

@interface Recipe : NSManagedObject
@property (nonatomic,retain) NSSet *ingredients;
@end 
```

现在您使用一个类别向这个对象添加一些额外的方法：

```
// Recipe+fakejoin.h

@interface Recipe (fakejoin)
-(NSSet*)recipeIngredients;
@end 
```

以及这个方法的一个实现，`Recipe+fakejoin.m`它返回一个`NSSet`带有对象的`RecipeIngredients`对象。

但正如我所说，如果这个库允许你像这样玩而不破坏东西，这是一个悬而未决的问题。如果这一切对您来说听起来很新鲜，最好找到另一个解决方案......

# haskell - 如何使用 Text.Parsec.Expr 中的 buildExpressionParser 来解析这种语言？

> ID：11174775
> 
> 赞同：4
> 
> 时间：2012-06-24T03:39:05.843
> 
> 标签：haskell, parsec

我一直在尝试使用 buildExpressionParser 来解析一种语言，而且我几乎拥有它。感谢[Parsec.Expr 重复的前缀/后缀运算符不支持](https://stackoverflow.com/questions/10475337)解决我的一个大问题。

这个代码片段说明了（我希望是什么）我的最后一个困难：

```
import Text.Parsec.Expr
import Text.Parsec

data Expr = Lit Char | A1 Expr | A2 Expr | B Expr Expr
  deriving (Show)

expr :: Parsec String () Expr
expr = buildExpressionParser table (fmap Lit digit)

prefix p = Prefix . chainl1 p $ return (.)

table =
  [ [prefix $ char ',' >> return A1]
  , [Infix   (char '*' >> return B) AssocNone]
  , [prefix $ char '.' >> return A2]] 
```

这成功（并且正确）解析`,,0`, `..0`, `.,0`, `.0*0`, 和`,0*0`; 但是，它不能解析`,.0`or `.0*.0`。我可以看到为什么这两个不解析，但是我看不到如何更改解析器，以便成功都不会改变并且两个失败都会解析。

“解决”此问题的一种方法是更改`(fmap Lit digit)`​​为`(fmap Lit Digit <|> expr)`，但随后解析器将循环而不是出错。

欢迎咨询。

编辑：以下解析是关键：

```
> parseTest expr ".0*0"
A2 (B (Lit '0') (Lit '0'))

> parseTest expr ",0*0"
B (A1 (Lit '0')) (Lit '0') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T04:36:54.577

要得到 '。' 和 ',' 在某种程度上你可以把它们放在一起：

```
import Text.Parsec.Expr
import Text.Parsec

data Expr = Lit Char | A1 Expr | A2 Expr | B Expr Expr
  deriving (Show)

expr :: Parsec String () Expr
expr = buildExpressionParser table  (fmap Lit digit)
prefix p = Prefix . chainl1 p $ return (.)

table =
  [  [prefix $ (char ',' >> return A1) <|> (char '.' >> return A2)]
  , [Infix   (char '*' >> return B) AssocNone]
  , [prefix $ (char ',' >> return A1)] 
  ]

-- *Main> let f = parseTest expr
-- *Main> f ".,0"
-- A2 (A1 (Lit '0'))
-- *Main> f ".0*.0"
-- B (A2 (Lit '0')) (A2 (Lit '0'))
-- *Main> f ".0*,.0"
-- B (A2 (Lit '0')) (A1 (A2 (Lit '0')))
-- *Main> f ".,.0"
-- A2 (A1 (A2 (Lit '0')))
-- *Main> f ",.0"
-- A1 (A2 (Lit '0')) 
```

编辑，这是较早的明显不充分的尝试

```
 table =
   [  [prefix $ (char ',' >> return A1) <|> (char '.' >> return A2)]
   , [Infix   (char '*' >> return B) AssocNone]
   ] 
```

# c++ - c++ STL迭代器的混淆使用

> ID：11174776
> 
> 赞同：4
> 
> 时间：2012-06-24T03:39:19.793
> 
> 标签：c++, stl, iterator

当我像这样使用迭代器时，

```
//include header files
using namespace std;

int main()
{
    map<int,int> intIntMap;
    map<int,int>::iterator pos;
    pos = intIntMap.begin();

    intIntMap[0] = 1;
    intIntMap[3] = 5;
    intIntMap[4] = 9;
    intIntMap[5] = 5;

    //遍历
    cout << (*pos).first << endl;

    while( pos != intIntMap.end() )
    {
        cout << pos->first << " <---> " << pos->second << endl;
        pos++;
    }

} 
```

输出为 4；

但是当我像这样使用迭代器时：

```
//include header file
using namespace std;

int main()
{
    map<int,int> intIntMap;
    map<int,int>::iterator pos;

    intIntMap[0] = 1;
    intIntMap[3] = 5;
    intIntMap[4] = 9;
    intIntMap[5] = 5;

    //遍历
    pos = intIntMap.begin();
    cout << (*pos).first << endl;

    while( pos != intIntMap.end() )
    {
        cout << pos->first << " <---> " << pos->second << endl;
        pos++;
    }

} 
```

输出是我想要的；

我想知道使用迭代器有什么区别，当我插入新的键值对时，第一个迭代器发生了什么？谢谢！

补充： compile 是使用 gcc 4.1.2 ，感觉更困惑，像这样：

![编译是使用 gcc 4.1.2 ，感觉比较混乱，像这样：](../Images/23bbc9773937b708b996da4430ef9b54.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T03:56:20.703

由于您`begin()`在容器为空时调用，因此您得到了一个等于`end()`（第 23.1/7 节：“如果容器为空，则 begin() == end()”）的迭代器。

将项目插入容器并没有改变这一点，所以你仍然有`pos == intIntMap.end()`.

然后，您执行循环的零次迭代，因为`pos==end()`，并且您只执行循环只要`pos != end()`.

在第二个示例中，您`pos()`在插入数据后设置，因此您获取集合中的第一个项目，并迭代到最后一个项目。

编辑：就打印出地图的内容而言，我可能会这样做：

```
std::ostream &operator<<(std::ostream &os, std::pair<int, int> const &d) { 
    return os << d.first << " <---> " << d.second;
}

// ...

std::copy(intIntMap.begin(), intIntMap.end(), 
          std::ostream_iterator<std::pair<int, int> >(std::cout, "\n")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T03:51:10.300

使用 gdb 进行检查，我发现`first`迭代器的字段随着每次添加键值对而发生变化。似乎没有数据的映射的迭代器（由返回`begin()`）包含一些关于映射本身的元数据，特别是映射的大小（`first`所述迭代器的字段随着每次添加键值对而增长）。`begin()`在添加单个键值对后调用以检索迭代器会导致“预期”行为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T03:50:25.993

迭代器旨在用于自迭代器实例化以来未修改的容器。根据 c++ 标准，第一个示例中的代码输出是未定义的（您仍然可以获得所需的结果，只是不能保证得到它，而且没有太多理由期待它）。

在第一种情况下，迭代器没有发生任何事情，但是您打算引用的容器发生了变化，并且不一定在内存中的同一位置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-24T03:56:12.340

容器修改使现有迭代器无效。

通常的做法是在使用它之前获取迭代器，然后将其丢弃。你可以这样使用`for`：

```
#include <iostream>
#include <map>
using namespace std;

int main ()
{
  map<int, int> mymap;

  mymap[0] = 100;
  mymap[1] = 200;
  mymap[2] = 300;

  // show content:
  for (map<int, int>::iterator it = mymap.begin(); it != mymap.end(); it++)
    cout << (*it).first << " => " << (*it).second << endl;

  return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-24T03:56:46.867

简短回答：不保证迭代器在修改容器内容后仍然有效。

由于这里的容器是 a `map`，通常实现为红黑树，因此在插入过程中会修改和重新平衡结构。

在第一个示例中，您将迭代器初始化`pos`到地图的开头。此时，迭代器对当前内容有效。但是一旦你开始添加元素，迭代器就不再指向`begin`重组容器的新位置。

所以第二个示例有效的原因是因为您将迭代器设置为`begin`在对容器的所有修改完成之后。

一般来说，在迭代结构时修改结构是个坏主意。

这个问题有一些关于迭代器有效性的更多细节：

*   [STL 迭代器是否保证集合更改后的有效性？](https://stackoverflow.com/questions/3329956/do-stl-iterators-guarantee-validity-after-collection-was-changed)

# applescript - 让这个 Apple 脚本在 iTunes 中播放歌曲的特定部分的最佳方法是什么？

> ID：11174778
> 
> 赞同：0
> 
> 时间：2012-06-24T03:39:49.610
> 
> 标签：applescript

我希望 iTunes 播放播放列表中每首歌曲的特定 60 秒（比如 60-120 秒）。完成此操作的 AppleScript 代码是什么？到目前为止，我有：

```
tell application "iTunes"
    repeat with i from 1 to count tracks of playlist "My Playlist"
        play track i of playlist "My Playlist"
    end repeat
end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:28:16.737

尝试：

```
tell application "iTunes"
    set trackCount to count of tracks of playlist "My Playlist"
    repeat with i from 1 to trackCount
        play track i of playlist "My Playlist"
        set player position to 60
        repeat until player position ≥ 120
            delay 0.5
        end repeat
    end repeat
end tell 
```

# html - 在 Firefox 中检查文字尺寸

> ID：11174780
> 
> 赞同：1
> 
> 时间：2012-06-24T03:40:43.037
> 
> 标签：html, firefox, web

我正在使用 Firefox 的 Web 开发人员功能来检查元素。我很想知道是否有人可以找到给定页面上 HTML 元素的确切尺寸，即宽度和高度（以像素为单位）？

例如，现在右键单击您正在阅读的 StackOverflow 页面上的任何元素，单击“检查” - 是否有一种快速而肮脏的方法可以找出浏览器上显示了多少像素？特别是宽度，因为通常样式表已经表示高度。

注意：我的用例是将图像的大小调整为它正在显示的像素宽度，除了执行类似的操作

```
 <img style="width:100%;" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:43:53.267

`Inspect`，查看`styles`，单击`computed`选项卡并取消选中`only user styles`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T03:47:10.750

你可能想试试[Firebug](https://github.com/firebug/firebug)

它是 FF 的附加组件，使用 Ctrl + F12 激活它，选择蓝色箭头并指向要检查的元素。您将获得该元素在 HTML 中的位置以及其样式的右侧。选择样式右侧的“布局”，它会告诉您确切的尺寸

# php - 使用 Blowfish 进行 PHP 加密

> ID：11174785
> 
> 赞同：6
> 
> 时间：2012-06-24T03:41:18.293
> 
> 标签：php, security, blowfish

我正在处理需要加密密码的注册表单，我听说建议我对密码使用 Blowfish 加密，如何使用 PHP crypt() 函数实现河豚加密？另外，我打算稍后检索密码以进行登录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T04:09:44.923

简短的回答是使用以字符**$2a$**`crypt`开头的盐、两位数的*成本*参数**$**和字母表中的 22 位数字**./0-9A-Za-z**。这仅适用于支持 Blowfish 加密算法的系统。然而，PHP 5.3 原生实现了它。有关更多详细信息，请参阅[PHP 手册 — crypt](http://php.net/manual/en/function.crypt.php)。

 *******例子：

```
crypt('rasmuslerdorf', '$2a$07$somesillystringforsalt') 
```

盐字符串触发适当的算法。两位数的*成本*参数是底层基于 Blowfish 的散列算法的迭代计数的以 2 为底的对数，并且必须在 [04 – 31] 范围内。在示例中，07 告诉算法使用 2 ⁷或 128 次迭代。这个数字越高，执行时间越长，但是在散列用户密码的情况下，这是一件**好事**。

[这个对类似问题的回答](https://stackoverflow.com/a/6337021/911182)更详细地解释了 BCrypt 是什么，它与 Blowfish 的关系，以及为什么要使用它。Stack Overflow 上还有许多其他[相关主题](https://stackoverflow.com/questions/tagged/php+bcrypt)。

* * *

[phpass](http://www.openwall.com/phpass/)是一个出色的、易于使用的密码散列框架，适用于所有系统，如果支持则使用 Blowfish，如果不支持则回退到其他算法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T19:38:50.110

您永远不需要河豚来加密这样的密码。注册表单应通过 HTTPS 进行，这将处理对网络攻击者的防御。密码本身应该被散列（**从不加密**）。bcrypt 是一个很好的基于河豚的密码哈希函数。但是有很多与 SO 上的安全密码存储相关的帖子。*******

# javascript - 使用 elementFromPoint() 方法检查元素可见性

> ID：11174787
> 
> 赞同：0
> 
> 时间：2012-06-24T03:41:39.947
> 
> 标签：javascript, dom

我正在尝试检查以确保在开始使用以下功能之前可以看到一个项目

```
isVisible: function (node, doc, x, y) {
    var el = doc.elementFromPoint(x, y);
    if (node === el) return true;
    else return false;
}, 
```

`x`和`y`是所选节点的位置，由下式计算

```
findPos: function (node) {
    var pos = new Object();
    pos.left = pos.top = 0;
    if (node.offsetParent) {
        do {
            pos.left += node.offsetLeft;
            pos.top += node.offsetTop;

        } while (node = node.offsetParent);
    }
    return pos;
} 
```

一切正常。但是，当我向下滚动页面时，该`isVisible`函数不再返回正确的值。这是由于位置已更改但查找位置函数未返回正确值引起的。

有没有一种方法可以获取元素的位置，比如 的反面`elementFromPoint`？或者有人有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:12:27.393

I just wrote an `isVisible()` method that uses the `elementFromPoint()` method and should work in IE9+ to detect if an element is visible.

```
var isVisible = function(elem) {
  var w = window, d = document, height, rects, on_top;
  if(!elem || (elem && elem.nodeType !== 1) || !elem.getClientRects || !d.elementFromPoint || !d.querySelector || !elem.contains) {
    return false;
  }
  if (elem.offsetWidth === 0 || elem.offsetHeight === 0) {
    return false;
  }
  height = w.innerHeight ? w.innerHeight: d.documentElement.clientHeight;
  rects = elem.getClientRects();
  on_top = function(r, elem) {
    var x = (r.left + r.right)/2,
      y = (r.top + r.bottom)/2,
      elemFromPoint = d.elementFromPoint(x, y);
      return (elemFromPoint === elem || elem.contains(elemFromPoint));
  };
  for (var i = 0, l = rects.length; i < l; i++) {
    var r = rects[i],
      in_viewport = r.top > 0 ? r.top <= height : (r.bottom > 0 && r.bottom <= height);
    if (in_viewport && on_top(r, elem)) {
      return true;
    }
  }
  return false;
}; 
```

You would call it like this: `isVisible(document.getElementById('at-follow'));`

Also, here is the [gist](https://gist.github.com/gfranko/5313617) of it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:59:02.323

我能够通过添加`window.scrollX`和输入参数`window.scrollY`来解决这个问题`doc.elementFromPoint()``x``y`

```
 isVisible: function (node, doc, x, y) 
     {
      var el = doc.elementFromPoint(x-window.scrollX, y-window.scrollY);
        if (node === el) return true;
          else return false;
     }, 
```

这似乎工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T03:51:01.843

这个库应该是你要找的：[https ://github.com/cpatik/within-viewport/blob/master/withinViewport.js](https://github.com/cpatik/within-viewport/blob/master/withinViewport.js)

# xmpp - 旁遮普邦并未始终承认它正在从 strophe 获取消息

> ID：11174789
> 
> 赞同：0
> 
> 时间：2012-06-24T03:41:55.127
> 
> 标签：xmpp, openfire, strophe, punjab, prebinding

首先，提前感谢您和我一起看这个问题。

我目前正在使用 strophe.js 通过 BOSH 连接连接到旁遮普邦，最终将消息转发到 Openfire。我在服务器上预绑定并附加到与 strophe 的连接。这最初工作正常；我可以发送和接收消息，当我收到空闲 ping 时，我能够成功响应。但是，一段时间后，我会断开连接。

检查旁遮普日志后，当我从 strophe 发送消息时，似乎并不总是从旁遮普得到 httpbind 确认。Strophe 按预期等待大约 60 秒，然后尝试再次发送消息 - 具有相同 ID 的完整副本。这是有道理的，因为它不知道旁遮普是否收到了这条消息，因为它从未承认过。然而，由于某种原因，旁遮普省收到了这条重复消息，并认为它是一个带有不正确 RID 的新消息，因此它增加了它的内部 RID 计数器，就像它会增加任何其他消息一样。此外，它再次将消息转发到 Openfire 服务器，尽管据我所知，我还没有看到这有任何显着影响。最后，在这种情况发生了很多次之后，

我的问题是，为什么旁遮普邦没有按应有的方式承认一些信息——回到`<body xmlns='http://jabber.org/protocol/httpbind'/>`strophe。

此过程通过以下日志中的示例进行了详细说明：

```
 2012-06-22 20:17:23-0400 [HTTPChannel,21,127.0.0.1] HEADERS 1340410643.66:                 Punjab gets a message from the HTTP Bind (this is why we are observing activity in HTTPChannel)
    2012-06-22 20:17:23-0400 [HTTPChannel,21,127.0.0.1] {'origin': 'http://172.16.160.246', 'content-length': '191', 'accept-language': 'en-US,en;q=0.8', 'accept-encoding': 'gzip,deflate,sdch', 'x-forwarded-host': '172.16.160.246', 'x-forwarded-for': '172.16.122.9', 'host': '127.0.0.1:5280', 'accept': '*/*', 'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'connection': 'Keep-Alive', 'referer': 'http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486', 'cookie': 'ASP.NET_SessionId=c4ioeuw2azw21lkedv0nbwlt; .MySiteUniqueCookie=92416C9E3804DF3F6B5661F5B6447314BA070C1FE9BF3D6830AA256AFFA84CAB691B1E3746DBFD4E99692CC18F831C89810CDF256CD12EAF3EA351FEF240605589BE9AE835B9D862265A1672749B5DF9E7AADEE8BEC95006A410CDA5D25271964C9EE065AB968AB3C9521BC9D1059D545FA40575FB477AC3FFDD4F4A702334D2A83C9C90', 'x-forwarded-server': 'CODEMONKEY.mydomain.com', 'content-type': 'application/xml'}
    2012-06-22 20:17:23-0400 [HTTPChannel,21,127.0.0.1] HTTPB POST :                                        This is the POST message coming from the BOSH connection
    2012-06-22 20:17:23-0400 [HTTPChannel,21,127.0.0.1]                                                                    You can see that it is in an httpbind protocol body
                    <body rid='1211827046' xmlns='http://jabber.org/protocol/httpbind' sid='fb03e4779f4b9a4fe15fbf09d5905f455cc54919'>
                                    <iq type='result' to='codemonkey' id='511-862' xmlns='jabber:client'/>
                    </body>
    2012-06-22 20:17:23-0400 [HTTPChannel,21,127.0.0.1] 1211827046
    2012-06-22 20:17:23-0400 [HTTPChannel,21,127.0.0.1]                                                                    Here, Punjab strips the httpbind body and sends the root message directly to OpenFire
                    SID: fb03e4779f4b9a4fe15fbf09d5905f455cc54919 =>                                                      using the direct session connection Punjab has set up for this user (evidenced by the SID).
                    SEND: "
                    <iq xmlns='jabber:client' to='codemonkey' type='result' id='511-862'/>"

                    HOWEVER, HERE WE ARE MISSING THE HTTPBIND CONFIRMATION THAT SHOULD BE SENT BACK TO STROPHE, LETTING IT KNOW THAT THE MESSAGE WAS FORWARDED
                    THUS, STROPHE SENDS THE SAME MESSAGE AGAIN WITH THE SAME RID, THINKING THAT PUNJAB NEVER GOT THE FIRST ONE.

    2012-06-22 20:18:28-0400 [HTTPChannel,22,127.0.0.1] HEADERS 1340410708.95:                 Punjab gets a message from the HTTP Bind (this is strophes second attempt at sending the message)
    2012-06-22 20:18:28-0400 [HTTPChannel,22,127.0.0.1] {'origin': 'http://172.16.160.246', 'content-length': '191', 'accept-language': 'en-US,en;q=0.8', 'accept-encoding': 'gzip,deflate,sdch', 'x-forwarded-host': '172.16.160.246', 'x-forwarded-for': '172.16.122.9', 'host': '127.0.0.1:5280', 'accept': '*/*', 'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'connection': 'Keep-Alive', 'referer': 'http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486', 'cookie': 'ASP.NET_SessionId=c4ioeuw2azw21lkedv0nbwlt; .MySiteUniqueCookie=92416C9E3804DF3F6B5661F5B6447314BA070C1FE9BF3D6830AA256AFFA84CAB691B1E3746DBFD4E99692CC18F831C89810CDF256CD12EAF3EA351FEF240605589BE9AE835B9D862265A1672749B5DF9E7AADEE8BEC95006A410CDA5D25271964C9EE065AB968AB3C9521BC9D1059D545FA40575FB477AC3FFDD4F4A702334D2A83C9C90', 'x-forwarded-server': 'CODEMONKEY.mydomain.com', 'content-type': 'application/xml'}
    2012-06-22 20:18:28-0400 [HTTPChannel,22,127.0.0.1] HTTPB POST :
    2012-06-22 20:18:28-0400 [HTTPChannel,22,127.0.0.1] 
                    <body rid='1211827046' xmlns='http://jabber.org/protocol/httpbind' sid='fb03e4779f4b9a4fe15fbf09d5905f455cc54919'>
                                    <iq type='result' to='codemonkey' id='511-862' xmlns='jabber:client'/>
                    </body>
    2012-06-22 20:18:28-0400 [HTTPChannel,22,127.0.0.1] 1211827046
    2012-06-22 20:18:28-0400 [HTTPChannel,22,127.0.0.1] 
                    SID: fb03e4779f4b9a4fe15fbf09d5905f455cc54919 =>                                                      PUNJAB SENDS THIS TO OPENFIRE AS WELL, EVIDENCE THAT PUNJAB FAILS TO DETECT THAT THIS IS A DUPLICATE MESSAGE
                    SEND: "                                                                                                                                                 It seems that Openfire must disregard this, considering that we haven’t seen issues with openfire receiving these messages.
                    <iq xmlns='jabber:client' to='codemonkey' type='result' id='511-862'/>"               and haven’t seen duplicate messages through chat or anything.
    2012-06-22 20:18:28-0400 [HTTPChannel,22,127.0.0.1]        RETURN HTTPB 1340410708.95:
    2012-06-22 20:18:28-0400 [HTTPChannel,22,127.0.0.1]                                                                    PUNJAB SENDS OUT THE HTTPBIND ACKNOWLEDGEMENT, AS IT SHOULD HAVE THE FIRST TIME.
                    <body xmlns='http://jabber.org/protocol/httpbind'/>
    2012-06-22 20:18:28-0400 [HTTPChannel,22,127.0.0.1] 1211827046
    2012-06-22 20:18:28-0400 [HTTPChannel,22,127.0.0.1] 127.0.0.1 - - [23/Jun/2012:00:18:28 +0000] "POST /bosh HTTP/1.1" 200 51 "http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5"

    Since Punjab sees the duplicate request as a new request, it has incremented its internal RID counter for both, meaning we are now off by 1 RID (each message sent from strophe is supposed to increment the RID value by 1). The first few times this happens, the connection remains because Punjab has a tolerance window of about 5\. Eventually, we get out of this window, and Punjab closes the connection.

    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] HEADERS 1340410993.78:
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] {'origin': 'http://172.16.160.246', 'content-length': '191', 'accept-language': 'en-US,en;q=0.8', 'accept-encoding': 'gzip,deflate,sdch', 'x-forwarded-host': '172.16.160.246', 'x-forwarded-for': '172.16.122.9', 'host': '127.0.0.1:5280', 'accept': '*/*', 'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'connection': 'Keep-Alive', 'referer': 'http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486', 'cookie': 'ASP.NET_SessionId=c4ioeuw2azw21lkedv0nbwlt; .MySiteUniqueCookie=0772CAEB889BB1F853371E4153AC6972595A3A548BAE87D3F8D86AFBB5B88B4C0B8FD61F971816D4678388499B0A71E2517048261B07AD393D9EECDA199FA7EA51CBCD17299047473C6B9A9667BAF9367059319B4F0292B57238A0E2DB2AC737B12E530EAAE85732B1070E1F563E7675A82DF41C57A2C705B358328BE477C581D02DC714', 'x-forwarded-server': 'CODEMONKEY.mydomain.com', 'content-type': 'application/xml'}
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] HTTPB POST :
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] 
                    <body rid='1211827048' xmlns='http://jabber.org/protocol/httpbind' sid='fb03e4779f4b9a4fe15fbf09d5905f455cc54919'>
                                    <iq type='result' to='codemonkey' id='600-864' xmlns='jabber:client'/>
                    </body>
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] 1211827048
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] This rid is invalid 1211827048 1211827052                  ITS INTERNAL RID COUNTER HAS INCREASED TO 52 WHILE WE ARE AT 48.
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] HTTPB Error 404                                                                   The tolerance has been exceeded and the connection is closed.
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] 127.0.0.1 - - [23/Jun/2012:00:23:13 +0000] "POST /bosh HTTP/1.1" 404 - "http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5"

    Since Punjab sees the duplicate request as a new request, it has incremented its internal RID counter for both, meaning we are now off by 1 RID (each message sent from strophe is supposed to increment the RID value by 1). The first few times this happens, the connection remains because Punjab has a tolerance window of about 5\. Eventually, we get out of this window, and Punjab closes the connection.

    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] HEADERS 1340410993.78:
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] {'origin': 'http://172.16.160.246', 'content-length': '191', 'accept-language': 'en-US,en;q=0.8', 'accept-encoding': 'gzip,deflate,sdch', 'x-forwarded-host': '172.16.160.246', 'x-forwarded-for': '172.16.122.9', 'host': '127.0.0.1:5280', 'accept': '*/*', 'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'connection': 'Keep-Alive', 'referer': 'http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486', 'cookie': 'ASP.NET_SessionId=c4ioeuw2azw21lkedv0nbwlt; .MySiteUniqueCookie=0772CAEB889BB1F853371E4153AC6972595A3A548BAE87D3F8D86AFBB5B88B4C0B8FD61F971816D4678388499B0A71E2517048261B07AD393D9EECDA199FA7EA51CBCD17299047473C6B9A9667BAF9367059319B4F0292B57238A0E2DB2AC737B12E530EAAE85732B1070E1F563E7675A82DF41C57A2C705B358328BE477C581D02DC714', 'x-forwarded-server': 'CODEMONKEY.mydomain.com', 'content-type': 'application/xml'}
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] HTTPB POST :
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] 
                    <body rid='1211827048' xmlns='http://jabber.org/protocol/httpbind' sid='fb03e4779f4b9a4fe15fbf09d5905f455cc54919'>
                                    <iq type='result' to='codemonkey' id='600-864' xmlns='jabber:client'/>
                    </body>
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] 1211827048
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] This rid is invalid 1211827048 1211827052                  ITS INTERNAL RID COUNTER HAS INCREASED TO 52 WHILE WE ARE AT 48.
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] HTTPB Error 404                                                                   The tolerance has been exceeded and the connection is closed.
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] 127.0.0.1 - - [23/Jun/2012:00:23:13 +0000] "POST /bosh HTTP/1.1" 404 - "http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" 
```

任何帮助将不胜感激。也许我不完全理解旁遮普在做什么。在我看来，旁遮普邦通过 BOSH 从打包在 httpbind 正文中的 strophe 中获取消息。它从 httpbind 正文中提取消息并通过直接会话将裸消息转发给 Openfire。最后，它通过返回一个裸消息来响应 strophe `<body xmlns='http://jabber.org/protocol/httpbind'/>`，让 strophe 知道该消息已被接收并处理。当消息来自 Openfire 时，它​​们会显示在 [XmlStream,client] 标头下的日志中，而不是 [HTTPChannel,21,127.0.0.1] 标头下。这些来自 Openfire 通过直接会话连接，Punjab 将它们包装在 httpbind 主体中，然后通过 BOSH 将它们转发到 strophe。Strophe 然后返回一个空`<body xmlns='http://jabber.org/protocol/httpbind'/>`的确认交易。

那么为什么旁遮普邦有时不承认该信息呢？为什么它没有将重复的消息视为重复消息而只是返回确认而不是重新发送它并错误地增加它的 RID 计数器？再一次，谢谢你，谢谢你，谢谢你读到这里。我无能为力，任何帮助将不胜感激。

这是失败的完整旁遮普日志：

```
 2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] HEADERS 1340410782.18:
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] {'origin': 'http://172.16.160.246', 'content-length': '191', 'accept-language': 'en-US,en;q=0.8', 'accept-encoding': 'gzip,deflate,sdch', 'x-forwarded-host': '172.16.160.246', 'x-forwarded-for': '172.16.122.9', 'host': '127.0.0.1:5280', 'accept': '*/*', 'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'connection': 'Keep-Alive', 'referer': 'http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486', 'cookie': 'ASP.NET_SessionId=c4ioeuw2azw21lkedv0nbwlt; .MySiteUniqueCookie=92416C9E3804DF3F6B5661F5B6447314BA070C1FE9BF3D6830AA256AFFA84CAB691B1E3746DBFD4E99692CC18F831C89810CDF256CD12EAF3EA351FEF240605589BE9AE835B9D862265A1672749B5DF9E7AADEE8BEC95006A410CDA5D25271964C9EE065AB968AB3C9521BC9D1059D545FA40575FB477AC3FFDD4F4A702334D2A83C9C90', 'x-forwarded-server': 'CODEMONKEY.mydomain.com', 'content-type': 'application/xml'}
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] HTTPB POST :
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] 
        <body rid='1211827046' xmlns='http://jabber.org/protocol/httpbind' sid='fb03e4779f4b9a4fe15fbf09d5905f455cc54919'>
            <iq type='result' to='codemonkey' id='511-862' xmlns='jabber:client'/>
        </body>
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] 1211827046
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1]        RETURN HTTPB 1340410782.2:
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] 
        <body xmlns='http://jabber.org/protocol/httpbind'>
            <iq xmlns='jabber:client' from='codemonkey' type='get' id='64-863' to='MySiteadmin@codemonkey/5da9d909-46e0-4dac-8f02-a4113e6490e5'>
                <ping xmlns='urn:xmpp:ping'/>
            </iq>
        </body>
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] 1211827046
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] 127.0.0.1 - - [23/Jun/2012:00:19:42 +0000] "POST /bosh HTTP/1.1" 200 222 "http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5"
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] HEADERS 1340410782.34:
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] {'origin': 'http://172.16.160.246', 'content-length': '190', 'accept-language': 'en-US,en;q=0.8', 'accept-encoding': 'gzip,deflate,sdch', 'x-forwarded-host': '172.16.160.246', 'x-forwarded-for': '172.16.122.9', 'host': '127.0.0.1:5280', 'accept': '*/*', 'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'connection': 'Keep-Alive', 'referer': 'http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486', 'cookie': 'ASP.NET_SessionId=c4ioeuw2azw21lkedv0nbwlt; .MySiteUniqueCookie=92416C9E3804DF3F6B5661F5B6447314BA070C1FE9BF3D6830AA256AFFA84CAB691B1E3746DBFD4E99692CC18F831C89810CDF256CD12EAF3EA351FEF240605589BE9AE835B9D862265A1672749B5DF9E7AADEE8BEC95006A410CDA5D25271964C9EE065AB968AB3C9521BC9D1059D545FA40575FB477AC3FFDD4F4A702334D2A83C9C90', 'x-forwarded-server': 'CODEMONKEY.mydomain.com', 'content-type': 'application/xml'}
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] HTTPB POST :
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] 
        <body rid='1211827047' xmlns='http://jabber.org/protocol/httpbind' sid='fb03e4779f4b9a4fe15fbf09d5905f455cc54919'>
            <iq type='result' to='codemonkey' id='64-863' xmlns='jabber:client'/>
        </body>
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] 1211827047
    2012-06-22 20:19:42-0400 [HTTPChannel,22,127.0.0.1] 
        SID: fb03e4779f4b9a4fe15fbf09d5905f455cc54919 => 
        SEND: "
        <iq xmlns='jabber:client' to='codemonkey' type='result' id='64-863'/>"

    2012-06-22 20:20:50-0400 [HTTPChannel,21,127.0.0.1] HEADERS 1340410850.19:
    2012-06-22 20:20:50-0400 [HTTPChannel,21,127.0.0.1] {'origin': 'http://172.16.160.246', 'content-length': '190', 'accept-language': 'en-US,en;q=0.8', 'accept-encoding': 'gzip,deflate,sdch', 'x-forwarded-host': '172.16.160.246', 'x-forwarded-for': '172.16.122.9', 'host': '127.0.0.1:5280', 'accept': '*/*', 'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'connection': 'Keep-Alive', 'referer': 'http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486', 'cookie': 'ASP.NET_SessionId=c4ioeuw2azw21lkedv0nbwlt; .MySiteUniqueCookie=0772CAEB889BB1F853371E4153AC6972595A3A548BAE87D3F8D86AFBB5B88B4C0B8FD61F971816D4678388499B0A71E2517048261B07AD393D9EECDA199FA7EA51CBCD17299047473C6B9A9667BAF9367059319B4F0292B57238A0E2DB2AC737B12E530EAAE85732B1070E1F563E7675A82DF41C57A2C705B358328BE477C581D02DC714', 'x-forwarded-server': 'CODEMONKEY.mydomain.com', 'content-type': 'application/xml'}
    2012-06-22 20:20:50-0400 [HTTPChannel,21,127.0.0.1] HTTPB POST :
    2012-06-22 20:20:50-0400 [HTTPChannel,21,127.0.0.1] 
        <body rid='1211827047' xmlns='http://jabber.org/protocol/httpbind' sid='fb03e4779f4b9a4fe15fbf09d5905f455cc54919'>
            <iq type='result' to='codemonkey' id='64-863' xmlns='jabber:client'/>
        </body>
    2012-06-22 20:20:50-0400 [HTTPChannel,21,127.0.0.1] 1211827047
    2012-06-22 20:20:50-0400 [HTTPChannel,21,127.0.0.1] 
        SID: fb03e4779f4b9a4fe15fbf09d5905f455cc54919 => 
        SEND: "
        <iq xmlns='jabber:client' to='codemonkey' type='result' id='64-863'/>"
    2012-06-22 20:20:50-0400 [HTTPChannel,21,127.0.0.1]        RETURN HTTPB 1340410850.21:
    2012-06-22 20:20:50-0400 [HTTPChannel,21,127.0.0.1] 
        <body xmlns='http://jabber.org/protocol/httpbind'/>
    2012-06-22 20:20:50-0400 [HTTPChannel,21,127.0.0.1] 1211827047
    2012-06-22 20:20:50-0400 [HTTPChannel,21,127.0.0.1] 127.0.0.1 - - [23/Jun/2012:00:20:49 +0000] "POST /bosh HTTP/1.1" 200 51 "http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5"

    2012-06-22 20:22:00-0400 [XmlStream,client] 
        SID: fb03e4779f4b9a4fe15fbf09d5905f455cc54919 => 
        RECV: '
        <iq type="get" id="600-864" from="codemonkey" to="MySiteadmin@codemonkey/5da9d909-46e0-4dac-8f02-a4113e6490e5">
            <ping xmlns="urn:xmpp:ping"/>
        </iq>'
    2012-06-22 20:22:00-0400 [XmlStream,client]        RETURN HTTPB 1340410920.62:
    2012-06-22 20:22:00-0400 [XmlStream,client] 
        <body xmlns='http://jabber.org/protocol/httpbind'>
            <iq xmlns='jabber:client' from='codemonkey' type='get' id='600-864' to='MySiteadmin@codemonkey/5da9d909-46e0-4dac-8f02-a4113e6490e5'>
                <ping xmlns='urn:xmpp:ping'/>
            </iq>
        </body>
    2012-06-22 20:22:00-0400 [XmlStream,client] 1211827047
    2012-06-22 20:22:00-0400 [XmlStream,client] 127.0.0.1 - - [23/Jun/2012:00:21:59+0000] "POST /bosh HTTP/1.1" 200 223 "http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5"

    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] HEADERS 1340410927.48:
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] {'origin': 'http://172.16.160.246', 'content-length': '190', 'accept-language': 'en-US,en;q=0.8', 'accept-encoding': 'gzip,deflate,sdch', 'x-forwarded-host': '172.16.160.246', 'x-forwarded-for': '172.16.122.9', 'host': '127.0.0.1:5280', 'accept': '*/*', 'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'connection': 'Keep-Alive', 'referer': 'http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486', 'cookie': 'ASP.NET_SessionId=c4ioeuw2azw21lkedv0nbwlt; .MySiteUniqueCookie=0772CAEB889BB1F853371E4153AC6972595A3A548BAE87D3F8D86AFBB5B88B4C0B8FD61F971816D4678388499B0A71E2517048261B07AD393D9EECDA199FA7EA51CBCD17299047473C6B9A9667BAF9367059319B4F0292B57238A0E2DB2AC737B12E530EAAE85732B1070E1F563E7675A82DF41C57A2C705B358328BE477C581D02DC714', 'x-forwarded-server': 'CODEMONKEY.mydomain.com', 'content-type': 'application/xml'}
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] HTTPB POST :
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] 
        <body rid='1211827047' xmlns='http://jabber.org/protocol/httpbind' sid='fb03e4779f4b9a4fe15fbf09d5905f455cc54919'>
            <iq type='result' to='codemonkey' id='64-863' xmlns='jabber:client'/>
        </body>
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] 1211827047
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1]        RETURN HTTPB 1340410927.48:
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] 
        <body xmlns='http://jabber.org/protocol/httpbind'>
            <iq xmlns='jabber:client' from='codemonkey' type='get' id='600-864' to='MySiteadmin@codemonkey/5da9d909-46e0-4dac-8f02-a4113e6490e5'>
                <pingxmlns='urn:xmpp:ping'/>
            </iq>
        </body>
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] 1211827047
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] 127.0.0.1 - - [23/Jun/2012:00:22:06 +0000] "POST /bosh HTTP/1.1" 200 223 "http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5"
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] HEADERS 1340410927.67:
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] {'origin': 'http://172.16.160.246', 'content-length': '191', 'accept-language': 'en-US,en;q=0.8', 'accept-encoding': 'gzip,deflate,sdch', 'x-forwarded-host': '172.16.160.246', 'x-forwarded-for': '172.16.122.9', 'host': '127.0.0.1:5280', 'accept': '*/*', 'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'connection': 'Keep-Alive', 'referer': 'http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486', 'cookie': 'ASP.NET_SessionId=c4ioeuw2azw21lkedv0nbwlt; .MySiteUniqueCookie=0772CAEB889BB1F853371E4153AC6972595A3A548BAE87D3F8D86AFBB5B88B4C0B8FD61F971816D4678388499B0A71E2517048261B07AD393D9EECDA199FA7EA51CBCD17299047473C6B9A9667BAF9367059319B4F0292B57238A0E2DB2AC737B12E530EAAE85732B1070E1F563E7675A82DF41C57A2C705B358328BE477C581D02DC714', 'x-forwarded-server': 'CODEMONKEY.mydomain.com', 'content-type': 'application/xml'}
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] HTTPB POST :
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] 
        <body rid='1211827048' xmlns='http://jabber.org/protocol/httpbind' sid='fb03e4779f4b9a4fe15fbf09d5905f455cc54919'>
            <iq type='result' to='codemonkey' id='600-864' xmlns='jabber:client'/>
        </body>
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] 1211827048
    2012-06-22 20:22:07-0400 [HTTPChannel,21,127.0.0.1] 
        SID: fb03e4779f4b9a4fe15fbf09d5905f455cc54919 => 
        SEND: "
        <iq xmlns='jabber:client' to='codemonkey' type='result' id='600-864'/>"

    2012-06-22 20:22:12-0400 [-] 
        SID: fb03e4779f4b9a4fe15fbf09d5905f455cc54919 => 
        SEND: ' '

    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] HEADERS 1340410993.78:
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] {'origin': 'http://172.16.160.246', 'content-length': '191', 'accept-language': 'en-US,en;q=0.8', 'accept-encoding': 'gzip,deflate,sdch', 'x-forwarded-host': '172.16.160.246', 'x-forwarded-for': '172.16.122.9', 'host': '127.0.0.1:5280', 'accept': '*/*', 'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'connection': 'Keep-Alive', 'referer': 'http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486', 'cookie': 'ASP.NET_SessionId=c4ioeuw2azw21lkedv0nbwlt; .MySiteUniqueCookie=0772CAEB889BB1F853371E4153AC6972595A3A548BAE87D3F8D86AFBB5B88B4C0B8FD61F971816D4678388499B0A71E2517048261B07AD393D9EECDA199FA7EA51CBCD17299047473C6B9A9667BAF9367059319B4F0292B57238A0E2DB2AC737B12E530EAAE85732B1070E1F563E7675A82DF41C57A2C705B358328BE477C581D02DC714', 'x-forwarded-server': 'CODEMONKEY.mydomain.com', 'content-type': 'application/xml'}
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] HTTPB POST :
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] 
        <body rid='1211827048' xmlns='http://jabber.org/protocol/httpbind' sid='fb03e4779f4b9a4fe15fbf09d5905f455cc54919'>
            <iq type='result' to='codemonkey' id='600-864' xmlns='jabber:client'/>
        </body>
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] 1211827048
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] This rid is invalid 1211827048 1211827052
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] HTTPB Error 404
    2012-06-22 20:23:13-0400 [HTTPChannel,22,127.0.0.1] 127.0.0.1 - - [23/Jun/2012:00:23:13 +0000] "POST /bosh HTTP/1.1" 404 - "http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5"

    2012-06-22 20:23:23-0400 [XmlStream,client] 
        SID: fb03e4779f4b9a4fe15fbf09d5905f455cc54919 => 
        RECV: '
        <iq type="get" id="180-865" from="codemonkey" to="MySiteadmin@codemonkey/5da9d909-46e0-4dac-8f02-a4113e6490e5">
            <ping xmlns="urn:xmpp:ping"/>
        </iq>'
    2012-06-22 20:23:23-0400 [XmlStream,client]        RETURN HTTPB 1340411003.49:
    2012-06-22 20:23:23-0400 [XmlStream,client] 
        <body xmlns='http://jabber.org/protocol/httpbind'>
            <iq xmlns='jabber:client' from='codemonkey' type='get' id='180-865' to='MySiteadmin@codemonkey/5da9d909-46e0-4dac-8f02-a4113e6490e5'>
                <ping xmlns='urn:xmpp:ping'/>
            </iq>
        </body>
    2012-06-22 20:23:23-0400 [XmlStream,client] 1211827048
    2012-06-22 20:23:23-0400 [XmlStream,client] 127.0.0.1 - - [23/Jun/2012:00:23:23+0000] "POST /bosh HTTP/1.1" 200 223 "http://172.16.160.246/MySite/Viewers/InteractiveView?programGuideId=486" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:27:11.647

事实证明，我对旁遮普的理解是有缺陷的。空`<body xmlns='http://jabber.org/protocol/httpbind'/>`消息实际上并不用于通过 BOSH 连接确认消息。由于 BOSH 使用长轮询技术，客户端使用空的 httpbind 主体初始化连接。服务器在指定的等待时间内保持此连接打开 - 即 60 秒。如果在 60 秒标记之前没有收到任何消息，服务器会通过响应一个空的 httpbind 正文来关闭连接，并且客户端会通过向服务器发送另一个空正文来重新打开一个新的连接。

我的问题源于我在 C# 中使用 MatriX 库初始化预绑定连接。连接保持打开的默认*等待*时间为 300 秒。因此，它会建立与旁遮普语的连接以在 300 秒后关闭连接。但是，strophe 的默认*等待*时间是 60 秒。当我使用 strophe 连接到现有的 MatriX 连接时，strophe 变得混乱，因为旁遮普语没有像预期的那样在 60 秒内释放连接。

**解决方法是将 strophe 等待时间更改为 300 秒以匹配 MatriX 设置条件。**

# python - 将 unicode 字符串转换为字节字符串

> ID：11174790
> 
> 赞同：11
> 
> 时间：2012-06-24T03:42:37.130
> 
> 标签：python, unicode

我从一个表示为 的函数中得到一个字符串`u'\xd0\xbc\xd0\xb0\xd1\x80\xd0\xba\xd0\xb0'`，但要处理它，我需要它是字节串（如`'\xd0\xbc\xd0\xb0\xd1\x80\xd0\xba\xd0\xb0'`）。

如何在不更改的情况下转换它？

到目前为止，我最好的猜测是 take `s.encode('unicode_escape')`，它将`'\\xd0\\xbc\\xd0\\xb0\\xd1\\x80\\xd0\\xba\\xd0\\xb0'`每 5 个字符返回并处理一次，以便 '\xd0' 成为一个表示为 '\xd0' 的字符。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-24T03:46:26.023

ISO 8859-1（又名 Latin-1）将前 256 个 Unicode 代码点映射到它们的字节值。

```
>>> u'\xd0\xbc\xd0\xb0\xd1\x80\xd0\xba\xd0\xb0'.encode('latin-1')
'\xd0\xbc\xd0\xb0\xd1\x80\xd0\xba\xd0\xb0' 
```

# web-services - 使用手机号码的手机定位器？

> ID：11174794
> 
> 赞同：0
> 
> 时间：2012-06-24T03:44:07.230
> 
> 标签：web-services, algorithm, mobile, gps

我想知道是否可以使用手机号码获取手机的当前位置。你能建议我任何算法吗？我想创建一个网络服务并将其与谷歌地图集成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:37:18.317

不，这是不可能的。出于明显的隐私原因，即使对于运营商而言，也无法获取电话号码引用的任意设备的基于 GPS 的坐标。

您需要设备上的软件来报告位置。此时，您不妨使用一些预先存在的软件，例如 Google Latitude（适用于 Android）。有很多解决方案。

# php - 如何制作 Word 和 PowerPoint 文件的查看器

> ID：11174797
> 
> 赞同：0
> 
> 时间：2012-06-24T03:44:51.373
> 
> 标签：php, ms-word, ms-office, powerpoint

我正在尝试用 PHP 制作 PPT 和 DOC 的查看器。嵌入式查看器是一种选择，但这不是我想要的。我需要帮助找到任何可以帮助我这样做的库。我希望查看者能够根据我提供给他的链接来显示演示文稿/文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T03:49:40.923

嗯 PHP 无法向浏览器显示 PDF 文件。但是，您可以从 PDF 文件中提取数据，然后使用您想要的任何格式重新构建它。

看看[http://php.net/manual/en/book.pdf.php](http://php.net/manual/en/book.pdf.php)

# mysql - 在 Wordpress 中解析外部表参数

> ID：11174798
> 
> 赞同：1
> 
> 时间：2012-06-24T03:45:16.070
> 
> 标签：mysql, wordpress

我有一个客户项目，其帖子分配给他们的原籍国。

客户希望能够按大洲或地区搜索帖子。

我有一个单独的表，将每个国家/地区分配给其各自的区域，并且我有使用结果数组的 WP 查询：

```
$country_names = array('England','France','Germany',...); // this would be the result from fetching countries associated with a region.
$args = array(
    'posts_per_page' => -1,
    'meta_query' => array(
        array(
            'key' => 'country',
            'value' => $country_names,
            'compare' => 'IN'
        )
    )
);
$query = new WP_Query( $args ); 
```

我遇到的麻烦是中间的部分。通常，我会使用一些标准的 PHP/MySQL 来制作数组：

```
<?php

//Process incoming variable
if(!empty($_REQUEST['region'])){
 $region = $_REQUEST['region'];
 } else {
 $region = NULL;
 }

// Make a MySQL Connection
$query = "SELECT * FROM regions WHERE region='$region'"; 

$result = mysql_query($query) or die(mysql_error());

$row = mysql_fetch_array($result) or die(mysql_error());
echo $row['country'];
?> 
```

但是，我无法让它在 WP 模板中工作，因为 WP 使用自己的内部函数管理传入的变量。

谁能帮我把两者联系起来？我确定我在这里忽略了一些简单的步骤，否则我没有使用一些内置的 WP 功能。

任何帮助表示赞赏。

谢谢！

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:40:53.323

将此添加到您的`functions.php`

```
add_filter( 'query_vars', 'addnew_query_vars', 10, 1 );
function addnew_query_vars($vars)
{   
    $vars[] = 'region'; // region is the variable you want to add       
    $vars[] = 'anotherVar'; 
    return $vars;
} 
```

然后得到它

```
$region=get_query_var('region') 
```

**更新**

```
$regions = $wpdb->get_results("SELECT ".$region." FROM `".$wpdb->regions."`");
if($regions)
{
    foreach($regions as $region)
    {
        // your code
    }
} 
```

# java - 阅读 托管 bean 中的标记文本

> ID：11174799
> 
> 赞同：0
> 
> 时间：2012-06-24T03:45:41.000
> 
> 标签：java, html, jsf, facelets, managed-bean

好吧，我猜标题总结了它，我有一个链接到`Facelets`页面的托管 bean，我想将普通元素中的文本读`html <p>`入托管 bean 或将其发送给它。

我有这个

标签是用 JavaScript 动态创建的，所以我不能使用 JSF 元素。

例子

```
<p> text text </p> 
```

可能吗 ？我需要它，因为 ia 有很多`Html`我想在其中使用文本的普通元素（正常意味着不是 facelets 或任何 java 标签）。

编辑：现在我使用了javascript方法，但是它在bean端一直返回null，就像根本没有设置值一样。

[Backing Bean 没有获取 javascript 发送的值，](https://stackoverflow.com/questions/11182875/backing-bean-not-getting-values-sent-by-javascript/11183047#comment14675075_11183047)这个线程现在的所有数据都有问题。

# php - 如何使用 preg_replace_callback？

> ID：11174807
> 
> 赞同：42
> 
> 时间：2012-06-24T03:46:47.800
> 
> 标签：php, preg-replace, preg-replace-callback

我有以下 HTML 语句

```
[otsection]Wallpapers[/otsection]
WALLPAPERS GO HERE

[otsection]Videos[/otsection]
VIDEOS GO HERE 
```

我想要做的是用 html div 替换 [otsection] 标签。问题是我想从 1->2->3 等增加 div 的 id。

所以例如，上面的语句应该翻译成

```
<div class="otsection" id="1">Wallpapers</div>
WALLPAPERS GO HERE

<div class="otsection" id="2">Videos</div>
VIDEOS GO HERE 
```

据我所知，最好的方法是通过 preg_replace_callback 在每次替换之间增加 id 变量。但经过 1 小时的工作后，我无法让它工作。

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-24T03:49:35.323

使用以下内容：

```
$out = preg_replace_callback(
    "(\[otsection\](.*?)\[/otsection\])is",
    function($m) {
        static $id = 0;
        $id++;
        return "<div class=\"otsection\" id=\"ots".$id."\">".$m[1]."</div>";
    },
    $in); 
```

特别要注意我使用了一个`static`变量。此变量在对函数的调用中保持不变，这意味着每次调用函数时都会递增，每次匹配都会发生这种情况。

另外，请注意，我`ots`在 ID 前面加上了前缀。元素 ID 不应以数字开头。

* * *

对于 5.3 之前的 PHP：

```
$out = preg_replace_callback(
    "(\[otsection\](.*?)\[/otsection\])is",
    create_function('$m','
        static $id = 0;
        $id++;
        return "<div class=\"otsection\" id=\"ots".$id."\">".$m[1]."</div>";
    '),
    $in); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-02-07T15:02:45.037

> **注意**：以下内容旨在作为一般性答案，并不试图解决 OP 的特定问题，因为它之前已经[解决过](https://stackoverflow.com/a/11174818/1438393)。

**是什么[`preg_replace_callback()`](http://php.net/preg_replace_callback)**？

此函数用于执行正则表达式搜索和替换。它类似于[`str_replace()`](http://php.net/str_replace)，但不是纯字符串，而是搜索用户定义的正则表达式模式，然后将回调函数应用于匹配的项目。如果找到匹配项，该函数返回修改后的字符串，否则返回未修改的字符串。

**我应该什么时候使用它？**

`preg_replace_callback()`与 -非常相似[`preg_replace()`](http://php.net/preg_replace)- 唯一的区别是不是为第二个参数指定替换字符串，而是指定一个`callback`函数。

`preg_replace()`当您想要进行简单的正则表达式搜索和替换时使用。`preg_replace_callback()`当您想要做的不仅仅是替换时使用。请参阅下面的示例以了解其工作原理。

**如何使用它？**

下面是一个例子来说明函数的用法。在这里，我们尝试将日期字符串从`YYYY-MM-DD`格式转换为`DD-MM-YYYY`.

```
// our date string
$string  = '2014-02-22';

// search pattern
$pattern = '~(\d{4})-(\d{2})-(\d{2})~';

// the function call
$result = preg_replace_callback($pattern, 'callback', $string);

// the callback function
function callback ($matches) {
    print_r($matches);
    return $matches[3].'-'.$matches[2].'-'.$matches[1];
}

echo $result; 
```

在这里，我们的正则表达式模式搜索格式的日期字符串，`NNNN-NN-NN`其中`N`可以是范围从`0`-的数字`9`（`\d`是字符类的简写表示`[0-9]`）。回调函数将被调用并传递给定字符串中匹配元素的数组。

最终结果将是：

```
22-02-2014 
```

**注意：**以上示例仅用于说明目的。您**不应该**使用来解析日期。使用[`DateTime::createFromFormat()`](http://www.php.net/manual/en/datetime.createfromformat.php)and[`DateTime::format()`](http://php.net/manual/en/datetime.format.php)代替。[这个问题](https://stackoverflow.com/questions/2167916/convert-one-date-format-into-another-in-php)有更多细节。

# java - PlayN mp3 支持 UnsupportedAudioFileException

> ID：11174813
> 
> 赞同：1
> 
> 时间：2012-06-24T03:47:54.753
> 
> 标签：java, audio, mp3, playn

我已经研究了好几天，想知道如何在没有运气的情况下解决这个问题。PlayN JavaSound 类使用`javax.sound.sampled.AudioSystem`该类播放声音，mp3 格式似乎不支持。

> javax.sound.sampled.UnsupportedAudioFileException：无法从 playn.java.JavaSound.init(JavaSound.java:71) 的 javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1102) 的输入流中获取音频输入流。 ......

我找不到很多关于在 Java 中使用`AudioSystem`类播放 mp3 的信息，所以我被卡住了。似乎有一种在 Java 7 中使用 mp3 播放 mp3 的新方法`javafx.scene.media.MediaPlayer`，但我想知道是否有人知道这个问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:53:22.997

我需要下载一个插件（我认为是这个：[http](http://www.oracle.com/technetwork/java/javase/download-137625.html) ://www.oracle.com/technetwork/java/javase/download-137625.html ）。我不确定是否是这种情况，因为我在没有 Maven 的情况下进行了设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-19T21:47:38.443

我使用此依赖项来设置 mp3spi 库，该库可能适用于您的 mp3 文件：

`compile group: 'com.googlecode.soundlibs', name: 'mp3spi', version: '1.9.5-1'`

# python - cx_Freeze 复制路径

> ID：11174819
> 
> 赞同：3
> 
> 时间：2012-06-24T03:49:39.007
> 
> 标签：python, cx-freeze

我正在使用 cx_Freeze 为我的 PyQt 应用程序生成 Windows 二进制文件。但是生成的二进制安装程序似乎仍然包含对我机器上文件的引用。（生成二进制文件的那个）。所以我无法将生成的安装程序分发到其他机器。当程序在另一台机器上启动时，它似乎会寻找只存在于我的机器上的路径。

我的 setup.py 看起来像这样：

```
import sys
from cx_Freeze import setup, Executable

    """ To build on windows: python.exe setup.py bdist_msi """

    base = None
    if sys.platform == "win32":
        base = "Win32GUI"

    setup( name = "Checkout",
           version = "0.1",
           description = "",
           options = {"build_exe" : {"includes": "atexit"}},
           executables = [Executable("checkout.py", base=base)]) 
```

# objective-c - 为什么我的自定义委托方法没有收到调用？

> ID：11174820
> 
> 赞同：0
> 
> 时间：2012-06-24T03:49:39.797
> 
> 标签：objective-c, delegates, protocols

我想从 HelloWorldLayer 发送消息，并在 ScoreLayer 中接收它，以便更新标签。`CCLOG(@"///addNewScore");`工作正常，但是在`updateScore`ScoreLayer 中，没有接到电话，你知道为什么吗？这是我的代码：（编辑：我尝试在@property 中使用“retain”，但没有任何改变）：

```
@interface HelloWorldLayer : CCLayer
{
    //...
    id<ScoreDelegate>delegate;
}

@property (nonatomic,retain) id <ScoreDelegate> delegate;

@implementation HelloWorldLayer
@synthesize delegate;
//...
-(void)addNewScore:(int)num{
    CCLOG(@"///addNewScore");//works fine
    [delegate updateScore:num];
}

#import <Foundation/Foundation.h>

@protocol ScoreDelegate
-(void)updateScore:(int)num;
@end

@interface ScoreLayer : CCLayer <ScoreDelegate>{
    //...
}

-(void)updateScore:(int)num{
    CCLOG(@"hello");//DOES NOT WORK
}

@end 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:55:38.143

我怀疑 ScoreLayer 是在您致电之前发布的。我不太熟悉`assign`，我只写过ARC Objective-C；但我认为它与弱（对于代表应该是）大致相同。这意味着为了使该指针有效，应用程序中的其他人需要“拥有” ScoreLayer。

现在，话虽如此，我只假设您首先正确连接了两个对象。没有发布的代码表明这一点，但是可能发布的 ScoreLayer 的问题非常重要，无论哪种方式都必须牢记。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-24T03:55:38.363

您可以在`HelloWorldLayer`. 然后，您将委托方法放入`ScoreLayer.m`：

```
-(void)updateScore:(int)num {
    // Do something
} 
```

现在的方式是，您在错误的类中声明了协议。

# regex - 如何取长正则表达式的反面？

> ID：11174823
> 
> 赞同：0
> 
> 时间：2012-06-24T03:50:07.010
> 
> 标签：regex

我知道 [^9] 和 [^1-9] 在正则表达式中是允许的，但我在编译相反的情况时遇到了麻烦：

`^(<\?php[\w\W]*\?>/);`

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T03:55:42.357

如果您使用与 perl 兼容的正则表达式语法（您可能是，尽管您没有指定您的平台），该`(?!)`构造可以做到这一点。也就是说，“a(?!b)”将匹配“ac”，但不匹配“ab”。

# c# - 来自字节数组的 Unicode 中的加密文本似乎包含无效字符

> ID：11174828
> 
> 赞同：2
> 
> 时间：2012-06-24T03:51:08.067
> 
> 标签：c#, encryption, unicode, character-encoding, textview

我的加密应用程序（用 C# 和 GTK# 编写并使用 Rijndeal）从 textview 中获取一个字符串进行加密，并以字节数组的形式返回结果。然后我使用 Encoding.Unicode.GetString() 将其转换为字符串，但我的输出看起来不正确，它似乎包含无效字符：`zźr[���ā�֖�Z�_���� 嗯……

我假设 textview 的编码不是 Unicode，但 ASCII 也不起作用。如何确保输出不无效？还是我的方法一开始就错了？

我是 C# 的新手，一般编程方面的经验不是很丰富（我在 PHP 方面有不错的技能，并且知道一点 JavaScript，但仅此而已）所以如果你能简化你的答案，那将不胜感激。

预先感谢您抽出宝贵时间为我提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T03:56:27.710

虽然每个字符串都可以使用 UTF-16 表示为一个字节序列，但并不是每个字节序列都表示一个 UTF-16 编码的字符串。特别是如果字节序列是加密过程的结果。

您可以使用[Convert.ToBase64String 方法](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)将字节序列转换为[Base64](http://en.wikipedia.org/wiki/Base64)字符串。

# css - 如何使用 Div 相对高度 100%？

> ID：11174830
> 
> 赞同：0
> 
> 时间：2012-06-24T03:51:42.807
> 
> 标签：css, html, web, height

我是网站设计的初学者。我想要一个动态的内容高度。所以我做这样的事情：

```
<div style="position:relative;width:100%;height:100%;" id="content">
    ....
</div>

<div style="position:relative;width:2000px;height:498px;">
    <?php include('footer.php'); ?>
</div> 
```

但是页脚的 div 不检测内容的高度。我应该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:37:00.120

您可以使用 JQuery 将高度传递给元素

```
$(document).ready(function() {
var hgt = $(window).height();
$("#content").css({"height" : hgt });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:57:44.053

嘿，使用这个链接来对齐你的 CSS。改变 Ryan Fait 所说的。

[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

你可以在这里找到 CSS，

[http://ryanfait.com/sticky-footer/layout.cs](http://ryanfait.com/sticky-footer/layout.css) _

这是你如何使用它，

[http://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T04:14:31.820

我不知道使用 css 来做这件事，而且我认为 css 不会检测到屏幕或其他东西的死亡。

```
$(document).ready(function() {
var sch=screen.height;
d = document.getElementById('content');
d.style.height=screen.height;
}); 
```

这应该有效。使用 jQuery

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T04:02:54.163

您已将内容的高度定义为 100%，这可能就是为什么它不会检测到内容的高度，因为内容会尝试适应 100% 的高度

尝试使用

```
<div style="position:absolute;bottom:0px;width:2000px;height:498px;"> 
```

# ruby-on-rails - 语法错误，意外的keyword_class，需要keyword_do 或'{' 或'('

> ID：11174831
> 
> 赞同：0
> 
> 时间：2012-06-24T03:52:06.853
> 
> 标签：ruby-on-rails

我越来越

```
$ syntax error, unexpected keyword_class, expecting keyword_do or '{' or '(' 
```

在这一行

```
$ %li = link_to 'Features', features_path class => ('active' if params[:action] == 'features')%li 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T04:36:14.063

```
%li = link_to 'Features', features_path, :class => ('active' if params[:action] == 'features') 
```

*   删除尾随`%li`.
*   我还把类变成了一个符号，并在它前面加了一个逗号。

**编辑：**

要将类添加到`%li`标签中，请尝试以下操作：

```
%li{:class => (params[:action] == 'features' ? 'active' : nil)}
  = link_to 'Features', features_path 
```

# html - 嵌入 YouTube 视频？

> ID：11174833
> 
> 赞同：0
> 
> 时间：2012-06-24T03:53:00.687
> 
> 标签：html, youtube, embed

我一直在寻找一种将 youtube 视频嵌入我的网站的方法。该网站由 html 制成，并且 youtube 视频应该自动更新，因为我想显示当前帐户中的所有视频？我知道嵌入一个视频或播放列表的方法，但我不太确定如何将所有内容嵌入用户频道？有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:01:25.960

只需使用以下作为`src`an `iframe`：

```
http://www.youtube.com/embed/?listType=user_uploads&list=*USERNAME* 
```

例如：

```
<iframe id="ytplayer" width="640" height="360"
src="http://www.youtube.com/embed/?listType=user_uploads&list=apple"
frameborder="0" allowfullscreen> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:03:10.577

您可以在此链接上获取有关播放器参数的信息：[https ://developers.google.com/youtube/player_parameters#Manual_IFrame_Embeds](https://developers.google.com/youtube/player_parameters#Manual_IFrame_Embeds)

滚动一点，您将看到用户视频的 url。

# ldap - 将“memberOf”属性添加到 ApacheDS

> ID：11174835
> 
> 赞同：7
> 
> 时间：2012-06-24T03:53:47.190
> 
> 标签：ldap, apacheds

我正在尝试在 Apache Directory 中模拟 Active Directory 的 memberOf 属性。我已将 memberOf 的以下条目添加到我的 LDIF 文件中：

```
dn: m-oid=1.3.6.1.4.1.18060.0.4.3.2.1,ou=attributeTypes,cn=other,ou=schema
m-usage: USER_APPLICATIONS
m-equality: distinguishedNameMatch
objectClass: metaAttributeType
objectClass: metaTop
objectClass: top
m-name: memberOf
m-oid: 1.3.6.1.4.1.18060.0.4.3.2.1
m-obsolete: FALSE
m-noUserModification: FALSE
m-syntax: 1.3.6.1.4.1.1466.115.121.1.27 
```

当我启动 ApacheDS 时，会记录以下警告：

```
 WARN  [ContainerBackgroundProcessor[StandardEngine[Catalina]]] entry.ServerStringValue - Cannot normalize the value :Encountered name based id of memberOf which was not found in the OID registry 
```

这会导致稍后出现问题，因为我的应用程序尝试将 memberOf 属性用作搜索过滤器。

我指定 LDIF 条目的方式有什么问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-12-28T23:35:48.873

对于嵌入式 Apache Directory Server 之上的集成测试用例，我添加了在 Microsoft Active Directory 服务器中定义的**memberOf**和**sAMAccountName**属性。

```
#########################################################
# MICROSOFT SCHEMA for sAMAccountName and memberOf
# these two attributes are not defined in Apache Directory Server
#########################################################

dn: cn=microsoft, ou=schema
objectclass: metaSchema
objectclass: top
cn: microsoft

dn: ou=attributetypes, cn=microsoft, ou=schema
objectclass: organizationalUnit
objectclass: top
ou: attributetypes

dn: m-oid=1.2.840.113556.1.4.221, ou=attributetypes, cn=microsoft, ou=schema
objectclass: metaAttributeType
objectclass: metaTop
objectclass: top
m-oid: 1.2.840.113556.1.4.221
m-name: sAMAccountName
m-equality: caseIgnoreMatch
m-syntax: 1.3.6.1.4.1.1466.115.121.1.15
m-singleValue: TRUE

dn: m-oid=1.2.840.113556.1.4.222, ou=attributetypes, cn=microsoft, ou=schema
objectclass: metaAttributeType
objectclass: metaTop
objectclass: top
m-oid: 1.2.840.113556.1.4.222
m-name: memberOf
m-equality: caseIgnoreMatch
m-syntax: 1.3.6.1.4.1.1466.115.121.1.15
m-singleValue: FALSE

dn: ou=objectclasses, cn=microsoft, ou=schema
objectclass: organizationalUnit
objectclass: top
ou: objectClasses

dn: m-oid=1.2.840.113556.1.5.6, ou=objectclasses, cn=microsoft, ou=schema
objectclass: metaObjectClass
objectclass: metaTop
objectclass: top
m-oid: 1.2.840.113556.1.5.6
m-name: simulatedMicrosoftSecurityPrincipal
m-supObjectClass: top
m-typeObjectClass: AUXILIARY
m-must: sAMAccountName
m-may: memberOf

#######################################################
# Megacorp employees
#######################################################

dn: cn=EmployeeABC,ou=nl_users,DC=corp,DC=megacorp,DC=COM
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectclass: simulatedMicrosoftSecurityPrincipal
cn: EmployeeABC
sn: EmployeeABC
givenName: EmployeeABC
mail: EmployeeABC@megacorp.com
MEMBEROF: CN=just-users,OU=mc_groups,DC=corp,DC=megacorp,DC=com
MEMBEROF: CN=best-users,OU=mc_groups,DC=corp,DC=megacorp,DC=com
SAMACCOUNTNAME: employeeabc 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-20T17:18:51.940

ApacheDS 团队意识到对`memberOf` *虚拟*属性的需求。他们提到它将成为[2.1.0 版本](http://mail-archives.apache.org/mod_mbox/directory-users/201305.mbox/%3C519A54B1.5070200@gmail.com%3E)的一部分：

> 2013 年 5 月 20 日下午 5:53，Danielsen，Jay a écrit：
> 
> > 我从 2013 年 1 月的档案中看到，尚不支持 memberOf 虚拟属性。在即将发布的版本中是否有任何计划或正在进行的工作来支持 memberOf？最肯定的是在 2.1.0 中。
> 
> 我们目前正忙于在 2.0.0-RC1 发布之前清理剩余的 150 个问题，所以我认为这是我们可以在未来 6 个月内完成的事情。
> 
> 您可以创建 JIRA 来请求此类功能。
> 
> 谢谢 ！
> 
> -- 问候，Cordialement，Emmanuel Lécharny www.iktek.com

这是 JIRA 请求[。](https://issues.apache.org/jira/browse/DIRSERVER-1844)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T08:21:55.960

You may need to add the schema that contains 'memberOf' into the ApacheDS configuration.

# sql-server - C#.net 控制台应用程序 SQLCommand.CommandTimeOut 属性不起作用

> ID：11174837
> 
> 赞同：1
> 
> 时间：2012-06-24T03:55:19.020
> 
> 标签：sql-server, c#-4.0, console-application, connection-timeout

我有一个用 C# 4.0 编写的控制台应用程序。我正在运行一个有时需要很长时间的 SQL 存储过程，并且会引发连接超时异常。

为了处理它，我首先在 web.config 文件的连接字符串中将 Timeout 设置为 360，但没有运气。

然后我尝试了：

```
SQLCommand cmd = new SQLCommand();
 cmd.CommandTimeout = 360; 
```

但这也行不通。

任何帮助将不胜感激。我尝试对 Entity Framework 4.0 做同样的事情，但遇到了同样的问题。我提供的超时值没有被应用！

```
<add name="ConnectionString" connectionString="SERVER=db.mydomain.com;DATABASE=DatabaseName;UID=userID;PWD=Password;Connect Timeout=360;Packet Size=8192;Pooling=True;Min Pool Size=1;Max Pool Size=1000;MultipleActiveResultSets=True" providerName="System.Data.SqlClient" /> 
```

例外：

```
Timeout expired: The timeout period elapsed prior to completion of the operation or the server is not responding. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:35:43.470

在您的代码中设置`CommandTimeout = 0`并将其从配置文件中删除。

设置`Timeout = 0`方法，在长时间运行的情况下也能完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:05:15.570

你的文件`context connection=true`中有连接字符串`Web.config`吗？根据[MSDN](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.DATA.SQLCLIENT.SQLCOMMAND.COMMANDTIMEOUT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)：

> 对上下文连接执行命令时，CommandTimeout 无效

# ruby-on-rails - Ruby on rails wkhtmltopdf css 样式表不在生产（Linux）服务器上呈现

> ID：11174849
> 
> 赞同：3
> 
> 时间：2012-06-24T03:56:57.763
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, wkhtmltopdf

在本地开发环境(windows) pdf 中成功生成了 Css 样式。但是在托管 linux 服务器环境中生成的 pdf 没有应用 css 样式。下面是我的 wkhtmltopdf (WickedPdf) 配置

```
WickedPdf.config = {
#:wkhtmltopdf => "#{RAILS_ROOT}/pdfbin/wkhtmltopdf-amd64",
:exe_path => "/home/software/.gems/bin/wkhtmltopdf",
:layout => "layouts/pdf.html.erb",
:margin => {    :top=> 40,
                :bottom => 20,
                :left=> 30,
                :right => 30},
:header => {:html => { :template=> 'layouts/pdf_header.html.erb'}},
:footer => {:html => { :template=> 'layouts/pdf_footer.html.erb'}}
#:exe_path => '/usr/bin/wkhtmltopdf' 
```

}

**更多信息：**

这是我的目录结构，我在 linux rails 托管 app\views\layouts 上，在布局内我有 pdf.html.erb 、 pdf_footer.html.erb 、 pdf_header.html.erb 上面的东西在我的本地 Windows 开发环境中完美运行，但在生产中生成的 pdf 没有样式。所以请大家帮我制作带有 CSS 样式的 pdf

**应用程序/视图/布局/pdf.html.erb**

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir="<%= (rtl?) ? 'rtl' : 'ltr' %>">
  <head>
    <% @direction = (rtl?) ? 'rtl/' : '' %>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
    <%= stylesheet_link_tag([@direction+'application', @direction+'_styles/ui.all'])%>
    <%= stylesheet_link_tag(*get_stylesheets) %>
    <%= stylesheet_link_tag  @direction+"_layouts/pdf" %>
    <link rel="stylesheet" type="text/css" href="<%="#{RAILS_ROOT}/public/stylesheets/#{@direction}_layouts/pdf.css" %>" media="all" />
    <link rel="stylesheet" type="text/css" href="<%="#{RAILS_ROOT}/public/stylesheets/#{get_stylesheets}.css"%>" media="all" />
    <link rel="stylesheet" type="text/css" href="<%= "#{RAILS_ROOT}/public/stylesheets/#{@direction}_styles/ui.all.css"%>" media="all" />

  </head>
  <body>

    <%= yield %>

  </body>
</html> 
```

**pdf.html.erb 包含用于呈现 pdf 的所有样式信息，在托管环境中，这些样式不是由 wkhtmltopdf 获取的。所以请大家帮帮我**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:36:27.420

当我在 Heroku 上部署我的应用程序时，我遇到了与 PDFKit 类似的问题。现在，它工作正常（我已将二进制文件包含到项目中）。

在我的布局中：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Page title</title>
  <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <%= csrf_meta_tags %>
  <style type="text/css" media="all">
    <%= Rails.application.assets['my_css'].to_s.gsub(/\/assets/,"#{root_url}assets") %>
  </style>
</head>
<body>
  <%= yield %>
</body>
</html> 
```

在初始化器中：

```
# config/initializers/pdfkit.rb
PDFKit.configure do |config|
  if Rails.env.staging? || Rails.env.production?
    config.wkhtmltopdf = Rails.root.join('bin', 'wkhtmltopdf-amd64').to_s
  else
    config.wkhtmltopdf = '/Users/my_user_name/.rvm/gems/ruby-1.9.2-p0@my_project/bin/wkhtmltopdf'
  end
  config.default_options = {
    :page_size => 'A4',
    :margin_top => '0in',
    :margin_right => '0in',
    :margin_bottom => '0in',
    :margin_left => '0in',
    :orientation => 'Portrait'
  }
  # Use only if your external hostname is unavailable on the server.
  config.root_url = "http://localhost:3000" unless Rails.env.staging? || Rails.env.production?
end 
```

也许这可以帮助你......或其他人......

# java - 如何使用 zip4j 提取具有密码保护的 zip 文件

> ID：11174851
> 
> 赞同：16
> 
> 时间：2012-06-24T03:58:05.880
> 
> 标签：java, passwords, unzip

我正在尝试解压缩具有密码保护的 zip 文件。我知道有一个名为“zip4j”的 java 库可以帮助我。但是我无法打开 zip4j 网站来查看教程。

我已经用另一个镜像下载了 zip4j 库，但我不知道如何使用它。有没有人可以粘贴使用 zip4j 解压缩密码保护 zip 文件的示例代码？

[zip4j 网站](http://www.lingala.net)

非常感谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-24T08:25:01.857

尝试以下操作并确保您使用的是最新的 Zip4j 库 (1.3.1)：

```
String source = "folder/source.zip";
String destination = "folder/source/";
String password = "password";

try {
    ZipFile zipFile = new ZipFile(source);
    if (zipFile.isEncrypted()) {
        zipFile.setPassword(password);
    }
    zipFile.extractAll(destination);
} catch (ZipException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-29T06:00:38.827

在这里，我们在安卓手机的下载文件夹中有一个文件 game.zip，我们使用下面给出的密码解压它：

```
String unzipFileAddress = Environment.DIRECTORY_DOWNLOADS "/Game.zip";
String filePassword = "2222"; // password of the file
String destinationAddress = Environment.DIRECTORY_DOWNLOADS + "/Game";

ZipFile zipFile = new ZipFile(unzipFileAddress, filePassword.toCharArray());

try {
     zipFile.extractAll(destinationAddress);
} catch (Exception e) {
  // if crashes print the message or Toast
} 
```

在构建 Gradle（应用程序级别）之前添加依赖项

```
dependencies{
 implementation 'net.lingala.zip4j:zip4j:2.6.4'
} // for lastest version check the link below 
```

确保您有存储权限，这些愚蠢的错误可能会占用您宝贵的时间

```
// Add in AndroidManifest.xml
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

通过手动解压缩，确保您的 zip 文件不是损坏的文件。

如果你想做一些复杂的压缩工作，你应该从这里获得帮助：[https ://github.com/srikanth-lingala/zip4j](https://github.com/srikanth-lingala/zip4j)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-06T07:50:04.463

# [使用zip4j](https://github.com/srikanth-lingala/zip4j)压缩/解压缩文件夹/文件的完整实现

* * *

[将此依赖项](https://mvnrepository.com/artifact/net.lingala.zip4j/zip4j/2.9.0)添加到您的构建管理器。[或者，从此处](https://mvnrepository.com/artifact/net.lingala.zip4j/zip4j)下载最新的 JAR 文件并将[其添加](https://www.geeksforgeeks.org/how-to-add-jar-file-to-classpath-in-java/)到您的项目构建路径中。`class`波纹管可以压缩和提取任何带有或不带有密码保护的文件或文件夹-

```
import java.io.File;
import net.lingala.zip4j.model.ZipParameters;
import net.lingala.zip4j.util.Zip4jConstants;
import net.lingala.zip4j.core.ZipFile;  

public class Compressor {
    public static void zip (String targetPath, String destinationFilePath, String password) {
        try {
            ZipParameters parameters = new ZipParameters();
            parameters.setCompressionMethod(Zip4jConstants.COMP_DEFLATE);
            parameters.setCompressionLevel(Zip4jConstants.DEFLATE_LEVEL_NORMAL);

            if (password.length() > 0) {
                parameters.setEncryptFiles(true);
                parameters.setEncryptionMethod(Zip4jConstants.ENC_METHOD_AES);
                parameters.setAesKeyStrength(Zip4jConstants.AES_STRENGTH_256);
                parameters.setPassword(password);
            }

            ZipFile zipFile = new ZipFile(destinationFilePath);

            File targetFile = new File(targetPath);
            if (targetFile.isFile()) {
                zipFile.addFile(targetFile, parameters);
            } else if (targetFile.isDirectory()) {
                zipFile.addFolder(targetFile, parameters);
            } else {
                //neither file nor directory; can be symlink, shortcut, socket, etc.
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void unzip(String targetZipFilePath, String destinationFolderPath, String password) {
        try {
            ZipFile zipFile = new ZipFile(targetZipFilePath);
            if (zipFile.isEncrypted()) {
                zipFile.setPassword(password);
            }
            zipFile.extractAll(destinationFolderPath);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**/ /// for test
    public static void main(String[] args) {

        String targetPath = "target\\file\\or\\folder\\path";
        String zipFilePath = "zip\\file\\Path"; 
        String unzippedFolderPath = "destination\\folder\\path";
        String password = "your_password"; // keep it EMPTY<""> for applying no password protection

        Compressor.zip(targetPath, zipFilePath, password);
        Compressor.unzip(zipFilePath, unzippedFolderPath, password);
    }/**/
} 
```

* * *

更详细的用法见[这里](https://github.com/srikanth-lingala/zip4j#usage)。

如果您使用的是 android，请确保您已在清单文件中添加存储权限。

# objective-c - 如何以编程方式为 UIButton 设置回调？

> ID：11174858
> 
> 赞同：0
> 
> 时间：2012-06-24T04:00:13.353
> 
> 标签：objective-c, cocoa-touch

手动构建：

```
[btnRun addTarget:self action:@selector(RunApp:) forControlEvents:UIControlEventTouchUpOutside]; 
```

* * *

以编程方式构建：类似于以下内容？？

```
- (void) setRunButton:(UIButton*)objectName mySelector:(NSString*)funcName myControlEvent:(NSString*) controlEvent
{
    [objectName addTarget:self action:@selector(funcName) forControlEvents:controlEvent];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T04:10:00.060

我认为您需要以下内容：

```
- (void)setRunButton:(UIButton *)objectName mySelector:(NSString *)action myControlEvent:(UIControlEvents)controlEvent {

   [objectName addTarget:self action:NSSelectorFromString(action) forControlEvents:controlEvent];

} 
```

将选择器作为 an 传递是不常见的，`NSString`但您可以使用`NSSelectorFromString()`将选择器的字符串名称转换为选择器。

控制事件参数不是字符串，它们是枚举，因此我已将`myControlEvent`参数更改为具有`UIControlEvents`类型。

将选择器传递给使用`@selector(action)`. 但是，`@selector`在编译时处理，因此参数实际上不是`NSString`. 在这种情况下，该方法如下所示：

```
- (void)setRunButton:(UIButton *)objectName mySelector:(SEL)action myControlEvent:(UIControlEvents)controlEvent {

   [objectName addTarget:self action:action forControlEvents:controlEvent];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T04:07:27.780

将整个选择器作为参数传递

```
- (void) setRunButton:(UIButton*)objectName mySelector:(SEL)action myControlEvent:(NSString*) controlEvent
{
    [objectName addTarget:self action:action forControlEvents:controlEvent];
} 
```

# objective-c - 将对象设置为 nil 时不调用 dealloc 方法

> ID：11174860
> 
> 赞同：3
> 
> 时间：2012-06-24T04:00:39.353
> 
> 标签：objective-c, ios

我有个问题。

我首先创建了一个扩展 NSObject 的对象，我为 description 和 dealloc 方法提供了覆盖。这是我的 Employee.m 文件：

```
@implementation Employee
.....

-(NSString *)description
{
    return [NSString stringWithFormat:@"Employ ID: %d has $%d value of assets", [self     employeeID], [self valueOfAssets]];
}

-(void)dealloc
{   
    NSLog(@"deallocating.. %@", self);
    [super dealloc];
} 
```

在我的 main.m 中，我首先创建了一个 NSMutableArray 来保存 Employee 对象的列表：

```
NSMutableArray *employees = [[NSMutableArray alloc] init];

for (int i =0; i< 10; i++)
{
    // Create an instance of Employee
    Employee *person = [[Employee alloc] init];

    // Give the instance varaible interesting values
    [person setEmployeeID:i];
    [employees addObject: person];
} 
```

最后我将员工设置为零

```
employees = nil; 
```

我希望`dealloc`调用每个 Employee 对象的方法，我会看到一些日志，例如：

```
deallocating.. Employ ID 0 has value.....
deallocating.. Employ ID 2 has value.....
.... 
```

但是，我没有看到任何日志，并且如果我在`dealloc`方法上设置断点，则断点永远不会被命中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T04:18:29.087

几点观察：

1.  `person = nil`不释放非 ARC 代码中的对象。它将在 ARC 代码中（至少如果它很强大的话）。

2.  在 ARC 中，本地对象会在超出范围时自动为您释放。在非 ARC 中，超出范围的对象不会为您释放（如果您在其他地方没有对这些对象的其他引用，则最终会导致泄漏）。

3.  将项目添加到可变数组将增加项目的保留计数，因此即使您在非 ARC 代码中包含释放，对象也不会被释放，直到保留计数降至零（通过不仅释放将人员对象添加到数组后，还要将它们从数组中删除。

因此，鉴于这是非 ARC 代码，它可能类似于：

```
- (void)testInNonArcCode
{
    NSMutableArray *employees = [[NSMutableArray alloc] init]; // employees retain count = +1

    for (int i =0; i< 10; i++)
    {
        //create an instance of Employee
        Employee *person = [[Employee alloc] init]; // person retain count = +1

        //Give the instance varaible interesting values
        [person setEmployeeID:i];
        [employees addObject: person];  // person retain count = +2
        [person release];  // person retain count = +1 (YOU REALLY WANT TO DO THIS OR ELSE OR NON-ARC PROGRAM WILL LEAK)
        // person = nil;   // this does nothing, except clears the local var that's limited to the for loop scope ... it does nothing to reduce the retain count or improve memory management in non-ARC code, thus I have commented it out
    }

    // do whatever you want

    [employees removeAllObjects]; // this will remove all of the person objects and they will have their respective retain counts reduced to 0, and therefore the Employee objects will be released

    [employees release]; // employees array's own retain count reduced to zero (and will now be dealloced, itself)
} 
```

在 ARC 代码中：

```
- (void)testInArcCode
{
    NSMutableArray *employees = [[NSMutableArray alloc] init]; // employees retain count = +1

    for (int i =0; i< 10; i++)
    {
        //create an instance of Employee
        Employee *person = [[Employee alloc] init]; // person retain count = +1

        //Give the instance varaible interesting values
        [person setEmployeeID:i];
        [employees addObject: person];  // person retain count = +2

        // person = nil;      // this would reduce person retain count to +1 (but unnecessary in ARC because when person falls out of scope, it will have it's retain count automatically reduced)
    }

    // do whatever you want

    [employees removeAllObjects]; // this will remove all of the person objects and they will have their respective retain counts reduced to 0, and therefore will be released

    // [employees release]; // not permitted in ARC
    // employees = nil;     // this would effectively release employees, but again, not needed, because when it falls out of scope, it will be released anyway
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T04:04:28.327

释放对象的正确方法是

```
[employees release]; 
```

将其设置为`nil`不会释放内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T04:06:16.147

由于您被允许调用`[super dealloc]`，我可以假设您没有使用[自动引用计数](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。这意味着你需要明确地将`alloc`你写的每一个都与一个平衡`release`调用配对。对你来说，当你把数组设为 nil 时，你实际上泄露了员工的所有内存。您需要再次循环数组以释放它们，或者更好，因为您正在学习......**尽快开始编写 ARC 代码。**

值得注意的是，ARC 正是为这种情况而创建的。这对我们的大脑来说是有意义的，现在如果你使用最新的工具，它就可以成为现实。

# java - 写入文件一个奇怪类型的对象？在java中

> ID：11174872
> 
> 赞同：-1
> 
> 时间：2012-06-24T04:04:51.357
> 
> 标签：java

我的项目生成的密文是一个由 3 个字段组成的对象：两个字节数组和仿射坐标中椭圆曲线上的一个点。由于这个点类型字段，我不能使用序列化，所以我不能在文件中写入密文。我能做些什么来保存（写入文件或任何其他解决方案）密文，然后能够在解密中使用它（从文件中读取）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:11:47.593

如果您的错误是因为您的 Point 类不可序列化，那么您可能可以通过实现该接口来解决问题，这通常意味着您除此之外什么也不做。默认实现在大多数情况下都有效。

```
 public class MyPoint extends Point implements Serializable {
 ...
 } 
```

然后在您的代码中使用 MyPoint，或者至少在编写文件的部分代码中使用。

但是，如果 Point 不可序列化，则可能是有原因的。如果是这种情况，您必须向 MyPoint 添加实际方法来进行序列化，并且可能还要进行反序列化。

# php - php eval - 奇怪的行为

> ID：11174885
> 
> 赞同：1
> 
> 时间：2012-06-24T04:07:42.293
> 
> 标签：php, eval

如果您不得不猜测以下 php 代码的输出是什么：

```
$str = "011";
eval("\$num = $str;");
echo "number is: ".$num; 
```

我敢打赌你永远不会说“9”。好吧，我也没有……
我很想听听对这种奇怪行为的解释！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T04:09:36.797

以 0 开头的数字表示基数为 8，其中 11 为 9。

还在迷茫吗？阅读：[http ://en.wikipedia.org/wiki/Octal](http://en.wikipedia.org/wiki/Octal)

# jquery - 在推特上关注谁或在脸书上可能认识的人

> ID：11174888
> 
> 赞同：0
> 
> 时间：2012-06-24T04:07:58.093
> 
> 标签：jquery, ajax, facebook, twitter

我想实现类似于 twitter 中的“要关注的人”或 facebook 中的“您可能认识的人”的功能。在哪里提供建议，如果您想在您的网络中添加，只需单击关注或添加朋友链接。

当我们点击关注（或在 FB 中添加朋友）时，该特定建议会从建议列表中消失，并且有新的建议可用。如何实现这个功能。

此外，如果我们单击关闭按钮（右上角），该特定建议就会消失，并且可以使用新建议。如何也实现此功能。

我应该使用什么工具和技术？

我不是在寻找如何获取建议，我想如何实现消失和新的建议获取功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:12:34.363

单击接受或关闭后，获取新建议并为其添加元素：

```
var getNext = function() {
    $.getJSON("suggestion.php", function(data) {
        $("#suggestions").append($("span").hide().text(data.name)).fadeIn();
    });
};
$(".suggestion .accept, .suggestion .close").click(function() {
    $(this).parents(".suggestion").fadeOut();
    getNext();
}) 
```

但是，我的示例不会为新建议添加关闭和接受按钮。

# c++ - 如何在turbo c中运行一个程序从另一个程序创建的exe文件？

> ID：11174891
> 
> 赞同：0
> 
> 时间：2012-06-24T04:08:36.473
> 
> 标签：c++, linker, turbo-c++

我在 dev c++ 编译器中开发了一个程序，文件的名称是`CorrectPrgm.cpp`并且想要运行`CorrectPrgm.exe`由`CorrectPrgm.cpp`文件创建。它是`Le.cpp`在 turbo c++ 3.0 编译器中开发的，我的需要是在运行时`Le.cpp`我想调用/运行`CorrectPrgm.exe`。CorrectPrgm 文件接受来自用户的文件名并生成作为令牌列表的输出。

我试过这样：

```
system("C:\\CorrectPrgm.EXE"); 
```

不工作..任何其他方式打电话...任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:29:23.443

如果您使用的是 Windows Vista 及更高版本，则可能无法运行它，因为我相信这将是一个 16 位 DOS 应用程序。如果它是 32 位 DOS 应用程序（通过 DPMI 保护模式，但不太可能），那么它也可能运行，但那是很久以前的事了，无法记住如何运行。

在 Windows 7 上，您可以安装 Windows XP 模式（实际上是内置的 Virtual PC），然后从那里运行它。XP 仍然支持 16 位应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:27:06.967

我相信您可以使用`exec`or`spawn`功能之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:46:19.423

您可以为要调用的程序创建一个单独的进程。但是你会面临很多问题。首先。`correctPrgm.exe`并将`le.exe`在两个单独的过程中执行。所以你必须考虑进程间通信。我建议的最好的方法是在函数中破坏 CorrectPrgm.exe 源文件并调用您需要的函数。甚至您也可以使用库和头文件来获取这些函数的功能。您还可以创建线程。但是你必须`CorrectPrgm`非常仔细地设计线程（在一个线程中运行）。

# objective-c - ABRecordCopyValue() EXC_BAD_ACCESS 错误

> ID：11174892
> 
> 赞同：3
> 
> 时间：2012-06-24T04:08:56.407
> 
> 标签：objective-c, ios, contacts, abaddressbook

在我的应用程序中，我必须检索用户联系人的某些属性。例如，我需要检索联系人的名字、姓氏、中间名、昵称、组织、职位、部门、生日、电子邮件等。我有一些方法可以检索这些属性，但只有几个工作，即使它们都非常相似。这是我的一种有效方法（名字）和一种无效方法（职位）的代码：

```
+(NSString *)fetchFirstnameForPersonID: (NSUInteger)identifier{

    NSString *firstName;
    ABRecordRef currentPerson = (__bridge ABRecordRef)[[PSAddressBook arrayOfContacts] objectAtIndex:identifier];

    //If the first name property exists
    if ((__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonFirstNameProperty) != NULL){

        firstName = (__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonFirstNameProperty);        
    }    
    //If the first name property does not exist
    else{
        firstName = @"NULL";
    }
    return firstName;    
}

+(NSString *)fetchJobTitleForPersonID: (NSUInteger)identifier{

    NSString *jobTitle;
    ABRecordRef currentPerson = (__bridge ABRecordRef)[[PSAddressBook arrayOfContacts] objectAtIndex:identifier];

    if ((__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonJobTitleProperty) != NULL){

        jobTitle = (__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonJobTitleProperty);        
    }    
    else{

        jobTitle = @"NULL";
    }
    return jobTitle;    
} 
```

`arrayOfContacts`是这样定义的类方法：

```
+(NSArray *)arrayOfContacts{

    //Creates an ABAddressBookRef instance containing the data from the address book database
    ABAddressBookRef addressBook = ABAddressBookCreate();

    //Creates an NSArray from the CFArrayRef using toll-free bridging
    NSArray *arrayOfPeople = (__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);

    CFRelease(addressBook);

    return arrayOfPeople;
} 
```

这些方法在一个名为“PSPropertyFetcher”的模型类中定义。在我的根视图控制器中，我将一些 NSLog 语句放入 viewDidLoad 以查看属性获取器方法是否正常工作。这是我的测试代码：

```
NSLog(@"Property Fetchers Test\n");

for(NSUInteger i = 0; i <= ([PSAddressBook contactsCount]-1); i++){

    NSLog(@"First Name: %@", [PSPropertyFetcher fetchFirstnameForPersonID:i]);
    NSLog(@"Middle Name: %@", [PSPropertyFetcher fetchMiddlenameForPersonID:i]);
    NSLog(@"Last Name: %@", [PSPropertyFetcher fetchLastnameForPersonID:i]);
    NSLog(@"Organization: %@", [PSPropertyFetcher fetchOrganizationForPersonID:i]);
    NSLog(@"Department: %@", [PSPropertyFetcher fetchDepartmentForPersonID:i]);        
    NSLog(@"Job Title: %@\n\n", [PSPropertyFetcher fetchJobTitleForPersonID:i]);        
} 
```

这仅部分起作用；这是输出：

> 2012-06-27 10:37:30.094 猜猜是谁！[80103:f803] 属性提取器测试
> 
> 2012-06-27 10:37:30.108 猜猜谁！[80103:f803] 名字：乔德
> 
> 2012-06-27 10:37:30.114 猜猜是谁！[80103:f803] 中间名：鲍勃
> 
> 2012-06-27 10:37:30.118 猜猜谁！[80103:f803] 姓：萨特森
> 
> 2012-06-27 10:37:30.122 猜猜谁！[80103:f803] 组织：强生
> 
> 2012-06-27 10:37:30.125 猜猜是谁！[80103:f803] 部门：NULL
> 
> 2012-06-27 10:37:30.128 猜猜谁！[80103:f803] 职位：空

* * *

> 2012-06-27 10:37:30.136 猜猜谁！[80103:f803] 名字：Shemailan
> 
> 2012-06-27 10:37:30.166 猜猜谁！[80103:f803] 中间名：Daitran
> 
> 2012-06-27 10:37:30.179 猜猜谁！[80103:f803] 姓：卡泰兰
> 
> 2012-06-27 10:37:30.184 猜猜是谁！[80103:f803] 组织：Shmairo and Co.
> 
> 2012-06-27 10:37:30.188 猜猜谁！[80103:f803] 部门：NULL
> 
> 2012-06-27 10:37:30.193 猜猜谁！[80103:f803] 职位名称：NULL

* * *

> 2012-06-27 10:37:30.202 猜猜是谁！[80103:f803] 名字：Alex
> 
> 2012-06-27 10:37:30.207 猜猜谁！[80103:f803] 中间名：约翰
> 
> 2012-06-27 10:37:30.213 猜猜是谁！[80103:f803] 姓：玉米
> 
> 2012-06-27 10:37:30.219 猜猜谁！[80103:f803] 组织：苹果
> 
> 2012-06-27 10:37:30.225 猜猜谁！[80103:f803] 部门：NULL
> 
> 2012-06-27 10:37:30.230 猜猜谁！[80103:f803] 职位名称：NULL

在 iOS Simulator Contacts 应用程序中，我确保为每个联系人填写了每个字段，但由于某种原因，“部门”和“职位”字段没有正确打印。

基本上，我想知道我的“职位”和“部门”获取方法有什么问题。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T21:58:46.940

虽然在如此小的地址簿样本上似乎不太可能，但这里确实存在内存泄漏，可能会导致事情崩溃。

假设您正在使用`arrayOfContacts`确定`[self contactsCount]`，每次通过这些类方法中的每个循环，您都会泄漏 2 个地址簿项目。

在这个小示例中，当您启动contactsWithJobTitleProperty 时，您只会泄露48 个地址簿。但是，如果您从一个更大的示例中提取此信息，在该示例中您反复尝试在更大的 AddressBook 上确定这些值，您可能会有数百个悬空的 AddressBook 对象。

像下面的代码片段一样添加 CFRelease，看看它是否有帮助。

```
+(NSArray *)arrayOfContacts{

    //Creates an ABAddressBookRef instance containing the data from the address book database
    ABAddressBookRef addressBook = ABAddressBookCreate();

    //Creates an NSArray from the CFArrayRef using toll-free bridging
    NSArray *arrayOfPeople = (__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
    CFRelease(addressBook);

    return arrayOfPeople;
} 
```

（fwiw，另一个会使您的程序崩溃的事情是您使用 NSUInteger 作为循环计数器类型，但是您测试的值可能是-1 ...并且由于 0 是 NSUInteger 的下限，如果您的地址书中没有联系人，这将失败。但这不是发生崩溃的原因。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:28:31.870

在我看来，您可能正在访问 NULL 值，您是否尝试过在执行桥接传输之前测试它是否为 NULL？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:53:45.913

这可能无法解决您的问题，但如果我是您，我会进行一些调整：

```
+(NSUInteger)contactsWithJobTitleProperty{
    NSUInteger contactNumber = 0;
    // don't call arrayOfContacts in the loop -- 
    // when you do this you are creating a new address book 
    // each time the loop executes
    NSArray *contacts = [self arrayOfContacts];
    for(NSUInteger increment = 0; increment <= (contacts.count-1); increment++){
        ABRecordRef currentPerson = (__bridge ABRecordRef)[contacts objectAtIndex:increment];
        NSString *valueTest = (__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonJobTitleProperty);

        if(valueTest != NULL) {
            contactNumber++;
        }
    }
    return contactNumber;
} 
```

此外，@john.k.doe 提到，请确保`CFRelease(addressBook);`在您的`arrayOfContacts`方法中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T04:29:40.747

刚遇到同样的问题。请在此处查看 Jokinryou Tsui 的[答案](https://stackoverflow.com/questions/7473968/abaddressbookcopyarrayofallpeople-and-abaddressbookgetpersoncount-return-differe)。

基本上，如果您有不同的联系人来源可用，并且它们并非都是本地的（默认设置），那么您最终可能会发现您正在拉动的联系人数量不匹配，并尝试访问ABRecordRef 位于不存在的索引处。ABRecordRef 将有一个值（因此单独的 NULL 检查不会这样做），但该值将是垃圾，并且在尝试复制其任何值时您将获得 BAD ACCESS。

希望这可以帮助。

# php - php apc除以零错误

> ID：11174901
> 
> 赞同：1
> 
> 时间：2012-06-24T04:12:16.550
> 
> 标签：php

我正在使用 APC(php) 来显示进度条，但我被困在某一点上。我已经使用了这个链接，一切都是写的，APC 也被安装了。

```
http://www.johnboy.com/php-upload-progress-bar/ 
```

我使用了相同的代码，几乎没有修改路径来存储我的链接的图像

```
http://way2enjoy.com/modules/music/try/try/upload.php 
```

一切似乎都是正确的，但我的进度条显示 NaN%

我检查了显示此错误的错误日志

```
 [23-Jun-2012 20:20:26 UTC] PHP Warning:  Division by zero in /home/XXXXXXX/public_html/modules/music/try/try/upload_frame.php on line7 
```

我的 upload_frame.php 代码是

```
<?php

$url = basename($_SERVER['SCRIPT_FILENAME']);

if(isset($_GET['progress_key'])) {
$status = apc_fetch('upload_'.$_GET['progress_key']);
    echo $status['current']/$status['total']*100;

die;
}

?>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.js"    type="text/javascript"></script>
<link href="style_progress.css" rel="stylesheet" type="text/css" />

<script>
$(document).ready(function() { 

setInterval(function() 
    {
$.get("<?php echo $url; ?>?progress_key=<?php echo $_GET['up_id']; ?>&randval="+ Math.random(), { 

},
    function(data)
        {
            $('#progress_container').fadeIn(100);   
            $('#progress_bar').width(data +"%");    
            $('#progress_completed').html(parseInt(data) +"%"); 
        }
    )},500);    
});

</script>

<body style="margin:0px">
<div id="progress_container">
<div id="progress_bar">
     <div id="progress_completed"></div>

</div>
</div>
 </body> 
```

上传.php代码

```
<?php 
$up_id = uniqid(); 
?>

<?php

if ($_POST) {

$folder = "tmp/"; 
$folder1 = "/home/XXXXXX/public_html/modules/music/try/try/"; 
$redirect = "upload.php?success";

move_uploaded_file($_FILES["file"]["tmp_name"], "$folder1" . $_FILES["file"]["name"]);

header('Location: '.$redirect); die;
}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0    Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Upload your file</title>

<link href="http://way2enjoy.com/files/common_css/style_progress.css" rel="stylesheet" type="text/css" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.js" type="text/javascript"></script>

<script>

$(document).ready(function() { 

var show_bar = 0;
$('input[type="file"]').click(function(){
    show_bar = 1;
});

$("#form1").submit(function(){

    if (show_bar === 1) { 
        $('#upload_frame').show();
        function set () {
            $('#upload_frame').attr('src','upload_frame.php?up_id=<?php echo $up_id; ?>');
        }
        setTimeout(set);
    }
});

});

</script>

</head>

<body>
<h1>Upload your file </h1>

<div>
 <?php if (isset($_GET['success'])) { ?>
 <span class="notice">Your file has been uploaded.</span>
 <?php } ?>
 <form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">

<br />
Choose a file to upload<br />

<input type="hidden" name="APC_UPLOAD_PROGRESS" id="progress_key" value="<?php echo $up_id; ?>"/>

<input name="file" type="file" id="file" size="30"/>

<br />
<iframe id="upload_frame" name="upload_frame" frameborder="0" border="0" src="" scrolling="no" scrollbar="no" > </iframe>
<br />

<input name="Submit" type="submit" id="submit" value="Submit" /> 
```

我对 APC 的 php 配置

```
apc.cache_by_default    On  On
apc.canonicalize    On  On
apc.coredump_unmap  Off Off
apc.enable_cli  Off Off
apc.enabled On  On
apc.file_md5    Off Off
apc.file_update_protection  2   2
apc.filters no value    no value
apc.gc_ttl  3600    3600
apc.include_once_override   Off Off
apc.lazy_classes    Off Off
apc.lazy_functions  Off Off
apc.max_file_size   1M  1M
apc.mmap_file_mask  no value    no value
apc.num_files_hint  1000    1000
apc.preload_path    no value    no value
apc.report_autofilter   Off Off
apc.rfc1867 On  On
apc.rfc1867_freq    0   0
apc.rfc1867_name    APC_UPLOAD_PROGRESS APC_UPLOAD_PROGRESS
apc.rfc1867_prefix  upload_ upload_
apc.rfc1867_ttl 3600    3600
apc.serializer  default default
apc.shm_segments    1   1
apc.shm_size    32M 32M
apc.slam_defense    On  On
apc.stat    On  On
apc.stat_ctime  Off Off
apc.ttl 0   0
apc.use_request_time    On  On
apc.user_entries_hint   4096    4096
apc.user_ttl    0   0
apc.write_lock  On  On 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-22T18:56:13.193

您是否阅读了[项目页面](http://www.johnboy.com/php-upload-progress-bar/)中的重要说明：

> 重要提示：确保在您的 php.ini 中包含 apc.rfc1867 = on

它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T04:16:46.823

显然`$status['total']`是零。

做这个：

```
if ($status['total'] == 0) {
    echo "0";
}
else {
    echo $status['current']/$status['total']*100;
} 
```

# vb.net - 将焦点设置到 WebBroswer 控件中的 HTML 文本框或按钮

> ID：11174903
> 
> 赞同：6
> 
> 时间：2012-06-24T04:13:36.453
> 
> 标签：vb.net, tabs, webbrowser-control, setfocus

我正在`WebBrowser`使用 VB.NET 2008 在控件中打开一个网站。在网站的第四页上，我想通过以编程方式触发 tab 键来聚焦控件。我正在使用以下代码：

```
If adtxt.Text = "http://aojsl.com/dfassfeed2.php" Then
    System.Windows.Forms.SendKeys.Send("{TAB}")
End If 
```

但是，我的代码无法触发 tab 键。有谁知道如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:38:47.697

方法一

```
Private Sub Form_Load()
    WebBrowser1.Navigate "http://www.google.com/"
    Do
     Thread.Sleep(100)
    Loop While webBrowser1.IsBusy = True
End Sub 

Private Sub Command1_Click()
    WebBrowser1.Document.All("q").focus 'Set focus to the search text field
End Sub

Private Sub Command2_Click()
    WebBrowser1.Document.All("btnI").focus 'Set focus to the google "I Am feeling lucky button"
End Sub 
```

方法二

我从这个[MSDN 线程将其转换为 VB.Net：System.Windows.Controls.WebBrowser 的焦点问题](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/1b50fec6-6596-4c0a-9191-32cd059f18f7)

您需要将 ActiveElement 更改`webBrowser.Document.ActiveElement.Focus()`为文本框或按钮。

```
Public Partial Class Form1
    Inherits Form
  Public Sub New()
    InitializeComponent()
    Dim host As New WindowsFormsHost()
    im webBrowser As New WebBrowser()
    host.Child = webBrowser
    elementHost1.Child = host

    webBrowser.Navigate(New Uri("http://www.google.com"))
    Me.Activated += Function() Do
      Console.WriteLine(Me.ActiveControl)
      If webBrowser.Document <> Nothing Then
        If Me.ActiveControl = elementHost1 AndAlso webBrowser.Document.ActiveElement <> Nothing Then
          webBrowser.Document.ActiveElement.Focus()
        End If
      End If
    End Function
  End Sub
End Class 
```

方法三

另一种方法可能是在 HTML 中进行，例如：

```
OnLoad="document.myform2.mybutton.focus();"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:30:13.140

另一种方法：

使用`GetElementsByTagName(TagName)`

假设您的 html 是：

```
<button>no</button>
<button>no</button>
<button onclick='alert(1);'>--focus me!--</button>
<button>no</button> 
```

```
 Dim Elems As HtmlElementCollection
        Dim WebOC As WebBrowser = WebBrowser1
        Elems = WebOC.Document.GetElementsByTagName("button")
        For Each elem As HtmlElement In Elems
            If elem.InnerHtml = "--focus me!--" Then
                elem.Focus()
                elem.InvokeMember("click")

            End If

        Next 
```

另一个：

```
Dim num As Integer = 1
        Dim elms As HtmlElementCollection
        Dim wb As WebBrowser = WebBrowser1
        elms = wb.Document.GetElementsByTagName("button")
        For Each elem As HtmlElement In elms
            If elem.Id = "" Then
                elem.Id = "button" & num.ToString
                num = num + 1
            End If
        Next

        WebBrowser1.Document.GetElementById("button3").Focus() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:43:54.003

假设你的页面的 html 是：

```
<button id="btn">Ok</button><input id="txt"> 
```

您可以通过以下方式设置焦点：

```
If adtxt.Text = "http://aojsl.com/dfassfeed2.php" Then
    webbrowser1.document.getelementbyid("btn").focus()
    webbrowser1.document.getelementbyid("txt").focus()
End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-10T16:08:04.300

使用 vb.net 中的 focus 函数来聚焦选择元素。例如，

```
Me.WebBrowser1.Document.All.Item("password").Focus() 
```

这将把焦点放在称为密码的元素上！

用于`Me.WebBrowser1.Document.All.Item("YOURelement")`找到正确的元素，然后添加`.Focus()`以专注于您想要的元素！:D

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-23T12:37:38.020

这样做 Me.WebBrowser1.Document.All.Item(textbox1.text).Focus()

制作一个文本框，然后如果您想使用 Spambot，它很容易检测您每次输入和发送的类型

# javascript - javascript & ajax 仅适用于 confirm()

> ID：11174907
> 
> 赞同：0
> 
> 时间：2012-06-24T04:15:02.583
> 
> 标签：javascript, ajax, confirm

以下 javascript 函数似乎仅在我拥有最初用于调试目的的最终确认（）语句时才起作用。当我把它拿出来时，delete_row.php 似乎没有运行。另外，也许作为提示/旁注，当我确实有确认语句时，它适用于除 safari 之外的所有浏览器...

```
function deleterow(form) {

    if (!confirm("Are you sure you want to delete?")) return false;

    var queryString = "?ID=";

    for (var i = 0; i < document.myForm.rows.length; i++) {
        if (document.myForm.rows[i].checked) {
            ID = document.myForm.rows[i].value;
            ID = ID.slice(0, -1);
            queryString += ID;
            queryString += "-";
        }
    }
    queryString = queryString.slice(0, -1);

    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }

    var ajaxRequest;  // The variable that makes Ajax possible!
    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            var ajaxDisplay = document.getElementById('ajaxDiv');
            ajaxDisplay.innerHTML = ajaxRequest.responseText;
        }
    }

    ajaxRequest.open("GET", "delete_row.php" + queryString, true);
    ajaxRequest.send(null); 
    confirm('Delete successful!');
} 
```

**更新已解决**

我正在通过以下 js 脚本更改检查 ajaxRequest 的状态

```
ajaxRequest.onreadystatechange = function(){ // Create a function that will receive data sent from the server
    if(ajaxRequest.readyState == 4 && ajaxRequest.status == 200){
        var ajaxDisplay = document.getElementById('ajaxDiv');
        ajaxDisplay.innerHTML = ajaxRequest.responseText;
    }
    else{
        alert('An error has occurred making the request');
        return false;
    }
} 
```

并注意到我从服务器获得了 0 的状态。一些谷歌搜索帮助我意识到错误在于我如何定义调用这些函数的按钮。

原始代码是：

```
<div style='float:left; margin-right:10px;'><input type="submit" onClick="deleterow(document.myForm)" VALUE="Delete ROWs"></div> 
```

修复是：

```
<div style='float:left; margin-right:10px;'><input type="button" onClick="deleterow(document.myForm)" VALUE="Delete ROWs"></div> 
```

（提交类型必须更改为按钮类型）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:50:34.127

`delete_row.php doesn't seem to run`您是否验证过这一点，您是否可以向我尝试了您的 JS 虽然没有表单内容添加一个警报，`if(ajaxRequest.readyState == 4){`并且它似乎工作正常， http: [//jsfiddle.net/6gjy6/](http://jsfiddle.net/6gjy6/)您在 Google Chrome 控制台中是否收到任何 JS 错误？您是否尝试过使用适当的 url 在浏览器上执行基本的“GET”请求，`delete_row.php" + queryString,`并查看服务器如何响应而不是 AJAX 调用。

试试这个：

```
var queryString = "?ID=";

for (var i = 0; i < document.myForm.rows.length; i++) {
    if (document.myForm.rows[i].checked) {
        ID = document.myForm.rows[i].value;
        ID = ID.slice(0, -1);
        queryString += ID;
        queryString += "-";
    }
}
queryString = queryString.slice(0, -1);
var ajaxRequest; 

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
}

// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        alert("received: " + ajaxRequest.responseText);
        var ajaxDisplay = document.getElementById('ajaxDiv');
        ajaxDisplay.innerHTML = ajaxRequest.responseText;
    }
}

ajaxRequest.open("GET", "delete_row.php" + queryString, true);
ajaxRequest.send(null); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:18:48.337

将您的 confirm() 语句保留在 js 的顶部

```
window.alert = null ; 
```

并尝试

k让我检查一下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T04:20:30.333

我相当确定您应该`onreadystatechange`在调用后设置事件`open`，否则处理程序将被清除。

# android - Android Button 过于占用资源

> ID：11174909
> 
> 赞同：1
> 
> 时间：2012-06-24T04:16:09.840
> 
> 标签：android, android-layout, android-webview, android-button

我有一个带有几个按钮的简单应用程序，有时用户需要按下按钮组合来发送正确的查询。然而，在测试中，我发现按钮在快速按下时反应不是很灵敏。我认为这与 Android 按钮相对更占用资源有关。我想知道是否有任何方法可以使按钮更具响应性（也许通过更轻的视图？）或者我是否可以在 WebView 中放置带有 HTML 按钮的直接 HTML 页面？这样反应会更好吗？

# lisp - 一个函数需要多少个参数？

> ID：11174917
> 
> 赞同：3
> 
> 时间：2012-06-24T04:18:45.283
> 
> 标签：lisp, common-lisp

我怎样才能得到一些函数参数的 lambda 列表规范，或者至少它需要一些参数？

例如：

```
(defun a (a b) )
(get-arg-list #'a) ;-> '(a b) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T10:22:24.580

Common Lisp 提供了`FUNCTION-LAMBDA-EXPRESSION`可以恢复源表达式的函数，然后包含 lambda 列表。

LispWorks 定义了一个`FUNCTION-LAMBDA-LIST`返回 arglist 的函数。

`ARGLIST`许多其他实现在某些内部包中具有某种形式的功能。

许多 Common Lisp 用户使用 SLIME，这是 GNU Emacs 编辑器的一个非常聪明的编辑器扩展。它有一个名为 SWANK 的 Common Lisp 后端。SWANK 源代码为各种 Common Lisp 实现提供了各种接口，包括获取函数的 arglist。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T04:36:28.420

这是特定于实现的，但这个 CLHS 函数可能会让你开始 - [http://clhs.lisp.se/Body/f_descri.htm](http://clhs.lisp.se/Body/f_descri.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T03:03:01.800

最简单的方法是使用 SLIME 使用的 SWANK 库。

使用它的方法是加载 SLIME，通过 Quicklisp 最容易完成：

```
(ql:quickload "swank") 
```

然后，您可以使用以下函数获取参数列表：

```
CL-USER> (swank-backend:arglist #'a)
(A B) 
```

# macos - 如何获得具有半透明模糊背景的窗口

> ID：11174918
> 
> 赞同：7
> 
> 时间：2012-06-24T04:18:47.993
> 
> 标签：macos, cocoa, calayer, nswindow

我想要一个具有半透明模糊背景的窗口，就像终端可以做的那样。观看此视频，大约 30 秒，了解我的意思：[http ://www.youtube.com/watch?v=zo8KPRY6-Mk](http://www.youtube.com/watch?v=zo8KPRY6-Mk)

在此处查看图片：http: [//osxdaily.com/wp-content/uploads/2011/04/mac-os-x-lion-terminal.jpg](http://osxdaily.com/wp-content/uploads/2011/04/mac-os-x-lion-terminal.jpg)

我已经在谷歌上搜索了一个小时，但找不到任何工作。我相信我需要以某种方式创建一个核心动画层并添加一个背景过滤器，但到目前为止我一直没有成功......我只看到我的窗口的灰色背景。这是我到目前为止的代码：

代码：

```
//  Get the content view -- everything but the titlebar.
NSView *theView = [[self window] contentView];
[theView setAlphaValue:0.5];

// Create core animation layer, with filter
CALayer *backgroundLayer = [CALayer layer];
[theView setWantsLayer:YES];
[theView setLayer:backgroundLayer]; 
CIFilter *blurFilter = [CIFilter filterWithName:@"CIGaussianBlur"];
[blurFilter setDefaults];
[theView layer].backgroundFilters = [NSArray arrayWithObject:blurFilter];  
[[theView layer] setBackgroundFilters:[NSArray arrayWithObject:blurFilter]]; 
```

有什么提示或例子可以做我想做的事吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:09:09.690

不需要图层和过滤器，NSWindow 可以自己做

```
[mywindow setOpaque:NO];
[mywindow setBackgroundColor: [NSColor colorWithCalibratedHue:0.0 saturation:0.0 brightness:0.2 alpha:0.5]]; 
```

请不要使用它，因为它也会显示您的标题栏（张贴在这里以防其他人需要）

```
[mywindow setOpaque:NO];
[mywindow setBackgroundColor: [NSColor blackColor]];
[mywindow setAlphaValue:0.5]; 
```

![在此处输入图像描述](../Images/5721286b9ef52bfd14ec5bdffd9cfd59.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:29:51.903

对于透明度，请使用赵九龙的建议。

对于模糊的背景，请使用此

对 NSWindow 的调用：

```
[self enableBlurForWindow:self]; 
```

功能 ：

```
-(void)enableBlurForWindow:(NSWindow *)window
{
    //!!!! Uses private API - copied from http://blog.steventroughtonsmith.com/2008/03/using-core-image-filters-onunder.html

    CGSConnection thisConnection;
    uint32_t compositingFilter;
    int compositingType = 1; // Under the window

    /* Make a new connection to CoreGraphics */
    CGSNewConnection(NULL, &thisConnection);

    /* Create a CoreImage filter and set it up */
    CGSNewCIFilterByName(thisConnection, (CFStringRef)@"CIGaussianBlur", &compositingFilter);
    NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:2.0] forKey:@"inputRadius"];
    CGSSetCIFilterValuesFromDictionary(thisConnection, compositingFilter, (__bridge CFDictionaryRef)options);

    /* Now apply the filter to the window */
    CGSAddWindowFilter(thisConnection, [window windowNumber], compositingFilter, compositingType);
} 
```

注意：它使用私有 API

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-03T06:19:14.827

对于那些在 2017 年阅读本文并使用**Swift 4**并想要更改 BG **Alpha**的人，您可以将以下内容添加到您的自定义 NSWindow 类中：

```
self.backgroundColor = NSColor.black
self.backgroundColor = NSColor.init(calibratedHue: 0, saturation: 0, brightness: 0, alpha: 0.2) 
```

ps我还不需要模糊效果，当我需要时，我会更新答案

# java - 在java中匹配字符串的模式

> ID：11174926
> 
> 赞同：1
> 
> 时间：2012-06-24T04:19:50.037
> 
> 标签：java, regex

我一直在试图弄清楚如何将我的输入字符串的模式与这种字符串匹配：

“xyz 123456789”

一般来说，每次我有一个前 3 个字符（可以是大写或小写）并且后 9 个是数字（任何组合）的输入时，都应该接受输入字符串。

因此，如果我有 i/p string = "Abc 234646593" 它应该是一个匹配项（允许一个或两个空格）。如果“Abc”和“234646593”应该存储在单独的字符串中，那就太好了。

我看过很多正则表达式，但并不完全理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T04:29:16.223

这是一个有效的 Java 解决方案：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Regex {
  public static void main(String[] args) {
    String input = "Abc 234646593";

    // you could use \\s+ rather than \\s{1,2} if you only care that
    // at least one whitespace char occurs
    Pattern p = Pattern.compile("([a-zA-Z]{3})\\s{1,2}([0-9]{9})");
    Matcher m = p.matcher(input);
    String firstPart = null;
    String secondPart = null;
    if (m.matches()) {
      firstPart = m.group(1);  // grab first remembered match ([a-zA-Z]{3})
      secondPart = m.group(2); // grab second remembered match ([0-9]{9})
      System.out.println("First part: " + firstPart);
      System.out.println("Second part: " + secondPart);
    }
  }
} 
```

打印出来：

```
第一部分：ABC
第二部分：234646593

```

# python - Recaptcha 无效时如何保留表单数据字段 + App Engine Python

> ID：11174932
> 
> 赞同：0
> 
> 时间：2012-06-24T04:21:25.890
> 
> 标签：python, google-app-engine, recaptcha

我读过这篇文章[Using reCAPTCHA with Google App Engine](http://daily.profeth.de/2008/04/using-recaptcha-with-google-app-engine.html)，当 Recaptcha 无效时如何保留表单数据并不是很清楚。

我大致知道如何通过 AJAX 完成这项工作。但是，有没有更简单的解决方案？因为我真的不需要 AJAX 来注册。我只需要允许用户重新输入验证码以进行无效尝试，并保留用户输入的表单数据。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:21:43.210

将接收到的表单数据发送回表单并设置表单字段值。WTForms 可以帮助您处理验证和错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:03:55.293

由于没有更简单的方法/建议，我将使用 AJAX 解决方案来解决这个问题。

# node.js - 在everyauth.password 中访问会话？

> ID：11174933
> 
> 赞同：1
> 
> 时间：2012-06-24T04:21:39.570
> 
> 标签：node.js, everyauth

我正在开发一个 node express 应用程序，并且我已经让它在 Facebook 身份验证中运行良好。我现在正在尝试启用我们自己的电子邮件/密码登录并将其运行到障碍。使用 Facebook，我可以在身份验证期间访问和写入会话：

```
everyauth.faceboook
    // Basic stuff
    .findOrCreateUser( function( sess, accessToken, extra, fbUser) {
        var promise = this.Promise();
        sess.myvar = myvar

        // Find user in DB, etc
        promise.fulfill(fbUser);
        return promise() 
```

这很好用，因为我可以用这种方法将稍后需要的一些东西保存到会话中。但是我不确定在使用everyauth密码登录时如何做同样的事情：

```
everyauth.password
    // Basic stuff
    .authenticate( function(email, password) {
        var promise = this.Promise();             
        // Create new user in DB, etc

        // Now I need to save stuff to the session but I'm not sure how to access
        // it in here...
        promise.fulfill(newUser)
        return promise 
```

那么有什么方法可以在everyauth.password 的身份验证和登录方法（使用相同的API）中访问会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:10:56.277

您无法从您的`.authenticate`函数访问会话，并且您在这里尝试做的事情感觉不对。您的`.authenticate`函数应该只是通过参数查找用户`login`，验证`password`参数是否与用户的密码匹配，然后通过回调返回该用户的用户对象。如果你想使用everyauth 来创建用户，你应该使用`.validateRegistration`and`.registerUser`函数。

# exception - 检测引用的 DLL (.Net) 中的方法引发的异常

> ID：11174934
> 
> 赞同：0
> 
> 时间：2012-06-24T04:21:55.083
> 
> 标签：exception, dll, nullreferenceexception

我有 c#.net 代码，它从另一个外部/引用的 .net 程序集中调用一个方法。如果我正在传递的对象的某个属性为空，我正在调用的此方法将引发异常。简而言之：

```
public void Add(string key, object obj)
{
..
//if the Foo property from obj is null then
throw new Exception("Foo property is null or empty")
..
} 
```

在调用 DLL 的 Add 方法的客户端代码中，我希望能够检测到引发了这个特定异常，可能通过它的“Foo 属性为空或空”消息来区分。目前，当它遇到这个方法时，我得到一个 NullReferenceException，所以我捕获了这个异常。

**问题1：** 我可以得到与我正在调用的代码（在引用的程序集中）引发的异常相关的错误消息吗？

**问题 2：** 这被认为是不好的做法还是只是不典型的做法？

很明显，我可以反汇编第三方DLL发现我传入的obj一定有这个“Foo”属性集。所以，我的问题在某种程度上是为了锻炼（而且因为我是 n00b）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:50:19.083

我只需要捕获 System.Exception 并显示异常 Message 属性。起初，我在 Add 方法中不断收到带有“对象引用未设置为对象的即时”消息的 NullReferenceException，但我希望收到带有消息“Foo 属性为空或为空”错误的异常。我的代码中的某些条件发生了变化，现在我得到了我所期望的。

# java - 从不同的方法调用数组，为什么 java.lang.ArrayIndexOutOfBoundsException？

> ID：11174938
> 
> 赞同：-2
> 
> 时间：2012-06-24T04:22:31.543
> 
> 标签：java, arrays, methods

问题：我的数组有什么问题，我该如何解决？

细节：我在main方法中初始化了数组，值在一个方法中设置。我用第二种方法调用了数组值，一切都很好。当我尝试在第三种方法中调用数组时，我得到了越界错误，即使数组的大小完全相同。我试图调用数组以复制它，然后对第二个数组进行排序。

谢谢你

```
private static  WeatherLocation[] WeatherSpots = new WeatherLocation[6];
private static Scanner Input = new Scanner(System.in);

public static void main(String[] args) 
{int Count;

for(Count = 0 ; Count < 6; Count++)
    WeatherSpots[Count] = new WeatherLocation();

WeatherSpots[0].LocationID = "Tciitcgaitc";
WeatherSpots[1].LocationID = "Redwood Haven";
WeatherSpots[2].LocationID = "Barrier Mountains";
WeatherSpots[3].LocationID = "Nina's Folly";
WeatherSpots[4].LocationID = "Scooly's Hill";
WeatherSpots[5].LocationID = "Twin Cones Park";
    SetUp();

    String Command = "";
    while(!Command.equals("Quit"))  {
    Menu();

    System.out.print("Enter Command: ");
    Command = Input.nextLine();

    if(Command.equals("Post"))
        PostTemperatureInfo();
    if(Command.equals("Daily"))
        WeeklyReport();
    else if (Command.equals("HighLow"))
        Sorting();
    }
}

public static void PostTemperatureInfo()
{
    Scanner LocalInput = new Scanner(System.in); 
    int K;
    int Temp;
    //...then get the values for each location...

    System.out.println( "Enter the Temperature for each weather station below:\n");
    System.out.println( "---------------------------------------------------------------");

    for(K = 0 ; K < 6 ; K++)  {
        System.out.println( "Weather Station: " + WeatherSpots[K].LocationID);  //Display the location of the fishing spot...

        System.out.print( "Enter Temperature:\t");   //Get the count...
        Temp = LocalInput.nextInt();
         System.out.println( "---------------------------------------------------------------");
         WeatherSpots[K].CatchCount = Temp;
        }
    System.out.println("");
     System.out.println("");
     System.out.println("");
}
public static void WeeklyReport()
{
    for(K = 0 ; K < 6 ; K++) 
        {System.out.println( "" + WeatherSpots[K].LocationID +"\t\t" + WeatherSpots[K].CatchCount + "\t\t" + String.format("%.2f", (WeatherSpots[K].CatchCount - 32) * 5 / 9));
}
}

public static void Sorting()
{int K = 0; 

for(K = 0 ; K < 6 ; K++);
    {int [] copycat = new int[K];

    System.arraycopy(WeatherSpots[K].CatchCount, 0, copycat[K], 0, 6);
    System.out.println("" + copycat[K]);
    Arrays.sort(copycat, 0, K);
    System.out.println("Minimum = " + copycat[0]); 
System.out.println("Maximum = " + copycat[K -1]);  

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:27:06.907

问：为什么不使用“array.length”而不是硬编码的“6”？

问：如果可以避免的话，我真的不鼓励你使用这种缩进样式。

无论如何 - 这应该有效（我自己*没有*尝试过）：

```
public static void Sorting() {
  for(int K = 0 ; K < WeatherSpots.length ; K++) {
     int [] copycat = new int[K];

     System.arraycopy(
       WeatherSpots[K].CatchCount, 0, copycat[K], 0, WeatherSpots.length);
     System.out.println("" + copycat[K]);
     Arrays.sort(copycat, 0, K);
     System.out.println("Minimum = " + copycat[0]); 
     System.out.println("Maximum = " + copycat[K -1]);  
  }
} 
```

最主要的是去掉多余的“;” 在“for()”循环之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T04:39:00.637

问题是您正在分配一个`copycat`只有`K`整数长的数组，然后您尝试将 6 个元素放入其中，即使 K == 0 也是如此。我对您的代码了解不够，无法弄清楚正确的索引是什么，但这是你问题的根源。

实际上，我不相信您发布的代码会编译。此行来自`Sorting()`：

```
System.arraycopy(WeatherSpots[K].CatchCount, 0, copycat[K], 0, 6); 
```

似乎非常可疑。的第一个和第三个参数`System.arraycopy`应该是数组，但是`copycat[K]`是一个`int`. 显然是这样`WeatherSpots[K].CatchCount`。

编辑：

从您的评论和代码看来，该`Sorting()`例程应该只打印`WeatherSpots[K].CatchCount`. 这可以比你做的容易得多。这是一种方法：

```
public static void Sorting() {
    int min = Integer.MAX_VALUE;
    int max = Integer.MIN_VALUE;
    for (WeatherLocation loc : WeatherSpots) {
        final int count = loc.CatchCount;
        if (count < min) {
            min = count;
        }
        if (count > max) {
            max = count;
        }
    }
    System.out.println("Minimum = " + min); 
    System.out.println("Maximum = " + max);
} 
```

# jquery - 穆工具？它的主要优势是什么？

> ID：11174939
> 
> 赞同：2
> 
> 时间：2012-06-24T04:23:39.713
> 
> 标签：jquery, mootools

我只是碰巧遇到了这个框架，不明白它比 jQuery 等其他框架的主要优势。你能解释一下吗？例如，你会用它来解决什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T04:28:57.973

MooTools 是一个面向对象的框架，它提供的类以及其他功能有助于保持一致的编码风格并创建更多模块化代码。

这允许经典继承。类可以扩展其他类，另外还可以提供初始化方法。

```
var Animal = new Class({
    initialize: function(age){
        this.age = age;
    }
});
var Cat = new Class({
    Extends: Animal,
    initialize: function(name, age){
        this.parent(age); // calls initalize method of Animal class
        this.name = name;
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T04:29:45.307

MooTools：（我的面向对象工具）是轻量级的 Javascript 框架。

在这里阅读一个很好的描述：http: [//jqueryvsmootools.com/](http://jqueryvsmootools.com/)

和良好的链接：[http ://www.mootorial.com/wiki/mootorial/00a-mootoolsvsothers](http://www.mootorial.com/wiki/mootorial/00a-mootoolsvsothers)

[http://jsperf.com/jquery-vs-dojo-vs-mootools-dom/71](http://jsperf.com/jquery-vs-dojo-vs-mootools-dom/71)（比较其他浏览器的结果）

[Jquery Vs Mootools 哪个性能好？为什么？](https://stackoverflow.com/questions/2805536/jquery-vs-mootools-which-is-having-good-performance-why)

**引用**

> 这取决于您喜欢哪种编码风格并且可以长期为您提供帮助。仅仅因为其他人使用 jQuery 并没有让我更容易学习它的编码方式。

还; 我认为您的问题可能会关闭，因为可能是针对某些非常开放且非建设性的问题`:)`

**图片**可能说明了一切

![在此处输入图像描述](../Images/69d185e17454b1a6deb145277a8e11d3.png)

# c++ - 我使用抽象类作为接口。它可以与哪种设计模式相关联？

> ID：11174940
> 
> 赞同：0
> 
> 时间：2012-06-24T04:23:59.310
> 
> 标签：c++, design-patterns

我为接口使用了抽象基类，为实现使用了派生类。请参阅下面的代码。它可以与 c++ 中的任何标准设计模式相关联吗？

```
Class people
{
    public:
       virtual void setname(string name)=0;
       virtual void SetAge(int Age)=0;
       //etc consists of only pure virtual functions like above
};

Class Students: public people
{
    void setname(string name) 
    {
        //implementation of the function
    }
    void SetAge(int Age) { //implementation }
} 
```

而且我已经定义了许多如上所述的类，并且在 Buildclass 的构造函数中创建了对象：

```
Buildclass::Buildclass()
{
    people *Obj = (people*) new Students();
    interface *obj1 = (interface*) new implementation();
} 
```

我已经为上面提供了 getinstance 函数以在另一层中使用

```
void BuildClass::getPeopleinstance()
{
   return Obj;
}
void BuildClass::getAnotherinstance()
{
   return Obj1;
} 
```

上面的代码可以与任何设计模式相关联吗？请告诉我？我无法找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T04:44:09.823

您似乎正在使用工厂模式，但这并不重要。专注于编写好的代码，而不是设计模式。

# matlab - 如何进入 wav 文件以更改采样率？

> ID：11174942
> 
> 赞同：1
> 
> 时间：2012-06-24T04:24:37.803
> 
> 标签：matlab, signal-processing, wav, audio-processing, sample-rate

我在 MATLAB 中有一个 wav 文件，我可以看到它的采样率。我需要做的就是改变这个 1 号。文件中的所有其他内容都将保持不变。（生成的声音将以不同的速度播放，但具有相同的样本数据数组。）

我需要这样做的原因是，当我告诉 MATLAB 打开除 8k 以外的任何采样的东西时，它似乎吓坏了。我需要 MATLAB 来编辑文件，所以采样率真的无关紧要，因为完成后我会将它放回 wav 文件中。所以我要么需要能够更改存储采样率的 wav 文件中的值，要么让 MATLAB 将它喜欢的采样率从 8k 更改为记录我的文件的采样率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:15:52.203

如果您只想更改采样频率，这里是代码，但它会扭曲原始 wav 文件。如果你降低采样频率，那么节拍和音乐会很慢。

```
Code:
    [y, fs, nbits]=wavread('stego_lab');
    fs2=11025;
    wavwrite(y,fs2,nbits,'stego2_lab.wav');
    sound(y,fs2,nbits) 
```

你可以听到它，但样本将保持不变。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:33:15.800

有 SOX 工具，它应该可以在这方面为您提供帮助，它几乎可以在任何平台上使用 - [http://sox.sourceforge.net](http://sox.sourceforge.net)

还有 libsndrate、libsamplerate、libsndfile 等，它们也可能有可执行文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-07T12:24:39.857

试试这个解决方案

```
[x,fs] = wavread('infile.wav');
<br>[p,q] = rat(16000/fs)  % to convert to 16k sample rate</br>
<br>y = resample(x,p,q); % signal package require

wavwrite(x,16000,'outfile.wav'); 
```

# ruby-on-rails - class_name 的未定义方法“model_name”？

> ID：11174947
> 
> 赞同：0
> 
> 时间：2012-06-24T04:28:48.890
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试获取用户工作说明，但不确定我做错了什么。起初，当我只嵌套两者时，我能够得到工作和笔记正常工作，但是当我想获得用户工作笔记时，我的代码就坏了。

**notes.controller 新**

```
def new
  @note = @user_note.notes.new
end

private 

def user_note
    @user = current_user
    @job = @user.job.find(params[:job_id])
end 
```

**用户.rb**

```
has_many :jobs
has_many :notes, through: :jobs 
```

**工作.rb**

```
belongs_to :user
belongs_to :note 
```

**笔记.rb**

```
has_many :jobs
has_many :users, through: :jobs 
```

在 Rails 控制台中，如果我输入以下代码，它可以正常工作。

```
User.last.jobs 
```

如果我尝试在下面编写代码，它不会

```
User.last.jobs.notes 
```

然后我得到错误

```
undefined method `notes' for #<Job:0x007fe37dc77190> 
```

在为工作创建注释时如何正确获取 user_id？现在它会抓取笔记的作业 ID，但不会抓取用户 ID。我希望能够从工作和用户中找到笔记。任何想法我做错了什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:04:49.567

基本错误是您通过 2 个 has_many 关系进行询问。这是不可能的。您可以执行以下操作：

```
user = User.last
user.jobs  # returns all the user's jobs
user.notes # returns all the user's notes
user.jobs.each_with_object({}) {|job, hash| hash[:job.id] = job.note_ids]} 
  # returns a hash with user's job_id as keys and an array of related note_ids as value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:33:51.887

当您使用`has_many :through`时，您应该只使用：

`User.last.notes`

这将通过作业获取最后一个用户的笔记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T04:30:31.780

你的笔记模型看起来有错字，应该是

```
has_many :jobs 
```

代替

```
has_jobs 
```

# git - git 中的上游和 push 中使用 -u 标志

> ID：11174948
> 
> 赞同：38
> 
> 时间：2012-06-24T04:28:54.000
> 
> 标签：git

将提交推送到某个 git repo 时 -u 标志的用途是什么？`git push origin master`我的意思是和之间有什么区别`git push -u origin master`？谁能描述一下它的用法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-24T04:38:42.303

git(1) 手册页说：

```
-u, --set-upstream 
```

> 对于每个最新或成功推送的分支，添加上游（跟踪）引用，由无参数 git-pull(1) 和其他命令使用。有关更多信息，请参阅 git-config(1) 中的 branch..merge。

基本上，当您想将*origin*设置为分支的上游远程时，您可以使用此标志。如果您不想在每次使用时手动指定遥控器，则需要这样做`git pull`。

### 也可以看看

[http://git-scm.com/book/en/Git-Branching-Remote-Branches#Tracking-Branches](http://git-scm.com/book/en/Git-Branching-Remote-Branches#Tracking-Branches)

# c# - Keynotfound 异常

> ID：11174950
> 
> 赞同：0
> 
> 时间：2012-06-24T04:29:02.027
> 
> 标签：c#, silverlight, windows-phone-7

Keynotfound 异常

```
public int getLastUniqueID()
{
    int lastID = 0;
    IsolatedStorageSettings uc = IsolatedStorageSettings.ApplicationSettings;

    List<sMedication> medicationList = (List<sMedication>)uc["medicationList"];

    foreach (sMedication temp in medicationList) {
        lastID = temp.UniqueID;
    }

    return lastID;
} 
```

它发生在以下行：

```
List<sMedication> medicationList = (List<sMedication>)uc["medicationList"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T04:35:53.180

由于错误表明在访问值之前未在字典中找到键，请检查键是否存在

```
if(uc.Contains("medicationList"))
{
   // your code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T04:37:08.180

你会遇到这种方法的问题，因为如果检索到的应用程序设置中没有键“medicationList”，那么它会像你所见证的那样抛出异常。

尝试以下操作：

```
uc.TryGetValue<List<sMedication>>("medicationList", out medicationList)
if (medicationList != null)
{
   foreach(sMedication temp in medicationList)
   {
       lastID = temp.UniqueID;
       return lastID;
   }
}
else
{
   // handle the key not being there
} 
```

# android - 如何有效地实现gridview布局

> ID：11174954
> 
> 赞同：2
> 
> 时间：2012-06-24T04:29:47.290
> 
> 标签：android, android-layout

这种布局是一个书架，每行有 3 本书。

![在此处输入图像描述](../Images/93630e441e994ec8ebd4f30802ddfda4.png)

我目前提出了用于显示书籍并手动添加书架栏的 gridview。当有超过 9 本书并且在滚动网格时布局被破坏时会出现问题。

![在此处输入图像描述](../Images/704827c273841a9c57c1d99b6bbc29fe.png)

谁能建议我另一种更好的方法来处理这种布局。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T04:32:05.507

我认为您应该在`each element`（一个架子）中设置背景，而不是设置网格容器背景（三个架子）....

在您的情况下看起来很困难，因为它将连续三个图像..所以您需要在适配器的 getView 中尝试一些此开关（位置％3）来设置三个不同的图像

或者

使用 ListView 并重新设置 Array List 中的数据，以便每个元素都有三本书，您可以使该行的所有三个图像都可点击，并且可以使列表行不可点击且不可聚焦

# apache - htaccess 在特定子域上重定向

> ID：11174955
> 
> 赞同：0
> 
> 时间：2012-06-24T04:29:49.220
> 
> 标签：apache, .htaccess, mod-rewrite

好的，我正在与少数人一起开展一个大型协作项目，我们正在使用 SVN。所以我们有每个人的子域作为每个人的回购。有了这个，我们已经开始添加一个新功能，我们中的一些人已经有了，其中需要来自 repo 的文件。它也不是主干/分支类型的东西。

无论如何，足够的伪装，我想做的是采取 sub1.domain.com 并使其自动使用根目录之外的另一个文件夹作为默认加载目录。所以我想知道这是否甚至可以针对这个原因使用子域和 htaccess。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:35:19.233

是的你可以：

```
RewriteCond %{HTTP_HOST}  sub.example.com$ [NC]
RewriteRule ^(.*)$ http://example.com/folder/$1 [P] 
```

# python - 获取页面 Python 上的所有 URL

> ID：11174958
> 
> 赞同：1
> 
> 时间：2012-06-24T04:30:48.577
> 
> 标签：python

我正在做一些需要我获取页面上所有 URL 的事情。它似乎适用于我测试过的大多数网站，例如 microsoft.com，但它只从 google.com 返回三个。以下是相关的源代码：

```
 import urllib
   import time
   import re
   fwcURL = "http://www.microsoft.com" #URL to read
   mylines = urllib.urlopen(fwcURL).readlines()
   print "Found URLs:"
   time.sleep(1) #Pause execution for a bit
   for item in mylines:
     if "http://" in item.lower(): #For http
       print item[item.index("http://"):].split("'")[0].split('"')[0] # Remove ' and " from the end, for example in href=
     if "https://" in item.lower(): #For https
       print item[item.index("https://"):].split("'")[0].split('"')[0] # Ditto 
```

如果我的代码可以改进，或者如果有更好的方法可以做到这一点，请回复。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T04:41:25.460

尝试使用 Mechanize 或 BeautifulSoup 或 lxml。

通过使用 BeautifulSoup，您可以非常轻松地轻松获取所有 html/xml 内容。

```
import urllib2
from BeautifulSoup import BeautifulSoup
page = urllib2.urlopen("some_url")
soup = BeautifulSoup(page.read())
links = soup.findAll("a")
for link in links:
    print link["href"] 
```

[`BeautifulSoup`](http://www.crummy.com/software/BeautifulSoup/)非常容易学习和理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T04:40:16.673

首先，HTML 不是一种常规语言，像这样的简单字符串操作在所有页面上都不起作用。您需要一个真正的 HTML 解析器。我会推荐 Lxml。然后只需在树中递归并找到所需的元素即可。

其次，有些页面可能是动态的，因此您不会在 html 源代码中找到所有内容。Google 大量使用 javascript 和 AJAX（注意它如何在不重新加载页面的情况下显示结果）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T05:12:30.993

我会使用 lxml 并执行以下操作：

```
import lxml.html

page = lxml.html.parse('http://www.microsoft.com').getroot()
anchors = page.findall('a') 
```

值得注意的是，如果链接是动态生成的（通过 JS 或类似方式），那么您将不会以某种方式自动化浏览器。

# java - 这是对多个链接列表进行排序的有效方法吗？

> ID：11174959
> 
> 赞同：0
> 
> 时间：2012-06-24T04:31:51.433
> 
> 标签：java, list, linked-list

您有 n 个已排序的链表，每个链表的大小为 n。链表引用存储在数组中。将 n 个链表合并为单个排序链表的有效算法是什么？

因为它们都是排序的：

1.  加入一个循环
2.  检查所有已排序链表的第一个节点，并通过相互比较对它们进行排序。
3.  继续到下一个节点并重复直到`null`被击中。

这是最有效的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:53:08.980

只需将它们全部链接在一起（或将它们转储到一个列表中）并使用一般排序。这将为您提供 nlog(n) 性能。你的方式是n^2。

# java - Java Applet 中的 AccessControlException

> ID：11174961
> 
> 赞同：0
> 
> 时间：2012-06-24T04:32:12.300
> 
> 标签：java, security, applet, javax.imageio, accesscontrolexception

我在网页中创建了一个小程序，但每当我运行它时，我都会得到这个：

```
Exception in thread "Thread-13" java.security.AccessControlException: access denied ("java.io.FilePermission" "defensebg.png" "read")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkRead(Unknown Source)
    at java.io.File.canRead(Unknown Source)
    at javax.imageio.ImageIO.read(Unknown Source)
    at Defense.run(Defense.java:63)
    at java.lang.Thread.run(Unknown Source) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T08:17:25.203

Since I know a little about your applet and am convinced these images are an inherent part of the application, I will take a different tack to paulms4.

Forget the `File` instances. They are neither workable for this, nor necessary. Only a trusted applet can access a `File`, but even then, the only place that an applet can establish a `File` is one that points to locations on the file-system of the user's PC. Obviously the images for your applet are not available that way (OK - they might be in a browser cache, but that is no use to us).

It would be more typical (& easier) to access applet resource by `URL`. An URL can be established relative to the code-base or document-base of the applet. If the images are actually inside a Jar, they become an [embedded resource](https://stackoverflow.com/tags/embedded-resource/info) - see the info. page as to how to gain an URL.

Most of the methods in the J2SE that load a 'read only' resource will accept `File`, `URL` or `InputStream`. I use URL most often for the generic utility of it. An URL can represent a web resource, a file on the local file system, or a resource buried deep inside a Jar file (whether or on the web or the local file-system).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T04:36:50.323

> 问：我该如何解决这个问题？

A：呃——不要尝试从小程序读取客户端 PC 上的文件？

或阅读“政策文件”：

*   [http://docs.oracle.com/javase/tutorial/security/tour1/wstep2.html](http://docs.oracle.com/javase/tutorial/security/tour1/wstep2.html)

Java 小程序在安全的“沙箱”中运行。这是设计使然 - 为了最终用户的安全：

*   [http://docs.oracle.com/javase/tutorial/security/tour1/step1.html](http://docs.oracle.com/javase/tutorial/security/tour1/step1.html)

# javascript - 使用 OAuth 限制对移动网页和本机应用程序的企业 Web 服务的访问

> ID：11174962
> 
> 赞同：2
> 
> 时间：2012-06-24T04:32:14.887
> 
> 标签：javascript, authentication, ios5, oauth

我正在考虑一种我不确定 OAuth 是否适合的设计，但这是基本问题。

我有需要不同安全级别的企业网络服务。

1.  检查用户的成绩 - 需要用户名/密码
2.  更改用户等级 - 需要用户名/密码/RSA 令牌号

因此，如果应用程序想要执行 (1)，它将要求提供凭据，但是，我希望 OAuth 服务器被告知用户正在尝试访问哪个服务，并且将显示正确的字段，如这是初始登录。

现在，第二次，应用程序（浏览器或应用程序）有一个令牌，但是，这个令牌是不够的，但是，应用程序不应该知道这一点，因为安全要求可能会根据安全人员的决定而改变是合适的。

因此，当提供令牌以到达 (2) 时，它确定它还不够，因此返回错误，因此应用程序可以去尝试获取新令牌。

我还没有实现任何这些，但作为一个基本设计，我不确定 OAuth 是否适合我想做的事情，或者我是否最好编写自己的身份验证系统。

最初，Web 服务的客户端将是移动 Web 应用程序，但是，我想让它足够灵活，这样当我们编写本地手机应用程序时，它就能够使用相同的系统。因此，让应用程序需要知道我遇到问题的安全性，并且每次都将凭据传递给我不满意的 web 服务，所以我希望有一个可以使用的加密令牌，如果你满足要求对于（2），那么您可以使用相同的令牌进入（1）。

那么，OAuth 是否适合这种情况？

基于此（[https://developers.google.com/accounts/docs/OAuth2InstalledApp），OAuth](https://developers.google.com/accounts/docs/OAuth2InstalledApp)确实具有身份验证方面。

**更新：** - 看来 Open Connect ( [http://openid.net/connect/](http://openid.net/connect/) ) 在这方面可能比 OAuth 更好，但我现在只是在学习 Open Connect。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:03:52.203

在我看来，使用 oAuth 有两个好处……

1.  用户无需为您的服务创建新的用户名/密码。
2.  您不需要存储密码或拥有用于登录的 ssl 证书（也许您需要 ssl 用于其他事情，不确定）。

你提到你有两个服务。您不希望用户必须同时登录两者，因此我建议创建一个用户登录的外观（Web 服务）（使用 oAuth），因为您需要配置一个回调 url。通过该外观服务，您可以授权某些调用并将这些调用转发给其他服务。

我不确定用户[Kos](https://stackoverflow.com/users/399317/kos)是什么意思，但 oAuth 用于身份验证，而不是用于在您的应用中授权（我相信）。您需要将 oAuth 用户与该用户的内部表示以及访问权限一起映射。这仍然意味着您需要将用户存储在您身边的某个地方。唯一的事情是您不需要存储密码，也不需要开发自定义登录页面。

所以简而言之，oAuth 只能告诉你某个用户是已知的并且是经过身份验证的。剩下的就看你了。实施 oAuth 并不难，但也不是微不足道的。所以这让我们回到了我之前提到的两个好处，你必须决定是否以及为什么要走这条路。

# php - PHP 动态 Dropbox

> ID：11174963
> 
> 赞同：0
> 
> 时间：2012-06-24T04:32:30.300
> 
> 标签：php, html, sql

我创建了以下代码，它使下拉列表能够从 sql db 中获取所有值，它能够获取数字但不显示..

```
 <?php
$link = mysql_connect('www.xxxxxxxx.com', 'xxxxxxx', 'xxxxxxx');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("xxxxxxxxxxxxxxxxxxxxx", $link);

function print_dropdown($query)
{
$queried = mysql_query($query);
$menu = '<select name="Topic">';
while ($result = mysql_fetch_array($queried)) {
$menu .= '
<option value="' . $result['topic'] .'</option>';
}
$menu .= '</select>';
return $menu;
}

echo print_dropdown("SELECT topic FROM learning_outcome");
?> 
```

但输出似乎是空的.. :(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T04:39:43.360

```
$menu .= '<option value="' . $result['topic'] .'</option>'; 
```

应该是这样的：

```
$topic = htmlspecialchars($result['topic']);
$menu .= '<option value="' . $topic .'">' . $topic . '</option>'; 
```

# iphone - 本地化 iPhone 应用程序

> ID：11174966
> 
> 赞同：0
> 
> 时间：2012-06-24T04:33:42.043
> 
> 标签：iphone, xcode, ipad, internationalization, nslocalizedstring

我有一个基本的 iPhone/iPad 应用程序，它有一个 ; 一种。列表视图 & b. 详细视图

列表视图在表格视图中显示一组列表（链接 1、链接 2、链接 3 等）

单击任何链接时，将显示相应的详细视图（详细视图 1、详细视图 2、详细视图 3 等）详细视图实际上显示在 Web 视图中（因此实际上是[http://mySite的页面.com/Detail1.html](http://mySite.com/Detail1.html) , [http://mySite.com/Detail2.html](http://mySite.com/Detail2.html)等）

现在我的问题是我的详细视图目前仅以英语显示。那么有什么方法可以让我用不同的语言显示内容（不确定我们是否可以控制外部 Web 视图显示的内容）。将列表视图转换为不同的语言也很好，但我的主要工作是在“详细”网络视图中。它实际上是大量的文本内容/数据。

请帮助我并建议如何将它们转换为动态显示不同的语言。此外，如果转换为本地语言有助于提高销售量，任何要显示的统计数据都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:54:24.573

看看 NSLocalizedString(NSString, NSString)。它允许您在应用程序的 ObjC 部分中本地化字符串。这将允许您翻译您的列表视图。

要本地化详细信息页面，您必须为每种语言创建一个新的详细信息页面，然后使用 NSLocalizedString 将链接本地化到详细信息页面。

希望我能指出你正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:02:31.397

看一眼：

[http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

[http://www.icalocalize.com/site/tutorials/iphone-applications-localization-guide/](http://www.icanlocalize.com/site/tutorials/iphone-applications-localization-guide/)

```
NSLocalizedString(@"Hello World", @"hello message") 
```

# javascript - 带有jquery的边框底部动画

> ID：11174968
> 
> 赞同：4
> 
> 时间：2012-06-24T04:34:28.500
> 
> 标签：javascript, jquery, html, delay

我正在尝试使用 jquery 创建边框底部动画，但我尝试无济于事。有什么建议吗？

***jQuery代码***

```
$("#navigation ul li span").hover(function(){
    $(this)
       .delay(5000)
       .css("border-bottom-color", '#FFF')
       .css("border-bottom-style","solid")
       .css("border-bottom-width","1px");
}

$("#navigation ul li span").mouseout(function(){
    $(this).css("border","");
}); 
```

***HTML 代码***

```
 <nav id="navigation">
    <ul>
      <li data-tab-item="sliders" class="current"><span class="tabcurrent">BRAND ADVERTISING</span></li>
      <li data-tab-item="identity"><span>IDENTITY</span></li>
      <li data-tab-item="print"><span>PRINT</span></li>
      <li data-tab-item="events"><span>EVENTS</span></li>
      <li data-tab-item="web"><span>WEB</span></li>
      <li data-tab-item="bannerAds"><span>BANNER ADS</span></li>
    </ul>
  </nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:46:07.817

***CSS***

```
#navigation ul li span {
    border-bottom-style: solid;
    border-bottom-width: 0px;
    border-color: red
} 
```

***jQuery***

```
$("#navigation ul li span").hover(function() {
    $(this).animate({
        "border-bottom-width": "2px"
    }, 2000)
}, function() {
    $(this).stop().animate({
        "border-bottom-width": "0px",
        "border-color" : ""
    }, 2000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:03:25.097

我找到了答案：

和答案的例子是[here](http://jsfiddle.net/gabeDel/XnaXy/)

```
$("#navigation ul li span").hover(function() {
    $(this).delay(2000).queue(function(next) {
        $(this)
            .css("border-bottom-color", '#000000')
            .css("border-bottom-style", "solid")
            .css("border-bottom-width", "1px");
    });
});
$("#navigation ul li span").mouseout(function() {
    $(this).css("border", "");
});​ 
```

信用::[使用 jQuery delay() 和 css()](https://stackoverflow.com/questions/5396119/using-jquery-delay-with-css)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:41:30.397

请尝试此代码。这肯定会奏效。实际上，您使用的是 mosout 事件，而不是 mouseleave()。

```
$(document).ready(function () {

        $("#navigation ul li span").live("hover", function () {
            $(this).delay(5000)
   .css("border-bottom-color", 'red')
   .css("border-bottom-style", "solid")
   .css("border-bottom-width", "1px");
        });

        $("#navigation ul li span").live("mouseleave", function (e) {

            if ($(this).css('border-bottom-color') == 'rgb(255, 0, 0)') {
                $(this).css("border-bottom-color", "white");

            }

        });

    }); 
```

如果这可行，那么请阅读 mouseleave() 的使用。

# android - C2DM 消息的有效期是多久？

> ID：11174975
> 
> 赞同：0
> 
> 时间：2012-06-24T04:35:37.423
> 
> 标签：android, message, android-c2dm, duration

我是 android 开发新手，现在我正在为 android 设备实现 C2DM。我已经使用下面的代码来获取设备的注册 ID。

```
public void register(View view) {
    Intent intent = new Intent("com.google.android.c2dm.intent.REGISTER");
    intent.putExtra("app",PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    intent.putExtra("sender", "youruser@gmail.com");
    startService(intent);
} 
```

我正在关注[本](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)教程以进行 C2DM 实施。

现在我的问题是设备是否关闭了更长的时间（例如 15 天），所以我想知道 C2DM 消息的有效期是多久？

如果之后设备开机并且应用服务器没有发送下一条 C2DM 消息，那么设备会收到该 C2DM 消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:11:56.647

根据[http://www.hightechno.info/2011/08/c2dm-tutorial-send-push-notifications.html](http://www.hightechno.info/2011/08/c2dm-tutorial-send-push-notifications.html)

在同一个查询中，另一个属性很有趣：`collapse_key`. 该密钥是赋予类似性质的消息的标识符。因此，`if the phone is switched off and that several messages with the same identifier C2DM accumulate on the server, only the latter will be sent when the appliance is turned o`n。因此有必要仔细选择这些标识符。. .

```
delay_while_idle 
```

*   如果包含，则表示如果设备空闲，则不应立即发送消息。服务器将等待设备变为活动状态，然后仅发送每个 collapse_key 值的最后一条消息。选修的。

根据[如何设置 android c2dm 消息的有效时间段？](https://stackoverflow.com/questions/9595230/how-to-set-valid-time-period-for-android-c2dm-message)

*   我们的服务器应用程序仅在特定时间发送消息

    或者

*   您的 Android 应用程序一直接收 C2DM 消息，但在某些时候您会视情况忽略/处理。

因为这个用于推送的[链接](http://android.appstorm.net/how-to/remote/how-to-push-notifications-to-your-android-with-pushover/)看起来是第三方应用程序

如果您的手机已连接到 Internet，那么它将立即收到来自 Pushover 服务器的通知。如果没有，它将在您连接之前保留 30 天。

您的通知是安全的，因为所有传输都是加密的。

# java - 在运行时更改十六进制字符串

> ID：11174976
> 
> 赞同：0
> 
> 时间：2012-06-24T04:35:43.773
> 
> 标签：java, android, colors, hex

假设我有 0xFF222222 并希望它在 5 分钟内达到 0xFF888888。使用 Java (android) 改变它的最简单方法是什么？

RGB 必须始终保持相等，这意味着 0xFF222222 -> 0xFF232323 -> 0xFF242424 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:42:41.540

使用计时器任务在每次执行时添加 0x10101，直到达到 0xFF888888

很有可能您实际上并不想要一个字符串，而是一个诸如 int 之类的数值 - 尽管如果您确实想要一个字符串，使用 int 完成工作并在需要时使用 Integer.toHexString() 转换结果很容易.

# android - SQLite 查询的逻辑错误

> ID：11174987
> 
> 赞同：0
> 
> 时间：2012-06-24T04:37:34.857
> 
> 标签：android, sqlite, android-contentprovider

所以我正在为我的班级申请一个用户提交表单并将数据记录在数据库中的应用程序。现在，我正在尝试实施一项检查，检查用户尝试选择的用户名是否存在于数据库中。这是我现在的代码：

```
//Username duplicate check                                                                                                                       
String mSelection = MyContentProvider.COLUMN_USERNAME + "= ?";
String[] mSelectionArgs = new String[] { "Username" };
String[] mProjection = new String[]{MyContentProvider.COLUMN_USERNAME};
mCursor = getContentResolver().query(MyContentProvider.CONTENT_URI,
                                     mProjection,
                                     mSelection,
                                     mSelectionArgs, 
                                     null);
if (mCursor.moveToFirst()){
if (userName.getText().toString().equals(mCursor.getString(mCursor.getColumnIndex(MyContentProvider.COLUMN_USERNAME)))){
    submitCheck = false;
    userName.setHint("Username taken");
} 
```

} mCursor.close();

运行此命令时，if 语句会出错。这是日志猫：

```
06-24 00:56:55.125: E/AndroidRuntime(907): FATAL EXCEPTION: main
06-24 00:56:55.125: E/AndroidRuntime(907): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 0
06-24 00:56:55.125: E/AndroidRuntime(907):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:400)
06-24 00:56:55.125: E/AndroidRuntime(907):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
06-24 00:56:55.125: E/AndroidRuntime(907):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
06-24 00:56:55.125: E/AndroidRuntime(907):  at android.database.CursorWrapper.getString(CursorWrapper.java:114)
06-24 00:56:55.125: E/AndroidRuntime(907):  at com.connor.black.HomeWork2Activity$1.onClick(HomeWork2Activity.java:132)
06-24 00:56:55.125: E/AndroidRuntime(907):  at android.view.View.performClick(View.java:3511)
06-24 00:56:55.125: E/AndroidRuntime(907):  at android.view.View$PerformClick.run(View.java:14105)
06-24 00:56:55.125: E/AndroidRuntime(907):  at android.os.Handler.handleCallback(Handler.java:605)
06-24 00:56:55.125: E/AndroidRuntime(907):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-24 00:56:55.125: E/AndroidRuntime(907):  at android.os.Looper.loop(Looper.java:137)
06-24 00:56:55.125: E/AndroidRuntime(907):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-24 00:56:55.125: E/AndroidRuntime(907):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 00:56:55.125: E/AndroidRuntime(907):  at java.lang.reflect.Method.invoke(Method.java:511)
06-24 00:56:55.125: E/AndroidRuntime(907):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-24 00:56:55.125: E/AndroidRuntime(907):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-24 00:56:55.125: E/AndroidRuntime(907):  at dalvik.system.NativeStart.main(Native Method) 
```

以下是我的内容提供者的一些内容：

```
public class MyContentProvider extends ContentProvider{
public final static String DBNAME = "FormStorage";
public static final String AUTHORITY = "com.connor.black.provider";
public final static String TABLE_NAMESTABLE = "formstable";
private static UriMatcher sUriMatcher;

public final static String COLUMN_FIRSTNAME = "FirstName";
public final static String COLUMN_LASTNAME = "LastName";
public final static String COLUMN_PHONE = "PhoneNumber";
public final static String COLUMN_EMAIL = "Email";
public final static String COLUMN_USERNAME = "Username";
public final static String COLUMN_PASSWORD = "Password";
public final static String COLUMN_GENDER = "Gender";
public final static String COLUMN_COUNTRY = "Country";
public static final Uri CONTENT_URI = Uri.parse("content://com.connor.black.provider/" + TABLE_NAMESTABLE);

private static final String SQL_CREATE_MAIN = "CREATE TABLE " + TABLE_NAMESTABLE + "("+"_ID INTEGER PRIMARY KEY, "+
                                                                    "FirstName TEXT, " +
                                                                    "LastName TEXT, " +
                                                                    "PhoneNumber TEXT, " +
                                                                    "Email TEXT, " +
                                                                    "Username TEXT, " +
                                                                    "Password TEXT, " +
                                                                    "Gender TEXT, " +
                                                                    "Country TEXT)"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:42:39.637

您不应该**将**列索引值直接硬编码到您的代码中。这是因为，

1.  这是糟糕的设计。

2.  它使您的项目难以维护（即，如果您稍后将一列添加到表中，则该列的整数可能会更改，从而破坏您的代码）。

3.  无法确定是否`0`对应于用户名列。整数值由管理您的 SQLite 数据库的内部库分配……您**永远不**应该依赖内部库，因为 Android 团队可以随时更改实现。

我建议您将代码更改为以下内容：

```
int userCol = mCursor.getColumnIndex(MyContentProvider.USERNAME_COLUMN);
mCursor.getString(userCol); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:42:48.950

看起来第 0 个是表中的 _ID 尝试使用第 5 个索引......

# android - 安卓，OpenGL ES 1.0，阿尔法

> ID：11174991
> 
> 赞同：2
> 
> 时间：2012-06-24T04:38:55.630
> 
> 标签：android, opengl-es, opengl-es-1.1

我是 OpenGLES 的新手，我试图用 alpha 绘制一个矩形，但 alpha 在屏幕上没有受到影响。请帮我弄清楚我在哪里出局。

```
GLES10.glEnableClientState(GL10.GL_VERTEX_ARRAY);
GLES10.glClear(GL10.GL_COLOR_BUFFER_BIT);
GLES10.glColor4f(0.5f, 0.5f, 0.5f, 0.1f);  <-- NOT Working , please help 0.1 alpha not taken   
GLES10.glPushMatrix();GLES10.glEnableClientState(GL10.GL_VERTEX_ARRAY);
GLES10.glVertexPointer(
        3,
        GL10.GL_FLOAT,
        0,
        RendererImpl.makeFloatBuffer(new float[] { -160.0f, -100.0f,
                0.0f, 160.0f, -100.0f, 0.0f, 160.0f, 100.0f, 0.0f,
                    -160.0f, 100.0f, 0.0f }));
GLES10.glDrawArrays(GL10.GL_TRIANGLE_FAN, 0, 4);
GLES10.glDisableClientState(GL10.GL_VERTEX_ARRAY);
GLES10.glPopMatrix();
GLES10.glFlush(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T05:14:57.110

如果您希望您绘制的对象是透明的，那么您首先必须启用混合。

首先绘制背景，然后设置以下选项：

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

然后尝试像上面那样绘制透明对象。

# user-interface - ATL GUI 创建工具

> ID：11174996
> 
> 赞同：0
> 
> 时间：2012-06-24T04:40:30.560
> 
> 标签：user-interface, atl

是否有某种工具可以使用 ATL for C/C++ 创建用户界面？就像 Visual Studio 的 UI Creator。

我找不到我要找的组件，所以我需要一些关于 ATL 组件的列表。或者，只是某种 UI 创建器，我可以将诸如文本框或按钮之类的组件从工具箱拖放到我的项目中。

有没有类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:50:00.587

据我所知，我会用 c++ 创建你的库并用 c# 制作你的 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:58:03.703

我在 Visual Studio 2010 中找到了 RC 编辑器。我不确定我是如何找到它的，但它神奇地弹出了。我想我得睡一会儿了。

谢谢你。

# python - python中的BFS来自预购和有序

> ID：11174997
> 
> 赞同：3
> 
> 时间：2012-06-24T04:40:34.107
> 
> 标签：python, binary-tree, breadth-first-search

（Python 2.7）我需要打印具有给定预序和中序的二叉树的 bfs，以及预序和中序字符串的最大长度。我知道它是如何工作的，例如：preorder:ABCDE inorder:CBDAE max length:5

```
 A
             /     \
           B        E
          / \         
         C   D 
```

BFS:ABECD

到目前为止，我已经弄清楚了

```
class BinaryTree:
    def __init__ (self, value, parent=None):
            self.parent = parent
            self.left_child = None
            self.right_child = None
            self.value=value

    def setLeftChild(self, child=None):
            self.left_child = child
            if child:
                child.parent = self

    def setRightChild(self, child=None):
            self.right_child = child
            if child:
                child.parent = self

preorder={}
inorder={}

print "max string length?"
i=int(raw_input())
count=0
while i>count:
    print"insert the preorder"
    preorder[raw_input()]=count
    count=count+1
print "preorder is",sorted(preorder, key=preorder.get)

count2=0
while i>count2:
    print"insert the inorder"
    inorder[raw_input()]=count2
    count2=count2+1
print "inorder is",sorted(inorder, key=inorder.get)
root= 
```

我已经想出了如何在 python 中创建二叉树，但问题是我不知道如何添加下一个孩子的值。如您所见，我已经有了根并想出了如何插入第一个孩子（左和右），但我不知道如何添加下一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:07:02.897

我想基本上问题是如何从给定的前序和有序中获取树的所有父-左子对和父-右子对

要获得 parent-leftChild 对，您需要检查： 1) node1 在前序中是否在 node2 之后；2）如果node2按顺序在node1前面

对于您的示例预购：ABCDE 中序：CBDAE

*   B在前序中在A之后，B在前序中在A之前，因此B是A的左孩子。

*   D在前序中紧跟在C之后，但在顺序上D也在C之后，因此D不是C的左孩子

您可以使用类似的技巧来获取所有 parent-rightChild 对

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T04:48:53.190

要将子节点添加到任何节点，只需获取要添加子节点的节点并在其上调用 setLeftChild 或 setRightChild。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T05:40:58.093

如果您使用 BFS - 理想情况下希望使用图形 - 一个优秀的库是[networkx](http://networkx.lanl.gov/index.html)

一个例子：

```
import networkx as nx

g = nx.DiGraph()
g.add_edge('A', 'B')
g.add_edge('A', 'E')
g.add_edge('B', 'C')
g.add_edge('B', 'D')

print 'A' + ''.join(node[1] for node in (nx.bfs_edges(g, 'A')))

# ABECD 
```