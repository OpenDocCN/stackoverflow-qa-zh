# StackOverflow 问答 10617000-10617999

# css - css3 中@keyframes 的用途

> ID：10617006
> 
> 赞同：1
> 
> 时间：2012-05-16T10:51:41.963
> 
> 标签：css, css-animations

`@keyframes`我在css3代码的某个地方遇到过。我在stackoverflow中找不到详细信息。甚至[这个问题](https://stackoverflow.com/questions/3453257/what-is-the-purpose-of-the-symbol-in-css)也回答了除@keyframes 之外的@ 规则。

有人可以详细解释或提供有关@keyframes 的良好链接吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:57:44.530

at-rule 旨在定义 CSS3 动画，`@keyframes`并且通常在真正的 CSS 代码中具有供应商前缀，因为标准化/实现的尘埃尚未尘埃落定。[您可以从他们的博客文章](http://www.webkit.org/blog/324/css-animation-2/)中找到更多关于 WebKit 的实现 ( `@-webkit-keyframes`)的信息……或者[这里](http://www.google.ru/search?ie=UTF-8&q=css3+keyframes)的一般内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:59:39.033

阅读：[http ://css3.bradshawenterprises.com/animations/](http://css3.bradshawenterprises.com/animations/)

他们只是为动画的不同阶段设置参数，这让您可以使用 CSS 执行复杂的动画。

# jquery-mobile - 在 Aptana 中支持 jQuery mobile

> ID：10617009
> 
> 赞同：3
> 
> 时间：2012-05-16T10:51:59.167
> 
> 标签：jquery-mobile, aptana, aptana3

我正在寻找一个开发包来扩展 aptana 的功能以支持 jQuery Mobile 代码。有人知道好的插件吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:01:36.400

我在 aptana 中没有找到 JQuery Mobile 的任何代码帮助，但我发现[Titanium Studio](http://www.appcelerator.com/platform/titanium-studio)提供了 JQuery Mobile 支持。它是另一个基于 Eclipse 的 IDE，专为移动 Web 开发而设计。

看到这个帮助我的 Stackoverflow 问题：[jQuery Mobile Content Assist](https://stackoverflow.com/questions/10834459/jquery-mobile-content-assist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T23:46:21.977

您可以将它作为一个捆绑包激活，有关更多信息，请参阅此问题中的@craig.kaminsky 答案，我使用了它并且它有效：

[如何在 Aptana Studio 3 中启用 jQuery 支持](https://stackoverflow.com/questions/4721124/how-to-enable-jquery-support-in-aptana-studio-3)

如果您没有安装 git 并发现任何问题，这可能会有所帮助：

[新 Aptana Studio 3 上的 jQuery](https://stackoverflow.com/questions/6449863/jquery-on-new-aptana-studio-3)

# devexpress - 如何在 devexpress gridview 中禁用超链接按钮

> ID：10617010
> 
> 赞同：0
> 
> 时间：2012-05-16T10:52:18.293
> 
> 标签：devexpress

我正在为 Windows 应用程序使用 devexpress。我有一个填充数据的 devxgrid，在最后一列，我有一个名为取消的超链接按钮。当我单击取消按钮时，它会执行一些效果很好的功能。之后，应禁用相应的取消按钮。如何使其禁用？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:54:56.593

有两种方法可以实现此任务：

1.  创建两个 ButtonEdit 存储库项。一个带有启用按钮，另一个带有禁用按钮。然后处理[GridView.CustomRowCellEdit](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_CustomRowCellEdittopic)事件并`e.RepositoryItem`根据特定条件将必要的存储库项传递给参数。有关其他信息，请参阅[为单个单元格分配编辑器](http://documentation.devexpress.com/#WindowsForms/CustomDocument747)帮助主题。

2.  如果按钮编辑器有多个按钮并且它们的`Enabled`状态必须动态更改，您可以通过处理[GridView.CustomDrawCell](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_CustomRowCellEdittopic)事件来实现此功能，如以下 DevExpress 论坛线程所示：

    [如何在 ButtonEdit 列中显示特定单元格的禁用按钮](http://www.devexpress.com/Support/Center/kb/p/A2815.aspx) 。

**但是您应该遵循第一种方法，在*hyperlinkEdit*的情况下，为您的实现逻辑添加一个带有 bool 值的自定义列，这将为您提供条件，即您将显示启用还是禁用 hyperlinkEdit 存储库编辑。**

*如果您只想将此设置为只读，那么您可以按以下方式进行操作：*

您可以通过处理使编辑器只读`CustomRowCellEdit`：

```
private void gridView1_CustomRowCellEdit(object sender, CustomRowCellEditEventArgs e)
{
    if(code goes here)
        e.RepositoryItem.ReadOnly = true;
} 
```

您还可以通过处理来防止显示编辑器`ShowingEditor`：

```
private void gridView1_ShowingEditor(object sender, CancelEventArgs e)
{
    if (code goes here)
        e.Cancel = true;
} 
```

希望这可以帮助您解决您的任务..

# android - FileNotFoundException：解码流时没有内容提供者

> ID：10617012
> 
> 赞同：3
> 
> 时间：2012-05-16T10:52:18.193
> 
> 标签：android, filenotfoundexception, android-contentprovider

我正在使用从图片库返回的 Uri 来创建位图。我有一个解码给定 Uri 的方法。当我从从 onActivityResult 获取此 Uri 的同一个 Activity 调用此方法时，它工作正常。但是，如果从任何其他 Activity 调用相同的方法，我会得到 FileNotFoundException。
我应该怎么做才能在我想要的任何活动中完成这项工作？
解码方法：

```
public static Bitmap decodeUri(Context c, Uri uri, final int requiredSize) 
        throws FileNotFoundException {
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(c.getContentResolver().openInputStream(uri), null, o);

    int width_tmp = o.outWidth
            , height_tmp = o.outHeight;
    int scale = 1;

    while(true) {
        if(width_tmp / 2 < requiredSize || height_tmp / 2 < requiredSize)
            break;
        width_tmp /= 2;
        height_tmp /= 2;
        scale *= 2;
    }

    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize = scale;
    return BitmapFactory.decodeStream(c.getContentResolver().openInputStream(uri), null, o2);
} 
```

我调用上述方法的部分活动：
`imageUri = data.getData();`
`myImage.setImageBitmap(UriDecoder.decodeUri(this, data.getData(), 170));`

Logcat 消息：
`05-16 13:25:37.969: W/System.err(11480): java.io.FileNotFoundException: No content provider: /external/images/media/17 05-16 13:25:37.979: W/System.err(11480): at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:508) 05-16 13:25:37.979: W/System.err(11480): at android.content.ContentResolver.openInputStream(ContentResolver.java:346) 05-16 13:25:37.979: W/System.err(11480): at com.utilities.UriDecoder.decodeUri(UriDecoder.java:16) 05-16 13:25:37.979: W/System.err(11480): at com.statistics.MyAdapter.getView(MyAdapter.java:55) 05-16 13:25:37.979: W/System.err(11480): at android.widget.AbsListView.obtainView(AbsListView.java:1442) 05-16 13:25:37.979: W/System.err(11480): at android.widget.ListView.measureHeightOfChildren(ListView.java:1216) 05-16 13:25:37.989: W/System.err(11480): at android.widget.ListView.onMeasure(ListView.java:1127) 05-16 13:25:37.989: W/System.err(11480): at android.view.View.measure(View.java:8325) 05-16 13:25:37.989: W/System.err(11480): at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138) 05-16 13:25:37.989: W/System.err(11480): at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017) 05-16 13:25:37.989: W/System.err(11480): at android.widget.LinearLayout.measureVertical(LinearLayout.java:386) 05-16 13:25:37.989: W/System.err(11480): at android.widget.LinearLayout.onMeasure(LinearLayout.java:309) 05-16 13:25:37.989: W/System.err(11480): at android.view.View.measure(View.java:8325) 05-16 13:25:37.999: W/System.err(11480): at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138) 05-16 13:25:37.999: W/System.err(11480): at android.widget.FrameLayout.onMeasure(FrameLayout.java:250) 05-16 13:25:37.999: W/System.err(11480): at android.view.View.measure(View.java:8325) 05-16 13:25:37.999: W/System.err(11480): at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138) 05-16 13:25:37.999: W/System.err(11480): at android.widget.FrameLayout.onMeasure(FrameLayout.java:250) 05-16 13:25:38.009: W/System.err(11480): at android.view.View.measure(View.java:8325) 05-16 13:25:38.009: W/System.err(11480): at android.view.ViewRoot.performTraversals(ViewRoot.java:847) 05-16 13:25:38.009: W/System.err(11480): at android.view.ViewRoot.handleMessage(ViewRoot.java:1883) 05-16 13:25:38.009: W/System.err(11480): at android.os.Handler.dispatchMessage(Handler.java:99) 05-16 13:25:38.009: W/System.err(11480): at android.os.Looper.loop(Looper.java:130) 05-16 13:25:38.009: W/System.err(11480): at android.app.ActivityThread.main(ActivityThread.java:3737) 05-16 13:25:38.009: W/System.err(11480): at java.lang.reflect.Method.invokeNative(Native Method) 05-16 13:25:38.019: W/System.err(11480): at java.lang.reflect.Method.invoke(Method.java:507) 05-16 13:25:38.019: W/System.err(11480): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:894) 05-16 13:25:38.019: W/System.err(11480): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:652) 05-16 13:25:38.019: W/System.err(11480): at dalvik.system.NativeStart.main(Native Method)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:07:12.760

请尝试使用此内容 URI：

```
content://media/external/images/media/ 
```

# mysql - mysql查询根据推荐的成员生成佣金报告

> ID：10617013
> 
> 赞同：3
> 
> 时间：2012-05-16T10:52:18.470
> 
> 标签：mysql, sql, select, group-by

一个人从他推荐的朋友的购买中获得 10% 的佣金。

有两个表：

1.  参考表
2.  交易表

参考表

```
Person_id    Referrer_id
3             1
4             1
5             1
6             2 
```

交易表

```
 Person_id   Amount     Action     Date
   3           100        Purchase   10-20-2011
   4           200        Purchase   10-21-2011
   6           400        Purchase   12-15-2011
   3           200        Purchase   12-30-2011
   1            50        Commision  01-01-2012
   1            10        Cm_Bonus   01-01-2012
   2            20        Commision  01-01-2012 
```

如何为 Referrer_Person_id=1 获取以下结果集

```
Month     Ref_Pur  Earn_Comm   Todate_Earn_Comm   BonusRecvd  Paid   Due
10-2011    300      30          30                  0           0     30
11-2011      0       0          30                  0           0     30
12-2011    200      20          50                  0           0     50
01-2012      0       0          50                 10          50      0 
```

上面使用的标签是：

```
Ref_Pur          = Total Referred Friend's Purchase for that month

Earn_Comm        = 10% Commision earned for that month

Todate_Earn_Comm = Total Running Commision earned upto that month 
```

我写的MYSQL代码

```
SELECT dx1.month,
       dx1.ref_pur,
       dx1.earn_comm,
       ( @cum_earn := @cum_earn + dx1.earn_comm ) as todate_earn_comm

FROM

(
    select date_format(`date`,'%Y-%m') as month,
           sum(amount) as ref_pur , 
           (sum(amount)*0.1) as earn_comm
    from transaction tr, reference rf
    where tr.person_id=rf.person_id and
          tr.action='Purchase' and
          rf.referrer_id=1
    group by date_format(`date`,'%Y-%m')
    order by date_format(`date`,'%Y-%m')

)as dx1

JOIN (select @cum_earn:=0)e; 
```

如何加入查询以包括不依赖于参考表的 BonusRecvd、Paid 和 Due trnsactions？

并为“11-2011”月生成行，即使该月没有发生 trnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:59:42.780

如果您想在结果中包含佣金支付和奖金，您可能需要将相应的行 ( `Action IN ('Commision', 'Cm_Bonus')`) 包含到您用于计算结果的初始数据集中。或者，至少，这就是我会做的，它可能是这样的：

```
SELECT t.Amount, t.Action, t.Date
FROM Transaction t LEFT JOIN Reference r ON t.Person_id = r.Person_id
WHERE r.Referrer_id = 1 AND t.Action = 'Purchase'
   OR t.Person_id   = 1 AND t.Action IN ('Commision', 'Cm_Bonus') 
```

并且在计算每月 SUM 时，您可以使用 CASE 表达式来区分与不同类型的`Action`. 查询的相应部分可能如下所示：

```
…
IFNULL(SUM(CASE Action WHEN 'Purchase'  THEN Amount END)      , 0) AS Ref_Pur,
IFNULL(SUM(CASE Action WHEN 'Purchase'  THEN Amount END) * 0.1, 0) AS Earn_Comm,
IFNULL(SUM(CASE Action WHEN 'Cm_Bonus'  THEN Amount END)      , 0) AS BonusRecvd,
IFNULL(SUM(CASE Action WHEN 'Commision' THEN Amount END)      , 0) AS Paid
… 
```

在计算`Due`值时，您可以初始化另一个变量并使用它与 非常相似`@cum_earn`，除了您还需要减去`Paid`，如下所示：

```
(@cum_due := @cum_due + Earn_Comm - Paid) AS Due 
```

最后一个问题似乎缺少几个月。为了解决这个问题，我会做以下事情：

1.  从要处理的子集中获取第一个和最后一个日期（通过本文开头的查询获得）。

2.  获取每个日期的对应月份（即另一个日期，它只是同一个月的第一天）。

3.  使用数字表，生成涵盖上一步中计算的两个月份的列表。

4.  过滤出要处理的子集中存在的月份，并使用剩余的月份将虚拟交易添加到子集中。

如您所见，执行这些步骤时，需要触摸两次“要处理的子集”。因此，为了提高效率，我会将该子集插入到一个临时表中并使用该表，而不是多次执行相同的（子）查询。

第 3 步中提到的数字表是我建议随身携带的工具。你只需要初始化一次，如果你原谅双关语，它对你的用途可能会很多。这是填充数字表的一种方法：

```
CREATE TABLE numbers (n int);
INSERT INTO numbers (n) SELECT 0;
INSERT INTO numbers (n) SELECT cnt + n FROM numbers, (SELECT COUNT(*) AS cnt FROM numbers) s;
INSERT INTO numbers (n) SELECT cnt + n FROM numbers, (SELECT COUNT(*) AS cnt FROM numbers) s;
INSERT INTO numbers (n) SELECT cnt + n FROM numbers, (SELECT COUNT(*) AS cnt FROM numbers) s;
INSERT INTO numbers (n) SELECT cnt + n FROM numbers, (SELECT COUNT(*) AS cnt FROM numbers) s;
INSERT INTO numbers (n) SELECT cnt + n FROM numbers, (SELECT COUNT(*) AS cnt FROM numbers) s;
INSERT INTO numbers (n) SELECT cnt + n FROM numbers, (SELECT COUNT(*) AS cnt FROM numbers) s;
INSERT INTO numbers (n) SELECT cnt + n FROM numbers, (SELECT COUNT(*) AS cnt FROM numbers) s;
INSERT INTO numbers (n) SELECT cnt + n FROM numbers, (SELECT COUNT(*) AS cnt FROM numbers) s;
/* repeat as necessary; every repeated line doubles the number of rows */ 
```

似乎就是这样。我不会在这里发布完整的解决方案，以免您有机会尝试以自己的方式使用上述建议，以防您热衷于使用。但是，如果您正在苦苦挣扎或只是想验证它们是否*可以*应用于所需的效果，您可以尝试[这个 SQL Fiddle 页面](http://sqlfiddle.com/#!2/3c8c9/35)以获得“实际中”的完整解决方案。

# javascript - IE8 中的 JavaScript 事件原型

> ID：10617014
> 
> 赞同：5
> 
> 时间：2012-05-16T10:52:19.257
> 
> 标签：javascript, internet-explorer-8, prototype, dom-events

我正在尝试向事件原型添加一个方法。为了调用/设置`preventDefault()`，或者在 IE 中使用`returnValue = false`- 如果需要 - `stopPropagation()`/ `cancelBubble = true;`。我认为下面的代码就足够了。

```
Event = Event || window.Event;
//^^ makes the fiddle work on IE8 ^^
if(!(Event.prototype.stopEvent))
{
    Event.prototype.stopEvent = function(propagate)
    {
        "use strict";
        propagate = (propagate ? true : false);
        if (this.preventDefault)
        {
            this.preventDefault();
            if (propagate === false)
            {
                this.stopPropagation();
            }
        }
        else
        {
            this.returnValue = false;
            this.cancelBubble = !propagate;
        }
        return this;
    };
} 
```

[正如您在此处看到的那样](http://jsfiddle.net/v4sTx/4/)，这似乎可行。这个小提琴显示`OK`在 IE8、firefox 和 chrome 中。虽然，当我将它添加到我的脚本时，IE8 在第一行中断，说*'Event is undefined'*。离开`"use strict";`根本没有区别。

不情愿地，我也尝试了这个：

```
if (typeof Event === 'undefined')
{
    var Event = window.Event || window.event;//FFS IE :-(
} 
```

但无济于事：`Error: 'Event.prototype' is null or not an object`，所以我又得到了 1 行。问题是，整个原型方法是从我的脚本复制粘贴，但我在这里忽略了什么？有什么想法/建议吗？
谢谢

*PS：我喜欢 Pure JavaScript，所以请不要建议使用 jQuery、prototypejs、dojo 等作为解决方案。我刚刚摆脱了 jQuery。（我喜欢 jQuery，但在这种情况下不需要它）*

* * *

**更新**

恐怕事情已经变得更糟了。我找到[了这个 MSDN 参考](http://msdn.microsoft.com/en-us/library/dd229916(v=vs.85).aspx)。整个页面处理 DOM 元素原型。可以公平地说它们在 IE8 中可用（在某种程度上）。在这个页面上，这段代码引起了我的注意：

```
Event.prototype.stopPropagation = function ()
{
  this.cancelBubble = true;
};
Event.prototype.preventDefault = function ()
{
  this.returnValue = false;
}; 
```

它可以在页面下方约 3/4 的标题为 的部分中找到`"Powerful Scenarios"`。在我看来，这与我想做的事情完全相同，但更重要的是：如果我通过 jsfiddle 尝试此代码，它甚至都不起作用，而我的 jsfiddle（使用我的代码）确实可以在 IE8 上运行。这只是片段的最后几行，但据我所知，这几行代码应该可以正常工作。我已将它们更改如下：

```
Event.prototype.stopPropagation = function ()
{
    if (this.stopPropagation)
    {
        return this.stopPropagation();
    }
    this.cancelBubble = true;
};
Event.prototype.preventDefault = function ()
{
    if (this.preventDefault)
    {
        return this.preventDefault();
    }
    this.returnValue = false;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:03:13.323

我最近有（另一个）脑电波，我想我找到了一种更好的方法来增强事件原型。严格来说，`Event`原型在 IE 中是不可访问的（<9），但如果你从一个实例（嗯，实例：）返回，我发现它是可访问的`window.event`。所以这是一个适用于所有主要浏览器（和 IE8 - 而不是 7）的片段：

```
(function()
{
        function ol(e)
        {//we have an event object
            e = e || window.event;
            if (!e.stopEvent)
            {
                if (Object && Object.getPrototypeOf)
                {//get the prototype
                    e = Object.getPrototypeOf(e);
                }
                else
                {//getting a prototype in IE8 is a bit of a faff, this expression works on most objects, though
                 //it's part of my custom .getPrototypeOf method for IE
                    e = this[e.constructor.toString().match(/(function|object)\s+([A-Z][^\s(\]]+)/)[2]].prototype;
                }
                e.stopEvent = function(bubble)
                {//augment it (e references the prototype now
                    bubble = bubble || false;
                    if (this.preventDefault)
                    {
                        this.preventDefault();
                        if (!bubble)
                        {
                            this.stopPropagation();
                        }
                        return this;
                    }
                    this.returnValue = false;
                    this.cancelBubble = !bubble;
                    return this;
                };
            }
            alert(e.stopEvent ? 'ok' : 'nok');//tested, it alerts ok
            if (this.addEventListener)
            {
                this.removeEventListener('load',ol,false);
                return;
            }
            document.attachEvent('onkeypress',function(e)
            {
                e = e || window.event;
                if (e.stopEvent)
                {//another event, each time alerts ok
                    alert('OK!');
                }
            });
            this.detachEvent('onload',ol);
        }
        if (this.addEventListener)
        {
            this.addEventListener('load',ol,false);
        }
        else
        {
            this.attachEvent('onload',ol);
        }
})(); 
```

这样，标题文档类型就没有那么重要了：我已经使用`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">`. 不过`<!DOCTYPE html>`为了安全起见

希望这可以帮助某人...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:35:10.557

它的标准与怪癖模式。JSFiddle 页面有一个 DOCTYPE 声明，尽管是一个非常简单的声明，`<!DOCTYPE html>`它将渲染踢到标准模式。您的网页可能没有 DOCTYPE，这会使渲染处于 Quirks 模式。将那个简单的 DOCTYPE 添加到我从你的小提琴构建的页面后，它对我有用。

# junit - junit4中的@SuiteClasses如何指定要添加哪些类

> ID：10617016
> 
> 赞同：3
> 
> 时间：2012-05-16T10:52:25.073
> 
> 标签：junit, junit4

在 Junit 4 中，我们使用注释添加测试套件，如下所述：

```
@RunWith(Suite.class)
@SuiteClasses({
A.class, B.class })
public class MyTestsuite
{
} 
```

我的问题是，我们有没有办法指定条件来决定我想在@SuiteClasses 中包含哪些类。例如; 让我们在上面的代码中说，如果我想在某些特定条件为真时对 A 进行分类，否则我不想将它添加到 @SuiteClasses。

在 junit 3.8 中，我们使用 suite() 方法，如下所述：

```
public class MyTestsuite extends TestCase
{
  public static Test suite()
  {
     TestSuite suite = new TestSuite();
     if(some_condition_true)
     {
       suite.addTest(A.suite);
     }
     suite.addTest(B.suite);
     return suite;
  }
} 
```

有什么方法可以使用junit 4实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T02:12:15.653

扩展套件：

```
@RunWith(MySuite.class)//Customized
@SuiteClasses({
A.class, B.class })
public class MyTestsuite
{} 
```

定义 MySuite：

```
public class MySuite extends Suite {
           public MySuite(Class<?> klass, RunnerBuilder builder)
                    throws InitializationError {
                super(klass, builder);
                try {
                    filter(new Filter() {
                        @Override public boolean shouldRun(Description description) {
                            return some_condition_true? true : false;
                        }

                        @Override
                        public String describe() {
                            return "...";
                        }
                    });
                } catch (NoTestsRemainException e) {
                    System.out.println("Hey, all test cases are not satisfied your condition.");
                }
            }
        } 
```

加：虽然它可以工作，但我建议保持测试用例简单。很难维护复杂的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T02:47:46.920

盛远回答会奏效。

另一种选择是始终添加测试类，但在您的类中有一个假设真（条件），它将决定何时应该运行以及何时没有意义。

（当条件与测试先决条件相关时，我更喜欢这种方法：测试本身是了解它是否应该运行的最佳场所）。

# javascript - jQuery插件多重实例化

> ID：10617019
> 
> 赞同：2
> 
> 时间：2012-05-16T10:52:38.467
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用[此处](http://jqueryboilerplate.com/)找到的 jquery 插件样板。

但是它提到构造函数可以防止多个实例化，我想知道**我需要做什么才能修改它以允许多个实例化？**

插件样板如下：

```
// the semi-colon before function invocation is a safety net against concatenated 
// scripts and/or other plugins which may not be closed properly.
;(function ( $, window, undefined ) {

// undefined is used here as the undefined global variable in ECMAScript 3 is
// mutable (ie. it can be changed by someone else). undefined isn't really being
// passed in so we can ensure the value of it is truly undefined. In ES5, undefined
// can no longer be modified.

// window and document are passed through as local variables rather than globals
// as this (slightly) quickens the resolution process and can be more efficiently
// minified (especially when both are regularly referenced in your plugin).

// Create the defaults once
var pluginName = 'defaultPluginName',
  document = window.document,
  defaults = {
    propertyName: "value"
  };

// The actual plugin constructor
function Plugin( element, options ) {
this.element = element;

// jQuery has an extend method which merges the contents of two or 
// more objects, storing the result in the first object. The first object
// is generally empty as we don't want to alter the default options for
// future instances of the plugin
this.options = $.extend( {}, defaults, options) ;

this._defaults = defaults;
this._name = pluginName;

this.init();
}

Plugin.prototype.init = function () {
// Place initialization logic here
// You already have access to the DOM element and the options via the instance, 
// e.g., this.element and this.options
};

// A really lightweight plugin wrapper around the constructor, 
// preventing against multiple instantiations
$.fn[pluginName] = function ( options ) {
return this.each(function () {
  if (!$.data(this, 'plugin_' + pluginName)) {
    $.data(this, 'plugin_' + pluginName, new Plugin( this, options ));
  }
});
}

}(jQuery, window)); 
```

特别是构造函数部分是：

```
// A really lightweight plugin wrapper around the constructor, 
// preventing against multiple instantiations
$.fn[pluginName] = function ( options ) {
  return this.each(function () {
    if (!$.data(this, 'plugin_' + pluginName)) {
      $.data(this, 'plugin_' + pluginName, new Plugin( this, options ));
    }
  });
} 
```

最终，如果插件用于在元素上设置一些事件，我希望能够调用：

```
$('#example1').myplugin({options});
$('#example2').myplugin({options}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-27T15:13:40.310

For multiple instances you need to have a new closure for each instance, try the code below:

```
// A really lightweight plugin wrapper around the constructor, 
// preventing against multiple instantiations
$.fn[pluginName] = function ( options ) {
    return this.each(function () {
        if (!$.data(this, 'plugin_' + pluginName)) {
            $.data(this, 'plugin_' + pluginName, 
            new Plugin( this, options ));
        }
    });
} 
```

you can follow this guide for more information about preventing against multiple instantiations: [jQuery Plugin Patterns](http://www.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:57:08.223

```
if (!$.data(this, 'plugin_' + pluginName)) {
  $.data(this, 'plugin_' + pluginName, new Plugin( this, options ));
} 
```

删除它并替换为

```
new Plugin( this, options ); 
```

它将不再检查它之前是否已在元素上实例化，而只是初始化插件。但是请记住，如果插件覆盖了先前的实例化，或者无论如何修改了先前的实例化，这可能会导致冲突或错误问题。因此，请确保您的插件是用这种思想编码的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T18:49:38.807

您需要在每个实例的基础上扩展默认值/选项。请记住，在 javascript 中，对象只是一个引用，因此如果您要更改构造函数中的选项，则您正在更改所有其他元素正在引用的对象。

```
// A really lightweight plugin wrapper around the constructor, 
// preventing against multiple instantiations
$.fn[pluginName] = function ( options ) {
  return this.each(function () {
    if (!$.data(this, 'plugin_' + pluginName)) {
     //extend your options in here
      var newOptions = $(true, {}, $.fn[name].opts, options);
      $.data(this, 'plugin_' + pluginName, new Plugin( this, newOptions ));
    }
  });
} 
```

# c# - 当页面上有多个相同类型的子布局时获取渲染参数

> ID：10617021
> 
> 赞同：0
> 
> 时间：2012-05-16T10:52:43.187
> 
> 标签：c#, .net, sitecore, sitecore6

我需要从我的子布局中以编程方式获取渲染参数。目前我这样做：

```
var sublayout = ((Sublayout)this.Parent);
//Get all rendering
var renderings = Sitecore.Context.Item.Visualization.GetRenderings(Sitecore.Context.Device, true);

//Get the first rendering that matches the current sublayout's path
var sublayoutRendering = renderings.FirstOrDefault(r => r.RenderingItem.InnerItem["Path"] == sublayout.Path);

if (sublayoutRendering != null)
    Response.Write(sublayoutRendering.RenderingItem.Parameters); 
```

这个解决方案来自[这个问题](https://stackoverflow.com/questions/5949214/sitecore-how-to-use-sublayout-parameters-from-codebehind)并且完美地工作，直到我在页面上有两个相同类型的子布局。当这种情况发生时，显然总是返回与*两个*`renderings.FirstOrDefault(r => r.RenderingItem.InnerItem["Path"] == sublayout.Path);`子布局的子布局路径匹配的第一个渲染参数。

 *我怎样才能区分它们？我看不到任何东西可以用来将它们绑在一起！

* * *

**编辑：**

为了清楚起见，我在*Presentation > Details*中添加了我的子布局，然后当我单击我的控件时，我在“*控件属性*”窗口中设置了字段。我有一个名为 Module Source 的字段，它总是返回相同的 - 它总是填充为顺序中最高的一个。每个子布局的值肯定不同，但我无法从渲染中获取它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:48:11.707

不确定我是否遗漏了什么。但是您可以直接在子布局上获取子布局渲染参数。我在用于所有 Sitecore 子布局的基本子布局上使用以下内容 - 多次插入同一子布局上的渲染参数没有问题 :)

```
 protected Sitecore.Web.UI.WebControls.Sublayout CurrentSublayout
    {
        get
        {
            Control c = Parent;
            while (c != null && !(c is Sitecore.Web.UI.WebControls.Sublayout))
            {
                c = c.Parent;
                if (c == null)
                    break;
            }

            return c as Sitecore.Web.UI.WebControls.Sublayout;
        }
    }

    protected NameValueCollection CurrentParameters
    {
        get
        {
            if (CurrentSublayout == null)
                return null;

            NameValueCollection parms = WebUtil.ParseUrlParameters(CurrentSublayout.Parameters);

            var sanitizedValues = new NameValueCollection();
            for (int i = 0; i < parms.Count; i++)
            {
                if (!string.IsNullOrEmpty(parms[i]))
                    sanitizedValues.Add(parms.Keys[i], parms[i]);
            }

            return sanitizedValues;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T17:59:41.563

您可能需要检查子布局上的缓存设置，如果您没有 Cacheable VarbyParam 它不会为您工作*

# java - 在 Java 中的 DataInputStream 中来回走动

> ID：10617031
> 
> 赞同：0
> 
> 时间：2012-05-16T10:53:31.007
> 
> 标签：java, datainputstream

我正在使用 DataInputStream 读取视频文件。然后我使用一个字节数组为每一帧一个接一个地读取数据，然后连续显示它们。我的问题是，如果我想再次查看前一帧或未来的帧怎么办？是否有可能退后一步，或者有其他可能的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:58:31.737

我会为此使用内存映射方法。如果您知道每个帧的大小是多少，并且它是固定的，那么您没有理由跳过（向前/向后）并简单地映射到该帧（或帧序列）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:57:28.673

作为一个“简单”的解决方案，你*可以*用. 但是我不会依赖它，而是编写我自己的缓冲策略。为什么不将最后一帧缓存在内存中？`DataInputStream`[`PushbackInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/PushbackInputStream.html)

# android - ImageView 中的图像无法正确缩放

> ID：10617033
> 
> 赞同：1
> 
> 时间：2012-05-16T10:53:31.453
> 
> 标签：android, imageview

我有一个 ImageView，一个特定的 imageview 有 2 个图像，但问题是当我单击它时（单击的图像比前一个更大）。所以布局向上移动，我不希望布局向上移动，我只想让图像向上延伸。

```
// addnews button the 1st screen
    final ImageView addnewsback = (ImageView)findViewById(R.id.newslistback);
    ImageView addnews = (ImageView)findViewById(R.id.newslistbtn);
    addnews.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            addnewsback.setImageResource(R.drawable.bgbig);
            vf.setDisplayedChild(0);                
        }
     }); 
```

![在此处输入图像描述](../Images/a36974a954e2abb46e57471ce4b7c90c.png) ![在此处输入图像描述](../Images/da4813ab5f509e70257b59129edfc531.png)

正确的看法应该是，

![在此处输入图像描述](../Images/81fd9a579fb796be44fc34e6b4eb8c6b.png)

# c++ - 使用 SHGetPathFromIDList 将 PIDL 转换为文件路径

> ID：10617034
> 
> 赞同：1
> 
> 时间：2012-05-16T10:53:36.000
> 
> 标签：c++, winapi, shell

我的应用程序接收一个 PIDL 作为字符串：

```
QString pidl = "::{20D04FE1-3AEA-1069-A2D8-08002B30309B}"; 
```

在这种情况下，它对应于`My Computer`。我需要将其转换为`My Computer`.

有一个 WINAPI 函数`SHGetPathFromIDList`，它需要`LPCITEMIDLIST`作为第一个参数并将其转换为字符串。

我怎样才能建立它`LPCITEMIDLIST`？

**更新**

这是我到目前为止得到的：

```
LPCWSTR csPath = (LPCWSTR)"::{20D04FE1-3AEA-1069-A2D8-08002B30309B}";
LPITEMIDLIST stId = 0;
SFGAOF stSFGAOFIn = 0;
SFGAOF stSFGAOFOut = 0;
if(!FAILED(SHParseDisplayName(csPath, 0, stId, stSFGAOFIn, &stSFGAOFOut)))
    msgBox("not failed") 
```

不幸的是，这段代码崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:30:48.940

您需要的功能不是`SHGetPathFromIDList`，因为“我的电脑”没有路径。

要将您的 QString pidl 转换为`PIDLIST_ABSOLUTE`您需要使用的`SHParseDisplayName`.

要将其转换`PIDLIST_ABSOLUTE`为本地化字符串，如“我的电脑”，您需要`SHGetNameFromIDList`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T17:18:00.980

我认为可能是：

> SHParseDisplayName(csPath, 0, &stId, stSFGAOFIn, &stSFGAOFOut)

来自 MSDN 的 SHParseDisplayName 声明：

```
HRESULT SHParseDisplayName(
  __in       LPCWSTR pszName,
  __in_opt   IBindCtx *pbc,
  __out      PIDLIST_ABSOLUTE *ppidl,
  __in       SFGAOF sfgaoIn,
  __out_opt  SFGAOF *psfgaoOut
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T18:18:16.893

您的代码崩溃是因为您没有正确设置第一个和第三个参数`SHParseDisplayName()`。试试这个：

```
LPCWSTR csPath = L"::{20D04FE1-3AEA-1069-A2D8-08002B30309B}"; 
PIDLIST_ABSOLUTE stId = NULL; 
SFGAOF stSFGAOFIn = 0; 
SFGAOF stSFGAOFOut = 0; 
if (!FAILED(SHParseDisplayName(csPath, NULL, &stId, stSFGAOFIn, &stSFGAOFOut))) 
    msgBox("not failed") 
```

# c# - 在winforms中使用cmd执行带参数的exe文件

> ID：10617035
> 
> 赞同：0
> 
> 时间：2012-05-16T10:53:36.430
> 
> 标签：c#, winforms

我正在开发一个 Windows 应用程序。我正在调用命令提示符，我需要调用 exe 文件，该 exe 文件带有参数。

我能够打开命令提示符但无法发送参数

```
 string  strCmdText = "create-keyfile.exe ..\\KatanaFirmware\\key-template.txt ..\\Keyfiles\\new-keyfile.txt " + cableTextBox.Text.Trim()+" " + startIdTextBox.Text.Trim();
        System.Diagnostics.Process.Start("CMD.exe", strCmdText); 
```

可以请帮助我。

谢谢

普尼斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T10:59:04.930

```
 System.Diagnostics.ProcessStartInfo startInfo = new ProcessStartInfo("create-keyfile.exe");
startInfo.Arguments = "..\\KatanaFirmware\\key-template.txt ..\\Keyfiles\\new-keyfile.txt " + cableTextBox.Text.Trim()+" " + startIdTextBox.Text.Trim();
System.Diagnostics.Process.Start(startInfo); 
```

您还可以在 Process.Start 上查看 [MSDN 站点](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)，其中包含有关如何执行 .exe 并将参数传递给它的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:59:50.510

```
ProcessStartInfo process = new ProcessStartInfo();
process.FileName = "yourprogram.exe";
process.Arguments = strCmdText; // or put your arguments here rather than the string
Process.Start(process); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:05:17.363

您是否尝试过带有[/k 或 /c 选项的 cmd](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/cmd.mspx?mfr=true)

从[链接](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/cmd.mspx?mfr=true)

/c ：执行字符串指定的命令，然后停止。

/k ：执行字符串指定的命令并继续。

```
 string  strCmdText = "/k create-keyfile.exe ..\\KatanaFirmware\\key-template.txt ..\\Keyfiles\\new-keyfile.txt " + cableTextBox.Text.Trim()+" " + startIdTextBox.Text.Trim();
   System.Diagnostics.Process.Start("CMD.exe", strCmdText); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:57:09.247

你有没有尝试过

```
System.Diagnostics.Process.Start("CMD.exe "+strCmdText); 
```

实际上，经过进一步检查，我认为您不需要调用 CMD.EXE 您应该调用您的 exe 文件，除非您当然使用 CMD 来显示某些内容

```
string  strCmdText =  "..\\KatanaFirmware\\key-template.txt ..\\Keyfiles\\new-keyfile.txt " + cableTextBox.Text.Trim()+" " + startIdTextBox.Text.Trim();
System.Diagnostics.Process.Start("create-keyfile.exe", strCmdText); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T11:31:42.820

尝试这个。

```
string  strCmdText = "KatanaFirmware\\key-template.txt "+ "\\Keyfiles\\new-keyfile.txt " + cableTextBox.Text.Trim()+" " +     startIdTextBox.Text.Trim();
Process mp = new Process();
mp.StartInfo.FileName = "E:\\create-keyfile.exe"; //path of the exe that you want to run
mp.StartInfo.UseShellExecute = false;
mp.StartInfo.CreateNoWindow = true;
mp.StartInfo.RedirectStandardInput = true;
mp.StartInfo.RedirectStandardOutput = true;
mp.StartInfo.Arguments = strCmdText;
mp.Start();
mp.WaitForExit(); 
```

希望能帮助到你。

# ghostscript - 使用 Ghostscript rip ps 文件时如何绕过打印机的媒体选择命令？

> ID：10617038
> 
> 赞同：0
> 
> 时间：2012-05-16T10:53:43.957
> 
> 标签：ghostscript

我正在尝试使用 GhostScript 首先在计算机上翻录 PostScript 文件，然后通过 USB 连接将它们转发到理光 MP1350 打印机，但失败了。所以特此求助。详情如下。

[按照www.stat.tamu.edu/~henrik/GSPSPrinter/GSPSprinter.html](http://www.stat.tamu.edu/%7Ehenrik/GSPSPrinter/GSPSprinter.html)上提供的说明，我成功地在装有 Win7 的 PC 上构建了虚拟 PS 打印机。

我使用 MP1350 PS 驱动程序设置虚拟 PS 打印机，使用指令告知的参数创建重定向端口 RPT1，并在 RedMon 的帮助下，所有打印数据都通过 USB 转发到与 PC 连接的真实 MP1350 设备。

它在处理常见的打印作业时确实有效。但是，当我发送包含 MP1350 的介质选择命令的 PostScript 文件时，它似乎无法告诉打印机按照 PS 文件中的说明在纸盘 2、3 或 4 中取纸。纸盘 1 中取出所有纸张。

打印命令是：

> 复制 /b sample.ps \\127.0.0.1\gspspr

其中“gspspr”是虚拟PS打印机的打印机名称，安装了MP1350 PS驱动Ver3.1(latest)。“sample.ps”是​​我上面提到的后记文件。

参数文件“mswinpr2.txt”的写法如下：

```
-Ic:\gs\gs9.05\lib
    -sDEVICE=mswinpr2
    -dNoCancel
    -dNOPAUSE
    -dSAFER
    -dMaxBitmap=400000000
    -dBufferSpace=400000000
    -dNumRenderingThreads=2
    -dMaxPatternBitmap=80000000
    -sPAPERSIZE=a4 
```

使用相同的 PostScript 文件“sample.ps”，如果我使用以下命令发送它：

> 复制 /b sample.ps \\127.0.0.1\gsprinter

其中“gsprinter”是通过USB连接的真正MP1350的名称，安装了MP1350 PS驱动Ver3.1（最新）。MP1350 打印机可以告知这些介质选择命令，并按照告知从纸盘 2 或 3 或 4 取纸。

这两个设备的所有驱动设置都是**一样**的，我在“**设备设置**”选项卡中将输出协议设置为“ **TBCP ”。**

 **所以请帮我解释一下，为什么当我使用 gs 翻录该 ps 文件时打印机无法选择某些介质托盘？以及如何解决？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:50:04.093

PostScript 文件包含介质和纸盘选择命令，如果您将 PostScript 直接发送到打印机，则打印机会执行这些命令。

使用 Ghostscript 时，实际上是将 PostScript 渲染为位图，mswinpr2 设备将其转发到 Windows 打印系统。最终打印机可以是任何东西，它不必是 PostScript 打印机。但是，您不能在位图中嵌入托盘选择命令，因此无法从原始作业中保留该请求。

没有办法“解决”这个问题，这是过程的本质。

鉴于您的打印机清楚地直接接受 PostScript，您为什么还要使用 Ghostscript？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T02:12:50.890

如果您的打印机支持 PCL5 或 PCL6，您可以通过 ghostscript 翻录文件，并让 ghostscript 将 postscript MediaPosition 映射到类似 HP 的打印机中的托盘。两个 ghostscript 驱动程序 - ljet4（或 pcl5? 之一）和 pxlcolor，可以将 postscript 媒体位置映射到 HP 媒体托盘。但是，另请参阅有关 InputAttributes 字典和 -dNOMEDIAATRS 开关的讨论。[http://bugs.ghostscript.com/show_bug.cgi?id=693053](http://bugs.ghostscript.com/show_bug.cgi?id=693053)**

# c# - 在 catch 语句之外抛出语句

> ID：10617041
> 
> 赞同：3
> 
> 时间：2012-05-16T10:53:45.277
> 
> 标签：c#, c#-4.0, dynamics-crm-2011

是否可以在语句之外使用 throw`try{} catch{}`语句？在我的代码（CRM 2011 中的插件编程）中，我只想向用户显示一条自定义消息。如果 throw 不起作用，那我该怎么做？

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T10:56:00.887

要在插件中将消息传回给用户，您可以简单地抛出异常

```
throw new Exception("Your message here!"); 
```

不必在 try/catch 块中 - 事实上，如果是，则消息将被禁止并且用户不会看到它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T16:09:54.343

是的，正如其他答案所述，您可以抛出异常并阻止插件中的任何进一步操作。但是，由于您具体指的是使用 Dynamics CRM 插件进行编程，因此我建议您只根据[MSDN 指南](http://msdn.microsoft.com/en-us/library/gg334685.aspx)`InvalidPluginExecutionException`将自定义消息反映给您的用户。

> 您可以选择在 Web 应用程序的对话框中显示自定义错误消息，方法是让插件抛出 InvalidPluginExecutionException 异常，并将自定义消息作为 Message 属性值。建议插件仅将 InvalidPluginExecutionException 传递回平台。

因此，如果您在插件中遇到逻辑错误（例如，标题字段为空），您可以：

```
throw new InvalidPluginExecutionException("Title must not be blank"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T10:55:35.743

是的，

```
throw new Exception("your message"); 
```

或者

```
throw new Exception(objectExtendedFromExceptionClass); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T10:56:02.950

> 是否可以在 try{} catch(){} 语句之外使用 throw 语句？

绝对地。异常将向上传播堆栈到最近的匹配捕获块。当然，你必须在*某处*有一个 catch 块来做正确的事情……但它不必在同一个方法甚至同一个类中。

当然，例外是否是最合适的解决方案是另一回事 - 这取决于上下文。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T10:56:48.003

来自 MSDN：[抛出异常](http://msdn.microsoft.com/en-us/library/ms173163.aspx)

> 异常包含名为 StackTrace 的属性。此字符串包含当前调用堆栈上的方法名称，以及为每个方法引发异常的文件名和行号。

是的，你可以抛出异常。像这样

```
throw new Exception("Your Error here!"); 
```

# python - 如何在列表中运行此代码

> ID：10617042
> 
> 赞同：0
> 
> 时间：2012-05-16T10:53:52.283
> 
> 标签：python, file, list, integer

我编写了下面给出的代码：它的输出数据类型是整数，我希望这些整数在列表中。我是 python 新手。请建议如何做。

```
lineNo = 0
css = open("/Users/john/Work/html/Ribbon/header.css")  
for line in css.readlines():
    lineNo = lineNo + 1
    if "width" in line:
        print(lineNo) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:55:47.583

您可以使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)来做到这一点。`enumerate`为您提供每行的行号，`1`在这种情况下从开始。不需要，`.readlines()`因为迭代一个类似文件的文件会遍历每一行。

```
[line_no for line_no, line in enumerate(css,1) if "width" in line] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:55:41.967

使用您的原始代码，您只需要添加两个新行：

```
lineNo = 0
css = open("/Users/john/Work/html/Ribbon/header.css")  
myList = []  # create an empty list
for line in css.readlines():
    lineNo = lineNo + 1
    if "width" in line:
        print(lineNo)
        myList.append(lineNo)  # add your item to the list 
```

一旦您对 Python 感到更舒服，您可能会考虑将[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)与[enumerate](http://docs.python.org/library/functions.html#enumerate)结合起来，以自动获取行数来代替原始方法。请参阅@jamylak 的解决方案以了解这些构造的使用。

同时，这里是对列表和 Python[文档的](http://docs.python.org/tutorial/datastructures.html)[非正式介绍](http://docs.python.org/tutorial/introduction.html#lists)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:12:02.917

```
def extractWidth(line):
    return line  # your code here

def loadWidths(path):
    with open(path) as f:
        return [extractWidth(line) for line in f if ("width in line")]

loadWidths("/Users/john/Work/html/Ribbon/header.css") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T03:09:22.763

```
lineNo = []
css = open("/path/to/stylesheet.css")  
for i,line in enumerate(css.readlines(), start=1):
        if "width" in line:
            print (i, line)
            lineNo.append(i)

print (lineNo) 
```

# python - 如何在 python 中创建固定大小列表？

> ID：10617045
> 
> 赞同：81
> 
> 时间：2012-05-16T10:54:03.717
> 
> 标签：python, list

在 C++ 中，我可以创建一个数组，如...

```
int* a = new int[10]; 
```

在python中，我只知道我可以声明一个列表，而不是附加一些项目，或者像..

```
l = [1,2,3,4]
l = range(10) 
```

我可以按给定的大小初始化列表，比如 c++，并且不做任何赋值吗？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-05-16T11:05:21.420

（tl；博士：您的问题的确切答案是`numpy.empty`or `numpy.empty_like`，但您可能不在乎并且可以使用`myList = [None]*10000`.)

# 简单的方法

您可以将列表初始化为所有相同的元素。使用非数字值在语义上是否有意义（如果您使用它，稍后会出错，这是一件好事）或类似 0 的东西（不寻常？如果您正在编写稀疏矩阵或 ' 可能有用默认值应该是 0 并且你不担心错误）取决于你：

```
>>> [None for _ in range(10)]
[None, None, None, None, None, None, None, None, None, None] 
```

（这里`_`只是一个变量名，你可以使用`i`.）

你也可以这样做：

```
>>> [None]*10
[None, None, None, None, None, None, None, None, None, None] 
```

您可能不需要对此进行优化。您还可以在每次需要时附加到数组：

```
>>> x = []
>>> for i in range(10):
>>>    x.append(i) 
```

* * *

# 简单方法的性能比较

哪个最好？

```
>>> def initAndWrite_test():
...  x = [None]*10000
...  for i in range(10000):
...   x[i] = i
... 
>>> def initAndWrite2_test():
...  x = [None for _ in range(10000)]
...  for i in range(10000):
...   x[i] = i
... 
>>> def appendWrite_test():
...  x = []
...  for i in range(10000):
...   x.append(i) 
```

python2.7中的结果：

```
>>> import timeit
>>> for f in [initAndWrite_test, initAndWrite2_test, appendWrite_test]:
...  print('{} takes {} usec/loop'.format(f.__name__, timeit.timeit(f, number=1000)*1000))
... 
initAndWrite_test takes 714.596033096 usec/loop
initAndWrite2_test takes 981.526136398 usec/loop
appendWrite_test takes 908.597946167 usec/loop 
```

python 3.2 中的结果：

```
initAndWrite_test takes 641.3581371307373 usec/loop
initAndWrite2_test takes 1033.6499214172363 usec/loop
appendWrite_test takes 895.9040641784668 usec/loop 
```

`[None]*10000`正如我们所看到的，在 python2 和 python3 中都使用这个习语可能会更好。但是，如果一个人正在做比赋值更复杂的事情（例如任何复杂的生成或处理列表中的每个元素的事情），那么开销就变成了成本中毫无意义的一小部分。也就是说，如果您对列表中的元素做任何合理的事情，那么担心这种优化还为时过早。

* * *

# 未初始化的内存

然而，这些都是低效的，因为它们会通过内存，在这个过程中写入一些东西。在 C 中这是不同的：未初始化的数组充满了随机垃圾内存（旁注：已从系统重新分配，并且当您分配或无法 mlock 和/或在关闭程序时无法删除内存时可能会带来[安全风险](https://stackoverflow.com/q/12095135/711085)）。这是一个设计选择，旨在加速：C 语言的制造者认为最好不要自动初始化内存，这是正确的选择。

这不是渐近加速（因为它是`O(N)`），但是例如，在用您真正关心的内容覆盖之前，您不需要先初始化整个内存块。如果可能的话，这相当于 (pseudo-code) 之类的东西`x = list(size=10000)`。

如果你想在 python 中使用类似的东西，你可以使用`numpy`数值矩阵/N 维数组操作包。具体来说，[`numpy.empty`](http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.empty.html)或[`numpy.empty_like`](http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.empty_like.html)

这是你问题的真正答案。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-16T11:12:06.550

你可以使用这个：`[None] * 10`. 但这不会是“固定大小”，您仍然可以追加、删除……这就是列表的制作方式。

您可以将其设为元组 ( `tuple([None] * 10)`) 以固定其宽度，但同样，您将无法更改它（并非在所有情况下，仅当存储的项目是可变的时）。

另一种更接近您要求的选项不是列表，而是`collections.deque`具有最大长度的列表。这是最大尺寸，但它可以更小。

```
import collections
max_4_items = collections.deque([None] * 4, maxlen=4) 
```

但是，只需使用一个列表，并习惯“pythonic”的做事方式。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-02-01T16:52:42.053

这更像是一个警告而不是一个答案。
在其他答案中看到后`my_list = [None] * 10`，我很受诱惑并设置了一个这样的数组`speakers = [['','']] * 10`，并且非常后悔，因为结果`list`并没有像我想象的那样表现。
我求助于：

```
speakers = []
for i in range(10):
    speakers.append(['','']) 
```

`[['','']] * 10`似乎创建了一个`list`where 后续元素是第一个元素的副本。
例如：

```
>>> n=[['','']]*10
>>> n
[['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', '']]
>>> n[0][0] = "abc"
>>> n
[['abc', ''], ['abc', ''], ['abc', ''], ['abc', ''], ['abc', ''], ['abc', ''], ['abc', ''], ['abc', ''], ['abc', ''], ['abc', '']]
>>> n[0][1] = "True"
>>> n
[['abc', 'True'], ['abc', 'True'], ['abc', 'True'], ['abc', 'True'], ['abc', 'True'], ['abc', 'True'], ['abc', 'True'], ['abc', 'True'], ['abc', 'True'], ['abc', 'True']] 
```

而使用`.append`选项：

```
>>> n=[]
>>> for i in range(10):
...  n.append(['',''])
... 
>>> n
[['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', '']]
>>> n[0][0] = "abc"
>>> n
[['abc', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', '']]
>>> n[0][1] = "True"
>>> n
[['abc', 'True'], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', ''], ['', '']] 
```

我确信 ninjagecko 接受的答案确实试图提及这一点，遗憾的是我太厚了，无法理解。
收官，保重！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-01-18T14:51:37.170

您可以使用[数组](https://docs.python.org/3/library/array.html)模块来做到这一点。array 模块是 python 标准库的一部分：

```
from array import array
from itertools import repeat

a = array("i", repeat(0, 10))
# or
a = array("i", [0]*10) 
```

[重复](https://docs.python.org/3/library/itertools.html?highlight=itertools%20repeat#itertools.repeat)函数将 0 值重复 10 次。它比 [0]*10 更节省内存，因为它不分配内存，而是重复返回相同的数量 x 次。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-16T10:57:25.543

像这样初始化列表并不是真正的 python 方式。无论如何，您可以像这样初始化一个列表：

```
>>> l = [None] * 4
>>> l
[None, None, None, None] 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-16T11:14:11.910

另请注意，当您在 C++ 中使用数组时，您可能有一些不同的需求，这些需求在 Python 中以不同的方式解决：

1.  您可能只需要一组项目；Python 列表完美地处理了这个用例。
2.  您可能需要一**组**适当的同类项目。Python 列表**不是存储***数组*的好方法。

Python 通过**[NumPy](https://numpy.org)**解决了对数组的需求，其中包括创建已知大小的*数组的方法：*

```
from numpy import *

l = zeros(10) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-16T10:57:38.377

Python 没有内置的东西来支持这一点。你真的需要优化它吗，因为我认为追加不会增加*那么*多开销。

但是，您可以执行类似`l = [None] * 1000`.

或者，您可以使用生成器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-16T11:01:38.270

```
your_list = [None]*size_required 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-29T14:00:06.593

```
fix_array = numpy.empty(n, dtype = object) 
```

其中 n 是数组的大小

虽然它有效，但它可能不是最好的主意，因为您必须为此目的导入一个库。希望这可以帮助！

# html - 带有自定义图像的样式单选按钮

> ID：10617046
> 
> 赞同：0
> 
> 时间：2012-05-16T10:54:04.320
> 
> 标签：html, css, image, radio-button

如何删除经典的单选按钮圆圈并改用自定义图标？可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:58:28.287

你可能想看看[Uniform](https://github.com/fidian/uniform)。它是一种对表单元素进行完全设计控制的好方法。事实上，它确实需要 JavaScript，但如果默认情况下未启用它，Uniform 会优雅地降级，提供标准表单功能。

# tshark - tshark 停止标准

> ID：10617047
> 
> 赞同：3
> 
> 时间：2012-05-16T10:54:06.707
> 
> 标签：tshark

满足特定条件后，我需要停止 tshark（wireshark 的命令行 equi）。

从 tshark 手册页中，我发现停止条件可以应用于持续时间、文件、文件大小和多文件模式。

我可以通过捕获过滤器应用任何停止条件，以便 tshark 停止捕获。

例如：在接收到来自特定端口号的 TCP SYN 数据包（捕获过滤器中应用的条件）时，tshark 停止捕获。

请回答这个谜语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-23T20:43:39.490

您可以将输出通过管道传输到 head 并选择与查询匹配的第一帧，但您还需要禁用输出缓冲（stdbuf 是 coreutils 的一部分）

例如（Linux）

```
stdbuf -i0 -o0 -e0 tshark -r file.pcap -Y 'sctp.verification_tag == 0x2552' | head -1 
```

苹果电脑：

```
gstdbuf -i0 -o0 -e0 tshark -r file.pcap  -Y 'tcp.flags.syn == 1 && tcp.port == 80' | head -1 
```

# php - 在 jquery 移动网页中呈现 pdf/ppt 文档

> ID：10617048
> 
> 赞同：0
> 
> 时间：2012-05-16T10:54:07.007
> 
> 标签：php, jquery, pdf, jquery-mobile

我正在开发一个 jquery-mobile 学习门户。我想渲染 pdf 和 ppt 文档，如 slideshare 或谷歌图书。我已经尝试过四处游荡，但我似乎无法获得任何可以让我做到这一点的 API。我看到了 PDF.js，但它对于移动设备来说似乎太重了，此外它还需要大量的工作来设计它。任何帮助......将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:16:46.203

你检查过[Scribd 的 API](http://www.scribd.com/developers)吗？

# matlab - 如何在 MATLAB 中计算 t 检验的 p 值？

> ID：10617050
> 
> 赞同：1
> 
> 时间：2012-05-14T18:24:48.747
> 
> 标签：matlab, statistics

是否有一些简单的方法可以在 MATLAB 中计算 t-Test 的 p 值。

我发现了类似的东西，但是我认为它没有返回正确的值：

`Pval=2*(1-tcdf(abs(t),n-2))`

我想计算回归斜率等于 0 的检验的 p 值。因此我计算标准误差

$SE= \sqrt{\frac{\sum_{s = iw }^{i+w}{(y_{s}-\widehat{y} *s})^2}{(w-2)\sum* {s =iw}^{i+w}{(x_{s}-\bar{x}})^2}}$

其中$y_s$是$s$时间段内分析参数的值，
$\widehat{y}_s$是时间段$s$内分析参数的估计值，
$x_i$是观察到的时间点分析参数的值，
$\bar{x}$ 是分析期间时间点的平均值，然后
$t_{score} = (a - a_{0})/SE$ where $a_{0}$ where $ a_{0} = 0$。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-24T06:35:58.300

我检查了来自 ttest 函数的 p 值和使用以下公式计算的值：

```
% Let n be your sample size
% Let v be your degrees of freedom

% Then:
pvalues = 2*(1-tcdf(abs(t),n-v)) 
```

他们是一样的！

Matlab 演示数据集示例：

```
load accidents
x = hwydata(:,2:3);
y = hwydata(:,4);
stats = regstats(y,x,eye(size(x,2)));
fprintf('T stat using built-in function: \t %.4f\n', stats.tstat.t);
fprintf('P value using built-in function: \t %.4f\n', stats.tstat.pval);
fprintf('\n\n');

n = size(x,1);
v = size(x,2);
b = x\y;
se = diag(sqrt(sumsqr(y-x*b)/(n-v)*inv(x'*x)));
t = b./se;
p = 2*(1-tcdf(abs(t),n-v));
fprintf('T stat using own calculation: \t\t %.4f\n', t);
fprintf('P value using own calculation: \t\t %.4f\n', p); 
```

# css - 使用固定位置的问题

> ID：10617051
> 
> 赞同：0
> 
> 时间：2012-05-16T10:54:24.460
> 
> 标签：css

问题是，只要 topBar 具有 position:fixed （因此当页面加载时，标题几乎隐藏在 topBar 下方），标题的上边距就会被忽略。

如何修复margin-top被忽略？

提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:32:12.620

将页眉的上边距设置为所需的值加上 topBar 的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:03:03.200

据我从您的问题中了解到，您正试图将位置：仅固定到 topBar。请找到我的伪代码来回答您的问题。尝试将位置固定添加到外部标题容器，以便顶部栏和标题保持固定。

```
 <header style="position:fixed;">
   <nav class="top-bar">
   </nav>
 </header> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:04:06.347

如果问题仍然存在，请使用此代码，然后共享代码

```
#header
{
position:fixed;
top:0px;
width:100%;
height:30px;
} 
```

# jquery - 下拉菜单更改

> ID：10617053
> 
> 赞同：0
> 
> 时间：2012-05-16T10:54:33.257
> 
> 标签：jquery, menu, drop-down-menu

大家好，我是网络编程的新手，我的代码有问题：

```
$(document).ready(function(){
$("#adminBox").parent().append("<span></span>");    
$("a.adlog:link").click(function() { 
    $(this).parent().find("#adminBox").slideDown('fast').show();
    $(this).parent().hover(function() {
    }, function(){  
        $(this).parent().find("#adminBox").slideUp('slow'); //here i want to change...
    });
    }).hover(function() { 
        $(this).addClass("a.adlog:hover");
    }, function(){
        $(this).removeClass("a.adlog:hover");
});
}); 
```

我想更改单击`("#adminBox").slideUp('slow')`时的处理`$("a.adlog:link")`方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:38:05.550

试试这个。

```
$(document).ready(function(){
$("#adminBox").parent().append("<span></span>");   

$(".adlog").click(function() { 
    $(this).parent().find("#adminBox").slideDown('fast');
})

$(".adlog").parent().hover(function() {
    }, function(){  
        $(this).parent().find("#adminBox").slideUp('slow'); //here you want to change...
});

$(".adlog").hover(function() { 
        $(this).addClass("adlogHover");
    }, function(){
        $(this).removeClass("adlogHover");
});

}); 
```

# asp.net-mvc - 从 MVC 中的路由中删除区域名称

> ID：10617055
> 
> 赞同：0
> 
> 时间：2012-05-16T10:54:37.620
> 
> 标签：asp.net-mvc, routes, captcha

我正在使用 SimpleMvcCaptcha。我的环境有不同的区域。我想在不同的区域以不同的形式使用这个验证码。

这个模块需要一个名为 Captcha 的控制器和一个方法。如果我在使用它的同一区域创建此控制器，则没有问题，但如果我在不同区域使用它，则会收到此错误：

```
 The controller for path '/AreaName/Captcha/GetImage/15fe4de1-fd46-4f2f-a0d1-74c397bd8365' could not be found. 
```

我怎么解决这个问题？我认为可以解决此问题的一种方法是删除路由注册中的区域，例如

```
 routes.MapRoute(
           "Default_Captcha",
            "AreaName/Captcha/{action}/{id}",
            new { area = string.Empty, controller = "Captcha", action = "GetImage", id = UrlParameter.Optional }); 
```

但我仍然遇到同样的错误。

有什么方法可以从链接中删除区域名称？

**- - 更新**

Captcha 的操作需要一个控制器（具有一种获取验证码图像的方法的控制器）。

我想以在 MyArea 中实现的形式使用它。该表单与名为 MyController 的控制器相关。

如果我在此区域中创建一个 CaptchaController 并在其中创建所需的代码，则验证码运行良好（显示了验证码图像）。

现在假设我有另一个区域（MyArea2），在这个区域中，我有一个名为 MyController2 的控制器，那么我在这个区域也需要一个新的 Captcha 控制器，否则它不会显示图像。

我无法将 CaptchaController 移动到非区号部分，因为没有显示图像。

Captcha 图像的 URL 是（用于与 MyController 相关的视图中使用的 Captcha）：

```
http://mySite/MyArea/Captcha/GetImage/xxxxxxxxxxxx 
```

Captcha 图像的 URL 是（对于与 MyController2 相关的视图中使用的 Captcha）：

```
http://mySite/MyArea2/Captcha/GetImage/xxxxxxxxxxxx 
```

如果我将验证码控制器移动到非区域部分，则上述 url 都不起作用并且不显示图像。

如果我可以将这些 URL 重新路由到以下 URL，那么它们应该可以工作（我可以在非区域部分有一个 Captcha 控制器）：

```
 http://mySite/Captcha/getImage/xxxxxxxxxxxxxxxxxxx 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:56:01.230

如果您的 CaptchaController 不是特定于区域的，那么它可能不应该在一个区域中。如果您将其重新定位并重命名空间到主 Controllers 目录，它应该可以全局访问。

如果出于某种原因您不想这样做，那么您可以注册一条优先级更高的路线，该路线直接映射到您在全球位置的操作。您定义的路由的问题在于它没有将控制器的区域指定为参数，而似乎仅在 url 本身中这样做。不过，调试您的路由对我来说有点困难，因为（1）不清楚您是添加还是删除示例路由，（2）我看不到在示例路由之前或之后注册了哪些路由， (3) AreaName 的歧义令人困惑，因为我们无法判断它是映射工作的区域还是不起作用的区域

# php - 默认情况下，PDO 是否总是使用模拟的准备好的语句？

> ID：10617057
> 
> 赞同：11
> 
> 时间：2012-05-16T10:54:47.407
> 
> 标签：php, pdo, prepared-statement

PDO 具有[`PDO::ATTR_EMULATE_PREPARES`](http://php.net/manual/en/pdo.setattribute.php)控制是否应仅在 DB 不支持或始终不支持的情况下模拟准备好的语句的选项。但是，它没有提到它是否总是默认模拟它们。

通常人们会假设只有在必要时才使用仿真，但由于它是 PHP，所以不能仅仅因为它是理智的而假设...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T11:01:25.770

取决于数据库驱动程序。默认情况下，它们[总是](https://github.com/php/php-src/blob/master/ext/pdo_mysql/mysql_driver.c#L616)被 MySql 模拟（当然你可以手动关闭该选项）；在 Postgres 中，正确的默认设置是[动态检测](https://github.com/php/php-src/blob/master/ext/pdo_pgsql/pgsql_driver.c#L229)的。

# iphone - 如何从sqlite的表视图中删除它的数据行

> ID：10617062
> 
> 赞同：1
> 
> 时间：2012-05-16T10:55:00.803
> 
> 标签：iphone, database, sqlite

```
-(void) deletedata:(id) sender
{
    if(deleteStmt == nil)
    {
        const char *sql = "delete from cosmicnumber where name='%@' ";
        if(sqlite3_prepare_v2(db2, sql, -1, &deleteStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating delete statement. '%s'", sqlite3_errmsg(db2));

        NSLog(@"%@",strNam);
    }

    //When binding parameters, index starts from 1 and not zero.
    sqlite3_bind_text(deleteStmt, 1, [strNam UTF8String], -1, SQLITE_TRANSIENT);

    if (SQLITE_DONE != sqlite3_step(deleteStmt))
        NSAssert1(0, @"Error while deleting. '%s'", sqlite3_errmsg(db2));

    sqlite3_reset(deleteStmt);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:12:40.633

```
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete)
{
    sqlite3_stmt *stmt;

    if (sqlite3_open([[objdelegate getDBPath] UTF8String], &dbtest) == SQLITE_OK){

        NSString *deleteSQL =[NSString stringWithFormat:@"DELETE from test where test_Id=\"%@\"",[objdelegate.listOfTestId objectAtIndex:indexPath.row]];

        NSLog(@"Query : %@",deleteSQL);

        const char *delete_stmt=[deleteSQL UTF8String];

        sqlite3_prepare_v2(dbtest, delete_stmt, -1, &stmt, NULL);

        if(sqlite3_step(stmt) == SQLITE_DONE)
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Delete" message:@"Record Deleted..!!" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

            [alert show];
             [alert release];
        }
        else
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Delete" message:@"Record Not Deleted..!!" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

            [alert show];
            [alert release];
        }
    }

}
[self getdata];  // Here Call your main getdata function from where you are fetching your data from database
[tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:01:09.767

也许，这会对你有所帮助。其中 _allDownloadedSongs 是您从中填充表的数组，而 deleteRowFromDatabase 是一种从数组、数据库和 talbeView 中删除特定行的方法。

```
-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *strQuery;
    NSString *deleteRow;
    if (editingStyle == UITableViewCellEditingStyleDelete) 
    {
    [tblView beginUpdates];
        NSMutableDictionary *dic = (NSMutableDictionary *)[_allDownloadedSongs objectAtIndex:indexPath.row];
        deleteRow = [dic valueForKey:@"Id"];
        [self deleteRowFromDatabase:deleteRow];
        [_allDownloadedSongs removeObjectAtIndex:indexPath.row];
    [tblView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:UITableViewRowAnimationFade];
    [tblView endUpdates];
    }
} 
```

//对于数据库删除

```
- (void)deleteRowFromDatabase:(NSString *)deleteRow
{
    AppDelegate *obj = (AppDelegate *)[[UIApplication sharedApplication]delegate];
    NSString *strQuery = [NSString stringWithFormat:@"DELETE FROM DownloadedSongs WHERE Id=%d", rowId];
    [obj InsUpdateDelData:strQuery];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:07:35.443

你在这里用什么来连接sqlite？即，如果您使用coredata，那么它的代码很容易用小逻辑你使用什么？？？

喜欢...

```
-(void) deleteAllData {

    NSManagedObjectContext *moc = appDelegate.managedObjectContext;///your data which store in coredata

    //---------------Fetching and Deleting Category---------
    NSFetchRequest *fetchRequest;
    NSEntityDescription *entity;
    NSArray *arrobjects;
    NSError *error; 
    //---------------Fetching and Deleting ITems---------
    fetchRequest = [[NSFetchRequest alloc] init];
    entity = [NSEntityDescription entityForName:@"yourEntity" inManagedObjectContext:moc];  ///use your entity name..
    [fetchRequest setEntity:entity];

    arrobjects = [moc executeFetchRequest:fetchRequest error:nil];//arrobjects is array which stor youe another array or record which you want to delete

    for (NSManagedObject *managedObject in arrobjects) {

        [moc deleteObject:managedObject];
    }

    error = nil;
    [moc save:&error];

} 
```

之后用`reloadData`方法重新加载表

```
[yourTable reloadData]; 
```

希望，这对你有帮助.. :)

# php - PHP启动的Bash后台进程不起作用

> ID：10617063
> 
> 赞同：0
> 
> 时间：2012-05-16T10:55:01.557
> 
> 标签：php, bash, process, openoffice.org

我需要在后台启动 OpenOffice 服务器（如果它不是实例化的），然后使用 JODConverter 进行文件转换。
场景如下：

*   用户通过表格输入*.html 文件。
*   我通过与表单操作相对应的 PHP 脚本中的 $_FILES 变量获取文件
*   我用 shell_exec 运行一个 bash 脚本，并将临时路径传递给它，以访问我的 bash 脚本中的文件，然后进行转换

这是 PHP 代码：

```
 $fichier = $_FILES['html_file'];
        if($fichier) {
            if(is_uploaded_file($fichier['tmp_name'])) {

                if(move_uploaded_file($fichier['tmp_name'],"/var/www/test/doc/".$fichier['name'])) {
                   $output = shell_exec("./converter {$fichier['name']}");
                   echo $output;
                } 
            } 
        } 
```

脚本“转换器”代码：

```
#!/bin/bash
fichier=$1
pid=$$

echo RUNNING sOFFICE :

SERVICE=soffice
if P=$(pgrep $SERVICE)
then
    echo sOFFICE IS ALREADY RUNNING 
else
    echo sOFFICE WILL BE START WAIT 5s PLEASE 
    soffice --headless --accept="socket,host=127.0.0.1,port=8100;urp;" --nofirststartwizard &
    sleep 5
fi

echo CONVERSION START
java -jar ./jodconverter/lib/jodconverter-cli-2.2.2.jar ./$1 ./$1.odt
echo CONVERSION END 
```

我的问题出在 bash 脚本的第一部分，当我尝试在后台运行 sOFFICE 服务器时，此命令会阻止脚本的最终执行，即使使用`&`.
我试图通过终端运行这个脚本，它运行良好。
所以我认为，问题出在 bash 脚本的 php 执行上。有想法吗？

**编辑：**
由于 Jim Rubenstein 的回复找到了解决方案：

> 重定向标准输出和标准错误流

： 代替

```
soffice --headless --accept="socket,host=127.0.0.1,port=8100;urp;" --nofirststartwizard & 
```

经过

```
soffice --headless --accept="socket,host=127.0.0.1,port=8100;urp;" --nofirststartwizard > /dev/null 2> /dev/null & 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:06:05.083

通常只需在命令末尾添加 & 即可解决此问题；但似乎您还需要重定向标准输出和标准错误流。我在这里找到了对堆栈溢出相同问题的回答：

[php执行一个后台进程](https://stackoverflow.com/questions/45953/php-execute-a-background-process)

[为什么这个进程不在后台运行？](https://stackoverflow.com/questions/5911989/why-this-process-is-not-running-in-background)

# javascript - 如何使用回调测量 JavaScript 代码的执行时间？

> ID：10617070
> 
> 赞同：400
> 
> 时间：2012-05-16T10:55:35.690
> 
> 标签：javascript, node.js, profiling

我有一段使用`node.js`解释器执行的 JavaScript 代码。

```
for(var i = 1; i < LIMIT; i++) {
  var user = {
    id: i,
    name: "MongoUser [" + i + "]"
  };
  db.users.save(user, function(err, saved) {
    if(err || !saved) {
      console.log("Error");
    } else {
      console.log("Saved");
    }
  });
} 
```

如何测量这些数据库插入操作所花费的时间？我可以计算这段代码前后日期值的差异，但由于代码的异步性质，这是不正确的。

* * *

## 回答 #1

> 赞同：862
> 
> 时间：2013-08-25T09:39:44.447

使用 Node.js[`console.time()`](http://nodejs.org/api/console.html#console_console_time_label)和[`console.timeEnd()`](http://nodejs.org/api/console.html#console_console_timeend_label)：

```
var i;
console.time("dbsave");

for(i = 1; i < LIMIT; i++){
    db.users.save({id : i, name : "MongoUser [" + i + "]"}, end);
}

end = function(err, saved) {
    console.log(( err || !saved )?"Error":"Saved");
    if(--i === 1){console.timeEnd("dbsave");}
}; 
```

* * *

## 回答 #2

> 赞同：248
> 
> 时间：2013-01-27T19:26:32.733

有一种为此设计的方法。查看[process.hrtime();](http://nodejs.org/docs/v0.8.0/api/all.html#all_process_hrtime) .

所以，我基本上把它放在我的应用程序的顶部。

```
var start = process.hrtime();

var elapsed_time = function(note){
    var precision = 3; // 3 decimal places
    var elapsed = process.hrtime(start)[1] / 1000000; // divide by a million to get nano to milli
    console.log(process.hrtime(start)[0] + " s, " + elapsed.toFixed(precision) + " ms - " + note); // print message + time
    start = process.hrtime(); // reset the timer
} 
```

然后我用它来查看函数需要多长时间。这是一个打印名为“output.txt”的文本文件内容的基本示例：

```
var debug = true;
http.createServer(function(request, response) {

    if(debug) console.log("----------------------------------");
    if(debug) elapsed_time("recieved request");

    var send_html = function(err, contents) {
        if(debug) elapsed_time("start send_html()");
        response.writeHead(200, {'Content-Type': 'text/html' } );
        response.end(contents);
        if(debug) elapsed_time("end send_html()");
    }

    if(debug) elapsed_time("start readFile()");
    fs.readFile('output.txt', send_html);
    if(debug) elapsed_time("end readFile()");

}).listen(8080); 
```

这是一个可以在终端（BASH shell）中运行的快速测试：

```
for i in {1..100}; do echo $i; curl http://localhost:8080/; done 
```

* * *

## 回答 #3

> 赞同：125
> 
> 时间：2014-08-03T14:28:26.983

调用`console.time('label')`将以毫秒为单位记录当前时间，然后稍后调用`console.timeEnd('label')`将显示从该点开始的持续时间。

以毫秒为单位的时间将自动打印在标签旁边，因此您不必单独调用 console.log 来打印标签：

```
console.time('test');
//some code
console.timeEnd('test'); //Prints something like that-> test: 11374.004ms 
```

有关详细信息，请参阅[Mozilla 的开发人员文档`console.time`](https://developer.mozilla.org/en-US/docs/Web/API/Console/time)。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2018-06-29T17:13:20.840

令人惊讶的是没有人提到新的内置库：

在 Node >= 8.5 中可用，并且应该在 Modern Browsers 中

[https://developer.mozilla.org/en-US/docs/Web/API/Performance](https://developer.mozilla.org/en-US/docs/Web/API/Performance)

[https://nodejs.org/docs/latest-v8.x/api/perf_hooks.html#](https://nodejs.org/docs/latest-v8.x/api/perf_hooks.html#)

### 节点 8.5 ~ 9.x (Firefox, Chrome)

```
// const { performance } = require('perf_hooks'); // enable for node
const delay = time => new Promise(res=>setTimeout(res,time))
async function doSomeLongRunningProcess(){
  await delay(1000);
}
performance.mark('A');
(async ()=>{
  await doSomeLongRunningProcess();
  performance.mark('B');
  performance.measure('A to B', 'A', 'B');
  const measure = performance.getEntriesByName('A to B')[0];
  // firefox appears to only show second precision.
  console.log(measure.duration);
  // apparently you should clean up...
  performance.clearMarks();
  performance.clearMeasures();         
  // Prints the number of milliseconds between Mark 'A' and Mark 'B'
})();
```

[https://repl.it/@CodyGeisler/NodeJsPerformanceHooks](https://repl.it/@CodyGeisler/NodeJsPerformanceHooks)

### 节点 12.x

[https://nodejs.org/docs/latest-v12.x/​​api/perf_hooks.html](https://nodejs.org/docs/latest-v12.x/api/perf_hooks.html)

```
const { PerformanceObserver, performance } = require('perf_hooks');
const delay = time => new Promise(res => setTimeout(res, time))
async function doSomeLongRunningProcess() {
    await delay(1000);
}
const obs = new PerformanceObserver((items) => {
    console.log('PerformanceObserver A to B',items.getEntries()[0].duration);
      // apparently you should clean up...
      performance.clearMarks();
      // performance.clearMeasures(); // Not a function in Node.js 12
});
obs.observe({ entryTypes: ['measure'] });

performance.mark('A');

(async function main(){
    try{
        await performance.timerify(doSomeLongRunningProcess)();
        performance.mark('B');
        performance.measure('A to B', 'A', 'B');
    }catch(e){
        console.log('main() error',e);
    }
})(); 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2017-05-19T12:08:11.173

**对于任何想要获取经过时间的值而不是控制台输出的人：**

使用[process.hrtime()](https://nodejs.org/api/process.html#process_process_hrtime_time)作为@D.Deriso 的建议，下面是我更简单的方法：

```
function functionToBeMeasured() {
    var startTime = process.hrtime();
    // do some task...
    // ......
    var elapsedSeconds = parseHrtimeToSeconds(process.hrtime(startTime));
    console.log('It takes ' + elapsedSeconds + 'seconds');
}

function parseHrtimeToSeconds(hrtime) {
    var seconds = (hrtime[0] + (hrtime[1] / 1e9)).toFixed(3);
    return seconds;
} 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2012-05-16T12:54:13.510

```
var start = +new Date();
var counter = 0;
for(var i = 1; i < LIMIT; i++){
    ++counter;
    db.users.save({id : i, name : "MongoUser [" + i + "]"}, function(err, saved) {
          if( err || !saved ) console.log("Error");
          else console.log("Saved");
          if (--counter === 0) 
          {
              var end = +new Date();
              console.log("all users saved in " + (end-start) + " milliseconds");
          }
    });
} 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2015-10-12T02:17:35.807

老问题，但对于简单的 API 和轻量级解决方案；您可以使用 [**perfy**](https://github.com/onury/perfy)，它在内部使用高分辨率实时 ( `process.hrtime`)。

```
var perfy = require('perfy');

function end(label) {
    return function (err, saved) {
        console.log(err ? 'Error' : 'Saved'); 
        console.log( perfy.end(label).time ); // <——— result: seconds.milliseconds
    };
}

for (var i = 1; i < LIMIT; i++) {
    var label = 'db-save-' + i;
    perfy.start(label); // <——— start and mark time
    db.users.save({ id: i, name: 'MongoUser [' + i + ']' }, end(label));
} 
```

请注意，每次`perfy.end(label)`调用时，该实例都会自动销毁。

[披露：受D.Deriso 的回答](https://stackoverflow.com/a/14551263/112731)启发，编写了这个模块。文档[在这里](https://github.com/onury/perfy)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-08-05T13:09:32.627

您也可以尝试[exectimer](https://www.npmjs.org/package/exectimer)。它为您提供反馈，例如：

```
var t = require("exectimer");

var myFunction() {
   var tick = new t.tick("myFunction");
   tick.start();
   // do some processing and end this tick
   tick.stop();
}

// Display the results
console.log(t.timers.myFunction.duration()); // total duration of all ticks
console.log(t.timers.myFunction.min()); // minimal tick duration
console.log(t.timers.myFunction.max()); // maximal tick duration
console.log(t.timers.myFunction.mean()); // mean tick duration
console.log(t.timers.myFunction.median()); // median tick duration 
```

[编辑] 现在有一种更简单的方法来使用 exectime。您的代码可以像这样包装：

```
var t = require('exectimer'),
Tick = t.Tick;

for(var i = 1; i < LIMIT; i++){
    Tick.wrap(function saveUsers(done) {
        db.users.save({id : i, name : "MongoUser [" + i + "]"}, function(err, saved) {
            if( err || !saved ) console.log("Error");
            else console.log("Saved");
            done();
        });
    });
}

// Display the results
console.log(t.timers.myFunction.duration()); // total duration of all ticks
console.log(t.timers.saveUsers.min()); // minimal tick duration
console.log(t.timers.saveUsers.max()); // maximal tick duration
console.log(t.timers.saveUsers.mean()); // mean tick duration
console.log(t.timers.saveUsers.median()); // median tick duration 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-16T12:30:23.453

你可以试试[Benchmark.js 。](http://benchmarkjs.com/)它支持许多平台，其中还有 node.js。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-11-17T13:06:28.607

我为此设计了一个简单的方法，使用[console.time()](https://developer.mozilla.org/en-US/docs/Web/API/console/time)和[console.timeEnd()](https://developer.mozilla.org/en-US/docs/Web/API/console/timeEnd)：

##### 测量函数定义

```
function measureRunningTime(func,...args){
    const varToString = varObj => Object.keys(varObj)[0]
    const displayName = func.name || varToString({ func })
    console.time(displayName)
    func(...args)
    console.timeEnd(displayName)
} 
```

要使用它，请传递不带参数、绑定参数或带参数的函数作为以下参数。

#### 例子：

假设我想检查最简单的搜索算法的运行时间 - SimpleSearch：

##### 测量函数定义（您的代码在这里）

```
const simpleSearch = (array = [1,2,3] ,item = 3) => {
    for(let i = 0; i< array.length; i++){
        if (array[i] === item) return i;
    }
    return -1
} 
```

##### 不带参数的实现

```
measureRunningTime(simpleSearch) 
//Prints something like that-> simpleSearch: 0.04ms 
```

##### 使用 .bind() 的参数实现

```
const array = [1,2,3]
const item = 3
measureRunningTime(simpleSearch.bind(null, array, item))
//Prints something like that-> bound simpleSearch: 0.04ms 
```

##### 不使用 .bind() 的参数实现

```
const array = [1,2,3]
const item = 3
measureRunningTime(simpleSearch, array, item)
//Prints something like that-> simpleSearch: 0.04ms 
```

-> 注意！！这个实现远非完美——例如没有错误处理——但它可以用来检查简单算法的运行时间，此外，我不是一个有经验的程序员，所以对一切都持保留态度

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-11-07T06:03:34.970

从 AWS 迁移到 Azure 时我遇到了同样的问题

对于 express 和 aws，您已经可以使用现有的 time() 和 timeEnd()

对于 Azure，请使用： [https ://github.com/manoharreddyporeddy/my-nodejs-notes/blob/master/performance_timers_helper_nodejs_azure_aws.js](https://github.com/manoharreddyporeddy/my-nodejs-notes/blob/master/performance_timers_helper_nodejs_azure_aws.js)

这些 time() 和 timeEnd() 使用现有的 hrtime() 函数，提供高分辨率的实时。

希望这可以帮助。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-09-07T09:36:00.603

您可以使用`wrapper`函数轻松报告任何现有函数的执行时间。

包装器用于扩展现有函数以在现有函数执行之前和之后执行某些操作 - 并且是组合逻辑的便捷方式。

这是使用`withDurationReporting`包装器的示例：

```
// without duration reporting
const doSomethingThatMayTakeAWhile = async (someArg: string, anotherArg: number) => { 
  /** your logic goes here */
}

// with duration reporting
const doSomethingThatMayTakeAWhileWithReporting = withDurationReporting(
  'doSomethingThatMayTakeAWhile', 
  doSomethingThatMayTakeAWhile
); 
```

```
// note: you can define the function with duration reporting directly, too
const doSomethingThatMayTakeAWhile = withDurationReporting(
  'doSomethingThatMayTakeAWhile', 
  async (someArg: string, anotherArg: number) => { 
    /** your logic goes here */
  }
) 
```

这是包装器本身：

```
import { hrtime } from 'process';

const roundToHundredths = (num: number) => Math.round(num * 100) / 100; // https://stackoverflow.com/a/14968691/3068233

/**
 * a wrapper which reports how long it took to execute a function, after the function completes
 */
export const withDurationReporting = <R extends any, T extends (...args: any[]) => Promise<R>>(
  title: string,
  logic: T,
  options: {
    reportingThresholdSeconds: number;
    logMethod: (message: string, metadata?: Record<string, any>) => void;
  } = {
    reportingThresholdSeconds: 1, // report on anything that takes more than 1 second, by default
    logMethod: console.log, // log with `console.log` by default
  }, 
) => {
  return (async (...args: Parameters<T>): Promise<R> => {
    const startTimeInNanoseconds = hrtime.bigint();
    const result = await logic(...args);
    const endTimeInNanoseconds = hrtime.bigint();
    const durationInNanoseconds = endTimeInNanoseconds - startTimeInNanoseconds;
    const durationInSeconds = roundToHundredths(Number(durationInNanoseconds) / 1e9); // https://stackoverflow.com/a/53970656/3068233
    if (durationInSeconds >= options.reportingThresholdSeconds)
      options.logMethod(`${title} took ${durationInSeconds} seconds to execute`, { title, durationInSeconds });
    return result;
  }) as T;
}; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-07-05T13:10:35.033

我需要这是累积的，并衡量不同的东西。
构建了这些功能：

```
function startMeasuring(key) {
  measureTimers[key] = process.hrtime();
}

function stopMeasuring(key) {
  if (!measures[key]) {
    measures[key] = 0;
  }

  let hrtime = process.hrtime(measureTimers[key]);
  measures[key] += hrtime[0] + hrtime[1] / 1e9;
  measureTimers[key] = null;
} 
```

用法：

```
startMeasuring("first Promise");
startMeasuring("first and second Promises");
await new Promise((resolve) => {
  setTimeout(resolve, 1400);
});
stopMeasuring("first Promise");
stopMeasuring("first and second Promises");

startMeasuring("first and second Promises");
await new Promise((resolve) => {
  setTimeout(resolve, 600);
});
stopMeasuring("first and second Promises");

console.log("Measure Results", measures); 
/*
Measusre Results {
  setting: 0.00002375,
  'first Promise': 1.409392916,
  'first and second Promise': 2.015160376
}
*/ 
```

# git - 在一个 git-branch 上推送文件

> ID：10617075
> 
> 赞同：1
> 
> 时间：2012-05-16T10:55:43.040
> 
> 标签：git, push, commit

我在服务器上有一个网站，我想开始分享我的工作，所以我正在使用 git。我对它很陌生。

所以在远程服务器上，我做了一个“git init”和一个 git commit 来移动 .git 目录上的所有工作（总是在远程服务器上）。

然后我在我的本地服务器上创建了一个 git clone（带有 ssh 连接）。然后我更改了一些文件并提交了它（工作正常）然后推送它，但这里是错误消息：

```
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.
To ssh://sameditr@ftp.sameditresfroid.fr/homez.501/sameditr/www/.git
 ! [remote rejected] master -> master (branch is currently checked out)
error: failed to push some refs to 'ssh:...' 
```

有人有想法吗？

最好的，纽本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:41:49.007

我通常会做以下事情：

在服务器上，在 webapp 目录内

```
$ git init
$ git add *
$ git commit -a 
```

至少有一个 Initial Commit

在开发计算机上，您可以执行以下操作：

```
$ git init
$ git remote add origin git+ssh://server/var/www/.git/
$ git branch --set-upstream master origin/master
$ git pull 
```

在 dev 上编辑文件

```
$ git push 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:07:22.663

如果您打算在远程服务器上创建*中央*存储库，您应该创建*裸*存储库：

```
git init --bare 
```

您可以配置当前的非裸存储库以接受更新（错误消息甚至告诉您如何），但更简单的方法是删除远程服务器上的当前存储库并创建新的裸存储库。

这是一个链接，[详细解释了裸仓库和非裸仓库之间的区别。](http://www.bitflop.com/document/111)

# javascript - 如何使用 JQuery 在 HTML 中注册动态创建元素的事件？

> ID：10617084
> 
> 赞同：1
> 
> 时间：2012-05-16T10:56:10.833
> 
> 标签：javascript, jquery, html, css

我使用 Javascript 动态添加了下表：

```
 <table class="ActionMenu">
<tr>
<td>
<p>Ghanshyam</p>
</td>
</tr>
</table> 
```

我想在单击此表时获得警报..

我试过：

```
$('body').on("click", ".ActionMenu tr", function (e) {
      alert("abcd");
 });

$('.ActionMenu ').on("click", "tr", function(){
   //do something
});

$('.ActionMenu').live('click',function(){});

$('#ActionTab').delegate('.someClass','click',function(){}); 
```

但以下方法都不起作用..我怎样才能实现我的目标？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:02:32.620

您是否将代码封闭在`$(document).ready()`块中？如果没有，则尝试将其包含在 document.ready 函数中

```
$(function(){
$('body').on("click", ".ActionMenu tr", function (e) {
      alert("abcd");
 });

$('.ActionMenu ').on("click", "tr", function(){
   //do something
});

$('.ActionMenu').live('click',function(){});

$('#ActionTab').delegate('.someClass','click',function(){});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:58:51.593

乍一看，您的选择器有点偏离，请尝试：

```
$('table.ActionMenu tr').on('click',callback); 
```

由于这不起作用：建议了几件事：

*   您使用的是什么版本的 jQuery，`on`如果您使用的是旧版本，可能无法正常工作
*   你试过`$(body).on('click', '.ActionMenu tr', function() { alert('clicked'); });`吗？`.on`需要时更换`.live`。
*   一个经典的问题，但很容易被遗忘：您是否检查过任何一个类名中的拼写错误，id ......在两侧（服务器和 jQuery）？ - 你永远不会知道
*   是否所有代码都包含在一个`$(document).ready(function(){/*script goes here...*/});`
*   检查您的控制台是否有可能的语法错误或其他消息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T11:02:55.640

```
$(document.body).on('click', '.ActionMenu tr', function() { alert('clicked'); }); 
```

见[http://jsfiddle.net/MWvMH/1/](http://jsfiddle.net/MWvMH/1/)

# c# - TinyIoc - 如何配置所有接口注册 AsPerRequestSingleton？

> ID：10617085
> 
> 赞同：0
> 
> 时间：2012-05-16T10:56:10.897
> 
> 标签：c#, nancy, tinyioc

```
 /// <summary>
    /// Starts up the Application.
    /// </summary>
    /// <param name="container">The container.</param>
    /// <param name="pipelines">The pipelines.</param>
    protected override void ApplicationStartup(TinyIoC.TinyIoCContainer container, Nancy.Bootstrapper.IPipelines pipelines)
    {
        base.ApplicationStartup(container, pipelines);

        container.Register<UserProvider>().AsPerRequestSingleton();
    } 
```

以上是我现有的应用程序启动，其中包含我的 TinyIoc 配置。有没有办法把所有的接口注册都变成 PerRequestSingleton？我不能“一个一个”地做它们，因为我有太多的存储库，而且我不能把它们作为单例，因为它不适用于 NHibernate 的设置方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:46:16.050

如果您希望所有内容都在请求范围内，请尝试将注册移动到`ConfigureRequestContainer`方法而不是`ApplicationStartup`.

通常这是您在 Nancy 中处理请求范围的单例的方式。

如果失败，您可能需要查看另一个 DI 包，例如。[http://nuget.org/packages/Nancy.Bootstrappers.Autofac](http://nuget.org/packages/Nancy.Bootstrappers.Autofac)
它有更多的特性和约定来处理大量注册。

只需 nuget 它，然后使您的引导程序成为包内引导程序的子类。

# iphone - 将应用程序更新到 appStore iPhone 时出现图标错误？

> ID：10617086
> 
> 赞同：4
> 
> 时间：2012-05-16T10:56:15.630
> 
> 标签：iphone, icons, app-store

我正在尝试使用应用程序加载器更新我的应用程序。当我提交存档文件时，我收到了这个错误

```
 "icon specified in the info.plist not found under the top level app wrapper.icon57.png"! 
```

![在此处输入图像描述](../Images/e6fedef99f764d2fe9ca50c940152a9b.png)

我已经从我的项目中删除了图标并再次尝试，但错误存在。他们有什么办法可以消除这个错误吗？

我的 info.plist 显示这些图标![在此处输入图像描述](../Images/5a8af7d8c005368736572ac1ebab1c1f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T10:59:55.970

这可以帮助你，我认为你的文件名是错误的：

![在此处输入图像描述](../Images/6cd0d0341ba919ecb00b0ce3924ba648.png)

我通常将此图像放在我的仪表板中，以便您可以快速访问文件名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T15:05:39.620

+1 对 Mat 的[回答](https://stackoverflow.com/a/10617137/662605)，也请查看您可能需要的这个线程，即使名称正确，我也有这些错误，所以这可能很有趣：

[Xcode 项目图标文件和管理器档案图稿](https://stackoverflow.com/questions/9769782/xcode-project-icon-files-and-organiser-archives-artwork)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T11:04:41.667

您的应用程序图标必须命名为 Icon.png 大小为 57*57。您必须重命名图像并在信息 plist 中更改该名称。视网膜显示的应用程序图标大小应为 114*114。它应该是命名为 Icon@2x.png。重命名此图像并在信息 plist 中更正它。并且您的初始屏幕应命名为 Default.png

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T14:52:15.623

这有时是由于苹果在编译过程中进行的压缩。您应该确保文件类型正确设置为“图标”。单击项目导航器中的图标，在“身份和类型”下，您可以将文件类型设置为“图标”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T22:56:12.600

我的问题是我的 plist 文件中有一些空键。我删除了所有 Icon plist 条目，保存了 plist，然后通过 Target Summary 页面再次添加了图标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-16T13:51:46.370

我尝试了此处详述的所有步骤，其中许多之前已经解决了这个问题。

我最近可以让它工作的唯一方法是打开存档文件（右键单击管理器->存档）并打开将要上传的实际包（显示存档的包内容，然后显示里面的 .app 文件存档）并将图标文件直接复制到那里。重新提交之前失败的存档然后解决问题。

# visual-studio-2010 - 恢复损坏的 aspx 文件

> ID：10617088
> 
> 赞同：1
> 
> 时间：2012-05-16T10:56:19.480
> 
> 标签：visual-studio-2010, recover

当我在 Visual Studio 2010 中更新 .aspx 页面时，我的系统崩溃了。当我重新启动 PC 并再次启动 Visual Studio 时，.aspx 文件仍然存在，但是当我在解决方案资源管理器中单击打开时，记事本打开了并显示一个空白文件。在 Windows 资源管理器中查看文件，该文件的大小仍然为 31Kb，我的文件内容已替换为一些空白字符

关于如何恢复此文件的任何建议？我已经工作了 4-5 天，没有备份 - 啊！任何帮助将非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T18:06:44.783

虽然旧帖子，分享我的经验：D

我今天遇到了同样的文件问题并成功克服了它。:D

拿回我的文件后感觉好极了... :D \m/ :D

这是解决方案。实际上，我发现有两种恢复损坏文件的解决方案。

> **场景：**您的文件已损坏（即文件中的任何地方都为空或空格，而大小还可以）
> 
> **解决方案#1：**使用文件恢复软件。
> 
> 文件恢复软件可以恢复已删除的文件。在我们的场景中，您的文件并未被删除，而是已损坏。那么在这种情况下如何使用该软件！！！！
> 
> *   只需删除您的文件
> *   尝试使用流行的文件恢复软件恢复已删除的文件
> 
> 瞧……它被恢复了……：D
> 
> 我使用的恢复软件是[Recuva](http://www.piriform.com/recuva)。工作完美。
> 
> **解决方案#2：**如果它是网页内容，如 CSS/Javascript/html 等。
> 
> 您可以从浏览器缓存中收集文件的最后一个工作副本，如果且仅当您没有在该浏览器中打开损坏的网页时。

帮助我找到第一个解决方案的想法来自

**马克吐温**——“永远不要和愚蠢的人争论，他们会把你拉到他们的水平，然后用经验打败你。”

当我在考虑如何使用这个恢复软件时，我想到了这句话并说自己“让我们将文件拖到水平，恢复软件可以恢复的地方”......：D

# iphone - 通过 iphone 发送图像

> ID：10617092
> 
> 赞同：-4
> 
> 时间：2012-05-16T10:56:49.767
> 
> 标签：iphone, ipad

我想通过 iphone 发送彩信。我搜索了很多但失败
请给我一个很好的参考或链接
所以我可以在我的 iphone 或替代的东西中实现 mms 的东西
提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:17:17.543

iOS SDK 不支持发送彩信，只支持短信。

有关发送 SMS 的信息，请参阅[MFMessageComposeViewController上的文档。](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)

可能有第三方服务允许您发送彩信，但他们可能会按彩信向您收费。

# android - ListView 和 ArrayAdapter 问题，我该如何处理？

> ID：10617093
> 
> 赞同：0
> 
> 时间：2012-05-16T10:56:52.793
> 
> 标签：android, listview, android-arrayadapter

我有一个产品类，它包含三个字段：-

1.  ID
2.  姓名
3.  价格

在我的代码中，我创建了一个`List<Product> productList = Collections.synchronizedList(new ArrayList<Product>());`

此产品列表用于创建一个`ArrayAdapter<Product> adapter = ArrayAdapter<Product>()`，我将 productList 填充到一个单独的线程中，并相应地通知适配器。它工作得很好。

现在，

1.  我想更改某些特定产品的颜色（比如价格 < 1000）。
2.  ListView 的每一行应包含 4 个元素产品图像、名称、描述和价格。
3.  当用户单击产品时，在上下文菜单选项中，即购买产品，应显示查看产品。

我已经阅读了一些与此相关的博客和线程。我仍然无法决定从哪里开始，我阅读了有关 ArrayAdapter 的自定义、覆盖 getView()、自定义列表过滤器等的信息。哪种方式最适合我的要求……换句话说，自定义适配器和列表过滤器如何受益我 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:01:27.530

您应该扩展[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html "基础适配器")并为每个项目提供您自己的布局 (getView())。不要忘记管理视图回收，并可能使用 ViewHolder 范例。

**编辑**

我没有大量使用 ListAdpater，因为它只绑定到 ListView。有时我需要一个用于 GridView 的适配器，而 BaseAdapter 为我提供了所有用例的足够自由。

BaseAdapter 示例：

```
public class FanAdapter extends BaseAdapter {

    private List<Fan> mFans;
    private Activity mContext;

    public FanAdapter(Activity context, List<Fan> fans) {
        mContext = context;
        mFans = fans;
    }

    private class ViewHolder {

        public ImageView image;
        public TextView firstName;
        public TextView lastName;   
    }

    @Override
    public View getView(int position, View view, ViewGroup container) {
        if (view == null) {
            view = LayoutInflater.from(mContext).inflate(R.layout.fan_item, container, false);
        }

        ViewHolder viewHolder = (ViewHolder) view.getTag();
        if(viewHolder == null){
            viewHolder = new ViewHolder();
            viewHolder.image = (ImageView) view.findViewById(R.id.image);
            viewHolder.firstName = (TextView) view.findViewById(R.id.firstname);
            viewHolder.lastName = (TextView) view.findViewById(R.id.lastname);
            view.setTag(viewHolder);
        }

        // setting here values to the fields of my items from my fan object
        viewHolder.firstName.setText(fan.getFirstName());
        (...)

        return view;
    }

    @Override
    public int getCount() {
        if (mFans != null) {
            return mFans.size();
        } else {
            return 0;
        }
    }

    @Override
    public Object getItem(int position) {
        return mFans.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }
} 
```

您可以将它与包含 ListView 或 ListActivity 的 Activity 一起使用（在其布局中有一个具有特殊 id 的 ListView）：

```
<ListView
        android:id="@id/android:list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:cacheColorHint="@android:color/transparent" /> 
```

这样，您的 ListActivity 将膨胀视图将能够进行 findViewById() 调用，而 getListView() 将返回此内部 listView。这是一个小技巧，您可以将自己的 listView 与另一个 id 放在一起，然后自己制作 findViewById()。对于 ListActivity，还有另一个 hack：如果 ListActivity 再次找到一个带有特殊 id 的空视图，它将在列表为空时显示：

```
<include
    android:id="@+id/empty"
    layout="@layout/empty"
    android:visibility="gone"
    android:layout_gravity="center" /> 
```

然后在你的listView上，无论你使用的是Activity还是ListActivity，你都可以在ListView上设置你的适配器：

```
getListView().setAdapter(new FanAdapter(this, myFanDataArray))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:03:00.357

在`getView(...)`方法中，您必须检查价格并设置行的颜色...

看到这个定制的列表视图..

[http://samir-mangroliya.blogspot.in/p/android-customized-listview.html](http://samir-mangroliya.blogspot.in/p/android-customized-listview.html)

我根据奇数行和偶数行设置行颜色和

```
you can set checking price...

if(price < 1000){
       row.setBackgroundColor(Color.RED);
}else{
       row.setBackgroundColor(Color.Yellow);
} 
```

# c++ - 如何用空格和制表符区分文件行？

> ID：10617094
> 
> 赞同：8
> 
> 时间：2012-05-16T10:56:55.997
> 
> 标签：c++, string, split, tabs, whitespace

我有以下格式的文件

> 1000 年 1 月 1 日星期一（TAB）你好（TAB）你好

有没有办法以`'\t'`单独用作分隔符（而不是空格）的方式阅读文本？

所以样本输出可以是，

> 1000 年 1 月 1 日星期一
> 
> 你好
> 
> 你好吗

我不能使用`fscanf()`，因为它只读取到第一个空格。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T12:04:51.163

仅使用标准库设施：

```
#include <sstream>
#include <fstream>
#include <string>
#include <vector>

std::ifstream file("file.txt");

std::string line;

std::vector<std::string> tokens;

while(std::getline(file, line)) {     // '\n' is the default delimiter

    std::istringstream iss(line);
    std::string token;
    while(std::getline(iss, token, '\t'))   // but we can specify a different one
        tokens.push_back(token);
} 
```

您可以在这里获得更多想法：[如何在 C++ 中标记字符串？](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T11:01:07.737

从提升：

```
#include <boost/algorithm/string.hpp>
std::vector<std::string> strs;
boost::split(strs, "string to split", boost::is_any_of("\t")); 
```

您可以在其中指定任何分隔符。

# jquery - 需要关于jquery每个动画的帮助

> ID：10617097
> 
> 赞同：2
> 
> 时间：2012-05-16T10:57:13.090
> 
> 标签：jquery, jquery-animate

我是 jQuery 的新手。我想开发一个工具提示动画，它将出现在第 1 宫（最左边），然后出现在第 2 宫，然后在第 3 宫和第 4 宫相同，然后再次从第 1 宫开始。我也想在房子上悬停效果。当鼠标悬停在任何房屋上时，将出现该房屋的相应工具提示。这是代码；

```
<script type="text/javascript">
$(document).ready(function() {

    var bubble = $('.bubble-tooltip');
    bubble
        .eq(0).delay(1500).fadeIn('slow').delay(1000).fadeOut('slow')
        .eq(1).delay(2000).fadeIn('slow').delay(1000).fadeOut('slow')
        .eq(2).delay(2500).fadeIn('slow').delay(1000).fadeOut('slow')
        .eq(4).delay(3000).fadeIn('slow').delay(1000).fadeOut('slow');

    $('.cloud').delay(5000).fadeIn('slow', function() {
        $(this).animate(
            {'left': -35},
            {duration: 2000}
        )
        //bubble.delay(1000).fadeOut('slow');
        $('.bg-overlay').fadeIn(2000)
    });

}); 
```

我也尝试过其他方法来实现我的目标，但没有运气。需要帮助并提前致谢。这是网站网址。[http://umairdesigner.com/builder/](http://umairdesigner.com/builder/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:03:53.867

这应该可以修复您的气泡显示：

```
var bubble = $('.bubble-tooltip');

bubble.eq(0).delay(1500).fadeIn('slow').delay(1000).fadeOut('slow');
bubble.eq(1).delay(2000).fadeIn('slow').delay(1000).fadeOut('slow');
bubble.eq(2).delay(2500).fadeIn('slow').delay(1000).fadeOut('slow');
bubble.eq(4).delay(3000).fadeIn('slow').delay(1000).fadeOut('slow'); 
```

它不会链接在一起，因为返回值`.fadeOut('slow')`不会是您的气泡集合 - 所以进一步使用`.eq()`将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:58:39.323

我认为你可以这样做：

```
var bubble = $('.bubble-tooltip');
var j = 0;
$(bubble).each(function(i){
    $(bubble[j]).delay(1500).fadeIn('slow').delay(1000).fadeOut('slow', function(){
        $(bubble[j + 1]).delay(1500).fadeIn('slow').delay(1000).fadeOut('slow');
        j++;
    });
}); 
```

或者如果是 4 个固定房屋：

```
var bubble = $('.bubble-tooltip');
  bubble.eq(0).fadeIn('slow').delay(1000).fadeOut('slow', function(){
    bubble.eq(1).fadeIn('slow').delay(1000).fadeOut('slow', function(){
      bubble.eq(2).fadeIn('slow').delay(1000).fadeOut('slow', function(){
        bubble.eq(3).fadeIn('slow').delay(1000).fadeOut('slow', function(){
          bubble.eq(4).fadeIn('slow').delay(1000).fadeOut('slow');
        });
      });
    });
  }); 
```

# php - Facebook API：无法删除事件帖子，返回：(#100) 无效的帖子 ID

> ID：10617100
> 
> 赞同：1
> 
> 时间：2012-05-16T10:57:24.260
> 
> 标签：php, facebook, api, events

我代表我的用户在活动的墙上发布了一些内容：

```
$event_id = "XXXXXXXXXXXXXXX";

$message = array(
  'access_token' => $token,
  'message' => 'This is just a test...',
  'name' => 'Title',
  'caption' => "Caption goes here"
);

$result = $facebook->api($event_id."/feed", "POST", $message); 
```

然后我像这样读出帖子ID：

```
$post_id = $result["id"];

// for example: 387914681250830_387939784581653
// where the format is EVENTID_POSTID 
```

...我尝试删除同一个帖子：

```
try {
  $facebook->api($post_id, "DELETE");
}
catch (FacebookApiException $e) {
  $error = $e->getMessage();
  print $error;
} 
```

结果是这样的：

```
(#100) Invalid post id 
```

我什至尝试了这些版本（假设帖子 ID 是 387914681250830_387939784581653）：

```
$facebook->api("/387914681250830_387939784581653/", "DELETE"); // (#100) invalid post_id

$facebook->api("/387939784581653", "DELETE"); // Unsupported delete request.

$facebook->api("/387914681250830/feed/387939784581653", "DELETE"); // Unknown path components: /387939784581653 
```

所以现在我被困住了。有趣的是，API 返回的 POST_ID 原来是无效的。:-((

任何想法如何删除事件墙上（由我拥有）上的帖子（由我的应用程序创建）？

# jquery - 模态对话框 Jquery UI 黑莓曲线问题

> ID：10617103
> 
> 赞同：3
> 
> 时间：2012-05-16T10:57:30.917
> 
> 标签：jquery, asp.net, jquery-ui, blackberry, blackberry-simulator

我正在使用 asp.net 创建一个移动站点，我在我的应用程序中使用 JqueryUI 对话框，但在实施后它不适用于 Blackberry Curve，但相同的代码适用于 Blackberry Bold。我不知道可能是什么问题，所以请查看我的代码并更新我应该怎么做才能让它在黑莓曲线上工作......

```
<input type="image" id="imgBtnHelp" src="../Images/Help.png"  onclick="return openPopup();" /> // button

<div id="PnlHelp" class="csPnlHelp" style="display: none;"> // My Div Tag
<uc1:ucHelpControl ID="ucHelpControl1" runat="server" /> // My UserControl
</div>

<script type="text/javascript" language="javascript"> // Javascript function
//<![CDATA[
function openPopup() { $('.csPnlHelp').dialog({ width: 460 }); return false; }
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:39:04.290

在我的 8530 BlackBerry Curve (v5.0.0.1030) 上，JQuery UI Dialog 演示根本不起作用。对话框内容与页面的其余部分一起显示。

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

你可能只是运气不好。如果您需要支持此设备，我会安排对话框内容，以便在不支持 jQuery UI 的情况下显示在合理的位置。

# javascript - Firefox 中 JavaScript 文件的最大文件大小

> ID：10617104
> 
> 赞同：2
> 
> 时间：2012-05-16T10:57:34.770
> 
> 标签：javascript, json, firefox

我有一个相当大的 JavaScript 文件，其中包含通过脚本标签加载的 JSONP 数据 (27 MB)。这适用于除 Firefox 之外的所有浏览器，它拒绝加载文件（错误是“switch statement too large”，尽管那里没有 switch）。但它适用于较小的文件（2MB）。

Firefox 中 JavaScript 文件的最大文件大小是多少，所以我可以对文件进行分区并绕过这个边界？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:16:42.083

在从我现在不记得的网站中终止大型 JavaScript 文件的流式传输后，我只看到过一次此错误。

有什么理由必须一次加载完整文件吗？例如，您可以将它分成 2MB 的部分进行流式传输，并被类似的东西包围

```
(function() {
    myJsonData += "..... 2MB of your code ...";
})(); 
```

**注意**：您必须`myJsonData`在全局上下文中定义才能跟踪它！

在此之后，您只需要一些完成语句和回调，即发送您的最后一条数据，如下所示：

```
(function() {
    myJsonData += "..... 2MB of your code ...";
    // Trigger callback which works with the json data
    myCallbackFunction();
})(); 
```

这就是我尝试解决此错误的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T21:46:17.423

或绕过限制和缓慢加载：只需压缩数据（在服务器上一次）；客户端的浏览器读取文件并解压缩。

两者都在大约 70 行代码中起作用：

[http://rosettacode.org/wiki/LZW_compression#JavaScript](http://rosettacode.org/wiki/LZW_compression#JavaScript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:41:06.697

`enter code here`我认为最大为 20MB

```
(function() {
    myJsonData += "..... 2MB of your code ...";
    // Tr`enter code here`igger callback which works with the json data
    myCallbackFunction();
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T20:01:27.050

一些关于移动浏览器的测试 - 在台式机上检查也很有趣：脚本大小与浏览器缓存中的脚本

[http://www.stevesouders.com/blog/2010/07/12/mobile-cache-file-sizes/](http://www.stevesouders.com/blog/2010/07/12/mobile-cache-file-sizes/)

# javascript - JavaScript 中以字母为键的关联数组

> ID：10617123
> 
> 赞同：5
> 
> 时间：2012-05-16T10:59:02.393
> 
> 标签：javascript

我希望创建一个以字母为键的 JavaScript 对象（关联数组）。实现这一目标的最佳方法是什么？

例子 -

```
obj[a] = 'somevalue'
obj[b] = 'somevalue' 
...
obj[z]= 'some value' 
```

动态分配字母作为键。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T11:10:02.303

这是创建对象的一种快速而懒惰的方法：

```
var a = 97;
var charArray = {};
for (var i = 0; i<26; i++)
    charArray[String.fromCharCode(a + i)] = String.fromCharCode(a + i);

console.log(charArray); 
```

[http://jsfiddle.net/V2B7S/](http://jsfiddle.net/V2B7S/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T11:00:47.487

```
var obj = { };
obj['A'] = 'letter A';
obj['B'] = 'letter B';
obj['C'] = 'letter C'; 
```

或者：

```
var obj = [ ];
obj['A'] = 'letter A';
obj['B'] = 'letter B';
obj['C'] = 'letter C'; 
```

进而：

```
alert(obj.B); 
```

或等价物：

```
alert(obj['B']); 
```

不过，我会使用`{ }`基于非整数的索引的语法。为什么？`[ ]`因为当你使用非整数索引时，会有一些真正的陷阱，比如这个：

```
var obj = [ ];
obj['A'] = 'letter A';
obj['B'] = 'letter B';
obj['C'] = 'letter C';
alert(obj.length); 
```

猜猜会打印什么？是的，你猜对了：0。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-16T11:04:33.447

```
var hash = {};
hash["abcdefghijklmnopqrstuvwxyz"] = "something";
hash["בגדהוזחטיךכלםמןנסעףפץצקרשת"] = "something else";
hash["АБВГДЕЖЅZЗИІКЛМНОПРСТȢѸФХѾЦЧШЩЪꙐЬѢꙖѤЮѦѪѨѬѠѺѮѰѲѴ"] = "something else"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T11:16:39.970

[首先使用Thack Mai](https://stackoverflow.com/questions/10617123/associative-array-with-alphabets-as-keys-in-javascript/10617305#10617305)使用的技巧创建一个字母数组：

```
var associateArray = []  
for (i = 65; i <= 90; i++) {
    associateArray[i-65] = String.fromCharCode(i).toLowerCase()
} 
```

然后将值映射到您要将值映射到的任何字母

```
associateArray['a'] = 1
associateArray['b'] = 2 
```

这会创建浏览器中用于 CSSStyleDeclaration 的对象类型。它可以像这样迭代

```
for (var i = 0; i < associateArray.length; i++) {
    console.log(associateArray[associateArray[i]])
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-26T17:08:21.297

您可以使用[reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)来创建关联数组：

```
const dict = Array.from(new Array(26))
    .reduce((p, c, i) => (p[String.fromCharCode(i + 97)] = i, p), {})

console.log(dict)
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-16T11:24:17.993

```
function range( start, limit ){
    var assoc_array = {};
    var step = 1;
    var DEFAULT_VALUE = "some value";
    step *= limit.charCodeAt(0) - start.charCodeAt(0) > 0 ? 1:-1;
    while( start !== limit ){
        assoc_array[ start ] = DEFAULT_VALUE;
        start = String.fromCharCode(start.charCodeAt(0)+step);
    }
    assoc_array[ limit ] = DEFAULT_VALUE;
    return assoc_array;
}
//Usage examples
var alphabet_array = range('a','z');
var reverse_alphabet_array = range('z','a'); 
```

[**演示**](http://jsfiddle.net/cnp7F/)

# php - 基于 Zend Framework 中的现有连接创建新的数据库连接

> ID：10617124
> 
> 赞同：0
> 
> 时间：2012-05-16T10:59:03.387
> 
> 标签：php, zend-framework, pcntl

我有一个使用 Zend 框架并派生出一个子进程的 CLI 脚本。当我从 CLI 启动它时它运行良好，但是当我从 bash 脚本启动它时，当 bash 脚本结束时，db 连接关闭。

我想我需要给孩子一个新的数据库连接到同一个数据库。不幸的是，最初创建连接的方式对我来说太神秘了，所以我想在现有的基础上创建新的连接。我怎样才能做到这一点？

这是它在 Bootstrap 中的创建方式以及我以后如何访问它：

```
$resource = $this->getPluginResource ( 'db' );
$db = $resource->getDbAdapter ();
Zend_Registry::getInstance ()->dbAdapter = $db;    

$this->db = Zend_Registry::get ( 'dbAdapter' ); 
```

这就是我想使用新连接的地方：

```
public function start_daemon($worker) {
    if (file_exists ( $this->get_pidfile ( $worker ) ))
        die ( 'process is already running - process pidfile already exists -> ' . $this->get_pidfile ( $worker ) . "\n" );
    $cmd = 'php -f ' . __FILE__ . ' process';
    if ($this->is_win) {
        $WshShell = new COM ( "WScript.Shell" );
        $oExec = $WshShell->Run ( "$cmd /C dir /S %windir%", 0, false );
        exec ( 'TASKLIST /NH /FO "CSV" /FI "imagename eq php.exe" /FI "cputime eq 00:00:00"', $output );
        $output = explode ( '","', $output [0] );
        $pid = $output [1];
        file_put_contents ( $this->get_pidfile ( $worker ), $pid );
        echo ('JobQue daemon started with pidfile:' . $this->get_pidfile ( $worker ) . "\n");
    } else {
        $PID = pcntl_fork ();
        if ($PID) {
            file_put_contents ( $this->get_pidfile ( $worker ), $PID );
            echo ('JobQue daemon started with pidfile:' . $this->get_pidfile ( $worker ) . "\n");                               
            exit (); // kill parent
        }
        //!!Need to create a new db connection here
        //to make sure the child will have one
        //when the parent exits
        posix_setsid (); // become session leader
        chdir ( "/" );
        umask ( 0 ); // clear umask
        $this->proc_nice ( 19 );
        $this->process_jobs ();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:54:07.007

你可以这样访问

```
public function start_daemon($worker) {

    $db = Zend_Registry::get ( 'dbAdapter' );
    //do database operations with db object 
```

**对于新连接**

```
//if config is stored in registry,
$config= Zend_Registry::get ( 'config' );
$db = Zend_Db::factory($config['resources']['db']['adapter'], $config['resources']['db']['params']);

OR 

$db = Zend_Db::factory('Pdo_Mysql', array(
            'host'     => 'hostname',
            'username' => 'xxxxxxx',
            'password' => 'xxxxxxxx',
            'dbname'   => 'xxxxxxxxx'
        ));

 //set as default adapter
    Zend_Db_Table_Abstract::setDefaultAdapter($db); 
```

# android - 水平列表视图

> ID：10617126
> 
> 赞同：3
> 
> 时间：2012-05-16T10:59:06.797
> 
> 标签：android, android-listview

> **可能重复：**
> [如何在 Android 中制作水平 ListView？](https://stackoverflow.com/questions/3877040/how-can-i-make-a-horizontal-listview-in-android)

我已经多次使用垂直列表视图，但对于某些要求，我想实现水平列表视图，列表项也会动态出现。请帮助我获得水平列表视图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T11:07:15.550

Android API 似乎缺少`Horizontal ListView`小部件。

所以在其他教程中，开发人员使用`Gallery`or来实现它`HorizontalScrolllView`。

实际上，Gallery 很容易，因为您可以将 Adapter 与它一起使用，因此在运行时您可以在其中添加自定义视图。它看起来像一个水平 ListView。

只需通过以下链接，

在所有可能的方式这将被推荐[Android Horizo​​ntal ListView](https://github.com/dinocore1/DevsmartLib-Android)

还有这个 SO question [How can I make a Horizo​​ntal ListView in Android?](https://stackoverflow.com/questions/3877040/how-can-i-make-a-horizontal-listview-in-android)

# java - 通过类的java sql连接

> ID：10617128
> 
> 赞同：-5
> 
> 时间：2012-05-16T10:59:09.513
> 
> 标签：java, instance-variables

我有以下代码：

```
import java.sql.*;
import java.net.*;

public class binsz {

    public void dbConnect(String db_connect_string, String username, String password) {
        try {
            Class.forName("net.sourceforge.jtds.jdbc.Driver");
            Connection conn = DriverManager.getConnection(db_connect_string, username, password);
            // System.out.println("connected");
            }

        catch (Exception e) {
            e.printStackTrace();
            }
    }

    public void dbQuery(String query) {
        try {
            Statement stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery(query);
            }

        catch (Exception e) {
            e.printStackTrace();
            }

    }

    public static void main(String[] args) throws Exception {

        String db_name = "sqlserver.local";
        String username = "sa";
        String password = "passwordforsa";
        String connection = "jdbc:jtds:sqlserver://" + db_name;

        Connection conn = null;
        binsz db = new binsz();
        db.dbConnect(connection, username, password);
        String query = "SELECT TOP 2 * FROM aux..table_name";
        db.dbQuery(query);
    }

} 
```

并在编译时出错：

```
binsz.java:20: cannot find symbol
symbol  : variable conn
location: class sip_bins
            Statement stmt = conn.createStatement();
                             ^
1 error 
```

我如何使用`binsz db = new binsz();`它来执行查询并检索它的值。

谢谢

PS：与数据库的连接正在工作..（如果我取消注释该行，它会打印“已连接”）..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:07:17.090

这是非常糟糕的代码 - 编写时无用。你有很多工作要做。

我建议您研究一下并丢弃您的代码：

```
package persistence;

import java.sql.*;
import java.util.*;

/**
 * util.DatabaseUtils
 * User: Michael
 * Date: Aug 17, 2010
 * Time: 7:58:02 PM
 */
public class DatabaseUtils {
    private static final String DEFAULT_DRIVER = "oracle.jdbc.driver.OracleDriver";
    private static final String DEFAULT_URL = "jdbc:oracle:thin:@host:1521:database";
    private static final String DEFAULT_USERNAME = "username";
    private static final String DEFAULT_PASSWORD = "password";
/*
    private static final String DEFAULT_DRIVER = "org.postgresql.Driver";
    private static final String DEFAULT_URL = "jdbc:postgresql://localhost:5432/party";
    private static final String DEFAULT_USERNAME = "pgsuper";
    private static final String DEFAULT_PASSWORD = "pgsuper";
*/
/*
    private static final String DEFAULT_DRIVER = "com.mysql.jdbc.Driver";
    private static final String DEFAULT_URL = "jdbc:mysql://localhost:3306/party";
    private static final String DEFAULT_USERNAME = "party";
    private static final String DEFAULT_PASSWORD = "party";
*/

    public static void main(String[] args) {
        long begTime = System.currentTimeMillis();

        String driver = ((args.length > 0) ? args[0] : DEFAULT_DRIVER);
        String url = ((args.length > 1) ? args[1] : DEFAULT_URL);
        String username = ((args.length > 2) ? args[2] : DEFAULT_USERNAME);
        String password = ((args.length > 3) ? args[3] : DEFAULT_PASSWORD);

        Connection connection = null;

        try {
            connection = createConnection(driver, url, username, password);
            DatabaseMetaData meta = connection.getMetaData();
            System.out.println(meta.getDatabaseProductName());
            System.out.println(meta.getDatabaseProductVersion());

            String sqlQuery = "SELECT PERSON_ID, FIRST_NAME, LAST_NAME FROM PERSON ORDER BY LAST_NAME";
            System.out.println("before insert: " + query(connection, sqlQuery, Collections.EMPTY_LIST));

            connection.setAutoCommit(false);
            String sqlUpdate = "INSERT INTO PERSON(FIRST_NAME, LAST_NAME) VALUES(?,?)";
            List parameters = Arrays.asList("Foo", "Bar");
            int numRowsUpdated = update(connection, sqlUpdate, parameters);
            connection.commit();

            System.out.println("# rows inserted: " + numRowsUpdated);
            System.out.println("after insert: " + query(connection, sqlQuery, Collections.EMPTY_LIST));
        } catch (Exception e) {
            rollback(connection);
            e.printStackTrace();
        } finally {
            close(connection);
            long endTime = System.currentTimeMillis();
            System.out.println("wall time: " + (endTime - begTime) + " ms");
        }
    }

    public static Connection createConnection(String driver, String url, String username, String password) throws ClassNotFoundException, SQLException {
        Class.forName(driver);
        if ((username == null) || (password == null) || (username.trim().length() == 0) || (password.trim().length() == 0)) {
            return DriverManager.getConnection(url);
        } else {
            return DriverManager.getConnection(url, username, password);
        }
    }

    public static void close(Connection connection) {
        try {
            if (connection != null) {
                connection.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(Statement st) {
        try {
            if (st != null) {
                st.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(ResultSet rs) {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void rollback(Connection connection) {
        try {
            if (connection != null) {
                connection.rollback();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static List<Map<String, Object>> map(ResultSet rs) throws SQLException {
        List<Map<String, Object>> results = new ArrayList<Map<String, Object>>();
        try {
            if (rs != null) {
                ResultSetMetaData meta = rs.getMetaData();
                int numColumns = meta.getColumnCount();
                while (rs.next()) {
                    Map<String, Object> row = new HashMap<String, Object>();
                    for (int i = 1; i <= numColumns; ++i) {
                        String name = meta.getColumnName(i);
                        Object value = rs.getObject(i);
                        row.put(name, value);
                    }
                    results.add(row);
                }
            }
        } finally {
            close(rs);
        }
        return results;
    }

    public static List<Map<String, Object>> query(Connection connection, String sql, List<Object> parameters) throws SQLException {
        List<Map<String, Object>> results = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        try {
            ps = connection.prepareStatement(sql);

            int i = 0;
            for (Object parameter : parameters) {
                ps.setObject(++i, parameter);
            }
            rs = ps.executeQuery();
            results = map(rs);
        } finally {
            close(rs);
            close(ps);
        }
        return results;
    }

    public static int update(Connection connection, String sql, List<Object> parameters) throws SQLException {
        int numRowsUpdated = 0;
        PreparedStatement ps = null;
        try {
            ps = connection.prepareStatement(sql);

            int i = 0;
            for (Object parameter : parameters) {
                ps.setObject(++i, parameter);
            }
            numRowsUpdated = ps.executeUpdate();
        } finally {
            close(ps);
        }
        return numRowsUpdated;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:01:34.117

`Connection conn`将当前在方法中的哪个声明`dbConnect`为实例变量。您收到此错误是因为`conn`在方法中是未知的`dbQuery`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:01:43.123

您应该将连接设为实例变量`this.conn = DriverManager...`。我还建议使用一个好的连接池。

还记得在你完成它们之后关闭你的语句、结果集和连接。

**更新**

```
try {
    ...
} finally {
    if (rs != null) rs.close();
    if (st != null) st.close();
    //if (conn != null) conn.close(); // depends on wheter you need it again, or whil retrieve a new one
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:04:34.393

这里的conn是什么？

```
 Statement stmt = conn.createStatement(); 
```

在方法中

```
public void dbQuery(String query) 
```

如果您希望类的多个方法访问它，则需要将 conn 声明为实例变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T11:07:41.227

你有：

```
public void dbConnect(String db_connect_string, String username, String password) 
```

和电话：

```
db.dbConnect(connection, username, password); 
```

您应该将其更改为：

```
public void dbConnect(Connection conn, String username, String password) {
   ...
   conn = DriverManager.getConnection(db_connect_string, username, password);
   ...
} 
```

和用法：

```
db.dbConnect(conn, username, password); 
```

您还应该将方法的签名更改为：

```
public void dbQuery(String query, Connection conn); 
```

以及用于：

```
db.dbQuery(query, conn); 
```

# javascript - 遍历数组时多边形谷歌地图中的多个孔

> ID：10617131
> 
> 赞同：0
> 
> 时间：2012-05-16T10:59:22.007
> 
> 标签：javascript, google-maps-api-3, coffeescript

我有以下代码：

```
while p < points.length
  locs = points[p]
  latLng = [] 
  i = 0
  len = locs.length

  while i < len
    point = locs[i]
    latLng.push new google.maps.LatLng(point[0], point[1])
    i++
  marker = new google.maps.Polygon(
   paths: latLng
   fillColor: "#000000",
   fillOpacity: 0
   map: @gMap
  )
  markers.push(marker)
  p++ 
```

它遍历一个绘制许多单独多边形的数组。它真的很好用。然而，当我尝试引入一个“容器多边形”时，许多多边形会在其中打洞，我很难过。我理解这里的演示......

```
PropertySearch.tintPolygon = new google.maps.Polygon({
     paths: [ everythingElse, circleOverlay ],
    strokeColor: "#000000",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#000000",
    fillOpacity: 0.5
}); 
```

我知道你可以有两条路。但是，我遍历了我的多边形构建器，所以我得到的是一张非常黑的地图，因为它一直在重绘他的容器。

我想要的是一个 0.5 不透明度的容器，其中有孔，这些孔是被迭代的较小多边形。 ***编辑 1：*** 如果我只使用一种形状，我可以为这些多种形状获得所需的效果。我想我需要将所有路径移动到他们自己的变量中，然后将它们放入地图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:30:24.800

我看不到您是如何在代码片段中构建多边形的。

但是，对于带有孔的多边形，每个单独的路径都需要是定义多边形的数组中的一个条目。对于具有四个孔的多边形，您需要在一个多边形内定义五个路径。

为了让孔在支持 Canvas 图形的浏览器中正确显示，有必要考虑缠绕方向：每个孔都应定义为与包含它的多边形相反的方向。也就是说，对于由顺时针方向前进的点定义的包含多边形，它包含的每个孔都需要逆时针定义。

# mysql - 为什么信号关键字在 mySQL 5.1.48 中不起作用？

> ID：10617136
> 
> 赞同：9
> 
> 时间：2012-05-16T10:59:54.147
> 
> 标签：mysql, mysql-5.1

我正在使用 mysql v5.1.48 和红色[http://dev.mysql.com/doc/refman/5.5/en/signal.html](http://dev.mysql.com/doc/refman/5.5/en/signal.html)。但是代码

```
DELIMITER $$
CREATE PROCEDURE `CoreRaiseError`()
BEGIN
  SIGNAL SQLSTATE '45000'
      SET MESSAGE_TEXT = 'An error occurred', MYSQL_ERRNO = 1001;
END$$ 
```

提出一个

> SQL 错误 1064：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“SQLSTATE '45000' 附近使用的正确语法”

SIGNAL 从哪个版本开始成为关键字？如何使用以前版本的 mysql 引发异常？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T11:07:08.953

如MySQL 5.1 版[手册中所述：](http://dev.mysql.com/doc/refman/5.1/en/condition-handling.html)

> 其他与条件相关的语句是`SIGNAL`、`RESIGNAL`和`GET DIAGNOSTICS`。`SIGNAL`直到 MySQL 5.5 才支持and`RESIGNAL`语句。`GET DIAGNOSTICS`MySQL 5.6 之前不支持该语句。

要在旧版本的 MySQL 中引发错误，只需故意发出错误的命令。我经常`CALL`一个不存在的程序，例如：

```
CALL raise_error; 
```

# iphone - 如何比较图像字符串（名称？）并更改图像

> ID：10617139
> 
> 赞同：0
> 
> 时间：2012-05-16T11:00:04.057
> 
> 标签：iphone, objective-c, ios, xcode, uiimage

在IOS（iPhone）中 - 我想向用户展示一个图像，他应该写一个文本字符串（如图像名称或其他东西），如果他写了正确的字符串，图像会更改为不同的图像，如果他犯了错误并且输入错误的字符串，没有任何反应

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:03:49.557

将用户输入的字符串放入

```
NSString *imageName = userTxtField.text;

UIImage *image = [UIImage imageNamed:imageName];

if(image != nil){

  // change previous image

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:06:31.090

可能是您正在尝试构建像“品牌”这样的应用程序

一旦用户输入并按下提交按钮，将图像名与用户字符串进行比较

```
if([textField.text isEqualToString:IMGNAME]) {
    imageview.image = nextimage;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:08:59.320

您应该使用[UIImage](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)类的[ImageNamed](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageNamed%3a)函数。如果返回值为 nil，则图像不存在。例如：

```
-(UIImage*)getImageNamed:(NSString*)name{
    UIImage* Image = [UIImage imageNamed:name];
    if (!Image)
       NSLog(@"Sorry, there is no image named %@.",name");
    return (Image);
} 
```

# php - 将 RSS 提要加载到 php 中

> ID：10617142
> 
> 赞同：3
> 
> 时间：2012-05-16T11:00:33.833
> 
> 标签：php, rss

将 RSS 提要加载到 PHP 提要中的最佳方法是什么？

我还想处理`media:content`显示图像的问题。目前我有以下代码，但我不知道这是否是最好的。

```
<?php
    $rss = new DOMDocument();
    $rss->load('http://www.hln.be/rss.xml');
    $feed = array();
    foreach ($rss->getElementsByTagName('item') as $node) {
        $item = array ( 
            'title' => $node->getElementsByTagName('title')->item(0)->nodeValue,
            'desc' => $node->getElementsByTagName('description')->item(0)->nodeValue,
            'link' => $node->getElementsByTagName('link')->item(0)->nodeValue,
            'date' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue,
            'media' => $node->getElementsByTagName('media:content url')->item(0)->nodeValue,

            );
        array_push($feed, $item);
    }
    $limit = 20;
    for($x=0;$x<$limit;$x++) {
        $title = str_replace(' & ', ' &amp; ', $feed[$x]['title']);
        $link = $feed[$x]['link'];
        $description = $feed[$x]['desc'];
        $date = date('l F d, Y', strtotime($feed[$x]['date']));
        $image = $feed[$x]['media'];

        echo '<p><strong><a href="'.$link.'" title="'.$title.'">'.$title.'</a></strong><br />';
        echo '<small><em>Posted on '.$date.'</em></small></p>';
        echo '<p>'.$description.'</p>';
        echo '<img src="' . $image . '"/>';

    }
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T11:32:31.060

检查这个：

```
<?php

$feed = simplexml_load_file('http://www.hln.be/rss.xml');

foreach ($feed->channel->item as $item) {
  $title       = (string) $item->title;
  $description = (string) $item->description;

  print '<div>';

  printf(
    '<h2>%s</h2><p>%s</p>', 
    $title, 
    $description
  );

  if ($media = $item->children('media', TRUE)) {
    if ($media->content->thumbnail) {
      $attributes = $media->content->thumbnail->attributes();
      $imgsrc     = (string)$attributes['url'];

      printf('<div><img src="%s" alt="" /></div>', $imgsrc);
    }
  }

  echo '</div>';
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:08:31.103

你可以试试这个：

```
<?php

$feed = simplexml_load_file('http://www.hln.be/rss.xml');

print_r($feed);

?> 
```

这为您提供了可以直接使用的对象/数组结构，而不是与数据之上的附加层（即 DOM）进行通信。

# php - PHP 中的下拉列表和从 MySQL 调用

> ID：10617152
> 
> 赞同：-1
> 
> 时间：2012-05-16T11:01:22.100
> 
> 标签：php, mysql, selection

我找到了一个关于如何从数据库中获取数据以选择在 PHP 中保存到数据库中的值的模型，但是它不起作用，有人可以就以下代码提供建议吗？

```
 <?php      
             $tempoSEL = array("","","","","","","","","","");
if($row['tempo'] == "1"){
$tempoSEL[1] = " selected='selected' ";
}else if($row['tempo'] == "2"){
$tempoSEL[2] = " selected='selected' ";
}else if($row['tempo'] == "3"){
$tempoSEL[3] = " selected='selected' ";
}else if($row['tempo'] == "4"){
$tempoSEL[4] = " selected='selected' ";
}else if($row['tempo'] == "5"){
$tempoSEL[5] = " selected='selected' ";
}else if($row['tempo'] == "6"){
$tempoSEL[6] = " selected='selected' ";
}else if($row['tempo'] == "7"){
$tempoSEL[7] = " selected='selected' ";
}else if($row['tempo'] == "8"){
$tempoSEL[8] = " selected='selected' ";
}else if($row['tempo'] == "9"){
$tempoSEL[9] = " selected='selected' ";
}
$db = PageDB::getInstance();

?>
              <p>
                <label style="padding-right:28px;">Tempo</label>
                <select name="tempo">
                  <option value="1" <?php echo $tempo[1]; ?>>2 Sec</option>
                  <option value="2" <?php echo $tempo[2]; ?>>5 Sec</option>
                  <option value="3" <?php echo $tempo[3]; ?> selected>10 Sec</option>
                  <option value="4" <?php echo $tempo[4]; ?>>20 Sec</option>
                  <option value="5" <?php echo $tempo[5]; ?>>30 Sec</option>
                  <option value="6" <?php echo $tempo[6]; ?>>45 Sec</option>
                  <option value="7" <?php echo $tempo[7]; ?>>60 Sec</option>
                  <option value="8" <?php echo $tempo[8]; ?>>90 Sec</option>
                  <option value="9" <?php echo $tempo[9]; ?>>120 Sec</option>              
                </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:08:16.810

```
<?php 
$a=array("","2","5","10","20","30","45","60","90","120");     
$db = PageDB::getInstance();
            echo  '<p><label style="padding-right:28px;">Tempo</label>
                <select name="tempo">';
for($i=1;$i<10;$i++)
echo '<option value="'.$i.'" '.($row['tempo']==$i?'selected':'').'>'.$a[$i].'Sec</option>'
echo '</select>';
?> 
```

也许它可以帮助你 **更新：**

```
 <?php 
$a=array("","2","5","10","20","30","45","60","90","120");     
$d=3;
            echo  '<p><label style="padding-right:28px;">Tempo</label>
                <select name="tempo">';
for($i=1;$i<10;$i++)
{echo '<option value="'.$i.'" '.($d==$i?'selected':'').'>'.$a[$i].'Sec</option>';if($d==$i)$a[0]=$d;}
echo '</select>';
?> 
```

$a[0] 将存储默认值

# java - 兼容 LITE 版本和不兼容 PRO

> ID：10617153
> 
> 赞同：1
> 
> 时间：2012-05-16T11:01:22.977
> 
> 标签：java, android, android-manifest, google-play, android-market-filtering

我发布了我的应用程序的 2 个版本：一些用户确实看到 LITE 版本而没有看到 PRO 版本。两个版本都是相同的，除了：

专业版还有这两个功能

```
uses-permission:'android.permission.RECEIVE_BOOT_COMPLETED'
uses-permission:'com.android.vending.CHECK_LICENSE' 
```

这是使用 aapt 工具的结果：

**精简版：**

```
package: name='it.android.smartscreenonlite' versionCode='3' versionName='1.2'
sdkVersion:'3'
targetSdkVersion:'15'
uses-permission:'android.permission.WAKE_LOCK'
uses-permission:'android.permission.VIBRATE'
uses-permission:'android.permission.USES_POLICY_FORCE_LOCK'
uses-permission:'android.permission.DISABLE_KEYGUARD'
uses-feature:'android.hardware.sensor.proximity'
application-label:'Smart Screen ON LITE'
application-label-fr:'Smart Screen ON LITE'
application-label-es:'Encendido Inteligente LITE'
application-label-it:'Accendi Schermo Intelligente LITE'
application-icon-120:'res/drawable-hdpi/smartscreenon.png'
application-icon-160:'res/drawable-hdpi/smartscreenon.png'
application-icon-240:'res/drawable-hdpi/smartscreenon.png'
application-icon-320:'res/drawable-hdpi/smartscreenon.png'
application: label='Smart Screen ON LITE' icon='res/drawable-hdpi/smartscreenon.png'
launchable-activity: name='it.android.smartscreenonlite.ActivityImpostazioni'  l
abel='Smart Screen ON LITE' icon='res/drawable-hdpi/smartscreenon.png'
uses-feature:'android.hardware.touchscreen'
uses-feature:'android.hardware.screen.portrait'
main
other-activities
other-receivers
other-services
supports-screens: 'small' 'normal' 'large' 'xlarge'
supports-any-density: 'true'
locales: '--_--' 'fr' 'es' 'it'
densities: '120' '160' '240' '320' 
```

**专业版：**

```
package: name='it.android.smartscreenon' versionCode='3' versionName='1.2'
sdkVersion:'3'
targetSdkVersion:'15'
uses-permission:'com.android.vending.CHECK_LICENSE'
uses-permission:'android.permission.WAKE_LOCK'
uses-permission:'android.permission.VIBRATE'
uses-permission:'android.permission.RECEIVE_BOOT_COMPLETED'
uses-permission:'android.permission.USES_POLICY_FORCE_LOCK'
uses-permission:'android.permission.DISABLE_KEYGUARD'
uses-feature:'android.hardware.sensor.proximity'
application-label:'Smart Screen ON'
application-label-fr:'Smart Screen ON'
application-label-es:'Encendido Inteligente'
application-label-it:'Accendi Schermo Intelligente'
application-icon-120:'res/drawable-hdpi/smartscreenon.png'
application-icon-160:'res/drawable-hdpi/smartscreenon.png'
application-icon-240:'res/drawable-hdpi/smartscreenon.png'
application-icon-320:'res/drawable-hdpi/smartscreenon.png'
application: label='Smart Screen ON' icon='res/drawable-hdpi/smartscreenon.png'
launchable-activity: name='it.android.smartscreenon.LicenseCheck'  label='Smart
Screen ON' icon=''
uses-feature:'android.hardware.touchscreen'
uses-feature:'android.hardware.screen.portrait'
main
other-activities
other-receivers
other-services
supports-screens: 'small' 'normal' 'large' 'xlarge'
supports-any-density: 'true'
locales: '--_--' 'fr' 'es' 'it'
densities: '120' '160' '240' '320' 
```

这些用户已经在使用其他使用相同权限（许可证和启动权限）的应用程序。有什么问题？

# jquery - jquery验证插件是否验证字母/字符

> ID：10617163
> 
> 赞同：0
> 
> 时间：2012-05-16T11:01:40.143
> 
> 标签：jquery

有没有办法通过 jquery validateaton 插件来验证字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:04:51.870

包括这个文件

```
<script src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/additional-methods.js"></script> 
```

这是一个例子：

```
$("form").validate({
  rules: {
    myField: { lettersonly: true }
  }
}); 
```

值得注意的是，每个附加方法都是独立的，您可以包含特定的方法，只需将其放在您的 .validate() 调用之前：

```
jQuery.validator.addMethod("lettersonly", function(value, element) {
  return this.optional(element) || /^[a-z]+$/i.test(value);
}, "Letters only please"); 
```

> 更新

**空格问题的字母问题已解决**

你只要把这个`/^[a-z]+$/i`正则表达式改成这个`/^[a-zA-Z\\ \\.\\]+$/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:06:56.237

你可以做类似的事情

```
jQuery.validator.addMethod("accept", function(value, element, param) {
  return value.match(new RegExp("." + param + "$"));
}); 
```

示例：满

```
 $(function ()
    {
        $.validator.addMethod("loginRegex", function(value, element) {
            return this.optional(element) || /^[a-z0-9\-]+$/i.test(value);
        }, "Username must contain only letters, numbers, or dashes.");

        $("#signupForm").validate({
            rules: {
                "login": {
                    required: true,
                    loginRegex: true,
                }
            },
            messages: {
                "login": {
                    required: "You must enter a login name",
                    loginRegex: "Login format not valid"
                }
            }
        });
    }); 
```

# knockout.js - 需要敲除js两种方式绑定示例

> ID：10617166
> 
> 赞同：1
> 
> 时间：2012-05-16T11:01:59.613
> 
> 标签：knockout.js

淘汰赛很棒....同时我对陷阱感到有点沮丧....：|

这是我的代码

```
 <html>
    <head>

    @using MvcJqGrid;
    @using System.IO;
    @using System.Web.Mvc;
    @using System.Web.Script.Serialization;
    @{
        Layout = "";

        JavaScriptSerializer theSerializer = new JavaScriptSerializer();

        }

    <link rel="Stylesheet" type="text/css" href="Content/themes/base/jquery-ui.css" />
    <link rel="Stylesheet" type="text/css" href="Content/themes/base/jquery.ui.base.css" />
    <link rel="Stylesheet" type="text/css" href="Content/themes/base/jquery.ui.theme.css" />
    <link rel="Stylesheet" type="text/css" href="Content/ui.jqgrid.css" />

    <script type="text/javascript" src="Scripts/modernizr.custom.05850.js"></script>

    <script type="text/javascript" src="Scripts/jquery-1.7.2.js" > </script>

    <script type="text/javascript" src="Scripts/jquery-ui-1.8.19.js"> </script>

    <script  type="text/javascript"  src="Scripts/grid.locale-en.js" ></script>

    <script   type="text/javascript" src="Scripts/jquery.jqGrid.min.js"></script>

    <script type="text/javascript" src="Scripts/json2.min.js"></script>

    <script type="text/javascript" src="Scripts/knockout-2.1.0.js"></script>

    <script type="text/javascript" src="Scripts/knockout.mapping-latest.js"></script>

    <script type="text/javascript" src="Scripts/linq.min.js"></script>

    </head>

    <body>

    <!-- This is a *view* - HTML markup that defines the appearance of your UI -->

    <p>View Name: <input data-bind="value: Name " /></p>
    <p>No Of Results: <input data-bind="value: noOfResultsPerPage "/></p>

    <p id='filterEnable'>

     click me to invoke ajax service
    </p>

    <input type=text value="tester" id="testInput" />

<input type=text  value='test' data-bind='value:myComputedFilterExpression' id="linqTester" />

    <p id='myLabel' >
       container 

    </p>

    <p id='addFilterExpression' >add Filter</p>
    <table data-bind='visible: filterArray().length > 0'>
            <thead>
                <tr>
                    <th>filterExpression</th>
                    <th />
                    <th />
                </tr>
            </thead>
            <tbody data-bind='foreach: filterArray'>
                <tr>
                    <td data-bind"text :theExpression,value :theExpression"> 

                      Where  <select class='required' data-bind="options: $root.options, optionsCaption: 'Select...'" />    

                          <input type='text' id='uifix' style='display:none' />    

                                    <select class='required' data-bind="options: $root.filterExpressionValues, optionsCaption: 'Select...'" />

                          <input type='text' id='inputValue' />    
                            <select class='required' data-bind='options: $root.queryOptions,  optionsCaption: "Select..."' />

                    </td>

                    <td><a href='#' data-bind='click: $root.removeFilter'>Delete</a></td>
                    <td><a href='#' data-bind='click: $root.addFilter'>Add</a></td>

                </tr>
            </tbody>
        </table>

     <script type="text/javascript"> 
    $(function () {
        var viewModel = null;

         var  myOptions=@Html.Raw(PseudoSharepointView.getAllVariables()); 

        function FilterExpression()
        {    

         this.theExpression="";

        }

        function Success(data, status) {
            $("#myLabel").html(data.d);
        }

        function Error(request, status, error) {
            $("#myLabel").html(request.statusText);
        }

        $('#filterEnable').click(function () { 
            CallService();
        }); 

        var test=@Html.Raw(PseudoSharepointView.getAView());
        // Activates knockout.js 
        viewModel = ko.mapping.fromJS(test);
         viewModel.options=myOptions;
         viewModel.queryOptions=["and","or"];
         viewModel.filterExpressionValues=@Html.Raw(theSerializer.Serialize(PseudoSharepointView.SharepointColumn.FilterExpressionValues));
         var test=ko.mapping.toJS(viewModel);

         $("#testInput").val(JSON.stringify(test));

         viewModel.filterArray=ko.observableArray([new FilterExpression()]);

          viewModel.myComputedFilterExpression = ko.computed(function() {
            return Enumerable.From((viewModel.filterArray())).Select('$.theExpression').Aggregate("(a,b)=>a+''+b");
        });

        // Operations
        viewModel.addFilter = function() { 

        viewModel.filterArray.push(new FilterExpression());

        };
        viewModel.removeFilter = function(filter) {

        viewModel.filterArray.remove(filter) ;

        };

        ko.applyBindings(viewModel);

         $('#addFilterExpression').click(function () { 

         testArray= new Array();

         testArray[0]= new FilterExpression();
         testArray[0].theExpression="1";

         testArray[1]= new FilterExpression();
         testArray[1].theExpression="2";

          var test=Enumerable.From((viewModel.filterArray())).Select('$.theExpression').Aggregate("(a,b)=>a+''+b");

             $('#linqTester').val(test);
        }); 

        function CallService() {

            $.ajax({

                type: "POST",
                url: "myMethodsRepository.asmx/HelloWorld",
                data: "{viewValue:'"+JSON.stringify(ko.mapping.toJS(viewModel))+"'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: Success,
                error: Error
            });
        }

    });

    </script> 

    </body>
    </html> 
```

我的问题如下

1）是否有必须做的事情，以使两种方式绑定工作......因为ui更新确实会发生，但实际值不会自行更新......显然我在这里错过了一些东西

2）我的计算函数

```
viewModel.myComputedFilterExpression = ko.computed(function() {
        return Enumerable.From((viewModel.filterArray())).Select('$.theExpression').Aggregate("(a,b)=>a+''+b");
    }); 
```

似乎不起作用，因为变量没有更新自身

我使用了这个调试工具

```
<input type=text  value='test' data-bind='value:myFilterExpression'  id="linqTester" /> 
```

希望你知道所需的字符串表达式 wud 是从数组构造的

我需要对两种绑定到可观察数组的方式进行基本/noob 友好的解释....如果有人愿意用我当前的代码展示它，上帝保佑他们...:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T15:55:29.903

问题是这`myComputedFilterExpression`是一个只读计算函数，它返回一个可枚举的表达式。您希望通过值绑定更新什么？

要进行计算的可观察读写，您需要像这样定义它。[此处](http://knockoutjs.com/documentation/computedObservables.html)的文档中也涵盖了可写计算的 observables。

```
this.fullName = ko.computed({
    read: function () {
        return this.firstName() + " " + this.lastName(); 
    },
    write: function (value) {
        var lastSpacePos = value.lastIndexOf(" ");
        if (lastSpacePos > 0) { // Ignore values with no space character
            this.firstName(value.substring(0, lastSpacePos)); // Update "firstName"
            this.lastName(value.substring(lastSpacePos + 1)); // Update "lastName"
        }
    },
    owner: this
}); 
```

当值绑定更新计算值时，您会在定义写入函数中收到新值，并将其映射到某个底层值是您的工作。

希望这可以帮助

# iphone - 如何清除 UIWebView 中的 Cookie

> ID：10617168
> 
> 赞同：2
> 
> 时间：2012-05-16T11:02:08.450
> 
> 标签：iphone, ios, cookies, uiwebview

我正在使用 UIWebView 加载 URL。我想知道如何清除其中的 Cookie。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T11:10:48.887

您可以浏览 cookie 罐中的每个 cookie 并将它们删除。

[如何删除 UIWebView 的所有 cookie？](https://stackoverflow.com/questions/4471629/how-to-delete-all-cookies-of-uiwebview)

```
NSHTTPCookie *cookie;
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [storage cookies]) 
{
   [storage deleteCookie:cookie];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:09:56.547

```
NSHTTPCookie *cooki;
NSHTTPCookieStorage *data = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cooki in [data cookies]) {
   [data deleteCookie:cooki];
} 
```

# mysql - Mysql - 删除第二个条目

> ID：10617169
> 
> 赞同：0
> 
> 时间：2012-05-16T11:02:11.277
> 
> 标签：mysql

我们有一个 mysql 数据库表，其中包含一些需要删除的错误条目。account 表有以下字段：id、code、user_id

基本上，每个用户在每个帐户的帐户表中应该只有一条记录。但是，目前，每个用户在帐户表中有两条记录，其中代码等于 1000。

对于帐户表中的每条记录，我需要删除每个用户的代码 = 1000 的第二行。

下面的查询给出了代码 = 1000 的所有记录。它还包含对 account_detail 表的计数，以确认第二个错误条目不包含 account_detail 表中的任何子记录，并且已确认这是正确的。

```
SELECT a.*, COUNT(ad.id)
FROM account a
LEFT JOIN account_detail ad on a.id = ad.account_id
WHERE a.code = 1000
GROUP by a.id
ORDER BY a.user_id, a.id 
```

所以，现在我基本上需要一个查询，它将删除帐户表中每个 user_id 的第二个错误条目，其中代码 = 1000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:04:52.480

```
DELETE greater
FROM   account AS lower JOIN account AS greater
    ON lower.code    = greater.code
   AND lower.user_id = greater.user_id
   AND lower.id      < greater.id
WHERE  lower.code    = 1000 
```

# xml - 搜索：搜索 API 未返回正确的输出

> ID：10617171
> 
> 赞同：0
> 
> 时间：2012-05-16T11:02:21.813
> 
> 标签：xml, xquery, marklogic

我有以下包含三个专利转让标签的 xml 文档

```
<patent-assignments>
    <patent-assignment>
     <patent-assignors>
        <patent-assignor>
          <name>TSAI, YU-WEN</name>
        </patent-assignor>
      </patent-assignors>
      <patent-assignees>
        <patent-assignee>
          <name>FARADAY TECHNOLOGY CORP.</name>
        </patent-assignee>
      </patent-assignees>
    </patent-assignment>

    <patent-assignment>
     <patent-assignors>
        <patent-assignor>
          <name>APPLE</name>
        </patent-assignor>
      </patent-assignors>
      <patent-assignees>
        <patent-assignee>
          <name>GOOGLE INC</name>
        </patent-assignee>
      </patent-assignees>
    </patent-assignment>

    <patent-assignment>
     <patent-assignors>
        <patent-assignor>
          <name>GOOGLE INC</name>
        </patent-assignor>
      </patent-assignors>
      <patent-assignees>
        <patent-assignee>
          <name>FARADAY TECHNOLOGY CORP.</name>
        </patent-assignee>
      </patent-assignees>
    </patent-assignment>
</patent-assignments> 
```

现在，当我运行以下搜索查询时：-

```
 import module namespace search="http://marklogic.com/appservices/search" at 
"/Marklogic/appservices/search/search.xqy";

declare variable $options:=
    <options xmlns="http://marklogic.com/appservices/search">
    <transform-results apply="raw"/>
    </options>;

search:search("apple", $options, 1, 1)/search:result 
```

我得到了完整的文档作为输出，但匹配的单词“APPLE”仅在 xml 的第二个专利转让标签中。我只想获得第二项专利转让作为输出而不是完整文档。如果我使用片段，那么它会显示找到匹配项的文档和元素名称，但它没有返回实际输出。我想要那个特定的专利转让标签作为找到匹配词的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:17:23.527

Puneet，search:search 函数正在做它被配置做的事情，从这个意义上说，响应是正确的。你只需要对你要求它做的事情做一个小的改变。试试这个：

```
import module namespace search="http://marklogic.com/appservices/search" at 
  "/Marklogic/appservices/search/search.xqy";

declare variable $options:=
  <options xmlns="http://marklogic.com/appservices/search">
    <transform-results apply="raw"/>
    <searchable-expression>/patent-assignments/patent-assignment</searchable-expression>
  </options>;

search:search("apple", $options, 1, 1)/search:result 
```

添加 searchable-expression 元素后，我只支持与查询匹配的专利转让元素：

```
<search:result index="1" uri="/patent.xml" path="fn:doc(&quot;/patent.xml&quot;)/patent-assignments/patent-assignment[2]" score="43008" confidence="0.664889" fitness="0.664889" xmlns="" xmlns:search="http://marklogic.com/appservices/search">
  <patent-assignment>
    <patent-assignors>
      <patent-assignor>
        <name>APPLE</name>
      </patent-assignor>
    </patent-assignors>
    <patent-assignees>
      <patent-assignee>
        <name>GOOGLE INC</name>
      </patent-assignee>
    </patent-assignees>
  </patent-assignment>
</search:result> 
```

# email - .NET - 邮件服务器不通过 SmtpClient.Send 发送邮件

> ID：10617175
> 
> 赞同：0
> 
> 时间：2012-05-16T11:02:41.433
> 
> 标签：email, smtpclient

我编写了一个控制台应用程序（只是站点代码的一部分，但它也必须分开工作，并且它具有与站点内部相同的错误结果）（C#）：

```
MailMessage message = new MailMessage("login@ourDomenInPunycode", "toMail")
{
    Subject = "Hello",
    Body = "Hello world"
};

SmtpClient client = new SmtpClient();
client.Host = "ourIP";
client.Credentials = new System.Net.NetworkCredential("login@ourDomenInPunycode", "ourPassword");
client.Port = 25;
client.UseDefaultCredentials = false;
client.DeliveryMethod = SmtpDeliveryMethod.Network;
client.Send(message); 
```

那么，发送电子邮件是不是应该是小事一桩？但是无论我通过我们的邮件服务器从本地机器发送邮件（只是运行这个控制台应用程序），都会出现以下异常：

System.Net.Mail.SmtpFailedRecipientException：邮箱不可用。服务器响应为：5.7.1 Relaying to denied (authentication required)

如果我将“login@ourDomenInPunycode”数据更改为我自己的邮箱（在 gmail 或其他地方 - 无论如何），一切正常。它也不依赖于“toMail”地址。

那么，我们的邮件服务器有什么问题呢？有什么特殊设置吗？我们使用在另一个 Windows Server 2008 中虚拟化的 Windows Server 2008 和 Kerio Connect 7 作为虚拟 Windows Server 2008 上的邮件服务器。所有其他邮件程序（如 Outlook）都适用于从我们的邮件服务器发送电子邮件。

我在 Internet 上阅读的所有关于 SmtpClient 设置的文章都只有这些（以上）琐碎的设置和代码，没什么特别的。

**更新**

我在上面的文字中做了一些修复。

当我尝试通过从邮件服务器虚拟 PC 启动的控制台应用程序发送邮件时，这是我们邮件服务器的一部分日志（与上面的“ourIP”相关的“mail.ourDomen.local”）：

```
Task 215 handler BEGIN
Task 215 handler starting
SMTP server session begin; client connected from mail.ourDomen.local:49399
Sent SMTP greeting to mail.ourDomen.local:49399
Command EHLO OurMailServer
Sent reply to EHLO: 250 mail.ourDomenInPunycode ...
Command MAIL FROM:<login@ourDomenInPunycode>
Sent reply to MAIL: 250 2.1.0 Sender <login@ourDomenInPunycode> ok
Command RCPT TO:<toMail>
Sent reply to RCPT: 550 5.7.1 Relaying to <toMail> denied
Connection to SMTP server mail.ourDomen.local lost: connection closed by remote host.
SMTP server session end
Task 215 handler END 
```

“向 RCPT 发送回复：550 5.7.1 Relaying to denied” - 为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:02:11.167

好吧，我们用这个描述

[https://kb.kerio.com/article/550-571-relaying-to-email%40addresscom-denied-authentication-required-411.html](https://kb.kerio.com/article/550-571-relaying-to-email%40addresscom-denied-authentication-required-411.html)。

虽然我们知道这个设置，但**我们纠结于我们的虚拟机**。我们有一个用于 Web 服务器的虚拟机和另一个用于邮件服务器的虚拟机。仅在 Kerio Connect 中为邮件服务器虚拟机配置了权限，而不为 Web 服务器配置了权限。我们刚刚为web服务器的虚拟机添加了权限，邮件发送正常。

和“ourIP”中的

```
SmtpClient client = new SmtpClient();
client.Host = "ourIP"; 
```

是我们的邮件服务器虚拟机的IP。SmtpClient 对象中没有设置Web 服务器虚拟机的IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:05:12.510

正如建议的那样，您的邮件服务器需要配置为允许通过端口 25 进行“中继”。这是您正在寻找的“中继”设置/配置。

“中继”背后的想法/目的是阻止您的服务器被（ab）用于发送垃圾邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:08:30.763

在不设置 client.Host 和 client.DeliveryMethod 属性的情况下尝试代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-21T05:55:48.413

```
 //used this referances

    using System.Net.Mail;
    using System.Net;
    using System.IO;
    try
    {
    string em_from = "your seding e mail";
    string em_to = Ricever e mail Address;
    SmtpClient Smtp_Server = new SmtpClient();
    MailMessage e_mailx = new MailMessage();
    Smtp_Server.UseDefaultCredentials = false;
    Smtp_Server.Credentials = new System.Net.NetworkCredential("sender email address", "sender passsword"); 

    Smtp_Server.Port = 25; //your mail server port
    Smtp_Server.EnableSsl = false;
    Smtp_Server.Host = "192.XXX.XX.XX"; //your mail server IP

    e_mailx = new MailMessage();
    e_mailx.From = new MailAddress(em_from);
    e_mailx.To.Add(em_to);
    e_mailx.Bcc.Add("BCC Address");//you cad add both BCC and CC addresss
    e_mailx.IsBodyHtml = false;
    e_mailx.Subject = esub;
    e_mailx.Body = ebody;
    e_mailx.Attachments.Add(new Attachment(emsg));  //emsg mean attach file name with location
    Smtp_Server.Send(e_mailx);
    return 1;
    }
    catch (Exception ex)
    {
    MessageBox.Show(ex.Message);
    return 0;               
    } 
```

# php - 为什么我不能从这样的一些网站下载文件？

> ID：10617178
> 
> 赞同：0
> 
> 时间：2012-05-16T11:02:48.467
> 
> 标签：php

这是我的php源代码：

```
<?php
    $path = '/images/one.jpg';
    $imm = 'http://www.allamoda.eu/wp-content/uploads/2012/05/calzedonia_290x435.jpg';
    if( $content = file_get_contents($imm) ){   
    file_put_contents($path, $content);   
    echo "Yes";
    }else{
    echo "No";
    }
?> 
```

我得到这个错误：

```
Warning: file_get_contents(http://www.allamoda.eu/wp-content/uploads/2012/05/calzedonia_290x435.jpg) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.1 403 Forbidden in /opt/lampp/htdocs/test/down.php on line 4
No 
```

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:23:21.100

服务器需要一些标头（尤其是**Accept**和**User-Agent**）。使用`stream_context`- 参数`file_get_contents()`来提供它们：

```
<?php
$path = '/images/one.jpg';
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"Accept-language: en\r\n" .
              "Accept:image/png,image/*;q=0.8,*/*;q=0.5 \r\n".
              "Host: www.allamoda.eu\r\n" .
              "User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0\r\n"
  )
);

    $context = stream_context_create($opts);
    $imm = 'http://www.allamoda.eu/wp-content/uploads/2012/05/calzedonia_290x435.jpg';
    if( $content = file_get_contents($imm,false,$context) ){   

    file_put_contents($path, $content);   
    echo "Yes";

    }else{
    echo "No";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:05:29.993

你不能下载这个文件，服务器[allamoda.eu](http://allamoda.eu)说 (HTTP 403)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:06:53.740

代码没有错。服务器根本不让你（要么你有太多的请求，要么它只是阻止所有脚本抓取它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:09:59.547

您不能直接打开文件。但是您可以尝试使用套接字来获取它的内容：

```
function getRemoteFile($url)
{
   // get the host name and url path
   $parsedUrl = parse_url($url);
   $host = $parsedUrl['host'];
   if (isset($parsedUrl['path'])) {
      $path = $parsedUrl['path'];
   } else {
      // the url is pointing to the host like http://www.mysite.com
      $path = '/';
   }

   if (isset($parsedUrl['query'])) {
      $path .= '?' . $parsedUrl['query'];
   } 

   if (isset($parsedUrl['port'])) {
      $port = $parsedUrl['port'];
   } else {
      // most sites use port 80
      $port = '80';
   }

   $timeout = 10;
   $response = '';
   // connect to the remote server 
   $fp = @fsockopen($host, '80', $errno, $errstr, $timeout );

   if( !$fp ) { 
      echo "Cannot retrieve $url";
   } else {
      // send the necessary headers to get the file 
      fputs($fp, "GET $path HTTP/1.0\r\n" .
                 "Host: $host\r\n" .
                 "User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.3) Gecko/20060426 Firefox/1.5.0.3\r\n" .
                 "Accept: */*\r\n" .
                 "Accept-Language: en-us,en;q=0.5\r\n" .
                 "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n" .
                 "Keep-Alive: 300\r\n" .
                 "Connection: keep-alive\r\n" .
                 "Referer: http://$host\r\n\r\n");

      // retrieve the response from the remote server 
      while ( $line = fread( $fp, 4096 ) ) { 
         $response .= $line;
      }

      fclose( $fp );

      // strip the headers
      $pos      = strpos($response, "\r\n\r\n");
      $response = substr($response, $pos + 4);
   }

   // return the file content 
   return $response;
} 
```

例子：

```
$content = getRemoteFile('http://www.allamoda.eu/wp-content/uploads/2012/05/calzedonia_290x435.jpg'); 
```

[资源](http://www.php-mysql-tutorial.com/wikis/php-tutorial/reading-a-remote-file-using-php.aspx)

# python - 在 LXML 中指定 XSLT 拆分转换的输出目录

> ID：10617182
> 
> 赞同：0
> 
> 时间：2012-05-16T11:03:06.210
> 
> 标签：python, xml, xslt, lxml

我正在使用 Python 的 LXML 库针对 XML 文档运行 XSLT。此转换使用`exsl:document`函数将我的 XML 拆分为更小的 XML 文档。这是我的命令的样子：

```
<exsl:document href="{//@LedgerNo}.xml" method="xml"> 
```

我的脚本`script.py`和转换`transform.xsl`在同一个目录中。运行转换时，XML 会成功拆分，但生成的文件会在当前工作目录中创建。有没有办法可以在 LXML 中指定输出目录？

谢谢

# macos - Textmate - 在目录中搜索数据

> ID：10617184
> 
> 赞同：1
> 
> 时间：2012-05-16T11:03:10.900
> 
> 标签：macos, osx-lion, textmate, textmatebundles

我可以在目录中搜索数据吗？搜索整个项目太痛苦了（在我的 Mac 上需要 5-15 分钟，这太糟糕了）。textmate 的版本是 1.5.10 (1631)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:02:47.547

目前，TextMate 不支持在特定文件夹中搜索。不过，随着当前[2.0 版的 alpha 版本](http://blog.macromates.com/2011/textmate-2-0-alpha/)添加了这种支持，这种情况很快就会改变。

因此，要在 TextMate 1.5 中的特定文件夹中搜索，您有 2 个选项：

1.  为您要搜索的文件夹创建一个新项目（您可以通过将所需文件夹拖放到新项目按钮上来快速完成此操作）
2.  通过转到`Bundles`> `Bundle Editor`>创建您自己的“在文件夹中查找”命令`Show Bundle Editor (⌃⌥⌘B)`。从这里，您可以单击`'+'`底部的按钮并创建一个新命令。有关如何在文件夹中创建查找命令的示例，[请参见此处。](http://snipplr.com/view/21360/)

# design-patterns - 开发一个可以在一个字段中保存各种类型（原始、列表、地图）的类

> ID：10617196
> 
> 赞同：0
> 
> 时间：2012-05-16T11:04:02.540
> 
> 标签：design-patterns, jpa, mapping

我想要一个包含 id、名称和值的 java 类（MyClass），其中值可以是原始类型（字符串、int、long）或列表或映射。该类将使用 JPA 2.0 持久化

我的第一个想法是关于具有以下结构的类：

```
 ,-----------.
 | MyClass   |
 |...........|
 | id        |
 | name      |
 | index     |
 | key       |
 | value     |
 '------------ 
```

如果存储了原始或列表或地图，则由 getter 和 setter 解析 - 取决于 {index, key, value} 组合。

另一种方法是继承层次结构：

```
                     .....................
                     | 抽象类 |
                 ,.- ......''--..__
            _,-'' | `--.._
         ,-' | ......
...................... | |地图值类 |
| 原始值类| | ......
...................... |
                    .....................
                    | 列表值类 |
                    .....................

```

请记住，我使用 JPA：对于这个问题是否有“标准方法”或“最佳实践”？以某种方式，我可以使用 myClass 并通过 getter 访问值并使用 instanceof Map/List/Integer 决定持有哪种值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:43:15.047

好吧，我找到了一个适合我的解决方案：基类和值持有派生类：

基类：

```
package jpa.inheritance_demo;

import java.util.List;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.OneToMany;

@Entity
public class Resource {

    @Id
    private long oid;

    @OneToMany
    @JoinColumn(name="OID")
    private List<Property> props;

} 
```

标量属性类：

```
package jpa.inheritance_demo;

import javax.persistence.Entity;

@Entity
public class ScalarProperty extends Property {
    private String value;

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }
} 
```

列表属性类：

```
package jpa.inheritance_demo;

import java.util.List;

import javax.persistence.ElementCollection;
import javax.persistence.Entity;

@Entity
public class ListProperty extends Property {

    @ElementCollection
    List<String> value;

    public List<String> getValues() {
        return value;
    }

} 
```

...并且不要忘记将类添加到您的 persistence.xml

# python - Pip 创建 build/ 目录

> ID：10617198
> 
> 赞同：15
> 
> 时间：2012-05-16T11:04:15.787
> 
> 标签：python, virtualenv, pip

我使用 virtualenv 为我的 Python 项目创建隔离环境。然后我使用 pip - Python 包管理器安装依赖项。有时我忘了做`source venv/bin/activate`，然后 pip`build/`在我的项目中创建目录。为什么 pip 创建它们？我可以删除它们吗？如果没有，我可以将它们放在我的`.hgignore`文件中吗？

据我了解，pip 将下载包的源存储在一个名为`pip-delete-this-directory.txt`. 但是当我删除它时，一切仍然有效，因为真正的代码正在被放入`venv/lib/python2.7/site-packages/`. 那么究竟是`build/`为了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-16T12:05:21.857

该`build`目录是一个包被解压和构建的地方。成功安装软件包后， pip 会从 中删除解压后的目录`build`，除非您已删除`pip-delete-this-directory.txt`. 如中所述`pip-delete-this-directory.txt`：

```
This file is placed here by pip to indicate the source was put
here by pip.

Once this package is successfully installed this source code will be
deleted (unless you remove this file). 
```

因此它对运行时环境不太重要。你可以放心地忽略它。

此外，您可以使用`pip install -b customized_build_directory`将另一个目录指定为`build`基本目录，例如`/tmp`

此外，`pip install --no-download package_name`如果之前的软件包安装失败，您可以在不下载软件包的情况下重建软件包。

# android - 在gridview android中显示来自sd卡的图像

> ID：10617202
> 
> 赞同：4
> 
> 时间：2012-05-16T11:04:29.640
> 
> 标签：android, gridview, orientation

我在 GridView 的 sd 卡上显示来自特定文件夹的图像，直到知道一切正常，所有图像都显示在 gridview 上，但是当我更改屏幕的方向时它崩溃。下面是我的代码和崩溃日志：

```
 import java.io.File;

import android.content.Context;
import android.net.Uri;
import android.os.Environment;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

        public class ImageAdapter extends BaseAdapter {
        private Context mContext;
        File root = new File(Environment.getExternalStorageDirectory()
                + File.separator + "MYPICS" + File.separator);
        private File[] fileName = root.listFiles();
        int count=fileName.length;
        public ImageAdapter(Context c) {
            mContext = c;
        }

        public int getCount() {
        return fileName.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {

            Uri uri = Uri.fromFile(fileName[position]);

        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageURI(uri);
        return imageView;
    }

} 
```

我收到内存输出错误，下面是我的 Logcat：

```
 05-16 16:18:31.218: E/AndroidRuntime(26907): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:573)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:439)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.graphics.drawable.Drawable.createFromStream(Drawable.java:657)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.widget.ImageView.resolveUri(ImageView.java:521)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.widget.ImageView.setImageURI(ImageView.java:305)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at com.sachin.imagegrideview.ImageAdapter.getView(ImageAdapter.java:53)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.widget.AbsListView.obtainView(AbsListView.java:1464)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.widget.GridView.onMeasure(GridView.java:935)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.view.View.measure(View.java:8313)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.view.View.measure(View.java:8313)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.view.View.measure(View.java:8313)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.view.View.measure(View.java:8313)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.view.ViewRoot.performTraversals(ViewRoot.java:845)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.os.Looper.loop(Looper.java:130)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at android.app.ActivityThread.main(ActivityThread.java:3687)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at java.lang.reflect.Method.invokeNative(Native Method)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at java.lang.reflect.Method.invoke(Method.java:507)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-16 16:18:31.218: E/AndroidRuntime(26907):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:14:21.143

将此添加到您的清单以进行列表视图活动

```
android:configChanges="orientation|keyboardHidden" 
```

如果这没有帮助，那么为您的图像文件添加这段代码以对位图进行采样

```
private Bitmap decodeFile(File f){
            FileOutputStream os = null;
            try {
                //Decode image size
                BitmapFactory.Options o = new BitmapFactory.Options();
                o.inJustDecodeBounds = true;

                FileInputStream fis = new FileInputStream(f);
                BitmapFactory.decodeStream(fis, null, o);
                fis.close();

                int scale = 1;
                if (o.outHeight > IMAGE_MAX_SIZE || o.outWidth > IMAGE_MAX_SIZE) {
                    scale = (int)Math.pow(2, (int) Math.round(Math.log(IMAGE_MAX_SIZE / (double) Math.max(o.outHeight, o.outWidth)) / Math.log(0.5)));
                }

                //Decode with inSampleSize
                BitmapFactory.Options o2 = new BitmapFactory.Options();
                o2.inSampleSize = scale;
                fis = new FileInputStream(f);
                try {

                b = BitmapFactory.decodeStream(fis, null, o2);

                } catch (OutOfMemoryError e) {
                    Log.d("hai","filename"+f);
                    System.gc();
                }
                fis.close();
            } catch (IOException e) {
            }
            return b;
        } 
```

加载很多图像会导致应用程序内存不足并强制关闭。我认为这是您的应用程序发生的情况。内存问题是 android 在开发应用程序时的一个复杂问题。这可以通过手动清除未使用的位图和通过使用垃圾收集器。

尝试使用 System.gc();

尝试使用回收位图

位图.recycle();

使所有未使用的位图为空。

释放所有未使用的内存。

这一切都会对你有很大帮助，也可以通过这个[链接](https://stackoverflow.com/questions/9022679/memory-and-activities-outofmemory)。使用内存分析器它会帮助你找出 Deallocated 内存>试试这个[链接](http://www.vogella.com/articles/EclipseMemoryAnalyser/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:10:23.240

**`<activity android:configChanges="keyboardHidden|orientation"></activity>`**

在您的 manifest.xml 中编辑您的活动标签并尝试

# css - css 表获取错误的属性

> ID：10617206
> 
> 赞同：0
> 
> 时间：2012-05-16T11:04:35.110
> 
> 标签：css

我已经建立了一个表格，它的行是这样的

```
<tr id="graphid+'" class="graphRow">
                <td colspan="2" style="width:5%; max-width:5%;">
                    <div class="stockData">
                        <div class="stockDatatable">
                            <table class="stocktable">
                                <tr><td id="stockDBnameid+'"></td></tr>
                                <tr><td class="Desctitle">תחום עיסוק:</td></tr>
                                <tr><td id="stockDBfieldid+'" class="stocktable"></td></tr>
                                <tr><td id="stockDBurlid+'" class="stocktable">כתובת אתר החברה</td></tr>
                                <tr><td class="Desctitle">ערך החברה:</td></tr>
                                <tr><td id="stockDBvalueid+'" class="stocktable">ערך החברה</td></tr>
                                <tr><td id="stockDBdescid+'" class="stocktable">תיאור המנייה</td></tr>
                            </table>
                        </div>
                    </div>
                </td>
                <td colspan="8">
                    <table>
                        <tr>
                            <td>
                                <div id="graphDivid+'" class="GraphDiv"></div>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr> 
```

如您所见，该行有两个列。我说的是第二个：它是从 div->div->table->rows 编译的。行从 the`class = "graphRow"`而不是从`class ="stockTable"`. css是这样的：

```
tr.graphRow td {background:lightgray;}
tr.stocktable td {background:blue;} 
```

为什么不工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:27:01.083

根据您的声明`tr.stocktable td{background:blue;}`，stocktable 仅适用于 tr。但是您已将 stocktable 用于`<table>`( `<table class="stocktable">`)。

声明 stocktable 像 -

`.stocktable{background:blue;}`

或者

`table.stocktable {background:blue;}`

# php - 工厂方法的覆盖：如何返回子类对象类型？

> ID：10617210
> 
> 赞同：1
> 
> 时间：2012-05-16T11:04:42.170
> 
> 标签：php, oop, inheritance, overriding, factory-pattern

假设我在 PHP 中有一个父类，如下所示：

```
class A {

    private $property;

    public static function factory($arg) {
        $object = new A();
        $object->property = $arg;
        return $object;
    }

} 
```

我想以这种方式扩展它：

```
class B extends A {

    public static function factory() {
        return parent::factory('constant');
    }

} 
```

当我这样做时，`B::factory()`我得到一个类型的对象`A`。如果我想要一个类型的对象`B`怎么办？**我无法更改 class 代码中的任何内容`A`**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:07:21.247

### 第一个版本

那是因为您`A`在工厂方法中对类进行了硬编码。
在课堂`A`上，而不是`$object = new A()`尝试（需要 PHP 5.3）：

```
$class_name = get_called_class();
$object = new $class_name; 
```

[`get_called_class()`](http://php.net/get_called_class)“获取调用静态方法的类的名称。”

较短的版本：

```
$object = new static(); 
```

### 第二版（硬编码父类）：

手动复制对象属性：

```
$parent = parent::factory($args);
$obj = new static();
$obj->setTimestamp($parent->getTimestamp());
$obj->setTimezone($parent->getTimezone());
return $obj; 
```

或使用 hack 自动执行此操作：

> [如何在 PHP 中转换对象](https://stackoverflow.com/questions/2226103/how-to-cast-objects-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:51:55.927

在您的示例中：

1.  你有两个班级（至少）
2.  两个类都可以实例化（具体的，不是纯粹的或抽象的）
3.  一个类是另一个类的超类
4.  两个类都用“工厂”方法实例化
5.  子类的“工厂”方法可以调用超类的“工厂”方法
6.  每个“工厂”方法可以有多种类型或数量的参数

**问题**

现在，这就是它引起我注意的地方：

```
class B extends A {

    public static function factory() {
        return parent::factory('constant');
    }

} 
```

**简短快速的回答：**

将其更改为：

```
class B extends A {

    public static function factory() {
        return A::factory('constant');
    }

} 
```

**无聊的潮人扩展答案：**

您正在尝试覆盖（并使用不同的参数重载）静态函数。

这是一个常见的错误，假设静态方法是虚拟的，并且可以被覆盖。一些编程语言允许（Object Pascal，Delphi），其他不允许（C＃，Java），我认为PHP取决于版本。

老实说，“静态函数”的工作方式类似于具有命名空间的全局函数，它们可以公共访问类的所有成员，而不是方法。我建议始终将它们视为全局函数。

干杯。

# c - 如何为 gcc 编写自己的代码生成器后端？

> ID：10617215
> 
> 赞同：40
> 
> 时间：2012-05-16T11:05:08.157
> 
> 标签：c, gcc, compiler-construction

我创建了自己的（非常简单的）字节码语言，以及一个执行它的虚拟机。它工作正常，但现在我想使用 gcc（或任何其他免费可用的编译器）从普通的 c 程序生成这台机器的字节码。那么问题来了，我该如何修改或扩展 gcc 以便它可以输出我自己的字节码呢？请注意，我不想将我的字节码编译为机器码，我想将 c 代码“编译”为（我自己的）字节码。

我意识到这是一个潜在的大问题，最好的答案可能是“去看看 gcc 源代码”。我只需要一些关于如何开始的帮助。我认为必须有一些关于这个主题的文章或书籍可以描述将自定义生成器添加到 gcc 的过程，但我没有通过谷歌搜索找到任何东西。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-06-19T14:46:30.870

我正忙着将 gcc 移植到我们之前设计的 8 位处理器上。我对我们的机器来说是一项艰巨的任务，因为它是 8 位的，我们只有一个累加器，但如果你有更多的资源，它就会变得容易。这就是我们尝试使用 gcc 4.9 和 cygwin 管理它的方式：

1.  下载 gcc 4.9 源码
2.  将您的架构名称添加到`config.sub`第 250 行附近查找`# Decode aliases for certain CPU-COMPANY combinations.`在该列表中添加`| my_processor \`
3.  在同一个文件中查找`# Recognize the basic CPU types with company name.`将自己添加到列表中：`| my_processor-* \`
4.  搜索文件`gcc/config.gcc`，在文件中查找 case ${target} 它在第 880 行左右，按以下方式添加自己：

    ```
     ;;
    my_processor*-*-*)
      c_target_objs="my_processor-c.o"
      cxx_target_objs="my_processor-c.o"
      target_has_targetm_common=no
      tmake_file="${tmake_file} my_processor/t-my_processor"
      ;; 
    ```

5.  创建文件夹`gcc-4.9.0\gcc\config\my_processor`
6.  从现有项目中复制文件并对其进行编辑，或者从头开始创建自己的项目。在我们的项目中，我们从 msp430 项目中复制了所有文件并对其进行了全部编辑
7.  您应该有以下文件（并非所有文件都是强制性的）：
    *   `my_processor.c`
    *   `my_processor.h`
    *   `my_processor.md`
    *   `my_processor.opt`
    *   `my_processor-c.c`
    *   `my_processor.def`
    *   `my_processor-protos.h`
    *   `constraints.md`
    *   `predicates.md`
    *   `README.txt`
    *   `t-my_processor`
8.  创建路径`gcc-4.9.0/build/object`
9.  跑`../../configure --target=my_processor --prefix=path for my compiler --enable-languages="c"`
10.  制作
11.  进行安装
12.  做大量的研究和调试。
13.  玩得开心。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-17T12:40:06.943

**这是一项艰苦的工作。**

例如，我还使用自己的字节码设计了自己的“架构”，并希望使用 GCC 为其生成 C/C++ 代码。这就是我的制作方式：

1.  首先，您应该阅读GCC[手册中有关移植的所有内容。](http://gcc.gnu.org/onlinedocs/gcc/)
2.  也不要忘记阅读[GCC Internals](http://gcc.gnu.org/onlinedocs/gccint/)。
3.  阅读有关编译器的许多内容。
4.  另请查看此[问题](https://stackoverflow.com/questions/6245481/porting-gcc-to-new-architectures)和此处的答案。
5.  谷歌了解更多信息。
6.  问问自己，你是否真的准备好了。
7.  一定要有一台非常好的咖啡机……你会需要它。
8.  开始将机器依赖文件添加到 gcc。
9.  以跨主机-目标方式编译 gcc。
10.  检查十六进制编辑器中的代码结果。
11.  做更多的测试。
12.  现在享受您自己的架构的乐趣：D

完成后，您只能在没有 os-dependet 库的情况下使用 c 或 c++（您的架构上目前没有运行的操作系统），您现在应该（如果需要）使用交叉编译器编译许多其他库以获得良好的框架.

PS：[LLVM](http://llvm.org/)（[Clang](http://clang.llvm.org/)）更容易移植......也许你想从那里开始？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T05:23:14.867

这并不像所有这些那么难。如果您的目标机器与另一台机器相当相似，请将其 RTL (?) 定义作为起点并修改它们，然后`make compile test`通过引导阶段；冲洗并重复，直到它起作用。您可能不必编写任何实际代码，只需编写机器定义模板。

# uiviewcontroller - Cocos2d 效果显着减慢 FPS 以及如何正确初始化 EAGLView

> ID：10617219
> 
> 赞同：0
> 
> 时间：2012-05-16T11:05:17.527
> 
> 标签：uiviewcontroller, cocos2d-iphone, effects, eaglview

**EDIT2：为了响应下面的答案，我确实创建了一个不同的 GameScene 来测试由 CCShaky3D 效果动画的 4 个精灵的帧率性能。这个问题仍然存在，因为 fps 仍然在 ~15fps 左右。为了方便阅读，我把代码贴在这个问题的最后。我的假设是因为我同时运行多个 CCShaky3D。是否有人能够同时运行多个 CCShaky3D 效果而不会降低帧率？**

**我在我的游戏中引入了来自 cocos2d 的效果（[cocos2d 编程指南](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:effects#effects)），并注意到 FPS 显着变慢。一旦我应用效果的精灵出现，从 60fps 到 ~10fps。**

我一开始在我的游戏中引入了它们并且遇到了黑色背景问题（如 post [so post](https://stackoverflow.com/questions/8191915/ccshaky3d-turns-the-background-black)）。我按照解决方案解决了问题。

我在调试器中注意到，一旦我应用动画的第四个精灵出现，应用程序就会收到内存警告。一旦我应用效果的第二个精灵变得可见，帧速率就会下降。在场景中，我同时在屏幕上还有其他 2-3 个敌人精灵加上玩家精灵，我想这可能是内存问题。然后我尝试只添加一个带有动画的精灵，剩下的 2-3 个敌人精灵仍然存在，并且帧速率“仅”下降到 ~45 fps。

**编辑：当我不对这些精灵应用效果时，帧速率不会改变（保持~60fps）。**

我想这是由于我如何管理我的记忆，但在大幅更改代码之前，我想就此收集一些意见。您是否设法使用例如运行场景。2-3 个具有效果的精灵和 4-5 个其他精灵（例如敌人和玩家）四处移动？

**正确初始化 EAGLView：**

为了让效果运行，我必须修改**EAGLView**初始化，我将其发布在这里，因为我认为可能会受到影响。我对 UIViewController 和 EAGLView 初始化非常不熟悉，我想知道我是否做错了什么以及这是否会影响帧速率。

[我修改了Learn iPhone and iPad cocos2d 第 8 章源代码](http://www.apress.com/downloadable/download/sample/sample_id/640/)中的 ShootEmUp 示例，并注意到**示例的 AppDelegate 中没有 RootViewController**实例。相反，在[Coco2d Cookbook](http://cocos2dcookbook.com/)中，在 AppDelegate 以及我使用 Cocos2d 创建的任何模板中都使用了 RootViewController。在我的代码中，我修改了 CC_DIRECTOR_INIT() 宏，按照帖子[2](https://stackoverflow.com/questions/8191915/ccshaky3d-turns-the-background-black)中的建议添加了 EAGLView 的初始化。

我找到了这个[cocos2d 官方指南](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:autorotation)，它说不需要在 cocos2d 应用程序中创建 UIViewController，这证实了 ShootEmUp 示例（[3](http://www.apress.com/downloadable/download/sample/sample_id/640/)）中的方法。由于我仍然不熟悉 CCDirector、EAGLView 和 UIViewController 的角色，我想请社区澄清它们如何相互交互，以及它们的初始化是否会影响帧速率。非常感谢。

**编辑 2 - 我用于测试 CCShaky3D 效果对 fps 性能速率的影响的源代码：**

```
// Element.h
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface Element : CCSprite {

}
+(id) elementWithTypeAndSpawnTimeAndFrameNameAndSpawnPos:(enum ElementsType)type:  (int)time  :(NSString*)frameName :(CGPoint) spawnPosition;
@end

//Implementation of elementWithTypeAndSpawnTimeAndFrameNameAndSpawnPos method.. 
+(id) elementWithTypeAndSpawnTimeAndFrameNameAndSpawnPos:(enum ElementsType)type:  (int)time  :(NSString*)frameName :(CGPoint) spawnPosition;
{
    return [[[self alloc] initWithTypeAndSpawnTimeAndFrameNameAndSpawnPos:type :time :frameName :spawnPosition] autorelease];
}

//TestLayer.h
#import <Foundation/Foundation.h>
#import "cocos2d.h"
@interface TestLayer : CCLayer {

}
+(CCScene *) scene;
@end

//TestLayer.m

#import "TestLayer.h"
#import "Element.h"

@implementation TestLayer

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    TestLayer *layer = [TestLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

/ on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {
        CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache];
        [frameCache addSpriteFramesWithFile:@"game-art-hd.plist"];

        // ask director the the window size
        CGSize size = [[CCDirector sharedDirector] winSize];

        CCSprite *background = [CCSprite spriteWithFile:@"bg1.png"];
        background.anchorPoint = CGPointMake(0.5f, 0);
        background.position = CGPointMake(size.width/2, 0);
        [self addChild:background];

        Element * element = [Element elementWithTypeAndSpawnTimeAndFrameNameAndSpawnPos:HEARTH :3 :@"star-anim1.png" :CGPointMake(100.0f, 20.0f)];
        element.visible=TRUE;
        id shaky = [CCShaky3D actionWithRange:4 shakeZ:NO grid:ccg(15,10) duration:5];
        [element runAction:shaky ];
        [self addChild:element ];

        element = [Element elementWithTypeAndSpawnTimeAndFrameNameAndSpawnPos:HEARTH :3 :@"star-anim1.png" :CGPointMake(140.0f, 20.0f)];
        id shaky2 = [CCShaky3D actionWithRange:4 shakeZ:NO grid:ccg(15,10) duration:5];

        element.visible=TRUE;
        [element runAction:shaky2 ];
        [self addChild:element ];

        element = [Element elementWithTypeAndSpawnTimeAndFrameNameAndSpawnPos:HEARTH :3 :@"star-anim1.png" :CGPointMake(240.0f, 20.0f)];
        element.visible=TRUE;
        id shaky3 = [CCShaky3D actionWithRange:4 shakeZ:NO grid:ccg(15,10) duration:5];

        [element runAction:shaky3 ];
        [self addChild:element ];

        element = [Element elementWithTypeAndSpawnTimeAndFrameNameAndSpawnPos:HEARTH :3 :@"star-anim1.png" :CGPointMake(340.0f, 20.0f)];
        element.visible=TRUE;
        id shaky4 = [CCShaky3D actionWithRange:4 shakeZ:NO grid:ccg(15,10) duration:5];

        [element runAction:shaky4 ];
        [self addChild:element ];

    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:12:28.810

在真实设备上运行时，您获得了多少 FPS？您应该知道，与真实设备相比，模拟器在很多方面表现不佳。我目前在打斗场景中运行一个包含 16 个以上动画精灵的应用程序，在设备上以非常不错的帧速率......但在模拟器上低于 10 FPS。是的，请注意那个内存警告。您可能有没有在某处正确释放的精灵。为了确认这一点，您应该在代码中的适当位置添加此行：

```
 [[CCSpriteFrameCache sharedSpriteFrameCache] removeUnusedSpriteFrames];
    [[CCDirector sharedDirector] purgeCachedData];
    [[CCTextureCache sharedTextureCache] dumpCachedTextureInfo]; 
```

并验证纹理缓存中的内容是否符合您的预期。如果没有，请追踪“惊喜”纹理并确保它们被正确移除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:20:14.763

我不确定是不是同样的问题，但是在运行 CCShaky3D 动作之后，我的帧速率从 60-50fps 下降到 30-20fps。

我刚刚设法用 CCShaky3D 和 CCStopGrid 创建了一个动作序列来解决它。最后一个负责恢复帧率。

# android - KSOAP 空指针异常

> ID：10617228
> 
> 赞同：1
> 
> 时间：2012-05-16T11:05:40.620
> 
> 标签：android, ksoap2

> **可能重复：**
> [无法在 android 中序列化 KSOAP 中的问题](https://stackoverflow.com/questions/10664051/cannot-serialize-issue-in-ksoap-in-android)

在我的应用程序中，我使用的是 SOAP 服务，因为我的 SOAP 请求结构是

```
<authentication>
        <LoginID>string</LoginID>
        <Password>string</Password>
      </authentication>
      <ID>int</ID>
      <ID>int</ID>
      <dojStr>string</dojStr>
      <Data>
        <Keys>
          <POfStringString>
            <V>string</V>
            <K>string</K>
          </POfStringString>
          <POfStringString>
            <V>string</V>
            <K>string</K>
          </POfStringString>
        </Keys>
        <CriteriaKeys>
          <POfStringString>
            <V>string</V>
            <K>string</K>
          </POfStringString>
          <POfStringString>
            <V>string</V>
            <K>string</K>
          </POfStringString>
        </CriteriaKeys>
        <No>int</No>
        <Size>int</Size>
      </Data>    
  </soap:Body>
</soap:Envelope> 
```

我的代码如下：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);           
            SoapObject authentication = new SoapObject(NAMESPACE,"authentication"); 
            SoapObject pagination = new SoapObject(NAMESPACE,"pagination"); 

                 authentication.addProperty(usrid); 
                 authentication.addProperty(pass);  

            request.addSoapObject(authentication); 

                request.addProperty(Id);   
                request.addProperty(Id);  
                request.addProperty(dte);

                PropertyInfo page =new PropertyInfo();    
                page.setName("V");  
//          page.setName("K");   
            page.setValue("10");
            page.setType(String.class);
            pagination.addProperty(page);

                request.addSoapObject(pagination);

                request.addProperty(no);
                request.addProperty(size);    

              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.setOutputSoapObject(request);
//          envelope.addMapping(NAMESPACE, "authentication", new Array().getClass());
            envelope.dotNet=true;           
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);    
            try
            {         
                androidHttpTransport.call(SOAP_ACTION,envelope);               
//              SoapPrimitive response = (SoapPrimitive)envelope.getResponse();            
                Object result=(Object)envelope.getResponse(); ----->Getting error here. 
```

我得到的错误是：

```
 java.lang.NullPointerException
at java.io.Writer.write(Writer.java:152)
at org.kxml2.io.KXmlSerializer.startTag(KXmlSerializer.java:407)
at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:660)
at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:645)
at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:642)
at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:702)
at org.ksoap2.serialization.SoapSerializationEnvelope.writeBody(SoapSerializationEnvelope.java:618)

at org.ksoap2.SoapEnvelope.write(SoapEnvelope.java:198)
    at org.ksoap2.transport.Transport.createRequestData(Transport.java:111)
    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:119)
    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
    at com.redbus.SearchRoute.onCreate(SearchRoute.java:151)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
    at android.app.ActivityThread.access$2200(ActivityThread.java:119)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4363)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    at dalvik.system.NativeStart.main(Native Method) 
```

无论我是正确设置输入还是我做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:21:50.580

使用 SoapPrimitive 结果 = (SoapPrimitive)envelope.getResponse(); 和 result.toString()

这将起作用。如果这不起作用，请在此处回复，我会给您另一种方法

# ms-access - MS ACCESS - 编辑和撤消 SQL 导致错误

> ID：10617229
> 
> 赞同：2
> 
> 时间：2012-05-16T11:05:42.880
> 
> 标签：ms-access

我有一个保存在 Access 数据库中的查询（相当于 ORACLE、SQL Server 中的视图）。现在我需要在我的选择列表中添加另一列。但是每当我更改 SQL 时，我都会遇到错误。假设我删除了一个逗号，然后将其放回原处。我收到诸如“From 之后的语法错误”、“加入操作中的语法错误”之类的错误。因此，如果我更改任何内容然后撤消更改，我仍然会收到错误。我怎样才能避免这种情况？

编辑：编辑前

```
SELECT A_B.ALICI, Q.QAINOM, M.TIP, Q.QATARIX, Q.CEMIBORC, R2.ADI AS SAT_NOV, M.TAMADI, M.MARK, SA.MIQDAR, SA.SAQIYM, SA.CEMI, SA.FAIZ, A_B.BORC_SU, A_B.MEBLEG, A_B.FERQ, K_G.CEMI_ODEN, A_B.MOBTEL, SA.NOTE
FROM ([SELECT  Round(Sum([DBKASSA].[MEBLEQ]),3) AS CEMI_ODEN, DBKASSA.KODAL_GT
FROM DBKASSA
WHERE (((DBKASSA.TIP)=1) AND ((DBKASSA.KODAL_GT)=[INBUYERID]) AND ((DBKASSA.TARIX)=[INTILLDATE]))
GROUP BY DBKASSA.KODAL_GT]. AS K_G RIGHT JOIN ([SELECT AL.KODALAN,AL.MOBTEL, IIf([Su_CEMIBORC] Is Null,0,[Su_CEMIBORC]) AS BORC_SU, IIf([Su_MEBLEQ] Is Null,0,[Su_MEBLEQ]) AS MEBLEG, (IIf([Su_MEBLEQ] Is Null,0,[Su_MEBLEQ]))-(IIf([Su_CEMIBORC] Is Null,0,[Su_CEMIBORC])) AS FERQ, AL!OBYEKT & (IIf(AL!NUMAY Is Not Null," - " & AL!NUMAY)) AS ALICI
FROM 
 (
   SELECT DBKASSA.KODAL_GT, Sum(DBKASSA.MEBLEQ) AS Su_MEBLEQ
   FROM DBKASSA
   WHERE (((DBKASSA.TIP)=1) AND ((DBKASSA.KODAL_GT)=[INBUYERID]))
   GROUP BY DBKASSA.KODAL_GT
   ) AS OD_AL 
    RIGHT JOIN (
    (
    SELECT DBQAIME.KODALAN, Sum(DBQAIME.CEMIBORC) AS Su_CEMIBORC
    FROM DBQAIME
    WHERE (((DBQAIME.KODALAN)=[INBUYERID]))
    GROUP BY DBQAIME.KODALAN
    ) AS B_AL 
    RIGHT JOIN DBALAN AS AL ON B_AL.KODALAN = AL.KODALAN) ON OD_AL.KODAL_GT = AL.KODALAN
    WHERE (((AL.KODALAN)=[INBUYERID]))
 ]. AS A_B INNER JOIN DBQAIME AS Q ON A_B.KODALAN = Q.KODALAN) ON K_G.KODAL_GT = A_B.KODALAN) INNER JOIN (DBMAL AS M INNER JOIN (DBSA AS SA INNER JOIN [SELECT R2.KOD, R2.VID, R2.ADI
   FROM DBRAB2 AS R2
   WHERE (((R2.VID)=3))]. AS R2 ON SA.KODEMLNO = R2.KOD) ON M.KODMAL = SA.KODMAL) ON Q.QAINOM = SA.QAINOM
WHERE (((Q.QAINOM)=[INSALEINVOICE]))
ORDER BY M.TIP, M.TAMADI; 
```

编辑后；

```
SELECT A_B.ALICI, Q.QAINOM, M.TIP, Q.QATARIX, Q.CEMIBORC, R2.ADI AS SAT_NOV, M.TAMADI, M.MARK, SA.MIQDAR, SA.SAQIYM, SA.CEMI, SA.FAIZ, A_B.BORC_SU, A_B.MEBLEG, A_B.FERQ, K_G.CEMI_ODEN, A_B.MOBTEL, SA.NOTE
FROM ([SELECT  Round(Sum([DBKASSA].[MEBLEQ]),3) AS CEMI_ODEN, DBKASSA.KODAL_GT
FROM DBKASSA
WHERE (((DBKASSA.TIP)=1) AND ((DBKASSA.KODAL_GT)=[INBUYERID]) AND ((DBKASSA.TARIX)=[INTILLDATE]))
GROUP BY DBKASSA.KODAL_GT]. AS K_G RIGHT JOIN ([SELECT AL.KODALAN,AL.MOBTEL, IIf([Su_CEMIBORC] Is Null,0,[Su_CEMIBORC]) AS BORC_SU, IIf([Su_MEBLEQ] Is Null,0,[Su_MEBLEQ]) AS MEBLEG, (IIf([Su_MEBLEQ] Is Null,0,[Su_MEBLEQ]))-(IIf([Su_CEMIBORC] Is Null,0,[Su_CEMIBORC])) AS FERQ, AL!OBYEKT & (IIf(AL!NUMAY Is Not Null," - " & AL!NUMAY)) AS ALICI
FROM 
 (
   SELECT DBKASSA.KODAL_GT, Sum(DBKASSA.MEBLEQ) AS Su_MEBLEQ
   FROM DBKASSA
   WHERE (((DBKASSA.TIP)=1) AND ((DBKASSA.KODAL_GT)=[INBUYERID]))
   GROUP BY DBKASSA.KODAL_GT
   ) AS OD_AL 
    RIGHT JOIN (
    (
    SELECT DBQAIME.KODALAN, Sum(DBQAIME.CEMIBORC) AS Su_CEMIBORC
    FROM DBQAIME
    WHERE (((DBQAIME.KODALAN)=[INBUYERID]))
    GROUP BY DBQAIME.KODALAN
    ) AS B_AL 
    RIGHT JOIN DBALAN AS AL ON B_AL.KODALAN = AL.KODALAN) ON OD_AL.KODAL_GT = AL.KODALAN
    WHERE (((AL.KODALAN)=[INBUYERID]))
 ]. AS A_B INNER JOIN DBQAIME AS Q ON A_B.KODALAN = Q.KODALAN) ON K_G.KODAL_GT = A_B.KODALAN) INNER JOIN (DBMAL AS M INNER JOIN (DBSA AS SA INNER JOIN [SELECT R2.KOD, R2.VID, R2.ADI
   FROM DBRAB2 AS R2
   WHERE (((R2.VID)=3))]. AS R2 ON SA.KODEMLNO = R2.KOD) ON M.KODMAL = SA.KODMAL) ON Q.QAINOM = SA.QAINOM
WHERE (((Q.QAINOM)=[INSALEINVOICE]))
ORDER BY M.TIP, M.TAMADI; 
```

顺便说一句，它在 MS Access 2010 中工作。我的是 Access 2003

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:43:14.380

发生的事情是您的子查询或派生表现在像这样被括起来

```
[stuff here]. 
```

这会在编辑时导致错误。

最简单的方法是使用记事本之类的，替换[]。与 () 并粘贴回来。

尝试：

```
SELECT A_B.ALICI,
       Q.QAINOM,
       M.TIP,
       Q.QATARIX,
       Q.CEMIBORC,
       R2.ADI AS SAT_NOV,
       M.TAMADI,
       M.MARK,
       SA.MIQDAR,
       SA.SAQIYM,
       SA.CEMI,
       SA.FAIZ,
       A_B.BORC_SU,
       A_B.MEBLEG,
       A_B.FERQ,
       K_G.CEMI_ODEN,
       A_B.MOBTEL,
       SA.NOTE
FROM   ((SELECT Round(SUM([DBKASSA].[MEBLEQ]), 3) AS CEMI_ODEN,
               DBKASSA.KODAL_GT
        FROM   DBKASSA
        WHERE  ( ( ( DBKASSA.TIP ) = 1 )
                 AND ( ( DBKASSA.KODAL_GT ) = [INBUYERID] )
                 AND ( ( DBKASSA.TARIX ) = [INTILLDATE] ) )
        GROUP  BY DBKASSA.KODAL_GT) AS K_G
        RIGHT JOIN ((SELECT AL.KODALAN,
                           AL.MOBTEL,
                           Iif([Su_CEMIBORC] IS NULL, 0, [Su_CEMIBORC])
                                                                AS
                            BORC_SU,
                           Iif([Su_MEBLEQ] IS NULL, 0, [Su_MEBLEQ])
                                                                AS
                            MEBLEG,
                           ( Iif([Su_MEBLEQ] IS NULL, 0, [Su_MEBLEQ]) ) - (
                           Iif([Su_CEMIBORC] IS NULL, 0, [Su_CEMIBORC]) )
                                                                AS
                                                                           FERQ,
                           AL ! OBYEKT & ( Iif(AL ! NUMAY IS NOT NULL,
                                           " - " & AL ! NUMAY) ) AS
                                               ALICI
                    FROM   (SELECT DBKASSA.KODAL_GT,
                                   SUM(DBKASSA.MEBLEQ) AS Su_MEBLEQ
                            FROM   DBKASSA
                            WHERE
                    ( ( ( DBKASSA.TIP ) = 1 )
                      AND ( ( DBKASSA.KODAL_GT ) = [INBUYERID] ) )
                            GROUP  BY DBKASSA.KODAL_GT) AS OD_AL
                           RIGHT JOIN ( (SELECT DBQAIME.KODALAN,
                                              SUM(DBQAIME.CEMIBORC) AS
                                                Su_CEMIBORC
                                       FROM   DBQAIME
                                       WHERE  ((
                                      ( DBQAIME.KODALAN ) = [INBUYERID] ))
                                       GROUP  BY DBQAIME.KODALAN) AS B_AL
                                        RIGHT JOIN DBALAN AS AL
                                          ON B_AL.KODALAN = AL.KODALAN)
                             ON OD_AL.KODAL_GT = AL.KODALAN
                    WHERE  (( ( AL.KODALAN ) = [INBUYERID] ))) AS A_B
                    INNER JOIN DBQAIME AS Q
                      ON A_B.KODALAN = Q.KODALAN)
          ON K_G.KODAL_GT = A_B.KODALAN)
       INNER JOIN (DBMAL AS M
                   INNER JOIN (DBSA AS SA
                               INNER JOIN (SELECT R2.KOD,
                                                  R2.VID,
                                                  R2.ADI
                                           FROM   DBRAB2 AS R2
                                           WHERE  (( ( R2.VID ) = 3 ))) AS R2
                                 ON SA.KODEMLNO = R2.KOD)
                     ON M.KODMAL = SA.KODMAL)
         ON Q.QAINOM = SA.QAINOM
WHERE  (( ( Q.QAINOM ) = [INSALEINVOICE] ))
ORDER  BY M.TIP,
          M.TAMADI; 
```

# php - 如何使用 PHP 创建多阵列

> ID：10617230
> 
> 赞同：-3
> 
> 时间：2012-05-16T11:05:43.087
> 
> 标签：php

我有：

```
$title1 = "aaa1";
$body1 = "bbb1";
$author1 = "ccc1";

$title2 = "aaa2";
$body2 = "bbb2";
$author2 = "ccc2";

$title3 = "aaa3";
$body3 = "bbb3";
$author3 = "ccc3"; 
```

如何将这些变量分配给数组？接下来我想做：

```
foreach($array as $a){
   $a[title] . $a['body']. $a['author'] . "<br />";
} 
```

这应该告诉我：

```
aaa1bbb1ccc1
aaa2bbb2ccc2
aaa3bbb3ccc3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:06:59.137

```
$array[] = array("title" => "aaa1", "body" => "bbbb1");
$array[] = array("title" => "aaa2", "body" => "bbbb2"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:07:53.447

很简单，只需在数组中创建一个数组。

```
<?php
$array = array(
        array('title' => 'aaa1', 'body' => 'bbb1', 'author' => 'ccc1'),
        array('title' => 'aaa2', 'body' => 'bbb2', 'author' => 'ccc2'),
        array('title' => 'aaa3', 'body' => 'bbb3', 'author' => 'ccc3'),
    ); 
```

只需阅读有关数组的 PHP 文档：http: [//php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:09:48.017

基本上

> 可以使用 array() 语言结构创建数组。它采用任意数量的逗号分隔键 => 值对作为参数。

```
array(
key  => value,
key2 => value2,
key3 => value3,
... 
```

)

例子：

```
<?php
$array = array(
    "foo" => "bar",
    "bar" => "foo",
);

// as of PHP 5.4
$array = [
    "foo" => "bar",
    "bar" => "foo",
];
?> 
```

更多信息[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:10:32.080

```
$array = array(    
     0 => array('title' => 'aaa1', 'body => 'bbb1','author' => 'ccc1'),    
     1 => array('title' => 'aaa2', 'body => 'bbb2','author' => 'ccc2'),    
     2 => array('title' => 'aaa3', 'body => 'bbb3','author' => 'ccc3')
); 
```

或使用[list](http://php.net/manual/en/function.list.php "列表（）")创建数组

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T11:19:59.707

你会这样做：

```
<?php
$array = array(
        array('title' => 'aaa1', 'body' => 'bbb1', 'author' => 'ccc1'),
        array('title' => 'aaa2', 'body' => 'bbb2', 'author' => 'ccc2'),
        array('title' => 'aaa3', 'body' => 'bbb3', 'author' => 'ccc3'),
    );
?> 
```

然后你会像这样打印你想要的方式：

```
<?php
foreach($array as $item) {
    print($item['title'].$item['body'].$item['author']."<br>");
}
?> 
```

# jquery - 使用 jQuery 获取类

> ID：10617236
> 
> 赞同：1
> 
> 时间：2012-05-16T11:06:19.453
> 
> 标签：jquery

我可以通过以下方式获取 id、src、style 或其他内容：

```
$(document).click(function (e) {
       console.log('id :' + e.target.id);
}); 
```

但是我想上课，为什么不可能呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:07:25.670

```
$(document).click(function (e) {
       console.log('class :' + e.target.className);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:09:29.090

你有几个选择

称呼：

```
.attr('class'); 
```

称呼：

```
target.className 
```

第二个将返回所有类，所以如果是的话，`main content`它会给你字符串，它更容易使用

```
.hasClass("class-name") 
```

例如。

```
target.hasClass(".hidden") 
```

如果元素是否具有类，则返回 true 或 false。最有用和最可靠的。只需检查它是否有您选择的课程！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T11:10:29.843

如果您使用 jQuery 进行点击事件，为什么不使用它来获取类属性

```
 $(document).click(function () {
       console.log('class :' + $(this).attr("class"));
 }); 
```

# vim - Vim 语法高亮：重叠正则表达式

> ID：10617237
> 
> 赞同：2
> 
> 时间：2012-05-16T11:06:27.497
> 
> 标签：vim, syntax-highlighting, vim-syntax-highlighting

我尝试为 javascript 添加一些语法突出显示到 vim，但我一直遇到一个问题：当字符已经突出显示时，它们似乎被所有其他正则表达式完全忽略。

例如，我尝试为函数的参数列表添加语法高亮。在创建正确的 rexex 时，我禁用了 function 关键字的语法突出显示，这样更容易看到我的 regex 做了什么。我最终得到了以下（工作）正则表达式：

```
syn match javaScriptArguments "[(=\:\s,]function.\{-}(\zs.\{-}\ze)" 
```

但是，一旦我再次启用 function 关键字的突出显示，该行就不再起作用了。似乎 vim 只是简单地排除了已经突出显示的所有内容，因此它不会为上面的正则表达式找到任何匹配项，即使它不会导致字符被突出显示两次。

我该如何解决/解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T13:01:15.843

语法定义必须`contained`使它们在其他语法项中匹配。找到所有令人毛骨悚然的细节`:help syn-contains`。

在您的情况下，您依赖于“函数”关键字 via 的前瞻`\zs`。以我的经验，这必然会导致问题，但一旦你使用`contained`. 一般来说，很难在不修改原始脚本的情况下扩展现有的语法定义（我想这是您打算做的）。看看`:help :syn-containedin`和`:help :syn-nextgroup`。

# sql - 带有 INNER JOIN 的两个表的 SQL INSERT 语句

> ID：10617239
> 
> 赞同：4
> 
> 时间：2012-05-16T11:06:39.670
> 
> 标签：sql, insert, inner-join, mysql

我有两张桌子`hello`，`login_table`下面是它们的结构

```
user_info
-------
some_id | name | address

login_table
-------
id | username | password 
```

`some_id`并且`id`是自增索引。

现在我如何在 in 中使用`INSERT`语句`INNER JOIN``SQL`

目前，我想在下面添加相同的数据`some_id`和`id`

```
`name` = John
`address` = wall street
`username` = john123
`password` = passw123 
```

下面的代码显示，到目前为止我已经尝试过。

```
insert into login_table lt
INNER JOIN user_info ui ON ui.some_id = lt.id
(ui.name, ui.address, lt.username, lt.password) 
values
('John', 'wall street', 'john123', 'passw123') 
```

这不是一个值，我想一次添加多个值.. 我怎样才能实现。

感谢帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T11:13:14.413

如果您需要`INSERT`原子地执行这两个操作，请使用事务：

```
START TRANSACTION;
INSERT INTO login_table (username, password) VALUES ('john123', 'passw123');
INSERT INTO user_info (name, address) VALUES ('John', 'wall street');
COMMIT; 
```

注意您的存储引擎必须支持事务才能工作（例如`InnoDB`）。

要一次将多个值插入表中，请使用 的多行形式`INSERT`。如[手册](http://dev.mysql.com/doc/en/insert.html)所述：

> [`INSERT`](http://dev.mysql.com/doc/en/insert.html)使用`VALUES`语法的语句可以插入多行。为此，请包含多个列值列表，每个列表都包含在括号中并用逗号分隔。例子：
> 
> ```
> INSERT INTO *tbl_name* (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9);
> ```
> 
> 每行的值列表必须用括号括起来。以下语句是非法的，因为列表中值的数量与列名的数量不匹配：
> 
> ```
> INSERT INTO *tbl_name* (a,b,c) VALUES(1,2,3,4,5,6,7,8,9);
> ```
> 
> `VALUE``VALUES`在这种情况下是同义词。两者都没有暗示任何关于值列表的数量，并且无论是单个值列表还是多个列表都可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:13:51.897

插入两个表是不可能的。您问题的第二部分是可能的：您可以在一个语句中插入多行，如下所示：

```
insert into some_table(col1, col2) values (1,2), (3,4), (5,6); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-16T12:40:26.237

```
USE [ERPDb]
GO

INSERT INTO [AAA].[UserRole] ([UserId], [RoleId])
    SELECT u.Id, (SELECT Id FROM [AAA].[Role] WHERE Title = 'Employee') FROM [AAA].[User] u
        INNER JOIN [dbo].[BaseDealer] bd ON u.Id = bd.Id
    WHERE bd.DealerType = 0
GO 
```

# javascript - javascript中的禁用按钮在IE中不起作用

> ID：10617240
> 
> 赞同：1
> 
> 时间：2012-05-16T11:06:41.990
> 
> 标签：javascript, jquery

当找不到某个对象的值时，我需要禁用按钮。此代码在 FF 中有效，并且按钮显示为灰色。然而，它在 IE 中不起作用。

这是我的代码：

```
if(c4Obj.getValueByName("Combined_Order",1)=="")  
    $("#StockPlates_btn").attr('disabled', true)
else 
    $("#StockPlates_btn").attr('disabled', false); 
```

感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:08:31.637

尝试

```
if(c4Obj.getValueByName("Combined_Order",1)=="")  
    $("#StockPlates_btn").attr('disabled', 'disabled')
else 
    $("#StockPlates_btn").removeAttr('disabled'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:10:05.967

```
 $("#StockPlates_btn").click(function(){
    $("#StockPlates_btn").preventDefault();
 }) 
```

试试这个。当您单击它时，这将阻止单击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:11:15.937

正如 Dave 提到的，它应该被禁用等于禁用 HTML 中禁用的选项。

IE 8 之前的版本不支持 disabled 属性。

参考： [http ://www.w3schools.com/tags/att_option_disabled.asp](http://www.w3schools.com/tags/att_option_disabled.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:12:29.150

可能是您使用的是 jQuery pre 1.6.1 版本，这就是为什么 attr for disabled 不能正常工作的原因（对于较旧的 IE）.. 通过 busing prop 您可以轻松完成任务
尝试这样

```
if(c4Obj.getValueByName("Combined_Order",1)=="")  
    $("#StockPlates_btn").prop('disabled', true)
else 
    $("#StockPlates_btn").prop('disabled', false); 
```

# android - Android：应用程序在短暂延迟后变得无响应

> ID：10617241
> 
> 赞同：1
> 
> 时间：2012-05-16T11:06:43.783
> 
> 标签：android

我注意到我的白板应用程序在几秒钟没有交互后变得“休眠”，所以当新绘制的东西时，会有可怕的延迟。这根本不需要离开应用程序——我运行它，它就在那里，我可以绘制和撤消。但是，如果我在 10 秒内不使用它，然后尝试画一个圆圈，那么在它更新之前可能需要等待一秒钟左右，并且我会从起点到当前位置得到一条直线。因此，当视图被触摸时，开始绘制的代码是即时的，但更新还没有发生很长时间。

该代码实际上是在自定义位图上绘制的 Fingerpaint 演示，我将此位图复制到视图中。我通过在绘图开始之前复制位图来撤消。我已禁用撤消代码以查看是否是问题所在，但延迟仍然存在，只是远没有那么明显。我注意到在 Fingerpaint API 演示中有时会出现同样的延迟。

有谁知道这是为什么？是否有一些我不知道的奇怪设置导致活动应用程序进入睡眠状态？

# java - 从 Uri 创建调整大小的位图的正确方法是什么？

> ID：10617242
> 
> 赞同：1
> 
> 时间：2012-05-16T11:06:52.653
> 
> 标签：java, android

我正在尝试从 Uri 创建一个调整大小的位图。
在网上搜索时，我看到了几个部分示例，只是感到困惑。
创建此任务的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:19:39.303

您应该阅读一篇非常好的资源文章：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

这里有一些代码，取自这篇文章：

```
public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId, int reqWidth, int reqHeight) {
   // First decode with inJustDecodeBounds=true to check dimensions
   final BitmapFactory.Options options = new BitmapFactory.Options();
   options.inJustDecodeBounds = true;
   BitmapFactory.decodeResource(res, resId, options);
   // Calculate inSampleSize
   options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);
   // Decode bitmap with inSampleSize set
   options.inJustDecodeBounds = false;
   return BitmapFactory.decodeResource(res, resId, options);
}

public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float) height / (float) reqHeight);
        } else {
            inSampleSize = Math.round((float) width / (float) reqWidth);
        }

        // This offers some additional logic in case the image has a strange
        // aspect ratio. For example, a panorama may have a much larger
        // width than height. In these cases the total pixels might still
        // end up being too large to fit comfortably in memory, so we should
        // be more aggressive with sample down the image (=larger
        // inSampleSize).

        final float totalPixels = width * height;

        // Anything more than 2x the requested pixels we'll sample down
        // further.
        final float totalReqPixelsCap = reqWidth * reqHeight * 2;

        while (totalPixels / (inSampleSize * inSampleSize) > totalReqPixelsCap) {
            inSampleSize++;
        }
    }
    return inSampleSize;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:14:18.520

矩阵矩阵 = 新矩阵（）；matrix.postScale(xScale, yScale); 位图 newBitmap = Bitmap.createBitmap(oldBitmap, 0, 0, orgWidth, orgHeight, matrix, true);

如果要减小大小，则 xScale 和 yScale 应为负数，否则为正数:)

# mongodb - 如何使用 PHP 连接和打印两个 MongoDB 集合

> ID：10617246
> 
> 赞同：-1
> 
> 时间：2012-05-16T11:06:58.143
> 
> 标签：mongodb

这是两个集合

```
lb_order_details
lb_orders 
```

谁能建议我如何加入——比如 MySQL 加入——并使用 PHP 打印这两个 MongoDB 数据集合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-30T06:27:50.000

在 mongodb 中没有加入这样的东西，但是您可以通过在特定用户的每个集合中保持 id 字段通用来创建关系。您必须明智地管理数据库以克服连接问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:09:45.533

MongoDB 中没有连接。您需要使用两个不同的 MongoDB 查询检索数据并在 PHP 端处理数据。

# objective-c - 如何获取定义方法的类，而不是调用方法的实例的类？

> ID：10617258
> 
> 赞同：2
> 
> 时间：2012-05-16T11:07:28.890
> 
> 标签：objective-c, ios, reflection

[self class] 返回被调用方法的实例的Class，但是有没有办法获取该方法定义的Class呢？假设 B 类扩展了 A，并且 b 是 B 的一个实例，我想要 A 中的一个方法返回 A 而不是 B，即使从 b 调用也是如此。

**编辑：**

我尝试创建一个具有 -(void)releaseProperties 方法的 NSObject 类别，该方法获取该类中定义的所有属性并为非只读对象属性设置 nil 。

```
- (void)releaseProperties {
    unsigned int c = 0;
    objc_property_t *properties = class_copyPropertyList([self class], &c);

    for(unsigned int i = 0; i < c; i++) {
        objc_property_t property = properties[i];
        NSString *propertyName = [NSString stringWithUTF8String:property_getName(property)];
        NSString *propertyType = [NSString stringWithUTF8String:property_getAttributes(property)];

        if([propertyType hasPrefix:@"T@"] // is an object
           && [propertyType rangeOfString:@",R,"].location == NSNotFound // not readonly
           ) {
            [self setValue:nil forKey:propertyName];
            NSLog(@"%@.%@ = %@", NSStringFromClass(cls), propertyName, [self valueForKey:propertyName]);
        }
    }
    free(properties);
} 
```

我想在 dealloc 方法中使用这个方法，但是 class_copyPropertyList([self class], &c) 不会返回它的超类中定义的属性，所以 super-dealloc 链不能正常工作。因此，我不想传递 [self 类]，而是想传递正在调用特定 dealloc 方法的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:29:00.283

我认为没有直接的方法可以做到这一点，但您可以调用`class_getMethodImplementation_stret`当前类来获取将要调用的方法的函数指针。然后遍历你的超类，用它们调用相同的函数，直到它返回不同的东西。前一个超类将为您的类提供实现。

**编辑：**对不起，我可能误读了这个问题。如果您正在寻找定义具有该签名的方法的层次结构中的第一个超类，那么您可以遍历超类调用`respondsToSelector:`，直到其中一个没有。我上面描述的方法是找到提供继承*实现*的超类，而不是*定义*。

例如，class`A`可以定义`foo:`，然后 class `B`（它是 的子类`A`）可以覆盖它，然后 class `C`（它是 的子类`B`）可以询问`foo:`来自哪里。如果你想要提供定义的类，你想要`A`并且应该使用我描述的第二种方法。如果您想要提供实现的类，您想要`B`并且应该使用我描述的第一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:10:05.940

我有一种感觉，[`[super class]`](http://paikialog.wordpress.com/2011/01/12/super-in-objective-c/)可能对你有用。

如果你`[super ...`在 B 中调用“”（用你想调用的任何内容填空），你将调用一个存在于 A 中的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:16:07.093

A 类可以提供如下方法：

```
- (Class) classA
{
    return [A class];
} 
```

那是不可概括的，但是您的问题坚持一个不可概括的答案。

想要这是一件非常奇怪的事情。它表明您的设计存在问题。我可以问你为什么想要它吗？你想解决什么问题？

# java - 如何将 Selenium 2.21.0（以前的 Selenium RC）库与 Eclipse 集成？

> ID：10617264
> 
> 赞同：0
> 
> 时间：2012-05-16T11:07:45.907
> 
> 标签：java, eclipse, selenium, jar, selenium-webdriver

我想将 Selenum 2.21 库添加到 Eclipse java 项目中。我尝试了两种方法。

**一个通过命令行：**

我已经从他们的 Java 网站下载了 Selenium 2.2（以前的 selenium RC）并解压缩了它们。当我编写 java -jar (selenium-filename).jar 时，我收到“No main manifest attribute”错误。

我知道，必须在清单文件中添加 mainclass 行。v2.21 中没有清单的文件夹。

我也有 Seleniumv1.03，它有 Manifest 选项。我添加了行和换行符，正如在某个地方的另一篇文章中所述，但我仍然遇到了这个问题。

**二通过复制/粘贴项目的JRE系统库下的jar文件：**

这个动作也是不允许的。无法粘贴到项目对应的JRE系统库下。

*除了参考 Sun 教程中的某个地方之外，您能否告诉一步一步的过程，在那里他们给出了关于 java cfe (jar name) (class name) (class name.class) 的定义入口点...我有也试过了，目前...*

对于其他参考，Java6 Update 32，我已经下载了 SDK 和 JRE。Firefox 12 和 ie9，我正在使用。使用 Eclipse Indigo IDE for Java Developers。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:11:11.877

你必须做什么下载 selinium jar 文件并将其保存在你的项目文件夹中（如果你有一个 lib floder 最好）

然后在项目资源管理器中右键单击项目。您可以找到构建路径选项。然后单击它，它将显示您配置构建路径选项。然后您可以将您的库添加到项目中。只需显示 selinium jar 文件的路径。

# java - JAXB，setter/getter 的注解

> ID：10617267
> 
> 赞同：3
> 
> 时间：2012-05-16T11:07:58.467
> 
> 标签：java, jaxb

```
@XmlType  
@XmlAccessorType(XmlAccessType.FIELD)  // here I need this access
public class User implements Serializable 
{  
     // ...  

     @XmlTransient
     private Set<Values> values;

     // ...

     @XmlElement
     private Set<History> getXmlHistory()
     {
         return new CustomSet<Values, History>(Values);
     }

     private void setXmlHistory(final Set<History> aHistory)
     {
         this.values = new HashSet<Values>();
     }  
} 
```

当我在 Java 代码中创建用户对象并在创建 XML 之后，一切正常。
但是当我尝试从 XML 中获取用户对象时，字段`values`always `null`。所以二传手不在这里工作。可能 setter 也需要一些注释？

XML 看起来像

```
<user>  
   ...  
      <xmlHistory>  
       // ... record 1 
      </xmlHistory>  
      <xmlHistory>  
      // ... record 2 
      </xmlHistory>  
</user> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T12:10:36.720

我不认为这是一个 JAXB 问题，因为以下模型将起作用：

```
package forum10617267;

import java.io.Serializable;
import java.util.*;
import javax.xml.bind.annotation.*;

@XmlType
@XmlAccessorType(XmlAccessType.FIELD) // here I need this access
public class User implements Serializable {

    @XmlTransient
    private Set<History> history = new HashSet<History>();

    @XmlElement
    private Set<History> getXmlHistory() {
         return history;
    }

    private void setXmlHistory(final Set<History> aHistory) {
        this.history = aHistory;
    }

} 
```

您看到的问题是您的 get/set 方法中的逻辑的结果。由于您的`values`字段未初始化，我不确定如何`CustomSet`更新它。

```
package forum10617267;

import java.io.Serializable;
import java.util.*;
import javax.xml.bind.annotation.*;

@XmlType
@XmlAccessorType(XmlAccessType.FIELD) // here I need this access
public class User implements Serializable {

    @XmlTransient
    private Set<Values> values;

    @XmlElement
    private Set<History> getXmlHistory() {
         return new CustomSet<Values, History>(values);
    }

    private void setXmlHistory(final Set<History> aHistory) {
        this.values = new HashSet<Values>();
    }

} 
```

# php - 二维聚类算法

> ID：10617272
> 
> 赞同：0
> 
> 时间：2012-05-16T11:08:09.017
> 
> 标签：php, arrays, algorithm, cluster-analysis

我正在分析图像，需要一种快速聚类算法来搜索最大中心的中心。

示例数据集可能如下所示：

```
$x = array(6,9,7,0,0,0,4,0,0,6,6,3); 
```

如您所见，阵列中有 3 个集群。

我正在寻找的结果是总和最高的集群中心的数组位置。在上面的示例中，这将是 1，因为`$x[1]`最大集群 6+9+7(=22) 的中心也是如此。

![图形](../Images/3bb4f29d449337f03aa766811149ca9e.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:38:32.020

无论你走哪条路，你都必须至少穿过阵列一次。以下算法一次性完成此操作，无需任何额外的排序/搜索 - 尽管我承认它仍然可能不是最有效的算法。请注意，如果最大的集群有偶数个元素，那么它将返回“较低”的中点（例如，对于索引为 0、1、2、3 的集群，它将返回 1）——这可以很容易地调整在计算的最后一行 ( `$mid = ...`)。

```
$input = array(6,9,7,0,0,0,4,0,0,6,6,3);

$clust = array(0, 0, 0);
$st = -1;
$sum = 0;
for($i=0; $i<count($input); $i++) {
    if($input[$i] == 0) {
        if($i == 0) {
            continue;
        }
        elseif($input[$i - 1] == 0) {
            continue;
        }
        else {
            if($clust[2] < $sum) {
                $clust = array($st, $i - 1, $sum);
            }
        }
    }
    else {
        if($i == 0 || $input[$i - 1] == 0) {
            $st = $i;
            $sum = 0;
        }
        $sum += $input[$i];
    }
}
if(end($input) != 0 && $clust[2] < $sum) {
    $clust = array($st, $i - 1, $sum);
}

if($clust[2] > 0) {
    $mid = (int)(($clust[1] - $clust[0]) / 2);
    echo $clust[0] ."->". $mid ."->" . $clust[1] ." = ". $clust[2];
}
else {
    echo "No clusters found";
} 
```

# c - 如何在C中检查服务器端是否建立了连接

> ID：10617273
> 
> 赞同：2
> 
> 时间：2012-05-16T11:08:14.617
> 
> 标签：c, linux

我在服务器端使用 C 为聊天客户端编写了以下代码。但是，在 while 循环中，我需要检查客户端是否已退出程序，即与客户端的连接是否丢失。请告诉我如何编写这样的代码。

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <time.h>
int main()
{
int sock, connected, bytes_recieved , true = 1, pid;  
char send_data [1024] , recv_data[1024];     
struct sockaddr_in server_addr,client_addr;    
int sin_size;
if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1)
{
    perror("Socket");
    exit(1);
}
if (setsockopt(sock,SOL_SOCKET,SO_REUSEADDR,&true,sizeof(int)) == -1)
{
    perror("Setsockopt");
    exit(1);
}
server_addr.sin_family = AF_INET;         
server_addr.sin_port = htons(3128);     
server_addr.sin_addr.s_addr = INADDR_ANY; 
bzero(&(server_addr.sin_zero),8); 
if (bind(sock, (struct sockaddr *)&server_addr, sizeof(struct sockaddr)) == -1)
{
    perror("Unable to bind");
    exit(1);
}
if (listen(sock, 5) == -1)
{
    perror("Listen");
    exit(1);
}
printf("\nTCPServer Waiting for client on port 3128");
fflush(stdout);
FILE *log;
log = fopen("time.log", "a");
time_t t;
while(1)
{  
    sin_size = sizeof(struct sockaddr_in);
    connected = accept(sock, (struct sockaddr *)&client_addr,&sin_size);
    printf("\n I got a connection from (%s , %d)", inet_ntoa(client_addr.sin_addr), ntohs(client_addr.sin_port));
    fflush(stdout);           
    int pid=fork();
    while(1)
    {       
        if(pid == 0)
        {
            usleep(1000000);
            time(&t);
            send(connected, ctime(&t),30, 0);
        }
        else
        {
            bytes_recieved = recv(connected,recv_data,1024,0);
            recv_data[bytes_recieved] = '\0';
            fputs(recv_data, log);
            fputs("Time: ", log);
            time(&t);
            fputs(ctime(&t), log);
        }
        fflush(log);
    }   
    }   
fclose(log);
close(sock);
return 0;
} 
```

请帮忙。

现在我修改了这样的代码：

```
while(1)
{       
    if(pid == 0)
    {
        usleep(1000000); 
        time(&t);
        send(connected, ctime(&t),30, 0);
    }
    else
    {
        bytes_recieved = recv(connected,recv_data,1024,0);
        recv_data[bytes_recieved] = '\0';
        fputs(recv_data, log);
        fputs("Time: ", log);
        time(&t);
        fputs(ctime(&t), log);
    }
    fflush(stdout);
    fflush(log);
    fclose(log);
    if(bytes_recieved == 0 || bytes_recieved == -1)
    {
        close(sock); goto connct;}
    }   
}
close(sock);
return 0; 
```

在编译时，它运行良好，但在运行时，它给出以下错误输出：

```
*** glibc detected *** ./server: double free or corruption (!prev): 0x09936008 ***
======= Backtrace: =========
/lib/i686/cmov/libc.so.6(+0x6b381)[0xb7659381]
/lib/i686/cmov/libc.so.6(+0x6cbd8)[0xb765abd8]
/lib/i686/cmov/libc.so.6(cfree+0x6d)[0xb765dcbd]
/lib/i686/cmov/libc.so.6(fclose+0x14a)[0xb764982a]
./server[0x8048c21]
/lib/i686/cmov/libc.so.6(__libc_start_main+0xe6)[0xb7604ca6]
./server[0x8048861]
======= Memory map: ========
08048000-08049000 r-xp 00000000 08:01 133298     /home/harikrishnan/server/server
08049000-0804a000 rw-p 00000000 08:01 133298     /home/harikrishnan/server/server
09936000-09957000 rw-p 00000000 00:00 0          [heap]
b7400000-b7421000 rw-p 00000000 00:00 0 
b7421000-b7500000 ---p 00000000 00:00 0 
b75bf000-b75dc000 r-xp 00000000 08:01 3653635    /lib/libgcc_s.so.1
b75dc000-b75dd000 rw-p 0001c000 08:01 3653635    /lib/libgcc_s.so.1
b75ed000-b75ee000 rw-p 00000000 00:00 0 
b75ee000-b772e000 r-xp 00000000 08:01 3670051    /lib/i686/cmov/libc-2.11.3.so
b772e000-b772f000 ---p 00140000 08:01 3670051    /lib/i686/cmov/libc-2.11.3.so
b772f000-b7731000 r--p 00140000 08:01 3670051    /lib/i686/cmov/libc-2.11.3.so
b7731000-b7732000 rw-p 00142000 08:01 3670051    /lib/i686/cmov/libc-2.11.3.so
b7732000-b7735000 rw-p 00000000 00:00 0 
b7744000-b7747000 rw-p 00000000 00:00 0 
b7747000-b7748000 r-xp 00000000 00:00 0          [vdso]
b7748000-b7763000 r-xp 00000000 08:01 3654097    /lib/ld-2.11.3.so
b7763000-b7764000 r--p 0001b000 08:01 3654097    /lib/ld-2.11.3.so
b7764000-b7765000 rw-p 0001c000 08:01 3654097    /lib/ld-2.11.3.so
bfd94000-bfda9000 rw-p 00000000 00:00 0          [stack]
*** glibc detected *** ./server: double free or corruption (!prev): 0x09936008 ***
======= Backtrace: =========
/lib/i686/cmov/libc.so.6(+0x6b381)[0xb7659381]
/lib/i686/cmov/libc.so.6(+0x6cbd8)[0xb765abd8]
/lib/i686/cmov/libc.so.6(cfree+0x6d)[0xb765dcbd]
/lib/i686/cmov/libc.so.6(fclose+0x14a)[0xb764982a]
./server[0x8048c21]
/lib/i686/cmov/libc.so.6(__libc_start_main+0xe6)[0xb7604ca6]
./server[0x8048861]
======= Memory map: ========
08048000-08049000 r-xp 00000000 08:01 133298     /home/harikrishnan/server/server
08049000-0804a000 rw-p 00000000 08:01 133298     /home/harikrishnan/server/server
09936000-09957000 rw-p 00000000 00:00 0          [heap]
b7400000-b7421000 rw-p 00000000 00:00 0 
b7421000-b7500000 ---p 00000000 00:00 0 
b75bf000-b75dc000 r-xp 00000000 08:01 3653635    /lib/libgcc_s.so.1
b75dc000-b75dd000 rw-p 0001c000 08:01 3653635    /lib/libgcc_s.so.1
b75ed000-b75ee000 rw-p 00000000 00:00 0 
b75ee000-b772e000 r-xp 00000000 08:01 3670051    /lib/i686/cmov/libc-2.11.3.so
b772e000-b772f000 ---p 00140000 08:01 3670051    /lib/i686/cmov/libc-2.11.3.so
b772f000-b7731000 r--p 00140000 08:01 3670051    /lib/i686/cmov/libc-2.11.3.so
b7731000-b7732000 rw-p 00142000 08:01 3670051    /lib/i686/cmov/libc-2.11.3.so
b7732000-b7735000 rw-p 00000000 00:00 0 
b7744000-b7747000 rw-p 00000000 00:00 0 
b7747000-b7748000 r-xp 00000000 00:00 0          [vdso]
b7748000-b7763000 r-xp 00000000 08:01 3654097    /lib/ld-2.11.3.so
b7763000-b7764000 r--p 0001b000 08:01 3654097    /lib/ld-2.11.3.so
b7764000-b7765000 rw-p 0001c000 08:01 3654097    /lib/ld-2.11.3.so
bfd94000-bfda9000 rw-p 00000000 00:00 0          [stack]
Aborted 
```

知道实际问题是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:15:10.343

`recv()``0`客户端关闭连接后将立即返回。`-1`如果尝试从套接字获取数据时出现任何错误，将返回。

有关更多信息，请参见[手册页](http://linux.die.net/man/2/recv)。

所以将您的代码更改为

```
 int conn_closed = 0;

   bytes_recieved = recv(connected,recv_data,1024,0);
   switch (bytes_recieved) {
   case 0:
         /* connection closed by client */
         close(connected);
         conn_closed = 1;
         break;
   case -1:
         /* error on socket */
         /* TODO: insert error handling code */
         if (errno == EAGAIN || errno == EINTR) {
            /* safe to retry */
            conn_closed = 0;
         } else {
            close(connected)
            conn_closed = 1;
         }
         break;
   default:
        recv_data[bytes_recieved] = '\0';
        fputs(recv_data, log);
        fputs("Time: ", log);
        time(&t);
        fputs(ctime(&t), log);
        conn_closed = 0;
        break;
   }
   /* break out of the loop if conn_closed */
   if (conn_closed)
       break; 
```

并且不要忘记检查 的返回值`send()`，以查看发送数据时是否发生错误。

`EAGAIN`更新：为和添加错误处理代码`EINTR`。

第二次更新：

为了完整起见，这是您应该添加的发送代码

```
if (send(connected, ctime(&t),30, 0) == -1)
{
    if (errno == EAGAIN || errno == EINTR) {
       /* retry to send */
    }
    close(connected);
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:15:02.313

如果 send 返回 SOCKET_ERROR 表示套接字关闭或连接丢失

所以就这样做

```
if (send(connected, ctime(&t),30, 0) == SOCKET_ERROR)
 {
   // blablabla
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:27:53.703

在你的情况下，一个小建议，而不是给出一个“if”条件来检查连接，而是在“while”中做同样的事情，而不是“while(1)”，给出条件。

# c# - Linq 按多列分组并将它们加在一起

> ID：10617278
> 
> 赞同：0
> 
> 时间：2012-05-16T11:08:30.553
> 
> 标签：c#, .net, linq

而不是写一个大的解释文本，我想用图像来展示它

![http://imageshack.us/photo/my-images/526/24090293.jpg](../Images/757d8f3cd8dc23a5ca2283797dfae971.png)

我怎样才能将这些数据分组为这样的：

![在此处输入图像描述](../Images/b22680af4b7aeada6d48dbadb145315f.png)

松散地用类似的东西：

```
var obj = (
    from f in context.assets
    group f by new 
    {
        f.signed, 
        f.typeOfInvestment
    }
    into gvc
    select new
    {
        Signed = sum(Signed)
        Unsigned = Sum(Unsigned)
        NotAvailable = Sum(NotAvailable)
        SumOfWorth = Sum(Signed + Unsigned + NotAvailable)
    }).ToList(); 
```

所有帮助将不胜感激

真诚的啊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:37:18.190

以下是用于旋转数据的代码

Linq 查询

```
 Random rand = new Random();
        var data = Enumerable.Range(0,15).Select(x=> new {Company= "Company" + rand.Next(1,100),
                    Signed="Sign" + rand.Next(1,4), StockType= "Type"+rand.Next(1,4), Worth=rand.Next(1000,2000)});

        var sampleData = data.GroupBy(x=>x.StockType).Select( x=> new {StockType=x.Key, Signed = x.Count()});

        var pivotData = data.GroupBy(x=>x.StockType).Select( 
        x=> 
        new 
            {   StockType=x.Key, 
                Signed = x.Where(y=>y.Signed=="Sign1").Count(),
                UnSigned = x.Where(y=>y.Signed=="Sign2").Count(),
                NA = x.Where(y=>y.Signed=="Sign3").Count(),
                Total = x.Where(y=>y.Signed=="Sign1"||y.Signed=="Sign2"||y.Signed=="Sign3").Count()

            }); 
```

UnPivot 数据（模拟输入）

```
 Company Signed StockType WorthΞΞ 
    Company42 Sign1 Type3 1884 
    Company35 Sign2 Type3 1437 
    Company30 Sign1 Type2 1781 
    Company50 Sign2 Type3 1747 
    Company57 Sign1 Type2 1116 
    Company32 Sign1 Type2 1350 
    Company83 Sign3 Type2 1027 
    Company2 Sign1 Type3 1983 
    Company74 Sign1 Type2 1690 
    Company77 Sign3 Type1 1502 
    Company2 Sign1 Type1 1797 
    Company18 Sign1 Type1 1768 
    Company39 Sign1 Type1 1715 
    Company1 Sign1 Type2 1143 
    Company50 Sign2 Type1 1420 
```

输出（未完全旋转，但根据此问题要求）

```
 StockType Signed1 Signed2 Signed3 TotalΞΞ 
        Type2 1 0 2 3 
        Type1 2 3 1 6 
        Type3 3 2 1 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:52:09.877

首先，您不需要按`Signed`属性分组。其次，这是查询：

```
var result = 
from g in context.Assets.GroupBy(x=>x.StockType)
let signed = g.Where(x => x.Signed == "signed").Sum(x=>x.Worth)
let unsigned = g.Where(x => x.Signed == "unsigned").Sum(x => x.Worth)
let notAvailable = g.Where(x => x.Signed == "notAvail").Sum(x => x.Worth)
select new
{
    Signed = signed,
    Unsigned = unsigned,
    NotAvailable = notAvailable,
    SumOfWorth = signed + unsigned + notAvailable
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:01:26.460

编码：

```
public class MainClass
{
    enum SignEnum { signed, unsigned, notAvail }
    class Element
    {
        public string Company;
        public SignEnum Signed;
        public string TypeOfInvestment;
        public decimal Worth;
    }
    class GroupedResult
    {
        public string TypeOfInvestment;
        public decimal signed, unsigned, notAvailable;
        public decimal Sum;
    }
    public static void Main()
    {
        List<Element> elements = new List<Element>()
        {
            new Element { Company = "JPMORGAN CHASE", Signed = SignEnum.signed,
                TypeOfInvestment = "Stocks", Worth = 96983 },
            new Element { Company = "AMER TOWER CORP", Signed = SignEnum.unsigned,
                TypeOfInvestment = "Securities", Worth = 17141 },
            new Element { Company = "ORACLE CORP", Signed = SignEnum.unsigned,
                TypeOfInvestment = "Assets", Worth = 59372 },
            new Element { Company = "PEPSICO INC", Signed = SignEnum.notAvail,
                TypeOfInvestment = "Assets", Worth = 26516 },
            new Element { Company = "PROCTER & GAMBL", Signed = SignEnum.signed,
                TypeOfInvestment = "Stocks", Worth = 387050 },
            new Element { Company = "QUASLCOMM INC", Signed = SignEnum.unsigned,
                TypeOfInvestment = "Bonds", Worth = 196811 },
            new Element { Company = "UTD TECHS CORP", Signed = SignEnum.signed,
                TypeOfInvestment = "Bonds", Worth = 257429 },
            new Element { Company = "WELLS FARGO-NEW", Signed = SignEnum.unsigned,
                TypeOfInvestment = "Bank Account", Worth = 106600 },
            new Element { Company = "FEDEX CORP", Signed = SignEnum.notAvail,
                TypeOfInvestment = "Stocks", Worth = 103955 },
            new Element { Company = "CVS CAREMARK CP", Signed = SignEnum.notAvail,
                TypeOfInvestment = "Securities", Worth = 171048 },
        };

        string header = "Company".PadLeft(15) + " " +
            "Signed".PadLeft(10) + " " +
            "Type Of Investment".PadLeft(20) + " " +
            "Worth".PadLeft(10);
        Console.WriteLine(header);
        Console.WriteLine(new string('-', header.Length));
        foreach (var e in elements)
        {
            Console.WriteLine(e.Company.PadLeft(15) + " " +
                e.Signed.ToString().PadLeft(10) + " " +
                e.TypeOfInvestment.PadLeft(20) + " " +
                e.Worth.ToString().PadLeft(10));
        }

        Console.WriteLine();

        var query = from e in elements
                                                        group e by e.TypeOfInvestment into eg
                                                        select new GroupedResult
                                                        {
                                                            TypeOfInvestment = eg.Key,
                                                            signed = eg.Where(x => x.Signed == SignEnum.signed).Sum(y => y.Worth),
                                                            unsigned = eg.Where(x => x.Signed == SignEnum.unsigned).Sum(y => y.Worth),
                                                            notAvailable = eg.Where(x => x.Signed == SignEnum.notAvail).Sum(y => y.Worth),
                                                            Sum = eg.Sum(y => y.Worth)
                                                        };

        string header2 = "Type of investment".PadRight(20) + " " +
            "signed".PadLeft(8) + " " +
            "unsigned".PadLeft(8) + " " +
            "notAvailable".PadLeft(13) + " " +
            "Sum";
        Console.WriteLine(header2);
        Console.WriteLine(new string('-', header2.Length));
        foreach (var item in query)
        {
            Console.WriteLine(item.TypeOfInvestment.PadRight(20) + " " +
                item.signed.ToString().PadLeft(8) + " " + 
                item.unsigned.ToString().PadLeft(8) + " " +
                item.notAvailable.ToString().PadLeft(13) + " " +
                item.Sum.ToString()
                );
        }
    }
} 
```

结果：

```
 Company     Signed   Type Of Investment      Worth
----------------------------------------------------------
 JPMORGAN CHASE     signed               Stocks      96983
AMER TOWER CORP   unsigned           Securities      17141
    ORACLE CORP   unsigned               Assets      59372
    PEPSICO INC   notAvail               Assets      26516
PROCTER & GAMBL     signed               Stocks     387050
  QUASLCOMM INC   unsigned                Bonds     196811
 UTD TECHS CORP     signed                Bonds     257429
WELLS FARGO-NEW   unsigned         Bank Account     106600
     FEDEX CORP   notAvail               Stocks     103955
CVS CAREMARK CP   notAvail           Securities     171048

Type of investment     signed unsigned  notAvailable Sum
--------------------------------------------------------
Stocks                 484033        0        103955 587988
Securities                  0    17141        171048 188189
Assets                      0    59372         26516 85888
Bonds                  257429   196811             0 454240
Bank Account                0   106600             0 106600 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:55:31.257

试试这个：

```
var obj = (
    from f in context.assets
    group f by f.typeOfInvestment into gvc
    let lookup = gvc.ToLookup(x => x.signed, x => x.worth)
    select new
    {
        TypeOfInvestment = gvc.Key,
        Signed = lookup["signed"].Sum(),
        Unsigned = lookup["unsigned"].Sum(),
        NotAvailable = lookup["notAvail"].Sum(),
        SumOfWorth = gvc.Select(x => x.worth).Sum(),
    }).ToList(); 
```

# mongodb - 为什么我的mongodb索引这么大

> ID：10617283
> 
> 赞同：5
> 
> 时间：2012-05-16T11:08:55.287
> 
> 标签：mongodb

我的 mongodb 集合中有 57M 文档，即 19G 数据。我的索引占用了10G。这听起来正常还是我做错了什么！我的主键是2G。

```
{
        "ns" : "myDatabase.logs",
        "count" : 56795183,
        "size" : 19995518140,
        "avgObjSize" : 352.0636272974065,
        "storageSize" : 21217578928,
        "numExtents" : 39,
        "nindexes" : 4,
        "lastExtentSize" : 2146426864,
        "paddingFactor" : 1,
        "flags" : 1,
        "totalIndexSize" : 10753999088,
        "indexSizes" : {
            "_id_" : 2330814080,
            "type_1_playerId_1" : 2999537296,
            "type_1_time_-1" : 2344582464,
            "type_1_tableId_1" : 3079065248
        },
        "ok" : 1
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T18:37:30.797

索引大小由被索引的文档数量以及键的大小决定（复合键存储更多信息并且会更大）。在这种情况下，_id 索引除以文档数是 40 字节，这看起来比较合理。

如果你运行 db.collection.getIndexes()，你可以找到索引版本。如果是 {v : 0}，则索引是在 mongo 2.0 之前创建的，在这种情况下，您应该升级到 {v:1}。这个过程记录在这里：[http ://www.mongodb.org/display/DOCS/Index+Versions](http://www.mongodb.org/display/DOCS/Index+Versions)

# python - 打开上传的 CSV 文件时出现类型错误

> ID：10617286
> 
> 赞同：15
> 
> 时间：2012-05-16T11:09:01.373
> 
> 标签：python, django, file-upload, csv, django-forms

我正在用 django 在 python 中开发一个应用程序。用户可以上传 CSV 文件。我使用文件上传来获取文件。但是，它没有存储在任何地方。我尝试从请求中获取它来处理文件。当我试图打开文件时，它给出了一个错误。我使用python中存在的CSV库来处理。按照 django 使用的表单元素和属性。我尝试获取上传文件的请求对象也是 django 设计的对象。

```
import csv
from rootFolder.UploadFileForm

def uploadFile(request):
    if request.method == 'POST':
        form = UploadFileForm(request.POST, request.FILES)
        if form.is_valid():
            paramFile = open(request.FILES['uploadFile'], 'rb')
            portfolio = csv.DictReader(paramFile)
            users = []
            for row in portfolio:
                users.append(row) 
```

下面这一行给出了错误。

```
paramFile = open(request.FILES['uploadFile'], 'rb') 
```

给定的错误是：

```
TypeError: coercing to Unicode: need string or buffer, InMemoryUploadedFile found 
```

如果您对此有任何想法，请提出您的建议。提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-01-28T15:04:45.340

这适用于**Python 3**

```
import csv
import io

...

csv_file = request.FILES['uploadFile']
decoded_file = csv_file.read().decode('utf-8')
io_string = io.StringIO(decoded_file)
for line in csv.reader(io_string, delimiter=';', quotechar='|'):
    print(line) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-16T11:50:47.797

无需在文件上调用 open，它已经打开了。您应该能够将其直接传递到 DictReader。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-16T11:19:42.437

open() 将文件名作为参数，而不是文件对象本身。

你可以尝试这样的事情：

```
paramFile = request.FILES['uploadFile'].read()
portfolio = csv.DictReader(paramFile) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-07-12T18:13:39.980

**Django 2, Python 3.6**，同样的问题，半天的谷歌搜索，这是对我有用的解决方案。

```
form.is_valid:
  csv_file = request.FILES['file']
  csv_file.seek(0)
  reader = csv.DictReader(io.StringIO(csv_file.read().decode('utf-8')))

  for row in reader
     .....
     ..... 
```

详细的文章在这里 ->[来源](https://andromedayelton.com/2017/04/25/adventures-with-parsing-django-uploaded-csv-files-in-python3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T11:19:34.217

你会得到一个 TypeError，因为内置函数 open 需要一个作为文件路径的字符串。

这行得通吗？

```
 if form.is_valid():
        request.FILES['uploadFile'].open("rb")
        portfolio = csv.DictReader(request.FILES['uploadFile'].file) 
```

# video - 使用 JW Player 时 .flv 播放损坏

> ID：10617289
> 
> 赞同：1
> 
> 时间：2012-05-16T11:09:08.950
> 
> 标签：video, ffmpeg, flv, jwplayer

这个问题也在[音频视频制作中被问到](https://video.stackexchange.com/questions/4004/corrupt-video-when-playing-through-jw-player)

我有一些文件在 jwplayer 中播放时播放已损坏。这些文件使用 FFMpeg 编码为 h.264，并且还有其他文件以相同的方式编码。

目前我们只使用 Flash 版本的播放器。

这个问题是在我们升级到 FFMpeg 后开始出现的，所以我不排除它可能是编码错误。

用于运行 FFMpeg 的命令是：

```
ffmpeg 
    -i /home/ftp/1c8f08b7d0d9e7fa4b24066156ad50bc981497a0.mov 
    -vcodec libx264 
    -preset ultrafast 
    -profile baseline 
    -acodec libfaac 
    -ab 96k 
    -crf 19 
    -vf movie="/home/adam/logo.png [watermark]; [in][watermark] overlay=main_w-overlay_w-10:main_h-overlay_h-10 [out]" 
    -y /home/ftp/1c8f08b7d0d9e7fa4b24066156ad50bc981497a0.flv 
```

我绝不是 FFMpeg 命令行方面的专家，因此请随时指出所犯的任何错误。

FFMpeg 信息：

```
ffmpeg version git-2012-05-02-2330eb1 Copyright (c) 2000-2012 the FFmpeg developers
  built on May  3 2012 08:51:25 with gcc 4.4.3
  configuration: --enable-gpl --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree --enable-version3 --enable-x11grab
  libavutil      51\. 49.100 / 51\. 49.100
  libavcodec     54\. 17.101 / 54\. 17.101
  libavformat    54\.  3.100 / 54\.  3.100
  libavdevice    53\.  4.100 / 53\.  4.100
  libavfilter     2\. 72.103 /  2\. 72.103
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 11.100 /  0\. 11.100
  libpostproc    52\.  0.100 / 52\.  0.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x24300e0] max_analyze_duration 5000000 reached at 5187000
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/home/ftp/javarecorder/1c8f08b7d0d9e7fa4b24066156ad50bc981497a0.mov':
  Metadata:
    major_brand     : qt
    minor_version   : 537199360
    compatible_brands: qt
    creation_time   : 2012-05-16 08:19:41
  Duration: 00:13:33.00, start: 0.000000, bitrate: 2164 kb/s
    Stream #0:0(eng): Video: qtrle (rle  / 0x20656C72), rgb24, 1366x768, 1457 kb/s, 8.43 fps, 1k tbr, 1k tbn, 1k tbc
    Metadata:
      creation_time   : 2012-05-16 08:19:41
      handler_name    : Apple Alias Data Handler
    Stream #0:1(eng): Audio: pcm_s16be (twos / 0x736F7774), 44100 Hz, 1 channels, s16, 705 kb/s
    Metadata:
      creation_time   : 2012-05-16 08:19:41
      handler_name    : Apple Alias Data Handler
Please use -profile:a or -profile:v, -profile is ambiguous
[buffer @ 0x2446ac0] w:1366 h:768 pixfmt:rgb24 tb:1/1000000 sar:0/1 sws_param:flags=2
[movie @ 0x242f840] seek_point:0 format_name:(null) file_name:/home/adam/logo.png stream_index:0
[overlay @ 0x2442840] auto-inserting filter 'auto-inserted scale 0' between the filter 'src' and the filter 'Parsed_overlay_1'
[overlay @ 0x2442840] auto-inserting filter 'auto-inserted scale 1' between the filter 'Parsed_movie_0' and the filter 'Parsed_overlay_1'
[scale @ 0x24444a0] w:1366 h:768 fmt:rgb24 sar:0/1 -> w:1366 h:768 fmt:yuv420p sar:0/1 flags:0x4
[scale @ 0x2445100] w:80 h:80 fmt:rgba sar:1/1 -> w:80 h:80 fmt:yuva420p sar:1/1 flags:0x4
[overlay @ 0x2442840] main w:1366 h:768 fmt:yuv420p overlay x:1276 y:678 w:80 h:80 fmt:yuva420p
[overlay @ 0x2442840] main_tb:1/1000000 overlay_tb:1/25 -> tb:1/1000000 exact:1
[libx264 @ 0x242d8c0] MB rate (4128000) > level limit (2073600)
[libx264 @ 0x242d8c0] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2
[libx264 @ 0x242d8c0] profile Constrained Baseline, level 5.2
[libx264 @ 0x242d8c0] 264 - core 124 r2197 69a0443 - H.264/MPEG-4 AVC codec - Copyleft 2003-2012 - http://www.videolan.org/x264.html - options: cabac=0 ref=1 deblock=0:0:0 analyse=0:0 me=dia subme=0 psy=1 psy_rd=1.00:0.00 mixed_ref=0 me_range=16 chroma_me=1 trellis=0 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=0 threads=36 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0 keyint=250 keyint_min=25 scenecut=0 intra_refresh=0 rc=crf mbtree=0 crf=19.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=0
[libfaac @ 0x2443540] channel_layout not specified
Guessed Channel Layout for  Input Stream #0.1 : mono
Output #0, flv, to '/home/ftp/javarecorder/1c8f08b7d0d9e7fa4b24066156ad50bc981497a0.flv':
  Metadata:
    major_brand     : qt
    minor_version   : 537199360
    compatible_brands: qt
    creation_time   : 2012-05-16 08:19:41
    encoder         : Lavf54.3.100
    Stream #0:0(eng): Video: h264 ([7][0][0][0] / 0x0007), yuv420p, 1366x768, q=-1--1, 1k tbn, 1k tbc
    Metadata:
      creation_time   : 2012-05-16 08:19:41
      handler_name    : Apple Alias Data Handler
    Stream #0:1(eng): Audio: aac ([10][0][0][0] / 0x000A), 44100 Hz, mono, s16, 96 kb/s
    Metadata:
      creation_time   : 2012-05-16 08:19:41
      handler_name    : Apple Alias Data Handler
Stream mapping:
  Stream #0:0 -> #0:0 (qtrle -> libx264)
  Stream #0:1 -> #0:1 (pcm_s16be -> libfaac)
Press [q] to stop, [?] for help
Input stream #0:1 frame changed from rate:44100 fmt:s16 ch:1 chl:0x0 to rate:44100 fmt:s16 ch:1 chl:0x4
frame= 6856 fps=105 q=-1.0 Lsize=   36030kB time=00:13:32.83 bitrate= 363.1kbits/s
video:27775kB audio:7540kB global headers:0kB muxing overhead 2.026555%
[libx264 @ 0x242d8c0] frame I:28    Avg QP: 4.61  size:238170
[libx264 @ 0x242d8c0] frame P:6828  Avg QP: 7.31  size:  3189
[libx264 @ 0x242d8c0] mb I  I16..4: 100.0%  0.0%  0.0%
[libx264 @ 0x242d8c0] mb P  I16..4:  0.9%  0.0%  0.0%  P16..4:  2.2%  0.0%  0.0%  0.0%  0.0%    skip:96.9%
[libx264 @ 0x242d8c0] coded y,uvDC,uvAC intra: 32.3% 30.0% 29.0% inter: 1.0% 1.1% 1.0%
[libx264 @ 0x242d8c0] i16 v,h,dc,p: 66% 32%  1%  1%
[libx264 @ 0x242d8c0] i8c dc,h,v,p: 62% 23% 14%  1%
[libx264 @ 0x242d8c0] kb/s:279.82 
```

## 编辑：

一位同事能够查看“损坏”的文件。我的电脑和他的唯一区别是他有一台 Mac。相同的 flash 版本，相同的 JW Player 版本。这有些不对劲。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:29:08.860

首先，不要将 h.264 视频放入 FLV 容器中。这不是一个很好的选择。可能会发生各种各样的怪事。使用 mp4 容器，其中 h264 自然就在家里。

其他建议/问题：

*   删除或更改`crf`值，看看是否有区别
*   放弃覆盖，它有什么不同吗？
*   当您更新 FFmpeg 时，您是否也更新了 x264？
*   放弃超快预设，看看它是否有所作为
*   以 v: 作为基线的前缀，正如 FFmpeg 在 2011 年末的某个时候所要求的那样（我认为）。

从您的输出：

```
Please use -profile:a or -profile:v, -profile is ambiguous 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T15:24:43.503

似乎罪魁祸首是帧率。通过一些神奇的事情，生成的视频的帧速率约为 1000。使用`-r 30`似乎已经解决了这个问题。

# visual-studio-2010 - web.config的改造

> ID：10617294
> 
> 赞同：0
> 
> 时间：2012-05-16T11:09:18.793
> 
> 标签：visual-studio-2010, web-config, web-config-transform

我在一个大型的 asp.net 实体框架 Web 应用程序上工作，其中包含很多 EDMX（实际上是 10 个，后来超过 30 个）。每个 EDMX 都有自己的连接字符串。当我部署我的应用程序时，我想更改这些连接字符串。我可以用

```
xdt:Transform="Replace" 
```

但我需要的是只替换属性“connectionString”的一部分。

如果我的连接字符串是：

```
 <add name="DemosEntities" connectionString="metadata=res://*/Demos.csdl|res://*/Demos.ssdl|res://*/Demos.msl;provider=Devart.Data.Oracle;provider connection string=&quot;User Id=user;Password=password;Home=OraClient11g_home1;Data Source=VDN131DEV15;Persist Security Info=True;ClientId=CLOEE2&quot;" providerName="System.Data.EntityClient" /> 
```

我只想在我的**所有**连接字符串上用另一个字符串替换 VDN131DEV15。

可以通过 web.config 转换吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:01:17.090

没有定义允许您替换属性值的一部分而不是整个值的转换操作。

我认为您需要编写一个自定义构建任务来将 xslt 应用于文件才能执行您想要的操作。

# javascript - 无法根据 z 索引使 iframe 内容与相邻 div 重叠

> ID：10617295
> 
> 赞同：0
> 
> 时间：2012-05-16T11:09:19.857
> 
> 标签：javascript, html, css

我有一个具有鼠标悬停功能的 iframe，在鼠标悬停时显示面板，我想为该面板提供最高的 z-index，因为我希望它与页面中的所有其他元素重叠

但我不能这样做，因为面板 z:index 被信任到它的页面（iframe 页面）而不是包含 iframe 的父页面，所以每当它在触及周围的 div 时溢出，这里就是我的那个 iframe 的 HTML：

```
<div class="center_content" style="width:60% z-index:100">

  <div class="mainBar" style="position:relative;top:30px;">
 <iframe src="calender.aspx" width="100%" height="100%"  frameborder="0"  >                                      </iframe>
   </div> 
```

以下是一些屏幕截图，以便更好地理解： ![无溢出](../Images/dad65c1212d65cdd67c2dee595ce5a86.png) ![无溢出](../Images/a0fc710bbefafb96651a8816330bf599.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:14:08.803

不幸的是，您不能使工具提示在`iframe`iframe 边界内重叠并使其在其父元素上也可见

我认为您需要检查该叠加层的位置并以不同方式对齐

# jquery - 复选框图像在浏览器后退按钮上重置

> ID：10617296
> 
> 赞同：1
> 
> 时间：2012-05-16T11:09:26.550
> 
> 标签：jquery, checkbox

我正在使用自定义图像来显示复选框并隐藏真正的复选框。我的表单有 2 个部分，所以如果我选择了复选框，然后转到表单的下一部分/页面，然后单击浏览器的后退按钮，隐藏的复选框仍然被选中，但是图像/类被重置所以它似乎未选中复选框。

```
var $checkStyle    = $('<span class="check-style"></span>'),
    $product       = $('.productBox'),
    $checkBox      = $('#webform-client-form-18070 .form-checkbox');

    $checkBox.hide();
    $checkStyle.appendTo('.selectCheck');

    $product.click(function(){
        var $this        = $(this),
            $checkSingle = $this.find('.check-style'),
            $checkbox    = $this.find(':checkbox');

        $checkSingle.toggleClass('check-style-selected');
        $checkbox.attr('checked', !$checkbox.attr('checked'));
}); 
```

.check-style-selected 类显示选中的复选框图像。单击浏览器后退按钮时，如何将该类保留在元素上？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:14:58.483

为什么不：

```
$(":checkbox").each(function(){
    if ($(this).is(":checked") { 
       $(this).addClass("checked")
   } else { $(this).addClass("unchecked") }
}) 
```

# java - 在 Eclipse 中为 java 安装 LDAP sdk

> ID：10617301
> 
> 赞同：-4
> 
> 时间：2012-05-16T11:09:48.227
> 
> 标签：java, android, eclipse, ldap, unboundid-ldap-sdk

建议我为 java(eclipse) 安装未绑定的 LDAP sdk 以在 android 应用程序中运行的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:07:13.047

在 Eclipse 中，您只需右键单击您的项目，选择“Build Path”->“Configure Build Path...”，然后转到“Libraries”选项卡。如果您在工作区的某处有 LDAP SDK jar，则单击“添加 JAR...”；否则单击“添加外部 JAR...”，然后选择 LDAP SDK jar。

完成此操作后，您应该会在类路径上的 jar 列表中看到 unboundid-ldapsdk-se.jar。虽然仍在“配置构建路径...”窗口中，但如果单击 jar 上的箭头将其展开，您会看到它让您配置“源附件”。点击它，点击“Edit...”，然后选择 LDAP SDK 附带的 src.zip。这会附加源代码（和 javadoc），以便在您使用 LDAP SDK API 进行编程时自动显示。

此外，您可能想查看 LDAP SDK 的[Minimal Edition](http://www.unboundid.com/products/ldap-sdk/)，它是一个精简版，它仍然具有所有关键功能，但保留了一些可选的东西以减小 jar 文件的大小（因此使用它的任何应用程序的大小）。

# css - 在 Compass 中使用数据 URI 的新 Bulletproof @font-face 语法

> ID：10617306
> 
> 赞同：9
> 
> 时间：2012-05-16T11:10:05.643
> 
> 标签：css, font-face, compass-sass, sass

我将 compass 的`font-face`mixin 与`inline-font-files`and一起使用`font-files`，以便使用 woff、ttf 和 otf 文件的数据 URI 创建符合The New [Bulletproof](http://en.wikipedia.org/wiki/Data_URI_scheme) [@Font-Face Syntax的内容。](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

我将相对 URL 用于 eot（由于 IE 不支持数据 URI）和 svg 文件（由于我猜是 #FontName 哈希）。eot 文件没有问题，因为它有一个参数，但是因为`font-face`在 Compass 中，svg 与其他格式没有什么不同，所以我根本不能`inline-font-files`用来包含字体数据，因为这也会使 svg 版本内联。

有没有办法让`font-face`返回类似于以下内容：

```
@font-face {
    font-family: 'PTSans';
    src: url('pts55fwebfont.eot');
    src: url('pts55fwebfont.eot?#iefix') format('embedded-opentype'),
         url('data:WOFF_DATA') format('woff'),
         url('data:TTF_DATA') format('truetype'),
         url('pts55fwebfont.svg#PTSansRegular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

问题是我无法弄清楚如何让 woff、otf 和 ttf 版本使用数据 URI，同时仍然允许 svg 版本使用标准 URL。我想出的最好的是：

```
@include font-face('PTSans', inline-font-files('ptsans/pts55fwebfont.woff', woff, 'ptsans/pts55fwebfont.ttf', truetype), 'ptsans/pts55fwebfont.eot', normal, normal);
@include font-face('PTSans', font-files('ptsans/pts55fwebfont.svg#PTSansRegular'), $weight: normal, $style: normal); 
```

这会将 svg 分解为自己的@font-face。我可以使用不同的权重和样式创建多个具有相同姓氏的@font-face 规则的同一帐户上的有效 CSS 是否有效？如果是这种情况，它会像上面的示例 CSS 一样好用吗（看起来）？而且，当然，有没有更好的方法在 Compass/sass 中实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T11:11:09.870

对于那些感兴趣的人，问题中提到的解决方法似乎效果很好。将 eot 文件属性从数据 URI @font-face 规则移动到使用标准`url()`. 有时会出现数据：生成的 URL 太长，这违反了整个 @font-face 规则。此外，请确保最后加载数据 URI 规则，因为 Firefox 5 及更高版本似乎只加载遇到的最后一条规则。因此，将内联字体（woff、ttf、otf）保留在最后一条规则中，将链接字体（svg、eot）保留在第一条规则中，如下所示：

```
@include font-face('PTSans', font-files('ptsans/pts55fwebfont.svg#PTSansRegular') 'ptsans/pts55fwebfont.eot', normal, normal);
@include font-face('PTSans', inline-font-files('ptsans/pts55fwebfont.woff', woff, 'ptsans/pts55fwebfont.ttf', truetype), $weight: normal, $style: normal); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T02:13:33.273

更新。我确实使用了来自 Bourbon mixin 网站的一个很棒的小 mixin：

```
// Bourbon Mixin for top notch webfont support: https://github.com/thoughtbot/bourbon/blob/master/app/assets/stylesheets/addons/_font-face.scss
@mixin font-face($font-family, $file-path, $weight: normal, $style: normal ) {
  @font-face {
      font-family: $font-family;
      src: url('#{$file-path}.eot');
      src: url('#{$file-path}.eot?#iefix') format('embedded-opentype'),
           url('#{$file-path}.woff') format('woff'),
           url('#{$file-path}.ttf') format('truetype'),
           url('#{$file-path}.svg##{$font-family}') format('svg');
      font-weight: $weight;
      font-style: $style;
  }
}

// Bourbon Mixin webfont setup: http://thoughtbot.com/bourbon/#font-face
@include font-face(ProximaNova, 'fonts/proximanova_semibold_macroman/ProximaNova-Sbold-webfont');
@include font-face(ProximaNova, 'fonts/proximanova_bold_macroman/ProximaNova-Bold-webfont', bold);
@include font-face(ProximaNova, 'fonts/proximanova_semibolditalic_macroman/ProximaNova-SboldIt-webfont', normal, italic); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:40:24.923

对于某些格式的数据 URI:s 和其他格式的 http 加载，这个 mixin 非常适合我的需求：

```
@mixin fontspring-font-face($family, $file, $svg_hash: $file, $weight: false, $style: false) {

    @font-face {
        font-family: quote($family);
          src: font-files("#{$file}.eot");
          src: font-files("#{$file}.eot?#iefix") format('eot'), inline-font-files("#{$file}.woff", woff, "#{$file}.ttf", truetype), font-files("#{$file}.svg##{$svg_hash}") format('svg');

          @if $weight {
              font-weight: $weight;
          }
          @if $style {
              font-style: $style;
          }
    }
} 
```

**编辑**：我可能应该补充一点，生成的 CSS 倾向于在 IE 中中断。很可能是由于 inline-font-files 包含的文件太大，导致无效`url(data:)`值，进而导致整个`src`属性无效。将数据 URI 版本保存在单独的 css 指令中似乎是最好的解决方案。

# javascript - 渲染和删除多个视图...

> ID：10617312
> 
> 赞同：0
> 
> 时间：2012-05-16T11:10:21.160
> 
> 标签：javascript, backbone.js, backbone-views

我希望我足够清楚，否则请我澄清。
我想删除与主模板一致的最终创建视图...</p>

我确实尝试了以下实现，但没有成功。

```
 // main-template.html

   <div id=""project>
     <div class="main-template">
        <div id="view1"></div>
        <div class="foldable-block">
            <div id="view2"></div>
            <div id="view3"></div>       
        </div>
     </div>
   </div> 
```

* * *

```
//mainView.js
define([
    "js/views/view1",
    "js/views/view2",
    "js/views/view3",
    "text!templates/main-template.html"
], function (View1, View2, View3, mainTemaplte) {

    var MainView = Backbone.View.extend({

        initialize: function ()
        {
            this.$el.html(Mustache.render(mainTemaplte));
            this.render();
        },

        el: $("#project"),

        render: function ()
        {
            var options = this.options;

            this.view1 = new View1(options);
            this.view2 = new View2(options);
            this.view3 = new View3(options);
        }
    });    

    return MainView;
}); 
```

* * *

```
//view1.js
define([… ], function (..) {

    var View1 = Backbone.View.extend({

         el: $("#view1"),

         initialize: function () {
             console.log(this.$el) // []
             setTimeout( function () {
                    console.log(this.$el) // []
             }, 2000);
         }

    });

    return View1;

}); 
```

您可以从评论中看到的问题在`view1.js`

```
(this.$el) // [] 
```

从我的 js 控制台它可以工作：

```
$("#view1") // <div>….</div> 
```

我的目标是：
1）当我加载 mainView.js 模块时，我想创建一个模板来附加我的视图（view1、view2、view3）
2）当我触发删除视图时，每个 DOM 都附加了视图, 应该删除。
3）当我再次调用`mainView.js`模块时，应该重新创建模板。

如果您有其他想法要建议，请发表。

* * *

感谢@nikoshr 建议`this.$el`，在`view1.j`, 中定义了，当我在中调用渲染时，`view1.js`它被`this.$el`正确填充，
但它没有附加到文档正文。
如何在不使用 append 或类似的 jquery 方法的情况下实现它`main-template.html`？

这是我的渲染功能：

```
 render: function () 
    {
         this.$el.html(Mustache.render(myTemplate, this.view);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:21:28.900

您正在将子视图附加到您需要它们时不存在的元素。这样的事情可能是朝着正确方向迈出的一步：

**主视图.js**

```
define([
    "js/views/view1",
    "js/views/view2",
    "js/views/view3",
    "text!templates/main-template.html"
], function (View1, View2, View3, mainTemaplte) {

    var MainView = Backbone.View.extend({

        initialize: function ()
        {
            this.render();
        },

        render: function ()
        {
            // render from template and assign this.el to the root of the element
            // e.g #project
            var html=Mustache.render(mainTemaplte);
            this.setElement( $(html) );

            // create each view with its el set to the correct descendant
            this.view1 = new View1( _.extend( {el:this.$("#view1")} , this.options) );
            this.view2 = new View2( _.extend( {el:this.$("#view2")} , this.options) );
            this.view3 = new View3( _.extend( {el:this.$("#view3")} , this.options) );
        }
    });    

    return MainView;
}); 
```

**view1.js**

```
define([… ], function (..) {

    var View1 = Backbone.View.extend({

         initialize: function () {
             console.log(this.$el);
         }

    });

    return View1;
}); 
```

你可以用类似的东西重新创建你的视图

```
require(["js/views/mainView"], function(MainView) {
    var view=new MainView();
    console.log(view.$el);

    //attach  the view to the DOM
    $("body").append(view.$el);
}); 
```

# facebook - Facebook 注销问题

> ID：10617321
> 
> 赞同：0
> 
> 时间：2012-05-16T11:10:38.683
> 
> 标签：facebook

我正在使用以下代码从 Facebook 注销。

```
string url = string.Format("https://m.facebook.com/logout.php?confirm=1&next={0}&access_token={1}", 
                           ConfigurationManager.AppSettings["Facebooklogout"], 
                           token) 
```

笔记 ：

```
ConfigurationManager.AppSettings["Facebooklogout"]="http://localhost:56481/MenUs.Web/REGISTRATION/userinterestgroups.aspx" 
```

但它不是注销，而是将我引导到我的 Facebook 个人资料页面。

请给我一个解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:23:16.633

有[m.facebook.com](http://bugs.developers.facebook.net/show_bug.cgi?id=17217)错误说 next 被忽略。您可以随时使用`https://www.facebook.com/logout`。

此外，您的注销 URL 必须位于您在 Facebook 上注册的应用程序的域中，localhost 将不起作用。

```
string url = string.Format("https://www.facebook.com/logout?confirm=1&next={0}&access_token={1}", 
                       ConfigurationManager.AppSettings["Facebooklogout"], 
                       token) 
```

请注意，注销 URL*必须*与应用程序位于同一域中。所以上面不会重定向到 localhost:xxx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:47:28.440

我很久以前通过单击“保存按钮”使用以下javascript解决了上述问题。

```
<script type="text/javascript">
        function logoutFacebook() {

        }

        window.onload = function () {
            var ID = document.getElementById('hfID').value
            FB.init({ apiKey: ID });
            FB.getLoginStatus(handleSessionResponse);
        }
        function handleSessionResponse(response) {
            FB.logout(handleSessionResponse);
        }
</script> 
```

# ios - IOS：验证一个空的 NSHomeDirectory

> ID：10617322
> 
> 赞同：0
> 
> 时间：2012-05-16T11:10:39.580
> 
> 标签：ios, xcode, home-directory

我可以验证 NSHomeDirectory 中我的文件夹“文档”中是否至少有 1 个文件？

```
NSError *error;
NSFileManager *fileMgr = [NSFileManager defaultManager];

// Point to Document directory
NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];

// Write out the contents of home directory to console
NSLog(@"Documents directory: %@", [fileMgr contentsOfDirectoryAtPath:documentsDirectory error:&error]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:18:13.560

当然！

NSFileManager 的[`contentsOfDirectoryAtPath: error:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/contentsOfDirectoryAtPath%3aerror%3a)方法返回一个数组。

如果它是一个计数为零的数组，则它是一个空目录。

如果它返回错误，则该目录不存在（或者您传入的路径错误）。

# sql - 获取 SqlException，超时错误

> ID：10617323
> 
> 赞同：2
> 
> 时间：2012-05-16T11:10:40.307
> 
> 标签：sql, wpf, sql-server, database

我正在制作一个数据驱动并使用动态数据的 WPF 应用程序。现在通过我本地计算机上的开发过程，一切正常，应用程序和我的本地 sql 服务器运行完美。

现在我所做的是将我的数据库从我的本地机器传输到我的服务器，通过将数据库复制并粘贴到我的远程服务器上的 SqlServer DATA 文件夹中。现在我可以很好地连接到服务器，并且我确保在 Visual Studio 中测试连接字符串以确保它连接，当我单击“测试连接”时，它表示连接成功。

但是现在当我尝试使用位于远程的数据库运行应用程序时，出现错误：

> Sql 异常，超时已过期。在操作完成之前超时时间已过或服务器没有响应。

我觉得这很奇怪，因为 10 分钟前它在我的本地机器上运行良好，所以我认为这一定是我在远程服务器上的设置或其他什么？

另外我正在使用 LINQ to SQL，我什至尝试编辑 LINQ to SQL 类（dbml 文件）并增加超时等，但仍然得到完全相同的错误。我不明白我做错了什么。因为整个事情不久前还在我的本地机器上运行......

任何想法是什么问题或我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:16:43.287

此错误通常是由于服务器和客户端之间的连接问题。网络可能有问题。确保可以从应用程序机器访问数据库服务器，并且没有防火墙阻止连接。

# java-me - 在 LWUIT 中更改命令菜单背景

> ID：10617326
> 
> 赞同：0
> 
> 时间：2012-05-16T11:10:56.403
> 
> 标签：java-me, menu, command, lwuit

我们可以改变`Command`LWUIT 中菜单的背景颜色吗？

以及如何将图标设置为生成的“菜单” `Command`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T18:49:35.670

我将尝试比其他帖子更好地解释。您可以使用和 UIID 更改菜单的样式。有两种方法可以做到这一点。

简单的方法。使用 LWUIT 资源编辑器并在 Unselected 选项卡中创建，UIID 称为 Menu。在此 UIID 中，您应该根据需要配置背景颜色。您可以更改更多内容（例如文本颜色、字体大小等）

很难，通过代码。创建一个`Style`对象并将其设置为菜单。

# javascript - 如何在同一页面中浏览和显示图像？

> ID：10617327
> 
> 赞同：1
> 
> 时间：2012-05-16T11:10:59.480
> 
> 标签：javascript, html, css, forms

我有一个很小的疑问。我有一个 html 标签来浏览文件。当我从本地服务器浏览文件时，我想将该路径设置为图像标签的源。是否可以实施？

我编写了这样的代码。

```
<form name="image" id="image" enctype="multipart/form-data" action="" method="post">

   <input type="file" name="img" />
   <img src=""></img>

</file> 
```

因此，当我从本地服务器浏览并选择文件时，该路径应设置为图像标签。我的目的是浏览图像并将其显示在该页面本身中。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:30:35.340

您需要的是客户端文件的完整路径 - 这是不允许的（另请参见此[线程](https://stackoverflow.com/questions/1635329/how-to-get-full-path-from-fileupload-using-javascript)）。

对不起，伙计，但如果不将文件发送到服务器，除了获取文件名（而不是路径）、文件类型和文件大小之外，您无法对其进行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:15:44.837

浏览器现在允许您从 input[type=file] 标签访问文件的路径*很长一段*时间。你不能像你试图做的那样简单地做。为了实现在用户选择文件后显示文件的目标，您实际上需要将其上传到您的服务器。这通常需要页面刷新，但是有很多可用的 javascript 库可以在不刷新页面的情况下实现它。文件上传后，您可以“ping back”一个 URL 以查看图像，并将其加载到您的图像标签中。

我最近用来进行内联文件上传的 jQuery 库是[jQuery File Upload](https://github.com/blueimp/jQuery-File-Upload)

# ruby-on-rails - 关于在 Ruby on Rails 中删除一对一关系

> ID：10617329
> 
> 赞同：2
> 
> 时间：2012-05-16T11:11:01.303
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我有一个关于一对一关系的问题 我有一个模型

```
Car 
 has_one:company 
```

和

```
Company:
  belongs_to:car 
```

因此，我在 Company 模型中有 car_id 列。因此，当为特定公司创建新车并传递参数时，car_id 值会自动更新为新创建的 car_id。
但是，当我销毁或删除特定汽车时，相应公司的 car_id 不会更新为 nil。它保持原样，这是不可取的，因为不存在这样的 car_id。当我想将相应公司的 car_id 字段更改为 nil 时删除特定的汽车。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:17:24.480

```
class Car
    has_one :company, :dependent => :nullify
end 
```

这应该将公司表中的 car_id 设置为空。但是，我想知道这个关联是否应该是 has_one_through 而不是 has_one。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:18:03.053

```
 Car 
    has_one:company, :dependent => :nullify 
```

这会做到的

# uinavigationcontroller - UINavigationBar 中的 UISearchBar 在旋转方向时改变宽度

> ID：10617330
> 
> 赞同：1
> 
> 时间：2012-05-16T11:11:12.807
> 
> 标签：uinavigationcontroller, uisplitviewcontroller, uisearchbar, uibarbuttonitem

这真让我抓狂。我正在 iPad 上创建一个拆分视图应用程序。

我在 UINavigationBar 内创建了一个 searchBar - 像这样的东西......

```
UISearchBar *searchBar = [[UISearchBar alloc] initWitFrame:CGRectZero];
[searchBar setPlaceHolder:@"Search"];
[searchBar sizeToFit];
[searchBar setDelegate:self];
[self.navigatioItem setTitleView:searchBar]; 
```

这对我这样显示 UISearchBar 来说很好......

![在此处输入图像描述](../Images/3dfa19261f81096b35e4716da080a9e0.png)

我还设置了这个 UIBarButtonItem 以在侧窗格中显示主导航控制器。

当设备旋转到横向并且 UIBarButtonItem 被隐藏时，就会出现问题。然后 searchBar 看起来像这样......

![在此处输入图像描述](../Images/172eb407eb7bd15fd94f012b9fe1cd3b.png)

由于 barButtonItem 被隐藏并且搜索栏的大小无法更新，因此两侧似乎存在一些空间。

此外，当我再次旋转设备时，UISearchBar 会发生以下情况

![在此处输入图像描述](../Images/cb6b388c7d877af6124bf504d22d90e6.png)

将搜索栏添加到 UINavigationBar 后如何更新其大小。即使使用 autoResizingMask 也不起作用。

```
searchBar.autoResizingMask =UIViewAutoresizingFlexibleWidth; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:25:23.667

我遇到了同样的问题（不是搜索栏，而是一些 UIView），这就是我解决它的方法：

尝试使用不会改变的固定大小创建它。我的意思是，如果您的导航栏最小尺寸是（例如）320pt，而 barbutton 大约是 30pt，并且您需要将搜索栏放在中间（顺便说一句，这不是标准的，AFAIK），您必须将其设为 320 - (30+10)*2 = 240 点。搜索栏将被放置在中间，并且将有足够的空闲空间。

这样它既不会改变它的大小，也不会影响其他项目。

或者我建议你把它放在正确的位置，而不是中间。

希望它有所帮助。

# plsql - PL/SQL: 数字或值错误%s 将字符转换为数字时出错

> ID：10617331
> 
> 赞同：0
> 
> 时间：2012-05-16T11:11:15.080
> 
> 标签：plsql

我有一个 pl/sql 匿名块的问题。虽然我可以显示通过选择查询获得的变量，但如果我在更新语句中使用它会出现转换错误。

我的代码如下所示：

```
set serveroutput on

DECLARE

var1 scheme.table.column1%type; /* number[8,0] */
var2 scheme.table.column2%type; /* number[8,2] */

BEGIN

/* return simple value */
select t.column1, t.column2
into var1, var2
from scheme.table t
where <condition>

DBMS_OUTPUT.PUT_LINE('Var1 is: ' || var1 || ' Var2 is:' || var2); /* fine!!*/

update scheme.table
set scheme.table.column1 = var1 + 1
where scheme.table.column2 = var2; /* that is line error*/

END;

/*
ORA-06502: PL/SQL: error : error de conversión de carácter a número numérico o de valor
ORA-06512: en línea 58
06502\. 00000 -  "PL/SQL: numeric or value error%s"
*/ 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:17:54.687

对于 column2=val2 的记录，var1+1 是否会导致一个大于 number[8,0] 的数字？

您使用“条件”进行查询，但使用“column2=var2”进行更新。因此，您更新的行可能比您想象的要多得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:05:56.960

代码正确，编译器问题，sqldeveloper。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:19:34.967

ORA-06502 PL/SQL：数字或值错误字符串原因：发生算术、数字、字符串、转换或约束错误。例如，如果尝试将值 NULL 分配给声明为 NOT NULL 的变量，或者尝试将大于 99 的整数分配给声明为 NUMBER(2) 的变量，则会发生此错误。行动：改变数据，它是如何被操纵的，或者它是如何被声明的，这样值就不会违反约束。

**我认为你的错误是第二选择。**

[参考你错误 ORA-06502](http://ora-06502.ora-code.com/)

# c# - 如何显示 Windows 登录对话框？

> ID：10617337
> 
> 赞同：4
> 
> 时间：2012-05-16T11:11:56.520
> 
> 标签：c#, .net, wpf, windows, winapi

**如何在 Windows WPF**应用程序中显示 Windows 登录对话框？

![登录对话框](../Images/d4640c63dcc607bbb74622e91b648e24.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T11:23:33.307

我为此写了一个助手类。它显示“XP Style”登录对话框，而不是您在屏幕截图中显示的那个，但您也可以从那里继续显示“新”对话框：

```
public static class UserHelper
{
    [Flags]
    public enum CREDUI_FLAGS
    {
        INCORRECT_PASSWORD = 0x1,
        DO_NOT_PERSIST = 0x2,
        REQUEST_ADMINISTRATOR = 0x4,
        EXCLUDE_CERTIFICATES = 0x8,
        REQUIRE_CERTIFICATE = 0x10,
        SHOW_SAVE_CHECK_BOX = 0x40,
        ALWAYS_SHOW_UI = 0x80,
        REQUIRE_SMARTCARD = 0x100,
        PASSWORD_ONLY_OK = 0x200,
        VALIDATE_USERNAME = 0x400,
        COMPLETE_USERNAME = 0x800,
        PERSIST = 0x1000,
        SERVER_CREDENTIAL = 0x4000,
        EXPECT_CONFIRMATION = 0x20000,
        GENERIC_CREDENTIALS = 0x40000,
        USERNAME_TARGET_CREDENTIALS = 0x80000,
        KEEP_USERNAME = 0x100000,
    }

    public enum CredUIReturnCodes
    {
        NO_ERROR = 0,
        ERROR_CANCELLED = 1223,
        ERROR_NO_SUCH_LOGON_SESSION = 1312,
        ERROR_NOT_FOUND = 1168,
        ERROR_INVALID_ACCOUNT_NAME = 1315,
        ERROR_INSUFFICIENT_BUFFER = 122,
        ERROR_INVALID_PARAMETER = 87,
        ERROR_INVALID_FLAGS = 1004,
        ERROR_BAD_ARGUMENTS = 160
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    public struct CREDUI_INFO
    {
        public int cbSize;
        public IntPtr hwndParent;
        public string pszMessageText;
        public string pszCaptionText;
        public IntPtr hbmBanner;
    }

    [DllImport("credui", EntryPoint = "CredUIPromptForCredentialsW", CharSet = CharSet.Unicode)]
    private static extern CredUIReturnCodes CredUIPromptForCredentials(ref CREDUI_INFO creditUR, string targetName, IntPtr reserved1, int iError, StringBuilder userName, int maxUserName, StringBuilder password, int maxPassword, [MarshalAs(UnmanagedType.Bool)] ref bool pfSave, CREDUI_FLAGS flags);

    [DllImport("credui", EntryPoint = "CredUIParseUserNameW", CharSet = CharSet.Unicode)]
    private static extern CredUIReturnCodes CredUIParseUserName(string userName, StringBuilder user, int userMaxChars, StringBuilder domain, int domainMaxChars);

    const int MAX_USER_NAME = 100;
    const int MAX_PASSWORD = 100;
    const int MAX_DOMAIN = 100;

    public static CredUIReturnCodes PromptForCredentials(System.Windows.Window parentWindow, ref CREDUI_INFO creditUI, string targetName, int netError, out string domainName, out string userName, out string password, ref bool save, CREDUI_FLAGS flags)
    {
        userName = String.Empty;
        domainName = String.Empty;
        password = String.Empty;

        creditUI.cbSize = Marshal.SizeOf(creditUI);
        creditUI.hwndParent = new WindowInteropHelper(parentWindow).Handle;

        StringBuilder user = new StringBuilder(MAX_USER_NAME);
        StringBuilder pwd = new StringBuilder(MAX_PASSWORD);
        CredUIReturnCodes result = CredUIPromptForCredentials(ref creditUI, targetName, IntPtr.Zero, netError, user, MAX_USER_NAME, pwd, MAX_PASSWORD, ref save, flags);
        if (result == CredUIReturnCodes.NO_ERROR)
        {
            string tempUserName = user.ToString();
            string tempPassword = pwd.ToString();

            StringBuilder userBuilder = new StringBuilder();
            StringBuilder domainBuilder = new StringBuilder();

            CredUIReturnCodes returnCode = CredUIParseUserName(tempUserName, userBuilder, int.MaxValue, domainBuilder, int.MaxValue);
            switch (returnCode)
            {
                case CredUIReturnCodes.NO_ERROR:
                    userName = userBuilder.ToString();
                    domainName = domainBuilder.ToString();
                    password = tempPassword;
                    return returnCode;

                case CredUIReturnCodes.ERROR_INVALID_ACCOUNT_NAME:
                    userName = tempUserName;
                    domainName = String.Empty;
                    password = tempPassword;
                    return returnCode;

                default:
                    return returnCode;
            }
        }

        return result;
    }
} 
```

我使用以下方法调用它：

```
UserHelper.CREDUI_INFO info = new UserHelper.CREDUI_INFO();
info.pszCaptionText = host;
info.pszMessageText = "Please log in:";

UserHelper.CREDUI_FLAGS flags = UserHelper.CREDUI_FLAGS.GENERIC_CREDENTIALS |
                                UserHelper.CREDUI_FLAGS.ALWAYS_SHOW_UI |
                                UserHelper.CREDUI_FLAGS.DO_NOT_PERSIST |                                               
                                UserHelper.CREDUI_FLAGS.VALIDATE_USERNAME |
                                UserHelper.CREDUI_FLAGS.INCORRECT_PASSWORD;

UserHelper.CredUIReturnCodes result = UserHelper.PromptForCredentials(this, ref info, host, 0, out domainName, out userName, out password, ref saveSettings, flags); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T11:16:02.087

看起来类似于[Windows Vista/7 的 C# 中的 Show Authentication 对话框](https://stackoverflow.com/questions/4134882/show-authentication-dialog-in-c-sharp-for-windows-vista-7)

[CredUIPromptForWindowsCredentials](http://msdn.microsoft.com/en-us/library/aa375178)

# google-apps-script - ScriptProperties 是如何工作的？

> ID：10617338
> 
> 赞同：0
> 
> 时间：2012-05-16T11:11:59.083
> 
> 标签：google-apps-script

我想使用 ScriptProperties，但它给了我一个页面错误。我的整个脚本不会运行。还有什么我需要做的吗？

```
 if(ScriptProperties.getProperty('smnumCounter')== null)ScriptProperties.setProperty('smnumCounter','1');
  var smnumValue = parseInt(ScriptProperties.getProperty('smnumCounter'));
    smnumValue++;
    ScriptProperties.setProperty('smnumCounter', smnumValue.toString());

  var smnumValue2 = ScriptProperties.getProperty('smnumCounter'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:12:14.867

您在代码中的某处有语法错误。当我尝试将 Ui 元素添加到应用程序时，就会发生这个确切的错误，例如`app.add(label);`何时`label`不再是 Ui 元素。（我忘记更改/删除的代码）。我看到的 ScriptProperties 代码没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:30:58.273

你的代码对我来说非常好。

# android - Android如何将文本形式的JSON Feed添加到懒惰的适配器中

> ID：10617341
> 
> 赞同：1
> 
> 时间：2012-05-16T11:12:23.693
> 
> 标签：android, text, lazy-loading

嗨，我目前在图像中加载了一个惰性适配器，现在我想添加文本以与图像一起使用。它目前说项目 0 项目 1 等。我有一个 Json Feed，我想用它来替换它。所以我的问题真的是如何更改惰性适配器中的文本并将其替换为arrayList？

继承人我到目前为止。

```
try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","newsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("news");

           for(int t = 0; t < newsAmount; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);
               imageList.add(newsTitleDict.getString("image_small"));
             newsList3.add(newsTitleDict.getString("title"));

           }

           for(int t = 0; t < 1; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

             newsList.add(newsTitleDict.getString("title"));
             newsList2.add(newsTitleDict.getString("title"));

           }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
    arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.single_item, newsList2);
    //arrayAdapter3 = new ArrayAdapter(this, R.layout.complex_item, newsList3);

     String[] mStrings = (String[]) imageList.toArray(new String[imageList.size()]);

     arrayAdapter3 = new LazyAdapter(this, mStrings);

        ListView list = getListView();
           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
            View header = inflater.inflate( R.layout.homeheader, list, false);
            View header2 = inflater.inflate( R.layout.homeheader2, list, false);
            View header3 = inflater.inflate( R.layout.homeheader3, list, false);

    //setListAdapter (arrayAdapter);

        adapter = new MergeAdapter();
        adapter.addView(header);
        adapter.addAdapter(arrayAdapter);
        adapter.addView(header2);
        adapter.addAdapter(arrayAdapter2);
        adapter.addView(header3);
        adapter.addAdapter(arrayAdapter3);
        setListAdapter(adapter);

    } 
```

惰性适配器

```
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private String[] data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, String[] d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);;
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        text.setText("item "+position);
        imageLoader.DisplayImage(data[position], image);
        return vi;
    }
} 
```

# python - 将多个像素图显示到滚动区域中的最有效方法是什么？

> ID：10617342
> 
> 赞同：1
> 
> 时间：2012-05-16T11:12:24.590
> 
> 标签：python, pdf, qt4, poppler, pixmap

我正在尝试使用 PyQt4 和 python-poppler-qt4 制作一个显示 PDF 文件的应用程序。

到目前为止，我已经设法通过加载使用 Poppler 生成的像素图来显示整个文档，在 QLabel 上设置并附加到 QFrame。QFrame 显示在 QScrollArea 中。

它看起来相当不错，直到实现缩放，这是通过重新生成像素图来完成的，分辨率增加了。此过程需要将整个文档呈现为像素图，这显然需要时间并导致不必要的延迟。

逻辑希望我应该只显示我所看到的页面的图像（这听起来像量子物理学）。我有两个选择：

1.  使用 QLabels 创建空白页面，并在它们在滚动区域中可见时将图像加载到它们上；
2.  只创建一个页面并在它应该显示之前添加或删除先例或后续页面。

我不确定我是否走在正确的轨道上，或者是否有替代方案。

第一个选项似乎更可行，因为空白页面的可见性决定了何时必须上传像素图（尽管我不知道如何在页面隐藏时删除该像素图）。然而，我不确定这样缩放会更快，因为必须重新生成一个 600 页的文档，尽管有空白页。

第二个选项肯定会改进缩放，因为缩放时必须一次重新生成 1 到 4 页。然而，在第二种情况下，我不确定如何触发页面的构建。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:38:33.343

`QLabel`忘记s直接画图不是很简单吗：

```
from PyQt4.QtGui import *
import sys

app = QApplication(sys.argv)

class Test(QWidget):

    def __init__(self):
        super(Test, self).__init__()
        self.painter = QPainter()
        # placeholder for the real stuff to draw
        self.image = QImage("/tmp/test.jpg")

    def paintEvent(self, evt):
        rect = evt.rect()
        evt.accept()
        print rect
        self.painter.begin(self)
        zoomedImage = self.image   # ... calculate this for your images
        sourceRect = rect          # ... caluclate this ...
        # draw it directly
        self.painter.drawImage(rect, self.image, sourceRect)
        self.painter.end()

t = Test()
t.setGeometry(0,0,600,800)

s = QScrollArea()
s.setWidget(t)

s.setGeometry(0,0,300,400)
s.show()
app.exec_() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T03:53:12.000

我已经制定了一个答案，在问题中使用选项 1：

```
def moveEvent(self, event):
    self.checkVisibility()
    event.ignore()

def resizeEvent(self, event):
    self.checkVisibility()
    event.ignore()

def checkVisibility(self):
    print "Checking visibility"
    for page in self.getPages():
        if not page.visibleRegion().isEmpty():
            if page.was_visible:
                pass
            else:
                print page.page_number, "became visible"
                page.was_visible = True
                self.applyImageToPage(page)
        else:
            if page.was_visible:
                print page.page_number, "became invisible"
                page.was_visible = False
            else:
                pass
def applyImageToPage(self, page):
    print "applying image to page", page.page_number
    source = self.getSourcePage(self.getPageNumber(page))
    scale = self.display.scale
        # this is where the error occurs
    image = source.renderToImage(72 * scale, 72 * scale)
    pixmap = QtGui.QPixmap.fromImage(image)
    page.setPixmap(pixmap) 
```

# mysql - UTC 中的 MySql 日志时间

> ID：10617348
> 
> 赞同：2
> 
> 时间：2012-05-16T11:12:51.503
> 
> 标签：mysql, logging, time, utc

如何强制 MySql 以 UTC 格式将时间写入其错误日志？默认情况下是本地时间。有可能改变它吗？

我会很感激你的想法。

# php - 如何使用 PHPexcel 显示 xls 文件的工作表名称？

> ID：10617351
> 
> 赞同：1
> 
> 时间：2012-05-16T11:13:00.023
> 
> 标签：php, phpexcel

如何使用 PHPexcel 显示 xls 文件的工作表名称？

```
$objWorksheet = $objPHPExcel->setActiveSheetIndex(0); ??? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:29:35.583

```
$objPHPExcel->getSheetNames(); 
```

将返回所有工作表名称的列表

```
$objWorksheet->getTitle(); 
```

将返回 $objWorksheet 中的工作表名称

**编辑**

如何按名称/标题访问工作表：

```
$objWorksheet = $objPHPExcel->getSheetByName('Worksheet1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-28T04:34:47.430

它返回数组中的所有工作表

```
 $this->load->library('PHPExcel/Classes/PHPExcel');
    $excelReader = PHPExcel_IOFactory::createReaderForFile($fileTempName);
    $excelObj = $excelReader->load($fileTempName);
    //$worksheet = $excelObj->getSheet(0);
    $worksheet = $excelObj->getSheetNames();

    echo "<pre>";
    print_r($worksheet);
    die; 
```

# php - PHP - 删除一个数组层

> ID：10617352
> 
> 赞同：0
> 
> 时间：2012-05-16T11:13:05.860
> 
> 标签：php, arrays, multidimensional-array

我有一个简单的 PHP 函数，它将根据唯一 ID 从数据库中获取信息：

```
function oracleGetGata($query, $id="id") {
    global $conn;

    $results = array();
    $sql = OCI_Parse($conn, $query);
    OCI_Execute($sql);
    while ( false!==($row=oci_fetch_assoc($sql)) ) {
        $results[ $row[$id] ] = $row;
    }
    return $results;
} 
```

所以例如`$array = oracleGetData('select * from table')`会返回：

```
[1] => Array
(
    [Title] => Title 1
    [Description] => Description 1
)
[2] => Array
(
    [Title] => Title 2
    [Description] => Description 2
) 
```

这很好，但是，如果我只想返回一条记录`$array = oracleGetData('select * from table where id = 1')`，它会返回如下数据：

```
[] => Array
(
    [Title] => Title 1
    [Description] => Description 1
) 
```

我不仅不确定如何引用它（没有任何标识数组）我还想以某种方式更改我的函数，所以如果它只返回一条记录，它将只是一个简单的一维数组。

我研究了常用的 PHP 数组函数，但找不到任何有用的东西，也找不到确定数组深度的简单方法。

非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:18:09.973

使用[array_pop()](http://php.net/array_pop)：

```
$array = array_pop(oracleGetData('select * from table where id = 1')); 
```

然后你会得到一个数组：

```
Array
(
    [Title] => Title 1
    [Description] => Description 1
) 
```

而不是嵌入另一个数组：

```
Array
(
    [] => Array
    (
        [Title] => Title 1
        [Description] => Description 1
    )
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:15:03.217

我认为您的脚本中存在逻辑错误：

改变

```
$results[ $row[$id] ] = $row; 
```

进入

```
$results[] = $row; 
```

问题是，您希望将数据库键值作为数组键值，但您不知道数据库键，因为您不知道查询会是什么样子。

你可以试试：

```
$results[$row['id']] = $row; 
```

但这仅在您的所有结果都具有名为“id”的数据库键时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:21:48.243

你在函数签名中传递了一个 $id，但在循环中你使用了 $row[$id]，为什么？也许错误就在那里。

如果你想在你的结果集中有一个顺序 id，你不需要使用 $id，你可以使用 array_push() 函数

```
array_push($result, $row); 
```

或者

```
$results[] = $row; 
```

# java - 如何在 Maven 中为某些依赖项定义不同的目标文件夹

> ID：10617359
> 
> 赞同：0
> 
> 时间：2012-05-16T11:13:35.360
> 
> 标签：java, tomcat, maven-2, build

我在 Tomcat 下运行同一个 Web 应用程序的许多实例，为了节省内存，我将一些库复制到 Tomcat 的 lib (tomcat\lib) 和共享 (tomcat\shared) 文件夹中。Tomcat 和 Web 应用程序都可以找到 lib 下的库，共享文件夹下的库只能由 Web 应用程序使用。我的 Web 应用程序还需要一些 Web 应用程序级别的库，因此这些库位于 WEB-INF\lib 下。

我在我的 pom.xml 中定义了大多数库都具有提供的范围，因此它们不会被复制到 WEB-INF\lib，但是有什么方法可以定义我希望某些库在自定义文件夹; 例如 WEB-INF\lib\tomcat\shared 和 WEB-INF\lib\tomcat\lib，我可以从哪里手动将它们移动到服务器上 Tomcat 的相应文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:47:20.273

创建一个单独的 maven 项目，其中包含 war 文件，并将应位于共享文件夹中的依赖项定义为范围：提供。此外，创建一个具有这些依赖关系的另一个单独的模块，并通过 maven-assembly-plugin 从中创建一个适当的存档...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:41:16.183

这并不是真正推荐的打包依赖项的方法，因为通常无需进一步修改 war 文件就可以部署 Web 应用程序。

我认为您可以使用[dependency:copy-dependencies 目标](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)来归档您想要的内容，但这需要一些配置。您必须设置`includeScope`为`provided`，设置正确`outputDirectory`，然后使用`includeGroupIds`or`includeArtifactIds`选项定义工件。

# java - 如何更新主要活动以知道首选项已更改？

> ID：10617363
> 
> 赞同：1
> 
> 时间：2012-05-16T11:13:57.313
> 
> 标签：java, android

我有

```
SharedPreferences myPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()); 
```

和

```
myPreferences.getBoolean("checkbox", true) 
```

那么，我的主要活动如何知道用户何时更改偏好状态？例如，如果用户不想再收到通知。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:23:24.803

您可以重新阅读 中的所有首选项`Activity.onResume()`，或者只要您的主要活动启动首选项活动（例如从菜单中），您就可以启动`startActivityForResult(Intent, int)`并重新阅读 中的所有首选项`onActivityResult(int, int, Intent)`。

我还发现在开始适当的行为之前重新检查每个相关的偏好就足够了（即在`Notification`为您的示例发布之前）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:25:48.073

您需要实现 onSharedPreferenceChangeListener 接口。然后注册以在您的 onCreate/onStart 中接收更改更新：

```
myPreferences.registerOnSharedPreferenceChangeListener(); 
```

在您的听众中，您可以执行以下操作：

```
@Override
public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
if (key.equals("MyKey")) {
    // Do something.
} else if (key.equals("MyOtherKey")) {
    // Do something else.
      }
} 
```

记得在 onStop/onDestroy 中移除监听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:26:16.557

您可以创建一个静态布尔值，只要更改首选项或启动您的首选项活动，该值就会更改。这个布尔值的目的是让你的主要活动知道偏好是脏的，需要重新加载。`onResume`如果`mDirty`标志为真，则应重新加载它们。

另一种选择是重新加载所有首选项`onResume`，无论如何。这可能效率不高，但是如果您没有很多偏好，那也没关系。

最有效的方法是为您的首选项活动中的所有首选项设置 onPreferenceChanged 侦听器，然后首选项仅在实际更改时通知活动。这解决了当您的用户输入您的偏好活动时的情况，但实际上并没有改变任何东西。

# f# - F# 编译器抛出 OutOfMemoryException

> ID：10617364
> 
> 赞同：12
> 
> 时间：2012-05-16T11:13:57.333
> 
> 标签：f#, compiler-errors, out-of-memory, fsc

我使用的项目包含许多从单个基类继承的类。在单元测试中，我需要按类型和数据比较收到的结果。

当我在条件列表包含足够多的不同条件的情况下使用类型*匹配比较时，编译器会抛出 OutOfMemoryException。*

例如，以下 F# 代码在编译期间引发*System.OutOfMemoryException*（参数错误 FS0193）（编译大约需要 30 秒才抛出异常）

```
type IBaseClass() = class end

type IChildClass1 () = inherit IBaseClass () 

type IChildClass2 () = inherit IBaseClass () 

type IChildClass3 () = inherit IBaseClass () 

type IChildClass4 () = inherit IBaseClass () 

type IChildClass5 () = inherit IBaseClass () 

type IChildClass6 () = inherit IBaseClass () 

type IChildClass7 () = inherit IBaseClass () 

type IChildClass8 () = inherit IBaseClass () 

type IChildClass9 () = inherit IBaseClass () 

type IChildClass10 () = inherit IBaseClass () 

type IChildClass11 () = inherit IBaseClass () 

type IChildClass12 () = inherit IBaseClass () 

type IChildClass13 () = inherit IBaseClass () 

type IChildClass14 () = inherit IBaseClass () 

type IChildClass15 () = inherit IBaseClass () 

type IChildClass16 () = inherit IBaseClass () 

type IChildClass17 () = inherit IBaseClass () 

type IChildClass18 () = inherit IBaseClass () 

type IChildClass19 () = inherit IBaseClass () 

type IChildClass20 () = inherit IBaseClass () 

let AreEqual (original: IBaseClass) (compareWith: IBaseClass) : bool =
    match (original, compareWith) with
    | (:? IChildClass1 as a), (:? IChildClass1 as b) -> a = b
    | (:? IChildClass2 as a), (:? IChildClass2 as b) -> a = b
    | (:? IChildClass3 as a), (:? IChildClass3 as b) -> a = b
    | (:? IChildClass4 as a), (:? IChildClass4 as b) -> a = b
    | (:? IChildClass5 as a), (:? IChildClass5 as b) -> a = b
    | (:? IChildClass6 as a), (:? IChildClass6 as b) -> a = b
    | (:? IChildClass7 as a), (:? IChildClass7 as b) -> a = b
    | (:? IChildClass8 as a), (:? IChildClass8 as b) -> a = b
    | (:? IChildClass9 as a), (:? IChildClass9 as b) -> a = b
    | (:? IChildClass10 as a), (:? IChildClass10 as b) -> a = b
    | (:? IChildClass11 as a), (:? IChildClass11 as b) -> a = b
    | (:? IChildClass12 as a), (:? IChildClass12 as b) -> a = b
    | (:? IChildClass13 as a), (:? IChildClass13 as b) -> a = b
    | (:? IChildClass14 as a), (:? IChildClass14 as b) -> a = b
    | (:? IChildClass15 as a), (:? IChildClass15 as b) -> a = b
    | (:? IChildClass16 as a), (:? IChildClass16 as b) -> a = b
    | (:? IChildClass17 as a), (:? IChildClass17 as b) -> a = b
    | (:? IChildClass18 as a), (:? IChildClass18 as b) -> a = b
    | (:? IChildClass19 as a), (:? IChildClass19 as b) -> a = b
    | (:? IChildClass20 as a), (:? IChildClass20 as b) -> a = b
    | _ -> false 
```

当然，我可以将 IEquatable 接口添加到我的 IBaseClass 类中，这将避免使用这种*匹配*构造，或者将*int Kind*成员（或枚举）添加到 IBaseClass 接口并且不是按类型进行*匹配*，而是通过一些 int 值进行匹配。

请注意，我尝试在 MS VS 2010 和 MSVS 11 Beta 中编译相同的项目，并且遇到相同的编译器错误

**问题：为什么在我的情况下发生编译器的 OutOfMemoryException（它是已知的编译器错误或其他限制），我应该如何重新组织我的*匹配*条件以避免它？**

**更新**当我将类放入可区分的联合并使用类似的*匹配*比较时，Fsc.exe 无一例外地编译项目

```
type AllClasses = 
    | ChildClass1 of IChildClass1 | ChildClass2 of IChildClass2 | ChildClass3 of IChildClass3 | ChildClass4 of IChildClass4 | ChildClass5 of IChildClass5 | ChildClass6 of IChildClass6
    | ChildClass7 of IChildClass7 | ChildClass8 of IChildClass8 | ChildClass9 of IChildClass9 | ChildClass10 of IChildClass10 | ChildClass11 of IChildClass11 | ChildClass12 of IChildClass12
    | ChildClass13 of IChildClass13 | ChildClass14 of IChildClass14 | ChildClass15 of IChildClass15 | ChildClass16 of IChildClass16 | ChildClass17 of IChildClass17 | ChildClass18 of IChildClass18 
    | ChildClass19 of IChildClass19 | ChildClass20 of IChildClass20

let AreEqual2 (original: AllClasses) (compareWith: AllClasses) : bool =
    match (original, compareWith) with
    | ChildClass1(a), ChildClass1(b) -> a = b
    | ChildClass2(a), ChildClass2(b) -> a = b
    | ChildClass3(a), ChildClass3(b) -> a = b
    | ChildClass4(a), ChildClass4(b) -> a = b
    | ChildClass5(a), ChildClass5(b) -> a = b
    | ChildClass6(a), ChildClass6(b) -> a = b
    | ChildClass7(a), ChildClass7(b) -> a = b
    | ChildClass8(a), ChildClass8(b) -> a = b
    | ChildClass9(a), ChildClass9(b) -> a = b
    | ChildClass10(a), ChildClass10(b) -> a = b
    | ChildClass11(a), ChildClass11(b) -> a = b
    | ChildClass12(a), ChildClass12(b) -> a = b
    | ChildClass13(a), ChildClass13(b) -> a = b
    | ChildClass14(a), ChildClass14(b) -> a = b
    | ChildClass15(a), ChildClass15(b) -> a = b
    | ChildClass16(a), ChildClass16(b) -> a = b
    | ChildClass17(a), ChildClass17(b) -> a = b
    | ChildClass18(a), ChildClass18(b) -> a = b
    | ChildClass19(a), ChildClass19(b) -> a = b
    | ChildClass20(a), ChildClass20(b) -> a = b
    | _ -> false 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T12:29:43.030

这是由 F# 编译器在这种情况下如何编译元组上的模式匹配造成的。我不完全确定您何时在这个特定问题中运行以及编译器何时使用其他方法，但这里解释了为什么它在这种情况下失败......

如果您编写与示例中类似的模式匹配，编译器本质上会生成一个决策树，用于测试`original`( `:? IChildClass1`) 的第一个模式，然后生成两个分支。第一个分支检查是否`compareWith`也是`IChildClass1`。如果是，则运行第一种情况。然后在两个分支中*复制*其余的模式匹配，因此您会得到类似的结果（您可以通过使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)查看已编译的代码以了解较少数量的情况）：

```
if (original is IChildClass1)
  if (compareWith is IChildClass1)
    case #1
  if (original is IChildClass2)
    if (compareWith is IChildClass2)
      case #2
    if (original is IChildClass3)
      (...)
else
  if (original is IChildClass2)
    if (compareWith is IChildClass2)
      case #2
    if (original is IChildClass3)
      (...) 
```

这意味着生成代码的大小与此模式匹配中的案例数量成指数比例。对于 20 种情况，编译器尝试创建 2^20 个分支，但（不出所料）失败了。

# xcode - UITableView detailTextLabel 不适用于自定义单元格

> ID：10617367
> 
> 赞同：0
> 
> 时间：2012-05-16T11:14:05.047
> 
> 标签：xcode, ios5, uitableview, custom-cell, detailtextlabel

我创建了一个自定义单元格，该单元格当前显示图像和文本，但不显示详细文本。

即使使用“cell.detailTextLabel.text”，它仍然不会显示。有人知道出了什么问题吗？

我尝试将 UITableViewCellStyleSubtitle 更改为 UITableViewCellStyleDefault 等。

在过去的几个小时里，我搜索了这个网站和谷歌，试图修复，但都没有奏效。

任何帮助，将不胜感激。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"myCell";
    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }

NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:nil ascending:YES selector:@selector(localizedCompare:)];
NSArray *sortedCategories = [self.tweetSongs.allKeys sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];

NSString *categoryName = [sortedCategories objectAtIndex:indexPath.section];

NSArray *currentCategory = [self.tweetSongs objectForKey:categoryName];

NSDictionary *currentArtist = [currentCategory objectAtIndex:indexPath.row];
NSDictionary *currentSong = [currentCategory objectAtIndex:indexPath.row];

cell.textLabel.text = [currentSong objectForKey:@"Song"];
cell.detailTextLabel.text = [currentArtist objectForKey:@"Artist"];
cell.textLabel.textColor = [UIColor whiteColor];
cell.imageView.image = [UIImage imageNamed:[currentArtist objectForKey:@"Artwork"]]
} 
```

这是单元格屏幕截图的链接（我不允许在没有 10 个代表的情况下附加图像）：

![在此处输入图像描述](../Images/2f04d299f6db1b22be11e7bfe5fe31d2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:13:04.307

```
 cell.textLabel.text = [currentSong objectForKey:@"Song"];
    cell.detailTextLabel.text = @"YourName"; //[currentArtist objectForKey:@"Artist"];
    cell.detailTextLabel.textColor = [UIColor redColor];
    cell.textLabel.textColor = [UIColor blackColor];//Change your color
    cell.imageView.image = [UIImage imageNamed:[currentArtist objectForKey:@"Artwork"]]; 
```

像这样试试。它在我的 Xcode 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:18:07.557

尝试更改此行。

```
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
```

我会用默认样式初始化。看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:32:17.057

问题是自定义单元格的高度太小，我认为无论如何，因为当我增加高度时它起作用了。

# java - 如何找到可用的 WiFi 设备？

> ID：10617368
> 
> 赞同：-3
> 
> 时间：2012-05-16T11:14:06.520
> 
> 标签：java, android, android-wifi

我想编写一个搜索可用 WiFi 设备并连接的应用程序。有谁知道如何在android中做到这一点？谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:22:34.187

使用以下代码获取可用的 Wifi 网络

```
import java.util.List;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.wifi.ScanResult;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;

public class Test_allActivity extends Activity {
 TextView mainText;
 WifiManager mainWifi;
 WifiReceiver receiverWifi;
 List<ScanResult> wifiList;
 StringBuilder sb = new StringBuilder();

public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);
 mainText = (TextView) findViewById(R.id.mainText);
 mainWifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
 receiverWifi = new WifiReceiver();
 registerReceiver(receiverWifi, new IntentFilter(
 WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
 mainWifi.startScan();
 mainText.setText("\nStarting Scan...\n");
 }

public boolean onCreateOptionsMenu(Menu menu) {
menu.add(0, 0, 0, "Refresh");
return super.onCreateOptionsMenu(menu);
}

public boolean onMenuItemSelected(int featureId, MenuItem item) {
  mainWifi.startScan();
  mainText.setText("Starting Scan");
  return super.onMenuItemSelected(featureId, item);
}

protected void onPause() {
  unregisterReceiver(receiverWifi);
  super.onPause();
}

class WifiReceiver extends BroadcastReceiver {
 public void onReceive(Context c, Intent intent) {
 sb = new StringBuilder();
 wifiList = mainWifi.getScanResults();
 for(int i = 0; i < wifiList.size(); i++){
  sb.append(new Integer(i+1).toString() + ".");
  sb.append((wifiList.get(i)).toString());
  sb.append("\n");
  }
 mainText.setText(sb);
  }
 }
} 
```

# web-services - 带有 ServiceRoute 的果园 CMS WCF 服务

> ID：10617370
> 
> 赞同：0
> 
> 时间：2012-05-16T11:14:11.143
> 
> 标签：web-services, orchardcms

我已经配置了一个 Orchard 模块来公开服务并启用它。我无法根据以下内容计算出要使用的 URL。

路由.cs

```
namespace OrchardRestService
{
    using System.Collections.Generic;
    using System.ServiceModel.Activation;

    using Orchard.Mvc.Routes;
    using Orchard.Wcf;

    public class Routes : IRouteProvider
    {
        #region Implementation of IRouteProvider

        public IEnumerable<RouteDescriptor> GetRoutes()
        {
            return new[] {
                new RouteDescriptor {
                   Priority = 20,
                        Route = new ServiceRoute(
                                      "ContentService",
                                      new OrchardServiceHostFactory(),
                                      typeof(IContentService))
                }
            };
        }

        public void GetRoutes(ICollection<RouteDescriptor> routes)
        {
            foreach (var routeDescriptor in GetRoutes())
                routes.Add(routeDescriptor);
        }

        #endregion
    }
} 
```

IContentService.cs：

```
namespace OrchardRestService
{
    using System.ServiceModel;

    using Orchard;

    [ServiceContract]
    public interface IContentService : IDependency
    {
        [OperationContract]
        ContentResult GetContent(string contentPath);
    }
} 
```

内容服务.cs：

```
namespace OrchardRestService
{
    using System.Collections.Generic;
    using System.ServiceModel.Activation;

    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class ContentService : IContentService
    {
        public ContentResult GetContent(string contentPath)
        {
            var contentResult = new ContentResult
                { ContentValues = new Dictionary<string, string>(), Found = true, Path = contentPath };
            return contentResult;
        }
    }
} 
```

我试图遵循 Bertrand Le Roy 在[这里](https://stackoverflow.com/questions/5795632/orchard-mvc-wcf-service-url-with-area)和[这里](http://weblogs.asp.net/bleroy/archive/2011/04/20/orchard-1-1-what-s-in-it-for-developers.aspx)所写的内容，但似乎遗漏了一些东西。

顺便说一下，我的代码是 .Net 4，所以不需要 SVC 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:26:59.670

关闭，因为我会跳过箍以这种方式使用 N2，而不是它的设计用途。

# windows - 有人知道在 Windows 中从 Dreamweaver cs6 恢复文件吗？

> ID：10617375
> 
> 赞同：-1
> 
> 时间：2012-05-16T11:14:16.107
> 
> 标签：windows, backup, dreamweaver

我已经工作了 2-3 天，现在我发现 css 文件已损坏。现在我很沮丧，因为我没有做任何备份。当我开始一点时，我已经上传到测试服务器。

有人可以让我知道你喜欢如何备份代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:23:18.177

版本控制是软件维护的最佳选择。我个人更喜欢GIT。 [http://git-scm.com/](http://git-scm.com/)

# r - 将数据与r中的部分匹配合并

> ID：10617377
> 
> 赞同：6
> 
> 时间：2012-05-16T11:14:18.677
> 
> 标签：r, merge, dataset, match

我有两个数据集

```
datf1 <- data.frame (name = c("regular", "kklmin", "notSo", "Jijoh",
 "Kish", "Lissp", "Kcn", "CCCa"),
 number1 = c(1, 8, 9,  2,  18, 25, 33,   8))
#-----------
    name number1
1 regular       1
2  kklmin       8
3   notSo       9
4   Jijoh       2
5    Kish      18
6   Lissp      25
7     Kcn      33
8    CCCa       8

 datf2 <- data.frame (name = c("reGulr", "ntSo", "Jijoh", "sean", "LiSsp",
 "KcN", "CaPN"),
   number2 = c(2, 8, 12,    13, 20, 18,   13))
#-------------
   name number2
1 reGulr       2
2   ntSo       8
3  Jijoh      12
4   sean      13
5  LiSsp      20
6    KcN      18
7   CaPN      13 
```

我想按名称列合并它们，但是允许部分匹配（以避免妨碍合并大型数据集中的拼写错误，甚至检测此类拼写错误），例如

（1）如果在任何位置连续四个字母（如果字母数小于4） - 匹配就可以了

```
 ABBCD = BBCDK = aBBCD = ramABBBCD = ABB 
```

(2) 匹配中不区分大小写，例如`ABBCD = aBbCd`

(3) 新数据集将保留两个名称（来自 datf1 和 datf2 的名称）。这样我们就可以检测到该字母是否完美匹配（可能有一个单独的列，其中有多少个字母匹配）

这样的合并可能吗？

编辑：

```
datf1 <- data.frame (name = c("xxregular", "kklmin", "notSo", "Jijoh",
             "Kish", "Lissp", "Kcn", "CCCa"),
                     number1 = c(1, 8, 9,  2,  18, 25, 33,   8))
datf2 <- data.frame (name = c("reGulr", "ntSo", "Jijoh", "sean", 
             "LiSsp", "KcN", "CaPN"),
                     number2 = c(2, 8, 12,  13, 20, 18,   13))

uglyMerge(datf1, datf2)
       name1  name2 number1 number2 matches
1  xxregular   <NA>       1      NA       0
2     kklmin   <NA>       8      NA       0
3      notSo   <NA>       9      NA       0
4      Jijoh  Jijoh       2      12       5
5       Kish   <NA>      18      NA       0
6      Lissp  LiSsp      25      20       5
7        Kcn    KcN      33      18       3
8       CCCa   <NA>       8      NA       0
9       <NA> reGulr      NA       2       0
10      <NA>   ntSo      NA       8       0
11      <NA>   sean      NA      13       0
12      <NA>   CaPN      NA      13       0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T14:07:45.847

也许有一个简单的解决方案，但我找不到任何解决方案。
恕我直言，您必须自己实施这种合并。
请在下面找到一个丑陋的例子（有很大的改进空间）：

```
uglyMerge <- function(df1, df2) {

    ## lower all strings to allow case-insensitive comparison
    lowerNames1 <- tolower(df1[, 1]);
    lowerNames2 <- tolower(df2[, 1]);

    ## split strings into single characters
    names1 <- strsplit(lowerNames1, "");
    names2 <- strsplit(lowerNames2, "");

    ## create the final dataframe
    mergedDf <- data.frame(name1=as.character(df1[,1]), name2=NA, 
                        number1=df1[,2], number2=NA, matches=0,
                        stringsAsFactors=FALSE);

    ## store names of dataframe2 (to remember which strings have no match)
    toMerge <- df2[, 1];

    for (i in seq(along=names1)) {
        for (j in seq(along=names2)) {
            ## set minimal match to 4 or to string length
            minMatch <- min(4, length(names2[[j]]));

            ## find single matches
            matches <- names1[[i]] %in% names2[[j]];

            ## look for consecutive matches
            r <- rle(matches);

            ## any matches found?
            if (any(r$values)) {
                ## find max consecutive match
                possibleMatch <- r$value == TRUE;
                maxPos <- which(which.max(r$length[possibleMatch]) & possibleMatch)[1];

                ## store max conscutive match length
                maxMatch <- r$length[maxPos];

                ## to remove FALSE-POSITIVES (e.g. CCC and kcn) find 
                ## largest substring
                start <- sum(r$length[0:(maxPos-1)]) + 1;
                stop <- start + r$length[maxPos] - 1;
                maxSubStr <- substr(lowerNames1[i], start, stop);

                ## all matching criteria fulfilled
                isConsecutiveMatch <- maxMatch >= minMatch &&
                                    grepl(pattern=maxSubStr, x=lowerNames2[j], fixed=TRUE) &&
                                    nchar(maxSubStr) > 0;

                if (isConsecutiveMatch) {
                    ## merging
                    mergedDf[i, "matches"] <- maxMatch
                    mergedDf[i, "name2"] <- as.character(df2[j, 1]);
                    mergedDf[i, "number2"] <- df2[j, 2];

                    ## don't append this row to mergedDf because already merged
                    toMerge[j] <- NA;

                    ## stop inner for loop here to avoid possible second match
                    break;
                }
            }
        } 
    }

    ## append not matched rows to mergedDf
    toMerge <- which(df2[, 1] == toMerge);
    df2 <- data.frame(name1=NA, name2=as.character(df2[toMerge, 1]), 
                    number1=NA, number2=df2[toMerge, 2], matches=0, 
                    stringsAsFactors=FALSE);
    mergedDf <- rbind(mergedDf, df2);

    return (mergedDf);
} 
```

输出：

```
> uglyMerge(datf1, datf2)
    name1  name2 number1 number2 matches
1  xxregular reGulr       1       2       5
2     kklmin   <NA>       8      NA       0
3      notSo   <NA>       9      NA       0
4      Jijoh  Jijoh       2      12       5
5       Kish   <NA>      18      NA       0
6      Lissp  LiSsp      25      20       5
7        Kcn    KcN      33      18       3
8       CCCa   <NA>       8      NA       0
9       <NA>   ntSo      NA       8       0
10      <NA>   sean      NA      13       0
11      <NA>   CaPN      NA      13       0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T14:10:35.860

`agrep`会让你开始。

就像是：

```
lapply(tolower(datf1$name), function(x) agrep(x, tolower(datf2$name))) 
```

然后您可以调整`max.distance`参数，直到获得适当的匹配量。然后随意合并。

# javascript - 使用javascript在sqlite中存储约4mb的pdf的最佳方法是什么？

> ID：10617379
> 
> 赞同：-2
> 
> 时间：2012-05-16T11:14:22.870
> 
> 标签：javascript, jquery, sqlite, base64, offline-storage

使用javascript在sqlite中存储约4mb的pdf的最佳方法是什么？

我曾尝试使用 base 64 编码，但 Andoid 浏览器在尝试打开大文件时冻结并退出。小文件也不会打开，它们刚开始下载，但下载永远不会完成，而且文件类型似乎未知。它必须在 Android 浏览器中工作，我有几个文件需要保存，所以我必须使用 sqlite（因为离线存储的大小限制）

提前致谢！/基督教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:01:08.317

您可能需要考虑将 PhoneGap 用于创建本机应用程序，从而绕过配额。这样您就可以继续使用 HTML5 来创建应用程序。

此博客条目提出了一种取消 PhoneGap 应用程序配额限制的方法：

[http://blog.mattray.info/2011/08/into-blender-javascript-sqlite-ios-and.html](http://blog.mattray.info/2011/08/into-blender-javascript-sqlite-ios-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:47:35.153

您可以分块读取 PDF（要求服务器将字节 xx 发送到 yy），以尽量减少对移动系统的影响，并将其存储在带有跟踪号（y 的块 x）的 sqlite 表中，直到您拥有一切. 然后您可以随时将整个文件重建为一个大 blob，并将该 blob 保存到一个临时文件中 - 请参阅上面的链接以获取来自 html5rocks 的文件系统。

# android - 我应该将 onClickListener 放在自定义 ListView 的什么位置？

> ID：10617380
> 
> 赞同：4
> 
> 时间：2012-05-16T11:14:24.360
> 
> 标签：android, android-listview, onclicklistener

我正在自定义`ListView`包含 a`CheckBox`和 a的行`TextView`。在我将自定义`ListViews`与 SimpleCursorAdapter 一起使用之前，我的`onListItemClick()` 工作正常。

我读过我必须添加一个`onClickListener`到我的`TextViews`但在哪里？为什么？

我仍在扩展`ListActivity`和传递`Adapter`to `setListAdapter(listedPuzzleAdapter);`，不是吗？

```
public class PuzzleListActivity extends ListActivity {

    private PuzzlesDbAdapter mDbHelper;
    private Cursor puzzlesCursor;

    private ArrayList<ListedPuzzle> listedPuzzles = null;
    private ListedPuzzleAdapter listedPuzzleAdapter;

    private class ListedPuzzleAdapter extends ArrayAdapter<ListedPuzzle> {

        private ArrayList<ListedPuzzle> items;

        public ListedPuzzleAdapter(Context context, int textViewResourceId,
                ArrayList<ListedPuzzle> items) {
            super(context, textViewResourceId, items);
            this.items = items;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.puzzles_row, null);
            }
            ListedPuzzle lp = items.get(position);
            if (lp != null) {
                TextView title = (TextView) v.findViewById(R.id.listTitles);
                title.setText(lp.getTitle());
                CheckBox star = (CheckBox) v.findViewById(R.id.star_listed);
                star.setChecked(lp.isStarred());
            }
            return v;
        }

    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 

        setContentView(R.layout.puzzles_list);

        // Create database helper to open connection
        mDbHelper = new PuzzlesDbAdapter(this);
        mDbHelper.open();

        fetchData();
    }   

    private void fetchData() {
        puzzlesCursor = mDbHelper.fetchAllPuzzles();
        startManagingCursor(puzzlesCursor);

        listedPuzzles = new ArrayList<ListedPuzzle>();
        ListedPuzzle lp;

        puzzlesCursor.moveToFirst();
        while (!puzzlesCursor.isAfterLast()) {
            lp = new ListedPuzzle();
            lp.setTitle(puzzlesCursor.getString(puzzlesCursor
                    .getColumnIndex(PuzzlesDbAdapter.KEY_TITLE)));
            lp.setStarred(puzzlesCursor.getInt(puzzlesCursor
                    .getColumnIndex(PuzzlesDbAdapter.KEY_STARRED)) > 0);
            listedPuzzles.add(lp);
            puzzlesCursor.moveToNext();
        }

        listedPuzzleAdapter = new ListedPuzzleAdapter(this,
                R.layout.puzzles_row, listedPuzzles);
        setListAdapter(listedPuzzleAdapter);

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Intent i = new Intent(this, PuzzleQuestionActivity.class);
        i.putExtra(PuzzlesDbAdapter.KEY_ROWID, id);
        startActivity(i);
    } 
```

编辑：我的问题是使自定义可点击的整个项目，`ListView`所以我发现最好的答案是@Luksprog 给出的答案。`onListItemClick`我的`ListActivity`就够了。我只需要设置`android:focusable='false'`它就可以了。

现在，应该`CheckBox`在每个项目上`ListView`“加星标”该项目，这意味着访问数据库。

```
public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.puzzles_row, null);
            }
            ListedPuzzle lp = items.get(position);
            if (lp != null) {
                TextView title = (TextView) v.findViewById(R.id.listTitles);
                title.setText(lp.getTitle());
                CheckBox star = (CheckBox) v.findViewById(R.id.star_listed);
                star.setChecked(lp.isStarred());

                star.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        Integer realPosition = (Integer) v.getTag();
                        ListedPuzzle obj = items.get(realPosition);
                        obj.getId();

                    }

                });
            }
            return v;

        } 
```

但是`v.getTag()`指的是非最终变量，如果我更改它，`v = vi.inflate(R.layout.puzzles_row, null)`则无法分配。解决这个问题的最佳方法是什么？我从来没有真正理解整个最终交易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:27:21.417

如果您想在单击`TextView`或/和`CheckBox`从您的任何行中添加一个特殊操作，然后为您的自定义方法中的那些添加`ListView`一个：`OnCLickListener``Views``getView``Adapter`

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.puzzles_row, null);
            }
            ListedPuzzle lp = items.get(position);
            if (lp != null) {
                TextView title = (TextView) v.findViewById(R.id.listTitles);
                //set as the tag the position parameter 
                title.setTag(new Integer(position));                    
                title.setOnclickListener(new OnCLickListener(){

                @Override 
                public void onClick(View v) {
                    // Do the stuff you want for the case when the row TextView is clicked
                    // you may want to set as the tag for the TextView the position paremeter of the `getView` method and then retrieve it here
                    Integer realPosition = (Integer) v.getTag();
                    // using realPosition , now you know the row where this TextView was clicked
                }
            }); 
                title.setText(lp.getTitle());
                CheckBox star = (CheckBox) v.findViewById(R.id.star_listed);
                star.setChecked(lp.isStarred());
            }
            return v;
        } 
```

如果您想在单击一行时执行一项操作（无论单击`View`该行中的什么（如果单击了一个）），只需使用`OnItemClickListener`您的（或在 a 的情况下`ListView`的回调）。`onListItemClick``ListActivity`

另外，我希望您设置`android:focusable="false"`为`CheckBox`(in `R.layout.puzzles_row`)，因为我认为`onListItemClick`否则不会起作用。

**编辑 ：**

如果您想启动新活动，无论用户在哪里单击一行，都可以在（在 的情况下）回调中**启动**`Activity`新`onListItemClick`活动：`ListActivity`

 **```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {          
        Intent i = new Intent(this, PuzzleQuestionActivity.class);
        i.putExtra(PuzzlesDbAdapter.KEY_ROWID, id);
        startActivity(i);
    } 
```

如果由于某种原因，您想在用户**仅**（例如）连续`Activity`单击时启动新活动，则从我上面的代码中的方法中启动新活动：**`TextView``ListView``onClick`**

 **```
//...
title.setOnclickListener(new OnCLickListener(){

                    @Override 
                    public void onClick(View v) {
                        Integer realPosition = (Integer) v.getTag();
                        ListedPuzzle obj = items.get(realPosition);
                        Intent i = new Intent(this, PuzzleQuestionActivity.class);
                        i.putExtra(PuzzlesDbAdapter.KEY_ROWID, obj.getTheId());//see below
                        startActivity(i);
                    }
//... 
```

为此，您必须修改`ListedPuzzle`以在方法中添加`PuzzlesDbAdapter.KEY_ROWID`来自`puzzlesCursor`光标的列`fetchData()`：

```
//...
while (!puzzlesCursor.isAfterLast()) {
            lp = new ListedPuzzle();
            lp.setTitle(puzzlesCursor.getString(puzzlesCursor
                    .getColumnIndex(PuzzlesDbAdapter.KEY_TITLE)));
            lp.setStarred(puzzlesCursor.getInt(puzzlesCursor
                    .getColumnIndex(PuzzlesDbAdapter.KEY_STARRED)) > 0);
            lp.setTheId(puzzlesCursor.getLong(puzzlesCursor
                    .getColumnIndex(PuzzlesDbAdapter.KEY_ROWID)));
            listedPuzzles.add(lp);
//... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:18:17.023

您可以在适配器中分配一个`onClickListener`，但这是不好的做法。

你应该做的是`onItemClick`像这样实现：

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position,
        long id) {
    TextView text = parent.getItemAtPosition(position);
    // DO SOMETHING or in your case 
    //startActivity(new Intent(<the correct intent>);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:25:41.917

您应该在 ListView 上实现[onItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)。

```
ListView lv = getListView();

  lv.setOnItemClickListener(new OnItemClickListener() {

  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:25:45.200

仅在您的适配器中使用 onClick Listner。在您的适配器中，您将返回 v ，它是对象的视图。把你的 onCLickListener 放在那里。

egvsetOnCLickListener。

我记住你想在点击查看时打开一个活动。是的，如果您的 ListedPuzzle 类是可序列化的或可打包的，您可以使用同一意图的 putextra 方法转发整个对象。

如果您不清楚答案，请告诉我，我将为您提供小代码片段

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T11:49:07.213

```
 lstviewemojis.setOnItemClickListener(new AdapterView.OnItemClickListener() {

      @Override
      public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
      } 
```****

# ios - iPhone：编辑时 UITextView 不展开

> ID：10617381
> 
> 赞同：1
> 
> 时间：2012-05-16T11:14:28.760
> 
> 标签：ios, xcode4, uitextview

我在滚动视图上使用 UITextView ...我希望它在我写东西时自动扩展......但我无法做到......

```
textViewBusiness = [[UITextView alloc] initWithFrame:CGRectMake(25,332,268,60)];
textViewBusiness.text=strMyBusiness;
textViewBusiness.editable=NO;
textViewBusiness.font = [UIFont fontWithName:@"Arial" size: 17.0];
textViewBusiness.layer.borderWidth = 2.0f;
textViewBusiness.layer.borderColor = [[UIColor grayColor] CGColor];
textViewBusiness.backgroundColor = [UIColor clearColor];
[textViewBusiness setTextColor:[UIColor blackColor]];
[self.scrollView addSubview: textViewBusiness];

CGRect frame = textViewBusiness.frame;
frame.size.height = textViewBusiness.contentSize.height;
textViewBusiness.frame = frame; 
```

这段代码对我不起作用...

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:23:12.937

确保设置了文本字段的委托...

```
someTextField.delegate = self; 
```

然后在相应的文本字段委托方法中调整 textView 的大小。

```
- (void)textViewDidChange:(UITextView *)textView;

- (void) textViewDidEndEditing:(UITextView *)textView; 
```

您在上面添加的代码是正确的。只要确保它在正确的位置。

```
- (void)textViewDidChange:(UITextView *)textView
{
   CGRect frame = textView.frame;
   frame.size.height = textView.contentSize.height;
   textView.frame = frame;
 } 
```

[动态展开 UITextView](https://stackoverflow.com/questions/7186035/dynamic-expand-uitextview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:31:22.907

您的代码将无法正常工作。

您需要将代码分成 2 个片段，然后将它们放在适当的位置，然后您的代码应该可以工作。

片段 1（在我的测试中，我将此片段放在 viewDidLoad 中）：

```
textViewBusiness = [[UITextView alloc] initWithFrame:CGRectMake(25,332,268,60)];
textViewBusiness.text=strMyBusiness;
textViewBusiness.editable=NO;
textViewBusiness.font = [UIFont fontWithName:@"Arial" size: 17.0];
textViewBusiness.layer.borderWidth = 2.0f;
textViewBusiness.layer.borderColor = [[UIColor grayColor] CGColor];
textViewBusiness.backgroundColor = [UIColor clearColor];
[textViewBusiness setTextColor:[UIColor blackColor]];
[self.scrollView addSubview: textViewBusiness]; 
```

确保上面的片段运行，并且您的文本视图显示在屏幕中，然后运行第二个片段。如果你的文本视图没有显示在屏幕上，那么 contentView 没有被初始化，并且高度是未定义的。

片段 2（在我的测试中，我将此片段放在 viewDidAppear 中）：

```
CGRect frame = textViewBusiness.frame;
frame.size.height = textViewBusiness.contentSize.height;
textViewBusiness.frame = frame; 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:25:41.940

[`HPGrowingTextView`](http://cocoacontrols.com/platforms/ios/controls/hpgrowingtextview)是`UITextView`随着文本增长/缩小并在内容达到一定数量的行时开始滚动的。类似于 Apple 在 SMS 应用程序中使用的那个。请参阅链接以获取小型（过时的）截屏视频。

# asp.net - 我可以安全地删除 Temporary ASP.Net 文件夹的内容吗？

> ID：10617385
> 
> 赞同：6
> 
> 时间：2012-05-16T11:14:45.347
> 
> 标签：asp.net, .net, iis-7

每当我在**VS 2010**下运行时，我的应用程序都可以正常工作。当我将它上传到服务器并从**IIS**运行时，它会给出**Complie 错误：CS0433:** 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\~\App_Web_dzybh5am.DLL' 和'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\~\App_Web_znctdhjf.DLL'

错误：

```
Line 146:    
Line 147:    [System.Runtime.CompilerServices.CompilerGlobalScopeAttribute()]
Line 148:    public class default_aspx : global::_Default, System.Web.SessionState.IRequiresSessionState, System.Web.IHttpHandler {
Line 149:        
Line 150:        private static bool @__initialized; 
```

谷歌上的快速搜索显示删除这些临时文件解决了这个问题。

删除那些临时文件有用吗，它会影响我将来的应用程序吗？

我只想知道我是否应该从临时文件夹中删除所有文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:09:20.657

只要您的 Web 应用程序关闭，它就不会对应用程序产生任何影响。
.Net / IIS 使用该临时文件夹作为保存您的 aspx/razor 页面的编译版本的地方。

请记住，尽管其他 IIS Web 应用程序可能正在使用该临时文件夹，所以在使用时要小心。

# netbeans - 创建 PicasawebService

> ID：10617386
> 
> 赞同：1
> 
> 时间：2012-05-16T11:14:47.290
> 
> 标签：netbeans, picasa

我尝试从公开的 Picasa 相册中获取标题和 URL。但我一开始就卡住了：我无法创建新的 PicasawebService。

我的代码：

```
import java.util.List;
import java.io.File;
import java.net.URL;

import com.google.gdata.client.*;
import com.google.gdata.client.photos.*;
import com.google.gdata.data.*;
import com.google.gdata.data.media.*;
import com.google.gdata.data.photos.*;
import java.util.ArrayList;

public class PicasaManager implements PicasaConnector {

    public List<Avatar> getPhotoURLs() throws Exception {
        PicasawebService myService = new PicasawebService("HI");

        myService.setUserCredentials("foo@gmail.com", "mypassword");

        ArrayList<Avatar> rl = new ArrayList<Avatar>();

        URL feedUrl = new URL("https://picasaweb.google.com/111420671758947023853/EWA2012");
        System.out.println("dddddddddddddddddd");
        AlbumFeed feed = myService.getFeed(feedUrl, AlbumFeed.class);

        for (PhotoEntry photo : feed.getPhotoEntries()) {
            Avatar a1 = new Avatar();
            a1.setDescription(photo.getTitle().getPlainText());
            a1.setUrl(photo.getMediaThumbnails().get(0).getUrl());
            rl.add(a1);
        }

        return (rl);
    }
} 
```

错误信息：

```
Exception in thread "main" java.lang.NoSuchMethodError: com.google.common.collect.ImmutableSet.copyOf([Ljava/lang/Object;)Lcom/google/common/collect/ImmutableSet;
    at com.google.gdata.wireformats.AltFormat$Builder.setAcceptableTypes(AltFormat.java:399)
    at com.google.gdata.wireformats.AltFormat$Builder.setAcceptableXmlTypes(AltFormat.java:387)
    at com.google.gdata.wireformats.AltFormat.<clinit>(AltFormat.java:49)
    at com.google.gdata.client.Service.<clinit>(Service.java:558)
    at tuwien.big.mensch.utilities.PicasaManager.getPhotoURLs(PicasaManager.java:27)
    at tuwien.big.mensch.utilities.test.main(test.java:29) 
```

*   test.java 是我的测试类，带有 public static void main 方法，
*   Avatar 是一个有两个变量的类：description 和 url，两者都有 getter 和 setter
*   在我的 netbeans IDE 中 PicasaManager.java 文件的第 27 行是： PicasawebService myService = new PicasawebService("HI");
*   实现的接口只定义了 getPhotoURLs() 方法

我不知道如何解决这个问题，我希望这里有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:00:34.127

您是否包含了 gdata-core-1.0.jar 和 guava-12.0.jar？祝 Web Engineering UE4 的其余部分好运 ;-)

# azure - Windows Azure 本地 Blob 存储访问？

> ID：10617388
> 
> 赞同：2
> 
> 时间：2012-05-16T11:14:53.687
> 
> 标签：azure, local, azure-storage, azure-blob-storage

我不明白为什么当我打电话时：

LocalResource ls = RoleEnvironment.GetLocalResource("mystorage");

ls.RootPath;

没有创建本地文件夹，我不明白它是如何工作的。对我来说，这是一条创建的本地路径。所以我应该有。

C:\Resources\directory\xxx.HelloAzureWeb.mystorage\

但是没有这样的文件。

**编辑：** 我想要做的是存储一些 xml 场景保存文件。在 Unity 应用程序中，我需要发布（保存）和获取（使用）这些文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:13:16.920

您对创建本地存储有一些误解。当您调用以下代码时，它不会为您创建本地存储，而是返回给您在应用程序设置期间创建的本地存储对象的实例：

```
LocalResource ls = RoleEnvironment.GetLocalResource("mystorage"); 
```

要在您的应用程序中定义本地存储，您可以直接在 CSDEF 中添加以下内容（以下设置将创建一个本地存储名称 mystorage，大小为 2GB，如果任何情况下 VM 重新启动或角色重新启动，本地存储将不干净且内容仍然存在：

```
<LocalResources>
 <LocalStorage cleanOnRoleRecycle="false" name="mystorage" sizeInMB="2048" />
</LocalResources> 
```

要添加本地存储，您还可以选择 ->> [ Visual Studio > Role Properties > Local Storage > Add Local Storage ] 选项。

当您在 Windows Azure 应用程序中定义本地存储时，将在 Azure VM 上的驱动器 C: 中添加一个新文件夹，如下所示，这是在 VM 启动期间在 VM 中配置您的角色时完成的：

```
[In Azure VM]
C:\Resources\directory\[Your_deploymentID].[your_webrolename]_[Role_Instance_Count]\ 
```

```
[In Compute Emulator]
// Lunch your application in Compute Emulator and then open "Compute Emulator UI" to see the Local Storage Path in the command window related to your instance:
C:\Users\avkashc\AppData\Local\dftmp\Resources\3503509c-2112-45ea-8d63-377fe9f78491\directory\mystorage\ 
```

在 ServiceDefinition.CSDEF 中添加上述本地存储特定设置后，将创建本地存储，然后以下代码将起作用：

```
LocalResource ls = RoleEnvironment.GetLocalResource("mystorage");
ls.Root // returns the correct local storage path
// Now you can use ls to read/write your data. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:33:23.000

对我来说，我存储到存储模拟器 blob 的文件进入`C:\Users\[username]\AppData\Local\DevelopmentStorage\LDB\BlockBlobRoot`. 不幸的是，它们不是很有用。它只是一堆 GUID，但文件大小看起来正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T17:50:42.697

**以下是在 ASP.NET Web 角色中访问本地存储的方法：**

第 1 步：创建一个非常简单的 ASP.NET Web 角色项目

第 2 步：在 servicedefinition.csdef 中包含以下内容：

```
<LocalResources>
 <LocalStorage name="mystorage" cleanOnRoleRecycle="false" sizeInMB="2096" />
</LocalResources> 
```

第 3 步：在任意 aspx 中添加以下代码（在本例中为 about.aspx）

```
<div>
  Local Storage file content: <b><asp:Label ID="fileContent" runat="server" /></b>
</div> 
```

第 4 步：在任何 aspx.cs（在本例中为 about.aspx.cs）中添加以下代码：

```
protected void Page_Load(object sender, EventArgs e)
{
        LocalResource myStorage = RoleEnvironment.GetLocalResource("mystorage");
        string filePath = Path.Combine(myStorage.RootPath, "Lesson.txt");
        File.WriteAllText(filePath, "First Lesson");
        fileContent.Text = File.ReadAllText(filePath);

} 
```

就是这样。我已经在计算模拟器和云端测试了这段代码，它确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:42:50.707

使用存储模拟器时，本地资源分配只是一个文件目录。根路径看起来与您描述的有点不同，但您应该能够导航到本地计算机上的该目录，该目录最初为空。您*应该*在 \users\you\AppData （这是一个隐藏目录）下看到它。

哦，本地资源与 Blob 存储无关。在 Windows Azure 中，它只是具有特定大小配额的本地附加磁盘资源。与 Blob 存储不同，它是非持久存储。非常适合临时文件写入、缓存等，并且比 Blob 存储更快，因为它是本地磁盘，但对于需要持久化的任何内容，您将需要考虑 Blob。

# flash - Adobe Flash 播放器错误 #2000

> ID：10617391
> 
> 赞同：1
> 
> 时间：2012-05-16T11:15:02.030
> 
> 标签：flash, flash-cs5

我有以下代码：

```
//Importorting classes
import flash.events.*;
import flash.display.*;
import flash.net.*;

//Variabile declaration
var source:*; //variabile adresaressing to the source
var loader:Loader;
var loaderIndex:Number = 1; //variabile which remembers the value of the shown image.

function loadIt()
      {
         // Loading image
         loader = new Loader();
      loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS,onLoadingProgress); 
         loader.contentLoaderInfo.addEventListener(Event.INIT,initHandler); 
         addChild(loader); //functia adauga pe scena imaginea incarcata
         imagine_stepper.addEventListener(Event.CHANGE,changeHandler);

         // Loading the first image...
         loadImage();//lanseaza procesul de incarcare al primei imagini
      }

          function initHandler(event:Event):void
      {
         source = loader.content;
         source.alpha = 0;
         source.x = zonaAfisare_mc.x;
         source.y = zonaAfisare_mc.y;

         addEventListener(Event.ENTER_FRAME,enterFrameHandler);
      }
         function onLoadingProgress(evt:ProgressEvent):void{
         var percentage:Number=(evt.bytesLoaded/evt.bytesTotal)*100;
         var total_percentage:Number=Math.floor(percentage);
         loaded.text=total_percentage.toString()+" %";
         loaded_bar.setProgress(total_percentage,100);
      }
         function changeHandler(event:Event):void
      {
         loaderIndex = imagine_stepper.value;
         loadImage();
      }
         function enterFrameHandler(event:Event):void
      {
         if( source.alpha < 1 ){
            source.alpha += .1;
         }else{
            removeEventListener(Event.ENTER_FRAME,enterFrameHandler);
         }
      }

      // Returning the file name path: /"imagine"+value of the variable loaderIndex +file extension
      function getPath():String
      {
         return ("images/image"+loaderIndex+".jpg");
      }
         function loadImage():void
      {
         loader.load(new URLRequest(getPath()));
      }
loadIt(); 
```

它给了我错误＃2000。昨天它工作了，现在我有这个错误，没有改变任何东西：没有路径，没有照片。我应该怎么办？

我明白：看起来这行可能是原因： loader.load(new URLRequest(getPath()));

把它分成两三行。

有人可以输入正确的代码吗？

# c# - .NET MVC 中的路由问题

> ID：10617397
> 
> 赞同：1
> 
> 时间：2012-05-16T11:15:12.427
> 
> 标签：c#, asp.net, routing, subdomain, asp.net-mvc-4

> **可能重复：**
> [如何通过 URL 获取 RouteData？](https://stackoverflow.com/questions/3545432/how-to-get-routedata-by-url)

```
public override RouteData GetRouteData(HttpContextBase httpContext)
        {
            var url = httpContext.Request.Headers["HOST"];
            var index = url.IndexOf(".");

            if (index < 0)
                return null;

            var subDomain = url.Substring(0, index);

            if (subDomain != "www" && subDomain != "m")
            {
                var routeData = new RouteData(this, new MvcRouteHandler());
                    routeData.Values.Add("controller", "Business"); 
                    routeData.Values.Add("action", "Display"); 
                    routeData.Values.Add("id", subDomain);
                return routeData;
            }

            if (subDomain == "m")
            {
                var routeData = new RouteData(this, new MvcRouteHandler());
                routeData.Values.Add("controller", "Mobile"); 
                routeData.Values.Add("action", "Index"); 

                return routeData;
            }

            return null;
        } 
```

我的问题是，当我访问`xyz.mydomain.com`它时，它总是被重新路由到`xyz.mydomain.com/Business/Display/xyz`. 这阻止了我去，`xyz.mydomain.com/Overview`因为它正在拾取子域并重定向。

我尝试使用`if`语句来确定是否指定了控制器，但似乎没有任何效果。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:55:56.337

以防万一其他人需要答案，这是我的解决方案......
这`substrings.Length >= 3`是一个控制器，然后是一个动作，所以如果你只需要一个控制器，请更改为 2：

```
public override RouteData GetRouteData(HttpContextBase httpContext)
            {
                var host = httpContext.Request.Headers["HOST"];
                var url = httpContext.Request.RawUrl;
                Regex regex = new Regex("/");
                string[] substrings = regex.Split(url);
                if (substrings.Length >= 3)
                {
                    return null;
                }
                var index = host.IndexOf(".");
                if (index < 0)
                {
                    return null;
                }

                var subDomain = host.Substring(0, index);

                if (subDomain != "www" && subDomain != "m")
                {
                    var routeData = new RouteData(this, new MvcRouteHandler());
                        routeData.Values.Add("controller", "Business"); //Goes to the User1Controller class
                        routeData.Values.Add("action", "Display"); //Goes to the Index action on the User1Controller
                        routeData.Values.Add("id", subDomain);
                    return routeData;
                }

                if (subDomain == "m")
                {
                    var routeData = new RouteData(this, new MvcRouteHandler());
                    routeData.Values.Add("controller", "Mobile"); //Goes to the User2Controller class
                    routeData.Values.Add("action", "Index"); //Goes to the Index action on the User2Controller

                    return routeData;
                }
                return null;
            } 
```

# android - 如何防止Android在调用相机意图后重启应用程序？

> ID：10617398
> 
> 赞同：3
> 
> 时间：2012-05-16T11:15:18.540
> 
> 标签：android, camera, lifecycle, restart, activity-lifecycle

在低内存设备上调用相机意图后我遇到了问题。当应收到活动结果时，Android 会重新启动整个应用程序。

有人遇到过同样的问题吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:23:39.037

前段时间我也遇到过同样的问题： [Android system stop application when launch Media Intent](https://stackoverflow.com/questions/10176550/android-system-stops-application-when-launching-media-intent)

显然没有解决方案，因此您必须确保保存并恢复应用程序状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:25:28.103

那么我认为，问题可能是：图像字节数组太大以至于它触及限制并且android重新启动应用程序所以以下是我将要做的：

*   用一些参数调用意图，告诉它要发送回的字节下采样。

**或者**

*   使用surfaceview实现您的相机，然后当用户拍摄一些照片时，将其临时保存在sdcard上并仅返回路径......然后在onActivityResult中获取路径并使用图片。

希望能帮助到你。

# javascript - Javascript：用逗号分割字符串但忽略引号中的逗号

> ID：10617400
> 
> 赞同：5
> 
> 时间：2012-05-16T11:15:28.817
> 
> 标签：javascript, regex, csv, split

我有一个如下字符串

```
var str="A,B,C,E,'F,G,bb',H,'I9,I8',J,K" 
```

我想用逗号分隔字符串。但是，在单引号内的情况下，我需要它同时忽略逗号，如下所示。

```
 A
 B
 C
 E
 F,G,bb
 H
 I9,I8
 J
 K 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T11:31:56.103

```
> str.match(/('[^']+'|[^,]+)/g)
["A", "B", "C", "E", "'F,G,bb'", "H", "'I9,I8'", "J", "K"] 
```

尽管您要求这样做，但您可能没有考虑到极端情况，例如：

*   `'bob\'s'`是一个`'`被转义的字符串
*   `a,',c`
*   `a,,b`
*   `a,b,`
*   `,a,b`
*   `a,b,'`
*   `',a,b`
*   `',a,b,c,'`

上面的一些是通过这个正确处理的；其他人不是。我强烈建议人们使用考虑过这一点的库，以避免现在或将来（如果您扩展您的代码，或者如果其他人使用它）等安全漏洞或微妙的错误。

* * *

**正则表达式的解释：**

*   `('[^']+'|[^,]+)`- 表示*匹配* `'[^']+'` *或* `[^,]+`
*   `'[^']+'`表示*报价...一个或多个非引号...报价*。
*   `[^,]+`表示*一个或多个非逗号*

注意：通过在不带引号的字符串之前使用带引号的字符串，我们可以更容易地解析不带引号的字符串大小写。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T01:53:44.900

这是我的版本，它可以使用单引号和双引号，并且可以包含多个带引号的字符串并嵌入逗号。它给出的结果是空的，而且结果太多，所以你必须检查一下。没有经过严格测试。请原谅过度使用'\'。

```
var sample='this=that, \
sometext with quoted ",", \
for example, \
another \'with some, quoted text, and more\',\
last,\
but "" "," "asdf,asdf" not "fff\',\'  fff" the least';

var it=sample.match(/([^\"\',]*((\'[^\']*\')*||(\"[^\"]*\")*))+/gm);
for (var x=0;x<it.length;x++) {
var txt=$.trim(it[x]);
if(txt.length)
    console.log(">"+txt+'<');
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-11T13:18:39.167

用这个

```
 var input="A,B,C,E,'F,G,bb',H,'I9,I8',J,K";
            //Below pattern will not consider comma(,) between ''. So 'I9,I8' will be considered as single string and not spitted by comma(,). 
            var pattern = ",(?=([^\']*\'[^\']*\')*[^\']*$)";
            //you will get acctual output in array
            var output[] = input.split(pattern); 
```

# machine-learning - SVM 相对于决策树和 AdaBoost 算法的优势

> ID：10617401
> 
> 赞同：9
> 
> 时间：2012-05-16T11:15:30.713
> 
> 标签：machine-learning, classification, svm, decision-tree, adaboost

我正在研究数据的二进制分类，我想知道在决策树和自适应提升算法上使用支持向量机的优缺点。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T20:34:26.847

你可能想做的是使用[weka](http://www.cs.waikato.ac.nz/ml/weka/)，这是一个很好的包，你可以用它来插入你的数据，然后尝试一堆不同的机器学习分类器，看看每个分类器在你的特定集合上是如何工作的。对于从事机器学习的人来说，这是一条良好的道路。

对您的特定数据或您要解决的分类问题一无所知，我真的不能仅仅告诉您我对每种方法的了解的随机事情。也就是说，这里有一个大脑转储和一些有用的机器学习幻灯片的链接。

[Adaptive Boosting](http://www.cs.cmu.edu/~guestrin/Class/15781/slides/decisiontrees-boosting.pdf)使用弱基分类器委员会对样本点的类别分配进行投票。基分类器可以是决策树桩、决策树、SVM 等。它采用迭代方法。在每次迭代中 - 如果委员会对特定样本的类别分配达成一致并更正，那么它的权重会降低（在下一次迭代中正确变得不那么重要），如果委员会不同意，那么它变成上加权（更重要的是在下一次迭代中正确分类）。Adaboost 以具有良好的泛化性（不是过度拟合）而闻名。

[SVM](http://www.autonlab.org/tutorials/svm.html)是有用的第一次尝试。此外，您可以将不同的内核与 SVM 一起使用，不仅可以获得线性决策边界，还可以获得更时髦的决策边界。而且，如果您对其进行 L1 正则化（松弛变量），那么您不仅可以防止过度拟合，而且还可以对不可分离的数据进行分类。

[决策树](http://www.autonlab.org/tutorials/svm.html)之所以有用，是因为它们几乎可以被任何人解释。它们易于使用。使用树还意味着您还可以了解特定功能对于制作树的重要性。您可能想要检查的是加法树（如[MART](http://www-stat.stanford.edu/~jhf/MART.html)）。

# php - 预填表格（无法控制表格代码）

> ID：10617402
> 
> 赞同：2
> 
> 时间：2012-05-16T11:15:35.707
> 
> 标签：php, javascript, jquery

我正在使用表单插件/插件，我无法控制表单的生成方式。

该表单生成的 HTML 如下所示：

```
<form>
<label>First Name</label><input name="Question25" type="text" value="" />
<input class="formBlockSubmitButton" name="add" type="submit" value="Submit" />
</form> 
```

我想预先填写一些表单值，但我**不能**写，比如说

```
<input name="Question25" type="text" value="<?php echo $my_value; ?>" /> 
```

因为表单插件会生成该 HTML。我可以在此块之前编写 PHP 或 Javascript，有没有办法搜索名称为“Question25”的输入，然后在块出现时预填充它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:22:12.250

您可以使用 jQuery 和[`.val()`](http://api.jquery.com/val/)方法：

```
<script type="text/javascript">
    $(function() {
        $('input[name="Question25"]').val('some value');
    });
</script> 
```

如果值必须来自服务器：

```
<script type="text/javascript">
    $(function() {
        var obj = <?php echo json_encode(array('value' => $my_value)); ?>;
        $('input[name="Question25"]').val(obj.value);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:24:09.703

您可以将要搜索的所有值作为字段名/值的数组发出，然后发出一个函数，尝试将这些值映射到这些字段。

```
<script type="text/javascript">
var values = [{fieldName:'Question25', value:'MyValue'}]; // iterate through your values in PHP and generate the {fieldName:'value',value:'value'} object

$(function() {
    $.each(values, function(index, item) {
         $('input[name=' + item.fieldName + ']').val(item.value);
    });
});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:24:06.140

使用 Javascript。使用 jQuery，您可以执行以下操作：

```
$("input[name=Question25]").val(my_value); 
```

然后，您可以使用 echo 将 PHP 变量插入到 Javascript 中，使用 AJAX 加载它们，或者您需要的任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:22:44.073

```
var value='<?php echo $my_value; ?>'
$("input:text[name='Question25']").val(value); 
```

使用这样的东西

# javascript - 应用离线时 phonegap、Strophe.js 和 xmpp pubsub 推送通知

> ID：10617406
> 
> 赞同：0
> 
> 时间：2012-05-16T11:15:46.723
> 
> 标签：javascript, jquery-mobile, cordova, xmpp, openfire

当更新发布到 pubsub 节点（openfire 服务器）并且 xmpp 移动客户端应用程序处于脱机状态时，通过推送通知机制获得通知的最佳方式是什么？应用程序是否应该在用户不知情的情况下每 30 分钟启动一次（我将如何实现）？我正在构建一个 Jquery 移动应用程序，并希望使用 phonegap 为 iOS、android 和其他设备打包它。

Edit1：我认为它应该类似于 C2DM 或 APNS。但是当特定用户收到消息时，如何从 openfire 服务器向 C2DM/APNS 发送消息。

Edit2：XMPP 服务器（例如 openfire）如何知道是否将推送通知发送到 APNS 或 C2DM（因为一个用户可能拥有 Android 或 IOS 设备或两者兼有，但 xmpp 服务器不知道）？如果我问错了问题，请纠正我？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:30:12.560

XMPP 服务器本身对这些协议一无所知，因此无法推送给它们。您可以创建一个插件以通过其他方式推送，但我认为如果您可以让您的客户端经常连接并获取它的离线消息，它会更简单。

# ant - 如何从ant中的文件中删除重复的单词？

> ID：10617409
> 
> 赞同：-3
> 
> 时间：2012-05-16T11:15:59.570
> 
> 标签：ant

如何在 ant.js 中删除文件中的重复单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:38:55.520

我认为这不是 Ant 的问题。Ant 的目的是自动化构建过程。

# regex - IIS7 URL 重写 - 如何在正则表达式中用连字符替换所有下划线？

> ID：10617410
> 
> 赞同：3
> 
> 时间：2012-05-16T11:16:01.503
> 
> 标签：regex, url-rewriting, iis-7, hyphen

我正在使用 IIS7 中的 URL 重写功能来转换 URL：

```
/main.asp?category=Name_Of_A_Product 
```

进入：

```
/category/name-of-a-product/ 
```

我已经创建了重定向和重写规则，它完成了大部分工作，除了我找不到用连字符替换下划线的方法。

每个 URL 可以有零到多个下划线，我试图用一个正则表达式替换它们，以避免 301 重定向链（因为我认为这对 SEO 不利）。

您知道如何（或是否）可以做到这一点吗？

```
<rule name="Redirect REAL to FRIEDNLY" enabled="true" stopProcessing="true">
    <match url="^main\.asp$" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
        <add input="{QUERY_STRING}" pattern="^category=([^=&amp;]+)($|&amp;(.*))$" />
     </conditions>
    <action type="Redirect" url="category/{ToLower:{C:1}}/" appendQueryString="false" />
</rule>

<rule name="Rewrite FRIEDNLY to REAL" stopProcessing="false">
    <match url="^category/([^/]+)/?$" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="main.asp?category={R:1}" />
</rule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:48:37.023

不幸的是 IIS7 有一些限制：

*   你只能捕获9组`C:1`......`C:9`
*   只有一个字符串函数，那就是`ToLower`

因此，您将被限制为最多包含 9 个单词并由最多 8 个下划线（例如`/main.asp?category=One_Two_Three_Four_Five_Six_Seven_Eight_Nine`）分隔的 URL，并且您将被迫使用 9 个重写规则：

单字：**/main.asp?category=Product**

```
<rule name="Redirect REAL to FRIEDNLY 1" enabled="true" stopProcessing="true">
<match url="^main\.asp$" />
<conditions logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
    <add input="{QUERY_STRING}" pattern="^category=([A-Za-z]+)$" />
 </conditions>
<action type="Redirect" url="category/{ToLower:{C:1}}/" appendQueryString="false" />
</rule> 
```

两个字：**/main.asp?category=Some_Product**

```
<rule name="Redirect REAL to FRIEDNLY 2" enabled="true" stopProcessing="true">
<match url="^main\.asp$" />
<conditions logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
    <add input="{QUERY_STRING}" pattern="^category=([A-Za-z]+)_([A-Za-z]+)$" />
 </conditions>
<action type="Redirect" url="category/{ToLower:{C:1}}-{ToLower:{C:2}}/" appendQueryString="false" />
</rule> 
```

三个字：**/main.asp?category=Some_New_Product**

```
<rule name="Redirect REAL to FRIEDNLY 3" enabled="true" stopProcessing="true">
<match url="^main\.asp$" />
<conditions logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
    <add input="{QUERY_STRING}" pattern="^category=([A-Za-z]+)_([A-Za-z]+)_([A-Za-z]+)$" />
 </conditions>
<action type="Redirect" url="category/{ToLower:{C:1}}-{ToLower:{C:2}}-{ToLower:{C:3}}/" appendQueryString="false" />
</rule> 
```

##             …………………………

# php - 如果选择了大于 1 的值，PHP If 语句将显示多于 1 个字段

> ID：10617415
> 
> 赞同：0
> 
> 时间：2012-05-16T11:16:17.183
> 
> 标签：php, mysql, select

我想要做的是创建一个基于用户选择创建字段的功能

例如;

```
<select name="ex">  
<option selected="selected" value="1">1</option>  
<option value="2">2</option>  
<option value="3">3</option>  
<option value="4">4</option>  
<option value="5">5</option>  
</select> 
```

如果用户选择了 4，我希望能够显示 4 个输入字段

我的问题是，我将如何构建一个可以做到这一点的查询？

我脑袋嗡嗡作响，我能想到的只有

```
if($ex='4') {
<input type="text" name="field4">
<input type="text" name="field4">
<input type="text" name="field4">
<input type="text" name="field4">
} 
```

但是必须有一种更简单的方法来显示它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:19:09.820

如果使用`for`循环会更容易，如下所示：

```
for($i=1;i<=$ex;$i++){
 echo "<input type='text' name='field4[]'>";
} 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T11:24:58.103

您甚至可以使用 javascript 即时执行此操作：http: [//jsfiddle.net/fudQF/](http://jsfiddle.net/fudQF/)

***Javascript：***

```
showFields(t) {
    f = document.getElementById('fields');

    while (f.childNodes.length >= 1)
        f.removeChild(f.firstChild);

    for(i = 0; i < t.value; i++) {
        e = document.createElement('input');
        e.setAttribute('type','text');
        f.appendChild(e);

        e = document.createElement('br');
        f.appendChild(e);
    }        
} 
```

***HTML：***

```
<select name="ex" onClick="showFields(this)">  
    <option selected="selected" value="1">1</option>  
    <option value="2">2</option>  
    <option value="3">3</option>  
    <option value="4">4</option>  
    <option value="5">5</option>  
</select>
<div id="fields">
</div>
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T11:19:36.087

```
for($i=0;$i<$ex;$i++)
{echo '<input type="text" name="field'.$i.'">';} 
```

试试这个你可以在选择时使用javascript中的onchange函数来做到这一点

```
function chang()
{
for(var i=1;i<document.getElementById("select_id").value;i++)
document.body.innerHTML+='<input type="text" name="field"'+i+'>';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T11:20:23.953

```
for($i = 0; $ < 4; $i++)
{
   echo "<input type=\"text\" name=\"field".($i + 1)."\">";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T11:21:25.307

```
for ($i=1; $i<=$ex; $i++)
{
   echo "<input type=\"text\" name=\"field".$i."\">";
} 
```

它将为您的字段提供唯一的名称

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T11:21:05.680

该`if`语句似乎是 PHP（变量前的美元符号）。我猜您想回显或保存在输出的变量中。

一种方法是使用重复语句（for，while）来做你需要的次数。

基于您似乎使用完全相同的输出这一事实的另一个选项是使用该[`str_repeat()`](http://php.net/str_repeat)函数。

这似乎有点奇怪..也许你想要这个名字**`field4[]`**而不仅仅是**`field4`**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T11:26:58.020

假设 $ex=4

```
$ex=4;
for($C=1;$C<=$ex;$C++){ echo "<input type=\"text\" name=\"field".$C."\" />"; } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-16T11:32:46.163

建立在[现有答案的](https://stackoverflow.com/a/10617523/558021)基础上——jQuery 可以进一步减少所需的代码量——

**HTML**

```
<select name="ex" onClick="showFields(this)">  
    <option selected="selected" value="1">1</option>  
    <option value="2">2</option>  
    <option value="3">3</option>  
    <option value="4">4</option>  
    <option value="5">5</option>  
</select>
<div id="fields">
</div> 
```

**jQuery**

```
$("select[name='ex']").on('change',function(){
  var selectedVal = $(this).val();
  $("#fields").html(''); // clear existing input fields (possibly from previous selection)
  for (var i=1; i<=selectedVal; i++){
    $("#fields").append('<input type="text" name="field'+i+'">');
  }
}); 
```

# scala - Scala Lift Tomcat 6 - 定义 webroot

> ID：10617416
> 
> 赞同：1
> 
> 时间：2012-05-16T11:16:17.570
> 
> 标签：scala, tomcat, lift

我正在尝试将我的 webapp 部署到 tomcat，但上传路径存在一些问题。

上传文件时，它们最终位于 Tomcat 根目录中，与 webapp 根目录相对。

谢谢

# asp.net - aspx 文件内容被空白字符替换，是否有办法恢复 aspx 文件？

> ID：10617419
> 
> 赞同：-1
> 
> 时间：2012-05-16T11:16:46.180
> 
> 标签：asp.net, visual-studio-2010, recovery, recover, file-recovery

我正在处理一些 aspx 页面，突然我的系统崩溃了，当我重新启动系统时，文件在那里，但是当我从解决方案资源管理器中打开该文件时，文件内容被一些空白字符替换，并在记事本文件中打开。我检查了它的大小，大约是 31 kb。

有没有办法恢复它的内容？我的工作大约需要 4-5 天

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:23:05.507

我假设您没有备份或 svn/git 存储库或像卷影副本这样的最后一个资源。

我想你最好的选择是使用一些文件恢复工具，如[OnTrack](http://www.krollontrack.com/data-recovery/recovery-software/)或[Recuva](http://www.piriform.com/recuva)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T18:02:04.063

我今天遇到了同样的文件问题并成功克服了它。:D

拿回我的文件后感觉好极了... :D \m/ :D

这是解决方案。实际上，我发现有两种恢复损坏文件的解决方案。

> **场景：**您的文件已损坏（即文件中的任何地方都为空或空格，而大小还可以）
> 
> **解决方案#1：**使用文件恢复软件。
> 
> 文件恢复软件可以恢复已删除的文件。在我们的场景中，您的文件并未被删除，而是已损坏。那么在这种情况下如何使用该软件！！！！
> 
> *   只需删除您的文件
> *   尝试使用流行的文件恢复软件恢复已删除的文件
> 
> 瞧……它被恢复了……：D
> 
> 我使用的恢复软件是[Recuva](http://www.piriform.com/recuva)。工作完美。
> 
> **解决方案#2：**如果它是网页内容，如 CSS/Javascript/html 等。
> 
> 您可以从浏览器缓存中收集文件的最后一个工作副本，如果且仅当您没有在该浏览器中打开损坏的网页时。

帮助我找到第一个解决方案的想法来自

**马克吐温**——“永远不要和愚蠢的人争论，他们会把你拉到他们的水平，然后用经验打败你。”

当我在考虑如何使用这个恢复软件时，我想到了这句话并说自己“让我们将文件拖到水平，恢复软件可以恢复的地方”......：D

# iphone - 带有 NSObject 的外键的 CoreData 谓词

> ID：10617428
> 
> 赞同：0
> 
> 时间：2012-05-16T11:17:56.233
> 
> 标签：iphone, objective-c, sql, ios, core-data

我在 Core Data 中有这样的关系：

`A -> B`

和下表：

```
A
----
id 
path
ref_foreignkey_B

B
----
id
name 
```

问题是外键被设置为`B`对象（继承自 NSObject）。

然后我试图从 A 中获取所有条目，其中设置了对某个 B 对象的引用。我知道对象 B，但不知道如何`NSPredicate`正确设置。

我尝试了以下方法：

```
NSString *complexPredicateFormat = [NSString stringWithFormat:@"ZREF_B == %@", self.B];   
NSPredicate *filter = [NSPredicate predicateWithFormat:complexPredicateFormat];
[fetchRequest setPredicate:filter]; 
```

...但这会导致以下错误：

`'NSInvalidArgumentException', reason: 'Unable to parse the format string "ZREF_B == <B: 0x89d8300> (entity: B; id: 0x89d3ca0 <x-coredata://...`

有谁知道如何将`NSManagedObject`（*更新*）设置为预测过滤器（代表 where 子句）？

**编辑：对不起。当然 A 和 B 都继承自 NSManagedObject 而不是 NSObject。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:28:57.970

不确定我是否理解这个问题，但如果“ref_foreignkey_B”是从 A 到 B 的关系，那么你的谓词应该如下所示：

```
NSFetchRequest *fetch = [NSFetchRequest alloc] init];
fetch.entity = [NSEntityDescription entityForName:@"A" inManagedObjectContext:managedObjectContext];
NSPredicate *filter = [NSPredicate predicateWithFormat:@"ref_foreignkey_B == %@", self.B];

NSError *error = nil
NSArray *array = [managedObjectContext executeRequest:fetch];
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:29:32.997

根据**加布里埃尔**的建议：

您是否创建了数据模型？为什么你的实体子类`NSObject`？

然后

如果是您需要使用`ref_foreignkey_B`的实体的关系`B`

```
[NSPredicate predicateWithFormat:@"ref_foreignkey_B == %@", self.B]; 
```

显然，如果您使用该谓词，您需要查询（使用获取请求）`A`而不是`B`.

```
NSFetchRequest* fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"A"];
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"ref_foreignkey_B == %@", self.B]; 
```

**一些笔记**

你为什么用`ZREF_B`？这是在 sqlite 文件中创建的列（我想）。您不必使用它，而只需使用数据模型中声明的属性（属性或关系）。

> A 的 id、path 和 ref_foreignkey_B
> 
> B 的 id 和 name

当您处理 Core Data 时，您处理的是**对象图**，而不是数据库（例如 sqlite）本身。这是一个重要的理解点。您**不必**处理为您创建的 sqlite 文件（例如）。仅使用您创建的数据模型。

另外，我建议你创建一个从`B`to的反比关系`A`。这使您可以维护对象图中的完整性。有关信息，请阅读[关系](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)。

希望能帮助到你。

# php - 如何对产品进行分类 Magento

> ID：10617436
> 
> 赞同：0
> 
> 时间：2012-05-16T11:18:44.947
> 
> 标签：php, magento

我在 magento 商店中有大量产品，需要根据不同的属性将其分类到新的类别中，任何人都知道如何使用脚本来做到这一点。

例子：

如果产品属性“COLOR”的值为 Blue，则产品应在 cat 10 中，依此类推

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:57:42.940

迭代产品后，您可以使用 setCategoryIds 方法（此代码用于下拉属性，因为它使用 getAttributeTextMethod）：

```
$product->load($productId);
if( strcmp($product->getAttributeText('COLOR') , 'Blue') == 0 ){
    $product->setCategoryIds(array('cat1Id' ,'cat2Id'));
}
$product->save(); 
```

# jquery - 如何在 JQuery 的 JSlider 上放置指标？

> ID：10617438
> 
> 赞同：2
> 
> 时间：2012-05-16T11:19:28.723
> 
> 标签：jquery, jslider

我有一个 Jquery 滑块。

```
 <link href="jquery-ui-1.8.10.custom.css" rel="stylesheet" type="text/css"/>
  <script src="jquery-1.7.1.min.js"></script>
  <script src="jquery-ui.min.js"></script>
<STYLE>
    #demo-frame > div.demo { padding: 1px !important; }
    </STYLE>

<SCRIPT>
    $(function() {
        $( "#glider" ).slider({step:10, animate:true, min:0, max:100, value:50});

    });
    </SCRIPT>   

<DIV class=demo>
<DIV id=glider></DIV></DIV> 
```

![这是上面 JQuery 滑块代码的输出](../Images/8739dfe926cf8e4be53af98e9cf3eebe.png)

如何在台阶上放置 10 个值的槽口我想在每个台阶上放置一些槽口，例如 0、10、20、30 ....100。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:40:00.857

看起来手柄的样式是使用左侧的 %

```
<a href="#" class="ui-slider-handle ui-state-default ui-corner-all" style="left: 10%;"></a> 
```

其中包含滑块：

```
<div id="slider" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"><a href="#" class="ui-slider-handle ui-state-default ui-corner-all" style="left: 10%;"></a></div> 
```

所以我猜你是否可以提取滑块点来计算 %，然后使用相同的 % 设置标记槽口的样式。

恐怕我的答案不是全部，因为我不确定如果不深入研究如何将滑块指出为百分比。也许看看 jquery-ui 滑块的未缩小版本，看看百分比是如何计算的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:24:51.657

使用`values: [0, 10,20 ]`应该有效

# javascript - 在Jcarousel中添加新的li

> ID：10617439
> 
> 赞同：0
> 
> 时间：2012-05-16T11:19:30.050
> 
> 标签：javascript, jquery, jcarousel

我有 jcarousel 制作的滑块。它工作正常，但我想用图像 onclick 按钮添加新的 li。当我单击按钮 li 和 img 成功添加但未显示在滑块中时。请帮助..这是我的代码

```
 function onImageClick(clicked_id,cls){
        var addLi="<li><img src=''  width=\"157px\" height=\"84px\" id='mainImg' /></li>";
        var $savedList = $("#mycarousel");
        $savedList.append(addLi);
        mycarousel_reloadCallback();

           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:24:57.883

我认为您需要将 li 添加到 ul - 将选择器更改为

```
var $savedList = $("#mycarousel ul"); 
```

# c# - caliburn micro 上的验证

> ID：10617444
> 
> 赞同：2
> 
> 时间：2012-05-16T11:19:41.740
> 
> 标签：c#, wpf, validation, input, caliburn.micro

我使用 caliburn 微框架实现了我的第一个应用程序。我没有找到任何关于数据验证的好信息。谁能告诉我如何在 caliburn micro 中实现验证？有没有一种简单而优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:29:52.567

也许这可能会有所帮助[http://www.lyquidity.com/devblog/?p=71](http://www.lyquidity.com/devblog/?p=71)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-28T21:14:33.067

我为 CM 编写了一个小插件来启用流畅的构建器样式验证。随意使用：[https](https://github.com/AIexandr/Caliburn.Micro.Validation) ://github.com/AIexandr/Caliburn.Micro.Validation 使用示例：

```
 // Constructor
  public OrderLine()
  {
    AddValidationRule(() => Number).Condition(() => string.IsNullOrWhitespace(Number)).Message("Please fill the product name");
  } 
```

# ruby-on-rails - 如何为所有操作设置默认渲染

> ID：10617452
> 
> 赞同：0
> 
> 时间：2012-05-16T11:20:15.580
> 
> 标签：ruby-on-rails, render

我的应用程序在很多动作中使用`render :nothing => true`。我想要干燥。我怎么能说默认情况下不会为特定控制器渲染任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:55:47.137

您可以执行以下操作：

```
# put this in a module, or your ApplicationController
def self.nothing_for *actions
   before_filter :only => actions do
      render :nothing => true
   end
end

# This would go in your specific controllers
nothing_for :show, :new, :create 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T00:17:58.087

这可能会满足您的需要：

```
before_filter :render_nothing

private
def render_nothing
  render :nothing => true
end 
```

`before_filter`而不是`after_filter`因为后者是在动作完成之后执行的，也就是说，在内容被渲染之后。
来源：[http ://ap.rubyonrails.org/classes/ActionController/Filters/ClassMethods.html#M000128](http://ap.rubyonrails.org/classes/ActionController/Filters/ClassMethods.html#M000128)

# git - 忽略特定存储库中的文件

> ID：10617455
> 
> 赞同：1
> 
> 时间：2012-05-16T11:20:34.123
> 
> 标签：git, heroku, github

我有一个在 heroku 上运行的应用程序，我也在 github 上对其进行版本控制。但是有些文件我不需要放在 github 上（s3 配置、mongoid 配置等），但我确实需要它们放在 heroku 上。
如何仅在 github 上忽略这些文件，但在 heroku 上不忽略（不必使用另一个分支）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:24:45.933

该文件是否包含 API 密钥？在这种情况下，您可以使用[Heroku 的环境变量](https://devcenter.heroku.com/articles/config-vars)，这是我所知道的保护您的 API 密钥的最佳实践。

# sql - 根据两列选择匹配where条件的表行

> ID：10617459
> 
> 赞同：2
> 
> 时间：2012-05-16T11:20:48.410
> 
> 标签：sql, where-clause

我有以下结果集：

```
FieldTypeID    Level
1               0
2               0
2               1
3               0 
```

从此集中我想选择以下行：

```
FieldTypeID    Level
1               0
2               1
3               0 
```

简而言之，我想做的是编写一个 SQL where 条件，它将过滤出谁`FieldTypeID = 2`和谁的记录`Level = 0`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:24:05.677

```
SELECT FieldTypeID, Level FROM [table] WHERE FieldTypeID <> 2 OR Level <> 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:29:57.763

```
select fieldtypeid,level 
from [table]
WHERE fieldtypeid <> 2 
OR level = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:39:06.470

```
select *
from your_table
where not(FieldTypeID = 2 and Level = 0) 
```

# android - 浮点数如何转换为十六进制 - 使用 apktool 进行反编译

> ID：10617460
> 
> 赞同：0
> 
> 时间：2012-05-16T11:20:53.173
> 
> 标签：android, apk

使用 apktool 反编译 apk 时，我发现一个双精度数组被转换为下面的代码。apktool 是如何做到这一点的？

```
:array_0
 .array-data 0x8
     0xc7t 0x55t 0x9at 0xf4t 0x6dt 0x5bt 0x44t 0x40t
     0xfet 0x6t 0xdat 0x35t 0x7et 0x5bt 0x44t 0x40t
     0xd4t 0x57t 0x45t 0xf8t 0x59t 0x5bt 0x44t 0x40t
     0xf6t 0xe8t 0xaat 0x3et 0x4et 0x5bt 0x44t 0x40t
     0xc7t 0x55t 0x9at 0xf4t 0x6dt 0x5bt 0x44t 0x40t
 .end array-data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:34:04.507

构建了一个示例程序并对其进行了反编译。数字是双倍的，每行一个。[每个双精度都以IEEE754](http://en.wikipedia.org/wiki/IEEE754)格式编码，LSB 在前。我的数组我们定义为：

```
double array[]={ 0, 1, 0.5, 2 }; 
```

生成的 baksmali 如下所示：

```
:array_0
.array-data 0x8
    0x0t 0x0t 0x0t 0x0t 0x0t 0x0t 0x0t 0x0t
    0x0t 0x0t 0x0t 0x0t 0x0t 0x0t 0xf0t 0x3ft
    0x0t 0x0t 0x0t 0x0t 0x0t 0x0t 0xe0t 0x3ft
    0x0t 0x0t 0x0t 0x0t 0x0t 0x0t 0x0t 0x40t
.end array-data 
```

由于 1 的 IEEE754 表示是`0x3ff0000000000000`，我们可以得出结论，双精度数存储在小端 IEEE754 中。

如果您只想转换程序中的数字，您可以使用[在线转换器](http://www.binaryconvert.com/convert_double.html?hexadecimal=40445B6DF49A55C7)（在此链接中，您的第一个双精度已经输入）。

沙查尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:52:40.003

您没有提及您是否只是想理解，或者 apktool 是否只是未能为您反编译 APK。如果是后者，我编写了一个名为[zzos](https://github.com/Shachar/Lingnu-Android-Tools)的“竞争”工具，它可能更适合您。

如果您对格式感兴趣，请理解 Android 包含不止一种浮点格式。浮点数有时以 IEEE 标准格式存储，但有时它们以其他几乎定点格式存储。您引用的“双打”的确切含义实际上取决于它们的来源以及它们的编码方式。

尝试理解这些的最简单方法是在您的 APK 上运行“aapt d --values resources *apkfile* ”，并在那里搜索值。如果您将结果的相关部分粘贴到此处，我们可以尝试帮助您准确了解正在发生的事情，我可以尝试将您指向正确的编码位置。

沙查尔

# extjs - Extjs4 - 数据存储重复记录。可能吗？

> ID：10617462
> 
> 赞同：3
> 
> 时间：2012-05-16T11:20:59.613
> 
> 标签：extjs, extjs4, duplicates, store, records

是否可以在数据存储中添加重复记录？

```
var myData = [
{ id : 0, name : "Rec 0", column1 : "0", column2 : "0" },
{ id : 1, name : "Rec 1", column1 : "1", column2 : "1" },
{ id : 2, name : "Rec 2", column1 : "2", column2 : "2" },
{ id : 3, name : "Rec 3", column1 : "3", column2 : "3" },
{ id : 4, name : "Rec 4", column1 : "4", column2 : "4" },
{ id : 5, name : "Rec 5", column1 : "5", column2 : "5" },
{ id : 6, name : "Rec 6", column1 : "6", column2 : "6" },
{ id : 7, name : "Rec 7", column1 : "7", column2 : "7" },
{ id : 8, name : "Rec 8", column1 : "8", column2 : "8" },
{ id : 9, name : "Rec 9", column1 : "9", column2 : "9" }
];

var origine = new Ext.data.Store({
        //autoDestroy: true,
        storeid: 'origineRec',
        id:'origineRec',
        //model: 'DataObject',
        //idIndex: 0,
        fields: ['id','name','column1 ','column2 '],
        data: myData 
});

var destinazione = new Ext.data.Store({
        //autoDestroy: true,
        storeid: 'destinazioneRec',
        id:'destinazioneRec',
        //idIndex: 0,
        fields: ['id','name','column1 ','column1 ']
}); 
```

我有这样的情况，两个网格面板，两个商店，我必须将记录拖放到“destinazione”中，并且可以允许重复记录进入其中。

我在第二个网格（Rec 0 - Rec 0）中添加了重复记录，但在保存到网格后只有一条记录。

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:13:30.633

默认情况下`id`，属性是主键，您不能在商店中拥有多个具有相同键的记录。您可以通过指定其他内容来更改主要`idProperty`内容，但无论如何它不会解决您的问题。

如果您有两个商店并将记录从一个移动到另一个 - 那么最好从原始商店中过滤掉已经选择的记录，甚至删除它们。

# java - JPA2 Criteria API：在 from 子句中使用 Entity.class 和 Metamodel 的 EntityType 有什么区别

> ID：10617467
> 
> 赞同：0
> 
> 时间：2012-05-16T11:21:30.583
> 
> 标签：java, hibernate, jpa-2.0, criteria-api

有什么区别：

```
Root<Person> person = cq.from(Person.class); 
```

和

```
EntityType<Person> Person_ = em.getMetamodel().entity(Person.class);
Root<Person> person = cq.from(Person_); 
```

我在几个教程中都看到过..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:47:58.630

# 分析

查看 Hibernate 的[CriteriaQuery 父级的 QueryStructure from(..)](http://grepcode.com/file/repository.jboss.org/nexus/content/repositories/releases/org.hibernate/hibernate-entitymanager/3.5.2-Final/org/hibernate/ejb/criteria/QueryStructure.java#QueryStructure.from%28javax.persistence.metamodel.EntityType%29)方法：

```
public <X> Root<X> from(Class<X> entityClass) {
    EntityType<X> entityType = criteriaBuilder.getEntityManagerFactory()
            .getMetamodel()
            .entity( entityClass );
    if ( entityType == null ) {
        throw new IllegalArgumentException( entityClass + " is not an entity" );
    }
    return from( entityType );
}

public <X> Root<X> from(EntityType<X> entityType) {
    RootImpl<X> root = new RootImpl<X>( criteriaBuilder, entityType );
    roots.add( root );
    return root;
} 
```

我们看到，其中一个只是重载。

# 结果

更方便和样板转义的方法是将 Class 作为参数传递。

# 建议

您没有提供您正在使用的 JPA 实现，因为 JPA 的 CriteriaQuery 只是一个接口，而 EclipseLink 或 Hibernate 等实现提供者提供了实际实现。下次如果你考虑到这一点会更好。

# jquery - 组合选择器？

> ID：10617469
> 
> 赞同：1
> 
> 时间：2012-05-16T11:21:40.127
> 
> 标签：jquery, jquery-selectors

我有两个点击事件如下：

```
$($('[id^="tab"]')).live('click', function() {
    alert($(this).attr("id"));
});

$($('[id^="home"]')).live('click', function() {
    alert($(this).attr("id"));
}); 
```

即使唯一的区别是“主页”和“标签”，是否可以将其组合成一键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:23:27.050

```
$('[id^="home"], [id^="tab"]') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:23:16.123

当然，只需将它们除以`,`：

```
$('[id^="tab"], [id^="home"]').live('click', function() {
    alert($(this).attr("id"));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:23:59.180

```
$('[id^="tab"], [id^="home"]').live('click', function() {
    alert($(this).attr("id"));
}); 
```

[http://jsfiddle.net/yUYVh/3/](http://jsfiddle.net/yUYVh/3/)

# ios - iOS 表格视图查找单元格

> ID：10617470
> 
> 赞同：1
> 
> 时间：2012-05-16T11:21:43.790
> 
> 标签：ios, uitableview

我有一个带有自定义单元格的表格视图。单元格有一个图像视图、一个标签和一个进度视图。我想要实现的是根据触发的事件更新特定单元格中的进度视图。我的想法是通过事件中的名称标签找到单元格，然后更新进度视图。这可能不是一种有效的方法，但我想不出其他方法。其他想法也值得赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:27:48.740

您可以使用 NSDictionary 名称作为键和 NSIndexPath 作为对象。然后可以使用字典中的名称查找给定单元格的索引路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:32:33.973

`UITableView`有一个“cellForRowAtIndexPath:”方法，它应该为您提供特定行的单元格。

即类似的东西

```
// Get visible cell for data item
NSInteger row = [myArrayOfThings indexOfObject:thing];
NSIndexPath *inedexPath = [NSIndexPath alloc] initWithRow:row section:0];
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indeexPath];

// Update cell here ...
... 
```

免责声明：从内存中键入的代码 - 您可能需要查看一些方法名称的文档:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:01:25.193

更好的方法是使用标签，

您可以给每个单元格一个唯一的标签并通过此方法访问该单元格

```
//method of UIView(UIViewHierarchy)
- (UIView *)viewWithTag:(NSInteger)tag;
// can be used like this
 UITableViewCell *cell = (UITableViewCell*)[tableView viewwithtag:tag]; 
```

# yii - 在 YII 如何在模型类中为 datepicker 编写规则？

> ID：10617475
> 
> 赞同：1
> 
> 时间：2012-05-16T11:22:03.277
> 
> 标签：yii

我是新手`YII`。我创建了一个带有文本字段的表格并创建了模型和 crud 生成器，我为日期创建了文本字段。然后我用 datepicker 替换了它，但我不知道如何将我的新 datepicker 与模型连接起来。

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('name, gender, age, dob, doj, class,
                    no_seats, train_name, proof_1, proof_2, proof_3', 'required'),
        array('age, class, no_seats', 'numerical', 'integerOnly'=>true),
        array('name', 'length', 'max'=>20),
        array('gender', 'length', 'max'=>6),
        array('train_name', 'length', 'max'=>23),
                    //I created the below statement instead of the previous //one
                 //created for text field but it is not working
                    array('dob','date','format'=>Yii::app()->
                    locale->getDateFormat('medium')),
        array('proof_1', 'length', 'max'=>7),
        array('proof_2', 'length', 'max'=>8),
        array('proof_3', 'length', 'max'=>9),
        array('status', 'length', 'max'=>1),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
        array('refid, name, gender, age, dob, doj,
                    class, no_seats, train_name, proof_1, proof_2, 
                    proof_3, created, lastmodified, status', 'safe', 'on'=>'search'),
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T12:23:20.297

```
// View
$this->widget('zii.widgets.jui.CJuiDatePicker', array(
    'model'=>$model,
    'attribute'=>'date',
// additional javascript options for the date picker plugin
    'options'=>array(
    'showAnim'=>'fold',
    'dateFormat'=>'yy-mm-dd',
    ),
    'htmlOptions'=>array(
    'style'=>'height:20px;'
    ),
));

// add to Model rules
array('date', 'type', 'type'=>'date', 'dateFormat'=>'dd-MM-yy'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:33:29.983

您可以使用如下所示的日期选择器小部件来代替您拥有的任何文本输入属性。这将在表单和 $_POST 中创建正确的字段，并准备好被模型函数操作。请注意，您可以为模型添加一个验证器“日期”。您应该在小部件和规则中具有相同的 dateFormat。

```
 <?php  
        $this->widget('zii.widgets.jui.CJuiDatePicker', array(
            'model'=>$model,
            'attribute'=>'date',
            // additional javascript options for the date picker plugin
            'options'=>array(
                'showAnim'=>'fold',
                'dateFormat'=>'yy-mm-dd',
            ),
            'htmlOptions'=>array(
                'style'=>'height:20px;'
            ),
        )); 
    ?> 
```

由于您专门询问规则：

```
public function rules()
{return array(
   array('date_field', 'date'),
);} 
```

这是验证器的一个很好的总结： [http ://www.yiiframework.com/wiki/56/](http://www.yiiframework.com/wiki/56/)

# c# - 如何从 AVISplitter 输出引脚获取音频到 C# 中的 MemoryStream？

> ID：10617476
> 
> 赞同：2
> 
> 时间：2012-05-16T11:22:08.943
> 
> 标签：c#, .net, directshow, directshow.net

我在 C# 中创建一个应用程序，使用 DirectShow.NET 播放 .avi 文件。我需要为 .avi 文件中的音轨创建音频波形。

如何将输出引脚中的数据获取到 MemoryStream 中？或者是否有人知道任何可以从 DirectShow 音频过滤器生成音频波形的控件/过滤器。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:12:46.460

使用标准管道，控制应用程序甚至不应该直接访问数据，因此您必须执行以下操作之一：

*   添加 Sample Grabber、抓取数据并在代码中创建时间线
*   使用专门的过滤器为您获取数据并对其进行预处理以提供您可以从中构建时间线的时间线或数据

# java - 如何传递ArrayList的元素 到只需要数组的方法？

> ID：10617480
> 
> 赞同：0
> 
> 时间：2012-05-16T11:22:20.413
> 
> 标签：java, arraylist

我有一个 ArrayList，其元素是数组。例如`[[2,3,4],[5,6,7],[8,9,10]]`. 我需要将数组元素 ex 传递`[1,2,3]`给只接受数组的方法。

```
public ArrayList<Integer[]> arrayList;
//some code
for(int i = 0; i < arrayList.size(); i++) {
  Integer[] elementArray = arraylist.get(i);
  Integer = methodTakesOnlyArrays(elementArray);
  // more code... 
```

这返回一个`java.lang.ClassCastException: java.util.ArrayList cannot be cast to [Ljava.lang.Integer;`

我该如何纠正？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:36:03.270

除了您的代码包含一些语法错误之外，以下代码可以正确编译和执行：

```
public void first(){
    ArrayList<Integer[]> arrayList = new ArrayList<Integer[]>();
    arrayList.add(new Integer[]{2,3,4});
    arrayList.add(new Integer[]{5,6,7});
    arrayList.add(new Integer[]{8,9,10});
    //some code
    for(int i = 0; i < arrayList.size(); i++) {
      Integer[] elementArray = arrayList.get(i);
      Integer integer = methodTakesOnlyArrays(elementArray);
      // more code...

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:39:44.407

正如我已经编写了一些您所描述的代码，它运行得恰到好处。我正在使用JDK1.6.0_32。

这是我的代码：

```
public static void main(String[] args) {
    ArrayList<Integer[]> arrayList = new ArrayList<Integer[]>();
    Integer[] elementArrayA = { 1, 2, 3 };
    Integer[] elementArrayB = { 4, 5, 6 };

    arrayList.add(elementArrayA);
    arrayList.add(elementArrayB);

    for (int i = 0; i < arrayList.size(); ++i) {
        Integer[] elementArray = arrayList.get(i);
        System.out.println(arrayToString(elementArray));
    }
}

public static String arrayToString(Integer[] inputArray) {
    StringBuffer stringBuffer = new StringBuffer();
    stringBuffer.append("[");

    boolean isFirst = true;
    for (Integer elementInteger : inputArray) {
        if (isFirst) {
            stringBuffer.append(String.valueOf(elementInteger));
            isFirst = false;
        } else {
            stringBuffer.append(", ");
            stringBuffer.append(String.valueOf(elementInteger));
        }
    }

    stringBuffer.append("]");

    return stringBuffer.toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:53:57.687

```
public ArrayList<Integer[]> arrayList; 
//initialize the arrays and add them to the arraylist 
for(Integer[] in : arrayList) {  
  Integer result = methodTakesOnlyArrays(in); 
  // more code... 
} 
```

# oracle - 在 Oracle 中创建备份表触发器

> ID：10617481
> 
> 赞同：2
> 
> 时间：2012-05-16T11:22:25.773
> 
> 标签：oracle, plsql

我有一个表 A 由一个应用程序不断更新（插入语句）。我想创建另一个表 B，它只包含表 A 的几列。为此，我想创建一个在表 A 上插入后触发的触发器，但我不知道应该如何在触发器中编写插入语句。我不是数据库专家，所以我可能遗漏了一些简单的东西。请帮忙。

这是我的触发代码：

```
 CREATE OR REPLACE TRIGGER "MSG_INSERT_TRIGGER" 

AFTER
insert on "ACTIVEMQ_MSGS"

DECLARE
PRAGMA AUTONOMOUS_TRANSACTION;
begin
execute immediate 'truncate table MSG_BACKUP';
insert into MSG_BACKUP select * from ACTIVEMQ_MSGS;
COMMIT;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:34:59.087

这似乎不是一个好主意：每次在表 A 中插入新记录时，删除表 B 中的所有内容并复制表 A 中的所有记录。一旦表 A 中有很多记录，这将是一个巨大的性能问题。

在表 A 的所需列上创建视图还不够吗？

如果没有，也就是说，您仍然想将所有插入“记录”到另一个表中，那么就可以了。（我想你想复制以下字段：f1、f2、f3）

```
CREATE OR REPLACE TRIGGER TR_AI_ACTIVEMQ_MSGS
AFTER INSERT ON ACTIVEMQ_MSGS
FOR EACH ROW
BEGIN
  INSERT INTO MSG_BACKUP (f1, f2, f3)
  VALUES (:new.f1, :new.f2, :new.f3);            
END TR_AI_ACTIVEMQ_MSGS; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:35:38.000

在 Oracle 触发器中，记录值在 de :new 伪记录中可用。您的插入语句可能如下所示：

```
insert into B (column1, column2) 
values (:new.tableA_col1,:new.tableA_col2) 
```

# jquery - 如何在 Metro 应用程序中将 jQuery 与 Win8 一起使用？

> ID：10617484
> 
> 赞同：2
> 
> 时间：2012-05-16T11:22:40.380
> 
> 标签：jquery, windows-runtime

在整个网络上，我都看到您可以在 Javascript 应用程序中将 jQuery 与 Metro 一起使用，但我没有找到任何示例。

我遇到的问题是 Visual Studio 说第 1 行有一个无效字符，即 jQuery 脚本的第 1 个字符。显然，这是许可证评论的开始。

```
SCRIPT1014: Invalid character
File: ms-wwa://9fa409da-8869-421d-9a95-68ef5541152e-sxgejhq22jcna/js/jquery-1.7.2.min.js, line: 1 column: 1 
```

对于 jQuery Mobile 和我从头开始编写的 2 个自定义脚本，我遇到了同样的错误。我的 2 个脚本在那里没有评论。

我在默认项目 default.js 和 homePage.js 附带的脚本上没有收到此错误。</p>

自定义脚本用于在 Mac OS X 上开发 Web 应用程序。但 jQuery 脚本是直接从 Windows 机器上的 jQuery 网站下载的，从未接触过 Mac。

我也试过用不同的编码保存 jQuery。它们以“没有 BOM 的 UTF-8”开始（显然应该是正确的），我也尝试了 UTF-8 和 Ansi。

当我直接在 Visual Studio 中添加 Javascript 文件并且只在 VS 中编辑它时，我什至得到了这个错误。我使用的脚本标记与加载有效的 homePage.js 脚本的标记相同，但新脚本出现此错误。

我做了更多的实验，我认为它可能不会将文件复制到包中。如果我将 homePage.js 重命名为 homePage2.js ，它会抱怨它无法编译，因为它找不到 homePage.js 。但是我找不到任何地方可以编辑要打包的文件列表。

最终编辑：我开始了一个全新的项目并慢慢添加东西，这个新项目不存在问题。不知何故，原来的项目一定是腐败的，不知何故。我仍然想知道是什么原因造成的，所以如果再次发生，我可以修复它，但现在的解决方案是：开始一个新项目并废弃这个。

# ruby-on-rails - 在 Rails 中只运行回形针验证

> ID：10617485
> 
> 赞同：1
> 
> 时间：2012-05-16T11:22:42.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, paperclip, paperclip-validation

我有模特简介

```
class Profile < Abstract
    has_attached_file :avatar,                   
    ...
    validates_attachment_size :avatar, :less_than => 2.megabytes
    validates_attachment_content_type :avatar, :content_type => ['image/jpeg', 'image/png', ...]
    # Many other validations
end 
```

我有两种不同的形式：一种用于头像，另一种用于所有其他领域。用户必须能够在不填写第二个表单的情况下保存头像。是否可以仅验证回形针附件，跳过所有其他验证？按照[这个](https://stackoverflow.com/a/457313/1044646)答案，我试图这样做：

```
class Abstract < ActiveRecord::Base  
    def self.valid_attribute?(attr, value)
        mock = self.new(attr => value)
        unless mock.valid?
           return !mock.errors.has_key?(attr)
        end
        true
    end
end 
```

并在控制器中

```
def update_avatar
    if params[:profile] && params[:profile][:avatar].present? && Profile.valid_attribute?(:avatar, params[:profile][:avatar])
        @profile.avatar = params[:profile][:avatar]
        @profile.save(:validate => false)
        ...
    else
        flash.now[:error] = t :image_save_failure_message
        render 'edit_avatar'
    end
end 
```

但它不适用于回形针。`Profile.valid_attribute?(:avatar, params[:profile][:avatar])`总是返回真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:57:51.373

与其尝试做所有这些魔法，不如创建一个单独的 Image 或 Avatar 模型作为您的图像模型，如下所示：

```
class Attachment < ActiveRecord::Base

  belongs_to :owner, :polymorphic => true

  has_attached_file :file,
                :storage => :s3,
                :s3_credentials => "#{Rails.root}/config/s3.yml",
                :s3_headers => {'Expires' => 5.years.from_now.httpdate},
                :styles => { :thumbnail => "183x90#", :main => "606x300>", :slideshow => '302x230#', :interview => '150x150#' }

  def url( *args )
    self.file.url( *args )
  end

end 
```

一旦你有了这个，创建关系：

```
class Profile < Abstract
  has_one :attachment, :as => :owner, :dependent => :destroy
end 
```

然后，在您的表单中，您**首先保存附件**，独立于您的模型，然后尝试保存设置附件的**配置文件。**可能是这样的：

```
def create

  @attachment = if params[:attachment_id].blank?
    Attachment.create( params[:attachment )
  else
    Attachment.find(params[:attachment_id])
  end

  @profile = Profile.new(params[:profile])
  @profile.image = attachment unless attachment.new_record?
  if @profile.save
    # save logic here
  else
    # else logic here
  end 
end 
```

然后，在您看来，如果配置文件无效，您可以将新保存的附件发送到表单并重复使用它，而不必再次创建它。

# android - Android 致命异常：IntentService[lectorc2dmuser@gmail.com]

> ID：10617501
> 
> 赞同：0
> 
> 时间：2012-05-16T11:23:43.263
> 
> 标签：android, android-intent, android-c2dm

```
@Override
protected void onMessage(Context context, Intent intent) {
    Log.e("C2DM", "Neue Message.");
    Intent resultIntent = new Intent(context, ResultActivity.class);
    resultIntent.putExtra("message", "Message received");
    resultIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent);
} 
```

我可以从我的 logcat 中看到我进入了这个方法，然后当它尝试启动活动时，它会抛出标题中写的致命异常，并带有以下注释：

android.util.AndroidRuntimeException：从 Activity 上下文外部调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是你想要的吗？（我对 AndroidRuntime 的回复是：“这不是我在做什么吗？”）;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:27:45.433

您传递了错误的意图变量来`startActivity()`调用。您想用来`resultIntent`启动新活动并且您正在添加`FLAG_ACTIVITY_NEW_TASK`标志，`resultIntent`但是在启动新活动时您`intent`错误地通过了，即

```
resultIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intent); 
```

将其更改为

```
resultIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(resultIntent); 
```

# android - 如何捕获单击的共享应用程序的名称？

> ID：10617502
> 
> 赞同：2
> 
> 时间：2012-05-16T11:23:47.350
> 
> 标签：android, android-intent, share

对于统计使用情况，我需要知道用户单击了哪个共享应用程序。我用了：

```
Intent shareIntent = new Intent(Intent.ACTION_SEND);
shareIntent.setType("text/plain");
shareIntent.putExtra(Intent.EXTRA_SUBJECT, getString(R.string.app_name));
shareIntent.putExtra(Intent.EXTRA_TEXT, url);
startActivity(Intent.createChooser(shareIntent, getString(R.string.share_with))); 
```

你有想法吗？

谢谢

# ios - 多个 NSFetchedResultsController 和一个 UITableView？

> ID：10617507
> 
> 赞同：2
> 
> 时间：2012-05-16T11:24:02.230
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller

从视觉上看，我有一个`UITableView`允许`UISegmentedControl`“模式”选择，这将改变表格的排序顺序。

使用`NSFetchedResultsController`'s 我想我应该为每个不同的排序配置保留一个单独的控制器，然后根据当前选择的“模式”在显示的控制器之间交换。

但是我可以看到这会变得棘手，有 4 种不同的`NSFetchedResultsController`所有发送委托消息来更新`UITableView`. 为了解决这个问题，我计划`switch()`在每个相关方法中使用一个块来忽略除当前 'active' 之外的所有内容`NSFetchedResultsController`。

这听起来像是正确的方法还是我在这里遗漏了一些明显的东西？

-如果用户在更新到来时更改“模式”（即在`controllerWillChangeContent:`和之间`controllerDidChangeContent:`） ，我可以看到潜在的灾难

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:29:52.380

更改分段控件的选定索引，更改排序描述符并执行Fetch，不是更合乎逻辑吗？

```
self.fetchedResultsController.fetchRequest.sortDescriptors = [NSArray ... ]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T15:25:32.947

我在几个 Core Data 应用程序中使用了分段控件来更改排序/分组。在所有这些中，我总是只使用一个 NSFetchedResultsController，并在段更改时重新查询数据库。

正如您正确意识到的那样，这种方式实现起来要简单得多，发生意外错误的机会更少，而且更具**可扩展性**。例如，如果我决定根据客户反馈添加新的排序/分组段怎么办？你要继续添加多少个 NSFetchedResultsController？在某些时候（5 或 6），它会变得很荒谬。

上面还有grager的评论，你可以设置他们的所有代表，除了“活动的”到nil之外不会扩展（你必须修改许多代码行以使所有其他代表为nil，这将使维护代码变得困难.

所以我的建议是使用更简单的实现，即单个 NSFetchedResultsController，并在每次段更改时重新创建它。如果您对缓存感兴趣，可以为每个段使用单独的缓存名称。可以通过连接以下内容为每个段生成唯一的缓存名称：

```
[NSString stringWithFormat:@"Cache_%d", segment_index] 
```

# git - git 公共问题 - ubuntu 用户

> ID：10617511
> 
> 赞同：0
> 
> 时间：2012-05-16T11:24:13.903
> 
> 标签：git, ubuntu, permissions, github, pull

我的服务器有 2 个用户称他们为超级用户和编辑器

超级用户可以访问所有可以 sudo 等的东西。当我尝试从 github 拉取权限时，我得到权限被拒绝（公钥）。

现在，当我将所有文件添加到编辑器时，我可以提取文件，除非它们是由“超级用户”创建的，问题是如何添加“超级用户”以便他们可以从 gitgub 中提取

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:29:55.887

只需让它们成为组的一部分，并为该组授予文件读写权限。

# jquery - 需要覆盖内联css

> ID：10617516
> 
> 赞同：0
> 
> 时间：2012-05-16T11:24:34.997
> 
> 标签：jquery, css, wordpress, builder

我在使用**iThemes Builder 构建的 wordpress 网站中遇到问题**的 wordpress 网站中遇到问题。

当我添加插件**Jquery Megamenu**时，下拉菜单被*溢出切断：隐藏*属性切断，我似乎无法在我的自定义 css 中覆盖它（使用 !important 等）。

有人建议我可能的解决方案是编写一些 Jquery 来覆盖内联样式，但我不确定如何继续。有人可以帮忙吗？

您可以在此处查看该站点[http://www.labratrecords.com](http://www.labratrecords.com)，megamenu 是第二个。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:31:29.560

您最好先阅读 jQuery 教程以了解您在做什么（这是马口中的一个[http://docs.jquery.com/Tutorials:How_jQuery_Works](http://docs.jquery.com/Tutorials:How_jQuery_Works)），但是要设置元素的内联 css，您可以做这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
type="text/javascript"></script>

<script type="text/javascript">
  $(window).ready(function () {

    $('#elementID').css('overflow', 'visible');

  }
</script> 
```

您可以将“#elementID”替换为任何 css 选择器（包括选择多个元素的选择器）。例如

```
$('body').css('overflow', 'visible');

$('h2').css('overflow', 'visible');    

$('#toolbar a').css('overflow', 'visible'); 
```

**更多背景知识** 甚至在查看 jQuery（这是一个 javascript 库）之前，最好自己掌握一下 javascript。他是来自巧克力工厂的简短但写得很好的介绍教程： [http ://code.google.com/edu/ajax/tutorials/intro-to-js.html](http://code.google.com/edu/ajax/tutorials/intro-to-js.html)

# android - Android (2.2.1) 蓝牙：HTC Wildfire：从 Android 连接到 PC：每次都必须更改 UUID？

> ID：10617521
> 
> 赞同：0
> 
> 时间：2012-05-16T11:24:52.407
> 
> 标签：android, bluetooth

我有一个蓝牙服务器在笔记本电脑上监听传入连接。Android 是一个客户端，想要连接到 PC。

怎么了？我可以第一次连接并将数据发送到PC。当我关闭 Android Activity 并再次启动它时，连接功能通过，但 PC 没有注册新连接。当我尝试发送数据时，android 系统会记录以下内容：

**05-16 13:11:17.091: 错误/BluetoothEventLoop.cpp(102): event_filter: 收到信号 org.bluez.Device:PropertyChanged from /org/bluez/30064/hci0/dev_50_63_13_CB_52_96**

什么有效？如果我在服务器和客户端上更改服务器的 UUID，它将在我第一次尝试连接时再次工作。随后的尝试不起作用。

服务器代码：

```
 /** Waiting for connection from devices */
private void waitForConnection() {
    // retrieve the local Bluetooth device object
    LocalDevice local = null;

    StreamConnectionNotifier notifier;
    StreamConnection connection = null;

    // setup the server to listen for connection
    try {
        local = LocalDevice.getLocalDevice();
        local.setDiscoverable(DiscoveryAgent.GIAC);

        UUID uuid = new UUID("af29e59088cc11e1b0c40800200c9a56", false);
        System.out.println(uuid.toString());

        String url = "btspp://localhost:" + uuid.toString() + ";name=ThinBTClient";                     
        notifier = (StreamConnectionNotifier)Connector.open(url);
    } catch (Exception e) {
        e.printStackTrace();
        return;
    }

    // waiting for connection
    while(true) {
        try {
            System.out.println("Wait Thread: Waiting for connection...");
            connection = notifier.acceptAndOpen();        

            System.out.println("Got connection");               
            Thread processThread = new Thread(new ProcessConnectionThread(connection));
            processThread.start();              
        } catch (Exception e) {
            e.printStackTrace();
            return;
        }
    }
} 
```

客户端代码：

```
 BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
    UUID SPP_UUID = UUID.fromString("af29e590-88cc-11e1-b0c4-0800200c9a56");

    try {
        btSocket = device.createRfcommSocketToServiceRecord(SPP_UUID);
        mBluetoothAdapter.cancelDiscovery();
        btSocket.connect();
        outStream = btSocket.getOutputStream();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:02:44.150

Update:

I tested the same code on another laptop, Toshiba/Win7 and code works without a problem. So I suspect this is something with drivers. I will try updating.

# android - 在android中将大量数据插入sqlite

> ID：10617524
> 
> 赞同：3
> 
> 时间：2012-05-16T11:25:07.603
> 
> 标签：android, sqlite, insert

目前，我必须一次将超过 100 亿的数据插入到我的 android 中。但是，内存不足的问题会使程序崩溃。sqlite 插入测试非常简单。只需使用 for 循环生成 sql insert 命令并由“begin”和“commit”进行 wrqpped。

```
 private ArrayList<String> sqlInsertCmd = new ArrayList<String>();
    int QUERIES_TIMES = 10000000;
    private void CreateInsertQueries()
    {
        Random localRandom = new Random();
        int i = 0;
        while (i < QUERIES_TIMES)
        {
            int j = localRandom.nextInt(100000);
            sqlInsertCmd.add("insert into " + TABLE + " (a,b,c) values (" + i + "," + 
            j + ",'" + String.valueOf(j) + "')");
            ++i;
        }
    }

    Then..

    mDB.beginTransaction();
    for (int i=0; i<this.QUERIES_TIMES; i++)
    {
        mDB.execSQL(sqlInsertCmd.get(i));
    }
    mDB.setTransactionSuccessful();
    mDB.endTransaction(); 
```

有什么想法可以避免内存不足吗？

谢谢大家，但上面的代码只是一个简单的例子。在我的程序中，它更复杂。我必须在容器中存储一些东西（例如 hashMap）并动态构建 sql 语句。我可以创建 10 个服务，每个服务处理 1/10 个工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:32:49.983

**一些东西：**

1.  在进行批量插入时，[请参阅我的答案以获取一般提示。](https://stackoverflow.com/questions/8752193/fastest-and-most-efficient-way-to-pre-populate-database-in-android/8855122#8855122)
2.  不需要为您的 INSERT 语句提供临时容器（在本例中为 ArrayList<>）。只需在 try...finally 中使用[beginTransaction()](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#beginTransaction%28%29)和[endTransaction() 。](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#endTransaction%28%29)
3.  [通过SQLiteStatement](https://developer.android.com/reference/android/database/sqlite/SQLiteStatement.html)使用预编译语句与构建每个 INSERT 语句，如您的示例中所示。这是不必要的折腾。

**快速而肮脏的例子：**

```
// note: untested code used for illustration!
private boolean bulkInsertData(SQLiteDatabase db, final String tableName) {
    final int NUM_ROWS = 10000000;

    Random random = new Random();

    try {
        SQLiteStatement insStmt = insStmt = db.compileStatement("INSERT INTO " + tableName + " (a, b, c) VALUES (?, ?, ?);");
        db.beginTransaction();
        try {
            for(int i = 0; i < NUM_ROWS; i++) {
                insStmt.bindLong(1, i);
                insStmt.bindLong(2, random.nextInt(100000));
                insStmt.bindString(3, String.valueOf(i));
                insStmt.executeInsert();    //  should really check value here!
            }
            db.setTransactionSuccessful();
        } finally {
            db.endTransaction();    
        }
    } catch(SQLException se) {
        return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:59:59.593

与其创建一个包含 10000000 个 sql 查询（可能是 OutOfMemory 的潜在原因）的 ArrayList，不如简单地在创建查询字符串的同一循环中开始插入记录。例如：

```
private void CreateInsertQueries(SQLiteDatabase mDB)
{
    Random localRandom = new Random();
    int i = 0;
    String query;

    try{
        mDB.beginTransaction();

        while (i < QUERIES_TIMES)
        {
            int j = localRandom.nextInt(100000);
            query = "insert into " + TABLE + " (a,b,c) values (" + i + "," + 
            j + ",'" + String.valueOf(j) + "')";
            ++i;

            mDB.execSQL(query);
        }

        mDB.setTransactionSuccessful();
    }
    catch (SQLException e) { e.printStackTrace(); }
    finally{ mDB.endTransaction(); }
} 
```

这样做将帮助您跳过 ArrayList，这（我认为）是 OutOfMemory 的原因，因为它保存了这么多记录。

并确保您确实使用**外部存储器**来托管您的数据库文件，否则并非所有手机都有更大的内部存储器。

# playframework - 如何从 PlayPlugin 传递对象

> ID：10617526
> 
> 赞同：1
> 
> 时间：2012-05-16T11:25:23.650
> 
> 标签：playframework, playframework-1.x

我正在写一个 PlayPlugin。在 rawInvocation(request, response) 方法中，我创建了一个我希望所有控制器都可以访问的对象。实现这一目标的首选方法是什么？每个用户都有自己的对象。似乎尚未创建 Play 会话，因此我无法将其存储在那里。谢谢

克里斯蒂安·古尔德纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:31:12.170

如果你想使用你的插件创建一个全局过滤器，那么最好覆盖`PlayPlugin.beforeActionInvocation`方法：

```
public class MyPlugin extends PlayPlugin{
  @override public void beforeActionInvocation(Method actionMethod) {
     Object myObject = ...
     Http.Request.current().args.put("myobject", myObject);
  }
} 
```

在您的任何控制器中，您都可以通过以下方式获取对象：

对象我的对象 =`Http.Request.current().args.get("myobject")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:44:13.113

我不确定这是否是最好的或推荐的方式，但您始终可以将其添加到 request.param

# liferay-6 - 如何在 Liferay 中创建不同版本的站点？

> ID：10617531
> 
> 赞同：0
> 
> 时间：2012-05-16T11:25:39.740
> 
> 标签：liferay-6

我已经建立了我的网站，默认语言是西班牙语，现在我想建立它的英文版本。我已将“英语”链接添加到西班牙语网站，点击后会转到 www.example.com/en。英文网站上的控制面板也可以转换为英文，这很好。然后我尝试将内容从西班牙语翻译成英语。

这就是我所做的：假设我选择了“联系”菜单，其中有联系页面。在 URL 中，它看起来像这样：www.example.com/en/contact。通过Edit，我进入文本编辑器，将语言本地化为英文，将页面的标题和内容更改为英文并保存，希望只看到英文版本的更改，但更改也显示在西班牙语版本，即它覆盖了西班牙语版本，这意味着页面在两种语言版本上都是相同的。我认为 www.example.com/en/contact 下的副本与 www.example.com/contact 上的副本不同，但我错了。

问题是如何创建网站的英文版呢？我应该将整个站点的主题复制到一个文件夹中，例如 /en 并从那里进行更改吗？还是有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:58:18.957

1：创建内容

![创建内容](../Images/3493cdfc334b477468460d90810b481e.png)

2：添加翻译

![添加翻译](../Images/a4c8312e487c3bb173fe7411052f8755.png)

3：放翻译

![把翻译](../Images/83ecaeda3db99226217816465568a063.png)

使用 www.example.com/en/contact、www.example.com/bg/contact 等，您可以看到翻译。

# javascript - 将奇数匹配替换为印刷开引号，偶数匹配替换为印刷结束引号

> ID：10617537
> 
> 赞同：0
> 
> 时间：2012-05-16T11:26:12.947
> 
> 标签：javascript, regex, quotes, smart-quotes

我正在尝试用印刷引号（« 和 »）替换文本中的常规引号符号（ " ）。

有没有办法用 « 替换奇数引号匹配，偶数匹配 » ？

所以：你好“世界”！变成：你好«世界»！

此外，如果文本没有偶数个引号，它应该没有任何问题，因为这是为了“即时”执行

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:32:20.813

```
/**
 * @param {string} input the string with normal double quotes
 * @return {string} string with the quotes replaced
 */
function quotify(input) {
  var idx = 0;
  var q = ['«', '»'];
  return input.replace(/"/g, function() {
    var ret = q[idx];
    idx = 1 - idx;
    return ret;
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:26:59.117

我想出了另一种方法来做到这一点，但我不确定哪个更“优化”：

```
function quotify2(inputStr)
{
    var quotes = inputStr.match(/«|»/g);
    return inputStr.replace(/"/g, (quotes && quotes.length % 2 != 0 ? '»' : '«'));
} 
```

# python - 我可以将 socket.io 与 twisted.web 一起使用吗？

> ID：10617540
> 
> 赞同：4
> 
> 时间：2012-05-16T11:26:23.527
> 
> 标签：python, ajax, socket.io, twisted, twisted.web

我正在`twisted.web`服务器端使用 Python 编写一个 Web 应用程序。

在前端，我想用它`Ajax`来显示服务器中发生的事件的实时更新。

[有](https://stackoverflow.com/questions/9710759/how-do-websites-instantly-update-their-content-using-ajax) [很多](http://coder1.com/articles/twisted-long-polling-jsonp) 关于如何做到这一点的信息，所以我意识到我需要选择[一个](http://ajaxian.com/archives/prototype-and-jquery-a-code-comparison)[javascript](http://jquery.com/) [库](http://www.prototypejs.org/) [来](http://socket.io/)让我的生活更轻松。

`socket.io`似乎是一个不错的选择，因为它支持多种浏览器和传输机制，但是通过阅读他们的示例，它似乎只能与`node.js`?

那么，有谁知道是否可以使用`socket.io`with `twisted.web`？如果是这样，任何好的示例/教程的链接也将受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:17:53.053

您可以尝试[https://github.com/DesertBus/sockjs-twisted](https://github.com/DesertBus/sockjs-twisted)或者如果您出于特定原因需要 SocketIO，将[TornadIO2 移植](https://github.com/MrJoes/tornadio2)到[Cyclone](http://cyclone.io/)并不难。您可能会发现[这个问题](https://github.com/fiorix/cyclone/issues/82)很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:51:13.343

您需要在服务器端与客户端的 socket.io 脚本集成。我知道的用 Python 编写并执行此操作的服务器都使用 Tornado。您可以查看 Tornadio ( [https://github.com/MrJoes/tornadio](https://github.com/MrJoes/tornadio) ) 之类的实现，并查看他们使用哪些方法和类将 Tornadio 和 Tornado 挂钩在一起。这将使您很好地了解如何将其与您的 twisted.web 服务器集成。

我们刚刚从 socket.io 切换到[sockJS](https://github.com/sockjs/sockjs-client)（它也与 Tornado 兼容）并且已经看到了巨大的性能改进。

# php - Zend Framework 中定义一些路由后的默认路由

> ID：10617542
> 
> 赞同：0
> 
> 时间：2012-05-16T11:26:30.827
> 
> 标签：php, zend-framework, routing

一段时间以来，我一直在编写一个项目，并且使用了默认路由，即 :module\:controller:\:action。一段时间后，我在我的配置中添加了一些路由器，例如：

```
resources.router.routes.page.route = "page/:slug"
resources.router.routes.page.defaults.module = "default"
resources.router.routes.page.defaults.controller = "pages"
resources.router.routes.page.defaults.action = "view"
resources.router.routes.page.defaults.slug = "" 
```

但是，在那之后，当我单击带有新路由之一的视图 URL 助手生成的某个链接时，所有其他链接都会忽略一些给定的参数。例如，我有路线：

```
resources.router.routes.project.route = "project/:slug"
resources.router.routes.project.defaults.module = "projects"
resources.router.routes.project.defaults.controller = "projects"
resources.router.routes.project.defaults.action = "view"
resources.router.routes.project.defaults.slug = "" 
```

如果我去一个链接 /project/test 然后链接是这样的：

```
$this->url(
    array('module' => 'admin', 'action' => 'list-users', 'controller' => 'users')
, null,true
); 
```

将指向“/项目”

是否有可能在自定义路由之上维护默认路由？我可以添加一些与默认路由器相同的默认路由器吗？这可能很简单，但我可能错过了重点。感谢所有的帮助。

我添加了这样的东西，但没有效果：

```
resources.router.routes.default.route = ":module/:controller/:action"
resources.router.routes.default.defaults.module = "default"
resources.router.routes.default.defaults.controller = "pages"
resources.router.routes.default.defaults.action = "view"
resources.router.routes.default.defaults.slug = "" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:27:06.340

为了让您设置自定义路由，您需要获取路由器组件并将您的路由传递给它。

这就是我在我正在做的一个项目中的做法。在您的 Bootstrap 类中，您创建以下函数

```
protected function _initRoutes()
{
    $this->bootstrap('frontcontroller');
    $front = Zend_Controller_Front::getInstance();
    $router = $front->getRouter();
    $myRoutes = new Zend_Config_Ini(APPLICATION_PATH . '/configs/routes.ini','production');
    $router->addConfig($myRoutes,'routes'); 
```

这会调用前端控制器并从中获取路由器。然后我将我的路线配置传递给它。

我希望这回答了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:58:49.700

问题是 url helper 的选项如下：

```
url($urlOptions, $name, $reset) 
```

因此，当您设置`$name`为时`null`，将使用当前路线 ( `'project'`)。不是事件设置`$reset`将`true`有所帮助。替换`null`为`'default'`它应该可以工作。

# java - Hadoop 无法设置 Reducers > 1

> ID：10617543
> 
> 赞同：3
> 
> 时间：2012-05-16T11:26:34.787
> 
> 标签：java, hadoop, mapreduce, reduce, biginsights

我正在使用 Hadoop 进行大学作业，并且我的代码可以正常工作，但是我遇到了一个小问题。

我正在尝试将减速器的数量设置为 19（这是文档建议的 0.95 * 容量）。但是，当我在任务跟踪器中查看我的工作时，它总共显示 1 个减速器。

```
System.err.println("here");
job.setNumReduceTasks(19);
System.err.println(job.getNumReduceTasks()); 
```

预期产量：

```
here
19 
```

但在最终输出中我得到：

```
12/05/16 11:10:54 INFO mapred.JobClient:     Data-local map tasks=111
12/05/16 11:10:54 INFO mapred.JobClient:     Rack-local map tasks=58
12/05/16 11:10:54 INFO mapred.JobClient:     Launched map tasks=169
12/05/16 11:10:54 INFO mapred.JobClient:     Launched reduce tasks=1 
```

我覆盖的mapreduce部分是：

*   映射器
*   减速器
*   分区器
*   分组比较器。

我的第一个想法是分区器为每个键返回相同的值。我检查了这一点，但事实并非如此。

我还检查了石斑鱼是否正常工作。

我不确定还有什么可能导致这种情况。如果有人可以提供帮助，将不胜感激。

我是一个非常反对 Java 的人，所以如果可以的话，请尝试使用非常明确的例子。

PS：我没有设置这个集群，它是由大学设置的，所以我不确定任何配置变量。PS：要发布的代码太多，所以请让我知道您特别想看到的任何代码。

**编辑：** TejasP 向我提出了以下问题：

> 您真的是在 Hadoop 上运行代码还是在本地模式下运行代码？（看看你的工作是否出现在 jobtracker 和 tasktracker 上）。

是的，我是，它可以在 jobtracker UI 中查看。这也报告了 1 个减速器。以及注意：这在 settings.xml 中将减速器列为 1

> 您是否在环境中导出了 HADOOP 变量？

是的，它们在 env 中可见，并且在我设置它们之前代码不会编译。

```
env | grep HADOOP
HADOOP_HOME=/mnt/biginsights/opt/ibm/biginsights/IHC
HADOOP_CONF_DIR=/mnt/biginsights/opt/ibm/biginsights/hadoop-conf 
```

> 集群是单节点还是多节点？并且即使集群有多个节点，所有节点都健康吗？其他节点有问题吗？

是的，有多个节点 (10) 作业跟踪器报告：

```
Nodes: 10
Map Task Capacity: 20
Reduce Task Capacity: 20
Blacklisted Nodes: 0 
```

> 您是否正确使用 setNumReduceTasks？如上所述，我调用了 set，然后获取并取回了它被设置为 (19) 的值，但最终的代码仍然只使用了 1。
> 
> 您可以通过删除细节将您的代码缩减为一个小的 map-reduce 代码（这仅用于 ?debugging）。运行。走着瞧吧。面对同样的问题，请在原始问题中提供简化的代码。

我将尝试再次编辑结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:39:52.243

看起来您正在 LocalJobRunner 模式下运行它（很可能来自 eclipse）。在这种模式下，如果reduce任务的数量> 1，它会将数量重置为1。看看LocalJobRunner.java中的以下几行

```
int numReduceTasks = job.getNumReduceTasks();
if (numReduceTasks > 1 || numReduceTasks < 0) {
      // we only allow 0 or 1 reducer in local mode
      numReduceTasks = 1;
      job.setNumReduceTasks(1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:45:38.370

您需要考虑的几点：

1.  您真的是在 Hadoop 上运行代码还是在本地模式下运行代码？（看看你的工作是否出现在 jobtracker 和 tasktracker 上）
2.  您是否在环境中导出了 HADOOP 变量？
3.  集群是单节点还是多节点？
4.  即使集群有多个节点，所有节点都健康吗？其他节点有问题吗？
5.  您是否正确使用 setNumReduceTasks ？您可以通过删除细节将您的代码缩减为一个小的 map-reduce 代码（这仅用于调试）。运行。走着瞧吧。面对同样的问题，请在原始问题中提供简化的代码。

# c# - 如果不直接引用单例类会被复制吗？

> ID：10617545
> 
> 赞同：0
> 
> 时间：2012-05-16T11:26:45.047
> 
> 标签：c#, c#-4.0, reference, singleton, duplicates

假设我有 DLL 程序集**A**，我以正确的方式实现了单例模式。让它成为`Manager`他的`Instance`静态属性返回唯一实例的类。

假设我已经创建了声明类的 DLL 程序集**B**`Controller`并且该程序集引用了**A**并且`Controller`该类使用了`Manager`，好吧。

最后，有一个控制台应用程序**C**，我在其中获得了对程序集**B**和几个类实例的唯一引用`Controller`。

现在，问题。这些实例是否会`Manager`在它们之间共享类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:28:00.877

> 现在，问题。这些实例是否会在它们之间共享 Manager 类？

是的，它们将共享同一个实例，因为所有这些程序集都位于一个 AppDomain 中。如果您在其中引用其他程序集并尝试**访问**`Manager.Instance`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:28:49.433

答：是的，因为它`Manager`是正确实现的单例。

# java - PHP json_encode() 什么都不返回

> ID：10617547
> 
> 赞同：0
> 
> 时间：2012-05-16T11:26:52.747
> 
> 标签：java, php, android, json

好的，几天前，我用 Java 编写了一段代码，将 post 请求发送到 PHP 文件，以便将一些数据存储在 MySQL 数据库中并接收简单的 json_encode() 字符串，例如来自 PHP 的“error_101”响应，它工作正好。昨天我重新安装了我的 XAMPP，因为我在 openssl PHP 扩展方面遇到了一些问题，现在我的 json_encode() 响应都没有返回值。我检查了 phpinfo() ，它说启用了 json 支持。提到从 JAVA 发送到 PHP 的值也是 JSON 对象，并且 json_decode() 工作得很好！

这是我将响应从 PHP 发送到 JAVA 的代码：

```
<?php 
    header('Content-type: application/json');
    echo json_encode("error_101");
?> 
```

这是在 JAVA 中获取响应的代码

```
HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, 10000);
HttpConnectionParams.setSoTimeout(httpParams, 10000);
HttpClient client = new DefaultHttpClient(httpParams);

String url = "http://192.168.254.19/android/register.php";

HttpPost request = new HttpPost(url);
request.setEntity(new ByteArrayEntity(json.toString().getBytes("UTF8")));
request.setHeader("json", json.toString());

HttpResponse response = client.execute(request);
HttpEntity entity = response.getEntity();

String result = null;
if (entity != null) {
    InputStream instream = entity.getContent();

    InputStreamReader is_reader = new InputStreamReader(instream);
    BufferedReader br = new BufferedReader(is_reader);
    result = br.readLine();
    Log.i("Read from server", result);
    Toast.makeText(this,  result, Toast.LENGTH_LONG).show();
} 
```

我得到的回应是“ `<br />`”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:33:04.367

您确定在读取的链上某处没有一些调试代码

```
echo $TesttVar1 . '<br />'; 
```

这也会阻止“header()”的工作。打开所有错误（error_reporting(E_ALL); ini_set('display_errors', 'on'); ）
，如果是这种情况，它将向您显示输出的行。

但是如果它是 json_encode，为了帮助清除它，只需返回“Error_101”而不使用要测试的函数。但我不认为你在程序中走得那么远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:08:04.733

在这种情况下：

```
header("Content-type: text/html");
echo json_encode("error_101"); 
```

有用。

在另一种情况下：

```
header("Content-type: application/json");
echo json_encode("error_101"); 
```

它不起作用。

这似乎是一个错误！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:32:17.783

json_encode 需要一个数组。喜欢

```
json_encode(array('status'=>'error_101')); 
```

# c# - ComboBox.Items.AddRange 性能

> ID：10617551
> 
> 赞同：3
> 
> 时间：2012-05-16T11:27:06.803
> 
> 标签：c#, performance, combobox

我有一个 ComboBox，当我重新填充它时，这似乎是一项相当耗时的任务。在进行了一些分析之后，我发现大部分时间都花在了 ComboBox.Items.AddRange(Array) 方法上。我在下面包含了一个示例方法，它显示了我如何执行 ComboBox 的重新填充。

```
public void Repopulate(IList<MyType> sortedList)
{
    MyComboBox.BeginUpdate();

    try
    {
        MyComboBox.Items.Clear();
        MyComboBox.Items.AddRange(sortedList.ToArray());
    }
    finally
    {
        MyComboBox.EndUpdate();
    }
} 
```

sortedList 包含大约 280 个项目，最多有 53 个 ComboBox 需要重新填充。因此，重新填充所有这些控件可能需要相当长的时间（在高规格机器上大约 700 毫秒，在低规格机器上大约 8000 毫秒），这对于我的要求来说太慢了。我尝试将 sortedList 添加到新的 IList 中，这大约需要 1 毫秒（在我的高规格机器上）。

我需要重新填充 ComboBox 以便花费更少的时间，理想情况下与 IList 的时间相似，但任何性能提升都会很好。到目前为止，我一直无法找到任何方法来提高重新填充的速度。

有没有人知道如何减少重新填充 ComboBox 所需的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:20:10.587

您的问题可能是您启用了组合框的`Sorted`属性。启用此选项后，您调用`AddRange`组合框会对所有这些项目进行排序，如果您的项目已经排序，则不需要。

为了证明我的观点，我创建了两个组合框，它们使用 10,000 个排序的整数和`AddRange`. 唯一的区别是一个组合框`Sorted`启用了该属性，而另一个没有。以下是结果`AddRange`调用的时间（以毫秒为单位）

```
notSortedCombo: 5ms
sortedCombo: 1140ms 
```

这可能是你的问题吗？你能有 53 个启用了 sorted 属性的组合框吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:38:15.307

`AddRange`已经调用`BeginUpdate`并且`EndUpdate`在引擎盖下，所以你自己调用它并没有获得任何东西。

这为我节省了几毫秒：

```
public void Repopulate(IList<string> sortedList) {
  comboBox1.BeginUpdate();
  comboBox1.Items.Clear();
  foreach (string item in sortedList) {
    comboBox1.Items.Add(item);
  }
  comboBox1.EndUpdate();
} 
```

更大的问题可能是设计：53 个组合框是向用户抛出的大量组合框——用户将无法同时与所有 53 个控件进行交互。您可能会有点 hacky，只需使用可见值（1 项）填充组合框，然后在控件获得焦点或在后台计时器中填充列表。

但考虑减少屏幕上的控件数量。空白被认为是一件好事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:47:26.273

您可以通过将`FormattingEnabled`组合框的属性更改为`False`

问题是 Visual Studio 保持它就`True`好像您没有在设计器中“手动”指定项目，而是以编程方式添加它们。

试试，它为我解决了问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:39:28.133

关于 UI 虚拟化：WPF（[示例](http://bea.stollnitz.com/blog/?p=338 "例子")）和 WinForms 都存在虚拟化。但只有一些控件支持它，如 ListView、DataGridView、TreeView 等。这些是为更大量数据设计的控件。如果可能，您可以切换到这些控件之一。

所有控件是否同时在屏幕上可见？也许只有更新可见的会有所帮助。

另一种方法是异步更新组合框。如果你有幸在 .NET 中使用新的 async/await 东西，这很容易做到。如果您想手动执行此操作，您可以只更新一个组合框并在未来几毫秒安排下一个组合框的更新（使用计时器或 TPL）。这样，UI 至少在更新发生时仍然响应。

还有一种方法是仅当用户关注某个 ComboBox 时才更新列表。通常不需要更新内容，因为用户只有在使用 ComboBox 时才会看到它。

您还可以尝试在更新其数据之前隐藏组合框。或者您可以告诉 Windows 在修改内容时不要重绘 UI（[此处为 StackOverflow 主题](https://stackoverflow.com/questions/487661/how-do-i-suspend-painting-for-a-control-and-its-children)）。但我还没有测试这是否真的能提高性能。

# php - SwiftMailer 不发送邮件，为什么？

> ID：10617552
> 
> 赞同：8
> 
> 时间：2012-05-16T11:27:09.843
> 
> 标签：php, email, swiftmailer

SwiftMail 不发送我的电子邮件，但`mail()`确实有效。[和这里](https://stackoverflow.com/questions/3552937/swiftmailer-wont-send-mail-but-mail-will)一样。

我添加了 EchoLogger，但它不打印任何内容。

```
$message = Swift_Message::newInstance();
$message->setSubject('Test');
$message->setTo( $email );
$message->setFrom(ABSENDER);
$message->setBody($nl_text);

$transport = Swift_MailTransport::newInstance();
$mailer = Swift_Mailer::newInstance($transport);

$logger = new Swift_Plugins_Loggers_EchoLogger();
$mailer->registerPlugin(new Swift_Plugins_LoggerPlugin($logger));

$result = $mailer->send($message, $failures);
var_dump($failures); 
```

电子邮件被退回，`$failures`但为什么？

**更新**

在`Swift_Transport_SimpleMailInvoker::mail`我转储了参数并得到了这个：

```
 $headers =>
  string(208) "Message-ID: <1337173064.4fb3a4480b8dd@domain.de>
Date: Wed, 16 May 2012 14:57:44 +0200
From: news@domain.de
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
"
  $extraParams =>
  string(15) "-fnews@domain.de" 
```

`$to, $subject, $body`和我用的一样`mail()`。仍然不知道问题是什么。

**更新#2**

这对我来说很好：

```
mail($email, 'Test', $nl_text, "From: " . ABSENDER); 
```

**免责声明**：这不是解决方案，而是我使用的解决方法，因为我没有时间调试框架并找到真正的解决方案。随意使用上面提供的信息来调试自己并在此处发布您的解决方案。我很乐意接受并投赞成票。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T12:10:56.487

我建议您使用调试器并单步执行 send() 背后的代码。

如果你不能使用调试器，你应该看看`mail`. `lib/classes/Swift/Transport/SimpleMailInvoker.php`使用shutup 操作符(´@´) 调用内部邮件功能。也许删除此运算符可以向您显示错误消息。您也可以使用`var_dump()`转储那里传递的参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-26T09:51:51.947

我有同样的问题。

根据[swiftmailer.org](http://swiftmailer.org/docs/sending.html)的文档，默认情况下 Swift_MailTransport::newInstance() 使用参数`-f%s`，这就是为什么你`"-fnews@domain.de"`要解决`-f %s`.

您的代码现在看起来像这样 `$message = Swift_Message::newInstance('-f %s')`：

我解决了这个问题，只需传递`null`给 __construct()。所以我的工作代码如下所示：

`$message = Swift_Message::newInstance(null)`;

我希望它会帮助某人。

PS 我使用 Postfix 发送电子邮件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-31T14:50:56.517

我能够修复它。我在标头中使用 noReply@mydomain.com 并且未创建此电子邮件帐户。我创建了 noReply@mydomain.com 并且我的电子邮件开始工作。我希望这对某人有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T12:45:52.710

看起来您正在使用[根据他们的文档](http://swiftmailer.org/docs/sending.html#the-mail-transport)默认使用的默认传输机制`mail()`。

使用此 Transport 时的严重缺点是：

*   不可预测的邮件标头
*   **缺乏关于交付失败的反馈**
*   缺乏对需要实时交付反馈的几个插件的支持

[来源](http://swiftmailer.org/docs/sending.html#the-mail-transport)

如果我正在调试它，我会找到 SwiftMailer 的`mail()`函数实现，并转储它传递的参数，并将它们与你自己的工作版本进行比较`mail()`。我对 SwiftMailer 没有任何经验，但这似乎是一个快速的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-18T15:06:31.540

问题出在`Swift_Transport_MailTransport, private $_extraParams = '-f%s'`.

标志`'-f'`（请参阅您的代码`string(15) "-fnews@domain.de"`：）在某些情况下会失败。Code Igniter 有同样的“bug”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-15T00:04:09.850

我在 symfony 上发现如果我只是用“exit()”退出函数，例如，swiftmailer 不会发送邮件，但如果我以

返回新的响应（）；它发送良好。所以我不确定。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-05-14T11:09:00.253

这可能真的很老了，我在使用**较短** *的*电子邮件时解决了同样的问题。@ 符号后的最大长度似乎是 10。这是我迄今为止测试过的。

例子：

```
$sname = 'noreply@system.com';
->setFrom(array($sname => 'Some Header Title here')); 
```

# jquery - 在第一页加载时触发 jquery 脚本，然后再为该用户触发？

> ID：10617555
> 
> 赞同：0
> 
> 时间：2012-05-16T11:27:25.853
> 
> 标签：jquery

我在我的网站上使用这个 jQuery 模态窗口脚本：[http ://www.zurb.com/playground/reveal-modal-plugin](http://www.zurb.com/playground/reveal-modal-plugin)

当前，当用户单击链接时，它会激活模态窗口。但是，我想将其修改为在第一次加载页面后自动运行。但是同一用户随后访问同一页面将不会再次激活该脚本。我可能会弄清楚如何让它自己在页面加载时运行。但是让它只触发一次，然后再也不会发生是我不熟悉的事情。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:35:04.910

您需要在该客户端的浏览器中持久保存一些内容，或者如果这是一个用户拥有个人资料的 Web 应用程序，您需要跟踪服务器端的状态。

如果你在客户端做这一切，你可能会使用 cookie。您可以从服务器端设置 cookie，也可以在 JavaScript 中设置。

以下是一些设置 cookie/获取 cookie 功能：

```
function setCookie(cookieName,cookieValue,nDays) {
 var today = new Date();
 var expire = new Date();
 if (nDays==null || nDays==0) nDays=1;
 expire.setTime(today.getTime() + 3600000*24*nDays);
 document.cookie = cookieName+"="+escape(cookieValue)
                 + ";expires="+expire.toGMTString();
}

function getCookie(cookieName) {
 var theCookie=" "+document.cookie;
 var ind=theCookie.indexOf(" "+cookieName+"=");
 if (ind==-1) ind=theCookie.indexOf(";"+cookieName+"=");
 if (ind==-1 || cookieName=="") return "";
 var ind1=theCookie.indexOf(";",ind+1);
 if (ind1==-1) ind1=theCookie.length; 
 return unescape(theCookie.substring(ind+cookieName.length+2,ind1));
} 
```

所以，你会像这样把它绑在一起：

```
$(function() {

     var skipModal = getCookie('skipModal');
     if (!skipModal) { // check and see if a cookie exists indicating we should skip the modal
         // show your modal here

         setCookie('skipModal', 'true', 365*5); // set a cookie indicating we should skip the modal
     }
}); 
```

# java - 如何调用存在于私有内部类中的私有方法

> ID：10617561
> 
> 赞同：5
> 
> 时间：2012-05-16T11:27:54.160
> 
> 标签：java, reflection, private-methods

我想测试一个存在于私有内部类中的私有方法

```
 public class MyBigClass {
    private class MyInnerClass {
       private void wantedMethod() {
       }
    }
 } 
```

我想打电话`wantedMethod()` 来测试它

这是我的代码

```
Class[] classes = MyBigClass.class.getDeclaredClasses();
    for (int i = 0; i < classes.length; i++) {
        // this code print "MyInnerClass"
        System.out.println(">> inner classes >> " + classes[i].getSimpleName());
        if (classes[i].getSimpleName().equals("MyInnerClass")) {
            Class clazz = classes[i];
            // Constructor c=clazz.getConstructor();
            Method[] methods = clazz.getDeclaredMethods();
            // this code print "wantedMethod"
            for (int j = 0; j < methods.length; j++) {
                System.out.println("inner class methods >>  " + methods[i].getName());
            }

        }

    } 
```

**问题**：我不能打电话`wantedMethod()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T15:41:12.510

如果你想调用一个非静态方法，你需要告诉你要调用哪个对象。在您的情况下，您需要内部类对象，但由于您还没有，因此您需要创建它。由于 Java 不能在没有外部类对象的情况下创建内部类对象，因此您也需要创建该外部对象。

所以这些是你需要采取的步骤：

*   创建外部类对象（如果你没有），
*   使用外部类对象创建内部类对象，
*   在内部类对象上调用方法。

您可以这样做：（
您只需要记住默认构造函数与其类的可见性具有相同的可见性，因此私有类将具有私有构造函数，我们需要先使其可访问才能使用它）

```
try {
    //creating parent object
    Object outer = new MyBigClass();

    //creating inner class object
    Class<?> innerClass = Class.forName("MyBigClass$MyInnerClass");
    Constructor<?> constructor = innerClass.getDeclaredConstructor(MyBigClass.class);//inner object must know type of outer class
    constructor.setAccessible(true);//private inner class has private default constructor
    Object child = constructor.newInstance(outer);//inner object must know about its outer object

    //invoking method on inner class object
    Method method = innerClass.getDeclaredMethod("wantedMethod",new Class<?>[]{});
    method.setAccessible(true);//in case of unaccessible method
    method.invoke(child,new Object[]{});

} catch (ClassNotFoundException | NoSuchMethodException | SecurityException | InstantiationException | IllegalAccessException | IllegalArgumentException | InvocationTargetException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
```

[您可以在此问题](https://stackoverflow.com/questions/2097982/is-it-possible-to-create-an-instance-of-nested-class-using-java-reflection)中找到有关通过反射创建内部类对象的更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:34:27.127

这是因为您的班级没有命名`CodeCircuit`。删除该`if`条件，它将起作用。

还要删除该行`Constructor c=clazz.getConstructor();`，因为它会引发异常。

进行这些更改后，您自己的代码将打印出来

```
>> inner classes >> MyInnerClass
inner class methods >>  wantedMethod 
```

## 编辑

使用此代码执行该方法。

```
 Class<?>[] classes = MyBigClass.class.getDeclaredClasses();

    for (Class<?> clazz : classes) {
        if(clazz.getSimpleName().equals("MyInnerClass")) {
            Method method = clazz.getDeclaredMethod("wantedMethod", new Class[] {});
            method.setAccessible(true);
            method.invoke(clazz.getDeclaredConstructor(MyBigClass.class).newInstance(new MyBigClass()), new Object[] {});
        }
    } 
```

语法有点奇怪，让您使用外部类来获取内部类构造函数。它的行为就像你有一个在你的内部类中定义的具有以下签名的构造函数：

```
public MyInnerClass(MyBigClass bigClass) {
} 
```

但是，我认为这就是 Java 使用反射处理内部（嵌套）类的方式。

请注意，您必须`public`为内部类提供构造函数。

```
public class MyBigClass {
    private class MyInnerClass {
        public MyInnerClass() {
            System.out.println("hello");
        }
        private void wantedMethod() {
            System.out.println("world");
        }
    }
} 
```

您还必须`setAccessible(true)`使用私有方法才能调用它。

## 编辑 2

经过进一步调查，当我反编译生成的`MyBigClass$MyInnerClass.class`类时，我发现我的预感是对的：

```
public class MyBigClass$MyInnerClass {
    public MyBigClass$MyInnerClass(MyBigClass paramMyBigClass) {
        System.out.println("hello");
    }
    private void wantedMethod() {
        System.out.println("world");
    }
} 
```

**如果有人可以对这种行为有所了解，那将非常高兴**

# java - 转到其他选项卡时保持会话进行的最佳方法

> ID：10617562
> 
> 赞同：0
> 
> 时间：2012-05-16T11:27:57.537
> 
> 标签：java, session, parameters, secure-coding, browser-tab

`webapp`当您在浏览器的另一个选项卡中打开相同的 java 并以最安全的方式传递用户名/密码等参数时，保持相同会话的最佳方法是什么。
背后的目的是在`webapp`对某些服务进行一些请求后导航到下一个导航页面。
我在客户端做。

这是我现在想到的一个想法：

1.  在 URL 中添加参数（不安全）
2.  ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:36:09.097

在您的服务器中，您可以检查传入请求是否具有有效会话，如果它具有有效会话，则从会话中检索用户名或类似标识符。

根据用户的不同，如果他们实际登录系统，您可以向他/她显示他们将进入的主页。

如果您想根据最后一个操作显示响应，那么您可以将最后一个操作作为会话的一部分，并在您的服务器上设置规则，该规则应根据最后一个操作获取正确的页面。

例如，如果您在一个选项卡中有有效会话并且您再次在另一个选项卡中打开 gmail，gmail 将始终向您显示收件箱。

如果这是在服务器级别处理的，那么它是高度安全的，因为您无需附加、发送用户凭据。

# java - swt 布局建议

> ID：10617563
> 
> 赞同：0
> 
> 时间：2012-05-16T11:28:00.317
> 
> 标签：java, layout, swt

我需要一种布局，其中 2 个 compsites 可以垂直坐在一起。第一个复合材料的高度应该比第二个大。我不能使用空布局。我必须为此使用一些布局管理器。每当我调整外壳大小时，复合材料也应该调整大小。哪个布局可以管理这个？请参阅随附的屏幕截图。这是我需要的那种输出。！[有人可以看到我附在此处的图像吗？我看不见。

![在布局屏幕的屏幕截图下方](../Images/bd34c81ce91c6affa1bd418b7f076ab9.png)

我不知道为什么没有出现屏幕截图。我在下面添加了代码。请试试。

```
package views;

import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.layout.FormLayout;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.SWT;

public class NewComposite extends org.eclipse.swt.widgets.Composite {
    private Composite composite1;
    private Composite composite2;

    /**
    * Auto-generated main method to display this 
    * org.eclipse.swt.widgets.Composite inside a new Shell.
    */
    public static void main(String[] args) {
        showGUI();
    }

    /**
    * Overriding checkSubclass allows this class to extend org.eclipse.swt.widgets.Composite
    */  
    protected void checkSubclass() {
    }

    /**
    * Auto-generated method to display this 
    * org.eclipse.swt.widgets.Composite inside a new Shell.
    */
    public static void showGUI() {
        Display display = Display.getDefault();
        Shell shell = new Shell(display);
        NewComposite inst = new NewComposite(shell, SWT.NULL);
        Point size = inst.getSize();
        shell.setLayout(new FillLayout());
        shell.layout();
        if(size.x == 0 && size.y == 0) {
            inst.pack();
            shell.pack();
        } else {
            Rectangle shellBounds = shell.computeTrim(0, 0, size.x, size.y);
            shell.setSize(shellBounds.width, shellBounds.height);
        }
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
    }

    public NewComposite(org.eclipse.swt.widgets.Composite parent, int style) {
        super(parent, style);
        initGUI();
    }

    private void initGUI() {
        try {
            this.setLayout(null);
            this.setSize(492, 304);
            {
                composite1 = new Composite(this, SWT.BORDER_SOLID);
                GridLayout composite1Layout = new GridLayout();
                composite1Layout.makeColumnsEqualWidth = true;
                composite1.setLayout(composite1Layout);
                composite1.setBounds(0, 0, 492, 232);
                composite1.setBackground(Display.getCurrent().getSystemColor(SWT.COLOR_CYAN));

            }
            {
                composite2 = new Composite(this, SWT.BORDER_SOLID);
                GridLayout composite2Layout = new GridLayout();
                composite2Layout.makeColumnsEqualWidth = true;
                composite2.setLayout(composite2Layout);
                composite2.setBounds(0, 232, 492, 72);
                composite2.setBackground(Display.getCurrent().getSystemColor(SWT.COLOR_WHITE));
            }
            this.layout();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:53:59.910

您错误地使用了布局管理器——您正在设置`GridLayout`每个子组合（`composite1`, `composite2`），但您正在`null`为它们的父组合（ ）设置布局`this`。它是管理其子组件的大小和位置的父组件。所以设置`GridLayout`和`this`设置`layoutData`每个孩子到适当的配置`GridData`。如何配置这些，请参阅 Javadoc。它涉及设置`grabExcessVerticalSpace`和使用`SWT.FILL`for `verticalAlignment`。

# css - 使用 CSS 到达没有标签的元素

> ID：10617565
> 
> 赞同：0
> 
> 时间：2012-05-16T11:28:08.123
> 
> 标签：css

我与开发人员团队合作，他们进行了分页，但当前分页没有进入他们动态创建的任何 HTML 标记中，使用 Css 调用这个元素的任何方式都知道我不能为它内联编辑样式，因为它不仅仅是动态的HTML 代码

```
 <tr class="paging">
<td colspan="3">
1 
<a href="/ManageAccounts/ManageRestaurantsBars?page=2">2</a> 
<a href="/ManageAccounts/ManageRestaurantsBars?page=3">3</a> 
<a href="/ManageAccounts/ManageRestaurantsBars?page=4">4</a> 
<a href="/ManageAccounts/ManageRestaurantsBars?page=2">&gt;</a> 
<a href="/ManageAccounts/ManageRestaurantsBars?page=4">&gt;&gt;</a>
</td>
</tr> 
```

我想打电话给 1 元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:34:37.300

这取决于您要应用哪种样式。

对于不影响[`box-model`](http://www.w3.org/TR/CSS21/box.html)元素的属性，您可以这样做..

例如

```
.paging td{
    color:red;
    font-weight:bold;
    text-decoration:underline;
    font-style:italic;
    /*etcetera*/
} 
```

并覆盖那些用于正常链接的

```
.paging td a{
    color:white;
    font-weight:normal;
    text-decoration:none;
    font-style:normal;
    /*etcetera*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:30:18.373

只需使用这个

`tr.paging > td { font-weight:bold; }`

如果您不希望`<a>`链接加粗，请添加...

`tr.paging > td > a { font-weight:normal; }`

-

编辑：有点摆弄边距，但这种方法会起作用：http: [//jsfiddle.net/trapper/sX94B/](http://jsfiddle.net/trapper/sX94B/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:48:08.527

这是一个类似于[先前答案](https://stackoverflow.com/a/10617593/885443)的解决方案，它只会`1`通过摆弄锚元素的边距和填充来提供背景颜色：

```
tr.paging td {
  background: red; 
}

tr.paging a {
  background: white;
  padding: 0 5px;
  margin: 0 -2px;
} 
```

不是很优雅，但它有效。

[jsFiddle](http://jsfiddle.net/yKcPg/1/)

# c# - 切换子类型

> ID：10617566
> 
> 赞同：1
> 
> 时间：2012-05-16T11:28:08.460
> 
> 标签：c#, inheritance

我有以下类的示例结构：

```
public class Base
{
}

public class Child1 : Base
{
}

public class Child2 : Base
{
} 
```

我想做一些黑魔法：

```
Base @base = new Child2(); //note: there @base is declared as Base while actual type is `Child2`
var child1 = (Child1) @base; 
```

`System.InvalidCastException`它按预期失败了。

然后我将隐式转换运算符添加到`Child2`：

```
public class Child2 : Base
{
    public static implicit operator Child1(Child2 child2)
    {
        return new Child1();
    }
} 
```

并且代码仍然抛出相同的异常（显式运算符也无济于事）。

您是否有任何想法如何在不使用`dynamic`自定义转换方法或将局部变量声明`@base`为的情况下解决此问题`Child2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:33:58.283

您已经在 Child2 中实现了隐式转换，但实际上是在尝试从 Base 进行转换。

您应该首先将其转换为 Child2 以便隐式转换为 Child1 将适用：

```
var child1 = (Child1)(Child2)base; 
```

或者

```
Child1 child1 = (Child2)base; 
```

如果你不知道类型：

```
var child1 = base is Child1 ? (Child1)base : (Child1)(Child2)base;
var child2 = base is Child2 ? (Child2)base : (Child2)(Child1)base; 
```

一种完全不同的方法是：

```
public class Base
{
    public T As<T>() where T : Base, new()
    {
        return this as T ?? new T();
    }
} 
```

但无论如何 - 这是一个糟糕的设计，一般来说，你不应该有这样的东西。

我建议发布您的实际需求，您正在尝试做的事情，以及所有细节，并要求更好的设计/解决方案。

# iphone - 本地文件的 AVPlayerStatus 未准备好

> ID：10617569
> 
> 赞同：6
> 
> 时间：2012-05-16T11:28:28.547
> 
> 标签：iphone, objective-c, ios, audio, avplayer

我在播放本地 .wav 文件时遇到了一些问题。我`AVPlayerStatus`正在打印`0`，我假设这意味着它还没有准备好播放。我似乎无法弄清楚，但话虽如此，这是我第一次尝试使用与 AVPlayer 相关的任何东西，所以它可能很简单。我会很感激任何帮助。这是代码：

***我应该补充一点，我的声音没有播放！***

```
-(void) playWordSound:(UILabel *)label
{
    NSString *path;
    switch (label.tag)
    {
        case 1:
            path = [[NSBundle mainBundle] pathForResource:@"humpty" ofType:@"wav"];
            break;
        case 2:
            path = [[NSBundle mainBundle] pathForResource:@"dumpty" ofType:@"wav"];
            break;
        case 3:
            path = [[NSBundle mainBundle] pathForResource:@"saty" ofType:@"wav"];
            break;
        case 4:
            path = [[NSBundle mainBundle] pathForResource:@"on 2" ofType:@"wav"];
            break;
        case 5:
            path = [[NSBundle mainBundle] pathForResource:@"a 3" ofType:@"wav"];
            break;
        case 6:
            path = [[NSBundle mainBundle] pathForResource:@"wall" ofType:@"wav"];
            break;
    }
    NSURL *url = [NSURL fileURLWithPath:path];
    AVQueuePlayer *player;
    static const NSString *ItemStatusContext;
    AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:url];
    [playerItem addObserver:self forKeyPath:@"status" options:0 context:&ItemStatusContext];
    player = [AVPlayer playerWithPlayerItem:playerItem];

    NSLog(@"%d",player.status);
    [player play];
}

- (void)playerItemDidReachEnd:(NSNotification *)notification {
    NSLog(@"Sound finished");
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T21:09:25.203

[以下是 Apple 在使用 AVPlayItem -initWithURL :](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html#//apple_ref/occ/instm/AVPlayerItem/initWithURL:)方法时指出的一些重要问题：

> **特别注意事项**
> 
> 此方法立即返回项目，但状态为 AVPlayerItemStatusUnknown。
> 
> 如果 URL 包含播放器项目可以使用的有效数据，则状态稍后将更改为 AVPlayerItemStatusReadyToPlay。
> 
> 如果 URL 不包含有效数据或播放器项目无法使用，则状态稍后将更改为 AVPlayerItemStatusFailed。

我想正在发生的事情是，因为您`-play`在创建 AVPlayerItem 对象后不久就发送了一条消息，它的状态仍然是`AVPlayerItemStatusUnknown`（对于 AVPlayer 对象也是如此），因为它没有收到足够的时间来加载资源并将状态更改为`AVPlayerItemStatusReadyToPlay`.

我的建议：

*   检查 AVPlayerItem/AVPlayer 状态变化并`-play`在稍后阶段调用；

或者，甚至更简单，

*   从 NSURL加载一个[AVAsset](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAsset_Class/Reference/Reference.html)或一个[AVURLAsset](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVURLAsset_Class/Reference/Reference.html#//apple_ref/occ/cl/AVURLAsset)对象并使用 AVPlayerItem`–initWithAsset:`方法，该方法应该返回一个准备好播放的对象，然后您可以`-play`立即调用 call ，如果您愿意的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:32:21.647

`0`相当于`AVPlayerStatusUnknown`，我假设这是因为播放器在您实际调用之前不会尝试加载 URL `play`。

从[文档](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html#//apple_ref/doc/c_ref/AVPlayerStatus)中：

> `AVPlayerStatusUnknown`
> 
> 表示播放器的状态未知，因为它没有尝试加载新的媒体资源进行播放。

# iphone - iPhone 的 ScrollView 内不显示饼图

> ID：10617571
> 
> 赞同：0
> 
> 时间：2012-05-16T11:28:38.680
> 
> 标签：iphone, xcode

我在 Scrollview 中创建饼图，这是主视图的子视图，然后我将 pieChart 添加为滚动视图的子视图，但它不显示饼图

我有以下代码

```
 -(void)loadNews{

NSArray *graphs = [[NSArray alloc] initWithObjects:@"1", nil];

NSInteger numberofPages=[graphs count];

for (int i = 0; i < [graphs count]; i++) {

    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;
    UIView*subView=[[UIView alloc ]initWithFrame:frame];
    [self.scrollView addSubview:subView];

    //PieClass *myPieClass=[[PieClass alloc]initWithFrame:CGRectMake(250,450,320,230)];
    PieClass *myPieClass=[[PieClass alloc]initWithFrame:CGRectMake(327,470,320,230)];

    //myPieClass.backgroundColor=[UIColor clearColor];
    myPieClass.backgroundColor=[UIColor blackColor];

    myPieClass.itemArray=[[NSArray alloc]initWithObjects:valueOne,valueTwo,valueThree,valueFour, nil];

    myPieClass.myColorArray=[[NSArray alloc]initWithObjects:[UIColor blueColor],[UIColor redColor],[UIColor greenColor],[UIColor brownColor], nil];

    myPieClass.radius=100;

    [subView addSubview:myPieClass];

}

self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * graphs.count, self.scrollView.frame.size.height);
[pageControl setNumberOfPages:numberofPages];

[pageControl setActivePageColor:[UIColor colorWithRed:36/255.0 green:71/255.0 blue:113/255.0 alpha:1.0]];
[pageControl setInactivePageColor:[UIColor lightGrayColor]];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:34:48.390

在 CGRectMake(327,470,320,230) 您正在设置 327,470 的原点

尝试类似 CGRectMake(100,100,320,230)。

# linux - 从 BALASB_1234_05_16_2012:14:31:37.tar 文件名中读取 05_16_2012

> ID：10617572
> 
> 赞同：0
> 
> 时间：2012-05-16T11:28:39.647
> 
> 标签：linux, shell, unix

我想使用 shell 脚本`05_16_2012`从文件名中读取。`BALASB_1234_05_16_2012:14:31:37.tar`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:15:34.987

```
echo "BALASB_1234_05_16_2012:14:31:37.tar"|awk '{FS=OFS='_'}{print $3,$4,$5}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:13:19.273

```
date=$(echo *.tar | grep -Po '\d{2}_\d{2}_\d{4}') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:34:38.540

您可以使用：

```
echo "EXTLOG_1234_05_16_2012:14:31:37.tar"|\
awk -F"_" '{sub(/:.*$/, "", $5); printf("%s_%s_%s\n", $3, $4, $5)}' 
```

# css - Firefox 背景图像错误

> ID：10617573
> 
> 赞同：2
> 
> 时间：2012-05-16T11:28:47.020
> 
> 标签：css, firefox, background, background-image

我的 Firefox 表现得很奇怪。我使用一个简单的 4x4px 透明 PNG 作为 div 背景（像往常一样）。在 Chrome、Safari、Opera 甚至 IE 中它看起来很棒，但在 FF 中它“坏了”。这是一张图片，向您展示我在说什么：[http](http://cl.ly/2Q1l0S1u3I2Z1e3U2n0G) ://cl.ly/2Q1l0S1u3I2Z1e3U2n0G 。

我使用图像和渐变作为背景，但如果我只使用图像，它会导致相同的结果。

这是代码：

```
#wrap {
  background-color: #f5f5f5;
  background-image: url(../images/general/bg-wrap.png);
  background-image: url(../images/general/bg-wrap.png), -webkit-gradient(linear, left top, left bottom, from(#f5f5f5), to(#ebebeb));
  background-image: url(../images/general/bg-wrap.png), -moz-linear-gradient(top, #f5f5f5, #ebebeb);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f5f5f5', endColorstr='#ebebeb');
  background-position: 0 0; background-repeat: repeat;
} 
```

当我只使用背景图像时，它看起来像这样：

```
#wrap {
   background: #f5f5f5 url(../images/general/bg-wrap) 0 0 repeat;
} 
```

这是 bg-wrap.png：[http](http://cl.ly/0i3i1R0P2R0i1K1h1V1P) ://cl.ly/0i3i1R0P2R0i1K1h1V1P 。我不明白发生了什么...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T01:09:54.760

每个人都对 Firefox 错误和背景图像磁贴尺寸是正确的——我在使用 16p x 16px 的磁贴时遇到了同样的问题。Nealio 的回答似乎是正确的，但这不是解决问题。取而代之的是，将您的图块逐字复制，使其水平和垂直重复，然后将该图块用作您的背景图像。

例如，我的背景图像是一个非常小的“棋盘”的简单拼贴，带有交替的灰色和白色方块。第一个图像是无限平铺图案的最低限度，因此每个“检查器”的尺寸为 8px x 8px，从而产生 16px x 16px 的背景图像。这在任何地方看起来都很好，*除了*Firefox，它显示与您相同的锯齿形锯齿状渲染。

在阅读了 Nealio 的回复后，我拿了第一个图案瓷砖并将其翻倍，使其成为 4 个跳棋 x 4 个跳棋（8px X 4 = 32）。

瞧！相同的背景外观，但只是一个稍大的瓷砖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T11:42:37.870

我唯一能想到的是，几年前，早期版本的 Firefox 无法重复太小（小于大约 16x16）的背景图像。

当与渐变填充 css 结合使用时，也许这是该错误的新化身..？

只需通过使用更大的背景图像对其进行测试来排除这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T11:37:39.040

这很奇怪……

我设置了一个小提琴，它像这样工作正常：http: [//jsfiddle.net/will/KMVvT/](http://jsfiddle.net/will/KMVvT/)

你认为这可能是其他干扰吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T13:04:24.603

您不应该在右括号后用逗号分隔 mozilla 和 webkit 功能。图像路径也应该用引号括起来。

我遇到了问题，图像没有显示，但可以在 FireBug 中查看。原因是 adblock plus 扩展。在禁用该页面（或一般页面）后，它再次显示。

# symfony - 如何保留实体的先前版本？

> ID：10617580
> 
> 赞同：2
> 
> 时间：2012-05-16T11:29:19.817
> 
> 标签：symfony, doctrine-orm

我需要保留一个名为*Item*的实体的先前版本。当我更新它时，我会创建一个具有相同 id 但具有新版本号的新实体。我尝试使用*侦听*器，但这样我无法在*preUpdate*方法（无限循环）中保留新项目。

```
public function preUpdate(LifecycleEventArgs $args)
{
    $em = $args->getEntityManager();
    $entity = $args->getEntity();

    if ($entity instanceof Item) {

        // Create a new version of the current item
        $item = new Item();
        $item->setId(($entity->getId());
        $item->setVersion($entity->getVersion() + 1);
        $item->setSubject($entity->getSubject());
        $item->setDetail($entity->getDetail());
        $item->setPriority($entity->getPriority());
        $item->setStatus($entity->getStatus());
        $item->setPlannedAt($entity->getPlannedAt());
        $item->setDueAt($entity->getDueAt());
        $item->setValidationToken($entity->getValidationToken());
        $item->setType($entity->getType());

        $em->persist($item);
        $em->flush();
    }
} 
```

我想使用带有更新方法的项目管理器，但我不知道这是否是最好的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:06:18.043

最后，我使用了[StofDoctrineExtensionsBundle](https://github.com/stof/StofDoctrineExtensionsBundle/tree/1.0.x)提供的[DoctrineExtensions的可记录扩展](https://github.com/l3pp4rd/DoctrineExtensions)

感谢[库巴](https://stackoverflow.com/users/330267/kuba)和[李戴维斯](https://stackoverflow.com/users/1285809/lee-davis)的帮助！

# google-app-engine - 在全文搜索API中添加多个索引参数是否可行？谷歌应用引擎

> ID：10617585
> 
> 赞同：0
> 
> 时间：2012-05-16T11:29:45.550
> 
> 标签：google-app-engine, full-text-search, google-cloud-datastore, python-2.7

我需要运行这样的*搜索*查询：

```
SELECT from results WHERE owner=mike,john,tom ...etc
```

它应该提供这些用户名拥有的项目的串联。查询中可能有大约 100-200 个用户名。使用用户名作为过滤器（例如 filter(1)=mike&filter(2)=john 等）使用全文搜索 API（我已经将它用于关键字查询）来执行此操作是可行的，或者我应该尝试某种数据存储*连接*手术 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:03:49.737

您*可以*像这样构造一个查询：
`owner:mike OR owner:john OR owner:tom`等等，但这对于大量可能的所有者值来说效率不高。
相反，请考虑您是否可以根据某些应用程序语义对所有者进行分组（例如，一些所有者在 'usergroup1' 中，一些所有者在 'usergroup2' 中，等等），然后使用 eg 查询文档`usergroup:usergroup1`。

或者，如果您可以为每个所有者分配一个数值（这对您的应用程序有意义），您可以使用数字比较器，例如 `owner_number < 10`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:59:47.017

我猜第一个查询是 MySQL 查询，对吧？如果字段“所有者”在 MySQL 查询中有索引，那么您可以使用以下结构：

```
SELECT from results WHERE owner IN ('mike','john','tom') 
```

关于APP Engine我不能说太多，但肯定你需要使用过滤器。

# opengl - 为什么有一个单独的投影矩阵，但结合模型和视图矩阵是有益的？

> ID：10617589
> 
> 赞同：50
> 
> 时间：2012-05-16T11:29:55.060
> 
> 标签：opengl, glsl

当您学习 3D 编程时，您会被告知用 3 个转换矩阵来思考是最简单的：

1.  *模型矩阵*。该矩阵对每个模型都是独立的，它会根据需要旋转和缩放对象，最后将其移动到 3D 世界中的最终位置。“模型矩阵将模型坐标转换为世界坐标”。

2.  *视图矩阵*. 对于大量对象（如果不是全部对象），该矩阵通常是相同的，并且它根据当前的“相机位置”旋转和移动所有对象。如果您想象 3D 场景是由摄像机拍摄的，并且屏幕上呈现的是该摄像机捕获的图像，则摄像机的位置及其观察方向定义了场景的哪些部分是可见的以及对象如何出现在拍摄的图像上。在渲染单个帧时更改视图矩阵的原因很少，但实际上确实存在（例如，通过两次渲染场景并更改其间的视图矩阵，您可以在场景中创建一个非常简单但令人印象深刻的镜子） . 通常，视图矩阵在绘制的两个帧之间只改变一次。"

3.  *投影矩阵*。投影矩阵决定了如何将这些 3D 坐标映射到 2D 坐标，例如，是否应用透视（对象离观察者越远越小）或不应用透视（正交投影）。投影矩阵几乎从未改变。如果您正在渲染到一个窗口并且窗口大小已更改，或者您正在渲染全屏并且分辨率已更改，则它可能必须更改，但前提是新窗口大小/屏幕分辨率具有与以前不同的显示宽高比。有一些疯狂的效果，你可能想改变这个矩阵，但在大多数情况下，它在你的程序的整个生命周期中几乎是恒定的。“投影矩阵将眼睛坐标转换为屏幕坐标”。

这对我来说很有意义。当然，总是可以将所有三个矩阵组合成一个矩阵，因为先将向量乘以矩阵`A`然后乘以矩阵`B`与将向量乘以矩阵相同`C`，其中`C = B * A`。

现在，如果您查看经典的 OpenGL（OpenGL 1.x/2.x），OpenGL 知道投影矩阵。然而 OpenGL 不提供模型或视图矩阵，它只提供组合的模型视图矩阵。**为什么？**这种设计迫使您永久保存和恢复“视图矩阵”，因为它会被应用于它的模型转换“破坏”。为什么没有三个独立的矩阵？

如果您查看新的 OpenGL 版本（OpenGL 3.x/4.x）并且您不使用经典渲染管道而是使用着色器（GLSL）自定义所有内容，那么根本就没有可用的矩阵，您必须定义自己的矩阵。大多数人仍然保留投影矩阵和模型视图矩阵的旧概念。**为什么要这么做？**为什么不使用三个矩阵，这意味着您不必永久保存和恢复模型视图矩阵，或者您使用单个组合模型视图投影 (MVP) 矩阵，这可以节省您在顶点着色器中的矩阵乘法永远呈现单个顶点（毕竟这样的乘法也不是免费的）。

所以总结一下我的问题：与拥有三个单独的矩阵或单个 MVP 矩阵相比，将模型视图矩阵与单独的投影矩阵组合在一起的优势是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-16T11:52:51.270

实际看一下。首先，您发送的矩阵越少，与位置/法线/等相乘的矩阵就越少。因此，您的顶点着色器越快。

所以第 1 点：矩阵越少越好。

但是，您可能需要做某些事情。除非您正在进行 2D 渲染或一些简单的 3D 演示应用程序，否则您将需要进行照明。这通常意味着您需要将位置和法线转换为世界或相机（视图）空间，然后对它们进行一些光照操作（在顶点着色器或片段着色器中）。

如果你只从模型空间到投影空间，你就不能这样做。您不能在投影后空间中进行照明，因为该空间是非线性的。数学变得复杂得多。

所以，第 2 点：您需要在模型和投影之间至少停留*一站。*

所以我们至少需要2个矩阵。为什么是模型到相机而不是模型到世界？因为[在着色器的世界空间中工作是个坏主意。](https://nicolbolas.github.io/oldtut/Positioning/Tut07%20The%20Perils%20of%20World%20Space.html)您可能会遇到与远离原点的翻译相关的数值精度问题。然而，如果您在相机空间中工作，则不会遇到这些问题，因为没有任何东西离相机太远（如果是，它可能应该在远深度平面之外）。

因此：我们使用相机空间作为照明的中间空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:47:18.150

在大多数情况下，您的着色器将需要世界或眼睛坐标中的几何图形进行着色，因此您必须将投影矩阵与模型矩阵和视图矩阵分开。

让着色器将几何体与两个矩阵相乘会损害性能。假设每个模型都有千（或更多）个顶点，那么在 cpu 中计算一次模型视图矩阵会更有效，并让着色器少做一次矩阵向量乘法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-16T12:20:53.427

我刚刚通过分离投影矩阵解决了一个 z 缓冲区冲突问题。GPU 负载没有明显增加。以下两张截图显示了两种结果——注意绿色和白色层的战斗。

[![连接矩阵](../Images/eede6f9c40bae7ae1ecc249f47df6783.png)](https://i.stack.imgur.com/HOgYy.png) [![单独投影](../Images/825d8e1921748929251a50d664b55d7b.png)](https://i.stack.imgur.com/FgCOD.png)

# c# - 删除“/*”和“*/”之间的文本（块评论）

> ID：10617594
> 
> 赞同：2
> 
> 时间：2012-05-16T11:30:22.563
> 
> 标签：c#, wpf, streamreader

我正在尝试删除从文本文件中读取的块注释。*所以'/ '和'* /'之间的所有文本都应该被删除。读者逐行阅读问题所在。这就是我到目前为止所拥有的：

```
 StringBuilder buildString = new StringBuilder();

        using (StreamReader readFile = new StreamReader(filePath))
        {
            string line;
            // reads the file line by line
            while ((line = readFile.ReadLine()) != null)
            {
                //replaces the line if it has "--" in it.
                line = Regex.Replace(line, @"--.*$", "");

                if (line.StartsWith("/*"))
                {
                    while ((line = readFile.ReadLine() ) != null)
                    {
                        //remove line untill the last line '*/'
                        if (line.StartsWith("*/"))
                        {
                            //Then Stop removing lines and go back to the main while.
                        } 
                    }
                }

                buildString.Append(line + Environment.NewLine);
            } 
```

有什么建议或帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:54:37.650

使用堆栈数据结构将完成这项工作。但是，您必须逐个字符而不是逐行读取。

### 脚步：

1.  只要您没有遇到`"/"`.
2.  当您遇到“/”时，请检查下一个字符是否为`"*"`.
    *   如果是，则将所有数据推入堆栈，直到`"*/"`组合出现。
3.  当一个`"*/"`来推到输出。

如果 a`"*/"`没有出现或者 a`"*/"`没有匹配的`"/*"`，则抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:50:15.957

使用正则表达式怎么样

\x2F\x2A.*\x2A\x2F

[https://www.google.com/search?q=q=regex+tutorial+in+c%23](https://www.google.com/search?q=q=regex+tutorial+in+c%23)

\x2F 是十六进制的 / 和 \x2A 是十六进制的 * 正则表达式类接受字符的十六进制代码，所以如果你使用多行正则表达式，这应该允许你选择块注释

编辑：一个示例函数

```
public string RemoveBlockComments(string InputString)
{
   string strRegex = @"\/\*.*|.*(\n\r)*\*\/";
   RegexOptions myRegexOptions = RegexOptions.Multiline;
   Regex myRegex = new Regex(strRegex, myRegexOptions);
   return myRegex.Replace(strTargetString, "");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-24T01:35:08.653

试试这个项目：

```
var Test = Regex.Replace(MyString, @"/\*([^*]|[\r\n]|(\*([^/]|[\r\n])))*\*/", "", RegexOptions.Singleline); 
```

参考 =>
[https://blog.ostermiller.org/find-comment](https://blog.ostermiller.org/find-comment)

# java - 8021 连接异常失败：java.net.ConnectException: Connection denied at org.apache.hadoop.ipc.Client.wrapException(Client.java:1095)

> ID：10617595
> 
> 赞同：1
> 
> 时间：2012-05-16T11:30:26.963
> 
> 标签：java, hadoop, hdfs

您好我正在尝试配置 Hadoop 1.0。按照这个博客在伪分布式模式下。

[http://hadoop-tutorial.blogspot.de/2010/11/running-hadoop-in-pseudo-distributed.html?showComment=1337083501000#c615470573579885293](http://hadoop-tutorial.blogspot.de/2010/11/running-hadoop-in-pseudo-distributed.html?showComment=1337083501000#c615470573579885293)。

但是当我运行 hadoop 发行版中给出的 pi 示例时，我得到了标题中提到的错误。有人可以帮助我并指导我如何解决这个问题。它也是一个请求，如果可能的话，请提出解决方案以及确定问题。

这是我通过运行 jps 得到的

```
8322 Jps
7611 SecondaryNameNode
7474 DataNode
7341 NameNode 
```

这是完整的错误消息。

```
Number of Maps  = 10
Samples per Map = 100
Wrote input for Map #0
Wrote input for Map #1
Wrote input for Map #2
Wrote input for Map #3
Wrote input for Map #4
Wrote input for Map #5
Wrote input for Map #6
Wrote input for Map #7
Wrote input for Map #8
Wrote input for Map #9
Starting Job
12/05/16 13:11:56 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:8021\. Already tried 0 time(s).
12/05/16 13:11:57 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:8021\. Already tried 1 time(s).
12/05/16 13:11:58 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:8021\. Already tried 2 time(s).
12/05/16 13:11:59 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:8021\. Already tried 3 time(s).
12/05/16 13:12:00 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:8021\. Already tried 4 time(s).
12/05/16 13:12:01 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:8021\. Already tried 5 time(s).
12/05/16 13:12:02 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:8021\. Already tried 6 time(s).
12/05/16 13:12:03 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:8021\. Already tried 7 time(s).
12/05/16 13:12:04 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:8021\. Already tried 8 time(s).
12/05/16 13:12:05 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:8021\. Already tried 9 time(s).
java.net.ConnectException: Call to localhost/127.0.0.1:8021 failed on connection exception: java.net.ConnectException: Connection refused
        at org.apache.hadoop.ipc.Client.wrapException(Client.java:1095)
        at org.apache.hadoop.ipc.Client.call(Client.java:1071)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
        at org.apache.hadoop.mapred.$Proxy2.getProtocolVersion(Unknown Source)
        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)
        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)
        at org.apache.hadoop.mapred.JobClient.createRPCProxy(JobClient.java:480)
        at org.apache.hadoop.mapred.JobClient.init(JobClient.java:474)
        at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:457)
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1260)
        at org.apache.hadoop.examples.PiEstimator.estimate(PiEstimator.java:297)
        at org.apache.hadoop.examples.PiEstimator.run(PiEstimator.java:342)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.examples.PiEstimator.main(PiEstimator.java:351)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
        at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
        at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:64)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.net.ConnectException: Connection refused
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:701)
        at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
        at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:656)
        at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:434)
        at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:560)
        at org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:184)
        at org.apache.hadoop.ipc.Client.getConnection(Client.java:1202)
        at org.apache.hadoop.ipc.Client.call(Client.java:1046)
        ... 24 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:42:33.670

您的`jps`输出显示您没有运行 JobTracker 或 TaskTracker - 因此尝试与 jobtracker 通信时出现连接问题。

检查 jobtracker ( `$HADOOP_HOME/logs/*.jobtracker*.log`) 的日志以查看是否有错误消息描述它未启动的原因（您是如何启动集群的 -`start-all.sh`或者`start-dfs.sh`，也许尝试运行`start-mapred.sh`以查看是否启动了 map reduce 服务）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:07:35.587

From the jps output looks like the `TaskTracker` and `JobTracker` are not running. Try running:

```
start-mapred.sh 
```

This would start the `TaskTracker` and `JobTracker` and try rerunning job.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T07:09:58.023

我遇到了同样的问题，这是因为 hadoop 1.0.x 有不同需要在 hadoop_env.sh 中配置两个变量：

导出 HADOOP_HEAPSIZE=2000

# 额外的 Java 运行时选项。默认为空。

# 导出 HADOOP_OPTS=-服务器

导出 HADOOP_OPTS="-Djava.security.krb5.realm=OX.AC.UK -Djava.security.krb5.kdc=kdc0.ox.ac.uk:kdc1.ox.ac.uk"

添加这两个变量时，在启动守护进程期间不会看到任何错误或警告，以便您解决问题。祝你好运！

希望我的回答可以帮助其他人:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:53:41.783

看起来这是一些与连接相关的问题。你的 jobtracker 和 trasktracker 运行正常吗？

看到这个[链接](https://groups.google.com/a/cloudera.org/group/cdh-user/browse_thread/thread/1fac007dd78b209a)

**编辑：**

[阅读](http://lib.dsu.dp.ua/books/%D0%9A%D0%BE%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D1%8B%D0%98%D1%81%D0%B5%D1%82%D0%B8/%D0%91%D0%B0%D0%B7%D1%8B%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/NoSQL%20books/Hadoop/Hadoop%20The%20Definitive%20Guide%202nd%20Edition%20%28Oreilly%29%20%5B2010%5D.pdf)权威指南中的附录 A。它具有在所有 3 种模式下设置 hadoop 服务器的完整步骤。我认为您的配置可能会产生问题，因此请使用书中规定的配置。还要检查无密码 SSH 在您的设置中是否正常工作。

# android - 我可以在 Google Play 应用说明中包含指向第三方应用商店的链接吗？

> ID：10617596
> 
> 赞同：1
> 
> 时间：2012-05-16T11:30:33.397
> 
> 标签：android

我在三星应用商店和 Google Play 上都发布了一个应用。我可以在 Google Play 上我的应用程序描述中添加指向三星应用程序的链接吗？这是否违反任何 Google 政策？

# javascript - CreateJS/EaselJS 框架中的动画回调

> ID：10617604
> 
> 赞同：1
> 
> 时间：2012-05-16T11:30:59.217
> 
> 标签：javascript, html, easeljs

无论如何，我们如何在 EaselJs 框架中进行动画回调？基本上我想在每个动画序列结束时得到通知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T11:17:05.660

**对于精灵表动画，您可以像这样使用 onAnimationEnd：**

```
// create a BitmapAnimation instance to display and play back the sprite sheet:

var bmpAnim = new BitmapAnimation(spriteSheet);

// start playing the first sequence:

bmpAnim.gotoAndPlay("walkRt");

// the callback is called each time a sequence completes:

bmpAnim.onAnimationEnd = angleChange;

Online api doc here:
http://www.createjs.com/Docs/EaselJS/BitmapAnimation.html 
```

**如果您使用 TweenJS 的补间，您可以在补间实例上使用 call 函数：**

例子：

```
Tween.get(bar, {override:true}).to({x:695}, 1500, easeType).call(tweenComplete); 
```

在线 api 文档： [http ://www.createjs.com/Docs/TweenJS/modules/TweenJS.html](http://www.createjs.com/Docs/TweenJS/modules/TweenJS.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T01:56:13.220

我强烈推荐 Greensock 用于补间而不是 tweenjs，因为它支持更好并且具有更多功能。

[http://www.greensock.com/v12/](http://www.greensock.com/v12/)

# android - 如何在 android 2.2 中发送消息？

> ID：10617605
> 
> 赞同：1
> 
> 时间：2012-05-16T11:31:01.153
> 
> 标签：android, android-intent

我想用 android 2.2 发送消息（短信/彩信）。首先我做了一个带有 ACTION_SEND 的意图选择器来选择使用哪个：

```
Intent intent = new Intent(Intent.ACTION_SEND);

intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_SUBJECT, Resources.getString("InvitationSubject", getBaseContext()));
String body = Resources.getString("InvitationBody", getBaseContext()) + Local.User.FirstName;
intent.putExtra(Intent.EXTRA_TEXT, body);

startActivity(Intent.createChooser(intent, "Invite friends")); 
```

但在这种情况下，选择器会显示“蓝牙、消息、Google+、Gmail”。我只想显示消息或其他消息应用程序。

我在 sdk 文档中看到有一个新的 CATEGORY_APP_MESSAGING 可供使用，但它仅在 API 级别 15 中可用。我必须保持 API 级别 8。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:38:34.337

试试这个代码

```
String body = Resources.getString("InvitationBody", getBaseContext()) + Local.User.FirstName;
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
sendIntent.putExtra("sms_body", smsBody); 
sendIntent.setType("vnd.android-dir/mms-sms");
startActivity(sendIntent); 
```

不要忘记将其添加`<uses-permission android:name="android.permission.SEND_SMS" />`到您的清单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:34:18.120

你可以使用 mms-sms 类型，像这样

```
intent.setType("vnd.android-dir/mms-sms"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:43:22.897

使用以下代码发送消息

```
Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
shareIntent.setType("text/plain");
shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "message subject");
shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, "text");
startActivity(Intent.createChooser(shareIntent, "Pick a Share method")); 
```

给予以下许可

```
<uses-permission android:name="android.permission.SEND_SMS" /> 
```

# hibernate - 如何使用休眠标准来获得正确的结果

> ID：10617606
> 
> 赞同：0
> 
> 时间：2012-05-16T11:31:04.497
> 
> 标签：hibernate

我有两个类，分别是专家和技术，一个专家可以掌握几种技术，一种技术是由几个专家组成的。添加、更新技术独立于专家类。从专家那里删除一项技术，只删除相关的关系。

```
Class Expert{
     Long id; // getter and setter
     String name; // getter and setter;
     Set<Technology> technos; // getter and setter
} 

Technology{
     Long id; // gettter and setter
     String name; //getter and setter
} 
```

hibernate映射中反映的两个类之间的关系是

```
<class name="Expert">
    <!-- put the declaration for id and name --> 

    <set name="technos" table="EXPERT_TECHNO" cascade="delete-orphan">
            <key column="id_expert"/>
            <many-to-many column="id_techno" class = "Technology"/>
    </set>
</class>

<class name="Technology">
 <!-- put declaration for id and name-->
</class> 
```

现在我有一个Technology的实例，我想找到所有maitrise该技术的专家，那么如何使用hibernate critera得到结果集呢？或者使用 createQuery 获取结果集的最简单方法。

我不熟悉hibernate critera方法，所以我寻求您的帮助！

进一步的问题：

当我想从专家那里删除一项技术时，我想要的只是删除表“EXPET_TECHNO”中的一行，但是，我所拥有的是expert.getTechnos.remove（techno），将从表中删除该技术我不想拥有什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:46:04.987

首先，解决此问题的最简单方法是使 ManyToMany 关联是双向的。你只需要做

```
Set<Expert> experts = technology.getExperts(); 
```

现在，如果它不是一个选项，HQL 将比 Criteria 更容易进行这样的查询，它不是动态组合的。查询将很简单

```
select expert from Expert expert 
inner join expert.technos techno 
where techno.id = :technoId 
```

如果您真的真的想使用 Criteria 执行此操作，那么您需要执行以下操作：

```
Criteria c = session.createCriteria(Expert.class, "expert");
c.createAlias("expert.technos", "techno");
c.add(Restrictions.eq("techno.id", technoId)); 
```

您可以自己找到它，并通过阅读[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#querycriteria-associations)了解许多其他内容。

# java - Java ByteBuffer“put”方法——防止缓冲区溢出

> ID：10617607
> 
> 赞同：0
> 
> 时间：2012-05-16T11:31:04.503
> 
> 标签：java, networking, nio, bytebuffer

我想通过以下方式使用 java nio ByteBuffer 的 put 方法：

```
ByteBuffer small = ByteBuffer.allocate(SMALL_AMOUNT_OF_BYTES);
ByteBuffer big = getAllData();

while (big.hasRemaining()){
    small.put(big);
    send(small);
} 
```

put 方法会抛出缓冲区溢出异常，所以我修复它的方法是：

```
 ByteBuffer small = ByteBuffer.allocate(SMALL_AMOUNT_OF_BYTES);
 ByteBuffer big = getAllData();

 while (big.hasRemaining()){
     while (small.hasRemaining() && big.hasRemaining()){
         small.put(big.get());
     }

     send(small);
 } 
```

我的问题是 - 有没有更好的方法来做到这一点，或者至少有一种有效的方法来做我想做的事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:34:53.947

`hasRemaining()`好吧，您实际上可以调用而不是使用 boolean`remaining()`来确定剩余的字节数。

然后，您可以使用一个小的固定大小的中间字节数组以及基于数组的`get()`和`put()`方法来传输“块”字节，根据剩余空间量调整放入中间缓冲区的字节数。

# facebook-graph-api - facebook搜索请求返回的用户结果是否可以按照共同好友排序

> ID：10617612
> 
> 赞同：1
> 
> 时间：2012-05-16T11:31:23.563
> 
> 标签：facebook-graph-api, facebook-fql

我正在尝试使用 facebook 搜索[https://graph.facebook.com/search?q=vartika&type=user&access_token=](https://graph.facebook.com/search?q=vartika&type=user&access_token=)

所有用户的结果都是相同的。我想要特定用户的结果，返回按共同朋友数量排序的用户列表（如果有的话），然后是随机用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:15:46.080

facebook搜索请求返回的用户结果是否可以按照共同好友排序

**不**，

但我认为 facebook 为不同的用户提供不同的结果，前提是 access_token 不同。你能再检查一下吗？

是的，您可以根据地点获得具体结果

```
https://graph.facebook.com/search?q=harsh&type=user&center=37.76,-122.427&distance=1000&access_token=<access_token> 
```

参考：http: [//developers.facebook.com/docs/reference/api/#searching](http://developers.facebook.com/docs/reference/api/#searching)

# css - 隐藏水平滚动条而不使用overflow-x

> ID：10617615
> 
> 赞同：1
> 
> 时间：2012-05-16T11:31:34.723
> 
> 标签：css

如果我设置`overflow:scroll`了一个固定高度的 div，那么水平滚动条和垂直滚动条都会出现。我知道我可以使用`overflow-x:hidden`. 有没有办法在不使用 overflow-x 的情况下做到这一点，因为它在 css(2.1) 验证中失败？

参考：http: [//jsfiddle.net/s7SVZ/](http://jsfiddle.net/s7SVZ/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:36:50.013

你可以给`overflow:auto`它。像这样写：

```
#div1{
    width: 200px;
    height: 200px;
    overflow: auto;
    border: 1px solid red;
} 
```

检查这个[http://jsfiddle.net/s7SVZ/1/](http://jsfiddle.net/s7SVZ/1/)

# php - HTTP Post 不向数据库发送数据？

> ID：10617616
> 
> 赞同：2
> 
> 时间：2012-05-16T11:31:40.733
> 
> 标签：php, android, mysql, http, http-post

我正在尝试从 android 应用程序向 mysql 数据库发送一些数据，数据是字符串形式（它是用户完成的测验的结果），我不确定问题是什么。

**这是我的 HTTP Post 的 android 代码：**

```
// http post
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://ast.ncl-coll.ac.uk/~cmaughan/firesafety/app_results.php");

            try {
                //Link to quiz string results
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
                nameValuePairs.add(new BasicNameValuePair("StaffID","StaffID"));
                nameValuePairs.add(new BasicNameValuePair("Forename","Forename"));
                nameValuePairs.add(new BasicNameValuePair("Surname", "Surname"));
                nameValuePairs.add(new BasicNameValuePair("Score", "Score"));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                InputStream is = entity.getContent();
            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection " + e.toString());
                Toast.makeText(getApplicationContext(), 
```

**这是我的php：**

```
<?php
include('./inc/connection.inc.php');
connect();
//retrieve the data
$StaffID = $_POST['StaffID'];
$Forename = $_POST['Forename'];
$Surname = $_POST['Surname'];
$Score = $_POST['Score'];

//Insert into the database
$sql = "INSERT INTO tblQuiz (staffid, forename, surname, score) VALUES ('$StaffID',     '$Forename', '$Surname', '$Score')";

$result = mysql_query($sql) or die("Could not run query");

    // Close connection to the database

    mysql_close();

    // Echo success   
    echo "Upload Successful";

?> 
```

任何帮助将不胜感激，我认为数组是错误的，因为我正在尝试使用 HTTP Post 方法发送字符串

**注意：** **测验的结果将进入 DDMS 中的 mysqllite 数据库，我只想将这些结果上传到 php/mysql 数据库。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T11:08:21.743

1.  如果您想查看结果，可以将结果编码为 Json 格式，因为 echo 无法发送结构化值。

2.  如果您的数据是测验的结果，为什么您要放置这样的静态值

    `nameValuePairs.add(new BasicNameValuePair("StaffID","StaffID"));`

    相反，把测验的真实结果

3.  之前，在线测试为什么你没有在你的模拟器上测试

4.  在 php 方面，请确保在尝试使用静态值时插入值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:09:34.890

尝试这个：

```
$sql = "INSERT INTO tblQuiz (staffid, forename, surname, score) VALUES ('".$_POST['StaffID']."',     '".$_POST['Forename']."', '".$_POST['Surname']."', '".$_POST['Score']."')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:06:20.883

如果您是 android 应用程序中的网络服务，那么您必须提及如下代码的内容类型

```
 public String postData(String result, JSONObject obj) {
            // Create a new HttpClient and Post Header
            String InsertTransactionResult = null;
            HttpClient httpclient = new DefaultHttpClient();
            HttpParams myParams = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(myParams, 1000);
            HttpConnectionParams.setSoTimeout(myParams, 1000);

            try {

                HttpPost httppost = new HttpPost(result.toString());
                httppost.s

etHeader("Content-type", "application/json");
            StringEntity se = new StringEntity(obj.toString());
            se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                    "application/json"));
            httppost.setEntity(se);

            HttpResponse response = httpclient.execute(httppost);
            Result = EntityUtils
                    .toString(response.getEntity());

        } catch (ClientProtocolException e) {

        } catch (IOException e) {
        }
        return Result;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:43:33.287

```
$sql = "INSERT INTO tblQuiz (staffid, forename, surname, score) VALUES ('$StaffID',     '$Forename', '$Surname', '$Score')"; 
```

您是否已将 $_POST 数组中的值加载到变量“$StaffID”等中？如果没有，那么你会追求类似的东西：

```
$sql = "INSERT INTO tblQuiz (staffid, forename, surname, score) VALUES ('{$_POST['StaffID']}',     '{$_POST['Forename']}', '{$_POST['Surname']}', '{$_POST['Score']}')"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T11:47:19.980

```
 Check ur mysql server connection is established or not

    $con=mysql_connect('host','username','password');
    if (!$con) {
        die('Could not connect: ' . mysql_error());
    }else{
    mysql_select_db('db_name',$con);
    $sql = "INSERT INTO tblQuiz (staffid, forename, surname, score) VALUES ("'.$StaffID.'","'.$Forename.'","'.$Surname.'","'.$Score.'")";
    $result = mysql_query($sql);} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T11:48:19.477

这里的空格是错字还是在代码中（因为这会导致问题）

```
HttpPost httppost = new HttpPost("http://ast.ncl-      oll.ac.uk/~cmaughan/firesafety/app_results.php"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T11:50:22.847

```
$sql = "INSERT INTO tblQuiz (staffid, forename, surname, score) VALUES ('".$_POST['StaffID']."',     '".$_POST['Forename']."', '".$_POST['Surname']."', '".$_POST['Score']."')"; 
```

试试这个，它会起作用的

# c# - 在 web 服务返回数据

> ID：10617617
> 
> 赞同：1
> 
> 时间：2012-05-16T11:31:41.983
> 
> 标签：c#, .net, web-services, return

我想将字符串传递给我的查询，如果我自己输入“WHERE”部分，它就能显示我的所有记录。所以我对其进行了修改，以便用户可以根据需要搜索查询...代码如下：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections.Generic;
using System.Web;
using System.Web.Services;
using System.Data.SqlClient;

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

public class EmployeeWebService : System.Web.Services.WebService
{
    List<Employee> list = new List<Employee>();

    public EmployeeWebService ()
    {
        string cs = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;

        SqlConnection conn = null;
        SqlDataReader reader = null;
        try
        {
            conn = new SqlConnection(cs);
            //search the data based on the data key in
            string sql = "SELECT * FROM member WHERE userType = '" + ?? + "'";
            SqlCommand cmd = new SqlCommand(sql, conn);
            conn.Open();
            reader = cmd.ExecuteReader();

            while (reader.Read())
            {
                list.Add(new Employee { fullName = reader["fullName"].ToString(), password = reader["password"].ToString(), userType= reader["userType"].ToString() });
            }
        }
        catch (Exception e)
        {
            HttpContext.Current.Trace.Warn("Error", "error in getcustomer()", e);
        }
    }

    [WebMethod]
    public Employee GetEmployeeDetails(string userType)
    {
        //i need to return this data back to the query
        string type = userType.ToString();
        return type;
    }
} 
```

**错误信息**

```
Error: Cannot implicitly convert type 'string' to 'Employee' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:39:32.833

返回多个员工对象

```
[WebMethod]
public List<Employee> GetEmployeeDetails(string userType)
{
   //search the member table looking for a matching userType value
   string sql = "SELECT * FROM member WHERE userType = '" + ?? + "'";
   SqlCommand cmd = new SqlCommand(sql, conn);
   conn.Open();
   List<Employee> employeeList = new List<Employee>();
   reader = cmd.ExecuteReader();

   while (reader.Read())
   {
      var emp = new Employee(
          { 
              fullName = reader["fullName"].ToString(), 
              password = reader["password"].ToString(), 
              userType = reader["userType"].ToString()
          });

      employeeList.Add(emp);
   }

   reader.close();
   return employeeList;
} 
```

# wordpress - Wordpress 条件值查询问题

> ID：10617619
> 
> 赞同：0
> 
> 时间：2012-05-16T11:31:43.417
> 
> 标签：wordpress, custom-fields, conditional-statements

我遇到了条件值查询问题。我想查询 2 个帖子，如果最低价格的价值低于 30 欧元。然后查询2个帖子。这是一个附属网站，有大约 1200 个不同内容的帖子。

我的代码位于： http: [//pastebin.com/SDpcKspu](http://pastebin.com/SDpcKspu)

问题是，我的网站大多显示值 <30。但有时我会看到一个更大的值（大约 130 欧元左右）。任何想法？

是的，我知道 orderby 的这一点是双倍的，但这似乎有点工作。：`<?php query_posts('cat=77,98'.'&orderby=meta_value&orderby=rand&meta_key`

关于右侧小部件的网站位于[http://www.overhemd-heren.nl 。](http://www.overhemd-heren.nl)

我选择了 30 欧元的例子，但同样适用于 50 和 40 欧元。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:51:06.560

你真的用一个空格命名了一个元键“最低价格”吗？您确定密钥在数据库中被命名为这个吗？也有同样的情况（hoofdletters）？尝试这个：

```
<?php
query_posts( array(
'cat'=> '77,98',
'meta_key'=> 'Minimum Price',
'meta_value' => '30.00',
'meta_compare' => '<',
'order' => 'desc',
'orderby' => 'meta_value_num',
'posts_per_page' =>'2' //showpost is deprecated and should not be used anymore.
)); 
```

可能不会修复它，但它更容易阅读。
[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

编辑，1 个排序；meta_value 现在在引号之间

# java - 在 Google Web Toolkit 中解析 KML

> ID：10617624
> 
> 赞同：0
> 
> 时间：2012-05-16T11:32:06.147
> 
> 标签：java, google-maps, gwt, kml

我有一个要在地图上显示的 kml 文件。我正在为 GWT 使用 Google Maps v3。但是，我读过 kml 文件应该在公共服务器上。我已经搜索了可以使用本地 kml 文件的方法，但它们都是关于 Javascript，而不是 java。

有没有办法在 Google Web Toolkit 中使用本地 KML 文件？我应该改用 XML 解析器然后尝试处理结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:48:00.023

我设法在我的地图上显示我的 kml 文件，使用 geoxml3 JS。我从我的 GWT 项目中调用 JS 函数，并使用 JS 在地图上显示我的 kml。但是，我仍然没有找到从地图中删除图层的方法......！

# javascript - Javascript 计数点击链接并将其存储在 cookie 中

> ID：10617632
> 
> 赞同：0
> 
> 时间：2012-05-16T11:32:22.943
> 
> 标签：javascript, cookies, hyperlink, counter

我是 javascript 语言的新手，有一个问题：

我有一个脚本，它计算点击链接并在点击 20 次时不显示此链接。

```
<script type="text/javascript">
    var compteur=0;
    function submitOnce()
    {
    var i,h5s = document.getElementsByTagName('h5'), nbr = h5s.length;

    compteur +=1;
    if (compteur==20){
    for (i=0;i<nbr;i++) {
        document.getElementsByTagName("h5")[i].style.visibility = "hidden";
        document.getElementById("quota").style.display = "block";
    }
    };
    };
 </script> 
```

现在，如果用户导航到网站的其他部分，则会重置计数。所以我想将计数结果存储在cookie中。

我找到了一个脚本，它描述了在 cookie 中存储网站访问次数的过程。

```
<script language="JavaScript">
  <!--
  function cherchevaleur()
  {
   var valeur = "";
   if(document.cookie)
   {
    valeurdepart = document.cookie.indexOf("=") + 1;
    valeurfin = document.cookie.indexOf(";");
    if(valeurfin == -1) valeurfin = document.cookie.length;
    valeur = document.cookie.substring(valeurdepart,valeurfin);
   }
   return valeur;
  }

  function fixervaleur(indic, valeur, expire)
  {
   var maintenant = new Date();
   var temps = new Date(maintenant.getTime() + expire);
   document.cookie = indic+"="+valeur+"; expires="+temps.toGMTString()+";";
  }

  function compteur()
  {
   var tpsexpire = 1000*60*60*24*1;
   var nombre = cherchevaleur();
   var compte = 0;
   if(nombre != "") compte = parseInt(nombre);
   if(document.cookie)
   {
    compte = compte + 1;
    fixervaleur("compte",compte,tpsexpire);
   }
   else
   {
    compte = 1;
    fixervaleur("compte",compte,tpsexpire);
   }
  alert("C'est votre " + compte + "ème visite sur cette page!");
  }
  //-->
 </script> 
```

但我不明白如何插入我的计数脚本。有没有人可以帮助我理解？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:40:32.787

您可以使用这些`Setcookies`和`Getcookies`JavaScript 的功能来读取和写入 cookie 中的值...

```
function setCookie(c_name, value, exdays) {
            var exdate = new Date();
            exdate.setDate(exdate.getDate() + exdays);
            var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
            document.cookie = c_name + "=" + c_value + "; path=/";
        }
        function getCookie(c_name) {
            var i, x, y, ARRcookies = document.cookie.split(";");
            for (i = 0; i < ARRcookies.length; i++) {
                x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
                y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
                x = x.replace(/^\s+|\s+$/g, "");
                if (x == c_name) {
                    return unescape(y);
                }
            }
        } 
```

# c# - WPF 数据网格样式错误 IDataErrorInfo

> ID：10617633
> 
> 赞同：3
> 
> 时间：2012-05-16T11:32:27.113
> 
> 标签：c#, wpf

我正在使用 MVVM 并有一个带有可编辑列的数据网格，我正在对它进行验证：

```
<DataGridTemplateColumn Header="Key" Width="80">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Key}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <vw:NumericTextBox Text="{Binding Key, Mode=TwoWay,ValidatesOnDataErrors=True,UpdateSourceTrigger=PropertyChanged}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn> 
```

我添加了一种样式以将错误显示为工具提示：

```
<Style TargetType="{x:Type DataGridCell}">
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self},Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

因此，验证被触发，单元格以红色勾勒，并显示错误消息工具提示。

我有 2 个问题，首先，当用户单击单元格外时，单元格仍以红色勾勒，但悬停时不显示工具提示。我怎样才能让它工作？第二个问题是我不想要的行旁边有一个橙色感叹号。我认为这是因为网格或行上有一些默认样式。我该如何摆脱它（红色轮廓很好）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:52:22.810

要删除感叹号，您必须像这样编辑数据网格行样式：

```
<DataGrid ...> 
<DataGrid.RowStyle> 
    <Style TargetType="DataGridRow"> 
        <Setter Property="ValidationErrorTemplate" Value="{x:Null}"/> 
    </Style> 
</DataGrid.RowStyle> 
<!-- ... --> 
</DataGrid> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-13T10:51:14.533

对于第一部分 - 要在悬停时显示错误，您还需要为 TextBlock 目标类型设置工具提示属性。我使用以下两种样式在数据网格单元格编辑和悬停时显示来自 IDataErrorInfo 的错误。

```
<Style x:Key="EditCellStyleError" TargetType="{x:Type TextBox}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="CellStyleError" TargetType="{x:Type TextBlock}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

为您的数据网格设置这些样式

```
<DataGridTextColumn .....
EditingElementStyle="{StaticResource EditCellStyleError}" ElementStyle="{StaticResource CellStyleError}"
</DataGridTextColumn> 
```

# javascript - 如何循环通过 AJAX 加载的复选框？

> ID：10617634
> 
> 赞同：0
> 
> 时间：2012-05-16T11:32:29.440
> 
> 标签：javascript, jquery

我想在通过 AJAX 加载的复选框上做这样的事情：

```
$('input:checkbox').each(function() {
        $(this).hide();
        alert("hi");
        $('<div class="checkbox-fx"><div class="checkbox"></div></div>').insertAfter(this);
    }); 
```

在文档加载时，复选框尚未加载，因此该功能未实现。如何循环浏览新加载的复选框？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:49:31.813

假设复选框是使用类似的东西加载的`$.ajax`，您的`success`方法将是在将生成的 HTML 添加到文档后处理生成的 HTML 的地方。

```
$.ajax({
 // your ajax options here
 success: function(html) {
    $(html).find('input:checkbox').each(function() {
        $(this).hide();
        alert("hi");
        $('<div class="checkbox-fx"><div class="checkbox"></div></div>').insertAfter(this);
    }).appendTo(document.body); // takes the HTML from the ajax call and processes each checkbox. when done, the results are then appended to the document
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:59:20.200

```
 $.ajax({
    url: '/YourUrl', type: 'Get', dataType: 'json',
    // data: { id:'' },
     success: function(html) {
        $(html).find('input:checkbox').each(function() {
    if($(this).next('div.checkbox-fx').length===0)
    {
            $(this).hide();      
            $('<div class="checkbox-fx"><div class="checkbox"></div></div>').insertAfter(this);
}
        }).appendTo(document.body);

     }
    }); 
```

# c# - .net 导航菜单操作

> ID：10617641
> 
> 赞同：0
> 
> 时间：2012-05-16T11:32:49.643
> 
> 标签：c#, asp.net, .net, master-pages

我正在尝试根据用户的角色创建一个包含不同链接页面的菜单。使用带有 asp:menu navigationMenu 的母版页，它只使用一个链接创建，然后根据用户的角色模式添加链接。

```
Menu menu = masterPage.FindControl("NavigationMenu") as Menu;

MenuItemCollection menuItems = menu.Items;

MenuItem menuItem;

switch (role)
{
    case "Level 1":          
         break;
    case "Level 2":
         menuItem = new MenuItem("Auditing", "", "", "~/Auditing.aspx");
         menuItems.Add(menuItem);
         menuItem = new MenuItem("Team Manager", "", "", "~/TeamManager.aspx");
         menuItems.Add(menuItem);
         break;
} 
```

这仅适用于当前页面。如果单击菜单上的链接，则该新页面只有一个链接，母版页在运行时广告。有没有办法真正更新“navigationMenu”`asp:menu`值，以便它们在整个站点中持久存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:59:40.543

使用 SecurityTrimmingEnabled = "true" 的站点地图是一个很好的解决方案。

需要考虑的另外两个替代方案是：

*   移动代码以将菜单构建到母版页中。

*   创建一个基类 ( `public class BasePage : System.Web.UI.Page`) 并从该基类继承所有页面。将构建菜单的代码放入基类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:52:07.233

我认为您应该考虑使用`sitemap`asp.net 菜单。如果您设置`securityTrimmingEnabled="true"`它应该能够根据角色自动显示/隐藏菜单项。

[这个链接](http://weblogs.asp.net/jgalloway/archive/2008/01/26/asp-net-menu-and-sitemap-security-trimming-plus-a-trick-for-when-your-menu-and-security-don-t-match-up.aspx)会给出一个想法

# c - 在 Linux C 中交替同步两个进程

> ID：10617642
> 
> 赞同：1
> 
> 时间：2012-05-16T11:33:00.303
> 
> 标签：c, linux

我需要两个子进程来执行此操作：

*   子进程 1 应该`printf`是 0 到 100 之间的偶数。
*   子进程 2 应该`printf`是 0 到 100 之间的奇数。

执行后我应该在终端中看到的是：`0 1 2 4..100`

我怎样才能做到这一点？

我试过这个程序，但它不起作用，它只给了我第一个整数 0：

```
#include <unistd.h>
#include <stdio.h>
#include <signal.h>

void handler1(int sig)
{
  if(sig == SIGCONT)
  {
     raise(SIGCONT);
  }
}

void handler2(int sig)
{
  if(sig == SIGCONT)
  {
     raise(SIGCONT);
  }
}

int main()
{
  int i=-1;

  if(fork()==0)
  { 
     signal(SIGCONT,handler1);
     while(1)
     {

        printf("%d\n",i+1);
        pause();
        kill(getpid()+1,SIGCONT);
     }
  }

  if(fork()==0)
  {
     signal(SIGCONT,handler2);
     while(1)
     {
       pause();

       printf("%d\n",i+1);
       kill(getpid()-1,SIGCONT);
     }
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:25:01.657

信号不是解决这个问题的好方法。第一个信号丢失（它是在第二个孩子开始之前由第一个孩子发送的），并且您最终被锁定（因为其中一个进程正在等待它已经错过的信号）。

尝试改用信号量或消息队列。它们不受这个问题的影响，因为它们不会在系统中丢失，即使并非所有涉及的进程都已启动。

# delphi - 创建和释放 TPopupMenu 使用的 TMenuItem

> ID：10617644
> 
> 赞同：7
> 
> 时间：2012-05-16T11:33:10.000
> 
> 标签：delphi, delphi-7, menuitem

创建 TMenuItem 运行时时如下所示：

`mi := TMenuItem.Create([owner]);`

并像这样添加到 TPopupMenu 中：

`PopupMenu1.Items.Add(mi);`

我需要指定`[owner]`为 PopupMenu1 还是可以使用`nil`？

在这种情况下，PopupMenu1将`mi`是免费的，如果是这样，我该如何验证它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T11:44:57.260

您可以将 nil 指定为所有者，父项将释放自己的项。

至于验证，最简单的方法是查看以下代码`TMenuItem.Destroy`：

```
destructor TMenuItem.Destroy;
begin
  ..
  while Count > 0 do Items[0].Free;  
  ..
end; 
```

如果这还不够，要查看它的实际效果，您可以使用通知机制：

```
type
  TForm1 = class(TForm)
    PopupMenu1: TPopupMenu;
    Button1: TButton;
    Button2: TButton;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    mi: TMenuItem;
  protected
    procedure Notification(AComponent: TComponent; Operation: TOperation);
      override;
  end;

  ..

procedure TForm1.Button1Click(Sender: TObject);
begin
  mi := TMenuItem.Create(nil);
  mi.FreeNotification(Self);
  PopupMenu1.Items.Add(mi);
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  PopupMenu1.Free;
end;

procedure TForm1.Notification(AComponent: TComponent; Operation: TOperation);
begin
  inherited;
  if (AComponent = mi) and (Operation = opRemove) then
    ShowMessage('mi freed');
end; 
```

按 Button1 首先将项目添加到弹出菜单。然后按 Button2 释放*Popup*。该项目将在销毁时通知您的表单。

# mongodb - 如何在 MongoDB 中链接“belongs_to”和“many”

> ID：10617647
> 
> 赞同：0
> 
> 时间：2012-05-16T11:33:22.477
> 
> 标签：mongodb, model, relationship

2个型号：

```
# User Model:
...
many :research_papers 
```

和

```
# ResearchPaper Model:
...
key :user_id,  ObjectId
key :username, String

belongs_to :user 
```

我想将研究论文链接到用户。我在那里列出了 :user_id 和 :username ...

我只是自己为用户插入 ObjectId 吗？

```
"_id" : ObjectId("4fb2739045a86e0c5c000002") 
```

最后，我如何验证我是否创建了正确的链接/关联

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:41:17.607

您应该只将 user_id 存储在研究论文模型中，因为如果用户名发生更改，那么您需要更新他们的所有研究论文以及作者。

这是一个关于使用 MongoDB 建模的不错的[教程](http://blog.fiesta.cc/post/11319522700/walkthrough-mongodb-data-modeling)

# svn - 用户的 Subversion 配置文件存储在主要操作系统的什么位置？

> ID：10617648
> 
> 赞同：93
> 
> 时间：2012-05-16T11:33:23.860
> 
> 标签：svn, config, configuration-files

对于 Subversion 1.7，SVN“配置”文件位于各种主要操作系统（特别是 Windows、Mac OS X 和 Linux）上的什么位置？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-05-16T11:46:27.890

`~/.subversion/config` 或者 `/etc/subversion/config`

适用于 Mac/Linux

和

`%appdata%\subversion\config`

适用于 Windows

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-30T14:10:21.193

在 Windows 7、8 和 10 中，您可以在以下位置找到

```
C:\Users\<user>\AppData\Roaming\Subversion 
```

如果您在 Windows 资源管理器地址栏中输入以下内容，它将带您到那里。

```
%appdata%\Subversion 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T11:45:37.140

不确定 Win 但 n *nix（OS X、Linux 等）在`~/.subversion`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-07T15:18:13.760

在 TortoiseSVN 中，您可以在资源管理器的上下文菜单“设置/常规”中访问和修改一些设置。

例如，可以直接在对话框中编辑“全局忽略模式”。正如 bahrep 在她的回答中指出的那样，这些更改存储在注册表中。

（Win10/TortoiseSVN 1.13.1，内部版本 28686 - 64 位）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-29T20:23:30.123

@Baxter 大部分是正确的，但它缺少一个重要的 Windows 特定细节。

Subversion 的运行时配置区存储在`%APPDATA%\Subversion\`目录中。文件是`config`和`servers`。

但是，除了基于文本的配置文件之外，Subversion 客户端还可以使用 Windows 注册表来存储客户端设置。它可以方便地使用 PowerShell 修改设置，还可以通过 AD 组策略将这些设置分发到 Active Directory 环境中的用户工作站。见[SVNBook | 配置和 Windows 注册表](https://www.visualsvn.com/support/svnbook/advanced/confarea/#svn.advanced.confarea.windows-registry)（您可以在那里找到示例和示例`*.reg`文件）。

[![在此处输入图像描述](../Images/275b0ebd4839dad2c352d49c7db4593e.png)](https://i.stack.imgur.com/fztQM.png)

# java - 对数组而不是 ArrayList 进行排序

> ID：10617649
> 
> 赞同：0
> 
> 时间：2012-05-16T11:33:30.360
> 
> 标签：java, arrays, sorting, processing

我有一个数组，而不是 arrayList，我想对它进行排序。这只告诉我集合不适用于参数（pixelPlaceSort.Pixel []，...等。

```
Collections.sort(pixels, new PixelComparator()); 
```

我可以使用 List 来解决它，但出于学习的目的，我不希望这样做。

那么这怎么能行呢？c 是一个整数。

```
class PixelComparator implements Comparator<Pixel> {

  PixelComparator() {
  }

  public int compare(Pixel p1, Pixel p2) {
    if(p1.c < p2.c) {
      return -1; 
    } else if(p1.c > p2.c) {
      return 1; 
    }
    else {
      return 0; 
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T11:35:29.097

你可以使用`Arrays.sort(Object[] array)`或`Arrays.sort(Object[] array,Comparator c)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:35:23.993

为此，您有一个名为**Arrays**的类。

使用**Arrays.sort(pixels)** 或**Arrays.sort(pixels,new PixelComparator())**

检查 java.util.Arrays 的[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Arrays.html)并选择适当形式的 sort() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:36:42.253

使用 Arrays 类 - 特别是这个[Arrays.sort()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:43:52.440

你有 2 个选项来排序。

**1-保持你的阵列：**

您使用[“数组”类的排序方法](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)：

```
Arrays.sort(pixels,new PixelComparator()); 
```

**2- 使用列表**

您首先将数组转换为 List，然后对其进行排序：

```
ArrayList<Pixel> pixellist  = new ArrayList<Pixel>(Arrays.asList(pixels));
Collections.sort(pixellist, new PixelComparator()); 
```

# vb.net - 通过 VB.NET 的 Powershell。哪种方法，为什么？

> ID：10617651
> 
> 赞同：2
> 
> 时间：2012-05-16T11:33:57.077
> 
> 标签：vb.net, powershell

我需要通过我的代码调用 Powershell 命令，并且我发现至少有 2 个不同的示例。我想知道这些方法之间的区别是什么以及为什么我会使用其中一种而不是另一种。

第一个（更简单？）方法是这样的：

```
Dim command As New PSCommand()
command.AddScript("<Powershell command here>")
Dim powershell As Management.Automation.PowerShell = powershell.Create()
powershell.Commands = command
Dim results = powershell.Invoke() 
```

`results`现在包含可以转换为字符串的 Powershell 对象的集合，例如：

```
MsgBox(results.Item(0).ToString()) 
```

第二种方法如下所示：

```
Dim invoker As New RunspaceInvoke
Dim command As String = "<Powershell command here>"
Dim outputObjects As Collection(Of PSObject) = invoker.Invoke(command) 
```

然后我可以遍历返回对象的集合并以相同的方式转换为字符串：

```
For Each result As PSObject In outputObjects
    Console.WriteLine(result.ToString)
Next 
```

我也知道，无论使用哪种方法，我都可以通过管道命令`out-string`使 Powershell 返回字符串而不是对象。

我的问题是，我应该使用哪种方法，为什么？在我看来，它们都一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T01:34:53.777

让我们开始一一理解：

**PowerShell 对象：** 提供用于创建命令管道并在运行空间内同步或异步调用这些命令的方法。此类还提供对包含在调用命令时生成的数据的输出流的访问。此类主要用于以编程方式使用 Windows PowerShell 执行任务的宿主应用程序。此处的管道专用于宿主应用程序，您可以特定于 PowerShell 对象。这也保证了即使命令是同步和异步发送的，您也可以访问 powershell 结果数据。

**RunspaceInvoke：**允许执行来自 CLR 语言的命令。如果宿主应用程序需要显式定义管道，则不能使用它。这将使用现有的对象管道并为您添加 Powershell 命令。您可能在管道中有其他命令，并且还将包含 powershell 命令。在这里，您正在使用 CLR 管道对象并向其添加更多命令，并且管道不是您的应用程序所独有的。

最后我想说的是，使用 Powershell 对象是在任何将托管 Powershell 对象的应用程序中使用的最佳选择。

# python - 使用 Python dbapi 转义 MySQL 保留字

> ID：10617656
> 
> 赞同：0
> 
> 时间：2012-05-16T11:34:10.497
> 
> 标签：python, mysql, mysql-python, python-db-api

我正在为 MySQL 中的保留字问题寻找一个不错的“pythonic”和“SQL-Injection-free”解决方案。

我有以下代码：

```
alter_sql = 'ALTER TABLE %s ADD COLUMN %s TEXT'      
cursor.execute(alter_sql, sql_params) 
```

当列名类似于 'index'、'int'、'limit' ...时，就会出现问题。

在 MySQL shell 中，我可以这样做：

```
ALTER TABLE test ADD COLUMN test.limit; 
```

或者

```
ALTER TABLE test ADD COLUMN `limit`; 
```

但不是

```
ALTER TABLE test ADD COLUMN 'test.limit'; 
```

如何使用 Python 和 MySQLdb 实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:35:45.977

也许这会起作用：

```
alter_sql = 'ALTER TABLE `%s` ADD COLUMN `%s` TEXT' 
```

**更新**：这似乎不起作用，因为以这种方式绑定参数将添加单引号，因为 MySQLdb 假设这是一个字符串文字。

或者，您可以在列名之前附加表名？

```
table_name = MySQLdb.escape_string(table_name)
escaped_column_name = MySQLdb.escape_string(column_name)
column_name = '`%s`.`%s`' % (table_name, escaped_column_name)

alter_sql = 'ALTER TABLE %s ADD COLUMN %s TEXT' % (table_name, column_name) 
```

这样，您必须手动转义它们，以避免绑定它们并在其周围添加单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:00:45.880

从[这里](http://www.kitebird.com/articles/pydbapi.html)：

> 您可以通过使用 %s 占位符标记并将适当的值绑定到它们来发出相同的语句：
> 
> ```
> cursor.execute("""UPDATE animal SET name = %s
>                   WHERE name = %s
>                """, ("snake", "turtle"))
> print "Number of rows updated: %d" % cursor.rowcount 
> ```
> 
> 关于前面的 execute() 调用的形式，请注意以下几点：
> 
> *   对于要插入语句字符串的每个值，%s 占位符标记应出现一次。
> *   %s 标记周围不应加引号；MySQLdb 根据需要为您提供报价。
> *   在执行（）的语句字符串参数之后，提供一个包含要绑定到占位符的值的元组，按照它们应该出现在字符串中的顺序。如果您只有一个值 x，请将其指定为 (x,) 以指示单元素元组。
> *   将 Python None 值绑定到占位符以将 SQL NULL 值插入到语句中。

因此，基于此，您应该只预处理您的参数以查看它们是否在保留关键字列表中，如果是，请将表名添加到列名的前面，例如。

```
RESERVED_KEYWORDS = ['LIMIT', 'INT', 'INDEX']
table_name = 'TESTING'
column_name = 'LIMIT'
if column_name in RESERVED_KEYWORDS:
    column_name = '%s.%s' % (table_name, column_name)
sql_params = [table_name, column_name]
alter_sql = 'ALTER TABLE %s ADD COLUMN %s TEXT'      
cursor.execute(alter_sql, sql_params) 
```

# jquery - JQuery 表行单击不起作用（仅在 IE 中）

> ID：10617664
> 
> 赞同：1
> 
> 时间：2012-05-16T11:34:27.790
> 
> 标签：jquery, internet-explorer, events

该脚本在 Firefox 和 Opera 中都能完美运行。

```
 $(document).ready(function()
         { 
            $('#mainTable tr').each(function() 
            { 
                $(this).on("click",( function () 
                {
                        alert("Test");
                }));
            });
          }); 
```

IE（版本 9）中没有警报。

我环顾四周，这似乎是一个常见问题，但我找不到任何解决方案。

编辑：这是小提琴的测试链接：http: [//jsfiddle.net/BH6Us/](http://jsfiddle.net/BH6Us/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:36:51.513

你不需要`each`，那是行不通的，因为处理程序在每个函数中，它只被调用一次，实际上应该首先调用每个函数来触发`click`函数。

```
$(document).ready(function() { 
   $('#mainTable tr').click(function() {
      alert("Test");
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:38:55.970

你可能会更好地使用这样的 on() 来代替。 [http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$("#mainTable tbody tr").on("click", function(event){
        alert('Test');
    }); 
```

# javascript - 无法使用 sencha 在底部的面板中显示 2*2 按钮以及屏幕顶部的轮播

> ID：10617674
> 
> 赞同：2
> 
> 时间：2012-05-16T11:35:06.950
> 
> 标签：javascript, html, sencha-touch, extjs

我正在尝试在 sencha touch 中创建具有以下设计的页面。

我使用下面的代码使它看起来像

![在此处输入图像描述](../Images/98139eeb7b9fd806250a390ce7965b00.png)

* * *

**代码片段**

```
entwoven.views.vehicleSelectionToolBar = new Ext.Toolbar({
    //Code for toolbar
});

//  **Carousel Started
// ** first carPanel1 - Added 2 pics to view in the visible area

entwoven.views.carPanel1 = new Ext.Panel({
    id: 'carPanel1',
    layout: 'hbox',
    items: [{
        xtype: 'button',
        id: 'beetelbtnId',
        cls: 'beetelbtn',

    }, {
        xtype: 'button',
        id: 'emobbtnId',
        cls: 'emobbtn',
        handler: function() {
            entwoven.views.viewport.setActiveItem('modusaPanel', {
                type: 'slide',
                direction: 'left'
            });
        }

    }]
});

entwoven.views.carPanel2 = new Ext.Panel({
    id: 'carPanel2',
    layout: 'hbox',
    items: [{
        // Same Code as above
    }]

});

entwoven.views.carCarousel = new Ext.Carousel({
    id: 'carCarousel',
    cls: 'carCarousel',

    defaults: {
        cls: 'card'
    },
    items: [entwoven.views.carPanel1, entwoven.views.carPanel2]
});

// Carousel ended//

// Bottom part 2 * 2 buttons started // 
entwoven.views.carhomePanel1 = new Ext.Panel({
    id: 'carhomePanel1',
    layout: 'hbox',
    items: [{
        xtype: 'button',
        id: 'vehiclebtn',

    }]
});

entwoven.views.carhomePanel2 = new Ext.Panel({
    // Same code as above panel with different id and cls
});

entwoven.views.carhomePanel3 = new Ext.Panel({
    // Same code as above panel with different id and cls
});

entwoven.views.carhomePanel4 = new Ext.Panel({
    // Same code as above panel with different id and cls
});

entwoven.views.horizontalPanel1 = new Ext.Panel({
    id: 'horizontalPanel1',
    layout: 'hbox',
    items: [entwoven.views.carhomePanel1, entwoven.views.carhomePanel2]

});

entwoven.views.horizontalPanel2 = new Ext.Panel({
    id: 'horizontalPanel2',
    layout: 'hbox',
    items: [entwoven.views.carhomePanel3, entwoven.views.carhomePanel4]

});

entwoven.views.staticPanel = new Ext.Panel({
    id: 'staticPanel',
    //fullscreen:true,
    layout: 'vbox',
    cls: 'panelBackground',
    items: [entwoven.views.horizontalPanel1, entwoven.views.horizontalPanel2]
});

//  Bottom part 2 * 2 buttons started // 

entwoven.views.vehicleSelectionPanel = new Ext.Panel({
    id: 'vehicleSelectionPanel',
    fullscreen: true,
    cls: 'panelBackground',
    layout: {
        type: 'vbox',
        align: 'stretch'
    },
    defaults: {
        flex: 2
    },
    dockedItems: entwoven.views.vehicleSelectionToolBar,
    items: [entwoven.views.carCarousel, entwoven.views.staticPanel]
}); 
```

当我尝试在谷歌浏览器上运行它时，我无法看到可见区域的底部。

当我检查元素时，它没有显示添加到面板的 Horizo​​ntalPanel1 和 Horizo​​ntalPanel2。

如果我尝试单独渲染底部面板，那就很好了。我尝试了所有可能的方法，但无法找到解决方案。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:50:40.163

使用 vbox 布局将面板添加为轮播项目，并在此父面板中使用 hbox 布局添加两个面板，并将按钮放在这些带有 flex:1 的拖曳子面板中

# java - java.sql.SQLException [Microsoft] [ODBC SQL Server Driver] [SQL Server] 对象名“表名”无效

> ID：10617675
> 
> 赞同：0
> 
> 时间：2012-05-16T11:35:19.343
> 
> 标签：java, sql-server, jdbc

当我使用 JDBC ODBC 驱动程序将 Java 连接到 Mssql

```
try 
{
    ps=conn.prepareStatement("UPDATE products SET stock=? WHERE id=?");

    ps.setInt(1, prods.getStock());
    ps.setInt(2, prods.getId());

    int b = ps.executeUpdate();

    if(b!=0)
    {
        System.out.println("success");
    }
    else
    {
        System.out.println("Fail");
    } 
}
catch(SQLException e)
{
    System.out.println(e);
} 
```

这个 catch 块引发了这个异常

```
java.sql.SQLException [Microsoft] [ODBC SQL Server Driver]
  [SQL Server] Invalid object name 'products' 
```

我从过去 2 天开始就在这部分工作。我将如何解决这个异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:40:11.740

找不到表时会抛出此错误消息。这可能有几个原因：

*   您正在连接到不同的数据库
*   该表已被删除
*   该表在另一个数据库模式中
*   您的用户不再对该表具有读取权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:05:58.517

我想您的连接字符串没有默认数据库-您可能正在连接到“master”，在这种情况下，上述方法将不起作用

您可以通过使用数据库和模式名称限定查询来测试这一点：

例如

```
ps=conn.prepareStatement("UPDATE [YourDatabaseName].[schema].products SET stock=? WHERE id=?"); 
```

将您的值放在需要的地方（标准默认架构是“dbo”，例如 ProductsDatabase.dbo.products）

如果这有效，那么您的连接字符串不正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:42:07.437

通常，如果表不存在，或者连接字符串有错误，则会引发此异常。也许没有连接到正确的数据库？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-24T15:00:03.080

我遇到了类似的问题。在我的情况下，问题的原因是运行报告的用户的 DEFAULT_DATABASE 指向主数据库，在将其更改为正确的数据库后，它能够找到对象。

谢谢

# ios - 如何更改 UIWebView 中的自定义字体？

> ID：10617676
> 
> 赞同：2
> 
> 时间：2012-05-16T11:35:21.733
> 
> 标签：ios, webview

我试过了

[这个答案](https://stackoverflow.com/questions/3768203/how-to-set-custom-font-in-uiwebview)

我将 m.facebook.com 加载到我的 UIWebView 中，我想将其更改为自定义字体。但是，字体没有改变。我相信上面的答案是针对静态 HTML 页面的。

我是 iOS 新手，因此不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:19:55.733

文档在这里，即[Safari CSS Reference](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safaricssref/Introduction.html)

你也可以试试这个：

```
NSString *myDescriptionHTML = [NSString stringWithFormat:@"<html> \n"
                            "<head> \n"
                            "<style type=\"text/css\"> \n"
                            "body {font-family: \"%@\"; font-size: %@;}\n"
                            "</style> \n"
                            "</head> \n"
                            "<body>%@</body> \n"
                            "</html>", @"helvetica", [NSNumber numberWithInt:kFieldFontSize], content]; 
```

好的，所以我们所做的基本上是声明了一个`NSString`. 我们称之为`myDescriptionHTML`。该字符串基本上具有 HTML 代码/结构，简而言之，将正文字体更改为 helvetica。并且`[NSNumber numberWithInt:kFieldFontSize], content]`基本上指定了字体大小。然后：

```
[webView loadHTMLString:myDescriptionHTML baseURL:nil]; 
```

现在我们`UIWebView`正在调用该方法`loadHTMLString: baseURL:`

`loadHTMLString:`接受一个具有 HTML 结构的参数，非常`myDescriptionHTML`完美，我们只是声明要加载具有特定字体的 HTML 页面。`baseURL`像图像这样的东西需要参数，但我们不需要这个参数，除非您的字体不受支持/您创建了它。

# visual-studio-2010 - 在VS2010中复活MFC/Visual Studio 6.0项目

> ID：10617677
> 
> 赞同：6
> 
> 时间：2012-05-16T11:35:23.643
> 
> 标签：visual-studio-2010, visual-c++, mfc

我正在尝试在 Visual Studio 2010 中构建 MFC Visual Studio 6.0 项目。编译器给了我一个错误：

> 错误 C2440: 'static_cast' : 无法从 'void (__thiscall ProgressDialog::* )(void)' 转换为 'LRESULT (__thiscall CWnd::* )(WPARAM,LPARAM)'
> 
> //--------------------------------- // 消息映射
> 
> BEGIN_MESSAGE_MAP(ProgressDialog, CDialog) ON_BN_CLICKED(IDC_CANCEL, OnCancelClicked) **ON_MESSAGE** (MSG_FINISHED, OnFinished) END_MESSAGE_MAP()

有什么建议么 - ？

佩德罗

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T13:48:26.773

将您的 ON_MESSAGE 宏更改为 ON_MESSAGE_VOID。ON_MESSAGE 宏从接收 WPARAM 和 LPARAM 参数返回 LRESULT。您的编译器错误消息指出您的 OnFinished() 方法是返回 void 的 void 参数。这就是 ON_MESSAGE_VOID 宏处理的内容。

**添加：**

[请参阅C++ Q & A](https://www.microsoft.com/msj/0799/c/c0799.aspx)的底部——Microsoft Systems Journal 1999 年 7 月

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:46:40.420

MFC7.0中发生了[重大变化](http://msdn.microsoft.com/en-us/library/w1sc4t4k%28VS.90%29.aspx)，包括：

> `ON_MESSAGE`宏中的函数参数必须与类型匹配
> 
> `afx_msg LRESULT (CWnd::*)(WPARAM, LPARAM)`

您的`ProgressDialog::OnFinished`方法现在需要返回一个`LRESULT`.

# c# - C# 中代表的意外表现不佳

> ID：10617681
> 
> 赞同：3
> 
> 时间：2012-05-16T11:35:38.680
> 
> 标签：c#, .net, performance, delegates

我之前发布了[这个](https://stackoverflow.com/questions/10613728/run-dynamically-compiled-c-sharp-code-at-native-speed-how)关于在 C# 中动态编译代码的问题，答案引出了另一个问题。

一个建议是我使用代表，我尝试过并且效果很好。然而，他们的替补速度比直接调用慢了大约 8.4 倍，这是没有意义的。

这段代码有什么问题？

我的结果，.Net 4.0，64位，直接运行exe：62、514、530

```
public static int Execute(int i) { return i * 2; }

private void button30_Click(object sender, EventArgs e)
{
    CSharpCodeProvider foo = new CSharpCodeProvider();

    var res = foo.CompileAssemblyFromSource(
        new System.CodeDom.Compiler.CompilerParameters()
        {
            GenerateInMemory = true,
            CompilerOptions = @"/optimize",                    
        },
        @"public class FooClass { public static int Execute(int i) { return i * 2; }}"
    );

    var type = res.CompiledAssembly.GetType("FooClass");
    var obj = Activator.CreateInstance(type);
    var method = type.GetMethod("Execute");
    int i = 0, t1 = Environment.TickCount, t2;
    //var input = new object[] { 2 };

    //for (int j = 0; j < 10000000; j++)
    //{
    //    input[0] = j;
    //    var output = method.Invoke(obj, input);
    //    i = (int)output;
    //}

    //t2 = Environment.TickCount;

    //MessageBox.Show((t2 - t1).ToString() + Environment.NewLine + i.ToString());

    t1 = Environment.TickCount;

    for (int j = 0; j < 100000000; j++)
    {
        i = Execute(j);
    }

    t2 = Environment.TickCount;

    MessageBox.Show("Native: " + (t2 - t1).ToString() + Environment.NewLine + i.ToString());

    var func = (Func<int, int>) Delegate.CreateDelegate(typeof (Func<int, int>), method);

    t1 = Environment.TickCount;

    for (int j = 0; j < 100000000; j++)
    {
        i = func(j);
    }

    t2 = Environment.TickCount;

    MessageBox.Show("Dynamic delegate: " + (t2 - t1).ToString() + Environment.NewLine + i.ToString());

    Func<int, int> funcL = Execute;

    t1 = Environment.TickCount;

    for (int j = 0; j < 100000000; j++)
    {
        i = funcL(j);
    }

    t2 = Environment.TickCount;

    MessageBox.Show("Delegate: " + (t2 - t1).ToString() + Environment.NewLine + i.ToString());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T16:57:28.350

正如汉斯在对您的问题的评论中提到的那样，该`Execute`方法非常简单，几乎可以肯定它会被您的“本机”测试中的抖动内联。

因此，您看到的不是标准方法调用和委托调用之间的比较，而是内联`i * 2`操作和委托调用之间的比较。（并且该`i * 2`操作可能归结为一条机器指令，大约是您可以获得的最快速度。）

使您的`Execute`方法更复杂一些以防止内联（和/或使用[`MethodImplOptions.NoInlining`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimploptions.aspx)编译器提示进行）；那么您将在标准方法调用和委托调用之间获得更真实的比较。在大多数情况下，差异可能可以忽略不计：

```
[MethodImpl(MethodImplOptions.NoInlining)]
static int Execute(int i) { return ((i / 63.53) == 34.23) ? -1 : (i * 2); }
public static volatile int Result;

private static void Main(string[] args)
{
    const int iterations = 100000000;

    {
        Result = Execute(42);  // pre-jit
        var s = Stopwatch.StartNew();

        for (int i = 0; i < iterations; i++)
        {
            Result = Execute(i);
        }
        s.Stop();
        Console.WriteLine("Native: " + s.ElapsedMilliseconds);
    }

    {
        Func<int, int> func;
        using (var cscp = new CSharpCodeProvider())
        {
            var cp = new CompilerParameters { GenerateInMemory = true, CompilerOptions = @"/optimize" };
            string src = @"public static class Foo { public static int Execute(int i) { return ((i / 63.53) == 34.23) ? -1 : (i * 2); } }";

            var cr = cscp.CompileAssemblyFromSource(cp, src);
            var mi = cr.CompiledAssembly.GetType("Foo").GetMethod("Execute");
            func = (Func<int, int>)Delegate.CreateDelegate(typeof(Func<int, int>), mi);
        }

        Result = func(42);  // pre-jit
        var s = Stopwatch.StartNew();

        for (int i = 0; i < iterations; i++)
        {
            Result = func(i);
        }
        s.Stop();
        Console.WriteLine("Dynamic delegate: " + s.ElapsedMilliseconds);
    }

    {
        Func<int, int> func = Execute;
        Result = func(42);  // pre-jit

        var s = Stopwatch.StartNew();
        for (int i = 0; i < iterations; i++)
        {
            Result = func(i);
        }
        s.Stop();
        Console.WriteLine("Delegate: " + s.ElapsedMilliseconds);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T11:47:00.510

这说得通。委托不是函数指针。它们意味着类型检查、安全性和许多其他东西。即使性能影响来自完全不同的东西，它们也更接近于虚拟函数调用的速度（参见[这篇文章）。](http://blogs.msdn.com/b/joelpob/archive/2004/04/01/105862.aspx)

为了更好地比较不同的调用技术（其中一些在问题中没有提到），请阅读[这篇文章](http://www.palmmedia.de/Blog/2012/2/4/reflection-vs-compiled-expressions-vs-delegates-performance-comparision)。

# c# - 如何将 MS Chart 控件导出到 Excel

> ID：10617690
> 
> 赞同：0
> 
> 时间：2012-05-16T11:36:08.240
> 
> 标签：c#, excel, export-to-excel, mschart

我使用 MS Chart Controls 在我的 Web 应用程序 (.Net 4.0) 中生成了一个图表。我的要求是将特定图表作为图像导出到 Excel 文件中。我已经编写了下面提到的代码，试图将图表图像作为字节数组写入 excel 文件。但它导致我的 excel 文件中出现了一些未知字符。（字节数组可能已直接写入文件）。

```
byte[] bytes2;
    using (var chartimage = new MemoryStream())
    {
        Chart1.SaveImage(chartimage, ChartImageFormat.Png);
        bytes2 = chartimage.GetBuffer();
    }

    Response.Clear();
    Response.ContentType = "application/ms-excel";
    Response.AddHeader("content-disposition", "attachment; filename=StudentResults.xls");
    Response.BinaryWrite(bytes2);

    Response.End(); 
```

你们中的任何人都可以帮我以正确的方式将此图表写入excel文件吗？（不使用字节数组也可以）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:03:39.327

我能够找到实现它的正确方法；将 ms 图表（ms 图表控件）导出为 excel 作为图像。我很高兴在这里分享它。正确的源代码示例如下。

```
string tmpChartName = "test2.jpg";
    string imgPath = HttpContext.Current.Request.PhysicalApplicationPath + tmpChartName;

    Chart1.SaveImage(imgPath);
    string imgPath2 = Request.Url.GetLeftPart(UriPartial.Authority) + VirtualPathUtility.ToAbsolute("~/" + tmpChartName);

    Response.Clear();
    Response.ContentType = "application/vnd.ms-excel";
    Response.AddHeader("Content-Disposition", "attachment; filename=test.xls;");
    StringWriter stringWrite = new StringWriter();
    HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);
    string headerTable = @"<Table><tr><td><img src='" + imgPath2 + @"' \></td></tr></Table>";
    Response.Write(headerTable);
    Response.Write(stringWrite.ToString());
    Response.End(); 
```

谢谢 ：）

# annotations - 注释工具的医学数据集

> ID：10617698
> 
> 赞同：0
> 
> 时间：2012-05-16T11:36:47.520
> 
> 标签：annotations, ontology, medical

我正在为医学文本开发基于本体的注释工具，但在找到合适的数据集时遇到了一些麻烦。

我正在使用疾病本体，因此我需要一个专注于疾病及其症状/治疗的医学数据集。

数据集最好是自然语言文本（文章、研究等），但基于字典和基于列表的文本也可能会有所帮助。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:28:16.163

你的意思是你正在寻找一个生物医学文本语料库来注释？IE。识别关键术语。您可以尝试发布摘要——它们位于[链接开放数据云](http://thedatahub.org/dataset/bio2rdf-pubmed)中，您可以尝试使用 Wikipedia 获取消费者级别的内容，甚至 NIH 开放获取期刊的网站目录也会有大量开放的学术内容需要注释。

如果您还没有 - 请查看[UMLS](http://www.nlm.nih.gov/research/umls/)（以及它的副项目，如[metamap](http://metamap.nlm.nih.gov/)） - 它对于任何类型的生物医学 NLP 都是无价的。如果你有兴趣，我想我有一份 UMLS 和疾病本体之间的映射文件。（[RDF UMLS](http://link.informatics.stonybrook.edu/umls/)，[http://linkedlifedata.com](http://linkedlifedata.com)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-19T13:05:36.307

我有偏见（因为我是联合创始人），仍然在[tagtog.net](http://tagtog.net/-corpora)上你会发现一堆[生物医学语料库](https://www.tagtog.net/-corpora)。例如，IDP4+ 语料库注释基因突变提及及其影响（也包括某些疾病），而 V300 语料库注释引起疾病的病毒。

# javascript - 在地图外显示图像（在地图弹出窗口中可见）

> ID：10617699
> 
> 赞同：0
> 
> 时间：2012-05-16T11:36:49.963
> 
> 标签：javascript, wordpress, google-maps

我正在使用 Wordpress 插件（Store Locator Plus - 在地图中显示一堆商店，并在下方列出它们）这很好，但我需要做一些改动，我发现处理地图和信息的文件是一个 .js 文件。

当您单击指针时，该插件会在您看到的气球中显示一个图像，我想在地图下方的列表中显示相同的图像。

这是在气球中显示内容的代码：

```
function createMarker(point, name, address, homeAddress, description, url, email, hours, phone, image,tags) { 
markerOpts = { icon:theIcon };
var marker = new GMarker(point, markerOpts);

var more_html="";
if(url.indexOf("http://")==-1) {
url="http://"+url;
}

if (url.indexOf("http://")!=-1 && url.indexOf(".")!=-1) {
more_html+="| <a href='"+url+"' target='_blank' class='storelocatorlink'><nobr>" + slplus.website_label +"</nobr></a>"
} else {
url="";
}

if (email.indexOf("@")!=-1 && email.indexOf(".")!=-1) {
if (!slplus.use_email_form) { 
  more_html+="| <a href='mailto:"+email+"' target='_blank' class='storelocatorlink'><nobr>" + email +"</nobr></a>";
} else {
  more_html+="| <a href='javascript:slp_show_email_form("+'"'+email+'"'+");' class='storelocatorlink'><nobr>" + email +"</nobr></a><br/>";
}                    
}

if (image.indexOf(".")!=-1) {more_html+="<br/><img src='"+image+"' class='sl_info_bubble_main_image'>"} else {image=""}
if (description!="") {more_html+="<br/>"+description+"";} else {description=""}
if (hours!="") {more_html+="<br/><span class='location_detail_label'>Hours:</span> "+hours;} else {hours=""}
if (phone!="") {more_html+="<br/><span class='location_detail_label'>Phone:</span> "+phone;} else {phone=""}

var street    = address.split(',')[0]; 
    if (street.split(' ').join('')!=""){
        street+='<br/>';
    }else{
        street="";
    }
var street2   = address.split(',')[1]; 
    if (street2.split(' ').join('')!=""){
        street2+='<br/>';
    }else{
        street2="";
    }
var city      = address.split(',')[2]; 
    if (city.split(' ').join('')!=""){
        city+=', ';
    }else{
        city="";
    }
var state_zip = address.split(',')[3];    

// If we want to show tags in the bubble...
//
if (slplus.show_tags) {
  if (jQuery.trim(tags) != '') {
      more_html += '<br/>'+tags;
  }
}       

if (homeAddress.split(" ").join("")!="") {
var html = '<div id="sl_info_bubble"><!--tr><td--><strong>' + name + '</strong><br>' + street + street2 + city + state_zip + '<br/> <a href="http://' + slplus.map_domain + '/maps?saddr=' + encodeURIComponent(homeAddress) + '&daddr=' + encodeURIComponent(address) + '" target="_blank" class="storelocatorlink">Indicazioni Stradali</a> ' + more_html + '<br/><!--/td></tr--></div>'; 
} else {
var html = '<div id="sl_info_bubble"><!--tr><td--><strong>' + name + '</strong><br>' + street + street2 + city + state_zip + '<br/> <a href="http://' + slplus.map_domain + '/maps?q=' + encodeURIComponent(address) + '" target="_blank" class="storelocatorlink">Map</a> ' + more_html + '<!--/td></tr--></div>';
}
GEvent.addListener(marker, 'click', function() {
marker.openInfoWindowHtml(html);
});
return marker;
}

var resultsDisplayed=0;
var bgcol="white"; 
```

这带来了这个形象

```
<img src='"+image+"' class='sl_info_bubble_main_image'> 
```

我想获取该图像并将其显示在使用以下代码创建的商店列表中：

```
function createSidebarEntry(marker, name, address, distance, homeAddress, url, email, phone,tags) { 
document.getElementById('map_sidebar_td').style.display='block';
  var div = document.createElement('div');
  var street = address.split(',')[0]; 
  var street2 = address.split(',')[1]; 
  var city = address.split(',')[2]; 
    if (city.split(' ').join('')!=""){
        city+=', ';
    }else{
        city="";
    }
  var state_zip = address.split(',')[3];

  var link = '';
  if(url.indexOf("http://")==-1) {url="http://"+url;} 
  if (url.indexOf("http://")!=-1 && url.indexOf(".")!=-1) {link="<a href='"+url+"' target='_blank' class='storelocatorlink'><nobr>" + slplus.website_label +"</nobr></a><br/>"} else {url="";}

  var elink = "";
  if (email.indexOf("@")!=-1 && email.indexOf(".")!=-1) {
      if (!slplus.use_email_form) { 
          elink="<a href='mailto:"+email+"' target='_blank' class='storelocatorlink'><nobr>" + email +"</nobr></a><br/>";
      } else {
          elink="<a href='javascript:slp_show_email_form("+'"'+email+'"'+");' class='storelocatorlink'><nobr>" + email +"</nobr></a><br/>";
      }              
  }

  // If we want to show tags in the table...
  //
  var taginfo = "";
  if (slplus.show_tags) {
      if (jQuery.trim(tags) != '') {
          var tagclass = tags.replace(/\W/g,'_');
          taginfo = '<br/><div class="'+tagclass+'"><span class="tagtext">'+tags+'</span></div>';
      }
  }          

  // Keep empty data lines out of the final output
  //
  if (jQuery.trim(street) != '')         { street = street + '<br/>'; }
  if (jQuery.trim(street2) != '')        { street2 = street2 + '<br/>'; }
  if (jQuery.trim(city+state_zip) != '') { state_zip = state_zip + '<br/>'; }

  var html = '<div class="punti-vendita-box">' +
                '<div class="punto-vendita-name"><h3>' + name + '</h3></div>' +
                 '<div class="punto-vendita-extra"><div class="punto-vendita-details">' + 
                    street +  
                    street2 + 
                    city + state_zip +
                    phone +
                '</div>    <div class="punto-vendita-indicazioni">' + 
                         link + 
                         elink +
                         '<a href="http://' + slplus.map_domain + 
                         '/maps?saddr=' + encodeURIComponent(homeAddress) + 
                         '&daddr=' + encodeURIComponent(address) + 
                         '" target="_blank" class="storelocatorlink">Indicazioni Stradali</a></div>' +
                    '</div>' +

                    '</div>'; 
  div.innerHTML = html;
  div.className='results_entry';
  resultsDisplayed++;
  GEvent.addDomListener(div, 'click', function() {
    GEvent.trigger(marker, 'click');
  }); 
return div;
} 
```

考虑到图像已经在前面的代码块中找到，应该很容易。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:59:51.340

如果在地图之后创建商店列表，则以后很难附加图像。您可以做到这一点的一种方法是向气泡中的图像添加唯一 ID，例如

```
<img src='"+image+"' class='sl_info_bubble_main_image' id='" + name + "'> 
```

然后在代码中创建列表使用

```
<img src='" + $('#' + name ).attr('src') +"' class='sl_info_bubble_main_image' > 
```

从代码中我无法确定 name 是否是唯一标识符，因此您必须确定在您的情况下最适合什么。

# r - 删除“。”之后的部分字符串

> ID：10617702
> 
> 赞同：91
> 
> 时间：2012-05-16T11:37:00.953
> 
> 标签：r

我正在使用 NCBI 参考序列登录号，例如变量`a`：

```
a <- c("NM_020506.1","NM_020519.1","NM_001030297.2","NM_010281.2","NM_011419.3", "NM_053155.2") 
```

要从 biomart 包中获取信息，我需要删除登录号后的 等`.1`。`.2`我通常使用以下代码执行此操作：

```
b <- sub("..*", "", a)

# [1] "" "" "" "" "" "" 
```

但正如您所见，这不是该变量的正确方法。谁能帮我这个？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-05-16T14:43:27.017

你只需要逃避这个时期：

```
a <- c("NM_020506.1","NM_020519.1","NM_001030297.2","NM_010281.2","NM_011419.3", "NM_053155.2")

gsub("\\..*","",a)
[1] "NM_020506"    "NM_020519"    "NM_001030297" "NM_010281"    "NM_011419"    "NM_053155" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-06-14T14:07:10.547

我们可以假装它们是文件名并删除*扩展名*：

```
tools::file_path_sans_ext(a)
# [1] "NM_020506"    "NM_020519"    "NM_001030297" "NM_010281"    "NM_011419"    "NM_053155" 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-16T11:44:58.870

你可以这样做：

```
sub("*\\.[0-9]", "", a) 
```

或者

```
library(stringr)
str_sub(a, start=1, end=-3) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-04-24T13:10:38.440

如果字符串应该是固定长度的，那么可以使用`substr`from 。`base R`但是，我们可以得到`.`with的位置`regexpr`并将其用于`substr`

```
substr(a, 1, regexpr("\\.", a)-1)
#[1] "NM_020506"    "NM_020519"    "NM_001030297" "NM_010281"    "NM_011419"    "NM_053155" 
```

# java - 为什么包含 main 方法的类没有实例化并且在 Java 中仍然可以？

> ID：10617703
> 
> 赞同：7
> 
> 时间：2012-05-16T11:37:01.860
> 
> 标签：java, oop, methods, main

我开始编写我的第一个[Java 程序](http://docs.oracle.com/javase/tutorial/getStarted/application/index.html#MAIN)。

```
class HelloWorldApp {
    public static void main(String[] args) {
        System.out.println("Hello World!"); // Display the string.
    }
} 
```

只需使用上面的代码，程序就可以正常运行。但是根据我的 OOP 知识，a`class`只是一个抽象概念，直到您创建了一个同类对象后才会出现。然后，通过该对象，我们调用类中的方法/函数。

但是在这个特定的示例中，似乎`main`即使没有创建`class` `HelloWorldApp`

该对象是在其他地方创建的吗？如果是这样，那部分代码怎么知道我的`class`名字`HelloWorldApp`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T11:37:55.687

这是因为它是`static`方法，因此它不需要创建实例

JVM 将加载`HelloWorldApp`该类并在其上调用静态方法，并且由于它是公共 JVM（外部）可以访问此方法

* * *

**另见**

*   [为什么是java-main-method-static](https://stackoverflow.com/questions/146576/why-is-the-java-main-method-static)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T11:39:21.793

java应用程序的起点（不总是）是这个方法

```
public static void main(String[] args) {
        System.out.println("Hello World!"); // Display the string.
    } 
```

当您这样做`java className`时，它将检查该类是否具有 main 方法，因为它是静态的，因此可以在不创建实例的情况下调用它。

如果没有主方法或主方法存在但没有相同的签名，它将向您抛出一个`RuntimeException`未找到的主方法。

不要忘记阅读[详细了解 main 方法](http://docs.oracle.com/javase/tutorial/getStarted/application/index.html)。

题外话：

扩展相同的想法，您不需要类的实例来引用其静态方法和字段。

```
public class MyClass {
  public static int NUMBER = 10;

  public static void String sayHello(){
    return "Hello";
  }

  public void String sayBye(){
    return "Bye";
  }

  public static void main(String[] args){
    System.out.println(NUMBER); // No need for object 
    System.out.println(sayHello()); // No need for object 
    System.out.println(new MyClass().sayBye()); // sayBye is not accessible at class level have to have an object of MyClass to access sayBye
  }
} 
```

如果在其他类中调用相同的方法，则它可能如下所示：

```
public class MyClassCaller {
   public static void main(String[] args){
    System.out.println(MyClass.NUMBER); // No need for object just refer the class
    System.out.println(MyClass.sayHello()); // No need for object just refer the class
    System.out.println(new MyClass().sayBye()); // sayBye is not accessible at class level have to have an object of MyClass to access sayBye
  }
} 
```

[关于静态方法](https://stackoverflow.com/questions/752758/is-using-a-lot-of-static-methods-a-bad-thing)的使用/过度使用的一个很好的讨论

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T11:40:03.550

main 方法是静态的，不需要实例

# matlab - 在 Matlab 中将 double 类型的矩阵转换为图像

> ID：10617704
> 
> 赞同：0
> 
> 时间：2012-05-16T11:37:04.127
> 
> 标签：matlab, image-processing

我在使用 imwrite 将 double 类型的矩阵转换为 image.iam 时遇到问题，但每次错误都是输入参数过多。矩阵的值从 0 到 255，但类型是 double。我使用 imread 打开图像，然后将其转换为二进制，然后使用命令 double 并尝试将其转换回图像。我需要我的 fyp 中的二进制形式，然后将其转换回图像。这怎么可能？如果有人有解决方案，请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:45:19.510

您可以使用[`im2double`](http://www.mathworks.com/help/toolbox/images/ref/im2double.html)将值从`uint8`值转换为`double`值。相反，您可以使用[`im2uint8`](http://www.mathworks.com/help/toolbox/images/ref/im2uint8.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:21:44.273

使用此代码：

```
I = imread('test.jpg');
b = dec2bin(I); % b becomes vector
% some actions with binary vector
du = bin2dec(b);
du = reshape(du,size(I)); % converting vector du to 3d Image array 
imwrite(uint8(du), 'du.jpg'); %save our du to file du.jpg

I = imread('du.jpg'); %test if it saved correctly
imshow(du) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T12:07:59.200

如果使用java调用matlab函数（java发送字节数组作为输入图像），首先将矩阵转换为无符号8位整数：

```
m1 = typecast(arr, 'uint8'); 
```

将输入设置为无符号整数后，您可以将这些像素值用作 (0, 255) 范围内的 RGB。如果你想使用像 conv2 这样的过滤器，你必须将无符号数组转换为图像双精度。可以是这样：

```
m2 = im2double(m1); 
```

应用卷积生成双精度输出（0-1 之间）。在那之后，如果你想获得无符号值，你必须使用它：

```
m3 = im2uint8(m2); 
```

特别是当您从 java 调用 matlab 时，将输入数组类型转换为 uint8 非常关键，因为 matlab 最初接收 java 字节数组作为有符号 int。解决这个问题非常痛苦，因此跟踪转换步骤可能会有所帮助！

# c++ - stl算法中不同类型的严格弱排序

> ID：10617705
> 
> 赞同：2
> 
> 时间：2012-05-16T11:37:11.927
> 
> 标签：c++, stl, c++11

我有一个类定义了与其他类型的严格弱排序，我想在该类的容器上使用基于比较的算法（例如 std::upper_bound）。

该标准定义容器的前向迭代器值类型应该是可比较类型的值类型，因此以下内容无法编译：

```
template<typename T>
class Foo {
public:
    bool operator<(const T& _val) { return val < _val; }
    //operator T() { return val; } // uncommenting this solves the problem
private:
    T val;
};

void bar() {
    vector<Foo<int>> foos(10);
    auto i_lb = std::lower_bound(foos.begin(), foos.end(), 17); // compiles and works, though I don't know why
    auto i_eq = std::equal_range(foos.begin(), foos.end(), 17); // error! not convertible to int
} 
```

我找不到使用接受谓词的算法版本的方法（也要求类型相同）。定义一个转换运算符可以使这个例子工作，但定义一个并不总是正确的。进行这种比较的正确方法是什么？

顺便说一句，用 std::lower_bound 替换 std::equal_range 是可行的，但我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:47:21.023

equal_range 必须以两种方式比较值以确定它们是否相等

> 一个值 ,`a`被认为与另一个值 , 等价`b`时`(!(a<b) && !(b<a))`

lower_bound 只需找到范围的一端。

您的比较仅适用于`Foo < T`，而不适用于`T < Foo`。

# javascript - 如何使用javascript将jpg图像转换为png

> ID：10617710
> 
> 赞同：19
> 
> 时间：2012-05-16T11:37:40.823
> 
> 标签：javascript

将JPG图像转换为PNG

我必须使用 javascript 将 jpg 图像转换为 png 图像并调整图像大小以创建图像缩略图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-05-12T18:51:53.857

如果我们查看[JPG to PNG网站的](https://jpgtopng.xyz)[源代码](https://github.com/jpgtopng/jpgtopng.github.io)，该网站使用纯 JavaScript 将图像从 JPG 转换为 PNG。我们看到他们：

1.  从文件中加载 jpg 图像
2.  创建一个与jpg相同大小的画布
3.  绘制覆盖整个画布的jpg图像
4.  将画布转换为 blob（如果图像足够小，您也可以使用`.toDataURL()`）
5.  下载 blob

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:41:18.543

你应该看看 processing.js 库： http: [//processingjs.org/reference/PImage_resize_/](http://processingjs.org/reference/PImage_resize_/) http://processingjs.org/reference/save_/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:41:44.640

编写一个允许您操作和转换图像的纯 JavaScript 库并非不可能，但我不知道任何事情，我也不会使用它们。

相反，我会将原始图像上传到我选择的服务器框架（PHP、ASP.NET 等）并让它为您处理图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-19T00:18:47.257

通过 emscripten 有很多原生 png/JPEG 库的端口，还有一些纯粹用 JavaScript 编写的，这就是我现在想到的：

[https://www.npmjs.com/package/jimp](https://www.npmjs.com/package/jimp)

```
Jimp.read('lenna.png', (err, lenna) => {
  if (err) throw err;
  lenna
    .write('lena-small-bw.jpg'); // save
}); 
```

但一般来说，您想在 npm.org 中搜索“png to jpeg”之类的内容，您会发现很多库。

# actionscript-3 - as3/Flash/Flex 和 RESTful web 的现状如何？

> ID：10617712
> 
> 赞同：1
> 
> 时间：2012-05-16T11:37:58.053
> 
> 标签：actionscript-3, flash, apache-flex, rest

搜索有关 Flash/Flex + REST 的信息会产生多年前的博客文章（从 2009 年、2008 年甚至更早），但没有关于当前情况的信息，尤其是与 Flash Player 11 相关的信息。

此外，当时显然非常流行的许多库（as3httpclient、resthttpservice 等）似乎已经过时并且似乎已经快速而无声地死亡（最后一次提交是在 2 年前，提出了对新版本的更改，该版本是从未发布，等等）。

当前的 Flash Player 在 RESTful 功能方面是否有所改变？如果 FP 仍然不提供该功能，是否有任何仍然积极支持和维护的库可用于处理 REST 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:42:47.720

与任何其他 Web 服务相比，连接 RESTful API 与连接到任何其他 Web 服务实际上不需要做任何特别的事情，因此一旦记录了基本步骤，就没有必要进一步讨论它了。根据我使用这些服务的经验，它们基本上只是针对 CRUD 的非标准化接口。

我确实觉得 Flash 在这方面的能力比 Flex 弱，这可能是这些库曾经填补的空白，但是编写一个模仿 Flex 在 Flash 中所做的最小实现并不难。

# for-loop - 如何在 xquery 中使用 For 循环？

> ID：10617720
> 
> 赞同：1
> 
> 时间：2012-05-16T11:38:24.867
> 
> 标签：for-loop, xquery

我有一个类似的 url-pattern `"http://www.asdf.com/pages=1"`，现在我想为这个 url-pattern 操作 for 循环，直到 1547 即 ( `"http://www.asdf.com/pages=1547"`)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:49:44.177

这可能会满足您的需要：

```
for $i in (1 to 10, 1547, 1548)
return concat("http://www.asdf.com/pages=", $i) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T11:53:52.870

```
for $i in (1 to 1547)
return concat("http://www.asdf.com/pages=",$i) 
```

# php - 通过数组循环在数据库中导入数据的正则表达式帮助

> ID：10617721
> 
> 赞同：0
> 
> 时间：2012-05-16T11:38:29.173
> 
> 标签：php, regex

我有一个文本文件，其中所有的问题和答案都在那里，就像下面的文字

```
question l : Regular expression problem in C#  

answer 1 :   regular expression answer 1

question  2 : Regular expression problem in php 

answer 2 :   regular expression answer 2 
```

ETC...

我做了这个像下面

```
<question> question l : Regular expression problem in C# </question> 

<answer> answer 1 : regular expression answer 1</answer>

<--page-->

<question>question 2 : Regular expression problem in php </question>

<answer>answer 2 : regular expression answer 1</answer>

<--page--> 
```

这样我就可以创建一个数组和 foreach 循环，我可以将它插入到下表中的数据库中

question_id，问题答案

1 C#正则表达式中的正则表达式问题解答1

2 php正则表达式中的正则表达式问题解答2

任何人都可以帮助我构建正则表达式，我构建了这个，但它在答案文本中包含问题文本

```
preg_match_all("#^(?<!<question>).*<question>.*?</question>(?!.*<question>)#",$temp_data,$question);
preg_match_all("#^(?<!<answer>).*<answer>.*?</answer>(?!.*<answer>)#",$temp_data,$answer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:50:42.763

我不确定我可以完全遵循，但我认为你想要这个

```
preg_match_all("#(?<=<question>).*?(?=</question>)#",$temp_data,$question);
preg_match_all("#(?<=<answer>).*?(?=</answer>)#",$temp_data,$answer); 
```

第一个将匹配`<question>`标签和下一个`</question>`标签之间的任何内容，但不匹配标签本身。[在 Regexr 上](http://regexr.com?30vj9)查看

第二个将匹配`<answer>`标签和下一个`</answer>`标签之间的任何内容，但不匹配标签本身。

# python - 在python目录中行走和处理文件

> ID：10617731
> 
> 赞同：2
> 
> 时间：2012-05-16T11:39:15.707
> 
> 标签：python, dir

我有目录树格式的大量数据，例如：
`c:/user/name/class/std/section I to VI [all section has individual folder i.e. 6 folder in total and all folder have 100+ files to be processed]`
我编写了一个脚本，如果我在其中提供包含文件的文件夹，例如`Section I`，它将使用`glob.iglob`函数处理内部文件。
是否可以编写一个脚本，只需进入一个目录 > 处理文件 > 离开目录 > 进入不同的目录 > 等等，就可以遍历目录。
请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T11:45:24.893

你可以试试这段代码：

```
import os
folder = 'C:'

for root, dirs, files in os.walk(folder):
    for name in files:
        print os.path.join(root, name)
    for name in dirs:
        print os.path.join(root, name) 
```

**更新：**

导入操作系统文件夹 = 'C:'

```
for root, dirs, files in os.walk(folder):
    for name in files:
        nm, ext = os.path.splitext(name)
        if ext == ".csv":
            print os.path.join(root, name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:49:16.840

```
import os
for (dirpath, dirnames, filenames) in os.walk(directory):
    # Do some processing 
```

这将遍历指定目录的根目录，例如。`c:/user/name/class/std`并输入其中包含的每个文件夹，并为您提供其中包含的文件夹和文件。有了这个，你应该能够做你需要明智地处理的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:28:56.507

解决 Abhisek 对 Aragon 解决方案的评论：

导入操作系统文件夹 = 'C:'

```
for root, dirs, files in os.walk(folder):
    for name in files:
        (base, ext) = os.path.splitext(name)
        if ext in "csv":
            print os.path.join(root, name) 
```

# java - 在 JNI 中，如何根据 IBM 的性能建议缓存类、方法 ID 和字段 ID？

> ID：10617735
> 
> 赞同：26
> 
> 时间：2012-05-16T11:39:48.300
> 
> 标签：java, performance, caching, java-native-interface

[我在 IBM](http://www.ibm.com/developerworks/java/library/j-jni/index.html#notc)上读到

> 要访问 Java 对象的字段并调用它们的方法，本机代码必须调用 FindClass()、GetFieldID()、GetMethodId() 和 GetStaticMethodID()。在 GetFieldID()、GetMethodID() 和 GetStaticMethodID() 的情况下，为给定类返回的 ID 在 JVM 进程的生命周期内不会更改。但是获取字段或方法的调用可能需要 JVM 中的大量工作，因为字段和方法可能已经从超类继承，使得 JVM 沿着类层次结构查找它们。因为给定类的 ID 是相同的，所以您应该查找它们一次，然后重用它们。同样，查找类对象可能会很昂贵，因此它们也应该被缓存。

如何在 JNI中**缓存**、和对象？是否有必须遵循的内置方法或特定程序？`methodID``fieldID``class`

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-18T20:12:50.023

没有可遵循的内置方法，但是这里有一个标准的、干净的和可重复的实现，展示了我如何实践 IBM 的建议。

我将假设您正在从 Java 调用您的 DLL，并且您在整个应用程序生命周期中多次引用它。

示例 Native Java 类名为`org.stackoverflow.jni.NativeClazz`，它将实现 2 个内置 JNI 方法`JNI_OnLoad()`和`JNI_OnUnload()`.

`void JNI_OnLoad(JavaVM *vm, void *reserved)`：此方法将用于将类 ID 注册为全局变量，并将方法 ID 和字段 ID 分配给静态变量。该方法在Java VM加载驱动时自动调用；它在驱动程序生命周期中只被调用一次。

`void JNI_OnUnload(JavaVM *vm, void *reserved)`：此方法将用于释放由 注册的所有全局变量`JNI_OnLoad()`。`JNI_OnUnload()`VM 将在应用程序关闭之前立即自动调用。

**理由：**据我了解，必须将类 ID 注册为全局引用，以保持任何关联的方法 ID/字段 ID 的可行性。如果没有这样做并且类从 JVM 中卸载，则在类重新加载时，方法 ID/字段 ID 可能不同。如果 Class ID 注册为全局引用，则关联的 Method IDs 和 Field IDs 不需要注册为全局引用。将类 ID 注册为全局引用可防止卸载关联的 Java 类，从而稳定方法 ID/字段 ID 值。全局引用（包括类 ID）应在`JNI_OnUnload()`.

方法 ID 和字段 ID 不由本机代码管理；它们由虚拟机管理并且在关联类被卸载之前一直有效。在虚拟机卸载定义类之前，不能显式删除字段 ID 和方法 ID；它们可以在卸载后留给 VM 处理。

**示例代码**

以下 C++ 代码部分中的注释解释了全局注册变量。

*`BeanObject`这是表示数据对象的 Java 类：*

```
package org.stackoverflow.data;

public class BeanObject {

    String foo = "";

    public String getFoo() {

        return foo;
    }
} 
```

*这是一个骨架 Java 类`NativeClazz`：*

```
package org.stackoverflow.jni;

import org.stackoverflow.data.BeanObject;

public class NativeClazz {

    // Static area for forced initialization
    static {

        // Load Native Library (C++); calls JNI_OnLoad()
        System.loadLibrary("Native_Library_File_Name");
    }       

    /**
     * A static native method you plan to call.
     */
    public static native void staticNativeMethod(BeanObject bean);

    /**
     * A non-static native method you plan to call, to show this also works with 
     * Java class instances.
     */
    public native void instanceNativeMethod(BeanObject bean);
} 
```

*这是使用on`org_stackoverflow_jni_NativeClazz.h`生成的 C++ 头文件“ ” ：`javah``NativeClazz`*

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class org_stackoverflow_jni_NativeClazz */

#ifndef _Included_org_stackoverflow_jni_NativeClazz
#define _Included_org_stackoverflow_jni_NativeClazz
#ifdef __cplusplus
extern "C" {
#endif

/*
 * Class:     org_stackoverflow_jni_NativeClazz_staticNativeMethod
 * Method:    staticNativeMethod
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_staticNativeMethod
  (JNIEnv *, jclass, jobject);

/*
 * Class:     org_stackoverflow_jni_NativeClazz_instanceNativeMethod
 * Method:    instanceNativeMethod
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_instanceNativeMethod
  (JNIEnv *, jobject, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

*这是实现头文件的 C++ .cpp 文件：*

```
#include "org_stackoverflow_jni_NativeClazz.h"

using namespace std;

/**************************************************************
 * Static Global Variables to cache Java Class and Method IDs
 **************************************************************/
static jclass JC_BeanObject;              // declare for each class
static jmethodID JMID_BeanObject_getFoo;  // declare for each class method

/**************************************************************
 * Declare JNI_VERSION for use in JNI_Onload/JNI_OnUnLoad
 * Change value if a Java upgrade requires it (prior: JNI_VERSION_1_6)
 **************************************************************/
static jint JNI_VERSION = JNI_VERSION_1_8;

/**************************************************************
 * Initialize the static Class and Method Id variables
 **************************************************************/
jint JNI_OnLoad(JavaVM* vm, void* reserved) {

    // Obtain the JNIEnv from the VM and confirm JNI_VERSION
    JNIEnv* env;
    if (vm->GetEnv(reinterpret_cast<void**>(&env), JNI_VERSION) != JNI_OK) {

        return JNI_ERR;
    }

    // Temporary local reference holder
    jclass tempLocalClassRef;

    // STEP 1/3 : Load the class id
    tempLocalClassRef = env->FindClass("org/stackoverflow/data/BeanObject");

    // STEP 2/3 : Assign the ClassId as a Global Reference
    JC_BeanObject = (jclass) env->NewGlobalRef(tempLocalClassRef);

    // STEP 3/3 : Delete the no longer needed local reference
    env->DeleteLocalRef(tempLocalClassRef);

    // Load the method id
    JMID_BeanObject_getFoo = env->GetMethodID(JC_BeanObject, "getFoo", "(Ljava/lang/String;)V");

    // ... repeat prior line for any other methods of BeanObject

    // ... repeat STEPS 1-3 for any other classes; re-use tempLocalClassRef.

    // Return the JNI Version as required by method
    return JNI_VERSION;
}

/**************************************************************
 * Destroy the global static Class Id variables
 **************************************************************/
void JNI_OnUnload(JavaVM *vm, void *reserved) {

    // Obtain the JNIEnv from the VM
    // NOTE: some re-do the JNI Version check here, but I find that redundant
    JNIEnv* env;
    vm->GetEnv(reinterpret_cast<void**>(&env), JNI_VERSION);

    // Destroy the global references
    env->DeleteGlobalRef(JC_BeanObject);

    // ... repeat for any other global references
}

/**************************************************************
 * A Static Native Method
 **************************************************************/
JNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_staticNativeMethod
               (JNIEnv * env, jclass clazz, jobject jBeanObject) {

    // Retrieve jstring from the Java Object
    jstring jFoo = (jstring)env->CallObjectMethod(jBeanObject, JMID_BeanObject_getFoo);

    // Make accessible to C++
    const char * cFoo = env->GetStringUTFChars(jFoo, NULL);             

    // Do something with cFoo...

    // Release Resources
    env->ReleaseStringUTFChars(jFoo, cFoo);
    env->DeleteLocalRef(jFoo);
}

/**************************************************************
 * Instance / Non-Static Native Method
 **************************************************************/
JNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_instanceNativeMethod
               (JNIEnv * env, jobject selfReference, jobject jBeanObject) {

    // Retrieve jstring from the Java Object
    jstring jFoo = (jstring)env->CallObjectMethod(jBeanObject, JMID_BeanObject_getFoo);               

    // Make accessible to C++
    const char * cFoo = env->GetStringUTFChars(jFoo, NULL);             

    // Do something with cFoo...

    // Release Resources
    env->ReleaseStringUTFChars(jFoo, cFoo);
    env->DeleteLocalRef(jFoo);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-15T13:16:18.593

以下是我如何实践 IBM 的建议。考虑这样的演示java类：

```
public class SimpleClazz {

    public int value = 10;

    public native int getValue();

    static {
        // Load Native Library
        System.loadLibrary("The native library name");
    }
} 
```

对应的jni头文件是这样的：

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class SimpleClazz */

#ifndef _Included_SimpleClazz
#define _Included_SimpleClazz
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     SimpleClazz
 * Method:    getValue
 * Signature: ()I
 */
JNIEXPORT jint JNICALL Java_SimpleClazz_getValue
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

根据 IBM 的建议，我们需要缓存使用的类`SimpleClazz`和对象成员的字段 id `value`。

学习了这篇好[文章](http://normanmaurer.me/blog/2014/01/07/JNI-Performance-Welcome-to-the-dark-side/)`SimpleClazz`后，我在函数中缓存了`JNI_OnLoad`，加载原生库时调用（例如通过System.loadLibrary）。在 中`JNI_Onload`，我们确实找到了 class 并将这个 jclass 存储为全局字段。

此外，在 的原生实现中`getValue`，我们使用静态局部变量来缓存 的字段 id `value`。这种设计是为了确保这个归档的 id 可以在更好的范围内，而不是在全局范围内。这种设计的缺点是每次调用这个函数都需要和NULL进行比较。[我从The Java Native Interface: Programmer's Guide and Specification](http://barbie.uta.edu/~jli/Resources/Resource%20Provisoning&Performance%20Evaluation/85.pdf)一书的第 4.4.1 节学到了这种设计。

最后，我们还需要编写函数`JNI_OnUnload`，当包含本机库的类加载器被垃圾回收时调用。在这个函数中，我们释放了 jclass 的全局引用。

我的 cpp 实现如下所示：

```
#include <jni.h>
#include <SimpleClazz.h>

static jclass simpleCls;

// According to http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html#JNI_OnLoad
// The VM calls JNI_OnLoad when the native library is loaded (for example, through System.loadLibrary).
jint JNI_OnLoad(JavaVM* vm, void* reserved) {
    JNIEnv* env;
    if ((*vm)->GetEnv(vm, (void **) &env, JNI_VERSION_1_6) != JNI_OK) {
        return JNI_ERR;
    } else {
        jclass localSimpleCls = (*env)->FindClass("SimpleClazz");

        if (localSimpleCls == NULL) {
            return JNI_ERR;
        }
        simpleCls = (jclass) (*env)->NewGlobalRef(env, localSimpleCls);
    } 
    return JNI_VERSION_1_6;
}

JNIEXPORT jint JNICALL Java_SimpleClazz_getValue(JNIEnv * env, jobject thiz){
    static jfieldID valueID = NULL;
    if (valueID == NULL) {
        valueID = (*env)->GetFieldID(env, simpleCls, "value", "I");
        if (valueID == NULL){
            return JNI_ERR;         // Exception thrown
        }
    }
    jint value = (*env)->GetIntField(env, thiz, valueID);
    return value;
}

// According to http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html#JNI_OnUnload
// The VM calls JNI_OnUnload when the class loader containing the native library is garbage collected.
void JNI_OnUnload(JavaVM *vm, void *reserved) {
    JNIEnv* env;
    if ((*vm)->GetEnv(vm, (void **) &env, JNI_VERSION_1_6) != JNI_OK) {
        // Something is wrong but nothing we can do about this :(
        return;
    } else {
        if (0 != NULL){
            (*env)->DeleteGlobalRef(env, simpleCls);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T12:11:54.353

你可以有一些这样的实用程序结构：

```
typedef struct MYVARIANT_FID_CACHE {
    int cached;
    jclass clazz;
    jfieldID pAddress;
} MYVARIANT_FID_CACHE;

MYVARIANT_FID_CACHE VARIANTFc;

void cacheMYVARIANTFields(JNIEnv *env, jobject lpObject)
{
    if (VARIANTFc.cached) return;
    VARIANTFc.clazz = env->GetObjectClass(lpObject);
    VARIANTFc.pAddress = env->GetFieldID(VARIANTFc.clazz, "pAddress", "I");
    VARIANTFc.cached = 1;
}

VARIANT *getMYVARIANTFields(JNIEnv *env, jobject lpObject, VARIANT *lpStruct)
{
    if (!VARIANTFc.cached) cacheVARIANT2Fields(env, lpObject);

    lpStruct = (VARIANT*)(env->GetIntField(lpObject, VARIANTFc.pAddress));

    return lpStruct;
} 
```

这取自我的问题：[https ://stackoverflow.com/questions/10617714/how-to-extend-swt-com-support](https://stackoverflow.com/questions/10617714/how-to-extend-swt-com-support)

对于一些好的示例，请查看`os_structs.c`它与 eclipse SWT 实现捆绑在一起。

**注意：**上面的代码只是一个例子，可以适应不同的操作系统。它也只是显示“如何访问 java 字段”；对于方法，您可以遵循相同的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-11T14:35:30.077

参考@JoshDM给出的答案

用于此的 C 接口与上面给出的 C++ 接口略有不同。你必须这样写：-

```
/**************************************************************
 * Initialize the static Class and Method Id variables
 **************************************************************/
jint JNI_OnLoad(JavaVM* vm, void* reserved) {

    // Obtain the JNIEnv from the VM and confirm JNI_VERSION
    JNIEnv* env;
    if (*(vm)->GetEnv(vm, (void**)&env, JNI_VERSION) != JNI_OK) {

        return JNI_ERR;
    }

    // Temporary local reference holder
    jclass tempLocalClassRef;

    // STEP 1/3 : Load the class id
    tempLocalClassRef = (*env)->FindClass(env, "org/stackoverflow/data/BeanObject");

    // STEP 2/3 : Assign the ClassId as a Global Reference
    JC_BeanObject = (jclass) (*env)->NewGlobalRef(env, tempLocalClassRef);

    // STEP 3/3 : Delete the no longer needed local reference
    (*env)->DeleteLocalRef(env, tempLocalClassRef);

    // Load the method id
    JMID_BeanObject_getFoo = (*env)->GetMethodID(env, JC_BeanObject, "getFoo", "(Ljava/lang/String;)V");

    // ... repeat prior line for any other methods of BeanObject

    // ... repeat STEPS 1-3 for any other classes; re-use tempLocalClassRef.

    // Return the JNI Version as required by method
    return JNI_VERSION;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T08:09:00.900

对于简单的情况，我在 C 代码中使用静态字段，使用从我的 java 类调用的 initId 方法进行初始化：

```
package demo;
public class WithNatives {

 static {
   initIDs();
 }

 private static native void initIDs();

} 
```

在 C 中：

```
static jmethodID methodId;

void JNICALL Java_demo_WithNatives_initIDs(JNIEnv *env, jclass clazz)
{
   // initialize methodId
} 
```

# python - Python：为什么将 int 与字符串进行相等比较不会引发错误？

> ID：10617737
> 
> 赞同：11
> 
> 时间：2012-05-16T11:39:53.180
> 
> 标签：python, types

在 Python 3 中，尝试对字符串和 int 进行排序（例如`1 > "1"`）会引发 TypeError。为什么比较字符串与 int 是否相等不会引发错误？（例如`1=="1"`）将字符串与 int 进行比较有意义的示例是什么？为什么 JavaScript 和 SQL 采用不同的方法？

相关： [Python 如何比较字符串和整数？](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T11:42:28.420

例如，这允许您拥有一个包含混合类型键的字典。

如果你不能比较`1`和`"1"`求相等，你就不能将它们用作同一个字典的键。

就目前而言，您可以比较它们，并且它们总是[比较不相等](http://docs.python.org/reference/expressions.html#not-in)：

> 对象不必具有相同的类型。如果两者都是数字，则将它们转换为通用类型。否则，不同类型的对象总是比较不相等，并且顺序一致但任意。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T11:55:54.763

对不可比较的对象进行排序的原因`TypeError`是表示*没有合理的答案*，而不是预测它是否有用。根据这个逻辑，允许相等性测试是明智的，因为有*一个*答案是“两个不可比较的对象是否相等？” （他们不是）。参见例如[http://www.gossamer-threads.com/lists/python/dev/919516](http://www.gossamer-threads.com/lists/python/dev/919516)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-02T06:43:25.957

### 语言打字的优缺点

语言的输入可以强也可以弱（松散）。较强的打字语言具有较少的不同类型可以在同一操作中操作。语言输入的弱点和强度没有确切的阈值——某些语言的输入可能比其他语言强，而比另一种语言弱。**Python 类型比 JS 强得多**。

`==`实现为更多的弱类型操作。它可以比较不同的类型，但您需要具有相同类型的两个值才有机会获得`True`. `a == b #true`表示`a`和`b`是相同类型的对象并且具有相同的值。`>` `<`在***Python 3***中实现为强类型操作，不能在不同类型上执行。

# jquery - jQuery选择跨度类不起作用

> ID：10617738
> 
> 赞同：0
> 
> 时间：2012-05-16T11:39:57.980
> 
> 标签：jquery, jquery-plugins, jquery-textext

我试图通过使用 (.class) 选择器来选择跨度，但由于某种原因，这不起作用。

```
<div class="text-wrap">
<div class="text-list">
  <div class="text-suggestion">
     <span class="text-label">Lorem</span>
  </div>
</div>
</div>

 jQuery(document).ready(function() {

        jQuery('.text-label').click(function(e){
            alert('lol');
        });
}); 
```

我只能选择 .text-wrapper 其他人不起作用..这是 jQuery 程序错误吗？我还不得不说我正在使用 jQuery texttext 插件。

更新：

我忘记了第一篇文章中的引号，但这不是问题。该代码也在脚本标记中，否则将无法选择文本换行 div。

我仍然有无法触发文本建议 div 中的所有内容的问题。

我正在使用来自[Textext的 texttext 插件](http://textextjs.com/manual/examples/ajax-with-autocomplete.html)

评论后的另一个更新：

```
jQuery("#customfield_10000").keyup(function(e){
                            teller = teller + 1;
                            if(teller % 2 == 0){
                            if(e.keyCode == 13)
                            {
                                jQuery("#customfield_10001").focus();
                            }    

            crmAccount = jQuery(this).val();
            lijstAccounts.length = 0;

                    jQuery.ajax({
                        url: "http://"+serverIp+"/getAllAccountNamesJsonP?jsonp_callback=?",
                        dataType: 'jsonp',
                        jsonp: "jsonp_callback",
                        data: {
                            featureClass: "P",
                            style: "full",
                            maxRows: 12,
                            name_startsWith: jQuery(this).val(),
                                                            crm_acc: crmAccount,
                            },
                            success: function( data ) {
                                lijstAccounts.length = 0;
                                 jQuery.map( data, function( item ) {
                                                            lijstAccounts.push(item);
                                                            jQuery('#customfield_10000').trigger(
                                                                'setSuggestions',
                                                            { result : textext.itemManager().filter(lijstAccounts, query) }
                                                            );              
                                    return {
                                        label: item.label,
                                        value: item.value    
                                    }
                                });
                            }
                        }); 
                            }
        });

jQuery('#customfield_10000').textext({
                plugins : 'autocomplete'
                }).bind('getSuggestions', function(e, data)
                    {

                        textext = jQuery(e.target).textext()[0],
                        query = (data ? data.query : '') || '';

                    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:43:41.230

您的查询需要在`<script>`标签内。还可以根据需要添加引号。

```
<div class="text-wrap">
<div class="text-list">
  <div class="text-suggestion">
     <span class="text-label">Lorem</span>
  </div>
</div>
</div>
<script type="text/javascript">
 jQuery(document).ready(function() {
    $('.text-label').click(function(e)){
        alert('lol');
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:42:03.260

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<div class="text-wrap">
<div class="text-list">
  <div class="text-suggestion">
     <span class="text-label">Lorem</span>
  </div>
</div>
</div>
<script>
 jQuery(document).ready(function() {

        jQuery('.text-label').click(function(e){
            alert('lol');
        });
});
</script> 
```

我想你忘了包含 jquery 脚本试试这个..复制整个脚本并将其保存在 .html 文件中然后尝试一次

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T11:46:02.117

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<div class="text-wrap">
<div class="text-list">
  <div class="text-suggestion">
     <span class="text-label">Lorem</span>
  </div>
</div>
</div>
<script>
 jQuery(document).ready(function() {

        jQuery('.text-label').click(function(e){
            alert('lol');
        });
});
</script> 
```

和我一起工作得很好。您是否错过了 jquery 库或标签

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T11:49:36.777

我看不出您的代码有任何问题.. 在[这里](http://jsfiddle.net/rutwik/buCpr/)检查 jsfiddle ，它只是您的代码的复制粘贴。我认为您的页面中没有包含任何 jquery 脚本。尝试包括一个，这应该可以解决您的问题

在 jsfiddle 中，我包含了 Jquery 1.7.2。

# spell-checking - 是否可以让 Hunspell 打印拼错单词的行号？

> ID：10617743
> 
> 赞同：6
> 
> 时间：2012-05-16T11:40:15.750
> 
> 标签：spell-checking, line-numbers, hunspell

我正在尝试使用[Hunspell](http://hunspell.github.io)来纠正我写的一篇文章。不幸的是，它对我来说没用，只要它不打印拼写错误单词的行号。

所以现在我正在使用该`-a` 选项，以便能够将其通过管道传输到`hunspell`命令中。手册页说，该`-L` 选项将“打印拼写错误的行”。但我看不出输出有什么不同。

这就是我现在所做的：

```
$ cat myessay.txt | hunspell -d en_US,de_DE -a -L 
```

示例输出如下所示：

```
& JavaServer 3 412: Java Server, Java-Server, Javasee 
```

“JavaServer”这个词在第 78 行，正如手册页所解释的，它在该行有 412 个字符的偏移量。

有什么我想念的吗？这个问题是否有一个简单的解决方案，或者我真的必须将每一行输入 Hunspell 以找出它所在的行号？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T23:52:11.630

现在，我实际上下载了 Hunspell 的源代码并开始做生意。有一个未记录的`-u` 选项可以为我提供可以轻松使用的输出：

```
$ hunspell -u -d en_US,de_DE myessay.txt 
```

这是使用德语和美国词典打印行号的诀窍。或者，您也可以使用该`-U` 选项来获取文本的摘录。其他未记录的命令行选项是`-u2`和`-u3`。

但要小心：这些开关是实验性的，源代码显示这些功能缺乏 Unicode 支持。

来自[匈牙利文档](https://github.com/hunspell/hunspell/blob/master/man/hu/hunspell.1)：

*   `-u`：显示文件中的典型错误并带有替换建议。
*   `-u2`: 可以使用 sed 执行的典型错误及其修复。
*   `-U`：如果您想接受所有通过该`-u` 选项收到的建议，`-U` 交换机将自动替换 Hunspell 并将修改后的文件发送到标准输出。示例补丁：`hunspell -U original_file >patch_file`. 错误输出也再次显示补丁，类似于`-u` 开关。

一些输出示例：

*   `-u`：`Line 2: liveration -> liberation`
*   `-u2`：`2s/liveration/liberation/g; # liveration`
*   `-u3`：`(null):2: Locate: liveration | Try: liberation`

# pascal - Lazarus/LCL 仅在画布的一个小角落绘制

> ID：10617745
> 
> 赞同：1
> 
> 时间：2012-05-16T11:40:24.530
> 
> 标签：pascal, lazarus

在一个朋友用 Pascal 编写的程序（一个基本的保龄球游戏）中，游戏元素（球、背景等）被绘制在 TShape 的画布中（`Shape1.Canvas`）

问题是在该 Canvas 上绘制的元素被裁剪为该 TShape 左上角画布上的一个小矩形。看这个截图：![故障截图](../Images/1cc5480e2f6fd76fcb239465f8edb062.png)

请注意，我已经看到另一个同样使用 Lazarus/LCL（lazarus 的主要图形/ui 库）的 Pascal 程序存在此类问题，并且该保龄球程序在 Windows 中运行时没有任何错误，我猜该错误仅在 Linux 中出现。 .

另请注意，当从计时器以外的过程（例如在 OnFormCreate 或其他程序中）在此画布上绘图时，将绘制整个画布。

以下是执行的绘图操作（在计时器的过程中）：

```
procedure TForm2.Timer1Timer(Sender: TObject);
var
  i: integer;
  affich:word;
begin
  Shape1.Canvas.Clear;
  Lapiste.display(shape1.Canvas);
  Laboule.move(Coupcourant, Lapiste);
  Laboule.display(Shape1.Canvas);
  //LeTabQuilles.collision(CoupCourant);
  for i := 1 to 10 do
    begin
      LeTabQuilles.tab[i].check(LaBoule, CoupCourant);
      (LeTabQuilles.tab[i] as CQuille).display(shape1.Canvas);
    end; 

// ... (rest of the procedure) 
```

绘图操作（.display）基本上在画布中绘制位图作为属性给出......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:00:08.537

似乎并非所有的画布生来都是平等的:)。

`TShape`只需将 替换为即可解决问题`TImage`。请注意，这个问题确实很常见（至少在我的学校，并且仅在 Linux 中），并且如果您直接在表单的画布上绘制也会发生（顺便说一句，这有点愚蠢）。

# c++ - 具有未在堆上分配的对象的自动指针

> ID：10617749
> 
> 赞同：3
> 
> 时间：2012-05-16T11:40:34.960
> 
> 标签：c++

自动指针一旦超出范围，就会在内部调用它指向的对象的删除。如果我们分配一个在堆上创建的对象，这可以正常工作。但是，如果我尝试分配一个不是在堆上创建的对象，它会崩溃，因为 delete 被调用了两次。首先是 auto_ptr 本身，其次是当对象超出范围时，它的析构函数被再次调用。如下所示，

```
#include <iostream>
#include <memory>

using namespace std;

class sample
{
      public:
             sample() { puts("sample"); }
             ~sample() { puts("~sample"); }
};

int main()
{
    sample sObj;
    auto_ptr<sample> samplePtr(&sObj);
} 
```

这是否意味着我们可以使用 auto_ptr 仅保存在堆上创建的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:43:28.140

是的，确切地说，您只能`auto_ptr`用于堆分配的对象。技术原因是`auto_ptr`析构函数调用`delete`和调用`delete`未在堆上分配的对象是*未定义的行为*，这可能会使堆崩溃，多次运行析构函数，以及其他任何你不应该指望和不应该推测的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:42:54.830

简短的回答 - 是的。

这意味着您将管理内存的责任传递给`auto_ptr`. 但是，如果您在自动存储中创建对象，则该责任在于运行时，因此您不能放弃。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T11:43:16.067

自动存储持续时间的对象（您所谓的“在堆栈上”）会自动清理。`auto_ptr`存在以便于清理分配的对象`new`（它调用`delete`指针）。与自动存储持续时间的对象一起使用是没有意义`auto_ptr`的，因为它们没有分配给`new`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T11:52:28.280

如果您使用 std::auto_ptr 您只能保存在堆上创建的对象。

但是，如果您使用例如 boost::shared_ptr 您可以指定一个删除器，当对象离开范围时将调用该删除器。因此，如果您引用堆栈上的对象，您可以使用实际上什么都不做的自定义删除器。有关详细信息，
请参见[boost::shared_ptr](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/shared_ptr.htm)

std::auto_ptr 自 C++11 起已弃用
请参阅[C++11 std::auto_ptr deprecated](http://en.wikipedia.org/wiki/C++11#General-purpose_smart_pointers)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T11:43:33.443

这是否意味着我们可以使用`auto_ptr`仅保存在堆上创建的对象？
是的。
自动对象会自动销毁，因此它们不需要像智能指针这样的包装器。

请注意，您可以使用，`shared_ptr`或者`unique_ptr`它可以让您方便地调用您的自定义删除函数。您可以使用自定义内存分配器而不是`new`使用此自定义删除器功能。

`auto_ptr`已弃用，C++ 标准建议`unique_ptr`它是更好的选择。

# jquery - 使用按钮获取选项卡的 id

> ID：10617750
> 
> 赞同：0
> 
> 时间：2012-05-16T11:40:36.093
> 
> 标签：jquery, jquery-ui, jquery-selectors, jquery-ui-tabs

我有以下代码获取当前选择的 jquery-ui-tab 的 id：

```
$($('[id^="tab"], [id^="home"]')).live('click', function() {
    alert($(this).attr("id"));
}); 
```

如您所见，我有 2 组选项卡，tab(n) 和 home(n)。

这很好用，除了我需要能够在任何时间点获取 id，而不是在选择选项卡时，上面的代码只在选择选项卡时获取 id。

如何使用单击的标准按钮获取 jquery-ui-tabs home(n) 和 tab(n) 的 id，即

```
$("#button_one").click(function(event) { 
    // get id of selected tab
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:43:36.390

```
$('.ui-tabs-selected').prop('id'); 
```

jQuery 版本 < 1.6：

```
$('.ui-tabs-selected').attr('id'); 
```

请注意，我会将您的第一个功能更改为：

```
$($('[id^="tab"], [id^="home"]')).live('click', function() {
    alert(this.id);
}); 
```

`live`除非您的 jQuery 版本 < 1.4.4，否则不要使用

* * *

获取索引的方法：

> ...检索当前选定选项卡的索引

```
var $tabs = $('#example').tabs();
var selected = $tabs.tabs('option', 'selected'); 
```

# forms - jQuery mobile 不隐藏弹出 div

> ID：10617751
> 
> 赞同：0
> 
> 时间：2012-05-16T11:40:50.583
> 
> 标签：forms, html, jquery-ui, jquery-mobile

我对 jQuery 移动版有疑问：

我有一个登录按钮，单击时应该会弹出登录表单，但是当页面加载时，弹出 div 不会隐藏...

我尝试了大约一百种不同的方法让它隐藏（通过添加一些 jQuery 移动属性），但没有任何效果。

编码：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

<a href="#popupLogin" data-rel="popup" data-role="button" data-transition="pop" data-inline="true">Sign in</a>

<div data-role="popup" id="popupLogin" data-theme="a" data-overlay-theme="b" >
    <h3>Please sign in</h3>
    <label for="un">Username:</label>
    <input id="un" type="text" data-theme="a" placeholder="username" value="" name="user" />
    <label for="pw">Password:</label>
    <input id="pw" type="password" data-theme="a" placeholder="password" value="" name="pw">
    <div data-theme="b" aria-disabled="false">
</div> 
```

有人知道我在做什么错吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T08:04:33.313

JQM 1.1.0 版本破坏了有关弹出的功能。你可以试试 git 版本（不建议这样想）

[http://code.jquery.com/mobile/latest/jquery.mobile.min.js](http://code.jquery.com/mobile/latest/jquery.mobile.min.js) [http://code.jquery.com/mobile/latest/jquery.mobile.min.css](http://code.jquery.com/mobile/latest/jquery.mobile.min.css)

# c# - 提高读取事件日志的性能

> ID：10617754
> 
> 赞同：0
> 
> 时间：2012-05-16T11:41:04.583
> 
> 标签：c#, windows, performance, wmi, event-log

我正在查询不同域控制器的事件日志，我必须在一段时间后继续查询。

下面是我用来查询它的代码。

```
public static void FindAllLog(string machineName)
        {
            //EventLog log = new EventLog("", "");
            //log.
            EventLog[] remoteEventLogs;
            // Gets logs on the local computer, gives remote computer name to get the logs on the remote computer.
            remoteEventLogs = EventLog.GetEventLogs(machineName);
            Console.WriteLine("Number of logs on computer: " + remoteEventLogs.Length);

            for (int i = 0; i < remoteEventLogs.Length; i++)
            {
                Console.WriteLine("Log : " + remoteEventLogs[i].Log);
                ReadEventLog(machineName, remoteEventLogs[i].Log, DateTime.Now.AddDays(-30));
                //ReadAppEventLog(machineName, remoteEventLogs[i].Log);                
            }
        }

public static void ReadEventLog(string machine, string logType,DateTime fromDate)
        {
            EventLog ev = new EventLog(logType, machine);
            var entry = (from EventLogEntry e in ev.Entries
                         where e.TimeGenerated >= fromDate
                         orderby e.TimeGenerated
                         select e);//.LastOrDefault();
            foreach (EventLogEntry CurrentEntry in entry)
            {
                Console.WriteLine("Event ID : " + CurrentEntry.EventID);
                Console.WriteLine("Event Source : " + CurrentEntry.Source);
                Console.WriteLine("Event TimeGenerated : " + CurrentEntry.TimeGenerated);
                Console.WriteLine("Event TimeWritten : " + CurrentEntry.TimeWritten);
                Console.WriteLine("Event MachineName : " + CurrentEntry.MachineName);
                Console.WriteLine("Entry Type : " + CurrentEntry.EntryType.ToString());
                Console.WriteLine("Message :  " + CurrentEntry.Message + "\n");
                Console.WriteLine("-----------------------------------------");
            }
        } 
```

**当我第一次查询域控制器时，我必须阅读过去 30 天的日志。否则只需阅读我们上次离开时​​的最新日志。查询它要花很多时间吗？我尝试使用 WMI，同样的问题地狱很多时间，它有时会给出“无效的查询错误”？如何改善这一点？您建议执行此任务的任何模型，我在这里为每个域控制器执行多线程？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:14:02.843

要回答这个问题。我尝试了所有阅读事件日志的方式。

使用 .NET2.0 方法使用 EventLog 类，然后使用 .NET3.0 方法使用 EventLogQuery 和 EventLogReader 类进行读取，最后我尝试了 WMI 方法。

我必须每 5 分钟左右根据时间或时间片读取事件日志。

你们会惊讶地发现 WMI 将比其他 .NETx 方法更快地检索数据，我们将获得更多字段，并且没有操作系统依赖性或防火墙问题。

但其他两种方法都有缺点。

只是想分享这个。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T09:03:09.020

从 EventLog 读取时避免使用 LINQ。试试这个：

```
// Store indices of last accessed EventLogEntries in Dictionary {logType, lastIndex}
private static readonly Dictionary<string, int> _lastIndices = new Dictionary<string, int>();

public static void FindAllLog(string machineName)
{
    //EventLog log = new EventLog("", "");
    //log.
    EventLog[] remoteEventLogs;
    // Gets logs on the local computer, gives remote computer name to get the logs on the remote computer.
    remoteEventLogs = EventLog.GetEventLogs(machineName);
    Console.WriteLine("Number of logs on computer: " + remoteEventLogs.Length);

    for (int i = 0; i < remoteEventLogs.Length; i++)
    {
        Console.WriteLine("Log : " + remoteEventLogs[i].Log);
        ReadEventLog(machineName, remoteEventLogs[i].Log, DateTime.Now.AddDays(-30));
        //ReadAppEventLog(machineName, remoteEventLogs[i].Log);                
    }
}

public static void ReadEventLog(string machine, string logType, DateTime fromDate)
{
    int lastIndex;
    EventLog ev = new EventLog(logType, machine);
    IList<EventLogEntry> entries = new List<EventLogEntry>();

    if (_lastIndices.ContainsKey(logType))
        lastIndex = _lastIndices[logType];
    else {
        lastIndex = 0;
        _lastIndices.Add(logType, 0);
    }

    // Try to avoid LINQ because it uses Enumerator and Loops EVERYTIME trough all items.
    // Start Looping from top of the list and break if Entry has Index less than lastIndex or
    // if Entry has TimeWritten less than fromDate
    for (var i = ev.Entries.Count - 1; ev.Entries[i].Index > lastIndex && ev.Entries[i].TimeWritten > fromDate; i--)
        entries.Add(ev.Entries[i]);

    if (entries.Count > 0) // Set lastIndex for corresponding logType
        _lastIndices[logType] = entries.Max(e => e.Index);

    foreach (EventLogEntry CurrentEntry in entry.OrderBy(e => e.TimeWritten))
    {
        Console.WriteLine("Event ID : " + CurrentEntry.EventID);
        Console.WriteLine("Event Source : " + CurrentEntry.Source);
        Console.WriteLine("Event TimeGenerated : " + CurrentEntry.TimeGenerated);
        Console.WriteLine("Event TimeWritten : " + CurrentEntry.TimeWritten);
        Console.WriteLine("Event MachineName : " + CurrentEntry.MachineName);
        Console.WriteLine("Entry Type : " + CurrentEntry.EntryType.ToString());
        Console.WriteLine("Message :  " + CurrentEntry.Message + "\n");
        Console.WriteLine("-----------------------------------------");
    }
} 
```

我在这里使用了 TimeWritten 属性，因为它比 TimeGenerated 更可靠。TimeGenerated 可能是无序的，但 TimeWritten 和索引一样总是在上升。我希望这有帮助。

# javascript - javascript的if或return语句语法

> ID：10617764
> 
> 赞同：1
> 
> 时间：2012-05-16T11:41:29.063
> 
> 标签：javascript

是什么意思 ：

```
return i ? null : "red"; 
```

? 是什么意思 ”？” 和 ”：”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T11:41:58.970

这是一个三元运算。

它的语法是：

```
condition ? operation-if-true : operation-if-false 
```

例如

```
return myVariable >5 ? 'a' : 'b'; 
```

如果`myVariable`大于 5，则返回“a”，否则返回“b”。

# hdf5 - HDF5 查看器不显示根级别的所有组

> ID：10617773
> 
> 赞同：0
> 
> 时间：2012-05-16T11:42:07.697
> 
> 标签：hdf5

我们正在使用 3rd 方软件来生成 HDF5 文件。该文件在根级别有许多组，但 HDF5 查看器不会全部显示。它显示前 7600 多个组，但不显示最后一组。

这些组确实存在，因为我编写了一些非常简单的软件来读取文件并显示那里有哪些组。

就 HDF5 查看器可以从 HDF5 文件显示的内容而言，是否存在任何已知限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:11:26.450

设置限制是为了避免来自 JVM 的 OutOfMemoryError。您可以在 Tools->Max Members 重置限制。例如，将其设置为 20,000。默认值为 10,000。

# php - 将 CakePHP 常量包含到外部 Web 应用程序中

> ID：10617774
> 
> 赞同：0
> 
> 时间：2012-05-16T11:42:07.923
> 
> 标签：php, cakephp, constants, cakephp-2.1, external-application

我应该可以访问同一服务器上外部应用程序中的 CakePHP 常量。

包含 CakePHP 应用程序的各个部分以访问它们的最佳实践是什么？

已经尝试包含 bootstrap.php：

`Fatal error: Class 'Cache' not found in /Users/Patrick/Sites/project/Config/bootstrap.php on line 27`

bootstrap.php 中的第 27 行：

`Cache::config('default', array('engine' => 'File'));`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:22:35.093

最佳做法是为它制作一个插件。这造成了关注点的分离。仅仅将 Cake 中的部分包含到另一个软件中可能会造成混乱。想想当 CakePHP 框架升级到新版本时会发生什么。一段时间后，完全不清楚什么是集成的，什么不是集成的，而在另一种情况下，您只需检查您的插件即可查看集成。

# c - 如何计算C中的进程CPU使用率？

> ID：10617776
> 
> 赞同：1
> 
> 时间：2012-05-16T11:42:20.993
> 
> 标签：c, windows, process, cpu-usage

我正在编写一个流程资源管理器项目。
我可以使用 Win32 Tool Help Snapshot 获取有关进程的一些信息。
但我无法计算每个进程的 CPU 使用量。
这是一个 C 窗口控制台应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:16:43.410

也许 ISO C 标准化`clock()`功能可以满足您的需求。

> $人钟
> 
> NAME clock — 确定使用的处理器时间
> 
> LIBRARY 标准 C 库 (libc, -lc)
> 
> 概要 #include <time.h>
> 
> ```
>  clock_t
>  clock(void); 
> ```
> 
> 描述 clock() 函数确定自调用进程调用以来所使用的处理器时间量，以 CLOCKS_PER_SEC 秒为单位测量。
> 
> 返回值 clock() 函数返回使用的时间量，除非发生错误，在这种情况下，返回值为 -1。

您将在 main() 开始时调用它一次，保存结果，然后在计算 (clock() - result)/CLOCKS_PER_SEC 时调用它（注意整数除法的舍入！）。

# javascript - 用于分析用户行为的 webapp-tracking 工具

> ID：10617778
> 
> 赞同：0
> 
> 时间：2012-05-16T11:42:37.877
> 
> 标签：javascript, tracking

我正在寻找一个支持我在我的 web 应用程序上跟踪用户行为的库。

它是一个 Intranet-app，所以我不能使用像 Google-Analytics 这样的工具。此外，用户通过 iPad 和桌面浏览器访问该应用程序，因此 Flash-Counters 也不是选项。

目前我想我必须寻找一个 JavaScript/JQuery 解决方案。在此先感谢您的一些提示。

在服务器端，我使用的是 tomcat、java、java-server-faces。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:12:08.950

我建议你使用[Piwik](http://piwik.org/)。您可以将其安装在本地网络上，软件/硬件要求最低，它有很多功能，不如 Google Analitycs 多，但它是开源的，您可以安装在本地环境（如 Intranet）上。

我使用[Piwik](http://piwik.org/)已经好几年了，对我来说，效果很好！

# postgresql - 确定函数中实际查询的模式名称

> ID：10617785
> 
> 赞同：4
> 
> 时间：2012-05-16T11:43:09.980
> 
> 标签：postgresql

我想用它来构造unique_key。但我不想明确提供模式名称。有什么办法可以弄清楚吗？

```
CREATE OR REPLACE FUNCTION is_value_free(_header_id integer, _value varchar)
  RETURNS BOOLEAN AS
$$
BEGIN
   RETURN NOT EXISTS (
      SELECT header_id, value
      FROM myschema.mytable
      WHERE value LIKE _value AND header_id != _header_id
      LIMIT 1);
END;
$$ LANGUAGE plpgsql;

ALTER TABLE mytable
  ADD CONSTRAINT uniq_value CHECK (is_value_free(header_id,value)) 
```

如果我这样做，它必须工作：

```
set search_path = schema1;

CREATE FUNCTION AS ABOVE

set search_path = schema2;

INSERT INTO schema1.mytable(id, header_id, value)
VALUES (1,1,'a');  -- Should be ok

INSERT INTO schema1.mytable(id, header_id, value)
VALUES (1,2,'a');  -- Should violate error 
```

考虑具有相同表结构的多个模式。

Edt: 2012.05.16-1533 例如考虑这个表： Header_table: id serial Snapshot_table: id serial, header_id int (FK to header table), value varchar

```
id               id | header_id | value
 1                1 |         1 | a
 2                2 |         1 | a
 3                3 |         2 | b
                  4 |         3 | b 
```

等 header_id 为 3 的记录将违反 unique_key

这是指：[对一列的唯一约束，不包括在另一列中具有相同值的行](https://stackoverflow.com/questions/9310949/unique-constraint-on-one-column-with-excluding-row-with-same-values-in-other)

Edt：20120516-2356 添加一些测试脚本（对不起，我不知道如何加入文件）

```
drop schema if exists s1 cascade;
drop schema if exists s2 cascade;
drop schema if exists tp cascade; 

create schema s1;
create schema s2;
create schema tp; -- Temporary schema to hold insert function

-- SCHEMA 1 --

set search_path = s1;

-- * * * header table * * * 

CREATE TABLE th1 (
    id SERIAL NOT NULL,
    constraint th1_pk_id PRIMARY KEY (id)
)
WITH (
  OIDS=FALSE
);

-- * * * snapshot table * * *

CREATE TABLE ts1 (
    id SERIAL NOT NULL,
    header_id INTEGER NOT NULL,
    version INTEGER NOT NULL,
    value VARCHAR NOT NULL,
    CONSTRAINT ts1_pk_id PRIMARY KEY (id),
    CONSTRAINT ts1_header_id_fk FOREIGN KEY (header_id) REFERENCES th1(id) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE CASCADE
)
WITH (
  OIDS=FALSE
);

CREATE OR REPLACE FUNCTION is_value_free(_header_id integer, _value varchar)
  RETURNS BOOLEAN AS
$$
DECLARE
   b boolean;
BEGIN
   RAISE INFO ' ---- CHECK UNIQUE FUNCTION ----';
   RAISE INFO 'Search_path: %', current_schema();
   RAISE INFO 'Function caled schema: %', 's1';
   SELECT NOT EXISTS (
      SELECT 1
      FROM ts1
      WHERE value LIKE _value AND header_id != _header_id
      LIMIT 1) INTO b;
   RAISE INFO 'Result: %', b;
   RETURN b;
END;
$$ LANGUAGE plpgsql;

ALTER TABLE ts1
  ADD CONSTRAINT uniq_value CHECK (is_value_free(header_id,value));

CREATE OR REPLACE FUNCTION logSchema() RETURNS TRIGGER AS $$
BEGIN
    RAISE INFO 'Call on schema: %', 's1';
    RETURN new;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER logSchemaTrigger
BEFORE INSERT OR UPDATE ON ts1
FOR EACH ROW EXECUTE PROCEDURE logSchema();

-- SCHEMA2 --

set search_path = s2;

-- * * * header table * * * 

CREATE TABLE th1 (
    id SERIAL NOT NULL,
    constraint th1_pk_id PRIMARY KEY (id)
)
WITH (
  OIDS=FALSE
);

-- * * * snapshot table * * *

CREATE TABLE ts1 (
    id SERIAL NOT NULL,
    header_id INTEGER NOT NULL,
    version INTEGER NOT NULL,
    value VARCHAR NOT NULL,
    CONSTRAINT ts1_pk_id PRIMARY KEY (id),
    CONSTRAINT ts1_header_id_fk FOREIGN KEY (header_id) REFERENCES th1(id) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE CASCADE
)
WITH (
  OIDS=FALSE
);

CREATE OR REPLACE FUNCTION is_value_free(_header_id integer, _value varchar)
  RETURNS BOOLEAN AS
$$
DECLARE
   b boolean;
BEGIN
   RAISE INFO ' ---- CHECK UNIQUE FUNCTION ----';
   RAISE INFO 'Search_path: %', current_schema();
   RAISE INFO 'Function caled schema: %', 's2';
   SELECT NOT EXISTS (
      SELECT 1
      FROM ts1
      WHERE value LIKE _value AND header_id != _header_id
      LIMIT 1) INTO b;
   RAISE INFO 'Result: %', b;
   RETURN b;
END;
$$ LANGUAGE plpgsql;

ALTER TABLE ts1
  ADD CONSTRAINT uniq_value CHECK (is_value_free(header_id,value));

CREATE OR REPLACE FUNCTION logSchema() RETURNS TRIGGER AS $$
BEGIN
    RAISE INFO 'Actual schema: %', 's2';
    RETURN new;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER logSchemaTrigger
BEFORE INSERT OR UPDATE ON ts1
FOR EACH ROW EXECUTE PROCEDURE logSchema();

-- INSERT PREPARE DATA --

-- insert function to handle error
CREATE OR REPLACE FUNCTION tp.insert_data_test(_schemaname name, _header_id integer, _version integer, _value varchar)
  RETURNS VOID AS
$$
DECLARE
   schemaname name;
   b boolean;
BEGIN
   RAISE INFO '==== NEW INSERT COMMAND ====';
   SELECT _schemaname into schemaname;
   IF schemaname IS NULL THEN
       SELECT current_schema() INTO schemaname;
   end if;

   RAISE INFO 'Search_path: %', schemaname;
   RAISE INFO 'Inserting data: %, %, %', _header_id, _version, _value;

   BEGIN
      EXECUTE 'SELECT NOT EXISTS ( SELECT 1 FROM ' ||(select case when schemaname is null then 'null' else schemaname end)|| '.th1 WHERE id = ' || quote_literal(_header_id) || ' LIMIT 1)' INTO b;
      IF (SELECT b) THEN      
          EXECUTE 'INSERT INTO ' || (select case when schemaname is null then 'null' else schemaname end) || '.th1 VALUES(' || quote_literal(_header_id) ||')';
      END IF;

      EXECUTE 'INSERT INTO ' || (select case when schemaname is null then 'null' else schemaname end) || '.ts1(header_id, version, value) VALUES( ' || quote_literal(_header_id) || ',' || quote_literal(_version) ||','|| quote_literal(_value) ||')';
   EXCEPTION WHEN others THEN
      RAISE INFO 'Insert error: % %', SQLERRM, SQLSTATE;
      RETURN;
   END;

   RAISE INFO 'Insert succesfull';
END;
$$ LANGUAGE plpgsql;

-- Wiht no current schema --
set search_path = default;

SELECT tp.insert_data_test('s1',1,0,'a');
SELECT tp.insert_data_test('s2',1,0,'b');

/* IF you do this above with before set search_path its go fine, but if you do insert from newone query thats drop:
ERROR:  relation "ts1" does not exist
LINE 3:       FROM ts1
                   ^
QUERY:  SELECT NOT EXISTS (
      SELECT 1
      FROM ts1
      WHERE value LIKE _value AND header_id != _header_id
      LIMIT 1)
CONTEXT:  PL/pgSQL function "is_value_free" line 3 at RETURN

********** Chyba **********

ERROR: relation "ts1" does not exist
Stav SQL: 42P01
Kontext:PL/pgSQL function "is_value_free" line 3 at RETURN
*/

-- Insert data with corect schema --
set search_path = s1;
SELECT tp.insert_data_test(null,1,1,'a2');

set search_path = s2;
SELECT tp.insert_data_test(null,1,1,'b2');

-- Insert data with incorect schema --
set search_path = s2;
SELECT tp.insert_data_test('s1',1,2,'a3');

set search_path = s1;
SELECT tp.insert_data_test('s2',1,2,'b3');

-- TEST DATA (Should for all violate unique_key)--
-- Wiht no current schema --
set search_path = default;

SELECT tp.insert_data_test('s1',2,0,'a');
SELECT tp.insert_data_test('s2',2,0,'b');

-- Wiht corect current schema --
set search_path = s1;
SELECT tp.insert_data_test(null,3,0,'a');

set search_path = s2;
SELECT tp.insert_data_test(null,3,0,'b');

-- Wiht incorect current schema --
set search_path = s2;
SELECT tp.insert_data_test('s1',4,0,'a');

set search_path = s1;
SELECT tp.insert_data_test('s2',4,0,'b');

drop schema if exists s1 cascade;
drop schema if exists s2 cascade;
drop schema if exists tp cascade; 
```

EDT：2012.05.28:1937 我托盘它并在数据库中找到了这个（我以前没有看到）

```
CREATE OR REPLACE FUNCTION is_value_free(_header_id integer, _value varchar)
   RETURNS BOOLEAN AS
   $BODY$
   BEGIN
      RETURN SELECT  NOT EXISTS 
            (
            SELECT  NULL
            FROM    mytable
            WHERE   value LIKE $2
                    AND header_id != $1
            );
   END;
   $BODY$
   LANGUAGE plpgsql VOLATILE
   COST 100;

   ALTER FUNCTION schema1.is_value_free(integer, character varying) SET search_path=schema1, public; 
```

但是在创建数据库函数并使用 postgre 函数从数据库中获取定义时我需要使用相同的代码（如备份 ...）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:13:02.617

```
CREATE OR REPLACE FUNCTION is_value_free(_header_id integer, _value varchar)
  RETURNS BOOLEAN AS
$$
        SELECT  NOT EXISTS 
                (
                SELECT  NULL
                FROM    mytable
                WHERE   value LIKE $2
                        AND header_id != $1
                );
$$ LANGUAGE sql
SET search_path FROM CURRENT; 
```

因为不需要`EXISTS`半连接，并且这些项目是不相关的。`LIMIT 1``SELECT`

请注意，您的唯一函数不是可交换的，因此表内容将取决于插入记录的顺序。

**更新：**

```
DROP SCHEMA IF EXISTS s1 CASCADE;
DROP SCHEMA IF EXISTS s2 CASCADE;
CREATE SCHEMA s1;
CREATE SCHEMA s2;

SET search_path = s1;

DROP TABLE IF EXISTS mytable;

CREATE TABLE mytable (id bigserial primary key, header_id integer not null, value text);

CREATE OR REPLACE FUNCTION is_value_free(_header_id integer, _value varchar)
  RETURNS BOOLEAN AS
$$
        SELECT  NOT EXISTS 
                (
                SELECT  NULL
                FROM    mytable
                WHERE   value LIKE $2
                        AND header_id != $1
                );
$$ LANGUAGE sql
-- Below is the most important clause
SET search_path FROM CURRENT;

ALTER TABLE mytable
  ADD CONSTRAINT uniq_value CHECK (is_value_free(header_id,value));

SET search_path = s2;

DELETE
FROM    s1.mytable;

INSERT INTO s1.mytable(id, header_id, value)
VALUES (1,1,'a');  -- Should be ok

INSERT INTO s1.mytable(id, header_id, value)
VALUES (2,2,'a');  -- Should violate error 
```

# javascript - 满足条件时for循环不执行代码

> ID：10617787
> 
> 赞同：0
> 
> 时间：2012-05-16T11:43:12.893
> 
> 标签：javascript, jquery, arrays, object, for-loop

我之前曾问过一个关于如何以更短的方式编写代码块的问题，我得到了答案，并开始根据我的情况进行调整。但是我遇到了一个小问题，这是我正在运行的代码：

```
var default_cluster_options = {
    limits : [ { min: 1224, items: 8 }, { min: 954, items: 6 }, { min: 624, items: 4 }, { min: 0, items: 2 } ]
};

var default_plugin_options = {
    containerID : "",
    first       : false,
    previous    : false,
    next        : false,
    last        : false,
    startPage   : 1,
    perPage     : 1,
    midRange    : 6,
    startRange  : 1,
    endRange    : 1,
    keyBrowse   : false,
    scrollBrowse: false,
    pause       : 0,
    clickStop   : true,
    delay       : 50,
    direction   : "auto",
    animation   : "fadeIn",
    links       : "title",
    fallback    : 1000,
    minHeight   : true,
    callback    : function(pages, items) {}
};

var Cluster = function(cluster_options, plugin_options) {
    this.options = $.extend({}, default_cluster_options, cluster_options);
    this.plugin_options = $.extend({}, default_plugin_options, plugin_options);
    this.limits = this.options.limits;
    this.inititate_shop();
};

Cluster.prototype.initiate_plugin = function(plugin_navigation, plugin_options) {
    var options = $.extend({}, this.plugin_options, plugin_options);
    return $(plugin_navigation).jPages(options);
};

Cluster.prototype.inititate_shop = function() {
    for (var i = 0; this.viewport_width <= this.limits[i].min; i++) {
        log(this.limits[i].min);
        log(this.viewport_width);
        this.initiate_plugin('.shop-items-navigation', {
            containerID : "shop-items-wrapper",
            perPage     : this.limits[i].items,
            midRange    : 8,
            animation   : "fadeIn",
            links       : "blank",
            keyBrowse   : true,
            callback    : function(pages) {
                log(pages.current);
            }
        });
    }
};

var cluster = new Cluster(); 
```

那里的一些代码可能没有意义，因为还有其他代码块，但我认为这是与我的问题相关的所有代码，可能会导致问题。

我的问题是属性`for()`内的循环。`Cluster.prototype.inititate_shop`我在控制台中没有看到任何错误，但是当我尝试查看另一个循环是否对`this.limits`变量（这是一个由 4 个对象组成的数组）起作用时，它确实发生了。

所以这就是为什么我不明白为什么函数不起作用或`for()`循环会中断，我在这里问是否有人发现了我没有发现的东西（我有丢失东西的历史）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:03:46.333

从上面的评论 - 问题是您在限制列表中的最高最小值是 1224 但您的视口宽度是 1366 所以：

```
this.viewport_width <= this.limits[i].min; 
```

never 计算结果为 true，并且永远不会执行 for 循环中的代码。

**编辑 2**

如果你打破执行检查的语句怎么办：

```
Cluster.prototype.inititate_shop = function() {
for (var i = 0; i < this.limits.length; i++) {
    if (this.viewport_width >= this.limits[i].min){
        log(this.limits[i].min);
        log(this.viewport_width);
        this.initiate_plugin('.shop-items-navigation', {
            containerID : "shop-items-wrapper",
            perPage     : this.limits[i].items,
            midRange    : 8,
            animation   : "fadeIn",
            links       : "blank",
            keyBrowse   : true,
            callback    : function(pages) {
                log(pages.current);
            }
        });
        return false; // to break out of loop
        }
    }
}; 
```

# sql - phpMyAdmin：检查表中具有不同值的字段

> ID：10617795
> 
> 赞同：0
> 
> 时间：2012-05-16T11:43:36.223
> 
> 标签：sql, phpmyadmin

我有一个数据库，其中包含一个存储定价信息的表。我试图找到一种快速简便的方法来检查此表中每个实体的 4 个字段的值。如果 4 个值中的一个与其他值不同，我需要列出此实体，或者更好地用其他字段中的值替换不同的值。

例如：

```
entity_id   price   final_price     min_price   max_price
1           35.00   35.00           35.00           35.00 
```

=> 所有三个字段都具有相同的值，所以一切都很好

```
entity_id   price   final_price     min_price   max_price
2           40.00   35.00           35.00           35.00 
```

=> price 字段有不同的值，需要用 final_price、min_price 或 max_price 的值替换

这可以通过sql完成吗？谢谢！

# git - 使用单个 .gitignore 文件忽略所有文件夹中的某些文件

> ID：10617801
> 
> 赞同：8
> 
> 时间：2012-05-16T11:44:03.800
> 
> 标签：git, gitignore

在阅读了几个关于`.gitignore`我的问题后，我发现没有人可以回答我的问题：

我必须添加什么到 .gitignore 以忽略所有具有特定结尾的文件，比如 `*.txt`在所有文件夹中。

我宁愿`.gitignore`在顶层只有一个文件。

我尝试了几件事，但都没有奏效。

这是我测试的（`.gitignore`之前添加到存储库中，没有添加其他文件）：

```
 $ ls
  abc.txt  content

  $ ls content/
  abc.txt  def.other  def.txt

  $ echo "" > .gitignore

  $ git status --ignored --untracked-files=all
  # On branch master
  # Changes not staged for commit:
  #   (use "git add <file>..." to update what will be committed)
  #   (use "git checkout -- <file>..." to discard changes in working directory)
  #
  #       modified:   .gitignore
  #
  # Untracked files:
  #   (use "git add <file>..." to include in what will be committed)
  #
  #       abc.txt
  #       content/abc.txt
  #       content/def.other
  #       content/def.txt
  no changes added to commit (use "git add" and/or "git commit -a") 
```

正如预期的那样：所有文件都会显示，因为 .gitignore 是空的。

```
 $ echo "*.txt" > .gitignore

  $ git status --ignored --untracked-files=all
  # On branch master
  # Changes not staged for commit:
  #   (use "git add <file>..." to update what will be committed)
  #   (use "git checkout -- <file>..." to discard changes in working directory)
  #
  #       modified:   .gitignore
  #
  # Untracked files:
  #   (use "git add <file>..." to include in what will be committed)
  #
  #       content/def.other
  # Ignored files:
  #   (use "git add -f <file>..." to include in what will be committed)
  #
  #       abc.txt
  no changes added to commit (use "git add" and/or "git commit -a") 
```

为什么文件 content/abc.txt 和 content/def.txt 没有出现在列表中？

```
 $ git clean -n
  Would not remove content/ 
```

我以为他们也会出现在这里。

```
 $ echo "" > .gitignore

  $ git clean -n
  Would remove abc.txt
  Would not remove content/

  $ cd content

  $ git clean -n -x
  Would remove def.other

  $ git clean -n -x
  Would remove abc.txt
  Would remove def.other
  Would remove def.txt 
```

如果文件 content/abc.txt 和 content/def.txt 显示为 by`clean -n -x`但不是 by `clean -n`，我认为它们会被忽略。但是为什么他们不出现`git status --ignored --untracked-files=all`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:03:38.410

只是添加`*.txt`作品。检查[gitignore(5) 手册页](http://schacon.github.com/git/gitignore.html)以获取 gitignore 格式说明

如果您尝试添加`content`目录，所有`*.txt`文件都将被忽略。

```
$ echo "*.txt" > .gitignore 

$ git add content

$ git status --ignored --untracked-files=all
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage)
#
#       new file:   content/def.other
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       .gitignore
# Ignored files:
#   (use "git add -f <file>..." to include in what will be committed)
#
#       abc.txt
#       content/abc.txt
#       content/def.txt 
```

# java - 水平滚动和文本字段错误

> ID：10617804
> 
> 赞同：10
> 
> 时间：2012-05-16T11:44:35.300
> 
> 标签：java, blackberry, customization, textfield

我创建了一个 CustomTextField，当我输入的文本超出使用 Horizo​​nalFieldManager 的 TextField 的宽度时，它会向左滚动但现在的问题是，如果我用鼠标右键单击并滚动它，它会继续不足的长度但并没有停止到最后一个字我输入这里有什么问题？它是一个错误

我只需要在到达最后一个单词时禁用 Horizo​​ntalScrolling 它应该能够在 word 中最后一个单词的开头和结尾之间滚动

查看代码

```
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FocusChangeListener;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.XYEdges;
import net.rim.device.api.ui.XYRect;
import net.rim.device.api.ui.component.BasicEditField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.ui.decor.Border;
import net.rim.device.api.ui.decor.BorderFactory;

public class CustomTextField extends VerticalFieldManager {
    private int textWidth=0;
    private int textHeight=0;
    private BasicEditField basicEditField;
    private HorizontalFieldManager hfm;
    //Border border;

    public CustomTextField(int width,int height) {
        super();
        textWidth=width;
        textHeight=height;
        //border=BorderFactory.createSimpleBorder(new XYEdges(1, 1, 1, 1)); 

        hfm=new HorizontalFieldManager(Manager.HORIZONTAL_SCROLL){
            protected void sublayout(int maxWidth, int maxHeight) {
                super.sublayout(maxWidth, maxHeight);
                setExtent(textWidth, textHeight);
            }
        };  
        basicEditField=new BasicEditField("","",200,BasicEditField.NO_NEWLINE);
        //basicEditField.setBorder(border);

        hfm.add(basicEditField);
        add(hfm);
    }

    protected void sublayout(int maxWidth, int maxHeight) {
        super.sublayout(textWidth, textHeight);
        setExtent(textWidth, textHeight);

    }

    protected void paint(Graphics graphics) {
        super.paint(graphics);
        graphics.setColor(Color.BLACK);
        graphics.drawRect(0,0, textWidth, textHeight);
    }

} 
```

我已将其初始化为

```
 CustomTextField textField=new CustomTextField(200, 20);
            add(textField); 
```

我觉得 Horizo​​ntalFieldManager 需要 Scroll(is Scrolling Function) ......但还没有想出解决方案请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T09:42:37.947

因此，在 BlackBerry 字段中，**范围**是字段的实际*可视*大小。但是，**虚拟范围**是它可以使用的*逻辑*大小，其中一些可能不可见。对于`Managers`您想要滚动的内容，您通常会将虚拟范围设置为大于范围。

我使用这个概念来动态更改您的虚拟范围`HorizontalFieldManager`，基于当前需要多少空间才能勉强容纳`BasicEditField`. 为此，我必须让`HorizontalFieldManager`监听器`BasicEditField`通过实现`FieldChangeListener`. 然后，当每个字符输入到编辑字段中时，水平字段管理器将重新计算当前字段中的文本量需要多少宽度。然后它将虚拟宽度重新设置为该宽度。

这导致水平字段管理器只允许滚动到输入文本的末尾，而不是向右滚动，这就是代码最初的工作方式。

所以，我不认为黑莓做错了什么......操作系统中没有错误。以前，只是没有设置虚拟范围。

我将您的 Horizo​​ntalFieldManager 拆分为一个新的私有类，因为当逻辑超过大约 5 行代码时，我不喜欢使用匿名类。所以，下面的解决方案看起来有点不同。

**其他想法：**

1) 由于您尝试使用自定义`paint()`实现绘制边框，因此存在绘图伪影。但是，那个 bug 本来就在那里，我把这个问题解释为关于滚动问题。看起来您正在尝试使用`Border`对象，这可能是实现滚动字段边框的更好方法。

2）使用我的新解决方案，实际`CustomTextField`课程中没有太多内容。它只是`Manager`. `CustomHorizontalFieldManager`如果你愿意，你可能会摆脱那个外层。但是，我知道有时当您发布代码时，您会删除对您遇到的问题并不重要的细节。所以，也许需要一个`VerticalFieldManager`包含 a 的`HorizontalFieldManager`包含 a `BasicEditField`。我会把它留给你......不过，它只是可选的*cleanup*。

3) 我在 5.0 Storm2 模拟器上测试了这个。

```
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.component.BasicEditField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.util.Arrays;

public class CustomTextField extends VerticalFieldManager {

   private int textWidth = 0;
   private int textHeight = 0;
   private CustomHorizontalFieldManager hfm;

   public CustomTextField(int width, int height) {
      super();

      textWidth = width;
      textHeight = height;

      hfm = new CustomHorizontalFieldManager();
      add(hfm);
   }

   protected void sublayout(int maxWidth, int maxHeight) {
      super.sublayout(textWidth, textHeight);
      setExtent(textWidth, textHeight);
   }

   protected void paint(Graphics graphics) {
      // TODO: change me!
      super.paint(graphics);
      graphics.setColor(Color.BLACK);
      graphics.drawRect(0, 0, textWidth, textHeight);
   }

   private class CustomHorizontalFieldManager extends HorizontalFieldManager implements FieldChangeListener {

      private BasicEditField basicEditField;
      /** the maximum virtual width of the edit field, based on the max num of chars */
      private int maxVirtualWidth;

      public CustomHorizontalFieldManager() {
         super(Manager.HORIZONTAL_SCROLL);

         int maxNumChars = 200;
         basicEditField = new BasicEditField("", "", maxNumChars, BasicEditField.NO_NEWLINE);

         // determine how wide the field would need to be to hold 'maxNumChars', with the font
         //   in use ... just pick a long string of all W's, since that's usually the widest char
         char[] buffer = new char[maxNumChars];
         Arrays.fill(buffer, 'W');
         String spacer = new String(buffer);
         maxVirtualWidth = basicEditField.getFont().getAdvance(spacer);

         // we need to listen as the user types in this field, so we can dynamically alter its
         //   virtual width
         basicEditField.setChangeListener(this);

         add(basicEditField);
      }

      protected void sublayout(int maxWidth, int maxHeight) {
         super.sublayout(maxWidth, maxHeight);
         // extent is the visible size, virtual extent can be wider if we want scrolling
         setExtent(textWidth, textHeight);
         setVirtualExtent(maxVirtualWidth, textHeight);
      }

      public void fieldChanged(Field f, int context) {
         if (f == basicEditField) {
            // recalculate how much virtual width the edit field needs, based on the 
            //  current text content
            int newWidth = basicEditField.getFont().getAdvance(basicEditField.getText());
            setVirtualExtent(newWidth, textHeight);
         }
      }
   }

} 
```

# opengl - 如何在 opengl 和 cg 着色器中使用 3d 纹理？

> ID：10617810
> 
> 赞同：0
> 
> 时间：2012-05-16T11:45:01.957
> 
> 标签：opengl, graphics, cg

我遇到了 3d 纹理映射的问题。如果我有几个 2d 纹理，并且我想用这些 2d 纹理构建一个 3d 纹理。我能做些什么来把所有这些数据放在一起？函数 glTexImage3D 以参数 const GLvoid *texels 结束，该参数导致纹理数据。但现在我有 32 个 2D 纹理并且想要获得 3D 纹理。怎么做？

第二个问题是关于图像空间过滤方法。有没有人知道它是什么？我应该使用这种方法来确定纹理坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:09:52.763

你真的需要 3D 纹理吗？也许更好的方法是拥有纹理数组？

这是一个很好的信息：[http ://www.opengl.org/wiki/Array_Texture](http://www.opengl.org/wiki/Array_Texture)

我认为它比使用 3D 纹理要简单一些。它们在级联阴影映射中非常有用，其中每个级联都指向纹理数组中的不同元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:27:41.710

> 但现在我有 32 个 2D 纹理并且想要获得 3D 纹理。怎么做？

在您的程序中的某个时刻，您上传纹理。根据您的问题，我认为您已经使用 glTexImage2D 上传了它们。在纹理对象之间传输纹理数据是困难、繁琐且不太可靠的，因此询问如何将 2D 纹理组合成 3D 纹理有点离题。

但是你可以做得很好的是从一个接一个上传到 3D votexels 块的 2D 数据切片构建你的 3D 纹理。只需将每次调用 glTexImage2D 替换为调用[glTex **Sub** Image **3D**](http://www.opengl.org/sdk/docs/man4/xhtml/glTexSubImage3D.xml)即可。在上传任何数据之前，您可以使用调用[glTexImage3D](http://www.opengl.org/sdk/docs/man4/xhtml/glTexImage3D.xml)和 NULL 指针作为数据参数来初始化纹理（如果您使用的是 OpenGL-4，也可以使用[glTexStorage3D ）。](http://www.opengl.org/sdk/docs/man4/xhtml/glTexStorage3D.xml)

# c# - MVC3 部分模型验证

> ID：10617812
> 
> 赞同：0
> 
> 时间：2012-05-16T11:45:15.903
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有麻烦了，请你帮忙。

我有一个简单的课程

```
public class Test
{
    [Key]
    public string a { get; set; }

    [Required]
    public string c { get;set; }

    public string b { get; set; }
} 
```

我创建了一个简单的表单来提交新的实体实例，它可以工作。我在编辑时遇到了麻烦：编辑表单显示“a”和“b”属性。由于'c'只能在新实体中提交并且不能显示（不要问为什么），在我的更新方法上：

```
public ActionResult Edit(Test t)
{
    if (ModelState.IsValid)
    {
     //get the m instance
      UpdateModel(m,//other params);
      ValidateModel(m);
    }
    //saving code
} 
```

Obiously`ModelState.IsValid`总是错误的（因为需要'c'，但它是空的）并`UpdateModel`抛出异常（出于相同的原因）。我怎么能对 MVC3 说“不要验证这个字段，只在这个控制器方法中？” 显然我不会在模型类中编写未经验证的字段！我只需要更新'b'属性。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:50:02.317

最简单的方法是为这个局部视图创建另一个视图模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:53:26.877

为此视图创建另一个视图模型，并针对该视图模型而不是实体进行验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:42:55.170

当表单处于编辑模式时，使该字段成为隐藏属性，并具有您在控制器中评估的“默认”值。如果您根本不想在表单上显示属性并且仍然需要它，那么您不应该使用“ModeState.IsValid”并进行自己的验证。

隐藏属性的示例：

**控制器**

```
 public ActionResult Index() {
        return View();
    }

    public ActionResult Edit(string id) {
        return View((string.IsNullOrEmpty(id)) ? new Test { a = "new" } : FakeRepository.Data(id));
    }

    [HttpPost]
    public ActionResult Edit(Test model) {
        if (ModelState.IsValid) {
            if (model.a == "new") {
                //Create a new record
            } else {
                //Update Record
            }
            return RedirectToAction("Index");
        }
        return View(model);
    }

    public static class FakeRepository {
        public static Test Data(string a) {
            return new Test {
                a = a,
                b = "B",
                c = "C"
            };
        }
    } 
```

**实体**

```
public class Test {
    [Key]
    [Display(Name="A Property")]
    public string a { get; set; }

    [Required]
    [Display(Name = "C Property")]
    public string c { get; set; }

    [Display(Name = "B Property")]
    public string b { get; set; }
} 
```

**看法**

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Test</legend>

        @Html.HiddenFor(model => model.a)       

        @if (Model.a != "new") { 
            @Html.HiddenFor(model => model.c)
        } else { 
            <div class="editor-label">
                @Html.LabelFor(model => model.c)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.c)
                @Html.ValidationMessageFor(model => model.c)
            </div>
        }    

        <div class="editor-label">
            @Html.LabelFor(model => model.b)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.b)
            @Html.ValidationMessageFor(model => model.b)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

**现在**：

*.../编辑/某些东西*会隐藏“C”

*.../Edit/*将显示“C”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:56:19.410

```
 @{
   object htmlAttribute = null;
   if(Model.Id > 0)
   {
       htmlAttribute = new { disabled = "disabled" };
   }
 }

 @Html.TextBoxFor(model => model.C, htmlAttributes) 
```

禁用时，C 将不会被验证

# regex - 破译vim正则表达式

> ID：10617814
> 
> 赞同：3
> 
> 时间：2012-05-16T11:45:20.680
> 
> 标签：regex, vim

我正在玩 vim-ruby 缩进，那里有一些非常复杂的正则表达式：

```
" Regex used for words that, at the start of a line, add a level of indent.
let s:ruby_indent_keywords = '^\s*\zs\<\%(module\|class\|def\|if\|for' .   
      \ '\|while\|until\|else\|elsif\|case\|when\|unless\|begin\|ensure' . 
      \ '\|rescue\):\@!\>' .                                               
      \ '\|\%([=,*/%+-]\|<<\|>>\|:\s\)\s*\zs' .                            
      \    '\<\%(if\|for\|while\|until\|case\|unless\|begin\):\@!\>' 
```

在 vim 文档的帮助下，我将其解读为：

```
start-of-line <any number of spaces> <start matching> <beginning of a word> /atom
<one of provided keywords> <colon character> <nothing> <end of word> ... 
```

我有些疑惑：

1.  它真的匹配'：'吗？似乎不像那样工作，但我看不到冒号是正则表达式中的一些特殊字符。
2.  为什么有`\zs`（比赛开始）而没有`\ze`（比赛结束）？
3.  \%() 是做什么的？它只是某种形式的分组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:32:53.387

1.  `:\@!`说只有在*没有*冒号的情况下才匹配，如果我没看错的话。我不熟悉与之匹配的 ruby​​ 语法，因此这可能不太正确。有关环视的更多信息，请参阅`:help /\@!`和周边主题。

2.  你可以有 a `\zs`with no `\ze`，它只是意味着匹配的结尾是在正则表达式的结尾。反之亦然。

3.  `\%(\)`就像创建一个分组一样，`\(\)`只是该组不能用作反向引用（就像在`:substitute`命令中使用一样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:34:32.760

1.  您可以通过复制正则表达式并使用它对`/`您正在工作的代码执行搜索来检查匹配的“：”或任何其他字符串。使用`:set incsearch`可以帮助您在键入正则表达式时查看匹配的内容。

2.  和不影响匹配的内容`\zs`，`\ze`而是确定匹配文本的哪一部分在函数中用作`:s`/ `substitute()`。您可以通过使用`/`和`'incsearch'`选项集执行搜索来检查 - 您可以开始搜索文本中的字符串，该字符串将突出显示，然后添加`\zs`并`\ze`更改匹配文本的突出显示。没有必要“关闭” `\zs`and `\ze`，因为只能丢弃比赛的开始或结束。

3.  它是一种分组形式，不保存在临时变量中以便与`\1`、`\2`或一起使用`submatch()`，如下所述`:h \%()`：

    `\%(\) A pattern enclosed by escaped parentheses.` `Just like \(\), but without counting it as a sub-expression. This` `allows using more groups and it's a little bit faster.`

# ajax - 将 ajax 发布操作重定向到其他操作

> ID：10617817
> 
> 赞同：1
> 
> 时间：2012-05-16T11:45:36.233
> 
> 标签：ajax, asp.net-mvc, redirect

我正在使用 ajax 发布操作。在这个动作中，我用来`HttpContext.User.Identity.Name`获取用户 ID。根据用户 ID，我在数据库中获取与该用户 ID 相关的一些记录，并通过 json 类型返回该值。

有时会话已过期，在这种情况下，该`HttpContext.User.Identity.Name`值变为空。如果它为空或 null 它将抛出异常。

所以我需要空或空检查`HttpContext.User.Identity.Name`值，如果它是空或空我需要将它重定向到登录页面。

但是重定向操作在 ajax post 操作中不起作用。如何解决这个问题呢？

我需要授权 ajax 发布操作。任何人都可以为此提供解决方案吗？

问候，
卡蒂克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:55:48.757

> 但是重定向操作在 ajax post 操作中不起作用。如何解决这个问题呢？

你可以从用`[Authorize]`属性装饰你的控制器动作开始。这确保只有经过身份验证的用户才能访问它，并且保证 inside`User.Identity.Name`永远不会为空：

```
[Authorize]
public ActionResult SomeAction()
{
    string username = User.Identity.Name; // this will never throw
    ...
    return Json(...);
} 
```

然后看看 Phil Haack 的[以下博客文章](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)。在其帖子中，Phil 提供了一个不错的插件，允许您将 ASP.NET 配置为在对受保护操作发出 AJAX 请求时发送 401 HTTP 状态代码。因此，在您的 jQuery 代码中，您可以很容易地检测到这种情况并重定向：

```
$.ajax({
    url: '/SomeAction',
    type: 'POST',
    statusCode: {
        200: function (data) {
            alert('200: Authenticated');
            // Bind the JSON data to the UI
        },
        401: function (data) {
            // the user is not authenticated => redirect him to the login page
            window.location.href = '/login';
        }
    }
}); 
```

当然，为了避免在所有 AJAX 请求中写入此 401 条件，您可以非常轻松地使用全局[`.ajaxError()`](http://api.jquery.com/ajaxError/)处理程序来集中处理所有 AJAX 请求的重定向逻辑，以防服务器返回 401 状态代码：

```
$(document).ajaxError(function(e, jqxhr, settings, exception) {
    if (jqxhr.status == 401) { // unauthorized
        window.location.href = '/login';
    }
}); 
```

现在您的 AJAX 请求变得非常标准：

```
$.ajax({
    url: '/SomeAction',
    type: 'POST',
    success: function(data) {
        // do something with the data returned by the action
    }
}); 
```

# javascript - 通过 jQuery 选择第一个元素

> ID：10617820
> 
> 赞同：0
> 
> 时间：2012-05-16T11:45:39.850
> 
> 标签：javascript, jquery, html

这是我的 HTML DOM

```
<dd>
   <div class="Addable Files">
     <div style="margin:5px;">
       <select name="Kind" id="kind">
         <option value="1" >K1</option>
         <option value="2" >K2</option>
         <option value="3" >K3</option>
      </select>

     <div class="customfile">
       <span aria-hidden="true" class="customfile-button button">Browse</span>
       <input type="file" name="Files" class="fileupload customfile-input">
     </div>
    <select name="yap">
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
  </div>
</div>
<input type="button" value="new" style="margin-top:5px;" class="AddNewE button red" id="AddFiles">
</dd> 
```

我的脚本：

```
//Add new Addable div
$('.AddNewE').click(function () {

    var Target = $('.Addable.Files:first');
    var CloneTarget = $(Target).clone();
    CloneTarget.insertAfter('.Addable.Files:last');

    $(Target).find('select').each(function () {
        $(this).css('color', 'red');

    });
}); 
```

所以我希望当我单击添加按钮时，前两个选择（第一个 div 的两个选择）是红色，所有其他选择都没有改变，但我看到奇怪的行为，首先添加一切正常，但随后在每个添加所有选择除了第二个是红色的，我认为`Target`是第一个`div`，而且我选择了 Target 的`Select`元素，为什么所有`select`的都是红色的？我的问题在哪里？

**编辑**

对于错误的脚本，我很抱歉，但这是我的实际脚本：

```
//Add new Addable div
$('.AddNewE').click(function () {

    var Target = $('.Addable.Files:first');
    var CloneTarget = $(Target).clone();
    CloneTarget.insertAfter('.Addable.Files:last');
    $(CloneTarget).css('color', 'green');

    $(Target).find('select').each(function () {
        $(this).css('color', 'red');

    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:52:43.567

这可以通过稍微改变你的功能来实现。尝试：

```
$('.AddNewE').click(function () {

    var Target = $('.Addable.Files');
    var CloneTarget = $(Target).first().clone();
    CloneTarget.insertAfter('.Addable.Files:last');

    $('select').css('color', 'gray');
        $(Target).find('select').each(function () {
        $(this).css('color', 'red');
    });
});​ 
```

总结一下我更改的要点，我编辑了您的`Target`变量以针对*所有*`.Files`项目，然后将其更改为`CloneTarget`仅克隆第一个`.Files`目标。这样，当将它们全部更改为红色时，您实际上是在更改*所有*现有`.Files`项目，**除了**您要添加的新项目。

演示：http: [//jsfiddle.net/usZPN/](http://jsfiddle.net/usZPN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:55:26.897

您的选择是`.Addable.Files:first`选择第一个具有该名称的选择，您不想像这样选择下面的第一个 div `.Addable.Files > div:first-child`：？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T11:56:17.923

[http://jsfiddle.net/Y2XhV/](http://jsfiddle.net/Y2XhV/)中的 Worksforme ，虽然我不确定`<div>`您要克隆哪个：带边距的那个还是带 2 个类的那个？您的选择器适用于后一种情况。然而，您的代码有一些小的改进，使其更简单：

```
//Add new Addable div
$('.AddNewE').click(function () {

    var $Target = $('.Addable.Files:first');
    var $CloneTarget = $Target.clone();
    $CloneTarget.insertAfter('.Addable.Files:last');

    $Target.find('select').css('color', 'red');
}); 
```

`Target`当您已经拥有一个jQuery 对象时，您不需要重新创建新对象，并且`.css()`不需要`each`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T11:59:16.800

我想下面的小提琴可以解决你的目的。

[http://jsfiddle.net/meetravi/9ehAF/](http://jsfiddle.net/meetravi/9ehAF/)

我在您在以下行中编写的代码中发现了一个错误。

```
 $('.select').css('color', 'gray'); 
```

您的代码中没有选择类，而代码应该是

```
$('select').css('color', 'gray'); 
```

# asp.net - 如何找到在我的网站上注册的用户的位置和 IP 地址？

> ID：10617825
> 
> 赞同：0
> 
> 时间：2012-05-16T11:46:26.250
> 
> 标签：asp.net, ip-address

如何找到在我的网站上注册的用户的位置和 IP 地址？

我正在开发一个 asp.net 网站

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:49:32.720

该[`HttpRequest.UserHostAddress`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostaddress.aspx)属性包含远程客户端的 IP 地址。

**更新：**这是一个与[位置方面有关的问题](https://stackoverflow.com/questions/4095784/location-from-ip-address)。（谢谢你的链接，乔！）

# sql - 排除 AVG SQL 函数中的记录？（由于另一个计数，不能在主查询中使用 WHERE）

> ID：10617827
> 
> 赞同：1
> 
> 时间：2012-05-16T11:46:32.610
> 
> 标签：sql, db2, average

我工作正常的 SQL 查询是

```
select case month(timestamp_iso(STATUSDATE))
        when 1 then 'January'
        when 2 then 'February'
        when 3 then 'March'
        when 4 then 'April'
        when 5 then 'May'
        when 6 then 'Jun'
        when 7 then 'July'
        when 8 then 'August'
        when 9 then 'September' 
        when 10 then 'October'
        when 11 then 'November'
        when 12 then 'December'
    end as Month, 

    count (case when service='ADSL' then 1 end) as  ADSL,
  AVG (timestampdiff(
  4, 
  char(actualfinish - reportdate))/60.00) as efficiecny

from INCIDENT
where   year(STATUSDATE) = year(current_timestamp) 
group by month(timestamp_iso(STATUSDATE)) 
```

我想获得每个月的 ADSL 服务数量（它是通过第一个 COUNT 完成的）以及没有服务 ADSL 的记录的平均时间差（以小时为单位）。所以我必须在 AVG 函数中排除所有带有服务 ADSL 的记录，但我不能把它放在 where 子句中

```
 where   year(STATUSDATE) = year(current_timestamp) and service!='ADSL' 
```

因为我的 COUNT 函数需要有 service='ADSL'

如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:23:24.500

由于[Avg() 聚合函数会忽略空值](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0000758.htm)，因此如果服务为“ADSL”，您可以将表达式设置为空值。然后 Avg() 将忽略这些记录。

```
 AVG (case when service != 'ADSL'
             then timestampdiff(4, char(actualfinish - reportdate))/60.00) 
             else null
         end) as efficiency 
```

您可以尝试使用[coalesce](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2.doc.sqlref%2Ffcoal.htm)：

```
 COALESCE (AVG (case when service != 'ADSL'
             then timestampdiff(4, char(actualfinish - reportdate))/60.00) 
             else null
         end), 0) as efficiency 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:55:02.820

我确信您可以使用一些技巧在一个查询中完成所有这些操作，但这些实际上应该是两个单独的查询，一个计算 ADSL，一个计算非 ADSL 的平均值。如果你真的想在一次往返中完成，你可以做一对子查询，然后加入当月的子查询。整个事情将更具可读性、更快、更易于维护，以及更规范的 SQL。

此外，看起来 DB2 有一个内置函数来返回月份的名称，MONTHNAME：http: [//publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql .ref.doc/doc/r0000831.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000831.html)

* * *

好吧，既然你坚持......我对 db2 不是很熟悉，所以语法可能有点不对，但你应该能够做这样的事情：

```
SELECT avgt.month, countt.data, avgt.data FROM

(SELECT month(timestamp_iso(STATUSDATE)) AS month,count(*) AS data FROM INCIDENT WHERE year(statusdate) = year(current_timestamp) AND service='ADSL' GROUP BY month(timestamp_iso(STATUSDATE))) AS countt

INNER JOIN 

(SELECT month(timestamp_iso(STATUSDATE)) as month,avg(...) AS data FROM INCIDENT WHERE year(statusdate) = year(current_timestamp) AND service!='ADSL' GROUP BY month(timestamp_iso(STATUSDATE))) AS avgt

ON avgt.month=countt.month 
```

另一种方法可能是在 AVG 中有一个案例，如果 service='ADSL' 则给出 NULL。从 AVG 的文档中并不清楚它对 NULL 值的作用，但值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-19T18:58:21.373

在表格中计算`AVG`工资排除`min()`和工资。`max()`

```
select round(avg(table.salary),2) from table
where table.salary NOT IN ((select min(salary) from table), (select max(salary) from table)) 
```

# c - 'ctags' 命令没有为 C 头文件创建标签

> ID：10617828
> 
> 赞同：5
> 
> 时间：2012-05-16T11:46:36.250
> 
> 标签：c, vim, ctags

我正在尝试使用命令为 C 源代码（`*.c`和）手动创建标记文件。不幸的是，标记文件没有所有文件的条目，特别是头文件。`*.h``ctags`

我在命令提示符下使用以下命令：

```
find . -name \*.[ch] -exec ctags {} \; 
```

如果我错过了上面的一些标志或其他东西，请指出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:26:15.990

如果您执行（您的版本）：

```
find . -name \*.[ch] -exec ctags {} \; 
```

然后对找到的每个文件`find`执行一次。每次都会覆盖`ctags`该文件，只保留最后一个文件的标签。`tags`

相反，您需要告诉`find`只执行`ctags`一次，并在一次调用中指定*所有*匹配的文件。这就是你这样做的方式：

```
find . -name \*.[ch] -exec ctags {} + 
```

或者（我喜欢`trojanfoe`下面评论中的版本，因为它更容易阅读）：

```
ctags $(find . -name \*.[ch]) 
```

# c++ - boost::unordered_map 缺少 Reserve() 像 std::unordered_map

> ID：10617829
> 
> 赞同：2
> 
> 时间：2012-05-16T11:46:37.823
> 
> 标签：c++, unordered-map, boost-unordered

对于我的下一个任务，我需要使用一个非常大的哈希；因为我有一个旧编译器，所以我不能使用 C++0x `std::unordered_map`。理想情况下，我需要打电话`reserve`提前为大量物品腾出空间。我在中找不到这种方法`boost::unordered_map`：是否有任何实现相同的地方或功能？

2个关联容器是一样的；我可以看到`rehash`用于控制存储桶数量的函数和相同的构造函数，但不是关于多个元素的函数。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T12:12:58.463

`reserve`可以通过`rehash`N3376 中的表 103 进行仿真。

```
a.rehash(n) 
Post: a.bucket_count() > a.size() / a.max_load_factor() 
      and a.bucket_count() >= n.

a.reserve(n) Same as a.rehash(ceil(n / a.max_load_factor())) 
```

# magento - 分层导航的Magento错误

> ID：10617830
> 
> 赞同：1
> 
> 时间：2012-05-16T11:46:38.403
> 
> 标签：magento, e-commerce

我正在使用来自 themeforest 的自定义主题，我添加了所有属性和属性集以及一些产品，因此我可以测试分层导航但是当我尝试按除价格或类别之外的任何内容进行过滤时，我得到“有一个处理您的请求时出错”错误。

我注意到，当我按价格或类别进行过滤时，它会添加在“当前购物方式”中选择了两次的选项，而不是只添加一次，如果您单击叉号将其删除，它将同时删除两者。

但回到主要错误可能与它不确定有关，我已将错误粘贴在这里：

```
a:5:{i:0;s:62:"You cannot define a correlation name 'type_idx' more than once";i:1;s:3295:"#0 /home/towelsjt/public_html/lib/Varien/Db/Select.php(281): Zend_Db_Select->_join('inner join', Array, 'type_idx.entity...', Array, NULL)
#1 /home/towelsjt/public_html/lib/Zend/Db/Select.php(336): Varien_Db_Select->_join('inner join', Array, 'type_idx.entity...', Array, NULL)
#2 /home/towelsjt/public_html/lib/Zend/Db/Select.php(315): Zend_Db_Select->joinInner(Array, 'type_idx.entity...', Array, NULL)
#3 /home/towelsjt/public_html/app/code/core/Mage/Catalog/Model/Resource/Layer/Filter/Attribute.php(70): Zend_Db_Select->join(Array, 'type_idx.entity...', Array)
#4 /home/towelsjt/public_html/app/code/core/Mage/Catalog/Model/Layer/Filter/Attribute.php(94): Mage_Catalog_Model_Resource_Layer_Filter_Attribute->applyFilterToCollection(Object(Mage_Catalog_Model_Layer_Filter_Attribute), '35')
#5 /home/towelsjt/public_html/app/code/core/Mage/Catalog/Block/Layer/Filter/Abstract.php(91): Mage_Catalog_Model_Layer_Filter_Attribute->apply(Object(Mage_Core_Controller_Request_Http), Object(Mage_Catalog_Block_Layer_Filter_Attribute))
#6 /home/towelsjt/public_html/app/code/core/Mage/Catalog/Block/Layer/Filter/Abstract.php(73): Mage_Catalog_Block_Layer_Filter_Abstract->_initFilter()
#7 /home/towelsjt/public_html/app/code/core/Mage/Catalog/Block/Layer/View.php(136): Mage_Catalog_Block_Layer_Filter_Abstract->init()
#8 /home/towelsjt/public_html/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Catalog_Block_Layer_View->_prepareLayout()
#9 /home/towelsjt/public_html/app/code/core/Mage/Core/Model/Layout.php(456): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#10 /home/towelsjt/public_html/app/code/core/Mage/Core/Model/Layout.php(472): Mage_Core_Model_Layout->createBlock('catalog/layer_v...', 'catalog.rightna...')
#11 /home/towelsjt/public_html/app/code/core/Mage/Core/Model/Layout.php(239): Mage_Core_Model_Layout->addBlock('catalog/layer_v...', 'catalog.rightna...')
#12 /home/towelsjt/public_html/app/code/core/Mage/Core/Model/Layout.php(205): Mage_Core_Model_Layout->_generateBlock(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element))
#13 /home/towelsjt/public_html/app/code/core/Mage/Core/Model/Layout.php(210): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element))
#14 /home/towelsjt/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(344): Mage_Core_Model_Layout->generateBlocks()
#15 /home/towelsjt/public_html/app/code/core/Mage/Catalog/controllers/CategoryController.php(146): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
#16 /home/towelsjt/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Catalog_CategoryController->viewAction()
#17 /home/towelsjt/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('view')
#18 /home/towelsjt/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#19 /home/towelsjt/public_html/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#20 /home/towelsjt/public_html/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#21 /home/towelsjt/public_html/index.php(87): Mage::run('', 'store')
#22 {main}";s:3:"url";s:32:"/index.php/products.html?type=35";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:7:"default";} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:53:43.933

我遇到了几乎完全相同的问题，这确实是导致错误的重复问题。

我一直在使用 local.xml 文件进行一些布局更改，并以某种方式复制了一个块 /app/design/frontend/default/mytheme/layout.xml

我认为您必须查看此处或 catalog.xml

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:20:02.463

我有同样的错误。在我的情况下，解决方案是我首先使用“unsetChild”制作了一个不可见的分层导航，然后再次添加它。删除第一个而不是取消设置它是解决方案。

# c# - 在初始化准备好之前处理相机

> ID：10617831
> 
> 赞同：2
> 
> 时间：2012-05-16T11:46:46.420
> 
> 标签：c#, .net, camera, windows-phone-7.1, dispose

在 WP7.1 中，如果我在准备好之前处置相机，我会遇到以下异常：

```
ExceptionObject {"Initialization canceled by .Dispose().\r\nObject name: 'Camera'."}    System.Exception {System.ObjectDisposedException} 
```

如果我需要在页面准备好之前关闭页面，应该如何处理相机。我不想等到 cam.Initialized 被调用。

# java - 将 MTOM 与 StreamingAttachment 一起使用 - 码头启动失败

> ID：10617833
> 
> 赞同：1
> 
> 时间：2012-05-16T11:46:48.873
> 
> 标签：java, jakarta-ee, jetty, mtom

请指教！

在服务器端定义：

///////////////
@StreamingAttachment(parseEagerly=true)
@MTOM(threshold=10000000)
///////////////

一切都编译没有错误。

启动码头时，显示以下错误：

2012-05-16 04:31:48.403::INFO: jetty-6.1.4 严重：2012 年 5 月 16 日上午 4:31:49：WSSERVLET11：无法解析运行时描述符：javax.xml.ws.WebServiceException：注释@ com.sun.xml.internal.ws.developer.Str mingAttachment(parseEagerly=true, dir=, memoryThreshold=1048576) 无法识别，com.sun.xml.internal.ws.developer.StreamingAttamentFeature 类的至少一个构造函数应该标记为@FeatureConstructor (com.sun.xml.ws.transport.http.servlet.WSServletContextListener::contextInitialized) javax.xml.ws.WebServiceException: Annotation @com.sun.xml.internal.ws.developer.StreamingAttachment(parseEagerly =true, dir=, memoryThreshold=1048576) 无法识别，com.sun.xml.internal.ws.developer.StreamingAttachmentFeature 类的至少一个构造函数应该用@FeatureConstructor 标记

# javascript - 我在哪里可以找到 dojo 版本 1.7.2 的 spring-dojo.js？

> ID：10617834
> 
> 赞同：2
> 
> 时间：2012-05-16T11:46:50.487
> 
> 标签：javascript, dojo

我想将 dojo 更新到 1.7.2。有人能告诉我在哪里可以找到相关的 spring-dojo.js 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:44:17.763

简短的回答：Spring 中不支持 Dojo 1.7。

长答案：其他人在使用 Spring Javascript 时尝试将 Dojo 升级到最新版本，但几天后他们放弃了。请参阅此博客条目： [http ://www.rimple.com/tech/2012/3/1/quizzo-its-thursday-must-go-into-the-dojo-and-meditate.html](http://www.rimple.com/tech/2012/3/1/quizzo-its-thursday-must-go-into-the-dojo-and-meditate.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T14:07:18.840

Spring-Js 是一个死项目。即使在 2014 年 1 月，他们仍在捆绑 2010 版 Dojo，因为看起来要么没有人想要升级它，要么没有人再维护它。上次 Github[更新是 4 年前](https://github.com/spring-projects/spring-webflow/tree/master/spring-js-resources)。

此外，自 1.5.0 以来，Dojo 进行了重大更改，这将导致各种 SpringJs 功能失败。

我在这篇[Spring Forums 帖子](http://forum.spring.io/forum/spring-projects/roo/92172-change-version-of-dojo-in-my-project)中详细介绍了我的经验。

# assembly - DCPU-16 不接受来自键盘的输入

> ID：10617836
> 
> 赞同：2
> 
> 时间：2012-05-16T11:47:07.107
> 
> 标签：assembly, input, dcpu-16

我已经开始学习 DCPU-16 的汇编来为 0x10c 做准备，但是在我正在运行的[教程](http://0x10command.com/dcpu-assembly-tutorials/dasm-lesson-9-keyboard-input/)结束时，我发现程序没有响应键盘输入。一步一步地进入，我发现代码被卡在循环设置中，让 cpu 等待键盘输入。

这里的违规行：

```
IFE [0x9000 + I],0 ; if keyboard buffer is empty
SET PC,loop 
```

可能是因为代码是针对旧版本的 DCPU 的吗？如果是这样，它现在将如何运作？

第一篇关于 Stack Overflow 的帖子，如果我有任何失礼，请见谅，谢谢大家。完整代码：

```
SET A,0
SET B,0
SET C, 0xF000
SET I, 0
:loop
IFE [0x9000 + I],0 ; if keyboard buffer is empty
SET PC,loop
IFE [0x9000 + I],8
SET PC, backspace
IFE [0x9000 + I],10
SET PC, enter
SET B, [0x9000 + I]
BOR B,C
SET [0x8000+A], B
SET [0x9000 + I], 0
ADD A, 1
ADD I, 1
IFE I, 16
SET I, 0
SET PC,loop
:backspace
SUB A, 1
SET [0x8000+A],0
SET [0x9000 + I], 0
ADD I, 1
IFE I, 16
SET I, 0
SET PC,loop
:enter
AND A, 0xFFE0
ADD A, 0x0020
SET [0x9000 + I], 0
ADD I, 1
IFE I, 16
SET I, 0
SET PC,loop 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:05:32.760

在最新的规范中，键盘是基于中断的，而不是使用地址 0x9000 的内存映射。因此，如果您使用的是最新的模拟器，您的代码将无法工作。

[http://dcpu.com/highnerd/rc_1/keyboard.txt](http://dcpu.com/highnerd/rc_1/keyboard.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:04:59.050

即使使用旧规范，我相信缓冲区起始索引存储在 $9010 中，因此您不应该将 I 设置为 0，而是应该这样做：

```
SET I, [0x9010] 
```

# c# - 如何更改asp.net中Treeview中选中的TreeNodes的文本颜色？

> ID：10617837
> 
> 赞同：1
> 
> 时间：2012-05-16T11:47:08.787
> 
> 标签：c#, asp.net, c#-4.0, treeview

我在我的 Asp.net 页面中创建了一个树视图。现在用户可以选中 TreeView 中的复选框。所以，现在我想更改树节点的文本颜色以突出显示用户选择的节点。

请指导我摆脱这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:37:29.437

[在这里](http://msdn.microsoft.com/en-us/library/bctbxtcb%28v=vs.80%29)寻找解决方案。

简而言之，您应该尝试类似

```
TreeNode node;
// Define the node here.
if (node.Checked == true)
    node.ForeColor = Color.Orange;
// Then use TreeView.Refresh() method to redraw your TreeView 
```

# ruby-on-rails - 为什么当我调用合并时 ActiveRelation 返回一个数组？

> ID：10617838
> 
> 赞同：1
> 
> 时间：2012-05-16T11:47:09.307
> 
> 标签：ruby-on-rails, ruby, activerecord

我有名为`User`,的模型`Activity`，`Task`并且我可以执行以下操作

```
> puts Activity.joins(:task).to_sql
SELECT "activities".* FROM "activities" INNER JOIN "tasks" ON "tasks"."id" = "activities"."task_id" ORDER BY date DESC

> puts User.first.shared_tasks.to_sql
SELECT "tasks".* FROM "tasks" INNER JOIN "user_tasks" ON "tasks"."id" = "user_tasks"."task_id" WHERE "user_tasks"."user_id" = 1 
```

但是当我尝试`merge`这两个时，我得到一个数组：

```
> puts Activity.joins(:task).merge(User.first.shared_tasks).to_sql
NoMethodError: undefined method `to_sql' for []:Array 
```

为什么不返回关系？我需要在其上放置一个 where 子句。

更新：

经过进一步检查，它似乎`User.first.shared_tasks`正在立即被评估为一系列任务。`order`我可以通过添加调用来获得我想要的行为：

```
> puts Activity.joins(:task).merge(User.first.shared_tasks.order()).to_sql
SELECT "activities".* FROM "activities" INNER JOIN "tasks" ON "tasks"."id" = "activities"."task_id" INNER JOIN "user_tasks" ON "tasks"."id" = "user_tasks"."task_id" WHERE "user_tasks"."user_id" = 1 ORDER BY date DESC 
```

除了添加一个空之外，还有更好的方法来防止该关系被评估`order`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:30:09.837

每当您在关系对象上调用它不响应的方法时，它都会将该方法委托给其他类型的对象。在 的情况下`merge`，它将被转换为一个数组。这是通过[ActiveRecord::Delegation 模块](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/delegation.rb)完成的。一些方法，例如`each`显[式委托](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/delegation.rb#L6)，而另一些方法，例如`merge`通过[method_missing](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/delegation.rb#L35)完成。

例如，如果您这样做：

```
Activity.joins(:task).each { |activity| puts activity } 
```

关系委托`.each`给一个数组（枚举器），本质上是进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:50:52.923

好吧，我还没有弄清楚为什么`User.first.shared_tasks`会立即被评估，但我已经想出了一个解决方法。我可以打电话`scoped`：

```
> User.first.shared_tasks.class
=> Array

> User.first.shared_tasks.scoped.class
=> ActiveRecord::Relation 
```

现在，当我尝试进行合并时：

```
Activity.joins(:task).merge(User.first.shared_tasks.scoped) 
```

它使用`ActiveRecord::Relation#merge`而不是`Array#merge`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:58:34.623

对于关系，你可以试试这个

```
puts (Activity.joins(:task) & User.first.shared_tasks).to_sql 
```

合并有助于创建范围并返回结果对象数组。

# java - java方法中的标记中断

> ID：10617839
> 
> 赞同：4
> 
> 时间：2012-05-16T11:47:10.393
> 
> 标签：java, loops

为什么java允许在方法中使用带标签的break？这有什么特殊目的或用途吗？我认为它只能在循环和开关中使用。

```
public void testMeth(int count){
   label:
   break label;
} 
```

但下面给出了编译器错误。

```
public void testMeth(int count){
    break; // This gives an Error : break cannot be used outside of a loop or a switch
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:54:20.207

我不知道为什么，但是[Java 语言规范 #14.15](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.15)中指定了该行为：

**打破没有标签**

> 没有标签的 break 语句试图将控制转移到最里面的封闭式 switch、while、do 或 for 立即封闭方法或初始化程序的语句；此语句称为中断目标，然后立即正常完成。
> **如果直接封闭的方法、构造函数或初始化程序中没有 switch、while、do 或 for 语句包含 break 语句，则会发生编译时错误。**

**打破标签**（强调我的）

> 带有标签 Identifier 的 break 语句尝试将控制转移到封闭的带有标签的语句（第 14.7 节），该语句具有与其标签相同的 Identifier；此语句称为中断目标，然后立即正常完成。**在这种情况下，break 目标不必是 switch、while、do 或 for 语句**。

带标签的中断使您能够在整个块（可以是循环）之后重定向代码，这在嵌套循环的情况下很有用。[然而，它与 C goto 语句不同](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.7)：

> 与 C 和 C++ 不同，Java 编程语言没有 goto 语句；标识符语句标签与出现在标记语句中的任何位置的 break (§14.15) 或 continue (§14.16) 语句一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:49:23.427

您可以使用它[立即跳出嵌套循环](http://www.rgagnon.com/javadetails/java-0500.html)：

```
out: { 
         for( int row=0; row< max; row++ ) {
             for( int col=0; col< max; col++ )
                 if( row == limit) break out;
             j += 1;
         }
     } 
```

使用`break`外部循环没有多大意义，你会`breaking`在哪里？要*打破*void 函数，您可以使用 return 作为`adarshr`指出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:25:03.813

我自己发现了一个疯狂的用途。

```
public void testMeth(int count){
    label: if (true) {
          System.out.println("Before break");
          if (count == 2) break label;
          System.out.println("After break");
    }
    System.out.println("After IF");
} 
```

或者

```
public void testMeth(int count){

    namedBlock: {
        System.out.println("Before break");
        if (count == 0) break namedBlock;
        System.out.println("After break");
    }

    System.out.println("After Block");
} 
```

这忽略了“休息后”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:03:00.890

这是标签在循环上下文之外何时有用的另一个示例：

```
boolean cond1 = ...
if (cond1) {
    boolean cond1 = ...
    if (cond2) {
        boolean cond3 = ...
        if (cond3) {
            bar();
        } else {
            baz();
        }
    } else {
        baz();
    }
} else {
    baz();
}
```

……变成……

```
label: {
    boolean cond1 = ...
    if (cond1) {
        boolean cond1 = ...
        if (cond2) {
            boolean cond3 = ...
            if (cond3) {
                bar();
                break label;
            }
        }
    }
    baz();
}
```

显然，这是一个人为的例子，但更具可读性。我的建议是，如果你觉得需要使用标签，几乎永远，你应该重构代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T11:53:45.403

因为`return`在循环之外有使用语句！

```
public void testMeth(int count){
    if(count < 0) {
        return;
    }

    // do something with count
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T11:50:28.707

您可以使用带标签的中断来摆脱嵌套循环，[就像这里一样](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-30T09:58:13.043

我强烈反对使用带标签的 break 语句。它几乎和 GOTO 一样糟糕。一次休息；可以/有必要结束循环或切换等。但根据我的经验：需要这种带标签的中断是不良控制流设计的指标。

在大多数情况下，放置得当的异常会更有意义。但是，如果“跳转条件”可以被视为错误。如果你正确地标记你的方法，你可以影响，什么可以被视为错误。

如果您的方法被称为“getDrink()”并且它返回一个“牛奶”对象，那就没问题了。但是如果你的方法被称为“getWater()”，它应该抛出一个异常而不是返回牛奶......

所以而不是：

```
public class TestBad {

public static void main(String[] args) {
    String[] guys = {"hans", "john"};

    myLabel: {
        for(String guy: guys) {
            String drink = getDrink(guy);

            if(drink.equals("milk")) {
                // Handle "milk"??
                break myLabel;
            }

            // Do something with "non-milk"
        }
    }

    // Success? Non Success??
}

private static String getDrink(String guy) {
    if(guy.equals("hans"))
        return "milk";
    else
        return "water";
} 
```

}

你应该使用：

```
public class TestGood {

public static void main(String[] args) {
    String[] guys = {"hans", "john"};

    try {
        handleStuff(guys);
    } catch (Exception e) {
        // Handle Milk here!
    }
}

private static void handleStuff(String[] guys) throws Exception {
    for(String guy: guys) {

        String drink = getWater(guy);

        // Do something with "water"
    }
}

private static String getWater(String guy) throws Exception {
    if(guy.equals("hans"))
        // The method may NEVER return anything else than water, because of its name! So:
        throw new Exception("No Water there!");
    else
        return "water";
} 
```

}

Fazit：与其将块嵌套到块或多个循环中，不如嵌套方法并使用适当的异常处理。这增强了可读性和可重用性。

# sql - INNER JOIN 到多个表

> ID：10617840
> 
> 赞同：1
> 
> 时间：2012-05-16T11:47:13.003
> 
> 标签：sql, ms-access

我有四张桌子

```
student
-------
id, int
firstName, varchar
lastName, varchar

course
------
id, int
name, varchar

semester
--------
id, int
name, varchar

mark
----
studentId, int
courseId, int
semesterId, int
mark, int 
```

我想做一个 sql 查询来检索表`firstName`中`lastName`的每一行。`courseName``semesterName``mark``mark`

我试图用 INNER JOIN 来做，但我不能为不止一张桌子做 INNER JOIN。

我终于达到的那个代码

```
select student.firstName, student.lastName, course.name, semester.name, mark.mark
from mark
INNER JOIN student ON student.id = mark.studentId
INNER JOIN course ON course.id = mark.courseId
INNER JOIN semester ON semester.id = mark.semesterId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:02:44.333

尝试 theta 风格加入：

```
select student.firstName, student.lastName, course.name, semester.name, mark.mark
from mark, student ,course, semester
WHERE  student.id = mark.studentId AND course.id = mark.courseId AND semester.id = mark.semesterId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:59:55.043

在 Ms Access 中，您必须在具有多个连接的查询中包含括号：

```
select st.firstName, st.lastName, c.name, sm.name, m.mark
from (((mark m
        INNER JOIN student st ON st.id = m.studentId)
        INNER JOIN course c ON c.id = m.courseId)
        INNER JOIN semester sm ON sm.id = m.semesterId) 
```

# math - 光线追踪计算

> ID：10617845
> 
> 赞同：2
> 
> 时间：2012-05-16T11:47:24.067
> 
> 标签：math, graphics, raytracing

我正在尝试进行一些涉及光线追踪的计算，但有点困惑。假设我有一个 n×n 图像，其中包含 N 个几何图元、l 个光源和 kxk 超级采样。在最坏的情况下，我将计算多少个射线交点？如果我添加深度为 d 的反射/折射会怎样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T13:21:17.277

您必须为图像的每个 nxn 像素发射 kxk 射线。对于这些射线中的每一个，您都必须进行碰撞测试，这会以一种非常简单且低效的方式转化为 N 次比较（每次都取决于基元的复杂性）。现在，如果这些光线中的任何一条射到镜面或半透明表面，您必须拆分光线并递归调用。但是，这一次您不进行超级采样，因此您只需在反射/折射方向发送一束光线。对于深度 d，您将发送该数量的额外光线，每个递归调用一条。

所以，总共：k^2 xn^2 x d。

这还不包括相交计算，它不会增加更多的光线，但会增加很多复杂性。

然而，有许多简化。

*   自适应多重采样，减少 k^2 因子。
*   像素插值，减少 n^2 因子。
*   使用一些空间分区结构，如 BSP 和/或 OctTree 进行碰撞测试。
*   使用一些启发式方法来减少递归。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:27:34.307

然而，这并不是一个完整的答案......请参阅这篇文章：http: [//blogs.msdn.com/b/lukeh/archive/2007/10/01/taking-linq-to-objects-to-extremes- a-fully-linqified-raytracer.aspx](http://blogs.msdn.com/b/lukeh/archive/2007/10/01/taking-linq-to-objects-to-extremes-a-fully-linqified-raytracer.aspx)您可能会利用修改后的一些计数代码来在您进行跟踪时自动将这些统计信息提供给您：P

# java - 带有最大化按钮的java模态框架

> ID：10617850
> 
> 赞同：2
> 
> 时间：2012-05-16T11:47:45.170
> 
> 标签：java, swing, modal-dialog, frame, maximize

我想知道是否可能：

1.  用最大化按钮制作一个jdialog（可以是模态的）（是否可以进行自定义但会最大化框架？）
2.  或制作jframe（具有默认最大化按钮）模式？

有很多关于这个的话题，但我没有找到干净的解决方案。只有 setEnabled() 等的技巧。

提前谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:16:23.800

*   AFAIK 不可能，因为顶级容器来自本机操作系统，

*   然后鼠标双击JFrame的工具栏resize容器以填满整个屏幕Dimension，第二次双击恢复lastz已知的Dimension

*   这在 JDialog 中是不可能的

*   来自任何 Mouse(Xxx)Listener 不响应来自本机操作系统的工具栏的 mouse_events，仅来自填充 RootPane

代码示例

```
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JButton;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Toolkit;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import javax.swing.JDialog;
import javax.swing.Timer;
//http://stackoverflow.com/questions/8670297/make-java-swing-modal-dialog-behave-like-mac-osx-dialogs
public class ModalDialogDemoFrame extends JFrame {

    private static final long serialVersionUID = 1L;
    private ModalDialogDemoFrame modalDialogDemo;

    public ModalDialogDemoFrame() {
        modalDialogDemo = this;
        setBounds(100, 100, 400, 400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JButton buttonDialog = new JButton("Open Dialog");
        buttonDialog.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                // Create a Modal Dialog with this Frame as Parent.
                ModalDialog modalDialog = new ModalDialog(modalDialogDemo, true);
                modalDialog.setVisible(true);
            }
        });
        getContentPane().add(buttonDialog, BorderLayout.CENTER);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                try {
                    ModalDialogDemoFrame window = new ModalDialogDemoFrame();
                    window.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
}
//http://stackoverflow.com/questions/4577424/distinguish-between-a-single-click-and-a-double-click-in-java/4577475#4577475
class ClickListener extends MouseAdapter implements ActionListener {

    private final static int clickInterval = (Integer) Toolkit.getDefaultToolkit().getDesktopProperty("awt.multiClickInterval");
    private MouseEvent lastEvent;
    private Timer timer;

    public ClickListener() {
        this(clickInterval);
    }

    public ClickListener(int delay) {
        timer = new Timer(delay, this);
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        if (e.getClickCount() > 2) {
            return;
        }
        lastEvent = e;
        if (timer.isRunning()) {
            timer.stop();
            doubleClick(lastEvent);
        } else {
            timer.restart();
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        timer.stop();
        singleClick(lastEvent);
    }

    public void singleClick(MouseEvent e) {
    }

    public void doubleClick(MouseEvent e) {
    }
}

class ModalDialog extends JDialog {

    private static final long serialVersionUID = 1L;

    public ModalDialog(JFrame parent, boolean modal) {
        Dimension dimensionParentFrame = parent.getSize();
        setSize(new Dimension((parent == null) ? 300 : dimensionParentFrame.width / 2, 75));
        Dimension dimensionDialog = getSize();
        int x = parent.getX() + ((dimensionParentFrame.width - dimensionDialog.width) / 2);
        setLocation(x, parent.getY() + parent.getInsets().top);
        //setUndecorated(true);
        setModal(modal);
        setModalityType(ModalityType.APPLICATION_MODAL);
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        JButton buttonClose = new JButton("Close");
        buttonClose.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                dispose();
            }
        });
        add(buttonClose, BorderLayout.CENTER); // comment for listening 
        addMouseListener(new ClickListener() {

            @Override
            public void singleClick(MouseEvent e) {
                System.out.println("single");
            }

            @Override
            public void doubleClick(MouseEvent e) {
                System.out.println("double");
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T12:45:15.950

请看一下这个，您可以使用 JDialog 来解决您在问题中所说的内容。

[带有最大化按钮的 Java 模态窗口](https://stackoverflow.com/questions/3897927/java-modal-window-with-maximize-button)

# windows-phone-7 - 自动滚动列表框 wp7

> ID：10617852
> 
> 赞同：1
> 
> 时间：2012-05-16T11:47:51.587
> 
> 标签：windows-phone-7, listbox, scroll

我有一个包含许多richtextboxex 的列表框。现在我想为它启用自动滚动功能。我不能只`listBox.SelectedIndex++;`在计时器或其他东西中做，因为那样它只会转到另一个富文本框，我不想要那样。我想要更像这样的东西

```
sv.ScrollToVerticalOffset(sv.VerticalOffset + 5); 
```

在滚动视图中完美运行，我可以对列表框实现相同的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:51:23.747

好吧，我找到了我要找的东西

```
 ScrollViewer sv = ((VisualTreeHelper.GetChild(listBox, 0) as FrameworkElement).FindName("ScrollViewer") as ScrollViewer);
        sv.ScrollToVerticalOffset(sv.VerticalOffset + 0.004); 
```

谢谢你们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:42:21.230

如果您使用[Linq To Visual Tree 之](http://www.scottlogic.co.uk/blog/colin/2010/03/linq-to-visual-tree/)类的东西，您可以访问 ListBox 内的 ScrollViewer，然后在其上调用 ScrollToVerticalOffset。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:53:55.593

是的你可以。在这里你应该给它自动滚动到项目的项目索引

```
 list.ScrollIntoView(object item); 
```

# android - 停止在状态 1 中调用

> ID：10617854
> 
> 赞同：3
> 
> 时间：2012-05-16T11:47:53.457
> 
> 标签：android, media-player

我无法解决这个媒体播放器错误，上面写着“在状态 1 中停止调用”。我的媒体播放器实际上延迟了几秒钟，然后再继续播放下一个音乐。谁能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:58:32.357

这可能会帮助你...

```
package com.commonsware.android.audio;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.ImageButton;
import android.widget.Toast;

public class AudioDemo extends Activity
  implements MediaPlayer.OnCompletionListener {

  private ImageButton play;
  private ImageButton pause;
  private ImageButton stop;
  private MediaPlayer mp;

  @Override
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);

    play=(ImageButton)findViewById(R.id.play);
    pause=(ImageButton)findViewById(R.id.pause);
    stop=(ImageButton)findViewById(R.id.stop);

    play.setOnClickListener(new View.OnClickListener() {
      public void onClick(View view) {
        play();
      }
    });

    pause.setOnClickListener(new View.OnClickListener() {
      public void onClick(View view) {
        pause();
      }
    });

    stop.setOnClickListener(new View.OnClickListener() {
      public void onClick(View view) {
        stop();
      }
    });

    setup();
  }

  @Override
  public void onDestroy() {
    super.onDestroy();

    if (stop.isEnabled()) {
      stop();
    }
  }

  public void onCompletion(MediaPlayer mp) {
    stop();
  }

  private void play() {
    mp.start();

    play.setEnabled(false);
    pause.setEnabled(true);
    stop.setEnabled(true);
  }

  private void stop() {
    mp.stop();
    pause.setEnabled(false);
    stop.setEnabled(false);

    try {
      mp.prepare();
      mp.seekTo(0);
      play.setEnabled(true);
    }
    catch (Throwable t) {
      goBlooey(t);
    }
  }

  private void pause() {
    mp.pause();

    play.setEnabled(true);
    pause.setEnabled(false);
    stop.setEnabled(true);
  }

  private void loadClip() {
    try {
      mp=MediaPlayer.create(this, R.raw.clip);
      mp.setOnCompletionListener(this);
    }
    catch (Throwable t) {
      goBlooey(t);
    }
  }

  private void setup() {
    loadClip();
    play.setEnabled(true);
    pause.setEnabled(false);
    stop.setEnabled(false);
  }

  private void goBlooey(Throwable t) {
    AlertDialog.Builder builder=new AlertDialog.Builder(this);

    builder
      .setTitle("Exception!")
      .setMessage(t.toString())
      .setPositiveButton("OK", null)
      .show();
  }
} 
```

# android - 将普通图像转换为棕褐色彩色图像时如何减少耗时？

> ID：10617855
> 
> 赞同：0
> 
> 时间：2012-05-16T11:47:56.673
> 
> 标签：android, android-image

我使用以下代码将普通图像转换为灰度和棕褐色彩色图像。

对于**棕褐色颜色转换**：

```
public static Bitmap createSepiaToningEffect(Bitmap src, int depth,
            double red, double green, double blue) {
        // image size
        int width = src.getWidth();
        int height = src.getHeight();
        // create output bitmap
        Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
        // constant grayscale
        final double GS_RED = 0.3;
        final double GS_GREEN = 0.59;
        final double GS_BLUE = 0.11;
        // color information
        int A, R, G, B;
        int pixel;

        // scan through all pixels
        for (int x = 0; x < width; ++x) {
            for (int y = 0; y < height; ++y) {
                // get pixel color
                pixel = src.getPixel(x, y);
                // get color on each channel
                A = Color.alpha(pixel);
                R = Color.red(pixel);
                G = Color.green(pixel);
                B = Color.blue(pixel);
                // apply grayscale sample
                B = G = R = (int) (GS_RED * R + GS_GREEN * G + GS_BLUE * B);

                // apply intensity level for sepid-toning on each channel
                R += (depth * red);
                if (R > 255) {
                    R = 255;
                }

                G += (depth * green);
                if (G > 255) {
                    G = 255;
                }

                B += (depth * blue);
                if (B > 255) {
                    B = 255;
                }

                // set new pixel color to output image
                bmOut.setPixel(x, y, Color.argb(A, R, G, B));
            }
        }

        // return final image
        return bmOut;
    } 
```

上面的代码工作正常，但问题是它需要更多时间（超过 60 秒）。我怎样才能减少时间消耗。当我将图像转换为灰度时，它需要不到 2 秒。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:58:49.190

你可以使用 ndk 参考这个 git 存储库 git://github.com/ruckus/android-image-filter-ndk.git

# java - 使用来自 jsp 页面的 java 提交/回滚

> ID：10617862
> 
> 赞同：-2
> 
> 时间：2012-05-16T11:48:20.243
> 
> 标签：java, mysql, jsp, commit, rollback

我调用各种 java 类文件来从 jsp 页面向表中插入数据。有时数据不会插入所有表中。因此，它创建完整性如何使用从 jsp 页面提交/回滚来避免这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:50:44.603

JSP 不应连接到数据库并执行此类逻辑。它们用于渲染视图 - 仅此而已。

在 JSP 和数据库之间放置一个 servlet。让 servlet 验证输入参数并将其绑定到对象，将请求路由到其他对象以完成请求，将对象添加到响应范围，并确定下一个视图。它被称为 Model-2 MVC。

您可能正在将scriptlet 代码放入您的JSP。这是一种 1998 年的风格，在很大程度上已经名誉扫地。

更好的解决方案是学习 JSTL 并将所有 scriptlet 代码排除在 JSP 之外。它还会迫使您将逻辑移出页面并移至它所属的服务器端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T13:02:09.887

使用 try catch 和 if-else 语句检查数据是否正确插入，如果在插入事务过程中出现错误，则使用回滚。

```
Connection conn = null;
Statement stmt = null;

try{
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
String connectionUrl = "jdbc:sqlserver://localhost;databaseName=dbname;user=username;password=password";
conn = DriverManager.getConnection(connectionUrl); 
conn.setAutoCommit(false);
stmt = conn.createStatement();
stmt.executeUpdate(sql);
stmt.executeUpdate(sql);
stmt.executeUpdate(sql);
stmt.executeUpdate(sql);

conn.commit();
}
catch(Exception e) {
if(!conn.isClosed()){
conn.rollback();
}
System.out.println(e);
}
finally{
if(!stmt.isClosed()){
stmt.close();
}
if(!conn.isClosed()){
conn.close();
}
} 
```

或尝试使用 JSTL 更轻松 观看[JSF 框架教程](http://youtu.be/IWHqaUE6qzU)

# php - 多次包含一个文件（对于模板）

> ID：10617863
> 
> 赞同：0
> 
> 时间：2012-05-16T11:48:20.417
> 
> 标签：php, templates

我正在开发一个简单的模板引擎，我想知道是否可以多次包含模板文件，每次渲染模板一次。它基本上是这样的：

```
function rendering_function_in_rendering_class()
{
    include $path_to_templates . get_class($this) . 'template.php';
} 
```

然后在模板文件中：

```
<h1>Hello, <?php echo $this->awesomename ?>!</h1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:50:22.207

此功能完全符合您的需要：

```
<?php

function embed($file, $vars) {
  ob_start();
  extract($vars, EXTR_SKIP);
  include($file);
  $content = ob_get_contents();
  ob_end_clean();

  return $content;
}

?> 
```

它将文件路径作为第一个参数和变量的键/值数组，这些变量将被提取到范围中，这样您的模板就可以直接在 HTML 中使用它们，如下所示：

```
<h1><?php print $title; ?></h1> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:51:13.677

不，PHP 中的函数只能定义一次。但是，您可以为每个类创建多个实例：

```
$this1=new rendering();
$this2=new rendering();
echo $this1->awesomename;
echo $this2->awesomename; 
```

或者在没有初始化类的情况下在类中使用函数：

```
$rendering::rendering_function_in_rendering_class(); 
```

这是否回答你的问题？

# javascript - 如何为电话号码实现实时 Javascript 正则表达式？

> ID：10617864
> 
> 赞同：2
> 
> 时间：2012-05-16T11:48:44.833
> 
> 标签：javascript, regex

我有一个文本框，上面写着“电话：”，因为这里电话号码的标准是 (XXX)-XXX-XXXX 我想要一个 javascript，如果它不是那种格式，它会自动将我的号码转换成那种格式，因此，如果您输入 9993334444 那么它会在我输入 (999)-333-4444 时自动更改它寻找？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:11:44.103

你想添加一个带有正则表达式的 onkeyup 事件

```
this.value = this.value.replace(/^\(?([0-9][0-9][0-9]){1}\)?-?([0-9][0-9][0-9][0-9]){1}-?([0-9][0-9][0-9]){1}$/, '($1)-$2-$3'); 
```

查看[http://jsfiddle.net/R8enX/](http://jsfiddle.net/R8enX/)

```
/ means start/end a regex string
^ means start of matching string
$ means end of matching string
? means 0 or 1 instances (make braces and dashes optional)
[0-9] means any single digit
(x){1} tags x as an expression that we can reference in the replacement with a $ sign 
```

编辑：意识到我错过了最后一组数字的一个数字，jsfiddle 只能（正确）在最后一组数字中使用 3 个数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:52:49.453

要在@Andrews 答案的基础上有所建树，您可以通过此方法检查有效的（本地）电话号码。如果数字短于或大于 10 位数字，它将重新折叠为无效数字

-

```
<input type="text" onBlur="localNumber(this.value)"/>

<div id="output"></div> 
```

-

```
<script>

var localNumber = function(str){

    repl = str.replace(/^([0-9]{3})([0-9]{3})([0-9]{4})$/, "($1)-$2-$3");
    outp = document.getElementById('output');

    if( repl.match(/\W/) )
    {
        outp.innerHTML = repl;
    }
    else
    {
        outp.innerHTML = 'Invalid number for this region';
    }

}

</script> 
```

# asp.net - DataList 和存储过程

> ID：10617869
> 
> 赞同：0
> 
> 时间：2012-05-16T11:49:10.133
> 
> 标签：asp.net, visual-studio, stored-procedures

我的数据列表不工作。我在其项目模板中插入了一个表格，并在每个表格单元格中插入了一个标签。

在 ascx 文件中，我将每个标签与：`<%# Eval("Field1") %>`、`<%# Eval("Field2") %>`...等相关联。我有一个存储过程，它精确地返回一个包含这些字段的表（Field1、Field2、...）

在 ascx.cs 文件中，我将数据列表的数据源指定为执行存储过程产生的表。

我在这里做错了吗？

我期望用存储过程结果填充数据列表。我之前写了一个类似的问题，但现在让它变得更简单，强调我认为错误可能源于何处。非常感谢。项目运行，但数据列表不显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:28:46.540

你没有提到这一点，所以，我会尝试：

您还应该在设置 DataSource 后调用 DataList 的 DataBind 方法。

# c# - 生成xml属性

> ID：10617870
> 
> 赞同：0
> 
> 时间：2012-05-16T11:49:13.443
> 
> 标签：c#, xml, namespaces, xelement, xattribute

我必须创建一个 xml 文件，其中包含一个具有以下属性的元素：

```
 <element 
     xsi:schemaLocation="http://test.xsd" 
     xmlns="http://test2" 
     xmlns:xsi=http://test3> 
```

我试过了：

```
 XNamespace ns = "xsi";            
 var root = new XElement("element",
                       new XAttribute(ns + "schemaLocation", "http://test.xsd"), // (I)
                       new XAttribute(XNamespace.Xmlns, "http://test2"),         // (II)
                       new XAttribute(XNamespace.Xmlns + "xsi", "http://test3"), // (III) 
```

但唯一生成良好的是（III）：

```
 xmlns:xsi=http://test3 
```

(I) 生成如下：

```
 p1:schemaLocation="http://test.xsd" xmlns:p1="xsi" 
```

并且 (II) 没有生成，因为该行没有编译。

关于如何生成这些属性的任何想法？

谢谢你，L

编辑 - 也在这里找到它：[Creating XML with namespaces and schemas from an XElement](https://stackoverflow.com/questions/335135/creating-xml-with-namespaces-and-schemas-from-an-xelement)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:12:07.733

```
const string ns = "http://test2";
const string si = "http://test3";
const string schema_location = "http://test.xsd";

XNamespace xns = ns;
XNamespace sinsp = si;

     XElement xe = new XElement(xns + "element",
           new XAttribute(XNamespace.Xmlns + "xsi", si),
           new XAttribute(sinsp+ "schemaLocation", schema_location),
           new XElement(xns + "sometag", "somecontent")
        );

     return xe; 
```

# windows-phone-7 - Windows Phone 7 的 jQueryMobile 替代品？

> ID：10617872
> 
> 赞同：2
> 
> 时间：2012-05-16T11:49:19.227
> 
> 标签：windows-phone-7, jquery-mobile

我有一个问题，我正在将 jquerymobile 用于一些 android 应用程序，它运行得非常好。

在不使用 webkit 的 windows phone 上尝试后，它让我失望了。

例如，当您单击一个按钮时，它看起来非常难看。

有人知道一个与 jquerymobile 相当但针对 windows phone 进行了优化的框架吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:00:17.160

您是否尝试过使用[jQuery Mobile Metro 主题](http://www.scottlogic.co.uk/blog/colin/2012/04/introducing-the-jquery-mobile-metro-theme/)？据我所知，它是唯一针对 WP7 优化的 HTML5 移动框架。

# extjs - Extjs：嵌套应用程序

> ID：10617879
> 
> 赞同：1
> 
> 时间：2012-05-16T11:49:40.413
> 
> 标签：extjs, extjs4, extjs-mvc

我正在尝试将一个相当复杂的应用程序移至 Extjs。在我们当前的应用程序中，我们使用了一种非常模块化的方法，我们将应用程序构建为多个子应用程序，这些子应用程序由一个主应用程序加载。我想在每个子应用程序中使用新的“MVC 基础”来重用这种方法和 Extjs。

目前我有一个简单的主应用程序和简单的客户子应用程序。两者都很好地独立工作。但是一旦我尝试将客户添加到主应用程序，我只会看到一个空白区域。

有没有更推荐的方法呢？

我的主要应用程序：

```
Ext.application({
    name: 'ISA',
    appFolder: 'app',
    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout:'border',
            defaults: {
                collapsible: true,
                split: false,
                bodyStyle: 'padding:15px'
            },
            items: [{
                title: 'ProcessBar',
                region: 'north',
                height: 150,
                cmargins: '5 0 0 0'
            },{
                title: 'Main Area',
                id:'desktop',
                xtype:"panel",
                collapsible:false,
                region:'center',
                margins: '5 0 0 0',
                cmargins: '0 0 0 0',
                height:300,
                items:[{
                    type:"ISA.extensions.customer",
                    height:300
                }]

            }]
        });
    }
}); 
```

我的客户应用程序：

```
Ext.define('ISA.extensions.customer',{
    extend:'Ext.app.Application',
    alias:'customer',
    name: 'ISA.extensions.customer',
    appFolder: 'app',    
    controllers: [
        'Users'
    ],
    launch: function() {
        Ext.create('Ext.panel.Panel', {
            layout:'border',
            height: 400,
            renderTo:  "desktop",
            defaults: {
                collapsible: false,
                split: false,
                bodyStyle: 'padding:0px'

            },
            items: [{
                title: 'Customer App',
                region:'center',
                margins: '0 0 0 0',
                cmargins: '0 0 0 0',
                width: 175,
                minSize: 100,
                maxSize: 250,
                items: {
                    xtype: 'userlist'
                }
            }]
        });
    }
});

Ext.define('ISA.extensions.customer.view.user.List' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.userlist',

    title : 'All Users',

    initComponent: function() {
        this.store = {
            fields: ['name', 'email'],
            data  : [
                {name: 'Ed',    email: 'ed@sencha.com'},
                {name: 'Tommy', email: 'tommy@sencha.com'}
            ]
        };

        this.columns = [
            {header: 'Name',  dataIndex: 'name',  flex: 1},
            {header: 'Email', dataIndex: 'email', flex: 1}
        ];

        this.callParent(arguments);
    }
});

Ext.define('ISA.extensions.customer.controller.Users', {
    extend: 'Ext.app.Controller',
    views: [
        'user.List'
    ],
    init: function() {
        this.control({
            'viewport > panel': {
                render: this.onPanelRendered
            }
        });
    },

    onPanelRendered: function() {
        console.log('The customer list was rendered');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:16:02.693

当前的 ExtJs MVC 方法假设您将所有代码都放在一个应用程序中。您可以使用不同的视图、控制器和商店来划分不同的功能，但应用程序应该是单一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:51:20.883

我相信这就是您正在寻找的：[https](https://github.com/mitchellsimoens/SubAppDemo) ://github.com/mitchellsimoens/SubAppDemo ；

如果这没有帮助，我可以告诉你很多关于动态加载视图/控制器的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:12:43.443

另一个使用依赖注入的解决方案：http: [//deftjs.org/](http://deftjs.org/)

# iphone - 不调用 NSurl 连接委托

> ID：10617885
> 
> 赞同：2
> 
> 时间：2012-05-16T11:50:12.410
> 
> 标签：iphone

这是我从 url 获取图像的代码，但没有调用委托方法。为什么？

```
NSString *urlLink = [NSString stringWithString:appRecord.imageURLString];   
self.urlString=urlLink;
NSURL *url=[NSURL URLWithString:urlLink];
NSMutableURLRequest *request=[[NSMutableURLRequest alloc] initWithURL:url];
NSURLConnection *conn=[[NSURLConnection alloc] initWithRequest:request delegate:self];
self.imageConnection=conn;
[conn release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:24:42.900

试试这个来检查连接是否为零

```
 xmlConnection = [[NSURLConnection alloc] 
                 initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@", URL]]] delegate:self];
if (xmlConnection == nil){
    NSLog(@"Connection Error");
}
else{

    responseData = [[NSMutableData alloc] retain];

} 
```

# jquery - 如何仅在页面内重新加载一个 div，而不是将新页面加载到 div 中，只需重新加载它

> ID：10617886
> 
> 赞同：1
> 
> 时间：2012-05-16T11:50:14.247
> 
> 标签：jquery, function

我正在使用此功能将内容从另一个页面加载到我的`<div>`：

```
<script>
   $(document).ready(function() { 
   $("#refresh").bind("click", function() {
      $("#Container").load("Image_rotate.html")    
      });
   });
 </script>

<h2>Looking for</h2>      
<div id="Container"></div>   
</div><a href="javascript:void(0);" id="refresh">click</a> 
```

但我只想刷新我的 div 'Container' 而不是从外部页面加载新内容，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:54:05.723

```
<div id="hiddenDiv"></div>  
<div id="Container"></div> 
```

**代码：**

```
$('#hiddenDiv').html($("#Container"));

$("#refresh").bind("click", function() { 
    $("#Container").html($('#hiddenDiv').html())
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:03:09.703

```
$("#refresh").bind("click", function() {
   $("#Container").load("Image_rotate.html", function(response, status, xh) {
      $(this).html(response);  // if response is html
   })    
}); 
```

# javascript - JSON响应中的回调函数

> ID：10617893
> 
> 赞同：0
> 
> 时间：2012-05-16T11:50:31.473
> 
> 标签：javascript, json

```
var Model= function () {

        function GetData() {    
            // Sending the request and i am getting the response. 

            JsonClientScheduleCareProvider.onload = function () {
                return this.responseText;
            };
            // error handling
            JsonClientScheduleCareProvider.onerror = function (e) {

            };
        return {
            GetApps: GetData,
        }

   }(); 
```

在下面的代码中，我进行了 JSON 调用。如果我得到响应，我应该`sendData`用响应调用函数。

```
 var jsonData = Model.GetApps();
    if (!jsonData) {
        Ti.API.warn("JsonData");
        SendData(jsonData);
    } 
```

我面临的问题是在`jsonData`得到我的响应之前，`SendData`被调用了。只有在收到响应时，我才需要执行 SendData 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:57:47.713

您需要等到您的回复送达。为此目的使用`callback`功能。

尝试这样的事情：

```
var Model= function () {

    function GetData( callback ) {    
        // Sending the request and i am getting the response. 

        JsonClientScheduleCareProvider.onload = function () {
            callback( this.responseText );
        };
        // error handling
        JsonClientScheduleCareProvider.onerror = function (e) {
            callback( null );
        };
    }
    return {
        GetApps: GetData,
    }

}(); 

Model.GetApps( function(jsonData){
   if (!jsonData) {
    Ti.API.warn("JsonData");
    SendData(jsonData);
   }
} ); 
```

# php - 使用命名占位符设置 PDO/MySQL LIMIT

> ID：10617894
> 
> 赞同：5
> 
> 时间：2012-05-16T11:50:33.113
> 
> 标签：php, mysql, pdo

我在绑定`LIMIT`SQL 查询的一部分时遇到问题。这是因为查询是作为字符串传递的。我在这里看到[了另一个处理绑定参数的 Q](https://stackoverflow.com/questions/2269840/php-pdo-bindvalue-in-limit)，没有处理数组中的命名占位符。

这是我的代码：

```
public function getLatestWork($numberOfSlides, $type = 0) {

$params = array();
$params["numberOfSlides"] = (int) trim($numberOfSlides);
$params["type"] = $type;

$STH = $this->_db->prepare("SELECT slideID 
    FROM slides
    WHERE visible = 'true'
        AND type = :type
    ORDER BY order
    LIMIT :numberOfSlides;");

$STH->execute($params);

$result = $STH->fetchAll(PDO::FETCH_COLUMN);

return $result;        
} 
```

我得到的错误是：`Syntax error or access violation near ''20''`（20 是 的值`$numberOfSlides`）。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T12:11:08.237

问题在于`execute() quotes the numbers`并将其视为字符串：

来自手册 - 一个包含与正在执行的 SQL 语句中的绑定参数一样多的元素的值数组。所有值都被视为 PDO::PARAM_STR。

```
<?php 
public function getLatestWork($numberOfSlides=10, $type=0) {

    $numberOfSlides = intval(trim($numberOfSlides));

    $STH = $this->_db->prepare("SELECT slideID
                                FROM slides
                                WHERE visible = 'true'
                                AND type = :type
                                ORDER BY order
                                LIMIT :numberOfSlides;");

    $STH->bindParam(':numberOfSlides', $numberOfSlides, PDO::PARAM_INT);
    $STH->bindParam(':type', $type, PDO::PARAM_INT);

    $STH->execute();
    $result = $STH->fetchAll(PDO::FETCH_COLUMN);

    return $result;
}
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T12:05:37.753

我建议绑定参数并强制它们的类型：

```
$STH->bindParam(':numberOfSlides', $numberOfSlides, PDO::PARAM_INT);
$STH->execute(); 
```

# android - 远程将按钮添加到 android 应用程序布局

> ID：10617897
> 
> 赞同：0
> 
> 时间：2012-05-16T11:50:41.707
> 
> 标签：android, android-layout

假设我已经在我的设备上安装了一个应用程序 - 现在是否可以在它的某些布局中添加一个按钮，而无需使用插件/服务之类的东西重新部署整个应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:54:09.950

您的应用程序必须具有下载其他界面组件的内置功能。

但是，没有标准的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:54:16.883

不...这不能完成...每次您需要在模拟器或硬件设备上重新安装应用程序时，您都无法对应用程序进行部分更新

# image - Wordpress - 直接链接文章的缩略图（不上传 img）

> ID：10617902
> 
> 赞同：0
> 
> 时间：2012-05-16T11:50:59.990
> 
> 标签：image, wordpress, cdn, posts, article

通过 wordpress 的文章，您可以从计算机上传图片（特色图片），但是如何设置以便我可以指定来自任何其他来源的图片的完整 url？要接收用户发布的图片，不仅来自我的网站，还来自任何其他 CDN？

英语不是我的母语，抱歉语义错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:21:38.713

你是说这个功能吗？（“添加媒体”窗口 中的“*来自 URL ”选项卡）*![在此处输入图像描述](../Images/4f21dd7da59592a8d9c5aa482416eb35.png)

# .net - 指定的演员表无效。Linq 中的存储过程

> ID：10617908
> 
> 赞同：0
> 
> 时间：2012-05-16T11:51:15.027
> 
> 标签：.net, linq, sql-server-2008, c#-4.0

你好下面是我在 C# 中的代码

```
var a = 
from c in HRM_dc.uspCalculateRiskMatrix(CashPrice, InputAPH, Bushels, PercentageCover, BasicEstimate, CallStrike, CallBu, CallPremium,PutStrike, PutBu, PutPremium, TotalAcres, AvgPrice, PerAcreProductionCost, SpringPrice)

                            select new
                            {
                                bushels = c.Bushel,
                                row1 = c._0_00.Value

                            };
                    gvRisk.DataSource = a;
                    gvRisk.DataBind(); 
```

请帮助我为什么会发生此错误

存储过程

```
ALTER PROC [dbo].[uspCalculateRiskMatrix]

@CashPrice MONEY, @InputAPH INT, @Bushels INT, @PercentageCover FLOAT, @BasicEstimate FLOAT, 

@CallStrike FLOAT, @CallBu INT,

@CallPremium FLOAT, @PutStrike FLOAT, @PutBu INT, @PutPremium FLOAT, @TotalAcres FLOAT, @AvgPrice

 MONEY, @PerAcreProductionCost MONEY,

@SpringPrice MONEY

AS

BEGIN

SET NOCOUNT ON

DECLARE @BushelInterval INT, @BushelRange INT, @BushelValueCounter INT

DECLARE @PriceInterval FLOAT, @PriceRange INT, @PriceValueCounter FLOAT

DECLARE @CurrRow INT

IF 1 = 2

BEGIN

SELECT NULL AS Bushel, NULL AS [0.00], NULL AS [1.00], NULL AS [2.00], NULL AS [3.00], NULL AS [4.00]

,NULL AS [5.00], NULL AS [6.00], NULL AS [7.00], NULL AS [8.00], NULL AS [9.00], NULL AS [10.00]

END

CREATE TABLE #tblTemp (Bushel VARCHAR(30), [0.00] FLOAT, [1.00] FLOAT, [2.00] FLOAT, [3.00] FLOAT, 

[4.00] FLOAT

, [5.00] FLOAT, [6.00] FLOAT, [7.00] FLOAT, [8.00] FLOAT, [9.00] FLOAT, [10.00] FLOAT)

SET @BushelInterval = 10

SET @BushelRange = 5

SET @BushelValueCounter = 0

SET @PriceInterval = 0.15

SET @PriceRange = 5

SET @PriceValueCounter = 0

SET @CurrRow = 1

DECLARE @tblBushelRow TABLE (ID INT IDENTITY(1,1), BushelValue INT)

DECLARE @tblPriceCol TABLE (ID INT IDENTITY(1,1), CashPrice MONEY)

CREATE TABLE #tblMatrix (ID INT IDENTITY(1,1), Bushel VARCHAR(30), CashPrice MONEY, CalValue FLOAT)

INSERT INTO @tblBushelRow (BushelValue) VALUES(@Bushels)

WHILE @CurrRow <= @BushelRange
BEGIN

SET @BushelValueCounter = @BushelValueCounter + @BushelInterval

INSERT INTO @tblBushelRow (BushelValue) VALUES(@Bushels + @BushelValueCounter)

INSERT INTO @tblBushelRow (BushelValue) VALUES(@Bushels - @BushelValueCounter)

SET @CurrRow = @CurrRow + 1

END

SET @CurrRow = 1

INSERT INTO @tblPriceCol (CashPrice) VALUES(@CashPrice)

WHILE @CurrRow <= @PriceRange

BEGIN

SET @PriceValueCounter = @PriceValueCounter + @PriceInterval

INSERT INTO @tblPriceCol (CashPrice) VALUES(@CashPrice + @PriceValueCounter)

INSERT INTO @tblPriceCol (CashPrice) VALUES(@CashPrice - @PriceValueCounter)

SET @CurrRow = @CurrRow + 1
END

INSERT INTO #tblMatrix (Bushel, CashPrice)

SELECT T1.BushelValue, T2.CashPrice FROM @tblBushelRow T1 CROSS JOIN @tblPriceCol T2 ORDER BY 

T1.BushelValue DESC, T2.CashPrice ASC

--SELECT * FROM #tblMatrix

UPDATE #tblMatrix SET CalValue = dbo.udfGetCornMatrixValue(CashPrice, @InputAPH, Bushel, 

@PercentageCover, @BasicEstimate, @CallStrike, @CallBu, @CallPremium,

@PutStrike, @PutBu, @PutPremium, @TotalAcres, @AvgPrice, @PerAcreProductionCost, @SpringPrice)

DECLARE @cols NVARCHAR(MAX), @query NVARCHAR(4000)

SELECT @cols = (SELECT STUFF((SELECT DISTINCT ', '+QUOTENAME(CashPrice) FROM #tblMatrix FOR XML PATH

('')),1,1,''))

--print @cols

SET @query = N'SELECT DISTINCT ''Bushel'', '+@cols +'FROM(SELECT Bushel, CashPrice FROM #tblMatrix) p

PIVOT(SUM(CashPrice) FOR CashPrice IN( '+@cols +' )) AS pvt;'

INSERT INTO #tblTemp(Bushel, [0.00], [1.00], [2.00], [3.00], [4.00], [5.00], [6.00], [7.00], [8.00], [9.00], [10.00])

EXECUTE(@query)

SET @query = N'SELECT Bushel, '+@cols +'FROM(SELECT CAST(Bushel AS VARCHAR) AS Bushel, CashPrice, CalValue FROM #tblMatrix) p
PIVOT(SUM(CalValue) FOR CashPrice IN( '+@cols +' )) AS pvt;'

INSERT INTO #tblTemp(Bushel, [0.00], [1.00], [2.00], [3.00], [4.00], [5.00], [6.00], [7.00], [8.00], [9.00], [10.00])

EXECUTE(@query)

SELECT Bushel, [0.00], [1.00], [2.00], [3.00], [4.00], [5.00], [6.00], [7.00], [8.00], [9.00], [10.00] FROM #tblTemp

DROP TABLE #tblMatrix, #tblTemp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:06:07.630

这里的代码实在是*太多了*——SP 不是一本好书……

但是根据您为响应 SLaks 的评论而给出的堆栈跟踪，您尝试将存储过程返回的列中的任何值都不是整数。

我将猜测它是`[0.00]`列 - 在这种情况下，当您访问`c._0_00.Value`. 从你正在做的事实来看`.Value`，我的猜测是它的类型是`int?`? 如果它是 null （`DBNull`在底层数据读取器中），那么我认为你不会得到强制转换异常，但我可能是错的。因此我认为实际值是非空字符串或其他值。

如果问题是空值，那么`where`linq 语句上的基本子句就可以了。将其粘贴`select new`在行前：

```
where c._0_00 != null 
```

事实上，你应该把它放在任何地方，除非你能保证 no`NULL`永远不会出现在该列中。

但是，如果它是返回值的基础数据类型，那么您应该考虑修改 SP 以确保它*始终*在这些列中返回一个 int。

最好的办法是在 Management Studio 中使用相同的参数运行 SP 并查看结果集。从中会很明显。

# excel - 从 Excel 中的长列中提取序列值

> ID：10617912
> 
> 赞同：-1
> 
> 时间：2012-05-16T11:51:38.057
> 
> 标签：excel

我有一个 Excel 电子表格，其中包含一列 150 行，我需要提取第 1、13、25、37、49、61 和 73 行的值并将这些值放在一列中。我还需要提取第 2、14、26、38、50 和 74 行的值并将这些值放在单独的列中。

这是我的输入和输出列的示例：

![带有示例数据的电子表格](../Images/93ba221c194078cca5f7401fb7acc462.png)

假设我的输入列 A 由 10 行组成。我想提取行（n、n+2、n+4、n+6 和 n+8）的值，其中 n=1 到 8。B、C 和 D 是我的输出列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:23:23.470

试试`index(array, row, [column])`。引用您需要从中提取的列，然后按您想要的顺序在单独的列中列出行。例如，

```
 A          B               C                       D
 1 Name      Grade      =index(A2:A4,D2)     Row Referenced in Array
 2 Dan         B             Stacy                     2
 3 Stacy       D              Dan                      1
 4 Jorge       A             Jorge                     3 
```

# javascript - 如何在 Safari 的地址栏中运行 javascript（外部 url）

> ID：10617921
> 
> 赞同：1
> 
> 时间：2012-05-16T11:52:19.900
> 
> 标签：javascript

我需要在地址栏中运行 javascript。js 代码包含在外部 URL 中。

```
javascript:(a = (b = document).createElement(“script”)).src = “//domain.com/hi.js”, b.body.appendChild(a); void(0) 
```

上面的代码适用于 IE、firefox 和 chrome，但不适用于 SAFARI...有人帮我在 safari 中完成这项工作，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:15:11.917

# git - 使用不带参数的 `git pull` 时意外合并了其他分支

> ID：10617924
> 
> 赞同：2
> 
> 时间：2012-05-16T11:52:29.777
> 
> 标签：git, merge, branch, git-pull

不知道更好，我总是幸福地使用`git pull`（没有参数）来获取远程更新。

现在我们正在使用分支，这又回到了困扰我的地方。

执行完之后`git pull`，我注意到我的本地 master 也已与其他分支合并，而在远程，分支未合并。

我试图弄清楚这是怎么发生的，这样我就可以避免将来再次这样做，但到目前为止还没有运气。

我没有在我的 .git/config 文件中放任何奇怪的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:49:18.487

> 所以当我做 git pull 时，它应该将其他分支与当前分支合并？

否：`git pull`只会将当前签出的分支与其远程跟踪分支“ `origin/branch`”合并。
看：

*   “[很难理解 git-fetch](https://stackoverflow.com/questions/1070496/having-a-hard-time-understanding-git-fetch) ”。
*   “[远程跟踪分支和远程分支有什么区别？](https://stackoverflow.com/questions/9016465/what-is-the-difference-between-a-remote-tracking-branch-and-a-branch-on-a-remot) ”

另请参阅“ [“跟踪分支”和“远程跟踪分支”</a>”：](http://www.gitguys.com/topics/tracking-branches-and-remote-tracking-branches/)

 [![git 拉](../Images/52f6d70fadd0699a0597d7f68efcad3d.png)

* * *](http://www.gitguys.com/topics/tracking-branches-and-remote-tracking-branches/) 

[即使您可以声明多个遥控器，您也不能在一个步骤中从所有遥控器中拉出（请参阅“](http://www.gitguys.com/topics/tracking-branches-and-remote-tracking-branches/)[从多个远程位置拉/推](https://stackoverflow.com/questions/849308/pull-push-from-multiple-remote-locations)”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:10:25.983

看到[这个答案](https://stackoverflow.com/a/292359/34088)：

> 用最简单的术语来说，“git pull”会执行“git fetch”，然后是“git merge”。

在未来，只是`git fetch`代替`git pull`.

**[原始答案]**您所经历的可能是正确的行为（以及您想要的行为）。

想象一下这种情况：开发人员 X 已经完成了她分支中的一些重要功能。她将它合并回她的主人。

当她推动它时，当你拉动时会发生什么？

当前的解决方案是更新您的主分支副本，以便您查看并获取她的所有工作（功能+合并）。

当您在 master 分支上开发时，这可能会导致问题。

解决方案是让每个开发人员始终在一个分支中工作。要么为每个开发人员创建一个分支，要么为每个特性/错误创建一个分支。

这样，每个开发人员都可以决定何时与 master 合并（您的工作 -> master）以及何时使用 master 中的任何更改更新您的工作分支。

更多细节：

*   [一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)
*   [hginit.com](http://hginit.com/) - 这是给 Mercurial 的，但它写得很好，底层技术也很相似，所以它也适合 Git 用户阅读。

# javascript - \u00C2 未在 javascript 中定义错误？

> ID：10617925
> 
> 赞同：0
> 
> 时间：2012-05-16T11:52:31.300
> 
> 标签：javascript, jquery

我在下一行收到此错误。

```
$j(id).dateplustimepicker( "setTime" ,timeVal); 
```

你能帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:04:40.293

错误可能不在这一行，因为那里没有计算字符串常量。`id`例如，如果包含该值，则不会出现此错误。

当您再次收到错误时，打开浏览器的 JavaScript 控制台并查看完整的堆栈跟踪。最里面的框架是你需要看的地方。

**[编辑]**既然你在 中找到了这个字符`jquery-dateplustimepicker.js`，这就指向了问题的真正原因。

您计算机上的每个文本文件都有一个编码。但没有办法分辨是哪一个。您遇到的问题意味着：您的文本/JS 文件采用 UTF-8 编码，但您的网络服务器使用不同的编码将其发送到浏览器。然后浏览器尝试读取它，但发现奇怪的字符 -> 错误。

错误的另一个原因是有人编辑了文件，使用了错误的编码。这可能在 Windows 上发生，例如，当您使用 Cp-125x 加载文件并将其保存为 UTF-8 时。

要检查，请从 Web 服务器下载文件并与原始文件进行二进制比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:51:25.957

我得到了答案，但我忘了在这里上传....实际上我遇到了这个问题，因为 jquery 的标准库文件中存在 Â 字符。文件名为 jquery-dateplustimepicker.js。字符要么需要编码，否则会产生问题。该字符必须替换为空格而不是 Â。

# javascript - window.open 在 IE8 中不起作用

> ID：10617927
> 
> 赞同：0
> 
> 时间：2012-05-16T11:52:31.613
> 
> 标签：javascript, internet-explorer, internet-explorer-8

我正在使用 IE8，打开一个我正在使用此代码的窗口，

```
window.open(url,"STO"); 
```

它可以在除 IE8 之外的其他浏览器中运行。

请告诉我IE8有什么问题？我也尝试关闭popupblocker。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:17:16.917

仅供参考：我也遇到了这个问题。我正在生成 PDF，然后使用 window.open(url,'_blank') 在新窗口中打开 PDF。它在开发和测试中的 IE8 中运行良好，但在生产中，窗口会自动打开然后关闭。我搜索了 net\stackoverflow，但没有找到与问题实际匹配的解决方案。

事实证明，客户端 Intranet 上的应用程序链接是通过 IP 地址而不是名称。IE 将通过 IP 寻址的站点视为位于 Internet 区域中，即使它们实际上位于 Intranet 上。我让客户的管理员更改了链接，弹出窗口工作得很好。

我确信在不同区域中有管理此行为的安全设置，但我不想让 Internet 区域设置不那么严格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-23T06:35:31.407

我已经尝试过使用此代码。它对我来说非常有效。

```
var w =window.open(url,'_blank');
w.location.href = url; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:03:13.117

如果您正在运行与此处显示的代码相同的代码，那么让我告诉您代码没有任何问题。可能是您的弹出窗口阻止程序已打开尝试将其关闭然后重试。您可以通过工具-> Internet 选项-> Pricacy(tab)-> 取消选中弹出窗口阻止程序选项将其关闭。希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T12:11:02.960

> 请检查您的 URL 变量

试试这个

```
window.open("goole.com", "google"); 
```

# sorting - 根据自定义比较器排序

> ID：10617928
> 
> 赞同：3
> 
> 时间：2012-05-16T11:52:37.057
> 
> 标签：sorting, map, vector, clojure

我有一张看起来像这样的地图：

```
user> (frequencies "aaabccddddee")
{\a 3, \b 1, \c 2, \d 4, \e 2} 
```

而且我想要一个函数，它可以根据每个字符出现在我作为参数传递的字符串中的顺序对键/值对进行排序。

像这样的东西：

```
user> (somesort "defgcab" (frequencies "aaabccddddee"))
[[\d 4] [\e 2] [\c 2] [\a 3] [\b 1]] 
```

*（在上面的例子中，'f' 和 'g' 没有出现在映射中，因此它们被忽略了。保证字符串——在这个例子中是“defgcab”——应该包含映射中的每个字符/键)*

只要对其进行排序，生成的集合就无关紧要。

我已经尝试了几件事，但找不到一种方法来完成这项工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T02:12:00.570

我更喜欢使用`sort-by`它来执行排序逻辑，并为您的集合创建一个自定义比较器：

```
(defn sorter [coll] (zipmap coll (range)))

(sort-by (comp (sorter "defgcab") key) 
         (frequencies "aaabccddddee"))

;=> ([\d 4] [\e 2] [\c 2] [\a 3] [\b 1]) 
```

**编辑**：这具有进一步的优势，您可以根据需要将收藏保留为地图，尽管您必须做更多的工作：

```
(defn map-sorter [coll]
  (let [order (zipmap coll (range))]
    (fn [a b]
      (compare (order a) (order b)))))

(into (sorted-map-by (map-sorter "defgcab"))
      (frequencies "aaabccddddee"))

;=> {\d 4, \e 2, \c 2, \a 3, \b 1} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:04:16.517

```
(defn somesort [str st] 
    (filter (fn [[k v]] v ) (map (fn [c] [c (get st c)]) str)) ) 
```

这是如何工作的：

*   对该字符串中的每个字符使用“排序字符串”上的映射，从集合中获取相应的键值作为向量
*   使用filter，过滤掉值为nil的元素

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T13:27:04.340

Ankur 的解决方案用 表示`for`，这可能更容易阅读：

```
(defn somesort [str st] 
    (for [c str :let [v  (get st c)] :when v] [c v])) 
```

假设自定义排序字符串中的字符是唯一的，则此方法有效。

排序字符串被迭代一次，它的每个字符都在地图中查找。如果您确保传递给函数的映射是哈希映射，那么这是线性的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T14:06:57.727

您还可以使用which`find`返回： `[k v]``map`

```
(let [fs (frequencies "abbccc")]
  (map #(find fs %) "defgcab") 
```

# google-analytics - 谷歌分析和事件名称

> ID：10617936
> 
> 赞同：1
> 
> 时间：2012-05-16T11:53:19.590
> 
> 标签：google-analytics

对于事件跟踪，是否有必要首先在管理员中添加事件类别、操作和标签，或者可以在代码中添加这些（如文档所示）？如果不需要添加管理员，有什么办法可以阻止某人通过 Web 控制台或 node.js 用无用的类别/操作向分析发送垃圾邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:17:58.273

没有管理选项来定义可接受的事件类别、操作和标签。这一切都是通过 _trackEvent 在代码级别完成的。您在事件跟踪调用中放置的任何内容都将显示在 GA 中。

正如您所提到的，访问者可以在控制台中触发事件跟踪代码。根据我的经验，这不是很常见，也不是什么值得担心的问题。您对自定义变量甚至浏览量跟踪（触发虚拟浏览量）也有同样的问题。

您可以在 GA 中使用配置文件过滤器来定位和操作事件数据（排除、包含等）。

# iphone - 如何在 iPhone SDK 中播放 360º 视频

> ID：10617937
> 
> 赞同：5
> 
> 时间：2012-05-16T11:53:19.907
> 
> 标签：iphone, ios, video, 360-degrees

在投反对票之前，请阅读问题，我也看到其他问题，但没有发现有用。

我当前的应用程序有一个要求，我需要播放 360º 视频（如全景）。应用商店中的一个应用程序名称相同“GoPano”

[http://itunes.apple.com/ke/app/gopano/id459463884?mt=8](http://itunes.apple.com/ke/app/gopano/id459463884?mt=8)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T07:00:34.943

我在过去的 2.5 年中创建了一个框架，它可以在 iOS 上播放 360° 全景视频播放，类似于您的要求。目前它与 4.3 至 6.x 版本兼容。

您可以在[www.panframe.com](http://www.panframe.com)上下载它，然后尝试是否这是您要查找的内容。

该框架提供了一个 UIView，您可以轻松地将其添加为子项和一个资产类，您可以将其连接到视图并负责播放球形全景内容。你可以看看我使用的[界面。](http://www.panframe.com/sdk/ios/api/1.8/index.html)

您可以像这样动态地使用它，例如在运行时在 UIViewController 中：

```
 // initialize an PFView
    PFView pfView = [PFObjectFactory viewWithFrame:[self.view bounds]];
    pfView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);

    // set the appropriate navigation mode PFView
    [pfView setNavigationMode:PF_NAVIGATION_MOTION];

    // add the view to the current stack of views
    [self.view addSubview:pfView];
    [self.view sendSubviewToBack:pfView]; 
```

当您想要播放 360 度视频资源（来自文件 URL）时，您需要执行以下操作：

```
 PFView pfAsset = [PFObjectFactory assetFromUrl:[NSURL fileURLWithPath:filePath] observer:(PFAssetObserver*)self];

    if ([pfAsset getStatus] != PF_ASSET_ERROR)
    {
        [pfView displayAsset:pfAsset];
        [pfAsset play];
    } 
```

**更新**：如果有人想在科尔多瓦应用程序中使用它，你可以在[这里找到插件](https://github.com/jumpbytehq/cordova-jb-plugin-panframe)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-07T14:31:30.253

在创建自己的 360° 视频播放器时，我发现这些存储库很有用：

*   [https://github.com/hanton/HTY360Player](https://github.com/hanton/HTY360Player)
*   [https://github.com/Aralekk/simple360player_iOS](https://github.com/Aralekk/simple360player_iOS)
*   [https://github.com/nomtek/spherical_video_player_ios](https://github.com/nomtek/spherical_video_player_ios)

* * *

最后一个是我的，[这里](https://www.nomtek.com/video-360-in-opengl-ios-part-1-3d-scene/)是它的描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T22:18:49.530

Google 最近发布了适用于 IOS 的 CardboardSDK，支持 360 视频播放。

[https://developers.google.com/cardboard/ios/](https://developers.google.com/cardboard/ios/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:50:07.100

我发现它是 GoPano 的嵌入式播放器。他们所做的是从 Java 脚本和 flex 播放视频。

# regex - 删除非 ASCII 字符

> ID：10617938
> 
> 赞同：1
> 
> 时间：2012-05-16T11:53:23.717
> 
> 标签：regex, asp-classic

我有一个问题，奇数字符（来自 Word 等）进入数据库中的一个字段，然后当我显示该字段时，它显示的是虚假字符。

是否可以使用 RegEx 删除任何非 ASCII 字符？显然，我希望人们仍然能够使用任何特殊字符，例如 !@£$%^&*()_-+= 等，而不是非 ASCII 字符。

如果有人可以提供帮助，那就太好了！

非常感谢！

更新：这是在 CLASSIC ASP 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:45:01.633

为了完成这项任务，您需要构建各种正则表达式并在将记录插入数据库之前通过子例程调用执行它们。

这是[1stclassmedia](http://www.1stclassmedia.co.uk/developers/clean-ms-word-formatting.php)解释的摘录。

```
str = str.replace( /\s*FONT-FAMILY:[^;"]*;?/gi, "" ) ;
str = str.replace(/<(\w[^>]*) class=([^ |>]*)([^>]*)/gi, "<$1$3") ;
str = str.replace( /<(\w[^>]*) style="([^\"]*)"([^>]*)/gi, "<$1$3" ) ;
str = str.replace( /\s*style="\s*"/gi, '' ) ; 
str = str.replace( /<SPAN\s*[^>]*>\s*&nbsp;\s*<\/SPAN>/gi, '&nbsp;' ) ; 
str = str.replace( /<SPAN\s*[^>]*><\/SPAN>/gi, '' ) ; 
str = str.replace(/<(\w[^>]*) lang=([^ |>]*)([^>]*)/gi, "<$1$3") ; 
str = str.replace( /<SPAN\s*>(.*?)<\/SPAN>/gi, '$1' ) ; 
str = str.replace( /<FONT\s*>(.*?)<\/FONT>/gi, '$1' ) ;
//some RegEx code for the picky browsers
var re = new RegExp("(<P)([^>]*>.*?)(<\/P>)","gi") ;
str = str.replace( re, "<div$2</div>" ) ;
var re2 = new RegExp("(<font|<FONT)([^*>]*>.*?)(<\/FONT>|<\/font>)","gi") ; 
str = str.replace( re2, "<div$2</div>") ;
str = str.replace( /size|SIZE = ([\d]{1})/g, '' ) ; 
```

# matlab - 在 MATLAB 中绘制 256 个正方形/矩形

> ID：10617944
> 
> 赞同：2
> 
> 时间：2012-05-16T11:53:42.187
> 
> 标签：matlab, image-processing, printing, plot, matlab-figure

我正在尝试使用 MATLAB 矩形函数绘制 256 个小方块。如果我正在绘制 10 个正方形，那么以下方法可以正常工作：

```
for i=1:2:40

rectangle('Position',[5,3+i,0.3,0.3],...
      'Curvature',[0,0],...
     'LineStyle','-', 'faceColor', 'black')

end

axis off; 

daspect([1,1,1]) 
```

![在此处输入图像描述](../Images/2f27668a5b836c775cbb0e79b79b07fd.png)

但是当我将 for 循环的最后一个值更改为 512（绘制 256 个正方形）时，它无法正确打印：

![在此处输入图像描述](../Images/fa51b7cc772fe3cac41c4b9962ea954c.png)

这是上图一部分的放大版本： ![在此处输入图像描述](../Images/5564700326fbce4385ba85d093ca309c.png)

这张图片清楚地显示了某处的某些地方是错误的，因为正方形的边并不完全相等，并且**正方形的尺寸变得越来越小，因为没有更高的数字。of squares** : 谁能帮我画出**尺寸不缩小**的完美正方形，？（我的内存没有任何问题，我可以容忍多个页面向下滚动以覆盖整个正方形）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:39:33.060

这是一种经典的[莫尔效应](http://en.wikipedia.org/wiki/Moir%C3%A9_pattern)。您不能在显示器上显示那么多矩形，因为没有足够的像素。Matlab 为您做了一些下采样。因此，你得到另一个频率，它原本不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T12:48:41.163

我尝试了您的代码，即使循环进行 512 次迭代，它也能正常工作 - 当您放大最终的 matlab 图形时。您描述的伪影可能是由显示器分辨率或导出到非矢量文件时的低分辨率引起的。

尝试将图像导出为矢量文件（eps 或 svg），以查看放大时一切看起来都很好。

# database - Eclise 中的 Maven 和 JPA (Dali) 项目 - 逆向工程师

> ID：10617950
> 
> 赞同：0
> 
> 时间：2012-05-16T11:53:58.900
> 
> 标签：database, eclipse, jpa, reverse-engineering, dali

我想在 Eclipse 中创建一个 JPA 项目，但同时将其作为具有典型 maven 源目录结构的 Maven 项目。

这可以以某种方式完成吗？

我只想使用 Dali 功能将我的数据库结构反向工程为 JPA bean，但如果我使用仅 Maven 项目，我会收到一个错误，即该项目不是 JPA 项目。

有没有更简单的方法来对我的 bean 进行逆向工程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:01:02.213

[当您使用m2e Eclipse 插件](http://www.eclipse.org/m2e/)时，这应该是可能的。文档有点稀缺，但它的工作原理就像您从 Maven 命令行中了解的一样。我建议使用“New Maven Project”向导创建项目以帮助您入门。

您还应该能够为同一项目激活 JPA 特性（一个项目可以具有任意数量的不同“特性”）。

如果它不起作用，请打开一个新问题，提供特定信息，例如错误消息。

PS：您将需要 m2e 1.200 和 Eclipse 3.7.2。

# javascript - Chrome 不会删除会话 cookie

> ID：10617954
> 
> 赞同：214
> 
> 时间：2012-05-16T11:54:14.467
> 
> 标签：javascript, session, google-chrome, cookies

我正在尝试在 javascript 中设置会话 cookie，如下所示：

```
document.cookie = 'name=alex; path=/' 
```

但是即使我退出浏览器并再次启动它，Chrome 也不会删除它。

我签入了 Firefox 和 Opera，两者都按预期工作——它们在浏览器退出时删除了会话 cookie。

Chrome只是忽略过期规则吗？

我检查了多个操作系统，发现会话 cookie 在 Windows XP 和 Ubuntu 的 Chrome 上被删除，但在 Mac OSX Lion 中却没有。

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2012-05-27T07:42:29.927

这可能是由于将 Chrome 设置为**您上次中断的地方继续**。

![在此处输入图像描述](../Images/64e2147070c93135bf53475db3e6eaf2.png)

### 进一步阅读

*   [错误报告：Chrome 不会删除临时 cookie – 即当我关闭所有浏览器 Windows 时不会自动注销我](https://productforums.google.com/d/topic/chrome/9l-gKYIUg50/discussion)
*   [Chromium 中的问题 128513：Chrome 进程关闭时未清除会话 Cookie](https://code.google.com/p/chromium/issues/detail?id=128513)
*   [问题 128567：仅会话 cookie 不会删除](https://bugs.chromium.org/p/chromium/issues/detail?id=128567)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-08T13:03:27.573

我刚刚在“浏览会话结束”时设置为过期的 cookie 遇到了同样的问题。

不幸的是它没有，所以我玩了一下浏览器的设置。

原来，在浏览器关闭时记住打开的标签的功能是问题的根源。（该功能被命名为“启动时” - “从我离开的地方继续”。至少在当前版本的 Chrome 上）。

Opera 和 Firefox 也会发生这种情况。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-09-25T22:26:50.783

我刚遇到这个问题。我注意到，即使在我关闭浏览器后，我也有许多 Chrome 进程正在运行。原来这些都是来自我的 Chrome 扩展程序。

在高级设置下，我未选中`'Continue running background apps when Google Chrome is closed'`，我的会话 cookie 开始正常工作。

对于我们所有一直在编码期望会话 cookie 会在用户完成浏览时被清除的开发人员来说，这仍然是一个痛苦。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-02-11T01:49:24.847

我必须在 Chrome 的高级设置下都未选中：

*   '当谷歌浏览器关闭时继续运行后台应用'
*   “从我离开的地方继续”，“在启动时”

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-10-24T08:16:46.633

这可能是因为关闭浏览器后 Chrome 仍在后台运行。尝试通过执行以下操作禁用此功能：

1.  打开 chrome://settings/
2.  点击“显示高级设置...”
3.  向下导航到系统部分并禁用“在 Google Chrome 关闭时继续运行后台应用程序”。这将强制 Chrome 完全关闭，然后删除会话 cookie。

但是，我认为 Chrome 应该在开始而不是关闭时检查并删除以前的会话 cookie。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-21T21:56:33.653

一个简单的替代方法是使用新的[sessionStorage](http://dev.w3.org/html5/webstorage/#the-sessionstorage-attribute)对象。根据评论，如果您选中了“从我离开的地方继续”，则 sessionStorage 将在重新启动之间持续存在。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-05T21:04:18.310

我在 Windows 8.1 中遇到了与“document.cookie”相同的问题，Chrome 删除 cookie 的唯一方法是从任务管理器中关闭它（这不是一个真正花哨的方式），所以我决定从后端管理 cookie 或使用一些东西像“js-cookie”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-14T05:49:38.157

您是否尝试过删除 Google Chrome 中的环聊扩展程序？因为即使您关闭所有窗口，它也会强制 chrome 继续运行。

我也面临这个问题，但现在解决了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-12-21T10:50:55.807

这个问题是因为你使用的是chrome的`Continue where I left off`and `Continue running background apps when Google Chrome is closed`feature（目前我的版本是96）。

请考虑将它们关闭（以测试功能）。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-03-25T18:41:50.720

去`chrome://settings/content/cookies?search=cookies`

启用`Clear cookies and site data when you quit Chrome`.

为我工作

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2018-01-17T03:00:04.380

如果您为 php 会话 cookie 设置域，浏览器似乎会保留它 30 秒左右。关闭选项卡或浏览器窗口似乎并不重要。

因此，如果您使用如下方式管理会话，则可能会导致 cookie 在浏览器中挂起的时间比预期的要长。

```
ini_set("session.cookie_domain", 'www.domain.com'); 
```

我发现摆脱挂起的 cookie 的唯一方法是删除设置会话 cookie 域的代码行。还要注意 session_set_cookie_params() 函数。域前缀的点似乎也与该问题无关。

`PHPSESSID=b855ed53d007a42a1d0d798d958e42c9`这可能是一个 php 错误，因为 php在会话被销毁后会在标头中发送会话 cookie（即）。或者这可能是服务器传播问题，但我不这么认为，因为我的测试是在私有服务器上进行的。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2019-03-07T20:31:43.257

我刚刚遇到了 Chrome 存储会话 ID 的问题，但我不喜欢禁用选项从我离开的地方继续的想法。我查看了网站的 cookie，发现登录页面的 Session ID cookie。删除它并没有解决我的问题。我搜索域，发现域上有另一个会话 ID cookie。手动删除*两个*会话 ID cookie 解决了问题，我没有关闭并重新打开可能已恢复 cookie 的浏览器。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2017-12-01T06:35:38.040

解决方案是使用`sessionStorage`，仅供参考：[https ://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage)

* * *

## 回答 #14

> 赞同：-9
> 
> 时间：2014-11-28T16:18:09.653

如果您以不正确的方式设置和取消设置 cookie，Google chrome 就会出现问题。这是php代码。认为这会给你的想法。

**设置 cookie**

```
setcookie('userLoggedIn', 1, 0, PATH); 
```

**错误的方式，将无法正常工作（注意缺少 PATH）**

```
setcookie('userLoggedIn', 0, time()-3600); 
```

**正确的方法解决了谷歌浏览器上的问题**

```
setcookie('userLoggedIn', 0, time()-3600, PATH); 
```

# php - 我的网站的 MsWord 所见即所得编辑器

> ID：10617957
> 
> 赞同：0
> 
> 时间：2012-05-16T11:54:20.913
> 
> 标签：php, ms-word, wysiwyg

我想创建一个网站，用户可以在其中打开各种上传的 Ms-Word .doc 或 .docx 文件，即时编辑它们，然后通过任何 WYSIWYG MsWord 类编辑器保存它们。界面应该与 MsWord 非常相似。

你有什么想法我应该使用哪个编辑器吗？FCKEditor、TinyMCE 等是编辑器，但它们无法打开 .doc 或 .docx 文件。

PLZ帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:56:52.947

这不是一件容易的事，你最好使用像谷歌文档这样的第三方来做到这一点。

他们在[这里](https://developers.google.com/google-apps/documents-list/)有一个 API 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:03:39.647

所有在线所见即所得编辑器主要支持`HTML`和`RTF`格式。

按照@fire，Google 的建议尝试第 3 方 API。

您也可以使用 SkyDrive API，它可以为您提供在线 MS Office 界面。参考[这个](https://stackoverflow.com/a/7638882/803285)答案。

# android - Android 如何从 .aspx 提要中获取提要？

> ID：10617963
> 
> 赞同：0
> 
> 时间：2012-05-16T11:54:53.047
> 
> 标签：android, rss, feed

当我尝试从 .aspx 提要中读取数据时，该应用程序给了我一个错误。我认为是我使用的 XmlParser 文件。与 .xml 提要一起工作正常，但是当我尝试使用它来读取该 .aspx 提要时，只会给出错误。

有什么想法可以帮忙吗？

谢谢你。

错误消息是：05-16 13:30:31.296: E/Error:(1117): PI 不能以 xml 开头（位置：java.io.StringReader@2fe98718 中的未知 xm@1:7）

XmlParser 文件的代码

```
// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:13:37.947

好的，根据我的搜索。它看起来是 BOM 编码错误。看看这两个解决方案，看看它们是否能解决您的问题。

[UTF-8 字节顺序标记](https://stackoverflow.com/questions/4938231/xml-pull-parser-error-when-declaration-present)

[丢弃 xml 标头](https://stackoverflow.com/questions/4988145/why-does-this-code-keep-triggering-the-saxparseexception)

# jsf - 命令链接操作不会在 p:accordion 内触发

> ID：10617964
> 
> 赞同：0
> 
> 时间：2012-05-16T11:54:53.590
> 
> 标签：jsf, commandlink

我在 primefaces 向导的手风琴内有命令链接，它们都采用相同的形式 - 我没有嵌套形式，但命令链接的动作没有被触发。这是我的页面：

```
 <ui:define name="content">
       <h:form id="createSubject"> 
        <p:wizard flowListener="#{createWizard.flowListener}" widgetVar="wiz" showNavBar="false">  
        <p:tab id="personal" title="#{createWizard.tab1Title}">  
          ....
        </p:tab>
        <p:tab id="conclusion" title="#{createWizard.tab2Title}">  
          <p:panel header="#{createWizard.panel2Title}">  
            <p:accordionPanel value="#{createWizard.similarSubjects}" var="subject">  
                <p:tab title="#{subject.VPrenom} #{subject.VNom}"> 
                   <h:panelGrid columns="2" cellpadding="5">  
                     <h:outputText value="#{createWizard.firstName}: " />  
                     <h:outputText value="#{subject.VPrenom}" />  
                     <h:commandLink  value="#{createWizard.completeSheet}" actionListener="#{createWizard.completeSubjectSheet(subject.VIdPool)}"/>
                    </h:panelGrid>  
                 </p:tab>  
            </p:accordionPanel>  
         </p:panel>  
         </p:tab> 
         </p:wizard>
         <p:commandButton value="#{createWizard.nextButtonTitle}" onclick="wiz.next()" style="float:right;"/>
         </h:form>
        </ui:define> 
```

和我的支持bean方法：

```
 public void completeSubjectSheet(String subId){
    mk.sdc.helpers.Link link = mk.sdc.helpers.Link.getLink();
    try {
      FacesContext.getCurrentInstance().getExternalContext().redirect(link.mkLink("/POOL/view.jsp?V_ID_POOL="+subId));
    } catch (IOException ex) {
        Logger.getLogger(CreateWizard.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:06:04.413

因为 actionListener 不能接受任何参数，所以你必须使用 commandLink 的 action 属性。

**编辑**

你可以使用`h:link`或`h:outputLink`用于那个吗？喜欢

`<h:link outcome="/POOL/view.jsp?V_ID_POOL=#{subject.id}" />`

# iphone - 如何替换 UIWebView 中的 SwipeGestureRecognizer 操作

> ID：10617967
> 
> 赞同：0
> 
> 时间：2012-05-16T11:55:06.223
> 
> 标签：iphone, ios, ipad, uiwebview, uigesturerecognizer

我正在尝试在一组 5 个 UIWebViews 中呈现本地 html5 内容。这个想法是用户会滑动到 4 个方向，所以我得到了 5 个 UIWebViews 并禁用了弹跳：

```
leftWebView.scrollView.bounces = NO;
middleWebView.scrollView.bounces = NO;
rightWebView.scrollView.bounces = NO;
upWebView.scrollView.bounces = NO;
downWebView.scrollView.bounces = NO; 
```

我们假设 webviews 中不可能滚动，因为显示的 html 页面比 iPad 屏幕小。

加载这些 web 视图，以便通过移动它们的中心来平滑过渡动画。

那么有没有办法改变 UIWebView 中手势识别器执行的滑动操作？

我尝试将 4 个 SwipeGesturesRecognizers（每个方向一个）直接放在 webViews 上，但由于某种原因，当我交换引用时，手势识别器失去了对 WebViews 的跟踪：

```
UIWebView *tmp = leftWebView;
leftWebView = middleWebView;
middleWebView = rightWebView;
rightWebView = tmp; 
```

我尝试在窗口顶部的 UIView 上使用 4 个 SwipeGesturesRecognizers（每个方向一个），但现在点击被此视图阻止，因此用户无法再与可点击元素进行交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:23:34.030

您可以`UISwipeGestureRecognizer`向您的 webView 添加自定义 .. 并像这样禁用 webView 中的滚动

```
UIScrollView *scroll = [[self.webView subviews] lastObject];

if([scroll isKindOfClass:[UIScrollView class]])
{
    scroll = (UIScrollView*)scroll;
    [scroll setScrollEnabled:NO];
} 
```

# class - 为什么我们使用接口和抽象类，在什么情况下应该使用抽象类和接口

> ID：10617969
> 
> 赞同：-4
> 
> 时间：2012-05-16T11:55:08.490
> 
> 标签：class, interface, abstract

> **可能重复：**
> [使用 Java [接口/抽象类]](https://stackoverflow.com/questions/2869222/use-of-java-interfaces-abstract-classes)

为什么我们使用接口和抽象类，在什么情况下应该使用抽象类和接口？谁能用最简单的例子来解释这个.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:07:19.960

当您希望所有子类型实现不同的特定逻辑时，您希望使用接口，例如在这种情况下：

```
interface GeometricalShape{
      # only abstract methods are allowed
      GetArea();
      GetPerimeter();
} 
```

在这种情况下，每个几何形状都必须实现特定的逻辑来计算面积和周长。

当您的子类型必须实现某些特定逻辑时，您希望使用抽象类，但您仍然具有所有子类型共有的逻辑，例如在这种情况下：

```
abstract class GeometricalShape{
      name;edgeCount;
      protected GeometricalShape(name,edgeCount)

      #abstract methods
      abstract GetArea();
      abstract GetPerimeter();

      #Concrete methods
      GetName(){return name;}
      GetEdgesCount(){return edgesCount} 
```

在这个例子中，每个几何形状都必须像以前一样实现关于面积和周长的特定逻辑，但是现在所有子类型都将共享用于检索几何形状的名称和边数的通用方法，这将是多余的，在每个和每个子类。

# iphone - EKCalender 创建日历但在 iCal 中看不到

> ID：10617970
> 
> 赞同：0
> 
> 时间：2012-05-16T11:55:09.200
> 
> 标签：iphone, ios5, icalendar

我正在尝试在 iCal 中创建一个新日历。现在我可以创建一个带有某个名称的新日历。但我的问题是当我尝试创建本地日历时，我无法在日历列表中看到它。有人对此有任何想法吗？我尝试过使用所有类型的资源，但无法找到确切的解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:20:52.950

```
 NSMutableArray *arrAlarm = [[NSMutableArray alloc]init];
EKAlarm *alarm1 = [EKAlarm alarmWithRelativeOffset:3600];  
EKAlarm *alarm2 = [EKAlarm alarmWithRelativeOffset:-3600];  //86400 1 day      
[arrAlarm addObject:alarm1];
[arrAlarm addObject:alarm2];
EKEventStore *eventStore = [[EKEventStore alloc] init];
EKEvent *ekevent = [EKEvent eventWithEventStore:eventStore];
ekevent.title = strname;

NSLog(@"%@",ekevent.startDate);

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEE MMM d,yyyy"];
NSDate *date  = [dateFormatter dateFromString:strdate];

// Convert to new Date Format
[dateFormatter setDateFormat:@"YYYY-MM-DD HH:MM:SS ±HHMM"];
NSString *newDate = [dateFormatter stringFromDate:date]; 

//    dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
//    [dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease]];
[dateFormatter setDateFormat:@"hh:mm a"];

NSDate* firstDate = [dateFormatter dateFromString:time];
NSDate* secondDate = [dateFormatter dateFromString:endtime];

NSTimeInterval timeDifference = [secondDate timeIntervalSinceDate:firstDate];

// Convert to new Date Format
[dateFormatter setDateFormat:@"HH:MM"];
NSString *t11 = [dateFormatter stringFromDate:firstDate]; 
NSString *t12 = [dateFormatter stringFromDate:secondDate]; 
NSDate *dt1 = [dateFormatter dateFromString:t11];
NSDate *dt2 = [dateFormatter dateFromString:t12];    

NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"hh"];
NSString *hourstring = [NSString stringWithFormat:@"%@",
                        [df stringFromDate:dt1]];
[df setDateFormat:@"mm"];
NSString *minstring = [NSString stringWithFormat:@"%@",
                       [df stringFromDate:dt1]];
[df release];
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
NSDateComponents *components = [gregorian components: NSUIntegerMax fromDate: date];
[components setHour: [hourstring intValue]];
[components setMinute: [minstring intValue]];
[components setSecond: 00];

//    NSDate *newDate = [gregorian dateFromComponents: components];
[gregorian release];

ekevent.startDate = date;

ekevent.endDate = [[NSDate alloc] initWithTimeInterval:timeDifference sinceDate:date];
[ekevent setCalendar:[eventStore defaultCalendarForNewEvents]];
ekevent.alarms = arrAlarm;
[arrAlarm release];
NSError *err;
[eventStore saveEvent:ekevent span:EKSpanThisEvent error:&err]; 
```

试试这个代码，你会得到想要的结果。

# gwt - 如何显示浏览器在 gwt I18N 中显示的语言环境？

> ID：10617972
> 
> 赞同：0
> 
> 时间：2012-05-16T11:55:26.803
> 
> 标签：gwt, internationalization, gwt-platform

我正在对我的应用程序执行 i18n 我做了展示示例中显示的操作我正在使用列表框来显示不同的语言环境，问题是当我从一个语言环境切换到另一个语言环境时，语言环境正在改变但列表框没有显示我所在的语言环境，每次重新加载时它都会显示列表的第一个元素

这是代码：

```
@Override
    public void changeSwap() {

    final String queryParam = LocaleInfo.getLocaleQueryParam(); 
    String locale=getView().getLocale().getValue(getView().getLocale().getSelectedIndex());
        Log.info("revealed locale is"+locale);
     if (queryParam != null) {
         UrlBuilder builder = Location.createUrlBuilder().setParameter(
             queryParam, locale);
         Window.Location.replace(builder.buildString());
       } else {
         // If we are using only cookies, just reload
         Window.Location.reload();
       }
    } 
```

我没有在 listbox api 中找到任何方法来做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:39:15.587

您正在使用 Showcase ( [`ShowcaseShell.initializeLocaleBox()`](http://code.google.com/p/google-web-toolkit/source/browse/tags/2.4.0/samples/showcase/src/com/google/gwt/sample/showcase/client/ShowcaseShell.java#322)) 中的部分代码，但负责在 ListBox 中选择正确值的部分是：

```
String currentLocale = LocaleInfo.getCurrentLocale().getLocaleName();
if (currentLocale.equals("default")) {
  currentLocale = "en";
}
String[] localeNames = LocaleInfo.getAvailableLocaleNames();
for (String localeName : localeNames) {
  if (!localeName.equals("default")) {
    String nativeName = LocaleInfo.getLocaleNativeDisplayName(localeName);
    localeBox.addItem(nativeName, localeName);
    if (localeName.equals(currentLocale)) {
      localeBox.setSelectedIndex(localeBox.getItemCount() - 1);
    }
  }
} 
```

确保在将 ChangeHandler 添加到 localeBox 之前将其添加到您的代码中。

* * *

这是 Showcase 2.4.0 示例中的完整设置：

*   [Showcase.gwt.xml 21-28](http://code.google.com/p/google-web-toolkit/source/browse/tags/2.4.0/samples/showcase/src/com/google/gwt/sample/showcase/Showcase.gwt.xml#21)执行模块的语言环境设置（特别是将可用语言环境定义为“en”、“ar”、“fr”、“zh”）
*   [ShowcaseShell.ui.xml 204-206](http://code.google.com/p/google-web-toolkit/source/browse/tags/2.4.0/samples/showcase/src/com/google/gwt/sample/showcase/client/ShowcaseShell.ui.xml#204)创建 ListBox 小部件。
*   [ShowcaseShell.java 113-114、190、322-364](http://code.google.com/p/google-web-toolkit/source/browse/tags/2.4.0/samples/showcase/src/com/google/gwt/sample/showcase/client/ShowcaseShell.java#322)将可用的语言环境填充到 ListBox 中，并添加一个 ChangeHandler。

我建议创建一个简单的新 GWT 项目（起初没有 gwtp 或任何特殊的东西），然后添加这些代码。然后您可以尝试将设置迁移到您的完整项目。

# ravendb - 奇怪的行为获取记录数

> ID：10617975
> 
> 赞同：1
> 
> 时间：2012-05-16T11:55:35.413
> 
> 标签：ravendb

我知道一个查询不能超过 128 条记录，如果我使用 .Take(1024) 可以将其扩展到 1024 条，但是示例数据库上的这段代码有一个新问题：

```
var albumCount = session.Query<Album>().Count();
Console.WriteLine(albumCount);          // 246 as expected?!?

var somemoredata = session.Query<Album>();
Console.WriteLine(somemoredata.Count());    // 246 but it sould be 128
int cnt = 1;
foreach (var album in somemoredata)
{
   Console.WriteLine(cnt++.ToString() + " " + album.Id);  // repeats 128 counts
} 
```

怎么会这样？somemoredata 的计数是 246，但是 foreach 写了 128 行？！？

错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:19:00.820

`Take`正在为你做分页，这是[**默认保存**](http://ravendb.net/docs/theory/safe-by-default)原则的一部分。但`Count`应始终给出该查询的文档的实际计数。

这将确保您可以：

1.  显示所显示的数据只是信息的一部分的指示。（X 页的第 1 页）。
2.  让您知道我们需要在您需要时进行分页。

# scala - 带选项参数的二元运算符

> ID：10617979
> 
> 赞同：7
> 
> 时间：2012-05-16T11:55:50.550
> 
> 标签：scala

在 scala 中，如何定义两个 Option 参数的加法？具体来说，假设它们是`Int`类型的包装器（我实际上正在使用双精度图，但这个例子更简单）。

我尝试了以下方法，但它只是给了我一个错误：

```
 def addOpt(a:Option[Int], b:Option[Int]) = {
    a match {
      case Some(x) => x.get
      case None => 0
    } + b match {
      case Some(y) => y.get
      case None => 0
    }
  } 
```

编辑添加：

在我的实际问题中，我添加了两张代表稀疏向量的地图。所以 None 情况返回 Map[Int, Double] 并且 + 实际上是 ++（在 stackoverflow.com/a/7080321/614684 进行了调整）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-16T16:06:14.960

# Monoids

当您意识到您可以站在巨人的肩膀上并利用常见的抽象和为使用它们而构建的库时，您可能会发现生活变得更加轻松。为此，这个问题基本上是关于处理 **幺半群**（有关此问题的更多信息，请参见下面的相关问题），并且有问题的库称为[**scalaz**](https://github.com/scalaz/scalaz/tree/master/core/src/main/scala/scalaz/)。

使用 scalaz FP，这只是：

```
def add(a: Option[Int], b: Option[Int]) = ~(a |+| b) 
```

更重要的是，这适用于任何幺半群 M：

```
def add[M: Monoid](a: Option[M], b: Option[M]) = ~(a |+| b) 
```

更有用的是，它适用于放置在`Foldable`容器内的任意数量的它们：

```
def add[M: Monoid, F: Foldable](as: F[Option[M]]) = ~as.asMA.sum 
```

请注意，除了显而易见的`Int`,之外`String`，一些相当有用的幺半群`Boolean`是：

1.  `Map[A, B: Monoid]`
2.  `A => (B: Monoid)`
3.  `Option[A: Monoid]`

事实上，提取自己的方法几乎不值得费心：

```
scala> some(some(some(1))) #:: some(some(some(2))) #:: Stream.empty
res0: scala.collection.immutable.Stream[Option[Option[Option[Int]]]] = Stream(Some(Some(Some(1))), ?)

scala> ~res0.asMA.sum
res1: Option[Option[Int]] = Some(Some(3)) 
```

* * *

# 一些相关问题

*问：什么是幺半群？*

> 幺半群是`M`存在关联二元运算`(M, M) => M`和`I`在此运算下的恒等式的类型，因此`mplus(m, I) == m == mplus(I, m)`对于所有`m`类型`M`

*问：什么是`|+|`？*

> 这只是`mplus`二进制操作的 scalaz 简写（或 ASCII 疯狂，ymmv）

*问：什么是`~`？*

> 它是一个一元运算符，意思是“或身份”，由 scalaz 库改造（使用 scala 的隐式转换）到`Option[M]`if`M`是一个幺半群。显然，非空选项返回其内容；一个空选项被幺半群的身份替换。

*问：什么是`asMA.sum`？*

> A`Foldable`基本上是一种可以折叠的数据结构（`foldLeft`例如 ）。回想一下，它`foldLeft`需要一个种子值和一个操作来组成连续的计算。在对幺半群求和的情况下，种子值是恒等式`I`，运算是`mplus`。`asMA.sum`因此，您可以调用`Foldable[M : Monoid]`. `asMA`由于名称与标准库的`sum`方法冲突，您可能需要使用。

# 一些参考资料

*   我演讲的[幻灯片](http://www.slideshare.net/oxbow_lakes/practical-scalaz)和[视频，其中给出了在野外使用幺半群的实际示例](http://skillsmatter.com/podcast/scala/practical-scalaz-2518)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-16T12:17:09.540

```
def addOpts(xs: Option[Int]*) = xs.flatten.sum 
```

这适用于任意数量的输入。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-16T12:00:33.273

如果它们都默认为 0，则不需要模式匹配：

```
 def addOpt(a:Option[Int], b:Option[Int]) = {
    a.getOrElse(0) + b.getOrElse(0)
  } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-16T16:38:57.387

*（根据要求在答案中重复上述评论）*

您没有以正确的方式提取选项的内容。当您与 , 匹配时`case Some(x)`，`x`是选项（类型`Int`）中的值，您不会调用`get`它。做就是了

```
case Some(x) => x 
```

反正如果要内容或者默认，`a.getOrElse(0)`比较方便

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T17:37:04.297

```
def addOpt(ao: Option[Int], bo: Option[Int]) =
    for {
        a <- ao
        b <- bo
    } yield a + b 
```

# iphone - 正确使用 Grand Central Dispatch - 启动、暂停、恢复、取消线程？

> ID：10617993
> 
> 赞同：2
> 
> 时间：2012-05-16T11:56:54.917
> 
> 标签：iphone, ios, multithreading, queue, grand-central-dispatch

我刚刚建立了一个小型测试项目来测试 Grand Central Dispatch。我需要使用串行队列。在运行后台任务时，我需要完全暂停、恢复或取消线程。并且：我如何知道创建的队列是否已经在运行？（然后我必须重新启动它）。

这是我第一次使用多线程，因此如果我使用正确的话，得到一些提示会非常好。我没有找到类似的东西，如果你能检查我的代码，那就太酷了。我释放对象对吗？有没有进一步的改进？

非常感谢您的帮助和时间。

这是代码或[示例项目的链接](http://dl.dropbox.com/u/4870705/Stackoverflow_TestQueue.zip)。

视图控制器.m

```
#import "ViewController.h"
#import "SVProgressHUD.h"
#import "Queue.h"

@interface ViewController (){
    Queue* queue;
}

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    queue = [[Queue alloc] init];

    UIButton* startbutton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
    [startbutton setTitle:@"Start Queue" forState:UIControlStateNormal];
    [startbutton addTarget:self action:@selector(startQueueButton:) forControlEvents:UIControlEventTouchUpInside];
    [startbutton setFrame:CGRectMake(100, 200, 100, 70)];
    [self.view addSubview:startbutton];

    UIButton* suspendbutton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
    [suspendbutton setTitle:@"Stop Queue" forState:UIControlStateNormal];
    [suspendbutton addTarget:self action:@selector(suspendQueueButton:) forControlEvents:UIControlEventTouchUpInside];
    [suspendbutton setFrame:CGRectMake(250, 200, 100, 70)];
    [self.view addSubview:suspendbutton];

    UIButton* resumebutton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
    [resumebutton setTitle:@"Resume Queue" forState:UIControlStateNormal];
    [resumebutton addTarget:self action:@selector(resumeQueueButton:) forControlEvents:UIControlEventTouchUpInside];
    [resumebutton setFrame:CGRectMake(400, 200, 170, 70)];
    [self.view addSubview:resumebutton];

    UIButton* cancelbutton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
    [cancelbutton setTitle:@"Cancel Queue" forState:UIControlStateNormal];
    [cancelbutton addTarget:self action:@selector(cancelQueueButton:) forControlEvents:UIControlEventTouchUpInside];
    [cancelbutton setFrame:CGRectMake(600, 200, 170, 70)];
    [self.view addSubview:cancelbutton];

}

-(void) startQueueButton:(UIButton*) button{    
    NSLog(@"---> startQueueButton");
    [queue start];
}

-(void) suspendQueueButton:(UIButton*) button{
    NSLog(@"---> suspendQueueButton");
    [queue suspend];
}

-(void) resumeQueueButton:(UIButton*) button{
    NSLog(@"---> resumeQueueButton");
    [queue resume];
}

-(void) cancelQueueButton:(UIButton*) button{
    NSLog(@"---> cancelQueueButton");
    [queue cancel];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

队列.m

```
#import "Queue.h"
#import "SVProgressHUD.h"

@interface Queue (){
    dispatch_queue_t queue;
}

@end

@implementation Queue

-(void) start{
    NSLog(@"Queue - start");    

    int count = 1000;

     // SERIAL QUEUE ======================================
     // =======================================================================

    queue = dispatch_queue_create("com.jf.TestQueue", NULL);

    [SVProgressHUD showWithStatus:@"Rendering..."];

    for(int i = 0; i < count; i++) 
    {
        dispatch_async(queue, ^{

            NSLog(@"--> ASYNC %d", i);

           // rendering complete, get back to main queue
           dispatch_async(dispatch_get_main_queue(), ^
              {
                 NSLog(@"--> Image rendered: %d", i);

                  if (i == count-1) {
                      NSLog(@"EndRenderingQueue");

                      [SVProgressHUD dismiss];
                  }
              });
        });
    }

    dispatch_release(queue);    // even under ARC we have to release it    
}

-(void) suspend{

    NSLog(@"Queue - suspend");

    if (queue) {
        NSLog(@"___suspend");
        dispatch_suspend(queue);
    }
}

-(void) resume{
    NSLog(@"Queue - resume");
    if (queue) {
        dispatch_resume(queue);
    }
}
-(void) cancel{
    NSLog(@"Queue - cancel");

    if (queue) {
        dispatch_suspend(queue);
        //dispatch_release(queue);  // if it´s uncommented, it crashes. How to release it securely?
        queue = nil;

        [SVProgressHUD dismiss];

    }

}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:21:58.213

我相信一般做法是您通常不会暂停后台队列，除非您绝对需要（即，如果您创建的队列被允许运行后续块，则您在另一个队列中操作无法正常/正常运行的东西）。在某些情况下您可能想要这样做，但通常您不必担心。我们中的大多数人都在创建队列，使用它们，当我们不主动使用它们时让它们处于空闲状态（虽然不是暂停它们），当我们再次需要后台队列时继续使用它，当我们都完成时有了它们（即在可预见的将来我们不需要后台队列），我们释放它们，此时我们不再使用那个旧的队列指针。

至于如何知道它是否被暂停，我认为除了`dispatch_debug()`. 您正在暂停它，因此您已经知道它是否已暂停，因此可以编写自己的包装器来跟踪您自己的暂停计数。一般来说，我会认为你会在必要时暂停，然后在冲突的前台（或其他）任务完成并且可以安全地再次使用后台队列时恢复。在这种情况下，确定是否暂停更多的是学术问题。

为什么需要暂停后台队列？您要解决什么业务逻辑问题？而且，顺便说一下，我假设您知道在该队列中运行的当前块不受暂停影响。我相信只有排队的（之前排队等待或随后排队的）块受到影响，而不是当前块。

就您的代码而言，您在 start 方法中释放队列（例如，一旦队列被清空，它将被异步释放）。只有在不再需要队列时才应该这样做。如果您调用 a `dispatch_release()`（即不使用 ARC），队列变量的任何未来使用都将不可靠（当然，除非`dispatch_release()`是与 a 一起完成`dispatch_retain()`）。一旦你最终释放它，你甚至可能想要将队列变量设置为 nil，这样你就不想使用它了。坦率地说，我很惊讶，因为你`dispatch_release()`在你的 start 方法中做了一个你可以调用的方法，`dispatch_suspend()`并且`dispatch_resume()`没有一些严重的异常，因为你已经释放了你的队列（除非碰巧，原始代码块提交给该队列尚未完成）。

底线，在您开始寻求暂停队列之前（我不确定您是否出于求知欲或您是否有一些令人信服的业务问题要解决），我建议您澄清您的问题业务逻辑和相关代码。

# linq - 通过属性vlaue从xml获取数据

> ID：10617994
> 
> 赞同：0
> 
> 时间：2012-05-16T11:56:59.617
> 
> 标签：linq, linq-to-xml

我有一个包含以下内容的文件（myfile.xml）。我必须将所有内容（包括产品节点）都放在带有`id=1`.

```
<products>  
  <product id="1">
       <category>q</category>  
  </product>    
  <product id="2">      
       <category>w</category>    
  </product>   
  <product id="3">       
  <category>e</category>   
 </product>
</products>` 
```

即结果应该是：

```
 <product id="1"> 
      <category>q</category>
  </product> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:46:28.200

在 Linq 中使用[XPath](http://msdn.microsoft.com/en-us/library/bb351355.aspx)

```
var root = XElement.Load("myfile.xml");  
root.XPathSelectElements( "/products/product[@id=1]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:07:28.340

```
var root = XElement.Load("path to the file");
var node = root.Descendants("product").FirstOrDefault(e=>e.Attribute("id").Value == "1"); 
```