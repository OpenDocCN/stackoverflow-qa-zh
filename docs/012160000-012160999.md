# StackOverflow 问答 12160000-12160999

# mysql - 当时间戳是文本字段时选择最大时间戳

> ID：12160002
> 
> 赞同：1
> 
> 时间：2012-08-28T13:10:28.573
> 
> 标签：mysql

我正在尝试为包含时间戳值的字段选择最大时间戳值，但实际上是一个文本字段。在您说之前，我无法更改字段类型，因为填充它的应用程序是不可更改的。这很烦人，我知道。

时间戳的格式是

```
Wed Mar 02 13:28:59 CST 2011 -> this is actually a text value in MYSQL 
```

这是我的尝试：

```
SELECT DISTINCT MAX(STR_TO_DATE(`Timestamp`, '%d, %m, %Y')) FROM `table` 
```

'Timestamp' 是指名为 Timestamp 的列。

这只是返回时间戳的 NULL 值。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:24:46.197

试试这个查询 -

```
SELECT
  MAX(STR_TO_DATE(`Timestamp`, '%a %b %d %H:%i:%s CST %Y'))
FROM
  `table` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:21:11.527

这应该适合你，也看看[http://www.w3schools.com/sql/func_date_format.asp](http://www.w3schools.com/sql/func_date_format.asp)

```
SELECT DISTINCT MAX(STR_To_DATE(`Timestamp`,'%a %b %d %H:%i:%s CST %Y')) 
FROM `table`; 
```

测试用例示例：

```
SET @v = 'Wed Mar 02 13:28:59 CST 201';

SELECT STR_To_DATE(@v, '%a %b %d %H:%i:%s CST %Y'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:21:27.000

试试这个格式

STR_TO_DATE(`时间戳`,'%a %b %d %T CST %Y')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:16:50.960

用这个

```
SELECT DISTINCT MAX(STR_TO_DATE(`table.Timestamp`, '%d, %m, %Y')) FROM `table` 
```

# java - 找不到类，为什么？

> ID：12160005
> 
> 赞同：0
> 
> 时间：2012-08-28T13:10:41.003
> 
> 标签：java, speech-recognition, speech-synthesis

我正在尝试导入 javax.speech.recognition.Result；在我的代码中。但我得到类未找到错误。

使用 javap 检查；如下：-

```
C:\Documents and Settings\ankit.g>javap javax.speech.recognition.Result
Error:  class not found: javax.speech.recognition.Result 
```

我正在使用 java 7，请找到以下输出：-

```
C:\Documents and Settings\ankit.g>java -version
  java version "1.7.0_05"
  Java(TM) SE Runtime Environment (build 1.7.0_05-b06)
  Java HotSpot(TM) Client VM (build 23.1-b03, mixed mode, sharing) 
```

请帮忙，我正在努力进行语音识别。

谢谢

* * *

安装 jsapi.sh 文件后，该目录的屏幕截图如下：- ![在此处输入图像描述](../Images/f4682bca7989e10ca4a9fe69adbb5662.png)

是否需要包含所有 jar 文件；任何简单的教程或步骤都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:15:44.770

你上课

> javax.speech.recognition.Result.class

在类路径上不可用。您可能放错了包含此类的语音识别 jar（包含语音识别特定类的 java 库）。看看那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:24:31.207

这是一个带有注释的Hello World类型[语音识别示例程序](http://java.sun.com/products/java-media/speech/forDevelopers/jsapi-guide/Recognition.html)。

这是[关于 Java Speech API 的维基百科文章，](http://en.wikipedia.org/wiki/Java_Speech_API)其中包含指向[开源语音合成包 FreeTTS](http://en.wikipedia.org/wiki/FreeTTS)的链接。

这是[关于 Android 的 Java 语音识别包的 stackoverflow 问题](https://stackoverflow.com/questions/3034925/java-speech-recognition-api)。还有其他可用的 stackoverflow 问题和答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:20:17.317

尝试“FreeTTS”实现并从包中获取 JSAPI 实现。我不记得 JSAPI 是随常规 JDK​​ 提供的，但我可能是错的。

[http://freetts.sourceforge.net/docs/index.php](http://freetts.sourceforge.net/docs/index.php)

src zip 文件包含 JSAPI.sh 和 JSAPI.exe 脚本以及如何使其可用的自述文件。

# python - 使用 python 解析电子邮件日期时间

> ID：12160010
> 
> 赞同：8
> 
> 时间：2012-08-28T13:10:52.010
> 
> 标签：python, datetime

我正在尝试使用 python 脚本解析电子邮件的日期时间。

当我打开邮件详细信息时，邮件中的日期值如下所示...

```
from:    abcd@xyz.com
to:      def@xyz.com
date:    Tue, Aug 28, 2012 at 1:19 PM
subject: Subject of that mail 
```

我正在使用类似的代码

```
mail = email.message_from_string(str1)
#to = re.sub('</br>','',mail["To"])
to = parseaddr(mail.get('To'))[1]
sender = parseaddr(mail.get('From'))[1]
cc_is = parseaddr(mail.get('Cc'))[1]
date = mail["Date"]
print date 
```

使用 python 解析的相同邮件日期时间的输出如下所示，带有时间偏移。

```
Tue, 28 Aug 2012 02:49:13 -0500 
```

我真正希望的地方

```
Tue, Aug 28, 2012 at 1:19 PM 
```

我对这两个价值观的关系感到很困惑。任何人都可以帮我弄清楚我需要同时了解邮件详细信息。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-28T13:13:19.830

在 GMail 中查看电子邮件时，在显示电子邮件的发送日期和时间时使用您的本地时区。“Tue, 28 Aug 2012 02:49:13 -0500” 被解析，然后更新到您的本地时区，并以特定于 GMail 的方式格式化。

## 解析和格式化stdlib方式

该`email.utils`模块包含一个专门处理带有时区偏移的电子邮件标头的[`parsedate_tz()`功能。](http://docs.python.org/library/email.util.html#email.utils.parsedate_tz)

它返回一个与 兼容的元组[`time.struct_time`](http://docs.python.org/library/time.html#time.struct_time)，但添加了时区偏移量。一个附加[`mktime_tz()`函数](https://docs.python.org/2/library/email.util.html#email.utils.mktime_tz)将该元组转换为偏移值（自 UNIX 纪元以来的时间，以秒为单位）。然后可以`datetime.datetime()`轻松地将这个值转换为类型对象。

同一模块还具有将 UNIX 纪元时间戳转换为与电子邮件兼容的日期字符串的[`formatdate()`功能：](http://docs.python.org/library/email.util.html#email.utils.formatdate)

```
>>> from email.utils import parsedate_tz, mktime_tz, formatdate
>>> import time
>>> date = 'Tue, 28 Aug 2012 02:49:13 -0500'
>>> tt = parsedate_tz(date)
>>> timestamp = mktime_tz(tt)
>>> print formatdate(timestamp)
Tue, 28 Aug 2012 07:49:13 -0000 
```

现在我们有了一个适合外发电子邮件的 UTC 格式日期。要将其打印为我的*本地*时区（由我的计算机确定），您需要将`localtime`标志设置为`True`：

```
>>> print formatdate(timestamp, True)
Tue, 28 Aug 2012 08:49:13 +0100 
```

## 使用更好的工具进行解析和格式化

请注意，当我们尝试处理时区时，事情变得越来越棘手，并且该`formatdate()`功能没有为您提供任何不同格式的选项（如 GMail 所做的那样），也不允许您选择不同的时区来使用。

进入外部[`python-dateutil`模块](http://labix.org/python-dateutil)；它有一个解析函数，几乎可以处理任何事情，并正确支持时区

```
>>> import dateutil.parser
>>> dt = dateutil.parser.parse(date)
>>> dt
datetime.datetime(2012, 8, 28, 2, 49, 13, tzinfo=tzoffset(None, -18000)) 
```

该`parse()`函数返回一个[`datetime.datetime()`实例](http://docs.python.org/library/datetime.html#datetime-objects)，这使得格式化变得更加容易。现在我们可以使用该[`.strftime()`函数](http://docs.python.org/library/datetime.html#datetime.datetime.strftime)像您的电子邮件客户端一样输出它：

```
>>> print dt.strftime('%a, %b %d, %Y at %I:%M %p')
Tue, Aug 28, 2012 at 02:49 AM 
```

当然，那仍然是当地时区。要将其转换为您的时区，请使用带有新对象的[`.astimezone()`方法。](http://docs.python.org/library/datetime.html#datetime.datetime.astimezone)`tzone`这个`python-dateutil`包裹对我们有一些方便。

*以下是在本地*时区（到您的机器）打印它的方法：

```
>>> import dateutil.tz
>>> print dt.astimezone(dateutil.tz.tzlocal()).strftime('%a, %b %d, %Y at %I:%M %p')
Tue, Aug 28, 2012 at 09:49 AM 
```

或改用特定时区：

```
>>> print dt.astimezone(dateutil.tz.tzstr('Asia/Kolkata')).strftime('%a, %b %d, %Y at %I:%M %p')
Tue, Aug 28, 2012 at 07:49 AM 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-17T00:07:49.900

你可以只使用 stdlib 来做到这一点：

```
>>> from email.utils import parsedate_tz, mktime_tz, formatdate
>>> ts = mktime_tz(parsedate_tz('Tue, 28 Aug 2012 02:49:13 -0500'))
>>> formatdate(ts, localtime=True) # assuming Asia/Kolkata is the local timezone
'Tue, 28 Aug 2012 13:19:13 +0530' 
```

如果你想使用`PM`几个小时的格式：

```
>>> from datetime import datetime
>>> datetime.fromtimestamp(ts).strftime('%a, %b %d, %Y at %I:%M %p')
'Tue, Aug 28, 2012 at 01:19 PM' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-31T11:35:51.263

可以选择以下代码

```
start = f.find('date:') + 5  # +5 is to exclude 'date'+':' i.e.(4+1=5)
end = f.find('subject:', start) # parse from date to subject 
date_time = f[start:end]
print date_time #it will print "Tue, Aug 28, 2012 at 1:19 PM" 
```

# html - 使用 XSLT 将 XML 拆分为多个 HTML 文件

> ID：12160014
> 
> 赞同：2
> 
> 时间：2012-08-28T13:11:07.277
> 
> 标签：html, ruby, xml, xslt

我正在寻找一种将 XML 文件拆分为多个 HTML 文件的方法，这些文件最终应该包含一个表格。

一个示例 xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<table>
  <row>
    <name>user1</name>
    <email>email1</email>
  </row>
  <row>
    <name>user2</name>
    <email>email2</email>
  </row>
  <row>
   <name>user3</name>
   <email>email3</email>
  </row>
  <row>
    <name>user4</name>
    <email>email4</email>
  </row>
  <row>
    <name>user5</name>
    <email>email5</email>
  </row>

  ...

</table> 
```

现在我想将此 xml 文件拆分为不同的 HTML 文件，这些文件包含 XML 文件中的特定范围。例如，每个 HTML 文件应包含来自 XML 的 3 行。

**table1.html**

```
<table>
  <tr>
    <td>user1</td>
    <td>email1</td>
  </tr>
  <tr>
    <td>user2</td>
    <td>email2</td>
  </tr>
  <tr>
    <td>user3</td>
    <td>email3</td>
  </tr>
</table> 
```

**table2.html**

```
<table>
  <tr>
    <td>user4</td>
    <td>email4</td>
  </tr>
  <tr>
    <td>user5</td>
    <td>email5</td>
  </tr>
  <tr>
    <td>user6</td>
    <td>email6</td>
  </tr>
</table> 
```

有人知道如何格式化 XSLT 文件吗？我正在使用[ruby​​-xslt](https://github.com/glejeune/ruby-xslt)加载 XML 和 XSLT 文件并将整个内容转换为 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:49:45.760

If you apply this XSLT to your input XML it will split the XML into tables containing 3 records:

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:strip-space elements="*"/>
<xsl:output indent="yes" method="xml"/>

<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>
<!-- split file up into row elements -->
<xsl:template match="row[position() mod 3 = 1]">
    <table>
        <xsl:copy-of select=".|following-sibling::row[not(position() > 2)]"/>
    </table>
</xsl:template>

<xsl:template match="row"/>
</xsl:stylesheet> 
```

OUTPUT XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<table>
<table>
    <row>
        <name>user1</name>
        <email>email1</email>
    </row>
    <row>
        <name>user2</name>
        <email>email2</email>
    </row>
    <row>
        <name>user3</name>
        <email>email3</email>
    </row>
</table>
<table>
    <row>
        <name>user4</name>
        <email>email4</email>
    </row>
    <row>
        <name>user5</name>
        <email>email5</email>
    </row>
</table>
</table> 
```

If you run the OUTPUT XML through this XSLT you will get the wanted result:

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="row">
    <tr>
        <xsl:apply-templates select="node()|@*"/>
    </tr>
</xsl:template>

<xsl:template match="email | name">
    <td>
        <xsl:apply-templates select="node()|@*"/>
    </td>
</xsl:template>

</xsl:stylesheet> 
```

final OUTPUT XML:

```
 <?xml version="1.0" encoding="UTF-8"?><table>
<table>
    <tr>
        <td>user1</td>
        <td>email1</td>
    </tr>
    <tr>
        <td>user2</td>
        <td>email2</td>
    </tr>
    <tr>
        <td>user3</td>
        <td>email3</td>
    </tr>
</table>
<table>
    <tr>
        <td>user4</td>
        <td>email4</td>
    </tr>
    <tr>
        <td>user5</td>
        <td>email5</td>
    </tr>
</table>
</table> 
```

In my opinion this should work with XSLT 1.0 as long as you have the opportunity to run 2 stylesheets on your input XML.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:57:20.007

要在单个 XSLT 转换中创建多个 HTML 文件，您将需要 xsl:result-document 指令，该指令仅在 XSLT 2.0 中可用。不幸的是，你没有用 ruby​​-xslt 做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:02:07.620

**XSLT 1.0 转换只能创建一个输出**。

您可能仍然有一个包含所有生成表的结果。然后，您需要在 XSLT 之外处理此结果（或对其执行 N 次转换），以便生成所需的 N 个单独输出。

**我强烈建议您使用 XSLT 2.0 来完成这项任务**——这可以使用新[**`xsl:result-document`**](http://www.w3.org/TR/2007/REC-xslt20-20070123/#element-result-document)指令轻松完成。

# jquery - 放置区域的JQuery拖放计数内容？

> ID：12160017
> 
> 赞同：1
> 
> 时间：2012-08-28T13:11:12.320
> 
> 标签：jquery, drag-and-drop, count

我正在开发一个 Jquery 项目，其中用户可以将“药丸”拖到“杯子”中，然后可以显示杯子中的药丸数量，但是如果用户移动，一旦药丸在杯子中，我就会遇到问题它算作再次被丢弃的药丸。如何让可拖动（药丸）在放入可放置（杯）时计数一次。它是存储数组或将标识符附加到每个药丸的 for/if 循环的情况吗？

这是我的一些代码html

```
 <div id="PillSpace">
       <div class="PillCup"><p>accept: '#Pill'</p></div>
       <div class="Pill"><p><img src="resources/capsule.png"/></p></div>
       <div class="Pill"><p><img src="resources/capsule.png"/></p></div>
       <div class="Pill"><p><img src="resources/capsule.png"/></p></div><br>
       <div class="Pill"><p><img src="resources/capsule.png"/></p></div>
       <div class="Pill"><p><img src="resources/capsule.png"/></p></div>
       <div class="Pill"><p><img src="resources/capsule.png"/></p></div><br>
       <div class="Pill"><p><img src="resources/capsule.png"/></p></div>
       <div class="Pill"><p><img src="resources/capsule.png"/></p></div>
       <div class="Pill"><p><img src="resources/capsule.png"/></p></div>
       </div> 
```

JQuery 是：

```
 $(document).ready(function() {
    var count = 0;
    $( ".Pill").draggable();

    $( ".PillCup" ).droppable({
        accept: ".Pill",
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        over:function(){
            $( ".PillCup" ).find("p").html(count).text;
        },
        out:function(){
        count--;
            $( ".PillCup" ).find("p").html(count).text;
        },
        drop: function( event, ui ) {
            count++;
            $( ".PillCup" ).find("p").html(count).text;
        }

    });
}); 
```

希望有人可以帮助

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:14:38.573

尝试计算容器中药丸的总数，而不是增加/减少每一滴的计数：

```
out: function(){
    count = $(".Pill", ".PillCup").count();
    $( ".PillCup" ).find("p").html(count).text;
},
drop: function( event, ui ) {
    count = $(".Pill", ".PillCup").count();
    $( ".PillCup" ).find("p").html(count).text;
} 
```

# php - 从日历中选择日期，然后显示所选日期内字段范围的结果

> ID：12160019
> 
> 赞同：-2
> 
> 时间：2012-08-28T13:11:14.140
> 
> 标签：php, mysql

在我的表中`main_stock`，我有一个字段`newown`，输入可以是**New Purchase**或**Existing Product**。

我想`newown`从选定的一天开始创建所有新购买字段的报告 -

首先，我有一个页面，他们可以从日历中选择日期`curr_timestamp field`并单击提交。

当他们提交我需要将其带到 php 页面`newpurchase_report.php`并显示当天添加的所有新购买的日期时，有什么帮助会很棒吗？

谢谢你

这是目前我的 newpurchases_report.php：

```
<?php
    // connect to the database 

$host = '...'; 
$username = '...'; 
$pass = '....'; 

mysql_connect($host,$username,$pass); 
mysql_select_db("stock"); 
$curr_timestamp = $_GET['curr_timestamp'];
$thenumber = 1;  
 $data = mysql_query("SELECT * FROM main_stock WHERE curr_timestamp='$curr_timestamp' ORDER BY newown ASC ") 
or die(mysql_error()); 
print "<table border cellpadding=1 width=95%>";
print "<span style='font-size: 22px;background-color : #ffff00;'>New Purchases</span>"; 
print "<tr>";
print "<td><span style='font-size: 12px;background-color : #ffff00;'>Number</span></td> ";  
print "<td><span style='font-size: 12px;background-color : #ffff00;'>Data</span></td> ";
print "<td><span style='font-size: 12px;background-color : #ffff00;'>Master Category</span></td> ";
print "<td><span style='font-size: 12px;background-color : #ffff00;'>Category</span></td> ";
print "<td><span style='font-size: 12px;background-color : #ffff00;'>Product Description</span></td> ";
print "<td><span style='font-size: 12px;background-color : #ffff00;'>New or Exsisting?/span></td> ";
print "<td><span style='font-size: 12px;background-color : #ffff00;'>Barcode</span></td> ";
print "<td><span style='font-size: 12px;background-color : #ffff00;'>Serial No.</span></td> ";
print "<td><span style='font-size: 12px;background-color :  #ffff00;'>Stockcode</span></td> ";
print "<td><span style='font-size: 12px;background-color : #ffff00;'>Status</span></td> ";
print "<td><span style='font-size: 12px;background-color : #ffff00;'>Hiretrack</span></td> ";
print "</tr> ";

while($info = mysql_fetch_array( $data )) 
{ 

print "<tr> ";
print "<td><span style='font-size: 12px;'>". $thenumber++;"</span></td> ";
print "<td><span style='font-size: 12px;'>".$info['curr_timestamp'] ."</span></td> ";
print "<td><span style='font-size: 12px;'>".$info['mastercategory'] ."</span></td> ";
print "<td><span style='font-size: 12px;'>".$info['category'] ."</span></td> "; 
print "<td><span style='font-size: 12px;'>".$info['product_desc'] ."</span></td> ";
print "<td><span style='font-size: 12px;'>".$info['newown'] ."</span></td> "; 
print "<td><span style='font-size: 12px;'>".$info['barcode'] ."</span></td> "; 
print "<td><span style='font-size: 12px;'>".$info['serial'] ."</span></td> "; 
print "<td><span style='font-size: 12px;'>".$info['stockcode'] ."</span></td> "; 
print "<td><span style='font-size: 12px;'>".$info['status'] ."</span></td> "; 
print "<td><span style='font-size: 12px;'>".$info['hiretrack'] ."</span></td> "; 
print "</tr> ";

} 

print "</table> ";

// disconnect from the database 

mysql_close();

?> 
```

我不确定是这个页面需要编辑还是我的索引页面（您从日历中选择日期）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:26:46.443

如果您首先`var_dump($_POST)`在 newpurchase_report.php 中发布到 newpurchase_report.php 以检查值是否发布到页面。然后，如果它们是，您可以使用`$_POST['timestamp']`添加的日期等于发布的日期对您的数据库运行查询。

不确定这是否是您正在寻找的，但如果我认为您正在做的事情实际上是您正在尝试做的事情，我想我会提供简单的解决方案。

# plsql - Oracle PL/SQL FOR 循环优化

> ID：12160026
> 
> 赞同：0
> 
> 时间：2012-08-28T13:11:33.210
> 
> 标签：plsql

如果可能的话，请你帮助我，如果为了更快地迭代值，我需要优化下面的代码块。见以下声明：

```
for CONSULTANT_RECORD IN CONSULTANT_CURSOR LOOP /*Loop 2*/
VData := VData||crlf2||CONSULTANT_RECORD.USER_FIRSTNAME||'   '||CONSULTANT_RECORD.USER_SURNAME;

vTOT_LOG_CLOSED4USER := 0;
vAVERAGE_DAY := 0;
vTOT_DAYS := 0;
for x in 1..vlastday loop /*Loop 3*/
  select COUNT(DISTINCT LOG_NO) as "LOG_COUNT" INTO vLOG_COUNTER
    FROM DMS_CRM.TBL_DMS_SERVICE_REQUESTS_HIST
      WHERE LOG_STATUS = 'Resolved'
       AND TO_CHAR(HIST_DATE_TIME_STAMP, 'MONTH,YYYY') = TO_CHAR(SYSDATE, 'MONTH,YYYY')
       AND TO_CHAR(HIST_DATE_TIME_STAMP, 'DD') = lpad(to_char(x),2,'0')
       AND OWNER_USER_ID IS NOT NULL
       AND OWNER_USER_ID = CONSULTANT_RECORD.OWNER_USER_ID;

    end loop;
END LOOP; 
```

问题开始在评论循环 3 中发生，请记住我正在通过 oracle 应用程序门户进行开发，所以我无法运行查询优化......我的表也被正确索引（如果有人想评论它）。

问候，

PS。没有人用他们的代码版本回复我…………我仍在为此苦苦挣扎:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:35:24.423

我认为最好的循环根本就是没有循环（当然，如果可以避免的话）。假设 vlastday 是一个集合，你可以做类似的事情

```
select COUNT(DISTINCT LOG_NO) as "LOG_COUNT" 
FROM DMS_CRM.TBL_DMS_SERVICE_REQUESTS_HIST
INNER JOIN 
  (
    SELECT lpad(to_char(t.COLUMN_VALUE ),2,'0') as x 
    from table(vlastday)t
  )a ON (TO_CHAR(HIST_DATE_TIME_STAMP, 'DD') = a.x)
  WHERE LOG_STATUS = 'Resolved'
   AND TO_CHAR(HIST_DATE_TIME_STAMP, 'MONTH,YYYY') = TO_CHAR(SYSDATE, 'MONTH,YYYY')       
   AND OWNER_USER_ID IS NOT NULL
   AND OWNER_USER_ID = CONSULTANT_RECORD.OWNER_USER_ID
   GROUP BY a.x; 
```

然后取决于你的任务，你需要要么摆脱，`GROUP BY`所以你可以`select into`，或者声明一个数字集合并`BULK COLLECT`放入这个变量中。

另外，根据我在问题中看到的情况，您可以对 Loop2 执行几乎相同的操作，这样您就不会出现循环...

# php - 将 Ajax 注释添加到 Ajaxed 状态

> ID：12160031
> 
> 赞同：0
> 
> 时间：2012-08-28T13:11:48.467
> 
> 标签：php, jquery, html, ajax

我正处于我的提要中 ajaxing 的最后阶段。虽然我认为这可能是评论输入的简单粘贴，但我错了。

我在主要的 ajaxed 状态下插入了我的输入，因此当用户添加状态时，ajaxed 状态会进入他们的提要，然后他们可以单击 ajaxed 状态并编写 ajaxed 评论。用户提交评论后，应使用 ajax 添加评论。但是..页面已刷新，根本没有添加任何评论。

希望我已经理解了我正在“尝试”做的事情。

主要状态 AJAX - 表单的 id 进入一些添加内容的 ajax。

```
 <script>
    $(document).ready(function(){
    $("form#myform").submit(function(event) {
    event.preventDefault();
    var content = $("#toid").val();
    var newmsg = $("#newmsg").val();

    $.ajax({
    type: "POST",
    url: "insert.php",
    cache: false,
    dataType: "json",
    data: { toid: content, newmsg: newmsg }, 
    success: function(response){ 
     $("#newmsg").val(""); 
    $("#homestatusid").html("ALL MY MAIN STATUS GOES HERE
<div class='stream_comment' id='comment_"+response['comment_id']+"' style='margin-top:0px;'>\
<div class='stream_comment_holder' style='display:none;' id='comment_holder_"+response['streamitem_id']+"'>\
<div id='comment_list_"+response['streamitem_id']+"'><table width=100%><tr><td valign=top width=30px>\
<img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a>\
    <td valign=top align=left><div class='stream_comment_inputarea'><form id='mycommentform' method='POST'  class='form_statusinput'>\
    <input type='hidden'  name='streamidcontent' id='streamidcontent' value='"+response['streamitem_id']+"'>\
    <input type='input' name='commentingcontents' id='commentingcontents' placeholder='Say something' autocomplete='off'>\
    <input type='submit' id='button' value='Feed'><br/></div></div>");
    }
    });
    return false
    });
    });
    </script> 
```

在上述 ajax 下方的同一页面中评论 AJAX。

```
<script>
$(document).ready(function(){
    $("form#mycommentform").submit(function(event) {
        event.preventDefault();
        var streamidcontent = $(this).children("#streamidcontent").val();
        var commentingcontents = $(this).children("#commentingcontents").val();

        $.ajax({
            type: "POST",
            url: "comment_add.php",
            cache: false,
            dataType: "json",
            data: { streamidcontent: streamidcontent, commentingcontents: commentingcontents }, 
            success: function(data){  
                $("#comment_list_"+data.comment_streamitem).append('<div class="stream_comment" id="comment_'+data['comment_id']+'" style="margin-top:0px;">\
                <table width=100%><tr><td valign=top width=30px><img class="stream_profileimage" style="border:none;padding:0px;display:inline;" border=\"0\" src=\"imgs/cropped'+data['comment_poster']+'.jpg\" onerror="this.src=\"img/no_profile_img.jpeg\"" width=\"40\" height=\"40\" ></a><td valign=top align=left>\
                <a href="/profile.php?username='+data['username']+'">'+data['first']+' '+ data['middle']+' '+data['last']+'<div style="font-size:10px;">'+data['comment_datetime']+'</div></a>\<div class="commentholder">'+data['comment_content']+'</div><br/>\<div id="commentactivitycontainer"><a style="cursor:pointer;" onClick=\"deletecomment('+data['comment_id']+',comment_'+data['comment_id']+');\">Delete</a><a id="likecontext_'+data['comment_id']+'" style="cursor:pointer;" onClick=\"likestatuscomment('+data['comment_id']+',this.id);\"><div style="width:80px; position:relative;  float:left; left:40px" id="likescommentprint'+data['comment_id']+'">Like</div></a><div style="width:80px; position:relative;  float:left; left:40px" id="likescommentprint'+data['comment_id']+'"></div></form><a id="dislikecontext_'+data['comment_id']+'" style="cursor:pointer;" onClick=\"dislikestatuscomment('+data['comment_id']+',this.id);\"><div style="width:90px; position:relative;top:-0px; float:left; left:200px" id="dislikescommentprint'+data['comment_id']+'">Dislike</div></a><div style="width:90px; position:relative; top:-0px; float:left; left:200px" id="dislikescommentprint'+data['comment_id']+'"></div></form></div></div></table></div></div></div></div></table></div></div>\<div class="stream_comment_holder" style="display:;"></b></div>');
            }
        });
        return false
    });
});
</script> 
```

点击手柄示例

```
 <?
if (isset($_POST['commentingcontents'])) {
    echo form();
    return;
}
function form() {
  echo '<div class="form">
<form id="mycommentform" method="POST"  class="form_statusinput">
<input type="hidden"  name="streamidcontent" id="streamidcontent" value="'.$streamitem_data['streamitem_id'].'">
<input type="input" name="commentingcontents" id="commentingcontents" placeholder="Say something" autocomplete="off">
<input type="submit" id="button" value="Feed">
</form>
</div>';
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:19:02.323

您在成功函数中添加的表单“mycommentform”不会绑定到任何 javascript 事件。因此，如果您提交它，它不会被 ajaxed 并重新加载整个页面。

当前的 jQuery 版本提供了[.on()](http://api.jquery.com/on/)方法来自动归档它。

只是改变

```
$("form#mycommentform").submit(function(event) { 
```

至

```
$("body").on("submit", "form#mycommentform", function(event) { 
```

在您的 COMMENT AJAX 部分中有一个委托的事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:19:04.243

我认为您的 jquery 包含一些语法错误检查错误控制台

我认为您忘记在“return false”语句后添加分号

确保 ajax 请求工作在 ajax 成功函数中放置一个 alert() 框并检查它是否工作

# javascript - 在 RadGrid 上使用 RowDblClick 触发编辑 = 第二项错误

> ID：12160039
> 
> 赞同：1
> 
> 时间：2012-08-28T13:12:13.603
> 
> 标签：javascript, asp.net, telerik-grid

我在 Telerik RadGrid 中有这种非常奇怪的行为......
我将粘贴我必须尝试的内容片段并让事情变得清晰。

```
<ClientSettings>
    <Selecting AllowRowSelect="True" EnableDragToSelectRows="False"/>
    <ClientEvents OnRowDblClick="RowDblClick" />
</ClientSettings> 
```

允许我抓住行上的双击。
以下应该正确触发编辑模式......它确实......除了网格中的第二行！

```
function RowDblClick(sender, eventArgs) {
    editedRow = eventArgs.get_itemIndexHierarchical();
    $find("<%= radGridInvestering.Client %>").get_masterTableView().editItem(editedRow);
} 
```

出现以下错误：

Sys.WebForms.PageRequestManagerServerErrorException：选择超出范围

如果有人有想法，我会很高兴听到的。我不能成为第一个遇到这个问题的开发者......我认为

# xml - Powerpoint - 使用 XML 导入 Flash

> ID：12160041
> 
> 赞同：1
> 
> 时间：2012-08-28T13:12:15.500
> 
> 标签：xml, flash, powerpoint

我正在使用 Flash 中的交互式地图，并将其导入 Powerpoint。

放置地图后，国家/地区将链接到另一个文件中的 XML 数据，并显示位置名称、带有数据的表格等。

当我第一次将 Flash 文件放入 PPT 时，它工作正常。当我退出程序时，Powerpoint 文件不再使用 XML 数据。

我使用的是 Powerpoint 2007，所有文件都保存在同一个目录中。

谢谢你的帮助！

# php - 当 delay_while_idle 设置为 true 时，Android 设备未收到消息

> ID：12160052
> 
> 赞同：0
> 
> 时间：2012-08-28T13:12:56.307
> 
> 标签：php, android, google-cloud-messaging

有没有办法查看设备是否已知对 GCM 服务器空闲？

有没有办法在不使用collapse_key的情况下使用delay_while_idle？

当我在 php 中设置这样的消息时，它确实有效。

```
$headers = array("Content-Type:" . "application/json", "Authorization:" . "key=" . $key);
$data = array(
    'registration_ids' => $deviceRegistrationIds,
    'data' => array('message' => $messageText,
        'msgfromname' => $fromname,
        'close' => $close,
        'newchat' => $newchat,
        'msgfrom' => $from)
); 
```

当我像这样使用 delay_while_idle 时，它​​不起作用。

```
$headers = array("Content-Type:" . "application/json", "Authorization:" . "key=" . $key);
$data = array(
    'registration_ids' => $deviceRegistrationIds,
    'collapse_key' => $messageText,
    'delay_while_idle' => true,
    'data' => array('message' => $messageText,
        'msgfromname' => $fromname,
        'close' => $close,
        'newchat' => $newchat,
        'msgfrom' => $from)
); 
```

我猜这是因为 $messageText 与数据数组中的某些值具有相同的值？当我将其值更改为“你好”时，它确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:10:56.390

您可以将 delay_while_idle 设置为 true，而无需指定 collapse_key。

GCM 一次最多支持 4 个折叠键。如果您在设备离线时使用超过 4 个折叠键，则只会保留 4 条消息，并且无法保证会是哪 4 条。

如果您使用消息文本作为折叠键，GCM 将只保存四条唯一消息，您无法知道它最终会传递哪四条消息。

（顺便说一句，如果您确实想使用 collapse_key，我很确定您还必须提供 time_to_live 值，否则请求将被拒绝。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:54:38.120

我唯一能看到的是您需要用双引号将 $messageText 和所有其他字符串括起来。我还将 delay_while_idle 设置为 1 而不是 true..我知道当你将它传递为 true 时它应该转换为 1。

此外，我认为您没有正确使用 collapse_key（不知道您在那里设置的实际数据无法知道），但通常您会将该字段用作“批处理 id”。

```
$headers = array("Content-Type:" . "application/json", "Authorization:" . "key=" . $key);
$data = array(
    'registration_ids' => $deviceRegistrationIds,
    'collapse_key' => "$messageText",
    'delay_while_idle' => 1,
    'data' => array('message' => "$messageText",
        'msgfromname' => "$fromname",
        'close' => "$close",
        'newchat' => "$newchat",
        'msgfrom' => "$from")
); 
```

# performance - 您如何在没有明显延迟的情况下有效地解密信息？

> ID：12160057
> 
> 赞同：0
> 
> 时间：2012-08-28T13:13:20.743
> 
> 标签：performance, encryption, language-agnostic

我的电脑有一个名为*Bit Locker*的程序，它可以加密整个硬盘驱动器。硬盘驱动器约为 500 GB。但是，当执行相同的读取操作（例如，加载一个大文件）时，我根本没有注意到这台计算机和另一台（未加密）计算机之间有任何真正的延迟时间。

我很好奇这是怎么可能的。如果磁盘上的所有内容都经过高度加密，那么在您阅读或查看所有内容之前是否应该花费大量的时间来解密所有内容？显然，磁盘上的所有内容都不会在启动时自动解密，因为每次解密 500 GB 的数据会导致启动时的等待时间过长。我想某处可能有一个本地的、解密的缓存，但这不会破坏加密的目的吗？

注意：我不是在问这个特定的程序是如何完成它的；这只是一个例子。相反，我很好奇加密磁盘如何在没有太多（或任何）人类可察觉的延迟时间的情况下仍然有效地读写，因为显然这是可能的。

谢谢！

**澄清：**我知道单个数据块可以彼此分开加密/解密。但是，如果每次执行读取（通过打开 PDF 或 Word 文件或其他任何文件）时，您*还*必须对正在读取的数据运行解密算法，那么这将产生明显的延迟时间（例如，更“慢”的计算机）。不过，情况似乎并非如此。为什么以及如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T15:26:27.083

当您从磁盘读取一个块时，CPU 会花费大量时间完全什么都不做，等待 I/O 完成。

假设 CPU 不忙于其他事情，您可以将前一个块的相当多的处理放入等待下一个块所花费的时间。只要解密速度足够快，读取合理数据量的总时间几乎不会受到解密的影响。“足够快”取决于 CPU 速度相对于 I/O 速度，以及 CPU 在读取期间有多少空闲内核。

我猜 BitLocker 的解密速度足够快 - 在打开 PDF 的情况下还有第二种可能性，即与渲染页面的成本相比，解密的成本可能微不足道。因此，即使增加了读取文件的总时间，您也不一定会注意到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:33:52.623

*可以加密单个数据块*，而不是将整个驱动器加密为单个流。这是有效的，因为加密不会改变数据的*大小*，而只会改变它的*内容*。然后可以单独读取这些块，然后即时解密。

# java - 如何限制 JTextArea 中的行数？

> ID：12160060
> 
> 赞同：7
> 
> 时间：2012-08-28T13:13:46.463
> 
> 标签：java, swing, jtextarea

我正在尝试为服务制作一个 GUI，它有一个 JTextArea 来查看消息，每条消息都写在一行上，并在需要时进行自动换行。

消息通过套接字到达，因此它只是我用来更新 JTextArea 的一个 .append(message)，我需要将这些行限制为 50 或 100，并且我不需要限制每行的字符数。

如果有一种方法可以限制 JTextArea 中的行数，或者是否有另一种方法？

我真的可以在这件事上使用帮助。

**编辑**

问题是每个客户端可以发送无限行，所有这些行都必须是可读的，所以这不是简单检查JTextArea中的行数。我需要删除旧行才能查看新行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:54:13.120

使用[它](http://java-sl.com/tip_row_column.html)来获取行和列

添加一个 DocumentFilter 来检查行数（传递 doc.getLength() 偏移量）并防止添加更多文本。

或者您可以创建一个虚拟的不可见 JTextArea 并在那里添加所有文本。然后测量最后允许的行并剪切文本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T14:45:30.810

下面是一个粗略的 DocumentFilter，它似乎可以工作。它的基本方法是让插入/追加发生，事后查询行数，如果超过最大值，则酌情从开头删除行。

当心：使用 textArea 方法计算的行数是（很可能是等待@Stani 确认）lines-between-cr，而不是布局的实际行。根据您的确切要求，它们可能适合您，也可能不适合您（如果不适合，请使用 Stan 的实用方法）

我很惊讶，不完全确定它是否安全

*   惊讶：没有调用 insert 方法，而是需要实现 replace 方法（在生产就绪代码中可能两者都有）
*   不确定是否保证 textArea 在过滤器方法中返回最新值（可能不是，那么长度检查可以包含在 invokeLater 中）

一些代码：

```
public class MyDocumentFilter extends DocumentFilter {

    private JTextArea area;
    private int max;

    public MyDocumentFilter(JTextArea area, int max) {
        this.area = area;
        this.max = max;
    }

    @Override
    public void replace(FilterBypass fb, int offset, int length,
            String text, AttributeSet attrs) throws BadLocationException {
        super.replace(fb, offset, length, text, attrs);
        int lines = area.getLineCount();
        if (lines > max) {
            int linesToRemove = lines - max -1;
            int lengthToRemove = area.getLineStartOffset(linesToRemove);
            remove(fb, 0, lengthToRemove);
        }
    }
}

// usage
JTextArea area = new JTextArea(10, 10);
((AbstractDocument) area.getDocument()).setDocumentFilter(new MyDocumentFilter(area, 3)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-08T22:24:58.203

这会更有效率吗？

```
final int SCROLL_BUFFER_SIZE = 100;
public void trunkTextArea(JTextArea txtWin)
{
    int numLinesToTrunk = txtWin.getLineCount() - SCROLL_BUFFER_SIZE;
    if(numLinesToTrunk > 0)
    {
        try
        {
            int posOfLastLineToTrunk = txtWin.getLineEndOffset(numLinesToTrunk - 1);
            txtWin.replaceRange("",0,posOfLastLineToTrunk);
        }
        catch (BadLocationException ex) {
            ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-01T23:10:50.787

我的方法将 JTextPane 的内容作为文档处理。它假定您的程序一直在一遍又一遍地将文本附加到文档的末尾，因此当您调用 doc.getCharacterElement(1) 时，您将基本上得到一个代表最早代码行的叶元素。这就是我们要删除的内容，因此我们获取该元素的开始和结束偏移量，并调用 remove 方法剪切最早的文本。

这可以通过检查字符总数是否大于一百万（如下所示）或基于您已经添加的行数来选择性地执行。

如果要基于已添加的行数，则需要一个在每次打印到 JTextPane 时都会递增的字段，以便每次打印新的文本行并且计数超过您的最大值。

```
 JTextPane pane = ...
        StyledDocument doc = pane.getStyledDocument();
        int size = doc.getLength();
        if (size > 1000000) {
            out.println("Size: " + size);
            out.println(":" + 1);
            int i = 0;
            Element e = doc.getCharacterElement(i + 1);
            int start = e.getStartOffset();
            int end = e.getEndOffset();

            try {
                doc.remove(start, end);
            } catch (BadLocationException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        } 
```

干杯!

# android - Android 键盘语言问题

> ID：12160062
> 
> 赞同：2
> 
> 时间：2012-08-28T13:13:49.433
> 
> 标签：android, keyboard

`EditText`当用户选择字段时，我想以编程方式更改键盘语言。

即：当用户点击时`EditText`，默认弹出英文键盘。但我希望阿拉伯语键盘默认打开...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:17:23.330

无法以编程方式更改用户的键盘设置。您唯一能做的就是建议用户更改它并帮助它这样做。例如，这将显示一个对话框供他们更改键盘：

```
private void showInputMethodPicker() {
    InputMethodManager imeManager = (InputMethodManager) getApplicationContext().getSystemService(INPUT_METHOD_SERVICE); 
    if (imeManager != null) {
        imeManager.showInputMethodPicker();
    } else {
        Toast.makeText(this, R.string.not_possible_im_picker, Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T14:19:49.083

您可能可以使用 EditorInfo hintLocales： [https ://developer.android.com/reference/android/view/inputmethod/EditorInfo.html#hintLocales](https://developer.android.com/reference/android/view/inputmethod/EditorInfo.html#hintLocales)

来自[https://issuetracker.google.com/issues/79549909](https://issuetracker.google.com/issues/79549909)

# dll - 用于商业应用的 MS-RL

> ID：12160065
> 
> 赞同：2
> 
> 时间：2012-08-28T13:14:11.757
> 
> 标签：dll, licensing

我想使用根据[Microsoft Reciprocal License (MS-RL) 许可的开源软件](http://spdx.org/licenses/MS-RL)

我认为我可以将开源软件用于商业目的是否正确，只要：

1.  源代码 (.dll) 随我的应用程序的分发一起提供。该dll将被动态链接。

2.  MS-RL 版权信息写在我提供的文档中

这些版权声明需要用简单的英文写...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:13:35.640

[Microsoft 互惠许可证 (MS-RL)](http://spdx.org/licenses/MS-RL)顾名思义是互惠许可证。这是自由软件许可中最常见的类型（通常称为左版许可类型）以及个人商业许可（大多数版权材料是互惠许可的，例如您在商店购买的 DVD）。

这意味着，您不仅需要保留“在”软件包“中”使用的某些部分的许可证（例如，`.dll`如果我理解你的话），还需要保留软件包的其余部分。这就是互惠的一般概念。

许可证文本本身有一个例外：

> 您可以根据您选择的任何条款许可其他完全属于您自己作品且不包含软件代码的文件。

因此，如果某些东西完全是您自己的作品，则许可的互惠性不会影响您分发的软件包中的作品（如果您的这些作品完全是您自己的作品）。

什么构成非衍生作品（这只是对完全属于您自己的作品的另一种描述）由美国版权法对 MS-RL 许可进行定义。

由于美国版权法是基于案例的，因此法律法规中没有任何内容对您有帮助。例如，无论您是静态链接还是动态链接，都不会说明您是否拥有非衍生作品。

相反，您需要代表您联系一位律师，该律师将专门审查您的软件，然后查找现有案例，破译它们并应用法律代码，以便她可以告诉您是否为您的软件提供源代码是必要与否。

与拥有强大社区并与黑客和律师在国际范围内进行讨论的 GPL 相反，MS-RL 许可证到目前为止还没有那么普遍。因此，在实践层面上什么被接受或不被接受并没有共同的知识。我想说的也没有那么多法律案件可以从中获得一些有用的信息。

如果您负担不起律师的费用，我想说最简单的方法是您接受许可的互惠性并在 MS-RL 下发布您的软件，或者（如果可以选择）您停止使用获得许可的组件多发性硬化症。

此外，您可以联系该 DLL 的原作者并要求澄清（例如，是否可以按照您的方式使用她/他的软件）。如果她/他写的是“是”，那么在 MS-RL 为您提供的内容旁边，您拥有自己的许可证。但是您需要为此联系版权所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:29:50.437

Ms-RL is a free software license, similar to, but not compatible with, the GNU GPL.

[http://www.gnu.org/licenses/license-list.html#ms-rl](http://www.gnu.org/licenses/license-list.html#ms-rl)

You can use it in a commercial application, subject to the restrictions laid out in the license. It's actually fairly plain english for a license, but you will need to read it and understand it thoroughly.

So far as I understand, you need to provide the source code to any files which include code licensed under Ms-RL. IANAL and I might just be wrong, so read the license yourself.

BTW, your question includes a wrong assumption - **a DLL is NOT source code**. [A DLL is a compiled library](http://en.wikipedia.org/wiki/Dynamic-link_library) in PE format. You would need to distribute the actual source, i.e. your .c or .cs or .java or .pl or whatever files - everything you need to build the DLLs or other files that contain the Ms-RL code.

# c# - 如何解决“无法删除 msmq”

> ID：12160070
> 
> 赞同：0
> 
> 时间：2012-08-28T13:14:38.093
> 
> 标签：c#, windows-7, msmq

![在此处输入图像描述](../Images/42f49390e9f82c9f95cf294589e14f2d.png)在我的本地机器上，我有一个无法删除的 msmq。

它说：`access is denied`。

我该如何解决这个问题？

尝试更改权限并收到以下错误：

`WSecurity descriptor cannot be set`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:22:54.223

你有更多关于你的问题的信息吗？截图什么的？它是工作中的计算机还是私人计算机？您是本地计算机上的管理员吗？

编辑：这篇文章中的更多信息：[https ://groups.google.com/forum/?fromgroups=#!topic/microsoft.public.msmq.deployment/wsmYc4yt6Ow](https://groups.google.com/forum/?fromgroups=#!topic/microsoft.public.msmq.deployment/wsmYc4yt6Ow)

编辑：确保您在具有完全控制权的安全组中

# groovy - 使用脚本运行其他测试用例

> ID：12160071
> 
> 赞同：1
> 
> 时间：2012-08-28T13:14:42.710
> 
> 标签：groovy, soapui, load-testing

我正在使用 SoapUI 进行负载测试，并且在测试用例 A 中，我有一个（groovy）脚本正在调用以运行测试用例 B：

```
import com.eviware.soapui.model.testsuite.TestRunner.Status
def tc = def tc = testRunner.testCase.testSuite.testCases["Test Case B"]
def runner = tc.run( new com.eviware.soapui.support.types.StringToObjectMap (), false )
log.info "Status: $runner.status, time: $runner.timeTaken ms.
assert runner.status != Status.FAILED : runner.reason 
```

最后两行在这里有点矫枉过正，但由于它的断言在我加载测试时失败，因为这不是线程安全的，所以我将它们包括在内。

我发现我需要将运行模式设置为“SINGLETON_AND_WAIT”，但我的问题是我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T08:21:34.213

有几种方法可以管理此问题，请查看以下调用。在您的`tc.run(...)`.

```
// 1) Simply blocking wait for test to complete.
runner.waitUntilFinished()  

// 2) actively manage the wait
runner.isRunning()

// 3) actively manage with QoS time out.
while (runner.status == Status.RUNNING) {
    assert runnner.getTimeTaken() < 1000
} 
```

# asp.net-mvc - 如何避免编写重复的 JavaScript 和 Razor 代码？

> ID：12160072
> 
> 赞同：2
> 
> 时间：2012-08-28T13:14:45.387
> 
> 标签：asp.net-mvc

在我的第一个真正的 MVC 应用程序中，我几乎在每一页都遇到了这个问题。我确定我错过了一些东西。

我目前正在处理的一个例子：

该页面有多个下拉列表（过滤器）和一个网格。我有填充过滤器的剃须刀代码，网格最初使用数据的视图模型。一切都很好，代码很干净，页面加载完美。

现在，当我选择不同的过滤器选项时，这可能会更改其他一些下拉菜单，并且肯定会更改网格中的数据。因此，我正在对我的一个控制器方法进行 ajax 调用以获取新数据。然后我必须在 JS 中重建网格以及任何已更改的下拉菜单。这只是复制 Razor 代码为初始页面加载所做的工作。

如果我在 Razor 中添加了类、属性等，这也必须在 JS 中复制。

一定有一个我错过的模式。在这一点上，我什至不在乎更新是否使用 ajax 动态完成。如果我可以在 Razor 中通过“回发”完成所有这些工作，那很好。任何可以避免这种大量代码重复的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:18:55.783

您可以创建一个`PartialView`与您的初始页面加载完全相同的内容。

```
public ViewResult Details(int id)
{
    DetailsModel model = new DetailsModel...

    return View(model);
} 
```

在上述情况下，您可能`FilterModel`是 的成员`DetailsModel`，无论哪种方式，如果您需要处理一些关于要呈现的内容的数据，您都可以创建一个部分操作方法：

```
public PartialViewResult Filters(int someParams...)
{
    FilterModel model = new FilterModel...
    return PartialView("Filters"
} 
```

然后像这样从您的视图中调用它：

```
<div id="filters">
    @Html.Action("Filters", someParams)
</div> 
```

或者这个如果`FilterModel`是成员`DetailsModel`：

```
<div id="filters">
    @Html.Partial("Filters", Model.FilterModel)
</div> 
```

当您需要在客户端更新它时，您可以再次请求该部分：

```
var filterUrl = "@Html.ActionLink("Filters")";

$(...).change(function(){
    $("#filters").load(filterUrl);
}); 
```

# backbone.js - requireJS - 参数替换

> ID：12160077
> 
> 赞同：0
> 
> 时间：2012-08-28T13:14:56.650
> 
> 标签：backbone.js, requirejs

我应该如何让它工作？

```
var param = 'someFunction';

require('views/MyView').[param](); 
```

当我运行此代码时，出现以下错误

```
SyntaxError: missing name after . operator
require('views/MyView').[renderMethod](); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:29:20.463

`.` and `[]` are kind of the same thing.

What you want is `require('views/MyView')[renderMethod]();`

`require(...)` will return the exported module, which should basically be an object with the functions as properties.

So, let's say we have:

```
var obj = {
   foo: function() { alert('foo'); }
   bar: function() { alert('bar'); }
} 
```

Then you could do:

`obj.foo();` - call a fixed name function

`obj['foo']();` - dynamic name fixed arguments

`obj['foo'].apply(this, args)` - dynamic function name and arguments.

Edit:

One more thing I noticed:

In requirejs, when you do something like this:

```
define (require, function() {
    x = require('views/Foo');
    x.bar();
} 
```

RequireJS will determine by parsing the code that you will need the 'view/Foo' module, and make sure it is loaded before executing your code.

But if you want to load a dynamic module, it won't know beforehand what module to preload, so you will have to use a callback to be notified when your module will be loaded:

```
define (require, function() {

    require('views/' + viewName, function(myView) {
        myView.bar(); // or 
        myView[dynamicFunc](); // ... 
    });
} 
```

# javascript - 如何防止 JavaScript 意外更改浏览器位置

> ID：12160083
> 
> 赞同：0
> 
> 时间：2012-08-28T13:15:19.620
> 
> 标签：javascript, html, scroll, positioning

每次我在我的网站上开始使用 JavaScript 时，它都会将我滚动到页面顶部，我该如何防止这种情况发生？该网页正在连接到一个外部 .js 文件，该文件通常从我的 .php 文件中获取信息（还没有 SQL 连接）。

所有 JS 函数都可以更改页面上的内容，而无需重新加载页面。所以像 -

```
document.getElementById('element').innerHTML=xmlhttp.responseText; 
```

这将是一场游戏，并希望在 Facebook 上！自动“捕捉”回到页面顶部是非常乏味和烦人的。有没有办法防止这种情况？

**编辑：**为了清楚起见。（非常感谢您的回复顺便说一句！）

```
<a href="#" onclick="showData(1);"><img src="./images/qstata.png" /></a> 

function showData(str)
{
if (str=="")
  {
  document.getElementById("currentactivity").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("currentactivity").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","index.php?q="+str,true);
xmlhttp.send();
} 
```

这是我正在使用的代码示例之一，我还在学习，所以我在编写代码时使用了很多不同的样式。下面是另一个例子。

```
function missionPop()
{
  var iframe= document.getElementById('missioniframe')
  iframe.style.visibility='visible';
} 
```

当我等待回复时，我要去试试你的建议 pebbl！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:21:40.980

正如我在上面的评论中所说，如果元素的内容被替换，浏览器将通过滚动到该元素的顶部来进行补偿。

您可以通过为元素分配一个固定的高度来解决这个问题，从而防止它在内容更改时调整大小。或者可能通过将您的新信息附加到元素，而不是替换它（如果这不会破坏更新点）。

**编辑：**

添加`return false;`到函数的末尾。这将抵消散列链接的影响。阅读 pebbl 的答案以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:22:35.467

# 跳跃标签

通过它的声音，您正在将 JavaScript 事件添加到`#hashtag`其 href 中的链接：

`<a href="#hashtag">Click Me</a>`

调用 undefined`#hastag`会将滚动条跳回页面顶部。无论您使用什么来应用事件侦听器功能，都必须取消单击事件以停止跳转。

## 问题

以下代码将触发您遇到的问题：

```
<a href="#" id="click_link">Click me</a>

<script type="text/javascript">

  function click_me(){
    document.getElementByTagName('body')[0].style.background = '#F00';
  }

  window.onload = function(){
    document.getElementById('click_link').onclick = click_me;
  }

</script> 
```

## 解决方案

您所要做的就是添加以下内容以防止在链接上继续点击，这将阻止#hashtag被触发，从而阻止页面跳转：

```
<a href="#" id="click_link">Click me</a>

<script type="text/javascript">

  function click_me(){
    document.getElementByTagName('body')[0].style.background = '#F00';
    return false; /// return false tells the event to cancel
  }

  window.onload = function(){
    document.getElementById('click_link').onclick = click_me;
  }

</script> 
```

但这完全取决于您用来定义事件处理程序的确切内容。

# 取消活动

## *...使用内联处理程序*

内联处理程序应被视为好像 onclick 属性将呈现为函数的主体部分。ie在评估时`click_me();return false;`实际上会转化为存在。`function(){click_me();return false;}`这就是为什么像`onclick="click_me"`你所做的只是访问一个变量而不是触发一个函数这样的事情不起作用的原因。

```
<a href="#" onclick="click_me();return false;">Click Me</a>
<a href="#" onclick="return click_me();">Click Me</a> 
```

## *...使用 js 属性处理程序*

使用属性处理程序，您将提供整个函数，而不仅仅是主体，但主体仍然相同。`return false;`是你所需要的全部。

```
<a href="#" id="my_link">Click Me</a>

<script type="text/javascript">
  window.onload = function(){
    document.getElementById('my_link').onclick = function(){
       return false;
    };
  }
</script> 
```

## *...带有 js 事件集合*

迄今为止，事件集合是在 JavaScript 中设置和管理事件的最佳方式。这样做的主要原因是您可以轻松地将多个事件处理程序应用于同一元素（不知道已经存在哪些其他处理程序），并且您可以将代码与标记分开。阻止事件继续进行的主体再次类似，`return false;`将具有相同的效果。

```
<a href="#" id="my_link">Click Me</a>

<script type="text/javascript">

  function click_me(){
    return false;
  }

  window.onload = function(){
    var elm = document.getElementById('my_link');
    if ( elm.attachEvent ) {
      elm.attachEvent('onclick', click_me);
    }
    else if( elm.addEventListener ) {
      elm.addEventListener('click', click_me);
    }
  }

</script> 
```

# php - 表格上方出现多个“回声”

> ID：12160093
> 
> 赞同：-1
> 
> 时间：2012-08-28T13:15:56.410
> 
> 标签：php, mysql, html

在我的程序中，我创建了一个可滚动的表，就滚动条显示、返回正确的数据等而言，一切正常。

奇怪的是，我不知道为什么，在表的标题上方，“echo”这个词重复了 7 次，每条记录返回一个。我的代码显然有一些缺陷，但我无法找到它，感谢任何帮助

```
 <?php
    echo "<div class='scrollableContainer'>";
    echo "<div style=' height: 125px; width: 535px; font-size: 10px; overflow: auto;'>";
    echo "<table class='referrals scrollable'>";
    echo "<thead><tr> 
            <th class='date'>Date</th>
            <th class='name'>Student Name</th>
            <th class='email'>Email</th>
            <th class='phone'>Phone</th>
            <th class='status'>Status</th>
    echo </tr></thead>";
            $query2 = "select * from students where referred_by ='$referral_id_to_use'";
            $result2 = mysql_query($query2);

            $num_rows = mysql_num_rows($result2);
            if($num_rows>0){
                 while  ($row = mysql_fetch_array($result2))
                  {
                       extract($row);
                         $student_name=$first_name.' '.$last_name;      
                 if($current_status=1)
                     {
                        $student_status="Active";
                     }else{
                        $student_status="Inactive";
                     }
        echo "<tr>\n
              <td class='date'><div>$date_joined</div></td>
              <td class='name'><div>$student_name</div></td>
              <td class='email'><div>$emailaddress</div></td>
              <td class='phone'><div>$phone_number</div></td>   
              <td class='status'><div>$student_status</div></td>
        echo </tr>";
            }
        }       
    echo "</table>";
    echo "</div>";
    echo "</div>";
    ?> 
```

额外的回声行再次出现在表格标题上方。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:17:29.157

您将单词`echo`作为 a`</td>`和之间的数据`</tr>`。

由于此处不允许使用文本，因此浏览器正在错误恢复并将其移动到允许的位置（在表格之前）。

```
<td class='status'><div>$student_status</div></td> echo </tr>"; 
```

从源中删除“回声”一词。

[通过检查生成的 HTML，并通过验证器](http://validator.w3.org)运行生成的 HTML，这种类型的东西更容易掌握，而不是仅仅将 PHP 与浏览器中的呈现进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:17:38.610

这里是：

```
echo "<thead><tr> 
        <th class='date'>Date</th>
        <th class='name'>Student Name</th>
        <th class='email'>Email</th>
        <th class='phone'>Phone</th>
        <th class='status'>Status</th>
echo </tr></thead>"; 
```

最后一行。在@Quentin 的回答中也可以看到身体。

# eclipse - 使用最新版本的 Eclipse 仍然可以进行 J2ME 开发吗？

> ID：12160094
> 
> 赞同：5
> 
> 时间：2012-08-28T13:15:59.260
> 
> 标签：eclipse, mobile, java-me

[我尝试从http://www.eclipse.org/mtj/](http://www.eclipse.org/mtj/)安装 MTJ 1.1.2 ，但重新启动后，没有出现表明插件甚至存在的新选项。由于最新版本是针对 Helios 的，恐怕该插件不再适用于 Juno 及更高版本。

是否仍然可以使用 Eclipse 开发 J2ME 应用程序？如果是这样，怎么做？如果没有，有什么替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T09:50:00.593

Eclipse Juno Oracle Java ME SDK 需要 MTJ 工具包，但它没有与 Juno 捆绑在一起，必须手动安装。因此，首先安装 MTJ 工具包。

*   转到帮助 > 安装新软件。
*   在“使用”字段中，输入此 URL：http: [//download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)
*   单击添加。发现插件后，打开移动和设备开发工具层次结构并选中 Mobile Tools for Java、Mobile Tools for Java SDK 和 Mobile Tools for Java Examples。点击下一步。在安装屏幕上选择所有插件，然后单击完成。
*   当插件版本高于 6 时，名为 org.eclipse.jetty.server_(version).jar 的 Juno 插件与 MTJ 库发生冲突。如果是，您必须通过更改其名称来阻止它加载，这样 Jar 文件就不会被解析. **例如，将其更改为：org.eclipse.jetty.server.old**

见：[http ://www.oracle.com/technetwork/java/javame/javamobile/download/sdk/index.html](http://www.oracle.com/technetwork/java/javame/javamobile/download/sdk/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T17:37:38.857

在 iOS 和 Android 出现之后，对 J2ME 的兴趣已经减弱。MTJ 项目已经闲置了一段时间，可能很快就会存档。您可以看到项目活动逐渐减少...

[http://www.eclipse.org/projects/project.php?id=tools.sequoyah.mtj](http://www.eclipse.org/projects/project.php?id=tools.sequoyah.mtj)

如果您必须为 J2ME 编写代码，您将需要继续使用旧版本的 Eclipse 或获取 MTJ 源并将其移植到新版本的 Eclipse 中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T21:34:55.550

你根本不需要插件，你可以将eclipse指向midp和cldc jar文件，编写你自己的ant/antenna脚本来打包一个midlet。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T16:55:50.593

我遇到了和你一样的问题。我所做的是继续使用 Eclipse Indigo。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-28T07:42:37.700

我发现使用 NetBeans IDE 进行 Java ME 开发更简单，尤其是使用新的 Java ME 8 SDK。所有 Oracle 示例也是 NetBeans。

# .net - Visual Studio 无法正确加载引用的项目 bin 输出（路径错误？）

> ID：12160098
> 
> 赞同：0
> 
> 时间：2012-08-28T13:16:15.133
> 
> 标签：.net, visual-studio-2010, build, output

Visual Studio 无法使用以下错误消息构建解决方案“S1”：

> 错误 8：未找到引用的程序集“D:\S0\foo\bin\Debug\foo.dll”。如果此程序集是由您的另一个项目生成的，请确保在构建该项目之前构建该项目。

引用的 foo 项目实际上最初是不同解决方案的一部分（在错误消息中称为 S0），并通过“添加现有项目”包含在内。

但是，Foo 确实在 S0 中构建良好，并且它的 bin 输出存在。由于 S0 和 S1 都是专门为 x86 构建的，因此正确的路径应该是“S0\foo\bin **\x86** \Debug\foo.dll”，因此 Visual Studio 似乎没有在正确的位置查找二进制文件。

Foo 确实在 S1 中显示了缺失的引用，这可能是由于它引用了 S0 中未包含在 S1 中的其他项目。但这应该不是问题，因为所需的二进制文件已经存在。

我手动将文件从 'bin\x86\Debug' 复制到 'bin\Debug'，虽然没有删除有关缺少引用的警告，但这实际上使 VS build S1 很好，所以显然 Visual Studio 实际上被“不寻常”弄糊涂了bin\x86\debug' 路径。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:29:57.283

您的构建输出位置是可定制的。`x86`如果项目存在其他平台配置，我相信标准的 VS 行为是创建文件夹。

这不是 Visual Studio 错误。听起来（尽管该项目在解决方案中）您有一个使用不正确路径创建的二进制引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:36:05.380

现在我正在使用一种解决方法。通过手动将 S0 中的输出路径更改为“通常”（bin\Debug），x86 bin 文件被放置在 VS 正在查找的位置，随后允许构建 S1。不过，这似乎偏离了最佳实践，所以我不认为这是一个长期的解决方案。

从我的角度来看，缺少在 x86 子文件夹中搜索 bin 文件是 Visual Studio 中的一个干净错误，因为 S0 和 S1 都专门为 x86 构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T19:43:22.080

我是这样修的。删除给出错误的项目并再次添加它们并构建它。

# java - 扩展休眠实体以添加非拥有关系，针对同一个表

> ID：12160100
> 
> 赞同：4
> 
> 时间：2012-08-28T13:16:21.827
> 
> 标签：java, hibernate, jpa

我在一个包含许多 maven 模块的大型模块化项目上工作，并且依赖关系管理非常复杂。

在我们的核心模块中，我们有一个具有许多属性的实体 BackOfficeUser。该实体用于大多数应用程序模块。

* * *

但是我的一个模块 XXX 需要使用一组实体 UserRule 来增强用户。

我想知道的是，是否可以对核心 BackOfficeUser 进行子类化以在我的应用程序中创建一个 XXXBackOfficeUser，该关系具有非实体拥有的新关系，它不需要 BackOfficeUser 的核心 db 表中的新列。

我知道我可以创建一个 DAO 并调用`rulesDAO.findByUser(BackOfficeUser user)` 但我想知道是否可以改为`XXXBackOfficeUser.getRules()`

所有这一切都没有修改许多其他模块使用的核心 BackOfficeUser 类，它不是 MappedSuperClass 或其他任何东西，而是一个常规的休眠实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:54:00.220

**不修改 BackOfficeUser 类是不可能的，但不修改 BackOfficeUser 持久化的表是可能的。**BackOffice 类需要修改的是：

```
@Inheritance(strategy = InheritanceType.JOINED) 
```

对于 Hibernate，这不会导致将额外的 DTYPE 列添加到根表中，因为 Hibernate 支持在没有鉴别器列的情况下连接继承。**没有鉴别器的联合继承是不可移植的，**因为规范不需要支持它。结果是为了定义 BackOfficeUser 的实际类型，查询将始终连接到新表。

实现大致如下：

```
//Existing BackOfficeUser, @Inheritance is added
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public class BackOfficeUser {
    @Id private Integer id;
}

//New class that extends BackOfficeUser. Will have dedicated
//table for added persistent attributes, shared attributes
//are persisted to existing table "BackOfficeUser"
@Entity
public class XxxBackOfficeUser extends BackOfficeUser {
    private String someAttribute

    @ManyToMany (mappedBy = "xxxBackOfficeUsers")
    private List<Rule> rules;
}

//New entity class which does have relation to XxxBackOfficeUser
@Entity
public class Rule {
    @Id private Integer id;

    @ManyToMany
    private List<XxxBackOfficeUser> xxxBackOfficeUsers;
} 
```

# android - 什么是 paddingStart 和 paddingEnd？

> ID：12160105
> 
> 赞同：15
> 
> 时间：2012-08-28T13:16:47.813
> 
> 标签：android, android-layout

由于几次来自 Eclipse 的自动完成框在我编写 xml 布局文件时提出 android:paddingStart android:paddingStop 。

我真的不明白这些属性应该做什么。

eclipse/javadoc 文档并没有真正 `Sets the padding, in pixels, of the start edge; see padding.`的帮助：在线文档没有对这些属性进行任何引用：http: [//developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

你能给我解释一下吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-28T13:28:30.733

阅读 Android 源代码 (View.java) 后，似乎 paddingStart 和 paddingEnd 有助于处理用户定义的字母方向（从左到右，从右到左）。

因此，paddingStart 在 LTR（从左到右）语言中被解释为 paddingLeft，在 RTL（从右到左）语言中被解释为 paddingRight。

来自 View.java (android-4.0.1) 的源代码：

```
 switch (getResolvedLayoutDirection()) {
        case LAYOUT_DIRECTION_RTL:
            // Start user padding override Right user padding. Otherwise, if Right user
            // padding is not defined, use the default Right padding. If Right user padding
            // is defined, just use it.
            if (mUserPaddingStart >= 0) {
                mUserPaddingRight = mUserPaddingStart;
            } else if (mUserPaddingRight < 0) {
                mUserPaddingRight = mPaddingRight;
            }
            if (mUserPaddingEnd >= 0) {
                mUserPaddingLeft = mUserPaddingEnd;
            } else if (mUserPaddingLeft < 0) {
                mUserPaddingLeft = mPaddingLeft;
            }
            break;
        case LAYOUT_DIRECTION_LTR:
        default:
            // Start user padding override Left user padding. Otherwise, if Left user
            // padding is not defined, use the default left padding. If Left user padding
            // is defined, just use it.
            if (mUserPaddingStart >= 0) {
                mUserPaddingLeft = mUserPaddingStart;
            } else if (mUserPaddingLeft < 0) {
                mUserPaddingLeft = mPaddingLeft;
            }
            if (mUserPaddingEnd >= 0) {
                mUserPaddingRight = mUserPaddingEnd;
            } else if (mUserPaddingRight < 0) {
                mUserPaddingRight = mPaddingRight;
            }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-30T01:09:30.323

**填充**用于在视图及其内容之间添加空白区域。

*   `android:paddingStart`在视图左侧的起始边缘设置填充
*   `android:paddingEnd`在视图右侧设置末端边缘的填充
*   `android:paddingBottom`设置底部边缘的填充
*   `android:paddingTop`设置顶部边缘的填充

[![在此处输入图像描述](../Images/8626a514b08134b108b2f77e19fb63dd.png)](https://i.stack.imgur.com/mpwbN.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-24T14:19:05.927

在使用和阅读本文时，我意识到它是 paddingStart 和 paddingEND 而不是 paddingSTOP（尽管这个元素存在）。

# c# - 在 asp.net c# 4.0 中完全以编程方式创建 Gridview

> ID：12160108
> 
> 赞同：2
> 
> 时间：2012-08-28T13:16:50.573
> 
> 标签：c#, asp.net, gridview

我想创建多个网格视图。我想从代码后面（.cs）文件中添加它们。这是我几乎可以工作的代码。但是任何人都可以找到这有什么问题吗？

**示例.aspx：**

```
 <body>
    <form id="form1" runat="server">
           <%CreateGridView();%>
    </form>
    </body> 
```

**示例.aspx.cs：**

```
 using System;
    using System.Collections;
    using System.Web.UI;
    using System.Web.UI.WebControls;

    public partial class _Default : System.Web.UI.Page
    {
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected GridView CreateGridView()
    {
    GridView gv = new GridView();
    gv.ID = "_gridview1";
    Queue q = new Queue();
    for (int i = 0; i < 20; i++)
        q.Enqueue(i);
    gv.DataSource = q;
    gv.DataBind();
    gv.Visible = true;
    return gv;
    }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T13:20:30.997

**示例.aspx：**

```
<body>
    <form id="form1" runat="server">
        <asp:PlaceHolder id="ph" runat="server"/>
    </form>
</body> 
```

**示例.aspx.cs：**

```
protected void Page_Load(object sender, EventArgs e)
{
    for (int i = 0; i < 20; i++)
    {
        GridView gv = new GridView();
        gv.ID = "_gridview" + i;
        Queue q = new Queue();
        q.Enqueue(i);
        gv.DataSource = q;
        gv.DataBind();
        ph.Controls.Add(gv);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:20:51.947

> 但是任何人都可以找到这有什么问题吗？

*   如果 GridView 是可编辑的，您将丢失用户在每次回发时所做的更改。（可用性/功能中断）
*   它不会持续到 Viewstate 并且需要在每个页面回发时重建网格。（性能问题）

一种更安全的方法可能是向页面添加一个 asp:Panel（你称之为 GridViewPlaceHolderPanel），然后在 Page_Init 事件中，在后面的代码中构建你的 GridView 并使用

GridViewPlaceHolderPanel.Controls.Add(gv);

***但是***，如果我列出的两个问题不是问题（它不可编辑，并且您希望在每次回发时都构建它），那么您的方法应该可以正常工作。

# php - PHP 5.3 动态实例化一个类而不首先设置一个变量

> ID：12160116
> 
> 赞同：0
> 
> 时间：2012-08-28T13:17:07.963
> 
> 标签：php, oop, class

好吧，这一直是我个人的问题。说我有课。

```
class One {
    public $class = 'Two';
    public $member = 'member';
}

class Two {
    public $member = 'Hey there';

    function __construct() {
        print 'Created';
    }
}

$one = new One();

// case 1: works
$two_class = $one->class;
$two = new $two_class();

// case 2: fails
$two = new {$one->class}(); 
```

有什么方法可以在不首先将名称分配给变量的情况下从类成员实例化一个类？每次我想从一个属性动态创建一个类时，我都会在里面死掉一点，我必须先填充一个变量。谁能从技术上向我解释为什么这在以下情况下不起作用：

```
print $two->{$one->method} 
```

会高兴地打印“嘿那里”吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T13:20:00.637

```
$two = new $one->class(); 
```

演示：[http ://codepad.org/64iCiWn2](http://codepad.org/64iCiWn2)

但是如果`$one->class()`是函数你会遇到大麻烦 - 它可能会令人困惑，但如果`$two_class`成为函数也会发生同样的事情

# c# - GetProperties 不能在 Linq 语句中通用

> ID：12160117
> 
> 赞同：0
> 
> 时间：2012-08-28T13:17:13.800
> 
> 标签：c#, linq

我有以下代码：

```
public static IList<SortOption> SortValues()
{
var sortValues = (from prop in typeof(SolrSchemaApp1).GetProperties(BindingFlags.Instance | BindingFlags.Public)
  where Attribute.IsDefined(prop, typeof(SolrSortAttribute)) 
  select new SortOption(prop.Name)).ToList();
return sortValues;
} 
```

其中 SolrSchemaApp1 是从名为 IsolrDocument 的接口派生的类。

我想传入 SolrSchemaApp2 的一个实例，并让我的代码从该实例而不是 SolrSchemaApp1 中选择排序属性。实际上，我想这样做：

```
public static IList<SortOption> SortValues(ISolrDocument schemaToScan)
{
var sortValues = (from prop in typeof(schemaToScan).GetProperties(BindingFlags.Instance | BindingFlags.Public)
  where Attribute.IsDefined(prop, typeof(SolrSortAttribute))
  select new SortOption(prop.Name)).ToList();
return sortValues;
} 
```

我所做的只是用不同类型的变量替换了硬编码的 SolrSchemaApp1。但是，我得到了错误

**找不到类型或命名空间名称“schemaToScan”（您是否缺少 using 指令或程序集引用？）**

我正在为在任意类上使用 GetProperties 的语法而苦苦挣扎。

如何使用 Linq 扫描作为参数传入的类的属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:20:21.270

```
replace typeof(schemaToScan) 
```

经过

```
schemaToScan.GetType() 
```

schemaToScan 是类型的实例，而不是类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:22:24.453

`schemaToScan`不是*类型*（它是*参数*），所以`typeof(schemaToScan)`没有意义。您有 3 个选项，所有选项的含义都略有不同：

1：硬编码到`typeof(ISolrDocument)`属性是否在`interface`

2：`schemaToScan.GetType()`如果属性在实现对象的具体类型上，则使用

3：使它成为一个泛型方法，`typeof(T)`如果属性在被传递的**变量**（不是对象）的声明类型上，则使用：

```
 public static IList<SortOption> SortValues<T>(T schemaToScan)
        where T : ISolrDocument
    { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:21:50.917

首先，使用`schemaToScan.GetType()`代替`typeof(schemaToScan)`--`typeof`用于获取`Type`类型名称。用于`GetType()`获取`Type`实例的。

# batch-file - 批处理文件 | 父目录

> ID：12160121
> 
> 赞同：2
> 
> 时间：2012-08-28T13:17:22.433
> 
> 标签：batch-file, directory, cmd, parent

见鬼，我是批处理文件的新手，我有一个批处理文件，例如：

```
@ECHO OFF
if not exist To_delete mkdir To_delete
if not exist resources mkdir resources
copy "C:\icon.png" "resources"

cd /d To_delete
echo The current folder is : "%CD%"
echo The icon.png is located at "CODE_I_NEED_IS_HERE"

The result should be：
The current folder is : C:\Users\Leona\Desktop\To_delete\
The icon.png is located at C:\Users\Leona\Desktop\Resource\ 
```

**注意：我不想通过CD在那个文件夹中获取icon.png的路径，我想要的是当当前文件夹为“To_delete”时检索资源文​​件夹中的文件。**

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:40:31.900

```
@ECHO OFF
if not exist To_delete mkdir To_delete
if not exist resources mkdir resources
copy "C:\Documents and Settings\mlastg\Desktop\logo.png" "resources"

cd /d To_delete
echo The current folder is : "%CD%" 
dir /s/b/A:-D "%CD%\..\resources" 
```

最后一个命令将为您提供资源文件夹中所有文件的路径。现在你可以详细说明得到你的答案

```
C:\Documents and Settings\mlastg\Desktop>batch.bat
        1 file(s) copied.
The current folder is : "C:\Documents and Settings\mlastg\Desktop\To_delete"
C:\Documents and Settings\mlastg\Desktop\resources\logo.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:31:53.600

更改为您可以使用的父目录

```
cd .. 
```

所以如果你在“To_delete”你的命令需要看起来像这样

```
cd ..\Resource 
```

进入资源文件夹

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:37:45.787

您可以使用 FOR 循环和文件修饰符来解决它`~f`。
还看`FOR /?`

```
for %%a in ("%CD%\..\resources") do set resourceDir=%%~fa
echo The icon.png is located at "%resourceDir%" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:20:04.673

您是否尝试过`../`（或`..\`适用于 Windows）？例如：`echo The icon.png is located at "..\Resource\"`

# image - 在浏览器上旋转照片

> ID：12160131
> 
> 赞同：1
> 
> 时间：2012-08-28T13:17:53.440
> 
> 标签：image, rotation

这可能与任何编码语言无关，但可能有人知道解决方法！问题是在公共文件夹下的下拉框中上传了一张照片，以便我可以与任何人共享。所以我复制了“下拉框公共链接”并想分享这个 http 链接。但是当有人在他的浏览器中打开链接时，照片会逆时针旋转 90 度，但实际照片是直立的 90 度。任何使我的照片在浏览器上正常可见的解决方案。

非常感谢...这是任何方式的链接，它是一个偶像。 [https://dl.dropbox.com/u/37811825/Photos/IMG_0172.JPG](https://dl.dropbox.com/u/37811825/Photos/IMG_0172.JPG)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:33:48.310

使用任何图片编辑软件旋转照片并再次上传。那将是最简单的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:34:10.150

我不认为这是可能的。这是 poto 的问题，您的操作系统根据图片中的元标记显示它，而浏览器显示它的真实情况。

因此，您应该在 PC 上旋转照片，然后以正确的角度再次上传！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:47:49.540

在 MAC 上

在桌面上创建一个新文件夹。右键单击（控制单击）以附加文件夹操作。您将获得文件夹操作脚本。向下到图像旋转（左或右）并附加。

然后只需将图像放在该文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-12T18:52:34.303

我在使用 Dropbox 时遇到了这个问题，可能是出于不同的原因。上传了一张我以横向保存的照片，但 Dropbox 会自动将其旋转 90°。终于意识到这张照片最初是纵向拍摄的，我根据自己的观看偏好将其旋转为横向，但是当我重新保存时，我包含了来自相机的原始照片 EXIF 数据，表明它处于纵向模式，所以我相信Dropbox 正在根据 EXIF 数据旋转图像。在没有 EXIF 数据的情况下再次保存它，Dropbox 按我的意图显示它。

# forms - TYPO3 Better Contact - 多种联系表格

> ID：12160135
> 
> 赞同：0
> 
> 时间：2012-08-28T13:18:06.580
> 
> 标签：forms, typo3, typoscript

有没有办法配置 TYPO3 *Better Contact*扩展来处理整个站点的多个表单？

在[默认配置示例](http://typo3.org/extension-manuals/sp_bettercontact/2.5.0/view/2/6/#id1187089)中，我只能看到定义的一种表单。我可以在我的页面中添加许多表单实例并更改表单 html 模板（并且在那里：使用不同的字段），但我不知道是否（或在哪里）可以定义我的表单应该使用哪个打字稿配置文件。

或者我应该在一个配置中定义所有字段（假设字段 A、B、C 和 D）并在每个实例中仅使用所需的字段（假设实例 1 中的 A 和 B 以及实例 2 中的 C 和 D 如果我想要 1 和2完全不同）？

我是一个typo3新手，所以我有点盲目......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:39:26.293

1\. 通常，您可以在插入相应页面的插件内容元素中定义几个选项（称为*Flexforms*）。您可以在“插件选项”选项卡中找到其中的大部分。flexform 中的参数会覆盖设置中的参数。如果未设置，将使用默认值。

2\. 作为替代方案，您可以在每个页面的模板中插入不同的 TypoScript 设置。*[如果您对子页面使用扩展模板](http://www.typo3-media.com/blog/article/typo3-template-design-guide.html)*，则参数将沿根线继承（覆盖）。因此，您只需更改与默认模板不同的值。

3\. 第三个选项：您可以在（根）设置中使用 TypoScript 条件。在此示例中，在页面 ID 1 上插入一个表单，在页面 ID 99 上插入另一个表单，它使用不同的 HTML 模板和不同的表单验证。在使用此代码之前，请务必了解[Typoscript 中的条件概念。](http://wiki.typo3.org/TSrefConditions#PIDinRootline)***（我使用[...]***省略了大部分设置代码）

```
[PIDinRootline = 1]
plugin.tx_spbettercontact_pi1 {

    formTemplate         = fileadmin/your-template-file01.html
    emailTemplate        = fileadmin/your-template-file01.html

    [...]

    fields {
        name {
            required     = 1
            minLength    = 3
            maxLength    = 70
            disallowed   = 0123456789<>(){}!?%&§$/+-\
        }

        [...]

    }
}
[PIDinRootline = 99]
plugin.tx_spbettercontact_pi1 {

    formTemplate         = fileadmin/your-template-file02.html
    emailTemplate        = fileadmin/your-template-file02.html

    [...]

    fields {
        name {
            required     = 0
            minLength    = 10
            maxLength    = 200
            disallowed   = <>(){}!?%&§$/+-\
        }

        [...]

    }
}
[GLOBAL] 
```

# javascript - 如果是周末 javascript，请更改日期

> ID：12160138
> 
> 赞同：-1
> 
> 时间：2012-08-28T13:18:16.050
> 
> 标签：javascript, date

如果是周末到星期一，我正在尝试更改日期，但是当我尝试继续时它不起作用。我非常喜欢 javascript。

在一些帮助下，我设法做到了：

```
 <script type="text/javascript">
function getdate()
 {
 var items = new Array();
 var itemCount = document.getElementsByClassName("date");

 for(var i = 0; i < itemCount.length; i++)
 {
     items[i] = document.getElementById("date" + (i+1)).value;
 }

for(var i = 0; i < itemCount.length; i++)
{
    items[i] = document.getElementById("date" + (i+1)).value;
    var itemDtParts = items[i].split("-");
    var itemDt = new Date(itemDtParts[2], itemDtParts[1] - 1, itemDtParts[0]);
    if (itemDt.getDay() == 6 || itemDt.getDay() == 0) {
      alert('weekend!');
      setDate(itemDt.getDate() + 2);
    }
}
 return items;
 }
 </script> 
```

但它向我显示了一些错误。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:23:45.137

`setDate()`是一个`Date`函数。因此，您需要在`Date`对象上调用它：

```
itemDt.setDate(itemDt.getDate() + 2); 
```

但是，由于您需要一个字符串列表，因此可以使用以下内容：

```
function formatDate(dt) {
  var day = dt.getDate();
  var month = dt.getMonth() + 1;
  return [day < 10 ? "0" + day : day, 
          month < 10 ? "0" + month : month, 
          dt.getFullYear()].join('-');
}

function getdate() {
  var items = [];
  var itemCount = document.getElementsByClassName("date");
  for (var i = 0; i < itemCount.length; i++) {
    var dateValue = document.getElementById("date" + (i+1)).value;        
    var itemDtParts = dateValue.split("-");
    var itemDt = new Date(itemDtParts[2], itemDtParts[1] - 1, itemDtParts[0]);
    var day = itemDt.getDay();
    itemDt.setDate(itemDt.getDate() + (day == 6 ? 2 : day == 0 ? 1 : 0));
    items.push(formatDate(itemDt));
  }
  return items;
} 
```

这是一个**[演示](http://jsfiddle.net/54xtc/)**。

# java - 马文。设置 java.library.path

> ID：12160140
> 
> 赞同：3
> 
> 时间：2012-08-28T13:18:21.147
> 
> 标签：java, maven, applet, java-native-interface, jnlp

如何`java.library.path`使用 Maven 在小程序中设置？通常我们可以通过向JVM传递参数来设置它：`-Djava.library.path=path/path2`. 但是我怎样才能让小程序从`java.library.path` **我指定的**加载本机库呢？

**PS**我使用 3rd-party Java lib，它使用 native `.dll`. 所以我认为尝试使用预加载本机库是没有用的`System.loadLibrary(relativePath);`（因为在任何情况下，第 3 方库都会重试从加载 .dll`java.library.path`然后抛出`UnsatisfiedLinkError`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:37:24.267

> 如何`java.library.path`使用 Maven 在小程序中设置？

只要本机位于应用程序的运行时类路径上，AFIAU 就不必指定路径。将它放入 JNLP 中引用为 a 的 Jar 的根目录中`nativelib`应该可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:22:45.340

您可以通过这种方式设置 java.library.path，`Maven`因为这是您在程序运行时设置的，而不是在构建时设置的。

对于小程序`PATH`来说，windows or`LD_LIBRARY_PATH`必须在浏览器启动前正确设置。

否则，您需要使用绝对路径并自己搜索 DLL 或 SO。

顺便说一句：尝试使用小程序中的共享库时，您可能会遇到安全问题。

# c# - 将 system.windows.media.brush 转换为十六进制颜色代码

> ID：12160141
> 
> 赞同：7
> 
> 时间：2012-08-28T13:18:26.817
> 
> 标签：c#, .net, windows-phone-7, colors, windows-phone-7.1

在我的 Windows phone7 应用程序中，我放置了一个画布并将其背景颜色设置为一些十六进制颜色代码。现在我无法通过 c# 代码获取十六进制颜色代码值。我使用了下面的代码，但它给出了系统中的颜色值。 windows.media.brush.Plz 帮我解答一下？

```
clr = Convert.ToString(clr1.Background); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-28T14:31:27.037

它似乎返回 a `Brush`，并且由于您设置了颜色，它应该返回 a `SolidColorBrush`。试试这个

```
var color = ((SolidColorBrush)clr1.Background).Color.ToString(); 
```

例子：

```
var color = new Color() {R = 0xF0, G = 0x10, B = 0x80};
var brush = new SolidColorBrush(color);
var hexcolor = brush.Color.ToString(); 
```

`hexcolor`等于`"#00F01080"`

# php - Facebook 提及标签新功能

> ID：12160146
> 
> 赞同：-2
> 
> 时间：2012-08-28T13:18:55.700
> 
> 标签：php, facebook, facebook-graph-api, facebook-comments

我对这个链接中解释的 Facebook 提及标签有疑问

[http://developers.facebook.com/docs/opengraph/mention_tagging/](http://developers.facebook.com/docs/opengraph/mention_tagging/)

我可以在我的站点中使用它吗facebook评论框外的网站？

我尝试使用前缀 @[user Id:user Name] 像 [562156175:some one] 但它没有出现在 Facebook 的评论中。

笔记：

> 我正在使用 facebook graph api 和 php sdk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:09:10.260

不，我认为它在文档中有所提及，但这仅适用于 Open Graph 操作，这需要得到 Facebook 的批准，然后才能使用它们进行标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:52:10.907

**您正在以正确的方式提及标记，您只是缺少一件事。**在您可以提及标记用户之前，您需要该用户对您尝试发送带有提及标记的评论的同一帖子发表评论。

我不知道为什么会这样，也许这是一个错误，或者它是预期的功能，它只是......它的方式:)

# oracle - 日期之间来自 oracle 的数据

> ID：12160148
> 
> 赞同：2
> 
> 时间：2012-08-28T13:19:02.430
> 
> 标签：oracle

我必须从距今早 2 周的 Oracle 数据库中获取数据。

它是一个复杂的查询，我在 where 子句中有这个条件。

我尝试使用之间。但徒劳无功。我确信我在计算两者之间犯了一些愚蠢的错误。

```
to_date(to_char(sysdate,'yyyy') || to_char(sgs.status_Date,'mmdd'),'yyyymmdd' )
    between (trunc(sysdate)) and trunc(sysdate) - 14 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:41:24.370

正如@valex 所说，您需要交换表达式的顺序。正如该[条件的](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions011.htm)[文档所述`BETWEEN`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions011.htm)：

> ... 的价值
> 
> ```
> expr1 BETWEEN expr2 AND expr3 
> ```
> 
> 是布尔表达式的值：
> 
> ```
> expr2 <= expr1 AND expr1 <= expr3 
> ```

你的版本有

```
your_date between trunc(sysdate) and (trunc(sysdate) - 14) 
```

这相当于

```
trunc(sysdate) <= your_date and your_date <= (trunc(sysdate) - 14) 
```

......这永远不会是真的 -`your_date`必须同时*在*今天之后和*两周前*之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:25:16.390

您应该尽快更改 BETWEEN 日期 sysdate-14 < sysdate 并且应该是第一个

```
to_date(to_char(sysdate,'yyyy') || to_char(sgs.status_Date,'mmdd'),'yyyymmdd' ) 
between (trunc(sysdate) - 14) and (trunc(sysdate)) 
```

# birt - Birt 脚本通过 Web 查看器的行为不同

> ID：12160153
> 
> 赞同：2
> 
> 时间：2012-08-28T13:19:11.293
> 
> 标签：birt

我无法通过网络运行 birt 报告。报告在 html 中运行时按预期运行，但某些脚本无法通过 Web 查看器正常工作。我已经在报告的“初始化”阶段运行了这个脚本（我知道很多行不是必需的，只是想确保我摆脱了任何可能的脚本语法错误）：

```
var inc_number;
var inc_number_old;
var contador;
var grupo;
var proveedor;
var contador_no_encaminadas;
var contador_encaminadas;
var contador_cerradas;
var estado;
var cliente_nombre;
var cliente_apellido;
contador = 0;
contador_no_encaminadas = 0;
contador_encaminadas = 0;
contador_cerradas = 0;
inc_number_old = 0; 
```

然后我在表格行中运行了另一个小脚本，触发了 onRender：

```
inc_number =  row["Incident Number"];
grupo = row["Assigned Group"];
proveedor = row["Vendor Name"];
estado = row["Status"];
cliente_nombre = row["First Name"];
cliente_apellido = row["Last Name"];

if (inc_number != inc_number_old){

    contador++;

    if (proveedor != null && grupo != "SIGMA")
        contador_encaminadas++;

    if ((proveedor == null || proveedor == "") && (grupo == "SIGMA") && (estado != "Resolved" && estado != "Closed"))
        contador_no_encaminadas++;

    if (estado == "Resolved" || estado == "Closed")
        contador_cerradas++;
}   

inc_number_old = inc_number;

vars["contador_cerradas"] = contador_cerradas;
vars["contador_incidencias"] = contador;
vars["contador_no_encaminadas"] = contador_no_encaminadas;
vars["contador_encaminadas"] = contador_encaminadas; 
```

您可能已经注意到，所有这些只是为了显示不同的计数集。我在调用此变量的表中设置了一些数据字段（上一个代码块的最后四行），因此报告显示了此计数。好吧，当通过工作区中的预览选项卡运行或点击“运行”菜单中的 html 选项时，所有这些都可以完美运行，但是当我尝试通过 Web 查看器运行它时，所有计数都显示为 0（可能是默认值）变量的值）。如果有人能在这方面给我一些帮助，我将不胜感激。不知何故，我在单元格上运行了一些其他脚本，onRender 也是，无论我选择哪个预览选项，它们都可以正常工作。

ps 我正在使用 Birt v2.5.1，我知道它有点旧，但它是唯一支持与 BMC Remedy ARS 集成的版本，而这正是我需要的。谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T18:27:20.547

BIRT 对“直接”输出有不同的脚本流，对 Web 查看器有不同的脚本流。有两个报告创建阶段：“生成”和“呈现”，请参阅[BIRT 事件流程图](http://www.eclipse.org/birt/phoenix/deploy/reportScripting.php#events)。在“直接”生成中`onCreate`，`onRender`事件通过生成阶段（onCreate row 1 ; onRender row 1 ; onCreate row 2 ; onRender row 2 等）混合并触发。`initialize`首先，脚本执行一次。

相反，Web Viewer 有分裂的生成和呈现阶段：首先全部`onCreate`执行，然后报告虚拟关闭（认为“所有脚本数据都丢失了”），然后全部`onRender`执行。`initialize`执行两次，第一次在生成阶段之前（onCreate），第二次在表示阶段之前（onRender）。`onRender`可能无法访问`row['...']`变量，但可以访问它的报表元素属性，例如`this.foo`.

将所有数据操作都放在脚本中`onCreate`而不是`onRender`脚本是很好的，因为脚本变量保持在一个一致的阶段。演示，对于某些页面*可能会*被省略（我不确定），因此在 Web 查看器中的页面之间跳转时您*可能会*得到错误的结果。

如果您必须在生成和呈现阶段之间传递一些数据，则必须将其存储在*持久性全局变量*中：

```
setPersistentGlobalVariable("name", value); //in generation phase
...
var value = getPersistentGlobalVariable("name"); //in presentation phase 
```

无需在报表设计器中定义该变量，只需使用上面的函数即可。使用持久性全局变量时可能会遇到一个小陷阱——它们必须在 Java 中是可序列化的（对于某些 Java 数据类型来说，这不是明显的特性）。

# android - 为什么从 sd 卡加载 url 在使用 phonegap 的 android ICS 中不起作用？

> ID：12160154
> 
> 赞同：1
> 
> 时间：2012-08-28T13:19:10.303
> 
> 标签：android, cordova, android-4.0-ice-cream-sandwich

您好，我正在开发基于 phonegap 的 Android 应用程序，我使用的是 cordova 2.0，当我尝试从 sd 卡加载索引文件时，它显示发生网络错误并且不加载文件，但这仅发生在 ICS 上，但它正在工作在 3.0 及更低版本上

当我从资产加载文件时它工作正常但问题是当我从 sd 卡加载它时

这是我的代码`public class ApplicationView extends DroidGap { WebView appWebView;

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    String destDirectory = Environment.getExternalStorageDirectory()
            + "/DroidLibrary/leftbankappunzipped/www/LeftBankInt/index.html";

    String url = "file:///" + destDirectory;

    super.init();
    super.clearCache();
    super.clearHistory();
    super.loadUrl(url,10000);

}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:03:48.760

您是否在清单文件中授予了读取存储权限。

```
<permission name="android.permission.READ_EXTERNAL_STORAGE" >
</permission> 
```

[权限文档](http://developer.android.com/reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T02:41:05.950

我曾经遇到过这个问题，最后发现是因为意外的代码行，调用

```
WebView.getSettings().setAllowFileAccess(false); 
```

看看这对您的情况是否有帮助。

# xml - 枚举的 JAXB 注释

> ID：12160156
> 
> 赞同：1
> 
> 时间：2012-08-28T13:19:15.690
> 
> 标签：xml, enums, annotations, jaxb

我有以下枚举定义：

```
public enum MyEnumeration{

  ENUM_ONE("1","foo"),
  ENUM_TWO("2","bar");

  private String code;
  private String description;

  public String getDescription()
  {
     return this.description;
  }

  public String getCode()
  {
     return this.code;
  }    
} 
```

我想用 Jaxb 注释对其进行注释，以便将其编组到以下 xml 中。

```
<myenumeration>
  <code>...</code>
  <description>...</description>
</myenumeration> 
```

我尝试了几种方法，但都没有成功。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:24:23.920

您可以编写一个`XmlAdapter`将枚举转换为具有这些属性的域对象。有关使用示例，`XmlAdapter`请参见：

*   [http://blog.bdoughan.com/search/label/XmlAdapter](http://blog.bdoughan.com/search/label/XmlAdapter)

# jquery - 在 jqgrid 中读取可编辑的输入值

> ID：12160165
> 
> 赞同：2
> 
> 时间：2012-08-28T13:19:55.300
> 
> 标签：jquery, jqgrid

我有以下内联可编辑网格

```
var lastsel;
$("#mygrid").jqGrid({
        数据：JqgridResponse.rows，
        数据类型：“本地”，
        colNames:['DATE', 'SOURCE', 'DEST', 'FROM', 'TO'],
        col型号：[   
                  //1140 宽度
            {name:'time', index:'time', width:170 ,sortable:false},
            {name:'source', index:'source', width:290,sortable:false,editable:true,editoptions:{size:"33",maxlength:"50"}},
            {name:'dest', index:'dest', width:290,sortable:false,editable:true,editoptions:{size:"33",maxlength:"50"}},
            {name:'from', index:'from', width:170,sortable:false,editable:true, edittype:"select",editoptions:{value:"us:US;gb:GB;fr:FR"} },
            {name:'to', index:'to', width:170,sortable:false,editable:true, edittype:"select",editoptions:{value:"us:US;gb:GB;fr:FR"} }
        ],
        多选：真，
            行号：假，
        行号：10，                                      
        行列表：[10,50,100]，                            
        高度：“100%”，
        自动宽度：真，
        寻呼机：'#pager'，                                
            观看记录：真实，                              
            排序顺序：“desc”，
            ondblClickRow：函数（id）{           
                if(id && id!==lastsel){
                jQuery('#mygrid').jqGrid('restoreRow',lastsel);
                jQuery('#mygrid').jqGrid('editRow',id,true);
                lastsel=id;
            }
            }

    });

```

还有一个导航按钮及其事件

```
$("#mygrid").navButtonAdd('#pager',
        { 标题：””，
            buttonicon:"ui-icon-disk",
            onClickButton：更新位置，
            标题：“更新位置”，
            光标：“指针”
        }
);

函数更新位置（obj，args）{
    //如何获取编辑后的数据源，dest，from，to？
}

```

**如何在 updateLocations 方法中获取“source”和“dest”的编辑输入值以及“from”和“to”的选定值？**

我试图在 Firebug 中找到已编辑的行，但输入根本没有值！例如对于“来源”

```
<td aria- describeby="mygrid_source" title="N-finger" style="" role="gridcell">
<input id="36_source" class="editable" type="text" size="33" maxlength="50" name="sourcespan" role="textbox">
</td>

```

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:41:26.667

您应该使用[`saveRow`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#saverow)来保存任何编辑；调用`restoreRow`只会将该行恢复为之前的值。

我不相信有一种方法只能获取您的更改，但是您可以使用具有顶级范围的数组来跟踪所有更改的行。然后您需要修改`ondblClickRow`以使用该数组来跟踪已修改的每个行 ID。然后，`updateLocations`您可以使用`getRowData`获取这些行中的每一行的数据，并（例如）通过 POST 将其保存到服务器。

# css - 使用 css 背景图像的图像翻转

> ID：12160171
> 
> 赞同：0
> 
> 时间：2012-08-28T13:20:25.580
> 
> 标签：css, image, rollover

我已经探索了创建图像翻转效果的替代方法（CSS 和 javascript）。在此过程中，我使用一种特定的 CSS 方法遇到了无法解释的行为：

```
.main-banner a#link1{
    background-image: url(images/yellow-button_03.png);
    background-repeat: no-repeat;   
    width:310px;
    height:85px;
    top:190.2px;
    left:277px;
} 

.main-banner a:hover#link1{

    background-image: url(images/yellow-button-bright_03.png);
    background-repeat: no-repeat;

} 
```

此方法使用背景图像创建热点。在鼠标悬停时，图像被替换为具有完全相同尺寸的不同颜色的按钮。

在第一次鼠标悬停时，会出现非常轻微的闪烁，因为翻转图像仅是第一次初始化。该事件仅在样式表的第一个缓存之后发生。

我的问题如下：

鉴于 CSS 已完全加载，为什么会发生这种行为？

该行为是否表明在初始鼠标悬停事件之前未加载 css 背景翻转图像？然而，这种情况并非如此。

请不要为复制翻转功能提供替代解决方案。这不是问题。

我只想了解为什么第一次翻车时会有轻微的闪烁。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:30:49.213

```
.main-banner a#link1:hover{

    background-image: url(images/yellow-button-bright_03.png) no-repeat;

} 
```

Generally pseudo classes written after selector, `a or a#link1` is selector so you should write `a#link1:hover`

Checkout this [http://jsfiddle.net/d5RpE/1/](http://jsfiddle.net/d5RpE/1/)

@Tuanderful - exactly so in this condition we can use "image spriting", so that when first time :hover event will occur - image will not fluctuate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:47:05.260

尽管 CSS 已完全加载，但我认为 CSS 中引用的所有元素在需要时才会加载。换句话说，`yellow-button_03.png`在页面首次加载时加载以呈现链接，但我相信`yellow-button-bright_03.png`只有在您将鼠标悬停在链接上之后才会加载。

# google-chrome - 始终接受 webRTC 网络摄像头请求

> ID：12160174
> 
> 赞同：25
> 
> 时间：2012-08-28T13:20:37.900
> 
> 标签：google-chrome, webcam, webrtc

我正在构建一个通过 webRTC 使用计算机网络摄像头的网络应用程序。该站点仅在一台特定的机器上运行，该机器每天会关闭并重新启动一次。

我的问题是：如何让机器在网站加载后自动确认网络摄像头对话？

该系统是带有最新 Chrome 的 OSX Leopard。已经谢谢了，我愿意接受任何事情。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-14T11:27:55.427

**Firefox**：（你必须告诉用户喜欢..）

*   进入网址`about:config`

*   搜索`media.navigator.permission.disabled`

*   dbClick 或将**值**设置为`true`

*测试版本：23.0 +* *（和 43.0.4 仍在工作）*

* * *

**Chrome**：[https](https://stackoverflow.com/a/16929608/622813) ://stackoverflow.com/a/16929608/622813或使用**HTTPS**

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-29T08:09:27.690

根据 Chromium 开发人员的说法，目前没有选项可以配置您的浏览器以允许使用相机，除非您使用“始终允许”对话框 - 只有在使用 HTTPS 提供站点时才会显示该对话框。这意味着，如果您使用 HTTPS 提供 HTML 页面，并且一旦确认“始终允许”选项，它应该从那里开始工作。以下是一系列链接，您可以在其中找到相同或相似问题的答案：

1.  [Chromium 问题 143372：允许 http://localhost 的“始终允许”](http://code.google.com/p/chromium/issues/detail?q=WebRTC&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20Area%20Feature%20Status%20Owner%20Summary&id=143372)
2.  [WebRTC：允许 Chrome 通过 Chrome 扩展访问麦克风](https://stackoverflow.com/questions/12088980/webrtc-allow-chrome-to-access-microphone-via-chrome-extension)
3.  [http://www.chromium.org/developers/web-platform-status](http://www.chromium.org/developers/web-platform-status)（请参阅 WebRTC 部分）：“对于权限对话框：Chrome 仅对使用 https 的站点显示“始终允许”以提高安全性。”
4.  讨论 WebRTC Google Group：[在启用 webrtc 的 Chrome 中自动允许相机访问请求](https://groups.google.com/forum/#!msg/discuss-webrtc/gthj_fKKGKM/AknAl6o-UW8J)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-07-19T14:08:58.203

**有一个 Chrome 选项：（** *这适用于**http**和**https**）*

```
--use-fake-ui-for-media-stream 
```

* * *

**- 窗户：**

```
start chrome --use-fake-ui-for-media-stream 
```

**- GNU/Linux：**

```
google-chrome --use-fake-ui-for-media-stream 
```

*也许这只是时间问题，但它不适用于我在 Ubuntu 上的 chromium。我必须从[google chrome 网站](https://www.google.com/intl/en/chrome/browser/)获取 .deb 。*

**- 苹果电脑 ：**

```
Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --use-fake-ui-for-media-stream 
```

* * *

这在开发/测试环境中可能很有用。

# c++ - C++：使用 pthread_create 创建新线程，以运行类成员函数

> ID：12160175
> 
> 赞同：1
> 
> 时间：2012-08-28T13:20:40.590
> 
> 标签：c++, multithreading, pthreads

我有以下课程：

```
class A
{
    private:
        int starter()
        {
             //TO_DO: pthread_create()
        }

        void* threadStartRoutine( void *pThis );
} 
```

我想从 starter() 内部创建一个线程来运行 threadStartRoutine()。我得到关于第三个参数的编译时错误，它应该采用启动例程的地址。

调用 pthread_create() 以创建开始执行 threadStartRoutine() 的新线程的正确方法是什么？

我在网上看到一些文章说大多数编译器不允许使用 pthread_create() 调用非静态成员函数。这是真的？这背后的原因是什么？

我正在使用 G++ 在 Linux-x64 上编译我的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:22:53.943

声明`threadStartRountine()`为`static`：

```
static void* threadStartRoutine( void *pThis ); 
```

否则，类型`threadStartRoutine()`为：

```
void* (A::*)(void*) 
```

这不是所需的函数指针类型`pthread_create()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:24:06.410

你有使用 pthread 的理由吗？c++11 就在这里，为什么不直接使用它：

```
#include <iostream>
#include <thread>

void doWork()
{
   while(true) 
   {
      // Do some work;
      sleep(1); // Rest
      std::cout << "hi from worker." << std::endl;
   }
}

int main(int, char**)
{

  std::thread worker(&doWork);
  std::cout << "hello from main thread, the worker thread is busy." << std::endl;
  worker.join();

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T13:26:16.203

只需使用普通函数作为包装器。正如 hjmd 所说，静态函数可能是最好的普通函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:30:50.403

如果你坚持使用原生 pthreads 接口，那么你*必须*提供一个普通函数作为入口点。一个典型的例子：

```
class A
{
private:
    int starter()
    {
        pthread_t thr;
        int res = pthread_create(&thr, NULL, a_starter, this);
        // ...
    }
public:
    void run();
};

extern "C" void * a_starter(void * p)
{
    A * a = reinterpret_cast<A*>(p);
    a->run();
    return NULL;
} 
```

# jquery - Jquery Dialog在数据库中保存信息

> ID：12160176
> 
> 赞同：0
> 
> 时间：2012-08-28T13:20:44.503
> 
> 标签：jquery

我是使用 Jquery 编程的初学者。我用作编辑信息的对话框，必须将它们保存在数据库中。但是我不知道该怎么做，有人可以帮我吗？（编辑：从葡萄牙语翻译）

```
$('#dialog').dialog({
    autoOpen: false,
    width: 600,
    show: 'clip',
    hide: 'clip',
    modal: true,
    buttons: {
        "Save": function() {
            $('form').submit();
            $(this).dialog('close');
        },
        'Cancel': function() {
            $(this).dialog('close');
        }
    }
});

$('#dialog_link').click(function() {
    $('#dialog').dialog('open');
    return false;
}); 
```

奥布里加达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:27:06.967

如果您正在提交表单，页面会立即刷新，因此 .dialog("close") 是不必要的。所有其他行看起来都不错，如果它不起作用，那么这不是 jQuery 问题。

# knockout.js - 如何访问已编译模板中的“$index”：{name: 'xyz', foreach: ArrayItens}？

> ID：12160179
> 
> 赞同：0
> 
> 时间：2012-08-28T13:20:55.017
> 
> 标签：knockout.js, jquery-templates, knockout-2.0, cassette

我使用[Cassette](http://getcassette.net/)工具编译以下模板：

```
<tr>
    <td>
        <input 
            data-bind="value: Tipo, attr: { name: 'Telefones[' + $index + '].Tipo' }" 
            class="span2"
            placeholder="Tipo" 
            type="text">
        <input 
            data-bind="value: Id" 
            type="hidden">
        <input 
            data-bind="value: Ordem"
            type="hidden">
    </td>
    <td>
        <input 
            data-bind="phone: Numero, value: Numero"
            class="span2" 
            placeholder="Número" 
            type="text">
    </td>
    <td>
        <button data-bind="click: deletePhone" rel="nofollow">
            <i class="icon-trash"></i>
        </button>
    </td>
</tr> 
```

在我看来：

```
<tbody data-bind="template: { name: 'rowTelefone', foreach: Telefones }"></tbody> 
```

### 问题

我知道 KnockoutJS 支持`$index`，但是当模板编译时`$index`不再存在。

**如何访问已`$index`编译的模板？**

# jquery - Jquery Mobile iPhone级联自定义样式选择框刷新未在iPhone ui选择器中更新

> ID：12160180
> 
> 赞同：0
> 
> 时间：2012-08-28T13:20:56.050
> 
> 标签：jquery, iphone, mobile

我有一个级联状态到城市选择框对。用户选择一个州，ajax 例程用数据库中的州城市更新城市选择框。

选择框具有自定义样式。

iPhone用户流程：

1.  用户按下状态框
2.  iphone原生选择框ui画面从底部弹出
3.  用户选择合适的状态
4.  城市框会更新和刷新，但原生 Iphone ui 选择框选择器值不会更新。

如果用户按下完成按钮，然后按下城市选择框，它工作正常。

我需要 Iphone 原生 ui 来更新它的值。

```
$('#select_destination_state').live('change',function(e)  {

  var stateVal = $(this).val();
  dstate = stateVal;
    $.ajax({
        url: '/inc/cityhandler.php?state='+ stateVal,

        success: function(data) {
          //alert(data);
          $('#select_destination_city').html(data);
          $('#select_destination_city option:first-child').attr("selected", "selected");
          $('#select_destination_city').selectmenu();
          $('#select_destination_city').selectmenu("refresh", true);

          select_to_miles(currSeg); //ajax function to get mileage

        }
      });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:59:40.777

您可以在此处找到有关此问题的许多建议和解决方法：[在 Mobile Safari 下拉列表项选择框上使用“下一步”时 select/dropdown 的 onchange() JS 事件的奇怪行为](https://stackoverflow.com/questions/5960731/strange-behavior-of-select-dropdowns-onchange-js-event-when-using-next-on-m)

# java - 在 Java 中打印堆栈值

> ID：12160183
> 
> 赞同：13
> 
> 时间：2012-08-28T13:21:01.793
> 
> 标签：java, stack

在 Java 中，我想打印*Stack*的内容。该`toString()`方法将它们打印在用逗号分隔的方括号中：`[foo, bar, baz]`.

如何摆脱它们并仅打印变量？

到目前为止我的代码：

```
Stack myStack = new Stack ();

for(int j=0; j<arrayForVar.length; j++) {
    if(arrayForVar[j][1] != null) {
        System.out.printf("%s \n", arrayForVar[j][1] + "\n");
        myStack.push(arrayForVar[j][1]);
    }
}

System.out.printf("%s \n", myStack.toString()); 
```

**这个答案对我有用：**

使用`toString`堆栈上的方法，并使用`replaceAll`方法将方括号的所有实例替换为空白字符串。像这样：

```
System.out.print(
    myStack.toString().replaceAll("\\[", "").replaceAll("]", "")); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T13:36:40.510

有一种解决方法。

您可以将其转换为数组，然后使用以下命令打印出来`Arrays.toString(Object[])`：

`System.out.println(Arrays.toString(myStack.toArray()));`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-23T19:23:57.950

```
stack.forEach(System.out::println); 
```

使用 Java 8 及更高版本的流函数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T13:24:08.443

使用与填充堆栈并打印您喜欢的单个元素相同的循环。没有办法改变 的行为`toString`，除非你走子类化的路线`Stack`，我不建议这样做。如果源代码`Stack`在您的控制之下，那么只需修复`toString`那里的实现即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-16T21:32:08.373

用于`toArray()`打印堆栈值

```
public void printStack(Stack<Integer> stack) {

    // Method 1:
    String values = Arrays.toString(stack.toArray());
    System.out.println(values);

    // Method 2:
    Object[] vals = stack.toArray();
    for (Object obj : vals) {
        System.out.println(obj);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-11T07:08:38.353

另一种方法是`join`String 的方法，它类似于 Python 的 join 方法：

```
"" + String.join("/", stack) 
```

这将返回包含堆栈所有元素的字符串，我们还可以通过传入第一个参数来添加一些分隔符。

示例：堆栈有两个元素 [home, abc]

然后这将返回“/home/abc”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T13:33:24.260

在这里向池中提出建议。根据您的 Stack 实现，这可能会也可能不会。

该建议是在这种特殊情况下覆盖 toString() 的匿名内部类。这是在本地实现 Marko 提到的子类化的一种方法。您的 Stack 实例化看起来像

```
Stack s = new Stack(){
              public String toString(){
                 // query the elements of the stack, build a string and
                 return nicelyFormattedString;
              }
          };
... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-28T13:28:43.683

From documentation of toString() method of `AbstractCollection`. So you can not do it unless you define your own `Stack`Or implement custom toString() by iterating over `Stack`

**public String toString()**

> Returns a string representation of this collection. The string representation consists of a list of the collection's elements in the order they are returned by its iterator, enclosed in square brackets ("[]"). Adjacent elements are separated by the characters ", " (comma and space). Elements are converted to strings as by String.valueOf(Object).
> 
> This implementation creates an empty string buffer, appends a left square bracket, and iterates over the collection appending the string representation of each element in turn. After appending each element except the last, the string ", " is appended. Finally a right bracket is appended. A string is obtained from the string buffer, and returned.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-17T05:51:08.217

```
while(!myStack.isEmpty()) {
    System.out.print(myStack.pop());
} 
```

您将打印堆栈的第一个元素并将其弹出，重复直到堆栈为空

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-08-30T12:56:39.973

尝试这个：

```
 System.out.println(Arrays.asList(stackobject.toArray()));
 System.out.println(Arrays.toString(stackobject.toArray())); 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2022-01-14T21:53:42.187

```
 Stack <String> Cars=new Stack();
 Cars.push("Lambo Urus");
    Cars.push("Honda Civic");
    Cars.push("Ford Mustang");

   while(!Cars.isEmpty()){
                System.out.println(Cars.pop());
            } 
```

# matlab - 如何从命令行在 MATLAB 中保存图形？

> ID：12160184
> 
> 赞同：38
> 
> 时间：2012-08-28T13:21:01.520
> 
> 标签：matlab, save, figure

MATLAB 中是否有一个命令可以自动将图形保存为[FIG](http://www.mathworks.se/help/techdoc/creating_plots/f9-34066.html)或[JPEG](http://en.wikipedia.org/wiki/JPEG)或两种格式？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-28T13:33:42.223

使用[另存为](http://www.mathworks.nl/help/techdoc/ref/saveas.html)：

```
h=figure;
plot(x,y,'-bs','Linewidth',1.4,'Markersize',10);
% ...
saveas(h,name,'fig')
saveas(h,name,'jpg') 
```

这样，图形被绘制出来，并自动保存为“.jpg”和“.fig”。您无需等待绘图出现并单击菜单中的“另存为”。如果您需要绘制/保存大量数字，则可以走的路。

如果你真的不想让情节出现（无论如何都必须加载，无法避免，否则也没有什么可保存的），你可以隐藏它：

```
h=figure('visible','off') 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-07-27T23:05:17.827

使用saveas功能时分辨率不如手动保存图形文件->另存为...，更推荐使用[hgexport](http://de.mathworks.com/help/matlab/ref/hgexport.html)代替，如下：

```
hgexport(gcf, 'figure1.jpg', hgexport('factorystyle'), 'Format', 'jpeg'); 
```

这将与手动保存图形完全相同。

来源： [http ://www.mathworks.com/support/solutions/en/data/1-1PT49C/index.html?product=SL&solution=1-1PT49C](http://www.mathworks.com/support/solutions/en/data/1-1PT49C/index.html?product=SL&solution=1-1PT49C)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T13:31:34.927

我不认为你可以在它不出现的情况下保存它，但只是为了以多种格式保存，请使用*print*命令。请参阅此处发布的答案：[Save an imagesc output in Matlab](https://stackoverflow.com/questions/12146112/save-an-imagesc-output-in-matlab)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-31T11:04:43.160

如果要将其保存为 .fig 文件，hgsave 是 Matlab R2012a 中的函数。在以后的版本中， savefig 也可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-12T10:09:17.900

`imwrite(A,filename)` writes image data A to the file specified by filename, inferring the file format from the extension

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-26T11:54:45.403

如今（2017 年 5 月），MATLAB 仍然存在一种强大的导出图形的方法，尤其是在 GNU/Linux 系统中以批处理模式导出图形时。最好的选择是使用扩展[export_fig](https://github.com/altmany/export_fig)

只需从 Github 下载源代码并使用它：

```
plot(cos(linspace(0, 7, 1000)));
set(gcf, 'Position', [100 100 150 150]);
export_fig test2.png 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-01-30T20:33:30.870

尝试情节（var）；saveFigure('title'); 它会自动保存为jpeg

# javascript - Reg Ex 匹配失败

> ID：12160188
> 
> 赞同：1
> 
> 时间：2012-08-28T13:21:17.747
> 
> 标签：javascript, regex, string, variables, pattern-matching

我试图匹配以下格式：<任意数量的 az AZ 字符>

使用`"^<\w*>$";`

代码是：

```
var predefinedListRegEx = "^<\w*>$";
var dataFill = "<aaaa>"; 
var predefined_List = dataFill.match(predefinedListRegEx);

if (predefined_List != null) {
        //MATCHES THE CONDITION
    } 
```

似乎无法让它工作..我哪里出错了？

同样，一旦我得到匹配的字符串，我想减去 <> 输出的内容并使用它来引用变量。

```
var vacba = 0 
```

例如

然后到`vacba = 10;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:23:16.433

您的正则表达式是字符串，而不是正则表达式。尝试：

```
var predefinedListRegEx = /^<\w*>$/; 
```

如果由于某种原因您需要使用通过 转换为正则表达式的字符串，则`match`必须转义斜杠：

```
var predefinedListRegEx = "^<\\w*>$"; 
```

**回应您的编辑，提出更多要求**：

使用带括号的匹配组：

```
var predefinedListRegEx = /^<(\w*)>$/;
var dataFill = "<aaaa>"; 
var predefined_List = dataFill.match(predefinedListRegEx); 
```

这将设置`predefinedListRegEx`为一个数组，如：`["<aaaa>", "aaaa"]`。

如果您想使用字符串 in`predefined_List[1]`作为变量名（例如， to do `aaaa = 10`），您可能不需要使用`eval`. 如果变量是全局变量，则可以简单地使用`window[predefined_List[1]]`，因为所有全局变量都是`window`对象的属性。如果它不是全局的（或者如果你只是想成为一个整洁的 JavaScript 程序员而不是过度使用全局命名空间），你最好只在一个包含你的值的对象上使用引用属性，例如`variablesNamedInMyRegexes[predefined_List[1]] = 10;`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T13:27:16.640

您使用字符串作为正则表达式数据的容器。当您在匹配中使用时，它将被隐式转换为真正的正则表达式，但您需要正确引用在字符串文字中具有特殊含义的符号 - 在这种情况下`\`。

```
var predefinedListRegEx = "^<\\w*>$"; 
```

此外，每次调用的隐式转换都会降低性能，因此您确实应该使用真正的构造函数，如 apsillers 所述：

```
var predefinedListRegEx = /^<\w*>$/; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:35:06.973

使用以下正则表达式：

```
result = dataFill.match(/<(\w*)>/); 
```

这将返回匹配项和捕获组的内容作为第二个值。

现在您可以使用如下`[]`符号将其用作变量名：

```
window[result[1]] = "whatever"; 
```

这将创建一个全局变量。当然，最好使用您自己的命名空间而不是全局对象。

# objective-c - 如何从另一个 UIViewController 重新加载 UITableViewController

> ID：12160190
> 
> 赞同：0
> 
> 时间：2012-08-28T13:21:21.287
> 
> 标签：objective-c, ios, tableview, viewcontroller

我想从另一个视图控制器重新加载一个表格视图（我正在处理 PSStackedViewExample [https://github.com/steipete/PSStackedView](https://github.com/steipete/PSStackedView)）。我进行修改的 UIViewController 在我的 UITableViewController 上有点，并且我正在对我的 TableView 上当前的数据进行更改，这就是为什么我想重新加载 tableview 以在我修改 UIViewController 上的某些内容时直接查看更改。

我无法访问它...每次我对此感到疯狂，你能帮帮我吗？

在 PSStackedViewExample 项目中，我说的 UITableViewController 是 ExampleViewController2。我正在谈论的 UIViewController 是：ExampleViewController1

这是一些代码，以防您不下载项目：

ExampleMenuRootController 是主控制器，它调用 UITableViewController

.h 首先 ->

```
#import <UIKit/UIKit.h>
#import "Guest.h"

@interface ExampleMenuRootController : UIViewController <UITableViewDataSource, UITableViewDelegate> {
    UITableView *menuTable_;
    NSArray *cellContents_;
    singleObjGetData * sObjDataForRootVC;
    UIViewController *viewController;
}
@property (nonatomic, retain)  UIViewController *viewController;
@property (nonatomic,strong) NSManagedObjectContext* managedObjectContext;
- (void)checkDictionnaryForIndexPathForFunction;
-(IBAction)showTable:(id)sender;
- (void)checkDictionnaryForIndexPath:(NSString *)check;
@end 
```

.m ->

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    PSStackedViewController *stackController = XAppDelegate.stackController;
     viewController = nil;

        [sObjDataForRootVC.tmpGuest removeAllObjects];
        [self checkDictionnaryForIndexPath:@"0"];
        [self checkDictionnaryForIndexPath:@"1"];
        [self checkDictionnaryForIndexPath:@"2"];
    if (indexPath.row > 0 && indexPath.row < 4)
    {
    [sObjDataForRootVC.tmpGuest removeAllObjects];
    [self checkDictionnaryForIndexPath:[NSString stringWithFormat:@"%i", indexPath.row - 1]];
    }
    if (indexPath.row > 3 && indexPath.row < 8)
    {
        [sObjDataForRootVC.tmpGuest removeAllObjects];
        [self checkDictionnaryForIndexPathForFunction];
    }

    while ([stackController.viewControllers count]) {
        [stackController popViewControllerAnimated:YES];
    }

// HERE I CALL THE UITABLEVIEWCONTROLLER !!!

    viewController = [[ExampleViewController2 alloc] initWithStyle:UITableViewStylePlain];     
    ((ExampleViewController2 *)viewController).indexNumber = [stackController.viewControllers count];

    if (viewController) {
        [XAppDelegate.stackController pushViewController:viewController fromViewController:nil animated:YES];
    }
} 
```

然后在下面，UIViewController 的 .h 将修改 UITableView。我需要从以前的 UITableViewController 对 tableview 执行 reloadData

```
#include "PSStackedViewDelegate.h"
#import "AppDelegate.h"

@interface ExampleViewController1 : UIViewController <PSStackedViewDelegate, UITextFieldDelegate>
{
    IBOutlet UIButton *validateBtn;
    IBOutlet UIButton *cancelBtn;

    singleObjGetData *sObjDataForRootVC;
} 
```

他们

```
#import "ExampleViewController1.h"
#import "ExampleViewController2.h"
#import "ExampleMenuRootController.h"
#import "PSStackedView.h"

@implementation ExampleViewController1

#pragma mark - View lifecycle

- (void)viewDidLoad {

    sObjDataForRootVC  = [singleObjGetData singleObj];
    confirmPressed = NO;
    [self setUpView];

    [super viewDidLoad];
    self.view.width = PSIsIpad() ? 400 : 150;
} 
```

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-14T05:23:16.703

您可以通过在第二个 tableview 中设置一个通知来调用第一个 tableview 上的 reloadData 来做到这一点。把它放在你的第二个 tableView 中：

```
[[NSNotificationCenter defaultCenter]
 postNotificationName:@"refreshData"
 object:nil
 userInfo:nil//userInfoDictionary
 ]; 
```

在你的第一个 tableView 中放这个：

```
[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(methodToRefreshYourFirstTable)
 name:@"refreshData"
 object:nil]; 
```

# android - 当我在 Android 上运行 Libgdx 项目时，代码的更改没有反映出来

> ID：12160191
> 
> 赞同：4
> 
> 时间：2012-08-28T13:21:25.220
> 
> 标签：android, eclipse, libgdx

我一直在[这里](http://obviam.net/index.php/getting-started-in-android-game-development-with-libgdx-create-a-working-prototype-in-a-day-tutorial-part-1/ "使用 libgdx 开始 Android 游戏开发 - 在一天内创建一个工作原型 - 教程第 1 部分")关注 Libgdx 教程，但遇到了一个奇怪的问题。由于工作环境的限制，无法在桌面上下载OpenGL驱动，所以无法在桌面上测试我的应用程序。我必须在我的 Android 设备上对其进行测试。它运行的是 Android 2.3.4 版本的一些变体，即 API 级别 10。

问题是，每当我对代码进行更改并运行 Android 应用程序时，这些更改都不会反映。它只是在我第一次运行我的代码时启动它安装的构建。我在我的 Android 上卸载了该应用程序并重新运行它，遇到了同样的问题。我制作了一个全新的 Libgdx 项目并将我的新代码复制到其中，它运行良好，直到我对新版本进行了更多更改，然后我遇到了同样的问题。所以我知道一个事实，即我正在更改的代码正在改变它的外观，它只是没有被反映。有什么我想念的吗？

我的步骤，澄清：

1.  使用 gdx-setup-ui.jar 设置 Libgdx 项目
2.  使用默认导入设置将新创建的项目导入 Eclipse
3.  编写一段时间，创建我的应用程序的某个版本（例如，在那个教程中，我编写代码直到我设置了调试`ShapeRenderer`，并测试以确保我的应用程序看起来正确）
4.  运行 Libgdx Android 应用程序以在我的手机上进行测试
5.  编写更多代码、更改内容、添加内容等等（甚至更改我资产中的图像）
6.  重新运行 Libgdx Android 应用程序以在我的手机上进行测试
    *   显示的应用程序与我在第 4 步中第一次运行时的应用程序相同

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T14:46:12.343

这是较新版本的 ADT 中的错误。请在[错误报告](http://code.google.com/p/android/issues/detail?id=36174&thanks=36174&ts=1344514616)上加注星标，让 Google 了解这会带来的麻烦。

最简单的方法是`clean project`在 Eclipse（或您正在使用的任何 IDE）中或在您​​的 Android 项目中添加空格/换行符并保存。

# javascript - 检查屏幕上是否没有移动或从键盘单击

> ID：12160195
> 
> 赞同：2
> 
> 时间：2012-08-28T13:21:40.310
> 
> 标签：javascript, jquery

我想知道是否有选项可以通过单击或鼠标移动来检查屏幕上是否没有移动？例如，检查网络上是否没有“活动”。

我环顾了网站中的代码并发现了这一点。我不知道它是否会有所帮助。

```
<pre>
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            $('html').mousemove(function(event){
                console.log("mouse move X:"+event.pageX+" Y:"+event.pageY);
            });
            $('html').click(function(event){
                console.log("mouse click X:"+event.pageX+" Y:"+event.pageY);
            });
            $('html').keyup(function(event){
                console.log("keyboard event: key pressed "+event.keyCode);
            });
        });
    </script>
</pre> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:29:25.337

您可以创建一个函数，在 XX 秒后发送“无活动事件”，并在每次收到鼠标或键盘事件时重置此计时器。

这是 mouseMove 的示例：http: [//jsfiddle.net/MeH6K/1/](http://jsfiddle.net/MeH6K/1/)

```
var global = 10;

function noMovement() {
    if (global == 0) {
      alert('no movement');  
      resetGlobal();                
    } else {
            global--;
    }
}

function resetGlobal() {
    global=10;                    
}

$(document).ready(function(){
    $('html').mousemove(function(event){
        resetGlobal();
    });

});

setInterval(function(){noMovement()}, 1000);
​ 
```

# msbuild - MSBuild - 仅在我的解决方案中构建已更改的项目

> ID：12160199
> 
> 赞同：1
> 
> 时间：2012-08-28T13:21:48.557
> 
> 标签：msbuild, cruisecontrol.net

我正在尝试使用包含多个项目的解决方案设置 CruiseControl.NET。要求在发生更改时仅重建此解决方案中的项目。还要求将要构建的项目增加其版本号。

我尝试将配置从**ReBuild**设置为**Build**但这没有帮助，仍然编译了所有程序集。

有没有人对 CruiseControl.NET 和那个问题有过经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:38:58.737

如果您为每个 vb/cs 项目设置了一个 Cruisecontrol.net 项目，则只有在项目路径中的文件发生更改时，您才能使用过滤的SourceControlProvider 来触发构建。

[http://www.cruisecontrolnet.org/projects/ccnet/wiki/Filtered](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Filtered) 查看包含过滤器。

然后设置您的 Msbuild 任务以直接构建您的项目文件。

但是我怀疑您的项目之间存在依赖关系，因此它们在同一个解决方案中？如果是这样，您可能希望每次都构建解决方案？

# http - SSL 重定向行为

> ID：12160200
> 
> 赞同：-1
> 
> 时间：2012-08-28T13:21:48.827
> 
> 标签：http, ssl

场景：A.COM、B.COM、C.COM。A & B.COM 已注册 SSL。所有三个站点的主机条目都位于具有各自域名的 /etc/hosts 中的单个服务器中。

问题：当我输入[https://C.COM](https://C.COM)（非 ssl 站点）时。它会自动重定向到 A.COM（ssl 站点）。DNS（Godaddy）和服务器主机条目中没有针对此类行为的条目。

有人可以帮我理解为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:22:20.357

目前尚不清楚“使用 SSL 注册”是什么意思。您不会向 SSL“注册”。我想你的意思是你已经在服务器上为 HTTPS 配置了一个证书，监听地址为`a.com`和`b.com`。

由于所有 3 个域都有条目`/etc/hosts`，从该机器的角度来看，DNS 解析是无关紧要的：该`hosts`文件将用于为客户端提供每个域的 IP 地址。

您不是在说是否`a.com`和`b.com`/或`c.com`共享 IP 地址。

当您`https://c.com`在浏览器中键入时，它会获取 IP 地址`c.com`（可能与 的 IP 地址相同`a.com`）并与其建立 SSL/TLS 连接（在端口 443 上）。它获取服务器提供的证书（如果您获得的证书对 无效，它应该显示警告消息`c.com`）。您得到的原因`a.com`可能是因为`a.com`该 IP 地址上提供的默认主机（并且您尚未配置`c.com`）。

# cakephp - 2.0.6 上的 Cakephp setaction 渲染问题

> ID：12160203
> 
> 赞同：1
> 
> 时间：2012-08-28T13:21:53.413
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

Cakephp 分页渲染问题。我正在使用 cakephp 2.0.6。当我尝试从其他操作呈现页面时，它很好。但是当我尝试转到下一页时，问题就开始了

我有以下功能

```
 public function admin_index() 
   {
       //Function listing 
   } 
```

所有类型的用户（支持、员工等）都需要相同的功能。所以我使用了setAction方法如下

```
public function support_index() 
   {
        $this->setAction('admin_index');
        $this->render('admin_index');
   } 
```

我的分页代码如下：

```
 echo $this->Paginator->prev('< ' . __('previous'), array(), null, array('class' => 'prev disabled'));

    echo $this->Paginator->numbers(array('separator' => ''));

    echo $this->Paginator->next(__('next') . ' >', array(), null, array('class' => 'next disabled')); 
```

但是当我尝试转到下一页时，URL如下

```
http://www.example.com/support/users/admin_index/page:2
http://www.example.com/employee/users/admin_index/page:2 
```

但是需要以下输出：

```
http://www.example.com/support/users/index/page:2
http://www.example.com/employee/users/index/page:2 
```

问题是 $this->setAction('admin_index'); 我想..任何人都可以帮助赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:39:12.180

我在以下文件中进行了更改`lib/Cake/Controller/Controller.php`

在 setAction 方法中所做的更改现在运行良好。特别是问题出在 2.0.6

```
public function setAction($action) {
    $this->request->params['action'] = $action; //Commented this Line 
    $this->view = $action; //Commented this Line

    $this->request->action = $action; // Added this Line
    $args = func_get_args();
    unset($args[0]);
    return call_user_func_array(array(&$this, $action), $args);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:33:13.310

设置动作

在内部将一个动作重定向到另一个动作。与 Controller::redirect() 不同，不执行另一个 HTTP 请求；

重定向是一个不同的术语，实际上，当它重定向到另一个动作时，它会自动变成那个动作，这就是为什么分页不会改变 url。

您可以使用以下代码，而不是使用 setAction：

```
public function admin_index() 
{
    $this->set('data',$this->__paginatedata());

}

function __paginatedata(){
    $this->paginate = array('limit'=>5);
    $this->Model->recursive = 0;
    return $this->paginate();
}

public function support_index() 
{
    $this->set('data',$this->__paginatedata());
    $this->render('admin_index');
} 
```

# java - crawler4j CrawelController 类中的 NoSuchMethodError

> ID：12160206
> 
> 赞同：1
> 
> 时间：2012-08-28T13:22:04.893
> 
> 标签：java, berkeley-db-je, crawler4j

我正在使用[此处](http://code.google.com/p/crawler4j/source/browse/src/test/java/edu/uci/ics/crawler4j/examples/basic/)给出的示例并包含来自[此处]（http://code.google.com/p/crawler4j/downloads/list）的必要文件（crawler4j-3.3.zip &crawler4j-3.x-dependencies.zip）我的构建路径和运行路径。

我收到此错误：

`Exception in thread "main" java.lang.NoSuchMethodError: com.sleepycat.je.EnvironmentConfig.setAllowCreate(Z)Lcom/sleepycat/je/EnvironmentConfig; at edu.uci.ics.crawler4j.crawler.CrawlController.<init>(CrawlController.java:90) at edu.uci.ics.crawler4j.examples.basic.BasicCrawlController.main(BasicCrawlController.java:100) log4j:WARN No appenders could be found for logger (org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager). log4j:WARN Please initialize the log4j system properly.` .

我无法理解错误原因，因为[此文件](http://code.google.com/p/crawler4j/source/browse/src/main/java/edu/uci/ics/crawler4j/crawler/CrawlController.java?r=9bc8c1b54eedfd8fd0384822517159d997670e5e)中有必需的功能，请参见第 75 行。

请帮帮我。我在 Java 方面没有太多专业知识。难道这个问题和[这个](https://issues.jboss.org/browse/JBCACHE-1611)有关。如果是，如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:56:46.750

是的。[该问题与JBCACHE-1611](https://issues.jboss.org/browse/JBCACHE-1611)非常相似。[这是与Berkeley DB Java 版](http://www.oracle.com/technetwork/database/berkeleydb/downloads/index-098622.html)的版本不兼容。

只需检查您是否拥有具有正确依赖项（和）的最新版本的[crawler4j 。](http://code.google.com/p/crawler4j/downloads/list)这应该可以揭示问题。`crawler4j-3.3.zip``crawler4j-3.x-dependencies.zip`

如果没有，请尝试从依赖 je-4.0.92.jar 的源代码构建 crawler4j。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:40:43.983

这可能是与库之间的修订有关的问题，您可以尝试此[http://www.java2s.com/Code/Jar/j/Downloadje4092jar.htm](http://www.java2s.com/Code/Jar/j/Downloadje4092jar.htm)以找到更高版本

# emacs - 来自 http://marmalade-repo.org/ 的 Package 安装的 Emacs 自动完成功能不起作用

> ID：12160209
> 
> 赞同：8
> 
> 时间：2012-08-28T13:22:16.340
> 
> 标签：emacs, autocomplete, elisp, marmalade, emacs24

我是 Emacs 新手，版本是 24。

如标题所述，我已经`M-x package-install`从[Marmalade-repo](http://marmalade-repo.org/)安装了自动完成功能，文件位于`~/.emacs.d/elpa/auto-complete-1.4/`.

然后我关闭了 Emacs 并打开了一个新框架，但编码时没有任何反应。

我需要一些配置才能让它运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:27:44.253

我有同样的问题。我通过将其附加到我的 .emacs 来修复它

[/auto-complete/manual.html#Manual_Installation](http://auto-complete.org/doc/manual.html#manual-installation)

```
(add-to-list 'ac-dictionary-directories "~/.emacs.d/dict")
(require 'auto-complete-config)
(ac-config-default) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:11:08.650

我有一个类似的问题。我尝试了文档（以及 elviejo）中的建议，但没有奏效。然后我尝试按照 Pedro 的建议去做，这确实有效:-) 添加到我的 init.el 文件的代码是：

```
(require 'auto-complete)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/ac-dict")
(require 'auto-complete-config)
(ac-config-default) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:55:06.187

我安装了托管在[github repo](https://github.com/m2ym/auto-complete)上的 Auto-Complete 。但是安装应该类似于 Package.

看来您忘记打开自动完成模式了。将后续片段添加到您的 .emacs.d 文件并尝试一下。

```
(ac-config-default) 
```

# java - 来自 XSD 的 Java int 类型

> ID：12160210
> 
> 赞同：2
> 
> 时间：2012-08-28T13:22:16.590
> 
> 标签：java, xsd, jaxb

> **可能重复：**
> [XJC 生成 Integer 而不是 int](https://stackoverflow.com/questions/7270360/xjc-generating-integer-instead-of-int)

需要生成具有原始 int 字段的实体类。但是像这样的xml字符串

```
<xs:element name="RetriesCount" type="xs:int" minOccurs="0" default="2"/> 
```

生成具有名为“retriesCount”的整数字段的类。使用`xs:integer`BigInteger 类型的“retriesCount”字段生成原因。有没有办法生成一个简单的 Java int？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:48:17.417

因为您的模式说`minOccurs="0"`，JAXB 必须使用能够表示`null`值的类型，这就是它使用`Integer`. 如果您可以将架构更改为`minOccurs="1"`它将能够使用它`int`。

请注意，这`default="2"`不一定符合您对 XML 的期望。特别是，如果指定了元素，*则*`RetriesCount`绑定属性将仅采用默认值，但该元素没有值（即`<RetriesCount />`或等效地`<RetriesCount></RetriesCount>`）。如果`RetriesCount`元素完全不存在，则属性值为`null`。

# c++ - 未找到 ncurses 库

> ID：12160214
> 
> 赞同：1
> 
> 时间：2012-08-28T13:22:25.500
> 
> 标签：c++, solaris

我目前正在尝试在 Solaris 11 x86 上安装 CPM 密码管理工具。安装完所有必需的依赖项后，我陷入了 CPM 的配置中。我当前的 ncurses 版本是 5.9。

我试图运行这个命令：

```
root@solaris:~/Downloads/cpm-0.23beta# ./configure --with-ncurses --with-cdk-dir=/usr/local --with-cracklib-dict=/usr/local/share/cracklib/pw_dict
checking for gcc... gcc
checking for C compiler default output file name... a.out  
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/ggrep
checking for egrep... /usr/bin/ggrep -E
checking whether gcc needs -traditional... no
checking for a BSD-compatible install... /usr/bin/ginstall -c
checking whether ln -s works... yes
checking whether make sets $(MAKE)... yes
configure: checking libraries
checking for main in -lm... yes
checking for initscr in -lncurses... no
configure: error: can not find the ncurses library 
```

我会很感激一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:30:17.233

After installing a system library, you should run `[ldconfig](http://linux.about.com/od/commands/l/blcmdl8_ldconfi.htm)` as root. This tool is used to update the system's cache of libraries so that they can be found at link time and in, for example, configure scripts.

Addendum: Solaris version is indeed [crle](http://bwachter.lart.info/solaris/solfaq.html)

# php - 如何使用 jquery 从一组单选按钮中检查基于单选按钮的值

> ID：12160219
> 
> 赞同：0
> 
> 时间：2012-08-28T13:22:36.873
> 
> 标签：php, jquery

我想为一个人创建一个星级评分系统，因为这个用户输入了五个不同类别的值，我想在一组单选按钮上显示这些值的平均值。我已经获得了平均值，但现在不知道如何显示平均值。

```
$("input[name='overall']").each(function(){
                    if(this.value == response.average){
                        $(this).attr('checked', true); 
                    }
                }); 
```

我想显示该字段的平均值----

```
<div id="overall_rating" class="Clear">
<input id="overall" name="overall" type="radio" class="star {split:5} required" disabled="disbled" value="0.2" />
<input id="overall" name="overall" type="radio" class="star" value="0.4"/>
<input id="overall" name="overall" type="radio" class="star" value="0.6"/>
<input id="overall" name="overall" type="radio" class="star" value="0.8"/>
<input id="overall" name="overall" type="radio" class="star" value="1.0"/>
<input id="overall" name="overall" type="radio" class="star" value="1.2"/>
<input id="overall" name="overall" type="radio" class="star" value="1.4"/>
<input id="overall" name="overall" type="radio" class="star" value="1.6"/>
<input id="overall" name="overall" type="radio" class="star" value="1.8"/>
<input id="overall" name="overall" type="radio" class="star" value="2.0"/>
<input id="overall" name="overall" type="radio" class="star" value="2.2"/>
<input id="overall" name="overall" type="radio" class="star" value="2.4"/>
<input id="overall" name="overall" type="radio" class="star" value="2.6"/>
<input id="overall" name="overall" type="radio" class="star" value="2.8"/>
<input id="overall" name="overall" type="radio" class="star" value="3.0"/>
<input id="overall" name="overall" type="radio" class="star" value="3.2"/>
<input id="overall" name="overall" type="radio" class="star" value="3.4"/>
<input id="overall" name="overall" type="radio" class="star" value="3.6"/>
<input id="overall" name="overall" type="radio" class="star" value="3.8"/>
<input id="overall" name="overall" type="radio" class="star" value="4.0"/>
<input id="overall" name="overall" type="radio" class="star" value="4.2"/>
<input id="overall" name="overall" type="radio" class="star" value="4.4"/>
<input id="overall" name="overall" type="radio" class="star" value="4.6"/>
<input id="overall" name="overall" type="radio" class="star" value="4.8"/>
<input id="overall" name="overall" type="radio" class="star" value="5.0"/>
</div> 
```

请帮我找到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:23:34.390

我希望这段代码对你有所帮助。

```
var average = response.average;

$("input[value='" + average + "']").attr("checked", "checked"); 
```

您只需要检查 response.average 是否包含在一个单选按钮的 value 属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:30:57.550

您的所有输入字段都具有相同的 ID。ID 在网页上必须是唯一的。首先尝试更正它（即，从输入中删除 ID，因为这里不需要它们）。

然后尝试 $(this).prop("checked", true);

# iphone - 服务器和客户端双通信 iPhone

> ID：12160220
> 
> 赞同：-3
> 
> 时间：2012-08-28T13:22:42.953
> 
> 标签：iphone

在编写了要在同一设备上玩的简单多人游戏后，我有兴趣为游戏编写服务器，以便可以在多个设备上玩。

您使用哪些技术编写服务器，允许客户端和服务器之间进行双重通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:42:18.607

[NSStream](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html)是您使用的，它是*套接字的抽象。*

[这里](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)有一个例子，服务器是用 python 编写的，但是如果你向下滚动，你可以得到客户端 iPhone 代码。您可以使用套接字 api 以任何语言对服务器进行编程。

# url - 如何在 opencart 中制作自定义 SEO 网址？

> ID：12160225
> 
> 赞同：1
> 
> 时间：2012-08-28T13:22:46.963
> 
> 标签：url, seo, opencart

我正在尝试制作我的自定义 URL，但遇到了一些麻烦（Opencart 1.5.3.1）。我希望类别页面是

[http://myshop.com/category_id](http://myshop.com/category_id)如果我在管理面板中没有类别的 SEO 关键字

或者

[http://myshop.com/category_seo_keyword](http://myshop.com/category_seo_keyword)如果我输入了类别的 SEO 关键字

和我的产品页面

[http://myshop.com/category_seo_keyword/product_id](http://myshop.com/category_seo_keyword/product_id)

其中 {product_id} 始终是“产品-”+“产品 ID，而不是型号”。即使在管理面板中输入，我也不想显示产品的 SEO 关键字。

例如[http://myshop.com/cameras/product-13](http://myshop.com/cameras/product-13)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T13:46:13.970

一个简单的“无代码”方法是安装 vQmod。此处的说明：[vQmod 安装 wiki](https://code.google.com/p/vqmod/wiki/Install_OpenCart)

然后将这个[Opencart 论坛主题](http://forum.opencart.com/viewtopic.php?f=20&t=89805&p=362757&hilit=seo%20account#p363224)中可用的 xml 文件上传到`vqmod/xml/ folder`.

xml 包含一个相对容易阅读的脚本，该脚本映射类似于上面两个答案的 url，但不修改核心文件。所以网站更新不会杀死它。

# javascript - 使用 jQuery 的 .on() 方法防止在 Ajax.BeginForm 中提交的默认行为

> ID：12160231
> 
> 赞同：1
> 
> 时间：2012-08-28T13:23:09.993
> 
> 标签：javascript, jquery, asp.net-mvc-3, jquery-events

我在我的视图中有一个我使用的表格`Ajax.BeginForm`。我想用 Javascript 代码更改提交按钮的默认行为。我已经附加了一个带有`.on()`方法的处理程序，并且在处理程序内部，我调用了该`preventDefault()`方法。我想知道为什么当我将处理程序附加到根 DOM 元素时，默认行为不会被取消，但是当我将处理程序直接附加到表单 DOM 元素时，默认行为会被取消。

**风景：**

```
@using (this.Ajax.BeginForm("GetList", "Report", null, new AjaxOptions(), new {id = "OptionForm"}))
{
   <input type="submit" id="submitButton"/>
} 
```

**将处理程序附加到根 DOM 元素的脚本（不起作用）：**

```
<script type="text/javascript">
   $(function () {         
      $(document).on("submit", "#OptionForm", refreshGrid);
   })
</script> 
```

**处理程序：**

```
refreshGrid: function (event) {
    event.preventDefault();

    $.ajax({
        url: url,
        type: "POST",
        data: $(this).serialize(),
        success: function (data) {
            if (data.success) {
                $("#ReferenceList").html(data.result);
            }
            else {
                $("#ValidationSummary").html(data.result);
            }
        }
    });
} 
```

**最后是将处理程序附加到表单 DOM 元素（Works）的代码：**

```
<script type="text/javascript">
   $(function () {         
      $("#OptionForm").submit = refreshGrid;
   })
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:28:42.027

`Ajax.BeginForm`如果您要手动处理 AJAX 提交，那么使用真的没有意义。一个标准`Html.BeginForm`就足够了，因为您不需要累积多个`.submit()`处理程序：

```
@using (Html.BeginForm("GetList", "Report", null, FormMethod.Post, new { id = "OptionForm" }))
{
   <input type="submit" id="submitButton" />
} 
```

进而：

```
<script type="text/javascript">
   $(function () {         
      $(document).on('submit', '#OptionForm', refreshGrid);
   });
</script> 
```

和`refreshGrid`功能：

```
var refreshGrid = function () {
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        success: function (data) {
            if (data.success) {
                $('#ReferenceList').html(data.result);
            }
            else {
                $('#ValidationSummary').html(data.result);
            }
        }
    });

    return false;
} 
```

# android - ABS Tab 导航随机中断

> ID：12160232
> 
> 赞同：1
> 
> 时间：2012-08-28T13:23:11.190
> 
> 标签：android, tabs, styles, actionbarsherlock

我在 Android 2.3.3 上使用 ABS Tab 导航并以随机方式体验此行为。当我开始此活动或旋转设备时可能会发生这种情况。您可以在下面的图像中看到差异。

![普通标签](../Images/8d1f1e1ffc4d1527120227f4537d5c5e.png) ![窃听标签](../Images/1fec13d504fe16bef5ddc14bc1e5cbf4.png)

我通过执行以下操作使用 xml 设置主题。

AndroidManifest.xml：

```
 <activity
        android:name=".JobListActivity"
        android:label="@string/title_activity_job_list"
        android:theme="@style/OverallTheme" >
    </activity> 
```

样式.xml：

```
<style name="OverallTheme" parent="Theme.Sherlock.Light">
</style> 
```

我还覆盖了活动的PendingTransition，有时它会在短时间内显示：

![加载](../Images/d25117b863249e893c8713e44e5aee0d.png)

奇怪的是，如果显示这个块状视图，选项卡会显示得很好。但是，如果不是，则样式似乎以随机方式出现。这些图像来自在 Xperia Active 上运行的相同代码。知道我做错了什么吗？

PS 我在这个项目中也包括了 HoloEveryWhere，但我没有使用它，因为它使整个内容区域变黑，而每个项目仍然可以激活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:15:14.187

看来在Activity的onCreate里面我有

```
getWindow().requestFeature(Window.FEATURE_ACTION_BAR); 
```

删除它可以解决问题。

# c - 在C中为char数组赋值

> ID：12160233
> 
> 赞同：9
> 
> 时间：2012-08-28T13:23:11.953
> 
> 标签：c, arrays, string, char, variable-assignment

有什么区别：

```
char fast_car[15]="Bugatti"; 
```

和

```
char fast_car[15];
fast_car="Bugatti"; 
```

因为第二个导致编译错误：

> 错误：从类型“char *”分配给类型“char [15]”时类型不兼容</p>

虽然第一个工作正常。将字符串放在数组中与数组初始化不同的位置会很有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T13:24:10.370

第一个是*初始化*，第二个是*赋值*。由于数组在 C 中不是可修改的值，因此您不能为它们分配新值。

请注意，您**可以修改数组内容**，但不能说`fast_car = ...`。所以内容是可修改**的，数组本身不是**.

* * *

`=`对这些截然不同的概念使用相同的符号是值得商榷的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T05:02:33.560

```
char fast_car[15]="Bugatti"; 
```

它说 fast_car 是一个数组，并使用字符串“Buratti”进行初始化。正确用法：

```
char fast_car[15];
fast_car="Bugatti"; 
```

第一行是 char 数组的声明（未初始化）。其次，这里的 fast_car 只是这个 char 数组中第一个元素的地址（一个指针）。将指针 fast_car 分配给 char "Buratti" 数组的分配因值的不同类型而不正确。

# jquery - 使用 jquery 获取所有 html 元素对象

> ID：12160238
> 
> 赞同：-5
> 
> 时间：2012-08-28T13:23:36.107
> 
> 标签：jquery, html

是否有任何 jQuery 函数可以返回给定页面的所有 HTML 元素的列表？我需要这个才能进行以下测试：

如果一个元素有一个给定的类做某事，对于我页面上的所有 HTML 元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:25:04.160

例子：

```
// for all elements
$('*');

// for all elements with a class test
$('.test'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:26:19.497

`$('.classYouAreSearchingFor')`是你想要的选择器。

您将获得一系列匹配的项目。您可以遍历它们。

鉴于此 HTML：

```
​&lt;ul>
  <li class='item'>Hi</li>
  <li class='item'>Hello</li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

您可以遍历具有`item`该类的每个匹配的 HTML：

```
$('.item').each(function(i, item) { alert($(this).text());}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:26:23.473

使用[类作为选择器](http://api.jquery.com/class-selector/)。这将比循环浏览页面上的所有元素要快得多，因为这将使用本机 API 来查找匹配的元素。

如果您想为必须`.foo`以以下开头的每个元素添加另一个类：

```
/* if an element has a given class do something */
$(".foo").addClass("bar"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:29:13.143

检查[类选择器](http://api.jquery.com/class-selector/)

例子：

```
<!DOCTYPE html>
<html>
<head>
  <style>
  div,span {
    width: 100px;
    height: 40px;
    float:left;
    padding: 10px;
    margin: 10px;
    background-color: #EEEEEE;
  }
  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div class="notMe">div class="notMe"</div>

  <div class="myClass">div class="myClass"</div>
  <span class="myClass">span class="myClass"</span>
<script>$(".myClass").css("border","3px solid red");</script>

</body>
</html> 
```

# xamarin.ios - MvvmCross：MonoTouch 中的绑定列表

> ID：12160239
> 
> 赞同：2
> 
> 时间：2012-08-28T13:23:42.587
> 
> 标签：xamarin.ios, monotouch.dialog, mvvmcross

我正在使用 MvvmCross 重构一个应用程序，并且正在获取一个设置视图以在三个平台上显示：WP7、Android 和 iPhone。我创建了一个包含两个列表的 SettingsViewModel。一个带有更新频率来轮询服务器，另一个带有要轮询哪个服务器的信息。这些称为 UpdateFrequencies 和 PublicSites。这两个列表在 SettingsViewModel 中都有一个属性，用于确定选择了哪个 UpdateFrequency 和哪个站点，UpdateFrequency 和 SelectedSite。

在 WP7 上，此数据绑定到 ListPicker，如下所示：

```
<toolkit:ListPicker 
    Name="UpdateFrequencies"
    ItemsSource="{Binding UpdateFrequencies}"
    SelectedItem="{Binding UpdateFrequency, Mode=TwoWay}"
    Header="Real-time data update frequency"
    /> 
```

![设置查看 WP7](../Images/8ee716fd9c9674d317b2454507003246.png)

类似地，在 Android 上，它绑定到这样的 Spinner：

```
<cirrious.mvvmcross.binding.android.views.MvxBindableSpinner
    android:id="@+id/SpinnerUpdateFrequencies"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    local:MvxDropDownItemTemplate="@layout/spinneritem_updatefrequencydropdown"
    local:MvxItemTemplate="@layout/spinneritem_updatefrequency"
    local:MvxBind="{'ItemsSource':{'Path':'UpdateFrequencies'},'SelectedItem':{'Path':'UpdateFrequency','Mode':'TwoWay'}}"
    /> 
```

![设置查看 Android](../Images/b235424880388f5d0d2defe4cbd60790.png)

现在我正在尝试在 iPhone 上做同样的事情，但我似乎无法理解如何以类似的方式绑定它。我一直在查看我能找到的所有样本，但似乎找不到类似的东西。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T23:23:52.053

mvvmcross ios 源目前不包括这个 - 所以你需要自己编写。

如果您正在使用单点触控对话框，那么这意味着您需要创建一个新的元素类型并使用它来显示静态文本字段（当前值）和选择器视图（选项列表）。

好消息是，这与当前 TimeElement 和 DateElement 所做的非常相似 - 因此您可以使用其中一个作为起始模板。要调整此模板，您需要：

*   更改它，使值基于字符串而不是日期时间
*   添加一个 List 公共属性 - 这将是选项列表。由于这是公共的和属性，它可以自动用于数据绑定。
*   调整 Selected 处理程序，以便元素在点击时显示一个简单的基于文本的选择器视图，而不是日期或时间选择器视图 - 前往 Wally 的博客以获取有关使用选择器视图的信息 (http://weblogs.asp.net/wallym/ archive/2010/01/07/uipicker-in-the-iphone-with-monotouch.aspx) - 或遵循上述@r4j 的建议
*   添加一个显示正确值的选择器视图模型（来自选项），默认为当前值，并在选择器完成时设置值（设置值将导致绑定的 ViewModel 属性也被更新）。

这种方法确实假设在显示 Picker 时 Value 和 Choices 列表不会改变——但这对于大多数用途来说是一个非常安全的假设。

抱歉，我现在无法提供示例代码（或库的补充）。如果其他人没有击败我，那么我会在几天后回到开发盒时尝试添加一个。

* * *

作为一个额外的想法，为这些设置提供 ui 的另一种方法是尝试在 monotouch.dialog 中使用 radio/radio group 方法。但是，恐怕这也需要一些新的 Element 工作 - 因为当前的无线电实现未设置为动态处理（绑定到）选择列表。当我有时间时，我也会考虑添加这个 - 因为我认为这将是一个非常有用的添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:32:10.543

iOS 没有下拉列表或列表视图之类的东西。我和你有同样的问题。
这是我的尝试：

*   为其创建一个`UITextField`绑定数据作为选定项。
*   触发此 TextField 的事件 TouchDown。当用户触摸它时，转移到另一个视图（调用 View2）。

*   在 View2 中，从 ViewModel 创建一个`TableView`绑定列表数据。当用户选择一个项目时，返回上一个视图，`UITextField`使用新的选定项目进行更新。

希望这有帮助！

**更新：**
正如你提到的，我忘记了`UIPickerView`。但我认为`UIPickerView`占用太多空间。
我以前这样做过：使用 a `UITextField`，当用户触摸时，显示`actionsheet`带有选择器视图的 a ，选择一个项目，然后更新`UITextfiled`。
我推荐`actionsheet`，因为您可以在其中放置一个取消、完成按钮，用户可以在其中取消或选择一个项目。
这是[一个](http://docs.xamarin.com/ios/recipes/Standard_Controls/ActionSheet/ActionSheet_Date_Picker)来自 xamarin 的示例，它使用[ActionSheetDatePicker](https://gist.github.com/1657921)

# mysql - 私人消息系统。列出每个对话的最后一条消息

> ID：12160243
> 
> 赞同：8
> 
> 时间：2012-08-28T13:23:56.127
> 
> 标签：mysql, sql

假设这是数据库结构：

![在此处输入图像描述](../Images/b771c86b245514bc26234c4defcff61e.png)

```
SELECT * FROM `pms` where id_to = 1 or id_from = 1 
```

这将返回他收到或发送的所有消息，

那么如何从用户 1 可能进行的**每个对话中检索最后一条消息？**

PD：当两个用户之间有一条或多条消息时，我称之为对话

-编辑-

所以给定这个数据库内容：

![在此处输入图像描述](../Images/397dc4f65ed45bd543f3873b4da7072f.png)

我们想得到 id 4 和 6

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:46:06.077

这假设`id`是一个自动增量列：

```
SELECT MAX(id) AS id
FROM pms
WHERE id_to = 1 OR id_from = 1
GROUP BY (IF(id_to = 1, id_from, id_to)) 
```

假设你有`id_from`并`id_to`索引，这个变体很可能会表现得更好，因为 MySQL 不知道如何处理 OR：

```
SELECT MAX(id) AS id FROM
(SELECT id, id_from AS id_with
FROM pms
WHERE id_to = 1
UNION ALL
SELECT id, id_to AS id_with
FROM pms
WHERE id_from = 1) t
GROUP BY id_with 
```

以下是获取这些 id 的消息的方法：

```
SELECT * FROM pms WHERE id IN
    (SELECT MAX(id) AS id FROM
    (SELECT id, id_from AS id_with
    FROM pms
    WHERE id_to = 1
    UNION ALL
    SELECT id, id_to AS id_with
    FROM pms
    WHERE id_from = 1) t
    GROUP BY id_with) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T13:32:34.033

```
select pms.* from pms 
inner join 
    (select max(fecha) as max_fecha,
           if(id_to<id_from,id_to,id_from) min_id, 
           if(id_to<id_from,id_from,id_to) max_id
      from pms where id_to = 1 or id_from = 1 
         group by if(id_to<id_from,id_to,id_from),if(id_to<id_from,id_from,id_to)) t 
     on (if(pms.id_to<pms.id_from,pms.id_to,pms.id_from)=t.min_id) 
        and (if(pms.id_to<pms.id_from,pms.id_from,pms.id_to)=t.max_id) 
        and (pms.fecha=t.max_fecha) 
```

此外，如果表中的 id_to 和 id_from 足够小以防止语句 (id_to+id_from) 溢出，这里是简单的查询：

```
select pms.* from pms 
inner join 
    (select max(fecha) as max_fecha, id_to+id_from as sum_id
      from pms where id_to = 1 or id_from = 1 
         group by id_to+id_from) t 
     on ((pms.id_to+pms.id_from)=t.sum_id) 
        and (pms.fecha=t.max_fecha)
 where pms.id_to = 1 or pms.id_from = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:30:09.490

此查询应该有效：

```
SELECT a.*
FROM pms a
     INNER JOIN (
                 SELECT id_to, id_from, MAX(fecha) AS fecha
                 FROM pms
                 WHERE (id_to = 1 OR id_from = 1)
                 GROUP BY LEAST(id_to, id_from)
                ) b
                ON a.fecha = b.fecha AND
                   (a.id_to = b.id_to OR
                   a.id_from = b.id_from); 
```

[**在此处查看示例@sqlfiddle**](http://sqlfiddle.com/#!2/75773/5)

如果您有`id`as`PRIMARY KEY`并且按时间顺序记录消息，则可以进一步优化和简化为：

```
SELECT a.*
FROM pms a
     INNER JOIN (
                 SELECT MAX(id) AS id
                 FROM pms
                 WHERE (id_to = 1 OR id_from = 1)
                 GROUP BY LEAST(id_to, id_from)
                ) b
                ON a.id = b.id; 
```

# java - 用于可变集合的 Lombok 惰性吸气剂

> ID：12160250
> 
> 赞同：1
> 
> 时间：2012-08-28T13:24:20.707
> 
> 标签：java, collections, lombok

我有一个有一个集合的类：

```
public class Foo
{
    @Inject
    private BarManager barManager;
    @Getter(lazy = true)
    private final List<Bar> bars = barManager.getAll();

    public void addBar(Bar bar)
    {
        bars.add(bar);
    }
} 
```

但是我不能在`List`. 原因是该属性是一个`AtomicReference`. 警告/错误是：

```
The method add(Employee) is undefined for the type  AtomicReference<AtomicReference<List<Employee>>> 
```

如何对集合执行添加/删除操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T17:06:19.547

您的解决方案确实很奇怪，并且取决于一些实现细节。此外，如果该字段尚未初始化，它会与 NPE 中断。正确的解决方案始终有效：

```
getBars().add(bar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:47:37.840

**免责声明：此答案，尤其是评论仅供参考。请使用上面接受的答案而不是这个。**

* * *

没想到自己这么快就解决了。解决方案相当奇怪：

```
public class Foo
{
    @Inject
    private BarManager barManager;
    @Getter(lazy = true)
    private final List<Bar> bars = barManager.getAll();

    public void addBar(Bar bar)
    {
        bars.get().get().add(bar);
    }
} 
```

返回引用，但是由于`get()`某种原因我必须调用`get()`两次。

# javascript - 使用 Socket.io 的异步模块加载（AMD）

> ID：12160254
> 
> 赞同：3
> 
> 时间：2012-08-28T13:24:25.893
> 
> 标签：javascript, node.js, websocket, socket.io, amd

我正在开发一个 Web 应用程序并使用 Socketio 测试 WebSocket 之类的东西。目前我正在考虑一个像 Socketio 的 requierejs 解决方案。它工作正常，我可以加载 Javascript 文件并使用“new Function()”（安全性？）解析它们。如果我使用“正常”（使用脚本元素）AMD 加载文件，性能会更好吗？

```
system.create.script(['rg.observable', 'rg.route', 'rg.bindings.*', 'rg.utils.*'], function() {

    var bind = function(node) {}
    return bind;

}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T14:24:53.907

td; 博士，我真的认为不值得花时间在上面。

询问性能，我真的会说你必须在你的生产环境中尝试它。

移动部件太多，因此在一种情况下每个部件都可能更快。首先是不同的浏览器，每个浏览器在不同的地方可能更快或更慢。然后socket.io根据浏览器和网络支持有不同的传输（不是所有地方都支持websockets）。然后是可能具有高或低带宽或延迟的客户端网络。此外，服务器上的负载和服务器数量可能会影响哪个会更快。

但根据我的经验（虽然不多），这就是它的样子：

如果您的应用程序足够小，我对您的建议是，只需将您的 requirejs 模块编译并压缩到一两个文件中，然后使用常规 http. 在大多数情况下，它应该比动态加载 socket.io 更快，因为您必须等待 socket.io 脚本被下载和执行，等待 socket.io 传输设置（握手和其他东西），然后动态解决依赖关系瀑布效应就在那里发生。

但是，如果您有一个包含许多模块的大型应用程序，并且您不想一开始就加载所有模块（假设用户每次加载时都不会使用它的所有功能的非常重的东西），那么您可能会认为它可能值得研究。但不同之处在于只有一个 websocket 连接（让我们忽略其他 socket.io 传输，因为它们也使用 http）与 2 或 3（更多，这意味着你做错了！）http 请求。

从技术上讲，如果您使用的是 http keep-alive，那么假设您的设置正确，它们都应该花费相同的时间，因为浏览器会使 http 连接保持活动状态一分钟或更长时间，因此您不会创建新的连接，所以它会是类似于 websocket 连接。现在如果你加入 SPDY，那么使用 socket.io 甚至可能会更慢，因为它只是额外的开销。

现在谈论一种动态加载模块的好方法和高性能方法，您应该观看这个演讲：[Malte Ubl 和 John Hjelmstad：一种新颖、高效的 JavaScript 加载方法](http://youtu.be/mGENRKrdoGY)

# sharepoint - 在 SharePoint 中创建自定义 WebPart 区域布局或更改当前 WebPart 区域的布局

> ID：12160255
> 
> 赞同：0
> 
> 时间：2012-08-28T13:24:29.120
> 
> 标签：sharepoint, sharepoint-2010, web-parts

我在 SharePoint 2010 中创建了一个自定义页面布局，现在我需要能够将 WebPart 添加到我的页面布局上的特定区域。如何在 SharePoint 中创建自定义 WebPart 区域布局或更改当前 WebPart 区域布局以便能够将 WebPart 添加到我的新自定义页面布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:03:12.550

您可以做什么取决于您在“自定义”布局中所做的事情。SharePoint 不允许随便做任何事情。标准网页可以做什么和 SharePoint 可以容忍什么是不一样的。SharePoint 需要一些引用和标签。

如果您创建了符合 SharePoint 要求的布局，则添加区域的最简单方法是剪切和粘贴。您也可以在 SPD 中使用插入选项。

在 SPD 中创建一个新的空白简单页面。在代码视图中打开它。从新页面获取该区域的代码。将其粘贴到您的页面中。

确保抓住区域的开始和结束标签。

切换到拆分视图以确保您拥有所需的区域。

# c# - 如何检查Webbrowser 文档是否已完成加载？

> ID：12160257
> 
> 赞同：1
> 
> 时间：2012-08-28T13:24:34.967
> 
> 标签：c#, browser, mshtml

我有一个应用程序可以在页面加载时动态加载 iframe。当我使用 Web 浏览器控件对该应用程序进行自动化时，我收到脚本错误，因为 java 脚本未完全加载到 iframe 中。

我在 DocumentCompleted 事件中检查浏览器的就绪状态，仍然没有运气......

```
 if (this.browser.ReadyState != System.Windows.Forms.WebBrowserReadyState.Complete)
            return;
        else
        {
 // do automation
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:29:13.417

You can try with this code, encapsulte this in boolean property

```
 if (this.WebBrowser.ReadyState != System.Windows.Forms.WebBrowserReadyState.Complete)
                return false;

            if (this.HtmlDomDocument == null)
                return false;

            foreach (IHTMLDOMNode node in this.HtmlDomDocument.all)
            {
                IHTMLFrameBase2 frame = node as IHTMLFrameBase2;
                if (frame != null)
                {
                    if (!frame.readyState.Equals("complete", StringComparison.OrdinalIgnoreCase))
                        return false;
                }
            }

            return true; 
```

# c# - 将 Poco 序列化为 XML 并反序列化回 Poco（在其他不相关的系统上）

> ID：12160258
> 
> 赞同：1
> 
> 时间：2012-08-28T13:24:35.667
> 
> 标签：c#, xml, xml-serialization

我有两个（不同的）通过 XML 通信的 C# 系统。我们已就 XML 格式达成一致。

我想做的下一件事是序列化一个类：

```
 public class Parent
  {
    public IChild Child { get; set; }
    public string Name { get; set; }
  }
  public interface IChild
  {
    string Name { get; set; }
  }
  public class Girl:IChild
  {
    public string Name { get; set; }
    public string FavDoll { get; set; }
  }
  public class Boy : IChild
  {
    public string Name { get; set; }
    public string FavCar { get; set; }
  } 
```

使用 IXmlSerializer 时的结果：

~~使用 IXmlSerializable 时出现异常，接口 IChild (wellwaddayaknow) 上没有构造函数。~~

> 好的，修复了（感谢@Giedrius）
> 
> 感谢@RobertH，减少了 ns

[参考](http://social.msdn.microsoft.com/Forums/en-US/asmxandxml/thread/bac96f79-82cd-4fef-a748-2a85370a8510)

```
<Parent>
  <Child>
    <Boy>
      <Name>Bill</Name>
      <FavCar>Chevvy</FavCar>
    </Boy>
  </Child>
</Parent> 
```

使用 DataContract 时，我得到一个 xmlns 引用了命名空间。其他系统上不存在。因此，在反序列化时，我得到一个异常，引用不存在。

```
<Parent xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <Child xmlns:d2p1="TestConsole, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" i:type="d2p1:TestConsole.Boy">
    <FavCar xmlns="http://schemas.datacontract.org/2004/07/TestConsole">Chevvy</FavCar>
    <Name xmlns="http://schemas.datacontract.org/2004/07/TestConsole">Bill</Name>
  </Child>
</Parent> 
```

我唯一的选择是使用 XDocument 并生成大量 loc 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:37:37.737

根据[这个问题](https://stackoverflow.com/questions/1333864/xml-serialization-of-interface-property)，有几种方法可以解决接口属性问题：

*   隐藏接口属性并在另一个属性中处理
*   实现 IXmlSerializable
*   修改您的属性以使用包装类型
*   使用反射与 DataContractSerializer 将接口属性当前值类型添加到已知类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:01:55.133

```
public class Parent
{
    [XmlElement(Type = typeof(Girl))]
    [XmlElement(Type = typeof(Boy))]
    public IChild Child { get; set; }
} 
```

# asp.net-mvc-3 - 从 TempData 获取值到视图中

> ID：12160259
> 
> 赞同：4
> 
> 时间：2012-08-28T13:24:43.093
> 
> 标签：asp.net-mvc-3, razor

我想将 TempData 的值放入 View

**控制器**

```
[NonAction]
    public ActionResult RedirectToMessagePage(string title, string message)
    {
        TempData["SuccessModel"] = new Models.SuccessModel { Title = title, Message = message };

        return RedirectToAction("Result", "Common");
    } 
```

**看法**

```
if (TempData["SuccessModel"] != null)
        {

            <div id="validationMessages">
                @{
                    var errors =TempData.Values;
                }
                @if (errors != null && errors.Count() > 0)
                {
                    <div style="position:absolute; background:Black; color:White; top:250px; left:550px;">
                        @foreach (var error in errors)
                        {   
                           @error 
                        }
                    </div>
                }
            </div>
        } 
```

我想查看**TempData["SuccessModel"]的****Message**值并希望显示它。

 **我怎样才能显示它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:29:54.167

在下面

```
var errors =TempData.Values; 
```

你可以投射`TempData["SuccessModel"]`并得到它的信息

```
var message = (TempData["SuccessModel"] as Models.SuccessModel).Message; 
```

并使用此`message`变量。**

# c# - 如何确定 Windows 标识对应于本地用户还是域用户？

> ID：12160262
> 
> 赞同：4
> 
> 时间：2012-08-28T13:24:50.917
> 
> 标签：c#, windows

我有一个 WindowsIdentity，它对应于经过身份验证的用户。如何确定身份对应于机器上的本地用户、已添加到机器的域用户还是未添加到机器的域？

假设我有 3 个用户帐户：

*   DomainUser（域用户组的成员，未添加到任何本地组）
*   LocalUser（在机器上创建的本地用户）
*   MappedDomainUser（已添加到本机组的域用户）

我怎样才能区分

*   域用户和本地用户
*   LocalUser 和 MappedDomainUser
*   DomainUser 和 MappedDomainUser

到目前为止，我依赖于用户名并检查它是否以机器名开头。然后，我通过检查用户所属的组（如果它是所有域用户的一部分）来进一步区分。我敢肯定，这不是最好的方法。

由于我有来自 WindowsIdentity.User 属性的用户 sid，我可以以某种方式使用它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T14:18:46.810

不确定映射的域管理员。我只是检查用户登录的域的本地和域管理员。不要访问诸如“builtin\Admin”之类的字符串，它们因操作系统语言版本而异。

我喜欢使用 .net 4.5 Principals 方法。如果你可以使用 4.5，你可以做类似的事情

所以关于问题我如何区分

*   域用户和本地用户
*   LocalUser 和 MappedDomainUser
*   DomainUser 和 MappedDomainUser

示例代码

```
using System;
using System.DirectoryServices.ActiveDirectory;
using System.Security.Principal
namespace xxxxx
  {
  public class UserEnvTools
     {

    public static bool IsDomainAdmin()
    {   //returns TRUE for a machine that is on a workgroup So consider GetDomain methods based on scenario 
        if (WindowsIdentity.GetCurrent().User.AccountDomainSid == null)
            return false;
        var domainAdmins = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid,
                                                  WindowsIdentity.GetCurrent().User.AccountDomainSid);
        var prin = new WindowsPrincipal(WindowsIdentity.GetCurrent());
        return prin != null && (prin.IsInRole(domainAdmins));
    }
    public static bool IsDomainUser()
    {
        //returns TRUE for a machine that is on a workgroup So consider GetDomain methods based on scenario 
        if (WindowsIdentity.GetCurrent().User.AccountDomainSid == null)
            return false;

        var domainUsers = new SecurityIdentifier(WellKnownSidType.BuiltinUsersSid,
                                                WindowsIdentity.GetCurrent().User.AccountDomainSid);
        var prin = new WindowsPrincipal(WindowsIdentity.GetCurrent());
        return prin != null && (prin.IsInRole(domainUsers));
    }

public static bool IsLocalAdmin()
{
var localAdmins = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, null);
var prin = new WindowsPrincipal(WindowsIdentity.GetCurrent());
return prin != null && (prin.IsInRole(localAdmins));
}
    public static bool IsLocalUser()
    {
        var localUsers = new SecurityIdentifier(WellKnownSidType.BuiltinUsersSid, null);
        var prin = new WindowsPrincipal(WindowsIdentity.GetCurrent());
        return prin != null && (prin.IsInRole(localUsers));

    }
    // Current security context applies  
    public static Domain GetCurrentUserDomain()
    {
        try
        {
            return System.DirectoryServices.ActiveDirectory.Domain.GetCurrentDomain();
        }
        // It may be better not to ctach such errors?
        catch (ActiveDirectoryOperationException) // no Controller/AD Forest can not be contacted
        {return null;}
        catch (ActiveDirectoryObjectNotFoundException) // The USers Domain is not known to the controller
        {return null;}
    }

    public static Domain GetCurrentMachineDomain()
    {
        try
        {
            return System.DirectoryServices.ActiveDirectory.Domain.GetComputerDomain();
        }
        // It may be better not to ctach such errors?
        catch (ActiveDirectoryOperationException) // no controller or machine is not on a domain
        { return null; }
        catch (ActiveDirectoryObjectNotFoundException) // controller found, but the machine is not known
        { return null; }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:45:58.010

假设`WindowsIdentity.Name`像这样工作`Environment.UserDomainName`，如果用户名以机器名开头，那么它不在域上，否则它在域上。这允许你写

```
public static bool IsDomain(WindowsIdentity identity)
{
    string prefix = identity.Name.Split('\\')[0];
    if (prefix != Environment.MachineName)
        return true;
    else
        return false;
} 
```

> UserDomainName 属性首先尝试获取当前用户的 Windows 帐户名的域名部分。如果该尝试失败，此属性将尝试获取与 UserName 属性提供的用户名关联的域名。如果由于主机未加入域而导致该尝试失败，则返回主机名称。

对于计算机名称和域名相同的边缘情况，您还可以过滤可用域列表（例如存储在数据库中）。

# sql-server - SSIS CSV导出：逗号分隔文件中的字段内的逗号

> ID：12160268
> 
> 赞同：1
> 
> 时间：2012-08-28T13:25:08.427
> 
> 标签：sql-server, ssis

我正在尝试导出一个 CSV 文件（由“，”分隔的字段），而其中很少有列碰巧有 , 。这样的字段，如果它们恰好有，它们应该包含在“”中并发送出去。我尝试在导出包中使用 " 作为文本限定符，但它用引号将每个字段值括起来，使文件大小膨胀。

有人可以帮忙吗？

# javascript - Javascript 循环限制为仅 1

> ID：12160271
> 
> 赞同：0
> 
> 时间：2012-08-28T13:25:26.267
> 
> 标签：javascript, jquery

我在用：

```
$.each(data.mydata, function(index, value){
  output += '<li>'+value.title+'</li>';
} 
```

我需要测试一些东西，只希望循环从列表中删除 1。

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T13:27:12.963

通过返回 false 在回调中中断它。

```
$.each(data.mydata, function(index, value){
  output += '<li>'+value.title+'</li>';
  return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:27:44.520

从[文档](http://api.jquery.com/jQuery.each/)中：

> 通过使回调函数返回 false，我们可以在特定迭代中打破 $.each() 循环。返回非 false 与 for 循环中的 continue 语句相同；它将立即跳到下一次迭代。

所以`return false`在你的逻辑之后添加会产生预期的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:28:27.217

为什么不直接使用 for 循环呢

```
for(var i = 0; i < 1; i++) {
  output += '<li>'+data.mydata[i].title+'</li>';
} 
```

或者根本没有循环

```
if(data.mydata.length > 0)
    output += '<li>'+data.mydata[i].title+'</li>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:00:14.590

如果你想要一个，你为什么要循环？

```
var myData = data.mydata;
var firstItem = myData[0];
var firstTitle = firstItem.title; 
```

都在一条线上

```
var firstTitle = data.mydata[0].title; 
```

# php - 为什么 Symfony 文件验证器不工作

> ID：12160274
> 
> 赞同：8
> 
> 时间：2012-08-28T13:25:53.363
> 
> 标签：php, symfony, symfony-2.1

我想使用文件验证器来限制文件输入的 mime 类型。不幸的是，这个约束从未使用过，所有文件都被接受了。

```
namespace WNC\SoldierBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
* WNC\SoldierBundle\Entity\Soldier
*
* @ORM\Table(name="soldier")
* @ORM\Entity(repositoryClass="WNC\SoldierBundle\Entity\SoldierRepository")
* @ORM\HasLifecycleCallbacks()
*/
class Soldier
{

   /**
    * @var string $picture
    * @Assert\Image()
    * @ORM\Column(name="picture", type="string", length=255)
    */
    private $picture;

    /**
    * @var string $file
    * 
    * @Assert\Image()
    * @Assert\NotBlank()
    */
    public $file;

    public function getAbsolutePath()
    {
        return null === $this->picture ? null : $this->getUploadRootDir().'/'.$this->picture;
    }

    public function getWebPath()
    {
        return null === $this->picture ? null : $this->getUploadDir().'/'.$this->picture;
    }

    protected function getUploadRootDir()
    {
        // the absolute directory path where uploaded documents should be saved
        return __DIR__.'/../../../../web/'.$this->getUploadDir();
    }

    protected function getUploadDir()
    {
        // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view.
        return 'uploads/pictures';
    }

    /**
    * @ORM\PrePersist()
    * @ORM\PreUpdate()
    */
    public function preUpload()
    {

        if($this->picture && file_exists($this->getAbsolutePath())) {
            unlink($this->getAbsolutePath());
        }

        if (null !== $this->file) {
            // do whatever you want to generate a unique name
            $this->picture = uniqid().'.'.$this->file->guessExtension();
        }

    }

    /**
    * @ORM\PostPersist()
    * @ORM\PostUpdate()
    */
    public function upload()
    {
        if (null === $this->file) {
            return;
        }

        // if there is an error when moving the file, an exception will
        // be automatically thrown by move(). This will properly prevent
        // the entity from being persisted to the database on error
        $this->file->move($this->getUploadRootDir(), $this->picture);

    }

    /**
    * @ORM\PostRemove()
    */
    public function removeUpload()
    {
        if ($file = $this->getAbsolutePath()) {
            unlink($file);
        }
    }
} 
```

表单生成器：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('mothers_name')
        ->add('service_end_date', 'date',array(
            'widget' => 'single_text',
            'format' => 'MM/dd/yyyy',
            'attr' => array('class' => 'date six columns')
        ))
        ->add('army_unit')
        ->add('city', 'city_selector')
        ->add('gender', 'choice', array(
            'choices'   => array(0 => 'Male', 1 => 'Female'),
            'required'  => false,
            'expanded' => true,
            'label' => 'Male / Female',
            'data' => 0
        ))
        ->add('file','file', array(
          'data_class' => 'Symfony\Component\HttpFoundation\File\File',
          'label' => 'Picture'
        ))
        ->add('self_description', 'textarea')
        ->add('video', null, array(
            'attr' => array(
            'placeholder' => 'some link here'
        )))
        ->add('wants_to_contact', null, array(
            'label' => Soldier::getLabel('wants_to_contact')
        ))
        ->add('comments', 'textarea')
        ->add('user', new NameFormType('Application\Sonata\UserBundle\Entity\User')) 
        ->add('city', 'city_selector')

    ;

}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'validation_groups' => array('Registration'),
        'cascade_validation' => true,
    ));

}

public function getName()
{
    return 'wnc_soldierbundle_soldiertype';
} 
```

控制器：

```
/**
 * Creates a new Soldier entity.
 *
 * @Route("/create", name="soldier_create")
 * @Method("POST")
 * @Template("WNCSoldierBundle:Soldier:new.html.twig")
 */
public function createAction(Request $request)
{
    $entity  = new Soldier();
    $form = $this->createForm(new SoldierType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();

        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('soldier_show', array('id' => $entity->getId())));
    }

    return array(
        'entity' => $entity,
        'form'   => $form->createView(),
    );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:49:21.900

查看之前的 SO 问题：[Symfony2 validation using Assert annotation does not work](https://stackoverflow.com/q/7883128/1349295)。你可能想确保你已经满足了使用 Symfony2 的所有推荐配置。

此外，没有必要`$picture`使用`Image`约束进行验证，因为它不是文件/图像。

```
/**
 * @var string $picture
 * @Assert\Image()                                        <-- Should be removed
 * @ORM\Column(name="picture", type="string", length=255)
 */
 private $picture; 

/**
 * @var string $file                                      <-- @var UploadedFile $file
 * 
 * @Assert\Image()
 * @Assert\NotBlank()
 */
 public $file; 
```

实际上，我能够使用 YAML 替代方法验证上传的文件是否为图像，因此如果没有任何结果，您可能还想尝试一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T11:30:06.607

我找到了解决方案。在表单定义中，我使用''validation_groups' => array('Registration')。我认为当没有验证器组时，它将与表单定义中的任何一个匹配。

当我将 groups 属性添加到验证器时，一切终于开始工作了。因此，例如使用`validation.yml`：

```
WNC\SoldierBundle\Entity\Soldier:
    properties:
        file:
            - Image: {groups: [Registration]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T15:24:00.613

您使用不适合您的领域的约束。只需对 $file 属性使用 File 约束即可。

# objective-c - 在 Objective-C 中初始化静态变量

> ID：12160279
> 
> 赞同：4
> 
> 时间：2012-08-28T13:26:05.267
> 
> 标签：objective-c, idioms

在 Objective-C 类中，我只想将文本文件的内容加载到 NSString 中，以便该类的所有实例都可以使用它。

在 Java 世界中，多年来我了解到，如果不使用经过验证的惯用语，就线程安全而言很容易犯这种微妙的错误。所以我想确保我使用正确的成语。

你能给我看一个这样的Objective-C类的例子吗？

这是我开始的空课......

```
@interface TestClass : NSObject
- (NSString *)doSomething:(NSUInteger)aParam;
@end

@implementation TestClass {
}

- (id)init {
    self = [super init];
    if (self) {

    }
    return self;
}

- (NSString *)doSomething:(NSUInteger)aParam {
     // something with shared NSString loaded from text file, 
     //  depending on the value of aParam
     return @""; 
}
@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:30:10.450

在 Objective C 中处理静态属性的一种惯用方法是将它们隐藏在类方法（带有 的方法`+`）后面。将您的字符串声明为`static`类方法的实现内部，并`dispatch_once`用于初始化：

```
+ (id)stringFromFile {
    static dispatch_once_t once;
    static NSString *sharedString;
    dispatch_once(&once, ^{
        sharedString = [NSString
            stringWithContentsOfFile:@"MyFile"
            encoding:... // ...supply proper parameters here...
            error:...];
    });
    return sharedString;
} 
```

这种设置静态对象的方式是线程安全的。将`sharedString`被初始化一次，即使该方法是从多个线程同时调用的。

现在您可以通过调用从任何地方访问您的字符串`[MyClass stringFromFile]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:59:13.170

创建一个实例变量供您的类实例访问，并在您指定的初始化程序中创建一个静态变量。您指定的初始化程序应创建一次字符串对象（将其保存在静态变量中）并每次将其分配给实例变量。例如：

```
@implementation TestClass {
    NSString *_myString;
}

- (id)init {
    self = [super init];
    if (self == nil) return nil;

    static dispatch_once_t once;
    static NSString *aString = nil;
    dispatch_once(&once, ^{
        aString = ... // However you want to instantiate the string
    });
    _myString = aString;

    return self;
} 
```

这使您可以在实例方法中访问字符串，就好像它是一个普通的实例变量一样，尽管字符串只创建一次并且每个实例都指向单个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:31:19.770

```
- (NSString *)doSomething:(NSUInteger)aParam { 

    static NSString *foo = nil;

    if (!foo) {
        //load foo
    }

    return @"";  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:31:21.330

这将正确地指导您。

[单例实例](https://stackoverflow.com/a/145164/790794)

[关于 Objective-C 单例的注释](http://lukeredpath.co.uk/blog/a-note-on-objective-c-singletons.html)

# objective-c - AQGridView长按网格单元格检测

> ID：12160283
> 
> 赞同：2
> 
> 时间：2012-08-28T13:26:21.803
> 
> 标签：objective-c, ios, cocoa-touch, uigesturerecognizer, aqgridview

我想检测[AQGridCellView](https://github.com/AlanQuatermain/AQGridView/)是否被长按，而不是选择它，我想显示一个带有自定义选项的菜单。我认为只需向单元格视图的子类添加一个长按手势识别器就足以处理这个问题，但看起来[AQGridView](https://github.com/AlanQuatermain/AQGridView/)已经捕获了与单元格的所有交互。

有谁知道如何解决这个问题并识别网格单元上的长按？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T20:05:23.950

我与图书馆的开发人员取得了联系，发现图书馆本身不可能做到这一点。但我找到了一个简单的解决方法：

1.  禁用 AQGridView 中的选择。
2.  创建一个自定义网格单元并添加一个 UITapGestureRecognizer 和一个 UILongGestureRecognizer。
3.  而不是响应 AQGridViewDelegate 附加到手势识别器的选择器。

这适用于我的应用程序。希望这个解决方案也能帮助其他人。

# events - 使用单独的应用程序模拟触摸屏事件

> ID：12160292
> 
> 赞同：1
> 
> 时间：2012-08-28T13:26:51.070
> 
> 标签：events, touch, simulate

我正在开发一种在 Android 和 iOS 上都可以像键盘一样工作的无线 HID 蓝牙设备。我还想开发一个应用程序来接受这些键盘输入并在其他应用程序中模拟触摸事件（无需将代码更改为这些应用程序）。

例如，如果用户使用我的设备单击 X 键，它将在当前运行的任何应用程序中模拟特定坐标的触摸。

这可能吗（对于 iOS 和/或 Android）？

# nhibernate - NHibernate 不使用 ComposedId 映射继承的属性

> ID：12160295
> 
> 赞同：1
> 
> 时间：2012-08-28T13:27:09.980
> 
> 标签：nhibernate, nhibernate-mapping

在我看来这是一个错误，但在我将它提交给 NHibernate bugtracker 之前，我想确认我对它应该如何工作的理解。

我的项目配置为使用显式模型映射并在每次运行时恢复数据库。我有一个定义属性的简单基类。一个子类想要将该属性与它自己的属性结合起来，形成一个复合主键，如下所示：

```
public class BaseClass
{
    public int InheritedId { get; set; }
}

public class Subclass : BaseClass
{
    public int OwnId { get; set; }
}

public class SubclassMap : ClassMapping<Subclass>
{
    public SubclassMap()
    {
        Table("Subclass");
        ComposedId(x => {
            x.Property(p => p.InheritedId);
            x.Property(p => p.OwnId);
        });
    }
} 
```

### 预期结果

我的数据库中有一个名为*Subclass*的表，其中包含两列：*InheritedId*和*OwnId*，以及由这两列组成的主键。

### 实际结果

数据库中名为*Subclass*的表，其中包含两列：*InheritedId*和*OwnId ，以及仅由****OwnId*****组成的***主键。*

 *### 解决方法

如果我将属性复制到*子类*（将其标记为`new`），则上述工作正常。

### 假设

从查看 NHibernate 源代码看来，该`TypeExtensions.DecodeMemberAccessExpression()`方法返回的*InheritedId的**MemberInfo将**BaseClass*指定为其*ReflectedType*，而稍后当最终解析声明的模型时，返回将*Subclass*指定为反射类型的*MemberInfo 。*两者是不同的，因此无法在之前编译的*ComposedIds中找到它来映射它。****`typeof(Subclass).GetProperties()`**`ModelMapper.MapRootClass()`*****

 ***### 帮助！

你遇到过这个问题吗？我是在做一些奇怪的事情还是应该将其作为不正确的行为提交给 NHibernate bugtracker？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:41:41.607

我认为您发现了一个合法的错误。

生成的映射应该是：

```
<class name="Subclass" table="Subclass">
  <composite-id>
    <key-property name="OwnId" />
    <key-property name="InheritedId" />
  </composite-id>
</class> 
```

但相反的是：

```
<class name="Subclass" table="Subclass">
  <composite-id>
    <key-property name="OwnId" />
  </composite-id>
  <property name="InheritedId" />
</class> 
```

您可以在 Jira 中打开问题。

另外，如果你有时间，你可以在 Github 上 fork ，修复它（不破坏任何测试）并提交一个拉取请求。****

# c# - Access TextBox Content from MainWindow in a Usercontrol

> ID：12160296
> 
> 赞同：1
> 
> 时间：2012-08-28T13:27:10.877
> 
> 标签：c#, wpf, class, get, set

I am really struggling here being a newbie programmer... This has all been done in WPF by the way

I have three textboxes in my MainWindow.

The method which returns the values to these textboxes has been made public (and is within MainWindow). Below is one of the three textboxes.

```
 public float GetLEL()
    {
        bool LEL = false;
        float parsedLELValue = 0;
        LEL = float.TryParse(LEL_TextBox.Text, out parsedLELValue);
        return parsedLELValue;
    } 
```

How can I return this value into my usercontrol class as is, even if it changes?

I have tried all sorts such as creating an instance within the Usercontrol (which haven't worked) -

```
Application app = new Application();

private float GetNewLEL()
        {
            float parsedNewLELValue = 0.00F;
            bool NewLEL = false;
            if (HolidayPay_CheckBox.IsChecked == false)
            {
                NewLEL = float.TryParse(app.GetHPR().ToString, out parsedNewLELValue);
            }

            else if (HolidayPay_CheckBox.IsChecked == true)
            {
                parsedNewLELValue = 0.00F;
            }

            return parsedNewLELValue;

        } 
```

However, the instance in the Usercontrol is not finding the GetLEL() Method from within the MainWindow. Can someone please help. Someone else has suggested Get and Set but I am not sure of how to do this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:33:53.637

我试图重现我理解的你想要实现的目标；如果您对此代码有任何疑问，我很乐意回答。

MainWindow.xaml ：

```
<Window x:Class="WpfApplication16.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel>
            <CheckBox IsChecked="{Binding MySuperCheckBoxIsChecked}" />

            <TextBox Text="{Binding MySuperFloatValue}" />

            <Button Click="Button_Click">Click me !</Button>

            <TextBlock x:Name="MySuperTextBlock"/>
        </StackPanel>
    </Grid>
</Window> 
```

MainWindows.xaml.cs ：

```
using System.Windows;

namespace WpfApplication16
{
    public partial class MainWindow : Window
    {
        private MySuperDataContextClass _mySuperDataContextClass = 
                                           new MySuperDataContextClass();

        public MainWindow()
        {
            InitializeComponent();

            this.DataContext =_mySuperDataContextClass;
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            if (_mySuperDataContextClass.MySuperCheckBoxIsChecked)
            {
                MySuperTextBlock.Text = 
                   _mySuperDataContextClass.MySuperFloatValue.ToString();
            }
            else
            {
                MySuperTextBlock.Text = 0.0f.ToString();
            }
        }
    }
} 
```

MySuperDataContextClass.cs：

```
using System.ComponentModel;

namespace WpfApplication16
{
    public class MySuperDataContextClass : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        private bool _mySuperCheckBoxIsChecked;
        private float _mySuperFloatValue;

        public bool MySuperCheckBoxIsChecked
        {
            get { return _mySuperCheckBoxIsChecked; }

            set 
            {
                _mySuperCheckBoxIsChecked = value;

                if (this.PropertyChanged != null)
                {
                    this.PropertyChanged(this,
                     new PropertyChangedEventArgs("MySuperCheckBoxIsChecked"));
                }
            }
        }

        public float MySuperFloatValue
        {
            get { return _mySuperFloatValue; }

            set 
            { 
                _mySuperFloatValue = value;

                if (this.PropertyChanged != null)
                {
                    this.PropertyChanged(this,
                     new PropertyChangedEventArgs("MySuperFloatValue"));
                }
            }
        }
    }
} 
```

# iphone - 如何从我的应用程序打开我设备上的其他应用程序

> ID：12160300
> 
> 赞同：0
> 
> 时间：2012-08-28T13:27:19.480
> 
> 标签：iphone, ios, ipad

我想打开另一个应用程序（如 GDrive、iBooks 等）。使用我的应用程序中的 UTI。

为此，我尝试使用[此站点](http://mobiforge.com/developing/story/importing-exporting-documents-ios)中的以下代码，该代码用于将 PDF 文件从我的应用程序导出到另一个应用程序。

```
 NSString * filePath = [[NSBundle mainBundle] pathForResource:nil ofType:@"pdf"];    
documentController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:filePath]];
documentController.delegate = self;
[documentController retain];
documentController.UTI = @"com.adobe.pdf";
[documentController presentOpenInMenuFromRect:CGRectZero inView:Parent animated:YES]; 
```

上面的代码确实为我提供了我的应用程序在我的设备上可用的应用程序列表（GDrive、iBooks 等），但是当我单击这些应用程序中的任何一个时，它会将我的应用程序中的一个 PDF 导出到该选定的应用程序，尽管我已将 FilePath 用作“NIL”。

我想要做的是能够从我的应用程序在我的设备上打开任何可用的其他应用程序（GDrive、iBooks 等），而无需将任何 PDF 文件从我的应用程序发送到其他应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:31:47.927

自定义 URL 是要走的路。请参阅此[链接](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)以获取具有实现的示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:56:08.213

URL Schemes 是可行的方法，但当然不是每个应用程序都有它们。可以在[此处](http://wiki.akosma.com/IPhone_URL_Schemes)找到完整列表（到此答案时，该网站存在某种错误并且无法打开）。

关于如何使用它们打开 Facebook 应用程序的示例：

```
NSURL *url = [NSURL URLWithString:@"fb://"];

if ([[UIApplication sharedApplication] canOpenURL:url])
{
    [[UIApplication sharedApplication] openURL:url];
} // else -> i.e. open Safari to Facebook's page or show an error message 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T17:28:07.640

每个 APP 都由标识符组成，标识符形式为“com.companyName.appName”（例如：“com.adobe.appname”）。要在特定应用中打开它，

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"com.adobe.appname"]];

# java - 在 jpa hibernate SQL Server 中将浮点数/整数转换为日历

> ID：12160303
> 
> 赞同：2
> 
> 时间：2012-08-28T13:27:27.473
> 
> 标签：java, sql-server, hibernate, jpa

我正在使用 JPA / Hibernate 和 SQL Server DB 开发一个 Java 项目。

我有一个现有的数据库，其中日期字段存储为 int，日期时间存储为浮点数。

有谁知道如何在我的域类中实现对日历类型的透明转换？

我必须在 getter 和 setter 中计算日期还是有更好的方法？

谢谢！马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:03:22.300

这是我的解决方案！希望对某人有用！

正如 Vikdor 所建议的，我已经实现了 UserType 接口：

```
public class MyDate implements UserType{

    private final static int SECONDS_IN_A_DAY = 86400;

    @Override
    public Object assemble(Serializable cached, Object owner) throws HibernateException {
        return cached;
    }

    @Override
    public Object deepCopy(Object value) throws HibernateException {
        if (value == null)
            return null;

        return value;
    }

    @Override
    public Serializable disassemble(Object value) throws HibernateException {
        return (Serializable)value;
    }

    @Override
    public boolean equals(Object x, Object y) throws HibernateException {
        return ObjectUtils.equals(x, y);
    }

    @Override
    public int hashCode(Object x) throws HibernateException {
         assert (x != null);
         return x.hashCode();
    }

    @Override
    public boolean isMutable() {
        return false;
    }

    @Override
    public Object nullSafeGet(ResultSet resultSet, String[] names, Object owner) throws HibernateException, SQLException {
        assert names.length == 1;

        final String value = (String) StringType.INSTANCE.get(resultSet, names[0]);
        if (value == null) return null;     
        try{
        final String daysValue = value.substring(0, value.indexOf("."));
            final String secondsValue = value.substring(value.indexOf("."));

            final Calendar calendar = Calendar.getInstance();
            calendar.set(Calendar.YEAR, 1900);
            calendar.setTime(DateUtils.truncate(calendar, Calendar.YEAR).getTime());

            calendar.add(Calendar.DATE, Integer.valueOf(daysValue));
            calendar.add(Calendar.SECOND, (int)(SECONDS_IN_A_DAY * Float.valueOf(secondsValue)));
            return calendar;
        }catch(Exception e){
            throw new HibernateException("Cannot convert DB value " +value);
        }
    }

    @Override
    /**
     * Convert from date to float
     */
    public void nullSafeSet(PreparedStatement preparedStatement, Object value, int index) throws HibernateException, SQLException {     
        final Calendar currentDate = (Calendar) value;
        final Calendar zeroDate = Calendar.getInstance();

        zeroDate.set(Calendar.YEAR, 1900);
        zeroDate.setTime(DateUtils.truncate(zeroDate, Calendar.YEAR).getTime());

        final Days days = Days.daysBetween(new DateTime(zeroDate), new DateTime(currentDate) );

        final Seconds seconds = Seconds.secondsBetween(new DateTime(DateUtils.truncate(currentDate, Calendar.DAY_OF_MONTH).getTime()), new DateTime(currentDate) );
        float finalValue = days.getDays() + ((float)seconds.getSeconds()/SECONDS_IN_A_DAY);

        preparedStatement.setFloat(index, finalValue);      
    }

    @Override
    public Object replace(Object original, Object target, Object owner) throws HibernateException {
        return original;
    }

    @Override
    public Class<Calendar> returnedClass() {
        return Calendar.class;
    }

    @Override
    public int[] sqlTypes() {
        return new int[]{
                FloatType.INSTANCE.sqlType()
        };
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:39:46.340

我会这样做：

1.  两个类，MyDate 和 MyDateTime，每个都实现了 Hibernate[`UserType`](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/usertype/UserType.html)接口。
2.  MyDate 会将整数日期读取为字符串，假设整数格式为 20120828。在`nullSafeGet()`实现中，它将将此字符串转换为 Joda DateTime 或`Java.util.Date`使用`SimpleDateFormat`格式为“yyyyMMdd”的类。
3.  MyDateTime 将读取`float`as `String`，假设`float`格式为 20120828.190800。在`nullSafeGet()`实现中，它也会将此字符串转换为 Joda Datetime 或`java.util.Date`使用`SimpleDateFormat`格式为“yyyyMMdd.HHmmss”的类。
4.  将在各自的类中`nullSafeSet()`使用相同的格式重新格式化数据。`SimpleDateFormat`

希望这可以帮助。

# hadoop - Hadoop/Hive - 将单行拆分为多行

> ID：12160304
> 
> 赞同：8
> 
> 时间：2012-08-28T13:27:30.430
> 
> 标签：hadoop, split, hive

我正在尝试找到一种方法，根据分隔列将 Hive 中的一行拆分为多行。例如获取结果集：

```
ID1  Subs
1     1, 2
2     2, 3 
```

并返回：

```
ID1  Subs
1     1
1     2
2     2
2     3 
```

[我在http://osdir.com/ml/hive-user-hadoop-apache/2009-09/msg00092.html](http://osdir.com/ml/hive-user-hadoop-apache/2009-09/msg00092.html)找到了一些路标，但是我没有足够的细节来指出我的方向解决方案，而且我不知道如何设置转换函数以返回将拆分行的对象。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-04-22T06:52:08.323

试试这个措辞

```
SELECT ID1, Sub
FROM tableName lateral view explode(split(Subs,',')) Subs AS Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-21T22:16:17.987

```
SELECT ID1, new_Subs_clmn
FROM tableName lateral view explode(split(Subs,',')) Subs AS new_Sub_clmn; 
```

我最初对使用的名称感到困惑，分享上面的查询认为它会有所帮助。

# c++ - Eclipse include paths with virtual directories

> ID：12160308
> 
> 赞同：2
> 
> 时间：2012-08-28T13:28:06.737
> 
> 标签：c++, eclipse, unit-testing, eclipse-cdt, eclipse-juno

I have a C++ project in Eclipse Juno and I'm using the Boost Unit Test Framework. I am new to formal Unit Testing, so I am still working on my workflow.

My workspace contains two projects:

(1) my C++ Project

(2) unit test project to test the classes in (1)

As I write each unit test I import the necessary directories and files from (1) into (2) as *virtual directories*.

This works OK for the source files, but it doesn't seem to work for the header files.

e.g. compiling unit_test.cpp with

`#include "foo/bar.h"`

returns

`../unit_tests.cpp:8:30: error: foo/bar.h: No such file or directory`

even though there is a *virtual directory* `foo` with `bar.h` in it.

If I use the Eclipse "Open Declaration" command (F3) on: `#include "foo/bar.h"` it will open the file, but the compiler can't find the file because it doesn't actually exist in the folder (I guess).

I noticed that the compiler compiles the "real" source files with a non-virtual directory path, but obviously this isn't done automatically for the header files.

I solved my problem by adding a Workspace referenced include path to the compiler. e.g. `${workspace_loc:/my C++ Project}` and this solved the problem, but what was the point of having virtual files when I have to create a reference to a real file anyway?

My questions are:

(*) Is this a good work flow?

(*) How can my workflow be improved?

(*) How do other people use Eclipse/IDEs to manage unit tests?

# android - 在 Android 上使用 Phonegap 的跨源 ajax 请求

> ID：12160316
> 
> 赞同：0
> 
> 时间：2012-08-28T13:28:40.220
> 
> 标签：android, jquery, ajax, cordova, cross-domain

使用以下代码在 Android 上使用 Phonegap 和 jquery 构建应用程序来请求 xml 数据：

```
$.ajax({
    url: 'test.xml',
    type: 'GET',
    success: function(xml) {
        //Retrieve user token
        var token = $(xml).find('token').text(); // Store token for subsequent requests
        alert("Token is " + token);
    },
    error: function(xhr) {
        alert("Error");
        xml = xhr.responseXML;
        $(xml).find('error').each(function() {
            alert($(this).find('message').text());
        });
    }
}); 
```

我最终将向 api 发出 REST 请求，但使用静态文件检查这种方式以尝试找出问题。

当从本地和远程位置请求文件时，这在使用 Android 2.3.4 的手机上运行良好。在使用 Android 3.2.1 的较新设备上发出远程（即跨源）请求时发生错误。

这是因为较新的浏览器中更严格的安全策略吗？如果是这样，建议我如何解决这个问题？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:57:52.970

寻找我之前发布的这个解决方案，它对我有用。你可以试一试。

[解决方案](https://stackoverflow.com/questions/12164136/load-jquery-mobile-page-from-different-domain/12171043#12171043)

# android - 如何在几秒钟内移动到另一个活动？

> ID：12160319
> 
> 赞同：3
> 
> 时间：2012-08-28T13:28:48.597
> 
> 标签：android, android-activity, timer

我有一个启动画面。我只希望它等待 1 或 2 秒，然后再继续下一个活动。我知道有很多方法，包括处理程序类和 java.util.timer 实现。但这是最简单、最轻松的方法。提前谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-28T13:42:04.650

使用下面的代码。

Splash_Screen_Activity.java

```
public class Splash_Screen_Activity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash_screen);

        final Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            public void run() {
                // TODO: Your application init goes here.
                Intent mInHome = new Intent(Splash_Screen_Activity.this, InvoiceASAPTabActivity.class);
                Splash_Screen_Activity.this.startActivity(mInHome);
                Splash_Screen_Activity.this.finish();
            }
        }, 3000);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-11T05:17:24.920

这是一个示例，其中包括淡入淡出效果。

**res/transition/fade_in.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<alpha
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:fromAlpha="0.0"
    android:toAlpha="1.0"
    android:duration="2000" /> 
```

**res/transition/fade_out.xml**

```
<alpha
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:fromAlpha="1.0"
    android:toAlpha="0.0"
    android:duration="2000" /> 
```

**MainActivity.class**

```
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final android.os.Handler handler = new android.os.Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                Intent intent = new Intent(MainActivity.this, SecondActivity.class);
                startActivity(intent);
                overridePendingTransition(R.transition.fade_in,R.transition.fade_out);
            }
        }, 3000);
    }

} 
```

如需完整的应用示例**（具有更多功能）**，请查看[此处](https://github.com/ivanlmj/Android-SplashActivity)。

# android - difficulty in setting activity orientation dynamically

> ID：12160323
> 
> 赞同：0
> 
> 时间：2012-08-28T13:29:03.393
> 
> 标签：android

I am setting activity orientation landscape dynamically in onCreate function. Its working fine. But the problem is that some time for a while activity is shown portrait and then changes to landscape. How can i avoid the transition from portrait to landscape. I am using setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:33:42.043

将这些添加到清单文件中的活动声明中：

```
android:configChanges="orientation|keyboardHidden"
android:screenOrientation="landscape" 
```

# mapreduce - RavenDB returns multiple identical MapReduce results after a group by

> ID：12160324
> 
> 赞同：0
> 
> 时间：2012-08-28T13:29:07.673
> 
> 标签：mapreduce, ravendb

My map:

```
docs.Visits.Select(obj => new {
    Year = obj.MetaData.CreatedDate.Year,
    Month = obj.MetaData.CreatedDate.Month,
    Day = obj.MetaData.CreatedDate.Day,
    MediaSource = ((System.String)(obj.MediaSource)),
    Version = ((System.String)(obj.Version)),
    Count = 1
}) 
```

My reduce:

```
results.GroupBy(result => new {
    Year = result.Year,
    Month = result.Month,
    Day = result.Day,
    MediaSource = result.MediaSource,
    Version = result.Version
}).Select(agg => new {
    Year = agg.Key.Year,
    Month = agg.Key.Month,
    Day = agg.Key.Day,
    MediaSource = agg.Key.MediaSource,
    Version = agg.Key.Version,
    Count = Enumerable.Sum(agg, x => ((System.Int32)(x.Count)))
}) 
```

Example query:

```
Year: 2012 AND Month: 8 AND Day: 22 
```

Yet I get duplicate items, sometimes even the count is the same, other times they differ only in the counts. The dataset in the Visit collection is roughly 200,000 documents, so it's nothing. I've re-added the index, re-setted it, but still, same odd behaviour.

I mean that I actually get multiple identical map reduces back, like this:

```
{
  "Year": "2012",
  "Month": "8",
  "Day": "22",
  "MediaSource": null,
  "Version": null,
  "Count": "7701"
} 
```

How can this be possible when I group them by; Year, Month, Day, MediaSource and Version? What's the point with a group by if it doesn't "group by"? At some dates the sum of all counts that day is actually higher than the total amount of Visit documents in the database.

What am I doing wrong?

Database Server Build 960, Client Build 888. .NET RavenDB Client 1.2.2068.

# android - PackageManager getApplicationIcon Blurred Images

> ID：12160328
> 
> 赞同：0
> 
> 时间：2012-08-28T13:29:17.220
> 
> 标签：android, android-package-managers

Whenever I pull all icons using PackageManager's getApplicationIcon(PackageName) I get an icon which is blurred at even a 70x70 ImageView. Is there anyway to get a bigger, clearer icon of the Installed packages?

# iphone - How can I make this code smoother. I am trying to draw triangle and with one touch (touches moved) i want it resize

> ID：12160329
> 
> 赞同：1
> 
> 时间：2012-08-28T13:29:18.400
> 
> 标签：iphone, objective-c, ios

How can I make this code smoother. I am trying to draw triangle and with one touch (touches moved) i want it resize. Here is my code:

```
-(id)initWithPoint:(CGPoint )point withFrame:(CGRect)frame{

    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        givenPoint = point;
    }
    return self;

    }

    - (void)drawRect:(CGRect)rect
    {
    // Drawing code

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(ctx, 0, 0, 0, 1);

    CGPoint points[6] = { CGPointMake(10, 10), CGPointMake(50, 10),
        CGPointMake(50, 10), givenPoint,
        givenPoint, CGPointMake(10, 10) };
    CGContextSetRGBFillColor(ctx, 255, 255, 255, 1);
    CGContextStrokeLineSegments(ctx, points, 6);

    }

    -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
    {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view];
    UIView *view = touch.view;

    [view removeFromSuperview];
    TailView *tailView = [[TailView alloc] initWithPoint:CGPointMake(location.x, location.y)  withFrame:CGRectMake(100, 100, location.x + 40, location.y + 40)];
    tailView.backgroundColor = [UIColor whiteColor];
    [self.view addSubview:tailView];

    UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
    [panRecognizer setMinimumNumberOfTouches:1];
    [panRecognizer setMaximumNumberOfTouches:1];
    [panRecognizer setDelegate:self];
    [tailView addGestureRecognizer:panRecognizer];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:35:58.963

简而言之，drawRect 很慢。如果你想让它平滑，你应该使用变换。而不是从超级视图中删除视图并再次添加它，从而强制重绘，您应该应用缩放和旋转变换。

# python - (python) tkinter scroll bar with user generated Entry fields

> ID：12160331
> 
> 赞同：0
> 
> 时间：2012-08-28T13:29:22.610
> 
> 标签：python, scroll, tkinter

I'm writing a tkinter GUI (my first one) and it is to colate data from user inputs.

anyway the way I'm doing that is as follows

```
from Tkinter import *
root = Tk()
textoutput = []
textbox = Entry(root, width = 5) 
textinput = []

x = 0 
offset = 0
yco = 40
press = 0 

textbox.pack()
textbox.place(x = 10, y = yco + offset) 

def addtextbox():
   global textinput, x, yco, offset, press, textbox

 offset = offset + 30
 txtinput = textbox.get()
 textinput.append(txtinput)

 textbox = Entry(root, width = 5)
 textbox.place(x = 10, y = yco + offset)

add = Button(root, text = "Add box", width = 10, command = addtextbox)    

add.pack()
add.place(x = 225, y = 5)

root.mainloop() 
```

The problem I'm having is that it gets to a certain point when there are too many text boxes to see and I need a scroll bar. I've tried using some sample code from effbot.org and some other places that I've googled but all they seem to do is scroll the background and not the text boxes themselves.

Any ideas ?

Cheers

Aaron

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:56:13.880

这是一个（合理的）简单的基于类的解决方案。该类是一个 tkinter 画布（它允许很好地滚动）。我将画布用作几何管理器，以便可以将条目小部件放置在我选择的任何位置（使用`create_window`方法）。

```
import Tkinter as tk    

class Manager(tk.Canvas):
    def __init__(self,master=None,**kwargs):
        tk.Canvas.__init__(self,master,**kwargs)
        self.widgets=[]

    def add_entry(self):
        entry = tk.Entry(self, width = 5)
        self.create_window(0,self._ypos(), anchor = tk.N+tk.W, window = entry)
        self.widgets.append(entry)

    def get_data(self):
        for w in self.widgets:
            print (w.get())

    def _ypos(self):
        return sum(x.winfo_reqheight() for x in self.widgets)

if __name__ == "__main__":
    root = tk.Tk()
    manager = Manager(root)
    manager.grid(row=0,column=0)
    scroll = tk.Scrollbar(root)
    scroll.grid(row=0,column=1,sticky=tk.N+tk.S)
    manager.config(yscrollcommand = scroll.set)
    scroll.config(command=manager.yview)
    b = tk.Button(root, text = "add entry", command = manager.add_entry)
    b.grid(row=1,column=0)
    b2 = tk.Button(root, text = "print stuff", command = manager.get_data)
    b2.grid(row=2,column=0)
    root.mainloop() 
```

* * *

@BryanOakley 建议（谢谢！）（*未经测试*）

```
import Tkinter as tk    

class Manager(tk.Canvas):
    def __init__(self,master=None,**kwargs):
        tk.Canvas.__init__(self,master,**kwargs)
        self.frame = tk.Frame(self)
        self.create_window(0,0,anchor=tk.N+tk.W,window=self.frame)
        self.row = 0
        self.widgets = []

    def add_entry(self):
        entry = tk.Entry(self.frame)
        entry.grid(row = self.row,column = 0)
        self.row += 1
        self.widgets.append(entry) 
```

现在像以前一样做其他的事情来设置滚动条，你应该已经准备好了。

# android - 执行 2 个 facebook 功能时无法在同一个活动中创建两个循环器 - Android

> ID：12160332
> 
> 赞同：0
> 
> 时间：2012-08-28T13:29:24.210
> 
> 标签：android, facebook, facebook-android-sdk

首先，我想用 Facebook 登录。为此，我使用了 Android Facebook SDK。代码

```
 facebook.authorize(ac, PERMISSIONS, new LoginDialogListener()); 
```

它没有用。所以我需要放Looper.prepare()和Looper.loop()。

```
 Looper.prepare();
            facebook.authorize(ac, PERMISSIONS, new LoginDialogListener());
            Looper.loop(); 
```

登录后，单击另一个按钮，我想在朋友的墙上发帖。所以我用

```
 Looper.prepare();
    AsyncFacebookRunner as=new AsyncFacebookRunner(facebook);
    as.request(userId+"/feed", paramss, "POST",  new WallPostRequestListener(), null);
   Looper.loop(); 
```

这显示错误，说

> 每个线程只能创建一个弯针

如果我使用没有弯针线的代码，比如

```
 AsyncFacebookRunner as=new AsyncFacebookRunner(facebook);
    as.request(userId+"/feed", paramss, "POST",  new WallPostRequestListener(), null); 
```

然后它显示错误，说

> 无法在未调用 Looper.prepare() 的线程内创建处理程序

我已经在网上搜索了解决方案，找不到任何解决方案。我需要在同一个 Activity 上使用这两个函数。因此，如果有人知道我的代码有什么问题，请提供帮助............并将我视为Android中的初学者，对线程知之甚少............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:14:31.603

```
new Thread(new Runnable() {

        public void run() {

                AsyncFacebookRunner as=new AsyncFacebookRunner(facebook);
                as.request(userId+"/feed", paramss, "POST",  new WallPostRequestListener(), null);

        } 
```

这是我的问题的解决方案。或者另一种方式就像杰西陈的评论中提到的那样

# visual-studio-2010 - 频繁的 VS 2010 非常慢并且在特定的解决方案/文件上崩溃？

> ID：12160334
> 
> 赞同：0
> 
> 时间：2012-08-28T13:29:32.823
> 
> 标签：visual-studio-2010, c#-4.0, lambda, crash

使用特定解决方案时，我的 Visual Studio 2010 总是变慢或崩溃。慢，我的意思是慢！例如，我每分钟可以输入 4-5 个字符。通常用户界面会冻结，有时最终会崩溃。所以，基本上我无法使用该解决方案。我尝试了这些解决方案但没有效果：

1.  禁用和卸载所有扩展。
2.  删除 .suo、bin 和 debug 文件夹
3.  禁用 IntelliSense、文本编辑器选项、...
4.  重新启动系统
5.  在具有相同版本的 VS 和 Windows (7) 的不同计算机上尝试。

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:29:32.823

因此，经过数小时的尝试，我发现在处理特定文件时会发生崩溃。特别是，问题在于这行代码：

```
d = sd.Categories.Max(cat => cat.Subcategories.Max(d => d.Data.Where(a => a.CountryName != "World" && a.CountryName!="Asia Pacific").Max(a =>  a.AnnualData.Max(ad => ad.Value))); 
```

显然，由于该行使用了许多 lambda 表达式，VS 解析器不能有效地处理它，尽管它是一个语法和语义正确的表达式，并且它被正确编译和执行。

解决方案：删除或注释该行，并使用一组较短的表达式来执行相同的功能。我只是使用了一些嵌套的 foreach 来替换表达式。

# c# - 是否可以在 MonoTouch 中为 UILabel 的文本使用 getter/setter？

> ID：12160336
> 
> 赞同：1
> 
> 时间：2012-08-28T13:29:34.810
> 
> 标签：c#, iphone, ios, mono, xamarin.ios

我有以下代码

```
public string QuestionText 
{
get { return txtBox.Text; }
set {txtBox.Text = value; }
} 
```

其中 txtBox 是一个 UILabel ，每次我尝试通过 QuestionText 访问它时，我都会得到一个空引用异常。我可以设置和获取这样的文本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:33:36.257

请注意，在发生`txtBox`之前它将为空`ViewDidLoad`。

如果您遇到该问题，更好的解决方案：

```
public string QuestionText { get; set; }

public override void ViewDidLoad()
{
   base.ViewDidLoad();

   txtBox.Text = QuestionText;
} 
```

# javascript - JavaScript 在我下面的代码中不起作用

> ID：12160342
> 
> 赞同：-1
> 
> 时间：2012-08-28T13:29:53.443
> 
> 标签：javascript, asp.net-mvc, jqgrid

我将以下代码写入 JQGrid 中的 Display TransactionList

```
<h2>Manage Transactions</h2>
<script language="javascript" type="text/javascript">

    $(document).ready(function () {
        $("#TransactionList").jqGrid({
            datatype: "local",
            height: 150,
            colNames: ['TransactionID', 'MinVersion', 'TransactionDateTime','RequestMessage','ResponseMessage','TransactionName','TransactionDescription','Enabled'],
            colModel: [
              { name: 'TransactionID', index: 'TransactionID', width: 60 },
              { name: 'MinVersion', index: 'MinVersion', width: 100 },
              { name: 'TransactionDateTime', index: 'TransactionDateTime', width: 400 },
              { name: 'RequestMessage', index: 'RequestMessage', width: 60 },
              { name: 'ResponseMessage', index: 'ResponseMessage', width: 60 },
              { name: 'TransactionName', index: 'TransactionName', width: 60 },
              { name: 'TransactionDescription', index: 'TransactionDescription', width: 60 },
              { name: 'Enabled', index: 'Enabled', width: 60 }
        ],               
            multiselect: true,
            ignoreCase: true,
            hidegrid: False ,            
            pager: '#gridpager',
            rowNum: 10,
            viewrecords: true,
            rowList: [10, 20, 30, 400]    
        });

        $.ajax({
            url: 'API/GetTransaction',
            type: 'post',
            data: null,
            beforeSend: function () {
            },
            success: function (response) {
                alert(response);
                $("#TransactionList").setGridParam({ data: response }).trigger("reloadGrid");
            },
            error: function (error) {
                alert(error);
            }
        });
        $("#TransactionList").jqGrid('filterToolbar', { stringResult: true, searchOnEnter: false, defaultSearch: "cn" });
    }); 
```

在上面的代码中，我的 javascript 不起作用。但，

```
<h2>Manage Transactions</h2> 
```

正在浏览器上打印。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:32:43.153

您似乎没有带有 id 的元素`TransactionList`。首先添加：

```
<div id="TransactionList"></div> 
```

然后从那里工作。

# java - 在 J2ME 中分块下载数据

> ID：12160361
> 
> 赞同：1
> 
> 时间：2012-08-28T13:30:56.490
> 
> 标签：java, multithreading, java-me, inputstream

我必须从存储在设备内存中的文本文件中获取大量数据。并且需要将从文件中读取的数据块发送到服务器。由于文件有大量数据，我想在从文件系统获取数据时将数据分成块。目前我的逻辑是一次性获取数据。

```
try {
            fc = (FileConnection) Connector.open(path, Connector.READ);

            if (fc.exists()) {
                int size = (int) fc.fileSize();
                is = fc.openInputStream();
                byte bytes[] = new byte[size];
                is.read(bytes, 0, size);
                //System.out.println("Text: " + str);

            }
        } catch (Exception ioe) {} 
```

这可行，但我想将数据块大小设置为固定值。然后迭代地它应该获取整个文件数据并发送到服务器。你能建议我一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:04:30.727

我使用了以下实用方法：

```
public static int copy (InputStream is, OutputStream out) throws IOException {
    byte [] buff = new byte[1024];
    int len = is.read(buff);
    int total = 0;

    while (len > 0) {
        total += len;
        out.write(buff, 0, len);
        len = is.read(buff);
    }

    return total;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:34:27.613

您可以使用 InputStream.skip 跳转到文件的特定部分。

在某处保留索引以了解您已经阅读了多少。

使用固定大小的chunk（几个kos），阅读时跳转到chunk-size*index。

# css - jQuery 移动单选按钮在使用 Phonegap 的本机应用程序中显示为蓝色

> ID：12160364
> 
> 赞同：0
> 
> 时间：2012-08-28T13:31:01.997
> 
> 标签：css, cordova, jquery-mobile, radio-button

我的应用程序中有一些单选按钮，使用 jQuery Mobile 1.1.1。如果我在网络浏览器中打开它，包括 Android 的本机浏览器，它们显示正常。有一个从 Android 的原生浏览器截取的屏幕截图：

![在此处输入图像描述](../Images/8d37f84256d977cb7650b5a676867b8f.png)

但是当我使用 Phonegap 打包应用程序时，按钮看起来是蓝色的：

![在此处输入图像描述](../Images/52549f6a8648b110744f6f909993750d.png)

实际上，不仅仅是单选按钮，它们都是该页面上的所有按钮。我已经明确`data-theme="c"`地放在那个页面上（它是“灰色”的那个）。任何人都知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:53:04.790

解决了这个添加`data-theme="c"`到每个元素而不是整个页面的问题。

# asp.net - 我可以在我的“用户”数据库中添加一个字段吗？（会员创建用户方法）

> ID：12160373
> 
> 赞同：1
> 
> 时间：2012-08-28T13:31:31.730
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-membership

我大家，

我想在我的注册页面上添加一个或多个字段。我尝试将我的新字段添加到我的 Membership.CreateUser() 方法的参数中，但它告诉我它不支持超过 8 个参数。我能做些什么 ？开发我自己的自定义提供程序？没有其他解决方案或技巧吗？

请原谅我的英语，我从 asp 开始，所以你能告诉我的一切都很好。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:58:13.320

您不必创建自定义提供程序即可将字段添加到 User 表（尽管它可能是正确的解决方案，具体取决于，它不是强制性的）。

要将字段添加到用户表，请转到 SQL Server Management Studio，找到并展开 aspnetdb。展开表并右键单击用户。选择设计，添加所需的字段，然后单击保存。就是这样！

**编辑：实施配置文件**

* * *

好的，假设您要向用户添加两个 Profile 属性：FirstName 和 LastName，都是字符串（或 db 术语中的 nvarchar）

Web.Config（名称和类型是默认值，您需要为 aspnetdb 设置连接字符串）

```
<profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider"
             type="System.Web.Profile.SqlProfileProvider"
             connectionStringName="ApplicationServices"
             applicationName="/"/>
      </providers>
      <properties>
        <add name="FirstName" type="string"/>
        <add name="LastName" type="string"/>
      </properties>
    </profile> 
```

因此，现在您已经配置了配置文件提供程序并定义了属性，您可以通过`ProfileBase`类使用它们。例如，当一个新用户在您的站点上注册时，除了 Membership.CreateUser 所需的用户名和密码之外，您还可以要求您的用户输入他们的名字和姓氏。一旦他们将表单发布回您的服务器，您将像这样处理它：

```
[HttpPost]
        public ActionResult CreateUser( ViewModel viewModel )
        {
            if (ModelState.IsValid)
            {
                    MembershipCreateStatus status;
                    var newUser = Membership.CreateUser( viewModel.UserName, viewModel.Password, viewModel.EmailAddress, null, null, true, null, out status );
                    if (status == MembershipCreateStatus.Success)
                    {
                        //set profile data
                        ProfileBase profile = ProfileBase.Create(viewModel.UserName);
                        profile["FirstName"] = viewModel.FirstName;
                        profile["LastName"] = viewModel.LastName;
                        profile.Save();
                    } 
```

编辑配置文件数据与创建它相同。

获取用户的个人资料数据同样简单：

```
var profile = ProfileBase.Create(userName);
var firstName = profile["FirstName"] as string;
var lastName = profile["LastName"] as string; 
```

希望这可以帮助您前进！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:33:06.803

确切地说，您必须自定义您的会员船提供商

我工作过，你可以阅读这篇文章： http: [//www.codeproject.com/Articles/165159/Custom-Membership-Providers](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)

他帮助我工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:35:38.067

我建议创建一个新表，例如`UserDetail`，并创建您自己的查询以读取/写入该表。`Membership.CreateUser()`因此，如果已创建用户，则在调用后，将自定义数据插入自定义表中。

您可以创建自己的自定义会员提供程序，但在我看来，这比它的价值更麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T18:52:10.263

```
var profile = ProfileBase.Create(userName);
var firstName = profile["FirstName"] as string;
var lastName = profile["LastName"] as string; 
```

你把这段代码放在哪里了？

# html - 将两个 div 粘贴在一个主要 div 中

> ID：12160376
> 
> 赞同：0
> 
> 时间：2012-08-28T13:31:38.283
> 
> 标签：html, css-float

我知道，有很多线程处理粘贴两个 DIV，但我无法让它工作，可能是因为我有不同的 DIV 组成。

所以，这是我的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
</head>

<body>

<div id="up" style="display: inline-block; width:750px; height: 30px; border:1px solid black;">

<div id="titlebar" style="width: 400px; height: 100%; float: left; border: 1px solid red";>
</div>

<div id="swBtn" style="width: 50px; height: 100%;  float: right; border: 1px solid blue;">
</div>

<div id="meta" style="width: 200px; height: 100%; float:right; border: 1px solid red;">
</div>

</div>

</body>
</html> 
```

[图片](http://img254.imageshack.us/img254/1062/divse.png)将支持您的想象力。(1.)) 是这段代码的产物，第二个 (2.)) 是我希望它的工作方式

所以，你可以看到，我想将蓝色方块（swBtn div）粘贴到较小的红色方块（元 div）的左侧，但应该这样做，即使 id= 的 div 也会保持不变meta 会改变它的宽度。

也许这是微不足道的，但感谢您的回答！

# php - 使用访问令牌将文件上传到 Google Drive，需要什么范围的身份验证？

> ID：12160379
> 
> 赞同：0
> 
> 时间：2012-08-28T13:31:45.673
> 
> 标签：php, curl, google-drive-api

我正在尝试使用 PHP 将文件上传到 Google Drive。

对于授权代码，我使用以下范围：

```
https://www.googleapis.com/auth/drive  
https://docs.google.com/feeds/  
https://docs.googleusercontent.com/  
https://spreadsheets.google.com/feeds/ 
```

我已经收到了一个有效`refresh_token`的 ，我可以随时用它来获取一个新的`access_token`。

现在的问题是当我尝试使用它执行上传时`access_token`（**它没有过期，也没有使用**）它说：

```
stdClass Object
(
    [error] => stdClass Object
        (
            [errors] => Array
                (
                    [0] => stdClass Object
                        (
                            [domain] => global
                            [reason] => required
                            [message] => Login Required
                            [locationType] => header
                            [location] => Authorization
                        )

                )

            [code] => 401
            [message] => Login Required
        )
) 
```

我正在使用带有以下标题的 curl：

```
Array
(
    [0] => Content-Type: text/plain
    [1] => Content-Length: 503242
    [2] => Authorization: Bearer ya29.AHES6ZRWXZkZDDi6AFV9PK2QonHp93nIfJbYqipXFT1uCsg
    [3] => GData-Version: 3.0
) 
```

和以下网址：

```
https://www.googleapis.com/upload/drive/v2/files?uploadType=media 
```

CURL 命令类似于：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADERS, $headers);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, file_get_contents($file));
$return = curl_exec($ch);
curl_close($ch); 
```

任何帮助将不胜感激......在此先感谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:19:04.927

您需要将文件上传到云端硬盘的唯一 OAuth 范围是`https://www.googleapis.com/auth/drive.file`.

对于所有可能的范围，请查看文档：[https ://developers.google.com/drive/scopes](https://developers.google.com/drive/scopes)

顺便说一句，Drive API 不是基于 GData 的，因此您不需要将`GData-Version`标头添加到您的请求中。

我还建议您将您的请求与 OAuth 2.0 Playground 发送的请求进行比较，以便轻松发现错误：

[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:28:37.980

尝试使用以下范围： [https ://www.googleapis.com/auth/drive.file](https://www.googleapis.com/auth/drive.file)

还要验证您是否已彻底完成文档中给出的步骤

[https://developers.google.com/drive/about-auth](https://developers.google.com/drive/about-auth)

如果不想使用 curl，可以使用 Googlephpclientlibarary 的 insert 方法插入文件。

否则，将请求与 Claudio 提到的 OauthPlayground 进行比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-17T18:53:41.970

CURLOPT_HTTPHEADER ，而不是 CURLOPT_HTTPHEADERS

# c - C 正确使用 free

> ID：12160385
> 
> 赞同：1
> 
> 时间：2012-08-28T13:31:54.210
> 
> 标签：c, memory, free

我相信我这样做是对的，但我想确定一下。在一个程序中，我使用了两个指向函数返回的分配内存的指针。当我完成使用该内存`free()`时，我会使用相同的指针指向新分配的内存空间。这是我的程序，以举例说明我的意思（评论显示我的思考过程）：

```
int main(void)
{
    char *data, *url;
        int i = 1;

    while(i)
    {
        printf("Enter URL: ");
        if(!(url = getstr())) return 1;                                  //url now points to allocated memory from getstr();
        if(strlen(url) <= 0) i = 0;
        if(data = readsocket(url, 80, "http")) printf("\n%s\n\n", data); //data now points to allocated memory from readsocket();
        else printf("\n\n");
        free(url);                                                       //free allocated memory that url points to url
        free(data);                                                      //free allocated memory that data points to data
    }
    return 0;
} 
```

这是正确的，还是有更好的更普遍的首选方法？还是我完全做错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:36:31.123

假设您的函数`getstr`和`readsocket`malloc 在内部分配内存，那么这非常好。

我唯一的建议是，在释放内存的同一范围内分配内存通常很有帮助，这通常有助于推断何时需要释放内存。

例如：

```
url = malloc(URL_MAX_LEN);
if (!url) return 1;
if (!getstr(url)) {
    free(url);
    return 1;
}
/* do something with url */
free(url); 
```

如果您有很多对象和退出点，那么使用 goto 会很好。

```
object1 = malloc(OBJECT1_SIZE);
/* do work, if there's an error goto exit1 */
object2 = malloc(OBJECT2_SIZE);
/* do work, if there's an error goto exit2 */
object3 = malloc(OBJECT3_SIZE);
/* do work, if there's an error goto exit3 */
exit3:
free(object3);
exit2:
free(object2);
exit1:
free(object1);
return 1; 
```

如果您的对象变得更复杂并且需要大量工作来创建和销毁，那么您可以包装 malloc 和 free，但至关重要的是，您将与 malloc/free 完全相同的规则应用于您的创建/销毁函数以避免泄漏。作为一个好的做法，你应该总是有一个销毁来匹配一个创建，即使它只是自由包装。这样就更难出错了。

```
struct x *create_x() {
    struct x *p = malloc(10);
    p->val1 = 7;
    return p;
}
void destroy_x(struct x *p) {
    free(p);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:35:59.383

您的代码没有问题，但是您可以为 data 和 url 预先分配内存，并将它们作为参数传递给`getstr`和`readsocket`函数。这样会更有效率。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T13:36:14.483

如果函数`getstr`并`readsocket`使用例如分配内存，`malloc`那么这就是你正在做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T13:49:51.630

以下是我注意到的一些事情：

1.  您`i`用于控制循环，但是当您设置 时`i = 0`，程序必须一直关闭大括号。我建议使用`while (1)`and`break`语句并摆脱`i`变量：

    ```
    while(1) {
        ...
        if (strlen(url) <= 0)
            break;
        ...
    } 
    ```

2.  您使用`if (data = readsocket(url, 80, "http"))`的在技术上并没有错，但它有点误导，因为有人可能会将其误认为是比较`if (data == readsocket(url, 80, "http")`。这几乎是 C 编程中的一种“模式”，通常像您在`if (!url = getstr()))`网上那样编写是一个好主意：

    ```
    if ((data = readsocket(url, 80, "http")) != NULL) ... 
    ```

    或者

    ```
    if (!(data = readsocket(url, 80, "http"))) ... 
    ```

3.  这更像是一个“风格”相关，但最好在单独的行上写单独的语句，所以不要写

    ```
    if (!(url = getstr())) return 1 
    ```

    反而

    ```
    if (!(url = getstr()))
        return 1; 
    ```

4.  至于释放内存，你做得很好

# actionscript-3 - 如何在actionscript3中异步获取文件修改日期

> ID：12160386
> 
> 赞同：3
> 
> 时间：2012-08-28T13:31:54.697
> 
> 标签：actionscript-3, file, asynchronous

我正在尝试轮询文件以检查它是否已在磁盘上被修改或删除。
如果我使用文件`exists`或`modificationDate`属性时网络速度较慢，应用程序将挂起。

有没有办法异步地做到这一点？

样本

```
var f:File = new File(url);
if (f.exists && f.modificationDate.getTime() > oldModificationDate) { // hangs on both exists and modificationDate calls
    // File changed on disk
    ... 
```

感谢您的帮助，
保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T20:38:05.433

这可能有点 hacky，但是使用 getDirectoryListingAsync() 怎么样？您可以创建一个临时 File 对象，该对象指向您想要的文件所在的目录。调用异步处理程序时，您可以遍历结果，直到找到与目标匹配的文件，然后进行日期检查。像这样的东西：

```
var expectedName:String = "myFile";
var oldModificationDate:Date=new Date();

public function fileCheck(fileName:String)
{
File file = new File(fileName);
File dir = new File("/somefiles/localDir/");
dir.getDirectoryListingAsync();
dir.addEventListener(FileListEvent.DIRECTORY_LISTING, directoryListingHandler);
}

function directoryListingHandler(event:FileListEvent):void {
    var list:Array = event.files;
    for (var i:uint = 0; i < list.length; i++) {
        if(list[i].name==expectedName && f.modificationDate.getTime() > oldModificationDate)
          {
            fileFoundHandler();
          }
    }
}

function fileFoundHandler():void
{
  //your response code goes here
} 
```

# performance - OCaml 的异常表现

> ID：12160390
> 
> 赞同：13
> 
> 时间：2012-08-28T13:32:13.090
> 
> 标签：performance, f#, ocaml

我经常读到异常有点慢，如果性能是一个问题（例如，在 Java、F# 等中），应该避免。这是否适用于常见的 OCaml 函数，例如`Hashtbl.find`返回未找到元素的异常？

特别是，如果我希望我的应用程序高效，我是否应该始终使用例如`Hashtable.mem`在调用之前测试元素成员资格`Hashtbl.find`？或者函数的额外比较`mem`会对性能产生负面影响？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-28T14:50:30.017

OCaml 异常处理使引发和捕获异常的速度非常快——请参阅[此 SO 线程](https://stackoverflow.com/questions/8564025/ocaml-internals-exceptions)以了解有关其实现方式的内部详细信息。我没有注意精确地对其进行基准测试，但我的随机猜测是它在间接函数调用的范围内。

众所周知，与语言的其余部分相比，OCaml 异常比 F# 的异常要快得多——这给将代码从 OCaml 移植到 F# 的人们带来了性能问题。在 OCaml 中，异常不会导致性能问题。

`Hashtbl.mem`之前调用`Hashtbl.find`可能比捕获异常慢。惯用的风格往往是`try Hashtbl.find .. with Not_found -> ...`。

也就是说，OCaml 社区有一个明智的运动，即使用更明确的错误处理风格，使用`option`类型而不是异常。基本原理不是基于性能，而是基于类型检查器阻止您忘记处理错误情况的事实。在设计全新的 API 时，我更愿意这样做。使用引发异常的第三方函数时，请确保立即捕获所有可能的异常；否则通常是一种设计气味，应该非常合理。

由于方便，OCaml 异常也经常被用作纯控制流机制（而不是表示罕见的故障情况）。你会遇到如下代码：

```
try
  for i = 0 to .... do
    if .. then raise Exit
  done; false
with Exit -> true 
```

Finally, I feel that you might be taking a bad approach to implementation choices. Asking general micro-questions about performances is generally not the way to go. Think of correctness and readability first. Performance questions should generally come later, and only in situation where it is measurable/profilable.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T14:23:14.347

首先回答`Hashtbl.mem`之前的具体问题`Hashtbl.find`：不要这样做，因为检查表中元素是否存在必须不要两次；虽然两种策略的成本都是**O(1)**，但首先调用`Hashtbl.mem`将计算哈希值和查找两次——这可能比获取异常花费更长的时间。

作为一般建议，仅在异常概率较低时创建引发异常的函数。类型系统不考虑异常，因此更健壮的实现将具有`'a option`返回值而不是`'a`加上可能的异常。*ocaml 核心*库使用后缀 of`_exn`来明确一个函数可能会抛出异常，但通常更喜欢非异常抛出的函数。

因此，对于哈希表，您应该（在完美的世界中）具有两个功能：

`Hashtbl.find_exn : 'a t -> key -> 'a (* throws Not_found *)`

`Hashtbl.find : 'a t -> key -> 'a option`

如果有疑问，请使用第二个。如果不是为了纯粹的速度，您可以在原始哈希表周围编写一个简单的包装器：

`find_safe h k = try Some (Hashtbl.find h k) with Not_found -> None`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T12:26:02.467

> I've often read that exceptions are somewhat slow and should be avoided if performance is an issue (for instance, in Java, F#, etc). Does that apply to common OCaml functions such as Hashtbl.find, which return exceptions for elements not found?

No. Folklore around exceptions being slow and for exceptional circumstances in mainstream languages is nonsense. Exceptions are just another control flow construct. OCaml's exceptions are fast and commonly used for non-exceptional circumstances. Last I looked (a few years ago) exceptions were around 6x faster in OCaml than C++, around 100x faster than Java and around 600x faster than .NET.

People sometimes avoid exceptions in OCaml not for performance-related reasons but because they want explicit local control flow, typically forcing the caller to `match` over a success/failure union type instead of potentially non-local exception propagation. They do this to improve correctness, which is more important than performance.

# javascript - jQuery Multiselect 插件返回空长度（应该是 0？）

> ID：12160391
> 
> 赞同：1
> 
> 时间：2012-08-28T13:32:15.787
> 
> 标签：javascript, jquery, arrays, null

使用 jQuery Multiselect 插件，需要检查是否有任何选择（用户可以打开和关闭选择框而不选择任何内容）。这个插件有一个“关闭”方法，我用它来获取选定/选中选项的数组：

```
var checkedVals = [];
checkedVals = $('#'+which).val();   // Get Array of checked options
alert(checkedVals.length);      // See if it's empty 
```

选择/选中选项时，它可以正常工作（所以我知道我返回值），但是当没有选择任何内容时，Firebug抛出了一个错误，指出校验象是空的。一个空数组应该是 0... 不是 null。并且请......让我们不要讨论试图捕获“null”。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:39:25.920

来自[.val() 的 jQuery 文档](http://api.jquery.com/val/)：

> 在`<select multiple="multiple">`元素的情况下， .val() 方法返回一个包含每个选定选项的数组；如果未选择任何选项，则返回**null**。

行为与预期一样，并且您的代码是正确的，除了您必须添加一个检查以检查可以返回 null`.val()`的完全合理的可能性。`.val()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T13:40:37.830

像这样写，你将永远有一个数组

```
var checkedVals = $('#'+which).val() || [];
alert(checkedVals.length); 
```

它将 checkVals 设置为 .val() 值或空数组，如果它为空（假）。

# objective-c - 点击按钮时如何在控制器之间切换，iOS？

> ID：12160392
> 
> 赞同：0
> 
> 时间：2012-08-28T13:32:17.677
> 
> 标签：objective-c, ios, uiviewcontroller

所以我有我的主视图控制器，我只有一个里面的按钮。按钮的代码是：

```
- (IBAction)eventsButton:(id)sender {
self.eventsViewController =[[EventsViewController alloc]initWithNibName:@"EventsViewController" bundle:nil];
[self.navigationController pushViewController:eventsViewController animated:YES];} 
```

其中 EventsViewController 是另一个控制器，当单击此按钮时我想在其中导航。但是当我点击它时，什么也没有发生。我没有导航到另一个控制器。

```
ViewController.h
-------------------
#import <UIKit/UIKit.h>

@class EventsViewController;

@interface ViewController : UIViewController <UIActionSheetDelegate>

- (IBAction)eventsButton:(id)sender;

@property (strong, nonatomic) EventsViewController *eventsViewController;

@end

ViewController.m
-----------------
#import "ViewController.h"
#import "EventsViewController.h"

@implementation ViewController

@synthesize eventsViewController;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)eventsButton:(id)sender {
    self.eventsViewController =[[EventsViewController alloc]initWithNibName:@"EventsViewController" bundle:nil];
    [self.navigationController pushViewController:eventsViewController animated:YES];
}

@end 
```

我在 IBACTION 中放置了一个断点，我看到代码已执行，但它从未将我导航到另一个控制器。另一个控制器只是我用 Xcode 创建的一个简单控制器，它包含 Xcode 提供的所有代码，而没有我的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:41:36.280

我的猜测是您没有将 ViewController 放在 UINavigationController 中。首先你必须分配和初始化 UINavigationController。所以里面`application: didFinishLounchingWithOptions:`

```
ViewController *viewController = [[ViewController alloc] init];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:viewController]
[self.window setRootViewController:navigationController];
[self.window makeKeyAndVisible] 
```

它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:43:16.180

```
[self.navigationController pushViewController:eventsViewController animated:YES]; 
```

它仅适用于当前视图控制器是导航控制器。实际上，您在普通视图控制器中而不是在导航控制器中实现此代码。检查以下代码替换上面的行

```
[self presentModalViewController:eventsViewController animated:YES]; 
```

所以你需要为你当前的视图控制器实现导航控制器。在 Appdelegate 中，您使用视图控制器将根视图控制器更改为导航控制器。

```
UINavigationController *navController = [[[UINavigationController alloc] initWithRootViewController:yourController] autorelease];
self.window.rootViewController = navController; 
```

# facebook - 页面上的 Facebook 选项卡应用程序未向所有用户（包括管理员）显示

> ID：12160393
> 
> 赞同：0
> 
> 时间：2012-08-28T13:32:33.197
> 
> 标签：facebook, facebook-apps, facebook-page, iframe-app

我在 Facebook 页面上有一个仅适用于某些用户的选项卡应用程序。我不确定区别是什么，因为其中一个用户是管理员。SSL 工作正常，并且不在沙盒模式下。有什么理由会为某些人显示空白页吗？

这是网址[https://www.facebook.com/pages/Purple-Haze-l-Warehouse-Rave-Series/414833951888732?sk=app_263980683718092](https://www.facebook.com/pages/Purple-Haze-l-Warehouse-Rave-Series/414833951888732?sk=app_263980683718092)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:18:49.683

> SSL 工作正常

是的，但非 SSL 版本不是。

`https://exterbox.com/dev/ravetv/`是您的应用程序的 SSL 版本的 URL - 所以我猜`http://exterbox.com/dev/ravetv/`应该是非 SSL 版本，但调用它只会给出 404 Not Found 错误。

# java - 等效于 Objective-C 的 Guava 的 Preconditions.checkNotNull(...)？

> ID：12160395
> 
> 赞同：2
> 
> 时间：2012-08-28T13:32:35.923
> 
> 标签：java, objective-c, guava

在 Java 中，我喜欢使用[Guava 的 Preconditions 类](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/base/Preconditions.html)来启动方法，以确保方法参数不为空，或者是有效值。例如：

```
public void myMethod(String str) {
    Preconditions.checkNotNull(str);
    ... method logic here ...
} 
```

这是我编码方法的重要组成部分。Objective-C中有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:38:57.703

断言（）有什么问题？即断言(str!=nil);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:02:35.003

Objective-C 是 C 的超集，因此您可能会发现以下解决方案适合您的需求： [C 中的契约式设计](http://onlamp.com/pub/a/onlamp/2004/10/28/design_by_contract_in_c.html)。此处描述了另一种使用 Objective-C 的解决方案：Objective-C 中[用于按合同设计的一些宏](http://www.roard.com/contracts/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:48:54.940

等效的是 NSParameterAssert，在 NSException.h 中定义。不过，它不像 Guava 那样功能齐全。

# javascript - 我如何将值从文本框传递给自身事件

> ID：12160397
> 
> 赞同：1
> 
> 时间：2012-08-28T13:32:40.487
> 
> 标签：javascript, asp.net, javascript-events

如何将值从文本框传递给自身事件？

```
 <asp:TextBox runat="server" ID="txtEmail" onblur="SendRequest()">this_text_I_want_to_put_as_param_to_SendRequest</asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:34:08.067

```
<asp:TextBox 
    runat="server" 
    ID="txtEmail" 
    onblur="SendRequest(this.value)">
    this_text_I_want_to_put_as_param_to_SendRequest
</asp:TextBox> 
```

# javascript - 如果按下按钮，jQuery onunload 会执行操作

> ID：12160403
> 
> 赞同：4
> 
> 时间：2012-08-28T13:33:12.100
> 
> 标签：javascript, jquery

我有一个小网站，它的客户端框架是*jQuery*。

我有一个页面，我需要在页面卸载之前执行一些*AJAX*操作，但是如果单击某个按钮，该操作可能不会触发。

我正在尝试这个：

```
<body onbeforeunload="myaction();"> 
```

但是我怎么知道某个按钮是否被点击了呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:34:38.147

```
var globalClickVariable = false;

$('#my-button').click(function() {
    globalClickVariable = true;
});

<body onbeforeunload="if(!globalClickVariable) { myaction(); }"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:49:46.947

您还可以绑定`onbeforeunload`到`jQuery`：

```
myCounter = true;
$(window).load(function(){
    $('#mytest').bind('click', function(){
        myCounter = false;
    });
});
$(window).bind('beforeunload', function() {
    if (myCounter) {
       $.ajax({
          type: 'POST',
          url: 'mytest.php'
        });
    }
}); 
```

# asp.net - 如何在共享函数中获取复选框的选中值

> ID：12160408
> 
> 赞同：0
> 
> 时间：2012-08-28T13:33:29.520
> 
> 标签：asp.net, vb.net

下面列出的是我的函数（vb）的定义。

我正在尝试检查函数内复选框的值。我目前无法做到这一点而不会收到错误说明

> “错误 305：如果没有类的显式实例，则无法从共享方法或共享成员初始化程序中引用类的实例成员。”

有什么可以更改的，以便我可以获取值以查看是否选中了复选框？该方法必须是共享的，因此它适用于现有的 javascript 和 pagemethods 的使用

谢谢

```
<System.Web.Services.WebMethod()> _
Public Shared Function Load(inputs here - taken out for stack overflow) As String 
```

编辑-我能想到的唯一其他解决方案是找到一种方法让页面的 javascript onload 在服务器端之前运行，如果有人知道如何做到这一点，这也可以解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:38:44.090

是的。执行消息建议的操作并使该方法不共享，然后您将能够访问该页面的成员。

# python - 为什么 lxml.etree.iterparse() 会占用我所有的内存？

> ID：12160418
> 
> 赞同：28
> 
> 时间：2012-08-28T13:34:03.240
> 
> 标签：python, xml, memory, lxml, iterparse

这最终会消耗我所有可用的内存，然后进程被杀死。我尝试将标签从`schedule`“更小”标签更改为“更小”的标签，但这并没有什么不同。

我在做什么错/如何处理这个大文件`iterparse()`？

```
import lxml.etree

for schedule in lxml.etree.iterparse('really-big-file.xml', tag='schedule'):
    print "why does this consume all my memory?" 
```

我可以很容易地把它切成小块并处理它，但这比我想要的更难看。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-28T14:06:48.097

当`iterparse`迭代整个文件时，会构建一棵树，并且不会释放任何元素。这样做的好处是元素会记住它们的父元素，并且您可以形成引用祖先元素的 XPath。缺点是会消耗大量内存。

为了在解析时释放一些内存，请使用 Liza Daly 的`fast_iter`：

```
def fast_iter(context, func, *args, **kwargs):
    """
    http://lxml.de/parsing.html#modifying-the-tree
    Based on Liza Daly's fast_iter
    http://www.ibm.com/developerworks/xml/library/x-hiperfparse/
    See also http://effbot.org/zone/element-iterparse.htm
    """
    for event, elem in context:
        func(elem, *args, **kwargs)
        # It's safe to call clear() here because no descendants will be
        # accessed
        elem.clear()
        # Also eliminate now-empty references from the root node to elem
        for ancestor in elem.xpath('ancestor-or-self::*'):
            while ancestor.getprevious() is not None:
                del ancestor.getparent()[0]
    del context 
```

然后你可以像这样使用它：

```
def process_element(elem):
    print "why does this consume all my memory?"

context = lxml.etree.iterparse('really-big-file.xml', tag='schedule', events=('end',))
fast_iter(context, process_element) 
```

我强烈推荐以上内容所依据[的文章](http://www.ibm.com/developerworks/xml/library/x-hiperfparse/)`fast_iter`；如果您正在处理大型 XML 文件，这对您来说应该特别有趣。

上面介绍的`fast_iter`是文章中所示版本的略微修改版本。这个更激进地删除以前的祖先，从而节省更多内存。[在这里，您将找到一个](https://stackoverflow.com/a/7171543/190597)演示差异的脚本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T14:12:11.847

直接复制自[http://effbot.org/zone/element-iterparse.htm](http://effbot.org/zone/element-iterparse.htm)

请注意，iterparse 仍然会构建树，就像 parse 一样，但您可以在解析时安全地重新排列或删除树的某些部分。例如，要解析大文件，您可以在处理完元素后立即删除它们：

```
for event, elem in iterparse(source):
    if elem.tag == "record":
        ... process record elements ...
        elem.clear() 
```

上述模式有一个缺点；它不会清除根元素，因此您最终会得到一个包含许多空子元素的元素。如果您的文件很大，而不仅仅是很大，这可能是个问题。要解决此问题，您需要掌握根元素。最简单的方法是启用开始事件，并保存对变量中第一个元素的引用：

```
# get an iterable
context = iterparse(source, events=("start", "end"))

# turn it into an iterator
context = iter(context)

# get the root element
event, root = context.next()

for event, elem in context:
    if event == "end" and elem.tag == "record":
        ... process record elements ...
        root.clear() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-06T21:09:19.000

这对我来说非常有效：

```
def destroy_tree(tree):
    root = tree.getroot()

    node_tracker = {root: [0, None]}

    for node in root.iterdescendants():
        parent = node.getparent()
        node_tracker[node] = [node_tracker[parent][0] + 1, parent]

    node_tracker = sorted([(depth, parent, child) for child, (depth, parent)
                           in node_tracker.items()], key=lambda x: x[0], reverse=True)

    for _, parent, child in node_tracker:
        if parent is None:
            break
        parent.remove(child)

    del tree 
```

# javascript - Javascript 无法在 Chrome 中单击（）

> ID：12160423
> 
> 赞同：1
> 
> 时间：2012-08-28T13:34:23.837
> 
> 标签：javascript, selenium, click, webdriver

我有一个按钮，其代码如下：

```
<input type="button" onclick="someFunction();" value="doSomething"> 
```

我正在尝试单击 Selenium2 中的此按钮。我设法获取了元素，但 click() 函数在 Chrome 中不起作用。

我尝试直接在 JavaScript 上执行此操作，但它仍然无法在 Chrome 中运行。

如果您直接单击按钮，它可以工作，它也可以在 Firefox 中工作。

任何人都知道如何解决这个问题？

编辑：我忘记了示例中的括号。它们存在于“真实”代码中。

Edit2：用于模拟点击的 Selenium 2 代码是：

```
driver.findElement(By.tagName("input")).click(); 
```

在有人问之前，页面中没有其他 tagName“输入”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T13:36:36.047

一般来说，使用内联属性来定义事件处理程序是一个坏主意。相反，您应该选择使用 JavaScript 绑定事件处理程序，以便将内容 (HTML) 和功能 (JavaScript) 分开。

但是，问题似乎是您实际上并没有调用该函数。将其更改为：

```
<input type="button" onclick="someFunction();" value="doSomething"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:38:07.970

我认为你必须使用带有函数括号（）的函数名

像这样输入 type="button" **onclick="someFunction();** " value="doSomething"

我希望这能帮到您

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:40:26.000

尝试这样，或者更好地将 javascript 放在单独的文件中：

```
<input type="button" value="doSomething" id="someFuncBtn">

<script type="text/javascript">
    $(document).ready(function () {
        $('#someFuncBtn').on('click', function(){
            someFunction();
        });
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T09:08:39.263

我意识到这是点击的问题，有时会有点奇怪。这样效果更好：

```
driver.findElements(By.tagName("input")).get(0).click(); 
```

即使它仍然“有时”失败。我仍然不知道为什么。

# dynamics-crm-2011 - CRM 2011 - 支持更改货币符号的 javascript 函数版本

> ID：12160427
> 
> 赞同：2
> 
> 时间：2012-08-28T13:34:30.013
> 
> 标签：dynamics-crm-2011

我有这个用于 CRM 4.0 的漂亮的小 javascript 片段来更新表单的 Money 字段以使用我作为字符串传入的货币符号。（[来源](http://social.microsoft.com/Forums/hr/crmdevelopment/thread/1a3be674-1173-478f-a5cd-864c73a21a24)）

```
UpdateCurrencySymbolInUI: function (_curr) {
    // BTP: fail to update currency symbol if using browser other than IE (crmForm will not be defined)
    // (set currency not supported via Xrm.Page CRM 2011)
    if (!IsNull(crmForm)) {
        var iLen = crmForm.all.length;
        var oCtrl, i;

        for (i = 0; i < iLen; i++) {
            oCtrl = crmForm.all[i];
            if (!IsNull(oCtrl.IsMoney) && !oCtrl.IsBaseCurrency) {
                oCtrl.CurrencySymbol = _curr;
            }
        }
    }
} 
```

它可以完美运行，但是对于即将更改的多浏览器支持（现在计划在 2012 年第 4 季度进行，对吗？）[微软的自定义代码验证工具表明此代码将无法](http://blogs.msdn.com/b/crm/archive/2012/06/21/microsoft-dynamics-crm-2011-custom-code-validation-tool-released.aspx)在 IE 以外的任何浏览器上运行，因为不再支持 crmForm。

经过一番谷歌搜索后，我看不到设置货币 sybmol 的受支持替代方案。我是否遗漏了 API 中的某些内容，或者他们是否完全删除了此功能以分配货币符号（通过 API）？[这篇文章建议](http://social.microsoft.com/Forums/en-CA/crmdevelopment/thread/7c7e88bb-b49f-4d88-8fa5-a2608f9a406d)我使用 document.getElementById 并将“_sym”添加到字段名，但我认为这是不受支持的。我更喜欢受支持的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:32:35.073

已编辑：从 OP 的问题中不是很明显，但这种行为（货币代码未更改）仅在`transactioncurrencyid`通过 JScript 更改属性时才会显示。

这就是 MS 在 CRM Online 和 On Premise UR5 ( `img.lu.transcur.htc`) 中仍在做的事情。看起来和我很相似。虽然在这里看不到任何特定于浏览器的东西......：

```
function updateCurrencySymbolInUI(){
    if(!IsNull(_oForm))
        for(var iLen=_oForm.all.length,oCtrl,i=0;i<iLen;i++){
            oCtrl=_oForm.all[i];
            if(!IsNull(oCtrl.IsMoney)&&!oCtrl.IsBaseCurrency){
                oCtrl.CurrencySymbol=_sCurSym;
               oCtrl.CurrencyPrecision=_iCurPre
            }        
        }
} 
```

我认为代码验证工具的问题是因为如您所说`crmForm`已被弃用。`document.all['crmForm']`将一个对页面的 FORM 对象 ( )的引用传递给它，而不是`crmForm`. 我认为这会很好地工作。

~~为什么你需要这段代码？如果您在包含`Money`字段的表单上更改交易货币，控件中的货币符号会自动更改为在业务管理 > 货币中定义的符号。~~

~~如果符号不是您要显示的符号，请在此处更改:)~~

# jquery - jQuery - 从上到下的简单动画高度

> ID：12160430
> 
> 赞同：2
> 
> 时间：2012-08-28T13:34:59.173
> 
> 标签：jquery, jquery-animate

我的网站上有一个侧边栏，显示一些搜索结果。我只想显示前 20 个结果。然后有一个“显示更多”按钮。当您单击该按钮时，我想显示总列表。

这是我现在的代码：http: [//jsfiddle.net/FCCGF/1/](http://jsfiddle.net/FCCGF/1/)

我在这里想要的是：

*   页面加载时，仅显示 Test1。

*   当您单击“显示更多”时，我希望动画从上到下开始（以显示列表的所有选项）

*   我希望“显示更多”位于列表的末尾，当用户再次单击它时，我希望它回到原来的位置。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:49:21.300

动画时可以更新 top 和 marginTop 来实现向下滑动的效果：

```
$(document).ready(function() {
    var totalSidebarHeight = $(".sidebar").height();
    var resultHidden = totalSidebarHeight - 20;

    $(".topResultsArea").height( resultHidden );

    $(".showMore").toggle(function(){
        $(".topResultsArea").animate({height:20, top:$(".sidebar").height(), marginTop:0},200);

      },function(){
          $(".topResultsArea").animate({height:resultHidden, top:0, marginTop:40},200);
      });

});​ 
```

更新小提琴：http: [//jsfiddle.net/johnkoer/FCCGF/18/](http://jsfiddle.net/johnkoer/FCCGF/18/)

# rpgle - 学习 RPGIV 的免费在线资源

> ID：12160433
> 
> 赞同：0
> 
> 时间：2012-08-28T13:35:01.163
> 
> 标签：rpgle

我想学习一些RPGIV。我对语言了解不多。我正在寻找免费的在线资源，到目前为止，我刚刚找到了需要付费的网站。

我想学习的原因是我们正在使用调用 Web 服务的 RPG 函数。它给出了一般的内部服务器错误 500。所以我想学习 RPGIV，这样我就可以提出正确的问题并解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:03:27.217

这是一个非常广泛的问题。如果您能稍微解释一下为什么 RPG IV 以及您将使用它的用途，那么答案的有用性将会增加。

与 Java 或 C++ 不同，RPG IV 没有任何基于 PC 的编译器。RPG IV 仅在 IBM 中端系列计算机上运行，​​因此必须访问其中一台才能尝试任何代码。 [Holger Scherer 有一台公共机器可用](http://www.holgerscherer.de/)；可能还有其他人，但这是一个稀薄的市场。

一般来说，学习[RPG IV](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzahg/rzahgrpgcode.htm)是不够的。为了能够在中端计算机上发挥作用，您还需要至少了解[DDS](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=/rzahg/rzahgdds.htm)和[CL 。](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rbam6/rbam6clmain.htm)除此之外，您还应该学习一些基本的工作管理概念，例如查找编译器列表进入哪个输出队列、如何将作业提交到批处理（以及什么是“作业”！）以及如何使用库列表。我也强烈建议您也学习[ILE](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzahg/rzahgileconceptprint.htm)。内置数据库是[DB2](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzahg/rzahgdb.htm)变体；一个初级程序员不会关心创建数据库，而是了解它是如何构建的，各种表是如何相互关联的。这严格依赖于数据库，依赖于设计它的业务。作为程序员，您将使用[嵌入式 SQL](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzajp/rzajpkickoff.htm)，因此请查看该手册以及[SQL 编程](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/sqlp/rbafykickoff.htm)和[SQL 参考](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/db2/rbafzmst02.htm)手册。

**编辑：**

如果您正在阅读 RPG IV，它并不难理解。编写它需要更多的工作:-) 另外，听起来好像您有一个本地资源可以引导您完成一些看起来很奇怪的部分。我的直接建议是将 RPG IV 程序进行调试并观察来回运行。( `STRDBG`) 将其与 Web 服务作者提供的任何示例进行比较（可能是在 Java 中？）并查看 HTTP 请求是否存在某种格式错误。

由于这个问题是关于学习 RPG 而不是调试 500 错误，所以我将继续专注于学习方面。如果您需要调试方面的帮助，请提出不同的问题并发布相关代码。获取代码的方法是`DSPPGM`在 RPG IV 程序上查找组成它的模块。显示模块的详细信息（选项 5）并跟踪源文件、库和成员名称。然后，`WRKMBRPDM`在源文件和库上，在右上角的“位置”字段中输出源成员名称。按 Enter，该来源成员将位于列表顶部。使用选项 5 浏览源成员。

非常简单地说，F 规范描述了程序将使用的表。RPG 使用带有`READ`, `WRITE`, `EXCEPT`,等操作码的文件`UPDATE`。如果程序使用嵌入式 SQL，除了 RPG 使用的表之外，可能还有 SQL 使用的表。`EXEC SQL`您会在声明中看到指定的内容。

D 规范描述了所有工作变量，包括单个变量、数组和数据结构。

C 规范是进行实际计算的地方。那些使用 /free 格式计算的人认为这些已弃用，但您可能会遇到它们。固定形式的 C 规范是柱状的；特定的列意味着非常具体的事情。最重要的列是因子 1、操作码、因子 2 和结果。这种风格的典型计算可能是`BUFFERLEN ADD 1 BUFFERLEN`将变量 BUFFERLEN 增加 1。

固定格式 C-specs 的变体扩展了因子 2。相同的计算看起来像这样`(empty factor 1) EVAL BUFFERLEN = BUFFERLEN + 1`。当您在代码中看到它时，这将更有意义。

自由格式计算根本不关心列。上面的计算看起来像`BUFFERLEN += 1;`或`BUFFERLEN = BUFFERLEN + 1;`

O 规范描述了如何产生内部描述的输出。这通常用于打印报告，但您可能会遇到此处描述实际文件输出的情况。

子程序是不言自明的。子程序可能需要一些解释。这些基本上是函数调用。PR 规范描述了原型，因此编译器将能够对变量进行类型检查，而 PI 规范描述了实际过程。在过程中声明的变量（在 D 规范中）是该过程的本地变量。您可能会遇到不包含在 RPG 程序源中，而是绑定到服务程序中的过程。您将能够在`DSPPGM`.

# php - jQuery UI 对话框表单 - 缺少变量值

> ID：12160434
> 
> 赞同：0
> 
> 时间：2012-08-28T13:35:05.180
> 
> 标签：php, javascript, ajax, jquery-ui, dialog

在我的网站上，我正在使用 jQuery ui 框架制作一个对话框。

该对话框请求应插入 mySQL 的主题、评论内容、名称和城市。但是，当我想将变量传递给 PHP 时，变量中没有值。

这是处理对话框的整个 js 函数：

```
$( "#dialog-form" ).dialog({
    autoOpen: false,
    height: 600,
    width: 550,
    modal: true,
    buttons: {
        "Skriv Review": function() {
            var bValid = true;
            allFields.removeClass( "ui-state-error" );

            bValid = bValid && checkLength( topic, "topic", 3, 16 );
            bValid = bValid && checkLength( review, "review", 1, 10000 );
            bValid = bValid && checkLength( name, "name", 1, 25 );
            bValid = bValid && checkLength( city, "city", 1, 16 );

            bValid = bValid && checkRegexp( name, /^[a-z]([0-9a-z_])+$/i, "Bruger skal være a-z, 0-9, underscores, begynde med et bogstav." );

            if ( bValid ) {
                $( "#users tbody" ).append( "<tr>" +
                    "<td>" + topic.val() + "</td>" + 
                    "<td>" + review.val() + "</td>" + 
                    "<td>" + name.val() + "</td>" +
                    "<td>" + city.val() + "</td>" +
                "</tr>" ); 

                var data = {
                    topic: topic.val(),
                    review: review.val(),
                    name: name.val(),
                    city: city.val()
                }

                $.ajax({
                    type : 'POST',
                    url : 'bruger-reviews.php',
                    dataType : 'json',
                    data: data,
                    success : function(data){
                        //success
                    }
                });
                $( this ).dialog( "close" );
            }
        },
        Cancel: function() {
            $( this ).dialog( "close" );
        }
    },
    close: function() {
        allFields.val( "" ).removeClass( "ui-state-error" );
    }
}); 
```

这是我在 PHP 中接收数据的方式：

```
$ins_topic = $_POST['topic'];
$ins_review = $_POST['review'];
$ins_name = $_POST['name'];
$ins_city = $_POST['city']; 
```

我没有问题像在 jQuery UI 的演示中那样显示值。

当我 $_GET 或 $_POST 变量时没有数据。为什么我无法将值传递给 PHP？我可以尝试另一种方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:53:05.653

在关闭对话框之前，您应该将值传递给一个对象或变量。

此代码删除从 DOM 中删除对话框；$( 这个 ).dialog( "关闭" );

用这个;

```
if ( bValid ) {
$( "#users tbody" ).append( "<tr>" +
"<td>" + topic.val() + "</td>" + 
"<td>" + review.val() + "</td>" + 
"<td>" + name.val() + "</td>" +
"<td>" + city.val() + "</td>" +
"</tr>" ); 
var data = {
    topic: topic.val(),
    review: review.val(),
    name: name.val(),
    city: city.val()
}
$( this ).dialog( "close" ); 
```

比在 ajax 请求上使用这个数据对象

```
$.ajax({
                        type : 'POST',
                        url : 'bruger-reviews.php',
                        dataType : 'json',
                        data: data,
                        success : function(data){
                            //success
                        }
                    }); 
```

# spring-ws - 春季ws中的JiBX解组异常

> ID：12160436
> 
> 赞同：0
> 
> 时间：2012-08-28T13:35:08.360
> 
> 标签：spring-ws, jibx

我是 Spring WS 和 JiBX 的新手。我没有使用注释。在 Spring WS 中使用 Jibx 时出现以下错误。

```
JiBX unmarshalling exception: No unmarshaller for element "{http://www.visu.com/pos/soapws/}orderRequest" (line 1, col 103); nested exception is org.jibx.runtime.JiBXException: No unmarshaller for element "{http://www.visu.com/pos/soapws/}orderRequest" 
```

这是我的端点和弹簧配置

```
public class OrderEndPoint extends AbstractMarshallingPayloadEndpoint{

private Marshaller marshaller;
private Unmarshaller unmarshaller;
private OrderService orderService;

public OrderEndPoint(final OrderService orderService, final Marshaller marshaller, final Unmarshaller unmarshaller) {
    super(marshaller);
    super.setUnmarshaller(unmarshaller);
    //this.marshaller = marshaller;
    //this.unmarshaller = unmarshaller;
    this.orderService = orderService;       
    System.out.println("This is Order End point constructor");
}

@Override
protected Object invokeInternal(final Object newOrder) throws Exception {
    System.out.println("This is test for Invoke Internal");
    final OrderRequest orderReq = (OrderRequest)newOrder;
    final Order order = orderReq.getOrder();
    this.orderService.placeOrder(order); 
    return "Order with the order number "+order.getOrderNumber()+" saved successfully";
} 
```

}

```
<!-- Jibx marshellers -->
<bean id="unmarshaller" class="org.springframework.oxm.jibx.JibxMarshaller">
    <property name="targetClass" value="com.visu.pos.soapws.model.OrderRequest"/>
    <property name="bindingName" value="binding"/>
</bean>

<bean id="marshaller" class="org.springframework.oxm.jibx.JibxMarshaller">
    <property name="targetClass" value="com.visu.pos.soapws.model.OrderResponse"/>
    <property name="bindingName" value="binding"/>
</bean> 
```

下面是用于绑定的 Order.xsd

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.visu.com/pos/soapws/" elementFormDefault="qualified" targetNamespace="http://www.visu.com/pos/soapws/">

  <xs:element type="tns:orderRequest" name="orderRequest"/>
  <xs:complexType name="orderRequest">
    <xs:sequence>
      <xs:element type="tns:order" name="order" minOccurs="1"/>
    </xs:sequence>
  </xs:complexType>

  <xs:element type="tns:order" name="order"/>
  <xs:complexType name="order">
    <xs:sequence>
      <xs:element name="customer" minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:element type="xs:string" name="firstName" minOccurs="0"/>
            <xs:element type="xs:string" name="lastName" minOccurs="0"/>
            <xs:element type="xs:string" name="middleName" minOccurs="0" maxOccurs="unbounded"/>
          </xs:sequence>
          <xs:attribute type="xs:long" use="required" name="customerNumber"/>
        </xs:complexType>
      </xs:element>
      <xs:element type="tns:address" name="billTo" minOccurs="0"/>
      <xs:element name="shipping" minOccurs="0">
        <xs:simpleType>
          <xs:restriction base="xs:string">
            <xs:enumeration value="STANDARD_MAIL"/>
            <xs:enumeration value="PRIORITY_MAIL"/>
            <xs:enumeration value="INTERNATIONAL_MAIL"/>
            <xs:enumeration value="DOMESTIC_EXPRESS"/>
            <xs:enumeration value="INTERNATIONAL_EXPRESS"/>
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
      <xs:element type="tns:address" name="shipTo" minOccurs="0"/>
      <xs:element name="item" minOccurs="0" maxOccurs="unbounded">
        <xs:complexType>
          <xs:sequence>
            <xs:element type="xs:string" name="id" minOccurs="0"/>
            <xs:element type="xs:string" name="description" minOccurs="0"/>
          </xs:sequence>
          <xs:attribute type="xs:int" use="required" name="quantity"/>
          <xs:attribute type="xs:float" use="required" name="price"/>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute type="xs:long" use="required" name="orderNumber"/>
    <xs:attribute type="xs:date" name="orderDate"/>
    <xs:attribute type="xs:date" name="shipDate"/>
    <xs:attribute type="xs:float" name="total"/>
  </xs:complexType>
  <xs:complexType name="address">
    <xs:sequence>
      <xs:element type="xs:string" name="street1" minOccurs="0"/>
      <xs:element type="xs:string" name="street2" minOccurs="0"/>
      <xs:element type="xs:string" name="city" minOccurs="0"/>
      <xs:element type="xs:string" name="state" minOccurs="0"/>
      <xs:element type="xs:string" name="postCode" minOccurs="0"/>
      <xs:element type="xs:string" name="country" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="orderResponse">
    <xs:sequence>
      <xs:element type="xs:string" name="orderResponse" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element type="tns:orderResponse" name="orderResponse"/>
</xs:schema> 
```

网上验证Jibx实现不需要单独Marshaller和Unmarshaller。虽然我声明了编组器，但它抛出了这个错误。我尝试了所有可用的选项，但没有用。请在这方面提供帮助。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:36:41.103

```
<bean id="orderEndPoint" class="OrderEndPoint">
    <property name="marshaller" ref="marshaller" />
    <property name="unmarshaller" ref="unmarshaller" />
    <property name="orderService" ref="orderService" /> 
</bean> 
```

请在创建`OrderEndPoint`不需要的 bean 构造器注入时设置属性。只需在`OrderEndPoint`for中创建 setter 和 getter `orderService`。

**注意：** OrderRequest 应该是编组器。（您已配置为解组器）

# ruby - Ruby 字符串操作（分隔符）

> ID：12160439
> 
> 赞同：0
> 
> 时间：2012-08-28T13:35:22.660
> 
> 标签：ruby

我有一个这样的字符串：

```
14.015_KNECHT_178178 
```

我怎样才能拆分它，以便：

```
art = 14.015
man = KNECHT 
```

如您所见，分隔符是`_`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:38:42.810

string#split 可以做到这一点。

```
>> (art,man,foo) = "14.015_KNECHT_178178".split '_'
=> ["14.015", "KNECHT", "178178"]
>> p art
"14.015"
=> "14.015"
>> p man
"KNECHT"
=> "KNECHT"
>> p foo
"178178"
=> "178178" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:40:29.283

试试这个

```
art,man= "14.015_KNECHT_178178".split(/_/) 
```

[有关#split](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-split)的更多详细信息，请点击此处

# android - 如果我的应用程序被卸载，请执行一些清理操作

> ID：12160446
> 
> 赞同：-3
> 
> 时间：2012-08-28T13:35:52.587
> 
> 标签：android

> **可能重复：**
> [在 android 中执行卸载任务](https://stackoverflow.com/questions/3013823/perform-a-task-on-uninstall-in-android)

我的 android 应用程序安装在设备上时会在 sd 卡上创建一些文件夹。现在如果用户卸载应用程序，我想清理创建时创建的这些文件夹......那么是否可以在 android OS 中实现它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T13:41:54.257

当您的应用程序从设备上卸载时，您无法管理这些事情。仍然如果您想删除您的文件夹，有一种方法（不推荐），您可以创建另一个应用程序来监视您的应用程序，因此当您的应用程序被卸载时，该应用程序将删除您的应用程序创建的文件夹。但这不是实现这一目标的方法。不幸的是，在卸载应用程序时没有其他方法可以处理事情。

# linux - 性能分析器中的调用堆栈

> ID：12160449
> 
> 赞同：30
> 
> 时间：2012-08-28T13:36:02.883
> 
> 标签：linux, profiling, perf

我正在通过以下方式运行“perf”：

```
perf record -a --call-graph -p some_pid

perf report --call-graph --stdio 
```

然后，我看到了这个：

```
 1.60%     my_binary  my_binary                [.] my_func
           |
           --- my_func
              |          
              |--71.10%-- (nil)
              |          (nil)
              |          
               --28.90%-- 0x17f310000000a 
```

我看不到哪些函数调用了 my_func()。我看到的是“nil”和“0x17f310000000a”。难道我做错了什么？这可能不是调试信息问题，因为显示了一些符号而未显示其他符号。

更多信息：

*   我正在运行 CentOS 6.2（内核 2.6.32-220.4.1）。
*   perf rpm - perf-2.6.32-279.5.2.el6.x86_64。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-15T12:59:43.467

确保您使用`-fno-omit-frame-pointer` **gcc**选项编译了代码。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-13T16:59:54.323

你快到了，你错过了这个`-G`选项（你可能需要比你系统上安装的更新的性能）：

```
$ perf report --call-graph --stdio -G 
```

来自`perf help report`：

```
 -G, --inverted
       alias for inverted caller based call graph. 
```

# java - WSimport 工具生成缺少成员的客户端存根

> ID：12160453
> 
> 赞同：1
> 
> 时间：2012-08-28T13:36:13.770
> 
> 标签：java, web-services, wsimport

我使用 Metro 2.2.1 设计了一个简单的 Web 服务界面。当我运行 Java SE（build 1.6.0_24-b07-334）附带的 wsimport 实用程序并将其指向 WSDL URL 位置时，它会生成客户端存根代码，但该代码缺少方法。我很困惑为什么会这样，并希望得到任何指示。

主要的 Web 服务类 AutoUpdateAPI 具有以下方法：

```
public UpdateActionWS getLatestUpdate(@WebParam(name = "application") String application,     @WebParam(name = "version")  String version,@WebParam(name = "entries") UpdateItemWS[] entries, @WebParam(name = "license") String license); 
```

它返回具有以下定义的 UpdateActionWS 类：

```
public class UpdateActionWS {

protected String url;
protected String version;
protected boolean forcedInstall = false;

protected UpdateItemWS[] additions;
protected UpdateItemWS[] subtractions;
protected UpdateItemWS[] changes;

public UpdateActionWS() {

}

protected UpdateActionWS(String url, String version, boolean forcedInstall, UpdateItemWS[] additions, UpdateItemWS[] subtractions, UpdateItemWS[] changes) {
    this.additions = additions;
    this.subtractions = subtractions;
    this.changes = changes;
    this.url = url;
    this.version = version;
    this.forcedInstall = forcedInstall;
}

@WebMethod
public UpdateItemWS[] getAdditions() { return additions; }
@WebMethod
public UpdateItemWS[] getSubtractions() { return subtractions; }
@WebMethod
public UpdateItemWS[] getChanges() { return changes; }

@WebMethod
public String getUpdateURL() { return url; }

@WebMethod
public String getVersion() {
    return version;
}

@WebMethod
public boolean getForcedInstall() {
    return forcedInstall;
}
@WebMethod
public void setForcedInstall(boolean forcedInstall) {
    this.forcedInstall = forcedInstall;
}
} 
```

现在，当生成客户端存根时，此类的输出如下：

```
/**
* <p>Java class for updateActionWS complex type.
* 
* <p>The following schema fragment specifies the expected content contained within this class.
* 
* <pre>
* &lt;complexType name="updateActionWS">
*   &lt;complexContent>
*     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
*       &lt;sequence>
*         &lt;element name="forcedInstall" type="{http://www.w3.org/2001/XMLSchema}boolean"/>
*       &lt;/sequence>
*     &lt;/restriction>
*   &lt;/complexContent>
* &lt;/complexType>
* </pre>
* 
* 
*/
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "updateActionWS", propOrder = {
"forcedInstall" 
})
public class UpdateActionWS {

protected boolean forcedInstall;

/**
 * Gets the value of the forcedInstall property.
 * 
 */
public boolean isForcedInstall() {
    return forcedInstall;
}

/**
 * Sets the value of the forcedInstall property.
 * 
 */
public void setForcedInstall(boolean value) {
    this.forcedInstall = value;
}

} 
```

我的问题是：为什么它无视其他方法？我尝试使用 Apache-CXF-2.3.3 附带的 wsimport 实用程序。我尝试将最新的 JAX-WS 库添加到 Java 认可的库中，但没有运气。任何指针将不胜感激。

# php - 使用 AJAX + JQuery + PHP 返回值

> ID：12160455
> 
> 赞同：0
> 
> 时间：2012-08-28T13:36:16.913
> 
> 标签：php, jquery

基本上我正在尝试使用 JQuery + AJAX 从我的 PHP 文件中返回任何内容，以及它如何不返回任何内容。我试图找到问题，但我无法让它工作。PHP 文件完美运行。

谁能告诉我为什么不工作？

```
$("#iForm").submit( function(){
    var user = $("input:[name=username]").val();
    var password = $("input:[name=password]").val();
    var dbName = $("input:[name=dbName]").val();
    var server = $("input:[name=server]").val(); 

        $.get("1.php", {username: user, password: password, dbName: dbName, server: server },function(data){
            $("p").html (data);
            return false;
            })

    })

})

  </script>
<!-- Yes or No form -->
<form  name="yN" style= "display: show; margin-left: auto; margin-right: auto; width: 6em">
<input type="radio" name="yN" value="1">yes</input>
<input type="radio" name="yN" value="0">no</input>
<button id=1 >click me!</button>
</form>

<!-- Login Form -->
<form id="iForm"  style= "display: show">
<label id="username" >Username</label>
<input id="username" name="username"/>
<label id="password">Password</label>
<input id="password" name="password" />
<label id="server" >Server</label>
<input id="server" name="server"/>
<label id="dbName" >dbName</label>
<input id="dbName" name="dbname"/>

<input type="submit" value="submit" />
<p> </p> 
```

PHP文件

```
function createfile ($dbFile) {
        //Creates File and populates it.
        $fOpen = fopen($dbFile, 'w');
global $username, $password, $server, $dbname;
            $fString .= "<?php\n";
            $fString .= "// Database Constants\n";
            $fString .= "\$DB_SERVER =" . "\"" . $server . "\";\n";
            $fString .= "\$DB_USER =" . "\"" . $username . "\";\n";
            $fString .= "\$DB_PASS =" . "\"" . $password . "\";\n";
            $fString .= "\$DB_NAME =". "\"" . $dbname . "\";\n";
            $fString .= "?>";

        fwrite($fOpen, $fString);
        fclose($fOpen);
return true;
}

$username = $_GET['username'];
$password = $_GET['password'];
$server = $_GET['server'];
$dbname = $_GET['dbname'];

try {
$db = new PDO ('mysql:host=' .$server.';dbname='.$dbname,$username,$password);

if ($db) { //if succesful at connecting to the DB

if (file_exists($dbFile)){
    if (is_readable($dbFile) && is_writable($dbFile)){ 

        //Creates File, populates it and redirects the user

    if (createfile($dbFile)) { 
    echo "finito";
    exit ();
            }

        } else { 

        echo "The file {$dbFile} cannot be accessed. Please configure the file manualy or grant Write and Read permission.";  }

    } else {

        //Creates File, populates it and redirects the user

    if (createfile($dbFile)) {

    echo "finito";
    exit ();
            }

        }

}

} catch (PDOException $e) { //Catchs error if can't connect to the db.
    echo  'Connection failed: ' . $e->getMessage();
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:40:30.653

假设你的问题是没有'return false'；或`e.preventDefault()`在您的`submit`处理程序中尝试以下代码：

```
$("#iForm").submit( function(e){
    e.preventDefault();
    var user = $("input:[name=username]").val();
    var password = $("input:[name=password]").val();
    var dbName = $("input:[name=dbName]").val();
    var server = $("input:[name=server]").val(); 

        $.get("1.php", {username: user, password: password, dbName: dbName, server: server },function(data){
            $("p").html (data);
            return false;
            })

    })

}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:45:30.493

您的选择器错误，没有`:`in 属性选择器，您需要阻止表单提交，因此`$("input:[name=username]")`应该`$("input[name=username]")`添加`arguments[0].preventDefault()`到您的提交处理程序中。此外，从您的 ajax 回调中添加 return false 也没有任何效果。

# c# - obj.GetType().IsInstanceOfType(typeof(MyClass)) 何时为真？

> ID：12160460
> 
> 赞同：5
> 
> 时间：2012-08-28T13:36:36.973
> 
> 标签：c#, types, isinstance

我正在查看其他人编写的这段代码，我想知道它何时会评估为真。基本上，它说 someType 是 someOtherType 的一个实例。它甚至有意义吗？到目前为止，我已经尝试过：

```
derivedClass.GetType().IsInstanceOfType(typeof(BaseClass)) 

baseClass.GetType().IsInstanceOfType(typeof(DerivedClass)) 

myClass.GetType().IsInstanceOfType(typeof(MyClass)) 
```

并且所有这些都评估为假。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:38:44.817

`IsInstanceOfType()`检查您传递给它的实例是否是您调用它的类型的实例*。*

您正在将一个`System.Type`实例传递给`IsInstanceOfType()`. 仅当您调用它`typeof(Type)`或其基类之一时，这才是正确的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T13:51:51.427

**仅**当所涉及的对象（`derivedClass`分别为`baseClass`和`myClass`）是`object`或未记录`RuntimeType`对象的实例（注意[Type](http://msdn.microsoft.com/en-us/library/42892f65)是抽象的）时，这 3 行中的每一行都将返回 true ，因此例如以下将导致 true 语句：

```
var myObject = new object();
myObject.GetType().IsInstanceOfType(typeof(Console));

myObject = typeof(Object);
myObject.GetType().IsInstanceOfType(typeof(Console)); 
```

请注意，使用的类型（在这种情况下`Console`）无关紧要，并且对语句的结果没有影响。

**为什么？**

[IsInstanceOfType](http://msdn.microsoft.com/en-us/library/system.type.isinstanceoftype.aspx)的文档告诉我们，如果传入的对象是当前类型的实例，它将返回 true，例如，如果`myForm`是从 派生的类，则以下语句将返回 true `Form`，否则将返回 false。

```
typeof(Form).IsInstanceOfType(myForm); 
```

`myForm`实际上，在您的情况下`typeof(BaseClass)`，它属于未记录的类型`RuntimeType`（派生自`Type`），因此只有在`true`此未记录的类型恰好从提供的类型派生时才会返回 - 这不太可能是所需的行为。

**我应该改用什么？**

您可能追求的是[is keword](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.110%29.aspx)，如果提供的对象是给定类型的实例，则返回 true

```
derivedClass is BaseClass
baseClass is DerivedClass
myClass is MyClass 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T13:44:42.973

[`Type.IsInstanceOf`文档](http://msdn.microsoft.com/en-us/library/system.type.isinstanceoftype.aspx)说，如果当前**Type在****o**表示的对象的继承层次结构中，或者当前**Type**是**o**支持的接口，则`Type.IsInstanceOfType(o)`返回“ **true** ” 。

 ******在上面的例子中，`Type`是返回的类型`GetType()`，所以它是最左边的对象的类型。对象`o`是`typeof(BaseClass)`，它的类型是`Type`。当前`Type`为`DerivedClass`，对象`o`为`typeof(BaseClass)`。的类型`o`是`Type`。

将其插入文档中。如果在 的继承层次结构中，则返回“ **true** ”。`DerivedClass``Type`

这很少是真的。

作者几乎可以肯定是有意`typeof(BaseClass).IsInstanceOfType(derivedClass)`的，这更容易写成`derivedClass is BaseClass`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:38:02.773

当您调用 GetType() 的对象是作为参数传递给 IsInstanceOfType() 方法的参数的 System.Type 对象的实例时，这是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T13:38:24.413

`IsInstanceOfType`确定指定对象是否为当前 Type 的实例。

示例：IsInstanceOfType(o)

如果当前 Type 在 o 表示的对象的继承层次结构中，或者当前 Type 是 o 支持的接口，则为 true。如果这些条件都不满足，或者 o 为 null，或者当前 Type 是开放的泛型类型，则返回 false******

# ruby-on-rails - 为 nil:NIL 类获取 Template::Error (Undefined method 'each')

> ID：12160465
> 
> 赞同：0
> 
> 时间：2012-08-28T13:37:05.693
> 
> 标签：ruby-on-rails

看法：-

```
 <% @dating_advices.each do |da| %>
   <% if da['is-displayed'][0]['content'] == 'true' %>
   <div class="dating_advice">
      <h4><%= da['title'][0] %></h4>
      <p><b><%= da['author'][0] %></b></p>
      <p><%= da['content'] %></p>
   </div>
   <hr>
  <% end %>
 <% end %> 
```

控制器：-

```
def dating_advices
@current_menu = "MatchMasters"
logger.debug "*** Current site id: #{@current_site.id}"
#@hide_quick_search = true

@passed_args = {
    'event_action' => 'ws',
    'site_id' => @current_site.site_id
}
result = call_dating_advices_ws(@passed_args)
if result && result['errorcode'][0] == 'success'
  @dating_advices = result['payload'][0]['payload']
 end
end 
```

现在，当我单击网页上的约会建议时，它会出现错误“Getting Template::Error (Undefined method 'each') for nil:NIL Class”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:38:31.760

您可能没有得到任何`@dating_advices`信息——这意味着您正在调用每个不存在的实例 var。

`@dating_advices`如果未定义结果变量，则永远不会定义控制器的编写方式。

你可以用一个（或一个哈希——任何带有 .each 方法的东西）快速修补它，`@dataing_advices = []`并找出你的控制器失败的原因。

你可以做类似的事情

```
if result && result['errorcode'][0] == 'success'
   ... your dating advice code
else
   raise result
   (or @dating_advice = {})
end 
```

基本上你需要总是定义`@dating_advice`或者你需要处理你的视图中没有定义的值。

# jquery - jQuery - 检测“替换”函数何时执行操作

> ID：12160469
> 
> 赞同：0
> 
> 时间：2012-08-28T13:37:15.010
> 
> 标签：jquery

我使用 jQuery 替换功能来确保用户只能在电话号码字段中输入数字和连字符（它是一个私有 Web 应用程序，并且必须启用 JS 才能登录）。

我想在触发替换功能后 x 秒内向输入添加一个 css 类（突出显示红色），以便用户直观地看到输入正在拒绝输入。

**如何在替换功能激活后将 css 类添加到输入 x 秒？（仅当实际替换输入时）**

```
$("#v_phone").bind('keyup blur',function(){ 
    $(this).val( $(this).val().replace(/[^\d-]/g,'') ); }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:41:53.017

使用[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)：

```
$("#v_phone").bind('keyup blur',function(){ 
    var $this = $(this);
    var currentValue = $this.val();
    var newValue = currentValue.replace(/[^\d-]/g,'');
    if (currentValue != newValue) {
       $this.val(newValue);
       $this.addClass("alert");  // add class
       var x = 5;
       setTimeout(function () {
         $this.removeClass("alert");  // remove class after x seconds
       }, x * 1000);
    }
});​ 
```

**[演示](http://jsfiddle.net/vXMtG/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:43:53.473

`replace()`是原生 JavaScript，而不是 jQuery。您可以先测试表达式并查看是否需要替换，然后触发该类：

```
var reg = /[^\d-]/g;

$("#v_phone").bind('keyup blur',function() { 
    var $this = $(this);
    if( reg.test(this.value) ) {
        $this.addClass('highlight');
        setTimeout(function() {
            $this.removeClass('highlight');
        },1000); // 1s
        $this.val( this.value.replace(reg,'') );
    }
}); 
```

[http://jsfiddle.net/HvGnf/](http://jsfiddle.net/HvGnf/)

# sql-server - 在大数据集中查找给定查找日期的最后一个已知事件

> ID：12160476
> 
> 赞同：1
> 
> 时间：2012-08-28T13:37:24.767
> 
> 标签：sql-server, postgresql, database-design

我有一个特定的设计问题一直困扰着我很长一段时间。我有一个大型实时 GPS 位置日志表，其中包含数千个资产的点条目。每项资产每天有数百个积分进入数据库。我有一个索引 IX(asset asc,EventTime asc) 来加快目标资产的点查询。我有一个 LastKnownLocation 表，用于将每个资产与其最近的点相关联。这只为我提供了当前最后一次已知的查找。我的问题是，在给定多个资产的特定查找日期的情况下，有没有人知道一种有效的方法可以查询位置日志表中的最后一个已知位置？“问：2012 年 7 月 1 日结束时我的所有资产都在哪里”

顺便说一句，由于每个资产都使用自己的内部单调事件时间戳报告其点，因此与每个资产相关的表的 LocationLog.LocationLogID auto inc 主键存在隐含的单调关系。这就是我可以使用 MAX Aggregate 的原因。

```
SELECT MAX(LocationLog.LocationLogID) FROM LocationLog 
WHERE LocationLog.fk_AssetID IN 
(
    //LIST OF required assets for report
) 
AND LocationLog.EventTime <= '2012/07/01 23:59:59'
GROUP BY LocationLog.fk_AssetID 
```

问题是数据库索引 IX 可以快速访问单个资产的所有点。然后这些点按索引中的事件时间排序，因此 dbengine 可能会在索引中的事件时间内进行数据扫描，以查找日期为 <= 查找日期的最大 LocationLogID。自资产在查找日期之前报告以来的时间越长，查找匹配项的扫描时间就越长。

由于我的位置日志有 90+ 百万行，并且像这样增长 1000 个资产查询需要 50 秒。

查找给定查找日期的最后一个已知事件必须是一个众所周知的设计模式，但是它避开了我的搜索。

PS：运行 MSSQL2000，但迁移到 Postgres

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:06:41.600

它可能有助于消除**IN(...)**。

尝试类似的东西

```
--
--  index on AssetID, EventTime desc
--
select
      AssetID
    , LocationID
    , EventTime
from LocationLog as a
join (
        select AssetID_1
        union
        select AssetID_2
        union
        select AssetID_3
        -- etc, list of assets needed in report
      ) as b on b.AssetID = a.AssetID
where a.EventTime = (select max(xx.EventTime) 
                       from LocationLog as xx 
                      where xx.AssetID = a.AssetID
                        and xx.EventTime <= '2012-08-28 12:05:00')
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:50:10.450

Two things come to mind:

*   Maintain a materialized view on your locations, storing the end-of-day location for each asset for each day; or
*   Partition, partition, partition! If you only have, say, a week's data in each partition such searches will be much cheaper.

I'd probably create a `end_of_day_location` table and instead of just clearing my `last_known_location` table at the end of each day I'd `INSERT` its contents into `end_of_day_location` first.

# jquery - jQuery AJAX - 做事成功或完成回调？

> ID：12160482
> 
> 赞同：3
> 
> 时间：2012-08-28T13:37:46.237
> 
> 标签：jquery

我有一个关于 jQuery 的 AJAX 函数的快速问题。

我执行 ajax 调用的方式如下：

```
$.ajax({
    type: "GET",
    url: "/wordpress/wp-admin/admin-ajax.php",
    dataType: 'html',
    data: ({ action: 'loadHomePage'}),
    beforeSend: function() {
        document.getElementById('loading').style.visibility = 'visible';
    },
    complete: function(){
        FB.Canvas.setAutoGrow(false);
        FB.Canvas.setSize({height:600});
        setTimeout(function(){
            FB.Canvas.setAutoGrow(true);
        }, 100);
    },
    success: function(data){
        data = $.trim(data);
        $('#ajax-content').hide().empty().fadeIn('slow').html(data);
        FB.Canvas.scrollTo(0,0);                
    }
}); 
```

问题是，在这种特殊情况下，它是一个使用 ajax 进行页面导航的 facebook iframe 内的完整网站，在页面之间导航时，它似乎会多次淡化内容，所以我想知道这里的最佳做法是什么部分淡出 - 它应该进入完整部分吗？

我最初完成了调整大小的工作，但移动了它，我认为它有所作为，但不确定它是否是安慰剂效应....

如果是这样，我是否通过执行以下操作来实现它：

```
complete: function(data){
    // fade in etc 
```

其次，如果在源代码的排序中完成在成功之前，是否可以这样做，或者顺序很重要，例如成功*然后*完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:47:10.950

'complete' 触发并在 'success' 和 'error' （无论哪个适合您的请求）之后请求周期结束，其时间与您在源代码中声明它的位置无关。

完整的函数不接收 'data' 参数，因此如果您的操作依赖于数据，那么它不会在那里工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T13:44:27.787

`complete`在`success`or`error`回调被执行后执行。

所以你会得到那些可能的链条

`success`-->`complete`

`error`-->`complete`

您可能只想处理成功的呼叫。

# php - 使用php从xml文件中提取数据

> ID：12160484
> 
> 赞同：0
> 
> 时间：2012-08-28T13:37:50.377
> 
> 标签：php, xml, xpath

我知道以前有人问过这个问题，并且我已经尝试了一些建议，但我没有从 XML 文件中获取信息。我需要从 xml 文件中获取卖家数量（OfferListingCount 条件="Any"）。这是 XML：

```
 <?xml version="1.0"?>
<GetCompetitivePricingForASINResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<GetCompetitivePricingForASINResult ASIN="0312479743" status="Success">
<Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
<Identifiers>
  <MarketplaceASIN>
    <MarketplaceId>ATVPDKIKX0DER</MarketplaceId>
    <ASIN>0312479743</ASIN>
  </MarketplaceASIN>
</Identifiers>
<CompetitivePricing>
  <CompetitivePrices>
    <CompetitivePrice belongsToRequester="false" condition="Used" subcondition="Good">
      <CompetitivePriceId>2</CompetitivePriceId>
      <Price>
        <LandedPrice>
          <CurrencyCode>USD</CurrencyCode>
          <Amount>36.23</Amount>
        </LandedPrice>
        <ListingPrice>
          <CurrencyCode>USD</CurrencyCode>
          <Amount>36.23</Amount>
        </ListingPrice>
        <Shipping>
          <CurrencyCode>USD</CurrencyCode>
          <Amount>0.00</Amount>
        </Shipping>
      </Price>
    </CompetitivePrice>
  </CompetitivePrices>
  <NumberOfOfferListings>
    <OfferListingCount condition="Any">34</OfferListingCount>
    <OfferListingCount condition="Used">29</OfferListingCount>
    <OfferListingCount condition="New">5</OfferListingCount>
  </NumberOfOfferListings> 
```

这是我的 PHP 更新代码：

```
 $priceComp_xml = amazonCompPrice_xml($asin);
$compPricing = $priceComp_xml->xpath('/OfferListingCount[@condition="Any"]'); 
```

$priceComp_xml 从 xml 文件返回信息，我正在尝试使用下一行来获取我需要的信息。当我运行代码时，得到一个空数组。我如何获得这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:42:39.913

[http://php.net/manual/en/function.simplexml-load-file.php](http://php.net/manual/en/function.simplexml-load-file.php)

```
$xml = simplexml_load_file($xml_file);

        $output = array();
        foreach ($xml as $row => $item_data)
        {
            // Attributes
            $attributes =  $item_data->attributes(); 
```

加载它，获取属性。

# android - 根据选择的字符串显示图像？

> ID：12160488
> 
> 赞同：0
> 
> 时间：2012-08-28T13:38:05.057
> 
> 标签：android, arrays, string, image, random

我现在有一个代码仪式，它只从一个数组中生成一个随机的饮料组合，我需要做的是为每个选择分配一个不同的图像并让它显示该图像。这是我的随机饮料代码：

```
 if(Vodka.equals(true)){
                final TextView text2 = (TextView) findViewById(R.id.display2);
                randomIndex = random.nextInt(array_city.Vodka.length);
                text2.setText(array_city.Vodka[randomIndex]);
            } 
```

假设这段代码吐出“Smirnof”然后我显示瓶子的图片，它吐出“Sky”然后变成那个瓶子的图片。如果不为每个选项制作一个 if 语句，我将如何做到这一点，我的数组很长，而且我只是希望有一个更简单的方法来做很多 if 语句？感谢任何人的帮助！非常感谢我已经坚持了一段时间。

==================================================== ==============@Joan

这是我尝试使用您的代码汇总的内容：

```
 //Run option Vodka
            if(Vodka.equals(true)){
                final TextView text2 = (TextView) findViewById(R.id.display2);
                randomIndex = random.nextInt(array_city.Vodka.length);
                text2.setText(array_city.Vodka[randomIndex]);

                final ImageView image = (ImageView) findViewById(R.id.imageView1);
                int Cimage = getResources().getIdentifier(array_city.Vodka[randomIndex], null, "com.famousmods.what.should.i.drink");
                image.setImageResource(Cimage);
            } 
```

这是我的数组的样子（一个较小的例子）：

```
 public static final String[] Vodka = {"Absolut Vodka","Finlandia","Ketel One","Polmos Krakow","Skyy","smirnoff vodka",
    "Stolichnaya","Fleischmann's","Gilbey's","Gordon's","Wolfschmitt","Five-O-Clock"}; 
```

我已将文件“smirnoff_vodka.png”作为示例放入我的 res/drawables 中，但它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:46:38.447

您可以`getResources().getIdentifier("image_name", null, "your_application_package");`在上下文中使用来检索图像 ID。然后你可以像使用`R.id.image_name`.

编辑：它需要是“可绘制的”而不是 null。见下文。

# objective-c - 将 Photoshop 动作转换为 iOS 应用图像过滤器？

> ID：12160492
> 
> 赞同：-2
> 
> 时间：2012-08-28T13:38:25.727
> 
> 标签：objective-c, ios, cocoa-touch

我们正在使用 iOS 相机应用程序，我们有一个关于将 Photoshop 操作过滤器转换为 iOS 图像过滤器的问题。

例子：把一个photoshop动作文件变成iPhone应用程序中的图像过滤器，有什么办法吗？

任何问题或帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:51:20.990

Photoshop 动作滤镜和 iOS 图像滤镜之间没有关系。唯一可以做到的方法是使用 iOS API 自己实现大部分 Photoshop 图像处理代码。

# python - 从 Python 中的函数返回函数

> ID：12160493
> 
> 赞同：1
> 
> 时间：2012-08-28T13:38:28.543
> 
> 标签：python, shutil

我是 Python 的新手，我对下面提到的来自 shutil 模块的代码片段的工作有一些疑问。

```
def ignore_patterns(*patterns):
    """Function that can be used as copytree() ignore parameter.

    Patterns is a sequence of glob-style patterns
    that are used to exclude files"""
    def _ignore_patterns(path, names):
        ignored_names = []
        for pattern in patterns:
            ignored_names.extend(fnmatch.filter(names, pattern))
        return set(ignored_names)
    return _ignore_patterns 
```

当调用选项设置为 时`shutil.copytree`，它会调用函数并返回一个函数。我的疑问是：`ignore``ignore_patterns``ignore_patterns`

1)`ignore_patterns`调用时将返回`_ignore_pattern`函数引用。现在当这个函数将被调用时，它如何仍然访问“模式”列表？一旦被调用的函数“ignore_patterns”返回，在其调用中创建的列表模式应该仅可用于其被调用范围。

`_ignore_patterns`2）返回的函数函数名中下划线的意义是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:43:26.367

这称为[*闭包*](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)，它是允许嵌套函数的语言的一般特性。内部函数可以*关闭*外部作用域中的变量，并在从外部函数外部调用它们时保留对该名称的引用。

下划线只是表示这`_ignore_patterns`是一个内部函数，同时保持返回函数的名称相似。它可以被称为任何你喜欢的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:44:35.813

*   *`ignore_patterns`调用时将返回`_ignore_pattern`函数引用。现在，当这个函数将被调用时，它仍然是如何访问“模式”列表的。*

    这可以。 `_ignore_pattern`是一个闭包。这意味着它保留了完成工作所需的所有局部变量（包括函数参数）。最终垃圾收集器会得到它，但在可能仍然需要它的时候不会。

*   *`_ignore_patterns`返回函数函数名中下划线的意义是什么？*

    作者只是想消除名称的歧义。它胜过调用闭包`f`。这就是我会做的。

# wcf - 自托管 WCF 未运行工厂（CustomHostServiceFactory）？

> ID：12160495
> 
> 赞同：1
> 
> 时间：2012-08-28T13:38:37.517
> 
> 标签：wcf, iis, factory, self-hosting, service-factory

我有一个可以放在 IIS7 和 selfhost 中的 WCF 服务。SVC 文件如下所示：

```
<%@ ServiceHost Language="C#" Debug="False" Service="MyApp.ServiceImplementation.MyAppClientService" Factory="MyApp.ServiceImplementation.CustomHostServiceFactory"%> 
```

问题是如果服务是自托管的，则不会运行 CustomHostServiceFactory？有没有办法让它工作？

从 IIS7 运行时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:58:47.620

使用 selfhost 时，我将不得不手动运行初始化代码。

# python - str 对象不可调用 python

> ID：12160498
> 
> 赞同：1
> 
> 时间：2012-08-28T13:38:39.753
> 
> 标签：python, string, python-3.x

我试图四处寻找答案，但是这里的问题似乎很高级（我是 Python 新手），或者是因为重新定义了我在脚本中无法捕捉到的含义。这是代码-

```
a = float(input("Enter the length(in inches)"))
b = float(input("Enter the width(in inches)"))
print ()
print ("The area of your shape is: "(a*b)) 
```

我收到错误*TypeError: 'str' object is not callable*。

这是一个简单的脚本，我知道，但它正在进行中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T13:40:17.850

假设您使用的是 Python 3，

```
print ("The area of your shape is: ", (a*b))
#                                   ^ 
```

你忘了一个逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:41:51.333

您可以使用以下方式打印值：

```
print ("The area of your shape is: ", (a*b)) 
```

或与

```
print ("The area of your shape is: {}".format(a*b)) 
```

# transactions - 自治事务范围和错误引发

> ID：12160503
> 
> 赞同：6
> 
> 时间：2012-08-28T13:38:44.630
> 
> 标签：transactions, plsql, oracle10g

我有点怀疑。让我们假设这个包的过程：

```
PROCEDURE ERR_MANAGER(I_ERRM IN VARCHAR2) IS
BEGIN
    ROLLBACK;
    --DO SOME STUFF
END ERR_MANAGER;

PROCEDURE test IS 
    PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN

    test2;
    COMMIT;
EXCEPTION WHEN OTHERS THEN ERR_MANAGER(SQLERRM);
END test;

PROCEDURE test2 IS
BEGIN

    --DO SOME TRANSACTIONNAL DML

    RAISE_APPLICATION_ERROR(-20001, 'ERR'); --for the test purpose, in reality this could be any actual error

END test2; 
```

因此，如您所见， 中存在错误`test2()`，该错误将上升到`test()`，然后在`err_manager()`方法中进行处理。

所以我有两个问题：

1.  err_manager() 的范围是什么？是否还在自治事务内？我想是的，因为它只是一个函数调用，但我想确定
2.  如果由于错误提升到更高级别而残酷地退出自治事务，而不进行任何类型的提交或回滚，会发生什么？

非常感谢你。S。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T14:03:39.540

1.  程序执行的事务范围`err_manager`是调用自治事务，你是对的。

    过程和函数继承它们的调用事务，除非它们本身是自治事务。

2.  当自治事务引发未处理的错误时，它会回滚其更改并将错误传播到调用应用程序。这是一个测试：

    ```
    SQL> CREATE TABLE t (id number);

    Table created.

    SQL> DECLARE
      2     l NUMBER;
      3     PROCEDURE p IS
      4        pragma autonomous_transaction;
      5     BEGIN
      6        insert into t values (1);
      7        raise_application_error(-20001, 'rollback?');
      8     END;
      9  BEGIN
     10     p;
     11  EXCEPTION
     12     WHEN OTHERS THEN
     13        DBMS_OUTPUT.put_line('error catched:' || sqlcode);
     14        SELECT COUNT(*) INTO l FROM t;
     15        DBMS_OUTPUT.put_line('lines in t: ' || l);
     16  END;
     17  /
    error catched:-20001
    lines in t: 0

    PL/SQL procedure successfully completed. 
    ```

# java - 当我们使用 renameTo() 2 次失败时，为什么？

> ID：12160505
> 
> 赞同：0
> 
> 时间：2012-08-28T13:38:56.730
> 
> 标签：java, windows, file, rename

我正在使用Win7。我第一次使用java重命名文件（file.cmptr to file.sql）来做一些事情，之后我想用他的旧名字重命名它（file.cmptr）

但这失败了，当我重命名文件时，有时无法重命名。它随机发生。

- 有时第一个文件根本没有改变，我没有得到操作

- 有时它更改为 .sql 文件，我得到了操作，但文件保持 .sql

在我的例子中：

*   我第一次更改扩展名：

    ```
    int dotIndex = filechose.getPath().lastIndexOf('.');
    String newpath = filechose.getPath().substring(0, dotIndex);;
    newpath = newpath + ".sql";
    File filefinal = new File(newpath); 
    filechose.renameTo(filefinal);
    String path=newpath; 
    ```

在我对新文件进行操作之后：

```
Runtime.getRuntime().exec("cmd /c mysql -u root gestiondestock <"+'"'+path+'"'); 
```

最后我试图再次重命名文件

```
File file1 = new File(path);
int dotIndex1 = path.lastIndexOf('.');
String newpath1 = path.substring(0, dotIndex1);
newpath1 = newpath1 + ".computeramg";
File file2 = new File(newpath1); 
file1.renameTo(file2); 
```

* * *

解决了。
它适用于等待我只改变这个：

```
 Process p = Runtime.getRuntime().exec("cmd /c mysql -u root gestiondestock <"+'"'+path+'"');

                 p.waitFor(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:47:37.513

我怀疑您正在尝试重命名文件，而它正在使用。

您可以在 mysql 进程上使用 waitFor，也可以将重命名 using 添加`REN`到正在执行的脚本中。也就是说，它会在完成后重命名文件。

# mysql - MySQL - sql server：一致性检查

> ID：12160509
> 
> 赞同：1
> 
> 时间：2012-08-28T13:39:09.827
> 
> 标签：mysql, sql-server, data-consistency

我正在尝试检查两个数据库之间数据加载的结果。不幸的是，我只能直接访问一个数据库（MySQL），管理 MSSQL 的公司可以通过 API 向我们公开它。

我想做的是检查行集中某些列的一致性。最初，我希望能够对列运行 CRC 或哈希检查，但似乎没有兼容的方式来执行此操作。

例如，我们可以对 MySQL 中的列运行 CRC32，但在 MSSQL 上没有可靠的方法来做同样的事情。或者，在 MSSQL 上有 CHECKSUM_AGG，但在 MySQL 上没有其他选择。

最终结果是，如果校验和不同以识别需要更改的行，我想进行二进制搜索。

目前没有批量加载接口，SSIS 不可用（MSSQL 服务器不属于我的公司）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-06T16:53:01.873

我想我会回到这个并描述我们最终实施的解决方案。这是脖子上的一大痛！

首先，由于我们服务器上的 MySQL 和远程服务器上的 MSSQL 的固定版本，没有通用的编码方法。MSSQL API 以 UTF-16LE 返回数据，MySQL 数据库将 Unicode 数据存储在 Latin-1 表*中*

首先，我们连接我们正在比较的字段，然后我们对结果进行 MD5 处理。为了使 MySQL 结果与 MSSQL HASHBYTES 函数的输出相匹配，我们必须这样做：

```
SELECT ABS(CONV(CONCAT(
    IF(MID(MD5(CONC), -8 , 1) >= "8", "FFFFFFFF", ""),
    RIGHT(MD5(CONC), 8)
), 16, -10 )) AS CALC 
```

其中 CONC 是连接我们感兴趣的字段的子选择的结果。

在 MSSQL 服务器上，我们必须执行以下查询：

```
SELECT ABS(CONVERT(INT,HASHBYTES('MD5',
    CONVERT(NVARCHAR(4000), FIELD1 ) + 
    CONVERT(NVARCHAR(4000), FIELD2 ) + ... 
```

[然后，根据中国剩余定理](http://en.wikipedia.org/wiki/Chinese_remainder_theorem)，我们对整个范围内的 MD5 求和，以三个大素数 (311,313,317) 为模

这为我们检查的范围提供了三个数字。我们可以合理地确定，如果所有三个数字都匹配每个服务器上的给定范围，那么数据是一致的。

我将为您省去将拉丁语 1 中的 Unicode 音译为 UTF-16LE 所必须进行的处理的详细信息

# xml - XSL 不工作

> ID：12160515
> 
> 赞同：1
> 
> 时间：2012-08-28T13:39:38.707
> 
> 标签：xml, google-chrome, xslt

我遇到了这个奇怪的问题。XSL 不适用于 xml。这是我的 xml 和 xsl 代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xsl-stylesheet type= "text/xsl" href= "w3c.xsl"?>
<catalog>
    <cd>
        <title>Greatest Hits</title>
        <artist>Dolly Parton</artist>
        <country>USA</country>
        <company>RCA</company>
        <price>9.90</price>
        <year>1982</year>
    </cd>
    <cd>
        <title>Eros</title>
        <artist>Eros Ramazzotti</artist>
        <country>EU</country>
        <company>BMG</company>
        <price>9.90</price>
        <year>1997</year>
    </cd>
    <cd>
        <title>Romanza</title>
        <artist>Andrea Bocelli</artist>
        <country>EU</country>
        <company>Polydor</company>
        <price>10.80</price>
        <year>1996</year>
    </cd>
</catalog> 
```

这是我的 xsl：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html xmlns="http://www.w3.org/1999/xhtml">
  <body>
  <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <xsl:for-each select="catalog/cd">
      <tr>
        <td><xsl:value-of select="title"/></td>
        <td><xsl:value-of select="artist"/></td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

笔记：

我从 W3C 获取了这段代码，因此它是一个有效的代码。我用谷歌搜索了很多，但找不到任何有效的解决方案。我使用了 ie，firefox 和 chrome 在其中任何一个中都不起作用。我已经在我的远程服务器也不起作用。我得到的错误是“此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。”。发生同样的错误。在 href 我已经尝试了所有从完整路径到文件名的可能链接。我也尝试过使用 --allow-file-access-from-files 的 chrome 但不起作用。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:42:14.610

请注意，您的 XML 文件的第二行显示：

```
<?xsl-stylesheet type= "text/xsl" href= "w3c.xls"?> 
```

注意 w3c.xls （而不是 xsl ？）你的文件名是什么？请注意，是`xml-stylesheet`，不是`xsl-stylesheet`。

所以应该这样做：

```
<?xml-stylesheet type= "text/xsl" href= "w3c.xsl"?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:55:01.130

**我无法重现此问题**。

当提供的 XSLT 样式表：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html xmlns="http://www.w3.org/1999/xhtml">
  <body>
  <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <xsl:for-each select="catalog/cd">
      <tr>
        <td><xsl:value-of select="title"/></td>
        <td><xsl:value-of select="artist"/></td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档（使用我可用的所有 9 个不同的 XSLT 处理器）：**

```
<catalog>
    <cd>
        <title>Greatest Hits</title>
        <artist>Dolly Parton</artist>
        <country>USA</country>
        <company>RCA</company>
        <price>9.90</price>
        <year>1982</year>
    </cd>
    <cd>
        <title>Eros</title>
        <artist>Eros Ramazzotti</artist>
        <country>EU</country>
        <company>BMG</company>
        <price>9.90</price>
        <year>1997</year>
    </cd>
    <cd>
        <title>Romanza</title>
        <artist>Andrea Bocelli</artist>
        <country>EU</country>
        <company>Polydor</company>
        <price>10.80</price>
        <year>1996</year>
    </cd>
</catalog> 
```

**产生正确的结果**：

```
<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
    <body>
        <h2>My CD Collection</h2>
        <table border="1">
            <tr bgcolor="#9acd32">
                <th>Title</th>
                <th>Artist</th>
            </tr>
            <tr>
                <td>Greatest Hits</td>
                <td>Dolly Parton</td>
            </tr>
            <tr>
                <td>Eros</td>
                <td>Eros Ramazzotti</td>
            </tr>
            <tr>
                <td>Romanza</td>
                <td>Andrea Bocelli</td>
            </tr>
        </table>
    </body>
</html> 
```

# eclipse - 首次设置 Stat-ET Sweave

> ID：12160518
> 
> 赞同：1
> 
> 时间：2012-08-28T13:39:53.903
> 
> 标签：eclipse, r, sweave, statet

我一直在关注[Sweave 入门](http://www.r-bloggers.com/getting-started-with-sweave-r-latex-eclipse-statet-texlipse/ "开始使用 Sweave")指南，并创建了一个名为 MISC 的新项目文件夹，其中包含一个名为 Sweave 的子文件夹。

我已将示例 .Rnw 文件与 Sweave.sty 文件的副本放在此文件夹中。然后我将我的 R 工作目录更改为 MISC\Sweave。Sweave 确实可以毫无问题地创建 TEX 文件，但随后抱怨：

**项目中未设置项目输出文件格式**

我已经检查了项目属性，但我无法确定应该在哪里设置它。有任何想法吗？

PS：这是否意味着我必须为我想要 Sweave 的每一个项目进行设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:40:26.073

由于您的 .tex 文件位于项目文件夹中的文件夹中，因此您必须将目录/文件夹名称添加到您指定的 .tex 和 .pdf 文件名中。

1.  在`Project Properties > Latex Project Properties`您的“MISC”项目文件夹下，第一个文本框 Main TeX File 应该类似于“/Sweave/myfile.tex”，其中“myfile.tex”是您的 Sweave 文档的名称，扩展名为 .tex。
2.  目录路径也应该添加到第二个文本框中的输出文件的名称中：ex '/Sweave/myfile.pdf'。

要回答你的 PS，如果每个项目都在一个单独的项目文件夹中，你必须为每个项目设置这个，因为你必须指定单个主 .tex 和输出文件。

# php - 如何从表单集合中过滤掉空值？

> ID：12160523
> 
> 赞同：0
> 
> 时间：2012-08-28T13:40:19.493
> 
> 标签：php, zend-framework2

我创建了以下在表单集合元素中使用的字段集。用户可以在表单中添加任意数量的 URL 别名。它运作良好，但我遇到了几个问题。

```
<?php

....

class AliasFieldset extends Fieldset implements InputFilterProviderInterface {
    public function __construct()
    {
        parent::__construct('aliasList');

        $this->setObject(new PathEntity());
        $this->setName('Aliases');

        $this->add(array(
            'name' => 'urn',
            'type' => 'Zend\Form\Element\Text'
        ));
    }

    public function getInputFilterSpecification()
    {
        return array(
            'urn' => array(
                'requried' => false,
                'validators' => array(
                    array(
                        'name' => 'Uri',
                    )
                )
            )
        );
    }
} 
```

我似乎无法让 Uri 验证器允许空值。理想情况下，我想事先过滤掉任何空字符串项目，但在我看来，过滤器过滤了值并且不适合过滤掉项目本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:31:27.767

您应该将“requried”的拼写更改为“required”。

# asp.net - Linux 上的 ASP.NET 环境

> ID：12160530
> 
> 赞同：0
> 
> 时间：2012-08-28T13:40:34.827
> 
> 标签：asp.net, visual-studio-2010

> **可能重复：**
> [在 Linux 机器上安装 Visual Studio](https://stackoverflow.com/questions/9732158/installation-of-visual-studio-on-linux-machine)

我通常使用 python/php 等，但现在我的教授要求我使用 Visual Studio 2010。坏消息是，我没有 Windows 操作系统，所以 - 是否有任何选项可以**启动 Visual Studio 2010并在 Debian/Ubuntu 上运行**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:43:02.407

您无法在 Linux 上运行 Visual Studio。您可以运行[Mono Develop](http://monodevelop.com/)并在其中创建 ASP.NET 项目。它工作得很好。

其他选择。安装[Virtual Box](https://www.virtualbox.org/)，安装 Windows，然后 VS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:43:38.043

最好的选择是使用虚拟机——来宾将运行 Windows。检查[DreamSpark](https://www.dreamspark.com/) - 如果您的学校参与，您可能能够免费获得 Windows Server 2008 R2（和其他软件）。

如果您查看 Wine，[Visual Studio 2010 和 2012 表现不佳](http://appdb.winehq.org/objectManager.php?sClass=application&iId=892)，因此此时这不是一个真正的选择。

[mono 项目](http://go-mono.org)有一个免费的C# IDE - [Mono Develop](http://monodevelop.com/)，虽然它不是 Visual Studio，但它的功能非常齐全并支持 ASP.NET 开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:46:34.353

如果你想使用 Visual Studio，你必须安装 WINE（但不要认为这是一个好的解决方案）

[http://appdb.winehq.org/objectManager.php?sClass=application&iId=892](http://appdb.winehq.org/objectManager.php?sClass=application&iId=892)

但你也可以使用 Mono Project

[http://www.mono-project.com/Main_Page](http://www.mono-project.com/Main_Page)

或者只是安装一个带有 Windows 操作系统的虚拟机

您可以自由选择最适合您的需求

# mysql - 获取所有列的最常见值

> ID：12160532
> 
> 赞同：2
> 
> 时间：2012-08-28T13:40:52.140
> 
> 标签：mysql

我想获取 mySQL 表中所有列的最常见值。

```
[id]  [UserID]            [UserID2]
1     johnnietheblack     marywhite
2     johnnietheblack     marywhite
3     dannyrottenegg      dannyrottenegg     
4     marywhite           marywhite
5     marywhite           johnnietheblack     
6     johnnietheblack     marywhite 
```

这是我想要的输出：

```
[id]  [UserID]            [Count]
    1     johnnietheblack     4
    2     dannyrottenegg      2
    3     marywhite           6 
```

我可以使用以下内容来获取一列的常用值。但是我怎样才能得到**所有列**的共同值呢？

```
SELECT COUNT(*) AS `Rows`, UserID
FROM table-name
GROUP BY UserID
ORDER BY `Rows` DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:13:41.853

```
SELECT UserID, COUNT(*) FROM
(SELECT UserID FROM tablename
 UNION ALL
 SELECT UserID2 FROM tablename) t
GROUP BY UserID 
```

我没有包含该`id`列，因为它似乎与值不相关。

如果要查看每个名称的所有 id，可以使用 GROUP_CONCAT：

```
SELECT GROUP_CONCAT(id), UserID, COUNT(*) FROM
(SELECT id, UserID FROM tablename
 UNION ALL
 SELECT id, UserID2 FROM tablename) t
GROUP BY UserID 
```

# jquery - jquery 验证器 - 名称属性和嵌套标签

> ID：12160533
> 
> 赞同：1
> 
> 时间：2012-08-28T13:40:52.820
> 
> 标签：jquery, validation, jquery-validate

我的页面中有这个表格：

```
<form:form id="addUnitForm" method="POST" modelAttribute="questionUnit">
    <fieldset>
        <label for="questionText">Question</label> <input type="text"
            id="questionText" class="required" value="${questionContent[0] }" /><br/>
       Answers
        <c:forEach var="i" begin="1" end="${questionContentSize-1 < 0 ? 0 : questionContentSize-1 }">
            <div id="answerRow">
                <input type="text" id="questionAnswer" name="questionAnswer${i }" class="required" value="${questionContent[i] }"/>
                <input type="checkbox" id="questionAnswerCheckbox" ${answerContent.contains(questionContent[i]) ? 'checked="checked"' : ''}/> 
                <input type="button" id="removeAnswer" value="x" />
            </div>
        </c:forEach>
    </fieldset>
    <input type="submit" value="OK" />
    <input type="button" value="Add answer" id="Add_answer" />
</form:form> 
```

现在，当我有相同的表单，但没有名称属性（只有 id）并且每个`input`元素都有相同的`id`属性值并且没有`name`属性时，当我提交表单时，只有带有`questionText`id 的字段得到验证，其余的没有得到验证。

现在，我为表单中的每个`input`with添加了唯一的名称，一切正常，所以这是我的 3 个问题：`id``questionAnswer`

1.  `questionText`怎么样，即使没有`name`属性，jquery 验证器也已验证
2.  是`name`jquery 验证器内部使用的属性来决定应该验证哪些元素？
3.  为什么，当我有超过一行的`questionAnswer`输入时，无论我将哪一行留空，第一行附近都会出现错误消息？

编辑：这是来自浏览器的表单代码

```
 <fieldset>
    <label for="questionText">Question</label> <input type="text" value="" class="required valid" id="questionText"><br>
   Answers

<div id="answerRow">
  <input type="text" class="required valid" id="questionAnswer" name="questionAnswer0">
  <input type="checkbox" id="questionAnswerCheckbox">
  <input type="button" value="x" id="removeAnswer" class="ui-button ui-widget ui-state-default ui-corner-all" role="button" aria-disabled="false">
</div>
<div id="answerRow">
  <input type="text" class="required valid" id="questionAnswer" name="questionAnswer1">
  <input type="checkbox" id="questionAnswerCheckbox">
  <input type="button" value="x" id="removeAnswer" class="ui-button ui-widget ui-state-default ui-corner-all" role="button" aria-disabled="false">
  </div>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:44:45.697

> 1.如果没有名称属性，即使没有名称属性，jquery 验证器也会验证 questionText

因为元素上有类`required`，jQuery validate 会选择它。

> 2.jquery验证器内部使用name属性来决定应该验证哪些元素？

是的。

> 3.为什么，当我有超过一行的 questionAnswer 输入时，无论我将哪一行留空，第一行附近都会出现错误消息？

因为 jQuery validate 不能原生处理多个同名元素（尽管可能有一个插件验证器来处理这个问题），所以它总是假设错误来自文档中具有指定名称的第一个元素，所以把错误放在那里。

# windows - 在 Windows Server 2003 上自动启动程序需要 30 秒

> ID：12160535
> 
> 赞同：0
> 
> 时间：2012-08-28T13:40:58.473
> 
> 标签：windows

我安装了 Windows Server 2003 虚拟机（KVM，VM 规格 1x 3.8GHz 和 1.5GB RAM），我希望它在登录后立即自动启动 .NET Framework 3.5 应用程序。

不幸的是，在桌面可见后，我的应用程序启动大约需要 30 秒。如果我手动启动不同的应用程序（例如 notepad.exe），它会立即启动。或者，如果我等待 30 秒并手动启动我的应用程序，它也会立即启动。

自动启动应用程序是否存在某种默认延迟，或者是否还有其他我可能不知道的因素？为了自动启动应用程序，我只需在开始菜单的**All Programs / AutoStart目录中放置一个快捷方式。**

任何帮助将不胜感激。谢谢阅读。

**编辑 1：**我的进程的 CPU 使用率在前 30 秒内保持在 0%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:46:42.130

我在 XP 上看到过类似的行为，而且它往往是需要网络连接的应用程序。出于某种原因，在启动时设置 LAN 连接可能需要一段时间。

您的应用程序是否使用 NIC？如果是这样，我可能不会坐在那里等待网络启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:47:28.667

您的编辑确认您的进程实际上正在运行。所以自动启动应用程序没有延迟：您的应用程序正在运行。它只是在前 30 秒内没有做任何事情。

调试您的应用程序，看看为什么它在 30 秒内没有执行任何操作。

我的精神力量告诉我，您的应用程序正在与延迟启动的服务进行通信。所以它必须等待服务完成初始化，这需要 30 秒。

# android - Android：为 CalendarView 注册/创建 ContextMenu

> ID：12160536
> 
> 赞同：3
> 
> 时间：2012-08-28T13:41:01.653
> 
> 标签：android, android-calendar

您如何在日历视图上使用上下文菜单，因为当我为上下文注册 CalendarView 时，我必须长按整个视图，我只想长按日期而不是整个视图并显示上下文菜单。

我将如何在日历视图上注册上下文菜单？

# mysql - 在 SQL 中比较两个数据集

> ID：12160537
> 
> 赞同：0
> 
> 时间：2012-08-28T13:41:02.763
> 
> 标签：mysql, sql

我希望尽可能使用 SQL 比较两组数据。请考虑以下数据结构：

```
tbl_users:
+---------+----------+
| user_id |   avatar |
+---------+----------+
|    1    | test.jpg |
|    2    | 1234.jpg |
+---------+----------+

tbl_shortlists:
+------+--------+
|  id  |  owner |
+------+--------+
|   1  |    1   |
|   2  |    2   |
+------+--------+

tbl_shortlist_items:
+---------+--------------+
| item_id | shortlist_id |
+---------+--------------+
|    1    |       1      |
|    2    |       1      |
|    3    |       1      |
|    1    |       2      |
|    2    |       2      |
+---------+--------------+ 
```

我希望选择`tbl_users`. `user_id`和`tbl_users`。`avatar`其中任何用户拥有的候选名单包含两个或多个与`item_id`当前所有者相同的内容。因此，假设我正在使用上述数据结构查找 user_id 1。由于 ID 的 Shortlist 与`shortlist_id`1 共享两个项目（即用户 1 的候选名单），我想返回`user_id`= 2 和`avatar`= 1234.jpg。

我不知道如何在纯 SQL 中做到这一点。我在想也许可以使用`IN()`，但我不知道这是否可行。

这是一些伪代码，希望能更好地解释我想要的内容：

为包含两个或多个 item_id 的每个候选列表选择 user_id 和头像，这些 item_id 位于 user_id = 1 拥有的候选列表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:02:00.097

与 SQL 一样，它有助于将其分解为小部分。即您需要的第一件事是当前用户拥有的短列表中的所有项目：

```
SELECT  Item_ID
FROM    tbl_ShortList_Items
        INNER JOIN tbl_ShortLists
            ON tbl_ShortLists.ID = tbl_ShortList_Items.ShortList_ID
WHERE   Owner = 1 -- CURRENT USER 
```

接下来，您需要所有具有相同项目的短列表的用户。出于解释的目的，我将建立一个`IN`语句，但 INNER JOIN 可能会执行得更好。

```
SELECT  Owner
FROM    tbl_ShortList_Items
        INNER JOIN tbl_ShortLists
            ON tbl_ShortLists.ID = tbl_ShortList_Items.ShortList_ID
WHERE   Item_ID IN 
        -- RESULTS FROM LAST QUERY START
        (   SELECT  Item_ID
            FROM    tbl_ShortList_Items
                    INNER JOIN tbl_ShortLists
                        ON tbl_ShortLists.ID = tbl_ShortList_Items.ShortList_ID
            WHERE   Owner = 1 -- CURRENT USER
        )   
        -- RESULTS FROM LAST QUERY END
AND     Owner != 1 -- CURRENT USER 
```

然后，您需要通过添加一个`GROUP BY`和`HAVING`

```
SELECT  Owner
FROM    tbl_ShortList_Items
        INNER JOIN tbl_ShortLists
            ON tbl_ShortLists.ID = tbl_ShortList_Items.ShortList_ID
WHERE   Item_ID IN 
        -- RESULTS FROM LAST QUERY START
        (   SELECT  Item_ID
            FROM    tbl_ShortList_Items
                    INNER JOIN tbl_ShortLists
                        ON tbl_ShortLists.ID = tbl_ShortList_Items.ShortList_ID
            WHERE   Owner = 1 -- CURRENT USER
        )   
        -- RESULTS FROM LAST QUERY END
AND     Owner != 1 -- CURRENT USER
GROUP BY Owner
HAVING  COUNT(DISTINCT tbl_ShortList_Items.Item_ID) > 1 
```

然后你需要使用`tbl_users`来获取这些所有者的头像

```
SELECT  User_ID, Avatar
FROM    tbl_Users
WHERE   User_ID IN 
        -- RESULTS FROM LAST QUERY START
        (   SELECT  Owner
            FROM    tbl_ShortList_Items
                    INNER JOIN tbl_ShortLists
                        ON tbl_ShortLists.ID = tbl_ShortList_Items.ShortList_ID
            WHERE   Item_ID IN 
                    (   SELECT  Item_ID
                        FROM    tbl_ShortList_Items
                                INNER JOIN tbl_ShortLists
                                    ON tbl_ShortLists.ID = tbl_ShortList_Items.ShortList_ID
                        WHERE   Owner = 1 -- CURRENT USER
                    )
            AND     Owner != 1 -- CURRENT USER
            GROUP BY Owner
            HAVING  COUNT(DISTINCT tbl_ShortList_Items.Item_ID) > 1
        )
        -- RESULTS FROM LAST QUERY END 
```

正如我所说，我认为将其重新排列为 JOIN 会得到更好的优化，但还没有测试过这个理论。

```
SELECT  User_ID, Avatar
FROM    tbl_Users
        INNER JOIN
        (   SELECT  Owner
            FROM    tbl_ShortList_Items
                    INNER JOIN tbl_ShortLists
                        ON tbl_ShortLists.ID = tbl_ShortList_Items.ShortList_ID
                    INNER JOIN
                    (   SELECT  Item_ID
                        FROM    tbl_ShortList_Items
                                INNER JOIN tbl_ShortLists
                                    ON tbl_ShortLists.ID = tbl_ShortList_Items.ShortList_ID
                        WHERE   Owner = 1 -- CURRENT USER
                    ) CurrentUserItems
                        ON CurrentUserItems.Item_ID = tbl_ShortList_Items.Item_ID
            WHERE   Owner != 1
            GROUP BY Owner
            HAVING  COUNT(DISTINCT tbl_ShortList_Items.Item_ID) > 1
        ) MatchUsers
            ON MatchUsers.Owner = tbl_Users.User_ID 
```

# excel - ADO.NET 如何读取锁定的 Excel 文件？

> ID：12160538
> 
> 赞同：0
> 
> 时间：2012-08-28T13:41:04.647
> 
> 标签：excel, ado.net

ADO.NET 在从 excel 文件中读取表格数据时工作正常，但我经常遇到的一个问题是，如果 excel 文件被其他用户锁定，当 ADO.NET 尝试检索数据时会出现异常。

是否可以告诉 ADO.NET 从 excel 文件中读取内容，即使它已被锁定？如果是这样，怎么办？我需要在连接字符串中添加一些东西吗？我的连接字符串的扩展属性是：

```
Excel 12.0;HDR=YES;IMEX=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:59:38.187

我有类似的问题，我找不到解决方案。我以计时器重新尝试连接到文件结束了它。

问题出在数据库本身。归根结底，它只是一个平面文件，ADO 需要独占访问它。您可能需要将解决方案迁移到 MS Access mdb 文件或适当的（ish）数据库（SQLite？）

# java - 带有抽象类的 Java 日志记录

> ID：12160540
> 
> 赞同：72
> 
> 时间：2012-08-28T13:41:07.810
> 
> 标签：java, inheritance, logging, abstract-class

我正在做一个项目，目前正在使用 log4j 实现一些日志记录，我很好奇我应该如何实现日志。我正在讨论的两个实现如下：

**第一个选项**

对该类和所有子类使用超类中的单个日志：

```
public abstract class AbstractFoo {
    protected static Log LOG = LogFactory.getLog(AbstractFoo.class);

    ...
}

public class Foo extends AbstractFoo {
    public void someMethod() {
        LOG.info("Using abstract log");
    }
} 
```

**第二种选择**

为每个类、超级类和子类使用单独的日志：

```
public abstract class AbstractFoo {
    private static Log LOG = LogFactory.getLog(AbstractFoo.class);

    ...
}

public class Foo extends AbstractFoo {
    private static Log LOG = LogFactory.getLog(Foo.class);        

    public void someMethod() {
        LOG.info("Using own log");
    }
} 
```

什么更有意义，为什么？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-08-28T13:44:49.947

我也不会。相反，我会让它在两种情况下都使用正确的类。

```
public abstract class AbstractFoo {
    protected final Log log = LogFactory.getLog(getClass());

    ...
}

public class Foo extends AbstractFoo {
    public void someMethod() {
        log.info("Using abstract log");
    }
} 
```

如果您没有进行大量日志记录（无论如何这是一个好主意），您可以使用一种方法。

```
public abstract class AbstractFoo {
    protected Log log() { return LogFactory.getLog(getClass()); }

    ...
} 
```

如果有一个类经常调用它，你可以覆盖它来给你一个缓存的实例。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-08T08:20:25.990

这是我的解决方案（最终静态记录器）：

```
public abstract class AbstractFoo {
     protected abstract Log getLogger();
     public doSomething() {
          getLogger().info("log something");
     }
}

public class Foo extends AbstractFoo {
    private static final Log log = Log.getLogger(Foo.class);

    protected Log getLogger() {
         return log;
    }
    public doSomethingElse() {
          log.info("log somethingElse");
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-28T13:48:58.413

两者都有道理。这取决于您的应用程序。

我认为更常用的做法是为每个班级设置私人记录器。这允许您为每个类和每个包配置日志记录。请记住，它`AbstractFoo`可能`Foo`属于不同的包，并且您可能只想查看来自的日志`Foo`。

此外，如果您想写`protected`字段，请务必三思而后行。这不是完全禁止的，而是众所周知的不良做法。它使您的代码可读性降低并且难以维护。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-28T05:05:31.977

同样可以通过使用构造函数来实现。***在基***类级别添加记录器，并使用 super()从每个***派生类中设置它。***有代码：

```
public abstract class AbstractFoo {

    protected Log log;  // base abstract class has a Log object.

    public AbstractFoo(Log logger) {   // parameterized constructor for logger, to be used by the derived class.
        this.log = logger;
    }

    public doSomething() {        // common method for all the derived classes.
      log.info("log something");
    }
    // rest of business logic.
}

public class Foo extends AbstractFoo {

    public Foo(){
        super(LogFactory.getLog(AbstractFoo.class));
    }

    public void someMethod() {
        log.info("Using own log");     // this uses its own logger.
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T13:51:01.453

如果您在抽象类中创建记录器，则所有日志都将标记为源自 AbstractFoo。如果您希望/需要查看带有发生日志的子类标记的日志，请为子类创建记录器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-20T19:56:57.490

在抽象类中有一个 Logger 有两个原因（我能想到）：

1.  **在抽象类的方法中使用记录器，同时仍将具体**类作为调用者注销。
2.  所有具体类之间的统一日志记录或通用日志记录。

如果您更喜欢静态记录器（这也是我的首选），那么[n1cr4m](https://stackoverflow.com/users/1240575/n1cr4m)的答案很好地解决了 #1 和 #2。

但是，如果您对 #2 更感兴趣并且不喜欢每个具体类都需要实现的事实，`getLogger()`那么您可以执行以下操作。例如，我将使用转换器：

```
public abstract class AbstractConverter{

   protected void logError(Logger logger, String someId, String msg){
       logger.error("Error during conversion of unit \""+ someId + "\": " + msg); 
   }

} 
```

记录器可以是来自具体类的静态记录器。现在，无论何时登录，您都将统一打印前缀，这也强制识别它转换的对象。

此解决方案的缺点是，如果`AbstractConverter`需要在其方法之一中使用记录器自己，它将无法使用具体类中的记录器，除非您也将其设为参数，我非常不鼓励这样做。如果您需要这种功能，请使用[n1cr4m](https://stackoverflow.com/users/1240575/n1cr4m)的解决方案。

# web-applications - 使用什么技术（编程语言）来创建 Web 应用程序以通过客户端的串行端口（com 端口）收集数据

> ID：12160553
> 
> 赞同：-1
> 
> 时间：2012-08-28T13:41:46.580
> 
> 标签：web-applications, browser, serial-port, barcode-scanner

我需要开发一个可以通过客户端串行端口收集数据的 Web 应用程序（服务器端）。该应用程序将使用常规 Windows 个人电脑、智能手机、ipad（平板电脑）等上的浏览器运行/执行。客户端将使用蓝牙条形码扫描仪。我不知道哪种技术（编程语言）或多种技术最适合用来解决这个问题......请给我一些想法。目前我不知道我将使用什么服务器和数据库（用于收集数据），这取决于开发技术。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:45:47.870

编辑

我误读了这个问题。客户端串口通信不能用asp.net写。请参阅下面的评论。

===原始答案

我在一个基于 asp.net (C#) 的 Web 应用程序上工作，该应用程序使用用 c# 编写的串行端口通信代码。这篇文章对我们开始很有帮助。

[http://www.codeproject.com/Articles/8605/Serial-Communication-using-C-and-Whidbey](http://www.codeproject.com/Articles/8605/Serial-Communication-using-C-and-Whidbey)

祝你好运。

# python - 在两个线程之间传递值

> ID：12160554
> 
> 赞同：1
> 
> 时间：2012-08-28T13:41:48.607
> 
> 标签：python, multithreading, inheritance

我有两个线程，两个线程都进行一组计算并获得结果。问题在于，线程的计算在某一点上都需要在另一点上获得的结果。我想到了继承，但只能将值从一个线程传递到另一个线程。如何在不使用全局变量的情况下在两个线程之间传递值？

我想做这样的事情。

```
class first(threading.Thread):
    def __init__(self, flag, second):
    ##rest of the class first##

class second(threading.Thread):
    def __init__(self, flag, first):
    ##rest of the class second##

def main():
    flag=threading.Condition()
    First=first(flag,Second)
    First.start()
    Second=second(flag,First)
    Second.start() 
```

执行上述操作时出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:50:45.230

您可以使用[Queue 模块](http://docs.python.org/library/queue.html)：给每个线程一个`Queue.Queue`对象。然后每个线程都可以进行计算，将结果放入另一个线程的队列中，然后在自己的队列上监听，直到另一个线程的结果到达。

确保先发布结果，然后等待另一个线程的结果，否则您的线程将最终死锁。

# cordova - PhoneGap(Cordova)2.0 iOS 上的 filetransfer.download + reader.readAsText 从不工作

> ID：12160568
> 
> 赞同：1
> 
> 时间：2012-08-28T13:42:34.723
> 
> 标签：cordova

filetransfer.download 似乎工作正常，但 reader.readAsText 永远不会适用于下载的 HTML 文件。我的环境是 Cordova2.0 iOS。

1.  filetransfer.download 适用于任何远程文件。我可以看到在我的 iOS 设备上使用 i-funbox 文件浏览器。

2.  reader.readAsText 适用于其他现有文件。

3.  但是，reader.readAsText 永远不会适用于通过 filetransfer.download API 下载的文件。

怎么会这样？？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T01:47:39.647

经过一段时间的努力，我广泛使用 jQuery.load() + $(selector).html() 函数来处理远程 html/文本文件，而不是 filetransfer.download + reader.readAsText，它工作正常。

# jquery-ui - 如何将折叠效果与 jQuery.remove() 结合起来

> ID：12160569
> 
> 赞同：1
> 
> 时间：2012-08-28T13:42:36.773
> 
> 标签：jquery-ui

我希望我的 div 先折叠然后从 DOM 中删除。我试过这个，但不是先折叠然后移除，而是立即消失

```
$("#backgroundPopup").effect("fold", {

    size: "50%"

}, 1000).remove(); //end of effect() 
```

如果我只是使用

```
$("#backgroundPopup").effect("fold", {

    size: "50%"

}, 1000); 
```

然后它折叠但我的 div 仍然驻留在 DOM 中。我可以将两者结合起来吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:45:34.440

您想对元素使用`effect`' 回调。`remove`

```
$("#backgroundPopup").effect("fold", {
    size: "50%"
}, 1000, function(){
    $(this).remove();  // this will run after the effect is finished
}); 
```

# parent - 如何winzip文件夹排除父文件夹？

> ID：12160572
> 
> 赞同：0
> 
> 时间：2012-08-28T13:42:48.460
> 
> 标签：parent, directory, winzip

我正在使用此命令对文件夹进行压缩，但压缩包中包含“bldforge_AOMS_DEV\WebSphere_AVOB”。winzip32.exe -min -a -r -p C:\Build\AOM.zip m:\bldforge_AOMS_DEV\WebSphere_AVOB*

如何在没有“bldforge_AOMS_DEV\WebSphere_AVOB”的情况下创建 zip，只有 bldforge_AOMS_DEV\WebSphere_AVOB\ 下的所有文件？

谢谢吉荣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:45:35.470

我不是专家，我认为这可能会解决您的问题

```
winzip32.exe -min -a -r -p C:\Build\AOM.zip m:\bldforge_AOMS_DEV\WebSphere_AVOB\* 
```

只需在 * 选择器之前添加一个斜杠

# java - 如何将自定义 SSL 证书验证添加到 osmdroid 的 MapTileDownloader？

> ID：12160577
> 
> 赞同：3
> 
> 时间：2012-08-28T13:42:59.577
> 
> 标签：java, android, ssl, osmdroid

我正在尝试从内部 SSL 服务器加载地图图块。Android 系统无法识别 SSL 证书的信任根。

> W/o*.o*.t*.m*.MapTileDow*(2837)：IOException 下载 MapTile：/8/37/4： **javax.net.ssl.SSLPeerUnverifiedException**：没有对等证书

我已经熟悉这个问题，并[根据这个优秀的 SO 答案](https://stackoverflow.com/a/6378872/1282574)在应用程序的其余部分解决了它。本质上，我扩展了我自己的`SSLSocketFactory`，并`X509TrustManager`从与应用程序捆绑的 .bks 文件中加载了我的 SSL 证书的信任根。为了创建安全连接，我调用`((HttpsURLConnection) connection).setSSLSocketFactory(mySSLSocketFactory)`并使用我的类和我的信任根来验证证书。

我的问题是如何为 osmdroid 做同样的事情？我正在创建自己的`XYTileSource`地图块的 URL、文件扩展名、大小等。我看到 osmdroid 创建了连接以在`MapTileDownloader`. 我可以编写自己的替换类，以同样的方式解决 SSL 问题，但是我如何告诉 osmdroid 使用我的自定义下载器而不是默认的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:59:23.747

事实证明，由于构造函数，这在不改变 osmdroid 源的情况下是可能的`public MapView(Context context, int tileSizePixels, ResourceProxy resourceProxy, MapTileProviderBase aTileProvider)`。

假设您已经有一个像**`MySSLSocketFactory`**(which `extends javax.net.ssl.SSLSocketFactory`) 这样的自定义类，基本过程如下所示：

1.  创建一个插入式替换类，`MapTileDownloader`以使用**`MySSLSocketFactory`**. 让我们称之为**`MyTileDownloader`**.

2.  `MapTileProviderBasic`为实例化您的自定义创建一个插入式替换类`MyTileDownloader`。让我们称之为**`MyTileProvider`**.

3.  将您的 tile 源实例化为`new XYTileSource`（无需编写自定义类）。

4.  **`MyTileProvider`**使用您的图块源实例进行实例化。

5.  `MapVew`使用您的 tile 提供程序实例进行实例化。

* * *

**`MySSLSocketFactory`**留给读者作为练习。看到[这个帖子](https://stackoverflow.com/a/6378872/1282574)。

* * *

**`MyTileDownloader`**看起来像这样：

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.UnknownHostException;

import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLSocketFactory;

import org.osmdroid.tileprovider.MapTile;
import org.osmdroid.tileprovider.MapTileRequestState;
import org.osmdroid.tileprovider.modules.IFilesystemCache;
import org.osmdroid.tileprovider.modules.INetworkAvailablityCheck;
import org.osmdroid.tileprovider.modules.MapTileDownloader;
import org.osmdroid.tileprovider.modules.MapTileModuleProviderBase;
import org.osmdroid.tileprovider.tilesource.BitmapTileSourceBase.LowMemoryException;
import org.osmdroid.tileprovider.tilesource.ITileSource;
import org.osmdroid.tileprovider.tilesource.OnlineTileSourceBase;
import org.osmdroid.tileprovider.util.StreamUtils;

import android.graphics.drawable.Drawable;
import android.text.TextUtils;
import android.util.Log;

/**
 * A drop-in replacement for {@link MapTileDownloader}. This loads tiles from an
 * HTTP or HTTPS server, making use of a custom {@link SSLSocketFactory} for SSL
 * peer verification.
 */
public class MyTileDownloader extends MapTileModuleProviderBase {
    private static final String TAG = "MyMapTileDownloader";

    protected OnlineTileSourceBase mTileSource;
    protected final IFilesystemCache mFilesystemCache;
    protected final INetworkAvailablityCheck mNetworkAvailablityCheck;
    protected final SSLSocketFactory mSSLSocketFactory;

    public MyTileDownloader(ITileSource pTileSource,
            IFilesystemCache pFilesystemCache,
            INetworkAvailablityCheck pNetworkAvailablityCheck,
            SSLSocketFactory pSSLSocketFactory) {
        super(4, TILE_DOWNLOAD_MAXIMUM_QUEUE_SIZE);
        setTileSource(pTileSource);
        mFilesystemCache = pFilesystemCache;
        mNetworkAvailablityCheck = pNetworkAvailablityCheck;
        mSSLSocketFactory = pSSLSocketFactory;
    }

    public ITileSource getTileSource() {
        return mTileSource;
    }

    @Override
    public void setTileSource(final ITileSource tileSource) {
        // We are only interested in OnlineTileSourceBase tile sources
        if (tileSource instanceof OnlineTileSourceBase)
            mTileSource = (OnlineTileSourceBase) tileSource;
        else
            mTileSource = null;
    }

    @Override
    public boolean getUsesDataConnection() {
        return true;
    }

    @Override
    protected String getName() {
        return "Online Tile Download Provider";
    }

    @Override
    protected String getThreadGroupName() {
        return "downloader";
    }

    @Override
    public int getMinimumZoomLevel() {
        return (mTileSource != null ? mTileSource.getMinimumZoomLevel()
                : MINIMUM_ZOOMLEVEL);
    }

    @Override
    public int getMaximumZoomLevel() {
        return (mTileSource != null ? mTileSource.getMaximumZoomLevel()
                : MAXIMUM_ZOOMLEVEL);
    }

    @Override
    protected Runnable getTileLoader() {
        return new TileLoader();
    };

    private class TileLoader extends MapTileModuleProviderBase.TileLoader {
        @Override
        public Drawable loadTile(final MapTileRequestState aState)
                throws CantContinueException {
            if (mTileSource == null)
                return null;

            InputStream in = null;
            OutputStream out = null;
            final MapTile tile = aState.getMapTile();

            try {
                if (mNetworkAvailablityCheck != null
                        && !mNetworkAvailablityCheck.getNetworkAvailable()) {
                    if (DEBUGMODE)
                        Log.d(TAG, "Skipping " + getName()
                                + " due to NetworkAvailabliltyCheck.");
                    return null;
                }

                final String tileURLString = mTileSource.getTileURLString(tile);
                if (DEBUGMODE)
                    Log.d(TAG, "Downloading Maptile from url: " + tileURLString);

                if (TextUtils.isEmpty(tileURLString))
                    return null;

                // Create an HttpURLConnection to download the tile
                URL url = new URL(tileURLString);
                HttpURLConnection connection = (HttpURLConnection) url
                        .openConnection();
                connection.setConnectTimeout(30000);
                connection.setReadTimeout(30000);

                // Use our custom SSLSocketFactory for secure connections
                if ("https".equalsIgnoreCase(url.getProtocol()))
                    ((HttpsURLConnection) connection)
                            .setSSLSocketFactory(mSSLSocketFactory);

                // Open the input stream
                in = new BufferedInputStream(connection.getInputStream(),
                        StreamUtils.IO_BUFFER_SIZE);

                // Check to see if we got success
                if (connection.getResponseCode() != 200) {
                    Log.w(TAG, "Problem downloading MapTile: " + tile
                            + " HTTP response: " + connection.getHeaderField(0));
                    return null;
                }

                // Read the tile into an in-memory byte array
                final ByteArrayOutputStream dataStream = new ByteArrayOutputStream();
                out = new BufferedOutputStream(dataStream,
                        StreamUtils.IO_BUFFER_SIZE);
                StreamUtils.copy(in, out);
                out.flush();
                final byte[] data = dataStream.toByteArray();
                final ByteArrayInputStream byteStream = new ByteArrayInputStream(
                        data);

                // Save the data to the filesystem cache
                if (mFilesystemCache != null) {
                    mFilesystemCache.saveFile(mTileSource, tile, byteStream);
                    byteStream.reset();
                }
                final Drawable result = mTileSource.getDrawable(byteStream);
                return result;

            } catch (final UnknownHostException e) {
                Log.w(TAG, "UnknownHostException downloading MapTile: " + tile
                        + " : " + e);
                throw new CantContinueException(e);

            } catch (final LowMemoryException e) {
                Log.w(TAG, "LowMemoryException downloading MapTile: " + tile
                        + " : " + e);
                throw new CantContinueException(e);

            } catch (final FileNotFoundException e) {
                Log.w(TAG, "Tile not found: " + tile + " : " + e);

            } catch (final IOException e) {
                Log.w(TAG, "IOException downloading MapTile: " + tile + " : "
                        + e);

            } catch (final Throwable e) {
                Log.e(TAG, "Error downloading MapTile: " + tile, e);

            } finally {
                StreamUtils.closeStream(in);
                StreamUtils.closeStream(out);
            }
            return null;
        }

        @Override
        protected void tileLoaded(final MapTileRequestState pState,
                final Drawable pDrawable) {
            // Don't return the tile Drawable because we'll wait for the fs
            // provider to ask for it. This prevent flickering when a load
            // of delayed downloads complete for tiles that we might not
            // even be interested in any more.
            super.tileLoaded(pState, null);
        }
    }
} 
```

* * *

**`MyTileProvider`**看起来像这样。

请注意，您需要一种方法来访问**`MySSLSocketFactory`**此类内部的实例。这留给读者作为练习。我这样做是使用`app.getSSLSocketFactory()`，其中`app`是自定义类的一个实例`extends Application`，但您的里程可能会有所不同。

```
import javax.net.ssl.SSLSocketFactory;

import org.osmdroid.tileprovider.IMapTileProviderCallback;
import org.osmdroid.tileprovider.IRegisterReceiver;
import org.osmdroid.tileprovider.MapTileProviderArray;
import org.osmdroid.tileprovider.MapTileProviderBasic;
import org.osmdroid.tileprovider.modules.INetworkAvailablityCheck;
import org.osmdroid.tileprovider.modules.MapTileFileArchiveProvider;
import org.osmdroid.tileprovider.modules.MapTileFilesystemProvider;
import org.osmdroid.tileprovider.modules.NetworkAvailabliltyCheck;
import org.osmdroid.tileprovider.modules.TileWriter;
import org.osmdroid.tileprovider.tilesource.ITileSource;
import org.osmdroid.tileprovider.util.SimpleRegisterReceiver;

import android.content.Context;

/**
 * A drop-in replacement for {@link MapTileProviderBasic}. This top-level tile
 * provider implements a basic tile request chain which includes a
 * {@link MapTileFilesystemProvider} (a file-system cache), a
 * {@link MapTileFileArchiveProvider} (archive provider), and a
 * {@link MyTileDownloader} (downloads map tiles via tile source).
 */
public class MyTileProvider extends MapTileProviderArray implements
        IMapTileProviderCallback {
    public MyTileProvider(final Context pContext, final ITileSource pTileSource) {
        this(new SimpleRegisterReceiver(pContext),
                new NetworkAvailabliltyCheck(pContext), pTileSource, app
                        .getSSLSocketFactory());
    }

    protected MyTileProvider(final IRegisterReceiver pRegisterReceiver,
            final INetworkAvailablityCheck aNetworkAvailablityCheck,
            final ITileSource pTileSource,
            final SSLSocketFactory pSSLSocketFactory) {
        super(pTileSource, pRegisterReceiver);

        // Look for raw tiles on the file system
        final MapTileFilesystemProvider fileSystemProvider = new MapTileFilesystemProvider(
                pRegisterReceiver, pTileSource);
        mTileProviderList.add(fileSystemProvider);

        // Look for tile archives on the file system
        final MapTileFileArchiveProvider archiveProvider = new MapTileFileArchiveProvider(
                pRegisterReceiver, pTileSource);
        mTileProviderList.add(archiveProvider);

        // Look for raw tiles on the Internet
        final TileWriter tileWriter = new TileWriter();
        final MyTileDownloader downloaderProvider = new MyTileDownloader(
                pTileSource, tileWriter, aNetworkAvailablityCheck,
                pSSLSocketFactory);
        mTileProviderList.add(downloaderProvider);
    }
} 
```

* * *

最后，实例化看起来像这样：

```
XYTileSource tileSource = new XYTileSource("MapQuest", null, 3, 8, 256, ".jpg",
    "https://10.0.0.1/path/to/your/map/tiles/");
MapTileProviderBase tileProvider = new MyTileProvider(context, tileSource);
ResourceProxy resourceProxy = new DefaultResourceProxyImpl(context);
MapView mapView = new MapView(context, 256, resourceProxy, tileProvider); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T02:37:56.547

我不使用 osmdroid，但除非它具有替换下载器类的公共接口，否则最好的办法是获取源并对其进行修补以使其可配置或使用您自己的下载器类。如果`MapTileDownloader`实现了某个接口，您可能会在运行时做一些反射巫术来替换它，但这可能会产生未知的副作用。

# android - Android的选项卡式可分页ActionBar主导航上的哪个子导航模式？

> ID：12160579
> 
> 赞同：3
> 
> 时间：2012-08-28T13:43:01.663
> 
> 标签：android, android-layout

你们中是否有人知道 Android 中的子导航模式，它使用带有分页片段的选项卡式 ActionBar 导航作为其主导航？（查看页面）

我已经查看了 ActionBar 中的 Spinners，如果在从一个选项卡滑动到下一个选项卡时不需要很长时间就可以在 ActionBar 中呈现子菜单，那么它可以很好地工作。（最后你有看起来很丑陋的跳跃动作项目）

另一种方法将包括从 iOS 平台已知的分段控件小部件。（就像 TED 应用程序现在有它一样）

但是 Android 的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:36:20.253

为什么你不能尝试不同标签的菜单？我不知道它是否有帮助。Surf google 为每个标签创建菜单。

# objective-c - 如何在 iOS 中制作图像生成器

> ID：12160580
> 
> 赞同：-4
> 
> 时间：2012-08-28T13:43:03.160
> 
> 标签：objective-c, ios, cocoa-touch

我想制作一个图像生成器，但我唯一能在任何地方找到的是一个随机的，但我需要它们是一个特定的顺序。

这是我所拥有的，但我不希望图像按随机顺序排列：

.h 文件

```
@interface ViewController :UIViewController {
    IBOutlet UIImageView *imageview;
    IBOutlet UIImageView *imageview2;
}

-(IBAction)randomimagebutton;

-(IBAction)randomimagebutton2;

@end 
```

.m 文件

```
-(IBAction)randomimagebutton {

int randomimages = rand() % 8;

switch (randomimages) {
    case 0:            
        imageview.image = [UIImage imageNamed:@"eye right wihte.png"];
        break;

    case 1:
        imageview.image = [UIImage imageNamed:@"eye right red.png"];
        break;

    case 2:
        imageview.image = [UIImage imageNamed:@"eye right pink.png"];
        break;

    case 3:
        imageview.image = [UIImage imageNamed:@"eye right light blue.png"];
        break;

    case 4:
        imageview.image = [UIImage imageNamed:@"eye right dark blue.png"];
        break;

    case 5:
        imageview.image = [UIImage imageNamed:@"eye right light green.png"];
        break;

    case 6:
        imageview.image = [UIImage imageNamed:@"eye right dark green.png"];
        break;

    case 7:
        imageview.image = [UIImage imageNamed:@"eye right orange.png"];
        break;

    case 8:
        imageview.image = [UIImage imageNamed:@"eye right yellow.png"];
        break;

    default:
        break;

}

}

-(IBAction)randomimagebutton2 {

int randomimages = rand() % 8;

switch (randomimages) {
    case 0:
        imageview2.image = [UIImage imageNamed:@"eye left white.png"];
        break;

    case 1:
        imageview2.image = [UIImage imageNamed:@"eye left red.png"];
        break;

    case 2:
        imageview2.image = [UIImage imageNamed:@"eye left pink.png"];
        break;

    case 3:
        imageview2.image = [UIImage imageNamed:@"eye left light blue.png"];
        break;

    case 4:
        imageview2.image = [UIImage imageNamed:@"eye left dark blue.png"];
        break;

    case 5:
        imageview2.image = [UIImage imageNamed:@"eye left light green.png"];
        break;

    case 6:
        imageview2.image = [UIImage imageNamed:@"eye left dark green.png"];
        break;

    case 7:
        imageview2.image = [UIImage imageNamed:@"eye left orange.png"];
        break;

    case 8:
        imageview2.image = [UIImage imageNamed:@"eye left yellow.png"];
        break;

    default:
        break;

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:44:41.063

好吧，不要使用 ，而是使用`int randomimages`每次`NSNumber`获取图像时递增的 an 。使`NSNumber`类的属性。

**更新：**

像这样添加属性：

```
@interface ViewController :UIViewController {
    IBOutlet UIImageView *imageview;
    IBOutlet UIImageView *imageview2;
}

-(IBAction)randomimagebutton;
-(IBAction)randomimagebutton2;

@property (nonatomic, retain) NSNumber *index;

@end 
```

不要忘记`@synthesize`你.m。

在 .m 文件中，执行以下操作：

```
- (IBAction)randomimagebutton {

    index = [NSNumber numberWithInt:(([index intValue] + 1) % 8)];

    switch ([index intValue]) {

        ... 
```

# .htaccess - 将 slug 重定向为非文件的参数

> ID：12160582
> 
> 赞同：1
> 
> 时间：2012-08-28T13:43:06.120
> 
> 标签：.htaccess

我有`/s/30ec3629`想重定向到的 url `/s/somefile.php?s=30ec3629`。

在同一目录中还有其他文件，如果给定请求存在文件，我不希望它重定向（即我不希望`/u/some_img.gif`重定向到`/u/somefile.php?s=some_img.gif`）。此重定向应该只发生在`/s/`目录中。

`.htaccess`我需要什么重写规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T18:00:25.193

在 /s/ 目录中的 htaccess 文件中尝试此操作

```
RewriteEngine On
RewriteBase /s/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?$ somefile.php?s=$1 [L,QSA] 
```

# http-request - 带有 Google Chrome 框架的 Internet Explorer - 来自 Amazon CloudFront 的资源挂起 2 分钟

> ID：12160583
> 
> 赞同：3
> 
> 时间：2012-08-28T13:43:11.007
> 
> 标签：http-request, connection-timeout, google-chrome-frame

我网站的 CSS 和 JS 资源托管在 Amazon 的 CloudFront CDN 上。站点本身及其资源通过 HTTPS 访问。

在安装了 Google 的 Chrome Frame 插件的 Internet Explorer 8 中浏览该站点时，该站点的加载时间正好是两分钟。

刷新页面时会发生这种情况（按 F5 或单击刷新按钮）。**但是，如果我通过在地址栏中输入 URL 来“手动”导航到站点**，或者只是突出显示 URL 并按 ENTER，页面会立即加载——我怀疑这只会导致页面重新呈现，并且不会触发重新加载。

与 Google Chrome Frame 捆绑的网络检查器显示大多数资源未修改 (304)，但其他资源（*我知道未修改，应该缓存*）随机等待 2 分钟，然后解析为304.

我怀疑 2 分钟是 Google Chrome Frame 的内部超时限制，当它达到该限制时，它会简单地丢弃资源并从缓存中加载。

以下是网络检查员的一些截图：http: [//imgur.com/a/tcI68](http://imgur.com/a/tcI68)

1.  初始加载，突出显示的资源需要 2 分钟才能解决。
2.  请求的标头。响应选项卡中还没有任何内容，因为资源尚未加载，并且处于挂起状态。
3.  2 分钟后，请求解析为未修改的 304。
4.  页面加载的结束状态。

这里有什么问题？我完全一无所知。

我应该注意，当我禁用缓存时，一切都运行顺利 - 当然除了浏览器在对站点的每个请求时加载所有资源的事实之外，这不是一个可行的解决方案。

# javascript - Http响应拆分安全问题的XMLHTTPRequest/Response案例的过滤器实现

> ID：12160587
> 
> 赞同：0
> 
> 时间：2012-08-28T13:43:27.997
> 
> 标签：javascript, xmlhttprequest, security, servlet-filters, java

我需要通过 XMLHTTPRequest/Response 处理 ajax 调用的 HTTP 响应拆分问题。我正在使用过滤器来过滤 servlet 请求和响应，并为包装器定义了内部类，其中方法被覆盖以检查是否存在 CR/LF 字符。现在我需要对 AJAX 请求做同样的事情。过滤器在 web.xml 中配置。因此可以跟踪每个请求和响应。此实现已完成并且工作正常。我需要对这个 AJAX 请求和响应有相同的实现。但是我找不到任何 java API 来实现相同的功能。任何人都可以对这个问题有任何建议或提示。欢迎任何实现示例。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:12:16.687

这段代码应该可以帮助你。你需要在你的`doFilter()`

```
response = (HttpServletResponse)resp;
StringWrapper responseWrapper = new StringWrapper(response);
chain.doFilter(request, responseWrapper);
String modifiedResponse = cleanUpBadChars(responseWrapper.toString());
PrintWriter out = response.getWriter();
out.write(modifiedResponse); 
```

cleanUpBadChars --> 这是一个用于清理所有坏字符或任何您不需要的字符的实用函数。

# sql-server - SQL Server 将 varchar 转换为 datetime 以选择日期范围

> ID：12160589
> 
> 赞同：0
> 
> 时间：2012-08-28T13:43:41.437
> 
> 标签：sql-server, datetime

我需要从 MSSQL 数据库中选择一个日期范围，但 s.ended 字段尚未设置为日期时间字段。它已设置为 varchar，存储日期的格式为 `d/m/Y`.

我已经尝试了以下是子句，但我收到以下错误消息。有谁知道我如何在不改变数据库设计的情况下解决这个问题？

Where 子句：

```
WHERE  
   (S.ended > CONVERT(DateTime, '28/07/2012 00:00:01', 103)) 
   AND (S.ended < CONVERT(DateTime, '28/08/2012 00:00:01', 103)) 
```

错误信息：

> *将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:20:49.933

试试这个：

```
WHERE  
   (CONVERT(DateTime, S.ended, 103) > CONVERT(DateTime, '28/07/2012 00:00:01', 103)) 
   AND (CONVERT(DateTime, S.ended, 103) < CONVERT(DateTime, '28/08/2012 00:00:01', 103)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:21:59.813

在与值进行比较之前，可能存在`S.ended`不正确的格式。`Datetime`

所以首先将该值转换为日期时间，然后进行比较。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T13:49:06.723

```
WHERE (S.ended > CONVERT(DateTime, '28/07/2012 00:00:01', 103)) AND (S.ended < CONVERT(DateTime, '28/08/2012 00:00:01', 103)) 
```

可能将日期更改为美式日期而不是“ **28/07/2012 00:00:01”**尝试“ **07/28/2012 00:00:01”**

# hadoop - 在 Hadoop 中接收流数据

> ID：12160590
> 
> 赞同：1
> 
> 时间：2012-08-28T13:43:42.973
> 
> 标签：hadoop, streaming, hadoop-streaming

我正在尝试测试 Hadoop 产品 HStreaming，它允许 Hadoop 处理连续的数据流。我访问了我的 twitter 流，而我的 mapreduce 程序没有从 twitter 接收任何流数据。但是相同的 twitter url 可以在浏览器或 wget 或 curl 实用程序中使用。只是想知道 - 是否需要任何配置才能使 MapReduce 程序访问 http（从防火墙）？

# scala - 在 Scala 中展平任意嵌套集合的通用、类型安全的方法？

> ID：12160596
> 
> 赞同：12
> 
> 时间：2012-08-28T13:44:03.247
> 
> 标签：scala, scala-collections

有时我会花一些时间玩 Scala，尽管我无法在我自己的工作中使用它（到目前为止），但它的混合功能对我很有吸引力。对于踢球，我决定以最通用的方式尝试前几个[99 Haskell 问题——对任何类型的适用集合进行操作并返回。](http://www.haskell.org/haskellwiki/99_questions/1_to_10)前几个问题并不太难，但我发现自己完全被`flatten`. 我只是不知道如何输入这样的东西。

具体来说我的问题：是否可以编写一个类型安全的函数来展平任意嵌套`SeqLike`的 s？所以说，

```
flatten(List(Array(List(1, 2, 3), List(4, 5, 6)), Array(List(7, 8, 9), List(10, 11, 12)))) 
```

会回来

```
List(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12): List[Int] 
```

? 请注意，这与 Haskell 和 Scala 问题集中的问题并不完全相同。我正在尝试编写一个函数，它不是扁平化异构列表，而是扁平化同质但嵌套的序列。

在网上搜索我找到了该问题的[Scala 翻译](http://aperiodic.net/phil/scala/s-99/p07.scala)，但它运行并返回 List[Any]。我是否正确，这需要某种类型的递归？还是我把它弄得比现在更难？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T00:07:54.970

The following works in Scala 2.10.0-M7\. You will need to add extra cases for `Array` support, and perhaps refine it to have more specific output collection types, but I guess it can all be done starting from here:

```
sealed trait InnerMost {
  implicit def innerSeq[A]: CanFlatten[Seq[A]] { type Elem = A } =
    new CanFlatten[Seq[A]] {
      type Elem = A
      def flatten(seq: Seq[A]): Seq[A] = seq
    }
}
object CanFlatten extends InnerMost {
  implicit def nestedSeq[A](implicit inner: CanFlatten[A]) 
  : CanFlatten[Seq[A]] { type Elem = inner.Elem } =
    new CanFlatten[Seq[A]] {
      type Elem = inner.Elem
      def flatten(seq: Seq[A]): Seq[inner.Elem] =
        seq.flatMap(a => inner.flatten(a))
    }
}
sealed trait CanFlatten[-A] {
  type Elem
  def flatten(seq: A): Seq[Elem]
}

implicit final class FlattenOp[A](val seq: A)(implicit val can: CanFlatten[A]) {
  def flattenAll: Seq[can.Elem] = can.flatten(seq)
}

// test        
assert(List(1, 2, 3).flattenAll == Seq(1, 2, 3))
assert(List(Seq(List(1, 2, 3), List(4, 5, 6)), Seq(List(7, 8, 9),
                List(10, 11, 12))).flattenAll == (1 to 12).toSeq) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T14:49:26.433

It seems like the right thing to do is just call `.flatten` the right number of times:

```
scala> val x = List(Array(List(1, 2, 3), List(4, 5, 6)), Array(List(7, 8, 9), List(10, 11, 12)))
x: List[Array[List[Int]]] = List(Array(List(1, 2, 3), List(4, 5, 6)), Array(List(7, 8, 9), List(10, 11, 12)))

scala> x.flatten.flatten
res0: List[Int] = List(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12) 
```

Since Scala is typed, you always know ahead of time how deep the nesting goes for the specific variable. Since you know this ahead of time, there's not much value in handling arbitrary structure as if you were unsure of how many times `.flatten` needed to be called.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T14:24:27.697

您面临着他们在 Haskell[解决方案](http://www.haskell.org/haskellwiki/99_questions/Solutions/7)中描述的相同问题：Scala 中没有异构`List`。幸运的是，您可以遵循与 Haskell 解决方案完全相同的路径。

定义一些可以嵌套的数据类型：

```
sealed trait NestedList[A]
case class Elem[A](a: A) extends NestedList[A]
case class AList[A](a: List[NestedList[A]]) extends NestedList[A] 
```

然后为该类型编写一个通用的 flatten 函数：

```
def flatten[A](l: NestedList[A]): List[A] = l match {
  case Elem(x) => List(x)
  case AList(x :: xs) => flatten(x) ::: flatten(AList(xs))
  case AList(Nil) => Nil
} 
```

甚至

```
def flatten[A](l: NestedList[A]): List[A] = l match {
  case Elem(x) => List(x)
  case AList(x) => x.flatMap(flatten)
} 
```

用法：

```
flatten(AList(Elem(1) :: Elem(2) :: AList(Elem(3) :: Nil) :: Nil)) 
```

Of course, we could also have added this as a method directly to the `NestedList` trait.

# cocos2d-iphone - Cocos 2d 瓦片地图。0,0 处的 Sprite 部分不在地图上？

> ID：12160598
> 
> 赞同：0
> 
> 时间：2012-08-28T13:44:13.037
> 
> 标签：cocos2d-iphone

我有一个基于 tiledmap 的应用程序，我正在努力让精灵在上面移动。但是，我在处理此问题时注意到了一些事情。如果我运行以下代码：

```
float x = 0.0f;
float y = 0.0f;
playerSprite.position = ccp(x,y); 
```

然后我的玩家实际上不在地图上：

![玩家离开地图](../Images/90705d8a0a7e8b85b637ab1c69ca1052.png)

我是否应该通过将我的角色定位在以下位置来弥补这一点：

```
playerSprite.position = ccp(x + playerSprite.boundingBox.size.width / 2,  y + playerSprite.boundingBox.size.height / 2) 
```

还是我的地图配置有问题？瓷砖不应该延伸到完整的 0,0 吗？

我的地图初始化如下：

```
// Setup our map
map = [CCTMXTiledMap tiledMapWithTMXFile: @"Map.tmx"];
NSAssert(nil != map, @"Map is nil");

[self addChild: map z: -1]; 
```

并且播放器被初始化宽度：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile: @"SpriteTest.plist"];
CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"SpriteTest.png"];
[self addChild: spriteSheet];

self.playerSprite = [CCSprite spriteWithSpriteFrameName: @"cyanWalkHorizontal1.png"];
[spriteSheet addChild: self.playerSprite];
self.playerSprite.position = ccp(0,0); 
```

所以，总的来说，我只是想知道我是否做错了初始化，我应该在定位它时考虑精灵的宽度/高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:31:26.020

[来自 cocos2d 文档：](http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_node.html#ac24fc742eb11ee96207052639224434c)

> anchorPoint 是所有转换和定位操作发生的点。它就像节点中的一个引脚，它被“附加”到其父节点。锚点是标准化的，就像一个百分比。(0,0) 表示左下角，(1,1) 表示右上角。但是您也可以使用高于 (1,1) 和低于 (0,0) 的值。默认锚点为 (0,0)。它从左下角开始。CCSprite 和其他子类有不同的默认锚点。

CCSprite 的默认锚点是 (0.5, 0.5) - 在精灵的中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:47:30.150

在游戏开发中，精灵[注册点](http://askville.amazon.com/Flash-registration-points/AnswerViewer.do?requestId=6721785)可能会有所不同。在这种情况下，注册点似乎设置为精灵的中心，因此您应该通过添加/删除一半的宽度和高度来进行补偿。

# sql - 通过重新排序表中所有记录的日期来更新字段

> ID：12160599
> 
> 赞同：4
> 
> 时间：2012-08-28T13:44:14.293
> 
> 标签：sql, sql-server, tsql

目前，我有这个记录

**发票清单表**

```
InvoiceID   StoreCustomerID IssuedDate Amount      IsPenalty   EmployeeID
----------- --------------- ---------- ----------- ----------- -----------
1           13              2007-01-12 244         0           41
2           31              2007-04-05 81          0           34
3           23              2007-01-09 184         0           46
4           28              2007-11-21 231         0           17
5           36              2006-09-19 121         0           22
6           28              2006-10-24 240         0           17
7           15              2006-12-11 193         0           47
8           21              2007-01-15 172         0           4 
```

`InvoiceID`是自动递增的。我想要做的是`IssuedDate`通过增加前一行的日期来更新。我想像这样更新它

```
InvoiceID   StoreCustomerID IssuedDate Amount      IsPenalty   EmployeeID
----------- --------------- ---------- ----------- ----------- -----------
1           13              2007-01-12 244         0           41
2           31              2007-01-13 81          0           34
3           23              2007-01-14 184         0           46
4           28              2007-01-15 231         0           17
5           36              2007-01-16 121         0           22
6           28              2007-01-17 240         0           17
7           15              2007-01-18 193         0           47
8           21              2007-01-19 172         0           4 
```

目前我有这个选择语句并且运行良好。但是我怎么能用它来更新`IssuedDate`呢？

```
WITH SequenceDate AS
(
    SELECT  *, ROW_NUMBER() OVER (ORDER BY IssuedDate) RowNumber
    FROM    Invoice
)
SELECT RowNumber, DATEADD(d, RowNumber - 1, b.IssuedDate)
FROM SequenceDate
ORDER BY RowNumber 
```

**更新 1**

我对第一篇文章感到非常抱歉，因为给我的指示不正确。日期不应增加，因为我们不允许更改表中的记录，除非我们只能按升序重新排列日期。所以它应该是。

```
InvoiceID   StoreCustomerID IssuedDate Amount      IsPenalty   EmployeeID
----------- --------------- ---------- ----------- ----------- -----------
1           13              2006-09-19 244         0           41
2           31              2006-10-24 81          0           34
3           23              2006-12-11 184         0           46
4           28              2007-01-09 231         0           17
5           36              2007-01-12 121         0           22
6           28              2007-01-15 240         0           17
7           15              2007-04-05 193         0           47
8           21              2007-11-21 172         0           4 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T14:11:42.397

如果您知道序列中的第一个日期，您可以简单地将 RowNumber 添加到它：

```
; WITH SequenceDate AS
(
    SELECT  *, 
            ROW_NUMBER() OVER (ORDER BY IssuedDate) RowNumber,
            MIN(IssuedDate) over () FirstDate
    FROM    Invoice
)
UPDATE SequenceDate
   SET IssuedDate = DATEADD(d, RowNumber - 1, FirstDate) 
```

[这是带有示例的 Sql Fiddle](http://sqlfiddle.com/#!3/dba13/2)。

**更新**：

[完全匹配第一个问题的输出](http://sqlfiddle.com/#!3/dba13/32)：

```
; WITH SequenceDate AS
(
    SELECT  *, 
            ROW_NUMBER() OVER (ORDER BY InvoiceID) RowNumber
    FROM    Invoice
)
UPDATE SequenceDate
   SET IssuedDate = DATEADD(d, RowNumber - 1, 
                           (select IssuedDate
                              from Invoice
                             where InvoiceID = 1)) 
```

[并重新安排日期以遵循 InvoiceID](http://sqlfiddle.com/#!3/dba13/34)：

```
; WITH SequenceDate AS
(
    SELECT  *, 
            ROW_NUMBER() OVER (ORDER BY InvoiceID) RowNumber,
            ROW_NUMBER() OVER (ORDER BY IssuedDate) DateNumber
    FROM    Invoice
)
UPDATE SequenceDate
   SET IssuedDate = d.IssuedDate
  from SequenceDate d
 where SequenceDate.RowNumber = d.DateNumber 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:15:10.760

首先你想使用第一个插入的日期而不是最小值，那么你应该尝试这样的事情：

```
 WITH SequenceDate AS
    (
        SELECT  InvoiceID, ROW_NUMBER() OVER (ORDER BY IssuedDate) AS RowNumber
        FROM    Invoice
    )
    UPDATE InvoiceList 
    SET InvoiceList.IssuedDate = DATEADD(d, SequenceDate.RowNumber - 1, b.IssuedDate)   
    FROM SequenceDate 
    INNER JOIN InvoiceList ON SequenceDate.InvoiceID = InvoiceList.InvoiceID 
    CROSS JOIN (SELECT IssuedDate    
                FROM InvoiceList
WHERE InvoiceID = 1) b 
```

附上[SQL Fiddle 。](http://www.sqlfiddle.com/#!3/93cd5)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T14:23:33.430

您可以直接加入`Invoice`表格`SequenceDate`。

```
WITH SequenceDate AS
(
    SELECT  *, ROW_NUMBER() OVER (ORDER BY IssuedDate) RowNumber
    FROM    Invoice
)
UPDATE Invoice 
SET [IssuedDate] = DATEADD(d, RowNumber - 1, b.IssuedDate)
FROM Invoice a INNER JOIN [SequenceDate] b
        ON a.[InvoiceID] = b.[RowNumber] 
```

如果是这种情况，那么试试这个

```
WITH SequenceDate AS
(
    SELECT  *, ROW_NUMBER() OVER (ORDER BY IssuedDate) RowNumber
    FROM    Invoice
)
UPDATE Invoice 
SET [IssuedDate] = b.IssuedDate
FROM Invoice a INNER JOIN [SequenceDate] b
        ON a.[InvoiceID] = b.[RowNumber] 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/dba13/19)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T15:04:31.970

**更新**：以下是陈旧的答案，答案是根据 OP 的原始问题做出的：

为了获得正确的输出，这是最短的：[http ://www.sqlfiddle.com/#!3/6aa22/1](http://www.sqlfiddle.com/#!3/6aa22/1)

```
SELECT * FROM INVOICE;

WITH FirstDate AS
(
    SELECT  row_number() over(order by InvoiceID) rn, IssuedDate
    FROM    Invoice
)
,UpdatedDate as
(
    select i.InvoiceID, i.IssuedDate, dateadd(d, row_number() over(order by i.InvoiceID) - 1, fd.IssuedDate) as NewDate
    from invoice i
    join FirstDate fd on fd.rn = 1
)
update UpdatedDate set IssuedDate = NewDate;

select * from Invoice; 
```

输出：

```
| INVOICEID | STORECUSTOMERID |                     ISSUEDDATE | AMOUNT | ISPENALTY | EMPLOYEEID |
--------------------------------------------------------------------------------------------------
|         1 |              13 | January, 12 2007 08:00:00-0800 |    244 |         0 |         41 |
|         2 |              31 | January, 13 2007 08:00:00-0800 |     81 |         0 |         34 |
|         3 |              23 | January, 14 2007 08:00:00-0800 |    184 |         0 |         46 |
|         4 |              28 | January, 15 2007 08:00:00-0800 |    231 |         0 |         17 |
|         5 |              36 | January, 16 2007 08:00:00-0800 |    121 |         0 |         22 |
|         6 |              28 | January, 17 2007 08:00:00-0800 |    240 |         0 |         17 |
|         7 |              15 | January, 18 2007 08:00:00-0800 |    193 |         0 |         47 |
|         8 |              21 | January, 19 2007 08:00:00-0800 |    172 |         0 |          4 | 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T15:14:16.973

根据 OP 的更新问题回答：[http ://sqlfiddle.com/#!3/dba13/22](http://sqlfiddle.com/#!3/dba13/22)

```
with SeqInvoice as
(
  select *, row_number() over(order by InvoiceId) rn from invoice
)
,SeqDate as
(
  select *, row_number() over(order by IssuedDate) rn from invoice
)
update SeqInvoice set IssuedDate = sd.IssuedDate
from SeqDate sd
where sd.rn = SeqInvoice.rn;

select * from Invoice; 
```

输出：

```
| INVOICEID | STORECUSTOMERID |                       ISSUEDDATE | AMOUNT | ISPENALTY | EMPLOYEEID |
----------------------------------------------------------------------------------------------------
|         1 |              13 | September, 19 2006 02:00:00-0700 |    244 |         0 |         41 |
|         2 |              31 |   October, 24 2006 02:00:00-0700 |     81 |         0 |         34 |
|         3 |              23 |  December, 11 2006 01:00:00-0800 |    184 |         0 |         46 |
|         4 |              28 |   January, 09 2007 01:00:00-0800 |    231 |         0 |         17 |
|         5 |              36 |   January, 12 2007 01:00:00-0800 |    121 |         0 |         22 |
|         6 |              28 |   January, 15 2007 01:00:00-0800 |    240 |         0 |         17 |
|         7 |              15 |     April, 05 2007 02:00:00-0700 |    193 |         0 |         47 |
|         8 |              21 |  November, 21 2007 01:00:00-0800 |    172 |         0 |          4 | 
```

**更新**

这是一种不直接更新CTE的方法，直接更新基表：[http ://sqlfiddle.com/#!3/dba13/24](http://sqlfiddle.com/#!3/dba13/24)

```
with SeqInvoice as
(
select *, row_number() over(order by InvoiceId) rn from invoice
)
,SeqDate as
(
select *, row_number() over(order by IssuedDate) rn from invoice
)
update I set IssuedDate = sd.IssuedDate
from Invoice i
join SeqInvoice si on si.InvoiceId = i.InvoiceId
join SeqDate sd on sd.rn = si.rn;

select * from Invoice; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T14:33:19.047

我会使用一个 SQL 游标，像这样......

```
DECLARE @InvoiceId AS INT
DECLARE @PreviousInvoiceId AS INT
DECLARE @NextIssuedDate AS DATE

SET @PreviousInvoiceId = 0
--Date you want to start from
SET @NextIssuedDate = '2007-01-12'

DECLARE csrUpdateDate CURSOR FOR 

    SELECT InvoiceID FROM Invoice
    ORDER BY InvoiceID

OPEN csrUpdateDate 

FETCH NEXT FROM csrUpdateDate 
INTO @InvoiceId

WHILE @@FETCH_STATUS = 0
BEGIN

    BEGIN 

        IF(@InvoiceId <> @PreviousInvoiceId)

        UPDATE Invoice
        SET IssuedDate = @NextIssuedDate
        WHERE InvoiceId = @InvoiceId

    END

     SET @PreviousInvoiceId = @InvoiceId
     SET @NextIssuedDate = DATEADD(DAY,1,@NextIssuedDate)

    FETCH NEXT FROM csrUpdateDate 
        INTO @InvoiceId

END
CLOSE csrUpdateDate 
DEALLOCATE csrUpdateDate 
```

# c# - 用计数查找数组值？

> ID：12160604
> 
> 赞同：1
> 
> 时间：2012-08-28T13:44:36.767
> 
> 标签：c#, arrays

```
int[] array = new int[10];
array[0] = 1;
array[1] = 1;
array[2] = 1;
array[3] = 2;
array[4] = 1;
array[5] = 2;
array[6] = 1;
array[7] = 1;
array[8] = 2;
array[9] = 3; 
```

我想得到这个结果：

```
1 => 6 times
2 => 3 times
3 => 1 times 
```

有没有什么简单的方法可以得到这个结果`if-else statement`？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T13:46:48.400

是的，通过使用 LINQ 的[GroupBy()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)：

```
var res = array.GroupBy(x => x)
               .Select(x => new {Number=x.Key,Times=x.Count()})
               .ToList(); 
```

注意：
`ToList()`如果您只想迭代结果一次，则可能没有必要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:46:59.050

您可以使用 LINQ 并对数据进行分组：

```
var result = array.GroupBy(x => x)
                  .Select(x => new { Value = x.Key, Count = x.Count() }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T13:47:29.727

```
array.GroupBy(a => a).Select(a => new { Value = a.Key, Count = a.Count() }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T13:49:38.913

This is a Linq statement that will allow you to build your output:

```
array.GroupBy(x => x).Select(x => new { x.Key, Count = x.Count() } ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T13:49:45.313

[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/bb534304.aspx) groups a sequence by a selector. Then you can use the groups to count them or do whatever you need.

```
var countGroups = array.GroupBy(a => a)
                       .OrderByDescending(g => g.Count());

foreach(var g in countGroups)
    Console.WriteLine("{0} => {1} times", g.Key, g.Count()); 
```

Here's a demo with your sample: [http://ideone.com/WatNL](http://ideone.com/WatNL)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-28T13:48:29.697

您可以使用 Linq 来计算结果。如果您将以下内容放在控制台应用程序中，它应该可以工作：

```
using System;
using System.Linq;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            int[] array = new int[10];
            array[0] = 1;
            array[1] = 1;
            array[2] = 1;
            array[3] = 2;
            array[4] = 1;
            array[5] = 2;
            array[6] = 1;
            array[7] = 1;
            array[8] = 2;
            array[9] = 3;

            var group = from i in array
                        group i by i into g
                        select new
                        {
                            g.Key,
                            Sum = g.Count()
                        };

            foreach (var g in group)
            {
                Console.WriteLine(g.Key + " " + g.Sum);
            }
        }
    }
} 
```

# java - 缓存 JTable 行

> ID：12160611
> 
> 赞同：1
> 
> 时间：2012-08-28T13:44:48.503
> 
> 标签：java, swing, jtable

是否可以缓存所有行渲染器，以便在表更新后每行仅渲染一次？我不期待太多的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:08:52.907

`JTable` [渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)为视图服务；`getValueAt()`除非您的模型的实现强加它，否则 RTL 渲染器应该没有可察觉的开销。相反，让您`TableModel`获取其数据，仅在必要时[缓存。](https://stackoverflow.com/q/221525/230513)此[示例](https://stackoverflow.com/a/9134371/230513) `extends AbstractTableModel`并获取其关于施工的全部数据。如果获取会造成延迟，请使用 的实例[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)，如[API](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)或本[示例](https://sites.google.com/site/drjohnbmatthews/randomdata)中所示。

# java - 从列表中的对象获取参数

> ID：12160616
> 
> 赞同：1
> 
> 时间：2012-08-28T13:44:59.680
> 
> 标签：java, closures

Java中是否有一种从列表中的对象读取参数的好方法？例如，我经常想要获取我的对象中属于列表的所有 id。我通常为此编写的代码如下。

```
List<Integer> ids = new ArrayList<Integer>();
for (MyObject myObj : myObjs){
    ids.add(myObj.getId());
} 
```

有没有其他方法可以做到这一点或任何其他模式？或者我只是在等待（正确的）闭包出现在 java.lang. 我想要的只是一行来返回列表的一个参数的所有值的列表。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:48:07.290

番石榴[`Lists.transform`](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Lists.html)：

```
final List<Integer> ids = Lists.transform(myObjs, new Function<MyObject, Long>() {
    public Long apply(final MyObject input) {
        return input.getId();
    }
}); 
```

编辑：您还可以使用自定义`ToId`类实现`Function<F, T>`

# iphone - 移动 tableview 时 UITableviewcell 被裁剪

> ID：12160617
> 
> 赞同：1
> 
> 时间：2012-08-28T13:45:09.370
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我正在创建一个 UITableview 并应用转换 -M_PI_2 以便 tableview 水平滚动。

每个单元格也被 M_PI_2 旋转以在水平模式下正确显示。当我用数据初始化它时，这些单元格是完美的。一切正常。

现在，我将 tableview 高度调整为原始高度的 75%，并将其向下移动 25%，上半部分单元格被隐藏（我在 tableview 上设置了 clipstobounds）。我使用该函数调整 uitableview 框架的大小`setFrame:`

这即使在之后也不会改变`[tableview reload]`。

由于父（tableview）被移动和调整大小，子（单元格）不应该相对于它移动吗？

如果不是，那么执行以下操作的正确方法是什么：

1.  填充 uitableview 并转换为水平滚动
2.  根据用户输入调整框架大小
3.  单元格还应该与 uitableview 的新框架对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:56:59.780

`CALayer`当您应用这样的变换时，您正在旋转图层，因此您需要了解几何和`UIView`几何之间的区别

Apples [Layer Geometry](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html#//apple_ref/doc/uid/TP40006082)文档很好地描述了这一点，但基本上我认为您需要调整视图层的 anchorPoint 值

```
self.viewToRotate.layer.anchorPoint = CGPointMake(0.0f, 0.0f); //not sure of the actual value here 
```

# wpf - MVVM类结构与布局-计算器项目

> ID：12160618
> 
> 赞同：0
> 
> 时间：2012-08-28T13:45:12.800
> 
> 标签：wpf, mvvm

我最近开始学习 MVVM，并学习了如何数据绑定/使用命令/通知属性。我正在创建一个计算器，并想知道我的类结构是否适合 MVVM 并正确使用 WPF。

*   CaculatorProject - 有 10 个按钮（0-9）、4 个按钮（+、-、/、+）和 1 个文本框

*   视图 - 包含 Xaml

*   ViewModel -`ICommands`每个按钮 14 个，模型属性和 4 个私有数学方法

*   `INotifyChanged`模型 - 具有属性的当前/先前/结果值的私有变量

这看起来正确吗？还是我在错误的部分有东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:41:24.043

您可以通过将许多 I-Command 集中到一个带有参数的 I-Command 中来减少很多 I-Command。例如：

```
<Button Command="YourCommand" 
        CommandParameter="1" 
        Content="1" />
<Button Command="YourCommand" 
        CommandParameter="2" 
        Content="2" /> 
```

```
private void YourCommand_Executed(object sender, ExecutedRoutedEventArgs e)
{
     PrintToScreen(e.Parameter.ToString());
} 
```

# git - 使用 Git，我怎样才能拉动，但又不会导致合并？

> ID：12160620
> 
> 赞同：1
> 
> 时间：2012-08-28T13:45:15.407
> 
> 标签：git, github, commit, pull

我创建了一个新的提交，但在此之前忘了拉。（我应该使用`git stash`and `git pull`。）现在如果 I `git pull`，我会得到一个额外的提交“merge origin/<branch> to <branch>”（一些提交已经被其他同事推送了。），这是我不想要的.

有没有办法`git pull`不合并？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:47:52.770

`git pull`本质上是`git fetch`紧随其后的`git merge`，所以如果你想要一个没有合并的拉，就做`git fetch`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T05:07:02.803

如果您已经不小心提交了，请遵循以下工作流程：

*   从当前分支创建一个新分支（基本上是为了制作提交的“安全副本”）。
*   将当前分支重置为提交之前的提交（“删除”提交）。
*   拉。
*   Cherry-pick 从备份分支到当前分支的提交，然后删除备份分支。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-22T21:06:27.213

所有你需要的是`git pull --rebase`

# wordpress - 发送邮件时，在wordpress中无法点击href链接？

> ID：12160623
> 
> 赞同：0
> 
> 时间：2012-08-28T13:45:21.943
> 
> 标签：wordpress, sendmail, html-email, phpmailer

在下面的代码中，当我发送邮件 href 链接显示整个 url 并且不可点击时，如下所示：- 单击以下链接： [单击此处进行确认](http://abc.com/xyz/test.php?user_id=dTM=&key=bUl2MDJdfMN2w1cUNZ) 这在本地显示正确，但在服务器上显示不正确。如果不明白我的意思，请回复。

```
$key = stripslashes($user->user_activation_key);

$activation_key = base64_encode($key);
$user_id_enc = base64_encode($user_id);

$siteUrl = get_site_url();
$full_Url=$siteUrl.'/test.php?user_id='.$user_id_enc.'&key='.$activation_key;
$message  = __('Click on the following link:') . "</br>\r\n";
$message .= sprintf(__('<a href="%s">click here for confirmation</a>'), $full_Url) . "\r\n";
  wp_mail($user_email, sprintf(__('[%s] Your confirmatiom'), $blogname), $message); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:49:32.963

尝试使用[http://abc.com](http://abc.com)链接的绝对路径。另外，请确保该网站不是特定于网络的，例如。可以在您的工作网络内访问。

# java - Android 套接字到 Java ServerSocket 连接

> ID：12160626
> 
> 赞同：0
> 
> 时间：2012-08-28T13:45:33.207
> 
> 标签：java, android, sockets, serversocket

我很难将模拟的 Android Activity 连接到在我的计算机上运行的常规 Java 程序。以下是我采取的一些预防措施，应该可以解决它们...

*   我尝试连接到 10.0.2.2，即模拟器所在本地主机的 IP 地址
*   我生成了一个与 UI 线程分开的新线程来建立连接。（我没有做一个花哨的工作线程，我只是创建了一个新线程并说.start（））

所以基本上你的系统是由一个普通的Java程序组成的，它声明一个ServerSocket，然后等待.accept()方法。我启动了那个程序，希望它坐在那里等待。然后我切换到我的 Activity 类，它有一个按钮的 onClick 方法。该方法调用我的新线程的 .start() 方法。在我的活动的 .run 方法中，我声明了一个新的 Socket 并尝试连接到本地主机。

你知道我还应该注意什么吗？主要问题是什么都没有发生。我在本地主机 java 程序中的 .accept 方法调用之后放置了一个断点，但我从未到达它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-31T16:29:15.517

请参阅此线程以将模拟器网络连接到计算机的网络。希望这可以帮助

[如何将安卓模拟器连接到互联网](https://stackoverflow.com/questions/2039964/how-to-connect-android-emulator-to-the-internet)

该帖子的最佳答案是

> 我认为一些答案可能已经解决了这个问题，但这是对我有用的。
> 
> 假设当您在无线网络上并且安装了 LAN 卡时出现问题，则问题是模拟器尝试从该 LAN 卡获取其 DNS 设置。当您通过该 LAN 连接时，这不是问题，但如果您使用无线连接，则完全没用。当我在笔记本电脑上时，我注意到了这一点。
> 
> 那么，如何修复呢？简单：禁用您的 LAN 卡。真的。只需转到您的网络连接，找到您的 LAN 卡，右键单击它并选择禁用。现在试试你的模拟器。如果你像我一样，它突然......工作！- 神器

我发现这个对答案的评论很有用。

> 实际上，模拟器采用具有最高优先级的适配器，因此切换适配器的优先级（无线为最高）也应该可以工作，并且不需要您完全禁用 LAN 适配器。谢谢你的回答，让我头疼 – Anzeo 2011-04-06 14:47:07

在您的情况下，Java 程序在同一台机器上。所以我认为，Java 程序 Socket 可能正在绑定到其中一个网络接口的 IP，而 Android 正在尝试连接到另一个。可以肯定的是，只需禁用除一个以外的所有网络接口并运行您的程序。发布您可以调整网络接口的优先级。

# java - servletcontext.getRealPath("/") 是什么意思，我应该什么时候使用它

> ID：12160639
> 
> 赞同：65
> 
> 时间：2012-08-28T13:46:26.543
> 
> 标签：java, servlets, realpath

在以下代码段中：

```
ServletContext context = request.getServletContext();
String path = context.getRealPath("/"); 
```

`/`方法中`getRealPath()`代表什么？我应该什么时候使用它？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-08-28T13:56:39.087

### 介绍

[`ServletContext#getRealPath()`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)旨在将 Web 内容路径（服务器磁盘文件系统上扩展的 WAR 文件夹结构中的路径）转换为绝对磁盘文件系统路径。

`"/"`表示 Web 内容根。即，它代表`web`以下项目结构中的文件夹：

```
YourWebProject
 |-- src
 |    :
 |
 |-- web
 |    |-- META-INF
 |    |    `-- MANIFEST.MF
 |    |-- WEB-INF
 |    |    `-- web.xml
 |    |-- index.jsp
 |    `-- login.jsp
 : 
```

因此，传递`"/"`to`getRealPath()`将返回`/web`项目扩展 WAR 文件所在文件夹的绝对磁盘文件系统路径。类似的东西`/path/to/server/work/folder/some.war/`你应该能够在`File`or中进一步使用`FileInputStream`。

请注意，大多数初学者似乎没有看到/意识到您实际上可以将整个 Web 内容路径传递给它并且他们经常使用

```
String absolutePathToIndexJSP = servletContext.getRealPath("/") + "index.jsp"; // Wrong! 
```

甚至

```
String absolutePathToIndexJSP = servletContext.getRealPath("") + "index.jsp"; // Wronger! 
```

代替

```
String absolutePathToIndexJSP = servletContext.getRealPath("/index.jsp"); // Right! 
```

### 永远不要在那里写文件

另请注意，即使您可以使用 向其中写入新文件，但在重新部署 WAR 时`FileOutputStream`，所有更改（例如新文件或编辑的文件）都将**丢失；**原因很简单，所有这些更改都不包含在原始 WAR 文件中。所以所有试图在其中保存上传文件的初学者都做错了。

此外，当服务器未配置为将 WAR 文件扩展为磁盘文件系统，而是作为虚拟文件系统扩展为例如内存时，`getRealPath()`将始终返回或完全意外的路径。`null`

### `getRealPath()`不便携；你最好永远不要使用它

`getRealPath()`小心使用。实际上，它**没有**合理的现实世界用例。根据我 20 年的 Java EE 经验，*总*有另一种方式比`getRealPath()`.

如果您真正需要的只是获取`InputStream`Web 资源，则更好地使用[`ServletContext#getResourceAsStream()`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)它，无论 WAR 的扩展方式如何，这都将起作用。因此，例如，如果您想要`InputStream`of `index.jsp`，**则不**要这样做：

```
InputStream input = new FileInputStream(servletContext.getRealPath("/index.jsp")); // Wrong! 
```

但改为：

```
InputStream input = servletContext.getResourceAsStream("/index.jsp"); // Right! 
```

或者，如果您打算获取所有可用 Web 资源路径的列表，请[`ServletContext#getResourcePaths()`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html#getResourcePaths(java.lang.String))改用。

```
Set<String> resourcePaths = servletContext.getResourcePaths("/"); 
```

`URL`您可以通过获取单个资源[`ServletContext#getResource()`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html#getResource%28java.lang.String%29)。这将`null`在资源不存在时返回。

```
URL resource = servletContext.getResource(path); 
```

或者，如果您打算保存上传的文件或创建临时文件，请参阅下面的“另请参阅”链接。

### 也可以看看：

*   [getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)
*   [在 servlet 应用程序中保存上传文件的推荐方法](https://stackoverflow.com/questions/18664579/recommended-way-to-save-uploaded-files-in-a-servlet-application)
*   [在重新部署 Java EE 7 Web 应用程序时保留数据的简单方法](https://stackoverflow.com/questions/27804742/simple-ways-to-keep-data-on-redeployment-of-java-ee-7-web-application/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T13:51:23.407

Web 应用程序的上下文路径是包含 Web 应用程序的 WEB-INF 目录的目录。它可以被认为是网络应用程序的“家”。通常，在编写 Web 应用程序时，获取此目录在文件系统中的实际位置可能很重要，因为这允许您执行诸如读取文件或写入文件之类的操作。

该位置可以通过 ServletContext 对象的 getRealPath() 方法获得。此方法可以传递一个字符串参数集到 File.separator 以使用操作系统的文件分隔符获取路径（“/”对于 UNIX，“\”对于 Windows）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-16T23:58:23.933

Java 7 和 Java 8 之间也有一个变化。诚然，它涉及一个已弃用的调用，但我必须添加一个“/”才能让我们的程序正常工作！这是讨论它的链接[为什么servletContext.getRealPath在tomcat 8上返回null？](https://stackoverflow.com/questions/32197494/why-does-servletcontext-getrealpath-returns-null-on-tomcat-8)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-11-06T16:13:28.333

我的方法：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    try {
        String path = request.getRealPath("/WEB-INF/conf.properties");
        Properties p = new Properties();
        p.load(new FileInputStream(path));

        String StringConexion=p.getProperty("StringConexion");
        String User=p.getProperty("User");
        String Password=p.getProperty("Password");
    }
    catch(Exception e){
        String msg = "Excepcion " + e;
    }
} 
```

# sql-server - 在 T Sql 中选择查询

> ID：12160642
> 
> 赞同：1
> 
> 时间：2012-08-28T13:46:35.233
> 
> 标签：sql-server, sql-server-2008, tsql

在制定选择查询时需要帮助。

我有一个包含 50 列的表，现在我不想从该表中检索所有列。

即，假设我有 col 喜欢：a、b、c、d 和我想要一个没有列 c、d 的选择查询。我知道使用简单`select a, b from table`会达到目的，但想想当有 50 列并且您只想从中检索 40 列时。

sql server 语法中是否有任何特定的 T-SQL 可以完全满足要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:48:20.757

不，您不能说“选择除 c,d 之外的所有列”，但如果您使用对象资源管理器，请展开表或视图节点，展开表或视图，然后将“列”文件夹拖到查询窗口上。现在您可以从列表中删除您不想要的 10 列，这应该比输入其他 40 列更容易。

![在此处输入图像描述](../Images/f486bc6bc9c833020b170ae8ee3bcf01.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T17:48:27.507

实际上，*可以*选择除您指定的某些列之外的所有列。这不是你通常应该做的事情。

例如：

```
DECLARE @columns VARCHAR(MAX)
SELECT @columns = COALESCE(@columns+',' ,'') + name
FROM MyDatabase.sys.columns
WHERE object_id = (
    SELECT object_id
    FROM MyDatabase.sys.tables
    WHERE name='MyTable'
)
    AND name NOT IN ('MyColumn1','MyColumn2')
PRINT @columns

EXEC('SELECT '+@columns+' FROM MyTable') 
```

通常，最好遵循其他答案中给出的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:51:33.560

你不能这样做`Select * except c,d from table`。您必须手动编写每个列名。如果您不想手动编写每个列名，可以`Script Table As`通过右键单击对象资源管理器中的*表*或*视图来使用，如下所示：*

> ![在此处输入图像描述](../Images/b53ce2392f2e8e605ea156e4ade3e6ab.png)

然后您将在*新查询编辑器窗口*`SELECT`中获得整个查询，然后删除不需要的列，如下所示：

 *> ![在此处输入图像描述](../Images/30b06ce7b7ec90966dd2fbfd400b43b1.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T22:57:45.053

如果您经常使用它，创建视图会有所帮助。虽然你必须做一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T15:46:09.373

单击**新建查询**- 键入“从表中选择 *”。用光标突出显示文本。右键单击突出显示，**在 Editor 中选择 Design Query**，清除不需要的列的复选标记。单击**确定**。我发现一旦习惯了在编辑器中编写代码会非常快。比等待 Intellisense 尝试弄清楚您要做什么要快得多。

[当您以这种方式编写查询时，拥有像Poor Man's T-SQL Formatter](http://www.architectshack.com/PoorMansTSqlFormatter.ashx)这样的格式化工具确实很有帮助，因为编辑器生成的代码通常是不可读的。*

# php - 在 SQL 查询中转义特殊字符

> ID：12160645
> 
> 赞同：1
> 
> 时间：2012-08-28T13:46:40.337
> 
> 标签：php, sql, special-characters

我有一个 SQL Server 表，其中包含部门名称（即`Admissions & Registration`，`Women's Softball coach`），当您单击我们页面上的链接时，它会拉出该部门下的所有员工，但是当您拉出时，`Women's Softball coach`我收到如下错误：

> PHP 警告：mssql_query() [function.mssql-query]：> 消息：第 1 行：“s”附近的语法不正确。（严重性 15）在 >C:\Inetpub\wwwroot\DACC\directory\dept.php 第 179 行
> 
> PHP 警告：mssql_query() [function.mssql-query]: >message: 字符串 ') ORDER BY Lastname' 前的未闭合引号。>>>（严重性 15）在 C:\Inetpub\wwwroot\DACC\directory\dept.php 第 179 行
> 
> PHP 警告：mssql_query() [function.mssql-query]: >第 179 行 C:\Inetpub\wwwroot\DACC\directory\dept.php 中的查询失败
> 
> PHP 警告：mssql_query() [function.mssql-query]：消息：第 5 行：“s”附近的语法不正确。（严重性 15）在 >C:\Inetpub\wwwroot\DACC\directory\dept.php 第 195 行
> 
> PHP 警告：mssql_query() [function.mssql-query]: >message: 字符串“ORDER BY directory.LastName”前的未闭合引号。（严重性 15）在 C:\Inetpub\wwwroot\DACC\directory\dept.php >在第 195 行

我知道这是转义特殊字符的问题，但是有没有办法在查询中做到这一点，或者我必须在表中做到这一点？

上面引用的代码在这里--->

```
$department = $_GET['dept'];

// This will evaluate to TRUE so the text will be printed.
if (isset($department)) {

 // Send a select query to MSSQL

$query = mssql_query("SELECT * FROM directory WHERE department IN (SELECT id FROM     departments WHERE name='$department') ORDER BY Lastname"); 
```

以下是查询的执行方式：

```
 function listDepts() { 

    $query = "SELECT DISTINCT name FROM departments ORDER BY name"; 
    $result = mssql_query($query); 
    echo "<h3>Please select a department:</h3>\n"; 
    echo "<ul>\n"; 

    for ($i=0; $i<mssql_num_rows($result); $i++) { 
        $info = mssql_fetch_assoc($result); 
        echo "<li><a href=\"dept.php?dept=$info[name]\">$info[name]</a></li>\n"; 
    } 

    echo "</ul>\n\n"; 
} 
```

这是生成部门列表的代码。

```
 function listDepts() {

$query = "SELECT DISTINCT  name FROM     departments ORDER BY     name";
$result = mssql_query($query);

echo "<h3>Please select a department:</h3>\n";
echo "<ul>\n";

for ($i=0; $i<mssql_num_rows($result); $i++) {
    $info = mssql_fetch_assoc($result);
    echo "<li><a href=\"dept.php?dept=$info[name]\">$info[name]</a></li>\n";
}

echo "</ul>\n\n";

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:00:29.053

我强烈建议您使用准备好的语句，然后使用变量执行它：

```
$stmt = $dbh->prepare("SELECT * FROM directory WHERE department IN (SELECT id FROM departments WHERE name=?) ORDER BY Lastname");
if ($stmt->execute(array("Women's Softball coach"))) {
    while ($row = $stmt->fetch()) {
        print_r($row);
    }
} 
```

有关详细信息，请参阅[有关准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)的 PHP 文档。

在你的具体情况下，你会有这样的事情：

```
$stmt = $dbh->prepare("SELECT * FROM directory WHERE department IN (SELECT id FROM departments WHERE name=?) ORDER BY Lastname");
for ($i=0; $i<mssql_num_rows($result); $i++) {
    if ($stmt->execute(array($result))) {

        $info = $stmt->fetch(); 
        ...
} 
```

# c# - 我的 WCF 服务的 ObjectCache 或本地字段？

> ID：12160649
> 
> 赞同：1
> 
> 时间：2012-08-28T13:46:42.380
> 
> 标签：c#, wcf, caching, memorycache, objectcache

我有一个服务，我想在其上实现某种缓存，但我不确定我是否应该使用 .NET 4 的 ObjectCache 或者只是在服务上设置私有字段，一段时间后会刷新。

情况如下： 服务用于返回大块数据。目前，我们在数据库中查找对服务的每个请求的数据。此数据仅在每天午夜刷新一次。我想在服务上缓存这些数据，并在数据库更新后每晚刷新它（比如上午 12:30 左右）。

现在，在过去，我们将填充本地字段并创建一个“监控线程”，该线程将持续运行并在指定的时间后重新填充这些字段。我看到的一个缺点是服务类中有一些额外的代码用于存储。

如果我切换到 ObjectCache，一个好处是过期时自动删除。我想做的是为 CacheEntryRemovedCallback 委托分配一个回调方法，当它被调用时，只需在将来的某个时间重新缓存数据（刷新数据库后大约 30 分钟）。

我的问题是，对于 WCF 服务，缓存数据更理想的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:21:12.960

使用`System.Runtime.Caching`. 比国产自行车好。

`SqlChangeMonitor`如果您的数据仅在午夜更新，您可以使用。这将大大简化逻辑，并且您的缓存将与数据同步。

[http://www.codeproject.com/Articles/167282/NET-4-0-MemoryCache-with-SqlChangeMonitor](http://www.codeproject.com/Articles/167282/NET-4-0-MemoryCache-with-SqlChangeMonitor)

# java - 带有适当文档的库或 API 接口，用于使用 wifi、蓝牙、小区 ID、rfid、gps 进行室内定位？

> ID：12160651
> 
> 赞同：0
> 
> 时间：2012-08-28T13:46:50.147
> 
> 标签：java, android

嗨，任何人都可以告诉我一些 Java 库或 API 接口以及适当的文档，用于开发用于室内定位的 android 应用程序。我想开发一个 android 应用程序，它使用一种或多种技术来准确地找到您的位置。

等待回复。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:04:28.593

如果您想使用 wifi、蓝牙（相机？？）进行定位，您需要将智能手机（emettor）连接到将接收数据的设备。然后它必须从接收到的数据中计算三角剖分。然而 wifi 并不是它的好技术（规范、带宽、精度、干扰......）谷歌正在研究它，以及 IBM、redwood hat 等......但缺乏精度和效率。您需要将特定的射频设备（发射器/接收器）啮合在一起以覆盖一个区域。然后将算法的结果应用于多边形地图......没有应用程序。

# php - php foreach 循环一个文件夹获取其子文件夹中的文件

> ID：12160653
> 
> 赞同：0
> 
> 时间：2012-08-28T13:47:03.873
> 
> 标签：php, directory, subdirectory, file-exists

我有一些`error_log.txt`文件，在中创建`/var/www/html/log/'.date(Ymd).'/error_log.txt`，文件夹表是这样的。

```
-log-
    |--20120825 -- error_log.txt
    |--20120826 -- 
    |--20120827 -- error_log.txt
    |--20120828 -- error_log.txt 
```

如何`foreach loop`在其中创建一个名为的文件夹`log`，然后获取所有`subfolder name`并判断是否有`error_log.txt`这个 `subfolder`？

如图`folder table`所示，里面`20120826`没有`error_log.txt`，所以不要打印`folder name`.

最后我需要获取文件夹名称：`20120825, 20120827, 20120828`

```
$folder = dirname(__FILE__) . '/../log/';
foreach(glob($folder) as $subfolder){
  if(file_exists($subfolder.'/error_log.txt')){
    echo  $subfolder.'<br />'; //I get nothing.
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:50:25.683

```
$folder = dirname(__FILE__) . '/../log/';
foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator($folder)) as $entry) {
  if ($entry->isFile()) {
    echo $entry, '<br />';
  }
} 
```

Used in this way, you'll only get actual files. And if you don't like the iterator style, use:

```
$folder = dirname(__FILE__) . '/log/*';
foreach(glob($folder) as $subfolder){
  $path = $subfolder . '/error_log.txt';
  if (file_exists($path)) {
    echo basename($subfolder), '<br />';
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:29:48.847

也可以使用[scandir](http://php.net/manual/en/function.scandir.php)

```
$folder = dirname(__FILE__) . '/../log/';
$files = scandir($dir);
foreach($files as $subfolder){
  if(is_numeric($subfolder)){ // As your folder all use number, use `is_numeric` to remove sub folder '.' and '..'
    if(file_exists($folder.$subfolder.'/error_log.txt')){
      echo  $subfolder.'<br />';
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:59:30.340

使用以下

```
$folder = dirname(__FILE__) . '/../log';

foreach(glob($folder.'/*') as $subfolder){
  if(file_exists($subfolder.'/error_log.txt')){
    echo  $subfolder.'<br />'; //You will get the folder name
} 
```

# java - 需要一个保留顺序并具有“顺序敏感”等于/hashCode 的地图

> ID：12160656
> 
> 赞同：4
> 
> 时间：2012-08-28T13:47:14.690
> 
> 标签：java, collections

有没有像 LinkedHashMap 一样工作的 java 集合，但也反映了 equals 和 hashCode 中的顺序？-> 两个元素相同但顺序不同的 Map 不应该相等，应该有不同的 hashCode。

**基于 Peter Lawrey 回答的解决方案（xAxis 是 LinkedHashMap）：**

哈希码：

```
...
result = prime * result + ((xAxis == null) ? 0 : xAxis.hashCode() + xAxis.toString().hashCode());
... 
```

等于：

```
...
if (xAxis == null) {
        if (other.xAxis != null) {
            return false;
        }
    } else if (!xAxis.equals(other.xAxis)) {
        return false;
    } else if (!xAxis.toString().equals(other.xAxis.toString())) {
        return false;
    }
... 
```

（它基于eclipse生成的代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:55:11.597

您可以覆盖 HashMap 的 hashCode 和 equals。

由于 HashMap 没有顺序，这是非常危险的，但如果你愿意，你可以这样做。您可能会发现比较每个的 toString() 是您真正需要的。

顺便说一句：要了解 HashMap 的键可以有多少不同的顺序，这篇博文为您提供了使用 HashSet 的想法（它使用相同的代码）

[http://vanillajava.blogspot.co.uk/2011/09/order-of-elements-in-hash-collection.html](http://vanillajava.blogspot.co.uk/2011/09/order-of-elements-in-hash-collection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:39:57.413

的契约`Map`非常清楚平等的含义。（即使是 Java 库违反合同的事实也`Map`适用于 Java 集合课程。）如果您考虑将遵守合同与违反合同的行为进行比较，那么违反 LSP 也会引起混乱`Map`。

一个干净的解决方案是一个间接层。引入一个包含但不实现的类`Map`（可以是任何实现，甚至可以在运行时更改实现，尽管可能不应该）并且它是自己的`equals`/`hashCode`事物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:54:17.043

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TreeMap.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TreeMap.html)怎么样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T15:07:06.583

`LinkedHashMap`您可以用实现包装 a`Map`并提供基于顺序计算相等性的`equals`/ 。`hashCode`

# eclipse - Eclipse 派生资源

> ID：12160660
> 
> 赞同：0
> 
> 时间：2012-08-28T13:47:31.320
> 
> 标签：eclipse, eclipse-pde

我的插件尝试克隆一个 mercurial 存储库并添加一些插件特定文件，如 .customplugin/service.xml、.customplugin/info.xml。我不希望这些文件被版本控制跟踪。我尝试了以下方法：

创建文件后，我将它们标记为派生。但是这些更改会在 Eclipse 重新启动后反映出来。

我希望派生的更改立即反映。这怎么可能？

# c# - IEnumerable 的 Visual Studio 可视化工具

> ID：12160661
> 
> 赞同：6
> 
> 时间：2012-08-28T13:47:33.533
> 
> 标签：c#, visual-studio-2012, debuggervisualizer

**TL;DR**
有谁知道如何用 C# 为 Visual Studio 2012 编写调试可视化工具，以便我可以可视化`IEnumerable<string>`或`string[]`类似的对象？

**更多信息**
Visual Studio Debug Visualizer 很棒，我经常使用一些流行的 ( [Mole](http://www.molosoft.com/) )。但是，现在是推出一些自定义可视化工具的时候了。我从一个简单的字符串可视化器开始：

```
[assembly: System.Diagnostics.DebuggerVisualizer(typeof(My.Namespace.DebuggerSide),
                                            typeof(VisualizerObjectSource),
                                            Target = typeof(string),
                                            Description = "Awesome Visualizer")] 
```

DebuggerSide 的代码基本上是模板中的示例：

```
public class DebuggerSide : DialogDebuggerVisualizer
{
    protected override void Show(IDialogVisualizerService windowService, IVisualizerObjectProvider objectProvider)
    {
        if (windowService == null)
            throw new ArgumentNullException("windowService");
        if (objectProvider == null)
            throw new ArgumentNullException("objectProvider");

        var data = (string)objectProvider.GetObject();

        using (var displayForm = new VisualizerForm(data))
        {
            windowService.ShowDialog(displayForm);
        }
    }

    /// <summary>
    /// Tests the visualizer by hosting it outside of the debugger.
    /// </summary>
    /// <param name="objectToVisualize">The object to display in the visualizer.</param>
    public static void TestShowVisualizer(object objectToVisualize)
    {
        VisualizerDevelopmentHost visualizerHost = new VisualizerDevelopmentHost(objectToVisualize, typeof(DebuggerSide));
        visualizerHost.ShowVisualizer();
    }
} 
```

`VisualizerForm`是带有额外控件等的自定义表单...当我构建项目并将 dll 放入`My Documents/Visual Studio 11/Visualizers`文件夹中并重新启动 Visual Studio 时，当为字符串对象命中断点时，我确实可以看到调试器出现在镜子图标下. 呜呼！到目前为止，一切都很好。

现在我想，而不是可视化`string`，可视化`string[]`或`IEnumerable<string>`类似的对象。但是，当我将程序集属性更改为 时`IEnumerable<string>`，这不起作用，IEnumerable 对象上什至没有显示玻璃图标。

**更新**
我可以通过将 TargetType 更改为`List<>`然后检查是否可以转换为`List<string>`. 但是，这意味着我必须将我想要调试的所有对象都转换为`List`并且不能使用`IEnumerable<>`或 string[]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:23:36.627

可视化工具记录为

> 对泛型类型的支持是有限的。仅当泛型类型是开放类型时，您才能为泛型类型的目标编写可视化工具。

这意味着您不能编写使用封闭构造类型（如`IEnumerable<string>`.

您是否尝试过将目标类型设置为`IEnumerable<>`然后检查元素是否属于 type `string`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T10:32:06.430

请参阅此处的“可以具有调试器可视化器的对象”部分： [https ://rapiddevbookcode.codeplex.com/wikipage?title=EnumerableDebugVisualizer](https://rapiddevbookcode.codeplex.com/wikipage?title=EnumerableDebugVisualizer)

我的 Enumerable Debugger Visualizer 将与 IEnumerable 一起使用，如果使用它注册了底层具体类型，您可以查看注册代码以使您的工作正常。

# scala - Scala :: TreeMap 更新后不平衡？

> ID：12160666
> 
> 赞同：1
> 
> 时间：2012-08-28T13:47:40.943
> 
> 标签：scala, immutability, treemap

我想要做的是能够调整 TreeMap 中项目的键顺序，所以

*   我也许可以通过一些“静态”数据找到一个对象，这些数据不会改变
*   对象的位置（如果地图是扁平的）应该尊重它的“优先级”

以下测试用例适用于**numEntries=6**，但不适用于大于 7 的值。我真的不明白那里出了什么问题，但我怀疑树在一些更新/复制后会失衡。所以有人可以请教 - 是我的错还是 Scala 2.9 中的 TreeMap 有某种错误？

**如果循环**更新****

 **```
for (i <- 1 to (numEntries - 1)) { 
```

替换为

```
for (i <- (numEntries - 1) to 1 by -1) { 
```

一切正常。所以看起来这是 TreeMap 中的错误？

```
 import org.scalatest.FlatSpec
  import collection.immutable.TreeMap
  import org.junit.runner.RunWith
  import org.scalatest.junit.JUnitRunner

  @RunWith(classOf[JUnitRunner])
  class TreeMapTest extends FlatSpec {

    //val numEntries = 6;
    val numEntries = 10;

    sealed case class Entry(first: Option[Int], last: Int) extends Ordered[Entry] {

      def compare(that: TreeMapTest.this.type#Entry) = {
        if (first.isEmpty || that.first.isEmpty) {
          last compare that.last
        } else {
          (first.get compare that.first.get) match {
            case 0 => last compare that.last
            case x => x
          }
        }
      }

      def increase() = copy(first = Some(this.first.getOrElse(0) + 1))

    }

    type Container = TreeMap[Entry, Entry]

    "TreeMap" should "allow updates" in {
      var dataMap: Container = new Container() ++ (for (i <- 1 to numEntries) yield Entry(Some(0), i) -> Entry(Some(0), i))
      for (i <- 1 to (numEntries - 1)) {
        val key = new Entry(None, i)
        dataMap.get(new Entry(None, i)) match {
          case Some(e) =>
            val newEntry = e.increase()
            dataMap = (dataMap - key) + (newEntry -> newEntry)
          case None => fail("Can not find entry " + key)
        }
      }
    }

  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T14:45:57.333

我发现基本操作中几乎不可能存在错误`TreeMap`——在 Scala 2.9.0 之前有很多错误，但现在有一个强大的测试套件支持`RedBlack`，它是后备存储。

更有可能的是，您没有总订单会出现问题。假设你有三个元素：

```
val a = Entry(Some(0), 3)
val b = Entry(Some(1), 0)
val c = Entry(None, 1) 
```

那么以下是真的：

```
scala> a < b
res39: Boolean = true

scala> b < c
res40: Boolean = true

scala> c < a
res41: Boolean = true 
```

所以你有一个循环，这意味着你的订购不是总订购。`TreeSet`要求全排序（事实上，特征`Ordered`要求全排序——部分订单有一个特定的特征）。

让我们再创建两个节点来说明为什么会导致问题：

```
val d = Entry(Some(0), 1)
val e = Entry(Some(2), 4) 
```

所以，d < a < b < e。一种可能的树是：

```
 b
     / \ 
    a   e
   /
  d 
```

现在，如果您尝试`c`在这棵树中查找，您将首先与 比较`c`，`b`并发现它`c`大于`b`。这意味着您只会查看包含 的正确分支，`e`而您将永远找不到`d`。**

# javascript - 如何在使用 node.js 时从 URL 中获取 Id

> ID：12160668
> 
> 赞同：23
> 
> 时间：2012-08-28T13:47:42.613
> 
> 标签：javascript, node.js, express

我很新，`Javascript`并且`node.js`我正在尝试创建一个`REST API`，并且网址将采用这种形式。

1.  `/user/{userId}/docs`

我正在尝试获取 的值`{userId}`，在`/user/5/docs`will的情况下`5`。

我可以尝试将其作为请求参数传递（在查询字符串或正文中，取决于`GET`or`POST`方法），但是当它形成时，url 看起来更直观。此外，还有更多类似的 url。

我想知道是否有像 express 这样的节点模块提供这个。

我是一个传统的`Java`用户和`Jersey`框架，用于在`Java`.

谢谢， 图科

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-28T14:03:54.697

花一些时间阅读[文档](http://expressjs.com/api.html#req.params)。Express 使用`:`来表示路由中的变量：

```
app.get('/user/:id/docs', function(req, res) {
    var id = req.params.id;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T13:59:54.410

在服务器脚本中写入以下内容：

```
var http = require('http');
var server = http.createServer(function (request, response) {
    var url = request.url; //this will be /user/5/docs
    url.id = url.split("/")[2]; // this will be 5
    response.writeHead(200, {'Content-Type' : 'text/html'});
    response.end("Id is = " + url.id);
});
server.listen(8000, '127.0.0.1'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:06:32.370

```
var pathName = url.parse(request.url).pathname;
var id = pathName.split("=");
var userId = id[1]; 
```

# c# - 更改数据库中的表名并保持与 Linq 的关联

> ID：12160671
> 
> 赞同：0
> 
> 时间：2012-08-28T13:47:48.470
> 
> 标签：c#, .net, linq

我正在使用 LINQ to SQL 连接到我的数据库并将表映射到对象。

现在我想更改我的数据库中的一个表的名称，但是在我的`dbml`文件中替换它我还必须在我的应用程序中的很多地方替换新名称......嗯

所以我想知道 - 是否可以更改数据库中表的名称并自动反映代码中的更改？是否有任何重构实用程序来获得这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:16:31.843

我不知道你会如何想象这个工作。我真的不能。假设您将 table 重命名`Product`为`Produce`. 当恰好添加了新表时，自动化工具如何知道该表已重命名而不是删除？

如果您想重命名数据库表并将其映射到具有其先前名称的类，您唯一能做的（据我所知）就是更改 dbml 文件中的表名：

![在此处输入图像描述](../Images/3ff9db6e2b82a6e46d7e3b3c9b0447f3.png)

# python - 抓取多个 URL 的 Scrapy 方法

> ID：12160673
> 
> 赞同：1
> 
> 时间：2012-08-28T13:47:50.157
> 
> 标签：python, scrapy

我有一个需要大量数据抓取的项目。

我一直在研究 Scrapy，到目前为止我对它印象非常深刻，但我正在寻找执行以下操作的最佳方法：

1）我想抓取多个 URL 并为每个要抓取的 URL 传递相同的变量，例如，假设我想从 Bing、Google 和 Yahoo 返回关键字“python”的最高结果。

我想抓取`http://www.google.co.uk/q=python`，`http://www.yahoo.com?q=python`并且`http://www.bing.com/?q=python`（不是实际的 URL，但你明白了）

我找不到使用关键字指定动态 URL 的方法，我能想到的唯一选择是在 PHP 或其他构建 URL 的文件中生成一个文件，并指定 scrapy 来抓取 URL 中的链接。

2) 显然每个搜索引擎都有自己的标记，所以我需要区分每个结果以找到相应的 XPath 以从中提取相关数据

3）最后，我想将抓取项目的结果写入数据库（可能是 redis），但只有当所有 3 个 URL 都完成抓取时，基本上我想从 3 个搜索引擎建立一个“配置文件”和将输出结果保存在一个事务中。

如果有人对这些观点有任何想法，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:17:49.677

1）在BaseSpider中，有一个`__init__`方法可以在子类中被覆盖。这是 start_urls 和 allowed_domains 变量的声明设置的地方。如果您有一个 url 列表，在运行蜘蛛之前，您可以在此处动态插入它们。

例如，在我构建的一些蜘蛛中，我从 MongoDB 中提取预先格式化的 URL 组，并在一次批量插入中将它们插入到 start_urls 列表中。

2)这可能有点棘手，但您可以通过查看响应对象 ( `response.url`) 轻松查看抓取的 URL。您应该能够检查该 url 是否包含“google”、“bing”或“yahoo”，然后为该类型的 url 使用预先指定的选择器。

3）我不太确定＃3是否可能，或者至少不是没有一些困难。据我所知，start_urls列表中的url不是有序爬取的，各自独立到达管道。我不确定如果没有一些严重的核心黑客攻击，您将能够收集一组响应对象并将它们一起传递到管道中。

但是，您可能会考虑暂时将数据序列化到磁盘，然后稍后将数据批量保存到数据库中。我构建的其中一个爬虫会接收大约 10000 个 URL 组。我没有进行 10000 次单项数据库插入，而是将 url（和收集的数据）存储在 BSON 中，然后再将其插入 MongoDB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:15:41.947

我会为此使用机械化。

```
import mechanize
br = mechanize.Browser()
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
br.set_handle_robots(False)
response = br.open('https://www.google.ca/search?q=python')
links = list(br.links()) 
```

它为您提供了所有链接。或者你可以按类过滤掉它们：

```
links = [aLink for aLink in br.links()if ('class','l') in aLink.attrs] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T00:39:46.087

您可以使用“-a”开关为蜘蛛指定一个键值对，这可以指示特定的搜索词

```
scrapy crawl <spider_name> -a search_word=python 
```

# javascript - jQuery命名空间和使用“this”

> ID：12160674
> 
> 赞同：0
> 
> 时间：2012-08-28T13:47:49.977
> 
> 标签：javascript, jquery, plugins

我的对象/函数范围和对某事的一般理解有问题。我在 doc ready 中调用 jQuery 函数，如下所示：

```
$("#interactiveQA .actionTile").on('click',function(){
    $(this).activeTiles("init");
}); 
```

然后我在这里创建脚本：

```
(function($) {

    var methods = {
        init: function() {
            var tileClicked = $(this).attr('id');
        }
    };

    $.fn.activeTiles = function(method) {

        // Method calling logic
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.slider');
        }
    };

})(jQuery); 
```

**这是我想要找出的。尽可能从技术上讲，您能否解释一下为什么 var tileClicked = $(this)attr('id') 在其当前位置不起作用？您能否详细解释一下您会采取哪些不同的做法或最佳实践等？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:49:18.927

Typo:

```
$(this).attr('id'); 
```

Note the `.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:55:57.813

这通常是我尝试设置插件构造函数的方式：

```
$.fn.whatever = function (method) {
    var args = arguments;
    var argss = Array.prototype.slice.call(args, 1);

    return this.each(function () {
        $this = $(this);
        if (methods[method]) {
            methods[method].apply($this, argss);
        }
        else if (typeof method === "object" || !method) {
            methods.init.apply($this, args);
        }
        else {
            $.error("Method " + method + " does not exist on jQuery.whatever");
        }
    });
}; 
```

我不确定它是否能解决你的问题，但我过去没有遇到过问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:55:26.920

如果您的`this`内部`init`已经是一个 jQuery 对象，也许您不应该使用`$(this)`，而只需编写`this`，如下所示：

```
 init : function( ) { 
       var tileClicked = this.attr('id');
     } 
```

# git - .gitignore 中的合并冲突

> ID：12160676
> 
> 赞同：27
> 
> 时间：2012-08-28T13:47:53.720
> 
> 标签：git, github

我有 2 个分支，`master`并且`newfeature`. 当我想合并`newfeature`到`master`时，我使用了：

```
git checkout master
git merge newfeature 
```

我得到错误：

```
Auto-merging .gitignore
CONFLICT (content): Merge conflict in .gitignore
Automatic merge failed; fix conflicts and then commit the result. 
```

我打开了`.gitignore`，现在看起来一团糟，文件的最后一部分看起来像

```
<<<<<<< HEAD
public/img/ignore
=======
public/img/profiles
public/blog
public/recommendation
>>>>>>> newfeature 
```

发生了什么事，应该如何解决这个问题，以便我可以将分支合并到`master`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-28T13:52:51.800

您在两个分支中都编辑了 .gitignore。现在，git 不确定每个副本中的哪些行是正确的，因此它要求您解决它们。

这些行：

```
<<<<<<< HEAD
public/img/ignore
======= 
```

是主文件副本中出现的内容。

和

```
=======
public/img/profiles
public/blog
public/recommendation
>>>>>>> newfeature 
```

在分支新功能中

您应该只需要编辑文件，因为您希望它最终出现。然后...

```
git add .gitignore
git commit 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-28T13:51:03.217

只需编辑`.gitignore`文件即可解决冲突：

**前**

```
<<<<<<< HEAD
public/img/ignore
=======
public/img/profiles
public/blog
public/recommendation
>>>>>>> newfeature 
```

**后**

```
public/img/ignore
public/img/profiles
public/blog
public/recommendation 
```

然后：

`git add .gitignore`

`git commit`

自动生成的提交消息应该出现，接受它（保存并关闭），它就完成了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T13:50:26.650

修复文件中的冲突`.gitignore`，添加更新的版本，然后提交：

```
vim .gitignore
# assuming you want all 4 lines: simply remove the conflict markers (<<<<<<, ======, and >>>>>)
git add .gitignore
git commit 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T13:53:57.060

发生的事情是发生了合并冲突：两个分支在不同的流中“同时”更改了文件。您可以在“newfeature”部分和 HEAD 部分看到其他分支所做的更改。

您需要做的是编辑该文件，使其包含您想要的内容，添加要遵循的内容，然后提交。这称为合并提交。

现在，我上面所说的是手动“手动”进行合并。这可能是最容易理解的。如果已配置，您还可以使用`git mergetool`命令通过可视化工具执行此操作，或者使用“git merge”和一些策略来告诉它如何处理冲突。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T13:50:07.407

用于`git mergetool`解决冲突（或者只是手动修复它；这不是一个特别难解决的情况），然后重新提交。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-28T13:50:50.080

您应该手动合并您的 .gitignore，然后将其添加到索引中

```
$ git add .gitignore 
```

您可以在这里获得合并的基础知识：http: [//git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-28T13:54:50.123

Git 的自动合并失败。当尝试合并分支/推送内容时，当不同分支/存储库中的同一文件同时发生更改时，通常会发生这种情况。

在分支 newfeature 上对 .gitignore 所做的修改与在 master 上所做的修改相冲突。line:`<<<<<<< HEAD`表示对 master 所做的修改，位于此行之后，而 line`>>>>>>> newfeature`表示对 newfeature 所做的修改，位于此行之前。这两个修改由 分隔`=======`。

您应该手动编辑文件并保留/合并两部分中有用的内容。然后你应该提交（在删除`<<<<HEAD`,`=====`和`>>>newfeature`行之后）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-01T18:17:03.147

Repo 在创建时已经有一个文件。在创建项目时再进行 Visual Studio 项目。以冲突告终。删除本地 gitignore 并将本地重新提交到 repo 以解决冲突。

# php - 只是无法摆脱 html 字符串中的 ` ` 字符

> ID：12160677
> 
> 赞同：1
> 
> 时间：2012-08-28T13:47:53.157
> 
> 标签：php, string

这是我要清理的字符串。

```
 '&#13;        &#13;    <span>CR - CROPLAND</span>&#13;' 
```

这是我的呼吁声明：

```
 trim(strip_tags(clean_string($leftTd->innerhtml()))) 
```

这是我试图清理它的功能，但它不起作用。

```
 function clean_string($string){
   for($control = 0; $control < 32; $control++) {
      $string = str_replace(chr($control), "", $string) ;
   }
   return $string ;
} 
```

我也试过：

```
 // $string = ereg_replace("[^A-Za-z0-9\-\./,']", " ",$string) ; 
```

，但它不起作用。

帮助！具体来说，我试图摆脱`&#13;`. 它到底是什么。谷歌搜索没有帮助\

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:51:26.697

在运行替换之前，使用[html_entity_decode()解码](http://php.net/manual/en/function.html-entity-decode.php)[HTML 实体](https://stackoverflow.com/tags/html-entities/info)。

```
function clean_string($string){
   $string = html_entity_decode($string);
   //replace here
   return $string ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:51:35.277

您将不得不搜索字符串“ `&#13;`”，因为它实际上是这样打印的。它还没有被翻译成它所代表的特殊字符。

```
str_replace("&#13;", "", $string); 
```

或更有用的是：

```
function clean_string($string){
   for($control = 0; $control < 32; $control++) {
      $string = str_replace("&#$control;", "", $string) ;
   }
   return $string ;
} 
```

注意：字符 13 显然是一个“垂直标签”……很有趣。[http://www.robelle.com/smugbook/ascii.html](http://www.robelle.com/smugbook/ascii.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:53:18.070

只需使用[`html_entity_decode();`](http://php.net/manual/en/function.html-entity-decode.php)：

```
$output = html_entity_decode($input); 
```

# eclipse - 将 HttpService 与 Gemini Web 一起使用

> ID：12160678
> 
> 赞同：0
> 
> 时间：2012-08-28T13:47:53.323
> 
> 标签：eclipse, eclipse-virgo, eclipse-gemini, httpservice

我如何在 Gemini Web 中使用 OSGi HTTPService。

最好的问候， 凯沙夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:58:21.220

插件**org.eclipse.equinox.http.servlet**提供了一个 servlet 实现，它创建了一个 HTTPService，当使用根上下文“/”和 url 模式“/*”注册时，它通过代理 Servlet 将所有请求重定向到 HttpService。

您还可以使用插件**org.eclipse.equinox.http.registry**通过扩展点为 HTTPService 创建条目。

最好的问候， 凯沙夫

# c++ - 单例：C++ 共享 dll

> ID：12160679
> 
> 赞同：3
> 
> 时间：2012-08-28T13:48:05.110
> 
> 标签：c++, c, windows, dll, shared-libraries

我正在创建一组共享单个 dll 的 dll。

共享库有一个单例。

运行时，一些操作系统加载的库会生成我的单例的新实例。如何强制使用我的 dll 的所有库和程序**始终**使用我的单例的一个实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:54:39.947

您不能只在多个进程之间共享您的单例实例。但您可以为此目的使用共享内存：

下面的示例演示 DLL 入口点函数如何使用文件映射对象来设置可由加载 DLL 的进程共享的内存。共享的 DLL 内存仅在加载 DLL 时才会存在。应用程序可以使用 SetSharedMem 和 GetSharedMem 函数来访问共享内存。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686958(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686958(v=vs.85).aspx)

# iframe - 如何在 Google Chrome 扩展程序中阻止 iframe

> ID：12160689
> 
> 赞同：1
> 
> 时间：2012-08-28T13:48:45.323
> 
> 标签：iframe, google-chrome-extension

谷歌浏览器可以选择禁用 flash 和 java 并且只在用户点击时运行它们，如何创建可以做到这一点的扩展程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T15:07:48.427

您可以使用[API的](https://developer.chrome.com/extensions/webRequest)[`onBeforeRequest`事件](https://developer.chrome.com/extensions/webRequest#event-onBeforeRequest)来实现此功能。使用和 extraInfoSpec创建一个过滤器。然后，在事件监听器中返回。[`webRequest`](https://developer.chrome.com/extensions/webRequest)`type: ['sub_frame']``['blocking']``{cancel:true}`

最小的例子：

```
chrome.webRequest.onBeforeRequest.addListener(function(details) {
    // Save the data in `details` for later use
    // The data must be associated with the `tabId` and `frameId`, so that it
    //  can be used later
    if (your_method_says_block_it())
       return {cancel: true};
}, {
    urls: ['*://*/*'],
    types: ['sub_frame']
}, ['blocking']); 
```

清单文件：

```
 ...
    "permissions": ["webRequest", "webRequestBlocking", "*://*/*"]
 ... 
```

*   `webRequest`启用 API 需要该权限。
*   需要该`webRequestBlocking`权限才能使请求处理同步，以启用修改（取消）请求的功能。
*   需要`*://*/*`权限才能允许访问主机

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:29:00.900

只需尝试 adblock 或禁用 chrome://settings/content 下所需的内容

# jquery-ui - How do I get data from 0 of the index $.each

> ID：12160694
> 
> 赞同：0
> 
> 时间：2012-08-28T13:48:55.077
> 
> 标签：jquery-ui, jquery

How do I get value.email from only position 0 of the index?

I only want the value.email from the first item returned in my JSON call.

```
$.each(data.DATA, function(index, value) {
    console.log(value.EMAIL);

}); 
```

I have tried the following but this generates an error.

```
$.each(data.DATA[0], function(index, value) {
    console.log(value.EMAIL);

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:50:20.860

Lose the `$.each`, just do `console.log(data.DATA[0].EMAIL)`.

# matlab - Tight bounding box around PDF of MATLAB figure

> ID：12160699
> 
> 赞同：5
> 
> 时间：2012-08-28T13:49:16.573
> 
> 标签：matlab, pdf, figure, bounding-box

When creating a simple figure in MATLAB and saving it as PDF, the resulting PDF file will have a luxurious bounding box.

```
plot(1,1,'x')
print(gcf, '-dpdf', 'test.pdf'); 
```

(From the ratio of the output it seems they always put in on an A page.)

Is there a simple way to get a tight bounding box around the PDF?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:18:02.857

您可以按如下方式格式化边界框

```
figure(1)
hold on;
plot(1,1,'x')

ps = get(gcf, 'Position');
ratio =  ps(4) / ps(3)
paperWidth = 10;
paperHeight = paperWidth*ratio;

set(gcf, 'paperunits', 'centimeters');
set(gcf, 'papersize', [paperWidth paperHeight]);
set(gcf, 'PaperPosition', [0    0   paperWidth paperHeight]);

print(gcf, '-dpdf', 'test2.pdf'); 
```

对于较小的边框，您可以调整`paperposition`属性，例如

```
set(gcf, 'PaperPosition', [-0.5   -0.5   paperWidth+0.5 paperHeight+0.5]); 
```

~编辑~

正如 Space47 的回答所指出的，我更正了比率的计算，因为它是错误的。（感谢@Space47）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-20T09:32:08.420

一个老问题，但我会回答，因为谷歌在 Mathworks 自己的帮助页面之前为我找到了这个（对不起，没有足够的声誉来发表评论到以前）。反正

```
ratio = (ps(4)-ps(2)) / (ps(3)-ps(1)) 
```

应该

```
ratio = ps(4)/ps(3); 
```

作为第一个值 gcf.Position 是屏幕上的 [x,y] 位置，与大小无关。

Matlab(R) 也给出了答案，特别是如果您不想/不需要调整图形大小： [https://se.mathworks.com/help/matlab/creating_plots/save-figure-with-minimal-white-space。 html](https://se.mathworks.com/help/matlab/creating_plots/save-figure-with-minimal-white-space.html)

```
fig = gcf;
fig.PaperPositionMode = 'auto'
fig_pos = fig.PaperPosition;
fig.PaperSize = [fig_pos(3) fig_pos(4)]; 
```

# c# - Scott Gu Dynamic Linq Convert Datetime to ShortDatetime

> ID：12160701
> 
> 赞同：0
> 
> 时间：2012-08-28T13:49:19.150
> 
> 标签：c#, asp.net, linq, tsql, dynamic-linq

I am using the Scott Gu Dynamic `Linq` class and I am trying to convert a datetime to return a short datetime before databinding the result set to a gridview in `ASP.net`. Now, I know that I can go through the gridview row databound event and check each cell to see if it is a date, and if it is, convert the date to the shortdate, however that is very cumbersome and I do not feel it is very efficient.

I am building my select statement in DynamicLinq as follows:

Filter gets its information as follows:

```
 foreach (KeyValuePair<string,string> kvp in dictFilters)
        {
            filter += kvp.Key + " as " + kvp.Value.Replace("-", "_").Replace(" ", "_") + ",";
        }

        var result = db.ViewADHOCContractInfos.Select("new(" + filter + ")"); 
```

which gives me the result set of:

```
 {SELECT [t0].[dtmAward] AS [Award_Date], [t0].[guidFromId],  [t0].[strFundingNumber] AS [Funding_Number], [t0].[dtmCertified] AS [Certified_Date], [t0].[strFundingNumberStatus] AS [Funding_Status]
FROM [dbo].[ViewADHOCInfo] AS [t0]
} 
```

Now what I want is this:

```
 {SELECT Convert(VarChar, [t0].[dtmAward], 101) AS [Award_Date], [t0].[guidFromId],  [t0].[strFundingNumber] AS [Funding_Number], [t0].[dtmCertified] AS [Certified_Date], [t0].[strFundingNumberStatus] AS [Funding_Status]
FROM [dbo].[ViewADHOCInfo] AS [t0]
} 
```

Is it possible to add a SQL convert to by select statement using Dynamic Linq?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:55:26.920

你的是格式问题：

只需在列上设置 DataFormatString 属性，如下所示：

```
DataFormatString="{0:MM/dd/yyy}" 
```

完整的上下文：

```
<asp:BoundField DataField="DateColumn" 
                    HeaderText="Date" 
                    DataFormatString="{0:MM/dd/yy}" /> 
```

或任何适合您情况的格式，日期将被正确格式化。

# macos - NSWindow does not become active/key when activating the app

> ID：12160717
> 
> 赞同：1
> 
> 时间：2012-08-28T13:49:59.727
> 
> 标签：macos, nswindow

I have a single window Mac OSX app. The user can click 'x' (windowShouldClose() fires) and then I will just order the window back (ie, not exit the app).

If I try to bring the app back by clicking it from the dock or via cmd-tab, it doesn't become active.

I'm assuming I need to explicitly make the window key/active when it's clicked from the doc.

If so, what's the message sent to the app once the user clicks on the app from the dock?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-05T08:42:11.963

您应该像这样从 NSWindowController 继承：

```
class MyWindowController: NSWindowController, NSWindowDelegate {

    func windowShouldClose(_ sender: NSWindow) -> Bool {
        NSApp.hide(nil)
        return false
    }
} 
```

然后你只需要打开你的 Main（或任何你有的名字）故事板，选择 Window Controller 并将你的 MyWindowController 设置为它：

[![在此处输入图像描述](../Images/716c74bb036f48238ea005a3d311df0d.png)](https://i.stack.imgur.com/kRBOi.png)

[资源](https://stackoverflow.com/a/54530275/4519527)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T14:06:57.153

将这些方法添加到应用程序委托中：

```
- (BOOL) applicationShouldOpenUntitledFile: (NSApplication *) sender {
    return YES;
}

- (BOOL) applicationOpenUntitledFile: (NSApplication *) theApplication {
    // Reopen your window here
    return YES;
} 
```

# c# - MSBUILD output using C#

> ID：12160718
> 
> 赞同：2
> 
> 时间：2012-08-28T13:50:01.330
> 
> 标签：c#, msbuild, error-list

I am trying to build a solution file using C# code using WPF application. Please find the code snippet below:

```
var buildEngine = new Engine();
var project = new Project(buildEngine);
project.Load(<pathToCsProjFile>);
project.SetProperty("Configuration", "Debug");

var success = project.Build();    
if (success)
{
    MessageBox.Show("Build Succeeded");
}
else
{
    MessageBox.Show("Build Failed");
} 
```

When I run the code above, variable "success" holds the value of false. Is there any way to capture the project output and display it in a textblock or any WPF control. I need to see the build errors if any in the application.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:56:38.900

是的，有一种方法可以查看所有构建错误，您需要实现[`ILogger`](http://msdn.microsoft.com/en-us/library/microsoft.build.framework.ilogger)接口并将该实例传递给[`Project.Build(ILogger)`](http://msdn.microsoft.com/en-us/library/dd234351)方法。

对于一个简单的示例，您可以查看[msdn 页面](http://msdn.microsoft.com/en-us/library/microsoft.build.framework.ilogger)示例部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:19:05.427

在构建参数中，您可以提供这样的记录器

```
new BuildParameters() 
                {
                    DetailedSummary = true,
                    Loggers = new List<ILogger>(){logger}
                } 
```

那么您将必须构建一个自定义记录器，该记录器输出到字符串或流，以便稍后您可以读取它

# .htaccess - 移动版本由不同的 PHP 文件呈现，保留友好的 URL

> ID：12160723
> 
> 赞同：1
> 
> 时间：2012-08-28T13:50:12.953
> 
> 标签：.htaccess, url-rewriting, friendly-url

我有一个关于书籍的网站。目前，它已经在我的 .htaccess 文件中有一些 URL 重写规则，因此这样的 URL 更友好：

[http://www.example.com/book.php?book=xxx](http://www.example.com/book.php?book=xxx) -> [http://www.example.com/book/xxx.html](http://www.example.com/book/xxx.html)

规则：

RewriteRule ^book/([^/]+).html$ book.php?book=$1 [QSA,L]

现在我正在开发一个专门针对书籍部分的移动版本，这意味着 index.php 和所有其他页面保持不变。所以我想要这样的 URL（当用户代理被检测为移动小工具时）：

[http://www.example.com/mobile/m_book.php?book=xxx](http://www.example.com/mobile/m_book.php?book=xxx) -> [http://m.example.com/book/xxx.html](http://m.example.com/book/xxx.html)

我当前的解决方案（**不起作用**）正确地重写了 url，但随后服务器找不到用于呈现页面的 PHP，并且我在浏览器上收到“找不到服务器”。用于呈现常规书籍页面的 PHP 文件是 book.php，但仅负责呈现到移动设备的 PHP 文件位于子文件夹中，可以通过以下位置找到：mobile/m_book.php

```
RewriteEngine On

#To detect mobile browsers
RewriteCond %{HTTP_USER_AGENT} android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\ |maemo|midp|mmp|opera\ m(ob|in)i|palm(\ os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows\ (ce|phone)|xda|xiino [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\ wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r\ |s\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1\ u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(\ i|ip)|hs\-c|ht(c(\-|\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(\ |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\ |\/)|klon|kpt\ |kwc\-|kyo(c|k)|le(no|xi)|lg(\ g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-|\ |o|v)|zz)|mt(50|p1|v\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|\ )|webc|whit|wi(g\ |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-) [NC]
#To avoid loops
RewriteCond %{HTTP_HOST} !^m\.example\.com$ [NC]
#First Rewrite Rule
RewriteRule ^book/([^/]+)\.html$ http://m.example.com/m_book.php?book=$1 [QSA,L,R]

#Only the mobile request should be rendered by mobile/m_book.php
RewriteCond %{HTTP_HOST} ^m\.example\.com$ [NC]
RewriteRule ^book/([^/]+)\.html$ mobile/m_book.php?book=$1 [QSA,L,R]

#Otherwise (the already predefined rule)
RewriteRule ^book/([^/]+)\.html$ book.php?book=$1 [QSA,L] 
```

**这段代码有什么问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:30:22.017

“找不到服务器”很奇怪，我希望“找不到页面”。当用户代理是移动浏览器时，您正在使用外部重定向 [R] 到[http://m.example.com/m_book.php?book= $1。](http://m.example.com/m_book.php?book=)如果我理解正确，页面 /m_book.php 不存在，只有 /book.php 和 /mobile/m_book.php 存在。

因此，在您重定向到[http://m.example.com/m_book.php?book=](http://m.example.com/m_book.php?book=) $1 后，没有其他规则适用，这是您的最终（且不存在）页面。你不应该使用

```
#First Rewrite Rule
RewriteRule ^book/([^/]+)\.html$ http://m.example.com/mobile/m_book.php?book=$1 [QSA,L,R] 
```

它击中了正确的页面并且应该可以工作，但在浏览器中看起来很难看。

或者，如果您希望 URL 看起来不错

```
#First Rewrite Rule
RewriteRule ^book/([^/]+)\.html$ http://m.example.com/book/$1.html [QSA,L,R] 
```

哪个重定向，但是你的下一条规则

```
#Only the mobile request should be rendered by mobile/m_book.php
RewriteCond %{HTTP_HOST} ^m\.example\.com$ [NC]
RewriteRule ^book/([^/]+)\.html$ mobile/m_book.php?book=$1 [QSA,L,R] 
```

确实具有正确的条件和匹配规则，并且符合预期。

这是理论，我没有测试过。顺便说一句，我认为您不需要导致查询字符串组合的 [QSA] 标志，因为您有效地排除了查询字符串。

# ado - Visio RecordSet - 将行数据类型设置为来自不在设计器中的代码的超链接

> ID：12160729
> 
> 赞同：0
> 
> 时间：2012-08-28T13:50:33.490
> 
> 标签：ado, visio, adodb, recordset

我想在代码隐藏中设置以下内容：

Visio 2010 -> 外部数据 -> 列设置 -> 类型和单位 -> 超链接复选框

如何在自行创建的 adbo 记录集上设置此超链接标志？

```
object oMissing = System.Reflection.Missing.Value;
ADODB.Recordset rs = new Recordset();
rs.Fields.Append("DocId", DataTypeEnum.adVariant);
rs.Fields.Append("Title", DataTypeEnum.adVarChar, 255, FieldAttributeEnum.adFldIsNullable);
rs.Fields.Append("Link", DataTypeEnum.adVarChar, 4000, FieldAttributeEnum.adFldIsNullable);
rs.Open(Type.Missing, Type.Missing, CursorTypeEnum.adOpenStatic, LockTypeEnum.adLockBatchOptimistic);
rs.AddNew(oMissing, oMissing);
rs.Fields["DocId"].Value = doc.DocumentID.ToString();
rs.Fields["Title"].Value = doc.Title;
rs.Fields["Link"].Value = doc.Link; 
```

我虽然 FieldAttributeEnum.adFldIsRowURL 会好的，但是如果我设置它，我会得到一个 COMException，它说参数来自错误的类型。

有任何想法吗？问候，浮动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:29:26.317

您需要使用 DataColumn.SetProperty 方法。请参阅[http://msdn.microsoft.com/en-us/library/office/ff766436(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/office/ff766436(v=office.15).aspx)

# xml - XmlStreamWriter

> ID：12160731
> 
> 赞同：0
> 
> 时间：2012-08-28T13:50:38.820
> 
> 标签：xml, qt, xmlupdate

我是 Qt 的新手，我想使用 Qt 4 和 QxmlStreamwriter 更新（添加新节点和属性）一个 xml 文件，但是追加打开模式将光标设置在 enddocument 行之后的文件中......

有没有办法使用 QXmlStreamWriter 来实现？如果是这样，请给我一个示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:26:38.407

您将需要使用额外的节点重新写入文件。流接口 ( `QXmlStreamReader`/ `QXmlStreamWriter`) 比 DOM ( `QDomDocument`) 接口更复杂，但它的好处是内存要求较低。

通过 DOM 接口，您可以处理 XML 文档的内存表示。使用流接口，您可能需要构建和维护自己的表示。

流接口的示例代码：

```
QFile inputFile("in.xml");
if (! inputFile.open(QIODevice::ReadOnly))
  // error handling
QFile outputFile("out.xml");
if (! outputFile.open(QIODevice::WriteOnly))
  // error handling

QXmlStreamReader inputStream(&inputFile);
QXmlStreamWriter outputStream(&outputFile);

while (! inputStream.atEnd())
{
   inputStream.readNext();
   // manipulation logic goes here
   outputStream.writeCurrentToken(inputStream);
} 
```

DOM 接口的示例代码：

```
QFile inputFile("in.xml");
if (! inputFile.open(QIODevice::ReadOnly))
  // error handling

QDomDocument doc;
if (! doc.setContent(&inputFile))
  // error handling

// manipulation logic goes here

QFile outputFile("out.xml");
if (! outputFile.open(QIODevice::WriteOnly))
  // error handling

outputFile.write(doc.toByteArray()); 
```

# jquery - 使用 jquery 按值选择选定的选项

> ID：12160732
> 
> 赞同：0
> 
> 时间：2012-08-28T13:50:38.757
> 
> 标签：jquery, select, selectedvalue

为了使用 jquery 为 html 选择按值设置选定的选项，我这样做如下：

```
 $('#mySelectId option[value="avancement d\'échelon"]').attr("selected","selected"); 
```

是因为我的字符串值包含问题`'`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:53:47.940

您也可以只设置`.val()`选择框的 。

```
$('#mySelectId').val("avancement d'échelon"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:52:25.420

采用

```
$('#mySelectId option[value="avancement d\'échelon"]').attr("selected", true); 
```

反而。

还要删除选定的属性使用

```
$('#mySelectId option[value="avancement d\'échelon"]').attr("selected", false); 
```

# c++ - Xcode doesn't recognize the word "class"

> ID：12160733
> 
> 赞同：1
> 
> 时间：2012-08-28T13:50:44.030
> 
> 标签：c++, xcode, class

I'm trying to create a simple c++ class in Xcode.

i'm just typing:

> class Sculpture {
> 
> ...
> 
> };

and it doesn't let me do it, I get two errors:

> Unknown type name 'class'; did you mean 'Class'?
> 
> Expected ';' after top level declarator

Both on the same line of the class declaration.

i've tried to make a new file and it did not help.

the most strange part is that i have another 2-3 c++ classes working just fine

but they where not created by me so i'm not sure what are the differences.

Did anyone see something like that before?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:03:00.630

我想你在非 C++ 编译单元中包含的 .h 文件中声明你的类。因此，请检查您的 .h 文件是否仅包含在 .cpp/.cc 或 .mm 文件中，而不包含在 .c 或 .m 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:57:56.653

最可能的原因是源文件被编译为 C，而不是 C++。语言由文件扩展名决定；确保它是`.cc`,`.cpp`或`.cxx`用于普通 C++ 或`.mm`用于 Objective C++。

# api - TFS API MergeContent returns false without showing merge tool

> ID：12160736
> 
> 赞同：1
> 
> 时间：2012-08-28T13:50:54.907
> 
> 标签：api, tfs

I am calling the MergeContent method on a TFS workspace (App.Instance.TFSWorspace in my example) as shown below:

```
bool result = App.Instance.TFSWorkspace.MergeContent(Conflict, true); 
```

This results in 'result' being set to false but the Merge Tool is never shown even though the second parameter explicity states to use the external merge tool.

The code was originally placed in a RelayCommand following the MVVM model. Just to make sure this wasn't the issue I moved it into the code behind and the same thing still happens. Also, I'm using the default TFS tool, I don't have any 3rd party compare/merge tool configured.

Does anyone have any idea why this would happen?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:11:30.480

发生这种情况的几个潜在原因：

1.  diffmerge.exe 不在您正在运行的程序的路径中 默认的外部合并工具是 diffmerge.exe，可在 \Microsoft Visual Studio 10.0\Common7\IDE 中找到（可能因您的版本而异）。如果这不在您的程序路径中，则在发生冲突时将无法启动 diffmerge 过程

2.  程序没有 UI 外壳 如果您的程序是服务或 Web 应用程序，则可能会发生这种情况。您可能不是这种情况，但从描述中我不能完全确定

最有可能的问题是上面的#1。我会先检查一下。

# sql-server - 在 SQL Server 中，有没有办法将单行数据作为 2 列表返回？

> ID：12160743
> 
> 赞同：2
> 
> 时间：2012-08-28T13:51:11.390
> 
> 标签：sql-server

我有一个返回单行数据的查询。假设它看起来像这样（带有列标题）。

```
Fruit    | Veg     | Meats   | Nuts    |
----------------------------------------
Apple      Lettuce   Veal      Almond 
```

而不是这个，我想将此单行作为两列表返回，列/字段名称在最左边的列中。像这样：

```
FieldName  | Value    |
-----------------------
Fruit        Apple
Veg          Lettuce
Meats        Veal
Nuts         Almond 
```

似乎应该有一些非痛苦的方式来实现这一点，但如果有的话，我似乎找不到它。撞到一堵砖墙。这甚至可能吗？

非常感谢您的任何意见。

**编辑：** 查询返回的结果不是静态的，所以我将无法明确定义列标题。

**编辑 2：** 我正在尝试让其中一些建议发挥作用，但仍然无法让它在不止一列中发挥作用。这是我的代码：

```
SELECT
  TOP 10
  FieldName,
  CAST(FieldValue as varchar(MAX)) As FieldValue
FROM Meter M
UNPIVOT([FieldValue] FOR FieldName IN ([MeterName],[MID])) UP
WHERE ClientNumber = 12300 
```

每次，我都会收到错误消息“消息 8167，级别 16，状态 1，第 4 行列“MID”的类型与 UNPIVOT 列表中指定的其他列的类型冲突。”

我已经查过了，这似乎是与列类型/长度相关的问题，无论我如何转换 FieldValue，同样的错误。有什么想法吗？

**编辑 3：解决列冲突...**

从原始表转换结果不起作用，所以我必须使用派生表并在那里转换，以便返回到 PIVOT 的列都是相同的数据类型。奇怪，但我能找到的唯一解决方案会运行。

```
SELECT
  FieldName,
  CAST(FieldValue as varchar(MAX)) As FieldValue,
FROM 
(
  /* 
  Derived table so that we can control the column
  types for everything selected, because PIVOT demands
  that every pivoted column be of the same data type and
  length.
  */
  SELECT
    TOP 1
    CAST(M.MeterName as varchar(MAX)) As MeterName,
    CAST(M.MID as varchar(MAX)) As MID,
    CAST(D.DeviceType as varchar(MAX)) As DeviceType
  FROM Meter M
    INNER JOIN CurrentDevice D ON
      D.ClientNumber = M.ClientNumber AND
      D.MID = M.MID
  WHERE 
    M.ClientNumber = 12300
) T
UNPIVOT([FieldValue] FOR FieldName IN ([MeterName],[MID],[DeviceType])) UP 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T14:07:37.930

对于 SQL Server 2005+，您可以使用`UNPIVOT`：

```
SELECT FieldName, Value
FROM YourTable T
UNPIVOT([Value] FOR FieldName IN (Fruit, Veg, Meats, Nuts)) UP 
```

[这是一个 SQL Fiddle](http://sqlfiddle.com/#!3/698d9/1)供您尝试。

**针对新要求进行了更新**

好的，所以如果您不知道表的列，则需要动态 SQL。首先，转到[此链接](http://www.sommarskog.se/dynamic_sql.html)。然后您可以尝试以下操作：

```
DECLARE @Fields NVARCHAR(MAX), @Sql NVARCHAR(MAX)

SELECT @Fields = STUFF((SELECT DISTINCT ',' + QUOTENAME(Name) 
                        FROM sys.columns
                        WHERE OBJECT_ID = OBJECT_ID('YourTable')
                        FOR XML PATH('')),1,1,'')

SET @Sql = '
SELECT FieldName, Value
FROM YourTable T
UNPIVOT([Value] FOR FieldName IN ('+@Fields+')) UP
'

EXEC sp_executesql @sql 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T14:20:06.790

你可以使用动态 UNPIVOT 查询

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols =  STUFF((SELECT ','+ QUOTENAME( name) from sys.columns 
where object_id= object_id('your_table')
FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'select FieldName, Value
FROM your_table T
UNPIVOT([Value] FOR FieldName IN ('+@cols+')) P'

exec(@query) 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/89e20/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:54:11.357

您可以`PIVOT`为此使用：http: [//msdn.microsoft.com/en-us/library/ms177410](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx) (v=sql.105).aspx 。

# database - 如何在生产模式下使用数据库演化？

> ID：12160755
> 
> 赞同：3
> 
> 时间：2012-08-28T13:51:46.277
> 
> 标签：database, playframework, playframework-2.0, production-environment, playframework-evolutions

目前，我的进化以两种方式使用（在 Play！2 应用程序中）：

1.  它们用于定义数据库的结构
2.  它们用于使用一些默认值填充数据库。

Downs 通常会破坏 Ups 所做的任何改变。我没有在 prod 模式下使用进化，但我知道它们是在应用程序启动时应用的。

这是否意味着更新应用程序会导致重新应用进化，从而导致我丢失所有数据？如果是这样，我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:02:51.297

如果您在生产模式下启用 Evolutions，则不会执行脚本的 Downs 部分。为此，您需要通过删除 conf/evolutions/default/1.sql 的前 2 行注释行来禁用 Evolution 文件的自动生成：

```
# --- Created by Ebean DDL
# To stop Ebean DDL generation, remove this comment and start using Evolutions

# --- !Ups
... 
```

您还可以查看此问题以了解更多详细信息：[玩！框架 - Evolutions 的数据库问题](https://stackoverflow.com/questions/12123052/play-framework-database-issue-with-evolutions/12130881#12130881)

# c# - 删除禁用的 TabItem 上的浮雕样式

> ID：12160758
> 
> 赞同：1
> 
> 时间：2012-08-28T13:51:51.470
> 
> 标签：c#, wpf, .net-4.0, tabitem

我有以下内容`TabItem`（通过说“TabItem”，我实际上是指激活选项卡的按钮）：

```
<TabItem RequestBringIntoView="activateTab_Click" Name="tabImplantation" Width="270" Height="138" BorderBrush="{x:Null}" IsEnabled="False" Foreground="#FF075C81">
    <TabItem.Header>
        <StackPanel Orientation="Horizontal">
            <Image Width="148"  Margin="-5,0,0,0" VerticalAlignment="Stretch" Name="implantation_pic" Source="/project;component/Images/implantation_a.jpg" />
        </StackPanel>
    </TabItem.Header>
    ...
</TabItem> 
```

如您所见，它是一个自定义对象，其中`TabItem`包含一个`Image`对象。我已经通过设置删除了边框，`BorderBrush="{x:Null}"`效果很好。

但是，如果它被禁用（`IsEnabled="False"`），它会呈现某种内部浮雕阴影或类似的东西（也可能是边框，我不确定）。

如果它被禁用，如何在没有这个边框的情况下渲染它？另请参阅下面的图片。提前致谢！

请注意，我不是 ac# 专家，我只是在做一些重新设计。程序本身的开发是外包的。

![TabItem 已启用并正确呈现](../Images/d66e79964d860b99b5b6bb8719c948a4.png)

![TabItem 被禁用并呈现边框](../Images/8e1b7b08ad9c31737d1715bb23977dc3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T08:41:32.693

要获得您想要的外观，您必须编辑`TabItem`'s [`ControlTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.controltemplate%28v=vs.100%29.aspx)（使用 Blend 很容易做到这一点）。

当控件被禁用时，没有呈现“内部浮雕阴影”，它可能是边框效果。这是在（将其添加到您的或）`ControlTemplate`时禁用该边框的编辑版本：`IsEnabled = false``Window.Resources``Application.Resources`

```
<Style x:Key="TabItemFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="3,3,3,1" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <SolidColorBrush x:Key="TabControlNormalBorderBrush" Color="#8C8E94"/>
    <LinearGradientBrush x:Key="ButtonNormalBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#F3F3F3" Offset="0"/>
        <GradientStop Color="#EBEBEB" Offset="0.5"/>
        <GradientStop Color="#DDDDDD" Offset="0.5"/>
        <GradientStop Color="#CDCDCD" Offset="1"/>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="TabItemHotBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#EAF6FD" Offset="0.15"/>
        <GradientStop Color="#D9F0FC" Offset=".5"/>
        <GradientStop Color="#BEE6FD" Offset=".5"/>
        <GradientStop Color="#A7D9F5" Offset="1"/>
    </LinearGradientBrush>
    <SolidColorBrush x:Key="TabItemSelectedBackground" Color="#F9F9F9"/>
    <SolidColorBrush x:Key="TabItemHotBorderBrush" Color="#3C7FB1"/>
    <SolidColorBrush x:Key="TabItemDisabledBackground" Color="#F4F4F4"/>
    <SolidColorBrush x:Key="TabItemDisabledBorderBrush" Color="#FFC9C7BA"/>
    <Style TargetType="{x:Type TabItem}">
        <Setter Property="FocusVisualStyle" Value="{StaticResource TabItemFocusVisual}"/>
        <Setter Property="Foreground" Value="Black"/>
        <Setter Property="Padding" Value="6,1,6,1"/>
        <Setter Property="BorderBrush" Value="{StaticResource TabControlNormalBorderBrush}"/>
        <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Grid SnapsToDevicePixels="true">
                        <!--previous (default) border brush value was BorderBrush="{TemplateBinding BorderBrush}"-->
                        <Border x:Name="Bd" BorderBrush="{x:Null}" BorderThickness="1,1,1,0" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter x:Name="Content" ContentSource="Header" HorizontalAlignment="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="Background" TargetName="Bd" Value="{StaticResource TabItemHotBackground}"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter Property="Panel.ZIndex" Value="1"/>
                            <Setter Property="Background" TargetName="Bd" Value="{StaticResource TabItemSelectedBackground}"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="false"/>
                                <Condition Property="IsMouseOver" Value="true"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="BorderBrush" TargetName="Bd" Value="{StaticResource TabItemHotBorderBrush}"/>

                        </MultiTrigger>
                        <Trigger Property="TabStripPlacement" Value="Bottom">
                            <Setter Property="BorderThickness" TargetName="Bd" Value="1,0,1,1"/>
                        </Trigger>
                        <Trigger Property="TabStripPlacement" Value="Left">
                            <Setter Property="BorderThickness" TargetName="Bd" Value="1,1,0,1"/>
                        </Trigger>
                        <Trigger Property="TabStripPlacement" Value="Right">
                            <Setter Property="BorderThickness" TargetName="Bd" Value="0,1,1,1"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="TabStripPlacement" Value="Top"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Margin" Value="-2,-2,-2,-1"/>
                            <Setter Property="Margin" TargetName="Content" Value="0,0,0,1"/>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="TabStripPlacement" Value="Bottom"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Margin" Value="-2,-1,-2,-2"/>
                            <Setter Property="Margin" TargetName="Content" Value="0,1,0,0"/>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="TabStripPlacement" Value="Left"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Margin" Value="-2,-2,-1,-2"/>
                            <Setter Property="Margin" TargetName="Content" Value="0,0,1,0"/>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="TabStripPlacement" Value="Right"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Margin" Value="-1,-2,-2,-2"/>
                            <Setter Property="Margin" TargetName="Content" Value="1,0,0,0"/>
                        </MultiTrigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <!--previous (default) border brush value was BorderBrush="{StaticResource TabItemDisabledBorderBrush}"-->
                            <Setter Property="BorderBrush" TargetName="Bd" Value="{x:Null}" />
                            <Setter Property="Background" TargetName="Bd" Value="{StaticResource TabItemDisabledBackground}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

这是应用样式更改后控件的外观（在 Blend + SketchFlow for VS2012 中预览）：

![Blend + SketchFlow for VS2012 中的预览](../Images/91098fc7f94fbebd1de675c3a9942d24.png)

# twitter - 发布时从特定 Twitter 帐户发布帖子的代码？

> ID：12160759
> 
> 赞同：0
> 
> 时间：2012-08-28T13:51:55.760
> 
> 标签：twitter, blogs, publish, tweets

我经营一个社区博客，想知道是否可以将代码添加到作者的帖子中，自动将他们的帖子发布到他们的博客 Twitter 帐户？（我已经为博客上的每个人创建了 Twitter 帐户）。

比如说，如果一个叫 John 的作者发表了一篇文章，我想要的代码将包含在他的文章页脚的 bio 部分中，并且会自动从他的 @BLOGJohn 帐户发布他的新文章。

我已经制作了特定于作者的简历。我在 Google Blogger 平台上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:01:05.907

虽然这过去很简单，但 twitter 已经非常严格地锁定了它的 api 交互。使用可以访问您的博客和 Twitter 帐户的第三方服务将是最佳解决方案。试试推特提要。

[http://twitterfeed.com/](http://twitterfeed.com/)

# unit-testing - 测试部门的职责是什么？

> ID：12160760
> 
> 赞同：3
> 
> 时间：2012-08-28T13:51:56.917
> 
> 标签：unit-testing, testing

我知道很多公司都有他们的测试部门，我问这个问题是因为我无法弄清楚一些概念。

**1、单元测试是否应该由测试部门/第三方企业进行？**

就我自己的感觉而言，我认为这应该由开发人员自己完成。但有句话说：

*您将倾向于以您编写代码的方式测试您的代码。所以我们最好做单元测试。而且你不是专业的测试人员，所以你不能确保你的单元测试是最好的。*

如果这是错误的，是否有官方说程序员应该自己进行单元测试？

**2、除了单元测试，测试部门还做哪些其他测试？**

这是一个简单的问题。也许有一些随机测试，一些压力测试，但是谁能给我一份测试部门通常做什么的清单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:29:34.400

虽然开发人员应该测试他们自己的工作（他们都这样做，但有些人只是使用低效的“run-test-last-change-fix-run-again”方法），试图找出自己的错误存在心理问题：

1.  如果你知道自己犯了错误，你可能会尽量避免它。事后看来，看到错误通常很明显/很简单，但是当它发生时，这不是真的。所以这会造成一种“失败者”的情况，当你真正尽力而为时，每个人都认为你很愚蠢。

2.  每个开发人员都有自己的错误模式；那就是每个人都一遍又一遍地犯同样的错误。原因是多方面的，最重要的是对自己的缺陷视而不见或不愿承认。

3.  当你赶时间时，你开始偷工减料。这不坏，这是人。问题是您的记忆已经充满了您工作所需的所有细节。现在你的记忆力会因压力而降低。**这意味着您会在不注意的情况下**忽略重要的细节- 您的大脑已经在其极限工作。而且你不会注意到你错过了它们。而且你不会记住你注意到的所有信息，因为你的记忆处于恐慌模式 -> 只有真正重要的（如危及生命的）信息才会被处理。

4.  自我监视根本不适用于人类。你总是需要一个外部控制器，否则你会腐败。

因此，让其他人测试您的工作是有意义的：

1.  他们不会使用相同的模式（单击哪里、单击按钮的顺序、键入的速度……），这些模式可以快速发现您自己找不到的简单错误，仅仅是因为它们超出了您的首选方式使用电脑。

2.  他们的任务是让你的生活变得悲惨（简而言之）。如果老板物有所值，他将创造一个竞争环境，开发人员将尝试让尽可能少的错误进入测试，而测试将尝试找到尽可能多的错误“展示”（“他们”是另一支球队）。这非常有效（人类群体喜欢竞争），但你需要注意工作中的心理力量。如果管理得不好，就会造成很大的压力（-> 更多的虫子溜过）、倦怠和相互仇恨。如果老板不善于管理人，那么这*将*适得其反。

3.  他们有不同的假设。他们没有编写代码，所以他们不知道它应该如何工作。他们会像客户一样看待您的工作，并看到开发人员永远不会关心的事情（“看起来很丑”，“反应不够快”）。他们可以找到使产品更容易销售的问题。开发人员通常只关注“足够好”（= 当我以正确的顺序单击正确的按钮时不会崩溃）。

现在你的问题：

> 单元测试是否应该由测试部门/第三方企业完成？

不。单元测试是您可以在代码上运行的最小的测试，但它仍然具有一定的意义。测试部门永远不应该运行这些，这是自动化 CI 服务器的工作。这是适合计算机的愚蠢、无聊和重复的工作。

但是让测试部门定义新的单元测试是有意义的。或者，应该将来自测试的错误报告转换为新的单元测试。

> 除了单元测试，测试部门还做了哪些其他测试？

一些例子：

*   他们像客户一样安装实际应用程序（= 测试安装程序）
*   他们点击一切（尤其是那些他们不应该点击的部分）
*   他们在包含复杂测试用例的特殊测试数据库上运行高级测试
*   他们运行需要几个小时才能完成的测试（不像单元测试应该最多在几秒钟内执行）
*   他们检查是否满足所有要求
*   他们将产品安装在具有所有支持的数据库、网络布局和不同配置的各种硬件上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:04:05.687

我觉得程序员应该自己做很多测试，但大部分都归结为功能测试。它是否按预期工作？

测试/质量保证人员倾向于做更深入的测试工作。来自安全背景，他们将确保所有输入都经过验证，并且没有任何东西容易受到 SQL 注入和 CSS 的攻击。同样在较大的项目中，不同团队构建不同的成品，测试部门将测试成品，以确保在集成过程中不会出现错误，包括负载测试、安装测试以及在各种场景、不同操作系统中的测试等。测试部门需要知道在每种情况下会发生什么，以便其他团队可以确定它是否是值得修复的错误，并让客户群知道这是一个已知问题或设计。

让我们看一下视频游戏。在视频游戏中，您通常拥有在设计环境中四处移动的精灵。测试人员将确保精灵在撞到任何墙壁时停止并在所有可能的墙壁上进行测试，以确保没有任何剪切问题。开发人员通常会对引擎进行编程并制作地图和交互，但除非向他们报告，否则不会关心发现个别裁剪问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:42:30.753

单元测试由负责编写代码的开发人员编写。它们基本上是供编码器使用的。我使用它们来确保我交付给 QA 的代码没有内部错误，比如会停止测试（以及让我们看起来很糟糕）的 NPE。任何项目都会有不同的组件需要协同工作，单元测试可以确保各个组件按预期工作，并且它们的交互都按预期运行。

其他小组的测试侧重于查看产品行为的不同方面：

*   功能测试检查业务需求是否得到满足

*   系统集成测试检查程序是否在类似于生产环境的上下文中工作

*   负载测试检查程序在投入大量工作时是否按预期运行

*   用户体验测试检查普通用户是否能够浏览 UI。

有一个乒乓 TDD 的概念，其中结对程序员交替编写测试和代码，因此您可以从第二个人的观点中受益。这可能是进行测试和获得即时代码审查的最佳方式，但如果想到两名员工在同一个任务上工作，就会让管理层感到害怕，因此这种机会非常罕见。即使没有这些，尝试通过测试来破坏代码也符合程序员的利益。我宁愿在编写代码时破坏我的代码，也不愿让其他人稍后再做。

# java - 当我将扩展 Activity 更改为扩展 ListActivity 时，为什么会出现“找不到源”？

> ID：12160761
> 
> 赞同：0
> 
> 时间：2012-08-28T13:51:59.817
> 
> 标签：java, android, android-activity, listactivity, extends

我这门课有问题。当我按下按钮时，将调用此 Activity。当我将 Activity 扩展到此类时，程序会进入该类，但是当我扩展 ListActiviy 并单击按钮时，调试器会用红色字样告诉我“找不到源”，没有其他内容，甚至在 logcat 中也没有。请告诉我此活动的 xml 文件或清单中是否缺少某些内容。

这是课堂活动：

```
public class SeeAllEntriesActivity extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_all_entries);

        ActivitiesObjects ao = (ActivitiesObjects)this.getApplication();
        List<Customer> listOfCostumer = ao.getListOfCustomers();

        ListAdapter listAdapter = new ArrayAdapter(this, R.layout.activity_all_entries, listOfCostumer);
        ListView listViewCustomer = (ListView) findViewById(R.id.listViewCustomer);
        listViewCustomer.setAdapter(listAdapter);
    }
} 
```

这是活动的 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="all entries" />

    <ListView
        android:id="@+id/listViewCustomer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    </ListView>

</LinearLayout> 
```

这是清单的 xml：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application android:name="com.example.testapp.ActivitiesObjects" android:label="@string/app_name">
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="CreateActivity"></activity>
        <activity android:name="SeeAllEntriesActivity"></activity>
    </application>    

</manifest> 
```

在此先感谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:14:05.683

关于 ListActivity，我想分享一点。

> 您的布局必须包含一个 ListView，其 android:id 属性设置为 @android:id/list
> 
> 例如 android:id="@android:id/list"

您的布局文件将如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="all entries" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    </ListView>

</LinearLayout> 
```

对于设置列表适配器，您可以使用**`setListAdapter`**功能

```
public class SeeAllEntriesActivity extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_all_entries);

        ActivitiesObjects ao = (ActivitiesObjects)this.getApplication();
        List<Customer> listOfCostumer = ao.getListOfCustomers();

        ListAdapter listAdapter = new ArrayAdapter(this, R.layout.activity_all_entries, listOfCostumer);
        // no need to fetch list view instance
        // ListView listViewCustomer = (ListView) findViewById(R.id.listViewCustomer);
        setListAdapter(listAdapter);
    }
} 
```

如果你想拥有 listview 的实例，那么你可以调用`getListView ()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:55:39.593

您忘记了 2 个“ **.** ”（点）。

代替：

```
<activity android:name="CreateActivity"></activity>
<activity android:name="SeeAllEntriesActivity"></activity> 
```

和：

```
<activity android:name=".CreateActivity"></activity>
<activity android:name=".SeeAllEntriesActivity"></activity> 
```

此外，您的标签中有 2`android:label`个`application`。

# android - 安卓 AVD 问题

> ID：12160763
> 
> 赞同：2
> 
> 时间：2012-08-28T13:52:07.263
> 
> 标签：android, avd

好吧，我知道这已经被问过了，但我真的需要帮助，我已经尝试了几个小时！我的问题是，当我尝试为 AVD 加注星标时出现错误

> PANIC：无法打开 AVD 配置文件：C:\Users\AndrÃ©s.android\avd\Motorola_DroidRAZR.avd/config.ini

我知道问题是因为我的用户名上的“口音”是“Andrés”，这就是为什么它看起来不同（Andrés），IDE 无法识别，所以我需要一个解决方案，我很绝望，请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:56:38.070

1.  列表项 创建一个名为：ANDROID_SDK_HOME 的环境变量并将其设置为 C:\Users\Administrator

2.  打开 Eclipse > Window > Preferences 并单击 Run/Debug and String Substitution

3.  添加一个名为 user.home 的新变量并将其设置为 C:\Users\Administrator 并创建一个 AVD 并运行它。

它现在应该可以工作了。

# uiactionsheet - 使用Viewcontroller控制tabbarController

> ID：12160764
> 
> 赞同：0
> 
> 时间：2012-08-28T13:52:09.817
> 
> 标签：uiactionsheet, viewcontroller, tabbarcontroller

我正在尝试使用 ActionSheet（通过作为 tabbarcontroller 的一个项目的 viewcontroller）来访问另一个选项卡。但我似乎无法做到这一点。

场景如下： 1\. 我单击选项卡 3 2\. 已启动操作表 3\. 我单击“取消” 4\. [这就是我想要的] - 将我带回选项卡 1。

我实际上如何让 4 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:39:31.173

我通过执行以下操作解决了它

```
[[self tabBarController] setSelectedIndex:0]; 
```

您根据要转到的选项卡设置数字

# c++ - if / else 在 C++ 编译时？

> ID：12160765
> 
> 赞同：22
> 
> 时间：2012-08-28T13:52:11.267
> 
> 标签：c++, templates, if-statement, compilation

考虑以下代码：

```
#include <iostream>
#include <type_traits>

template<typename T> class MyClass
{
    public:
        MyClass() : myVar{0} {;}
        void testIf() {
            if (isconst) {
                myVar;
            } else {
                myVar = 3;
            }
        }
        void testTernary() {
            (isconst) ? (myVar) : (myVar = 3);
        }

    protected:
        static const bool isconst = std::is_const<T>::value;
        T myVar;
};

int main()
{
    MyClass<double> x;
    MyClass<const double> y;
    x.testIf();
    x.testTernary();
    y.testIf(); // <- ERROR
    y.testTernary(); // <- ERROR
    return 0;
} 
```

对于 x（非常量）没有问题。但是即使 if/else 中的条件在编译时已知，y（const 数据类型）也会导致错误。

有没有可能在编译时不编译错误条件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2019-02-12T09:58:15.000

**C++17`if constexpr`**

哦，是的，它已经到了：

主文件

```
#include <cassert>
#include <type_traits>

template<typename T>
class MyClass {
    public:
        MyClass() : myVar{0} {}
        void modifyIfNotConst() {
            if constexpr(!isconst) {
                myVar = 1;
            }
        }
        T myVar;

    protected:
        static constexpr bool isconst = std::is_const<T>::value;
};

int main() {
    MyClass<double> x;
    MyClass<const double> y;
    x.modifyIfNotConst();
    y.modifyIfNotConst();
    assert(x.myVar == 1);
    assert(y.myVar == 0);
    return 0;
} 
```

[GitHub 上游](https://github.com/cirosantilli/cpp-cheat/blob/f20a408765ec2ff86495bdddbcd0fdd4f2b5bf78/cpp/constexpr_if.cpp).

编译并运行：

```
g++-8 -std=c++17 -Wall -Wextra -pedantic -o main.out main.cpp
./main.out 
```

另请参阅：[“if constexpr()”与“if()”之间的区别](https://stackoverflow.com/questions/43434491/difference-between-if-constexpr-vs-if)

这将与 C++20“字符串文字模板参数”一起非常酷：[将字符串文字作为参数传递给 C++ 模板类](https://stackoverflow.com/questions/2033110/passing-a-string-literal-as-a-parameter-to-a-c-template-class/58841797#58841797)

在 Ubuntu 16.04、[GCC 8.1.0](https://askubuntu.com/questions/1028601/install-gcc-8-only-on-ubuntu-18-04/1087116#1087116)中测试。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-28T14:02:54.907

最简单的解决方法是部分模板特化：

```
template<typename T> class MyClassBase
{
    public:
        MyClassBase() : myVar{0} {;}

    protected:
        T myVar;
};

template<typename T> class MyClass: MyClassBase<T>
{
    public:
        void testIf() { myVar = 3; }
};

template<typename T> class MyClass<const T>: MyClassBase<const T>
{
    public:
        void testIf() { myVar; }
}; 
```

另一种选择是委托：

```
template<typename T> class MyClass
{
    public:
        MyClass() : myVar{0} {;}
        void testIf() { testIf_impl(std::integral_constant<bool, isconst>()); }

    protected:
        static const bool isconst = std::is_const<T>::value;
        T myVar;

    private:
        void testIf_impl(std::true_type) { myvar; }
        void testIf_impl(std::false_type) { myVar = 3; }
}; 
```

SFINAE 是另一种选择，但通常不适合这种情况：

```
template<typename T> class MyClass
{
    public:
        MyClass() : myVar{0} {;}
        template
        <typename U = void>
        typename std::enable_if<std::is_const<T>::value, U>::type testIf() { myvar; }
        template
        <typename U = void>
        typename std::enable_if<!std::is_const<T>::value, U>::type testIf() { myvar = 3; }

    protected:
        static const bool isconst = std::is_const<T>::value;
        T myVar;
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-28T14:04:19.667

您可以将类专门用于 const 类型

```
template<typename T>
class MyClass 
{
   // Whatever you need to do
};

template<typename T>
class MyClass<const T> 
{
   // Whatever you need to do for const types
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-28T13:57:41.970

为给定类型编译类模板。即使控制流没有到达分配，该分配也会被编译。由于成员是 const，所以编译会失败。

您可以使用某种形式的[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)来跳过该作业，但它不会像现在这样工作。

这有效（为简单起见，我删除了`testTernary`成员函数）：

```
#include <iostream>
#include <type_traits>

template<typename T> class MyClass
{
    public:
        MyClass() : myVar{0} {;}

        template<class U = T>
        typename std::enable_if<std::is_const<U>::value>::type testIf() {
            myVar;
        }

        template<class U = T>
        typename std::enable_if<!std::is_const<U>::value>::type testIf() {
            myVar = 3;
        }

    protected:
        static const bool isconst = std::is_const<T>::value;
        T myVar;
};

int main()
{
    MyClass<double> x;
    MyClass<const double> y;
    x.testIf();
    y.testIf();
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T14:11:32.003

尝试这个：

```
template<typename T> 
class MyClass
{
    T myVar;
public:
    MyClass() : myVar(0) {}

    void testIf()
    {
        assign(myVar, 3);
    }
 private:

    template<typename V>
    void assign(V& destination, int value)
    {
        destination = value;
    }
    template<typename V>
    void assign(const V& destination, int value)
    {

    }
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T13:54:52.447

如果没有编译 else 分支，那么您的函数将具有完全不同的含义。您不能只是不编译部分代码。如果您不希望它执行，请不要编写它。这不像函数是在每次调用时单独编译的。

类型系统的全部意义在于避免意外地尝试执行诸如分配给`const`变量之类的事情。您必须编写一个不分配给该变量的全新（或重载）函数。

# python - 使用 Portable Python 安装软件包

> ID：12160766
> 
> 赞同：0
> 
> 时间：2012-08-28T13:52:11.613
> 
> 标签：python, portable-python

> **可能重复：**
> [在可移植 python 上导入模块](https://stackoverflow.com/questions/2746542/importing-modules-on-portable-python)

我是一个新的 Python 用户。我在工作时使用的 PC 上安装了 Portable Python（操作系统是 Windows XP，我没有管理员权限），但我不知道如何安装软件包。安装 Pyper 包除外：将文件放在 Python 目录中，然后在 DOS 控制台中键入“python setup.py”。但我想安装 numpy 和 pandas。zip 存档包含几个文件夹，我不知道该怎么做。Windows 安装程序（exe 文件）不起作用，因为 Python 不在 Windows 注册表中，并且无法在安装过程中键入路径。

# git - 使用 Git 获取要在 pre-commit 挂钩中提交的文件列表

> ID：12160767
> 
> 赞同：0
> 
> 时间：2012-08-28T13:52:16.357
> 
> 标签：git, githooks, pre-commit-hook, git-commit

> **可能重复：**
> [Git 预提交挂钩：更改/添加的文件](https://stackoverflow.com/questions/2412450/git-pre-commit-hook-changed-added-files)

在提交源代码列表之前添加某种代码验证器或检查器可能会很好。Facebook 甚至将自动化测试集成到提交过程中（至少我听说过）。我需要的是一种获取将要提交的文件列表的方法，而不仅仅是编辑。这里有几个原因：

1.  `git commit -m "message"`当我尝试使用它们来获取文件时，可以修改默认消息绕过 prepare-message 和 commit-msg 挂钩。
2.  预提交钩子不会从`git commit`命令中获取任何参数，因此不容易判断正在提交的文件，尤其是部分提交。
3.  我们在一个共享工作站上有多个用户，一个共享用户和一个共享本地存储库（我对此无能为力，我只是在那里做我的工作），所以当我提交我的代码时我不想验证其他人的代码（很确定这个感觉是相互的）。因此，如果我使用`git diff-index --name-only HEAD`，我会得到比我想要的更多的代码来验证。
4.  自动化很棒，我认为在挂钩中安装代码验证器很酷。
5.  如果验证失败，提交过程最好中止。

如果有任何其他方法可以按照我描述的方式自动验证代码，请告诉我如何。我真的需要这个。非常感谢。

# mysql - 根据 MySQL SUM 结果选择最高行，有关系

> ID：12160768
> 
> 赞同：1
> 
> 时间：2012-08-28T13:52:22.890
> 
> 标签：mysql, sum, left-join, inner-join, max

我有以下`MySQL`查询：

```
SELECT
s.student_id, s.student_firstname, s.student_lastname, s.isActive, 
    c.city_name,
    sd.student_startdate, sd.student_enddate,
    SUM(scpe.scpe_estemated_days) AS total
        FROM students s 
            INNER JOIN cityselections c ON c.city_id = s.student_city_id
            INNER JOIN studentdates sd ON sd.student_id = s.student_id
            LEFT JOIN studentcourseplan scp ON scp.student_id = s.student_id
            LEFT JOIN studentcourseplanelements scpe ON scpe.scpe_cpl_id = scp.cpl_id
                GROUP BY scp.cpl_id 
```

这可以输出：

```
+------------+-------------------+------------------+----------+------------+-------------------+-----------------+-------+
| student_id | student_firstname | student_lastname | isActive | city_name  | student_startdate | student_enddate | total |
+------------+-------------------+------------------+----------+------------+-------------------+-----------------+-------+
| 83         | John              | Doe              | 1        | Dallas     | 2012-07-23        | 2012-09-30      | 413   |
| 84         | Derp              | Derpson          | 1        | Texas      | 2012-07-01        | 2012-08-26      | 413   |
| 85         | Barack            | Obama            | 1        | Washington | 2012-08-02        | 2012-08-31      | 2     |
| 85         | Barack            | Obama            | 1        | Washington | 2012-08-02        | 2012-08-31      | 153   |
+------------+-------------------+------------------+----------+------------+-------------------+-----------------+-------+ 
```

现在我只想`total`为每个列打印具有最高值的行`student_id`

我试过`MySQL` `MAX()`了，但我无法让它工作。

应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:33:23.263

尝试使用此查询...

```
SELECT A.student_id, A.student_firstname, A.student_lastname, A.isActive, 
    A.city_name,
    A.student_startdate, A.student_enddate,
    MAX(A.total)
 FROM (SELECT
s.student_id, s.student_firstname, s.student_lastname, s.isActive, 
    c.city_name,
    sd.student_startdate, sd.student_enddate,
    SUM(scpe.scpe_estemated_days) AS total
        FROM students s 
            INNER JOIN cityselections c ON c.city_id = s.student_city_id
            INNER JOIN studentdates sd ON sd.student_id = s.student_id
            LEFT JOIN studentcourseplan scp ON scp.student_id = s.student_id
            LEFT JOIN studentcourseplanelements scpe ON scpe.scpe_cpl_id = scp.cpl_id
                GROUP BY scp.cpl_id) AS A
GROUP BY A.student_id; 
```

希望能帮助到你....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:54:06.667

我建议使用子查询。

```
SELECT s.student_id, s.student_firstname, s.student_lastname, s.isActive,
  c.city_name, sd.student_startdate, sd.student_enddate,
    (SELECT SUM(scpe.scpe_estemated_days) 
       FROM studentcourseplan scp
       LEFT JOIN studentcourseplanelements scpe ON scpe.scpe_cpl_id = scp.cpl_id
       WHERE scp.student_id = s.student_id) AS scpe_estemated_days
FROM students s
INNER JOIN cityselections c ON c.city_id = s.student_city_id
INNER JOIN studentdates sd ON sd.student_id = s.student_id; 
```

见[小提琴](http://sqlfiddle.com/#!2/5bd8c/1)。

我建议不要使用 shubhansh 的答案，因为它选择不包含在聚合中的属性，这是不好的做法。

> 在标准 SQL 中，包含 GROUP BY 子句的查询不能引用选择列表中未在 GROUP BY 子句中命名的非聚合列。例如，这个查询在标准 SQL 中是非法的，因为选择列表中的 name 列没有出现在 GROUP BY 中：
> 
> ```
> SELECT o.custid, c.name, MAX(o.payment)
>   FROM orders AS o, customers AS c
>   WHERE o.custid = c.custid
>   GROUP BY o.custid; 
> ```
> 
> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。这意味着前面的查询在 MySQL 中是合法的。

请参阅[手册](http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html)。

# c# - 从 Windows 窗体应用程序中删除 Click 方法

> ID：12160770
> 
> 赞同：3
> 
> 时间：2012-08-28T13:52:26.333
> 
> 标签：c#, visual-studio-2010

我从 C# 开始，并通过本教程了解如何创建一个简单的图片查看器：

[http://msdn.microsoft.com/en-us/library/dd492135.aspx](http://msdn.microsoft.com/en-us/library/dd492135.aspx)

您可以使用几个按钮、图片查看区域和一个复选框来创建它。

当我创建表单并添加一些按钮时，我能够运行调试器，查看应用程序，然后单击什么都不做的按钮。

似乎要为单击按钮之类的事件创建方法，您可以双击表单设计中的按钮作为快捷方式。

但是，我似乎无法删除一个方法并运行它。例如，我创建了私有 void pictureBox1_Click。但是，当我单击图片时，我不需要表单来执行任何操作。我想删除那个方法。但是，然后我收到一条错误消息：

“‘PictureViewer.Form1’不包含‘pictureBox1_Click’的定义，并且找不到接受‘PictureViewer.Form1’类型的第一个参数的扩展方法‘pictureBox1_Click’（您是否缺少 using 指令或程序集引用？）”

我错过了什么？当我双击图片框时，除了一种方法之外，是否还创建了其他东西？并不是说它特别麻烦，但是必须在代码中为您意外创建的所有内容保留空方法会很奇怪。

关于第二个问题，我添加的控件和容器的代码在哪里？我认为除了属性窗口之外还有一个地方可以设置各种属性。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:04:07.060

您的表单作为部分类分布在两个文件中。后台“连接”代码位于 myform.designer.cs 文件中，您的代码位于 myform.cs 文件中。如果您只是从代码中删除处理程序，则连接代码仍然存在，您将无法编译。因此，您也可以进入 Designer.cs 代码并从那里删除相关代码，但如果您刚刚开始，可能不建议这样做。

正确的做法是，在设计器 UI 中，查看按钮 (f4) 的属性，然后单击顶部栏上的“事件”按钮。您应该在某处看到您的事件处理程序。如果您右键单击事件处理程序，则可以选择“重置”。单击它，它将删除连线代码。如果您的处理程序不包含任何代码，那么我相信它也会删除它（我没有 winfom，我面前的项目所以不能肯定地说）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:01:27.897

在解决方案资源管理器中展开“Form1”的节点并双击 Designer.cs (Form1.Designer.cs)。我想还是有对pict​​urebox1点击事件的引用。你需要删除它。

无论如何，Designer.cs 包含有关您添加到表单中的控件/容器的所有信息，但您仍然可以通过在“form1”后面的常规代码中创建新值来覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-29T20:10:44.960

运行代码并找到错误字符串。在 explorel 中打开项目路径并在记事本中打开 your_form.Designer.cs 设计器。在文件中查找错误字符串并将其删除（或该元素的所有代码）。

# java - 带有 JAXB 的 JAX Web 服务使用循环返回多个值

> ID：12160771
> 
> 赞同：0
> 
> 时间：2012-08-28T13:52:30.490
> 
> 标签：java, jaxb

我编写了一个返回 5 个值的 Web 服务：

```
String taskPresentationName_UWL = null; 
String taskActivationTime_UWL = null;   
String taskPriority_UWL = null; 
String taskStatus_UWL = null;   
String taskID_UWL = null; 
```

我的情况是我运行一个循环，我想返回一个包含这些值的列表或数组。

因为它现在是代码，所以我只得到 1 行作为答案。例如：

> taskPresentationName_test1、taskActivationTime_test1、taskPriority_test1、taskStatus_test1、taskID_test1

但我想返回的答案应该如下所示：

> taskPresentationName_test1、taskActivationTime_test1、taskPriority_test1、taskStatus_test1、taskID_test1
> 
> taskPresentationName_test2、taskActivationTime_test2、taskPriority_test2、taskStatus_test2、taskID_test2
> 
> ……

如何将答案返回到列表或 Xml？？？

我的代码如下

```
@WebService(name = "getUWLTasks", portName = "getUWLTasksPort", serviceName = "getUWLTasksService", targetNamespace = "http://sap.com/tutorial/testAPI/")
@Stateless
public class getUWLTasks
{
   @WebMethod(operationName = "getTasks", exclude = false)
   public void getTasks(
      @WebParam(name = "taskPresentationName", mode = WebParam.Mode.OUT) Holder<String> taskPresentationName,
      @WebParam(name = "taskActivationTime", mode = WebParam.Mode.OUT) Holder<String> taskActivationTime,
      @WebParam(name = "taskPriority", mode = WebParam.Mode.OUT) Holder<String> taskPriority,
      @WebParam(name = "taskStatus", mode = WebParam.Mode.OUT) Holder<String> taskStatus,
      @WebParam(name = "taskID", mode = WebParam.Mode.OUT) Holder<String> taskID) {

      String taskPresentationName_UWL = null;
      String taskActivationTime_UWL = null;
      String taskPriority_UWL = null;
      String taskStatus_UWL = null;

      String taskID_UWL = null;

      try
      {    
         TaskInstanceManager taskInstanceManager = BPMFactory.getTaskInstanceManager();
         HashSet<Status> statuses = new HashSet<Status>();
         statuses.add(Status.READY);
         statuses.add(Status.RESERVED);
         statuses.add(Status.IN_PROGRESS);

         Set<TaskAbstract> myTasks = taskInstanceManager.getMyTaskAbstracts(statuses);
         Iterator<TaskAbstract> taskIter = myTasks.iterator();

         while (taskIter.hasNext())
         {    
            TaskAbstract ta = taskIter.next();

            //Get the UWL as it appears        

            java.net.URI taskInstanceId = ta.getId();

            URL taskExecutionURL = taskInstanceManager.generateTaskExecutionUrl(taskInstanceId);
            TaskDetail taskDetail = taskInstanceManager.getTaskDetail(taskInstanceId);

            taskPresentationName_UWL = ta.getPresentationName();
            taskActivationTime_UWL = ta.getCreatedTime().toString();
            taskPriority_UWL = ta.getPriority().toString();
            taskStatus_UWL = ta.getStatus().toString();

            taskID_UWL = ta.getId().toString();

            taskPresentationName.value = taskPresentationName_UWL;
            taskActivationTime.value = taskActivationTime_UWL;
            taskPriority.value = taskPriority_UWL;
            taskStatus.value = taskStatus_UWL;

            taskID.value = taskID_UWL;    
         }
      }
      catch (BPMException e)
      {    
         // TODO Auto-generated catch block
         e.printStackTrace();    
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:05:44.743

我写简单的 WS，一切如你所愿

```
@WebMethod(operationName = "getTasks", exclude = false)
   public void getTasks(
      @WebParam(name = "taskPresentationName", mode = WebParam.Mode.OUT) Holder<String[]> taskPresentationName,
      @WebParam(name = "taskActivationTime", mode = WebParam.Mode.OUT) Holder<String[]> taskActivationTime,
      @WebParam(name = "taskPriority", mode = WebParam.Mode.OUT) Holder<String[]> taskPriority,
      @WebParam(name = "taskStatus", mode = WebParam.Mode.OUT) Holder<String[]> taskStatus,
      @WebParam(name = "taskID", mode = WebParam.Mode.OUT) Holder<String[]> taskID)
          {
             taskPresentationName.value = new String[]{"a1", "a2"}; 
             taskActivationTime.value = new String[]{"b1", "b2"};
             taskPriority.value = new String[]{"c1", "c2"};
          } 
```

响应包含

```
 <taskPresentationName>a1</taskPresentationName>
 <taskPresentationName>a2</taskPresentationName>
     <taskActivationTime>b1</taskActivationTime>
 <taskActivationTime>b2</taskActivationTime>
     <taskPriority>c1</taskPriority>
 <taskPriority>c2</taskPriority> 
```

**编辑**

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Task 
{
   String taskPresentationName_UWL;
   //...
   String taskID_UWL;

   // getters, setters
} 
```

任务

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Tasks
{
   @XmlElement
   private List<Task> tasks = new ArrayList<Task>(); 

   public List<Task> getTasks()
   {
      return tasks;
   }
} 
```

网络方法

```
@WebMethod(operationName = "getTasks", exclude = false)
@WebResult(name = "tasks")
public Tasks getTasks() {  
//...  
} 
```

# jquery - 如何使用 jquery 获取 nodeType

> ID：12160772
> 
> 赞同：5
> 
> 时间：2012-08-28T13:52:30.273
> 
> 标签：jquery, html

我想获取 nodeType，然后将其与文本节点或元素节点的位置进行比较。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">
$(function(){
    var mm= $('.jj')
    alert(mm.nodeValue)
    })
</script>
</head>
<body>
<div class="jj">value</div>
</body> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-28T13:54:08.237

尝试访问这些属性

```
var mm = $('.jj').get(0);
alert(mm.nodeValue);
alert(mm.nodeType) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-17T03:25:04.710

我知道这不是问题，但要查看它是什么类型（DIV、SPAN 等），请使用 tagName。

```
var mm = $('.jj').get(0);
alert(mm.tagName); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T13:55:00.413

要获取 DOM 节点，您可以使用`[0]`：

```
var mm = $(".jj")[0];
if (mm.nodeType === 1) {
    // Node.ELEMENT_NODE
} 
```

但是，`<div>`元素永远不会是文本节点，也不会有`nodeValue`.

文本节点是`<div>`元素的第一个子节点。所以下面的代码会给你“价值”：

```
alert(mm[0].firstChild.nodeValue); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T13:55:09.750

```
<script type="text/javascript">
$(function(){
    var mm= $('.jj')
    alert(mm.get(0).nodeValue)
    })
</script> 
```

或者

```
<script type="text/javascript">
$(function(){
    var mm= $('.jj')
    alert(mm[0])
    })
</script> 
```

因为 jquery 集合是 DOM 元素的“包装集”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-30T22:11:08.623

如上所述，`$('.jj').get(0).nodeType`有效。

如同`$('.jj').first().nodeType`

或者`$('.jj').prop('nodeType')`

> `.prop()`：获取匹配元素集中第一个元素的属性值，或者为每个匹配元素设置一个或多个属性。

# iphone - iOS xcode4 AVQueuePlayer不播放声音

> ID：12160774
> 
> 赞同：0
> 
> 时间：2012-08-28T13:52:36.497
> 
> 标签：iphone, ios, audio, avqueueplayer

我正在尝试在 iPhone4 上使用 AVQueuePlayer 播放 .m4a 声音文件，但没有声音。如果我尝试使用相同文件的 AudioServicesPlaySystemSound，一切正常。

这是代码。

```
(AVFoundation framework is installed.)

    #import <AVFoundation/AVFoundation.h> 

-(void) play_sound_file: (NSString *) sound_file_m4a
{
    printf("\n play_sound_file 1: '%s' ", [sound_file_m4a UTF8String] );

        AVPlayerItem *sound_file = [[AVPlayerItem alloc] initWithURL:[NSURL URLWithString:[[NSBundle mainBundle] pathForResource:sound_file_m4a ofType:@"m4a"]]]; 
        AVQueuePlayer *player = [AVQueuePlayer queuePlayerWithItems:[NSArray arrayWithObjects:sound_file, nil]];  

        [player play]; 

        return;
} 
```

2012 年 8 月 28 日的最新代码...........（注意：两个声音文件都可以使用 AudioServicesPlaySystemSound）

```
AVPlayerItem *sound_file1 = [[AVPlayerItem alloc] initWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[[NSString alloc] initWithFormat:@"Hold still"] ofType:@"m4a"]]]; 

AVPlayerItem *sound_file2 = [[AVPlayerItem alloc] initWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[[NSString alloc] initWithFormat:@"Press go"] ofType:@"m4a"]]];     

AVQueuePlayer *player = [AVQueuePlayer queuePlayerWithItems: [NSArray arrayWithObjects:sound_file1, sound_file2,  nil]];  

[player play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:55:16.997

我在您上一篇文章中对我的回答的评论中解释了如何解决这个问题。这可能不起作用的原因之一是因为您正在传递一个`arrayWithObjects:`需要多个项目的项目。另一个可能导致它不起作用的原因是，如果您尝试在模拟器中运行它，那么与模拟器之间存在已知的兼容性问题`AVQueuePlayer`。

还：

代替

```
AVPlayerItem *sound_file = [[AVPlayerItem alloc] initWithURL:[NSURL URLWithString:[[NSBundle mainBundle] pathForResource:sound_file_m4a ofType:@"m4a"]]]; 
```

和

```
AVPlayerItem *sound_file = [[AVPlayerItem alloc] initWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[[NSString alloc] initWithFormat:@"sound_file_m4a"] ofType:@"m4a"]]]; 
```

**编辑：**这是一个如何按顺序播放音频文件的示例。

在你的头文件中：

```
#import <AVFoundation/AVFoundation.h>

AVAudioPlayer *data;
NSArray *arrayOfTracks;
NSUInteger currentTrackNumber; 
```

然后在你的实现文件中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    arrayOfTracks = [[NSArray alloc] initWithObjects:@"1",@"2",@"3", nil];//Do NOT include file extension here
    currentTrackNumber = 0;
}
- (void)startPlaying
{
    if (data) {
        [data stop];
        //[data release]; if project isn't using Automatic Reference Counting
        data = nil;
    }
    data = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[[NSString alloc] initWithString:[arrayOfTracks objectAtIndex:currentTrackNumber]] ofType:@"m4a"]] error:NULL];
    data.delegate = self;
    [data play];
}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    if (flag) {
        if (currentTrackNumber < [arrayOfTracks count] - 1) {
            currentTrackNumber ++;
            if (data) {
                [data stop];
                //[data release]; if project isn't using Automatic Reference Counting
                data = nil;
            }
            data = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[[NSString alloc] initWithString:[arrayOfTracks objectAtIndex:currentTrackNumber]] ofType:@"m4a"]] error:NULL];
            data.delegate = self;
            [data play];
        }
    }
} 
```

# android - 如何分发 .so 库访问的“.dat”文件

> ID：12160775
> 
> 赞同：2
> 
> 时间：2012-08-28T13:52:36.043
> 
> 标签：android, android-ndk

我需要在 Google Play 上分发应用程序。但是，我的应用程序有一个可以访问 10 个“.dat”文件的库。问题是分发这些 dats 文件。在资产目录中，我尝试解压缩，但是库“.so”无法访问它们：权限问题。

我想过把它们放在raw目录下的可能性，但我不知道它是否可以工作，因为我使用NDK做链接，不知道它是否有这个项目的lib目录权限。

不会很好地存储在 sdcard 中。用户可以删除文件...

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:24:20.757

将所有 .dat 文件放入`assets`文件夹中（在您拥有`src`和的同一级别`jni`）。Ant 会将它们打包到`.apk`存档中。

如果您以 Android 2.3+ 为目标，您可以使用 NDK 调用直接访问您的文件。如果您想在较低版本的 Android 上运行，您有两种可能性：

1.  通过 Java 将文件提取到 SD 卡，然后从本机代码访问它们。
2.  使用`minizip`（或类似的 zip 解包器）访问`.apk`存档中的文件

# sql - SQL 累计百分比总计

> ID：12160776
> 
> 赞同：1
> 
> 时间：2012-08-28T13:52:39.190
> 
> 标签：sql, sql-server-2008, cumulative-sum

我的数据集如下所示：

```
COLA  | COLB
Name1 | 218
Name2 | 157
Name3 | 134
Name4 | 121 
```

我需要这个输出：

```
COLA  | COLB| COLC
Name1 | 218 | 0.34
Name2 | 157 | 0.60
Name3 | 134 | 0.71
Name4 | 121 | 1 
```

到目前为止，我的 SQL 看起来像这样：

```
SELECT COLA, COLB, COLB/SUM(COLB) FROM #MyTempTable 
```

这个 SQL 有两个问题。一，COLC每次都是0，我不明白。第二，即使它确实导致了 %，它也不是累积的 %。

我在 StackOverflow 上看到了一些类似的线程，但我无法让这些线程的答案在我的确切场景中起作用。

在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:06:11.153

我认为您正在寻找类似的东西，尽管您的示例计算可能有点偏离：

```
SELECT
    COLA,
    COLB,
    ROUND(
        -- Divide the running total...
        (SELECT CAST(SUM(COLB) AS FLOAT) FROM #MyTempTable WHERE COLA <= a.COLA) /
        -- ...by the full total
        (SELECT CAST(SUM(COLB) AS FLOAT) FROM #MyTempTable),
        2
    ) AS COLC
FROM #MyTempTable AS a
ORDER BY COLA 
```

编辑：我添加了舍入。

这给了我们以下输出：

```
COLA    COLB    COLC
Name1   218     0.35
Name2   157     0.6
Name3   134     0.81
Name4   121     1 
```

您的结果为 0（或 1）的原因是因为您将整数除以整数，从而给您一个整数（请参阅[数据类型优先级](https://stackoverflow.com/questions/5585796/sql-server-data-type-rank-in-arithmetic-operations)）。

更新：

我应该补充一点，这使用“[三角连接](http://www.sqlservercentral.com/articles/T-SQL/61539/)”来获得运行总数（`WHERE COLA <= a.COLA`）。根据您的 SQL Server 版本，如果性能成为问题，您可以将其与[其他选项进行比较。](https://stackoverflow.com/questions/860966/calculate-a-running-total-in-sqlserver)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:05:23.127

如果你不使用 OLAP 函数，那么你必须在表上做一个奇怪的自连接：

```
SELECT a.ColA, a.ColB, SUM(b.ColB) AS ColX
  FROM #MyTempTable AS a
  JOIN #MyTempTable AS b
    ON a.ColA <= b.ColA
 GROUP BY a.ColA, a.ColB 
```

这为您提供了原始累积 SUM。您绝对可以将其用作子查询来获得答案，注意要获得百分比，您需要将累积总和除以总和：

```
SELECT ColA, ColB, ColX / (SELECT SUM(ColB) FROM MyTempTable) AS ColC
  FROM (SELECT a.ColA, a.ColB, SUM(b.ColB) AS ColX
          FROM #MyTempTable AS a
          JOIN #MyTempTable AS b
            ON a.ColA <= b.ColA
         GROUP BY a.ColA, a.ColB
       ) AS X
 ORDER BY ColA 
```

你可以只写：

```
SELECT a.ColA, a.ColB, SUM(b.ColB) / (SELECT SUM(ColB) FROM MyTempTable) AS ColC
  FROM #MyTempTable AS a
  JOIN #MyTempTable AS b
    ON a.ColA <= b.ColA
 GROUP BY a.ColA, a.ColB
 ORDER BY a.ColA 
```

将 ColC 表达式乘以 100 以获得百分比而不是分数。

在 Mac OS X 10.7.3 上针对 IBM Informix 11.70.FC2 进行了测试，这两个查询都具有除法工作，产生了相同的答案（我注意到我得到了 0.81 而不是问题中要求的 0.71）：

```
Name1    218    0.34603174603174603174603174603175
Name2    157    0.5952380952380952380952380952381
Name3    134    0.80793650793650793650793650793651
Name4    121    1.0 
```

您可能必须使用 CAST 来确保使用浮点而不是整数算术来完成除法 - 正如您所看到的，这对于 Informix 不是必需的（无论如何，SUM 都是浮点小数，以防万一表有数十亿其中的行数，而不仅仅是其中的 4 个）。我可以改进演示文稿`ROUND(xxxx, 2)`，只保留 2 个小数位；转换为 DECIMAL(6,2) 将获得相同的结果，但客户端应负责演示，而不是 DBMS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:14:08.023

在 MS SQL Server 中，这样做（ups，错误的子聚合 -> 错误的结果）：

```
create table #MyTempTable (cola varchar(10), colb int)

insert into #MyTempTable(cola,colb)
select 'Name1',218
union all
select 'Name2',157
union all
select 'Name3',134
union all
select 'Name4',121

SELECT otab.COLA, otab.COLB,
       cast(otab.COLB as float)/(select SUM(cast(itab.colb as float))
                                 from #MyTempTable itab where itab.cola >= otab.cola) 
  from #MyTempTable otab

drop table #MyTempTable 
```

# perl - perl 读取和缩进 xml 文件

> ID：12160778
> 
> 赞同：3
> 
> 时间：2012-08-28T13:52:44.760
> 
> 标签：perl

我有以下`Perl`代码，它读取输入并正确缩进文件。我没有使用`xmllint`，或者`XML-Tidy`是因为`DTD`. 但是，假设我使用下面的代码进行练习：

```
 ### begin_: file metadata
        ### <region-file_info>
        ### main:
        ###   - name    : XMLPrettyPrint: simple xml pretty print in perl
        ###     desc    : use perl with XML::Twig library to print indented xml
        ###     date    : created="Thu 2005-12-01 11:08:15"
        ###     last    : lastmod="Thu 2005-12-01 11:22:34"
        ###     lang    : perl
        ###     tags    : perl xml indent formatted pretty string cfPrettyPrint
        ### </region-file_info>

### begin_: init perl
    use strict;
    use warnings;
    use XML::Twig;

### begin_: init vars
    my  $sXML  = join "", (<DATA>);

    ### init params
    my  $params = [qw(none nsgmls nice indented record record_c)];
    my  $sPrettyFormat  = $params->[3] || 'none';

### begin_: process
    my  $twig= new XML::Twig;
    $twig->set_indent(" "x2);
    $twig->parse( $sXML );
    $twig->set_pretty_print( $sPrettyFormat );
    $sXML      = $twig->sprint;

### begin_: output
    print $sXML;

### begin_: sample data
    1;
    __END__
<table><tr age="35" >
<fname>Homer</fname>
<lname>Simpson</lname></tr>
<tr age="33" >
<fname>Barney</fname>
<lname>Rubble</lname></tr>
<tr age="29" >
<fname>Betty</fname>
<lname>Rubble</lname></tr></table> 
```

它缩进和打印是正确的......但是，我需要从`XML`文件中读取它，缩进然后将其以新格式重新写入同一个文件。我完全是新手`Perl`，我怎么能从文件中读取输入，而不是样本数据，然后使用上面的代码缩进？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:34:22.120

怎么样

```
my $file= $ARGV[0];
XML::Twig->new( pretty_print => 'indented')
         ->parsefile( $file )
         ->print_to_file( $file); 
```

无需将缩进设置为 2 个空格，这是默认设置。最后的 1 也不是必需的，只有模块需要它，以通知解析器它们已正确加载。

这也相当于`xml_pp -i myfile.xml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:55:36.540

读取和写入整个文件的最简单方法可能是模块`File::Slurp`。它使它变得如此简单：

```
use File::Slurp;
my $content = read_file('some_file.xml');
# do stuff
write_file('some_file.xml', $content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:55:58.040

[XML::Simple](http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm)是您所需要的。它不关心DTD。它可以读取和写入您的 XML 并缩进它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:56:39.150

详情见[公开](http://p3rl.org/open)：

```
open my $XML, '<', $filename or die $!;
my $sXML  = join "", (<$XML>);
close $XML;

# ...

open my $OUT, '>', 'file.xml' or die $!;
print {$OUT} $sXML;
close $OUT; 
```

# c++ - const rvalue 编译器的区别

> ID：12160782
> 
> 赞同：7
> 
> 时间：2012-08-28T13:52:57.433
> 
> 标签：c++, c++11, rvalue-reference

考虑这段代码：

```
#include <iostream>

void f(int&& i)
{
    std::cout << "f(int&&)\n";
}

void f(const int&& i)
{
    std::cout << "f(const int&&)\n";
}

int fun_i()
{
    return 0;
}

const int fun_ci()
{
    return 0;
}

int main()
{
    f(fun_i());
    f(fun_ci());
} 
```

如果我用 MSVC 2012 编译它，输出是：

```
f(int&&)
f(const int&&) 
```

如果我用 GCC 4.7 编译，输出是：

```
f(int&&)
f(int&&) 
```

哪个是对的？

（如果我删除 f 的第二个定义，程序将无法在 MSVC 2012 下编译，但在 GCC 4.7 下会编译。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T14:01:22.673

海湾合作委员会是正确的。从 3.10 左值和右值 [basic.lval] 的第 4 段：

> 类纯右值可以有 cv 限定类型；非类纯右值总是有 cv 非限定类型。[...]

诸如此类的函数调用`fun_ci()`实际上是prvalue*，因此具有类型`int`，而不是`const int`。`int&&`是比 更好的匹配`const int&&`，并且应该由重载决议选择。

*：习惯上说顶级 cv 限定符对于非类返回类型被忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:01:39.223

我倾向于说 gcc 似乎在做正确的事情，基于它发出的警告：

```
stieber@gatekeeper:~$ g++ -std=c++11 -Wignored-qualifiers Test.cpp
Test.cpp:20:18: warning: type qualifiers ignored on function return type [-Wignored-qualifiers] 
```

# java - 是否可以从 XSLT 样式表中实例化 Java 表单？

> ID：12160783
> 
> 赞同：0
> 
> 时间：2012-08-28T13:52:59.143
> 
> 标签：java, xml, forms, xslt, instantiation

我不精通 Java 和 XML/XSLT，但我继承了一个使用两者的项目，我的情况归结为：我有一个 XSLT 样式表，它使用 Xalan 根据 XML 中的数据修改数据库文档。我希望能够与现有的数据库信息进行比较，如果找到可能的匹配项，则实例化一个 Java 表单以询问用户是否覆盖匹配信息，或保留它，或修改它或其他什么，然后根据用户输入修改数据库。

我找到了很多关于如何调用 Java 方法的建议，这个项目显然使用了它们，但是我从来没有见过任何关于实例化表单的东西……可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:54:24.537

原则上可以从 Xalan 调用任何 Java 方法，包括与用户通信的方法。但我不确定这是一个好的设计。我会颠倒逻辑：有一个 Java 应用程序在 Java 中做最好的事情，它调用 XSLT 样式表来做在 XSLT 中最好做的事情。

# javascript - jQuery Deferred/Promise 设计模式和用例

> ID：12160785
> 
> 赞同：5
> 
> 时间：2012-08-28T13:53:05.503
> 
> 标签：javascript, jquery, oop, design-patterns, jquery-deferred

*我的问题很笼统，可以在 SO 上找到一些相关问题，但这些都不是我想要的。*

我一直在阅读/玩弄[jQuery Deferred 对象](http://api.jquery.com/category/deferred-object/)，我发现它在库本身中被大量用于处理 ajax 请求和动画等。我了解一般功能，并认为它已被证明在某些情况下非常有用. jQuery 库使用这个概念非常优雅地解决了一些问题。

现在我的问题是：我认为概述可以使用 Deferred 对象优雅而稳健地解决的不同问题/解决方案场景将非常有用。

在哪些情况下需要使用 jQuery Deferred 的解决方案？使用 jQuery Deferred 功能可以最优雅地解决 javascript 软件设计中的哪些通用模式？本着每个 OO 分析师都知道的四种设计模式的精神，我的目标是编制一个非常**通用的模式列表（而不是非常具体的示例）。**

有了这样的清单，在设计 jQuery 解决方案时，利用这些延迟模式应该成为第二天性，就像桥、工厂、...模式已经帮助我们设计灵活和健壮的解决方案一样无需每次都重新发明轮子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T19:15:47.223

异步任务大致分为 5 个不同的问题域。

# 网络/本地数据请求

可能是最常见的，并且被 Fabrizio Calderan 的回答很好地涵盖了。在这些情况下，我们必须处理至少 2 个结果，并根据粒度（请求的各种成功或错误类型），然后对它们采取行动。

Deferred/Promises 允许我们链接或并行化请求，或两者的混合，以实现我们任务所需的资源加载。例如，我们可以等待一系列请求完成，然后再加载更多请求，或者根据这些结果执行其他操作。

# 动画

链接/并行动画序列，更易于实现和维护。基于不同结果的条件步骤（考虑用户交互或随机因素时）也很容易实现和维护。

# （伪）模态用户交互

真正的模态操作在浏览器中是不可能的，并且呈现对话框、向导等需要 Deferred/Promises 提供的异步操作来处理已解决的结果（成功、活动、选项、取消等），然后再清理显示（也简化，如前所述）并恢复正常运行。Deferred/Promises 允许您以相对简单的声明方式对这些结果采取行动。

这有效地将用户交互与动画/显示序列相结合。

# 硬件可用性/响应

移动设备的可用性（例如通过 PhoneGap）需要在调用它们以获取服务之前得到保证，并且在许多情况下，需要异步提供响应。使用 Deferred /Promises 可以简化和改进管理这些设备交互的代码。

# 软件组件活动

具体来说，SQLLite 以异步方式提供对 JS 请求的响应，因此进行复杂的查询交互比使用回调要简单得多。

理论上，这适用于任何提供异步响应的辅助软件组件。

# 还有一件事...

这是我读过的关于 Deferred/Promises 的最好的文章之一，我建议阅读它以获得一些适当的深入示例和解释。

*   [http://sitr.us/2012/07/31/promise-pipelines-in-javascript.html](http://sitr.us/2012/07/31/promise-pipelines-in-javascript.html)

# tl;博士

Deferred/Promises 的最大好处是，它们使多个领域的解决方案更容易首先构思和维护。在某些情况下，他们将它们简化得如此之多，如果他们尝试使用回调和复杂的结果检查，许多成年成年人（可能还有一些小孩）

### ...会从这个...

![我们在船上，我们正在使用 Deferred/Promises](../Images/8b7730dbfd287a4e144a53c887024524.png)

### 对此...

![回调是一场噩梦](../Images/f4046ee1b776a6d791469dca67d5a32a.png)

如果一个解决方案需要链接，等待一个或多个进程的结果来解决，或者这些的任何组合，Deferred/Promises 将帮助您避免沮丧和痛苦，并且对于继承您的代码的任何人都会这样做。

^(现在出去，通过可怕的虐待来证明我错了。不，真的，不要那样做。编写干净、可维护的代码。)

^(免责声明：在您的代码中使用 Deferred/Promises 可能不会让人觉得您是“在船上”，但它会比由回调组成的汤要好得多)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T14:20:29.090

> 在哪些情况下需要使用 jQuery Deferred 的解决方案

我认为作为一个经验法则，每次你都有

1.  一个或多个异步任务
2.  一些相关的回调取决于这些任务的成功/失败

您可以尝试根据延迟对象和承诺重构您的代码。最多可以使用延迟对象的最常见场景涉及

*   Ajax 请求和回调（单个请求、并行或链接请求）
*   异步加载要在事件中执行的资产和操作`load`（例如，像这样的图像预加载器：[https](https://gist.github.com/958683) ://gist.github.com/958683 ）
*   在完成动画或需要大量嵌套作用域的大量顺序动画后执行的回调：只需将方法链接到`promise()`方法即可轻松实现，`animate()`以便返回要处理`done()`回调的承诺（老实说，我无法真正弄清楚动画是如何失败的）

希望这个提示在某种程度上有用。

# c# - WinForms TabControl 隐藏选项卡并禁用所有键盘快捷键

> ID：12160786
> 
> 赞同：1
> 
> 时间：2012-08-28T13:53:08.493
> 
> 标签：c#, winforms, tabcontrol

我正在尝试扩展 TabControl 以隐藏所有选项卡。根据 Hans Passant 的回答（[https://stackoverflow.com/a/2207774/965722](https://stackoverflow.com/a/2207774/965722)），我创建了如下代码：

```
using System;
using System.Windows.Forms;

class ViewStack : TabControl
{
    protected override void WndProc(ref Message m)
    {
        // Hide tabs by trapping the TCM_ADJUSTRECT message
        if (m.Msg == 0x1328 && !DesignMode) m.Result = (IntPtr)1;
        else base.WndProc(ref m);
    }

    protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
    {
        if (keyData == (Keys.Control | Keys.Tab) || keyData == (Keys.Control | Keys.Shift | Keys.Tab) || keyData == (Keys.Left) || keyData == (Keys.Right))
        {
            return true;
        }
        return base.ProcessCmdKey(ref msg, keyData);
    }
} 
```

这种方式选项卡在设计模式下可见并隐藏在可执行文件中。我需要做的是禁用此控件的所有可能的内置键盘快捷键，以便更改选项卡只能通过代码使用。

目前，我已使用 Ctrl + Tab、Ctrl + Shift + Tab 和左/右箭头阻止导航。

我应该阻止哪些其他快捷方式以使最终用户无法自行更改选项卡（使用 TabControl 中构建的任何组合键）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T19:33:04.313

您可以使用：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {            
        if(keyData == (Keys.Control | Keys.Tab) || keyData == (Keys.Control | Keys.Shift | Keys.Tab) || keyData == Keys.Left || keyData == Keys.Right || keyData == Keys.Home || keyData == Keys.End) {
            return true;
        }
        return base.ProcessCmdKey(ref msg, keyData);
    } 
```

这应该可以解决您的问题。

# php - 使用 PHP 制作 GIF 动画

> ID：12160791
> 
> 赞同：2
> 
> 时间：2012-08-28T13:53:29.133
> 
> 标签：php, jquery-animate, png, gif

我想创建一个具有透明背景的动画像素的 GIF 图像，它从 Javascript 中获取颜色。我尝试使用这个 ： [http](http://www.phpclasses.org/package/3163-PHP-Generate-GIF-animations-from-a-set-of-GIF-images.html) ://www.phpclasses.org/package/3163-PHP-Generate-GIF-animations-from-a-set-of-GIF-images.html 这个：[http://www.jeroenvanwissen .nl/weblog/php/howto-generate-animated-gif-with-php](http://www.jeroenvanwissen.nl/weblog/php/howto-generate-animated-gif-with-php) 但是，我有一个问题。我创建了这段代码：

```
<?php
header ('Content-type:image/gif');
include('GIFEncoder.class.php');

// Open the first source image and add the text.
$image = imagecreatefrompng('None.png');
imagesavealpha($image, true);
$color = $_GET["sc"];
$r_bg = hexdec(substr($color,0,2));
$g_bg = hexdec(substr($color,2,2));
$b_bg = hexdec(substr($color,4,2));
$c1 = imagecolorallocate($image, $r_bg, $g_bg, $b_bg);
imagesetpixel($image,36,24,$c1);
imagesetpixel($image,36,25,$c1);
imagesetpixel($image,36,26,$c1);
imagesetpixel($image,37,26,$c1);
imagesetpixel($image,38,26,$c1);
imagesetpixel($image,38,25,$c1);
imagesetpixel($image,38,24,$c1);
imagesetpixel($image,37,24,$c1);

// Generate GIF from the $image
// We want to put the binary GIF data into an array to be used later,
//  so we use the output buffer.
ob_start();
imagegif($image);
$frames[]=ob_get_contents();
$framed[]=40;

// Delay in the animation.
ob_end_clean();

// And again..
// Open the first source image and add the text.
$image = imagecreatefrompng('None.png');
imagesavealpha($image, true);
$color = $_GET["sc"];
$r_bg = hexdec(substr($color,0,2));
$g_bg = hexdec(substr($color,2,2));
$b_bg = hexdec(substr($color,4,2));
$c1 = imagecolorallocate($image, $r_bg, $g_bg, $b_bg);
imagesetpixel($image,34,23,$c1);
imagesetpixel($image,34,24,$c1);
imagesetpixel($image,34,25,$c1);
imagesetpixel($image,34,26,$c1);
imagesetpixel($image,34,27,$c1);
imagesetpixel($image,35,28,$c1);
imagesetpixel($image,36,28,$c1);
imagesetpixel($image,37,28,$c1);
imagesetpixel($image,38,28,$c1);
imagesetpixel($image,39,28,$c1);
imagesetpixel($image,40,27,$c1);
imagesetpixel($image,40,26,$c1);
imagesetpixel($image,40,25,$c1);
imagesetpixel($image,40,24,$c1);
imagesetpixel($image,40,23,$c1);
imagesetpixel($image,39,22,$c1);
imagesetpixel($image,38,22,$c1);
imagesetpixel($image,37,22,$c1);
imagesetpixel($image,36,22,$c1);
imagesetpixel($image,35,22,$c1);

// Generate GIF from the $image
// We want to put the binary GIF data into an array to be used later,
//  so we use the output buffer.
ob_start();
imagegif($image);
$frames[]=ob_get_contents();
$framed[]=40;

// Delay in the animation.
ob_end_clean();

// Generate the animated gif and output to screen.
$gif = new GIFEncoder($frames,$framed,0,2,0,0,0,'bin');
echo $gif->GetAnimation();
?> 
```

我得到一个十六进制颜色代码，然后将其更改为 RGB。但是，我收到这些错误：

```
<br />
<b>Notice</b>:  Use of undefined constant ERR00 - assumed 'ERR00' in <b>D:\Testing\xampp\htdocs\Test\Test.php</</b> on line <b>75</b><br />
<br />
<b>Notice</b>:  Use of undefined constant ERR01 - assumed 'ERR01' in <b>D:\Testing\xampp\htdocs\Test\Test.php</</b> on line <b>75</b><br />
<br />
<b>Notice</b>:  Use of undefined constant ERR02 - assumed 'ERR02' in <b>D:\Testing\xampp\htdocs\Test\Test.php</b> on line <b>75</b><br />
<br />
<b>Notice</b>:  Use of undefined constant ERR03 - assumed 'ERR03' in <b>D:\Testing\xampp\htdocs\Test\Test.php</b> on line <b>75</b><br />
GIF89a2 
```

我不知道这是问题所在。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:08:42.163

检查你的 GIFEncoder 类。有一些未定义的变量。试着检查`empty($for_all_vars);`

或检查[一下](http://www.phpclasses.org/discuss/package/3163/thread/16/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T20:35:04.337

供将来参考：我今天遇到了这个错误。发生这种情况是因为那个 10 年以上的`GIFEncoder`库中有错误的语法。在`$ERR`定义数组的地方，缺少数组键周围的引号。

正确的代码片段必须是：

```
var $ERR = Array (
    'ERR00'=>"Does not supported function for only one image!",
    'ERR01'=>"Source is not a GIF image!",
    'ERR02'=>"Unintelligible flag ",
    'ERR03'=>"Does not make animation from animated GIF source",
); 
```

*（注意 ERR00 到 ERR03 周围的引号，这些在网络上浮动的原始文件中丢失了。）*

希望这可以帮助某人。

# java - 字符串的哈希码

> ID：12160792
> 
> 赞同：1
> 
> 时间：2012-08-28T13:53:36.700
> 
> 标签：java, string, object

当我们尝试使用打印任何对象时，`toString()`我们会得到 HashCode（如果`toString()`没有被覆盖）。但是，如果我想打印字符串变量的哈希码，我该怎么办。这个问题是关于Java的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T13:54:53.733

只需调用`hashCode()`对象`String`：

```
String s = "Hello World";
System.out.println(s.hashCode()); 
```

如果您希望它采用与 相同的格式`Object.toString()`，请尝试以下操作：

```
System.out.println(Integer.toHexString(s.hashCode())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:54:48.000

`hashCode()`您可以通过调用该方法获取任何 Java 对象的哈希码。结果将是`int`您可以打印或使用它做任何其他事情。

如果您对 的实现感兴趣，`Object.toString`很容易在[grepcode](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Object.java#236)中查看。它说：

```
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T13:55:00.583

```
System.out.println("Some String".hashCode()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T13:55:31.763

只需调用该`hashcode()`方法。它来自`Object`.

```
String str = "mystring";
System.out.println(str.hashCode()); 
```

# asp.net - Response.Redirect 到 asp.net 中的远程 pdf url

> ID：12160794
> 
> 赞同：1
> 
> 时间：2012-08-28T13:53:42.957
> 
> 标签：asp.net

我有几个 asp.net 链接按钮，不能将它们更改为 asp.net 超链接。我想在单击按钮时打开一个 pdf 文件，而 pdf 文件位于链接按钮所在的[http://www.sourceserver.com的不同服务器（例如](http://www.sourceserver.com)[http://www.targetserver.com/sample.pdf](http://www.targetserver.com/sample.pdf)）上. 想在同一个窗口中打开 pdf。我可以使用 Response.Redirect 以某种方式传入在同一窗口中打开 pdf 的 pdf url 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:55:36.707

是的，只要您传递完全限定的 URL，响应重定向就可以正常工作。

```
Response.Redirect("http://www.site.com/target.pdf"); 
```

应将浏览器重定向到 PDF 文件。

[Response.Redirect](http://msdn.microsoft.com/en-us/library/ms524309%28v=VS.90%29.aspx)通过向浏览器发送 HTTP 302 来工作，因此目标可以位于同一台服务器或另一台服务器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:02:21.303

您可以像这样使用 Response.Redirect ：

```
Response.Redirect("http://www.targetserver.com/sample.pdf"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:01:50.690

试试这个：

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
   Response.Redirect("http://www.targetserver.com/sample.pdf");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:47:44.233

> 我已经尝试过 Response.Redirect("targetserver.com/sample.pdf";) 但它的导航方式如下 sourceserver.com/www.targetserver.com/sample.pdf

当然，因为如果您不指定协议，它假定您指的是位于服务器上的某个文件。`http://`在这种情况下，您需要追加。

此外，“发生什么”的操作取决于用户的客户端。如果客户没有安装 Adob​​e Reader 或将浏览器设置为保存文件而不是打开文件，则显然无法打开。如果您想确保文件在浏览器中打开，您需要在您的网站上实现一些 pdf 阅读器。

# wcf - WCF 数据服务 DataServiceKey 属性不起作用

> ID：12160799
> 
> 赞同：1
> 
> 时间：2012-08-28T13:53:55.933
> 
> 标签：wcf, linq-to-sql, wcf-data-services

我正在开始开发 WCF 数据服务项目。我收到了臭名昭著的例外：

> 异常消息是“在数据上下文类型“DataClasses1DataContext”上，有一个顶级 IQueryable 属性“table1”，其元素类型不是实体类型。确保 IQueryable 属性是实体类型或在数据上下文类型上指定 IgnoreProperties 属性以忽略此属性

我使用 DataServiceKey 属性修改了我的实体的部分类。但是，我仍然收到同样的错误。我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:25:13.003

正如 Vitek 所说，解决方案是将 Microsoft.Data.Services 和 Microsoft.Data.Services.Client 的引用添加到我使用 DataServiceKey 属性的项目中。

# android - 我无法让我的软键盘出现在 4.0+ 模拟器上

> ID：12160801
> 
> 赞同：0
> 
> 时间：2012-08-28T13:53:57.217
> 
> 标签：android, android-emulator, android-softkeyboard, android-4.0-ice-cream-sandwich

应该很容易让软键盘出现在 Android 4.0+ 模拟器上。我在 AVD 管理器中添加键盘参数并将其设置为“否”或手动编辑`config.ini`文件。我都做了，但是当我按下时软键盘没有出现`EditText`。这是我的模拟器的配置文件的样子：

```
hw.accelerometer=yes
hw.lcd.density=160
sdcard.size=500M
skin.name=WXGA800
skin.path=platforms/android-15/skins/WXGA800
hw.cpu.arch=x86
hw.keyboard.lid=no
hw.keyboard=no
abi.type=x86
vm.heapSize=48
hw.ramSize=1024
hw.gpu.enabled=yes
image.sysdir.1=system-images/android-15/x86/ 
```

反正软键盘还是不行！

我在哪里犯错？

# string - 字符串的漂亮打印（确保自动换行符保持在给定的打印边距内）

> ID：12160803
> 
> 赞同：7
> 
> 时间：2012-08-28T13:54:10.337
> 
> 标签：string, r, pretty-print

对于与字符串相关的所有内容，尤其是关于定制消息（警告、错误等），我尽量坚持 80 个字符的打印边距。

现在，我一直想知道是否有一种简单的方法可以确保自动确保/强制执行某些打印边距限制，例如，如果给定的原子字符串超过了所选的打印边距，则会自动将其分解为字符串向量。我用谷歌搜索了一下，但并没有真正找到适合我需要的东西。

## 问题

有人想出了一个不错的“漂亮打印”功能，但我可以进一步构建吗？

* * *

到目前为止，这是我自己想出的：

## 函数定义

```
makePretty <- function(
    string,
    print.margin=80,
    ...
){
    out <- string
    if (nchar(string) > print.margin) {
        times       <- ceiling(nchar(string)/print.margin)
        breaks      <- rep(print.margin+1, times)
        breaks      <- cumsum(breaks)
        string.spl  <- unlist(strsplit(string, split=" "))
        seps        <- str_locate_all(string, " ")[[1]][,"start"]
        queue       <- NA

        envir <- environment()
        out <- unlist(sapply(1:length(breaks), function(ii) {
            idx.next    <- breaks[ii]
            if (ii < length(breaks)) {
                idx <- which(seps <= idx.next)
                chunk <- string.spl[idx]
                envir$string.spl   <- envir$string.spl[-idx]
                envir$seps      <- envir$seps[-idx]       
            } else {
                chunk <- string.spl
            }
            chunk <- paste(chunk, collapse=" ")
            # Chunk could exceed print margin in case the right hand neighbor
            # wasn't a blank >> check again 
            if (nchar(chunk) > print.margin) {
                chunk <- makePretty(string=chunk, print.margin=print.margin)
                envir$queue <- chunk[length(chunk)]
                chunk <- chunk[-length(chunk)]
            } else {
                if (!is.na(envir$queue)) {
                    # Prepend chunk with queued chunk
                    chunk <- paste(envir$queue, chunk, sep=" ")
                    # Reset queue
                    envir$queue <- NA
                }
            }
            # /
            out <- chunk
            return(out)
        })) 
    }
    return(out)
} 
```

## 功能应用

```
string <- "This is just an example of a very long character string that exceeds the default print margin of 80 and therefore needs some pretty printing. In fact it's so long that it needs to be broken down into three parts."
> makePretty(string=string)
[1] "This is just an example of a very long character string that exceeds the default"
[2] "print margin of 80 and therefore needs some pretty printing. In fact it's so"    
[3] "long that it needs to be broken down into three parts."      

> string <- "This is just an example of a very long character string that exceeds a certain print margin and therefore needs some pretty printing. In fact it's so long that it needs to be broken down into numerous parts."
> makePretty(string=string, print.margin=40)
[1] "This is just an example of a very long"       
[2] "character string that exceeds a certain"      
[3] "print margin and therefore needs some"        
[4] "pretty printing. In fact it's so long"        
[5] "that it needs to be broken down into numerous"
[6] "parts."    

string <- "This is just an example of a very long character string that exceeds the default print margin of 80 and therefore needs some pretty printing. In fact it's so looooooooooooooooooooooooooooooooong that it needs to be broken down into four parts."
> makePretty(string=string)
[1] "This is just an example of a very long character string that exceeds the default"
[2] "print margin of 80 and therefore needs some pretty printing. In fact it's so"    
[3] "looooooooooooooooooooooooooooooooong that it needs to be broken down into four"  
[4] "parts." 

string <- "This is just an example of a very long character string that exceeds the default print margin of 80 and therefore needs some pretty printing. In fact it's soooooooo looooooooooooooooooooooooooooooooong that it needs to be broken down into four parts."
> makePretty(string=string)
[1] "This is just an example of a very long character string that exceeds the default"
[2] "print margin of 80 and therefore needs some pretty printing. In fact it's"       
[3] "soooooooo looooooooooooooooooooooooooooooooong that it needs to be broken down"  
[4] "into four parts." 
```

到目前为止，该方法仅依靠空格来确定哪些词属于一起——这可能不涵盖其他“现实世界场景”，例如冒号、分号等。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-28T13:58:39.040

基本 R 函数`strwrap`似乎完全符合您的描述：

```
strwrap(x, width=80)
[1] "This is just an example of a very long character string that exceeds the"    
[2] "default print margin of 80 and therefore needs some pretty printing. In fact"
[3] "it's so long that it needs to be broken down into three parts."              

strwrap(x, 40)
[1] "This is just an example of a very long" "character string that exceeds the"     
[3] "default print margin of 80 and"         "therefore needs some pretty printing." 
[5] "In fact it's so long that it needs to"  "be broken down into three parts." 
```

* * *

您可以使用`paste`with 参数`collapse="\n"`将这些片段组合成一个带有换行符的字符串：

```
cat(paste(strwrap(x, 40), collapse="\n"))
This is just an example of a very long
character string that exceeds the
default print margin of 80 and
therefore needs some pretty printing.
In fact it's so long that it needs to
be broken down into three parts. 
```

# perl - 如何轻松提取图像的颜色百分比？

> ID：12160812
> 
> 赞同：3
> 
> 时间：2012-08-28T13:54:46.857
> 
> 标签：perl, colors, imagemagick, extraction

我需要提取图像的颜色信息，以便以后能够根据颜色的百分比搜索图像。我想为此使用[ImageMagick](http://www.imagemagick.org)。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T14:28:06.540

ImageMagick 有一个`Histogram`方法可以返回图像中颜色的列表以及它们出现的频率。它的文档记录很差，界面也很糟糕，但我过去曾使用过它，所以我提供了一些有用的代码：

```
my @hist_data = $image->Histogram;
my @hist_entries;
# Histogram returns data as a single list, but the list is actually groups of
# 5 elements. Turn it into a list of useful hashes.
while (@hist_data) {
    my ($r, $g, $b, $a, $count) = splice @hist_data, 0, 5;
    push @hist_entries, {
        r => $r,
        g => $g,
        b => $b,
        alpha => $a,
        count => $count,
    };
}
# Sort the colors in decreasing order
@hist_entries = sort { $b->{count} <=> $a->{count} } @hist_entries; 
```

但是，根据您要执行的操作，直方图并不像全彩色图像那样有用，因为相同颜色的色调会有很多细微差别，计数在它们之间分配直方图。一个有用的预处理步骤是调用`$image->Segment(colorspace => 'rgb')`图像的克隆，它会找到相似颜色的区域并将整个区域替换为其平均颜色。然后，当您打电话时，`Histogram`您会看到更少颜色的更多计数，以及更具代表性的数据。

# java - 更改 SQLCipher Android 中的密钥

> ID：12160813
> 
> 赞同：2
> 
> 时间：2012-08-28T13:54:47.763
> 
> 标签：java, android, sqlcipher

您如何以编程方式更改 Android 中 SQLCipher 数据库的密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:13:15.303

您可以通过执行`PRAGMA rekey`命令来重新设置数据库的密钥。更多信息可以在[这里](http://sqlcipher.net/sqlcipher-api/#rekey)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:00:59.503

看看这个网址

[https://guardianproject.info/code/sqlcipher/](https://guardianproject.info/code/sqlcipher/)

Android 现在正式移植 SQLCipher 核心项目！更多信息：[http ://sqlcipher.net/sqlcipher-for-android/](http://sqlcipher.net/sqlcipher-for-android/)

源代码和二进制文件：[https ://github.com/sqlcipher/android-database-sqlcipher](https://github.com/sqlcipher/android-database-sqlcipher)

# android - 手机休眠时停止定时器

> ID：12160815
> 
> 赞同：0
> 
> 时间：2012-08-28T13:54:49.127
> 
> 标签：android, timer, sleep

我正在我的应用程序的第一个屏幕上启动计时器。问题出在手机进入睡眠状态时。Timer 触发的动作无法访问网络，导致应用崩溃。我的解决方案是在手机进入睡眠状态时停止/重新启动计时器。

那么有没有我可以从 Application 类中实现的方法，例如 onLowMemory() 或 onTerminate()。onSleep() 和 onWake() 会很好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:58:19.697

在`Activity`您的第一个屏幕的代码中，您可以在那里覆盖`onStop`或`onPause`取消您的计时器。选择最适合您的目的的一个。

`onResume`然后，您可以在或被`onStart`调用时重新启动计时器。

# python - 如何从 python 脚本中将参数传递给 cmd.exe？

> ID：12160816
> 
> 赞同：1
> 
> 时间：2012-08-28T13:54:48.470
> 
> 标签：python, subprocess, command-line-arguments, cmd

我希望能够从 Python 脚本和带有参数的特定命令运行 cmd.exe，但我似乎无法让它工作。

我试过了

```
cmdL = r"C:\WINDOWS\system32\cmd.exe"
schTasks = "schtasks.exe"
#run the schtasks.exe
os.system(cmdL + schTasks) 
```

但是dos窗口出现然后很快消失。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:00:19.537

从 Python 脚本执行进程的现代方法是使用[subprocess](http://docs.python.org/library/subprocess.html)模块：

```
import subprocess
subprocess.call(["schtasks.exe"]) 
```

您还可以传递参数，例如：

```
subprocess.call(["ls", "-l"]) 
```

这意味着您不需要使用`cmd.exe`. Python 将根据需要使用给定的参数执行给定的可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:58:49.393

你忘记了`cmd.exe`和论点之间的空格。

```
os.system("%s %s" % (cmdL, schTasks)) 
```

`subprocess`尽管如此，与其他答案一样，这是更好的方法。

# weka - 在 Weka 中运行哪个版本的 SVM？

> ID：12160820
> 
> 赞同：0
> 
> 时间：2012-08-28T13:54:53.460
> 
> 标签：weka, svm, libsvm

我需要使用 Weka 的 LibSVM 实现的 SVM 分类器对 RSS 提要中的关键字频率进行分类，以将提要分类为目标类别。但是根据我的数据，我不确定要运行哪个版本。

我的 .arff 文件通常包含以下数据：

```
@attribute Keyword_1_nasa_Frequency numeric
@attribute Keyword_2_fish_Frequency numeric
@attribute Keyword_3_kill_Frequency numeric
@attribute Keyword_4_show_Frequency numeric
…
@attribute RSSFeedCategoryDescription {BFE,FCL,F,M, NCA, SNT,S}

@data
0,0,0,34,0,0,0,0,0,40,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
0,0,0,12,0,0,0,0,0,20,0,0,0,0,0,0,0,0,0,0,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
0,0,0,10,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
…
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,FCL
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,F
…
20,0,64,19,0,162,0,0,36,72,179,24,24,47,24,40,0,48,0,0,0,97,24,0,48,205,143,62,7
8,0,0,216,0,36,24,24,0,0,24,0,0,0,0,140,24,0,0,0,0,72,176,0,0,144,48,0,38,0,284,
221,72,0,72,0,SNT
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,SNT
0,0,0,0,0,0,11,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0,0,0,0,0,20,0,S 
```

依此类推：总共有 570 行，其中每一行都包含一天中某个关键字在提要中的频率。在这种情况下，有 10 天的 57 个提要，总共有 570 条要分类的记录。每个关键字都以代理编号为前缀，并以“频率”为后缀。

但在其他情况下，我使用布尔值作为频率，因此上面的第一行是：

假，假，假，真，假...，BFE

依此类推，其中 34 为真，因为满足阈值，其他为假，因为未满足阈值。

根据我可以确定的情况，Weka 中有三种类型的 SVM，但是谁能告诉我我应该对上面的数据使用哪种类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:54:08.133

我建议尝试所有三种内核类型，并确定哪一种最适合您的训练和验证数据（绘制图表），然后继续使用该训练模型来预测新的输入。

在 weka 中，您可以保存模型以备将来使用。

# javascript - 添加到 Visual Studio intellisense _reference.js 文件的引用的大小或数量是否有限制？

> ID：12160831
> 
> 赞同：0
> 
> 时间：2012-08-28T13:55:28.533
> 
> 标签：javascript, intellisense

我们正在使用 Google 闭包并有一个流程（使用构建事件），该流程采用`goog.require`and`goog.provide`语句（用于定义文件之间的依赖关系）来创建依赖关系树，然后派生`_reference.js`文件的内容（基本上是所有文件的引用项目内）。这个过程的最终目的是让任何文件中项目中的每个类都有智能感知。我们面临的问题是我们没有获得所有文件的 Intellisense，而只是`N`参考列表中的第一个。如果我们将`_reference.js`文件分成几个文件，它似乎可以解决问题，所以我们想知道可以添加到`_reference.js`文件，或者我们用这种方法做了一些本质上的错误。有什么建议吗？

`Ctrl+J`没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:04:16.010

您可以尝试显式调用 IntelliSense（通常为 Ctrl + j）并查看是否有帮助（显式调用将为 IntelliSense 提供更多时间来响应和建立上下文）

IntelliSense 是通过伪执行 JavaScript 生成的，因此处理大型/复杂文件所需的时间比 IntelliSense 响应能力所允许的要长。

我不完全确定为什么您的方法不起作用。它应该通过处理每个文件然后保存结果以供下一次调用，从它停止的地方开始工作。

我正在考虑将一个大文件分成较小的文件，让它有更多的地方可以从它停止的地方继续。

# c++ - 我可以使用哪个工具来跟踪 C++ 程序中每个函数的效率？

> ID：12160834
> 
> 赞同：0
> 
> 时间：2012-08-28T13:55:31.567
> 
> 标签：c++

我现在正在开发一个比较大的 C++ 程序，它由几个函数组成。C++ 程序将按顺序运行这些函数。我想知道的是每个函数会占用多少时间和多少内存。对于时间消耗，一种解决方案是使用[BOOST::Timer](http://www.boost.org/doc/libs/1_41_0/libs/timer/timer.htm)库。但是，对于内存使用，我找不到合适的库来完成这项工作。我想知道你是否对这个问题有一些想法。此外，有人知道一些可以创建类似于[MATLAB 配置文件](http://www.mathworks.nl/help/techdoc/ref/profile.html)的程序效率报告的工具吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:01:55.430

您没有指定您的操作系统或编译器。您想要的通常称为*profiler*。使用计时器进行分析不是一个好主意。对于内存分析查找“heap-profiler”。

如果适用于您的平台，我会推荐 valgrind 的*massif* heap-profiler 和可选*的 massif-visualizer*。

[http://valgrind.org/docs/manual/ms-manual.html](http://valgrind.org/docs/manual/ms-manual.html)

[http://gitorious.org/massif-visualizer](http://gitorious.org/massif-visualizer)

# .net - 如何在我的数据库中安全地存储第 3 方网络服务的密码？

> ID：12160835
> 
> 赞同：9
> 
> 时间：2012-08-28T13:55:32.237
> 
> 标签：.net, sql, encryption, passwords

我需要在我们的配置数据库中存储一个第 3 方密码，以便用户可以将他们的登录信息保存到可以通过我们的服务器访问的 Web 服务。

我需要将密码传递给 Web 服务，所以我不能只是散列密码并存储散列。我需要能够获得发送到服务的实际密码。

出于安全原因，我想加密我们存储在数据库中的密码。我查找的有关加密密码的所有内容似乎都在说“散列，不要加密！” 但我认为这不适用于这种情况。

我想知道是否最好在 VB.NET 代码中处理加密/解密或使用 SQL Server 来完成它（从我[在这里](http://msdn.microsoft.com/en-us/library/ms179331%28v=sql.105%29.aspx)看到的，至少*可以*在 SQL 中完成，但我不确定是否那样有道理。我需要更多地研究以找出部署问题会是什么样子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:35:07.303

我同意乔治·斯托克的观点。如果您可以使用现有的协议 - 使用它（它将减少十倍的可能问题和安全漏洞）。

以防万一，如果您没有选择（不能使用任何协议）。如果您仅在用户在您的服务器上执行某些操作时才需要访问 3rd 方网络服务器，我建议您执行以下操作：

*   不要在数据库中存储密码

*   创建一个带有第 3 方服务密码的 cookie，并使用一些密钥进行加密。将此 cookie 发送回给用户。

*   一旦用户返回您的网站，您将获得 cookie、解密它、从 cookie 中获取密码并使用它来访问 3rd 方网络服务。

因此，在这种情况下，如果有人入侵您的服务器并复制数据库，他们将没有第三方网络服务的密码。在这种情况下，如果有人入侵用户的计算机，所有的 cookie 都会被加密，因此他们将无法对它们做任何事情。

唯一的安全漏洞是，如果有人能够将一些代码注入您的服务器并从活动用户会话中捕获密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:56:01.167

一般来说，最好对正确的密码进行哈希处理，但在您的情况下，这似乎是不可能的。我绝对不建议在 SQL 服务器本身上使用对称密钥进行加密，原因是如果您的 SQL 服务器受到威胁，那么您的加密也会受到威胁（因为密钥将在同一台服务器上）。

我建议的一件事是您在某处使用临时商店，这可能类似于会话中的内容。但是，请小心使用会话和 cookie，因为您可能容易受到 CSRF 攻击和会话/cookie 劫持攻击。您可以做的一件事是让用户输入密码，然后对其进行加密并将其存储在他们的 cookie 中，将他们的客户端 IP 附加到 cookie 中，然后在开头添加一个过期时间戳（这也将使雪崩效应更有效，因为您正在更改明文开头的位）。要求对 Web 服务的请求附加一些在客户端呈现的 CSRF 令牌，并且它是 POST 而不是获取，

如果用户 cookie 被盗，那么他们将无法发出请求，因为它特定于他们的客户端 IP（除非他们欺骗用户 IP，但此时你意识到这个攻击者并不那么聪明，因为我确信有其他更简单的攻击向量，这将为它们提供更大的有效载荷）。如果用户能够以某种方式欺骗 IP，他们将无法长时间使用它，因为超时将使 cookie 无效。如果用户足够聪明，可以很好地破解你的加密算法……那么你几乎一开始就没有机会。

# android - 有本地照片查看器吗？

> ID：12160841
> 
> 赞同：0
> 
> 时间：2012-08-28T13:55:40.473
> 
> 标签：android, android-intent, photo, android-imageview, android-gallery

我正在为 android ICS 构建相机和图库应用程序。我有一个图库视图和相机工作，但现在想添加从图库中单击图像并使用标准缩放手势等使该照片全屏显示的功能。不确定这是否是我必须从头开始编写的东西，或者如果已经有一个本地 ICS 照片查看器，我也可以通过意图附加功能或其他东西传递文件.. 无论哪种方式.. 有人可以给我指一个在线示例?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:03:14.013

您可以使用`Intent.ACTION_VIEW`和`Url`指向照片位置的对象启动手机的照片查看器。请参阅[使用 Intent 启动活动](http://developer.android.com/training/basics/intents/sending.html#StartActivity)。

```
// Build the intent
Intent photoIntent = new Intent(Intent.ACTION_VIEW); 
photoIntent.setDataAndType(Uri.fromFile(new File(path)), "image/png");

// Verify it resolves
PackageManager packageManager = getPackageManager();
List<ResolveInfo> activities = packageManager.queryIntentActivities(photoIntent, 0);
boolean isIntentSafe = activities.size() > 0;

// Start an activity if it's safe
if (isIntentSafe) {
    startActivity(photoIntent);
} 
```

# php - 使用一组字符串生成所有可能的组合

> ID：12160843
> 
> 赞同：3
> 
> 时间：2012-08-28T13:55:43.960
> 
> 标签：php, math, combinations

我正在尝试生成一组字符串的所有可能组合，每个字符串最多使用一次。

*   未定义输出字符串的长度（最大长度是给定字符串的数量，因为您只能使用一次）
*   例如，字符串集`array('A','B')`将生成 A,B,AB,BA。
*   例如，字符串集`array('ABC', 'Z')`将生成“ABC”、“Z”、“ZABC”和“ABCZ”。
*   一个字符串集可以有相同的条目，并且输出不需要是唯一的。例如，字符串集会`array('A', 'A')`生成'A'，'A'，'AA'，'AA'；（我实际上并不需要重复，但我不想让事情变得更困难）

我知道 2 个字符串有 4 种组合 (2=>4) 和 3=>15, 4=>64, 5=>325 ...

由于我不是程序员，我发现它至少“具有挑战性”。嵌套循环很快就太复杂了。一个更简单的解决方案可能是在带有字符串的数组的索引中找到一个模式。但这让我重复使用了字符串......

```
 $strings = array('T','O','RS');
  $num = 0;
  $stringcount = count($strings);
  $variations = array(0,1,4,15,64,325,1956,13699,109600,986409);

  for($i=0;$i<$variations[$stringcount];$i++){
    $index = base_convert($num, 10, $stringcount);
    $array_of_indexes = str_split($index);
    $out='';
    for($j=0;$j<count($array_of_indexes);$j++){
     $out .= $strings[$array_of_indexes[$j]];
    }
    echo $out . '<br />';
    $num++;
  } 
```

结果：T O RS OT OO ORS RST RSO RSRS OTT OTO OTRS OOT OOO OORS

不好，不包括许多重复+许多有效组合

我知道这个解决方案在很多方面都是错误的，但我不知道从哪里开始？有什么建议么？提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:39:10.077

在数学术语中，您要求输入集的所有可能的*非空有序子*集。在整型序列在线百科全书中，此类序列的数量显示为[序列 A007526](http://oeis.org/A007526) - 请注意，该序列以 4、15、64、325 开头，与您所发现的完全一样。

这个问题承认 Python 中有一个非常简短、高效的解决方案，所以我将首先发布该解决方案：

```
def gen_nos(s):
    for i in sorted(s):
        yield i
        s.remove(i)
        for j in gen_nos(s):
            yield i+j
        s.add(i) 
```

例子：

```
>>> list(gen_nos(set(['a', 'b', 'c'])))
['a', 'ab', 'abc', 'ac', 'acb', 'b', 'ba', 'bac', 'bc', 'bca', 'c', 'ca', 'cab', 'cb', 'cba'] 
```

请注意，这`sorted`不是绝对必要的；它只是确保输出按字典顺序排序（否则，元素按集合顺序迭代，这本质上是任意的）。

要将其转换为 PHP，我们必须使用带有额外数组参数的递归函数来保存结果：

```
function gen_nos(&$set, &$results) {
    for($i=0; $i<count($set); $i++) {
        $results[] = $set[$i];
        $tempset = $set;
        array_splice($tempset, $i, 1);
        $tempresults = array();
        gen_nos($tempset, $tempresults);
        foreach($tempresults as $res) {
            $results[] = $set[$i] . $res;
        }
    }
} 
```

例子：

```
$results = array();
$set = array("a", "b", "c");
gen_nos($set, $results);
var_dump($results); 
```

生产

```
array(15) {
  [0]=>
  string(1) "a"
  [1]=>
  string(2) "ab"
  [2]=>
  string(3) "abc"
  [3]=>
  string(2) "ac"
  [4]=>
  string(3) "acb"
  [5]=>
  string(1) "b"
  [6]=>
  string(2) "ba"
  [7]=>
  string(3) "bac"
  [8]=>
  string(2) "bc"
  [9]=>
  string(3) "bca"
  [10]=>
  string(1) "c"
  [11]=>
  string(2) "ca"
  [12]=>
  string(3) "cab"
  [13]=>
  string(2) "cb"
  [14]=>
  string(3) "cba"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T15:28:48.883

这是我使用组合和排列的基本数学定义编写了相当长一段时间的实现。也许这会有所帮助。

```
<?php
/**
 * Generate all the combinations of $num elements in the given array
 *
 * @param array  $array   Given array
 * @param int    $num     Number of elements ot chossen
 * @param int    $start   Starter of the iteration
 * @return array          Result array
 */
function combine($array, $num, $start = 0) {

    static $level = 1;

    static $result = array();

    $cnt = count($array);

    $results = array();

    for($i = $start;$i < $cnt;$i++) {
        if($level < $num ) {
            $result[] = $array[$i];
            $start++;
            $level++;
            $results = array_merge($results, combine($array, $num, $start));
            $level--;
            array_pop($result);
        }
        else {
            $result[] = $array[$i];
            $results[] = $result;
            array_pop($result);
        }
    }

    return $results;
}

/**
 * Generate all the permutations of the elements in the given array
 */
function permute($array) {

    $results = array();

    $cnt = count($array);

    for($i=0;$i<$cnt;$i++) {
        $first = array_shift($array);

        if(count($array) > 2 ) {
            $tmp = permute($array);
        }
        elseif(count($array) == 2) {
            $array_ = $array;
            krsort($array_);
            $tmp = array($array, $array_);
        }
        elseif(count($array) == 1) {
            $tmp = array($array);
        }
        elseif(count($array) == 0) {
            $tmp = array(array());
        }

        foreach($tmp as $k => $t) {
            array_unshift($t, $first);
            $tmp[$k] = $t;
        }

        $results = array_merge($results, $tmp);

        array_push($array, $first);
    }

    return $results;
}

$strings = array('T', 'O', 'RS');
$strings_count = count($strings);

$combinations = array();
for ($i = 1; $i <= $strings_count; $i++) {
  $combination = combine($strings, $i, 0);
  $combinations = array_merge($combinations, $combination);
}

$permutations = array();
foreach($combinations as $combination) {
  $permutation = permute($combination);
  $permutations = array_merge($permutations, $permutation);
}

print_r($combinations);
print_r($permutations); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:39:31.127

这是我天真的递归实现：

```
<?php
// Lists all ways to choose X from an array
function choose($x, array $arr) {
    $ret = array();
    if ($x === 0) {
        // I don't think this will come up.
        return array();
    } else if ($x === 1) {
        foreach ($arr as $val) {
            $ret[] = array($val);
        }
    } else {
        $already_chosen = choose($x - 1, $arr);
        for ($i = 0, $size_i = sizeof($arr); $i < $size_i; $i++) {
            for ($j = 0, $size_j = sizeof($already_chosen); $j < $size_j; $j++) {
                if (!in_array($arr[$i], $already_chosen[$j])) {
                    $ret[] = array_merge(
                        array($arr[$i]),
                        $already_chosen[$j]
                    );
                }
            }
        }
    }
    return $ret;
}

function choose_all($arr) {
    for ($i = 1, $size = sizeof($arr); $i <= $size; $i++) {
        foreach (choose($i, $arr) as $val) {
            echo implode(":", $val).PHP_EOL;
        }
    }
}

choose_all(array(
    "A",
    "B",
));
echo "--".PHP_EOL;
choose_all(array(
    "ABC",
    "Z",
));
echo "--".PHP_EOL;
choose_all(array(
    'T',
    'O',
    'RS'
)); 
```

（当然不知道我做了什么）

[http://codepad.org/5OKhsCJg](http://codepad.org/5OKhsCJg)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-28T14:06:10.437

你需要的数组本质上是一个笛卡尔积。这是集合数学的一个方面，在数据库系统和形式建模语言中很常见。如果您在 Google 上搜索 PHP 的这个术语，将会有许多实现解决方案。

（我从未直接做过任何 PHP，这就是为什么我不想向您发布不正确（或 hacky）的解决方案，但希望这会帮助您走上正确的道路）！

# jquery - jQuery 背景位置在 FireFox 中不起作用？

> ID：12160846
> 
> 赞同：1
> 
> 时间：2012-08-28T13:55:55.597
> 
> 标签：jquery, css, firefox

> **可能重复：**
> [jquery.animate 背景位置不起作用](https://stackoverflow.com/questions/5078262/jquery-animate-background-position-doesnt-work)

我有一个动画背景位置的小脚本，遗憾的是它在 FireFox 中不起作用。
它适用于 IE 和 Chrome。

```
$('#background').animate({
     'background-position-x': -1020
}); 
```

为什么它在 FireFox 中不起作用？
提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:28:59.843

您可以随时创建自己的小插件，这并不难。

使用 jQuery 1.8，我们现在可以访问 $.Animation 方法，该方法直接为我们提供动画值而无需太多工作，因此我们可以执行以下操作：

```
$.fn.animateBG = function(x, y, speed) {
    var pos = this.css('background-position').split(' ');
    this.x = parseInt(pos[0]) || 0;
    this.y = parseInt(pos[1]) || 0;
    $.Animation( this, {
        x: x,
        y: y
      }, { 
        duration: speed
      }).progress(function(e) {
          this.css('background-position', e.tweens[0].now+'px '+e.tweens[1].now+'px');
    });
    return this;
} 
```

然后要使用它，我们可以这样做：

```
$("#background").animateBG(x-value, y-value, speed);​ 
```

实例：$("#background").animateBG("0px", "-45px", 300);​</p>

[**小提琴**](http://jsfiddle.net/HN3Ba/2/)

免责声明：这不是一个完成并经过测试的插件，而是我花了十分钟在 jsFiddle 中创建的东西，但测试它并进行您需要的更改，它应该适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:58:08.277

引用[https://stackoverflow.com/a/8378817/168735](https://stackoverflow.com/a/8378817/168735)

> background-position-x 是非标准 CSS 属性，Firefox 不支持。
> 
> 看：
> 
> [http://snook.ca/archives/html_and_css/background-position-xy](http://snook.ca/archives/html_and_css/background-position-x-y) [https://stackoverflow.com/a/8175460/1011582](https://stackoverflow.com/a/8175460/1011582)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:08:32.360

如前所述，`background-position-x`并且`background-position-y`是非标准的。

您可以探索两种选择：

1.  jQuery 背景动画插件（例如：[http](http://snook.ca/archives/javascript/jquery-bg-image-animations/) ://snook.ca/archives/javascript/jquery-bg-image-animations/ ）
2.  CSS3 过渡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:57:50.447

您可以在此处阅读：http: [//my.safaribooksonline.com/0130092789/ch14lev1sec7](http://my.safaribooksonline.com/0130092789/ch14lev1sec7?portal=oreilly) ?portal=oreilly ，这是 Internet Explorer CSS 特定的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T13:58:49.213

Firefox 不支持`background-position-x`或`background-position-y`. 您应该编写一个简单的函数来计算当前 x 和 y 位置、所需位置并使用它`setTimeout`并`$(el).css`为其设置动画。或者使用 CSS3 动画。

PS对不起，我之前的帖子。

# c# - 易趣 findCompletedItems 返回 null

> ID：12160850
> 
> 赞同：1
> 
> 时间：2012-08-28T13:56:04.710
> 
> 标签：c#, null

我正在尝试使用 FindCompletedItemRequest 查询 eBay，但服务器返回 null

这是代码

```
public static CustomFindingService FindingService(){
CustomFindingService findingService;
log.InfoFormat("Connect to Ebay: START");

findingService = new CustomFindingService("XXXXXX-XXXX-XXXXX-XXXXX-XXXXX");
findingService.UseDefaultCredentials = true;

log.InfoFormat("Connect to Ebay: SUCCESS");
return findingService;
   }

var fcir = new FindCompletedItemsRequest {keywords = "5mp", categoryId =new string[] {"31388"}}; // 31388 is digital cameras
var l = FindingService().findCompletedItems(fcir); 
```

我尝试删除 categoryId 和/切换关键字似乎没有任何帮助。调试向我表明，它正在 ping 服务器，只是服务器返回 null。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T01:57:36.893

我建议您提供*CustomFindingService*的代码。无论如何，我可以尝试解决您的问题。

```
findingService = new CustomFindingService("XXXXXX-XXXX-XXXXX-XXXXX-XXXXX"); 
```

我猜这会以与[查找 API 类似的方式生成请求 - C#.NET 代码示例](https://ebay.custhelp.com/app/answers/detail/a_id/1516/~/finding-api---c#.net-code-sample-to-call-finding-api-using-.net-framework.)，其中 appID 是 X 的系列。我猜你忘了`request.Headers.Add("X-EBAY-SOA-OPERATION-NAME", "findItemsByKeywords");`改成 `request.Headers.Add("X-EBAY-SOA-OPERATION-NAME", "findCompletedItems");`. 简单的解决方案是将请求的类型传递给它。例如。

```
public static CustomFindingService FindingService(string requestType){ // edit
CustomFindingService findingService;
log.InfoFormat("Connect to Ebay: START");

findingService = new CustomFindingService("XXXXXX-XXXX-XXXXX-XXXXX-XXXXX", requestType); // EDIT
findingService.UseDefaultCredentials = true;

log.InfoFormat("Connect to Ebay: SUCCESS");
return findingService;
   }

var fcir = new FindCompletedItemsRequest {keywords = "5mp", categoryId =new string[] {"31388"}}; // 31388 is digital cameras
var l = FindingService(fcir.GetType().Name).findCompletedItems(fcir); // Edit
// Or since you know the Name already just skip the whole get type thing and pass it in directly. 
```

还，

```
log.InfoFormat("Connect to Ebay: SUCCESS");
return findingService; 
```

我敢肯定这是不正确的。您在生成请求时没有连接。而是在`var l = FindingService().findCompletedItems(fcir);`.

# jquery - struts2 jquery在表单提交时加载相同的页面

> ID：12160858
> 
> 赞同：1
> 
> 时间：2012-08-28T13:56:28.163
> 
> 标签：jquery, struts2

我正在使用 struts2（2.1.8 版）和 jquery 插件（1.8.3 版）来构建 Web 应用程序。

我正在设计一个简单的用例，在提交表单时，同一页面会加载到 ui 上，其方式是：1）如果出现验证错误，则应在同一页面上显示验证消息。2）如果有成功消息，该消息将显示在同一页面上。

我面临的问题是，在这两种情况下，struts2 都会重定向到 struts.xml 中指定的结果，但在单独的页面上并且现有页面会消失。

以下是我的主页。（我正在使用选项卡式面板来设计选项卡。）

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<html>
  <head>
    <sj:head jqueryui="true"/>
  </head>
  <body>    
    <s:url var="addUserUrl" action="inputUser"/>
    <s:url var="deleteUserUrl" action="getDeleteUsers"/>  
    <sj:tabbedpanel id="mytabs2">
      <sj:tab id="tab1" href="%{addUserUrl}" label="Add User"/>
      <sj:tab id="tab2" href="%{deleteUserUrl}" label="Delete User"/>
    </sj:tabbedpanel>
 </body>
</html> 
```

主页加载了从“addUserUrl”（inputUser.action）返回的数据，如预期的那样。（addUser.jsp 如下在 struts.xml 中配置）

但是当 addUser.jsp 被提交时，success-add.jsp 或 addUser.jsp 显示为单独的页面，而不是在同一页面中，这取决于下面 struts.xml 中配置的成功或验证错误

有什么方法可以将这两个页面都显示在主页本身而不是单独的页面中。

```
 <action name="inputUser" class="addUserAction" method="input">
        <result name="form">addUser.jsp</result>            
    </action>       

    <action name="addUser" class="addUserAction" method="addUser">
        <result name="success">success-add.jsp</result>
        <result name="input">addUser.jsp</result>
    </action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:20:15.343

您的页面中可能存在阻止 jquery 插件将回调绑定到 sj 标签的 javascript 错误。这很可能是由于您的某些脚本与插件使用的 jquery 脚本冲突造成的。检查您的 javascript 错误日志并尝试注释掉脚本标签（很可能是另一个 jquery 脚本）以找到罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:28:46.147

我认为 - 基于标签标签生成的 html 代码 - 提交标签应该是这样的：

```
<sj:submit name="submit" value="AjaxSubmit" href="%{ADDUSER}" targets="Add_User"/> 
```

# c# - windows服务无法创建文件

> ID：12160862
> 
> 赞同：-3
> 
> 时间：2012-08-28T13:56:38.163
> 
> 标签：c#, windows-services

在我的 Windows 服务中，我创建了要记录的文件，但现在服务无法运行

```
Logger.InitLogFile("BridgeServiceLog.txt"); 
```

给我这个错误 **错误1053：服务没有及时响应启动或控制请求**

```
public BridgeService()
{
    InitializeComponent();
    Logger.InitLogFile("BridgeServiceLog.txt");
    Trace.WriteLine(Logger.logSwitch.TraceInfo, "Trace Started");

    this.ServiceName = "BridgeService";
    if (!System.Diagnostics.EventLog.SourceExists("BridgeSource"))
    {
         System.Diagnostics.EventLog.CreateEventSource("BridgeSource", "BridgeLog");
    }
    _bridgeServiceEventLog.Source = "BridgeSource";
    _bridgeServiceEventLog.Log = "BridgeLog";
} 
```

我的 onStart 方法

```
 protected override void OnStart(string[] args)
      {
            Trace.WriteLineIf(Logger.logSwitch.TraceInfo, "OnStart method Started");

            try
            {
                 _bridgeServiceEventLog.WriteEntry("new OnStart");
                 if (Vytru.Platform.Bridge.Configuration.LicenseValidetor.ValidCountAndTypeDevices())
                 {
                      SharedData.InitializeBridge();
                      // WsInitializeBridge();
                 }
                 else
                 {

                      this.Stop();
                      _bridgeServiceEventLog.WriteEntry("LicenseValidetor Error");
                 }
                 _bridgeServiceEventLog.WriteEntry("end Start");
            }
            catch (Exception e)
            {
                 Trace.WriteLineIf(Logger.logSwitch.TraceError, e.Message);
                 _bridgeServiceEventLog.WriteEntry("error In onstart method " + e.Message);
            }
            Trace.WriteLineIf(Logger.logSwitch.TraceInfo, "OnStart Ended");

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:12:47.353

您应该在您的`OnStart`函数中启动一个新线程，否则 ServiceManager 会认为应用程序已关闭。如果`OnStart`函数退出到快速，您也可以收到此消息。

您可以查看[此处](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstart%28VS.80%29.aspx)提供的示例以了解如何启动服务

# sql - SQL 错误：“没有这样的表”

> ID：12160865
> 
> 赞同：0
> 
> 时间：2012-08-28T13:56:43.237
> 
> 标签：sql, actionscript-3, apache-flex, sqlite, air

我正在尝试解决为什么我的代码对我的所有查询都返回 null 并最终发现 sql 查询没有返回任何内容。我用简约的代码创建了一个新的 AIR 文档 (s:WindowedApplication)：

```
<fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            private var sqlConnection:SQLConnection;
            private var select:SQLStatement;
            private var databaseFile:File;

            protected function windowedapplication1_creationCompleteHandler(event:FlexEvent):void
            {
                var dbPath:String = "Movie Manager Settings/moovioDB2.db";
                databaseFile = File.userDirectory.resolvePath(dbPath);
                sqlConnection = new SQLConnection();
                select = new SQLStatement();

                sqlConnection.addEventListener(SQLEvent.OPEN, onDatabaseOpen);
                sqlConnection.openAsync();
            }

            private function onDatabaseOpen(event:SQLEvent):void
            {
                select.sqlConnection = sqlConnection;
                var query:String = "SELECT title FROM movies";
                select.text = query;
                select.addEventListener(SQLEvent.RESULT, done);
                select.execute();
            }

            private function done(event:SQLEvent):void{
                var res:SQLResult = select.getResult();
            }

        ]]>
    </fx:Script> 
```

除了这段代码之外，只有 Flex 创建的标准标签。执行后我收到此错误：

```
Error #2044: Unhandled SQLErrorEvent:. errorID=3115, operation=execute , message=Error #3115: SQL Error. , details=no such table: 'movies' 
```

我已经使用 2 个不同的 sqlite 程序检查了数据库文件并成功执行了查询。'movies' 表和 'title' 列都存在。如果重要的话，电影是 3 个表之一，并且有 10 多列都存在值。

我究竟做错了什么？我之前使用了相同的代码（我认为）并获得了预期的结果，但经过一些更改，现在我什至可以在新文档中使用此基本代码。请检查一下，看看我是否犯了一个愚蠢的错误，因为我看不到它:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:17:58.077

您能否验证您打开的数据库的路径是您使用外部工具检查的那个文件之一？您可以在 AS3 代码中使用[database_list 杂注。](http://sqlite.org/pragma.html#pragma_database_list)只需像任何其他 SQL 语句一样执行它：

```
[user@host ~]$ cd /tmp
[user@host tmp]$ sqlite3 foo.db
SQLite version 3.7.11 2012-03-20 11:35:50
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> pragma database_list;
0|main|/tmp/foo.db 
```

# php - PHP 和 MongoDB 非常慢（15 秒）

> ID：12160867
> 
> 赞同：1
> 
> 时间：2012-08-28T13:56:44.253
> 
> 标签：php, mongodb

我设置了 Mongo，一切都很好。当我使用 MongoVUE 或 shell 时，一切都快如闪电。

但是，在为 Windows 安装 PHP Mongo 驱动程序之后，每个查询都需要 15 秒以上的时间。即使是这个来自 PHP.net 的简单教程也需要 15 秒。

教程示例：

```
 $time_start = microtime(true);
    // connect
    $m = new Mongo();

    // select a database
    $db = $m->comedy;

    // select a collection (analogous to a relational database's table)
    $collection = $db->cartoons;

    // add a record
    $obj = array( "title" => "Calvin and Hobbes", "author" => "Bill Watterson" );
    $collection->insert($obj);

    // add another record, with a different "shape"
    $obj = array( "title" => "XKCD", "online" => true );
    $collection->insert($obj);

    // find everything in the collection
    $cursor = $collection->find();

    // iterate through the results
    foreach ($cursor as $obj) {
        echo $obj["title"] . "\n";
    }
    $time_end = microtime(true);
    $time = $time_end - $time_start;

    echo "\nOperation took $time seconds\n"; 
```

输出：

```
Calvin and Hobbes XKCD Operation took 15.000731945038 seconds 
```

我正在使用[来自 Github](https://github.com/mongodb/mongo-php-driver/downloads)的 Windows 7、WAMP、MongoDB 2.0.7 和 Windows PHP Mongo 驱动程序 (v1.1.12) 。

回答评论中的问题：

*问：您是否在您的系统上测试过其他 PHP 代码及其持续时间？*
**答：**这实际上是一个更大的 Web 应用程序的一小部分，其他一切正常。我很乐意发布你们认为有用的任何基准。

*问：您是否在 Mongo 中分析过查询？*
**答：**是的。如果我通过 shell 运行它，它会立即得到响应。

*问：这是什么 WAMP 版本？*
**答：** WampServer 2.2

*问：这是什么 PHP 版本？*
**答：** 5.3.13

*Q：mongodb里面已经有数据了吗？*
**答：** 我在发布基准测试之前删除了所有数据库，所以它所包含的只是下面代码插入的数据。

*问：电脑的规格是什么（主要是内存）？*
**A:** AMD Phenom II X4 840T 2.9GHz 处理器，4GB DDR3 RAM，64 位操作系统

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:27:19.460

我同意 15 秒是荒谬的。即使打开，教程代码也应该运行接近 0.5 秒（如果有的话）`SafeMode`。如插入代码所示，您已`SafeMode`关闭：

```
// add a record
$obj = array( "title" => "Calvin and Hobbes", "author" => "Bill Watterson" );
$collection->insert($obj);

// add another record, with a different "shape"
$obj = array( "title" => "XKCD", "online" => true );
$collection->insert($obj); 
```

您正在执行异步插入，这意味着 PHP 代码不会等待从数据库返回，因此理论上对数据库的调用不应该是代码中的问题。

不过，这`find()`可能会导致问题，所以我会对此进行分析。

驱动程序仍然有可能导致某种减速，但这极不可能。为了进一步帮助我们：

*   您是否在您的系统上测试过其他 PHP 代码及其持续时间？
*   您是否在 Mongo 中分析了查询？
*   这是什么 WAMP 版本？
*   这是什么PHP版本？
*   mongod 已经在其中获取数据了吗？
*   电脑的规格是什么（主要是内存）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:05:45.433

插入*新*数据库需要一段时间，因为 MongoDB 需要先预分配数据库文件。随后的插入将很快。*除此之外：仅使用一个*插入执行基准测试是没有意义的。

# actionscript-3 - “创建投影仪”的 Flash Player 命令行参数

> ID：12160872
> 
> 赞同：5
> 
> 时间：2012-08-28T13:57:01.200
> 
> 标签：actionscript-3, apache-flex, adobe, flash

我希望使用 Flash 播放器中的“创建投影仪”选项自动执行从 .swf 文件创建 .exe 的任务。我正在尝试使用 ant 构建文件来实现它。有人可以指出我正确的方向。尝试搜索但未找到可用于 Flash 播放器的命令行参数以及如何将 .swf 转换为 .exe。

注意：需要在 Flash Player 上作为运行时使用，没有 3rd 方播放器/解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-29T20:23:37.847

我不知道有什么方法可以做到这一点，但如果有帮助，我想指出 FlashDevelop 能够连接到 Adob​​e Flash Pro 来进行发布，但你必须在 Flash Pro 中打开 FLA。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-07-19T00:03:44.483

```
注意：被问者确实喜欢这个答案： `SWF's as SWF's for EXE's.? I would say that is native to Adobe Flash, plus there has always been ANT 'Build Commands' -- as well as -- ITASCA in use for these processes (now deprecated). The main positive outcome for your situation is that I already had code that I used for something similar, so I added it to github - Take a look, it is very straightforward with comments and instructions: Note, the Application Manifest files along with custom **bat** files allow the /exe files to be generated from your action-script within **Main.as and application.xmL https://github.com/leonardo-m-mendevil/esexes.git **`
```

*   @original：麻袋，S
*   @notes：符合 AS2 和 AS3，
*   @notes：基于脚手架框架
*   @github： [https ://github.com/stevensacks/Gaia-Framework/wiki/_history](https://github.com/stevensacks/Gaia-Framework/wiki/_history)
*   @notation：使用 JSFL：原始：更改发布配置文件设置：v2：SACKS：2008 年 3 月 26 日 **//**
*   @作者：埃迪·马丁内斯
*   @update：生成一个 .exe/projector
*   @使用：.as3 || .swf 文件加载器 || .jsfl
*   @修订：2013 年 7 月
*   @info：这是一个小改动
*   @info：来自 Gaia 的 JSFL 脚手架的变更 [Gaia 的脚手架 JSFL]
*   @framework：[https ://github.com/stevensacks/Gaia-Framework/wiki/_history](https://github.com/stevensacks/Gaia-Framework/wiki/_history)

```
function setPPS(F1, ActionVersion)
{

        if (fl.fileExists(F1)
        {
                var _x, _f, _t, _d;

                fl.openDocument(F1);
                var file_n = F1.split("/").pop();
                var path_f = F1.split(file_n)[0].join("/");
                    file_n = file_n.split(".")[0];
                var pt = path_f + "/_Profile_._x";
                fl.getDocumentDOM().exportPublishProfile(pt);
                _x = FLfile.read(pt);
                _f = _x.indexOf("<defaultNames>");
                _t = _x.indexOf("</defaultNames>");
                _d = _x.substring(_f, _t);
                _x = _x.split(_d).join("<defaultNames>0");
                _f = _x.indexOf("<flashDefaultName>");
                _t = _x.indexOf("</flashDefaultName>");
                _d = _x.substring(_f, _t);
                _x = _x.split(_d).join("<flashDefaultName>0");
                _f = _x.indexOf("<flashfile_n>");
                _t = _x.indexOf("</flashfile_n>");
                _d = _x.substring(_f, _t);

                var p3i = "../";
                if (file_n.indexOf("/") > -1){
                  var splitPath = file_n.split("/");
                      splitPath.length--;
                  var i = splitPath.length;
                  while (i--) {  p3i += "../"; }
                }
                _x = _x.split(_d).join("<flashfile_n>" + p3i + "deploy/" + file_n + ".swf");
                var types = {};
                    types.projectorWinfile_n = "exe";
                    for (var n in types) {
                        _f = _x.indexOf("<" + n + ">");
                        _t = _x.indexOf("</" + n + ">");
                        _d = _x.substring(_f, _t);
                        _x = _x.split(_d).join("<" + n + ">" + file_n + "." + types[n]);
                    }

                    _f = _x.indexOf("<ActionScriptVersion>");
                    _t = _x.indexOf("</ActionScriptVersion>");
                    _d = _x.substring(_f, _t);
                    _x = _x.split(_d).join("<ActionScriptVersion>" + ActionVersion);
                    _f = _x.indexOf("<PackageExportFrame>");
                    _t = _x.indexOf("</PackageExportFrame>");
                    _d = _x.substring(_f, _t);
                    _x = _x.split(_d).join("<PackageExportFrame>1");

                    if (ActionVersion == 2) {
                        _f = _x.indexOf("<PackagePaths>");
                        _t = _x.indexOf("</PackagePaths>");
                    } else {
                        _f = _x.indexOf("<AS3PackagePaths>");
                        _t = _x.indexOf("</AS3PackagePaths>");
                    }
                    _d = _x.substring(_f, _t);
                    var cpt = "./";
                    if (file_n.indexOf("/") > -1){
                        cpt = "";
                        var t4 = file_n.split("/");
                            t4.length--;
                        var i = t4.length;
                        while (i--){
                            cpt += "../";
                        }
                    }
                    switch(ActionVersion){
                        case 2:                        
                            _x = _x.split(_d).join("<PackagePaths>" + cpt + "classes");
                        break;
                        case 3:
                            _x = _x.split(_d).join("<AS3PackagePaths>" + cpt + "classes");  
                    }
                    function writeAllDOM(xstrg,pt){
                        FLfile.write(pt, xstrg);
                        fl.getDocumentDOM().importPublishProfile(pt);
                        fl.saveDocument(fl.getDocumentDOM(), cpt);
                        fl.getDocumentDOM().publish();
                    }

                    FLfile.remove(fPath);
                }
} 
```

# mysql - 帖子和回复的 SQL 查询

> ID：12160875
> 
> 赞同：0
> 
> 时间：2012-08-28T13:57:14.543
> 
> 标签：mysql, sql

我有两张桌子

```
post Table
 post_id
 post_name
 post_summary
 date

post_reply Table
 parent_id
 post_id 
```

所以我正在做的是在帖子表中插入一个新的帖子详细信息，如果该帖子有任何回复，那么我将所有详细信息放入帖子表本身，并将主帖子 ID 存储为 parent_id 并将回复的帖子 ID 存储为 post_id发表回复。

现在我想获取主帖子下的所有帖子及其回复（如果有的话），并希望在我的 jsp 页面上显示相同的内容。

我无法编写单个查询来获取这些详细信息。我可以通过首先获取所有 id 不在 post_reply 中的帖子然后循环所有帖子然后获取主帖子并逐一回复帖子来做到这一点。

我只想在一个查询中获取所有这些。这可能吗？我使用 mysql 作为数据库，并在 mybatis 中使用 spring mvc。因此，我正在完善整个列表并将其放入我的模型属性中并将其显示在 jsp 页面上。

如果有人可以建议我一种更好的方法来实现这一点，比如改变我的数据库结构或任何其他解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:02:27.247

您想将两个表连接在一起。

例如，

```
SELECT     *
FROM       post
INNER JOIN post_reply 
ON         post.post_id = post_reply.post_id 
```

我不确定您的问题到底是什么，但如果这不能满足您的要求，您可能需要使用 GROUP BY。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:03:17.340

我认为这是一个相当简单的 Join 查询。尝试以下操作：

```
SELECT * FROM post pt JOIN (post_reply pr) ON pr.parent_id = pt.post_id 
```

然后，您将像这样循环遍历 PHP 中的结果

```
while($row = mysql_fetch_array($your_query)) {
  $parent_id = $row['post_id'];
  $reply_id = $row['post_id'];
  $content = $row['post_summary'];
} 
```

然后，您可以根据上面的详细信息构建您的回复表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:18:15.030

桌柱

```
+---------+--------+---------+
| post_id | 发布 | 评论 |
+---------+--------+---------+
| 1 | kjasd | ajsdh |
| 2 | 美国广播公司 | dfgdfg |
| 3 | 阿什夫 | 空 |
+---------+--------+---------+

```

表 post_reply

```
+------------+---------+
| parent_id | post_id |
+------------+---------+
| 1 | 2 |
+------------+---------+

```

使用它正在工作的这个查询：

```
select *from post where post_id=1 or post_id in (select post_id from post_reply where parent_id=1); 
```

只有在没有回复的情况下，它才会返回带有父帖子和父帖子的回复。

# php - openssl_csr_new 不适用于 PHP 5.4

> ID：12160881
> 
> 赞同：0
> 
> 时间：2012-08-28T13:57:22.113
> 
> 标签：php, openssl

由于我已经升级到 PHP 5.4.6（从 5.3），当我尝试使用 openssl_csr_new 时：

```
$dn = array(
    'localityName' => utf8_decode($localityName),
    'stateOrProvinceName' => utf8_decode($stateOrProvinceName),
    'countryName' => 'FR',
    'organizationName' => utf8_decode($organizationName),
    'commonName' => utf8_decode($commonName),
    'emailAddress' => utf8_decode($emailAddress),
);

$privkey = openssl_pkey_new(
    array(
        'private_key_bits' => 1024,
        'private_key_type' => OPENSSL_KEYTYPE_RSA
    )
);

$csr = openssl_csr_new($dn, $privkey); 
```

我收到这样的错误：

```
Warning: openssl_csr_new(): in /my_file.php on line 42 
```

调试起来并不容易，因为没有消息......

有人知道修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:31:01.277

我发现如果我删除所有用于正确呈现重音字母的 utf8_decode，它可以解决问题。

不利的一面是，重音字母现在无法正确渲染。我希望这将在 PHP 的未来版本中得到修复。

# c# - PRISM + Silverlight：模块和视图发现

> ID：12160885
> 
> 赞同：1
> 
> 时间：2012-08-28T13:57:40.330
> 
> 标签：c#, silverlight, prism

我们正在使用 PRISM 将大型应用程序划分为模块，每个模块将代表我们公司的一个部门：

```
HumanResources
Accounting
InformationSystems
(...) 
```

每个模块将有几个视图。例如，`Accounting.Module`可能有：

```
BusinessIntelligenceView(/Model)
ReportingView(/Model) 
```

我希望应用程序加载模块（我将手动输入`ModuleCatalog`）。然后，我想`ShellView`自动显示可用视图的列表，用户可以使用它来选择要注入主区域的视图。

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:18:34.623

我不是专家，我不认为它是内置在棱镜中的，但这绝对是可能的:)

给你的一些提示......请客气，我没有使用 IDE 编写任何代码行:)

首先，您可以创建一个视图（和一个视图模型）来显示可用视图的列表。那些“可用视图”可以由定义视图信息的类来表示。

就像是 ：

```
public interface IAvailableView
{
    string ViewName { get; }
    string ModuleName { get; }  
} 
```

其次，为了能够显示所有可用的视图，您的模块需要在目录中“可用时”加载。然后它们将在您的应用程序初始化时触发。

在您的模块中，您现在应该以特定名称注册您的视图，并且您可以在依赖容器中注册它公开的所有可用视图。

```
public virtual void Initialize()
{  
    RegisterView<IView, AnyView>("AnyView");
    Register<IAvailableView>(new AvailableView("AnyView", "MyModuleName"));
} 
```

加载完所有模块后，您的视图模型控件应该能够解析所有这些 IAvailableViews。

现在，您需要做的就是将这些可用视图绑定到控件并在用户单击项目后在 RegionManager 中注册相应的视图......

```
var view = GetInstance<IView>(selectedAvailableView.ViewName);
RegionManager.RegisterViewWithRegion("whateverRegion", () => view); 
```

希望能帮助到你 ：）

# html - 带有链接的 HTML 组合框

> ID：12160886
> 
> 赞同：0
> 
> 时间：2012-08-28T13:57:40.757
> 
> 标签：html

我需要制作一个组合框。Every option has a link, when the option is changed, the location of the document moves to that link.

我不想使用任何大的 JavaScript 函数或表单。

这样做的优雅方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T14:03:10.297

你可以试试这个

```
 <select onchange="window.open(this.options[this.selectedIndex].value)">
        <option value="">Go to page...</option>
        <option value="http://stackoverflow.com/">stackoverflow</option>
        <option value="http://facebook.com/">facebook</option>
        <option value="http://twitter.com/">twitter</option>
    </select> 
```

或者如果你不想打开新标签/窗口，你可以试试这个

```
 <select onchange="window.location=this.options[this.selectedIndex].value">
        <option value="">Go to page...</option>
        <option value="http://stackoverflow.com/">stackoverflow</option>
        <option value="http://facebook.com/">facebook</option>
        <option value="http://twitter.com/">twitter</option>
    </select> 
```

# asp.net - ASP - 将根文件夹的图像选择到子文件夹中

> ID：12160893
> 
> 赞同：1
> 
> 时间：2012-08-28T13:58:09.947
> 
> 标签：asp.net, html, image

我看过这个页面

[HTML - 从子文件夹中选择根文件夹的图像](https://stackoverflow.com/questions/3655059/html-pick-images-of-root-folder-from-sub-folder)

此页面包含 HTML 图像的示例。我创建了一个 Web 控件，它代表所有网站页面的页脚。现在有些页面直接在根目录中，有些在另一个文件夹中。在 Web 控件中，我必须修复

因此，如果不在 ../ 或 ./ 之间切换，我如何确定网站的根目录，然后在 Web 控件中说出类似 root/images/abcd.jpg 的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:06:26.427

如果您`<img>`通过添加使标签成为服务器控件，`runat="server"`则只需执行以下操作，它将始终正确解析 url，而不管用户控件在何处被引用：

```
<img id="image" src='<%=ResolveClientUrl("~/images/abc.jpg")' /> 
```

ResolveClientUrl 方法将自动从应用程序的根目录开始解析正确的路径`(~/)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:02:11.737

```
var url = HttpContext.Current.Request.Url;
return url.AbsoluteUri.Replace(url.AbsolutePath, "") + "/"; 
```

要得到根。

# php - 使用 php 或 sql 转换数字

> ID：12160895
> 
> 赞同：0
> 
> 时间：2012-08-28T13:58:12.313
> 
> 标签：php, sql-server-2008

我在谷歌上花了很多时间，我不确定我需要做的最好的方法

我有一个小型 Web 程序，它通过在选择上运行的查询将数字添加到数据库中，以清除某些信息，这些查询只有在某一列中的数字长度为 13 位时才会成功，为什么我不知道。

所以我的问题是使用 sql 或 php 使 sql 列中的数字自动转换为 13 的最佳方法是什么，所以如果我在哪里输入 1 它将在 sql 列中以 0000000000001 而不是 1 结束

我运行 php 的查询非常简单我不太明白为什么它必须有 13

代码如下

```
<?php include_once "ewcfg9.php" ?>
<?php include_once "adodb5/adodb.inc.php" ?>
<?php include_once "phpfn9.php" ?>
<?php include_once "Productsinfo.php" ?>
<?php include_once "userfn9.php" ?>
<?php
$upc= $_GET['upc'];
sleep(2);
header('Location: Productsedit2.php?upc='.$upc.'');
$serverName = "localhost";
$usr="sl";
$pwd="o.o";
$db="SimpleLabel";

$connectionInfo = array("UID" => $usr, "PWD" => $pwd, "Database" => $db);

$conn = sqlsrv_connect($serverName, $connectionInfo);
if ($conn === false)

{

print_r( sqlsrv_errors());

}

$sql="Delete from labelprint where upc=$upc";

$query = sqlsrv_query($conn, $sql) or die(sqlsrv_errors());
$result=sqlsrv_fetch_array($query);
print_r($result); 
sqlsrv_close( $conn);

?> 
```

这有效，但只有在 upc=13 位的情况下，任何人都可以想到是否有办法让 sql 使所有内容都变为 13 位或使 php 自动填充 13 位的字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:13:03.173

由于该列是字符串类型，因此必须这样处理。（一种选择是使用数字列，然后在 PHP 中填充它，或者使用零填充 [我认为 SQL Server 有零填充]。）

您确实应该使用准备好的语句，但至少您需要转义您放入 SQL 的任何字符串。您可能想研究 SQL 注入。

* * *

无论如何，我会使用 sprintf：

```
$padded = sprintf("%013d", (int) $upc); 
```

然后这个：

```
$sql="Delete from labelprint where upc=$upc"; 
```

会成为

```
$sql="Delete from labelprint where upc='$padded'"; 
```

单引号是必需的，因为它是字符串，而不是数字。sprintf 调用中的 int 类型是为了保证 $padded 输出可以安全地放入 SQL 语句中。

* * *

您还可以使用 str_repeat 和 strlen 的组合来填充字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:11:31.333

如果该`labelprint`字段是 int （在这种情况下，为什么*将*其存储为 varchar），您[可以](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)按如下方式进行转换：

```
$sql="Delete from labelprint where cast(upc as unsigned)=$upc"; 
```

如果你有有趣的数据，这将不起作用。例如*，*`0000000000013`将*转换*为`13`但`000000AB00013`不会转换为 13。

 *编辑：SQL-Server Int 可能是 4 字节，但这为您提供了 -2^31 (-2,147,483,648) 到 2^31-1 (2,147,483,647) 的范围（这显然*不是*4 个数字）

数据类型的变化也使上面的答案变得非常多余。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:19:34.693

如果您在字段中使用字符串而不是 int，则可以尝试以下操作：

`$upc = str_pad($upc, 13, "0", STR_PAD_LEFT);`

这将填充一个字符串，使其最多 13 个字符，`0`用作“填充”。

更多信息： http: [//php.net/manual/en/function.str-pad.php](http://php.net/manual/en/function.str-pad.php)*

# java - 表中的新数据库列是否会导致 XML 解析错误

> ID：12160897
> 
> 赞同：0
> 
> 时间：2012-08-28T13:58:13.887
> 
> 标签：java, html, xml, ajax, database

`AJAX GET`我想知道请求中是否会出现以下错误

```
XML Parsing Error: no element found Location: moz-nullprincipal:{e524cf00-ed0a-4e2b-925a-fcc995b9d682} Line Number 1, Column 1: 
```

原因是在数据库中的表中添加了一个新列，因为我不知道为什么会出现这个错误，这让我发疯！？

![在此处输入图像描述](../Images/66e9e14b10ec5a9651fb5ae6570cfa42.png)

如果我不更改字段，这是我得到的**所有内容**`ownershipType`

```
<ajax-response>
<response id="licenceAuthRequiredDiv" type="element">
<div id="licenceAuthRequiredDiv">
<input id="licensingApprovalDateRequired" type="text" name="licensingApprovalDateRequired" value="" title="dd MMM yyyy">
<a href="javascript:calendar_licensingApprovalDateRequired.toggle(tapestry.byId("licensingApprovalDateRequired"));">
<img class="datePickerImg" src="/wuams/assets/static/org/apache/tapestry/form/DatePickerIcon.png" alt="Click on icon to choose a date/time value." border="0">
</a>
<span class="requiredStar">*</span>
</div>
</response>
<response id="initializationscript" type="script">
<script>
//
calendar_licensingApprovalDateRequired = new Calendar(); calendar_licensingApprovalDateRequired.initialize(["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], "dd MMM yyyy", 1, false, 4, "Clear"); calendar_licensingApprovalDateRequired.onchange = function() { var field = tapestry.byId("form").licensingApprovalDateRequired; var value = calendar_licensingApprovalDateRequired.formatDate(); if (field.value != value) { field.value = value; if (field.onchange) { field.onchange();} } } dojo.require("tapestry.form"); tapestry.cleanConnect("licensingStatus", "onchange", "formEvent2107635243"); tapestry.formEvent2107635243=function(e){ var content={beventname:"onchange", bcomponentidpath:"EditCompanyPage/licensingStatus", bcomponentid:"licensingStatus"}; tapestry.event.buildEventProperties(e, content, arguments); if (!content["beventtarget.id"]){ content["beventtarget.id"]="licensingStatus"; } var validateState=tapestry.form.forms["form"].validateForm; var validateForm=false; tapestry.form.setFormValidating("form", validateForm); tapestry.form.submitAsync("form", content); tapestry.form.setFormValidating("form", validateState); }; tapestry.connect("licensingStatus", "onchange", "formEvent2107635243"); //
</script>
</response>
<response id="bodyscript" type="script">
<script>
//
var calendar_licensingApprovalDateRequired; dojo.require("tapestry.event"); //
</script>
</response>
<response id="includescript" type="script">
<include url="/wuams/assets/static/org/apache/tapestry/form/DatePicker.js"></include>
</response>
<response id="formhidden" type="element">
<div id="formhidden" style="display:none;">
<input type="hidden" name="formids" value="If_33,If_0_11,If_35,If_37,For_1_1,wuBusinessId,companyNameUK,tradingName,companyMultiplicity,If_39,ownershipType,autoSendToDueDiligence,businessType,If_0_13,parentCompany,address1,address2,address3,city,state,postCode,selectCountry,If_41,networkId,automaticRoaming,phoneNumber,emailAddress,faxNumber,keyContactFirstName,keyContactSurname,keyContactPhone,keyContactFaxNumber,keyContactEmail,mtLicenceNumber,regulatedEntity,licensingAuthority,regulator,licensingStatus,If_43,licensingApprovalDateRequired,registrationNumber,fitandProperInitiated,If_45,limitedCompanyRegistrationNumber,reportsDailyFileDirectory,selectCutOffPeriod,settlementDispersal,sarEmailAddress,groupFinancialLimit,If_47,creationDate,If_49,expiryDate,preContractCompliance,gddSignOffDate,amlSignOffDate,save">
<input type="hidden" name="seedids" value="ZH4sIAAAAAAAAAF1SS27CMBBFQr1A1SNkyYKEblgCAQmJIlQqdVkZZ0gsEk/qDxU9U6/WO3TsxCHpat58/ObNeH5+Rw/fo9H4afw40aCugkM0ndQsd4ZjVaMEaTyWhgkJirAGrQVKh+q2eokqa3IFlCXZo7mVEOzHtENxh5IOzQgtMbuRKYARz6rXeIc5Wge252iWTNalhiiek0ekcaORyZsGpnhBVTmQRlZ2PmmTJoUSTKM4FQq42Ql5iRLilDS0iZKkqXuhCQ1IJv0WfGhR1wqvrAz+jgQ6nVi5EsNOfa0bVFEcO0Pi5t66eblVylHlTZXneRP8AuZwTEPgaJixOnh75vlfIW9k79F0eKDr/izLtiReMd5OKu6e7jP4z7gK+KIIDDNxm0mR24qaDLNJ1zvLFJ1AHPyVMLeAD6jNCjMYvJyFA+JmI5QO07Who1WyP64X2OYOBe12b6uTP66eTN9sma4HfZ5D4t0uOEdLe/z3NPFQ0o21B/dp6SPcOej+R55RVdH0D30YciIdAwAA">
<input type="hidden" name="submitmode" value="">
<input type="hidden" name="submitname" value="">
<input type="hidden" name="If_33" value="F">
<input type="hidden" name="If_0_11" value="F">
<input type="hidden" name="If_35" value="F">
<input type="hidden" name="If_37" value="T">
<input type="hidden" name="For_1_1" value="VSInvalid data in Company details:">
<input type="hidden" name="For_1_1" value="VSOwnership Type is mandatory.">
<input type="hidden" name="If_39" value="F">
<input type="hidden" name="If_0_13" value="T">
<input type="hidden" name="If_41" value="T">
<input type="hidden" name="If_43" value="T">
<input type="hidden" name="If_45" value="F">
<input type="hidden" name="If_47" value="T">
<input type="hidden" name="If_49" value="T">
</div>
</response>
</ajax-response> 
```

# file - unix prepend line to file without buffer/copy

> ID：12160906
> 
> 赞同：2
> 
> 时间：2012-08-28T13:58:45.097
> 
> 标签：file, unix, sed

I want this, the sed solution looks good, but when I tried it seems to create a huge temp file.

[unix command to prepend text to a file](https://stackoverflow.com/questions/10587615/unix-command-to-prepend-text-to-a-file)

I have big sql file that is like 28 gigs, I dont have much space on file system and just want to add one line to the front of the file. How can I do this without using up more file space?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:40:59.707

Unfortunately, on every OS and file system I've ever seen, prepending can't generally be done in place like appending can. One might argue that file systems could do it efficiently, if the amount of data was some multiple of the underlying file system block size, but since that would not generally be the case, I don't know of any that have actually implemented such functionality. So, probably, the only way to do it is through a temporary file or copy. You could, however, use compression to somewhat alleviate the space crunch, but that would require some prework, and may not ultimately be suitable. Something along these lines:

```
1) gzip original_file.sql    # or bzip2 or whatever
2) create new_file.sql with data to be prepended
3) (cat new_file.sql; zcat original_file.sql.gz) | gzip > updated_file.sql.gz
4) zcat updated_file.sql.gz | less  # inspect the top of the file to make sure it looks right
5) rm original_file.sql.gz new_file.sql
6) gunzip updated_file.sql.gz # if necessary to have uncompressed text available - if not, just leave it compressed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:36:06.510

Compile with gcc:

```
#include <stdio.h>
#include <string.h>
#include <malloc.h>

// Prepend size must be less than this value
#define bufSize 1024000

int main( int argc, char **argv )
{
    FILE *fil;
    unsigned char *smallBuf, *mainBuf;
    size_t sReadSize, mReadSize;
    long readPos = 0, writePos = 0;
    int appendSize;

    if( argc != 3 )
    {
        printf( "Usage: %s, <prepend_line> <file>\n", argv[0] );
        return 1;
    }

    sReadSize = appendSize = strlen( argv[1] ) + 1;

    smallBuf = (unsigned char *) malloc( appendSize );
    mainBuf = (unsigned char *) malloc( bufSize );
    if( !smallBuf || !mainBuf )
    {
        printf( "No memory\n" );
        return 1;
    }

    memcpy( smallBuf, argv[1], appendSize );
    smallBuf[ appendSize - 1 ] = '\n';

    fil = fopen( argv[2], "rb+" );
    if( !fil )
    {
        printf( "Cannot open file\n" );
        return 1;
    }

    while( 1 )
    {
        fseek( fil, readPos, 0 );
        readPos += mReadSize = fread( mainBuf, 1, bufSize, fil );

        fseek( fil, writePos, 0 );
        writePos += fwrite( smallBuf, 1, sReadSize, fil );

        if( mReadSize < bufSize )
        {
            if( mReadSize > 0 )
                fwrite( mainBuf, 1, mReadSize, fil );
            break;
        }

        fseek( fil, readPos, 0 );
        readPos += sReadSize = fread( smallBuf, 1, appendSize, fil );

        fseek( fil, writePos, 0 );
        writePos += fwrite( mainBuf, 1, mReadSize, fil );

        if( sReadSize < appendSize )
        {
            if( sReadSize > 0 )
                fwrite( smallBuf, 1, sReadSize, fil );
            break;
        }
    }

    fclose( fil );
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T07:02:39.157

You can use perl for this:

```
perl -i -n -e 'print "xxx\n$_" if $.==1;print if $.!=1' your_file 
```

# c# - 缺少一个参数。[ 参数序数 = 1 ]？

> ID：12160910
> 
> 赞同：0
> 
> 时间：2012-08-28T13:58:51.137
> 
> 标签：c#, sql, parameters, sql-server-ce

我编写了一些基本代码来解析 CSV 文件并在运行时将数据输入数据库。此代码的变体（针对不同的分隔符和列）对于许多 csv 文件都运行良好，但是由于某种原因，现在此代码给我一个 2 列文件的错误。

```
using (StreamReader reader = new StreamReader(@"C:\Rawdata\Salesman.csv"))
{
    string line;
    StringBuilder query = new StringBuilder();

    while (!reader.EndOfStream)
    {
        line = reader.ReadLine();
        StringBuilder segment = new StringBuilder();

        for (int i = 0, segno = 0; i < line.Length; i++)
        {
            if (line[i] != '\t')
            {
                segment.Append(line[i]);
            }
            else
            {
                switch (segno)
                {
                    case 0:
                        cmd.Parameters.Clear();
                        cmd.Parameters.AddWithValue("@code", segment.ToString());

                        break;
                    case 1:
                        cmd.Parameters.AddWithValue("@name", segment.ToString());
                        break;
                    default:
                        break;
                }
                segno++;
                segment.Clear();
            }
        }

        delCmd = "INSERT INTO sales_codes (code, name) VALUES (@code, @name)";
        cmd.CommandText = delCmd;

        cmd.ExecuteNonQuery();

        query.Clear();
    }
} 
```

抛出的异常是：

```
SqlCeException - A parameter is missing. [ Parameter ordinal = 1 ] 
```

我已经仔细检查了从文件、代码到表模式的所有内容，一切看起来都很好。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:04:27.427

就像现在一样，您的代码只会在`\t`找到选项卡 ( ) 时添加参数。如果每行不以制表符结尾，则不会添加第二个参数。这可能是你的问题。

# c# - 始终在 LINQ 语句分组方式中选择真/更高的值（多列）

> ID：12160913
> 
> 赞同：0
> 
> 时间：2012-08-28T13:59:01.083
> 
> 标签：c#, linq, lambda, grouping

假设我有 2 个列表看起来像

```
 ID | IsChipCollected | IsShirtCollected | IsPackCollected
A     0                 1                  0                 1
      1                 0                  1                 0
      2                 0                  0                 1      

B     0                 0                  1                 0
      1                 0                  0                 1
      2                 1                  1                 1 
```

基本上我需要比较和合并这两个列表，如果某个标志在 B 中设置为 true，我应该选择它而不是 A

我知道如何用一列来实现这一点，但我正在努力在有 2 列以上的场景中解决这个问题

```
 var result = A.Concat(B)
        .GroupBy(x => x.Id)
        .Select(g => g.OrderByDescending(x => x.IsShirtCollected).First()) 
```

如果我在这方面取得任何进展，我会更新我的代码示例（因为我目前仍在破解：P）

**预期结果**

```
 ID | IsChipCollected | IsShirtCollected | IsPackCollected
      0                 1                  1                 1
      1                 0                  1                 1
      2                 1                  1                 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:05:39.097

```
var result = A.Concat(B)
        .GroupBy(x => x.Id)
        .Select(g => new {//or new <A and B's generic type>, then change the underCode with proper case
             id = g.Key,
             isShipCollected = g.Max(m => m.IsChipCollected),
             isShirtCollected = g.Max(m => m.IsShirtCollected),
             isPackCollected = g.Max(m => m.IsPackCollected)
    }); 
```

**编辑**

遵循 Servy 的（好）想法（将 1 / 0 更改为布尔值）

```
var result = A.Concat(B)
       .GroupBy(x => x.Id)
       .Select(g => new { 
            id = g.Key,
            isShipCollected = g.Any(m => m.IsChipCollected == 1),
            isShirtCollected = g.Any(m => m.IsShirtCollected == 1),
            isPackCollected = g.Any(m => m.IsPackCollected == 1)
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:23:19.960

不确定它是否会比 concat/groupby 更快/更慢，但从技术上讲，您正在执行的操作是 a `Join`，因此在实际执行该连接的可读性方面更有意义。

```
var query = listA.Join(listB, item => item.ID, item => item.ID,
    (a, b) => new
    {
        ID = a.ID,
        IsChipCollected = a.IsChipCollected | b.IsChipCollected,
        IsShirtCollected = a.IsShirtCollected | b.IsShirtCollected,
        IsPackCollected = a.IsPackCollected | b.IsPackCollected,
    }); 
```

# permissions - 谷歌应用脚 本：从电子表格中获取数据而没有查看权限（不可安装触发器）

> ID：12160914
> 
> 赞同：1
> 
> 时间：2012-08-28T13:59:04.797
> 
> 标签：permissions, google-apps-script

问题是我有各种电子表格（a），只有一个人拥有查看和编辑权限，还有其他人需要这些电子表格中的一些数据（a）用于他们的电子表格（b），他们还需要能够获得电子表格中数据的更新版本 (a)

我现在创建了一个解决方法，使用带有编辑功能的可安装触发器（他们必须更改电子表格中的特定字段）来更新数据，但是人们希望有一个可以单击的按钮/绘图或菜单项来获取来自电子表格的更新数据 (a)。

从我的角度来看，将可安装触发器与按钮/绘图/菜单条目相结合是一条死胡同。因此，我的问题是，是否有任何其他可能性可以授予对电子表格中数据的访问权限，而无需授予对数据来源​​文档的查看或编辑权限...

如果有人有想法会很棒，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:13:35.450

您将遇到的电子表格中使用的触发器有一些限制。看看[这个](https://developers.google.com/apps-script/understanding_triggers)了解详情。本质上，`onEdit`触发器无法访问/修改另一个电子表格`They cannot access any services that require authentication as that user.`

要更新当前电子表格之外的另一个电子表格，我只需安装一个函数和一个菜单项来触发它。（这是您所说的死胡同吗？）它确实取决于用户来更新组，但这对我的安全数据是有好处的，因为它需要密钥持有者的知识才能允许其他人获取信息。这是`A`，`B`这是可能的，但`B`必须具有对`A`的电子表格的编辑权限。

不，除非他们有权访问信息，否则`B`无法从中获取信息`A`，至少作为查看者。您不能授予单个单元格的查看权限，这实际上是您想要做的。

如果没有这种能力，解决方案更多的是构建数据流。在一个用户证明他们不能被信任定期更新团队的情况下，我将自己创建为`0`. 我有权访问`A`和`B`。我从`0`to access`A`和 to update运行该功能`B`，它还会向他们发送一封电子邮件，因此所有人都知道上次更新发生的时间。为什么我不只使用`A`电子表格来运行该功能，因为`0`我可以访问它并将其写入而`B` 无需看到数据。这是无知的面纱。我从来没有真正打开过`A`，`0`一直是空的。

我能做的最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:55:53.687

我可能对你的异常有一个答案。我的应用程序客户端是来自我的 googleapp 工作组的人，他们没有查看文件的权限，但他们并不是完全陌生的人。

我认为以下可能有效。文件是包含代码的集合文件。B 文件具有来自 A 的具有共享权限的 importrange() 函数。并且 C 文件具有来自 B 的 importrange() 并具有 B 文件的共享权限。小转折是 B 文件有一个隐藏和受保护的链接表。我已经检查过了，如果您不是所有者，您将能够取消隐藏它。

在实践中，我的填充是您可以使用 2 个 SpreadSheets 来实现类似的技巧，第三个是为了额外的安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:03:31.500

我面临着类似的问题。

我认为我找到了解决方法，但不能保证。我使用了`importrange`我打算通过脚本控制的功能。我已经尝试了 flush 功能，发现它是一个很好的触发器来强制它`importrange`工作，我将它添加到 a `Menu`（以防万一）。

```
function onOpen() {
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var menuEntries = [];
    menuEntries.push({name: "Refresh", functionName: "SheetFlush"});
    ss.addMenu("Menu", menuEntries);
}

function SheetFlush() {
    SpreadsheetApp.flush();
} 
```

现在，因为我不希望`B`用户知道`A`SS 唯一地址。（查看`importrange`功能时）

我正在使用SS`importrange`中的功能保护和隐藏工作表。`B`我在`B`SS 中为隐藏表使用了额外的内部引用。

# amazon-s3 - 添加到 S3 存储桶的新项目是否会通过 CDN 自动提供？

> ID：12160915
> 
> 赞同：-1
> 
> 时间：2012-08-28T13:59:06.417
> 
> 标签：amazon-s3, amazon-web-services, cdn, amazon-cloudfront

我在 S3 上有一堆图像。我使用 Cloudfront 设置了要通过 CDN 交付的存储桶内容。现在，如果我向存储桶添加新图像，我需要为存储桶重新设置 Cloudfront 还是自动分发新项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:06:34.750

这些项目不会自动分发，但您无需配置任何其他内容。CDN 节点在本地查找附属于该存储桶的缓存对象。如果对象不存在但需要从 CDN 提供服务，则节点从 S3 请求它并将其缓存一段预定的时间。

它实际上很像“DNS 传播”，这是一个常见的误称，有些人认为 DNS 设置会在世界范围内“传播”。实际上，世界上的服务器请求信息然后将其缓存在本地。您不是在等待 DNS 更改传播；您正在等待缓存的设置过期。CloudFront 也是如此：新对象在第一次被请求时被提供和缓存。如果将对象替换为同名的新对象，缓存该对象的 CDN 节点将显示旧对象，直到它过期。

# python - AuiNotebook - 获得点击选项卡

> ID：12160918
> 
> 赞同：2
> 
> 时间：2012-08-28T13:59:20.113
> 
> 标签：python, events, wxpython, wxnotebook

我目前在我的一个项目中使用了一些 wxPython 的 AuiNotebook，但我遇到了一个无法解决的问题。我认为应该有一个简单的解决方案，但无法找到它。

我创建了一个派生自的新类`wx.lib.agw.aui.AuiNotebook`，我试图在单击它的那一刻获取选项卡的索引。我写了这样的东西：

```
class NewNotebook(wx.lib.agw.aui.AuiNotebook):

    # __init__ function an stuff...

    def OnTabClicked(self, evt):
        index = self.GetSelection()
        print index
        wx.lib.agw.aui.AuiNotebook.OnTabClicked(self, evt) 
```

目的是捕获单击的选项卡的索引，在某些情况下，具有特殊行为，或者仅执行常规单击。但是，我认为这`AuiNotebook.OnTabClicked`实际上改变了不同事物之间的选择。它将解释为什么`index`包含单击之前选择的选项卡的值。

不过，我没有找到选择新标签的方法。我在捕获的事件中查找了一些信息，但仍然找不到我想要的。

那么，有人知道我在打电话之前如何获得选定的标签`AuiNotebook.OnTabClicked`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:12:59.353

似乎没有内置的方法可以做到这一点。我找到的最接近的东西是我在[wxPython 邮件列表中](https://groups.google.com/forum/?fromgroups=#!topic/wxpython-users/h4IBr7IfSDE)提供的帮助，但这与双击有关。

这是我想到的一种解决方法。当您第一次显示框架时，将某种类属性设置为当前显示的选项卡（即 self.currentTab = 0）。然后捕获 EVT_AUINOTEBOOK_PAGE_CHANGING 或 EVT_AUINOTEBOOK_PAGE_CHANGED 事件并更新属性。对我来说，当我捕捉到 EVT_AUINOTEBOOK_PAGE_CHANGING 时，我总是会得到我正在单击的选项卡的索引，至少在 Windows 上是这样。

# iphone - 使用正则表达式解析 URL

> ID：12160921
> 
> 赞同：0
> 
> 时间：2012-08-28T13:59:22.180
> 
> 标签：iphone, objective-c, regex, cocoa-touch

我需要解析以下格式的 URL：

[http://www.example.com/?method=example.method&firstKey=firstValue&id=1893736&thirdKey=thirdValue](http://www.example.com/?method=example.method&firstKey=firstValue&id=1893736&thirdKey=thirdValue)

我只需要**&id=1893736**中的**1893736**的值。

 **我需要为我的 iPhone 项目在 Objective-C 中进行解析。我知道它必须与正则表达式有关。但我只是不知道该怎么做。

任何建议，将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:19:06.083

您不需要正则表达式。你可以试试这样的

```
NSString *url = @"http://www.example.com/?method=example.method&firstKey=firstValue&id=1893736&thirdKey=thirdValue";

NSString *identifier = nil;

for (NSString *arg in [[[url pathComponents] lastObject] componentsSeparatedByString:@"&"]) {
  if ([arg hasPrefix:@"id="]) {
    identifier = [arg stringByReplacingOccurrencesOfString:@"id=" withString:@""];
  }
}

NSLog(@"%@", identifier); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:22:15.490

使用[**这个**](http://regexr.com?31vjp)：

```
.*/\?(?:\w*=[^&]*&)*?(?:id=([^&]*))(?:&\w*=[^&]*)* 
```

并抓住第一组：`\1`。您将获得`1893736`.

### 简化

如果`id`只能由数字组成：

```
.*/\?(?:\w*=[^&]*&)*?(?:id=(\d*))(?:&\w*=[^&]*)* 
```

如果您不关心捕获不感兴趣的组（在这种情况下**[使用](http://regexr.com?31vkb)** `\3`or ）：`id`

```
.*/\?(\w*=.*?&)*?(id=(?<id>\d*))(&\w*=.*)* 
```

**[更简单的](http://regexr.com?31vke)**版本（使用`\3`）：

```
.*/\?(.*?=.*?&)*(id=(\d*))(&.*?=.*)* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:34:50.733

不要使用正则表达式。用于`NSURL`可靠地提取查询字符串，然后[使用此答案的代码](https://stackoverflow.com/a/5410443/573976)来解析查询字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:17:19.667

您可以拆分 NSURL 实例的字符串表示，而不是使用正则表达式。在您的情况下，您可以通过附加符 (&) 拆分字符串，循环查找前缀 (id=) 的数组，并从索引 2 中获取子字符串（这是 = 结束的位置）。**

# yui - 如何使用更新的 json 数据刷新 yui3 数据表

> ID：12160924
> 
> 赞同：0
> 
> 时间：2012-08-28T13:59:29.660
> 
> 标签：yui, yui3, yui-datatable

我想使用 json 格式的新数据刷新数据表。

我尝试使用下面的方法，但它给出了提到的错误

```
var myData = table.get('data');
myData.add(json_data); 
```

控制台日志中的错误：

```
invalid 'in' operand config
userTargets = (config && BUBBLETARGETS in config); 
```

如果有任何其他方法可以使用新数据刷新 yui3 数据表，请有人解释一下

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:23:56.707

听起来您传递的 json 数据不是对象数组。也许它是一个对象数组嵌套在某处的对象？

无论如何，你可以做

```
table.set('data', json_data.path.to.resultArray); 
```

如果您想将更多记录附加到表中，请尝试

```
table.addRows(json_data.path.to.resultArray); 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:19:53.907

当我使用 eval 到 json_data 时它工作正常（它在 Perl 中从字符串编码为 Json 格式）

```
table.set('data', eval(json_data)); 
```

# reflection - 获取参数名称

> ID：12160928
> 
> 赞同：5
> 
> 时间：2012-08-28T13:59:43.547
> 
> 标签：reflection, plsql

我想在 plsql 中获取参数的名称。

例如，

```
procedure sp_example(myParam in varchar2) is

paramName varchar2(30);
begin
    paramName = 'myParam';
end
end procedure sp_example; 
```

有没有办法获得`myParam`使用反射的名称，而不是硬编码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T23:58:06.190

尝试：

```
select argument_name from all_arguments where object_name = 'SP_EXAMPLE'; 
```

该视图还可以向您显示数据类型、位置等，您可以在 SQL 或 PL/SQL 中使用它。各种元数据视图中的大量信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:34:54.767

如果要获取在各自位置检索的参数名称，请使用

`select argument_name from user_arguments where object_name='SAMPLE_PROC' order by position;`

# ajax - 无法扩展 Ext.Ajax.request

> ID：12160929
> 
> 赞同：1
> 
> 时间：2012-08-28T13:59:46.330
> 
> 标签：ajax, extjs, request

我创建了扩展 Ext.Ajax.request 的类，但我可以运行它。我总是收到错误消息：

> TypeError：me.fireEvent 不是函数

```
if (me.fireEvent('beforerequest', me, options) !== false) { 

Ext.define('MY.classes.GetItem', {
    extend: 'Ext.Ajax.request', 

    url: 'getItems.php',
    method : 'GET',
    timeout: 30000, 

    success: function (response, opts){
        alert('email sent succ!');
    },

    failure: function (response, opts){
        alert('email request fail! ' + response.status);
        //var jsonResp = Ext.util.JSON.decode(response.responseText)
        //Ext.Msg.alert("Error",jsonResp.error);
    },

    // headers: {'Content-Type': 'application/json'},
    // jsonData: {"emailId" : "admin@psiloc.com" },

    params: {
        To: "arek@ooo.com",
        Subject: 'temat',
        Text: 'wiasomosc'
    }

}); 
```

我称之为：

```
var p =  {id: itemId};
        var req = Ext.create('MY.classes.GetItem');
        req.request( {params : p} ); 
```

是否可以通过扩展类调用请求？

我不能让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:40:04.500

那是因为你在扩展一个函数，而不是一个类。类是 Ext.Ajax

你也不能扩展它

```
Ext.define('...', {

     extend: 'Ext.window.Window.show',
}); 
```

你可以做这样的事情（注意：我没有测试过这个，所以可能有错误）：

```
Ext.define('MY.classes.GetItem', {

    url: 'getItems.php',
    method: 'GET',
    timeout: 30000,

    constructor: function() {
        var me = this;

        Ext.apply(me, config);

        me.callParent();
    },

    success: function(response, opts) {
        alert('email sent succ!');
    },

    failure: function(response, opts) {
        alert('email request fail! ' + response.status);
    },

    params: {
        To: "arek@ooo.com",
        Subject: 'temat',
        Text: 'wiasomosc'
    },

    request: function() {
        var me = this;
        Ext.Ajax.request({
            success: me.success,
            failure: me.failure,
            url: me.url,
            method: me.method,
            params: me.params
        });
    }
});​ 
```

并像这样调用你的类：

```
var myClass = Ext.create('MY.classes.GetItem', {
    params: {
        p: 'my parameter'
    }
});
​myClass.request();​ 
```

# android - 下载的文件存储在android哪里

> ID：12160930
> 
> 赞同：0
> 
> 时间：2012-08-28T13:59:51.050
> 
> 标签：android

当没有存储卡时，下载的文件存储在 android 中的哪里以及如何从我的应用程序访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:31:48.573

如果您没有选择将其存储在 SD 卡中，它们将存储在设备的内部存储器中。内部存储使用 linux 文件系统权限，因此文件将是您的应用程序私有的，其他应用程序无法访问它们。

如果您正在谈论媒体文件，则可以通过将它们添加到各自的内容提供程序中来使它们随处可访问。

打开一个文件，使用`openFileOutput()`它返回一个文件流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:02:20.507

您应该阅读有关[存储选项](https://developer.android.com/guide/topics/data/data-storage.html#filesExternal)的文章，该文章还提供了访问外部存储的代码示例。

# ruby - 找出哪个对象在 ruby 中有 n 个实例

> ID：12160932
> 
> 赞同：1
> 
> 时间：2012-08-28T13:59:56.853
> 
> 标签：ruby, arrays, find, instance

我有一个数组： x = [a, b, c, d, e, f, g, h] 可以包含从 1 到 9 的对象

首先，我必须计算这些对象是否存在 3 次。我不想写

```
if (x.count(1) == 3) or (x.count(2) == 3) ...etc... 
```

有没有办法缩短这个，如下所示？

```
x.count { |obj| obj } == 3 
```

其次，如果我知道一个对象已经找到了 3 个实例，我怎样才能找出它是哪一个？（1个或2个或3个......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:21:47.043

```
x = [:a, :b, :b, :b, :c, :c, :c]
counted = Hash[
  x.group_by do |e|
    x.count(e)
  end.map do |count, items|
    [count, items.uniq]
  end
]
p counted[3]    #=> [:b, :c] 
```

* * *

这是如何运作的？让我们按照步骤操作。首先，让我们按计数对项目进行分组：

```
grouped_by_count = x.group_by do |e|
  x.count(e)
end 
```

这会产生一个哈希，其中键是计数，值是具有该计数的非唯一项的列表：

```
p grouped_by_count
#=> {1=>[:a], 3=>[:b, :b, :b, :c, :c, :c]} 
```

不过，我们真的更希望拥有*独特的*物品，所以让我们进行转换：

```
grouped_by_count_unique = grouped_by_count.map do |count, items|
  [count, items.uniq]
end
p grouped_by_count_unique
#=> [[1, [:a]], [3, [:b, :c]]] 
```

这给了我们一个数组数组，而不是一个散列。幸运的是，将数组数组转换为哈希很容易：

```
counted = Hash[grouped_by_count_unique]
p counted
# => {1=>[:a], 3=>[:b, :c]} 
```

现在只需将这些部分放在一起消除临时性，您就会在顶部得到答案。

# unity3d - Application.Quit() 不起作用 - Unity3D unityscript

> ID：12160934
> 
> 赞同：-1
> 
> 时间：2012-08-28T14:00:04.637
> 
> 标签：unity3d, unityscript

我的简单游戏没什么问题。

我正在使用此代码进行菜单控制：

```
 #pragma strict

var isIZADJI=false;

function OnMouseEnter()
{
renderer.material.color=Color.red;
}

function OnMouseExit()
{
renderer.material.color=Color.white;
}

function OnMouseUp()
{
if(isIZADJI)
{
Application.Quit();

}
else
{
Kontrola_Zivota.ZIVOTI=3;
Application.LoadLevel(1);

}
} 
```

当我单击“再次播放”时，它工作正常，但当我单击“退出”时，它只加载第一级。

这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:59:00.940

我只是想我会扩展解决方案：

我正在阅读您的代码，发现您正在寻找的是一种识别单击了哪个按钮的方法。我想为任何想知道您的解决方案的人扩展您的答案。解决这个问题的方法是创建一个字符串变量来检查您正在单击的事物的名称（假设这是 GUI 按钮），然后根据该变量更改 var isIZADJI 的状态，例如：

```
// izlaz[croatian] = exit[english]

// First create a string var for the name of button/GUI/object
var nameOfButton : String;

function OnMouseUp()
{

    if(!(nameOfButton == "izlaz"))
    {
    isIZADJI = false;
    }
    else
    {
    isIZDAJI = true;
    }

    // And then now you can add the rest of your code to quit or load a level
    if(isIZADJI)
    {
    Application.Quit();
    }
    else
    {
    Kontrola_Zivota.ZIVOTI=3;
    Application.LoadLevel(1);
    }

} 
```

我希望这可以帮助其他人解决这个问题。

# c++ - 检查服务是否来自 Microsoft

> ID：12160935
> 
> 赞同：1
> 
> 时间：2012-08-28T14:00:07.780
> 
> 标签：c++, winapi

如何确定服务是否来自 Microsoft？类似于 msconfig 的作用。

一直在查看服务 API，但我找不到任何东西。

**编辑：**
为澄清起见，我说的是 Windows 服务（Windows 更新、Windows 搜索、计算机浏览器等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:05:56.897

您检查服务的可执行文件是否由 Microsoft 签名。

# javascript - 我正在关注 codecademy 上的 javascript 课程，但事件在哪里？

> ID：12160936
> 
> 赞同：0
> 
> 时间：2012-08-28T14:00:08.087
> 
> 标签：javascript, javascript-events

我已经到了我们必须在 Black Jack 游戏项目上工作的地步，但没有看到任何对事件的引用，当然也检查了后面的部分，但仍然没有与事件相关的内容。

你觉得这门课有用吗？

请向我推荐一个可以在更短的时间内学习 javascript 的资源，我的意思是一些快速课程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:08:06.013

我知道你想学习 javascript，但你可能会喜欢这门 JQuery 课程。30 天后，您将知道您曾经梦想过的事情。

[https://tutsplus.com/course/30-days-to-learn-jquery/](https://tutsplus.com/course/30-days-to-learn-jquery/)

我希望这对你的学习有所帮助。再见！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:18:50.233

来自 Lynda.com 的任何内容。这应该没问题：[http ://www.lynda.com/JavaScript-tutorials/Essential-Training-2011/81266-2.html?srchtrk=index%3A2%0Alinktypeid%3A2%0Aq%3Ajavascript%0Apage%3A1% 0As%3Arelevance%0Asa%3Atrue%0Aproducttypeid%3A2](http://www.lynda.com/JavaScript-tutorials/Essential-Training-2011/81266-2.html?srchtrk=index%3A2%0Alinktypeid%3A2%0Aq%3Ajavascript%0Apage%3A1%0As%3Arelevance%0Asa%3Atrue%0Aproducttypeid%3A2)

另外，如果你想使用 tutsplus，你可以找到 2 个非常好的 JavaScript 基础教程：[https ://tutsplus.com/?s=javascript+fundamentals&post_type=all](https://tutsplus.com/?s=javascript+fundamentals&post_type=all)

如果你想跟上 JavaScript 所提供的一切，你还应该考虑购买*JavaScript : The Good Parts* by Douglas Crockford、*JavaScript : The Definitive Guide* by David Flanagan 和*JavaScript Patterns by Stoyan Stefanof。*

# php - windows环境下如何通过PHP连接远程Linux box

> ID：12160937
> 
> 赞同：1
> 
> 时间：2012-08-28T14:00:07.733
> 
> 标签：php, linux, wamp, remote-access, putty

我在安装了 Wamp 的 Windows XP 机器上。目前，我正在使用 putty 连接我的远程 Linux 机器。

我想通过 php shell_exec() 方法（cp，ls，...）执行 Linux 命令。

有人知道如何先连接我的 Linux 机器，然后在 Windows 环境中运行这些命令吗？

任何建议将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:31:35.373

您不能`Linux`在`Windows`. 您可以`SSH`使用`putty`. 看来您正在运行。

您可以通过 ssh 转发连接。查看腻子屏幕，转到`Connection > SSH > Tunnels`。

然后你添加一个隧道：

```
source port: 1234 
destination port: localhost:80
type is Local 
```

所以你打开`Internet Explorer`，在地址栏中输入：然后将`http://localhost:1234`端口`1234`转发到`80`远程 linux pc 上的端口。

您也可以通过设置将其转发到 WAMP

```
destination port: *ip of the wamp server*:80 
```

然后你可以`Windows`从网络外部访问电脑，只要它`putty`正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:51:53.920

您可以：

*   安装[CYGWIN](http://www.cygwin.com/)
*   [为 PHP](http://php.net/manual/en/book.ssh2.php)安装SSH2 扩展

我使用了一个扩展的 SSH2 类，可以在此处找到：[带有异常处理的 SSH2](http://www.highonphp.com/php-ssh2-class-with-exception-handling)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:38:14.217

听起来您希望 Windows 上的 PHP 脚本在远程 Linux 服务器上运行 SSH 命令。为此，请参阅[PHP SSH2 扩展](http://php.net/manual/en/book.ssh2.php)。

> 绑定到 libssh2 库，该库使用安全加密传输提供对远程机器上资源（shell、远程执行、隧道、文件传输）的访问。

这将允许您通过 SSH 连接到 Linux 服务器并在删除服务器上执行命令（`cp`、`ls`等）。这是一些示例代码：

```
$connection = ssh2_connect('shell.example.com', 22);
ssh2_auth_password($connection, 'username', 'password');
$stream = ssh2_exec($connection, 'hostname');
echo "Output: " . stream_get_contents($stream); 
```

值得注意的是，这可能不是完成这项任务的最安全或最可靠的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:44:35.643

我不认为你可以在 Windows 机器上执行 linux 命令。

您可能要考虑使用[适用于 Windows](http://sourceforge.net/projects/sshwindows/) 的 OpenSSH 并跳过 php.ini 文件。

但是你会得到一个 Windows Shell。`C:\\>`and no `ls`or `cp`，但完全控制。

您还可以进行实验并使用 linux 运行虚拟机并与它共享您的 Windows 驱动器。

`remote server linux`- - ssh - - > `local virtual linux`- - - 共享文件夹 - - >`windows`

# mysql - MySql 触发器语法在表中查找值并在更新的行中更新

> ID：12160943
> 
> 赞同：0
> 
> 时间：2012-08-28T14:00:24.223
> 
> 标签：mysql, triggers, syntax-error

我正在将一些旧的遗留 Interbase 数据库转换为 MySql，但在转换触发器时遇到了一些问题。这就是我到目前为止所做的，但似乎无法理解以下触发器中的错误是什么。你能帮忙修正语法吗？

```
DELIMITER ^ 
```

在这两种情况下，它说`into new.FinancialCode`是不正确的。完成此任务的正确形式是什么？（**在表中查找一个值并在更新的行中更改它**）

```
Create Trigger triggerFinancialCode  BEFORE UPDATE ON  FLOW
FOR EACH ROW
begin
  Select FinancialCode FROM Accounts where AccountCode = new.AccountCode 
  into new.FinancialCode ;
end ^

Create Trigger triggerFinancialCodePredicted  BEFORE UPDATE ON  PREDICTED_FLOW
FOR EACH ROW
begin
  Select FinancialCode FROM Accounts where AccountCode = new.AccountCode 
  into new.FinancialCode ;
end ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:34:49.880

试试这个代码 -

```
CREATE TRIGGER triggerFinancialCode BEFORE UPDATE ON FLOW
FOR EACH ROW
BEGIN
  SET @var = NULL;

  SELECT FinancialCode INTO @var FROM Accounts WHERE AccountCode = NEW.AccountCode;

  SET NEW.FinancialCode = @var;
END 
```

对第二个触发器执行相同的操作。

# string - VB6 文本框字体粗细操作

> ID：12160948
> 
> 赞同：3
> 
> 时间：2012-08-28T14:00:42.177
> 
> 标签：string, vb6, textbox

我有一个 VB6 应用程序，我想在其中操作在文本框中输出的字符串的某些部分。

```
txtPhoneNums.Text = "Home:  " + strHomeNo + vbCrLf _
                    + "Mobile: " + strMobileNo + vbCrLf + "Work:  " + strWorkNo + vbCrLf 
```

它嵌套在执行各种验证的 if 语句中。例如，我希望能够在上面的代码片段中以红色和粗体字突出显示单词“Work”和附加的字符串值“strWorkNo”。我可以在不创建多个文本框的情况下轻松做到这一点（并将其他两个值保留为默认外观吗？）

谢谢。

为了清楚起见，添加了图像。我希望两个空字段字符串是红色和粗体。![在此处输入图像描述](../Images/b304325546b1934f2c52627fdcafcd9d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T15:28:33.307

您想使用 RichTextBox。我建议您不要尝试使用富文本格式 (RTF) 本身，而是使用标准方法。

您的代码将更改如下：

```
Option Explicit

Private Sub Command1_Click()
    WritePhoneNums "01020239", "07749383", "0234394349"
End Sub

Private Sub WritePhoneNums(ByRef strHomeNo As String, ByRef strMobileNo As String, ByRef strWorkNo As String)

    Dim nPosBeginningOfWorkNo As Long
    Dim nPosCurrent As Long

    txtPhoneNums.TextRTF = vbNullString ' Clear existing code.

    ' Clear style to default.
    ApplyNormalStyle txtPhoneNums

    ' Enter standard text. The selection will be at the end of the text when finished.
    txtPhoneNums.SelText = "Home:  " + strHomeNo + vbCrLf _
                         & "Mobile: " + strMobileNo + vbCrLf + "Work:  "

    ' Save the cursor position, write the work number, and then save the cursor position again.
    nPosBeginningOfWorkNo = txtPhoneNums.SelStart
    txtPhoneNums.SelText = strWorkNo
    nPosCurrent = txtPhoneNums.SelStart

    ' From this information, select the preceding text, and make it "selected".
    txtPhoneNums.SelStart = nPosBeginningOfWorkNo
    txtPhoneNums.SelLength = nPosCurrent - nPosBeginningOfWorkNo
    ApplyHighlightedStyle txtPhoneNums

    ' Reset the selection to the end, and reset the text style.
    txtPhoneNums.SelStart = nPosCurrent
    txtPhoneNums.SelLength = 0
    ApplyNormalStyle txtPhoneNums

    txtPhoneNums.SelText = vbCrLf

End Sub

Private Sub ApplyNormalStyle(ByRef txt As RichTextBox)
    txt.SelBold = False
    txt.SelColor = vbBlack
End Sub

Private Sub ApplyHighlightedStyle(ByRef txt As RichTextBox)
    txt.SelBold = True
    txt.SelColor = vbRed
End Sub 
```

# vba - 在 VBA 中，如何将键盘快捷键恢复为默认值？

> ID：12160949
> 
> 赞同：5
> 
> 时间：2012-08-28T14:00:42.893
> 
> 标签：vba, keyboard-shortcuts

在我的 VBA Excel 插件中，我允许用户为我的公共宏分配任意键盘快捷键。我允许他们在运行时更改这些快捷方式*（实际上，他们更改了配置文件然后重新加载它）*。我`Application.OnKey`用来做这个。

如果用户在运行时更改了快捷键，如何恢复旧键盘快捷键的任何先前默认定义？

例如，如果我以编程方式分配`^S`给宏，然后将其更改为`^E`，如何恢复`^S`到原始 Excel 的“保存”行为？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T14:36:26.867

要将通过定义的键返回`OnKey`为其默认值，请在没有过程的情况下定义它。

这将`CTRL`+设置`S`为“SpecialPrintProc”

```
Application.OnKey "^S", "SpecialPrintProc" 
```

这会将`CTRL`+返回`S`到其正常含义。

```
Application.OnKey "^S" 
```

这会禁用`CTRL`+ `S`。

```
Application.OnKey "^S", "" 
```

# c++ - boost::locale 排序规则的结果不一致

> ID：12160954
> 
> 赞同：0
> 
> 时间：2012-08-28T14:00:56.653
> 
> 标签：c++, internationalization

在 Debian 测试（boost 1.49 )，我得到的结果对我来说没有意义。

“Muller”被认为小于“Müller”（如预期的那样），但“Muller 2”被认为比“Müller 1”多，尽管仅名称的结果不同。

我的代码、底层库或我的期望中是否有错误？

```
#include <locale.h>

#include <boost/locale.hpp>
#include <boost/assign/std/vector.hpp>
#include <boost/foreach.hpp>
#include <boost/assign/list_of.hpp>
#include <boost/algorithm/string/join.hpp>
#include <iostream>

int main(int argc, char **argv)
{
    setlocale(LC_ALL, "");

    std::cout << "backends: " <<
        boost::join(boost::locale::localization_backend_manager::global().get_all_backends(),
                    ", ") << std::endl;
    boost::locale::localization_backend_manager::global().select(argc > 2 ? argv[2] : "icu");
    std::locale loc = boost::locale::generator()(argc > 1 ? argv[1] : "de_DE.UTF-8");

    typedef boost::tuple<std::string, std::string> string_pair_t;
    std::vector<string_pair_t> pairs =
        boost::assign::tuple_list_of("Muller", "Müller")
        ("Muller 2", "Müller 1")
        ("Muller B", "Müller A");
    BOOST_FOREACH (const string_pair_t &pair, pairs) {
        const std::string &a = boost::get<0>(pair),
            &b = boost::get<1>(pair);
        int cmp = std::use_facet<boost::locale::collator<char> >(loc).
            compare(boost::locale::collator_base::identical, a, b);
        std::cout <<
            a << " and " << b <<
            " are " <<
            (cmp == 0 ? "identical" : "different") <<
            " (" <<
            (cmp < 0 ? '<' :
                   cmp > 0 ? '>' : '=') <<
            ")" << std::endl;
    }

    return 0;
} 
```

我系统上的输出：

```
$ /tmp/mueller de_DE.utf-8 icu
backends: icu, posix, std
Muller and Müller are different (<)
Muller 2 and Müller 1 are different (>)
Muller B and Müller A are different (>) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:45:41.903

意外的结果来自不了解 Unicode 排序算法的工作原理：它总是从最低级别开始，如果字符串在该级别已经被认为不同，则使用该结果。允许更高级别只会导致不同的结果，其中较低级别没有发现字符串之间的相关差异。

# java - 我可以使用什么设计模式来为购物车应用程序创建基于国家/州/位置的对象？

> ID：12160959
> 
> 赞同：3
> 
> 时间：2012-08-28T14:01:05.747
> 
> 标签：java, design-patterns, shopping-cart, factory-pattern

我正在开发一个可以帮助我提高 OO 设计技能的应用程序。我几乎完成了任务，但我觉得我需要使我的应用程序更具可扩展性，并且需要一些关于如何实现这一点的输入。

问题域可以简单描述如下：

问题域是设计一个购物车应用程序。食品、书籍等物品有不同的类别。物品符合条件的税率取决于物品的类别。有明确的税收政策，例如10%的基本税适用于除属于食品类别的项目外的所有项目，所有进口项目均需缴纳5%的额外进口关税。

我要关注的领域是负责决定某个项目是否符合给定税收政策的模块。我利用其他人和互联网的想法为税收模块提出了以下设计：

![购物车税费模块设计](../Images/c58628ff65c5e8d824bf688aad457321.png)

**TaxCriteria ：**定义项目必须满足的条件才能符合 TaxPolicy 的条件。具体实现者实现 isEligible 方法并提供用于确定项目是否符合策略的业务逻辑，例如。ImportedTaxCriteria 中的 isEligible 方法将检查项目是否已导入。

**TaxPolicy ：** 具有 TaxCriteria、适用税的税率以及税收政策的名称。TaxPolicy 和 TaxCriteria 之间的关系基于规范模式。

**SalesPolicy ：**由一个或多个 TaxPolicy 实例组成。

**SalesEngine ：** SalesEngine 有一个 SalesPolicy 和一个 TaxCalculator。向 applyPolicies 方法传递一个包含项目列表的 Order。applyPolicies 将遍历订单中的每个项目，并根据销售政策中的每个 TaxPolicy 检查其资格，并使用基于适用政策的 TaxCalculator 计算税款。

新的问题域：

每个国家都有不同的销售政策。美国的进口关税可能是 5%，而中国的进口关税可能是 3%。为了满足这个要求，我正在考虑使用一个简单的工厂模式。SalesPolicy 将不再是一个类，而是一个带有返回 TaxPolicy 列表的 getTaxPolicies 方法的接口。USASalesPolicy 和 ChinaSalesPolicy 将实现 SalesPolicy，getTaxPolicies 方法将分别返回与特定国家有关的 TaxPolicy 列表。同样，每个国家都会有自己的税收计算调整。USATaxCalculator 和 ChinaTaxCalculator 可以处理独立的实现。

最后，SalesEngine 将在构造函数中传递一个 SalesPolicyFactory 和一个 TaxCalculatorFactory，而不是直接传递一个 SalesPolicy 和一个 TaxCalcualtor。applyPolicies 方法将传递一个附加参数，该参数将是一个代表国家/地区的字符串。applyPolciies 方法会将国家/地区传递给 SalesEngine 中的工厂，并使用它们创建适当的 SalesPolicy 和 TaxCalculator 实例以用于计算税款。

这就是我迄今为止的思考过程。我是否对定义明确的设计原则和工厂模式公正？如何使用抽象工厂模式，使 SalesPolicy 和 TaxCalculator 代表相关产品的系列？有没有比我用过的更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:42:41.443

如果您愿意，您可以合并抽象工厂模式来处理 TaxPolicy 对象的创建。

在您的情况下，这将涉及：

`AbstractTaxPolicyFactory`– 带有抽象方法的接口`createItemCategoryTaxPolicy()`and `createImportDutyTaxPolicy()`，这将创建抽象的税收政策`ItemCategoryTaxPolicy`和`ImportDutyTaxPolicy`（这些将是您的“相关产品系列”）

`USTaxPolicyFactory`-`ChinaTaxPolicyFactory`两个具体工厂，每个都实施这两种方法来创建具体的税收政策，例如`ChinaImportDutyTaxPolicy`，等等。

`ItemCategoryTaxPolicy`–`ImportDutyTaxPolicy`各自具体税收政策的接口

`USItemCategoryTaxPolicy`, `USImportDutyTaxPolicy`, `ChinaItemCategoryTaxPolicy`, 和`ChinaImportDutyTaxPolicy`– 四项具体税收政策。例如，在运行时 ,`USImportDutyTaxPolicy`将由`USTaxPolicyFactory`, 和`ImportDutyTaxPolicy`类型创建。

`SalesPolicy`将是您的客户，将使用抽象工厂和抽象税收政策接口，例如：

```
AbstractTaxPolicyFactory absFactory = new ChinaTaxPolicyFactory();
// or use a static factory method: 
// TaxPolicyFactoryCreator.createNewFactory(Country.CHINA); 
ItemCategoryTaxPolicy itemCatTaxPolicy = absFactory.createItemCategoryTaxPolicy();
addTaxPolicy(itemCatTaxPolicy);
ImportDutyTaxPolicy importDutyTaxPolicy = absFactory.createImportDutyTaxPolicy();
addTaxPolicy(importDutyTaxPolicy); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:35:29.540

我会使用工厂模式。实现/设计一个工厂类，该类将接受语言环境信息，并将返回一个实现上述行为的类。这些行为的实现会因国家和城市而异，因此工厂必须弄清楚并返回哪个特定类为区域设置提供了正确的实现。

# php - date_diff 返回疯狂的东西

> ID：12160960
> 
> 赞同：2
> 
> 时间：2012-08-28T14:01:12.177
> 
> 标签：php, datetime, datediff, date-comparison

今天把我的头撞到墙上去处理日期。我正在遍历一堆日期时间并将它们与当前日期进行比较以确定它们有多远。

所以我要返回诸如“明天@下午 4 点”、“昨天下午 3 点”、“今天下午 12 点”、“3 天前”、“3 天后”等内容。

一切正常，直到今天/明天/昨天。

当到达这些日期时，日期差异会返回诸如 -0 和 +0 之类的愚蠢的东西。我的理论是，可以说……未来 23 小时，甚至未来 10 小时的日期，即使它们发生在“第二天”，也会返回 0 而不是 1。

不幸的是 date_diff 似乎没有返回小数或允许我进行任何形式的舍入。

这是一些示例代码：

```
$difference = $meeting_date->diff($current_date);
$difference = $difference->format('%R%a'); 
```

然后我检查这个差整数，看看它是 0、-1、1、< -1 还是 > 1。我在必要时处理前面的 + 号。

那些应该是 -1 或 +1 的，有时会以 -0 或 +0 的形式返回（..what？）

此外，-0 不是 = 0，但根据 PHP，显然小于 -1。

SOS，有人帮忙。

我已阅读所有相关问题，这不是重复的，并且与随机 6015 错误无关。同样使用 diff->days 也不是答案。这总是返回一个绝对值而不是负数，这将是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:21:48.747

嗯...我在这里的方法是拆分时间和日期显示。像这样的东西：

`$meeting_day = DateTime::createFromFormat($meeting_date->format('Y-m-d'));`

 `// set $today to today's date at 0:00` 

`$diff = $meeting_day->diff($today);`

这应该给你一个可用的基于天的差异（用于渲染今天、昨天、明天等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:23:16.240

与其比较天数，不如与`time()`另一个可以使用 strtotime() 格式化的日期时间进行比较

[时间（）](http://php.net/manual/en/function.time.php)

您可以转换您要与之比较的任何日期时间`strtotime()`

[strtotime()](http://php.net/manual/en/function.strtotime.php)

现在您可以在几秒钟内比较两者的差异，并根据您认为合适的天数、小时数等进行划分

# database - 允许未注册/注册用户对帖子发表评论的最佳做法是什么？

> ID：12160962
> 
> 赞同：-1
> 
> 时间：2012-08-28T14:01:19.207
> 
> 标签：database

我有一个存储用户的表，另一个存储帖子信息的表和一个存储评论的第三个表。

我想允许未注册*和*注册用户对帖子发表评论。

什么是最佳实践数据库设计？我应该如何在数据库中存储未注册或已注册的评论者信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:11:05.430

将客人发表的评论放在评论表`null`的字段中，或者更好的是，创建一个名为“Guest”的新用户并将评论分配给他们。`userID`

或者，将一个新列添加到名为`guest`或类似的评论表中。将其设为布尔值并为访客评论打开它，为注册用户评论关闭它。

有很多方法，没有一种是“正确”的方法。使用最适合您的系统的任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:18:15.563

您可以在您的用户表中创建一个虚拟用户记录，其中包含来宾用户的姓名、电子邮件、网站，并将评论链接到虚拟用户的 ID。

**编辑：**鉴于您在评论中添加的其他信息：

创建一个基本`Users`表

*   ID
*   姓名
*   电子邮件
*   网站

`RegisteredUsers`使用注册用户所需的附加字段创建第二个表，并将两个表之间的关系定义为 Users.Id = RegisteredUsers.Id。

然后该`Comments`表将有一个`CreatedByUserId`字段 where `CreatedByUserId = Users.Id`。

# excel - 双重组织不起作用

> ID：12160972
> 
> 赞同：0
> 
> 时间：2012-08-28T14:01:49.363
> 
> 标签：excel, vba

我有一个脚本：

```
Sub wsPOT()
    Dim wsPOT As Worksheet
    Dim cel As Range
    Dim lastrow As Long, lastrow2 As Long, fstcell As Long, i As Long, Er As Long, lstCol As Long, lstRow As Long

    Set wsPOT = Sheets("PO Tracking")

    With wsPOT
        wsPOT.Range("Q1:U1").Copy
        lastrow = wsPOT.Cells(Rows.Count, "B").End(xlUp).Row
            wsPOT.Range("V1:X1").Copy wsPOT.Range("H3:J" & lastrow)
            wsPOT.Range("N2:O2").Copy wsPOT.Range("N3:O" & lastrow)
            wsPOT.Range("P1:V1").Copy
            wsPOT.Range("B3:H" & lastrow).PasteSpecial xlPasteFormats
            wsPOT.Range("K3:K" & lastrow).Borders.Weight = xlThin

        lastrow = wsPOT.Cells(Rows.Count, "B").End(xlUp).Row
            wsPOT.Range("H:J").Calculate
            wsPOT.Range("B3:K" & lastrow).Sort key1:=Range("H3:H" & lastrow), order1:=xlAscending
        lastrow2 = wsPOT.Cells(Rows.Count, "H").End(xlUp).Row
            wsPOT.Range("B3:K" & lastrow2).Sort key1:=Range("H3:H" & lastrow2), order1:=xlDescending
    End With

End Sub 
```

这是为了最终组织工作表，使迟到的工作排在最前面，然后按从大到小排列。

它似乎不起作用。似乎发生的是第一个组织工作正常，但它似乎忽略了第二个标准。

附件是表格，带有脚本。

[https://dl.dropbox.com/u/3327208/Excel/Orga.xlsm](https://dl.dropbox.com/u/3327208/Excel/Orga.xlsm)

如果有人可以帮助看看这个，它会受到赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:17:10.963

这是你正在尝试的吗？

```
Option Explicit

Sub wsPOT()
    Dim wsPOT As Worksheet
    Dim cel As Range
    Dim lastrow As Long, lastrow2 As Long, fstcell As Long
    Dim i As Long, Er As Long, lstCol As Long, lstRow As Long

    Set wsPOT = Sheets("PO Tracking")

    With wsPOT
        .Range("Q1:U1").Copy
        lastrow = .Cells(.Rows.Count, "B").End(xlUp).Row
        .Range("V1:X1").Copy .Range("H3:J" & lastrow)
        .Range("N2:O2").Copy .Range("N3:O" & lastrow)
        .Range("P1:V1").Copy
        .Range("B3:H" & lastrow).PasteSpecial xlPasteFormats
        .Range("K3:K" & lastrow).Borders.Weight = xlThin
        lastrow = .Cells(.Rows.Count, "H").End(xlUp).Row
        .Range("H:J").Calculate

        .Sort.SortFields.Clear

        '~~> Sort on Red Icon First, putting it on top
        .Sort.SortFields.Add(.Range("J3:J" & lastrow), _
        xlSortOnIcon, xlAscending, , xlSortNormal).SetIcon Icon:=ActiveWorkbook. _
        IconSets(4).Item(1)

        '~~> Sort on Values of Red icon in descending order
        .Sort.SortFields.Add Key:=Range( _
        "J3:J" & lastrow), SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:= _
        xlSortNormal

        '~~> Sort on Green Icon Next, putting it on top after Red
        .Sort.SortFields.Add(.Range("I3:I" & lastrow), _
        xlSortOnIcon, xlAscending, , xlSortNormal).SetIcon Icon:=ActiveWorkbook. _
        IconSets(4).Item(3)

        '~~> Sort on Values of Green icon next in descending order
        .Sort.SortFields.Add Key:=Range( _
        "I3:I" & lastrow), SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:= _
        xlSortNormal

        With .Sort
            .SetRange wsPOT.Range("B2:K" & lastrow)
            .Header = xlYes
            .MatchCase = False
            .Orientation = xlTopToBottom
            .SortMethod = xlPinYin
            .Apply
        End With
    End With
End Sub 
```

# c# - 同一应用程序的两个 Toast 通知，同时。设备如何对其进行优先级排序和处理？

> ID：12160973
> 
> 赞同：3
> 
> 时间：2012-08-28T14:01:49.010
> 
> 标签：c#, windows-phone-7.1, toast

我有一个应用程序，它可以（可能）一个接一个地向用户显示两个 toast 通知。我观察到，如果出现这种情况，那么只有两个通知中的一个会显示给用户，但是一旦用户启动应用程序，然后在消息框中向用户显示相同的通知，并且如果他为第一条消息单击“取消”，并且然后显示下一个通知。所以，我现在的疑问是，如果有两个 toast 通知，那么设备将如何处理它？两者中的哪一个显示给用户？如果只向用户显示通知（设备的默认行为），那么有没有办法一个接一个地显示通知？

这与此[问题](https://stackoverflow.com/questions/9107988/if-two-local-notifications-have-the-same-fire-time-and-the-app-is-in-the-backgro)类似，但我想知道 WP7 手机的行为，因为 WP7 的功能与其他智能手机操作系统非常不同。

感谢所有建议，评论和答案。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:28:38.897

Windows Phone 7 有可能同时显示这两种消息，而先显示哪一条取决于手机先收到哪一条。

如果您查看此页面上的图表[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558(v=vs.92).aspx)，您会发现发送中有很多通信推送（toast、tile 或 raw）通知。它依赖于通常先发送先到先得的 Microsoft 推送通知服务。

因此，从它的声音来看，我会考虑尝试限制您的应用程序如何发送 toast 通知。因此，请检查是否在一定时间内向手机发送了 toast 通知，如果是，请保持发送下一个通知，直到该时间过去。

还要记得检查 MPNS 是否确实向 发送了推送通知，这将有助于确定手机是否可能已收到通知

在那个链接中，我发布了很多关于发送和接收推送通知的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:44:45.553

我做的是这个，

```
 public static void ShowToast()
    {
        try
        {
            string langKey = CacheManager.getInstance().getDataFromConfigFile(CacheManager.APP_CURRENT_LANGUAGE);
            string flag = CacheManager.getInstance().getDataFromConfigFile(CacheManager.APP_UPGRADE_STATUS);
            string catalogUpdateFlag = CacheManager.getInstance().getDataFromConfigFile(CacheManager.APP_CATALOG_UPGRADE_STATUS);

            CultureInfo ci;
            if ((null == langKey) || (langKey.Equals(Utils.LANGUAGE_EN)))
            {
                ci = new CultureInfo("en-US");
            }
            else
            {
                ci = new CultureInfo("fr-FR");
            }
            AppResources.Culture = ci;

            if (!Utils.isNullString(flag))
            {
                var toast = new ShellToast
                {
                    Title = AppResources.APP_NAME,
                    Content = getMessageStatus(flag),
                    NavigationUri = new System.Uri("/MainPage.xaml", System.UriKind.Relative)
                };

                Logger.log(TAG, ":ShowToast():MessageToUser" + AppResources.APP_NAME + getMessageStatus(flag));

                toast.Show();
            }
            if (!Utils.isNullString(catalogUpdateFlag))
            {
                var toast = new ShellToast
                {
                    Title = AppResources.APP_NAME,
                    Content = getMessageStatus(catalogUpdateFlag),
                    NavigationUri = new System.Uri("/MainPage.xaml", System.UriKind.Relative)
                };

                Logger.log(TAG, ":ShowToast():MessageToUser" + AppResources.APP_NAME + getMessageStatus(catalogUpdateFlag));

                toast.Show();
            }
        }
        catch (Exception ex)
        {

            Logger.log(TAG, "Exception in ShowToast: " + ex.Message + "\n" + ex.StackTrace);

        }
    }
    private static string getMessageStatus(string flagType)
    {
        //string flag = CacheManager.getInstance().getApplicationSettings(CacheManager.APP_UPGRADE_STATUS);
        string flag = CacheManager.getInstance().getDataFromConfigFile(CacheManager.APP_UPGRADE_STATUS);
        string catalogUpdateFlag = CacheManager.getInstance().getDataFromConfigFile(CacheManager.APP_CATALOG_UPGRADE_STATUS);

        if (flagType == flag)
        {
            if (flag.Equals(CacheManager.MAJOR_UPGRADE))
            {
                return AppResources.APP_UPGRADE_CONFIRM;
            }

            else if (flag.Equals(CacheManager.MINOR_UPGRADE))
            {
                return AppResources.APP_UPGRADE_MINOR_CONFIRM;
            }
        }
        else if (flagType == catalogUpdateFlag)
        {
            return AppResources.APP_CATALOG_CONFIRM;
        }
        return "";
    } 
```

我采用了两个不同的变量来了解它是应用程序升级还是只是目录升级（新项目将添加到现有项目中）。因此，如果有目录升级和/或应用程序升级用户将被通知。

# asp.net - 如何为启用 AJAX 的 GridView 来回执行最少的数据

> ID：12160975
> 
> 赞同：0
> 
> 时间：2012-08-28T14:01:49.417
> 
> 标签：asp.net, ajax, listview, updatepanel, asp.net-4.0

我的 ASP.Net 4.0/C# 应用程序中有一个包含 250 行和 4 列的列表视图。渲染页面大小（来自 Trace）为 650,000 字节。整个列表视图位于更新面板中。

列表视图便于对列表视图记录进行查看/添加/编辑/删除操作。

每个 POSTBACK 操作（即编辑单击、删除单击）都会导致大小为 112,000 字节的 POSTBACK 请求和约 650,000 字节的 AJAX 响应。

列表视图从页面上的声明性数据源 (SQLDataSource) 获取数据。并且列表视图在每次往返时都绑定。

我想减少每次调用中来回传输的数据，因为在连接速度较慢的情况下，这些 AJAX 调用需要 2-3 分钟才能完成。

我尝试过的 - 删除了整个列表视图上的更新面板，并在每个列表视图上添加了一个更新面板：

*   项目模板内容
*   AlternateItem 模板内容
*   编辑模板内容
*   插入模板内容

我希望使用每一行中的模板，它会减少 AJAX 响应的大小，因为只有更新面板的 HTML 会回来。不幸的是，它似乎不是那样工作的。

关于如何解决我的问题的任何意见？

提前感谢您查找此内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:06:05.877

做到这一点的最好方法是不使用 ASP.NET 用户控件，而是使用 JavaScript、JSON、HTML 和服务器端 Web 服务/http 处理程序干净利落地执行此操作

这样您就不必将大型 HTML 响应从服务器发送到客户端。您还可以控制何时需要刷新和重新绑定数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:09:33.680

[UpdatePanel](http://blog.slaven.net.au/2008/05/02/the-updatepanel-is-evil/)的问题在于您没有使用真正的 AJAX。相反，ASP.NET 使用了一些非常聪明的技巧来创建部分页面更新的错觉。在后台执行您的整个页面生命周期。这也意味着您的完整[ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)被来回发送。

如果您想要更快的体验，则不应使用 UpdatePanels。相反，使用纯 HTML 控件（最好甚至不使用服务器控件）并使用 JavaScript 和服务器端 Web 服务（例如 WebAPI 或 WCF 服务）来响应客户端请求。

这些请求和响应将仅包含一些[JSON](http://www.json.org/js.html)数据而没有标记。您的数据可以保持在最低限度。例如，如果用户删除了一行，您只需将该行的 Id 发送到您的服务，它将返回成功或失败。客户端将使用 JavaScript 或者类似[KnockoutJS](http://knockoutjs.com/)的东西来呈现结果。这将为您提供最小的开销和更好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:14:26.857

我敢打赌，整个尺寸问题都必须解决`ViewState`。原因是在每次回发时，即使它是 AJAX 回发，也会`ViewState`在**每次请求**时随身携带。在不做任何更改的情况下，您唯一可以做的就是在 IIS 端启用压缩。这至少会发送压缩的响应，而浏览器会负责解压缩它。

最好的方法是根本不使用`UpdatePanel`and`ScriptManagers`而是通过调用 WCF Web 服务使用 jQuery（或您喜欢的任何框架）发出 AJAX 请求。这不会触发整个页面生命周期，也不会`ViewState`在每个请求上发送。

# c# - 使用 GetSchemaTable() 仅检索列名

> ID：12160976
> 
> 赞同：9
> 
> 时间：2012-08-28T14:01:54.200
> 
> 标签：c#, sql

是否可以使用`GetSchemaTable()`仅检索列名？

我一直在尝试使用这种方法（仅）检索列名，是否可能。

```
 DataTable table = myReader.GetSchemaTable();

  foreach (DataRow myField in table.Rows)
  {
      foreach (DataColumn myProperty in table.Columns)
      {
          fileconnectiongrid.Rows.Add(myProperty.ColumnName + " = " 
                            + myField[myProperty].ToString());
      }
  } 
```

这段代码检索了很多不需要的表数据，我只需要一个包含列名的列表！：

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-28T14:05:39.053

您需要使用[`ExecuteReader(CommandBehavior.SchemaOnly))`](http://msdn.microsoft.com/en-us/library/y6wy5a0f%28v=vs.100%29)：

```
DataTable schema = null;
using (var con = new SqlConnection(connection))
{
    using (var schemaCommand = new SqlCommand("SELECT * FROM table", con))
    {
        con.Open();
        using (var reader = schemaCommand.ExecuteReader(CommandBehavior.SchemaOnly))
        {
            schema = reader.GetSchemaTable();
        }
    }
} 
```

[仅模式](http://msdn.microsoft.com/en-us/library/system.data.commandbehavior%28v=vs.100%29)：

> 查询仅返回列信息。使用 SchemaOnly 时，用于 SQL Server 的 .NET Framework 数据提供程序在使用 SET FMTONLY ON 执行的语句之前。

列名位于每一行的第一列。我不认为可以省略其他列信息等`ColumnOrdinal,ColumnSize,NumericPrecision`，因为您不能使用`reader.GetString`，但只能`reader.GetSchemaTable`在这种情况下使用。

但是，如果您只想要列名，那么您的循环是不正确的：

```
foreach (DataRow col in schema.Rows)
{
    Console.WriteLine("ColumnName={0}", col.Field<String>("ColumnName"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:32:08.427

如果您只想显示列名，请将您的代码更改为下面。您的原始代码不仅尝试显示列名，还尝试显示实际数据值。

```
DataTable table = myReader.GetSchemaTable();

foreach (DataRow myField in table.Rows)
{
    foreach (DataColumn myProperty in table.Columns)
    {
        fileconnectiongrid.Rows.Add(myProperty.ToString());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T12:44:31.683

这将为您提供所有列名，您可以将它们放在 a 中`string[]`并按照您的喜好使用它们。

```
foreach(var columnName in DataTable.Columns)
{
  Console.WriteLine(columnName);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T16:16:28.333

```
//Retrieve column schema into a DataTable.
schemaTable = reader.GetSchemaTable();

int index = schemaTable.Columns.IndexOf("ColumnName");
DataColumn columnName = schemaTable.Columns[index];

//For each field in the table...
foreach (DataRow myField in schemaTable.Rows)
  {
    String columnNameValue = myField[columnName].ToString();
    Console.WriteLine("ColumnName " + columnNameValue);
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-01T07:17:06.267

我使用相同的技术在我的 VB.Net 程序中添加**自定义**`MAX-STRING-LENGTH`约束。 **`TextBox`**

 **我使用 SQL`SELECT`命令获取 4 列的值

```
 SELECT code_pays
          ,nom
          ,code_pays_short
          ,default_devise
      FROM pays
      ORDER BY nom 
```

我使用`IDataReader`对象返回的结果来填充`DataGridView`.

最后，我在`Panel`包含 4 的 a 中显示每一行的字段`TextBox`。

为了避免`UPDATE`用于保存文本框中某些记录更改的 SQL 命令由于列值太长而返回错误消息，我在自定义文本框中添加了一个属性，以直接通知用户值的大小重叠。

这是我的表格

[![在此处输入图像描述](../Images/b353d1d1be23f4db923ad59e6c98a586.png)](https://i.stack.imgur.com/TtRfQ.png)

这是用于初始化`MaxStringLength`属性的 VB.Net 代码

```
 Private Sub PushColumnConstraints(dr As IDataReader)
        Dim tb As DataTable = dr.GetSchemaTable()

        Dim nColIndex As Integer = -1

        For Each col As DataColumn In tb.Columns
            If col.ColumnName = "ColumnSize" Then
                nColIndex = col.Ordinal
                Exit For
            End If
        Next

        If nColIndex < 0 Then
            oT.ThrowException("[ColumnSize] columns's index not found !")
            Exit Sub
        End If

        txtCodePays.MaxStringLength = tb.Rows(0).Item(nColIndex)
        txtPays.MaxStringLength = tb.Rows(1).Item(nColIndex)
        txtShortCodePays.MaxStringLength = tb.Rows(2).Item(nColIndex)
        txtDefaultDevise.MaxStringLength = tb.Rows(3).Item(nColIndex)
    End Sub 
```

在`For`循环中，程序搜索`ColumnSize`列值中包含的字段的索引。

MaxStringLength 属性使用以下语法分配

```
tb.Rows(%TEXT-BOX-INDEX%).Item(nColIndex) 
```

`.Rows(%TEXT-BOX-INDEX%)`用于在 SQL SELECT中识别**列的元数据！**

`.Item(nColIndex)`用于获取特定列的元数据值

Item(n) 可以返回字符串或整数，但 VB.Net 会在必要时进行隐式转换。

这行代码也可以很快写

```
tb.Rows(%TEXT-BOX-INDEX%)(nColIndex)
tb(%TEXT-BOX-INDEX%)(nColIndex) 
```

但它不可读！

注意：`MaxStringLength`是自定义属性。它不是普通文本框的一部分。

`Code Pays (3 lettres)`在上面的打印屏幕中，您可以看到程序向用户指示TextBox的长度太大。错误消息显示在`StatusBar`表单底部。

此信息在单击`SAVE`生成 SQL`UPDATE`命令的按钮之前显示。

使用该调用`PushColumnConstraints`方法的代码如下

```
 Public Sub FillPanel()

        SQL =
    <sql-select>

        SELECT code_pays
              ,nom
              ,code_pays_short
              ,default_devise
          FROM pays
          ORDER BY nom

    </sql-select>

        Dim cmd As New NpgsqlCommand(SQL, cn)
        Dim dr As NpgsqlDataReader

        Try
            dr = cmd.ExecuteReader()
        Catch ex As Exception
            ThrowException(ex)
        End Try

        Call PushColumnConstraints(dr) 
```**

# file - 文件下载的文件类型错误 - CakePHP

> ID：12160979
> 
> 赞同：0
> 
> 时间：2012-08-28T14:01:57.153
> 
> 标签：file, cakephp, download, media, mime

在我的 cakephp 网页中，我有一个用户单击的按钮，它在服务器上执行一些维护，然后向用户提供下载。文件下载是 testlogs.gzip，但是当下载选项出现在 firefox 中时，它会以 html 文档的文件类型出现。

该文件可以正常下载和提取，但我希望文件类型正确。

这是下载的媒体视图类：

```
 //$this->autoRender = false;
        $this->viewClass = 'Media';
        $params = array(
            'id' => 'systemlogs',
            'name' => 'testsystemlogs',
            'download' => true,
            'extension' => 'gzip',
       //   'mimeType' => 'zip',
            'path' => DS . 'home' . DS
        );
        $this->set($params); 
```

我试图添加，`'mimeType' => 'zip'`但没有奏效。

任何帮助都会很棒。

谢谢

更新：我测试了相同文件的上传，并使用 firebug 来确定内容类型。我关心的唯一文件类型是：application/octet-stream。所以我想我只需要在 Media 类设置中设置这种类型，但不知道该怎么做。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:04:24.900

`mimeType`必须指定为关联数组（扩展名-> 类型），在您的情况下，这将是`array('gzip' => 'application/x-gzip')`. CakePHP 将此数组与 CakeResponse 类中已知 MIME 类型的内置数组合并。

但是，CakePHP 已经知道 .gz 文件的 MIME 类型，因此如果可以选择更改文件的扩展名，则可能是一个更简单的解决方案。

# mysql - MySQL丢弃外键太慢？

> ID：12160983
> 
> 赞同：6
> 
> 时间：2012-08-28T14:02:00.110
> 
> 标签：mysql, database, performance, key, innodb

在具有 215k+（使用更改表）记录的表上删除外键似乎需要很长时间（17 分钟以上）。有没有可能以某种方式加快这个过程？SQL: ALTER TABLE `sales_flat_order_grid`DROP FOREIGN KEY `FK_SALES_FLAT_ORDER_GRID_STORE`;

这是一个需要很长时间的magento升级

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:07:25.900

Unless you are using [InnoDB Plugin](http://dev.mysql.com/doc/innodb-plugin/1.0/en/index.html) (and by default, in MySQL 5.0 and 5.1 you are not), removing an index require rebuilding the whole table.

If you can't upgrade MySQL, you should either look at online-schema-change (involving transfering all of the data to a new table without the index) or stop the site, minimize any I/O activity and wait the operation to complete.

# c# - c# 长轮询与 IIS 不一致的 SQL 依赖项

> ID：12160984
> 
> 赞同：4
> 
> 时间：2012-08-28T14:01:59.917
> 
> 标签：c#, iis-7, long-polling, sqldependency

客户的要求是，只要数据库中的特定表发生任何类型的更改，就能够在屏幕上看到刷新的数据。

我们在数据库中有一个 Job 表，其内容显示在浏览器的 GridView 中。要求是在 Jobs 表中发生任何更新、删除或插入时刷新网格数据。

我们使用 SQL 依赖和长轮询技术来实现这一点。SQL 依赖将通知 asp.net 数据库中的任何更改，长轮询将保持 gridview 异步更新。

我们在 IIS 7.0 中部署了它，并注意到不一致的行为，即 gridview 大部分时间都会刷新，比如 90-95%，但有时虽然 DB 表中的数据已更改，但刷新不会发生。

有没有人遇到过这个问题？IIS 中是否需要为此进行任何特定配置？我确实在几个地方读到了 IIS 不能为彗星编程进行扩展。上述场景发生在只有一个用户的测试环境中。任何帮助将不胜感激。提前致谢。

**编辑：**该问题似乎也发生在 ASP.Net 开发服务器中，而不是与 IIS 隔离。记录消息后，我们发现 SQLDependency 是由于 OnChange 事件未一致触发而中断的原因。

**编辑 2：**当我运行查询时，`select * from sys.dm_qn_subscriptions`我得到了同一通知订阅的几行，即重复订阅。只有 id 列不同。这可能是一个原因吗？如果是，为什么我会得到重复的订阅行？如何从 ASP.NET 终止订阅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:10:43.873

我相信你需要在你的项目中实现**COMET-or-Reverse-AJAX**
，这有一个很好的例子

[http://www.codeproject.com/Articles/34562/COMET-or-Reverse-AJAX-based-Grid-Control-for-ASP-N](http://www.codeproject.com/Articles/34562/COMET-or-Reverse-AJAX-based-Grid-Control-for-ASP-N)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:31:44.967

您需要做的第一件事是检查 dbo.AspNet_SqlCacheTablesForChangeNotification 表。那里的每个表都有缓存失效计数器。如果数字没问题（100% 增量没有损失），请考虑检查 UI 层。

# c++ - 使用 Cygwin/GCC 构建 Boost 库时的名称冲突

> ID：12160985
> 
> 赞同：7
> 
> 时间：2012-08-28T14:02:00.970
> 
> 标签：c++, gcc, boost, cygwin

我正在将 C++ 应用程序从 VC++ 迁移到 GCC（使用 Cygwin 在 Windows 上运行）。我现在的第一个问题是我无法构建 Boost 库。

例如用 VC++ 构建 Boost.Exception 我会写：

```
b2 --with-exception variant=debug,release link=static runtime-link=static 
```

我会在我的 stage\lib 目录中获得文件 libboost_exception-vc100-mt-s-1_51.lib 和 libboost_exception-vc100-mt-sgd-1_51.lib 。

但是，当我从 Cygwin 终端使用 GCC 尝试相同的操作时，我得到了错误。我发现像这样构建仅调试（或仅发布）有效：

```
./b2 --with-exception variant=debug link=static runtime-link=static 
```

它为两种情况（调试和发布）在我的 stage\lib 目录中创建 libboost_exception.a。所以似乎存在名称冲突（调试和发布变体的名称相同）。这是增强构建系统中的错误还是我做错了什么？

* * *

**编辑：**

的输出

```
./b2 --with-exception variant=debug,release link=static runtime-link=static 
```

是：

> 构建 Boost C++ 库。
> 
> /cygdrive/c/boost_1_51_0/tools/build/v2/build/virtual-target.jam:1079：来自模块 virtual-target 的 virtual-target.register-actual-name
> 
> 错误：实际目标的名称重复：libboost_exception.a
> 
> 错误：以前的虚拟目标 { common%common.copy-libboost_exception.a.STATIC_LIB { gcc%gcc.archive-libboost_exception.a.STATIC_LIB { gcc%gcc.compile.c++-clone_current_exception_non_intrusive.o.OBJ { clone_current_exception_non_intrusive.cpp.CPP } } } }
> 
> 错误：从 ./stage-proper 创建错误：另一个虚拟目标 { common%common.copy-libboost_exception.a.STATIC_LIB { gcc%gcc.archive-libboost_exception.a.STATIC_LIB { gcc%gcc.compile.c++-clone_current_exception_non_intrusive.o .OBJ { clone_current_exception_non_intrusive.cpp.CPP } } } }
> 
> 错误：从 ./stage-proper 创建
> 
> 错误：添加属性：关闭 NDEBUG 全速关闭发布
> 
> 错误：已删除属性：在调试时打开关闭关闭
> 
> /cygdrive/c/boost_1_51_0/tools/build/v2/build/virtual-target.jam:490：在模块对象（文件目标）@1014 中实现无扫描
> 
> /cygdrive/c/boost_1_51_0/tools/build/v2/build/virtual-target.jam:135: in object(file-target)@1014.actualize from module object(file-target)@1014
> 
> /cygdrive/c/boost_1_51_0/tools/build/v2/build-system.jam:749：从模块构建系统加载
> 
> /cygdrive/c/boost_1_51_0/tools/build/v2/kernel/modules.jam:283：从模块模块导入
> 
> /cygdrive/c/boost_1_51_0/tools/build/v2/kernel/bootstrap.jam:142：在模块的 boost-build 中
> 
> /cygdrive/c/boost_1_51_0/boost-build.jam:17：在模块范围内

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T08:01:40.403

虽然错误信息并不完美，但这是操作员错误。默认情况下，构建使用库的系统命名——典型的 Unix 系统上的命名。所以，是的，如果你尝试构建调试和发布变体，你会遇到命名冲突。

如果你添加`--layout=tagged`或`--layout=versioned`到你的命令行，事情应该会奏效。您可以从顶层目录运行“./b2 --help”以获得对这些含义的一些解释。

# c++ - c ++重载函数默认参数

> ID：12160993
> 
> 赞同：1
> 
> 时间：2012-08-28T14:02:33.410
> 
> 标签：c++, linker, overloading

我有一个广泛使用的 c++ 库，其中包含以下方法：

`foo();`

我想重载此函数以具有默认参数，例如：

`foo(bool verbose=false);`

此更改是否会迫使我重新编译使用此函数的每个代码？`foo()`由于 no-args-signature 没有改变，没有参数的调用不能继续工作吗？

顺便说一句 - 我正在使用 gcc

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:03:24.813

> 此更改是否会迫使我重新编译使用此函数的每个代码？

是的，编译会失败，因为会有歧义。

你可以做的是像这样重载函数：

```
foo(bool verbose); 
```

并将这种情况`foo()`视为参数为假。

这不需要重新编译。你只有两个功能：

```
foo() { foo(false); } //possibly
foo(bool verbose); 
```

而不是一个带有默认参数的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:14:29.047

如果你的意思是你想要两者都有，那么你不能，因为没有办法知道你的意思。

如果您的意思是要替换`foo()`为，`foo(bool verbose=false)`那么它将是重新编译，因为调用代码并不是真正`foo()`的调用，而是`foo(false)`使用隐藏它的语法糖进行调用。

你可以有：

```
someType foo(bool verbose)
{
  //real work here.
}
someType foo()
{
  return foo(false);
} 
```

或者如果无效：

```
void foo(bool verbose)
{
  //real work here.
}
void foo()
{
  foo(false);
} 
```

虽然如果你的前任`foo()`完全在一个标题中并且可以内联，那是另一回事。

# javascript - 在 JQuery 或 Javascript 中比较两个 JSON 数组

> ID：12160998
> 
> 赞同：2
> 
> 时间：2012-08-28T14:02:53.407
> 
> 标签：javascript, jquery

使用 jQuery - 我想比较 2 个 JSON 数组：

**origArray**来自数据库/C# API：

```
var origArray = [   {
        "TypeName": "Single",
        "TypeID": "3121",
        "TypeCount": "2"
        },
    {
        "TypeName": "Double",
        "TypeID": "4056",
        "TypeCount": "2"
        },
    {
        "TypeName": "Family",
        "TypeID": "5654",
        "TypeCount": "4"
        }
]; 
```

**userArray**是从用户输入中收集的：

```
var userArray = [   {
        "TypeID": "3121",
        "TypeCount": "2"
        },
    {
        "TypeID": "4056",
        "TypeCount": "3"
        },
    {
        "TypeID": "3121",
        "TypeCount": "3"
        }
]; 
```

我想做的是循环遍历**userArray和****TypeID**的“组” ，并对**TypeCount 求和**。

所以在上面的例子中：

```
TypeID: 3121
TypeCount: 5 (ie. 2 + 3)

TypeID: 4056
TypeCount: 3 
```

这意味着 TypeID 3121 和 4056 之间会有 3 倍的差异。

有什么方法可以从 jQuery 或本机 Javascript 中获取这些信息（可以跨浏览器工作）？

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:14:42.097

定义一个函数以按每个数组`TypeID`和 sum分组`TypeCount`：

```
function groupByTypeID (arr) {
    var groupBy = {};
    $.each(arr, function () { 
      var currentCount = groupBy[this.TypeID] || 0; 
      groupBy[this.TypeID] = currentCount + parseInt(this.TypeCount);
    });
    return groupBy;
} 
```

然后，对两个数组进行分组，并获取它们的差异：

```
var userArrayGroups = groupByTypeID(userArray);
var origArrayGroups = groupByTypeID(origArray);

var diff = {};
for (var prop in userArrayGroups) {
  diff[prop] = userArrayGroups[prop] - origArrayGroups[prop];
} 
```

`diff`然后将持有以下内容：

```
{
  3121: 3
  4056: 1
} 
```

**[演示](http://jsfiddle.net/T4GDK/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:15:12.640

如果你熟悉 C# 这个 js 库 - [linqjs](http://linqjs.codeplex.com/)。它包含所有 .NET 4.0 LINQ 方法和许多额外方法的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:23:17.777

你可以用下划线做到这一点：

```
var result = _.chain(userArray)
    .groupBy(function(value) {
      // group by the TypeId
      return value.TypeID;
    })
    .map(function(value) {
      // iterate over every group
      var addition = _.chain(value)
        .pluck("TypeCount") // create an array with TypeCount values
        .reduce(function(memo, num) {
          return Number(memo) + Number(num); // add all the TypeCount values
        })
        .value();

      return {
        "TypeID": value[0].TypeID, // TypeID
        "TypeCount": addition // total addition for this TypeID
      };
    })
    .value(); 
```

这里的工作示例：http: [//livecoding.io/3498441](http://livecoding.io/3498441)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T14:54:04.247

我会试一试...

```
var mergeArray = []
var index;

for (var i = userArray.length - 1; i >= 0; i--) {
    index = findByTypeID(mergeArray, userArray[i].TypeID);
    if(!index){
        mergeArray[index].TypeCount += parseInt(userArray[i].TypeCount)
    } else{
        mergeArray.push({
            "TypeID": userArray[i].TypeID,
            "TypeCount": parseInt(userArray[i].TypeCount)
        });
   }
};

function findByTypeID(arr, id){
    for (var i = arr.length - 1; i >= 0; i--) {  
        if(arr[i].TypeID == id)
             return i;
    };
    return -1;
} 
```

这为您提供了您想要的数据结构输出`mergeArray`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-28T14:18:09.620

```
result = {};
for (var i in userArray) {
    var elem = userArray[i]
    if (!result[elem.TypeID])
      result[elem.TypeID] = elem.TypeCount;
    else
      result[elem.TypeID] += elem.TypeCount;
}

return result; 
```