# StackOverflow 问答 12046000-12046999

# php - 在 Smarty 中包含一个数组键

> ID：12046008
> 
> 赞同：0
> 
> 时间：2012-08-20T22:17:23.753
> 
> 标签：php, smarty

来自 Smarty 文档：

```
{* include a multi $variable template - eg amber/links.view.tpl *}
{include file="$style_dir/$module.$view.tpl"} 
```

但是我想要一个数组键的值来包含我之前在 php 中创建的 smarty。访问数组键的值很简单，就像这样：`$array.key`在 Smarty 中。但是当我想在包含字符串中访问它时呢？

```
{include file="$array.key"} is equals to "$array".key 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:24:21.790

行。我可以处理这个：

```
{include "modules/{$array.key}.tpl" style="{$array.key}"} 
```

# sql - 通过 Select 语句更新 SQL Server

> ID：12046010
> 
> 赞同：0
> 
> 时间：2012-08-20T22:17:36.617
> 
> 标签：sql, sql-server, sql-server-2008, sql-update

我有以下 sql 语句，我想更新从 select 语句返回的行上的字段。我的选择可以做到这一点吗？我尝试过的事情并没有给我想要的结果：

```
SELECT 
Flows_Flows.FlowID, 
Flows_Flows.Active, 
Flows_Flows.BeatID,
Flows_Flows.FlowTitle, 
Flows_Flows.FlowFileName, 
Flows_Flows.FlowFilePath, 
Flows_Users.UserName, 
Flows_Users.DisplayName, 
Flows_Users.ImageName,
Flows_Flows.Created, 
SUM(CASE WHEN [Like] = 1 THEN 1 ELSE 0 END) AS Likes,  
SUM(CASE WHEN [Dislike] = 1 THEN 1 ELSE 0 END) AS Dislikes 
FROM Flows_Flows 
INNER JOIN Flows_Users ON Flows_Users.UserID = Flows_Flows.UserID 
LEFT JOIN Flows_Flows_Likes_Dislikes ON          
Flows_Flows.FlowID=Flows_Flows_Likes_Dislikes.FlowID 
WHERE Flows_Flows.Active = '1' AND Flows_Flows.Created < DATEADD(day, -60, GETDATE())
Group By Flows_Flows.FlowID, Flows_Flows.Active, Flows_Flows.BeatID, 
Flows_Flows.FlowTitle, Flows_Flows.FlowFileName,  Flows_Flows.FlowFilePath,        
Flows_Users.UserName, Flows_Users.DisplayName, Flows_Users.ImageName,     
Flows_Flows.Created 
Having SUM(CASE WHEN [Like] = 1 THEN 1 ELSE 0 END) = '0' AND SUM(CASE WHEN [Dislike] = 1              
THEN 1 ELSE 0 END) >= '0' 
```

此 select 语句完全返回我需要的内容，但我想将 Active 字段从 1 更改为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:26:57.017

是的 - 一般结构可能是这样的：（注意你没有声明你的主键）

```
UPDATE mytable
set myCol = 1
where myPrimaryKey in (
select myPrimaryKey from mytable where interesting bits happen here ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:47:08.717

因为你没有更清楚地说明你想要达到什么结果，所以我会用我自己的假设来提供答案。

**假设**

您有一个 select 语句可以为您提供东西，并且可以按需要工作。你想要它做的是让它返回结果并即时更新那些选定的行 - 基本上就像说“找到 X，告诉我关于 X 并使它成为 Y”。

**安瑟**

如果我的假设是正确的，不幸的是，我认为你没有任何办法可以做到这一点。选择不会改变表，它只能获取信息。同样，更新不会提供比更新的行数更多的详细信息。

但是不要放弃，根据你想要达到的结果，你还有其他选择。

**备择方案**

1.  如果您只想更新您选择的行，您可以简单地编写一个 UPDATE 语句来执行此操作，@Randy 提供了一个很好的示例来说明如何编写。

2.  如果您想减少对服务器的调用，这意味着您只想对服务器进行一次调用并获得结果，以及更新行，您可以编写存储过程来做到这一点。

存储过程就像您用编程语言编写的函数。它本质上定义了一组 sql 操作并给它们命名。每次调用该存储过程时，都会使用提供的输入（如果有）执行一组操作。

因此，如果您想了解有关存储过程的更多信息，可以查看： [http ://www.mysqltutorial.org/introduction-to-sql-stored-procedures.aspx](http://www.mysqltutorial.org/introduction-to-sql-stored-procedures.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:53:32.177

如果我理解正确，您正在寻找一种语法，以便能够将 Active 的值选择为 0（如果它是 1）。类似的语法是

```
SELECT 
 Active= CASE WHEN Active=1 THEN 0 ELSE Active END
FROM
 <Tables>
WHERE
 <JOIN Conditions> 
```

# java - 难以确定结束游戏

> ID：12046024
> 
> 赞同：-5
> 
> 时间：2012-08-20T22:19:14.737
> 
> 标签：java, android

我正在尝试检查玩家是否无法再移动，但我似乎无法弄清楚如何检查它。假设我有 5 个或更少的图块，每个图块的值在 1 到 3 之间。我想遍历瓷砖并检查是否有任何可能的组合加起来为 10。它不像检查总数那么简单，因为可能有 3 个瓷砖上有 3 个，一个有 2。我已经花了几个小时试图弄清楚这一点....

关于如何检查所有可能的组合的任何想法？我只需要看看一种组合是否可行。一旦找到一个，我就会打破循环以减少检查次数。

编辑：如果它有帮助，如果你下载它，你可以看看我在说什么。它的数字： 21 在 android 上。

游戏的目的是将牌添加到 21。因此，当用户减少到几张牌时，有时即使所有牌的总和超过 21，也无法获得 21 的组合，因为数字加起来并不完全一致21\. 这造成了一个问题，因为我无法检查并告诉用户他们丢失了。

在检查它时，我什至不知道从哪里开始。我可以多次循环遍历所有的瓷砖，但事情是一个组合，可能是板上有很多瓷砖。所以我必须检查 3 的组合，然后是 4 ，然后是 5 等等，直到达到剩余的瓷砖数量。我很难准确地解释这一点

### 更正编辑以供将来参考：

对于我最初的问题如此模棱两可，我深表歉意。碰巧是我在这里问过的第一个问题......这是对问题和解决方案的更好描述。我决定保留以前的文字作为记录。

游戏有许多编号的瓷砖，我必须将它们添加到 21 才能删除。你不能超过 21。它必须是准确的。

我想要检查的是是否还有可以用来精确加起来 21 的瓷砖组合。基本的总和检查不起作用，因为您可能有 5 个 5 号牌并且超过 21 个，但无法再消除。

## 解决方案

正如@mellamokb 回答需要使用子集和递归一样。基本上，您循环遍历图块，并在每个图块上调用相同的函数两次。一个调用添加当前切片，另一个调用继续下一次迭代而不添加当前切片。如果有任何返回 true，则该函数为 true。基本上是二叉树。

代码

```
boolean validate(tiles, index, subtotal, total){
    if index >= tiles.length return false;
    if subtotal == total return true;
    return validate(tiles, index + 1, subtotal + tiles[index].number, total) || 
       validate(tiles, index + 1, subtotal, total);
} 
```

调用它

```
validate(tiles, 0, 0, 21) 
```

差不多就行了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:23:27.000

这听起来像是[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)的变体。最简单的算法是 O(2^n)，例如，通过使用位标志迭代每个可能的子集组合。

```
for i = 0 to 2^n - 1
    set subtotal = 0
    for each bit in i
        if bit i is set, add ith element to subtotal
    check subtotal against desired total (i.e., 10) 
```

或者，或者使用递归：

```
validate(set, index, subtotal, total)
    if index >= set.length return false;
    if subtotal == total return true;
    return validate(set, index + 1, subtotal + set[index], total) || 
           validate(set, index + 1, subtotal, total); 
```

用法：

```
validate(set, 0, 0, 10); 
```

# ipad - ipad > 横向 > ui 搜索栏 > ScopeBar 消失

> ID：12046025
> 
> 赞同：1
> 
> 时间：2012-08-20T22:19:16.773
> 
> 标签：ipad, uisearchbar

任何人都可以帮助解决这个问题？在 ipad 中横向打开 ui 搜索栏和搜索选项正在消失。

谢谢

# linux - 为什么此命令在最后一行添加 \n

> ID：12046033
> 
> 赞同：0
> 
> 时间：2012-08-20T22:19:40.947
> 
> 标签：linux

我正在使用此命令对文件中的重复行进行排序和删除。

```
sort file2.txt | uniq > file2_uniq.txt 
```

执行命令后，我发现最后一行有这个值：`\n`这给我带来了问题。我能做些什么来避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:39:42.160

你也可以让`sort`输出唯一化，省略第一行可以避免空行：

```
sort -u file2.txt | tail -n +2 
```

### 编辑

如果您还想删除所有空行，我建议您使用：

```
grep -v '^$' | sort -u file2.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:24:44.513

通过使用以下命令删除最后一行来解决问题：

```
sed '$d' infile > outfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:22:07.997

只需过滤掉您不想要的内容：

```
sort file2.txt | egrep -v "^$" | uniq > file2_uniq.txt 
```

# asp.net - 如果已重命名，如何识别已上传的文件

> ID：12046034
> 
> 赞同：1
> 
> 时间：2012-08-20T22:19:42.833
> 
> 标签：asp.net

有没有办法知道用户是否正在上传之前已经上传过的文件。

这没有比较文件名。这是在用户重命名文件的情况下。

**设想**

*   用户通过他们的网络浏览器上传文件。
*   用户在本地重命名文件。用户上传文件。
*   Webserver 检测到重命名的文件并将其保存为重命名的文件名，同时删除旧文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:41:06.083

您可以对首次提交的文件进行校验和，将此校验和存储在具有文件名的数据表中。当用户再次提交重命名的文件时，您再次计算校验和并在数据库中搜索校验和是否已经存在。

该解决方案的弱点在于校验和的唯一性。
通过这个例子，我认为你很有可能获得一个独特的校验和
（期望被否认）

```
public string GetChecksum(string filePath, HashAlgorithm algorithm)
{
    using (var stream = new BufferedStream(File.OpenRead(filePath), 100000))
    {
        HashAlgorithm SHA512 = new SHA512Managed();
        byte[] hash = SHA512.ComputeHash(stream);
        return BitConverter.ToString(hash).Replace("-", String.Empty);
    }
} 
```

# javascript - jQuery - 在当前位置之后选择元素

> ID：12046036
> 
> 赞同：0
> 
> 时间：2012-08-20T22:20:04.417
> 
> 标签：javascript, jquery

我想要做的是选择我在页面上的下一个元素。我想这样做来创建一个“查看下一篇文章”功能。因此，如果我已经过了第 2 篇文章的开头，那么我希望该函数将我带到第 3 篇文章。传统的 jQuery 会询问我使用哪个孩子的父母，默认情况下使用第一个实例，但我想选择屏幕顶部下方的下一篇文章。

到目前为止，我可以使用以下方法获取页面的当前位置：

```
var curPos = $('html').offset();
var Posi = String(curPos.top).replace(/-/g, ""); 
```

但我不确定如何过滤函数以仅选择该位置以下的元素。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:35:51.907

这将是扩展选择器的好时机：

```
 $.extend($.expr[':'], {
      pos: function(a,i,m){
          if(!m[3]){return false;}
          // whatever logic you need to determine 
          // if element is below document offset
          // goes here, simply make this function return true or false
          return $(a).offset().top >= parseFloat(m[3]);
      }
 }); 
```

现在你应该能够做这样的事情：

```
 $('.className:pos('+curPos+')').foo(); 
```

* * *

或者你可以使用`.filter`which 会做类似的事情

```
 $('.className').filter(function(){
      // whatever logic you need to determine 
      // if element is below document offset
      // goes here, simply make this function return true or false
      return $(this).offset().top >= curPos;
 }).foo(); 
```

不同之处在于过滤器只发生一次，而扩展选择器是完全可重用的。

# web-services - 可以将 nillable 字段添加到 Web 服务响应会破坏向后兼容性吗？

> ID：12046046
> 
> 赞同：4
> 
> 时间：2012-08-20T22:21:58.380
> 
> 标签：web-services, backwards-compatibility, null

我可以以某种方式实现我的 .Net Web 服务 API 方法，以便如果用户使用较新的 wsdl，它将新字段设置为一个值，如果用户使用较旧的 wsdl，则将字段设置为 nil。

即使这样，响应中的新字段是否存在使用旧 wsdl 破坏某些现有客户端应用程序的风险。我知道如果客户端应用程序在响应中获得一个设置为值的新字段（Web 服务不会这样做），它可能会中断，但如果它在响应中获得一个为零的新字段，它会中断吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:16:53.343

是的，它可以破坏客户。

大多数 Web 服务或客户端会在处理请求或响应之前对其进行验证。这主要是通过 XML 模式完成的，新字段不在旧客户端的模式中；

你会得到像`The element X in namespace Y has invalid child element Z`.

`minOccurs="0"`如果在新模式中声明了字段，这不是问题。这意味着一个可选元素，如果值为 null，则根本不会出现在 XML 实例中。

可空元素，即使它们的值为 null，也将始终包含在 XML 实例中，但标记为`nil="true"`表示它们确实为 null。

以下是一些额外信息：[Web 服务提示：XML Schema 中 null 的表示](http://www.ibm.com/developerworks/xml/library/ws-tip-null/index.html)。

# c-preprocessor - 预处理前的 C/C++ 文件

> ID：12046047
> 
> 赞同：1
> 
> 时间：2012-08-20T22:22:01.927
> 
> 标签：c-preprocessor, preprocessor-directive

是否可以在预处理之前查看 ac/c++ 文件？或者更确切地说，只是经过半心半意的预处理？基本上有一个

```
#define <commonly_used_word> 0 
```

在第三方库标题中，我想弄清楚它在哪里。所以基本上，我只希望编译器包含所有头文件，而不是预处理器本身。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:26:07.303

您的原始源文件*是*预处理之前的文件。

听起来您希望`#include`处理您的指令，但您希望保持宏不被替换。这两个动作都由预处理器执行。

在一般情况下这是不可能的，因为在 C 和 C++ 中使用宏作为包含文件名是合法的，如

```
#define INCLUDE_FILE "stdio.h"
#include INCLUDE_FILE 
```

实现您想要的需要专门设计用于满足您的要求的预处理器。一方面，我不知道任何这样的预处理器实现。

如果您想查找特定宏的定义位置，您可以尝试以下技巧：在包含任何标头*之前*使用相同的名称定义您自己的宏，然后开始编译。编译器（预处理器）在遇到同一个宏的库定义时应该抱怨宏重新定义，并向您指出它的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:34:41.580

有特定于 GCC 的`-M`选项`-MM`：

> 要列出包含文件的绝对路径，请使用 -M
> 
> 不是输出预处理的结果，而是输出一个适合make描述主源文件依赖关系的规则。预处理器输出一个 make 规则，其中包含该源文件的目标文件名、冒号和所有包含文件的名称，包括来自 -include 或 -imacros 命令行选项的文件。gcc -M test.c
> 
> 如果您不希望系统包含 like `#include <stdio.h>`，请使用 -MM Like -M 但不要提及在系统头目录中找到的头文件，也不要提及从此类头文件中直接或间接包含的头文件。gcc -MM test.c

这可能会大大缩小搜索范围。

[http://www.math-linux.com/spip.php?article263](http://www.math-linux.com/spip.php?article263)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:39:29.423

您可以告诉`cpp`使用`-M`选项生成包含文件的列表：

```
$ cpp -M a.c
a.o: a.c /usr/include/stdio.h /usr/include/features.h \
 /usr/include/sys/cdefs.h /usr/include/bits/wordsize.h \
 /usr/include/gnu/stubs.h /usr/include/gnu/stubs-64.h \
 /usr/lib/gcc/x86_64-pc-linux-gnu/4.7.1/include/stddef.h \
 /usr/include/bits/types.h /usr/include/bits/typesizes.h \
 /usr/include/libio.h /usr/include/_G_config.h /usr/include/wchar.h \
 /usr/lib/gcc/x86_64-pc-linux-gnu/4.7.1/include/stdarg.h \
 /usr/include/bits/stdio_lim.h /usr/include/bits/sys_errlist.h 
```

它为您提供了 Makefile 规则格式，但您可以忽略它并与任何其他命令一起使用。

例如，您可以 grep 符号（这里我忽略 stderr 因为`\`而`a.o:`不是真正的文件名 - 懒惰）：

```
$ grep '#\s*define\s*BUFSIZ' $(cpp -M a.c) 2>/dev/null
/usr/include/stdio.h:# define BUFSIZ _IO_BUFSIZ 
```

您还可以使用类似的程序`ctags`为您找到符号：

```
$ ctags $(cpp -M a.c)
...
$ grep BUFSIZ tags 
BUFSIZ  /usr/include/stdio.h    128;"   d 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T22:41:41.280

如果您知道哪些头文件包含您要查找的定义，例如按照建议使用 find 和 grep，您可以通过让 gcc 打印头包含树来查明哪个头文件正在影响当前源文件。如 gcc 的[文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Preprocessor-Options.html#Preprocessor-Options)中所述，您可以通过使用 -H 选项来实现此目的，可能与 -MG 结合使用以消除正常处理。

# cuda - 当第二个内核首先完成时，cudaEventRecord 和重叠操作的位置

> ID：12046050
> 
> 赞同：0
> 
> 时间：2012-08-20T22:22:47.810
> 
> 标签：cuda, gpu, nvidia

我有两个任务。它们都执行复制到设备 (D)，并运行内核 (R) 操作。任务有不同的内核运行时。R1 的完成时间是 R2 的 5 倍（R1 = ~17 ms，R2 = ~3.5 ms）。任务的内核执行等待操作，我允许这些内核同时运行。每个复制操作需要 7 毫秒。

我有 GeForce GT 555M、CUDA 4.1 和 Fedora 16。

我使用 cudaEventRecord 记录每个任务的 D 和 R 操作的开始和停止时间。我为每个任务使用两个流。我使用 cudaStreamWaitEvents 在这两个任务流之间进行同步。一个流用于任务的D op，另一个用于任务的R op。我的目标是将 D2 与 R1 重叠。我测量了 task1 和 task2 的总体时间，以确定是否实现了这种重叠。

我有两种情况。在 Scenerio1 中，“start R1”放置在内核之前，“start R2”放置在内核之间。在 Scenerio2 中，“start R1”和“start R2”都放在内核之前。

对于下面给出的伪代码，Scenario1 和 Scenerio2 的行为并不相同：尽管 Scenerio2 未能将 D2 与 R1 重叠，但 Scenerio1 成功了！所以我的问题是：**为了将 D2 与 R1 重叠，当 R2 比 R1 短时，为什么我们必须在内核之间（而不是之前）放置“开始 R2”？**（请注意，我还测试了 R1 比 R2 短的情况。在这种情况下，将“start R2”放在内核之前或内核之间并没有什么不同，在这两种情况下，我们都可以将 D2 与 R1 重叠。 D2完成后，我们也可以同时运行R1和R2。）

这是场景 1 和 2 的伪代码（我对 task1 使用 stream1 和 stream3，对 task2 使用 stream2 和 stream4）：

**场景 1（成功）：**

```
start overall

start D1 on stream1
D1 on stream1
stop D1 on stream1

start D2 on stream2
D2 on stream2
stop D2 on stream2

start R1 on stream3

R1 on stream3 //longer

start R2 on stream4 // start R2 is in between kernels

R2 on stream4 //shorter

stop R2 on stream4
stop R1 on stream3

stop overall 
```

**场景2（失败）：**

```
start overall

start D1 on stream1
D1 on stream1
stop D1 on stream1

start D2 on stream2
D2 on stream2
stop D2 on stream2

start R1 on stream3

start R2 on stream4 // start R2 is before kernels

R1 on stream3 //longer

R2 on stream4 //shorter

stop R2 on stream4
stop R1 on stream3

stop overall 
```

场景的总体时间安排如下：

场景 1 = 24.109312

方案 2 = 31.194496

这些场景的预期总运行时间为 D1 + R1 = 7 + 17 = 24（我们可以将 D2 与 R1 重叠，同时同时运行 R1 和 R2）。尽管 Scenario1 成功实现了此运行时，但 Scenerio2 却未能做到。这是因为 Scenario2 不能将 D2 与 R1 重叠。（D2 需要 7 毫秒，这就是 Scenario2 运行时间为 24 + 7 = 31 的原因）。

我还附上了下面的 CUDA 代码：

```
#include <stdio.h>
#include <cuda_runtime.h>
#include <sys/time.h>

__global__ void wait_k(long time_clocks)
{ 
    long start_clock = clock();

    long clock_offset = 0;

    while( clock_offset < time_clocks) {
        clock_offset = clock() - start_clock;
    }
}

void shorterR2_D2_R1_Overlap()
{
float *h_A;
float *d_A, *d_C;
float *h_A2;
float *d_A2, *d_C2;

int N = 10000000;
size_t size = N * sizeof(float); 

cudaMallocHost((void**) &h_A, size);
cudaMallocHost((void**) &h_A2, size);

// Allocate vector in device memory
cudaMalloc((void**)&d_A, size);
cudaMalloc((void**)&d_C, size);
cudaMalloc((void**)&d_A2, size);
cudaMalloc((void**)&d_C2, size);

for (int i = 0; i<N; ++i)
{
h_A[i] = 1;
h_A2[i] = 5;
}

cudaStream_t csStream1, csStream2, csStream3, csStream4;

cudaStreamCreate(&csStream1);
cudaStreamCreate(&csStream2);
cudaStreamCreate(&csStream3);
cudaStreamCreate(&csStream4);

//allocate vars for dummy copy 
float* h_pfDummy;
float* d_pfDummy;
size_t iMemSz = 10 * sizeof(float);
cudaMallocHost((void**) &h_pfDummy, iMemSz);
cudaMalloc((void**)&d_pfDummy, iMemSz);

cudaMemcpyAsync(d_pfDummy, h_pfDummy, iMemSz, cudaMemcpyHostToDevice, csStream1);
cudaMemcpyAsync(d_pfDummy, h_pfDummy, iMemSz, cudaMemcpyHostToDevice, csStream2);

//delete vars of dummy copy 
cudaFree(d_pfDummy);
cudaFreeHost(h_pfDummy);

long time_clocks = 20000000; 
long div = 5;

cudaEvent_t ceEvStart, ceEvStop; 
cudaEventCreate( &ceEvStart );
cudaEventCreate( &ceEvStop );

//diff stream time events
cudaEvent_t ceEvStartCpyDev1, ceEvStopCpyDev1, ceEvStartKer1, ceEvStopKer1;
cudaEventCreate( &ceEvStartCpyDev1 );
cudaEventCreate( &ceEvStopCpyDev1 );
cudaEventCreate( &ceEvStartKer1 );
cudaEventCreate( &ceEvStopKer1 );
cudaEvent_t ceEvStartCpyDev2, ceEvStopCpyDev2, ceEvStartKer2, ceEvStopKer2; 
cudaEventCreate( &ceEvStartCpyDev2 );
cudaEventCreate( &ceEvStopCpyDev2 );
cudaEventCreate( &ceEvStartKer2 );
cudaEventCreate( &ceEvStopKer2 );

//Scenario1: put start R1 before kernels and start R2 between kernels
cudaDeviceSynchronize();

cudaEventRecord(ceEvStart, 0);

cudaEventRecord(ceEvStartCpyDev1, csStream1);
cudaMemcpyAsync(d_A, h_A, size, cudaMemcpyHostToDevice, csStream1);
cudaEventRecord(ceEvStopCpyDev1, csStream1);

cudaEventRecord(ceEvStartCpyDev2, csStream2);
cudaMemcpyAsync(d_A2, h_A2, size, cudaMemcpyHostToDevice, csStream2);
cudaEventRecord(ceEvStopCpyDev2, csStream2);

//insert runker1 start event before concurrent kernels
cudaStreamWaitEvent(csStream3, ceEvStopCpyDev1, 0);
cudaEventRecord(ceEvStartKer1, csStream3); 

wait_k<<<1,1,0,csStream3>>>(time_clocks);

//insert runker2 start event between concurrent kernels
cudaStreamWaitEvent(csStream4, ceEvStopCpyDev2, 0);
cudaEventRecord(ceEvStartKer2, csStream4); 

wait_k<<<1,1,0,csStream4>>>(time_clocks/div);

cudaEventRecord(ceEvStopKer2, csStream4);
cudaEventRecord(ceEvStopKer1, csStream3);

cudaEventRecord(ceEvStop, 0);
cudaDeviceSynchronize();

float fTim1;
cudaEventElapsedTime( &fTim1, ceEvStart, ceEvStop);
printf("Scenario1 overall runtime = %10f\n", fTim1);

//Scenario2: put start R1 before kernels and start R2 between kernels
cudaDeviceSynchronize();

cudaEventRecord(ceEvStart, 0);

cudaEventRecord(ceEvStartCpyDev1, csStream1);
cudaMemcpyAsync(d_A, h_A, size, cudaMemcpyHostToDevice, csStream1);
cudaEventRecord(ceEvStopCpyDev1, csStream1);

cudaEventRecord(ceEvStartCpyDev2, csStream2);
cudaMemcpyAsync(d_A2, h_A2, size, cudaMemcpyHostToDevice, csStream2);
cudaEventRecord(ceEvStopCpyDev2, csStream2);

//insert runker1 start event before concurrent kernels
cudaStreamWaitEvent(csStream3, ceEvStopCpyDev1, 0);
cudaEventRecord(ceEvStartKer1, csStream3); 

//insert runker2 start event before concurrent kernels
cudaStreamWaitEvent(csStream4, ceEvStopCpyDev2, 0);
cudaEventRecord(ceEvStartKer2, csStream4); 

wait_k<<<1,1,0,csStream3>>>(time_clocks);

wait_k<<<1,1,0,csStream4>>>(time_clocks/div);

cudaEventRecord(ceEvStopKer2, csStream4);
cudaEventRecord(ceEvStopKer1, csStream3);

cudaEventRecord(ceEvStop, 0);
cudaDeviceSynchronize();

float fTim2;
cudaEventElapsedTime( &fTim2, ceEvStart, ceEvStop);
printf("Scenario2 overall runtime = %10f\n", fTim2);

}

int main()
{
 shorterR2_D2_R1_Overlap();
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T04:34:21.830

Compute capabilities 1.0 - 3.0 have a single push buffer to submit work to the GPU. Work is submitted in the order of the CUDA API calls. In scenario 2 the push buffer cannot execute commands beyond *cudaStreamWaitEvent(csStream4, ceEvStopCpyDev2, 0);* until ceEvStopCpyDev2 completes.

The presentation **CUDA C/C++ Streams and Concurrency**( [pdf](http://developer.download.nvidia.com/CUDA/training/StreamsAndConcurrencyWebinar.pdf) | [video](http://developer.download.nvidia.com/CUDA/training/StreamsAndConcurrency_Jan_2012.mp4) ) contains more information on this topic. The slide *Stream Scheduling* contains more details on the issue that you have observed.

# vim - 无法更改 SpecialKey 的颜色

> ID：12046051
> 
> 赞同：3
> 
> 时间：2012-08-20T22:23:14.260
> 
> 标签：vim

![](../Images/4a5d167e3f28b480cdae4c4c4cc9e1ad.png)

我有：

```
set list
set listchars=tab:\$\ 
hi SpecialKey ctermfg=161 guifg=161 
```

但这就是我所看到的。我也`161`为颜色做了，所以如果颜色正确就会很明显（161就像粉红色/紫色）。

我正在使用 iTerm2 并`xterm-256color`已启用。我在 OS X Lion 上使用 vim 7.3。另外，更奇怪的是，在我更换电脑之前，这是否可以正常工作。我复制了我的`.vim`and `.vimrc`，除了 listchars 的着色外，一切都可以工作......我从非视网膜 MBP 更改为视网膜 MBP，但其他一切都是一样的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:19:38.263

问题在于订购。我不确定冲突到底在哪里，但我把它移到顶部，它又开始工作了。不知道为什么这会在计算机之间发生变化，但这解决了问题。

# python - 在子进程中加载 泡菜

> ID：12046053
> 
> 赞同：2
> 
> 时间：2012-08-20T22:23:21.400
> 
> 标签：python, subprocess, stdout, pickle

所以我试图腌制一个大字典，其中包括：numpy 数组、其他字典、文件名和简单变量。

但是当我启动一个将加载数据的子进程时，我得到了一个“不安全的字符串泡菜”错误。

如果我在调用子进程之前杀死主进程，并通过命令行手动运行它，它工作正常......

问题可能在于使用 stdout 和 stderr 进行 PIPE-ing。

我尝试过使用一些用于泡菜转储的协议，但无济于事。

这是我的代码中的一个示例：

```
 dataout = open('Dataout.pickle','wb')
    dictout = { dict of all the values }
    pickle.dump(dictout, dataout)
    for i in xrange(int(self.runs)):
        self.names.append("%s_%i"%(self.name,i))
        if self.rerun == 0:
            self.chains.append(subprocess.Popen('python BaSIC_Model.py %s'%self.names[i], shell=False,stdout=subprocess.PIPE, stderr=subprocess.STDOUT,universal_newlines=True))#bufsize=0,

        else:
            self.chains.append(subprocess.Popen('python BaSIC_Model.py %s'%self.names[i], shell=False,stdout=subprocess.PIPE, stderr=subprocess.STDOUT, universal_newlines=True))#bufsize=0,

    if self.Gui == 1:
        self.cp = Cust_Progress.ProgRun("Running Chains", [0]*int(self.runs),self.itter)
        self.cp.Play()
        while True:
            if not any([True if chain.poll() == None else False for chain in self.chains]):
                print 'broke'
                texts = [chain.stdout.read() for chain in self.chains]
                print texts[0]
                break
            texts = [chain.stdout.readline() for chain in self.chains]
            print texts[0]
            if texts == None or None in texts:
                texts = [0]*len(self.chains)
            self.cp.UpdateIters(texts)
            wx.Yield()
            time.sleep(0.05)
        self.cp.Done()
        self.cp.UpdateIters(['Generating Plots']*int(self.runs)) 
```

从子流程中，它失败了：

```
 inFile = open('Dataout.pickle','rb')
    inputData = pickle.load(inFile) 
```

带有不安全的字符串泡菜错误。另外，我的代码中的 self.cp 是我拥有的自定义进度，它将根据我的每个子流程的标准输出生成进度。我有一个带有线程类的工作版本，但速度非常慢，如果我同时运行 5 个子进程，子处理版本会给我至少 5 倍（到 9 倍）的速度。

以前有没有其他人在子进程中加载​​泡菜文件时遇到问题？我有程序可以进行子处理并且可以加载泡菜，但从来没有使用管道到标准输出。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:48:20.330

菜鸟的错...

没有打电话：

```
 dataout.close() 
```

转储之后.... -_-

# iphone - 使用 AppDelegate 共享数据

> ID：12046060
> 
> 赞同：7
> 
> 时间：2012-08-20T22:24:01.997
> 
> 标签：iphone, objective-c, ios, model-view-controller, delegates

我找到了一些资源来解释如何使用 AppDelegate 在 iOS 应用程序中的对象之间共享数据。我已经非常轻松地实现了它，在我的情况下它看起来是一个很好的方法。考虑使用 AppDelegate 可以做什么*，*我想知道应该在哪里画线。

显然还有其他方法可以[跨视图控制器共享数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)，使用[Singleton 对象](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)和[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)。**何时适合使用 AppDelegate 共享数据？**在我目前的情况下，我使用这种方法来存储用于推送通知的 appleDeviceToken。当用户登录或注销应用程序时，我会使用该令牌。

* * *

在 MyAppDelegate.h 我声明了属性：

```
@property (nonatomic, retain) NSString *appleDeviceToken; 
```

在 MyAppDelegate.m 我合成 appleDeviceToken 然后设置它：

```
@synthesize appleDeviceToken;    

------------------------------------------------------

- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
  NSString *devToken = [[[[deviceToken description]
                          stringByReplacingOccurrencesOfString:@"<"withString:@""]
                         stringByReplacingOccurrencesOfString:@">" withString:@""]
                        stringByReplacingOccurrencesOfString: @" " withString: @""];
  appleDeviceToken = devToken;
} 
```

然后，在我的 LoginViewController.m 中检索它并将其发布到我的服务器：

```
 NSString *urlForDeviceTokenPost = [NSString stringWithFormat: @"/api/users/%i/appleDeviceToken", userId];

  MyAppDelegate *appDelegate = (MyAppDelegate*) [UIApplication sharedApplication].delegate;
  NSString *appleDeviceTokenStr = appDelegate.appleDeviceToken;

  AppleDeviceToken *appleDeviceToken = [[AppleDeviceToken alloc] init];
  appleDeviceToken.deviceToken = appleDeviceTokenStr;

  [[RKObjectManager sharedManager] postObject:appleDeviceToken delegate:self]; 
```

* * *

到目前为止效果很好，但这是理想的方法吗？我还应该知道什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T23:35:04.417

当数据和对象真正是全局的和/或不能被推到图的下方时。通常不需要这种高级别的存储。同样，您的实现通常应该对应用程序委托几乎一无所知——比单例更糟糕的是什么？The God-Singleton :) 如果应用程序委托很复杂，那就是出了问题。如果应用程序委托的界面对您的许多实现是可见的（通过`#import`），或者他们直接向它发送消息，那么就有问题了。

不需要（惯用的 ObjC）单例——有一个应用程序委托的实例。

NSUserDefaults 用于小值的持久性（顾名思义）——共享的能力是一个副作用。

由于在这种情况下数据已经由 UIKit 发送到应用程序委托，因此这*可能*是存储数据或对象表示的好地方。您还可以考虑将这些消息转发给适当的处理程序。重要的一点——在大多数情况下，您希望初始化沿对象图向下流动，并从可能的最低点开始流动（例如，与许多对象引用回应用程序委托相反）。因此，您可能会看到应用程序委托设置了顶级视图控制器的模型，但视图控制器随后可以设置它推送的视图控制器的模型。通过这种方式，您将减少依赖关系和控制流，因果关系将更容易追踪，并且您将能够更轻松地对其进行测试——不受大规模全局状态的影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T03:18:05.723

以下行始终表明您做错了什么：

```
MyAppDelegate *appDelegate = (MyAppDelegate*) [UIApplication sharedApplication].delegate; 
```

应用程序委托是`UIApplication`. 它被称为是有原因的。它不称为 ，`ApplicationDataStore`甚至不称为`ApplicationCoordinator`。您向应用程序索要它`delegate`然后将其视为其他东西这一事实`id<UIApplicationDelegate>`意味着您已要求它做一些它不负责做的事情。它的任务是管理事物`UIApplication`需求（这并不意味着“'应用'需要的一切）。

看来您已经建立了一个存储此信息的地方：`RKObjectManager`. 我会让应用程序委托在那里传递令牌，并且我会让登录视图控制器注意是时候推送它了。我什至不会把字符串`@"/api/users/%i/appleDeviceToken"`放在视图控制器中。这与显示视图无关。这对您来说是网络堆栈（您似乎已经安装在其中`RKObjectManager`）。“ViewController”的意思是“帮助显示视图的控制器”而不是“视图所代表的操作的处理器”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:32:49.790

这似乎是一个合适的用途。应用程序委托很容易被滥用，因为它是一个易于访问的对象，已经存在于每个应用程序中。不过，它有一个真正的目的，正如其标题所示，为应用程序对象做出决策，就像表视图委托对其表视图对象所做的那样。

在这种情况下，您正在存储**从应用程序本身传递给委托的**信息。我会说那是画线的地方。

存储此令牌似乎符合应用程序委托的目的，除非您有另一个专注于处理远程通知的控制器对象。在这种情况下，您可能只是将令牌直接传递给该控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T01:30:59.367

我比较务实。由于我的应用程序中的 appDelegate 知道 tabBarController 是如何填充的，以及所有导航控制器，我在那里有几个方法可以让一些任意类与其他一些类进行通信 - 通常这些是一些类的单个实例（但不是单例）。也就是说，如果你想放在那里的东西没有令人信服的理由放在 appDelegate 中，那么它可能不属于那里！

# python - 如何在不导入 numpy 的情况下将 Python 脚本发送到 IPython 或在 IPython 中运行 Python 脚本

> ID：12046063
> 
> 赞同：3
> 
> 时间：2012-08-20T22:24:22.580
> 
> 标签：python, vim, ipython

我有一个 python 文件，其中包含使用 numpy 函数的脚本。

我以为 IPython 已经加载了 numpy，所以我没有在文件中导入 numpy，当我这样做时：

```
%run my_python_file.py 
```

由于来自 的未知功能，它失败了`numpy`。

所以，我的问题是：

有没有办法使用 IPython 已经导入的模块在 Python 文件中运行脚本？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:50:32.723

如果您在**numpy -pylab**交互式 shell 中，请使用

```
run -i script.py 
```

对于你的要求。它的副作用是保留（或覆盖）python 脚本中的任何全局变量。基本上，ipython 的行为就像您手动输入了文件一样。

这样做最有用的原因可能是您还可以引用在 ipython 会话中创建的其他变量，例如，在脚本运行之间手动更改它们。

举个简单的例子，如果 script.py 是

```
AA = np.array([[1,2],[3, myVar]])
print AA 
```

然后在 ipython 你可以

```
In [1]: myVar = 7
In [2]: run -i script.py
[[1 2]
 [3 7]]
In [3]: myVar = 17
In [4]: run -i script.py
[[ 1  2]
 [ 3 17]]
In [5]: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:28:15.933

好吧，如果我理解正确，假设您正在运行 linux，您可以执行以下操作：

```
#!/usr/bin/ipython --pylab=tk
print(numpy.sin(0.5)) 
```

带有 #! 的行 向脚本指示用于运行它的程序（和选项），numpy 行只是一个示例，向您展示它的工作原理。您可能需要将 tk 替换为 Qt4 或类似的东西。

然后，您需要在此文件上运行命令 chmod +x（假设您在 unix 机器上）以使其可执行并运行它。

真正的问题是为什么不直接在脚本中导入 numpy？如果您解释说，也许我们可以帮助您找到解决问题的最佳方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:25:56.560

```
%import numpy
%run my_python_file.py 
```

或者我误解了你的问题。

# .net - 封装 - 访问器方法

> ID：12046064
> 
> 赞同：1
> 
> 时间：2012-08-20T22:24:24.657
> 
> 标签：.net, vb.net

我在编码时一直试图遵循封装原则。例如，这样做：

公开课学生

```
private Name As String

public sub setName(ByVal name2 As String)
  Name = Name2
End Public 
```

而不是允许客户端直接访问属性，例如：

```
Dim s1 As Student
s1.Name = "Mark" 
```

所有的书都说遵循选项二是不好的做法，因为这意味着如果您更改类，客户端代码可能会中断。但是，我不完全理解为什么会这样。如果您删除 Name 成员，那么无论您是否允许他们直接访问该属性，客户端代码都会中断。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:27:09.380

简单来说，`Name`与返回的属性或方法签名不二进制兼容`String`。因此，如果您创建一个公共成员，然后稍后将其更改为属性，它将破坏任何最初调用该成员的客户端代码。

更多信息在这里：[http ://csharpindepth.com/Articles/Chapter8/PropertiesMatter.aspx](http://csharpindepth.com/Articles/Chapter8/PropertiesMatter.aspx)

其他原因：

*   您可以通过属性获得更细粒度的访问控制。
*   您可以向属性添加断点。
*   您可以将日志记录添加到属性。
*   您可以向属性添加验证。
*   属性用于数据绑定；字段不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:28:39.473

如果您有一个属性，您可以在接口中定义它，而这对于字段是不可能的。您还可以区分 getter 和 setter，从而创建只读“字段”。这个想法是尽可能少地给外界提供选择，这样你就可以考虑更少的场景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:32:57.977

使用这些空属性，除了将给定的值分配给字段或返回字段值之外什么都不做，这是代码膨胀。这不是封装。

封装的真正本质是当字段对外部完全隐藏时，以至于外部的任何代码甚至都不知道有多少字段，而只知道字段的类型或值。然后需要对字段进行的任何处理都由类的公共方法完成。

一个例子是邮件类。与外界无关，您存储电子邮件地址的格式是什么，例如，您将域部分分解为单独的字符串。类的内部工作，即以何种方式将值放入私有字段中，必须对外部完全不透明。

就像有人向你借钱一样。那个人不需要知道你把钱放在哪里，钱包里，保险箱里，银行账户里等等。那个人也不需要知道你有多少钱。你，班级，负责取出钱并给它。

我通过将所有字段设为私有来做到这一点。我的很多方法也是私有的。它只是用于消息传递的少数公共方法。此外，这些值永远不会通过引用返回，总是按值返回，因此外部世界无法在不通过我的方法过滤器的情况下更改我的类中的数据。

属性实际上是一种方法。只要有方法，就必须做一些独特的处理。处理是逻辑，有条件或循环或两者兼而有之。条件可能以多态行为的形式隐藏，但仍然是条件。如果您没有任何处理要做，则不需要该方法。

# c - C 缓冲区溢出

> ID：12046068
> 
> 赞同：4
> 
> 时间：2012-08-20T22:24:52.677
> 
> 标签：c, string, char, buffer-overflow

我试图创建一个函数来替换`str1`文本中所有出现的`t`，`str2`但我不断收到*“缓冲区溢出”*错误消息。你能告诉我我的功能有什么问题吗？

```
#include <stdio.h>
#include <string.h>
#include <assert.h>

//replace all *str1 in *t with *str2, put the result in *x, return *x
char * result(char *str1,char *str2,char *t)
{
    char *x=NULL,*p=t,*r=t;
    x=malloc(400*sizeof(char));
    assert(x!=NULL);
    x[0]='\0';
    r=strstr(t,str1); //r is at the first occurrence of str1 in t, p is at the beginning of t
    while(r!=NULL)
    {
        strncat(x,p,r-p); //copy r-p chars from p to x
        strcat(x,str2); //copy str2 to x
        p=r+strlen(str1); //p will be at the first char after the last occurrence of str1 in t
        r=strstr(r+strlen(str1),str1); //r goes to the next occurrence of str1 in t
    }
    strcat(x,p);
    return x;
} 
```

我没有使用该`gets()`函数来读取任何`char`数组。

我的编译器是 gcc 版本 4.6.3

* * *

我更新了代码，它可以工作，但结果不是预期的。

`main()`功能：

```
int main(void)
{
    char *sir="ab",*sir2="xyz",*text="cabwnab4jkab",*final;
    final=result(sir,sir2,text);
    puts(final);
    free(final);
    return 0;
} 
```

打印字符串：

```
b 
```

我期望`cxyzwnxyz4jkxyz`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T22:28:34.390

看起来您的[`strncpy`](http://en.cppreference.com/w/c/string/byte/strcpy)参数混淆了：第二个参数是**源**字符串，而不是要复制的字符数的限制，应该是第三个参数：

```
 strncpy(x, p, r - p); // copy r - p chars from p to x 
```

此外，您想使用`strcat`而不是`strcpy`. 使用`strcpy`，您只需每次都用替换字符串覆盖结果的内容。使用`strcat`，请务必`\0`在开始之前使用 初始化结果。

最后，您`x`从函数返回对局部变量的引用：您不能这样做，因为函数返回后内存不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:51:23.170

您的代码包含很多奇怪的错误。

首先，`x`是指向目标缓冲区的指针。出于来的原因，您将所有复制都直接`x`复制到 ，即所有内容都复制到缓冲区的最开始，覆盖以前复制的数据。这根本没有任何意义。你为什么这样做？您需要创建一个专用指针来保持当前目标位置`x`并将数据写入该位置（而不是将其写入`x`）。

我看到您编辑了代码并用连接替换了复制。嗯......即使它可能会解决问题，这仍然是糟糕的设计。`strcat`/`strncat`函数在好的 C 代码中没有位置。无论如何，您的代码仍然被破坏，因为您试图`strcat`在未初始化的缓冲区上使用函数`x`。您需要先初始化`x`为空字符串。

其次，搜索替换字符串存在一个更微妙的问题。在循环结束时，您从下一个符号继续搜索`r=strstr(r+1,str1)`，即仅将搜索位置增加 1。我不确定这是否是您想要的。

考虑 作为输入文本，以及替换为`aaaa`的请求。在这种情况下，您要进行多少次替换？有多少次出现？2个还是3个？如果你想得到结果（2 个替换），你必须增加1 ，而不是 1。`aa``bc``aa``aaaa``bcbc``r``strlen(str1)`

事实上，在你设置的当前实现中，只是从位置`p=r+strlen(str1)`继续搜索。`r+1`如我的示例所示，这将导致搜索字符串重叠出现的完全无意义的结果。尝试这个

```
char *str1="aa",*str2="xyz",*text="aaaa",*final;
final=result(str1,str2,text); 
```

看看会发生什么。

# mysql - 按最后 2 个字符对字符串列表进行排序

> ID：12046069
> 
> 赞同：1
> 
> 时间：2012-08-20T22:24:53.097
> 
> 标签：mysql, sorting

我有一个关于字符串最后 2 个字符的字符串排序的基本问题。这是输入字符串列表和基于最后 2 个字符的字符串排序列表。我使用 MySQL 查询进行排序。但我无法从逻辑上解释为什么字符串以这种方式排序。

输入字符串：

```
ksalan
isalan
rsalan
bsalan 
```

排序列表：

```
rsalan
isalan
ksalan
bsalan 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:49:55.703

如果您按最后两个字符排序，那么从排序器的角度来看，所有字符串都是相等的。不保证 select 生成的行的顺序，它可能取决于许多因素（插入字符串的顺序、主键、创建的索引等）

因此，选择行，然后对其应用排序。由于所有行都应该具有相同的位置，因此如何返回它们取决于内部实现的算法。

# sorting - 包含已排序和未排序列表的列表的排序列表

> ID：12046074
> 
> 赞同：0
> 
> 时间：2012-08-20T22:25:14.440
> 
> 标签：sorting, merging-data

有 k 个列表，其中包含 m 个未排序的列表 (0 <=m < k)。如何将列表合并为一个也应该排序的大列表，没有提供有关已排序列表的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:49:03.910

假设 n 是所有列表中的总元素数。

假设此元素数量在所有列表之间平均分配，您可以执行以下操作：

*   对每个未排序的列表进行排序

*   合并所有列表中的所有元素

运行时分析：

每个列表中的元素数等于 n/k。

因此，对每个未排序的列表进行排序需要 O((n/k) *log(n/k) => 对所有 m 个列表进行排序的运行时间等于 O(m* (n/k)*log(n/k))。

合并部分需要 O(n)。

因此，我们得到整体运行时间 = O(n + m*(n/k)*log(n/k))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:37:48.510

您可以使用插入排序，这将是一个简单的答案。最糟糕的是它本身会运行 O(n**2)。

否则对未排序的列表进行排序（合并或快速排序）并将它们合并。根据您的 m 和 k，您可以进行一些微优化。在这里，您的复杂性将是基于 n 的 O(nlogn)。你可以弄清楚它与 k 和 m 的对应关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:19:43.517

使用随机快速排序对未排序的列表进行排序，然后使用合并排序合并所有已排序的列表。

# excel - 每月存款的储蓄账户的利息

> ID：12046075
> 
> 赞同：0
> 
> 时间：2012-08-20T22:25:18.350
> 
> 标签：excel, math

大家好，我正在为储蓄账户写一张 Excel 表格，我需要知道每天复利的储蓄账户中的金额，但该账户也将有每月存款。

如果没有每月存款，它将是：

```
=StartingBalance * (1 + Rate)^NumberOfDays 
```

但我不知道如何添加押金 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:37:03.900

(首期付款 + (存款 * 月)) * (1 + 费率) ^ (365 * (月 / 12))

# r - 如何从 data.table 中排除一列或将 data.table 转换为 MTS

> ID：12046079
> 
> 赞同：56
> 
> 时间：2012-08-20T22:25:44.457
> 
> 标签：r, data.table, zoo

使用时`data.table`是否可以返回除一列之外的所有列，例如`data.frame`？

如果答案是否定的，是否有人有一种优雅的方式将多个时间序列转换`data.table`为一个`zoo`或其他时间序列对象？

考虑以下示例：

```
library(data.table)
library(zoo)

## DEFINE DATA
set.seed(1)
dt = data.table(
    mydates = as.Date("2012-01-01") + 1:9, 
    value1 = sort(rpois(9, 6)),
    value2 = sort(rpois(9, 6)),
    value3 = sort(rpois(9, 6)),
    value4 = sort(rpois(9, 6)),
    value5 = sort(rpois(9, 6)))

## CONVERT TO DATA FRAME
df = as.data.frame(dt)

## CONVERT TO ZOO
zooObj = zoo(df[,-1], df$mydates)

## EXAMPLE OF DESIRED RESULTS
plot(zooObj, col=1:ncol(zooObj)) 
```

没有我怎么办`df = as.data.frame(dt)`？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-20T23:00:49.863

尝试`with=FALSE`：

```
dt[,-1,with=FALSE] 
```

* * *

顺便说一句，功能请求 #416 是相关的：

[添加*不加入* `DT[-J(...)]`，而*不是列* `DT[,-"colC",with=FALSE]`。](https://github.com/Rdatatable/data.table/issues/416)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-30T22:40:17.120

以前的答案有效，但这是更新方法的答案：

```
## CONVERT TO ZOO

#### old method
zooObj = zoo(x=dt[,-1,with=FALSE], order.by=dt$mydates)

#### alternatives
zooObj = zoo(x=dt[,!'mydates'], order.by=dt$mydates)
zooObj = zoo(x=dt[,-'mydates'], order.by=dt$mydates)

#### and if column name is a variable
myvar = 'mydates'
zooObj = zoo(x=dt[,!..myvar], order.by=dt[[myvar]])
zooObj = zoo(x=dt[,-..myvar], order.by=dt[[myvar]]) 
```

作为扩展，如果您想从 中删除多个列`data.table`，请尝试以下操作之一：

```
dt[,-c('value1', ..myvar)]
dt[, .SD, .SDcols = !c('value1', (myvar))] 
```

# javascript - Javascript 将链接的键值分组到数组中

> ID：12046080
> 
> 赞同：2
> 
> 时间：2012-08-20T22:25:59.660
> 
> 标签：javascript, algorithm, grouping, graph-theory

嗨，我在 json key:value、key:value 等中有一个很长的键值对列表

```
car <--> wheel
wheel <--> tyre
bed <--> sheets
guitar <--> strings
guitar <--> pickup
tyre <--> rubber 
```

我想要的是将所有关系分组到数组中，无论这样的距离有多远

```
[car, wheel, tyre, rubber]
[guitar, strings, pickup]
[bed, sheets] 
```

使用 Javascript 执行此操作的有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:42:23.927

首先，我会将关系存储为数组，以便您可以拥有重复的“键”。关键方法：包含与每个单词相关的每个单词的初始字典；使用 map 和 reduce 的递归链扩展器；基于等价的过滤链。

```
Array.prototype.getUnique = function(){
   var u = {}, a = [];
   for(var i = 0, l = this.length; i < l; ++i){
      if(u.hasOwnProperty(this[i])) {
         continue;
      }
      a.push(this[i]);
      u[this[i]] = 1;
   }
   return a;
}
var links = {};
var pairs = [
    ["car", "wheel"],
    ["wheel", "tyre"],
    ["bed", "sheets"],
    ["guitar", "strings"],
    ["guitar", "pickup"],
    ["rubber", "tyre"],
    ["truck", "wheel"],
    ["pickup", "car"]
];
pairs.map(function(pair) {
    links[pair[0]] = links[pair[0]] || [];
    links[pair[1]] = links[pair[1]] || [];

    links[pair[0]].push(pair[1]);
    links[pair[1]].push(pair[0]);
});
var append = function(list) {
    var related = list.map(function(item) {
        return links[item];
    }).reduce(function(listA, listB) {
        return listA.concat(listB);
    }).filter(function(item) {
        // make sure related only includes new links
        return list.indexOf(item) == -1
    }).getUnique();

    return related.length ? append(list.concat(related)) : list.concat(related);
};
var branches = [];
for( var word in links ) {
    branches.push(append(links[word].concat(word)));
}
var compareArrays = function(listA, listB) {
    if( listA.length != listB.length ) return false;
    return listA.map(function(element) {
        if( listB.indexOf(element) == -1 ) return 0;
        return 1;
    }).filter(function(el) {
        return el == 1;
    }).length == listA.length;
};
var _branches = branches;
var chains = branches.filter(function(branch1, i) {     
    var isUnique = _branches.filter(function(branch2) {
        // are they equivalent
        return compareArrays(branch1, branch2);
    }).length == 1; 
    delete _branches[i];
    return isUnique;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:32:25.623

我会使用单词映射，将它们当前所在的集合链接起来。映射（一个 JavaScript 对象）具有接近 O(1) 的运行时来访问一个键应该有助于提高性能。从@matt3141 提出的相同格式开始：

```
var pairs = [
    ["car", "wheel"],
    ["wheel", "tyre"],
    ["bed", "sheets"],
    ["guitar", "strings"],
    ["guitar", "pickup"],
    ["rubber", "tyre"],
    ["truck", "wheel"],
    ["pickup", "car"]
];

var setsByWord = {};
for (var i=0; i<pairs.length; i++) {
    var pair = pairs[i];
    if (pair[0] in setsByWord && pair[1] in setsByWord) {
        // both words are already known
        if (setsByWord[pair[0]] === setsByWord[pair[1]]) {
             ; // We're lucky, they are in the same set
        } else {
             // combine the two sets
             var sets = [setsByWord[pair[0]], setsByWord[pair[1]]];
             var larger = sets[1].length > sets[0].length ? sets[1] : sets[0],
                 smaller = sets[+(larger===sets[0])];
             for (var j=0; j<smaller.length; j++)
                 setsByWord[smaller[j]] = larger;
             Array.prototype.push.apply(larger, smaller);
        }
    } else {
        // add the missing word to the existing set
        // or create a new set
        var set = setsByWord[pair[0]] || setsByWord[pair[1]] || [];
        if (!(pair[0] in setsByWord)) {
            set.push(pair[0]);
            setsByWord[pair[0]] = set;
        }
        if (!(pair[1] in setsByWord)) {
            set.push(pair[1]);
            setsByWord[pair[1]] = set;
        }
    }
}
return setsByWord; 
```

这会将您的图拆分为其[连接的组件](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)（在`setsByWord`对象中，这些组件数组由节点索引）：

```
> var results = [];
> for (var word in setsByWord)
>     if (results.indexOf(setsByWord[word])<0)
>         results.push(setsByWord[word]);
> return results;

[
    ["car","wheel","tyre","rubber","truck","guitar","strings","pickup"],
    ["bed","sheets"]
] 
```

* * *

如果你有一个有向图，并且想要按单词排列所有后继的数组，你可以使用这个：

```
var pairs = […],
    graph = pairs.reduce(function(map, pair) {
         (map[pair[0]] || (map[pair[0]] = [])).push(pair[1]);
         return map;
    }, {});

var successors = {};
for (var word in graph) (function getSuccessors(word) {
    if (word in successors)
        return successors[word];
    successors[word] = [true]; // some marker against circles
    return successors[word] = word in graph
        ? [].concat.apply(graph[word], graph[word].map(getSuccessors))
        : [];
})(word);
return successors; 
```

如果您确定图中没有圆圈并且只想要路径初学者的列表，您可以添加以下内容：

```
var results = [];
for (var word in successors)
    for (var i=0; word in successors && i<successors[word].length; i++)
        delete successors[successors[word][i]];
for (var word in successors)
    results.push([word].concat(successors[word]));
return results;

// becomes:
[
   ["bed","sheets"],
   ["guitar","strings","pickup","car","wheel","tyre"],
   ["rubber","tyre"],
   ["truck","wheel","tyre"]
] 
```

# arrays - 什么是 MATLAB 中的双精度数组？

> ID：12046083
> 
> 赞同：0
> 
> 时间：2012-08-20T22:26:27.490
> 
> 标签：arrays

概念问题：

什么是 20x10x3 双数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:37:16.053

它只是一个 3 维数组，其元素是双精度浮点数。将其可视化为一本书，其中所有页面的行数相同，并且所有行的字符数都相同。在这种情况下，每个“字母”实际上是一个双精度数。您可以从页码、行号和列号中识别特定的“字符”（数组中的元素）。第一个索引为您提供页码，第二个索引为该页面上的行号，第三个索引为该行上特定字符的列。

因此，您的示例将是一本书，其字符类型为 double，有 20 页，每页 10 行，每行 3 列。当您指定 3 个索引（当然必须在数组维度给定的限制范围内）时，您将访问特定元素。

希望我没有过度简化这个答案......

# c++ - 在 C++ 中计算文本文件中的字母数字字符

> ID：12046090
> 
> 赞同：2
> 
> 时间：2012-08-20T22:26:57.987
> 
> 标签：c++, text-files, alphanumeric

我编写了一个程序来计算文本文件中字母数字字符的数量。但是，它返回的数字总是大于在线字符计数器返回的数字。

例如，程序将计算此文本中字母数字字符的数量：

> 如果这些人有奇怪的时尚，并期望在最不寻常的事情上服从，他们至少准备好为自己的古怪付出代价

是162。再次运行程序，它会说文本中有164个字符。再次运行它，它会说有 156 个字符。使用[这个](http://www.lettercount.com/)在线字符计数器，似乎字符数应该低于 144（在线字符计数器也包括空格）。

这是代码：

```
#include <iostream>
#include <fstream>
#include <cctype>
using namespace std;

int main() {
    char line[100];
    int charcount = 0;
    ifstream file("pg1661sample.txt");
    while (!file.eof()) {
        file.getline(line, 99);
        for (int i = 0; i < 100; i++) {
            if (isalnum(line[i])) {
                charcount++;
            }
        }
    }

    cout << endl << "Alphanumeric character count: " << charcount;
    cin.get();
    return 0;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:45:11.640

尝试：

```
#include <iterator>
#include <algorithm>
#include <iostream>
#include <cctype>
bool isAlphaNum(unsigned char x){return std::isalnum(x);}
int main()
{
    std::cout << "Alphanumeric character count: " <<
    std::count_if(std::istream_iterator<char>(std::cin),
                  std::istream_iterator<char>(),
                  isAlphaNum
                 ) ;
} 
```

您的代码存在问题：

在您阅读文件末尾之前，EOF 不正确：

```
 // this is true even if there is nothing left to read.
 // If fails the first time you read after there is nothing left.
 while (!file.eof()) {

 // thus this line may fail
     file.getline(line, 99); 
```

最好总是这样做：

```
 while(file.getline(line, 99)) 
```

只有当 getline 实际工作时才进入循环。

您还使用了错误版本的 getline（因为行可能大于 100 个字符）。
尝试使用与 std::string 一起使用的版本，以便它自动扩展。

```
std::string  line;
while(std::getline(file, line))
{
     // stuff
} 
```

接下来，您假设该行正好是 100 个字符。
如果该行只有 2 个字符长，会发生什么？

```
for (int i = 0; i < 100; i++) 
```

基本上，您将扫描数据，它将计算上一行遗留下来的字母（如果前一行比当前行长）或完全随机的垃圾。如果您仍在使用`file.getline()`，那么您可以使用 检索一行中的字符数`file.gcount()`。如果您使用 std::getline() 则变量`line`将是读取的行的确切大小 ( `line.size()`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:35:19.970

```
while (!file.eof()) { 
```

不要这样做。**eof() 直到尝试输入失败后**才会返回 true ，因此像这样的循环会运行额外的时间。相反，请执行以下操作：

```
while (!file.getline(line, 99)) { 
```

当输入结束时循环将终止。

另一个问题是在计算字符的循环中。问问自己：每次通过输入循环时有多少字符被读入缓冲区？那么，为什么计数循环会查看 100 个字符呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:33:01.327

您假设它恰好`getline()`填充了 100 个字符。`line`检查由 读取的字符串的长度`getline()`，例如使用[`strlen()`](http://www.cplusplus.com/reference/clibrary/cstring/strlen/)：

```
for (int i = 0; i < strlen(line); i++) {
    if (isalnum(line[i])) {
        charcount++;
    }
} 
```

**编辑**：另外，请确保您注意其他答案的建议，将`getline()`' 的返回值用于循环条件而不是调用`eof()`.

# c# - 使用 WinForms 组织

> ID：12046092
> 
> 赞同：5
> 
> 时间：2012-08-20T22:27:02.597
> 
> 标签：c#, winforms, organization

因此，我刚刚开始开发 C# WinForm 应用程序，我从事的每个项目似乎都更大，需要更多的用户功能。如果我将所有功能添加到一个表单中，显然它会很快失控。我的上一个项目我会将功能划分为单独的表单，每当有人说想要执行“Feature1”时，我都会实例化 Feature1 表单并将其显示为与主表单作为其所有者的对话框（因此他们无法单击它）。

我只是好奇还有哪些其他方法可以在 Forms 中组织代码。如果您被迫在一个表单上拥有大量特性/功能，是否有一种保持项目井井有条的好方法？我只是讨厌拥有数百/数千行长的代码文件。

答案可能只是在设计中，尝试预先设计 UI，以便您可以利用多种形式？

我遇到的另一个例子。我创建了一个选项卡控件并有大约 5 个选项卡。这 5 个选项卡具有大量功能，并且都存储在同一个 CS 文件中。我还有什么其他选择？创建一个新的自定义 TabControl 类，其中包含我为该选项卡提供的特定功能？

我不介意阅读，所以如果那里有不错的文章，请随时链接它们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:33:39.073

首选方法是 Controller/Presenter。这个想法是，窗口应该只负责实际处理其控件的 UI 事件，并且应该通过调用为窗口执行实际工作的控制器上的方法来做到这一点。窗口可以具有必要的处理程序，也可以将 UI 事件直接链接到控制器方法；前者通常是更简单的方法，但它可能很容易在此处或那里潜入一行真正应该在 Controller 方法中的代码。通过这样做，您将 Form 类中的布局和表示逻辑与 Controller 中的业务逻辑分开。

Mark Hall 对用户控件的建议也是一个很好的建议。通过为选项卡或常见的 UI 控件组合创建 UserControl 类，您可以从主窗体的代码中切断负责布局 UI 的那部分的逻辑，然后控件只是“插入”并且窗口可以在很多情况下使用它更简单的方法。这是实现自定义但可重用控件的必要条件；DRY 的基本原则是，如果你在两个不同的地方有两行代码，对两个不同但可互换的东西做同样的工作，那么这些代码行应该合并到一个地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:31:44.880

我在我的项目中使用 [UserControls](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.aspx)将功能分组到单独的对象中，然后可以将这些对象添加到您的表单中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T23:38:15.307

我倾向于按照建议将我的逻辑代码从 UI 中分离出来。如果您这样做，您需要对跨应用程序进行调用的方式保持谨慎，以避免出现跨线程异常。我被教导创建委托和事件以从逻辑类更新 UI，但[MSDN](http://msdn.microsoft.com/en-us/library/ms171728.aspx)当然也有很多关于进行线程安全调用的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-17T12:30:16.567

我知道这是一个迟到的答案，但如果有人仍然阅读这个问题，另一种减少表单中代码行数的方法是使用[Data Bindings](https://docs.microsoft.com/en-us/dotnet/framework/wpf/data/data-binding-overview)。如果您正在使用属性，数据绑定可以做到这一点，这样您就不必经常编写处理程序来执行类似`PropertyName = textBox.Text;`. 数据绑定适用于数据集和对象。

# iphone - facebook 使用 quickblox sdk 而不是 facebook-ios-sdk

> ID：12046095
> 
> 赞同：2
> 
> 时间：2012-08-20T22:27:12.010
> 
> 标签：iphone, objective-c, ios, facebook, quickblox

是否可以使用 quickblox sdk 而不是 facebook-ios-sdk 将 facebook 集成到我的应用程序中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:02:29.677

你当然可以。

1.  下载最新版本的 QuickBlox iOS SDK [http://quickblox.com/developers/IOS](http://quickblox.com/developers/IOS) (1.2.0)

2.  查询

    `[QBUsers logInWithSocialProvider:@"facebook" delegate:self];`

3.  输入您的登录名并进入网络表单

4.  捕获结果

> // QuickBlox 查询委托
> 
> -(void)completedWithResult:(Result *)result{
> 
> ```
>  // success result
>     if(result.success){
> 
>             // User Login
>             if([result isKindOfClass:QBUUserLogInResult.class]){
>                 QBUUserLogInResult *res = (QBUUserLogInResult *)result;
> 
>                 // Here is your Facebook access token
>                 NSString *fbAccessToken = res.socialProviderToken;
>                 NSDate *fbAccessTokenEpiresAt = res.socialProviderTokenExpiresAt
> 
>                 // Make query to Facebook Graph API with your access token
>                 // ...
> 
>         }else{
>             NSLog(@"Errors=%@", result.errors); 
>         }
>     } 
> ```

此外，您可以在 ChattAR [https://github.com/QuickBlox/ChattAR-ios](https://github.com/QuickBlox/ChattAR-ios) src 看到 - 我们在没有 Facebook-ios-sdk 的情况下对 Facebook Graph API 进行了一些查询

ps 你能在 QuickBlox 相关问题中使用“quickblox”标签吗，谢谢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T23:21:49.953

您不必使用 facebook sdk，这样做会更好，因为他们制作了 sdk，它很稳定，它可以工作......为什么要重新创建轮子，但是，无论如何，如果您只想做一些简单的事情大胆试试吧。

# oracle - Oracle，阻止访问 ALL_*/USER_* 视图

> ID：12046101
> 
> 赞同：0
> 
> 时间：2012-08-20T22:27:50.203
> 
> 标签：oracle

我假设它可以完成，我只是不知道如何或无法找到一种方法来做到这一点。

在 Oracle 中，可以撤销对 ALL_* 表和 USER_* 表的访问，包括选择授权。

例如，all_objects、all_procedures 视图。可以限制访问这些内容吗？

user_tables 和 user_procedures 以及任何其他 user_* 视图也是如此。可以限制访问它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:33:19.710

不，您不能（合理地）阻止用户查询`ALL_*`或`USER_*`视图。您可以通过并单独撤消对这些视图中的每一个的访问权限，`PUBLIC`但这将是一项相当痛苦的工作，它会导致各种应用程序崩溃，更不用说破坏 Oracle 的脚本了。您最终至少会重新授予连接到数据库的任何帐户对这些视图的访问权限，因为每个数据库 API 都会询问数据字典视图。无论您有 ODBC 应用程序、JDBC 应用程序、像 TOAD 或 SQL Developer 这样的 PL/SQL IDE，还是其他任何东西，这些应用程序都需要查询数据字典。

但是，他们将在任一视图中看到的数据将仅限于他们有权访问的对象（对于`ALL_*`视图）或他们拥有的对象（对于`USER_*`视图）。限制用户查询数据字典以确定用户拥有哪些对象或用户有权访问哪些对象的能力将达到什么目的？如果希望用户拥有一张桌子，但又不允许用户知道他拥有这张桌子，这似乎是非常奇怪的。

现在，如果您**真的**下定了决心，您可以在用户的​​模式（表或视图）中创建对象，例如，`ALL_TABLES`或`USER_TABLES`. 假设用户只是查询`ALL_TABLES`而不是指定完全限定的`SYS.ALL_TABLES`，他们将查询本地对象而不是数据字典视图。这通常是一件非常不可取的事情——许多产品通过查询数据字典来工作，因此导致数据字典查询返回错误的数据集可能会导致各种难以追踪的错误。但如果您真的非常想限制从数据字典返回的数据，这是一个选择。

# facebook-like - Like Button (SEND) 显示 og:metadata 信息而不是 href 内容（有时）

> ID：12046104
> 
> 赞同：0
> 
> 时间：2012-08-20T22:28:11.487
> 
> 标签：facebook-like

该网站是： http: [//grantdeb.com](http://grantdeb.com)

我希望能够将元属性动态添加到 Recommend(s) 和 Send(s)。现在，它正在使用 meta og: 属性，这完全不是我想要的。

即使我已将 data-href 推送给它，LIKE 计数也显示不正确，例如：

```
<div class="fb-like" data-href="http://grantdeb.com/wedding-photographers-hampton-roads/[dynamic id]/Wedding-Photography" data-send="false" data-width="450" data-show-faces="false" data-action="recommend" ></div> 
```

但是 - 由于某种原因，有时 LIKE / SEND 不使用元属性并正确显示正确的计数和我想要的正确图片/标题。

如果您访问我们的网站[http://grantdeb.com](http://grantdeb.com)专门查看“茉莉花种植园婚纱摄影”（如第 5 篇帖子），您会看到推荐的数量是正确的，如果您点击“发送”右下角的按钮，它实际上使用了我们想要的正确标题和图片。

该帖子是我们希望推荐/发送显示的方式。

为什么这会发生在他们中的一些人身上，而对另一些人来说，它显示了我们的 og：元数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:34:23.220

我无法在您的网站上确切看到问题所在（或将您的问题描述与您网站的内容相匹配）——但查看[您在 Facebook 调试工具中提到的帖子的 URL，您](https://developers.facebook.com/tools/debug/og/object?q=http://grantdeb.com/wedding-photographers-hampton-roads/416/Jasmine-Plantation-Wedding-Photography-Richmond-Wedding-Photographers-Kelly-Tony)似乎有

```
<meta property="og:url" content="http://grantdeb.com" /> 
```

为您的所有详细信息页面设置 - 因此 Facebook 认为您所有标有此标签的实际帖子的“真实” URL。

（无法判断这是否是您明确想要的，因为您的问题描述对我来说有点模糊。）

# php - Zend_Date_DateObject - 时间戳检查和转换

> ID：12046108
> 
> 赞同：0
> 
> 时间：2012-08-20T22:28:41.557
> 
> 标签：php, zend-framework

有人可以解释为什么 Zend_Date_DateObject 在返回它之前检查其时间戳属性的类型（并将其转换为 int 或 string ...

```
 protected function getTimestamp()
    {
        if ($this->_unixTimestamp === intval($this->_unixTimestamp)) {
            return (int) $this->_unixTimestamp;
        } else {
            return (string) $this->_unixTimestamp;
        }
    } 
```

这似乎很奇怪，但一定有一些逻辑是这样的？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:38:00.250

根据他们的 svn 日志：

```
> svn log http://framework.zend.com/svn/framework -r 2773
------------------------------------------------------------------------
r2773 | gavin | 2007-01-15 19:22:51 +0200 (Mon, 15 Jan 2007) | 5 lines

* consistency updates
* bug fixes
* updates for DateObject unit tests to work with recent changes
  (10 Errors, 3 Failures yet to fix)

------------------------------------------------------------------------ 
```

添加了一些执行此（字符串/整数）行为的测试。所以我想说这只是为了让他们的单元测试遵守。

# java - 如何用 Java 重启我的服务器

> ID：12046110
> 
> 赞同：0
> 
> 时间：2012-08-20T22:28:48.707
> 
> 标签：java, restart

那么这里是关闭方法

```
public static void restart() {
    closeServices();
    System.gc();
    try {
        Runtime.getRuntime().exec("run.cmd");
        System.exit(0);
    } catch (Throwable e) {
        Logger.handle(e);
    }

} 
```

这是 run.cmd

```
java -javaagent:"C:\Program Files (x86)\ZeroTurnAround\JRebel\jrebel.jar" -cp bin;data/FileStore.jar;data/netty-3.5.2.Final.jar;xstream-1.4.3.jar;data/mysql.jar com.rs.Launcher 
```

如何让它显示它运行 run.cmd 并关闭最后一个？现在它所做的只是退出当前服务器而不启动新服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:41:31.700

制作另一个批处理脚本

```
taskkill /F /IM java.exe 
```

这肯定会做到。

以编程方式： -

```
public static void restart() {
    closeServices();
    System.gc();
    try {
        Runtime.getRuntime().exec("taskkill /F /IM java.exe");
        System.exit(0);
    } catch (Throwable e) {
        Logger.handle(e);
    }    
} 
```

# java - 当测试在完全相同的语句处崩溃时，为什么调用堆栈不同？

> ID：12046114
> 
> 赞同：2
> 
> 时间：2012-08-20T22:29:22.243
> 
> 标签：java, reflection, junit

对于一个研究项目，我试图弄清楚单元测试（用 JUnit 编写）在不同的上下文中执行时是否表现不同。为此，我做了两件事：首先，我使用自定义 JUnit Runner 运行程序的整个测试套件，然后使用相同的自定义 JUnit runner 运行单个测试（为什么这有意义并不重要，只需接受它现在）。当测试失败时，我会记录 JUnit 报告的整个异常堆栈跟踪，然后比较两次运行之间的堆栈跟踪。

这样做，我偶然发现了一些我无法解释的奇怪东西。以下是以这种方式记录的两个堆栈跟踪的两个摘录。

运行整个测试套件时记录的堆栈跟踪：

```
org.fest.swing.edt.GuiActionRunner.resultOf(GuiActionRunner.java:126)
org.fest.swing.edt.GuiActionRunner.execute(GuiActionRunner.java:73)
net.sourceforge.squirrel_sql.fw.datasetviewer.cellcomponent.AbstractNumericDataTypeUITest.constructTestFrameInEDT(AbstractNumericDataTypeUITest.java:98)
net.sourceforge.squirrel_sql.fw.datasetviewer.cellcomponent.AbstractNumericDataTypeUITest.setUp(AbstractNumericDataTypeUITest.java:81)
sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source) - sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:616)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) 
```

运行单个测试时记录的堆栈跟踪：

```
org.fest.swing.edt.GuiActionRunner.resultOf(GuiActionRunner.java:126)
org.fest.swing.edt.GuiActionRunner.execute(GuiActionRunner.java:73)
net.sourceforge.squirrel_sql.fw.datasetviewer.cellcomponent.AbstractNumericDataTypeUITest.constructTestFrameInEDT(AbstractNumericDataTypeUITest.java:98)
net.sourceforge.squirrel_sql.fw.datasetviewer.cellcomponent.AbstractNumericDataTypeUITest.setUp(AbstractNumericDataTypeUITest.java:81)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:616)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) 
```

两个堆栈跟踪都显示了崩溃前的最后几个条目，从最后一个公共语句开始。显然，在 JDK/VM 的反射实现中的某处，这两种情况的行为有所不同。

**我的问题是为什么？**

我推测这与早期反射调用中的 VM 缓存内容有关，但我真的不知道。了解这一点很重要，因为我必须弄清楚*每次*运行单个测试时是否会发生这种情况（因此我可以忽略它），或者这是否与我正在运行的特定测试有关。

我知道这是相当模糊的，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:02:32.783

这是因为 Sun/Oracle JVM（其他我不知道）优化了反射调用。从 1.4 开始，JVM 生成字节码以将反射调用桥接到被调用的方法。因为并非所有事情在编译时都是已知的，所以必须在运行时完成。

[MethodAccessorGenerator](http://hg.openjdk.java.net/jdk6/jdk6/jdk/raw-file/2d585507a41b/src/share/classes/sun/reflect/MethodAccessorGenerator.java)类生成`GeneratedMethodAccessor1`

我从 NativeMethodAccessorImpl 的评论中发现的一个提示：

`Used only for the first few invocations of a Method; afterward, switches to bytecode-based implementation`

您是否在一个 Java VM 的生命周期中运行该套件和单个测试？

# node.js - API错误代码：100在nodejitsu中使用passport-facebook

> ID：12046122
> 
> 赞同：0
> 
> 时间：2012-08-20T22:30:17.010
> 
> 标签：node.js, facebook, passport.js, nodejitsu

过去几周我一直在开发这个应用程序，它使用基于[passport-facebook](https://github.com/jaredhanson/passport-facebook/)的登录系统，在我决定在 nodejitsu 上测试之前，一切都在我的开发计算机上运行良好。

我得到的错误是：

*   API 错误代码：100 API 错误
*   说明：无效参数错误
*   消息：redirect_uri URL 格式不正确

redirect_uri 是：[https ://www.facebook.com/dialog/oauth?display=popup&response_type=code&redirect_uri=http%3A%2F%2Ftookie_beta.jit.su%2Fauth%2Ffacebook%2Fcallback&scope=email%2Cuser_website&client_id=399936936740982&type=web_server](https://www.facebook.com/dialog/oauth?display=popup&response_type=code&redirect_uri=http%3A%2F%2Ftookie_beta.jit.su%2Fauth%2Ffacebook%2Fcallback&scope=email%2Cuser_website&client_id=399936936740982&type=web_server)

这对我来说看起来不错，所以我有点迷路了。

这是我在本地机器上使用的配置：

![](../Images/2065667ac5dcfee35057547d18ba0d1e.png)

这是我现在的配置：

![](../Images/45d17bf85eef889b8a72a081968f1559.png)

有谁知道发生了什么，或者我在这里错过了什么？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:50:48.430

我认为您的站点 URL 是错误的。它不应该指向[http://your-subdomain.jit.su](http://your-subdomain.jit.su)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T11:43:09.973

nodejitsu 被 GoDaddy 收购后，它没有放弃它的服务吗 :(

链接：[https ://blog.nodejitsu.com/nodejitsu-joins-godaddy/](https://blog.nodejitsu.com/nodejitsu-joins-godaddy/)

# php - 解析具有未知数量字段的表单

> ID：12046124
> 
> 赞同：4
> 
> 时间：2012-08-20T22:30:27.953
> 
> 标签：php, forms, post

我正在开发一个邀请系统，用户可以邀请一个或多个人成为他们帐户的协调员。为了允许用户一次邀请多个人，我使用 mootools 在用户单击加号时创建另一行字段。在下面的示例中，我将仅使用两行，但如果他们愿意，他们可以邀请更多。

HTML

```
<table>
    <thead>
        <tr>
            <td>First Name</td>
            <td>Last Name</td>
            <td>Email Address</td>
            <td>Invites</td>
        </tr>
    </thead>
    <tbody id="coords">
        <tr id="row-1">
            <td id="1-1"><input type="text" name="fname-1"></td>
            <td id="1-2"><input type="text" name="lname-1"></td>
            <td id="1-3"><input type="text" name="email-1"></td>
            <td id="1-4"><input type="text" name="invites-1"></td>
            <td id="1-5"><span id="minus-1" class="minus">( - )</span></td>
        </tr>
        <tr id="row-2">
            <td id="2-1"><input type="text" name="fname-2"></td>
            <td id="2-2"><input type="text" name="lname-2"></td>
            <td id="2-3"><input type="text" name="email-2"></td>
            <td id="2-4"><input type="text" name="invites-2"></td>
            <td id="2-5"><span id="plus-2" class="plus">( + )</span></td>
        </tr>
    </tbody>
</table> 
```

$_POST 看起来像这样

```
Array
(
    [fname-1] => David
    [lname-1] => Last
    [email-1] => email address
    [invites-1] => 15
    [fname-2] => Shirley
    [lname-2] => Last
    [email-2] => other email
    [invites-2] => 10
    [action] => invite
) 
```

PHP解析是这样的

```
if (isset($_POST['action'])) {
    $_SESSION['inviteCoordinators'] = $_POST;
    $newCoordinators = array();

    //loop through all fields
    while(list($key,$value) = each($_SESSION['inviteCoordinators'])) {
        if($key != 'action') {
            list($field, $user) = explode("-",$key);
            $newCoordinators[$user] = array (
                $field => $value
            );
        }
    }
} 
```

我期待 $newCoordinators 看起来像这样

```
Array
(
    [1] => Array
           (
               [fname] => David
               [lname] => Last
               [email] => email address
               [invites => 15
           )
    [2] => Array
           (
               [fname] => Shirley
               [lname] => Last
               [email] => other email
               [invites => 10
           ) 
```

但我得到的只是 [1][invites] => 15 和 [2][invites] => 10。我假设我只看到邀请，因为其他人被覆盖但我不能为什么会这样。我的解析有什么问题？或者，我应该怎么做？

旁注，唯一必填字段是电子邮件地址。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T22:46:57.090

为什么不直接使用数组命名您的 html 表单元素？您可以使表单类似于：

```
<table>
    <thead>
        <tr>
            <td>First Name</td>
            <td>Last Name</td>
            <td>Email Address</td>
            <td>Invites</td>
        </tr>
    </thead>
    <tbody id="coords">
        <tr id="row-1">
            <td id="1-1"><input type="text" name="invites[1][fname]"></td>
            <td id="1-2"><input type="text" name="invites[1][lname]"></td>
            <td id="1-3"><input type="text" name="invites[1][email]"></td>
            <td id="1-4"><input type="text" name="invites[1][invites]"></td>
            <td id="1-5"><span id="minus-1" class="minus">( - )</span></td>
        </tr>
        <tr id="row-2">
            <td id="1-1"><input type="text" name="invites[2][fname]"></td>
            <td id="1-2"><input type="text" name="invites[2][lname]"></td>
            <td id="1-3"><input type="text" name="invites[2][email]"></td>
            <td id="1-4"><input type="text" name="invites[2][invites]"></td>
            <td id="2-5"><span id="plus-2" class="plus">( + )</span></td>
        </tr>
    </tbody>
</table> 
```

你会得到你的帖子数据已经格式化为：

```
Array
(
    [invites] => Array
        (
            [1] => Array
                (
                    [fname] => first1
                    [lname] => last1
                    [email] => test@test.com
                    [invites] => 2
                )

            [2] => Array
                (
                    [fname] => first2
                    [lname] => last2
                    [email] => test2@test.com
                    [invites] => 5
                )

        )

) 
```

然后你可以做类似的事情：

```
foreach($_POST['invites'] as $invite){
    //process invite
    echo "{$invite['fname']} {$invite['lname']} was invited. <br />";
} 
```

# javascript - addEvent() 传奇之后的当前最佳实践是什么？

> ID：12046128
> 
> 赞同：2
> 
> 时间：2012-08-20T22:30:57.737
> 
> 标签：javascript, standards, ecmascript-5

似乎有无穷无尽的关于`addEvent`Javascript 实现的写作和评论线程，可以追溯到很多年前。

对于最通用、最简单的跨浏览器实现，我*今天*应该使用什么？最佳做法是什么？有没有即将出现的标准？`currentTime.getFullYear()``addEvent`

google 的[base2](https://code.google.com/p/base2/)库是解决这个问题的灵丹妙药吗？

背景：
[跨浏览器 DOM 脚本：事件处理程序](http://www.scottandrew.com/weblog/articles/cbs-events)
[addEvent() 被认为是有害的](http://www.quirksmode.org/blog/archives/2005/08/addevent_consid.html)
[addEvent() 重新编码比赛](http://www.quirksmode.org/blog/archives/2005/09/addevent_recodi.html)
[灵活的 Javascript 事件](http://ejohn.org/projects/flexible-javascript-events/)
[John Resig 的 addEvent](http://my.opera.com/hallvors/blog/2007/03/28/a-problem-with-john-resigs-addevent)
[addEvent() 的一个问题 – 我的解决方案](http://dean.edwards.name/weblog/2005/10/add-event/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:41:46.957

IE9+ 全部支持`window.addEventListener`见[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

要支持其他所有人，您必须花一些心思来支持它和`window.attachEvent`.

请参阅：[https ://stackoverflow.com/a/6925427/496735](https://stackoverflow.com/a/6925427/496735)

# javascript - 动态创建角度视图

> ID：12046129
> 
> 赞同：16
> 
> 时间：2012-08-20T22:30:59.483
> 
> 标签：javascript, jquery, html, angularjs

我正在使用 awesomium 制作游戏中的 UI，在某些时候游戏会加载并执行一段 javascript，用于创建任意新的 UI 元素。例如

```
jQuery(document.body).append('<span class="game-status-alert">You Lose!</span>'); 
```

这很好用，当我想创建一些更高级的 UI 元素，特别是使用 Angular 时，问题就来了。例如：

```
function ChatBoxControl($scope) { /* Stuff */ }

jQuery(document.body).append(
    '<div ng-controller="ChatBoxControl"><div ng-repeat="line in chat"><span>{{line}}</span></div></div>'
); 
```

毫不奇怪，这不会创建新的角度视图。它只是将该 html 添加到文档中，并且从不绑定到 ChatBoxControl。

我怎样才能在这里实现我想要做的事情？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-21T06:30:53.107

您应该[$compile](http://docs.angularjs.org/api/ng.$compile)动态添加角度内容。就像是：

```
jQuery(document.body).append(
    $compile(  
        '<div ng-controller="ChatBoxControl"><div ng-repeat="line in chat"><span>{{line}}</span></div></div>'
    )(scope)
); 
```

您可以使用以下内容获得的任何元素的范围：

```
var scope = angular.element('#dynamicContent').scope(); 
```

您还应该获得可以注入其他控制器的 $compile 。

另请参阅：[AngularJS + JQuery：如何在 angularjs 中获取动态内容](https://stackoverflow.com/questions/11771513/angularjs-jquery-how-to-get-dynamic-content-working-in-angularjs)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T00:31:49.190

您可能希望将 ng-include 与 ng-repeat 结合使用。这是一个简单的例子：[http ://plunker.no.de/edit/IxB3wO?live=preview](http://plunker.no.de/edit/IxB3wO?live=preview)

```
 <div ng-repeat="dom in domList" ng-include="dom"></div> 
```

父 $scope 将保留加载到视图中的部分列表。并且 ng-repeat + ng-include 将根据列表进行迭代并显示部分。

在合适的时机，您可以将部分附加到 dom 列表中。例如

```
$scope.domList.push("chatbox.html"); 
```

（顺便说一句，将 DOM 操作放入控制器不是角度方式。）

# windows - 来自以前称为 Metro 风格的应用程序的 Windows 8 日历自动化

> ID：12046131
> 
> 赞同：1
> 
> 时间：2012-08-20T22:31:14.100
> 
> 标签：windows, winrt-xaml

我是以前称为 Metro 风格的 Windows 8 新手，我想用约会更新 Windows 8 日历，有哪些 dll 可用？

# c++ - C++ express下搭建POCO的具体说明

> ID：12046133
> 
> 赞同：0
> 
> 时间：2012-08-20T22:31:21.663
> 
> 标签：c++, windows, visual-studio-2010, visual-studio, poco-libraries

在 stackoverflow 周围搜索，我发现 POCO 库构建文件与 Visual Studio Express 不兼容，它需要`devenv.exe`. 一些答案说要替换`devenv`为`vcexpress`buildwin.cmd。没有人提供具体的说明。这是 buildwin.cmd：

```
@echo off
setlocal

rem
rem buildwin.cmd
rem
rem POCO C++ Libraries command-line build script 
rem for MS Visual Studio 2003 to 2010
rem
rem $Id: //poco/1.4/dist/buildwin.cmd#2 $
rem
rem Copyright (c) 2006-2010 by Applied Informatics Software Engineering GmbH
rem and Contributors.
rem
rem Original version by Aleksandar Fabijanic.
rem Modified by Guenter Obiltschnig.
rem
rem Usage:
rem ------
rem buildwin VS_VERSION [ACTION] [LINKMODE] [CONFIG] [PLATFORM] [SAMPLES] [DEVENV]
rem VS_VERSION: 71|80|90|100
rem ACTION:     build|rebuild|clean
rem LINKMODE:   static_mt|static_md|shared|all
rem CONFIG:     release|debug|both
rem PLATFORM:   Win32|x64|WinCE
rem SAMPLES:    samples|nosamples
rem DEVENV:     devenv|vcexpress
rem
rem VS_VERSION is required argument. Default is build all.

if not defined VCINSTALLDIR (
echo Error: No Visual C++ environment found.
echo Please run this script from a Visual Studio Command Prompt
echo or run "%%VSnnCOMNTOOLS%%\vcvars32.bat" first.
goto :EOF)

rem Change OPENSSL_DIR to match your setup
set OPENSSL_DIR=c:\OpenSSL
set OPENSSL_INCLUDE=%OPENSSL_DIR%\include
set OPENSSL_LIB=%OPENSSL_DIR%\lib\VC
set INCLUDE=%INCLUDE%;%OPENSSL_INCLUDE%
set LIB=%LIB%;%OPENSSL_LIB%

set POCO_BASE=%CD%
set PATH=%POCO_BASE%\bin;%PATH%

rem VS version {71|80|90|100}
if "%1"=="" goto usage
set VS_VERSION=vs%1

if "%7"=="" goto use_devenv
set BUILD_TOOL="%7"
goto use_custom
:use_devenv
set BUILD_TOOL=vcexpress
:use_custom

rem Action [build|rebuild|clean]
set ACTION=%2
if not "%ACTION%"=="build" (
if not "%ACTION%"=="rebuild" (
if not "%ACTION%"=="" (
if not "%ACTION%"=="clean" goto usage)))

if "%ACTION%"=="" (set ACTION="build")

rem Link mode [static|shared|both]
set LINK_MODE=%3
if not "%LINK_MODE%"=="static_mt" (
if not "%LINK_MODE%"=="static_md" (
if not "%LINK_MODE%"=="shared" (
if not "%LINK_MODE%"=="" (
if not "%LINK_MODE%"=="all" goto usage))))

rem Configuration [release|debug|both]
set CONFIGURATION=%4
if not "%CONFIGURATION%"=="release" (
if not "%CONFIGURATION%"=="debug" (
if not "%CONFIGURATION%"=="" (
if not "%CONFIGURATION%"=="both" goto usage)))

rem Platform [Win32|x64|WinCE]
set PLATFORM=%5%
if not "%PLATFORM%"=="" (
if not "%PLATFORM%"=="Win32" (
if not "%PLATFORM%"=="x64" (
if not "%PLATFORM%"=="WinCE" goto usage)))

if "%PLATFORM%"=="" (set PLATFORM_SUFFIX=) else (
if "%PLATFORM%"=="Win32" (set PLATFORM_SUFFIX=) else (
if "%PLATFORM%"=="x64" (set PLATFORM_SUFFIX=_x64) else (
if "%PLATFORM%"=="WinCE" (set PLATFORM_SUFFIX=_CE))))

rem Samples [samples|nosamples]
set SAMPLES=%6
if "%SAMPLES%"=="" (set SAMPLES=samples)

set DEBUG_SHARED=0
set RELEASE_SHARED=0
set DEBUG_STATIC_MT=0
set RELEASE_STATIC_MT=0
set DEBUG_STATIC_MD=0
set RELEASE_STATIC_MD=0

if "%LINK_MODE%"=="shared" (
if "%CONFIGURATION%"=="release" (set RELEASE_SHARED=1) else (
if "%CONFIGURATION%"=="both" (set RELEASE_SHARED=1) else (
if "%CONFIGURATION%"=="" (set RELEASE_SHARED=1))))

if "%LINK_MODE%"=="shared" (
if "%CONFIGURATION%"=="debug" (set DEBUG_SHARED=1) else (
if "%CONFIGURATION%"=="both" (set DEBUG_SHARED=1) else (
if "%CONFIGURATION%"=="" (set DEBUG_SHARED=1))))

if "%LINK_MODE%"=="static_mt" (
if "%CONFIGURATION%"=="release" (set RELEASE_STATIC_MT=1) else (
if "%CONFIGURATION%"=="both" (set RELEASE_STATIC_MT=1) else (
if "%CONFIGURATION%"=="" (set RELEASE_STATIC_MT=1))))

if "%LINK_MODE%"=="static_md" (
if "%CONFIGURATION%"=="release" (set RELEASE_STATIC_MD=1) else (
if "%CONFIGURATION%"=="both" (set RELEASE_STATIC_MD=1) else (
if "%CONFIGURATION%"=="" (set RELEASE_STATIC_MD=1))))

if "%LINK_MODE%"=="static_mt" (
if "%CONFIGURATION%"=="debug" (set DEBUG_STATIC_MT=1) else (
if "%CONFIGURATION%"=="both" (set DEBUG_STATIC_MT=1) else (
if "%CONFIGURATION%"=="" (set DEBUG_STATIC_MT=1))))

if "%LINK_MODE%"=="static_md" (
if "%CONFIGURATION%"=="debug" (set DEBUG_STATIC_MD=1) else (
if "%CONFIGURATION%"=="both" (set DEBUG_STATIC_MD=1) else (
if "%CONFIGURATION%"=="" (set DEBUG_STATIC_MD=1))))

if "%LINK_MODE%"=="all" (
if "%CONFIGURATION%"=="debug" (
set DEBUG_STATIC_MT=1
set DEBUG_STATIC_MD=1
set DEBUG_SHARED=1) else (
if "%CONFIGURATION%"=="release" (
set RELEASE_STATIC_MT=1
set RELEASE_STATIC_MD=1
set RELEASE_SHARED=1) else (
if "%CONFIGURATION%"=="both" (
set DEBUG_STATIC_MT=1
set DEBUG_STATIC_MD=1
set DEBUG_SHARED=1
set RELEASE_STATIC_MT=1
set RELEASE_STATIC_MD=1
set RELEASE_SHARED=1) else (
if "%CONFIGURATION%"=="" (
set DEBUG_STATIC_MT=1
set DEBUG_STATIC_MD=1
set DEBUG_SHARED=1
set RELEASE_STATIC_MT=1
set RELEASE_STATIC_MD=1
set RELEASE_SHARED=1)))))

if "%LINK_MODE%"=="" (
if "%CONFIGURATION%"=="debug" (
set DEBUG_STATIC_MT=1
set DEBUG_STATIC_MD=1
set DEBUG_SHARED=1) else (
if "%CONFIGURATION%"=="release" (
set RELEASE_STATIC_MT=1
set RELEASE_STATIC_MD=1
set RELEASE_SHARED=1) else (
if "%CONFIGURATION%"=="both" (
set DEBUG_STATIC_MT=1
set DEBUG_STATIC_MD=1
set DEBUG_SHARED=1
set RELEASE_STATIC_MT=1
set RELEASE_STATIC_MD=1
set RELEASE_SHARED=1) else (
if "%CONFIGURATION%"=="" (
set DEBUG_STATIC_MT=1
set DEBUG_STATIC_MD=1
set DEBUG_SHARED=1
set RELEASE_STATIC_MT=1
set RELEASE_STATIC_MD=1
set RELEASE_SHARED=1)))))

echo.
echo.
echo ########################################################################
echo ####
echo #### STARTING VISUAL STUDIO BUILD (%VS_VERSION%, %PLATFORM%)
echo ####
echo ########################################################################
echo.
echo.
echo The following configurations will be built:

if %DEBUG_SHARED%==1      (echo debug_shared)
if %RELEASE_SHARED%==1    (echo release_shared)
if %DEBUG_STATIC_MT%==1   (echo debug_static_mt)
if %DEBUG_STATIC_MD%==1   (echo debug_static_md)
if %RELEASE_STATIC_MT%==1 (echo release_static_mt)
if %RELEASE_STATIC_MD%==1 (echo release_static_md)

rem build for up to 4 levels deep
for /f %%G in ('findstr /R "." components') do (
 if exist %%G (
  cd %%G
  for /f "tokens=1,2,3,4 delims=/" %%Q in ("%%G") do (
   if exist %%Q%PLATFORM_SUFFIX%_%VS_VERSION%.sln (
    echo.
    echo.
    echo ########################################################################
    echo ####
    echo #### Building %%G
    echo ####
    echo ########################################################################
    echo.
    if %DEBUG_SHARED%==1      (%BUILD_TOOL% /useenv /%ACTION% debug_shared %%Q%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_SHARED%==1    (%BUILD_TOOL% /useenv /%ACTION% release_shared %%Q%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %DEBUG_STATIC_MT%==1   (%BUILD_TOOL% /useenv /%ACTION% debug_static_mt %%Q%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_STATIC_MT%==1 (%BUILD_TOOL% /useenv /%ACTION% release_static_mt %%Q%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %DEBUG_STATIC_MD%==1   (%BUILD_TOOL% /useenv /%ACTION% debug_static_md %%Q%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_STATIC_MD%==1 (%BUILD_TOOL% /useenv /%ACTION% release_static_md %%Q%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
   )

   if exist %%R%PLATFORM_SUFFIX%_%VS_VERSION%.sln (
    echo.
    echo.
    echo ########################################################################
    echo ####
    echo #### Building %%G
    echo ####
    echo ########################################################################
    echo.
    if %DEBUG_SHARED%==1      (%BUILD_TOOL% /useenv /%ACTION% debug_shared %%R%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_SHARED%==1    (%BUILD_TOOL% /useenv /%ACTION% release_shared %%R%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %DEBUG_STATIC_MT%==1   (%BUILD_TOOL% /useenv /%ACTION% debug_static_mt %%R%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_STATIC_MT%==1 (%BUILD_TOOL% /useenv /%ACTION% release_static_mt %%R%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %DEBUG_STATIC_MD%==1   (%BUILD_TOOL% /useenv /%ACTION% debug_static_md %%R%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_STATIC_MD%==1 (%BUILD_TOOL% /useenv /%ACTION% release_static_md %%R%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
   )

   if exist %%S%PLATFORM_SUFFIX%_%VS_VERSION%.sln (
    echo.
    echo.
    echo ########################################################################
    echo ####
    echo #### Building %%G
    echo ####
    echo ########################################################################
    echo.
    if %DEBUG_SHARED%==1      (%BUILD_TOOL% /useenv /%ACTION% debug_shared %%S%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_SHARED%==1    (%BUILD_TOOL% /useenv /%ACTION% release_shared %%S%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %DEBUG_STATIC_MT%==1   (%BUILD_TOOL% /useenv /%ACTION% debug_static_mt %%S%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_STATIC_MT%==1 (%BUILD_TOOL% /useenv /%ACTION% release_static_mt %%S%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %DEBUG_STATIC_MD%==1   (%BUILD_TOOL% /useenv /%ACTION% debug_static_md %%S%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_STATIC_MD%==1 (%BUILD_TOOL% /useenv /%ACTION% release_static_md %%S%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
   )

   if exist %%T%PLATFORM_SUFFIX%_%VS_VERSION%.sln (
    echo.
    echo.
    echo ########################################################################
    echo ####
    echo #### Building %%G
    echo ####
    echo ########################################################################
    echo.
    if %DEBUG_SHARED%==1      (%BUILD_TOOL% /useenv /%ACTION% debug_shared %%T%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_SHARED%==1    (%BUILD_TOOL% /useenv /%ACTION% release_shared %%T%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %DEBUG_STATIC_MT%==1   (%BUILD_TOOL% /useenv /%ACTION% debug_static_mt %%T%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_STATIC_MT%==1 (%BUILD_TOOL% /useenv /%ACTION% release_static_mt %%T%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %DEBUG_STATIC_MD%==1   (%BUILD_TOOL% /useenv /%ACTION% debug_static_md %%T%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
    if %RELEASE_STATIC_MD%==1 (%BUILD_TOOL% /useenv /%ACTION% release_static_md %%T%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
   )
  )
  cd %POCO_BASE%
 )
)

if "%SAMPLES%"=="no" goto :EOF

rem root level component samples
for /f %%G in ('findstr /R "." components') do (
 if exist %%G\samples\samples%PLATFORM_SUFFIX%_%VS_VERSION%.sln (
  cd %%G\samples
    echo.
    echo.
    echo ########################################################################
    echo ####
    echo #### Building %%G/samples
    echo ####
    echo ########################################################################
    echo.
  if %DEBUG_SHARED%==1      (%BUILD_TOOL% /useenv /%ACTION% debug_shared samples%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
  if %RELEASE_SHARED%==1    (%BUILD_TOOL% /useenv /%ACTION% release_shared samples%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
  if %DEBUG_STATIC_MT%==1   (%BUILD_TOOL% /useenv /%ACTION% debug_static_mt samples%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
  if %RELEASE_STATIC_MT%==1 (%BUILD_TOOL% /useenv /%ACTION% release_static_mt samples%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
  if %DEBUG_STATIC_MD%==1   (%BUILD_TOOL% /useenv /%ACTION% debug_static_md samples%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
  if %RELEASE_STATIC_MD%==1 (%BUILD_TOOL% /useenv /%ACTION% release_static_md samples%PLATFORM_SUFFIX%_%VS_VERSION%.sln && echo. && echo. && echo.)
  cd %POCO_BASE%
 )
)

goto :EOF

:usage
echo Usage:
echo ------
echo buildwin VS_VERSION [ACTION] [LINKMODE] [CONFIGURATION] [PLATFORM] [SAMPLES] [DEVENV]
echo VS_VERSION: "71|80|90|100"
echo ACTION:     "build|rebuild|clean"
echo LINKMODE:   "static_mt|static_md|shared|all"
echo CONFIG:     "release|debug|both"
echo PLATFORM:   "Win32|x64|WinCE"
echo SAMPLES:    "samples|nosamples"
echo DEVENV:     "devenv|vcexpress"
echo.
echo Default is build all.
endlocal 
```

有谁知道我应该更换哪个 Devenv？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:58:19.133

首先看看以下内容：-

> echo 用法：
> .......
> **echo DEVENV：“devenv|vcexpress”**

```
if "%7"=="" goto use_devenv
set BUILD_TOOL="%7"
goto use_custom
:use_devenv
set BUILD_TOOL=vcexpress
:use_custom 
```

现在您可以看到使用脚本清楚地提到 BUILD TOOL 应该是 vcexpress 或 devenv。

此批次已配置为使用 vcexpress 版本开始构建。因此在使用前您无需担心。

# ios - 连接 IBOutlet Xcode 4.4

> ID：12046134
> 
> 赞同：0
> 
> 时间：2012-08-20T22:31:23.413
> 
> 标签：ios, xcode4.4

我刚刚升级到 Xcode 4.4，因为以前版本的 Xcode 不允许我为 iOS>5.0 开发/测试应用程序

总之，我开始创建一个应用程序——一个标签栏控制器应用程序。在第一个视图中，我创建了一个按钮（一个 IBOutlet），但现在我似乎无法在情节提要中的场景和视图控制器之间建立连接。

当我控制单击情节提要中的视图控制器时，在插座下我只能看到 searchDisplayViewController 和 View。我看不到我刚刚创建的网点。

谢谢

**编辑**- 如果视图未连接到选项卡栏项目中的场景，则它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:55:53.333

我自己也遇到了这个问题：InterfaceBuilder 现在似乎特别关注 IBOutlets 的放置位置，所以你不希望它们像以前那样在你的类的 .h 中，而是在你的 .m 中。如果反过来，IB 将不会显示要连接的出口。

```
@interface MyViewController ()
@property (strong, nonatomic) IBOutlet UIScrollView *scrollview;
@property (strong, nonatomic) IBOutlet UIImageView *photo;
@property (strong, nonatomic) IBOutlet UITextField *caption;
@end

@implementation MyViewController
@synthesize scrollview, photo, caption;
...
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:34:37.343

您是否尝试过 ctrl 从按钮拖动到视图控制器？也尝试按 ctrl 从按钮拖动到视图控制器的头文件。

另一种可能的解决方案是选择按钮，打开右侧面板的最后一个选项卡并在那里查找连接。

# java - 洗牌（SPOJ / Interviewstreet）

> ID：12046138
> 
> 赞同：6
> 
> 时间：2012-08-20T22:31:48.337
> 
> 标签：java, algorithm, shuffle

之前有人问过这个问题，但是没有一个得到明确的回答，我尝试编译我在这里找到的所有信息。如有必要，请随意合并/移动到另一个 stackexchange 站点。

以下是我发现的与此相关的问题：

*   [SPOJ:洗牌](https://stackoverflow.com/questions/9663079/spojcard-shuffling?rq=1)
*   [洗牌 [SPOJ]](https://math.stackexchange.com/questions/119214/card-shuffling-spoj)

该问题最初是作为 Interviewstreet Code Sprint 发布的，但现在它被列为[实践问题](https://www.interviewstreet.com/challenges/dashboard/#problem/4e904ba8b17ed)。它也被[移植到 SPOJ](http://www.spoj.pl/problems/CODESPTC/)。

这是问题陈述：

> 这是洗牌 N 张牌的算法：
> 
> 1) 将牌分成 K 个相等的牌堆。
> 
> 2）最底的N/K张牌同顺序属于1堆（所以初始堆的底牌就是1堆的底）。
> 
> 3）从底部开始的下 N / K 张牌属于第 2 堆，依此类推。
> 
> 4) 现在洗好的牌堆的顶牌是1堆的顶牌。下一张牌是2堆顶的牌，...，洗好的牌堆的第K张牌是K堆顶>牌。那么第（K + 1）张牌是现在在第 1 堆顶部的牌，第（K + 2）张是现在在第 2 堆顶部的牌，依此类推。
> 
> 例如，如果 N = 6 且 K = 3，则一副牌“ABCDEF”（从上到下）洗牌一次时的顺序将变为“ECAFDB”。
> 
> 给定 N 和 K，在堆恢复到其原始顺序之后需要的最少洗牌次数是多少？
> 
> 输入：第一行包含测试用例 T 的数量。接下来的 T 行包含两个整数，每个整数 N 和 K。
> 
> 输出：输出 T 行，每个测试用例包含所需的最小洗牌次数。如果套牌永远不会恢复到原来的顺序，则输出 -1。
> 
> 约束：
> 
> *   K 将是 N 的一个因子。
> *   T <= 10000
> *   **2 <= K <= N <= 10^9**

* * *

# 剧透警报 - 如果您想自己解决，请不要阅读下文。

问题可以翻译为：

> **找出需要执行 K 路（完美）[洗牌](http://en.wikipedia.org/wiki/In_shuffle)的次数，以将一副 N 牌恢复到其初始顺序。**

我采取了两种方法来解决这个问题。想到的第一个方法是：

*   找到一个公式，给定初始顺序中的位置将生成卡片的下一个位置
*   使用公式确定从第一堆（大小为 n / k）中的每张牌返回其初始位置所需的洗牌次数
*   返回之前确定的随机数的最小公倍数

该解决方案的复杂度为 O(n / k + max_number_of_suhffles)。[这是实际的实现](https://github.com/cimi/problems/blob/master/interviewstreet/java/src/main/java/com/interviewstreet/ShuffleLCM.java)。这样做的问题是它超过了最大时间，所以我开始寻找一个公式，可以让我在接近恒定的时间内得到这个数字。

我在这里可以优化的最多（例如，使用一些映射来缓存相同排列循环中的计算值等）是使其通过 interviewstreet 上的 3/10 测试。

* * *

我找到[了这个实现](https://gist.github.com/1285133)，它假设返回初始状态所需的洗牌次数是K 相对于 N + 1的[乘法顺序。来自 wiki：](http://en.wikipedia.org/wiki/Multiplicative_order)

```
As a consequence of Lagrange's theorem, ordn(a) always divides φ(n). 
```

φ(n) 是[欧拉函数](http://en.wikipedia.org/wiki/Euler_totient_function)， ordn 是[群阶](http://en.wikipedia.org/wiki/Order_%28group_theory%29)——我们正在寻找的。我发现[这篇论文](http://scimath.unl.edu/MIM/files/MATExamFiles/Hastings_FinalMEXP.pdf)使用 φ 来计算 shuffle 的数量，但它只适用于 2-way in-shuffle，而不是 k-way。

以下是此实施的步骤：

*   预先计算出 < 100 000 的素数列表
*   `φ(N+1)`从它的主要因素计算。
*   `φ(N + 1)`通过以所有可能的方式组合其主要因素来确定所有的因素。
*   依次尝试每个因素，得到最小的一个，`x`，验证`k ^ x % N + 1 = 1`

这个实现也[发布在 GitHub 上](https://github.com/cimi/problems/blob/master/interviewstreet/java/src/main/java/com/interviewstreet/ShuffleMultOrder.java)。

这运行得非常快，但自动评分器在 SPOJ 和 Interviewstreet 上的 10 次测试中有 9 次给了我一个“错误答案”分类。

我尝试比较两个实现的输出，但是对于我输入的测试用例（已知结果和随机），这两个实现总是输出相同的东西。这很奇怪，因为我很确定第一个算法是正确的，我认为第二个算法也应该是正确的。

“错误答案”分类可能来自代码中的运行时错误，但没有任何可能的原因跳出来。

我没有考虑到没有数字洗牌可以将牌组恢复到初始状态的情况——我的理解是这是不可能的。有限数量的完美洗牌最终将恢复初始排序，即使洗牌的数量可能非常高。

如果您花时间阅读本文，谢谢。:) 我很好奇这个问题，我想解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:20:03.057

这是我在纸上进行了一些观察后得出的结论。

```
class CardShuffle {
    private long k;
    private long n;
    private long kn;
    private long kn2;

    public CardShuffle(long k, long n) {
            //I omitted some checks done here
        this.k = k;
        this.n = n;
        this.kn = k / n;
        this.kn2 = k - kn;
    }

    public long shuffle() {
        long count = 0L;
        long next = 0L;
        do {
               //this can be further optimized
           next = kn2 - kn * (next % n) + (next / n); 
           ++count;
        } while((next != 0L) && (count < k));
        if(count > k)
           return -1;
        return count;
    }
} 
```

结果是...

```
Testing 1000000 : 2
#ms: 3.121905
#ms: 1424.487191
#1: 9900 #2: 9900
Testing 1000000 : 5
#ms: 1.409955
#ms: 556.329366
#1: 2475 #2: 2475
Testing 1000000 : 10
#ms: 0.007823
#ms: 186.797204
#1: 12 #2: 12
Testing 1000000 : 20
#ms: 0.590298
#ms: 275.751527
#1: 4950 #2: 4950
Testing 1000000 : 25
#ms: 0.298642
#ms: 260.559372
#1: 2475 #2: 2475
Testing 1000000 : 40
#ms: 1.187581
#ms: 241.956729
#1: 9900 #2: 9900
Testing 1000000 : 50
#ms: 1.187581
#ms: 241.015548
#1: 9900 #2: 9900
Testing 9999999 : 41841
#ms: 14.499887
#ms: 1829.868042
#1: 125000 #2: 125000
Testing 9999999 : 3333333
#ms: 58.119398
#ms: 311.005728
#1: 500000 #2: 500000
Testing 9999999 : 13947
#ms: 52.704185
#ms: 2095.336418
#1: 500000 #2: 500000 
```

针对此输入进行测试...

```
10
1000000 2
1000000 5
1000000 10
1000000 20
1000000 25
1000000 40
1000000 50
9999999 41841
9999999 3333333
9999999 13947 
```

首先`#ms`是以毫秒为单位的时间，我的方法，第二是你的。 `#1`和`#2`分别是结果。

至于这个输入...

```
15
1000000000 2
1000000000 5
1000000000 10
1000000000 20
1000000000 25
1000000000 40
1000000000 50
1000000000 1000
1000000000 200000000
1000000000 250000000
1000000000 500000000
1000000000 50000000
999999999 1001001
999999999 37037037
999999999 333333333 
```

我的方法在

```
Testing 1000000000 : 2
#ms: 71.360466
#1: 525780
Testing 1000000000 : 5
#ms: 68.987259
#1: 525780
Testing 1000000000 : 10
#ms: 0.008381
#1: 18
Testing 1000000000 : 20
#ms: 75.608492
#1: 525780
Testing 1000000000 : 25
#ms: 31.843154
#1: 262890
Testing 1000000000 : 40
#ms: 33.014531
#1: 262890
Testing 1000000000 : 50
#ms: 84.27384
#1: 525780
Testing 1000000000 : 1000
#ms: 0.006705
#1: 6
Testing 1000000000 : 200000000
#ms: 53.991778
#1: 525780
Testing 1000000000 : 250000000
#ms: 43.765898
#1: 262890
Testing 1000000000 : 500000000
#ms: 54.457201
#1: 525780
Testing 1000000000 : 50000000
#ms: 68.080999
#1: 525780
Testing 999999999 : 1001001
#ms: 115.060154
#1: 1000000
Testing 999999999 : 37037037
#ms: 5783.539528
#1: 50000000
Testing 999999999 : 333333333
#ms: 5391.880532
#1: 50000000 
```

虽然您的第一个内存不足，但在我又旧又慢的笔记本电脑上。

我还没有验证这种方法，但在我看来它是有效的。您可以尝试查看它是否在某些输入上失败。我会很感激的。

如果您对我如何开发公式更感兴趣，请发表评论。

我也已经向*interviewstreet*提交了解决方案，但由于时间限制，它在第 4 次测试用例中失败了。

我很快就会尝试使用 ac 程序，并会在这里报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:35:23.810

Given N and K, work out what permutation that produces, and work out what it looks like in [http://en.wikipedia.org/wiki/Cycle_notation](http://en.wikipedia.org/wiki/Cycle_notation). In cycle notation, the permutation is a product of disjoint cycles, e.g. ABCDEF => ECAFDB is (AEDFBC) because A->E->D->F->B->C->A. If your permuation is a single cycle like this, the length of the cycle is the number of times you need to repeat it to get back to the same place. If the permuation is a product of multiple disjoint cycles such as (ABC)(DE)(F) the number of times you need to repeat is the [http://en.wikipedia.org/wiki/Least_common_multiple](http://en.wikipedia.org/wiki/Least_common_multiple) of the lengths of the individual cycles.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T14:22:48.420

```
#include <iostream>
using namespace std;
int main() 
{
    int t, m , n, c, p, k, pos, cases;

    cin>>cases;

    while(cases--)
    {
        cin>>t;
        cin>>k;

        p = t/k;
        pos = 1;
        c = 0;

        do
        {
            c++;
            m = (pos - 1)%p + 1;
            n = k - (pos - m)/p;
            pos = k*(m-1) + n;

        }while(pos!=1);

        cout<<c<<endl;

    }
    return 0;
} 
```

# css - 截断rails中的文本

> ID：12046139
> 
> 赞同：2
> 
> 时间：2012-08-20T22:31:50.860
> 
> 标签：css, ruby-on-rails

我在页面上显示了一些用户输入的文本，需要很好地截断以适应固定宽度。Rails 内置了一个很好的帮助器，用于截断字符串，并指定省略文本，如下所示：

```
truncate(post.title, :length=>50, :omission=>link_to("...",post)) 
```

或者我可以[像这样](http://deepubalan.com/blog/2010/11/27/text-overflow-css3-property-explained-pure-css-solution-to-get-ellipsis/)使用css，但这些都不是很令人满意。在某些文本被截断的情况下，我希望省略号链接到原始/全文，并且我希望截断相对于渲染时字符占用的实际空间起作用（不使用固定宽度字体），而不是相对于字符数。

所以。是否有对 css 版本的修复以使用任意 html 字符串作为截断文本？或者有没有办法让rails告诉字符串在截断时会占用多少空间？这似乎是人们遇到的一个问题，因为有一个用于截断文本的内置 Rails 助手，但是这些人都使用固定宽度的字体吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:33:21.927

在渲染之前，无法知道渲染的宽度。不同的浏览器/设备/字体可用性/设置会有所不同。

您唯一的解决方案是通过 javascript 计算宽度，然后修改标记、生成省略号链接等。

这里有几个答案中有许多相关的东西：[用 JavaScript 计算文本宽度](https://stackoverflow.com/questions/118241/calculate-text-width-with-javascript)

**更新**这个特定的答案甚至为你添加了一个……：[https ://stackoverflow.com/a/3140086/168143](https://stackoverflow.com/a/3140086/168143)

# c# - 应用程序在 fiddler ON 的情况下工作，在没有 fiddler 的情况下不能工作？

> ID：12046140
> 
> 赞同：3
> 
> 时间：2012-08-20T22:31:57.710
> 
> 标签：c#, .net, wcf, fiddler, silverlight-5.0

我有一个silverlight应用程序，它发出HTTPS请求，当我在fiddler ON的情况下跟踪应用程序时它工作正常，但是当我没有运行fiddler时它会抛出Remote server not found错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:01:16.590

我最近遇到了这个问题，在 Fiddler Options->HTTPS 中我检查了“忽略服务器证书错误”。取消选中，Fiddler 显示证书错误。

最后添加了这里提到的代码 [http://social.msdn.microsoft.com/Forums/en-US/ncl/thread/43a933b8-e2b1-40a7-ac23-9bf3fc14b1f0](http://social.msdn.microsoft.com/Forums/en-US/ncl/thread/43a933b8-e2b1-40a7-ac23-9bf3fc14b1f0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T23:21:15.787

我们遇到了这个问题，发现 .NET 应用在它们的 machine.config 中添加了一个全局代理覆盖。

在我们的例子中，它是 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config 文件夹中的 machine.config。

```
<!-- The following section is to force use of Fiddler for all applications, including those running in service accounts -->
    <!-- C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config\machine.config -->

<defaultProxy
    enabled = "true"
    useDefaultCredentials = "true">
    <proxy autoDetect="false" bypassonlocal="false" proxyaddress="http://127.0.0.1:8888" usesystemdefault="false" />
</defaultProxy> 
```

# jsf-2 - 响应来自 bean 的 f:ajax 事件的正确方法？

> ID：12046141
> 
> 赞同：1
> 
> 时间：2012-08-20T22:32:07.030
> 
> 标签：jsf-2, mojarra

我有一些从`<f:ajax />`标签调用的简单方法。我有时想发回错误或一些有用的信息。

到目前为止，为了发送错误，我一直在抛出异常并捕获`jsf.ajax.addOnError`javascript 调用来处理它们，但是我认为应该有更好的方法。我想我也可以设置 bean 属性，但这似乎有点麻烦。没有其他方法可以做到这一点吗？

我正在使用 JSF2/mojarra。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:49:01.363

查看 OmniFaces ajax 异常处理程序：http: [//balusc.blogspot.com/2012/03/full-ajax-exception-handler.html](http://balusc.blogspot.com/2012/03/full-ajax-exception-handler.html)

# facebook - 无需重新加载页面即可连接 Facebook

> ID：12046143
> 
> 赞同：1
> 
> 时间：2012-08-20T22:32:22.600
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

我正在编写一个依赖于通过 Facebook 登录的网络应用程序。这是我想要做的：

1.  当用户单击 Web 应用程序上的“与 Facebook 连接”按钮时，另一个选项卡将在他的浏览器中打开，其中包含允许他验证应用程序的 Facebook 登录链接。

2.  用户验证应用程序后，登录选项卡将关闭，用户将位于原始 Web 应用程序页面

3.  Web 应用程序将检测到用户已与 Facebook 建立连接，并将用户登录。

现在，我能想到的唯一解决方案是让网络应用程序不断查询 Facebook 以查看用户是否已登录，有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:17:03.970

将登录与[Facebook Javascript SDK](http://developers.facebook.com/docs/reference/javascript/)集成。（而不是 PHP sdk）您不需要重新加载页面。您可以在回调中处理登录的用户状态。

```
//load the async FB sdk
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

//Do something when the user is logged in
FB.Event.subscribe('auth.login', function(response) {
  //do something with response object
});
</script> 
```

# php - 从服务器下载文件

> ID：12046145
> 
> 赞同：0
> 
> 时间：2012-08-20T22:32:42.710
> 
> 标签：php, header, download

目前我正在使用此代码向用户输出文件。

```
header('Content-type: application/octet-stream');
header('Content-Disposition: attachment; filename='.$or.'');
readfile($file); 
```

然而，代码并没有告诉浏览器文件有多大。而且它不能输出像 1 GB 这样的大文件。我希望代码告诉浏览器文件的实际大小并能够输出大文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:46:19.163

对于大文件，您需要使用分块传输。在大多数情况下，底层 Web 服务器（Apache/Nginx/WHY）将具备执行此操作的功能。我建议你使用它们。

这样，您的代码不会长时间占用工作线程，并且失控计时器不会在您的下载过程中插入（这会使您的用户感到不安）。

顺便说一句 - 你在谈论文件下载，而不是上传 - 那将是用户到服务器。你的标签是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:45:59.103

`readfile()`即使单独发送大文件，也不会出现任何内存问题。如果遇到内存不足错误，请确保使用`ob_get_level()`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T22:41:30.500

```
header("Content-Length: $value"); 
```

# php - PHP拆分fwrite以节省内存

> ID：12046153
> 
> 赞同：1
> 
> 时间：2012-08-20T22:33:33.037
> 
> 标签：php, mysql, fopen, fwrite

我目前正在使用来自[http://davidwalsh.name/backup-mysql-database-php](http://davidwalsh.name/backup-mysql-database-php)的脚本 来执行“热复制”，例如备份 myisam sql 数据库，但我遇到的问题是我遇到了一个致命错误内存不足。

我正在使用 HUGE 数据库，因此它将整个 dbs 写入一个字符串，然后将整个字符串一次输出到 fwrite 中，我相信这就是问题所在。那么是否可以将写入操作分成块，这样我就不会遇到内存不足的致命错误？如果是这样，您将如何实现这一目标？

这是我的尝试：

```
ini_set('memory_limit','3000M');
//create the file to be written into
$return = '';
$f = 'db-backup-'.$name.'_'.time().'.sql'; 
$handle = fopen($f,'w+');
fwrite($handle,$return);
fclose($handle);

//...mysql connect goes here then...
//cycle through
foreach($tables as $table)
{
  $result = mysql_query('SELECT * FROM '.$table);
  $num_fields = mysql_num_fields($result);

  $return.= 'DROP TABLE '.$table.';';
  $row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));
  $return.= "\n\n".$row2[1].";\n\n";

  for ($i = 0; $i < $num_fields; $i++) 
  {
    while($row = mysql_fetch_row($result))
    {
      $return.= 'INSERT INTO '.$table.' VALUES(';
      for($j=0; $j<$num_fields; $j++) 
      {
        $row[$j] = addslashes($row[$j]);
        $row[$j] = ereg_replace("\n","\\n",$row[$j]);
        if (isset($row[$j])) { $return.= '"'.$row[$j].'"' ; } else { $return.= '""'; }
        if ($j<($num_fields-1)) { $return.= ','; }
    }
    $return.= ");\n";
  }
}
$return.="\n\n\n";

//Write each table into file
fopen($f,'w+');
fwrite($handle,$return);
fclose($handle);
$return ='';  //clear return thus clearing memory?
} 
```

我知道有更好的方法来备份数据库，这只是暂时的，直到我让 LVM 工作。

谢谢

TL；DR fwrite 给出内存不足错误，如果拆分写入将避免该问题？

附言。mysqldump 锁定了数据库，所以我不能使用转储，并且复制被破坏，因为我们使用的是临时表，而临时表是必须的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:37:48.973

改变这个

```
$result = mysql_query('SELECT * FROM '.$table); 
```

到

```
$result = mysql_query('SELECT * FROM LIMIT 5000'.$table); //this will only get the first 5000. 
```

得到它们并保存后，您可以使用

```
$result = mysql_query('SELECT * FROM OFFSET 5000'.$table);  //you can use limit over here too... 
```

# css - CSS 链接样式表中的样式表

> ID：12046155
> 
> 赞同：0
> 
> 时间：2012-08-20T22:33:39.743
> 
> 标签：css, stylesheet

我遇到的问题是我需要向我的网站添加第二个样式表。但我宁愿不使用代码更新 20 多个 HTML 页面。有没有办法从现有样式表链接到另一个？这样我只换一页？第二个样式表是来自 Google Fonts 的字体。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:37:22.733

当然，您可以使用@import。
[http://www.cssnewbie.com/css-import-rule/](http://www.cssnewbie.com/css-import-rule/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:37:29.717

您可以`@import`在 css 中使用该功能。例如：

`@import url("YOUR_CSS_FILE.css");`

# ruby-on-rails - 是否可以在 Coffeescript (Backbone.js) 和 Rails 3.2 之间共享 HAML 模板？

> ID：12046156
> 
> 赞同：0
> 
> 时间：2012-08-20T22:33:42.937
> 
> 标签：ruby-on-rails, backbone.js, coffeescript, haml

这可能吗？我知道人们使用 mustache 来共享模板，但你可以使用 HAML 吗？我更喜欢预编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:45:07.347

一个快速的谷歌搜索发现[这个库用于 HAML 的客户端渲染](https://github.com/uglyog/clientside-haml-js)。所以看起来是的，您可以在应用程序的客户端和服务器端之间共享模板。

如果您首先在服务器端处理 JS 模板，那么资产管道将使用正确的文件扩展名处理此问题。您将无法在客户端使用呈现的 haml 模板，因为它将丢失其标签。

# windows - 将多个 .o 文件组合成一个可执行文件

> ID：12046157
> 
> 赞同：0
> 
> 时间：2012-08-20T22:33:43.480
> 
> 标签：windows, g++, sdl, object-files

我正在尝试将使用 C++ 文件创建的目标文件合并到一个可执行文件中`gcc`。不幸的是，`gcc`这给了我成千上万的`undefined reference`字符串、数组等错误。

我在 Windows 机器上执行此操作，因此没有终端命令；只有 cmd 命令。

我只是在做：

```
gcc a.o b.o c.o -o prgm.exe 
```

我错过了什么/做错了什么？

编辑：

我用 g++ 重新创建了 .o 文件： `g++ a.cpp -g -c -Wall -std=c++0x -lSDLmain -lSDL -lSDL_image -lSDL_ttf -IC:\SDL-1.2.14\include -o a.o`，其中 a.cpp 和 ao 是我保存文件的目录，而不是 g++ 目录

然后，我做到了`g++ a.o b.o c.o -o prgm.exe`。这给了几十个（我想这是一个改进？）错误，比如

```
undefined reference to `_SDL_SetColorKey' 
```

但我包括 SDL 不是吗？

最终的错误是：

```
c:/program files (x86)/codeblocks/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../li
bmingw32.a(main.o):main.c:(.text.startup+0xa7): undefined reference to `_WinMain
@16'
collect2.exe: error: ld returned 1 exit status 
```

`int main(int argc, char * argv[])`在代码中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:40:39.720

您正在尝试使用 C 链接器链接 C++ 程序。您需要使用`g++`而不是 gcc。

一般来说`gcc`，用于编译/链接 C，而`g++`用于 C++。`gcc`IIRC通过根据文件扩展名进行调度来编译 C++ 代码。但是，将 C++ 代码与 gcc 链接不起作用，因为它不会链接 C++ 标准库，从而导致未定义的引用错误。

如果这不能解决您的问题，您可能需要更具体地描述您的错误和系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:40:18.877

GCC 是 C 编译器。您的代码是 C++，因此您需要使用 G++ 进行链接：

```
g++ a.o b.o c.o -o prgm.exe 
```

这会自动将 C++ 库添加到链接行，从而解决许多（如果不是全部）丢失的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T23:54:42.173

根据您的更新，我认为您需要执行以下操作：

```
g++ a.cpp b.cpp c.cpp -g -Wall -IC:\SDL-1.2.14\include -LC:\SDL-1.2.14\lib -std=c++0x -lSDLmain -lSDL -lSDL_image -lSDL_ttf  -o prgm.exe 
```

我猜测`C:\SDL-1.2.14\lib`是否存在基于标题所在的位置。

# html - 如何在给定大量数据和使用html5的文件名的情况下以编程方式保存本地文件

> ID：12046158
> 
> 赞同：0
> 
> 时间：2012-08-20T22:33:43.147
> 
> 标签：html

我想实现在 W3C File API 文档中找到的这个用例：

*   用户代理应该提供在给定数据量和文件名的情况下以编程方式保存本地文件的能力。
    *   示例：电子表格应用程序。用户与表单交互，并生成一些输入。然后表单生成一个 CSV（逗号分隔变量）输出供用户导入电子表格，并使用“保存...”。生成的输出也可以直接集成到基于 Web 的电子表格中，并异步上传。

来源：[http ://www.w3.org/TR/file-upload/#requirements](http://www.w3.org/TR/file-upload/#requirements)

根据我的理解，应该可以使用它创建一个完全离线的电子表格应用程序，但我在 W3C 文档或网络上都找不到实现这种用例的单个示例。至少不是一个完全离线的。当然它不需要是电子表格应用程序；一个简单的文本编辑器或 TODO 管理器就足够了。我错过了什么吗？

此外，这是否可以从单个 html5 文件（带有嵌入式 JS 和 css）创建前面提到的应用程序之一（文本编辑器、待办事项管理器甚至电子表格应用程序）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:36:32.817

我似乎搜索得不够努力，这是我想要的示例[http://html5-demos.appspot.com/static/a.download.html](http://html5-demos.appspot.com/static/a.download.html)

# php - 如果有人上传 php 文件而不是图像，则存在安全风险

> ID：12046160
> 
> 赞同：2
> 
> 时间：2012-08-20T22:33:57.527
> 
> 标签：php, security, image-uploading

假设我们的网络托管是 linux 并且安装了 php： 1- 当可以上传 php 代码而不是图像时，可能会发生最糟糕的情况。

2- 入侵者能以某种方式找回我的数据库密码吗？假设存储图像的目录有 777 个文件权限。

3-如果图像目录有644权限怎么办？

我的问题的答案可以与给这两个问题的答案结合起来：[安全性：如何验证图像文件上传？](https://stackoverflow.com/questions/5606465/security-how-to-validate-image-file-uploads)和[接受图片上传的安全问题](https://stackoverflow.com/questions/1485419/security-issues-in-accepting-image-uploads)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:40:00.517

> 当可以上传 php 代码而不是图像时，可能会发生最糟糕的情况。

最坏的情况：入侵者可以执行任意 PHP 代码，甚至可能是服务器上的任意代码。如果攻击者足够聪明而系统管理员不聪明，他甚至可能拥有整个服务器/子网/网络/...

> 入侵者能以某种方式找回我的数据库密码吗？假设存储图像的目录有 777 个文件权限。

*如果*攻击者可以执行 PHP 代码（这当然取决于你的安全措施），他肯定可以读取当前用户的文件，所以答案很可能是肯定的。

> 如果镜像目录有644权限怎么办？

除非您在 CGI 模式下使用 PHP，否则执行位对于网络服务器执行脚本不是必需的，因此仅此一项没有帮助。

* * *

当然，这些不是你应该问的问题。您应该问的问题是如何防止攻击者首先上传可执行的 PHP 文件。我对此的回答是，您应该根据白名单检查文件扩展名并删除其他所有内容，例如：

```
$pattern = "/\.(jpe?g|gif|png)$/iD";
if (!preg_match($pattern, $filename))
    die("Please don't."); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:39:21.120

您应该确保不允许解析图像目录中的 php 文件，因为我假设它将向公众开放。

您可以在 /images/.htaccess 文件中使用

```
RemoveHandler .php .phtml .php3
RemoveType .php .phtml .php3 
```

这样，如果他们尝试访问 domain.com/images/hackdatabase.php，它只会返回他们的代码而不是文件。

但是您应该首先检查以确保它是图像。

# asp.net-mvc - 在 ASP.NET MVC 4 中添加服务引用

> ID：12046161
> 
> 赞同：9
> 
> 时间：2012-08-20T22:33:58.633
> 
> 标签：asp.net-mvc, wcf

我有两个项目：Mvc3TestSvcRef 和 Mvc4TestSvcRef。Mvc3TestSvcRef 来自 Intranet 应用程序的 ASP.NET MVC 3 模板。Mvc4TestSvcRef 来自 Intranet 应用程序的 ASP.NET MVC 4 模板。

我正在尝试添加服务参考。在 Mvc3TestSvcRef 中，我右键单击项目（或 References 文件夹）并选择 Add Service Reference。我指向 URL，单击 Go。解析引用后，我输入一个命名空间并单击“确定”。正如预期的那样，我看到添加到配置中的部分已完成绑定和客户端标记。我可以导入：“使用 Mvc3TestSvcRef.MySvcRef;” 并编写如下代码：

```
 using (var cl = new MyServiceClient())
        {
            cl.DoStuff();
        } 
```

在 Mvc4TestSvcRef 中，我遵循相同的步骤，但没有将 system.servicemodel 添加到配置中。另外导入：“使用 Mvc4TestSvcRef.MySvcRef;” 无法解决。我已经在 Visual Studio 2010 和 Visual Studio 2012 中对 MVC 4 进行了尝试。

在 ASP.NET MVC 4 项目类型中添加服务引用的过程是否有重大变化，或者我遗漏了什么或安装损坏？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T14:38:10.560

Reference.cs 中没有代码，只有注释：

```
//------------------------------------------------------------------------------
// <auto-generated>
// This code was generated by a tool.
// Runtime Version:4.0.30319.17929
//
// Changes to this file may cause incorrect behavior and will be lost if
// the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------ 
```

我从工作的项目中复制了 reference.cs 并修改了命名空间，然后将工作项目中的部分添加到 MVC 4 项目中，但仍然存在问题。

我尝试构建，但收到了几个警告和一个错误。无法为服务引用“MySvcRef”生成代码。有关详细信息，请查看其他错误和警告消息。

这导致我写了这篇文章：[服务引用错误：无法为服务引用生成代码](https://stackoverflow.com/questions/3977560/service-reference-error-failed-to-generate-code-for-the-service-reference)

所以我取消了高级部分中所有引用程序集中的重用类型。

这似乎产生了很好的服务参考。虽然，我应该指出，如果您在说 System 中有一些东西，例如 System.TimeSpan，在您的 DataContracts 之一中用作 DataMember，则引用现在将在引用命名空间中包含 TimeSpan，而不是来自它的来源。因此，客户端会将任何 System.Timespan 属性视为 ReferenceNameSpace.Timespan，这可能会引发比较等问题。此处更好的答案是包含参考中的特定程序集，并且不要选中 System.Web.Http 的框，如下面的评论中所指出的那样

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-28T16:42:17.373

我不知道是否为时已晚，但这是解决方案“当您添加参考时，在高级设置中删除重用类型复选框。”

# css - 使用#href使用div ID交换画廊图像时如何防止页面跳转？

> ID：12046168
> 
> 赞同：0
> 
> 时间：2012-08-20T22:34:56.313
> 
> 标签：css, html, hash, gallery, href

我一直在努力解决一个问题。我使用 CSS 和 # href 制作了一个简单的 html 画廊，以从本质上换出包含画廊图像的不同 div ID。问题是当您在图库中选择“下一个”或“上一个”按钮时，它会在浏览器中向上跳转页面，因此图库与页面顶部对齐。有人知道如何防止这种情况吗？

画廊的代码如下所示：

```
<div id="pic1">
<img src="click/pic1.jpg" alt="" />
<a class="previous" href="#pic10"><b>Previous</b></a><a class="next" href="#pic2"><b>Next</b></a>
</div>
<div id="pic2">
<img src="click/pic2.jpg" alt="" />
<a class="previous" href="#pic1"><b>Previous</b></a><a class="next" href="#pic3"> <b>Next</b></a>
</div>
<div id="pic3">
<img src="click/pic3.jpg" alt="" />
<a class="previous" href="#pic2"><b>Previous</b></a><a class="next" href="#pic4"><b>Next</b></a>
</div>
<div id="pic4">
<img src="click/pic4.jpg" alt="" />
<a class="previous" href="#pic3"><b>Previous</b></a><a class="next" href="#pic5">  <b>Next</b></a>
</div>
<div id="pic5">
<img src="click/pic5.jpg" alt="" />
<a class="previous" href="#pic4"><b>Previous</b></a><a class="next" href="#pic6"><b>Next</b></a>
</div>
<div id="pic6">
<img src="click/pic6.jpg" alt="" />
<a class="previous" href="#pic5"><b>Previous</b></a><a class="next" href="#pic7"><b>Next</b></a>
</div>
<div id="pic7">
<img src="click/pic7.jpg" alt="" />
<a class="previous" href="#pic6"><b>Previous</b></a><a class="next" href="#pic8"><b>Next</b></a>
</div>
<div id="pic8">
<img src="click/pic8.jpg" alt="" />
<a class="previous" href="#pic7"><b>Previous</b></a><a class="next" href="#pic9"><b>Next</b></a>
</div>
<div id="pic9">
<img src="click/pic9.jpg" alt="" />
<a class="previous" href="#pic8"><b>Previous</b></a><a class="next" href="#pic10"><b>Next</b></a>
</div>
<div id="pic10">
<img src="click/pic10.jpg" alt="" />
<a class="previous" href="#pic9"><b>Previous</b></a><a class="next" href="#pic1">  <b>Next</b></a>
</div> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:43:05.383

不是链接到#，而是链接到javascript:void(0);

```
<a class="previous" href="javascript:void(0);">Next</a> 
```

或者，使用 Javascript 阻止默认事件

```
$("a.previous, a.next").on("click", function(e) {
   e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:26:11.123

设置后需要使用 JQuery

```
<a class="previous" href="javascript:void(0);">Next</a> 
```

然后调用JS：

```
$(document).ready(function(){

    $('a.previous').click(function(e){
        var picID= parseInt($(this).parent().attr("id").substr(3));//gets the pic id count
        $("#pic"+(picID)).hide(); //hide the current div
        $("#pic"+(picID-1)).show(); //show the previous div
    });

    $('a.next').click(function(e){
        var picID= parseInt($(this).parent().attr("id").substr(3)); //gets the pic id count
        $("#pic"+(picID)).hide(); //hide the current div
        $("#pic"+(picID+1)).show(); //show the previous div
    });

}); 
```

见：http: [//jsfiddle.net/uZ6g5/](http://jsfiddle.net/uZ6g5/)

# asp.net - 对 .Net Web 应用程序进行逆向工程。部署后的错误

> ID：12046169
> 
> 赞同：0
> 
> 时间：2012-08-20T22:34:57.930
> 
> 标签：asp.net, reverse-engineering

我正在尝试对我没有代码的东西进行更新。我已经使用 Reflector 提取了源代码，创建了一个新项目，并且可以在我的更改后成功构建它。我可以毫无问题地运行指向正确数据库的本地副本。

但是，当我部署到该站点时，我不断收到错误消息。

```
Could not load file or assembly 'xxxxxxxx' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. 
```

我在 web.config 中没有看到任何让我认为它正在寻找特定版本的内容，我在 GAC 中也没有看到任何内容。

我从这里去哪里？

# java - Java 应用程序在 AudioClip.stop() 上挂起

> ID：12046170
> 
> 赞同：1
> 
> 时间：2012-08-20T22:35:06.517
> 
> 标签：java, audio

我正在写一个视频游戏，我想在玩家输掉或退出（到主菜单）时停止音乐。

这是我的代码：

```
public class Music{
    private static Clip clip;
    private static AudioInputStream stream;

    private static void loadMusic(){
        if(clip != null) return;
        try {
            AudioFormat format;
            DataLine.Info info;
            stream = AudioSystem.getAudioInputStream(Music.class.getResource("/resources/music/music.wav"));
            format = stream.getFormat();
            info = new DataLine.Info(Clip.class, format);
            clip = (Clip) AudioSystem.getLine(info);
            clip.open(stream);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void playMusic(boolean loop){
        loadMusic();
        if(clip == null) return;
        if(loop) clip.loop(Clip.LOOP_CONTINUOUSLY);
        else clip.start();
    }

    public static void stopMusic(){
        clip.stop();
        clip.setMicrosecondPosition(0);
    }
} 
```

每当我调用 Music.stopMusic() 时，游戏都会挂起几秒钟然后继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:37:36.023

根据我从您的描述中收集的信息，您正在按下 GUI 上的停止按钮，这会调用`Music.stopMusic()`。结果是音频剪辑停止播放，但您仍在等待 3 秒，GUI 才会响应。

这是因为您在其中`Music.stopMusic()`进行的调用会对 I/O 资源进行本机调用，而这不应在 EDT 中调用。您应该考虑运行一个工作线程来执行此操作：

```
Thread t = new Thread(new Runnable() { 
     public void run() {
         Music.stop();
     }
});
t.start(); 
```

或者考虑使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

有趣的是，虽然我不确定`Clip`返回的是哪个实现，但快速浏览一下[`MixerClip`](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/com/sun/media/sound/MixerClip.java.html)显示了对本机库的调用，然后可能是你困境中的确凿证据——等待回调 3 秒！

```
// stop the sample.  this invalidates the sample voice id.
nStop(id);

// wait for the callback
synchronized(lock) {
    if (id!=0) {
    try {
        //long time=System.currentTimeMillis();
        lock.wait(3000);
        //if (System.currentTimeMillis()-time > 2500) {
        //System.out.println(" WAITING TIMED OUT!"); System.out.flush();
        //id=0;
        //}
    } catch (InterruptedException e) { }
    }
} 
```

# php - 从 PHP 数组中检索值

> ID：12046171
> 
> 赞同：0
> 
> 时间：2012-08-20T22:35:07.003
> 
> 标签：php, arrays, configuration

我有一个数组来存储这样的配置

```
$config = array (
            'db' => array(
                'db1' => array(
                    'dbname' => 'mydatabase', 
                    'user' => 'myusername', 
                    'pass' => 'mypassword', 
                    'host' => 'myhost'
                )
            ),
            'url' => array(
                'homeUrl' => 'http://www.example.com'
            )
         ) 
```

我正在编写一个函数来通过传入一个字符串从数组中检索数据`db.db1.dbname`，它应该给我`'mydatabase'`

我试图将字符串分解成一个数组以获取密钥，`db, db1, and dbname`. 但在那之后，我有点坚持我应该如何使用它们，`$config -> db -> db1 -> dbname`或者`$config['db']['db1']['dbname']`为了得到`'mydatabase'`.

理想情况下，假设我有一个名为 的函数`read($arg, $array)`，我想检索这样的结果

```
read('db.db1.dbname', $config), returns 'mydatabase'
read('url.homeUrl', $config), returns 'http://www.example.com' 
```

由于我不知道字符串中包含多少个键，因此我需要它更加动态。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:36:32.247

我认为您正在考虑 JSON

尝试`$config['db']['db1']['dbname'];`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T22:45:05.500

我真的很想知道你为什么要这样做，但它是这样的：

```
function read($item, $config)
{
    $selectors = explode('.', $item);

    $configItem = $config;
    foreach($selectors as $selector) {
        $configItem = $configItem[$selector];
    }

    return $configItem;
}

$config = array (
    'db' => array(
        'db1' => array(
            'dbname' => 'mydatabase', 
            'user' => 'myusername', 
            'pass' => 'mypassword', 
            'host' => 'myhost',
        ),
    ),
    'url' => array(
        'homeUrl' => 'http://www.example.com',
    ),
);

read('db.db1.dbname', $config); // will return mydatabase 
```

请注意，您必须检查密钥是否存在，如果不存在则抛出错误或异常。

除了使用该功能之外，还有一个您不能这样做的原因：

```
function functionThatNeedsDatabaseInfo($databaseInfo)
{
    // do database stuff
}

functionThatNeedsDatabaseInfo($config['db']['db1']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:39:40.407

它们只是普通的嵌套数组。

`$config['db']`会给你第一个内部数组

`$config['db']['db1']`将为您提供包含您正在寻找的所有数据库配置的数组。

`$config['db']['db1']['dbname']`: 'dbname' 是 'db1' 数组中的索引，它将为您提供所需的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T22:47:01.087

```
function read($layers, $arr){
    $toReturn = $arr;
    foreach(split('.', $layers) as $layer)
        $toReturn = $toReturn[$layer];
    return $toReturn;
} 
```

你为什么要这样做，我没有最模糊的。但是你去。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-20T22:39:35.770

将那个东西投射到一个对象上！或者更确切地说，将每个数组转换为一个对象，然后您可以像使用它一样使用它。

```
$config = (object) array (
        (object) 'db' => array(
            (object) 'db1' => array(
                'dbname' => 'mydatabase', 
                'user' => 'myusername', 
                'pass' => 'mypassword', 
                'host' => 'myhost'
            )
        ),
        (object) 'url' => array(
            'homeUrl' => 'http://www.example.com'
        )
     ) 
```

# .net - 将解密数据从 CryptoStream 传输到 SecureString

> ID：12046176
> 
> 赞同：6
> 
> 时间：2012-08-20T22:36:28.770
> 
> 标签：.net

我正在尝试将解密的数据从 System.Security.Cryptography.CryptoStream 传输到 System.Security.SecureString。查看 CryptoStream 的 IL 代码，它似乎像任何其他 System.Buffer 一样缓冲转换后的数据。我可以大块地读出数据，然后将其附加到我的 SecureString；缓冲的数据是短暂的（在方法内），但 SecureString 本身可能会停留一段时间。

使用 GCHandle 将缓冲数据固定在内存中以通过防止 GC 复制来减少攻击面是否有意义，或者这完全不需要？此外，是否有更好的方法将转换后的数据从 CryptoStream 放入 SecureString？

# android - 从另一个活动调用 AsyncTask

> ID：12046180
> 
> 赞同：0
> 
> 时间：2012-08-20T22:36:51.107
> 
> 标签：android, android-activity, android-asynctask

我需要你的帮助在过去的两天里我一直坚持这个问题，我试图从另一个活动中调用这个 AsyncTask 并获取返回的字符串，但是在阅读了网上和 SO 上的几篇文章之后，我无法做。有人可以指出我需要做什么，或者非常厚颜无耻地发布一些代码并解释它，以便我知道发生了什么。我真的很感激帮助！

例如

```
String jsonString = //returned string from AsyncTask 

public class processJSON extends AsyncTask<Object, Void, String>{

        private Context context;

        public processJSON (Context context){
            this.context = context;
        }

        @Override
        protected String doInBackground(Object... params) {

            int location_id = (Integer) params[0];
            String url = (String) params[1];

            InputStream in = null;
            String result = "";
            JSONObject jArray = null;
            String newURL = url + "?location_id=" + location_id;

            HttpClient client = new DefaultHttpClient();
            HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); 
            HttpResponse response;
            JSONObject json = new JSONObject();
            try{

                HttpPost post = new HttpPost(newURL);
                //json.put("location_id", location_id);
                StringEntity se = new StringEntity(json.toString());
                se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                post.setEntity(se);
                response = client.execute(post);

                if (response != null) {
                    in = response.getEntity().getContent(); 
                }
            }catch (Exception e) {
                Log.e("Send JSON", "ERROR: " + e);
                e.printStackTrace();
            }

            try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(in, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                in.close();
                result = sb.toString();
            }catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
            }
            return result;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:38:31.787

当您实例化它时，您`AsyncTask`应该接受一个回调作为参数。然后，一旦它运行并完成，您就可以返回通过回调生成的任何值。

# objective-c - 如何在Objective C中声明一个以另一个变量的值命名的变量

> ID：12046184
> 
> 赞同：0
> 
> 时间：2012-08-20T22:37:12.607
> 
> 标签：objective-c, ios, variable-assignment

> **可能重复：**
> [语法帮助 - 变量作为对象名称](https://stackoverflow.com/questions/7940809/syntax-help-variable-as-object-name)

我在Objective C中有一个非常基本的初学者问题：

我想声明一个以另一个变量的内容/值/文字命名的变量。我怎样才能做到这一点？

IE

```
NSString *s = [NSString stringWithFormat:@"variableName"]; 
```

// 现在创建一个以 s 中的文字命名的第二个变量

```
int *s = 42; // This is what doesn't work. The integer-type variable should be named variableName 
```

有谁知道如何做到这一点？

感谢您到目前为止的答案。我问这个问题的原因如下：

我有一个数组，其中包含我从 xml 文件中加载的值，其结构如下：

`<string>name</string><integer>23</integer><real>3.232</real><real>4.556</real> ... (44 times another real number)<string>nextName</string>...(and so on).`

该文件包含 MKPolygons 的名称、每个多边形的点数以及多边形每个点的纬度和对数值。我设法加载文件并将其内容放在一个数组中。现在我想从这个数组中创建 MKPolygons，它们被命名为数组中的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:48:51.657

您正在寻找的是哈希表。您可以使用`NSDictionary`或`NSMutableDictionary`或`NSHashTable`。

这是一个例子：

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setObject:anObj forKey:@"foo"];
[dict objectForKey:@"foo"];
[dict removeObjectForKey:@"foo"];
[dict release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:46:57.350

这在 Objective-C 中是不可能的，在大多数主流语言中也是不可能的（PHP 除外）。你想用这个来完成什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:46:59.643

我不认为你能做到。但是，您可以创建一个`NSDictionary`并创建一个名为的键`variableName`和一个名为 的值`42`。（一`NSNumber`）。然后，每当您想检索此值时，您只需执行`valueForKey`.

# c - 简单的 C 音频库

> ID：12046190
> 
> 赞同：6
> 
> 时间：2012-08-20T22:37:36.047
> 
> 标签：c, audio, static-libraries, wav

我正在寻找一个简单的库来输出音频。我希望它满足以下标准：

*   在 LPGL/zlib/MIT 或类似的许可下获得许可——我将在独立的商业应用程序中使用它，但我没有钱购买许可。
*   用 C 编写，但 C++ 很好。
*   跨平台（Windows、Linux，也许是 OSX）
*   能够读取内存中的某种音频文件（我更喜欢 WAV 或 OGG，但如果需要，我很乐意使用不太流行的格式）（我已经看到使用 memfile 结构和用户定义的 I/O 回调）。我需要将文件放在内存中，因为我将所有资源都放入一个 .zip 存档中，并且我使用[另一个库](http://code.google.com/p/miniz/)将这些存档文件加载到内存中。
*   支持同时播放多个声音，最多8个左右即可。
*   我真的很想拥有源代码或静态库（MinGW/GCC `lib???.a`），但如果没有其他可用的，我将使用共享库。

在我的搜索中，我一定遇到了两打不同的音频库，所有这些都没有完全满足这些标准......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:28:19.213

我会推荐 PortAudio + libsndfile。非常受欢迎的组合，满足您的要求。被许多其他软件应用程序使用，包括 Audacity。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:12:56.673

我立即想到的一些候选人是：

*   [SDL](http://www.libsdl.org/)（有一个[教程](http://content.gpwiki.org/index.php/C%3aPlaying_a_WAV_Sound_File_With_SDL_mixer)演示如何播放 .wav 格式的声音）
*   [库](http://www.libav.org/)
*   [ffmpeg](http://ffmpeg.org/)
*   [力宝](http://www.xiph.org/ao/)
*   [OpenAL 软件](http://kcat.strangesoft.net/openal.html)
*   [杰克音频](http://jackaudio.org/)

不过，您可能已经看过这些并消除了它们。您能否提供更多关于您从考虑中排除的库的详细信息以及为什么？这将有助于缩小我们的建议范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T23:21:29.903

您可能想查看[SDL](http://www.libsdl.org/)和[SDL_mixer](http://www.libsdl.org/projects/SDL_mixer/)。这是一个很好的[教程](http://www.kekkai.org/roger/sdl/mixer/)。我使用了 SDL_mixer，它可以轻松播放背景声音或音乐并同时播放多个声音，而无需编写自己的声音样本混音器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T06:20:00.020

我最终使用了 PortAudio（非常低级、灵活的许可证）并自己编写了一个混音器。有关其他人关于编写自定义混音器的提示，请参阅[我在 C++ 论坛上创建的这个主题。](http://www.cplusplus.com/forum/general/77577/)这一点都不难，真的；我很惊讶有这么多混音器库。有关 WAV 格式（带有 44 字节标头的可流式传输的原始音频数据）的详细信息，请参阅[此](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)。

# asp.net - 和 使用动态 ASPX 源的链接在 IE 中不起作用

> ID：12046192
> 
> 赞同：1
> 
> 时间：2012-08-20T22:38:05.087
> 
> 标签：asp.net, internet-explorer, audio, embed

我正在尝试在网页上播放 mp3 声音，声音作为 mp3 存储在 SQL 数据库中，因此通过 Service 方法作为 byte[] 返回。

我的问题是，在 Chrome 中这可以正常工作，但在 IE 中却不行，只要我开始使用 ASPX URL 作为源然后即拒绝播放声音。我也尝试了更多的成功，但没有使用动态 URL。我是否遗漏了一些明显的东西，或者这只是 IE 很难。在调试时我发现 IE 甚至没有尝试调用这个 URL，因为它已经决定它不喜欢这个 URL。非常感谢任何帮助。

1.  `<audio><source>` 方法_

方法一。（不适用于 IE）

```
 <audio controls="controls" >
      <source src="PlayAudio.aspx?AudioId=AUDIO00253" />
      Sound Not Supported
    </audio> 
```

方法二。（不适用于 IE）

```
 <audio controls="controls" >
      <source src="Cyclone.mp3" />
      Sound Not Supported
     </audio> 
```

1.  `<embed>`方法_

方法一。（不适用于 IE）

```
 <embed  src="PlayAudio.aspx?AudioId=AUDIO00253" autostart="true" ></embed> 
```

方法二。（在 IE 中工作）

```
 <embed  src="Cyclone.mp3" autostart="true"></embed> 
```

所有这四种方法在 Chrome 中都可以正常工作

提供 mp3 字节流的 ASPX 方法，我知道这在 Chrome 中可以正常工作。

```
 private void SendAudio( byte[] audio )
  {
    // Stream byte array to memory stream
    var memStream = new MemoryStream( audio );

    // Write memory stream to response
    Response.ContentType = "audio/mpeg";
    memStream.WriteTo( Response.OutputStream );
    memStream.Close();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:13:36.853

首先`<audio>`&`<source>`标签是 HTML 5 中的新标签，IE 不支持，因此它们不能在 Internet Explorer 中工作（它们应该在 FireFox 4+、Chrome 3+、Safari 4+、Opera 9+ 和任何其他支持 HTML 5 的浏览器。）

其次，您的代码对您的方法是正确的，但是我过去遇到过问题。我相信标签的 src 属性`<embed>`需要一个实际的声音文件而不是脚本来执行。

现在浏览器正在尝试播放它不能播放的脚本。由于您的声音数据存储在数据库中，因此在带有`<embed>`标签的页面上，您需要创建一个临时文件来写入数据，然后在`<embed>`标签中调用该临时文件。

我不是 ASPX 的专业人士，但我会尽力为您调查。

干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T17:20:01.750

我被这个卡住了一会儿。在这里，embed 也不适用于 IE 上的**.aspx**或**.ashx**文件，**但它确实适用于经典的 .asp**。可能对扩展有某种验证。您可以将 .asp 文件添加到现代 asp.net Visual Studio 项目中。

# eclipse - eclipse git混淆：如何合并和推送？

> ID：12046199
> 
> 赞同：3
> 
> 时间：2012-08-20T22:39:04.837
> 
> 标签：eclipse, git, egit

我似乎永远无法弄清楚如何使用 git。我只是做随机命令，它最终会起作用。这是我想要推送时通常会做的事情：

*   从上游获取

*   犯罪

*   推送到上游

但是，上述步骤有时不起作用。例如，当我从上游获取时，我的本地分支不会更新。

如何将远程分支合并到本地分支？拉取和获取之间有区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:43:22.857

“git pull”相当于“git fetch”后跟“git merge”

你想做的是：

```
git commit -am "your message here" 
```

这会在本地提交您当前的更改，并且仅在本地提交。现在，假设分支“foo”：

```
git pull origin foo 
```

这会执行“git fetch”，然后是“git merge”。这一步中的一切都是在你的本地分支上完成的，对远程分支仍然没有影响。根据 git 的设置方式，您可能需要指定分支。

如果您有合并冲突，则必须修复列出的文件，然后将它们添加回来：

```
git add path/to/resolved.file 
```

完成后，将本地更改中的所有内容推送到远程服务器：

```
git push origin foo 
```

如果您在提交之前拉取，可能会导致您的本地分支无法更新。

tl;博士，总是在拉动之前提交！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:46:57.080

很好理解 git fetch 和 git pull 之间的区别看[这里](https://stackoverflow.com/questions/292357/whats-the-difference-between-git-pull-and-git-fetch)。

> 用最简单的术语来说，“git pull”会执行“git fetch”，然后是“git merge”。
> 
> 您可以随时执行“git fetch”来更新远程分支的本地副本。此操作永远不会更改您自己的任何分支，并且无需更改您的工作副本就可以安全地执行此操作。我什至听说有人在后台的 cron 作业中定期运行“git fetch”（尽管我不建议这样做）。

在 eclipse 中使用 git 可能有点棘手，但如果你了解 git 基础知识，你应该能够应付它。我推荐你阅读一本 git[教程](http://sixrevisions.com/resources/git-tutorials-beginners/)，这样你就能理解基本的 git 操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:56:42.510

学习 git 的第一步：不要使用 egit。

现在，您正在从上游获取和拉取。这让我觉得有几个人对同一个存储库有写访问权，所以我们可能不希望进行大量合并以使历史复杂化。最好这样做。我假设您已经提交了对本地`master`分支的更改或一组更改，您希望将这些更改或一组更改放在`upstream`您提交时已被其他人推送到的存储库中。

首先，我们获取新的更改但还没有使用它们。这将更新`upstream/master`到上游`master`分支的新负责人。

```
git fetch upstream master 
```

现在，我们需要引入这些更改。此命令重写历史记录，我们假设您尚未在任何地方发布您的更改。

```
git rebase upstream/master master 
```

如果您已经发布了您的更改，那么您应该使用这个更混乱的命令（不要同时使用这两个，只使用这个！）

```
git merge upstream/master master 
```

现在，我们可以推送：

```
git push upstream master 
```

前两个步骤可以分别缩写为和`git pull --rebase`和版本。`git pull``rebase``merge`

如果您已经在`master`分支上，那么大多数第二个参数都是多余的，但为了清楚起见，我将它们写下来。值得注意的是，给`git-rebase`or提供第二个参数`git-merge`将在执行操作之前简单地检查该分支。仅当您没有将 refs 设置为自动获取和推送 master 时，才需要`master`提供和`fetch`。`push`

# redirect - 服务器重定向太多次 (20)

> ID：12046202
> 
> 赞同：1
> 
> 时间：2012-08-20T22:39:26.070
> 
> 标签：redirect, cookies

当我尝试从 URL 读取 XML 时出现此错误：java.net.ProtocolException: Server redirected too many times (20)。

我找到了一个解决方案，使用以下行设置 cookie： CookieHandler.setDefault(new ListCookieHandler()); 其中“ListCookieHandler”是我使用请求中的配置定义的类。

但这不起作用。在方法“CookieHandler.setDefault”的 javadoc 中，我发现：“注意：非标准 http 协议处理程序可能会忽略此设置”。我认为这可能是问题所在。我还有另一种解决方案吗？

我的代码是：

```
int timeout = 120000;
CookieHandler.setDefault(new ListCookieHandler());
HttpURLConnection conn = (HttpURLConnection) new URL("http://...").openConnection();
conn.setReadTimeout(timeout);
conn.setConnectTimeout(timeout);
BufferedReader reader = new BufferedReader(new  InputStreamReader(conn.getInputStream()));
StringBuilder builder = new StringBuilder();
String line;
while ((line = reader.readLine()) != null) {
builder.append(line).append(System.getProperty("line.separator"));
}
System.out.println(StringEscapeUtils.unescapeHtml(builder.toString())); 
```

ListCookieHandler 的完整解决方案在链接中：[http ://www.java2s.com/Code/Java/JDK-6/UsingCookieHandlerinJava5.htm](http://www.java2s.com/Code/Java/JDK-6/UsingCookieHandlerinJava5.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-25T09:52:11.907

当我遇到同样的错误时，我使用了：

```
import java.net.CookieHandler;

import java.net.CookieManager;

CookieHandler.setDefault(new CookieManager()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T10:42:15.060

**在**调用_`openConnection();`

```
HttpURLConnection.setFollowRedirects(false); 
```

# php - Restler 总是返回错误 404 not found

> ID：12046207
> 
> 赞同：0
> 
> 时间：2012-08-20T22:39:49.377
> 
> 标签：php, rest, http-status-code-404, restler

我似乎无法弄清楚这一点。

班上：

```
class Assets {
 function getOne($id) {
    $asset = DBO_Asset::getOneByPublicId($id);

    return $asset->id;
 }
} 
```

index.php：

```
require_once 'restler/restler.php';
require_once 'API/Assets.php';

$rest = new Restler();
$rest->addAPIClass("Assets");
$rest->handle(); 
```

网址：

```
http://localhost/api/index.php/assets/getOne/8TWVTZAU 
```

结果：

```
{
  "error": {
  "code": 404,
  "message": "Not Found"
  }
} 
```

我不知道为什么会创建 404，但我按照说明进行操作，但我仍然没有得到任何结果。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:50:06.953

Restler 使用`get`, `post`, `put`,`delete`作为方法前缀来自动将它们映射到相应的 HTTP 方法/动词

GET 是默认的 HTTP 方法，因此如果您不使用上述任何方法作为前缀，它将被映射到 GET 方法

您的 api 当前正在映射到以下 url

`http://localhost/api/index.php/assets/one/8TWVTZAU`

如果`getOne`网址中的内容对您很重要，请使用`@url`如下所示的注释手动路由该方式

```
class Assets
{
    /**
     * @url GET getOne/:id
     * @url GET getOne
     */
    function getOne($id)
    {
        $asset = DBO_Asset::getOneByPublicId($id);
        return $asset->id;
    }
} 
```

# ruby - 列出 Ruby 中的线程局部变量

> ID：12046211
> 
> 赞同：4
> 
> 时间：2012-08-20T22:40:29.127
> 
> 标签：ruby

我们可以在 Ruby 上分配一个线程局部变量，如下所示：

```
Thread.current[:foo] = 1
Thread.current[:bar] = 2 
```

但是我们以后如何列出/枚举这些变量呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T22:44:34.097

您可以使用以下方法获取密钥[`Thread#keys`](http://apidock.com/ruby/v1_9_3_125/Thread/keys)：

```
Thread.current[:foo] = 1
Thread.current[:bar] = 2
Thread.current.keys  # => [:__recursive_key__, :foo, :bar] 
```

不过不知道这有什么帮助，因为您应该知道您使用哪些键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T22:01:04.273

```
 Thread.list.each { |t|
   p "T #{t.object_id} tvars:#{t.thread_variables.length} numkeys:#{t.keys.length}"
 } 
```

# c# - 通过从目录中获取文件名来添加菜单子项

> ID：12046212
> 
> 赞同：0
> 
> 时间：2012-08-20T22:40:29.747
> 
> 标签：c#, winforms

代码：

```
private void loadViewTemplates(string path)
{
    foreach (string file in Directory.GetFiles(path, "*.txt"))
    {
        ToolStripItem subItem = new ToolStripMenuItem();
        viewTemplatesToolStripMenuItem.DropDownItems.Add(subItem);
    }
} 
```

我在源目录中有三个文件，它们似乎作为菜单子项出现，但文件名没有出现。

![菜单子项](../Images/347ab6a0d5401afa7108351eadcc3149.png)

有没有办法让文件名出现而不是不可见？您的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:44:22.880

缺少

```
subItem.Text = Path.GetFileNameWithoutExtension(file); 
```

[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.text.aspx)

```
ToolStripItem.Text - Gets or sets the text that is to be displayed on the item. 
```

所以代码将是

```
private void loadViewTemplates(string path)  
{  
    foreach (string file in Directory.GetFiles(path, "*.txt"))  
    {  
        ToolStripItem subItem = new ToolStripMenuItem();  
        subItem.Text = Path.GetFileNameWithoutExtension(file);
        viewTemplatesToolStripMenuItem.DropDownItems.Add(subItem);  
    }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:45:30.103

我自己找到了一个解决方案，如下所示：

```
private void loadViewTemplates(string path)
{
    foreach (string file in Directory.GetFiles(path, "*.txt"))
    {
        viewTemplatesToolStripMenuItem.DropDownItems.Add(Path.GetFileNameWithoutExtension(file));
    }
} 
```

谢谢你。

# algorithm - 文档特征向量表示

> ID：12046213
> 
> 赞同：2
> 
> 时间：2012-08-20T22:40:31.557
> 
> 标签：algorithm, machine-learning, document-classification, feature-extraction

我正在构建一个文档分类器来对文档进行分类。

因此，第一步是将每个文档表示为“特征向量”以用于训练目的。

经过一番研究，我发现我可以使用 Bag of Words 方法或 N-gram 方法将文档表示为向量。

使用 OCR 检索每个文档（扫描的 pdf 和图像）中的文本，因此某些单词包含错误。而且我没有关于这些文档中使用的语言的先前知识（不能使用词干）。

**据我了解，我必须使用 n-gram 方法。还是有其他方法来表示文档？**

**如果有人可以将我链接到 N-Gram 指南以便获得更清晰的图片并了解其工作原理，我也将不胜感激。**

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T01:08:23.877

1.  使用**语言检测**来获取文档的语言（我最喜欢的工具是来自 Tika 项目的[LanguageIdentifier](http://tika.apache.org/1.0/api/org/apache/tika/language/LanguageIdentifier.html)，但还有许多其他工具可用）。
2.  使用**拼写更正**（有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/2317418/spelling-correction-for-data-normalization-in-java)）。
3.  **词干**（如果你在 Java 环境下工作，[Lucene](https://stackoverflow.com/questions/5391840/stemming-english-words-with-lucene)是你的选择）。
4.  **收集**所有**N-gram**（见下文）。
5.  通过从特定文档中提取 n-gram 来创建分类**实例**。
6.  **构建分类器**。

## N-gram 模型

N-gram 只是 N 个项目的序列。在按主题分类时，您通常使用 N-gram 单词或其词根（尽管有基于 N-gram 字符的模型）。最流行的 N-gram 是 unigrams（只是单词）、bigrams（2 个连续单词）和 trigrams（3 个连续单词）。所以，从句子

> 你好，我叫弗兰克

你应该得到以下 unigrams：

> [hello, my, name, is, frank]（或 [hello, I, name, be, frank]，如果你使用词根）

以下二元组：

> [hello_my, my_name, name_is, is_frank]

等等。

最后，您的特征向量应该具有与所有文本中的单词一样多的位置（维度）*加上未知单词的 1*。实例向量中的每个位置都应该以某种方式反映实例文本中相应单词的数量。这可能是**出现次数**、**二元特征**（如果单词出现则为 1，否则为 0）、**标准化特征**或[**tf-idf**](http://en.wikipedia.org/wiki/Tf*idf)（在按主题分类中非常流行）。

分类过程本身与任何其他领域相同。

# arrays - 如何在每个散列中遍历数组的散列数组一次，而不是每个嵌套数组元素一次？

> ID：12046217
> 
> 赞同：0
> 
> 时间：2012-08-20T22:41:09.987
> 
> 标签：arrays, perl, hash, hash-of-hashes

抱歉，如果这已在其他地方解决。我搜索和搜索。

我正在使用一个配置文件，该文件通过左对齐每个块的名称和每个名称的缩进参数来分隔数据块（见`__DATA__`下文）。我编写了一个脚本，将每个块存储到一个散列中，其中一个`$hash{name}`键指向一个标量值，一个`%hash{args}`键指向一个值数组。由于每个块都存储在自己的散列中，因此对散列的引用以匿名方式存储在数组中。最终，我想一一获取这些哈希并处理其中的值，但我在遍历数组时遇到了麻烦。

当我尝试打印存储在每个散列中的值时，它似乎是在列表上下文中获取该数组中的散列引用，因此如果 %hash{args} 是对具有三个元素的数组的引用，那是 foreach 循环的三倍运行。

我如何让该循环中的代码只为我放入该数组的每个哈希引用运行一次？

如果您检查我的输出，很明显嵌套数组引用需要被取消引用，但我一直坚持让循环正确，以至于我还无法解决这个问题。也许解决方案可以解决这两个问题？

看哪：

```
use strict;
use warnings;

my @array;
my %hash;
my ($name, $args);

while (my $line = <DATA>) {
    chomp($line);        
    if ($line !~ /^\s/) 
    {
        my ($key) = $line =~ /^\S+/g;
        $hash{name} = $key;
        print "Defined a name $key\n";
     } 
     else 
     {
        $line =~ s/^\s+//;
        push (@{ $hash{args} }, $line);
        print "Defined an arg $line\n";
     }
     push (@array, \%hash);
}

foreach my $i (@array)
{
    foreach my $h (keys %{$i}) 
    {
        print $h . "\t";
        print $i->{$h} . "\n";      

    }
}

__DATA__
Sports
    Basketball
    Tennis
    Boxing
Guys
    Tom
    Dick
    Harry 
```

这是输出：

```
Defined a name Sports
Defined an arg Basketball
Defined an arg Tennis
Defined an arg Boxing
Defined a name Guys
Defined an arg Tom
Defined an arg Dick
Defined an arg Harry
args    ARRAY(0x4a8e24)
name    Guys
args    ARRAY(0x4a8e24)
name    Guys
args    ARRAY(0x4a8e24)
name    Guys
args    ARRAY(0x4a8e24)
name    Guys
args    ARRAY(0x4a8e24)
name    Guys
args    ARRAY(0x4a8e24)
name    Guys
args    ARRAY(0x4a8e24)
name    Guys
args    ARRAY(0x4a8e24)
name    Guys 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:09:25.320

### 你的问题：

在构建数据结构时，您犯了一些错误：

*   您总是`$key`为同一`$hash{name}`字段分配一个新的。以前的内容被覆盖。最后一个值`Guys`保持不变。
*   您将 的引用推`%hash`入`@array`. 因为引用反映了原始对象的所有变化，所以每次都得到相同的输出。

### 解决方案：

使用不同的数据结构;-)

您的数据是这样工作的：我们有一*组名称*，每个名称都带有一个*值列表*。在 Perl 中，集合是用哈希建模的，所以我们使用一个：

```
my %hash = (); 
```

每个条目将包含对包含值的数组的引用。最终的数据结构将如下所示：

```
%hash = (
    Sports => ["Basketball", "Tennis", "Boxing"],
    Guys   => ["Tom", "Dick", "Harry"]
); 
```

您可以使用模块检查当前的数据结构`Data::Dumper`：

```
use Data::Dumper;
print Dumper (\%name); # has to be given references 
```

要使用此数据结构，只需对您的代码进行最少的改进：

```
my %hash;
my $key;
while (my $line = <DATA>) {
    chomp $line;        
    if ($line =~ /^(\S+)/) {
        $key = $1;
        $hash{$key} = []; # this is the main difference
        print "Defined a name $key\n";
     } else {
        $line =~ s/^\s+//;
        push @{ $hash{$key} }, $line;
        print "Defined an arg $line\n";
     }
} 
```

我也稍微改变了编码风格，但本质上唯一的区别是我使用名称作为哈希*键*。我记得最后一次`$key`在循环外使用，以便所有 args 知道该去哪里。

当我想打印数据结构时，`each`如果名称的顺序不重要，我会使用该函数：

```
while (my ($name, $arrayRef) = each %hash) {
   my @args = @$arrayRef; # dereference the array
   print qq{name $name with args "@args"\n};
} 
```

或者

```
while (my ($name, $arrayRef) = each %hash) {
   print "name\t$name\n";
   print "arg\t$_\n" foreach @$arrayRef;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:19:29.857

我认为您需要不同的数据结构。试试这个：

```
use strict;
use warnings;
use Data::Dumper;

my @array;
my %hash;
my ( $name, $args, $key );

while ( my $line = <DATA> ) {
    chomp($line);
    if ( $line !~ /^\s/ ) {
        $key = $line;  #=~ /^\S+/g;
        print "Defined a name $key\n";
    }
    else {
        $line =~ s/^\s+//;
        push (@{$hash{$key}}, $line);
        print "Defined an arg $line\n";
    }
}

print Dumper(\%hash);

__DATA__
Sports
        Basketball
        Tennis
        Boxing
Guys
        Tom
        Dick
        Harry 
```

**输出：**

```
$VAR1 = {
          'Sports' => [
                        'Basketball',
                        'Tennis',
                        'Boxing'
                      ],
          'Guys' => [
                      'Tom',
                      'Dick',
                      'Harry'
                    ]
        }; 
```

我试图使解决方案接近您自己的代码。

编辑：如果你处理多级数据结构总是用来`Data::Dumper`转储你的数组/哈希中的确切内容。这将帮助您解决诸如此实例的分配问题。

您的数据结构如下所示：

```
$VAR1 = [
          {
            'args' => [
                        'Basketball',
                        'Tennis',
                        'Boxing',
                        'Tom',
                        'Dick',
                        'Harry'
                      ],
            'name' => 'Guys'
          },
          $VAR1->[0],
          $VAR1->[0],
          $VAR1->[0],
          $VAR1->[0],
          $VAR1->[0],
          $VAR1->[0],
          $VAR1->[0]
        ]; 
```

# ruby-on-rails - compass-rails 不让我做@import compass/reset

> ID：12046219
> 
> 赞同：1
> 
> 时间：2012-08-20T22:41:28.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, sass, asset-pipeline, compass-sass

启动应用程序时出现此错误：

```
File to import not found or unreadable: compass/reset.
Load path: /Users/nbenes/projects/lawgical_admin
  (in /Users/nbenes/projects/lawgical_admin/app/assets/stylesheets/screen.css.sass) 
```

（堆栈跟踪：）

```
app/assets/stylesheets/screen.css.sass:2
app/views/layouts/login.html.haml:7:in `_app_views_layouts_login_html_haml__1550030126632827390_2194381580' 
```

引发错误的文件如下所示：

`app/assets/screen.css.sass`

```
// This import applies a global reset to any page that imports this stylesheet.
@import compass/reset 
```

它在那条线上崩溃了，`import`我不知道如何让它看到指南针宝石。

我的 gemfile 有这个：

`Gemfile`

```
group :assets do
  gem 'sass-rails', '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'compass-rails'
end 
```

指南针配置是准系统：

`config/compass.rb`

```
# Require any additional compass plugins here.
project_type = :rails 
```

最后，样式表被拉到视图中：

`app/views/layouts/login.html.haml`

```
= stylesheet_link_tag 'screen', :media => 'screen, projection' 
```

不知何故，它只是没有看到指南针或导入它。我尝试跳过`compass/reset`导入，但后来它死了`@import blueprint`

在某些情况下，我正在将此应用程序升级到 rails 3.2 并使用资产管道而不是 Jammit 来编译资产（删除了 Jammit gem 和配置文件）。知道出了什么问题吗？:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T23:16:24.700

`config/application.rb`从 Rails 3.0.x 升级到 Rails 3.2.x 时，我错过了一个非常小但非常重要的变化

在 rails 3 中有一行内容如下：

```
Bundler.require(:default, Rails.env) if defined?(Bundler) 
```

我未能升级为如下：

```
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)   
end 
```

# php - 打开新的浏览器选项卡时评论系统中断

> ID：12046228
> 
> 赞同：1
> 
> 时间：2012-08-20T22:42:20.813
> 
> 标签：php, ajax, session

我的网站有一些设计问题。**下面是介绍：**

我有一个简单的动态页面，其中包含一个视频播放器，旁边还有一堆要播放的视频。[在视频播放器下有一个由jquery 表单插件](http://jquery.malsup.com/form/)驱动的评论部分，因为如果有人在观看时输入评论，我自然不希望页面刷新和重置视频。

因此，页面通过 $_GET 变量获取要播放的视频 ID，然后根据来自 MySQL 数据库的 ID 获取另外 10 个左右的视频链接，并播放第一个并将其余的链接列为播放器旁边的链接。

评论系统很简单。它从 MySQL 表中获取与播放的视频具有相同 ID 的所有评论，并通过前面提到的 jquery 表单插件列出它们。输入新评论后，它会通过定位相同的 ID 再次将评论添加到表中。

由于 ajax 表单插件从包含注释显示/添加代码的外部 PHP 文件中获取注释 - 我必须使用 $_SESSION 变量将信息从主页传递到这些文件。

**这就是问题所在：**

当客户正常浏览页面时，一切都按我的预期工作。但是当他决定将另一个视频打开到新标签时 - 评论系统崩溃了。

因此，我将视频 ID 从主页的 $_GET 变量传递给 $_SESSION 变量，并使用它让外部 show/add-comments-PHP-files 知道要显示哪些评论。当客户只使用一个选项卡但当他在新选项卡中打开另一个视频时，这工作正常，$_SESSION 变量当然会更新以匹配新选项卡当前正在播放的视频的评论，并且因为这个变量在两个选项卡中都是相同的 - 原始选项卡现在错误地指向新标签的评论。

所以..希望澄清一下：

> **浏览器标签1：**
> 
> $_SESSION['now_playing'] = 视频 1
> 
> [..client 在第二个选项卡中打开另一个视频]
> 
> **浏览器标签 2：**
> 
> $_SESSION['now_playing'] = 视频 2
> 
> ..从这一点开始，选项卡 1 的评论当然与选项卡 2 相同。

在创建新选项卡或类似的东西时是否有任何技巧来启动新会话？我对这一切都很陌生，所以可能显然很愚蠢。任何如何解决这个问题的指针都将不胜感激 - 即使这是实现评论的更好方法 - 必须在不刷新页面的情况下添加评论.

问候，kitsu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:15:57.120

您遇到的经典问题是会话数据由 cookie 控制，因此是每个浏览器而不是每个屏幕。

一种方法是在屏幕上设置一个隐藏字段。在处理 get 以创建屏幕时，将其设置为唯一值，并将该值用作会话数据的键。

然后将值与 ajax 请求一起传回 - 因此每个屏幕的请求都由会话数据的不同部分处理。

# knockout-mapping-plugin - 如何通过淘汰映射插件将 viewModel.items 与 serverItems 合并？

> ID：12046229
> 
> 赞同：1
> 
> 时间：2012-08-20T22:42:22.903
> 
> 标签：knockout-mapping-plugin

此代码不起作用：

```
var mappingOption = {
     key: function (data) {
        return ko.utils.unwrapObservable(data.id);
    }

ko.mapping.fromJS(serverItems, mappingOption, viewModel.items); 
```

我想联合这两个项目（viewModel.items 和 serverItems）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T01:44:34.263

```
var ClassA = new function(data) {
    ko.mapping.fromJS(data, {
        key: function (item) {
            return ko.utils.unwrapObservable(item.id);
        },
        'items': {
            create: function (itemData) {
                return new ClassB(itemData.data);
            }
        }
    }, self);
}

var ClassB = new function(data) {
    ko.mapping.fromJS(data, {
        key: function(item) {
            return ko.utils.unwrapObservable(item.id);
        };
    ), self);
} 
```

所以 ClassA 有一个 ClassB 的集合。在创建时，它调用映射函数，该函数对调用创建类 B 构造函数的项目集合（ClassB 类型）进行创建回调，并传入相关数据。

ClassB 然后从构造函数中获取数据，并将其合并到自身中。

由于 ClassB 的键映射，我很确定这将起作用。但是没有时间测试它;-)

# javascript - javascript和jQuery的嵌套对象函数中的变量范围

> ID：12046232
> 
> 赞同：0
> 
> 时间：2012-08-20T22:42:45.707
> 
> 标签：javascript, jquery

我写了两个对象。一个叫做List，另一个叫做Car。

```
function Car()
{
  this.make="";
  this.year="";
}

function List()
{
  this.cars = [];
} 
```

我还有另一个函数，它是一个对象 List 的方法，用于读取 XML 文件的信息，并将它们存储在 List 对象内的汽车数组中：

```
List.prototype.readXML = function()
{
  var i = 0;
  $.get('mydata.xml', function(xml){
    $(xml).find("item").each(function(){
      //Bug Point!!!
      this.cars.push(new Car()); //Push a Car object into array
      this.cars[i].ID = ($(this).attr("ID"));
     }); 
   });
 } 
```

但是，这行不通。每次调试都让我没有定义汽车...我尝试使用 var 而不是这个来定义汽车。并试图删除 this.cars.push 而不是 cars.push。但它仍然说汽车没有定义。

我假设我可能在这个问题中的变量范围有问题。谁能教我怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:46:15.523

问题出在你的 jquery 上

```
$.get('mydata.xml', function(xml){
    $(xml).find("item").each(function(){
      //Bug Point!!!
      this.cars.push(new Car()); //Push a Car object into array
      this.cars[i].ID = ($(this).attr("ID"));
     }); 
   }); 
```

`this`不指您期望它指的内容

克服这个问题的一种常见方法是将它分配给一个不同的变量，称为`that`或`self`

```
List.prototype.readXML = function()
{
  var i = 0;
  // Create a new variable called 'self' that you can refer to within different function scopes
  var self = this;
  $.get('mydata.xml', function(xml){
    $(xml).find("item").each(function(){
      self.cars.push(new Car()); //Push a Car object into array
      self.cars[i].ID = ($(this).attr("ID"));
     }); 
   });
 } 
```

这意味着您可以访问您需要访问的原始 List 对象。这种方法利用了闭包。

希望这可以帮助

* * *

编辑评论中提出的解释性问题：

```
List.prototype.readXML = function()
{
  // Create a new variable called 'self' that you can refer to within different function scopes
  var self = this;
  $.get('mydata.xml', function(xml){
    $(xml).find("item").each(function(i, domElem){
      var car = new Car();
      car.id = $(domElem).attr("ID");
      self.cars.push(car); //Push a Car object into array
     }); 
   });
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:46:28.380

您遇到的问题与闭包有关。

基本上，这在您的 .each 语句中发生了变化。.each 不再指代 List，它指的是 XML 中的当前“项目”。

要修复它，请参阅[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

```
List.prototype.readXML = function()
{
  var i = 0;
  var self = this;
  $.get('mydata.xml', function(xml){
    $(xml).find("item").each(function(){
      //Bug Point!!!
      self.cars.push(new Car()); //Push a Car object into array
      self.cars[i].ID = ($(this).attr("ID"));
     }); 
   });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:48:23.827

问题是*this*上下文随着 Ajax 回调而改变。我会在原型上定义一个*addCar*方法，并使用它来添加新车。像这样的东西：

```
List.prototype.addCar = function(data) {
  this.cars.push(new Car()); //Push a Car object into array
  this.cars[i].ID = ($(data).attr("ID"));
}

List.prototype.readXML = function()
{
  var i = 0;
  var self = this;
  $.get('mydata.xml', function(xml){
    $(xml).find("item").each(function(){ self.addCar(this); });
   });
 } 
```

# c++ - 内存是如何布局的，地址在哪个方向变大？使用工会

> ID：12046234
> 
> 赞同：1
> 
> 时间：2012-08-20T22:42:56.630
> 
> 标签：c++, unions, memory-address

我正在制作一个随机数生成器。我正在使用联合来访问字节。

```
typedef unsigned int uint;
typdef unsigned char uchar;
union
{
uint intBits;
uchar charBits[4];
}; 
```

// 是的，我知道整数不能保证为 4，但忽略它。

所以如果数字 1 存储在这个联合中，它看起来像

```
00000000 0000000 00000000 00000001 
```

正确的？

-1 的 int 看起来像

```
00000000 0000000 00000000 00000001 
```

或者

```
10000000 0000000 00000000 00000001 
```

所以 uint 的地址真的是 1 的位吗？charBits[0] 的地址是 1 的位吗？令人困惑的是这个。charBits[1]，必须向左移动才能到这里

```
 ! 
00000000 0000000 00000000 00000001 
```

那么内存地址是从右到左还是从左到右变大？

编辑：我在 64 位 Windows 7 系统英特尔 i7 CPU 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:48:01.063

这取决于机器架构。如果你的 CPU 是大端的，那么它会像你期望的那样工作：

int(4) => b3 b2 b1 b0

但是如果你的 CPU 是小端的，那么字节的方向是相反的：

int(4) => b0 b1 b2 b3

请注意，字节内的位顺序总是从左（最高有效）到右（最低有效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:03:24.577

完全没有必要这样做。您可以轻松地从 8 位值组成一个 32 位整数，如下所示：

```
int myInt = byte1 | (byte2<<8) | (byte3<<16) | (byte4<<24); 
```

您可以轻松地将 32 位整数分解为 8 位值，如下所示：

```
byte1 = myInt & 0xff;
byte2 = (myInt >> 8) & 0xff;
byte3 = (myInt >> 16) & 0xff;
byte4 = (myInt >> 24); 
```

因此，没有理由编写依赖于 CPU 或平台的内部表示细节的不可移植、难以理解的代码。只需编写清楚地执行您真正想要的代码即可。

# c++ - Project Euler #11，变量溢出

> ID：12046240
> 
> 赞同：1
> 
> 时间：2012-08-20T22:43:43.983
> 
> 标签：c++

尝试解决项目 euler #11 时，我输出的两个最大产品一直是负数。有点不知所措，我想通过使用 long long 数据类型我会很安全，但我不知道发生了什么。我不知道还能尝试什么，我可能正在做一些非常愚蠢的事情，但我已经在沙滩上旋转了几个小时，我想是时候伸出援手了

```
#include <iostream>
#include <fstream>
#include <iomanip>
using namespace std;

long long hZ (int matrix[20][20], int i, int j);

int main()
{
    fstream inFile;
    int matrix [20][20];
    long long max = 0;
    inFile.open("numbers.txt");
    if(!inFile)
        cout << "numbers.txt failed to open!" << endl;

    for(int i = 0; i < 20; i++)
        for(int j = 0; j < 20; j++)
            inFile >> matrix[i][j];

    for(int i = 0; i < 20; i++)
    {
        for(int j = 0; j < 16; j++)
        {
            long long temp = hZ(matrix, i, j);
            if (temp > max)
                max = temp;
            cout << matrix[i][j] << " " << matrix[i][j+1] << " " << matrix[i][j+2] << " " << matrix[i][j+3] << " " << matrix[i][j+4];
            //cout.setf(ios::fixed);
            cout << " product: " << temp << " max: " << max << endl;
        }
        cout << endl;
    }
    cout << "The max is: " << max;
    return 0;
}

long long hZ (int matrix[20][20], int i , int j)
{
        long long hZ_product = 0;
        hZ_product = (matrix[i][j] * matrix[i][j+1] * matrix[i][j+2] * matrix[i][j+3] * matrix[i][j+4]);

    return hZ_product;
} 
```

输出：（如果您将输出向下滚动到接近尾声，您将看到我对导致问题的行发表评论的位置）：

```
8 2 22 97 38 product: 1297472 max: 1297472
2 22 97 38 15 product: 2432760 max: 2432760
22 97 38 15 0 product: 0 max: 2432760
97 38 15 0 40 product: 0 max: 2432760
38 15 0 40 0 product: 0 max: 2432760
15 0 40 0 75 product: 0 max: 2432760
0 40 0 75 4 product: 0 max: 2432760
40 0 75 4 5 product: 0 max: 2432760
0 75 4 5 7 product: 0 max: 2432760
75 4 5 7 78 product: 819000 max: 2432760
4 5 7 78 52 product: 567840 max: 2432760
5 7 78 52 12 product: 1703520 max: 2432760
7 78 52 12 50 product: 17035200 max: 17035200
78 52 12 50 77 product: 187387200 max: 187387200
52 12 50 77 91 product: 218618400 max: 218618400
12 50 77 91 8 product: 33633600 max: 218618400

49 49 99 40 17 product: 161635320 max: 218618400
49 99 40 17 81 product: 267193080 max: 267193080
99 40 17 81 18 product: 98152560 max: 267193080
40 17 81 18 57 product: 56512080 max: 267193080
17 81 18 57 60 product: 84768120 max: 267193080
81 18 57 60 87 product: 433813320 max: 433813320
18 57 60 87 17 product: 91047240 max: 433813320
57 60 87 17 40 product: 202327200 max: 433813320
60 87 17 40 98 product: 347860800 max: 433813320
87 17 40 98 43 product: 249300240 max: 433813320
17 40 98 43 69 product: 197720880 max: 433813320
40 98 43 69 48 product: 558270720 max: 558270720
98 43 69 48 4 product: 55827072 max: 558270720
43 69 48 4 56 product: 31901184 max: 558270720
69 48 4 56 62 product: 45997056 max: 558270720
48 4 56 62 0 product: 0 max: 558270720

81 49 31 73 55 product: 494001585 max: 558270720
49 31 73 55 79 product: 481804015 max: 558270720
31 73 55 79 14 product: 137658290 max: 558270720
73 55 79 14 29 product: 128777110 max: 558270720
55 79 14 29 93 product: 164058510 max: 558270720
79 14 29 93 71 product: 211784622 max: 558270720
14 29 93 71 40 product: 107232720 max: 558270720
29 93 71 40 67 product: 513185160 max: 558270720
93 71 40 67 53 product: 937890120 max: 937890120
71 40 67 53 88 product: 887465920 max: 937890120
40 67 53 88 30 product: 374985600 max: 937890120
67 53 88 30 3 product: 28123920 max: 937890120
53 88 30 3 49 product: 20568240 max: 937890120
88 30 3 49 13 product: 5045040 max: 937890120
30 3 49 13 36 product: 2063880 max: 937890120
3 49 13 36 65 product: 4471740 max: 937890120

52 70 95 23 4 product: 31813600 max: 937890120
70 95 23 4 60 product: 36708000 max: 937890120
95 23 4 60 11 product: 5768400 max: 937890120
23 4 60 11 42 product: 2550240 max: 937890120
4 60 11 42 69 product: 7650720 max: 937890120
60 11 42 69 24 product: 45904320 max: 937890120
11 42 69 24 68 product: 52024896 max: 937890120
42 69 24 68 56 product: 264854016 max: 937890120
69 24 68 56 1 product: 6306048 max: 937890120
24 68 56 1 32 product: 2924544 max: 937890120
68 56 1 32 56 product: 6823936 max: 937890120
56 1 32 56 71 product: 7124992 max: 937890120
1 32 56 71 37 product: 4707584 max: 937890120
32 56 71 37 2 product: 9415168 max: 937890120
56 71 37 2 36 product: 10592064 max: 937890120
71 37 2 36 91 product: 17212104 max: 937890120

22 31 16 71 51 product: 39512352 max: 937890120
31 16 71 51 67 product: 120333072 max: 937890120
16 71 51 67 63 product: 244547856 max: 937890120
71 51 67 63 89 product: 1360297449 max: 1360297449
51 67 63 89 41 product: 785523879 max: 1360297449
67 63 89 41 92 product: 1417023468 max: 1417023468
63 89 41 92 36 product: 761385744 max: 1417023468
89 41 92 36 54 product: 652616352 max: 1417023468
41 92 36 54 22 product: 161320896 max: 1417023468
92 36 54 22 40 product: 157386240 max: 1417023468
36 54 22 40 40 product: 68428800 max: 1417023468
54 22 40 40 28 product: 53222400 max: 1417023468
22 40 40 28 66 product: 65049600 max: 1417023468
40 40 28 66 33 product: 97574400 max: 1417023468
40 28 66 33 13 product: 31711680 max: 1417023468
28 66 33 13 80 product: 63423360 max: 1417023468

24 47 32 60 99 product: 214410240 max: 1417023468
47 32 60 99 3 product: 26801280 max: 1417023468
32 60 99 3 45 product: 25660800 max: 1417023468
60 99 3 45 2 product: 1603800 max: 1417023468
99 3 45 2 44 product: 1176120 max: 1417023468
3 45 2 44 75 product: 891000 max: 1417023468
45 2 44 75 33 product: 9801000 max: 1417023468
2 44 75 33 53 product: 11543400 max: 1417023468
44 75 33 53 78 product: 450192600 max: 1417023468
75 33 53 78 36 product: 368339400 max: 1417023468
33 53 78 36 84 product: 412540128 max: 1417023468
53 78 36 84 20 product: 250024320 max: 1417023468
78 36 84 20 35 product: 165110400 max: 1417023468
36 84 20 35 17 product: 35985600 max: 1417023468
84 20 35 17 12 product: 11995200 max: 1417023468
20 35 17 12 50 product: 7140000 max: 1417023468

32 98 81 28 64 product: 455196672 max: 1417023468
98 81 28 64 23 product: 327172608 max: 1417023468
81 28 64 23 67 product: 223679232 max: 1417023468
28 64 23 67 10 product: 27614720 max: 1417023468
64 23 67 10 26 product: 25642240 max: 1417023468
23 67 10 26 38 product: 15225080 max: 1417023468
67 10 26 38 40 product: 26478400 max: 1417023468
10 26 38 40 67 product: 26478400 max: 1417023468
26 38 40 67 59 product: 156222560 max: 1417023468
38 40 67 59 54 product: 324462240 max: 1417023468
40 67 59 54 70 product: 597693600 max: 1417023468
67 59 54 70 66 product: 986194440 max: 1417023468
59 54 70 66 18 product: 264947760 max: 1417023468
54 70 66 18 38 product: 170644320 max: 1417023468
70 66 18 38 64 product: 202245120 max: 1417023468
66 18 38 64 70 product: 202245120 max: 1417023468

67 26 20 68 2 product: 4738240 max: 1417023468
26 20 68 2 62 product: 4384640 max: 1417023468
20 68 2 62 12 product: 2023680 max: 1417023468
68 2 62 12 20 product: 2023680 max: 1417023468
2 62 12 20 95 product: 2827200 max: 1417023468
62 12 20 95 63 product: 89056800 max: 1417023468
12 20 95 63 94 product: 135021600 max: 1417023468
20 95 63 94 39 product: 438820200 max: 1417023468
95 63 94 39 63 product: 1382283630 max: 1417023468
63 94 39 63 8 product: 116402832 max: 1417023468
94 39 63 8 40 product: 73906560 max: 1417023468
39 63 8 40 91 product: 71547840 max: 1417023468
63 8 40 91 66 product: 121080960 max: 1417023468
8 40 91 66 49 product: 94174080 max: 1417023468
40 91 66 49 94 product: 1106545440 max: 1417023468
91 66 49 94 21 product: 580936356 max: 1417023468

24 55 58 5 66 product: 25264800 max: 1417023468
55 58 5 66 73 product: 76847100 max: 1417023468
58 5 66 73 99 product: 138324780 max: 1417023468
5 66 73 99 26 product: 62007660 max: 1417023468
66 73 99 26 97 product: 1202948604 max: 1417023468
73 99 26 97 17 product: 309850398 max: 1417023468
99 26 97 17 78 product: 331073028 max: 1417023468
26 97 17 78 78 product: 260845416 max: 1417023468
97 17 78 78 96 product: 963121536 max: 1417023468
17 78 78 96 83 product: 824114304 max: 1417023468
78 78 96 83 14 product: 678682368 max: 1417023468
78 96 83 14 88 product: 765692928 max: 1417023468
96 83 14 88 34 product: 333763584 max: 1417023468
83 14 88 34 89 product: 309426656 max: 1417023468
14 88 34 89 63 product: 234866016 max: 1417023468
88 34 89 63 72 product: 1207882368 max: 1417023468

21 36 23 9 75 product: 11736900 max: 1417023468
36 23 9 75 0 product: 0 max: 1417023468
23 9 75 0 76 product: 0 max: 1417023468
9 75 0 76 44 product: 0 max: 1417023468
75 0 76 44 20 product: 0 max: 1417023468
0 76 44 20 45 product: 0 max: 1417023468
76 44 20 45 35 product: 105336000 max: 1417023468
44 20 45 35 14 product: 19404000 max: 1417023468
20 45 35 14 0 product: 0 max: 1417023468
45 35 14 0 61 product: 0 max: 1417023468
35 14 0 61 33 product: 0 max: 1417023468
14 0 61 33 97 product: 0 max: 1417023468
0 61 33 97 34 product: 0 max: 1417023468
61 33 97 34 31 product: 205805094 max: 1417023468
33 97 34 31 33 product: 111337182 max: 1417023468
97 34 31 33 95 product: 320516130 max: 1417023468

78 17 53 28 22 product: 43291248 max: 1417023468
17 53 28 22 75 product: 41626200 max: 1417023468
53 28 22 75 31 product: 75906600 max: 1417023468
28 22 75 31 67 product: 95957400 max: 1417023468
22 75 31 67 15 product: 51405750 max: 1417023468
75 31 67 15 94 product: 219642750 max: 1417023468
31 67 15 94 3 product: 8785710 max: 1417023468
67 15 94 3 80 product: 22672800 max: 1417023468
15 94 3 80 4 product: 1353600 max: 1417023468
94 3 80 4 62 product: 5594880 max: 1417023468
3 80 4 62 16 product: 952320 max: 1417023468
80 4 62 16 14 product: 4444160 max: 1417023468
4 62 16 14 9 product: 499968 max: 1417023468
62 16 14 9 53 product: 6624576 max: 1417023468
16 14 9 53 56 product: 5983488 max: 1417023468
14 9 53 56 92 product: 34405056 max: 1417023468

16 39 5 42 96 product: 12579840 max: 1417023468
39 5 42 96 35 product: 27518400 max: 1417023468
5 42 96 35 31 product: 21873600 max: 1417023468
42 96 35 31 47 product: 205611840 max: 1417023468
96 35 31 47 55 product: 269253600 max: 1417023468
35 31 47 55 58 product: 162674050 max: 1417023468
31 47 55 58 88 product: 409009040 max: 1417023468
47 55 58 88 24 product: 316652160 max: 1417023468
55 58 88 24 0 product: 0 max: 1417023468
58 88 24 0 17 product: 0 max: 1417023468
88 24 0 17 54 product: 0 max: 1417023468
24 0 17 54 24 product: 0 max: 1417023468
0 17 54 24 36 product: 0 max: 1417023468
17 54 24 36 29 product: 23001408 max: 1417023468
54 24 36 29 85 product: 115007040 max: 1417023468
24 36 29 85 57 product: 121396320 max: 1417023468

86 56 0 48 35 product: 0 max: 1417023468
56 0 48 35 71 product: 0 max: 1417023468
0 48 35 71 89 product: 0 max: 1417023468
48 35 71 89 7 product: 74311440 max: 1417023468
35 71 89 7 5 product: 7740775 max: 1417023468
71 89 7 5 44 product: 9731260 max: 1417023468
89 7 5 44 44 product: 6030640 max: 1417023468
7 5 44 44 37 product: 2507120 max: 1417023468
5 44 44 37 44 product: 15759040 max: 1417023468
44 44 37 44 60 product: 189108480 max: 1417023468
44 37 44 60 21 product: 90256320 max: 1417023468
37 44 60 21 58 product: 118974240 max: 1417023468
44 60 21 58 51 product: 163991520 max: 1417023468
60 21 58 51 54 product: 201262320 max: 1417023468
21 58 51 54 17 product: 57024324 max: 1417023468
58 51 54 17 58 product: 157495752 max: 1417023468

19 80 81 68 5 product: 41860800 max: 1417023468
80 81 68 5 94 product: 207100800 max: 1417023468
81 68 5 94 47 product: 121671720 max: 1417023468
68 5 94 47 69 product: 103646280 max: 1417023468
5 94 47 69 28 product: 42677880 max: 1417023468
94 47 69 28 73 product: 623097048 max: 1417023468
47 69 28 73 92 product: 609839664 max: 1417023468
69 28 73 92 13 product: 168679056 max: 1417023468
28 73 92 13 86 product: 210237664 max: 1417023468
73 92 13 86 52 product: 390441376 max: 1417023468
92 13 86 52 17 product: 90924704 max: 1417023468
13 86 52 17 77 product: 76100024 max: 1417023468
86 52 17 77 4 product: 23415392 max: 1417023468
52 17 77 4 89 product: 24232208 max: 1417023468
17 77 4 89 55 product: 25630220 max: 1417023468
77 4 89 55 40 product: 60306400 max: 1417023468

4 52 8 83 97 product: 13396864 max: 1417023468
52 8 83 97 35 product: 117222560 max: 1417023468
8 83 97 35 99 product: 223173720 max: 1417023468
83 97 35 99 16 product: 446347440 max: 1417023468
97 35 99 16 7 product: 37643760 max: 1417023468
35 99 16 7 97 product: 37643760 max: 1417023468
99 16 7 97 57 product: 61305552 max: 1417023468
16 7 97 57 32 product: 19815936 max: 1417023468
7 97 57 32 16 product: 19815936 max: 1417023468
97 57 32 16 26 product: 73602048 max: 1417023468
57 32 16 26 26 product: 19728384 max: 1417023468
32 16 26 26 79 product: 27342848 max: 1417023468
16 26 26 79 33 product: 28197312 max: 1417023468
26 26 79 33 27 product: 47582964 max: 1417023468
26 79 33 27 98 product: 179351172 max: 1417023468
79 33 27 98 66 product: 455276052 max: 1417023468

88 36 68 87 57 product: 1068287616 max: 1417023468
36 68 87 57 62 product: 752657184 max: 1417023468
68 87 57 62 20 product: 418142880 max: 1417023468
87 57 62 20 72 product: 442739520 max: 1417023468
57 62 20 72 3 product: 15266880 max: 1417023468
62 20 72 3 46 product: 12320640 max: 1417023468
20 72 3 46 33 product: 6557760 max: 1417023468
72 3 46 33 67 product: 21968496 max: 1417023468
3 46 33 67 46 product: 14035428 max: 1417023468
46 33 67 46 55 product: 257316180 max: 1417023468
33 67 46 55 12 product: 67125960 max: 1417023468
67 46 55 12 32 product: 65091840 max: 1417023468
46 55 12 32 63 product: 61205760 max: 1417023468
55 12 32 63 93 product: 123742080 max: 1417023468
12 32 63 93 53 product: 119242368 max: 1417023468
32 63 93 53 69 product: 685643616 max: 1417023468

4 42 16 73 38 product: 7456512 max: 1417023468
42 16 73 38 25 product: 46603200 max: 1417023468
16 73 38 25 39 product: 43274400 max: 1417023468
73 38 25 39 11 product: 29751150 max: 1417023468
38 25 39 11 24 product: 9781200 max: 1417023468
25 39 11 24 94 product: 24195600 max: 1417023468
39 11 24 94 72 product: 69683328 max: 1417023468
11 24 94 72 18 product: 32161536 max: 1417023468
24 94 72 18 8 product: 23390208 max: 1417023468
94 72 18 8 46 product: 44831232 max: 1417023468
72 18 8 46 29 product: 13830912 max: 1417023468
18 8 46 29 32 product: 6147072 max: 1417023468
8 46 29 32 40 product: 13660160 max: 1417023468
46 29 32 40 62 product: 105866240 max: 1417023468
29 32 40 62 76 product: 174909440 max: 1417023468
32 40 62 76 36 product: 217128960 max: 1417023468

20 69 36 41 72 product: 146655360 max: 1417023468
69 36 41 72 30 product: 219983040 max: 1417023468
36 41 72 30 23 product: 73327680 max: 1417023468
41 72 30 23 88 product: 179245440 max: 1417023468
72 30 23 88 34 product: 148642560 max: 1417023468
30 23 88 34 62 product: 127997760 max: 1417023468
23 88 34 62 99 product: 422392608 max: 1417023468
88 34 62 99 69 product: 1267177824 max: 1417023468
34 62 99 69 82 product: 1180779336 max: 1417023468
62 99 69 82 67 product: -1968137428 max: 1417023468   //ISSUE HERE
99 69 82 67 59 product: -2080725970 max: 1417023468   //ISSUE HERE
69 82 67 59 85 product: 1901116290 max: 1901116290
82 67 59 85 74 product: 2038878340 max: 2038878340
67 59 85 74 4 product: 99457480 max: 2038878340
59 85 74 4 36 product: 53439840 max: 2038878340
85 74 4 36 16 product: 14492160 max: 2038878340

20 73 35 29 78 product: 115588200 max: 2038878340
73 35 29 78 31 product: 179161710 max: 2038878340
35 29 78 31 90 product: 220884300 max: 2038878340
29 78 31 90 1 product: 6310980 max: 2038878340
78 31 90 1 74 product: 16103880 max: 2038878340
31 90 1 74 31 product: 6400260 max: 2038878340
90 1 74 31 49 product: 10116540 max: 2038878340
1 74 31 49 71 product: 7980826 max: 2038878340
74 31 49 71 48 product: 383079648 max: 2038878340
31 49 71 48 86 product: 445200672 max: 2038878340
49 71 48 86 81 product: 1163266272 max: 2038878340
71 48 86 81 16 product: 379842048 max: 2038878340
48 86 81 16 23 product: 123047424 max: 2038878340
86 81 16 23 57 product: 146118816 max: 2038878340
81 16 23 57 5 product: 8495280 max: 2038878340
16 23 57 5 54 product: 5663520 max: 2038878340

1 70 54 71 83 product: 22275540 max: 2038878340
70 54 71 83 51 product: 1136052540 max: 2038878340
54 71 83 51 54 product: 876383388 max: 2038878340
71 83 51 54 69 product: 1119823218 max: 2038878340
83 51 54 69 16 product: 252354528 max: 2038878340
51 54 69 16 92 product: 279718272 max: 2038878340
54 69 16 92 33 product: 180994176 max: 2038878340
69 16 92 33 48 product: 160883712 max: 2038878340
16 92 33 48 61 product: 142230528 max: 2038878340
92 33 48 61 43 product: 382244544 max: 2038878340
33 48 61 43 52 product: 216051264 max: 2038878340
48 61 43 52 1 product: 6547008 max: 2038878340
61 43 52 1 89 product: 12139244 max: 2038878340
43 52 1 89 19 product: 3781076 max: 2038878340
52 1 89 19 67 product: 5891444 max: 2038878340
1 89 19 67 48 product: 5438256 max: 2038878340

The max is: 2038878340 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:48:36.367

问题是您的产品计算是`int`精确完成的，然后存储到`long long`. 您需要`long long`精确地进行计算。

```
long long hZ_product = 1;
hZ_product *= matrix[i][j];
hZ_product *= matrix[i][j+1];
hZ_product *= matrix[i][j+2];
hZ_product *= matrix[i][j+3];
hZ_product *= matrix[i][j+4]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T22:48:21.387

在这一行：

```
hZ_product = (matrix[i][j] * matrix[i][j+1] * matrix[i][j+2] * matrix[i][j+3] * matrix[i][j+4]); 
```

您将一堆整数值相乘，*然后*将结果分配给`long long hZ_product`. 这导致整数溢出。

尝试将乘法中的每个操作数转换为*long long*以避免溢出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T23:22:18.577

此问题的正确解决方案不会溢出`int`. 仔细阅读问题描述，它需要“**四个**相邻数字的最大乘积”。网格的内容是两位数，因此最大可能值为 99^4 或 96059601。这很适合 32 位`int`. 当问题只要求*四个*相邻的数字时，您不应该将*五个网格单元相乘。*一旦你修复了，你仍然需要检查所有方向（水平、垂直和对角线）。继续努力，祝你好运。

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T22:52:12.943

您正在溢出 4 字节整数。

首先，我想说的是，欧拉项目要你乘以4个整数。你乘以 5 个整数。如果只将 4 个整数相乘，则不会溢出。

假设您要乘以 5 个整数，则在计算乘积之前，此行不会转换为 long long。

```
hZ_product = (matrix[i][j] * matrix[i][j+1] * matrix[i][j+2] * matrix[i][j+3] * matrix[i][j+4]); 
```

什么时候来不及了，已经溢出来了。

解决此问题的最简单方法是：

```
hZ_product = (long long)matrix[i][j] * matrix[i][j+1] * matrix[i][j+2] * matrix[i][j+3] * matrix[i][j+4]; 
```

这会将第一个整数转换为 long long。其余的将自动施放/提升。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T19:38:51.017

谢谢你们每一个人的帮助。

这是我想出的最终代码。我敢肯定，它可以提高一点效率，比如不运行 4 个单独的 for 循环来检查水平、垂直、左对角和右对角产品，但我不知道如何在内部自定义每个迭代参数以实现这一点。此外，当我编写代码时，我意识到编写四个函数真的没有必要，因为我最终有 4 个不同的 for 循环，最后编写函数并没有使代码变得更简单，并且看到这是一个项目欧拉问题，可维护性并不是真正的考虑因素。我显然不是一个非常有经验的程序员，所以我觉得我每时每刻都会犯错误。我的最终产品是否存在明显的低效率问题？

```
#include <iostream>
#include <fstream>
using namespace std;

int hZ (int matrix[20][20], int i, int j);
int vZ (int matrix[20][20], int i, int j);
int dZ_right (int matrix[20][20], int i, int j);
int dZ_left (int matrix[20][20], int i, int j);

int main()
{
    fstream inFile;
    int matrix [20][20];
    int hZ_max, vZ_max, dZ_right_max, dZ_left_max = 0;
    inFile.open("numbers.txt");
    if(!inFile)
        cout << "numbers.txt failed to open!" << endl;

    //Populates the array with data

    for(int i = 0; i < 20; i++)
        for(int j = 0; j < 20; j++)
            inFile >> matrix[i][j];

    //Horizontal Analysis

    for(int i = 0; i < 20; i++)
    {
        for(int j = 0; j < 17; j++)
        {
            int hZ_temp = hZ(matrix, i, j);
            if (hZ_temp > hZ_max)
            {
                hZ_max = hZ_temp;
                cout << "hZ: " << matrix[i][j] << " " << matrix[i][j+1] << " " << matrix[i][j+2] << " " << matrix [i][j+3] << endl;
            }
        }
    }

    //Vertical Analysis

    for(int i = 0; i < 17; i++)
        {
            for(int j = 0; j < 20; j++)
            {
                int vZ_temp = vZ(matrix, i, j);
                if (vZ_temp > vZ_max)
                {
                    vZ_max = vZ_temp;
                    cout << "vZ: " << matrix[i][j] << " " << matrix[i+1][j] << " " << matrix[i+2][j] << " " << matrix [i+3][j] << endl;
                }
            }
        }

    //Right Diagonal Analysis

    for(int i = 0; i < 17; i++)
    {
        for(int j = 0; j < 17; j++)
        {
            int dZ_right_temp = dZ_right(matrix, i, j);
                if (dZ_right_temp > dZ_right_max)
                {
                    dZ_right_max = dZ_right_temp;
                    cout << "dZ_right: " << matrix[i][j] << " " << matrix[i+1][j+1] << " " << matrix[i+2][j+2] << " " << matrix [i+3][j+3] << endl;
                }
        }
    }

    //Left Diagonal Analysis

    for(int i = 0; i < 17; i++)
    {
        for(int j = 3; j < 17; j++ )
        {
            int dZ_left_temp = dZ_left(matrix, i, j);
                if(dZ_left_temp > dZ_left_max)
                {
                    dZ_left_max = dZ_left_temp;
                    cout << "dZ_left: "<< matrix[i][j] << " " << matrix[i+1][j-1] << " " << matrix[i+2][j-2] << " " << matrix [i+3][j-3] << endl;
                }
        }
    }

    cout << "The max horizontal product is: " << hZ_max << endl;
    cout << "The max vertical product is: " << vZ_max << endl;
    cout << "The max right diagonal product is: " << dZ_right_max << endl;
    cout << "The max left diagonal product is: " << dZ_left_max << endl;

    return 0;
}

//Horizontal Analysis function

int hZ (int matrix[20][20], int i , int j)
{
        int hZ_product = 0;
        hZ_product = matrix[i][j] * matrix[i][j+1] * matrix[i][j+2] * matrix[i][j+3];

    return hZ_product;
}

//Vertical Analysis function

int vZ (int matrix[20][20], int i , int j)
{
        int vZ_product = 0;
        vZ_product = matrix[i][j] * matrix[i+1][j] * matrix[i+2][j] * matrix[i+3][j];

    return vZ_product;
}

//Right Diagonal function

int dZ_right (int matrix[20][20], int i , int j)
{
        int dZ_right_product = 0;
        dZ_right_product = matrix[i][j] * matrix[i+1][j+1] * matrix[i+2][j+2] * matrix[i+3][j+3];

    return dZ_right_product;
}

//Left Diagonal function

int dZ_left (int matrix[20][20], int i, int j)
{
    int dZ_left_product = 0;
    dZ_left_product = matrix[i][j] * matrix[i+1][j-1] * matrix[i+2][j-2] * matrix [i+3][j-3];

    return dZ_left_product;
} 
```*

# jquery - 简单模式，jQuery 1.8.0 和 IE9

> ID：12046242
> 
> 赞同：15
> 
> 时间：2012-08-20T22:43:53.323
> 
> 标签：jquery, simplemodal

Simple Modal 使用 jQuery 1.8.0 和 IE9 失败并出现错误：

> SCRIPT438：对象不支持属性或方法“removeExpression”

下面的小提琴演示（*记得用 IE9 运行*）

[http://jsfiddle.net/ericjohannsen/ZVEWa/1/](http://jsfiddle.net/ericjohannsen/ZVEWa/1/)

将 jQuery 切换到 1.7.2 会导致错误消失。

有没有办法解决这个问题？

**可能相关**（OP 说问题出在 jQuery 1.7.1 和 iframe 上）

[SimpleModal 在 IE 9 中不起作用（在 Iframe 中）](https://stackoverflow.com/questions/10782849/simplemodal-doesnt-work-in-ie-9-inside-iframe)

**不相关**（jQuery 1.5 问题）

[IE9中简单模态的问题](https://stackoverflow.com/questions/5499517/problems-with-simple-modal-in-ie9)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-08-02T17:31:32.783

只是为了提供一个更新的答案（截至 2013 年 8 月 2 日），因为我在寻找同样的错误时偶然发现了这篇文章......

正如salgiza 在上面的评论中指出的那样，jQuery 1.10 发生了一个变化，它放弃了`$.support.boxModel`对 Simple Modal 最新版本所使用的 . 的支持。

要解决此问题，您必须更改简单模式源代码中的以下行：

```
 // (Line 239) $.support.boxModel is undefined if checked earlier
        //browser.ieQuirks = browser.msie && !$.support.boxModel;
        browser.ieQuirks = browser.msie && (document.compatMode === "BackCompat"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-26T02:20:06.677

看来问题可以通过将 $.boxModel 更改为 $.support.boxModel 来解决。[您可以在http://github.com/ericmmartin/simplemodal](http://github.com/ericmmartin/simplemodal)获取更新版本。

我将尝试很快发布一个完整打包的版本，带有最小版本。

[编辑] SimpleModal 1.4.3 已经[发布](http://www.ericmmartin.com/simplemodal-1-4-3-released)，应该可以解决这个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:27:12.360

有与上面提到的相同的错误“对象不支持属性或方法'removeExpression'”。模式窗口在除 IE 之外的所有浏览器中都弹出。（使用文件 jquery.simplemodal.js 的非缩小版本 1.4.3）

`try {} catch (e) {}`通过放置所有动态属性来修复它。

例如

```
try {
  s.removeExpression('top');
}
catch (e) {
  //The support for dynamic properties has been removed in Internet Explorer 9
} 
```

模态窗口现在显示在所有浏览器中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T15:14:07.400

“表达式”的功能检测可以解决问题，请查看我的修补程序：

[https://github.com/ericmmartin/simplemodal/pull/34](https://github.com/ericmmartin/simplemodal/pull/34) [https://github.com/redaxmedia/simplemodal/blob/master/src/jquery.simplemodal.js](https://github.com/redaxmedia/simplemodal/blob/master/src/jquery.simplemodal.js)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T01:22:25.393

另一个答案中建议的更新没有解决问题。该错误是由于在 IE9`removeExpression`中`setExpression`不可用。我在我的网站上通过注释掉任何使用这两种表达方式的东西来解决这个问题（我不关心 IE6-7 的兼容性）。

# django - 如何在 Django 项目中使用咖啡脚本？

> ID：12046245
> 
> 赞同：3
> 
> 时间：2012-08-20T22:44:20.687
> 
> 标签：django, coffeescript, django-compressor

我是 Django 的新开发人员，我想在我的虚拟项目中使用一些 CoffeeScript。但是，有关此主题的文档并不好，我想从专家那里知道哪个是最佳选择。

我正在寻找像压缩机这样的可能性，但它仍然很困惑。我真的很感激一些建议。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:16:51.300

对于自动编译，有[django-coffeescript](http://pypi.python.org/pypi/django-coffeescript)。对于更完整的工具链（有点像 Rails Sprockets） ，可以使用[Gears](http://pypi.python.org/pypi/Gears)，这是一个带有 Django、Flask 插件或命令行编译插件的独立项目。

然而，当我将 CoffeeScript 与 Django 一起使用时，我最喜欢将编译设置为构建过程的一部分（无论如何都有一个），我主要使用自定义 [Paver](http://paver.github.com/paver/)脚本和目录监视工具（如[watchdog](http://pypi.python.org/pypi/watchdog) / [kicker](https://github.com/alloy/kicker) ) 将`.coffee`文件编译为 Javascript 并将它们放在我的静态目录中。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-08-20T23:00:32.703

你的问题到底是什么？Django 会让你使用任何你想要的 JS 库。只需像没有 Django 一样将它添加到您的 HTML 页面或模板中。如果是关于静态文件的服务，请检查：[https ://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/](https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/)

# html - jQuery点击功能和列表项

> ID：12046252
> 
> 赞同：2
> 
> 时间：2012-08-20T22:44:55.237
> 
> 标签：html, jquery

最近，我遇到了 jQuery 点击事件的问题。在此示例中，我想在用户单击列表项时使用 ajax post。Firebug 上没有弹出错误，并且 jquery 脚本在代码中。当我运行代码时，什么也没有发生。代码如下。

```
<script type="text/javascript" >
$('#pop').click(function() {
var pop = 'pop';
$.post('ajax_file.php', {
    style: pop
    }, function(data) {
        $('#tube').html(data);  
        });});
</script>

<ul>
    <li id="pop">Pop</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:47:11.857

试试这个：

```
$(document).ready(function(){
   $('#pop').click(function() {
       var pop = 'pop';
       $.post('ajax_style_homepage.php', {
         style: pop
       }, function(data) {
           $('#tube').html(data);  
       });
    });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:47:41.360

将它包装在文档[`ready`](http://api.jquery.com/ready/)函数中，看看会发生什么。你也不需要清空。您可以调用该`html`方法，它将覆盖内容。

```
$(function(){
   $('#pop').click(function() {
        var pop = 'pop';
        $.post('ajax_style_homepage.php', { style: pop}, function(data) {
            $('#tube').html(data);  
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T23:06:00.147

与其他两个答案相同的另一种方法，而无需在页面加载时绑定您的点击方法。只需将列表项上的 onclick 属性设置为包含 ajax 调用的函数。在我看来，这更容易理解。

```
<script type="text/javascript" >
function makeAJAXPost(){
    var pop = 'pop';
    $.post('ajax_file.php', {
        style: pop
        }, function(data) {
            $('#tube').html(data);  
    });     
}
</script>

<ul>
    <li onclick="makeAJAXPost()" id="pop">Pop</li>
</ul> 
```

# mysql - MySql 闭包表不支持不同父类的重复子类

> ID：12046260
> 
> 赞同：1
> 
> 时间：2012-08-20T22:45:48.453
> 
> 标签：mysql, transitive-closure-table

我一直在用这个封闭表转圈子。我遇到的问题是第二次出现后代。我有出现在多个父类别中的子类别实例。为了简单起见，我回到了这个例子：

```
drop table if exists closure;
drop table if exists nodes;

create table nodes (
node int auto_increment primary key,
label varchar(20) not null
);

insert into nodes (node, label) values
(1, 'rootree'),
(2, '1stbranch'),
(3, 'midbranch'),
(4, 'corebranch'),
(5, 'leafnodes'),
(6, 'lastbranch'),
(7, 'lastleaf');

create table closure (
ancestor int not null,
descendant int not null,
primary key (ancestor, descendant),
foreign key (ancestor) references nodes(node),
foreign key (descendant) references nodes(node)
);

insert into closure (ancestor, descendant) values
(1,1), (1,2), (1,3), (1,4), (1,5), (1,6), (1,7),
(2,2),
(3,3), (3,4), (3,5),
(4,4), (4,5),
(5,5),
(6,6), (6,7),
(7,7); 
```

使用以下查询，我可以获得所需的结果：

```
select group_concat(n.label order by n.node separator ' -> ') as path
from closure d
join closure a on (a.descendant = d.descendant)
join nodes n on (n.node = a.ancestor)
where d.ancestor = 1 and d.descendant != d.ancestor
group by d.descendant; 
```

结果：

```
rootree -> 1stbranch
rootree -> midbranch
rootree -> midbranch -> corebranch
rootree -> midbranch -> corebranch -> leafnodes
rootree -> lastbranch
rootree -> lastbranch -> lastleaf 
```

但是如果我添加另一个孩子，例如一个已经存在的孩子，我想让叶子节点成为 roottree -> lastbranch -> lastleaf 的孩子

我在闭包表中插入两条新记录：（6-5）和（7-5）

然后所有的地狱都崩溃了。我已经尝试了我能想到的一切，但我没有得到任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:31:51.477

我在这里找到了答案：[Converting the Closure Table from a Weak Entity](http://b2berry.com/2012/08/04/converting-the-closure-table-from-a-weak-entity/)

**回答：**我在闭包表中添加了两个字段来保存祖先和后代的 id。现在节点独立于实际值。该结构保持连接，用于插入、删除、查询等，但每个节点保留的值是它们自己的实体，可以替换为任何其他实体，而不影响树的结构。这使我能够解决我的特定问题，即在多个父类别中使用相同的子类别。我希望还有许多其他的好处，还有待发现。

# jquery - 使用 jQuery 触发 +1 & -1 滚动

> ID：12046261
> 
> 赞同：0
> 
> 时间：2012-08-20T22:45:48.817
> 
> 标签：jquery, jquery-isotope, lazy-loading

我使用以下函数使用 jQuery 触发 +1 和 -1 滚动，以便在将延迟加载与同位素结合使用时显示图像，否则在过滤时图像不会显示。

```
function forceLoad(){
    $.scrollTo("+=1px");
    $.scrollTo("-=1px");
}; 
```

它适用于 FF 和 Chrome 浏览器，但不适用于 Safari（使用版本 6 进行测试）。

关于我可以尝试使用 jQuery 产生相同行为的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:53:30.207

如果您使用的是[LazyLoad 插件](http://www.appelsiini.net/projects/lazyload)`appear`，我认为您可以通过触发事件来强制加载所有图像：

```
$('img').filter(function() {
  return $(this).offset().top < $(window).height();
}).trigger('appear'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:13:19.467

工作代码：

```
function forceLoad(){
    $(window).trigger("scroll");
}; 
```

# java - 如何使用 JQUERY 在 JSP 页面中调用 Java 方法？

> ID：12046262
> 
> 赞同：0
> 
> 时间：2012-08-20T22:45:48.737
> 
> 标签：java, jquery, jsp

假设我在`JSP`页面中创建了这个方法。

```
<%!
   String testMethod(String testString) {
       return testString;
   }
%> 
```

而当我想调用这个方法的时候，它会是这样的。

```
<% out.println(testMethod("test")); %> 
```

如果我正常调用它，它将在`DIV`.

```
<div id="testDiv">
     <% out.println(testMethod("test")); %>
</div> 
```

现在假设这个 DIV 存在，但它是空的，我想调用我在单击另一个元素时创建的方法。

```
$("#testClick").click(function(){

}); 
```

`Append`不起作用，因为它只是附加字符串，这意味着它不会解释`<% out.println(testMethod("test")); %>`为 Java 代码，它将作为普通字符串附加，当我单击另一个元素时，如何调用此 Java 代码或方法？

# javascript - Twitter Bootstrap 选项卡：如何跳转到锚点？

> ID：12046263
> 
> 赞同：2
> 
> 时间：2012-08-20T22:45:57.227
> 
> 标签：javascript, twitter-bootstrap

当单击查看详细信息按钮时，我希望页面跳转到“tabreveal”ID。我需要什么 JS 才能做到这一点？代码如下：

```
 <div class="row">
    <div class="span3 box1">
      <h2>Web</h2>
       <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#web" data-toggle="tab">View details &raquo;</a></p>
    </div>
    <div class="span3 box2">
      <h2>Video</h2>
       <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#video" data-toggle="tab">View details &raquo;</a></p>
   </div>
    <div class="span3 box3">
      <h2>Print</h2>
      <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
      <p><a class="btn" href="#print" data-toggle="tab">View details &raquo;</a></p>
    </div>
  </div>
  <div class="tab-content" id="tabreveal">
    <div class="tab-pane" id="web">2</div>
    <div class="tab-pane" id="video">3</div>
    <div class="tab-pane" id="print">4</div>
  </div> 
```

提前感谢您的任何回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T05:46:57.020

Tab Data API 使用`preventDefault()`，这就是浏览器不滚动到窗格的原因。（[见源代码。](https://github.com/twitter/bootstrap/blob/v2.1.0/js/bootstrap-tab.js#L130)）

最简单的做法可能是禁用 Tab 代码中定义的事件侦听器，然后在不调用`preventDefault()`.

就像是：

```
// disable old listener
$('body').off('click.tab.data-api')

// attach new listener
$('body').on('click.scrolling-tabs', '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
  //e.preventDefault()
  $(this).tab('show')
}) 
```

如果您只希望某些选项卡触发浏览器滚动，您可以在此处添加一些条件语句来控制是否`preventDefault()`调用。

最后，确保这些覆盖在选项卡插件加载*后运行。*

* * *

## 视口条件

如果您想检查视口并根据其宽度决定是否滚动，您可以尝试：

```
$('body').on('click.scrolling-tabs', '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
  $(window).width() > 767 && e.preventDefault()
  $(this).tab('show')
}) 
```

在 Bootstrap 中，**767 像素**被认为是“电话”视口的上限，但您可以使用任何您喜欢的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:53:38.617

您可以在没有任何 JavaScript 代码的情况下实现此操作，您所需要做的就是在正确的位置添加锚名称，例如：

```
<div class="tab-content" id="tabreveal">
    <a name="web"></a><div class="tab-pane" id="web">2</div>
    <a name="video"></a><div class="tab-pane" id="video">3</div>
    <a name="print"></a><div class="tab-pane" id="print">4</div>
</div> 
```

添加锚点后，您的链接 ( `#web`, `#video`, `#print`) 将跳转到正确的位置。

# iphone - Facebook iOS SDK 3.0 教程中的 SIGABRT 错误

> ID：12046272
> 
> 赞同：0
> 
> 时间：2012-08-20T22:46:46.930
> 
> 标签：iphone, ios, xcode, facebook, sigabrt

我正在尝试从 Facebook 完成 iOS SDK 3.0 教程，但我的 main.m 文件中有错误。

错误在“return”语句中显示“线程 1：信号 SIGABRT”。当我在启动 Facebook 登录流程时单击我的应用程序的“登录”按钮时会弹出此错误。

```
#import <UIKit/UIKit.h> 
#import "MMAppDelegate.h" 
int main(int argc, char *argv[]) {     
         @autoreleasepool 
         { return UIApplicationMain(argc, argv, nil, NSStringFromClass([MMAppDelegate class])); } } 
```

这里的参考是我关注的 Facebook 教程的链接：http: [//developers.facebook.com/docs/tutorials/ios-sdk-tutorial/](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)

非常感谢 - 这个错误是一个总拖累。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:00:16.297

应该和主线没什么关系吧。Xcode 有点愚蠢的一件事是，无论异常发生在哪里，它总是会报告 main 作为原因。

Xcode 中的一个好技巧是打开左侧导航器区域并单击[Breakpoint Navigator](http://developer.apple.com/library/ios/#recipes/xcode_help-breakpoint_navigator/articles/about_breakpoint_navigator.html#//apple_ref/doc/uid/TP40010433-CH6-SW1 "断点导航器")以获取项目断点的列表。然后在左下角有一个+符号。单击它并说“添加异常断点”。确保选择“All”和“On Throw”，然后按“Done”。这将导致程序在引发异常的实际行中中断，而不是在 main 中。现在您可以调试问题的实际原因。

# android - 自定义日历事件提醒图标

> ID：12046284
> 
> 赞同：1
> 
> 时间：2012-08-20T22:47:21.567
> 
> 标签：android, calendar, icons

有谁知道是否有办法通过代码自定义日历事件提醒图标？

例如，我目前正在开发一个日历应用程序，并希望能够将放置在我的应用程序中的提醒与任何其他用户事件区分开来。是否可以突出显示整个单元格？或者从股票蓝色更改图标的大小？

我在这里或谷歌上找不到任何东西。

感谢您提供任何信息或指示。

# html - 使用拖放上传时奇怪的 Sarafi 文件名

> ID：12046286
> 
> 赞同：0
> 
> 时间：2012-08-20T22:47:24.350
> 
> 标签：html, file-upload, safari

在 Safari 中使用 HTML 5 拖放功能时，我的行为变得非常奇怪。

我的代码看起来像这样，没什么特别的：

```
handleFiles = function (files, e) {
    // Traverse throught all files and check if uploaded file type is image 
    var imageType = /image.*/;
    var file = files[0];
    // check file type
    if (!file.type.match(imageType)) {
        alert("File \"" + file.name + "\" is not a valid image file. ");
        return false;
    }
    // check file size
    if (parseInt(file.size / 1024) > 2050) {
        alert("File \"" + file.name + "\" is too big.");
        return false;
    }
   uploadFile(file);
};

uploadFile = function (file) {
    xhr = new XMLHttpRequest();
    xhr.open("post", "fileuploadhandler.ext", true);

    xhr.upload.addEventListener("progress", function (event) {            
        if (event.lengthComputable) {
            $("#progress").css("width", (event.loaded / event.total) * 100 + "%");
            $(".percents").html(" " + ((event.loaded / event.total) * 100).toFixed() + "%");
            $(".up-done").html((parseInt(event.loaded / 1024)).toFixed(0));
        } else {
            alert("Failed to compute file upload length");
        }
    }, false);

    xhr.onreadystatechange = function (oEvent) {
        if (xhr.readyState === 4) {
            if (xhr.status === 200) {
                logAction(oEvent);
                $("#progress").css("width", "100%");
                $(".percents").html("100%");
                $(".up-done").html((parseInt(file.size / 1024)).toFixed(0));
                fileUploadedComplete(true, oEvent);
            } else {
                fileUploadedComplete(false, oEvent);
                alert("Error" + xhr.statusText);
            }
        }
    };

    // Set headers
    xhr.setRequestHeader("Content-Type", "multipart/form-data");
    xhr.setRequestHeader("X-File-Name", file.name);
    xhr.setRequestHeader("X-File-Size", file.fileSize);
    xhr.setRequestHeader("X-File-Type", file.type);

    // Send the file (doh)
    xhr.send(file);
}; 
```

这在 Chrome 和 Firefox 中运行良好，![但我在 Sarafi 遇到了以下奇怪的问题。](../Images/3bf53208ae4cf6bee6920439323070e7.png)

任何帮助，将不胜感激！

最好的，

部落84

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:08:18.667

我无法在 Safari for OS X 上复制您的错误。

也许问题与 Windows 上的 Safari 有关。在 Windows 上测试 Safari 可能不是最好的主意。

这是一个有效的 JSFiddle：http: [//jsfiddle.net/wh3E5/](http://jsfiddle.net/wh3E5/)

![有用](../Images/2a94fedfc2e5e99db1e9687d3954f5d0.png)

# java - SmartGWT 中的 ListGrid.setEditorCustomizer

> ID：12046287
> 
> 赞同：2
> 
> 时间：2012-08-20T22:47:32.210
> 
> 标签：java, gwt, smartgwt

> **可能重复：**
> [Smartgwt 选择项键值问题](https://stackoverflow.com/questions/10492319/smartgwt-selectitem-key-value-issue)

我正在使用 setEditorCustomizer 为 ListGrid 中的某些字段设置自定义编辑器，我的具体问题出在 SelectItem 上

像这样的东西：

```
grid.setEditorCustomizer(new ListGridEditorCustomizer() {
    public FormItem getEditor(ListGridEditorContext context) {
         SelectItem selectItem = new SelectItem();
         LinkedHashMap<String, String> valuesMap = new LinkedHashMap<String, String>();
         valuesMap.put("0","some text");
         valuesMap.put("1","other text");
         selectItem.setValueMap(valuesMap);
    }
} 
```

请注意，我没有为每一行创建选择项。

编辑行时一切正常，我在下拉列表中看到“一些文本”和“其他文本”，但是当我不编辑值时，我看到的是相应的键而不是值。

我已经搜索了 javadoc 但找不到任何东西，如果有什么不明确的，请询问，我会添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:31:08.923

您需要在 SelectItem 也出现的 ListGridField 上设置值映射（）（具有相同的值映射）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:13:17.787

最终找到了一个解决方案，`DataSource`并将其设置在 optionDataSource 的 optionDataSource 中，`SelectItem`并将 displayField 和 valueField 设置为相应的字段。

然后，当该字段未被编辑时，`ListGridField`我设置了一个`CellFormatter`返回正确数据的自定义（这也涉及为其他值返回正确的数据）。

我很确定可能有一种更简单的方法，但是这种方法对我有用，所以我现在就这样吧。

# c# - 没有 .svc 文件的 Windows Server AppFabric 和服务

> ID：12046288
> 
> 赞同：1
> 
> 时间：2012-08-20T22:47:39.897
> 
> 标签：c#, iis, appfabric

如果我使用列出服务的 web.config 方法（这样就没有 .svc 文件），有没有办法在 Windows Server AppFabric 中托管服务？在我第一次尝试时，AppFabric IIS 管理单元没有列出该服务。这是一个限制，还是我需要做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:18:26.013

您可以尝试从 Global.aspx 进行路由。这就是[.NET REST 模板](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd/)的工作方式。

# php - 通过 Graph API 向 Facebook 页面帖子添加空格或换行符

> ID：12046299
> 
> 赞同：0
> 
> 时间：2012-08-20T22:48:33.577
> 
> 标签：php, facebook, facebook-graph-api, post

我使用 curl 和 Graph API 作为页面发布到 facebook 个人资料页面。我需要添加一些简单的换行符或一些空格来格式化帖子文本。有什么办法可以做到这一点，因为我尝试了很多东西，但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:36:21.210

在您的内容中使用正常的`\n`换行符`message`应该可以在通过 PHP 的 API 制作的帖子中完全正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:08:28.687

```
$facebook->api("me/feed","POST",array("message" => "Hey"."
    "." world")); 
```

# java - 线程无缘无故地给出 NullPointerException

> ID：12046302
> 
> 赞同：1
> 
> 时间：2012-08-20T22:48:49.457
> 
> 标签：java, multithreading, nullpointerexception

所以我正在做这个尴尬的例子来了解 Java 中的线程是如何工作的。实际上这很简单，但是，我似乎不明白为什么当它尝试触发超过 3 个线程时它会给我一个 NullPointerException 异常。

你能整理出来吗？Eclipse 的调试器没有帮助:-(

提前致谢！！

```
public class Main {

    public static void main(String[] args) {

        Main boot = new Main();
    }

    public Main()
    {
        CoolThread myThread = new CoolThread(1, 2);
        Thread t_myThread = new Thread(myThread);
        t_myThread.start();

        myThread.defineMain(this);
    }

    public void teste(String tests){
        CoolThread myThread = new CoolThread(1, 2);
        Thread t_myThread = new Thread(myThread);
        t_myThread.start();
    }

} 
```

* * *

```
public class CoolThread extends Thread {

int firstNum;
int secondNum;
Main myMain;

/**
 * Constructor
 * @param firstNum
 * @param secondNum
 */
public CoolThread(int firstNum, int secondNum)
{
    this.firstNum = firstNum;
    this.secondNum = secondNum;
}

public void defineMain(Main myMain)
{
    this.myMain = myMain;
}
/**
 * Fires the thread.
 */
public void run()
{
    try{
        int number = 0;
        for(;;)
        {

            int soma = (firstNum+secondNum);
            System.out.println("ID: " +Thread.currentThread().getId());
            firstNum++;
            secondNum++;
            number++;
            Thread.sleep(100);
            if((number % 10) == 0)
            {
                myMain.teste("The sum is: " + soma);
            }
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

}

} 
```

顺便说一句，这是我得到的输出：

```
ID: 9
ID: 9
ID: 9
ID: 9
ID: 9
ID: 9
ID: 9
ID: 9
ID: 9
ID: 9
ID: 9
ID: 12
ID: 9
ID: 12
ID: 12
ID: 9
ID: 12
ID: 9
ID: 12
ID: 9
ID: 12
ID: 9
ID: 12
ID: 9
ID: 12
ID: 9
ID: 12
ID: 9
ID: 9
ID: 12
ID: 9
ID: 14
java.lang.NullPointerException
    at my.own.package.CoolThread.run(CoolThread.java:44)
    at java.lang.Thread.run(Thread.java:722) 
```

它继续创建和杀死线程......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T22:51:59.073

您要么在启动线程`myThread.defineMain(...)` *后*`Main`调用（in ），要么根本不调用`defineMain(...)`（in `teste(...)`）。您需要在线程运行之前定义 main ，否则有可能在您到达第 44 行时，我假设是`myMain`：`null`

```
myMain.teste("The sum is: " + soma); 
```

这是[线程竞争条件](http://en.wikipedia.org/wiki/Race_condition)的定义。您的起始代码应为：

```
CoolThread myThread = new CoolThread(1, 2);
// this must be done _before_ the thread starts below
myThread.defineMain(this);
Thread t_myThread = new Thread(myThread);
t_myThread.start(); 
```

*永远不要*认为 JDK 是错误的。这只会扼杀你用来发现问题的任何调试和批判性思维。了解如何[在 eclipse 中使用调试器](http://www.vogella.com/articles/EclipseDebugging/article.html)。然后，您可以在第 44 行设置断点并调查变量。

不幸的是，在这种情况下，您有一个线程程序，并且调试正在改变程序的时间，并且很可能隐藏了错误。您可能尝试在第 44 行打印出各种对象，以查看哪个是`null`.

* * *

此外，正如@kurtzbot 指出的那样，如果`CoolThread`extends`Thread`那么你可以说`new CoolThread()`then `coolThread.start()`。真正你应该做的是`CoolThread`实现`Runnable`而不是扩展`Thread`。这是更好的模式：

```
CoolThread myThread = new CoolThread(1, 2);
// this must be done _before_ the thread starts below
myThread.defineMain(this);
Thread t_myThread = new Thread(myThread);
t_myThread.start();
...

public class CoolThread implements Runnable {
    public void run() {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:56:55.887

当从 teste 方法启动新线程时，我怀疑 myMain 为空。您需要从 teste 方法中调用 defineMain ，就像在 Main 类的构造函数中一样。

# c++ - C++：如何使用 libcurl 检查 FTP 服务器上是否存在目录

> ID：12046305
> 
> 赞同：2
> 
> 时间：2012-08-20T22:48:55.127
> 
> 标签：c++, ftp, libcurl

我对此一无所知。我需要检查远程 FTP 服务器上是否存在目录。这就是我的想法：

```
//ls - lists the names of the files in the remote directory
string query = "ls /public_html/somefolder/";

//prepare to send
headers = curl_slist_append(headers, query.c_str());
curl_easy_setopt(curl, CURLOPT_QUOTE, headers); 

//send query to ftp server
res = curl_easy_perform(curl);

//check result
if(res == CURLE_OK) {
    cout << "FOLDER EXISTS";
} else {
    cout << "FOLDER DOESN'T EXIST";
} 
```

当我检查`res`变量包含的内容时，它会输出：

> CURLE_QUOTE_ERROR (21)。

关于如何正确执行此操作的任何想法？我已经大量搜索了谷歌。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:02:35.063

不要尝试`CURLOPT_QUOTE`用于此。A`LIST`是数据传输，因此它作为`CURLOPT_URL`.

```
CURL *curl = curl_easy_init();
curl_easy_setopt(curl, CURLOPT_URL, "ftp://ftp@ftp.gnu.org/pub/");
curl_easy_setopt(curl, CURLOPT_NOBODY, 1L);
CURLcode res = curl_easy_perform(curl);
if(res == CURLE_OK) std::cout << "FOLDER EXISTS\n";
else std::cout << "FOLDER DOESN'T EXIST\n"; 
```

# php - 为什么我的包含加载在我的

> ID：12046307
> 
> 赞同：-3
> 
> 时间：2012-08-20T22:49:01.443
> 
> 标签：php, include

我`DB`的内容和内容都有一个包含。我想知道为什么我`db.php`的身体标签内加载

```
<?php 

    include('includes/db.php');

    include('html/basic_page_content.html');

?> 
```

db.php 仅包含`mysql_connect()`连接到我的数据库和`mysql_select_db()`.

我的 basic_page_content.html：

```
<html>
    <head>
        <title>Basic Page</title>
    </head>
    <body>

    <h3> simple page </h3>

    </body>
</html> 
```

它应该加载在头部上方

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:53:22.257

好吧，我不确定您所说的“在`body`标签内加载”是什么意思 - 是否有可见的输出`includes/db.php`，比如一些错误文本？- 但如果我不得不猜测，它不是真的：您的浏览器正在将文件的输出移动到`body`，因为文本内容不会去其他任何地方。

现代浏览器为了让网页显示“正确”而做出了惊人的反应，而这通常意味着会发生完全相反的情况。

我猜您真正的问题是出现了您不想显示的错误文本或其他数据库输出。尝试在您的命令前添加一个 @ 以抑制错误文本 - 或者可能在您的数据库处理代码中添加一些错误检查。;)

# asp.net - 在 HttpWebRequest 中使用客户端 IP 地址

> ID：12046310
> 
> 赞同：2
> 
> 时间：2012-08-20T22:49:27.460
> 
> 标签：asp.net, httpwebrequest, ip

我需要的在[这里](https://stackoverflow.com/questions/3345387/how-to-change-originating-ip-in-httpwebrequest)问的完全一样，我不太了解答案，因为我的知识，所以也许有人可以帮助我。

我想做的是使用连接用户的 IP 地址（客户端 IP）来创建**服务器端**HttpWebRequest，所以我会抓住用户的 IP 并用它进行调用。

我想获得的是每个连接的用户都使用他们的 IP 进行 HttpWebRequests。

是否可以？

如果是，我应该如何编辑该代码来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:40:19.630

这是不可能的。我对另一个问题的回答是关于选择用于请求的 IP 地址（阅读：网络适配器）。但是，您不能凭空发明 IP 地址，也不能使用不属于您的 IP 地址（在物理上，附加到这台计算机的意义上）。

现在，从技术上讲，使用原始套接字，您可以在数据包中欺骗另一个 IP 地址。但是，问题在于返回的流量将转到您指定的 IP 地址，而不是您实际拥有的 IP 地址！

所以，我的建议是不要再继续这种思路，而是找到另一种方法来做你想做的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:19:51.177

您只能使用分配给服务器的 IP 从服务器进行出站连接。如果您尝试使用客户端的 IP，它将失败。

即使它没有失败，它也将是一种欺骗形式，并且无论如何都会很快失败 - 使用 tcpip 发生的握手会使远程连接将确认数据包发送回源 ip（在你的情况下，客户端 ip ) 这将导致错误。

如果您使用的是 UDP，实际上可以这样做，但这是一个不同的主题。

# javascript - 使行号不可复制

> ID：12046311
> 
> 赞同：11
> 
> 时间：2012-08-20T22:49:27.927
> 
> 标签：javascript, html, css

我正在努力为语法荧光笔[Rainbow](http://craig.is/making/rainbows)添加行号支持，但我不知道如何使行号不可复制。

通过禁用选择`user-select: none;`使元素无法突出显示，但您仍然可以通过突出显示它的文本然后复制来复制其文本，最终复制行号和代码。

这是问题的一个工作示例：http: [//jsfiddle.net/CjJLv/8/](http://jsfiddle.net/CjJLv/8/)

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T23:14:39.953

`index`好的，在兼容的浏览器中，最简单的方法是使用生成的内容（我已经删除了在插件中添加到文本内容的各个部分，并使用了以下内容，遗憾的是，跨浏览器不可靠）在 CSS 的末尾）来实现不可复制的文本：

```
table.rainbow {
    counter-reset: line;
}

table.rainbow tbody tr td:first-child {
    counter-increment: line;
}

table.rainbow tr td:first-child::before {
    content: counter(line);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/CjJLv/13/)。

但是，这确实有一些相当大的缺陷（跨浏览器不友好的方法是最大的），所以我会尝试更好的东西......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:22:23.637

我只想添加一个常规列表。

```
if (window.Rainbow) window.Rainbow.linecount = (function(Rainbow) {
    Rainbow.onHighlight(function(block) {
        var lines = $(block).text().split('\n');
        var $lines = $('<ul class="lines"/>');
        for (var i = 0, len = lines.length; i < len; i++) {
            $lines.append('<li class="line"'+ i +'>'+ i +'</li>');
        }
        $(block).before($lines);
    });
})(window.Rainbow);​ 
```

和 CSS：

```
.lines {
    float: left;
    padding-right: 1.5em;
    padding-left: .5em;
} 
```

因此，如果您仔细突出显示，现在您可以只选择代码。

**演示：http:** [//jsfiddle.net/elclanrs/CjJLv/18/](http://jsfiddle.net/elclanrs/CjJLv/18/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-19T15:05:59.657

[David Thomas](https://stackoverflow.com/users/82548/david-thomas)的[答案](https://stackoverflow.com/a/12046503/691281)非常适合行号。更一般地说，如果您有其他不想被复制的文本，您可以将其作为生成的内容：

```
<style>#uniqueid::before { content: 'TEXT GOES HERE'; }</style>
<span id="uniqueid"></span> 
```

但是必须在 CSS 中嵌入文本很难看，因此您可以使用 CSS 改进它`attr()`以从 HTML 中的属性读取文本（如[pimvdb](https://stackoverflow.com/users/514749/pimvdb)建议的那样）：

```
<style>[data-nocopy]::before { content: attr(data-nocopy); }</style>
<span data-nocopy="TEXT GOES HERE"></span>
<span data-nocopy="AND HERE"></span> 
```

演示：http: [//jsbin.com/fob/1/edit](http://jsbin.com/fob/1/edit)

这适用于 Firefox、Safari 和 Chrome，因为在选择生成的内容时存在 21 年的（！）错误：

*   [https://bugzilla.mozilla.org/show_bug.cgi?id=12460](https://bugzilla.mozilla.org/show_bug.cgi?id=12460)
*   [https://bugs.webkit.org/show_bug.cgi?id=7562](https://bugs.webkit.org/show_bug.cgi?id=7562)
*   [https://bugs.chromium.org/p/chromium/issues/detail?id=80466](https://bugs.chromium.org/p/chromium/issues/detail?id=80466)

但在旧 IE (< 8) 中，文本将完全不可见；在较新的 IE 中，它应该是可见的，但很可能是可复制的。一般来说，不要将这种技术用于任何关键的事情，因为这些错误可能有一天会得到修复......

并谨慎使用，因为这可能对用户非常不利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T22:54:42.487

您可以将每个行号显示为一个`<img>`s 序列。

# html - 防止网页“过度滚动”

> ID：12046315
> 
> 赞同：125
> 
> 时间：2012-08-20T22:50:53.577
> 
> 标签：html, css, macos, google-chrome

在 Mac 版 Chrome 中，可以“过度滚动”页面（因为没有更好的词），如下面的屏幕截图所示，以查看“后面是什么”，类似于 iPad 或 iPhone。

我注意到某些页面已禁用它，例如 gmail 和“​​新标签”页面。

如何禁用“过度滚动”？还有其他方法可以控制“过度滚动”吗？

![在此处输入图像描述](../Images/40b8a754ea53354b689076a48c21dc39.png)

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2013-07-27T16:07:09.143

接受的解决方案对我不起作用。我在仍然能够滚动的同时让它工作的唯一方法是：

```
html {
    overflow: hidden;
    height: 100%;
}

body {
    height: 100%;
    overflow: auto;
} 
```

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2017-12-07T02:09:50.300

在 Chrome 63+、Firefox 59+ 和 Opera 50+ 中，您可以在 CSS 中执行此操作：

```
body {
  overscroll-behavior-y: none;
} 
```

这会禁用问题屏幕截图中显示的 iOS 上的橡皮筋效果。然而，它也禁用了下拉刷新、发光效果和滚动链接。

但是，您可以选择在过度滚动时实现自己的效果或功能。例如，如果您想模糊页面并添加整洁的动画：

```
<style>
  body.refreshing #inbox {
    filter: blur(1px);
    touch-action: none; /* prevent scrolling */
  }
  body.refreshing .refresher {
    transform: translate3d(0,150%,0) scale(1);
    z-index: 1;
  }
  .refresher {
    --refresh-width: 55px;
    pointer-events: none;
    width: var(--refresh-width);
    height: var(--refresh-width);
    border-radius: 50%; 
    position: absolute;
    transition: all 300ms cubic-bezier(0,0,0.2,1);
    will-change: transform, opacity;
    ...
  }
</style>

<div class="refresher">
  <div class="loading-bar"></div>
  <div class="loading-bar"></div>
  <div class="loading-bar"></div>
  <div class="loading-bar"></div>
</div>

<section id="inbox"><!-- msgs --></section>

<script>
  let _startY;
  const inbox = document.querySelector('#inbox');

  inbox.addEventListener('touchstart', e => {
    _startY = e.touches[0].pageY;
  }, {passive: true});

  inbox.addEventListener('touchmove', e => {
    const y = e.touches[0].pageY;
    // Activate custom pull-to-refresh effects when at the top of the container
    // and user is scrolling up.
    if (document.scrollingElement.scrollTop === 0 && y > _startY &&
        !document.body.classList.contains('refreshing')) {
      // refresh inbox.
    }
  }, {passive: true});
</script> 
```

**浏览器支持**

在撰写本文时，Chrome 63+、Firefox 59+ 和 Opera 50+ 都支持它。Edge 公开支持它，而 Safari 是未知数。[在MDN 文档](https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior)中跟踪进度和[当前](https://www.chromestatus.com/feature/5734614437986304)浏览器兼容性

**更多信息**

*   [Chrome 63 发布视频](https://www.youtube.com/watch?v=F3_-jTLaFSs)
*   [Chrome 63 发布帖子](https://developers.google.com/web/updates/2017/11/overscroll-behavior)- 包含我上面写的所有内容的链接和详细信息。
*   [`overscroll-behavior`CSS 规范](https://wicg.github.io/overscroll-behavior/)
*   [MDN 文档](https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior)

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-08-20T23:11:17.200

防止这种情况的一种方法是使用以下 CSS：

```
html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
}

body > div {
    height: 100%;
    overflow: scroll;
    -webkit-overflow-scrolling: touch;
} 
```

这样，在页面顶部和底部滚动时，正文永远不会溢出，也不会“反弹”。容器将在其中完美滚动其内容。这适用于 Safari 和 Chrome。

**编辑**

*为什么`<div>`作为包装器的额外元素可能有用：*
[Florian Feldhaus 的解决方案](https://stackoverflow.com/a/17899813/1456376)使用的代码略少，而且工作正常。但是，当涉及到超出视口宽度的内容时，它可能会有些奇怪。在这种情况下，窗口底部的滚动条被移出视口的一半，很难识别/到达。`body { margin: 0; }`如果合适，可以避免使用。在无法添加此 CSS 的情况下，包装元素很有用，因为滚动条始终完全可见。

在下面找到截图： ![在此处输入图像描述](../Images/e346124fd2881b7e4b1a2f0c7bd51fd7.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-27T14:57:51.447

您可以使用此代码删除`touchmove`预定义的操作：

```
document.body.addEventListener('touchmove', function(event) {
  console.log(event.source);
  //if (event.source == document.body)
    event.preventDefault();
}, false); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-10T18:22:25.200

```
html,body {
    width: 100%;
    height: 100%;
}
body {
    position: fixed;
    overflow: hidden;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-04T13:45:36.037

**试试这个方法**

```
body {
    height: 100vh;
    background-size: cover;
    overflow: hidden;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-19T16:11:35.107

除非网页高度等于 ，否则不能禁用弹跳效果`window.innerHeight`，您可以让您的子元素滚动。

```
html {
    overflow: hidden;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-29T14:35:20.347

`position: absolute`为我工作。我已经在`Chrome 50.0.2661.75 (64-bit)`OSX 上进行了测试。

```
body {
  overflow: hidden;
}

// position is important
#element {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  overflow: auto;
} 
```

# sql-server - Microsoft Dynamics CRM 或 SQL Server？

> ID：12046319
> 
> 赞同：2
> 
> 时间：2012-08-20T22:51:41.643
> 
> 标签：sql-server, dynamics-crm, dynamics-crm-2011

在我的组织中，我们为许多不同的客户编写了许多定制的移动解决方案。我们已经开始在我们的一些测试产品中使用 Microsoft Dynamics CRM 2011，但是我们使用它的几乎所有工作都是使用自定义实体完成的，并且解决方案将其用作后端数据库。从我目前的印象来看，以这种方式使用 CRM 是违反直觉且缓慢的。

根据您的经验，使用 CRM 代替普通 SQL Server 会有什么好处吗？我只在 CRM 前端看到了非常基本的东西，但不确定自定义实体如何在 CRM 中变得有用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:59:10.210

我为 CRM 编写了很多代码，你是对的，它并不快。它的好处不是给开发人员，而是给最终用户。通过工作流和定制，他们可以根据自己的需要创建自己的系统，并可以使用内置实体来帮助管理他们的业务。

也就是说，如果您没有将 CRM 放在客户面前（或在内部将其用于其真正目的）并且只是将其用作应用程序的数据库，那么这不是一个好方法。您最好直接与 SQL Server 交谈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:08:15.007

Microsoft（和许多合作伙伴）利用 Dynamics CRM 作为快速和可扩展开发的平台。我们使用了一个术语：[xRM](http://www.crmsoftwareblog.com/2011/02/microsoft-dynamics-crm-2011-the-evolution-of-crm-to-xrm/)，这意味着您可以比传统的定制开发更快地构建许多不同的应用程序类型。

我在某些情况下使用 Dynamics CRM 仅仅是因为它具有惊人的精细安全功能（并为大多数用户构建了自定义 UI）。使用 OOB Dynamics CRM 2011 中的功能构建行级安全机制本身就是一项艰巨的任务……我经常告诉我的新 CRM 开发人员，“在构建CRM 时，*请*确保包括：用户数据导入、行级安全、解决方案文件部署、简单表单定制、自定义视图等”

使用 CRM 2011，您可以从所有这些*开始*，并拥有一个具有精心设计的扩展点（插件、工作流、Web 资源、JScript API、OData、SOAP）的产品。所有这些都无需编写、测试、调试一行代码。我告诉开发人员的另一件事是：编码很昂贵，所以不要编写代码 :)

# javascript - HTML5如何绘制透明重叠球体？

> ID：12046320
> 
> 赞同：0
> 
> 时间：2012-08-20T22:51:44.220
> 
> 标签：javascript, html, css, html5-animation

我有一个复杂的 HTML5 任务。我需要绘制透明的重叠球体。请看一下：

[http://imgur.com/7cCkt](http://imgur.com/7cCkt)

我需要画一个很容易的球体，但是，我需要像上图（链接）那样填充它，并确保它是半透明的。

球体必须移动，因此，有一次后面较小的球体可以动画并变大..

我知道它很复杂（看起来很简单，但很难编程）。

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:10:22.910

您可以设置 globalAlpha 值以获得透明效果：

```
var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");
context.globalAlpha = 0.5; 
```

像[这样的jsfiddle](http://jsfiddle.net/zspxt/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:27:40.760

如果要绘制透明球体，请使用 KineticJS：

[http://jsfiddle.net/palani/mN2dC/](http://jsfiddle.net/palani/mN2dC/)

# jquery - 向现有 jquery 脚本添加新函数

> ID：12046323
> 
> 赞同：0
> 
> 时间：2012-08-20T22:52:03.370
> 
> 标签：jquery, function, multi-select

我正在尝试将以下解决方案用于 jquery 多选脚本，该解决方案应该采用多选元素的标题并在未选择任何项目时显示它，问题是我不知道如何修改脚本以添加功能。我基本上必须自己解决，但不知道如何将这两件事放在一起。

这是解决方案：

我想我会和你们分享这个片段。它使用 select 元素中的 title 属性为 noneselecttext: 选项命名

```
<select id="id" multiple="" name="name" title="your title"  class="multiselect">    <option value="val">text</option> </select>

//Jquery Code
$('.multiselect, this).each(function(key, val){  $(this).multiselect({     noneSelectedText:''+$(this).attr('title')+''  });     }); 
```

我已将多选类添加到 html 表单字段中，我只是不确定如何将 jquery 部分添加到下面的脚本中。

这是脚本：

```
(function($, undefined){

  var multiselectID = 0;

  $.widget("ech.multiselect", {

      // default options
      options: {
          header: true,
          height: 175,
          minWidth: 150,
          classes: '',
          checkAllText: 'Check all',
          uncheckAllText: 'Uncheck all',
          noneSelectedText: 'Select options',
          selectedText: '# selected',
          selectedList: 0,
          show: '',
          hide: '',
          autoOpen: false,
          multiple: true,
          position: {}
      },

      _create: function(){
          var el = this.element.hide(),
              o = this.options; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:03:44.460

工作完成！，在 index.php 中我添加了以下内容

```
<script type="text/javascript">
$(function(){
  $('.multiselect', this).each(function(key, val){ 
    $(this).multiselect({ 
      selectedList: 8,    
      noneSelectedText:''+$(this).attr('title')+''  });     
  });
}); 
```

# c - Makefile 谜题：多种编程语言

> ID：12046324
> 
> 赞同：5
> 
> 时间：2012-08-20T22:52:12.083
> 
> 标签：c, makefile, fortran90

我有一个简单的测试 Makefile：

```
hello: hello.o
.SUFFIXES: .c .f90 .o
.f90.o:
    pgf90 -c -o $@ $<
.c.o:
    cc -c -o $@ $< 
```

您不必告诉我它在同一个目录中有一个 foo.c 和一个 foo.f90 会造成混乱。我永远不会真的这样做。我只是想了解 Make 如何处理一些先例。因此，当我简单地发出 make 命令时，make 运行：

```
pgf90 -c -o hello.o hello.f90
cc hello.o -o hello 
```

当然，“cc”链接会失败，因为“cc”无法链接 FORTRAN 对象以生成可执行文件。美好的。但我的问题是：我已经尽我所能阻止 make 使用 pgf90 命令作为它的第一个编译命令，而是选择了 cc 命令。我改变了后缀规则的顺序。我更改了 .SUFFIXES 语句中的后缀顺序。唯一可行的方法是完全排除 .f90 后缀。为什么会这样，可以改变吗？谢谢。（如果不是不用说，我的目录中确实有简单的 hello.f90 和 hello.c 源文件，它们编译和执行都很好。）

更新：使用 -d 进行制作。相关输出（AFAICT）如下所示：

```
Considering target file 'hello.o'.
 File 'hello.o' does not exist.
 Looking for an implicit rule for 'hello.o'.
 Trying pattern rule with stem 'hello'.
 Trying implicit prerequisite 'hello.c'. 
```

对“隐式先决条件'hello.c'”没有印象，在它涉及之前尝试了一大堆其他事情

```
 Found an implicit rule for 'hello.o'.
  Considering target file 'hello.f90'.
   Looking for an implicit rule with stem 'hello.f90'
    .
    .
    .
   No implicit rule found for 'hello.f90'.    #???????
    .
    .
 Must remake target 'hello.o'
pgf90 -c -o hello.o hello.f90 
```

越来越好奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:58:04.937

出于对我来说很神秘的原因（但可能是晦涩的和历史的），您可以通过更改[后缀规则来更改此行为](http://www.gnu.org/software/make/manual/make.html#Suffix-Rules)

```
.f90.o:
    pgf90 -c -o $@ $<
.c.o:
    cc -c -o $@ $< 
```

进入[模式规则](http://www.gnu.org/software/make/manual/make.html#Pattern-Rules)（并颠倒顺序）：

```
%.o : %.c
    cc -c -o $@ $<
%.o : %.f90
    pgf90 -c -o $@ $< 
```

# optimization - 表达式优化

> ID：12046326
> 
> 赞同：0
> 
> 时间：2012-08-20T22:52:15.930
> 
> 标签：optimization, compiler-construction, compiler-optimization

我有一个表达式涉及`REAL`：

```
xf=w1*x1 + w2*x2 + w3*x3 + w1*y1 + w2*y2 + w3*y3 
```

我想知道（英特尔 Fortran）编译器是否将其优化为：

```
xf=w1*(x1+y1) + w2*(x2+y2) + w3*(x3+y3) 
```

如何查看为此表达式生成的表达式树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:16:18.287

您的标准公共子表达式方案不会执行上述转换，并且某些语言会将转换视为非法，因为它可能会导致不同的副作用。

但高性能 FORTRAN 编译器（可能不包括英特尔 FORTRAN）可能会做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:21:38.990

> 如何查看为此表达式生成的表达式树？

如果您的编译器具有在给定优化阶段后显示树的选项，则可以使用该选项。要确定是否是这种情况，请查阅编译器的优化。

如果您的编译器没有这样的选项，您将无法看到编译器在运行期间生成了哪些树（或其他内部表示）。在这种情况下，您最好的选择是简单地查看生成的程序集以查看将执行哪些算术运算。

# c# - 来自 ASP.NET 的 Facebook C# SDK 粉丝页面帖子

> ID：12046329
> 
> 赞同：1
> 
> 时间：2012-08-20T22:52:45.023
> 
> 标签：c#, asp.net, facebook, sdk, facebook-c#-sdk

我知道这已经被问过很多次了，如果答案很容易获得，我很抱歉，但我一直无法找到答案。

我正在使用 VS 2010 和最新版本的 Facebook C# SDK。我使用 VS 包管理器中的“Install-Package Facebook”命令安装了它。

在花了相当多的时间研究如何使用 SDK 之后，我正在通过 Facebook Javascript SDK 使用 FB 进行身份验证。实际上，我按照[入门教程](http://csharpsdk.org/docs/web/getting-started)中的步骤进行操作。并且在我的努力中非常成功。我现在在我的 aspx 页面上有一个“登录”按钮，它会打开登录窗口并允许我通过它进行身份验证。我还能够将我的访问令牌存储在会话变量中并使用它。

我已经通过对使用访问令牌创建的对象执行*Get*`FacebookClient`来测试这一点，并且能够检索有关粉丝页面的数据。

说了这么多，是为了让你知道我已经取得了一些成功。我准备开始通过我的网站发布到粉丝页面，并找到了这个链接[使用 C# 发布到 facebook 粉丝页面墙上的最简单方法！](https://stackoverflow.com/questions/5878463/simplest-way-to-post-to-a-facebook-fan-pages-wall-with-c)

我想——太好了！这正是我所需要的。从这篇文章复制代码后，我现在在`ExpandoObject`.

为方便起见，这里是我复制的代码。

```
if (Session["AccessToken"] != null)
{
    var accessToken = Session["AccessToken"].ToString();

    dynamic messagePost = new ExpandoObject();
    messagePost.access_token = "[YOUR_ACCESS_TOKEN]";
    messagePost.picture = "[A_PICTURE]";
    messagePost.link = "[SOME_LINK]";
    messagePost.name = "[SOME_NAME]";
    messagePost.caption = "{*actor*} " + "[YOUR_MESSAGE]"; //<---{*actor*} is the user (i.e.: Aaron)
    messagePost.description = "[SOME_DESCRIPTION]";

    FacebookClient app = new FacebookClient(accessToken);

    app.Post("/" + [PAGE ID] + "/feed", messagePost);
} 
```

所以我的问题真的是关于`ExpandoObject`. 这个对象还在 SDK 中吗？如果是这样，我错过了什么，如果没有，我应该如何拨打这个电话？

虽然我在问，在请求访问令牌时我还需要做些什么才能获得在粉丝页面上发布的适当权限吗？如上所述，我按照[Facebook C# SDK 站点](http://csharpsdk.org)上的入门页面获取我的访问令牌。我问的原因是因为在我的研究过程中，我遇到过不同的帖子，它们都在谈论确保你拥有适当的权限以便在 Facebook 上做不同的事情。

非常感谢任何帮助，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:31:39.423

我想我只需要在 StackOverflow 中多花点时间才能找到我的答案。我将继续将其发布在这里，以供可能遇到相同问题的其他人使用。

正如最新版本的 Facebook C# SDK 所证明的那样，发布任何内容的方法是使用该`FacebookClient`对象，然后对该对象调用*Post*方法。其实很容易。这是我使用的代码。

```
if (Session["AccessToken"] != null)
{
    var accessToken = Session["AccessToken"].ToString();
    FacebookClient app = new FacebookClient(accessToken);

    dynamic result = app.Post("/[ID]/feed", new Dictionary<string, object> { { "message", "This Post was made from my website" } });
} 
```

`Session["AccessToken"]`是我的身份验证令牌，它是从用户在网页上登录 Facebook 获得的，并且`[ID]`是我的粉丝页面的 ID。

# ember.js - 如何使用 Ember-data 实现委托或组合

> ID：12046331
> 
> 赞同：0
> 
> 时间：2012-08-20T22:52:51.467
> 
> 标签：ember.js

有没有办法将所有对 App.Item 的调用委托给 App.Book，这样我就可以执行 App.Book.name 并返回 App.Item.name 的值和 App.Book.position 的值。简单地说，将 App.Item 的所有属性委托给 App.Book，想象一下 App.Item 有 10 - 12 个属性的场景。

```
App.Item = DS.Model.extend({
  name: DS.attr('string', { defaultValue: "foo" })
  position: DS.attr('string')
});

App.Book = DS.Model.extend({
  category: DS.attr('string')
}); 
```

# tridion - TCDL linkAttributes 的正确格式是什么？

> ID：12046332
> 
> 赞同：3
> 
> 时间：2012-08-20T22:53:04.837
> 
> 标签：tridion, tridion-content-delivery

我可以看到独立于技术的[Tridion 内容交付语言 (TCDL) 链接](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/linknottcdl_concept_B72F4D64713F4682B61C838A013DF8F8)具有以下参数，这些参数在 SDL Live Content 上有很好的描述。

*   类型
*   起源
*   目的地
*   模板URI
*   **链接属性**
*   文本失败
*   添加锚
*   变体 ID

我们如何为 linkAttributes 添加多个属性值对？具体来说，我们使用什么来转义双引号以及单独的对（例如，如果我们需要 class="someclass"*和*onclick="someevent"）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T23:18:03.473

单独的对只是用空格分隔，就像一系列正常的属性一样。尝试 XML 编码`linkAttributes`然而的值。所以，`"`成为`&quote;`，等等...

如果您正在使用一些 Javascript，您也可能需要注意 Javascript 引号，如`\"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T23:17:11.573

***编辑***：在我弄清楚你真正的问题之后，答案要简单得多：

***您应该将值包含`linkAttributes`在单引号中。***内部空间`linkAttributes`通常处理得很好；但如果没有，请使用`%20`.

如果您需要更多的东西或想要标准未处理的东西`tcdl:ComponentLink`，请记住，您始终可以创建自己的 TCDL 标签并使用`TagHandler`或`TagRenderer`（在文档中查找示例或搜索 Jaime 的文章`TagRenderer`）来做正是你想要的。

* * *

*我最初的回答是针对一个你没有问的问题：TCDL 标签的格式是什么（一般来说）。但是这个解释可能对某些人仍然有用，所以仍然在下面。*

我建议查看默认构建块（例如默认完成操作中的链接解析器 TBB）输出的格式，并将其用作指导方针。

这是我可以从已发布页面的传输包中快速获得的内容：

```
<tcdl:Link type="Page" origin="tcm:5-199-64" destination="tcm:5-206-64" 
           templateURI="tcm:0-0-0" linkAttributes="" textOnFail="true" 
           addAnchor="" variantId="">Home</tcdl:Link>

<tcdl:ComponentPresentation type="Embedded" componentURI="tcm:5-69" 
                            templateURI="tcm:5-133-32">
  <span>
  ... 
```

我从经验中了解到的一件事：您的整个 TCDL 标记必须在一行中（我将上面的行包装起来只是为了便于阅读）。或者至少如果它用于调用 REL TagRenderer 就是这种情况。显然，`tcdl:ComponentPresentation`上面的标签***将***跨越多行，因此“单行规则”并不适用于任何地方。

这可能是最好的建议：考虑到在 Tridion 发布、部署和交付管道中的多个点处理 TCDL 标签这一事实，我会坚持使用默认 TBB 输出的格式。从我的示例来看，这似乎是：将所有内容放在一行上并将值括在（双）引号中。

# php - 如何允许用户下载图片（.gif、.png、.jpeg）？

> ID：12046334
> 
> 赞同：0
> 
> 时间：2012-08-20T22:53:06.900
> 
> 标签：php, javascript, image, file, download

如何允许用户下载保存在服务器上的图片？目标是让用户单击链接并获得指定的图像以开始下载。

脸书示例： ![图片下载](../Images/5b352e3a071f2798384cd90693b26da7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:00:43.080

使链接到另一个 .php 页面，而不是图像。然后在该页面上使用 content-disposition 标头，如下所示：

```
<?php
// Define the name of image after downloaded  
header('Content-Disposition: attachment; filename="file.jpg"');  

// Read the original image file  
readfile('file.jpg');  
?> 
```

从那里，您可以在 get 命令中添加图像的文件名，例如

```
`download.php?filename=file` 
```

然后在文件中将其引用为：

```
readfile($_GET['filename'].'.jpg') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:57:33.577

您需要在提供图像的响应上设置特定标头以强制下载。

```
Content-Disposition: attachment; filename=myawesomefilename.png 
```

否则它只会在浏览器中加载。

因此，发送该标头，然后仅链接到使用该标头提供该图像的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:56:55.953

发送一个标头告诉浏览器下载它，如下所示：

```
header("Content-type: application/force-download") 
```

然后将文件本身的数据发送给他们，无需任何 HTML 或任何内容。

这个例子是从[PHP 文档中截取的](http://php.net/manual/en/function.readfile.php)

```
<?php
$file = 'monkey.gif';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T23:00:01.980

如果“下载保存在服务器上的图片”是指“尝试让浏览器提供一个“另存为”对话框，而不仅仅是显示图像”，那么您可能需要考虑使用[Content-Disposition: 附件](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)标题服务于图像的响应：

```
Content-Disposition: attachment; filename="thefilename.jpg" 
```

[您可以使用标头函数](http://php.net/manual/en/function.header.php)在 php 中设置标头。

# c++ - 如何从 C 类中告诉/转换 C++ 接口的实例

> ID：12046336
> 
> 赞同：0
> 
> 时间：2012-08-20T22:53:14.093
> 
> 标签：c++, c

我知道 Windows 的“directshow”标头既有 C++ 类定义，也有它们的“C”结构等价物。

我的问题是，如果我调用一个 C++ 方法（在这种情况下来自 C--ffmpeg）并且它返回一个类，我如何确定传递给我的对象是否通过了各种接口的“is a”测试？如何将其转换为各种接口方法？如果这是有道理的。（全部来自直 C）。

有问题的示例是，给定 ffmpeg 的 dshow 层：[https](https://github.com/FFmpeg/FFmpeg/tree/master/libavdevice) ://github.com/FFmpeg/FFmpeg/tree/master/libavdevice我可以访问 IPin，现在我想将它们转换为 IAMBufferNegotiation（如果他们实现了该接口），例如在这个例子中：[http ://sid6581.wordpress.com/2006/10/09/minimizing-audio-capture-latency-in-directshow/](http://sid6581.wordpress.com/2006/10/09/minimizing-audio-capture-latency-in-directshow/)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:57:52.023

基本上，我不会。我要做的是用 C++ 编写一个适配器层，为 C++ 框架提供 C 友好接口。

如果您正在处理 COM 对象，那么您可以使用 QueryInterface [http://www.codeproject.com/Articles/13601/COM-in-plain-C](http://www.codeproject.com/Articles/13601/COM-in-plain-C)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:03:43.653

在 C++ 中，您可以尝试动态转换。让我们考虑一个函数`animalAtRandom()`，它返回一个指向`Animal`类实例的指针，并且您想测试它是否是`Dog`该类的实例。

```
Animal *someAnimal = animalAtRandom();
Dog *rex = dynamic_cast<Dog *>(someAnimal);

if (rex == NULL)
{
    // this Animal is not a Dog
}
else
{
    // yay
} 
```

在纯 C 中，这并不容易。C++ 编译器会执行一些指针运算以使您处于正确的偏移量，因此您最好编写一个 C++ 辅助函数：

```
extern "C" Dog *fetchFirstAnimalAsDog()
{
    return dynamic_cast<Dog *>(animalAtRandom());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:13:06.187

在某种程度上，我可以说它效率不高，直到 C++ 提供了一个接口来将数据传回 C 结构中。
类内的成员排列是实现定义的，因此根据某些顺序复制成员数据的一些黑客攻击失败了。

但是，在一些旧的技巧中，如果你想从课堂的公共部分检索重要的东西，建议你做一个 memcpy。

```
 memcpy(dest_c_struct,src_c_class_ret_from_function,size_define); 
```

但它不会给你留下任何具有进步性质的东西。

更新：

> 有问题的示例是，给定 ffmpeg 的 dshow 层： [https](https://github.com/FFmpeg/FFmpeg/tree/master/libavdevice) ://github.com/FFmpeg/FFmpeg/tree/master/libavdevice我可以访问 IPin，现在我想将它们转换为 IAMBufferNegotiation（如果他们实现了该接口），例如在这个例子中：

你说的是C？？将 IPin 接口投射到 IAMBufferNegotiation??

如果我理解正确，那么不可能将一种接口类型转换为 C 中的另一种**接口**。事实上，C 中*没有接口*。唯一的方法是切换回 C++ 或为您的应用程序提供对 FFmpeg 库的 C 友好接口。

# asp.net-mvc-4 - ASP.NET 在哪里可以找到被引用的 dll

> ID：12046345
> 
> 赞同：1
> 
> 时间：2012-08-20T22:54:23.520
> 
> 标签：asp.net-mvc-4, asp.net-web-api, dll

我毫不费力地将我的 MVC3 项目升级到 MVC4，但是 Web API（我这样做的原因）不起作用，因为显然有一些东西引用了 NHibernate。

```
<Exception>
  <ExceptionType>System.IO.FileNotFoundException</ExceptionType>
  <Message>Could not load file or assembly 'NHibernate, Version=3.1.0.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4' or one of its dependencies. The system cannot find the file specified.</Message>
  <StackTrace>
     at System.Reflection.RuntimeAssembly.GetExportedTypes(RuntimeAssembly assembly, ObjectHandleOnStack retTypes)
     at System.Reflection.RuntimeAssembly.GetExportedTypes()
     at System.Web.Http.Dispatcher.DefaultHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)
     at System.Web.Http.WebHost.WebHostHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)
     at System.Web.Http.Dispatcher.HttpControllerTypeCache.InitializeCache()
     at System.Lazy`1.CreateValue() at System.Lazy`1.LazyInitValue()
     at System.Lazy`1.get_Value()
     at System.Web.Http.Dispatcher.DefaultHttpControllerSelector.InitializeControllerInfoCache()
     at System.Lazy`1.CreateValue() at System.Lazy`1.LazyInitValue()
     at System.Lazy`1.get_Value()
     at System.Web.Http.Dispatcher.DefaultHttpControllerSelector.SelectController(HttpRequestMessage request)
     at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsyncInternal(HttpRequestMessage request, CancellationToken cancellationToken)
     at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
  </StackTrace>
</Exception> 
```

我删除了对 NHibernate 的引用，因为我尝试将 FunnelWeb 博客添加到我的站点，但我最终在同一个项目中得到了两种完全不同的做法，我一点也不喜欢那样。

而且我认为将 NHibernate 库重新放置到位不是一个好主意，因为我会隐藏一些我应该知道的东西。

我试过 NDepend，但没有找到 NHibernate。

请注意，我的项目正在编译和运行良好。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:01:56.623

您是否尝试过擦除您的 bin 目录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:52:29.647

解决方案是显而易见的。有一个 FunnelWeb 糟糕的 dll 引用了 NHibernate。

# java - 字符串引用另一个字符串的部分？爪哇

> ID：12046346
> 
> 赞同：2
> 
> 时间：2012-08-20T22:54:30.340
> 
> 标签：java, string, debugging, reference

我可能在这里偏离了标记，但是查看以下调试输出，我可以看到它引用了与(id=70)`line.value`相同的字符串。`name.value`这两个字符串仅相差`.count`. 什么样的代码会输出类似的结果？这也是优化的结果吗？（如果这是一个有点愚蠢/不恰当的问题，请提前抱歉）。 ![在此处输入图像描述](../Images/484908e5beb0c74031275c77bf19dc9c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:55:36.910

通常`String.substring()`会这样做。或`trim()`。（虽然肯定还有其他人，但这只是最明显的例子。）

由于`String`s 是不可变的，因此可以安全地引用另一个字符串的内部 char 数组，以避免创建大量相同字符数据的冗余副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:56:39.897

如您所见，Java 字符串由一个 backing`char[]`和`offset`和指定该字符串后面`count`部分的字段组成。`char[]`

这允许`substring()`返回调用它的字符串的一部分的方法（如 ）快速返回一个较小的字符串，而无需实际复制字符。

# javascript - JavaScript 鼠标悬停

> ID：12046352
> 
> 赞同：0
> 
> 时间：2012-08-20T22:55:37.463
> 
> 标签：javascript

我有以下代码：

```
area = document.createElement('div');
drag = document.createElement('div');
body.appendChild(area);
area.appendChild(drag);

area.onmouseover = function () {
    console.log('entered');
}
area.onmouseout = function () {
    console.log('leaved');
} 
```

问题是，当鼠标移过孩子拖动它算作进入和离开！

预览： [http ://s12.postimage.org/xopqous19/preview.gif](http://s12.postimage.org/xopqous19/preview.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:01:58.977

使用`onmouseenter`and`onmouseleave`代替，它不会受到*气泡*效应的影响。

jQuery 具有两者的**跨浏览器**版本，称为[`mousenter()`](http://api.jquery.com/mouseenter/)和[`mouseleave()`](http://api.jquery.com/mouseleave/)。否则，您可以参考[这个](http://blog.stchur.com/2007/03/15/mouseenter-and-mouseleave-events-for-firefox-and-other-non-ie-browsers/)以获取另一个不依赖外部库的跨浏览器实现。

# android - 游戏内存问题

> ID：12046355
> 
> 赞同：0
> 
> 时间：2012-08-20T22:56:20.567
> 
> 标签：android, opengl-es

我在 Google Play 上发布了一个 2d 游戏。我只是捕捉运行时异常，我得到了这样的异常：

```
class java.lang.RuntimeException
Msg: com.androidgames.framework.gl.Texture.load:63 (OpenGL error code while loading texture: 1285 - bg/bg3.png) 
```

我只是查找此错误代码，这意味着 GL_OUT_OF_MEMORY.Some 设备发送此异常，它正在杀死我的游戏。我的资源只有 13 MB，但即使在三星 Galaxy S2 中，我的游戏也因此异常而崩溃。什么可能导致这个问题?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:05:36.507

在某些手机上，15mb 很多。你必须非常小心记忆。如果您不需要某些图像的所有颜色，您可以尝试使用 2 字节/像素。

```
 options.inPreferredConfig = Bitmap.Config.RGB_565; 
```

每个像素存储在完整 ARGB_8888 配置的一半内存中。我的应用程序遇到了类似的问题，这对我有很大帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T23:02:36.750

`bg/bg3.png`如您所见，错误在..

尝试`decoding`你的纹理，并仔细检查资源`bg3.png`

# php - 会话重新生成 id 和 session_save_path();

> ID：12046356
> 
> 赞同：0
> 
> 时间：2012-08-20T22:56:28.990
> 
> 标签：php

您好，我在下面有这个脚本：

```
 <?php
   session_save_path('sessions/');
    if (!isset($_SESSION)) {
    session_start();
    }
   $loginUsername = A;

   if (PHP_VERSION >= 5.1) {session_regenerate_id(true); } else {session_regenerate_id();}
$_SESSION['wallet_email'] = $loginUsername;
   echo  $_SESSION['wallet_email']

?> 
```

现在我注意到，一旦生成了新的会话 ID，我就会丢失“session_save_path('sessions/')”中指定的路径。这意味着我无法创建新会话。

我实际上收到以下错误。

```
Warning: Unknown: open(sessions//sess_7af5c5f2f2bd83afff0203cc45190260, O_RDWR) failed:    No such file or directory (2) in Unknown on line 0

Warning: Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct (sessions/) in Unknown on line 0 
```

请我在这方面需要紧急帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T18:58:22.573

如前所述，为参数使用绝对路径`session_save_path( )`。这就是为什么。

`session_save_path( )`当您使用相对路径作为前者的参数时，`session_regenerate_id( )`不要很好地一起玩。在我的设置（Windows 7、Apache 2.2.25、php 5.3.27）中，我在 c:\www\test 中有以下 index.php：

```
<?php
date_default_timezone_set( 'America/New_York' );
ini_set( 'session.save_path', './sessions' );
//ini_set( 'session.save_path', 'c:/www/test/sessions' );

session_start( );
if ( !isset( $_SESSION[ 'count' ] )) {
    $_SESSION[ 'count' ] = 0;
}
$s1 = session_id( );
$b1 = $_SESSION[ 'count' ]++;
//session_regenerate_id( true );
$s2 = session_id( );
$b2 = $_SESSION[ 'count' ]++;
?>
<html>
    <head>
        <title>Test</title>
    </head>
    <body>
        <h1>Test</h1>
        <p><?php echo "$s1: $b1"; ?></p>
        <p><?php echo "$s2: $b2"; ?></p>
    </body>
</html> 
```

它就像你想象的那样工作。当我浏览到脚本时：

*   相同的会话 ID 被打印两次；
*   每个会话 ID 后面都有一个整数；
*   第二个整数比第一个整数大1；
*   刷新页面会导致整数随着每次连续刷新而增长；
*   会话文件位于目录 c:\www\test\sessions 中（必须事先创建此目录 - PHP 不会为您创建它！）；
*   并且每次连续刷新都会更新该会话文件。

当我取消注释 session_regenerate_id( ) 命令并浏览到我的脚本时：

*   我得到两个*不同的*会话 ID；
*   刷新时，第一个会话 ID 与上一页的第二个会话 ID 相同；
*   整数*始终*分别为 0 和 1；
*   c:\www\test\sessions 中没有会话文件。（如果我将 'false' 传递给 regen()，则会累积一系列空会话文件。）

当我改为使用第二个 ini_set 命令（使用完整路径）时，它工作正常。

问题似乎是 regen 函数混淆了 PHP：在 regen 之后，PHP 将会话文件写入 c:\Program Files\Apache Software Foundation\Apache2.2\sessions - 或者，它尝试这样做，但如果该目录有尚未创建。创建第二个会话目录后，我看到会话文件出现在那里。但是当我调用 session_start() 时 PHP 并没有看到那里，所以所有积累的会话知识在脚本调用之间都丢失了。

我只是想通了这一点，因为我没有在“php_errors.log”中收到“目录不存在”错误消息——至少不是我所期望的。我在 Apache2.2 目录中发现了另一个同名的文件。在 php.ini 中，我为我的 error_log 指令指定了一个简单的文件名，没有目录路径。在 regen 命令之前生成的任何错误消息都会转到 c:\www\test\php_errors.log，但在 regen 之后会转到 Apache 目录中的文件。因此，重新生成的混淆似乎超出了会话功能。

# objective-c - ActionSheet 导致多个 UIPopovers 在 iPad 上显示

> ID：12046363
> 
> 赞同：0
> 
> 时间：2012-08-20T22:56:57.900
> 
> 标签：objective-c, ios, ios-universal-app

我有一个通用应用程序，并且有一个带有几个按钮的操作表。当我点击添加按钮（navigationItem.right）时，我希望它显示在弹出框中。它正确地做到了这一点，但是，将 actionSheet 绑定到 barbutton 项目，它允许我不断地点击添加按钮并有更多的弹出窗口。

我认为在弹出框外点击会忽略这个......

```
- (IBAction)ShowItemAdd:(id)sender
{
    addActionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:[dataObj.preferences objectForKey:@"appts_name"], @"Reserve", nil];
    if ([[UIDevice currentDevice] isPad]) {
        [addActionSheet showFromBarButtonItem:[[self navigationItem] rightBarButtonItem] animated:YES];
    } else {
        [addActionSheet showInView:self.view];
    }
} 
```

如果我将它绑定到 barbutton 项目，为什么它不会自动关闭？

**编辑**

点击顶部导航项栏（蓝色栏）中的任意位置不会关闭操作表，但在导航控制器之外点击会关闭操作表。

![在此处输入图像描述](../Images/521ff08501e18003444ed4d900d4cab6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:17:41.773

在您的方法中，您应该首先检查您的操作表是否已经可见，如果是，请关闭它而不是创建新的操作表。

```
- (IBAction)ShowItemAdd:(id)sender
{
    if ([addActionSheet isVisible]) {

        [addActionSheet dismissWithClickedButtonIndex:[addActionSheet cancelButtonIndex] animated:YES];

    } else {

        addActionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:[dataObj.preferences objectForKey:@"appts_name"], @"Reserve", nil];
        if ([[UIDevice currentDevice] isPad]) {
            [addActionSheet showFromBarButtonItem:[[self navigationItem] rightBarButtonItem] animated:YES];
        } else {
            [addActionSheet showInView:self.view];
        }
    }
} 
```

# java - 将 HTML 表格转换为 XML

> ID：12046366
> 
> 赞同：2
> 
> 时间：2012-08-20T22:57:11.757
> 
> 标签：java, html, xml

我有一个以 HTML 表的形式生成测试用例结果的应用程序。我需要将此 html 表数据转换为 JUnit XML 格式以用于其他用途。

如何解析表中的每个条目。我浏览过互联网，人们正在评论其他帖子以将 html 转换为与 xml 等效的 xhtml，但这并不能满足我的要求。我希望 xml 基于 Junit xsd 模式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:10:00.167

你需要一个两步的过程。使用 HTML 解析器创建 DOM。Java有[很多选择](https://stackoverflow.com/search?q=java+html+parser)

当您解析 HTML 并获得 DOM 后，您可以通过手动代码或使用 XSLT 之类的转换语言将其转换为所需的 XML 形式。Xalan 通常是您想要在 Java 中执行 XSLT 转换的库。

# perl - 如何使这个 perl while 循环更快

> ID：12046372
> 
> 赞同：0
> 
> 时间：2012-08-20T22:58:02.643
> 
> 标签：perl, while-loop

我从脚本中打印了一些时间戳，这件作品花费了太长时间：差不多 5 分钟才能完成......！！！

仅供参考，strArr 数组包含大约 1500 个字符串元素。（这个循环运行了很多次）

文件 tmp_FH_SR 为 27Mb 和 300,000 行数据。文件 tmp_FH_RL 为 13 Mb，包含大约 150,000 行数据。

我已更改变量的名称以保护实际名称...

在第一个 while 循环中，基于 $str 在文件中仅找到一次的事实，我从匹配记录中获取另一个字段。我使用此字段来搜索该字段在另一个文件中出现的次数。基于该输出，我将 $str 添加到数组中。

```
my $tmp_srt;
foreach my $str (@strArr)
{
    my $tmp1;
    my $count=0;
    seek $tmp_FH_SR,0,0;
    while (<$tmp_FH_SR>)
    {
        my $line=$_;chomp($line);
        if ($line=~ m/\"$str\"/)
        {
            $count++;
            if ($count == 1)
            {
                my @tmp_line_ar = split(/\,/,$line);
                $tmp_str=$tmp_line_ar[10];
            }
        }
    }
    if ($count == 1)
    {
        my $k;
        seek $tmp_FH_RL,0,0;
        while (<$tmp_FH_RL>)
        {
            my $line=$_;chomp($line);
            if ($line=~m/\"$tmp_str\"/) {$k++;}
        }
        if($k == 1){push(@another_str_arr,$str);}
    }
} 
```

how can i make it faster? read the 27mb and 13mb files in an array one time and work? I wanted to avoid that, as many other process be running on the host where this runs.

ty.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T23:03:45.800

You're going at it backwards, which is one reason why it's taking so long.

`@strAtt` is only 1500 entries, and you're reading each file 1500 times because of your loop.

Put the entires in `@strArr` in a map or use a multi-dimentional array so you can keep track of your count for each entry. Read a line from the file, then loop over the 1500 entries. You now read in the file only once.

# svn - 在 CruiseControl 中排除用户提交

> ID：12046375
> 
> 赞同：1
> 
> 时间：2012-08-20T22:58:32.563
> 
> 标签：svn, cruisecontrol.net

如何排除特定用户在 SVN 中的提交以触发 Cruise Control .NET 1.8 版中的构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:54:55.593

答案是文档：
[http ://www.cruisecontrolnet.org/projects/ccnet/wiki/Filtered](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Filtered)

要解决任何问题，请从命令行运行`ccnet.exe`（在`server`安装文件夹中）并查看异常。就我而言，我错误地命名了其中一个元素。

# ruby - 无法安装 gem dm-adapter-simpledb

> ID：12046379
> 
> 赞同：0
> 
> 时间：2012-08-20T22:59:09.320
> 
> 标签：ruby, rubygems

知道我该怎么做吗？这是来自捆绑器的错误消息

```
$ bundle install
Fetching gem metadata from http://rubygems.org/........
Fetching gem metadata from http://rubygems.org/..
Bundler could not find compatible versions for gem "dm-core":
  In Gemfile:
    dm-adapter-simpledb (>= 0) ruby depends on
      dm-core (~> 0.10.0) ruby

    dm-core (1.2.0) 
```

这是我的 Gemfile

```
source 'http://rubygems.org'
gem 'sinatra'
gem 'json'
gem 'prawn'
gem 'prawn-graph'
gem 'prawn-layout'
gem 'prawn-fast-png'
gem 'prawn-qrcode'
gem 'data_mapper'
gem 'dm-core'
gem 'dm-mysql-adapter'
gem 'dm-postgres-adapter'
gem 'dm-migrations'
gem 'dm-adapter-simpledb'
gem 'aws-sdk', '~> 1.3.4'
gem 'dm-paperclip'
gem 'savon'
gem 'rmagick'
gem 'SystemTimer', :require => "system_timer", :platforms => :ruby_18
gem 'rack-timeout'
gem 'rufus-scheduler'
gem 'mail' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:15:01.053

尝试`dm-core`从 Gemfile 中删除 gem。无论如何你都不需要它——`dm-adapter-simpledb`需要它。

如果您绝对必须`dm-core`在 Gemfile 中包含 gem，请将其设置为 Gemfile.lock 中所需的版本`dm-adapter-simpledb`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:28:24.567

gemfile 中的 dm-adapter-simpledb 依赖于 dm-core 版本 0.10.0，您拥有的是 1.2.0。要么按照 Lukas 的建议删除它，要么更新你的 gemfile: `dm-core', '~> 0.10.0'

# c++ - findHomography 与 RANSAC 错误异常值

> ID：12046385
> 
> 赞同：4
> 
> 时间：2012-08-20T23:00:09.117
> 
> 标签：c++, opencv, homography, ransac

我正在使用 features2d（ORB、SIFT 等）进行一些对象检测

我正在使用 RANSAC 进一步研究单应性。我发现许多好点被错误地标记为异常值。

对象内部有很多不应该是异常值的异常值（书）

我尝试将阈值**提高到 10**，但结果几乎相同。我可以做些什么来改善这种情况吗？

RANSAC 有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T08:01:47.230

**在这种情况下，异常值**意味着这些点不适合模型，但它们**不一定必须落在您的 object 之外**。

RANSAC 会找到适合模型的最佳点集，其余点被视为异常值，但异常值完全可以是您正在跟踪的对象中受噪声影响的点，并且其检测到的位置与 RANSAC 的重投影偏差足够大被认为是异常值。

您不必担心，它工作正常并且检测到您的对象，如图所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:47:58.403

尝试使用其他特征检测器找到更多特征（最少 100 个）或调整检测器阈值以增加数量。也适合在对象上平均分配点。您可以从 OpenCV 尝试 goodFeaturesToTrack。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T10:54:31.453

**在这种情况下，异常值**是不适合模型的点。Opencv 中的 RANSAC 查找匹配点对之间的平面单应性。在你的情况下，书是一架飞机，内线应该在书内。如果它们被认为是异常值，原因可能是

1.  匹配错误
2.  图像特征的冗余（简单，例如棋盘）

在特征点是 3D 对象的情况下，不能保证内点位于对象内部。如果将匹配作为图像坐标中的输入给出，则 Opencv 的 findHomography 会估计平面单应性

# facebook - 如果喜欢按钮有确认对话框，Facebook edge.create 不会触发

> ID：12046387
> 
> 赞同：2
> 
> 时间：2012-08-20T23:00:33.243
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk

我正在尝试创建一个页面，该页面要求访问者在显示所有内容之前“喜欢”一个 Facebook 页面。

带有赞按钮的页面托管在 herokuapp.com 上，但赞的 URL 是 Facebook 页面（即主机 URL 和“赞” URL 不同）。

我已经成功地添加了一个like 按钮，并且我订阅了 edge.create 事件，并且在单击 Like 按钮时一切正常（我可以写入 console.log 或运行自定义 javascript）。

然而，在测试过程中，我多次单击“赞/不赞”，以至于我的网站现在已被标记为潜在的点击劫持，“赞”按钮现在变为“确认”并要求用户完成“确认”对话过程。

我知道我只需要积累更多的“白色”喜欢，这个对话框最终会消失，但与此同时它给我带来了问题。

基本上，当我在谷歌浏览器或我的 iPhone 上完成“确认”过程时，“确认”链接永远不会变为“喜欢”，喜欢的数量不会改变，edge.create 事件也不会触发。

有没有其他人遇到过这种行为？我已经阅读了 Stack Overflow 上与 Confirm 流程和 edge.create 相关的几乎所有帖子，但似乎没有人遇到过这个特殊问题。我真的很感激任何建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:28:09.123

我能够通过将我的应用程序移动到我自己的域而不是 heroku 来解决这个问题，即使我喜欢同一个页面。不是每个人的理想解决方案，但它对我有用。将来我将创建虚拟应用程序和页面来测试这个过程。

# php - 使用 htaccess 删除斜杠

> ID：12046390
> 
> 赞同：2
> 
> 时间：2012-08-20T23:00:40.917
> 
> 标签：php, apache, .htaccess, slash, trailing

我有一个网址“www.example.com/abc/abc.php”如果我将其更改为“www.example.com/abc/abc.php/asdasd”，某种无限循环开始并且服务器的内存达到峰值100%。

我听说 .htaccess 有一些方法可以将任何“abc.php/asdasd”重定向到“abc.php”。请帮助如何，因为我无法从网上提到的其他示例中理解它。

注意：如果将这个“/”放在目录的末尾，我不希望它被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:08:09.970

这会将一个 URL 重定向到另一个：

```
Redirect 301 /abc.php/adssd http://www.example.com/abc.php 
```

但是，这只会处理这一个示例。您应该发布完整的 .htaccess 文件，以便我们了解实际情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:09:04.397

我能够通过以下 htaccess 代码实现我想要的：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^(.*)\.php/(.*) $1.php [F]
</IfModule> 
```

这可能并不完美，但可以完成工作。现在，文本“abc.php”之后的任何内容都会导致找不到页面。适用于以下情况：

www.website.com/abc.php/

www.website.com/abc.php/asd

www.website.com/abc.phpasd

www.website.com/abc.php？

等等

# c++ - Windows BlockInput 功能不起作用

> ID：12046393
> 
> 赞同：3
> 
> 时间：2012-08-20T23:00:50.367
> 
> 标签：c++, windows, winapi, input

为什么`BlockInput`不工作

```
#include <iostream>
#include <windows.h>
#include <winable.h>
int main() {
    BlockInput(true);
    Sleep(10000);
    return 0;
} 
```

它根本不会阻止任何东西！
我仍然可以做任何事情，就像我还没有做过一样。
我还觉得奇怪的是[MSDN](http://msdn.microsoft.com/en-us/library/ms646290%28v=vs.85%29)说它应该在其中声明`winuser.h`并且它在`Winable.h`+ 我认为它`winable.h`在`windows.h`但它不是，我必须单独包含它>_>

如果对我的 IDE 有帮助的话：
Code::Blocks 10.05 MinGW

编辑：实际上我做了`GetLastError()`并且它打印错误 5`ERROR_ACCESS_DENIED`
我怎样才能获得访问权限？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T23:07:30.690

以管理员身份运行您的代码。右键单击可执行文件，然后单击“以管理员身份运行”。

# java - 正则表达式词边界

> ID：12046394
> 
> 赞同：2
> 
> 时间：2012-08-20T23:01:08.587
> 
> 标签：java, regex

我正在按单词边界拆分字符串。

我期待的是：

```
 TOKEN 0  
 TOKEN 1 0
 TOKEN 2  
 TOKEN 3 +Ve 
```

而且，我得到的是，

```
 TOKEN 0  
 TOKEN 1 0
 TOKEN 2  +
 TOKEN 3 Ve

public void StringExample(){
    String str = " 0 +Ve";

    String[] token = str.split("\\b");

    System.out.println("TOKEN 0 " + token[0]);
    System.out.println("TOKEN 1 " + token[1]);
    System.out.println("TOKEN 2 " + token[2]);
    System.out.println("TOKEN 3 " + token[3]);
} 
```

有人可以给出错误的线索吗？和可能的更正，如果有的话，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:26:27.780

@pb2q 和 @Hovercraft 都已经解释了为什么单词边界在您的情况下不起作用。另一种方法是使用 a`Pattern`并捕获每个组，这将为您提供所需的内容：

```
String str = " 0 +Ve";
Pattern p = Pattern.compile("( |[^ ]+)");
Matcher m = p.matcher(str);
List<String> tokens = new ArrayList<String>();
while (m.find()) {
  tokens.add(m.group(1));
}           
System.out.println("TOKEN 0 " + tokens.get(0));
System.out.println("TOKEN 1 " + tokens.get(1));
System.out.println("TOKEN 2 " + tokens.get(2));
System.out.println("TOKEN 3 " + tokens.get(3)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T23:19:35.863

没有任何问题，结果也符合预期。单词边界在字符串的第一个字符之前、字符串的最后一个字符之后以及字符串*中的两个字符之间匹配，其中一个是单词字符，另一个不是单词字符*。最后一条规则将导致“+”和“V”之间的匹配，因此您的结果非常有意义。

也许您想使用向前看和向后看来匹配空间旁边的任何东西。例如：

```
public class Foo001 {
   // private static final String REGEX1 = "\\b";
   private static final String REGEX2 = "(?= )|(?<= )";

   public static void main(String[] args) {
      String str = " 0 +Ve";

      String[] tokens = str.split(REGEX2);
      for (int i = 0; i < tokens.length; i++) {
         System.out.printf("token %d: \"%s\"%n", i, tokens[i]);
      }

   }
} 
```

这也将匹配第一个空格的左侧，给出一个额外的标记：

```
token 0: ""
token 1: " "
token 2: "0"
token 3: " "
token 4: "+Ve" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T23:12:16.773

`+`不计为单词边界的单词字符。单词字符是`[a-zA-Z_0-9]`，即字母数字和下划线

除非您的字符串比您的示例更复杂，否则这是另一个您可以在空间周围拆分的实例：

```
" 0 +Ve".split(" "); 
```

这应该产生这个数组：`[" ", "0", "+Ve"]`。

这与您期望的令牌列表不太匹配，但可能适合您的目的。通过这个标记列表，您知道有一个前导空格字符，并且您可以推断出一个空格作为第三个标记。

以这种方式拆分的一个问题是多个空格字符会`" "`在结果数组中产生额外的标记。

# mysql - 选择字段与数千个字符串之一匹配的行

> ID：12046397
> 
> 赞同：1
> 
> 时间：2012-08-20T23:01:34.267
> 
> 标签：mysql, r, select, rows, org-mode

我想选择表中具有特定字段属性的所有行。即该字段是已知的十万个字符串之一。

我正在使用 R 发送查询。所以我有如下代码：

```
my_samp <- sample(unique_ids, replace=T, size=10^6)  
my_conn <- dbConnect(MySQL(),user='me',dbname='my_db')
query <- paste('SELECT blah1, blah2,...,blah900 FROM my_table WHERE      blah1=',paste(my_samp,collapse=' OR ',sep=''),sep='')
res1 <- dbSendQuery(my_conn, query)
my_data <- fetch(res1,n=-1)
dbDisconnect(my_conn) 
```

但是，我担心 R 解释器或 mysql 无法正确处理该字符串。我也怀疑这是低效的。有更清洁的解决方案吗？

我无法使用 dbReadTable 将整个表直接读入 R，因为它太大了。

我计划通过分叉过程来完成数千次 - 统计引导。

如果字符串在 my_samp 中重复，则查询中需要有重复记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:08:25.300

根据 Blue Magister 的思路，您可能应该有一个表，其中存储了所有这些“已知”字符串。然后，您可以在查询中加入该表以过滤掉您的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:09:54.433

如果您有权在数据库中创建临时表，则可以使用所有字符串填充它，然后在选择行时加入它。如果它比这更永久，也许您可​​以创建表并管理数据库内部的字符串而不是 R。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:07:32.800

最好的方法是：

1.  A）创建一个创建已知字符串列表的子查询或 B）将已知字符串插入数据库的表中
2.  然后 A) 使用这些表创建一个新的连接查询或 B) 使用带有立即列表的[“IN 子句” ，如下所示：](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)

    ```
    query <- paste('select * from my_table where blah1=',paste(my_samp,collapse=' OR ',paste(' in (str1, str2, str3, str4)',sep=''),sep=''),sep='') 
    ```

# c# - Windows 系统时间从 NTP 时间更新更改时是否有事件？

> ID：12046398
> 
> 赞同：2
> 
> 时间：2012-08-20T23:01:53.903
> 
> 标签：c#, windows, datetime

我想在我的 C# 应用程序中更改 Windows 系统日期/时间时收到通知。我找到了[SystemEvents.TimeChanged](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.timechanged%28v=vs.100%29.aspx)事件，MSDN 文档说：

> 当用户更改系统时钟的时间时发生。

如果 NTP 更改时钟，此事件是否也会被触发？或者我可以订阅其他活动吗？

**实施细节：**

我想要一个 timer.Elapsed 事件在特定日期/时间触发。我的代码计算用于计时器所需的时间间隔。如果系统时间发生变化，则需要重新评估此计算以计算出新的时间间隔并更新计时器。

**答案摘要**

感谢所有的评论。我在下面总结了它们以供将来参考：

*   SystemEvents.TimeChanged 在用户更改和系统调用与 NTP 服务器重新同步时触发
*   如果在 Windows 服务中运行，则需要处理消息泵以获取 TimeChanged 事件。这可以通过运行调度程序来实现。
*   NTP 服务器不应用离散的系统日期更改。逐步应用 NTP 时钟调整，考虑到计算的时钟漂移以及本地时钟与其他 NTP 服务器之间的偏移
*   对于我的实现，最好定期评估计时器间隔以考虑任何系统时间更改，而不是设置一次间隔并让它触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T23:37:58.617

是的，`TimeChanged`当您将 Windows 配置为使用 NTP 服务器以使您的时间保持最新以及有人手动更改时间时会引发。

这里的一个警告是你必须有一个 UI。（或启动一个隐藏窗口来获取消息泵）。即，您无法在 Windows 服务中获得 TimeChanged 事件。

# objective-c - 排序 NSMutableArray 与另一个 NSMutableArray 的顺序相同

> ID：12046403
> 
> 赞同：0
> 
> 时间：2012-08-20T23:02:25.187
> 
> 标签：objective-c

我正在使用`NSMutableArray *allObjectsArray;`带有字典的表格视图来填充内容。

现在我想用第二个`NSMutableArray *userDataArray;`（也用字典）在同一个 TableView 中显示一些用户定义的数据。

为了让不同数组中的字典能够相互识别，它们都有一个带键的字符串：`"Name"`具有匹配值。

那么如何编写代码以使对象与使用键中的匹配值`userDataArray`的对象具有相同的顺序？`allObjectsArray``"Name"`

因此，当创建单元格时，`[allObjectsArray objectAtIndex: indexPath.row]`现在应该表示相同的对象`[userDataArray objectAtIndex: indexPath.row]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:08:31.040

为什么不直接将*userDataArray*中的对象关联到*allObjectsArray*中的对象呢？例如，*allObjectsArray*中的每个对象都可以有一个*userData*字段，该字段指向 userDataArray 中的关联*对象*

无论如何，如果你真的想对它们进行排序，你可以这样做：

```
NSArray * descriptors = @[ [ NSSortDescriptor sortDescriptorWithKey:@"Name" ascending:YES ] ] ;
allObjectsArray = [ allObjectsArray sortedArrayUsingDescriptors:descriptors ] ;
userDataArray = [ allObjectsArray sortedArrayUsingDescriptors:descriptors ] ; 
```

**编辑：直接将*userDataArray*中的字典与*allObjectsArray中的字典相关联***

对于*allObjectsArray*中的每个对象，因为它们是字典，所以你可以这样做

```
NSDictionary * dictionaryFromAllObjectsArray = ...
[ dictionaryFromAllObjectsArray setObject:associatedUserObject forKey:@"userObject" ] 
```

现在他们关联了...

之后：

```
NSDictionary * dictionaryAtIndex = [ allObjectsArray objectAtIndex:indexPath.row ] ;
NSDictionary * userDictionaryAtIndex = [ dictionaryAtIndex objectForKey:@"userObject" ] ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:10:20.820

最好的方法是重构您的数据，以便您只有一个用于任何名称的字典，并且它结合了您当前在您的字典对中拥有的对象和键。这意味着只需要一个数组，一旦它被排序，你就有了你需要的行。

# python - 在 Django 中找不到视图

> ID：12046408
> 
> 赞同：1
> 
> 时间：2012-08-20T23:02:46.360
> 
> 标签：python, django

我收到错误

ViewDoesNotExist at / 无法导入 blog.views。模块博客中不存在视图。

与姜戈

我的 URLS 文件看起来像这样

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    url(r'^$', 'blog.views.home', name='home'),
    # url(r'^Blog/', include('Blog.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
) 
```

我的目录树看起来像这样

```
Blog
_manage.py
_Blog
__wsgi.py
__urls.py
__settings.py
__ __init__.py
_blog
__views.py
__tests.py
__Templates
____index.html
__models.py
__ __init__.py 
```

在views.py

```
from django.shortcuts import render_to_response

from blog.models import posts

def home(request):
    return render_to_response('index.html') 
```

进一步调试：

```
Environment:

Request Method: GET
Request URL: http://192.168.2.3:1337/

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  300\.                     sub_match = pattern.resolve(new_path)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  209\.             return ResolverMatch(self.callback, args, kwargs, self.name)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in callback
  216\.         self._callback = get_callable(self._callback_str)
File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py" in wrapper
  27\.         result = func(*args)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in get_callable
  101\.                     (lookup_view, mod_name))

Exception Type: ViewDoesNotExist at /
Exception Value: Could not import blog.views. View does not exist in module blog. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T23:12:20.010

根据您的调试输出，settings.py 中的 INSTALLED_APPS 设置中似乎不存在**博客应用程序**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T23:14:35.657

显然您忘记将您的“博客”应用程序包含在 django 安装的 settings.py 应用程序中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:26:15.367

检查命名中的大小写，并确保您的应用中有一个**init** .py。

# iphone - 更新 IOS 应用程序。是否需要审查更新？

> ID：12046409
> 
> 赞同：4
> 
> 时间：2012-08-20T23:03:13.137
> 
> 标签：iphone, ios, app-store-connect

我刚刚在应用商店中获得了一个应用，并在第一次查看时意识到有拼写错误！由于该应用程序适用于 3 天内即将发生的事件，因此我对上传更新感到紧张。如果我将新的二进制文件上传到 iTunes Connect，这是否意味着我以前的版本将无法在应用商店中获得？另外，在发布我的最新版本之前，我需要让 Apple 批准吗？

任何建议都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T23:04:48.150

当您推送新更新时，它必须是评论，但可能需要 3 天以上的时间。在等待审核期间，您的当前版本将上线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:32:53.873

不用担心，您之前的版本不会受到影响。只需上传新的，但要知道它需要 3 天以上（如果您在工作时间提交，几乎总是 7 天）。您可以申请加急审核，但有时甚至可能需要 3 天以上的时间。

而且您无需删除旧版本即可放入新版本。您只需提交新的。您可以确定是否希望它在获得批准后立即在应用商店中自动可用，或者给它一个特定的发布日期。

只要知道这一点：如果您的更新有问题并且在应用商店上架后您被迫将其删除，那么您不能只是恢复到旧版本。您必须重新提交旧版本并等待一周才能再次获得审核。

# app-store - App Store - 更新是否会在批准后自动发布？

> ID：12046410
> 
> 赞同：1
> 
> 时间：2012-08-20T23:03:18.990
> 
> 标签：app-store, itunes, app-store-connect

正如问题所说，我想知道更新的应用程序在获得批准后是否会自动发布到应用程序商店？

我的更新已完成并经过测试，由于需要几天时间才能批准，我想现在提交以供批准。与此同时，我需要在我的服务器上更改更新一些内容，但是我不希望应用程序更新在我完成服务器内容之前上线。

该应用程序会立即上线还是我可以选择发布日期（当然是在批准后）？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:08:05.827

您可以选择

*   选择发布日期
*   批准后立即发布
*   一旦获得批准，请等到我发布它，（等待您单击发布按钮，以便您可以进行服务器更改）也就是版本发布控制。

这一切都可以在提交申请时通过 iTunes Connect 完成。但是，如果您选择“当我准备好时发布”选项，则应用程序批准仅对该版本有效。如果您上传新版本，则必须重新批准。

# php - 如何使用河豚进行加密在python和php之间发送加密消息？

> ID：12046419
> 
> 赞同：2
> 
> 时间：2012-08-20T23:05:22.007
> 
> 标签：php, python, django, blowfish, encryption-symmetric

我想使用河豚用已知密码加密 php 中的消息。然后我想在 python 中解密这个消息。

即使您想用一种语言加密并在其他地方解密，这也很有用。

我进行了相当广泛的搜索，但找不到任何确凿的解决方案，所以我想记录下我的发现。

请注意，使用相同的语言（例如 python 或 php）加密/解密非常简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:05:22.007

这个解决方案非常简单，但我花了一段时间才弄清楚。

***河豚参数***

*   密码长度应为 16
*   使用模式 MODE_ECB。
*   ***被加密的数据长度应该总是可以被 16 整除，用空格或任何其他字符填充。我在下面的示例中采用了 16 长度的数据字符串。***

php代码：

```
<?php
$passw='secretPassword12';
$ntext='helloWorld123456';
$enc = base64_encode(mcrypt_encrypt(MCRYPT_BLOWFISH, $passw, $ntext, MCRYPT_MODE_ECB));
echo '<div>'.$enc.'</div'; 
```

这输出 3C8f2kaD8Of0INYk3l9qEg== python 代码：

```
from Crypto.Cipher import Blowfish
from base64 import b64encode, b64decode
passw='secretPassword12'
ntext='helloworld123456'

cipher=Blowfish.new(passw, Blowfish.MODE_ECB)
encStr=b64encode(cipher.encrypt(data))
print encStr 
```

此代码也输出 3C8f2kaD8Of0INYk3l9qEg==

现在假设你想解密一些用 php 加密的 python 字符串。首先做 b64decode 然后解密结果。

```
Remember to pad your data such that the len is divisible by 16\. 
```

加解密快乐！！！

# node.js - 如何配置 express.js/jade 来处理 html 文件？

> ID：12046421
> 
> 赞同：3
> 
> 时间：2012-08-20T23:05:25.670
> 
> 标签：node.js, express, pug

我想配置jade引擎来处理我的views文件夹中的.html文件。这是我当前的服务器配置：

```
app.configure(function(){
  var pub_dir = __dirname + '/public';
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ secret: nconf.get("site:secret") }));
  app.use(everyauth.middleware());  
  app.use(require('less-middleware')({ src: pub_dir, force:true }));
  app.use(express.static(pub_dir)); 
  app.use(app.router);
  app.use(logErrors);
  app.use(clientErrorHandler);
  app.use(errorHandler);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T23:09:49.323

[https://github.com/visionmedia/express/blob/master/examples/ejs/index.js](https://github.com/visionmedia/express/blob/master/examples/ejs/index.js)

```
app.engine('.html', require('jade').__express); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-21T05:16:26.120

确保你已经`jade`在你的`node_modules`

```
npm install --save jade 
```

在 express 4.x 中，您可以简单地将 设置[`view engine`](http://expressjs.com/4x/api.html#app-settings)为`jade`.

```
app.set('view engine', 'jade') 
```

# c# - 如何在 MVC 中为具有多个属性的视图模型添加验证错误？

> ID：12046423
> 
> 赞同：22
> 
> 时间：2012-08-20T23:05:39.977
> 
> 标签：c#, asp.net-mvc

如果我有一个看起来像这样的视图模型：

```
public class Car

{

     Wheel CarWheel {get;set;}
     Body CarBody {get;set;}

} 
```

我的 Wheel 和 Body 类看起来像这样：

```
public class Wheel
{
    int Number {get;set;}
    string WheelType {get;set;}
}

public class Body
{
    int Number {get;set;}
    string BodyType {get;set;}
} 
```

我想为小于 1 的轮数添加模型错误：

```
ModelState.AddModelError(???, "Error! You must have at least one wheel to avoid abrasion on your bottom"); 
```

如何指定错误专门针对 Wheel 类，而不是 Body 类？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-21T04:51:34.380

要指定错误出现在and not的`CarWheel`版本上，您需要以与获取或设置该属性值相同的方式“命名空间”属性名称的值：`Number``CarBody`

```
ModelState.AddModelError("CarWheel.Number", "Error! You must have at least one wheel to avoid abrasion on your bottom"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T12:33:58.013

```
ModelState.AddModelError("Car_CarWheel_Number", "Error! You must have at least one wheel to avoid abrasion on your bottom"); 
```

或者

```
ModelState.AddModelError("", "Error! You must have at least one wheel to avoid abrasion on your bottom \n\r Error 2"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T10:10:52.793

Bryan 的回答，或者您可以尝试使用数据注释。

range 属性应该适合您，或者您可以根据需要编写自己的属性。

# html - 为什么 CSS 规则的存在会导致另一个不匹配？

> ID：12046425
> 
> 赞同：1
> 
> 时间：2012-08-20T23:05:48.497
> 
> 标签：html, css, google-chrome

我尝试在 Chrome 中创建以下 HTML 文件：

```
<style>
br {
}​

[required] {
  border-width: 3px;
  border-color: red;
}

</style>
<input required /> 
```

这是文件的完整内容。`[required]`规则不匹配并且仍然`<input>`没有样式。

如果空 br 规则被忽略，则文件读取：

```
<style>

[required] {
  border-width: 3px;
  border-color: red;
}

</style>
<input required /> 
```

它工作正常！

为什么`<br>`前一个规则的存在`[required]`会导致`[required]`不匹配？

谢谢。（它工作正常是 jsfiddle，你需要实际创建文件。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:21:49.627

您的新行以某种方式无效。删除代码后，代码按预期执行。

我已经将问题追溯到`br`. 这是我在 vim 中得到的：

```
<style>
br {
}<200b>

[required] {
  border-width: 3px;
  border-color: red;
}

</style>
<input required /> 
```

显然`<200b>`是 Unicode 零宽度空间。我不熟悉这个角色，也不知道为什么它会出现在这个文件中。删除它可以解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T23:18:19.200

我认为 br 正在帮助欺骗浏览器 - 因为它们是更多的括号......

我想你错过了一些东西......

```
.required{} and
<input class="required">  

or 
#required{} and
<input id="required"> 
```

让小提琴！

# php - Pecl phpize failed config.m4 not found

> ID：12046428
> 
> 赞同：5
> 
> 时间：2012-08-20T23:06:13.723
> 
> 标签：php, pecl

我正在尝试安装 Pecl 扩展（SCA_SDO），但是当我运行以下命令时，`pecl install SCA_SDO`我得到了错误：

```
downloading SCA_SDO-1.2.4.tgz ...
Starting to download SCA_SDO-1.2.4.tgz (576,531 bytes)
....................................................................................................................done: 576,531 bytes
194 source files, building
running: phpize
Cannot find config.m4.
Make sure that you run '/usr/bin/phpize' in the top level source directory of the module

ERROR: `phpize' failed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T06:31:22.897

download the file, uncompress and cd to the folder, then do **pecl build**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-09T21:59:01.743

从[https://pecl.php.net/package/SCA_SDO下载](https://pecl.php.net/package/SCA_SDO)

解压缩并更改到该文件夹​​并运行

```
phpize
./configure
make clean && make && make install

nano php.ini
 add extension=yourextension.so 
```

# jquery - 如何简化 if 语句代码

> ID：12046431
> 
> 赞同：0
> 
> 时间：2012-08-20T23:06:38.637
> 
> 标签：jquery

我试图简化下面的代码，使它们不那么难看。有没有更好的方法来做到这一点？非常感谢。

```
//the only difference is the append and after method after the $element.
     if($element.is('td')){
            $element.append(
                  $(document.createElement('div')).attr({'id': tooltipId}).addClass('js-tutorialTooltips').css({
                      'position': 'absolute',
                      'z-index':'9999', 
                      'color':'white',
                      'background-color': 'rgba(0, 0, 0, 0.8)',
                      'border': '1px solid #cccccc',
                      'border-radius': '0.5em',
                      'box-shadow': '0 0.2em 0.2em #111'})
                    .append(
                      $(document.createElement('div')).css({'padding': '0.5em 1em'}).html(text) //for more tool info add the following + '<br/>(' + verticalPosition + '-' + horizontalPosition + ':' + domId + ')'
                   )
                )
        }else{
            $element.after(
                      $(document.createElement('div')).attr({'id': tooltipId}).addClass('js-tutorialTooltips').css({
                        'position': 'absolute',
                        'z-index':'9999',
                        'width':'300px',
                        'color':'white',
                        'background-color': 'rgba(0, 0, 0, 0.8)',
                        'border': '1px solid #cccccc',
                        'border-radius': '0.5em',
                        'box-shadow': '0 0.2em 0.2em #111'})
                    .append(
                           $(document.createElement('div')).css({'padding': '0.5em 1em'}).html(text)  //for more tool info add the following + '<br/>(' + verticalPosition + '-' + horizontalPosition + ':' + domId + ')'  
                    )
            );  
        }

//The only difference is  prependTo and insertBefore method.. 

        if($element.is('td')){

                       $(document.createElement('img'))
                            .attr({src:'inc/images/help_bubble.png', title:'help Image', 'class': 'helpImg'})
                            .prependTo($element)
                            .css({'position':'absolute',
                                   'z-index':999,
                                   'top': xPos,
                                   'left': yPos
                             })

                   return true;
               }

                $(document.createElement('img'))
                            .attr({src:'inc/images/help_bubble.png', title:'help Image', 'class': 'helpImg'})
                            .insertBefore($element)
                            .css({'position':'absolute',
                                   'z-index':999,
                                   'top': xPos,
                                   'left': yPos

                                 }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:10:34.487

使用`[]`语法，以便您可以使用动态函数名称：

```
var func = $element.is('td') ? "append" : "after";
$element[func](...); 
```

另外，考虑使用类名来定义 CSS 中的样式。这也应该使您的代码更加清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T23:10:22.230

看起来你添加的东西是一样的，但是你添加它的方式是不同的，这取决于你是否添加到`td`.

```
var toAdd = $element.append(
                  $(document.createElement('div')).attr({'id': tooltipId}).addClass('js-tutorialTooltips').css({
                      'position': 'absolute',
                      'z-index':'9999', 
                      'color':'white',
                      'background-color': 'rgba(0, 0, 0, 0.8)',
                      'border': '1px solid #cccccc',
                      'border-radius': '0.5em',
                      'box-shadow': '0 0.2em 0.2em #111'})
                    .append(
                      $(document.createElement('div')).css({'padding': '0.5em 1em'}).html(text) //for more tool info add the following + '<br/>(' + verticalPosition + '-' + horizontalPosition + ':' + domId + ')'
                   )
                ) 
```

接着

```
if($element.is('td')){
    $element.append(toAdd)
else 
    $element.after(toAdd); 
```

如果您添加的内容不同，您可以将 css 属性分解出来，然后在条件中修改它们。

```
var toAdd, cssProps = {/* defaultValues */};

if($element.is('td')){
    // tweak css props       
    toAdd  = $(document.createElement....
    $element.append(toAdd)
} else {
    // tweak css props2
    toAdd  = $(document.createElement....
    $element.after(toAdd);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T23:12:57.793

首先创建元素：

```
var element = $('<div/>').attr({'id': tooltipId}).addClass('js-tutorialTooltips').css({
                  'position': 'absolute',
                  'z-index':'9999', 
                  'color':'white',
                  'background-color': 'rgba(0, 0, 0, 0.8)',
                  'border': '1px solid #cccccc',
                  'border-radius': '0.5em',
                  'box-shadow': '0 0.2em 0.2em #111'})
                .append(
                  $('<div/>').css({'padding': '0.5em 1em'}).html(text) //for more tool info add the following + '<br/>(' + verticalPosition + '-' + horizontalPosition + ':' + domId + ')'
               );

if ($element.is('td')) {
  $element.append(element);
} else {
  $element.after(element);
} 
```

# html - 缺少垂直滚动条

> ID：12046432
> 
> 赞同：1
> 
> 时间：2012-08-20T23:06:41.240
> 
> 标签：html, scrollbar

如果您以 1024x768 分辨率或在移动设备上查看此 HTML css 站点，则垂直延伸到浏览器之外的内容将被隐藏，并且没有垂直滚动条可以这样做。有什么办法可以强制吗？

[www.marketbridge.net](http://www.marketbridge.net)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T05:49:39.147

在 Apple OS 上，滚动条不再显示。我也经常觉得这很麻烦，但我猜 MacOS/iOS 用户已经习惯了。您可以使用滚动高度和滚动位置使用 JavaScript 进行一些天桥指示，但我想您最好始终使用 pagefooter。这样用户“感觉”仍然有内容。另一种实现此目的的方法是仅显示最后显示的文本行的上半部分（通过 JavaScript）。通过在视口底部显示一个不透明度增加的矩形（0 到 100%）可以达到相同的效果，这使视口的底部看起来淡出。如果您确保页面的底部填充等于或大于渐变，则可以很好地指示延续，而且您可以使用纯 HTML 和 css 进行操作。

# javascript - 如何使用 jQuery 实时检查元素插入 html。

> ID：12046433
> 
> 赞同：0
> 
> 时间：2012-08-20T23:06:48.387
> 
> 标签：javascript, jquery, html, live

我有一些动态解析内容的块。我需要为它更改一些样式，但如果有一些 html。我的问题：是否有可能使用 jQuery 实时检查某些元素在指定时刻具有 html 并设置一些操作（例如，如果它是空的）？谢谢一些信息。

我的代码：

```
if ($('.degrees').live().html === ("")){
    $('.block').fadeOut('slow');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:42:17.467

试试这个：

检测为空并更改其 html 的 div：

```
$('.degrees:empty').on('DOMSubtreeModified',function(){
    //...
}); 
```

检测每个 html 更改

```
$('.degrees').on('DOMSubtreeModified',function(){
    if($(this).is(':empty')) // check if it became empty ..
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:12:14.533

你可以这样检查：

```
if($('.degrees').html().length > 0){
    // element has children
} else {
    // no children
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:12:27.903

您可以像这样检查元素是否为空：

```
if ($('.degrees').is(':empty')){
    $('.block').fadeOut('slow');
} 
```

但它仅在您进行检查时才有效，而不是对未来的元素，这样做您必须使用间隔定期检查它，这通常不是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T23:32:23.010

您可以检查子元素：

```
var $main = $('.degrees'),
    $child = $('.block');

if($main.children().length < 0) {
    $child.fadeOut(500);
} 
```

# google-bigquery - 谷歌 BigQuery 沙盒

> ID：12046442
> 
> 赞同：1
> 
> 时间：2012-08-20T23:08:19.720
> 
> 标签：google-bigquery

我正在查看 Google BigQuery API，但找不到有关任何沙盒或开发者帐户的任何信息，所以如果我只是想在尝试之前对其进行测试，我仍然需要付费，对吗？只是想确认。

谢谢，

安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:14:24.300

您应该可以在不付费的情况下试用它，您每天只能收到 10,000 个请求，之后您需要付费才能继续使用它。

只需转到您的 api 控制台，创建一个新项目，然后从列表中激活 BigQuery。当您这样做时，您将被要求签署协议，其中确实有一个付款条款部分，其中规定：

> 3.1。免费配额。服务免费提供给客户，费用不超过费用门槛。

您可以在此处查看定价页面：[https ://developers.google.com/bigquery/docs/pricing](https://developers.google.com/bigquery/docs/pricing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-05T17:58:29.420

BigQuery 沙盒于上周五（2 月 1 日）推出，它允许您在没有 CC 的情况下免费试用 BQ，只需要一个 gmail 帐户。在此处查看文档：[https ://cloud.google.com/bigquery/docs/sandbox](https://cloud.google.com/bigquery/docs/sandbox)

或从 BQ 营销页面： [https ://cloud.google.com/bigquery/](https://cloud.google.com/bigquery/)

# ruby-on-rails - nil 类 - 提交表单时出现 NoMethod 错误。在 erb、Ruby on Rails 中使用 form_tag？

> ID：12046446
> 
> 赞同：0
> 
> 时间：2012-08-20T23:08:32.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, erb

控制器中的 -Form_html.erb、routes.rb 和 create 方法如下。但是在提交表单时，它在我使用 params[:mail_setting] 的那一刻给出了 nil 类错误

```
 routes.rb
-----------
resources :mail_settings

the _form.html.erb
---------
<%= form_tag  '/mail_settings' do %>

    <div class="fieldBlock">
     <%= label_tag :name %>  <%= text_field_tag :name%> </div>

    <div class="fieldBlock">
     <%= label_tag :id%>  <%= text_field_tag :id%> </div>

    <div class="actions fieldBlock">
     <%= submit_tag "Update Settings ", :class => "btn-large btn-success" %>
    </div>

<% end %> 
```

控制器中的create方法：

```
def create

     @mail_setting = MailSetting.find_by_user_id_and_name(current_user.id,     params[:mail_setting][:name])

        if ! @mail_setting.blank?
            @mail_setting.update_attributes(params[:mail_setting])

        else
            @mail_setting = MailSetting.new(params[:mail_setting])
            @mail_setting.save
            render action: "index"
        end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:45:14.090

尝试`params[:mailsetting]`不使用下划线。该模型名为 MailSetting，所以我认为这是正确的。NoMethod 错误意味着没有生成名为 mail_setting 的辅助方法，由于您已经制作了模型，因此可能是因为它的拼写错误。

我建议在命名资源时不要使用下划线/破折号，因为它只会混淆语法。

# php - 计算 char 中的可能性。使用连续重复标准的组合

> ID：12046447
> 
> 赞同：3
> 
> 时间：2012-08-20T23:08:36.150
> 
> 标签：php, algorithm, math, combinatorics

在 PHP 中，给定

*   最终字符串长度
*   它可以使用的字符范围
*   可能的最小连续重复次数

您如何计算符合这些条件的匹配数？
为了画出更好的画面……</p>

```
$range = array('a','b','c');
$length = 2; // looking for 2 digit results
$minRep = 2; // with >=2 consecutive characters
// aa,bb,cc = 3 possibilities 
```

另一个：

```
$range = array('a','b','c');
$length = 3; // looking for 3 digit results
$minRep = 2; // with >=2 consecutive characters
// aaa,aab,aac,baa,caa
// bbb,bba,bbc,abb,cbb
// ccc,cca,ccb,acc,bcc
// 5 + 5 + 5 = 15 possibilities
// note that combos like aa,bb,cc are not included
// because their length is smaller than $length 
```

最后一个：

```
$range = array('a','b','c');
$length = 3; // looking for 3 digit results
$minRep = 3; // with >=3 consecutive characters
// aaa,bbb,ccc = 3 possibilities 
```

所以基本上，在第二个例子中，第三个标准使它在**aab中捕获例如****[aa]b**因为**a**连续重复不止一次，而**[a]b[a]**不会是匹配的，因为那些**a**是分开的.

 ******不用说，没有一个变量是静态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:02:40.047

我认为最好用数学来处理这个问题。

```
$range = array('a','b','c');
$length = 3; // looking for 3 digit results
$minRep = 2; // with >=2 consecutive characters

$rangeLength = count($range);
$count = (pow($rangeLength,$length-$minRep+1) * ($length-$minRep+1)) - ($rangeLength * ($length-$minRep)); // is the result 
```

现在， $count 在三种情况下得到了真实的结果。但它可能不是通用公式，需要改进。

试着解释一下：

```
pow($rangeLength,$length-$minRep+1) 
```

在此，我们将重复字符视为一个。例如，在您给出的第二个示例中，我们认为在 aab 中，aa 是一个字符。因为，两个字符需要一起改变。我们认为现在有两个像 xy 这样的字符。因此，字符 a、b 和 c 的可能性相同，即 3 ($rangeLength) 两个字符的可能值 ($length-$minRep+1)。所以 3^2=9 是第二个例子的可能情况。

我们计算出 9 仅代表 xy 而不是 yx。为此，我们乘以 xy 的长度 ($length-$minRep+1)。然后我们有 18 个。

看起来我们计算了结果，但我们的计算中有重复。我们没有考虑到这种情况：xy => aaa 和 yx => aaa。为此，我们计算并减去重复的结果

```
- ($rangeLength * ($length-$minRep)) 
```

所以在这之后，我们得到了结果。正如我在描述开始时所说的那样，这个公式可能需要改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:11:17.440

知道了。全部归功于**leonbloy** [@mathexchange.com](https://math.stackexchange.com/questions/185096/number-of-words-with-a-minimal-number-of-repetitions)。

```
/* The main function computes the number of words that do NOT contain
 * a character repetition of length $minRep (or more). */
function countStrings($rangeLength, $length, $minRep, &$results = array())
{
  if (!isset($results[$length]))
  {
    $b = 0;

    if ($length < $minRep)
      $b = pow($rangeLength, $length);
    else
    {
      for ($i = 1; $i < $minRep; $i++)
        $b += countStrings($rangeLength, $length - $i, $minRep, $results);
      $b *= $rangeLength - 1;
    }

    $results[$length] = $b;
  }

  return $results[$length];
}

/* This one answers directly the question. */
function printNumStringsRep($rangeLength, $length, $minRep)
{
  $n = (pow($rangeLength, $length) 
            - countStrings($rangeLength, $length, $minRep));
  echo  "Size of alphabet : $rangeLength<br/>"
        . "Size of string : $length<br/>"
        . "Minimal repetition : $minRep<br/>"
        . "<strong>Number of words : $n</strong>";
}

/* Prints :
 * 
   Size of alphabet : 3
   Size of string : 3
   Minimal repetition : 2
   Number of words : 15
 *
 */
printNumStringsRep(3, 3, 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:44:54.363

有了数学，工作变得非常复杂。但是，总有一种方法，甚至不如数学那么漂亮。我们可以使用 php 创建所有可能的字符串，并使用正则表达式控制它们，如下所示：

```
$range = array('a','b','c');
$length = 3; 
$minRep = 2; 

$rangeLength = count($range);

$createdStrings = array();
$matchedStrings = array();

function calcIndex(){
    global $range;
    global $length;
    global $rangeLength;

    static $ret;

    $addTrigger = false;

    // initial values
    if(is_null($ret)){ 
        $ret = array_fill(0, $length, 0);
        return $ret;
    }

    for($i=$length-1;$i>=0;$i--){
        if($ret[$i] == ($rangeLength-1)) {
            if($i==0) return false;
            $ret[$i] = 0;
        }
        else {
            $ret[$i]++;
            break;
        }
    }

    return $ret;
}

function createPattern()
{
    global $minRep;
    $patt = '/(.)\\1{'.($minRep-1).'}/';
    return $patt;
}

$pattern = createPattern();

while(1) 
{
    $index = calcIndex();
    if($index === false) break;

    $string = '';
    for($i=0;$i<$length;$i++)
    {
        $string .= $range[$index[$i]];
    }

    if(!in_array($string, $createdStrings)){ 
        $createdStrings[] = $string;
        if(preg_match($pattern, $string)){
            $matchedStrings[] = $string;
        }
    }
}

echo count($createdStrings).' is created:';
var_dump($createdStrings);

echo count($matchedStrings).'strings is matched:';
var_dump($matchedStrings); 
```******

# wordpress - Wordpress 响应式标题问题

> ID：12046450
> 
> 赞同：0
> 
> 时间：2012-08-20T23:09:09.587
> 
> 标签：wordpress, header, responsive-design, media-queries

> **可能重复：**
> [Wordpress 响应式导航栏问题](https://stackoverflow.com/questions/12045726/wordpress-responsive-navbar-problems)

我正在尝试为我的 wordpress 主题创建一个在此处响应的标题：http: [//22twenty.com/wordpress/](http://22twenty.com/wordpress/)

正如你所看到的，它们被分组在一个“正方形”中，如果你缩小页面并备份它真的很混乱：当它出现一个小白框时，当你放大它时，导航到处都是。

CSS在这里：http: [//22twenty.com/wordpress/wp-content/themes/Wallspacecopy/style.css](http://22twenty.com/wordpress/wp-content/themes/Wallspacecopy/style.css)

正如我所说，这是一个 wordpress 主题，所以如果您需要更多文件来帮助，请询问。

## 所以我要问的是有什么必须添加或更改以使已经工作的标题（在另一个站点上使用）在 wordpress 主题上工作，如果不是你认为它有什么问题。

谢谢

丹佛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:41:00.440

更改 CSS 从

```
header ul li{
  z-index:30000;
    display: inline; /* you are changing this line */
    font-family: Arial;
    margin: 15px;
    font-size: 20px;
} 
```

至

```
header ul li{
  z-index:30000;
    display: block;
    font-family: Arial;
    margin: 15px;
    font-size: 20px;
} 
```

此外，您应该摆脱包含的空标签（参见[http://jsbin.com/agiwev/1/](http://jsbin.com/agiwev/1/)示例）

# eclipse - 使用css主题在eclipse juno中删除选定选项卡中的边框

> ID：12046451
> 
> 赞同：1
> 
> 时间：2012-08-20T23:09:14.067
> 
> 标签：eclipse, gtk, themes, eclipse-juno

在 Ubuntu GTK Eclipse Juno 主题中，选定的选项卡有一个灰色的底部边框。我想删除这个边框。我怎样才能做到这一点？

**我不是在问*如何*创建、编辑或修改 Eclipse 主题**。我正在寻找删除边框所需的*特定CSS 样式。*

这是带有问题边框的所选选项卡的屏幕截图：

![在此处输入图像描述](../Images/2adbe5e0c49146ec3b7e7cb70cc50574.png)

*看到Tab3*下那个讨厌的灰色边框了吗？是的。我可以使用什么 CSS 来删除该边框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:20:58.750

我找到了这个：

[http://hwellmann.blogspot.co.uk/2012/06/fixing-editor-tab-fonts-in-eclipse-juno.html](http://hwellmann.blogspot.co.uk/2012/06/fixing-editor-tab-fonts-in-eclipse-juno.html)

它解释了如何获得 E4 CSS 编辑器，还说所需的更改是：

```
.MPartStack {
    font-family: "Droid Sans" ;
    font-size: 9;
    swt-simple: false;
    swt-mru-visible: false;
} 
```

这对我有用。

文件 /eclipse/plugins/.../e4_default_gtk.css 没有改变 - 我最终发现：

```
$HOME/.e4css/e4_default_gtk.css 
```

确实有更新的 CSS。

# mgtwitterengine - mgtwitterengine 获取好友/ID 和关注者/ID

> ID：12046455
> 
> 赞同：0
> 
> 时间：2012-08-20T23:09:43.957
> 
> 标签：mgtwitterengine, twitter-follow

如何使用 mgtwitterengine 让不关注我的用户回到 twitter？如何获取关注者/ID 和朋友/ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:45:16.497

对于好友 ID 的使用：[https ://api.twitter.com/1/friends/ids.json?cursor=-1&screen_name=ImpressolTest&include_entities=true](https://api.twitter.com/1/friends/ids.json?cursor=-1&screen_name=ImpressolTest&include_entities=true)

对于追随者 ID 的使用：[https ://api.twitter.com/1/followers.json?cursor=-1&screen_name=ImpressolTest&include_entities=true](https://api.twitter.com/1/followers.json?cursor=-1&screen_name=ImpressolTest&include_entities=true)

在数组中获取此值后，只需使用关注者数组检查好友数组，您就可以了解用户如何不关注您

# regex - Jetty 8 领域实现正则表达式

> ID：12046458
> 
> 赞同：1
> 
> 时间：2012-08-20T23:09:52.380
> 
> 标签：regex, jetty

我正在运行 solr，我想限制对管理面板的访问，因为 url 是 localhost:8983/solr/#/core_1 和 localhost:8983/solr/#/core_2

您会看到它的管理页面有一个 # 符号，当您只想进行正常搜索时，您转到 localhost:8983/solr/core_1browse?q=asdf 这里没有哈希，所以我可以省略它

在我的 webdefault.xml 中，url-pattern 行有效，但它阻止人们一起使用网络应用程序，因为 * 表示任何字符。我已经尝试了以下方法来代替 /* 所有这些都没有做任何事情，是的，我每次尝试这些时都重新启动了码头服务器。

已尝试：/solr 已尝试：/#/ 已尝试：# 已尝试：s

```
<security-constraint>
<web-resource-collection>
  <web-resource-name>Solr authenticated application</web-resource-name>
  <url-pattern>/*</url-pattern>
</web-resource-collection>
<auth-constraint>
  <role-name>admin-solr3</role-name>
</auth-constraint> 
```

```
<login-config>
<auth-method>BASIC</auth-method>
<realm-name>Test Realm</realm-name>
</login-config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:17:15.473

URL 中的“#”符号不能用作 url 模式。

在 URL 中使用“#”表示 URL 片段/锚点，因此，请求 URL 的一部分不会由 Web 浏览器发送到服务器（另一方面，自定义 HTTP 客户端库可以发送片段/锚点部分)

# objective-c - 图像上的人脸对齐算法

> ID：12046462
> 
> 赞同：8
> 
> 时间：2012-08-20T23:10:12.460
> 
> 标签：objective-c, opencv, computer-vision, face-detection, biometrics

假设我有嘴巴和眼睛的位置/坐标，我如何在二维图像上进行基本的人脸对齐。

有没有我可以实施的算法来纠正图像上的人脸对齐？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T03:31:59.137

人脸（或图像）对齐是指将一个图像（或您的情况下的人脸）与另一张图像（或参考图像/人脸）对齐。它也称为图像配准。您可以使用外观（*基于强度的配准*）或关键点位置（*基于特征的配准*）来做到这一点。第二类源于图像运动模型，其中一个图像被认为是另一个图像的位移版本。

在您的情况下，地标位置（眼睛和鼻子 3 个点？）为直接基于特征的配准提供了一个很好的参考集。假设您在两个 2D 图像中都有一组点的位置，`x_1`并且`x_2`您可以估计*相似变换*`S`（旋转、平移、缩放），即映射`x_1`到的平面 2D 变换`x_2`。您还可以为此添加反射，但对于面部而言，这很可能是不必要的。

可以通过形成正规方程并`x_1 = Sx_2`使用线性回归解决系统的线性最小二乘 (LS) 问题来进行估计。对于 5 个未知参数（2 个旋转、2 个平移、1 个缩放），您需要 3 个点（准确地说是 2.5）来求解 5 个方程。可以通过直接线性变换（例如通过应用 SVD 或矩阵伪逆）获得上述 LS 的解。对于足够多的参考点（即自动检测）的情况，用于点过滤和不确定性消除的 RANSAC 类型的方法（尽管这不是您的情况）。

估计后`S`，对第二张图像应用图像变形，得到整个 的变换后的网格（像素）坐标`image 2`。变换将改变像素位置，但不会改变它们的外观。不可避免地， 的某些变换区域`image 2`将位于 的网格之外`image 1`，您可以决定那些空位置的值（例如 0、NaN 等）。

更多详细信息：R. Szeliski，“[图像对齐和拼接：教程](http://research.microsoft.com/apps/pubs/default.aspx?id=75695)”（第 4.3 节“几何配准”）

在 OpenCV 中，请参阅：[Geometric Image Transformations](http://opencv.willowgarage.com/documentation/cpp/geometric_image_transformations.html)，例如`cv::getRotationMatrix2D` `cv::getAffineTransform`并`cv::warpAffine.`注意您应该估计并应用相似性变换（仿射的特殊情况）以保留角度和形状。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:22:11.033

对于人脸，特征点有很多可变性。因此，仅通过仿射变换不可能完美拟合所有特征点。完美对齐所有点的唯一方法是在给定点的情况下扭曲图像。基本上，您可以对给定点的图像进行三角剖分，并对每个三角形进行仿射扭曲，以获得所有点对齐的扭曲图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-06T05:25:10.343

可以根据眼睛的位置来处理人脸检测。

在这里，OpenCV、Dlib 和 MTCNN 提供了检测面部和眼睛的功能。此外，它是一个基于 python 的框架，但 deepface 封装了这些方法并提供了开箱即用的检测和对齐功能。

detectFace 函数分别在后台应用检测和对齐。

```
#!pip install deepface
from deepface import DeepFace
backends = ['opencv', 'ssd', 'dlib', 'mtcnn']
DeepFace.detectFace("img.jpg", detector_backend = backends[0]) 
```

此外，您可以手动应用检测和对齐。

```
from deepface.commons import functions
img = functions.load_image("img.jpg")
backends = ['opencv', 'ssd', 'dlib', 'mtcnn']

detected_face = functions.detect_face(img = img, detector_backend = backends[3])
plt.imshow(detected_face)

aligned_face = functions.align_face(img = img, detector_backend = backends[3])
plt.imshow(aligned_face)

processed_img = functions.detect_face(img = aligned_face, detector_backend = backends[3])
plt.imshow(processed_img) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T18:28:28.243

OpenCV的人脸识别指南中有一个*对齐人脸图像的部分：*

*   [http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_tutorial.html#aligning-face-images](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_tutorial.html#aligning-face-images)

该脚本在眼睛处对齐给定的图像。它是用 Python 编写的，但应该很容易翻译成其他语言。我知道 Sorin Miron 的 C# 实现：

*   [http://code.google.com/p/stereo-face-recognition/](http://code.google.com/p/stereo-face-recognition/)

# php - 通过 PHP 提交数据的最简单方法？

> ID：12046470
> 
> 赞同：0
> 
> 时间：2012-08-20T23:11:11.653
> 
> 标签：php, html

我是 PHP 新手，花了 10 个小时试图解决这个问题。

**目标**是获取输入此订单表格的所有数据，并通过 PHP 将其发送到我的电子邮件。

*我有两个问题：*

**1.**我可以让 PHP 从单个菜单项（例如：Mexican Tortas）发送数据，但是如何让 PHP 从多个菜单项（例如：Mexican Tortas、Fish Sandwich 和 Hamburger）发送数据？

**2.**如何告诉 PHP 不要从没有“多少”的菜单项发送数据？或“定制它？” 文本字段填写？

如果您能提供一个超级简单的示例（或学习资源的链接），我将不胜感激。

谢谢你，亚比雅

* * *

**PHP**

```
<?php
if(isset($_POST['submit'])) {

$to = "test@mywebsite.com"; 
$subject = "New Order";
$name_field = $_POST['name'];
$phone_field = $_POST['phone'];
$item = $_POST['item'];
$quantity = $_POST['quantity'];
$customize = $_POST['customize'];

}

$body = "Name: $name_field\nPhone: $phone_field\n\nItem: $item\nQuantity: $quantity\nCustomize: $customize";

echo "Data has been submitted to $to!";
mail($to, $subject, $body);

?> 
```

* * *

**HTML**

```
<form action="neworder.php" method="POST">

<div class ="item">
<img style="float:left; margin-right:15px; border:1px Solid #000; width:200px; height:155px;" src="images/mexicantortas.jpg">
<h1>Mexican Torta - $8.50</h1>
<input name="item" type="hidden" value="Mexican Torta"/>
<h2>How Many? <font color="#999999">Ex: 1, 2, 3...?</font></h2> 
<input name="quantity" type="text"/>
<h3>Customize It? <font color="#999999">Ex: No Lettuce, Extra Cheese...</font></h3> 
<textarea name="customize"/></textarea>
</div><!-- ITEM_LEFT -->

<div class ="item">
<img style="float:left; margin-right:15px; border:1px Solid #000; width:200px; height:155px;" src="images/fishsandwich.jpg">
<h1>Fish Sandwich - $8.50</h1>
<input name="item" type="hidden" value="Fish Sandwich"/>
<h2>How Many? <font color="#999999">Ex: 1, 2, 3...?</font></h2> 
<input name="quantity" type="text"/>
<h3>Customize It? <font color="#999999">Ex: No Lettuce, Extra Cheese...</font></h3> 
<textarea name="customize"/></textarea>
</div><!-- ITEM_LEFT -->

<div class ="item">
<img style="float:left; margin-right:15px; border:1px Solid #000; width:200px; height:155px;" src="images/hamburgers.jpg">
<h1>Hamburger w/ Fries - $7.00</h1>
<input name="item" type="hidden" value="Fish Sandwich"/>
<h2>How Many? <font color="#999999">Ex: 1, 2, 3...?</font></h2> 
<input name="quantity" type="text"/>
<h3>Customize It? <font color="#999999">Ex: No Lettuce, Extra Cheese...</font></h3> 
<textarea name="customize"/></textarea>
</div><!-- ITEM_LEFT -->

<div class="horizontal_form">
<div class="form">
<h2>Place Your Order Now: <font size="3"><font color="#037B41">Fill in the form below, and we'll call you when your food is ready to be picked up...</font></font></h2>
<p class="name">
<input type="text" name="name" id="name" style="text-align:center;" onClick="this.value='';" value="Enter your name"/>
</p>
<p class="phone">  
<input type="text" name="phone" id="phone" style="text-align:center;" onClick="this.value='';" value="Enter your phone #"/>
</p>
<p class="submit">
<input type="submit" value="Place Order" name="submit"/>
</p>
</div><!-- FORM -->
</div><!-- HORIZONTAL_FORM -->

</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T00:04:55.593

我建议您使用“[]”，因为它将多个输入字段分组到一个数组中。

```
<?php

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
  $_POST = filter_input_array(INPUT_POST, FILTER_SANITIZE_SPECIAL_CHARS);

  $to = "test@mywebsite.com"; 
  $subject = "New Order";

  $order = array();
  $order['name']  = $_POST['name'];
  $order['phone'] = $_POST['phone'];

  $food = $_POST['food'];

  foreach ($food as $type => $value)
    if (strlen($value['quantity']) > 0) // assuming 'customize' is optional
      $order[$type] = $value;

  print_r($order);
}

?>

<html>
<head>
  <title>Order now!</title>
  <style>label,input,textarea {display:block}</style>
<body>
<?php // You need enctype for '[]' support' ?>
<form action="" method="post" enctype="multipart/form-data">
  <div class ="item">
    <label>Mexican Torta - $8.50</label>

    <b>How Many?</b> 
    <input name="food[mexican_torta][quantity]" type="text">

    <b>Customize It? <font color="#999999">Ex: No Lettuce, Extra Cheese...</font></b> 
    <textarea name="food[mexican_torta][customize]"></textarea>
  </div>

  <div class ="item">
    <label>Fish - $3.50</label>

    <b>How Many?</b> 
    <input name="food[fish][quantity]" type="text">

    <b>Customize It? <font color="#999999">Ex: No Lettuce, Extra Cheese...</font></b> 
    <textarea name="food[fish][customize]"></textarea>
  </div>

  <h2>Place Your Order Now:</h2>

  <em>Fill in the form below, and we'll call you when your food is ready to be picked up.</em>

  <label>Enter your name</label>
  <input type="text" name="name">

  <label>Enter your phone nr.</label>
  <input type="text" name="phone">

  <button>Submit</button>
</form>
</body> 
```

* * *

用户提交（例如我把鱼留空），你得到

```
Array ( 
 [name] => Fab 
 [phone] => 1212
 [mexican_torta] => Array ( [quantity] => 2 [customize] => Test ) 
) 
```

使用 '[]' 来获得你真正想要的数组输出。print_r 会准确地告诉你你得到了什么。从这里很容易将食物详细信息放入电子邮件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:03:17.203

您需要唯一的表单字段名称。换句话说，您不能有重复的表单项：

```
<input name="quantity" type="text"/> 
```

相反，您需要唯一的名称，例如：

```
<input name="quantity_fish" type="text"/> 
```

然后，您可以使用 PHP 解析 $_POST 并根据需要丢弃空字段。

# c# - SuspendLayout/ResumeLayout 是一文不值还是我做错了？

> ID：12046472
> 
> 赞同：6
> 
> 时间：2012-08-20T23:11:17.390
> 
> 标签：c#, winforms, dynamic, tabs, tablelayoutpanel

我有两个标签页托管 TableLayoutPanel，我用标签和文本框动态填充它们。第一个有 96 个标签和 96 个文本框，它的闪烁是可以接受的/可容忍的，所以我没有费心添加 SuspendLayout/ResumeLayout 对。

然而，第二个有 96 个标签和 288 个文本框，它的绘画/闪烁是无法忍受的。IOW，192 控制似乎还可以，但 384 绝对不行。

我在动态创建控件之前调用了 SuspendLayout，然后在 finally 块中调用了 ResumeLayout，但是删除了它们，瞧！与第一个 tabPage/TLP 一样，闪烁是可以接受的。

为什么这种减法加法有效？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T12:37:07.737

您也可以尝试这两种方法，我已在此线程中列出。希望他们不会太神秘：

[https://stackoverflow.com/a/15020157/1307504](https://stackoverflow.com/a/15020157/1307504)

这种方法真正暂停和恢复布局。但是你永远不应该忘记打电话`EndControlUpdate()`。

我在我正在创建的任何通用控件中使用它。我尝试了很多暂停和恢复布局。它从来没有像我认为的那样奏效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-18T16:49:36.597

最初，我有同样的疑问，`SuspendLayout`并且`ResumeLayout`确实有效。然后我自己尝试并创建了一个示例应用程序，并在以后更好地了解了这个概念。

所以，这就是我所做的：

```
mainPanel.SuspendLayout()

create child control

call child.SuspendLayout()

change the child control properties

add the child control to the mainPanel

call child.ResumeLayout(false) - this means: next layout run, relayout this control, but not immediately

repeat (2-6) for every child-control

call mainPanel.ResumeLayout(true) - this means: relayout my mainPanel and every child-control now! 
```

也证明我的概念这里是示例应用程序

```
Stopwatch stopWatch = new Stopwatch();
        stopWatch.Start();

        this.SuspendLayout();
        for (int i = 0; i < 2000; i++)
        {
            var textbox = new TextBox();
            //textbox.SuspendLayout();
            //textbox.Dock = i% 2 ==0 ? DockStyle.Left : DockStyle.Right;
            textbox.Dock = DockStyle.Fill;
            textbox.Top = i * 10;
            textbox.Text = i.ToString();
            this.Controls.Add(textbox);
            //textbox.ResumeLayout(false);

        }
        stopWatch.Stop();
        TimeSpan ts = stopWatch.Elapsed;
        string elapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",ts.Hours, ts.Minutes, ts.Seconds,ts.Milliseconds / 10);

        this.ResumeLayout(true);
        MessageBox.Show(elapsedTime); 
```

# jquery-ui - jQuery UI 对话框不会重新打开

> ID：12046475
> 
> 赞同：3
> 
> 时间：2012-08-20T23:11:33.757
> 
> 标签：jquery-ui, modal-dialog

我有两个 jQuery UI 对话框（彼此无关，但都表现出这种行为），它们在第一次打开和关闭时表现完美。一旦他们第一次关闭，虽然他们不会重新打开。下面是其中一个的代码，另一个具有相同的结构。我没有在任何地方调用“destroy()”或“remove()”，所以我不确定为什么这些不能正常工作。这是我的代码：

```
$(".qr_link").click(function(){
  openQr(this);
});

function openQr(that){
  var title = $(that).parent().parent().children("p.resume-name").text();
  var qr = $(that).parent().parent().children(".qr_image");

  $(qr).dialog({
    title: title,
    width: 'auto',
    height: 'auto',
    modal: true
  });
} 
```

我的标记：

```
<div class="resume">
  <p class="resume-name"><%= link_to(offer.name, public_url(offer.public_id, :host => ApplicationSetting.short_domain, :params => {:rid => @recruiter_id})) %></p>
  <p id="resume_links">- 
    <%= link_to("QR", "#", :class => "qr_link") %>
    <%= link_to("X", "#", :class => "remove_link") %>
    <%= link_to("Preview", "#", :class => "preview_link") %>
  </p>
  <%= qr_image(public_url(offer.public_id, :host => ApplicationSetting.short_domain, :params => {:rid => @recruiter_id}), "200x200", "hide qr_image")%>
  <p class="resume-tags"><span class="resume-tags-label">Tags: </span><span class="resume-tags-value">
    <%= offer.tags.join(", ") %>
  </p>
  <p class="resume-description"><%= offer.description %></p>
</div> 
```

提前致谢。

* * *

## 更新

* * *

所以最初，我在页面加载时加载了 qr 图像，但我把它隐藏了。它在对话框中显示正常，但是当对话框出现时，qr 图像会从 HTML 中删除！所以我猜重新格式化的问题是，“为什么我的二维码被删除了？”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T03:47:56.943

`$(qr).dialog({...})`初始化并只打开一次对话框。如果你想再次打开它，你需要调用`.dialog('open')`元素。

至于更新的问题：对话框将其内容从您拥有的地方移动，将其包装在具有样式的容器中，然后将其附加到文档的末尾。但是，您获取对话框元素的方式现在将不起作用，因为它已被移动。

我建议使用 ID 来引用对话框内容，而不是遍历 DOM。您可以将该 ID 作为数据属性存储在被单击的元素上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:27:03.213

我无法复制您的错误。你可以JSFiddle完整的代码吗？

在启动之前尝试在模式上调用 destroy 。

```
$(":ui-dialog").dialog("destroy"); 
```

# ruby-on-rails-3 - 获取与 postgresql 不匹配的服务器

> ID：12046480
> 
> 赞同：3
> 
> 时间：2012-08-20T23:12:18.773
> 
> 标签：ruby-on-rails-3, postgresql

与[这个问题](https://stackoverflow.com/questions/9799690/pg-dump-version-mismatch-in-rails)类似， 我已经更新了自制软件和 postgresql。但我不确定如何将这个 rails 应用程序与我安装的更新版本连接起来。它显然仍在使用系统上的 9.0.5，但我通过自制软件安装了 9.1.4，如何更改它以将其链接起来？

这是我在运行 rake db:migrate 后遇到的错误：

```
pg_dump: server version: 9.1.4; pg_dump version: 9.0.5
pg_dump: aborting because of server version mismatch
rake aborted!
Error dumping database 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T00:25:38.220

我希望您需要更新您的`PATH`环境变量，以便在旧变量之前`rake`找到新变量，除非有特定于 Rails 的方式来显式配置路径。`pg_dump``PATH``pg_dump`

更新您的`PATH`：

*   [http://www.tech-recipes.com/rx/2621/os_x_change_path_environment_variable/](http://www.tech-recipes.com/rx/2621/os_x_change_path_environment_variable/)
*   [https://serverfault.com/questions/16355/how-to-set-global-path-on-os-x](https://serverfault.com/questions/16355/how-to-set-global-path-on-os-x)
*   [https://superuser.com/questions/69130/where-does-path-get-set-in-os-x-10-6-snow-leopard](https://superuser.com/questions/69130/where-does-path-get-set-in-os-x-10-6-snow-leopard)

# google-apps-script - 将使用谷歌应用脚 本构建的图表插入谷歌电子表格

> ID：12046489
> 
> 赞同：3
> 
> 时间：2012-08-20T23:13:18.900
> 
> 标签：google-apps-script

这听起来可能是一个愚蠢的问题，但我已经在网上搜索了很多，但我没有找到我想要的......

我已经设法从不同电子表格上的数据构建我想要显示的图表，并且我想将图表插入电子表格，而不必将数据粘贴到工作表上。这可能吗 ？

我也可以使用 UIApp 来显示它，但是我希望它显示在电子表格上，而不必从菜单或按钮中调用它。

谢谢你的帮助，

雪绒花

-- 到目前为止，这是我的代码，正如我在调试器工具上看到的那样，它正在工作

```
 function BuildMTChart(){
  var ss = SpreadsheetApp.getActiveSpreadsheet() 
  var DataChart = MTLastMonth()  // MTLastMonth() returns an array with the data I need
  var dSheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Dashboard");

      var dataTable = Charts.newDataTable();
          dataTable.addColumn(Charts.ColumnType['DATE'], 'Date');
          dataTable.addColumn(Charts.ColumnType['NUMBER'], 'Maintenance');
          dataTable.addColumn(Charts.ColumnType['NUMBER'], 'Troubleshooting');
          for ( var i = 0; i < DataChart.length; i++) {
            dataTable.addRow([DataChart[i][0], DataChart[i][1], DataChart[i][2]]);
          }
          dataTable.build();        

    var chart = Charts.newAreaChart()
        .setDataTable(dataTable)         
        .setDimensions(800, 400)         
        .setYAxisTitle("Hours")
        .setXAxisTitle("Date")
        .build(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:38:25.717

**EmbeddedChartBuilder**曾经有**setDataTable**方法。但我无法让它工作。

 **据我了解，您可以从脚本将图表添加到电子表格中，但这些图表需要在电子表格本身中有数据：

```
var chart = workingSheet.newChart()
  .setChartType(Charts.ChartType.COLUMN)
  .setPosition(8, 2, 0, 0)
  .setTitle("Sample chart")
  .setXAxisTitle("...")
  .setYAxisTitle("...")
  .addRange(range)    // This could be smth. like SpreadsheetApp.getActiveSpreadsheet().getRange("B2:C8")
  .build();

SpreadsheetApp.getActiveSpreadsheet().insertChart(chart); 
```

[这里说](https://developers.google.com/apps-script/class_embeddedchartbuilder#setOption)你可以设置一些*高级图表选项*。也许还有一种方法可以在那里传递一个 DataTable ？

现在我建议使用您的数据填充电子表格，然后添加基于范围的图表。如果您不希望这些数据在 google 文档中可见，您可以隐藏列或将其移动到新工作表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:39:41.923

也许您可以将其添加到 UiApp，适当调整大小并设置触发器，以便每次打开电子表格时都会显示 UI 应用程序？像这样的东西。

```
function onOpen() {
  return myUiApp();
}

function myUiApp() {
  //All your code to build the chart and add it to the app
} 
```**

# android - 如何抵消 GLSurfaceView 以考虑状态栏？

> ID：12046491
> 
> 赞同：2
> 
> 时间：2012-08-20T23:13:21.697
> 
> 标签：android, opengl-es, surfaceview, glsurfaceview

目前，当我在 0,0 处绘制时，状态栏会覆盖绘图。有没有办法调整表面的位置，或者我是否需要建立一个绘制偏移来考虑状态栏 - 有效地绘制从 y=25 开始的所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:34:44.497

我不确定为什么surfaceview与状态栏重叠（听起来像一个android bug），但最简单的方法可能是用来`glViewport`定义你打算用于绘图的surfaceview的哪个区域。

如果你能弄清楚状态栏有多高，那么只需从你的 glViewport 调用的高度中减去它，然后你的所有调用将被映射到视口范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T01:11:45.010

当我遇到这个问题时，我在 Surface 顶部有一个虚拟 View（我使用 FrameLayout 做到了），它与 ContentView 一样大。所以我只需要打电话 `View.getLocationOnScreen(int[])`知道我应该从哪里开始画画。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:29:31.640

您可能需要告诉 android 用于您的活动的主题/样式。

在您的 AndroidManifest.xml 中为创建 glSurfaceView 的活动包含以下内容：

```
android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" 
```

或者，如果您想保留状态栏：

```
android:theme="@android:style/Theme.Black.NoTitleBar" 
```

这里有更多关于主题和风格的信息：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

**编辑：** 这样 android 将（应该）在创建 glSurfaceView 时考虑请求的布局，因此不需要任何偏移量......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-04T08:18:56.280

```
window.clearFlags(WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN); 
```

# wpf - 每个单元格绑定一个数据网格一个对象

> ID：12046494
> 
> 赞同：3
> 
> 时间：2012-08-20T23:13:44.473
> 
> 标签：wpf, binding, datagrid, wpftoolkit

我想将一些对象绑定到`datagrid`in `WPF`。我非常想避免使用 DataTable！

考虑以下代码：

```
public ObservableCollection<ObservableCollection<DataPoint>> GridItems { get; set; }

public class DataPoint : INotifyPropertyChanged
{
    public float Value { get; set; }
    public float OriginalValue { get; set; }
    public bool Highlighted { get; set; }
    public SolidColorBrush HighlightColor { get; set; }
    ...
} 
```

XAML：

```
<toolkit:DataGrid ItemsSource="{Binding GridItems}" /> 
```

当我们将 this 绑定到 a`DataGrid`而不是每个单元格获取一个 DataPoint 对象时，我们会得到一列，`Count`其属性如图所示。我尝试过 2D 数组、自定义类型（继承自`ObservableCollection<DataPoint>`），`HierarchicalDataTemplate`但似乎没有任何效果。

我事先不知道会有多少列，但每一行的数字和类型总是相同的。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:26:24.357

如果您考虑您的`ItemsSource`, an `ObservableCollection`of `ObservableCollection`s，那么您将认识到网格中的每一行只是一个`ObservableCollection`对象。不够聪明，`DataGrid`无法查看每个项目的集合内部（这没有意义 - 每个集合中可能有不同数量的项目，因此它无法自动将项目映射到列）。它只会查看`DataContext`作为该行的对象并将公共属性用作列（在这种情况下，唯一`ObservableCollection`符合条件的属性是`Count`）

编辑：我只记得[`IBindingList`](http://msdn.microsoft.com/en-us/library/system.componentmodel.ibindinglist.aspx)接口，它允许更复杂的绑定场景（我相信这是`DataTable`可以将列公开为属性以用于绑定目的的方式。查看[这个答案](https://stackoverflow.com/questions/6254441/wpf-observablecollectiont-vs-bindinglistt)以获取有关信息`IBindingList`以及它如何证明有用的信息。你可能能够创建一个自定义类，该类派生自`ObservableCollection`并实现`IBindingList`以将 DataPoints 公开为属性。

原来的：

由于您不知道会有多少列，因此您无法通过 XAML 以声明方式对它们进行数据绑定。我相信您将需要在代码中手动创建列并为每列设置绑定。

此外，您还需要`DataTemplate`DataPoint 类型，以便它知道如何直观地显示该类型。

# php - 将选择选项值发送到 php 脚本并在 div 中返回结果而不刷新

> ID：12046497
> 
> 赞同：0
> 
> 时间：2012-08-20T23:14:05.810
> 
> 标签：php, javascript, variables, load

我试图找到解决这个问题的方法，但由于这是我第一次使用 javascript，所以我遇到了一个大问题。

所以这就是我需要的。

我有 2 个下拉列表。

根据在第一个列表中选择的值，第二个应该显示从 sql 中提取的不同值，并且在不刷新页面的情况下执行此操作。

提取这些值的代码是一个名为 getpackage.php 的文件，该文件基于从第一个下拉列表中检索到的值进行查询并输出第二个列表的值。

我已经设法通过使用 .load() 函数来做到这一点，但它只适用于 firefox、IE 和 chrom 什么都没有发生。

这是代码：

注册.php

```
 <select name="product">
                                <?php                       
            $sql = "SELECT * FROM proxy_products";
            $result = mysql_query($sql) or die('Error, query failed');
            echo "<option value=''></option>";
            while(list($product_id,$product_name) = mysql_fetch_array($result))
            {
    echo '<option value='".$product_id."' onclick='recp(".$product_id.")' selected >".$product_name."</option>';

            }
    ?>                  
    </select>

//here should the second list load
<select id="showpacakge" name="package">

</select> 
```

爪哇：

```
<script>
function recp(id) {
$('#showpacakge').load('getpackage.php?id='+id);
}
</script> 
```

和getpackage.php

```
$id = $_GET['id'];
$sql = "SELECT package_id, package_name FROM proxy_package WHERE product_id='".$id."'";
$result = mysql_query($sql) or die('Error, query failed');
echo "<option value=''></option>";
    while(list($package_id,$package_name) = mysql_fetch_array($result))
    {
        echo "<option value='".$package_id."' >".$package_name."</option>";
    } 
```

正如我所说，这可能并不难，但对我来说这是因为这是我第一次尝试使用 java。

如前所述，它适用于 Firefox，但不适用于 IE 和 Chrome

**更新：**

我自己得到了解决方案..不确定到底有什么区别，但它对我有用

```
<script>
    $("#selectprod").change(function (e)
        {
    var $targ = $(e.target);
    var selected_value = $targ.find('option:selected').val();
    $("#123").load('getpackage.php?id='+ selected_value);
        }
                      )

        .change();
</script> 
```

# javascript - 未在 Firefox 中执行的 PageMethod 的返回函数

> ID：12046500
> 
> 赞同：0
> 
> 时间：2012-08-20T23:14:33.587
> 
> 标签：javascript, asp.net, firefox, cross-browser

我在 Firefox 中的 JS 函数遇到了一点问题。预期的结果（在 IE 和 Chrome 中相应地工作）是执行服务器端代码并​​在 LoadDetails 函数中返回一个数组。

```
function ShowEvent(index) {
    PageMethods.LoadDetailsEvent(index, LoadDetails);
}
function LoadDetails(val) {
    document.getElementById('lblName').innerText = val[0];
    document.getElementById('lblDate').innerText = val[1];
    document.getElementById('lblTime').innerText = val[2];
    document.getElementById('lblPlace').innerText = val[3];
    document.getElementById('lblDescription').innerText = val[4];
    $find('mpeShowEvent').show();
} 
```

在其他浏览器中，数据已正确加载到标签中，但在 Chrome 中，它们以默认值显示。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:28:09.483

`innerText`是 Internet Explorer 首次引入的非标准属性。标准属性是`textContent`，但您至少需要 IE9。或者，您可以使用为您处理差异的跨浏览器 JavaScript 库之一。另一种方法是直接更改子文本节点的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:47:39.923

Firefox 使用符合[W3C 的](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Node3-textContent) [textContent](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)属性。这就是您的问题。

# javascript - 直接导航到 chrome 中的页面时未加载 Javascript 脚本

> ID：12046502
> 
> 赞同：0
> 
> 时间：2012-08-20T23:14:37.687
> 
> 标签：javascript, google-chrome, loading

[http://fwy.pagodabox.com](http://fwy.pagodabox.com)

在这个主页上，你可以点击主导航中的“朋友与你”，点击，一个交互式画布动画就会出现。但是，如果您转到站点中的另一个页面，然后单击圆圈内的“F”返回主页，则脚本不会加载，并且动画不会在单击时触发。

我认为这是因为 chrome 处理缓存的方式与 firefox 略有不同。

有没有人对这种错误有任何经验或知道可能导致它的原因？

触发动画的函数位于 a `$j(window).load(function(){ ...`if 这是任何类型的提示中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:13:02.343

问题是我使用的异步加载。把函数放在一个

`$(document).ready(function(){...`

解决了

# iphone - 恢复越狱的 iPhone 3G 卡在错误 1015

> ID：12046504
> 
> 赞同：-1
> 
> 时间：2012-08-20T23:14:41.383
> 
> 标签：iphone, jailbreak, restore, iphone-3g

我正在尝试恢复已越狱的 iPhone 3g。我将它插入iTunes并点击恢复并收到无法恢复的错误1015。我试过使用 tinyumbrella 解决方案，我相信我做得对，但它没有用。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:24:50.563

你的 iPhone 没有变砖。使用 RecBoot，它是一个很有帮助的应用程序。[这是一个教程](http://absinthejailbreak.com/forum/fix-itunes-error-1015/)。

此外，该站点仅用于编程问题。尝试在[Ask Different](https://apple.stackexchange.com/)上询问 iPhone 问题。

# makefile - 运行多个进程（多个监视命令）

> ID：12046506
> 
> 赞同：4
> 
> 时间：2012-08-20T23:15:03.377
> 
> 标签：makefile

我正在尝试制作一个执行多个命令的 Makefile。例子：

```
script:
  cat scripts/*.js > public/scripts/scripts.js

vendor:
  cat vendor/*.js > public/scripts/vendor.js

watchStyles:
  stylus -w -u nib styles/styles.styl -o public/styles

watchScripts:
  watchr -e "watch('scripts/.*\.js') {system 'make scripts'}"

watchVendor:
  watchr -e "watch('vendor/.*\.js') {system 'make vendor'}" 
```

现在我必须打开 3 个终端，这很烦人。我怎样才能只运行一个 via `make watch`？

```
watch: watchStyles watchScripts watchVendor 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T08:22:39.227

如果您使用的是 GNU make，则[`-j`选项允许它并行构建目标](http://www.gnu.org/software/make/manual/make.html#Parallel)，例如：

```
make -j4 watchStyles watchScripts watchVendor 
```

# teamcity - OpenCover 不覆盖 TeamCity

> ID：12046507
> 
> 赞同：4
> 
> 时间：2012-08-20T23:15:06.073
> 
> 标签：teamcity, opencover

在 TeamCity 下运行时，我有一个项目在输出覆盖文件中没有给我任何覆盖。当我从命令行运行时，它覆盖得很好。显然，TeamCity 运行时使用的本地系统帐户存在一些权限问题，即，如果我将 TeamCity 运行器更改为使用我用来访问它所覆盖的机器的登录名之一。但是我不想在 TeamCity 服务中维护该用户的密码。

我在 nant 脚本中启动 OpenCover 时使用了 -register:user 参数，这没有帮助。

在 TeamCity 下运行时，推荐的设置是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T22:07:08.187

使用 regsvr32 手动预注册 OpenCover.Profiler.dll。但要执行此操作，您应该以管理员权限运行 cmd。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T17:47:52.737

我最近使用 MSBuild 进行了设置，并且运行良好。以下是我的 MSBuild 脚本的相关部分：

```
<Project DefaultTargets="Build;Test;Archive;" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <UsingTask AssemblyFile=
        "..\..\tools\MSBuildCommunityTasks\MSBuild.Community.Tasks.dll"
        TaskName="MSBuild.Community.Tasks.Xslt" />

  <PropertyGroup>
    <!--Default Configuration-->
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>

    <!--Default Platform-->
    <Platform Condition=" '$(Platform)' == '' ">"Any CPU"</Platform>

    <!--Test assemblies-->
    <TestAssemblies>HelloWorld.Mvc3UI.UnitTests\bin\$(Configuration)\HelloWorld.Mvc3UI.UnitTests.dll</TestAssemblies>

  </PropertyGroup>

  <Target Name="Build">
    <MSBuild Targets="Clean;Rebuild" Projects="HelloWorld.sln"  ContinueOnError="false"/>
  </Target>

    <Target Name="Test">

        <!-- Check Code Coverage -->
        <Exec Command="..\..\tools\OpenCover.4.0.519\OpenCover.Console.exe -register:user -target:..\..\tools\NUnit\nunit-console.exe -targetargs:&quot;$(TestAssemblies) /xml=NUnitReport.xml /noshadow&quot; -filter:&quot;+[HelloWorld.Mvc3UI*]* -[HelloWorld.Mvc3UI.UnitTests*]*&quot; -output:OpenCoverReport.xml"></Exec>
        <!-- Format Code Coverage Report -->
        <Exec Command="..\..\tools\ReportGenerator.1.5.0.0\ReportGenerator.exe OpenCoverReport.xml OpenCoverReport"></Exec>

        <Xslt Inputs="NUnitReport.xml"
            Xsl="..\..\tools\NUnit\NUnitReport.xsl"
            Output="NUnitReport.html" />
    </Target>

    <Target Name="Archive">
        <Exec Command="..\..\tools\7-Zip.9.20\7za.exe a build.zip &quot;HelloWorld.Mvc3UI\*&quot;"></Exec>
    </Target>

</Project> 
```

关键是对 NUnit 使用 /noshadow 选项，对 OpenCover 使用 -register 开关（它需要 COM 注册才能运行，但此开关会临时注册 TeamCity 用户帐户）。

为了防止 OpenCover 有时挂起，它还有助于在 nunit-console.exe.config 文件中禁用 .NET 2.0 作为受支持的运行时，如下[所述](https://github.com/sawilde/opencover/issues/94)：

```
 <startup useLegacyV2RuntimeActivationPolicy="true">
    <!-- Comment out the next line to force use of .NET 4.0 -->
    <!-- <supportedRuntime version="v2.0.50727" /> -->
    <supportedRuntime version="v4.0.30319" />
  </startup> 
```

# highcharts - highcharts：y 轴的其他设置。处理大数

> ID：12046508
> 
> 赞同：4
> 
> 时间：2012-08-20T23:15:51.073
> 
> 标签：highcharts, logarithm

我在尝试管理/绘制 y 轴上的大数字和小数字时遇到了一些困难。

两种 y 轴类型的示例都在这里：http: [//jsfiddle.net/index/6FBec/1/](http://jsfiddle.net/index/6FBec/1/)

对于第一张图（线性）：问题是小数字几乎平铺在底部。

对于第二个图（对数）： 在这里（这实际上更好），当大数字变得太大时，下一个刻度的差距很远（graph2 最后一点 12,250 和最大的 y 轴是 100,000）。

问题是，是否有不同的 y 轴类型，或者我怎样才能做类似线性的事情，但是当事情太大时，它会做类似对数的事情，比如先使用较小的间隙然后增长。

PS：不要介意0.1值。对数不想要 0 值的温度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T03:29:25.763

我使用了一些数学方程来减少点之间的差距，并且仍然以图形方式显示相对差异。为此，我处理服务器上的数据，如果一个点与另一个点截然不同，那么我将使用它们的平方根。这里有几个例子可以证明这一点：

**数值：220、110、55、5**

*   [**普通格式**](http://jsfiddle.net/FbKtj/2/)
*   [**平方根格式**](http://jsfiddle.net/FbKtj/)

**数值：1100、220、110、55、5**

*   [**普通格式**](http://jsfiddle.net/FbKtj/3/)
*   [**平方根格式**](http://jsfiddle.net/FbKtj/1/)

数据以四舍五入到小数点后三位的平方根形式发送。然后我使用 yAxis 标签和工具提示上的格式化程序来显示正确的值。另外，我通过使用确保标签显示为整数`parseInt`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T05:30:16.800

我强烈建议坚持线性或对数，因为这些是一种标准，对用户来说是直观的。这两个足以满足大部分可视化需求。您在示例中绘​​制的数据是生产数据吗？这是您的数据将始终如此，还是只是一次性的情况？确定使用哪个轴的最简单方法是找到变化或标准偏差或您的数据，如果它是小的使用线性，如果它的大使用对数（可以根据您的数据调整大小的阈值）。

我想说您在 jsFiddle 中获得的可视化几乎是您**应该**使用的。

1)**线性**你看到一个数据点出现了，而其他数据点几乎（与最大的百分比相比）相同的值。所以你应该把它显示为它，这给用户一个提示，表明某些事情是非常错误的。如果您试图使曲线看起来*不错*，用户将始终必须参考这些值，并且无法仅通过查看图形来做出推断，这就是图表的全部目的。当用户不得不手动查看数据点的值以进行快速推断时，仅仅一个*好看的*图表没有多大意义。

2)**对数**当您的数据确实偏斜，但存在数据包/数据簇（不仅仅是一个点是异常值）时，请选择这个。

如果您必须使用其他规模（首先彻底了解您的生产数据，否则您最终会*美化*您的测试数据并弄乱真实数据）在@Dan Thomas 的答案中使用一些类似的标准，如平方或平方根或最好的方法是尽可能为您的数据获取一个通用的（不是真实的，但理想的数据方式）方程。因此，如果您的数据类似于`y=A*x`²`+ Bx + C`，则选择平方，如果它的形式`y=A*x + B`为线性，则`y=A*log+(x)+B`选择对数等等

更多 @ [http://www.forbes.com/sites/naomirobbins/2012/01/19/when-should-i-use-logarithmic-scales-in-my-charts-and-graphs/](http://www.forbes.com/sites/naomirobbins/2012/01/19/when-should-i-use-logarithmic-scales-in-my-charts-and-graphs/)

# xdebug - 使用 VirtualBox 进行远程 Xdebug

> ID：12046510
> 
> 赞同：12
> 
> 时间：2012-08-20T23:15:57.830
> 
> 标签：xdebug, virtualbox, remote-debugging

我正在尝试进行远程调试。PHP 在虚拟机上运行，​​我正在尝试从主机上的 NetBeans 进行调试。

我已经按照[此处](http://xdebug.org/docs/remote)的说明，在 Windows 7 防火墙和 VirtualBox 网络设置中转发了端口 9000，并在 NetBeans 中设置了路径映射。我的 xdebug 设置如下所示：

```
xdebug.remote_enable = On
xdebug.remote_connect_back = On
xdebug.idekey = "netbeans-xdebug"
xdebug.remote_log = /tmp/xdebug.log 
```

当我加载要调试的 URL（使用正确的 idekey）时，它会记录以下内容：

```
I: Checking remote connect back address.
I: Remote address found, connecting to 192.168.0.1:9000.
I: Connected to client. :-)
-> <init xmlns="urn:debugger_protocol_v1" 
         xmlns:xdebug="http://xdebug.org/dbgp/xdebug"
         fileuri="file:///home/dev/web/projects/project.com.vm/httpdocs/index.php" 
         language="PHP" protocol_version="1.0" 
         appid="1380" 
         idekey="netbeans-xdebug">
   <engine version="2.2.1"><![CDATA[Xdebug]]></engine><author><![CDATA[Derick Rethans]]></author><url><![CDATA[http://xdebug.org]]></url><copyright><![CDATA[Copyright (c) 2002-2012 by Derick Rethans]]></copyright></init>

-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" status="stopping" reason="ok"></response> 
```

但是，NetBeans 仍在等待连接。除了设置断点外，我还将它设置为在第一行停止。即使 NetBeans 未在侦听，日志文件也会包含“已连接到客户端”消息。

知道我可能会错过什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T15:34:25.987

对我有用的是从我的主机运行以下内容：

```
ssh -R 9000:localhost:9000 yourUserName@yourVirtualMachine 
```

请注意使用 -R 标志而不是 -L。我在使用端口转发来让事情正常工作时遇到了麻烦，而 ssh 隧道工作得很好。请注意，您也可以通过在 VM 中运行 ssh 命令并使用 -L 标志连接到主机来执行此操作。

由于我在使用 Vagrant 时遇到了这个问题，所以这是我个人使用的命令，在出现提示时使用密码“vagrant”：

```
ssh -p 2222 vagrant@127.0.0.1 -R 9000:localhost:9000 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-29T17:56:11.640

我对这个问题的解决方案如下：

1）在网络配置中启用端口转发（使用NAT适配器）我只是使用了端口9000以及主机和访客的IP地址。协议是 TCP

2）配置我的xdebug设置：在我的情况下，设置xdebug.remote_host =“永久主机IP”很重要，然后一切正常。

希望这可以帮助那里的人。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-23T19:13:22.240

我在虚拟机的项目中添加了 4 个选项来使用 Xdebug：

```
xdebug.remote_enable = On
xdebug.remote_host = [YOUR_HOST_IP]
xdebug.remote_connect_back = On
xdebug.remote_autostart = On 
```

只要您的调试器正在侦听，它就应该在断点处中断。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-24T11:06:01.210

如果您的日志文件中有此内容：

```
I: Connected to client. :-) 
```

这意味着 Xdebug 已成功连接到 IDE。

IDE（netbeans）然后简单地关闭连接，甚至不尝试发送任何信息。如果它不知道如何处理`file:///home/dev/web/projects/project.com.vm/httpdocs/index.php`您示例中的文件名 ( )，则会发生这种情况。原因是您的 IDE 中没有正确的路径映射设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T13:35:44.333

虚拟机需要能够与主机对话，要实现这一点，您需要转发 9000 来执行此操作。在某些设置中未描述此步骤，因为它发生在后台。

为此，请发出命令 ssh -L 9000:localhost:9000 yourUserName@youVirtualMachine。

为了简化这一点，我在 /etc/hosts 和我的 ~/ssh/config 文件中有虚拟机的名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-03T05:30:00.397

**必须满足3 个**条件才能使 xdebug 与 VirtualBox 远程工作，尤其是在 virtualbox 中与 Docker 连接时。

**1**）remote_connect_back=0 或你的主机的确切IP地址必须列在remote_host中（有时两者不能同时工作，特别是在docker与windows hyper-v直接与virtualbox分开的情况下）

**2** ) 不能在端口 9000 上公开其他应用程序，例如 web-project，必须为 php 编辑器保留，或者必须由编辑器/侦听器（或 php web 项目）保留不同的端口，并寻址/传输到php

**3** ) 和第二点类似，virtual box 必须没有端口转发到那个端口，因为它会有效地占用它，但它必须保留给 php editor，而不是 virtualbox 端口转发，不是 virtualbox 必须在那个端口监听被转发到一些内部应用程序，但外部 php-editor 必须监听它=那个端口

# scala - Scala计算地图中的两个值

> ID：12046512
> 
> 赞同：0
> 
> 时间：2012-08-20T23:16:30.140
> 
> 标签：scala

我有下面的地图`Map(FULL -> 3854.0, REMAINING -> 3769.0)` 我想计算两个值，使得 (FULL/REMAINING)*100 有一个好方法吗？我试过`m.foldLeft(0)(_/_._2)`了，但编译器抱怨 float 和 Int 之间的类型不匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T23:21:12.227

您可以通过指定`0.0`为 的第一个参数来修复类型不匹配`foldLeft`，但这不会使您的代码正确。然后它将计算`0.0/3854.0/3769.0`which equals `0.0`。

事实上，`Map(FULL -> 3854.0, REMAINING -> 3769.0)`不能保证被订购，所以我很确定你能做的最好的就是`m('FULL') / m('REMAINING')`。

也许您想为此创建一个`case class`，在这种情况下，您可以说`m.full/m.remaining`甚至创建一个方法来自动计算它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:04:27.217

使用 Map，不能保证这两个值确实存在。因此，您可能想要为此创建一个类，正如 Ken Bloom 已经建议的那样，或者使用`get`of 方法来实现`Map`，该方法返回一个`Option[B]`：

```
val resOpt = for {
  full <- m.get("FULL")
  remainig <- m.get("REMAINING")
} yield (full / remaining) * 100

resOpt.getOrElse(someDefaultValue) 
```

这样可以避免令人讨厌的运行时错误。

# c# - char[] 到 C# 中的字符串

> ID：12046513
> 
> 赞同：-3
> 
> 时间：2012-08-20T23:16:37.517
> 
> 标签：c#, arrays, string

> **可能重复：**
> [.NET / C# - 将 char[] 转换为字符串](https://stackoverflow.com/questions/1324009/net-c-sharp-convert-char-to-string)

当我尝试在我的 char[] 上调用 .ToString() 时，我希望为 char[] 中的值创建一个字符串。相反，我将“char []”作为字符串，类型，这不是我想要的。我在这里想念什么？

在 Java 中，char[] 上的 .toString() 将 char[] 中的值打印为字符串。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T23:19:07.377

好老的`String`构造函数。

[http://msdn.microsoft.com/en-us/library/ttyxaek9.aspx](http://msdn.microsoft.com/en-us/library/ttyxaek9.aspx)

```
new String(chars) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T23:19:11.807

```
char[] charArray = new char[10];
.... 
string myString = new string(charArray); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T23:19:11.997

很简单：

```
string s = new string(arr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T23:20:18.763

这实际上很简单：

```
char[] myCharArray = new char[5];

myCharArray[0] = 'H';
myCharArray[1] = 'e';
myCharArray[2] = 'l';
myCharArray[3] = 'l';
myCharArray[4] = 'o';

string myString = new String(myCharArray);
Console.WriteLine("This is my String: " + myString; 
```

对？:-)

# apache - Apache 2.2 phpinfo() 配置文件 (php.ini) 路径与 httpd.conf 不匹配

> ID：12046514
> 
> 赞同：5
> 
> 时间：2012-08-20T23:16:39.690
> 
> 标签：apache, php, httpd.conf

我正在尝试设置 Apache 以使用 PHP。它似乎正在工作，因为我可以从我的“示例”目录中运行文件 index.php，该目录位于 Apache 的 htdocs 中。但是，当我查看 phpinfo() 屏幕上的配置文件 (php.ini) 路径时，它与我在 httpd.conf 中的路径不匹配。此外，在我的 php.ini 文件中打开的模块未设置为启用。

所以我认为它没有得到我的 php.ini。在 phpinfo() 屏幕上，它显示路径是 C:\Windows。

在 Apache 的 conf 目录中的 httpd 文件中，我有这个：

```
.
.
.
#LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule php5_module C:/php/php5apache2_2.dll
PHPIniDir "C:/php/" 
```

所有这些文件都存在。然而，这甚至不是 C:\Windows 中的 php.ini。

你可能会说我的 httpd.conf 文件可能没有被读取。但是，如果我将 php5_module 行更改为类似

```
LoadModule php5_module C:/php/incorect.dll 
```

Apache 无法启动。所以这是正在阅读。只是我的 php.ini 没有被读取。为什么？谢谢您的帮助！

**编辑：**还想提一下，在 phpinfo() 屏幕上，加载的配置文件显示为（无）。不知道这甚至在说什么，但对你们这些人来说只是一些更深入的了解。

哦，PHP 版本是 5.4.6。

**编辑 2：** Windows 版本：Windows 7 专业服务包：服务包 1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T00:01:05.127

改变：

```
PHPIniDir "C:/php/" 
```

到：

```
PHPIniDir "C:/php" 
```

加载模块：

```
LoadModule php5_module "c:/php/php5apache2_2.dll" 
```

添加 PHP 处理程序：

```
AddHandler application/x-httpd-php .php 
```

更新目录索引（可选）：

```
DirectoryIndex index.php index.html 
```

`Path`在变量末尾包含“c:\php” 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T07:45:35.757

已解决 - 不能是正斜杠，必须返回。拿

```
PHPIniDir "C:\srv\php5_4_8\" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:24:48.333

我找到了一种在 IIS 7 上正确安装它的方法：

如果您使用 64 位，请将 IIS 设置为允许 32 位

cscript %SYSTEMDRIVE%\inetpub\adminscripts\adsutil.vbs SET W3SVC/AppPools/Enable32bitAppOnWin64 1

设置环境变量

路径，比如说，C:\php\

PHPRC 到，相同的目录

转到 Web 服务扩展：添加新扩展...

将其命名为 php，并将其指向 php5isapi.dll。

将状态设置为允许。

右键单击网站：

在选项卡上，ISAPI 过滤器，将其命名为例如 php，并将其指向 php5isapi.dll

然后转到主目录选项卡：

单击配置

在映射上，单击添加：

可执行文件是：php5isapi.dll 扩展名：.php

单击确定，然后单击确定。

然后在“文档”选项卡上单击“添加”：

并在那里添加你想要加载的默认值，比如 index.php

然后停止，然后启动 IIS。

这在 Windows 2003 Server 和 WinXP 64 上对我有用。

我希望这也适用于你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T21:34:16.583

我的系统：`Windows with apache 2.2, php 5.3`

症状： `PDO drivers not found.`

我发现了什么： phpinfo() 表明 php.ini 文件是`"C:\Windows"`即使我希望它与`"C:\Program Files (x86)\PHP\"`我的`httpd.conf`文件中指定的一样`apache\conf`

问题出在`PHPIniDir`字符串中，`httpd.conf`因此`php.ini`找不到我打算使用的文件。

失败的：

```
PHPIniDir "C:\Program Files (x86)\PHP\" 
```

工作：

```
PHPIniDir "C:\Program Files (x86)\PHP"
PHPIniDir "C:/Program Files (x86)/PHP"
PHPIniDir "C:/Program Files (x86)/PHP/" 
```

**注意：** FAILED 情况下的额外“\”。删除它，保存 conf 文件，然后重新启动 apache。现在 phpinfo 应该显示 php.ini 文件来自“C:\Program Files (x86)\PHP”，并且 PDO 驱动程序已加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-15T10:09:55.703

我面临着完全相同的问题。

就我而言，问题在于我已将 php.ini 文件保存为文本文件。一旦我在记事本中将文本文件转换为“所有文件”并赋予它“.ini”扩展名，它就变成了“配置设置文件”并且它起作用了。

（在 Windows 上工作）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-09-18T11:16:03.367

由于我运行的是 Windows 7（Apache 2.2 & PHP 5.2.17 & MySQL 5.0.51a），文件“httpd.conf”中的语法（C:\Program Files (x86)\Apache Software Foundation\Apache2.2\conf \httpd.conf) 对斜线非常敏感。我需要改变

`PHPIniDir 'c:\PHP'`

到

`PHPIniDir 'c:\PHP'`

**注意最后一个斜线扰乱了一切！**

# swing - Listbox (JList) 不会从自定义 ListModel 动态更新

> ID：12046515
> 
> 赞同：2
> 
> 时间：2012-08-20T23:16:46.630
> 
> 标签：swing, clojure, jlist, seesaw

我正在使用 Seesaw 在 Clojure 中开发一个 GUI 应用程序，并且在更新我的自定义 ListModel 时无法更新列表框（Java 中的 JList）。

这是我的一些代码：

```
(deftype ActionHistoryListModel
  [^{:unsynchronized-mutable true} listeners
   ^{:unsynchronized-mutable true} listening-to]

  ListModel
  (addListDataListener [this listener]
    (set! listeners (conj listeners listener)))
  (removeListDataListener [this listener]
    (set! listeners (remove #(= % listener) listeners)))
  (getSize [this] 
    (get-in (deref listening-to) [:count]))
  (getElementAt [this index]
    (get-in (deref listening-to) [:actions index]))

  ActionHistoryListModelProtocol
  (listen-to [this r]
    (do
      (set! listening-to r)
      (add-watch r this (fn [_ _ _ new-state] (.notify this new-state)))))
  (notify [this new-state]
    (let [action ((meta new-state) :last-action)
          const  (cond
            (= action :create) INTERVAL_ADDED
            (= action :update) CONTENTS_CHANGED)
          index  (last ((meta new-state) :action-target))
          event  (ListDataEvent. this const index index)
          notification (cond
            (= action :create) #(.intervalAdded % event)
            (= action :update) #(.contentsChanged % event))
          ]
      (. (.. System out) print (str "Index: " index "\n" "Event: " event "\n"))
      (map #(invoke-later (notification %)) listeners)))
  )

(defn make-action-history-list-model []
  (ActionHistoryListModel. #{} nil))

(def ahlm (make-action-history-list-model))
(.listen-to ahlm action-history)

(def undo-list (listbox :model ahlm))

; then put list in frame... 
```

哪里`action-history`是`ref`。

它到了应该更新列表的地步，因为`System.out.print`正在发生，但列表框不想更新

关于可能出现问题的任何想法？是否与使用 EDT 和手表回调的混合？

让我知道是否需要更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T04:07:58.347

自定义模型总是很棘手，尤其是在事件通知方面，所以很难说它的效果如何。也就是说，我对为什么没有通知的最佳猜测是您的 using`map`是惰性的，即您的`notify`方法中的最后一种形式实际上并没有做任何事情。试试这个：

```
(doseq [listener listeners] 
  (invoke-later (notification listener))) 
```

祝你好运。

# .net - Graphics.DrawPolygon 绘制六边形？

> ID：12046516
> 
> 赞同：2
> 
> 时间：2012-08-20T23:16:49.210
> 
> 标签：.net, graphics

我正在使用一些简单的代码来绘制六边形，我得到了意想不到的结果。

代码如下：

```
Public Class Form1

Dim bm As New Bitmap(640, 480)
Dim bmg As Graphics = Graphics.FromImage(bm)
Dim p As Pen = New Pen(Color.Black)
Dim sb As SolidBrush = New SolidBrush(Color.Black)

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    DrawHex(80, 50)
End Sub

Public Sub DrawHex(x As Integer, y As Integer)

    Dim side As Integer = 25  '' the length of the side of a hex

    Dim ShortSide As Single = Convert.ToSingle(System.Math.Sin(30 * System.Math.PI / 180) * side)
    Dim LongSide As Single = Convert.ToSingle(System.Math.Cos(30 * System.Math.PI / 180) * side)

    Dim Points(6) As PointF
    Points(0) = New PointF(x, y)
    Points(1) = New PointF(x + side, y)
    Points(2) = New PointF(x + side + ShortSide, y + LongSide)
    Points(3) = New PointF(x + side, y + LongSide + LongSide)
    Points(4) = New PointF(x, y + LongSide + LongSide)
    Points(5) = New PointF(x - ShortSide, y + LongSide)
    bmg.DrawPolygon(p, Points)

End Sub

Private Sub Form1_Paint(sender As Object, e As System.Windows.Forms.PaintEventArgs) Handles Me.Paint

    e.Graphics.DrawImage(bm, New Point(10, 10))

End Sub 
```

结束类

六边形的五个点都可以。这是最后一点没有正确绘制，我不明白为什么：

![在此处输入图像描述](../Images/227cbd57a873bbb1f9a6cbd5ca061821.png)

“ShortSide”和“LongSide”代表直角三角形在六边形之外的线。我很确定数学是正确的，我觉得我错过了一些明显的东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:30:09.960

数组是从零开始的。将其更改为：

```
Dim Points(5) As PointF 
```

会给你六分。您的最后一点 (#7) 默认为 (0, 0)。

# php - preg_replace 和 preg_match 阿拉伯字符

> ID：12046526
> 
> 赞同：6
> 
> 时间：2012-08-20T23:18:28.270
> 
> 标签：php, utf-8, preg-replace, preg-match, arabic

> **可能重复：**
> [如何将阿拉伯字母添加到 url 正则表达式](https://stackoverflow.com/questions/4842378/how-to-add-arabic-letters-to-url-regex)

我已经搜索了几个小时没有答案。

您如何在阿拉伯字符和英语上使用 preg_replace？

这是我的代码是英文

```
$string = preg_replace ( "/&([a-zA-Z])(uml|acute|grave|circ|tilde|ring),/", "", $string );
$string = preg_replace ( "/[^a-zA-Z0-9_.-]/", "", $string ); 
```

一些答案建议我使用此代码：

```
$string = preg_replace ( "/&([أ-يa-zA-Z])(uml|acute|grave|circ|tilde|ring),/u", "", $string );
$string = preg_replace ( "/[^أ-يa-zA-Z0-9_.-]/u", "", $string ); 
```

我已经对其进行了测试，并且可以正常工作。但这实际上对 php 有用吗？它包括所有阿拉伯字符吗？有没有更好的方法来包含所有阿拉伯字符？

我要对代码做的是：

将字符串中的所有字符替换为有效的 SEO 友好字符。

我使用基于[http://www.unicodemap.org](http://www.unicodemap.org)的代码解决了这个问题。谢谢你布莱恩。

```
$string = preg_replace ( "/&([\x{0600}-\x{06FF}a-zA-Z])(uml|acute|grave|circ|tilde|ring),/u", "", $string );
    $string = preg_replace ( "/[^\x{0600}-\x{06FF}a-zA-Z0-9_.-]/u", "", $string ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T23:25:42.713

[unicode 字符映射](http://www.unicodemap.org/)是可视化字符组的好地方，包括字符串的第一部分为您分组的阿拉伯语`[أ-يa-zA-Z]`

如果您仍然不确定，请阅读更多关于[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:36:02.487

我在你的范围内看到的是，你有`[أ-ي]`，我知道右边的是阿拉伯文 A，第一个字母。我不熟悉第一个，但我想它类似于最后一个角色。如果是这种情况，因为 PHP 语言是英语，您可能希望将范围的方向更改为`[ي-أ]`。

此外，为了规范化，我会改用 Unicode 字符范围，就像 Bryan 建议的那样。

# gis - 请求的 BBOX 之外的数据

> ID：12046530
> 
> 赞同：0
> 
> 时间：2012-08-20T23:18:43.377
> 
> 标签：gis, kml, google-earth, arcgis

我正在尝试将 ArcGIS 中的大型图层地图转换为 Google Earth 的 KML 文件。当我将 DPI 增加到 300 甚至 500 并将我的图层文件导出到 Google 地球时，它仍然非常模糊。我认为解决此问题的方法是将地图测量为 4 个象限，然后导出每个象限，但是一旦我调整其中一个范围属性，kml 将不再显示在谷歌地球中。该文件可以在左侧的“位置”选项卡中看到，并附有“请求的 BBOX 之外的数据”的注释。该图层位于 WGS_1984_UTM_Zone_8N 中。我非常困惑，因为我可以将地图导出为一个大的像素化文件，但是当我尝试缩小范围属性并导出时，kml 文件中没有图像。ArcGIS成功完成将图层导出到kml的任务，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:55:49.940

所以这样做 - 而不是使用图层到 KML 工具，将图像导出为地理参考格式（可能是 GeoTIFF）并将图像拖到 GE 中 - 它会为您创建一个不会被像素化的“超级覆盖”。

# mercurial - HG 克隆存储库，带有子存储库，无需拉取

> ID：12046541
> 
> 赞同：0
> 
> 时间：2012-08-20T23:20:36.003
> 
> 标签：mercurial, clone, subrepos

我试图弄清楚如何在不从源代码中提取的情况下克隆带有子存储库的存储库。恐怕，虽然我已经阅读了教程和示例，但我的 Mercurial 知识是暂时的。

现在，.hgsub 结构是一个类型列表：

```
subrepo = ssh://address/subrepo 
```

阅读帖子的答案[如何在不再次拉取子存储库的情况下进行本地克隆？](https://stackoverflow.com/questions/9427988/how-to-make-local-clone-without-pulling-subrepos-again)我试图将其更改为列表

```
subrepo = subrepo
[subpaths]
subrepo = ssh://address/subrepo

hg clone c:\path\repo 
```

`hg update -R rev`

无论我做什么，我总是最终从源（ssh）而不是本地子存储库内容中提取。

注意：当我尝试更新我的原始存储库时，我收到一个关于重复路径的错误，只有当我恢复我在 .hgsub 文件中的更改时才会消失。

我还尝试了什么：

一个想法：制作存储库的副本，例如复制和粘贴，并使用硬链接。这是个好主意吗？当我更改副本时，我最终不会对原始文​​件进行更改吗？

另一个想法：使用硬链接克隆 .hg 文件夹，然后简单地复制其余内容？

有人有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:06:04.123

我最终放弃了这个想法 - 复制并粘贴 repo 文件夹。只是为了好玩，我制作了一个脚本来复制所有文件并硬链接 .hg 文件夹。至少，我在这个过程中确实了解了一点关于 Mercurial 的知识……

# mysql - Ruby on Rails 应用程序未在服务器上连接 FTP 和 MySql，但在本地工作

> ID：12046544
> 
> 赞同：0
> 
> 时间：2012-08-20T23:20:43.250
> 
> 标签：mysql, ruby-on-rails-3, ftp, amazon-ec2, ubuntu-12.04

我正在使用需要连接到 ftp 服务器和 mysql 服务器的 Ruby on Rails 应用程序。该代码在我的计算机（OSX 10.8）上运行良好，但无法在我的 EC2 Ubuntu（12.04）服务器上连接？

我正在使用 mysql2 gem 和 net/ftp。

FTP错误

```
501 Server cannot accept argument. 
```

和这个 Mysql 的错误

```
Mysql2::Error: Can't connect to MySQL server on '{Server Name}' (110) 
```

我已经尝试过安全组。不确定下一步是什么。

提前感谢您的帮助。

更新：

FTP 需要是被动的，并且 MySql DB 阻止了我的 ip 。

# c++ - 函数中推导参数之前的默认模板参数？

> ID：12046545
> 
> 赞同：6
> 
> 时间：2012-08-20T23:21:02.820
> 
> 标签：c++, templates, c++11

以下在 g++ 中编译没有问题：

```
template<typename ReturnType = double, typename OtherType> ReturnType func(const OtherType& var)
{
    ReturnType result = 0;
    /* SOMETHING */
    return result;
} 
```

所有符合标准的编译器都可以在默认模板参数（`OtherType`此处）之后具有非默认模板参数（`ReturnType`此处）吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T23:28:17.873

情况很复杂。来自 C++11 规范：

> 如果类模板的模板参数具有默认模板参数，则每个后续模板参数应提供默认模板参数或模板参数包。如果主类模板的模板参数是模板参数包，它应该是最后一个模板参数。[注意：这些不是函数模板或类模板部分特化的要求，因为可以推导出模板参数（14.8.2）。

因此，除非是部分专业化，否则您尝试做的事情是不允许用于课程的。但是对于功能来说还可以。

因此，只要您只使用示例中显示的函数来执行此技巧，就可以了。您只是不能将其推广到类模板。

# c# - 处理Windows服务错误的正确方法

> ID：12046556
> 
> 赞同：0
> 
> 时间：2012-08-20T23:22:27.760
> 
> 标签：c#, multithreading, windows-services, threadpool, semaphore

我正在构建一个多线程 Windows 服务。一旦所有线程都运行完毕，我很难找出干净地停止服务的最佳方法。代码如下。我查看了 ManualResetEvent、CountdownEvent 和使用 Interlocked。我不确定哪一个最适合我的实施。

感谢您的帮助。

```
 private bool _isExiting;
    private bool IsExiting //if this is set to true exit but wait for all threads
    {
        get { return _isExiting; }
        set
        {
            _isExiting = value;
            if (value)
                Stop();
        }
    }
   private JobProfiler profiler;

   protected override void OnStart(string[] args)
    {
        try
        {
            profiler = new Profiler(MaxThreads);
            ThreadPool.QueueUserWorkItem(DoWork); // main thread set up thread for work
        }
        catch (Exception ex)
        {
            LogError(ex);
            Stop();
        }
    }

    protected void DoWork(object data)
    {
        while (!IsExiting)
        {
            try
            {
                profiler.RunProfiles(profiles); //this should wait until all child threads are done
                Thread.Sleep(ThreadSleep); //sleep before next iteration
            }
            catch (Exception ex)
            {
                LogError(ex);
                errorCount++;

                if (errorCount > 10)  //if 10 serious errors happen stop the service
                {
                    IsExiting = true;
                    break;
                }
            }
        }
    }

    protected override void OnStop()
    {
        try
        {

            if(profiler != null)
                profiler.IsExiting = true; //setting a variable here to signal all remaining threads to stop

            //here it should be waiting for the main and child threads to finish

            base.OnStop();
        }
        catch
        {
            base.OnStop();
        }
    }

    //profiler class
    //******************************************************

    private readonly Semaphore _throttle;   //setting up a throttle for the number of threads we will allow to execute at once

    public void RunProfiles(List<Profiles> profiles)
    {
        foreach (var profile in profiles)
        {
            if (IsExiting) break; //if an exit command is called stop iterating

            _throttle.WaitOne(); // Wait on a semaphore slot to become available
            ThreadPool.QueueUserWorkItem(RunProfile, profile ); //then add to thread queue

        }
    }

    private void RunProfile(object profile)
    {
        try
        {
            var p = (profile as Profile);

            if (p == null || IsExiting)
            {
                _throttle.Release(); // Release the semaphore slot if profile not found or if we're exiting
                return;
            }

            //****
            //do a bunch of stuff
            //****

            _throttle.Release(); // Release the semaphore slot

        }
        catch (Exception ex)
        {
            log.Error(ex);
            _throttle.Release(); // Release the semaphore slot
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:48:08.480

如果发生停止事件或某些异常并且您想停止服务，我将使用任务（来自 .NET 4.0 的 TPL）并使用 CancellationToken 取消任务。

但是，如果您想坚持使用信号量或更旧的同步原语，您的解决方案就可以正常工作。

另请查看这篇文章：[线程](http://www.albahari.com/threading/part2.aspx)

那里有几个有用的示例可以帮助您选择最佳解决方案。我相信 CountdownEvent 是高度优化且独立于操作系统的，所以从你的列表中，我会选择那个。

# php - PHP 调用 Postgres void 函数

> ID：12046557
> 
> 赞同：2
> 
> 时间：2012-08-20T23:22:59.700
> 
> 标签：php, postgresql, postgresql-9.0

是否有使用 PHP 向 postgres 函数发出参数化命令调用 (ExecuteNonQuery) 的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:38:41.577

最佳实践：

参数化您的查询（即[http://php.net/manual/en/function.pg-query-params.php](http://php.net/manual/en/function.pg-query-params.php)或类似的）

我实际上认为返回 void 是一种不好的做法。我认为返回一些有用的信息几乎总是更好。然而，返回 void 的函数并没有什么特别之处。您只需像调用任何其他函数一样调用它们。

# c++ - 如何测试分配器是否使用 std::allocate 进行内存分配？

> ID：12046559
> 
> 赞同：0
> 
> 时间：2012-08-20T23:23:31.917
> 
> 标签：c++, allocator

我想为使用 完成的分配提供专门的优化`std::allocator`，但是如果有人在*没有*覆盖`allocate`or的情况下对其进行了子类化`deallocate`，那么我不知道如何检测他们是否仍在使用`std::allocator`。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:23:31.917

假设他们没有定义自己的`allocate`和`deallocate`函数，那么测试的一种方法是测试值

```
is_default_allocator_allocation<allocator_type>::value 
```

测试`allocate`和`deallocate`方法是否为默认方法。

如果他们*提供*了自己的功能，那么就没有通用的测试方法。

此解决方案不**考虑**其他方法。
它可能会给您偶尔的误报，但不应给出误报。

我的实现：

```
template<class Ax> char (&is_default_deallocate(void (std::allocator<typename Ax::value_type>::*)(typename Ax::pointer, typename Ax::size_type)))[1];
template<class Ax> char (&is_default_deallocate(void (Ax::*)(typename Ax::pointer, typename Ax::size_type)))[2];
template<class Ax> char (&is_default_allocate(typename Ax::pointer (std::allocator<typename Ax::value_type>::*)(typename Ax::size_type, void const *)))[1];
template<class Ax> char (&is_default_allocate(typename Ax::pointer (Ax::*)(typename Ax::size_type, void const *)))[2];

template<class Ax>
struct is_default_allocator_allocation  // tests allocate() and deallocate()
{
    static bool const value =
        sizeof(is_default_deallocate<Ax>(&Ax::deallocate)) == sizeof(char)
        && sizeof(is_default_allocate<Ax>(&Ax::allocate)) == sizeof(char);
}; 
```

# python - Python：在 JSON 数据结构中提取属性

> ID：12046562
> 
> 赞同：0
> 
> 时间：2012-08-20T23:23:46.783
> 
> 标签：python, parsing, ebay-api, simplejson

我目前正在使用 eBay 公共 API 解析 eBay 数据，我已经找到了解析 JSON 结构的方法，除了一些 JSON 元素。

这是我正在查看的 JSON 结构：

```
 {u'itemId': [u'370640300983'], u'isMultiVariationListing': [u'false'], u'globalId': [u'EBAY-US'], u'title': [u'DELL Latitude D630 Core 2 Duo 2GHz 1GB 80GB CD-RW/DVD WiFi Notebook 14" Laptop'], u'country': [u'US'], u'shippingInfo': [{u'expeditedShipping': [u'true'], u'shippingType': [u'Calculated'], u'handlingTime': [u'1'], u'shipToLocations': [u'US'], u'oneDayShippingAvailable': [u'false']}], u'galleryURL': [u'http://thumbs4.ebaystatic.com/pict/3706403009834040_1.jpg'], u'autoPay': [u'false'], u'location': [u'Saint Paul,MN,USA'], u'postalCode': [u'55114'], u'returnsAccepted': [u'true'], u'viewItemURL': [u'http://www.ebay.com/itm/DELL-Latitude-D630-Core-2-Duo-2GHz-1GB-80GB-CD-RW-DVD-WiFi-Notebook-14-Laptop-/370640300983?pt=Laptops_Nov05'], u'sellingStatus': [{u'currentPrice': [{u'@currencyId': u'USD', u'__value__': u'99.99'}], u'timeLeft': [u'P0DT0H13M10S'], u'convertedCurrentPrice': [{u'@currencyId': u'USD', u'__value__': u'99.99'}], u'bidCount': [u'4'], u'sellingState': [u'Active']}], u'paymentMethod': [u'PayPal', u'VisaMC', u'Discover'], u'primaryCategory': [{u'categoryId': [u'177'], u'categoryName': [u'PC Laptops & Netbooks']}], u'condition': [{u'conditionId': [u'3000'], u'conditionDisplayName': [u'Used']}], u'listingInfo': [{u'listingType': [u'Auction'], u'gift': [u'false'], u'bestOfferEnabled': [u'false'], u'startTime': [u'2012-08-15T23:28:05.000Z'], u'buyItNowAvailable': [u'false'], u'endTime': [u'2012-08-20T23:28:05.000Z']}]} 
```

我当前正在解析的数据

```
370640300983
DELL Latitude D630 Core 2 Duo 2GHz 1GB 80GB CD-RW/DVD WiFi Notebook 14" Laptop
{u'@currencyId': u'USD', u'__value__': u'99.99'} 
```

第二个元素：

```
{u'itemId': [u'170892723100'], u'isMultiVariationListing': [u'false'], u'globalId': [u'EBAY-US'], u'title': [u'Dell Latitude D620 Laptop Core 2 Duo 2GHz  1GB Ram No HDD INCOMPLETE'], u'country': [u'US'], u'shippingInfo': [{u'expeditedShipping': [u'false'], u'handlingTime': [u'1'], u'shippingServiceCost': [{u'@currencyId': u'USD', u'__value__': u'24.0'}], u'oneDayShippingAvailable': [u'false'], u'shipToLocations': [u'US'], u'shippingType': [u'Flat']}], u'galleryURL': [u'http://thumbs1.ebaystatic.com/pict/1708927231004040_1.jpg'], u'autoPay': [u'false'], u'location': [u'Hughesville,PA,USA'], u'postalCode': [u'17737'], u'returnsAccepted': [u'true'], u'viewItemURL': [u'http://www.ebay.com/itm/Dell-Latitude-D620-Laptop-Core-2-Duo-2GHz-1GB-Ram-No-HDD-INCOMPLETE-/170892723100?pt=Laptops_Nov05'], u'sellingStatus': [{u'currentPrice': [{u'@currencyId': u'USD', u'__value__': u'20.01'}], u'timeLeft': [u'P0DT1H10M35S'], u'convertedCurrentPrice': [{u'@currencyId': u'USD', u'__value__': u'20.01'}], u'bidCount': [u'2'], u'sellingState': [u'Active']}], u'paymentMethod': [u'PayPal'], u'primaryCategory': [{u'categoryId': [u'177'], u'categoryName': [u'PC Laptops & Netbooks']}], u'condition': [{u'conditionId': [u'3000'], u'conditionDisplayName': [u'Used']}], u'listingInfo': [{u'listingType': [u'Auction'], u'gift': [u'false'], u'bestOfferEnabled': [u'false'], u'startTime': [u'2012-08-18T00:25:30.000Z'], u'buyItNowAvailable': [u'false'], u'endTime': [u'2012-08-21T00:25:30.000Z']}]} 
```

第二个元素的解析元素：

```
170892723100
Dell Latitude D620 Laptop Core 2 Duo 2GHz  1GB Ram No HDD INCOMPLETE
{u'@currencyId': u'USD', u'__value__': u'20.01'} 
```

如果您在我的代码的两次迭代中看到我无法获取 u'**值**：元素解析并从数据结构中获取实际价格提取：

基本上不是`{u'@currencyId': u'USD', u'__value__': u'20.01'}`我想得到`20.01`解析值。我应该使用正则表达式来解析它还是有更好的方法呢？

```
Here is my code:
  data = json.load(urllib2.urlopen(url))
  #print data
  for item in data['findItemsByKeywordsResponse'][0]['searchResult'][0]['item']:
    print item
    for itemId in item['itemId']:
      print itemId
    for title in item['title']:
      print title
    for price in item['sellingStatus'][0]['currentPrice']:
      print price
    print '\n' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:33:12.317

只需这样做：

```
for price in item['sellingStatus'][0]['currentPrice']:
      print float(price["__value__"]) 
```

当然，使用浮点数来赚钱是一个可怕的想法，因此您应该使用以下`decimal`模块：

```
from decimal import Decimal

for price in item['sellingStatus'][0]['currentPrice']:
      print Decimal(price["__value__"]) 
```

或者将其解析为以美分为单位的整数价格：

```
for price in item['sellingStatus'][0]['currentPrice']:
      dollars, cents = price["__value__"].split(".")
      print int(dollars) * 100 + int(cents) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:33:41.670

（根据上面的评论）：

尝试改变：

```
for price in item['sellingStatus'][0]['currentPrice']:
    print price 
```

至

```
for price in item['sellingStatus'][0]['currentPrice']:
    print price['__value__'] 
```

# php - 如果语句未按预期工作

> ID：12046578
> 
> 赞同：1
> 
> 时间：2012-08-20T23:26:04.290
> 
> 标签：php, sql, if-statement, while-loop

现在第一个有效，但它不会进入第二个..

```
while($row = mysql_fetch_array($result))
{
    $rank = $row["rank"];
    if($rank == "President/Main Developer" or $rank == "Administrator/Asst. Developer")
    {   
        echo "In first while";
        echo "<td>" . $row["username"] . "</td>";
        echo "<td style='color: #FF4747'>" . $row["rank"] . "</td>";
        $time = formatTime($row["joinDate"]);
        echo "<td>" . $time . "</td>";
        echo "</tr>";
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:28:19.733

不要在 PHP if 语句中使用`or`and 。`and`正确的运算符是`||`for or 和`&&`for and。

`;`您在语句的末尾还有一个`if`导致问题的语句。

```
while($row = mysql_fetch_array($result))
{
    $rank = $row["rank"];
    if($rank == "President/Main Developer" || $rank == "Administrator/Asst. Developer")
    {   
        echo "In first while";
        echo "<td>" . $row["username"] . "</td>";
        echo "<td style='color: #FF4747'>" . $row["rank"] . "</td>";
        $time = formatTime($row["joinDate"]);
        echo "<td>" . $time . "</td>";
        echo "</tr>";
    }
} 
```

和第二段代码：

```
while($row2 = mysql_fetch_array($result))
{
    echo "<tr>";
    echo "In second while";
    echo "<td>" . $row2["username"] . "</td>";
    if ($row["rank"]!="President/Main Developer" && $row2["rank"]!="Administrator/Asst. Developer")
    {
        echo "<td>" . $row2["rank"] . "</td>";
    }
    $time = formatTime($row2["joinDate"]);
    echo "<td>" . $time . "</td>";
    echo "</tr>";
} 
```

此外，您*可能*希望在回声中使用换行符。它对浏览器中的输出没有影响，但它使您自己阅读 HTML 变得更加容易。你可以这样做：

```
echo "<td>" . $row2["rank"] . "</td>\n"; 
```

唯一的区别是当您查看代码时，enxt 位将从新行开始。

编辑：重新没有进入第二个循环

如果您希望使用同一行，则需要将其全部放入一个 while 循环中 - 或再次针对您的数据库运行查询。while 循环将一次获取结果的每一行，直到用完为止。除非您再次查询数据库，否则根本不会再获取任何行，因此它永远不会进入循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:31:15.400

更改查询本身...第一个查询是

```
$query1 = "SELECT * FROM `TABLE_NAME` WHERE `rank` = 'President/Main Developer' OR `rank` = 'Administrator/Asst. Developer'";

$query2 = "SELECT * FROM `TABLE_NAME` WHERE `rank` != 'President/Main Developer' OR `rank` != 'Administrator/Asst. Developer'"; 
```

你先做第一个，然后做最后一个，不需要 IF 语句:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:33:46.900

当您不在两个循环之间“重新查询”时，您已经到达了结果的末尾。所以第二个`while`循环没有什么可做的。

您必须重置它，然后再继续：

```
mysql_data_seek($result, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T23:30:54.493

我相信您遇到的问题是；在 if 语句的末尾。当你放 ; 你是说句子在那里结束，这就像说 if 的“then”部分是空的，然后 { 是不相关的。

这就是你想要的：

```
while($row = mysql_fetch_array($result))
{
    $rank = $row["rank"];
    if($rank == "President/Main Developer" or $rank == "Administrator/Asst. Developer")
    {   
        echo "In first while";
        echo "<td>" . $row["username"] . "</td>";
        echo "<td style='color: #FF4747'>" . $row["rank"] . "</td>";
        $time = formatTime($row["joinDate"]);
        echo "<td>" . $time . "</td>";
        echo "</tr>";
    }
} 
```

# winforms - VS 2012 生成的 App.exe 和 App.vshost.exe 显示形式不同

> ID：12046581
> 
> 赞同：1
> 
> 时间：2012-08-20T23:26:50.087
> 
> 标签：winforms, c#-3.0, visual-studio-2012, vshost.exe

我有一个用作数据输入向导的表单。它承载一系列面板，每个面板都停靠以填充显示区域。我一直在使用 VS 2010 和 VS 2012 RC 使用显示器，一段时间以来没有任何问题。

但是，我最近安装了 VS 2012 RTM 并遇到了这个奇怪的问题：在 IDE 中使用 F5 运行应用程序时，App.vshost.exe 显示的表单太窄了几个像素，并且会弄乱停靠面板的显示在向导中。直接运行 App.exe 时（通过 IDE 中的 Ctrl-F5 或直接运行 .exe），窗体大小正确。调试和发布配置都会出现同样的问题。

我在 VS 2010 中测试了代码，对于这个特定的向导和页面，App.vshost.exe 和 App.exe 的显示相同。

我已将其缩小为将表单显示为对话框，其中显示的表单将其 FormBorderStyle 设置为 FixedSingle。例子：

```
 public partial class MainForm : Form
    {
        public MainForm()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            SubForm subForm = new SubForm();
            subForm.ShowDialog(this);
        }
    }

    public partial class SubForm : Form
    {
        public SubForm()
        {
            InitializeComponent();
            this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedSingle;
        }
    } 
```

在上面的示例中，显示的 SubForm 的大小取决于您运行的是 App.vshost.exe 还是 App.exe。（在我的实际代码中，表单边框样式设置为基本表单的 .Designer.cs 文件的一部分。）

有谁知道为什么编译后的 App.vshost.exe 会以不同的方式显示？更好的是，有谁知道我可以如何调整 VS 2012 以便我可以信任 App.vshost.exe 的显示输出？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:32:48.287

因此，事实证明它是/曾经是 Visual Studio 2012 中的一个错误。推荐的解决方法是禁用 Visual Studio 托管进程。

错误跟踪： [http ://connect.microsoft.com/VisualStudio/feedback/details/759413/winform-dialogs-displayed-differently-by-vshost-exe-and-exe-using-vs-2012-when-formborderstyle-set -in-form-codebehind](http://connect.microsoft.com/VisualStudio/feedback/details/759413/winform-dialogs-displayed-differently-by-vshost-exe-and-exe-using-vs-2012-when-formborderstyle-set-in-form-codebehind)

# ms-access - 如何将 mmm-yy 等文本日期格式转换为 MS Access 查询中的日期？

> ID：12046587
> 
> 赞同：4
> 
> 时间：2012-08-20T23:28:00.123
> 
> 标签：ms-access, date

我有一个格式为 mmm-yy 的文本文件（所有月份都是 3 个字母的缩写，例如 Jan、Feb、Mar）

```
May-31 
```

这意味着，“1931 年 5 月”。

如果我在查询中使用以下内容：

```
CDate([BIRTHDT]) 
```

我得到的是 2012 年 5 月 31 日，而不是 1931 年 5 月 1 日。其他行（例如 May-32）的其他行（如 May-32）给出了 1932 年 5 月 1 日的预期结果。显然这与 ms-access文本到日期的转换功能 mmm-dd 有效性检查比可能不太常见的 mmm-yy 格式具有更高的优先级，但在这种情况下它会产生意想不到的结果。

所以我需要以某种方式从前 3 个字符中提取月份，从最后 2 位数字中提取年份，并将它们组合起来。理想情况下，我想在 MS Access SQL 中完成这一切。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T00:25:10.857

“*我需要从前 3 个字符中提取月份，从最后 2 位数字中提取年份，然后将它们组合起来。理想情况下，我希望在 MS Access SQL 中完成这一切。* ”

这是立即窗口中的一个会话。

```
BIRTHDT = "May-31"
? BIRTHDT
May-31
? Left(BIRTHDT,3) & "-1-" & Right(BIRTHDT,2)
May-1-31
? CDate(Left(BIRTHDT,3) & "-1-" & Right(BIRTHDT,2))
5/1/1931 
```

因此，您可以在查询中使用该表达式。

```
SELECT CDate(Left(BIRTHDT,3) & "-1-" & Right(BIRTHDT,2))
FROM YourTable; 
```

# wpf - MVVM 模式矛盾——架构与展示？

> ID：12046589
> 
> 赞同：0
> 
> 时间：2012-08-20T23:28:09.453
> 
> 标签：wpf, mvvm, presentation-layer, architectural-patterns

什么是表示层模式/表示模式？据我所知，MVVM 是一种架构模式，但我看到很多人、文章、博客将其称为表示模式。我很困惑。

好像有点矛盾。如果它是一种架构模式，那么它应该处理我所有的表示层、业务逻辑层和数据访问层，对吗？我被允许使用我的实体框架生成的数据模型作为模型。但是，如果它是一个演示模式，我猜它应该只处理演示，那么我不应该使用 EF 生成的数据模型作为模型，因为它将从表示层访问我的数据访问层.

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:51:43.237

您的视图和视图模型通常位于架构的同一层。MVVM 的主要方面是交互黑白视图和视图模型。模型可能/可能不被视为位于单独的层中。

当您有一个与数据库、文件存储、服务等挂钩的复杂业务应用程序时，通常该模型成为后端的抽象表示。但在简单的情况下，比如 hello world 图像查看器——模型到底是什么？甚至可能没有。

大图 POV，整个视图 -> 虚拟机 -> 模型堆栈看起来像一个单层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-25T10:34:14.233

MVVM 是架构模式还是表示模式取决于涉及大量工作的层。

如果模型很容易通过一个层构建并可供 VM 使用，则 MVVM 是一种表示模式。在这种情况下，大部分工作将在 View 和 ViewModel 上。

MVVM 是一种架构模式，如果应用程序规模很大并且涉及许多层（分层架构），ViewModel 和数据之间的任何东西（如域层、数据库访问层、Web 服务层）都属于模型。

# java - jdbc基本我缺少什么参考

> ID：12046590
> 
> 赞同：-2
> 
> 时间：2012-08-20T23:28:15.133
> 
> 标签：java, netbeans, jdbc

新手：我只是想让下面显示的示例代码工作。我正在使用 Linux Ubuntu 12.04、NetBeans 7.2。文章链接在这里：

[http://docs.oracle.com/javase/tutorial/jdbc/overview/index.html](http://docs.oracle.com/javase/tutorial/jdbc/overview/index.html)

对于下面显示的红色波浪线，我收到“找不到符号”错误。我要做的就是让下面突出显示的一小段代码运行，就是这样。

![在此处输入图像描述](../Images/e182bd01d6c607c3af7f113d386feca1.png)

![在此处输入图像描述](../Images/ef7bf43023411e5e7d1cedfb2d1c1e1e.png)

![在此处输入图像描述](../Images/ec22e27b72d66cb05e070c7affaef95a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:58:02.513

将 import 语句添加到您的 Java 程序中，以在您的 Java 代码中导入所需的类。像这样导入 JDBC 包；

```
 import java.sql.*; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:33:48.953

正如网站上所说，该代码是一个片段，它不会自行运行，因为那里使用的某些类尚未在其他地方定义。

您将需要所有类（确保您有正确的导入和类路径）才能使其工作。

例子：

```
*Connection* con = (...) 
```

Connection 类在哪里定义？

# php - facebook.php 错误 - session_start() - 标头已发送

> ID：12046594
> 
> 赞同：-1
> 
> 时间：2012-08-20T23:28:31.247
> 
> 标签：php, facebook, facebook-php-sdk

我使用 php-facebook sdk 在 PHP 中编写了一个 facebook 应用程序，它在我的 Windows 7 wamp 上运行得非常好。

但是，现在我在 linux 上运行的 webspace 上实现了它，我得到了 session_start() cookie 错误。

```
Warning: session_start() [function.session-start]: Cannot send session cookie - 
headers already sent by (output started at /mydirectory/index.php:5) in 
/mydirectory/src/facebook.php on line 37 
```

我不明白为什么会遇到此错误。

下面是我的代码

```
<!DOCTYPE html PUBLIC  
"-//W3C//DTD XHTML 1.0 Transitional//EN"  
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<?php
    require_once('src/facebook.php');
    $app_id = "MY_APP_ID";
    $app_secret = "MY_APP_SECRET";

    $config = array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'fileUpload' => true,  
    'cookie' => true
    );
    $facebook = new Facebook($config);
    $user_id = $facebook->getUser();

 // other content

 ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T23:41:17.373

您不能在发送标头之前打印 HTML，正确的方法是

例子：

```
<?php
session_start();
//
require 'src/facebook.php';
$facebook = new Facebook(array(
  'appId'  => '135669679827333',
  'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxx',
  'cookie' => true, // enable optional cookie support
  ));
  try { $user = $facebook->getUser(); } catch (FacebookApiException $e) {  }
?>
<!DOCTYPE html>
<html>
<head><title></title>
<meta />
</head>
<body>
<content here>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:25:58.983

您的服务器*可能*需要打开一些端口，但您的远程服务器很可能只是具有与本地开发设置不同的错误报告设置。如果 Facebook API 生成错误，则会将其回显到页面并抢占任何标头，包括 cookie。您可以通过在 Facebook 方法调用前添加 @-symbols 来测试这一点，如下所示：

```
$facebook = new Facebook($config);
$user_id = @$facebook->getUser(); 
```

一个更强大、更持久的解决方案是`try {} catch (){}`Shawn E. Carter 建议的块。我的理论是 Facebook 每次都会抛出一个错误，并且由于您的本地配置，您没有注意到。解决此错误的原因应该是您的首要任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:56:22.487

虽然我没有得到它，但在打开 php 标签之前删除以下代码行和额外的空白行解决了这个问题。

```
<!DOCTYPE html PUBLIC  
 "-//W3C//DTD XHTML 1.0 Transitional//EN"  
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-04T15:28:22.627

另一种方法是这样的：

```
<?php
    ob_start();

?>

<!DOCTYPE html>
<html>
<head>
 <title></title>
<meta></meta>
</head>
<body>

<?php
require 'src/facebook.php';
//YOUR FACEBOOK methods here

?>

</body>
</html> 
```

# javascript - IE8 DOM 转换 XML 并从 jQuery find() 或 filter() 不返回任何内容

> ID：12046595
> 
> 赞同：2
> 
> 时间：2012-08-20T23:28:30.937
> 
> 标签：javascript, jquery, xml, dom, internet-explorer-8

我有一个页面正在获取 XML 文档，以便向页面添加表单。我的 XML 结构尽可能简化，如下所示：

```
<root><someXMLElement><input type="text"></input></someXMLElement></root> 
```

我可以毫无问题地获取 xml 字符串，这在 Chrome、FireFox、IE10 中都可以正常工作，但是当我在另一台机器上的 IE8 或 IE10 兼容性视图中打开页面时，我的 XML 正在转换为不可用状态，如下所示：

```
<DIV><INPUT type=text></INPUT/></HOFCDHIDDENINPUTS/></ROOT/></DIV> 
```

我最初是在获取我的 XML 响应并尝试通过它动态处理解析，而不是将它放在我文档的 DOM 中，如下所示：

```
var xml = http.responseText;
var xmlElements = $(xml).filter("root").html();
...do work on xmlElements 
```

但 $(xml).filter 或 $(xml).find 在 IE8 中都没有返回任何值。这似乎与： [jQuery .find() 在 IE 中不返回数据，但在 Firefox 和 Chrome 中返回数据](https://stackoverflow.com/questions/562283/jquery-find-doesnt-return-data-in-ie-but-does-in-firefox-and-chrome)非常相似， 但是即使我在不​​使用 ajax 的情况下内联编写我的 xml，并且只是尝试使用 jQuery ParseXML 或 ActiveX，这个问题仍然存在parser 没有解决这个问题。解析的 XML 仍然没有从 find() 返回任何内容。我在几个地方读到过关于innerHTML 的IE8 问题，所以我选择了变量中动态DOM 的替代解决方案。相反，我使用 document.createElement 创建了一个元素，将我的响应添加到该元素的 innerHTML，然后将其附加到文档本身，与[http://domscripting.com/blog/display/99相同](http://domscripting.com/blog/display/99)，我的代码的简化版本如下：

```
$(document).ready(function () {
            var XMLContainer = document.createElement("div");
            XMLContainer.innerHTML
= "<root><someXMLElement><input type=\"text\"></input></hofcdhiddeninputs></root>"
            document.body.appendChild(XMLContainer);
            var DOMAccessibleXML = $("body").find("root").html(); 
```

或 var DomAccessibleXML = document.body.getElementsByTagName[0].innerHtml });

我还尝试使用 innerText，以及使用 jQuery 创建元素并使用 append() 函数。结果到处都是一样的。我的 XML 被添加到我页面上的元素中，但是它在附加的某个点被转换为如下所示： 这个简单的 XML 并没有严重损坏，但即使在这里它也会在每个元素的末尾添加正斜杠。在某些情况下，它会完全忽略元素（在空元素的情况下）或简单地删除开始标签（不知道）。不管有没有 jQuery 都会发生这种情况，并且只在 IE8 中发生，这让我相信它是在追加期间发生的。附带说明一下，如果您提醒上面的 DomAccessibleXML，它会显示为空白，显示我之前的问题。

所以，如果可能的话，我需要的是能够使用 javascript 和 jQuery 遍历和操作 XML 文档的 DOM。如果解决方案是首先将 XML 添加到手头的页面，我需要一种不让 IE8 破坏它的方法。如果解决方案是创建一个动态 DOM，我需要一种让 jQuery find() 获取结果的方法，或者在没有 jQuery find 或 filter 的情况下检索值的替代方法。

非常感谢您的考虑。

编辑 1：Windows 7、IE8.0.7601、IIS 7.5.7600、jQuery 1.8.0 和 1.5.2 中存在的问题

编辑 2：我现在可以通过在示例代码中添加 xml 声明来解析 XML，但我仍然无法访问 innerHTML 或 getElementsByTagName。在下面的代码中，xmlDoc.documentElement.xml 返回正确的字符串，而 xmlDoc.documentElement.getElementsByTagName("root").length 返回 0。在这一点上，我相信我可以在避免使用 innerHTML 的纯 DOM 操作中完成此操作，但我非常希望不使用此约束重写所有内容。

```
var XMLContainer = document.createElement("div");
            var XMLContainer = "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><root><someXMLElement><input type=\"text\">text</input></someXMLElement></root>";
            var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.async = false;
            xmlDoc.loadXML(XMLContainer);
            alert(xmlDoc.documentElement.xml);
            alert(xmlDoc.documentElement.getElementsByTagName("root").length); 
```

编辑3：哦！documentElement 是指根。getElementsByTagName('someXMLElement') 按预期工作。如果我可以让我的更大的文档来解析这应该可以工作，但是除了 innerHTML 问题之外，我仍然想知道为什么 IE8 会破坏附加上的元素。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:00:38.750

XML 文档不是 HTML 文档。不要尝试将 XML 节点附加到 HTML 文档中；除非 XML 元素恰好对应于元素名称及其层次结构的有效 HTML 结构，否则它将不起作用，您的部分是这样，但只是部分。

但是，您应该能够直接使用 jQuery 操作 XML。说啊，

```
var jQueryXmlObject = $($.parseXML("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><root><someXMLElement><input type=\"text\">text</input></someXMLElement></root>")); 
```

而且你有一个 jQuery 对象，你可以在上面使用`.find()`或随心所欲地使用它。但请注意，这`.filter('root')`仍然不起作用 - 这是因为 jQuery 对象引用的是文档，而不是根元素。`.filter`不搜索 DOM，它只会减少 jQuery 对象中的“匹配元素”集合，这在此处不适用。

# maven - Findbugs 排除生成的文件

> ID：12046598
> 
> 赞同：11
> 
> 时间：2012-08-20T23:28:50.767
> 
> 标签：maven, ant, findbugs

我正在尝试从 findbugs 检查中过滤掉生成的文件，但我尝试的所有方法似乎都不起作用。在我的构建过程中，我创建了很多类，这些类最终都放在一个名为 src/generated 的文件夹中，我有兴趣过滤掉所有这些类。我正在使用maven，但我认为这并不重要。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:36:43.060

在不知道你尝试了什么的情况下，帮助它有点问题。

这是我们用来跳过 Avro 生成的代码中存在的一些错误模式的片段。

```
<FindBugsFilter>
  <Match>
    <!-- Avro generates redundant "implements" interface declarations -->
    <Or>
      <Package name="~com[.]foo[.]plugh[.]avro([.].*)?"     />
      <Package name="~com[.]foo[.]xyzzy[.]protocol([.].*)?" />
    </Or>

    <Or>
      <Bug pattern="RI_REDUNDANT_INTERFACES" />
      <Bug pattern="NM_CLASS_NAMING_CONVENTION" />
      <Bug pattern="REC_CATCH_EXCEPTION" />
    </Or>
  </Match>
</FindBugsFilter> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:26:35.933

下面介绍如何使用 Codehaus findbugs-maven-plugin。你包括你想要分析的包，而不是排除那些你不想分析的包。

```
<reporting>
    <plugins>
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>findbugs-maven-plugin</artifactId>
        <version>2.5.2</version>
        <configuration>
            <onlyAnalyze>com.company.util.*,com.company.myapp.*</onlyAnalyze>
        </configuration>
    </plugin>
    </plugins>
</reporting> 
```

# mysql - 将一个表的主 ID 插入另一个表

> ID：12046599
> 
> 赞同：3
> 
> 时间：2012-08-20T23:29:02.583
> 
> 标签：mysql, sql, sqlite, postgresql, web-sql

我需要一些有关如何在移动设备上为用户帐户设置数据库的帮助。我有 2 个表：登录和设置。

登录

```
id         1
username   test
password   pass 
```

设置

```
id(same key from login)  1
setting1                 0
setting2                 0
setting3                 0 
```

我有一个注册页面，我想将用户名、密码和自动增量主 ID 插入登录表，我想将**相同**的登录 ID、设置 1、设置 2、设置 3 插入设置表。谁能给出一个关于如何同时将登录 ID 插入两个表的示例查询？该领域的人通常如何设置用户帐户数据库？我将使用 web-sql，但您可以使用任何 sql 驱动程序或简单的图表/文本来回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T23:51:01.360

使用 PostgreSQL 9.1 或更高版本，您可以[在可写 CTE 中将数据修改语句链接在一起](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)

```
WITH x AS (
    INSERT INTO login(id, username, password)
    VALUES (1, 'test', 'pass')
    RETURNING id
    )
INSERT INTO settings(id, setting1, setting2, setting3)
SELECT x.id,0,0,0
FROM   x; 
```

这两个语句同时执行——或者准确地说是关闭。

此外，如果触发器或规则否决了输入，则此构造使用*实际* `id`保存的 in `login`，这可能与您提交的内容不同。它也可以用于串行主键（这是一个非常常见的用例）在多个表中插入新行，而无需事先知道新的 id。因此，无需额外往返服务器。

如果您的表`login`已定义：

```
CREATE TEMP TABLE login(id **serial**, username text, password text);
```

这会起作用：

```
WITH x AS (
    INSERT INTO login(username, password)
    VALUES ('test', 'pass')
    RETURNING id
    )
INSERT INTO settings(id, setting1, setting2, setting3)
SELECT x.id,0,0,0
FROM   x; 
```

# ssl - HttpComponents 自定义 SSLSocketFactory

> ID：12046602
> 
> 赞同：6
> 
> 时间：2012-08-20T23:29:13.483
> 
> 标签：ssl, keystore, apache-httpcomponents

[根据http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientCustomSSL.java](http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientCustomSSL.java)的示例

```
SSLSocketFactory socketFactory = new SSLSocketFactory(trustStore); 
```

应该使用我的自定义信任存储实例化 SSLSocketFactory，但是当我尝试构建我的项目时，我得到了错误

```
javax.net.ssl.SSLSocketFactory is abstract; cannot be intantiated 
```

示例是否已过时？它对其他人有用吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T00:52:58.293

这是[`org.apache.http.conn.ssl.SSLSocketFactory`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/conn/ssl/SSLSocketFactory.html)您应该使用的，而不是[`javax.net.ssl.SSLSocketFactory`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLSocketFactory.html)（请参阅`import`您正在使用的示例文件中的指令）。

请注意，如果您已经为此编写了现有代码，则前者具有可以使用后者的构造函数。但是，您通常会从 中获得自定义`javax.net.ssl.SSLSocketFactory`，因此在这种情况下`SSLContext`您不妨使用基于 - 的构造函数。`SSLContext`

# sql - 加入另一个表会导致总和更大

> ID：12046603
> 
> 赞同：-1
> 
> 时间：2012-08-20T23:29:13.213
> 
> 标签：sql, sql-server, sql-server-2008, tsql

当我将两个表连接在一起并得到总和时，我得到了正确的数字：

```
select 
    d.accn_id,
    cast(d.load_date as DATE) as LoadDate,
    cast (d.final_rpt_date as DATE) as FinalReportDate,
    sum(p.paid_amt) as SumPaidAmt

from
    accn_demographics d
join 
    accn_payments p
on 
    d.ACCN_ID=p.ACCN_ID
where 
    p.POSTED='y'
    and p.PMT_DATE between '20120501' and '20120531'

group by 
    d.accn_id,
    d.load_date,
    d.final_rpt_date 
```

但是在我加入另一个表 accn_payors 之后：

```
select 
    d.accn_id,
    cast(d.load_date as DATE) as LoadDate,
    cast (d.final_rpt_date as DATE) as FinalReportDate,
    sum(p.paid_amt) as SumPaidAmt
    ,payors.PAYOR_ID
from
    accn_demographics d
join 
    accn_payments p
on 
    d.ACCN_ID=p.ACCN_ID
left join 
    accn_payors payors
on  
    payors.X_PAYOR_ID=p.X_PRICED_PAYOR_ID 
    and payors.ACCN_ID = p.ACCN_ID
where 
    p.POSTED='y'
    and p.PMT_DATE between '20120501' and '20120531'

group by 
    d.accn_id,
    d.load_date,
    d.final_rpt_date
    ,payors.PAYOR_ID 
```

我夸大了`sum(p.paid_amt)`

问题是如何调整我的加入，以免我多次加入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:53:52.340

这可能有效，但我不知道是什么决定了您想要获得哪个 payor_id，所以 min() 可能不适合您，也许 max() 会？

```
SELECT * 

FROM (

select 
    d.accn_id,
    cast(d.load_date as DATE) as LoadDate,
    cast (d.final_rpt_date as DATE) as FinalReportDate,
    sum(p.paid_amt) as SumPaidAmt,
    min(p.X_PRICED_PAYOR_ID)

from
    accn_demographics d
join 
    accn_payments p
on 
    d.ACCN_ID=p.ACCN_ID
where 
    p.POSTED='y'
    and p.PMT_DATE between '20120501' and '20120531'

group by 
    d.accn_id,
    d.load_date,
    d.final_rpt_date
) payments
LEFT JOIN accn_payors payors
on  
    payors.X_PAYOR_ID=payments.X_PRICED_PAYOR_ID 
    and payors.ACCN_ID = payments.ACCN_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:55:07.350

您不需要加入 accn_payors，而是加入一个 SELECT 语句，该语句为每个 accn_id 返回一行。根据您的要求，这可能会起作用。

```
select accn_id, min(x_payor_id) x_payor_id
from payors
group by accn_id 
```

具有相同名称的别名`min(x_payor_id)`使其余代码无需修改即可工作。这可能是也可能不是一个好主意。这有点误导。

所以而不是这个。. .

```
left join 
    accn_payors payors
on  
    payors.X_PAYOR_ID=p.X_PRICED_PAYOR_ID 
    and payors.ACCN_ID = p.ACCN_ID 
```

你会这样做。. .

```
left join 
    (select accn_id, min(x_payor_id)
     from payors
     group by accn_id) payors
on  
    payors.x_payor_id = p.x_priced_payor_id
    and payors.accn_id = p.accn_id 
```

# html - 使用流体布局仅将父 div 中的一个 div 垂直居中

> ID：12046604
> 
> 赞同：0
> 
> 时间：2012-08-20T23:29:29.160
> 
> 标签：html, css, centering, fluid-layout

我试图在流畅的布局中居中文本元素，这意味着大小`<div>`不固定。

我找到了一个非常好的解决方案，可以让孩子`<div>`在`<div>`水平和垂直方向上居中，它的工作原理是：[fiddle](http://jsfiddle.net/Tagqe/1/)。（原文来自[本帖的第二种方法](http://css-tricks.com/centering-in-the-unknown/)）

但是，如小提琴所示，该`Large Text`元素并未完全垂直定位在 parent 的中心`<div class="block">`，而是整个 child`<div class="centered">`居中。

我尝试将两个文本元素分成两个单独`<div>`的元素，并将仅包含元素的`Large Text`元素居中。但是，它不起作用，因为第二个`<div>`包含`small text`被推出父级`<div class="block">`

那么我应该如何修改当前的居中解决方案，以便`Large Text`元素在 parent 中准确居中`<div class="block">`，同时仍然包含`small text`元素正下方的`Large Text`元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:42:34.890

`vertican-align`被引入 CSS 以替代`valign`表格的 HTML 属性。您会注意到，`display:inline-block;`不会创建表格单元格，并且根本不会真正居中`vertical-align`。如果您不太关心< IE8，您可以`display:table`在父母和孩子上使用。`display:table-cell`

除了上述之外，没有快速简便的方法可以在父母中居中。但是，如果您知道元素的高度，则可以使用 div 上的旧图像放置技巧。

```
<div>
    <p>Centred Text, Horizontal and Vertical</p>
</div> 
```

和 CSS

```
div {
    positon:relative;
    text-align:center;
    height:400px;
}

div p {
    position:relative;
    display:inline-block;
    height:30px;
    margin-top:-15px;
    top:50%;
    background-color:#cccccc;
} 
```

[小提琴示例](http://jsfiddle.net/Tagqe/2/)

如果这对您不起作用，您也可以定位`<p>`绝对，尽管您需要在没有 text-align:center 在父级和 display:inline-block 的帮助下将其水平居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:24:06.857

如果你还在寻找答案，我做了一个演示： [http ://dabblet.com/gist/3762377](http://dabblet.com/gist/3762377)

当然，您必须为大文本（我的演示中的'.title'）提供一个固定的高度。然后使用负边距将 .box 向上拉，其值等于 .title 的高度。

标记是：

```
<div class="container">

    <div class="box">
        <h1 class="title">Title</h1>
        <p>Some text</p>
    </div>

</div> 
```

CSS：

```
.container {
    display: inline-block;      
    text-align: center;
    }
    .container:before {
        content: '';
        height: 100%;
        display: inline-block;
        vertical-align: middle;
        margin-right: -4px;
        }

    .box {
        display: inline-block;
        vertical-align: middle;
        width: 400px;
        margin-top: 70px; /* Height of .title. In this case .title's line-height. */
        }
    .title {
        display: block;
        margin: 0;
        padding: 0;     

        line-height: 70px;/* This property could be either height or top,bottom padding. */ 
        } 
```

# arrays - 在matlab中将字符串转换为数字数组

> ID：12046605
> 
> 赞同：5
> 
> 时间：2012-08-20T23:29:32.497
> 
> 标签：arrays, string, matlab

我有一个脚本，其中输入了一串数字

```
string='123' 
```

或者

```
string='9823' 
```

我正在尝试将其转换为 [a,b,c,d] 形式的数组，例如从字符串 '123' 转换为数值数组 [1,2,3]

关于如何做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-20T23:34:41.137

```
str = '123';
num = str - '0';
% num = [1 2 3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T17:11:17.293

您可以使用 cellstr：

```
cellstr('123')
ans =
{
  [1,1] = 123
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T06:20:56.877

使用功能`str2num()`

```
str = '123';
str = str2num(str); 
```

注意：要验证我是否正确，请在命令窗口中输入“whos str”，然后检查类。字符串有一个类 char，而数值有一个类 double

# javascript - 让 moveTo 和 moveBy 在 chrome 上工作

> ID：12046607
> 
> 赞同：1
> 
> 时间：2012-08-20T23:30:02.527
> 
> 标签：javascript, google-chrome

我正在尝试获取本机功能`moveTo`并`moveBy`在 Chrome 上工作。[天真的事情](http://jsfiddle.net/W6QUY/)根本行不通。

我怎样才能获得Chrome`moveTo`并`moveBy`在 Chrome 上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T16:07:09.393

某些导航器的某些版本无法正确理解 moveTo(x, y)。该功能将您的新窗口正确放置在 Y 轴上，但不在 X 轴上。这可能是因为您有多个显示器。您可以改用 moveBy(x, y) 绕过此问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T23:55:24.037

谁说他们不能在 chrome 中工作？

在你的 chrome 上测试

[http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_canvas_moveto](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_canvas_moveto) [http://www.w3schools.com/js/tryit.asp?filename=try_win_moveby](http://www.w3schools.com/js/tryit.asp?filename=try_win_moveby)

# c# - 设置默认 FlowDirection Wpf 工具包扩展 MessageBox

> ID：12046609
> 
> 赞同：0
> 
> 时间：2012-08-20T23:30:10.377
> 
> 标签：c#, wpf, wpftoolkit

我无法**动态**设置 WPF Toolkit Extended 1.6 MessageBox 的默认 flowdirection 属性，知道我有一个静态字段，有没有办法在代码和运行时做到这一点`myFlowDirection`

我已经尝试过**它的工作正常**并且它改变了流程但我需要它**动态**

```
 <Style TargetType="{x:Type toolkit:MessageBox}">
        <Setter Property="FlowDirection"  Value="RightToLeft"/>
        </Style> 
```

此 MessageBox 无法派生且没有构造函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:51:32.807

只是一个猜测，但是您是否尝试过绑定 Setter 属性？

此链接是来自 SO 的问题，听起来与您的相似：

[WPF 绑定到样式中另一个属性的绑定](https://stackoverflow.com/questions/1793723/wpf-binding-to-another-propertys-binding-in-a-style)

这是另一个例子：

[http://forums.silverlight.net/t/130096.aspx/1](http://forums.silverlight.net/t/130096.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-28T21:58:54.257

是的，您可以通过*MessageBoxOptions.RtlReading设置消息框***FlowDirection**

 *例如：

`MessageBox.Show("Your RTL Text", "Message Box Title", MessageBoxButton.OK, MessageBoxImage.Error, MessageBoxResult.None, MessageBoxOptions.RtlReading);`*

# html - 这是什么语言/语法？

> ID：12046611
> 
> 赞同：0
> 
> 时间：2012-08-20T23:30:47.173
> 
> 标签：html

如果这是一个超级菜鸟问题，我深表歉意，但我似乎无法以任何其他方式找到答案。

我试图弄清楚我在看什么样的语言/语法。我正在尝试对我公司的在线商店进行一些更改。我们使用 3dCart。3dCart 让我编辑“模板”。这里有几行。

```
 <!--START: items-->
<tr class="report-font1">
    <td valign="top" align="left" width="15%">[id]</td>
    <td valign="top" align="left" width="53%">[itemname]</td>
    <td valign="top" align="right" width="19%">[itemdescription]</td>
    <td valign="top" align="center" width="9%">[numitems]</td>
</tr>
<!--END: items--> 
```

当我查看实际的 HTML 页面时，括号中的值被填充。这些值来自哪里？php 或 asp 似乎没有正确的语法（没有“echo”或“print”）此外，START 和 END 必须具有一定的意义，因为即使它们只使用一次，它们之间的代码对每个项目重复。

那么有什么东西在解析代码吗？这是一种常见的做法吗？使用什么语言/方法？我觉得它很酷，想学习如何使用它，但我不知道从哪里开始。非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:37:54.230

你自己说的，瓦伦蒂娜斯也是。它是[3dCart](http://www.3dcart.com/guide/)模板引擎。查看指南并向下滚动到介绍部分。您会看到一个与您发布的内容相似的标记块。

看起来他们的网站上有各种[支持选项](http://www.3dcart.com/support.htm)。

# ruby-on-rails - 访问从数据库返回的哈希中的数据

> ID：12046614
> 
> 赞同：1
> 
> 时间：2012-08-20T23:30:56.647
> 
> 标签：ruby-on-rails, ruby, hash

我是一名 PHP 开发人员，正在研究 Ruby on Rails。我正在开发一个项目，其中字符串集合被序列化并存储在数据库中。我正在尝试访问该数据，但是在我正在编写的邮件程序类中但遇到了麻烦。在从数据库中取出数据的模型内部，我可以使用 访问我需要的内容`email.attr(key,'subject')`，但是当我将电子邮件变量传递给邮件程序类并尝试在邮件程序类中使用相同的访问方法时，我得到一个`"undefined variable 'key'"`错误信息。

这是我运行 email.inspect 时的数据转储。

```
{"subject"=>"Subject of Email", "intro"=>"Welcome"} 
```

我在 Google 中的搜索结果没有返回任何有用的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:40:46.083

通常，您可以通过执行以下操作来访问散列中的数据：

```
email["subject"] 
```

在您的情况下，看起来电子邮件对象具有属性，因此它不是散列而是实际对象。在这种情况下，假设你有一个 attr_reader 用于主题和介绍，你会这样做：

```
email.subject 
```

但是，我认为您上面示例中的错误可能是 b/c 方法调用中的“键”一词没有被引用（因此，它将它视为一个变量）。只是一个猜测，因为我从未见过通过 attr 方法访问的属性。

# mercurial - 如何防止被忽略的文件被删除？

> ID：12046617
> 
> 赞同：0
> 
> 时间：2012-08-20T23:31:15.343
> 
> 标签：mercurial

几个月前，我在默认分支上对项目设置文件夹进行了版本控制，然后随着时间的推移创建了许多默认分支。现在我决定我宁愿不控制项目设置文件夹的版本，因为它在分支之间切换时会产生很多问题。

所以我已经有了`hg forget`这个项目设置文件夹，它可以让我将文件保存在我的本地机器上，但会删除它们。但是，当从仍然具有此文件夹版本的旧分支之一切换回默认分支时，它实际上会从本地计算机中删除文件，这很糟糕。

我该如何防止呢？

该文件夹现在也处于`.hgignore`默认状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:47:37.677

这是不可能的。

但是通常的做法是`config.ini.dist`在您检查源代码后立即保存在您的存储库中并通过某些构建系统构建特定于环境的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:27:51.730

处理这个问题的标准方法是对**模板配置文件**进行版本控制并忽略真正的配置文件。然后真正的配置文件可以包含模板文件，或者模板文件有时会被复制一次。

您的问题的根本原因是运行：

```
$ hg forget config.ini 
```

与运行**完全相同**：

```
$ hg remove config.ini
$ hg cat config.ini > config.ini 
```

忘记命令将文件留在您的工作目录中，但您提交的仍然是文件删除。这意味着之后，Mercurial 无法区分“文件被遗忘”和“文件被删除”——只有删除被提交，所以这两个命令看起来完全一样。

# c - 我非常简单的 C 程序无法编译。任何的想法？

> ID：12046618
> 
> 赞同：1
> 
> 时间：2012-08-20T23:31:18.503
> 
> 标签：c, visual-studio-2010

这是我看起来很无辜的程序

```
int main(int argc, char* argv[])
{
    if(argc < 3)
    {
        printf("Sorry");
        return 0;
    }

    char key[]= "45WPbZNljDN6CUCUU6ga";
    FILE* inpFile = fopen(argv[1],"r");
    FILE* outFile = fopen(argv[2],"w");
    if(!inpFile || !outFile)
    {
        printf("oops");
        return 0;
    }

    enc(inpFile,outFile,key);
    fclose(inpFile);
    fclose(outFile);
} 
```

enc() 在别处定义，但这不是问题。当我尝试使用 VS2010 命令提示符进行编译时，一切都变得疯狂。但是，当我删除参数检查块时，它编译得很好。

```
int main(int argc, char* argv[])
{
    char key[]= "45WPbZNljDN6CUCUU6ga";
    FILE* inpFile = fopen(argv[1],"r");
    FILE* outFile = fopen(argv[2],"w");
    if(!inpFile || !outFile)
    {
        printf("oops");
        return 0;
    }

    enc(inpFile,outFile,key);
    fclose(inpFile);
    fclose(outFile);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T23:33:16.200

如果编译成C程序（VS2010后缀为.c），在可执行语句后声明变量是无效的。您需要将声明（`key`、、`inpFile`和`outFile`）全部移到`main`（在第一个`if`语句之前）的前面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T23:36:26.087

Microsoft C 编译器遵循旧的 C 语言标准，其中变量声明必须在任何其他语句之前完成（严格的 C89）。第二次编译的原因是首先声明了变量。我建议声明你的变量（不初始化）然后进行检查，然后最后初始化你的 2 个文件指针。

# mysql - 当通过 Hibernate 使用 TemporalType.Time 时，12:00:00 在 MySql 中存储为 00:00:00

> ID：12046623
> 
> 赞同：1
> 
> 时间：2012-08-20T23:32:01.687
> 
> 标签：mysql, hibernate, jpa

我在我的应用程序中使用 Hibernate 来存储“时间”（小时、分钟、秒）。我正在使用 Hibernate 来管理我的实体。我在我的实体中使用了 JPA 注释 @TemporalType.Time，如下所示：

```
@Temporal(TemporalType.TIME)
public Date getTime_out() {
    return time_out;
} 
```

我正在存储从 Web 服务请求中获得的字符串形式的时间，如下所示：

```
 DateFormat df = new SimpleDateFormat("hh:mm:ss");
            Date date = null;
            try {
                date = df.parse(timeHHMM);
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

我希望 Web 请求采用特定格式（我知道这可能不是正确的做法，但我只是在进行试验）。将字符串转换为日期后，我在实体上设置时间并将其保存在数据库中。

当我的输入为 08:00:00 时，它按预期存储为 08:00:00。当它是 13:00:00（下午 1 点）时，它存储为 13:00:00，这是我想要的。但是，当我的输入是 12:00:00（下午 12 点）时，它存储为 00:00:00。

我在这里错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:21:54.143

您使用了错误的日期格式。`hh`以 am/pm 格式指定一个小时，因此 12:00:00 默认为 12am (00:00:00)。

你需要：

```
SimpleDateFormat("HH:mm:ss") 
```

# grails - Grails 域中的枚举

> ID：12046624
> 
> 赞同：14
> 
> 时间：2012-08-20T23:32:06.723
> 
> 标签：grails, groovy

我正在尝试`enum`在 Grails 2.1 域类中使用。我正在通过`grails generate-all <domain class>`命令生成控制器和视图，当我访问视图时，出现如下所示的错误。我在这里想念什么？

**错误**

```
Failed to convert property value of type java.lang.String to required type 
com.domain.ActionEnum for property action; nested exception is 
java.lang.IllegalStateException: Cannot convert value of type 
[java.lang.String] to required type [com.domain.ActionEnum] for property action: 
no matching editors or conversion strategy found 
```

**枚举** （在`/src/groovy`）

```
package com.domain

enum ActionEnum  {
    PRE_REGISTER(0), PURCHASE(2)

    private final int val
    public ActionEnum(int val) {
        this.val = val
    }

    int value() { return value }
} 
```

**领域**

```
package com.domain

class Stat {
    ActionEnum action

    static mapping = {
        version false
    }
} 
```

**看法**

```
<g:select name="action" 
    from="${com.domain.ActionEnum?.values()}"
    keys="${com.domain.ActionEnum.values()*.name()}" required="" 
    value="${xyzInstance?.action?.name()}"/> 
```

* * *

**编辑**

现在`Property action must be a valid number`更改以下内容后出现错误。

**看法**

```
<g:select optionKey='id' name="action" 
from="${com.domain.ActionEnum?.values()}" 
required="" 
value="${xyzInstance?.action}"/>  // I tried simply putting a number here 
```

**枚举**

```
package com.domain

enum ActionEnum  {
    PRE_REGISTER(0), PURCHASE(2)

    final int id
    public ActionEnum(int id) {
        this.id = id
    }

    int value() { return value }

    static ActionEnum byId(int id) {
        values().find { it.id == id }
    } 
} 
```

**领域**

```
package com.domain.site

class Stat {
    static belongsTo = Game;

    Game game
    Integer action

    static mapping = {
        version false
   }

    static constraints = {
        action inList: ActionEnum.values()*.id
    }

    String toString() {
        return "${action}"
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-21T00:04:41.123

看看这里...

[Grails 枚举映射](https://stackoverflow.com/questions/3748760/grails-enum-mapping)

[Grails GORM 和枚举](https://stackoverflow.com/questions/1969448/grails-gorm-enums)

你也可能会遇到这个问题。从文档：

1) Enum 类型现在使用它们的 String 值而不是序数值进行映射。您可以通过如下更改映射来恢复旧行为：

```
static mapping = {
    someEnum enumType:"ordinal"
} 
```

# php - WHERE 子句中带有数组的 SELECT 语句

> ID：12046627
> 
> 赞同：1
> 
> 时间：2012-08-20T23:32:23.550
> 
> 标签：php, mysql

无论用户是否登录，我都在尝试跟踪我网站上的综合浏览量，因此我在我的日志中捕获了 sessionId。我只想显示在某个时间点登录的会话 ID 的跟踪结果，因此我的流程如下：

```
$pagestats = $wpdb->get_results("SELECT * FROM wp_user_stats WHERE uid=".$_GET['viewstats']);
$sessionArray = array();

foreach($pagestats as $checkSession)
{
    if( !(in_array($checkSession->sessionId, $sessionArray)))
    {
        $sessionArray[] = $checkSession->sessionId;
        }
    } 
```

接下来，我正在尝试收集有关此特定用户生成的任何会话 ID 的所有统计信息...

```
$sessions = join(',',$sessionArray);
$pagestats = $wpdb->get_results("SELECT * FROM wp_user_stats WHERE `sessionId` IN($sessions)") or die(mysql_error()); 
```

这是引发错误的部分。错误是：

```
Unknown column 'sjhntmqhltknks8pbhr750voe7' in 'where clause' 
```

我不明白为什么它试图找到与会话 ID 匹配的列，而不是该列中的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:41:55.353

会话 ID 可能没有被引用，因此查询看起来像`WHERE sessionID IN(abc, def, ...)`.

解决此问题的一种方法是在第一个循环中更改一行：

`$sessionArray[] = "'".$checkSession->sessionId."'";`

或者，您可以使用引用的值创建第二个数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T23:45:20.287

问题是会话 id 不是数字，需要用引号括起来。类似以下内容会为您的`$sessions`字符串添加正确的引号：

`$sessions = "'" . implode("', '", $sessionArray) . "'";`

您还应该确保`$_GET['viewstats']`在使用它们之前转义任何用户提供的输入（例如 ），以帮助避免 SQL 注入攻击。`$checkSession->sessionId`当您将其添加到`$sessionArray`数组中时，逃脱也不会受到伤害。

如果您使用的是框架（看起来您可能正在使用 WordPress），请阅读数据库组件的手册，因为它可能会提供一些功能来为您处理其中的一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T23:45:13.490

我认为您需要在会话值周围加上引号

```
$sessions = "'".join("','",$sessionArray)."'"; 
```

现在它就像`WHERE IN (a,b,c)`而不是`WHERE IN ('a','b','c')`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T23:38:15.010

```
$pagestats = $wpdb->get_results("SELECT * FROM wp_user_stats WHERE `sessionId`=$sessions") or die(mysql_error()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T00:41:11.557

这不是对特定问题的回答，但第二个`SELECT`陈述不是不必要的吗？如果它全部存储在一个表中（除非有错字...），那么`SELECT * FROM wp_user_stats WHERE uid=$_GET['view_stats']`将检索该用户的所有会话。也许您需要为多个用户完成它？即使那样，你也可以简单地做一个`GROUP BY`子句。

也许我错过了一些东西——如果是这样，对不起。

# c++ - 访问者接口的私有继承如何允许可访问对象访问访问私有访问实现？

> ID：12046631
> 
> 赞同：1
> 
> 时间：2012-08-20T23:32:48.387
> 
> 标签：c++, inheritance, private, visitor-pattern

下面的代码显示了一个类，该类从一个接口私有继承，该接口在不授予调用对象友谊的情况下访问其私有函数。我对此感到困惑，但真的看不出编译器能提出什么更好的解决方案（代码编译和运行）。为什么这行得通？

```
#include <iostream>

class IVisitor;

class IVisitable
{
public:
    virtual void Accept(IVisitor& visitor) const = 0;
};

class VisitableA;
class VisitableB;

class IVisitor
{
public:

    virtual void Visit(const VisitableA& a) = 0;

    virtual void Visit(const VisitableB& b) = 0;
};

class VisitableA : public IVisitable
{
public:
    virtual void Accept(IVisitor& visitor) const
    {
        visitor.Visit(*this);
    }
};

class VisitableB : public IVisitable
{
public:
    virtual void Accept(IVisitor& visitor) const
    {
        visitor.Visit(*this);
    }
};

class PrivateVisitor : private IVisitor
{
public:
    PrivateVisitor(IVisitable& v)
    {
        v.Accept(*this);    
    }

private:

    virtual void Visit(const VisitableA& a)
    {
        std::cout << "I saw A\n";
    }

    virtual void Visit(const VisitableB& b)
    {
        std::cout << "I saw B\n";
    }
};

int main(int argc, char* argv[])
{
VisitableA a;
VisitableB b;

PrivateVisitor p_a(a);
PrivateVisitor p_b(b);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T23:51:03.260

访问说明符仅在编译时检查，并在其中检查应用它们的对象的静态类型。

在`PrivateVisitor`构造函数内部，`*this`对象被强制转换为`IVisitor`. 在这种情况下，继承的类型无关紧要，因为我们在`PrivateVisitor`类型之内，所以我们有完全的访问权限。

该对象在`IVisitable`对象（`VisitableA`或`VisitableB`）内部使用并`Visit`调用成员函数。虽然对象的*动态*类型是`PrivateVisitor`，但*静态*类型是`IVisitor`（引用类型是`IVisitor&`）。`IVisitor`针对两个`Visit`重载都是*public*的类检查访问说明符，因此编译器接受调用。

*函数在最终覆盖器中是私有*的这一事实并不重要，因为访问是通过基类执行的，其中函数是*public*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:38:05.707

这里重要的私人是这个：

```
PrivateVisitor : private IVisitor 
```

幸运的是，将 PrivateVisitor 强制转换为 IVisitor 的唯一地方是构造函数：

```
PrivateVisitor::PrivateVisitor(IVisitable& v)
{
    v.Accept(*this);
} 
```

并且构造函数可以访问该类的私有基。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:35:00.897

private 在类范围内，而不是在对象范围内。

# html - 在您开始输入之前，输入字段上的 CSS 文本缩进不会更新插入符号的位置

> ID：12046638
> 
> 赞同：7
> 
> 时间：2012-08-20T23:33:55.687
> 
> 标签：html, css, html-input, text-indent

当我在 CSS 中使用 text-ident 属性时，我期望看到的是当您将注意力集中到文本输入区域时，文本光标图标/插入符号将显示为缩进。但它似乎在您输入第一个字符之前没有缩进。唯一的解决方法是在输入元素上使用左填充，但我想避免使用填充，因为我也在设置宽度并且不想使用 IE 特定的电子表格为 IE 实现填充修复。

这个错误发生在 Safari 中。

请参阅下面的图片，了解我正在谈论的内容。

在没有文本时聚焦，文本标识不会影响插入符号的位置：

![专注](../Images/b40f20c2c2b4b37467ed5d97bdaffe0e.png)

当您开始输入时，它会正确缩进：

![当你开始打字时](../Images/e3920dc63c65b3ecb7e80b9d13657f51.png)

在您输入然后删除您输入的内容后，它会从头开始显示我希望它执行的操作（缩进插入符号）。

![删除您输入的内容后](../Images/7586e36f16a5de49551a3ac5c10b295a.png)

HTML：

```
<input type="text" /> 
```

CSS：

```
input   { text-indent: 10px; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T00:33:02.527

这是一个已确认的 WebKit 错误，最近已解决[https://bugs.webkit.org/show_bug.cgi?id=82688](https://bugs.webkit.org/show_bug.cgi?id=82688)

您的 Safari 版本可能太旧，无法包含此修复程序。

使用 padding-left 代替。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-15T11:05:55.433

```
<style>
::-webkit-input-placeholder {text-indent:10px!important;}
:-moz-placeholder { text-indent:10px!important;}
::-moz-placeholder {text-indent:10px!important;}
:-ms-input-placeholder {text-indent:10px!important;}
</style> 
```

这允许文本缩进集中缩进，我相信这已在较新版本的 webkit / safari 中得到修复。但是，此修复程序应该可以帮助您使用旧版本。

谢谢

# c++ - 如何知道正在使用的微软 C 运行时的版本？

> ID：12046639
> 
> 赞同：2
> 
> 时间：2012-08-20T23:34:00.580
> 
> 标签：c++, c, windows, msvcrt

我有一个程序，它依赖于`MSVCR90.dll`我与主要可执行文件一起提供的库：

```
ProgramFolder\Main.exe
ProgramFolder\MSVCR90.dll 
```

我想知道当有新的更新可用（例如修复安全问题）时，我提供的更新是否会优先于`System32`或`SxS`.

有没有办法以编程方式知道正在使用哪个版本的 C 运行时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:41:32.857

您可以检查[可执行文件的导入标头](http://www.codeproject.com/Articles/36928/Parse-a-PE-EXE-DLL-OCX-Files-and-New-Dependency-Wa)以查找它引用了哪个版本的 C 运行时。从 system32 目录中删除它不会有帮助，而是会造成崩溃。

# macos - vnode_t 在哪里定义？

> ID：12046641
> 
> 赞同：2
> 
> 时间：2012-08-20T23:34:41.547
> 
> 标签：macos, darwin, xnu

我正在尝试使用`vnode_t`定义为`struct vnode *`. 我可以找到很多引用，`struct vnode`但我找不到定义的标题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:38:15.697

它在`bsd/sys/vnode_internal.h`文件中。我的源代码中的第 134 行。

从我所做的测试来看，vnode 似乎在系统头文件中未定义并在运行时链接，因为不需要 vnode 的定义，因为除了内核函数本身之外，没有直接修改内部结构的指针被传递。它在头文件中前向声明（现在忘记了）。

真正的定义可以在[http://elephant.cs.fiu.edu/source/xref/xnu-1699.24.23/bsd/sys/vnode_internal.h#134中找到](http://elephant.cs.fiu.edu/source/xref/xnu-1699.24.23/bsd/sys/vnode_internal.h#134)

# antlr - antlr，如何修复语法（varname）？如果存在但错误则解析失败

> ID：12046647
> 
> 赞同：2
> 
> 时间：2012-08-20T23:35:13.293
> 
> 标签：antlr

我正在重写这篇文章（虽然同样的问题，更少的话）。

我重写了我的语法，只在顶层有这个

```
statement: SELECT EOF!;
#removed all other rules and tokens and still not working
SELECT  :   ('S'|'s')('E'|'e')('L'|'l')('E'|'e')('C'|'c')('T'|'t'); 
```

然后我有以下java代码（我的解析器上没有解析方法，就像我在其他人的帖子上看到的那样:(:()...

```
@Test
public void testGrammar() throws RecognitionException {
    String sql = "select p FROM TABLE p left join p.security s where p.numShares = :shares and s.securityType = :type";

    ANTLRStringStream stream = new ANTLRStringStream(sql);
    NoSqlLexer lexer = new NoSqlLexer(stream);
    CommonTokenStream tokenStream = new CommonTokenStream(lexer);
    NoSqlParser parser = new NoSqlParser(tokenStream);

    try {
        CommonTree tree = (CommonTree) parser.statement().getTree();
        Assert.fail("should fail parsing");
    } catch(Exception e) {
        log.info("Exception", e);
    }
} 
```

我应该在解析时得到一个异常，但我没有:( :(。这是一个非常简单的带有 EOF 的语法，但它只是不起作用。有什么想法吗？我是在调用错误的解析语句吗？

注意：我试图通过将问题简化为似乎不起作用的简单事情来简化更大的问题。

完整的（非常小的）语法文件在这里

```
grammar NoSql;

options { 
    output = AST; 
    language = Java;
}

tokens {

}

@header {
package com.alvazan.orm.parser.antlr;
}

@lexer::header {
package com.alvazan.orm.parser.antlr;
}

@rulecatch {
    catch (RecognitionException e)
    {
        throw e;
    }
}

statement: SELECT EOF!;

SELECT  :   ('S'|'s')('E'|'e')('L'|'l')('E'|'e')('C'|'c')('T'|'t');

WS  :
    (   ' '
        |   '\t'
        |   '\r'
        |   '\n'
        )+
        { $channel=HIDDEN; }
        ;  

ESC :
    '\\' ('"'|'\''|'\\')
    ; 
```

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:30:31.017

> 我应该在解析时得到一个异常，但我没有:( :(。这是一个非常简单的带有 EOF 的语法，但它只是不起作用。

如果您没有“告诉”ANTLR 抛出异常，那么 ANTLR 可能不会在输入无效的情况下抛出异常/错误。在许多情况下，ANTLR 会尝试从不匹配/无效的输入中恢复并尝试继续解析。您*将*看到输出写入`stderr`您的案例，但您可能不会遇到异常。

如果您*确实*需要异常，请参阅：[ANTLR not throwing errors on invalid input](https://stackoverflow.com/questions/8658753/antlr-not-throwing-errors-on-invalid-input)

# dojo - foreach 循环是否直接与 JSonStore 数据对象存储一起使用？

> ID：12046648
> 
> 赞同：0
> 
> 时间：2012-08-20T23:35:36.183
> 
> 标签：dojo, jsonstore

我用 JSON 格式的对象数组创建了一个 JSONStore。我已经验证它的格式正确。

然后我尝试在其上使用 dojo forEach 循环，但 JSonStore 似乎没有任何数据。我可以在我的网页 URL 中指定目标，它会显示正确的数据。但是使用 console.log(myJsonStore) 会显示一个对象，但我在 Firebug 中看不到数据。对于提供数据的服务，我也看不到任何 GET。这就像在浏览器中的 URL 中指定目标路径会触发 GET，但当我尝试在我的 foreach 所在的 postCreate 中触发它时不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:44:27.720

你可以这样做：

```
var storeObj = new JsonRest({
    target: "/some/resource"
});
storeObj.query({}).forEach(function(obj){console.log(obj);}); 
```

这应该够了吧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:59:03.427

我相信里卡多的回答有点不正确，因为 JsonRest.query 函数返回一个 dojo.Deferred。

您通过存储读取 api 异步进行 REST 调用 - 一旦它返回值，它将承诺运行设置为回调的内容。

试试这个为你的循环迭代器

```
storeObj.query( {} ).then(function ( results ) {
  dojo.forEach( results, function( obj ) {
    console.log( obj );
  });
} 
```

# c# - 如何使 decimal.Parse 接受多种文化

> ID：12046655
> 
> 赞同：6
> 
> 时间：2012-08-20T23:37:11.040
> 
> 标签：c#, windows-phone-7

我需要在我的应用程序中接受 3 种十进制数据格式：

*   123456,78 => 123456.78
*   123,456.78 => 123456.78
*   123456.78 => 123456.78

我不能假设在特定情况下会使用一种格式。我需要的是从字符串中获取十进制值，无论它以哪种格式给出。

有没有聪明的方法来做到这一点？

我试图使用

```
var culture = CultureInfo.CreateSpecificCulture("en-US"); 
```

但这似乎不适用于 wp7。

到目前为止，我已经这样做了：

```
public static class Extensions
{

    public static decimal toDecimal(this string s)
    {
        decimal res;

        int comasCount=0;
        int periodsCount=0;

        foreach (var c in s)
        {
            if (c == ',')
                comasCount++;
            else if (c == '.')
                periodsCount++;
        }

        if (periodsCount > 1)
            throw new FormatException();
        else if(periodsCount==0 && comasCount > 1)
            throw new FormatException();

        if(comasCount==1)
        {
            // pl-PL
            //parse here
        }else
        {
            //en-US
            //parse here
        }

        return res;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T00:12:37.150

尝试使用`var culture = new CultureInfo("en-US");`来创造文化。将该文化传递给`decimal.Parse`或`decimal.TryParse`将为每种文化适当地解析文本。

现在，请记住，每种文化都可以毫无问题地解析文本，但不会按照原始文化所代表的方式解析它。例如`decimal.TryParse("1000,314", NumberStyles.Number, new CultureInfo("en-US"), out result)`将导致成功和 1000314m，而不是 1000.314m。而`decimal.TryParse("1000,314", NumberStyles.Number, new CultureInfo("fr-FR"), out result)`将导致1000.314m。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T00:34:36.663

你可以尝试这样的事情：

```
public static decimal ParseDecimalNumber( string s , string groupSeparators , string decimalPoints )
{
  NumberFormatInfo nfi   = (NumberFormatInfo) CultureInfo.InvariantCulture.NumberFormat.Clone() ;
  NumberStyles     style = NumberStyles.AllowLeadingWhite
                         | NumberStyles.AllowLeadingSign
                         | NumberStyles.AllowThousands
                         | NumberStyles.AllowDecimalPoint
                         | NumberStyles.AllowTrailingSign
                         | NumberStyles.AllowTrailingWhite
                         ;
  decimal          value ;
  bool             parsed = false ;

  for ( int i = 0 ; !parsed && i < groupSeparators.Length ; ++i )
  {

    nfi.NumberGroupSeparator = groupSeparators.Substring(i,1) ;

    for ( int j = 0 ; !parsed && j < decimalPoints.Length ; ++j )
    {
      if ( groupSeparators[i] == decimalPoints[j] ) continue ; // skip when group and decimal separator are identical

      nfi.NumberDecimalSeparator = decimalPoints.Substring(j,1) ;

      parsed = Decimal.TryParse( s , style , nfi , out value ) ;

    }
  }

  if ( !parsed ) throw new ArgumentOutOfRangeException("s") ;

  return value ;

} 
```

用法很简单：

```
string groupSeparators = "., " ;
string decimalPoints   = ".,"  ;
Decimal value = ParseDecimalNumber( someStringContainingANumericLiteral , groupSeparators , decimalPoints ) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:48:47.463

三个不同的[TryParse](http://msdn.microsoft.com/en-us/library/ew0seb73)调用`NumberStyles`并`IFormatProvider`设置为 null 应该可以做到这一点。

# python - 守护进程上下文不会在函数内部运行

> ID：12046670
> 
> 赞同：2
> 
> 时间：2012-08-20T23:38:28.233
> 
> 标签：python, function, daemon

我正在为程序创建一个 python 桥。我正在使用 pipi 守护程序模块来防止锁定。 [http://pypi.python.org/pypi/python-daemon/](http://pypi.python.org/pypi/python-daemon/)

我基本上想最终把它放在一个模块中以便于重用并构建一个 python 包装器。

在测试中，如果我将守护进程上下文放在一个函数中，它将不起作用。如果我把它放在函数之外，它可以完美地工作。

```
def createCube():
    prog('create cube/params')

def runFunc(func):
    with daemon.DaemonContext():
        prog = createConnection().command #our port connection system
        func()
        sys.exit()

runFunc(createCube) 
```

我想不出为什么它在函数外部正常工作时不能在函数内部工作的原因，除非它正在寻找命名空间机会？

任何帮助，将不胜感激。非常感谢！

# c# - DevExpress ASPxPivotGrid.CustomCellStyle 事件：根据其他单元格的值更改单元格的样式

> ID：12046671
> 
> 赞同：1
> 
> 时间：2012-08-20T23:38:54.467
> 
> 标签：c#, asp.net, devexpress

我需要根据多个单元格的值更改单元格的背景。伪代码示例：

```
Percentage = Actual Value / Target Value

IF (Percentage < 33)
 Cell Color = Red
ELSE IF (Percentage < 66)
 Cell Color = Orange
ELSE
 Cell Color = Green 
```

我找到了这个：

[http://documentation.devexpress.com/#AspNet/DevExpressWebASPxPivotGridASPxPivotGrid_CustomCellStyletopic](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxPivotGridASPxPivotGrid_CustomCellStyletopic)

这很好，但它没有显示从同一行中的另一个单元格获取值的示例。我需要一个例子，上面的链接确实说这是可能的：

“...允许您动态自定义单元格的外观（取决于它们的内容、位置、**其他单元格的值**等...”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:58:55.087

知道了：

```
decimal target = Convert.ToDecimal(e.GetFieldValue(fieldTarget));
decimal value = Convert.ToDecimal(e.Value);
decimal percent = (value / target) * 100; 
```

其中 fieldTarget 是 a 的一个实例`DevExpress.Web.ASPxPivotGrid.PivotGridField`

然后使用该值设置背景颜色..

# ruby - 有人可以解释一下在 Ruby 中注入的真实、简单的语言用法吗？

> ID：12046673
> 
> 赞同：6
> 
> 时间：2012-08-20T23:39:30.723
> 
> 标签：ruby, inject

我正在学习 Ruby，遇到了注入。我正处于理解它的风口浪尖，但是当我是那种需要真实世界的例子来学习一些东西的人时。我遇到的最常见的例子是人们使用注入来将 (1..10) 范围的总和相加，我不太关心。这是一个随意的例子。

在实际程序中我会用它做什么？我正在学习，所以我可以继续使用 Rails，但我不必有一个以 Web 为中心的示例。我只需要一些有目的的东西，我可以把头绕起来。

谢谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T23:46:33.920

`inject`有时可以通过它的“其他”名称更好地理解`reduce`。它是一个对 an 进行操作`Enumerable`（迭代一次）并返回单个值的函数。

有许多有趣的方法可以使用它，尤其是与其他`Enumerable`方法链接时，例如`map`. 很多时候，它可以是一种更简洁、更有表现力的做事方式，即使有另一种方式来做。

像这样的例子一开始可能看起来没什么用：

```
range.inject {|sum, x| sum += x} 
```

然而，变量`range`不必是一个简单的显式范围。它可以是（例如）从数据库返回的值列表。如果您运行一个返回购物车中价格列表的数据库查询，您可以`.inject`将它们全部相加并得到总和。

在简单的情况下，您可以在 SQL 查询本身中执行此操作。在更困难的情况下，例如某些物品添加了税，而有些则没有，类似的东西`inject`可能更有用：

```
cart_total = prices.inject {|sum, x| sum += price_with_tax(x)} 
```

`Enumerable`当 中的对象是需要比简单数值需要更详细处理的复杂类时，或者当 Enumerable 包含需要在处理之前转换为通用类型的不同类型的对象时，这种事情也特别有用。由于`inject`需要一个块，因此您可以将此处的功能设置为您需要的复杂程度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-19T18:44:08.707

以下是几个`inject()`实际应用的示例：

```
[1, 2, 3, 4].inject(0) {|memo, num| memo += num; memo} # sums all elements in array 
```

该示例遍历 [1, 2, 3, 4] 数组的每个元素，并将这些元素添加到 memo 变量（memo 通常用作块变量名称）。此示例在每次迭代后显式返回 memo，但返回也可以是隐式的。

```
[1, 2, 3, 4].inject(0) {|memo, num| memo += num} # also works 
```

inject() 在概念上类似于以下显式代码：

```
result = 0
[1, 2, 3, 4].each {|num| result += num}
result # result is now 10 
```

inject() 对于创建数组和散列也很有用。以下是如何使用 inject() 转换`[['dogs', 4], ['cats', 3], ['dogs', 7]]`为`{'dogs' => 11, 'cats' => 3}`.

```
[['dogs', 4], ['cats', 3], ['dogs', 7]].inject({'dogs' => 0, 'cats' => 0}) do |memo, (animal, num)|
  memo[animal] = num
  memo
end 
```

这是一个更通用和优雅的解决方案：

```
[['dogs', 4], ['cats', 3], ['dogs', 7]].inject(Hash.new(0)) do |memo, (animal, num)|
  memo[animal] = num
  memo
end 
```

同样，`inject()`在概念上类似于以下代码：

```
result = Hash.new(0)
[['dogs', 4], ['cats', 3], ['dogs', 7]].each do |animal, num|
  result[animal] = num
end
result # now equals {'dogs' => 11, 'cats' => 3} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:42:15.963

假设您在 eBay 上有一些商品的销售价格列表，而不是一个范围，并且您想知道平均价格。您可以通过注入 + 然后除以长度来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T02:03:39.507

ActiveRecord 范围是一个典型案例。如果我们调用`scoped`一个模型，我们会得到一个对象，我们可以在该对象上链接额外的作用域。这让我们可以使用注入来建立一个搜索范围，比如说，一个参数哈希：

```
search_params = params.slice("first_name","last_name","city","zip").
  reject {|k,v| v.blank?}

search_scope = search_params.inject(User.scoped) do |memo, (k,v)|
  case k
  when "first_name"
    memo.first_name(v)
  when "last_name"
    memo.last_name(v)
  when "city"
    memo.city(v)
  when "zip"
    memo.zip(v)
  else
    memo
  end 
```

（注意：如果没有提供参数，这会带回整个表格，这可能不是您想要的。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-06T19:18:56.930

我最喜欢的对 inject 或它的同义词 reduce 的解释是：

**reduce 接收一个数组并将其减少为单个值。它通过遍历一个列表、沿途保持和转换一个运行总计来做到这一点。**

我在 [http://railspikes.com/2008/8/11/understanding-map-and-reduce的一篇精彩文章中找到了它](http://railspikes.com/2008/8/11/understanding-map-and-reduce)

# gis - 将某个区域划分为 1 km x 1 km 方格

> ID：12046675
> 
> 赞同：1
> 
> 时间：2012-08-20T23:39:49.533
> 
> 标签：gis, latitude-longitude

我有一张特定区域的地图（大约 1600 公里宽和 600 公里高），我将用 1 公里 x 1 公里的正方形网格覆盖整个区域 - 这不是像矩形或正方形这样的直线形状。我正在考虑将起始纬度和经度作为我所在区域的最左上角——该点是第一个方形网格的左上角——然后从那里开始。对我来说，计算将覆盖我的地图的所有方形网格的角的最佳方法是什么？- 我正在使用 C++ 计算每个正方形网格的角变量，然后检查给定的经纬度对是否落在这些正方形中的任何一个内。- 谢谢。

# xcode - xcode 项目总是获得 facebook 登录失败状态

> ID：12046679
> 
> 赞同：8
> 
> 时间：2012-08-20T23:40:31.560
> 
> 标签：xcode, facebook, login

我遇到了 Facebook 登录问题。我安装了 FB SDK 3.0 并且示例项目似乎运行良好 --- 不过不太确定。当我在自己的项目中创建一个按钮并尝试登录 Facebook 时，我总是从 sessionStateChanged 方法中得到 FBSessionStateClosedLoginFailed，尽管我显然得到了页面“你已经授权了这个应用程序。按 Okay 继续”。我还尝试通过 Simulator Safari facebook 页面注销，然后重新启动我的项目，我得到了新的用户名/密码页面，然后我登录了，但我仍然得到 FBSessionStateClosedLoginFailed！

再多观察几句。1，我通过 NSLog 得到 FBSessionStateClosedLoginFailed，在我点击 Facebook 页面上的 Okay 按钮后立即出现日志“你已经授权了这个应用程序。2，我尝试清理 xcode 项目缓存，但没有帮助。

有点沮丧。我想知道你们中是否有人可以帮助解决这个问题。赞赏！-托尼

另外：我做了更多的研究，我发现我所遇到的可能是一个典型的问题，正如 Facebook 在这里强调的那样（“专业提示 3：完成所有 iOS 应用程序设置”页面[http://developers.facebook.com中的部分） /docs/howtos/login-with-facebook-using-ios-sdk/](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)）。iPhone上有一个大红叉的图像正是我所拥有的。在 xcode 项目中，我单击我的登录按钮，然后我被定向到此页面，每次我必须单击此页面上的“Okay”（让我称之为 Okay_page）返回到我在模拟器中的应用程序，但是登录状态为 FBSessionStateClosedLoginFailed。我检查了捆绑ID，我正确无误。我还没有“YOUR_IPHONE_APP_STORE_ID”，我相信我需要向 Apple 付费才能获得它，我稍后会这样做，但在我仍在努力的时候不会这样做。

现在有几个问题： 1，我是否必须拥有 YOUR_IPHONE_APP_STORE_ID 才能跳过这个 Okay_page？2，这（不会从这个 Okay_page 自动重定向回我的应用程序）是否与我在此 Okay_page 中手动单击 Okay 并在模拟器中返回我的应用程序时总是获得 FBSessionStateClosedLoginFailed 的登录状态有关？换句话说，是（我必须手动单击“确定”才能在模拟器中返回我的应用程序）（我得到 FBSessionStateClosedLoginFailed 状态的原因）？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-03T14:09:12.647

你在 AppDelegate 中设置了这个功能吗？

```
-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [FBSession.activeSession handleOpenURL:url];
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T02:05:09.020

**我有同样的问题**：

1.  我们创建了 facebook 应用程序 (developer.facebook.com) 并设置了我们的 bundle id (ex. com.MyCompany.MyApp)
2.  当然，使用相同的 bundle id 创建了我们的 iOS 应用程序
3.  将我们的应用程序交付给客户后，他更改了 bundle id 没有通知我们。

**显然他开始出现 FBSessionStateClosedLoginFailed 错误！**

因此，您的 iOS 项目和 Facebook 应用程序之间可能有不同的 bundle id。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-24T01:51:53.887

我有这个错误，很长一段时间都无法解决。事实证明，如果您在设置中使用本机 iOS Facebook 帐户并选择“否”以允许该应用程序使用 Facebook，则该应用程序被操作系统阻止。您将始终收到 FBSessionStateClosedLoginFailed 错误，并且您无法在代码中执行任何操作来解决此问题（99% 肯定）。您能做的最好的事情就是提醒用户检查设置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-14T10:35:02.513

我在下面给出的方法中输入了错误的行。self.session 为零

```
return [self.session handleOpenURL:url]; 
```

它应该是

```
return  [[FBSession activeSession] handleOpenURL:url]; 
```

使用以下方法。

```
- (BOOL)application:(UIApplication *)application
                openURL:(NSURL *)url
      sourceApplication:(NSString *)sourceApplication
             annotation:(id)annotation {
        // attempt to extract a token from the url
      return  [[FBSession activeSession] handleOpenURL:url];
        // return [self.session handleOpenURL:url];
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-21T02:17:22.887

我在重置模拟器后解决了这个问题。`iOS Simulator - Reset Content and Settings...`，希望有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T00:43:24.643

我遇到了这个问题，因为我正在调用`[FBSession.activeSession close]`我的`applicationDidEnterBackground:`应用程序委托回调。这关闭了会话，因此当重定向使应用程序重新打开会话时，它失败了，因为它已被置于关闭状态。

在进入 Okay 页面之前，请确保您没有在任何地方关闭会话。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-08T04:05:19.013

访问 Facebook.com。在左侧面板上打开您的应用程序 -> 状态和审查 -> 有一个带有文本的切换按钮“**您想让这个应用程序及其所有实时功能对公众可用吗？** ”。打开它

![状态和评论页面](../Images/0f4c16a15887fc92d0b9a022a235c257.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-08T04:55:30.367

出色地。我跟着`FBLoginCustomUISample`某个地方，它是一个从自身实现登录`github.com`的工作示例。您还可以在 iOS 应用程序中创建登录功能时阅读我的​​解决方法。这是我的链接：`facebook``facebook``facebook`

### [原生 iOS Facebook SSO 不会返回到应用程序](https://stackoverflow.com/questions/10625210/native-ios-facebook-sso-wont-return-to-app/20971808#20971808)

# python - python - web2py - 似乎找不到 lxml - ActivePython - windows7

> ID：12046683
> 
> 赞同：0
> 
> 时间：2012-08-20T23:41:28.070
> 
> 标签：python, lxml, web2py, activepython

一直在 windows7 上使用 ActivePython，lxml 似乎没有问题。
我有很多其他第三方包，它们也在工作。

直到我想在**Web2Py**中使用它。

如果我直接在里面复制它们，所有其他的似乎都在工作`c:/web2py/applications/myApp/modules`

使用lxml，似乎我需要复制其他东西..

我有一个第三方模块，它像这样导入 lxml：`from lxml.etree import tostring`

它最终抛出 -`No module named lxml.etree`

我在 web2py 之外的测试程序运行这两个模块都没有问题。
当我这样做时，`pypm files lxml`我看到了这个： `%APPDATA%\Python\Python27\site-packages\lxml-2.3-py2.7.egg-info`

我还应该将什么与 lxml 目录一起复制到`modules`目录中？

很确定是我做错了什么而不是 Web2py，但不能指望..

web2py 版本 =**版本 1.99.7 (2012-03-04 22:12:08) 稳定**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:18:55.540

如果您使用的是 Windows 二进制版本的 web2py，它带有自己的 Python 2.5 解释器并且是独立的，因此它不会使用您系统的 Python 2.7，也不会看到它的任何模块。相反，您应该切换到从源代码运行 web2py。它与二进制版本一样简单——只需下载 zip 文件并解压缩即可。然后，您可以导入 lxml 而无需将任何内容移动到应用程序的 /modules 文件夹。

# c - 效率 int 与 long long 分配

> ID：12046685
> 
> 赞同：2
> 
> 时间：2012-08-20T23:41:40.103
> 
> 标签：c, performance

如果我需要为一块内存分配零。如果架构是 32 位，`long long`那么分配（在特定架构上是 8 个字节）比分配`int`（4 个字节）更有效，还是等于两个 int 分配？并且`int`分配比使用相同的内存块分配更有效，因为如果我使用vs `char`，我需要循环 4 次`char``int`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T23:44:17.210

为什么不使用`memset()`？

[http://www.elook.org/programming/c/memset.html](http://www.elook.org/programming/c/memset.html)

（来自上面的网站）

句法：

```
#include <string.h>
void *memset( void *buffer, int ch, size_t count ); 
```

描述：

函数 memset() 将 ch 复制到缓冲区的第一个 count 个字符中，并返回缓冲区。memset() 对于将一段内存初始化为某个值很有用。例如，这个命令：

```
memset( the_array, '\0', sizeof(the_array) ); 
```

### 是将 the_array 的所有值设置为零的一种非常有效的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T05:15:11.890

对于您的问题，如果编译器是智能/优化的，答案将是肯定的。

有趣的是，在具有 SSE 的机器上，我们仍然可以使用 128 位块 :)，这只是我的观点，始终尝试强调可读性与简洁性之间的平衡，所以是的......我倾向于使用`memset`，它并不总是完美的，并且可能不是最快的，但它告诉维护代码的人“嘿，我正在初始化或设置这个数组”

无论如何，这里有一些测试代码，如果需要任何更正，请告诉我。

```
#include <time.h>
#include <xmmintrin.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define NUMBER_OF_VALUES 33554432

int main()
{
    int *values;
    int result = posix_memalign((void *)&values, 16, NUMBER_OF_VALUES * sizeof(int));
    if (result)
    {
        printf("Failed to mem allocate \n");
        exit(-1);
    }
    clock_t start, end;

    int *temp = values, total = NUMBER_OF_VALUES; 
    while (total--)
        *temp++ = 0;

    start = clock();
    memset(values, 0, sizeof(int) * NUMBER_OF_VALUES);
    end = clock();

    printf("memset time %f\n", ((double) (end - start)) / CLOCKS_PER_SEC);

    start = clock();
    {
        int index = 0, total = NUMBER_OF_VALUES * sizeof(int);
        char *temp = (char *)values;
        for(; index < total; index++)
            temp[index] = 0;
    }
    end = clock();

    printf("char-wise for-loop array indices time %f\n", ((double) (end - start)) / CLOCKS_PER_SEC);

    start = clock();
    {
        int index = 0, *temp = values, total = NUMBER_OF_VALUES;
        for (; index < total; index++)
            temp[index] = 0;
    }
    end = clock();

    printf("int-wise for-loop array indices time %f\n", ((double) (end - start)) / CLOCKS_PER_SEC);

    start = clock();
    {
        int index = 0, total = NUMBER_OF_VALUES/2;
        long long int *temp = (long long int *)values;
        for (; index < total; index++)
            temp[index] = 0;
    }
    end = clock();

    printf("long-long-int-wise for-loop array indices time %f\n", ((double) (end - start)) / CLOCKS_PER_SEC);

    start = clock();
    {
       int index = 0, total = NUMBER_OF_VALUES/4;
       __m128i zero = _mm_setzero_si128();
       __m128i *temp = (__m128i *)values;
       for (; index < total; index++)
           temp[index] = zero; 
    }
    end = clock();

    printf("SSE-wise for-loop array indices time %f\n", ((double) (end - start)) / CLOCKS_PER_SEC);

    start = clock();
    {
        char *temp = (char *)values;
        int total  = NUMBER_OF_VALUES * sizeof(int);
        while (total--)
            *temp++ = 0;        
    }
    end = clock();

    printf("char-wise while-loop pointer arithmetic time %f\n", ((double) (end - start)) / CLOCKS_PER_SEC);

    start = clock();
    {
        int *temp = values, total = NUMBER_OF_VALUES;
        while (total--)
            *temp++ = 0;
    }
    end = clock();

    printf("int-wise while-loop pointer arithmetic time %f\n", ((double) (end - start)) / CLOCKS_PER_SEC);

    start = clock();
    {
        long long int *temp = (long long int *)values;
        int total = NUMBER_OF_VALUES/2;
        while (total--)
            *temp++ = 0;
    }
    end = clock();

    printf("long-ling-int-wise while-loop pointer arithmetic time %f\n", ((double) (end - start)) / CLOCKS_PER_SEC);

    start = clock();
    {
        __m128i zero = _mm_setzero_si128();
        __m128i *temp = (__m128i *)values;
        int total = NUMBER_OF_VALUES/4;
        while (total--)
            *temp++ = zero;
    }
    end = clock();

    printf("SSE-wise while-loop pointer arithmetic time %f\n", ((double) (end - start)) / CLOCKS_PER_SEC);

    free(values);
    return 0;
} 
```

这里有一些测试：

```
$ gcc time.c
$ ./a.out 
memset time 0.025350
char-wise for-loop array indices time 0.334508
int-wise for-loop array indices time 0.089259
long-long-int-wise for-loop array indices time 0.046997
SSE-wise for-loop array indices time 0.028812
char-wise while-loop pointer arithmetic time 0.271187
int-wise while-loop pointer arithmetic time 0.072802
long-ling-int-wise while-loop pointer arithmetic time 0.039587
SSE-wise while-loop pointer arithmetic time 0.030788

$ gcc -O2 -Wall time.c
MacBookPro:~ samyvilar$ ./a.out 
memset time 0.025129
char-wise for-loop array indices time 0.084930
int-wise for-loop array indices time 0.025263
long-long-int-wise for-loop array indices time 0.028245
SSE-wise for-loop array indices time 0.025909
char-wise while-loop pointer arithmetic time 0.084485
int-wise while-loop pointer arithmetic time 0.025277
long-ling-int-wise while-loop pointer arithmetic time 0.028187
SSE-wise while-loop pointer arithmetic time 0.025823 
```

我的资料：

```
$ gcc --version
i686-apple-darwin10-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ uname -a
Darwin MacBookPro 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 
```

`memset`可能使用内联汇编进行了相当优化，尽管这又因编译器而异...

当一些时间开始收敛时，gcc 似乎在非常积极地优化`-O2`我想我应该看看程序集。

如果你是古玩，只需打电话`gcc -S -msse2 -O2 -Wall time.c`，大会就在`time.s`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:45:10.867

始终避免在高级编程语言中进行额外的迭代。如果您只在 int 上迭代一次，而不是在其字节上循环，您的代码将更有效率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T23:45:20.240

大多数体系结构都进行了分配优化，因此它们与 32 位 x86 的 4 字节字长对齐。因此，分配相同大小的内存并不重要（1MB 的 long 类型的 memset 和 1MB 的 char 类型之间没有区别）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T03:11:19.017

`1\. long long(8 bytes) vs two int(4 bytes)`- 最好长期长期。因为分配一个 8 字节元素而不是两个 4 字节元素时性能会更好。

`2\. int (4 bytes) vs four char(1 bytes)`- 最好在这里寻找 int。

如果您只声明一个元素，那么您可以直接分配零，如下所示。

```
long long a;
int b;
....
a = 0; b = 0; 
```

但是，如果您要声明`n`元素数组，那么请使用`memeset`如下所示的功能。

```
long long a[10];
int b[20];
....
memset(a, 0, sizeof(a));
memset(b, 0, sizeof(b)); 
```

如果您想在声明本身期间进行初始化，则不需要`memset`.

```
long long a = 0;
int b = 0; 
```

或者

```
long long a[10] = {0};
int b[20] = {0}; 
```

# wordpress - 我需要能够 a) 在 Linux 上的主文件夹中使用虚拟主机，并且 b) 使用符号链接

> ID：12046687
> 
> 赞同：0
> 
> 时间：2012-08-20T23:41:46.603
> 
> 标签：wordpress, apache, apache2, symlink

所以我有 Ubuntu 12.04（桌面）并想为`a.localhost`. 我知道如何设置`sites-enabled`and `/etc/hosts`。我无法弄清楚的是如何将虚拟主机定向到`/home/aubrey/a.project`并链接`/home/aubrey/a.project/b`到`/home/aubrey/Project A/b`并能够使用`http://a.localhost/b`

另一种解释：

具有讽刺意味的是，我在 Windowz 和 xampp 上做得很好。我只想能够将插件代码保存在我的主文件夹中的存储库中，并将 WordPress 安装在类似`/home/aubrey/a-wordpress`并`/home/plugin-project/plugin-a`链接到`/home/aubrey/a-wordpress/wp-content/plugins/plugin-a`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:48:46.777

这个问题是否适用于插件目录中的所有文件？特别是像 CSS 或 JS 这样的静态文件？还是这个问题只发生在 PHP 文件中？

如果只是 PHP 文件，请检查您的 PHP 配置。也许你在`open_basedir`那里配置了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:58:35.460

好的，这就是我为使事情正常工作所做的：

一、启用userdir

`sudo a2enmod userdir`

然后，编辑`/etc/apache2/mods-enabled/php5.conf`

```
<IfModule mod_php5.c>
    <FilesMatch "\.ph(p3?|tml)$">
    SetHandler application/x-httpd-php
    </FilesMatch>
    <FilesMatch "\.phps$">
    SetHandler application/x-httpd-php-source
    </FilesMatch>
    # To re-enable php in user directories comment the following lines
    # (from <IfModule ...> to </IfModule>.) Do NOT set it to On as it
    # prevents .htaccess files from disabling it.
    <IfModule mod_userdir.c>
        <Directory /home/*/public_html>
            #php_admin_value engine Off
        </Directory>
    </IfModule>
</IfModule> 
```

请注意，我注释掉了`php_admin_value`允许 PHP。

然后，创建了一个虚拟主机：

```
<VirtualHost *:80>
    ServerName philknight.localhost
    DocumentRoot /home/aubrey/public_html/philknight-wordpress
    <Directory />
        Options FollowSymLinks
        AllowOverride All
    </Directory>
    <Directory /home/aubrey/public_html/philknight-wordpress>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>
</VirtualHost> 
```

而且，确切地说，in`/home/aubrey/public_html/philknight-wordpress`能够`wp-content`在我的主文件夹中创建指向其他地方的链接。`/home/aubrey/Documents/Projects & Companies/Excion/Metz Tennis/PhilKnight/wp-content/themes/philknight`我使用了常见的`SHIFT_CTRL`拖动方法，但我相信`ln -s`也可以。

希望这对任何人都有帮助，如果您有任何问题，请发表评论...

权限：

`drwxrwxrwx 4 www-data www-data 4096 Aug 20 18:46 /home/aubrey/public_html`

`drwxrwxrwx 8 aubrey aubrey 4096 Aug 20 21:11 /home/aubrey/Documents/Projects & Companies/Excion/Metz Tennis/PhilKnight/wp-content`

也不得不`chmod 777 -R /home/aubrey/Documents/Projects & Companies/Excion/Metz Tennis/PhilKnight/wp-content/plugins`和`/home/aubrey/Documents/Projects & Companies/Excion/Metz Tennis/PhilKnight/wp-content/themes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T00:05:50.137

如果我没记错的话，你想要`+SymLinksIfOwnerMatch`，不是`-SymLinksIfOwnerMatch`。- 表示禁止该指令，而不是打开指令的 +。但肯定有其他东西会在这里引起问题。

# django-views - django - 一个模板中的 2 个视图

> ID：12046689
> 
> 赞同：7
> 
> 时间：2012-08-20T23:42:07.200
> 
> 标签：django-views

我有 2 个不同的视图，它们从 db 获取过滤数据。我必须在一个模板文件（admin.html）中使用这些视图，但我不能同时在一个页面上使用多个视图。

这是我的观点1：

```
draft_list = Post.objects.filter(isdraft=True).order_by("-posted")
            return render_to_response('userside/admin.html',
                     {'draft_list':draft_list,},
                     context_instance = RequestContext(request)) 
```

视图2：

```
publish_list = Post.objects.filter(isdraft=False).order_by("-posted")
            return render_to_response('userside/admin.html',
                {'publish_list':publish_list,},
                context_instance = RequestContext(request)) 
```

我喜欢像这样使用它们：

```
{% for d in draft_list %}
{{ d.title }}
{% endfor %}

--

{% for p in publish_list %}
{{ p.title }}
{% endfor %} 
```

我想让这两个视图“一个视图”。正确的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T23:49:05.633

您不想在 1 个模板中有 2 个视图（无论如何这是不可能的），但在 1 个模板中有 2 个模型可用于渲染。这样做：

```
draft_list = Post.objects.filter(isdraft=True).order_by("-posted")
publish_list = Post.objects.filter(isdraft=False).order_by("-posted")
return render_to_response('userside/admin.html',
                 {'draft_list':draft_list,'publish_list':publish_list}) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-15T09:08:10.180

从您的问题来看，您似乎正在使用基于函数的视图。解决您遇到的问题的另一种方法是使用基于类的视图并覆盖[get_context_data](https://docs.djangoproject.com/en/1.5/ref/class-based-views/mixins-simple/)方法以向您的模板传递两个上下文，一个用于每个查询集。

```
#views.py
class MyClassBasedView(DetailView):
    context_object_name = 'draft_list'
    template='my-template'
    queryset = Post.objects.filter(isdraft=True).order_by("-posted")

    def get_context_data(self, **kwargs):
       context = super(MyClassBasedView, self).get_context_data(**kwargs)
       context['publish_list'] = Post.objects.filter(isdraft=False).order_by("-posted")
       return context 
```

# asp.net-mvc-3 - 如何减少对控制器的注入依赖项的数量

> ID：12046690
> 
> 赞同：8
> 
> 时间：2012-08-20T23:42:11.820
> 
> 标签：asp.net-mvc-3, dependency-injection, simple-injector, entity-framework-4.3.1

我正在使用 MVC3、Entity Framework v4.3 Code First 和 SimpleInjector。我有几个看起来像这样的简单类：

```
public class SomeThing
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

我有另一个看起来像这样的实体：

```
public class MainClass
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual AThing AThingy { get; set; }
    public virtual BThing BThingy { get; set; }
    public virtual CThing CThingy { get; set; }
    public virtual DThing DThingy { get; set; }
    public virtual EThing EThingy { get; set; }
} 
```

每个 Thingy（当前）都有自己的 Manager 类，如下所示：

```
public class SomeThingManager
{
    private readonly IMyRepository<SomeThing> MyRepository;

    public SomeThingManager(IMyRepository<SomeThing> myRepository)
    {
        MyRepository = myRepository;
    }
} 
```

因此，我的 MainController 如下：

```
public class MainController
{
    private readonly IMainManager MainManager;
    private readonly IAThingManager AThingManager;
    private readonly IBThingManager BThingManager;
    private readonly ICThingManager CThingManager;
    private readonly IDThingManager DThingManager;
    private readonly IEThingManager EThingManager;

    public MainController(IMainManager mainManager, IAThingManager aThingManager, IBThingManager bThingManager, ICThingManager cThingManager, IDThingManager dThingManager, IEThingManager eThingManager)
    {
        MainManager = mainManager;
        AThingManager = aThingManager;
        BThingManager = bThingManager;
        CThingManager = cThingManager;
        DThingManager = dThingManager;
        EThingManager = eThingManager;
    }

    ...various ActionMethods...
} 
```

实际上，这个控制器中注入的依赖项是原来的两倍。它闻起来臭臭的。当您还知道存在具有所有或大部分相同依赖项的 OtherController 时，气味会更糟。我想重构它。

我已经对 DI 有足够的了解，知道属性注入和服务定位器不是好主意。

我无法拆分我的 MainController，因为它是一个单一的屏幕，需要通过单击一个保存按钮来显示和编辑所有这些内容。换句话说，单个 post 操作方法可以保存所有内容（尽管我愿意更改它，只要它仍然是单个 Save 按钮）。这个屏幕是用 Knockoutjs 构建的，如果有影响的话，它会用 Ajax 帖子保存。

我幽默地使用了环境上下文，但我并不肯定这是正确的方法。我也幽默地使用了注入 Facade。我也想知道我是否应该在这一点上实现一个命令架构。（以上所有内容不只是将气味转移到其他地方吗？）

最后，也许独立于上述三种方法，我是否应该使用一个具有显式方法的 LookupManager，例如 GetAThings()、GetAThing(id)、GetBThings()、GetBThing(id) 等？（但是那个 LookupManager 需要注入几个存储库，或者一种新型的存储库。）

除了我的想法之外，我的问题是，重申一下：重构此代码以减少注入依赖项的疯狂数量的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T01:04:44.107

您是否考虑过使用工作单元设计模式？关于什么是工作单元，有[一篇很棒的 MSDN帖子。](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)那篇文章的摘录：

> 在某种程度上，您可以将工作单元视为转储所有事务处理代码的地方。工作单位的职责是：
> 
> *   管理交易。
> *   对数据库的插入、删除和更新进行排序。
> *   防止重复更新。在 Unit of Work 对象的单一用法中，代码的不同部分可能会将同一个 Invoice
>     对象标记为已更改，但 Unit of Work 类只会
>     向数据库发出单个 UPDATE 命令。
> 
> 使用工作单元模式的价值在于将其余代码从这些问题中解放出来，这样您就可以专注于业务逻辑。

有几篇关于这个的博客文章，但我发现的最好的一篇关于如何实现它是[here](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。还有一些其他的已经从这个网站[here](http://huyrua.wordpress.com/2010/07/13/entity-framework-4-poco-repository-and-specification-pattern/)和[here](http://elegantcode.com/2009/12/15/entity-framework-ef4-generic-repository-and-unit-of-work-prototype/)中提到过。

> 最后，也许独立于上述三种方法，我是否应该使用一个具有显式方法的 LookupManager，例如 GetAThings()、GetAThing(id)、GetBThings()、GetBThing(id) 等？（但是那个 LookupManager 需要注入几个存储库，或者一种新型的存储库。）

工作单元将能够处理所有这些，特别是如果您能够为大多数数据库处理需求实现通用存储库。您的标签提到您正在使用 Entity Framework 4.3 对吗？

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T07:32:10.077

使用[命令架构](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)是一个好主意，因为这会将所有业务逻辑移出控制器，并允许您添加[横切关注点](https://en.wikipedia.org/wiki/Cross-cutting_concern)而无需更改代码。但是，这不会解决您的[构造函数过度注入](http://blog.ploeh.dk/2010/01/20/RebuttalConstructorOverinjectionAntipattern.aspx)问题。标准解决方案是将相关依赖项移动到[聚合服务](http://blog.ploeh.dk/2010/02/02/RefactoringToAggregateServices.aspx)中。但是，我同意 Mark 的观点，您应该看看[unit of work pattern](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=84)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:11:52.677

我认为您的主要问题是抽象层太多。您正在使用实体框架，因此您已经有一个围绕数据的抽象层，通过存储库和管理器接口添加了另外两个层（每个实体一个），这导致您的控制器依赖于大量接口。它并没有增加很多价值，此外还有[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)。

我会重构，摆脱你的存储库和管理层，并使用“环境上下文”。

然后，查看您的控制器向管理器层询问的查询类型。在这些非常简单的地方，我认为直接在控制器中查询“环境上下文”没有问题——这就是我要做的。在它们更复杂的地方，将其重构为一个新界面，对事物进行逻辑分组（不一定每个实体一个）并为此使用您的 IOC。

# php - 如果 id != $_get['id'] 则发送标头 404

> ID：12046694
> 
> 赞同：0
> 
> 时间：2012-08-20T23:42:21.033
> 
> 标签：php, mysql, sql, http-status-code-404

像这样的 SQL 查询，

```
$uid = $_GET['id'];
$result = mysql_query("SELECT name, lastname, email FROM users WHERE id = '$uid'"); 
```

如果 id != $_GET['id'] 的值，如何打印 404 标头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T23:45:34.767

```
$uid = mysql_real_escape_string($_GET['id']);
$result = mysql_query("SELECT name, lastname, email FROM users WHERE id = '{$uid}'");
if (!result || mysql_num_rows($result) == 0)
    header("Status: 404 Not Found"); 
```

另请注意，您应该远离已弃用的`mysql_*`功能。

另请注意，[Bobby Tables](http://xkcd.com/327/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:44:57.107

不太确定`id`您指的是哪个，但您正在寻找以下内容：

```
if (id != $_GET['id'])
    header("Status: 404 Not Found"); 
```

# asp.net-mvc - ASP.net MVC4 清除模型值

> ID：12046698
> 
> 赞同：1
> 
> 时间：2012-08-20T23:42:58.793
> 
> 标签：asp.net-mvc, mobile

所以我在我的控制器中有一个简单的动作。该项目是一个 MVC 移动应用程序。

```
public ActionResult Index()
{
  return View();
} 
```

这提供了一个输入数据的表格。然后我处理回帖中的数据。

```
[HttpPost]
public ActionResult Index(ScanViewModel model)
{
    if (ModelState.IsValid)
    {
        Scan ns = new Scan();
        ns.Location = model.Location;
        ns.Quantity = model.Quantity;
        ns.ScanCode = model.ScanCode;
        ns.Scanner = User.Identity.Name;
        ns.ScanTime = DateTime.Now;

        _db.Scans.Add(ns);
        _db.SaveChanges();

    }

    return View(model);
} 
```

我想清除表单中的字段并允许用户再次输入数据。但是，我将完全相同的值返回到我的输入中。如何在控制器中清除它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:45:00.050

您应该遵循[**PRG**](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式。

`Create`只需重定向到适用于Screen的 Action 方法。您可以使用该`RedirectToAction`方法来执行此操作。

[`RedirectToAction`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)向浏览器返回 HTTP 302 响应，这会导致浏览器对指定的操作发出**GET**请求。

```
[HttpPost]
public ActionResult Index(ScanViewModel model)
{
   if(ModelState.IsValid)
   {
       //Code for save here
       //..............
       _db.SaveChanges();
       return RedirectToAction("Index","User");
   }
   return View(model);
}
public ActionResult Index()
{
   return View();
} 
```

假设您的控制器名称是`UserController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:32:15.583

打电话`this.ModelState.Clear()`

# java - 随机词返回 null

> ID：12046699
> 
> 赞同：0
> 
> 时间：2012-08-20T23:43:02.120
> 
> 标签：java

当我将它作为标签“JLabel lblWord = new JLabel(randomWord) 运行时，它不显示标签，但是当我作为 system.out.println(randomWord) 运行时，它给了我空值......它假设返回其中一个词在文本文件中，但即使我将整个代码移到底部，它似乎也不起作用

```
import java.awt.*;
import java.awt.event.*;
import java.util.Arrays;
import javax.swing.*;
import java.io.*;
import java.util.ArrayList;
import java.util.Random;
import java.util.List;

public final class Hangman extends JFrame
{
    static String randomWord;
    int i = 0;
    static JPanel panel;
    static JPanel panel2;
    static JPanel panel3;
    static JPanel panel4;

    public static String readWord()
    {
        try
        {
            BufferedReader reader = new BufferedReader(new FileReader("Words.txt"));
            String line = reader.readLine();
            List<String> words = new ArrayList<String>();
            while(line != null)
            {
                String[] wordsLine = line.split(" ");
                boolean addAll = words.addAll(Arrays.asList(wordsLine));
                line = reader.readLine();
            }
            Random rand = new Random(System.currentTimeMillis());
            String randomWord = words.get(rand.nextInt(words.size()));
        }catch (Exception e){

        }
        return randomWord;
    }

    public Hangman()
    {

        JButton[] buttons = new JButton[26];

        panel = new JPanel(new GridLayout(0,9));
        panel2 = new JPanel();
        panel3 = new JPanel();
        panel4 = new JPanel();

        JButton btnRestart = new JButton("Restart");
        btnRestart.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {

            }
        });

        JButton btnNewWord = new JButton("Add New Word");
        btnNewWord.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                try
                {
                    FileWriter fw = new FileWriter("Words.txt", true);
                    PrintWriter pw = new PrintWriter(fw, true);

                    String word = JOptionPane.showInputDialog("Please enter a word: ");

                    pw.println(word);
                    pw.close();
                }
                catch(IOException ie)
                {
                    System.out.println("Error Thrown" + ie.getMessage());
                }
            }
        });

        JButton btnHelp = new JButton("Help");
        btnHelp.addActionListener(new ActionListener(){
           public void actionPerformed(ActionEvent e)
           {
               String message = "The word to guess is represented by a row of dashes, giving the number of letters and category of the word."
                       + "\nIf the guessing player suggests a letter which occurs in the word, the other player writes it in all its correct positions."
                       + "\nIf the suggested letter does not occur in the word, the other player draws one element of the hangman diagram as a tally mark."
                       + "\n"
                       + "\nThe game is over when:"
                       + "\nThe guessing player completes the word, or guesses the whole word correctly"
                       + "\nThe other player completes the diagram";
               JOptionPane.showMessageDialog(null,message, "Help",JOptionPane.INFORMATION_MESSAGE);
           }
        });

        JButton btnExit = new JButton("Exit");
        btnExit.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                System.exit(0);
            }
        });

        ImageIcon icon = new ImageIcon("D:\\Varsity College\\Prog212Assign1_10-013803\\images\\Hangman1.jpg");
        JLabel lblWord = new JLabel(randomWord);
        JLabel label = new JLabel();
        label.setIcon(icon);
        String  b[]={"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"};
        for(i = 0; i < buttons.length; i++)
        {
            buttons[i] = new JButton(b[i]);

            panel.add(buttons[i]);
        }

        panel2.add(label);

        panel3.add(btnRestart);
        panel3.add(btnNewWord);
        panel3.add(btnHelp);
        panel3.add(btnExit);
        panel4.add(lblWord);
    }

    public static void main(String[] args) 
    {

        System.out.println();
        Hangman frame = new Hangman();
        Box mainPanel = Box.createVerticalBox();
        frame.setContentPane(mainPanel);
        mainPanel.add(panel, BorderLayout.NORTH);
        mainPanel.add(panel2);
        mainPanel.add(panel4);
        mainPanel.add(panel3);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:46:06.350

randomWord 变量被声明了两次，一次在 Hangman 类中，它在那里保持为空，第二次在 readWord 方法中，它被一个随机字符串填充，然后返回。请理解，这是两个完全不同的变量。此外，在其中声明的变量`readWord()`的作用域也仅限于此方法。换句话说，它根本不存在于此方法之外。

解决方案：

*   摆脱 Hangman 类中的 randomWord 变量——它比没有价值更糟糕，因为它具有误导性。
*   在需要时调用 readWord() 方法来获取您的随机单词。这就是为什么您首先使用此方法的原因。
*   阅读变量范围和变量阴影，这是您遇到问题的两个概念。
*   *一旦*将所有单词放入`ArrayList<String>`. 然后，当我需要一个随机词时，我会从 ArrayList 中随机获取一个。无需继续重新阅读同一个文件。

# qt - QProcess::readAllStandardOutput 给出片状输出

> ID：12046700
> 
> 赞同：0
> 
> 时间：2012-08-20T23:43:06.820
> 
> 标签：qt, qt4, tcl

我正在尝试在 Qt4 中为我的基于 tcl 的工具创建一个 GUI。为了填充小部件，我需要执行一些 tcl 命令。我阅读了有关 QProcess 的信息，并且正在使用 QProcess 调用 tcl 脚本，然后从标准输出中获取它们的输出。假设我在 tcl 中执行 3 个命令，那么当我查询 stdout 时，我相信我应该看到与这三个命令中的每一个相对应的 3 个输出，但是这种情况并不一致。行为是片状的。

正如您在 main.cpp 中看到的，我正在使用 runTclCommand() 函数执行多个命令，最后执行 getData() 函数来读取标准输出。

主.cpp：

```
#include <QApplication>
#include <QProcess>
#include <QDebug>
#include "Tclsh.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QByteArray out;
    Tclsh *tcl = new Tclsh;
    tcl->startTclsh();
    tcl->runTclCommand("set ::tcl_interactive 1\n");
    tcl->runTclCommand("set a 23\n");
    tcl->runTclCommand("puts $a\n");
    tcl->runTclCommand("set a 40\n");
    tcl->runTclCommand("puts $a\n");
   // out = idl->getData();
    out = tcl->getData();
} 
```

Tclsh.cpp：

```
#include <QProcessEnvironment>
#include <QProcess>
#include <QDebug>
#include "Tclsh.h"

void Tclsh::startTclsh() {
    QString program = "/usr/bin/tclsh8.4";
    this->setProcessChannelMode(QProcess::MergedChannels);
    this->start(program);
    if ( !this->waitForStarted()) {
        qDebug()<<"ERROR Starting tclsh";
    }
    return;
}

void Tclsh::runTclCommand(const char *cmd) {
    qDebug()<<"CMD:"<<cmd;
    this->write(cmd);
    if (!this->waitForBytesWritten()) {
        qDebug()<<"Error in writing data";
    }
}

QByteArray Tclsh::getData() {
    if (!this->waitForReadyRead()) {
        qDebug()<<"Error in reading stdout: Ready read signal is not emitted";
    }
    QByteArray data = this->readAllStandardOutput();
    qDebug()<<"DATA:"<<data;
    return data;
} 
```

但是，有时我会得到以下输出：

```
CMD: set ::tcl_interactive 1

CMD: set a 23

CMD: puts $a

CMD: set a 40

CMD: puts $a

DATA: "1
% 23
% 23
% " 
```

有时是这样的：

```
CMD: set ::tcl_interactive 1

CMD: set a 23

CMD: puts $a

CMD: set a 40

CMD: puts $a

DATA: "1
" 
```

我不明白为什么会这样。如果有人能指出我的方法中的错误，我将不胜感激。

谢谢，新手

**编辑：经过更多研究，这是我的想法**

根据 Qt 手册，只要有新数据可用，就会发出 readyRead 信号（@Frank Osterfeld 也指定了，谢谢！）。它不会等待完整的输出数据可用（这是有道理的，因为它不知道什么时候会发生）。因此我的方法不好。我能做的是这样的：启动进程->等待进程完成->读取标准输出

这将确保不会出现片状行为，因为在我阅读时过程已经完成，因此不会出现新数据。

但是，在这种提议的方法中，我不清楚一件事：stdout 是否特定于进程？我的意思是，应该从process1读取stdout输出的进程是否可以从其他一些恰好与process1同时写入stdout的进程获取其他stdout数据？

谢谢，新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:19:08.590

我正在结束这个问题。从一个频道多次阅读似乎不是一个好主意。相反，我现在要做的是一口气写下我想写的东西->关闭写入通道->然后将其读回。这样我就得到了一致的输出。

# afnetworking - AFNetworking 和配置 HTTP_ACCEPT

> ID：12046701
> 
> 赞同：0
> 
> 时间：2012-08-20T23:43:18.200
> 
> 标签：afnetworking

AFNetworking 的文档指出，您应该创建 AFHTTPClient 的子类并将其用作每个 Web 服务的单例。

如果我在 www.example.com 有 2 个端点，一个允许 HTTP_ACCEPT 中的“application/json”，另一个需要 text/html，我将在我的单例 AFHTTPClient 类中配置什么参数，以便它配置正确的 HTTP_ACCEPT 值？

实施细节：

```
@interface MyAFHTTPClient : AFHTTPClient
+ (MyAFHTTPClient *)sharedClient;
@end

[[MyAFHTTPClient sharedClient] getPath:@"endPoint_json"
                                     parameters:nil 
                                        success:^(AFHTTPRequestOperation *operation, id responseObject) {
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
}] 
```

稍后，我需要调用 html 端点：

```
[[MyAFHTTPClient sharedClient] getPath:@"endPoint_html"
                                     parameters:nil 
                                        success:^(AFHTTPRequestOperation *operation, id responseObject) {
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
}] 
```

似乎这两个调用都导致`"HTTP_ACCEPT"=>"application/json"`服务器收到请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:54:02.197

`getPath:...`所有这些便利方法都用 构造一个请求`requestWithMethod:path:parameters:`，然后将其传递给 ，然后将其排入`HTTPRequestOperationWithRequest:success:failure:`操作队列。

如果您需要对 HTML 等进行一次性请求，请手动执行以下步骤，而不是使用便捷方法：创建请求，将`Accept`(HTTP_ACCEPT) 不是 HTTP 标头) 标头设置为`text/html`，然后创建并入队操作。

# c++ - 将预先声明的路径添加到文件名参数 (LPCSTR)

> ID：12046702
> 
> 赞同：0
> 
> 时间：2012-08-20T23:43:28.427
> 
> 标签：c++, function, path, arguments, filenames

我有一个需要通过 LPCSTR 参数在某个函数中打开的文件列表，但不幸的是，它们位于某些文件夹（主程序根目录的子目录）中，路径很长，我不想输入每次我想传递文件名时。

更准确地说，我有函数 D3DXCreateTextureFromFile() 询问文件名，例如，我有文件*a.png*，*b.png*，*c.png*位于“...\Materials\Textures\Textures_For_This \Textures_For_That\More_Specific_Texture_Location\" 主程序的子目录。如何注册此路径并将其添加到文件名参数中？

像这样的某种：

```
D3DXCreateTextureFromFile(bla, **DECLARED_DIR** + a.png, bla)
//same for b.png, c.png 
```

甚至是统一路径和文件名的子函数：

```
D3DXCreateTextureFromFile(bla, UnifyText(DECLARED_DIR, a.png), bla) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:52:45.933

```
 String main_dir="C:\\\Materials\\Textures\\Textures_For_This\\Textures_For_That\\More_Specific_Texture_Location\\";
    String files[]={"a.png","b.png","c.png"};
    String fullpath=main_dir;
    fullpath+=files[0];

    D3DXCreateTextureFromFile(bla, fullpath.c_str(), bla); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:53:31.100

如果您使用 C++，为什么不使用 stringstream 将 2 个字符串连接在一起，然后在结果字符串上调用 .c_str() 。或者你可以使用c-style，strcat 变成一个足够大的缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:56:24.600

是的，最简单的方法是将目录与文件名结合起来，并在需要时包含分隔符。因为您想将其作为参数传递，所以您想避免分配字符串并不得不清理它......所以使用 C++`string`类。

我通常会这样做：

```
string TexturePath( LPCSTR filename = NULL )
{
    if( filename == NULL ) return string(TEXTURE_DIR);
    return string(TEXTURE_DIR) + "\" + filename;
} 
```

当然，稍后您将依赖该字符串隐式转换为 LPCSTR。如果你想更明确，那么做（有点难看）调用`string::c_str()`：

```
D3DXCreateTextureFromFile(bla, TexturePath("a.png").c_str(), bla) 
```

*[编辑]*

另一种方法，如果你正在做这个单线程，是使用静态缓冲区：

```
LPCSTR TexturePath( LPCSTR filename = NULL )
{
    static char pathBuf[MAX_PATH];
    if( filename == NULL ) return TEXTURE_DIR;
    sprintf( pathBuf, "%s\\%s", TEXTURE_DIR, filename );
    return pathBuf;
} 
```

# node.js - 使用 mongoose 在 mongodb 中存储图像？如何？

> ID：12046703
> 
> 赞同：7
> 
> 时间：2012-08-20T23:43:28.577
> 
> 标签：node.js, mongodb, express, mongoose

任何人都有一个使用 mongoose 和 nodejs express 在 mongodb 中插入图像的快速示例

我读了一些例子，但我不明白怎么做？？

我想以表格上传图片

```
app.post('/videos/new', function(req, res) {
  req.form.complete(function(err, fields, files) {
    console.log('here i go');
    if(err) {
      next(err);
    } else {
      ins = fs.createReadStream(files.file.path);
      console.log('insssssssssssss'+ins);
      ous = fs.createWriteStream(__dirname + '/static/uploads/videos/' + files.file.filename);
      util.pump(ins, ous, function(err) {
        if(err) {
          next(err);
        } else { RegProvider.save({
           file: req.param(files.file.filename),
                   filename: req.param('filename')
                 }, function(error, docs) {
              res.redirect('/videos');
         });
        }
      });
      //console.log('\nUploaded %s to %s', files.file.filename, files.file.path);
      //res.send('Uploaded ' + files.file.filename + ' to ' + files.file.path);
    }
  });
}); 
```

喜欢这个例子，但我不明白它是如何工作的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T20:54:15.830

`util.pump`已[弃用](http://nodejs.org/api/util.html#util_util_pump_readablestream_writablestream_callback)。

您可以尝试[https://github.com/aheckmann/gridform](https://github.com/aheckmann/gridform)或[https://github.com/aheckmann/connect-multipart-gridform](https://github.com/aheckmann/connect-multipart-gridform)看看它们是否满足您的需求。

# c# - 在以编程方式添加的菜单项上创建点击事件？

> ID：12046704
> 
> 赞同：5
> 
> 时间：2012-08-20T23:43:51.240
> 
> 标签：c#, winforms

截屏：

![在此处输入图像描述](../Images/320fc928bba40be649b7b071c03b935c.png)

我使用下面的代码在屏幕截图中填充了上面的菜单，但我很傻，我不知道如何在每个子项上创建点击事件，因为它们没有属性名称？:S 我的意图是单击，比如说，“Do and Do”，然后文件将使用`Process.Start(filename);`. 请多多包涵，因为我对编程很陌生。:| 非常感谢！

```
private void loadViewTemplates(string path)
{
    foreach (string file in Directory.GetFiles(path, "*.txt"))
    {
        ToolStripItem subItem = new ToolStripMenuItem();
        subItem.Text = Path.GetFileNameWithoutExtension(file);
        viewTemplatesToolStripMenuItem.DropDownItems.Add(subItem);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T23:49:48.040

尝试取消点击过程。发件人将是被点击的菜单项：

```
private void MenuClicked(object sender, EventArgs e) {
  MessageBox.Show("Clicked on " + ((ToolStripMenuItem)sender).Text);
} 
```

然后为每个菜单连接点击事件：

```
ToolStripItem subItem = new ToolStripMenuItem();
subItem.Click += MenuClicked;
subItem.Text = Path.GetFileNameWithoutExtension(file);
viewTemplatesToolStripMenuItem.DropDownItems.Add(subItem); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T23:52:22.063

我并没有真正做 windows 窗体，所以可能有一个更普遍接受的方法来做到这一点，但你在这里想要做的是向“点击”事件添加一个事件处理程序。像这样：

```
subItem.Click += new EventHandler(subItem_Click); 
```

`subItem_Click`看起来像这样：

```
private void subItem_Click(object sender, EventArgs e)
{
    //click logic goes here
} 
```

# c++ - 为什么 remove_copy_if 返回一个空向量？

> ID：12046719
> 
> 赞同：3
> 
> 时间：2012-08-20T23:45:28.257
> 
> 标签：c++, stl, stl-algorithm

您能否向我解释一下我在以下代码中做错了什么？我希望第二个向量中的值> = 80，但它是空的。

```
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

class Tester
{
    public:
        int value;
        Tester(int foo)
        {
            value = foo;
        }
};

bool compare(Tester temp)
{
    if (temp.value < 80)
        return true;
    else
        return false;
}

int main()
{
    vector<Tester> vec1;
    vector<Tester> vec2;
    vec1.reserve(100);
    vec2.reserve(100);

    for(int foo=0; foo<100; ++foo)
        vec1.push_back(Tester(foo));

    remove_copy_if(vec1.begin(), vec1.end(), vec2.begin(), compare);

    cout<< "Size: " << vec2.size() << endl;

    cout<< "Elements"<<endl;
    for(int foo=0; foo < vec2.size(); ++foo)
        cout << vec2.at(foo).value << " ";
    cout<<endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T23:50:56.730

该函数`std::remove_copy_if()`将不匹配的元素从一个序列复制到另一个序列。通话

```
remove_copy_if(vec1.begin(), vec1.end(), vec2.begin(), compare); 
```

假设有一个合适的序列开始，`vec2.begin()`实际上并非如此：什么都没有。如果没有任何内存`reserve()`d`vec2`可能会导致崩溃。你想要的是一个迭代器，它可以根据需要扩展序列：

```
std::remove_copy_if(vec1.begin(), vec1.end(), std::back_inserter(vec2), compare); 
```

有了这个调用`reserve()`不是必需的，而只是潜在的性能优化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T23:51:28.053

标准算法适用于迭代器，并且对这些迭代器所属的容器一无所知。你`vec2.begin()`作为输出迭代器参数传递给`remove_copy_if`它，它会盲目地增加它，不知道它`vec2`是空的，耗尽分配的空间。您需要[`back_insert_iterator`](http://en.cppreference.com/w/cpp/iterator/back_insert_iterator)在调用之前传递 a 或将向量调整为合适的大小。

# c# - 用一个文本框 c# , asp.net 构建数组

> ID：12046722
> 
> 赞同：0
> 
> 时间：2012-08-20T23:45:55.437
> 
> 标签：c#, asp.net

我需要构建一个允许用户输入 100 种不同测量值的表单。然后输入 100 个不同的权重。我想使用相同的文本框。一个用于测量，一个用于重量。然后让他们存储该值，然后重置以接受下一个值，依此类推。谁能指出我正确的方向来实现这一目标？我已经搜索了一个多小时，找不到任何东西。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T00:19:44.007

当用户单击提交按钮时，将两个文本框的值添加到列表或字典中。这样做直到达到想要的 list.Count 数量。如果我没有正确理解您的问题，请告诉我。

*在 WPF (C#) 中，它看起来像这样。*

```
// Dictionary to save values
Dictionary<string, int> dict = new Dictionary<string, int>();

// Method that is called on user submit button click
private void HandleSubmit(object sender, EventArgs args) {
    // Add values of both textboxes to dictionary
    dict.Add(textBox1.Text, Int32.Parse(textBox2.Text));

    // Check if all data is entered
    // then activate custom method
    if(dict.Count >= 100) {
        CUSTOMMETHOD(dict);
    }
} 
```

- 编辑 -

@briskovich 据我了解您的评论。您想先保存所有 100 个压力样本，然后输入 100 个重量样本。在这种情况下，不需要使用字典，您可以使用两个 List<int> 来表示压力和重量。在这种情况下，代码看起来像这样：

```
// Variables to save our data
// numberValues - number of values user needs to enter
// pressureList - list of entered pressure data
// weightList - list of entered weight data
int numberValues = 100;
List<int> pressureList = new List<int>();
List<int> weightList = new List<int>();

// Method that is called on user submit button click
// This method uses only one text box to input data,
// first we input pressure data until limit is reached 
// and then weight data
private void HandleSubmit(object sender, EventArgs args) {
    // Check if we are still entering pressure data, that
    // is until we reach numberValues of pressure data values
    // Same thing goes for weight list
    if (pressureList.Count < numberValues) {
        pressureList.Add(Int32.Parse(textBox1.Text));
    }
    else if (weightList.Count < numberValues) {
        weightList.Add(Int32.Parse(textBox1.Text));
    }
    else {
        // When we have #numberValues of values in both 
        // lists we can call custom method to process data
        CUSTOMMETHOD(pressureList, weightList);
    }
}

// Method for processing data
private void CUSTOMMETHOD(List<int> pressures, List<int> weights) {
    // This loop will go through all values collected and
    // will give you access to both pressure and weight on
    // each iteration
    for (int index = 0; index < numberValues; index++) {
        int currentPressure = pressures.ElementAt(index);
        int currentWeight = weights.ElementAt(index);

        // Do processing here
    }
} 
```

# css - 为什么我的页面在 Safari 和 Firefox 中的起始位置比在 Chrome 中高？

> ID：12046724
> 
> 赞同：0
> 
> 时间：2012-08-20T23:46:02.193
> 
> 标签：css, google-chrome, safari, cross-browser

我正在编写 www.rootologyhealth.com 的代码，但我无法弄清楚为什么主页上的导航栏在 Safari 和 Firefox 中启动得如此之高，但在 chrome 中看起来很完美。我已尽我所能尝试诊断问题。我确定这是一个样式表问题，但我使用的样式相对简单，不应该导致这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:04:24.470

对我来说，它在 Chrome 21 中坏了，在 Windows 7 上的 Firefox 14 中很好。

在 Chrome 中使用开发人员工具时，如果您`div#top-menu`退出`div.container`，它不再漂浮在浏览器的可视部分上方。你会在那个和大广告之间留下一个间距问题，但这应该更容易处理。

# html - Slider cuts off [flex slider] with bootstrap?

> ID：12046727
> 
> 赞同：0
> 
> 时间：2012-08-20T23:46:14.267
> 
> 标签：html, css, slider

my slider cuts off and I noticed wwhat causing it is boostrap, the framework i use for the grid system.

```
http://jsfiddle.net/5q39A/1/ 
```

Why acutally does it cuts off? I included all css meaning with boostrap too.

this is the boostrap website: [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

You can see the slider cuts off there:

```
http:// justxp.plutohost.net /survive/index.html 
```

any help would be appreciated! thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:55:51.010

This is what is causing the issue:

```
li {
line-height: 18px;
margin: 5px;
}

on line 545 of bootstrap.css 
```

Use this example to override:

Change this:

```
.flexslider .slides > li {
display: none;
-webkit-backface-visibility: hidden;
}

on line 327 of style.css 
```

To this:

```
.flexslider .slides > li {
display: none;
-webkit-backface-visibility: hidden;
margin:0 !important;
} 
```

Fiddle: [http://jsfiddle.net/5q39A/4/](http://jsfiddle.net/5q39A/4/)

# mysql - 在 MySQL 中，如何返回一个月的星期几？

> ID：12046729
> 
> 赞同：9
> 
> 时间：2012-08-20T23:46:25.027
> 
> 标签：mysql

一年分为12个月。我们可以在四个星期内分解一个月。

在 MySQL 中，如何返回一个月的星期几？（例：第一周：2个条目，第二周：5个条目，第三周：3个条目；第四周：8个条目）

使用 Week 和 WeekOfYear 不会获得所需的结果，因为这些函数返回的是周数 YEAR，而不是月份。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T23:58:47.917

使用 MySQL 内置函数 week 查找一年的周数，然后减去该月第一天的周数。

```
SELECT WEEK('2012-02-20') - WEEK('2012-02-01') 
```

文档中有很多选项可以自定义调用以完全适合您正在寻找的内容，但我希望我的示例能让您了解可用的内容。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-20T23:51:33.373

```
FLOOR((DayOfMonth(dateCol)-1)/7)+1 
```

我想明确表示，这可能不是划分数据的好方法 - （请参阅评论），但这会让你尽可能接近。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-25T04:06:05.737

一个月中的一周（将开始的不完整周计为一个整体）

```
select ceiling((day(now()) - 
(6 - weekday(date_format(now(),'%Y-%m-01'))))/7) 
+ case when 6 - weekday(date_format(now(),'%Y-%m-01'))> 0 
then 1 else 0 end week_of_month; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-21T09:19:37.627

```
SELECT WEEK(my_date_field,5) - WEEK(DATE_SUB(my_date_field, 
INTERVAL DAYOFMONTH(my_date_field) - 1 DAY),5) + 1 
```

或者你可以[在这里](https://dreamdevourer.com/week-of-the-month-in-mysql/)看到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-12T18:39:00.757

```
TO_CHAR(my_date, 'W') 
```

返回特定月份的确切周数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-03T08:49:55.693

SELECT (WEEK('2020-09-27') - WEEK(DATE_FORMAT('2020-09-27','%Y-%m-01')))+1

# jquery - Dreamweaver 在 Jquery 脚本中引发错误

> ID：12046735
> 
> 赞同：0
> 
> 时间：2012-08-20T23:47:21.020
> 
> 标签：jquery, function

我试图在页面的头部使用以下内容，但是当我使用 Dreamweaver 将其放入时出现错误，但我不确定错误在哪里？

```
<script>
$('.multiselect, this).each(function(key, val){  $(this).multiselect({     
noneSelectedText:''+$(this).attr('title')+''  });     
});
</script> 
```

# sitecore - sitecore 图像地图编辑器验证问题

> ID：12046736
> 
> 赞同：0
> 
> 时间：2012-08-20T23:47:27.540
> 
> 标签：sitecore, rich-text-editor

在 Sitecore 中，当我创建图像映射并将其保存在富文本编辑器中时，它给了我一个 XHTML 验证错误。有没有人有任何想法来克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:20:45.693

默认情况下，全局验证项包括“整页 XHtml”，因此导航到`/sitecore/system/Settings/Validation Rules/Global Rules`4 个选择器中的 2 个并从中删除整页 XHtml。

# perl - RT3 中使用的 LDAP 组成员过滤器

> ID：12046739
> 
> 赞同：1
> 
> 时间：2012-08-20T23:47:48.697
> 
> 标签：perl, ldap, rt

我正在尝试为[RT3](http://bestpractical.com/rt/)站点的 Active Directory 服务器设置 LDAP 身份验证。

我认为 LDAP 身份验证模块中存在错误，但我真的不明白过滤器试图做什么。见[`RT/Authen/ExternalAuth/LDAP.pm`第 126 行](https://metacpan.org/source/FALCONE/RT-Authen-ExternalAuth-0.11/lib/RT/Authen/ExternalAuth/LDAP.pm#L126)：

```
$ldap_msg = $ldap->search(  base   => $group,
                            filter => $filter,
                            attrs  => \@attrs,
                            scope  => 'base'); 
```

有一个配置文件指定`group`,`group_attr`和`group_attr_value`.

组作为 传递`$group`，过滤器是从`group_attr=group`字符串创建的。在我的情况下`group_attr = present`，`memberOf`线路回来了`CN=ITAdmins,CN=Builtin,DC=SPGLOBAL,DC=local`，过滤器变成了`Filter: (present=CN=ITAdmins,CN=Builtin,DC=SPGLOBAL,DC=local)`and `Attrs: dn`。

这对过滤器无效，但是任何对此了解更多的人都可以看到要发生的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:20:54.247

感谢您发布代码链接，这使得它更易于理解。

所以模型是，使用用户名和密码进行身份验证，然后使用 $group，如果已定义，则意味着检查他们是否是组的成员以允许他们进入。

$group 应该是一个完整的 LDAP DN，所以 cn=AccessGroup,ou=Groups,dc=myDomain,dc=com 等。

$group_attr_val 应该是 member、memberOf 或 Member，这取决于目标 LDAP 目录中的 member 属性。

所以我认为你的问题是 group-attr=present 可能是错误的，应该像 member 一样简单。

# javascript - 如何在外部网站上获取被 javascript 隐藏的 url？

> ID：12046740
> 
> 赞同：0
> 
> 时间：2012-08-20T23:48:01.467
> 
> 标签：javascript, asp.net

如何在外部网站上获取被 javascript 隐藏的 url？

例如：[http](http://royaldesign.se/Att_Dricka.aspx) ://royaldesign.se/Att_Dricka.aspx 这个url在页面导航中是不变的，所以页面内容是由javascript加载的。

页面链接位置：

```
javascript:__doPostBack('ctl00$masterContent$DataPager2$ctl00$ctl00','')
javascript:__doPostBack('ctl00$masterContent$DataPager1$ctl00$ctl01','')
javascript:__doPostBack('ctl00$masterContent$DataPager1$ctl00$ctl02','') 
```

......

有没有办法分析（手动或通过 PHP 脚本）函数 __doPostBack 以了解网址？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:44:01.707

我在另一个问题上给出了一些关于“抓取” ASP.net 页面的提示：[curl 脚本只是填写表单而不是提交它](https://stackoverflow.com/questions/12029324/curl-script-just-filling-up-the-form-not-submitting-it/12046718#12046718)

此处讨论了使用 CURL 模拟 POST 请求的基础知识：[PHP + curl, HTTP POST 示例代码？](https://stackoverflow.com/questions/2138527/php-curl-http-post-sample-code)

我还要补充一点，如果您从中“抓取”的网站由与您有友好关系的人拥有（而不是竞争对手！），您可以通过很好地询问内容来节省**大量**时间，或者为您提供内容的静态 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:41:39.520

`__doPostBack`javascript 函数用于向asp.net 页面提交数据。

该函数的第一个参数是事件目标。这是正在单击的控件的[ClientID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)。

当页面被提交时， Asp.net 使用这个值在服务器上引发一个`Click`事件。

您可以自己通过 javascript 调用此`__doPostBack`函数，以获得与用户单击它相同的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:52:07.180

这些值没有隐藏，__doPostBack 方法回传给它自己。传递给 doPostBack 的那些值表示执行回发的控件的 html ID。

您查看的页面也是用 ASP.NET 编写的，而不是 PHP。

您可以使用浏览器调试工具来查看通过 javascript 将哪些数据传回服务器。

# jquery - Jquery 仅适用于 Chrome 和 Safari

> ID：12046742
> 
> 赞同：0
> 
> 时间：2012-08-20T23:48:18.713
> 
> 标签：jquery, css, google-chrome, safari

在我的网站上，我有一个高度为 100% 的主体，jquery 应该找到主体的高度，然后更改侧边栏上的 css 以匹配它的高度。它适用于 Firefox 和所有版本的 IE，但不适用于 Chrome 或 Safari。我对此有点陌生，所以提前感谢您的帮助。这是我的网站：[http](http://avk.io-web.com/product-list/healthy-gormet-cookies) ://avk.io-web.com/product-list/healthy-gormet-cookies 这是我的 jquery：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>    
<script type="text/javascript">
$(document).ready(function() {

var SecondaryContentHeight= $(".secondary_body_content").height()
$(".left_menu").css("height", SecondaryContentHeight);
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:52:24.983

```
<script type="text/javascript">
$(window).load(function() {
    var SecondaryContentHeight = $(".secondary_body_content").height();
    $(".left_menu").css("height", SecondaryContentHeight);
});
</script> 
```

或优化

```
<script>$(window).load(function(){$(".left_menu").css("height",$(".secondary_body_content").height())})</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:10:44.987

问题是您在加载正文内容中的所有内容之前获得了高度。如果您删除正文内容中的大图像，您会看到它们大多排成一列。请记住，当 DOM 准备好而不是页面中的所有内容都完成加载时，document ready 会触发。您可以将 .load() 事件绑定到页面上的图像，然后计算左侧菜单的高度，但这不会 100% 起作用。

理想的解决方案是全部使用 HTML 和 CSS。有很多固定列 css 布局示例。[一个例子在这里](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

顺便说一句，如果您清除缓存并足够快地向下滚动，它在 FireFox 中也不起作用。有时图像会在 javascript 之前加载，但这不能保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T00:06:42.163

这似乎在您网站上的 chrome 中对我有用：

```
$(".left_menu").height($(".secondary_body_content").height()); 
```

# c++ - GHashTable vs std::tr1::unordered_map

> ID：12046747
> 
> 赞同：0
> 
> 时间：2012-08-20T23:49:06.193
> 
> 标签：c++, hashtable

有没有人同时使用 GHashTable 和 std::tr1::unordered_map？我想知道使用哪一种，更推荐使用哪一种。我在网上找不到任何真正有用的东西。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T04:38:50.567

当标准库容器和工具可以工作时，我偏爱它们。这使得软件更便携。因此，在此基础上，我将使用 std::tr1::unordered_map 或更好，我将使用 C++11 并使用 std::unordered_map （如果您有合适的编译器并且可以使用 C++11），即本质上与 tr1 容器相同，但有一些额外的加速。

最后，从上面的链接中可以看出，@mfontanini unordered_map 与许多实现相比非常快。

# javascript - 如何使用 Handlebars 在父视图中动态分配部分视图？

> ID：12046748
> 
> 赞同：0
> 
> 时间：2012-08-20T23:49:36.243
> 
> 标签：javascript, web-applications, handlebars.js, sammy.js

我对 web 应用程序开发和 Handlebars & Sammy 框架都有些陌生，所以如果这是一个有点明显的问题，请原谅。

我为如下所示的页面创建了一个主视图模板：

```
<article id="imageWrapper">
    <img src="{{img.url}}" alt="{{img.title}}" />
</article>
<article id="pageContent">
    {{> page}}
</article> 
```

`page`我的部分观点在哪里。我正在尝试解决以下问题：

我有几种不同的页面类型（如网格状画廊、一些纯文本页面等），但它们都遵循这种一般布局。我不想将这些代码片段复制并粘贴到 x 数量的子页面视图中，而是创建一个所有子视图“继承”的“主视图” - 这样我的画廊视图和文本视图都具有相同的外部结构，但仍然可以在其他地方指定自己的子视图。

我正在使用 JS 框架[Sammy](http://sammyjs.org/)来处理这些视图的创建，但据我从他们的[API 文档](http://sammyjs.org/docs/api/0.7.1/all)中了解到，该框架没有处理我的情况的`Render`or`Partial`方法（能够同时指定父视图和子视图）。

我错过了什么，还是我必须以“不那么酷”的方式来做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:08:49.877

让我允许自己回答我自己的问题——对于未来的初学者。我花了一些时间才弄清楚，但现在一切正常。

Sammy 的`Render`- 方法实际上采用一个对象，该对象包含部分视图名称（键）的键值对和数据本身之后的部分视图（值）的路径。我的实现最终看起来像这样：

```
context.render('templates/contentPage.hb', item, {subView: 'templates/textView.hb'}); 
```

subView-string 只是在路由之间更改，但如果这是您的情况，也可以为一条路由动态更改（显然）。要包含您的局部视图，只需在模板的局部视图语法中提及它：

```
{{>subView}} 
```

它将被包括在内。

# java - JSP 只能导入一个类型

> ID：12046752
> 
> 赞同：0
> 
> 时间：2012-08-20T23:50:32.517
> 
> 标签：java, jsp, tomcat

所以我在这里尝试使用 Oracle 的示例代码：http: [//docs.oracle.com/cd/E25054_01/doc.1111/e17332/api002.htm#autoId91](http://docs.oracle.com/cd/E25054_01/doc.1111/e17332/api002.htm#autoId91)

它具有以下导入类：

```
<%@page contentType="text/html; charset=utf-8" %>
<%@page import = "java.util.Vector" %>
<%@page import = "java.net.URL" %>
<%@page import = "java.util.Properties" %>
<%@page import = "java.util.HashMap" %>
import javax.xml.rpc.Stub;
<%@page import = "oracle.search.query.webservice.client.*" %> 
```

如您所见，第 6 行与其他行不同。如果我留下这样的代码，页面就会加载，并且该行的文本只会打印在屏幕上。如果我将线路更改为与其他线路一样：

```
<%@page import = "javax.xml.rpc.Stub" %> 
```

我得到错误：

```
Only a type can be imported. javax.xml.rpc.Stub resolves to a package. 
```

以下也不起作用：

```
<%@page import = "javax.xml.rpc.Stub;" %>
<%@page import = "javax.xml.rpc.Stub.*" %> 
```

那么如何正确导入这个类呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:18:02.520

该包位于名为 jaxrpc.jar 的文件中；确保该文件位于应用程序的类路径中。但不建议将 java 代码和 html 代码一起编写。把你的java代码放到javabeans中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:33:07.843

看起来像

```
javax.xml.rpc.Stub 
```

不在类路径中。

我猜你实际上并没有在你的页面中使用它，所以它只会打印

```
import javax.xml.rpc.Stub; 
```

但不会导入此接口（因为缺少 @page 指令）。

顺便说一句：这个存根接口包含在[jaxrpc-api](http://mvnrepository.com/artifact/javax.xml/jaxrpc-api/1.1.3)中。

# git - 我如何通过这个 git 错误来阻止合并，因为一些未知的本地更改会丢失？

> ID：12046754
> 
> 赞同：0
> 
> 时间：2012-08-20T23:50:40.553
> 
> 标签：git, version-control, merge

当我尝试`git pull`在我的分支中时，我得到：

```
error: Your local changes to the following files would be overwritten by merge:
    Vendor/JSONKit 
```

确实，当我执行 a 时`git status`，它说 Vendor/JSONKit 已“修改”。

Vendor/JSONKit 包含一个名为 JSONKit (https://github.com/johnezang/JSONKit) 的第三方项目。我从来没有接触过这段代码。我也没有设置文件夹——但我认为它就是所谓的“子模块”。

是什么导致了这个错误，我该如何克服它？如果我尝试`git stash`，它声称我“没有要保存的本地更改”。如果我进入 Vendor/JSONKit 并尝试做任何事情，git 会说我不再在分支上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:22:40.670

在单个存储库中：

您应该能够使用 探索差异`git diff -- Vendor/JSONKit`，但如果您只想重置文件（并放弃更改），请发出以下命令：

```
git checkout HEAD -- Vendor/JSONKit 
```

`Vendor/JSONKit`这将检查您工作目录中的最新版本并放弃修改。

* * *

在带有子模块的存储库中：

Git 子模块允许您将 git 存储库相互嵌入。假设“JSONKit”是“MyApp”中的一个子模块。顶级 git 存储库`MyApp`仅跟踪 的`HEAD`提交`JSONKit`，因此您可以在历史的任何时候完美地重建`MyApp`' 和`JSONKit`' 的状态。

假设您在`JSONKit`存储库中提交了更改。在里面`JSONKit`，这看起来像一个正常的差异并且有一个正常的历史。在父存储库中`MyApp`，它将注册为对`HEAD`提交的更改。它可能看起来像这样的差异，取自[git scm 文档。](http://git-scm.com/book/en/Git-Tools-Submodules)本例中的子模块是一个名为“rack”的目录。

```
$ git diff --cached rack
diff --git a/rack b/rack
new file mode 160000
index 0000000..08d709f
--- /dev/null
+++ b/rack
@@ -0,0 +1 @@
+Subproject commit 08d709f78b8c5b0fbeb7821e37fa53e69afcf433 
```

如何`MyApp`知道哪些目录是子模块？它在`.gitmodules`文件中被跟踪。`cat`它，你会看到注册的每个子模块`MyApp`：

```
$ cat .gitmodules 
[submodule "rack"]
    path = rack
    url = git://github.com/chneukirchen/rack.git 
```

当您发出 时，您告诉 git 检查父存储库索引中的`git submodule update`最新`HEAD`提交，从而放弃子模块存储库中的更改：`JSONKit`

```
update
   Update the registered submodules, i.e. clone missing submodules and checkout the commit specified in the index of the containing repository. This will
   make the submodules HEAD be detached unless --rebase or --merge is specified or the key submodule.$name.update is set to rebase, merge or none.  none
   can be overridden by specifying --checkout. 
```

# python - sqlite3：安全的多任务读写 - 如何？

> ID：12046760
> 
> 赞同：3
> 
> 时间：2012-08-20T23:51:03.063
> 
> 标签：python, concurrency, sqlite

我有两个程序：第一个只写入 sqlite db，第二个只读取。我可以确定永远不会有错误吗？或者如何避免它（在python中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T03:17:42.417

是的，它通常是安全的。

[根据 SQLite 常见问题解答](http://www.sqlite.org/faq.html#q5)：

> 多个进程可以同时打开同一个数据库。多个进程可以同时执行 SELECT。但是，任何时候只有一个进程可以对数据库进行更改。

由于只有一个进程正在写入，这很好。

例外：如果您的`.sqlite`文件存储在网络驱动器（Windows 或 NFS）上，这可能会中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T03:11:32.343

通常，如果一次只有一个程序编写 sqlite db，这是安全的。（如果没有，它会引发类似“数据库被锁定”的异常，而两个写操作要同时写。）

顺便说一句，无法保证程序永远不会出错。用于`Try ... catch`处理异常将使程序更安全。

# node.js - 如何使用来自不同文件的多个块？

> ID：12046764
> 
> 赞同：7
> 
> 时间：2012-08-20T23:51:38.207
> 
> 标签：node.js, templates, express, pug

我有一个`layout.jade`看起来像这样的：

```
html
  body
    block content
    block footer 
```

我的`content.jade`样子是这样的：

```
extends layout

block content
    #Content Welcome 
```

我的`footer.jade`样子是这样的：

```
extends layout

block footer
    #Footer Impressum 
```

现在，当我`app`这样运行时：

```
app.get('/', function(req, res) {
    res.render('layout');
}); 
```

我既看不到内容也看不到页脚。

当我运行时：

```
app.get('/', function(req, res) {
    res.render('content');
}); 
```

然后我看到了内容。

当我运行时：

```
app.get('/', function(req, res) {
    res.render('footer');
}); 
```

然后我看到页脚。

我怎样才能同时看到内容和页脚？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-21T00:00:14.307

你可能想要这样的东西：

`layout.jade`

```
html
  body
    block content
    include footer 
```

`pagename.jade`

```
extends layout

block content
  h1 My Content 
```

`footer.jade`

```
p.footer Here is my footer 
```

然后运行`res.render('pagename');`。

除非您想在每页的页脚中包含特定内容，否则将其设置为块是没有意义的。

# vb.net - 从通用列表中动态选择一列

> ID：12046768
> 
> 赞同：0
> 
> 时间：2012-08-20T23:52:18.833
> 
> 标签：vb.net, linq

我有一个 200 列宽的表，需要返回特定行和列的数据，但直到运行时我才知道该列。我可以通过 LINQ 轻松地将我想要的行放入列表、单个强类型对象或数组中，但我一生都无法弄清楚如何找到我需要的列。

所以例如（在较小的规模上）我的桌子看起来像这样

```
GrowerKey | day1 | day2 | day3  | day4 |
-----------------------------------------
  3       |  1   |   3  |   2   |   2 |
  4       |  6   |   1  |   9   |   1 |
  5       |  8   |   8  |   2   |   4 | 
```

我可以用像这样简单的东西得到我想要的行

```
Dim CleanRecord As List(Of Grower_Clean_Schedule) = (From key In eng.Grower_Clean_Schedules
                                                     Where key.Grower_Key = Grower_Key).ToList 
```

然后我如何只返回该行的特定列的值（比如存储在“day2”中的值）当我直到运行时才知道哪一列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:22:07.770

像这样的东西（从`CleanRecord`你在问题中定义的开始）：

```
dim matchingRow = CleanRecord.First()

dim props = matchingRow.GetType().GetProperties( _
                BindingFlags.Instance or BindingFlags.Public))

dim myReturnVal = (from prop in props _
                   where prop.Name = "day2" _
                   select prop.GetValue(matchingRow, Nothing).FirstOrDefault()

return myReturnVal 
```

# java - 您如何访问课程？

> ID：12046775
> 
> 赞同：-2
> 
> 时间：2012-08-20T23:52:51.673
> 
> 标签：java

我有

```
public class TestApp { // TestApp.java
    public static void main(String[] args) throws Exception {
        TestClass x = new TestClass(); // compiler error
    }
} 
```

和

```
public class TestClass { // TestClass.java
    public TestClass() {
    }
} 
```

TestClass 是通过右键单击项目并单击添加类来创建的。

我正在使用 NetBeans

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:36:33.627

假设您没有为任一类声明包：

将它们放在同一个文件夹中后它起作用的原因是它们都成为同一个包的一部分。

这是默认的未命名包。同一个源文件夹中所有没有包声明的源文件都属于该文件夹的默认包。此外，它们不能被导入以在其他包中使用。

它对于小型测试应用程序很有用，但您应该努力将所有类放在适当的包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:26:17.833

班级以他们的名字，他们的*全*名而闻名！

com.myapplication.mymodule.Myclass

您可以使用提供的短部分：

*   使用导入语句：import com.myapplication.mymodule.Myclass
*   在具有相同包的类中使用短名称

从您的示例中，在使用导入之前，您可以使用全名：

```
com.test.TestClass x = new com.test.TestClass(); // change "com.test" for the real package 
```

# ios - 团队供应配置文件是否足以用于开发？

> ID：12046776
> 
> 赞同：0
> 
> 时间：2012-08-20T23:53:18.080
> 
> 标签：ios, certificate, provisioning-profile

作为我团队中的开发人员，团队供应配置文件是否足以进行开发？换句话说，我需要进一步开发配置文件来为我的团队开发和测试吗？

因为我只是在我的团队中担任技术角色，所以对我来说添加新的配置文件很麻烦。我必须要求管理员这样做，因为他们太忙而无法进行此类操作。

如果 Team Provisioning Profile 足以满足我的开发需求，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T00:07:56.220

如果您只是在进行不涉及某些专门的 iOS 功能（即 iCloud 存储、推送通知、应用内购买、游戏中心）的开发，则团队配置文件就足够了。如果您不执行任何这些操作，那么 Team Profile 将足以进行开发/调试。但是，在实际发布应用程序时，需要创建一个单独的分发配置文件。

# javascript - 使用 WebDriver 自动、定时下载文件

> ID：12046778
> 
> 赞同：0
> 
> 时间：2012-08-20T23:53:37.337
> 
> 标签：javascript, file, selenium, download, webdriver

我正在使用 WebDriver 自动化网站，但我的文件下载需求与我在谷歌搜索时发现的有点不同。

我有一个创建订单的网站。当我单击“下订单”按钮时，它会将我重定向到“打印订单”页面。作为对我来说“方便”，这个页面在它的正文 onload 中自动启动下载操作，这意味着当我点击“下订单”按钮时，我转到一个新页面，然后立即出现一个文件下载对话框让我下载生成的pdf，从而阻止浏览器。

以下是我找到/想到的解决方案，以及为什么我不能使用它们：

1.  配置 Firefox/Chrome 配置文件以静默下载文件。不能使用这个，因为我需要计时下载需要多长时间。

2.  使用阻止下载的函数覆盖 window.open，并允许我获取 URL 并使用 wget 下载它。不能使用这个，因为文件下载是从下一页的onload函数开始的，所以我在这个页面上运行的任何javascript都会丢失。

3.  取消onload函数或尝试在onload函数之前执行代码。在 webdriver 中找不到执行此操作的方法。

4.  使用 wget 下载打印页面，修改 html 以更改 onload 处理程序，并将修改后的 html 注入回 selenium。找不到替换整个页面的方法，包括 <head> 和 <body> 标记和 URL。

不幸的是，我无法更改此网站的源代码，因为我在 QA 工作，而且我没有那种开发能力。有没有人对以可以定时的自动方式下载此文件的方法有任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:51:21.887

在我看来，您有两个选择。

1.  收到弹出窗口后，使用 AUTOIT 脚本下载文件，这将测试页面打开和下载的功能。
2.  仅使用 http get 下载文件。这会错过页面加载的测试，但仍会检查文件是否存在。

您上面提到的其他测试似乎太复杂了。

# animation - 从网站检索 .swf

> ID：12046779
> 
> 赞同：0
> 
> 时间：2012-08-20T23:53:38.080
> 
> 标签：animation, flash

我想知道你们是否可以帮助我。我正在为授权的 Dish 经销商创建一个网站。我一直在尝试在 disc.com 上检索 Flash 动画。我可以通过带有“页面信息”的 Firefox 获得它，但我得到的只是一个没有动画的黑色矩形。它是一个 .swf，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:02:31.507

那里有几个可能的问题。

电影有可能从该域加载某些内容，当容器电影加载到另一个域中时，由于跨域策略问题（和安全沙箱限制），这些内容不会被加载。

此外，在其代码中，开发人员可能已经检查了 URL 并相应地限制了一些操作。

另一种可能性是，它可能正在使用从页面源收集的一些数据，或者您可能没有提供它的服务器端脚本。

这些是我能想到的最有可能的可能性，但如果我有机会思考更多，我相信我能想出很多其他的可能性。

# java - 组织 Eclipse 工作区

> ID：12046783
> 
> 赞同：1
> 
> 时间：2012-08-20T23:54:10.080
> 
> 标签：java, eclipse, workspace

我喜欢井井有条，我讨厌将我所有的 java 项目都放在工作区中的 eclipse 中。它使它变得非常混乱，我想要一种更有条理的方法，我的工作区中有用于不同类型项目的文件夹。但是，文件夹只能添加到其他文件夹中，而不是工作区本身。此外，我想要一种能够将类放入任何文件夹的方法，而不仅仅是项目中的 src 文件夹。我喜欢 eclipse，但我真的希望组织程序的方式更灵活一点。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:52:47.880

我认为组织给一个人的东西对另一个人来说是不一样的。我发现其中一些技巧很有帮助，也许它们会对你有所帮助

*   将项目分组到工作集，这样您就看不到完整的工作区
*   您可以将源保存在不同的文件夹中，将这些源文件夹添加到构建路径中
*   使用与您的版本控制存储库和问题管理系统（如 JIRA）集成的 Collabnet 等工具，在给定的时间点，您只能查看与您正在处理的问题相关的文件。
    *   非常了解您的键盘快捷键

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:25:42.317

据我了解，您正在制定两个期望：

1.  为您的项目提供清晰的目录结构，独立于 IDE；
2.  有一个清晰的工作空间组织，它反映了您项目的底层结构。

你没有提到一些东西，它是你项目的构建工具。我猜你是在 Eclipse 中编译和运行你的项目？如果没有，或者如果您愿意在 Eclipse IDE 之外编译、测试、部署和运行您的项目，您可以看看像[Maven](http://maven.apache.org/)这样的全功能工具。

关键是，即使您不想在 IDE 之外构建项目，此工具也会为您节省大量时间，甚至值得使用它来获得清晰、正确、常规且易于理解的目录结构似乎期待。另一方面，问题在于这样的工具解决了远远超出您自己要求的问题，这可能会使其仅用于上面公开的目的。

对于喜欢有条理的人来说，Maven 是一个完美的工具。它的核心概念之一是*约定优于配置*。

这意味着，例如，如果您的项目遵循 Maven 约定，那么简单的命令

```
 mvn eclipse:eclipse 
```

将为您的每个人生成一个相应的 Eclipse 项目，您将能够从 Eclipse 外部配置、生成和清理该项目。

# iphone - 手势在 UITableViewCell 的右侧不起作用

> ID：12046784
> 
> 赞同：0
> 
> 时间：2012-08-20T23:54:18.290
> 
> 标签：iphone, ios, uitableview

我有一个带有大型交互式控件的自定义内容视图，其中包含多个附加了平移手势的子视图。控件左侧的交互位起作用，但右侧的位不起作用。

我的猜测是有一些观点吸收了这些手势。有没有办法确保手势在控制侧或表格单元侧通过？

我尝试过执行以下操作：

```
 [[cell textLabel] removeFromSuperview];
    [[cell accessoryView] removeFromSuperview];
    [[cell backgroundView] removeFromSuperview];
    [[cell contentView] addSubview:display]; //adding my custom view 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:22:27.960

我遇到过类似的问题，单元格限制了 contentView 的宽度。尝试将 contentView 的背景颜色设置为绿色或其他颜色 - 这是就可用区域而言您将获得的最大值。

我相信您需要做的是，当您知道用户想要与控件交互时，将其从单元格中拉出并将其添加到主视图中。完成后，将其放回原处。当然，在此期间，您必须防止滚动。

如果移动控件导致触摸流出现问题，您可以添加另一个覆盖控件的清晰视图，拦截第一次触摸，移动控件，然后将触摸转发给控件。

显然，这种技术可以帮助您在控件移动后最终触摸到控件的整个表面，但是如果它太靠右，最初的触摸将不起作用。

# java - 某些字段的杰克逊 JSON 自定义序列化

> ID：12046786
> 
> 赞同：108
> 
> 时间：2012-08-20T23:54:38.650
> 
> 标签：java, json, serialization, jackson

有没有办法使用杰克逊 JSON 处理器进行自定义字段级序列化？例如，我想上课

```
public class Person {
    public String name;
    public int age;
    public int favoriteNumber;
} 
```

序列化为以下 JSON：

```
{ "name": "Joe", "age": 25, "favoriteNumber": "123" } 
```

请注意，age=25 被编码为**数字**，而 favoriteNumber=123 被编码为**字符串**。开箱即用的杰克逊编组`int`到一个数字。在这种情况下，我希望将 favoriteNumber 编码为字符串。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-08-21T00:25:17.300

您可以按如下方式实现自定义序列化程序：

```
public class Person {
    public String name;
    public int age;
    @JsonSerialize(using = IntToStringSerializer.class, as=String.class)
    public int favoriteNumber:
}

public class IntToStringSerializer extends JsonSerializer<Integer> {

    @Override
    public void serialize(Integer tmpInt, 
                          JsonGenerator jsonGenerator, 
                          SerializerProvider serializerProvider) 
                          throws IOException, JsonProcessingException {
        jsonGenerator.writeObject(tmpInt.toString());
    }
} 
```

Java 应该为您处理从`int`到的自动装箱`Integer`。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-02-14T11:24:56.757

Jackson-databind (至少 2.1.3) 提供了特殊的`ToStringSerializer`( `com.fasterxml.jackson.databind.ser.std.ToStringSerializer`)

例子：

```
public class Person {
    public String name;
    public int age;
    @JsonSerialize(using = ToStringSerializer.class)
    public int favoriteNumber:
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-08-21T00:13:58.287

为该字段添加一个带`@JsonProperty`注释的 getter，它返回 a ：`String``favoriteNumber`

```
public class Person {
    public String name;
    public int age;
    private int favoriteNumber;

    public Person(String name, int age, int favoriteNumber) {
        this.name = name;
        this.age = age;
        this.favoriteNumber = favoriteNumber;
    }

    @JsonProperty
    public String getFavoriteNumber() {
        return String.valueOf(favoriteNumber);
    }

    public static void main(String... args) throws Exception {
        Person p = new Person("Joe", 25, 123);
        ObjectMapper mapper = new ObjectMapper();
        System.out.println(mapper.writeValueAsString(p)); 
        // {"name":"Joe","age":25,"favoriteNumber":"123"}
    }
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-08-15T13:51:16.760

jackson-annotations 提供`@JsonFormat`了无需编写自定义序列化程序即可处理大量自定义的功能。

例如，`STRING`为数字类型的字段请求形状会将数值输出为字符串

```
public class Person {
    public String name;
    public int age;
    @JsonFormat(shape = JsonFormat.Shape.STRING)
    public int favoriteNumber;
} 
```

将产生所需的输出

```
{"name":"Joe","age":25,"favoriteNumber":"123"} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-04-05T09:34:49.013

如果你不想用注释污染你的模型并且想要执行一些自定义操作，你可以使用 mixins。

```
ObjectMapper mapper = new ObjectMapper();
SimpleModule simpleModule = new SimpleModule();
simpleModule.setMixInAnnotation(Person.class, PersonMixin.class);
mapper.registerModule(simpleModule); 
```

覆盖年龄：

```
public abstract class PersonMixin {
    @JsonSerialize(using = PersonAgeSerializer.class)
    public String age;
} 
```

随年龄做任何你想做的事：

```
public class PersonAgeSerializer extends JsonSerializer<Integer> {
    @Override
    public void serialize(Integer integer, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {
        jsonGenerator.writeString(String.valueOf(integer * 52) + " months");
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-12T06:25:04.937

**在@JsonView**的帮助下，我们可以决定要序列化的模型类的字段满足最低标准（我们必须定义标准），就像我们可以拥有一个具有 10 个属性的核心类，但只能序列化 5 个客户需要的属性只要

通过简单地创建以下类来定义我们的视图：

```
public class Views
{
    static class Android{};
    static class IOS{};
    static class Web{};
} 
```

带视图的注释模型类：

```
public class Demo 
{
    public Demo() 
    {
    }

@JsonView(Views.IOS.class)
private String iosField;

@JsonView(Views.Android.class)
private String androidField;

@JsonView(Views.Web.class)
private String webField;

 // getters/setters
...
..
} 
```

现在我们必须通过简单地从 spring 扩展 HttpMessageConverter 类来编写自定义 json 转换器：

```
 public class CustomJacksonConverter implements HttpMessageConverter<Object> 
    {
    public CustomJacksonConverter() 
        {
            super();
        //this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.ClientView.class));
        this.delegate.getObjectMapper().configure(MapperFeature.DEFAULT_VIEW_INCLUSION, true);
        this.delegate.getObjectMapper().setSerializationInclusion(Include.NON_NULL);

    }

    // a real message converter that will respond to methods and do the actual work
    private MappingJackson2HttpMessageConverter delegate = new MappingJackson2HttpMessageConverter();

    @Override
    public boolean canRead(Class<?> clazz, MediaType mediaType) {
        return delegate.canRead(clazz, mediaType);
    }

    @Override
    public boolean canWrite(Class<?> clazz, MediaType mediaType) {
        return delegate.canWrite(clazz, mediaType);
    }

    @Override
    public List<MediaType> getSupportedMediaTypes() {
        return delegate.getSupportedMediaTypes();
    }

    @Override
    public Object read(Class<? extends Object> clazz,
            HttpInputMessage inputMessage) throws IOException,
            HttpMessageNotReadableException {
        return delegate.read(clazz, inputMessage);
    }

    @Override
    public void write(Object obj, MediaType contentType, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException 
    {
        synchronized(this) 
        {
            String userAgent = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader("userAgent");
            if ( userAgent != null ) 
            {
                switch (userAgent) 
                {
                case "IOS" :
                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.IOS.class));
                    break;
                case "Android" :
                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.Android.class));
                    break;
                case "Web" :
                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( Views.Web.class));
                    break;
                default:
                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));
                    break;
                }
            }
            else
            {
                // reset to default view
                this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));
            }
            delegate.write(obj, contentType, outputMessage);
        }
    }

} 
```

现在需要告诉spring使用这个自定义的json转换，只需将它放在dispatcher-servlet.xml中

```
<mvc:annotation-driven>
        <mvc:message-converters register-defaults="true">
            <bean id="jsonConverter" class="com.mactores.org.CustomJacksonConverter" >
            </bean>
        </mvc:message-converters>
    </mvc:annotation-driven> 
```

这就是您能够决定要序列化哪些字段的方式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-17T18:47:04.043

您可以在 mixin 中内联创建自定义序列化程序。然后用它注释一个字段。*请参阅下面的示例，该示例将“ - something else* ”附加到 lang 字段。这有点***骇人听闻***- 如果您的序列化程序需要诸如存储库之类的东西或 spring 注入的任何东西，这将是一个问题。可能最好使用自定义反序列化器/序列化器而不是 mixin。

```
package com.test;

import com.fasterxml.jackson.annotation.JsonAutoDetect;
import com.fasterxml.jackson.annotation.JsonAutoDetect.Visibility;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonPropertyOrder;
import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonSerializer;
import com.fasterxml.jackson.databind.SerializerProvider;
import com.fasterxml.jackson.databind.annotation.JsonSerialize;
import com.test.Argument;
import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
//Serialize only fields explicitly mentioned by this mixin.
@JsonAutoDetect(
    fieldVisibility = Visibility.NONE,
    setterVisibility = Visibility.NONE,
    getterVisibility = Visibility.NONE,
    isGetterVisibility = Visibility.NONE,
    creatorVisibility = Visibility.NONE
)
@JsonPropertyOrder({"lang", "name", "value"})
public abstract class V2ArgumentMixin {

  @JsonProperty("name")
  private String name;

  @JsonSerialize(using = LangCustomSerializer.class, as=String.class)
  @JsonProperty("lang")
  private String lang;

  @JsonProperty("value")
  private Object value;

  public static class LangCustomSerializer extends JsonSerializer<String> {

    @Override
    public void serialize(String value,
                          JsonGenerator jsonGenerator,
                          SerializerProvider serializerProvider)
        throws IOException, JsonProcessingException {
      jsonGenerator.writeObject(value.toString() + "  - something else");
    }
  }
} 
```

# android - 活体检查Android（眨眼）

> ID：12046788
> 
> 赞同：4
> 
> 时间：2012-08-20T23:54:39.693
> 
> 标签：android, detection

自 Android 4.0 起，Google 提供了一些人脸检测 API。

在 Jelly Bean 中，我们可以看到 FaceUnlock 中的“活体检查”功能。

我在谷歌搜索了很多，我还没有找到实现这一点的方法。我的意思是，捕捉用户的眨眼。

我见过一些 OpenCV 线程，但由于 Android 已经提供了这个，我想没有必要使用任何其他 API。

那么，任何人都可以帮助我如何使用简单的 Android API 创建“活动检查”功能吗？

欢迎任何帮助！

# http - 服务器端脚本可以让浏览器确保完全下载吗？

> ID：12046793
> 
> 赞同：1
> 
> 时间：2012-08-20T23:55:03.593
> 
> 标签：http, browser, download

我的服务器上有一个脚本，它生成的内容作为要下载的文件发送给用户。问题是有时内容可能会有点长，有时通信可能会在下载过程中中断......在这种情况下，下载会停止并且到目前为止发送的内容会被保存。如果可以通知用户文件尚未完全下载以便他们再次尝试，这不会那么糟糕。但通常在用户方面似乎没有什么问题：浏览器只是简单地宣布“下载完成”！然后用户发现存在问题并且文件的一部分在他们实际尝试打开文件并使用它时才丢失（这为时已晚）。

那么有没有办法让服务器端脚本发送要由浏览器下载的文件，让浏览器在下载未完成的情况下显示错误？

顺便说一句，为了发送文件，我使用了这三个 HTTP 标头：

```
Content-Type: application/octet-stream
Content-Disposition: attachment; filename="MyFile.ext"
Content-Length: <no. of bytes> 
```

我实际上可以提前知道内容的长度，并且浏览器在通知用户下载时实际上会向用户显示这个数字。但是，在下载正确的字节数之前下载完成时，浏览器什么也没说，我不能指望我的用户检查他们下载的文件的确切大小并将其与浏览器宣布的内容进行比较前。

在这种情况下，是否有浏览器配置会使浏览器宣布错误？或者是否有另一个我可以发送的 HTTP 标头（可能带有一些校验和或 CRC 或其他东西）会产生预期的效果？

任何帮助将非常感激！

**编辑：**这是一个简单的 PHP 代码，用于测试浏览器在下载量过小的情况下的行为：

```
<?php
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="test.txt"');
header('Content-Length: 300');
echo 'Will there be a warning?'; 
```

此代码将一个名为`test.txt`且据称长 300 字节的文件发送到浏览器以供下载。实际上内容要小得多。浏览器等待更多内容，然后放弃并宣布“下载完成”，没有任何警告。

# c++ - 如何以最快的速度加载 128 位数据并兼容 GPU (CUDA C++) 和 CPU (C++)？

> ID：12046797
> 
> 赞同：0
> 
> 时间：2012-08-20T23:55:29.560
> 
> 标签：c++, cuda, gpgpu

我需要在 CUDA C++ 中为每个线程加载 128 位数据。在这种情况下，最好使用 CPU 代码以获得最大性能和兼容性？请问下面的例子访问数据的性能是否相同？

1：使用两个：

```
unsigned __int64 src1 = arr[threadIdx.x/2];
unsigned __int64 src2 = arr[threadIdx.x/2 + 1]; 
```

2：用途：

```
struct T_src { unsigned __int64 src1, src2; };
T_src src = arr[threadIdx.x]; 
```

3：使用特定类型的CUDA：

```
ulong2 src =  arr[threadIdx.x]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:26:59.280

使用 CUDA 定义的类型和原语以 GPU 的“本机”术语访问内存是最大化性能的最有可能的方式。这意味着您问题中的选项＃3。

如果您打算编写将在 CUDA 上运行并且在重新编译时也可以在独立 CPU 上运行的代码，我建议首先针对 CUDA 性能进行编码，然后为主机 CPU 执行反向移植。与大多数主机 CPU 架构相比，CUDA 对必须如何设置或构建事物更加挑剔，为 CUDA 做“正确”的事情所带来的性能优势将远远超过为主机 CPU 情况做一些次优的事情的成本。

对于 CUDA 案例，我仍然会使用选项 #3，并为主机 CPU 案例定义一个 ulong2 结构。在主机 CPU 案例中复制该结构仍然需要在幕后移动两个（或四个）内存，但无论您在源代码中做什么，都需要这样做。使用最简单、最容易阅读和理解的源代码风格，让编译器负责繁重的工作。

# jquery - jquery-mobile data-role=内容澄清

> ID：12046805
> 
> 赞同：9
> 
> 时间：2012-08-20T23:56:55.220
> 
> 标签：jquery, jquery-mobile

**的目的**究竟是什么`data-role="content"`？我正在测试一些东西，比如动画/过渡等，所以当我从包含内容的容器 div 中删除它时，一切仍然有效。

例如，如果我这样做：

```
<div id="secondPage" data-role="page">
    <div data-role="header">
    <h1>This is page 2 </h1>
    </div>

    <div data-role="content">
       <p>This is page 2 with some regular text here.</p>
       <p><a href="#firstPage" data-direction="reverse">Go to first page.</a></p><br/>
    </div> 
</div> 
```

它可以正常工作，但是如果我然后删除该`data-role="content"`部分并使其例如像这样：

```
 <div id="secondPage" data-role="page">
        <div data-role="header">
        <h1>This is page 2 </h1>
        </div>

        <div>
           <p>This is page 2 with some regular text here.</p>
           <p><a href="#firstPage" data-direction="reverse">Go to first page.</a></p><br/>
        </div> 
    </div> 
```

它仍然有效，所以我对它的需要有点模糊。那么它有什么意义呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T03:20:51.223

这`data-role="content"`只是一个约定，不是必需的。

引用[jQuery 网站](http://jquerymobile.com/demos/1.1.1/docs/pages/page-anatomy.html)：

> “尽管上面概述的页面结构是使用 jQuery Mobile 构建的标准 Web 应用程序的推荐方法，但该框架在文档结构方面非常灵活。页面、页眉、内容和页脚数据角色元素是可选的，主要用于提供一些基本的格式和结构。过去自动初始化工作所需的页面包装器现在对于单页文档是可选的，因此根本不需要任何标记。对于具有自定义布局的网页，所有这些结构元素中的一部分可以省略，Ajax 导航和所有小部件都可以像在样板结构中一样工作。”

虽然它们不是必需的，但 jQuery 使用它们在 pagecreate 中应用类，`data-role="content"`例如带有 div 的类`.ui-content`将添加到其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T03:53:00.127

[JQueryMobile 转换](http://jquerymobile.com/test/docs/pages/page-transitions.html)应用于`data-role="page"`元素而不是`data-role="content"`

# javascript - 与在构造函数中创建的方法与在原型上创建的方法相比，是否存在性能损失？

> ID：12046806
> 
> 赞同：1
> 
> 时间：2012-08-20T23:57:05.510
> 
> 标签：javascript, performance, idioms

我可以通过两种方式声明对象的方法：

第一种方式使用`self=this`成语。

```
function SelfIdiomExample(name){
    var self = this;

    self.sayHello = function (name){
         alert("Hello, "+name);
    }
} 
```

当您需要在方法中引用对象时（例如，如果该方法将作为回调传递），这很有用。另一种方法是通过修改原型来做到这一点：

```
function PrototypeModExample(){
   //pass
}

PrototypeModExample.prototype.sayHello = function(name){
   alert("Hello, "+name);
} 
```

两者都有相同的结果：

```
var sieg = new SelfIdiomExample();
var pmeg = new PrototypeModExample();

sieg.sayHello("Barnaby");
pmeg.sayHello("Josephine"); 
```

虽然我了解`self=this`成语的用例，但我想知道：

**使用在构造函数中创建的方法与在原型上创建的方法相比，是否存在性能损失？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:06:06.677

好吧，这里：

```
var self = this; 
```

根本就没有性能影响。它非常快，因为它只是访问一个局部变量。即使是嵌套函数，这在 JavaScript 中也是一个非常快速的操作。

但是，在构造函数中创建的方法与在原型中创建的方法具有巨大的性能差异。

在这个例子中：

```
var PrototypeModExample = function(){
  this.name = "Joe";
};

PrototypeModExample.prototype.sayHello = function(){
   alert("Hello, " + this.name);
};

var a = new PrototypeModExample();
var b = new PrototypeModExample();
console.log(a.sayHello === b.sayHello); // true 
```

构造函数的每个实例都可以访问相同的*函数对象*。这可以通过使用`===`运算符比较两个实例上的函数对象来证明。`true`只有当它们是*同一个对象*时才会返回。因此，在全局范围内，我们现在有 2 个实例，但它们共享一个函数对象来实现该`sayHello`方法。这意味着当您想要创建一个新实例时，该函数已经设置并创建。

换句话说，所有实例都`obj.sayHello`指向同一个函数对象，该对象是在任何实例完全存在之前创建的。

* * *

但另一方面：

```
function SelfIdiomExample(name){
    var self = this;
    this.name = "Joe";

    this.sayHello = function(){
         alert("Hello, " + self.name);
    }
}

var a = new SelfIdiomExample();
var b = new SelfIdiomExample();
console.log(a.sayHello === b.sayHello); // false 
```

工作方式不同。现在我们看到`===`比较是错误的。那是因为为每个实例创建了一个*新的函数对象。*创建此函数需要时间（需要对其进行解析）和内存（需要存储该函数的唯一版本）。因此，当创建大量此类实例时，此方法会更慢并消耗更多内存。

换句话说，所有实例都`obj.sayHello`指向一个唯一的函数对象，该对象是在创建实例本身时创建的。

* * *

因此，通常首选原型方法。特别是在可能存在大量实例的情况下，因为每个实例都可以共享其方法的函数对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:06:02.503

与往常一样，您必须进行测试才能回答这样的问题：http: [//jsperf.com/this-vs-self/2](http://jsperf.com/this-vs-self/2)。

当您进行测试时，似乎没有太大差异（`self`在某些情况下不到几个百分点，略有优势）。一个优点`self`是可以通过将其更改为单字符变量名来更好地最小化它，这显然是某些框架使用它的原因。

在您的示例中，我会说使用`self`是多余的而不是必要的。通常人们只在使用`self`闭包并且`this`某些回调中的值不再是您希望它是这样的时候使用：

```
counter.prototype.incrementWithDelay(delay) {
    var self = this;
    setTimeout(function() {
        self.counter++;
    }, delay);
} 
```

但是，如果你只是有一个普通的方法，没有理由使用`self`.

```
counter.prototype.set(val) {
    this.counter = val;
} 
```

# php - Poco HTML 表单 POST 数据来自空

> ID：12046809
> 
> 赞同：0
> 
> 时间：2012-08-20T23:57:44.190
> 
> 标签：php, c++, apache, poco-libraries

我有一个桌面应用程序将 POST 数据（文本和图像文件）传递到 Apache Web 服务器上的 PHP 文件。由于某种原因，POST 数据是空的。有谁知道是什么原因造成的？

我现在正在尝试的只是使用以下方法显示 POST 数据：

```
<?php print_r($_POST); ?> 
```

但我什么也得不到。没有错误也没有数据。奇怪的是，这在我的旧服务器上完美运行 - 但是对于我的新主机，$_POST var 是空的，所以我相信这不是应用程序的问题。

桌面应用程序是由其他人构建的，使用 Poco 发送 HTML 表单数据，所以我不太了解它，但我知道它是否可以正常工作，因为它目前正在我当前的其他网络服务器上工作。

更奇怪的是，当我不附加图像时，一切都按预期工作。只要附上图像（<100kb），我就没有任何数据。

Poco HTML 表单在附加文件和没有附件时`multipart/form-data`用作编码类型（默认）。`application/x-www-form-urlencoded`

我在这里很困惑，想知道是否有人知道会发生什么，或者至少我应该尝试什么？

提前致谢。

编辑：我也忘了提到如果我从另一个网页提交它没有问题，它会起作用。

双重编辑：这是 HTML 中的表单的等价物：

```
<form enctype="multipart/form-data" action="http://DOMAIN.COM/savedata.php" method="POST">
    name: <input type="text" name="name" /><br />
    email: <input type="text" name="email" /><br />
    gender: <select name="gender"><option value="0">Female</option><option value="1">Male</option></select><br />
    photo: <input name="photo" type="file" /><br />
    <input type="submit" value="Upload File" /></form> 
```

# c# - 这就是数据绑定的方式和魅力吗？

> ID：12046810
> 
> 赞同：0
> 
> 时间：2012-08-20T23:57:46.450
> 
> 标签：c#, winforms, data-binding, dynamic

好吧，让我们看看我是否在想：

如果我只是想从源中读取一些数据，然后将其应用到某个控件，我不妨直接这样做，而不是去麻烦数据绑定。IOW，我不妨这样做：

```
foreach (var quad in listQH)
{
   ...
   tb.Text = quad.Ph1; 
```

...相对于：

```
tb.DataBindings.Add(new Binding("Text", quad, "Ph1")); 
```

但是，如果我希望在基础类实例中更新以更新控件（在本例中为“tb”文本框），并且用户更新控件以更新这些类实例成员（“双向绑定”），我需要实施 INotifyPropertyChanged。但是，我将不得不更改此代码：

```
List<QHQuad> listQH = GetForPlatypus(PlatypusId, dow); // listQH locally declared
foreach (var quad in listQH)
{
    int QHCell = quad.QH;
    if ((QHCell >= 1) || (QHCell <= QUARTER_HOUR_COUNT))
    {
        string PH1CellToPopulate = string.Format("textBoxA_{0}", QHCell);
        string PH2CellToPopulate = string.Format("textBoxB_{0}", QHCell);
        string PH3CellToPopulate = string.Format("textBoxC_{0}", QHCell);
        var tb = (TextBox)this.Contro.Find(PH1CellToPopulate, true).First();
        tb.DataBindings.Add(new Binding("Text", quad, "Ph1"));
        . . . 
```

...到：

```
List<QHQuad> listQH; //global to the form
. . .
listQH = GetInfoForPlatypus(PlatypusId, dow);
foreach (var quad in listQH)
{
    // the same as above 
```

然后我最终能够以这种方式保存那些可能更改的类实例值：

```
foreach (var quad in listQH)
{
    UpdateQH(quad); // quad contains members QH, Ph1, Ph2, and Ph3 ("UPDATE BLA SET PH1 = :Ph1, PH2 = :Ph2, PH3 = :Ph3 WHERE QH = :QH")
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:08:06.303

你有正确的想法。不过，这里有一些建议。

INotifyPropertyChanged 仅当您希望 ViewModel 中的更改冒泡到视图时才需要。双向绑定不需要它。如果您想要双向绑定并且只需要在视图加载时读取一次，那么普通属性就可以了。

您可能想查看 MVVM（模型 - 视图 - 视图模型）模式。它是 WPF、Silverlight、Metro 等的推荐设计模式，因为它非常适合数据绑定的繁重实现。

# python - 向模型对象列表中的每个对象添加一个变量

> ID：12046814
> 
> 赞同：0
> 
> 时间：2012-08-20T23:58:26.140
> 
> 标签：python, google-app-engine

我有以下模型类：

```
class Collection(db.Model):
  name = db.StringProperty()
  text_keys = db.ListProperty(db.Key)

class Text(db.Model):
  name = db.StringProperty()
  content = db.StringProperty() 
```

我正在尝试执行以下操作：

```
class Collections(webapp.RequestHandler):
  def get(self):
    collections = model.Collection.all() # works fine

    for c in collections:
      c.number_of_texts = len(c.text_keys) # does not work

    template_values = {
      'collections': collections,
    } 
```

我当然不是 python 专家，但这不应该工作吗？

更新：

不起作用我的意思是变量 number_of_texts 没有添加到模型对象中。

在我的 django-template 中，以下代码除了集合名称之外什么都不生成：

```
{% for c in collections %}
<p>{{c.name}}, number of texts: {{c.number_of_texts}}</p>
{% endfor %} 
```

解决方案：

感谢 RocketDonkey 指出这可以使用 django 格式以更优雅的方式完成：

```
{% for c in collections %}
<p>{{c.name}}, number of texts: {{c.text_keys|length}}</p>
{% endfor %} 
```

或者通过将带有名称和长度的单独字典传递给模板，如果应该出现没有良好格式解决方案的类似问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:23:08.440

因此，您似乎正在尝试写入模型的`number_of_texts`属性`Collection`（不存在:)）。如果您只需要获取该列表元素中的项目数，则需要将其存储在不绑定到的单独变量中`c`：

```
for c in collections:
  number_of_texts = len(c.text_keys) 
```

为了将列表的长度添加到文档中（假设您在其他任何地方都不需要它），请尝试`length`在模板中使用该函数：

```
{% for c in collections %}
    <p>{{c.name}}, number of texts: {{c.text_keys|length}}</p>
{% endfor %} 
```

根据您的模板引擎，这可能不起作用（我只使用过一个，所以我远非专家），但它有望为您提供您想要的。

# ios - 在 Objective-C 中将字符串拆分为内容页面

> ID：12046816
> 
> 赞同：0
> 
> 时间：2012-08-20T23:59:06.487
> 
> 标签：ios, arrays, nsstring, split

我正在尝试将相当长的字符串的内容拆分为内容页面。现在我按字符（每页 500 个字符）执行此操作，如下所示：

```
//Lets find out how many pages to make
    int pageLength = 500; //how many characters per page
    NSString *text = ((Story *) [self.story objectAtIndex:chapter]).content;
    int NumberOfPages = (text.length/pageLength);
    //NumberOfPages += 1;

    //Build the Pages Array
    NSMutableArray *pageStrings = [[NSMutableArray alloc] init];
    for (int i = 0; i <= (NumberOfPages+1); i++)
    {
        if (i < NumberOfPages) {
            //Load the text like normal
            NSString *contentString = [[NSString alloc]initWithFormat:@"<html><head><style type=text/css>body {font-family: \"%@\"; font-size: %d;}</style></head><body><p>%@</p></body></htlm>",@"helvetica",20,[text substringWithRange:NSMakeRange(i*pageLength,pageLength)]];
            [pageStrings addObject:contentString];
        }
        if (i == NumberOfPages) {
            //on the last page, only load what's available
            NSString *contentString = [[NSString alloc]initWithFormat:@"<html><head><style type=text/css>body {font-family: \"%@\"; font-size: %d;}</style></head><body><p>%@</p></body></htlm>",@"helvetica",20,[text substringWithRange:NSMakeRange(i*pageLength,(text.length-(i*pageLength)))]];
            [pageStrings addObject:contentString];
        }
        if (i > NumberOfPages){
            //add in a blank page on the end
            NSString *contentString = [[NSString alloc]initWithFormat:@"<html><head><style type=text/css>body {font-family: \"%@\"; font-size: %d;}</style></head><body><p>%@</p></body></htlm>",@"helvetica",20,@"What do you do?"];
            [pageStrings addObject:contentString];
        }
    }
    pageContent = [[NSArray alloc] initWithArray:pageStrings]; 
```

这很好用，但通常会导致单词在中间分开。我正试图让它在这个词上分裂。该字符串不必正好是 500 个字符，只要接近它即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T01:00:24.747

如果你想“正确”地做，你应该看看 NSString 方法：

```
- (void)enumerateSubstringsInRange:(NSRange)range options:(NSStringEnumerationOptions)opts usingBlock:(void (^)(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop))block 
```

您可以通过单词、行、段落、句子和字符序列智能地枚举文本。

Session 128, WWDC 2011, "Advanced Text Processing" 有一些关于这方面的好信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:07:14.050

您可以做的是跟踪最后一个空格或换行符的位置。这样，当你用完空间并且你在一个单词的中间时，你知道你可以结束的最后一个位置不会中断一个单词。然后，您每次都从该位置继续直到您的 500 个限制。这涉及遍历每组 500 个字符。

# ssis - 如何锁定 SSIS 导入包中的 excel 文件

> ID：12046817
> 
> 赞同：0
> 
> 时间：2012-08-20T23:59:14.817
> 
> 标签：ssis

在我的 SSIS 导入包中，我需要锁定 excel 文件以防止用户覆盖同一个文件，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:09:49.207

在进行数据流任务将数据插入文件之前，您需要先验证文件是否被锁定。您可以在DFT之前使用脚本组件检查文件是否被锁定。

```
 try
   {
    using (Stream stream = new FileStream("Filename.txt", FileMode.Open))
          {
          }
  }
 catch
 {
   Raise an exception if the file is in use and wait for couple of sec before 
   you recheck the file
 } 
```

上面的代码不是完整的证明，因为您需要进一步检查文件是否存在和不同的文件模式

参考[这篇](http://microsoft-ssis.blogspot.in/2011/05/wait-until-file-is-unlocked.html)文章

# java - 如何从复杂的研究论文中处理写作算法

> ID：12046820
> 
> 赞同：2
> 
> 时间：2012-08-21T00:00:12.387
> 
> 标签：java, c++, algorithm, image-processing

我想写一个软件`Alpha Compositing`。我不想从互联网上拿现成的代码，所以我试图找到研究论文和其他资源来理解数学算法，并开始实施。

但是，我很快就迷路了。所以我的问题是，

我应该如何处理这些论文以从中提取必要的细节以便编写基于它的算法。有什么具体的步骤行得通吗？

期望的答案：

1.  读 ...
2.  提炼 ...
3.  理解 ...
4.  实施 ...

* * *

**注意**：这个问题不仅限于 Alpha Compositing，因此更通用的方法会有所帮助。我标记了`Java`and `C++`，因为那是我实现图像处理所需的语言。

**到目前为止我做了什么？**

这不是一个家庭作业问题，但当然最好说出我所知道的。我已经阅读了 Alpha compositing 的 wiki，以及一些密切相关的 Image compositing 研究论文。但是，为了从理解到实施，我坚持下一步要采取的措施。

1.  [维基百科](http://en.wikipedia.org/wiki/Alpha_compositing)
2.  [技术备忘录，图像合成](http://research.cs.wisc.edu/graphics/Courses/559-f2003/Articles/smith95a.pdf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T00:09:16.157

编写伪代码。理想情况下，研究论文的作者会这样做，但他们通常不会这样做。为一些简单的语言（如 Matlab 或可能的 Python）编写伪代码，然后根据伪代码编写一个有效的实现。

如果您了解算法的某些部分但不了解其他部分，则将您的伪代码实现为您了解的部分的真实代码，并为您不了解的地方留下注释。

The [Pragmatic Programmer](https://rads.stackoverflow.com/amzn/click/com/020161622X)关于“Tracer Bullets”的部分基本上描述了这个想法。您想快速将一些东西组合在一起，将您的数据转换为某种形式的输出，然后迭代代码主体以使其慢慢类似于您尝试生成的算法。

我的回答必然有些含糊。这样的事情没有灵丹妙药。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T00:05:37.737

我建议使用铅笔和纸阅读包含复杂公式的文章。完成所涉及的数学，直到你很好地掌握它。然后，您将准备好编写代码。

首先确定对某些图像数据执行算法所需的步骤。包括从将图像本身加载到内存一直到您可能需要执行的复杂计算的所有步骤。然后将该列表构造成伪代码。一旦你有了它，它应该很容易编码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T00:15:01.693

您是否实现了任何图像处理算法？也许从一些更简单的东西开始，比如去饱和度/颜色增强、反转（左右颠倒）、旋转、缩放和通过蒙版合成图像。

一旦你弄清楚了这些，你就可以很好地进行 alpha 合成。

我同意学术论文似乎不遗余力地使实施细节变得混乱和不确定。我发现需要对所写内容进行大量简化才能开始执行实际实现。作者匆忙笼统地概括了各个方面。要构建有用、可靠的软件，有必要从实际可行的简单的东西开始，*这样*它就可以成为添加功能的框架。要做到这一点，有必要抛弃 80-90% 的学术普遍性。通常可以用大量的符号常数做很多事情，但是放弃一般性（比如四维和五维图像）在实践中并没有真正失去任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T00:08:57.157

我的建议是首先使用 Matlab 编写算法，以确保您了解所有步骤，然后尝试使用 C++ 或 java 来实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T00:14:07.140

为了补充上面的好建议，试着用简单的模块（面向对象的风格）编写你的伪代码，所以必须对代码的每个部分都有深刻的理解，同时又不失大局。以程序方式编写所有内容是一个好的开始，但随着代码的增长，您可能会变得难以跟上您正在尝试做的所有事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T00:14:12.473

此[示例](https://sites.google.com/site/drjohnbmatthews/composite)引用了有关该主题的开创性作品之一： Porter & Duff 的[*合成数字图像*](http://keithp.com/~keithp/porterduff/p253-porter.pdf)。该类[`java.awt.AlphaComposite`](http://docs.oracle.com/javase/7/docs/api/java/awt/AlphaComposite.html)实现相同的规则。

# python - 如何在 Django 中为 url 添加参数？

> ID：12046829
> 
> 赞同：1
> 
> 时间：2012-08-21T00:01:58.933
> 
> 标签：python, django, views, field

我有一个视图可以过滤某个 object_list 中名为“defaultfieldname”的字段。我想要做的是调整它以将字段的名称作为参数传递给 urls.py，这样我就可以对不同的字段使用不同的 url。

我不确定哪种方式会更容易：

```
url(r'^calendar/birthday/$', login_required(MonthCalends.as_view(model=Person)), name='bday_list', filter_field="birthdate"),
url(r'^calendar/deathday/$', login_required(MonthCalends.as_view(model=Person)), name='dday_list', filter_field="deathdate"), 
```

或者

```
url(r'^calendar/birthday/$', login_required(MonthCalends.as_view(model=Person, filter_field="birthdate")), name='bday_list'),
url(r'^calendar/deathday/$', login_required(MonthCalends.as_view(model=Person, filter_field="deathdate")), name='dday_list'), 
```

然后我有一个看法：

```
class MonthCalends(ListView):
    template_name='month_list.html'
    ## Sets default fieldname value
    filter_field = "defaultfieldname"
    ...rest of code 
```

urls.py 中的参数应该覆盖视图上的“defaultfieldname”，但我不知道如何从视图中的 urls.py 中获取 filter_field。有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:24:05.773

您发送的参数`as_view`在 MonthCalends 对象上设置。这意味着`filter_field`可以作为`self.filter_field`. 假设您已经定义了`get`可以执行以下操作的方法：

```
class MonthCalends(ListView):
    template_name='month_list.html'
    ## Sets default fieldname value
    filter_field = "defaultfieldname"

    def get(self, request, *args, **kwargs):
        try:
            # if the filter field was sent as an argument
            filter_field = self.filter_field
        except:
            # else revert to default
            filter_field = MonthCalends.filter_field
        # ...rest of code 
```

有关更完整的解释，请查看[基于 Django 类的视图文档](https://docs.djangoproject.com/en/1.3/ref/class-based-views/#view)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:44:40.100

您可以只使用一个 url，它会触发您的 url 的第二部分：

```
url(r'^calendar/(\w+)$', login_required(MonthCalends.as_view(model=Person)), name='bday_list'), 
```

然后你可以使用它访问它`self.args[0]`

如果您只允许两种不同的类型`filter_field`，您可能会在稍后在您阅读过的课程中引发异常`self.args[0]`。

当然，您可以在正则表达式中使用更具可读性的语法，例如：

```
r'^calendar/(?P<type>\w+)$' 
```

在这种情况下，您可以使用`self.kwargs['type']`.

无论如何，使用正则表达式组似乎更整洁。

# perl - Perl：从另一个调用 perl 脚本

> ID：12046830
> 
> 赞同：9
> 
> 时间：2012-08-21T00:02:13.890
> 
> 标签：perl

我有一个调用另一个脚本的 perl 脚本。我使用反引号调用它并将参数传递给该脚本，它工作正常。

```
`CQPerl call_script.pl $agr1 $agr2 $arg3`; 
```

但请建议是否有另一种更好的方法。如何检查脚本是否由于调用脚本或被调用的脚本而出错。如何从调用脚本本身进行检查？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-21T00:16:45.733

如果您不想进行错误检查，反引号可能是一种错误的方法。您可能想使用该`system`功能。有关错误处理的所有详细信息，请参阅[文档，包括示例。](http://perldoc.perl.org/functions/system.html)

Perl 有许多可能执行其他脚本/命令：

*   **反引号/`qx{}`**当您想在程序终止后一次读取所有输出时
*   **`exec`**当你不想作为另一个程序继续你的过程时——如果成功就永远不会返回
*   **`system`**当您只对命令的成功或失败感兴趣时
*   **`open`**当您想通过管道将信息传入或传出命令时
*   **`do`并`require`**在此处执行另一个 Perl 脚本。类似于 C 的`#include`
*   有一些模块可以进行三向操作，以便`open`您可以访问和执行您执行的程序。有关高级信息，请参阅[perlipc的相应部分。](http://perldoc.perl.org/perlipc.html)`STDIN``STDOUT``STDERR`

并且始终使用这些调用的多参数形式来避免 shell 转义（可能很烦人并且非常不安全）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T00:10:44.093

检查 perl 特殊变量的值`$?`以确定是否有错误。

# cube - 使用三角形条创建平面阴影立方体

> ID：12046831
> 
> 赞同：0
> 
> 时间：2012-08-21T00:02:18.267
> 
> 标签：cube, vertex, topology, normals, pixel-shading

我对三角形条如何与法线一起工作并不完全确定。我想制作一个平面阴影立方体，所以我为制作立方体的三角形条带编写了顶点。这样可行。我用三角条做了一个立方体。问题是我将每个顶点的法线设置为立方体中心的相反方向。所以阴影很奇怪。我希望每一面都是纯色。知道如何设置法线来实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:49:46.007

那么，您有从立方体中心以圆形方式指向的法线吗？

```
 \_/
-|_|-
 / \ 
```

这是它的样子吗？

目标是这样的吗？

```
 L
-| |-
  T 
```

如果是这种情况，您可以检查您的法线也关闭了哪些法线，然后将它们更改为最接近的法线。

```
distance = sqrt((x2-x1)^2 + (y2-y1)^2 + (z2-z2)^2) 
```

# macos - CALayer 仅在输入事件上绘画

> ID：12046832
> 
> 赞同：0
> 
> 时间：2012-08-21T00:02:26.630
> 
> 标签：macos, cocoa, ikimagebrowserview

我有一个使用 IKImageBrowserView 的 Mac 应用程序。我对 IKImageBrowserView 进行了子类化，并且从 newCellForRepresentedItem 返回了一个自定义单元格类型。

在我的单元格中，我正在从 layerForType 创建并返回一个图层：

```
// When asked for a foreground layer, return a new layer that we'll render the icon decorations into
- (CALayer *)layerForType:(NSString *)type {
    if ([type isEqualToString:IKImageBrowserCellForegroundLayer]) {
        @synchronized(self) {
            if (!self.foregroundLayer) {
                self.foregroundLayer = [[CALayer alloc] init];
                self.foregroundLayer.delegate = self;
                self.foregroundLayer.needsDisplayOnBoundsChange = YES;
                [self.foregroundLayer setNeedsDisplay];
            }
        }

        return self.foregroundLayer;
    } else {
        return [super layerForType:type];
    }
} 
```

我让我的单元格观察一个对象，并在它更改时在我的自定义层上调用 setNeedsDisplay。

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context 
{
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        self.percentDone = (float)self.bytesSoFar/self.bytesTotal;
        NSLog(@"Update");
        [self.foregroundLayer setNeedsDisplay];
    }];
} 
```

这是我遇到的问题：下载继续，被观察的对象触发观察者（因此调用了observeValueForKeyPath）并调用了setNeedsDisplay。我通过使用 NSLog 消息记录来验证这一点。

但是画法：

```
- (void)drawLayer:(CALayer *)theLayer
        inContext:(CGContextRef)theContext
{
    NSLog(@"Drawing");
    // Drawing happens here 
} 
```

我所看到的是绘图开始正常 - 交错打印“更新”和“绘图” - 但不久之后，“绘图”停止，只有“更新”消息继续。

如果我在图像浏览器中单击，或点击键盘上的某个键，“绘图”会恢复一会儿，然后停止，回到“更新”。

就像我需要使用键盘或鼠标触发重绘 - setNeedsDisplay 没有这样做 - 但我不明白为什么。它确实工作了很短的时间，停止工作，然后只在我提供鼠标输入时工作。

这让我很困惑。我会很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:33:34.910

我没有在这里找到问题，但我确实找到了解决方案。

使 IKImageBrowserView 单元格无效不会导致它们被重新绘制，因为 IKImageBrowserView 可能出于性能考虑不会重新绘制单元格，除非它们的版本发生变化。

我现在不是使单元格无效，而是增加 IKImageBrowserItem 返回的 imageVersion，然后使 IKImageBrowserView 无效。这可靠地重绘了项目。

# c# - 什么时候可以在 Dispose 中调用 Finalize？

> ID：12046840
> 
> 赞同：9
> 
> 时间：2012-08-21T00:03:20.743
> 
> 标签：c#, .net, c++-cli, idisposable, finalizer

我在 Reflector 中浏览 DLL 的反编译源代码时，遇到了以下 C# 代码：

```
protected virtual void Dispose([MarshalAs(UnmanagedType.U1)] bool flag1)
{
    if (flag1)
    {
        this.~ClassName();
    }
    else
    {
        base.Finalize();
    }
} 
```

我的第一反应是“什么？我以为你不能手动调用终结器！”

注意：基本类型是`object`.

为了确定这不是 Reflector 的怪癖，我在 ILSpy 中打开了该方法。它生成了类似的代码。

我去谷歌确认我的新发现。我找到了 的文档[`Object.Finalize`](http://msdn.microsoft.com/en-us/library/system.object.finalize.aspx)，这就是它所说的：

> 派生类型中的每个 Finalize 实现都必须调用其基类型的 Finalize 实现。**这是唯一允许应用程序代码调用 Finalize 的情况。**

现在我不知道该怎么想了。这可能是因为 DLL 是用 C++ 编译的。（注意：我找不到 Dispose 的实现。也许它是自动生成的。）这可能是该`IDisposable.Dispose`方法的特殊津贴。这可能是两个反编译器的缺陷。

一些观察：

*   我在源代码中找不到 Dispose 的实现。也许它是自动生成的。
*   Reflector 显示了一个名为 的方法`~ClassName`。看起来这个方法实际上可能不是终结器，而是 C++ 析构函数，甚至是普通方法。

这是合法的 C# 吗？如果是这样，这个案例有什么不同？如果没有，实际发生了什么？在 C++/CLI 中是否允许，但在 C# 中不允许？或者它只是反编译器中的一个小故障？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T00:45:48.150

正如其他回答者所指出的那样，您是对的，处置代码不同的原因是因为它是 C++/CLI。

C++/CLI 使用不同的习惯用法来编写清理代码。

*   C#：Dispose() 和 ~ClassName()（终结器）都调用 Dispose(bool)。
    *   这三种方法都是由开发人员编写的。
*   C++/CLI：Dispose() 和 Finalize() 都调用 Dispose(bool)，后者将调用 ~ClassName() 或 !ClassName()（分别为析构函数和终结器）。
    *   ~ClassName() 和 !ClassName() 由开发人员编写。
        *   正如您所指出的， ~ClassName() 的处理方式与 C# 不同。在 C++/CLI 中，它保留为名为“~ClassName”的方法，而 C# 中的 ~ClassName() 被编译为`protected override void Finalize()`.
    *   Dispose()、Finalize() 和 Dispose(bool) 仅由编译器编写。当它这样做时，编译器会做一些你通常不应该做的事情。

为了演示，这里有一个简单的 C++/CLI 类：

```
public ref class TestClass
{
    ~TestClass() { Debug::WriteLine("Disposed"); }
    !TestClass() { Debug::WriteLine("Finalized"); }
}; 
```

这是 Reflector 的输出，反编译为 C# 语法：

```
public class TestClass : IDisposable
{
    private void !TestClass() { Debug.WriteLine("Finalized"); }
    private void ~TestClass() { Debug.WriteLine("Disposed"); }

    public sealed override void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    [HandleProcessCorruptedStateExceptions]
    protected virtual void Dispose([MarshalAs(UnmanagedType.U1)] bool disposing)
    {
        if (disposing)
        {
            this.~TestClass();
        }
        else
        {
            try
            {
                this.!TestClass();
            }
            finally
            {
                base.Finalize();
            }
        }
    }

    protected override void Finalize()
    {
        this.Dispose(false);
    }
} 
```

## 编辑

看起来 C++/CLI 比 C# 更好地处理构造函数异常。

我用 C++/CLI 和 C# 编写了测试应用程序，它们定义了一个 Parent 类和一个 Child 类，其中 Child 类的构造函数会引发异常。这两个类都有来自其构造函数、dispose 方法和终结器的调试输出。

在 C++/CLI 中，编译器将子构造函数的内容包装在 try/fault 块中，并在错误时调用父构造函数的 Dispose 方法。（我相信当异常被其他一些 try/catch 块捕获时执行错误代码，而不是在向上移动堆栈之前立即执行的 catch 或 finally 块。但我可能会错过一个微妙之处.) 在 C# 中，没有隐式的 catch 或故障块，因此 Parent.Dispose() 永远不会被调用。当 GC 开始收集对象时，两种语言都会调用子终结器和父终结器。

这是我在 C++/CLI 中编译的测试应用程序：

```
public ref class Parent
{
public:
    Parent() { Debug::WriteLine("Parent()"); }
    ~Parent() { Debug::WriteLine("~Parent()"); }
    !Parent() { Debug::WriteLine("!Parent()"); }
};

public ref class Child : public Parent
{
public:
    Child() { Debug::WriteLine("Child()"); throw gcnew Exception(); }
    ~Child() { Debug::WriteLine("~Child()"); }
    !Child() { Debug::WriteLine("!Child()"); }
};

try
{
    Object^ o = gcnew Child();
}
catch(Exception^ e)
{
    Debug::WriteLine("Exception Caught");
    Debug::WriteLine("GC::Collect()");
    GC::Collect();
    Debug::WriteLine("GC::WaitForPendingFinalizers()");
    GC::WaitForPendingFinalizers();
    Debug::WriteLine("GC::Collect()");
    GC::Collect();
} 
```

输出：

```
父母（）
孩子（）
CppCLI-DisposeTest.exe 中发生了“System.Exception”类型的第一次机会异常
〜父母（）
异常捕获
GC::收集（）
GC::WaitForPendingFinalizers()
！孩子（）
!父()
GC::收集（）

```

查看 Reflector 输出，以下是 C++/CLI 编译器如何编译 Child 构造函数（反编译为 C# 语法）。

```
public Child()
{
    try
    {
        Debug.WriteLine("Child()");
        throw new Exception();
    }
    fault
    {
        base.Dispose(true);
    }
} 
```

为了比较，这是 C# 中的等效程序。

```
public class Parent : IDisposable
{
    public Parent() { Debug.WriteLine("Parent()"); }
    public virtual void Dispose() { Debug.WriteLine("Parent.Dispose()"); }
    ~Parent() { Debug.WriteLine("~Parent()"); }
}

public class Child : Parent
{
    public Child() { Debug.WriteLine("Child()"); throw new Exception(); }
    public override void Dispose() { Debug.WriteLine("Child.Dispose()"); }
    ~Child() { Debug.WriteLine("~Child()"); }
}

try
{
    Object o = new Child();
}
catch (Exception e)
{
    Debug.WriteLine("Exception Caught");
    Debug.WriteLine("GC::Collect()");
    GC.Collect();
    Debug.WriteLine("GC::WaitForPendingFinalizers()");
    GC.WaitForPendingFinalizers();
    Debug.WriteLine("GC::Collect()");
    GC.Collect();
    return;
} 
```

和 C# 输出：

```
父母（）
孩子（）
CSharp-DisposeTest.exe 中出现了“System.Exception”类型的第一次机会异常
异常捕获
GC::收集（）
GC::WaitForPendingFinalizers()
〜孩子（）
〜父母（）
GC::收集（）

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:50:41.597

是的，您正在查看 C++/CLI 代码。除了对终结器的显式调用（一种常见的 C++/CLI 模式）之外，参数上的 [MarshalAs] 属性是一个死的赠品。

C++/CLI 的工作方式与 C# 不同，IDisposable 接口和处理模式完全融入了语言。您从不指定接口名称，也不能直接使用 Dispose。一个非常典型的示例是包装非托管 C++ 类的 ref 类包装器。您可以将其粘贴到 C++/CLI 类库中，然后查看您从以下代码中获得的 IL：

```
using namespace System;

#pragma managed(push, off)
class Example {};
#pragma managed(pop)

public ref class Wrapper {
private:
    Example* native;
public:
    Wrapper() : native(new Example) {}
    ~Wrapper() { this->!Wrapper(); }
    !Wrapper() { delete native; native = nullptr; }
}; 
```

“示例”是本机类，包装器将指向它的指针存储为私有成员。构造函数使用*new*运算符创建实例。这是本地 new 运算符，托管的称为*gcnew*。~Wrapper() 方法声明了“析构函数”。这实际上是 dispose 方法。编译器生成*两个*成员，一个受保护的 Dispose(bool) 成员，这是您在代码片段中查看的成员，您可能熟悉它作为一次性模式的实现。还有一个 Dispose() 方法，您也应该看到它。请注意，它会自动调用 GC.SuppressFinalize()，就像您在 C# 程序中显式执行的操作一样。

!Wrapper() 成员是终结器，与 C# 析构函数相同。从析构函数调用它是允许的，而且通常是有意义的。在这个例子中确实如此。

# c++ - CPP 文件中的 C++11 模板定义，未定义的引用

> ID：12046846
> 
> 赞同：2
> 
> 时间：2012-08-21T00:04:00.477
> 
> 标签：c++, templates, c++11, linker-errors

我发现了一些 C++11 特性并且遇到了问题。我有一个成员函数'call'

```
class cscript
{
public:
template <typename ret_t, typename... params>
    bool call(ret_t &ret, const char * name, params... parameters);
.... 
```

执行：

```
template <typename ret_t, typename... params>
bool cscript::call(ret_t &ret, const char * name, params... parameters)
{
    ret_t (*func)(params...);
    func = (decltype(func)) tcc_get_symbol(tcc, name);
    if (!func)
        return true;

    ret = func(parameters...);

    return false;
} 
```

链接时显示以下错误：

```
obj\Release\main.o:main.cpp:(.text.startup+0xcc)||undefined reference to `bool cscript::call<int, int, int>(int&, char const*, int, int)'| 
```

调用示例：

```
script.call(ret, "sum", 2, 3); 
```

关于如何使这项工作的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T00:17:49.213

从外观上看，模板定义在使用时是不可见的。也就是说，编译器在看到实现时不知道需要传递哪些模板参数，`cscript::call()`也不知道实现在使用时的样子。您有两个基本选择：

1.  将 of 的定义`cscript::call()`放入标题中，以便在使用时始终可以看到。
2.  显式实例化您正在使用的 `csscript::call() 版本。

后者看起来像下面，在实现文件中的定义之后的某个地方：

```
template bool cscript::call<int, int, int>(int&, char const*, int, int); 
```

从外观上看，您想使用此模板的多个不同版本，并且您可能不想重复。因此，您可能希望将定义放入标题中。

# python - 如何在 Python 中而不是在 IDLE 中打开文件、Web 浏览器和 URL。

> ID：12046854
> 
> 赞同：0
> 
> 时间：2012-08-21T00:05:50.103
> 
> 标签：python, file, browser

我知道您可以在 Python GUI 中打开文件、浏览器和 URL。但是，我不知道如何将其应用于程序。例如，以下都不起作用。（以下是我不断增长的聊天机器人程序的片段）：

```
def browser():
    print('OPENING FIREFOX...')
    handle = webbroswer.get() # webbrowser is imported at the top of the file
    handle.open('http://youtube.com')
    handle.open_new_tab('http://google.com') 
```

和

```
def file():
    file = str(input('ENTER THE FILE\'S NAME AND EXTENSION:'))
    action = open(file, 'r')
    actionTwo = action.read()
    print (actionTwo) 
```

就上述顺序而言，这些错误发生在单独的运行中：

```
OPENING FIREFOX...
Traceback (most recent call last):
  File "C:/Users/RCOMP/Desktop/Programming/Python Files/AI/COMPUTRON_01.py", line 202, in <module>
    askForQuestions()
  File "C:/Users/RCOMP/Desktop/Programming/Python Files/AI/COMPUTRON_01.py", line 64, in askForQuestions
    browser()
  File "C:/Users/RCOMP/Desktop/Programming/Python Files/AI/COMPUTRON_01.py", line 38, in browser
    handle = webbroswer.get()
NameError: global name 'webbroswer' is not defined
>>> 

ENTER THE FILE'S NAME AND EXTENSION:file.txt
Traceback (most recent call last):
  File "C:/Users/RCOMP/Desktop/Programming/Python Files/AI/COMPUTRON_01.py", line 202, in <module>
    askForQuestions()
  File "C:/Users/RCOMP/Desktop/Programming/Python Files/AI/COMPUTRON_01.py", line 66, in askForQuestions
    file()
  File "C:/Users/RCOMP/Desktop/Programming/Python Files/AI/COMPUTRON_01.py", line 51, in file
    action = open(file, 'r')
IOError: [Errno 2] No such file or directory: 'file.txt'
>>> 
```

我是在处理这个错误，还是我不能在程序中使用 open() 和 webbrowser？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T00:13:23.997

您应该阅读错误并尝试理解它们 - 它们在这种情况下非常有帮助 - 因为它们通常是：

第一个说`NameError: global name 'webbroswer' is not defined`。您可以在此处看到`webbrowser`代码中的拼写错误。它还告诉您它发现错误的行（第 38 行）

第二个`IOError: [Errno 2] No such file or directory: 'file.txt'`告诉您您正在尝试打开一个不存在的文件。这不起作用，因为您指定了

```
 action = open(file, 'r') 
```

这意味着您正在尝试读取文件。Python 不允许读取不存在的文件。

# objective-c - 如何处理 RestKit 中的空对象 {}

> ID：12046858
> 
> 赞同：1
> 
> 时间：2012-08-21T00:06:12.947
> 
> 标签：objective-c, ios, restkit

我有时从服务器得到的响应是一个 JSON，代表一个像这样的空对象 {}

我已经[在这里阅读了这个问题/答案](https://stackoverflow.com/questions/9826310/object-mapping-an-empty-response-with-restkit)，其中指出我应该实现 willMapData 委托函数并将 *mappableData 指向其他地方。问题是我不知道应该为 *mappableData 分配什么，这样我的应用程序就不会崩溃。

我试过这个

```
- (void)objectLoader:(RKObjectLoader *)loader willMapData:(inout id *)mappableData
{
    id<RKParser> parser = [[RKParserRegistry sharedRegistry] parserForMIMEType:RKMIMETypeJSON]; 
    *mappableData = [parser objectFromString:@"{\"unknownObject\":\"\"}" error:nil];
} 
```

但尽管如此，我的应用程序崩溃了，相当生气

```
 'NSInvalidArgumentException', reason: '*** -[__NSPlaceholderDictionary   initWithObjects:forKeys:count:]: attempt to insert nil object from objects[0] 
```

你能帮我吗？

**更新** 打开 RKDebug 消息在控制台中给了我这个：

```
Performing object mapping sourceObject: {
    }
and targetObject: (null) 
```

然后代码到达 RKObjectMapper.m：

```
if (mappableData) {
        id mappingResult = [self performMappingForObject:mappableData atKeyPath:@"" usingMapping:mappingsForContext];
        foundMappable = YES;
        results = [NSDictionary dictionaryWithObject:mappingResult forKey:@""];
    } 
```

但是那里的mappingResult返回nil ...所以当应用程序尝试使用nil对象创建NSDictionary时崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:12:20.527

将作业分成两行。

```
SomeDataType *object =  [parser objectFromString:@"{\"unknownObject\":\"\"}" error:nil];

if(object){
  *mappableData = object;
}else{
  // You've got nil, do something with it
} 
```

现在您可以检查 nil 值并采取适当的措施。该操作是什么取决于崩溃的上下文。

# facebook - 让 Facebook 刮板不重定向？

> ID：12046859
> 
> 赞同：-1
> 
> 时间：2012-08-21T00:06:38.997
> 
> 标签：facebook, facebook-like

当使用 Facebook 开发工具为我的网站创建一个赞按钮时，该按钮喜欢最终 URL（我[网站](http://www.onceuponasidewalk.com)的访问者会自动重定向到最近的帖子。我不想更改重定向。

我该怎么做才能让 Facebook 抓取工具忽略重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:35:52.167

您不需要，您需要使用 Facebook 的元标记向刮板提供内容，而不是向刮板提供重定向。

# regex - 正则表达式匹配不以 xy 开头的版本号

> ID：12046861
> 
> 赞同：0
> 
> 时间：2012-08-21T00:06:43.510
> 
> 标签：regex, msbuild, regex-negation

我试图在 AssemblyInfo.cs 文件中查找不以我正在构建的 Major.Minor 数字开头的版本号。我已经尝试了各种版本，但它没有达到我想要的效果 - 任何人都可以帮助我的 RegEx 吗？

```
 <MSBuild.ExtensionPack.FileSystem.File Condition="'$(BuildNumber)' != ''"
                                           TaskAction="Replace"
                                           RegexPattern="Version\(\&quot;(?:![$(VersionMajor).$(VersionMinor)])\d\.\d\.\d\.\d)\&quot;\)"
                                           Replacement="Version(&quot;$(VersionMajor).$(VersionMinor).0.0&quot;)"
                                           Files="$(AssemblyInfoFiles)" /> 
```

请注意，我在扩展包中使用 AssemblyInfo 类，但以上是针对初始集的。

**编辑** 这是我在@Omega 的帮助下使用的工作版本。请注意，我正在使用我已经拥有的 VersionMajorMinor 属性。

```
 <!-- Update all the assembly info files with generated version info -->
    <MSBuild.ExtensionPack.FileSystem.File TaskAction="Replace"
                                           RegexPattern="Version\(\&quot;(?!$(VersionMajorMinor)\.)\d+\.\d+\.\d+\.\d+\&quot;\)"
                                           Replacement="Version(&quot;$(VersionMajorMinor).0.0&quot;)"
                                           Files="@(AssemblyInfoFiles)" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:53:44.863

尝试`Version\(\&quot;(?!$(VersionMajor)\.$(VersionMinor)\.)\d+\.\d+\.\d+\.\d+\&quot;\)`

# php - 在'while'语句中获取最后一个$var，php？

> ID：12046871
> 
> 赞同：0
> 
> 时间：2012-08-21T00:08:39.303
> 
> 标签：php

我正在运行一个打勾计数器的循环。

基本上，它是

```
<counter>
<a php form> 
```

计数器正在从数据库中提取对象。如果拉出 10 个或更多对象，我希望关闭表单。我不确定如何将计数器从“while”语句中拉出来？

```
<?php
    $counter = 0;

    //LOOPING CODE IS HERE
    example: ---- 'while ( $var->this() ) : $var->that();'----------

    // Add to counter
    $counter = ++$counter;

    // Cleanup after ourselves
    endwhile;
?> 
```

现在在`endwhile;`我需要能够调用最后一个值`$counter`并确定它是=或> 10之后？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T00:12:10.993

当计数器超过 10 时，您可以中断 while 循环，然后您仍然可以`$counter`使用。

```
<?php
    $counter = 0;
    while ($var->this() && $counter < 10) {
        $var->that();
        $counter++;
    }
    echo $counter;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T00:12:54.123

语法是

```
$counter = 0;
while(condition is true)
{
   //increment $counter
   if($counter >= 10)
     break;  //break out of the loop
}

print($counter); 
```

# ubuntu - Ubuntu 12.04 LTS 上的 PostgreSQL 9.1 - pg_ctl：无法启动服务器

> ID：12046878
> 
> 赞同：4
> 
> 时间：2012-08-21T00:10:28.663
> 
> 标签：ubuntu, postgresql-9.1

***更新 2 - 我已经从 root（即 su）中卸载并重新安装了软件包，而不是使用我自己的帐户进行 sudo-ing。这允许从 /tmp 运行可执行文件，从而消除了第一次更新时出现的错误。***

***更新 - 刚刚尝试卸载并重新安装（apt-get remove --purge postgresql*，然后 apt-get install postgresql postgresql-contrib postgresql-client）并收到此错误，我怀疑这与我的问题有关：***

```
Can't exec "/tmp/postgresql-common.config.32601": Permission denied at  /usr/share/perl/5.14/IPC/Open3.pm line 186.
open2: exec of /tmp/postgresql-common.config.32601 configure  failed at /usr/share/perl5/Debconf/ConfModule.pm line 59 
```

我在启动 postgreSQL 时遇到了麻烦，希望能得到一些帮助。

我已经研究了以下帖子的答案和评论 - 并尝试了 pg_dropcluster 和 pg_createcluster - 但没有运气配置 postgreSQL 9.1 在 Ubuntu 12.04 上启动。（但是，我能够在 Windows 上设置和配置 postgreSQL 没有问题。）

[Postgresql 启动失败](https://stackoverflow.com/questions/11562590/postgresql-failed-to-start)

*- 我应该注意到这里给出的答案似乎很有帮助，但由于我是 Linux 新手，所以我无法遵循它。我也想知道是否有更简单的方法。*OP 也没有接受答案，所以我不确定这是否真的解决了问题。

[Postgresql 在 ubuntu 中更改数据目录](https://stackoverflow.com/questions/11608482/postgresql-changing-data-directory-in-ubuntu)

*我怀疑 OP 与我遇到的问题**完全相同**，因为我收到了相同的错误消息，并且尽管终端中有错误消息，但也没有日志文件输出。*

```
pg_ctl: could not start server

Examine the log output.

PostgreSQL 9.1 did not start in a timely fashion, please see opt/PostgreSQL/9.1/data/pg_log/startup.log for details 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T02:13:45.500

在网络上的所有教程中，这是最终对我有用的一个。

[http://codingforme.wordpress.com/2012/05/15/installing-postgresql-database-and-pgadmin-iii-in-ubuntu-12-04/](http://codingforme.wordpress.com/2012/05/15/installing-postgresql-database-and-pgadmin-iii-in-ubuntu-12-04/)

我做了一个“pg_dropcluster 9.1 main”，然后是“pg_createcluster 9.1 main start”，然后完全按照它。

主要区别在于其他教程无法在 postgresql 中创建用户，而是仅在 unix 中创建用户。也许这是由于版本差异。同样，我使用的是 postgresql 9.1.5 并且在 ubuntu 12.04 上。

**还...不要忘记 apt-get install libpq-dev**

希望这对我遇到的其他人有所帮助。

# c# - 我如何创建从内容页面到母版页面加载的 javascript

> ID：12046879
> 
> 赞同：0
> 
> 时间：2012-08-21T00:10:30.663
> 
> 标签：c#, master-pages, content-pages

我如何创建从内容页面到母版页面加载的 javascript

mycontentpage.aspx 代码后面；

```
protected void haritasifirla()
        {
            string api = "AIzaSyDZd5O6jx8C4YdrUfMeMywlR5BDCMl4GV0";
            ClientScript.RegisterClientScriptBlock(GetType(), "Script1", "<script src='http://maps.google.com/maps?file=api&amp;v=2&amp;key=" + api + "' type='text/javascript'></script>");
            StringBuilder sb = new StringBuilder();
            sb.Append("<script type='text/javascript'>");
            sb.Append("function MapLoad() ");
            sb.Append("{");
            sb.Append("if (GBrowserIsCompatible()) ");
            sb.Append("{");

            sb.Append("}");
            sb.Append("}");
            sb.Append("</script>");
            ClientScript.RegisterClientScriptBlock(GetType(), "Script2", sb.ToString());

        } 
```

现在

```
<form id="form1" runat="server"> 
```

但是我要

```
<form id="form1" runat="server" onload="MapLoad"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:19:59.327

回答...

```
 HtmlGenericControl form = (HtmlGenericControl)

        Page.Master.FindControl("MyBody");

        form.Attributes.Add("onload", "HaritaYukle()"); 
```

母版页

```
<body runat="server" id="MyBody"> 
```

在母版页中，通过提供 runat="server" 属性和名称使主体成为控件。

# java - 带有tomcat的AspectJ Spring LTW给出perm gen错误

> ID：12046880
> 
> 赞同：0
> 
> 时间：2012-08-21T00:10:43.333
> 
> 标签：java, spring, tomcat, permgen

多次部署给我带来了`permgen out of memory`问题。我认为给出这个问题的类加载器`TomcatInstrumentableClassLoader`被spring用于加载时间编织。

有没有其他人遇到过这个类加载器坚持类而不告诉垃圾收集器做它的工作的问题？

我能做些什么来避免这个问题吗？

# python - Python 装饰器？- 有人可以解释一下吗？

> ID：12046883
> 
> 赞同：37
> 
> 时间：2012-08-21T00:10:56.463
> 
> 标签：python, python-3.x

抱歉，这是一个非常广泛的问题。

下面的代码是在网上找到的一些东西的片段。我感兴趣的关键是@protected 开头的行 - 我想知道这是做什么的以及它是如何做到的？它似乎在执行 do_upload_ajax 函数之前检查是否有有效用户登录。这看起来是一种非常有效的用户身份验证方式。我不明白这个 @ 函数的机制 - 有人可以引导我朝着正确的方向解释这将如何在现实世界中实现吗？请 Python 3 回答。谢谢。

```
@bottle.route('/ajaxupload', method='POST')
@protected(check_valid_user) 
def do_upload_ajax():
    data = bottle.request.files.get('data')
    if data.file:
        size = 0 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-21T00:26:06.567

好好看看这个巨大*的*[答案/小说](https://stackoverflow.com/a/1594484/464744)。这是我遇到的最好的解释之一。

我能给出的最短解释是装饰器将您的函数包装在另一个返回函数的函数中。

这段代码，例如：

```
@decorate
def foo(a):
  print a 
```

如果您删除装饰器语法，则相当于此代码：

```
def bar(a):
  print a

foo = decorate(bar) 
```

装饰器有时接受参数，这些参数被传递给动态生成的函数来改变它们的输出。

您应该阅读的另一个术语是**闭包**，因为这是允许装饰器工作的概念。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-09-29T07:01:33.123

装饰器是一个函数，它接受一个函数作为它的唯一参数并返回一个函数。这有助于一遍又一遍地用相同的代码“包装”功能。

我们使用@func_name 来指定要应用于另一个函数的装饰器。

*以下示例将欢迎消息添加到 fun() 返回的字符串。将 fun() 作为参数并返回 welcome()。*

```
def decorate_message(fun):

    # Nested function
    def addWelcome(site_name):
        return "Welcome to " + fun(site_name)

    # Decorator returns a function
    return addWelcome

@decorate_message
def site(site_name):
    return site_name;

print site("StackOverflow")

Out[0]: "Welcome to StackOverflow" 
```

装饰器还可用于将数据（或添加属性）附加到函数。

*将数据附加到 func 的装饰器函数*

```
def attach_data(func):
       func.data = 3
       return func

@attach_data
def add (x, y):
       return x + y

print(add(2, 3))
# 5    
print(add.data)
# 3 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-21T00:56:42.507

装饰器语法：

```
@protected(check_valid_user) 
def do_upload_ajax():
    "..." 
```

相当于

```
def do_upload_ajax():
    "..."
do_upload_ajax = protected(check_valid_user)(do_upload_ajax) 
```

但无需重复同名三遍。没有别的了。

例如，这是一个可能的实现`protected()`：

```
import functools

def protected(check):
    def decorator(func): # it is called with a function to be decorated
        @functools.wraps(func) # preserve original name, docstring, etc
        def wrapper(*args, **kwargs):
            check(bottle.request) # raise an exception if the check fails
            return func(*args, **kwargs) # call the original function
        return wrapper # this will be assigned to the decorated name
    return decorator 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-12-03T07:15:18.967

装饰器是一个函数，它接受另一个函数并扩展后一个函数的行为而不显式修改它。Python允许“嵌套”函数，即（另一个函数中的函数）。Python 还允许您从其他函数返回函数。

## 让我们说，您的原始函数称为 orig_func()。

```
def orig_func():       #definition 
    print("Wheee!")

orig_func()            #calling 
```

* * *

运行这个文件， orig_func() 被调用并打印。“呼”。

现在，让我们说，我们想修改这个函数，在调用这个函数之前做一些事情，在这个函数之后做一些事情。

所以，我们可以这样做，通过选项 1 或选项 2

- - - - 选项1 - - - - -

```
def orig_func():
    print("Wheee!")

print "do something before"
orig_func()
print "do something after" 
```

* * *

请注意，我们没有修改 orig_func。相反，我们在此函数之外进行了更改。但可能是，我们希望以这样一种方式进行更改，以便在调用 orig_func 时，我们能够在调用函数之前和之后做一些事情。所以，这就是我们所做的。

--------选项2----------

```
def orig_func():
    print "do something before"
    print("Whee!")
    print "do something after"

orig_func() 
```

* * *

我们已经达到了我们的目的。但代价是什么？我们不得不修改 orig_func 的代码。这可能并不总是可行的，特别是当其他人编写了该函数时。然而，我们希望当这个函数被调用时，它被修改成可以做之前和/或之后的事情。然后装饰器帮助我们做到这一点，无需修改 orig_func 的代码。我们创建了一个装饰器，并且可以保持与以前相同的名称。所以，如果我们的函数被调用，它会被透明地修改。我们通过以下步骤。一种。定义装饰器。在 docorator 中，1) 如果你愿意，可以在 orig_func 之前编写代码来做一些事情。2) 调用 orig_func 来完成它的工作。3) 如果你愿意，在 orig_func 之后编写代码来做某事。湾。创建装饰器 C. 叫装修师。

这是我们如何做到的。

==================================================== ===========

```
#-------- orig_func already given ----------
def orig_func():
   print("Wheee!")

#------ write decorator ------------
def my_decorator(some_function):
    def my_wrapper():
        print "do something before"   #do something before, if you want to
        some_function()
        print "do something after"    #do something after, if you want to
    return my_wrapper

#------ create decorator and call orig func --------
orig_func = my_decorator(orig_func)   #create decorator, modify functioning 
orig_func()                           #call modified orig_func 
```

==================================================== ==============

注意，现在 orig_func 已经通过装饰器进行了修改。因此，现在当您调用 orig_func() 时，它将运行 my_wrapper，这将执行三个步骤，如前所述。

这样你就修改了 orig_func 的功能，而没有修改 orig_func 的代码，这就是装饰器的目的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-04T11:34:38.513

装饰器只是一个将另一个函数作为参数的函数

简单示例：

```
def get_function_name_dec(func):
  def wrapper(*arg):
      function_returns = func(*arg)  # What our function returns
      return func.__name__ + ": " + function_returns

  return wrapper

@get_function_name_dec
def hello_world():
    return "Hi"

print(hello_world()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-29T02:19:49.627

我将使用代码来响应此问题。

**我需要什么？：**我需要修改**math.sin()**的定义**以始终将 1 添加**到值的正弦上

**问题：**我没有 math.sin() 代码

**解决方案：**装饰器

```
import math

def decorator_function(sin_function_to_modify):
    def sin_function_modified(value):
        # You can do something BEFORE math.sin() == sin_function_to_modify call
        value_from_sin_function = sin_function_to_modify(value)
        # You can do something AFTER math.sin() == sin_function_to_modify call
        new_value = value_from_sin_function + 1;
        return new_value;

    return sin_function_modified

math.sin = decorator_function(math.sin);

print(math.sin(90)) 
```

**在实现装饰器之前返回 math.sin(90)：** 0.8939966636005579

**实现装饰器后返回 math.sin(90)：** 1.8939966636005579

# vba - 使用文件夹路径字符串在 Outlook 中的 VBA 中选择文件夹

> ID：12046884
> 
> 赞同：0
> 
> 时间：2012-08-21T00:10:56.860
> 
> 标签：vba, outlook

如何输入字符串作为文件夹位置 ex。\MySpecificEmailAddress\Inbox 使用 Outlook 在 VBA 中选择该文件夹？我使用以下方法获得了路径：

```
... = ActiveExplorer.CurrentFolder.FolderPath 
```

我已经进行了广泛搜索以自动告诉脚本在哪个特定文件夹上运行宏，而无需选择文件夹然后运行脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:55:53.523

您应该能够枚举[`Session.Stores`](http://msdn.microsoft.com/en-us/library/office/ff867405.aspx)然后[`Store.GetRootFolder.Folders`](http://msdn.microsoft.com/en-us/library/office/ff860733.aspx)访问给定邮箱的所有文件夹。根据您需要深入多少级，这可能需要更多的努力（*即递归*）。

这是[来自 MSDN 的代码片段，](http://msdn.microsoft.com/en-us/library/office/ff867405.aspx)它枚举了邮箱/存储根文件夹下的所有文件夹：

```
Sub EnumerateFoldersInStores()  
 Dim colStores As Outlook.Stores 
 Dim oStore As Outlook.Store 
 Dim oRoot As Outlook.Folder 

 On Error Resume Next 

 Set colStores = Application.Session.Stores  
 For Each oStore In colStores 
   Set oRoot = oStore.GetRootFolder 
   Debug.Print (oRoot.FolderPath) 
   EnumerateFolders oRoot 
 Next 

End Sub 

Private Sub EnumerateFolders(ByVal oFolder As Outlook.Folder) 
 Dim folders As Outlook.folders 
 Dim Folder As Outlook.Folder 
 Dim foldercount As Integer 

 On Error Resume Next 
 Set folders = oFolder.folders 
 foldercount = folders.Count 
 'Check if there are any folders below oFolder 
  If foldercount Then 
    For Each Folder In folders 
      Debug.Print (Folder.FolderPath) 
      EnumerateFolders Folder 
    Next 
 End If 
End Sub 
```

# bash - bash的代码格式化程序/美化器（在命令行中）？

> ID：12046886
> 
> 赞同：23
> 
> 时间：2012-08-21T00:11:09.590
> 
> 标签：bash, command-line, code-formatting

寻找可用于**bash**代码的命令行代码格式化程序。它必须是可配置的，最好可以从命令行使用。

我在 bash 中有一个大项目，我需要记住使用 Q。到目前为止，我对Paul Lutus用*python编写的程序（他以前的 Ruby 版本的翻版）很满意。*

请参阅[http://arachnoid.com/python/beautify_bash_program.html](http://arachnoid.com/python/beautify_bash_program.html)（也在这里克隆[https://github.com/ewiger/beautify_bash](https://github.com/ewiger/beautify_bash)）。

但如果它存在的话，我想学习这个工具的任何严肃的替代品。要求：它应该提供足够强大的性能和处理/解析相当复杂的代码的行为。

PS我相信bash代码的完整解析通常很复杂，因为不存在官方语言语法（但如果我错了请纠正我）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-23T00:30:08.033

你可以编写 vim 来执行：“gg=G”，意思是“缩进所有文件”

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-03-11T19:33:21.943

你可以试试[shfmt](https://github.com/mvdan/sh)。它实现了自己的 shell 解析器，包括 Bash 支持，因此它比基于纯文本的工具更健壮。

解析器和打印机都可以作为 Go 包使用，因此编写一个 20 行的 Go 程序来操作或使用 shell 代码应该很容易。

请注意我是作者，所以建议可能有点偏颇:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-28T10:36:17.873

我发现`type`内置将以格式化的方式打印函数。

```
#/usr/bin/env bash

source <(cat <(echo 'wrapper() {') - <(echo '}'));
type wrapper | tail -n +4 | head -n -1 | sed 's/^    //g' 
```

[https://github.com/bas080/flush](https://github.com/bas080/flush)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-19T15:44:27.617

相反，shell*确实*有严格的语法。它在 Bash 和其他 shell 的 ISO 标准和文档中以英文描述，在 Bash 源代码树中的 shell.y 文件中以正式术语描述。

使它“难”的原因在于，人们通常将引用的字符串视为单个词法标记，在 shell 中，每个元字符都是一个单独的词法标记，因此字符的含义可以根据其语法上下文而改变。

所以解析的token和用户想到的“shell words”不对齐，一个简单的带引号的字符串至少有3个token。

这些实现通常采用一些捷径，涉及使用多个词法分析器，这些词法分析器根据语法是在引号内、在数字上下文内还是在两者之外进行选择。

# python - PyGTK - gtk.TreeViewColumn（动态实例化）

> ID：12046887
> 
> 赞同：0
> 
> 时间：2012-08-21T00:11:22.600
> 
> 标签：python, pygtk

需要通过循环动态实例化 gtk.TreeViewColumn 类型的对象`for`，如本例所示：[http ://dpaste.com/hold/789277/](http://dpaste.com/hold/789277/)

上面代码的输出是：

```
tvc_0 = gtk.TreeViewColumn('id', gtk.CellRendererText(), text = 0)
tvc_1 = gtk.TreeViewColumn('Aspecto', gtk.CellRendererText(), text = 1)
tvc_2 = gtk.TreeViewColumn('Impactos', gtk.CellRendererText(), text = 2) 
```

我需要将`output`上述字符串的`source code`

已经尝试使用 getattr，但我无法获得结果。有人可以帮助我吗？

拥抱！胡利亚诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:08:18.000

关于不使用邪恶 exec/eval 的可能解决方案：

```
tuple_val = (
    ('id', gtk.CellRendererText(), 0),
    ('Aspectos', gtk.CellRendererText(), 1),
    ('Impactos', gtk.CellRendererText(), 2),
)

def tree_view_factory(id, renderer, text):
    return gtk.TreeViewColumn(id, renderer, text=text)

tvc_0, tvc_1, tvc_2 = map(tree_view_factory, tuple_val) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T00:42:09.090

您可以使用[exec](http://docs.python.org/reference/simple_stmts.html#grammar-token-exec_stmt)语句从字符串动态执行源代码。例如：

```
exec """
    tvc_0 = gtk.TreeViewColumn('id', gtk.CellRendererText(), text = 0)
    tvc_1 = gtk.TreeViewColumn('Aspecto', gtk.CellRendererText(), text = 1)
    tvc_2 = gtk.TreeViewColumn('Impactos', gtk.CellRendererText(), text = 2)
""" 
```

或在您链接的脚本中：

```
dic = {'0':'id',  '1':'Aspecto',  '2':'Impacto'}
for coluna in range(0, len(dic.keys())):
    exec "tvc_"+str(coluna)+"=gtk.TreeViewColumn('"+dic[str(coluna)]+"', gtk.CellRendererText(), text="+str(coluna)+")" 
```

但**要小心**，任意代码字符串的执行可能会导致严重的安全问题。

# javascript - 如何使用按位运算符返回具有 0 的位

> ID：12046888
> 
> 赞同：0
> 
> 时间：2012-08-21T00:11:30.350
> 
> 标签：javascript, bit-manipulation

我在这个问题上挣扎了很长时间。这是此答案的后续问题（[如何将 x 名玩家多次随机分成 2 支球队，每次都不一样？](https://stackoverflow.com/questions/10861549/how-to-divide-x-number-of-players-into-2-teams-randomly-multiple-times-differen/10861679#10861679)）。

因此，我有 x 名玩家，并且为每个玩家提供`1 << n`掩码值。通过使用这些面具，我可以轻松地与每支球队的 2 名球员组成一场比赛。现在，如果玩家总数为 5，那么一场可能的比赛可能是这样的：

```
01100 team a
00011 team b
------------
10000 player resting 
```

或者有 6 个玩家，它可能看起来像这样：

```
100010 team a
001001 team b
-------------
000100 player resting
010000 player resting 
```

**问题**
如何通过比较 a 队和 b 队的面具来获得那些休息的球员？（我是一个完全按位的菜鸟，所以代码示例非常受欢迎）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:38:30.807

对团队 A 和 B 的值进行[异或运算](http://en.wikipedia.org/wiki/Xor)：

```
var resting = a ^ b; 
```

然后休息的球员将被标记`0`，即：

```
100010 team a
001001 team b
-------------
101011 players resting 
```

最后，遍历结果的每一位：

```
var totalPlayers = 6;

for (var i = 1; i <= totalPlayers; i++) {

   if ((resting & 1) === 0) {
       console.log("Player #" + i + " is resting.");
   }

   resting >>>= 1;
} 
```

* * *

这是现场示例： http: [//ideone.com/Kb3XJ](http://ideone.com/Kb3XJ)（在 Java 中，不是 JavaScript，但这不是问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:31:28.583

您可以将它们按位或在一起，然后不要让所有休息的玩家。然后，您将不得不一点一点地获得单独的休息球员。

```
100010 
001001
------OR
101011 #all players playing
------NOT
010100 #all players not playing 
```

# variables - 如何让套接字 io 服务器将不同的数据包放入正确的服务器变量中？

> ID：12046889
> 
> 赞同：0
> 
> 时间：2012-08-21T00:11:35.857
> 
> 标签：variables, socket.io, package, client

像这里的很多人一样，我是 socket.io 的新手，并且对服务器脚本有疑问。

客户端是否可以根据他们的选择向服务器发送数据类型 A、B 或 C，并且服务器可以了解它的类型并将其放置在相应的 A、B 或 C 变量服务器端？

我很确定这是可能的，如果是的话，有人能指出我可以找到正确的编码语法的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:18:12.403

你想做什么，因为有很多方法可以做到这一点。

单程：

客户端：

```
socket.emit('data', {dataString: "string", dataInt: 42}); 
```

服务器端：

```
socket.on('data', function(data) {
  if(data.dataString)
  // do something
  if (data.dataInt)
  // do something else
}); 
```

另一种方式：

客户端：

```
socket.emit('data', "hello world");
socket.emit('data', 42); 
```

服务器端：

```
socket.on('data', function(data) {
  if(typeof data === "string")
  // do something
  else if(typeof data === "number")
  // do something else
}); 
```

# html - twitter bootstrap carousel 使用数字而不是箭头自定义

> ID：12046890
> 
> 赞同：2
> 
> 时间：2012-08-21T00:11:40.027
> 
> 标签：html, css, twitter-bootstrap, carousel

这是我的第一篇文章，我正在尝试使用 twitter bootstrap 学习 Rails。我正在使用轮播，我希望右下角包含可单击以更改图片的数字，而不是在图像的最左侧和右侧有箭头。例如，数字 1,2 和 3 可以在右下角的正方形中，并且每个都会更改显示的图像。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T07:20:04.207

有计划在里程碑 2.3 中向 Carousel 插件添加药丸导航。已经存在[添加该功能的拉取请求](https://github.com/twitter/bootstrap/pull/4222)，因此您最好使用该版本的**[bootstrap-carousel.js](https://github.com/mikaelbr/bootstrap/blob/ff0b9ef165e830b34c52f9bb029ff407b892cf2d/js/bootstrap-carousel.js)**。但是，请注意这是新代码，可能会发生变化，因此如果您选择使用它，请准备好在整个生命周期中遵循它。

这是更新插件的演示：

### [JSFiddle](http://jsfiddle.net/mmfansler/TycXE/)

目前它使用药丸，但将其更改为数字应该不会太难。可能只是添加一些代码，例如：

```
$('.carousel-pills > span').each(function (i) {
  $(this).text(i+1);
}); 
```

在轮播初始化后运行它。您必须调整 LESS/CSS 以将药丸从点更改为方框。

# backpropagation - 反向传播算法：我在哪里犯了错误？

> ID：12046892
> 
> 赞同：-2
> 
> 时间：2012-08-21T00:12:05.340
> 
> 标签：backpropagation, neural-network

有我的BP算法的实现。我测试了一下，训练后发现数据不正确。那么，我在哪里犯错了？

```
double OpenNNL::_changeWeightsByBP(double * trainingInputs, double *trainingOutputs, double speed, double sample_weight)
{
    double * localGradients = new double[_neuronsCount];
    double * outputs = new double[_neuronsCount];
    double * derivatives = new double[_neuronsCount];

    calculateNeuronsOutputsAndDerivatives(trainingInputs, outputs, derivatives);

    for(int j=0;j<_neuronsPerLayerCount[_layersCount-1];j++)
    {
        localGradients[indexByLayerAndNeuron(_layersCount-1, j)] = trainingOutputs[j] - outputs[indexByLayerAndNeuron(_layersCount-1, j)];
    }

    if(_layersCount > 1)
    {
        for(int i=_layersCount-2;i>=0;i--)
        {
            for(int j=0;j<_neuronsPerLayerCount[i];j++)
            {
                localGradients[indexByLayerAndNeuron(i, j)] = 0;

                for(int k=0;k<_neuronsPerLayerCount[i+1];k++)
                {
                    localGradients[indexByLayerAndNeuron(i, j)] += _neuronsInputsWeights[indexByLayerNeuronAndInput(i+1, k, j)]
                                                                    * localGradients[indexByLayerAndNeuron(i+1, k)];
                }
            }
        }
    }

    for(int j=0;j<_neuronsPerLayerCount[0];j++)
    {
        for(int k=0;k<_inputsCount;k++)
        {
            _neuronsInputsWeights[indexByLayerNeuronAndInput(0, j, k)] += speed * localGradients[indexByLayerAndNeuron(0, j)]
                    * derivatives[indexByLayerAndNeuron(0, j)] * trainingInputs[k];
        }
    }

    for(int i=1;i<_layersCount;i++)
    {
        for(int j=0;j<_neuronsPerLayerCount[i];j++)
        {
            for(int k=0;k<_neuronsPerLayerCount[i-1];k++)
            {
                _neuronsInputsWeights[indexByLayerNeuronAndInput(i, j, k)] += speed * localGradients[indexByLayerAndNeuron(i, j)]
                        * derivatives[indexByLayerAndNeuron(i, j)] * outputs[indexByLayerAndNeuron(i, j)];
            }
        }
    }

    delete[] localGradients;
    delete[] outputs;
    delete[] derivatives;
} 
```

以及如何计算网络输出的误差以停止训练过程？

以及如何改变神经元的偏差？

如果您需要，这里有我的完整代码：[https ://github.com/NicholasShatokhin/OpenNNL。](https://github.com/NicholasShatokhin/OpenNNL)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:50:32.323

我发现了问题。我必须写而不是`outputs[indexByLayerAndNeuron(i, j)]`在上一个周期`outputs[indexByLayerAndNeuron(i-1, k)]`。

# iphone - UITableView 不允许底部有任何工具栏

> ID：12046895
> 
> 赞同：0
> 
> 时间：2012-08-21T00:12:26.643
> 
> 标签：iphone, objective-c, uistoryboard

我有一个包含 UITableView 的视图控制器。我正在尝试将 UITableView 作为视图之一放入 UITabBarController 中。它不起作用，底部不会显示任何内容。如果我在底部放置 iAd 横幅，它不会显示。UITabBar 不会显示。我不知道问题是什么。我想也许 UITableView 会以某种方式越过 UITabBar，但我真的不知道。我试着缩短它，但无济于事。任何帮助将非常感激。另外，我主要使用 UIStoryboards 来做这件事。我不确定这里有什么相关的代码，所以如果您需要查看任何代码，请告诉我。提前致谢，

-山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T03:07:56.877

我经历了你正在经历的事情——我也在使用故事板。我不记得我在哪里找到了这个片段，但它对我来说效果很好。信用应该归于最初编写它的人。

```
- (void)viewWillAppear:(BOOL)animated 
{ 
    [super viewWillAppear:animated];

    //Initialize the toolbar 
    toolbar = [[UIToolbar alloc] init]; 
    toolbar.barStyle = UIBarStyleDefault;

    //Set the toolbar to fit the width of the app. 
    [toolbar sizeToFit];

    //Caclulate the height of the toolbar CGFloat 
    CGFloat toolbarHeight = [toolbar frame].size.height;

    //Get the bounds of the parent view 
    CGRect rootViewBounds = self.parentViewController.view.bounds;

    //Get the height of the parent view. 
    CGFloat rootViewHeight = CGRectGetHeight(rootViewBounds);

    //Get the width of the parent view, 
    CGFloat rootViewWidth = CGRectGetWidth(rootViewBounds);

    //Create a rectangle for the toolbar 
    CGRect rectArea = CGRectMake(0, rootViewHeight - toolbarHeight, rootViewWidth, toolbarHeight);

    //Reposition and resize the receiver 
    [toolbar setFrame:rectArea];

    // add buttons (make sure you create your buttons)
    //[toolbar setItems:[NSArray arrayWithObjects:trashButtonItem, leftSpaceButtonItem, cameraButtonItem, rightSpaceButtonItem, addButtonItem, nil]];

    //Add the toolbar as a subview to the navigation controller. 
    [self.navigationController.view addSubview:toolbar]; 

} 
```

显然，您必须用自己的按钮替换按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:22:13.853

您需要通过 UIViewController 扩展您的类，而不是 UITableViewController，因为这会占用您的整个视图。

# php - 将循环的 MySQL 数组存储为字符串变量

> ID：12046902
> 
> 赞同：0
> 
> 时间：2012-08-21T00:13:21.143
> 
> 标签：php, mysql, string, variables, loops

我有一个循环获取 MySQL 查询的结果集合。我需要将它们存储为单个变量，每个结果之间有一个空格。

```
$result = mysql_query("SELECT Names FROM table");
while($row = mysql_fetch_array($result)){
    echo $row['Names'] . " ";
} 
```

所以稍后，我可以调用'echo $Names;' 并获取中间有空格的名称字符串。

例如）克林顿·布什·赫卡比·罗姆尼等......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:15:23.920

```
$result = mysql_query("SELECT Names FROM table");

$names = "";

while($row = mysql_fetch_array($result)){
    $names .= $row['Names'] . " ";
}

echo $names; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:15:57.227

```
$Names = '';
$result = mysql_query("SELECT Names FROM table");
while($row = mysql_fetch_array($result)){
    $Names.= $row['Names'] . " ";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T00:18:50.687

首先，请停止使用 mysql 扩展。它[已弃用](http://news.php.net/php.internals/53799)。尝试[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

```
$names = array();
$result = mysql_query("SELECT Names FROM table");
while($row = mysql_fetch_array($result)){
    $names[] = $row['Names'];
}
echo implode(' ', $names); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T00:17:55.477

我会使用一个数组，然后使用空格将其内爆：

```
$result = mysql_query("SELECT Names FROM table");
$arr = array();
while($row = mysql_fetch_array($result)) $arr[] = $row['Names'];
echo implode(' ', $arr); 
```

# c# - Linq、array.Contains() 生成异常：在此上下文中仅支持原始类型（'例如 Int32、String 和 Guid'）

> ID：12046907
> 
> 赞同：3
> 
> 时间：2012-08-21T00:13:42.737
> 
> 标签：c#, entity-framework, linq

我正在尝试使用 Linq 执行查询，这是我的新手。我想接收一组 ID 并检索具有这些 ID 的产品。我得到的 linq 查询是这个：

```
 public Product[] RetrieveProduct(int[] ids)
    {
        var query = from productInfos in productRepository.Table
                    where (ids.Contains(productInfos.Id))
                    && productInfos.Active
                    select new ProductIndiInfo
                    {
                        ProductId = productInfos.Id,
                        CurrentPrice = productInfos.CurrentPrice
                    };
        return query.ToArray();
    } 
```

但我不断收到著名的例外：

> {"无法创建类型为 'System.Int32[]' 的常量值。在此上下文中仅支持原始类型（'例如 Int32、String 和 Guid'）。"}

我读过的一些资源说它不可用。但其他一些人告诉我它应该工作。我在这里和博客等中看到了许多带有替代方案的帖子，但它不起作用。我开始认为这是一个语法问题......

我也尝试过这种方法：

```
 var query = from productInfos in pricingInfoRepository.Table
                    where ids.Any(id => id == productInfos.ProductId)
                    && productInfos.Active
                    select new PricingInfo
                    {
                        ProductId = productInfos.Id,
                        CurrentPrice = productInfos.CurrentPrice
                    };
        return query.ToArray(); 
```

但我遇到了同样的问题。

有人可以告诉我我的语法是错误的还是真的是 Linq 问题？（不支持操作？）

如何找出我正在使用的 EF 版本？

**更新：**据我了解，这个关于 ids.Contains() 的问题将是一个 L2S 问题，但**可能的**答案是 EF2 不支持它。我理解正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T00:22:15.060

实体框架`Contains`在 EF 4.0 中才开始支持数组。您可以[在旧版本中](http://blogs.msdn.com/b/alexj/archive/2009/03/26/tip-8-writing-where-in-style-queries-using-linq-to-entities.aspx)通过构建`Expression`包含 OR 条件列表来解决此问题。

> ps：如何知道我使用的是哪个EF版本？

检查`System.Data.Entity`程序集的版本。有关详细信息，请参阅[其他问题](https://stackoverflow.com/q/7315127/65358)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T03:16:00.263

假设这`pricingInfoRepository`是您的对象上下文或返回相关对象集的存储库类，这可能有效（这是您查询的方法语法版本，稍作调整）：

```
 var query = pricingInfoRepository.Table
            .Where(pi => pi.Active && ids.Contains(pi.Id))
            .Select(pi => new PricingInfo
            {
                ProductId = pi.Id,
                CurrentPrice = pi.CurrentPrice
            })
            .ToArray(); 
```

您正在调用s`Contains()`的数组`int`，LINQ 将其视为`IEnumerable`，这应该没问题。我之前使用过类似的查询，没有任何问题......

# java - 搜索和替换不带大括号的 if 语句以包含大括号

> ID：12046915
> 
> 赞同：4
> 
> 时间：2012-08-21T00:14:52.503
> 
> 标签：java, intellij-idea

我最近一直在使用声纳进行代码分析。当我进行彻底的违规钻取时，我发现许多 java 文件定义了没有大括号的 if 语句（数千个地方）。有没有一种简单的方法来替换或添加大括号到 if 语句或者我可以执行哪些步骤来完成此任务而无需在每个文件中手动执行。

我目前正在使用 IntelliJ。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T00:49:52.580

> 有没有一种简单的方法来替换或添加大括号到 if 语句或者我可以执行哪些步骤来完成此任务而无需在每个文件中手动执行。

我不知道是否有工具可以自动执行此操作。（可能有......）但假设存在这样的工具，我不相信它会是正确的方法。

回过头来想想为什么代码分析报告这是一个问题。很多人（比如@pst 和我）认为大括号应该一直存在，尽管各种风格指南并不坚持这一点。这有一个很好的理由......除了“它看起来很丑”。考虑这些示例代码片段：

```
if (i == 1) 
    i++;
    doSomething();

while (i < 1)
    i++;
    doSomething(); 
```

如果您不仔细阅读这些内容，您的眼睛会诱使您认为这`doSomething();`是有条件的……由于不正确的缩进。它发生了。

（此外：将某人标记为“无能”以误读该代码并没有帮助。如果您拼命尝试修复一个显示停止器的错误并且您已经连续工作了 14 个小时，那么您可能会错过这种事情. 并不是因为你无能。一旦你经历过几次这种情况，教训就会消失......）

好的，现在假设您运行一个自动工具来添加大括号。你会得到的是这样的：

```
 if (i == 1) {
    i++;
 }
    doSomething();

 while (i < 1) {
    i++;
 }
    doSomething(); 
```

它的含义与原始代码完全相同。 **但是**......如果原始代码实际上是一个错误怎么办？如果程序员*希望*`doSomething()`调用是有条件 的怎么办？

简而言之，通过自动添加大括号，我们掩盖了原始程序员的意图，并使这些错误更难追踪。

* * *

底线 - 我认为*手动*审查这些事件中的每一个是*谨慎*的......而不是仅仅自动“修复”它们。事实上，我认为如果您没有时间或耐心手动查看它们，最好不要管代码。最好关闭警告... IMO。

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T05:43:59.360

> 我可以重新格式化代码以让 IntelliJ 为我做这件事，但我需要检查所有文件并重新格式化它。是的，我可能会关闭检查，但想知道是否有一个很好的工具来完成这项任务。我有一套很好的测试来检查它是否在这个过程中引入了错误。

如果您确定有一些方法可以测试您不会引入错误，请使用 IntelliJ*重新格式化代码*功能。

只需确保您在 IntelliJ 中的*代码风格*符合您公司的政策。否则你也会把你的风格强加给其他人。

要强制使用大括号，只需将它们标记为IntelliJ*代码样式*设置对话框中`Always`的*Wrapping and Braces*标签。

 *在项目视图中标记源文件夹并按`Ctrl-Alt-L`。会弹出一个对话框，您可以在其中选择`All files in directory <...>`。

然后按`Run`，看看会发生什么。如果您不满意，请从您的 VCS 中恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-14T19:15:32.677

IntelliJ IDEA 也对此进行了检查，它有一个快速修复来自动添加大括号。

调用`Analyze | Run Inspection by Name`并输入检查名称`Control flow statement without braces`。在项目的所需部分运行它。在检查结果中，您可以应用快速修复`Add braces to statement`。

请注意，此检查还将报告除 之外的控制流语句`if`，例如示例`while`语句。调用快速修复还将为这些语句添加大括号。**

# macos - 在 mac 应用程序中创建功能以覆盖用户安全设置

> ID：12046918
> 
> 赞同：32
> 
> 时间：2012-08-21T00:15:24.813
> 
> 标签：macos, cocoa, security, app-store, preferences

我是 mac osx 开发的新手。我想知道是否有任何方法可以覆盖 Mac 桌面安全设置以允许安装未在 Mac App Store 中注册的应用程序？

该设置应该来自我尝试安装的应用程序。这意味着，每当我将应用程序安装到任何 Mac 计算机时，无论其安全设置如何，如下所示，

允许从以下位置下载的应用程序：

*   Mac 应用商店
*   Mac App Store 和确定的开发者
*   任何地方

该应用程序应将设置设置为**Anywhere**，允许安装它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-09-07T18:57:41.057

1.  从 Apple 菜单启动系统偏好设置。
2.  选择“安全和隐私”，然后单击“常规”选项卡，然后单击角落的锁定图标以解锁设置。
3.  查找“允许从以下位置下载应用程序：”并选择“任何地方”。
4.  接受安全警告并允许。

请注意，您应该小心并意识到现在保护系统免受恶意应用程序侵害的工作属于您而不是操作系统。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-05-03T14:44:42.180

右键单击（应用程序）图标并在上下文菜单中单击“打开” - 无需禁用操作系统安全性。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-21T00:18:07.143

这是不可能的。该设置的存在旨在保护用户免受恶意可执行文件的侵害。如果任何任意可执行文件有办法覆盖该设置，它会提供什么保护？恶意可执行文件只会像您建议的那样将设置更改为“任何地方”，绕过 Mac OS X 的安全功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-18T00:55:53.757

您需要使用可以从 Apple 获得的 Mac 开发人员证书来签署您的应用程序。这会将您的应用程序标记为由“已识别的开发人员”构建，并且无需更改任何设置即可正常启动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T00:50:35.937

Control Click the app icon to override this security feature. This is a one off, you don't have to change your settings, you can do it per-app.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-06T21:22:07.380

还有另一种方式...

您只需手动打开终端，cd 进入 .app 应用程序，cd 进入 Contents 文件夹，然后 cd 进入 MacOS 文件夹，然后键入 ./YourAppNameHere 并按 Enter 执行。

# ruby-on-rails - 使用 Nokogiri 捕获网页——需要半持久化数据

> ID：12046925
> 
> 赞同：1
> 
> 时间：2012-08-21T00:17:15.050
> 
> 标签：ruby-on-rails, ruby, nokogiri

我有一个进行网页抓取的模块。我多次使用这种方法，因为它捕获了网页上的所有数据。

```
def page_as_xml(uri)
  @page_as_xml ||= Nokogiri::HTML(open(uri))
end 
```

由于我将对每个页面多次使用上述方法，因此将其保存在实例变量中是有意义的。但是，完成后如何“清空”实例变量？

所有的 webcsraping 都以散列结束（见下文）。如果我不“清空”实例变量，那么每个页面都将使用相同的 page_as_xml 数据。

```
 :page1 =>
      {
        :url => @page1,
        :title => download_title(@page1),
        :meta_tags => download_robots_tags(@page1) 
      },
    :page2 =>
      {
        :url => @page2,
        :title => download_title(@page2),
        :meta_tags => download_robots_tags(@page2) 
      },
    :page3 =>
      {
        :url => @page3,
        :title => download_title(@page3),
        :meta_tags => download_robots_tags(@page3) 
      }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:34:07.030

如何使它成为一个哈希：

```
@pages_as_xml[uri] ||= Nokogiri::HTML(open(uri)) 
```

现在您不必担心清空它（除非内存是一个问题）。我真的不明白为什么你需要多次调用它。另外，如果它是 html，为什么还要称它为 page_as_xml？

# javascript - 如何在 AngularJs 中使用正则表达式和 ng-repeat？

> ID：12046928
> 
> 赞同：18
> 
> 时间：2012-08-21T00:18:00.340
> 
> 标签：javascript, regex, frameworks, angularjs

我想在 ng-repeat 中使用正则表达式。我已经尝试了以下代码，但它不起作用。

```
<div ng-repeat="user in users | filter:{'type':/^c5$/}"></div> 
```

我有用户数组，我只想显示类型为 c5 的用户。

如果我使用

```
filter:{'type':'c5'} 
```

然后它也显示类型为“ac5x”的用户，因为它包含c5。

我怎么解决这个问题？也许还有另一种解决方案。

谢谢你！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-21T01:07:16.193

什么 tosh 提到应该对你有用！

如果您发现自己想要更频繁地通过正则表达式进行过滤，您可以创建一个自定义过滤器。像[这个小提琴](http://jsfiddle.net/WfuAh/1/)这样的东西会让你指定一个字段来检查正则表达式：

```
var myApp = angular.module('myApp', []);
myApp.filter('regex', function() {
  return function(input, field, regex) {
      var patt = new RegExp(regex);      
      var out = [];
      for (var i = 0; i < input.length; i++){
          if(patt.test(input[i][field]))
              out.push(input[i]);
      }      
    return out;
  };
}); 
```

像这样使用 where`'type'`表示您正在检查的字段（在这种情况下是一个名为 type 的字段）：

```
<div ng-repeat="user in users | regex:'type':'^c5$'"></div> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-21T00:43:34.217

您可以在过滤器表达式中使用函数。所以基本上，您可以使用 javascript 进行任何可能的过滤。

```
<li ng-repeat="name in names | filter:myFilter"> {{ name }} 
```

在控制器中：

```
$scope.myFilter = function(user) {
   return /^c5$/.test(user.type);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-15T12:01:23.600

Gloopy 的答案是正确的。我在我的网站中实现了它，但我收到了一个错误：

`'input' is undefined`

发生这种情况是因为我有时什么都没有循环。我通过添加一个条件来解决这个问题，如果未定义则返回空`out`数组。`input`

```
var myApp = angular.module('myApp', []);
myApp.filter('regex', function() {
  return function(input, field, regex) {
      var patt = new RegExp(regex);      
      var out = [];

      if(input === undefined) {
          return out;
      }

      for (var i = 0; i < input.length; i++){
          if(patt.test(input[i][field]))
              out.push(input[i]);
      }      
    return out;
  };
}); 
```

希望这对可能遇到同样问题的人有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-02T03:40:03.857

正则表达式确实很强大，可以处理各种匹配，包括精确匹配，例如`^c5$`.

但是，此问题的正文表明，该问题将通过始终按完全匹配过滤来解决。

您可以通过将第三个参数设置为：指定 Angular 过滤器应使用**精确匹配**`true`比较器：

```
filter:{type:'c5'}:true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-30T00:09:51.857

感谢正则表达式过滤器的想法，但以前的解决方案不适用于一般情况，例如多级字段的对象情况。

例如：

```
<div ng-repeat="item in workers | regex:'meta.fullname.name':'^[r|R]' "> 
```

我的解决方案是：

```
.filter('regex', function() {
  return function(input, field, regex) {
    var f, fields, i, j, out, patt;
    if (input != null) {
      patt = new RegExp(regex);
      i = 0;
      out = [];
      while (i < input.length) {
        fields = field.split('.').reverse();
        j = input[i];
        while (fields.length > 0) {
          f = fields.pop();
          j = j[f];
        }
        if (patt.test(j)) {
          out.push(input[i]);
        }
        i++;
      }
      return out;
    }
  };
}); 
```

它适用于仅具有一级属性的多级对象或简单对象。

迟到了，但希望它可以帮助您从不同的角度看待。

这是 CoffeeScript 中的代码，更简洁：

```
angular.module('yourApp')
    .filter 'regex', ->
        (input, field, regex) ->
            if input?
                patt = new RegExp(regex)
                i = 0
                out = []
                while i < input.length
                    fields = field.split('.').reverse()
                    j = input[i]
                    while fields.length > 0
                        f = fields.pop()
                        j = j[f]
                    if patt.test(j)
                        out.push input[i]
                    i++
                return out 
```

# wpf - ViewModel - 我的业务逻辑层？

> ID：12046934
> 
> 赞同：4
> 
> 时间：2012-08-21T00:18:53.103
> 
> 标签：wpf, mvvm, viewmodel, business-logic

在我的工作中，我被分配到一个使用 MVVM 模式实现的 WPF 项目。它具有零代码隐藏的视图，这很酷。它使用实体框架生成的数据模型作为模型（与其他一些类），我怀疑这是一种正确的方法。但最让我烦恼的是，它拥有 ViewModel 作为所有业务逻辑和应用程序/操作代码所在的最厚层。

现在我是 WPF/MVVM 的新手，但我对 MVVM 模式的理解表明 ViewModel 只应该为 View 提供方法，以便它可以使用 Model，这使得它成为最薄的层和我的业务逻辑和应用程序/操作代码应该驻留在其他地方。

如果有人可以帮助我，我将不胜感激。我对 ViewModel 的目的是对还是错？我应该把我的业务逻辑和应用程序/操作代码放在其他地方，还是只考虑 ViewModel 作为我的业务逻辑层？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T00:35:43.940

是的，我同意在视图模型中没有业务逻辑，除非它是非常简单的数学计算。我工作的公司喜欢将所有业务逻辑保留在模型中。我个人认为你的项目中应该有一个服务层来处理所有这些逻辑。但是是的，视图模型应该专注于视图，获取和发送输入，最好通过 INotifyPropertyChanged 接口更新值/属性。我喜欢将视图模型视为学校指挥交通的“交叉警卫”。:P - 希望这会有所帮助

# android - Android：如何将联系人作为 vCard 保存到 sdcard。没有重复？

> ID：12046936
> 
> 赞同：3
> 
> 时间：2012-08-21T00:19:11.573
> 
> 标签：android, duplicates, contacts, vcf-vcard

我正在尝试将手机上的所有联系人作为 .vcf 文件 (vCard) 保存到 sdcard。它有效，但我有一个问题。每个拥有多个电话号码（手机号码和工作号码）的联系人都会保存两次。并且这两个数字都在每个重复的联系人中，所以它们是正确的，只是重复的。有人可以告诉我如何解决这个问题吗？我的代码是：

```
File delete=new File(Environment.getExternalStorageDirectory()+"/Contacts.vcf");

     if (delete.exists()) {
       delete.delete();

     }

    Cursor phones = ContactService.this.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null, null, null);
    phones.moveToFirst();
      for(int i =0;i<phones.getCount();i++)
      {
         String lookupKey =  phones.getString(phones.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
        Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);

       AssetFileDescriptor fd;
        try 
        {
            fd = ContactService.this.getContentResolver().openAssetFileDescriptor(uri, "r");
            FileInputStream fis = fd.createInputStream();
            byte[] buf = new byte[(int) fd.getDeclaredLength()];
            fis.read(buf);
            String VCard = new String(buf);
            String path = Environment.getExternalStorageDirectory().toString() + File.separator + vfile;
            FileOutputStream mFileOutputStream = new FileOutputStream(path, true);
                       mFileOutputStream.write(VCard.toString().getBytes());           
            phones.moveToNext();             
        } 
        catch (Exception e1) 
        {
             // TODO Auto-generated catch block
             e1.printStackTrace();
        }

      } 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T04:57:51.997

使用以下代码将联系人数据作为 vcf 文件保存到设备 SD 卡中。

```
public class VCardActivity extends Activity {
    Cursor cursor;
    ArrayList<String> vCard;
    String vfile;
    static Context mContext;

    /** Called when the activity is first created. */
    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            mContext = VCardActivity.this;
            getVCF();
        }

        public static void getVCF() {
            final String vfile = "Contacts.vcf";
            Cursor phones = mContext.getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
            phones.moveToFirst();
            for (int i = 0; i < phones.getCount(); i++) {
                String lookupKey = phones.getString(phones.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
                Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);
                AssetFileDescriptor fd;
                try {
                    fd = mContext.getContentResolver().openAssetFileDescriptor(uri, "r");
                    FileInputStream fis = fd.createInputStream();
                    byte[] buf = new byte[(int) fd.getDeclaredLength()];
                    fis.read(buf);
                    String VCard = new String(buf);
                    String path = Environment.getExternalStorageDirectory().toString() + File.separator + vfile;
                    FileOutputStream mFileOutputStream = new FileOutputStream(path, true);
                    mFileOutputStream.write(VCard.toString().getBytes());
                    phones.moveToNext();
                    Log.d("Vcard", VCard);
                } catch (Exception e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }
        }
    } 
```

并查看下面的链接了解更多信息。

[将联系人导出为 VCF 文件](http://androidcodeexamples.blogspot.in/2012/06/export-contacts-as-vcf-file-in-android.html)

`androidmanifest.xml`并在您的文件中授予以下权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:00:14.767

检查**lookupKey**的重复性...

# php - .class 为 php 扩展

> ID：12046937
> 
> 赞同：0
> 
> 时间：2012-08-21T00:19:41.433
> 
> 标签：php, class, file-extension

我一直在挖掘 drupal 安装文件夹并找到一些 .inc 文件。所以他们代表'include'，但我想知道是否有PHP的.class扩展名来区分文件是一个类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T00:24:01.963

该`.class`扩展通常用于[Java 类文件](http://en.wikipedia.org/wiki/Java_class_file)。虽然没有技术原因不能将它用于 PHP 包含文件，但这样做会使其他开发人员感到困惑，因为它可能会将文件与 Java 虚拟机相关联，而不是与文本编辑器相关联。它还可能使您面临一些安全问题：如果可以从您的 Web 根目录直接访问文件`.class`以及`.inc`文件，则它们将可供下载。无论是从安全角度还是为了其他开发人员的利益，您最好`.php`对所有 PHP 文件使用该扩展。

# iphone - 将 UIView 动画速度与音频播放同步

> ID：12046940
> 
> 赞同：4
> 
> 时间：2012-08-21T00:20:02.700
> 
> 标签：iphone, ios, animation, uiview

我有一个垂直的单像素视图，我想在表示正在播放的音符的网格上移动。根据歌曲的 BPM（每分钟节拍数），动画应该更慢或更快。笔记彼此紧挨着挤压，宽度为 25 像素。

我现在这样做的方式是每次经过 x 个样本时将视图向右移动 1px：

```
int bpm = 90;
int interval = (44100 * 60.0f / song.bpm) / 25.0f; // = 1176
// sample rate=44100 multiplied by 60 (seconds) divided by number of pixels 
```

因此，在 BPM=90 的情况下，每播放 1176 个样本，我将 UIView 移动 1px。这工作得相当好，但如果 BPM 高于 180，我会遇到问题。此时，播放的音乐的视图落后，当 BPM 上升到 240 时，视图就偏离了。

*如何使用视图的内置动画功能来做到这一点，并将动画速度基于我上面发布的计算？*我想在音乐开始播放后开始动画，所以我不需要逐个像素地手动移动它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T17:28:10.443

如果我理解正确，你想要做的是：

1.  绘制静态背景图像。
2.  在从左到右移动的顶部画一条垂直线。
3.  将行的 x 位置与音频播放时间同步。

有两个问题需要解决：

*   绘图性能
*   音频同步

为了获得正确的绘图性能，需要考虑两种实现：

1.  使用 Core Animation 层和动画（比 2 更容易实现。）
2.  使用 OpenGL 绘制整个视图（可能比 1 快一点，延迟少一点。）

在 OpenGL 中实现视图的代码太多，无法作为示例发布，但这里是 Core Animation 选项的代码：

```
// In the UIViewController:

- (CALayer *)markerLayer
{
    static NSString *uniqueName = @"com.mydomain.MarkerLayer";
    for (CALayer *layer in self.view.layer.sublayers) {
        if ([layer.name isEqualToString:uniqueName])
            return layer;
    }

    CALayer *markerLayer = [CALayer layer];
    markerLayer.backgroundColor = [UIColor whiteColor].CGColor;
    markerLayer.name = uniqueName;
    markerLayer.anchorPoint = CGPointZero;
    [self.view.layer addSublayer:markerLayer];
    return markerLayer;
}

- (void)startAnimationWithDuration:(NSTimeInterval)duration
{
    [CATransaction begin];
    [CATransaction setDisableActions:YES];

    CALayer *markerLayer = [self markerLayer];

    markerLayer.bounds = (CGRect){.size = {1, self.view.bounds.size.height}};
    markerLayer.position = CGPointZero;
    [CATransaction commit];

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position.x"];
    animation.fromValue = @0.0f;
    animation.toValue = [NSNumber numberWithFloat:self.view.bounds.size.width];
    animation.duration = duration;
    [markerLayer addAnimation:animation forKey:@"audioAnimation"];
} 
```

音频同步很大程度上取决于您播放它的方式，例如使用 AVFoundation 或 Core Audio。要获得精确的同步，您需要音频引擎的某种回调，告诉您现在播放的确切位置或播放时间。

也许在开始音频之前立即调用就足够了，`startAnimationWithDuration:`但这似乎有点脆弱，并且取决于音频框架的延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:16:40.843

一种解决方案：您的背景视图如图所示 - 蓝色框。确保此视图是不透明的。定义一个新的 UIView 子类并将它放在我称之为背景视图的地方——这个视图将是不透明的——让我们称之为标记视图。

标记视图将随时知道绘制一条线的 x 偏移量。它将提供一个 drawRect 方法，将 rect 参数设置为清晰的颜色（alpha=0）。然后，您将使用 Quartz 调用单条垂直线进行绘制（如果某些布尔值要求这样做）。

当你的控制器启动时，它告诉这个视图不要画线。启动时，将布尔值更改为 YES，给它 x 坐标，然后告诉该视图 setNeedsDisplayInRect:CGRectMake(theXoffset, 0, 1, heightOfView)];

即使有一些延迟，当视图最终绘制时 x 值应该是当前的，因为您正在“实时”更新它。

编辑：

*   通过标记，我的意思是垂直线 - 它“标记”了这个地方，不是吗？

*   alpha 0 意味着（在这种情况下）您的大部分覆盖视图，即“标记”视图，将是一种清晰的颜色，这意味着每个像素都是清晰的（alpha=0），以免阻挡其下方的视图。此视图绘制的唯一像素是垂直线。

*   BOOL、“x”等 - 视图的区域属性。你可能需要更多，但你不需要很多。然后这些属性指示视图在调用“drawRect:”时应该做什么。

*   您将需要了解一些关于 Quartz（Apple 用于实际绘图的技术）的知识。在 drawRect 中，您将获得当前的 CGContextRef，并在几乎所有调用中使用它，设置要绘制的线条的宽度（默认为 1），设置线条颜色，移动到某个点，将线条绘制到另一个点（这将是一个“路径”），然后描边路径。与大多数其他解决方案相比，这将非常快（但本身可以加速）。

如果这一切看起来令人生畏，那么也许其他人会有一个更简单的解决方案，或者你可以提供一个赏金，看看是否有人（比如我）真的会为你编写整个事情。

编辑2：

这是执行指示线的视图代码（我使用红线​​更好地查看它，此数组设置颜色：{ 1, 0, 0, in R/G/B space）

```
#import "SlideLine.h"

#define LINE_WIDTH 1.0f

@implementation SlideLine
@synthesize showLine, x;

- (void)drawRect:(CGRect)rect
{
    if(!showLine) return;

    CGRect bounds = self.bounds;

    CGContextRef c = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(c, LINE_WIDTH);

    // draws two slightly transparent lines on either side to soften the look
    for(int i=0; i<3; ++i) {
        CGFloat val[4] = { 1, 0, 0, i==1 ? 1 : 0.5f}; // half alpha for each side line
        CGContextSetStrokeColor(c, val);

        CGFloat xx = x - LINE_WIDTH/2 - 1 + i;
        CGContextMoveToPoint(c, xx, 0);
        CGContextAddLineToPoint(c, xx, bounds.size.height);
        CGContextStrokePath(c);
    }
}

- (void)setShowLine:(BOOL)val
{
    showLine = val;
    [self setNeedsDisplay];
}

@end 
```

我创建了一个[Xcode 项目](http://dl.dropbox.com/u/60414145/SlidingLine.zip)，向您展示如何使用它，并通过控件来改变速度等：

![在此处输入图像描述](../Images/23e28b4541c4af6e1ca496f46f6a7f0b.png)

EDIT3：所以我开始修改以使用动画，但不幸的是它没有完全烘焙。这个想法是采用标记线（3 像素宽）并使其成为单个视图（3 像素宽）。一个新的 SlidingLineController 从它的所有者那里获取更新（将由音频回调驱动），它告诉控制器 x 在什么时间应该在哪里（所以它是一个速率）。然后控制器使用该速率为标记设置动画，以便在指定的时间它应该在哪里。随着更新的到来，动画速度可能会略微加快或减慢，以便绝对位置始终接近您想要的位置。

虽然这似乎是比原版更好的技术，但它实际上看起来比原版更“不稳定”。可能最佳解决方案是使用图层（而不是视图）然后对其进行动画处理，并在其移动时更新其目标和速率，而不是启动和重新启动。可能[第二个项目](http://dl.dropbox.com/u/60414145/SlidingLine2.zip)可以使用第一个项目的技术，使用相同的管理速率概念以 30fps 的速率简单地重绘自身。不幸的是，我没有时间去追求这个，因为我现在看到这个很快就要到期了。

编辑：4 好吧，我做了另一个更新，以 30fps 的速度重绘，使用上面的控制器，它工作得很好——它还没有完成，但你可以[在第三次旋转](http://dl.dropbox.com/u/60414145/SlidingLine3.zip)中看到它非常流畅

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T04:46:18.693

你可能想要：

*   声明一个原子 int 变量，它将播放位置存储在样本中
*   `NSTimer`在主线程上以合适的频率（例如，小于屏幕的刷新率）在播放期间安装一个。
*   渲染音频时，将原子 int 的位置提前适当的量。
*   当您的计时器触发时，读取音频线程写入的位置。如果发生更改，请执行适当的操作来更新您的 UI，例如调用`setNeedsDisplay`或重新定位您的歌曲位置视图。

我建议这样做，因为如果您最终推送到多个渲染器或从多个渲染器推送，您的优化尝试可能会适得其反。

# java - 安全生成顺序订单号每天重置

> ID：12046941
> 
> 赞同：1
> 
> 时间：2012-08-21T00:20:07.813
> 
> 标签：java, oracle, hibernate

我需要以 yyyyMMddxxxxxx 格式生成订单号，其中 xxxxxx 是自午夜以来的订单数。

例如，20120821000004 是 2012 年 8 月 21 日的第四个订单。每秒最多可以创建 5 个订单，因此这是一个性能考虑。

一个明显的解决方案是执行以下操作来查找要增加的最新订单：

```
SELECT MAX (id) FROM table_name WHERE id LIKE '2012-08-21%' 
```

但这很可能会遇到性能问题。

我探索的另一个选项是创建一个用于驱动数字组件并使用插入触发器的序列。这种方法的问题在于，您需要某种安全的方法在一天开始时将序列翻转为零，如果序列未在午夜完全重置，这可能会导致冲突/竞争条件。

我可以在这里与 Oracle 一起使用一些技巧来使其密封且高效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:18:55.147

您可以为每一天生成一个新序列。给他们一个有意义的名字，比如“order_seq_20120821”。

*   检查今天的序列是否存在
*   如果不创建它（在这里处理并发，另一个线程可能已经创建它）
*   然后使用它

这里不是真正的java问题，客户端无法处理数据库并发

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:34:08.203

如果您只打算在没有任何外部实用程序的 SQL 中执行此操作，我可能会保留两个表：

*   绝对订单编号
*   日期/订单偏移

第一个表将用于生成单调递增的唯一 ID 值。第二个表将用于跟踪从第一个表到每日 ID 的每日偏移量。将在当天的第一个订单上插入一行，该行将是第一个表中的日期和最高 ID。然后可以通过从第一个表中提取的新 ID 中减去第二个表中的 ID 偏移量来计算订单 ID。

您可以考虑使用整数绝对订单 ID 在内部跟踪数据库中的订单，并仅使用日期/偏移数据来动态生成日期和每日订单号的人性化信息或作为交叉引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T15:32:11.327

Create an Oracle sequence for each day of the week i.e.

CREATE SEQUENCE SEQ_MON
START WITH 1
INCREMENT BY 1
ORDER;

CREATE SEQUENCE SEQ_TUE
START WITH 1
INCREMENT BY 1
ORDER;

ETC up to SEQ_SUN

Create an Oracle Stored Procedure that returns:
1\. a datetime
2\. a sequence number for the day of the week corresponding to above datetime

**Logic as per below:**
- Store current date and time in a variable
- Get day of week corresponding to date in variable.
*Note: Use a formula that is independent of NLS_TERRITORY setting. You could use: 1 + TRUNC (DT) - TRUNC (DT, 'IW') to get 1 for Mon.*
- Get next sequence from sequence corresponding to above day of the week
- Return the datetime in the variable and the new sequence number obtained above.

**Schedule Job:**
Create a scheduled job that runs at 1 a.m. (not midnight) every day to reset seq of previous day.

With the above approach, you are safe with 24X7 operations.

**IMPORTANT:**
The datetime returned should be used to timestamp your incoming request so that the timestamp of your request shall match the sequence number allotted to it. This is important for requests hitting just before midnight.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T05:47:11.033

您可以创建一个从下一个订单 ID 开始的序列

```
CREATE SEQUENCE orders_seq
 START WITH     201208210000001
 INCREMENT BY   1
 NOCACHE
 ; 
```

并通过作业将午夜的序列增加到第二天的第一个 id：

```
 declare
  v_curr_id NUMBER;
  v_inc     NUMBER;
  v_next_val NUMBER;
 begin 
  select orders_seq.nextval into v_curr_id from dual;
  v_next_val := to_number(to_char(SYSDATE+1, 'yyyymmdd') || '000000');
  v_inc := v_next_val - v_curr_id;
  execute immediate ' alter sequence orders_seq increment by ' || v_inc ;
  select orders_seq.nextval into v_curr_id from dual;
  execute immediate ' alter sequence orders_seq increment by 1';
 end;
 / 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T01:01:46.493

这不是一个专门的 Oracle 解决方案，但我正在考虑使用一个包含三列的订单号表：日期、xxxxxx（作为 int）和订单号。

保持索引（日期，xxxxxxx）。现在，查询如下：

```
select max(id) from OrderNumbers where date = <date> 
```

这将使用索引并且应该加速操作。

另一个想法是保留一个类似的表格，但仅限于当前日期。在这个版本中，您将有一个序列/自动增量列自动生成 xxxxxx。然后，您可以使用触发器来计算订单号并取回插入的最后一个值以创建新的订单号。这可能是最快的方法，尤其是当您考虑锁定数据的问题时。

# jquery - append() 和 appendTo() 不会在元素末尾注入

> ID：12046944
> 
> 赞同：1
> 
> 时间：2012-08-21T00:20:51.290
> 
> 标签：jquery, dom

见[http://jsfiddle.net/PAWAS/3/](http://jsfiddle.net/PAWAS/3/)

**JavaScript：**

```
$(document).ready(function () {

    $.each($(".item"), function(index, value) { 
        thisEl = $(this);
        thisEl.children("strong").after("<span style='display:inline-block'>");
        $("</span>").appendTo(thisEl);

    });
});​ 
```

**HTML：**

```
<div class="item">
    <strong>Time Cond:</strong>
    MorningCheck
</div>​ 
```

应该：

```
<div class="item">
    <strong>Time Cond:</strong>
   <span> MorningCheck</span>
</div>​ 
```

但是`</span>`在文本之前被注入`MorningCheck`

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:30:24.770

`.append`并`.appendTo`操作 DOM，不要创建 HTML 字符串。在这里查看一个类似的问题和我的答案：[Using .append() with lists places text on a newline](https://stackoverflow.com/questions/11959948/using-append-with-lists-places-text-on-a-newline)。

假设元素内始终只有一个（非空）文本节点，您可以使用以下内容将其放入`span`元素内：

```
$(".item").each(function() {
    // get all child nodes, including text nodes
    $(this).contents().filter(function() {
        // is text node and does not only contain white space characters
        return this.nodeType === 3 && $.trim(this.nodeValue) !== '';
    }).wrap('<span style="display:inline-block"></span>'); // wrap in span
}); 
```

[**演示**](http://jsfiddle.net/DyysX/)

这会查找非空文本节点并将它们包装在`span`元素中。如果有多个文本节点，您可能只想获取`.last()`它们中的一个，或者如果您想`strong`特别针对元素之后的文本节点，您可以这样做：

```
$($(this).children('strong').get(0).nextSibling).wrap(...); 
```

# ruby-on-rails - 具有多个 HABTM 模型的 AR 查询

> ID：12046950
> 
> 赞同：0
> 
> 时间：2012-08-21T00:21:43.770
> 
> 标签：ruby-on-rails

我有三个模型：项目、年份和类别

项目与年份和类别都有 HABTM 关系。

我正在尝试获取属于给定类别和给定年份的所有项目。

类似`Project.where("year.name = ? and category.name = ?", "2012", "print")`但我不确定如何使用关联模型而不是模型的属性来执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:47:47.417

尝试

```
Project.joins(:years).joins(:categories).where("years.name = ? and categories.name = ?", "#{year}", "#{category}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:36:08.500

看起来有点尴尬，但它有效：

```
Year.find_by_name("2012").projects.all(:include => :categories, :conditions => ["categories.name = ?", "print"]) 
```

# functional-programming - 什么时候可以修改函数式语言中的变量？

> ID：12046955
> 
> 赞同：11
> 
> 时间：2012-08-21T00:22:12.760
> 
> 标签：functional-programming, scheme, lisp, purely-functional, mutability

所以我正在使用 Racket Scheme 自学函数式编程，到目前为止我很喜欢它。作为我自己的练习，我一直在尝试以纯粹的功能方式实现一些简单的任务。我知道不变性是函数式风格的重要组成部分，但我想知道是否有任何时候可以。

我想到了一种有趣的方法，让函数在与过滤器一起使用时从字符串列表中去除非唯一字符串，如下所示：

```
(define (make-uniquer)
  (let ([uniques '()])
    (lambda (x)
      (if (not (member x uniques))
          (set! uniques (cons x uniques))
          #f))))

(define (uniquify x)
  (let ([uniquer (make-uniquer)])
    (filter uniquer x))) 
```

如您所见，`make-uniquer`返回一个字符串列表的闭包以比较其唯一性，这样它就可以充当过滤器的简单谓词。但我正在破坏性地更新封闭列表。这是不好的形式，还是可以以这种方式更改局部封闭变量？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T03:06:00.783

# 纯函数式和非纯函数式编程

[纯函数](https://en.wikipedia.org/wiki/Pure_function)本质上是[引用透明](https://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)的，它允许记忆（缓存结果）。缺乏可变状态允许重入，允许不同版本的链接数据结构共享内存，并使自动并行化成为可能。关键是通过限制自己不受变异状态的影响，您不再需要考虑许多复杂的命令式编程问题。

然而，这种限制有缺点。一是性能：一些算法和数据结构（如构建哈希表）根本无法表达为纯函数，而无需复制大量数据。另：与纯函数式语言 Haskell 进行比较。由于突变不存在（概念上），您必须使用[monad](https://en.wikipedia.org/wiki/Monad_%28functional_programming%29)来表示状态变化。（尽管 Haskell 提供了相当简洁的`do`-notation 语法糖，但在状态 monad 中编程与“常规” Haskell 完全不同！）如果您的算法最容易使用几个改变状态的互锁循环来表达，那么 Haskell 实现将更加笨拙比不纯的语言所能做到的。

一个示例是更改深度嵌套在 XML 文档中的单个节点。[使用zipper 数据结构](http://anti-xml.org/zippers.html)，没有状态突变是可能的，但更困难。示例伪代码（纯）：

```
old_xml = <a><b><c><d><e><f><g><h attrib="oldvalue"/></g></f></e></d></c></b></a>
// '\' is the XML selection operator
node_to_change = orig_xml \ "a" \ "b" \ "c" \ "d" \ "e" \ "f" \ "g" \ "h"
node_changed = node_to_change.copy("attrib" -> "newvalue")
new_xml = node_changed.unselect().unselect().unselect().unselect()
                      .unselect().unselect().unselect().unselect()
return new_xml 
```

示例（不纯）：

```
xml = <a><b><c><d><e><f><g><h attrib="oldvalue"/></g></f></e></d></c></b></a>
node_to_change = orig_xml.select_by_xpath("/a/b/c/d/e/f/g/h")
node_to_change.set("attrib" -> "newvalue")
return xml    // xml has already been updated 
```

有关纯函数数据结构的更多信息，请参阅[https://cstheory.stackexchange.com/questions/1539/whats-new-in-purely-functional-data-structures-since-okasaki](https://cstheory.stackexchange.com/questions/1539/whats-new-in-purely-functional-data-structures-since-okasaki)。（此外，通常可以编写一个只操作内部状态的过程函数，这样它就可以被包装起来，使其对调用者来说实际上是一个纯函数。这在不纯的语言中会更容易一些，因为你不需要必须将它写在一个状态单子中并将其传递给`runST`.)

尽管以不纯的风格编写会失去这些好处，但函数式编程的其他一些便利（如高阶函数）仍然适用。

# 使用突变

Lisp 是一种[*不纯*](https://en.wikipedia.org/wiki/Purely_functional)的函数式语言，这意味着它允许状态突变。**这是设计使然**，因此如果您需要突变，您可以使用它，而实际上不必使用其他语言。

一般来说，*是*的，当

*   出于性能原因需要它，或者
*   使用突变可以更清楚地表达您的算法。

当你这样做时：

*   清楚地记录您的`uniquify`函数将改变您传递给它的列表。调用者向你的函数传递一个变量并让它回来改变是很讨厌的！
*   如果您的应用程序是多线程的，请分析、注意并记录您的非纯函数是否是线程安全的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-21T03:44:57.830

在这种情况下，我会避免使用可变实现，因为函数式实现在性能方面可以很好地竞争。以下是该函数的三个版本（包括内置的`remove-duplicates`）：

```
#lang racket

(define (make-uniquer)
  (let ([uniques (make-hash)])
    (lambda (x)
      (if (not (hash-ref uniques x #f))
          (hash-set! uniques x #t)
          #f))))

(define (uniquify x)
  (let ([uniquer (make-uniquer)])
    (filter uniquer x)))

(define (uniquify-2 lst)
  (define-values (_ r)
   (for/fold ([found (hash)] [result '()])
             ([elem (in-list lst)])
     (cond [(hash-ref found elem #f)
            (values found result)]
           [else (values (hash-set found elem #t)
                         (cons elem result))])))
  (reverse r))

(define randoms (build-list 100000 (λ (n) (random 10))))
(time (for ([i 100]) (uniquify randoms)))
(time (for ([i 100]) (uniquify-2 randoms)))
(time (for ([i 100]) (remove-duplicates randoms)))

;; sanity check
(require rackunit)
(check-equal? (uniquify randoms) (uniquify-2 randoms))
(check-equal? (uniquify randoms) (remove-duplicates randoms)) 
```

我为此得到的时间是

```
cpu time: 1348 real time: 1351 gc time: 0
cpu time: 1016 real time: 1019 gc time: 32
cpu time: 760 real time: 760 gc time: 0 
```

不是科学数字，所以请谨慎对待。公平地说，我确实调整`uniquify-2`了一点，因为我的第一个版本比较慢。我还使用哈希表改进了可变版本，但也许还有其他可以应用的优化。此外，内置`remove-duplicates`针对性能进行了调整，并且确实使用了可变数据结构（尽管它避免了`set!`.

您可能还[对性能指南条目](http://docs.racket-lang.org/guide/performance.html#(part._.Mutation_and_.Performance))感兴趣。它指出使用`set!`会损害性能，因此请谨慎使用。

# matlab - 在 MATLAB 中将纬度、经度和温度绘制为等高线图

> ID：12046959
> 
> 赞同：3
> 
> 时间：2012-08-21T00:22:44.897
> 
> 标签：matlab, plot, contour

我真的停滞不前——认为这很容易。

我有 3 个数组 - 纬度、经度和温度，

在每个数据点或位置我想绘制温度

作为等高线图。

所以在`(45,123)`温度`= 73`。

值样本：

```
 Latitude = [45 45 67 34 31 54 60 63 61];

 Longitude = [123 121 117 114 132 119 122 135 134];

 Temp = [73 75 75 73 67 72 82 78 80]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:27:36.423

有什么困难？只需使用轮廓功能。 [http://www.mathworks.com/help/techdoc/ref/contour.html](http://www.mathworks.com/help/techdoc/ref/contour.html)

```
contour(Latitude,Longitude,Temp) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-17T19:09:18.983

迟到总比不到好！如果有人在寻找工作代码应该知道该`contour`函数有点棘手，您必须使用矩阵来显示等高线图。所以：

```
n = length(Latitude);
[X, Y] = meshgrid(linspace(min(Latitude), max(Latitude), n), linspace(min(Longitude), max(Longitude), n));
Z = griddata(Latitude, Longitude, Temp, X, Y);
contour(X, Y, Z); 
```

如果您更喜欢填充图，请使用：

```
contourf(X, Y, Z); 
```

如果你想在 a 上绘制你的情节`worldmap`：

```
contourfm(X, Y, Z); 
```

希望它可以帮助某人。

# c++ - c++ 函数参数中的函数定义

> ID：12046960
> 
> 赞同：2
> 
> 时间：2012-08-21T00:22:54.633
> 
> 标签：c++, function, arguments

我最近遇到了一段代码，如下所示：

```
static typename handle_set::iterator find(T* p)
        {
        return std::find_if(handles().begin(), handles().end(), [p](const std::unique_ptr<T,D>& l) { return l.get() == p; });
        } 
```

在哪里

```
typedef typename std::set<std::unique_ptr<T,D>> handle_set;
    static handle_set& handles(void)
    {
        static handle_set h_;

        return h_;
    } 
```

我的问题是关于这部分：

`[p](const std::unique_ptr<T,D>& l) { return l.get() == p; }`

这是函数的第三个参数`std::find_if()`。第三个参数可以是函数指针。这是在另一个函数的参数中定义函数指针的内联方式吗？我以前没有见过这种用法。我的理解正确吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T00:27:57.633

`std::find_if`被模板化并接受作为第三个参数的泛型*函子*（也称为“函数对象”），它可以被称为函数。这类“事物”包括函数指针、任何重载函数调用运算符和 lambda 的对象。

在这种特定情况下，您会看到它与 lambda 函数一起使用，这是一个就地定义的匿名函数。

Lambda 不仅仅是“一种定义函数指针的方法”；相反，他们使用给定的代码和捕获的上下文“即时”创建一个*函数对象。*lambda 和“常规函数”之间的一个关键区别是 lambda 可以捕获上下文（`p`示例中的变量）。

此外，具有相同签名的函数的指针具有相同的类型，而 lambda 具有未指定的类型。尽管如此，不捕获任何内容的 lambda 仍会隐式转换为普通函数指针（参见 C++11 §5.1.2/6，*感谢[Cheers 和 hth。- Alf](https://stackoverflow.com/users/464581/cheers-and-hth-alf)指出这一点*）；这使得它们即使与只接受函数指针而不接受泛型函子的函数一起使用也很有用。

您可能还没有见过 lambda，因为它们是 C++ 语言的最新成员（它们已在 C++11 标准中标准化，今年才批准）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:25:48.720

第三个参数不是函数指针。它是一个函数*对象*。该对象可能恰好是一个指针。但它可能不会。它可以是任何具有 的值`operator()`。一个 lambda 就是这样一个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T00:26:12.657

这是一个 C++11 lambda（匿名函数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T00:33:01.507

看起来您已经找到了一些 C++11 代码。你在那里处理一些事情：

1.  [Lambda 函数](http://en.cppreference.com/w/cpp/language/lambda)
2.  [唯一指针](http://en.cppreference.com/w/cpp/memory/unique_ptr)
3.  [闭包](http://www.cpprocks.com/wp-content/uploads/c++11-rocks-series-free-sample-lambdas.pdf)

您需要进行一些阅读以准确了解该代码的作用。

# oracle - 如何处理 Oracle APEX 报告中的复选框项目？

> ID：12046963
> 
> 赞同：0
> 
> 时间：2012-08-21T00:23:10.150
> 
> 标签：oracle, plsql, oracle-apex

我不是经验丰富的 APEX 开发人员，因此出现了这个问题：我有一个包含几列的报告，第一个显示一个复选框，其值是行记录的列 ID，我需要为每个列运行 pl/sql 函数行检查，但我没有运气...

相关列的 SQL 看起来像这样（为简单起见进行了修剪）：

```
SELECT
  apex_item.checkbox(1, p.ticket_id,'UNCHECKED') "Add",
  p.ticket_id,
  UPPER(SUBSTR(p.status_code, 1, 3)) status,
  p.last_update
FROM problems p
... etc. 
```

第一列设置为呈现为“简单复选框”，并为其值参数列表获取#TICKET_ID#。我有一个提交按钮设置为只提交页面，并且我创建了一个运行“提交时 - 计算和验证之后”的进程，其执行的代码是以下 PL/SQL：

```
BEGIN
  FOR i in 1..APEX_APPLICATION.G_F01.COUNT LOOP
    BEGIN
      IF APEX_APPLICATION.G_F01(i) IS NOT NULL THEN
      run-some-procedure-function(
        parameter_one => APEX_APPLICATION.G_F01(i),
        parameter_two => :SOME_VALUES_ID,
        parameter_three => :F_AU_ID
      );
      END IF;
      EXCEPTION WHEN DUP_VAL_ON_INDEX THEN NULL;
    END;
  END LOOP;
END; 
```

当我运行这个应用程序时，标记一些复选框，然后点击提交按钮，我最终会收到一条错误消息和一个奇怪的 URL 结尾：

![使用复选框值提交时出现 APEX 错误](../Images/92cde0adec7164a6ae3db1bd6661ac99.png)

欢迎任何想法和/或建议，甚至接受我的问题的不同方法（我只需要坚持复选框，因为我需要它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:45:42.997

追踪原因的一些提示：

1.  点击提交按钮后检查分支。你是跳转到同一个页面还是不同的页面？
2.  如果分支没问题，那么作为测试的一部分，在进程中注释 run-some-procedure-function 并查看，只是为了确保该函数不是导致错误的原因。

# regex - 使用正则表达式将位置与可选的子位置匹配

> ID：12046964
> 
> 赞同：0
> 
> 时间：2012-08-21T00:23:18.533
> 
> 标签：regex, url

我想重定向`/spam/(.*)`到`/$1`（包括`/spam/`到`/`）和`/spam`到`/`，但不是`/spam(.*)`到`$1`或`/$1`。

所以`/spam/eggs/bacon`变成了`/eggs/bacon`，`/spam/`都`/spam`变成了`/`，`spameggs/bacon`又不变成了`eggs/bacon`。

什么正则表达式配对来完成这个`(chars)`？`$1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:51:23.783

很简单：`^.*((?<=^/spam/).*|(?<=^/spam))$`到`/$1`

*[测试](http://ideone.com/YqAAA)（[http://ideone.com/YqAAA](http://ideone.com/YqAAA)）：*

```
'/spam'          --> '/'
'/spam/'         --> '/'
'/spam/one'      --> '/one'
'/spam/one/two'  --> '/one/two' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:55:05.850

我不确定 RegExp 的风格，但我会尝试类似...</p>

`/(spam($|/))?(.*)`==>`/$3`

这是一个 PHP 示例。

```
$rx = '~/(spam($|/))?(.*)~';
$arr = array(
    '/spam',
    '/spam/',
    '/spam/eggs/bacon',
    'spameggs/bacon',
    '/spameggs/bacon'
);
foreach ($arr as $val) {
    echo "<b>Before:</b> $val\n<b>After:</b> " . preg_replace($rx,'/$3',$val) . PHP_EOL.PHP_EOL;
} 
```

输出

> **之前：** /垃圾邮件
> **之后：** /
> 
> **之前：** /垃圾邮件/
> **之后：** /
> 
> **之前：** /spam/eggs/bacon
> **之后：** /eggs/bacon
> 
> **之前：** spameggs/培根
> **之后：** spameggs/培根
> 
> **之前：** /spameggs/bacon
> **之后：** /spameggs/bacon

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T00:53:39.283

图案：`/spam(?:/(.*)|()$)`

代替：`/$1`

这将正确替换，是迄今为止发布的最简单的解决方案，并且如果路径不是您正在考虑的形式（即如果它不匹配`/spam`或`/spam/___)`

# php - PHPUnit：是否可以将包含相同表的数据集添加到复合数据集中？

> ID：12046965
> 
> 赞同：2
> 
> 时间：2012-08-21T00:23:28.023
> 
> 标签：php, unit-testing, phpunit

根据 PHPUnit 文档（http://www.phpunit.de/manual/3.7/en/database.html#understanding-datasets-and-datatables），我们可以将包含相同表的数据集添加到复合数据集中，并且“当多个数据集包含同一个表时，行将按指定顺序附加”。但是，在 PHPUnit_Extensions_Database_DataSet_CompositeDataSet::addDataSet() 方法中，它具有以下代码：

```
 foreach ($dataSet->getTableNames() as $tableName)
    {
        if (in_array($tableName, $this->getTableNames()))
        {
            throw new InvalidArgumentException("DataSet contains a table that already exists: {$tableName}");
        }
    }

    $this->dataSets[] = $dataSet; 
```

我错过了什么还是文档不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:23:39.240

为了添加涉及同一个表的多个数据集，您需要扩展 CompositeDataSet 类并将 addDataSet 方法覆盖为以下内容：

```
 public function addDataSet(PHPUnit_Extensions_Database_DataSet_IDataSet $dataSet)
    {
        foreach ($dataSet->getTableNames() as $tableName)
        {
            if (in_array($tableName, $this->getTableNames()))
            {
                $this->getTable($tableName)->addTableRows($dataSet->getTable($tableName));
                return;
            }
        }

        $this->dataSets[] = $dataSet;
    } 
```

# haproxy - HAProxy HTTP 绑定停止工作

> ID：12046966
> 
> 赞同：0
> 
> 时间：2012-08-21T00:23:50.847
> 
> 标签：haproxy

我在 CentOS 5.2 上有 HAProxy 1.4.15，配置如下：

```
backend http_out
    mode        http
    option      forceclose
    option      httpclose
    option      forwardfor
    option      httpchk
    balance     roundrobin
    cookie      BACKEND insert indirect nocache maxidle 30m maxlife 8h
    server      server0 x.x.x.x:80 cookie A check inter 3s fall 3 weight 10

listen http_in
    bind        y.y.y.y:80
    default_backend http_out 
```

xxxx 和 yyyy 之间的连接良好，但重定向在几分钟后停止工作并且总是超时。如果我重新启动服务，它会再次工作，但只会再工作 2 分钟。我已经尝试了所有选项的排列，禁用 cookie，添加更多服务器，没有检查.. 总是一样的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:23:09.887

我看到两种可能性： - 您已加载 nf_conntrack（使用默认设置）并且表已满，因此您必须等待条目超时。- 由于未知原因，您的客户永远不会关闭他们的连接，并且您达到了使用所有连接的地步，因此您无法建立新的连接。检查您是否设置了超时，如果超时解决了问题，那么释放连接的方式肯定存在问题。

# xml - 如何编写反转一组节点的 XSLT 转换？

> ID：12046972
> 
> 赞同：2
> 
> 时间：2012-08-21T00:24:31.130
> 
> 标签：xml, xslt

假设我有这个：

```
<nodes>
<node>
    <number>1</number>
    <name>"ABC"</name>
    <comment>"blah"</comment>
</node>

<node>
    <number>2</number>
    <name>"DEF"</name>
    <comment>"blah blah"</comment>
</node>

<node>
    <number>3</number>
    <name>"XYZ"</name>
    <comment>"blah blah blah"</comment>
</node>
</nodes> 
```

我想结束这个：

```
<nodes>
<node>
    <number>3</number>
    <name>"XYZ"</name>
    <comment>"blah blah blah"</comment>
</node>

<node>
    <number>2</number>
    <name>"DEF"</name>
    <comment>"blah blah"</comment>
</node>

<node>
    <number>1</number>
    <name>"ABC"</name>
    <comment>"blah"</comment>
</node>
</nodes> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:29:02.877

**I. 在您的情况下，解决方案就像这样简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <nodes>
   <xsl:apply-templates select="node">
     <xsl:sort select="position()" data-type="number" order="descending"/>
   </xsl:apply-templates>
  </nodes>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<nodes>
    <node>
        <number>1</number>
        <name>"ABC"</name>
        <comment>"blah"</comment>
    </node>
    <node>
        <number>2</number>
        <name>"DEF"</name>
        <comment>"blah blah"</comment>
    </node>
    <node>
        <number>3</number>
        <name>"XYZ"</name>
        <comment>"blah blah blah"</comment>
    </node>
</nodes> 
```

**产生了想要的正确结果：**

```
<nodes>
   <node>
      <number>3</number>
      <name>"XYZ"</name>
      <comment>"blah blah blah"</comment>
   </node>
   <node>
      <number>2</number>
      <name>"DEF"</name>
      <comment>"blah blah"</comment>
   </node>
   <node>
      <number>1</number>
      <name>"ABC"</name>
      <comment>"blah"</comment>
   </node>
</nodes> 
```

* * *

**二、反转一个节点集，其节点都属于同一个文档**：

如果我们想要反转节点集的节点并让文档中的所有其他节点“按原样”保留，事情就会变得更加棘手。

**让我们对这个 XML 文档进行 nave**：

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

我们希望由此生成一个文档，其中`num`奇数值元素的顺序相同，但`num`偶数值元素的顺序相反。结果必须是：

```
<nums>
   <num>01</num>
   <num>10</num>
   <num>03</num>
   <num>08</num>
   <num>05</num>
   <num>06</num>
   <num>07</num>
   <num>04</num>
   <num>09</num>
   <num>02</num>
</nums> 
```

**这是产生所需结果的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vNodes" select="/*/*[. mod 2 = 0]"/>

 <xsl:variable name="vrtfReverse">
   <xsl:for-each select="$vNodes">
     <xsl:sort select="position()" data-type="number" order="descending"/>
     <xsl:copy-of select="."/>
   </xsl:for-each>
 </xsl:variable>

 <xsl:variable name="vReverse" select="ext:node-set($vrtfReverse)/*"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*/*">
  <xsl:choose>
   <xsl:when test="count(. | $vNodes) > count($vNodes)">
     <xsl:call-template name="identity"/>
   </xsl:when>
   <xsl:otherwise>
     <xsl:variable name="vPositionInNodeSet" select=
     "count($vNodes
             [count(.
                    | current()/preceding::node()
                    | current()/ancestor::node()
                    )
             =
              count(  current()/preceding::node()
                    | current()/ancestor::node()
                    )
             ]
            ) +1"/>

     <xsl:for-each select="$vReverse[position() = $vPositionInNodeSet]">
       <xsl:call-template name="identity"/>
     </xsl:for-each>
   </xsl:otherwise>
  </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:06:03.493

这是一个简单的 XSLT 1.0 样式表，用于在“节点”下反转“节点”...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()" />
 </xsl:copy>
</xsl:template>

<xsl:template match="nodes">
 <xsl:copy>
  <xsl:apply-templates select="@*" />
  <xsl:apply-templates select="node()">
    <xsl:sort select="position()" data-type="number" order="descending" /> 
  </xsl:apply-templates>
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

# scala - 具有额外约束的 Scala 无形 KList

> ID：12046974
> 
> 赞同：3
> 
> 时间：2012-08-21T00:24:40.763
> 
> 标签：scala, path-dependent-type, shapeless, klist

我想采用这种模式：

```
 def accept[T](a: RList[T]) = true
 def accept[T, V](a: RList[T], b: RList[V])(implicit ev: a.S =:= b.S) = true
 def accept[T, V, Q](a: RList[T], b: RList[V], c: RList[Q])(implicit ev: a.S =:= b.S, ev2: b.S =:= c.S) = true 
```

但让它接受 a `KList`，而不是手动覆盖所有的arities。基本上我想说，“取任意数量的`RList`具有相同`S`成员类型的 s”

`RList`是一个特征，它包含一个 type `S`。（有关 RList 的更多背景信息以及我这样做的原因，请参阅：[Constrain function based on origin (Path Dependent type?Type Generation?)](https://stackoverflow.com/questions/12025604/constrain-function-based-on-origin-path-dependent-type-type-generation)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:09:53.767

It looks like what you are doing is just trying to get the compiler to check that the types agree, since your methods ALWAYS return true.

Can you perhaps, instead of making methods which accept an arbitrary number of these, accept a "List of RLists" which is guaranteed to have S all matching?

Here is how such a list might be constructed:

```
package rl {

// A simplified version of your RList:
trait RList[T] {
  type S
  def data: List[T]
}

// A list of RLists which have identical S
sealed trait RListList 

// RListNil is an empty list
trait RListNil extends RListList {
  def ::[H <: RList[_]](h: H) = rl.::[h.S,H,RListNil](h, this)
}
// there is exactly one RListNil
case object RListNil extends RListNil

// List can be a cons cell of lists sharing the same S
final case class ::[S, H <: RList[_], T <: RListList](head: H, tail: T) extends RListList {

  // We only allow you to cons another to this if we can find evidence that the S matches
  def ::[H2 <: RList[_]](h: H2)(implicit ev: =:=[h.S,S]) = rl.::[S,H2,::[S,H,T]](h, this)
} 
```

Now, if we try to construct a RListList that doesn't have all the S types agreeing, the compiler will catch us:

```
object RListTest {

  val list1 = new RList[Int] { type S = String; def data = List(1,2,3,4) }
  val list2 = new RList[String] { type S = String; def data = List("1","2","3","4") }
  val list3 = new RList[Double] { type S = Float; def data = List(1.1,2.2,3.3,4.4) }

  val listOfLists1 = list1 :: RListNil // fine
  val listOfLists2 = list2 :: listOfLists1 // still fine, since list1 and list2 have the same S
  val listOfLists3 = list3 :: listOfLists2 // compiler error: Cannot prove that java.lang.String =:= Float

} 
```

This is using dependent method types, which means you need to use scala 2.10 or you need to compile with the -Ydependent-method-types switch in 2.9.x

# java - Google 日历 API 和 UI 小部件 - Java

> ID：12046985
> 
> 赞同：3
> 
> 时间：2012-08-21T00:26:11.000
> 
> 标签：java, calendar, google-calendar-api

我的公司想在我们的网站上添加日历。要求是：

*   网页上的日历小部件显示公司活动
*   用户可以在本地搜索（显示城市/邮政编码附近的事件）
*   用户无法添加事件

我在 API 文档中看到了很多关于将日历 V3 用作后端数据服务的信息，但没有关于前端和网页集成的信息。

可能吗？是否有可以与日历 V3 API 对话的 UI 小部件？

如果是这样，关于在网页上实例化日历小部件并将其连接到 V3 API 的文档在哪里？

# php - Zend Framework 链接和路径错误

> ID：12046987
> 
> 赞同：2
> 
> 时间：2012-08-21T00:26:34.123
> 
> 标签：php, zend-framework, hyperlink

我对 Zend Framework 有这个问题，我希望我的 headLink 和 headScript 像：

```
$this->headLink()->appendStylesheet('styles/my.css'); 
```

但是当我查看视图的页面源然后单击css的链接时，链接将是这样的：

```
http://localhost/mysite/public/user/profile/id/styles/my.css 
```

用户有我的一个控制器，配置文件属于操作，另一方面，id 只是一个参数。该链接没有指向公众。

另一个问题是，当我的一个视图上有一个 AJAX 脚本时，它会从另一个 URL 获取数据，例如：

```
$(document).ready(function(){
      ...
            $.ajax({
                type: 'post',
                dataType: 'json',
                url: '../region/getcountryregions',
                data: { id : test_id },
                success: function(result){
                     // success
                }, error: function(request, status, error){
                    console.log(request.responseText);
                }
      ...
}); 
```

它在我的这个网址上完美运行：

```
http://localhost/mysite/public/user/registration 
```

但是当 URL 像这样时：

```
http://localhost/mysite/public/user/profile/id/20 
```

上面的两个视图都具有与 AJAX 相同的脚本标签。问题是第二个链接将 URL 指向：

```
http://localhost/mysite/public/user/profile/region/getcountryregions 
```

这是一个错误，因为 region 是一个控制器，而 getcountryregions 是控制器区域的一个动作。

有什么办法可以将链接指向：

```
http://locahost/mysite/public/ 
```

这样就可以轻松地将上述链接定向到公共路径。当我将它上传到实时服务器时，不会影响这些链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T04:02:34.467

这是一个标准的相对与绝对 URL 问题。您的调用：

```
$this->headLink()->appendStylesheet('styles/my.css'); 
```

隐含地指一个*相对*url。因此，如果您在页面上：

```
http://localhost/mysite/public/user/profile/ 
```

*然后浏览器*将相对地址`styles/my.css`解释为相对于当前页面。

 *`BaseUrl`view-helper 可以缓解这个问题：

```
$this->headLink()->appendStylesheet($this->baseUrl('styles/my.css')); 
```

适用于您的 AJAX 情况的类似修复程序。在您的视图脚本中，确保通过`baseUrl()`视图助手运行所有直接 url 渲染。

作为旁注，通常不会公开`/public`网址的一部分。目录本身将`public`被映射为虚拟主机的根。如果您在共享主机上并且无法自己指定该映射，那么有[几种解决方法](https://stackoverflow.com/a/3765443/131824)。*

# point-cloud-library - PCL ICP 的致命错误

> ID：12046990
> 
> 赞同：0
> 
> 时间：2012-08-21T00:27:26.407
> 
> 标签：point-cloud-library

我是 PCL（点云库）的新手，只想将 ICP 应用于两组点。但是，当我尝试使用 Visual Studio 2010 64 位运行 ICP 的在线代码示例时，它会引发致命错误。我尝试了不同的方法来创建点云，但没有运气。致命错误发生`icp.setInputTarget`在行内`target_ = target.makeShared ();`

这就是我创建两个云点的方式

```
pcl::PointCloud<pcl::PointXYZ>::Ptr cloud_in (new pcl::PointCloud<pcl::PointXYZ>);
cloud_in->width    = _head_width+1;
cloud_in->height   = _head_height+1;
cloud_in->is_dense = true;
for(int x=0; x<=width; x++) {
        for(int y=0; y<=height; y++)    {
            float z = depths[x][y];
            pcl::PointXYZ curr_point;
            curr_point.x = x;
            curr_point.y = y;
            curr_point.z = z;
            cloud_in->points.push_back(curr_point);
        }
    } 
```

这就是发生错误的地方

```
pcl::IterativeClosestPoint<pcl::PointXYZ, pcl::PointXYZ> icp;
icp_dummy.setInputCloud(cloud_in);
icp_dummy.setInputTarget(cloud_out); /* This throws a fatal error */ 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-28T08:40:15.430

我有几个问题在我看来是不对的：-深度图不正确，x，y 的值不是真实世界坐标

```
pcl::PointCloud<pcl::PointXYZ>::Ptr cloud (new pcl::PointCloud<pcl::PointXYZ>);
cloud->points.reserve(depthmap.rows*depthmap.cols);//for speeding up code, whitout it cost more time

cloud->is_dense = true;
//Don't know how it'd defined but try something like this by the depthmap
for(int x=0; x<depthmap.rows; x++) {
        for(int y=0; y<depthmap.cols; y++)    {
            float z = depths[x][y];
            pcl::PointXYZ curr_point;
            curr_point.x = (x - cx) * z / fx; //for speedup calculate inverse of fx and multiply this 
            curr_point.y = (y - cy) * z / fy;//for speedup calculate inverse of fy and multiply this 
            curr_point.z = z;
            cloud->points.push_back(curr_point);
        }
    } 
```

- 也可以使用 PTR（智能指针）来加快速度

```
pcl::PointCloud<pcl::PointXYZ>::Ptr cloud_out;

pcl::IterativeClosestPoint<pcl::PointXYZ, pcl::PointXYZ> icp; //hereyou have to define icp

icp.setInputCloud(cloud_in);//so here icp_dummy needs to be icp

icp.setInputTarget(cloud_out); //so here icp_dummy needs to be icp

// The fatal error must be gone, otherwise change cloud_in to same type
// as cloud_out 
```

# javascript - 根据角度和速度使实体反弹

> ID：12046996
> 
> 赞同：0
> 
> 时间：2012-08-21T00:28:03.763
> 
> 标签：javascript, impactjs

我想要做的是将一个实体从桨上弹起，并让它对桨的速度做出反应。

所以就像在旧的突围游戏中一样，你移动桨的速度越快，角度就越钝。

到目前为止我所拥有的是这个；

```
var playerPos = player.pos.x - paddle.pos.x;
var relativePos = Math.floor(player.pos.x - this.pos.x + (player.size.x / 2));
var angle = relativePos * (Math.PI / paddle.size.x);
var newVel = Math.cos(angle);

player.vel.x = newVel; 
```

我的数学不像以前那样。

**编辑**

Player 是一个实体，具有 size.x 和 size.y、pos.x 和 pos.y、velocity.x 和 velocity.y 等属性。这个对象具有相同**的**属性并且是桨。

如果你愿意，球员就是球。

所以你移动桨，它在 y 维度中的位置被设置，你在 x 中移动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:37:42.637

你没有在你的帖子中提到这一点，但我假设你不想改变速度，如果它没有撞到桨，所以让我们创建一个 if 函数来包装我们整个改变速度的代码：

```
if(paddle.x + paddle.size > player.x && player.x + player.size > paddle.s){
    //Code to be ran to change velocity
} 
```

这仅适用于玩家在底部是正方形的情况。如果您只想离开播放器的中间而不是边缘，请运行以下代码：

```
if(paddle.x + paddle.size > player.x + (player.size/2) && player.x + (player.size/2) > paddle.x){
    //Code to be ran to change velocity
} 
```

现在我们知道玩家实际上击中了球拍，让我们调整它击中球拍的速度。你可以用很多不同的方式来做到这一点（如果你想要不同的方式，请告诉我），但我会通过根据它击中桨的位置创建一个速度并将当前速度添加到它来做到这一点。我的范围跨度从`-5`到`5`。

```
player.vel.x += (player.x + (player.size/2) - paddle.x + (paddle.size/2)) /
                (paddle.size/2) * 5; 
```

第一行计算玩家的位置相对于球拍的位置，第二行将其放入 和 之间的比率，`-1`并将`1`其乘以`5`。所有这些都添加到当前速度中。该变量`5`应根据您的喜好进行更改。

最后要做的是调整桨的速度。只要你不打算让桨对整体速度产生或多或少的影响，这应该真的很容易。

```
player.vel.x += paddle.vel.x; 
```

非常简单的代码就是你真正需要的。

所以把它们放在一起：

```
if(paddle.x + paddle.size > player.x + (player.size/2) && player.x + (player.size/2) > paddle.x){
    player.vel.x += (player.x + (player.size/2) - paddle.x + (paddle.size/2)) /
                    (paddle.size/2) * 5 + paddle.vel.x;
} 
```

非常简单的代码，不需要三角函数。（耶！）

如果您希望对此进行更改，我可以提供帮助，因为我实际上非常了解数学，我只是想简化它，因为我不确定它是否真的需要更高级。

# python - Babel 不识别语言支持的 jinja2 提取方法

> ID：12046998
> 
> 赞同：6
> 
> 时间：2012-08-21T00:28:37.333
> 
> 标签：python, jinja2, translation, python-babel

我正在为我的项目添加语言翻译支持。代码在 Python 上，在 html 文件中有 jinja2 和 Javascript。

我正在尝试使用 Babel 进行翻译，但它不识别 jinja2 的提取方法。也许我使用了不正确的名称。

这是我的ini文件：

```
# Extraction from Python source files
[python: **.py]
# Extraction from Jinja2 template files
[jinja2: **.html]
# Extraction from JavaScript files
[javascript: **.js]
extract_messages = $._, jQuery._ 
```

这是我收到的错误；

```
C:\>python Babel-0.9.6/babel/messages/frontend.py extract --project=GV --version=1 --no-location -o locale\messages.pot -F babel.ini frontend te
mplates
extracting messages from frontend\__init__.py
INFO:babel:extracting messages from frontend\__init__.py
...
Traceback (most recent call last):
  File "Babel-0.9.6/babel/messages/frontend.py", line 1208, in <module>
    main()
  File "Babel-0.9.6/babel/messages/frontend.py", line 1107, in main
    return CommandLineInterface().run(sys.argv)
  File "Babel-0.9.6/babel/messages/frontend.py", line 651, in run
    return getattr(self, cmdname)(args[1:])
  File "Babel-0.9.6/babel/messages/frontend.py", line 912, in extract
    for filename, lineno, message, comments in extracted:
  File "c:\Python27\lib\site-packages\babel-0.9.6-py2.7.egg\babel\messages\extract.py", line 172, in extract_from_dir
    strip_comment_tags):
  File "c:\Python27\lib\site-packages\babel-0.9.6-py2.7.egg\babel\messages\extract.py", line 202, in extract_from_file
    strip_comment_tags))
  File "c:\Python27\lib\site-packages\babel-0.9.6-py2.7.egg\babel\messages\extract.py", line 271, in extract
    raise ValueError('Unknown extraction method %r' % method)
ValueError: Unknown extraction method 'jinja2'
Press any key to continue . . . 
```

有任何想法吗？谢谢，加迪

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T10:50:58.800

我看到你的问题仍然没有答案。您的问题与我重新安装开发环境后遇到的问题相似：

```
$ pybabel extract -F babel.cfg -o messages.pot .
extracting messages from admin.py
:
extracting messages from templates/404.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")
Traceback (most recent call last):
  File "/usr/local/bin/pybabel", line 9, in <module>
    load_entry_point('Babel==0.9.6', 'console_scripts', 'pybabel')()
  File "/usr/local/lib/python2.7/dist-packages/Babel-0.9.6-py2.7.egg/babel/messages/frontend.py", line 1107, in main
    return CommandLineInterface().run(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/Babel-0.9.6-py2.7.egg/babel/messages/frontend.py", line 651, in run
    return getattr(self, cmdname)(args[1:])
  File "/usr/local/lib/python2.7/dist-packages/Babel-0.9.6-py2.7.egg/babel/messages/frontend.py", line 912, in extract
    for filename, lineno, message, comments in extracted:
  File "/usr/local/lib/python2.7/dist-packages/Babel-0.9.6-py2.7.egg/babel/messages/extract.py", line 171, in extract_from_dir
    strip_comment_tags):
  File "/usr/local/lib/python2.7/dist-packages/Babel-0.9.6-py2.7.egg/babel/messages/extract.py", line 201, in extract_from_file
    strip_comment_tags))
  File "/usr/local/lib/python2.7/dist-packages/Babel-0.9.6-py2.7.egg/babel/messages/extract.py", line 270, in extract
    raise ValueError('Unknown extraction method %r' % method)
ValueError: Unknown extraction method 'jinja2' 
```

原来我忘记安装[jinja2](http://jinja.pocoo.org/)了。由于服务器环境已经安装了它，我没有首先注意到它。[安装](http://jinja.pocoo.org/docs/intro/#installation)jinja2 后：

```
$ sudo pip install jinja2 
```

提取将完成：

```
$ pybabel extract -F babel.cfg -o messages.pot .
extracting messages from admin.py
:
extracting messages from test/item_tests.py
writing PO template file to messages.pot 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-07T14:43:42.347

Babel 依赖于在 egg info 中设置的 jinja2 入口点。

要解决此问题，请在您的 cfg 文件中进行更改：

```
# Extraction from Jinja2 template files  
[jinja2: **.html] 
```

对此：

```
# Extraction from Jinja2 template files  
[jinja2.ext:babel_extract[i18n]: **.html] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-13T15:15:32.123

我有同样的问题。我通过将 setuptools 从 20.7.0 升级到更新鲜的版本来解决它：

```
sudo pip install --upgrade setuptools 
```