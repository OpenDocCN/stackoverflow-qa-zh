# StackOverflow 问答 000862000-000862999

# sharepoint - 日志错误：无法创建列表

> ID：862001
> 
> 赞同：1
> 
> 时间：2009-05-14T07:26:47.063
> 
> 标签：sharepoint, master-pages, gallery

我有一个包含少量自定义列表和自定义页面的站点模板。我在需要时使用站点模板创建新网站。创建 Web 后，我还使用 C# 代码本身设置了 Web 的主题和唯一权限，然后将页面重定向到新创建的 Web URL。我的代码在长时间运行的操作中运行。它一直工作正常，但在某些情况下，当页面重定向到新创建的网络时，我会收到错误“找不到文件”。

当我仔细观察时，我发现 Web 已正确创建并且权限已设置；还找到了页面库和其他列表，但找不到母版页库。因此，我无法浏览页面库中的任何页面，甚至无法检查网络主题。当我看到日志时，我发现了以下错误。

2009 年 4 月 9 日 14:22:49.35 w3wp.exe (0x11B4) 0x0D0C Windows SharePoint Services 常规 8z1y 中 无法在网站“ [http://rootsite/subsite](http://rootsite/subsite) ”中创建列表“母版页库” ，HRESULT=0x81020012。列表 XML：“”

什么可能导致这个问题？我不是一直都得到这个，只是有时我会遇到这个问题。代码没有抛出错误，但未创建 Web 的母版页库。你有没有遇到过这样的问题？我该如何解决这个问题？

提前致谢，

〜尤瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T14:56:14.050

您得到的 HRESULT 来自 COM 错误：System.Runtime.InteropServices.COMException (0x81020012)：指定的名称已在使用中。

确保您尝试创建的图库位于 Web 级别，而不是站点或 Web 应用程序级别。您能否发布 URL 的示例，当它有效与无效时？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T04:14:31.760

母版页库不是通常在站点而不是 Web 级别吗？子站点可以使用由父站点定义的母版页，因此您可能会因为尝试在子站点上定义母版页而感到困惑。

# java - Google App Engine Java 世界中的 MVC

> ID：862003
> 
> 赞同：25
> 
> 时间：2009-05-14T07:26:51.603
> 
> 标签：java, model-view-controller, google-app-engine, frameworks

我从 C# 和 ASP.NET MVC 转向 Java，我很想在 Java 世界中找到一个可以在 Google App Engine 上使用的等价物。我已经开始尝试使用[FreeMarker](http://thatismatt.blogspot.com/2009/05/mvc-in-java-world.html)，甚至迈出了编写一个非常简单的框架的第一步。理想情况下，我不必做所有艰苦的工作，但一定有人已经这样做了！所以我的问题是——有哪些框架对我来说来自 ASP.NET MVC 很熟悉，我可以在 Google App Engine for Java 上使用它们。

我想要的关键是：

*   **简单路由**-`/products/view/1`映射到 productid 为 1 的产品控制器的视图操作
*   **模板引擎**- 某种轻松将“ViewData”传递给视图的方式，并从视图轻松访问它，理想情况下我希望避免任何过于 XMLy 的东西（这就是我喜欢[FreeMarker](http://freemarker.org/)的原因）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-16T10:06:19.907

我目前正在使用 Spring MVC 开发 Google App Engine 应用程序。它比 ASP.NET MVC 成熟得多，所以你不应该失望。作为额外的奖励，您拥有 Spring 的全部 IoC 功能。

对于视图层，我正在尝试 Velocity。这很简单，但我还没有决定是否更喜欢它而不是 JSP。我简要了解了 FreeMaker，但不喜欢我所看到的。如果您想远离 XML'y JSP 模板，我建议您试一试 Velocity。

我在 GAE 上使用 Spring 时遇到的唯一问题是文件上传。MultipartResolver 实现都依赖于一个临时文件目录。在编写了我自己的实现之后，我又回到了在我的模型中无缝上传文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-10-13T14:13:21.383

您应该考虑几个 MVC 框架（这就是我现在正在做的事情）。最初，我使用 Spring MVC (3.0)，GAE 的冷启动太可怕了！启动大约需要 10 秒（而且我什至没有使用任何复杂的东西，比如 spring security 等），所以我需要使用 cron 作业来保持它的活力。所以我不建议你在 GAE 上使用 Spring。

看看以下框架：

[猛禽](http://vraptor.caelum.com.br/en/)

[超薄3](http://sites.google.com/site/slim3appengine/Home)

[谷歌网站砖](http://code.google.com/p/google-sitebricks/)

至于模板，我使用的是[Sitemesh——](http://www.opensymphony.com/sitemesh/)现在用了很长时间，所以不需要切换。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-04-25T16:40:07.883

Play Framework 符合要求。它是一个现代的 Java MVC 框架，并有一个 Google App Engine 模块来提供兼容性。请参阅[http://www.playframework.org/modules/gae](http://www.playframework.org/modules/gae)。

使用 Play 的另一个好处是可移植性。您可以使用其内置的网络服务器（可选地在 apache 后面进行缓存、负载平衡等）部署 Play，或者您可以捆绑为 .war 文件以部署到许多 Java 应用程序服务器（Glassfish、Tomcat...）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-08-04T07:19:19.607

我也非常喜欢 Freemarker。我建议你看一下 Induction 框架，它的模板引擎是可插拔的，但默认支持的是 Freemarker。Induction 是一个轻量级且快速的 MVC 框架（7.7K 行），但具有许多主要 MVC 框架所没有的特性，例如：

*   当您更改控制器、视图或模型时，在开发过程中动态重新加载
*   文件上传如此简单（与字符串输入没有太大区别）
*   控制器无需配置
*   使用 IDE 分析模型、视图和控制器之间的依赖关系的能力
*   基于正则表达式的 URL 映射
*   对管理任何 MVC 框架的重定向的最佳支持

至于@pjesi 提出的文件上传问题，Induction 允许您设置文件写入磁盘的大小阈值。如果此设置足够大，则不应尝试将任何文件写入磁盘。

在此处查看入门教程：http: [//www.inductionframework.org/getting-started-tutorial.html](http://www.inductionframework.org/getting-started-tutorial.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T14:27:21.857

我听说 JavaServer Faces (JSF) 类似于 microsoft MVC 框架。（我使用 JSF，但从未使用过 .NET MVC）。而且我相信 JSF 1.1 在 Google App Engine 上运行良好，而且我怀疑如果您坚持使用 XHTML 而不是 JSP 作为模板，新版本的 JSF 也能正常工作。还有一些不错的库可以让您利用 JSF 框架上的 AJAX 接口，RichFaces 是一个流行的库。查看 [sun.com 上的 JavaServer Faces](http://java.sun.com/javaee/javaserverfaces/) 以及 [JBoss RichFaces](http://www.jboss.org/jbossrichfaces/)

# html - 如何用固定宽度换行 HTML 按钮的文本？

> ID：862010
> 
> 赞同：231
> 
> 时间：2009-05-14T07:28:12.847
> 
> 标签：html, css, button, word-wrap

我刚刚注意到，如果您为 HTML 按钮提供固定宽度，则按钮内的文本永远不会被换行。我已经尝试过使用自动换行，但是即使有空格可以换行，也会删减单词。

如何像任何表格单元一样使 HTML 按钮的文本具有固定宽度的换行？

```
<td class="category_column">
  <input type="submit" name="ctl00$ContentPlaceHolder1$DataList1$ctl12$ProCat_NameButton" value="Roos Sturingen / Sensors" id="ctl00_ContentPlaceHolder1_DataList1_ctl12_ProCat_NameButton" class="outset" style="height:118px;width:200px;font-size:18px;color:#7F7F7F;width:200px;white-space:pre;"
  />
</td>
```

CSS 类除了添加边框和修改填充之外什么都不做。如果我添加`word-wrap:break-word`到此按钮，它将像这样包装它：

```
Roos Sturingen / Sen
sors 
```

如果可以在单词之间截断，我不希望它在单词中间截断。

* * *

## 回答 #1

> 赞同：631
> 
> 时间：2009-07-28T14:54:45.193

我发现您可以使用 white-space CSS 属性：

```
white-space: normal; 
```

它会将单词破坏为普通文本。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-08-18T00:17:17.077

```
white-space: normal;
word-wrap: break-word; 
```

我的两者都适用

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2010-04-04T14:36:17.943

您可以通过在 HTML 源代码中插入换行符来强制它（浏览器允许，我想），如下所示：

```
<INPUT value="Line 1
Line 2"> 
```

当然，确定在哪里放置换行符并不一定是微不足道的......

如果您可以使用 HTML`<BUTTON>`而不是`<INPUT>`，这样按钮标签是元素的内容而不是其`value`属性，则将该内容放在 a`<SPAN>`中，其`width`属性比按钮的属性窄几个像素似乎可以解决问题（甚至在 IE6 中:-)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-11T21:15:16.773

我发现一个按钮可以工作，但您需要添加`style="height: 100%;"`到该按钮，以便它在 iPhone iOS 5.1.1 的 Safari 上显示的多于第一行

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-04-17T08:12:06.603

```
 white-space: normal;
   word-wrap: break-word; 
```

“两者”都为我工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-14T08:22:35.477

像这样的多行按钮实现起来并不简单。[这个页面](http://www.cs.tut.fi/~jkorpela/forms/imagebutton.html)有一个关于这个主题的有趣（虽然有些过时）的讨论。您最好的选择可能是放弃多行要求或使用例如`div`s 和 CSS 创建自定义按钮，并添加一些 JavaScript 以使其作为按钮工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-22T09:32:01.177

`<button>`如果我们在这样的标签内有一些内部划分-

```
<button class="top-container">
    <div class="classA">
       <div class="classB">
           puts " some text to get print." 
       </div>
     </div>
     <div class="class1">
       <div class="class2">
           puts " some text to get print." 
       </div>
     </div>
</button> 
```

有时 A 类的文本会在 class1 数据上重叠，因为它们都在一个按钮标签中。我试图打破 tex 使用 -

```
 word-wrap: break-word;         /* All browsers since IE 5.5+ */
 overflow-wrap: break-word;     /* Renamed property in CSS3 draft spec */ 
```

但这不起作用然后我试试这个-

```
white-space: normal; 
```

删除上述css属性并完成我的任务后。

希望对所有人有用！！！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-26T19:34:35.297

```
word-wrap: break-word; 
```

为我工作。

# xml - 如何为 RPC 方法具有重载含义的 Web 服务设计 REST API？

> ID：862013
> 
> 赞同：0
> 
> 时间：2009-05-14T07:30:14.170
> 
> 标签：xml, rest

**现有的 XML 网络服务**

*   处理 XML-RPC 样式的请求，其中一个*操作*元素标识要分派到的方法。例如：

    <protocol><operation>810</operation><user>...</user></protocol>

*   参数的数量不同。

*   XML-RPC 处理程序将 810 标记解释为两件事。如果它接收到元素**<user>**作为**<protocol>**的子元素，它会创建一个帐户。如果它接收到元素**<userExisting>**，它将尝试登录用户。

**新的 JSON REST API 设计**

*   我想将此保留到一个 REST 端点，例如*/api/foobar*
*   我可以将用户创建转换为 PUT */api/foobar/${user}*
*   将用户删除到 DELETE */api/foobar/${user}*
*   我目前的设计是使用 body *{ "op":"login" }进行 POST* */api/foobar/${user}*登录，同样对于注销，body *{ "op":"logout" }*将是发送。

 **你们对此怎么看？砖蝙蝠和花束受到建设性意见的欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T07:50:47.927

如果可以避免的话，RESTful API 的重载 POST 有点麻烦。出于登录的目的，我更愿意尝试保持无状态 - 这意味着要求客户端在每个请求上传递 HTTP 授权（这意味着每次都传递正确的 Authorization 标头）。您在第一个请求上使用一种常用的身份验证方法，例如 Basic。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T07:54:01.710

端点应该位于`api/users`所有 CRUD 操作的 URI。使用 HTML 4 构建的表单不支持 DELETE 和 PUT，但如果您使用 Javascript 进行通信，那么您会很好，但您可能还想通过 POST 公开创建和删除操作（可能传入`_method=PUT|DELETE`POST 有效负载）。

对于登录，终点应该是`api/login`，但您最好在此处使用 HTTP 身份验证。

要求对堆栈溢出进行设计审查是好的，但最好阅读 RESTful 架构以避免错误转向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T12:06:09.280

像这样的登录和注销怎么样

```
POST /api/foobar/${user}/loginrequests

POST /api/foobar/${user}/logoutrequests 
```

如果您不想，服务器实际上不必创建“请求”资源，但稍后您可能会改变主意并希望保留登录和注销记录。

# sql-server - 计算数据库备份大小

> ID：862018
> 
> 赞同：9
> 
> 时间：2009-05-14T07:31:57.223
> 
> 标签：sql-server, sql-server-2005, sql-server-2008

在我们实际进行备份之前，有没有办法知道数据库完整备份文件的大小？我做了一些分析，发现 sp_spaceused 可以给出一个接近的数字，但这还不是全部，除了已用空间之外，似乎还有一个/多个因素决定了大小？

以前有人走过这条路吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-28T02:08:36.250

如果您查看保留空间，则 sp_spaceused 应该非常接近。

[估计数据库备份的大小](http://jmkehayias.blogspot.com/2008/12/estimating-size-of-your-database.html)

Paul Randal 最近发表了一篇关于如何知道 TLOG 备份可能有多大的博客：

[下次日志备份会包含多少数据](http://www.sqlskills.com/BLOGS/PAUL/post/New-script-how-much-data-will-the-next-log-backup-include.aspx)

在一些简短的测试中，这两个值的组合似乎非常接近实际备份大小。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-14T07:38:48.703

它几乎是 mdf 和 ldf 文件的大小。

# java - Java 中无法访问 UDP 客户端

> ID：862020
> 
> 赞同：0
> 
> 时间：2009-05-14T07:33:17.750
> 
> 标签：java, udp, network-protocols

我正在运行一个简单的 UDP Java 服务器，它在连接时收集客户端的 IP 和端口，将信息存储在数据库中。

客户端仍在监听服务器。服务器停止。

之后，服务器想重用数据库信息，到达客户端；并且由于客户端仍在侦听服务器的同一端口，我猜客户端应该接收通信。

我是 UDP 新手，请告诉我实现上述目标的方法。谢谢你。

让我重新表述这个问题，因为我确实尝试了 Stackoverflow 成员建议的方法。

服务器可以在很短的时间内联系到客户端，但在 10 分钟后客户端无法访问；虽然看起来客户端一直准备好监听服务器，但是即使尝试了几次，服务器也无法到达客户端。这可能是什么原因？请让我知道处理这个问题的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T07:55:55.870

[我认为您对 UDP 协议（ ​​RFC 768](http://www.faqs.org/rfcs/rfc768.html) ）有点困惑。我认为查看 UDP 协议以了解 UDP 和 TCP 之间的区别会有所帮助。

关于您的具体问题，如果没有任何类型的代码，很难知道您的确切问题是什么。sun 教程中有一个[UDP 示例中的客户端-服务器。](http://java.sun.com/docs/books/tutorial/networking/datagrams/clientServer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T08:15:23.950

UDP 是无会话的，所以我想它确实应该可以工作。

它会是这样的：

```
// Client:

socket = new DatagramSocket();
DatagramPacket req = new DatagramPacket(data, data.length, serverAddress, serverPort);
socket.send(req);
DatagramPacket resp = new DatagramPacket(new byte[MAX_RESP_SIZE], MAX_RESP_SIZE);
socket.receive(resp);

// Server:

DatagramSocket socket = new DatagramSocket(port);
while (!stopped) {
    DatagramPacket req = new DatagramPacket(new byte[MAX_REQ_SIZE], MAX_REQ_SIZE);
    socket.receive(req);
    saveToDatabase(req.getAddress(), req.getPort());
}
socket.close();

// Then later:

DatagramSocket socket = new DatagramSocket(port);

// retrieve clientAddr and clientPort from database
DatagramPacket resp = new DatagramPacket(data, data.length, clientAddress, clientPort);
socket.send(resp);
socket.close(); 
```

# oracle - 在 Microsoft Windows 2008 Server 64 位上安装 Oracle 10 ODP.NET

> ID：862036
> 
> 赞同：2
> 
> 时间：2009-05-14T07:38:52.510
> 
> 标签：oracle, 64-bit, oracle10g, windows-server-2008, installation

我尝试从以下网址安装“ **Oracle10g Release 2 ODAC (64-bit) 10.2.0.3 for Windows x64** ”： [http ://www.oracle.com/technology/software/tech/windows/odpnet/64-bit/index .html](http://www.oracle.com/technology/software/tech/windows/odpnet/64-bit/index.html)

在**Windows 2008 server 64bit**上，但在我运行 setup.exe 后它立即崩溃，并出现以下错误：

> 问题签名：问题事件名称：APPCRASH 应用程序名称：javaw.exe 应用程序版本：5.0.40.5 应用程序时间戳：42a019e4 故障模块名称：StackHash_5c81 故障模块版本：6.0.6001.18000 故障模块时间戳：4791adec 异常代码：c0000374 异常偏移量：00000000000a6e97 操作系统版本：6.0.6001.2.1.0.272.7 区域设置 ID：1037 附加信息 1：5c81 附加信息 2：fa1981fc0da3377cbbec45e762388188
> 附加信息 3：7698
> 附加信息 4：7defb6f15001721d919a359fb7888c17
> 
> 阅读我们的隐私声明： http:
> [//go.microsoft.com/fwlink/ ?linkid=50163&clcid=0x0409](http://go.microsoft.com/fwlink/?linkid=50163&clcid=0x0409)

**谁能指导我到一个版本，我可以为 Windows 2008 服务器 64 位安装 ODP.NET 的最新版本？**

最好的问候， Guy Bertental

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-01-30T22:14:43.757

这真的很棘手。在安装 ODP.NET 之前，您需要已经设置到 oracle 数据库的有效连接。这意味着：

第1步：Oracle安装客户端（从未成功，不推荐）或Oracle客户端（在Win7 Ultimate 64位上成功，文件win64_11gR1_client.zip，安装时选择了“运行时”选项）。客户端安装后确保您可以连接。从命令行尝试“tnsping yourtnanamesentry”以检查 tnsnames 是否正常，然后“sqlplus username/pwd@yourtnsnamesentry”以检查您是否知道有效的用户名和密码并且真的可以连接。记住或记下您在安装过程中选择的 oracle home 名称和路径。

第 2 步：安装 ODP.NET（我使用文件 ODAC1110720.zip）。在安装过程中使用完全相同的 oracle home 名称，但路径不同。

第 3 步：尝试与 Visual Studio 连接。对于“服务器名称”，我使用了这个：“oracleexe:1521/xe”。这意味着我有一台名为“oracleexe”的机器，它在端口 1521 上有 oracle 侦听器，以及实例名称为“xe”的数据库。这就是所谓的“EZCONNECT”名称。

我不确定第 1 步是否真的需要，因为也许第 3 步真的只使用 oracle 即时客户端。我知道，这是真正的痛苦，但这有效。我花了 2 天时间连接到 oracle，我不得不安装将近 1GB 的下载 oracle 软件。他们可以而且应该使这变得非常、非常、非常、容易得多。就像一键安装一样有效。客户端安装的复杂程度令人遗憾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-24T12:19:37.523

嗨，遇到您的问题，解决方案是获取 10204_vista_w2k8_x64_production_client.zip (http://www.oracle.com/technetwork/database/10204-winx64-vista-win2k8-082253.html) 的副本，运行它，它将安装客户端.

解压 ODAC10203x64.zip，然后转到所有程序->OracleHome->Oracle 安装产品并运行通用安装程序。当安装程序在指定源位置运行时，浏览到解压 ODAC10203x64.zip 时创建的 Stage 目录，然后正常安装。

有一个 ODAC112012.zip 但这不会与 Oracle 9 dB 对话，因此上述将解决与传统 dB 对话的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-04T14:48:54.520

在您的开发计算机上下载并安装适用于 Microsoft Windows（32 位）的 Oracle Database 11g 第 2 版客户端 (11.2.0.1.0)。删除项目中以前对 Oracle.DataAccess 的引用。添加指向这个新版本的新引用。在 Visual Studio 中，添加引用后选择它，然后选择属性以检查设置。将“特定版本”设置为 true ，然后检查“复制本地”是否为 false。使用任何 CPU 目标构建您的解决方案。

接下来，准备您的服务器。安装[适用于 Microsoft Windows (x64) 的 Oracle Database 11g 第 2 版客户端 (11.2.0.1.0)](http://download.oracle.com/otn/nt/oracle11g/112010/win64_11gR2_client.zip)。安装时，选择 RUNTIME OPTION。

最后，像往常一样将您的解决方案部署到您的服务器。这次应该可以了。

诀窍是在开发和部署环境中使用相同的 ODAC 版本 (11.2.0.1.0)。此 ODAC 包含 Oracle.DataAcces.Client，您应该在代码中引用它来访问 OracleConnection、OracleDataReader 等类。

我遇到了问题，因为我使用 ODAC 11.2.0.1.2（32 位，目前最新）进行开发，但此 ODAC 没有 x64 版本。

因此，如果您要在 32 位上开发并在 64 位上部署，请始终使用具有 32 位和 64 位版本的最新稳定 ODAC 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T16:01:06.827

在 Windows Server 2008 x64 上使用 Instant Client 10.2.0.3 在我的应用程序中发生意外崩溃。在阅读了几篇关于该平台缺乏支持的帖子后，我将客户端升级到了 11.1.0.7，它就像一个魅力！

因此，如果 ODP .NET 10.2.0.3 在 Windows Server 2008 x64 上稳定，我会感到惊讶，如果您曾经设法安装它。恕我直言，您的选择是：

*   使用另一个提供程序（Microsoft+client v11.1 或[DataDirect](http://www.datadirect.com/products/net/net_for_oracle/index.ssp) ...）。
*   如果您敢的话，请使用[11.1.0.7 测试版...](http://www.oracle.com/technology/software/tech/windows/odpnet/index1110710beta.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T07:44:42.980

伙计-看看[这个](http://www.orafaq.com/forum/t/121999/0/)，它可能会有所帮助。在最好的情况下，让 Oracle 客户端工作是一件痛苦的事情，x64 必须让它变得更难。

# mysql - 你知道什么关于 MySQL 存储过程的好教程？

> ID：862038
> 
> 赞同：3
> 
> 时间：2009-05-14T07:39:11.043
> 
> 标签：mysql, stored-procedures

我想编写一个存储过程来将 int 列的值加一。看起来是一项非常简单的任务，但不适合没有任何存储过程经验的人。

为此，我查找了教程和代码示例，并找到了一些，但肯定有更好的。你知道任何？

我发现的那些：

*   [http://dev.mysql.com/doc/refman/5.0/en/call.html](http://dev.mysql.com/doc/refman/5.0/en/call.html)（代码示例）
*   [http://www.databasejournal.com/features/mysql/print.php/3525581](http://www.databasejournal.com/features/mysql/print.php/3525581)
*   [http://www.mysql.com/news-and-events/newsletter/2004-01/a0000000297.html](http://www.mysql.com/news-and-events/newsletter/2004-01/a0000000297.html)
*   [http://www.devshed.com/c/a/MySQL/A-DIY-Approach-to-Stored-Procedures-in-MySQL/](http://www.devshed.com/c/a/MySQL/A-DIY-Approach-to-Stored-Procedures-in-MySQL/)
*   [http://www.phpbits.info/mysql-tutorial/stored-procedures-in-mysql/](http://www.phpbits.info/mysql-tutorial/stored-procedures-in-mysql/)
*   [http://www.kbedell.com/2009/03/02/a-simple-example-of-a-mysql-stored-procedure-that-uses-a-cursor/](http://www.kbedell.com/2009/03/02/a-simple-example-of-a-mysql-stored-procedure-that-uses-a-cursor/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T07:47:53.113

它是德语的，但它是一个很好的。 [http://www.tutorials.de/forum/sql-tutorials/179510-stored-procedures-mysql-5-a.html](http://www.tutorials.de/forum/sql-tutorials/179510-stored-procedures-mysql-5-a.html)

在英语中，我认为这个地方的东西很好。你有很多不同的教程。 [http://www.mysqltutorial.org/mysql-stored-procedure-tutorial.aspx](http://www.mysqltutorial.org/mysql-stored-procedure-tutorial.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T13:02:28.723

我建议购买[Larry Ullman 的 MySQL Second Edition](https://rads.stackoverflow.com/amzn/click/com/0321375734)副本。他对存储过程有很好的了解。再加上您已经找到的教程，应该会给您一个良好的开端。

# .net - SecureString 安全吗？

> ID：862042
> 
> 赞同：8
> 
> 时间：2009-05-14T07:41:22.333
> 
> 标签：.net, security

是否有关于以安全方式实际使用 SecureString 的任何指导？我看不到有任何方法可以首先创建安全字符串，因为您将需要在某些时候从文本框中输入它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T07:50:36.583

SecureString 的目的是加密存储在内存中的数据。这可以防止明文内存扫描。如果在分页操作期间将保存字符串的内存部分移动到交换文件，这可能会更加重要。

这有点像汽车的方向盘曲锁。它不会阻止你的汽车被有决心的人偷走，但它肯定会阻止机会主义的小偷。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-14T07:42:59.147

这一切都是为了减少攻击面。它不会神奇地使您的应用程序 100% 安全，但它肯定会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T07:58:07.813

任何可以通过调试器访问机器的人都可以使用 hawkeye 等工具轻松获得该字符串。事实上，[MSDN 上的社区说明](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)清楚地说明了这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-20T14:31:41.480

可能不想使用 SecureString。看起来 PG 实际上可能不支持它，甚至将来会拉它 - [https://github.com/dotnet/apireviews/tree/master/2015-07-14-securestring](https://github.com/dotnet/apireviews/tree/master/2015-07-14-securestring)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T07:50:26.350

即使字符串的内容必须来自用户输入，如果值包含敏感信息，仍然值得使用 SecureString。当您的应用程序读取文本框的内容时，尽早将值放入 SecureString。正如 Mehrdad 所说，在这种情况下，它不是 100% 安全的，但它比不使用 SecureString**更安全。**

# wpf - 使用触发器在 XAML 中选择所有复选框？

> ID：862047
> 
> 赞同：3
> 
> 时间：2009-05-14T07:42:50.533
> 
> 标签：wpf, checkbox, triggers

我想在 xaml 中实现一个全选复选框。
我在列表视图中有几个（模板化）复选框。然后我在列表视图之外有一个复选框，我想要一个“全选”行为。我可以在我的 ViewModel 中轻松解决问题，但是，我认为在 xaml 中执行此操作会更优雅，因为全选复选框（直接）与我的 ViewModel 没有任何关系。代码看起来像这样：

```
<ListView>
    <ListView.ItemTemplate>
        <DataTemplate>
        <CheckBox Content="Globale Eingabe"
            Name="SelectSingle"
            IsChecked="{Binding IsChecked}">
        </CheckBox>
    </DataTemplate>
<ListView.ItemTemplate>  
</ListView>
<CheckBox Name="SelectAll" /> 
```

如您所见，SelectSingle 的 IsChecked 属性已绑定到我的 ViewModel。所以我认为我需要一个触发器来操纵复选框的状态。

现在我已经尝试过这样的事情：

```
<CheckBox Content="Globale Eingabe"
    Name="SelectSingle"
    IsChecked="{Binding IsChecked}">
    <CheckBox.Triggers>
        <Trigger SourceName="SelectAll" Property="IsChecked" Value="True">
            <Setter TargetName="SelectSingle"  Property="IsChecked" Value="True"/>
        </Trigger>
    </CheckBox.Triggers>
</CheckBox> 
```

或者这样的：

```
<CheckBox Content="Globale Eingabe"
    Name="SelectSingle"
    IsChecked="{Binding IsChecked}">
    <CheckBox.Triggers>
        <DataTrigger Binding="{Binding ElementName=SelectAll, Path=IsChecked}" 
            Value="True">
            <Setter TargetName="Check"
                Property="IsChecked"
                Value="True"/>
        </DataTrigger>
    </CheckBox.Triggers>
</CheckBox> 
```

我也在一种风格中尝试过同样的事情，但无济于事。我总是收到一个错误，类似于“在类型“ContentPresenter”中找不到静态成员“IsCheckedProperty””。

现在听起来好像 Target/SourceName 绑定不起作用，但为什么呢？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-10-09T06:06:24.777

我认为您毕竟应该将 Check All 逻辑放在 ViewModel 中。在[这篇 Code Project 文章中](http://www.codeproject.com/KB/WPF/TreeViewWithCheckBoxes.aspx)，WPF Guro Josh Smith 在 ViewModel 中解决了类似的问题（在他的例子中是`TreeView`和不是`ListView`），标题如下：**“Putting the Smarts in a ViewModel”**。
我认为在 ViewModel 中实现和调试这个逻辑比做一些`MultiBinding`你不知道它会咬你的复杂事情更容易。
最后一点 - 我总是听从 Josh 的建议 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T14:58:53.997

Torsten，如果我不明白您已经尝试过什么，我很抱歉，但是您需要使用以下`IsChecked`方法将 CheckBoxes 内部的属性绑定到它外部`ListView`的`IsChecked`属性：`CheckBox`

```
IsChecked="{Binding Path=IsChecked, Mode=OneWay,ElementName=OutsideCheckBox}" 
```

# c# - 如何在 Windows Mobile 上使用 MAPI 获取电子邮件标题？

> ID：862050
> 
> 赞同：0
> 
> 时间：2009-05-14T07:43:56.553
> 
> 标签：c#, email, windows-mobile, dllimport, mapi

我想在 Windows Mobile 中的 PockerOutlook 中获取电子邮件标题，但目前 Microsoft.WindowsMo​​bile.PocketOutlook 能够：

*   枚举消息传递帐户。

*   发送电子邮件

*   发送短信

*   拦截短信

所以我想 DLLImport MAPI.DLL 来获取它的功能，以获取电子邮件的标题。

我发现[这个参考](http://blogs.msdn.com/hegenderfer/archive/2009/04/28/intercepting-mail-using-imapiadvisesink.aspx)是用 C++ 编写的。由于数据类型不同，似乎很难转换为 C# 版本。我应该自己创建一个用 C++ 和 DLLImport 编写到 C# 应用程序的 dll 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T21:27:56.260

我不是 C# 人，但[MAPI](http://msdn.microsoft.com/en-us/library/bb446118.aspx)是基于 COM 的系统。因此，您不想导入 MAPI dll，而是想使用任何 C# 系统来扭曲 COM 接口 ( [COM Interop](http://msdn.microsoft.com/en-us/library/aa446497.aspx) )。

您使用 ICEMAPISession 枚举消息存储，然后使用[IMsgStore](http://msdn.microsoft.com/en-us/library/bb159727.aspx)[枚举](http://msdn.microsoft.com/en-us/library/bb159712.aspx)每个存储中的文件夹（或直接转到“收件箱”等已知文件夹）。[然后，您可以使用IMAPIFolder](http://msdn.microsoft.com/en-us/library/bb159903.aspx)模拟文件夹中的消息。

获得电子邮件消息条目 ( [IMessage](http://msdn.microsoft.com/en-us/library/bb446198.aspx) ) 后，您需要[PR_SUBJECT](http://msdn.microsoft.com/en-us/library/bb415503.aspx)属性。

您必须习惯 C# 中的 COM 互操作和有些混乱的 MAPI 接口。

# c++ - ImageMagick 和 GraphicsMagick 有什么区别？

> ID：862051
> 
> 赞同：65
> 
> 时间：2009-05-14T07:44:36.740
> 
> 标签：c++, image, imagemagick, comparison, graphicsmagick

我发现自己评估了这两个库。除了 GraphicsMagick 比较所说的之外，我看到 ImageMagick 仍然有更新，而且看起来两者几乎相同。

我只是想在 C++ 中进行基本的图像处理（即图像加载、过滤器、显示）；在这些库之间进行选择时，我应该注意哪些差异？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2019-05-20T12:01:47.180

就像生活中的许多事情一样，不同的人对什么是最好的有不同的看法。如果你问一位风景摄影师在苏格兰山区的雨中四处游荡，这是世界上最好的相机，他会告诉你一款轻便、防风雨的相机。询问工作室摄影师，他会告诉您具有最佳闪光同步速度的最高分辨率。如果你问体育摄影师，他会告诉你自动对焦速度最快、帧速率最高的那个。ImageMagick 和 GraphicsMagick 也是如此。

在过去 5 年多的时间里，我在 ImageMagick 上回答了大约 2,000 个 StackOverflow 问题，我提出以下观察结果......

**就人气而言...**

*   关于 SO 的 ImageMagick 问题数量超过 GraphicsMagick 问题的 12:1 倍（7,375 个问题与 2019 年 5 月的 611 个问题），以及
*   SO 上的 ImageMagick 追随者数量超过 GraphicsMagick 追随者 15:1（（387 追随者，而 2019 年 5 月为 25）

**在性能方面...**

我很高兴承认 GraphicsMagick 对于某些问题可能更快，但不是所有问题。但是，如果速度是您最重要的考虑因素，我认为您可能应该`libvips`在当今的多核 CPU 或 OpenCV 等高度 SIMD 优化（或 GPU 优化）的库上使用并行代码或并行代码。

**在功能和灵活性方面...**

这里有一个非常明显的赢家——ImageMagick。我的经验是，GraphicsMagick 中缺少许多 ImageMagick 中存在的功能，我在下面列出了其中的一些，没有特别的顺序。

我坦率地承认，我对 GraphicsMagick 的熟悉程度不如对 ImageMagick 的熟悉，但我尽最大努力在最新的 GraphicsMagick 源代码中找到任何提及这些功能的内容。因此，对于 Canny Edge Detector，我在 GM 源代码上运行了以下命令：

```
find . -type f -exec grep -i Canny {} \; 
```

什么也没找到。

* * *

# Canny 边缘检测器

这似乎在通用汽车中完全缺失。见`-canny radiusxsigma{+lower-percent}{+upper-percent}`IM。

请参阅[此处](https://imagemagick.org/discourse-server/viewtopic.php?f=4&t=25405)的示例和 Lena 图像上的边缘检测示例：

[![在此处输入图像描述](https://i.stack.imgur.com/5tzzs.gif)](https://i.stack.imgur.com/5tzzs.gif)

* * *

# 带括号的处理，复杂的重新测序

这是 ImageMagick 的一个杀手级功能，当我不得不使用 GM 时，我经常非常想念它。IM 可以加载、创建或克隆整个系列的图像，并有选择地对特定图像进行不同的处理，并非常简单方便地对它们进行重新排序、复制和重新排序。很难用简短的回答来传达这为您提供的令人难以置信的灵活性。

想象一下，你想做一些相当简单的事情，比如加载图像 A 并对其进行模糊处理，加载图像 B 并将其设为灰度，然后将图像与左侧的图像 B 并排放置。使用 ImageMagick 看起来像这样：

```
magick imageA.png -blur x3 \( imageB.png -colorspace gray \) +swap +append result.png 
```

[![在此处输入图像描述](https://i.stack.imgur.com/Rs6Sl.png)](https://i.stack.imgur.com/Rs6Sl.png)

你甚至不能开始使用 GM，它会抱怨括号。如果您删除它们，它将抱怨交换图像顺序。如果您删除它，它将对两个图像应用灰度转换，因为它不理解括号并将 imageA 放在左侧。

请参阅 IM 中的以下排序命令：

*   `-swap`
*   `-clone`
*   `-duplicate`
*   `-delete`
*   `-insert`
*   `-reverse`

* * *

# fx DIY 图像处理算子

IM 有`-fx`操作员，可让您创建和试验极其复杂的图像处理。您可以对图像中的每个像素进行函数评估。该函数可以随心所欲地复杂（如果需要，可以将其保存在文件中）并使用所有数学运算、三元样式`if`语句、甚至在其他图像中对像素的引用及其亮度或饱和度等。

这里有几个例子：

```
magick rose: -channel G -fx 'sin(pi*i/w)' -separate   fx_sine_gradient.gif 
```

[![在此处输入图像描述](https://i.stack.imgur.com/HhVxM.gif)](https://i.stack.imgur.com/HhVxM.gif)

```
magick -size 80x80 xc: -channel G -fx  'sin((i-w/2)*(j-h/2)/w)/2+.5' -separate fx_2d_gradient.gif 
```

[![在此处输入图像描述](https://i.stack.imgur.com/hWlUy.gif)](https://i.stack.imgur.com/hWlUy.gif)

使用此功能在处理绿屏（色度键）图像方面效果很好的 StackOverflow 答案在[这里](https://stackoverflow.com/a/25146019/2836621)。

* * *

# 傅立叶（频域）分析

GM 中似乎没有提到正向或反向傅立叶分析，也没有提到通常需要支持它的高动态范围支持（见下文）。见`-fft`IM。

* * *

# 连通分量分析/标签/斑点分析

GM中似乎没有*“连接组件分析”* ——也称为*“标签”*和*“Blob 分析”*。参见`-connected-components connectivity`4 和 8 连接的 blob 分析。

仅此功能就提供了 60 多个答案 - 请参见[此处](https://stackoverflow.com/search?q=user%3A2836621%20connected)。

* * *

# 霍夫线检测

GM 中似乎没有霍夫线检测。见`-hough-lines widthxheight{+threshold}`IM。

[请参阅此处](https://imagemagick.org/discourse-server/viewtopic.php?f=4&t=25476)的功能描述和以下检测到的行示例：

[![在此处输入图像描述](https://i.stack.imgur.com/U1Qhv.png)](https://i.stack.imgur.com/U1Qhv.png)

* * *

# 矩和感知散列 (pHash)

似乎不支持图像矩计算（质心和更高阶），也不支持 GM 中的感知散列。见`-moments`IM。

* * *

# 形态学

似乎不支持 GM 中的形态处理。在 IM 中，对以下内容提供了复杂的支持：

*   扩张
*   侵蚀
*   形态开闭
*   骨架化
*   距离形态
*   顶帽和底帽形态
*   命中和未命中形态 - 线端、线连接点、山峰、山脊、凸壳等

查看您可以使用[此出色教程](https://www.imagemagick.org/Usage/morphology/)进行的所有复杂处理。

* * *

# 对比度受限自适应直方图均衡 - CLAHE

GM 中似乎不支持对比度受限自适应直方图均衡化。见`-clahe widthxheight{%}{+}number-bins{+}clip-limit{!}`IM。

* * *

# HDRI - 高动态范围成像

GM 中似乎不支持高动态范围成像——仅支持 8、16 和 32 位整数类型。

* * *

# 卷积

ImageMagick 支持多种类型的卷积：

*   高斯差DoG
*   拉普拉斯算子
*   索贝尔
*   罗盘
*   普雷维特
*   罗伯茨
*   弗莱陈

GM源代码中没有提到这些。

* * *

# Magick 持久寄存器 (MPR)

这是 ImageMagick 中的一项非常宝贵的功能，它允许您在处理期间将中间处理结果写入指定的内存块，而无需写入磁盘的开销。例如，您可以准备一个纹理或图案，然后将其平铺在图像上，或者准备一个蒙版，然后对其进行更改并稍后在相同的处理中应用它，而无需进入磁盘。

这是一个例子：

```
 magick tree.gif -flip -write mpr:tree +delete -size 64x64 tile:mpr:tree mpr_tile.gif 
```

[![在此处输入图像描述](https://i.stack.imgur.com/EUR9j.gif)](https://i.stack.imgur.com/EUR9j.gif)

* * *

# 更广泛的色彩空间支持

IM 支持以下 GM 中没有的色彩空间：

*   CIE实验室
*   盐酸
*   恒指
*   管理系统
*   其他。

* * *

# 盘古支持

IM 支持类似于 HTML 的 Pango 文本标记语言，并允许您使用更改的文本注释图像：

*   字体, 颜色, 尺寸, 重量, 斜体
*   下标、上标、删除线
*   理由

句子中间还有很多很多。[这里](https://www.imagemagick.org/Usage/text/#pango)有一个很好的例子。

[![在此处输入图像描述](https://i.stack.imgur.com/AkMuq.png)](https://i.stack.imgur.com/AkMuq.png)

* * *

# 使用 JPEG 进行加载收缩

这个无价的特性允许库在从磁盘读取 JPEG 图像时缩小它们，以便只读取必要的系数，从而减少 I/O，并最大限度地减少内存消耗。当缩小图像时，它可以大大提高性能。

[请参见此处](https://stackoverflow.com/a/32169224/2836621)的示例。

* * *

# 写入时定义的最大 JPEG 大小

例如，IM 支持在写入 JPEG 文件时指定最大文件大小的要求很高的选项`-define jpeg:extent=400KB`。

* * *

# 极坐标变换

IM 支持笛卡尔坐标和极坐标之间的转换，请参见`-distort polar`和`-distort depolar`。

* * *

# 可定制区域的统计和操作

使用它的`-statistic MxN`操作符，ImageMagick 可以生成许多有用的统计信息和效果。例如，您可以将图像中的每个像素设置为其 5x3 邻域的渐变（最亮和最暗之间的差异）：

```
magick image.png -statistic gradient 5x3 result.png 
```

或者您可以将每个像素设置为其 1x200 邻域的中值：

```
magick image.png -statistic median 1x200 result.png 
```

[请参阅此处](https://stackoverflow.com/a/42136544/2836621)的应用示例。

[![在此处输入图像描述](https://i.stack.imgur.com/kRGDr.png)](https://i.stack.imgur.com/kRGDr.png)

* * *

# 图像序列

ImageMagick 支持图像序列，因此如果您有一组在高 ISO 下拍摄的非常嘈杂的图像，您可以加载整个图像序列，例如，获取所有图像的中值或平均值以减少噪声。见`-evaluate-sequence`操作员。我并不是指单个图像中周围邻域的中值，而是指在每个像素位置找到所有图像的中值。

* * *

无论如何，以上并不是一个详尽的列表，它们只是我想到差异时想到的前几件事。我什至没有提到对 HEIC（Apple 的 iPhone 图像格式）、越来越常见的高动态范围格式（如 EXR）或任何其他格式的支持。事实上，如果你比较两个产品支持的文件格式（`gm convert -list format`和`magick identify -list format`）你会发现IM支持261格式，GM支持192。

正如我所说，不同的人有不同的看法。选择您喜欢的并享受使用它。

与往常一样，我要感谢 Anthony Thyssen 在[https://www.imagemagick.org/Usage/](https://www.imagemagick.org/Usage/)上对 ImageMagick 的出色见解和论述，还要感谢 Fred Weinhaus 提供的示例。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-05-25T21:58:39.067

从我读过的内容来看，GraphicsMagick 更稳定，速度更快。我做了一些不科学的测试，发现 gm 的速度是 im 的两倍（调整大小）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-06-26T19:20:26.193

我发现 ImageMagick 处理 TIFF group-4 图像（黑白文档图像）的速度非常慢，主要是因为它从每像素 1 位转换为 8 位，然后再转换回来以进行任何图像处理。GraphicsMagick 小组在其 1.2 版中彻底检查了对 TIFF 格式的支持，它在处理这些类型的图像方面比原来的 ImageMagick 快得多。当前的 GraphicsMagick 稳定版本为 1.3.5。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2011-04-22T12:13:47.753

当速度不是一个因素时，我使用 ImageMagick。然而在服务器端，每天处理数以万计的图像，GraphicsMagick 明显更快 - 在某些情况下，基准测试速度快 50%！

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-04-28T10:31:40.507

# 历史

由于创始开发者之间的争议，graphicsmagick 早在 2002 年就从 imagemagick 分叉出来。因此它们共享相同的代码库。

参考：[https ://en.wikipedia.org/wiki/GraphicsMagick](https://en.wikipedia.org/wiki/GraphicsMagick)

# 目标

**图形魔术师**

*   专注于简单、稳定、更清晰的代码库/架构

**图像魔术师**

*   专注于推出新功能，扩展更广泛的工具库

除了速度之外，imagemagick 还向终端 shell 添加了许多 cli 工具，而 graphicsmagick 是您可以调用的单个工具。

# CLI界面设计

**图形魔术师**

```
gm <command> <options> <file> 
```

**图像魔术师**

```
convert <options> <file>
compare <options> <file> 
```

恕我直言，我更喜欢**（实际上，只使用）** graphicsmagick（gm）而不是 imagemagick，因为后者有更高的工具名称冲突机会，这会导致在找出某些工具未运行的原因时出现很多问题，尤其是在服务器端自动化任务期间。总之，graphicsmagick 有更清晰的设计。

想象一个项目中名为 convert 的二进制文件，它是 imagemagick 的 convert 还是项目中您自己的滚动工具将被调用？

imagemagick 工具列表（包括转换、比较、显示）：[https ://imagemagick.org/script/command-line-tools.php](https://imagemagick.org/script/command-line-tools.php)

graphicsmagick 命令列表：http: [//www.graphicsmagick.org/utilities.html](http://www.graphicsmagick.org/utilities.html)

*注意：从 Mark S 提到的 v7 开始，imagemagick 现在以单个二进制文件的形式分发，并且还支持较旧的 v6 命令。*

# 表现

可以在这里找到一个简单的内存消耗测试： [https ://coderwall.com/p/1l7h-a/imagemagick-bloat-graphicsmagick](https://coderwall.com/p/1l7h-a/imagemagick-bloat-graphicsmagick)

# 依赖项

GraphicsMagick 依赖于 36 个库，而 ImageMagick 需要 64 个。参考：[http ://www.graphicsmagick.org/1.3/FAQ.html](http://www.graphicsmagick.org/1.3/FAQ.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-11-08T04:45:04.763

请注意，GraphicsMagick 提供 API 和 ABI 稳定性，这不是 ImageMagick 保证的一部分。从长远来看，这将很重要，除非您出售所有依赖项。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-20T16:43:47.223

GraphicsMagick 是 Imagemagick 的早期分支。[您可以在https://imagemagick.org/script/history.php](https://imagemagick.org/script/history.php)阅读有关 Imagemagick 的历史和 GraphicsMagick 的分支。似乎 Imagemagick 继续得到相当广泛的开发，而 GraphicsMagick 自分叉以来或多或少地停滞不前。

# unit-testing - 参数约束

> ID：862052
> 
> 赞同：0
> 
> 时间：2009-05-14T07:44:40.857
> 
> 标签：unit-testing, rhino-mocks, constraints

我正在使用 Rhino Mocks 框架。我引用了 Rhinomocks dll 并且一切正常.. 但是当我尝试使用 LastCall.Constraints(Is.Anything()) 时，它说：错误名称'Is'在当前上下文中不存在同样发生在文本中和列出约束..有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T07:55:13.907

你是

```
using Rhino.Mocks.Constraints; 
```

?

'Is' 类在 'Constraints' 命名空间中定义，必须显式引用才能使用该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T07:55:38.693

我不熟悉 RhinoMocks 框架，但我发现了一些可能对您有所帮助的代码。这是[来自使用它的 castleproject.org 的 SVN 的文件](https://svn.castleproject.org/svn/castle/trunk/MonoRail/Castle.MonoRail.Framework.Tests/Services/EmailTemplateServiceTestCase.cs)，您可能希望将您的方法与他们的方法进行比较。

# java - 获取对象状态

> ID：862055
> 
> 赞同：6
> 
> 时间：2009-05-14T07:46:27.857
> 
> 标签：java, hibernate

hibernate 是否提供返回对象状态（瞬态、持久、分离）的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T08:43:34.493

请参阅[Javadoc Hibernate Session](https://www.hibernate.org/hib_docs/v3/api/org/hibernate/Session.html)并检查方法

*   contains - 检查此实例是否与此会话相关联。
*   getIdentifier - 返回与此会话关联的给定实体的标识符值。注意如果实体没有关联则抛出的异常，每个异常都应该被认为是致命的，并且不应该在它之后使用会话
*   get - 返回具有给定标识符的给定实体类的持久实例，如果没有这样的持久实例，则返回 null。

我会使用'get'并进一步检查更改的值，之后它只是一个“saveOrUpdate”来持久或更新（并重新附加）实际对象

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T12:46:10.557

[Session.contains](https://www.hibernate.org/hib_docs/v3/api/org/hibernate/Session.html#contains(java.lang.Object))告诉您对象是否与会话相关联。如果它没有标识符，它是暂时的，如果它有一个标识符并与会话相关联，它是持久的。标识符但未与会话关联，已分离。

如果这没有帮助，请考虑用更多上下文重新表述您的问题，也就是说，为什么您首先需要知道对象的状态？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T11:40:28.687

我不同意`session.contains(obj)`显示休眠对象状态的用法。在一个简单的调用之后，以前持久/加载的对象将被假定为 TRANSIENT `session.clear()`- 如果您没有主键而是复合键，您不知道它处于哪种状态......

在 Hibernate 3 中可以找到正确的方法：[org.hibernate.engine.ForeignKeys.isTransient(...)](http://grepcode.com/file/repository.jboss.org/nexus/content/repositories/releases/org.hibernate/hibernate-core/3.6.10.Final/org/hibernate/engine/ForeignKeys.java#ForeignKeys.isTransient%28java.lang.String,java.lang.Object,java.lang.Boolean,org.hibernate.engine.SessionImplementor%29)

# php - 通过 php mysql 更新表

> ID：862056
> 
> 赞同：0
> 
> 时间：2009-05-14T07:46:43.363
> 
> 标签：php, mysql

这是我更新表格的代码。我的问题是，在提交新记录后，我第一次无法更新（它显示为空白），但第二次它工作正常。

还有一件事：当我删除包含语句时，它在 submessage.php 上工作正常，没有任何 phpcode。*[annakata：我不知道这是什么意思]*

```
$pid = $_GET['id'];
$title = $_POST['title'];
$summary = $_POST['summary'];
$content = $_POST['content'];
$catid = $_POST['cid'];
$author = $_POST['author'];
$keyword = $_POST['keyword'];
$result1= mysql_query("update listing set catid='$catid',title='$title',
summary='$summary',content='$content', author='$author', keyword='$keyword' where pid='$pid'",$db);
    include("submessage.php"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T10:05:54.187

为什么不直接重定向`submessage.php`而不是内联呢？当用户刷新页面时，重定向还可以防止重复的数据库操作。只需将`include`语句替换为：

```
header('Location: submessage.php?id=' . $pid);
die(); 
```

此外，在部署应用程序之前：**永远不要将用户输入直接放在 SQL QUERY**中。您应该改用绑定参数。否则，您也可以公开宣传您的数据库管理员密码。[在http://ie.php.net/pdo](http://ie.php.net/pdo)阅读有关 PDO 和准备好的声明的更多信息

这是我的做法：

```
$pdo = new PDO(....); // some configuration parameters needed
$sql = "
    UPDATE listing SET
        catid=:catid, title=:title, summary=:summary,
        content=:content, author=:author, keyword=:keyword
    WHERE pid=:pid
";
$stmt = $pdo->prepare($sql);
$stmt->bindValue('catid', $_POST['catid']);
$stmt->bindValue('title', $_POST['title']);
$stmt->bindValue('summary', $_POST['summary']);
$stmt->bindValue('content', $_POST['content']);
$stmt->bindValue('author', $_POST['author']);
$stmt->bindValue('keyword', $_POST['keyword']);
$stmt->bindValue('pid', $pid = $_GET['id']);
$stmt->execute();

header('Location: submessage.php?id=' . $pid);
die(); 
```

或者事实上，我会使用一些 ORM 解决方案让它看起来更像这样：

```
$listing = Listing::getById($pid = $_GET['id']);
$listing->populate($_POST);
$listing->save();

header('Location: submessage.php?id=' . $pid);
die(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T08:25:11.417

那段代码的错误之处很难一一列举。但是，至少，您应该先[建立与数据库的连接，](http://www.php.net/function.mysql-connect)然后才能查询它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T08:39:25.890

除了 SQL 注入的常见警告之外 - 很可能给定您的代码以及您从中获取查询参数的位置（没有任何类型的验证） - 那么您的问题很可能与查询无关，特别是如果它正在工作在随后的尝试中。您确定 $_GET['id'] 是在您第一次调用脚本时设置的吗？

请注意，绝对没有理由必须为您需要更新的每个字段执行多个更新查询 - 只需将它们组合成一个查询即可。

# tdd - 如何正确执行 TDD？我什么时候为比我的业务逻辑层（即 DAL）更深的层编写测试？

> ID：862064
> 
> 赞同：1
> 
> 时间：2009-05-14T07:50:34.977
> 
> 标签：tdd

我仍然不确定在从外到内进行开发时如何最好地使用 Mocks（即首先编写模拟客户要求的测试）

假设我的客户的要求是“客户可以取消她的订单”。

我可以为此编写一个测试 - Test_Customer_Can_Cancel_Her_Order。

然后我使用 TDD 编写业务类并模拟数据访问层（或任何比我的业务逻辑层“更深”的层）。太棒了，我的测试通过了，我只测试业务层，而不是下面的任何层。

现在我想知道的是......我什么时候深入研究并开始编写和测试数据访问层？直接在顶级测试之后？只有当我编写集成测试时？也许没关系？只要它在某个时候完成？

就是想...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T08:39:11.040

这是一个棘手的问题。有些人认为测试“私有”代码是可以的，有些人认为不是。这当然更容易，因为您不必进行复杂的设置来重现应用程序状态，从而可以测试要添加的小功能（您可以直接测试该功能）。我曾经是这些人中的一员，但现在我会说最好只测试公共 API（创建测试和设置，只看到用户可以做和看到的事情）。这样做的原因是，如果您只测试公共 API，您将拥有无限的重构潜力。如果你测试私有代码，如果你选择重构，你将不得不改变你的测试（让你不太容易“无情地重构”，从而导致糟糕的代码）。

但是，我不得不说，仅测试公共 API*确实*会导致更复杂的测试框架。

因此，为了更具体地回答您的问题，您的下一步是尝试考虑当前订单取消代码可能存在问题的情况，并编写一个新的高级设置来重现该问题。您提到了数据访问测试。创建数据库损坏的高级设置，并测试您的应用程序是否正常运行。

哦，如果对于 GUI 应用程序，那就有点棘手了，因为您真的不想达到测试鼠标点击和读取像素的地步。这很愚蠢。如果您使用（并且应该）使用 MVC 系统，请在控制器级别停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T11:20:02.680

使用集成测试进行查询和其他数据访问测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T11:33:53.380

我总是编写测试来测试 DAO 层，这不是测试业务逻辑，但我觉得测试 CRUD 功能很重要。这给我带来了很多麻烦，因为如果我的数据库由于某种原因损坏，我的测试很可能会失败。为了防止这些 DAO 类型测试失败，我所做的是，首先在非生产数据库中进行测试。然后对于每个 CRUD/DAO 测试我

1.  找到之前测试中可能遗留的对象，如果存在，我将其删除。
2.  我创建了我想测试的对象
3.  我更新了我想测试的对象
4.  我清理或删除我创建的对象。

这个序列帮助我确保我的数据库处于这样一种情况，即如果运行两次并且第一次测试在中间停止时我的测试不会失败。

Another way is to wrap your CRUD tests in a transaction and at the end of the test rollback the transaction so the database is in the state that it began.

# c++ - 如何动态更改 CMFCRibbonLabel 的文本

> ID：862068
> 
> 赞同：1
> 
> 时间：2009-05-14T07:52:36.360
> 
> 标签：c++, label, ribbon, statusbar, mfc-feature-pack

我`CMDIFrameWndEx`派生的主框架窗口使用`CMFCRibbonStatusBar`我添加了一个`CMFCRibbonLabel`.

我想在运行时更改此标签的文本：

```
m_pLabel->SetText(description);
m_pLabel->Redraw(); 
```

它只更新文本，但不更新绘制它的矩形。因此，如果原始文本太短，新字符串将不会完全可见。

如何让它正确调整大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-06-14T13:44:55.523

您无需删除并重新添加。只需调用这个：

```
m_wndStatusBar.ForceRecalcLayout(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-26T18:40:03.087

使用 CMFCRibbonStatusBarPane::SetAlmostLargeText 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T12:41:19.310

再次回答我自己的问题......

我通过添加和删除标签而不是尝试更改文本来解决这个问题。

### 添加标签的代码：

```
CMFCRibbonLabel* pLabel = new CMFCRibbonLabel(description);
pLabel->SetID(ID_MYLABEL); // ID is 0 by default

m_wndStatusBar.AddDynamicElement(pLabel);
m_wndStatusBar.RecalcLayout();
m_wndStatusBar.RedrawWindow(); 
```

请注意，我正在设置一个 ID，以便以后可以`CMFCRibbonStatusBar::RemoveElement()`使用该 ID 调用。需要调用`RecalcLayout()`和`RedrawWindow()`才能使更改可见。

### 去除标签的代码：

```
if(m_wndStatusBar.RemoveElement(ID_MYLABEL))
{
    m_wndStatusBar.RecalcLayout();
    m_wndStatusBar.RedrawWindow();
} 
```

# asp.net-mvc - MVC 中的 HTML.Listbox 未显示在 FormsCollection 中

> ID：862069
> 
> 赞同：1
> 
> 时间：2009-05-14T07:53:00.667
> 
> 标签：asp.net-mvc, listbox

我有一个 ASP.NET MVC 应用程序，其中有一个 HTML.Listbox，用户可以在网页中向其中添加项目。它看起来像这样。

```
<p>
    <label for="groups">Grupper:</label>
    <%= Html.ListBox("RoleGroups", (Model != null ? new SelectList(Model.RoleGroups) : new SelectList(new List<BL.Portal.Domain.Model.RoleGroup>(){})))%>
    <%= Html.ValidationMessage("RoleGroups")%>

    <br />
    <input type="button" id="btnRemoveRoleGroup" name="brnRemoveRoleGroup" value="Ta bort gruppen" />
    <input type="button" id="btnAddRoleGrop" name="btnAddRoleGrop" href="#dialogAddRoleGroup" value="Lägg till en grupp" />
</p> 
```

在控制器中，我收到这样的信息。

```
[RequiresRole(RoleToCheckFor = RoleEnum.UserCreate)]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult CreateEdit(Model.User user, bool newUser, string confirmedpassword) 
```

但是在我的用户中，属性 RoleGroups 始终为 Null，因此我检查了 Request.Form.AllKeys 并且找不到密钥： RoleGroups 。所以我猜当我回发时，关于 Html.Listbox 的信息永远不会发送！

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T11:28:07.950

oooo 我今晚一定睡得不好。没有问题，我所做的是，我将它们添加到列表框中后忘记选择列表框中的项目，所以回发当然没有发送任何内容......

嗯，现在修好了……

# css - 是否可以调试 CSS？

> ID：862073
> 
> 赞同：6
> 
> 时间：2009-05-14T07:54:42.690
> 
> 标签：css, debugging

我是一个 CSS 新手。是否有可以帮助调试应用于网页的 CSS 样式的工具。

当页面上的某些元素没有按应有的方式出现时，通常如何调试 CSS 并解决问题？现在，我不得不痛苦地一一注释 CSS 声明，以了解样式是如何显示的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-14T07:56:12.717

您在 Firefox 中使用[Firebug](https://addons.mozilla.org/nl/firefox/addon/1843)，这使得调试变得更加容易。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-14T08:07:20.633

通过浏览器：

*   **Firefox**有一个名为 Firebug 的插件模块。它易于安装且功能强大。与 Firefox 的“Web Developer”结合使用会更好。

*   **Internet Explorer**有一个开发工具栏，它不如 Firebug，但足以检查在 IE 中仍然可以工作的东西。此外还有一个名为 IE DOM 检查器的工具。还有一个用于 IE 的 Firebug 版本称为 Firebug Lite。

*   **谷歌浏览器**带有类似于 Firebug 的内置工具。查看地址栏右侧下拉菜单中的“工具->开发者”选项。这允许您查看每个元素使用的 css 规则。它还具有 Javascript 调试支持。

*   **Safari**使用称为 Web Inspector 的工具。

*   **Opera**有一个名为 Dragonfly 的内置实用程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-14T08:04:41.013

并在 Opera中内置[DragonFly 。](http://www.opera.com/dragonfly/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-14T07:57:36.473

您可以使用 Firefox 的 Firebug 插件。它对 CSS 非常有用。您可以从样式中动态打开和关闭样式和字段。太好了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-14T08:02:50.457

如果您不使用 Firefox，您现在可以获得可以在 IE 等中使用的[Firebug Lite 。](http://getfirebug.com/lite.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-14T08:02:31.937

[Safari 的 Web Inspector](http://webkit.org/blog/197/web-inspector-redesign/)或[Firebug for Firefox](http://getfirebug.com/)等 Web 开发人员工具可以帮助您调试 CSS。这些工具可以向您显示应用于特定元素的规则级联，并允许您更改或禁用特定属性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T08:13:39.773

首先使用 Firefox 开发和测试您的 CSS，然后切换到其他浏览器来测试您的代码。这是一种普遍接受的方法恕我直言。Firebug 很棒，但如果将它与FF 的[Web Developer](https://addons.mozilla.org/en-US/firefox/addon/60)插件结合使用，效果会更好。

有一个很棒的[网站](http://www.alistapart.com/topics/code/css/)，值得一试，里面有很多关于 CSS 和 HTML 开发的信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-14T08:20:32.427

当您需要调试 IE - 特定问题时。我听说有人告诉[IE DOM 检查](http://www.sharewareconnection.com/ie-dom-inspector.htm)器还不错。您还可以尝试[本文中描述的](http://blogs.msdn.com/ie/archive/2007/06/22/from-microsoft-teched-2007-web-development-tools-for-internet-explorer.aspx)工具。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-24T06:15:38.650

现在，您可以在大多数现代浏览器中使用我新发布的工具！

[HTML 框可视化工具 - GitHub](https://github.com/ghmcadams/boxvis)

# ios - 移动 UIImageView

> ID：862084
> 
> 赞同：4
> 
> 时间：2009-05-14T07:56:59.597
> 
> 标签：ios, iphone, cocoa-touch, uikit, core-animation

沿着点阵列移动图像的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T12:43:13.357

我推荐的方法是将 UIImage 包装在 UIImageView 中，并使用 CAKeyframeAnimation 沿通过您的三个点的路径为 UIImageView 的图层设置动画：

```
UIImage *image = [UIImage imageNamed:@"image.png"];
imageView = [[UIImageView alloc] initWithImage:image];
[mainView addSubview:imageView];
// Remember to remove the image view and release it when done with it

CAKeyframeAnimation *pathAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
pathAnimation.duration = 1.0f;
pathAnimation.calculationMode = kCAAnimationPaced;
pathAnimation.fillMode = kCAFillModeForwards;
pathAnimation.removedOnCompletion = NO;

CGMutablePathRef pointPath = CGPathCreateMutable();
CGPathMoveToPoint(pointPath, NULL, viewOrigin.x, viewOrigin.y);
CGPathAddLineToPoint(pointPath, NULL, point1.x, point1.y);
CGPathAddLineToPoint(pointPath, NULL, point2.x, point2.y);
CGPathAddLineToPoint(pointPath, NULL, point3.x, point3.y);
pathAnimation.path = pointPath;
CGPathRelease(pointPath);

[imageView.layer addAnimation:pathAnimation forKey:@"pathAnimation"]; 
```

请注意，默认情况下，图层的位置在图层的中心。如果您想相对于另一个参考点移动图层，您可以将图层的 anchorPoint 属性设置为类似于 (0.0, 0.0) 的左上角（在 iPhone 上）或 (0.0, 1.0) 的下角左边。

此外，这不会在完成后更改 UIImageView 的框架，因此如果您稍后引用该框架，您可能需要考虑到这一点，或者在动画结束时添加一个委托方法回调来设置它到合适的值。

您还可以通过将 CGPathAddLineToPoint() 调用替换为 CGPathAddCurveToPoint() 来使图像沿曲线而不是直线移动。

编辑（2009 年 5 月 14 日）：我添加了缺少的 pathAnimation.path = pointPath 行，并将对弯曲路径的错误引用更改为 pointPath。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T09:07:01.957

最简单的方法是使用[UIView 动画](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW14)

一个简单的例子，假设您能够使用 UIImageView 来保存您的图像和 NSArray 来保存您的观点。

```
 UIImage *image = [UIImage imageNamed:@"image.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    [someView addSubview:imageView]; // Assume someView exists

    NSValue *firstPoint = [NSValue valueWithCGPoint:CGPointMake(0, 0)];
    NSValue *secondPoint = [NSValue valueWithCGPoint:CGPointMake(100, 0)];
    NSValue *thirdPoint = [NSValue valueWithCGPoint:CGPointMake(100, 100)];
    // And so on....

    NSArray *points = [NSArray arrayWithObjects:firstPoint, secondPoint, thirdPoint, nil];

    for (NSValue *pointValue in points) {

        [UIView beginAnimations:@"UIImage Move" context:NULL];

        CGPoint point = [pointValue CGPointValue];
        CGSize size = imageView.frame.size;

        imageView.frame = CGRectMake(point.x, point.y, size.width, size.height);

        [UIView commitAnimations];
    } 
```

# c++ - 对象从容器中删除自身

> ID：862093
> 
> 赞同：1
> 
> 时间：2009-05-14T08:00:05.360
> 
> 标签：c++, containers

所以我有一个容器（任何类型，可能是 std::map 或 std::vector），它包含一个类的对象，其中一些网络事物在一个线程中运行，检查它是否仍然连接（线程在该类中定义并且建造时发射）。

有什么办法可以让对象在断开连接时从容器中删除自己，或者我应该将线程移到对象之外并使用该类来存储数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-14T08:08:28.553

为了让对象从容器中删除自己，它必须知道它在哪个容器中。您需要在对象中维护指向容器的指针。您还必须使用锁来保护容器，以阻止多个线程同时访问容器。

我想我更喜欢你的第二种解决方案——一些管理对象在从集合中删除死对象后看起来。如果不出意外，这将更容易调试，并且锁定逻辑集中在单个对象中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T08:41:09.413

我会有卸载队列。

当一个线程注意到连接断开时，它会将对象（和 continer）注册到卸载队列中，尽可能地让一切都上升，然后线程终止。

然后一个单独的线程位于卸载队列中。它的唯一目的是监视队列。当它在队列中看到一个新对象时，将其从容器中移除，然后销毁它（根据需要与对象线程同步）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T08:08:33.610

STL 容器倾向于假设它们正在存储值；可以复制且副本相同的对象。通常，具有线程的对象不太适合该模型。他们有更强烈的认同感。在这种情况下，您肯定有身份 - 容器中对象的副本与外部副本不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T22:40:19.187

我有一个与您的问题非常相似的问题，当它检测到断开连接时，我通过从“网络事物”发出*boost::signal解决了这个问题，被管理容器的对象捕获。*接收到该信号后，它将遍历容器，从中删除死的网络会话。在这里可能值得一看：

[如何从封装发出它的对象的对象中捕获 C++ boost::signal？](https://stackoverflow.com/questions/10149391/how-to-make-a-c-boostsignal-be-caught-from-an-object-which-encapsulates-the)

干杯，

克劳迪奥

# c# - 在填充数据后更改数据表中几列的 DateTimeMode

> ID：862095
> 
> 赞同：0
> 
> 时间：2009-05-14T08:00:42.240
> 
> 标签：c#, .net, dataset, asp.net-2.0

我需要更改已填充数据集中某些列的 DateTimeMode。（我不想在它被填充之前更改它，因为这意味着在整个应用程序中对几种方法进行更改。）

这是我正在使用的 stmt（对于单列）：

```
copy.Tables[0].Columns["DateColName"].DateTimeMode = DataSetDateTime.Utc; 
```

但是，如果数据集包含数据，则会引发无法更改 DateTimeMode 的错误。所以我正在考虑的解决方案是创建数据集的克隆，更改所需列的 DateTimeMode，然后重新加载数据。

```
DataSet copy = dsdata.Clone();
copy.Tables[0].Columns["DateColName"].DateTimeMode = DataSetDateTime.Utc;
copy.Load(dsdata.CreateDataReader(), LoadOption.OverwriteChanges, "TableName"); 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-26T14:57:15.113

试试这个，干杯

```
 private void SetUtcDateTime()
    {
        var ds = new DataSet { Locale = CultureInfo.InvariantCulture };

        foreach (DataTable source in DataSet.Tables)
        {
            bool containsDate = false;
            var target = source.Clone();

            foreach (DataColumn col in target.Columns)
            {
                if (col.DataType == System.Type.GetType("System.DateTime"))
                {
                    col.DateTimeMode = DataSetDateTime.Utc;
                    containsDate = true;
                }
            }

            if (containsDate)
            {
                foreach (DataRow row in source.Rows)
                    target.ImportRow(row);
                ds.Tables.Add(target);
            }
            else
            {
                ds.Tables.Add(source.Copy());
            }
        }
        DataSet.Tables.Clear();
        DataSet = ds;
    } 
```

其中“DataSet”是对象的公共属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-06T18:13:13.770

我也遇到了这个问题。填充数据集后，无法更改 DateTimeMode，因此我能找到的唯一解决方案是使用正确的 DateTimeMode 重新创建列。

此代码可能会有所帮助，您不必克隆整个数据集，只需删除列，修改它并将其添加回表中。

```
 private static void SetDateTimeMode(DataTable table, DataColumn col, DataSetDateTime mode)
        {
            var rowValues = new object[table.Rows.Count];

            for (int i = 0; i < rowValues.Length; i++)
            {
                // ignore deleted rows
                if (table.Rows[i].RowState == DataRowState.Deleted) continue;

                rowValues[i] = table.Rows[i][col];
            }

            // we must remove and re-add the row because DateTimeMode cannot be
            // changed on a column that has data.
            table.Columns.Remove(col);

            col.DateTimeMode = mode;

            table.Columns.Add(col);

            // write back each row value
            for (int i = 0; i < rowValues.Length; i++)
            {
                // ignore deleted rows
                if (table.Rows[i].RowState == DataRowState.Deleted) continue;

                var rowState = table.Rows[i].RowState;

                table.Rows[i][col] = rowValues[i];

                // preserve unchanged rowstate
                if (rowState == DataRowState.Unchanged)
                    table.Rows[i].AcceptChanges();
            }
        } 
```

当您将行值复制回列以保留 RowState 时，您只需要小心。

# asp.net - ASP.NET 缓存问题

> ID：862096
> 
> 赞同：3
> 
> 时间：2009-05-14T08:01:13.580
> 
> 标签：asp.net, caching, cache-dependency

我的缓存中有两个项目

1.  钥匙：猫
2.  键：Animal_Vacinations

现在，`Animal_Vacinations`对. *_* `Cat`因此，如果缓存项发生任何更改`Cat`，则缓存项`Animal_Vacinations`将失效。完美的 ：）

好的..现在解决问题。

创建第二个缓存项（即`Animal_Vacinations`）后，我添加了*第三个缓存对象*：-

3.  钥匙：狗

问题是，第二个对象也需要依赖`Dog`。在创建第二个对象时，它知道它应该依赖哪些项目。所以在这个例子中 Animal_Vacination 对象知道它应该依赖于......

1.  猫
2.  狗
3.  鸟
4.  乔恩斯基特

问题是，如果我尝试将`Animal_Vacination`具有所有这 4 个依赖项的对象插入缓存，它会失败。没有错误，只是失败了。（即`Cache["Animal_Vacination"] == null`）。

**这样做的原因是，当我插入具有这 4 个依赖项的缓存对象时……*但是其中 1 个或更多的依赖项不_exist_* ……它会优雅地失败。**

真可惜。

因为在我上面的示例中，缺少的三个对象之一是在添加 2 个对象之后立即添加的。

所以......无论如何都可以将对象添加到缓存中，具有基于键的缓存依赖项，其中尚未创建 1 个或多个依赖项，但稍后可能会创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T01:02:30.770

我不愿意将此称为答案，因为它做出了许多假设，可能应该首先通过其他问题来澄清，但这里是这样。

假设某处有一段代码负责使用键“Animal_Vacinations”将某些内容添加到缓存中，并且该代码知道“Animal_Vacinations”项依赖于它的其他缓存项，那么该代码应该创建每个必要的缓存键依赖项，包括将 Null 对象添加到缓存中，如有必要，对于尚未在缓存中找到的任何依赖项。

因此，例如，在您给出的示例中，在添加“Animal_Vacinations”之前缓存中已经存在“Cat”，那么负责将“Animal_Vacinations”添加到缓存的逻辑应该检查缓存是否存在每个依赖项项目，即“Cat”、“Dog”、“Bird”、“Jon Skeet”；如果找不到，则应将占位符对象或装箱值（可能是空字符串）添加到该键的缓存中（在这种情况下，用于“Dog”、“Bird”和“Jon Skeet”）；一旦缓存中存在所有依赖项，然后创建缓存依赖项并将“Animal_Vacinations”添加到缓存中。（或者，调用 Cache.Add 并为每个必需的依赖键使用占位符对象，

Continuing your example, when subsequent to this activity a real something is added to the cache with the "Dog" key, using Insert instead of Add in order to account for the possibility that the key already exists (as it does in this example), then the replacement of the "Dog" cache item, which was simply a Null value, will trigger the invalidation of the "Animal_Vacinations" cache item per its cache dependency.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T11:37:14.933

您可以做的是在添加实际项目后添加依赖项。所以它会是这样的：
添加键 Cat
添加键 Animal_Vacinations
添加缓存依赖于 Animal_Vacinations
添加键 Dog
编辑缓存依赖于 Animal_Vacinations 以便它包含狗。
为 Animal_Vacinations添加键 Bird
编辑缓存依赖项，使其包含 Bird，
依此类推...

# nhibernate - NHibernate、DTO 和 NonUniqueObjectException

> ID：862097
> 
> 赞同：2
> 
> 时间：2009-05-14T08:01:26.230
> 
> 标签：nhibernate, dto

我们使用 DTO 模式将我们的域对象从服务层编组到我们的存储库中，然后通过 NHibernate 下放到数据库中。

我遇到了一个问题，我从存储库中提取了一个 DTO（例如 CustomerDTO），然后将其转换为我的服务层中的域对象（客户）。然后我尝试保存一个包含相同客户对象的新对象（例如 SalesOrder）。这又被转换为 SalesOrderDTO（和 CustomerDTO）以推送到存储库中。

NHibernate 不喜欢这样 - 它抱怨 CustomerDTO 是重复记录。我假设这是因为它在同一个会话中取出了第一个 CustomerDTO，并且由于返回已经来回转换，它无法将其识别为同一个对象。

我被困在这里还是有办法解决这个问题？

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T08:28:05.653

您可以使用 Lock 将对象重新附加到 NHibernate 中的会话 - 例如

```
_session.Lock(myDetachedObject, NHibernate.LockMode.None); 
```

这可能有帮助，也可能没有帮助，具体取决于这里发生的事情。附带说明一下，将 DTO 与 NHibernate 一起使用并不是最常见的做法，NHibernate（大部分）支持持久性无知这一事实意味着 DTO 通常不像其他一些 ORM 框架那样广泛使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T09:02:51.420

这实际上是关于 NHibernate 会话如何工作的。因此，如果您在会话中拉取 CustomerDTO 的实例，然后过一段时间您应该获得相同的 CustomerDTO（例如通过主键） - 实际上您将获得对与您在第一次检索中所做的完全相同的对象的引用。

因此，您要做的是通过调用 session.Merge 合并对象，或者通过调用 session.Get(primaryKey) 向会话请求对象进行更新并刷新会话。

然而，正如史蒂夫所建议的那样——这通常不是你所做的——你真的想从数据存储中获取你的域对象并使用 DTO（如果需要）将数据传输到 UI、Web 服务等等......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T18:38:34.487

正如其他人所指出的，实现 Equals 和 GetHashCode 是朝着正确方向迈出的一步。还可以查看 NHibernate 对“附加”OR/M 习语的支持。

您还可以使用nosetter.camelcase 选项：http: [//davybrion.com/blog/2009/03/entities-required-properties-and-properties-that-shouldnt-be-modified/](http://davybrion.com/blog/2009/03/entities-required-properties-and-properties-that-shouldnt-be-modified/)

此外，我想鼓励您不要被网上信息的缺乏所劝阻。这并不意味着你疯了，或者做错了事。这只是意味着您正在处理边缘情况。不幸的是，像 NHibernate 这样的库的最大消费者是小型的内部和/或 Web 应用程序，它们可以自由地将所有持久性需求依赖于单个数据库。实际上，这条规则有很多例外。

例如，我目前正在开发一个商业桌面应用程序，其中我的一个域对象的数据分布在 SQL CE 数据库和磁盘上的图像文件之间。不幸的是，NHibernate 只能帮助我处理 SQL CE 持久性。我被迫使用一种“双重映射”（参见[Martin Fowler 的“企业应用程序体系结构的模式”](https://rads.stackoverflow.com/amzn/click/com/0321127420)）通过存储库层映射我的域模型，该存储库层知道哪些数据进入 NHibernate 以及哪些数据进入磁盘。

它发生了。这是一个真正的需要。有时，明显缺乏工具表明您采用了错误的方法。但有时事实是，您确实处于边缘情况，需要为自己构建一些这些模式来完成它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T18:23:48.420

> 我假设这是因为它在同一个会话中取出了第一个 CustomerDTO，并且由于返回已经来回转换，它无法将其识别为同一个对象。

你说的对。休眠不能。考虑实现 Equals 和 Hashcode 来解决这个问题。我认为重新附加可能仅在您尚未在此会话中加载对象时才有效。

# java - 如何在给定的包中找到带注释的方法？

> ID：862106
> 
> 赞同：55
> 
> 时间：2009-05-14T08:04:13.760
> 
> 标签：java, annotations

我有一个简单的方法标记注释（类似于*Effective Java*（第 2 版）第 35 项中的第一个示例）：

```
/**
 * Marker annotation for methods that are called from installer's 
 * validation scripts etc. 
 */
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface InstallerMethod {
} 
```

然后，在一个给定的包（比如`com.acme.installer`）中，它有几个包含大约 20 个类的子包，我想找到所有用它注释的方法。（因为我想对单元测试中的所有带注释的方法进行一些检查。）

什么（如果有）是最简单的方法？最好不要添加新的 3rd 方库或框架。

**编辑**：澄清一下，显然`method.isAnnotationPresent(InstallerMethod.class)`将是检查方法是否具有注释的方法-但此问题包括查找所有方法。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-05-14T08:13:02.647

如果您想自己实现它，这些方法将找到给定包中的所有类：

```
/**
 * Scans all classes accessible from the context class loader which belong
 * to the given package and subpackages.
 * 
 * @param packageName
 *            The base package
 * @return The classes
 * @throws ClassNotFoundException
 * @throws IOException
 */
private Iterable<Class> getClasses(String packageName) throws ClassNotFoundException, IOException
{
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    String path = packageName.replace('.', '/');
    Enumeration<URL> resources = classLoader.getResources(path);
    List<File> dirs = new ArrayList<File>();
    while (resources.hasMoreElements())
    {
        URL resource = resources.nextElement();
        URI uri = new URI(resource.toString());
        dirs.add(new File(uri.getPath()));
    }
    List<Class> classes = new ArrayList<Class>();
    for (File directory : dirs)
    {
        classes.addAll(findClasses(directory, packageName));
    }

    return classes;
}

/**
 * Recursive method used to find all classes in a given directory and
 * subdirs.
 * 
 * @param directory
 *            The base directory
 * @param packageName
 *            The package name for classes found inside the base directory
 * @return The classes
 * @throws ClassNotFoundException
 */
private List<Class> findClasses(File directory, String packageName) throws ClassNotFoundException
{
    List<Class> classes = new ArrayList<Class>();
    if (!directory.exists())
    {
        return classes;
    }
    File[] files = directory.listFiles();
    for (File file : files)
    {
        if (file.isDirectory())
        {
            classes.addAll(findClasses(file, packageName + "." + file.getName()));
        }
        else if (file.getName().endsWith(".class"))
        {
            classes.add(Class.forName(packageName + '.' + file.getName().substring(0, file.getName().length() - 6)));
        }
    }
    return classes;
} 
```

然后，您可以使用给定的注释过滤这些类：

```
for (Method method : testClass.getMethods())
{
    if (method.isAnnotationPresent(InstallerMethod.class))
    {
        // do something
    }
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-03-05T17:33:09.760

您可能应该看看开源[反射库](http://code.google.com/p/reflections/)。有了它，你可以用几行代码轻松实现你想要的：

```
Reflections reflections = new Reflections( 
    new ConfigurationBuilder().setUrls( 
    ClasspathHelper.forPackage( "com.acme.installer" ) ).setScanners(
    new MethodAnnotationsScanner() ) );
Set<Method> methods = reflections.getMethodsAnnotatedWith(InstallerMethod.class); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T10:04:17.760

如果您乐于使用 Spring，那么它会使用它的 context:component-scan 功能来执行这些操作，其中 Spring 扫描给定包中的注释类。在幕后，它非常可怕，并且涉及在文件系统和 JAR 文件中寻找包中的类。

即使你不能直接使用 Spring，看看它的源代码也可能会给你一些想法。

当然，Java反射API在这里是没有用的，它具体不提供获取包中所有类的方法。

# svn - 如何防止 svn 扩展 $Id$ 关键字？

> ID：862111
> 
> 赞同：3
> 
> 时间：2009-05-14T08:05:33.240
> 
> 标签：svn

标题说什么

我试过`svn pd`但不知道使用它的正确语法。

```
>svn pd svn:keywords Id
svn: warning: 'Id' is not under version control 
```

### 更新：

我想要整个当前目录，而不仅仅是一个文件，所以我尝试了：

```
>svn propdel svn:keywords "Id" . -R
svn: warning: 'Id' is not under version control
property 'svn:keywords' deleted (recursively) from '.'. 
```

我的文件仍然`$Id$`扩展。

### 更新2：

更清楚地说，我没有向 svn 提交任何内容，只是不时检查并更新。

我注意到当我使用 git-svn 获取它时，所有`$Id$`标签都被保留（不扩展），我希望 svn 做同样的事情。

所以现在我运行了这个命令：

```
>svn propdel svn:keywords . -R 
```

我现在应该怎么做才能在不扩展 $Id$ 的情况下获取最新文件？我想我想要告诉 svn 再次提取*所有*文件......

我试过了：

```
>svn revert . -R 
```

但它似乎没有做我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T10:53:36.800

'svn propdel' 只接受一个路径作为参数，而不是“Id”。因此，您只能完全删除 svn:keywords-property，或者编辑该属性。

因此，如果您不关心其他关键字，则可以使用以下内容：

```
svn propdel svn:keywords . -R 
```

如果你想有一些关键字作为标准，但不是“ID”，你可以递归设置：

```
svn propset svn:keywords "Revision" . -R 
```

另一件事是：如果关键字“Id”被删除，这个关键字在文件中保持不变。如果它之前扩展它会保持这种方式，但如果你回到 $Id$ 它将不会扩展。

**对更新 2 的回答：** svn-revert 总是从文件中取回最新版本。那不是你想要的。

正如我之前所说，如果关键字被扩展一次，它们会保持不变，即使您稍后停用扩展也是如此。所以你需要一个脚本来让你的文件回到未扩展的 $Id$ 并再次提交。之后 - 如果您按照说明停用扩展 - 关键字将保持未扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T08:19:27.497

您需要说明您希望删除该属性的内容。所以你最后缺少一个文件名

```
svn propdel svn:keywords "Id" file 
```

否则 svn 似乎只将最后一个参数作为文件名，这不受修订控制

# ubuntu - 如何使用 Ubuntu 8.10 在 PHP 5 中安装 amf 扩展？

> ID：862112
> 
> 赞同：0
> 
> 时间：2009-05-14T08:05:36.017
> 
> 标签：ubuntu

我正在尝试了解如何在 Ubuntu 8.10 中安装 amf 扩展以使 amf flash 工作。

我似乎无法在谷歌找到一个好的教程。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-12-23T16:01:57.313

你不能用pecl吗？ [http://pecl.php.net/package/amfext](http://pecl.php.net/package/amfext)就是它所在的位置。 `sudo pecl install amfext`应该可以工作，但您可能需要告诉 pecl 使用 beta 版本。

# asp.net - 邮件附件的问题

> ID：862114
> 
> 赞同：0
> 
> 时间：2009-05-14T08:07:46.090
> 
> 标签：asp.net

我在邮件附件中遇到问题。我正在使用文件上传控件从本地计算机获取文件的路径。

它提供了正确的路径，但是在从任何文件夹附加文件时，它给出了错误“无效的邮件附件”。

以下是代码..

```
 protected void sndmail_Click(object sender, EventArgs e)
    {
        objmail = new MailMessage();
        objmail.From = txt_sender.Text;
        objmail.To = txt_recipient.Text;
        objmail.Cc = txt_cc.Text;
        objmail.BodyFormat = MailFormat.Text;
        objmail.Priority = MailPriority.High;
        objmail.Subject = txt_sub.Text;
        objmail.Body = txt_body.Text;
        SmtpMail.SmtpServer = "localhost";
        SmtpMail.Send(objmail);
        Response.Write("Mail send successfully...");

    }

    protected void attch_Click(object sender, EventArgs e)
    {
        string mypath = System.IO.Path.GetFullPath(FileUpload1.FileName);
        MessageBox.Show(mypath); 
        MailAttachment attch = new MailAttachment(mypath);

        objmail.Attachments.Add(attch);
    } 
```

你能帮我弄清楚为什么我会看到这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T08:15:29.567

FileUpload 控件的 FileName 属性将为您提供*客户端*上文件的名称，而创建邮件消息的代码正在*服务器*上运行。您需要先将文件存储在服务器上，然后在创建邮件附件时参考该路径。

```
string fileNameOnServer = Path.Combine("<some writeable path on your server>", FileUpload1.FileName);
FileUpload1.SaveAs(fileNameOnServer);

// now you can user fileNameOnServer to attach the file to a mail message
objMail.Attachments.Add(new Attachment(fileNameOnServer)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T08:19:34.207

`objmail.Attachments.Add(attch);`执行代码时，`objmail`变量未实例化，因此您收到错误消息。

这行代码应该写在`sndmail_Click`method after`objmail = new MailMessage();`

请注意，它`attch`是方法中的局部变量，`attch_Click`无法在方法中访问`sndmail_Click`。您应该使这个变量对两种方法都可用，因此在声明`objmail`变量的位置一起声明。

**编辑**：

但是，正如 Fredrick 在他的回答中概述的那样，您需要在方法中将文件保存在服务器中，`attch_Click`并在`sndmail_Click`方法中将保存的文件添加到`objmail.Attachments`集合中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T15:36:02.207

objmail = new MailMessage();

```
 objmail.Attachments.Add(new MailAttachment(FileUpload1.PostedFile.FileName));
    objmail.From = txt_sender.Text;
    objmail.To = txt_recipient.Text;
    objmail.BodyFormat = MailFormat.Text;
    objmail.Priority = MailPriority.High;
    objmail.Subject = txt_sub.Text;
    objmail.Body = txt_body.Text;
    SmtpMail.SmtpServer = "";
    SmtpMail.Send(objmail);
    Response.Write("Mail send successfully..."); 
```

现在它的工作文件......使用这一行......（SmtpMail.SmtpServer =“”;）

感谢所有回复...

# iphone - iPhone SQLite 文件管理

> ID：862115
> 
> 赞同：0
> 
> 时间：2009-05-14T08:08:26.400
> 
> 标签：iphone, objective-c, sqlite

我正在开发一个应用程序，我使用 SQLite 作为我的数据库存储。我想在我的应用程序期间添加和更新 sqlite 数据库，所以我将它复制到文档目录中，这样我就可以用我的数据库做各种事情，除了只能从中选择。

但是由于我在开发“时间”，所以我的数据库在这个过程中经常发生变化（数据库架构是由另一个开发人员制作的）

在 iPhone 我正在检查

1.  如果数据库存在于文档目录中
2.  （如果没有）将其复制到它。
3.  使用那个数据库

但是当我想更新我的数据库（我在单独的 sqlite 管理器中创建的）时，它在复制较新版本的过程中失败了，因为我只检查数据库是否存在。

你们中有人遇到过同样的问题吗？你做了什么来解决这种问题..

我唯一的想法是创建一个设置表并保存一行来检查数据库的版本号..

还有一种方法可以在任何 sqlite 管理工具中从文档目录中编辑 sql 文件吗？

还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T17:31:47.030

我所做的是创建一系列能够从以前的版本 1.sql、2.sql、3.sql 等升级的 sql 脚本。当我打开我的数据库时，我从设置表中查询版本并将其与我在我的应用程序包中找到的最新 .sql 文件。如果有更新版本，我会开始运行 .sql 脚本，直到遇到最新版本。现在在几个项目中，这对我来说效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T13:03:31.810

我在我的应用程序中所做的： - 首先我做同样的事情。检查数据库是否在文档中。- 然后我检查以前安装的版本：文档中的小文本文件告诉我这一点 - 如果需要更新，我合并数据库：/Documents 中的一个与 app bundle 中的另一个。- 就我而言，我需要合并。如果用户不更改它，您可能只是复制过来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T13:56:50.550

我所做的与您所做的类似，只是我在数据库中添加了一个小的第二个表。这个数据库只包含一条记录——一个数据库版本号。因此，您从该数据库表中的版本 1 开始。然后，当您更改结构时，将此版本号更新为 2。在您的启动代码中，检查数据库是否存在。如果是这样，请检查数据库的版本号。如果数据库的版本号符合您的预期，请继续。如果低于您的预期，请调用一些代码将数据库升级到当前版本，然后继续。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T10:40:10.997

您是否尝试在 iPhone 上删除应用程序，然后再次部署应用程序？

# portlet - Liferay-ui：图标本地化

> ID：862119
> 
> 赞同：3
> 
> 时间：2009-05-14T08:09:37.507
> 
> 标签：portlet, liferay

我目前正在为 Liferay 门户开发一个 portlet。我`liferay-ui:icon`在我的 JSP 代码中使用了已经支持许多不同语言的本地化的结构。但是我现在发现了一个似乎没有本地化的条目：

```
<liferay-ui:icon image="add_article" message="add-article" label="true" url="${addUrl}" /> 
```

所有其他的工作，但`"add_article"`没有。有人可以帮助我吗？我知道应该有不同语言的“Language.properties”文件，并且应该有一个条目`action.ADD_ARTICLE=<the localized text>`。有人可以提示我如何解决这个问题吗？

**\EDIT：** 我刚刚在portal-impl.jar 中找到了相应的Language.properties 文件。该条目`action.ADD_ARTICLE`在那里并且正确本地化，但它仍然没有在 UI 上显示本地化？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-20T10:14:34.087

字符串可以在 ext/ext-impl/src/content/Language-ext_*你的语言环境*.properties 中本地化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-06T12:50:03.130

我在这里遇到了同样的问题，这个解决方法对我有用：

```
<% String message = LanguageUtil.get(pageContext, "action.ADD_ARTICLE"); %>
<liferay-ui:icon image="add_article" message="<%= message %>" label="true" url="${addUrl}" /> 
```

记得导入：

```
<% @page import="com.liferay.portal.kernel.language.LanguageUtil" %> 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:29:25.200

您还可以使用**挂钩**来个性化本地化字符串。

# c# - 如何在 Visual Studio C# Express 中删除片段？

> ID：862126
> 
> 赞同：3
> 
> 时间：2009-05-14T08:10:47.190
> 
> 标签：c#, visual-studio-2008, visual-studio-express, code-snippets

我在 Visual Studio C# Express 中添加了一些片段。

许多都在列表中，我想删除它们。

当光标位于名为“MySnippets”的文件夹上时，删除按钮处于活动状态。

但是当**光标在单个片段上时，删除按钮是灰色的**。

我认为这是一个错误，那么片段是否保存在**某个 XML 文件中，以便我可以手动编辑它们？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T08:13:44.580

您的文档文件夹中应该有一个 Visual Studio 文件夹，代码片段在其下方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T08:27:43.267

这是我发现管理片段的最简单方法：

1.  将所有片段文件放在某个目录的某个目录中。
2.  按 CTRL-K、B，然后按“添加..”按钮添加该目录。
3.  那么您对片段所做的任何更改都会立即反映出来。
4.  不要使用“导入...”按钮。

# c# - 升级企业库 - v1.0 到 v4.1

> ID：862129
> 
> 赞同：0
> 
> 时间：2009-05-14T08:11:34.427
> 
> 标签：c#, .net, enterprise-library

我有一个应用程序当前使用 ent-lib 的 1.0 版本，我正在尝试将其与 ent-lib 4.1 一起使用。它目前正在使用这些块：Common、Data、Logging、Security.Cryptography、Security 和 Configuration。到目前为止，我一直坐在 ent-lib 1.0 和 4.1 的源代码上，试图找出哪些类对应于哪些类，但这并没有证明是成功的。

1) 4.1 版本中似乎缺少配置块，它只是简单地划分在其他更具体的块中吗？

2）我正在尝试查找有关代码的哪些部分仅涉及换出名称以及我必须在哪里重写功能的信息。尤其是已重命名或放在不同位置的类。有什么好的方法可以做到这一点吗？有什么可以使用的文档吗？

3) DBCommandWrapper 和 Security 命名空间中的事件的 4.1 解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T17:11:09.830

1) 没了。

3a) 只需在数据端使用 DBCommand。Wrapper 的东西都不见了。

# c# - XML UTF-8 编码检查

> ID：862132
> 
> 赞同：0
> 
> 时间：2009-05-14T08:13:05.110
> 
> 标签：c#, .net, xml, validation, utf-8

我有一个这样的 XML 结构，一些学生项目包含无效的 UTF-8 字节序列，这可能导致整个 XML 文档的 XML 解析失败。

我想要做的是，过滤掉包含 UTF-8 字节序列的 Student 项目，并保留有效的字节序列。关于如何在 .Net 中执行此操作的任何建议或示例（首选 C#）？

顺便说一句：我的意思是无效的字节序列=> [http://en.wikipedia.org/wiki/UTF-8#Invalid_byte_sequences](http://en.wikipedia.org/wiki/UTF-8#Invalid_byte_sequences)

```
<?xml version="1.0" encoding="utf-8"?>
<AllStudents>
  <Student>
    Mike
  </Student>
  <Student>
    (Invalid name here)
  </Student>  
</AllStudents> 
```

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T13:25:33.790

我不懂 C#，所以恐怕我不能给你代码来做到这一点，但基本思想是将整个文件作为 utf-8 文本文件读取，使用[DecoderFallback](http://msdn.microsoft.com/en-us/library/system.text.decoderfallback.aspx)替换无效序列问号字符或 unicode 字符 0xFFFD。然后将文件写回为 utf-8 文本文件，并对其进行解析。

基本上，您将“清除不良 utf-8 序列”的操作与“解析 xml 文件”的操作分开。

在运行 XML 解析器读取固定数据之前，您甚至应该能够跳过再次写回文件；应该有某种方法可以将文件写入内存字节流并将该字节流解析为 XML。（再次，很抱歉不懂 C#）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T11:29:44.733

这很难做到。您不会得到 XML 解析器来解析其中包含无效字符的文档，所以我认为您减少了几个选项：

1.  找出编码错误的原因——一个常见的问题是当文档实际上是用 Latin-1 编写时，将文档标记为 UTF-8（或没有编码声明）。
2.  用手取出坏的部分。
3.  尝试找到一个用于 .NET的[标签汤解析器，该解析器将在出错后继续解析。](http://freshmeat.net/projects/tagsoup)
4.  拒绝无效的 XML 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T08:19:28.263

非常接近[XML 编码问题](https://stackoverflow.com/questions/770962/xml-encoding-issue/770966)。

# upgrade - SQL Server 2008 R2

> ID：862133
> 
> 赞同：2
> 
> 时间：2009-05-14T08:13:27.747
> 
> 标签：upgrade, sql-server-2008-r2

我听说微软将在一年内发布 SQL Server 2008 R2。虽然我最初认为这是针对刚刚发布的 2008 版本的补丁，但我意识到它实际上是一个完全不同的版本，您必须为此付费。（我说的对吗，如果你有 SQL Server 2008，如果你想升级到 2008 R2，你是否需要再次付费？）

如果您已经在运行 SQL Server 2008，您认为它仍然值得升级吗？还是取决于您公司的规模和当前的设置。对于我最初阅读的内容，我确实觉得此版本对于您希望具有非常好的可扩展性的非常高端的硬件设置更有用。

关于编程，您是否知道其中有任何额外的增强/支持将显着帮助 .NET 产品/Web 开发？

最初在上面找到了几个链接，但我想知道是否有人有更多关于这个主题的信息可以分享，因为我在 SO 上找不到任何关于它的信息？

谢谢。

[新的 SQL Server R2](http://www.theregister.co.uk/2009/05/12/sql_server_kilimanjaro_madison_early_code/)

微软链接就可以了。

[微软 SQL 2008 R2](http://www.microsoft.com/sqlserver/2008/en/us/R2.aspx)

编辑：基于**Express** Edition的更多信息

关于 SQL Server 2008 R2 的一件非常有趣的事情是关于 Express 版本。

以前的 SQL Server Express 快速版本的数据库大小限制为 4GB。使用 SQL Server Express 2008 R2，现在已增加到 10GB！

现在，对于对数据库要求相对较轻的中小型应用程序，这使得免费快速版成为更可行的选择。请记住，此限制是针对每个数据库的，因此，如果您对应用程序进行了足够巧妙的编码以将单独的数据库用于历史/存档数据，您可以从中榨取更多！

有关详细信息，请参阅此处：http: [//blogs.msdn.com/sqlexpress/archive/2010/04/21/database-size-limit-increased-to-10gb-in-sql-server-2008-r2-express .aspx](http://blogs.msdn.com/sqlexpress/archive/2010/04/21/database-size-limit-increased-to-10gb-in-sql-server-2008-r2-express.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-13T01:00:55.620

你在这里有几个不同的问题，所以这里有每个问题的答案：

**我说的对吗，如果您有 SQL Server 2008，如果您想升级到 2008 R2，您是否需要再次付费？**

是的。Microsoft 采用的方法是免费获得补丁（服务包和累积更新包），但新功能需要花钱。SQL Server 2008 R2 包含新功能。如果您只想了解最新的补丁，请查看[SQLServerPedia 上的 SQL Server 发布日期日历。](http://sqlserverpedia.com/wiki/SQL_Server_Release_Date_Calendar) 我把免费补丁放在那里。

**如果您已经在运行 SQL Server 2008，您认为它仍然值得升级吗？**

这取决于您使用它的目的。2008 R2 的主要焦点是商业智能。如果您正在进行数据仓库或分析，那么升级是值得的。

**关于编程，您是否知道其中有任何额外的增强/支持将显着帮助 .NET 产品/Web 开发？**

不。

**我想知道是否有人有更多信息可以分享，因为我在 SO 上找不到任何关于它的信息？**

它甚至还没有作为测试版提供，所以你在社区中找不到太多东西。对于内部消息，请在您最喜欢的搜索引擎中搜索 Project Gemini 或 Project Kilimanjaro。这些是 SQL Server 2008 R2 中大型组件的预发布代码。几个月前，我[在博客上收集了一些乞力马扎罗和双子座的故事。](http://www.brentozar.com/archive/2008/10/project-kilimanjaro-gemini-announcements/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T11:00:18.097

好吧，根据许多大型公司和组织的做法，等待任何给定 Microsoft 产品的服务包 1 可用，您可能还需要一段时间才能部署 SQL Server 2010 - 请原谅：2008 R2 :-)

SQL Server 2008 确实是一个相当广泛的更新，如果您可以选择部署它，我个人肯定会推荐这样做。它确实具有大量新功能，毫无疑问，这些新功能会让您的生活更轻松。

马克

# ruby - 将十六进制字符串转换（解码）为二进制字符串

> ID：862140
> 
> 赞同：18
> 
> 时间：2009-05-14T08:14:09.587
> 
> 标签：ruby

如何在 Ruby 中转换`"1234567890"`为？`"\x12\x34\x56\x78\x90"`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-01-01T18:18:45.410

尝试这个：

```
["1234567890"].pack('H*') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-03-23T04:20:08.513

红宝石 1.8 -

```
hex_string.to_a.pack('H*') 
```

红宝石 1.9 / 红宝石 1.8 -

```
Array(hex_string).pack('H*') 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-18T21:29:37.373

假设您有一个格式正确的十六进制字符串（十六进制数字对），您可以简单高效地打包为二进制，或解压缩为十六进制，如下所示：

```
string = '0123456789ABCDEF'
binary = [string].pack('H*')     # case-insensitive
 => "\x01#Eg\x89\xAB\xCD\xEF"
hex = binary.unpack('H*').first  # emits lowercase
 => "012345679abcdef" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-07-16T19:33:01.257

```
class String

  def hex2bin
    s = self
    raise "Not a valid hex string" unless(s =~ /^[\da-fA-F]+$/)
    s = '0' + s if((s.length & 1) != 0)
    s.scan(/../).map{ |b| b.to_i(16) }.pack('C*')
  end

  def bin2hex
    self.unpack('C*').map{ |b| "%02X" % b }.join('')
  end

end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T08:27:50.770

如果您有一个包含数字的字符串，并且您想将每个字符串扫描为数字十六进制字节，我认为这就是您想要的：

```
"1234567890".scan(/\d\d/).map {|num| Integer("0x#{num}")} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-14T08:25:48.543

```
(0..4).map { |x| "0x%X" % (("1234567890".to_i(16) >> 8 * x) & 255) }.reverse 
```

# .net - 是否可以通过暴力破解从加密的 cookie 值中找到validationKey 和decryptionKey？

> ID：862141
> 
> 赞同：1
> 
> 时间：2009-05-14T08:14:40.193
> 
> 标签：.net, cryptography, sha1, brute-force

我正在使用以下代码生成加密令牌：

```
var ticket = new System.Web.Security.FormsAuthenticationTicket(
    2, 
    "", 
    DateTime.Now, 
    DateTime.Now.AddMinutes(10), 
    false, 
    "user id here");
var cipherText = System.Web.Security.FormsAuthentication.Encrypt(ticket); 
```

此代码使用 app/web.config 中指定的密钥和算法：

```
<system.web>
    <machineKey validationKey="SOME KEY" 
                decryptionKey="SOME OTHER KEY" 
                validation="SHA1" />
</system.web> 
```

现在假设我将由此生成的密文提供给合作伙伴。他是否能够暴力破解：

1.  存储在密码中的值（不代表敏感信息的用户 id，它不会打扰我）
2.  用于创建密码的validationKey 和decryptionKey 的值（这将是灾难性的，因为他将能够生成令牌并冒充任何用户）

我想这两个问题的答案都是肯定的，但是他的机会有多现实，你认为给他密码会对我的系统构成安全威胁吗？提前感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T08:25:32.773

您在这里描述的是已知的明文攻击。攻击者学习明文和相应的密文，他的目标是找到密钥。现代密码旨在防止此类攻击。

事实上，任何现代密码都旨在抵御更强的攻击，例如选择明文攻击和选择密文攻击。即使允许攻击者选择明文和相应的密文，或者选择任意数量的密文并学习解密，那么他/她应该仍然无法学习密钥。

这使得设计新密码非常困难。但幸运的是，我们已经有了很好的密码，比如 AES。

我还应该补充一点，上述所有攻击都假设攻击者知道所使用密码的所有细节。他唯一不知道的是使用的钥匙。这就是众所周知的克尔霍夫原理。

# refactoring - 你如何处理冗余代码？

> ID：862142
> 
> 赞同：8
> 
> 时间：2009-05-14T08:14:59.007
> 
> 标签：refactoring

我有一个类，它是为不再需要的特定目的而编写的代码库项目的一部分。所以问题是你如何处理这样的代码？您是简单地删除它，还是牢记未来的开发人员可能会遇到它而没有意识到他们可以忽略它，或者您是否有某种存档系统，是否存在公认的“模式”？采用...

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-14T08:16:31.763

删除它。您以后可以随时从版本控制系统中取回它。你确实有版本控制，不是吗？

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-14T08:19:13.083

正如尼尔所说，删除它。如果我在您完成项目多年后被雇用来维护您的项目并且它仍然充满了死代码..我会困扰您。而不是 ooooohhhhh 好有点令人难以忘怀.. 但 ARRRRWWWGGGGGRRRR !!!!! 烦人的一种困扰。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-14T08:25:04.880

这取决于。

*   如果它因为过时而未被使用，我会通过删除它来从当前代码库中清除它。如果事实证明确实需要它，您可以随时从源代码管理中检索它。

*   如果它目前未使用，但可能在不久的将来使用，我会将它保留在当前代码库中，因为我不希望其他开发人员浏览源代码控制以防万一。换句话说：如果你删除了一些很有可能被使用的东西，很可能有人会重新实现它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T08:19:13.723

如果它没有在任何地方使用，并且不再需要，您应该删除它以避免混淆。

您没有说明您使用的是什么代码，但在 C#/VisualStudio 中，您可以使用 Obsolete 属性告诉其他开发人员不要使用该代码，您可以将 errors 参数设置为 true，这将在代码所在的任何位置中断构建正在使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T08:26:46.590

我将从使用[Obsolete](http://msdn.microsoft.com/en-us/library/system.obsoleteattribute.aspx)属性标记过时的代码元素开始。这样，您将能够找到引用过时元素的任何代码，从而为您提供更新这些部分的方法。当您不再收到任何使用过时代码的编译器警告时，请继续删除它。

更新：好的，现在我在考虑 .NET 和 C#，但我确信许多其他语言也有类似的功能......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T08:18:00.683

我尽量减少我的应用程序代码。库代码应该与许多版本兼容，然后将其删除或将其标记为已弃用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T08:20:50.943

我完全同意尼尔的观点。使用 SVN 或任何其他版本控制系统来跟踪您的代码并删除任何多余的内容。过多的注释代码只会使您的代码难以阅读，并且在某些情况下无法调试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-14T08:30:04.617

最好的选择是删除代码，以便您拥有一个更干净的存储库。大多数情况下，您删除一些具有潜在巨大价值的东西只是短期的感觉。如果其他程序员以后需要它，指望 svn 是行不通的。因为你必须知道之前存在的代码，然后一些必须通过svn扫描。如果我真的认为我想保留该代码，那么我通常会从文件中创建一个存档并将它们与描述一起添加到我们的 wiki 中，然后我删除代码。在维基的搜索中，有人可以找到代码。使用存档对其进行扫描，由于描述包含存储库和修订号，他们甚至可以轻松地恢复他们需要的部分。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-07-18T20:03:28.047

如果它很多、可重用和/或代码难以重现，我通常将它放入一个名为`<projectname>_rubbish.<ext>`. 不是很优雅，但我可以很容易地忽略它，并且当我再次需要它时也可以无缝地寻找它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-07-18T20:09:29.277

然后安装 GIT：

```
cd <code repo>
git init .
git add .
git commit -m 'inital import for my old code' 
```

...重构代码...

```
git add <path/to/file/with/changes/>
git commit -m 'that feels much better... :)' 
```

... 在 GitHub 上创建一个帐户或设置一个 GitServer

```
git remote add origin <remote git repo>
git push origin master 
```

你已经完成了...... :)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-29T05:44:05.380

只需将其删除。如果不再需要它，那么保留它就没有意义。

# delphi - GridPanel 在第一次调整大小时不调整

> ID：862146
> 
> 赞同：7
> 
> 时间：2009-05-14T08:15:50.410
> 
> 标签：delphi, resize, alignment, controls, tgridpanel

我有一个问题，即使我花了很长时间试图解决它，我也无法解决。

我通常使用 GridPanels 来对齐表单上的控件。但是，它有一个烦人的错误。当 GridPanel 对齐模式为 alClient 并且我最大化其父窗口时，GridPanel 会调整到该窗口的新大小，但是，放置在网格上的控件不会。它们保持在窗口调整大小之前的相同位置。它仅在第一个窗口最大化时发生。如果首先手动调整窗口大小，则一切正常。我认为网格会在第二个调整大小事件（??）之后调整其子控件。

如果遇到此错误，该怎么做才能使 GridPanel 正常工作？向它发送消息可能就足够了（但是什么消息？），我不知道。我尝试使用 Realign、Refresh 等，但它们没有帮助。

提前感谢您的帮助，

马吕斯。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T12:57:04.133

啊，我也遇到过类似的问题。这可能与 VCL 中的调整大小问题有关。您可能想尝试[Andreas Hausladen 的修复程序](http://cc.embarcadero.com/Item/25646)。在大多数情况下，它似乎对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-02T14:42:40.117

更改宽度/使控件无效对我不起作用（最近版本的 RAD Studio 发生了一些变化？）。

无论如何，沿着这条线的类似，简单的解决方法是：

```
procedure TForm1.FormResize(Sender: TObject);
begin
  GridPanel1.ControlCollection.BeginUpdate;
  GridPanel1.ControlCollection.EndUpdate;
end; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-09-02T09:17:14.233

我发现了一个窍门。

如果是`OnResize`gridpanel 的父级，则将 gridpanel 的宽度更改 1 个像素。

然后gridPanel会注意到大小发生了变化，然后重新排列gridpanel中的子控件..

样品在下面..

```
procedure TForm1.FormResize(Sender: TObject);
begin
  GridPanel1.Width := GridPanel1.Width - 1;  // subtract 1
  GridPanel1.Width := GridPanel1.Width + 1;  // recover width by adding 1
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T11:36:26.340

在几个项目中，我也遇到过这个错误。我不确定我是如何解决这个问题的（这是我以前雇主的项目，我无法再访问这个源代码了）。我想我已经重绘/刷新了放置 GridPanel 的父框架或表单。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-14T12:16:39.737

在所有者调用 GridPanel.Invalidate 的大小调整上。我没有测试它。我希望它的工作。

# .net - 如何告诉我的 ASP.NET 应用程序使用任何版本的强命名程序集？

> ID：862150
> 
> 赞同：2
> 
> 时间：2009-05-14T08:16:50.717
> 
> 标签：.net, asp.net, strongname

我有一个使用自定义 .NET 库（一个 .DLL 文件）的 ASP.NET 应用程序。该 .DLL 文件是强命名的。该库有频繁的小更新，我希望能够在不重新编译应用程序的情况下更新这个 .DLL。必须预编译该应用程序，因为我不想将它的源代码提供给我的客户（不是说它不能被反编译，但这不是重点）。

这可以以某种方式完成吗？目前我只是收到一个错误，即 .DLL 的版本错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T08:37:12.027

您可以为他们提供更新的配置文件以使用新的 dll。此配置需要有一个自定义版本策略，将请求从一个 dll 重定向到另一个。有关更多信息，请参阅[本文](http://quickstart.developerfusion.co.uk/quickstart/howto/doc/version.aspx)。

* * *

实际上[这篇文章](http://aspalliance.com/1098_DLL_Hell_and_Version_Policy.1)有更多关于整个过程的信息，以及您可以定义版本策略的不同级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T08:41:14.170

您可以使用反射在运行时动态加载程序集。Activator.CreateInstance 应该可以解决问题。

```
IMyInterface myObject = (IMyInterface)Activator.CreateInstance( "TheAssemblyName",
                                            "TheTypeName",
                                            null ) 
```

如果您使用的是 .Net 3.5，则可以使用插件和可扩展性。看看这里：http: [//msdn.microsoft.com/en-us/library/bb384241.aspx](http://msdn.microsoft.com/en-us/library/bb384241.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T10:04:32.410

也许你可以把强类型的dll放在gac中，最后做dll版本控制，这样旧版本总是可用的，新的只会被新编译的应用程序使用，旧的应用程序将使用它们的旧dll版本，直到它们被再次编译和部署。

希望这可能会有所帮助。

# python - 给定python中的条件，获取唯一的列表/元组元素

> ID：862158
> 
> 赞同：2
> 
> 时间：2009-05-14T08:18:22.993
> 
> 标签：python, list, tuples, conditional-statements

python - 如何在给定条件的python中获取元组/列表元素？这经常发生，我正在寻找一种很好的几行pythonic方式来做到这一点。

这里可能是一个例子：

考虑一个包含二维点坐标的元组，如下所示：

```
points = [[x1, y1],[x2, y2],[x3, y3], ...] 
```

而且我想得到**一个**点，在给定任意点的情况下最小化欧几里得距离（例如，[X，Y]，我的观点是：它不包含在列表中！）

```
def dist(p1, p2):
    return sqrt((p2[0]-p1[0])**2+(p2[1]-p1[1])**2)
pointToCompare2 = [X, Y] 
```

任何人都有一个怪异的班轮（或没有）吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-14T08:27:07.433

```
min(points, key=lambda x: dist(pointToCompare2, x)) 
```

[min 是一个内置函数](http://docs.python.org/library/functions.html#min)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T12:44:11.687

```
v = [1,3,2,4,7,3,3,4,5,11]

def get_num_uniques(v):
    count = []
    dup = []
tmp = []
for i in v:
    if i not in count:
        count.append(i)
    else:
        dup.append(i)
        count.remove(i)
for j in count:
    if j not in dup:
        tmp.append(j)

return tmp

#Call the function
print get_num_uniques(v) 
```

# ajax - 当同时触发超过 4 个异步 XmlHttpRequest 时，IE8 挂起

> ID：862166
> 
> 赞同：3
> 
> 时间：2009-05-14T08:19:53.223
> 
> 标签：ajax, internet-explorer, internet-explorer-8, xmlhttprequest

```
for (var i = 0; i < 5; ++i) {
  var xhr;
  if (window.XMLHttpRequest) {
    xhr = new XMLHttpRequest();
  } else if (window.ActiveXObject) {
    xhr = new ActiveXObject("Msxml2.XMLHTTP");
  }
  xhr.open('GET', '/Test/LongOperation?p=' + new Date());
  xhr.send('');
} 
```

这只是一个演示（不是实时代码），但它说明了核心问题。 `LongOperation`是一种在 10 秒后返回结果的方法。

问题：

1.  为什么在执行上述代码片段后，当用户试图离开页面时，IE8（可能还有其他 IE）会挂起？FireFox/Safari 取消这些请求并允许导航到另一个页面。如果替换`'i < 5'`为，`'i < 4'`则 IE 将不会挂起。

2.  如何解决这种丑陋的 IE 行为？当他们的浏览器突然挂起时，用户非常沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T08:25:50.087

大多数浏览器对任何给定服务器的连接限制为 4 个。解决此“问题”的一种方法可能是对带外 XML 请求使用不同的主机名 - 您的用户请求将发送到主主机，而 AJAX 请求可以发送到第二个服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T15:37:37.047

我对我的问题的回答。我中止了 window.onbeforeunload 中所有未完成的 xhr 对象。至少这个解决方案对我有用。我稍微覆盖了 $.ajax() 方法的行为：

```
;(function($) {
    var rq = [];
    var ajax = $.ajax;
    $.ajax = function(settings) {
        // override complete() operation
        var complete = settings.complete;
        settings.complete = function(xhr) {
            if (xhr) {
                // xhr may be undefined, for example when downloading JavaScript
                for (var i = 0, len = rq.length; i < len; ++i) {
                    if (rq[i] == xhr) {
                        // drop completed xhr from list
                        rq.splice(i, 1);
                        break;
                    }
                }
            }
            // execute base
            if (complete) {
                complete.apply(this, arguments)
            }
        }

        var r = ajax.apply(this, arguments);
        if (r) {
            // r may be undefined, for example when downloading JavaScript
            rq.push(r);
        }
        return r;
    };

    // 'kill' all pending xhrs
    $(window).bind('beforeunload', function() {
        $.each(rq, function(i, xhr) {
            try {
                xhr.abort();
            } catch(e) {
                $debug.fail('failed to abort xhr');
            }
        });
        rq = [];
    });
})(jQuery); 
```

$debug - 我的实用程序类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T08:30:14.117

尝试异步运行它们，然后在每个完成时触发下一个 http 请求。我怀疑 xmlhttp 请求阻塞了 IE 的 UI 线程，而在其他浏览器上的实现更优雅一些。

希望这将为您提供问题 2 的解决方法，但我只能猜测问题 1 的真正原因，它可能只是一个错误。

# maven-2 - 在 Maven 下运行一个 groovy 应用程序

> ID：862169
> 
> 赞同：0
> 
> 时间：2009-05-14T08:20:32.363
> 
> 标签：maven-2, memory-leaks, groovy

我们开发了一个 Groovy 应用程序。正在开发中启动它，我们使用以下命令行

```
 C:\myapp>mvn grails:run-app 
```

无需向服务器发送任何请求，就可以看到 java 进程使用的内存是如何增加和增加的。当它从大约 100M 开始分配时，几个小时后 - 什么都不做 - 内存上升到 300M。

当我直接启动应用程序时

```
C:\myapp> grails run-app 
```

内存消耗有所不同，没有发送任何请求，它以某种方式稳定在 110M。有时上升，有时下降。

虽然 300M 并不重要，但我想知道这是否是内存泄漏。

有没有人有类似行为？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-18T07:56:51.833

这可能是 Maven 中的内存泄漏，但更可能是 grails:run-app 命令中的泄漏。我建议将其发布在 Grails 开发邮件列表上。

为什么这与您有关？您应该只将这些命令用于开发，而不是生产，因为您将在生产中部署 war 文件。如果您只是关心，Grails 开发邮件列表绝对是这样的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T00:58:01.553

我怀疑这里有内存泄漏。

JVM 等待执行完整的 GC 直到它必须执行是完全正常的。这意味着如果您分配更多内存，您的 java/groovy 进程将愉快地使用它。

很可能您对 Maven 和 Grails 有不同的默认内存设置。我不确定这些属性是如何在 Windows 中设置的，但它们看起来像：

GRAILS_OPTS="-Xms100m -Xmx110m"

MAVEN_OPTS="-Xms100m -Xmx300m"

# python - 如何以“更智能”的方式使用 python 下载文件？

> ID：862173
> 
> 赞同：68
> 
> 时间：2009-05-14T08:21:42.673
> 
> 标签：python, http, download

我需要在 Python 中通过 http 下载几个文件。

最明显的方法就是使用 urllib2：

```
import urllib2
u = urllib2.urlopen('http://server.com/file.html')
localFile = open('file.html', 'w')
localFile.write(u.read())
localFile.close() 
```

但我将不得不以某种方式处理令人讨厌的 URL，比如这样说：`http://server.com/!Run.aspx/someoddtext/somemore?id=121&m=pdf`. 当通过浏览器下载时，该文件有一个人类可读的名称，即。`accounts.pdf`.

有没有办法在 python 中处理它，所以我不需要知道文件名并将它们硬编码到我的脚本中？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-05-14T08:28:43.887

下载这样的脚本往往会推送一个标题，告诉用户代理如何命名文件：

```
Content-Disposition: attachment; filename="the filename.ext" 
```

如果您可以获取该标题，则可以获得正确的文件名。

还有[另一个线程](https://stackoverflow.com/questions/163009/urllib2-file-name)有一些代码可供`Content-Disposition`抓取。

```
remotefile = urllib2.urlopen('http://example.com/somefile.zip')
remotefile.info()['Content-Disposition'] 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-05-14T12:23:12.030

根据评论和@Oli's anwser，我提出了这样的解决方案：

```
from os.path import basename
from urlparse import urlsplit

def url2name(url):
    return basename(urlsplit(url)[2])

def download(url, localFileName = None):
    localName = url2name(url)
    req = urllib2.Request(url)
    r = urllib2.urlopen(req)
    if r.info().has_key('Content-Disposition'):
        # If the response has Content-Disposition, we take file name from it
        localName = r.info()['Content-Disposition'].split('filename=')[1]
        if localName[0] == '"' or localName[0] == "'":
            localName = localName[1:-1]
    elif r.url != url: 
        # if we were redirected, the real file name we take from the final URL
        localName = url2name(r.url)
    if localFileName: 
        # we can force to save the file as specified name
        localName = localFileName
    f = open(localName, 'wb')
    f.write(r.read())
    f.close() 
```

它从 Content-Disposition 中获取文件名；如果不存在，则使用 URL 中的文件名（如果发生重定向，则考虑最终 URL）。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2010-01-14T19:54:30.340

结合上述大部分内容，这是一个更 Pythonic 的解决方案：

```
import urllib2
import shutil
import urlparse
import os

def download(url, fileName=None):
    def getFileName(url,openUrl):
        if 'Content-Disposition' in openUrl.info():
            # If the response has Content-Disposition, try to get filename from it
            cd = dict(map(
                lambda x: x.strip().split('=') if '=' in x else (x.strip(),''),
                openUrl.info()['Content-Disposition'].split(';')))
            if 'filename' in cd:
                filename = cd['filename'].strip("\"'")
                if filename: return filename
        # if no filename was found above, parse it out of the final URL.
        return os.path.basename(urlparse.urlsplit(openUrl.url)[2])

    r = urllib2.urlopen(urllib2.Request(url))
    try:
        fileName = fileName or getFileName(url,r)
        with open(fileName, 'wb') as f:
            shutil.copyfileobj(r,f)
    finally:
        r.close() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-23T21:12:58.247

**2肯德**：

```
if localName[0] == '"' or localName[0] == "'":
    localName = localName[1:-1] 
```

这是不安全的——Web 服务器可以将错误的格式名称传递为 ["file.ext] 或 [file.ext'] 甚至为空并且**localName[0]**会引发异常。正确的代码可以如下所示：

```
localName = localName.replace('"', '').replace("'", "")
if localName == '':
    localName = SOME_DEFAULT_FILE_NAME 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-19T12:37:58.160

使用`wget`：

```
custom_file_name = "/custom/path/custom_name.ext"
wget.download(url, custom_file_name) 
```

使用 urlretrieve：

```
urllib.urlretrieve(url, custom_file_name) 
```

如果不存在，urlretrieve 也会创建目录结构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-30T17:26:52.323

您需要查看`'Content-Disposition'`标题，请参阅 kender 的解决方案。

如何以“更智能”的方式使用 python 下载文件？

发布具有指定输出文件夹功能的修改解决方案：

```
from os.path import basename
import os
from urllib.parse import urlsplit
import urllib.request

def url2name(url):
    return basename(urlsplit(url)[2])

def download(url, out_path):
    localName = url2name(url)
    req = urllib.request.Request(url)
    r = urllib.request.urlopen(req)
    if r.info().has_key('Content-Disposition'):
        # If the response has Content-Disposition, we take file name from it
        localName = r.info()['Content-Disposition'].split('filename=')[1]
        if localName[0] == '"' or localName[0] == "'":
            localName = localName[1:-1]
    elif r.url != url: 
        # if we were redirected, the real file name we take from the final URL
        localName = url2name(r.url)

    localName = os.path.join(out_path, localName)
    f = open(localName, 'wb')
    f.write(r.read())
    f.close()

download("https://example.com/demofile", '/home/username/tmp') 
```

我刚刚更新了 kender for python3 的答案

# transparency - 谷歌图表：透明度不起作用？

> ID：862174
> 
> 赞同：6
> 
> 时间：2009-05-14T08:22:08.943
> 
> 标签：transparency, google-visualization

我正在尝试制作一个透明的谷歌图表，但它似乎不起作用。它只是绘制一个纯白色背景。

有人成功实现了透明度吗？难道我做错了什么？

提前致谢！

关于谷歌图表的信息：[实心填充](http://code.google.com/intl/ca/apis/chart/colors.html#solid_fill)

测试网址： [Google-charts 示例](http://chart.apis.google.com/chart?20%2C25=&chco=ff0000%2C00ff00&chd=t%3A4%2C4%2C4%2C4%2C4%2C4%2C4|10%2C0%2C30%2C0%2C10%2C0%2C0&chdl=puntuaci%C3%B3%20m%C3%A0xima|puntuaci%C3%B3%20obtinguda&chdlp=t&chf=a%2Cs%2CEFEFEFFF&chm=o%2C00ff00%2C1%2C0%2C7|o%2C00ff00%2C1%2C1%2C7|o%2C00ff00%2C1%2C2%2C7|o%2C00ff00%2C1%2C3%2C7|o%2C00ff00%2C1%2C4%2C7|o%2C00ff00%2C1%2C5%2C7|o%2C00ff00%2C1%2C6%2C7&chs=692x432&cht=lc&chxl=0%3A|A|B|C|D|E|F|G&chxr=1%2C0%2C4%2C1&chxt=x%2Cy)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-14T08:56:44.943

对于透明背景，使用 chf=bg,s,FFFFFF00

例子： ![](https://chart.apis.google.com/chart?cht=lc&chd=s:pqokeYONOMEBAKPOQVTXZdecaZcglprqxuux393ztpoonkeggjp&chco=FF0000&chls=4.0,3.0,0.0&chs=200x125&chxt=x,y&chxl=0:|Jun|July|Aug|1:||20|30|40|50&chf=bg,s,EFEFEF00)

# java - 如何确保 JVM 以 Xms 的值启动

> ID：862176
> 
> 赞同：3
> 
> 时间：2009-05-14T08:23:45.443
> 
> 标签：java, garbage-collection, jvm, heap-memory

当我运行一个起始堆大小为 3G（由 -Xms3072m VM 参数设置）的 java 程序时，JVM 不会以该大小开始。它从 400m 左右开始，然后根据需要不断获取更多内存。

这对我来说是一个严重的问题。我知道 JVM 会在一段时间后需要上述数量。当JVM根据需要增加它的内存时，它就会变慢。在 JVM 获取更多内存期间，大量时间用于垃圾收集。而且我认为内存获取是一项昂贵的任务。

如何确保 JVM 实际上尊重起始堆大小参数？

**更新：**这个应用程序创建了很多对象，其中大部分很快就死掉了。一些生成的对象需要保留在内存中（从年轻堆中转移出来）。在此操作期间，所有这些对象都需要在内存中。运行后，可以看到young heap中的所有对象都被认领成功了。所以没有内存泄漏。

当堆大小达到 3G 时，同样的操作可以顺利运行。这清楚地表明需要额外的时间用于获取内存。

这个 Sun JDK 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T21:56:02.577

如果我没记错的话，Java 会尝试从操作系统获取内存预留。因此，如果您要求 3 GB 作为 Xms，Java 会询问操作系统，如果这可用但不是立即从所有内存开始......它甚至可能保留它（而不是分配它）。但这些都是细节。

通常，JVM 在开始严重的老年代垃圾收集之前会运行到 Xms 大小。年轻代 GC 一直在运行。通常 GC 仅在老一代 GC 运行且 VM 介于 Xms 和 Xmx 之间时才明显，或者，如果您将其设置为相同的值，则大致达到 Xmx。

如果您需要大量内存来存储短期对象，请通过将年轻区域设置为...来增加该内存区域...假设 1 GB **-XX:NewSize=1g**因为从年轻“桶”中移动“垃圾”成本很高“进入老一代。因为万一它还没有变成真正的垃圾，JVM 会检查垃圾，找不到任何垃圾，在幸存者空间之间复制它，最后移动到老一代。因此，当您知道自己没有任何垃圾并以某种方式推迟时，请尝试抑制对年轻一代的垃圾检查...

试试看！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T08:39:22.927

我相信您的问题不是来自您的想法。

看起来最让您付出代价的是 GC 周期，而不是堆大小的分配。如果您确实在创建和删除大量对象。

你应该把精力集中在分析上，找出究竟是什么让你付出了这么多，并努力重构它。

我的预感——对象创建和删除，以及 GC 循环。

在任何情况下，`-Xms`都应该设置最小堆大小（如果不是 Sun **，请与您的 JVM 一起检查）。**仔细检查以了解您认为不是这种情况的确切原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T09:06:12.580

我使用了 sun 的 vm 并从最低设置为 14 gigs 开始，它确实从那开始。也许你应该尝试将 xms 和 xmx 值设置为相同的 amt，即试试这个 - -Xms3072m -Xmx3072m

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T09:07:52.903

为什么你认为堆分配不正确？使用任何仅显示 400m 的操作系统工具并不意味着它没有被分配。

我真的不明白你在追求什么。400m 及以上是否已经成为问题，或者您的程序应该需要那么多？如果您确实需要处理这么多内存，并且您似乎需要很多对象，那么您可以做几件事：

如果内存消耗与您的直觉不匹配，那么它可能是正确的数量，而不是您可能正在泄漏内存。这可以解释为什么它会随着时间的推移而“减速”。也许您错过了从一个结构中删除对象，这样它们就不会被垃圾收集，并且会减慢查找速度等。

您的内存设置本身可能就是问题所在。垃圾收集本身不运行。只有在达到某个阈值时才会调用它。如果你给它一个大的堆设置并且你的操作系统有足够的内存，那么垃圾收集不会经常运行。

您提到的特征将是创建大量对象并在它们再次被删除后不久的情况。否则垃圾收集不会成为问题（某种分代 gc）。这意味着你只有“年轻”的对象。如果您仅在短时间内需要对象，请考虑使用对象池。那将完全消除垃圾收集。

如果您知道代码中有运行 gc 的好时机，您可以考虑手动运行它以查看它是否会改变任何内容。这就是你需要的

```
 Runtime r = Runtime.getRuntime();
  r.gc(); 
```

这仅用于调试目的。gc 在大多数情况下都做得很好，因此不需要您自己调用 gc。

# compact-framework - 当我在 Windows CE 4.1 模拟器中启动调试会话时出现烦人的消息

> ID：862186
> 
> 赞同：1
> 
> 时间：2009-05-14T08:25:57.547
> 
> 标签：compact-framework, windows-ce, emulation, visual-studio-2003

我必须在 Visual Studio 2003 中维护一个为 Windows CE 4.1 编写的旧 Compact Framework 应用程序（叹气！）。它是 Visual Studio 2003 的德语本地化版本。

每次我在 WinCE 模拟器中启动调试会话时，我都会在虚拟设备上收到以下消息：

> “Microsoft .NET CF 1.0 DE-String ist bereits installiert. Möchten Sie erneut installieren?”

翻译成英文的意思是：

> “Microsoft .NET CF 1.0 DE-String 已安装。您要重新安装吗？”

单击“确定”后，应用程序运行正常，但每次测试应用程序时单击此按钮非常烦人。有解决方案吗？

*谢谢！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-16T12:40:18.133

您希望在部署时关闭将紧凑框架部署到移动设备。您可以在设备选项卡上的项目属性菜单中关闭此选项，以防止每次发生这种情况。

# ms-access - 密码保护 MS Access 2003 数据库使用什么加密方法（算法）？

> ID：862187
> 
> 赞同：1
> 
> 时间：2009-05-14T08:26:19.790
> 
> 标签：ms-access, encryption

我的应用程序使用 MS 访问数据库来保存一些敏感信息。尽管该信息本身是受保护的，但我需要让客户相信，还有另一堵数据库加密墙，必须首先破解强密码。

您知道使用哪种加密算法/方法来加密访问数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T09:00:34.000

对于**Access 2003**，有一些关于加密的选项。您可能会在“加密类型”对话框中找到一些可能的加密类型：

*   弱加密 (XOR)
    *不推荐，仅针对旧文件提供*
*   兼容 Office 97/2000
    *不推荐，仅适用于旧文件*
*   RC4, Microsoft Base Cryptographic Provider v1.0
*   RC4、Microsoft Base DSS 和 Diffie-Hellman 加密提供程序
*   RC4，Microsoft DH SChannel 加密提供程序
*   RC4，微软增强加密提供程序 v1.0
*   RC4、Microsoft 增强型 DSS 和 Diffie-Hellman 加密提供程序
*   RC4、Microsoft 增强的 RSA 和 AES 加密提供程序（原型）
*   RC4，Microsoft RSA SChannel 加密提供程序
*   RC4，微软强加密提供程序

来源：[密码和加密保护的重要方面](http://office.microsoft.com/en-us/ork2003/HA011403111033.aspx)

* * *

如果您使用的是 Access 2007，这里有一篇很好的文章，您可以将其用作参考：

[加密 Access 数据库](http://databases.about.com/od/productinfo/a/encryption.htm)

> **Access 2007 使用什么类型的加密？**
> 
> Access 2007 使用 Microsoft 加密 API。这意味着它将支持 Windows 中作为加密服务提供程序 (CSP) 可用的任何加密算法。这是对 Access 早期版本的巨大改进，早期版本仅支持内置的弱加密算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T09:40:28.350

> 我需要让客户相信，还有另一堵数据库加密墙，必须先破解强密码。

我不认为你可以，因为密码保护很弱。所以...

> 该信息本身受到保护

...您如何自己保护信息（加密？）可能是您唯一的防线。

此外，请考虑升级到 Access2007，它的数据库加密更强（尽管已删除用户级安全性）。

编辑：我仍在寻找圣杯，作为 Jet 引擎的文档。关于 Access2007 引擎更改的一大优点是，Access 团队透露了一些关于旧引擎的细节，在“新的比旧的更好，因为......”的背景下，他们没有这样做并不奇怪。直到他们修复它之后才公开宣布加密很弱！[您将在Microsoft Access 团队博客：Access 12 安全模型](http://blogs.msdn.com/access/archive/2005/10/19/access-12-security-model.aspx)中找到一些详细信息。

另一个链接： [Microsoft Access 2002 技术文章：探索 Microsoft Access 安全](http://msdn.microsoft.com/en-us/library/aa139961(office.10).aspx) 性“Jet（Access 使用的数据库引擎）使用非常弱的加密方法，永远不应该用于保护敏感数据。”

最后一个： [Jet MDB 安全性 - 底层](http://www.everythingaccess.com/tutorials.asp?ID=Jet-MDB-security---under-the-hood) 简单数据库密码：数据库密码在设置后会使用基于文件创建日期/时间（存储在文件中）的简单 XOR 模式算法进行混淆，然后将其存储在 MDB 中文件头....MDB 文件头本身被 XOR 模式进一步混淆——尽管这次它是一个恒定的 XOR 流。（考虑到它们的简单程度，我将这些 XOR 加密算法描述为混淆而不是加密）。当您打开 MDB 文件时，系统会提示您输入密码，然后 Jet 可以轻松解码原始密码以检查它是否与输入的密码完全匹配。

易于设置。

缺点 密码很容易检索，因为它有效地以纯文本形式存储（非常简单的混淆）。

# c# - 在部分 LINQ to SQL 实体类上实现 IDisposable

> ID：862190
> 
> 赞同：1
> 
> 时间：2009-05-14T08:26:59.150
> 
> 标签：c#, linq-to-sql, garbage-collection, partial-classes

我正在使用部分类将 LINQ 扩展到 SQL 实体类，我想知道如何最好地将实体对象上的某些属性重置为默认状态。

我的部分课程不使用非托管资源。据我所知；LINQ to SQL 实体类也没有。所以我想我将`IDisposable`在`Dispose()`.

*   您对这种方法有何看法？
*   您会将之前提到的属性设置为`null`或其他内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T08:34:33.187

无论好坏，`IDisposable`几乎普遍与*完成*资源而不是重置它有关。这对我来说听起来很奇怪。我只想创建一个`Reset()`方法 - 或者在需要时创建一个新实例。这样做的目的是什么？你想达到什么目的？

至于“抑制 [ing] GC 上的实例” - 你到底是什么意思？如果您在谈论终结器，我会在添加终结器之前仔细考虑 - 这很少是正确的方法*。*

# windows - 文件系统测试工具

> ID：862192
> 
> 赞同：4
> 
> 时间：2009-05-14T08:27:15.203
> 
> 标签：windows, linux, macos, filesystems

我们正在开发文件系统过滤器，我们需要在我们所针对的所有平台（Windows、OS X、Linux）上自动化测试。您会推荐哪些工具来检查特定挂载的文件系统是否正常运行。

这里“正确”一词可能需要澄清一下：由于我们正在开发过滤器（不是新文件系统），因此行为应该与底层文件系统（NTFS、HFS+、XFS）相同。因此，这些工具不仅需要检查基本操作（打开/读/写/关闭/dir），还需要检查操作系统和文件系统的特定功能，例如 HFS 上的资源分叉、NTFS 上的流、安全属性等。

在此先感谢，KIV

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T21:23:19.830

[`fsx`](http://www.codemonkey.org.uk/projects/fsx/)“文件系统练习器”是众所周知的文件系统压力测试。 [LTP](http://ltp.sourceforge.net/) “Linux 测试项目”有更多测试，其中一些还测试文件系统。

除了[xfstests](http://oss.sgi.com/cgi-bin/cvsweb.cgi/xfs-cmds/xfstests/)之外，我看不到任何行使特定文件系统功能的东西。 [diskdev_cmds](http://src.gnu-darwin.org/DarwinSourceArchive/expanded/diskdev_cmds/)（包含 Apple 的文件系统实用程序）没有任何测试。 [`NetBSD/src/tests/fs/ffs`](http://browse.netbsd.se/?dir=./files/NetBSD/NetBSD-current/src/tests/fs/ffs)几乎是空的。 [e2fsprogs](http://git.kernel.org/?p=fs/ext2/e2fsprogs.git;a=summary)包含一堆坏磁盘映像，但没有特殊测试。

哎呀，`ext[2-4]`有`ffs`任何“特殊功能”吗？ `xfstests`确实锻炼了诸如预分配之类的功能，但是这些天可以移植到其他文件系统。

我只是`fsx`根据需要破解一些东西。那里没有*那么*多“特殊功能”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:30:01.060

我建议 LTP（Linux 测试项目），我已经了解如何从那里测试 NFS，包括工具

**功能级别测试：** IOZone、FSX、FSStress、ConnectAthon04、

**协议级别测试：** Pynfs、NewPynfs

另外我建议您阅读[NFS V4 测试报告，](http://nfsv4.bullopensource.org/doc/OLS06/NFSv4_test_project.pdf)其中详细解释了测试方面和方法。

最后，我不确定LTP是否有EXT2，EXT3测试，它也应该是一个参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T01:14:24.953

对于 OS X，我会看[Backup Bouncer](http://www.n8gray.org/code/backup-bouncer/)。这不是您想要的——它旨在测试备份系统，以查看它们是否保留所有类型的文件元数据以及 OS X 支持的内容。但是您可以找到一个[得分为 100% 的备份程序](http://www.bombich.com/mactips/rsync.html)，并查看它在运行过滤器时是否仍得分为 100%...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-14T21:37:59.350

用于 Unix 平台上的 NTFS 驱动程序的开源项目[NTFS-3G](http://www.ntfs-3g.org/index.html)开发了一个[POSIX 文件系统测试套件](http://www.ntfs-3g.org/pjd-fstest.html)来检查这些平台上不同文件系统的 POSIX 合规性，并针对不同的命令进行了 3000 多个回归测试。

# python - Txt 文件解析以获取 .o 文件名列表

> ID：862203
> 
> 赞同：0
> 
> 时间：2009-05-14T08:30:49.217
> 
> 标签：python, parsing

我有一个 txt 文件，例如：

测试.txt

```
Symbols from __ctype_tab.o:

Name                  Value   Class        Type         Size     Line  Section

__ctype             |00000000|   D  |            OBJECT|00000004|     |.data
__ctype_tab         |00000000|   r  |            OBJECT|00000101|     |.rodata

Symbols from _ashldi3.o:

Name                  Value   Class        Type         Size     Line  Section

__ashldi3           |00000000|   T  |              FUNC|00000050|     |.text

Symbols from _ashrdi3.o:

Name                  Value   Class        Type         Size     Line  Section

__ashrdi3           |00000000|   T  |              FUNC|00000058|     |.text

Symbols from _fixdfdi.o:

Name                  Value   Class        Type         Size     Line  Section

__fixdfdi           |00000000|   T  |              FUNC|0000004c|     |.text
__fixunsdfdi        |        |   U  |            NOTYPE|        |     |*UND*

Symbols from _fixsfdi.o:

Name                  Value   Class        Type         Size     Line  Section

__fixsfdi           |00000000|   T  |              FUNC|0000004c|     |.text
__fixunssfdi        |        |   U  |            NOTYPE|        |     |*UND*

Symbols from _fixunssfdi.o:

Name                  Value   Class        Type         Size     Line  Section

__cmpdi2            |        |   U  |            NOTYPE|        |     |*UND*
__fixunssfdi        |00000000|   T  |              FUNC|00000228|     |.text
__floatdidf         |        |   U  |            NOTYPE|        |     |*UND* 
```

我想要做的是，我将得到一个类型为 NOTYPE 的函数。我需要搜索 txt 并找到它是在哪个 .o 下定义的（即；使用 FUNC 类型）。当我得到 .o 文件时，我可能会看到其他函数为 NOTYPE。然后我必须搜索那些定义的地方。它继续。最后，我想返回包含函数的所有 .o 文件的名称列表。

我的一段代码：

```
notypeDict , funcDict  = {} , {}
notypeList , funcList = [] , []
currObj , prevObj = '' , ''

fp = open(r'C:\test.txt','r') # file path cms here
fileList = fp.readlines()

for line in fileList:
    if '.o' in line:    # line containg .o
        currObj=line.split()[-1][0:-1]        
    if '|' not in line: # line containg |
        pass
    else:   # other lines
        dataList=[dataItem.strip()  for dataItem in line.strip().split('|')]    # a list of each word in line
        name=dataList[0].strip()    # name of the function
        notypeDict[prevObj] = notypeList    #   notypeDict is a dictionary which contains .o as key and a list of NOTYPE function name 
        funcDict[prevObj] = funcList    # funcDict is a dictionary which contains .o as key and a list of FUNC function names

        if prevObj == currObj :
            pass
        if prevObj != currObj :       
            notypeList , funcList = [] , []

        if dataList[3] == 'NOTYPE' :                
            notypeList.append(name)
        if dataList[3] == 'FUNC' :
            funcList.append(name)

        prevObj = currObj    

print 'notypeDict' , notypeDict
print '\n\nfuncDict' , funcDict 
```

这里我会得到两个字典，notypeDict 和 funcDict。

notypeDict 将 .o 作为键，将 NOTYPE 函数列表作为值 funcDict 将 .o 作为键，将 FUNC 函数列表作为值。

**我一直到这里。**

但是不知道如何继续实现我的目标。

我想我的问题很清楚。

**请帮帮我。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T10:28:12.323

您认为以下内容有什么作用？

```
 if '.o' in line:    # line containg .o
        currObj=line.split()[-1][0:-1]        
   if '|' not in line: # line containg |
        pass
   else:   # other lines 
```

它是否找到带有 '.o' 或 '|' 的行 或其他？

不。实际上，它没有。

它查找包含“.o”的行。并与他们一起做某事。

然后它再次检查该行是否有“|” 或其他”。你所有的 '.o' 行都被处理了两次。

一次作为“.o”，然后再次作为“非|”。

您可能的意思是`elif`，而不是`if`.

* * *

这段代码

```
 if prevObj == currObj :
        pass
    if prevObj != currObj :       
        notypeList , funcList = [] , [] 
```

比它需要的要复杂得多。*本身*不会造成问题，但看起来很傻。

* * *

这段代码

```
 if dataList[3] == 'NOTYPE' :                
        notypeList.append(name)
    if dataList[3] == 'FUNC' :
        funcList.append(name) 
```

可能是好的。但是，它看起来很糟糕，因为条件是排他性的，并且看起来会更好`elif`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T09:28:52.247

我会使用带有捕获组的正则表达式来处理文件中不同类型的有趣行；我会逐行浏览文件，当我发现一个有趣的行（即匹配正则表达式）时，我会适当地处理从正则表达式捕获的数据。

建立字典等后，根据数据回答问题很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T12:23:14.293

这段代码呢？它基于您的两本词典。只要打电话`find_dep_for_func(notype_funcname)`。

```
def find_ofile(funcname):
    """This will find .o file for given function."""
    for ofile, fns in funcDict.iteritems():
        if funcname in fns:
            return ofile                
    raise Exception("Cannot find function "+funcname)

def find_dependencies(ofile, deps = None):
    """This will find dependent .o files for given .o file."""
    olist = deps if deps else set([])
    for fn in notypeDict[ofile]:
        ofile = find_ofile(fn)
        if not ofile in olist:
            olist.add(ofile)
            olist = find_dependencies(ofile, olist)
    return olist

def find_dep_for_func(notype_funcname):
    return find_dependencies(find_ofile(funcname)) 
```

# c# - 对于不成功的 TryXX() 方法，应该将 out 值设置为什么？

> ID：862207
> 
> 赞同：2
> 
> 时间：2009-05-14T08:32:20.493
> 
> 标签：c#, .net, tryparse

我正在实现一个 TryParse(string s, Out object result) 方法。如果解析失败，我不想触及 out 参数，因此任何先前的结果都将保持不变。但是VS2k8不会让我。无论如何，我都必须设置 out 对象的值。

为了取悦编译器，我应该只放 result = result 吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-14T08:34:06.917

分配 null （或更一般的 default(T) ）。您必须分配一个值，这就是“出”的意思。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-14T08:36:47.143

您的建议`result = result`不起作用，因为它是一个参数 - 它并不是从一开始就明确分配的，因此在您为其分配值之前，*您*`out`无法读取它的值。

 *```
result = null; 
```

绝对是获取`object`out 参数的正确方法。基本上用于您拥有`default(T)`的任何类型。`T`（该`default`运算符在泛型方法中很有用——对于非泛型代码，我通常只使用`null`, 0 等。）

编辑：根据鲍里斯的评论，可能值得详细说明`ref`参数和`out`参数之间的区别：

**输出参数**

*   *不必*由调用者明确指定
*   在方法开始时被视为“未明确分配”（如果不先分配就无法读取值，就像局部变量一样）
*   必须在方法正常终止之前（即在它返回之前；它可以在不给参数赋值的情况下抛出异常）明确地分配（由方法）

**参考参数**

*   *必须*由调用者明确指定
*   在方法开始时被视为“明确分配”（因此您可以在不先分配的情况下读取值）
*   不必在方法内赋值（即您可以保留参数的原始值）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T08:34:00.740

```
result = null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T08:34:45.840

只需输入一些默认值。例如 Int32.TryParse 方法置零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T08:45:23.973

You could use ref instead of out if you don't want to assign a value, although this must then be initialised by the caller.

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-05-14T08:39:38.073

您可以在应该设置结果的代码之前抛出异常。

# wpf - WPF：如何在弹出窗口中淡入和缩放用户控件

> ID：862208
> 
> 赞同：2
> 
> 时间：2009-05-14T08:33:29.227
> 
> 标签：wpf, animation, fade, scale

我有一个用户控件，我想在用户单击按钮时显示该控件。这不是问题，使用 af Popup 控件。

但是，我想让用户控制淡入并同时从 0.5 缩放到 1.2 并返回到 1.0（X 和 Y）。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-03-22T00:38:21.103

WPF 弹出窗口不透明，因此淡入淡出不会真正起作用。您可以根据需要设置不透明度，但这不会改变任何事情。但是，您可以使用工具提示。它非常接近弹出窗口。无论如何，这里有一些东西可以让你开始：

```
<UserControl x:Class="WpfApplication1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<UserControl.Style>
    <Style>
        <Style.Triggers>
            <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetProperty="Opacity" Duration="00:00:02" From="0" To="1" />
                    </Storyboard>
                </BeginStoryboard>                  
            </EventTrigger>
            <Trigger Property="FrameworkElement.Visibility" Value="Collapsed">
                <Setter Property="FrameworkElement.Opacity" Value="0"/>             
            </Trigger>
        </Style.Triggers>
    </Style>
</UserControl.Style>
<Border x:Name="border" BorderBrush="Blue" BorderThickness="3" CornerRadius="3" Padding="3" Background="Orange"
    Width="175" Height="175">
    <TextBlock Text="Sample" HorizontalAlignment="Center" VerticalAlignment="Center"/>
</Border> 
```

把它放在某个地方，我在同一个按钮上使用了一个工具提示，只是为了演示目的：

```
<Button Click="OnButtonClick" Content="click to see popup">
        <Button.ToolTip>
            <ToolTip x:Name="popup" IsOpen="False" Background="Transparent" BorderBrush="Transparent" 
                     Placement="Bottom">
                <WpfApplication1:UserControl1/>
            </ToolTip>
        </Button.ToolTip>
    </Button> 
```

对于后面的 OnButtonClick 代码，我只是切换了弹出窗口，以便可以多次单击它：

```
private void OnButtonClick(object sender, RoutedEventArgs e)
{
    popup.IsOpen = !popup.IsOpen;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T15:41:38.210

WPF弹窗可以处理透明度，只需设置如下

```
<Popup AllowsTransparency="True" PopupAnimation="Fade"> 
```

# wpf - 如何在不复制代码的情况下在 WPF 中编辑不可变对象？

> ID：862209
> 
> 赞同：12
> 
> 时间：2009-05-14T08:33:59.710
> 
> 标签：wpf, immutability

我们的领域模型中有很多不可变的值对象，其中一个例子是位置，由纬度、经度和高度定义。

```
/// <remarks>When I grow up I want to be an F# record.</remarks>
public class Position
{
    public double Latitude
    {
        get;
        private set;
    }

    // snip

    public Position(double latitude, double longitude, double height)
    {
        Latitude = latitude;
        // snip
    }
} 
```

允许编辑位置的明显方法是构建一个具有 getter*和*setter 的 ViewModel，以及一个 ToPosition() 方法来提取经过验证的不可变位置实例。虽然这个解决方案没问题，但它会导致大量重复代码，尤其是 XAML。

所讨论的值对象由三到五个属性组成，这些属性通常是 X、Y、Z 和一些辅助材料的变体。鉴于此，我曾考虑创建三个 ViewModel 来处理各种可能性，其中每个 ViewModel 都需要为每个属性的值公开属性以及为每个标签显示的描述（例如“纬度”）。

更进一步，似乎我可以将其简化为一个通用的 ViewModel，它可以处理 N 个属性并使用反射将所有内容连接起来。类似于属性网格的东西，但用于不可变对象。属性网格的一个问题是我希望能够更改外观，以便拥有标签和文本框，例如：

```
Latitude:   [      32 ]  <- TextBox
Longitude:  [     115 ]
Height:     [      12 ] 
```

或将其放在 DataGrid 中，例如：

```
Latitude  |  Longitude  |  Height
      32           115         12 
```

*所以我的问题是：*

你能想出一个优雅的方法来解决这个问题吗？有没有这样做的图书馆或关于类似事情的文章？

我主要在寻找：

*   尽量减少代码重复
*   易于添加新的值对象类型
*   可以通过某种验证进行扩展

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-11-05T06:58:16.883

自定义类型描述符可以用来解决这个问题。在绑定到位置之前，您的类型描述符可以启动，并提供 get 和 set 方法来临时构建值。提交更改后，它可以构建不可变对象。

它可能看起来像这样：

```
DataContext = new Mutable(position, 
    dictionary => new Position(dictionary["lattitude"], ...)
); 
```

您的绑定仍可能如下所示：

```
<TextBox Text="{Binding Path=Lattitude}" /> 
```

因为 Mutable 对象将“假装”拥有像 Latitude 这样的属性，这要归功于它的 TypeDescriptor。

或者，您可以在绑定中使用转换器并提出某种约定。

您的 Mutable 类将采用当前的不可变对象，并且`Func<IDictionary, object>`允许您在编辑完成后创建新的不可变对象。您的 Mutable 类将使用类型描述符，该描述符将创建 PropertyDescriptors，在设置时创建新的不可变对象。

有关如何使用类型描述符的示例，请参见此处：

[http://www.paulstovell.com/editable-object-adapter](http://www.paulstovell.com/editable-object-adapter)

**编辑**：如果您想限制创建不可变对象的频率，您还可以查看您的 Mutable 也可以实现的 BindingGroups 和 IEditableObject。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-17T02:49:22.547

我在研究相同情况下的可能选择时发现了这个老问题。我想我应该更新它，以防其他人偶然发现它：

另一种选择（当 Paul 提供他的解决方案时不可用，因为 .Net 4 尚未推出）是使用相同的策略，但不是使用 CustomTypeDescriptors 来实现它，而是使用泛型、动态对象和反射的组合来实现相同的效果.

在这种情况下，您定义一个类

```
class Mutable<ImmutableType> : DynamicObject
{
   //...
} 
```

它的构造函数采用不可变类型的实例和从字典中构造它的新实例的委托，就像在保罗的回答中一样。然而，这里的不同之处在于您覆盖 TryGetMember 和 TrySetMember 以填充您最终将用作构造函数委托的参数的内部字典。您使用反射来验证您接受的唯一属性是那些在 ImmutableType 中实际实现的属性。

性能方面，我打赌 Paul 的答案更快，并且不涉及动态对象，众所周知，动态对象会使 C# 开发人员陷入困境。但是这个解决方案的实现也稍微简单一些，因为类型描述符有点神秘。

* * *

这是要求的概念验证/示例实现：

[https://bitbucket.org/jwrush/mutable-generic-example](https://bitbucket.org/jwrush/mutable-generic-example)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-03T05:17:33.977

> 你能想出一个优雅的方法来解决这个问题吗？

老实说，您只是围绕问题跳舞，但不要提及问题本身；）。

如果我猜对了你的问题，那么 MultiBinding 和 IMultiValueConverter 的组合应该可以解决问题。

HTH。

PS BTW，你有不可变的类实例，而不是值对象。使用值对象（由`struct`关键字描述），无论是否有 setter，您都会跳得更多:)。

# sql-server - 在 SQL Server 触发器中更改值时避免硬编码

> ID：862214
> 
> 赞同：1
> 
> 时间：2009-05-14T08:34:53.343
> 
> 标签：sql-server, triggers

我有一个填充单列（PromoCode）的sql server“而不是插入”触发器。这一切都很完美，但我不喜欢我必须在实际 INSERT 语句中对列进行硬编码的事实：

```
CREATE TRIGGER PopulateOrderPromoCode ON Order
INSTEAD OF INSERT
AS BEGIN
    --// Get the Promo Code
    DECLARE @PromoCode int; 
    EXEC GetPromoCode @PromoCode OUTPUT;    

    --// Insert the order with the new Promo Code
    INSERT INTO Order (Id, CustomerId, PromoCode)
      SELECT Id, CustomerId, @PromoCode FROM inserted;
END 
```

我宁愿简单地将inserted.PromoCode 中的值替换为@PromoCode，然后可以使用：

```
INSERT INTO Order 
  SELECT * FROM inserted; 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-23T22:22:12.287

不要使用 INSTEAD OF INSERT 触发器（您必须在其中接管插入逻辑）

使用普通的 INSERT 触发器（**除了**插入之外，它还允许您执行其他操作）

这假设您可以在没有促销代码的情况下插入（允许空值）或促销代码默认为某些内容。

```
CREATE TRIGGER PopulateOrderPromoCode ON Order
FOR INSERT
AS 
BEGIN
    --// Get the Promo Code
    DECLARE @PromoCode int;     
    EXEC GetPromoCode @PromoCode OUTPUT;        

    --// update the order with the new Promo Code
    UPDATE Order SET PromoCode = @PromoCode
      WHERE ID IN (SELECT ID FROM inserted)
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T08:39:53.627

INSERTED 是一个只读临时表，可以在任何触发器中访问。你不能修改它。

而您用来执行 INSERT 的方式是最好的方式。所以，它没有任何问题。在执行 INSERT 时指定列是件好事（据我说）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-05-14T17:02:56.867

动态 SQL 将是您唯一的其他选择。尝试这个：

```
CREATE TRIGGER PopulateOrderPromoCode 
ON  Order
INSTEAD OF INSERT
AS 
BEGIN    
    --// Get the Promo Code    
    DECLARE @PromoCode int;         
    EXEC GetPromoCode @PromoCode OUTPUT;      

    DECLARE @InsertSQL nvarchar(2000), @SelectSQL nvarchar(2000)
    SET @InsertSQL = 'INSERT INTO Order ('
    SET @SelectSQL = 'SELECT '

    DECLARE @CurrentCol sysname
    SET @CurrentCol = ''

    WHILE EXISTS (  SELECT TOP 1 QUOTENAME(name)
                    FROM    sys.syscolumns 
                    WHERE   object_name(id) = 'Order'
                    AND     name <> 'PromoCode'
                    AND     name > @CurrentCol)
    BEGIN
        SET @CurrentCol = ( SELECT TOP 1 QUOTENAME(name)
                            FROM    sys.syscolumns 
                            WHERE   object_name(id) = 'Order'
                            AND     name <> 'PromoCode'
                            AND     QUOTENAME(name) > @CurrentCol
                            ORDER BY name)
        IF @CurrentCol IS NULL Break;

        SET @InsertSQL = @InsertSQL + @CurrentCol + ', '
        SET @SelectSQL = @SelectSQL + @CurrentCol + ', '
    END

    --Finish and concatenate the strings
    SET @InsertSQL = @InsertSQL + 'PromoCode) '
    SET @SelectSQL = @SelectSQL + '''' + @PromoCode + '''' + ' FROM INSERTED'

    DECLARE @MasterSQL nvarchar(2000)
    SET @MasterSQL = @InsertSQL + @SelectSQL

    EXEC (@MasterSQL)
END 
```

顺便说一句 - “顺序”对于表名来说是一个糟糕的选择 - 它也是 SQL 中的保留字。试试 Orders 或 OrderHeader。

# .net - 主键计数 LINQ 中的计数非常慢

> ID：862215
> 
> 赞同：1
> 
> 时间：2009-05-14T08:35:03.390
> 
> 标签：.net, linq-to-sql

我认为 LINQ to SQL 已针对性能进行了调整？

以下用于计数的 LINQ to SQL 很差

```
Dim uniqueFactors As Integer = db.LargeTable.Distinct.Count 
```

产生：

```
SELECT COUNT(*) AS [value]
FROM [dbo].[LargeTable] AS [t0]
WHERE ([t0].[ID] % @p0) = @p1 
```

基于主键计算记录数的最快方法是如何

```
SELECT  @totalRowCount = rows
FROM    sysindexes
WHERE   id = OBJECT_ID('LargeTable')
    AND indid < 2 
```

那么问题来了，如何确保 LINQ to SQL 在请求 Count(*) 时快速执行计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T10:57:59.083

好吧，这取决于您的期望。如果您要求表格上的“Distinct.Count”，您就是在指示 LINQ 完全按照它的功能进行操作。由于这将导致表扫描，因此对于较大的表来说会很慢。

SELECT COUNT(*) 是 SQL Server（以及因此 LINQ）可以为您提供表中行的**准确、最新计数的唯一方法。**

从 sysindexes 中选择一行（或者最好：SQL Server 2005 及更高版本中的 sys.partitions - “sysindexes”视图已被弃用）将为您提供一个**近似**数字 - 但不能保证绝对正确和最新。

所以基本上，LINQ 缺少的是一个“UseApproximationForPerformancesSake”开关。有时这可能会有所帮助 - 但话又说回来，如果您需要快速且仅近似的响应，您始终可以使用那一小部分 SQL 并自己查询数据库。

马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:18:59.960

我有一个类似的问题，我尝试了这些并且效果更好：

child.count(x=> x.paretnID == inputParentID) child.where(x=> x.parentID == inputParentID)

我每次迭代大约需要 15-20 秒的原始代码是： return (isEdit) ？db.ChasisBuys.Single(x => x.ChasisBuyID == long.Parse(Request.QueryString["chbid"])).Chasises.Count(y => y.Bikes.Count > 0 && y.ColorID == buyItems [(int)index].ColorID && y.ChasisTypeID == buyItems[(int)index].ChasisTypeID).ToString() : "-";

运行良好的新代码是：

```
 **return (isEdit) ? db.Chasises.Where(x => x.ChasisBuyID == long.Parse(Request.QueryString["chbid"])).Count(y => y.Bikes.Count > 0 && y.ColorID == buyItems[(int)index].ColorID && y.ChasisTypeID == buyItems[(int)index].ChasisTypeID).ToString() : "-";** 
```

数据库中有大约 1000 条记录在 chasises 中，大约 5 条在 chasisBuys 中，大约 20 条在 Bikes 中。我的观点是，Linq to SQL 查询不会在逻辑语句中进行预评估，例如，如果你写“return a && b && c;” 如果语句 a 为假，则不评估其他语句，并且我在 linq to sql 中期待这样的事情，但事实并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T11:00:14.397

我无法重现您的 TSQL；您是否从问题中省略了部分 LINQ 查询（即“哪里”）？无论我如何尝试，我都会得到非常正常的 TSQL，它的性能还不错......

既然主键是唯一的，为什么不只是：

```
int count = db.LargeTable.Count(); 
```

除此以外; 你试过*选择*主键吗？

```
int count = db.LargeTable.Select(x=>x.Id).Distinct().Count(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T11:18:16.023

将您的 linq 更改为“db.LargeTable.Distinct.Count ~~(~~ );”

应产生以下 SQL

```
SELECT COUNT(*) AS [value]
FROM [dbo].[LargeTable] AS [t0] 
```

应该使用索引扫描而不是表扫描。这应该快得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-09-13T13:08:45.300

如果您正在寻找一个简单的 COUNT ，而这正是我想要的并且不想永远等待，请不要使用 Entity 方法。

使用简单的 LINQ to SQL 格式。

```
int largeCount = (from o in db.LargeTable
                       where o.SomeField == somVal
                       select o).Count(); 
```

# vb.net - 已知类型的 VB.NET 中最快的转换？

> ID：862216
> 
> 赞同：1
> 
> 时间：2009-05-14T08:35:07.740
> 
> 标签：vb.net, performance, casting

当我在一个窗体上有许多控件（即标签、按钮等）做几乎相同的事情时，我经常使用一种方法来处理所有控件的 Click、MouseDown、MouseUp 事件。

但是要知道哪些控件引发了事件并访问该控件的属性，我需要将“发送者”对象转换为正确的类型。

问题是我总是知道它是哪种类型，我真的不需要“TryCast”、“DirectCast”并检查操作是否返回 true。我有时也使用 CType。

`Dim btn as Button = CType(sender, Button)`

`btn.Txt = "Pushed"`

当我已经知道控件的类型时，我想找到最快的转换方法，我知道有一个 Button 事件调用我的方法，并且喜欢将发送者对象转换为 Button 控件的最快方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T08:39:56.950

我`DirectCast`最清楚地表达了您的意图：您知道该对象实际上是正确的类型；您不需要执行任何转换，也不*希望*执行它们：如果类型错误，则表明存在错误并且应该抛出异常，对吗？

为什么你这么担心性能呢？我*怀疑*这`DirectCast`至少与替代方案一样快，但如果我们在这里谈论用户交互，那么与人类反应时间相比，演员阵容将是微不足道的。清晰的代码几乎总是比绝对最快的做事方式更重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T08:48:42.967

除了 Jon 提到的意图之外，`DirectCast`也将是最快的方法。更多信息在[VB 的隐藏特性](https://stackoverflow.com/questions/102084/hidden-features-of-vb-net/103285#103285)讨论中。

# flash - 使用闪光灯控制捕捉快照

> ID：862221
> 
> 赞同：0
> 
> 时间：2009-05-14T08:36:23.900
> 
> 标签：flash, screenshot

我想捕获屏幕截图，将其转换为 jpg 并使用 Flash 控件上传到服务器。我想要类似于 facebook 录制视频的东西，使用系统的内置网络摄像头拍照，主要区别在于我想要系统的屏幕截图而不是来自网络摄像头的输入。

也对商业控制开放。任何链接，示例都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T08:59:28.150

Flash 播放器无法访问系统，只能访问 Flash 播放器中的内容。

你可以 ：

*   对 java 小程序进行浏览器调用（使用 ExternalInterface）
*   考虑像 merapi 这样在桌面上运行 Java 应用程序并访问更广泛的系统。

# c# - 绑定DataGridView问题

> ID：862223
> 
> 赞同：0
> 
> 时间：2009-05-14T08:37:02.933
> 
> 标签：c#, winforms, datagridview

我有一个允许添加新行的绑定 DataGridView。问题是当 CurrentRow 是最后一个网格行时，绑定源中会自动插入一个新对象。我希望仅在用户开始输入最后一行单元格之一时才将新对象添加到绑定源中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T18:33:25.483

这不是工作方式`DataGridView`，之前尝试过改变添加新项目的工作方式，我不得不提醒你不要尝试它。

您最好的选择是让您的绑定源实现该`ICancelAddNew`接口。如果实现了这个接口，那么如果用户离开该行而没有在新项目中输入任何数据，`DataGridView`则将调用。`CancelNew`您还可以使用 a`BindingList<T>`作为数据源，或将数据源包装在`BindingSource`; 这两个类都实现了`ICancelAddNew`.

# xpath - XPath - 获取没有特定类型子节点的节点

> ID：862239
> 
> 赞同：72
> 
> 时间：2009-05-14T08:39:43.830
> 
> 标签：xpath

XML：`/A/B`或`/A`

我想获取所有`A`没有`B`子节点的节点。

我试过了

```
/A[not(B)]  
/A[not(exists(B))] 
```

没有成功

`/*[local-name()="A" and .... ]`如果可能的话，我更喜欢使用语法的解决方案。有什么可行的想法吗？

澄清。xml 看起来像：

```
<WhatEver>
  <A>
    <B></B>
  </A>
</WhatEver> 
```

或者

```
<WhatEver>
  <A></A>
</WhatEver> 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-14T08:40:58.663

也许 `*[local-name() = 'A' and not(descendant::*[local-name() = 'B'])]`？

此外，应该只有一个根元素，因此`/A[...]`您要么取回所有 XML，要么没有。也许`//A[not(B)]`或`/*/A[not(B)]`？

我真的不明白为什么`/A[not(B)]`不适合你。

```
~/xml% xmllint ab.xml
<?xml version="1.0"?>
<root>
    <A id="1">
            <B/>
    </A>
    <A id="2">
    </A>
    <A id="3">
            <B/>
            <B/>
    </A>
    <A id="4"/>
</root>
~/xml% xpath ab.xml '/root/A[not(B)]'
Found 2 nodes:
-- NODE --
<A id="2">
    </A>
-- NODE --
<A id="4" /> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2011-06-02T07:08:56.330

Try this `"/A[not(.//B)]"` or this `"/A[not(./B)]"`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-14T08:50:07.660

第一个 / 导致 XPath 从文档的根目录开始，我怀疑这是您的意图。

也许您的意思是 //A[not(B)] 它将在文档中的任何级别找到所有没有直接 B 子节点的 A 节点。

Or perhaps you are already at a node that contains A nodes in which case you just want A[not(B)] as the XPath.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-14T08:54:17.180

If you are trying to get A anywhere in the hierarchy from the root, this works (for xslt 1.0 as well as 2.0 in case its used in xslt)

```
//descendant-or-self::node()[local-name(.) = 'a' and not(count(b))] 
```

OR you can also do

```
//descendant-or-self::node()[local-name(.) = 'a' and not(b)] 
```

OR also

```
//descendant-or-self::node()[local-name(.) = 'a' and not(child::b)] 
```

There are n no of ways in xslt to achieve the same thing.

Note: XPaths are case-sensitive, so if your node names are different (which I am sure, no one is gonna use A, B), then please make sure the case matches.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-10T13:53:57.187

Use this:

```
/*[local-name()='A' and not(descendant::*[local-name()='B'])] 
```

# iphone - iPhone 上的单元测试如何工作？

> ID：862244
> 
> 赞同：8
> 
> 时间：2009-05-14T08:40:26.387
> 
> 标签：iphone, cocoa-touch, unit-testing, uikit

我是否需要特殊的库，或者我可以创建一个巨大的类来尝试实例化我的项目的每个对象并测试其中的所有方法？理论上是怎么做到的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-14T09:18:47.807

谷歌搜索“unit testing iPhone”给出了[这个极好的链接](http://code.google.com/p/google-toolbox-for-mac/wiki/iPhoneUnitTesting)作为第一个命中：

综上所述，Google Toolbox 为 iPhone 上的单元测试提供了良好的基础设施。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-14T18:31:02.597

如果您的目标是 iPhone OS 2.2 或更高版本，您可以使用与 Xcode 捆绑的 OCUnit 版本。Kailoa Kadano 在 Mobile Orchard 上有[一篇很好的博客文章。](http://www.mobileorchard.com/ocunit-integrated-unit-testing-in-xcode/)OCUnit 是一个单元测试框架，类似于 Java 世界中著名的 JUnit 框架。

您始终可以通过创建一个简单的测试程序来执行“穷人的单元测试”，该程序使用`assert()`C 头文件`assert.h`中的宏或`NSAssert()`Cocoa/Cocoa-touch 中的宏。这不是开始进行单元测试的可怕方式，但我真的建议最终查看 OCUnit 或其他单元测试框架。

无论采用哪种方式构建单元测试，您都需要在 Xcode 项目中创建一个单独的目标来构建和运行测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T18:21:43.243

[GHUnit](http://rel.me/2009/02/21/unit-testing-for-mac-os-x-and-iphone-ghunit/)很棒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-05-31T20:42:12.180

我真的很喜欢[Kiwi](http://www.kiwi-lib.info/)：适用于 iPhone 和 iPad 的 BDD (RSpec)。

要获得全面的答案，请查看 [iOS 测试/规范 TDD/BDD 和集成与验收测试](https://stackoverflow.com/questions/4114083/ios-tests-specs-tdd-bdd-and-integration-acceptance-testing)。

# regex - 使用 Perl 检查版本号的有效性

> ID：862249
> 
> 赞同：1
> 
> 时间：2009-05-14T08:41:54.760
> 
> 标签：regex, perl

我正在努力检查 Perl 中版本号的有效性。正确的版本号是这样的：

*   以 v 或 ver 开头，
*   之后是一个数字，如果是0，则这部分不允许有其他数字（例如10、3993和0可以，01不行），
*   之后是句号，一个数字，句号，数字，句号和数字。

即有效的版本号可能类似于 v0.123.45.678 或 ver18.493.039.1。

我想出了以下正则表达式：

```
if ($ver_string !~ m/^v(er)?(0{1}\.)|([1-9]+\d*\.)\d+\.\d+\.\d+/) 
{
   #print error
} 
```

但这不起作用，因为像 verer01.34.56.78 这样的版本号被接受了。我无法理解这一点，我知道 Perl 往往是贪婪的，但不应该 ^v(er) 吗？确保最多可以有一个“er”？为什么不 0{1}。只匹配“0.”，而不是接受“01.” 也？

这个正则表达式实际上抓住了“rere”的东西： m/^v(er)?[0-9.]+/ 但我看不到我在尝试中允许它在哪里。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-14T08:44:01.840

您的问题是`|`您正在使用的 or - 将整个模式一分为二。A`|`将作用于括号或表达式的结尾，而不仅仅是两个相邻的项目。

您需要放置一些额外的括号，两个显示您想要或-ed 表达式的哪一部分。因此，修复模式的第一步是：

```
^v(er)?((0{1}\.)|([1-9]+\d*\.))\d+\.\d+\.\d+ 
```

您还需要`$`在末尾添加 a 以确保版本号末尾没有虚假字符。

此外，放置`{1}`是不必要的，它意味着上一个项目恰好一次，这是默认设置。但是，您可以`{3}`在模式的末尾使用，因为最后需要三个点位组。

同样，您不需要 .`+`之后的`[1-9]`其他数字，因为`\d*`.

我们还可以删除不必要的括号。

因此，您可以将模式简化为以下内容：

```
^v(er)?(0|[1-9]\d*)(.\d+){3}$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T09:08:04.200

您可以使用单个正则表达式来完成，也可以分两步完成，第二步是检查第一个数字是否以 0 开头。

顺便说一句，我倾向于使用 [0-9] 而不是 \d 来表示数字，有很多字符在 Unicode 标准（因此在 Perl）中被归类为数字，您可能不想处理这些字符。

这是一个示例代码，version_ok 子是一切发生的地方。

```
#!/usr/bin/perl

use strict;
use warnings;

use Test::More tests => 7;

while( <DATA>) 
  { chomp; 
    my( $version, $expected)= split /\s*=>\s*/;
    is( version_ok( $version), $expected, $version);
  }

sub version_ok  
  { my( $version)=@_;
    if( $version=~ m{^v(?:er)?        # starts with v or ver
                      ([0-9]+)        # the first number
                      (?:\.[0-9]+){3} # 3 times dot number
                     $}x)             # end
      { if( $1 =~ m{^0[0-9]})         
          { return 0; }               # no good: first number starts with 0
        else 
          { return 1; } 
      } 
    else
      { return 0; }
  }

__DATA__
v0.123.45.678      => 1
ver18.493.039.1    => 1
verer01.34.56.78   => 0
v01.5.5.5          => 0
ver101.5.5.5       => 1
ver101.5.5\.        => 0
ver101.5.5         => 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T10:41:25.583

正则表达式可能适用于您的测试用例，但 CPAN 模块[Perl::Version](http://search.cpan.org/~andya/Perl-Version-1.009/lib/Perl/Version.pm)似乎是最好的选择，但有两个警告：

*   我自己没试过
*   似乎最新的模块发布是在 2007 年 - 有点使它成为一个递归问题

# c# - 为 WPF 用户控件中的选定项目实现图形的最佳方法是什么？

> ID：862250
> 
> 赞同：0
> 
> 时间：2009-05-14T08:42:34.930
> 
> 标签：c#, wpf, user-controls, user-interface

我已经实现了一些不同的 WPF 用户控件。在这样做的过程中，我还实现了几种不同的方式来实现选择项目时的图形。

我想了解其他人是如何做到这一点的，以及他们认为最好的方法是什么？

请每个答案只有一个解决方案。

为避免混淆，这里有一些图形示例，用于指示已选择项目：

*   将图形添加到元素的装饰层。
*   根据数据中的“IsSelected”属性更改元素的颜色。
*   以程序方式显示/隐藏 XAML 中指示选择的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T08:53:29.290

“实现图形”是什么意思？通常，当项目被选中时，它会以[SystemColors.HighlightBrush](http://msdn.microsoft.com/en-us/library/system.windows.systemcolors.highlightbrush.aspx)背景呈现。对于普通用户来说，除此之外的任何系统都可能难以理解。

# nhibernate - NHibernate 信息

> ID：862254
> 
> 赞同：0
> 
> 时间：2009-05-14T08:44:57.343
> 
> 标签：nhibernate

我是 NHibernate 的新手。谁能解释一下它如何处理大量数据？

如果我有 100gb 的数据，我想通过 Nhibernate 检索，我认为 ISession 是可能的。如果我使用ISession，它会存储在内存中吗？如果它存储在内存中，如果对数据库进行了任何更改，会发生什么？

这些疑问会让我有点困惑。有人可以建议我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T21:18:36.893

我不知道你想对数据做什么，所以我不能给你一个好的答案。当您谈论 100GB 时，我想您希望将数据传输到另一个数据库或存储介质。你为什么不看一些[ETL](http://en.wikipedia.org/wiki/Extract,_transform,_load)工具？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T09:03:17.923

NHibernate 的 Session 不仅实现了“工作单元”模式，还实现了“身份映射”模式。

也就是说，当您在会话中第一次从数据存储中检索实体时，NHibernate 将从数据库中检索该实体。

**当您想使用相同的 Session**再次检索相同的实体时，NHibernate 不会从数据库中取回它，但它会返回它已经获取的引用。当然，只有当您第二次获取同一个实体时使用同一个 Session 实例时，这才是正确的。

当您对实体进行更改，同时其他人更改同一实体并将这些更改保存到数据库时，当然，您不会看到这些更改，因为您不能期望 NHIbernate 跟踪整个数据库，并检查其他人是否已更改（并保留）您在内存中的实体。

因此，建议您的会话应该是短暂的。为了不覆盖其他人的更改，您可以轻松地在 NHibernate 中实现乐观锁定。

但是，我想知道...您确定 NHibernate 是解决您问题的好方法吗？您要构建什么样的应用程序？

# c++ - 如何干净地结束 Lua 线程？

> ID：862256
> 
> 赞同：5
> 
> 时间：2009-05-14T08:45:50.493
> 
> 标签：c++, multithreading, scripting, lua, terminate

我的情况是我正在使用 Lua (C) API 来执行保存在字符串中的脚本。我希望用户能够终止脚本的执行（如果脚本包含无限循环，这是必不可少的），我该怎么做？

```
lua_State *Lua = lua_open();
char * code;
// Initialisation code
luaL_dostring(L, code); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T22:49:45.877

钩住线是不够的。这段代码只有一行，但会永远循环：

```
 while true do end 
```

您需要设置指令计数挂钩。如果我没记错的话，那就是

```
 lua_sethook(Lua, &LineHookFunc, LUA_MASKCOUNT, NUM_INSTRUCTIONS); 
```

您要选择 NUM_INSTRUCTIONS 使其不会太小（否则会导致性能开销）且不会太大（否则会等待太久直到停止）。

有关仅 Lua 的相关实现，请参阅[此库](http://github.com/gtimworks/lua-process/tree/master)。

如果您想为不受信任的 Lua 代码添加更多保护，请在谷歌上搜索“Lua 沙盒”——它不仅仅是无限循环预防。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T10:40:40.670

每次 lua 执行一行脚本时，您都可以使用挂钩回调到 C。在这个钩子函数中，你可以检查用户是否想退出，如果他们想退出，就调用 lua_error。

```
static bool ms_quit = false;

void IWantToQuit()
{
    ms_quit = true;
}

void LineHookFunc(lua_State *L, lua_Debug *ar)
{
    if(ar.event == LUA_HOOKLINE)
        if(ms_quit == true)
            luaL_error(L, "Too Many Lines Error");
}
//...

lua_State *Lua = lua_open();
char * code;
// Initialisation code
lua_sethook(Lua, &LineHookFunc, LUA_MASKLINE, 0);
luaL_dostring(L, code); 
```

# jquery - 嵌套的 ASP.Net 网络表单 + nyromodal：回发在模式关闭后消失

> ID：862259
> 
> 赞同：1
> 
> 时间：2009-05-14T08:46:52.813
> 
> 标签：jquery, asp.net-ajax, webforms, nyromodal

我有一个使用母版页模板的 ASP.Net 网页。

该页面有一个带有一些基本 AJAX 功能的 UpdatePanel（更改 DropDownList 的值，UpdatePanel 将刷新）。这一切都很好。

我还有一个链接会弹出一个 nyromodal 模态，在模态内部，加载了另一个 ASP.Net Web 表单。因为我希望这个页面本身有自己的功能，而不仅仅是一个静态页面等。它是一个“创建准确地说是新的”对话。因此它会创建一条新记录，然后当它关闭时，您将返回主“记录列表”页面等。

我正在使用以下 jQuery 代码来启动 nyromodal 调用。此代码还包括各种其他调整和设置，以使 nyromodal 与 ASP.Net 更兼容，因为这是我在 nyromodal 和 ASP.Net 之间面临并解决的第五次连续不兼容问题（课程：远离 ASP.Net）

```
$(document).ready(function(){
    $(function(){
      $('.modal').live('click', function(evt){
        $(this).nyroModalManual({'blocker':'#aspnetForm',minWidth:640,minHeight:400,endShowContent:function(elt, settings) { $('input:text:first', elt.content).focus(); }});
        evt.preventDefault();
      });
    });
}); 
```

这段代码运行良好（感谢 Brian），因为它解决了 ASP.Net 和 nyromodal 一起工作的其他几个问题。它甚至使用了 blocker:#aspnetForm 位来阻止 nyromodal 超出 ASP.Net 的名为 aspnetForm 的主要回发表单，这旨在解决[几乎相同的问题](http://code.google.com/p/nyromodal/issues/detail?id=114)。

但..

我正在加载到我的模式中的网页也是一个 .Net 网络表单。所以它当然也有自己的内置回发aspnetForm。所以当模态出现并且我使用 FireBug 检查 DOM 结构时，我现在实际上有两个 ASP.Net 表单（嵌套）。而且因为 nyromodal 本质上只是一个 div（或几个 div），所以表单标签本质上是嵌套的。

所以我认为这是把事情搞砸了。它实际上完全使 IE7 崩溃（致命异常）。IE7 + FireFox：当我关闭对话框时，我的主 Web 表单将不再回发。我认为它对刚才出现的 2 个表单标签感到非常困惑。

能够使用 nyromodal 打开 ASP.Net Web 表单作为模态的内容应该是一个非常简单的要求。我确实将其归咎于 ASP.Net，因为它如此蹩脚并在每个页面中都放置了一个强制性的“表单”标签。如果我使用的是 PHP，我今天就不会遇到任何这些问题，但我坚持使用 ASP.Bloat 进行工作。

非常感谢任何想法或见解！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-08T17:58:44.413

您是否考虑过将模式中的页面作为 iFrame 打开，以便其内容（新的表单标签等）不会干扰主机页面？

```
$(this).nyroModalManual({type:'iframe'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T13:44:16.360

我实际上是报告该问题的人。首先，您是否尝试过 jimbobmcgee（在您链接到的同一页面上）[开发](http://code.google.com/p/nyromodal/downloads/detail?name=nyroModal.ASP.net-1.0.zip)的 ASP.NET nyroModal 插件？我还没有，因为我没有找到时间阅读所包含的文档。如果你这样做，让我知道我是如何为你工作的。

这实际上是完美的时机......我正在调查的另一种选择是在模式中使用普通的 HTML 页面而不是 WebForms。因此，我打算将我的服务器端代码包装在一个 web 服务中，并使用 jQuery 对其进行调用，并返回一个 JSON 响应。

请原谅我的解释的准确性，因为我刚开始使用 web 服务和页面方法，所以我太学习了。因此，我要求某人发布一个简单的“Hello World”示例。

希望那些对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-28T20:09:56.353

如果你把它放在页面的头部。它允许 nyro 模态关闭来模拟回发。

```
<script type="text/javascript">
$(document).ready(function(){$.nyroModalSettings({
  modal: true,minWidth: ###,minHeight: ###,
  endRemove:function(){
   document.location='pageYouWantToRefresh.aspx';
  }    
});});  
</script> 
```

只需更改 document.location ，当窗口关闭时它就会到那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-10T00:28:21.283

到目前为止，我发现的最简单的解决方案是将弹出窗口加载为 iframe，而不是内联或通过 AJAX。只是一个想法。:)

# .net - 如何将哈希表发送到 asmx 网络服务？

> ID：862271
> 
> 赞同：2
> 
> 时间：2009-05-14T08:52:23.143
> 
> 标签：.net, javascript, web-services, json

我正在尝试使用 JSON 将哈希表发送到我的网络服务。但是，您不能发送字典类型的对象（出于某种原因）。

一个显然有效的解决方案是“List(Of KeyValuePair(Of String, String))”，无论如何作为输出：

```
<WebMethod()> _
Public Function test() As List(Of KeyValuePair(Of String, String))
    Dim ret As New List(Of KeyValuePair(Of String, String))
    ret.Add(New KeyValuePair(Of String, String)("foo", "5"))
    ret.Add(New KeyValuePair(Of String, String)("bar", "baz"))
    Return ret
End Function 
```

输出（在 json 中）： [{"Key":"foo","Value":"5"},{"Key":"bar","Value":"baz"}]

当我想在 javascript 中重新提交时，我必须使用这个函数：

```
<WebMethod()> _
Public Sub test2(ByVal obj As List(Of KeyValuePair(Of String, String)))
    Dim dummy As UInt16 = obj.Count
End Sub 
```

我将其称为 JSON 参数字符串：

```
'{"obj": [{"Key":"foo","Value":"5"},{"Key":"bar","Value":"baz"}]}' 
```

这会返回错误。本身不是错误，但 'obj' 的内容是一个包含 2 个项目的列表，但是当我在调试器中查看它们时，两者都是 Nothing（对于 C# 人来说是 null）。

如何将配对数据从 javascript 发送到我的网络服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-13T18:36:09.153

如果您更改 test2 以接收 Dictionary 对象列表，我认为您会很高兴。

```
<WebMethod()> _
Public Sub test2(ByVal obj As List(Of Dictionary(Of String, String)))
    Dim dummy As UInt16 = obj.Count
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T15:09:17.503

[部分答案]：我遇到了类似的问题，最后使用这个 JSON 库 ( [http://www.json.org/js.html](http://www.json.org/js.html) ) 和 JSON.stringify(yourJSONObj) 将对象发送回我的服务。

我的问题与 JSON 无法正确识别我的对象有关，它假设我的一些属性名称是 JSON 原语。通过使用这个调用 (JSON.stringify()) 它解决了这个问题。

您可以执行以下操作：

```
var data = JSON.stringify('{"obj": [{"Key":"foo","Value":"5"},{"Key":"bar","Value":"baz"}]}'
); 
```

然后将数据对象发送到您的 ASMX 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T10:03:32.287

尝试这个...

```
'{"obj": {"foo":"5","bar":"baz"}}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-29T13:28:36.900

如果您从 .Net 调用 Web 服务并需要以 JSON 格式向其传递数据，请考虑使用 JayRock ( [http://jayrock.berlios.de/](http://jayrock.berlios.de/) ) 将内容转换为 JSON。只需引用 DLL，导入名称空间，创建 JsonObject，用东西填充它并将其导出为字符串。这是一个例子

```
 Imports Jayrock.Json
Imports Jayrock.Json.Conversion

Public Function foo(hsh As HashTable) As String

  Dim jObj As New JsonObject()

  jObj.Put("_myHashTable", hsh)

  Return JsonConvert.ExportToString(jObj)

End Sub 

```

如果您需要通过 AJAX 将数据从 DOM 带到 Web 服务，我会使用上面提到的 json.org 的 Javascript 库。您也可以使用 JayRock 轻松地将 JSON 字符串转换为 JsonObject。

# delphi - 在 Delphi 7 中使用 Team Foundation Server？

> ID：862272
> 
> 赞同：2
> 
> 时间：2009-05-14T08:52:27.153
> 
> 标签：delphi, tfs

我是 .NET 开发人员，使用 VS2008/TFS2008。最近，另一位开发人员离开了我们公司，现在我必须维护他的代码。他是一名 Delphi 开发人员（主要是 Delphi 7，但也有 Delphi 2007），他没有使用任何源代码控制。

有没有办法将他的代码放入 Team Foundation Server 中？集成在 Delphi IDE 中是一大优势。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-15T04:06:54.587

要在 Delphi 7 中获得与 TFS 的 IDE 集成，您需要将 MSSCCI 提供程序与 TFS 结合使用，SourceConnexion 为 Delphi 提供 MSSCCI 支持。如果您还没有它们，您将需要在您的机器上安装以下内容：

1.  [Microsoft Team Explorer 2008](http://www.microsoft.com/downloads/details.aspx?FamilyID=0ed12659-3d41-4420-bbb0-a46e51bfca86&displaylang=en)（TFS 客户端）
2.  用于 TFS 2008的[Microsoft MSSCCI 提供程序](http://www.microsoft.com/downloadS/details.aspx?FamilyID=faeb7636-644e-451a-90d4-7947217da0e7&displaylang=en)
3.  [源连接](http://www.epocalipse.com/scx.htm)

您需要确保您拥有任何连接到 TFS 的 Delphi 人员的 TFS 客户端访问许可证，并为他们获得 SourceConnexion 插件的许可证。

由于您已经在与 TFS2008 通信的机器上安装了 VS2008，您可能只需要安装项目 2 和 3。

有关更多信息，请参阅[Eyal 的博客文章](http://www.epocalipse.com/blog/2006/04/09/team-foundation-server-msscci-provider-10/)（有点过时但仍然有效）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T09:28:05.430

我们在 D2007 中使用 SourceConnexion（第 3 方插件）： [http ://www.epocalipse.com/scx.htm](http://www.epocalipse.com/scx.htm)

（适用于 Plastic SCM 的 SCC api 插件，它比 TFS 具有更好的分支支持:-)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T19:07:07.187

我意识到这是一个旧线程，但在我研究如何将 TFS2012 与 Borland Delphi 2006 一起使用时，这里的帖子对我有很大帮助，所以我想分享我的经验。

要将 TFS2012 或 TFS2010 与 Borland Delphi 2006 一起使用，请按照以下步骤操作。

1.  下载并安装[Microsoft Team Explorer 2010](http://www.microsoft.com/en-ca/download/details.aspx?id=329)。
2.  下载并安装[TFS MSSCCI 提供程序 TFS2010](http://visualstudiogallery.msdn.microsoft.com/bce06506-be38-47a1-9f29-d3937d3d88d6)（确保下载 32 位版本，即使在 64 位机器上！）。
3.  下载并安装[SourceConnexIon](http://www.epocalipse.com)。
4.  打开 Borland Delphi 2006，单击 Source Control 菜单项并按照配置向导进行操作。

您必须遵循此顺序，否则 SourceConneXion 不会检测到 TFS。

# c# - 以编程方式隐藏列表视图标题

> ID：862279
> 
> 赞同：1
> 
> 时间：2009-05-14T08:55:29.220
> 
> 标签：c#, wpf, listview

我有一个`ListView`赞：

```
Col1 Col2 Col3
1 人工智能
2 乙二
3 C III

```

我使用2个按钮。当我单击第一个按钮时，Col3 应该折叠并且在单击第二个按钮时应该可见。

关于如何`ListView`在 WPF 中执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T06:53:57.167

使用拇指将解决问题。就像

```
<ListView x:Name="MyListView"IsSynchronizedWithCurrentItem="True" 
            ItemsSource="{Binding Path=Items}",  Mode=Default, 
            Source={StaticResource DataProvider}}"  
            Thumb.DragDelta="Thumb_DragDelta">

public Window1()
{ 
  InitializeComponent();  
  MyListView.AddHandler(Thumb.DragDeltaEvent,
                  new DragDeltaEventHandler(Thumb_DragDelta),
                  true );

void Thumb_DragDelta(object sender, DragDeltaEventArgs e)
{
   Thumb senderAsThumb = e.OriginalSource as Thumb;  
   GridViewColumnHeader header = senderAsThumb.TemplatedParent as GridViewColumnHeader;    
   if (header.Column.ActualWidth < MIN_WIDTH) 
   { 
     header.Column.Width = MIN_WIDTH;
   }
   if (header.Column.ActualWidth > MAX_WIDTH)  
   {
      header.Column.Width = MAX_WIDTH;   
   }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T09:20:28.087

您能否提供一些关于您的列表视图的 xaml 代码？

您可以将 RelayCommand 绑定到您的按钮并将 ListView 作为参数传递。然后你可以设置 Visibility = False。

```
<Button Command="{Binding MyButtonCommand}
    CommandParameter="{Binding ElementName=Col3}" /> 
```

这将是你的cs：

```
ICommand _myButtonCommand;
public ICommand MyButtonCommand
{
    get
    {
        if (_myButtonCommand== null) _myButtonCommand= new RelayCommand(param => HideList(param ));
        return _myButtonCommand;
    }
}

void HideList(object param){
    (param as ListView).Visibility = False;
} 
```

我说的是 Josh Smith 的示例中的 RelayCommand：http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)
你可以在那里下载代码。

我想您只能使用触发器在 xaml 中获得类似的结果，但是我对该主题的经验并不丰富。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T10:03:24.940

我正在使用代码作为

```
<Grid>
    <ListView HorizontalContentAlignment="Stretch" Margin="38,12,31,110">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="COL1" Width="100"/>
                <GridViewColumn Header="COL2" Width="100"/>
                <GridViewColumn Header="COL3" Width="100"/>
            </GridView>
        </ListView.View>
    </ListView>
    <Button Height="25" HorizontalAlignment="Left" Margin="105,0,0,51" 
            Name="Collapse" VerticalAlignment="Bottom" Width="75"
            Command="{Binding MyButtonCommand}"    
            CommandParameter="{Binding ElementName = COL3}">Collapse</Button>
    <Button Height="25" HorizontalAlignment="Right" Margin="0,0,111,51" Name="Expand" 
            VerticalAlignment="Bottom" Width="75">Expand</Button>
</Grid> 
```

在 CS 中

```
 ICommand _myButtonCommand;
    public ICommand MyButtonCommand
    {
        get 
        { 
            if (_myButtonCommand== null) _myButtonCommand = new RelayCommand(param => HideList(param ));  
            return _myButtonCommand;
        }
    }
    void HideList( object param )
    {
        ( param as ListView ).Visibility = Visibility.Hidden;
    } 
```

你能给我一个更好的主意吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T10:38:59.237

我会把这个答案作为你帖子的评论，但我还不能评论，所以......

您必须命名（使用“名称”属性）要通过“绑定元素名称”访问的元素，否则您将无法获取它。在您的情况下，您应该显式创建 GridViewColumnHeader，因为 GridViewColumn 没有 Visibilty 属性：

```
<GridViewColumnHeader Name="COL3">COL3</GridViewColumnHeader> 
```

但是，如果要使其消失，您可能还必须显式创建 GridViewColumn 的内容。这意味着您必须使用 GridViewColumn.DisplayMemberBinding 或 GridViewColumn.CellTemplate 并为它们指定名称或通过 RelativeSource 访问它们。

看看这个的可能性： [http](http://www.wpfwiki.com/Default.aspx?Page=WPF%20Q5.3&AspxAutoDetectCookieSupport=1)
://www.wpfwiki.com/Default.aspx?Page=WPF%20Q5.3&AspxAutoDetectCookieSupport= 1 但是，您是否考虑过使用扩展器？

# css - 浏览器可移植性问题

> ID：862284
> 
> 赞同：0
> 
> 时间：2009-05-14T08:56:34.680
> 
> 标签：css, cross-browser

[我正在处理的网站](http://www.midiamantedegel.com)上的 CSS 有问题。
出于某种原因，该网站的 CSS 适用于 FF 3 和 IE 7，但 MS 使事情变得复杂，因为这不适用于 IE 6。
标题看起来被压扁了。
问题是我的客户拥有 IE 6，我被大吼大叫，不知道为什么。
我的问题是：

1.  我在哪里可以获得适用于所有浏览器的测试套件？
2.  我如何解决它？有人可以为我测试吗？

这是 IE 的 CSS：

```
/* CSS Document */

#presentation{
position: relative;
margin: 0 auto;
width: 689px;
height: 586px;
z-index: 0;
}

#pretext{
position: absolute;
padding: 20px;
}

#cleft{
width:97px;
height:665px;
position: relative;
float: left;
}

#cright{
width:97px;
height:665px;
position: relative;
float: right;
} 
```

这是 html：
EDIT SO 与 html 混淆。
这是[pastebin](http://pastebin.com/f4ebd88d)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T09:06:27.760

使用[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)自己测试:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T09:04:26.640

恐怕这个问题没有简单的答案。我给你的建议是这样的：

1.  使用您需要做的最小的技术来编写代码。
2.  使您的代码标准符合要求。
3.  在您需要支持的每个浏览器（+版本）中至少进行一些测试。
4.  写一封关于 IE 的投诉信给 Microsoft 的 Steve Balmer。（每个自尊的 Web 开发人员都应该这样做）。

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T09:16:57.563

要解决您的第一个问题：我建议使用特定于浏览器的样式表。

由于您使用的是 XHTML，因此您可以使用以下内容：

```
 <!--[if lte IE 6]><link href="lte-ie-6.css" rel="stylesheet" type="text/css"><![endif]--> 
```

CSS 文件`lte-ie-6.css`只能被 IE6 读取。您可以使用它轻松覆盖导致 IE6 中的视觉错误的其他 CSS。

* * *

有软件，例如[MultipleIE](http://tredosoft.com/Multiple_IE)、[Internet Explorer Collection](http://codecpack.nl/iecollection.htm)和[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)，可以模拟不同版本的 IE。然而，这并不总是给出准确的结果。微软对您最后一个问题的官方回答是：[安装 Virtual PC 并在其上运行 IE6](http://blogs.msdn.com/ie/archive/2006/11/30/ie6-and-ie7-running-on-a-single-machine.aspx)。

最近，微软一直在开发 SuperPreview，这是一个官方网站预览实用程序，它可以做同样的事情，但结果可靠。[阅读 SuperPreview](http://blogs.msdn.com/xweb/archive/2009/03/18/Microsoft-Expression-Web-SuperPreview-for-Windows-Internet-Explorer.aspx)和/或[下载它](http://www.microsoft.com/downloads/details.aspx?FamilyID=8e6ac106-525d-45d0-84db-dccff3fae677&displaylang=en)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T09:32:29.443

欢迎来到浏览器 CSS 怪癖的世界。确实很难获得一个跨浏览器一致的基于 CSS 的良好工作网站。你需要做很多实验。

有时你最好使用像[BlueprintCSS这样的 CSS 框架](http://www.blueprintcss.org/)

[尝试使用BrowserShots](http://browsershots.org/)服务在各种平台下的各种浏览器中查看您的网站。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T09:16:55.957

[多个 IE](http://tredosoft.com/Multiple_IE "多个IE")让您可以轻松地并排安装/运行多个版本的 IE。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T15:09:03.160

我看了看，你的一个样式表设置了 #logopic 的高度和宽度

```
#logopic{
width: 50%;
height: auto;
vertical-align:bottom;} 
```

尝试那里的图像的真实高度和宽度

```
width:699px;
height:126px; 
```

# apache2 - mod_proxy 超时 (502) 和故障转移

> ID：862285
> 
> 赞同：5
> 
> 时间：2009-05-14T08:56:41.713
> 
> 标签：apache2, load-balancing, failover, mod-proxy

所以我们正在运行一个由 Apache 2.2 进行负载平衡的 2+ 个后端服务器（可能是 JBoss 服务器）的集群。有时，后端服务器可能会变得无响应（这意味着它们会等待很长时间才能回复请求，但不会立即关闭连接）。这自然会导致 502“Bad gateway”错误。我对负载均衡器的理解是，它应该故障转移并将请求重定向到其余实例。

我已经看到平衡器的一个节点可以进入错误状态，但永远无法强制将一个节点完全发送到该状态（即在遇到第一个 502 之后执行此操作）。我是否遗漏了什么，或者这只是我想要的一个功能？哦，这是我的配置：

```
<Proxy balancer://s>
    Order deny,allow
    Allow from all

    BalancerMember http://host1:8080/ route=h1 timeout=20 retry=40
    BalancerMember http://host2:8080/ route=h2 timeout=20 retry=40
</Proxy>

# Distribute by Round Robin, use Sticky Sessions
ProxyPass / balancer://s/ stickysession=JSESSIONID lbmethod=byrequests nofailover=On
ProxyPassReverse /  http://host1:8080/
ProxyPassReverse /  http://host2:8080/ 
```

最好的，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-16T16:06:00.183

您指定 nofailover=On 这意味着它不会进行故障转移，因此会出现 502 错误。如果您希望它进行故障转移，则需要 nofailover=Off 这意味着它应该进行故障转移。

# .net - 作为应用程序开发平台，salesforce.com 和 Apex 是什么样的？

> ID：862294
> 
> 赞同：37
> 
> 时间：2009-05-14T08:58:37.700
> 
> 标签：.net, rad, salesforce

我最近发现 salesforce.com 不仅仅是一个在线 CRM，因为我遇到了 Morrison 的[案例研究](http://www.salesforce.com/uk/customers/manufacturing/morrisonutility.jsp)，在该案例研究中他们开发了一个工作管理应用程序。我一直在尝试以在平台上重新创建我们自己的作品管理系统。

我的背景是 Microsoft 和 .Net，显而易见的第一选择是 asp.net。但是，实际上只有我自己具有 .net 经验，而我的经理具有更传统的 Synergy 编程背景，而且我是自学成才的，并且正在考虑评估其他 RAD 选项（例如 Ironspeed）。

该业务的性质主要是 2-5 个并发建设类型合同，每个合同运行 3-5 年，每个合同需要 15-50 个系统用户。传统上，我们对所有内容都使用了基于角色的 Works Mangement 系统，并针对每份合同进行了调整。Salesforce 许可模式表面上适合这种灵活性，但我担心开发灵活性/学习曲线以及围绕锁定的所有问题。对于不是销售人员自己的材料/博客的网络平台似乎没有太多中立的清醒分析

与更“传统”的 .Net 路线相比，有没有人在 Salesforce 上开发应用程序的经验？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-12-21T21:24:28.903

除了最简单的应用程序之外，Salesforce 是一种相当痛苦的开发体验。Salesforce 对想要开发的内容有一个非常具体的想法，如果您的应用程序不在这些范围内，请避开！

调控器的限制真的很可怜：16 级递归，1 兆堆，一次查询返回不超过 200 个对象，一次调用不超过 20 个查询。一次调用中有 10 个 Web 标注，单个列表中有 1000 个项目，然后它们继续。最终的结果是，你想出的任何绕过一个限制的聪明都会与另一个限制发生冲突。

一旦你达到一定的规模，你所有的时间都将花在围绕这些限制进行编码上。Apex 语言并不真正支持任何有意义的继承。即使看似简单的任务最终也会遇到新的且明显任意的限制，例如，Apex 中的所有对象都继承自`SObject`; 但是，不允许实例化泛型集合`SObject`，因此几乎不可能构建有用的实用程序库。复杂（甚至相当简单）的数据库连接是不可能的。

对 Salesforce 的工具和支持也非常薄弱。它们是不可信的，难以用于实际的开发过程。部署是一场噩梦，因为这些工具很难解决复杂的依赖问题，而且在正常开发过程中创建的众多实体根本无法以编程方式部署。其他小功能也很令人愉快，例如语言不区分大小写，但 IDE 区分大小写。没有重构工具可言，因此您会感受到静态类型语言的所有痛苦，而没有任何所谓的好处。而且保存/编译时间很长——我看到频率超过 2 分钟。而且，当然，如果你在一次保存中有多个编译错误（你会的，因为你不想重新编译每个更改，

在相关的注释中，您似乎已经注意到 Salesforce 文档是相当自我祝贺的——嗯，从头到尾都是这样。即使是最深奥的技术参考文献中也没有提及常见错误，甚至没有提及给定 API 或功能的限制。都是“这是你能做的伟大的事情”，没有提到，“但你会想象它也会做___，但你错了！完全错了！” 文档从头到尾都感觉像是营销材料。我已经在这个环境中编程了 18 个多月了，但偶尔仍然很难找到基础知识，比如 API 参考。

Salesforce 不是一个灵活的环境。它不是一个快速开发的环境（至少与其他任何 Web 编程框架相比）。除了他们在教程中展示的那些玩具应用程序之外，这不是一个构建任何东西的好环境。拒绝吧。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2010-01-05T06:22:27.427

我知道这个问题有点老了，但也值得看看这个问题[Force.com 平台的缺点](https://stackoverflow.com/questions/1664503/disadvantages-of-the-force-com-platform)

我已经在这个平台上开发了一段时间，我完全同意 Ben 的看法。force.com 的“开发平台”有很多错误，我认为将其称为开发平台甚至不公平。

我们一直在努力解决工具支持，这很糟糕，部署支持，这很糟糕，甚至他们的技术支持，你猜对了，很糟糕。

我想说的主要一点是，salesforce 最初是一个 CRM，然后他们决定将“云平台”添加到他们的产品中。云平台非常适合扩展他们的 CRM 产品，如果你想做的是扩展 CRM，那么 force.com 环境会让你做得很好。

它不会让您做得很好的是放弃他们的 CRM 并让您轻松构建自己的完全自定义的应用程序。您仍然受制于他们的安全和用户模型，您的数据库中仍然有他们的标准对象，您的生产环境中仍然有他们的标准页面。可以这么说，没有“文件-> 新项目”。

另外，其他人提到它是“基于java的”。这并不意味着您可以在其中运行 java 代码。这意味着他们窃取了一些 java 并将其混为一谈，使其看起来像 java，但实际上并非如此......这真的很烦人，因为您不能只获取一组 java 库并将其导入到他们的云中......因此，如果您想做解析 JSON 之类的事情……您将自己编写。

总而言之，我会像瘟疫一样避开 force.com 平台。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2010-01-05T04:49:55.023

听听本。不完全是。听听本。Salesforce 是一个绝对痛苦的世界。Salesforce 唯一的优点是他们的营销团队。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-10-13T18:21:50.113

我真的不能告诉你你会以多快的速度达到边缘情况——但我可以告诉你，它不同于我做过的任何其他开发。创建一个可行的解决方案所需的实施时间——以及快速迭代解决方案以供业务发起人评估的能力是我所经历过的任何环境所无法比拟的。

Apex 代码基于 Java，具有特定于平台的差异。但是，有些事情不能通过代码完成。制作一个完整的应用程序所需的声明性（基于屏幕）和基于代码的实现的组合一开始很难让您理解。

由于环境的多租户性质，存在“管理者限制”，可防止资源被单个组织垄断。这限制了您在插入和更新触发器等方面的实现选项。

部署您的应用程序也是一种非常不同的体验。

查看 iTunes 上作为视频播客提供的开发人员培训（Dev 501）：http: [//itunes.apple.com/WebObjects/MZStore.woa/wa/viewPodcast](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewPodcast?id=325668840) ?id=325668840 您将能够准确地看到我的内容我在谈论。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2010-03-04T10:43:11.887

似乎这里的大多数答案都是否定的，我想说责备平台总是比责备自己的经验不足更容易。

对我来说有一个学习曲线，这很令人沮丧（来自 Java 背景）。语法相似，但范式非常不同。经过一番努力后，我设法构建了由数以万计用户使用的应用程序，这些应用程序可以完美扩展、易于管理和保护，并且包含了目前几乎所有的传统编程架构，包括 OOP、MVC 和许多其他“四人帮”设计模式。

如果您希望我指出示例代码或构建在平台上的大型应用程序的方向，我很乐意为您提供帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-04-26T21:07:49.523

在另一个 stackoverflow 线程中查看我的答案：Force.com 的缺点：

[Force.com 平台的缺点](https://stackoverflow.com/questions/1664503/disadvantages-of-the-force-com-platform/2702650#2702650)

尽管线程很旧，但我最近还是回答了这个问题，因为我只是想借此机会说出该平台有多烦人。这些想法非常流行。

我建议，如果您确实计划使用该平台做任何事情，请确保您的一些团队成员获得 Apex 认证。一般来说，我强烈建议完全避免使用该平台，直到他们认真解决开发人员体验方面的问题以及存在特定且非常简单的业务案例时。

我给这个平台的昵称是“Little Ease”，以伦敦的一个 4x4 酷刑室命名，在那里你无法向任何一个方向扩展自己。你会不断地达到极限。

这也是一篇较旧的博客文章：

[http://suprablog.com/index.php/2010/02/25/salesforce-the-astonshingly-powerful-little-ease-platform/](http://suprablog.com/index.php/2010/02/25/salesforce-the-astonishingly-powerful-little-ease-platform/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-14T09:05:29.633

我没有在 Salesforce 的 .Net 方面进行开发，我确实为一个非常大的 Salesforce 安装创建了一些内部添加。

我可以说的是，系统中的开发工具可能会令人困惑，我一直遇到的最大瓶颈（在开发时）是为我想要的查询获取正确的语法。（警告，这是在 2007 年）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-06T17:13:33.347

您可以使用 Salesforce 做伟大而令人惊奇的事情。唯一的问题是，据我估计，对于许多非平凡的系统和类似的功能，总拥有成本（整个 SDLC）很容易比 dotNET 和传统 RDBMS（如 SQL Server）高 3-10 倍. 为什么要为同样的结果付出那么多？

# ms-word - MS Word 是邪恶的！有没有好的选择？

> ID：862298
> 
> 赞同：14
> 
> 时间：2009-05-14T08:59:52.987
> 
> 标签：ms-word, documentation, latex, markdown, github-flavored-markdown

作为一名开发人员，我真的不喜欢编写文档，但是当我不得不写文档时，我想让这个过程尽可能轻松。

Word 的问题在于它*经常妨碍我*。我更关心布局而不是实际内容……这就是我想摆脱 Word 的原因。

理想情况下，我想编写我的内容，然后将其“编译”成文档。

我听说过[LaTeX](http://www.latex-project.org)，但我没有任何经验。这会是适合这项工作的技术吗？我应该使用什么编辑器（Windows）？[从LyX](http://www.lyx.org/)开始是个好主意吗？

编辑：我不是在询问记录代码（我为此使用 Sandcastle）。

* * *

# 2014 年更新：

我们现在已经切换到[GFM（GitHub Flavored Markdown）](https://help.github.com/articles/github-flavored-markdown)。

*   这真的很容易使用。
*   在同一个 IDE 中编写代码和文档！
*   一切都可以版本化！
*   以原始 txt、[html](https://github.com/chjj/marked)或[pdf](http://johnmacfarlane.net/pandoc/)形式获得出色的输出！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-14T09:06:33.640

我对此的解决方案是花一些时间为自己创建一个像样的 Word 模板。

要做的重要事情是确保为可以放入文档中的所有内容定义了样式。

一旦您定义了所有样式并且**所有文档内容都用正确的样式进行了标记，**而不是以特别的方式格式化，您会惊讶于每次快速生成漂亮的 Word 文档是多么容易。

这里更广泛的问题是每个人都花几个小时在 Word 上，但公司很少投资 Word 培训。在某些时候，您必须硬着头皮花时间自学如何正确使用它，就像使用任何其他工具一样。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-05-14T09:15:43.230

你可以用 LyX 做的任何事情都可以用 LaTeX 做。LaTeX 适用于各种事物；它已被用于从手册到讲座幻灯片到小说的所有内容。

我认为 LaTeX 可能值得考虑作为一种选择；如果您曾经想为您的文字处理器“编码”，那么 LaTeX 适合您。在最简单的级别上，您可以定义新的命令来为您做事，但那里有很多功能。输出看起来*非常*整洁。

在我看来，LyX 在某些情况下很棒，在其他情况下很方便，但偶尔会妨碍你。我认为它应该被视为 LaTeX 的生产力助推器。换句话说，*在尝试 LyX 之前学习使用 LaTeX*。两者当然都是免费的并且可用于 Windows，尽管与 MS Word 相比学习曲线相当陡峭。对于长文档或大量类似文档，LaTeX/LyX 可能是值得的投资。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-14T09:03:39.903

我发现 wiki 可以很好地解决这个问题。找一个你喜欢的wiki，它可以让你做*一些*格式化，但没有什么很重的。理想情况下，它也应该让您轻松格式化代码 - 老实说，SO 上可用的降价可能是一个好的开始。

那样：

*   您有内置的更改跟踪（假设一个不错的 wiki）
*   您可以在任何地方进行编辑
*   每个人总是看到相同的文档（即时分发）
*   您可以专注于内容而不是格式

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-05-14T09:03:04.647

您可以使用自己的 XML 格式编写文档，然后使用 XSL 将其转换为任何格式（例如通过 FOP+XSL-FO 的 PDF）。另请参阅[DocBook](http://www.docbook.org/) XML 格式。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-14T09:05:09.620

LaTeX 是一个*非常*强大的工具，在这里很可能是矫枉过正，因为它是为科学/数学文献而设计的。它有一个（相对）陡峭的学习曲线，如果你不熟悉它，可能很难哄它完全按照你的意愿去做。我喜欢 LaTeX，但它并不是一个真正的通用文字处理器。

您是否考虑过使用 OpenOffice？

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-15T08:34:42.493

*如果您需要编写文档，*LaTeX确实是一种非常强大的语言。**

 *也许你可以试试[texmaker](http://www.xm1math.net/texmaker/)，一个跨平台的*LaTeX*编辑器：

> Texmaker 是一个干净的、高度可配置的 LaTeX 编辑器，具有良好的热键支持和大量的 Latex 文档。Texmaker 在一个应用程序中集成了许多使用 LaTeX 开发文档所需的工具。它具有一些不错的功能，例如语法突出显示、只需单击即可插入 370 个数学符号以及文档的“结构视图”，以便于导航。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-14T09:02:50.157

使用 HTML 怎么样？这样，如果需要许多人从许多地方访问它，您就可以发布文档。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-14T09:06:19.523

尽管付出了所有努力和合理的期望，但我认为文字处理尚未“解决”。

我对我个人也发现使用 MS Word 非常令人沮丧的体验的回应是完全避免它，并使用像[GhostDoc](http://www.roland-weigelt.de/ghostdoc/)这样的自动文档工具从*我已经在代码中编写的内容（DRY！）***生成 XML**并处理来自基于 XSLT 的 Intranet 站点或以后类似站点的 XML。

 ** * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-14T09:07:33.903

您是在谈论记录您的实际代码吗？如果是这样，我建议将[Doxygen](http://www.doxygen.org)用于非托管代码，将[Sandcastle](http://blogs.msdn.com/sandcastle/)用于托管代码。两者都将编译您的帮助或将其构建为您的网站。

两个应用程序都将读取函数/类/变量上方的特殊标签并将其编译到帮助中。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-14T09:18:35.670

我考虑过 wiki，但我决定使用修改后的 Markdown 表示法，原因很简单，wiki 的内容不容易导出和分发到 wiki 本身之外，而 Markdown 可以呈现为 HTML。

*回答 chris 关于我的工作流程的问题：*我使用原始 Markdown 格式的类似记事本的应用程序（[TextWrangler](http://www.barebones.com/products/TextWrangler/)，仅因为它的自动换行功能）编写文档。然后我有一个[小型 localhost 文档网站](http://github.com/wolfie/lf_refdoc/tree/master)，其中包含[我修改后的 Markdown 解析器](http://github.com/wolfie/php-markdown/tree/extra)（扩展了一些功能和更多面向 HTML 的功能），它检查文档文件的时间戳 - 如果文件已更新，它将将该文件解析为HTML，并将文件存储在缓存中。

通过这种方式，我可以在桌面上编辑源文档，只需在浏览器中按 F5 即可立即查看结果。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-14T09:23:49.840

好吧，我从一开始就没有发现 MS-Word 有什么问题。（即，如果您花时间知道如何有效地使用它）。[OpenOffice](http://www.openoffice.org/)确实是一个令人惊叹且可靠的免费替代方案 - 但是如果你讨厌 MS Word 的布局相关问题，同样的问题也会出现在 OpenOffice 上。

我自己从未尝试过[Latex](http://www.latex-project.org/)系统，但听说它对科学工作有好处。如果您只想专注于内容，我认为使用一些 HTML WYSIWYG 编辑器最适合您。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-15T09:40:01.447

我还没有尝试过，但我一直认为[AsciiDoc](http://www.methods.co.nz/asciidoc/)对这种事情有好处。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-07-28T07:53:15.483

如果你想要比 LaTeX 更简单的东西，你可以看看[ReStructured Text](http://docutils.sourceforge.net/docs/user/rst/quickstart.html)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-14T09:05:16.890

阅读本书：[http](http://en.wikipedia.org/wiki/The_Pragmatic_Programmer) ://en.wikipedia.org/wiki/The_Pragmatic_Programmer 。里面有一些idee fixe，所以应该自动构建文档。考虑为此使用您的 IDE，或寻找一些其他工具。大多数现代语言都支持在您编写代码时生成文档。这可以简单地使您的文档与代码中的最新更改保持联系。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-14T09:13:44.777

你可能想在[http://www.doxygen.nl/](http://www.doxygen.nl/)上查看 doxygen ，看看他们的好例子。在这种情况下，文档由源代码中的注释中的标签呈现。

另一种选择是使用在线系统，例如[http://trac.edgewall.org/](http://trac.edgewall.org/)中的 trac，它是一个基于 subversion 的 wiki/doc/issuetracking 系统。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-14T09:14:03.437

我更喜欢使用比文字更简洁的 RTF 编辑器。这样，格式和所有页眉/页脚的废话都不会占用你一半的时间。写字板曾多次为我工作。我现在被Word困住了:(

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-05-14T09:14:39.347

有很多可能的方法：

*   嵌入式文档，例如 javadoc：适合描述 API，但不适合“大局”
*   纯 html：可以在版本控制下签入，这是一个明确的优势
*   一个 wiki，例如 confluence——非常适合协作，但版本控制与您的源不同
*   LaTeX 或类似的东西：比典型的文档更适合书籍或论文；对图形的支持很麻烦
*   Office 克隆，例如 OpenOffice：与 Word+Visio 基本相同，但开源，具有更好的文档格式

我通常使用 Visio 在“自由格式”UML 中预先记录软件结构（项目的“隐喻”、组件相互关系、外部系统）。然后将这些嵌入到 confluence 中，如果有人想要打印输出，可以将其转换为 PDF。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-05-14T09:38:56.323

**莱克斯**

[LyX](http://www.lyx.org/)是 LaTeX 的[WYSIWYM](http://en.wikipedia.org/wiki/WYSIWYM)前端：您可以使用文档处理器（有点类似于 Word）的便利性以及 LaTeX 的一致性和强大功能：它不会妨碍您，并且可以完成*许多*专业作家需要的事情.

**注意：****您**的正确答案实际上取决于您的思维方式 --- 我们无法为您决定。如果您将文档视为文档并且想要类似于 Word 的东西（Word 很好）而不像 Word（Word 对程序员不利），那么这个答案只是显示了一个很好的选择。

但是许多程序员对文档的看法不同，因此更喜欢不同的隐喻。几年前我自己也遇到过同样的问题，使用 LaTeX（因为我是一名数学家），找到了 LyX，最后选择了我自己编写的 Wiki/Source 系统。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-05-14T09:39:55.417

Vim 是任何意味着以最有效的方式编写纯文本的解决方案。如果您需要格式化，请使用 XML、Latex 或类似的东西（在 Vim 中）。

Vim 改变了我的生活！

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-05-15T08:42:47.467

简单的答案：LaTeX 听起来正是您想要的。

我自己用它来编写文档。如果可以选择，我永远不会回到 Word。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-09-11T12:17:01.867

在[phc](http://phpcompiler.org)，我们从 Latex 开始，然后转到 docbook，并且（我希望永久）解决了 Restructured Text/Sphinx。

选择乳胶是因为我们是学者，而乳胶是首选工具。我相信它没有生成足够好的 HTML。

选择 Docbook 是因为它具有强大的功能，但它非常笨重。它让我们无法编写任何文档：代码必须手动格式化，我们总是忘记语法，而且很难阅读。学习曲线也很陡峭。

最后，我们使用[sphinx迁移到了](http://sphinx.pocoo.org/)[reST](http://docutils.sourceforge.net/rst.html) ，这是一个很棒的决定。文档现在很容易编写，[PDF](http://www.phpcompiler.org/src/archive/phc-0.2.0.3.pdf)和[HTML 版本](http://www.phpcompiler.org/doc/latest/treetutorial1.html)看起来都很漂亮（尽管 PDF 可以进行一些自定义）。它也很容易定制。

不过，关于 reST 最好的一点是它的源代码形式是人类可读的。这是一个奇妙的优势。我现在已经改用 reST 来处理我所有的东西，尤其是网络上的任何东西（当然学术论文除外，如果使用除了乳胶之外的任何东西都是愚蠢的）。

# objective-c - 类别如何运作？

> ID：862299
> 
> 赞同：5
> 
> 时间：2009-05-14T09:00:11.190
> 
> 标签：objective-c

我是 Objective-c 的新手，需要使用实例变量和访问器来扩展框架的标准类。我听说这是通过所谓的“类别”完成的，这对我来说听起来很混乱。这基本上是如何工作的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-14T18:15:25.973

类别将方法添加到类内的方法表中。将特定于应用程序的方法添加到现有框架类非常方便。

如果您需要将实例变量添加到类中，类别将无法完成这项工作——类别仅添加方法，而不添加数据。要添加实例变量，您必须子类化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T09:03:59.217

类的类别向该类添加方法。它不能添加实例变量。

如果您需要添加实例变量，则可能需要子类化。

# mysql - CakePHP 访问动态创建的表？

> ID：862303
> 
> 赞同：1
> 
> 时间：2009-05-14T09:01:42.357
> 
> 标签：mysql, cakephp, dynamic

作为 Web 应用程序的一部分，用户可以上传数据文件，这会在专用 MySQL 数据库中生成一个新表来存储数据。然后他们可以以各种方式操作这些数据。

这个应用程序的下一个版本是用 CakePHP 编写的，目前我不知道如何在运行时动态分配这些表。

我设置了不同的数据库配置，并且可以很好地创建数据上传表，但是一旦完成，我就无法从控制器访问新表作为数据操作的记录 CRUD 操作的一部分。

我希望它会沿着

```
function controllerAction(){ 
$this->uses[] = 'newTable'; 
$data = $this->newTable->find('all'); 

//use data 
} 
```

但它返回错误

> 未定义的属性：ReportsController::$newTable
> 
> 致命错误：在第 60 行的 /app/controllers/reports_controller.php 中的非对象上调用成员函数 find()

任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T09:40:15.807

您需要调用`$this->loadModel('newTable')`以正确初始化它。Cake 需要正确初始化 $this->newTable，并调用所有回调。

当然，您不需要`$this->uses[] = 'newTable';`，除了向 $uses 数组添加另一个值之外，它不会做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T10:09:26.783

尝试：

```
function controllerAction() {
  $data = ClassRegistry::init('ModelNameForNewTable')->find('all');
} 
```

如果您的表名为“new_tables”，则您的模型名称应为“NewTable”

# vb6 - 为什么我的 VB6 IDE 丢失了它的按钮和菜单项？

> ID：862305
> 
> 赞同：3
> 
> 时间：2009-05-14T09:02:09.050
> 
> 标签：vb6

我仍然必须使用 VB6 IDE。

不幸的是，每次我启动 IDE 时，工具栏的一个按钮都会消失。几乎总是先运行按钮。有时菜单栏或上下文菜单中的项目也会丢失。

我几乎每次启动 IDE 时都必须重置工具栏（这在典型的工作日中经常发生）。最近我买了一个IDE插件，它修改了菜单栏，每次重置菜单栏后都需要重新启动。（否则会崩溃）

我可以只接受重置，但重启真的很烦人。

有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-02-22T16:06:28.527

要解决这个问题：

1.  卸载所有加载项。
2.  右键单击工具栏并选择自定义...菜单。
3.  **对于每个**工具栏，单击**重置**... 按钮（总共 6 次）。
4.  重新加载加载项。

对我来说，行动 3 就足够了。

参看。[MZTools 常见问题解答](http://www.mztools.com/v3/faq.aspx#MakeProjectGroupDisabled)（感谢 Andrea Bonafini），但这些步骤最初来自[MSDN](http://support.microsoft.com/kb/266747/en-us)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-27T20:11:40.403

听起来您最近购买了一个糟糕的加载项。你能拿回你的钱吗？每次我在 IDE 中遇到控件消失的问题时，都是由于加载项错误造成的。您可以通过禁用它们来找出它是哪一个，每次使用IDE一段时间，然后重新启用它并禁用下一个，直到问题停止。

我仍然使用一个有问题的加载项。它表现出与您类似的行为，因为它使运行按钮消失。我只在需要时加载加载项，使用它（它格式化代码），然后立即卸载它，从而避免了这个问题。如果您不经常使用加载项的功能，这可能是一种可接受的解决方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T09:47:43.277

是的，我对其中一个加载项也有同样的问题。但是如果你重置它。关闭IDE并再次打开它而不做任何事情，IDE应该能够保留以前的干净设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T16:52:32.497

我在设置第一次使用 IDE 时遇到了类似的问题，但如果您使用同一个 IDE 一段时间可能没有帮助。当我第一次开始使用 IDE 时，我会修改工具栏，然后关闭 IDE。当提示我是否要保存打开的文件时，我总是说不，因为该文件只是我用来打开 IDE 的虚拟文件。原来 IDE 正在使用该文件保存工具栏首选项，因此它们从未被保存。

尝试打开一个文件，自定义 UI，保存文件，然后在不修改代码的情况下关闭。这就是我的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T09:36:41.027

这只是客人，但是：

IDE 上的每个图形元素（如按钮）都是一种资源（即 GDI 句柄）。

也许您的 VB 应用程序对这些资源的管理不够好，并且一段时间后 VB IDE 无法重绘按钮等元素（经常使用运行）。

此外，也许某些 IDE 插件与其他插件/应用程序发生冲突并破坏了某些东西——我在 Clip-X 和 MZ-Tools 中遇到了这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-02-22T09:44:29.947

如何在不重新安装的情况下恢复 VB6 IDE：

1.  运行注册表
2.  查找 Visual Basic 6.0 的条目
3.  导出您的设置以防万一出现问题
4.  删除“UI”设置
5.  运行VB，您将返回弹出菜单

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-08-04T09:11:12.110

我已经找到了问题所在，并且建议它是一个加载项。

**我禁用Visual Basic 6 Resource Editor**后问题就消失了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-17T09:40:13.880

“查找”按钮从我的 VB6 工具栏中消失，迫使我选择编辑菜单来使用查找。我启用了两个加载项：vbCodePrint 和 ResourceEditor；所以我取消了它们，关闭并重新打开 VB6，然后将两个加载项重新放入，我的按钮返回。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-14T09:05:50.350

重新安装、清理注册表并使用 SPack 等进行更新......

# iphone - 当相应的 UIImageView 被触摸时，如何将图像的数据库 ID 传递给方法？

> ID：862334
> 
> 赞同：0
> 
> 时间：2009-05-14T09:07:09.770
> 
> 标签：iphone, cocoa-touch, uikit

我有一个 UIImageViews 网格。图像名称来自 sqlite3 数据库。当用户选择图像时，我需要调用一个方法将该图像设置为首选图像。

但要做到这一点，此方法必须接收数据库中图像的 id。现在，我真的不知道如何实现在网格中单击特定 UIImageView 将调用该方法，并将 id 作为参数。

可以说我有这个方法：

*   (void)makeImageAsDefault:(NSInteger)imageID { .... }

在 InterfaceBuilder 中，当触摸事件发生时，我没有机会为操作方法提供正确的参数。我想我必须在这里以编程方式做一些事情。

在网络上，我会创建一个带有参数的 URL。在 iPhone-OS 上如何完成这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T09:37:56.217

您可以简单地使用 uiimageview 对象的 tag 属性并将 imageId 设置为它。

如果您指定并修改事件，您可以引用发送者（即 uiimageview 对象）从对象中获取标签并使用它做任何您想做的事情。

这是我猜的最简单的方法。如果您需要标记属性来做其他事情，您总是可以子类化 uiimageview 并向其添加额外的属性（这也是干净且正确的方法）

# wpf - 免费的 Wpf 调度程序控制

> ID：862342
> 
> 赞同：2
> 
> 时间：2009-05-14T09:08:09.707
> 
> 标签：wpf, controls, scheduler

WPF 是否有任何免费的调度程序控件？我找到了[ComponentOne](http://www.componentone.com/SuperProducts/ScheduleWPF/)和[Telerik](http://www.telerik.com/products/wpf/scheduler.aspx)

但它们不是免费的。我需要一些可以在学校项目中使用的具有同等功能的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T09:10:55.783

由于这是一个学校项目，因此您的使用将受到限制。我知道 Telerik 的人非常乐于助人。可能值得与他们联系，以“借给”您的项目许可证。毕竟，这对他们有好处，因为您随后会将它们推荐给其他人。有点像“教育许可证”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T05:09:39.813

Codeplex 有一个用于调度程序控件的开源控件，请参阅.. [http://wpfschedule.codeplex.com/](http://wpfschedule.codeplex.com/)。而且这个控件只有日常视图

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-14T09:29:40.560

[Devcomponents](http://www.devcomponents.com/dotnetbar-wpf/WPFScheduleControl.aspx)还有一个控件

您可以比较价格并购买。

# xsl-fo - 使用 XSL 在 JAVA 中生成 PDF 时出现问题。类 org.apache.fop.fo.flow.TableAndCaption 没有 LayoutManager 制造商

> ID：862343
> 
> 赞同：1
> 
> 时间：2009-05-14T09:08:42.480
> 
> 标签：xsl-fo, apache-fop

使用 XSL 在 JAVA 中生成 PDF 时遇到问题。总是得到“类 org.apache.fop.fo.flow.TableAndCaption 没有 LayoutManager 制造商”。这是 XSL 源代码：

```
<?xml version="1.0" encoding="Windows-1251"?>
<xsl:stylesheet version="1.1" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" exclude-result-prefixes="fo">
    <xsl:output method="xml" version="2.0" media-type="application/xslfo+xml" indent="yes" encoding="Windows-1251"/>
    <xsl:template match="RootPart">
        <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
            <fo:layout-master-set>
                <fo:simple-page-master master-name="allPages" page-height="297mm" page-width="210mm" margin-top="5mm" margin-bottom="5mm" margin-left="20mm" margin-right="5mm">
                    <fo:region-body margin-top="5mm"/>
                </fo:simple-page-master>
            </fo:layout-master-set>
            <fo:page-sequence font-family="arial" font-size="9pt" font-weight="normal" master-reference="allPages">             
                <fo:flow flow-name="xsl-region-body">
                    <fo:table-and-caption table-layout="fixed" >    
                        <fo:table border-style="solid" border-width="0.3mm" border-color="black">
                            <fo:table-column column-width="97mm"/>
                            <fo:table-column column-width="97mm"/>
                            <fo:table-header>
                                <fo:table-cell>
                                    <fo:block>TEST1</fo:block>
                                </fo:table-cell>
                                <fo:table-cell>
                                    <fo:block>TEST2</fo:block>
                                </fo:table-cell>
                            </fo:table-header>
                            <fo:table-body>
                                <fo:table-row height = "5mm">
                                        <fo:table-cell>
                                        <fo:block>Volvo</fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell>
                                        <fo:block>$50000</fo:block>
                                    </fo:table-cell>
                                </fo:table-row>
                                <fo:table-row>
                                    <fo:table-cell>
                                        <fo:block>SAAB</fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell>
                                        <fo:block>$48000</fo:block>
                                    </fo:table-cell>
                                </fo:table-row>
                            </fo:table-body>
                        </fo:table>
                    </fo:table-and-caption>
                </fo:flow>
            </fo:page-sequence>
        </fo:root>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T11:35:31.380

Apache FOP 还不支持 fo:table-and-caption。只需删除元素并直接使用 fo:table 即可。

另请参阅：http: [//xmlgraphics.apache.org/fop/compliance.html#fo-object-table-and-caption](http://xmlgraphics.apache.org/fop/compliance.html#fo-object-table-and-caption)

# language-agnostic - 如何评估哈希冲突概率？

> ID：862346
> 
> 赞同：30
> 
> 时间：2009-05-14T09:12:12.240
> 
> 标签：language-agnostic, md5, probability, estimation

我正在为搜索系统开发一个后端应用程序。搜索系统将文件复制到一个临时目录并给它们随机命名。然后它将临时文件的名称传递给我的应用程序。我的应用程序必须在有限的时间内处理每个文件，否则它会被关闭——这是一种类似看门狗的安全措施。处理文件可能需要很长时间，因此我需要设计能够处理这种情况的应用程序。如果我的应用程序在下次搜索系统想要索引同一个文件时关闭，它可能会给它一个不同的临时名称。

显而易见的解决方案是在搜索系统和后端之间提供一个中间层。它将请求排队到后端并等待结果到达。如果请求在中间层超时 - 没问题，后端将继续工作，只有中间层重新启动，当搜索系统稍后重复请求时，它可以从后端检索结果。

问题是如何识别文件。他们的名字随机变化。我打算使用像 MD5 这样的散列函数来散列文件内容。我很清楚[生日悖论](http://en.wikipedia.org/wiki/Birthday_Paradox)，并使用链接文章中的估计来计算概率。如果我假设我的文件不超过 100 000 个，则两个文件具有相同 MD5（128 位）的概率约为 1,47x10 ^(-29)。

我应该关心这种冲突概率还是只是假设相等的哈希值意味着相等的文件内容？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-05-14T10:15:43.490

相等的哈希意味着相等的文件，除非有人恶意破坏您的文件并注入冲突。（如果他们从互联网上下载东西，可能就是这种情况）如果是这种情况，请使用基于 SHA2 的功能。

没有意外的 MD5 碰撞，1,47x10 ^(-29)是一个非常非常非常小的数字。

为了克服重新散列大文件的问题，我将采用 3 阶段身份方案。

1.  单独的文件大小
2.  文件大小 + 文件中不同位置的 64K * 4 哈希
3.  一个完整的哈希

因此，如果您看到一个具有新大小的文件，您肯定知道您没有重复文件。等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-30T19:38:05.957

仅仅因为概率是 1/X 并不意味着在您拥有 X 条记录之前它不会发生在您身上。就像彩票一样，你不太可能赢，*但*有人*会赢*。

 *随着当今计算机的速度和容量（甚至不谈论安全性，只谈论可靠性），真的没有理由不使用比 MD5 更大/更好的散列函数来处理任何关键问题。升级到 SHA-1 应该可以帮助您在晚上睡得更好，但如果您想格外小心，请转到 SHA-265，永远不要再考虑它。

如果性能确实是一个问题，那么使用实际上比 MD5 更快但支持 256+ 位的 BLAKE2 以降低冲突的可能性，同时具有相同或更好的性能。然而，虽然 BLAKE2 已被广泛采用，但它可能需要向您的项目添加新的依赖项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T09:14:12.297

我认为你不应该。

但是，如果您有两个相同文件具有不同（真实名称，不是基于 md5）的概念，您应该这样做。例如，在搜索系统中，两个文档可能具有完全相同的内容，但由于它们位于不同的位置而不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-30T14:17:34.560

我想出了一种蒙特卡洛方法，以便在将 UUID 用于必须序列化而不会发生冲突的分布式系统时能够安全地睡觉。

```
from random import randint
from math import log
from collections import Counter

def colltest(exp):
    uniques = []
    while True:
        r = randint(0,2**exp)
        if r in uniques:
            return log(len(uniques) + 1, 2)
        uniques.append(r)

for k,v in Counter([colltest(20) for i in xrange(1000)]):
    print k, "hash orders of magnitude events before collission:",v 
```

会打印出类似的东西：

```
5 hash orders of magnitude events before collission: 1
6 hash orders of magnitude events before collission: 5
7 hash orders of magnitude events before collission: 21
8 hash orders of magnitude events before collission: 91
9 hash orders of magnitude events before collission: 274
10 hash orders of magnitude events before collission: 469
11 hash orders of magnitude events before collission: 138
12 hash orders of magnitude events before collission: 1 
```

我之前听过这个公式：如果你需要存储 log(x/2) 键，请使用至少具有键空间 e**(x) 的散列函数。

重复的实验表明，对于 1000 个 log-20 空间的群体，有时早在 log(x/4) 时就会发生碰撞。

对于 122 位的 uuid4，这意味着我可以安全地睡觉，而几台计算机会随机选择 uuid，直到我有大约 2**31 个项目。我正在考虑的系统中的峰值事务大约是每秒 10-20 个事件，我假设平均为 7 个。考虑到极端的偏执，这给了我大约 10 年的操作窗口。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-23T13:51:05.183

这是一个交互式计算器，可让您估计任何散列大小和对象数量的冲突概率 - [http://everydayinternetstuff.com/2015/04/hash-collision-probability-calculator/](http://everydayinternetstuff.com/2015/04/hash-collision-probability-calculator/)

# c# - Excel 加载项将数据从工作表传输到数据库：文件路径问题

> ID：862348
> 
> 赞同：1
> 
> 时间：2009-05-14T09:13:44.747
> 
> 标签：c#, sql-server, visual-studio-addins, object-model, excel-addins

我希望为 excel 创建一个插件，它可以读取当前的工作表数据，然后将其插入数据库。数据库连接需要文件位置。因此，不能应用这种方法，因为我必须发送我当前打开的文件并且无法指定文件路径。

此外，我需要将每列的数据插入到 SQL Server 数据库中表的单独列中。有什么建议和代码可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T04:45:25.030

您可以使用 VBA 使用 Excel 创建 Excel 加载项。您需要在 VBA 编辑器中添加对 Microsoft ActiveX 数据对象 (ADO) 的引用（使用工具 -> 引用），然后您将拥有对 Connection、Command、RecordSet 等对象的完全访问权限。

如果我这样做，我会让用户使用表单为每个导入批次指定数据库/表/列。然后，我将创建一个 Connection 对象并循环遍历每一行数据，以根据该行中的数据创建和执行插入命令。

完成后，您可以选择将完成的工作簿另存为 Excel 插件文件 (xla)，该文件可以分发给其他人。

以下是插入代码的示例：

```
Dim conn As New Connection
Dim comm As New Command
conn.Open YourConnectionString
Set comm.ActiveConnection = conn
comm.CommandText = "insert <table> (<column1>, <column2>, <column3>, ..., <columnN>)  values (" + <value1> + ", '" + <value2> + "', " + <value3> + ", '" + <valueN>+ "')"
comm.Execute
conn.Close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T09:53:30.893

是否必须在 Excel 中完成？您可以使用简单的 ADO.NET 应用程序执行此操作，为 Excel 指定一个 OleDb 提供程序，为 SQL 指定另一个提供程序。

[例子](http://cheeso.members.winisp.net/srcview.aspx?dir=MSOffice&file=ExtractToExcel.cs)

有[很多](http://search.live.com/results.aspx?q=excel+dataadapter+SQL&form=QBRE)关于该技术的文章。您可以在 SQL Server Integration Services (SSIS，以前称为 DTS) 中使用最少的代码执行相同的操作。这是一篇关于那个的[旧文章](http://support.microsoft.com/kb/321686)。

您也可以在 Excel 中执行此操作。使用 VS2005，您将使用 VSTO - Visual Studio Tools for Office；我认为VSTO的功能是包含在VS2008 Professional中的。VS+VSTO（或 VS2008）允许您为包括 Excel 在内的 Office 应用程序创建插件。在 AddIn 中，您可以在代码中执行任何您喜欢的操作，包括使用 System.Data.SqlClient 将数据插入 SQL Server。

# java - 从公共静态上下文访问私有静态方法

> ID：862350
> 
> 赞同：4
> 
> 时间：2009-05-14T09:14:01.907
> 
> 标签：java, security, oop, constraints

考虑这个示例类，

```
class TargetClass {
    private static String SENSITIVE_DATA = "sw0rdfish";

    private static String getSensitiveData() {
        return SENSITIVE_DATA;
    }
} 
```

当我这样做时，

```
import java.lang.reflect.Method;

public class ClassPiercing {

    public static void main(String... args) throws Exception {
        Class targetClass = Class.forName("TargetClass");
        Method[] methods = targetClass.getDeclaredMethods();
        methods[0].setAccessible(true);
        String sensitiveData = (String)methods[0].invoke(null, null);
        System.out.println("Sensitive Data: " + sensitiveData);
    }
} 
```

输出是，

```
Sensitive Data: sw0rdfish 
```

这是危险的。我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-14T09:18:59.633

好吧，使用 SecurityManager。

[http://java.sun.com/javase/6/docs/api/java/lang/SecurityManager.html](http://java.sun.com/javase/6/docs/api/java/lang/SecurityManager.html)

[http://java.sun.com/javase/6/docs/technotes/guides/security/permissions.html#ReflectPermission](http://java.sun.com/javase/6/docs/technotes/guides/security/permissions.html#ReflectPermission)

禁用 ReflectPermission 应该可以解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T09:20:07.290

访问控制的重点不是防止有人侵入您的代码；这是向其他程序员发出信号的问题（例如，api设计）。如果您不信任其他程序，则应使用不同的措施运行。例如，您可以以某种方式加密数据。

# html - html属性中的正则表达式匹配空格

> ID：862353
> 
> 赞同：2
> 
> 时间：2009-05-14T09:14:23.293
> 
> 标签：html, regex, replace, textmate

我有一堆带有这样行的html：

`<a href="#" rel="this is a test">`

我需要用下划线替换 rel 属性中的空格，但我有点像 regex-noob！

我正在使用 Textmate。

谁能帮我？

/雅各布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-17T16:20:58.710

寻找：`(rel="[^\s"]*)\s([^"]*")`

代替：`\1_\2`

这只会替换第一个空格，因此单击“全部替换”，直到不再替换任何内容。它并不漂亮但易于理解并且适用于每个编辑器。

`rel`如果您需要清除其他属性，请更改查找模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T09:19:29.553

假设你已经收到了 rel 的值：

```
var value = document.getElementById(id).getAttribute( "rel");
var rel = (new String( value)).replace( /\s/g,"_");
document.getElementById(id).setAttribute( "rel", rel); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T10:12:03.733

我认为你不能正确地做到这一点。虽然我想知道为什么你需要一次性完成？

我可以想到一个非常糟糕的方法，但即使我不推荐它，这里是：

你可以用下面的正则表达式来做。但是，您必须将捕获和输出的数量与 _ 结尾增加到 rel 中的潜在空格数。我敢打赌，这是不允许此解决方案的要求。

搜索：

```
{\<a *href\=\"[^\"]*" *rel\=\"}{([^ ]*|[^\"]*)}( |\")*{([^ ]*|[^\"]*)}( |\")*{([^ ]*|[^\"]*)}( |\")*{([^ ]*|[^\"]*)}( |\")*{([^ ]*|[^\"]*)}( |\")*{([^ ]*|[^\"]*)}( |\")*{([^ ]*|[^\"]*)}( |\")*{([^ ]*|[^\"]*)}( |\")* 
```

代替：

```
\1\2_\3_\4_\5_\6_\7_\8_ 
```

这种方式有两个缺点，一个是您可以在 Textmate 中捕获的数量可能会受到限制，二是您最终会在每行的末尾有大量的 _。

通过您当前的测试，使用上面的正则表达式，您最终会得到：

```
<a href="#" rel="this_is_a_test">____ 
```

PS：这个正则表达式是 Visual Studio 搜索/替换框的格式。您可能需要更改一些字符以使其适合文本板。

```
 {} => capturing group

  () => grouping

  [^A] => anything but A

  ( |\")* => space or "

  \1 => is the first capture 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T14:29:32.243

正则表达式根本不擅长解析 HTML（请参阅[您能否提供一些示例，说明为什么用正则表达式解析 XML 和 HTML 很困难？](https://stackoverflow.com/questions/701166)为什么）。您需要的是一个 HTML 解析器。请参阅[您能否提供一个使用您最喜欢的解析器解析 HTML 的示例？](https://stackoverflow.com/questions/773340)对于使用各种解析器的示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T14:35:57.127

我必须在这里接受“你使用错误的工具来完成工作”的培训。你有 Textmate，这意味着 OSX，这意味着你有 sed、awk、ruby 和 perl，它们都可以做得更好、更容易。

学习如何使用其中一种工具进行文本操作将在未来为您带来数不胜数的好处。这是一个可以让您轻松进入 sed 的 URL：http: [//www.grymoire.com/Unix/Sed.html](http://www.grymoire.com/Unix/Sed.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-14T14:53:55.147

如果您使用的是 TextMate，那么您使用的是 Mac，因此使用的是 Python。

试试这个：

```
#!/usr/bin/env python

import re

input = open('test.html', 'r')

p_spaces = re.compile(r'^.*rel="[^"]+".*$')

for line in input:
    matches = p_spaces.findall(line)

    for match in matches:
        new_rel = match.replace(' ', '_')
        line = line.replace(match, new_rel)

    print line, 
```

样本输出：

```
 $ cat test.html
testing, testing, 1, 2, 3
<a href="#" rel="this is a test">
<unrelated line>
Stuff
<a href="#" rel="this is not a test">
<a href="#" rel="this is not a test" rel="this is invalid syntax (two rels)">
aoseuaoeua

 $ ./test.py
testing, testing, 1, 2, 3
<a_href="#"_rel="this_is_a_test">
<unrelated line>
Stuff
<a_href="#"_rel="this_is_not_a_test">
<a_href="#"_rel="this_is_not_a_test"_rel="this_is_invalid_syntax_(two_rels)">
aoseuaoeua 
```

# java - 过于复杂的 oracle jdbc BLOB 处理

> ID：862355
> 
> 赞同：32
> 
> 时间：2009-05-14T09:15:35.243
> 
> 标签：java, oracle, jdbc, blob, clob

当我在网上搜索使用 jdbc 瘦驱动程序将 BLOB 插入 Oracle 数据库时，大多数网页都建议采用 3 步方法：

1.  插入`empty_blob()`值。
2.  选择带有 的行`for update`。
3.  插入实际值。

这对我来说很好，这是一个例子：

```
Connection oracleConnection = ...

byte[] testArray = ...

PreparedStatement ps = oracleConnection.prepareStatement(
    "insert into test (id, blobfield) values(?, empty_blob())");
ps.setInt(1, 100);
ps.executeUpdate();
ps.close();
ps = oracleConnection.prepareStatement(
    "select blobfield from test where id = ? for update");
ps.setInt(1, 100);
OracleResultSet rs = (OracleResultSet) ps.executeQuery();
if (rs.next()) {
    BLOB blob = (BLOB) rs.getBLOB(1);
    OutputStream outputStream = blob.setBinaryStream(0L);
    InputStream inputStream = new ByteArrayInputStream(testArray);
    byte[] buffer = new byte[blob.getBufferSize()];
    int byteread = 0;
    while ((byteread = inputStream.read(buffer)) != -1) {
        outputStream.write(buffer, 0, byteread);
    }
    outputStream.close();
    inputStream.close();
} 
```

在某些网页上，作者建议使用更简单的 1 步解决方案。此解决方案的上一个示例：

```
Connection oracleConnection = ...

byte[] testArray = ...

PreparedStatement ps = oracleConnection.prepareStatement(
    "insert into test(id, blobfield) values(?, ?)");
BLOB blob = BLOB.createTemporary(oracleConnection, false, BLOB.DURATION_SESSION);
OutputStream outputStream = blob.setBinaryStream(0L);
InputStream inputStream = new ByteArrayInputStream(testArray);
byte[] buffer = new byte[blob.getBufferSize()];
int byteread = 0;
while ((byteread = inputStream.read(buffer)) != -1) {
    outputStream.write(buffer, 0, byteread);
}
outputStream.close();
inputStream.close();

ps.setInt(1, 100);
ps.setBlob(2, blob);
ps.executeUpdate();
ps.close(); 
```

第二个代码要容易得多，所以我的问题是：第一个（流行的）解决方案有什么意义？第二种解决方案（Oracle 服务器版本号、jdbc 驱动程序版本、blob 大小……）是否存在（是否存在）某种约束？第一个解决方案更好（速度，内存消耗，......）？有什么理由不使用更简单的第二种方法？

完全相同的问题适用于 CLOB 字段。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-14T13:15:18.660

您在第一种情况下提到的更新方法可以使用纯 JDBC 代码重写，从而减少您对 Oracle 特定类的依赖。如果您的应用程序需要与数据库无关，这可能会有所帮助。

```
public static void updateBlobColumn(Connection con, String table, String blobColumn, byte[] inputBytes, String idColumn, Long id) throws SQLException {
  PreparedStatement pStmt = null;
  ResultSet rs = null;
  try {
    String sql = 
      " SELECT " + blobColumn + 
      " FROM " + table + 
      " WHERE " + idColumn + " = ? " +
      " FOR UPDATE";
    pStmt = con.prepareStatement(sql, 
      ResultSet.TYPE_FORWARD_ONLY, 
      ResultSet.CONCUR_UPDATABLE);
    pStmt.setLong(1, id);
    rs = pStmt.executeQuery();
    if (rs.next()) {
      Blob blob = rs.getBlob(blobColumn);
      blob.truncate(0);
      blob.setBytes(1, inputBytes);
      rs.updateBlob(blobColumn, blob);
      rs.updateRow();
    }
  }
  finally {
    if(rs != null) rs.close();
    if(pStmt != null) pStmt.close();
  }
} 
```

对于 MSSQL，我知道锁定语法是不同的：

```
String sql = 
  " SELECT " + blobColumn + 
  " FROM " + table + " WITH (rowlock, updlock) " + 
  " WHERE " + idColumn + " = ? " 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-03-15T15:20:04.273

Another point of view from Oracle DBA. Sun guys did very poor job when they designed JDBC standards(1.0, 2.0, 3.0, 4.0). BLOB stands for large object and therefore it can be very large. It is something that can not be stored in JVM heap. Oracle thinks of BLOBs as something like file handles(it fact they are call then "lob locators"). LOBS can not be created via constructor and are not Java objects. Also LOB locators(oracle.sql.BLOB) can not be created via constructor - they MUST be created in the DB side. In Oracle there are two ways how to create a LOB.

1.  DBMS_LOB.CREATETEMPORATY - the returned locator in this case points into temporary tablespace. All the writes/reads against this locator will be sent via network onto DB server. Nothing is stored in JVM heap.

2.  Call to EMPTY_BLOB function. INSERT INTO T1(NAME, FILE) VALUES("a.avi", EMPTY_BLOB()) RETURNING FILE INTO ?; In this case returned lob locator points into data tablespace. All the writes/reads against this locator will be sent via network onto DB server. All the writes are "guarded" by writes into redo-logs. Nothing is stored in JVM heap. The returning clause was not supported by JDBC standards (1.0, 2.0), therefore you can find many examples on the internet where people recommend approach of two steps: "INSERT...; SELECT ... FOR UPDATE;"

Oracle lobs must be associated with some database connection, they can not be used when DB connection is lost/closed/(or "commited"). They can not be passed from one connection to another.

You second example can work, but will require excessive copying if data from temporary tablespace into data tablespace.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-17T03:17:17.980

JDBC 的一件有趣的事情是您可以相当积极地升级到最新的驱动程序并使用 JDBC 4.0 功能。oracle JDBC 驱动程序适用于较旧的数据库版本，因此您可以针对 10g 数据库使用 11g 品牌的 JDBC 驱动程序。Oracle 数据库 11g JDBC 有两种形式：用于 Java 5（即 JDK 1.5）的 ojdbc5.jar 和用于 Java 6（即 JDK 1.6）的 ojdbc6.jar。ojdbc6.jar 支持新的 JDBC 4.0 规范。

使用较新的驱动程序/jdbc 4.0，您可以从连接对象创建 Blob 和 Clob：

```
Blob aBlob = con.createBlob();
int numWritten = aBlob.setBytes(1, val); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-14T09:59:11.113

Oracle 服务器的 LOB 处理非常差，并且可能会遭受严重的性能问题（例如重做日志的大量过度使用），因此第一个解决方案可能是解决这些问题的方法。

我建议尝试这两种方法。如果您有一个称职的 DBA，他们可能会建议哪种方法对服务器的影响最小。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-08-17T21:36:36.037

这个说法 ：

```
blob.setBytes(1, inputBytes); 
```

**当我使用 oracle 瘦客户端 ojdbc14.jar 时出现问题，“不支持的功能”**

所以，我不得不解决：

```
rset.next();
Blob bobj = rset.getBlob(1);
BLOB object = (BLOB) bobj;
int chunkSize = object.getChunkSize();
byte[] binaryBuffer = new byte[chunkSize];
int position = 1;
int bytesRead = 0;
int bytesWritten = 0, totbytesRead = 0, totbytesWritten = 0;
InputStream is = fileItem.getInputStream();
while ((bytesRead = is.read(binaryBuffer)) != -1) {
bytesWritten = object.putBytes(position, binaryBuffer, bytesRead);
position += bytesRead;
totbytesRead += bytesRead;
totbytesWritten += bytesWritten;
is.close(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-07-04T22:10:10.627

如果 CLOB 数据足够小以适合您的内存而不会爆炸，您可以创建一个准备好的语句并简单地调用

```
ps.setString(1, yourString); 
```

可能还有其他大小限制，但它似乎适用于我们正在处理的大小（最大 500kB）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-01T13:29:54.633

为第二种解决方案找到了一些注意事项

我正在使用 ojdbc6.jar - 最新版本和来自“第二个解决方案”的声明：

```
BLOB blob = BLOB.createTemporary(oracleConnection, false, BLOB.DURATION_SESSION); 
```

我必须在语句完成后释放 blob - 否则当会话关闭时 blob 会关闭（连接池可能需要很长时间）。

```
blob.freeTemporary(); 
```

否则你可以看到锁定的资源：

```
select * from v$temporary_lobs 
```

临时 BLOB 的另一个问题是需要分配临时表空间：根据文档[http://docs.oracle.com/cd/E11882_01/appdev.112/e18294.pdf](http://docs.oracle.com/cd/E11882_01/appdev.112/e18294.pdf)

*管理临时 LOB 的临时表空间 临时表空间用于存储临时 LOB 数据*

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-25T17:12:53.160

`setObject(pos, byte[])`我找到了一个适合我的案例的简单调用。来自George Reese*的 JDBC 和 Java 数据库编程，*

```
 byte[] data = null;
        stmt = con.prepareStatement("INSERT INTO BlobTest(fileName, "
            + "blobData) VALUES(?, ?)");
        stmt.setString(1, "some-file.txt");
        stmt.setObject(2, data, Types.BLOB);
        stmt.executeUpdate(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-20T06:08:08.247

如果**插入 BLOB 的大小大于 blob.getBufferSize()**，则事务会在第一个块写入 db后立即提交，因为**jdbc 连接的 autoCommit 属性的默认值为 true**并且进一步的块写入失败，因为 db 将它们视为新事务。建议如下：
a) 将 jdbc 连接 autoCommit 属性设置为 false。

```
conn.setAutoCommit(false); 
```

b) 上传整个 BLOB 后显式提交事务。

```
while ((bytesRead = messageInputStream.read(buffer)) != -1) {
     cumBytes += bytesRead;
     blobOutputStream.write(buffer, 0, bytesRead);
    }
conn.commit(); 
```

# sql-server - 重新定义 MS Access 文件和 SQL Server 之间的数据链接

> ID：862363
> 
> 赞同：0
> 
> 时间：2009-05-14T09:17:56.733
> 
> 标签：sql-server, sql-server-2005, ms-access

我在 SQL Server 上有一个非常标准的数据库。为了管理数据（而不是使用 IDE 创建解决方案），我使用 MS-Access 链接到数据库（4 个用户作为开始。我正在测试一个概念，一旦有足够的数据就可以开发一个完整的解决方案） .

*MS-Access > 新文件 > 使用现有数据的项目... *指定 SQL Server 服务器 *创建表单等等。数据现在在 Access 中可用/可编辑。

考虑到 sql 数据库并不总是在我的笔记本电脑上运行，Access 文件的服务器引用将不得不更改。

如何修改/重新定义 Access 文件和 SQL 服务器之间的数据链路？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T10:30:21.990

转到文件 > 连接以打开数据源选择窗口。

# iphone - 将 IBAction 分配给导航栏的后退按钮 (iPhone SDK)

> ID：862374
> 
> 赞同：0
> 
> 时间：2009-05-14T09:21:20.890
> 
> 标签：iphone, view, uinavigationbar, flip

在这篇 ( [Flip View Iphone](https://stackoverflow.com/questions/843534/flip-view-iphone) ) 帖子中，我为我的 iPhone 应用程序创建了一个翻转视图。现在，我想确保每当用户点击导航栏中的“返回”按钮时，下一次当他向下钻取到可翻转视图时，该视图处于其原始的非翻转位置。目前，该应用程序实际上加载了正确的视图，但不知何故，当您尝试翻转它时，它不能不加载翻转视图，并且只呈现黑色背景。一种解决方案可能是将翻转方法（“showLessInfo”）分配给导航按钮，这就是我需要您帮助的原因。或者，对我来说，一个更好的主意很可能是理解为什么第二次没有加载翻转视图。欢迎任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T16:23:47.880

您可以覆盖`viewWillAppear:`翻转视图的视图控制器上的方法，并确保它在显示之前加载正确的视图（记得调用`[super viewWillAppear:animated]`）。

否则，您可以覆盖`viewWillDisappear`并确保在外出时清理干净。当用户点击后退按钮时，它将被调用。

# sql - 我如何评估这个查询？

> ID：862376
> 
> 赞同：0
> 
> 时间：2009-05-14T09:22:00.640
> 
> 标签：sql, sql-server, sql-server-2005

此查询给我错误：Msg 156, Level 15, State 1, Line 10 关键字“where”附近的语法不正确。

```
declare @date1 datetime,@date2 datetime , @COUNT INT , @countgap int, @order int
seLECT @date1='2009-05-11' , @date2 = '2009-05-12'
seLECT @countgap = 30 , @COUNT = 0, @order=23 

select VisitingCount from (
select count(page) as VisitingCount,   
    (datepart(hour,Date)*60+datepart(minute,Date))/@countgap as OrderNumber 
    from scr_SecuristLog  
    where Date between @date1 and  @date2
    GROUP BY (datepart(hour,Date)*60+datepart(minute,Date))/@countgap) where OrderNumber=@order
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T09:26:08.897

或许：

```
GROUP BY (datepart(hour,Date)*60+datepart(minute,Date))/@countgap) 
HAVING OrderNumber=@order 
```

或者：

```
where (Date between @date1 and  @date2) AND OrderNumber=@order
GROUP BY (datepart(hour,Date)*60+datepart(minute,Date))/@countgap) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T10:02:01.917

您需要为您的派生表命名，例如 DT1。在这里，我根据个人喜好重新格式化了 SQL 文本 :) 以使其更易于阅读：

```
select DT1.VisitingCount 
  from (
        select count(page) as VisitingCount,   
               (datepart(hour,Date)*60+datepart(minute,Date))/@countgap 
                  as OrderNumber 
          from scr_SecuristLog  
         where Date between @date1 and  @date2
         GROUP 
            BY (datepart(hour,Date)*60+datepart(minute,Date))/@countgap
       ) AS DT1 
 where DT1.OrderNumber=@order 
```

# iphone - 为什么我不能执行这段代码？

> ID：862378
> 
> 赞同：0
> 
> 时间：2009-05-14T09:22:08.610
> 
> 标签：iphone, sqlite

```
NSString *event=@"max";
NSString *venue=@"tvm";
NSString *edate=@"may 6";
NSString *etime=@"10:30";
int admts=5;
NSString *ima=ticobj.iimg;
sqlite3 *database;
databaseName = @"smbhDB.sql";
sqlite3_stmt *addStatement ;
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
databasePath = [documentsDir stringByAppendingPathComponent:databaseName];
if(addStatement == nil) {
    const char *sql ="insert into tickets (admittance, venue, event, date, time, imagedata) Values (?,?,?,?,?,?)";

    if(sqlite3_prepare_v2(database, sql, -1, &addStatement, NULL) != SQLITE_OK)
        NSAssert1(0, @"444 Error while creating add  statement. '%s'", sqlite3_errmsg(database));
}

sqlite3_bind_int(addStatement,1,admts);

sqlite3_bind_text(addStatement, 2, [venue UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(addStatement, 3, [event UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(addStatement, 4, [edate UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(addStatement, 5, [etime UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(addStatement, 6, [ima UTF8String], -1, SQLITE_TRANSIENT);

if(SQLITE_DONE != sqlite3_step(addStatement))
    NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
if(sqlite3_prepare_v2(database, sql, -1, &Statement, NULL) == SQLITE_OK) {
sqlite3_exec(database, sql, -1, &Statement, NULL);
}

sqlite3_reset(addStatement); 
```

为什么我不能执行这段代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T11:32:12.217

哪里

`sqlite3_open([databasePath UTF8String], &database);`?

您不能使用封闭的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T03:51:43.897

```
-(BOOL)insertDatabaseValue:(SignIn *)objFavourie isUpdate:(BOOL)update
{

BOOL returnValue = YES;
sqlite3_stmt *insertStmt = nil;
sqlite3  *database = nil;

if (sqlite3_config(SQLITE_CONFIG_SERIALIZED) == SQLITE_OK){
    returnValue = NO;
}

if (sqlite3_open([DataBasePath UTF8String], &database) == SQLITE_OK){

    if(insertStmt == nil) {
        NSString *aString;
        if(!update)
            aString =[NSString stringWithFormat:@"INSERT INTO Sanjay('Name', 'Password') Values(?, ?)"];

        else 
            aString =[NSString stringWithFormat:@"UPDATE Sanjay SET Password = ? where 'Name'=%@",objFavourie.strName]; 

        const char *sql = [aString UTF8String];

        if(sqlite3_prepare_v2(database, sql, -1, &insertStmt, NULL) != SQLITE_OK)
        {
            NSLog(@"Error while creating insert :%s add statement.", sqlite3_errmsg(database));
            returnValue = NO;
        }
    }
    if(sqlite3_bind_text(insertStmt, 1, [objFavourie.strName UTF8String], -1, SQLITE_TRANSIENT) != SQLITE_OK){
        returnValue = NO;
    }
    if(sqlite3_bind_text(insertStmt, 2, [objFavourie.strPassword UTF8String], -1, SQLITE_TRANSIENT) != SQLITE_OK) {
        returnValue = NO;
    }

    if(SQLITE_DONE != sqlite3_step(insertStmt)){
        NSLog(@"Error while inserting into '%s'", sqlite3_errmsg(database)); 
        returnValue = NO;
    }
    sqlite3_reset(insertStmt);    

    if (insertStmt) {
        sqlite3_finalize(insertStmt);
        insertStmt = nil;
    }

    sqlite3_close(database);
    database = nil;
}
else {
    returnValue = NO;
}

return returnValue; 
```

}

# asp.net - 如何根据国际化存储日期时间

> ID：862379
> 
> 赞同：0
> 
> 时间：2009-05-14T09:22:35.100
> 
> 标签：asp.net

我有一个项目，顶部有国家下拉菜单以选择国家。例如美国、印度和香港。根据国家/地区的选择，将启用或禁用几个功能。

在项目中，我默认有基准国家，例如印度。因此，无论何时任何用户都会来。无论用户来自香港、美国还是印度，我都想按照印度标准时间存储其登录日期时间。我的网络服务器托管在美国。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T09:26:20.457

如果您将时间保存在 unixtime 中，您可以在用户表中拥有一个名为 offset 的字段。它的价值在于系统需要多少时间来抵消时间。

然后，您只需获取该变量并将其保存为会话值或类似的东西。并用它来抵消系统中的日期时间。

例如。香港距格林威治标准时间 +8 小时。现在在 GMT Unix 时间是：1242293400（上午 9:30）。8 小时是 28800 秒。然后，您将此值存储在您的服务器中。所以时间是 1242322200（当天下午 5:30）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T17:08:36.587

您想要做的是将任何日期时间值存储为[UTC](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)。这意味着存储为与时区无关的值。

您可以在 MS-SQL 服务器中设置某种插入触发器（由于 asp.net 部分，我假设您使用 MS-SQL）。在那里，您可以像这样确定 UTC 时间。

```
`-- MS SQL (use instead of GETDATE())
DECLARE @currentTime datetime
SET @currentTime = GETUTCDATE()` 
```

如果您想在代码中执行此操作，只需使用 UtcTimeNow 来访问 UTC 时间。

```
 // C# (use instead of DateTime.Now)
DateTime currentTime = DateTime.UtcNow; 
```

如果您愿意，您可以随时将 UTC 时间转换为任何给定的本地时间。通过使用[TimeZoneInfo](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttime.aspx)类。

这样，您的数据库中就有正确的时间 (UTC)，并且可以将其转换为适合用户的时间。

处理时间和时区时最重要的部分是将其存储为 UTC。这样它就可以很容易地运输和比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T09:28:30.670

如果您使用的是 SQL Server 2008，请查看允许您存储偏移量/时区的新日期时间数据类型。

# python - 删除除两个特定目录外的所有文件/目录

> ID：862388
> 
> 赞同：5
> 
> 时间：2009-05-14T09:25:37.417
> 
> 标签：python, linux, bash

因此，似乎有一些问题询问有关删除与某些情况匹配的文件/目录的问题，但我正在寻找完全相反的情况：删除与我提供的示例不匹配的文件夹中的所有内容。

例如，这是一个示例目录树：

```
.
|-- coke
|   |-- diet
|   |-- regular
|   `-- vanilla
|-- icecream
|   |-- chocolate
|   |-- cookiedough
|   |-- cupcake
|   |   |-- file1.txt
|   |   |-- file2.txt
|   |   |-- file3.txt
|   |   |-- file4.txt
|   |   `-- file5.txt
|   `-- vanilla
|-- lol.txt
|-- mtndew
|   |-- classic
|   |-- codered
|   |-- livewire
|   |   |-- file1.txt
|   |   |-- file2.txt
|   |   |-- file3.txt
|   |   |-- file4.txt
|   |   `-- file5.txt
|   `-- throwback
`-- pepsi
    |-- blue
    |-- classic
    |-- diet
    `-- throwback 
```

我想删除除 test/icecream/cupcake/ 和 test/mtndew/livewire/ 中的文件之外的所有内容。其他一切都可以，包括目录结构。那么，我该如何实现呢？我不介意使用的语言：bash 或 python。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-14T13:18:39.340

此命令将仅将所需文件保留在其原始目录中：

```
find test \( ! -path "test/mtndew/livewire/*" ! -path "test/icecream/cupcake/*" \) -delete 
```

不需要cpio。它适用于 Ubuntu、Debian 5 和 Mac OS X。

在 Linux 上，它会报告它无法删除非空目录，这正是想要的结果。在 Mac OS X 上，它会悄悄地做正确的事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T10:30:37.683

`find`'s`-prune`浮现在脑海中，但让它适用于特定路径（`icecream/cupcake/`）而不是特定目录（`cupcake/`）是一件痛苦的事。

就个人而言，我只是使用`cpio`并硬链接（以避免复制它们）您要保留到新树的目录中的文件，然后删除旧的：

```
find test -path 'test/icecream/cupcake/*' -o -path 'test/mtndew/livewire/*' | cpio -padluv test-keep
rm -rf test 
```

这也将为您打算保留的目录保留现有的目录结构。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T10:20:06.833

所有“除了”都是我们有 if 语句的原因；以及为什么 os.walk 的目录列表是可变列表。

```
for path, dirs, files in os.walk( 'root' ):
    if 'coke' in dirs:
        dirs.remove('coke')
        dirs.remove('pepsi') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-14T10:14:26.257

你可以基于[Python 的 os.walk 函数](http://docs.python.org/library/os.html)做一些事情：

```
import os
for root, dirs, files in os.walk(top, topdown=False):
    for name in files:
        os.remove(os.path.join(root, name))
    for name in dirs:
        os.rmdir(os.path.join(root, name)) 
```

...只需添加一些内容以忽略您感兴趣的路径。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-14T10:45:50.360

把你想保留的东西移到别处，然后删除剩下的东西。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-08-27T10:53:07.443

```
find /path/to/test/ -depth -mindepth 1 \
! -path "/path/to/test/icecream/cupcake/*" \
! -path "/path/to/test/icecream/cupcake" \
! -path "/path/to/test/icecream" \
! -path "/path/to/test/mtndew/livewire/*" \
! -path "/path/to/test/mtndew/livewire" \
! -path "/path/to/test/mtndew"
 -delete -print 
```

编写所有要保存的路径有点乏味，但这是单独使用 find 的唯一方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T09:43:04.800

使用[`find`](http://unixhelp.ed.ac.uk/CGI/man-cgi?find).

您的命令将类似于：

```
find $directory \( -prune 'some pattern' \) -delete 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-14T10:50:51.863

解决问题的oneliner：

~~寻找 。|grep -v "测试/冰淇淋/纸杯蛋糕/"| grep -v "测试/mtndew/livewire/"|xargs rm -r~~

已删除，因为它不起作用

如果文件名中包含空格，这可能会给您带来麻烦，并且如果有其他与模式匹配的树，它可能会保留比您想要的更多的文件。

一个更好的解决方案：

```
find . |sed "s/.*/rm '&'/"|grep -v "rm './test/icecream/cupcake/"| grep -v "rm './test/mtndew/livewire/"|sh 
```

没有经过实际测试，如果它坏了，你可以保留这两个部分。

编辑：正如丹尼斯指出的那样，它不仅分为两个部分:-) 更正了第二个示例中的错别字并删除了第一个

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-14T14:49:48.277

它适用于我的 find 使用两个步骤：首先删除允许的文件，然后删除它们的空目录！

```
find -x -E ~/Desktop/test -not \( -type d -regex '.*/(cupcake|livewire)/*.*' -prune \) -print0 | xargs -0 ls -1 -dG 

# delete the files first

# Mac OS X 10.4 
find -x -E ~/Desktop/test -not \( -type d -regex '.*/(cupcake|livewire)/*.*' -prune \) -type f -exec /bin/rm -fv '{}' \; 

# Mac OS X 10.5 
find -x -E ~/Desktop/test -not \( -type d -regex '.*/(cupcake|livewire)/*.*' -prune \) -type f -exec /bin/rm -fv '{}' + 

# delete empty directories 
find -x ~/Desktop/test -type d -empty -delete 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-15T02:52:00.287

像其他人一样，我使用 os.walk 和 os.path.join 来构建要删除的文件列表，使用 fnmatch.fnmatch 来选择必须包含或排除的文件：

```
#-------------------------------#
# make list of files to display #
#-------------------------------#
displayList = []
for imageDir in args :
    for root,dirs,files in  os.walk(imageDir) :
        for filename in files :
            pathname = os.path.join( root, filename ) 
            if fnmatch.fnmatch( pathname, options.includePattern ) :
                displayList.append( pathname )

#----# now filter out excluded patterns #----#
try :
    if len(options.excludePattern) > 0 :
        for pattern in options.excludePattern :
            displayList = [pathname for pathname in displayList if not fnmatch.fnmatch( pathname, pattern ) ]
except ( AttributeError, TypeError ) :
    pass 
```

如果 fnmatch 还不够，您可以使用 re 模块来测试模式。

在这里，我在对其进行任何操作之前已经构建了文件列表，但是您可以在生成文件时对其进行处理。

try/except 块...如果我的选项类实例没有排除模式，或者它在 fnmatch 中导致异常，因为它是错误的类型。

此方法的一个限制是它首先*包含*与模式匹配的文件，*然后排除*. 如果您需要比这更多的灵活性（包括匹配模式 a，但不包括模式 b，除非模式 c ...），那么上面的片段不适合它。事实上，通过本练习，您开始了解 find 命令语法为何如此。看起来很笨重，但实际上这正是这样做的方法。

但是，如果您生成一个列表，您可以根据您需要的任何包含/排除规则对其进行过滤。

生成列表的一个好处是您可以在继续删除之前检查它。这是一种“--dryrun”选项。您可以在 python 解释器中以交互方式执行此操作，打印列表以查看其外观，应用下一个过滤器，查看它是否删除了太多或太少等等。

# java - How to pass the -D System properties while testing on Eclipse?

> ID：862391
> 
> 赞同：98
> 
> 时间：2009-05-14T09:26:18.680
> 
> 标签：java, eclipse

I am developing on Eclipse on Windows and Code gets deployed on Unix. I am fetching the system property values using System.getProperty("key") ... How do I pass this in Eclipse so that I do not have to modify the code and it works on Eclipse for debugging?

Any suggestions?

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2009-05-14T09:29:17.220

Run -> Run configurations, select project, second tab: “Arguments”. Top box is for your program, bottom box is for VM arguments, e.g. `-Dkey=value`.

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-05-19T12:56:32.390

You can use java `System.properties`, for using them from eclipse you could:

1.  Add `-Dlabel="label_value"` in the VM arguments of the test `Run Configuration` like this:

[![eclipse_vm_config](https://i.stack.imgur.com/jI0gN.png)](https://i.stack.imgur.com/jI0gN.png)

2.  Then run the test:

    ```
    import org.junit.Test;
    import static org.junit.Assert.assertEquals;

    public class Main {
        @Test
        public void test(){
            System.out.println(System.getProperty("label"));
            assertEquals("label_value", System.getProperty("label"));
        }
    } 
    ```

3.  Finally it should pass the test and output this in the console:

    ```
    label_value 
    ```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-05-14T09:29:21.917

You can add command line arguments to your run configuration. Just edit the run configuration and add -Dmyprop=value (or whatever) to the VM Arguments Box.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-20T12:44:55.467

This will work for junit. for TestNG use following command

```
-ea -Dmykey="value" -Dmykey2="value2" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-01T05:01:48.797

Yes this is the way:

Right click on your program, select run -> run configuration then on vm argument

```
-Denv=EnvironmentName -Dcucumber.options="--tags @ifThereisAnyTag" 
```

Then you can apply and close.

# asp-classic - 如何将 ASP 经典常量声明为数据类型？

> ID：862396
> 
> 赞同：1
> 
> 时间：2009-05-14T09:27:16.383
> 
> 标签：asp-classic

在 asp classic 和 vbscript 中，您可以使用十六进制值和日期类型值声明一个 Const：

```
 Const C_LIGHTCYAN = &hCCFFEE
 Const C_STARTDATE = #1 JAN 2000# 
```

但是如何声明货币、单或双数据类型？

```
 Const C_LONG = 1024 '# I want this to be a LONG, not an INT! 
```

*我确定我已经看到类似`Const C_LNG = L12345`或其他一些前缀/后缀组合的长或双精度，但现在找不到源*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T09:35:08.563

您不能在 ASP 中声明具有数据类型的变量，只需在 decleration 中设置值，这应该可以正常*工作*。

~~我认为无论如何都没有货币类型。~~对于双倍，您可以 1.00 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T20:12:44.773

这是[VBScript 的 CLng 函数](http://devguru.com/technologies/vbscript/13908.asp)。但是既然不能声明使用函数来声明常量，也不能重新赋值给常量，那么这里真的要使用常量吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-19T13:59:16.233

虽然您无法在 Windows 脚本（VBScript、ASP）中**声明数据类型，但您可以****将**变量分配为一种类型，然后验证该变量的类型。VBScript 不提供类型保护，因此您可以将声明的变量重新分配给不同的类型。这种*松散的打字*策略是问题的根源之一。

```
Dim textVariable : textVariable = "Hello World!"
WScript.Echo TypeName(textVariable)
' Returns Text

Dim integerVariable : integerVariable = 6
WScript.Echo TypeName(integerVariable)
' Returns Integer

Dim objectVariable : set objectVariable = CreateObject("Scripting.Dictionary")
WScript.Echo TypeName(objectVariable)
' Returns Object 
```

有些类型需要一些蛮力和诡计。[数据类型](https://stackoverflow.com/a/64616421/3133043)就是一个例子[。`binary`](https://stackoverflow.com/a/64616421/3133043)

```
Dim generateData(1) : generateData(0) = &HFF
Dim mem : Set mem = CreateObject("System.IO.MemoryStream")
mem.SetLength(0)
mem.WriteByte (generateData(0))
Dim byteArray : byteArray = mem.ToArray()
'Returns a VB Style, "Byte()"   [Byte Array] 
```

# apache-flex - Adobe Flex - 如何跳转视图？

> ID：862400
> 
> 赞同：0
> 
> 时间：2009-05-14T09:28:41.217
> 
> 标签：apache-flex, flex3

我知道我们需要创建 MXML 文件来定义视图。假设用户单击一个按钮，我想显示另一个 MXML 文件中定义的另一个视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T09:41:52.137

您可以使用视图堆栈。视图堆栈中的每个项目都将是一个不同的 MXML 文件，因此当用户单击按钮时，您会更改视图堆栈的选定索引，从而更改视图。

您可能可以查看[http://www.adobe.com/devnet/flex/tourdeflex/](http://www.adobe.com/devnet/flex/tourdeflex/)中的示例，这将比简单的答案更有助于解释。从您的问题看来，您需要先了解 flex 的基础知识，并且 tour de flex 应用程序包含大量带有源代码的示例。HTH。

# flash - flash cs4中的facebook as3库

> ID：862402
> 
> 赞同：0
> 
> 时间：2009-05-14T09:28:59.577
> 
> 标签：flash, facebook, air, flash-cs4

我如何在 flash cs4 中使用 facebook as3 库来构建 air 应用程序。我不想在这里使用 flex。Cs4 可以构建空气应用。但我不能使用cs4中的库。请尽快帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T11:58:49.203

您可以通过将 facebook swc 添加为外部库路径将它们添加到您的 ide，您只需使用源文件并将它们添加到您的源路径都可以在下面找到

文件 -> 发布设置 ->（选项卡）闪存 ->（脚本：AS3.0）设置

在那里你可以添加它。

闪光灯 CS3：

要在 Flash 创作环境中使用 SWC 文件：

1.  将 SWC 文件复制到 Flash_root/en/First Run/Components 目录中。
2.  启动 Flash 创作环境或重新加载“组件”面板（如果它已在运行）。要在“组件”面板上重新加载组件列表，请单击菜单按钮并选择“重新加载”。

    组件的图标出现在组件面板中。您现在可以像使用任何内置组件一样使用该组件。

来源：[livedocs](http://livedocs.adobe.com/flex/1/flex_docs/wwhelp/wwhimpl/common/html/wwhelp.htm?context=Flex_Documentation&file=00001092.htm)

# error-handling - 错误报告的质量标准？

> ID：862409
> 
> 赞同：-2
> 
> 时间：2009-05-14T09:30:36.220
> 
> 标签：error-handling

似乎对我不好，报告诸如“一般错误：”+....之类的错误，

错误报告是否有任何质量标准供开发人员遵循？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T09:49:33.210

查看：

1.  [.NET 中的异常处理最佳实践](http://www.codeproject.com/KB/architecture/exceptionbestpractices.aspx)
2.  [用户友好的异常处理策略](http://www.codinghorror.com/blog/archives/000260.html)
3.  [适用于 .NET 的 Microsoft 应用程序块 - 异常管理应用程序块概述](http://support.microsoft.com/kb/829026)
4.  [用户友好的异常处理](http://www.codeproject.com/KB/exception/ExceptionHandling.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-04T01:06:31.197

1.  [https://bugzilla.mozilla.org/page.cgi?id=bug-writing.html](https://bugzilla.mozilla.org/page.cgi?id=bug-writing.html)
    2.  [http://www.chiark.greenend.org.uk/~sgtatham/bugs.html](http://www.chiark.greenend.org.uk/~sgtatham/bugs.html)
    3.  [http://testobsessed.com/wordpress/wp-content/uploads/2007/01/webr.pdf](http://testobsessed.com/wordpress/wp-content/uploads/2007/01/webr.pdf)

# python - python lambda表达式中是否可以有多个语句？

> ID：862412
> 
> 赞同：136
> 
> 时间：2009-05-14T09:31:34.143
> 
> 标签：python

我是一个尝试实现以下目标的python新手：

我有一个列表列表：

```
lst = [[567,345,234],[253,465,756, 2345],[333,777,111, 555]] 
```

我希望将 lst 映射到另一个列表中，该列表仅包含每个子列表中第二小的数字。所以结果应该是：

```
[345, 465, 333] 
```

例如，如果我只对最小的数字感兴趣，我可以这样做：

```
map(lambda x: min(x),lst) 
```

我希望我能做到这一点：

```
map(lambda x: sort(x)[1],lst) 
```

但排序不链接。（返回无）

也不允许这样的事情：

```
map(lambda x: sort(x); x[1],lst) #hence the multiple statement question 
```

有没有办法在 python 中使用 map 但*不定义命名函数*？（例如，在 ruby​​ 中使用匿名块很容易）

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2009-05-14T09:55:37.580

我可以在这里给出几个不同的答案，从您的具体问题到更普遍的问题。所以从最具体到最一般：

**问**：你可以在一个 lambda 表达式中放入多个语句吗？

**答：**不，但您实际上并不需要使用 lambda。您可以将语句放在 a 中`def`。IE：

```
def second_lowest(l):
    l.sort()
    return l[1]

map(second_lowest, lst) 
```

**问**：你可以通过对列表进行排序来从 lambda 中获得第二低的项目吗？

**答：**是的。正如[亚历克斯的回答](https://stackoverflow.com/questions/862412/is-it-possible-to-have-multiple-statements-in-a-python-lambda-expression/862430#862430)所指出的那样，`sorted()`是一种创建新列表的排序版本，而不是就地排序，并且可以链接。请注意，这可能是您应该使用的 - 您的地图对原始列表产生副作用是一种不好的做法。

**问**：我应该如何从列表序列中的每个列表中获取第二低的项目？

**A.** `sorted(l)[1]`实际上并不是最好的方法。它具有 O(N log(N)) 复杂度，而存在 O(n) 解决方案。这可以在 heapq 模块中找到。

```
>>> import  heapq
>>> l = [5,2,6,8,3,5]
>>> heapq.nsmallest(l, 2)
[2, 3] 
```

所以只需使用：

```
map(lambda x: heapq.nsmallest(x,2)[1],  list_of_lists) 
```

使用列表推导通常也被认为更清晰，它完全避免了 lambda：

```
[heapq.nsmallest(x,2)[1] for x in list_of_lists] 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2013-08-30T08:20:18.147

将表达式放在列表中可能会模拟多个表达式：

例如：

```
lambda x: [f1(x), f2(x), f3(x), x+1] 
```

这不适用于语句。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-07-11T21:59:36.100

时间旅行者在这里。如果您通常希望在 lambda 中包含多个语句，则可以将其他 lambdas 作为参数传递给该 lambda。

```
(lambda x, f: list((y[1] for y in f(x))))(lst, lambda x: (sorted(y) for y in x)) 
```

您实际上不能有多个语句，但您可以通过将 lambdas 传递给 lambdas 来模拟它。

*编辑：*时间旅行者回来了！您还可以滥用布尔表达式的行为（记住短路规则和真实性）来链接操作。使用三元运算符可以为您提供更多功能。同样，您不能有多个*statements*，但您当然可以有很多函数调用。这个例子用一堆数据做一些随意的垃圾，但是，它表明你可以做一些有趣的事情。print 语句是返回函数的示例`None`（`.sort()`方法也是如此），但它们也有助于显示`lambda`正在执行的操作。

```
>>> (lambda x: print(x) or x+1)(10)
10
11
>>> f = (lambda x: x[::2] if print(x) or x.sort() else print(enumerate(x[::-1]) if print(x) else filter(lambda (i, y): print((i, y)) or (i % 3 and y % 2), enumerate(x[::-1]))))
>>> from random import shuffle
>>> l = list(range(100))
>>> shuffle(l)
>>> f(l)
[84, 58, 7, 99, 17, 14, 60, 35, 12, 56, 26, 48, 55, 40, 28, 52, 31, 39, 43, 96, 64, 63, 54, 37, 79, 25, 46, 72, 10, 59, 24, 68, 23, 13, 34, 41, 94, 29, 62, 2, 50, 32, 11, 97, 98, 3, 70, 93, 1, 36, 87, 47, 20, 73, 45, 0, 65, 57, 6, 76, 16, 85, 95, 61, 4, 77, 21, 81, 82, 30, 53, 51, 42, 67, 74, 8, 15, 83, 5, 9, 78, 66, 44, 27, 19, 91, 90, 18, 49, 86, 22, 75, 71, 88, 92, 33, 89, 69, 80, 38]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99]
(0, 99)
(1, 98)
(2, 97)
(3, 96)
(4, 95)
(5, 94)
(6, 93)
(7, 92)
(8, 91)
(9, 90)
(10, 89)
(11, 88)
(12, 87)
(13, 86)
(14, 85)
(15, 84)
(16, 83)
(17, 82)
(18, 81)
(19, 80)
(20, 79)
(21, 78)
(22, 77)
(23, 76)
(24, 75)
(25, 74)
(26, 73)
(27, 72)
(28, 71)
(29, 70)
(30, 69)
(31, 68)
(32, 67)
(33, 66)
(34, 65)
(35, 64)
(36, 63)
(37, 62)
(38, 61)
(39, 60)
(40, 59)
(41, 58)
(42, 57)
(43, 56)
(44, 55)
(45, 54)
(46, 53)
(47, 52)
(48, 51)
(49, 50)
(50, 49)
(51, 48)
(52, 47)
(53, 46)
(54, 45)
(55, 44)
(56, 43)
(57, 42)
(58, 41)
(59, 40)
(60, 39)
(61, 38)
(62, 37)
(63, 36)
(64, 35)
(65, 34)
(66, 33)
(67, 32)
(68, 31)
(69, 30)
(70, 29)
(71, 28)
(72, 27)
(73, 26)
(74, 25)
(75, 24)
(76, 23)
(77, 22)
(78, 21)
(79, 20)
(80, 19)
(81, 18)
(82, 17)
(83, 16)
(84, 15)
(85, 14)
(86, 13)
(87, 12)
(88, 11)
(89, 10)
(90, 9)
(91, 8)
(92, 7)
(93, 6)
(94, 5)
(95, 4)
(96, 3)
(97, 2)
(98, 1)
(99, 0)
[(2, 97), (4, 95), (8, 91), (10, 89), (14, 85), (16, 83), (20, 79), (22, 77), (26, 73), (28, 71), (32, 67), (34, 65), (38, 61), (40, 59), (44, 55), (46, 53), (50, 49), (52, 47), (56, 43), (58, 41), (62, 37), (64, 35), (68, 31), (70, 29), (74, 25), (76, 23), (80, 19), (82, 17), (86, 13), (88, 11), (92, 7), (94, 5), (98, 1)] 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-10-19T13:40:44.753

实际上，您可以在 python 的 lambda 表达式中包含多个语句。这并非完全微不足道，但在您的示例中，以下工作：

```
map(lambda x: x.sort() or x[1],lst) 
```

您必须确保每个语句不返回任何内容，或者是否将其包装在（.. 和 False）中。结果是最后一次评估返回的结果。

例子：

```
>>> f = (lambda : (print(1) and False) or (print(2) and False) or (print(3) and False))
>>> f()
1
2
3 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-14T09:37:14.003

使用[排序函数](http://docs.python.org/library/functions.html#sorted)，如下所示：

```
map(lambda x: sorted(x)[1],lst) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-05-24T17:15:01.757

在 python 中将多条语句组合成一条语句的一种 Hacky 方法是使用“and”关键字作为短路运算符。然后，您可以直接将此单个语句用作 lambda 表达式的一部分。

这类似于在 bash 等 shell 语言中使用“&&”作为短路运算符。

另请注意：您始终可以通过包装函数来修复函数语句以返回真值。

例子：

```
def p2(*args):
    print(*args)
    return 1 # a true value

junky = lambda x, y: p2('hi') and p2('there') and p2(x) and p2(y)

junky("a", "b") 
```

再想一想，使用 'or' 而不是 'and' 可能更好，因为许多函数在成功时返回 '0' 或 None 。然后你可以摆脱上面例子中的包装函数：

```
junky = lambda x, y: print('hi') or print('there') or print(x) or print(y)

junky("a", "b") 
```

'and' 操作将评估表达式，直到它到达第一个零返回值。之后它会短路。1 and 1 and 0 and 1 评估：1 and 1 and 0，并丢弃 1

'or' 操作将评估表达式，直到它到达第一个非零返回值。之后它会短路。

0 或 0 或 1 或 0 评估 0 或 0 或 1，并丢弃 0

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-06-01T17:27:51.630

从这里使用 begin()：[http ://www.reddit.com/r/Python/comments/hms4z/ask_pyreddit_if_you_were_making_your_own/c1wycci](http://www.reddit.com/r/Python/comments/hms4z/ask_pyreddit_if_you_were_making_your_own/c1wycci)

```
Python 3.2 (r32:88445, Mar 25 2011, 19:28:28) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> lst = [[567,345,234],[253,465,756, 2345],[333,777,111, 555]]
>>> begin = lambda *args: args[-1]
>>> list(map(lambda x: begin(x.sort(), x[1]), lst))
[345, 465, 333] 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-14T09:44:08.730

或者，如果您想避免使用 lambda 并使用生成器而不是列表：

```
(sorted(col)[1] for col in lst) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-10-30T18:10:52.913

在分析了上面提供的所有解决方案后，我想出了这个组合，这对我来说似乎是最清晰的广告：

```
func = lambda *args, **kwargs: "return value" if [
    print("function 1..."),
    print("function n"),
    ["for loop" for x in range(10)]
] else None 
```

不是很漂亮吗？请记住，列表中必须有某些内容，因此它具有 True 值。另一件事是列表可以替换为集合，看起来更像 C 样式代码，但在这种情况下，您不能将列表放入其中，因为它们不是哈希

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-10-31T22:06:10.953

在阅读这个长长的答案列表时，我想出了一个滥用元组的巧妙方法：

```
lambda x: (expr1(x), expr2(x), ..., result(x))[-1] 
```

这将生成一个 lambda，它计算所有表达式并返回最后一个表达式的值。仅当这些表达式具有副作用时才有意义，例如`print()`or `sort()`。

普通赋值 ( `=`) 不是表达式，所以如果你想在 lambda 中赋值一个变量，你必须使用`:=`也返回赋值的运算符（在 Python 3.8 中添加）：

```
lambda: (answer := 42, question := compute(answer), question)[-1] 
```

但以上仅适用于局部变量赋值。要分配例如 dict 元素，您必须使用`d.update({'key': 'value'})`，但即使`list`没有类似的选项，`l.__setitem__(index, value)`也必须使用。与删除相同：标准容器支持`x.pop(index)`相当于`del x[item]`但也返回删除的值，但如果它不可用，则必须`x.__delitem__(index)`直接使用。

要影响全局变量，您必须修改返回的字典`globals()`：

```
lambda: (g := globals(), g.__setitem__('answer', 42), g.__delitem__('question'), None)[-1] 
```

可以使用列表、字典甚至集合代替元组来将表达式组合为一个，但元组更快（主要是因为不可变）并且似乎没有任何缺点。

另外，**不要在生产代码中使用任何这些！**请漂亮！

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-06-23T19:49:26.443

让我向你展示一个光荣但可怕的黑客：

```
import types

def _obj():
  return lambda: None

def LET(bindings, body, env=None):
  '''Introduce local bindings.
  ex: LET(('a', 1,
           'b', 2),
          lambda o: [o.a, o.b])
  gives: [1, 2]

  Bindings down the chain can depend on
  the ones above them through a lambda.
  ex: LET(('a', 1,
           'b', lambda o: o.a + 1),
          lambda o: o.b)
  gives: 2
  '''
  if len(bindings) == 0:
    return body(env)

  env = env or _obj()
  k, v = bindings[:2]
  if isinstance(v, types.FunctionType):
    v = v(env)

  setattr(env, k, v)
  return LET(bindings[2:], body, env) 
```

您现在可以这样使用此`LET`表单：

```
map(lambda x: LET(('_', x.sort()),
                  lambda _: x[1]),
    lst) 
```

这使：`[345, 465, 333]`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-09-09T11:03:17.870

您可以使用 min 和 index 在 O(n) 时间内完成，而不是使用 sort 或 heapq。

首先创建除原始列表的最小值之外的所有内容的新列表：

```
new_list = lst[:lst.index(min(lst))] + lst[lst.index(min(lst))+1:] 
```

然后取新列表的最小值：

```
second_smallest = min(new_list) 
```

现在都在一个 lambda 中：

```
map(lambda x: min(x[:x.index(min(x))] + x[x.index(min(x))+1:]), lst) 
```

是的，它真的很丑，但它应该在算法上很便宜。此外，由于该线程中的某些人希望查看列表推导：

```
[min(x[:x.index(min(x))] + x[x.index(min(x))+1:]) for x in lst] 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-10-23T07:13:45.010

这正是[Monad](http://www.dustingetz.com/2012/04/07/dustins-awesome-monad-tutorial-for-humans-in-python.html)`bind`中的函数的用途。

使用该`bind`函数，您可以将多个 lambda 组合成一个 lambda，每个 lambda 代表一个语句。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-05-24T17:36:27.717

我会给你另一个解决方案，让你的 lambda 调用一个函数。

```
def multiple_statements(x, y):
    print('hi')
    print('there')
    print(x)
    print(y)
    return 1

junky = lambda x, y: multiple_statements(x, y)

junky('a', 'b'); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-12-02T16:43:35.610

实际上有一种方法可以在 lambda 中使用多个语句。这是我的解决方案：

```
lst = [[567,345,234],[253,465,756, 2345],[333,777,111, 555]]

x = lambda l: exec("l.sort(); return l[1]")

map(x, lst) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-06-25T16:28:36.900

是的。您可以通过这种方式定义它，然后使用以下内容包装多个表达式：

计划开始：

开始 = lambda *x: x[-1]

Common Lisp 预测：

progn = lambda *x: x[-1]

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-03-07T17:21:26.287

不使用 lambda 函数有更好的解决方案。但是如果我们真的想使用 lambda 函数，这里有一个通用的解决方案来处理多个语句： map(lambda x: x[1] if (x.sort()) else x[1],lst)

您并不真正关心语句返回的内容。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-01-05T00:24:23.060

是的，有可能。试试下面的代码片段。

```
x = [('human', 1), ('i', 2), ('am', 1), ('.', 1), ('love', 1), ('python', 3), ('', 1),
  ('run', 1), ('is', 2), ('robust', 1), ('hello', 1), ('spark', 2), ('to', 1), ('analysis', 2), ('on', 1), ('big', 1), ('data', 1), ('with', 1), ('analysis', 1), ('great', 1)
]

rdd_filter = rdd1_word_cnt_sum.filter(lambda x: 'python' in x or 'human' in x or 'big' in x)
rdd_filter.collect() 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-09-17T02:56:12.877

演示`lambda x:[f1(),f2()]`使我们能够在 中执行多个功能的效果`lambda`。如果您真的想缩小代码，它还演示了 if else 条件的单行。

*   请注意，f1() 也可以是 lambda 函数（递归 lambda 或 lambda 内的 lambda）。并且该内部 lambda 可以是您选择的语句/函数。
*   你也可以把 exec('statement') 例如`lambda x:[exec('a=[1]'),exec('b=2')]`

touch(linux) 命令的 python 实现，如果它们不存在则创建空文件。

```
def touch(fpath):
    check= os.path.exists(fpath)
    (lambda fname1:[open(fname1,"w+",errors="ignore").write(""),print('Touched',fname1)] 
    if not check else None) (fpath) 
```

将打印 [ Touched `fpath`]`fpath`作为输入的文件路径在哪里。如果文件已经存在，则什么都不做。

`(lambda x: [ f(x), f2(x) ] ) (inp)`<- 我们将 ' '`inp`作为输入传递`lambda`，在这种情况下是`fpath`.

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-08-12T14:26:34.110

我在一行上使用 lamdas 的方法上课：

```
(code := lambda *exps, ret = None: [exp for exp in list(exps) + [ret]][-1])(Car := type("Car", (object,), {"__init__": lambda self, brand, color, electro = False: code(setattr(self, "brand", brand), setattr(self, "color", color), setattr(self, "electro", electro), setattr(self, "running", False)), "start": lambda self: code(code(print("Car was already running, it exploded.\nLMAO"), quit()) if self.running else None, setattr(self, "running", True), print("Vrooom")), "stop": lambda self: code(code(print("Car was off already, it exploded.\nLMAO"), quit()) if not self.running else None, setattr(self, "running", False), print("!Vrooom")), "repaint": lambda self, new_color: code(setattr(self, "color", new_color), print(f"Splash Splash, your car is now {new_color}")), "drive": lambda self: code(print("Vrooom") if self.running else code(print("Car was not started, it exploded.\nLMAO"), quit())), "is_on": lambda self: code(ret = self.running)}), car := Car("lamborghini", "#ff7400"), car.start(), car.drive(), car.is_on(), car.drive(), car.stop(), car.is_on(), car.stop()) 
```

更易读的变体：

```
(
    code :=
    lambda *exps, ret = None:
    [
        exp
        for exp
        in list(exps) + [ret]
    ][-1]
)(

Car := type(
    "Car",
    (object,),
    {
        "__init__": lambda self, brand, color, electro = False: code(
            setattr(self, "brand", brand),
            setattr(self, "color", color),
            setattr(self, "electro", electro),
            setattr(self, "running", False)

        ),
        "start": lambda self: code(
            code(
                print("Car was already running, it exploded.\nLMAO"),
                quit()
            ) if self.running
            else None,
            setattr(self, "running", True),
            print("Vrooom")
        ),
        "stop": lambda self: code(
            code(
                print("Car was off already, it exploded.\nLMAO"),
                quit()
            ) if not self.running
            else None,
            setattr(self, "running", False),
            print("!Vrooom")
        ),
        "repaint": lambda self, new_color: code(
            setattr(self, "color", new_color),
            print(f"Splash Splash, your car is now {new_color}")        
        ),
        "drive": lambda self: code(
            print("Vrooom") if self.running
            else code(
                print("Car was not started, it exploded.\nLMAO"),
                quit()
            )
        ),
        "is_on": lambda self: code(
            ret = self.running
        )
    }
),

car := Car("lamborghini", "#ff7400"),
car.start(),
car.drive(),
car.is_on(),
car.drive(),
car.stop(),
car.is_on(),
car.stop()
) 
```

我在这里使用 lambda 函数，它接受任意数量的参数并将 ret 参数默认返回为 None 以便能够在由“，”分隔的一行上有更多表达式。

# c# - 如何在C#中获取目录中文件的名称

> ID：862416
> 
> 赞同：4
> 
> 时间：2009-05-14T09:32:59.567
> 
> 标签：c#

```
Directory.GetFiles(targetDirectory); 
```

使用上面的代码，我们得到目录中所有文件的名称（**即完整路径）**。但我只需要获取文件名而不是路径。那么我怎样才能获得不包括路径的文件名呢？还是我需要在删除不需要的部分时进行字符串操作？

编辑：

```
TreeNode mNode = new TreeNode(ofd.FileName, 2, 2); 
```

这`ofd`是一个`OpenFileDialog`并`ofd.FileName`给出文件名及其路径，但我只需要文件名。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-14T09:37:02.600

你可以使用：

```
Path.GetFileName(fullPath); 
```

或在您的示例中：

```
TreeNode mNode = new TreeNode(Path.GetFileName(ofd.FileName), 2, 2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T09:35:51.700

如果您只想获取文件名而不进行任何手动字符串编辑，请使用 DirectoryInfo 和 FileInfo。

```
DirectoryInfo dir = new DirectoryInfo(dirPath);
foreach (FileInfo file in dir.GetFiles())
    Console.WriteLine(file.Name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T09:37:21.023

采用：

```
 foreach(FileInfo fi in files)
 {
     Response.Write("fi.Name");       
 } 
```

# c# - 从不使用空值？

> ID：862418
> 
> 赞同：18
> 
> 时间：2009-05-14T09:33:25.497
> 
> 标签：c#, null

我们目前正在经历为 C# 编写一些编码标准的漫长过程。

我最近用签名写了一个方法

```
string GetUserSessionID(int UserID) 
```

如果未找到用户的会话，GetUserSession() 将返回 null。

在我的呼叫代码中...我说...

```
string sessionID = GetUserSessionID(1)
if (null == sessionID && userIsAllowedToGetSession)
{
    session = GetNewUserSession(1);
} 
```

在最近的一次代码审查中，审查者说“你永远不应该从一个方法返回 null，因为它会在调用方法上花费更多的工作来检查 null。”

我立刻哭了，好像你返回 string.Empty 你仍然需要对返回的值进行某种检查。

```
if (string.Empty == sessionID) 
```

但是，进一步考虑这一点，我永远不会在 Collection/Array/List 的情况下返回 null。我会返回一个空列表。

对此（我认为）的解决方案是将其重构为两种方法。

```
bool SessionExists(int userID); 
```

和

```
string GetUserSessionID(int UserID); 
```

这一次，GetUserSessionID 会抛出一个 SessionNotFound 异常（因为它不应该返回 null）

现在代码看起来像......

```
if(!SessionExists(1) && userIsAllowedToGetSession))
{
   session = GetNewUserSession(1);
}
else
{
   session = GetUserSessionID(1);
} 
```

现在这意味着没有空值，但对我来说这似乎有点复杂。这也是一个非常简单的示例，我想知道这将如何影响更复杂的方法。

关于何时抛出异常以及如何处理它们，有很多最佳实践建议，但关于使用 null 的信息似乎较少。

其他人是否有任何关于使用空值的可靠指南（甚至更好的标准），这对可空类型意味着什么（我们应该使用它们吗？）

提前致谢，

克里斯。

=====

# 谢谢大家！那里有很多非常有趣的讨论。

我已经给出了 egaga 的答案，因为我喜欢他们将 Get vs Find 作为编码指南的建议，但所有这些都是有趣的答案。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-14T09:39:12.393

空值绝对比“魔法值”更好，即更诚实。但是当错误发生时它们不应该被返回——这就是例外的原因。当涉及到返回集合时……我同意空集合比 null 更好。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-14T09:51:53.843

返回 null 很好，以下内容简洁易懂：

```
var session = GetUserSessionID(1) ?? GetNewUserSession(1); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-14T09:43:13.163

一种可能的做法是，如果未找到结果，则对抛出异常的方法使用**get**前缀，如果可能为 null，则使用**find前缀。**因此，在客户端很容易看出代码在处理 null 时是否存在问题。

当然应该避免空值，Andrej Heljsberg 在一次采访中说过，如果现在创建 C#，它将有更好的方法来处理可空性。[http://www.computerworld.com.au/article/261958/-z_programming_languages_c?pp=3&fp=&fpid=](http://www.computerworld.com.au/article/261958/-z_programming_languages_c?pp=3&fp=&fpid=)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-14T09:52:02.737

在我看来，您不应该排除使用 null 作为返回值。我认为这在很多情况下都是有效的。但是您应该仔细考虑每种方法的利弊。这完全取决于方法的目的和调用者可能有的期望。

我个人经常使用 null 返回值，以防您可能期望该方法不返回 abject（即通过主键进行数据库搜索，可能只返回一个实例或 none / null）。当您可以正确地期望一个方法返回一个值时，您应该使用异常。

在您的特定示例中，我认为这取决于系统的上下文。例如，如果调用仅来自您可能期望登录用户的代码，则应该抛出异常。但是，如果可能没有用户登录，因此您没有要返回的会话 ID，则应选择返回 null。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-14T10:15:05.753

为什么不使用[Null 设计模式](http://en.wikipedia.org/wiki/Null_Object_pattern)呢？

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-14T09:43:46.033

保持简单。让您的类型的消费者尽可能轻松。这是一个权衡：实施时间和获得的收益。

*   在处理诸如获取列表/集合之类的事情时，如您正确指出的那样，返回一个空列表。
*   同样，对于需要返回“null”值来表示“未找到”的情况 - 尝试对大量使用的类型使用[Null Object 模式。](http://martinfowler.com/eaaCatalog/specialCase.html)对于很少使用的类型，我想你可以接受一些 null 或 -1 (String.IndexOf) 的检查。

如果您有更多类别，请发表评论，我会尝试解决方案。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-14T09:48:04.213

Null 比魔法值要好得多，而且更有意义。您也可以尝试编写 TryGetUserSession 方法。

 ``bool TryGetUserSession(int sessionId, out session)`

也尽量不要写 nulls == ???，因为一些开发人员发现它更难阅读。

亲切的问候，

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-14T10:10:33.330

我对自己返回空值持谨慎态度，尽管在您的示例中，这似乎是正确的做法。

重要的是要**清楚**参数和返回值的可空性。如果您的语言不能直接表达此概念，则必须将其指定为 API 文档的一部分*。*（Java 不能，我读过 C# 可以。）如果输入参数或返回值*可以*为 null，请务必告诉用户这在您的 API 上下文中*意味着什么。*

我们最大的代码库是一个在过去十年中稳步增长的 Java 应用程序。许多内部 API 对其行为 WRT null 非常不清楚。由于每个人都在进行防御性编程，因此这会导致空检查在各处的恶性增长。

特别难看：返回集合的函数返回 null 而不是空集合。哇！？不要那样做！

对于字符串，请务必区分必须存在但可以为空的字符串和真正可选的字符串（可以为空）。在使用 XML 时，我们经常遇到这种区别：必须的元素，但可以是空的，与可选的元素。

该系统的一部分提供了对类似 XML 的结构的查询以实现业务规则，它在实现无空值方面非常激进。它在任何地方都使用空对象模式。在这种情况下，这被证明是有用的，因为它允许您执行以下操作：

```
A.children().first().matches("Blah") 
```

这个想法是如果 A 的第一个孩子被命名为“Blah”，这个表达式应该返回 true。如果 A 没有孩子，它不会崩溃，因为在这种情况下 first() 返回一个实现 Node 接口的 NullNode ，但从不“匹配”任何东西。

总之：

*   在 API 中明确 null 的含义和可允许性。
*   用你的大脑。
*   不要教条主义。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-14T09:45:28.073

一种解决方案可能是为此类事情声明一个简单的返回类型：

```
class Session
{
    public bool   Exists;
    public string ID;
}

Session GetUserSession(int userID) {...}

...

Session session = GetUserSessionID(1);

if (session.Exists)
{
    ... use session.ID
} 
```

我通常喜欢避免空值，但字符串有点特殊。我经常最终调用 string.IsNullOrEmpty()。如此之多，以至于我们对字符串使用了扩展方法：

```
static class StringExtensions
{
    public static bool IsNullOrEmpty(this string value)
    {
        return string.IsNullOrEmpty(value);
    }
} 
```

然后你可以这样做：

```
string s = ... something

if (s.IsNullOrEmpty())
{
 ...
} 
```

另外，由于我们讨论的是编码风格：

看起来不自然的“if (null == ...)”样式是怎么回事？这对于 C# 来说完全没有必要——看起来有人将一些 C++ 包袱带入了 C# 编码风格！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-14T10:39:11.453

我更喜欢返回空集合而不是 null，因为这有助于避免使调用者代码混乱，如下所示：

```
if( list != null) {
    foreach( Item item in list ) {
         ...
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-14T09:46:40.517

您拥有的按合同设计的答案也将是我的解决方案：

```
if (myClass.SessionExists)
{
   // Do something with myClass.Session
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-14T10:18:32.953

我们总是返回空列表/集合并且不返回 NULL 列表/集合，因为处理空集合/列表可以减少调用函数的负担。

可空 - 当您想避免处理数据库中的“空”值时，可空值特别有用。您可以简单地将 GetDefaultOrValue 用于任何 Nullable 类型，而不必担心数据库值在您的业务对象中为 null。我们通常只在我们的业务对象中定义 Nullables，而且我们真的想逃避 db null 值检查等。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-15T07:41:17.987

空值的发明者认为它们是个坏主意。

见： http: [//lambda-the-ultimate.org/node/3186](http://lambda-the-ultimate.org/node/3186)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-05-15T08:22:25.610

我遇到过类似的问题，尽管我通过异常并被告知我应该返回 null，

我们最终阅读

[这篇关于令人烦恼的异常的博文](http://blogs.msdn.com/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)

我建议读一读。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-14T09:39:52.470

NULL 表示未知/未确定。

在使用数据只是“尚未确定”的数据库时，您最需要它。在您的应用程序中，NULL 是非异常但非默认行为的良好返回类型。

当输出不是预期的但对异常不够严重时，您可以使用 NULL。

# security - 为什么人们公开发布他们的验证码？验证码：somerandomword

> ID：862419
> 
> 赞同：4
> 
> 时间：2009-05-14T09:33:47.007
> 
> 标签：security, web, captcha

我正在实施一个在注册表单上带有验证码的网站；我的第一次。我已经阅读了数十篇关于支持和反对的论点以及所有各种实现的帖子。我对这一切都很满意，但就我而言，这是必要的邪恶。

我不明白的是为什么人们在他们的帖子中发布随机验证码字符，整个网络？这是今天在[TDWTF](http://thedailywtf.com/Comments/The-Next-Big-Thing,-The-Best-Interview,--Too-Primitive-for-COBOL.aspx)上的一个例子。在 95 条评论中，有 5 人在帖子末尾附加了这样的字符串：

> 验证码：尼米斯。
> 验证码：augue。
> 验证码：distineo。

这是安全风险吗？他们是否发布了验证码字符串以便可以收集并用于攻击？或者他们只是想通过嵌入一个随机词来跟踪自己，以便随后的谷歌搜索？

我应该担心吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-14T10:27:02.760

这只是 TDWTF 文化的一部分，有时验证码会变成笑话。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T10:22:40.853

在我看来，他们只是觉得随机词很有趣。

# content-management-system - 将基于 struts 的网站迁移到 CMS

> ID：862423
> 
> 赞同：1
> 
> 时间：2009-05-14T09:35:53.773
> 
> 标签：content-management-system, struts

想象一下用 java&struts 开发了一个经典的网站。现在，您的客户了解到重新部署应用程序以更改图像或文本是一项巨大的成本。它要求向站点添加一项功能：对内容进行类似 cms 的处理（编辑、版本控制、批准发布）。

你会如何处理这个请求？你会在 webapp 中开发它吗？您会将 webapp 与 CMS 合并吗？你会将 webapp 移动到 cms 中吗？你会逃跑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T09:47:31.560

构建简单的 CMS 支持并不太困难（前提是在您的框架中放置身份验证和安全性不会太紧张），但如果您需要提供一个完整的所见即所得环境，他们可以上传内容并格式化它，它会变得非常繁琐。

如果他们想要全部，我会考虑在现有的 CMS 中重建。如果他们可以处理简单的编辑，请将其构建到您的应用程序中。

但影响他们的是成本。您需要让他们知道他们正在为您支付重建费用（并给他们报价，以便他们知道要花多少钱）。除非您严重误解了简报，否则您无法承受这笔费用。

如果他们对您目前所获得的内容不满意，但不想为进一步构建它而付钱给您，请说明您很高兴将最初的简报付诸实践，但为您迄今为止的时间开具发票（或如果是基于项目的合同的百分比）并让他们考虑一下。

如果你把简报搞砸了，你要么不付钱就走开，失去一位顾客，要么忍住下巴，下次努力做得更好。

# c# - C# 中的命名空间前缀

> ID：862424
> 
> 赞同：5
> 
> 时间：2009-05-14T09:36:09.983
> 
> 标签：c#, namespaces

我已经可以做到：

```
using System.Windows.Forms;
Button b; 
```

或者：

```
System.Windows.Forms.Button b; 
```

但我想做：

```
using System.Windows;
Forms.Button b; 
```

（因为 Button 与另一个命名空间不明确，并且键入 System.Windows.Forms.Button 太长）。

但是，这给了我一个错误，我该如何实现呢？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-14T09:37:09.870

命名空间别名可能：

```
using Forms = System.Windows.Forms; 
```

除非您使用该命名空间中的类，否则“使用 System.Windows”现在是多余的。

# ant - 访问 Ant 属性时，@ 和 $ 有什么区别？

> ID：862434
> 
> 赞同：16
> 
> 时间：2009-05-14T09:38:34.343
> 
> 标签：ant

`@{property}`访问 Ant 属性和访问 Ant 属性有什么区别`${property}`？

在 Ant 手册中没有看到任何明显的注释。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-14T09:44:13.473

`${property}`是访问属性的正常方式。`@{property}`在宏定义中用于访问传递给该宏的参数。请参阅宏定义的[Ant 手册](http://ant.apache.org/manual/Tasks/macrodef.html)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-14T09:45:11.973

`${property}`用于引用[Properties](http://ant.apache.org/manual/using.html#properties)。

`@{attribute}`用于引用[Tasks中的](http://ant.apache.org/manual/Tasks/macrodef.html)[属性`<macrodef>`](http://ant.apache.org/manual/Tasks/macrodef.html)。

# java - 在 JSP 中不使用 HTML 表单传递参数

> ID：862440
> 
> 赞同：9
> 
> 时间：2009-05-14T09:39:34.687
> 
> 标签：java, jsp

我做了一些研究，发现的大多数示例都使用表单（显然用于用户输入）来收集数据，然后通过请求对象将这些数据传递到另一个 JSP 页面。

我的问题是：如果没有在 HTML 标签中设置参数，是否可以在 JSP 页面之间传递参数`<form>`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-14T10:12:45.650

有几种方法可以将信息从一个 JSP 页面传递到另一个页面。

# 1.隐藏的价值。

只需将数据写入“隐藏”类型的表单中的输入字段，例如

```
<input type="hidden" name="mydata" value="<%=thedata%>"> 
```

这样写入的数据将在提交相关表单时回传。当用户填写一系列对话框时，这可能是一种“携带”信息的有用方式，因为所有状态都是用户侧的，并且后退和前进按钮将按预期工作。

# 2.网址写作。

将参数附加到页面上链接中的 URL，例如

```
<a href="another.jsp?mydata=<%=thedata>>Go!</a> 
```

这也维护了客户端的状态，同时消除了提交表单元素的需要。

# 3\. 饼干。

应该为自己说话。状态仍然是用户端，但现在由 cookie 处理。在某些方面更加脆弱，因为有些人禁用了 cookie。如果您不小心，后退和前进按钮也可能会做出意想不到的事情

# 4.服务器端（会话）

最后，您可以将数据存储在一个 JSP 上的会话变量中，并在下一个 JSP 上检索它，例如

```
session.setAttribute(String key, Object value) 
```

和

```
session.getAttribute(String key) 
```

这里状态保持在服务器端，这有一些好处（用户可以浏览并返回而不会失去他的位置，但是除非您小心，否则会使浏览器中的后退和前进按钮有点不可靠。此外，该值可用于所有页面。

然而，它确实具有信息永远不会发送给客户端的优点，因此更安全且更防篡改。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T09:43:55.533

JSP 页面无法区分手动构造的 GET url，例如：

`<a href="/foo.jsp?bar=baz">Go to the next JSP page</a>`, 与类似的东西：

```
<form method="get" action="/foo.jsp">
<input name="bar" value="baz">
</form> 
```

无论哪种方式，它都可以通过`getParameter`或访问`getParameterValues`

你问的是这个吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T09:48:11.170

您通常在范围属性（在请求、会话或应用程序中）的 servlet/JSP 或 JSP 页面之间传递数据。例如`request.setAttribute("key", data)`，可以在一个 JSP 中设置“key”属性，并`request.getAttribute("key")`在其他 JSP 中获取此数据（如果多个 JSP 正在处理相同的请求）。

如果这是您真正需要的，可以通过包装您的请求并覆盖 getParameter 和类似方法来创建假参数。

更新：我的回答是在*处理相同请求的多方之间传递数据。*这可能是也可能不是您想要的，因为您的问题不清楚。

# vb.net - 访问 MP3 播放器/USB 存储设备

> ID：862443
> 
> 赞同：0
> 
> 时间：2009-05-14T09:40:14.793
> 
> 标签：vb.net, file-io, usb-drive, fileinfo

我正在尝试访问 USB 存储设备，但是该设备虽然出现在计算机/驱动器部分，但未分配驱动器号，因此当我按照[如何发现 USB 存储设备和可写 CD中所述迭代连接的驱动器时/DVD 驱动器 (C#)](https://stackoverflow.com/questions/51645/how-to-discover-usb-storage-devices-and-writable-cd-dvd-drives-c)，它没有出现。我从驱动器（属性）上的文件中获取了“位置”，它出现了，`COMPUTER/Q1/Datacasts`但是当我将它传递给 FileInfo 对象时这不起作用（找不到网络驱动器），我在有点不知所措

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-16T11:03:46.587

经过一番调查，我发现它需要是一个 Windows 便携式设备，并从[MSDN 博客](http://blogs.msdn.com/wpdblog/)中得到了一些提示。

# apache-flex - Mate PropertyInjectors - 注入到 as3 类？

> ID：862452
> 
> 赞同：0
> 
> 时间：2009-05-14T09:43:14.910
> 
> 标签：apache-flex, actionscript-3, mate

有谁知道是否可以注入常规的 as3（非 mxml）类？我已经尝试了有限的成功。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T12:29:09.300

你可以再详细一点吗？“MXML”类和 ActionScript 中定义的类之间没有区别，只是编写相同内容的不同方式。

注入工作只需要一个可绑定的源属性和一个公共的目标属性（公共设置器或公共实例变量）。如果满足这两个要求并且代码编译它应该可以工作。

查看您可以在此处找到的示例应用程序的代码：[http](http://code.google.com/p/mate-examples/wiki/DocumentBasedExampleIntro) ://code.google.com/p/mate-examples/wiki/DocumentBasedExampleIntro ，您会发现大量针对未使用 MXML 定义的类的注入器（查找特别是针对名称以“Model”结尾的类的注入器）。您还可以在[Mate 论坛](http://mate.asfusion.com/forums)中找到无数示例。

# c++-cli - 如何使用 .NET Framework 库编译 c++ 程序

> ID：862456
> 
> 赞同：-1
> 
> 时间：2009-05-14T09:43:56.563
> 
> 标签：c++-cli, .net-2.0

我只想在命令提示符下使用 .NETFRAMEWORK 库来编译我的 c++ 程序。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T09:48:42.823

从 Microsoft下载免费的[Visual C++ Express](http://www.microsoft.com/express/vc/)工具并使用 C++/CLI 语言（基于 C++，但允许访问整个 .Net 框架）并从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T09:49:59.123

基本上，您说的是[Visual C++](http://msdn.microsoft.com/en-us/library/xey702bw(VS.80).aspx)。至于使用命令提示符，一旦你有一个工作程序，你应该能够使用类似的东西：

```
cl MyProgram.cs /clr 
```

与任何其他相关选项，并启动并运行。如果这没有帮助，请提出更具体的问题。

# sql - 如何在 SQL 中搜索带有可选特殊字符的匹配项？

> ID：862460
> 
> 赞同：2
> 
> 时间：2009-05-14T09:45:06.950
> 
> 标签：sql, search, apostrophe

我的搜索查询有问题 我正在使用我的数据包含名称和信息，这些信息具有各种形式的撇号（HTML 编码和实际）。因此，例如，我想要一个替代方案：

```
SELECT * FROM Customers WHERE REPLACE(LastName,'''','') 
LIKE Replace('O''Brien,'''','') 
```

这只是一个例子，我想要的是一种方式，如果有人键入 OBrien 或 O'Brien，这仍然有效，我需要替换角色的三个版本，并且数据是来自源且无法更改 - 可以做什么到一个查询以允许这种搜索工作。
我有名称以这种方式工作的项目，目前有许多嵌套的 REPLACE 函数，并且似乎找不到可以以这种方式工作的东西，这更有效。
如果有帮助，我正在使用带有 ASP 的 MS SQL 2000。

* * *

**编辑**

这是需要匹配 O'Brien 或 OBrien 的查询，此查询执行此操作但效率太低 - 它由另一个用于匹配项目名称和名字（可选）的连接。

```
SELECT * FROM Customers
WHERE 
REPLACE(REPLACE(REPLACE(LastName,'&apos;',''),'&#39;',''),'''','') 
LIKE 
REPLACE(REPLACE(REPLACE('%O&#39;Brien%','&apos;',''),'&#39;',''),'''','') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T09:48:34.553

你可以试试这个：

```
SELECT * 
FROM Customers 
WHERE LastName LIKE Replace('O''Brien,'''','%') 
```

这*应该*允许它使用索引，因为您没有修改原始列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T09:56:03.803

对于纯 SQL，转义是完全没有必要的。

```
SELECT * FROM Customers WHERE LastName = 'O''Brien' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T09:59:28.490

如果您想保持正确并在 SQL 中执行此操作，这可能是您能做的最好的

```
SELECT * FROM Customers WHERE 
LastName LIKE 'O%Brien' AND 
REPLACE(LastName,'''','') LIKE 'O''Brien' 
```

由于选择性差，您有时仍会进行表扫描。

第一个 where 的原因是尝试使用现有索引。第二次匹配的原因是为了确保像 ObbBrien 这样的姓氏不匹配。

当然，最好的办法是不需要丑陋的替换。这可以通过存储一个额外的干净姓氏列在应用程序中实现。或者在触发器中。或在索引视图中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T09:55:16.393

使用参数而不是在代码中构建查询。

如果您使用的是 ADO，则可以使用如下语法：

```
Dim cmd, rs, connect, intNumber
Set cmd = Server.CreateObject("ADODB.Command")
cmd.ActiveConnection = "your connectionstring"
cmd.CommandText = "SELECT * FROM Customers WHERE LastName LIKE @LastName"
cmd.Parameters.Append cmd.CreateParameter("@LastName",,,,"O'Brien")
Set rs = cmd.Execute 
```

这应该执行查询并插入为您的数据库正确格式化的字符串 O'Brien。

使用参数可确保所有值的格式正确，并且还可以保护您免受 sql 注入攻击。

# air - 为什么我的 Adob e AIR 应用程序显示最新更新已损坏？

> ID：862474
> 
> 赞同：1
> 
> 时间：2009-05-14T09:48:11.077
> 
> 标签：air, adobe

我用 Adob​​e Air 编写了一个 HTML/AJAX 应用程序，并在我的 WinXP 笔记本电脑上运行它。但是现在我在我的更新站点上发布了一个较新的版本，应用程序下载更新并说“由于 AIR 文件已损坏，无法安装应用程序。请尝试从应用程序作者处获取新的 AIR 文件。”

我尝试重新打包应用程序并增加版本号，但这并没有帮助。我在 OSX 上的 Aptana Studio 中创建它。

谁能解释一下可能导致该错误的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T17:33:57.727

我没有使用aptana，但是...

在 adobe flex builder 中，您必须更改文件的第一行：“applicationName-app.xml”。（其中 applicationName 是您的应用程序或项目的名称）

当您从 pc 更改为 mac-osx 时，您必须更改该行：

```
<application xmlns="http://ns.adobe.com/air/application/1.1"> 
```

至

```
<application xmlns="http://ns.adobe.com/air/application/1.5"> 
```

不知道你在aptana中创建项目时有没有这个文件……可能在项目属性中。

然后重新打包并部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-10T19:42:07.480

我刚刚遇到了同样的问题。在尝试了地球上每个博客上提到的每个“解决方案”之后，我突然想到我的服务器没有 .air 作为公认的 MIME 类型。一旦我添加了这个，一切都很好。

# iphone - 在 Jalibroken iPhone 上进行 iPhone 开发和测试？

> ID：862476
> 
> 赞同：1
> 
> 时间：2009-05-14T09:48:21.967
> 
> 标签：iphone, jailbreak

除了围绕 iPhone 越狱的明显法律问题之外，使用越狱手机进行“官方合法 SDK 开发”是否会引起任何问题？

基本上，越狱的 iPhone 能否在生产开发环境中正常工作，在 SDK 和相关流程方面允许与库存 iPhone 相同的配置、测试等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T12:09:32.233

据我所知。使用越狱的 iPhone 作为开发 iPhone 没有问题。我在越狱和未越狱的手机上测试了我的所有应用程序，还没有发现任何差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T14:50:51.787

如果您已经越狱了您的设备并破坏了真实性（运行未签名的代码），那么您可能会遇到代码签名问题，除非您在未损坏的设备上检查应用程序，否则您可能不会意识到这一问题。但是，如果您在验收过程中陷入困境，那么越狱设备可能会很有用，因为您可以更早地在设备上进行测试：P

也就是说，这不太可能看到你必须经历的大量麻烦才能达到这一点几乎可以保证你对自己在做什么有一些线索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T16:52:02.413

Apple 开发者协议已更新，禁止开发者越狱（但除了法律问题，您确实说过）...

直接回答你的问题，不，我没有任何问题:-)

# silverlight - 如何在 wordpress 中包含 silverlight 内容？

> ID：862480
> 
> 赞同：1
> 
> 时间：2009-05-14T09:48:42.900
> 
> 标签：silverlight, wordpress

我试图在我的博客文章中包含 silverlight 内容。但是 wordpress 正在剥离许多标签。即使我尝试使用 wordpress 的“纯文本编辑器”，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T15:25:11.080

我发现了。需要插件：[http](http://wordpress.org/extend/plugins/silverlight-for-wordpress/) ://wordpress.org/extend/plugins/silverlight-for-wordpress/ 。通过了一些参数和繁荣，我能够在我的 wp 博客上引入 silverlight。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T12:11:26.317

我建议改为提供指向您的 Silverlight 内容的图像链接，然后将其托管在另一个位置。这也将让您的用户预览您的 Silverlight 内容，而无需他们下载完整的应用程序，直到他们选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T12:05:57.703

你不能；WP 将您博客中允许的 HTML 限制为安全标签，这意味着无法在 wordpress.com 博客中拥有活动内容（FAQ 和使用协议中也对此进行了说明）。

这是为了保护您博客的用户免受近年来严重打击 Facebook 和 MySpace 的恶意代码的侵害。

# php - 如何在 Drupal 5.x 配置文件（nodeprofile）中显示用户电子邮件？

> ID：862481
> 
> 赞同：1
> 
> 时间：2009-05-14T09:48:48.780
> 
> 标签：php, drupal, drupal-5

据我所知，Drupal 中用户配置文件中的电子邮件字段不会显示（出于良好和明显的原因）。

但是我仍然需要知道如何在 Drupal 5.x 配置文件（nodeprofile）中显示用户电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T13:13:50.177

将电子邮件 CCK 字段添加到您的节点配置文件 CCK 类型。

有关更多详细信息，请参阅[电子邮件字段](https://www.drupal.org/project/email)模块。以下是其项目页面的摘录：

> 特征：
> 
> *   电子邮件验证
> *   将地址转换为 mailto 链接
> *   电子邮件地址加密
> *   联系表（请参阅显示设置）
> *   提供令牌（对于 D 7.x：使用来自实体 API 的实体令牌）
> *   向视图公开字段
> *   可以与规则一起使用
> *   面板集成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T11:06:31.090

更改 theme_user_profile 挂钩（将函数添加到位于当前主题文件夹的 template.php 中），如下所示：

```
function <your_theme_name>_user_profile($account, $fields) {
  // adding the email field to profile
  $email = array();
  $email["value"] =  check_plain($account->mail);
  $fields["email"][0] = $email;
  // end of adding the email field

  // the rest of the default profile hook taken from http://api.drupal.org/api/function/theme_user_profile/5
  $output = '<div class="profile">';
  $output .= theme('user_picture', $account);
  foreach ($fields as $category => $items) {
    if (strlen($category) > 0) {
      $output .= '<h2 class="title">'. check_plain($category) .'</h2>';
    }
    $output .= '<dl>';
    foreach ($items as $item) {
      if (isset($item['title'])) {
        $output .= '<dt class="'. $item['class'] .'">'. $item['title'] .'</dt>';
      }
      $output .= '<dd class="'. $item['class'] .'">'. $item['value'] .'</dd>';
    }
    $output .= '</dl>';
  }
  $output .= '</div>';

  return $output;
} 
```

**更新。** 抱歉，没有注意到您正在使用 nodeprofile 模块。我从未使用过它，但我很确定电子邮件可以以类似的方式显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-26T13:33:45.813

在 $user 下查找。

```
global $user;
// You can use dsm with the devel module instead of print_r
print_r($user); 
```

您也可以使用此模块[http://drupal.org/project/logintoboggan](http://drupal.org/project/logintoboggan)？

# python - 从文件中提取位图

> ID：862487
> 
> 赞同：2
> 
> 时间：2009-05-14T09:50:43.003
> 
> 标签：python, heuristics

给定一个未知规格的复杂文件，其中包含未压缩的位图文件 (.BMP)，您将如何在 Python 中提取它？
扫描“BM”标签并查看以下字节是否“类似”BMP 标头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T09:53:26.850

我会使用[Python Imaging Library](http://www.pythonware.com/products/pil/) PIL 并尝试处理数据。如果它可以解析它，那么它就是一个有效的图像。当它抛出异常时，它不是。

您需要搜索图像的开头；如果幸运的话，图像阅读器将忽略图像数据后的垃圾。如果没有，请使用二进制搜索来定位图像的末尾。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T10:19:51.127

是的，您唯一能做的就是在文件中搜索“BM”标记，将以下数据提取到[BITMAPFILEHEADER](http://msdn.microsoft.com/en-us/library/dd183374(VS.85).aspx)和相应的 BITMAPINFO 中，并查看其中的值是否有效（即尺寸是否合理，颜色深度是否合理等）。

找到看起来合理的东西后，将数据提取出来并将其传递给另一个答案中提到的库。

# asp.net - asp.net的缓存策略

> ID：862488
> 
> 赞同：1
> 
> 时间：2009-05-14T09:51:00.117
> 
> 标签：asp.net, caching

我想问有没有办法实现这个功能：

我有一个启用 Ajax 的用户网站（左侧为树视图，右侧为内容）。当用户选择左侧的节点时，我需要将最后选择的节点存储在数据库中。然而，用户可以经常更改节点（甚至每分钟 5 或 10 次）。

所以我想将它添加到应用程序缓存中，例如：

```
cache["userName"]=selectedNodeID;
```

是否有任何缓存框架可以：如果缓存项在 5 分钟内没有更改，则对缓存项执行某些操作？它将允许我在上次更改后 5 分钟后存储上次选择的节点 ID。如果用户在这段时间过去之前更改了节点 - 我只会更新缓存值并重置计时器。

有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T09:56:29.480

您可以在从缓存中删除缓存项时使用回调机制。如果您将缓存持续时间设置为 5 分钟，那么您可以在回调方法中检查该项目是否已保存 - 如果尚未保存，则可以将其推送到数据库。无论哪种情况，您都可以将项目直接放回缓存中 5 分钟。

例如，您将有类似这样的内容作为 Cache.Insert 方法的最后一个参数：

```
new CacheItemRemovedCallback (SaveItemToDatabaseAndReturnItToTheCache) 
```

然后您将相应地实现回调方法。

更多信息在这里：[http ://weblogs.asp.net/kwarren/archive/2004/05/20/136129.aspx](http://weblogs.asp.net/kwarren/archive/2004/05/20/136129.aspx)

# asp.net - wcf服务和web服务有什么区别？

> ID：862489
> 
> 赞同：4
> 
> 时间：2009-05-14T09:51:47.340
> 
> 标签：asp.net, wcf, web-services

> **可能重复：**
> [Web 服务与 WCF 服务](https://stackoverflow.com/questions/351334/web-service-vs-wcf-service)

复制：

[Web 服务与 WCF 服务](https://stackoverflow.com/questions/351334/web-service-vs-wcf-service)

* * *

WCF 服务和 Webservice 有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-14T09:56:09.967

WCF 是一种编程模型和 API。“WCF 服务”意味着使用该编程模型和 API 构建的应用程序。

“Web 服务”是公开 HTTP（REST（XML 或 JSON）、SOAP 或其他）接口的应用程序。

您可以使用 WCF 构建 Web 服务，但也可以使用其他 API 或“堆栈”构建 Web 服务。例如，像 PHP 或 Java。

使用 WCF，您可以构建 Web 服务，但您也可以构建不是“Webbish”的服务。例如，您可以构建一个仅通过本地管道接口接受传入二进制请求的服务。它仍然是一项服务，但它不是“Web 服务”，因为它不使用 Web 协议（通常是 HTTP 和 XML）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-14T09:55:47.347

WCF 是一个扩展——它是一个 Web 服务，但是除了使用 HTTP 之外，您还可以通过 TCP/IP 或命名管道公开它。

此外，WCF 有更多的安全选项等等。

您还可以在自己的应用程序中托管 WCF 服务 - 您不必使用 IIS 来托管 Web 服务 (ASMX)。

总结：WCF*是*Web 服务——比直接的 ASMX Web 服务更灵活、更有用。

马克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T09:59:29.847

我认为这两个链接将为您提供所需的所有信息：

[基于开发的 ASP.NET Web Services 与 WCF 对比](http://msdn.microsoft.com/en-us/library/aa738737.aspx)

[根据使用的目的和标准将 ASP.NET Web 服务与 WCF 进行比较](http://msdn.microsoft.com/en-us/library/aa702755.aspx)

另外，请检查这个问题： [WCF 和其他 Web 服务有什么区别？](https://stackoverflow.com/questions/412698/what-is-difference-with-wcf-and-other-web-services)

# c# - 通过 C# Web 服务处理异常

> ID：862492
> 
> 赞同：3
> 
> 时间：2009-05-14T09:52:55.183
> 
> 标签：c#, web-services, exception

这个问题与[我](https://stackoverflow.com/questions/856993/proper-catching-of-specific-exceptions-through-web-service)本周早些时候提出的这个问题有关。

给出的答案是正确的，除了我忘了提到我们没有使用 WCF，而是使用常规 XML Web 服务，没有`[DataContract]`- 所有方法都简单地以`[WebMethod]`.

是否有任何类似的方法可以使用此服务处理异常？FaultContracts 的想法很好，但似乎这不适用于非 WCF 服务。

编辑：服务器和客户端都是用 .NET (C#) 编写的，因此与其说是返回的格式，不如说是客户端程序识别和捕获正确异常而不是通用 Soap/FaultException 的能力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T09:57:24.237

1.  [抛出更好的 SOAP 异常](http://www.codinghorror.com/blog/archives/000054.html)
2.  [XML Web 服务中的处理和抛出异常。](http://msdn.microsoft.com/en-us/library/ds492xtk(vs.71).aspx)

# php - Testing a php object

> ID：862496
> 
> 赞同：1
> 
> 时间：2009-05-14T09:54:47.690
> 
> 标签：php

This may be rather noobish but I'm gonna ask anyhow. I have a class that inserts into my database. After the insert is finished, I would like to be able to test whether the insert was successful. Can someone tell me what a good way to do this may be?

I call the class like this:

```
foo = new Myclass('my params'); 
```

`print_r($foo)` returns an object. Again, all I am interested in is testing whether the insert was successful or not.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T10:05:30.957

From [http://uk3.php.net/manual/en/function.mysql-db-query.php](http://uk3.php.net/manual/en/function.mysql-db-query.php)

```
 mysql_db_query() selects a database, and executes a query on it. 
```

Returns a positive MySQL result resource to the query result, or FALSE on error. The function also returns TRUE/FALSE for INSERT/UPDATE/DELETE queries to indicate success/failure.

So you can have MyClass set an error flag in the constructor, as the return value from mysql_db_query() you then check for in your code..

```
foo = new Myclass('my params');

if (foo->error) {
 // error occured
} else {
 // all is good
} 
```

hope this helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T09:59:01.660

After doing the insert you can usually query the ID of the new row, have a look at the docs of the framework you are using (if any). Also, the insertion itself should return an error code or throw and exception if it failed. Again, this depends on the framework you are using.

Depending on how thorough you want your testing to be, you should also have a look at [phpunit](http://www.phpunit.de/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T10:04:17.933

```
$foo = new Myclass('my params');
if ($foo->sqlerror) {
  echo "Error Message: ".$foo->sqlerrmsg;
}

class MyClass {
  var $sqlerror = false;
  var $sqlerrmsg = null;

  // constructor
  function MyClass($parms) {
    $res = mysql_query($sql);

    if (mysql_error()) {
      $this->sqlerrmsg = mysql_error();
      $this->sqlerror = true;
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T10:05:07.150

The mysql_query() function returns true on a succesfull insert.

Did you write the class yourself? If so, you could have the insert(), or save() function (whatever you called it) return a boolean (true/false) so you can check whether the insert succeeded.

If you are using DB_DataObject it goes like this:

```
$foo = new ClassX();
$foo->name = 'Name';
if($foo->insert()) {
  //insert succeeded
} else {
  //insert failed
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T14:03:59.637

You could just do $foo->affected_rows() Which on insert will be 1.

# forms - 如何从 Dynamics AX 2009 表单中选择路径？

> ID：862509
> 
> 赞同：1
> 
> 时间：2009-05-14T09:57:57.357
> 
> 标签：forms, dynamics-ax-2009

在 Dynamics AX 2009 中，我创建了一个向导，现在我想添加一个字段来从本地文件系统中选择一个路径。

既然没有选择路径的特殊控制，我该如何实现呢？
我是否必须添加具有特殊 ExtendedDataType 的 StringEdit 才能获得路径选择？我发现没有扩展数据类型“路径”等。

或者这是通过其他方式实现的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T17:58:40.243

山姆，

您对 EDT 的看法是正确的。有很多方法可以做到这一点，但通常一切都归结为将正确的 EDT 分配给 StringEdit 控件。感兴趣的 EDT 是 FilePath、FileName、FileNameOpen 等。您可以通过查看 DocuParameters 表单来了解它的工作原理。

问候， 韦利斯拉夫·马里诺夫

# c# - C#如何查找引用类型的大小

> ID：862510
> 
> 赞同：4
> 
> 时间：2009-05-14T09:58:27.650
> 
> 标签：c#, memory, size, reference-type

我想知道是否有办法在 C# 中找到引用类型的大小。我做了一些谷歌搜索，论坛上的一般想法似乎是这是不可能的。我想我会问你们，看看这里是否有人知道得更好。

毕竟，分析工具必须有办法做到这一点？我知道通常不需要知道这些信息，但在某些情况下它会很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T10:06:26.867

嗯。我会使用分析工具，但我想这样的事情可能会起作用：

```
long before = System.GC.GetTotalMemory(true);
Foo instance = new Foo();
long after = System.GC.GetTotalMemory(true);
long consumed = after - before; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T10:04:16.933

可以做一个粗略的估计，通过profilig跟踪使用的内存也应该是可能的。但是 JIT 可以自由设置最适合的类型布局，这也可能取决于框架版本、机器配置（尤其是 32 位与 64 位）、框架提供者（MS、Mono、GNU.NET 等）等等

提前计算将与此类似：

*   参考是 32 位或 64 位，具体取决于平台

*   类实例具有对类型信息（包括 VTable 等）的内部引用，以及对包含的每个引用类型（包括字符串或数组）的引用，以及任何结构使用的内存（可以对这些结构进行布局，以便访问高效，实际上留下了一些未使用的内存）。

所以问题也是，你想获取类使用的内存还是类和相关数据（如字段中的字符串、数组、列表、字典等）？

# sql-server - 跟踪多次修改的存储过程的所有版本

> ID：862511
> 
> 赞同：0
> 
> 时间：2009-05-14T09:58:41.300
> 
> 标签：sql-server, stored-procedures

如果一个存储过程被修改了 10 次，我想在一个表中记录或跟踪它，从最初的存储过程到最新的 10 个不同版本的相同存储过程的 10 行中的列中，任何人都可以建议如何做这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T10:25:14.153

您没有说您使用的是哪个版本的 SQL Server，但是您是否查看过[DDL 触发器？](http://msdn.microsoft.com/en-us/library/ms190989(SQL.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T10:02:17.983

我知道我没有直接回答您的问题，但是您是否考虑过为此使用源代码控制工具？像svn，源代码安全，...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T10:04:31.910

如果您使用的是 dot net，最好创建一个数据库项目，您可以在其中存储 SP 以及所有其他对象的脚本，并使用一些源代码控制来维护版本历史记录。

# c# - 如何在 C# 中设置 webbrowser 媒体类型以打印？

> ID：862517
> 
> 赞同：0
> 
> 时间：2009-05-14T10:01:05.477
> 
> 标签：c#, browser

在 webbrowser 控件中，我想设置媒体类型 = 打印。因此它将以打印预览模式显示内容。这可能吗？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-26T07:29:13.317

似乎唯一的解决方案是将请求重定向到其他服务器，该服务器将获取原始页面并修改 css 属性以在屏幕上显示打印布局。这可以通过删除屏幕 css 文件并将属性 media="print" 设置为 media="screen" 来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T13:13:54.930

在谷歌浏览器（我现在使用版本 33）中，您可以打开开发人员工具，`F12`然后按`Esc`。在 Emulation 选项卡中，您可以设置`CSS media`为`print`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-14T10:10:08.730

通过将 media 属性设置为 print 来使用 CSS 模拟打印预览 -

```
<link rel="stylesheet" type="text/css" href="path/to/print.css" media="print" /> 
```

[在 ASP.NET 中动态创建打印预览页面](http://geekswithblogs.net/ferdous/articles/103175.aspx)

[在 ASP.NET 中动态创建打印预览页面](http://www.codeproject.com/KB/aspnet/PrintPreview.aspx)

[http://www.eggheadcafe.com/community/aspnet/2/10083542/open-the-print-preview-di.aspx](http://www.eggheadcafe.com/community/aspnet/2/10083542/open-the-print-preview-di.aspx)

# java - 优化一个简单的搜索算法

> ID：862518
> 
> 赞同：8
> 
> 时间：2009-05-14T10:01:36.550
> 
> 标签：java, optimization, search

我一直在玩一个相当简单的自制搜索引擎，现在我正在玩弄一些相关性排序代码。

它不是很漂亮，但是在聪明的算法方面我不是很好，所以我希望我能得到一些建议:)

基本上，我希望每个搜索结果都根据与搜索条件匹配的单词数进行评分。每个完全匹配的单词得 3 分，部分匹配得 1 分

例如，如果我搜索“冬雪”，结果如下：

*   **冬雪** **=** > 6 分
*   **冬季** **下雪**=> 4 分
*   **冬季**陆地**雪**=> 4 点
*   **冬日**阳光=> 3分
*   **冬季**大地**降雪**=> 2 分

这是代码：

```
String[] resultWords = result.split(" ");
String[] searchWords = searchStr.split(" ");
int score = 0;
for (String resultWord : resultWords) {
    for (String searchWord : searchWords) {
        if (resultWord.equalsIgnoreCase(searchWord))
            score += 3;
        else if (resultWord.toLowerCase().contains(searchWord.toLowerCase()))
            score++;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T10:23:42.177

你的代码对我来说似乎没问题。我建议小改动：

由于您正在经历所有可能的组合，因此您可能会`toLowerCase()`在一开始就获得支持。

此外，如果已经发生完全匹配，则无需执行另一个`equals`.

```
 result = result.toLowerCase();
    searchStr = searchStr.toLowerCase();

    String[] resultWords = result.split(" ");
    String[] searchWords = searchStr.split(" ");
    int score = 0;
    for (String resultWord : resultWords) {
        boolean exactMatch = false;
        for (String searchWord : searchWords) {
            if (!exactMatch && resultWord.equals(searchWord)) {
                exactMatch = true;
                score += 3;
            } else if (resultWord.contains(searchWord))
                score++;
        }
    } 
```

当然，这是一个非常基础的水平。如果您真的对计算机科学的这一领域感兴趣并想了解更多有关实施搜索引擎的信息，请从以下术语开始：

*   [自然语言处理](http://en.wikipedia.org/wiki/Natural_language_processing)
*   [信息检索](http://en.wikipedia.org/wiki/Information_retrieval)
*   [文本挖掘](http://en.wikipedia.org/wiki/Text_mining)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T10:24:57.680

*   [词干](http://en.wikipedia.org/wiki/Stemming)
*   对于首字母缩写词，区分大小写很重要，即[SUN](http://www.acronymfinder.com/SUN.html)；任何同时匹配内容和大小写的单词的权重必须超过 3 分（5 或 7）？
*   使用[策略设计模式](http://en.wikipedia.org/wiki/Strategy_pattern)

例如，考虑这个简单的分数模型：

```
interface ScoreModel {
     int startingScore();
     int partialMatch();
     int exactMatch();
} 
```

...

```
int search(String result, String searchStr, ScoreModel model) {
    String[] resultWords = result.split(" ");
    String[] searchWords = searchStr.split(" ");
    int score = model.startingScore();

    for (String resultWord : resultWords) {
        for (String searchWord : searchWords) {
            if (resultWord.equalsIgnoreCase(searchWord)) {
                score += model.exactMatch();
            } else if (resultWord.toLowerCase().contains(searchWord.toLowerCase())) {
                score += model.partialMatch();
            }
        }
    }

    return score;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T10:21:46.487

可以通过预处理数据库来完成基本优化：不要每次都将条目拆分为单词。

在将每个条目添加到数据库期间为每个条目构建单词列表（首选哈希或二叉树以加速列表中的搜索），删除所有太短的单词，小写并存储此数据以供进一步使用。

在搜索开始时对搜索字符串执行相同的操作（拆分、小写、清理），并使用此单词列表与每个条目单词列表进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T10:35:44.427

1）您可以先对searchWords进行排序。一旦您的结果词按字母顺序排列在当前搜索词之后，您就可以跳出循环。

2）更好的是，对两者进行排序，然后同时沿着两个列表查找匹配项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T11:47:09.543

您可以使用正则表达式来查找匹配模式的模式和长度（用于后面的分类/评分）。

# django - Django：保存模型时填充用户 ID

> ID：862522
> 
> 赞同：57
> 
> 时间：2009-05-14T10:02:42.913
> 
> 标签：django, django-models, django-authentication

我有一个带有 created_by 字段的模型，该字段链接到标准 Django User 模型。保存模型时，我需要使用当前用户的 ID 自动填充它。我不能在 Admin 层执行此操作，因为站点的大部分部分都不会使用内置的 Admin。任何人都可以建议我应该如何去做吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-02-14T18:23:26.683

> **更新 2020-01-02**
> ⚠ 以下答案从未更新到最新的 Python 和 Django 版本。自从几年前写这篇文章以来，已经发布了包来解决这个问题。现在我强烈推荐使用`django-crum`which 实现相同的技术但有测试并定期更新：[https ://pypi.org/project/django-crum/](https://pypi.org/project/django-crum/)

最不显眼的方法是使用 a`CurrentUserMiddleware`将当前用户存储在线程本地对象中：

## current_user.py

```
from threading import local

_user = local()

class CurrentUserMiddleware(object):
    def process_request(self, request):
        _user.value = request.user

def get_current_user():
    return _user.value 
```

现在您只需在身份验证中间件**之后**将此中间件添加到您的 MIDDLEWARE_CLASSES中。

## 设置.py

```
MIDDLEWARE_CLASSES = (
    ...
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    ...
    'current_user.CurrentUserMiddleware',
    ...
) 
```

您的模型现在可以使用该`get_current_user`函数访问用户，而无需传递请求对象。

## 模型.py

```
from django.db import models
from current_user import get_current_user

class MyModel(models.Model):
    created_by = models.ForeignKey('auth.User', default=get_current_user) 
```

## 暗示：

如果您使用 Django CMS，您甚至不需要定义自己的 CurrentUserMiddleware，但可以使用`cms.middleware.user.CurrentUserMiddleware`和`cms.utils.permissions.get_current_user`检索当前用户的函数。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-05-14T11:43:20.707

如果您想要在管理员和其他地方都可以使用的东西，您应该使用自定义模型表单。基本思想是重写该`__init__`方法以获取额外的参数-request-并将其存储为表单的属性，然后还重写save方法以在保存到数据库之前设置用户ID。

```
class MyModelForm(forms.ModelForm):

   def __init__(self, *args, **kwargs):
       self.request = kwargs.pop('request', None)
       return super(MyModelForm, self).__init__(*args, **kwargs)

   def save(self, *args, **kwargs):
       kwargs['commit']=False
       obj = super(MyModelForm, self).save(*args, **kwargs)
       if self.request:
           obj.user = self.request.user
       obj.save()
       return obj 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2011-07-07T17:36:31.390

丹尼尔的回答不会直接对管理员起作用，因为您需要传入请求对象。您可能可以通过覆盖类中的`get_form`方法来做到这一点，`ModelAdmin`但远离表单自定义可能更容易，只需覆盖`save_model`您的`ModelAdmin`.

```
def save_model(self, request, obj, form, change):
    """When creating a new object, set the creator field.
    """
    if not change:
        obj.creator = request.user
    obj.save() 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-10-19T15:37:32.520

这整个方法让我大吃一惊。我想只说一次，所以我在中间件中实现了它。只需在身份验证中间件之后添加 WhodidMiddleware。

如果您的 created_by 和 modified_by 字段设置为，`editable = False`那么您根本不必更改任何表单。

```
"""Add user created_by and modified_by foreign key refs to any model automatically.
   Almost entirely taken from https://github.com/Atomidata/django-audit-log/blob/master/audit_log/middleware.py"""
from django.db.models import signals
from django.utils.functional import curry

class WhodidMiddleware(object):
    def process_request(self, request):
        if not request.method in ('GET', 'HEAD', 'OPTIONS', 'TRACE'):
            if hasattr(request, 'user') and request.user.is_authenticated():
                user = request.user
            else:
                user = None

            mark_whodid = curry(self.mark_whodid, user)
            signals.pre_save.connect(mark_whodid,  dispatch_uid = (self.__class__, request,), weak = False)

    def process_response(self, request, response):
        signals.pre_save.disconnect(dispatch_uid =  (self.__class__, request,))
        return response

    def mark_whodid(self, user, sender, instance, **kwargs):
        if 'created_by' in instance._meta.fields and not instance.created_by:
            instance.created_by = user
        if 'modified_by' in instance._meta.fields:
            instance.modified_by = user 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-03-21T05:25:55.607

这是我使用通用视图的方法：

```
class MyView(CreateView):
    model = MyModel

    def form_valid(self, form):
        object = form.save(commit=False)
        object.owner = self.request.user
        object.save()
        return super(MyView, self).form_valid(form) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-03-02T01:49:03.027

If you are using class based views Daniel's answer needs more. Add the following to ensure that the request object is available for us in your ModelForm object

```
class BaseCreateView(CreateView):
    def get_form_kwargs(self):
        """
        Returns the keyword arguments for instanciating the form.
        """
        kwargs = {'initial': self.get_initial()}
        if self.request.method in ('POST', 'PUT'):
            kwargs.update({
                'data': self.request.POST,
                'files': self.request.FILES,
                'request': self.request})
        return kwargs 
```

Also, as already mentioned, you need to return the obj at the end of ModelForm.save()

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-07-07T04:14:19.703

使用类似的东西有什么问题：

```
class MyModelForm(forms.ModelForm):
    class Meta:
        model = MyModel
        exclude = ['created_by']

    def save(self, user):
        obj = super().save(commit = False)
        obj.created_by = user
        obj.save()
        return obj 
```

现在`myform.save(request.user)`在**视图**中调用它。

这是[ModelForm的保存函数](https://github.com/django/django/blob/66b6b689239dad3f017d2a3495df748cbee5debb/django/forms/models.py#L443)，它只有一个`commit`参数。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-08-04T01:01:31.480

根据[Bikeshedder](https://stackoverflow.com/users/994342/bikeshedder)的回答，我找到了一个解决方案，因为他实际上并没有为我工作。

1.  应用程序/中间件/current_user.py

    ```
    from threading import local

    _user = local()

    class CurrentUserMiddleware(object):

    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        _user.value = request.user
        return self.get_response(request)

    def get_current_user():
        return _user.value 
    ```

2.  设置.py

    ```
    MIDDLEWARE = [
        'django.middleware.security.SecurityMiddleware',
        'django.contrib.sessions.middleware.SessionMiddleware',
        'django.middleware.common.CommonMiddleware',
        'django.middleware.csrf.CsrfViewMiddleware',
        'django.contrib.auth.middleware.AuthenticationMiddleware',
        'django.contrib.messages.middleware.MessageMiddleware',
        'django.middleware.clickjacking.XFrameOptionsMiddleware',

        'common.middleware.current_user.CurrentUserMiddleware',
    ] 
    ```

3.  模型.py

    ```
    from common.middleware import current_user
    created_by = models.ForeignKey(User, blank=False, related_name='created_by', editable=False, default=current_user.get_current_user) 
    ```

我正在使用 python 3.5 和 django 1.11.3

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-07-11T23:53:51.657

为了将来的参考，我找到了关于这个主题的最佳解决方案：

[https://pypi.python.org/pypi/django-crum/0.6.1](https://pypi.python.org/pypi/django-crum/0.6.1)

这个库由一些中间件组成。设置这个库后，只需覆盖模型的保存方法并执行以下操作，

```
from crum import get_current_user        

def save(self, *args, **kwargs):
    user = get_current_user()
    if not self.pk:
        self.created_by = user
    else:
        self.changed_by = user
    super(Foomodel, self).save(*args, **kwargs) 
```

如果您为所有模型创建和抽象模型并从它继承，您将获得自动填充的 created_by 和 changed_by 字段。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-06-18T21:13:43.213

来自 Django 文档[Models 和 request.user](https://docs.djangoproject.com/en/2.2/topics/class-based-views/generic-editing/#models-and-request-user)：

> " 要跟踪使用 CreateView 创建对象的用户，您可以使用自定义 ModelForm。在视图中，确保您没有将 [用户字段] 包含在要编辑的字段列表中，并将 form_valid() 覆盖为添加用户：

```
from django.contrib.auth.mixins import LoginRequiredMixin
from django.views.generic.edit import CreateView
from myapp.models import Author

class AuthorCreate(LoginRequiredMixin, CreateView):
    model = Author
    fields = ['name']

    def form_valid(self, form):
        form.instance.created_by = self.request.user
        return super().form_valid(form) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-12-20T14:46:47.127

我不相信丹尼尔的答案是最好的，因为它通过始终保存对象来改变模型表单的默认行为。

我会使用的代码：

# 表格.py

```
from django import forms

class MyModelForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        self.user = kwargs.pop('user', None)
        super(MyModelForm, self).__init__(*args, **kwargs)

    def save(self, commit=True):
        obj = super(MyModelForm, self).save(commit=False)

        if obj.created_by_id is None:
            obj.created_by = self.user

        if commit:
            obj.save()
        return obj 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-08-04T17:56:28.750

forms.ModelForm 中的“保存”方法返回保存的实例。

您应该在 MyModelForm 中添加最后一行：
...
return obj

如果您使用 create_object 或 update_object 通用视图，则此更改是必要的。
他们使用保存的对象进行重定向。

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2014-01-05T23:25:21.523

请注意确定您是否正在寻找这个，但添加以下内容

```
user = models.ForeignKey('auth.User') 
```

到模型将有助于将用户 ID 添加到模型中。

在下文中，每个层次结构都属于一个用户。

```
class Hierarchy(models.Model):
    user = models.ForeignKey('auth.User')
    name = models.CharField(max_length=200)
    desc = models.CharField(max_length=1500) 
```

# asp.net-mvc - Asp.net MVC - LINQ 和分层数据

> ID：862533
> 
> 赞同：0
> 
> 时间：2009-05-14T10:05:06.887
> 
> 标签：asp.net-mvc, linq

我有一个包含这两个表的数据库

```
ProductCategory    
 IDCat
 Name
 Description

ProductSubCategories
 IDSub
 Name
 IDCat 
```

此表与 IDCat 相关。

如何使用 LINQ 检索按类别分组的类别和子类别列表？

在我的 PartialView 中，我想创建一个具有 Category 和 SubCategories 的菜单，如下所示：

```
Category1
    SubCategory1
    SubCategory2
    SubCategory3
 Category2
    SubCategory1
    SubCategory2
    SubCategory3
 Category3
    SubCategory1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T10:21:39.747

```
MyDataContext db=new MyDataContext();

IQueryable<ProductCategory> categories= db.Categories;

foreach (Category c in categories){
  Console.WriteLine (c.Name);
  foreach (ProductSubCategories sub in c.ProductSubCategories){
    Console.Writeline (sub.Name);
  }  
} 
```

**编辑以视图格式放置答案**

```
<% foreach (Category c in Model){ %>
<%= Html.Encode(c.Name) %> <br />
    <% foreach (ProductSubCategories sub in Model.Categories){ %>        
        <%= Html.Encode(sub.Name) %> <br />               
    <% } %>
<%} %> 
```

这应该有效（或接近），但我已经注意到测试过的语法。请注意，正如其他人所指出的，您的主键和外键必须正确设置才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T12:26:35.157

如果您在 DB 中正确设置了 PK-FK，LINQ to SQL 将为您进行对象关联。所以ProductCategory中会有一个属性作为ProductSubCategory的EntitySet。

关键是您的 DB PK-FK 引用必须是正确的，LINQ 代码生成器才能获取它。

# asp.net-mvc - 在 ASP.NET MVC 中使用 jQuery 提交 AjaxForm

> ID：862540
> 
> 赞同：3
> 
> 时间：2009-05-14T10:06:35.230
> 
> 标签：asp.net-mvc, jquery

我在 asp.net mvc 中有一个 ajax 表单，就像这样简单：

```
 <% using (this.Ajax.BeginForm("LatestBlogPosts", "Blog", null, new AjaxOptions { UpdateTargetId = "blogPostPanel" }, new { id = "BlogPostForm" })) { %>
    <div class="panel" id="blogPostPanel">
        <img src="/images/ajax-loader.gif" alt="ajax-loader" />
    </div>
    <% } %> 

```

我想在加载文档时调用表单提交。据推测，这应该调用控制器的操作并返回应该用占位符 DIV 替换的结果。如果我在表单中添加一个 SUBMIT 按钮，它可以完美地工作，但是当我通过 jQuery 调用提交时，整个页面都会刷新，并且服务器返回的内容会显示在新显示的页面中。这是我的 jQuery 代码：

```
 <script type="text/javascript">
        $(document).ready(function() {
            $("#BlogPostForm").submit();
        });
    </script> 

```

无论如何要这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T10:17:34.390

我认为如果您使用触发器方法来生成提交事件，它可能会起作用，但我认为使用 jQuery 有一种不太复杂的方法来做到这一点。

```
<div class="panel" id="blogPostPanel">
    <img src="/images/ajax-loader.gif" alt="ajax-loader" />
</div>

<script type="text/javascript">
    $(function() {
         $('#blogPostPanel').load( '<%= Url.Action( "LatestBlogPosts", "Blog" ) %>' );
    });
</script> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2009-05-14T10:19:04.903

如果您期待传统的回发，则需要调用 __doPostBack javascript 函数。

[http://geekswithblogs.net/mnf/archive/2005/11/04/59081.aspx](http://geekswithblogs.net/mnf/archive/2005/11/04/59081.aspx)

# c# - 如何使用 C# 在水晶报表上显示相同的传递变量

> ID：862544
> 
> 赞同：0
> 
> 时间：2009-05-14T10:08:22.230
> 
> 标签：c#, winforms, crystal-reports

我真的很确定我的问题的标题描述了我的意思。我想这就是为什么我在谷歌上找不到那么多。我认为需要解释一下。基本上我已经成功地以编程方式将离散值传递给我的报告。现在我想利用 A4 纸格式来获得 2 个 A3 格式。这意味着我想要显示两倍的报告。所以我天真地将我已经做过的复制到报告的底部。重复的不是出于某种原因显示。我能找到的唯一解决方法是创建具有不同名称的相同参数集并将相同的值传递给它们。但这对我来说听起来不太好，大约有 12 个参数。如果我想做的话，它应该只有 24 个那。你们如何解决这个问题？谢谢阅读。PS：使用C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T13:58:21.340

您可以右键单击并选择格式字段，然后查看是否勾选了“抑制”或“如果重复则抑制”字段？

# sql - 结合布尔的选择语句

> ID：862551
> 
> 赞同：-1
> 
> 时间：2009-05-14T10:11:01.927
> 
> 标签：sql, db2

嗨，伙计们，你能帮我吗？

```
SELECT e.name, 
    IF  e.active = 0 THEN
      e.active = true
   WHERE e.id = #{estate_id}
    ELSE 
      e.active = false
   WHERE e.id = #{estate_id}
   END IF
   AS Estate_status
   FROM estates e 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T10:16:14.143

这是 db2 语法，因为您没有提到您正在使用哪个数据库：

```
select e.name,
    case when e.active = 0 then 'TRUE'
        else 'FALSE'
    end AS Estate_status,
    from estates e
where e.id = #{estate_id} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T10:18:49.897

使用`case`声明：

```
SELECT
  e.name, 
  (case when e.active = 0 THEN e.active = 1 ELSE e.active = 0 END) AS Estate_status
FROM 
  estates e
WHERE
  e.id = #{estate_id} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T10:17:42.877

我对你的 SQL 语句的其余部分感到困惑。你到底想达到什么目的。

但是，就问题本身而言，您不能像这样在 SQL 中使用 IF 语句。但是，您可以使用 CASE 语句，例如：

```
CASE
    WHEN e.active = 0 THEN 'true'
    ELSE 'false'
END 
```

# delphi - Rave 报告和 EAN128 条码

> ID：862554
> 
> 赞同：1
> 
> 时间：2009-05-14T10:12:18.490
> 
> 标签：delphi, barcode, rave-reports

我正在尝试在 Rave 报告中打印 EAN128 条形码。根据帮助，我应该能够使用 code128 组件，并将 FNC1 添加到它。我就是不能让它工作。谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-26T20:44:18.877

我今天刚遇到同样的问题。Rave 中的 FNC1 字符是 ñ（n 波浪号，ascii 241）。只需将其放在代码的前面，它就应该被正确识别为 EAN128。在 Rave Reports 5.1 中为我工作。

# c# - 有没有办法防止在反射器等软件中打开dll？

> ID：862560
> 
> 赞同：3
> 
> 时间：2009-05-14T10:13:59.470
> 
> 标签：c#, reflector

嗨，有没有办法防止 C# 中的特定 dll 在反射器中打开。我可以打开许多 dll 并且可以使用反射器获取代码。但是当试图打开某些 dll 时，它会显示一条错误消息，指出“特定的 dll 不包含 CLI 标头。”。

我怎样才能制作这样的dll？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-14T10:16:56.203

您确定这些 DLL 是托管代码 dll 吗？我不这么认为，如果它们不包含 CLI 标头，它们就不是用 C# 编写的。

对于您的问题，您无法阻止在反编译器中打开托管 DLL，您所能做的就是对其进行混淆。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T10:21:11.263

如果你想保护你的 .net dll，你可以混淆你的程序集

[免费的 .NET 混淆工具](http://twit88.com/blog/2007/09/15/free-net-obfuscation-tools/)

你也有商业的...

“特定 dll 不包含 CLI 标头。”。消息出现在反射器中，因为它们不是托管 dll (.net)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T10:47:44.990

我认为曾经有一个特定的 IL 代码导致反射器崩溃。但是这个错误现在已经修复了。

混淆很好 - 您还可以尝试加密代码的某些关键部分并在运行时解密+加载+编译它。问题是如何存储密码。

你无法阻止它被反光板打开。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-08-11T05:04:46.217

没有办法阻止 Reflector 打开 .Net 程序集，但是您通过混淆程序集使其变得毫无意义。混淆后，类/方法/字段被重命名，方法中的内联字符串被加密，方法调用被隐藏，方法控制流被打乱等等。因此，任何使用 Reflector 的人都会看到很多垃圾，并且无法理解其中的大部分内容。

[免责声明：我为Crypto Obfuscator](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)的开发人员 LogicNP Software 工作

# asp.net - ASP.NET：在将数据保存到数据库时显示进度信息

> ID：862563
> 
> 赞同：1
> 
> 时间：2009-05-14T10:15:11.433
> 
> 标签：asp.net, jquery, show, progress

我有一个 ASP.NET 2.0 Web 应用程序。我想在用户保存一些数据时显示进度指示器（例如：编辑配置文件）。我已经在我的应用程序中使用 jQuery 来处理一些客户端副作用。我怎样才能做到这一点 ？与 ASP.NET 一起使用的任何 jquery 受信任的东西？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T10:36:02.740

您想在操作发生时显示实际进度还是只是一个繁忙的指示器？如果是前者，您将需要一些机制来记录会话中的保存进度，以及通过 AJAX 检查进度状态的方法。您将通过 AJAX 提交表单，然后定期调用 check 方法以获取进度报告并更新任何客户端指示器（通常从一系列罐装图像中的一个切换到另一个或增加一些填充“条”的宽度）。当然，这很复杂。

如果您想执行后者，只需在您使用 beforeSend 回调从 jQuery 通过 AJAX 提交表单时显示一个忙碌指示符的动画 GIF，然后使用 ajax 方法的完整处理程序隐藏指示符。

```
$('form').ajax( {
    url: '/updateprofile.aspx',
    type: 'POST',
    data: function() { return $('form').serialize(); },
    beforeSend: function() { $('#indicator').show(); },
    complete: function() { $('#indicator').hide(); },
    success: function(data,status) { alert('Update complete'); }
}); 
```

上面的代码将在从任何处理程序调用提交或挂钩到表单的提交事件的函数中调用——尽管您也必须阻止默认操作发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T10:39:19.020

显示有意义的进度指示器的另一种方法是在保存数据的同时显示动画 gif，例如 Firefox 中使用的旋转“雏菊”模式。

这向用户显示正在发生的事情并且通常很受欢迎。

无论如何，显示完成百分比的进度指标通常毫无意义，除非他们真的知道第一个“50%”与最后一个“50%”相比需要多长时间。其他进度指标更有意义，例如那些显示记录计数增量的指标等。

# c# - 如何在 wpf 中使用 RelayCommand？

> ID：862570
> 
> 赞同：40
> 
> 时间：2009-05-14T10:16:17.843
> 
> 标签：c#, wpf, relaycommand

如何 `RelayCommand`在 wpf 中使用？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-05-14T10:20:26.397

中继命令在 WPF 中不存在，它只是一个外部类，在[此 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)中定义后引起了人们的注意。如果你想使用它，你需要自己编写它。

否则，您可以在[此处](http://www.codeplex.com/wpf/Release/ProjectReleases.aspx?ReleaseId=14962)使用 WPF 工具包中的 Delegate 命令，它比 RelayCommand 代码具有一些额外的功能。

* * *

啊，当我输入这个答案时，问题发生了变化。假设您使用的是上面定义的 RelayCommand，您需要为它提供一个或两个委托，一个返回一个 bool 来确定命令是否处于要运行的有效状态，另一个不返回任何内容并实际运行命令。如果您不提供“CanRun”委托，那么该命令将认为它始终处于有效状态。文章中使用的代码：

```
RelayCommand _saveCommand;
public ICommand SaveCommand
{
    get
    {
        if (_saveCommand == null)
        {
            _saveCommand = new RelayCommand(param => this.Save(),
                param => this.CanSave );
        }
        return _saveCommand;
    }
} 
```

声明一个 RelayCommand，它将在触发时调用 Save() 方法并返回 CanSave 属性作为有效性测试。当此命令绑定到 WPF 中的按钮时，Button 的 IsEnabled 属性将匹配 ViewModel 的 CanSave 属性，并且当单击按钮时（假设它已启用），将在 ViewModel 上调用 Save() 方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T18:00:08.317

作为`RelayCommand`为所有方法创建包装器的替代方法，我可以建议一个免费的库和源代码，以允许您使用绑定`{BindTo Save()}`。我创建它是为了简化我的绑定。它还使相对绑定更容易。你可以在这里找到它：[http ://www.simplygoodcode.com/2012/08/simpler-wpf-binding.html](http://www.simplygoodcode.com/2012/08/simpler-wpf-binding.html)

# java - 在 Java 中使用什么模式从 iPhone 解密 RSA 消息？

> ID：862571
> 
> 赞同：2
> 
> 时间：2009-05-14T10:16:30.697
> 
> 标签：java, iphone, encryption, rsa

我的朋友在 iPhone 上使用 PKCS1 填充加密数据。

如何在 Java 中解密该数据？

Java 要求我指定“算法/密码模式/填充”。填充和算法是已知的，但我们都不知道密码模式；在 iPhone 上加密时未指定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T10:20:41.763

使用[充气城堡](http://www.bouncycastle.org/java.html)，[这段代码](http://www.java2s.com/Tutorial/Java/0490__Security/RSAexamplewithPKCS1Padding.htm)应该很简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T03:25:17.620

RSA 并没有真正使用“模式”。模式用于分组密码。

内置的 Sun 提供程序将接受“RSA/ECB/PKCS1Padding”作为`Cipher`名称。ECB 是“电子密码本”，不会在“区块”之间混合任何信息；这是一种“无密码模式”。

其他提供商接受“无”作为 RSA 的密码模式。

BouncyCastle 是一个很好的提供者。但是，我不确定为什么在这种情况下您需要不厌其烦地安装它。SunJCE 提供程序可以正常工作。

# swt - SWT 到 BMML 表示

> ID：862575
> 
> 赞同：1
> 
> 时间：2009-05-14T10:17:26.077
> 
> 标签：swt, balsamiq

我试图将 SWT 中内置的对话框转换为 BMML。任何人都可以帮助我如何实现它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-07T20:08:32.907

这是 SWT 到 BMML 插件的[博客文章](http://in.relation.to/Bloggers/InstantMockupForEclipseSWTApplications)和[源存储库](http://github.com/maxandersen/update.xam.dk/tree/master)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-06-07T19:33:56.410

下面是一些将 SWT 转换为 WireframeSketcher 的屏幕格式的代码：http: [//pastebin.com/f4625affc](http://pastebin.com/f4625affc)

该代码实际上被 WireframeSketcher 用于它的 Spy 插件。有关更多详细信息，请参阅此博客文章：[SWT to Mockup：WireframeSketcher Spy 插件](http://wireframesketcher.com/blog/2009-06-04-swt-to-mockup-wireframesketcher-spy-plugin.html)

# algorithm - 检测图中循环的最快算法

> ID：862578
> 
> 赞同：3
> 
> 时间：2009-05-14T10:17:50.227
> 
> 标签：algorithm, graph-theory, cycle

给定一个无向图，检测它是否包含循环的最佳算法是什么？

在跟踪访问节点的同时进行广度优先或深度优先搜索是一种方法，但它是 O(n^2)。有什么更快的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-14T10:31:25.200

给定图 G(V,E) 的 BFS 和 DFS 算法的时间复杂度为 O(|V|+|E|)。所以你可以看到它是输入的线性依赖。如果您有非常专业的图，您可以执行一些启发式方法，但通常使用 DFS 并没有那么糟糕。[您可以在此处](http://en.wikipedia.org/wiki/Cycle_detection)查看一些信息。无论如何，您必须遍历整个图表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-12T10:00:52.990

这是你的`O(V)`算法：

```
def hasCycles(G, V, E): 
    if E>=V:
        return True
    else:
        # here E<V
        # perform O(E+V) = O(V) algorithm 
        ... 
```

... 可以使用 DFS 执行。如果你有`E<V`并且边缘以有意义的方式存储（作为列表），你可能会做 O(E)+logs 这将使整个算法`O(min(E,V))+logs`。

希望你喜欢这个答案，虽然有点晚了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T10:52:14.527

如果使用邻接表表示图，则使用深度优先搜索测试图 G(V,E) 中是否存在循环是 O(|V|,|E|)。

有必要遍历整个图以显示没有循环。如果您只是对循环的存在/不存在感兴趣，那么您显然可以在发现循环时完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:22:37.597

如果你有一个简单的图形，你可以计算圈数：

```
C = E − N + P 
```

其中 C 是循环数，E 是边数，N 是节点数，P 是组件数。如果你的图表是连接的，它是：

```
C = E - N + 1 
```

# asp.net - 您将如何复制 ASP.Net 项目？

> ID：862580
> 
> 赞同：0
> 
> 时间：2009-05-14T10:18:17.353
> 
> 标签：asp.net, vb.net, deployment, visual-sourcesafe

我有一个 .Net Web 应用程序，我想复制它并创建一个可以独立于第一个应用程序的新应用程序 - 即我想分支代码库。

解决这个问题的最佳方法是什么？

TIA,

蒂姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T10:31:07.667

假设您已经获取了网站的本地副本，您只需将网站的根文件夹复制并粘贴到资源管理器中即可。我不确定 source ~~thief~~ safe 有什么样的分支设施，但您可以将新副本添加到您认为合适的存储库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T11:12:25.210

下载 VisualSVN Server，在本地安装（需要 5 分钟）并为您的项目创建一个存储库。然后创建一个分支。

# asp.net - 网络方法的最大数量？

> ID：862581
> 
> 赞同：2
> 
> 时间：2009-05-14T10:18:31.860
> 
> 标签：asp.net, web-services

我在 asp.net 2.0 中有一个具有 234 种方法的 Web 服务。似乎当我添加另一种方法时，该站点在我首先删除一个方法之前不会在 VS2005 中编译。我收到一条消息，说我刚刚添加的新方法不存在于 Microsoft.Net/.../Temporary Files 目录中的文件中。我重新启动了 IIS，关闭了 VS2005，从这个临时目录中删除了所有文件，但无济于事。让代码编译的唯一方法是删除另一个以保留 234 个方法....

我可以一致地复制这种行为，所以它不能是我的代码。现在我知道这看起来很奇怪，但这是真的！另一件奇怪的事情是，恰好有 100 个方法名称以 GetXXXyyyZZZ 这个词开头

是否有其他人遇到过 Web 服务中允许的最大方法数的问题？非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T10:34:07.907

我建议将您的方法组织到相关的组中，并根据这些组将您的单个 Web 服务拆分为许多较小的 Web 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-05-03T16:14:05.303

如果您想要一个答案，只需创建一个新的 Web 服务并在其中创建 235 个 Web 方法。如果你有同样的问题=>有一个限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T11:40:47.547

你不会为糟糕的设计找到好的解决方案。最好重新设计 Web 服务，以便 Web 服务的消费者可以在组层次结构中看到它们，并且不会将其报告给 thedailywtf :)

# html - 样式化表单元素（选择、复选框、单选等）？

> ID：862585
> 
> 赞同：1
> 
> 时间：2009-05-14T10:19:03.077
> 
> 标签：html, css, forms, skinning

使用 css 样式化表单元素可能会出现问题，因为每个浏览器都以不同的方式呈现标签（就像 safari 呈现复选框时一样）。

好吧，让我们暂时忽略 safari，皮肤输入和按钮相当容易，但如何完全皮肤选择、复选框、单选等。

请参阅此页面：
[复选框皮肤](http://dev.wemakesites.net/Check_Box_XML/)
[选择皮肤](http://dev.wemakesites.net/Select_Box_Replacement_JS/)
[单选皮肤](http://acidmartin.wemakesites.net/Demos/RadioButton.XML5.0/index.html)

听说一些JS框架比如EXTJS或者MooTools可以做到，但是我不想要一个大规模的框架解决方案，只需要独立的JS，我们可以随意修改皮肤，请不要使用JQuery解决方案，因为我不'不要使用它。

在不使用某些特定框架的情况下这样做有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-14T10:31:47.070

如果您想要完全控制，那么您通常必须完全替换浏览器控件并用其他元素、样式表和脚本来伪造它们。

如果您不想使用框架，那么它基本上可以归结为 DIY。

也就是说，整个概念有几个问题。

1.  试图让控件按照用户期望的方式运行（给定来自单击、双击、三次单击、右键单击、拖动、箭头键、控制键等的输入）是**很难**的。
2.  控件可能看起来不像用户期望的那样。

就个人而言，我通常会尝试让表单控件坚持系统默认值，而不是试图偏离它们。给用户他们期望的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-16T23:10:07.573

今天有相当多的 javascript 解决方案允许对表单元素样式进行广泛的自定义。一个快速的谷歌想出了一些不错的：

*   也许最著名的是*Bootstrap* CSS 框架：
    [https ://getbootstrap.com/docs/4.0/components/forms](https://getbootstrap.com/docs/4.0/components/forms)

*   [https://www.psd2html.com/js-custom-forms（jQuery](https://www.psd2html.com/js-custom-forms)插件）

*   [https://purecss.io/forms](https://purecss.io/forms)

*   [https://github.com/select2/select2](https://github.com/select2/select2)

*   [https://github.com/harvesthq/chosen](https://github.com/harvesthq/chosen)

*   复选框/收音机：

    *   [https://codepen.io/vsync/pen/aBOOZB](https://www.google.rs/search?q=codepen%20aBOOZB)
    *   [https://codepen.io/vsync/pen/wKkuz](https://www.google.rs/search?q=codepen%20wKkuz)
    *   [https://codepen.io/manabox/pen/raQmpL](https://www.google.rs/search?q=codepen%20raQmpL)

[今天你可以在Codepen.com](http://codepen.com)上找到多种表单元素样式

* * *

## 旧答案（从*09 年 5 月 16 日*开始）：

> 是的，这很容易。
> 
> 您可以使用 niceforms，它是
> 用于制作漂亮表单的独立脚本，然后您可以根据需要修改
> 图形图像/CSS。
> 
> 这个想法是，用相同的功能编写看起来相同
> 但设计不同的东西，然后
> 你需要用一些 javascript 魔法“赋予它生命”:)
> 
> 然后，您必须在整个地方都有 ilsteners，以
> 检查用户单击的内容，而不是您需要将相同的值反映到与“假”对应
> 的预隐藏表单元素中 。
> 意思是操纵它。
> 然后当您发送表单时，正确的值是通过 JS 放置的。

# sql - 查询具有一定特征的连续行

> ID：862594
> 
> 赞同：1
> 
> 时间：2009-05-14T10:20:51.293
> 
> 标签：sql, mysql

我有一个包含以下列的表格：

```
id int(10)
user int(10)
winner int(10)
profit double
created datetime 
```

获胜者列可以是 0 或 1。我想创建一个查询，返回按创建的日期时间列排序的连续获胜者的最大数量以及第一个和最后一个创建日期以及利润列的总和从那段连续获胜者开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T11:46:43.523

我还没有测试过，但也许这会奏效。

```
 select first_winner.created, last_winner.created, sum(mid_winner.profit)
          from T first_winner
     join T last_winner
          on first_winner.created <= last_winner.created
          and first_winner.winner = 1
          and last_winner.winner = 1
          and not exists -- no losers in between first_winner and last_winner
          (
           select * from T loser
           where loser.winner = 0
            and first_winner.created <= loser.created 
                                    and loser.created <= last_winner.created
          )
     join T mid_winner
          on first_winner.created <= mid_winner.created
                                 and mid_winner.created <= last_winner.created
          and mid_winner.winner = 1
     left join T bef_first_winner  -- winner before first winner with no losers in between
          on bef_first_winner.winner = 1
          and bef_first_winner.created < first_winner.created
          and not exists
          ( 
           select * from T b_loser
           where b_loser.winner = 0
            and bef_first_winner.created <= b_loser.created 
               and b_loser.created <= first_winner.created
          )
     left join T after_last_winner -- winner after last winner with no losers in between
          on after_last_winner.winner = 1
          and last_winner.created < after_last_winner.created
          and not exists
          ( 
           select * from T a_loser
           where a_loser.winner = 0
            and last_winner.created <= a_loser.created 
               and a_loser.created <= after_last_winner.created
          )
    where bef_first_winner.id is null
        and after_last_winner.id is null
   group by first_winner.created, last_winner.created 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T16:23:30.737

这是一个可能的解决方案，查看每个用户 ID 的连胜记录。

```
select head.userid, head.id, sum(profit), count(*)
from #bingo b
inner join (
    select cur.userid, cur.id
    from #bingo cur
    left join #bingo prev 
        on cur.userid = prev.userid
        and prev.id < cur.id
        and not exists(
            select * 
            from #bingo inbetween 
            where prev.userid = inbetween.userid 
            and prev.id < inbetween.id 
            and inbetween.id < cur.id)
    where cur.winner = 1
    and IsNull(prev.winner,0) = 0
) head
    on head.userid = b.userid 
    and head.id <= b.id 
```

```

```
left join (
    select cur.userid, cur.id
    from #bingo cur
    left join #bingo prev 
        on cur.userid = prev.userid
        and prev.id < cur.id
        and not exists(
            select * 
            from #bingo inbetween 
            where prev.userid = inbetween.userid 
            and prev.id < inbetween.id 
            and inbetween.id < cur.id)
    where cur.winner = 1
    and IsNull(prev.winner,0) = 0
) nexthead 
    on nexthead.userid = b.userid 
    and head.id < nexthead.id 
    and nexthead.id <= b.id
where nexthead.id is null 
and b.winner = 1
group by head.userid, head.id 
```

这两个“头”子查询是相同的，您可以将它们放在支持它们的视图或 WITH 中。“heads”子查询搜索连胜的每个头；也就是说，第一场胜利或先于失败的胜利。我假设您的 id 会随着时间的推移而增加，所以我没有使用 Created 列。

下面的查询为每一行搜索相应的头部。头的 id 必须小于或等于当前行的 id，并且两者之间不得有其他头。

之后，只需简单地分组，将利润相加并计算行数。

        testing - 开源自动化测试工具和框架是否比商业产品更好？

ID：862599

赞同：2

时间：2009-05-14T10:22:33.707

标签：testing, automation, automated-tests, watin

大约三年前，我从使用商业测试工具转向使用开源测试框架 (WatiN)，以及我自己开发的 UI 自动化框架。

由于这样做，我认为使用这些库和 Visual Studio 的生活要比使用自己的语言或 VBA 的昂贵的专用测试工具好得多。

开源自动化测试工具和框架是否优于商业产品

还是 WinRunner、QuickTest Pro、Testpartner 等昂贵的商业自动化测试工具……还有前途吗？

            回答 #1

赞同：6

时间：2009-05-14T10:44:05.187

很难对像“测试工具”这样的通用类别做出这种判断。通常，最好根据具体情况评估商业解决方案和开源解决方案。从您问题的措辞看来，您似乎发现开源解决方案更适合您的需求。

但是，您可以在决策过程中使用一些要点：

**商业工具的好处：**

*   支持——通常，公司付钱给人们支持产品。此外，许多商业公司为不同级别的支持提供支持合同。如果您在紧要关头需要支持，商业支持是您的最佳选择。

**开源工具的好处**

*   价格 - 很明显......很难与免费竞争
*   开放性——开源项目比商业产品更容易适应开放标准（许多商业产品也适应开放标准，但开源软件往往更频繁地这样做）。
*   自我支持 - 如果您的公司允许，您可以自己修复在工具中发现的错误。无需等待第三方来解决它们。

还值得一提的是，许多商业测试工具都是建立在它们的开源对应物之上的。如果是这种情况，那么您最好使用开源版本，除非您需要额外的支持。

我想您会发现商业产品和开源产品往往具有相似的功能集。在其他情况下，他们可能会使用完全不同的方法来解决问题。同样，您可能希望对每个案例进行评估。

            回答 #2

赞同：1

时间：2012-02-02T06:57:08.520

PyWinAuto 是一个伟大的开源工具，用于自动化胖客户端或基于 Windows 的独立应用程序。

            回答 #3

赞同：0

时间：2009-05-14T11:38:28.190

我得到了经验，开发人员的工具是开源中采用的第一类也是最好的软件。因此，您可以在 OS 中看到大量出色的测试工具。因此，我认为在大多数常见环境中，您在操作系统中都有运行良好的测试框架。但我并不是在所有环境中都编码，所以也许你想说你使用哪种语言/技术，我们可以提一些好的工具（操作系统或商业）。

            回答 #4

赞同：0

时间：2009-05-22T08:48:41.857

所有商业工具都有一些+s和-s。并非所有这些都可以被视为完全适合 AUT 所需的自动化环境。我曾与所有知名人士合作过，这一切都取决于自动化工程师他/她对概念的理解程度并充分利用该工具。过去 5 年我得出的结论是，现在是我们脱离这些商业工具并追求开源的时候了，为什么？我可以根据自己的需要自定义开源。我知道哪里出了问题，同时知道如何解决它。我可以根据需要从计划到执行再到报告进行定制，作为自动化工程师，我们可以控制报告，因此创造力在实现组织和受自动化测试影响的个人的需求方面发挥着作用。

        asp.net - 将 DateTime 数据转换为数据集中的字符串

ID：862601

赞同：1

时间：2009-05-14T10:23:04.877

标签：asp.net, c#-2.0, dataset

我有一个将日期存储在 DataColumn 中的数据集（该列的数据类型是 DateTime）。我需要将格式从 DateTime 更改为字符串，以便根据我当前的文化为我提供日期。

对于单个 DateTime 变量，我可以使用重载的 ToString() 通过以下方式实现此目的：

```
DateTime.Now.ToString(System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern) 
```

但我需要将 DataSet 中所有行的数据转换为字符串。有谁知道我如何实现这一目标？

谢谢。

            回答 #1

赞同：5

时间：2009-05-14T11:04:28.490

当您获得数据集时：

*   找到合适的数据表
*   添加新的数据列
*   在一个循环中，您使用 (your DateTime).ToString() 填充新列

            回答 #2

赞同：1

时间：2009-05-14T10:26:50.297

1.  获取数据集。
2.  将每一行转换为字符串并将其放入新数据集中（连同其余数据）。

            回答 #3

赞同：0

时间：2009-05-14T10:29:33.940

我认为在表格填满后无法更改列类型。我认为您应该在数据集上创建第二个表，并复制您在此过程中转换日期所需的信息。

            回答 #4

赞同：0

时间：2009-05-14T10:52:49.563

新答案:)

我一直在谷歌上搜索这个网站：[Linq to Dataset](http://davidhayden.com/blog/dave/archive/2007/12/06/LINQToDataSetReallyCoolMakesDataSetDataTableMoreUsefulDemos.aspx)

该示例显示了如何在数据集上使用 linq，我猜您可以使用查询来执行数据转换并将其放在新的数据表上。不确定它是否会比循环更好

            回答 #5

赞同：0

时间：2009-05-14T11:05:02.483

如果我是你，我会按原样保留 DataTable 中的数据。毕竟，有意义的数据会在转换后失去意义。我只会在显示/渲染数据时进行任何所需的修改，因为这隐含地需要将数据转换为字符串（带有可选格式）。

Any DateTime variable can be rendered as a string (with culture-sensitive formatting) using the simple code:

```
DateTime.Now.ToShortDateString();
// Or
DateTime.Now.ToString("d"); 
```

This function already uses formatting information derived from the current culture.

I really would suggest that you take another look at your scenario to evaluate if you really need to change the datatype of data in the dataset itself. (or provide us with more information)

        php - 用 PHP 生成报告（需要格式 pdf、xls、doc、csv）

ID：862607

赞同：3

时间：2009-05-14T10:25:06.447

标签：php, zend-framework, zend-pdf

我需要在我的 PHP 网站中生成报告（在 zend 框架中）

所需格式：

```
PDF (with tables & images) // presently using Zend_Pdf
XLS (with tables & images)
DOC (with tables & images)
CSV (only tables) 
```

请推荐用于在 PHP 中生成报告的强大而快速的解决方案。

平台：*LAMP 上的 Zend 框架*

**我知道创建此类报告有一些棘手的解决方案，我想知道是否有任何可以与 LAMP 环境一起使用的开源报告生成实用程序**

            回答 #1

赞同：9

时间：2009-05-18T11:30:15.720

Excel：[http ://www.phpexcel.net](http://www.phpexcel.net) 

            回答 #2

赞同：3

时间：2009-05-22T17:57:37.913

在我的基于 LAMP 的应用程序中，我成功地将生成报告的能力与 JasperReports 集成在一起。

为此，我使用 PHP/Java Bridge 与 Jasper java 类进行通信。您可能想尝试 Zend Server，因为它在安装时提供了这个组件。

查看此博客，这是我最终解决方案的灵感来源：[http ://www.rjohnson.id.au/wordpress/2007/10/27/bullet-proof-jasper-reports-and-php/](http://www.rjohnson.id.au/wordpress/2007/10/27/bullet-proof-jasper-reports-and-php/)

            回答 #3

赞同：1

时间：2009-05-14T13:12:14.237

我假设您的意思是 CSV 而不是 CVS。对于 excel 和 csv 文件，您可以使用  

```
header("Content-Type: text/comma-seperated-values");
header("Content-Disposition: inline; filename=\"file.csv";"); 
```

和

```
header("Content-Type: application/vnd.ms-excel");
header("Content-Disposition: inline; filename=\"file.xls";") 
```

分别。确保关闭所有格式设置并仅输出 CSV 格式的值和逗号，对于 XLS 格式，您可以使用常规的 html 表格。

        asp.net - 如何使用 httpWebRequest 和 httpWebResponse 将 XML 文件或数据发布到 URL？

ID：862612

赞同：1

时间：2009-05-14T10:26:16.070

标签：asp.net

我需要使用 ASP.NET将我将从数据库中获取的 XML 数据发布到一个 URL，如 ...   [http://www.rentals.com/aspx ...](http://www.rentals.com/aspx)

            回答 #1

赞同：5

时间：2009-05-14T11:57:17.817

你可以写一个这样的函数：

```
 private string SendRequest(Uri UriObj, string data)
    {
        string _result;

        var request = (HttpWebRequest) WebRequest.Create(UriObj);
        request.Method = "POST";
        request.ContentType = "text/xml";
        var writer = new StreamWriter(request.GetRequestStream());
        writer.Write(data);
        writer.Close();

        var response = (HttpWebResponse) request.GetResponse();

        var streamResponse = response.GetResponseStream();
        var streamRead = new StreamReader(streamResponse);

        _result = streamRead.ReadToEnd().Trim();
        streamRead.Close();
        streamResponse.Close();
        response.Close();
        return _result;
    } 
```

字符串数据可以是像`"<xmla><..></..></xmla>"`.aspx页面上的XML来获取数据，您需要使用`Request.InputStream`并将流读入字符串，XML等......

        mysql - 导入维基百科数据库转储 - 杀死navicat - 任何人有任何想法？

ID：862613

赞同：1

时间：2009-05-14T10:26:38.533

标签：mysql, database, large-files, wikipedia

好的，伙计们，我已经下载了 wikipedia xml 转储及其高达 12 GB 的数据：\ 对于一个表，我想将它导入到我的本地主机上的 mysql 数据库中 - 但是它是一个 12GB 的巨大文件，显然 navicats 正在度过它的甜蜜时光导入它或者它更有可能被绞死:(。

有没有办法包括这个转储或至少部分你知道一点点。

让我更正一下它的 21 GB 数据 - 并不是说​​它有帮助：\ - 有没有人知道将这样的巨大文件导入 MySQL 数据库。

            回答 #1

赞同：2

时间：2009-05-14T13:13:40.083

改用命令行，navicat 不适合导入大文件，而且可能比使用 CLI 花费 20 倍的时间。

            回答 #2

赞同：1

时间：2009-05-14T10:45:43.420

看看[Sax 解析器](http://en.wikipedia.org/wiki/Simple_API_for_XML)，它允许您逐段读取语料库，而不是将整个 12gb 读取到内存中。不过，我不太确定您将如何将其与 mysql 接口。

            回答 #3

赞同：0

时间：2014-08-28T00:53:08.997

这是一个很老的问题，FWIW .. 用新的答案刷新。我也遇到过同样的问题，一个庞大的 sql 文件运行几个小时可能会有风险，遇到任何问题基本上意味着你要重新开始。我做了什么来降低风险并通过 CLI 获得一些性能。

1.  将庞大的 SQL 文件拆分为更小更易于管理的块，例如将“enwiki-20140811-page.sql”拆分为大约 75MB 大小的文件。

    ```
    split -l 75 enwiki-20140811-page.sql split_ 
    ```

    将产生相当数量的文件名中以“split_”为前缀的文件。

2.  遍历这个文件列表并一次导入一个......一个简单的shell脚本。

    ```
    for f in $FILES
    do
      echo "Processing $f file..."
      mysql -h $HOST -u $USER -p$PSWD $DB < $f
    done 
    ```

如果由于某种原因而中断，您可以轻松地从中断的地方继续。  

通过行数拆分 SQL 文件可防止破坏任何大型 INSERT 语句。但是，如果您将行数降得太低，您可以在 SQL 的开头拆分 DROP 和 CREATE 语句。这很容易通过打开前几个拆分文件并解决来解决。

        java - 如何使用多个 bean 配置文件配置 Spring BeanFactory？

ID：862629

赞同：3

时间：2009-05-14T10:34:30.187

标签：java, spring

我确信上述问题有一个简单的答案，但我无法轻易找到它（无论是在文档中还是在 stackoverflow.com 上）

我得到了一个 BeanFactory/ApplicatioContext 可以用几个 bean 配置文件初始化的概念。是这样吗？而且，如果是怎么办？

            回答 #1

赞同：4

时间：2009-05-14T10:55:30.353

马克的回答很好。您可能还想试试这个：

```
ApplicationContext context = new ClassPathXmlApplicationContext( new String[]{  
                               "services.xml", 
                               "daos.xml", 
                               "webservices.xml", 
                               "validators.xml"
                             }); 
```

            回答 #2

赞同：2

时间：2009-05-14T10:48:29.903

请参阅Spring 参考文档中的[第 3.2.2.1 节。](http://static.springframework.org/spring/docs/2.5.x/reference/beans.html#beans-factory-instantiation)这描述了如何将配置文件拆分为单独的配置文件，然后可以将其导入到主配置文件中。

            回答 #3

赞同：1

时间：2009-05-14T10:56:06.810

如果您使用 XML 配置文件，您可以从类路径中导入多个文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans>
  <import resource="classpath:/path/to/file/one.xml" />
  <import resource="classpath:/path/to/file/two.xml" />
</beans> 
```

            回答 #4

赞同：0

时间：2009-05-14T11:02:05.517

在阅读上述答案时，我发现了以下类及其相关构造函数：

[FileSystemXmlApplicationContext](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/support/FileSystemXmlApplicationContext.html#FileSystemXmlApplicationContext%28java.lang.String%5B%5D,%20boolean,%20org.springframework.context.ApplicationContext%29)

```
public FileSystemXmlApplicationContext(String[] configLocations,
                                       boolean refresh,
                                       ApplicationContext parent)
                                throws BeansException 
```

        java - java中的忙等待线程

ID：862637

赞同：2

时间：2009-05-14T10:37:08.727

标签：java, multithreading

我有一个线程分配，我不能让线程进入忙等待状态。我如何知道一个线程是处于阻塞状态还是处于忙等待状态？有没有检查它的命令？

在程序中，我有 2 个矩阵，我需要对它们进行转换。所以我有一个转换线程，代码如下：

```
transformThread transformThreadFirst = new transformThread(firstMat, n);
transformThread transformThreadSecond = new transformThread(secondMat, n);

transformThreadFirst.start();
transformThreadSecond.start();

try
{
    transformThreadFirst.join();
    transformThreadSecond.join();
}
catch(InterruptedException e)
{
} 
```

任何线程都将处于忙碌等待状态，或者可以吗？或者你有更好的解决方案？同样在transformThread的运行中，我不使用任何yield，只使用2个for循环，仅此而已，只是transform动作..

            回答 #1

赞同：8

时间：2009-05-14T10:47:31.013

[忙等待](http://en.wikipedia.org/wiki/Busy_waiting)是重复做某事，直到另一个操作完成。像这样的东西：

```
// The next line will be called many many times
// before the other thread finishes
while (otherThread.getState() == Thread.State.RUNNABLE) {} 
```

因此，您的代码*不会*忙于等待，当前线程将阻塞直到 transformThreadFirst 完成，然后阻塞直到 transformThreadSecond 完成。

            回答 #2

赞同：1

时间：2009-05-14T10:44:35.840

有一个 jstack 实用程序。将其用作`jstack <pid>`，传递正在运行的 jvm 的进程 ID。它将显示该应用程序中的每个线程正在执行的操作，以及线程状态（RUNNING、WAITING、BLOCKED）。

它与 JDK 捆绑在一起，位于其 bin/

        apache-flex - 将图标添加到 Flex 颜色选择器

ID：862645

赞同：0

时间：2009-05-14T10:39:53.340

标签：apache-flex, components, color-picker

我想向颜色选择器组件添加一个图标，其值为 no color (a blank rectangle) 。有办法吗？

谢谢

            回答 #1

赞同：0

时间：2009-05-14T14:30:42.490

你可以制作任何你想要的图像作为图标。

鼠标右键 src 映射 - 新建 - CSS 文件以在您的源映射或您想要的位置创建一个新的 CSS 文件。

双击 CSS 文件并进入设计模式。舞台上的鼠标右键或按内容字段顶部的 +style 按钮。

选择您的组件（颜色选择器） - 更改右栏中的颜色，如果您仍然无法获得所需的颜色，请按右栏中的皮肤按钮并从列表中选择“图像文件”并插入您的图像。

简而言之： - 制作您想要的图像 - 制作 css 文件 - 将 css 添加到颜色选择器组件 - 从右侧菜单中选择皮肤 - 从列表中选择图像文件 - 插入您制作的图像

ow 并且不要忘记在应用程序中添加您的 css 文件。

        java - Java中的软引用LinkedHashMap？

ID：862648

赞同：4

时间：2009-05-14T10:41:12.447

标签：java, linkedhashmap, soft-references

Java 中有基于软引用的 LinkedHashMap 吗？如果没有，有没有人有我可以重用的代码片段？我保证会正确引用它。

谢谢。

            回答 #1

赞同：6

时间：2009-05-14T12:03:15.870

WeakHashMap 不保留插入顺序。因此，它不能被视为 LinkedHashMap 的直接替代品。此外，仅当不再可访问该**键**时才释放映射条目。这可能不是您想要的。

如果您正在寻找的是内存友好的缓存，那么您可以使用这里的简单实现。

```
package be.citobi.oneshot;

import java.lang.ref.SoftReference;
import java.util.LinkedHashMap;

public class SoftLinkedCache<K, V>
{
    private static final long serialVersionUID = -4585400640420886743L;

    private final LinkedHashMap<K, SoftReference<V>> map;

    public SoftLinkedCache(final int cacheSize)
    {
        if (cacheSize < 1)
            throw new IllegalArgumentException("cache size must be greater than 0");

        map = new LinkedHashMap<K, SoftReference<V>>()
        {
            private static final long serialVersionUID = 5857390063785416719L;

            @Override
            protected boolean removeEldestEntry(java.util.Map.Entry<K, SoftReference<V>> eldest)
            {
                return size() > cacheSize;
            }
        };
    }

    public synchronized V put(K key, V value)
    {
        SoftReference<V> previousValueReference = map.put(key, new SoftReference<V>(value));
        return previousValueReference != null ? previousValueReference.get() : null;
    }

    public synchronized V get(K key)
    {
        SoftReference<V> valueReference = map.get(key);
        return valueReference != null ? valueReference.get() : null;
    }
} 
```

            回答 #2

赞同：3

时间：2009-05-14T10:45:41.953

我见过的最好的想法是包装`LinkedHashMap`，这样你`put`进入它的所有东西都是一个[WeakReference](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/ref/WeakReference.html)。

更新：刚刚浏览了它的来源`WeakHashMap`和它处理一切的方式，`WeakReference`同时仍然可以很好地使用泛型是可靠的。这是它使用的核心类签名：

```
private static class Entry<K,V> extends WeakReference<Object> implements Map.Entry<K,V> 
```

我建议更深入地浏览[源代码以获取其他实现想法。](http://www.docjar.org/html/api/java/util/WeakHashMap.java.html)

更新 2：kdgregory 在他的评论中提出了一个很好的观点——我的所有建议都是确保 中的引用`Map`不会阻止所指对象被垃圾收集。您仍然需要手动清除死引用。

            回答 #3

赞同：2

时间：2009-05-14T13:43:10.497

看看[这篇文章](http://www.javaspecialists.eu/archive/Issue098.html)。它展示了如何实现 SoftHashMap...

        javascript - 访问 Json 中的嵌套对象

ID：862651

赞同：0

时间：2009-05-14T10:42:35.830

标签：javascript, jquery, json

我有一个自定义对象，其中包含其他项目（即数组、字符串、其他类型的对象）。

我不确定如何遍历对象以迭代并列出嵌套项的所有对象类型、键和值。

其次，我不知道有多少嵌套级别（因为对象是从后端动态生成的，并作为一个对象传递给我）。

有什么想法（我应该只使用 javascript/jQuery 还是两者都可以最有效地做到这一点）？

谢谢，我会给代码一个去。我正在从 web 服务中检索结果集，该结果集每次返回一组不同的列（不同数据类型）和行。我不知道列的名称，这就是为什么我想尽我所能获取数据的原因。

根据数据类型，我将执行不同的操作（合计金额、格式化等）。

            回答 #1

赞同：2

时间：2009-05-14T10:59:30.890

JSON序列化的对象包含一个层次结构，没有任何引用循环，所以它应该是相当简单的遍历，比如

```
function visit(JSONobj, f)
{ 
   for (var key in JSONobj)
   {
       var value = JSONobj[key];
       f(key,value);
       if (value instanceof Object)
           visit(value, f);
   }
} 
```

其中 f 是一个对键和值执行某些操作的函数。（当然，您可以直接编写一个函数来执行此操作）。

您到底想在对象中找到什么？

        python - Python 中无值变量的指针

ID：862652

赞同：0

时间：2009-05-14T10:42:40.773

标签：python, reference

我有一种方法可以在树中创建一个新节点 - 左或右。如果该值低于我当前的值，则将其插入左侧，否则插入右侧。

我想重构这段代码，以便我首先看到我必须在哪一侧插入我的元素，然后再插入它。在我两次实施之前：一次用于左侧，一次用于右侧。

它目前看起来像这样：

```
def neu(self, sortByValue, secondValue):
    child = self.left if(sortByValue.lower() < self.value[0].lower()) else self.right

    if(child == None):
        child = MyTree(sortByValue,secondValue)
    else: child.neu(sortByValue,secondValue) 
```

不过，我的问题是，self.left 是 None，self.right 是 None。因此，当我将 child 创建为变量并将其设置为 MyTree(...) 时，self.left 和 self.right 没有接收到该值。

我能做些什么来改善这一点吗？谢谢！

            回答 #1

赞同：2

时间：2009-05-14T10:59:14.087

在 Python 中，变量是名称而不是位置。例如：

```
>>> a = 1
>>> b = a
>>> a = 2
>>> print b
1 
```

在您的代码中，您只需将名称重新绑定`child`到不同的值（您的新节点），这对先前绑定的值（无）没有影响。

这是您的代码的修改，应该可以做您想做的事情（未经测试）：

```
def neu(self, sortByValue, secondValue):
    def child(node):
        if(node is None):
            return MyTree(sortByValue, secondValue)
        else:
            child.neu(sortByValue, secondValue)
            return node

    if(sortByValue.lower() < self.value[0].lower()):
        self.left = child(self.left)
    else:
        self.right = child(self.right) 
```

            回答 #2

赞同：0

时间：2009-05-14T11:01:27.093

你好;-)

`self.left`或者`self.right`不接收该值，因为您分配给`child`它的只是保存目标值的副本而没有对其的引用。

你想要一个指针——这在 Python 中并不直接存在。

您可以使用类包装器来表达这一点，但我认为当您只在 if 子句中编写这两种可能性时，它会更容易理解。

            回答 #3

赞同：0

时间：2009-05-14T11:04:23.420

你为什么用树？

我会使用字典：

初始化：

树 = {}

添加新节点：

树[sortByValue] = secondValue

提取东西

打印树[sortByValue]

不是直接的答案，而是一种更 Pythonic 的方式

        scripting - 如何正确扩展 3Ds Max 材质

ID：862660

赞同：0

时间：2009-05-14T10:44:52.593

标签：scripting, 3dsmax, maxscript, 3ds

基本上，我只是想在 3Ds Max 9 中为“标准”材质添加更多属性。我实际上已经通过 max 脚本实现了这一点，但它破坏了我们的导出器。

导出器适用于任何使用普通“标准”材质蒙皮的东西，但扩展版本似乎对导出器隐藏了基类的属性。

我到目前为止是这样的：

```
 plugin material Standard_WithOutlines
name:"Standard & Outlines"
classID:#(0x73212413, 0x1ca9e3e6)
extends:Standard replaceUI:false version:1
(
    parameters shaderParameters
    (
        diffuse type:#color
        glossiness type:#float
        specular type:#color
        specularLevel type:#float
        selfIllumColor type:#color
        selfIllumAmount type:#float
        opacity type:#float

        on diffuse get val do delegate.diffuse
        on glossiness get val do delegate.glossiness / 100.0
        on specular get val do delegate.specular
        on specularLevel get val do delegate.specularLevel
        on selfIllumColor get val do delegate.selfIllumColor
        on selfIllumAmount get val do delegate.selfIllumAmount
        on opacity get val do delegate.opacity / 100.0

        on diffuse set val do delegate.diffuse = val
        on glossiness set val do delegate.glossiness = val * 100.0
        on specular set val do delegate.specular = val
        on specularLevel set val do delegate.specularLevel = val
        on selfIllumColor set val do delegate.selfIllumColor = val
        on selfIllumAmount set val do delegate.selfIllumAmount = val
        on opacity set val do delegate.opacity = val * 100.0
    )

    parameters MainParams rollout:ExtendedMatRollout
    (
        ShowOutlining type:#boolean animatable:false default:false ui:outline_Enabled
        OutlineColour type:#color animatable:false default:(color 0 0 0) ui:outline_Colour
        OutlineThickness type:#float animatable:false default:5 ui:outline_Thickness
    )

    rollout ExtendedMatRollout "Extended Parameters"
    (
        groupBox outlinegrp "Outlining" pos:[8,0] width:312 height:62
        checkbox outline_Enabled "Enabled" pos:[18,16] width:128 height:16
        colorPicker outline_Colour "Colour:" pos:[160,34] width:56 height:20 enabled:ShowOutlining
        spinner outline_Thickness "Thickness:" pos:[50,36] width:80 height:16 enabled:ShowOutlining range:[0,100,0]
        on outline_Enabled changed state do
        (
            outline_Colour.enabled = state
            outline_Thickness.enabled = state
        )

    )
)
```

通过自己声明变量，导出器可以读取它们，但这实际上并没有链接到 UI 设置的值。为了解决这个问题，我使用了“on XXX get/set”事件来链接到隐藏的项目。所以这些现在可以正常工作，但是诸如漫反射和镜面反射之类的材质贴图不起作用（这是对事物进行纹理化的唯一方法 AFAIK）。

我应该如何将这两个设置添加到材质类型中，以便它也导出“委托”类中的所有数据（要求基本继承太多了）？

谢谢

            回答 #1

赞同：0

时间：2010-10-25T08:43:07.873

这是一个基本的扩展着色器。我认为您遇到的问题是未为参数指定您的推出。如果它没有被定义，那么你就找不到，如果它找不到它们，那么出口商就会得到所有的错误。

```
plugin material Matte name:"Matte" classID:#(0x61108483, 0x4d218a72) extends:Standard replaceUI:true version:1
( 
    parameters main rollout:params
    (
        kdColor type:#color default:[90,90,90] ui:mkdColor
        on kdColor set val do delegate.diffuse_color = val
    )

    rollout params "Matte Parameters"
    (
        -- Basic matte parameters
        group "Basic Parameters" (
            colorpicker mkdColor "Diffuse: " across:2
        )

    )
) 
```

            回答 #2

赞同：0

时间：2009-11-26T12:53:31.760

两种可能：

1.  您的出口商是否列举了所有的参数块？我想你在脚本中的参数最终会出现在一个额外的 pblock 中。如果您的出口商只是查看 pblock 0 这可能是您的问题。

2.  在脚本和委托中参数具有相同名称的情况下，我之前没有见过这种用法。我认为您通常应该在脚本中创建新参数并使用不同的名称适当地分配给委托参数。至少，我是这样做的。

        sql - 查询的 SQL 帮助 - Group By 和 Aggregate 函数

ID：862662

赞同：0

时间：2009-05-14T10:45:14.137

标签：sql, sql-server

我有一个需要帮助的查询，已经查看了一些教程，但我发现没有涵盖这个问题。

我有三个连接表，Products、ProductImagesLookUp 和 Images。

一个产品可以有任意数量的图像，并且一个产品的图像顺序存储在 ProductImagesLookUp 中。

我需要返回一个产品列表及其主图像（订单价值最低的那个）。

列表看起来像这样

```
Product
Images
LookUpId FileID Order    ProductTitle               Price   ProductId 
65       2     1    Amari Summer Party Dress    29.99      7
66       1     2    Amari Summer Party Dress    29.99      7
67       3     3    Amari Summer Party Dress    29.99      7
74       4     5    Beach Cover Up                  18.00     14
75       5     4    Beach Cover Up                  18.00     14
76       7     6    Beach Cover Up                  18.00     14
77       8     7    Beach Cover Up                  18.00     14
78       9     8    Beach Cover Up                  18.00     14
79       10    9    Amari Classic Party Dress   29.95     15
80       11    11   Amari Classic Party Dress   29.95     15
81       12    10   Amari Classic Party Dress   29.95     15 
```

我希望我的查询拉回具有最低订单值的不同产品的列表。即它应该拉回 ProductImagesLookUpId 为 65（产品 7）、74（产品 14）和 79（产品 15）的行。

在此先感谢您的帮助。这个真的让我把头发拉了出来！

            回答 #1

赞同：1

时间：2009-05-14T10:54:37.390

```
SELECT
  l.LookupId,
  i.FileId,
  l.[Order],  
  p.ProductTitle,
  p.Price,
  p.ProductId 
FROM
  Products p
  INNER JOIN ProductImagesLookUp l ON l.ProductId = p.ProductId
  INNER JOIN Images i ON i.FileId = l.FileId
WHERE
  i.[Order] = (
    SELECT MIN([Order]) 
    FROM ProductImagesLookUp 
    WHERE ProductId = p.ProductId
  ) 
```

无需分组或聚合任何内容，因为子查询确保任何给定`ProductId`的结果行不超过一个 - 具有最低的结果行`Order`。

        wpf - 将带有图标的 WPF TreeView 的选择限制为仅文本

ID：862663

赞同：0

时间：2009-05-14T10:45:17.913

标签：wpf, treeview, templates, icons

我有一个带有图标的简单 WPF TreeView

```
<TreeView Name="TreeViewThings" ItemsSource="{Binding}">
    <TreeView.Resources>
        <HierarchicalDataTemplate DataType="{x:Type local:Thing}"
                                  ItemsSource="{Binding Children}">
            <StackPanel Orientation="Horizontal" Margin="2">
                <Image Source="Thing.png" Width="16" 
                       Height="16"
                       SnapsToDevicePixels="True"/>
                <TextBlock Text="{Binding Path=Name}" Margin="5,0"/>
            </StackPanel>
        </HierarchicalDataTemplate>
    </TreeView.Resources>
</TreeView> 
```

当一个节点被选中时，整个 StackPanel 被选中（图像和文本）。如何将选择限制为纯文本？

            回答 #1

赞同：0

时间：2009-05-14T11:03:21.253

这是我不久前发现的一些东西，当我用谷歌搜索不同的东西时：http:
 [//social.msdn.microsoft.com/forums/en-US/wpf/thread/208805b2-225f-4da3-abd7-0d3dfa92fede/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/208805b2-225f-4da3-abd7-0d3dfa92fede/)

在那个线程中，他们还讨论了重写 TreeView。您可以按照此链接中的说明进行操作：http: [//marlongrech.wordpress.com/2008/03/15/wpf-treeview-root-node/](http://marlongrech.wordpress.com/2008/03/15/wpf-treeview-root-node/)

不过，您不必重写 TreeView 类，只需使用后一个链接中的 xaml 即可。如果您下载源代码，您可以看到如何添加控制模板。

        visual-studio - 如何使用应用程序安装路径创建 Visual Studio 安装项目注册表值？

ID：862667

赞同：4

时间：2009-05-14T10:45:55.447

标签：visual-studio, installation, registry, setup-project

我有一个非常简单的应用程序安装程序，需要向所有文件的 shell 菜单（HKCR*\shell）添加一个操作，我遇到了障碍：如何将应用程序的安装路径插入注册表价值？我已经尝试了我能想到的一切：

*   `[Path]`
*   `[ApplicationFolder]`
*   `[ApplicationPath]`
*   `[InstallPath]`
*   `[InstallRoot]`
*   `[InstallFolder]`
*   `[InstallTarget]`
*   `[TargetPath]`

我什至尝试添加一个我知道在其他地方有效的 ( `[Manufacturer]`) 以确保括号值语法在注册表中确实有效（确实如此）。

任何人都*知道*，或者至少有任何我没有尝试过的想法？

            回答 #1

赞同：9

时间：2009-05-14T11:12:30.610

您正在寻找的是 [TARGETDIR]

        java - .NET CLR 不需要操作系统？

ID：862668

赞同：4

时间：2009-05-14T10:46:16.973

标签：java, .net, linux, mono, kernel

在 Java 世界中，BEA（现在的 Oracle）创建了不需要操作系统的 LiquidVM。同样，还有各种开源项目，包括[SANOS](http://www.jbox.dk/sanos/)、[JNODE OS](http://www.jnode.org/)、[Project Guest VM](http://research.sun.com/projects/dashboard.php?id=185)、[JavaOS](http://en.wikipedia.org/wiki/JavaOS)等。

是否为 .NET 创建了等价物？

            回答 #1

赞同：8

时间：2009-06-03T01:11:47.850

查看[.NET 微框架](http://www.microsoft.com/netmf/about/default.mspx) 

与 Trillian 建议的项目不同，这些项目是创建托管 CLR 操作系统的项目（不是问题所问的。）.NET Micro Framework 是没有操作系统的 .NET CLR。它得到了微软的商业支持，可以使用 Visual Studio 进行开发。

            回答 #2

赞同：6

时间：2009-05-14T11:03:45.683

一些谷歌搜索发现：

*   [Singularity](http://research.microsoft.com/en-us/projects/singularity/)（微软研究项目）
*   [Midori](http://en.wikipedia.org/wiki/Midori_(operating_system))（另一个微软研究项目，旨在替换或集成未来版本的 Windows，尤其是在移动设备上）
*   [SharpOS](http://www.sharpos.org/doku.php)（C# 中的开源 GPL 操作系统）
*   [Cosmos](http://www.gocosmos.org/index.en.aspx)（C# 中的开源 BSD 操作系统）

至于这些系统有多成熟，你必须自己检查;)。

            回答 #3

赞同：3

时间：2009-05-14T10:55:39.527

你见过[宇宙](http://www.gocosmos.org/index.en.aspx)吗？

Cosmos 是一个完全以 CIL 兼容语言实现的操作系统项目。该团队致力于使用 C#，但可以使用任何 .NET 语言。

还可以看看微软研究院的一个项目[Singularity](http://research.microsoft.com/en-us/projects/singularity/)

        c# - ImageGrid 组件或类似的东西

ID：862670

赞同：0

时间：2009-05-14T10:46:34.837

标签：c#, components

我正在用 C# 为在线游戏编写客户端。客户端（游戏）有库存：

[替代文字 http://img232.imageshack.us/img232/5606/inventoryplain.jpg](http://img232.imageshack.us/img232/5606/inventoryplain.jpg)

左边的 42 块和右边的 12 块必须包含“虚拟角色”所包含的“虚拟物品”的图像。

我在每个块的顶部添加了 54 个面板（42 个左侧 + 12 个右侧），其想法是使用 BackGroundImage 属性将图像添加到特定块。

该游戏中的大多数东西都是服务器端的，所以我通过 TCP 客户端接收项目位置和项目。

问题是，如果我收到位置“13”并将该值分配给名为“位置”的整数变量，我无法调用

“面板+位置+ .BackGroundImage =图像

我要么必须找到一种方法来做到这一点，要么移除所有面板并使用一个组件，但我仍然会遇到这个问题。

对此问题的任何帮助将不胜感激！提前致谢。

            回答 #1

赞同：1

时间：2009-05-14T10:54:04.037

将所有面板添加到数组中。

例如：

```
Panel[] panels = { panel0, panel1, ... } 
```

        windows - 在没有传统操作系统的情况下运行 Ruby？

ID：862675

赞同：1

时间：2009-05-14T10:48:08.687

标签：windows, ruby, linux, kernel, bootstrapping

在 Java 世界中，BEA（现在的 Oracle）创建了不需要操作系统的 LiquidVM。同样，还有各种开源项目，包括[SANOS](http://www.jbox.dk/sanos/)、[JNODE OS](http://www.jnode.org/)、[Project Guest VM](http://research.sun.com/projects/dashboard.php?id=185)、[JavaOS](http://en.wikipedia.org/wiki/JavaOS)等。

是否为 Ruby 创建了等价物？

            回答 #1

赞同：3

时间：2009-05-14T11:03:31.927

您可以在 LiquidVM 之上使用 JRuby :)

但除此之外，没有。最小的 linux 设置有什么问题？

        java - 获取 TableCellEditor 颜色以匹配匹配的外观

ID：862677

赞同：2

时间：2009-05-14T10:49:52.707

标签：java, swing, colors, jtable, look-and-feel

所以我有自定义 CellEditors 和 CellRenderers 虽然我正在做

```
component.setForeground(isSelected ? table.getSelectionForeground() : table.getForeground());
component.setBackground(isSelected ? table.getSelectionBackground() : table.getBackground());
component.setOpaque(true); 
```

在我的 getTableCellRendererCompoent 中，颜色仅在每 OTHER 行上匹配，因为我尝试过的大多数外观和感觉似乎都在交替它们。如何以与表格其余部分相匹配的方式提取颜色值？我也非常希望能够制作漂亮的边框以匹配从 DefaultTableCellRenderer 继承的渲染器。

我试图剖析 DefaultTableCellRenderer，但我在试图追踪这个 UI 对象时迷路了。我是否只需要从 UIManager 中提取正确的属性？将不胜感激在正确方向上的领先优势。

谢谢大家，这个网站很震撼。约书亚

            回答 #1

赞同：4

时间：2009-08-14T04:11:48.143

是的，您应该使用 Swing 调色板颜色。例如：

```
final Color tableBackground = javax.swing.UIManager.getDefaults().getColor("Table.background"); 
```

这是表格的颜色键值：

*   Table.background Table.dropLineColor
*   Table.dropLineShortColor
*   Table.focusCellBackground
*   Table.focusCellForeground
*   Table.foreground Table.gridColor
*   Table.selectionBackground
*   Table.selectionForeground
*   Table.sortIconColor
*   TableHeader.background
*   TableHeader.focusCellBackground
*   TableHeader.foreground

或者，您也可以使用[系统颜色](http://java.sun.com/javase/6/docs/api/java/awt/SystemColor.html)。例如：

**正常背景：** `SystemColor.window`

  **选定背景：** `SystemColor.textHighlight`

  **正常前景：** `SystemColor.text`

  **选定前景：** `SystemColor.textText`

        sql - 选择对行进行分组

ID：862678

赞同：2

时间：2009-05-14T10:49:56.717

标签：sql, select, group-by

我有一张这样的桌子：

```
Alternative |Total  |Male  |Female
a           |20     |10    |10
b           |50     |20    |30 
c           |40     |10    |30 
c           |30     |15    |15 
```

现在我想选择所有行和要分组的“c”替代项。

            回答 #1

赞同：3

时间：2009-05-14T10:53:16.193

```
SELECT Alternative, Sum(Total), Sum(Male), Sum(Female) 
FROM table1 
GROUP BY Alternative 
```

            回答 #2

赞同：0

时间：2009-05-14T10:53:49.560

这应该足够了

```
SELECT Alternative, [Total] = SUM(Total), [Male] = SUM(Male), [Female] = SUM(Female)
FROM YourTable
GROUP BY Alternative 
```

            回答 #3

赞同：0

时间：2009-05-14T10:55:10.993

用于`group by`确定分组，然后使用适当的聚合处理其他字段。我相信在这种情况下，您想用来`sum`添加每个组中的值：

```
select
   Alternative, sum(Total) as Total, sum(Male) as Male, sum(Female) as Female
from
   TheTable
group by
   Alternative
order by
   Alternative 
```

            回答 #4

赞同：0

时间：2009-05-14T10:56:27.527

以下查询将选择所有不是“c”的行，然后对所有“c”的行进行分组，将它们的值相加，并添加一个表示“c”和的单行。我希望这就是你的意思。

```
SELECT *
FROM table1 
WHERE Alternative != c

UNION

SELECT Alternative, Sum(Total) as Total, Sum(Male) as Male, Sum(Female) as Female
FROM table1 
WHERE Alternative = c
GROUP BY Alternative 
```

如果您只想对具有多个“替代”外观的任何内容进行分组，只需使用：

```
SELECT Alternative, Sum(Total) as Total, Sum(Male) as Male, Sum(Female) as Female
FROM table1 
GROUP BY Alternative 
```

        .net - .NET 应用程序域和 ASP.NET

ID：862679

赞同：3

时间：2009-05-14T10:50:15.547

标签：.net, asp.net, appdomain

我们都知道 .NET 架构引入了**应用程序域**的概念。ASP.NET 为在 Web 服务器上运行的每个 Web 应用程序创建一个应用程序域。使用*流程查看器*，您将看不到单个 Web 应用程序正在执行的流程，因为没有为它们创建新流程。

如何查看各个 Web 应用程序的统计信息，例如：

*   CPU使用率，   
*   内存使用情况和您通常可以使用进程查看器查看的任何其他统计信息？

            回答 #1

赞同：1

时间：2009-05-14T11:16:49.053

perfmon 很好，但不会告诉您进程与哪些应用程序池相关，如果您运行`c:\windows\system32\cscript.exe c:\windows\system32\iisapp.vbs`它会显示 PID 和应用程序池名称。

        database - PostgreSQL 时间戳字段中的数据损坏

ID：862681

赞同：1

时间：2009-05-14T10:51:42.327

标签：database, postgresql, rdbms

我有一个具有以下架构的 PostgreSQL 表 -

```
CREATE TABLE test (
  id serial NOT NULL PRIMARY KEY,
  username varchar(100) NOT NULL, -- The user name
  dob timestamp with time zone NOT NULL -- The date of birth
); 
```

然后我用这样的数据将一些数据插入到表中 -

```
INSERT INTO "test" ("username", "dob") VALUES (E'Scotty', E'2009-05-14 15:44:43'); 
```

如果我检查数据库中的数据，我会得到这个 -

```
mydb=> select username, dob from test where username='Scotty';
 username |            dob            
----------+---------------------------
 Scotty   | 2009-05-14 15:44:43+05:30
(1 row) 
```

在我尝试插入一些日期为 1946 年之前的数据之前，一切都很好而且很花哨 -

```
INSERT INTO "test" ("username", "dob") VALUES (E'James T Kirk', E'1945-01-01 11:30:11');

mydb=> select username, dob from test where username='James T Kirk';
      username |            dob            
-------------- +---------------------------
 James T Kirk  | 1945-01-01 11:30:11+06:30
(1 row) 
```

看看上面的结果。请注意时区值如何从 +05:30 更改为 +06:30

当我插入 1942 年之前的任何日期时，它实际上会变得更糟 -

```
INSERT INTO "test" ("username", "dob") VALUES (E'Spock', E'1941-01-01 11:30:11');

mydb=> select username, dob from test where username='Spock';
 username |             dob              
----------+------------------------------
 Spock    | 1941-01-01 11:30:11+05:53:20
(1 row) 
```

现在时区值已完全损坏，无法解析日期。

我将不胜感激。

我的时区是亚洲/加尔各答 (GMT+05:30)。

*更新*：我尝试通过像这样明确指定 TZ 来输入数据 -

```
INSERT INTO "test" ("username", "dob") VALUES (E'McCoy', E'1941-01-25 00:20:30+05:30'); 
```

即使那样也没有用。

```
mydb=> select username, dob from test where username='McCoy';
 username |             dob              
----------+------------------------------
 McCoy    | 1941-01-25 00:43:50+05:53:20
(1 row) 
```

            回答 #1

赞同：3

时间：2009-05-14T11:17:17.757

*你*在哪个地区？可能 PostgreSQL 假设日期适用于您当前的语言环境，并应用适当的时区和 DST 规则，如果日期和时间是（比如）UTC，那么这不是正确的做法。

你真的需要时区功能吗？A`timestamp without time zone`将表现出更理智的行为，因为它不必实施奇怪的规则。但是，如果您需要时区，那么您肯定想解决这个问题而不是混淆它。

最好的解决方法是明确指定时区：`'04:05:06-08:00'`对于 GMT–08:00，或者`'04:05:06z'`对于 GMT/UTC/"Zulu"（因此是 'z'）。

*编辑*：大部分真正的怪异来自亚洲/加尔各答时区。来自`tzdata2009g`：

```
# India
# Zone  NAME        GMTOFF  RULES   FORMAT  [UNTIL]
Zone    Asia/Kolkata    5:53:28 -   LMT 1880    # Kolkata
            5:53:20 -   HMT 1941 Oct    # Howrah Mean Time?
            6:30    -   BURT    1942 May 15 # Burma Time
            5:30    -   IST 1942 Sep
            5:30    1:00    IST 1945 Oct 15
            5:30    -   IST 
```

你没有描述你期望的行为是什么，所以很难说你想从这里去哪里。

            回答 #2

赞同：1

时间：2009-05-14T11:06:05.990

这看起来像夏令时问题。（据我所知，时区是 UTC+05.30，DST 设置在 3 月/4 月左右，增加一小时）。

您是否尝试过插入相同的日期并更改年份以排除这种可能性？

对于最后一个，这很奇怪。我没有设法重现它，但这可能是因为半小时区。改变TZ环境变量是不是也一样？

            回答 #3

赞同：0

时间：2009-08-04T08:31:17.340

我有一个类似但不同的问题。我们在 WinXP 上安装了 PostgreSQL8.0。

1.  其中一列是带有 TimeZone 的 TimeStamp 类型。此列的时间值随着系统时区的变化而变化。我们能避免这种情况吗？
2.  每次从表中检索后，每个元组都有半小时到达该列。

我无法追踪这个问题的根源。

rgds nithin

        javascript - 浮动侧边菜单，让它停在底部

ID：862682

赞同：0

时间：2009-05-14T10:52:02.983

标签：javascript, jquery, animation

[示例页面](http://jsbin.com/ujeva)

我有一个在左侧（绿色）构建的浮动菜单，我让它在 200 像素后开始移动。现在我需要停下来，不要越过页脚（蓝色）区域。有什么想法可以让我的 JS 变得更好吗？

这件事是，我无法在滚动事件上检查这一点，因为我滚动后动画正在进行，所以它需要以其他方式完成。

那么如何让动画在页脚之前停止呢？

            回答 #1

赞同：2

时间：2009-05-16T17:53:46.197

在你们的帮助下， 
我已经完美地解决了这个问题（希望如此）
 ，并发布

了一个用于浮动粘性框的 jQuery 插件：

[**http://plugins.jquery.com/project/stickyfloat**](http://plugins.jquery.com/project/stickyfloat)

            回答 #2

赞同：1

时间：2009-05-14T11:41:44.970

```
$.fn.menuFloater = function(options) {
    var opts = $.extend({ startFrom: 0, offsetY: 0, attach: '', duration: 50 }, options);
    // opts.offsetY
    var $obj = this;
    $obj.css({ position: 'absolute' /*, opacity: opts.opacity */ });

    /* get the bottom position of the parent element */
    var parentBottomPoint = $obj.parent().offset().top + $obj.parent().height() ; 
    var topMax = $obj.parent().height() - $obj.innerHeight() + parseInt($obj.parent().css('padding-top')); //get the maximum scrollTop value
    if ( topMax < 0 ) {
        topMax = 0;
    }

    console.log(topMax);

    $(window).scroll(function () { 
        $obj.stop(); // stop all calculations on scroll event
        //  console.log($(document).scrollTop() + " : " + $obj.offset().top);

        /* get to bottom position of the floating element */
        var isAnimated = true;
        var objTop= $obj.offset().top;
        var objBottomPoint = objTop + $obj.outerHeight();

        if ( ( $(document).scrollTop() > opts.startFrom || (objTop - $(document).scrollTop()) > opts.startFrom ) && ( $obj.outerHeight() < $(window).height() ) ){
            var adjust;
            ( $(document).scrollTop() < opts.startFrom ) ? adjust = opts.offsetY : adjust = -opts.startFrom + opts.offsetY;
            // and changed here to take acount the maximum scroll top value
            var newpos = ($(document).scrollTop() + adjust );
            if ( newpos > topMax ) {
                newpos = topMax;
            }
            $obj.animate({ top: newpos }, opts.duration, function(){ isAnimated = false } );
        }
        else {
            $obj.stop();
        }
    });

}; 
```

            回答 #3

赞同：0

时间：2009-05-14T11:09:02.740

在`$(window).scroll`函数中，您是否检查了浮动 div 的底部位置是否小于或等于页脚元素的顶部位置。

        spring - 如何使用 Spring 持久化框架调用 Oracle 函数或存储过程？

ID：862694

赞同：13

时间：2009-05-14T10:54:17.907

标签：spring, oracle, junit

我正在为我的项目使用 Spring 持久性框架。我想从这个框架中调用 oracle 函数或存储过程。

任何人都可以建议我如何实现这一目标。

请给出 * oracle 函数和 * 存储过程的解决方案。

谢谢。

            回答 #1

赞同：34

时间：2009-05-14T11:06:26.223

假设您指的是 JdbcTemplate：

```
jdbcTemplate.execute(
    new CallableStatementCreator() {
        public CallableStatement createCallableStatement(Connection con) throws SQLException{
            CallableStatement cs = con.prepareCall("{call MY_STORED_PROCEDURE(?, ?, ?)}");
            cs.setInt(1, ...); // first argument
            cs.setInt(2, ...); // second argument
            cs.setInt(3, ...); // third argument
            return cs;
        }
    },
    new CallableStatementCallback() {
        public Object doInCallableStatement(CallableStatement cs) throws SQLException{
            cs.execute();
            return null; // Whatever is returned here is returned from the jdbcTemplate.execute method
        }
    }
); 
```

调用函数几乎相同：

```
jdbcTemplate.execute(
    new CallableStatementCreator() {
        public CallableStatement createCallableStatement(Connection con) {
            CallableStatement cs = con.prepareCall("{? = call MY_FUNCTION(?, ?, ?)}");
            cs.registerOutParameter(1, Types.INTEGER); // or whatever type your function returns.
            // Set your arguments
            cs.setInt(2, ...); // first argument
            cs.setInt(3, ...); // second argument
            cs.setInt(4, ...); // third argument
            return cs;
        }
    },
    new CallableStatementCallback {
        public Object doInCallableStatement(CallableStatement cs) {
            cs.execute();
            int result = cs.getInt(1);
            return result; // Whatever is returned here is returned from the jdbcTemplate.execute method
        }
    }
); 
```

            回答 #2

赞同：19

时间：2009-09-29T18:13:01.407

在 Spring 中调用 Oracle 函数的更简单方法是将 StoredProcedure 子类化，如下所示

```
public class MyStoredProcedure extends StoredProcedure{
    private static final String SQL = "package.function";

    public MyStoredProcedure(DataSource ds){
        super(ds,SQL);
        declareParameter(new SqlOutParameter("param_out",Types.NUMERIC));
        declareParameter(new SqlParameter("param_in",Types.NUMERIC));
        setFunction(true);//you must set this as it distinguishes it from a sproc
        compile();
    }

    public String execute(Long rdsId){
        Map in = new HashMap();
        in.put("param_in",rdsId);
        Map out = execute(in);
        if(!out.isEmpty())
            return out.get("param_out").toString();
        else
            return null;
    }
} 
```

像这样称呼它

```
@Autowired DataSource ds;
MyStoredProcedure sp = new MyStoredProcedure(ds);
String i = sp.execute(1l); 
```

这里使用的 Oracle 函数只接受一个数字参数并返回一个数字参数。

            回答 #3

赞同：2

时间：2017-08-07T08:26:16.270

在我看来，这是最简单的方法之一：

```
public class ServRepository {

    private JdbcTemplate jdbcTemplate;
    private SimpleJdbcCall functionGetServerErrors;

    @Autowired
    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
        jdbcTemplate.setResultsMapCaseInsensitive(true);
        this.functionGetServerErrors = new SimpleJdbcCall(jdbcTemplate).withFunctionName("THIS_IS_YOUR_DB_FUNCTION_NAME").withSchemaName("OPTIONAL_SCHEMA_NAME");
    }

        public String callYourFunction(int parameterOne, int parameterTwo) {
            SqlParameterSource in = new MapSqlParameterSource().addValue("DB_FUNCTION_INCOMING_PARAMETER_ONE", parameterOne).addValue("DB_FUNCTION_INCOMING_PARAMETER_TWO", parameterTwo);
            return functionGetServerErrors.executeFunction(String.class, in);
        }
} 
```

            回答 #4

赞同：1

时间：2019-10-09T15:05:35.857

调用函数使用`NamedParameterJdbcTemplate`：

```
final String query = "select MY_FUNCTION(:arg1, :arg2, :arg3) from dual";
Map<String, Object> argMap = new HashMap<>();
argMap.put("arg1", "value1");
argMap.put("arg2", 2);
argMap.put("arg3", "value3");
final String result = new NamedParameterJdbcTemplate(dataSource)
        .queryForObject(query, argMap, String.class); 
```

调用过程使用`JdbcTemplate`：

```
final String query = "call MY_PROCEDURE(?, ?, ?)";
final Object[] args = {"arg1", "arg2", "arg3"};
new JdbcTemplate(dataSource).execute(query, args, String.class); 
```

调用函数使用`SimpleJdbcCall`：

```
Map<String, Object> inParameters = new HashMap<>();
inParameters.put("arg1", 55); // arg1 value
inParameters.put("arg2", 20); // arg2 value
MapSqlParameterSource mapSqlParameterSource = new MapSqlParameterSource(inParameters);
BigDecimal result = new SimpleJdbcCall(dataSource)
        .withCatalogName("MY_PACKAGE")
        .withSchemaName("MY_SCHEMA")
        .withFunctionName("MY_FUNCTION")
        .executeFunction(BigDecimal.class, mapSqlParameterSource); 
```

调用过程使用`SimpleJdbcCall`：

```
new SimpleJdbcCall(dataSource)
        .withCatalogName("MY_PACKAGE")
        .withProcedureName("MY_PROCEDURE")
        .execute("arg1", arg2); 
```

        c++ - C++ 拼写检查库

ID：862699

赞同：2

时间：2009-05-14T10:55:36.827

标签：c++, open-source, spell-checking

任何人都可以推荐一个好的（理想情况下是开源的）C++ 拼写检查库。我们目前正在使用 Talo，它不是很好，所以我们正在寻求改变。

一个包括语法检查器的也很好。

谢谢

            回答 #1

赞同：3

时间：2009-05-14T11:09:25.017

我听说过有关[hunspell](http://hunspell.sourceforge.net/)的好消息。我已经使用并集成了[aspell](http://aspell.net/)，它有一些不错的功能和一些我不喜欢的功能。

            回答 #2

赞同：1

时间：2009-05-14T11:30:11.627

如果您可以访问互联网，您可以随时使用在线服务，例如[SpellCheck.net](http://www.spellcheck.net)，它有一个可以查询的 CGI 界面。

            回答 #3

赞同：0

时间：2009-05-14T14:43:59.197

继 Yuval - [OpenOffice Lingucomponent](http://lingucomponent.openoffice.org/index.html)

        asp.net - ASP.NET 成员资格 - 哪个用户经过身份验证，哪个用户被模拟？

ID：862702

赞同：2

时间：2009-05-14T10:56:26.123

标签：asp.net, authentication, active-directory, asp.net-membership, impersonation

在试图找出 ActiveDirectory 和 ASP.NET 成员资格如何工作时，我有点困惑......我创建了一个新的 MVC 项目并删除了 AccountController / Views。我已经更改了 Web.Config 以便它使用 ActiveDirectory 并根据用户当前的 Windows 登录自动对用户进行身份验证：

**网络配置**

```
<authentication mode="Windows">
    <forms
    name=".ADAuthCookie"
    timeout="10" />
</authentication>

<membership defaultProvider="MyADMembershipProvider">
  <providers>
    <clear/>
      <add
         name="MyADMembershipProvider"
         type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
         connectionStringName="ADConnectionString"
         connectionUsername="MYDOMAIN\myuser"
         connectionPassword="xxx"
         />
  </providers>                 
</membership> 
```

这很好用，因为我可以执行以下操作来获取这样的用户用户名：

```
User.Idenity.Name()  'Gives MYDOMAIN\myuser 
```

看下面，其实让我很困惑：

```
Threading.Thread.CurrentPrincipal.Identity.Name() 'Gives MYDOMAIN\myuser 
```

**1、线程标识不应该是IUSR_WORKSTATION或者ASPNET_WP用户名吗？**

**2\. Authentication 和 Impersonation 有什么区别？**

            回答 #1

赞同：1

时间：2009-05-14T11:00:18.080

myuser 是该应用程序上的经过身份验证的用户，这就是您的 CurrentPrincipal 为您提供 MYDOMAIN/myuser 的原因。应用程序在使用数据库等资源时模拟 IUSR_WORKSTATION，这是一个完全不同的问题。

如果您转到工具栏上的项目，然后选择 ASP.NET 配置，它将打开一个网站，让您可以访问这些设置并创建用户、角色等。

        xpath - Dom4j 分离节点，Jython

ID：862709

赞同：1

时间：2009-05-14T10:57:47.977

标签：xpath, jython, dom4j, detach

我正在使用 Dom4j 分离节点，如下所示：

```
<div name="divName">
    Some Text Here
    <span>Some Text Here</span>
</div> 
```

我按名称选择 div 节点，然后使用 detach 方法将其删除：

```
xpathValue = "//*[contains(@name, 'divName')]"
xpath = dom.createXPath(xpathValue)
    if xpath != None:
        nodes = xpath.selectNodes(dom)
        if len(nodes) > 0:
            for node in nodes:
                node.detach() 
```

这似乎可以很好地删除 div，我注意到它还删除了该 div 中的元素和文本。我想要实现的是在不删除 div 内的元素和文本的情况下删除 div，从而导致：

```
Some Text Here
<span>Some Text Here</span> 
```

是否可以使用 dom4j 实现这一目标？如果没有关于如何解决这个问题的任何建议？

干杯

伊夫

**更新：**

@alamar

通过获取您的代码并对其进行一些编辑，我已经实现了我想要的，这就是我想出的：

```
 xpathValue = "//*[contains(@name, 'divName')]"
   xpath = dom.createXPath(xpathValue)
    if xpath != None:
        nodes = xpath.selectNodes(dom)
        if len(nodes) > 0:
            for node in nodes:
                parent = node.getParent()
                nodeContents = node.content()
                    if len(nodeContents) > 0:
                        for subNode in nodeContents:
                            parent.add(subNode.clone().detach())
            node.detach() 
```

这似乎有效，但在以下情况下将节点添加到父节点的末尾：

```
<div name="parent">
    <div name="divName">
        Some Text Here
        <span>Some Text Here</span>
    </div>
    <div name="keep"></div>
</div> 
```

结果是这样的：

```
<div name="parent">
    <div name="keep"></div>
    Some Text Here
    <span>Some Text Here</span>
</div> 
```

我试图弄清楚如何让已删除节点的内容保持在其原始位置，在名为“keep”的 div 之前，而不是在名为“keep”的 div 之后添加。我已经尝试了一些东西，但似乎无法做到这一点，有人可以帮忙吗？

伊夫

            回答 #1

赞同：1

时间：2009-05-14T13:43:08.843

如果你想保持元素的顺序，你真的应该要求`parent`它的`content()`. 在那个`content`（由父元素支持的 List）集合中，您应该找到您的`div`并将其替换为该 div 的`content()`.

坦率地说，我不记得在 python 中这样做的惯用方式。

大概

```
if xpath != None:
    nodes = xpath.selectNodes(dom)
    if len(nodes) > 0:
        for node in nodes:
            parent = node.getParent()
            index = parent.indexOf(node)
            siblings = parent.content()
            nodeContents = node.content()
                if len(nodeContents) > 0:
                    for subNode in nodeContents:
                        siblings.add(subNode.clone().detach(), index++)
        node.detach() 
```

            回答 #2

赞同：0

时间：2009-05-14T11:14:17.860

尝试：

```
if xpath != None:
    nodes = xpath.selectNodes(dom)
    if len(nodes) > 0:
        for div in nodes:
            parent = div.getParent()
            div.detach()
            for(child in node.content())
                child.detach()
                parent.add(child) 
```

我相信它会成功的。

即在分离每个 div 之后，您应该将每个 div 的子元素重新附加到 div 的父元素中。

            回答 #3

赞同：0

时间：2013-05-27T05:59:57.587

我有一个类似的问题并使用以下功能解决了它（对我来说很好）

它在做什么：它将简单地删除该父标记，并将元素内的每个元素和节点包含到该位置的父级。

```
 private void _replaceTagByContent(Element element) {
        Element parent = element.getParent();
        List elements = parent.elements();
        int insertPosition = elements.indexOf(element);

        // add them all to the parent again
        for (int i = 0, size = elements.size(); i < size; i++) {
            Node node = (Node) elements.get(i);
            if (i == insertPosition) {

                // if we are here, then this has to be an element, since
                // wo do only replace elements ...

                for (int j = element.nodeCount() - 1; j >= 0; j--) {
                    Node theNode = element.node(j);
                    theNode.detach();
                    elements.add(i, theNode);
                }

                // finally remove this node
                elements.remove(node);
            }
        }
    } 
```

享受cnsntrk

        reporting-services - 在 SSRS 中动态加载 SubReport 数据

ID：862722

赞同：0

时间：2009-05-14T11:01:16.813

标签：reporting-services, ssrs-2008

这是在 SSRS 2008 中。

我创建了一个带有 tablix 的报告，嵌入在 tablix 中有一个子报告。这个子报告包含很多信息（我的意思是很多——加载它需要超过 45 秒）。   

我不想显示它，或者更准确地说——在报告最初运行时处理/加载数据。请注意，我不想只是不显示它 - 因为所有数据仍在初始加载时处理。

相反，我只希望在显示子报表时单独处理子报表（以及下拉数据）（例如，单击 + 号以切换它，或单击图像/链接等任何其他选项，同时停留在同一份报告）。我也不想在不同的选项卡或类似的东西中打开子报表....

有谁知道解决方案？也许有一个 onLoad 方法、动态子报告或类似的东西？

我尝试查看 DataElementOutput 属性，但那是只读的……还有其他的吗？

            回答 #1

赞同：1

时间：2009-05-19T19:34:53.133

在您跳过很多麻烦来实施解决方法之前，您是否分析过为子报表提供数据的查询的执行计划？如果还没有，那么值得看看是否可以通过添加覆盖索引来提高性能，这将有助于查询优化器快速传递数据。

希望这可以帮助，

账单

            回答 #2

赞同：1

时间：2009-08-30T11:50:21.603

因此，事实证明，问题实际上是因为我在父报表中的每一行都重复了子报表。因此，子报表被多次调用......

而且根据 MS 的说法，没有办法动态处理单个子报表。必须通过将子报表（至少是数据量大的部分）拆分到单独的页面来解决此问题。:(

        c# - 在同一个应用程序中使用 VB.NET 和 C#？

ID：862723

赞同：16

时间：2009-05-14T11:01:23.460

标签：c#, vb.net, visual-studio-2005

我正在 MS Visual Studio 2005 中开发基于 GUI 的应用程序，我只想知道是否可以在同一个项目中同时使用 VB.NET 和 C#。或者我可以在我的 VB.NET 项目中包含一个用 C# 编写的模块吗？

我有一个用 C# 编写的类，我想在基于 VB.NET 的项目中使用它，所以如果我可以包含并调用该项目中的函数，那么我就不必在 VB.NET 中再次编写该类。

所以请帮助我，因为我是 .NET 编程的新手。  

            回答 #1

赞同：27

时间：2009-05-14T11:03:57.947

我只想知道是否可以在同一个项目中同时使用 VB 和 C#。

不，不在同一个*项目*中。另一方面，您可以在相同的*解决方案*中使用它们。

或者我可以在我的 VB.net 项目中包含一个用 C# 编写的模块。

我建议您创建一个包含两个项目的解决方案：一个在 C# 中，它形成了您从 VB 项目中使用的库。这很简单，易于维护且易于扩展。

            回答 #2

赞同：16

时间：2009-05-14T11:03:53.080

我自己从未做过，但我知道您可以将 C# 代码编译成 dll，然后在您的 VB 项目中加载和引用该 dll。

来自[“在 VB.net 中调用 C# 类”](http://forums.devx.com/archive/index.php/t-98484.html)：

我认为您要使用的 C# 代码必须编译为 DLL。完成后，只需将对该项目的引用添加到您的 VB.Net 项目中，导入您需要的命名空间，然后您就可以使用 C# 代码了。

另请参阅[如何：创建和使用 C# DLL](http://msdn.microsoft.com/en-us/library/3707x96z(VS.80).aspx)（来自 MSDN，适用于 VS2005）

            回答 #3

赞同：9

时间：2009-05-14T11:22:43.923

您还希望确保您的 C# 代码符合 CLS。这意味着它不会公开公开任何其他 .NET 语言无法理解的功能（例如，无符号整数 - 在 VB 中不存在，或者仅按大小写不同的类 - 因为 VB 不区分大小写）。为此，您需要添加一个属性，以便在您违反任何准则时编译器会引发错误。[本文](http://www.devarticles.com/c/a/C-Sharp/Making-Your-Code-CLS-Compliant/)向您展示了如何执行此操作：

CLSCompliantAttribute 可应用于程序集、模块、类型和成员。

为了将整个程序集标记为符合 CLS，使用以下语法

```
using System; 
[assembly:CLSCompliant(true)] 
```

为了将特定方法标记为符合 CLS，使用以下语法

```
[CLSCompliant(true)]  
public void MyMethod()` 
```

            回答 #4

赞同：3

时间：2009-06-20T15:30:59.110

将 VB.NET 和 C# 代码放在不同的项目中。（我在我的开源项目[http://msquant.sourceforge.net/](http://msquant.sourceforge.net/)中同时使用了 VB.NET 和 C# ，而且效果很好）。

您无需担心 DLL，只需引用**项目**（使用“添加引用”对话框中的“项目”选项卡）。例如，如果您需要在 C# 代码/项目中使用函数，请在 VB.NET 项目中添加对 C# 项目的引用。

            回答 #5

赞同：3

时间：2013-10-02T16:52:12.980

您不能在同一个项目中使用 C# 文件和 VB 文件。但是，您可以在同一解决方案中拥有 VB 和 C# 项目并引用它们。

在您的代码中，您可以使用：

```
Imports namespace 
```

或者

```
using namespace 
```

将参考添加到适当的项目后，构建解决方案，您就可以开始了。

您还可以在单​​独的解决方案中创建 VB.NET 库，对其进行编译并将 DLL 导入 C# 项目，反之亦然。

            回答 #6

赞同：2

时间：2011-02-13T14:29:12.867

您还必须知道，如果您在同一解决方案中有一个带有[C#项目的](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)项目，其中一个项目引用了另一个项目，则在重新构建解决方案后，引用项目中应用的更改将仅可供另一个项目使用。这就像拥有二进制引用，但能够在同一个解决方案上更改代码。

就个人而言，我不喜欢这样，但是我总是处于我修改引用项目中的代码并且不知道为什么我的更改不在我使用它的代码中并且我弄清楚的情况下，oohhhh ，我必须重建。

对于临时帮助，可以接受，但不能每天编程。

            回答 #7

赞同：0

时间：2009-05-14T16:28:12.207

如果您只打算在 Visual Basic 项目中使用该模块，那么您应该考虑只将代码转换为 Visual Basic。如果您需要在 C# 和[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)程序中使用该模块，我将使用上面发布的解决方案之一

您可以尝试 * [Convert C# to VB.NET 之](http://www.developerfusion.com/tools/convert/csharp-to-vb/)类的方法。它将 C# 转换为 VB.NET 代码。当我必须转换我在网上找到的用 C# 编写的东西时，我只使用这个页面。

        sql - 如何加入两个查询？

ID：862726

赞同：0

时间：2009-05-14T11:01:51.070

标签：sql, sql-server, sql-server-2005

我如何加入这两个查询（Query1-Query2）

查询1：  

```
 declare @date1 datetime,@date2 datetime , @COUNT INT , @countgap int
seLECT @date1='2009-05-11' , @date2 = '2009-05-12'
seLECT @countgap = 30 , @COUNT = 0 

select @date1 TARIH , @COUNT SIRA 
INTO #TMP
WHILE @date1 < @date2 
BEGIN 
    SELECT  @date1 = DATEadd(minute,@countgap,@date1) , @COUNT = @COUNT +1
    INSERT INTO #TMP
    select @date1 TARIH , @COUNT SIRA 
END
SELECT TARIH , SIRA , ( 0) VISITINGCOUNT 
FROM #TMP
ORDER BY SIRA 
```

查询2：  

```
 select count(page) as TARIH,   
    (datepart(hour,Date)*60+datepart(minute,Date))/@countgap  as SIRA 
    from scr_SecuristLog  
    where Date between @date1  and  @date2 
    GROUP BY (datepart(hour,Date)*60+datepart(minute,Date))/@countgap 
```

请看“SIRA”。此列在两个数据表中相等。请运行 Query1 查看结果。我需要内连接两个表    

查询1结果

```
 2009-05-11 00:00:00.000 0   0

.

.

.

.

.

2009-05-11 07:00:00.000 14  0

2009-05-11 07:30:00.000 15  0

2009-05-11 08:00:00.000 16  0

2009-05-11 08:30:00.000 17  0

2009-05-11 09:00:00.000 18  0

2009-05-11 09:30:00.000 19  0

2009-05-11 10:00:00.000 20  0

2009-05-11 10:30:00.000 21  0

2009-05-11 11:00:00.000 22  0

2009-05-11 11:30:00.000 23  0

2009-05-11 12:00:00.000 24  0

2009-05-11 12:30:00.000 25  0

2009-05-11 13:00:00.000 26  0

2009-05-11 13:30:00.000 27  0

2009-05-11 14:00:00.000 28  0

2009-05-11 14:30:00.000 29  0

2009-05-11 15:00:00.000 30  0

2009-05-11 15:30:00.000 31  0

2009-05-11 16:00:00.000 32  0

2009-05-11 16:30:00.000 33  0

2009-05-11 17:00:00.000 34  0

2009-05-11 17:30:00.000 35  0

2009-05-11 18:00:00.000 36  0

.

.

. 
```

查询2结果

```
 3   23
9   29
10  32
3   21
18  33 
```

我需要结果

```
 2009-05-11 00:00:00.000 0   0

....

2009-05-11 07:00:00.000 14  0

2009-05-11 07:30:00.000 15  0

2009-05-11 08:00:00.000 16  0

2009-05-11 08:30:00.000 17  0

2009-05-11 09:00:00.000 18  33

2009-05-11 09:30:00.000 19  0

2009-05-11 10:00:00.000 20  0

2009-05-11 10:30:00.000 21  0

2009-05-11 11:00:00.000 22  0

2009-05-11 11:30:00.000 23  3

2009-05-11 12:00:00.000 24  0

2009-05-11 12:30:00.000 25  0

2009-05-11 13:00:00.000 26  0

2009-05-11 13:30:00.000 27  0

2009-05-11 14:00:00.000 28  0

2009-05-11 14:30:00.000 29  9

2009-05-11 15:00:00.000 30  0

2009-05-11 15:30:00.000 31  0

2009-05-11 16:00:00.000 32  10

2009-05-11 16:30:00.000 33  0

2009-05-11 17:00:00.000 34  0

2009-05-11 17:30:00.000 35  0

2009-05-11 18:00:00.000 36  0

... 
```

            回答 #1

赞同：1

时间：2009-05-14T11:27:55.393

有点棘手，因为表之间的字段名称不匹配......

```
select t1.TARIH, t1.SIRA, VISITINGCOUNT = isnull(t2.SIRA, 0)
from #TMP t1
left join ( --paste query 2 here-- ) t2 on t2.TARIH = t1.SIRA
order by t1.SIRA 
```

        java - 将值放入 onBindAndValidate 中的 error.getModel

ID：862728

赞同：2

时间：2009-05-14T11:02:25.593

标签：java, validation, spring

如果没有任何验证错误，我想向模型添加一些数据。我想我可以在 onBindAndValidate 中做到这一点，在那里我可以访问包含模型的错误对象：

```
errors.getModel().putAll(map); 
```

我还尝试将值一一使用`put(key, value)`，但没有成功。

我能做些什么？

            回答 #1

赞同：1

时间：2009-11-24T22:26:59.693

您不能直接将数据添加到 BindException 的模型。你做不到的原因：

```
errors.getModel().putAll(map); 
```

是因为*errors.getModel()*每次调用时都会创建并返回新地图。因此，在您的 onBindAndValidate 示例中，您从 BindException 对象获取新模型，将数据添加到模型中，然后将其丢弃。在第二个示例中，您将数据添加到模型中，然后将其返回。

从控制器方法中使用 BindException 模型时的其他常见用法如下所示：

```
Map errorModel = errors.getModel();
errorModel.putAll(otherMap);
return new ModelAndView("viewName", errorModel ); 
```

另请参阅：[BindException#getModel()](http://static.springsource.org/spring/docs/2.0.8/api/org/springframework/validation/BindException.html#getModel())

            回答 #2

赞同：0

时间：2009-05-14T12:15:20.537

我可以在 processFinish 中验证后执行此操作：

```
return showPage(request, errors, getCurrentPage(request))
       .addAllObjects(map); 
```

        nhibernate - 使用 NHibernate 并且不在客户端应用程序中引用它的程序集

ID：862729

赞同：0

时间：2009-05-14T11:02:57.997

标签：nhibernate, collections, assemblies, reference, set

我们有一个使用 CSLA Business Objects 和 NHibernate ORM 的多层应用程序。在我们的业务对象中，我们将集合数据成员保存为`ICollection<T>`，而在我们的对象映射文件中，我们将它们定义为`<set>`s。

由于 NHibernate 使用它自己的具体类型来获取这些集合，当这些集合到达客户端时我们会遇到问题，因为我们没有在客户端应用程序中引用 NHibernate 程序集（而且我们不想更改它）。

有没有办法解决这个问题或以某种方式强制 NHibernate 使用 .net 集合类型或我们自己的集合类型，而不实现任何 NHibernate 集合类型接口？

提前致谢，

亚龙。

            回答 #1

赞同：0

时间：2009-05-14T13:14:50.003

NHibernate 需要它自己的集合实现来管理持久性状态。所以你不能改变 NHibernates 的行为。

我们正在使用 WCF，它在序列化时将集合转换为数组或列表。如果您的基础设施不这样做，您需要在发送到客户端之前转换对象。

无论如何，最好使用 DTO（数据传输对象）模型。您需要将所有数据从业务模型复制到 DTO 模型。

如果你不喜欢 DTO 模型，我认为你需要交换你的收藏。编写一个将 NH 的集合与 .NET 框架集合交换的方法，例如。使用反射。

或者 - 您使用客户端上对 NHibernate 的引用。

            回答 #2

赞同：-1

时间：2009-05-14T11:08:20.993

[您可以使用`ICollection<T>`和`HashSet<T>`不引用 Iesi.Collections](http://ayende.com/Blog/archive/2009/04/23/nhibernate-tidbit-ndash-using-ltsetgt-without-referencing-iesi.collections.aspx)

        c# - ASP.NET 和 AJAX：在 UpdatePanel 中使用 asp:Button 完成回发

ID：862738

赞同：4

时间：2009-05-14T11:04:10.677

标签：c#, asp.net-ajax

这是我的 aspx 代码：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" 
     UpdateMode="Conditional" RenderMode="Inline" ChildrenAsTriggers="False">
 <ContentTemplate>
    <asp:Button ID="Save" runat="server" Text="Save" 
         onclick="Save_Click" CssClass="boton" />
 </ContentTemplate>
</asp:UpdatePanel> 
```

此按钮位于更新面板上，因为我需要在部分回发中启用它。

我需要那个保存按钮进行完整的回发。我怎样才能做到这一点？

谢谢！

            回答 #1

赞同：8

时间：2009-05-14T11:09:02.787

您将在更新面板中创建一个新的 PostBack 触发器，该触发器设置为按钮的 ID。

例子：

```
<Triggers>
    <asp:PostBackTrigger ControlID="Button1" />
</Triggers> 
```

这将作为除内容模板之外的另一个组件进入您的 UpdatePanel。

像这样：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" 
     UpdateMode="Conditional" RenderMode="Inline" ChildrenAsTriggers="False">
 <Triggers>
    <asp:PostBackTrigger ControlID="Save" />
 </Triggers>
 <ContentTemplate>
    <asp:Button ID="Save" runat="server" Text="Save" 
         onclick="Save_Click" CssClass="boton" />
 </ContentTemplate>
</asp:UpdatePanel> 
```

        url - 带有特殊字符的 URL 不起作用

ID：862739

赞同：0

时间：2009-05-14T11:04:21.377

标签：url

我正在尝试在 IE7 和 firefox 中打开 .pdf 文件，但它不起作用。

实际上，在打开 .PDF 文件时，超链接单击事件上的 HTML 页面上有一个超链接

**当我从 818 averill avenue 1_001-5.pdf 打开文件 D:\Documents\Doc\Trans1\1\Pages**时，文件名出现问题，它在所有浏览器中都可以正常工作，但是当我尝试打开文件**D:\Documents\Doc时\Trans1\1\Pages from 818 averill avenue #1_001-5.pdf**我收到错误，在 IE7 和 Firefox 中找不到页面，在 IE6 中它工作正常。只有在文件名中添加了**#的变化。**

为什么文件打不开？

            回答 #1

赞同：2

时间：2009-05-14T11:07:31.713

将反斜杠更改为正斜杠并将“file:///”添加到前面。然后 URL 对哈希进行编码（# 是 %23）。

            回答 #2

赞同：1

时间：2009-05-14T11:22:12.957

URL 中的 # 表示命名的锚点。

我无法用 FF3 重现您的错误。当文件名包含哈希时，从资源管理器拖动和通过 File|Open 打开都可以在 FF 中显示 PDF

        asp.net-mvc - ASP.NET MVC 获取下拉列表值

ID：862743

赞同：10

时间：2009-05-14T11:05:37.957

标签：asp.net-mvc, list, drop-down-menu

在 ASP.NET MVC 中，如何从已发布的表单中获取选定的下拉列表值？

            回答 #1

赞同：6

时间：2009-05-14T11:16:10.757

```
public class MyController
{
    public ActionResult MyAction(string DropDownListName)
    {

    }
} 
```

这将为您完成 MasterMind 答案中的代码行。您要使用哪种方法取决于您的情况。在我看来，两者都可以。

如果您所有可能选择的值都是数字，您也可以这样做：

```
public class MyController
{
    public ActionResult MyAction(int DropDownListName)
    {

    }
} 
```

然后它将为您将所选值的字符串转换为整数。

            回答 #2

赞同：4

时间：2009-05-14T11:11:39.737

```
public class MyController
{
    public ActionResult MyAction (FormCollection form)
    {
        string value = form["DropDownListName"];
    }
} 
```

        c# - 如何在 C# 中获取 Ms Access 表的主键

ID：862749

赞同：1

时间：2009-05-14T11:06:43.930

标签：c#, ms-access, primary-key

在给定连接和 tableName 的情况下，我需要构成 Microsoft Access 表的主键的一个或多个字段（只需字段名称即可）。

            回答 #1

赞同：5

时间：2009-05-14T11:59:28.030

好的，我想我找到了。它应该适用于所有 oledb 并且是 sth。像 ：

```
public static List<string> getKeyNames(String tableName, DbConnection conn)
    {
        var returnList = new List<string>();

        DataTable mySchema = (conn as OleDbConnection).
            GetOleDbSchemaTable(OleDbSchemaGuid.Primary_Keys,
                                new Object[] {null, null, tableName});

        // following is a lengthy form of the number '3' :-)
        int columnOrdinalForName = mySchema.Columns["COLUMN_NAME"].Ordinal;

        foreach (DataRow r in mySchema.Rows)
        {
            returnList.Add(r.ItemArray[columnOrdinalForName].ToString());
        }

        return returnList;
    } 
```

        performance - 为多个提供单一资源与为多个提供多个资源之间的区别？

ID：862750

赞同：0

时间：2009-05-14T11:07:15.800

标签：performance, webserver

为 10 个人提供同一个文件的 Web 服务器与为 10 个不同的人提供 10 个不同文件的 Web 服务器之间的性能差异是什么？

            回答 #1

赞同：3

时间：2009-05-14T11:14:24.240

很少。

但是，如果它为 100,000 人提供 1 个文件，而为 100,000 人提供 100,000 个文件，那么您可能会看到差异，因为单个文件可以缓存在内存中，而大量文件可能无法缓存，所以您会看到大量的磁盘 IO。

这假设您正在谈论静态文件（例如图像）。如果您在谈论脚本，那么脚本的实际作用将是主要因素。

        c# - Asp:GridView.DataBind() 使用 AJAX WebService Javascript

ID：862755

赞同：0

时间：2009-05-14T11:08:54.283

标签：c#, asp.net, ajax, .net-3.5

海，

我正在使用 Visual Studio 2008 和 Framework 3.5。我编写了一个 WebService，并通过 ScriptManager Service Path 在我的页面中添加了该 WebService。我在 web 服务中编写了一个方法，它返回 List<...>。我从 JavaScript 函数中捕获了该值。现在我想使用 JavaScript 将该 List<...> 值与我的 Asp:GridView 绑定。帮我 .....

            回答 #1

赞同：0

时间：2009-05-14T11:15:30.150

由于视图状态，您不能这样做。它在静态上下文中不可访问。  

尝试 asp:updatePanel（它可以在回调之间保持视图状态）或自己编写无状态网格。

            回答 #2

赞同：0

时间：2011-12-28T15:21:52.790

好吧，您不能使用 JavaScript 绑定数据网格。正如 Arnis 提到的，您可以使用 UpdatePanel。或者，您可以使用 Jquery 创建一个外观和感觉像网格的表结构。但是，使用这种方法进行分页会很棘手。

        sharepoint - 使用具有 AllUsersWebPart 节点的功能的 SharePoint 问题

ID：862759

赞同：1

时间：2009-05-14T11:09:25.763

标签：sharepoint, caml

我有一个安装新页面布局的 SharePoint 功能。

此功能的一个要求是安装带有默认 Web 部件的页面布局，以便当用户运行“创建页面”操作时，会使用页面上已有的 Web 部件创建页面。

因此，我尝试在页面的 Elements 定义中添加一个 AllUsersWebPart 节点，例如。

```
<Elements>
    ...
    <Module ...>
        ...
        <File ...>
            <AllUsersWebPart ...>
                ...
            </AllUsersWebPart>
        </File>
        ...
    </Module>
</Elements> 
```

安装、部署了功能等，当然得到了有用的“没有为此对象定义无参数构造函数”错误——我在 Elements.xml 中的定义很可能存在问题。

现在我遇到的真正问题是我尝试从功能定义中删除 AllUsersWebPart 部分（这样创建时页面上没有 Web 部件），并且由于 SharePoint 中的一个奇妙的错误，Web 部件是仍然为页面布局定义，即使功能定义不同 - 我在[http://sharepointblog.buus-oestergaard.dk/post/Default-webparts-in-sharepoint-pagelayouts.aspx](http://sharepointblog.buus-oestergaard.dk/post/Default-webparts-in-sharepoint-pagelayouts.aspx)上找到了一些关于此的详细信息（Point #2）。

我已尝试升级和删除/重新安装该功能，但没有效果 - 如何从功能/内容数据库中删除此 Web 部件，以便我可以让该功能仅安装页面布局或放置正确的 Web 部件定义在功能？

            回答 #1

赞同：1

时间：2009-05-14T15:17:44.217

好的，我的页面布局正常工作，这些是我采取的步骤，以防万一这很有用：

1 在 Web 部件页面维护模式下编辑页面布局：

```
http://<server name>/_catalogs/masterpage/<page name>.aspx?contents=1 
```

从那里删除所有 Web 部件实例。

2 在 Designer 中打开布局（在服务器上），并确保 WebPartZone / ZoneTemplate 为空。检查后确保页面布局设置为已批准。

页面布局在此之后可用 - 我能够删除并重新安装我的页面布局功能而没有任何问题。

看起来 Web 部件定义保留在数据库中，因此当更新/重新安装功能时，它们已经链接到页面/Web 部件区域。解决这个问题可能应该在页面布局功能中的功能接收器中的代码中完成，如果我有时间写这个，我会把它贴在某个地方......

            回答 #2

赞同：0

时间：2009-05-14T11:46:00.123

卸载该功能时，您是否确保从 Masterpage/pagelayout 目录中删除了您的页面布局？

用于添加内容文件（页面布局）的功能元素在停用该功能时不会将其删除。

        .net - ColdFusion 网络服务的 SOAP 响应结构

ID：862760

赞同：2

时间：2009-05-14T11:10:10.257

标签：.net, xml, web-services, soap, coldfusion

我创建的 ColdFusion Web 服务有问题。该服务接受经过 Base64 编码的 XML 数据，然后将其写入磁盘以进行存档。然后，此文件会进行基本架构检查，并将任何错误报告给用户，如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
        <UploadXMLResponse xmlns="http://url">
            <UploadXMLReturn>
                <AuthMessage>Authentication successful</AuthMessage>
                <AuthStatus>Success</AuthStatus>
                <FileInfo>File Example.xml was successfully uploaded</FileInfo>
                <UploadStatus>Success</UploadStatus>
                <xmlValErrors>
                    <xmlValErrors xsi:type="xsd:string">1824</xmlValErrors>
                    <xmlValErrors xsi:type="xsd:string">Error Message</xmlValErrors>
                    <xmlValErrors xsi:type="xsd:string">23</xmlValErrors>
                    <xmlValErrors xsi:type="xsd:string">1824</xmlValErrors>
                    <xmlValErrors xsi:type="xsd:string">Error Message</xmlValErrors>
                    <xmlValErrors xsi:type="xsd:string">38</xmlValErrors>
                </xmlValErrors>
                <xmlValMessage>Schema validation generated errors</xmlValMessage>
                <xmlValStatus>Failure</xmlValStatus>
            </UploadXMLReturn>
        </UploadXMLResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

问题是`<xmlValErrors>`元素以一种有点奇怪的方式嵌套。这是由于 ColdFusion 处理错误数组的方式所致。结果是当用户尝试分析响应时，他们只能看到初始`<xmlValErrors>`元素。

.Net 在这里似乎是一个特殊的问题，因为它将`<xmlValErrors>`元素视为一个空数组，尽管它显然包含许多其他元素。

我怀疑问题在于在元素内的子元素上重用名称`<xmlValErrors>`。但是，我无法在 ColdFusion 中找到解决方法。

关于如何解决这个问题的想法将不胜感激。

            回答 #1

赞同：2

时间：2009-05-15T15:05:53.520

您是如何访问 xmlValErrors 的？因为您的错误数组位于父 xmlVarErrors 中，所以您希望像这样访问它：

uploadxmlreturn.xmlvarerrors.xmlvarerrors

第一个 xmlvarerrors 指向父级，第二个指向错误数组。

有道理？

            回答 #2

赞同：1

时间：2009-05-14T18:48:44.257

XML 和 SOAP 都不是我的强项，但 xmlValErrors 的子元素不应该也称为“xmlValErrors”。您不希望它们每个都是“xmlValError”吗？

        java - JVM 垃圾收集和分页内存架构

ID：862761

赞同：19

时间：2009-05-14T11:10:16.213

标签：java, garbage-collection

在最近 10 年讨论 java 和/或垃圾收集时，我无法辩护的唯一性能损失是垃圾收集算法在分页内存架构中运行时或多或少会中断，并且部分堆正在获取分页。

Unix 系统（尤其是 Linux）积极地分页出一段时间没有被触及的内存，虽然这对你的平均泄漏 c 应用程序有好处，但它会在内存紧张的情况下扼杀 java 的性能。

我知道最好的做法是保持最大堆小于物理内存。（或者你会看到你的应用程序交换到死）但是这个想法 - 至少在 unix 世界中，内存可以更好地用于文件系统缓存等。

我的问题是：是否有任何分页（感知）垃圾收集算法？

            回答 #1

赞同：9

时间：2009-05-14T11:27:16.267

我要争辩说，这不是你想的那么大的问题。

为了确保我们描述的是同一件事：一个完整​​的集合需要 JVM 遍历对象图以识别每个可到达的对象；剩下的就是垃圾。这样做时，它会触及应用程序堆中的每个页面，这将导致每个页面在被换出时都被错误地放入内存中。

我认为这是一个无关紧要的原因：首先，因为现代 JVM 使用分代收集器，并且大多数对象永远不会离开年轻代，而年轻代几乎可以保证在常驻集合中。

其次，因为移出年轻代的对象仍然倾向于被频繁访问，这再次意味着它们应该在常驻集中。这是一个更微不足道的论点，实际上在很多情况下，除了 GC（我不相信内存限制缓存的一个原因）之外，不会触及长寿命对象的情况。

第三个原因（可能还有更多）是因为 JVM（至少是 Sun JVM）使用了标记-扫描-压缩收集器。所以在 GC 之后，堆中的活动对象占用的页数变少了，再次增加了 RSS。顺便说一句，这是 Swing 应用程序在最小化时显式调用 System.gc() 的主要驱动程序：通过压缩堆，当它们再次最大化时，交换的内容就更少了。

此外，要认识到 C/C++ 对象的堆碎片可能会变得极端，年轻的对象会散布在较老的对象中，因此 RSS 必须更大。

            回答 #2

赞同：5

时间：2010-10-10T22:08:43.093

您是对的，垃圾收集器和虚拟内存管理器必须协作，否则 GC 将破坏系统。Matthew Hertz、Yi Feng 和 Emery D. Berger 研究了这种 GC/内核协作。为了获得良好的性能，他们不得不稍微扩展内核并调整垃圾收集器。

在高内存压力下，他们的基准测试使用 GenMS Java GC 的时间大约延长了 160 倍。使用新的页面感知 GC，基准测试只慢了 1.6 倍。换句话说，通过适当调整的 GC，性能提高了 100 倍。

[http://lambda-the-ultimate.org/node/2391](http://lambda-the-ultimate.org/node/2391)

            回答 #3

赞同：4

时间：2009-05-14T11:16:50.753

我不是专家，但任何类型的分代垃圾收集都应该有所帮助。被积极交换的页面可能包含较旧的对象而不是较新的对象，因此 gc 自然会减少接触它们的频率。

我还要问一个反问题：是否有任何可识别垃圾收集的 unix 分页算法？如果一个给定的页面被定期（如果不是经常）拖入内存，那么它可能不是一个很好的候选者，因为它被抛弃以支持更多的磁盘缓存;-)

            回答 #4

赞同：4

时间：2009-05-14T11:27:24.583

Unix 系统（尤其是 Linux）积极地分页出一段时间没有被触及的内存，虽然这对你的平均泄漏 c 应用程序有好处，但它会在内存紧张的情况下扼杀 java 的性能。

请记住，这通常是一个可调设置——例如，用于 Linux 内核的 vm.swappiness。如果您想了解有关 Linux 上交换调优的更深入信息，可以阅读**[我写的一篇博客文章。](http://distilledb.com/blog/archives/date/2009/02/22/swap-files-in-linux.page)**

是否有任何分页（感知）垃圾收集算法？

垃圾收集算法通常设计用于非常广泛的可能程序作为输入并在大量可能的环境中运行；他们的设计需要考虑到这一点。我认为制作一个广泛有用的“分页感知”gc 算法将是非常具有挑战性的。如果您正在为一个非常专业的环境编写一个可以锁定事物的环境，那么我认为您很有可能产生良好的结果。

            回答 #5

赞同：0

时间：2009-05-14T11:41:09.977

在这个时代，分页程序是一个非常糟糕的主意。内存很便宜。

FWIW，如果您在一台制造商的 PC 上运行，该制造商喜欢对内存的赔率收取几倍的费用，Windows Vista 有一个运行良好的预测分页算法（也许是操作系统做得好的唯一事情）。

        .net - 为什么 SvcTraceViewer 包含在 Windows SDK 中而不包含在 .NET Framework 工具中？

ID：862764

赞同：1

时间：2009-05-14T11:12:22.730

标签：.net, windows, wcf, sdk

它是一个 WCF 工具，为什么它位于 Windows SDK 中而不是 .NET Framework 中？

            回答 #1

赞同：0

时间：2009-05-14T11:50:58.037

实际上，Windows SDK 现在是“适用于 Windows [n] 和 .NET Framework [m] 的 Windows SDK”——所以最终微软说这**是**一个 SDK 工具……是进入 SDK 还是工具的选择……嗯，它可以去任何一种方式真的……

        c# - 查看 Windows Defender 磁盘扫描是否正在运行

ID：862776

赞同：2

时间：2009-05-14T11:16:03.347

标签：c#, windows-vista

Windows Defender 磁盘扫描会占用系统大量性能。有没有办法让 C# 应用程序找出磁盘扫描当前是否正在运行？

            回答 #1

赞同：3

时间：2015-07-09T01:08:32.913

您可以检查`MsMpEng.exe`（反恶意软件服务可执行文件）当前产生的处理器负载。在我的计算机上，它在观察安装时以 50% 的 CPU（一个 CPU 内核完全占用）运行。

它会阻止我的安装程序写入磁盘的 EXE 或 DLL 文件长达 25 秒！（显然，安装程序正在挂起。）

请注意，`MsMpEng.exe`即使在控制面板中完全关闭 WindowsDefender 后也会运行。所以仅仅检查服务是否正在运行是不够的。您必须检查其当前的 CPU 负载。

**每次启动应用程序时，Windows Defender 都会重新**扫描每个 EXE 和 DLL 文件- 尽管在安装应用程序时它已经扫描了所有这些文件！因此，**每次**启动应用程序时都会出现巨大的延迟：应用程序加载的 DLL 文件越多，速度就越慢。

尤其是当您的应用程序使用 Themida 或 WinLicense 等反盗版保护时，Windows Defender 需要很长时间才能检查这些文件。

当您的应用程序仅打开文件而不读取或写入一个字节时，Windows Defender 会扫描每个可执行文件（EXE、DLL），这会导致`CreateFile()`长达 25 秒的延迟！

很明显，微软不具备编写快速高效的反恶意软件的知识。（我从未见过任何杀毒软件运行 25 秒扫描单个文件！） 建议安装另一个杀毒程序，这将导致 Windows Defender 自动禁用。

当用户打开/关闭 Windows Defender 时，以下注册表项会发生变化：

Windows 8 关闭：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\WdBoot
"Group"= "_Early-Launch"
"Start"= 3   // SERVICE_DEMAND_START
"ImagePath"= "\SystemRoot\system32\drivers\WdBoot.sys" 
```

Windows 8 开启：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\WdBoot
"Group"= "Early-Launch"
"Start"= 0   // SERVICE_BOOT_START
"ImagePath"= "system32\drivers\WdBoot.sys" 
```

请注意，当您检查 WdBoot 服务的状态时，即使已启用，它通常也不会运行。它似乎只在启动 Windows 时运行（？）。

Windows 7、Windows 8 和 Windows 10 关闭：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Defender\Real-Time Protection
"DisableRealtimeMonitoring"=1 
```

Windows 7、Windows 8 和 Windows 10 开启：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Defender\Real-Time Protection
"DisableRealtimeMonitoring"=0
// or the entry does not exist 
```

管理员用户无法更改此密钥。写入权限仅授予用户“SYSTEM”以及组“WinDefend”和“TrustedInstaller”。

从 Windows 10 开始，不再可能从使用“系统/NT AUTHORITY”用户（-> 拒绝访问）运行的服务中写入此值。微软可能会检查尝试写入此值的应用程序的数字签名。

Windows 10真正**糟糕**的是，你可以关闭 Windows Defender，重新启动计算机，它会再次启用！

并且还有另一个影响 Windows Defender 的键（默认不存在，但可以作为普通管理员创建）：

```
HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows Defender
"DisableAntiSpyware" = 1 
```

此键的效果是您单击控制面板中的“Windows Defender”，您会看到一个消息框，告诉您：“此应用程序已被组策略关闭......要允许此应用程序运行，请联系您的安全管理员以通过组策略启用程序。”

请注意，此键不会**关闭**Windows Defender。它只禁止用户打开 Windows Defender 配置面板 (MsAscUi.exe)。

            回答 #2

赞同：-3

时间：2009-05-14T11:29:26.777

使用 Internet Explorer 的示例：

```
Process[] ProcInfo = System.Diagnostics.Process.GetProcessesByName("iexplore"); 
```

        macos - 如何在 Mac OS X 上找到 Unix 域套接字的另一点来写入/读取它？

ID：862782

赞同：8

时间：2009-05-14T11:17:46.337

标签：macos, networking, sockets, netstat, lsof

我在运行 Mac OS X 10.5 的机器上列出了一个进程（守护进程）的打开文件：

```
>lsof  -p 89
COMMAND PID     USER   FD   TYPE    DEVICE  SIZE/OFF     NODE NAME
...
xxxxx   89 xxxxxxxx    9u  unix 0x34f8990       0t0          ->0x34f8880 
```

我想找到一种方法来打开这个套接字并在其中写入。（这是我这次的痴迷..）

如何找到底层文件的 i-node/name 以到达该套接字？**有没有办法从shell 脚本**以编程方式解决这个地址 0x34f888 ？如果不是这样，如何以编程方式进行？

作为评论，我已经启动了 netstat 命令并得到了这个结果：

```
> netstat -u
Active LOCAL (UNIX) domain sockets
Address  Type   Recv-Q Send-Q    Inode     Conn     Refs  Nextref Addr
...
 34f8990 stream      0      0        0  34f8880        0        0
...
 34f8880 stream      0      0        0  34f8990        0        0
... 
```

我不是网络/套接字专家。希望这可以提供更多信息

    c# - 使用不同的属性类型通过反射设置对象的属性

ID：862783

赞同：6

时间：2009-05-14T11:17:55.667

标签：c#, reflection, properties, runtime

我正在使用反射来填充对象的属性。

这些属性有不同的类型：String、Nullable(double) 和 Nullable(long)（这里不知道如何转义尖括号……）。这些属性的值来自（字符串，对象）对的字典。

因此，例如，我的课程具有以下属性：

```
string Description { get; set; } 
Nullable<long> Id { get; set; }
Nullable<double> MaxPower { get; set; } 
```

（实际上有大约十几个属性）并且字典将包含 <"Description", "A description">, <"Id", 123456>, <"MaxPower", 20000> 等条目

现在我使用类似下面的东西来设置值：

```
foreach (PropertyInfo info in this.GetType().GetProperties())
{
    if (info.CanRead)
    {
         object thisPropertyValue = dictionary[info.Name];

         if (thisPropertyValue != null && info.CanWrite)
         {
             Type propertyType = info.PropertyType;

             if (propertyType == typeof(String))
             {
                 info.SetValue(this, Convert.ToString(thisPropertyValue), null);
             }
             else if (propertyType == typeof(Nullable<double>))
             {
                 info.SetValue(this, Convert.ToDouble(thisPropertyValue), null);
             }
             else if (propertyType == typeof(Nullable<long>))
             {
                 info.SetValue(this, Convert.ToInt64(thisPropertyValue), null);
             }
             else
             {
                 throw new ApplicationException("Unexpected property type");
             }
         }
     }
} 
```

所以问题是：我真的必须在分配值之前检查每个属性的类型吗？是否有任何类似于我可以执行的强制转换，以便为属性值分配相应属性的类型？

*理想情况下，我希望*能够执行以下操作（我天真地认为这可能有效）：

```
 if (thisPropertyValue != null && info.CanWrite)
         {
             Type propertyType = info.PropertyType;

             if (propertyType == typeof(String))
             {
                 info.SetValue(this, (propertyType)thisPropertyValue, null);
             }
        } 
```

谢谢，斯特凡诺

            回答 #1

赞同：10

时间：2009-05-14T11:27:32.413

如果值已经是正确的类型，那么不：您不必做任何事情。如果它们可能不正确（int vs float 等），一个简单的方法可能是：

（针对空值调整的**编辑）**

```
Type propertyType = info.PropertyType;
if (thisPropertyValue != null)
{
    Type underlyingType = Nullable.GetUnderlyingType(propertyType);
    thisPropertyValue = Convert.ChangeType(
        thisPropertyValue, underlyingType ?? propertyType);
}
info.SetValue(this, thisPropertyValue, null); 
```

        sql - SQL 查询不使用可用索引 (SQL Server 2008)

ID：862785

赞同：2

时间：2009-05-14T11:18:34.713

标签：sql, sql-server-2008, indexing

我在 SQL Server 2008 中有下表：

```
Session
(
sessionid varchar(10)
startdate dateteime
enddate dateteime
--rest of the fields go here
) 
```

我创建了以下两个非聚集索引：

```
Inddex1: SessionID,startdate,enddate
Inddex2: startdate,enddate 
```

我有以下查询

```
select *
from session
where startdate>=@date1 and enddate <=@date2 
```

在执行此查询时，不使用这两个索引。查询计划仅显示表扫描。

现在我尝试删除 index1 并执行相同的 SP 仍然没有使用 index2。

有关如何使 SP 使用 index2 的任何线索？（请不要强制使用索引。）

            回答 #1

赞同：3

时间：2009-05-14T11:24:09.333

您是否在 SessionID 列上有聚集索引？在这种情况下，您的索引基本相同，因为任何非聚集索引都将隐式包含聚集键。

表中有多少行，值的基数/唯一性是什么？如果表足够小，则表扫描可能比索引查找 + 书签查找更有效地检索剩余列。

            回答 #2

赞同：1

时间：2009-05-14T11:27:55.017

首先，最好有一个主键用作唯一的聚集索引。

我不确定我是否明白这两个综合指数的意义。日期上的个人索引会不会更好？

            回答 #3

赞同：0

时间：2009-05-14T18:58:08.103

任何以“startdate”作为第一列的索引都可以帮助搜索 startdate>=@date1。任何以“enddate”为第一列的索引都可以帮助搜索“enddate <=@date2”。但是没有索引可以帮助两者。

并且假设几乎没有 enddates 具有相同的 startdate，则 (startdate,enddate) 上的索引并不比 (startdate) 上的索引有用。

因此，表扫描似乎是 Sql Server 的可靠选择。

即使您搜索 startdate>=@date1，进行表扫描仍然有意义。索引扫描将为您提供对必须解析的表的大量引用，这对于大量数据来说是不值得的。

应该使用索引的一个查询是：

```
select * from session where startdate = @date1 
```

无论如何，如果您认为自己比优化器更了解，您可以强制使用如下索引：

```
select *
from session with (index indexname)
where startdate>=@date1 and enddate <=@date2 
```

            回答 #4

赞同：0

时间：2009-05-14T11:25:29.937

不会使用复合索引，因为它不能用于优化该查询。您应该在每一列上创建一个单独的索引。

            回答 #5

赞同：0

时间：2009-05-14T11:30:42.500

您说查询处理器没有使用您的索引之一，但您没有告诉我们它*在*做什么。我假设一个表扫描......？

您的查询没有覆盖索引。因为您正在执行“select *”，所以查询处理器知道，它最多只能从您的索引中获取一个“书签”（任何一个索引都可以），然后它必须交叉引用该书签与表中的实际数据页。

有了这些知识，查询处理器将查看表中的数据量。如果那里的数据量很小（对于一些小的定义），那么它可能会决定扫描表比书签查找后的索引查找更有效。

考虑更改查询和/或索引，以便只选择索引完全覆盖的字段。那么我希望你能看到索引的使用情况。但这不一定是正确的做法——为很少使用的查询创建一个巨大的索引可能是错误的。

        sql - nvarchar(X) 占用了多少页面？

ID：862786

赞同：2

时间：2009-05-14T11:19:02.077

标签：sql, sql-server, database, nvarchar

nvarchar(X) 的存储要求是什么？

所以举个例子，如果一列中的值比X小很多，那么数据库页中实际存储了多少？

            回答 #1

赞同：3

时间：2009-05-14T11:24:20.020

nvarchar 列是存储在其中的 unicode 字符数的大小 + 开销。确切的大小可能取决于所使用的 SQL 服务器。

对于 Microsoft SQL 服务器，“存储大小（以字节为单位）是输入字符数的两倍 + 2 个字节”。请参阅：http: [//msdn.microsoft.com/en-us/library/ms186939.aspx](http://msdn.microsoft.com/en-us/library/ms186939.aspx)

            回答 #2

赞同：3

时间：2009-05-14T11:25:15.897

根据[微软](http://msdn.microsoft.com/en-us/library/aa276823.aspx)：

“存储大小（以字节为单位）是输入字符数的两倍。”

实际上，除此之外还有一个额外的 2 字节用作显示长度的开销。

        iis - IIS web.config 设置将 url 转换为参数

ID：862790

赞同：1

时间：2009-05-14T11:21:12.927

标签：iis

我在另一个项目上做了这个，现在我不能让它工作。

我需要在 web.config 中设置虚拟地址，以便 URL

[http://my.webspace.com/thesite/animal/dog/puppy](http://my.webspace.com/thesite/animal/dog/puppy)

实际上去页面/thesite/animal.html 参数中有dog 和puppy。

            回答 #1

赞同：0

时间：2009-05-14T11:29:32.207

您正在寻找一个 url 重写器。

MSDN 上有一个示例实现；[ASP.NET 中的 URL 重写](http://msdn.microsoft.com/en-us/library/ms972974.aspx)

        image - 如何轻松识别流是视频还是图片【ffmpeg库】

ID：862792

赞同：1

时间：2009-05-14T11:21:18.857

标签：image, video, ffmpeg, codec

拥有一个 AVStream 对象，我应该如何可靠地区分这是视频流还是图像流？

我试过使用持续时间。如果它是 0 - 我们有图像（系统约束允许这样的假设）。但事实证明，持续时间对图像具有特殊意义——存储在文件中的图像数量。

有什么技巧可以更可靠地检测图像流吗？

            回答 #1

赞同：0

时间：2009-06-03T12:20:34.970

起初猜测，我建议检查`AVStream->codec->pix_fmt`枚举（有关更多信息，请参阅`enum PixelFormat` [链接](http://cekirdek.pardus.org.tr/~ismail/ffmpeg-docs/ffmpeg-r_2libavutil_2avutil_8h.html#60883d4958a60b91661e97027a85072a "关联")）。您应该能够减少图像和视频的值。大多数视频（MPEG-2/4、MOV）通常以`PIX_FMT_YUV420P`格式存储它们的帧。

明天当我回到我的开发系统时，我会为你找到答案。

        c# - 使用 C# TCP 通道的双向通信

ID：862797

赞同：1

时间：2009-05-14T11:23:19.630

标签：c#, networking, tcp, remoting, genuinechannels

是否有本地方式来实现 Genuine Channels ( [http://www.genuinechannels.com](http://www.genuinechannels.com) ) 组件提供的功能？本质上，它提供与 .net 远程处理组件相同的功能，唯一的区别是 .net 远程处理是单向的。我正在寻找一些东西，作为客户端，我可以连接到服务器，然后将消息传递给服务器，然后让服务器能够将消息传递给客户端（只要服务器需要，客户端不需要调用功能）。

谢谢您的帮助！

            回答 #1

赞同：3

时间：2009-11-18T09:58:19.747

WCF 具有基于 TCP 的双向支持作为标准。  

（当 WCF 通过 TCP 做旁路通道时，来自一端的消息可以阻止来自另一端的消息。这是由于 WCF 旁路通道只允许两端发送消息，它不会创建两个独立的通道。单个 TCP 套接字。）

但是，WCF 没有通过**单个**HTTP 连接的双向支持，并且[WCF 的双向 HTTP 支持不应对防火墙](https://stackoverflow.com/questions/1700917/how-does-a-wcf-server-inform-a-wcf-client-about-changes-better-solution-then-si)。

            回答 #2

赞同：1

时间：2009-05-14T11:47:58.840

您要么必须切换客户端和服务器的角色（即谁在听谁在写），或者您可以在同一端口上打开第二个套接字来提供您的客户端的服务器。您的客户端的服务器会侦听来自您所称的服务器的消息，然后 [引发事件|队列|处理] 它接收到的消息。

        javascript - Lazyweb：IE7 如何在带有文本的 li 元素上执行 onMouseOver Javascript 有什么好笑的吗？

ID：862799

赞同：2

时间：2009-05-14T11:23:58.163

标签：javascript, internet-explorer, dom-events, internet-explorer-7, internet-explorer-6

我是 Ubuntu 用户，所以我不了解 Internet Explorer。我们有一个基于 Javascript 的下拉菜单，使用 li's 和 ul's 等等。它在 Firefox 和 IE6 中运行良好。但是在 IE7 中没有。看起来 IE7 不会调用该`onMouseOver`函数，除非您越过中间的文本，而不是文本和 li 元素边缘之间的空白区域（这是 IE6 所做的）。对此有任何提示吗？
2009 年 5 月 21 日更新 - 我不确定这里发生了什么，但我已经以另一种方式解决了我的问题。

            回答 #1

赞同：2

时间：2009-05-15T15:24:48.527

尝试将 display:block 添加到元素，使其“扩展”到父级的宽度，而不仅仅是元素的 textNode 的宽度。

            回答 #2

赞同：1

时间：2009-05-15T20:56:30.337

首先，你真的应该看看 IES4Linux：
 [http ://www.tatanka.com.br/ies4linux/page/Main_Page](http://www.tatanka.com.br/ies4linux/page/Main_Page)

它使 Linux 上的 Web 开发变得更加容易（尽管它不是一个“真正的”IE；为此，您需要一个虚拟机、Windows 安装以及所有相关的麻烦......但 IEs4Linux 是一个非常好的近似值）。

其次，你真的应该阅读：
 http: [//www.satzansatz.de/cssd/onhavelayout.html](http://www.satzansatz.de/cssd/onhavinglayout.html)

该页面对 IE 布局问题以及如何解决这些问题有很好的解释（正如 Jack 所建议的，display:block 是一种方法，但它可能会为您带来其他问题，正如该页面所解释的那样）。

祝你好运。

        windows - 如何获取上下文菜单选择的路径？

ID：862800

赞同：1

时间：2009-05-14T11:24:06.617

标签：windows, language-agnostic, contextmenu, windows-explorer, windows-explorer-integration

我在 Internet Explorer 的上下文菜单上有一个自定义条目。我想对选定的项目做一些事情，例如，运行一个程序以 ARGV[1] 接收该选择。

例如，如果我右键单击`whatever.zip`位于我桌面上的名为的文件，则应运行以下内容：my_binary path\to\desktop\whatever.zip

            回答 #1

赞同：2

时间：2009-08-14T21:00:19.497

你需要改变 YOUR_BINARY 和文件类型来做一些事情：

创建一个名为 RegisterYourBinary.reg 的文件，其内容为：

```
REGEDIT4

[HKEY_CLASSES_ROOT\.zip]
@="zipfile"

[HKEY_CLASSES_ROOT\zipfile\shell\DoSomething]

[HKEY_CLASSES_ROOT\zipfile\shell\DoSomething\command]
@="YOUR_BINARY \"%1\"" 
```

            回答 #2

赞同：2

时间：2009-08-24T08:58:10.713

调用可执行文件时，从资源管理器上下文菜单中添加 %L 作为参数。例如：myApp.exe %L

        ms-access - 在嵌入式连接字符串中指定 mdw 文件到另一个 Jet mdb：可能吗？

ID：862803

赞同：1

时间：2009-05-14T11:24:20.347

标签：ms-access, jet

我可以在 Jet (mdb) 查询中使用以下语法从另一个 .mdb 文件中选择数据：

```
SELECT * FROM [Database=C:\Tempo\AnotherDB.mdb;].MyTable 
```

或者

```
SELECT * FROM MyTable IN 'C:\Tempo\Another.mdb' 
```

我想扩展它以使用工作组安全性，即用户级安全性 (ULS)。我知道如何指定用户 ID 和密码，例如  

```
SELECT *
FROM
[Database=C:\Tempo\AnotherDB.mdb;UID=Admin;PWD=***;].MyTable 
```

但这仅在两个 mdb 共享相同的 mdw 时才有效。

我将如何指定用于保护其他 mdb 的 mdw 文件的路径？是否可以？如果不是，为什么不呢？

PS 我多年前在[这个 Access 新闻组帖子](http://groups.google.co.uk/group/microsoft.public.access.gettingstarted/browse_frm/thread/d0ec3f550268257d/)中问过这个问题，但没有收到任何回复。在 Access MVP 说服我这是不可能的之后，我放弃了；我不记得细节，但它与底层架构有关（工作区仅支持一个工作组文件，并且没有 Jet 查询实例化新工作区的机制？无论如何都是这样）。

[这个 SO 评论](https://stackoverflow.com/questions/850596/how-do-i-chain-linked-tables-in-access/854633#854633)激发了我的新兴趣。

            回答 #1

赞同：2

时间：2009-05-18T03:51:23.530

简短的回答是否定的。如果您使用源数据库，那么您不能指定另一个工作组，如果将其留空并指定一个有效的连接字符串，那么您将收到 ISAM 错误。（尽管该方法适用于其他数据库，例如 SQL Server。）示例（不起作用）：

```
SELECT *
FROM Table1 IN '' [Provider=Microsoft.Jet.OLEDB.4.0;Password=foo;User ID=Oorang;Data Source=C:\Users\Oorang\Documents\db1.mdb;Persist Security Info=True;Jet OLEDB:System database=C:\Users\Oorang\Documents\Security.mdw]; 
```

*但是*，您可以使用 ADO 来完成。我不确定您在获得查询后要完成什么，但这里是如何将其放入记录集中：

```
Option Explicit
Sub ADODBExample()
    Dim cn As ADODB.Connection
    Dim rs As ADODB.Recordset
    Set cn = New ADODB.Connection
    cn.Open "Provider=Microsoft.Jet.OLEDB.4.0;Password=foo;User ID=Oorang;Data Source=C:\Users\Oorang\Documents\db1.mdb;Persist Security Info=True;Jet OLEDB:System database=C:\Users\Oorang\Documents\Security.mdw"
    Set rs = New ADODB.Recordset
    rs.Open "SELECT * FROM Table1;", cn
    Debug.Print rs.GetString
    rs.Close
    cn.Close
End Sub 
```

值得注意的是，这两种方法最终都会对帐户凭据进行硬编码。A.) 提示用户提供上述信息，或 B.) 使用只读权限限制在最低限度的特殊帐户可能会更好。还建议您采取一些步骤来混淆代码中的信息，以及保护项目的密码实际上不会以任何方式混淆存储在文件中的文本。

            回答 #2

赞同：1

时间：2009-10-16T09:40:18.787

简单的回答：不可能。

            回答 #3

赞同：0

时间：2009-05-19T00:32:18.637

嗯...实际上你*可以*使用连接字符串。它最适用于 SQL Server。我只是展示了如果它与 Access 一起使用会怎样。我试图说明的一点是有一个有效的语法......只是 Access 不允许您使用 Access 执行此操作。（如果连接到另一种类型的数据库，它*会让*你这样做。）有趣的是，该功能与其他类型的数据库兼容，而不是 Access...当*它是 Access*时，但仍然如此。

尽管如果它们使用相同的 MDW 进行保护，那么您所要做的就是这样做，并且查询将在当前登录用户的上下文中运行：

```
SELECT *
FROM Table1 IN 'C:\Users\Oorang\Documents\db2.mdb'; 
```

            回答 #4

赞同：0

时间：2009-05-20T18:44:20.423

也许我应该重新整合和澄清:) 在你原来的问题的上下文中，答案是：你不能通过 SQL/Query Builder 来做，如果数据库是：既是 Access，又具有不同的 mdw。*但是*，如果两个数据库都是 Access 并且具有*相同*的mdw（如您稍后的评论所示），那么您*可以*通过 SQL/Query Builder 来完成。在那种特定情况下，您不会（不能）通过连接字符串执行此操作，您将按照下面的步骤 1-4 执行此操作，然后将步骤 5a 替换为 5b。

如果数据库都是 Access 并且具有*不同*的mdw，则指定不同工作组的唯一方法是使用连接字符串。*但是*，如果您尝试通过连接字符串属性（在下面的步骤 5a 中），SQL/查询生成器将引发 ISAM 错误。所以你*不能通过*查询生成器来做到这一点。您*可以*使用 ADO 使用 VBA 来完成此操作，如我之前发布的示例中所示。

请记住，查询构建器中的连接字符串属性适用于*非*Access 数据库，源数据库适用于具有*相同*（或没有）mdw 的 Access 数据库。对于具有*不同*mdws 的 Access 数据库，我知道的唯一解决方案是我之前发布的 VBA 解决方案。

现在关于直接在 SQL 中使用连接字符串。你*可以*这样做。但有一些警告：它不适用于其他 Access 数据库。如果您使用 SQL Sever dbo 表执行此操作，则必须编辑查询生成器生成的 SQL 以删除“dbo”。字首。

我认为最简单的方法是引导您完成我想说的内容。

1.  设置到*非访问*数据库的工作连接字符串。（我建议保持简单，只需使用 Excel 文件。）
2.  获得字符串后，在 Access 中打开查询生成器。
3.  关闭选择表对话框。
4.  按 Alt-Enter 打开查询属性。5a。在“Source Connect Str”中粘贴连接字符串。*5b。将路径粘贴到“源数据库”中的其他数据库。
5.  现在添加您的表并构建您的查询。
6.  转到 SQL 视图。看看建了什么。

但这几乎无关紧要，因为这种方法虽然对*非*Access数据库有效，*但对 Access 不起作用*。（我知道这有点令人沮丧。）

使用的连接字符串示例：

```
SELECT [Sheet1$].F1
FROM [Sheet1$] IN '' [Excel 5.0;HDR=NO;IMEX=2;DATABASE=C:\Users\Oorang\Documents\Book1.xls]; 
```

我真的不认为将 OLE DB 连接字符串放入 IN 数据库子句是有效的 ACE/Jet 语法。

仅供参考，您使用连接字符串，如上所示，但如果您使用 Source Db 属性，您将获得以下内容:)（我在发布之前测试了所有示例:)）

```
SELECT *
FROM Table1 IN 'C:\Users\Oorang\Documents\db2.mdb'; 
```

            回答 #5

赞同：0

时间：2013-08-19T01:49:42.060

*您可以在使用ACCESS*时使用用户定义函数从另一个工作组*读取*数据。 *对 Access 的限制是因为只有 Access 具有允许您使用用户定义函数的 VB 挂钩。它等同于使用 SQL Server 用户定义的函数——只有当你有 SQL Server 时才运行。

对只读的限制是因为 Access 不提供用户定义变量的挂钩，只提供用户定义的函数。

在 Access 中，在用户定义的函数中，您可以输入如下代码：

```
Dim dbe As DAO.DBEngine
Dim ws As DAO.Workspace
Dim db as DAO.database

    Set dbe = New DAO.PrivDBEngine
    dbe.SystemDB = "whatever.mdw"
    dbe.DefaultUser = "whatever"
    dbe.DefaultPassword = "whatever"

    Set ws = dbe.Workspaces(0)
    Set db = ws.opendatabase( ... ) 
```

在该 UDF 中，您可以使用该工作区从另一个数据库中读取数据，使用“whatever”工作组文件。

注意：如果您从选择查询中调用它，请将 dbe 和 ws 以及 db 和 rs 设为全局，这样您就不必在每次触摸记录中的字段时都打开文件。那么这个函数就有

```
if rs is empty then
   set dbe = ...
   ...
   set rs = db.openrecordset(...)
end if 
... 
```

注意：如果您真的想要，您可以将更新查询放入从 select 语句调用的 udf 中。如果您希望稍后在 thedailywtf.com 上看到它，请执行此操作。

PS：这是一个不寻常的解决方案。我在 2004 年左右，但你不会通过发布到“入门”来得到这个

# math - 如何提高我的数学技能以成为更好的程序员

> ID：862804
> 
>         
> 
> 赞同：9
> 
>         
> 
> 时间：2009-05-14T11:24:34.823
> 
>         
> 
> 标签：math

尽管我认为自己是 CompSci 课程中最好的程序员之一，但我对真正擅长数学的人着迷。我不得不说，每当我有数学类型的作业或考试时，我的方法都是非常公式化的，即如果我遇到一个看起来像 AI 的问题必须使用方法 B 并且结果应该看起来像 C，否则我就犯了错误。我只知道如何解决我修改的问题。

今年夏天我真的很想花一些时间来更好地理解数学问题及其解决方案，以便更深入地研究算法和计算复杂性领域。

有小费吗？

* * *

## 回答 #1

> 赞同：26
> 
>             
> 
> 时间：2009-05-14T11:30:10.847

听起来你有不错的数学技能——你了解机械原理，也许还有一点你所学知识背后的直觉——但你在**解决问题的能力方面**有点欠缺，尤其是因为你说“我只知道如何解决我[以前遇到的]问题”。

为了解决这个问题，我会看一下[**Project Euler**](http://projecteuler.net/)。解决这些问题肯定没有规定的方法，它们通常需要综合多个知识领域才能成功解决每个领域。你会得到你的蛋糕并吃掉它——成为一个更好的程序员/数学家*和*一个更好的一般问题解决者，通过了解如何使许多事情来解决一个特定的问题。您将更深入地了解看似完全不同的事物如何真正融合成一个统一的整体。（在许多数学领域尤其如此。）

最后，感谢您渴望成为更好的手艺实践者！如果每个人都表现出同样的雄心壮志，我​​不禁认为软件总体上会好很多。

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2009-05-14T11:44:04.293

最终，您需要“花一些时间在马鞍上”并挑选一些感兴趣的东西，然后学习如何使用它。我对游戏编程数学很感兴趣，并拿起了关于这个主题的 New Riders 书——现在不记得名字了。它有概念和练习，随着我的进步，我觉得我不仅理解了概念和理论，还理解了如何将其付诸实践。  

你可以看看其中一些相关的问题。那里有一些很好的答案。它们可能并不都适用于您的情况，但有些会适用。

[如何学习使用计算机视觉所需的数学知识？](https://stackoverflow.com/questions/824679/how-can-i-learn-the-math-necessary-for-working-with-computer-vision)

[如何学习数学符号？](https://stackoverflow.com/questions/720993/how-to-learn-mathematical-notation)

[https://stackoverflow.com/questions/651865/basic-math-book-for-a-programmer](https://stackoverflow.com/questions/651865/basic-math-book-for-a-programmer)

[以 R 为重点学习应用统计学](https://stackoverflow.com/questions/570029/learning-applied-statistics-with-a-focus-on-r)

[https://stackoverflow.com/questions/568899/user-friendly-math-textbooks](https://stackoverflow.com/questions/568899/user-friendly-math-textbooks)

[https://stackoverflow.com/questions/509488/recommendations-for-discrete-math-resources](https://stackoverflow.com/questions/509488/recommendations-for-discrete-math-resources)

[https://stackoverflow.com/questions/488502/best-language-to-program-some-math-free-fast-easy-cool-etc](https://stackoverflow.com/questions/488502/best-language-to-program-some-math-free-fast-easy-cool-etc)

[学习游戏编程（第 2 部分）（数学）](https://stackoverflow.com/questions/487352/learning-game-programming-part-2-math)

[面向 C/C++ 程序员的数学资源](https://stackoverflow.com/questions/466820/math-resources-for-c-c-programmers)

[https://stackoverflow.com/questions/420500/helpful-math-classes-for-programmers](https://stackoverflow.com/questions/420500/helpful-math-classes-for-programmers)

[数学、编程和学习](https://stackoverflow.com/questions/415537/math-programming-and-learning)

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T11:29:15.967

1.  练习练习练习

2.  使用大多数大学普遍提供的辅导服务（这通常是免费的，使用你的学费付费）。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T11:40:46.063

我会选择这些领域：

> 离散数学、线性代数、组合学、概率与统计、图论、数理逻辑。

这将使您掌握 CS 的大多数领域。如果你想进入特殊领域，你必须深入一些领域，尤其是：

```
Computer graphics -> Linear Algebra
Gaming -> Linear Algebra, Physics
Computer Linguistics -> Statistics, Graph Theory
AI -> Statistics, Stochastics, Logic, Graph Theory 
```

您当然会找到这些条目：在实践中更新我的数学以及[数学编程和学习](https://stackoverflow.com/questions/415537/math-programming-and-learning)[的博客](https://stackoverflow.com/questions/326680/blogs-to-freshen-up-my-math-in-practice)。他们会有一些建议。

除此之外，还可以给自己一些关于线性代数和逻辑的好基础书籍。Sedgewick 有一些关于基本数学概念的算法的好书。John Vince 有一个关于[计算机图形匹配概念的](https://rads.stackoverflow.com/amzn/click/com/1846280346)文章。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-07-09T06:01:20.020

实施。很多。

微积分和线性代数是一个不好的方法。数值方法会对你有所帮助（它们是为了在计算机中实现的），因为如果你能实现它们，你就可以通过一点努力来实现任何与数学相关的东西。

以下是我建议您开始寻找的一些主题。我已经实现了至少一种，它们不仅帮助我理解数学，而且帮助我理解如何实际编程一些困难的数学问题。

寻根。解决线性系统和其他矩阵操作（如 LU 分解和有效的行列式算法）。求解非线性系统。最小二乘法（连续和离散）。插值（主要是拉格朗日多项式，以及简单的矩阵插值。）数值积分（我认为这是最简单的...... Newton-Cotes、Chebyshev-Gauss、Gauss-Laguerre 等）数值常微分方程（RungeKutta 和多步法）

现在，一些非数字科目：

运筹学/线性规划/优化：从带矩阵表示法的 Simplex（我个人称之为 Complex）开始，然后尝试 BranchAndBound 并自己冒险进入动态规划。

数论有一些有趣的应用，特别是安全和密码学

自己实现一个 Vector3D 类。

此外，享受图表的乐趣，包括大多数最短路径算法和搜索。我认为这是最重要的数据结构。

如果您想挑战自己，请深入研究优化：队列理论。决策。蚁群优化。

我希望我给了你一些见解，并没有吓跑你！:)

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2010-10-16T06:08:52.060

实践，实践和实践就是答案。我的孩子有数学问题，我通过养成他几乎每天练习数学 30 分钟的习惯来克服这个问题，这还不到他玩 Wii 游戏时间的一半。这种做法是通过 www.ourflashcards.com 上的这个工具完成的。我不是在为这个工具做广告，我保证你会对它有同样的感觉。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T11:29:03.877

我认为这取决于。我喜欢阅读的一本书——从数学重温开始——是 Matt Buckland 的[Programming Game AI by Example](http://www.ai-junkie.com/books/toc_pgaibe.html)。

一个快速的谷歌制作了[这本书](https://rads.stackoverflow.com/amzn/click/com/1584503300)，但这又取决于你正在做什么或计划做什么。

我个人认为，对物理学和代数数学有很好的理解是不会出错的。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T11:36:08.103

让我想起了研究生时代。我很快了解到，提出一个数学问题并找到一个数值或蒙特卡罗解决方案比分析解决问题更容易（即没有计算机的数学教授在黑板上的方式）。这适用于数值问题，通常不会帮助你通过数理经济学考试。  

在计算机上做数学的另一种方法是使用 Mathematica 或类似的东西，但这使得许多数学问题很容易解决，你并没有真正学到任何东西。手工集成任意复杂的功能是火箭科学。在 Mathematica 中集成任意函数（分析！）并不比使用 calc.exe 更难

我建议重新发明轮子并使用您选择的大括号语言编写一个开源的、自包含的库，针对您最喜欢的应用数学分支，无论是素数还是线性编程。数学 API 库以极难编写的黑匣子而闻名，这种黑匣子无人能再触碰。一个例子是 Excel 中的统计插件，它看起来几十年来没有任何人改进过。写过数学库的人会学到很多东西。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T11:43:35.993

转到 www.projecteuler.net 网站。你会发现具有挑战性的问题。尝试解决它们，总有一天你会为自己感到骄傲。祝你好运

* * *

## 回答 #10

> 赞同：-1
> 
>             
> 
> 时间：2009-05-14T11:40:42.397

如果您想了解软件，请学习[类别理论](http://en.wikipedia.org/wiki/Category_theory)

# python - 您将如何在 python 中编写@debuggable 装饰器？

> ID：862807
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2009-05-14T11:26:37.500
> 
>         
> 
> 标签：python, decorator

调试时，我喜欢打印出一个函数的所有输入和输出（我知道我需要一个更好的 IDE，但请幽默，这可以用于错误报告）。所以，理想情况下，我希望拥有：

```
@debuggable
def myfunc(argA,argB,argC):
    return argB+1 
```

并使用全局变量打开或关闭调试。不，我猜你也不喜欢全局变量。

我能想到的最好的是：

```
DEBUG = True

def debuggable(func):
    if DEBUG:
        def decorated(*args):
            print "Entering ",func.func_name
            print "    args ",args
            ret = func(*args)
            print ret
            return ret
        return decorated
    else:
        return func

@debuggable
def myfunc(this,that):
    return this+that 
```

并运行：

```
>>> myfunc(1,3)
Entering  myfunc
   args  (1, 3)
4 
```

我该如何改进呢？

* * *

## 回答 #1

> 赞同：24
> 
>             
> 
> 时间：2009-05-14T11:52:07.330

使用调试器。严重地。装饰您想要跟踪的每个功能是一个坏主意。

Python[包含一个调试器](http://docs.python.org/library/pdb.html)，因此您不需要一个好的 IDE。

如果不想使用调试器，可以使用[跟踪功能](http://docs.python.org/library/sys.html#sys.settrace)。

```
import sys

@sys.settrace
def trace_debug(frame, event, arg):
    if event == 'call':
        print ("calling %r on line %d, vars: %r" % 
                (frame.f_code.co_name, 
                 frame.f_lineno,
                 frame.f_locals))
        return trace_debug
    elif event == "return":
        print "returning", arg

def fun1(a, b):
    return a + b

print fun1(1, 2) 
```

打印：

```
calling 'fun1' on line 14, vars: {'a': 1, 'b': 2}
returning 3
3 
```

[使用Winpdb](http://winpdb.org/)更容易：

它是一个**独立于平台**的图形 GPL Python 调试器，支持通过网络进行远程调试、多线程、命名空间修改、嵌入式调试、加密通信，并且比 pdb 快 20 倍。

特征：

*   GPL 许可证。Winpdb 是免费软件。

*   与 CPython 2.3 或更高版本兼容。

*   与 wxPython 2.6 或更高版本兼容。

*   独立于平台，并在 Ubuntu Gutsy 和 Windows XP 上测试。

*   用户界面：rpdb2 是基于控制台的，而 winpdb 需要 wxPython 2.6 或更高版本。

[![截屏](https://i.stack.imgur.com/qaXk2.jpg)](https://i.stack.imgur.com/qaXk2.jpg)

[（来源：[winpdb.org](http://winpdb.org/images/screenshot_winpdb_small.jpg)）]  

* * *

## 回答 #2

> 赞同：13
> 
>             
> 
> 时间：2009-05-14T12:27:37.730

我认为您所追求的并不是真正的调试装饰器，而是更多的日志装饰器。

使用[Python 的日志记录模块](http://docs.python.org/library/logging.html)可能很有意义，这样您就可以对日志记录本身进行更细粒度的控制。例如，您将能够输出到文件以供以后分析输出。

装饰器可能看起来更像：

```
 import logging

logger = logging.getLogger('TraceLog')
# TODO configure logger to write to file/stdout etc, it's level etc

def logthis(level):
    def _decorator(fn):
        def _decorated(*arg,**kwargs):
            logger.log(level, "calling '%s'(%r,%r)", fn.func_name, arg, kwargs)
            ret=fn(*arg,**kwargs)
            logger.log(level, "called '%s'(%r,%r) got return value: %r", fn.func_name, arg, kwargs, ret)
            return ret
        return _decorated
    return _decorator

@logthis(logging.INFO)
def myfunc(this,that):
    return this+that 

```

然后，如果您将记录器配置为输出到 stderr，您会看到：

```
 >>> logger.setLevel(logging.INFO)
>>> handler=logging.StreamHandler()
>>> logger.addHandler(handler)
>>> myfunc(1,2)
calling 'myfunc'((1, 2),{})
called 'myfunc'((1, 2),{}) got return value: 3 

```

* * *

## 回答 #3

> 赞同：10
> 
>             
> 
> 时间：2009-05-14T11:56:27.477

我同意 nosklo 使用调试器比编写自己的调试器要好得多。我将发布对您的代码的改进。但我仍然认为你应该听从 nosklo 的建议。

使用装饰器类使您的调试器更整洁：

```
class Debugger(object):
    enabled = False
    def __init__(self, func):
        self.func = func

    def __call__(self, *args, **kwargs):
        if self.enabled:
            print 'Entering', self.func.func_name 
            print '    args:', args, kwargs
        return self.func(*args, **kwargs)

Debugger.enabled = True

@Debugger
def myfunc(a, b, c, d):
    pass 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2021-01-19T19:21:39.003

这是我的调试装饰器。

```
import sys
import time

level = 0

def debug(f):
    def decorated(*args, **kwargs):
        global level
        sys.stderr.write("[debug] %s%s(%s)\n"
            % (' ' * level,
                f.__name__, ", ".join(
                    [str(a) for a in args]
                    + ["%s=%s" % (k, v) for (k, v) in kwargs.items()])))
        level += 1
        t0 = time.time()
        res = f(*args, **kwargs)
        t1 = time.time()
        level -= 1
        sys.stderr.write("[debug] %s= %r (%.9f s)\n"
            % (' ' * level, res, t1 - t0))
        return res
    return decorated 
```

这是对 Phil 的改进，因为：

*   它使用标准错误，因此在标准输出上保留有意义的输出，

*   它提高了递归调用的可见性

*   它测量调试功能的持续时间（没有要求，但也不是很大的障碍）

我使用`f.__name__`而不是`f.func_name`，因为前者在 python 3.8 中不再起作用。

我从约翰蒙哥马利那里得到了不要忘记对待 kwargs 的暗示。

我没有保留 DEBUG 全局变量，不是因为它的性质，而是因为我认为`@debug`在我想要调试/清理的位置放置/删除一行更简单。我不会提交它们，因为我将准时手动调试与日志记录区分开来。

小例子

```
@debug
def f(a, b):
    return a + b

@debug
def g(a, b, c):
    return f(a, b) * c

class C:
    @debug
    def m1(self, a, b):
        return a / b

    @classmethod
    @debug
    def m2(c, a, b):
        return b - a

    @staticmethod
    @debug
    def m3(a, b):
        return a * b

if __name__ == '__main__':
    f(1, b=2)
    g(1, 2, 3)
    C().m1(3, 4)
    C.m2(5, 6)
    C.m3(7, 8) 
```

输出

```
$./test.py >/dev/null
[debug] f(1, b=2)
[debug] = 3 (0.000001431 s)
[debug] g(1, 2, 3)
[debug]  f(1, 2)
[debug]  = 3 (0.000000477 s)
[debug] = 9 (0.000024557 s)
[debug] m1(<__main__.C object at 0x7f10a6465d90>, 3, 4)
[debug] = 0.75 (0.000000715 s)
[debug] m2(<class '__main__.C'>, 5, 6)
[debug] = 1 (0.000000477 s)
[debug] m3(7, 8)
[debug] = 56 (0.000000477 s) 
```

我知道真正的调试器是一个应该知道的工具，但是应该考虑到在编辑器中添加一个小装饰器的简单性。与任何工具一样，正确使用由上下文定义。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2020-06-08T20:17:46.293

您可以用作装饰器进行调试；(@debug)

```
def debug(func):
    import functools

    @functools.wraps(func)
    def wrapper_debug(*args, **kwargs):
        args_repr = [repr(a) for a in args]  # 1
        kwargs_repr = [f"{k}={v!r}" for k, v in kwargs.items()]  # 2
        signature = ", ".join(args_repr + kwargs_repr)  # 3
        print(f"Call {func.__name__}({signature})")
        value = func(*args, **kwargs)
        print(f"{func.__name__!r} return {value!r}")  # 4
        return value

    return wrapper_debug 
```

* * *

## 回答 #6

> 赞同：-1
> 
>             
> 
> 时间：2009-05-14T12:09:28.897

我赞同nosklo 所说的话。

需要注意的另一件事是您的函数有点危险：

```
b = myfunc(1,3) 
```

在这种情况下， "b" 是`None`，因为装饰函数不返回任何内容。

# asp.net - 从该页面打开弹出窗口时，下拉菜单从屏幕上消失

> ID：862816
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T11:29:06.153
> 
>         
> 
> 标签：asp.net, drop-down-menu

我在 IE6 中遇到下拉菜单问题。当我从页面打开一个弹出窗口时，主屏幕中的下拉菜单正在消失。IE7 不会发生这种情况。即使我打开弹出窗口，我仍然需要在主屏幕上看到下拉菜单。任何人都可以尝试解决这个问题吗？我正在开发 ASP.NET 中的页面。

# eclipse - LDAP 中的此代码未重命名属性

> ID：862817
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T11:29:10.867
> 
>         
> 
> 标签：eclipse, jakarta-ee, ldap, jndi, openldap

```
/**
 * ModifyRDN .java
 * Sample code to demostrate how ModifyRDN/ModifyDN works.
 */

import javax.naming.*;
import javax.naming.directory.*;

import java.util.Hashtable;

public class ModifyRDN 
{
    public static void main(String[] args) 
    {
        Hashtable env = new Hashtable();
        env.put(Context.INITIAL_CONTEXT_FACTORY,"com.sun.jndi.ldap.LdapCtxFactory");

        env.put(Context.PROVIDER_URL, "ldap://myLdapServer:389/dc=myDomain,dc=com");
        env.put(Context.SECURITY_AUTHENTICATION, "simple");
        env.put(Context.SECURITY_PRINCIPAL, "cn=directory manager");
        env.put(Context.SECURITY_CREDENTIALS, "password");

        /*
          Whether the old RDN attribute values are to be retained 
          as attributes of the entry, or deleted from the entry
        */
        env.put("java.naming.ldap.deleteRDN", "true");  // default is 'true'

        try {
            /* Create the initial context */
            DirContext ctx = new InitialDirContext(env);

            ctx.rename("cn=John Smith,ou=Sales,ou=People", 
                       "cn=John Cougar Smith,ou=Sales,ou=People");

            /* Close the context when it's done */
            ctx.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我的错误列表如下

```
javax.naming.NameNotFoundException: [LDAP: error code 32 - No Such Object]; remaining name 'cn=name1 name2,ou=mycompany'
    at com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3025)
    at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2946)
    at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2752)
    at com.sun.jndi.ldap.LdapCtx.c_rename(LdapCtx.java:700)
    at com.sun.jndi.toolkit.ctx.ComponentContext.p_rename(ComponentContext.java:708)
    at com.sun.jndi.toolkit.ctx.PartialCompositeContext.rename(PartialCompositeContext.java:266)
    at com.sun.jndi.toolkit.ctx.PartialCompositeContext.rename(PartialCompositeContext.java:255)
    at javax.naming.InitialContext.rename(InitialContext.java:395)
    at ModifyRDN.main(ModifyRDN.java:22) 
```

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T11:33:40.963

我现在不知道你的代码应该做什么，但异常告诉你你只输入

```
cn=John Smith,ou=Sales 
```

代替

```
cn=John Smith,ou=Sales,ou=People 
```

或不？

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-31T21:28:39.863

错误代码 32 是找不到对象，或错误的 DN 路径错误。您需要给它一个真实有效的 DN 才能使用。

您是否对输出进行了处理以使错误行：剩余名称 'cn=name1 name2,ou=mycompany' 更改了值，还是真正的错误代码？  

它看起来很奇怪，因为您在代码中没有其他地方引用该路径。我注意到您正在使用 dc=mydomain,dc=com 的域（可能是 AD）。

您可能可以摆脱相对路径，但我在重命名期间对此表示怀疑，您正在更改 RDN，重要的是要准确了解您正在（隐式）更改的位置。

# vb6 - 在 VB6 中使用什么 ftp 库

> ID：862819
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T11:29:14.593
> 
>         
> 
> 标签：vb6, ftp, internet-explorer-6, internet-explorer-7

我们在 VB6 中使用内置的 ftp。（拖放控制）

VB6 之后的 ftp dll 与 IE 相关联。从 IE6 升级到 IE7 后，DLL 发生变化，无法连接到受密码保护的 ftp。

从 VB6 可以使用哪些 ftp 库/dll？最好是开源的。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T11:37:45.523

任何 COM 库都可以解决问题，例如使用“Register for COM Interop”属性编译的 .NET dll。

[这段纯 .NET 代码](http://www.codeguru.com/csharp/csharp/cs_internet/desktopapplications/article.php/c13163)可能会为您完成工作。

# c++ - 如果在更改数据库时强制终止程序，SQLite数据库真的会保持原样吗？

> ID：862828
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-14T11:31:28.020
> 
>         
> 
> 标签：c++, database, sqlite, transactions

SQLite 文档[说它是 transactional](http://www.sqlite.org/transactional.html)。

链接文章中的解释指出，如果静态链接到其中的 SQLite C++ 代码的 C++ 程序被强制终止（例如，WinAPI 中的 TerminateProcess()）或在执行写入时崩溃，则数据库保持完整 - 要么完全更新或完全不变。

有没有人真正看到过这种可靠的工作？这是无条件地工作还是需要采取任何额外的措施？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-14T11:35:34.657

由于没有完全安全的方式来进行原子交易，因此总是有可能出现损坏状态。

然而，SQLite 在提交时会特别小心，即使程序崩溃也应该保持数据库完好无损。它比使用平面文件和 write-truncate-rename 循环更节省，后者是最近关于 ext4 的讨论中的问题。

有关如何完成此操作的参考，请参阅[Atomic Commit](http://sqlite.org/atomiccommit.html)。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T14:09:36.253

这也取决于您的日记模式。如果您正在记录文件并且数据库确实已损坏，则很有可能可以将其恢复。  

# wpf - 在代码中而不是 XAML 中设置 DataContext 有什么好处？

> ID：862829
> 
>         
> 
> 赞同：14
> 
>         
> 
> 时间：2009-05-14T11:31:45.930
> 
>         
> 
> 标签：wpf, xaml, data-binding, expression-blend, datacontext

在 WPF 中定义 DataContext 似乎有两种主要方法：

*   在这样**的代码中**：

App.xaml.cs（取自[WPF MVVM Toolkit 模板](http://www.codeplex.com/wpf/Release/ProjectReleases.aspx?ReleaseId=14962)）：

```
public partial class App : Application
{
    private void OnStartup(object sender, StartupEventArgs e)
    {
        // Create the ViewModel and expose it using the View's DataContext
        MainView mainView = new MainView();
        MainViewModel mainViewModel = new MainViewModel();
        mainViewModel.LoadCustomers("c:\\testdata2\\Customers.xml");
        mainView.DataContext = mainViewModel;
        mainView.Show();
    }
} 
```

*   或者像这样**在 XAML 中**：

Window1.xaml：

```
<DockPanel>
    <StackPanel
        HorizontalAlignment="Left"
        DockPanel.Dock="Top"
        Orientation="Horizontal">
        <StackPanel.DataContext>
            <local:CustomerViewModel />
        </StackPanel.DataContext>
        <TextBlock Text="{Binding Path=FirstName}" />
        <TextBlock Text=" " />
        <TextBlock Text="{Binding Path=LastName}" />
    </StackPanel>

    <StackPanel
        HorizontalAlignment="Left"
        VerticalAlignment="top"
        DockPanel.Dock="Top"
        Orientation="Horizontal">
        <ListBox ItemsSource="{Binding Source={StaticResource FileNames}}" />
    </StackPanel>

    <StackPanel
        HorizontalAlignment="Left"
        VerticalAlignment="top"
        DockPanel.Dock="Top"
        Orientation="Horizontal">
        <ComboBox
            ItemsSource="{Binding Source={StaticResource Directories}}"
            SelectedIndex="0" />
    </StackPanel>

    <StackPanel
        HorizontalAlignment="Left"
        VerticalAlignment="top"
        DockPanel.Dock="Top"
        Orientation="Horizontal">
        <StackPanel.DataContext>
            <local:SystemInformationViewModel />
        </StackPanel.DataContext>
        <TextBlock Text="{Binding Path=CurrentTime}" />
    </StackPanel>
</DockPanel> 
```

在 XAML 中定义 DataContext 的一个优点是**您的数据显示在 Expression Blend 设计模式中**，Expression Blend 允许您在 GUI 中做很多事情，例如从数据源中选择字段等[，如此处所示](http://tanguay.info/web/index.php?pg=codeExamples&id=176)。

我已经读过绑定**ADO.NET 对象不能在 XAML 中绑定**（尽管我不明白为什么您可以为它们编写一个可以从 XAML 绑定的最小包装器）。

奇怪的是，**WPF 团队在制作 WPF MVVM 模板时在代码中定义了 DataContext，**这很快就使得在 Expression Blend 中编辑视图变得不切实际，因为您的数据不会显示在设计模式中，而设计模式通常是布局的重要组成部分.

所以我认为在代码中而不是 XAML 中设置 DataContext**肯定有一些优势，有人知道它是什么吗？**

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2010-08-01T05:32:33.110

`d:DataContext`通过使用该属性，您可以（也许在 2009 年您不能）获得两全其美的效果。如果你还没有准备好，你就不需要任何那种[`ViewModelLocator`疯狂:-)](http://www.johnpapa.net/simple-viewmodel-locator-for-mvvm-the-patients-have-left-the-asylum/)

首先确保在根元素中定义了以下 XML 命名空间：

```
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
```

然后，您可以将以下属性添加到您的 xaml 中的元素：

`d:DataContext="{d:DesignInstance IsDesignTimeCreatable=True, Type=vm:CustomerInsightViewModel}"`

在您的 xaml 代码隐藏中：

```
 public CustomerInsightUserControl()
    {
        InitializeComponent();

        if (!DesignerProperties.IsInDesignTool)
        {
            DataContext = new CustomerInsightViewModel();
        }
    } 
```

然后在您的 ViewModel 中：

```
 public CustomerInsightViewModel()
    {
        if (IsInDesignMode)
        {
            // Create design time data
            Customer = new Customer() {
                FirstName=... 
            }
        }
        else {
            // Create datacontext and load customers
        }
    } 
```

不要错过，`IsDesignTimeCreatable=True`否则 Blend 不会实例化你的类

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-05-14T11:38:36.537

我不喜欢让 Expression Blend 尝试实例化我的数据对象的想法。

我通过代码设置 DataContext，我可以使用依赖注入来注入正确的对象、服务、提供程序或我用来查找代码的其他内容。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T11:33:34.427

将它放在代码隐藏中可以很容易地使用统一注入数据上下文。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:00:57.763

可能有一种解决方案，使用 DataObjectProvider 来掩盖数据在 XAML 之外实例化的事实。

它将说明 DataContext 的类型是什么，这应该足以让 Blend 获取属性。

我还没有尝试过，所以请谨慎对待，但这当然值得研究。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-12-04T15:25:04.660

请参阅 Rob 关于 Blend 中设计时数据的文章：[http ://www.robfe.com/2009/08/design-time-data-in-expression-blend-3/](http://www.robfe.com/2009/08/design-time-data-in-expression-blend-3/) 

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2011-03-31T00:43:10.300

还应该可以使用 ObjectDataProvider 使用 Unity 或此处暗示的其他 IOC 建立对象工厂...

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/1ff9e90e-302e-436e-bab3-ca4bad2b85af](http://social.msdn.microsoft.com/Forums/en/wpf/thread/1ff9e90e-302e-436e-bab3-ca4bad2b85af)

尤其是...

[http://www.codeproject.com/Articles/43806/WPF-Ninject-Dojo-The-Data-Provider.aspx](http://www.codeproject.com/Articles/43806/WPF-Ninject-Dojo-The-Data-Provider.aspx)

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2011-03-21T17:18:06.637

In my experience, it is best to design an interface layout against at least a sample of the data it will present. To do otherwise is to be blind to cheap insights and expensive oversights.

# ajax - AJAX TextBoxWatermarkExtender 导致它附加到的文本框变宽

> ID：862831
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T11:31:57.160
> 
>         
> 
> 标签：ajax, internet-explorer, watermark

这是问题测试用例。我有一些带有水印扩展器的文本框（多行，wrap=true）。

然后我输入一个简短的世界，然后是空格，然后是长单词（例如“short longgggggggggggggggggggggggggggggggggggggggg”，它消耗超过一行，以便出现滚动条）

每当我将焦点设置到另一个文本框，然后将其设置回带水印的文本框时，最后一个会自发地变宽，使所有页面看起来都很难看。

该问题仅在 IE 中出现，Firefox 执行相同的 OK。

没有水印的文本框和有水印但被禁用的文本框（属性“enabled=false”）也可以正常工作。

谷歌对这个问题保持沉默，我什至没有找到模糊的提示。显然 AJAX javascript 有问题，但如何解决呢？是否有解决方案，但要摆脱水印？

有人知道吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2010-03-19T10:05:52.953

最初，我也遇到了这个问题，并且看不到明显的修复方法。问题似乎与 CSS 相关。

在我的例子中，我有类似下面的伪代码。

```
<td>
    <asp:textbox id="tbDescription" multiline="true" cssClass="tbMultiline" ..other attributes excluded for brevity />
    <asptoolkit:TextboxWatermarkExtender targetControlId="tbDescription" WatermarkCSS="tbMultilineWatermark" message="blah blah blah" ..other attributes excluded.../>
</td> 
```

两个 CSS 类都指定了 100% 的宽度。但是，边界 TD 没有固定宽度，因此它会表现出您看到的加宽行为。

我通过将宽度强制为固定百分比来解决问题。

# sql-server - 如何停止 SQL Server 上的 CPU/耗时运行查询！

> ID：862834
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T11:32:43.993
> 
>         
> 
> 标签：sql-server

假设我在我的 sql 服务器上运行了数百个查询。现在我想通过自动停止这些查询来保护我的服务器免受错误查询。如何在不使用探查器和 KILL 命令的情况下在 SQL Server 2005 中实现此行为？

谢谢，萨尔曼·谢巴兹。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T11:45:21.153

您可以在这里推出自己的解决方案，或升级到 SQL 2008。

[使用资源调控器管理 SQL Server 工作负载](http://msdn.microsoft.com/en-us/library/bb933866(loband).aspx)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T13:35:26.100

基于以下内容创建一个新的存储过程：

```
sp_lock
sp_who2
beta_lockinfo  (http://www.sommarskog.se/sqlutil/beta_lockinfo.html) 
```

只需复制其中一个存储过程并对其进行编辑以查找“错误查询”，然后在 spid 上发出 KILL。创建一个每 N 分钟运行一次的作业并运行此存储过程。

警告，你的工作可能会发现自己是一个“错误的查询”并杀死自己。这种方法会浪费系统资源，但如果你真的想这样做，试试这个方法吧！

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T11:42:16.950

SQLServer 有查询执行超时，如果在给定时间内没有分配内存，则根据执行计划中的估计成本（它等待默认情况下估计的 25 倍）使查询超时。如果查询经常超时，则需要对其进行优化，或者您需要更多内存。

如果您正在查看已经运行的查询花费的时间比预期的要长，那么唯一真正的方法是使用分析器并确定问题所在。如果查询在生产系统中花费的时间过长，那么终止查询并不是一个好习惯。

这可能会提供[一些帮助](http://support.microsoft.com/kb/309256)

# iphone - 如何自动找到具有透明度的 PNG 内的边界坐标？

> ID：862835
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T11:32:54.693
> 
>         
> 
> 标签：iphone, objective-c, cocoa-touch, uikit

想象一下：我有一个显示泰迪熊或三角形的 PNG 图像。非二次元的东西。现在，我想知道，对于给定的行和方向（相对于 UIImageView 的坐标系的坐标），实际可见图像在哪个点开始。

示例：假设，在查看最后一行时，我需要知道泰迪熊的脚从左侧开始的位置。当然不只是 frame.origin.x，因为脚不是二次方的。它可能从 x=12 开始。

我会以某种方式遍历图像数据并检查像素：“嘿，你是透明的吗？”。如果是，我继续下一个。“嘿，你怎么了？透明的？”。直到我得到结果：“不！我完全不透明！”。然后我知道：“对！脚从 PNG 开始！这就是边界！”。

然后，我对每一行都这样做并获得某种路径坐标。就个人而言，我需要它来检测旋转 achsis 的完美点，因为我想让它在地板上真实地摆动。我不能只使用帧宽度和原点信息。这将是不现实的。

那么：有没有办法自省 UIImage 或图像的数据，以检查像素是否透明？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-14T15:36:17.107

我在网上找到[了本教程](http://www.markj.net/iphone-uiimage-pixel-color/)，您可以在其中获取屏幕上每个像素的 UIColor (ARGB) 值。也许如果您稍微调整一下，您可以将 UIImage 传递给它并获取您需要的所有值

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T12:11:45.413

使用 UIImage 似乎没有一种相当简单的方法来做到这一点。相反，我看到了两个更简单的选择。

理想情况下，如果您控制正在使用的图像，则可以预先计算所需的数据。然后，您可以重新格式化图像，使您感兴趣的点位于图像的中心（您可以轻松地在客户端计算只有宽度和高度），或者将坐标与图像一起发送。这使客户端不必为每个图像重新计算，这可能会加速您的应用程序并节省电池寿命。

或者，像[libpng](http://www.libpng.org/pub/png/libpng.html)这样的图像库可以静态编译到您的程序中。您可以加载图像，进行处理，然后将其卸载并将文件传递给 UIImage。只有您使用的函数会被链接，因此您可以避免添加过多的臃肿，因为可能会省略渲染例程。这确实有使您的软件依赖于第三方库的缺点。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-15T06:49:13.433

您可能会发现使用已知格式创建内存中的上下文，然后将图像渲染到内存中的上下文中会更容易。请注意，目标上下文可以是与原始图像不同的位图格式和颜色模式，旨在便于阅读。

或者，如果你是一个贪吃的惩罚者，你可以获取 UIImage 的 CGImage 属性，然后使用 CoreGraphics 函数确定像素格式，然后编写代码来解码像素格式数据......

最后一个选项，如果您控制正在使用的图像：从图像创建蒙版图像（1 位 alpha），然后使用它来确定边缘的位置。您可以在图形编辑器中轻松创建这样的蒙版，或者如果您正确设置绘图属性，您也可以通过将图像绘制到 1 位内存上下文中来实现。

# vb.net - 执行撤消/重做时的问题

> ID：862836
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T11:33:26.113
> 
>         
> 
> 标签：vb.net, gdi, undo-redo

我的代码有问题

单击撤消后，我无法在图像上绘图，我不知道为什么

这是我的代码

```
Imports System.Drawing.Graphics
Imports System.Drawing.Bitmap
Imports System.Drawing
Public Class FrmChild
    Dim Xstart As Short
    Dim Ystart As Short
    Dim Xend As Short
    Dim Yend As Short
    Dim BoolErasing As Boolean = False
    Dim BoolDrawing As Boolean = False
    Dim Image As New Bitmap(1500, 1200)
    Public GraphFun As Graphics = Graphics.FromImage(Image)
    Dim ErasingPen As New Pen(Drawing.Color.White, 3)
    Dim DrawingPen As New Pen(Drawing.Color.Black, 3)
    Private Sub PictureBox1_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseDown
        undo.Push(Image.Clone())
        redo.Clear()
        btnredo.Enabled = False
        If Not btnundo.Enabled Then btnundo.Enabled = True
        Xstart = e.X
        Ystart = e.Y
        If btnEraser Then
            BoolErasing = True
        ElseIf btnPencil Then
            BoolDrawing = True
        End If
    End Sub

    Private Sub PictureBox1_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseMove
        If BoolErasing Then
            GraphFun.DrawLine(ErasingPen, Xstart, Ystart, e.X, e.Y)
        ElseIf BoolDrawing Then
            GraphFun.DrawLine(DrawingPen, Xstart, Ystart, e.X, e.Y)
        End If
        Xstart = e.X
        Ystart = e.Y
        PictureBox1.Image = Image
    End Sub

    Private Sub PictureBox1_MouseUp(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseUp
        Xend = e.X
        Yend = e.Y
        BoolErasing = False
        BoolDrawing = False
        PictureBox1.Image = Image
    End Sub

    Private Sub Btnundo_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnundo.Click
        If Not btnredo.Enabled Then btnredo.Enabled = True
        redo.Push(Image.Clone())
        Image = undo.Pop()
        PictureBox1.Image = Image
        If undo.Count = 0 Then
            btnundo.Enabled = False
        End If
    End Sub

    Private Sub FrmChild_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        btnundo.Enabled = False
        btnredo.Enabled = False
    End Sub

    Private Sub btnredo_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnredo.Click
        If Not btnundo.Enabled Then btnundo.Enabled = True
        undo.Push(Image.Clone())
        Image = redo.Pop()
        PictureBox1.Image = Image
        If redo.Count = 0 Then btnredo.Enabled = False
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T11:49:04.030

那是因为您正在为特定的 Bitmap 对象创建一个 Graphics 对象。您只能使用它在该特定位图上绘制，当您将位图替换为撤消中的位图时，您仍在同一位图上绘图，但不再显示该位图。

与其创建一个 Graphics 对象并保留它，不如在需要时为当前位图创建一个，然后将其处理掉：

```
Private Sub PictureBox1_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseMove
   Using graphFun As Graphics = Graphics.FromImage(Image)
      If BoolErasing Then
         GraphFun.DrawLine(ErasingPen, Xstart, Ystart, e.X, e.Y)
      ElseIf BoolDrawing Then
         GraphFun.DrawLine(DrawingPen, Xstart, Ystart, e.X, e.Y)
      End If
   End Using
   Xstart = e.X
   Ystart = e.Y
   PictureBox1.Image = Image
End Sub 
```

# iphone - 在 Interface Builder 中设置 Nib Name 字段时出现异常

> ID：862839
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T11:33:51.103
> 
>         
> 
> 标签：iphone, uiviewcontroller, xib, key-value-coding

我正在尝试从 Interface Builder 中的 nib 加载视图控制器。我的基本设置是这样的：

MainWindow.xib 包含：所有常用的东西，应用程序委托实例，窗口等。

一个 UINavigationController，它有一个 UIViewController 作为它的根视图控制器。UIViewController 的 nib 名称设置为包含我的视图控制器的 xib 的名称。

我单独的 xib 中的视图控制器将文件所有者的类型设置为该视图的控制器类。

每当视图加载时（即应用程序启动时），就会引发异常，说明我的控制器类不符合键的键值编码[在此处插入随机变量名称]。大多数情况下，键是我为按钮指定的名称或我设置为 IBOutlet 的其他名称。

为什么会这样？我错过了什么？我尝试为这些变量中的每一个创建属性以生成符合 KVC 的访问器，但它仍然抛出异常。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-11-17T21:06:47.797

该应用程序试图将您的 UIViewController 视为 UINavigationController，但事实并非如此。

将根视图控制器子类化为 UINavigationController，而不是 UIViewController：

```
@interface rootViewController : UINavigationController { 
```

# oracle - 将一个字符替换（翻译）为多个

> ID：862843
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T11:34:24.190
> 
>         
> 
> 标签：oracle, plsql

我有一个字符串。在这个字符串中，我需要用选择的表示替换所有特殊字符（0-31 代码）。表示可能有不同的格式。可能是 \x??，或 \0???，或 10,13 -> \n，9 -> \t 并且所有其他字符都转换为 null。摘要 - 我需要找到所有具有 0-31 代码的符号并将它们全部替换为适当的表示，可以是零个或多个符号。

解决方案应该在 9.2 Oracle 中工作（这意味着没有正则表达式）并且应该非常快。

我知道 TRANSLATE 功能非常快。但是我不能用一个符号代替很多。我只能一一更换。

我的野蛮（且简单）的解决方案是为每个表示创建包含 32 个元素的列表。比选择的表示在列表上循环。在循环内部调用 REPLACE 函数。在这种情况下，我总是会调用 replace 32 次。我认为那很昂贵。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:05:20.810

你可以使用解码。文档可以在这里找到：

[http://www.techonthenet.com/oracle/functions/decode.php](http://www.techonthenet.com/oracle/functions/decode.php)

如果你在 pl/sql 过程或函数中使用它，你可以像这样使用它：

```
SELECT decode(your_string, 'var1', 'repl1', 'var2', 'repl2', 'varN', 'replN')
INTO l_decoded_string
FROM dual; 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T10:30:56.833

那是我的“野蛮人”，但有效的解决方案。它的主要部分：

```
res :=
    REPLACE(
        REPLACE(
            REPLACE(
                REPLACE(
                    REPLACE(
                        REPLACE(
                            REPLACE(
                                REPLACE(
                                    REPLACE(
                                        REPLACE(
                                            REPLACE(
                                                REPLACE(
                                                    REPLACE(
                                                        REPLACE(
                                                            REPLACE(
                                                                REPLACE(
                                                                    REPLACE(
                                                                        REPLACE(
                                                                            REPLACE(
                                                                                REPLACE(
                                                                                    REPLACE(
                                                                                        REPLACE(
                                                                                            REPLACE(
                                                                                                REPLACE(
                                                                                                    REPLACE(
                                                                                                        REPLACE(
                                                                                                            REPLACE(
                                                                                                                REPLACE(
                                                                                                                    REPLACE(
                                                                                                                        REPLACE(
                                                                                                                            REPLACE(
                                                                                                                                REPLACE(
                                                                                                                                    p_txt,
                                                                                                                                    CHR(0),
                                                                                                                                    '\0x00'
                                                                                                                                ),
                                                                                                                                CHR(1),
                                                                                                                                '\0x01'
                                                                                                                            ),
                                                                                                                            CHR(2),
                                                                                                                            '\0x02'
                                                                                                                        ),
                                                                                                                        CHR(3),
                                                                                                                        '\0x03'
                                                                                                                    ),
                                                                                                                    CHR(4),
                                                                                                                    '\0x04'
                                                                                                                ),
                                                                                                                CHR(5),
                                                                                                                '\0x05'
                                                                                                            ),
                                                                                                            CHR(6),
                                                                                                            '\0x06'
                                                                                                        ),
                                                                                                        CHR(7),
                                                                                                        '\0x07'
                                                                                                    ),
                                                                                                    CHR(8),
                                                                                                    '\0x08'
                                                                                                ),
                                                                                                CHR(9),
                                                                                                '\0x09'
                                                                                            ),
                                                                                            CHR(10),
                                                                                            '\0x0A'
                                                                                        ),
                                                                                        CHR(11),
                                                                                        '\0x0B'
                                                                                    ),
                                                                                    CHR(12),
                                                                                    '\0x0C'
                                                                                ),
                                                                                CHR(13),
                                                                                '\0x0D'
                                                                            ),
                                                                            CHR(14),
                                                                            '\0x0E'
                                                                        ),
                                                                        CHR(15),
                                                                        '\0x0F'
                                                                    ),
                                                                    CHR(16),
                                                                    '\0x10'
                                                                ),
                                                                CHR(17),
                                                                '\0x11'
                                                            ),
                                                            CHR(18),
                                                            '\0x12'
                                                        ),
                                                        CHR(19),
                                                        '\0x13'
                                                    ),
                                                    CHR(20),
                                                    '\0x14'
                                                ),
                                                CHR(21),
                                                '\0x15'
                                            ),
                                            CHR(22),
                                            '\0x16'
                                        ),
                                        CHR(23),
                                        '\0x17'
                                    ),
                                    CHR(24),
                                    '\0x18'
                                ),
                                CHR(25),
                                '\0x19'
                            ),
                            CHR(26),
                            '\0x1A'
                        ),
                        CHR(27),
                        '\0x1B'
                    ),
                    CHR(28),
                    '\0x1C'
                ),
                CHR(29),
                '\0x1D'
            ),
            CHR(30),
            '\0x1E'
        ),
        CHR(31),
        '\0x1F'
    ); 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-06-03T07:54:47.190

这可能会表现得一样好，并且更容易阅读和维护：

```
function trans (p_in in varchar2) return varchar2 is
   l_out varchar2(32767) := p_in;
begin
   if length(l_out) > 0 then
      for i in 0..31 loop
         l_out := REPLACE(l_out, CHR(i), '\0x' || to_char(i,'FM0X'));
      end loop;
   end if;
   return l_out;
end trans; 
```

# c# - 为什么在这个例子中使用浮点数让我比双打慢 2 倍？

> ID：862846
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-14T11:35:53.983
> 
>         
> 
> 标签：c#, .net, c++, optimization, floating-point

我最近一直在做一些分析，我遇到了一个让我发疯的案例。以下是一段不安全的 C# 代码，它基本上将源样本缓冲区复制到具有不同采样率的目标缓冲区。就像现在一样，它占用了每帧总处理时间的约 0.17%。我没有得到的是，如果我使用浮点数而不是双精度数，处理时间将提高到 0.38%。有人可以解释一下这里发生了什么吗？

**快速版本 (~17%)**

```
double rateIncr = ...
double readOffset = ...
double offsetIncr = ...

float v = ... // volume

// Source and target buffers.
float* src = ...
float* tgt = ...

for( var c = 0; c < chunkCount; ++c)
{
    for( var s = 0; s < chunkSampleSize; ++s )
    {
        // Source sample            
        var iReadOffset = (int)readOffset;

        // Interpolate factor
        var k = (float)readOffset - iReadOffset;

        // Linearly interpolate 2 contiguous samples and write result to target.
        *tgt++ += (src[ iReadOffset ] * (1f - k) + src[ iReadOffset + 1 ] * k) * v;

        // Increment source offset.
        readOffset += offsetIncr;
    }
    // Increment sample rate
    offsetIncr += rateIncr;
} 
```

**慢速版本 (~38%)**

```
float rateIncr = ...
float readOffset = ...
float offsetIncr = ...

float v = ... // volume

// Source and target buffers.
float* src = ...
float* tgt = ...

for( var c = 0; c < chunkCount; ++c)
{
    for( var s = 0; s < chunkSampleSize; ++s )
    {
        var iReadOffset = (int)readOffset;

        // The cast to float is removed
        var k = readOffset - iReadOffset;

        *tgt++ += (src[ iReadOffset ] * (1f - k) + src[ iReadOffset + 1 ] * k) * v;
        readOffset += offsetIncr;
    }
    offsetIncr += rateIncr;
} 
```

**奇数版(~22%)**

```
float rateIncr = ...
float readOffset = ...
float offsetIncr = ...

float v = ... // volume

// Source and target buffers.
float* src = ...
float* tgt = ...

for( var c = 0; c < chunkCount; ++c)
{
    for( var s = 0; s < chunkSampleSize; ++s )
    {
        var iReadOffset = (int)readOffset;
        var k = readOffset - iReadOffset;

        // By just placing this test it goes down from 38% to 22%,
        // and the condition is NEVER met.
        if( (k != 0) && Math.Abs( k ) < 1e-38 )
        {
           Console.WriteLine( "Denormalized float?" );
        }

        *tgt++ += (src[ iReadOffset ] * (1f - k) + src[ iReadOffset + 1 ] * k) * v;
        readOffset += offsetIncr;
    }
    offsetIncr += rateIncr;
} 
```

我现在只知道我什么都不知道

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-14T11:53:48.373

您是在 64 位还是 32 位处理器上运行它？我的经验是，在某些边缘情况下，如果对象的大小与寄存器的大小相匹配，CPU 可以对像这样的低级功能进行优化（即使您可能假设两个浮点数可以整齐地放入 64 位注册您可能仍然会失去优化优势）。如果您在 32 位系统上运行它，您可能会发现情况相反...

快速搜索和我能做的最好的引用是 C++ 游戏开发论坛上的几篇帖子（在我从事游戏开发的一年中，我自己注意到了这一点，但那是我唯一一次进行分析到这个水平）。[这篇文章](http://www.gamedev.net/community/forums/topic.asp?topic_id=506100)有一些来自 C++ 方法的有趣反汇编结果，这些结果可能适用于非常低的级别。

* * *

另一个想法：

MSDN 的[这篇文章介绍了在 .NET 中使用浮点数的许多内部细节，主要是为了解决浮点数比较的问题。](http://blogs.msdn.com/davidnotario/archive/2005/08/08/449092.aspx)其中有一段有趣的段落总结了处理浮点值的 CLR 规范：

> 该规范清楚地考虑了 x87 FPU。规范基本上是说，只要没有明确存储到强制位置（类或值类型字段），CLR 实现就可以使用内部表示（在我们的例子中，x87 80 位表示），这强制缩小。此外，在任何时候，IL 流都可能具有 conv.r4 和 conv.r8 指令，这将迫使窄化发生。

因此，当对它们执行操作时，您的浮点数实际上可能不是浮点数，而是它们可能是 x87 FPU 上的 80 位数字或编译器可能认为是优化或计算准确性所需的任何其他数字。如果不查看 IL，您将无法确定，但是当您使用双打时不会命中的浮点数时，可能会有许多代价高昂的演员表。遗憾的是，您无法像通过 C++ 中的 fp 开关那样在 C# 中定义浮点运算所需的精度，因为这会阻止编译器在对其进行操作之前将所有内容放入更大的容器中。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-14T11:38:36.630

也许在某个地方发生了一系列双浮点转换，占用了 CPU 时间。你能用 IL 反汇编器查看输出，看看它实际上在做什么吗？

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T12:05:03.057

您的计算可能会导致浮点值进入“非正常”状态，这在大多数 x86 处理器上效率非常低。非正规值非常小，以至于它们处于可能的最小浮点值的边缘。相比之下，这样的值将很适合双倍范围，因此在这种情况下计算是有效的。

我不能确定这是否适用于你，但它肯定解释了你所看到的行为。

[http://en.wikipedia.org/wiki/Denormal](http://en.wikipedia.org/wiki/Denormal)

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T14:12:38.820

了解正在发生的事情的一种方法是在代码中的这一点进入调试器并查看正在执行的实际 x86 指令。在不知道您的 C# 转换为机器代码的情况下，可能建议的大部分原因只是猜测。即使查看 IL 也可能不会告诉您太多信息。

如果您这样做，您可能需要先启动程序，然后再附加调试器，以免禁用 JIT 优化。毕竟，您要确保查看的是实际要运行的代码。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T15:05:12.547

考虑到您的大部分代码*没有*处理您在双精度和浮点数之间切换的 3 个变量，而且您谈论的是性能的相当大的变化，我想说类型和测试的微小变化足以改变您的缓存占用和/或寄存器使用情况。

我在这里对我的 32 位机器做了一些快速测试：

```
// NOTE: runnable - copy in paste into your own project
class Program
    {
        static int endVal = 32768;
        static int runCount = 100;
        static void Main(string[] args)
        {
            Stopwatch doublesw = Stopwatch.StartNew();
            for (int i = 0; i < runCount; ++i)
                doubleTest();
            doublesw.Stop();
            Console.WriteLine("Double: " + doublesw.ElapsedMilliseconds);
            Stopwatch floatsw = Stopwatch.StartNew();
            for (int i = 0; i < runCount; ++i)
                floatTest();
            floatsw.Stop();
            Console.WriteLine("Float: " + floatsw.ElapsedMilliseconds);
            Console.ReadLine();
        }

        static void doubleTest()
        {
            double value = 0;
            double incr = 0.001D;

            while (value < endVal)
            {
                value += incr;
            }
        }

        static void floatTest()
        {
            float value = 0;
            float incr = 0.001f;

            while (value < endVal)
            {
                value += incr;
            }
        }
    }
} 
```

结果是：

```
Double: 12897
Float: 10059 
```

反复测试表明 float 比 double 具有明显的优势。现在，这是一个小程序，所有这些变量都适合寄存器。

不幸的是，您提供的代码中有足够多的缺失部分，我无法很好地编译和阅读程序集以确切了解发生了什么，但从我的（快速）测试来看，这就是我的答案。

（对我来说，赠品是你的案例 #3 - 添加代码会改变足迹和缓存模式 - 我已经在各种语言中看到过几次这种奇怪）

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T11:56:15.947

double 到 float 的转换可能会减慢它的速度：

```
(float)readOffset 
```

尝试使 readOffset 也浮动。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-15T06:49:54.850

只是关于您的分析的一个简短问题。你写的都是百分比值。那么总时间，功能需要呢？

如果您在函数中使用浮点数并且在外部使用一些双精度数，则需要一些时间进行转换，这意味着内部函数本身的百分比时间会下降，因为函数本身的处理时间是恒定的并且整个过程需要更多时间。

希望我的写作有意义并且可以理解。但简而言之，如果您的整个过程需要更长的总时间，则给定函数的百分比值（整个时间保持不变，因为它不会改变）将会下降。

# c# - SQL Server：事件未引用任何表（Tuning Advisor 警告）

> ID：862848
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2009-05-14T11:36:17.603
> 
>         
> 
> 标签：c#, sql-server, linq-to-sql, performance, sql-server-profiler

我有一个用 C# 编写的应用程序，它使用 Linq2SQL 与 SQL Server 进行通信。有些查询运行有点（非常）慢，我认为它可能需要一些索引来加快速度。

但我真的不知道该怎么做，也不知道我应该或不应该做什么或在哪里做什么。所以我想我可以在这里问，但后来我发现了一个名为*Database Engine Tuning Advisor*的程序，我认为我可以先尝试一下。问题是我无法让它工作。可能是我不知道该怎么做，但我真的无法弄清楚这一点。据我所知，我已经按照帮助文件做了我应该做的事情。

1.  打开*SQL Server Profiler*。

2.  使用*Tuning*模板开始一个新的*Trace 。*
 **   启动我的应用程序并执行一些生成 SQL 查询的操作。
*   关闭我的应用程序。
*   停止追踪。
*   将跟踪保存为*跟踪文件*。
*   打开*数据库引擎优化顾问*
*   选择*File* as *Workload*并选择我之前保存的*Trace 文件。*
*   *在Select databases and tables to tune*下选择我的应用程序使用的数据库。
*   单击*开始分析*。* 

 *到目前为止，我认为事情进展顺利。但是当它在一段时间后完成时，我得到了这个：

[![进步](https://i.stack.imgur.com/SUUyl.jpg)](https://i.stack.imgur.com/SUUyl.jpg)

还有一个完全空的*推荐*页面。事件不引用任何表？这是什么意思（当然除了显而易见的：p）？我是否误解了这里的流程？到底是怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2010-11-15T16:56:51.347

如果您收到此错误，您可以检查另一件事。如果您像我一样是个笨蛋，您可能忘记从“常规”选项卡上的“用于工作负载分析的数据库”下拉菜单中选择适当的数据库

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-05-14T12:17:37.020

我认为你没有得到推荐的原因是因为你对你的数据库没有“SHOWPLAN”权限。授予您正在运行分析器的用户访问权限，然后重试。

此外，我还看到了一些“无效的对象名称”错误——确保运行分析器的用户对所有涉及的表具有适当的权限。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2011-02-03T17:34:03.410

我以自己 (dbo) 的身份运行分析器，但我的跟踪本身包含来自没有 SHOWPATH 访问权限的 IIS 应用程序池用户的查询。

因此，我授予该 IIS 应用程序池用户的 SHOWPATH 访问权限，然后它运行良好。

```
GRANT SHOWPLAN TO [COMPANYDOMIAN\IIS_APPUSER] 
```

# asp.net - RegularExpressionValidator 上检查文本框文本是否为 6 个或更多字符长的表达式是什么？

> ID：862851
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-14T11:37:37.617
> 
>         
> 
> 标签：asp.net, regex, validation

RegularExpressionValidator 控件检查要验证的文本框是否有 6 个或更多字符的格式是什么？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-14T11:41:51.897

`^.{6,}$`将在大多数正则表达式变体中执行此操作。让我验证它在这种特定情况下是否有效。

编辑：我想它有效。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-14T11:46:07.970

```
<asp:RegularExpressionValidator ID="MyTextBoxValidator" runat="server" 
   ControlToValidate="MyTextBox"
   ErrorMessage="Minimum length is 6"
   ValidationExpression=".{6}.*" /> 
```

# database - 有效存储和查询 GPS 坐标

> ID：862856
> 
>         
> 
> 赞同：13
> 
>         
> 
> 时间：2009-05-14T11:40:09.810
> 
>         
> 
> 标签：database, gps, coordinates

我想创建一个大型 GPS 坐标数据库，可以通过说“返回 [此坐标] 'n' 米内的所有坐标”来查询。

我需要它尽可能高效，因此循环遍历数据库中的所有坐标并计算坐标是否在“n”米内不是理想的解决方案。

有更简单的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-06-15T20:22:19.290

我通常使用纬度/经度进行此类查询。使用球面几何，您可以在特定点周围放置一个边界框。例如，假设您有一个点 (X,Y)，您希望 1 英里内的所有坐标（转换为米，我将作为练习留给读者）。您可以确定 (X-1,Y-1),(X+1,Y+1) 的边界框。然后使用 BETWEEN 运算符查询您的积分数据库（SELECT foo FROM bar WHERE LAT BETWEEN X-1 AND X+1 AND LON BETWEEN Y-1 AND Y+1）。然后你做你的细节距离计算来“圆角”你的边界框。

需要注意的是，经线在球体顶部更靠近，因此离赤道越远，结果就会出现偏差。但它仍然可以快速过滤您的结果集。

谷歌“大圆距离”进行计算。

**编辑：**每英里有 0.167469 度经度（实际上范围从 0.167469 到 0.014564），每英里有 0.014483 度纬度。所以你的边界框是`(lat - (miles * 0.014483), lon - (miles * 0.167469)), (lat + (miles * 0.014483), lon + (miles * 0.167469))`

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T11:49:18.460

SQL Server 2008 支持存储[空间数据](http://www.microsoft.com/sqlserver/2008/en/us/spatial-data.aspx)。我自己从未使用过它，但我知道您可以创建所需类型的查询。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T11:51:29.563

许多数据库系统具有处理地理空间数据的功能。

这是 SQL Server 2008、PosGIS 和 MySQL
 [http://www.bostongis.com/PrinterFriendly.aspx?content_name=sqlserver2008_postgis_mysql_compare之间的比较地理空间函数](http://www.bostongis.com/PrinterFriendly.aspx?content_name=sqlserver2008_postgis_mysql_compare)

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-06-15T20:13:51.367

GIS 数据库（例如带有 PostGIS 的 PostgreSQL）实际上为二维或三维区域搜索（[空间索引](http://en.wikipedia.org/wiki/Spatial_index)）提供了数据结构。最简单的一种是网格索引，然后是不同的搜索树（kd-tree、quad-tree），其中 R-tree 是最常用的（一种用于更多维度的广义 B-tree）。这些方法似乎足够了。

一个基本的网格索引（将空间划分为网格单元，只在附近的单元中搜索）可以很容易地实现，并且可以显着减少搜索时间。搜索树实现起来有点困难，但是对于很多编程语言和数据库（如 PostGIS 或 Geopandas 等）有很多开源实现。将它们用于此类问题通常会得到回报。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2010-02-19T06:32:23.383

跟进 Erich - 如果您选择使用 PostGIS (postgresql)，它是免费和开源的，您描述的查询是否非常快速，几乎可以在所有平台上运行，我是否提到它是免费的？

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2014-03-26T20:26:41.663

如果您想避免 GIS 扩展，我将[这篇文章](http://www.johndcook.com/blog/2009/04/27/converting-miles-to-degrees-longitude-or-latitude/)中的函数改编为 postgres sql：

```
create or replace function change_in_lat(miles numeric)
returns double precision as $$
with v as (select
    3960.0 as earth_radius,
    180 / pi() as radians_to_degrees
) select ( miles / earth_radius ) * radians_to_degrees from v;
$$ language sql
returns null on null input;

create or replace function change_in_long(lat numeric, miles numeric)
returns double precision as $$
with v as (select
    3960.0 as earth_radius,
    pi() / 180 as degrees_to_radians,
    180 / pi() as radians_to_degrees
) select (
    miles / (earth_radius * cos(lat * degrees_to_radians))
    ) * radians_to_degrees from v;
$$ language sql
returns null on null input; 
```

使用那些你可以做一些围绕正方形的查询：

```
--find all "a"s within 25 miles of any "b"
select * from a join b on (
a.gpslat between
    b.gpslat - change_in_lat(25) and b.gpslat + change_in_lat(25)
and a.gpslong between
    b.gpslong - change_in_long(b.gpslat::numeric, 25)
    and b.gpslong + change_in_long(b.gpslat::numeric, 25)
); 
```

如果您经常使用它，我相信将 between 语句转换为单个函数会很容易。不过，我从未对此进行任何实际的“半径范围内”查询。

对于更复杂的事情，您可能需要一个 GIS 扩展，就像其他答案所说的那样。PostGIS 很好，但我发现很多特定于 gis 的功能很难正确使用，除非您使用边界框索引，否则如果您的数据集足够大，您的空间查询可能需要一天的时间。但是对于所有花哨的东西来说，复杂性的权衡绝对是值得的，比如以 geojson 格式输出数据等。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T11:56:54.370

如果您可以选择 DB，我会推荐与 rwwilden 相同的数据库，并使用具有空间数据功能的 SQL 2008。如果您不能使用该解决方案或包含空间查询的解决方案，您可以查看 Microsoft 自己的关于[Hierarchical Triangular Mesh](http://research.microsoft.com/apps/pubs/default.aspx?id=64531)的论文并实现这些东西。MSSQL '05 的 SDK 还附带了一个开箱即用的 HTM 完整解决方案，因此您可以将其转换为您正在使用的任何平台。

编辑：

这是解释 HTM 和实现的更详细的[文档。](http://msdn.microsoft.com/en-us/library/aa964138(SQL.90).aspx)您当然可以转换为您选择的数据库。您可以在 SDK for 2005 中找到完整 HTM 实现的源代码。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2020-01-26T13:41:24.540

我们可以使用 Geohash 算法。

geohash 的美妙之处在于它的构造方式。简而言之，geohashes 是一种网格空间索引，其中世界被递归地划分为越来越小的网格，每增加一个位。（[https://www.mapzen.com/blog/geohashes-and-you/](https://www.mapzen.com/blog/geohashes-and-you/)）

[![在此处输入图像描述](https://i.stack.imgur.com/M4bdB.jpg)](https://i.stack.imgur.com/M4bdB.jpg)

您可以在 Wikipedia ( [https://en.wikipedia.org/wiki/Geohash](https://en.wikipedia.org/wiki/Geohash) ) 上找到它的描述。

我包括了下一个视频，以便快速直观。

[https://www.youtube.com/watch?v=UaMzra18TD8](https://www.youtube.com/watch?v=UaMzra18TD8)

[https://youtu.be/mx1mMdHBi5Q?t=1955](https://youtu.be/mx1mMdHBi5Q?t=1955)

在下一篇文章中，您可以找到针对 AWS 数据库 DynamoDB 的这种算法的实现。
[https://read.acloud.guru/location-based-search-results-with-dynamodb-and-geohash-267727e5d54f](https://read.acloud.guru/location-based-search-results-with-dynamodb-and-geohash-267727e5d54f)

请为 James Beswick 的文章鼓掌。

# c++ - 在 C++ 中可以使用哪些其他有用的类型转换

> ID：862858
> 
>         
> 
> 赞同：14
> 
>         
> 
> 时间：2009-05-14T11:40:43.553
> 
>         
> 
> 标签：c++, casting

C++ 带有四个内置的强制转换。

1.  `static_cast`

2.  `dynamic_cast`

3.  `const_cast`

4.  `reinterpret_cast`

不是说皱眉`C (style*)cast`。

另外[boost](http://www.boost.org)提供了一个[lexical_cast](http://www.boost.org/doc/libs/release/libs/conversion/lexical_cast.htm)，是否还有其他有用的转换，您使用或希望存在？

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2009-05-14T14:49:43.147

我最喜欢和最喜爱的演员是`implicit_cast`。只有当类型可以被隐式转换时它才会成功。

用于从某种类型转换为`void*`或从某个派生类转换为基类（如果您想选择重载函数或构造函数的特定实例）或安全地添加 const 限定和任何其他您真正需要隐式转换的场景发生甚至`static_cast`是太强大了。

另请阅读[C++ 如何选择要调用的重载](https://stackoverflow.com/questions/385556/how-does-c-pick-which-overloaded-function-to-call/394742#394742)。

[`boost/implicit_cast.hpp`](http://www.boost.org/doc/libs/1_39_0/boost/implicit_cast.hpp). 如果需要，您也可以将其添加到您的代码集合中

```
template<typename T> struct identity { typedef T type; };
template<typename Dst> Dst implicit_cast(typename identity<Dst>::type t)
{ return t; } 
```

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2009-05-14T11:56:17.307

还有看起来像函数或构造函数调用的**函数样式转换。**这解决了对类的构造函数调用，以及（更一般地）对所有其他类型的 C 风格转换。

例子：

```
int x = int(1.0);       // equals `(int)1.0`
string s = string("x"); // equals call to constructor 
```

对构造函数的调用*也*可以使用显式转换来实现（除了 C 风格的转换，它也可以工作）：

```
string s = static_cast<string>("x"); // is the same as above! 
```

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-05-14T11:51:21.903

值得记住的是，构造函数也可以被视为强制转换，编译器将使用它来执行类似强制转换的转换。例如：

```
class Person {
   public:
      Person( const std::string & name );
   ...
}; 
```

Person 构造函数执行从 string -> Person 的转换：

```
Person p = Person( "fred" ); 
```

当需要将字符串转换为人时，编译器将使用它：

```
void PrintPerson( const Person & p ) {
   ...
} 
```

编译器现在可以将字符串转换为 Person：

```
string name = "fred";
PrintPerson( name ); 
```

但请注意，它不能这样做：

```
PrintPerson( "fred" ); 
```

因为这需要编译器构造一个转换链。

**编辑：**我已经发布了关于转换主题的后续问题 - 请参阅[C++ 隐式转换](https://stackoverflow.com/questions/867462/c-implicit-conversions)。

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-05-14T12:02:40.677

如果您使用 shared_ptr，您可能想要使用 boost 指针强制转换 (boost::static_pointer_cast,...)。它们也可用于标准指针。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2009-05-14T13:42:38.190

一个真正有用的 boost cast 是 operator（实际上是函数）是 numeric_cast(number);

这将检查您正在投射的数字是否在目标类型的范围内。

例如

```
long long big_number = ....

int num = numeric_cast<int>(big_number);  // throws an exception is big_number is too big 
```

[http://www.boost.org/doc/libs/1_39_0/libs/numeric/conversion/doc/html/boost_numericconversion/improved_numeric_cast__.html](http://www.boost.org/doc/libs/1_39_0/libs/numeric/conversion/doc/html/boost_numericconversion/improved_numeric_cast__.html)

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2009-05-14T12:02:35.247

还有一个可怕的[union_cast](https://stackoverflow.com/questions/75538/hidden-features-of-c/432333#432333)。

这很糟糕，因为严格来说它是 UB，但是如果您知道自己在做什么，它对于将指向成员函数的指针`void*`来回转换很有用，并非所有编译器都允许使用 reinterpret_cast 执行此操作。

但还是最好避免..

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T18:26:15.463

[ACE](http://www.cs.wustl.edu/~schmidt/ACE.html)有一个[truncate_cast](http://www.dre.vanderbilt.edu/Doxygen/Stable/ace/classtruncate__cast.html)。它对于优化如下代码非常有用：

```
foo_t bar = ...;
short baz;

if (bar > SHORT_MAX)
  baz = SHORT_MAX;
else
  baz = static_cast<short> (bar); 
```

这可以替换为：

```
foo_t bar = ...;
short baz = ACE_Utils::truncate_cast<short> (bar); 
```

根据**foo_t**的底层类型，**truncate_cast**将完全优化**if()**语句，并解决由比较有符号和无符号类型产生的编译器诊断问题。在编译时通过模板元程序选择走哪条路。

理想情况下，如果正确使用兼容类型，则不需要这样的强制转换/截断，但有时在使用遗留接口时无法绕过不兼容的类型，尤其是在低级操作系统调用时。

请注意，很容易滥用这种强制转换，这就是为什么作者明确声明它是供内部使用的，并且不应使用强制转换来解决编译器诊断问题。

* * *

## 回答 #8

> 赞同：2
> 
>             
> 
> 时间：2013-07-25T09:33:06.013

`memcpy_cast`是严格符合标准的，因此是*[类型双关语](http://en.wikipedia.org/wiki/Type_punning)*的安全便携替代方案：

```
#include <cstring>

template<typename To, typename From>
inline To memcpy_cast(From x)
{
    // Constraints on types from STLSoft's union_cast:
    //  (1) Sizes must be the same.
    //  (2) Both must be of POD type.
    //  (3) There must be either a change of const/volatile,
    //                        or a change of type, but not both.
    //  (4) Both must be non-pointers, or must point to POD types.
    // 
    // Here checking only (1):
    STATIC_ASSERT(sizeof (To) == sizeof (From));

    To ret;
    std::memcpy(&ret, &x, sizeof ret);
    return ret;
} 
```

（`STATIC_ASSERT`一些编译时断言宏（或 C++11 的`static_assert`）在哪里，约束来自[STLSoft 的 union_cast.hpp](http://www.stlsoft.org/doc-1.9/union__cast_8hpp-source.html)）。

然后你可以尝试像

```
uint32_t u = 0x1234ABCD;
//float f = *(float*)&u; // unsafe
float f = memcpy_cast<float>(u); // safe 
```

（这是另一个实现：[dbg 的 memcpy_cast.hpp](https://bitbucket.org/edd/dbg/src/ba09622e9726/src/memcpy_cast.hpp)。）

（编辑：另外，[Boost.SIMD](http://nt2.metascale.fr/doc/html/the_boost_simd_library.html)有一个`bitwise_cast`内部使用 memcpy_cast。）

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2010-02-05T23:09:13.033

在[Boost.Lambda](http://www.boost.org/doc/libs/1_42_0/doc/html/lambda.html)中定义了对应的 C++ 强制转换运算符，它们在从简单的各种[lambda 表达式](http://www.boost.org/doc/libs/1_42_0/doc/html/lambda/le_in_details.html)中非常有用：

```
vector<int> v1; // signed indices
v1.push_back(0);
v1.push_back(1);
v1.push_back(2);

vector<size_t> v2(v1.size()); // unsigned +1 incides 
std::transform(v1.begin(), v1.end(), v2.begin(),
(boost::lambda::ll_static_cast<size_t>(boost::lambda::_1) + 1)); 
```

使用运算符要复杂得多`ll_dynamic_cast`，例如，[过滤序列中特定（派生）类型的对象](https://stackoverflow.com/questions/774293/how-to-create-an-iterator-over-elements-that-match-a-derived-type-in-c/774870#774870)：

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-05-17T12:47:46.317

Visual Studio 6 允许[右](http://www.devx.com/tips/Tip/5696)值绑定到常规引用（不要误认为[C++0x 的右值引用](http://en.wikipedia.org/wiki/C%2B%2B0x#Rvalue_reference_and_move_semantics)）。当移植到 Visual Studio 2003 时，我们的代码依赖于这种非标准行为的所有地方都必须更改。

**例如定义**

```
bool get_string(char* buff, int& length)
{
    if (myStrLength >= length)
    {
        length = myStrLength;
        return false; // Nobody used exceptions in 1998 :o)
    }
    strcpy(buff, myStr);
    return true;
} 
```

**用法：**

```
char buff[1024]; 
get_string(buff, sizeof(buff)); // Assumes size is sufficient 
```

为了使端口更快，我们编写了以下内容`lvalue_cast`。

```
// Danger, only use this on function arguments that will not be stored
template <class T>
T& lvalue_cast(const T& t)
{
    return const_cast<T&>(t);
} 
```

由于临时在范围内直到下一个[序列点](http://en.wikipedia.org/wiki/Sequence_point)（下一个分号）并且右值不是真的`const`，所以这是很好定义的（至少在我的理解中）。

# python - ImageField 的 url 方法返回一个非 URL 值 - Django

> ID：862860
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T11:40:47.390
> 
>         
> 
> 标签：python, django, url, django-models

我正在 Windows 上使用 Django 进行开发。我有一个带有图像域的模型，并使用表格来填充它。图片上传没有问题。当我尝试通过编码在模板中显示上传的图像时，会出现问题：

```
<img src ='{{object.image.url}}'/> 
```

（object是相关模型的一个实例，image是image字段的名称）

但是，图像不会显示，因为 url 方法返回的不是 URL，而是这样的路径：

c:/pp/pm/static/image/xyz.png

我应该怎么做才能使它成为一个真正的 URL？

编辑：

MEDIA_ROOT 和 MEDIA_URL 设置如下：

```
MEDIA_ROOT = 'C:/pp/pm/static/'
MEDIA_URL = '/static/' 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2011-06-05T00:25:10.107

我有同样的问题。在模型声明中，我将“upload_to”参数值从绝对路径更改为相对路径，这解决了问题。

# payment-gateway - ACH 交易处理

> ID：862865
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T11:41:59.697
> 
>         
> 
> 标签：payment-gateway

是否有任何可用的 ACH 支付网关服务，例如信用卡支付网关，我们可以立即获得成功/失败（资金不足/无效的帐户详细信息）。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T16:02:58.133

不会。银行不会实时处理，因此直到处理截止后才会确定透支。即便如此，不同的银行也有不同的政策；如果帐户未冻结或正在关闭，有些人可能会主动支付透支。可能要到一个或多个工作日后才能做出决定，最终决定通常由人做出。由于汇票通常是交叉清算的（比如网关使用 Fifth Third，汇票在 Wells Fargo），因此网关甚至不知道帐户详细信息是否正确。在银行之间共享此类信息是非法的。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2016-10-13T15:32:43.270

您可以查看[Dwolla 的 ACH API](http://www.dwolla.com/ach/ach-api)。如上所述，您无法获得实时状态更新，因为 ACH 交易不会立即发生。但是，在 API 中，传输被标记为已处理、待处理、已取消、失败或已回收。[开发人员文档中有关传输端点的](https://docsv2.dwolla.com/#transfers)更多信息。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2014-05-28T16:17:36.977

最接近实时银行账户验证的方法是使用 PIN 借记网络，并且通常被称为“支票验证”。有一家名为 Forte Payments 的支付网关提供商向商家和 API 开发人员提供这项服务。曾几何时，他们的产品被称为“ATM 验证”，覆盖了美国约 60% 的支票账户

# c# - 动态控制 C# 上的验证器噩梦

> ID：862875
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-14T11:45:22.933
> 
>         
> 
> 标签：c#, asp.net, validation, dynamic-controls

我需要将RequiredFieldValidator 和RegularExpressionValidator 添加到动态生成的tablecell 中的动态创建的文本框中，该文本框位于从Master 创建的页面的内容区域中的Web 用户控件内。

正如您可能猜到的那样，问题在于尝试动态设置 ControlToValidate 属性以查看我动态创建的文本框。

经过一番研究，现在的代码：

*   创建一个面板（我听说 ControlToValidate 和 Validator 必须在同一个容器中）。这最初是一个占位符，但正在尝试下面列出的建议。

*   创建文本框并设置其 ID。

*   将文本框添加到面板。

*   创建RequiredFieldValidator。

*   设置 ControlToValidate 的 ID。我尝试使用的值：

    *   控件ID

    *   控件的 ClientID

    *   以服务器附加到 Web 用户控件的子控件的添加文本为前缀的控件 ID

    *   客户端 ID 以相同方式修改

    *   控件的名称（有机会）

    *   以服务器添加到控件名称的文本为前缀的控件名称

    *   使用定制的递归 FindControl 方法尝试将新的 Control 对象转换为 Textbox，然后使用其 ID 和 ClientID

    *   控件的 UniqueID

    *   与上面详述的前缀相同的修改

*   将验证器添加到面板。

*   将面板添加到表格单元中。

不用说，我仍然无法说服验证器“看到”它应该验证的控件，而且我完全没有解决问题的新方法。

编辑：进一步的侦探工作使我发现在 page_load 事件完成之前页面没有问题。构建页面的代码执行完毕后，服务器似乎出现了问题。我开始怀疑我是否真的将控件添加到命名容器中太晚了，而不是太早了。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T11:54:49.493

创建一个包含文本框和两个验证器的用户控件怎么样？然后你可以`ControlToValidate`像往常一样通过 Visual Studio 设置，然后动态地将这个新控件动态添加到你的表格单元中。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:38:46.797

我在类似的情况下使用了中继器：

```
<table>
<colgroup>
    <col style="white-space: nowrap;" />
    <col />
    <col />
</colgroup>
<asp:Repeater ID="InputFields" runat="server">
    <ItemTemplate>
        <tr>
            <td class="labelCell">
                <asp:Label id="FieldName" runat="server" Font-Bold="True" Text='<%# Eval("Name") %>'></asp:Label>:
            </td>
            <td class="fieldCell">
                <asp:TextBox id="FieldData" runat="server" autocomplete="off" />
            </td>
            <td class="errorCell">
                <asp:RequiredFieldValidator ID="FieldNameRequiredValidator" runat="server" CssClass="errorValidator" ErrorMessage='<%# Eval("Name") %> is required' 
                    ControlToValidate="FieldData" Display="Dynamic">&nbsp;&nbsp;&nbsp;</asp:RequiredFieldValidator>
                <asp:RegularExpressionValidator ID="FieldNameRegexValidator" runat="server" CssClass="errorValidator" ErrorMessage='A valid <%# Eval("Name") %> is required'
                    ControlToValidate="FieldData" Display="Dynamic" ValidationExpression='<%# Eval("RegEx") %>'>&nbsp;&nbsp;&nbsp;</asp:RegularExpressionValidator>
            </td>
        </tr>
    </ItemTemplate>
</asp:Repeater> 
```

转发器创建一个“命名容器”，以确保 FieldData 控件 ID 在容器中是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-09-01T13:43:05.277

我为网格内的那个 texbox 生成一个 texbox 和 requiredfield 验证器。

我首先尝试使用 textbox 的 clientID 作为 requiredfield 验证器的 controltovalidate 属性，这给出了无法找到控件错误，而不是我将 texbox 的 ID 作为 requiredfield 验证器的 controltovalidate 属性，它对我有用。下面的代码返回一个 RegularExpressionValidator 用于给出的控件方法的第一个参数。

```
private RegularExpressionValidator GetRegValidator(string itemId, string regExp)
    {
        RegularExpressionValidator _regVal = new RegularExpressionValidator();
        _regVal.ControlToValidate = itemId;
        _regVal.ValidationExpression = regExp;
        _regVal.ErrorMessage ="PropertyRegexDoesNotMatches";
        _regVal.Text = "*";
        _regVal.SetFocusOnError = true;
        _regVal.EnableClientScript = true;
        _regVal.ID = string.Format("{0}Validator", itemId);
        return _regVal;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T11:56:48.177

这是一个例子：

在设计时使用 ID =“PanelHolder”将 Panel 控件添加到您的页面（或者您可以动态添加）。

然后动态创建控件并将它们添加到该面板，如下所示：

```
var myTextbox = new TextBox() {ID="myTextBox"};
PanelHolder.Controls.Add(myTextBox);
var validator = new RequiredFieldValidator() {ControlToValidate="myTextBox",Display=ValidatorDisplay.Dynamic,ErrorMessage="Required field"}
PanelHolder.Controls.Add(validator); 
```

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T12:02:56.620

只是几个问题：

*   将页面发回的控件是否会导致验证？（如果是这样，请确保它不在单独的验证组中）

*   你确定没有验证发生吗？如果您不设置验证器的 ErrorMessage 属性，则可能很容易认为它没有做任何事情。（而且我看不到您将其设置在您的列表中）

**编辑：**

如果你正在做这样的事情：

```
 Panel pTest = new Panel();

        TextBox tb = new TextBox();
        for (int i = 0; i < 2; i++)
        {
            tb.ID = "tbDynamicTextBox" + i;
            pTest.Controls.Add(tb );
            RequiredFieldValidator rfv = new RequiredFieldValidator();
            rfv.ControlToValidate = tb.ID;
            rfv.ErrorMessage = "Empty textbox";
            pTest.Controls.Add(rfv);
        }
        cell.Controls.Add(pTest); 
```

然后你会得到一个错误，因为只有一个文本框实例将被添加到控件集合中。如果您移动 ' TextBox tb = new TextBox(); ' 部分在循环里面，它会没事的。

我不确定这是否是您的问题，但值得一试。

# html - 使 ABC 有序列表项具有粗体样式

> ID：862878
> 
>         
> 
> 赞同：58
> 
>         
> 
> 时间：2009-05-14T11:46:32.850
> 
>         
> 
> 标签：html, css, html-lists

我有一个类型设置为“A”的 html 有序列表

```
<ol type="A">...</ol> 
```

因此，每个列表项将以 A、B、C 等开头。

我想将 A、B、C 字母设置为粗体。我试过设置 font-weight:bold; 通过css，但它没有用。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：90
> 
>             
> 
> 时间：2009-05-14T11:58:48.703

有点作弊，但它有效：

HTML：

```
<ol type="A" style="font-weight: bold;">
  <li><span>Text</span></li>
  <li><span>More text</span></li>
</ol> 
```

CSS：

```
li span { font-weight: normal; } 
```

* * *

## 回答 #2

> 赞同：49
> 
>             
> 
> 时间：2013-01-20T11:59:37.353

作为替代和卓越的解决方案，您可以在 before 元素中使用自定义计数器。它不涉及额外的 HTML 标记。CSS 重置应该与它一起使用，或者至少从`ol`元素 ( `list-style-type: none, reset margin`) 中删除样式，否则该元素将有两个计数器。

```
<ol>
    <li>First line</li>
    <li>Second line</li>
</ol> 
```

CSS：

```
ol {
    counter-reset: my-badass-counter;
}
ol li:before {
    content: counter(my-badass-counter, upper-alpha);
    counter-increment: my-badass-counter;
    margin-right: 5px;
    font-weight: bold;
} 
```

一个例子：http: [//jsfiddle.net/xpAMU/1/](http://jsfiddle.net/xpAMU/1/)

* * *

## 回答 #3

> 赞同：10
> 
>             
> 
> 时间：2009-05-14T11:59:42.353

您确定您正确应用了样式，还是没有其他样式表干扰您的列表？我试过这个：

```
<ol type="A">
<li><span class="label">Text</span></li>
<li><span class="label">Text</span></li>
<li><span class="label">Text</span></li>
</ol> 
```

然后在样式表中：

```
ol {font-weight: bold;}
ol li span.label {font-weight:normal;} 
```

它加粗了`A`,`B`等`C`而不是文本。

（在 Opera 9.6、FF 3、Safari 3.2 和 IE 7 中测试过）

* * *

## 回答 #4

> 赞同：7
> 
>             
> 
> 时间：2015-08-03T18:45:17.453

我知道这个问题有点老了，但它仍然出现在很多谷歌搜索中。我想添加一个不涉及编辑样式表的解决方案（在我的情况下，我没有访问权限）：

```
<ol type="A">
  <li style="font-weight: bold;">
    <p><span style="font-weight: normal;">Text</span></p>
  </li>
  <li style="font-weight: bold;">
    <p><span style="font-weight: normal;">More text</span></p>
  </li>
</ol>
```

* * *

## 回答 #5

> 赞同：7
> 
>             
> 
> 时间：2016-04-27T13:53:14.050

你也可以这样做：

```
ol {
  font-weight: bold;
}

ol > li > * {
  font-weight: normal;
} 
```

所以你的 HTML 中没有“样式”属性

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2018-06-29T05:41:58.897

你也可以这样做：

`<ol type="A" style="font-weight: bold;">`

```
<li style="padding-bottom: 8px;">****</li> 
```

这是初学者的简单代码。

此代码已在“Mozilla、chrome 和 edge..

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2022-02-04T16:06:07.663

另一个更短的解决方案是利用`li::marker`现在[广泛支持](https://developer.mozilla.org/en-US/docs/Web/CSS/::marker)的. 像这样：

```
ol li::marker {
        font-weight: bold;
} 
```

# java - Java USB 库

> ID：862880
> 
>         
> 
> 赞同：28
> 
>         
> 
> 时间：2009-05-14T11:46:51.913
> 
>         
> 
> 标签：java, api, usb

我可以使用一个好的 Java USB API 吗？我尝试了 JUSB，但它似乎不起作用。它也很旧，自 2001 年以来没有更新。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2010-12-27T19:30:06.297

大约两年前，我成功使用了[Java libusb](http://libusbjava.sourceforge.net/wp/)。它的优点是您不受 HID 等特殊设备类的限制。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2014-01-09T04:04:53.260

我使用[了 usb4java](http://usb4java.org/)。在 Windows 上，我安装了 WinUSB 驱动程序，它似乎可以使用 Google：usb4java 优点是高级 USB api。因此该程序实际上可以移植到不同的库。（不仅是usb4java）

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T11:50:41.187

试试[这个](https://launchpad.net/libusb4j)。它使用[JNA](https://github.com/twall/jna/)，因此它可能比任何基于 JNI 的库都更“可破解”

# java-me - 中国、日本、台湾、香港的体面的 J2ME 开发者社区？

> ID：862881
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-14T11:46:54.957
> 
>         
> 
> 标签：java-me, mobile

我们正在评估将我们的 J2ME 应用程序从英国/英国移植到远东市场的潜在投资机会。我们无法找到有关手机、平台等的任何信息，尤其是有关支持的网络功能和政策的运营商/运营商政策。

我们有很多问题，所以我认为最好的起点是一些**开发者社区网站**，但我们找不到任何既是英文又是最新的。如果你知道任何请开火！

我想最重要的问题是**构建一个广泛使用 TCP 套接字的 J2ME midlet 并期望能够将其移植并在这些市场中分发它是否已完成？**很多手机都支持 J2ME 吗？运营商会允许开箱即用的套接字吗？以及我现在能想到的所有其他问题......道歉，但我们不知道从哪里开始！

*   手机（型号、市场份额、分辨率、J2ME 支持）

*   运营商（市场份额、围墙政策、数据资费）

*   分发（聚合器、应用商店、运营商门户）

*   测试室（每个手机、每个运营商、本地化）

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:28:38.413

J2ME 几乎在所有地方都得到了支持。我已经将一些应用程序移植到韩语和希伯来语，所以我的建议是：

*   与您想进入的市场的服务提供商取得联系，他们可以为您提供大量关于手机和分销、数据资费等信息；

*   TCP 连接在我见过的每一个支持 J2me 的设备上都可用，但是在移植到目标手机之前，您应该确认它们；

*   在本地化您的应用程序时您应该非常小心，糟糕的翻译会让您的用户讨厌您

如果您愿意，我会在想到更多建议时编辑此答案。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-15T16:33:36.507

如何咨询这些区域内的 VM 供应商，例如：Aplix 或 Esmertec？

找到一个使用英语而不是母语的社区并不容易。

# 我来自台湾，AFAIK，这里的大多数手机都包含 J2ME。但在日本市场，DOJA 是他们使用的配置文件。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-15T10:53:47.447

Some operators will not allow you tcp sockets at all but let HTTP connections through.

# xslt - 如何比较 XSLT 中两个节点的值

> ID：862884
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-14T11:47:15.407
> 
>         
> 
> 标签：xslt, xslt-2.0

我是 XSLT 的新手。我需要帮助比较 XML 中两个节点的值。

我的示例 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<G1Export xmlns="">
    <AgencyGroup xmlns="">
        <Agency xmlns="">
            <RecordType xmlns="">RecordType</RecordType>
            <OrgId xmlns="">123</OrgId>
        </Agency>
    </AgencyGroup>
    <BranchGroup xmlns="">
        <BranchCode xmlns="">
            <OrgId xmlns="">123</OrgId>
        </BranchCode>
    </BranchGroup>
</G1Export> 
```

在上面的 XML 文件中，我需要将`OrgId`节点下的`<AgencyGroup>`节点值与节点下的值进行比较`<BranchGroup>`。

我尝试使用该`compare()`方法，但结果为 1。实际结果必须为 0（等于）。我正在使用 XSLT 2。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-14T12:00:36.920

我不知道您需要比较这些值的上下文，但`=`操作符就是您要查找的内容。这将比较它们，但可能不是您需要的上下文：

```
<xsl:if 
  test="/G1Export/AgencyGroup/Agency/OrgId = /G1Export/BranchGroup/BranchCode/OrgId"> 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T11:59:13.413

为什么不`AgencyGroup/Agency/OrgId = BranchGroup/BranchCode/OrgId`呢？对于额外的肛门，`AgencyGroup/Agency/OrgId/text() = BranchGroup/BranchCode/OrgId/text()`。

如果您需要差异，请考虑`AgencyGroup/Agency/OrgId - BranchGroup/BranchCode/OrgId`

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T11:59:08.890

```
//G1Export/compare(AgencyGroup//OrgId, BranchGroup//OrgId) 
```

结果 = 0

已编辑：xslt 1 中有 2 个错误。对于 brnchOrgId，您使用的是 AgencyGroup 而不是 BranchGroup 2。对于 compare()，您应该有 =0 而不是 ='0'

更正了xslt：

```
<xsl:template match="/">
        <xsl:element name="PICRESPONSE" namespace="fieldpoint.com/namespaces">
            <xsl:for-each select="//G1Export/AgencyGroup">
                <xsl:if test="count(.) &gt; 0">
                    <!--org_id variable-->
                    <xsl:variable name="orgId" select="string(/G1Export/AgencyGroup/Agency/OrgId)"/>
                    <xsl:element name="EXPORTRESPONSE" namespace="fieldpoint.com/namespaces">; <xsl:for-each select="//G1Export/BranchGroup">
                            <xsl:if test="count(.) &gt; 0">
                                <xsl:variable name="brnchOrgId" select="string(/G1Export/BranchGroup/BranchCode/OrgId)"/>                               
                                <!--Put the Branch information inside the current agency node only if branch belong to current Agency-->
                                <xsl:if test="compare($brnchOrgId,$orgId)=0">asda
                                    <xsl:value-of select="'orgid is same as branchogid'"/>
                                </xsl:if>
                            </xsl:if>
                        </xsl:for-each>
                    </xsl:element>
                </xsl:if>
            </xsl:for-each>
        </xsl:element>
    </xsl:template> 
```

输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<PICRESPONSE xmlns="fieldpoint.com/namespaces">
    <EXPORTRESPONSE>; orgid is same as branchogid</EXPORTRESPONSE>
</PICRESPONSE> 
```

希望这可以帮助。

# php - 将 smarty 默认变量修饰符与 gettext 一起使用

> ID：862889
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T11:48:24.733
> 
>         
> 
> 标签：php, zend-framework, smarty, gettext

我目前正在将 smarty 与 zend 框架一起使用，并且我已经设置 smarty 以通过以下方式使用 gettext：

```
{gettext text="resource-identifier"} 
```

这可以正常工作，但是在尝试将其与 smarty 默认变量处理程序一起使用时遇到了问题。我想做这个：

```
{$somevar|default:gettext text="resource-identifier"} 
```

但这只会打印“gettext”。关于如何做到这一点的任何建议。甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T13:42:59.327

对于 smarty 来说，像这样链接函数的结果是不可能的。您需要查看 gettext 是否可以将其结果分配给变量（assign=varname 参数），或者自己编写（此时只需编写一个新的修饰符，例如 default_gettext:'resource-id'）

在假设的分配中，它看起来像：

```
{gettext text="resource-id" assign="myvar"}
{$somevar|default:$myvar} 
```

在新的修饰符中，它看起来像：

```
{$somevar|default_gettext:"resource-id"} 
```

# ruby - 如何使我的数据库记录自动

> ID：862892
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T11:49:51.207
> 
>         
> 
> 标签：ruby

有什么办法可以让我在数据库中的记录自动进行。例如，如果在 24 小时内未参加请求的服务，我希望向帮助台发送一条消息，而无需单击任何内容。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T11:55:20.957

从技术上讲，这取决于您使用的数据库。如果数据库支持它，您可以设置一个计划作业来扫描记录并识别延迟服务并向帮助台发送电子邮件。

如果数据库不支持计划任务，那么您可以在计时器上设置客户端作业来执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-20T18:01:28.060

这是一个非常简单的 Ruby 后台作业处理程序：

codeforpeople.rubyforge.org/svn/bj/trunk/README

容易安装，也容易使用。相当轻巧。它使用 SQL 后端来管理并发。如果需要，可以同时在多台机器上运行。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T12:10:33.840

这就是应用软件的用途。

当应用程序保存到数据库时，应用程序也会发送一封电子邮件。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T12:16:13.623

解决此问题的传统方法是安排工作（有太多方法 [1] 可以做到这一点，我无法在不了解您的服务器操作系统、DBMS 以及您必须在服务器）。

您计划的工作会定期检查数据库中未参加的记录，然后采取适当的措施，例如向支持团队发送电子邮件。

[1] 只是为了不让这个问题完全没有答案；一些 DBMS（例如 SQL Server）内置了作业调度工具。您可以在服务器上运行 Windows 服务来执行此操作。如果没有，您可能会考虑在您自己的一台服务器上运行 Windows 服务来访问该网站（这是一种浪费带宽的好方法）。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T12:29:32.577

使用像[这样](http://rufus.rubyforge.org/rufus-scheduler/)的调度程序，[在 rufus 站点上](http://rufus.rubyforge.org/)找到。例如，您可以将其编程为每小时运行一次，并使其无需人工干预即可完成工作。

我自己是一家 Java 商店，我一直在使用[quartz](http://www.quartz-scheduler.org/)。如果您可以适应[jruby](http://jruby.codehaus.org/) ，它是非常好的和可用的。

我从不喜欢基于数据库或操作系统的解决方案，因为您可能无法控制它们并且经常被要求在不同的环境中运行。

# .net - 如何安装 XamlPad？

> ID：862898
> 
>         
> 
> 赞同：14
> 
>         
> 
> 时间：2009-05-14T11:51:59.640
> 
>         
> 
> 标签：.net, wpf, xamlpad

这听起来很愚蠢，因为每个人似乎都理所当然地认为 XamlPad 就在*那里，*包括[关于 XamlPad 的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms742398.aspx)。

但是我已经安装了 Visual Studio 2008，AFAIK 安装了 .NET 3.5 SDK（怎么可能不呢？），它应该包括 XamlPad。但是我的“开始”菜单或 PC 上的任何地方都没有 XamlPad.exe。我什`dir /s xamlpad.exe`至从命令行完成了一个，以确保问题不在于 Windows 索引服务没有像往常一样看到它面前的内容。没有骰子。

我想向我的同事演示一些 XAML，但如果我能提供帮助，我不想在 Visual Studio 中使用该死的 XAML 设计器。如何获取 XamlPad 的副本以安装到我的 PC 上？

我正在运行 Vista 64 位，如果这有什么不同的话（它不应该，但你永远无法分辨）。

* * *

## 回答 #1

> 赞同：19
> 
>             
> 
> 时间：2009-05-14T11:58:50.403

在[MSDN](http://msdn.microsoft.com/en-us/library/ms742398.aspx)页面的底部有这样的评论：

> VS2008没有安装开始菜单快捷方式
> 
>   
>   
> 
> 程序二进制文件安装在 Program Files\Microsoft SDKs\Windows\v6.0A\bin

我刚刚检查了我的机器，它就在那里。

对于较新版本的 Windows 和 Visual Studio，SDK 版本将为 7 或 8。我机器上的最新版本（带有 Visual Studio 2013 的 Windows 8）是`v8.1A`64`Program Files (x86)`位版本的操作系统。因此，您需要查看：

> C:\Program Files (x86)\Microsoft SDKs\Windows

并查看您安装了哪个版本。

该 MSDN 页面上还有一个指向作者博客上新版本的链接。

* * *

## 回答 #2

> 赞同：11
> 
>             
> 
> 时间：2009-05-14T12:04:05.697

[Kaxaml](http://www.kaxaml.com/)是 XAMLPad 的一个很好的替代品，甚至是它的一个很好的替代品。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-05-14T11:55:12.830

尝试[XamlPadX](https://blogs.msdn.microsoft.com/llobo/tag/XamlPadX/)。最新版本是[XamlPadX4.0](https://blogs.msdn.microsoft.com/llobo/2008/08/25/xamlpadx-4-0/)。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2010-01-12T01:04:03.210

你是对的，XamlpadX 和 Kaxaml 都不支持事件（处理程序在哪里？）或类引用（没有代码隐藏）。

您可能错过了这些编辑器的用途——它们在处理“纯”xaml 时非常有用——在大型项目/解决方案之外找出样式、模板等。一旦完成并令您满意，您就可以将 XAML 重新合并到项目中。

# asp.net - ASP.NET 安全角色和权限

> ID：862904
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-05-14T11:54:03.113
> 
>         
> 
> 标签：asp.net, asp.net-membership

我对 ASP.NET 安全模型感到满意，据此可以根据用户的角色允许/拒绝访问 web.config 中的用户，例如

```
<system.web>
  <authorization>
    <allow roles = "Admin" />
  </authorization>
</system.web> 
```

但是我想做的是给管理员用户一组权限，然后可以检查这些权限，例如具有“可以打印文档”、“可以删除文档”等权限的管理员用户

这种事情是开箱即用的，还是我需要走自定义路线？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-14T12:02:14.687

[您可以按照此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms998336.aspx)中的说明使用 Azman 。

但是我不喜欢 Azman 的很多地方，所以我推出了自己的作为对 RoleProvider 的补充（管理权限到角色的映射的附加表、API 和管理工具）。

我的自定义实现非常简单：

*   角色和权限之间的MN关系。

*   测试给定主体是否具有给定权限的 API“HasPermission”。这只是遍历所有角色并检查角色是否具有给定的权限。出于性能原因，映射权限角色使用 ASP.NET 缓存进行缓存。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T11:56:10.800

它不是开箱即用的。但是，如果您想要更细化，为什么不使用像“CanPrint”、“CanDelete”这样的细化角色而不是像“Admin”这样的更宽泛的角色呢？

如果他们想要您在评论中指出的容器类型场景，您可以设置一个自定义 IPrincipal - 在身份验证之后以及每个新请求中，您查看用户的角色成员身份（“Admin”、“Public”等），然后覆盖 IPrincipal 上的 IsInRole。[你可以在这里](http://www.codeproject.com/KB/web-security/AspNetCustomAuth.aspx)找到一个例子

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2013-11-14T08:12:49.657

我发现[这篇](http://www.jacopretorius.net/2010/01/permission-based-access-in-asp-net-mvc.html)文章给出了一个很好的例子

```
[Flags]
public enum Permissions
{
View                 = (1 << 0),
Add                  = (1 << 1),
Edit                 = (1 << 2),
Delete               = (1 << 3),
Admin                = (View | Add | Edit | Delete)
}

public ActionResult Authenticate(string username, string password)
{
var user = authenticationService.Authenticate(username, password);
Session["User"] = user;

return RedirectToAction("Somewhere", "Else");  
}

public class PermissionsAttribute : ActionFilterAttribute
{
private readonly Permissions required;

public PermissionsAttribute(Permissions required)
{
    this.required = required;
}

public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    var user = filterContext.HttpContext.Session.GetUser();
    if (user == null)
    {
        //send them off to the login page
        var url = new UrlHelper(filterContext.RequestContext);
        var loginUrl = url.Content("~/Home/Login");
        filterContext.HttpContext.Response.Redirect(loginUrl, true);   
    }
    else
    {
        if (!user.HasPermissions(required))
        {
            throw new AuthenticationException("You do not have the necessary permission to perform this action");
        }
    }
}
}

[Permissions(Permissions.View)]
public ActionResult Index()
{

// ...

} 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-10-16T19:52:58.333

您可以在 RoleProvider 中返回 PERMISSIONS 而不是 ROLES。

```
public override string[] GetRolesForUser(string username) {
   return GetGrantedPermissions(userName);
} 
```

然后创建您的管理页面以将 {granted/denied} 权限添加到角色，当然还有用户添加到角色。

* * *

## 回答 #5

> 赞同：-2
> 
>             
> 
> 时间：2009-05-14T11:59:29.590

是的，这是可能的。创建所需的角色，将用户添加到角色中，然后只需在代码中检查 User.IsInRole 即可执行需要该角色的操作。

查看 System.Web.Security 中的 Roles 和 MemberShip 类

# javascript - 使用 JavaScript 检查和控制选中复选框的数量

> ID：862911
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T11:55:43.500
> 
>         
> 
> 标签：javascript

我正在验证一些复选框，并希望用户能够仅选择 4 个（可能有 7 个）并在当前复选框被选中时禁用其他复选框（如果已经选中了 3 个），或者如果当前选中则启用所有框被取消选中。我真的不确定问题出在哪里。这是我第一次使用 JavaScript...

```
function verify_selected(selected_check_box_id) {
    var count = 0;
    var selected_check_boxes = new Array();
    var check_boxes = new Array();
    var inputs = document.getElementsByTagName("input");
    for( var i in inputs ) {
        if( inputs[i].type == "checkbox" ) check_boxes.push( inputs[i] );
    }
    // get current checkbox
    for( var i in check_boxes ) if( check_boxes[i].id == selected_check_box_id ) var current_check_box = check_boxes[i];
    var current_check_box_is_checked = current_check_box.checked;       
    // get all "checked" 
    for( var i in check_boxes ) {
        if( check_boxes[i].checked ) { 
            selected_check_boxes.push( check_boxes[i] );
            count += 1;
        } 
    }
    if( current_check_box_is_checked ) {
        // checking
        if( count < 4 ) {
            current_check_box.checked = true;
            // count = 4 - disabling
            if( count == 4 ) {
                for( var i in check_boxes ) {
                    if( !check_boxes[i].checked ) check_boxes[i].disabled = true;
                }
            }
        }
        else current_check_box.checked = false;
    } else {
        // unchecking
        // count is < 4 -> enabling
        for( var i in check_boxes ) {
            check_boxes[i].disabled = false;
        }
    }
} 
```

欢迎任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:08:39.943

从简短的浏览来看，您的代码对于这项任务来说似乎太复杂了。

我可以建议使用类似[jquery](http://jquery.com)的东西吗？您可以使用伪选择器' [:checked](http://docs.jquery.com/Selectors/checked) '轻松选择相关复选框。另外，请查看此[复选框教程](http://abeautifulsite.net/notebook/50)。

如果您不想使用库，我建议首先创建一个可以计算选中复选框数量的函数。然后创建一个可以禁用或启用所有未选中复选框的函数。最后，将两者结合起来，注册一个函数来触发复选框的点击事件。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:39:56.250

有几件事是错误的。让我们先给出好的版本。

我还在：http: [//jsbin.com/ajimi上放了一个演示](http://jsbin.com/ajimi)

```
function verify_selected(currentCheckbox) {
        var count = 0;
        var selected_check_boxes = []; // this will be fine...
        var check_boxes []; 
        var inputs = document.getElementsByTagName("input");
        for( var i in inputs ) {
            if( inputs[i].type == "checkbox" ) check_boxes.push( inputs[i] );
        }
        // get all "checked" 
        for( var i in check_boxes ) {
                if( check_boxes[i].checked ) { 
                        count += 1;
                } 
        }

        if( currentCheckbox.checked && (count == 4)) {
             for( var i in check_boxes ) 
                   if( !check_boxes[i].checked ) 
                        check_boxes[i].disabled = true;
        } else {
            for( var i in check_boxes ) 
                 check_boxes[i].disabled = false;

        }
} 
```

在原始版本中，您有一段代码，如下所示：

```
if (count < 4) {
   if (count == 4) { 
```

不会发生。所以，这被纠正了。

正如您在另一个答案中看到的那样，我们更改了功能以取出查找 ID。与其在某个单独的函数中找出 ID（我假设您正在跟踪发生的某个其他函数的“最后点击”），不如使用 this 修饰符将其传递给函数。

好吧，最后但并非最不重要的是，这在 jQuery 中会是什么样子。希望这将有助于理解它的工作原理以及为什么值得使用：

（参见示例：http: [//jsbin.com/ihone](http://jsbin.com/ihone)）

```
function limitSelected(e) {    

    // get all of your checkboxes
    var checkBoxes = $(e.currentTarget).parent().children().filter('input:checkbox');

    // get the number of checkboxes checked, if 4, we'll disable
    var disableCheckBoxes = (checkBoxes.filter(':checked').length == 4);

    // enable checkboxes if we have < 4, disable if 4     
    checkBoxes.filter(':not(:checked)').each(function() {
           this.disabled = disableCheckBoxes;
    });           
}

// when the document is ready, setup checkboxes to limit selection count
// if you have a particular div in which these checkboxes reside, you should
// change the selector ("input:checkbox"), to ("#yourDiv input:checkbox")
$(function() {
  $('input:checkbox').click(limitSelected);
}); 
```

关于这个版本，我要注意的另一件事是它适用于 div 中的复选框组，而不是您的版本，它将在整个页面上选择复选框。（这是限制性的。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T12:39:21.307

如前所述`cofiem`，您的代码对于您想要实现的目标看起来相当复杂；我建议将其分解为几个较小的函数，以重用代码并降低复杂性。

首先，实现一个函数来获取页面上的所有复选框：

```
function getCheckboxes()
{
    var inputs = document.getElementsByTagName("input");
    var checkboxes = new Array();

    for(var i=0;i<inputs.length;++i) {
         if(inputs[i].type=="checkbox")
             checkboxes.push(inputs[i]);
    }

    return checkboxes;
} 
```

然后是启用/禁用复选框的功能：

```
function setDisabled(state) {
    var checkboxes = getCheckboxes();

    for(i=0;i<checkboxes.length;++i) {
        //Only unchecked checkboxes will need to be enabled/disabled
        if(!checkboxes[i].checked)
            checkboxes[i].disabled = state;
    }
} 
```

现在实现您的功能以验证是否需要启用或禁用复选框：

```
function verify_selected(checkbox) {
    var checkboxes = getCheckboxes();
     var count=0;

     for(i=0;i<checkboxes.length;++i) {
         if(checkboxes[i].checked)
             count++;
     }

     if(count>=4)
         setDisabled(true);
     else
         setDisabled(false);
} 
```

我已更改您的函数声明以传递实际的复选框对象而不是标识符字符串；这更容易调用函数：

```
<input type="checkbox" onClick="verify_selected(this);">
//Insert 7 of these.. 
```

正如你所看到的，代码更容易阅读和维护，而且也不那么复杂。

# asp.net - ASP.NET 成员资格 - 我可以允许匿名访问并仍然使用 Active Directory 自动登录吗？

> ID：862917
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T11:56:50.363
> 
>         
> 
> 标签：asp.net, iis, asp.net-membership, impersonation, windows-authentication

我希望这不是悖论，但我不知道该怎么做......

我有一个带有以下 Web.Config 条目的 VS2008 ASP.NET MVC 项目：

```
 <authentication mode="Windows">
      <forms name=".ADAuthCookie" timeout="10" />
  </authentication> 
```

这使得访问者使用他们用于登录 Windows 的 DOMAIN\username 登录名自动登录。（对？）

这适用于我的开发服务器 ( [http://localhost:xxxx](http://localhost:xxxx) )，但不适用于我的 IIS 服务器 ( [http://localhost](http://localhost) )。可能是因为开发服务器是由我的本地用户（在域上具有 ActiveDirectory 读取权限）“启动”的，并且因为 IIS 是由没有的 IUSR_WORKSTATION 用户“启动”的。（对？）

**如果以上所有情况都成立，我如何模拟 IIS 用户（例如我自己的用户名）以仅使用 Windows 登录名对当前用户进行身份验证？**（像下面的例子）？  

**还是应该授予 IUSR_WORKSTATION 用户 ActiveDirectory？**读取权限（不是首选，因为我会经常切换服务器/IUSR_ 用户）

```
<identity impersonate="true" userName="DOMAIN\myuser" password="mypass"/>
<authentication mode="Windows">
    <forms name=".ADAuthCookie" timeout="10" />
</authentication>
<identity impersonate="false"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T12:00:37.873

Windows 身份验证名称不正确（IMO）。它不使用 Windows 作为身份验证，而是将身份验证过程委托给 IIS。所以你需要配置 IIS 的身份验证，然后向下流向 ASP.NET

您如何执行此操作取决于您的 IIS 版本，在 IIS7 中展开树并单击您的网站，然后单击身份验证并启用 Windows 身份验证

# .net - .net 中更强大的文件系统库

> ID：862924
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T11:59:00.653
> 
>         
> 
> 标签：.net, file-io, io

让我重述一下。我的例子可能不太好。删除目录时，很多事情都可能出错。文件具有只读属性集，目录由 Windows 资源管理器打开。我想所有这些都可以处理 - 但是我不想自己做 - 是否有一个包装器可以用一个简单的 api 来处理它？

我发现 System.IO 中的文件系统操作不足。例如，如果在文本编辑器中打开文件，则无法保存该文件。

我想知道.net 文件系统是否有更强大的实现？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-14T12:02:03.453

哪个文本编辑器？您如何打开文件进行写入？我一直写日志文件，没有这个问题。

出于这个原因，放弃 System.IO 似乎有点轻率。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T12:09:13.937

无论您使用什么，您都无法写入已锁定的文件。

这不是 .NET 框架的限制，这就是文件系统的工作方式。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:12:46.673

几乎所有的 System.IO 调用都只是 kernel32.dll 的包装器。发送的枚举类似于来自 pinvoked kernel32 的枚举，因此：

```
System.IO.File.Create(@"C:\test.txt",1024,FileOptions.Asynchronous) 
```

其中使用 FileStream，使用 kernel32 的 WriteFile

# c# - 在 XML 文档中更新或插入节点

> ID：862930
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T11:59:51.120
> 
>         
> 
> 标签：c#, xml, xpath

我是 C# 中 XML 和 XPath 的初学者。这是我的 XML 文档的示例：

```
 <root>
   <folder1>
   ...
   <folderN>
      ...
      <nodeMustExist>...
      <nodeToBeUpdated>some value</nodeToBeUpdated>
  ....
 </root> 
```

如果节点存在，我需要更新 nodeToBeUdpated 的值，或者如果 nodeToBeUpdated 不存在，则在 nodeMustExist 之后添加此节点。该函数的原型是这样的：

```
void UpdateNode(
                  xmlDocument xml, 
                  string nodeMustExist, 
                  string nodeToBeUpdte, 
                  string newVal
               )
{
   /*

   search for XMLNode with name = nodeToBeUpdate in xml 
   to XmlNodeToBeUpdated (XmlNode type?)
   if (xmlNodeToBeUpdated != null)
   {
      xmlNodeToBeUpdated.value(?) = newVal;
   }
   else
   {
      search for nodeMustExist in xml to xmlNodeMustExist obj
      if ( xmlNodeMustExist != null )
      {
          add xmlNodeToBeUpdated as next node
          xmlNodeToBeUpdte.value = newVal;
       }
    }

   */
} 
```

也许还有其他更好和简化的方法可以做到这一点。有什么建议吗？

顺便说一句，如果nodeToBeUpdated在其他地方多次出现，我只想更新第一个。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:16:02.517

选择所有实例的 XPath 表达式`<nodeToBeUpdated>`将是：

```
/root/文件夹[nodeMustExist]/nodeToBeUpdated
```

或者，以更通用的形式：

```
/root/文件夹[*[name() = 'nodeMustExist']]/*[name() = 'nodeToBeUpdated']
```

适用于：

```
void UpdateNode(xmlDocument xml, 
                string nodeMustExist, 
                string nodeToBeUpdte, 
                string newVal)
{
  string xPath = "/root/folder[*[name() = '{0}']]/*[name() = '{1}']";
  xPath = String.Format(xPath, nodeMustExist, nodeToBeUpdte);

  foreach (XmlNode n in xml.SelectNodes(xPath))
  {
    n.Value = newVal;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:21:38.180

这是更新文件夹中的所有节点：

```
public void UpdateNodes(XmlDocument doc, string newVal)
        {
            XmlNodeList folderNodes = doc.SelectNodes("folder");

            if (folderNodes.Count > 0)
            foreach (XmlNode folderNode in folderNodes)
            {
                XmlNode updateNode = folderNode.SelectSingleNode("nodeToBeUpdated");
                XmlNode mustExistNode = folderNode.SelectSingleNode("nodeMustExist"); ;
                if (updateNode != null)
                { 
                    updateNode.InnerText = newVal;
                }
                else if (mustExistNode != null)
                {
                    XmlNode node = folderNode.OwnerDocument.CreateNode(XmlNodeType.Element, "nodeToBeUpdated", null);
                    node.InnerText = newVal;
                    folderNode.AppendChild(node);
                }

            }
        } 
```

如果要更新特定节点，则不能传递字符串 nodeToBeUpdte，但必须传递 XmlDocument 的 XmlNode。我省略了函数中节点名称的传递，因为节点名称不太可能更改并且可以硬编码。但是，您可以将这些传递给函数并使用字符串而不是硬编码的节点名称。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T12:14:20.227

看看 SelectSingleNode 方法[MSDN Doc](http://msdn.microsoft.com/en-us/library/aa335970(VS.71).aspx)

你的 xpath 想要像 "//YourNodeNameHere" ；

找到该节点后，您可以遍历树以到达“nodeMustExist”节点：

```
XmlNode nodeMustExistNode = yourNode.Parent["nodeMustExist]; 
```

# wpf - WPF中的右对齐菜单项

> ID：862931
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T11:59:56.283
> 
>         
> 
> 标签：wpf, menuitem, right-align

我可以右对齐 WPF 中的菜单项吗？

谢谢沙拉特

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2014-07-09T08:32:33.180

```
<Menu HorizontalAlignment="Stretch" FlowDirection="RightToLeft">            
        <MenuItem HorizontalAlignment="Right" Header="aaa">
        </MenuItem>
        <MenuItem HorizontalAlignment="Right" Header="bbb">
        </MenuItem>
</Menu> 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T16:14:43.470

是的你可以。

虽然实现有点麻烦。

如果您想让顶部菜单中的菜单项从右到左排列，请将 FlowDirection="RightToLeft" 添加到您的菜单中。如果您想让一个项目在下拉列表中右对齐，请执行以下操作：

```
<MenuItem>
    <MenuItem.Header>
        <TextBlock HorizontalAlignment="Right" >Content</TextBlock>
    </MenuItem.Header>
</MenuItem> 
```

如果你想同时做这两个，你实际上必须设置 Horizo​​ntalAlignment="Left" 而不是 right，因为 FlowDirection 在对齐中反转左右。我不知道为什么，但这就是你必须做的。  

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2010-12-02T20:36:49.743

[如何右对齐 WPF 中的“帮助”菜单项？](https://stackoverflow.com/questions/3023638/how-do-i-right-align-the-help-menu-item-in-wpf)

我喜欢网格方式的第二个答案。

# c++ - 使用 WSAIoctl 函数（WIN32 API）计算网络接口

> ID：862934
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T12:00:53.957
> 
>         
> 
> 标签：c++, c, winapi

我正在尝试使用 WSAIoctl 函数列出可用接口。我必须传入一个缓冲区来保存完整的列表。我想在分配内存以保存接口详细信息之前获取接口的计数，但是如果我传入一个 NULL 指针，调用就会失败（我没有得到返回的有效计数）。在我必须分配内存之前，有什么办法可以得到这个计数？

背景是我在 Windows 机器上启动了大量进程/线程，它们都连接到单个服务器。我希望服务器将这些单独的连接视为来自不同的 IP 地址，并且我已向测试机器添加了大量别名以允许这样做（很多）。WSAIoct 确实正确找到了我添加的所有内容。

干杯...

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:32:55.563

来自WSAIoctl的[msdn 文档：](http://msdn.microsoft.com/en-us/library/ms741621(VS.85).aspx)

> **注意**：如果输出缓冲区不够大，无法包含地址列表，则返回 SOCKET_ERROR 作为此 IOCTL 的结果，而 WSAGetLastError 返回 WSAEFAULT。在这种情况下，输出缓冲区所需的大小（以字节为单位）在 lpcbBytesReturned 参数中返回。请注意，如果 lpvInBuffer、lpvOutBuffer 或 lpcbBytesReturned 参数未完全包含在用户地址空间的有效部分中，也会返回 WSAEFAULT 错误代码。

所以你必须调用 WSAIoctl 函数两次。第一次使用任意缓冲区，然后检查文档中提到的错误代码。然后使用 lpcbBytesReturned 中返回的大小来分配缓冲区并再次调用 WSAIoctl 函数。

# c# - 固定语句之外的固定指针的行为不清楚

> ID：862936
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T12:01:28.790
> 
>         
> 
> 标签：c#, garbage-collection, fixed

有人可以解释一下为什么下面的 C# 代码不会崩溃吗？为什么 Visual Studio 实际上允许编译它？我的理解是我得到了一个固定的指针，但它仅在“固定”语句中是固定的。当指针从'Foo'函数返回时，可以收集数组'ar'。然后我强制 GC 实际执行此操作，但连续写入内存（现在已解除分配）不会导致任何错误。

```
class Program
{
    static unsafe byte* Foo()
    {
        byte[] ar = new byte[100];
        fixed (byte* ptr = ar)
        {
            return ptr;
        }
    }

    static unsafe void Main(string[] args)
    {
        byte* ptr = Foo();
        GC.Collect();
        for (int t = 0;;++t) ptr[t%100] = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:12:14.863

仅仅因为内存被释放并不意味着写入它会导致任何类型的错误。当垃圾收集器回收内存时，它只是在其内部内存映射中将其标记为空闲——它不会立即将其返回给操作系统，因此它仍然是供您的进程使用的有效内存。

当然，在固定块之外使用指针是一个*非常*糟糕的主意——不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T18:53:23.107

Eric 是对的，但您可能想听到的答案是“有时将地址保留在固定语句之外很有用”。

也许该指针的内存已经被其他地方的另一个固定语句修复了，返回它是否有意义？编译器不会试图猜测你并给出嘈杂的警告。

就是说，我希望 CodeAnalysis 或其他高级工具能介入编译器让你断掉自己的脚的地方。

# windows - 如何确定计算机是否正在运行 XP Service Pack 3

> ID：862940
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-14T12:02:40.160
> 
>         
> 
> 标签：windows, windows-xp, windows-installer

使用注册表或文件系统。限制的原因是我这样做是作为 MSI 条件语句。

干杯!

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-14T14:48:09.107

在注册表项下

*HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion*

寻找密钥对：

*CurrentVersion = Microsoft Windows NT 5.1.2600 Service Pack 3* 

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-14T12:11:43.367

您应该在以下注册表项中找到足够的信息来确定操作系统服务包（在最坏的情况下，您始终可以使用构建字符串）：

```
 HKLM\Software\Microsoft\Windows NT\CurrentVersion 
```

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-07-03T20:00:35.767

如果您使用的是 MSI，您应该能够在条件语句中使用**VersionNT**和**ServicePackLevel**属性。

例如。以下代码检查 Windows XP sp3 或更高版本：

```
VersionNT=501 And ServicePackLevel>2 
```

如果您还需要内部版本号，还可以检查**WindowsBuild**属性。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:27:05.530

VerifyVersionInfo函数应该允许您检查正在运行的 Windows 版本[是否符合应用程序的要求，而不会出现使用](http://msdn.microsoft.com/en-us/library/ms725492(VS.85).aspx)[GetVersionEx](http://msdn.microsoft.com/en-us/library/ms724451.aspx)检查确切版本时可能出现的缺陷（例如中断主要版本更改 - 您的应用程序很可能会在 Vista 上运行和 Windows 7，以及尚未开发的未来版本）。

* * *

## 回答 #5

> 赞同：-1
> 
>             
> 
> 时间：2016-12-01T11:18:09.823

“运行”（Windows 键 + r 或开始/运行）msinfo32 或 sysdm.cpl

# iphone - UITableView 中的最后一行被 UITabBar 遮挡

> ID：862943
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T12:03:01.237
> 
>         
> 
> 标签：iphone, uitableview, uitabbarcontroller

我有一个 UITabBarController，它有一个分配给“viewControllers”属性的 UINavigationControllers 列表。

每个 UINavigationController 都有一个自定义 UIViewController 作为其“rootController”，并且此自定义 UIViewController 从 .xib 文件加载其“视图”。此“视图”包含一个 UITableView（以及首次下载 UITableView 的数据时显示的其他一些控件）。

从一开始就可以工作 - 我可以在选择第一个选项卡时看到第一个视图控制器的表观，更改选项卡显示其他表视图 - 一切都很好。

我的问题是，当我在其中一个表视图上选择一行时，会实例化一个新的自定义视图控制器，告诉我在推送时隐藏底部栏，然后将其推送到导航控制器。再次 - 这按预期工作。我看到了新的子视图并且标签栏被隐藏了。

问题是当我返回上一个视图时，我的 UITableView 中的最后一行现在被选项卡栏（它已正确重新出现）遮住了。似乎隐藏底栏然后在返回上一个视图时再次显示它的过程很混乱。

有没有人遇到过这个？知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:43:45.913

检查您的 UITableView 是否没有 UIViewAutoresizingFlexibleHeight（在 IB 中，请参见下图）。

[替代文字 http://www.quicksnapper.com/files/5161/20375276064A0C11D2C33A4_m.png](http://www.quicksnapper.com/files/5161/20375276064A0C11D2C33A4_m.png)

# .net - 类似 Intellisense 的 .Net 组件？

> ID：862949
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T12:04:35.960
> 
>         
> 
> 标签：.net, intellisense, components

有没有人知道任何 3rd 方组件提供类似智能感知的功能（当然提供我自己的库），我可以在我的（自定义）文本编辑器中使用它以提高可用性？

干杯和感谢，-J

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-14T12:08:12.440

看看[Actipro SyntaxEditor - Windows Forms .NET 控件](http://www.actiprosoftware.com/Products/DotNet/WindowsForms/SyntaxEditor/Default.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T13:32:40.427

查看#develop 中包含的[ICSharpCode.TextEditor](http://www.icsharpcode.net/)

# svn - Subversion：防止对一个文件的本地修改被提交？

> ID：862950
> 
>         
> 
> 赞同：39
> 
>         
> 
> 时间：2009-05-14T12:04:38.800
> 
>         
> 
> 标签：svn

我有一个 Subversion 工作副本，我在其中对一个文件进行了一些本地修改。这些修改只与我有关，我不想提交它们。（存储库中的版本包含一些适合其他用户的默认值，但不适合我，这就是我想在本地覆盖它们的原因。）

请注意，虽然我不想提交更改，但我*确实*希望在提交时收到存储库中所做的任何更新`svn update`。此外，只有在我的工作副本中我不想提交对该文件的更改，其他用户不应该受到影响。所以`svn:ignore`或提交钩子不符合我的目的。

目前，我只是这样做：

```
svn commit file1 file2... 
```

我在其中明确指定具有更改的文件，*不包括*我不想提交的特定文件。

然而，当我工作的时候，我有简单写的习惯：

```
svn commit -m "Log of what I just did" 
```

而且我担心我会在我不注意的时候使用上面的命令无意中提交“禁止”文件。

简而言之，我正在寻找的只是一种在工作副本中“标记”文件的方法，它可以防止 Subversion 提交该文件中的更改（它不一定是自动排除，即使我只是得到一个当我尝试提交所有文件时出错，这很好）。有点像将文件标记为“冲突”状态......

这样的事情存在吗？

**更新**：akent，感谢您指出这个[非常相似的问题](https://stackoverflow.com/questions/635446/svn-is-there-a-way-to-mark-a-file-as-do-not-commit)。

* * *

## 回答 #1

> 赞同：19
> 
>             
> 
> 时间：2009-05-22T14:37:04.727

有几个答案可以工作：

1.  创建一个预提交钩子脚本，在添加特定属性时拒绝提交。然后，您可以将此属性添加到工作副本中的文件以防止提交。

2.  TortoiseSVN 将排除特殊更改列表“ignore-on-commit”中的文件。但是，SVN 命令行客户端不支持这一点。

CoverosGene 建议使用默认命令，例如`svn commit`对默认更改列表进行操作，这样如果您将文件分配给另一个更改列表，您可以将其排除在外，但我在文档中找不到任何参考，并且在我的测试**中没有工作**。

由于 SVN 命令行客户端没有好的解决方案，所以我在[这里](https://issues.apache.org/jira/browse/SVN-3415)打开了一个增强请求。该请求表明命令行客户端也可以遵守“ignore-on-commit”更改列表。

更新：这现在是[问题 2858](https://issues.apache.org/jira/browse/SVN-2858)，并且有一个[功能大纲](http://svn.apache.org/repos/asf/subversion/trunk/notes/hold)`svn:hold`可以用一个属性来处理它。

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2009-05-14T12:21:02.317

我了解您遇到的问题；可能这个“禁止”文件包含仅与您的本地构建环境相关的配置设置等。我还没有找到任何直接告诉 SVN 忽略版本化文件中的更改的方法，但这是我过去使用过的一种解决方法。

假设您的文件被称为“build.conf”。将 SVN 版本化文件命名为 build.conf.example。然后，在您的 Makefile 或构建脚本或其他任何内容中，您可以自动将 build.conf.example 复制到*真正的*build.conf，它保持未版本化。然后你 svn 忽略 build.conf 并且每个开发人员都可以对它进行任何他们需要的本地更改。

但是“必须有更好的方法”......

**编辑：**这里几乎相同的问题：[SVN：有没有办法将文件标记为“不提交”？](https://stackoverflow.com/questions/635446/svn-is-there-a-way-to-mark-a-file-as-do-not-commit)

* * *

## 回答 #3

> 赞同：9
> 
>             
> 
> 时间：2009-05-14T12:31:21.700

创建一个[包含](http://svnbook.red-bean.com/en/1.5/svn.advanced.changelists.html)该文件的更改列表，然后不注意更改列表。该文件将坐在那里等待提交，但是您在默认更改列表上工作的常规提交永远不会拾取它。

```
svn changelist mylocal file1 
```

将创建一个名为的更改列表`mylocal`并将文件分配`file1`给它。

* * *

## 回答 #4

> 赞同：6
> 
>             
> 
> 时间：2009-05-14T16:58:05.100

实际上，预提交脚本可以完成这项工作。

如果在变更集中设置了名为“nocommit”的属性，则编写一个执行“svnlook diff”并拒绝提交的预提交脚本。

然后，在您的工作副本中，您可以在任何不应提交的文件上设置“nocommit”属性。如果任何文件具有“nocommit”属性，则任何后续提交都将失败。如果您以后确实需要检查文件的更改，您所要做的就是从工作副本中删除“nocommit”属性。

* * *

## 回答 #5

> 赞同：5
> 
>             
> 
> 时间：2009-05-14T13:07:21.707

说到 Tortoisesvn 和变更列表，它已经带有一个名为 ignore-on-commit 的变更列表，它可以满足您的需求。

* * *

## 回答 #6

> 赞同：4
> 
>             
> 
> 时间：2009-05-14T12:55:53.200

根据我的经验：不要将该文件置于版本控制之下并在其上使用 svn:ignore。

一开始有点难，因为你不能忽略一个已经在版本控制下的文件，你不能从版本控制中删除一个文件而不从硬盘驱动器中删除它（以及从下次更新的每个工作副本中删除......）。但是，当您最终设法正确设置存储库时，它就像魅力一样。不要忘记添加一个通用模板来代替你原来的配置文件（这样每个人都知道新的配置变量，等等）。

对于新的回购：

```
mkdir config
svn add config
svn propset svn:ignore '*.conf' config 
```

对于现有的仓库：确保在每个工作副本中备份您的配置，然后从仓库中删除（svn del）配置，提交（请注意：该文件将在下次更新的每个工作副本中被删除！你有进行备份），然后恢复文件并设置忽略属性。

另一种方式是锁。它保证没有人提交文件，但每次提交都会导致错误。不大好。

第三种方式——变更集，SVN 1.5 客户端的一个新特性。这很简洁，但它仅与一个工作副本相关，而不与全局存储库相关。而且你必须手动设置它们，添加每个新文件——这很难维护。

* * *

## 回答 #7

> 赞同：4
> 
>             
> 
> 时间：2011-06-11T18:05:48.690

在过去的几年里，我一直在使用一个简单的解决方案，它可以完全满足您的需求。它被称为`NOCOMMIT`关键字。  

我所做的是在我的 SVN 存储库中有一个 pre-commit 钩子，它检查是否有任何文件包含 string `NOCOMMIT`，如果是，则提交失败。

因此，当程序员进行不应该提交的修改时，（例如，他们将项目范围的数据库连接字符串从公司范围的测试服务器更改为他们自己的本地测试服务器，或者他们添加了诊断调试语句以每秒数千行的速度向日志发送垃圾邮件，）他们将`//NOCOMMIT`评论附加到它，并且他们不必担心意外提交它。到了提交的时候，他们被阻止了，所以他们被迫要么：

*   将该文件移动到他们的不提交更改列表，或

*   搜索`NOCOMMIT`并删除它的任何出现，从而希望修复他们附加的代码。

就个人而言，我发现这个`NOCOMMIT`关键字非常有用，甚至在我的宠物项目中也使用它，显然，我是团队中唯一的程序员。

如果您使用的是 Windows，您可以将以下文本粘贴到您的 SVN 存储库文件夹中调用`pre-commit.bat`的文件中。`hooks`

```
:: Stops commits that contain the NOCOMMIT keyword.
setlocal  
set REPOS=%1  
set TXN=%2           
SVNLook diff %REPOS% -t %TXN% | findstr /I /M /L NOCOMMIT > nul
if %errorlevel% gtr 0 (
    exit 0
) else (
    echo Your commit has been blocked because it contains the keyword NOCOMMIT. 1>&2  
    exit 1
) 
```

在 Unix 系统上，类似下面的东西应该可以解决问题，但请注意我没有测试过它。

```
#!/bin/sh
REPOS="$1"
TXN="$2"
SVNLOOK=/usr/local/bin/svnlook
$SVNLOOK diff -t "$TXN" "$REPOS" | grep -i "NOCOMMIT" > /dev/null && { echo "Your commit has been blocked because it contains the keyword NOCOMMIT." 1>&2; exit 1; } 
```

* * *

## 回答 #8

> 赞同：3
> 
>             
> 
> 时间：2009-05-14T12:18:48.873

锁定当然不是您想要的，而且我认为任何内置功能都不会为您做到这一点。

根据您在哪个环境中工作，我会编写一个脚本：

1.  获取文件列表

2.  删除我不想提交的

3.  提交文件

类似于以下内容：

```
svn status | grep ^M | grep -v exclude.c | awk -F' ' '{print $2}' | xargs svn ci -m "I'm committing something" 
```

或者如果文件列表真的是静态的，只需修复列表！

* * *

## 回答 #9

> 赞同：3
> 
>             
> 
> 时间：2009-05-14T12:25:33.647

这个问题在[Subversion FAQ](http://subversion.apache.org/faq.html#ignore-commit)中。但是，如果您不控制存储库，答案就不是很有帮助。

也许尝试在颠覆之上使用[git管理您的本地副本。](http://git-scm.com/)有一个简单[的 git 课程](http://git.or.cz/course/svn.html)可用。然后，您可以使用[git-svn](http://utsl.gen.nz/talks/git-svn/intro.html)跟踪 svn 存储库中的更改并提交更改。这将需要一些学习和培训。

* * *

## 回答 #10

> 赞同：3
> 
>             
> 
> 时间：2009-05-14T13:11:32.413

如果您在 Windows 上，请使用 TortoiseSVN。您可以将文件添加到与您描述的完全一样的[特殊“ignore-on-commit”更改列表中。](http://tortoisesvn.tigris.org/tsvn_1.5_releasenotes.html#changelist-support)

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2013-12-10T22:32:10.890

您可以使用个人分支并切换该文件以获得此效果。像这样：

```
 svn cp ^/trunk ^/branches/your_name -m "Creating a personal branch."    
 cd working_copy_of_trunk/sub_path/
 svn switch ^/branches/your_name/sub_path/your_file your_file 
```

注意：

1.  您可以使用出现在第五列的“S”命令检查切换状态：`svn status`

2.  您将永远不会在分支上工作，您的 working_copy_of_trunk 仍然与存储库主干目录同步，除了您已切换的文件，因此每当您在 your_file 上提交更改时，该文件的提交将在您的分支上而不是在主干上完成。

3.  复制已经完成了完整的服务器端，这是使用 svn 的推荐方式。完整的服务器端复制是即时的，不会在服务器上花费额外的空间。但是，还建议人们不要签出包含trunk/ tags/和branches/的顶级目录，而是直接签出trunk/，否则从该顶级目录更新时所有文件将在本地重复。如果是这种情况，请将第一个命令替换为：

    svn cp --parents ^/trunk/sub_path/your_file ^/branches/your_name/sub_path/your_file

    最后，如果出于某种原因您不想将文件复制到存储库服务器上的其他位置，那么您仍然可以将此方法与外部服务器和 svn:external 关键字结合使用（不推荐）。

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2017-07-19T21:54:52.643

将所有文件添加到更改列表，然后删除您不想提交的文件。最后提交更改列表，如下所示：

```
$ svn status
M file01 
M ...
M file100
M file_not_ready_for_commit

// This will add all working copy files, can be adjusted to add only relevant files
$ svn changelist mychangelist -R .

// Remove the nascent one(s)
$ svn changelist mychangelist --remove file_not_ready_for_commit

// Commit only the files in the changelist
$ svn commit --changelist mychangelist 
```

以上信息的来源是这个[博客](https://coderwall.com/p/dzb2vq/svn-changelist-and-selective-commit)，它也有一个链接到[http://svnbook.red-bean.com](http://svnbook.red-bean.com)以获得更多细节。所有学分归于博客作者。

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T12:34:31.630

您可以使用预提交挂钩。在钩子中使用`svnlook author`来查看您是否是提交更改的人。如果是这样，请使用`svnlook changed`以查看您是否正在更改其中一个被禁止的文件。

# xml - 在现有文档的特定位置插入 XML 节点

> ID：862954
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2009-05-14T12:05:49.980
> 
>         
> 
> 标签：xml, xslt, insert, xsd

我有一个带有一些可选节点的现有 XML 文档，我想插入一个新节点，但在某个位置。

该文档看起来像这样：

```
<root>
  <a>...</a>
  ...
  <r>...</r>
  <t>...</t>
  ...
  <z>...</z>
</root> 
```

新节点 ( `<s>...</s>`) 应插入节点`<r>`和之间`<t>`，结果是：

```
<root>
  <a>...</a>
  ...
  <r>...</r>
  <s>new node</s>
  <t>...</t>
  ...
  <z>...</z>
</root> 
```

问题是，现有节点是可选的。因此，我不能使用 XPath 查找节点`<r>`并在其后插入新节点。

我想避免“蛮力方法”：从`<r>`最多搜索`<a>`到找到一个存在的节点。

我还想保留顺序，因为 XML 文档必须符合 XML 模式。

可以使用 XSLT 以及普通的 XML 库，但是因为我只使用 Saxon-B，所以不能使用模式感知 XSLT 处理。

有谁知道如何插入这样的节点？

谢谢，我的钥匙_

* * *

## 回答 #1

> 赞同：19
> 
>             
> 
> 时间：2009-05-15T06:39:48.570

[替换我的最后一个答案。现在我更明白你需要什么了。]

这是一个 XSLT 2.0 解决方案：

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/root">
    <xsl:variable name="elements-after" select="t|u|v|w|x|y|z"/>
    <xsl:copy>
      <xsl:copy-of select="* except $elements-after"/>
      <s>new node</s>
      <xsl:copy-of select="$elements-after"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

您必须明确列出之后的元素或之前的元素。（您不必同时列出两者。）我倾向于选择两个列表中较短的一个（因此在上面的示例中是“t”-“z”，而不是“a”-“r”）。

可选增强：

这样就完成了工作，但是现在您需要在两个不同的位置（在 XSLT 和模式中）维护元素名称列表。如果它变化很大，那么它们可能会不同步。如果您将新元素添加到模式但忘记将其添加到 XSLT，那么它将不会被复制。如果您担心这一点，您可以实现自己的模式感知。假设您的架构如下所示：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="a" type="xs:string"/>
        <xs:element name="r" type="xs:string"/>
        <xs:element name="s" type="xs:string"/>
        <xs:element name="t" type="xs:string"/>
        <xs:element name="z" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

</xs:schema> 
```

现在您需要做的就是更改 $elements-after 变量的定义：

```
 <xsl:variable name="elements-after" as="element()*">
    <xsl:variable name="root-decl" select="document('root.xsd')/*/xs:element[@name eq 'root']"/>
    <xsl:variable name="child-decls" select="$root-decl/xs:complexType/xs:sequence/xs:element"/>
    <xsl:variable name="decls-after" select="$child-decls[preceding-sibling::xs:element[@name eq 's']]"/>
    <xsl:sequence select="*[local-name() = $decls-after/@name]"/>
  </xsl:variable> 
```

这显然更复杂，但现在您不必在代码中列出任何元素（“s”除外）。每当您更改架构时（特别是，如果您要添加新元素），脚本的行为将自动更新。这是否矫枉过正取决于您的项目。我只是将它作为一个可选的附加组件提供。:-)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T12:35:25.887

您必须使用蛮力搜索，因为您没有找到插入位置的静态路径。我的方法是使用 SAX 解析器并阅读文档。所有节点都原封不动地复制到输出。

您需要一个标志`sWasWritten`，这就是您不能使用普通 XSLT 工具的原因；你需要一个可以修改变量的地方。

一旦我看到一个节点 > `r`( `t`, `u`, ..., `z`) 或根节点的结束标签，我就会写该`s`节点，除非`sWasWritten`是`true`并设置标志`sWasWritten`。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-15T09:04:49.097

XPath 解决方案：

```
/root/(.|a|r)[position()=last()] 
```

您必须显式包含所有节点，直到您想要的节点为止，这样您就需要为要插入的每个节点使用不同的 XPath 表达式。例如，将其放在紧随其后`<t>`（如果存在）：

```
/root/(.|a|r|t)[position()=last()] 
```

请注意前面的节点都不存在的特殊情况：它返回`<root>`（“.”）。您需要检查这一点，并将新节点作为 root 的第一个子节点插入，而不是在它之后（通常情况下）。这还不错：无论如何，您必须以某种方式处理这种特殊情况。处理这种特殊情况的另一种方法如下，如果没有前面的节点，则返回 0 个节点。

```
/root/(.|a|r|t)[position()=last() and position()!=1] 
```

挑战：你能找到更好的方法来处理这种特殊情况吗？

# .net - 覆盖一种方法而不是另一种方法时的编译器警告

> ID：862961
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-14T12:09:01.877
> 
>         
> 
> 标签：.net

当一个类覆盖一个方法但没有覆盖相关函数时，我希望有一个编译器警告。你怎么做到这一点？

例如，如果您覆盖 Object.Equals，如果您不覆盖 Object.GetHashCode()，则会收到警告。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-14T12:26:37.497

你不能，基本上。这是防止混乱的特殊情况。

您能做的最好的事情就是编写一个 FxCop 规则来检测它。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T12:30:40.280

您不能创建自己的编译器警告，但可以创建运行时警告，例如（如果覆盖不调用基本方法）具有由第一个基本方法设置的标志，然后由第二个基本方法检查基础方法。或者您可以使用反射和堆栈跟踪来做更复杂的事情，以在运行时检查是否正确使用。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T13:10:13.900

我认为你可以通过一些属性和一些反射来做到这一点，但它很快就会变得混乱。

# c - 谁能给我最新的netlink编程示例？

> ID：862964
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-14T12:09:29.100
> 
>         
> 
> 标签：c, linux, networking, linux-kernel

我正在编写一个使用 netlink 在用户空间和内核空间之间进行通信的 Linux 驱动程序。但是我找不到一些有用的资料，因为netlink已经从Linux kernel >=2.6.24改变了。谁能给我一些关于如何创建netlink套接字的建议。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-06-22T17:42:38.963

下面的代码演示了使用 netlink 从用户空间应用程序向内核模块发送数据的基础知识。[此代码适用于具有libnl](http://www.infradead.org/~tgr/libnl/)的 git 版本 (ef8ba32) 的 Linux 2.6.28.9 。有关更多详细信息，请查看 libnl[文档](http://www.infradead.org/~tgr/libnl/doc/index.html)和广泛使用 netlink的[iw](http://linuxwireless.org/en/users/Documentation/iw)代码。

**核心**

```
#include <linux/kernel.h>
#include <linux/module.h>

#include <net/sock.h>
#include <net/netlink.h>

#define MY_MSG_TYPE (0x10 + 2)  // + 2 is arbitrary. same value for kern/usr

static struct sock *my_nl_sock;

DEFINE_MUTEX(my_mutex);

static int
my_rcv_msg(struct sk_buff *skb, struct nlmsghdr *nlh)
{
    int type;
    char *data;

    type = nlh->nlmsg_type;
    if (type != MY_MSG_TYPE) {
        printk("%s: expect %#x got %#x\n", __func__, MY_MSG_TYPE, type);
        return -EINVAL;
    }

    data = NLMSG_DATA(nlh);
    printk("%s: %02x %02x %02x %02x %02x %02x %02x %02x\n", __func__,
            data[0], data[1], data[2], data[3],
            data[4], data[5], data[6], data[7]);
    return 0;
}

static void
my_nl_rcv_msg(struct sk_buff *skb)
{
    mutex_lock(&my_mutex);
    netlink_rcv_skb(skb, &my_rcv_msg);
    mutex_unlock(&my_mutex);
}

static int
my_init(void)
{
    my_nl_sock = netlink_kernel_create(&init_net, NETLINK_USERSOCK, 0,
            my_nl_rcv_msg, NULL, THIS_MODULE);
    if (!my_nl_sock) {
        printk(KERN_ERR "%s: receive handler registration failed\n", __func__);
        return -ENOMEM;
    }

    return 0;
}

static void
my_exit(void)
{
    if (my_nl_sock) {
        netlink_kernel_release(my_nl_sock);
    }
}

module_init(my_init);
module_exit(my_exit); 
```

**用户空间**

```
#include <stdio.h>
#include <stdlib.h>

#include <netlink/netlink.h>

#define MY_MSG_TYPE (0x10 + 2)  // + 2 is arbitrary but is the same for kern/usr
int
main(int argc, char *argv[])
{
    struct nl_sock *nls;
    char msg[] = { 0xde, 0xad, 0xbe, 0xef, 0x90, 0x0d, 0xbe, 0xef };
    int ret;

    nls = nl_socket_alloc();
    if (!nls) {
        printf("bad nl_socket_alloc\n");
        return EXIT_FAILURE;
    }

    ret = nl_connect(nls, NETLINK_USERSOCK);
    if (ret < 0) {
        nl_perror(ret, "nl_connect");
        nl_socket_free(nls);
        return EXIT_FAILURE;
    }

    ret = nl_send_simple(nls, MY_MSG_TYPE, 0, msg, sizeof(msg));
    if (ret < 0) {
        nl_perror(ret, "nl_send_simple");
        nl_close(nls);
        nl_socket_free(nls);
        return EXIT_FAILURE;
    } else {
        printf("sent %d bytes\n", ret);
    }

    nl_close(nls);
    nl_socket_free(nls);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-19T21:34:55.717

我已经有一段时间没有进行内核编程了。因此，我无法直接举例说明引入了哪些更改。我可以告诉你我如何理解 netlink 函数以及如何使用它们，阅读代码。特别是来自 NetworkManager 或无线扩展 (iwlib) 的代码，因为这是我 2 年前关注的领域。那些 OSS 项目总是在内核的变化上处于领先地位，而且它们的代码也不难理解。

# vim - 在 Vim 中隐藏所有（不）匹配的行

> ID：862966
> 
>         
> 
> 赞同：89
> 
>         
> 
> 时间：2009-05-14T12:10:14.683
> 
>         
> 
> 标签：vim, vi

是否可以在 vi 或 Vim 中显示/隐藏所有匹配的行？不突出显示，只显示那些行。

例如，我有一个带有 word the word 的文本`ERROR`。如何使其仅显示包含的行`ERROR`以及如何仅显示不包含的行`ERROR`？

有*没有删除*所有匹配行然后撤消它的解决方案？

* * *

## 回答 #1

> 赞同：112
> 
>             
> 
> 时间：2009-05-14T12:14:37.027

你知道`:global`命令吗？这是做你想做的吗？

```
:g/ERROR 
```

相反：

```
:g!/Error 
```

或等效地：

```
:v/Error 
```

* * *

## 回答 #2

> 赞同：54
> 
>             
> 
> 时间：2012-09-18T23:26:43.267

根据您的用例，另一种方法是使用**vimgrep**及其结果在**quickfix**。您可以执行以下操作：

`:vimgrep pattern %`将搜索当前文件并将您带到第一个搜索结果。更重要的是，它还将结果放在“快速修复列表”中。

`:copen`然后将在单独的快速修复窗口中打开快速修复列表。因此，您将有一个单独的窗口，其中包含上次 vimgrep 中的所有行。在快速修复窗口中，您可以按 Enter 或双击一行以跳转到原始文件中的相应行。

`:colder`会让你回到旧的 quickfix 列表（旧的 vimgrep 结果）。并`:cnewer`前进到更新的搜索结果。

请注意，quickfix 列表在运行时也会更新`:make`（这就是为什么它被称为 quickfix 来修复错误）。正因为如此，quickfix 列表还有一个替代品，称为“位置列表”。要使用它，请使用`:lvimgrep`，然后使用 l 前缀命令而不是 c 前缀命令 - `:lopen`, `:lolder`, `:lnewer`.

当然，您可以做的还有很多。有关`:help quickfix`更多信息，请参阅。

PS，您说您不想要一种删除行然后撤消它们的方法。但是既然你标记`g/ERROR`为答案，我想我会指出一个快速而肮脏的方法是做`g!/ERROR/d`。然后，您可以使用 轻松撤消它`u`。另外仅供参考，您可以`:set hlsearch`突出显示与`:g`命令匹配的模式。

* * *

## 回答 #3

> 赞同：39
> 
>             
> 
> 时间：2009-05-14T12:13:18.170

您可以使用

```
:g/ERROR/ 
```

打印所有带有 ERROR 的行

还有一个我看过很多次但没有使用的 Vim 插件：
 [foldsearch : fold away 与给定模式不匹配的行](http://www.vim.org/scripts/script.php?script_id=2302)

* * *

## 回答 #4

> 赞同：27
> 
>             
> 
> 时间：2015-09-06T07:11:56.517

最好的方法是->

```
:vimgrep /something/g % | copen 
```

这将打开您的关键字的匹配列表，并且还将在快速修复窗口中仅显示匹配的行。

如果不考虑当前文件，则将 % 替换为文件路径。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2018-10-12T18:25:12.970

`:vimgrep /something/g % | copen`效果很棒。也`:g/<pattern>/d`可用于删除带有图案的线条

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2019-07-24T12:01:16.157

如果你碰巧使用`fzf`你可以使用：

*   `:Lines`在所有打开的文件中

*   `:BLines`仅在开放缓冲区中

*   `:Rg [pattern]`使用`ripgrep`

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2020-01-09T14:19:24.300

一些hackish肮脏的方式来做到这一点：

```
:w (save)
ggdG (deletes everything)
:.!grep something % (replace current line with grep output) 
```

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2015-05-28T07:26:45.803

您可能指的是 less vi vim & /pattern/ 中的命令，它显示包含 /pattern/ 的行（如 grep）。

# java - 在 JBoss 中重启后恢复会话

> ID：862969
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-14T12:11:07.410
> 
>         
> 
> 标签：java, session, jakarta-ee, jboss

重启后我能以某种方式恢复 JBoss 上的会话吗？我想在我的开发机器上使用它。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:33:19.480

所有 servlet 容器都将尝试在服务器重新启动之间保持会话处于活动状态。但是所有会话对象都必须是可序列化的才能使其工作。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:35:34.700

这在[文档](http://www.jboss.org/community/wiki/DisableSessionPersistence)中得到了回答：

> 从 JBoss-3.2.6RC1 开始：
> 
>   
>   
> 
> 默认的 tomcat 会话管理器将持久化会话。如果会话包含不可序列化的数据，这可能会在重新启动 jboss 或重新部署战争时导致问题。  
> 
>   
>   
> 
> 要禁用会话持久性，请创建一个带有 Manager 元素的 WEB-INF/context.xml，该元素将路径名设置为空值：

```
<Context>
   <Manager className="org.apache.catalina.session.StandardManager"
      pathname="" ></Manager>
</Context> 
```

> JBoss-3.2.5 和更早版本不读取 WEB-INF/context.xml 文件。  
> 
>   
>   
> 
> JBoss 4.0.3 默认禁用此功能。见 /jboss-4.0.3/server/default/deploy/jbossweb-tomcat55.sar/context.xml

# sql - 为什么使用多个选择而不是使用之间的查询更快？

> ID：862970
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-14T12:11:22.840
> 
>         
> 
> 标签：sql, sql-server, tsql, sql-server-2008

我在 Sql Server 2008 Express 中有一个表，其中包含 1800 万条记录。结构看起来像这样（简化）：

Id、GroupId、值、已创建

Id 是带有聚集索引的主键

GroupId 是非聚集索引

在这种情况下，每 10 行获得一个新的 groupId，这意味着记录 1-10 的 GroupId 为 1，记录 11-20 的 GroupId 为 2，依此类推。

**测试 1：此查询需要 23 秒运行并返回 99 条记录：**

> DECLARE @Start INT 
> 
> SET @Start = 1050 
> 
> select * from FieldValues where GroupId between @Start and @Start + 10

**测试 2：此查询运行时间为 0 秒，返回 99 条记录：**

> DECLARE @Start INT 
> 
> SET @Start = 1050 
> 
> select * from FieldValues where GroupId = @Start union 
> 
> select * from FieldValues where GroupId = @Start + 1 union 
> 
> select * from FieldValues where GroupId = @Start + 2 union 
> 
> select * from FieldValues where GroupId = @Start + 3 union 
> 
> select * from FieldValues where GroupId = @Start + 4 union 
> 
> select * from FieldValues where GroupId = @Start + 5 union 
> 
> select * from FieldValues where GroupId = @Start + 6 union 
> 
> select * from FieldValues where GroupId = @Start + 7 union 
> 
> select * from FieldValues where GroupId = @Start + 8 union 
> 
> select * from FieldValues where GroupId = @Start + 9 union 
> 
> select * from FieldValues where GroupId = @Start + 10

注意：由于结果可以被缓存，我总是在每个测试之间打乱@Start变量以获得非缓存时间估计

为什么这些多重选择（看起来有些初学者已经完成）比测试中更优雅的选择要快得多1？

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2009-05-14T12:23:32.233

尝试在查询分析器中使用“显示实际执行计划”，您会看到第二个查询可能通过执行索引查找来实现结果，而前者（较慢）无法做到这一点，因为它不知道记录是连续的，因为它使用的索引是非聚集的。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T13:46:20.490

由于这些似乎是工会中相互排斥的陈述，我建议联合所有是比联合更好的选择。这将为服务器创建更少的工作。

# excel - MS Excel 是否在内部使用宏？

> ID：862977
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T12:12:23.337
> 
>         
> 
> 标签：excel, vba

我一直想知道我们所做的任何操作是否在执行之前实际上已转换为 VBA 宏。这就是我们能够录制宏的方式吗？如果不是，您会称其为设计冗余吗？它会更快/更慢它不是现在的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:26:26.343

不，它们没有被翻译。发生的情况是大多数 UI 命令执行与 VBA 命令相同的代码。

此外，VBA 不是直接执行的，而是首先将代码转换为字节码，这是一种紧凑的代码形式，可以快速查找要调用的编译例程。

近年来，有了更强大的计算机，我不止一次尝试过将应用程序变成脚本语言的巨大库，然后用所述脚本语言实现 UI 的想法——这将允许最终的个性化应用程序。

可悲的是，人们仍然坚持用 XML 或 C++ 制作 UI 比用 Python 或 LUA 编写和更改更快的想法。你能说“一直都是这样”吗？

# c# - 修改foreach中的内容

> ID：862979
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-14T12:12:46.830
> 
>         
> 
> 标签：c#, arraylist, structure, casting

我倾向于使用结构的 ArrayLists。然后很容易用 foreach 循环遍历列表。

我遇到的问题是我不能使用 foreach 来修改结构内容，而必须使用 for 和混乱的类型转换。

```
((dataStructure)files[x]).name = here; 
```

有没有更整洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
>             
> 
> 时间：2009-05-14T12:17:01.203

是的，有：不要使用 untyped `ArrayList`，这些类型已被弃用，取而代之的是`System.Collections.Generic`. 在你的情况下：[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)。

您仍然不能将它与`foreach`循环结合使用来修改结构值，但至少您不必强制转换。

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-05-14T12:17:42.073

我知道这听起来很简单，但**[只是对可变值类型说不](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)**。

它们几乎*从来都不*是问题的正确解决方案。有*极*少数例外，但类几乎*总是*要走的路。

此外，如果您真的在使用 an`ArrayList`那么您将已经产生拆箱成本......（正如 Konrad 所说，如果您可以使用 .NET 2.0，那么请使用泛型。）

如果您真的坚持使用可变结构，请使用`for`循环而不是`foreach`. 但是，无论如何，请换班。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:18:53.773

使用:的**通用**版本。`ArrayList``List<DataStructure>`

这样事情看起来好多了：

```
files[x].name = here; 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2012-08-16T08:09:03.570

是的，在某些情况下`List <T>`也没有用。在这些情况下，手册中最古老的技巧起作用了。而不是`foreach`，您应该使用 while 循环：

```
while (listItem.Count >0)
{
//do operation with 0th element of List Item always like
 deletefunc(lisItem[0]);
} 
```

# assembly - MC68000 RAM 中的数据布局

> ID：862986
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T12:15:25.077
> 
>         
> 
> 标签：assembly, ram

我将在 8 小时内参加考试……请确保我在 MC68000 考试之前能够正确理解一些事情。

问题---在下面的内存连接中写入以下值，因为微处理器会将它们存储为从地址 $8000 开始的位或十六进制

一种

2AC543 ---- 这个我必须在前面加两个 00 吗？

5863a04 ------我必须在前面加一个0吗？

5D4 ------再加一个0对吗？

广告

BC123 -----加三个0对吗？

C

F2

1B4D890378 --- 不确定这部分.....

我是这样做的

$8000 0A | 00

8002 美元 2A | C5

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-14T12:20:55.577

m68k 是大端，这意味着最左边/第一个值是最高顺序。所以 0x2AC543 变成

```
$8000 0x00 0x2A 0xC5 0x43 
```

0x5D4 有趣的问题是：它会被存储为 16 位还是 32 位整数？m68k 两者都可以，所以任何一个`0x00 0x00 0x05 0xD4`都`0x5 0xD4`可能是正确的。

`1B.4D89.0378`显然太大而无法存储在 32 位中。如果你使用两个长寄存器，你会得到

```
$8000 00 00 00 1B   4D 89 03 78 
```

再次：最高阶的价值首先出现。

# sharepoint - WSS 和 OpenID

> ID：862992
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T12:16:16.027
> 
>         
> 
> 标签：sharepoint, forms-authentication, wss, dotnetopenauth

我已使用 OpenID 配置 WSS 以启用 FBA 身份验证。我添加了一个自定义登录页面。我能够使用 OpenID 帐户进行身份验证，但是当我返回到 default.aspx 页面时，我得到了“拒绝访问”页面。

问题是我如何告诉 WSS 允许 OpenID 身份验证进入 Web 应用程序？

我使用了 DotNetOpenId 库。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-08-01T18:02:28.100

如果您使用 FBA，您可以将 openid 帐户添加为 fba 帐户。您可以使用自定义登录页面轻松完成此操作。这是一个示例[http://blog.xsolon.net/Posts/sharepointopenid.aspx](http://blog.xsolon.net/Posts/sharepointopenid.aspx)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-15T14:15:57.197

我自己还没有与 WSS 集成，但是假设您在 FormsAuthentication 模式下拥有它，那么我认为可能会阻止您的唯一另一件事是，当您登录用户（使用 SetAuthCookie 或 RedirectFromLoginPage）时，您需要通过在用户所属的角色中。例如，如果 WSS 被操纵为仅邀请具有“WebUser”角色的用户，则成为将其传递给登录方法的用户。  

通过检查 WSS 站点的 web.config 文件，您可以了解需要哪些角色以及您的身份验证模式是什么。

# mozilla - 自动化 RAPIDSHARE 盗版文件删除过程

> ID：862993
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T12:16:16.900
> 
>         
> 
> 标签：mozilla, piracy, piracy-prevention, ubiquity

我发现了一个新的搜索引擎，它可以加快从 rapidshare 中查找盗版文件的速度，我该如何自动化一个工具来使用该引擎查找我们的产品并输出 rapidshare URL 列表，然后将其发送到 abuse@rapidshare.com。

搜索引擎：

[http://rapidlibrary.com/](http://rapidlibrary.com/) 
（注意，验证码图像只出现一次）

下面是一个不错的脚本，也许可以很容易地做到这一点？

[http://www.nasser.me/ubiquity/rapidsharecom-link-checker/](http://www.nasser.me/ubiquity/rapidsharecom-link-checker/)

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T12:29:49.300

我过去想过这个问题，我自己是一个“电视节目海盗”，这让我有点恼火，为什么像 The Pirate Bay 和 Mininova 这样的免费种子网站正在被删除，而其他不那么免费的网站，比如 Rapidshare、Megaupload 等等却**托管文件**并继续从盗版中**赚取数百万美元。**

这些网站的营销模式是病毒式的，这意味着用户传播他的链接的次数越多，他获得的积分就越多，他未来为“订阅”支付的费用就越少，因此很明显假设这些相同的链接会在互联网上很好地传播。

我会搜索并废弃所有主要的warez论坛，一两个星期，然后在网络上搜索应该找到仍然指向盗版文件的所有剩余博客/网站。

# language-agnostic - 什么是布尔网络？

> ID：862996
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-14T12:17:19.377
> 
>         
> 
> 标签：language-agnostic

我正在阅读[这个 SO 问题](https://stackoverflow.com/questions/861978/need-a-way-to-present-a-prerequisites-for-an-object)，我对什么是布尔网络很感兴趣，我在 Wikipedia 中查找了它，但 IMO 的解释太模糊了。谁能解释一下布尔网络是什么？如果可能的话还有一些例子？

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-05-14T12:30:58.830

布尔网络表示一类网络，其中节点具有*状态*，边表示*状态*之间的转换。在最简单的情况下，这些状态要么是 1 要么是 0——即布尔值。

转换可以是简单的激活或非激活。例如，考虑节点`a`和`b`边缘从`a`到`b`。

```
 f
a ------> b 
```

这里，`f`是一个转换函数。在激活的情况下，`f`可以定义为：

```
f(x) = x 
```

ie`b`的值为 1 当且仅当`a`的值为 1。相反，失活（或抑制）可能如下所示：

```
f(x) = NOT x 
```

更复杂的网络使用更多涉及的布尔函数。例如考虑：

```
a       b
 \     /
  \   /
   \ /
    v
    c 
```

在这里，我们有从`a`to`c`和 from `b`to 的边`c`。`c`可以定义`a`如下`b`。

```
f(a, b) = a AND NOT b 
```

因此，仅当同时处于活动状态和非活动状态`c`时才被激活。`a``b`

这样的网络可以用来模拟各种关系。我知道的一个是在系统生物学中，它们被用来模拟活细胞中化学物质的（巨大的）相互作用网络。这些网络有效地模拟了细胞的某些方面是如何工作的，它们可用于发现缺陷、药物攻击点以及指向功能等效性的不相关组件之间的相似性。这对于理解生活的运作方式至关重要。

# visual-studio - 请解释一下 Outlook 插件是什么

> ID：862999
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-14T12:17:45.787
> 
>         
> 
> 标签：visual-studio, outlook

有人可以快速解释一下何时使用 Visual Studio 2008 Outlook 2007 Ad-In 项目类型吗？这与直接在 Outlook 中开发一堆 Outlook 宏相比如何？

基本上，我想让某种应用程序从 pop3 电子邮件框中读取电子邮件（带附件），对主题/发件人/内容进行一些过滤/编辑/验证，然后如果满足某些条件，将附件保存到本地文件，然后在 SQL Server 数据库表中添加一个条目（即日期/发件人/主题/消息）。

似乎至少有 10 种不同的方法可以做到这一点......所以在 Outlook 宏和 VS Office 项目之间，我该如何选择？

我不清楚，如果我将此解决方案创建为 Visual Studio Outlook 加载项，它在哪里运行？它是否已加载到 Outlook 中，是否作为单独的进程运行并与 Outlook 来回通信？如果 Outlook 没有运行，它会启动它吗？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-14T12:25:46.580

Outlook 加载项是一个编​​译组件，它使用 Outlook API 来执行您需要的任务。宏/VB 脚本是实际使用相同 API 的解释脚本。如果您想部署您的功能，附加方法会更好。

当您在 Visual Studio 中处理 Outlook 插件时，您将创建一个集成到 Outlook 应用程序中的 .NET 组件，该应用程序是用 C++ 编写的，因此使用 COM。您必须小心托管/非托管类型和释放从 Outlook 检索的对象。

我最近刚刚完成了这样一个工具，但我选择使用 Add-in Express ( [http://www.add-in-express.com/](http://www.add-in-express.com/) )。这些人在 [具有挑战性的] Outlook API 之上提供了一层抽象，并且如果您遇到困难，还可以提供一些出色的支持。

在我的情况下，使用 Add-in Express，我通过在项目属性中将 Outlook 设置为要运行的应用程序命令来“运行”。Add-in Express 会整理 Outlook 中加载项的安装。因此，当我按“运行”时，Outlook 会启动并显示我的加载项，这可能会以正常方式进行调试。我不确定 VSTO（Visual Studio Tools for Office）在这方面是如何工作的——或者至少，我不记得了。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-14T12:24:50.200

[这](http://www.xobni.com/)是一个 Outlook 加载项的示例。就我个人而言，我看不到可分发的宏。** 
````******