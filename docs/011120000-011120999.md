# StackOverflow 问答 11120000-11120999

# javascript - 嵌套函数内的 Javascript 'this' 关键字

> ID：11120002
> 
> 赞同：0
> 
> 时间：2012-06-20T12:52:04.830
> 
> 标签：javascript, constructor, this, nested-function

此 Javascript 代码在嵌套函数（嵌套在构造函数中）内使用“this”关键字：

```
o=new MyCtor();
for (var p in o) {
  print(p);
  print(o[p]);
}
function MyCtor() {
  this.a=1;
  var instance=this;
  nested();
  function nested() {
    this.b=2;
    instance.c=3;
  }
} 
```

结果是这样的：

```
a
1
c
3 
```

请注意 print() 只是将输出转储到屏幕上，就像浏览器中的 alert() 一样（我正在使用独立的 Spidermonkey 进行测试，而不是在浏览器中）。请注意，“this.b”不能创建属性“b”。

只是想知道构造函数内的嵌套函数中的“this”指的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:53:44.493

由于您直接调用函数（不是作为对象属性）并且没有`new`关键字，`this`因此是默认对象（`window`在 Web 浏览器`global`中、节点中等）。

在 jsfiddle 上查看[现场演示](http://jsfiddle.net/G7eXC/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:55:58.610

它指的是窗口。通过运行这个小提琴并打开控制台自己看看：http: [//jsfiddle.net/sveinatle/9brLj/](http://jsfiddle.net/sveinatle/9brLj/)

# masking - vml 剪贴蒙版

> ID：11120004
> 
> 赞同：5
> 
> 时间：2012-06-20T12:52:10.807
> 
> 标签：masking, vml

我正在尝试在 VML 中创建一个与`clip-path`SVG 对应的剪贴蒙版？那可能吗？

基于大量但相当有限的示例，我尝试绘制形状：

```
<vml:group style="WIDTH: 1px; HEIGHT: 1px" class=vml-element coordsize = "1,1">
    <vml:shape style="WIDTH: 1px; HEIGHT: 1px" id=vectorObject2 class=vml-element _fill-color="red" _fill-opacity="1" _stroke-color="black" _stroke-opacity="1" _stroke-width="1" coordsize = "1,1" filled = "t" fillcolor = "red" stroked = "t" strokecolor = "black" strokeweight = ".75pt" path = "m0,0 l100,0,0,100 xe">
        <vml:fill class=vml-element opacity = "1"></vml:fill>
        <vml:stroke class=vml-element opacity = "1"></vml:stroke>
    </vml:shape>
</vml:group> 
```

然后使用`vmlframe`：

```
<vml:vmlframe class=vml-element clip = "t" size = "15pt,37.5pt" src = "#vectorObject2">    </vml:vmlframe> 
```

**形状**（三角形）的绘制按预期工作，但我找不到使用**vmlframe**掩盖它的方法。这是实现掩蔽的正确方法吗？

请忽略所有奇怪的自定义属性，因为大多数 VML 代码是通过 3rd 方库生成的。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:12:41.287

使用[CSS 剪辑属性](http://www.w3.org/TR/CSS2/visufx.html#clipping)来模拟剪辑路径，如[Dojo GFX 库](http://bugs.dojotoolkit.org/attachment/ticket/11296/vmlClip.patch)或类似[jsgraphics](http://www.walterzorn.de/en/jsgraphics/jsgraphics_e.htm)中所示。

# php - 多个 PHP 查询的指导

> ID：11120008
> 
> 赞同：0
> 
> 时间：2012-06-20T12:52:24.353
> 
> 标签：php, mysql, database

我正在尝试在 3 个相邻`<div>`容器中显示 3 个单独查询的结果。三个查询如下：

```
$query="SELECT * FROM students WHERE WeekOne='employer'";
$query="SELECT * FROM students WHERE WeekTwo='employer'";
$query="SELECT * FROM students WHERE WeekThree='employer'"; 
```

期望的输出：

> 第一周 ----- 第二周 ----- 第三周
> 
> 结果 1 ---------- 结果 1 ------------ 结果 1
> 
> 结果 2 ---------- 结果 2 ----------- 结果 2 (等等...)

有人可以帮我吗？我已经看过 PHP 手册上的 multi_query，但不知道如何实现它。非常感谢。

@Emmanuel G

```
<?

$user = "xx";
$user_password = "xx";
$db_name = "xx";
$db = new mysqli ("xx", $user, $user_password, $db_name);

$queries = array(
    "SELECT * FROM students WHERE WeekOne='$Name'",
    "SELECT * FROM students WHERE WeekTwo='$Name'",
    "SELECT * FROM students WHERE WeekThree='$Name'"
);

// iterate through the queries and their results
foreach($queries as $query){
    $result = $mysqli->query($query);
    echo '<div>'; // open that div up
    while($row    = $result->fetch_assoc()){       // gives u an array hoorah!
        echo '<pre>'.print_r($row, true).'</pre>'; // just to look at it
        echo "<p>{$row['FirstName']}</p>";              // just an example
    }
    echo '</div>'; // close it up
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:55:04.453

最简单的方法是将查询更改为：

```
$query="SELECT * FROM students WHERE WeekOne='employer' OR WeekTwo='employer' OR WeekThree='employer'"; 
```

然后相应地格式化输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:58:11.043

是的，更改您的查询以将所有结果集中到一个查询请求中，然后您从数据结果中进行操作，多次点击以获取服务器的简单答案并不是最佳实践，因为您的查询非常简单。

但是对于你的问题

```
multi_query($query)  //you can use this 
```

看看这里[http://suite101.com/article/how-tor-run-multiple-mysql-queries-with-php-a105672](http://suite101.com/article/how-tor-run-multiple-mysql-queries-with-php-a105672)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:06:19.047

要显示它，只需遍历每个单独的结果并将其放入 div 中。为了使它们相邻，您可以在 div 中添加一些 css 以使它们浮动，因为 div 本质上是块元素，并且在没有帮助的情况下不会水平排列。

假设您已经设置了数据库连接并且应该使用 mysqli 或者您可以像这样生成标记：

```
// u should try to make this one query but that's irrelevant to the question 
// so I'll leave that to you to do later
$queries = array(
    "SELECT * FROM students WHERE WeekOne='employer'",
    "SELECT * FROM students WHERE WeekTwo='employer'",
    "SELECT * FROM students WHERE WeekThree='employer'"
);

// iterate through the queries and their results
foreach($queries as $query){
    if($result = $mysqli->query($query)){// only do stuff if you get a result
        echo '<div>';                                  // open that div up
        while($row = $result->fetch_assoc()){          // gives u an array hoorah!
            echo '<pre>'.print_r($row, true).'</pre>'; // just to look at it
            echo "<p>{$row['data']}</p>";              // just an example
        }
        echo '</div>';                                 // close it up

        // mysqli free the result to prep for the next one
        $result->free();
    } else {
        echo "Query failed to return results:\n$query\n";
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T13:00:32.367

我猜你正在将雇主作为 URL 参数传递，所以无论哪种方式，你都可以传递`week`你想要比较的，比如说

```
$week = $_GET['weekOne'];
$employer = $_GET['employer'];

$query="SELECT * FROM students WHERE $week= $employer"; 
```

在执行查询之前确保你`escape`的数据，以避免sql注入

我希望它会帮助你。谢谢

# android - 即使尺寸与屏幕匹配，WallpaperManager 也会缩放图像

> ID：11120012
> 
> 赞同：7
> 
> 时间：2012-06-20T12:52:30.963
> 
> 标签：android, wallpaper, homescreen

我有一个应用程序将壁纸应用到主屏幕，其图像与屏幕尺寸匹配，但是在 Galaxy s3 上，当我应用它时，壁纸会放大，即使使用的图像与屏幕尺寸完全匹配！它是静态图像，当您在主屏幕上的页面之间切换时甚至不会滚动。奇怪的是，如果我使用内置图库应用图像，则无需缩放即可很好地应用壁纸（它带有“裁剪图像”屏幕，但裁剪区域本身与图像的边缘匹配）

我使用的代码在一系列手机（galaxy note、ace 2、s2 等）上都可以正常工作，但在 s3 上却不行；我想知道是否有什么办法可以强制墙纸正确填充屏幕？我用来应用壁纸的当前代码是：

```
WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);   
wallpaperManager.setWallpaperOffsets(wallpaperViewer.getApplicationWindowToken(), 0, 0);
wallpaperManager.setBitmap(BitmapFactory.decodeFile(file.getPath()));//file is jpg on sd card 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T15:00:31.740

**编辑**：添加了 Y 偏移修复 - 感谢@Jason Goff！

好的，原来s3上主屏幕的最小宽度不是720，而是1280！您可以通过调用找出所需的墙纸的最小宽度和高度

```
wallpaperManager.getDesiredMinimumWidth();//returned 1280 on s3
wallpaperManager.getDesiredMinimumHeight();//also returned 1280 on s3 
```

因此，为了将壁纸应用到屏幕中心，我必须动态创建一个 1280x1280 的空白位图，然后将我的壁纸覆盖到空白位图的中心，我创建了一个带有调整位图方法的静态 BitmapHelper 类，这里是创建位图和覆盖壁纸图像的方法：

```
public class BitmapHelper {

public static Bitmap overlayIntoCentre(Bitmap bmp1, Bitmap bmp2) {
    Bitmap bmOverlay = Bitmap.createBitmap(bmp1.getWidth(), bmp1.getHeight(), bmp1.getConfig());
    Canvas canvas = new Canvas(bmOverlay);
    canvas.drawBitmap(bmp1, new Matrix(), null);//draw background bitmap

    //overlay the second in the centre of the first 
    //(may experience issues if the first bitmap is smaller than the second, but then why would you want to overlay a bigger one over a smaller one?!)
     //EDIT: added Y offest fix - thanks @Jason Goff!
     canvas.drawBitmap(bmp2, (bmp1.getWidth()/2)-(bmp2.getWidth()/2), (bmp1.getHeight()/2)-(bmp2.getHeight/2), null);

    return bmOverlay;
}

public static Bitmap createNewBitmap(int width, int height)
{
            //create a blanks bitmap of the desired width/height
    return Bitmap.createBitmap(width, height, Config.ARGB_8888);
}
} 
```

并使用我的 BitmapHelper 继承我的其余代码：

```
private void applyWallpaperFromFile(final File file)
{
    Bitmap wallpaperImage = BitmapFactory.decodeFile(file.getPath());
    try {
        if((wallpaperManager.getDesiredMinimumWidth()>0)&&(wallpaperManager.getDesiredMinimumHeight()>0))
        {
            Bitmap blank = BitmapHelper.createNewBitmap(wallpaperManager.getDesiredMinimumWidth(), wallpaperManager.getDesiredMinimumHeight());
            Bitmap overlay = BitmapHelper.overlayIntoCentre(blank, wallpaperImage);

            wallpaperManager.setBitmap(overlay);

        }
        else
        {
            wallpaperManager.setBitmap(wallpaperImage);
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            Toast.makeText(WallpaperActivity.this,"Wallpaper set to:"+file.getName(), Toast.LENGTH_SHORT).show();

        }
    });

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-24T06:15:36.387

谢谢你的文章。我发现我的壁纸卡在设备屏幕的顶部，所以我稍微更改了 overlayIntoCentre 方法，将第二次`drawBitmap`调用中的 0 替换为下面的高度计算。

```
public static Bitmap overlayIntoCentre(Bitmap bmp1, Bitmap bmp2) {
    Bitmap bmOverlay = Bitmap.createBitmap(bmp1.getWidth(), bmp1.getHeight(), bmp1.getConfig());
    Canvas canvas = new Canvas(bmOverlay);
    canvas.drawBitmap(bmp1, new Matrix(), null);//draw background bitmap

    //overlay the second in the centre of the first 
    //(may experience issues if the first bitmap is smaller than the second, but then why would you want to overlay a bigger one over a smaller one?!)
    canvas.drawBitmap(bmp2, (bmp1.getWidth()/2)-(bmp2.getWidth()/2), (bmp1.getHeight()/2)-(bmp2.getHeight/2), null);

return bmOverlay; 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T16:22:50.683

您可能想再看看这个： http: [//developer.android.com/reference/android/app/WallpaperManager.html#suggestDesiredDimensions(int, int)](http://developer.android.com/reference/android/app/WallpaperManager.html#suggestDesiredDimensions%28int,%20int%29)

来自开发者参考：

> 公共无效建议DesiredDimensions（int minimumWidth，int minimumHeight）
> 
> 自：API 级别 5 仅供当前家庭应用程序使用，以指定要使用的壁纸尺寸。这允许此类应用程序拥有比物理屏幕更大的虚拟壁纸，与其工作空间的大小相匹配。
> 
> 请注意似乎没有阅读此内容的开发人员。这是为了让主屏幕告诉他们想要什么尺寸的壁纸。其他人不应该打电话给这个！当然不是其他改变壁纸的非主屏幕应用程序。这些应用程序应该检索建议的尺寸，以便他们可以构建与之匹配的壁纸。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T23:43:31.830

您可以尝试使用SuggestDesiredDimensions() 方法

# sql - SQL Server 2008 中的交叉表查询

> ID：11120015
> 
> 赞同：0
> 
> 时间：2012-06-20T12:52:38.377
> 
> 标签：sql, sql-server-2008, ms-access-2007, pivot, crosstab

我有一个包含以下字段的 SQL 表

```
ID, Rly, Shed, Loco_no, shed, Date_failure, Equipt 
```

我在 MS Access 2007 中使用以下脚本在访问中使用交叉表查询

```
TRANSFORM Count(Sheet1.[sno]) AS CountOfsno
SELECT Sheet1.[Equipt], Count(Sheet1.[sno]) AS [Total Of sno]
FROM Sheet1
GROUP BY Sheet1.[Equipt]
PIVOT Sheet1.[Shed]; 
```

如何将此查询转换为 SQL Server 存储过程以在 aspx 页面上使用？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:20:48.720

在 SQL Server 中，您需要查看[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数。考虑到您没有提供有关表格或示例数据的许多详细信息，根据您在评论中的尝试，类似这样的内容可能会为您指明正确的方向。

```
SELECT *
FROM
(
    SELECT Equipt, Shed
    FROM PunctualityMain
) x
PIVOT
(
    COUNT(Equipt)
    FOR Shed IN ([BSL], [AQ])
) p 
```

如果您发布更多详细信息，那么我们可以提供更多帮助。

# ruby-on-rails - rails 和 node.js 之间的路由

> ID：11120024
> 
> 赞同：1
> 
> 时间：2012-06-20T12:53:06.233
> 
> 标签：ruby-on-rails, node.js, routes

在rails中，我使用回形针+ resque上传和处理图像，它消耗太多内存并且非常慢。我想尝试 node.js 在后台处理这些东西。

可能的 route rails 和 node.js 都具有相同的端口吗？

一些路由处理 rails，一些路由到 node.js。例如，

### 导轨

```
/users/:user_id/albums(.:format)          
/users/:user_id/albums/new(.:format)      
/users/:user_id/albums/:id/edit(.:format) 
```

### 节点.js

```
/uploads 
```

谢谢。

# 解决方案

POST /uploads 到 node.js(port 8080) 来处理，其他的rails。下面是我的 nginx 配置文件

```
 location = /uploads {
    proxy_pass http://127.0.0.1:8080/uploads;
  }

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  } 
```

谢谢@Matthew Ratzloff

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:43:50.293

是的。您可以使用反向代理并将选择路径转发到您的 Node.js 服务器，并将其他路径转发到您的 Rails 应用程序。

*   [httpd](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)
*   [nginx](http://wiki.nginx.org/HttpProxyModule)

现在，这是个好主意吗？好...

更好的解决方案是继续在 Rails 中的 Resque 中创建作业，但使用[Coffee-Resque](https://github.com/technoweenie/coffee-resque)之类的东西来实际处理作业。这就是我要走的路线。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:22:32.453

```
No; 10.times { No } 
```

但。假设你想这样做。你会：

1.  将文件直接上传到 S3
2.  向 Node 发出请求以下载和处理文件
3.  完成后，向 Rails 发送 HTTP 请求以使用文件属性更新其数据库。

# sql - SQL：查找hierarchyids的最低共同祖先

> ID：11120026
> 
> 赞同：3
> 
> 时间：2012-06-20T12:53:08.823
> 
> 标签：sql, sql-server, parent, hierarchyid, ancestor

我有一个包含（除其他外）值层次结构和父层次结构的数据集。对于另一个查询，我需要hierarchyids 的最低共同祖先，因为我对sql 和特别是hierarchyids 相当陌生。

```
ID          HID         ParentHID
1           0x5CB280    0x5CA0
2           0x5CABBB08  0x5CABBA
3           0x5CB270    0x5CA0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:47:47.823

假设您的层次结构没有严重平衡偏斜（例如列表），则获取祖先链很便宜。接下来，你要做的就是取两个祖先链，做集合交集，然后找到一个最长的层次结构id。

# math - 以美分为单位的音高转换视频速率数学

> ID：11120028
> 
> 赞同：0
> 
> 时间：2012-06-20T12:53:12.560
> 
> 标签：math, pitch

对不起，我的数学/音乐知识很差。假设我想以 50% 和 75% 的速度播放视频文件，在这两种情况下我必须改变多少美分才能保持相同的音高，公式是什么？

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:10:02.800

将频率降低 50% 意味着声音降低了一个八度

一个八度是 12 个半音

1 个半音是 100 美分

所以如果你以 50% 的速度播放它，你需要将它提高 1200 美分

# java - 如何区分 textField.setText() 和在 java 中手动向 textField 添加文本？

> ID：11120030
> 
> 赞同：9
> 
> 时间：2012-06-20T12:53:24.137
> 
> 标签：java, swing, jtextfield, documentlistener

我的应用程序中有一个 textField，当用户单击 JList 中的一个项目时，它将以编程方式启动 (textField.setText() )。稍后用户将手动更改此值。我坚持使用文档侦听器来检测此文本字段中的更改。当以编程方式发生更改时，它必须什么都不做，但如果手动发生，它应该将背景更改为红色。

**如何检测 textField 是手动填写还是 textField.setText() 填写？**

```
txtMode.getDocument().addDocumentListener(new DocumentListener() {
        public void insertUpdate(DocumentEvent e) {
            if (!mode.equals(e.getDocument()))
            txtMode.setBackground(Color.red);
        }

        public void removeUpdate(DocumentEvent e) {
            if (mode.equals(e.getDocument()))
            txtMode.setBackground(Color.white);              
        }

        public void changedUpdate(DocumentEvent e) {
            //To change body of implemented methods
        }
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T13:02:04.943

有两种方法

*   如果完成，请`DocumentListener`在`setText("...")`添加前删除`DocumentListener`

代码

```
public void attachDocumentListener(JComponent compo){
      compo.addDocumentListener(someDocumentListener);
}

//similair void for remove.... 
```

*   使用价值`boolean`来禁用“如果需要”，但你必须改变你的内容`DocumentListener`

例如

```
 txtMode.getDocument().addDocumentListener(new DocumentListener() {
    public void insertUpdate(DocumentEvent e) {
        if (!mode.equals(e.getDocument()))

        if (!updateFromModel){
           txtMode.setBackground(Color.red);
        }  
    }

    public void removeUpdate(DocumentEvent e) {
        if (mode.equals(e.getDocument()))

        if (!updateFromModel){
           txtMode.setBackground(Color.white);
        }  
    }

    public void changedUpdate(DocumentEvent e) {
        //To change body of implemented methods
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T13:30:31.727

请记住，所有事件侦听器都在 Swing 事件线程上执行。因此，事情可能不会按照您希望的顺序进行。在这种情况下，任何解决方案都将是 hack-ish，因为您无法完全控制摆动线程以及谁在其上发布事件。

我想说的是：假设您选择使用一些标志来让您的听众知道这是一个程序性更改。这是可能的情况（我假设您遵循通过摆动线程执行任何 UI 更新的良好规则`invokeLater`）：

1.  设置标志以跳过事件
2.  设置文本
3.  将标志设置为假

如果您在一次调用中完成所有操作，则 setText 将触发发布到事件队列末尾的更新事件，因此，当它们被执行时，该标志已经为假。

因此，您应该在一次`invokeLater`通话中执行第 1 步和第 2 步，甚至`invokeAndWait`，然后发布另一个事件`invokeLater`以取消设置标志。并祈祷您的用户不要那么快地在这两个调用之间进行一些更改，否则，它们也将被视为程序性更改。

# ios - 是否有适用于 iOS 的第 3 方谷歌地图 API

> ID：11120040
> 
> 赞同：0
> 
> 时间：2012-06-20T12:53:41.570
> 
> 标签：ios, google-maps, mapkit

我需要从我的 iOS 应用程序中删除 mapkit，但仍然需要谷歌地图。在这种特殊情况下，我只需要可缩放和可滚动的卫星视图。标记会很好，但不是必需的。

我可以将 webview 与 javascript 一起使用，但我更喜欢类似 mapkit 的 API，这样我就可以轻松地从 mapkit 过渡而无需付出很大的努力。

是否有第三方谷歌地图 API 可以让我在 iOS 设备上使用谷歌地图，而无需调用 Apple 的内置地图 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:09:42.970

谷歌昨天发布了他们新的 iOS 版 Maps SDK。可以在这里找到：[https ://developers.google.com/maps/documentation/ios/](https://developers.google.com/maps/documentation/ios/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:07:49.307

如果您正在寻找替代库，有几个：

*   [RouteMe](https://github.com/route-me/route-me)是开源的，支持多种地图源。
*   [MapBox](http://mapbox.com/mobile/)是带有 iOS SDK 的第三方服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:02:17.473

Google 地图服务条款明确[禁止直接访问磁贴](https://developers.google.com/maps/faq#tos_tiles)。您将无法在 MapKit 之外的 iOS 上合法使用 Google 地图图块。

# ios - 如何从我的 RubyMotion 代码中的资源文件夹访问文件？

> ID：11120043
> 
> 赞同：2
> 
> 时间：2012-06-20T12:53:45.523
> 
> 标签：ios, rubymotion

我的 Rubymotion 项目的资源/文件夹中有一些数据文件。如何在代码中访问它们？没有路径访问它们是行不通的。

例如，我在 resources/ 中有一个名为 schema.json 的文件

这是我正在使用的代码：

```
NSData.dataWithContentsOfFile("schema.json") <--- returns nil 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T13:08:16.763

弄清楚了。

```
path = NSBundle.mainBundle.pathForResource("schema", ofType:"json")
NSData.dataWithContentsOfFile(path) 
```

# c# - 仅选择部分子节点时，将父节点复选标记更改为框

> ID：11120044
> 
> 赞同：0
> 
> 时间：2012-06-20T12:53:53.187
> 
> 标签：c#, winforms, treeview, treenode

> **可能重复：**
> [WinForms TreeView 中的三态复选框](https://stackoverflow.com/questions/5626031/tri-state-checkboxes-in-winforms-treeview)

当仅选择父节点中的一些子节点时，如何将树视图中父节点复选框中的符号更改为绿色框而不是复选标记？

例子：

![在此处输入图像描述](../Images/54eeb06b745bf0362d0b715ad0b30db9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:08:13.877

[这个已经为您完成创建 TriStateTreeView 工作的代码项目](http://www.codeproject.com/Articles/22116/Tri-State-TreeView-Control-for-NET-1-1)怎么样？否则，无论如何您都需要创建自己的控件

# javascript - 如何在 Sencha Touch 2 中将所有 JavaScript 异常写入文本文件？

> ID：11120045
> 
> 赞同：0
> 
> 时间：2012-06-20T12:53:56.697
> 
> 标签：javascript, html, sencha-touch-2, mobile-website

每当我的 JavaScript 函数发生错误时，我想将所有 Javascript 错误记录/写入文本文件。使用 try catch 块，我正在捕获异常。我需要将此异常记录到文本文件中。如何使用 Sencha Touch 2 实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:02:53.673

~~假设您正在编写一个移动 Web 应用程序（基于您对 Sencha Touch 的评论），您不能直接使用 JavaScript 执行此操作 - 正如 Chris 所说，它无法访问文件系统。~~ *更正*：不完全正确。您还可以使用[HTML5 File API](http://www.html5rocks.com/en/tutorials/file/dndfiles/)，具体取决于您所在的平台（可能值得在您的问题中澄清您正在开发的平台）。

此外，如果您准备使用混合移动框架重新设计您的应用程序，您可以在一定程度上访问文件系统。例如，使用 Apache Cordova（以前称为 PhoneGap），您可以使用它的 File API：

[http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#File](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#File)

您必须编写一些通用的日志记录代码来在该 API 和 try/catch 之间架起一座桥梁。您仍然需要进行大量的复制“n”粘贴，将您的通用日志记录代码放入每个 catch 块中。我不知道有一种更跨领域的方式来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:56:17.400

JavaScript 是一种客户端编程语言，因此不能直接访问文件系统。

您需要发送服务器端请求来创建/修改/删除文本文件。

# php - Aptana 项目（Web 项目与 php 项目和 sql 支持）

> ID：11120046
> 
> 赞同：2
> 
> 时间：2012-06-20T12:54:06.030
> 
> 标签：php, mysql, sql, aptana, aptana3

我是使用 Aptana 进行 Web 开发（HTML、JavaScript、PHP、MySQL）的初学者。

我想知道，创建 PHP 项目和创建 Web 项目有什么区别？

另外，如何在 Aptana 中启用 MySQL（或任何情况下的 SQL）支持？我需要安装插件吗？

谢谢，

约翰·戈切

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:05:19.790

**Web 项目**是`not specified to any language`. 它可能在`HTML, CSS, JS, PHP, ASP, JSP`等。

同时，**PHP 项目**是`specified to php only`. 突出显示功能和缩进的方式是根据php。

***您可以说 PHP 项目是 PHP 特定的 Web 项目。***

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:12:27.037

至于 SQL 支持，这就是我所做的：转到帮助 > 安装新软件。添加这些存储库：

[http://quantum.sourceforge.net/update-site](http://quantum.sourceforge.net/update-site)

[http://download.eclipse.org/tools/gef/updates/releases/](http://download.eclipse.org/tools/gef/updates/releases/)

另外，去这里获取 MySQL JDBC 驱动程序：

[http://dev.mysql.com/downloads/connector/j/5.0.html](http://dev.mysql.com/downloads/connector/j/5.0.html)

将其解压缩到某处的程序文件夹中（我不知道它是否重要）。

安装 gef，然后安装 Quantum DB。现在，转到 Window > Open Perspective > Other 并选择 Quantum DB。在左侧，您有一个书签列表。添加书签，然后单击“添加驱动程序”，然后单击“添加外部 Jar”。浏览到 JDBC 驱动程序的 Jar。打下一个。

现在您将看到一个非常标准的 MySQL 连接对话框，其中包含用户名、密码、端口、服务器和数据库名称。添加一个连接，你就可以开始了。现在，您在 Aptana 中拥有了一个可视化的 MySQL 编辑器。

# ruby-on-rails - 为什么 OmniAuth::Strategies::Facebook::NoAuthorizationCodeError 在omniauth on_failure 回调中没有处理？

> ID：11120051
> 
> 赞同：4
> 
> 时间：2012-06-20T12:54:38.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, callback, omniauth

我正在为 Rails 3.2.3 应用程序使用 Omniauth。

我已经配置了 on_failure 回调，如下所示。

```
OmniAuth.config.on_failure = Proc.new do |env|
  UsersController.action(:omniauth_failure).call(env)
end 
```

这处理错误“OmniAuth::Strategies::CallbackError”，但不处理“OmniAuth::Strategies::Facebook::NoAuthorizationCodeError”。

如何处理这个错误？我不能使用rescue_from，因为错误发生在机架级别。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T22:55:28.247

确保您的 Facebook 应用程序未在“沙盒模式”下运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:13:50.590

我遇到了同样的问题。

根据我的谦虚调查，这似乎是在[omniauth-facebook gem](https://github.com/mkdynamic/omniauth-facebook)中实施的策略中的一个错误（并且，快速浏览了其他几个）。 [这](http://inside.oib.com/getting-more-information-from-omniauth-exceptions/)是一篇关于omniauth 异常处理的好文章。它说

> ... OmniAuth 策略 [...]，如果遇到问题，调用方法失败！并传入一个描述问题的符号，例如 :invalid_credentials 和他们遇到的异常。失败！方法最终调用 OmniAuth.config.on_failure 并传入 Rack 环境（在做了一些其他事情之后，比如将异常粘贴到环境中......

可以从原始作者友好提供的[示例中推断出相同的内容。](https://github.com/intridea/omniauth-oauth/blob/master/lib/omniauth/strategies/oauth.rb)在[源代码](https://github.com/intridea/omniauth/blob/master/lib/omniauth/strategy.rb#L448)中没有强调它，我也没有在 wiki 文档中找到它（但我可能忽略了）。

许多策略，包括omniauth-facebook，目前都会引发我们无法再在应用程序级别捕获的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T00:55:22.233

@soundar：我希望它像宣传的那样以这种方式工作。

@fastcatch：正如您所指出的，这些策略没有正确处理这些失败案例。

@Jon Day：我必须为“omniauth-facebook”（1.4.0）修补 Rack 应用程序才能获得我需要的报告：

```
require 'newrelic_rpm'

module OmniAuth
  class Builder < ::Rack::Builder

    def call_with_error_handling(env)
      begin
        call_without_error_handling(env)
      rescue OmniAuth::Strategies::Facebook::NoAuthorizationCodeError => error
        # Do whatever you'd like when rescuing.. I wanted to report to NewRelic.
        NewRelic::Agent.notice_error(error, env)
        env
      end
    end

    alias_method_chain :call, :error_handling

  end
end 
```

我对这段代码并不感到自豪，但这是控制该异常的一种方法；）。

# android - 使用 BACK 按钮重新开始上一个活动

> ID：11120052
> 
> 赞同：0
> 
> 时间：2012-06-20T12:54:37.923
> 
> 标签：android, android-activity, back-button

有两个活动。以下是第一个活动。

```
@Override
public void onCreate(Bundle savedInstanceState) {

    try {
        super.onCreate(savedInstanceState);

        final CharSequence[] items = {"Pick from gallery", "Shoot now"};

        //Prepare the list dialog box
        AlertDialog.Builder builder = new AlertDialog.Builder(this);

        //Set its title
        builder.setTitle("Choose a video");

        //Set the list items along with checkbox and assign with the click listener
        builder.setSingleChoiceItems(items, 0, new DialogInterface.OnClickListener() {

            // Click listener
            public void onClick(DialogInterface dialog, int item) {

                if(items[item]=="Pick from gallery"){
                    Toast.makeText(getApplicationContext(), "Choose a video", Toast.LENGTH_SHORT).show();
                    dialog.dismiss();
                    Intent r1= new Intent("com.asin.amit.PIC");
                    r1.putExtra("choice", 1);
                    startActivity(r1);
                }

                if(items[item]=="Shoot now"){
                    Toast.makeText(getApplicationContext(), "Record a video", Toast.LENGTH_SHORT).show();
                    dialog.dismiss();
                    Intent r1= new Intent("com.asin.amit.PIC");
                    r1.putExtra("choice", 2);
                    startActivity(r1);
                }    
            }
        });

        AlertDialog alert = builder.create();

        //display dialog box
        alert.show();
    } 
    catch(Exception e)
    {
        Toast.makeText(getApplicationContext(), "Unknown issue, Kindly restart the application", Toast.LENGTH_LONG).show(); 

        e.printStackTrace();
    } 
```

当用户处于第二个活动并按下 BACK 按钮时，我希望第一个活动开始，但现在只出现黑屏，弹出菜单不可见。我必须旋转手机才能获得菜单。如何使其默认？另外，是否`try`需要使用`super.onCreate`？

**编辑** 另一个问题是，在第二个活动中我没有做任何任务，第一个任务是从画廊中挑选一个视频。如果`BACK`在这个阶段按下，然后出现一个空白屏幕，我必须`BACK`再次按下。如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:01:25.877

尝试`alert.show();`在**onResume()**方法中而不是在**onCreate()**中编写。

当用户从第二个活动按下返回按钮时，将调用第一个活动的 onResume()。

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:04:02.210

你可以用这个方法调用后面的Activity

这是我在我的应用程序中使用的示例

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
            // _progressDialog.dismiss();
            if (getIntent().getExtras().getString("From").equals("Menu")) {
                Intent intent = new Intent(getApplicationContext(),
                        VideoTypes.class);
                intent.putExtra("From",
                        getIntent().getExtras().getString("From"));
                startActivity(intent);
                finish();
            }

        }
        return super.onKeyDown(keyCode, event);
    } 
```

我希望这会帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:09:26.063

`super.onCreate()`是必须的。如果你不调用它，应用程序将崩溃。

您可以使用[startActivityForResult()](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)，而不是`startActivity()`. 因此，您可以在第二个活动完成时捕捉该事件，然后再次显示您的菜单。

# objective-c - 删除核心数据中的实体

> ID：11120054
> 
> 赞同：2
> 
> 时间：2012-06-20T12:54:42.900
> 
> 标签：objective-c, core-data

我正在尝试删除核心数据中的实体。

我使用以下代码：

```
 //update core data
        [context deleteObject:myEntity];
        [myEntity deleteInContext:context];

        [context save:&error]; 
```

到目前为止，我知道实际上其中一条删除行应该可以完成这项工作，但是它们都没有。什么都没有发生。没有错误信息。没发生什么事。上下文是我的 NSManagedObjectContext。

谁能帮我？谢谢！！！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:27:39.767

`[context deleteObject:myEntity]`足以删除一个对象。`[myEntity deleteInContext:context]`是多余的。

如果您希望更改立即可见，请执行 [context processPendingChanges]，否则该对象将被标记为“待删除”，但更改将在 runloop 循环结束时处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:46:17.370

考虑到您记录上下文的结果：（null），修复必须使用有效的上下文。

# android - Android：如何将光标向下移动到多行Edittext中的下一行？

> ID：11120055
> 
> 赞同：2
> 
> 时间：2012-06-20T12:54:46.257
> 
> 标签：android, android-edittext

我有一个要求，我必须实现可以在多行 Edittext 中上下移动光标的按钮。

我浏览了开发者网站，发现可以使用Selection 类[http://developer.android.com/reference/android/text/Selection.html](http://developer.android.com/reference/android/text/Selection.html) ，但我无法使用它..

请在这里帮我..

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:31:36.713

来源： http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/text/Selection.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/text/Selection.java)

我复制了代码并在下面进行了一些修改，然后将其附加到我的班级。

* * *

```
public boolean moveDown(Layout layout) {
        int start = myTextbox.getSelectionStart();
        int end = myTextbox.getSelectionEnd();

        if (start != end) {
            int min = Math.min(start, end);
            int max = Math.max(start, end);

            myTextbox.setSelection(max);

            if (min == 0 && max == myTextbox.length()) {
                return false;
            }

            return true;
        } else {
            int line = layout.getLineForOffset(end);

            if (line < layout.getLineCount() - 1) {
                int move;

                if (layout.getParagraphDirection(line) ==
                    layout.getParagraphDirection(line + 1)) {
                    float h = layout.getPrimaryHorizontal(end);
                    move = layout.getOffsetForHorizontal(line + 1, h);
                } else {
                    move = layout.getLineStart(line + 1);
                }

                myTextbox.setSelection(move);
                return true;
            }
        }

        return false;
    } 
```

我希望这会有用。

如果有人知道如何使用真实方法而不重新创建它，请分享：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:13:08.277

我不确定这段代码，但它可能会在一定程度上帮助你......

只需浏览以下网址中的代码。我可能会帮你找到解决方案。

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/text/Selection.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/text/Selection.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-28T19:30:03.207

尝试：

editText.append("\n");

它将光标移动到下一行。

# mongodb - 如何将查询输出存储在临时数据库中？

> ID：11120060
> 
> 赞同：2
> 
> 时间：2012-06-20T12:55:03.570
> 
> 标签：mongodb, elasticsearch

我对编程真的很陌生，但我正在研究它。我有一个问题，我不知道如何解决。我在 mongoDB 中收集了文档，并且正在使用 Elasticsearch 来查询字段。问题是我想将搜索的输出存储回 mongoDB 但在不同的数据库中。我知道我必须创建必须随每个搜索结果更新的临时数据库。但是如何做到这一点？或者给我文档来阅读，这样我就可以学习它。我将非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T14:10:12.497

Mongo 本身并不支持“临时”集合。

典型的做法是不要将整个结果输出实际写入另一个数据库，因为这完全没有意义，因为 Elasticsearch 会进行自己的缓存，因此您不需要任何层。

同样，由于 IO 问题，将 10k 条记录的结果集写入 Mongo 或其他数据库通常不是一个好主意。

您所说的内容有一个功能请求：[https](https://jira.mongodb.org/browse/SERVER-3215) ://jira.mongodb.org/browse/SERVER-3215 ，但目前还没有计划。

### 例子

你可以有一个结果表。

在此表中，您将有一个如下所示的文档：

```
{keywords: ['bok', 'mongodb']} 
```

每次搜索并滚动浏览每个结果项时，您都会在此表中写入一行，用该搜索结果中的关键字填充关键字字段。这将是每个搜索每个搜索结果列表的每个搜索结果。最好在每个搜索结果进入时将它们流式传输到 MongoDB。我从未编写过 Python（尽管我想学习）所以一个伪示例：

```
var elastic_results = [{'elasticresult'}];
foreach(elastic_results as result){
    //split down the phrases in this result and make a keywords array
    db.results_collection.insert(array_formed_from_splitting_down_result); // Lets just lazy insert no need for batch or trying to shrink the amount of data to one go or whatever, lets just stream it in.
} 
```

因此，当你继续你的结果时，你基本上只是尽可能快地批量插入，创建一种输入到 MongoDB 的“流”。它可以很好地做到这一点。

然后，这应该为您提供一个单词和语言动词的可拆分列表，以处理诸如 MR 之类的事情以及汇总有关它们的统计信息的东西。

在越来越多地了解您的情况的情况下，这几乎是我最好的答案。

这不使用临时表概念，而是使您的数据永久化，这听起来很好，因为您希望将 Mongo 用作进一步任务的存储引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T15:44:02.540

`db.your_table.find().forEach(function(doc) { b.another_table.insert(doc); } );`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:17:42.753

实际上有 MongoDB River 插件可以与 Elasticsearch 一起使用...

# dynamics-crm - 更改 CRM 4.0 选定行颜色

> ID：11120070
> 
> 赞同：2
> 
> 时间：2012-06-20T12:55:35.463
> 
> 标签：dynamics-crm, dynamics-crm-4

我在 CRM 4 上使用[以下](https://stackoverflow.com/questions/10813204/colorize-the-crm-grid)解决方案来为 CRM 网格着色，具体取决于几个字段的值。它工作正常，除了行被选中时不再以不同的颜色突出显示。

这是通常的界面：

![普通界面](../Images/f32481345fc293572b354f82c55620e3.png)

这是我的界面：

![我的界面](../Images/5cc4a8bb95ab66691097072c89e18d0c.png)

有没有办法恢复高光颜色？并改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:41:45.080

再考虑一下，我怀疑这里的问题是您在初始化网格时正在更改行颜色。从[链接]代码：

```
if (new_date_value <= current_datetime) {
    InnerGrid.rows[i].style.backgroundColor="ff0066";
} else {
    InnerGrid.rows[i].style.backgroundColor="ff6600";
} 
```

我的第一个想法是只对行中的*一些*列进行着色。然后行突出显示将应用于该行的其余部分。这只是一个快速的鞭打。此外，它**未经测试**。

你会明白的，也许写这个来更好地满足你的要求

例如：

```
var colour1 = "ff0066";
var colour2 = "ff6600";

if (new_date_value <= current_datetime) {
    colouriseRow(InnerGrid.rows[i], colour1);
} else {
    colouriseRow(InnerGrid.rows[i], colour2);
}

function colouriseRow(myRow, cols){
    for(var i = 0; i < myRow.cells.length; i++){
        if(i > 2){ // skip the first 3 columns, colourise the rest
            myRow.cells[i].style.backgroundColor=myColour;
        }
    }
} 
```

# javascript - 取消订阅内部的 Publish 发明 (Peter Higgins pubsub)

> ID：11120081
> 
> 赞同：2
> 
> 时间：2012-06-20T12:56:13.777
> 
> 标签：javascript, jquery, jquery-plugins, publish-subscribe

我正在使用 Peter Higgins [pubsub 库](https://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js)，但遇到了一个有趣的问题：

如果使用特定的发布事件多次取消订阅，我会在 pubsub 的第 33 行收到错误消息`TypeError: this.apply is not a function`。发生这种情况的原因是 cache[topic] 数组在要处理的第一个订阅上改变了它的长度，因此当 pubsub 尝试处理第二个订阅时它找不到正确的函数。

这是重现所需的代码（当然，您也需要 pubsub 和 jquery）

```
var handle1 = $.subscribe('pubsub',function(){
    $.unsubscribe(handle1);
});

var handle2 = $.subscribe('pubsub',function(){
    $.unsubscribe(handle2);
});

$.publish('pubsub'); 
```

有人对解决方案或解决方法有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:36:25.433

我在 github 上为此编写了自己的修复程序。希望它可以帮助某人。

[https://github.com/eladzlot/bloody-jquery-plugins/blob/master/pubsub.js](https://github.com/eladzlot/bloody-jquery-plugins/blob/master/pubsub.js)

# php - Nginx PHP5组合报403错误

> ID：11120090
> 
> 赞同：1
> 
> 时间：2012-06-20T12:56:39.320
> 
> 标签：php, nginx, fastcgi

我尝试将一个 wordpress 实例嵌入到 nginx 服务器，该服务器也适用于我已经安装的 Rails 应用程序。我[对那篇文章使用了同样的方法（HOWTO：在 Nginx 上安装 WordPress；没有给出日期）](http://elasticdog.com/2008/02/howto-install-wordpress-on-nginx/)，但它对所有请求都给出了 403 错误。

我怎么能理解那个权限错误的原因。日志不包含更多信息。是关于 fast-cgi 或任何正在运行的进程的权限问题吗？

这也是我目前的设置：

```
 server{
       listen 80;
       server_name www.bla.com bla.com;
       root /opt/nginx/wordpress/;
       try_files $uri $uri/ /index.php;
       location ~ \.php$ {
          include     fastcgi_params;
          fastcgi_pass localhost:53217;

          fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
       }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:32:49.967

403 是“禁止”的 HTTP 状态代码。

我建议通过继续简化服务器配置来调试它，直到您不再收到错误为止。那么问题就在于您最后删除的任何内容。:)。

例如，您可以暂时评论您的 rails 应用程序，看看您是否仍然遇到问题，然后尝试评论我们所有的一些您的 wordpress 服务器定义，看看您是否仍然有问题。

我还建议在您的 nginx 配置中搜索“允许”和“拒绝”这两个词，因为它们用于控制访问。如果对某个位置的访问被“拒绝”，则可能会导致 403。

# jquery - 如何标记所选项目

> ID：11120091
> 
> 赞同：0
> 
> 时间：2012-06-20T12:56:45.050
> 
> 标签：jquery

当我使用 .load() 函数和 url 发送数据时，谁能告诉我如何使用 jquery 检索数据。在以下情况下，如何在 person.html 页面中检索“数据”变量..

是否可以使用 jquery、javascript 等脚本来执行此操作？

代码：

```
value="name"; 
```

$("div").load("person.html",{data:value});

另一个是

```
ITEMS 1)item1 2)item2 3)item3 
```

如果我选择 item1 那么它应该被选择为背景颜色，如果我点击外部某处，背景颜色应该消失......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:03:19.570

正如评论中所说，您的问题不容易阅读。

在 JQuery 中加载的工作方式如下：

```
$(document).load('someurl', {param: 'somepar'}, function(data){
   // do your stuff here to make things happen
}); 
```

因此，要将预定义的 var 发送到 person.html，您必须将其传递到 load 函数中的第二个参数，例如：

```
{data: "name" } 
```

至于你问题的第二部分......我不确定你在谈论什么项目以及他们使用什么元素，比如我不能给你一个可靠的答案。

如果你能解释得更多，我相信会有更多的人回答。

编辑：

在您的情况下，加载函数如下所示：

```
var data = "name";
$('div').load('person.htm', {data: data}); 
```

希望能帮助到你，

# linux - 关于 SVN 在 Linux 上的导出功能的几个问题

> ID：11120092
> 
> 赞同：0
> 
> 时间：2012-06-20T12:56:47.527
> 
> 标签：linux, svn, command-line, ftp, tortoisesvn

我做了一些功课，虽然我可以回答以下关于在 Windows 上导出 SVN 存储库（使用 VisualSVN 服务器）的所有问题，但我完全迷失在 Linux 上，因为我是那里的新手。

我想在 Linux 上使用 SVN 的导出功能，以便在每次提交存储库时更新网站。但这样做存在一些问题。

我已经阅读了这三个： [如何使用“svn export”命令从存储库中获取单个文件？](https://stackoverflow.com/questions/3631465/how-to-use-svn-export-command) [http://www.duchnik.com/tutorials/2011/07/02/svn-command-reference](http://www.duchnik.com/tutorials/2011/07/02/svn-command-reference) [http://www.picksourcecode.com/ps/ct/161055.php](http://www.picksourcecode.com/ps/ct/161055.php)

并想出了在提交后挂钩中使用的以下命令：

```
svn export --force svn://localhost/repository_name /share/Web/projects/website 
```

问题：

1.  任何人都有任何想法，为什么它不起作用？更改已提交到存储库，但操作以“提交后挂钩失败（退出代码 255）且无输出”告终。并且 post-commit 钩子似乎没有被触发，因为目标网站没有更新。我已经检查（甚至仔细检查）该命令本身就像一个魅力（从命令行调用时）。它只在提交后挂钩内失败。我试图在这个文件的末尾添加“exit 0”。当然它是可执行的。没运气。尽管如此，经过多次尝试，相同的错误代码。

2.  为什么这个操作有效，即使我没有提供用户名和密码作为参数？存储库中的“passwd”文件已正确设置，来自外部客户端的任何操作都需要提供用户名和密码，否则会失败。SVN中的一些错误？

3.  有没有办法将导出到目标的文件限制为仅更改/添加/删除，而不是在每次提交后导出整个存储库？

4.  有没有做完全相同的事情（导出），但是通过 FTP 到外部服务器，而不是我的 QNAP 的本地路径？

对于第 3 点和第 4 点，我尝试使用 SourceForge 形式的 svn2web 工具，但这是一个相当糟糕的主意，而且它不起作用。它使用 pre-commit 钩子而不是 post-commit，这意味着其中的任何错误都会阻止开发人员提交他们的工作（在我的例子中 - post-commit - 提交更改，只是不会传播到目的地）。他们的预提交挂钩在我的服务器上失败（与上述第一点相同的错误消息）并且他们将“svn2web”属性添加到文件夹属性的方法（解决方案）可能适用于纯 Linux Subversion 客户端，但在使用时似乎完全失败了Windows 上的 TortoiseSVN 作为 SVN 客户端。

我想知道，如果问题 1（和 2-3，也许是 4）的解决方案不是在 /share/Web/projects/website 中设置本地工作副本并使用 CRON 定期更新此存储库？这将始终仅“导出”实际更改，并且可能会在没有弹出登录名和密码的情况下失败。但这似乎是在重新发明轮子或强迫打开已经打开的门。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:06:58.350

一些简短的答案：

1.  我会认为您正在以不同于 SVN 守护程序 (svnserve) 用于运行钩子的用户身份运行此命令。那个其他用户（由 SVN 使用）可能没有获得运行导出所需的所有权限。

2.  Unfortunately, I have no idea. Must be something with your installation of SVN. Of course, this shouldn't happen at all. If repository is properly secured and requires login + password, everyone has to provide it corectly, even for export operation.

3.  You need and extended script, preferebly run as post-commit hook, that will compare current (last one - HEAD) revision with provious one and will export only changed files. This isn't an easy task. Look around in the Internet for ready solutions, before you try to discover wheel again! :]

4.  No directly with extract command of SVN? The easiest way, that comes my mind is to extract to a local path, pack it, send it via FTP and unpack it at destination. Or send directly, file-by-file, if you don't have access to shell at destination, to unpack an archive.

Hope, these will help? :]

# javascript - 一次两个对象的JQuery淡化循环

> ID：11120094
> 
> 赞同：0
> 
> 时间：2012-06-20T12:56:51.723
> 
> 标签：javascript, jquery, html, css

在 SO 的帮助下，我有一些 javascript/jquery 可以循环浏览一些徽标，使它们淡入淡出。我一直在尝试修改它以同时淡化两个并排的徽标。

你可以在这里看到我的代码的 jsfiddle 版本：http: [//jsfiddle.net/BvLb4/3/](http://jsfiddle.net/BvLb4/3/)

如您所见，我认为为左右徽标创建不同的类将是并排放置两个徽标的好方法。所以我的 html 现在看起来像这样：

```
 <div id="img0" class="logo">
        <img src="http://i.imgur.com/JeBWX.jpg"/>
        </div>
        <div id="img1" class="logo2">
        <img src="http://i.imgur.com/DyyY3.jpg"/>
        </div>
        <div id="img2" class="logo">
        <img src="http://i.imgur.com/aVDZ1.jpg"/>
        </div>
        <div id="img3" class="logo2">
        <img src="http://i.imgur.com/JxLQt.jpg"/>
        </div> 
```

我在更改递归循环时遇到了麻烦，因为我有一个徽标一次可以使用两个：

```
$(document).ready(function (){

    var fadeDuration = 1000;
    var timeBetweenFade = 3000;
    var totalLogos = $('.logo').length + $('.logo2').length;
    var currentLogo;
    var idx = 0;

    var loop = function(idx, totalLogos) {
        var currentLogo = "#img" + idx;
        $(currentLogo)
        .delay(100)
        .fadeIn(fadeDuration)
        .delay(timeBetweenFade)
        .fadeOut(fadeDuration, function(){
            loop( (idx + 1) % totalLogos, totalLogos);
        });
    }
    loop(0, totalLogos);
}); 
```

我最初的想法是创建一个额外的`var currentLogo2 = "#img" + (idx+1);`，将所有相同的方法应用于它以及 currentLogo，然后将 idx 增加 2。这在我的脑海中是有道理的，但到目前为止[我尝试](http://jsfiddle.net/BvLb4/5/)实现它并没有成功，而且我通常不会确定这是否是最好的方法，因为代码有点重复。您会建议什么解决方案来解决一次淡入淡出两个（或更多）的徽标循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:35:19.380

如果你必须有循环，那么你需要将后面的调用移动到循环：

```
loop( (idx + 1) % totalLogos, totalLogos); 
```

在那个 fadeOut 回调之外。**jQuery.fadeOut 只会在动画完成后**调用你传入的函数（[jQuery fadeOut 文档](http://api.jquery.com/fadeOut/)），这将导致以后以这种方式进行的调用是连续的。如果你像这样把它移到外面：

```
var loop = function(idx, totalLogos) {
  var currentLogo = "#img" + idx;
  $(currentLogo)
  .delay(100)
  .fadeIn(fadeDuration)
  .delay(timeBetweenFade)
  .fadeOut(fadeDuration);

  loop( (idx + 1) % totalLogos, totalLogos);
} 
```

那么它应该表现得更像你希望的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:34:01.863

而不是循环你需要这样做

```
 $([id^="img"]).delay(100)
    .fadeIn(fadeDuration)
    .delay(timeBetweenFade)
    .fadeOut( fadeDuration); 
```

适用于 id 以“img”开头的所有图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T16:07:52.803

似乎没有一个答案可以解决问题，但我最终自己找到了解决方案。您可以在此处查看解决方案的演示：http: [//jsfiddle.net/BvLb4/9/](http://jsfiddle.net/BvLb4/9/)。对于将来遇到此问题的任何人，无论您想要并排的多少图像，都可以轻松更改。

这在很大程度上是一种新手试错方法，所以如果有人有任何改进建议，请发表评论！

JS：

```
$(document).ready(function (){

    var fadeDuration = 1000;
    var timeBetweenFade = 3000;
    var totalCycles = ($('.logo').length) /2;
    var idx = 0;

    var loop = function(idx, totalCycles) {
        var currentLogo = ".img" + idx;
        $(currentLogo).delay(100);
        $(currentLogo).fadeIn(fadeDuration);
        $(currentLogo).delay(timeBetweenFade);
        $(currentLogo).fadeOut(fadeDuration,
        function(){
            idx++;
            if(idx > totalCycles){
                idx = 0;
            }
            loop( idx, totalCycles);

        });

    }
    loop(0, totalCycles);
});​ 
```

HTML：

```
//link js and jquery here
<div id="container">

        <div id="logos_content">
        <h2>Associates</h2>
        <div class="logo img0">
        <img src="http://i.imgur.com/JeBWX.jpg"/>
        </div>
        <div class="logo img0">
        <img src="http://i.imgur.com/DyyY3.jpg"/>
        </div>
        <div class="logo img1">
        <img src="http://i.imgur.com/aVDZ1.jpg"/>
        </div>
        <div class="logo img1">
        <img src="http://i.imgur.com/JxLQt.jpg"/>
        </div>
        </div>

</div> 
```

CSS：

```
#container
{
    width: 400px;
    height: 200px;
    background-color: DodgerBlue;
}
img { max-width: 100% }

#logos_content
    {
    padding: 0.5em 3em;
    height: 150px;
    }
        .logo
        {
        float: left;        
        display: none;
        max-width: 45%;
        position:relative;
        margin-right:0.5em;
        } 
```

# c# - 不使用 XmlDocument.Loadxml() 函数将 XML 反序列化为 JSON

> ID：11120097
> 
> 赞同：8
> 
> 时间：2012-06-20T12:57:05.343
> 
> 标签：c#, xml, json, .net-2.0, sqlclr

我有一个独特的问题。我正在将一个 dll 注册为 SQL Server 数据库中的一个程序集，该数据库接受一个 SQLXml 变量以及两个字符串，并将数据序列化为 JSON 格式。

作为参考，这里是方法调用：

```
[SqlProcedure]
public static void Receipt(SqlString initiatorPassword,
                           SqlString initiatorId,
                           SqlXml XMLOut,
                           out SqlString strMessge) 
```

如果这是任何其他类型的应用程序，我会为此应用程序使用 Newtonsoft.Json 或 Jayrock。通常我会按照[这里](https://stackoverflow.com/questions/814001/json-net-convert-json-string-to-xml-or-xml-to-json-string)给出的答案做类似的事情：

```
XmlReader r = (XmlReader)XmlOut.CreateReader();
XmlDocument doc = new XmlDocument();
doc.load(r); 
```

但是，由于我使用的是 SQLClr，因此有一定的规则。其中之一是**`.Load()`不能使用任何其他继承的方法。** 我认为 .Net 框架说得最好：

> System.InvalidOperationException：无法加载动态生成的序列化程序集。在某些托管环境中，程序集加载功能受到限制，请考虑使用预生成的序列化程序。请参阅内部异常以获取更多信息。---> System.IO.FileLoadException:
> LoadFrom()、LoadFile()、Load(byte[]) 和 LoadModule() 已被主机禁用。

我无论如何都不会流利地使用 SqlClr，但如果我正确理解[了这个博客](http://footheory.com/blogs/bennie/archive/2006/12/07/invoking-a-web-service-from-a-sqlclr-stored-procedure.aspx)，这是由于 SqlCLR 的规则不允许 .Load() 和继承方法而没有签名并具有强名称。我的 DLL 和我正在使用的第 3 方 DLL 没有强名称，我也不能自己重建和签名它们。所以，这让我坚持尝试在不使用负载的情况下完成此任务（除非有人知道另一种方法可以完成）

我能想出的唯一解决方案是一个非常丑陋的 while 循环，它不能正常工作，我得到了一个“Jayrock.Json.JsonException：JSON 对象内的 JSON 成员值必须以它的成员名称开头”异常. 这是我编写的 while 循环（我知道，这不是我最好的代码）：

```
 int lastdepth = -1;
 Boolean objend = true;
 Boolean wt = false;
//Write Member/Object statements for the header omitted
JsonWriter w = new JsonTextWriter()
 while (m.Read())
                {
                    if ((lastdepth == -1) && (m.IsStartElement()))
                    {//Checking for root element
                        lastdepth = 0;
                    }
                    if ((m.IsStartElement()) && (lastdepth != -1))
                    {//Checking for Start element ( <html> )
                        w.WriteMember(m.Name);
                        if (objend)
                        { //Check if element is new Parent Node, if so, write start object
                            w.WriteStartObject();
                            objend = false;
                        }
                    }
                    if (m.NodeType == XmlNodeType.Text)
                    { //Writes text here.  NOTE: m.Depth > lastdepth here!!!!!!!
                        w.WriteString(m.Value);
                        wt = true;
                    }
                    if (m.NodeType == XmlNodeType.Whitespace) //If whitespace, keep on truckin
                    { m.Skip(); }
                    if ((m.NodeType == XmlNodeType.EndElement) && (wt == false) && (lastdepth > m.Depth))
                    {//End element that ends a series of "Child" nodes
                        w.WriteEndObject();
                        objend = true;
                    }
                    if ((m.NodeType == XmlNodeType.EndElement) && (wt == true))//Standard end of an el
                    { wt = false; }
                    lastdepth = m.Depth;
                }
                w.WriteEndObject();
                jout = w.ToString();
} 
```

我的问题是，由于我不能使用`.load()`而且我的 while 循环调试起来很麻烦，这里最好的方法是什么？通常讨论的另一种方法是反序列化为具有匹配变量的对象，但我有一个相当大的 XML 来自 SQL Server。我的循环是动态编程的尝试，因为有大约 200 个字段被拉出来制作这个 XML。

**注意：我正在使用 Jayrock 并在 .Net Framework 2.0 中工作。我目前无法更改框架版本。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:14:49.293

我希望这适用于您，但除非您尝试，否则不会知道。从[这里](http://msdn.microsoft.com/en-us/library/ms345106.aspx)：

> EXTERNAL_ACCESS 解决了代码需要访问服务器外部资源的场景，例如文件、网络、注册表和环境变量。每当服务器访问外部资源时，它都会模拟调用托管代码的用户的安全上下文。
> 
> 不安全代码权限适用于程序集无法验证安全或需要额外访问受限资源（例如 Microsoft Win32 API）的情况。

我相信这两个中的一个是你需要的，可能`EXTERNAL_ACCESS`。更多的：

> 我们建议从主数据库中的程序集文件创建非对称密钥。然后必须创建映射到此非对称密钥的登录，并且必须授予登录外部访问组件或不安全组件权限。
> 
> **注意：**您必须创建一个新登录名才能与非对称密钥关联。此登录仅用于授予权限；它不必与用户相关联，也不必在应用程序中使用。

以及相关代码（我过去曾成功使用过）：

```
USE master; 
GO  

CREATE ASYMMETRIC KEY SQLCLRTestKey FROM EXECUTABLE FILE = 'C:\MyDBApp\SQLCLRTest.dll'   
CREATE LOGIN SQLCLRTestLogin FROM ASYMMETRIC KEY SQLCLRTestKey   
GRANT EXTERNAL ACCESS ASSEMBLY TO SQLCLRTestLogin; 
GO 
```

我想您还希望在您的项目中打开*生成序列化程序集。*

这实际上回避了您的问题，但这确实是允许其他 DLL 成功加载的首选方式，因此您可以编写正确的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:58:00.273

[JayRock 的代码](http://code.google.com/p/pesta/source/browse/trunk/pesta/libraries/Jayrock.JSON/json/JsonWriterBase.cs?r=157)

您的代码抛出异常：

```
A JSON member value inside a JSON object must be preceded by its member name. 
```

此异常来自方法：

```
 private void EnsureMemberOnObjectBracket() 
    {
        if (_state.Bracket == JsonWriterBracket.Object)
            throw new JsonException("A JSON member value inside a JSON 
             object must be preceded by its member name.");
    } 
```

来自该代码的包含调用来自：

```
 public sealed override void WriteString(string value)
    {
        if (Depth == 0)
        {
            WriteStartArray(); WriteString(value); WriteEndArray();
        }
        else
        {
            EnsureMemberOnObjectBracket();
            WriteStringImpl(value);
            OnValueWritten();
        }
    } 
```

您的代码调用调用的方法的唯一时间`EnsureMemberOnObjectBracket`是从一个地方：

```
if (m.NodeType == XmlNodeType.Text)
{ //Writes text here.  NOTE: m.Depth > lastdepth here!!!!!!!
 w.WriteString(m.Value);
 wt = true;
} 
```

这意味着这里有一个错误。也许你可以在这里做一些尝试/捕捉，或改进你的代码。

# sencha-touch - 是否有所有已创建视图的列表？

> ID：11120099
> 
> 赞同：1
> 
> 时间：2012-06-20T12:57:06.800
> 
> 标签：sencha-touch, sencha-touch-2

我想知道是否有一个地方可以看到使用创建的所有视图

```
Ext.create 
```

或者有没有办法通过使用它的 MyApp.view.ViewName 检查一个视图是否已经创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:30:20.640

我从未尝试过，但是，这可以工作。

[http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-method-getViews](http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-method-getViews)

```
this.getApplication().getViews(); 
```

希望这可以帮助

# jquery - 用户取消请求后如何执行操作

> ID：11120103
> 
> 赞同：0
> 
> 时间：2012-06-20T12:57:17.977
> 
> 标签：jquery, ruby-on-rails-3

在用户取消删除确认后，我想在元素上触发对 stopPropagation 的 javascript 调用。我不能在点击时执行此操作，因为它会阻止显示 JS 确认对话框。有没有办法将操作绑定到用户取消时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:42:19.310

```
if(confirm("Are you sure you want to delete")){
  // user has chosen 'Ok'
} else {
  // user has canceled
  // do your stuff
} 
```

# powershell - 如何在 runonce-Key 中运行 powershell 脚本？

> ID：11120104
> 
> 赞同：5
> 
> 时间：2012-06-20T12:57:17.897
> 
> 标签：powershell, windows-7, runonce

我有一个看起来像这样的 powershell.exe 调用，它可以从我的命令行运行：

```
powershell.exe -noexit -command " & 'C:\Test\test.ps1' " 
```

但是，当我在当前用户的 runonce-key 中完全以这种方式输入该条目时，什么也没有发生。

从runonce或run调用powershell.exe传递参数的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T13:03:02.413

尝试使用完整路径：

```
c:\WINDOWS\system32\WindowsPowerShell\v1.0\powershell.exe -noexit "C:\Test\test.ps1" 
```

或者

```
c:\WINDOWS\system32\WindowsPowerShell\v1.0\powershell.exe -noexit -command " & 'C:\Test\test.ps1' " 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:41:38.553

稍微不同的方法是将所有对 powershell.exe 的调用连同所有参数/参数放入一个简单的 *.bat 文件中，然后从 RunOnce Key 调用该 *.bat 文件。这样你就不需要玩那些有时会搞砸的参数。您的 PowerShell 脚本甚至可以删除该 *.bat 文件，因为它只需要一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:27:16.040

使用 File 参数而不是命令。您还可以使用其他一些参数来清理内容*（noprofile、sta 和/或 WindowStyle）*

这是我使用的一个例子。

```
C:\WINDOWS\system32\WindowsPowerShell\v1.0\powershell.exe -noprofile -sta -WindowStyle Hidden -File "C:\Test\Test.ps1" 
```

# android - QCAR(Vuforia) SDK的qcar-resource.dat文件格式

> ID：11120107
> 
> 赞同：4
> 
> 时间：2012-06-20T12:57:25.490
> 
> 标签：android, ios, reverse-engineering, file-format, qcar-sdk

我的问题很简单，就是给定两个 qcar-resource.dat 文件，如何将它们合二为一。我们都知道，有一个名为 libQCAR.so 的库。但是，它是 ARMed 指令集，没有像 ollydbg 这样的调试器来调试它。所以只能从dat文件开始分析。

通过检查文件头，我看到这个 dat 文件是一个 zip。解压，至少可以得到5个文件，分别是：chips.kpts,chips.tex.jpg,config.feat,config.info,config.src

不管一个 dat 文件包含多少图像，只有一个 config.feat、一个 confing.info 和一个 confing.src。所以我的问题将集中在如何将每个 dat 的配置文件合并为一个。

confg.info 很简单，因为它是一个 xml。

config.feat 也是如此。其格式如下： [format1](http://filebeam.com/7dde984e385e8e8e3a08ddd4ebd15d95.jpg)

这个文件有 3 个部分，头部，身体，尾部。结合时，头变成两个头的结合，身体也是。你可以用我给你的这个格式自己检查。

该文件可能是一个恐惧文件，包含 QCAR 提取的图像特征。config.src 文件是最难的。文件格式如下： [format2](http://filebeam.com/971c7aa09a99e91aeabd1c47d5becc92.jpg)

从我看到的 ASCII 码来看，这个文件可能是一个图像特征索引文件。

组合时，我看不到规则模式。src文件是由feat文件制作的吗？

期待您的进一步分析！谢谢！

# javascript - 使用javascript修复页面？

> ID：11120108
> 
> 赞同：-2
> 
> 时间：2012-06-20T12:57:28.597
> 
> 标签：javascript

我的网站上有一个博客页面，您可以在上面添加评论。事实是，当您单击“添加评论”时，会出现 php 服务器请求来存储评论。所以页面再次加载并滚动到顶部。添加评论时是否有任何 javascript 方法来保持页面固定？

最好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:09:18.867

有两种方法可以做到这一点：

1) 在页面的 url 请求之后使用锚点名称，并使用该名称创建一个锚点，就在评论的上方或下方。因此，使用锚名称 www.mysite.com/mypage.php#comments 重定向到您的页面，并在您的 html 中添加一个锚：

```
 <a name="comments" /> 
```

，这将打开带有位于屏幕顶部的锚点 dom 元素的页面。

2) 使用 ajax 将数据发送到服务器并在检索成功回调时更新评论。该页面不需要以这种方式重新加载并保持在原处。但还有一点工作。第 1 步：制作一个处理请求并保存评论的 php 页面 第 2 步：添加 javascript 以进行 ajax 调用并检索回调

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:38:26.900

你可以使用cookies吗？我有一个非常相似的问题，但关于文本框。在点击“保存”（并因此重新加载网页）之后，它总是从第一行开始，而不是我结束编辑的那一行。

解决方案是雇用饼干。当用户单击“保存”时，一个简单的 JavaScript 代码正在编写一个带有编辑器位置的 cookie，光标所在的位置。然后，在重新加载后，另一个简单的 JavaScript 读取该 cookie 并将光标设置回最后一个位置。

也许您可以根据您的需要调整此解决方案？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:00:27.813

您可以在评论按钮单击时调用此函数

```
function FUNCTIONNAME() {
    $.ajax({
        type: "POST",
        url: "YOUR METHOD NAME WHICH IS CALLED",
        data: "{PARAMETER VALUES TO BE PASSED}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        complete: function () {
        },
        success: function (msg) {                    
           alert("YOUR SUCCESS MESSAGE HERE");
        },
        error: function (msg) {
            alert("Error ");
        }
    });
} 
```

# c#-4.0 - StructureMap - 每个命名实例的不同生命周期

> ID：11120111
> 
> 赞同：2
> 
> 时间：2012-06-20T12:57:45.097
> 
> 标签：c#-4.0, inversion-of-control, structuremap

看起来您在 StructureMap 中每个插件类型只能有一个生命周期策略。有没有办法解决？这个简单的控制台应用程序演示了“最后”“获胜”的任何生命周期。

```
namespace StructureMapLifecycle
{
  public class Program
  {
    public static void Main(string[] args)
    {
      StructureMap.ObjectFactory.Initialize(
        x =>
        {
          x.For<ISomething>().Add<SomethingA>().Named("A");
          x.For<ISomething>().Singleton().Add<SomethingB>().Named("B");
          x.For<ISomething>().Add<SomethingC>().Named("C");
          x.For<ISomething>().HybridHttpOrThreadLocalScoped().Use<SomethingC>();
        });

      Console.Write(StructureMap.ObjectFactory.WhatDoIHave());
      Console.ReadLine();
    }
  }

  public interface ISomething
  {
    void DoSomething();
  }

  public class SomethingA : ISomething
  {
    public void DoSomething()
    {
      Console.WriteLine("Do something A");
    }
  }

  public class SomethingB : ISomething
  {
    public void DoSomething()
    {
      Console.WriteLine("Do something B");
    }
  }

  public class SomethingC : ISomething
  {
    public void DoSomething()
    {
      Console.WriteLine("Do something C");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T14:46:59.440

我的一位同事发现 Jeremy Miller 指出这是 StructureMap 的长期限制。 [http://jeremydmiller.com/2012/01/11/kicking-off-structuremap-3/](http://jeremydmiller.com/2012/01/11/kicking-off-structuremap-3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T13:22:59.213

这已在 StructureMap 3.0 中修复。现在您可以简单地更改每个实例的生命周期。

# c# - 在解析期间设置命名空间

> ID：11120112
> 
> 赞同：6
> 
> 时间：2012-06-20T12:57:48.660
> 
> 标签：c#, xml, xml-parsing, linq-to-xml, xml-namespaces

嗨，我目前在解析没有任何命名空间的 Xml 字符串时遇到问题，并将其添加到具有命名空间的现有 XElement 中。

我的代码：

```
XElement elem = root.Element(xs + "methodCall");
if (elem != null)
{
    XElement e = XElement.Parse(this.MethodCallXML);

    elem.Add(e);
} 
```

结果：

```
<methodCall>
  <methodCall service="activity" method="activityDeleteComment" xmlns="">
    <espSessionState>espSessionState1</espSessionState>
    <traceFlowCode>true</traceFlowCode>
    <params>
      <commentID>http://uri1</commentID>
      <isPermanentDelete>false</isPermanentDelete>
    </params>
  </methodCall>
</methodCall> 
```

我的问题是 xmlns="" 我无法弄清楚如何使用 parse 方法创建节点并为其提供默认名称空间以供使用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T14:15:53.460

好的，我想出了如何将命名空间添加到新的 XElement 和所有后代

```
foreach (XElement ce in e.DescendantsAndSelf())
     ce.Name = xs + ce.Name.LocalName; 
```

到目前为止，这解决了我的问题，但如果有人能看到潜在的缺陷或更简单的方法，请告诉我。

# linux - 关于同一来源的中断

> ID：11120115
> 
> 赞同：3
> 
> 时间：2012-06-20T12:57:56.310
> 
> 标签：linux, linux-kernel, kernel, interrupt

据说

> 当 PIC 发送中断时，PIC 不会从同一源发送另一个中断，直到它通过 I/O 端口得到确认。这是因为中断处理程序通常操纵关键数据结构，并且不能承受被自己的新调用中断（即它们不是可重入的）。

我不明白。同源中断和不同源的中断有什么不同吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T13:15:44.577

您可以从不同的来源获得中断：定时器、硬盘、网络等。这些中断中的每一个都将由不同的中断处理程序处理。

因此，如果来自源 (S1) 的中断到达而来自源 (S2) 的另一个中断正在处理，则没有问题。两个中断都由不同的中断处理程序处理。

另一方面，如果来自源 (S) 的中断到达，而该源的处理程序正在处理另一个中断，则处理程序将无法处理第二个中断，因为它不是以[可重入](http://en.wikipedia.org/wiki/Reentrancy_(computing))方式设计的（即它不能被中断，处理新的中断，然后返回处理原来的中断）。

您可以查看[Understanding the Linux Kernel](http://shop.oreilly.com/product/9780596005658.do) ，了解有关Linux 内核中中断工作方式的详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T13:40:47.023

来自同一源的中断必须在与当前活动中断相同的数据结构上运行。来自不同来源的中断将在不同的数据结构上运行。因此，除非它们足够聪明以协调它们的活动，否则您不能同时激活来自同一源的两个中断，并且当前的设计阻止它们处于活动状态，这样程序员就不必担心这种复杂性。

以现实世界中的（人为的）示例为例，想象一张桌子，人们去那里取票，根据姓氏的不同字母范围有不同的职员。两个姓氏以A结尾的人不能同时取票，否则负责他们的工作人员可能会混淆并出错。但是，姓以 A 结尾的人可以与姓以 Z 结尾的人同时取票，因为他们各自的职员在不同的姓名列表和票堆上进行操作，因此一个不会对另一个产生负面影响.

在这个例子中，客户姓氏的字母是源，客户是中断。职员是中断处理程序，名称列表和票证堆是内核数据结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:55:05.377

其他答案很好，但要记住的另一件事是电平触发中断。如果中断控制器没有禁用它正在触发的中断，那么电平触发的中断将在 ISR 有机会告诉硬件停止中断之前立即重新触发自身。通常，ISR 不仅需要重置 PIC，还需要告诉正在与之交谈的硬件让其闭嘴。如果硬件继续中断，那么堆栈就会溢出，操作系统就会烤焦。

# tfs - 从命令行获取 tfs shevleset 详细信息

> ID：11120117
> 
> 赞同：0
> 
> 时间：2012-06-20T12:58:00.093
> 
> 标签：tfs, tfs-power-tools

想知道是否有一种方法可以从命令行查询搁置集的详细信息。我经常需要将我的搁置集迁移到以后的分支，以便最终签入。问题是当一个人使用 Team Foudation Power Tools (tfpt migrate) 命令时，它不仅需要知道搁置集的名称，还需要知道它开发的源分支/搁置在下面。很高兴找到一种方法来利用已经提供了“Shevleset 名称”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:14:48.713

tf.exe [Shelvesets](http://msdn.microsoft.com/en-us/library/ms181451%28v=vs.100%29.aspx)命令对您来说足够了吗？

然后[tf.exe status /shelveset:Name](http://msdn.microsoft.com/en-us/library/9s5ae285%28v=vs.100%29.aspx)如果要显示搁置集中的更改。

# java - Struts 中的文件下载开始事件

> ID：11120121
> 
> 赞同：2
> 
> 时间：2012-06-20T12:58:10.610
> 
> 标签：java, jsp, struts, download

在我的 struts 应用程序中，用户可以从服务器下载文件。

我想在按钮单击（启动下载）和文件准备好下载之间的时间内显示一个微调器。文件开始下载时是否会触发事件？我认为这将是某种页面加载事件。

这是我的 struts xml 中的部分：

```
<action name="getFile" method="getFile" class="foo.pack.TAction">
    <result name="success" type="stream">
        <param name="contentType">application/pdf</param>
        <param name="contentDisposition">attachment;filename=${fileName}</param>
    </result>
    <result name="login" type="redirect">/login</result>
    <result name="error" type="tiles">showError</result>
</action> 
```

单击按钮时，我设置`window.location = localhost:8080/getFile.action` 下一个文件下载（n 秒后）

在从服务器获取文件期间显示微调器的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:32:18.630

对于这个答案，我将假设“普通”JSP/Servlet/HTML/JS，因为我不使用 Struts。然而，对于高级 Struts（和 jQuery）用户来说，将其移植到 Struts（和 jQuery）应该足够简单。

至此，您可以在下载请求的响应中设置一个 cookie，并让 JavaScript 轮询该 cookie。准备好下载后，cookie 将在 JavaScript 中可用。为确保在同一会话中跨多个浏览器窗口/选项卡工作，最好生成一个唯一的下载令牌并将其作为请求参数传回，以便服务器端可以将其设置为 cookie 值。事后不要忘记使 cookie 过期，以防止 cookie 污染。

基本上（你可以`<span>`用`<img>`指向一些微调器 gif 来代替）：

```
<input type="button" value="Download" onclick="download()" />
<span id="wait" style="display:none">Please wait while we prepare the download...</span> 
```

使用此 JavaScript（使用 jQuery 时，[jquery-cookie 插件](https://github.com/carhartl/jquery-cookie)可能会有所帮助）：

```
function download() {
    var token = new Date().getTime();
    var wait = document.getElementById("wait");
    wait.style.display = "block";

    var pollDownload = setInterval(function() {
        if (document.cookie.indexOf("download=" + token) > -1) {
            document.cookie = "download=" + token + "; expires=" + new Date(0).toGMTString() + "; path=/";
            wait.style.display = "none";
            clearInterval(pollDownload);
        }
    }, 500);

    window.location = "download?token=" + token;
} 
```

在 servlet（或 Struts 操作，如果适用）中：

```
// Prepare download here.
// ...

// Once finished, set cookie and stream download to response.
Cookie cookie = new Cookie("download", request.getParameter("token"));
cookie.setPath("/");
response.addCookie(cookie);
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:07:55.187

您不能仅使用客户端脚本来执行此操作，因为下载完成时没有事件。

使用`struts2-jquery`并进行 Ajax 调用`getFile.action`，同时您必须使用以下标记库才能进行 Ajax 调用：

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%> 
```

在您的头部标签内添加以下行，也是隐藏的图像标签。

```
<head>
    <sj:head locale="de" jqueryui="true" defaultIndicator="myDefaultIndicator"/>
      </head>

<body>
..............

    <img id="myDefaultIndicator" src="images/ajax-loader.gif" alt="Loading..." style="display:none"/>
...............
</body> 
```

[参考链接。](http://code.google.com/p/struts2-jquery/wiki/HeadTag)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:00:44.600

如果你有一个中间 html 视图，那么你可以添加一些延迟的 javascript 操作来显示一个微调器，而视图在后台调用 localhost:8080/getFile.action。无论如何，一旦下载完成，我不知道如何隐藏微调器。

# android - 在 AChartEngine 中单击时突出显示饼图切片

> ID：11120125
> 
> 赞同：4
> 
> 时间：2012-06-20T12:58:32.443
> 
> 标签：android, achartengine

我想在用户单击时突出显示（更改颜色）饼图特定切片。我可以在示例（下面的代码）中找到可以显示切片索引和确切点的信息。但是重新着色切片呢？

```
mChartView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
          SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();
          if (seriesSelection == null) {
            Toast
                .makeText(PieChartBuilder.this, "No chart element was clicked", Toast.LENGTH_SHORT)
                .show();
          } else {
            Toast.makeText(
                PieChartBuilder.this,
                "Chart element data point index " + seriesSelection.getPointIndex()
                    + " was clicked" + " point value=" + seriesSelection.getValue(),
                Toast.LENGTH_SHORT).show();
          }
        }
      }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:42:52.390

这将做你需要的东西：

```
mRenderer.getSeriesRendererAt(seriesSelection.getPointIndex()).setColor(color);
mChartView.repaint(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:25:51.180

图表上 onClick 的代码：

用这个：

```
mChartView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
          SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();
          if (seriesSelection == null) {
            Toast.makeText(PieChartBuilder.this, "No chart element selected", Toast.LENGTH_SHORT)
                .show();
          } else {
            for (int i = 0; i < mSeries.getItemCount(); i++) {
              mRenderer.getSeriesRendererAt(i).setHighlighted(i == seriesSelection.getPointIndex());
            }
            mChartView.repaint();
            Toast.makeText(
                PieChartBuilder.this,
                "Chart data point index " + seriesSelection.getPointIndex() + " selected"
                    + " point value=" + seriesSelection.getValue(), Toast.LENGTH_SHORT).show();
          }
        }
      }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-24T23:19:29.397

您还需要确保图表是可点击的。我花了很长时间想知道为什么我不能让它工作。线

```
mRenderer.setClickEnabled(true); 
```

应该包括

# mysql - 使用 INSERT ... SELECT 时自动增加间隙，即使 innodb_autoinc_lock_mode = 0

> ID：11120127
> 
> 赞同：6
> 
> 时间：2012-06-20T12:58:51.883
> 
> 标签：mysql

我的自动递增键有间隙，即使使用

```
innodb_autoinc_lock_mode = 0 
```

我将问题隔离为单个 INSERT ... SELECT 语句。**基本上，即使没有实际执行插入**（重复键），每个 INSERT ... SELECT 语句都会将表的 auto_increment 递增 1 。就我而言，我使用 INSERT IGNORE，但我没有进行测试，并且 auto_increment 仍然错误地递增。

我担心这个，因为这个 INSERT ... SELECT 语句运行的频率有点高，所以键很快就会变大。

如果没有办法，我会忍受它，但有没有办法避免这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:40:51.063

这是一个错误。看到这个：[http](http://bugs.mysql.com/bug.php?id=61058)
://bugs.mysql.com/bug.php?id=61058 ...你可以避免它使用：

```
ALTER TABLE `test` AUTO_INCREMENT = 1; 
```

`insert...select` 然而，这不是一个好主意，因为创建`alter table`临时表，复制数据等等..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:58:46.460

看起来像mysql中的一个常见问题。就我个人而言，我只是忍受它。

# vb.net - VB.NET 斑马线

> ID：11120129
> 
> 赞同：0
> 
> 时间：2012-06-20T12:58:55.270
> 
> 标签：vb.net

我想在我的表格中“画”斑马线

![斑马](../Images/58ca98a24edb66e8f1bd8d0c29eb7361.png)

不是桌子，只是线条
黑色
白色
黑色
白色

可以导入背景图片，但我更喜欢代码 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:00:44.713

```
TextBox1.Text = 80
        If IsNumeric(TextBox1.Text) Then
            Dim color As Integer = 1
            Dim top As Integer = 10
            Dim LineNum As Integer = Integer.Parse(TextBox1.Text)
            For i = 0 To LineNum
                Dim line As New Panel
                line.Width = 300
                line.Height = 40

                If color = 1 Then
                    color = 0
                    line.BackColor = Drawing.Color.Black
                Else
                    color = 1
                    line.BackColor = Drawing.Color.White
                End If
                top = top + 40
                line.Top = top
                Me.Controls.Add(line)

            Next

        End If 
```

;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T09:52:59.493

用于 datagridview VB.NET 的斑马

```
 DataGridView1.GridColor = Color.Blue
 DataGridView1.DefaultCellStyle.ForeColor = Color.Black 
 DataGridView1.RowsDefaultCellStyle.BackColor = Color.Red
 DataGridView1.AlternatingRowsDefaultCellStyle.BackColor = Color.Yellow
 DataGridView1.GridColor = Color.Silver 
```

# android - 在 jython 中编写 Android 应用程序

> ID：11120130
> 
> 赞同：64
> 
> 时间：2012-06-20T12:58:57.980
> 
> 标签：android, python, jython

前几天，我遇到了一个名为 Jython 的 Python 实现。
使用 Jython，您可以使用 Python 编写 Java 应用程序并将它们编译为纯 Java。

我想知道：Android 编程是用 Java 完成的。
那么，是否可以使用 Jython 制作 Android 应用程序？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-20T14:44:01.647

Jython 不编译为“纯 java”，它编译为*java 字节码*- 即`*.class`文件。为了为 Android 开发，进一步将 java 字节码编译为 Dalvik 字节码。这意味着，是的，Jython*可以*让您使用 Python 开发 Android，前提是您可以让它与 Android SDK 配合使用（我没有亲自尝试过，所以我不知道它实际上有多难） -您*确实*需要确保不依赖任何 Android 不提供的 Java API，并且在运行 jython 时*可能*需要有一些 Android API文件。`.class`除了这些琐事之外，您的核心想法应该可行 - 事实上，Jython 确实让我们用 Python 编写代码来与在 JVM 上运行的任何其他东西进行交互。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T13:15:13.473

只要它编译为纯 java（有一些限制，因为某些 API 不可用），但我怀疑 python 在开发特定于 android 的东西（如活动和 UI 操作代码）中会有多大用处。

您还必须注意应用程序的大小——这是对移动开发的严重限制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-15T20:11:38.873

我特别喜欢[基维](https://kivy.org/)

[Scripting Layer for Android (SL4A)](https://github.com/damonkohler/sl4a)允许您直接在 Android 设备上编辑和执行脚本和交互式解释器，从而将脚本语言引入 Android。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-14T08:34:28.690

是和不是。使用 jython，您可以使用 java 类为 JVM 进行编译。但是Android使用的是DVM（Dalvik Virtual Machine），编译出来的代码就不同了。您必须使用工具将 JVM 代码转换为 DVM。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-09T19:46:22.127

是的你可以。

在您的计算机上测试您的 python 代码，如果没问题，复制到您的 Android 设备。

从 Google Play 商店安装 Pydroid 并在应用程序中再次编译您的代码，您将准备好并运行您的应用程序。

在 Pydroid 中使用 pip 来安装任何依赖项。

PS：您需要配置您的 Android 设备以安装来自 Play Store 之外的 APK。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-20T07:00:17.967

这是不可能的。您不能将 jython 与 android 一起使用，因为 DVM 不理解它。DVM 不是 JVM。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2014-11-03T16:38:00.397

可悲的是没有。

手机只有 Java ME（微型版），而 Jython 需要 Java SE（标准版）。我没有 Jython 端口，也没有足够的兴趣让它值得努力。

# blackberry - BlackBerry App World 无法在草稿模式下下载应用程序

> ID：11120132
> 
> 赞同：0
> 
> 时间：2012-06-20T12:59:02.843
> 
> 标签：blackberry, in-app-purchase

我正在尝试创建具有应用内购买功能的 BB 应用程序。我遵循以下步骤并期待结果。

1.  在使用 BlackBerry App World 供应商门户时设置“沙盒”帐户
2.  将您的应用程序上传到 BlackBerry 应用程序世界，但不要发布它，只需将其保留为草稿状态
3.  同样在供应商门户中，设置您的数字商品（可用于应用内购买的东西）
4.  在您的 BlackBerry 上，加载 App World 并使用您的沙盒帐户电子邮件地址登录。
5.  在 App World 的任何屏幕中按 ALT+TST 并输入您的测试应用的 SKU 或 ID。
6.  然后，您可以下载您的应用程序的测试版本（其他人无法使用）
7.  下载并安装应用程序后，您将能够测试您的应用内付款。

对我来说，它工作了一段时间，但从最近两天开始，当我尝试使用步骤 5 下载应用程序时，即 ALT+TST 在下载开始后它停止给出错误“发生错误，请稍后再试”

请让我知道可能是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:42:11.427

我面临同样的问题。在这方面我有一些假设。似乎当您将构建上传到供应商门户时，准备下载需要时间。时间可能从 7 到 12 小时不等。他们需要一些来更新他们的数据库和同步。您可以尝试的另一件事是将您的时区和时间设置为由运营商自动更新。

RIM 确认这是 App World 3.0 版中的错误，但它似乎在 3.1 版中仍然存在

希望这可以解决您的问题。

# agent - 从内联代理访问局部变量

> ID：11120133
> 
> 赞同：2
> 
> 时间：2012-06-20T12:59:04.803
> 
> 标签：agent, eiffel

我正在尝试实现dos_key_exist，我认为下面的代码可以做到。但我得到一个编译错误 key not found 行：Result := not (x.key = key)

```
does_key_exist(key: attached STRING):BOOLEAN
    do
        Result := not data.item(hash(key)).for_all (agent (x:like pair_at):BOOLEAN
            do
                Result := not equal(x.key, key)
            end)
    end 
```

定义：

```
pair_at(key:attached STRING):TUPLE[key:STRING;value: like value_at]
    require
        does_key_exist(key)
    deferred
    ensure
    end

list_at(key:STRING) : LINKED_LIST[like pair_at]
        require
            does_key_exist(key)
        end

data : ARRAY[like list_at] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:51:51.227

Eiffel 中的内联代理可以访问当前对象的属性，但不能访问局部变量或参数，因为它们只是“正常”代理的语法糖，它们是根据类的正常特征构建的。后者无法访问其他功能的本地变量或参数。因此，可以通过显式传递参数来更正代码：

```
does_key_exist (key: STRING): BOOLEAN
    do
        Result := not data.item (hash (key)).for_all
            (agent (x: like pair_at; y: STRING): BOOLEAN
                do
                    Result := not equal(x.key, y)
                end
            (?, key))
    end 
```

# php - htaccess / 重写规则问题...有什么想法吗？

> ID：11120136
> 
> 赞同：1
> 
> 时间：2012-06-20T12:59:13.913
> 
> 标签：php, apache, .htaccess, mod-rewrite, post

在过去的 24 小时里，我一直在这里和通过搜索谷歌来寻找我的问题的解决方案，但我一直找不到任何东西。抱歉，如果这在任何地方重复。

对于我网站的最后一个版本，用 php 编写，我只有一个索引页面，我使用这样的请求来获取正确的页面：

```
?public=view/thispage
?page=account/loggedin 
```

我现在正在编写该网站的新版本，也是在 php 中，并且我正在尝试使其具有搜索引擎友好的 url/slugs 例如

```
/page/view/thispage
/account/login 
```

我已经设法让虚拟子域为每个客户端工作，使用下面代码的顶部，我已经设法让 slug 页面使用底部工作。

我遇到的问题是表单，例如用于注册站点、编辑用户配置文件等的表单。我在这个站点上读到，使用 apache 重写 $_POST 变量应该传递给脚本，不像重定向，但我正在使用重写，当任何表单数据传递给 slug（例如 /profile/edit）时它不起作用，尽管如果它传递给 virtualsubdomain.mydomain.com/test.php 例如它确实.

谁能帮助我并找到一种方法来修复下面的 htaccess 文件并允许将 $_POST vars 传递给我的 slug 脚本（下面代码中的 index.php）？我可能只是缺少一件小事。

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.mydomainhere.org
RewriteCond %{HTTP_HOST} ^(.+).mydomainhere.org/^(.+)
RewriteRule ^([^/]*)$ http://mydomainhere.org [P,L]

ErrorDocument 404 /index.php

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /index.php
</IfModule> 
```

我无法弄清楚为什么发布变量可以被仅存在于虚拟子域中的 php 文件读取，但是在将它们发布到 slug（例如 /profile/editprofile）时无法读取它们。我的服务器上的全局变量已关闭，但以下只是显示默认的空白变量，因此它们显然没有被传递。

```
$test = ''; //define the variable to please global vars off
$test = $_POST["namehere"];
echo $test; 
```

任何帮助，将不胜感激。除了您可能知道的自定义错误文件之外，我对使用 htaccess 文件还很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:43:43.010

我只是在猜测，因为您的 .htaccess`RewriteCond`和其他人有同样的问题 - 您将任何子域（除了`www`或不包含 的 URL `www.`）重定向到您的域 URL 没有`www.`- 如果我猜对了：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.mydomainhere.org
RewriteCond %{HTTP_HOST} ^(.+).mydomainhere.org/^(.+)
RewriteRule ^([^/]*)$ http://mydomainhere.org [P,L] 
```

然后在您的表单中，您可能在`action`属性中包含不包含的 URL，`www.`因此此操作 URL 会被重定向，并且 POST 可能会丢失......

尝试`action`使用包含以下内容的 URL 填充您的表单属性`www.`：

```
<form method="POST" action="http://www.mydomainhere.org/my_page_to_post_to.php"> 
```

也许这会有所帮助...

# .htaccess - 从 domain.co.uk/cgi-bin/ 重定向到主页

> ID：11120141
> 
> 赞同：2
> 
> 时间：2012-06-20T12:59:27.137
> 
> 标签：.htaccess, redirect, cgi-bin

我有很多链接无法更改到我网站上的旧目录。这些目录都在 cgi-bin 目录中。一个不再存在的此类链接是：

[http://www.domain.org.uk/cgi-bin/admin/uploads/documents/health_key.pdf](http://www.domain.org.uk/cgi-bin/admin/uploads/documents/health_key.pdf)

我的 .htaccess 中有以下规则

错误文档 404 [http://www.domain.org.uk](http://www.domain.org.uk)

我希望所有非工作链接都转到我的主页，但尽管 404 适用于大多数页面，但它不适用于 cgi-bin 目录中的任何链接。我该如何解决这个问题？

问候， 凯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:10:59.977

检查你的服务器的配置（.htconf 文件，如果它是 Apache 并且你可以访问它）关于 cgi-bin / 脚本配置的部分。或根文件夹的 .htaccess 文件（其中包含 cgi-bin 文件夹的文件夹）。

AFAIK，cgi-bin 文件夹主要配置为保存可执行脚本。此目录不应包含任何直接访问的非可执行文件（如您示例中的 PDF）。AFAIK，标准 HTTP 规则（如 404 错误规则）不适用于 cgi-bin 文件夹，因为该文件夹主要受到特殊威胁（例如，如果您将其删除，它将在大多数服务器上自动重新创建） ）。

干杯，T。

# linux - Openssl sha1 长度

> ID：11120145
> 
> 赞同：3
> 
> 时间：2012-06-20T12:59:45.100
> 
> 标签：linux, bash, openssl

为什么执行命令后`openssl sha1 < /dev/null | wc --bytes`输出为50？SHA-1 的输出大小应该有 160 位，这给了我们 20 个字节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T13:08:01.740

*为什么输出是`openssl sha1 < /dev/null | wc --bytes`50？*

```
$ openssl sha1 < /dev/null
(stdin)= da39a3ee5e6b4b0d3255bfef95601890afd80709 
```

因为 20 字节的摘要以十六进制为前缀，`(stdin)=`并以十六进制表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T10:11:34.580

如果您想要原始的、未格式化的字节，请将 OpenSSL 的十六进制格式输出通过管道传输到`xxd -r -p`，以将该表示形式转换为原始字节。

例如，要对字符串进行 Base64 编码的 SHA-1 摘要`foo`：

```
$ echo "foo" | openssl sha1 | xxd -r -p | base64
8dLS+STphqyG/fezbJS83zK+7BU= 
```

或者简单地验证消息长度：

```
$ echo "foo" | openssl sha1 | xxd -r -p | wc --bytes
20 
```

# c# - 如何将带有（'）的字符串插入到sql数据库中？

> ID：11120148
> 
> 赞同：6
> 
> 时间：2012-06-20T13:00:06.470
> 
> 标签：c#, sql-server

我有由（'）引号组成的字符串，例如“母爱”......

通过 c# 中的 sql 查询插入数据时。它显示错误。如何纠正问题并成功插入此类数据？

```
string str2 = "Insert into tblDesEmpOthDetails (EmpID, Interviewnotes) values ('" + EmpId + "','" + Interviewnotes + "')"; 
```

采访笔记包含诸如“母爱”之类的值（带单引号）。执行此查询时，它显示错误为“字符串') 后的未闭合引号”我如何插入这种类型的字符串？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-20T13:03:42.433

我很确定您不使用 SQL 参数：

```
using (SqlCommand myCommand = new SqlCommand(
    "INSERT INTO table (text1, text2) VALUES (@text1, @text2)")) {

    myCommand.Parameters.AddWithValue("@text1", "mother's love");
    myCommand.Parameters.AddWithValue("@text2", "father's love");
    //...

    myConnection.Open();
    myCommand.ExecuteNonQuery();
    //...
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-20T13:02:21.183

使用命名参数和 SqlParameter。

来自[http://www.dotnetperls.com/sqlparameter](http://www.dotnetperls.com/sqlparameter)

```
class Program
{
    static void Main()
    {
        string dogName = "Fido";  // The name we are trying to match.

        // Use preset string for connection and open it.
        string connectionString = 
            ConsoleApplication1.Properties.Settings.Default.ConnectionString;

        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();

            // Description of SQL command:
            // 1\. It selects all cells from rows matching the name.
            // 2\. It uses LIKE operator because Name is a Text field.
            // 3\. @Name must be added as a new SqlParameter.
            using (SqlCommand command = 
               new SqlCommand("SELECT * FROM Dogs1 WHERE Name LIKE @Name", connection))
            {
                // Add new SqlParameter to the command.
                command.Parameters.Add(new SqlParameter("Name", dogName));

                // Read in the SELECT results.
                SqlDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {
                    int weight = reader.GetInt32(0);
                    string name = reader.GetString(1);
                    string breed = reader.GetString(2);
                    Console.WriteLine("Weight = {0}, Name = {1}, Breed = {2}", weight, name, breed);
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-20T13:03:01.287

虽然，您可以用两个 ' 字符 ('') 替换字符串中的所有 ' 字符，但这不是一个好主意。由于这个问题和许多其他原因（例如避免 SQL 注入攻击），您绝对应该使用命名参数，而不是通过将值直接连接到字符串中来将值添加到您的插入语句中。例如：

```
command.CommandText = "Insert into tblDesEmpOthDetails (EmpID, Interviewnotes) values (@EmpId, @Interviewnotes)";
command.Parameters.AddWithValue("EmpId", EmpId);
command.Parameters.AddWithValue("Interviewnotes", Interviewnotes); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T13:08:26.890

将此行添加到您尝试输入的字符串中

说你的字符串是

```
string test = "that's not working correctly"
test = replace(Request.QueryString(test), "'", "''") 
```

然后测试现在

```
"that''s not working correctly" 
```

这在 SQL 的语法上是正确的

问候

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T13:24:37.040

作为（非常正确地）指向参数的答案的变体：如果这看起来需要做很多工作，那么请使用诸如[dapper之类的工具来](http://nuget.org/packages/Dapper)*避免它*：

```
int empId = 123;
string notes = "abc";
connection.Execute(@"insert into tblDesEmpOthDetails (EmpID, Interviewnotes)
                     values (@empId, @notes)", new {empId, notes}); 
```

Dapper 将自动获取`empId`and `notes`（来自匿名对象）并将它们添加为命名/类型参数。类似`Query`/`Query<T>`扩展方法还允许直接对对象模型进行简单且高度优化的*查询。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-20T13:04:39.810

您需要使用双 ''

```
INSERT INTO something (Name) VALUES ('O''something''s') 
```

这将插入 O'something's。我读到的另一个例子是：

假设我们有一个字符串：

```
SQL = "SELECT * FROM name WHERE LastName='" & LastName & "' " 
```

如果我们有 O'Brian、O'Reily 等姓氏，我们会得到类似的字符串

```
SELECT * FROM name WHERE LastName='O'Brien' 
```

第二个 ' 将结束 SQL 语句。所以这里最简单的解决方案是使用双 '' 然后我们将有这样的字符串：

```
SELECT * FROM name WHERE LastName='O''Brien' 
```

# android - java.lang.OutOfMemoryError（致命异常）

> ID：11120149
> 
> 赞同：-2
> 
> 时间：2012-06-20T13:00:18.423
> 
> 标签：android, apk

在我的应用程序中，当我将我的 apk 文件从 eclipse 部署到我的选项卡时，它会显示以下错误。

```
06-20 18:32:52.550: E/AndroidRuntime(2927): FATAL EXCEPTION: main
    06-20 18:32:52.550: E/AndroidRuntime(2927): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.Bitmap.nativeCreate(Native Method)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.content.res.Resources.getDrawable(Resources.java:581)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.drawable.AnimationDrawable.inflate(AnimationDrawable.java:267)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.content.res.Resources.loadDrawable(Resources.java:1694)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.content.res.Resources.getDrawable(Resources.java:581)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.view.View.setBackgroundResource(View.java:7533)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at Newtons.law.Newton_LawsActivity$1$1.run(Newton_LawsActivity.java:79)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.os.Handler.handleCallback(Handler.java:587)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.os.Handler.dispatchMessage(Handler.java:92)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.os.Looper.loop(Looper.java:123)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at android.app.ActivityThread.main(ActivityThread.java:3683)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at java.lang.reflect.Method.invokeNative(Native Method)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at java.lang.reflect.Method.invoke(Method.java:507)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    06-20 18:32:52.550: E/AndroidRuntime(2927):     at dalvik.system.NativeStart.main(Native Method) 
```

然后我是goolge它我得到了一个解决方案......

```
@Override
    protected void onDestroy() {
    super.onDestroy();

    //unbindDrawables(findViewById(R.id.rl1));
    System.gc();
    Runtime.getRuntime().gc();

    } 
```

我的整个班级代码如下.. **编辑**

```
public class Newton_LawsActivity extends Activity implements OnTouchListener, OnGestureListener,OnDoubleTapListener {
    /** Called when the activity is first created. */
    OnTouchListener l;
    ImageView animation;
    ImageView hideimage;

    TextView t,s;
    Thread timer;
    int timesleep=0;
    int rid;
    int passid;
    int pausecount=0;
    double pixel,pixel1,pixel2,pixel3;
    String law="null";
    private GestureDetector gestureDetector;
     AnimationDrawable newtonAnimation;
     int worm_big_count=0;
     int apple_big_count=0;
    float x,y;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        gestureDetector = new GestureDetector(this);
        // the frame-by-frame animation defined as a xml file within the drawable folder
            animation = (ImageView)findViewById(R.id.image);
            //animation.setBackgroundResource(R.drawable.anatomy_5);
            hideimage=(ImageView)findViewById(R.id.imagein);
            s=(TextView) findViewById(R.id.t);
            t=(TextView) findViewById(R.id.text);
            //Starting the first animation.
           passid=R.drawable.firstlaw_00;
           AnimationStart(passid,timesleep);
            rid=R.drawable.touchnewtonfinal415;
             law="firstlaw_01";
            animation.setOnTouchListener(this); 
            registerForContextMenu(animation);

        } 
    public void AnimationStart(final int id,final int time){
         timer=new Thread(){
        @Override
            public void run(){
                                try{
                                    Thread.sleep(time);
                                    }catch(Exception e){}
                                    finally{
                                                Newton_LawsActivity.this.runOnUiThread(new Runnable() {
                                                public void run(){
                                                         animation.setBackgroundResource(id);
                                                         newtonAnimation  = (AnimationDrawable) animation.getBackground();
                                                         newtonAnimation.start();
                                                 }});
                                            }
                                }
                        };
    timer.start();
    }

    private void animationswitch(float x, float y) {
        // TODO Auto-generated method stub
     pixel = getmaskpixel(x,y,animation,rid);
     pixel1= getmaskpixel(x+2,y,animation,rid);
     pixel2= getmaskpixel(x,y+2,animation,rid);
     pixel3= getmaskpixel(x+2,y+2,animation,rid);
     Log.w("DEBUG","which is null:pixel" + pixel +"pixel1"+pixel1+"pixel2"+pixel2+"pixel3"+pixel3 );
     if ((pixel==-583672 || pixel1==-583672 || pixel2==-583672 || pixel3==-583672 )&& law=="firstlaw_01"){
         passid=R.drawable.firstlaw_01;   //passid is referring animation file 
          law="firstlaw_02";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
         t.setText("Newton's first law says");
     }else if(((pixel==-1.6711903E7 || pixel1==-1.6711903E7|| pixel2==-1.6711903E7 || pixel3==-1.6711903E7 )||(pixel==-1.6187607E7 || pixel1==-1.6187607E7|| pixel2==-1.6187607E7 || pixel3==-1.6187607E7)) && law=="firstlaw_01"){
         passid=R.drawable.secondlaw_01;
          law="secondlaw_02";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
          t.setText("Newton's Second law says");
     }else if(((pixel==-1.6761609E7 || pixel1==-1.6761609E7|| pixel2==-1.6761609E7 || pixel3==-1.6761609E7 )||(pixel==-1.6760329E7 || pixel1==-1.6760329E7|| pixel2==-1.6760329E7 || pixel3==-1.6760329E7)||(pixel==-1.6236033E7 || pixel1==-1.6236033E7|| pixel2==-1.6236033E7 || pixel3==-1.6236033E7)||(pixel==-1.6236033E7 || pixel1==-1.6236041E7|| pixel2==-1.6236041E7 || pixel3==-1.6236041E7)) && law=="firstlaw_01"){
         passid=R.drawable.thirdlaw_01;  //passid is referring animation file 
          law="thirdlaw_02";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
          t.setText("Newton's Third law says");
     }else if((pixel==-1 || pixel1==-1 || pixel2==-1 || pixel3==-1 ) && law=="firstlaw_03"){
         passid=R.drawable.firstlaw_03;          //passid is referring animation file 
          law="firstlaw_04";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();

     }else if((pixel==-65536 || pixel1==-65536 || pixel2==-65536 || pixel3==-65536)&& law=="firstlaw_05"){
         passid=R.drawable.firstlaw_05;          //passid is referring animation file 
          law="firstlaw_06";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();

     }else if((pixel==-1.2444648E7|| pixel1==-1.2444648E7 || pixel2==-1.2444648E7 || pixel3==-1.2444648E7 ) && law=="firstlaw_07"){
         passid=R.drawable.firstlaw_07;          //passid is referring animation file 
          law="firstlaw_08";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();

     }else if((pixel==-1 || pixel1==-1 || pixel2==-1 || pixel3==-1 ) && law=="secondlaw_01"){
         passid=R.drawable.secondlaw_01;

          law="secondlaw_02";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
          t.setText("Newton's Second law says");

     }else if((pixel==-1 || pixel1==-1 || pixel2==-1 || pixel3==-1 ) && law=="secondlaw_03"){
         passid=R.drawable.secondlaw_03;          //passid is referring animation file 
          law="secondlaw_04";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
          t.setText("");

     }else if((pixel==-1 || pixel1==-1 || pixel2==-1 || pixel3==-1 ) && law=="secondlaw_05"){
         passid=R.drawable.secondlaw_05;          //passid is referring animation file 
          law="secondlaw_06";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();

     }else if((pixel==-1 || pixel1==-1 || pixel2==-1 || pixel3==-1 ) && law=="secondlaw_07"){
         passid=R.drawable.thirdlaw_01;  //passid is referring animation file 

         law="thirdlaw_02";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
          t.setText("Newton's Third law says");

     }else if((pixel==-65536 || pixel1==-65536 || pixel2==-65536 || pixel3==-65536 ) && law=="secondlaw_07"){
        if(apple_big_count==0)
            apple_big_count++;
        else 
            apple_big_count--;
         wormappleanimation();
          animationstop_01();

     }else if((pixel==-1.2444648E7 || pixel1==-1.2444648E7 || pixel2==-1.2444648E7 || pixel3==-1.2444648E7 ) && law=="secondlaw_07"){
         if(worm_big_count==0)
                worm_big_count++;
            else 
                worm_big_count--;
             wormappleanimation();
              animationstop_01();

     }else if(((pixel==-1.2444648E7 || pixel1==-1.2444648E7|| pixel2==-1.2444648E7 || pixel3==-1.2444648E7 )||((pixel==-9753559 || pixel1==-9753559|| pixel2==-9753559 || pixel3==-9753559))) && law=="thirdlaw_03"){
         passid=R.drawable.thirdlaw_03;          //passid is referring animation file 
          law="thirdlaw_04";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
     }else if((pixel==-65536|| pixel1==-65536 || pixel2==-65536 || pixel3==-65536 ) && law=="thirdlaw_05"){
         passid=R.drawable.thirdlaw_05;          //passid is referring animation file 
          law="thirdlaw_06";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
     }else if((pixel==-1|| pixel1==-1 || pixel2==-1 || pixel3==-1 ) && law=="lawmenu"){
          animation.showContextMenu();

     }

     s.setText(Double.toString(pixel));
    }

private void wormappleanimation() {
        // TODO Auto-generated method stub
    if(worm_big_count==0 && apple_big_count==0){
        passid=R.drawable.secondlaw_07_wormapplesmall_01;          //passid is referring animation file 
          law="secondlaw07_wormapplesmall_02";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
    }
    else if(apple_big_count==1 && worm_big_count==0){
        passid=R.drawable.secondlaw_07_applebig_01;          //passid is referring animation file 
          law="secondlaw_07_applebig_02";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
    }
    else if(apple_big_count==0 && worm_big_count==1){
        passid=R.drawable.secondlaw_07_wormbig_01;          //passid is referring animation file 
          law="secondlaw_07_wormbig_02";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
    }
    else if(apple_big_count==1 && worm_big_count==1){
        passid=R.drawable.secondlaw_07_wormapplebig_01;          //passid is referring animation file 
          law="secondlaw_07_wormapplebig_02";                     //changing the law string
          timesleep=0;                           //there is no time for sleeping 
          AnimationStart(passid,timesleep);      //passing the value 
          animationstop_01();
    }
        s.setText(Float.toString(x)+"-x"+Float.toString(y)+"-y"+Double.toString(pixel)+"-pixcolo");
    }
private double getmaskpixel(float x, float y, ImageView view,int rid) {
        // TODO Auto-generated method stub
    Bitmap bm  = BitmapFactory.decodeResource(getResources(), rid);
    int width = bm.getWidth();
    int height = bm.getHeight();
    float scaleWidth = ((float) view.getWidth()) / width;
    float scaleHeight = ((float) view.getHeight()) / height;

    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map

    matrix.postScale(scaleWidth, scaleHeight);
    // matrix.postRotate(90);
    // recreate the new Bitmap
   Bitmap bitmap = Bitmap.createBitmap(bm, 0, 0, width, height,matrix, false);
    Log.w("DEBUG","which is null:image " + bitmap.getWidth() + " OR " +bitmap.getHeight() );
    double bmWidth = view.getWidth();
      double bmHeight = view.getHeight(); 
      if ( x < 0 || y < 0 || x > bitmap.getWidth() || y > bitmap.getHeight()){
           return 0; //Invalid, return 0 
          }else{
           //Convert touched x, y on View to on Bitmap
           int xBm = (int)(x * (bmWidth /  bitmap.getWidth()));
           int yBm = (int)(y * (bmHeight /  bitmap.getHeight()));
           return bitmap.getPixel((int)xBm,(int) yBm); 
    }

}

    public boolean onSingleTapUp(MotionEvent e) {
        return false;
        // TODO Auto-generated method stub

    }
    @Override
    public boolean onDown(MotionEvent arg0) {
        // TODO Auto-generated method stub
        return true;
    }
    @Override
    public boolean onFling(MotionEvent arg0, MotionEvent arg1, float arg2,
            float arg3) {
        // TODO Auto-generated method stub
        return false;
    }
    @Override
    public void onLongPress(MotionEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
            float arg3) {
        // TODO Auto-generated method stub
        return true;
    }
    @Override
    public void onShowPress(MotionEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public boolean onDoubleTap(MotionEvent e) {
        x=e.getX();
        y= e.getY();
        Log.w("DEBUG","which is null:image " + this + " OR " +animation);
        if(pausecount==0){
            pausecount++;
        }else {
            pausecount--;
        }
        pause(pausecount);

        return true;
    }
    public void pause(int pausecount) {
        // TODO Auto-generated method stub
        if(pausecount==1){
            hideimage.setVisibility(0);
                try {
                    synchronized (animation) {
                    animation.wait(1000);
                    }
                }catch (InterruptedException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                pause(pausecount);
           }else{
               hideimage.setVisibility(1);

                animation.notify();

           }
    }
    @Override
    public boolean onDoubleTapEvent(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }
    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        // TODO Auto-generated method stub
        x=e.getX();
        y= e.getY();
        Log.w("DEBUG","which is null:image " + x + " OR " +y);
        animationswitch(x, y);
        return true;
    }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

    if ( keyCode == KeyEvent.KEYCODE_MENU ) {
        Log.w("debug", "MENU pressed");
        animation.showContextMenu();
        return true;
    }
    return super.onKeyDown(keyCode, event);
    }
    void animationstop_01(){
                if(law=="firstlaw_02"){
                        hideimage.setBackgroundResource(R.drawable.touchnewtonfinal415_282);
                        hideimage.invalidate();
                        rid=R.drawable.touchnewtonfinal415_282;
                        Log.w("debug","it is firstlaw_02");
                        passid=R.drawable.firstlaw_02;          //pass id is referring animation file 
                        law="firstlaw_03";                     //changing the law string
                         timesleep=7750;                           //there is no time for sleeping 
                         AnimationStart(passid,timesleep);      //passing the value 

                }else if(law=="firstlaw_04"){
                        hideimage.setBackgroundResource(R.drawable.touchnewtonfinal415_282);
                        hideimage.invalidate();
                        rid=R.drawable.touchnewtonfinal415_282;
                        Log.w("debug","it is firstlaw_04");
                        passid=R.drawable.firstlaw_04;          //pass id is referring animation file 
                        law="firstlaw_05";                     //changing the law string
                         timesleep=22500;                           //there is no time for sleeping 
                         AnimationStart(passid,timesleep);                  
                }else if(law=="firstlaw_06"){
                        hideimage.setBackgroundResource(R.drawable.newtonfinal415_586);
                        hideimage.invalidate();
                        rid=R.drawable.newtonfinal415_586;
                        Log.w("debug","it is firstlaw_06");
                        passid=R.drawable.firstlaw_06;          //passid is referring animation file 
                        law="firstlaw_07";                     //changing the law string
                        timesleep=6250;                           //there is no time for sleeping 
                        AnimationStart(passid,timesleep);           
                }else if(law=="firstlaw_08"){
                        hideimage.setBackgroundResource(R.drawable.newtonfinal415_737);
                        hideimage.invalidate();
                        rid=R.drawable.newtonfinal415_737;
                        Log.w("debug","it is firstlaw_08");
                        passid=R.drawable.firstlaw_08;          //passid is referring animation file 
                        law="secondlaw_01";                     //changing the law string
                         timesleep=4000;                           //there is no time for sleeping 
                         AnimationStart(passid,timesleep);
                }else if(law=="secondlaw_02"){
                         hideimage.setBackgroundResource(R.drawable.newtonfinal415_737);
                         hideimage.invalidate();
                         rid=R.drawable.newtonfinal415_737;
                         Log.w("debug","it is secondlaw_02");
                         passid=R.drawable.secondlaw_02;          //passid is referring animation file 
                         law="secondlaw_03";                     //changing the law string
                         timesleep=7000;                           //there is no time for sleeping 
                         AnimationStart(passid,timesleep);
                }else if(law=="secondlaw_04"){
                          hideimage.setBackgroundResource(R.drawable.newtonfinal415_986);
                          hideimage.invalidate();
                          rid=R.drawable.newtonfinal415_986;
                          Log.w("debug","it is secondlaw_04");
                          passid=R.drawable.secondlaw_04;          //passid is referring animation file 
                          law="secondlaw_05";                     //changing the law string
                          timesleep=6500;                           //there is no time for sleeping 
                          AnimationStart(passid,timesleep);
                }else if(law=="secondlaw_06"){
                          hideimage.setBackgroundResource(R.drawable.newtonfinal415_1059);
                          hideimage.invalidate();
                          rid=R.drawable.newtonfinal415_1059;
                          Log.w("debug","it is secondlaw_06");
                          passid=R.drawable.secondlaw_06;          //passid is referring animation file 
                          law="secondlaw_07";                     //changing the law string
                          timesleep=1500;                           //there is no time for sleeping 
                          AnimationStart(passid,timesleep);
                }else if(law=="secondlaw_07_wormapplebig_02"){
                          hideimage.setBackgroundResource(R.drawable.newtonfinal415_1161_01);
                          hideimage.invalidate();
                          rid=R.drawable.newtonfinal415_1161_01;
                          Log.w("debug","it is secondlaw_07_wormapplebig_02");
                          passid=R.drawable.secondlaw_07_wormapplebig_02;          //passid is referring animation file 
                          law="secondlaw_07";                     //changing the law string
                          timesleep=1500;                           //there is no time for sleeping 
                          AnimationStart(passid,timesleep);
                }else if(law=="secondlaw_07_wormbig_02"){
                          hideimage.setBackgroundResource(R.drawable.newtonfinal415_1199_01);
                          hideimage.invalidate();
                          rid=R.drawable.newtonfinal415_1199_01;
                          Log.w("debug","it is secondlaw_07_wormbig_01");
                          passid=R.drawable.secondlaw_07_wormbig_02;          //pass id is referring animation file 
                          law="secondlaw_07";                     //changing the law string
                          timesleep=1500;                           //there is no time for sleeping 
                          AnimationStart(passid,timesleep);
                }else if(law=="secondlaw_07_applebig_02"){
                          hideimage.setBackgroundResource(R.drawable.newtonfinal415_1128_01);
                          hideimage.invalidate();
                          rid=R.drawable.newtonfinal415_1128_01;
                          Log.w("debug","it is secondlaw_07_applebig_02");
                          passid=R.drawable.secondlaw_07_applebig_02;          //pass id is referring animation file 
                          law="secondlaw_07";                     //changing the law string
                          timesleep=1500;                           //there is no time for sleeping 
                          AnimationStart(passid,timesleep);
                }else if(law=="secondlaw07_wormapplesmall_02"){
                          hideimage.setBackgroundResource(R.drawable.newtonfinal415_1093);
                          hideimage.invalidate();
                          rid=R.drawable.newtonfinal415_1093;
                          Log.w("debug","it is secondlaw07_wormapplesmall_02");
                          passid=R.drawable.secondlaw_07_wormapplesmall_02;          //pass id is referring animation file 
                          law="secondlaw_07";                     //changing the law string
                          timesleep=1500;                           //there is no time for sleeping 
                          AnimationStart(passid,timesleep);
                }else if(law=="thirdlaw_02"){
                          hideimage.setBackgroundResource(R.drawable.newtonfinal415_1322);
                          hideimage.invalidate();
                          rid=R.drawable.newtonfinal415_1322;
                          Log.w("debug","it is thirdlaw_02");
                          passid=R.drawable.thirdlaw_02;          //passid is referring animation file 
                          law="thirdlaw_03";                     //changing the law string
                          timesleep=7250;                           //there is no time for sleeping 
                          AnimationStart(passid,timesleep);
                }else if(law=="thirdlaw_04"){
                          hideimage.setBackgroundResource(R.drawable.newtonfinal415_1690);
                          hideimage.invalidate();
                          rid=R.drawable.newtonfinal415_1690;
                          Log.w("debug","it is thirdlaw_04");
                          passid=R.drawable.thirdlaw_04;          //passid is referring animation file 
                          law="thirdlaw_05";                     //changing the law string
                          timesleep=16500;                           //there is no time for sleeping 
                          AnimationStart(passid,timesleep);
                }else if(law=="thirdlaw_06"){
                          hideimage.setBackgroundResource(R.drawable.newtonfinal415_1931);
                          hideimage.invalidate();
                          rid=R.drawable.newtonfinal415_1931;
                          Log.w("debug","it is thirdlaw_06");
                          passid=R.drawable.thirdlaw_06;          //passid is referring animation file 
                          law="lawmenu";                     //changing the law string
                          timesleep=16750;                           //there is no time for sleeping 
                          AnimationStart(passid,timesleep);
                } 
```

已编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:05:39.730

在您的`Activity`调用中，您正在为 Android 无法处理的太大`Newton_LawsActivity`设置背景可绘制对象，尝试查看您的布局或代码并删除背景，直到此错误得到解决，然后您将知道哪个背景可绘制对象是罪魁祸首，并且您可以尝试减小它的大小或其他东西。`View``Activity`

# javascript - javascript 转义在虚拟主机上不起作用

> ID：11120154
> 
> 赞同：0
> 
> 时间：2012-06-20T13:00:33.383
> 
> 标签：javascript, character-encoding

我对在 Apache 上运行的 javascript 有点陌生，但我有以下问题。

我使用转义使字符串“Café”准备好在使用 javascript 的 url 中使用。

```
"&place=" + escape(placename); 
```

该字符串被翻译成“Caf%E9”，然后在下一页中表示为“Café”，这是一个php页面。

一切都很好，但是，当我将代码上传到我的虚拟主机时，它被翻译为“Caf%C3%A9”。并在页面中显示为“Café”。

我使用 UTF-8 进行解码。我的虚拟主机使用 iconv.input_encoding ISO-8859-1。

我认为问题就在这里。解决此问题的最佳方法是什么？将我的 UTF-8 更改为 ISO-8859-1 还是有一些转换器功能？

**编辑** 我有 UTF8 元标记

```
<meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
```

我也尝试使用 encodeURIComponent 但它给出了相同的结果

```
"&place=" + encodeURIComponent(placename); 
```

编辑：添加代码

这是代码，它在本地的行为与在网络上的行为不同。该代码使用 Google Maps API。

```
 var lat = place.geometry.location.lat();
var lng = place.geometry.location.lng();
var placename = place.name;
var placerating = place.rating;
if (placerating == undefined) {
    placerating = 0;
}
var placeaddress = place.vicinity;
var website = place.website;
var url = place.url;

var day = new Date();
var m = day.getMonth() + 1;
var d = day.getDate();
var y = day.getFullYear();

var formUrl = "myform.php?d=" + d + "&m=" + m + "&y=" + y + "&lat=" + lat + "&lng=" + lng + "&place=" + encodeURIComponent(placename); 
```

请注意，当我提醒（地名）时，它在两种环境中都会给我相同的结果。即“咖啡厅”

**解决方案**

我的虚拟主机使用了另一种编码，它强制页面使用 ISO-8859-1。即使我使用了 html 元标记。

将以下 PHP 标头添加到页面的开头

```
header("Content-type: text/html; charset=utf-8"); 
```

TIA，科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:03:27.097

`escape`不是为了转义查询字符串参数，[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)而是为了。`escape`做一些*类似*但不同的事情，因此它不是 100% 与等式的服务器部分兼容。

但是，另外，您不能使用一种编码对文本进行编码，并在另一端使用*不同*的编码对其进行成功解码。您应该能够通过 apache 标头将页面置于 UTF-8 而不是 ISO-8859-1 中。如果您不能在标题中执行此操作，则可以在 HTML 中执行此操作： 在顶部`head`：

```
<meta charset="UTF-8"> 
```

...然后，当然，确保文件确实以 UTF-8 编码（例如，检查您的编辑器设置等）。

[StackOverflow 上的这个其他答案](https://stackoverflow.com/a/1549498/157247)也可能很有用，它讨论了与 URI 相关的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:17:40.217

解决方案

我的虚拟主机使用了另一种编码，它强制页面使用 ISO-8859-1。即使我使用了 html 元标记。

将以下 PHP 标头添加到页面的开头

```
header("Content-type: text/html; charset=utf-8"); 
```

或者，我要求我的虚拟主机将编码更改为 UTF-8，他们这样做了。

# php - {Object|Array|Anything} 到 PHP 中关于递归限制的字符串？

> ID：11120160
> 
> 赞同：0
> 
> 时间：2012-06-20T13:00:46.920
> 
> 标签：php

PHP中是否有一种直接的方法可以将任意复杂值转换为字符串而不触发递归限制？例如，传递一个非常嵌套的对象并指定我只想要 2 层深。

我要避免的是在 var_export 或 var_dump 上出现错误，即使这意味着我得到的输出不太准确。

谢谢！

澄清：我想使用字符串来记录使用情况，所以调试器不适用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:09:41.353

我不知道任何直接的方法 - 只有相反：使用 XDEBUG (http://xdebug.org/) 并使用`xdebug.var_display_max_depth`设置。

据我所知，XDEBUG 的 var_dump 比 PHP 更好......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:24:35.587

如果您不需要可运行代码，则可以使用`print_r()`which 可以处理超过`var_export()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:24:45.703

也许有一个看起来像这样的超级类：

```
class Dumpable {

    function varDump($max_depth = 2) {
        return self::dump((array)$this, $max_depth);
    }

    public static function dump($arr, $max_depth = 2) {
        if( $max_depth > 0 ) {
            $new_arr = array();
            foreach( $arr as $key => $val ) {
                if( $val instanceof Dumpable) {
                    $new_arr[$key] = $val->varDump($max_depth-1);
                }
                elseif( is_object($val) ) {
                    $new_arr[$key] = self::dump((array)$val, $max_depth-1);
                }
                elseif( is_array($val) ) {
                    $new_arr[$key] = self::dump($val, $max_depth-1);
                }
                else {
                    $new_arr[$key] = $val;
                }
            }
            return $new_arr;
        }
        elseif(is_object($arr)) {
           return 'Object:'.get_class($arr).'...';
        }
        else {
            return 'array...';
        }
    }

    public function __toString() {
        return print_r($this->varDump(), true);
    }
} 
```

然后，您可以`var_dump( $my_dumpable_obj->varDump() );`在想要转储扩展 Dumpable 的对象时调用。如果您的服务器支持 php 5.4，最好在 Trait 中使用此函数。

# google-app-engine - 带有 AppEngine 数据存储的 GWT 语音？

> ID：11120161
> 
> 赞同：1
> 
> 时间：2012-06-20T13:00:52.290
> 
> 标签：google-app-engine, gwt, audio, google-cloud-datastore, clientbundle

我正在开发一个可以播放大量小型 mp3 文件的应用程序。mp3 作为 Java 项目的一部分部署到 App Engine，并通过带有 URL 的 SoundController.createSound() 使用 GWT-voices 播放。

2个问题：

1.  我可以通过这种方式部署的媒体数量是否有限制？我打算每个应用程序使用 100 个小型 mp3。

2.  我需要编辑 MP3 池，而无需重新部署整个程序和媒体。我真的应该以某种形式使用数据存储吗？那将如何运作？GWT-voices 需要 URL，但据我所知，数据存储不处理 URL？

此外，是否有任何（非文本）等效于 ExternalTextResources（在 ClientBundle 中），以启用具有外部缓存的声音文件的客户端捆绑？

感谢您对此的任何想法。

# php - 如何在 Ajax 中更改 HTML“选择”元素的内容？

> ID：11120165
> 
> 赞同：0
> 
> 时间：2012-06-20T13:01:16.803
> 
> 标签：php, javascript, ajax

在一个`PHP`文件中有两个 HTML“选择”元素，比如 list1 和 list2。我希望在`onChange`list1 的事件中 list2 的内容（ display-text 和 value ）将通过`Ajax`调用`PHP`文件来改变。list2 的内容将来自 MySQL 数据库表。怎么做 ？

这是我尝试过的：

```
<script language="javascript">
    function loadObjectsFromTypetache(typeTache)
    {
        var xmlhttp;
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("obs_id_obj").innerHTML=xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","ajaxRemplirObjetObsrv.php?type_tache="+typeTache,true);
        xmlhttp.send();
    }
    function Annuler() 
    {
        // Retour à la liste des enregistrements
        document.location = "<?php echo PAGE_ADMIN; ?>?action=AdminGererObservation";
    }
</script>
...
<select id="typ_tache_code" name="typ_tache_code" onChange="loadObjectsFromTypetache(document.form.typ_tache_code.value)"> // this is list1
<option value="" ><?php echo _getText('admin.obsrv.selectionnerTypeTache'); ?></option>
<?php

   for ($u=0; $u < $data['listTypeTache']['cnt']; $u++)
   {
?>
<option value = "<?php echo $data['listTypeTache'][$u]['typ_tache_code']; ?>"><?php echo $data['listTypeTache'][$u]['typ_tache_lib']; ?></option>
<?php
   }
?>
</select>
<select id="obs_id_obj" name="obs_id_obj">... // this is list2 
```

那么在 ajax 调用的 php url 文件中应该写些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:06:03.820

提尔这个

```
$('#select#s1').change(function(){
  $('select#s2').load('/url')
}) 
```

**/url**检索：

```
<option value="1">Second</option>
<option value="2">Second</option> 
```

# android - 在应用程序中查看和显示 pdf 文件，而不将其作为文件保存在手机中

> ID：11120166
> 
> 赞同：1
> 
> 时间：2012-06-20T13:01:17.033
> 
> 标签：android

我有这个 url [pdf 书](http://c618227.r27.cf3.rackcdn.com/2142.pdf)

我想在我的应用程序中下载或显示它，但没有在手机中存储或下载文件，想法是让用户显示 pdf 书并从我的应用程序浏览它，但不将书作为 pdf 文件保存到他的手机。我尝试了谷歌文档视图并且它工作但它有一个链接可以将文件下载（保存）到手机，因此用户可以将文件保存在他的手机中。我在 android 中寻找自定义下载管理器或任何好的和简单的教程，但我一无所获。我听说过一种叫做将 pdf 文件下载为二进制文件的东西，因此用户无法在应用程序之外打开它然后在应用程序中显示它，但我不知道如何编码。请给我一个提示并帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:22:13.920

您可以使用[内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)。但是，如果用户根他的手机，他将能够获取您的文件。

因此，您可以加密您的文件。并在用户想要读取文件时将其解密到内存 (RAM) 中。您可以轻松地将您的 PDF 转换为 HTML，并使用[WebView](http://developer.android.com/reference/android/webkit/WebView.html)来显示它。您可以尝试使用谷歌搜索以使用 Java 进行加密/解密。

# google-apps-script - onEdit 事件的详细信息应该是什么？

> ID：11120168
> 
> 赞同：1
> 
> 时间：2012-06-20T13:01:20.503
> 
> 标签：google-apps-script

我阅读了[电子表格编辑事件](https://developers.google.com/apps-script/guide_events#TriggerAttributes)的文档，但是如果我使用一个简单的函数测试哪些细节被传递：

```
function onEdit(e) {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  ss.toast(Object.keys(e));
} 
```

我得到了**来源，用户**

这是一个错误还是文档过时/错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:48:56.763

我认为使用“可安装触发器”（您从菜单中设置的触发器）时，只有 on edit 事件的文档。正如您所注意到的，简单的事件处理程序（您正在测试的那个）只接收源和用户。

并且`e.source`已经是活动电子表格，因此您不需要`getActiveSpreadsheet()`. 您可以通过发出`e.source.getActiveRange()`.

仅当`user`您自己或您在 Apps 域帐户中以及活动用户中时才会填写信息。

# ios - 按下取消按钮时覆盖 textFieldShouldEndEditing

> ID：11120175
> 
> 赞同：4
> 
> 时间：2012-06-20T13:01:43.787
> 
> 标签：ios, iphone, ipad, uitextfield

我有一个包含许多字段的详细视图，其中一些使用 textFieldShouldEndEditing 进行一些验证。这一切都很好。但是，如果用户在字段中输入无效数据然后按下取消按钮，则验证例程仍会在调用 textFieldShouldEndEditing 时运行。有没有办法防止这种情况？换句话说，只需彻底取消，因为我不在乎该字段包含什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:26:26.590

在取消按钮功能内清除您当前的 textfield.text=@"";

最初检查 textFieldShouldEndEditing

```
if  ([textfield.text isEqualtoEmpty:@""] 
{
return Yes;
}
else{

// check your condition here

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T11:58:59.167

Senthikumar 的答案在这种特殊情况下有效，但我有一个类似的情况，我需要检查该字段是否也不是空的......

因此我使用了以下技术：

1.  我创建了一个名为“cancelButtonPressed”的 BOOL 属性
2.  在链接到取消按钮的方法中，我将此 BOOL 设置为 YES
3.  在**textViewShouldEndEditing**中，我首先检查了这个 BOOL。如果不是，我会进行控制（例如，包括警报视图）。此方法应始终通过调用**return YES 来完成；**，这意味着如果这个 "cancelButtonPressed" BOOL 为 YES，它应该结束文本字段编辑（并且不会向我的脸抛出警报）。

此外（这与问题没有直接联系，但它通常带有“取消”功能），您可能还有一个“**保存**”按钮，在这种情况下您想阻止用户保存，如果您正在编辑一个textField 和输入不正确。
在这种情况下，我创建另一个名为“textFieldInError”的 BOOL，如果我在 textViewShouldEndEditing 中的控件失败，则将其设置为 YES，如果我的控件成功（在方法结束时），则将其设置为 NO。然后，在链接到我的保存按钮的方法中，我检查该 BOOL 是否为 NO。

这是完整的代码：

```
 @property (nonatomic) BOOL cancelButtonPressed;
  @property (nonatomic) BOOL textFieldInError;

  - (BOOL)textFieldShouldEndEditing:(UITextField *)textField
  {
    // If the user pressed Cancel, then return without checking the content of the textfield
    if (!self.cancelButtonPressed) {

       // Do your controls here
       if (check fails) {
            UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"Error"
                                                         message:@"Incorrect entry"
                                                        delegate:nil
                                               cancelButtonTitle:@"OK"
                                               otherButtonTitles:nil];
            [av show];

            // Prevent from saving
            self.textFieldInError = YES;

            return NO;
       }
    }

    // Allow saving
    self.textFieldInError = NO;

    return YES;
} 
```

保存和取消方法：

```
- (void)saveButtonPressed;
{
   // Resign first responder, which removes the decimal keypad
   [self.view endEditing:YES];

   // The current edited textField must not be in error
   if (!self.textFieldInError) {
      // Do what you have to do when saving
   }
}

- (void)cancel;
{
    self.cancelButtonPressed = YES;

    [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];
} 
```

我希望这可以帮助其他人，因为我很头疼以一种干净、直接的方式解决这个问题。

弗雷德

# java - 在 android 中处理最近的应用程序点击和主页按下

> ID：11120176
> 
> 赞同：1
> 
> 时间：2012-06-20T13:01:50.997
> 
> 标签：java, android, security, android-manifest

我正在为孩子们制作一个应用程序，一旦你进入应用程序，没有我在菜单中要求的密码就无法退出。现在我想如果在应用程序内我按下应用程序中的主页按钮，它应该保持相同的活动。我搜索了很多，但解决方案到处都是在清单中添加过滤器，但这些对我来说效果不佳。我希望在应用程序退出时从启动器中删除我的活动，并再次询问是否启动应用程序。

对于同一个应用程序，如果我按下最近的应用程序按钮并且其中一个被孩子单击，那么该应用程序也应该处于相同的活动中，或者如果有任何方法可以阻止最近的应用程序按钮。

我试过这个

```
<activity
    android:label="@string/app_name"
    android:launchMode="singleInstance"
    android:name=".MyActivity"
    android:screenOrientation="landscape"
    android:excludeFromRecents="true"
    android:taskAffinity=""
    android:stateNotNeeded="true" >
    <intent-filter >
        <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.HOME" />
         <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:27:15.333

> 我正在为孩子们制作一个应用程序，一旦你进入应用程序就无法在没有密码的情况下退出，这是我在菜单中询问的。

幸运的是，出于明显的安全原因，这是不可能的。

> 现在我想如果在应用程序内我按下应用程序中的主页按钮，它应该保持相同的活动，我搜索了很多，但解决方案到处都是在清单中添加过滤器，但这些对我来说效果不佳。

“对我来说效果不佳”是对您的症状的完全无用的解释。您的 SDK 中有一个 Home 示例应用程序，用于演示如何设置主屏幕。

> 对于同一个应用程序，如果我按下最近的应用程序按钮并且其中一个被孩子单击，那么该应用程序也应该处于相同的活动中，或者如果有任何方法可以阻止最近的应用程序按钮。

这些都不可能。

如果您想制作单一用途的 Android 设备，则需要在固件级别进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-28T02:15:12.180

您可以将您的应用程序变成一个启动器。我的启动器通常看起来像：

```
<activity android:name=".MyLauncher">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.HOME"/>
        <category android:name="android.intent.category.DEFAULT"/>
    </intent-filter>
</activity> 
```

当用户选择您的启动器作为默认启动器时，当您在应用程序中时，主页键基本上不会做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-20T11:14:04.123

自 API 14 以来，这就像魅力一样；在模拟器 4.4v、5.0v、7.0v、8.0v、9.0v 上测试；这是解决问题的人的链接：[https ://stackoverflow.com/a/55129289/9497126](https://stackoverflow.com/a/55129289/9497126)

# android - 在android中实现动作栏

> ID：11120185
> 
> 赞同：1
> 
> 时间：2012-06-20T13:02:28.883
> 
> 标签：android, eclipse, implementation, android-actionbar

![android中的gmail应用](../Images/e4591fc89d2ecaf05d1af299cbdf2bb3.png)

我想为我自己的 android 应用程序实现一个操作栏，就像图片底部的那个一样。我搜索了很多，但出现了很多错误。

我尝试了一些库以寻求帮助，例如：Greendroid 和 ActionBarSherlock 但它们都不起作用，或者我无法完美地使用它们！..

我真的需要我的应用程序中的那个操作栏。

如果有人可以帮助我提供一些示例或代码或向我解释，我将不胜感激。

非常感谢 ：） ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:25:48.630

您可以使用 SplitActionBar。您的应用程序应该在 Android 4.0（API 级别 14）或更高版本上运行

解决方法是在顶部栏中始终有一个项目，以防止底部内容永远适合那里，从而迫使所有内容进入底部栏中。看看另一个用户的这个示例项目：

```
<?xml version="1.0" encoding="utf-8"?
<manifest package="com.commonsware.android.actionbarbc"
          xmlns:android="http://schemas.android.com/apk/res/android">

  <application android:hardwareAccelerated="true"
               android:icon="@drawable/cw"
               android:label="@string/app_name">
    <activity android:label="@string/app_name"
              android:name=".InflationDemo"
              android:uiOptions="splitActionBarWhenNarrow">
      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
    </activity>
  </application>
  <uses-sdk android:minSdkVersion="4"
            android:targetSdkVersion="11" />
  <supports-screens android:anyDensity="true"
                    android:largeScreens="true"
                    android:normalScreens="true"
                    android:smallScreens="true"
                    android:xlargeScreens="true" />
</manifest> 
```

他将此代码用于他的活动：

```
private void setupActionBar() {
ActionBar actionBar = getActionBar();

ViewGroup v = (ViewGroup)LayoutInflater.from(this)
    .inflate(R.layout.conversation_list_actionbar, null);
actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM,
        ActionBar.DISPLAY_SHOW_CUSTOM);
actionBar.setCustomView(v,
        new ActionBar.LayoutParams(ActionBar.LayoutParams.WRAP_CONTENT,
                ActionBar.LayoutParams.WRAP_CONTENT,
                Gravity.CENTER_VERTICAL | Gravity.RIGHT));

mUnreadConvCount = (TextView)v.findViewById(R.id.unread_conv_count);
} 
```

[http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar](http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:09:23.597

我认为您需要查看名为 SplitActionBar 的东西。

这方面的文档在[这里](http://developer.android.com/guide/topics/ui/actionbar.html)。

通过简要阅读，它仅适用于“窄”屏幕，并且您声明要通过添加`uiOptions="splitActionBarWhenNarrow"`到 AndroidManifest.xml 文件中的 or 元素来使用拆分操作栏。

您也许可以强制它一直出现，但我不知道，因为我以前没有使用过它。

我希望这有帮助。

# css - Twitter 引导程序：居中缩略图

> ID：11120186
> 
> 赞同：3
> 
> 时间：2012-06-20T13:02:37.683
> 
> 标签：css, twitter-bootstrap

我有一个缩略图列表。他们有固定的大小。我希望连续缩略图的数量随着窗口的宽度而变化。

使用 Twitter Bootstrap 很容易：http: [//jsfiddle.net/charlesbourasseau/5WvAL/](http://jsfiddle.net/charlesbourasseau/5WvAL/)

问题是，当屏幕可以接受 4.5 缩略图时，它们都向左对齐，而我在右侧有一个间隙。

我想知道缩略图是否有可能保持居中，所以左侧和右侧的间隙始终保持不变......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T13:19:10.993

只需覆盖`float:left`thumbnail 上的属性`li`并将它们设置为`display:inline-block`然后`text-align:center`在 parent 上设置`ul`，如下所示：

**CSS**

```
.thumbnails {
    text-align: center;
}
.thumbnails li {
    width: 150px;
    height: 100px;
    background: red;
    float: none !important; /* to overwrite the default property on the bootstrap stylesheet */
    display: inline-block;
    *display: inline; /* ie7 support */
    zoom: 1;
} 
```

演示：http: [//jsfiddle.net/thirtydot/5WvAL/21/](http://jsfiddle.net/thirtydot/5WvAL/21/)

# apache-flex - Flex - 如何在 ItemRenderer 中更改文本字段的样式

> ID：11120190
> 
> 赞同：0
> 
> 时间：2012-06-20T13:02:54.083
> 
> 标签：apache-flex, list, itemrenderer

我可以使用 MouseEvent 和 GetChildAt 方法更改当前选定元素的样式。我需要在不使用 Mouse Evets 的情况下从 actionscript 更改 mx:text 控件的颜色，例如列表中的第二个项目应该更改颜色。

我该怎么做？

感谢帮助

```
 <mx:List id="carTypesList" name="carTypesList" dataProvider="{carTypesResult}"
            height="93%" width="470"
            change="{this.parentApplication.setSelectedTextStyleSelected(event)}"
            >
            <mx:itemRenderer >
                <mx:Component>
                    <mx:HBox horizontalGap="0" width="470" verticalScrollPolicy="off" horizontalScrollPolicy="off"
                             mouseOver="{this.parentApplication.setSelectedTextStyleOver(event)}"
                             mouseOut="{this.parentApplication.setSelectedTextStyleOut(event)}">
                        <mx:Image id="modelDisabled" name="{data.@id}"
                                  width="12" height="12"
                                  visible="{data.@disabled == 'X'?true:false}"
                                  includeInLayout="{data.@disabled == 'X'?true:false}"
                                  source="img/resfleet/blocked_ico.png" />
                        <mx:Text text="{data}"
                                 click="{this.parentApplication.setSelectedTextStyleSelected(event); this.parentApplication.isReadOnly('ZNM00030') == false?this.parentApplication.modelSelector.setTypeExt():''}"
                            width="{data.@disabled == 'X'?418:430}"
                            maxHeight="100" />
                        <mx:Image id="modelInfoIconWhite" name="{data.@id}" source="img/resfleet/info_ico_sq_wh.png"
                                  width="12" height="12"
                                  buttonMode="true"
                                  useHandCursor="true"
                                  click="{this.parentApplication.isReadOnly('ZNM00030') == false?this.parentApplication.modelSelector.showModelInfo(event):''}"/>
                        <mx:Image id="modelInfoIconBlue" name="{data.@modnm}" source="img/resfleet/info_ico_sq_bl.png"
                                  width="12" height="12"
                                  buttonMode="true"
                                  useHandCursor="true"
                                  visible="{data.@action == 'X'?true:false}"
                                  includeInLayout="{data.@action == 'X'?true:false}"
                                  click="{this.parentApplication.readOnlyMode == false?this.parentApplication.modelSelector.showActionInfo(event):''}"/>
                    </mx:HBox>
                </mx:Component>
            </mx:itemRenderer>
        </mx:List> 
```

# c# - SHDocVw.Internetexplorer 在使用 ip 地址或 dns 名称的导航时表现不同

> ID：11120191
> 
> 赞同：2
> 
> 时间：2012-06-20T13:02:56.783
> 
> 标签：c#, .net, ip-address, mshtml, shdocvw

我目前正在编写 ac# 窗体应用程序，它启动 Internet Explorer 的实例，导航到某个 Intranet 页面，填写表格并提交该表格。

这是一些代码：

```
int state = 0;

SHDocVw.InternetExplorer ie = new SHDocVw.InternetExplorer();
ie.DocumentComplete += ie_DocumentComplete;
ie.Visible = false;

string url = "http://xch:8080/intro/open/index.jsp";
ASCIIEncoding Encode = new ASCIIEncoding();
byte[] post = Encode.GetBytes("check=Agd3458HD3jhf");
string postHeaders = "Content-Type: application/x-www-form-urlencoded";
state = 1;
ie.Navigate2(url, null, null, post, postHeaders);

private void ie_DocumentComplete(object pDisp, ref object URL)
{
    if (state == 1)
    {
        //call a function that fills out the form, submits it and sets "state" to 2
    }
    else if (state == 2)
    {
        ie.Visible = true;
    }
} 
```

基本上就是这样。但是 url 中的“xch”似乎出现了一些重大问题。当我使用 IP 地址时，一切都很好。使用“xch”，事情变得一团糟：

*   浏览器窗口已显示在“ie.Navigate2(...)”上
*   `DocumentComplete`永远无法到达事件处理程序
*   当我尝试访问其中的`HTMLDocument`或某些`Elements`内容时，会引发异常

我的客户坚持在地址栏中使用“xch”而不是 IP 地址，我的第一个想法是，这没关系，因为浏览器可以通过任何方式访问该页面。但显然我错了：/我还应该提到，当我使用“xch”时，问题并不总是发生。到目前为止，它只发生在具有 IE9 的 Windows 7 PC 和没有管理员权限的用户上。所以，我的问题是，如果其他人有类似的问题，我能做些什么来缩小问题的范围？

# php - 创建一个单独的页面来传递来自父帖子的自定义字段

> ID：11120195
> 
> 赞同：0
> 
> 时间：2012-06-20T13:03:01.930
> 
> 标签：php, wordpress, custom-fields

我有一个内容共享站点，我在其中共享 Windows 7 的主题和小工具。

我正在使用自定义字段上传文件并将其值存储在名为 durl 的自定义字段中。

现在我想创建一个名为“下载”的单独页面，当用户访问帖子页面并单击下载按钮时，他必须被转发到必须开始下载的新页面。

新页面“下载”必须从帖子中获取自定义字段值“$durl”。

是否可以？我已经在 codeigniter 中完成了，但不知道如何使用 wordpress 来实现。

请指导我。

问候， 里亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:13:37.157

这是另一种方法。

通过复制 page.php 创建一个下载模板并将其包含在您的新模板中：

```
<?php
/*
Template Name: Downloads
*/
?> 
```

用页眉、页脚等填充模板，如 page.php。在 WordPress 中创建一个新页面并将模板“下载”分配给它。

例如，在您的原始帖子（single.php）中，动态创建下载链接，如下所示：

```
<a href="/download/?fileID=<?php echo $post->ID; ?>">Download File</a> 
```

用户将被重定向到您刚刚创建的下载页面。您需要将此代码放在下载模板/页面中：

```
<?php

if (isset($_GET['fileID']) && is_numeric($_GET['fileID'])) { // to verify that fileID is passed
      // we now have the post ID in downloads page and can create download link
      $file = get_post_meta($_GET['fileID'], 'durl', true);
}
?>

<a href="<?php echo $file; ?>">Download now</a> 
```

它应该在下载页面中打印自定义字段值（这是与您的帖子相关的下载链接）

这段代码的想法是在 $_GET 中传递帖子 ID，并使用帖子 ID 通过其自定义字段获取下载链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:25:05.850

只需创建一个名为下载的新页面模板。复制并粘贴主题文件中 page.php 中的所有代码，然后上面写着：

```
<?php get_header();?> 
```

将此粘贴到代码部分中，以创建新的模板文件..

```
<?php
/*
  TEMPLATE NAME: Downloads
*/
?> 
```

转到管理区域内的页面，如果您尚未创建名为下载的页面，则将新模板分配给该页面，

在您的新模板页面代码中，

放置这部分代码，您是否希望出现下载链接

```
<?php 
 if(isset($_POST['durl'])){ 
    $durl = trim($_POST['durl']);
?>
<div id="download_box">
    <a href="<?php echo $durl;?>">click here to download</a>
</div>
<?php } ?> 
```

希望这会有所帮助。

马蒂

# ruby-on-rails-3 - 如何使用设计从数据库中获取密码

> ID：11120197
> 
> 赞同：0
> 
> 时间：2012-06-20T13:03:03.067
> 
> 标签：ruby-on-rails-3, encryption, devise, password-recovery

**我正在使用 rails 3.2.1 + 设计 2.0.4**

**我的问题是，仅在我的网站中：**管理员将创建新用户，无需直接注册用户。现在，当管理员创建 new_user 时，确认邮件将发送到用户电子邮件 ID。邮件内容是

```
user_name 
user_password 
```

但密码采用加密格式。

我将如何获得可读形式的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:12:02.023

设计进行散列，所以你不会从数据库中获取密码 - 期间。创建用户时应该有密码，那么为什么还要从数据库中获取它呢？

另外，在明文电子邮件中发送密码？啊。

# javascript - CSS/JS 调整大小/裁剪图库中的图像

> ID：11120198
> 
> 赞同：0
> 
> 时间：2012-06-20T13:03:03.617
> 
> 标签：javascript, jquery, html, css

还有一个问题。我正在使用 HTML KickStart，没有 PhP 和任何东西。纯 css/js。有画廊的图像。每个图像都有通常的代码，例如

```
<div class="gallery">
  <a href="image.jpg"><img src="image_small.jpg" width="160" height="160"></a>
</div> 
```

有效果和东西。问题是 - 如何动态裁剪/调整拇指大小以显示它们？想法是做这样的事情

```
<div class="gallery">
  <a href="image.jpg"><img class="thumb" src="image.jpg"></a>
</div> 
```

使用相同的图像，但我不必在 Photoshop 中裁剪/调整每个图像的大小，是的，有像“Dropresize”这样的选项，我可以在几分钟内将它们变小，但是，当你可以使用 1 张图像时它更有用（和自动获得调整大小的拇指）而不是 2 个不同的拇指。

图像可以是任何尺寸，最大 900 像素宽度（或高度，或两者），因此拇指必须是
1）在最短边（160x210 或 300x160，任何方向）上调整为 160 像素
2）必须裁剪最长边，或必须有特定边距值

有什么选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:15:28.800

您可以像这样创建许多**CSS**类：

```
.thumb {
    max-width: 900px; 
}

.thumb160px {
    width: 160px; 
    height: 210px;
}

.thumb300px {
    width: 300px; 
    height: 160px;
} 
```

或者，只设置一个值，例如宽度，如下所示：

```
.thumb160px {
    width: 160px; 
    height: auto;
}

.thumb300px {
    max-width: 300px; 
    height: auto;
} 
```

并将其应用于您的**HTML**元素，如下所示：

```
<div class="gallery">
    <a href="image.jpg"><img class="thumb300px" src="image.jpg"></a>
</div> 
```

# c - setsid() 什么时候有用，或者为什么我们需要在 Linux 中对进程进行分组？

> ID：11120202
> 
> 赞同：10
> 
> 时间：2012-06-20T13:03:17.173
> 
> 标签：c, linux, gcc, sid

我试过`man(3) setsid`了，但它只解释了如何使用它，我不明白 setsid 什么时候有用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T13:24:12.450

会话是一组共享一个控制终端的进程。当你想开始一个新会话时，setsid 很有用，因为你已经开始连接到一个新的终端——例如在终端模拟器中启动一个 shell ——或者你想要一个守护进程（你不想与控制终端相关联）。

我对这些方面的了解最好的解释是 RW Stevens *Advanced Programming in the Unix environment*。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T15:10:39.230

`Why do we need to group processes?` 考虑一下您希望彻底关闭的情况，其中包括向您的孩子发送信号。有一个固有的竞争条件：没有收到 SIGCHLD，所以你知道孩子还活着。所以你发出一个信号。但是子进程在信号发送之前终止，另一个（不相关的）进程启动并获得与信号发送到的子进程相同的 pid。然后信号进入新的、不相关的进程。这是不好的。因此，不是向特定的 pid 发送信号，而是向进程组发送信号。当子进程死亡并且新进程以原始 pid 开始时，新进程*不是*进程组的一部分，并且避免了上述问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-30T00:28:57.450

要知道它何时有用，您必须将它与其他类似的守护进程的命令进行比较：

1.  screen：将一个进程放入后台，但终端仍然存在。所以如果你“fg”再次把进程带到前台，它的所有标准输出都会出现。

2.  nohup：将进程置于后台，但将所有屏幕显示输出到文件。因此，您只需要“cat”文件即可查看输出。

3.  setsid：把一个进程放到后台，但是因为它的终端被放弃了，所以没办法取回输出。仅当屏幕显示对您不重要时才使用此选项。

有关 pid 和行为的其他并发症，请参见：

[http://go2linux.garron.me/linux/2010/12/setsid-how-execute-commands-after-you-exit-shell-prompt-866/](http://go2linux.garron.me/linux/2010/12/setsid-how-execute-commands-after-you-exit-shell-prompt-866/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T13:24:24.357

这对于成为[守护进程](http://en.wikipedia.org/wiki/Daemon_%28computing%29)很有用，即断开进程与控制终端的连接。另请参阅[`daemon(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/daemon.3.html)。

# embedded - 从智能卡中删除文件

> ID：11120203
> 
> 赞同：-1
> 
> 时间：2012-06-20T13:03:19.170
> 
> 标签：embedded, smartcard, scosta

是否可以在适用于智能卡的 Scosta Complient OS 中删除处于创建状态的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:12:32.290

我想说，COSTA 规范中没有特别提到生命周期阶段，尤其是在删除文件部分。在这种情况下，我会假设 ISO 7816-9 保持不变，它只需要在 OPERATIONAL ACTIVE 和 OPERATION DEACTIVATED 中评估访问规则。状态图没有从创建状态到不存在的箭头，因此情况可能与操作系统相关。但是，如果支持，则有可能始终删除 CREATION 阶段的文件，至少如果满足包含 DF 的 Delete Child 和相关文件的 Delete Self 的规则（通常由 Costa 规定），它可能会奏效。

# dictionary - 为什么 F# map 使用可变操作实现接口？

> ID：11120205
> 
> 赞同：8
> 
> 时间：2012-06-20T13:03:21.123
> 
> 标签：dictionary, map, f#, immutability

当我意识到 F#`map`实现了 IDictionary<'Key, 'Value> 并`ICollection<KeyValuePair<'a, 'b>>`考虑到两者都支持突变（添加和删除）作为合同的一部分时，我有些惊讶。

[`map`](http://fsharppowerpack.codeplex.com/SourceControl/changeset/view/68767#1133548)只看它的实现，当你试图引起突变时除外！

```
let map = [| (1, "one"); (2, "two") |] |> Map.ofArray
let dict = map :> IDictionary<int, string>
dict.Add(3, "three");; 
```

上面的代码抛出异常：

> System.NotSupportedException：地图值不能被改变。在 Microsoft.FSharp.Collections.FSharpMap `2.System-Collections-Generic-IDictionary`2-Add(TKey k, TValue v) at .$FSI_0007.main@() 由于错误而停止

这是预期的。

对于一个不可变集合来说，能够将自己暴露为一个可变集合，只是为了在该集合的消费者试图引起突变时抛出异常，这似乎是一个危险的决定。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T13:59:37.317

我认为主要原因是.NET 没有任何表示不可变（a 接口的一部分）字典的接口。这意味着所有 .NET API 都必须`IDictionary<K, V>`作为参数，即使它们只打算从字典中读取。所以：

*   实现`IDictionary<'K, 'V>`几乎是使 F# 不可变映射可用作任何需要支持查找的对象的 .NET 库的参数的唯一方法。遗憾的是，.NET 中没有只读选项。

*   实现`ICollection<KeyValuePair<'K, 'V>>`对我来说没有太大意义，因为有一个只读的替代方案`IEnumerable<KeyValuePair<'K, 'V>>`，不可变的映射也实现了这个接口。

    但也许有一些 .NET 库采用`ICollection<'T>`（为了提高效率 - 即在`Count`不枚举所有元素的情况下获取）并以只读方式使用它。

    **编辑：**正如丹尼尔在评论中指出的那样，实现`ICollection`是必需的，因为`IDictionary`接口继承自它。

我认为缺少只读接口是很不幸的，但可能无法解决这个问题，因为这意味着更改现有的 .NET 集合库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T15:39:17.593

`IsReadOnly`允许接口是只读的，即使它提供了可写的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T13:18:08.527

这是一个 .Net 的东西。您不能只实现某些接口，但他们想要实现该`IDictionary`2`接口 - 因为您可以使用它的查询和转换方法（因此您可以将它传递给从 读取的函数`IDictionary`2`）。

# erlang - Erlang - 从主管模块启动一个孩子

> ID：11120207
> 
> 赞同：4
> 
> 时间：2012-06-20T13:03:24.080
> 
> 标签：erlang, erlang-otp

我正在尝试创建一个处理添加动态 gen_servers 的主管。出于某种原因，某些事情失败了，我不确定是什么。

```
-module(supervisor_mod).
-behaviour(supervisor).

-export([start_link/0, add_child/1]).
-export([init/1]).

start_link() ->
    Pid=supervisor:start_link({local, ?MODULE} , ?MODULE, []),
    {ok,Pid}.

init(_Args) ->
    {ok, {{simple_one_for_one, 10, 60},
          [{example_proc, {example_proc, start_link, []},
            permanent, brutal_kill, worker, [example_proc]}]}}.

add_child(Name)->                                                                        
    supervisor:start_child(supervisor_mod,
                           {example_proc, {example_proc, start_link, []},
                            permanent, brutal_kill, worker, [example_proc]}). 
```

和

```
-module(example_proc).
-behaviour(gen_server).

-export([start_link/0]).
-export([init/1, handle_call/3, handle_cast/2]).

start_link() ->
    gen_server:start_link(?MODULE, [], []).

init(Args) ->
    io:format("~p (~p) started...~n", [Args, self()]),
    {ok, []}.

handle_call(alloc, From, State) ->
    {reply, From, State}.

handle_cast({free, _Ch}, State) ->
    {noreply, State}. 
```

在 erl 外壳中：

```
Eshell V5.8.2  (abort with ^G)
1> supervisor_mod:start_link().
{ok,{ok,<0.33.0>}}
2> supervisor_mod:add_child(aa).
{error,{'EXIT',{badarg,[{erlang,apply,
                                [example_proc,start_link,
                                 {example_proc,{example_proc,start_link,[]},
                                               permanent,brutal_kill,worker,
                                               [example_proc]}]},
                        {supervisor,do_start_child_i,3},
                        {supervisor,handle_call,3},
                        {gen_server,handle_msg,5},
                        {proc_lib,init_p_do_apply,3}]}}} 
```

任何帮助/解释/解决方案表示赞赏，/s。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:34:19.343

当您使用`simple_one_for_one`所有子代时，将使用相同的 ChildSpec，`init/1`回调中给定的一个并且此初始化只能返回**一个**ChildSpec。同样在这种情况下，第二个参数`supervisor:start_child/2`必须是列表而**不是**ChildSpec。该列表是附加到默认 ChildSpec 中给定的参数列表的额外参数列表，并且在调用孩子的 start 函数时使用此组合参数列表。这就是`simple_one_for_one`孩子们都可以使用相同的 ChildSpec 并且仍然可以获得特定参数的方式。

在您的情况下，由于 ChildSpec 中有一个空列表，并且您`start_child/2`使用空列表调用了 start 函数的参数总数`0`。这与您的`start_link/0`功能定义方式相匹配。

在您的情况下，另一种方法是使用`one_for_one`每个孩子并使用其自己的 ChildSpec 启动每个孩子。更复杂但也更通用。

不幸的是，这种双重使用`supervisor:start_child/2`使它的论点不一致。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T13:24:17.410

阅读[OTP 文档：](http://www.erlang.org/doc/man/supervisor.html#start_child-2)在简单的一对一策略的情况下，在 start_child 函数中，您可以将参数作为子项的子 start_link 函数的列表传递。

# android - Android：EditText 提示的全文在一行中

> ID：11120210
> 
> 赞同：1
> 
> 时间：2012-06-20T13:03:27.297
> 
> 标签：android, android-layout, android-edittext

我需要我的 EditText 提示以适合单行，同时显示其整个文本内容。有什么方法可以做到这一点？[这](https://stackoverflow.com/questions/4871152/android-edittext-hint-in-single-line)不是很有用，因为它只是切断了文本的结尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:30:22.213

> 有什么方法可以做到这一点？

AFAIK，提示以与用户键入的任何文本大小相同的文本大小显示。所以，选择一个较小的文本大小，可能基于屏幕大小和密度，应该足够小以显示所有内容。

或者，写一个较短的提示。

或者，不要使用提示，而是使用`TextView`标签来记录`EditText`.

# mysql - 子查询中的 mysql group_concat 返回多于一行

> ID：11120212
> 
> 赞同：4
> 
> 时间：2012-06-20T13:03:40.573
> 
> 标签：mysql, subquery, group-concat

我有下面的查询，应该可以。但是，MySQL 给了我错误消息“子查询返回多行”。

```
select e.episode_pk,
(select group_concat(d.fulldescription separator ', ')
    from episode_rhythm er join diagnosis d on er.diagnosis_fk = d.diagnosis_pk 
    WHERE er.episode_fk = e.episode_pk group by d.fulldescription) as rhythmDesc 
from episode e  
WHERE e.patientid_fk='89976' 
```

在此查询中使用 group_concat 的全部目的是每个“剧集”仅返回一行。

外部选择返回多行。

内部选择在针对单个剧集表主键运行时，会返回您可能怀疑的单行：

```
select group_concat(d.fulldescription separator ', ')
        from episode_rhythm er join diagnosis d on er.diagnosis_fk = d.diagnosis_pk 
        WHERE er.episode_fk = 234776 group by d.fulldescription 
```

没有 group_concat 的内部选择，当针对单个剧集表主键运行时，可能会返回多行：

```
select d.fulldescription
        from episode_rhythm er join diagnosis d on er.diagnosis_fk = d.diagnosis_pk 
        WHERE er.episode_fk = 234776 
```

我需要做些什么才能使其按预期工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:32:14.760

您在 SELECT 中的子查询有点可疑。

我猜你要找的是：

```
SELECT
    e.episode_pk,
    GROUP_CONCAT(d.fulldescription separator ', ')
FROM episode_rhythm er
JOIN diagnosis d ON er.diagnosis_fk = d.diagnosis_pk
JOIN episode e ON er.episode_fk = e.episode_pk
WHERE e.patientid_fk='89976' 
GROUP BY e.episode_pk 
```

# 2d - 使用旋转对象绘制等距游戏世界

> ID：11120218
> 
> 赞同：2
> 
> 时间：2012-06-20T13:03:54.643
> 
> 标签：2d, isometric

在不旋转对象的情况下绘制等轴测世界非常简单，在此讨论：

[绘制等距游戏世界](https://stackoverflow.com/questions/892811/drawing-isometric-game-worlds)

简单的方法，就是取每个物体的地面碰撞矩形，并按它的中心排序（屏幕上的垂直坐标）

但在某些情况下，例如屏幕上有对角线物体 - 游戏中的机车或栅栏，它可以旋转！ [物体 AB 和 C 的物体地面碰撞形状](https://i.stack.imgur.com/woqRm.png)

没有对象 C，这很简单，首先我们绘制对象 B（因为它更高），然后绘制 A。

考虑到 C，我们需要首先绘制对象 A，然后是对象 B，最后是 C（在这种情况下，顺序完全相反）。

但是如何定义正确的排序运算符（或其他排序方式），以正确绘制图像/对象？

# java - 为什么我们在 java 中使用 web 服务而不是 jsp-servlet 技术？

> ID：11120223
> 
> 赞同：-1
> 
> 时间：2012-06-20T13:04:12.247
> 
> 标签：java, jakarta-ee

为什么我们在 java 中使用 web 服务而不是 jsp-servlet 技术，因为两者的目的相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:08:38.230

**JSP 为Human**生成 HTML 视图。

**Web 服务返回用于Machine**的那种视图的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:06:17.483

两者的目的不同。您可以使用 Web 服务 API 来提供 JSP 的内容。因此，JSP 与您的 Web 服务交互。这只是实现它的一种方式。

# android - 调用 Asynctask 创建延迟

> ID：11120224
> 
> 赞同：0
> 
> 时间：2012-06-20T13:04:23.053
> 
> 标签：android, android-asynctask

在我的应用程序中，单击登录页面中的登录后，我必须调用 3 个 API。我有 3 个 AsyncTask 来完成这个要求。我正在做的是在第一个任务 onPostExcecute() 中调用第二个任务，第三个任务在第二个任务的 onPostExecute() 中调用。

任务A 看起来像：

```
private class TaskA extends AsyncTask<Void, Void, ListA> {

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected ListA doInBackground(Void... params) {
        ListA listA;//its an arraylist          

        listA = //calling my API

        if(listA != null) {
            //writing listA as serialized into sdcard.
        }

        return listA;
    }

    @Override
    protected void onPostExecute(ListA listA) {
        for(ListAValues value : listA) {
            new TaskB().execute(value);             
        }
    }
} 
```

任务B：

```
private class TaskB extends AsyncTask<ListA, Void, ListB> {

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected ListB doInBackground(ListA... params) {
        ListB listB;//its an arraylist          

        listB = //calling my API

        if(listB != null) {
            //writing listB as serialized into sdcard.
        }

        return listB;
    }

    @Override
    protected void onPostExecute(ListB listB) {
        new TaskC().execute(listB);
    }
} 
```

任务C：

```
private class TaskC extends AsyncTask<ListB, Void, ListC> {

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected ListC doInBackground(ListB... params) {
        ListC listC;//its an arraylist          

        listC = //calling my API

        if(listC != null) {
            //writing listC as serialized into sdcard.
        }

        return listC;
    }

    @Override
    protected void onPostExecute(ListC listC) {
        //moving to my landing page.
    }
} 
```

问题出在登录页面中，屏幕以黑白颜色闪烁。（白色是我的登录页面活动的背景颜色）。我实施的方式是否正确？还是我需要更改代码？请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:30:55.227

您不需要使用 3 个单独`AsyncTask`的 s。`AsyncTask`您可以按如下方式使用单个：

```
private class TaskA extends AsyncTask<Void, Void, Void> {

    @Override
    protected void doInBackground(Void... params) {
        ListA listA;//its an arraylist          

        listA = //calling my API

        if(listA != null) {
            //writing listA as serialized into sdcard.
        }

        for(ListAValues value : listA) {
            ListB listB;//its an arraylist          

            listB = //calling my API

            if(listB != null) {
                //writing listB as serialized into sdcard.
            }
            ListC listC;//its an arraylist          

            listC = //calling my API

            if(listC != null) {
                //writing listC as serialized into sdcard.
            }

        }
        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:35:04.130

Rajesh，你的代码帮不了我。

我的应用程序是 API 级别 11。所以我使用了

```
Task.executeOnExecutor(AsyncTask.SERIAL_EXECUTOR) 
```

这帮助了我，我的代码运行良好。

# blackberry - 在黑莓中启用禁用单选按钮字段

> ID：11120225
> 
> 赞同：1
> 
> 时间：2012-06-20T13:04:25.117
> 
> 标签：blackberry, radio-button

我正在开发一个需要使用单选按钮字段的数据应用程序。

单选按钮字段的功能取决于 Web 服务的响应。

我需要控制单选按钮的选择。也就是说，如果我想禁用两个单选按钮之一，如果响应是否定的并且用户不能使用该按钮。

是否可以使任何单选组的单选按钮处于非活动状态。

我已经使用过诸如 field.setEnable(false); 之类的方法。

![在此处输入图像描述](../Images/ff916ca82174aaa4fb4df44b0d04416b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:44:19.827

您可以`Field.NON_FOCUSABLE`在 的构造函数中传递样式，以在`RadioButtonField`创建字段时使字段不可聚焦。如果使用此方法，则无法在运行时更改此属性。

要在运行时更改字段的可聚焦/不可聚焦属性，请覆盖`RadioButtonField`'`isFocusable()`方法，并根据您的 Web 服务的响应返回`true`或返回。`false`

```
public boolean isFocusable()
{
    return shouldTheRadioButtonBeEnabled;
} 
```

`false`从返回`isFocusable()`将使您的领域无法聚焦。

# button - 将不同的视图加载到视口中

> ID：11120226
> 
> 赞同：1
> 
> 时间：2012-06-20T13:04:33.553
> 
> 标签：button, extjs, view, viewport

我正在使用主视口。我使用北面板作为按钮。当我单击一个按钮时，我想在中心区域加载一个面板。我已经在建筑师中提出了一些看法。

主视口

```
Ext.define('MyApp.view.MyViewport', {
extend: 'Ext.container.Viewport',

layout: {
    type: 'border'
},

initComponent: function() {
    var me = this;

    Ext.applyIf(me, {
        items: [
            {
                xtype: 'container',
                height: 65,
                region: 'north',
                items: [
                    {
                        xtype: 'button',
                        height: 50,
                        maxHeight: 50,
                        maxWidth: 50,
                        minHeight: 50,
                        minWidth: 50,
                        style: 'margin: 5px;',
                        width: 50,
                        text: 'Home'
                    },
                    {
                        xtype: 'button',
                        height: 50,
                        maxHeight: 50,
                        maxWidth: 50,
                        minHeight: 50,
                        minWidth: 50,
                        style: 'margin: 5px;',
                        width: 50,
                        text: 'Verkoop'
                    },
                    {
                        xtype: 'button',
                        height: 50,
                        maxHeight: 50,
                        maxWidth: 50,
                        minHeight: 50,
                        minWidth: 50,
                        style: 'margin: 5px;',
                        width: 50,
                        text: 'Verhuur'
                    },
                    {
                        xtype: 'button',
                        height: 50,
                        maxHeight: 50,
                        maxWidth: 50,
                        minHeight: 50,
                        minWidth: 50,
                        style: 'margin: 5px;',
                        width: 50,
                        text: 'Magazijn'
                    },
                    {
                        xtype: 'button',
                        height: 50,
                        maxHeight: 50,
                        maxWidth: 50,
                        minHeight: 50,
                        minWidth: 50,
                        style: 'margin: 5px;',
                        width: 50,
                        text: 'TD'
                    },
                    {
                        xtype: 'button',
                        height: 50,
                        maxHeight: 50,
                        maxWidth: 50,
                        minHeight: 50,
                        minWidth: 50,
                        style: 'margin: 5px;',
                        width: 50,
                        text: 'Planning'
                    },
                    {
                        xtype: 'button',
                        height: 50,
                        maxHeight: 50,
                        maxWidth: 50,
                        minHeight: 50,
                        minWidth: 50,
                        style: 'margin: 5px;',
                        width: 50,
                        text: 'Facturen'
                    },
                    {
                        xtype: 'button',
                        height: 50,
                        maxHeight: 50,
                        maxWidth: 50,
                        minHeight: 50,
                        minWidth: 50,
                        style: 'margin: 5px;',
                        width: 50,
                        text: 'Klachten'
                    },
                    {
                        xtype: 'button',
                        height: 50,
                        maxHeight: 50,
                        maxWidth: 50,
                        minHeight: 50,
                        minWidth: 50,
                        style: 'margin: 5px;',
                        width: 50,
                        text: 'OPM'
                    }
                ]
            }
        ]
    });

    me.callParent(arguments);
} 
```

例如，当我单击“magazijn”按钮时，我想将此视图加载到中心区域：

```
Ext.define('MyApp.view.Magazijn', {
extend: 'Ext.panel.Panel',

layout: {
    type: 'border'
},
title: 'Magazijn',

initComponent: function() {
    var me = this;

    Ext.applyIf(me, {
        items: [
            {
                xtype: 'panel',
                layout: {
                    type: 'border'
                },
                title: 'Pakbonnen',
                region: 'center',
                dockedItems: [
                    {
                        xtype: 'toolbar',
                        region: 'center',
                        dock: 'top',
                        items: [
                            {
                                xtype: 'button',
                                text: 'Beschadiging melden'
                            },
                            {
                                xtype: 'button',
                                text: 'Vermissing melden'
                            }
                        ]
                    },
                    {
                        xtype: 'gridpanel',
                        height: 150,
                        title: 'Uitgaande pakbonnen',
                        store: 'MyJsonStore',
                        region: 'north',
                        dock: 'top',
                        columns: [
                            {
                                xtype: 'gridcolumn',
                                dataIndex: 'string',
                                text: 'String'
                            },
                            {
                                xtype: 'numbercolumn',
                                dataIndex: 'number',
                                text: 'Number'
                            },
                            {
                                xtype: 'datecolumn',
                                dataIndex: 'date',
                                text: 'Date'
                            },
                            {
                                xtype: 'booleancolumn',
                                dataIndex: 'bool',
                                text: 'Boolean'
                            }
                        ],
                        viewConfig: {

                        },
                        dockedItems: [
                            {
                                xtype: 'pagingtoolbar',
                                width: 360,
                                displayInfo: true,
                                store: 'MyJsonStore',
                                dock: 'bottom'
                            }
                        ]
                    }
                ],
                items: [
                    {
                        xtype: 'gridpanel',
                        title: 'Retour pakbonnen',
                        store: 'MyJsonStore',
                        region: 'center',
                        columns: [
                            {
                                xtype: 'gridcolumn',
                                dataIndex: 'string',
                                text: 'String'
                            },
                            {
                                xtype: 'numbercolumn',
                                dataIndex: 'number',
                                text: 'Number'
                            },
                            {
                                xtype: 'datecolumn',
                                dataIndex: 'date',
                                text: 'Date'
                            },
                            {
                                xtype: 'booleancolumn',
                                dataIndex: 'bool',
                                text: 'Boolean'
                            }
                        ],
                        viewConfig: {

                        },
                        dockedItems: [
                            {
                                xtype: 'pagingtoolbar',
                                width: 360,
                                displayInfo: true,
                                store: 'MyJsonStore',
                                dock: 'bottom'
                            }
                        ]
                    }
                ]
            }
        ],
        dockedItems: [
            {
                xtype: 'toolbar',
                width: 150,
                region: 'west',
                dock: 'top',
                items: [
                    {
                        xtype: 'button',
                        text: 'Product zoeken'
                    }
                ]
            }
        ]
    });

    me.callParent(arguments);
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:19:01.883

1.  使中心区域成为具有卡片（或适合或选项卡）布局的容器

2.  在中心区域调用 add 方法，添加您的组件

要获得对视口的引用：

```
var viewport = Ext.ComponentQuery.query('viewport')[0]; 
```

要获得对中心区域的引用：

```
var center = viewport.down('[region=center]');

var view = Ext.create('MyView');

center.add(view); 
```

# perl - gettimeofday 时差偶尔为负

> ID：11120231
> 
> 赞同：1
> 
> 时间：2012-06-20T13:04:50.407
> 
> 标签：perl, opengl, glut, gettimeofday, time-hires

我正在用 perl 编写一个面向对象的 OpenGL 框架，当我测量每帧之间的 DeltaTime 时遇到了一个奇怪的问题。增量时间似乎每隔一段时间就会变为负数（每 ~.5 秒）。我不确定这是 gettimeofday 的问题，还是 GLUT 如何调用我的回调的问题，但这很烦人，因为它使我的精灵的运动每半秒略微跳跃一次。

这是我的过剩主循环功能：

```
# This is called everytime in the main glut loop
sub Tick
{
    my $this = shift;
    my ($now, $dt);

    $now = gettimeofday;
    $dt = $now - $this->{_oldTime};

    if ($dt < 0)
    {
        my $dterr;

        $dterr = $now - $this->{_oldErrorTime};

        print "WTF! We just encountered a time paradox! " . 
            "This function was last called $dt seconds ago...\n" .
            "Current time: $now, Last call: $this->{_oldTime}\n" .
            "We already encountered this error $dterr seconds ago.\n\n";

        $this->{_oldErrorTime} = $now;
    }

    $this->{_oldTime} = $now;
    $this->{FPS} = 1.0 / $dt;

    $this->Update($dt);
    $this->DrawFrame($dt);
} 
```

这是输出：

> 哇！我们刚刚遇到了时间悖论！此函数上次调用 -0.017144 9184417725 秒前...当前时间：1340196716.27624，上次调用：1340196716.29339 我们已经在 0.482785940170288 秒前遇到此错误。
> 
> 哇！我们刚刚遇到了时间悖论！此函数上次调用 -0.013265 84815979 秒前...当前时间：1340196716.74632，上次调用：1340196716.75959 我们已经在 0.470081090927124 秒前遇到此错误。
> 
> 哇！我们刚刚遇到了时间悖论！此函数上次调用 -0.011317 9683685303 秒前...当前时间：1340196717.21836，上次调用：1340196717.22968 我们已经在 0.472035884857178 秒前遇到此错误。
> 
> 哇！我们刚刚遇到了时间悖论！此函数上次调用 -0.015201 0917663574 秒前...当前时间：1340196717.68649，上次调用：1340196717.70169 我们已经在 0.468127012252808 秒前遇到此错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:27:56.677

您需要[CLOCK_MONOTONIC](http://enwp.org/Time_Stamp_Counter)，请参阅[Time::HiRes](http://p3rl.org/Time%3a%3aHiRes#clock_gettime-which-)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:39:12.150

感谢你们的回答，我想出了这个跨平台的单调秒表功能：

```
use constant WIN32 =>   $^O eq "MSWin32";

our $QueryPerformanceCounter = undef;
our $QueryPerformanceFrequency = undef;
our $qpf = undef;

sub GetTime
{
    # Windows
    if (WIN32)
    {
        my ($count, @unpacked_count);

        require Win32::API;
        Win32::API->import();

        if (!$QueryPerformanceCounter || !$QueryPerformanceFrequency || !$qpf)
        {
            my ($freq, @unpacked_freq);

            $QueryPerformanceCounter = new Win32::API(
                "Kernel32", "QueryPerformanceCounter", [qw(P)], 'I')
            or Carp::croak("GLPerl::Utils::GetTime(): Failed to get QueryPerformanceCounter: " .
                Win32::FormatMessage(Win32::GetLastError()));

            $QueryPerformanceFrequency = new Win32::API(
                "Kernel32", "QueryPerformanceFrequency", [qw(P)], 'I')
            or Carp::croak("GLPerl::Utils::GetTime(): Failed to get QueryPerformanceFrequency: " .
                Win32::FormatMessage(Win32::GetLastError()));

            $freq = pack 'I2', 0;

            Carp::croak("GLPerl::Utils::GetTime(): QueryPerformanceFrequency call failed: " .
                Win32::FormatMessage(Win32::GetLastError()))
                unless ($QueryPerformanceFrequency->Call($freq));

            @unpacked_freq = reverse unpack 'I2', $freq;
            $qpf = $unpacked_freq[0] * 2**32 + $unpacked_freq[1];
        }

        $count = pack 'I2', 0;

        Carp::croak("GLPerl::Utils::GetTime(): QueryPerformanceCounter call failed: " .
            Win32::FormatMessage(Win32::GetLastError()))
            unless ($QueryPerformanceCounter->Call($count));

        @unpacked_count = reverse unpack 'I2', $count;
        return ($unpacked_count[0] * 2**32 + $unpacked_count[1]) / $qpf;
    }

    # Linux
    require Time::HiRes;
    Time::HiRes->import(qw(clock_gettime));
    eval "return clock_gettime(CLOCK_MONOTONIC);";
} 
```

# cocoa - 启用多选时，NSCollectionView 在拖动前的恼人延迟

> ID：11120236
> 
> 赞同：2
> 
> 时间：2012-06-20T13:05:03.193
> 
> 标签：cocoa, drag-and-drop, nscollectionview

我有一个基本的 Cocoa 应用程序，其中`NSCollectionView`显示了许多文件。集合视图允许一次选择多个项目。

问题是为了选择两个或多个项目将它们拖出集合视图，我必须单击并按住大约一秒钟才能开始拖动。

如果我立即单击并拖动，则集合视图会更改选择（即绘制“选择”矩形）。

我花了一段时间才弄清楚**在拖动之前我必须单击并按住**。我已经可以看到，我的应用程序的许多用户不会弄清楚这一点，并且会抱怨拖动不起作用。

示例：即使在 Apple 的示例代码中也存在问题：[https ://developer.apple.com/library/mac/#samplecode/IconCollection/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004477](https://developer.apple.com/library/mac/#samplecode/IconCollection/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004477)

有趣的是，Finder 的“图标视图”按预期工作（拖动工作没有延迟）。不确定它是否在`NSCollectionView`下面使用，但似乎很有可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T11:29:19.483

没有办法解决这个问题。所有鼠标事件都在 NSCollectionView 中被覆盖。您唯一可以控制的是集合中包含的 NSView 的 mouseDown 事件，这对拖动延迟没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:06:40.817

我猜你需要重写[拖放方法。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/DragandDrop.html#//apple_ref/doc/uid/10000069i)在苹果的网站，[拖放](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/DragandDrop.html#//apple_ref/doc/uid/10000069i)部分，有相当多的信息，至少对于开始。

# xsd - 使用 xjc.exe 到 Java 类的 XML 模式版本 1.1

> ID：11120239
> 
> 赞同：1
> 
> 时间：2012-06-20T13:05:10.513
> 
> 标签：xsd, xjc

我在使用 XML 1.1 版的 xjc 命令将 xsd 文件转换为 java 类时遇到问题。我相信 xjc.exe 和 XML 1.1 对彼此不是很友好是一个已知问题。如果没有使用 xjc 和 XML-schema 1.1 的可行解决方案，那么是否有任何类似的解决方案可以转换 XML-schema 1.1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-05T07:41:00.157

据我所知，JAXB 不支持 Schema 1.1，请参阅这个未解决的问题：[https ://java.net/jira/browse/JAXB-994](https://java.net/jira/browse/JAXB-994)

（抱歉唤醒了一个老问题）

# php - 有没有办法在事件发生时从服务器向客户端发送消息？

> ID：11120242
> 
> 赞同：0
> 
> 时间：2012-06-20T13:05:25.970
> 
> 标签：php, javascript

> **可能重复：**
> [实现服务器推送](https://stackoverflow.com/questions/1425048/implementing-server-push)

当服务器端发生某些事件时，我想从 php 到 javascript 向客户端发送一条消息，例如修改用户表或类似的事情。当事件发生时，服务器将其发送给客户端。我该如何实现呢？

如果可能不使用 html5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:20:18.333

你应该有更深入的研究

*   服务器推送
*   阿贾克斯长轮询/彗星

主要的“问题”是您的服务器需要“了解”用户浏览器，afaik 的方法是保持服务器和客户端之间的长时间连接打开。检查这个：http: [//jabberwocky.eu/2011/02/02/html5-pubsub-and-browser-push/](http://jabberwocky.eu/2011/02/02/html5-pubsub-and-browser-push/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:39:45.763

我知道你提到你想避开 HTML5，但我建议最好的解决方案可能是在可用时利用 HTML5 技术，否则回退到长轮询或频繁轮询解决方案。查看[HTML5 WebSockets API](https://developer.mozilla.org/en/WebSockets)，它至少部分是为了这个目的而创建的。如果您对 Node.js 作为后端感到满意，[那么 Socket.IO](http://socket.io/)是一个很棒的框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:07:55.467

我能想到的唯一方法是尽可能长时间地打开对服务器的 AJAX 请求，然后在服务器上发生某些事情时写入连接。

如果 AJAX 请求超时，您将不得不重新启动它。

在浏览器场景中，服务器确实没有办法连接到客户端。

# ruby - 给定一个包含 n 个子数组 Sn 的数组 A，如何在 Ruby 中选择 Sn[i] 成员数组？

> ID：11120244
> 
> 赞同：0
> 
> 时间：2012-06-20T13:05:31.887
> 
> 标签：ruby, arrays, multidimensional-array

给定一个包含 n 个子数组 Sn 的数组 A，如何在 Ruby 中选择 Sn[i] 成员数组？

例如，给定一个`languages`如下的数组：

```
languages = [ ['Italiano', 'it'], ["English", 'en'], ["Française", 'fr' ] ] 
```

我怎样才能获得数组...

```
locales_in_languages = ['it', 'en', 'fr' ] 
```

...其中包含所有`language[1]`对象？

有没有一种简单*的“rubysh”*方法来实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T13:07:24.877

一般来说，它将是：

```
array.map { |subarray| subarray[i] } 
```

如果您需要每个数组的第一个（或最后一个）元素，您可以执行以下操作：

```
array.map(&:first) # similar array.map(&:last) 
```

有关方法，请参阅[文档](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)`Enumerable#map`。

顺便说一句，在 Rails 中，您还可以使用`&:second`, `&:third`, `&:fourth`, `&:fifth`, 甚至[`&:forty_two`](http://apidock.com/rails/Array/forty_two).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T13:18:37.060

替代：

```
#encoding: utf-8
LANGUAGES = [ ['Italiano', 'it'], ["English", 'en'], ["Française", 'fr' ] ]
p LANGUAGES.transpose.last #=>["it", "en", "fr"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T13:19:23.233

你可以用[Array#transpose](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-transpose)方法做到这一点：

```
irb(main):014:0> languages = [ ['Italiano', 'it'], ["English", 'en'], ["Française", 'fr' ] ]
=> [["Italiano", "it"], ["English", "en"], ["Française", "fr"]]
irb(main):015:0> languages.transpose[1]
=> ["it", "en", "fr"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T13:07:27.873

没错，就是叫[`map`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)

```
languages = [ ['Italiano', 'it'], ["English", 'en'], ["Française", 'fr' ]]
languages.map{|name, code| code } # => ["it", "en", "fr"] 
```

顺便说一句，调用你的数组`LANGUAGES`（全部大写）违反了 ruby​​ 命名约定（除非它是一个常量。只有常量以大写字母开头）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T13:07:56.393

Array.collect 可以。

在尝试以红宝石方式做事时，没有必要让事情变得过于复杂。-

# rubymotion - RubyMotion 中的文件加载/编译顺序是怎么回事？

> ID：11120250
> 
> 赞同：1
> 
> 时间：2012-06-20T13:05:47.933
> 
> 标签：rubymotion

我正在将现有的 iOS 应用程序从 Objective-C 转换为 RubyMotion。

我遇到的第一个主要缺陷是 AppDelegate 类引用了应用程序中定义的其他类。

由于这些是在 AppDelegate 类之后编译的，因此会引发异常：

```
2012-06-20 13:38:03.088 myApp[3349:f803] *** Terminating app due to uncaught exception 'NameError', reason: 'uninitialized constant AppDelegate::User (NameError) 
```

我可以通过在我的 Rakefile 中明确说明 User 类应该在 AppDelegate 类之前编译来解决这个问题，但是当您处理一个包含 30 多个类的应用程序时，这几乎不是最佳解决方案，其中许多类相互引用。

有没有更好的方法在 RubyMotion 中解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T14:29:01.873

我同意`app.files_dependencies`一旦你有很多类，使用这种方法可能会很麻烦。

在我的应用程序中，我更改了`app.files`参数，将其重新排序以将我最重要的东西放在首位（在我的情况下，是`lib/`我添加的文件夹）：

```
app.files = (app.files.select { |f| f =~ /app\/lib/ } + app.files).uniq 
```

# objective-c - if 语句的问题

> ID：11120255
> 
> 赞同：0
> 
> 时间：2012-06-20T13:06:01.650
> 
> 标签：objective-c

我对`if`声明有疑问

我有一个名为的对象`enemy2`，我不希望该对象运行，所以我已经使用`setHidden = YES`并且我打算使用代码

```
if(enemy2 setHidden: YES)
{

}
if(enemy2 setHidden: NO)
{

} 
```

但它在 setHidden 之后说它的例外 ')'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:15:11.240

即使您更正了语法，这些语句也可能不会执行。我想你想要

```
if ([enemy2 hidden])
{
}
else
{
} 
```

使用 getter，而不是 setter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:07:23.173

它应该是`if([enemy2 setHidden: YES]) { }` ie 包括方括号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:08:22.673

```
if([enemy2 setHidden: YES])
{

}
if([enemy2 setHidden: NO])
{

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T13:12:14.127

在objective-C中你必须调用这样的方法`[anObject method]`

所以，`([enemy2 setHidden: YES])`而不是`(enemy2 setHidden: NO)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T13:24:00.470

正如**jrturton**建议的那样（另请参阅我的评论），您需要针对 bool 值进行测试。

如果我测试代码（使用 LLVM 编译器）

```
if([enemy setHidden:YES]){

} 
```

我收到一个编译时错误，因为`[self setHidden:YES]`返回一个`void`.

> 语句需要标量类型的表达式（'void' 无效）

正确的方法可能如下，但这取决于您要实现的目标。

```
if([enemy hidden]) {

}
else {

} 
```

**编辑**

根据**Jonathan Grynspan**报告，您应该使用if`enemy`的子类，而不是因为类中的 getter定义为：`UIView``isHidden``hidden``UIView`

```
@property(nonatomic, getter=isHidden) BOOL hidden 
```

# sql-server - 将值传递给 T-SQL 过程并使用执行 sql 任务 SSIS 从过程中获取输出值

> ID：11120264
> 
> 赞同：1
> 
> 时间：2012-06-20T13:06:24.710
> 
> 标签：sql-server, ssis

我有这样的场景：

我需要传递`@id`给存储过程并`@key`使用 SSIS 从过程中获取`Execute SQL task`：

```
create PROCEDURE lProcedurename
(@ID int ,
@key int  output
)
with execute as caller
as
set nocount on;
begin
BEGIN TRY
set @key=999
END TRY
begin catch
----some codes
end catch
end 
```

请找到执行sql任务属性

结果集为单行

我已经给出了执行 sql 语句（ssis 执行 sql 任务级别）为

```
exec lProcedurename  @ID = ? ,  @key = ? 
```

**参数映射为**

```
variablename ,direction, data type, parametername ,parameter size
user::id input long  o  -1
user::key output long 1 -1 
```

**结果集为**

```
resultname,variablename
0   user::key 
```

但是当我运行包时它出错了。请让我知道属性设置是否正确？

* * *

请查看错误

*SSIS 包“package1.dtsx”开始。错误：0x0 在 CMD 审核 OnPreExecute：没有结果行集与此查询的执行相关联。错误：CMD 审核 OnPreExecute 时出现 0xC002F309，执行 SQL 任务：为变量“key”分配值时出错：“HRESULT 异常：0xC0015005”。任务失败：CMD 审核 OnPreExecute

* * *

**对于同一包的另一次运行，我可以看到另一个错误** SSIS 包“package1.dtsx”启动。错误：事件包上的 0xC001405B 错误：尝试锁定变量“User::key”以进行读取访问时检测到死锁。尝试 16 次后无法获取锁并超时。错误：事件包出错时出现 0xC00291EA，SQL 任务：变量“User::key”不存在。错误：事件包出现错误时出现 0xC0024107：任务验证期间出现错误。警告：OnError 时出现 0x80019002：SSIS 警告代码 DTS_W_MAXIMUMERRORCOUNTREACHED。Execution 方法成功，但引发的错误数 (5) 达到了允许的最大值 (1)；导致失败。当错误数量达到 MaximumErrorCount 中指定的数量时，就会发生这种情况。更改 MaximumErrorCount 或修复错误。错误：0x0 测试：没有结果行集与此查询的执行相关联。警告：OnError 时出现 0x80019002：SSIS 警告代码 DTS_W_MAXIMUMERRORCOUNTREACHED。Execution 方法成功，但引发的错误数 (5) 达到了允许的最大值 (1)；导致失败。当错误数量达到 MaximumErrorCount 中指定的数量时，就会发生这种情况。更改 MaximumErrorCount 或修复错误。*

请注意 user::key 变量已经被定义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:04:28.863

我有同样的问题，这个论坛给了我一个提示，我得到了它的工作。在我的存储过程中，我使用了输入参数和输出参数，在 catch 块中我使用了 RETURN 1，我想在过程失败时将其用作结果集。在另一个过程中，它以这种方式工作，但我没有使用输出。

我之前所做的（其中 1 是输入，而 2 是参数映射中的输出）：

```
EXEC procedure ?, ? OUTPUT 
```

当我使用 RETURN 时，我期待它也会给我一个结果（当我在 SSMS T-SQL 中调用该过程时没问题）。但结果是一个错误。

我改变了什么：

```
EXEC ? = procedure ?, ? OUTPUT 
```

在哪里 ？1 是结果的答案，？2是输入和？3是输出。我在参数映射中使用了所有这些并将 ResultSet 设置为 none。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T16:02:50.140

您的参数映射应该没问题。您需要将结果集设置为“无”并删除结果集映射。您正在尝试捕获变量中的输出参数并将其设置为结果集。这样做的问题是存储过程中的 sql 不会返回结果。

# unit-testing - 在 CQ5 中回滚集成测试数据

> ID：11120266
> 
> 赞同：1
> 
> 时间：2012-06-20T13:06:34.180
> 
> 标签：unit-testing, rollback, aem, crx

我正在寻找在 CQ5 中进行集成测试后进行清理的解决方案。经过一段时间的研究后，我们确实设法在 CQ5 中运行 JUnit 测试（这是错误的记录）。现在一切都按预期工作，我们正在寻找一种解决方案，在 CQ5 服务器上使用 maven-deployment 运行这些测试，然后清理测试数据。例如，我们为测试目的创建的测试用户或测试页面，之后我们不想在系统中拥有。crx 中是否有解决方案来做类似的事情？到目前为止，我们还考虑过使用测试进行部署，然后再次不进行测试，或者立即使用快照进行部署，而不是运行测试并再次安装快照。但是所有这些解决方案都非常耗时，因为我们有很多服务器要部署，所以时间很宝贵:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:48:27.193

关于测试记录不佳，我最近编写了[http://sling.apache.org/site/testing-sling-based-applications.html](http://sling.apache.org/site/testing-sling-based-applications.html)作为基于 Sling 的应用程序的测试技术的概述。由于 CQ5 基于 Sling，所有这些技术都适用于它。

为了清理您的测试内容，我不认为 CQ5.5 或它使用的 CRX 版本提供了快速的“在测试前拍摄快照并在测试后恢复到它”功能。

如果您可以在支持快照的文件系统（如 ZFS）上运行，您可以在运行测试之前拍摄文件系统快照，启动 CQ5，运行它们，停止 CQ5 并返回该快照。

您还可以在仅用于测试的一次性实例上运行测试 - 设置 CQ5 实例很容易，在体面的测试盒上花费的时间不应超过 4-5 分钟。我们使用 Maven 构建来做到这一点，该构建从头开始设置一个实例，就像在 Sling[集成测试示例](http://svn.apache.org/repos/asf/sling/trunk/testing/samples/integration-tests/)中一样。

除此之外，您还可以将所有测试内容放在 /content/test、/var/test 等特定路径下，以便在测试后将其删除。或者向所有测试内容节点添加一个 my:toDelete 混合，以便之前能够找到它们。但在这种情况下，CQ5 本身在测试期间创建的内容（例如工作流实例）不会被删除。

# foursquare - 在第三方应用程序中使用场地提示和照片并结合数据 - 允许吗？

> ID：11120273
> 
> 赞同：1
> 
> 时间：2012-06-20T13:06:54.923
> 
> 标签：foursquare, rules

我无法理解有关场地 API 的foursquare 使用条款。

我正在制作一个集成了 SQLite 数据库的应用程序。该数据库有一个表，其中包含大约 300 个火车站及其坐标和车站 ID。我手动将这些站点映射到一个foursquare ID，并将foursquare ID 放在同一个表中。

然后，当我在应用程序中“显示”特定电台时，应用程序知道在向 Foursquare API 询问提示和照片时要使用哪个 ID。

使用条款规定我不能合并来自其他数据库的数据。

我可以申请，用这种方法收集特定电台的照片和提示吗？

从使用条款

“您可以将外部内容与foursquare 场地相关联，但您不能将foursquare 场地数据与其他位置数据库相结合或导出您自己的违反这些条款的位置数据库。”

“我们不允许服务将foursquare数据与他们自己或第三方的位置数据库结合起来，这样他们就可以了解新的地方或根据foursquare改变地方元数据。”

非常感谢任何帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:09:50.437

欢迎您在 POI 数据库之上添加foursquare 数据，或者在foursquare 的POI 数据库之上添加foursquare 数据。不允许你做的是结合两个 POI 数据库——即拥有你自己的一组火车站，辅以从foursquare 检索到的其他火车站。您对提示和照片的使用很好 - 只需记住在使用其数据时正确归属foursquare！

# javascript - 将页面源代码保存在 Javascript 变量中

> ID：11120274
> 
> 赞同：0
> 
> 时间：2012-06-20T13:06:56.813
> 
> 标签：javascript, html, json, variables

我正在学习javascript，但遇到了一些问题。我想将页面的源代码（html、json、xml）保存在 javascript 变量中。我没有在网上找到很多冲浪，所以你能帮我吗？实际上该页面位于外部域上，所以我怎样才能绕过同源策略限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:21:19.193

我不相信您可以在没有服务器端脚本（例如 PHP）的情况下从外部域中提取整个源代码。唯一的跨域兼容格式是 JSONP，它使用 JQuery 需要来自其他服务器的 JSON 响应。两者都可能对您的网页构成安全风险。

### 更新：

[请参阅此处](http://www.ibm.com/developerworks/library/wa-aj-jsonp1/)了解更多信息。

# windows - 在 Program Files 下创建目录之前，我应该在某处注册吗？

> ID：11120276
> 
> 赞同：0
> 
> 时间：2012-06-20T13:07:10.820
> 
> 标签：windows

在 Linux 中，软件供应商应该（但不是必须）在发布安装程序之前向 LANANA 注册，该安装程序会在 /opt 下创建一个目录。

在发布创建 Program Files 子目录的安装程序之前，是否有针对 Windows 的类似建议？如果有，我应该在哪里注册以及如何注册？

# tomcat - JAVA_HOME 和 JRE_HOME 的区别

> ID：11120279
> 
> 赞同：32
> 
> 时间：2012-06-20T13:07:19.640
> 
> 标签：tomcat, java, java-home

我有一个启动 Tomcat 的脚本，它看起来像这样：

```
rem set JRE_HOME=C:\Program Files\Java\jdk1.7.0_03
set JRE_HOME=C:\Program Files\Java\jre7\
set CATALINA_HOME=D:\test\Server\apache-tomcat-6.0.18
"%CATALINA_HOME%\bin\catalina.bat" jpda start 
```

我可以将 JRE_HOME 设置为我的 jre 文件夹或我的 JDK 文件夹，并且 Tomcat 可以工作，但是如果我删除 JRE_HOME 并改用 JAVA_HOME，Tomcat 只有在我给它提供 JDK 文件夹的路径时才能工作。

那么JRE和JAVA home有什么区别，为什么Tomcat会这样表现呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T22:39:01.517

如果您使用完整的 JDK 运行，Tomcat 在启动时会启用一些额外的调试选项。这些选项需要 JDK，因此如果您声称要确保这些选项在使用时不会失败，Tomcat 会检查您是否实际使用了 JDK。

我很少看到使用这些选项。我想我在与 Tomcat 合作 10 年的过程中使用过它们一次。

当您使用 JRE_HOME 时，Tomcat 不会启用 JDK 特定选项，因此它不会检查您是否使用完整的 JDK 而不是 JRE 运行。

# php - 在 PHP 中解密 OpenEdge 加密字符串 (AES-128)

> ID：11120280
> 
> 赞同：3
> 
> 时间：2012-06-20T13:07:20.193
> 
> 标签：php, encryption, openssl, aes, openedge

这是我在 OpenEdge 10.1B 中使用 AES-128 OFB 加密字符串的函数：

```
 DEFINE VAR cRes AS CHAR INITIAL ? NO-UNDO.
 DEFINE VAR rKey AS RAW NO-UNDO.
 DEFINE VAR rEnc AS RAW NO-UNDO

 rKey = GENERATE-PBE-KEY(cEncKey).

 eEnc = ENCRYPT(cData, rKey, ?, "AES_OFB_128").
 cRes = BASE64-ENCODE(rEnc) NO-ERROR.

 IF ERROR-STATUS::ERROR THEN cRes = ?.

 return cRes. 
```

此功能确实可以很好地加密。

当我想用下面的 PHP 解密它时，它会失败，例如它给我的结果与原始字符串不同。

```
// decrypted: original string is supposed to have 33 characters
$encrypted = "YnRvNjIG1kj1QtUM9ZYuVYS3D4LBYCEsprjg2QCaD/eM";
$key = "27Zkp6Wq";

$method = 'aes-128-ofb';

# do decryption
echo "<pre>".openssl_decrypt(base64_decode($encrypted), $method, $key, false)."</pre>"; 
```

我知道这可能与 GENERATE-PBE-KEY 函数有关，但我看不到如何在 PHP 中生成 PCKS#5 密钥。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:20:49.870

评论太长了。有几件事要看：

1.  的第四个参数`openssl_decrypt`应该是`true`OR 第一个参数应该是 base64 编码。除非它是双 base64 编码的:)

2.  密钥是 base64 编码还是原始密钥？

3.  `PBES1 (pbkdf1)`从 OpenEdge 来看，是否`PBES2 (pbkdf2)`应用于密钥并不完全清楚，但默认设置`sha1`用作散列算法，没有盐和`1000`迭代计数。您可以在线找到示例 PHP 实现。

摆弄了您的示例后，我无法使其正常工作，但是以上内容应该会引导您朝着正确的方向前进；顺便说一句，当我尝试在 PHP 中执行编码步骤时，它导致了一个更短的加密字符串......我不知道该怎么想:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:29:23.767

好的，所以我最终放弃了。问题显然是我未能在 PHP 中重现的 OpenEdge 中的哈希函数。解决方案是从散列函数中获取散列密钥，并通过第二个通道将其以 HEX 格式移动到 PHP，以便在那里使用它进行解密。

它并不完全安全，也不优雅，但它确实有效，而且我们的安全问题不是代码方面的，而是数据库存储方面的。您的要求可能会有所不同，因此只有在您确定它可用时才使用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T16:27:45.490

您是否在任何地方定义了 SECURITY-POLICY:PBE-HASH-ALGORITHM 和 SECURITY-POLICY:PBE-KEY-ROUNDS？：

[http://documentation.progress.com/output/OpenEdge102b/pdfs/dvpin/dvpin.pdf#page=173](http://documentation.progress.com/output/OpenEdge102b/pdfs/dvpin/dvpin.pdf#page=173)

# mysql - 有没有办法重构这个 MySQL 历史触发器？

> ID：11120285
> 
> 赞同：0
> 
> 时间：2012-06-20T13:07:35.857
> 
> 标签：mysql

我有一个 Translation 表，我希望对它的每次更新都自动记录到 TranslationHistory 表中。

我为此目的创建了这个触发器。

```
CREATE TRIGGER TranslationUpdate AFTER UPDATE ON Translation FOR EACH ROW BEGIN
   DECLARE N DATETIME;
   DECLARE ActionString VARCHAR(1000);
   SET N = now();
   SET ActionString = '';

   IF NEW.TranslatorID <> OLD.TranslatorID THEN
     SET ActionString = CONCAT(ActionString, 'TranslatorID(', OLD.TranslatorID, ' -> ', NEW.TranslatorID, ') ');
   END IF;

   IF NEW.StartDate <> OLD.StartDate THEN
     SET ActionString = CONCAT(ActionString, 'StartDate(', OLD.StartDate, ' -> ', NEW.StartDate, ') ');
   END IF;

   IF NEW.DueDate <> OLD.DueDate THEN
     SET ActionString = CONCAT(ActionString, 'DueDate(', OLD.DueDate, ' -> ', NEW.DueDate, ') ');
   END IF;

   IF NEW.EndDate <> OLD.EndDate THEN
     SET ActionString = CONCAT(ActionString, 'EndDate(', OLD.EndDate, ' -> ', NEW.EndDate, ') ');
   END IF;

   IF NEW.Notes <> OLD.Notes THEN
     SET ActionString = CONCAT(ActionString, 'Notes(', OLD.Notes, ' -> ', NEW.Notes, ') ');
   END IF;

   INSERT INTO TranslationHistory (TranslationID, Date, Action)
   VALUES (NEW.ID, N, ActionString);
END; 
```

我不太喜欢它，因为它太长、太乏味、太重复了，而且我敢肯定它不是好的 SQL。我想要一种 DRYer 方法来做到这一点。有没有办法做到这一点而不必手动指定每列的详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:18:45.530

您可以将每个代码块包装成一个函数，但在主过程中的代码不会比重构少多少：

```
IF NEW.TranslatorID <> OLD.TranslatorID THEN
    SET ActionString = CONCAT(ActionString, 'TranslatorID(', OLD.TranslatorID, ' -> ', NEW.TranslatorID, ') ');
END IF; 
```

进入这个：

```
SET ActionString = if(NEW.TranslatorID = OLD.TranslatorID, ActionString, CONCAT(ActionString, 'TranslatorID(', OLD.TranslatorID, ' -> ', NEW.TranslatorID, ') ')); 
```

# jpanel - Graphics2d 和 Jpanel

> ID：11120295
> 
> 赞同：0
> 
> 时间：2012-06-20T13:08:06.237
> 
> 标签：jpanel, graphics2d

我有带有一些组件的 JFrame 和 JPanel，其中将是图形对象。我正在尝试在 JPanel 上添加 Line

```
DrawingPanel()
{
    DrawCellsComponent drawCellsComponent = new DrawCellsComponent();
    add(drawCellsComponent);
} 
```

这是组件的代码。

```
public void paintConponent(Graphics g)
{
    Graphics2D g2 = (Graphics2D) g;
    g2.setPaint(Color.RED);
    g2.draw(new Line2D.Double(0, 0, 250, 250));
} 
```

JPanel 上没有任何线路。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:42:28.067

Problem solved. Just draw in JPanel not in JComponent

# c - 为什么我们在为 TSR 工作时需要远指针？

> ID：11120296
> 
> 赞同：-4
> 
> 时间：2012-06-20T13:08:08.010
> 
> 标签：c, dos, legacy

我多次看到远指针用于 TSR。为什么这些 TSR 程序需要远指针以及为什么这些被认为对一般机器有害。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:17:59.660

远指针由两部分组成，段选择器和偏移量。

一般分段寻址的一个问题（仅适用于 16 位实模式，与后 DOS 计算机使用的 32 位保护模式不同）是物理内存中的单个位置可以从多个“远指针”访问。（这就是为什么在正常的 16 位编码中不鼓励使用它的原因）

维基百科给出的例子是有效的。

```
char far *p =(char far *)0x55550005;
char far *q =(char far *)0x53332225; 
```

两者都指向地址 0x55555。资料来源： [http ://en.wikipedia.org/wiki/Far_pointer](http://en.wikipedia.org/wiki/Far_pointer)

当一个程序在执行时，它并不总是需要指定一个段偏移量（它可以使用近指针），这是因为它正在使用的内存段已经被选中。

对于 TSR 程序，当必须将控制权转移回原始程序时，正在执行一个完全不同的程序。原始程序无法知道当前选择的段是什么，因此必须提供一个包含段和偏移量的完整“远指针”。 [http://en.wikipedia.org/wiki/Terminate_and_Stay_Resident](http://en.wikipedia.org/wiki/Terminate_and_Stay_Resident)

另请注意 [http://en.wikipedia.org/wiki/X86_memory_segmentation](http://en.wikipedia.org/wiki/X86_memory_segmentation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:14:59.107

由于 TSR 程序必须共享一个不能保证留在单个段中的地址空间，因此需要一个远地址（即包含两个 segmant:address ）坐标来标识指针。这有点历史意义，因为据我所知，它在 DOS 下是有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:14:51.940

谁说它们有害？他们只是比其他人需要更多的空间，因此在过去不受欢迎。此外，必须更改段寄存器才能使用它们。

如果您详细说明它们在 TSR 中的使用位置，我可能会说得更多。

# button - 创建动态 Pinterest 按钮？

> ID：11120298
> 
> 赞同：9
> 
> 时间：2012-06-20T13:08:13.647
> 
> 标签：button, dynamic, bookmarklet, pinterest

有没有办法创建一个动态的 Pinterest 按钮？我正在尝试将 Pinterest 支持添加到主要内容是动态的网站，因此我将在页面源中只有一个 Pin It 按钮来固定当前内容。

我想不出使用预建的 Pin It 按钮的方法，因为它要求您提前指定硬编码的 URL。

但是，还有一个 Pin It 小书签可以达到我想要的效果——但这需要用户手动将其添加到他们的书签栏。

有什么方法可以（a）修改 Pin It 按钮，或者（b）以某种方式将小书签集成到我的页面中，这样它就可以固定当前页面的任何内容？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T13:50:47.403

对于任何感兴趣的人，这就是我所做的：

HTML：

```
<a href="#" id="pinit">Pin It</a> 
```

JS：

```
$(document).ready(function(){
    $("#pinit").click(function(){
        $("#pinmarklet").remove();
        var e = document.createElement('script');
        e.setAttribute('type','text/javascript');
        e.setAttribute('charset','UTF-8');
        e.setAttribute('id','pinmarklet');
        e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e);
    });
}); 
```

通常，当您单击浏览器书签栏中的 Pin It 小书签时，它会动态插入一个脚本`pinmarklet.js`（

我对此进行了修改，以便在单击链接时插入脚本（`#pinit`）。我还在`id`脚本中添加了一个`#pinmarklet`（`$("#pinmarklet").remove();`

无论如何，最终效果是您正在做与小书签相同的事情，只是在页面内。因此，它以相同的方式工作并提取当前页面内容，这意味着您可以动态更改其他内容，并且它将被同一个“Pin It”链接拾取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T09:26:42.417

**Pinterest 的动态链接**

> 下面的代码将为不同的页面生成动态 pinterest 按钮。

```
<a href="http://pinterest.com/pin/create/button/?url=http://www.printe-z.com/booked-forms.html&amp;media=http://www.printe-z.com/image/cache/data/newImages/business_forms_Booked-200x120.jpg&amp;description=description will come here" class="pin-it-button" count-layout="none">
 <img src="http://assets.pinterest.com/images/PinExt.png" data-cfsrc="//assets.pinterest.com/images/PinExt.png" title="Pin It" border="0">
</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:32:20.137

我[在 GitHub 上构建了一个改进的 Pinterest 按钮，它支持 HTML5 有效的语法](https://github.com/skibblenybbles/PinterestPlus)。

使用此解决方案的方式取决于您的站点是在服务器端（使用 PHP 或其他一些后端语言）还是通过 JavaScript 和 AJAX 方法在客户端动态填充页面。

对于服务器端，您将生成 HTML5并在模板中填写`<div>`其属性，然后在.`data-*``pinterest-plus-html5.min.js``<script>``<body>`

对于客户端，您需要加载`pinterest-plus-html5.min.js`文件，或者使用`<script>`标签中的标签`<head>`或通过异步加载，如文档中所述。接下来，您将使用 JavaScript 生成 HTML5 `<div>`，在页面上动态插入或替换 Pinterest 按钮标签，然后调用`PinterestPlus.pinit()`将其转换`<div>`为 Pinterest 按钮`<iframe>`。

我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T11:57:28.983

一个简单的服务器端解决方案可能比客户端更好。 [代码在这里](http://staseo.com/dynamic-pinterest-button/)（PHP、WordPress 或 ASP）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-17T04:29:06.210

pintrest 按钮的引脚由按钮的 href 中的参数控制。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-11T12:27:29.833

Pinterest 为构建动态按钮提供了“构建”功能。这意味着您可以动态生成 Pinterest 锚点并使用此函数将其转换为 Pinterest 按钮，就像 pinit.js 在加载时所做的那样。

这里解释了如何指定函数的名称：http: [//porizi.wordpress.com/2013/11/07/dynamic-pinterest-button/](http://porizi.wordpress.com/2013/11/07/dynamic-pinterest-button/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-11T15:43:44.463

我有一个带有全屏画廊的页面，页面底部只有一个*pinterest按钮，我最终在此页面中寻找解决方案。*没有成功，我想出了这个：

```
var imgurl = player.children(".gallery-image").eq(next).css("background-image").match(/\((.+)\)/)[1];
$(".pintrest-container > a").attr("data-pin-href", "//www.pinterest.com/pin/create/button/?url=http://mywebsite.com/&media=" + imgurl + "&description=My Website"); 
```

正则表达式`/\((.+)\)/`对于解析背景属性中的图像 url 很有用，因为它的格式是`url('image.jpg')`，所以正则表达式删除了`url('')`并且只给出了路径。

然后我只是用我的新图像设置属性`data-pin-href`，效果很好！

# python - curl: (7) 连接失败 ::1: 网络不可达

> ID：11120300
> 
> 赞同：3
> 
> 时间：2012-06-20T13:08:14.520
> 
> 标签：python, curl, tornado

当我`curl http://localhost:8000/`在终端中输入运行 python/tornado 脚本时，出现上述错误。

我的 curl 版本是 7.19.7。我禁用了 IPV6。

我的 /etc/hosts 读取

```
127.0.0.1   localhost
127.0.1.1   aniruddha-laptop

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts 
```

的输出`lsof | grep 8000`

```
dbus-daem  1338  aniruddha   67u     unix 0xf2208000      0t0       8923 socket
gconfd-2   1341  aniruddha   20u     unix 0xf2ab8000      0t0       7180 socket
trashappl  1468  aniruddha   18u     unix 0xf4248000      0t0       8689 socket
notificat  1478  aniruddha   14u     unix 0xf20a8000      0t0       8613 socket 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2021-07-12T10:26:26.650

你`cat /etc/resolv.conf`会发现`nameserver 127.0.0.1`，那么你应该移动这个条目并添加任何可用的名称服务器。

# php - 使用 sabberworm/PHP-CSS-Parser 解析 css 文件

> ID：11120305
> 
> 赞同：1
> 
> 时间：2012-06-20T13:08:30.700
> 
> 标签：php, css, parsing

我使用这个类来解析一个 .css 文件。 [https://github.com/sabberworm/PHP-CSS-Parser](https://github.com/sabberworm/PHP-CSS-Parser) 我认为这很容易，但是这个类很复杂，而且我在面向对象编程方面完全是绿色的，所以我有一个问题。

(...) 包括所有类文件等。

```
$oParser = new CSSParser(file_get_contents('files/sample.css'));
$oDoc = $oParser->parse();
$selectors=$oDoc->getAllRuleSets();
$nazwy=$oDoc->getContents();

foreach($selectors as $selektor=> $val)
    {       
    $w=$val->getSelectors();            
    echo "<h3>$selektor</h3>";
    $tmp=$val->getRules();

        foreach($tmp as $nazwa => $attrib)
        {
        $wartosc= $attrib->getValue();
        echo "<br>$nazwa:$wartosc;";            
        }               
    } 
```

此代码将输出类似这样的内容

```
<h1>0</h1>
color:red;
margin:10px;

<h1>1</h1>
color:green;
margin:20px; 
```

几乎没问题，但我想要选择器名称（例如 div #someid）而不是当前 css 块的索引。知道如何获得这些吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:53:17.380

使用`echo "<h3>".implode(', ' $w)."</h3>"`.

原因如下：`$val`表示一个声明块，它是一个由多个逗号分隔的选择器组成的规则集（键`$selektor`只包含声明块的索引，对于大多数用法来说是完全任意的）。要获取选择器，请使用`$val->getSelectors()`（您所做的）。这将为您提供所有选择器的数组。

声明块：

```
h1, h2 { value: 1; } 
```

因此将被解析为`CSSDeclarationBlock`具有选择器数组 ['h1', 'h2'] 的对象。要恢复最初定义的选择器，请使用`implode`.

# wpf - 我需要识别在表面应用程序中执行的基本手势吗？

> ID：11120306
> 
> 赞同：0
> 
> 时间：2012-06-20T13:08:35.250
> 
> 标签：wpf, xna-4.0, pixelsense

我需要识别在表面应用程序中执行的基本手势吗？我的最终要求是找出基本手势及其参数、确定手势功能的属性，然后将它们传递给另一个应用程序。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:23:18.617

它们不包括在内，您必须使用您的数学技能自己编写它们，`PreviewTouchUp`/ `PreviewTouchDown`/ `PreviewTouchMove`&`ManipulationDelta`

# facebook - 在 Facebook 上上传带有自定义“通过”链接的图像

> ID：11120308
> 
> 赞同：0
> 
> 时间：2012-06-20T13:08:40.650
> 
> 标签：facebook, hyperlink

我刚刚从我的应用程序上传了一张图片到 Facebook。图片已成功上传，但问题是加载图片时会这样说。

```
Uploaded via xyz app 
```

其中 xyz 是我的应用名称。xyz 实际上是一个链接，但是当我单击此链接时，出现未找到页面错误。有什么方法可以提供我的 android 应用程序链接，以便当用户单击它时，他应该被定向到 android 市场。我尝试在捆绑参数中放置一个链接，但这不起作用。它仅适用于供稿，不适用于图片上传。请告知是要彻底编码还是通过 facebook 的开发面板完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:27:48.250

试试这个片段：

```
 JSONObject attachment = new JSONObject();
    try {
        attachment.put("message", "Messages");
        attachment.put("name", "Your Custom Text!");
        attachment.put("href", "http://www.google.com");
    } catch (JSONException e) {
        e.printStackTrace();
    }
    parameters.putString("attachment", attachment.toString()); 
```

其中参数是你的 Bundle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:14:23.347

此链接指向应用程序的画布页面。如果您没有，请设置一个。

不，在发布/上传图像时，无法自行将该链接设置为（外部）目标。

# css - 如何使用 PrimeFaces 中的自定义图标？

> ID：11120311
> 
> 赞同：3
> 
> 时间：2012-06-20T13:09:00.510
> 
> 标签：css, jsf-2, primefaces, icons, styling

PrimeFaces 提供了很多来自 jQuery themeroller 的图标。它们很有用，但我需要为我的应用程序定制一些图标。假设我有一个`<p:commandButton>`：

```
<p:commandButton icon="ui-icon ui-icon-check" /> 
```

由于我的 CSS 知识非常有限，如果您能告诉我如何将一些自定义图标放入上述按钮的标签中，我将不胜感激。

最好的祝福，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T13:23:08.643

您需要定义自己的 css 类：

```
.img-button-help { background-image: url('../images/help.png') !important; } 
```

然后在你的使用这个类`p:commandButton`：

```
<p:commandButton icon="img-button-help" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-06T08:04:45.367

要在 jsf primefaces 中创建您自己的（用户定义/定制的）ui-icon，请执行以下步骤：

1.  我的图片名称是“pencilfour.png”，将它放在 webapp 的资源文件夹中。
2.  在 xhtml 页面的“样式”标签内定义您自己的图标，并使用新名称：

    > .uipencil-icon {
    > 
    > ```
    > width: 16px; 
    > 
    >     height: 16px;
    > 
    >     align:up;
    > 
    >     background-image: url(#{resource['img:pencilfour.png']})!important ; 
    > } 
    > ```

您可以根据您的要求修改 with 和 height 。

3.  然后您可以将定义的图标与命令按钮一起使用

> ```
> <p:commandButton 
> 
> icon="uipencil-icon"
> 
>     style="   vertical-align:middle;
> 
>     margin-right:10px;
> 
>   height:19px;
> 
>   width:19px;"
> 
>   </p:commandButton> 
> ```

这将起作用，唯一需要注意的是提供正确`url: url(#{resource['img:pencilfour.png']})!important ;` 的 url 语法是 imp 以获取命令按钮上的图像:)

# javascript - Backbone.js 路由 - 将键/值附加到 URL

> ID：11120312
> 
> 赞同：0
> 
> 时间：2012-06-20T13:09:02.503
> 
> 标签：javascript, backbone.js, backbone-routing

我有一个案例，我使用这些路由的不同视图的选项卡：#view/list 和#view/table，但我也有过滤器，它们在不同的视图之间工作，它们的路由是#filter/all，#filter/key，等等

因为我的标签有这些链接：

```
<a href="#view/list">List</a>
<a href="#view/table">Table</a> 
```

我的过滤器是：

```
<a href="#filter/all">All</a>
<a href="#filter/key">Key</a> 
```

什么是组合路由的最佳方式，所以当我打开一个视图然后选择一个过滤器时，我的 URL 应该变成 ..#view/list/filter/key

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:16:42.470

现在我为我找到了一个可行的解决方案。

我附加到路由事件，例如：

```
appRouter.on('route:setFilter', function( filter ){
    appRouter.navigate('view/' + currentView + '/filter/' + filter);
}); 
```

它现在对我有用。我很高兴看到这是否是一种不错的思考方式。

# jquery - jQuery 适用于手动创建的 HTML，但不适用于 jQuery 创建的 HTML？

> ID：11120315
> 
> 赞同：0
> 
> 时间：2012-06-20T13:09:09.650
> 
> 标签：jquery, html

我刚开始使用 jQuery，真的只需要一些非常基本的东西。这是我正在尝试做的事情：

我将内容分为“.overview” div 和“.detail” div。jQuery 浏览所有“.detail”-div，向上移动一个元素 (.prev(".overview")) 并附加一个按钮。然后它将所有“.detail” div 缩小为零，并使用按钮分别显示/隐藏它们。

我首先对按钮进行了硬编码，但这似乎很乏味且没有必要。但是一旦我动态生成它们，显示/隐藏功能就不再起作用了。我四处搜索，但我可能没有使用正确的术语...

这是我的html：

```
<div class="title">
    <h2>Title</h2>
</div>
<div class="overview">
    <p>...</p>
</div>
<div class="detail">
        <p>...</p>
</div> 
```

这是 jQuery 代码（在一个单独的文件中）：

```
$(document).ready(function() {

    $(".detail").each(function() {
        $(this).prev("div").append("<div class=\"expand\"><a href=#>more</a></div>");
        $.data(this, "realHeight", $(this).height());
    }).css({ overflow: "hidden", height: "0" });

    $(".expand").toggle(function() {
        $(this).html("<a href=#>less</a>")
        var div = $(this).next(".detail")
        div.animate({ height: div.data("realHeight")+21 }, 250);        
    }, function() {
        $(this).html("<a href=#>more</a>")
        $(this).next(".detail").animate({ height: 0 }, 250);
    });

}); 
```

如果您能指出正确的方向，我将不胜感激。或者，如果它是一个愚蠢的，只要告诉我我需要搜索什么。:-)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:16:23.377

您需要了解的技术是**事件委托**- 看看 jQuery 中的[`.on()`](http://api.jquery.com/on/)和[`.delegate()`](http://api.jquery.com/delegate/)函数，具体取决于您使用的版本。

然而，一般原则是，与其将事件处理程序绑定到单个元素（在执行 jQuery 代码时必须存在），不如将单个事件处理程序绑定到您知道将始终存在的元素（例如`<body>`标签）它运行一个依赖于选择器的函数。

当您单击按钮元素时，会为该元素触发 click 事件，然后使 DOM 冒泡，在向上遇到的每个元素都触发。当它到达您始终存在的元素（您的`<body>`元素）时，它会根据提供的选择器检查事件的原始目标，并且仅在匹配时执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:20:54.810

$.next() 获取下一个兄弟，并且“.detail”不是 DOM 结构中“.expand”的兄弟。您可能想要获取父级（“.overview”），然后获取下一个（）。

或者改变结构，使它们成为兄弟姐妹。

**编辑**：在你的代码中你这样做，这就是为什么他们不是兄弟姐妹：

```
$(".detail").each(function() {
    $(this)
        .prev("div") // <- this gets the overview div
        .append("<div class=\"expand\"><a href=#>more</a></div>"); // <- this creates the "expand" as a child of the overview div (so not a sibling of details) 
```

使用问题中的基本代码尝试使用“父”工作这个[小提琴。](http://jsfiddle.net/UwvYS/)

这是另一个[使用](http://jsfiddle.net/URzb5/1/)`insertBefore`. 它的工作原理完全相同，您不需要`.parent()`调用。

# unit-testing - 如何使用 xunit 配置测试流程

> ID：11120323
> 
> 赞同：1
> 
> 时间：2012-06-20T13:09:27.077
> 
> 标签：unit-testing, xunit.net

我是新 xunit，想使用 xunit 配置测试流程。例如，有几种测试方法 A、B、C、D，我想以几种方式运行它们： 1\. 按特定顺序运行它们 B、A、C、D 2.将 A、B、C 变形为测试列表，它们可以以随机顺序运行。ETC...

我之前用过MSTest，发现这些可以通过修改config文件来设置，我想知道在xunit中应该如何实现？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:32:23.587

通过以下链接：

1.  [http://blog.athico.com/2011/10/cookbook-how-to-test-rules-using-xunit.html](http://blog.athico.com/2011/10/cookbook-how-to-test-rules-using-xunit.html)
2.  [http://www.velocityreviews.com/forums/t584773-unit-testing-vhdl-using-xunit.html](http://www.velocityreviews.com/forums/t584773-unit-testing-vhdl-using-xunit.html)

# bash - bash中的十六进制到二进制转换

> ID：11120324
> 
> 赞同：12
> 
> 时间：2012-06-20T13:09:31.353
> 
> 标签：bash, binary, hex, bc

我正在尝试使用 bash 将一系列字节从十六进制转换为 bin。但我不断收到（看似随机的）“（standard_in）1：语法错误”来自以下代码的回复：

```
for j in c4 97 91 8c 85 87 c4 90 8c 8d 9a 83 81
do
        BIN=$(echo "obase=2; ibase=16; $j" | bc )
        echo $BIN
done 
```

我对 dec 到 bin 做了类似的事情，效果很好：

```
for i in {0..120}
do
        KEYBIN=$(echo "obase=2; ibase=10; $i" | bc)
        echo $KEYBIN
done 
```

有谁知道为什么它适用于十进制，但不适用于十六进制？在我看来，语法几乎相同（除非我错过了一些非常难的东西。）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T13:27:17.740

BC 对十六进制值的大小写有点敏感，更改为大写，它应该可以工作

```
for j in C4 97 91 8C 85 87 C4 90 8C 8D 9A 83 81
do
        BIN=$(echo "obase=2; ibase=16; $j" | bc )
        echo $BIN
done 
```

输出：

```
11000100
10010111
10010001
10001100
10000101
10000111
11000100
10010000
10001100
10001101
10011010
10000011
10000001 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-11-22T16:20:10.690

我想出了这个：

printf 转换为十六进制， xxd -r -p 采用 ascii 十六进制流并使其成为实际二进制

用 hexdump 倾倒以证明它有效......

```
printf "%016x" 53687091200 | xxd -r -p | hexdump -C 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T13:31:26.347

这是我使用的脚本：

```
#!/bin/bash
# SCRIPT:  hex2binary.sh
# USAGE:   hex2binary.sh Hex_Number(s)
# PURPOSE: Hex to Binary Conversion. Takes input as command line
#          arguments.
#####################################################################
#                      Script Starts Here                           #
#####################################################################

if [ $# -eq 0 ]
then
    echo "Argument(s) not supplied "
    echo "Usage: hex2binary.sh hex_number(s)"
else
    echo -e "\033[1mHEX                 \t\t BINARY\033[0m"

    while [ $# -ne 0 ]
    do
        DecNum=`printf "%d" $1`
        Binary=
        Number=$DecNum

        while [ $DecNum -ne 0 ]
        do
            Bit=$(expr $DecNum % 2)
            Binary=$Bit$Binary
            DecNum=$(expr $DecNum / 2)
        done

        echo -e "$Number              \t\t $Binary"
        shift
        # Shifts command line arguments one step.Now $1 holds second argument
        unset Binary
    done

fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-13T14:52:37.517

尝试这个：

```
for j in c4 97 91 8c 85 87 c4 90 8c 8d 9a 83 81
do
    BIN=$(echo "obase=2; ibase=16; ${j^^}" | bc )
    echo $BIN
done 
```

# jquery - jQuery GUI 开发的良好实践

> ID：11120325
> 
> 赞同：0
> 
> 时间：2012-06-20T13:09:31.193
> 
> 标签：jquery, html, css, user-interface

我正在开发许多界面，我正在使用 jquery 来导航、探索、显示内容、加载页面和许多其他事情。

我看到我的代码是这样的：

例子：

```
$(document).ready(function(){
  $("a").click(function(){});
  $(".class").hover(function(){}, function(){});
  //and more and more 
}); 
```

我做了一个插件来加载我的内容

插入：

```
(function( $ ){
$.fn.navCategoria = function( options ){
    var settings = {};
    if (options) $.extend(settings, options);
    $(settings.target).load(settings.url, {"categoria":settings.categoria, "limit":settings.limit, "offset":settings.offset});
};

})( jQuery ); 
```

我有很多 html，每个页面都有一个功能：

```
$(document).ready(function(){}); //my code in there 
```

我怎样才能将所有这些东西（`$(document).ready()`）放在一个地方？

我用过这种方式，但我必须在我拥有的每个 html 页面中调用这个文件，这并不好。

这种情况下有什么好的做法？

你们用什么来组织你的 jQuery？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:16:57.773

我遵循我所有工作的最佳实践。

1.  将您的 jquery 插件代码单独保存在 .js 文件中并在标头中调用

2.  保留一份 $(document).ready(){}); 并将您的所有事件保留在其中并将其保留在标题部分

3.  如果没有 dom 准备好，你可以使用 onload 或保持页面底部延迟触发

更好的组织将帮助您轻松维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:49:21.180

最好的解决方案是将所有脚本放在单独的 js 中，并在 head 部分中导入。您将有一个`$(document).ready()`函数，您可以在其中区分实际的页面检查，例如您的身体的 id 或类，可能使用 switch 语句：

```
var idBody = $('body').attr( 'id' );
switch( idBody ){
    case 'home':
         initHome();
    break;
    case 'about':
         initAbout();
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T19:14:14.097

好吧，在这个问题之后将近一年，我一直在训练我的 JS，使用 Ruby on Rails，并且我学习了关于我的组织风格的新东西、提示和技巧。

我已经开发了一个 InterfaceApplication，请点击 gist 上的链接 :)

[https://gist.github.com/xdougx/5879172](https://gist.github.com/xdougx/5879172)

我还在开发这个类，但是对我来说非常好用，看看如何使用：

包括在你的项目中，对我来说，在我的 application.js 中

```
//= require app/interface_application 
```

例如在我家里，我可以有很多活动，就像`$(".button").click()`。

在我使用这种方式之前：

```
$(document).ready(function(){
  $(".button").click(function(){
    // do my cool stuff
  });

  // more 23 different events
}); 
```

但现在我到目前为止“家里有 23 个不同的事件”。哇，这是这么多事件，而且很难维护。好吧，现在我可以在我的 IApp 中玩这个了。我为我的家庭活动开发了这个课程：

```
var HomeModule = (function(){
    var Home = function(){
      // event #1
      this.my_blue_button = function(){
        // do blue and fanny stuff
      }

      // event #2
      this.my_red_button = function(){
        // do red and nice things
      }

      // Wow more 22 events
    };

    return Home;
  })(); 
```

在我的 app/site/home.html.erb

```
<script type="text/javascript">
  $(function(){     
    var params = {
      estimate_id:"<%= @estimate.id%>", 
      company_id:"<%= @estimate.company.id%>"
    };

    var modules = { "HomeModule": new HomeModule }
    var app = new IApp;
    app.addModules(modules).run(null, params);
  });
</script> 
```

看，我运行我的事件，我可以加载许多其他模块并使我的所有事件都可重用（如果可以的话），现在我可以在清理我的 html 的单独文件中构建许多功能！

你怎么看？我会感谢评论和意见！

感谢您能够与您分享。

# c# - Linq2SQL，异常后使用dataContext

> ID：11120335
> 
> 赞同：4
> 
> 时间：2012-06-20T13:10:03.003
> 
> 标签：c#, linq-to-sql, exception, datacontext

这里有一小段代码用于测试和解释问题。我有一个有 3 个字段的表格 Person ：

*   ID
*   名字（不可为空）
*   姓氏（不可为空）

在循环 ：

*   第一：我插入第一行......正常，
*   第二：我尝试插入一个不正确的项目，`Exception`...正常
*   第三：我尝试插入第三行...... `Exception`（与第二行相同）但值是正确的。

在 a 之后有什么办法可以使用相同`dataContext`的`Exception`吗？

```
public class MyTestClass
{
    private readonly DataModelDataContext _dataContext;

    public MyTestClass()
    {
        _dataContext = new DataModelDataContext();
    }

    public void InsertList()
    {
        List<Person> liste = new List<Person>();
        liste.Add(new Person { FirstName = "AAA", LastName = "BBBB" });
        liste.Add(new Person { FirstName = string.Empty, LastName = null });
        liste.Add(new Person { FirstName = "CCC", LastName = "DDD" });

        foreach (var item in liste)
        {
            try
            {
                _dataContext.Persons.InsertOnSubmit(item);
                _dataContext.SubmitChanges();
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:40:18.327

`DataContext`应该永远是短暂的。您应该重新考虑您的设计以实现这一目标。

你可以考虑以下几点：

*   每个事务使用上下文。这样，您可以以有意义的方式使上下文短暂存在。
*   事务失败时回滚。这包括使用新交易插入正确的项目。这意味着，你现在有了一个全新的不同背景。
*   重复该过程，直到事务完成。
*   同样，完成后不要忘记结束上下文。这可以通过使用`using`语句轻松实现。

[来自 MSDN 的备注](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)：

> DataContext 是通过数据库连接映射的所有实体的源。它跟踪您对所有检索到的实体所做的更改，并维护一个“身份缓存”，以保证多次检索到的实体通过使用相同的对象实例来表示。
> 
> 通常，DataContext 实例旨在持续一个“工作单元”，但是您的应用程序定义了该术语。DataContext 是轻量级的，创建起来并不昂贵。典型的 LINQ to SQL 应用程序在方法范围内创建 DataContext 实例，或者将其作为表示一组相关数据库操作的逻辑集的短期类的成员。

* * *

如果需要时间来重构您的设计，您可以暂时这样做：

```
 public void InsertList(List<Person> people)
    {
        foreach (var person in people)
        {
            DoInsert(person); 
            // You can use the returned flag and implement the logic if desired.
            // Or let the loop move on its ways.
        }
    }

    public bool DoInsert(Person person)
    {
        try
        {
            using (DataModelDataContext dataContext = new DataModelDataContext())
            {
                dataContext.Persons.InsertOnSubmit(person);
                dataContext.SubmitChanges();
            }
            return true;
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
            return false;
        }
    } 
```

这就是你如何调用`InserList`方法：

```
 List<Person> liste = new List<Person>();
    liste.Add(new Person { FirstName = "AAA", LastName = "BBBB" });
    liste.Add(new Person { FirstName = string.Empty, LastName = null });
    liste.Add(new Person { FirstName = "CCC", LastName = "DDD" });

    InsertList(liste); 
```

# javascript - 如何使用 indexOf 方法检查数组中是否存在“未定义”？

> ID：11120341
> 
> 赞同：-1
> 
> 时间：2012-06-20T13:10:19.230
> 
> 标签：javascript, arrays

如果我有这样的数组

```
 A = ["1111", "22", "33", undefined, "55", undefined] ; 
```

我通过删除一些元素得到了这个数组

我需要在不循环的情况下查找数组中是否存在未定义

```
A.indexOf('undefined') or A.indexOf(undefined)  .. wont work 
```

那么如何使用 indexOf 方法检查该数组中是否存在未定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:24:04.153

在下面回复您的评论：

> 我需要的是 var A = ["1111", "22", "33", undefined, "55", undefined] ; 在 A 中，我需要通过拼接方法删除所有未定义并获得像 A = ["1111", "22", "33","55"] 这样的数组

这与您的原始问题***完全***不同。您可以使用新的 ES5 [`Array#filter`](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.20)( [MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter) ) 功能来做到这一点，该功能在 ES5 之前的系统上是可填充的（搜索“ES5 shim”），如下所示：

```
A = A.filter(function(val) {
    return val !== undefined;
}); 
```

或使用`for`循环和[`Array#splice`](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.12)（[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)）：

```
var index;
for (index = A.length - 1; index >= 0; --index) {
    if (A[index] === undefined) {
        A.splice(index, 1);
    }
} 
```

* * *

问题的原始答案`indexOf`：

你说过这`A.indexOf(undefined)`对你不起作用。它应该，只要`undefined`in`A`真的是`undefined`你正在测试的对象。（当然，除非您的数组中`A.indexOf('undefined')`有字符串，否则它不会起作用。）`"undefined"`

在正常情况下，这将输出`3`：

```
var A = ["1111", "22", "33", undefined, "55", undefined] ;
console.log(A.indexOf(undefined)); 
```

但是，您已经说过它没有，所以这里有一些它可能不会的原因以及如何处理它们：

1.  您期望`indexOf`找到一个`undefined`不存在的数组元素的值。例如，**不**

    ```
    var A = ["1111", "22", "33", undefined, "55", undefined] ;
    console.log(A.indexOf(undefined)); // 3 
    ```

    ...但反而：

    ```
    var A = [];
    A.length = 6;
    A[0] = "1111";
    A[1] = "22";
    A[2] = "33";
    A[4] = "55";
    console.log(A.indexOf(undefined)); // -1 
    ```

    `undefined`原因是实际上有一个元素的数组和一个根本没有那个元素**的**数组是有区别的。JavaScript 数组可以是稀疏的，这意味着它们之间存在间隙。（事实上​​，JavaScript 数组根本不是真正的数组。）这些空白被`indexOf`.

    如果要查找`undefined`值*或*间隙，可以使用 for 循环：

    ```
    var i, index = -1;
    for (i = 0; i < A.length; ++i) {
        if (A[i] === undefined) {
            index = i;
            break;
        }
    } 
    ```

    之所以有效，是因为`A[i]`将`undefined`出于以下两个原因之一进行评估：A）元素存在并且它具有 value `undefined`，或 B）元素根本不存在。

2.  你已经`A`从另一个窗口得到了。可悲的是，in `undefined`one`window`不是in another window，而是使用. 在这种情况下，您可以改用（在具有 ES5 的现代浏览器上，或使用 ES5 shim）：`===``undefined``indexOf``===`[`some`](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.17)

    ```
    var A = /* ...get A from another window... */;
    var index = -1;
    A.some(function(val, i) {
        if (typeof val === "undefined") {
            index = i;
            return true;
        }
    });
    console.log(index); // 3 
    ```

    或者只是一个`for`循环：

    ```
    var i, index = -1;
    for (i = 0; i < A.length; ++i) {
        if (typeof A[i] === "undefined") {
            index = i;
            break;
        }
    } 
    ```

    虽然`undefined`在一个窗口中没有`===` `undefined`在另一个窗口中，但它们都有`typeof "undefined"`，所以上面的方法解决了这个问题。

3.  您正在包含一个库，该库会`Array#indexOf`用它自己的损坏版本无意识地替换它。您可以通过以下方式了解是否是这种情况：

    ```
    console.log(A.indexOf); 
    ```

    您应该会看到大致如下所示的内容：

    ```
    function indexOf() {
        [native code]
    } 
    ```

    如果您看到的是真实的源代码，则有人对其进行了填充（甚至可能在没有先检查浏览器是否已经拥有它的情况下对其进行了填充）。如果他们有，并且以这种方式损坏，请停止使用该库。:-)

4.  一些 eejit 已`undefined`在其中一种上下文中重新定义，例如：

    ```
    var A = ["1111", "22", "33", undefined, "55", undefined] ;
    (function(undefined) {
        console.log(A.indexOf(undefined)); // Outputs -1
    })("foo")); 
    ```

    或者

    ```
    var A = (function(undefined) {
        return ["1111", "22", "33", undefined, "55", undefined] ;
    ])("foo");
    console.log(A.indexOf(undefined)); // Outputs -1 
    ```

    如果他们这样做了，追踪他们并鞭打他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:01:50.583

如果您尝试删除所有未定义的项目，我认为您可以通过这种方式快速完成：

```
var A = ["1111", "22", "33", undefined, "55", undefined];

var item = undefined; // value of the item to remove, it can be anything actually

while (A.indexOf(item) > -1) {
 dataArr.splice(A.indexOf(item), 1);
}

console.log(A); // output 
```

# php - PHP preg_match 匹配或不匹配并输出关联数组

> ID：11120342
> 
> 赞同：1
> 
> 时间：2012-06-20T13:10:28.477
> 
> 标签：php, arrays, preg-match, associative

我正在使用以下代码：

```
<?php
$pattern = "/(?<item>.*)\:(?<value>.*)(\{(?<flag>.*)_(?<level>.*)\})/i";
$subject = "item:value{L_300}";
preg_match($pattern, $subject, $matches);
print_r($matches); 
```

这将输出以下内容：

```
array(
    array (
      0 => 'item:value{L_300}',
      'item' => 'item',
      1 => 'item',
      'value' => 'value',
      2 => 'value',
      3 => '{L_300}',
      'flag' => 'L',
      4 => 'L',
      'level' => '300',
      5 => '300'
    )
) 
```

我的问题是主题并不总是包含 '{L_300}' 部分，但我仍然需要使用模式匹配 'item:value' 部分。

任何人都可以帮忙吗？

这似乎是一个常见问题，但我找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:36:42.753

你可以添加一个？在捕获组之后使其成为可选。我还冒昧地更改了模式的其他一些部分，以防止 .* 在不寻常的情况下捕获过多（例如有额外的 : 或 { 字符）

```
<?php
$pattern = "/(?<item>[^:]*):(?<value>[^{]*)(\{(?<flag>[^_]*)_(?<level>[^}]*)\})?/i";

$subjects = array("itemname:valuehere{L_300}",
"item2:anothervalue"
);

foreach ($subjects as $subject) {
  print "Subject:\n$subject\n";
  preg_match($pattern, $subject, $matches);
  print_r($matches);
} 
```

输出：

```
Subject:
itemname:valuehere{L_300}
Array
(
    [0] => itemname:valuehere{L_300}
    [item] => itemname
    [1] => itemname
    [value] => valuehere
    [2] => valuehere
    [3] => {L_300}
    [flag] => L
    [4] => L
    [level] => 300
    [5] => 300
)
Subject:
item2:anothervalue
Array
(
    [0] => item2:anothervalue
    [item] => item2
    [1] => item2
    [value] => anothervalue
    [2] => anothervalue
) 
```

# compiler-construction - 基于堆栈的字节码或无限寄存器机器的优点

> ID：11120343
> 
> 赞同：14
> 
> 时间：2012-06-20T13:10:32.737
> 
> 标签：compiler-construction, expression-trees, intermediate-code

编译器通常选择基于堆栈或无限寄存器的中间表示 (IR)。这些优于表达式树的优点是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T13:23:32.990

表达式树适用于表达式，但对整个程序的建模无效。特别是，程序的良好表示实际上是由控制和数据流连接的（操作和动作的）图。通常人们谈论使用“三元组”来形成这样的图表。

堆栈机器代码对于前端来说很容易生成，但对于生成真实代码所需的最终寄存器分配过程来说更难，因为它有一组与目标架构没有明显关系的临时位置（“堆栈”） ，并使数据流处理不便。（“哪个代码使用了这个添加的结果？”）。

寄存器机器更难为其生成代码，但倾向于通过使用这些无限寄存器作为本质上的数据流线来保留数据流。该数据流以及将其轻松分配给真实寄存器的能力（有一个“通过图形着色”的标准寄存器分配）使得生成好的代码相对容易。

如果您决定直接从这些生成虚拟机代码，您将获得不同的性能特征。从本质上讲，堆栈机器往往会获得更小的代码占用空间。无限寄存器机器往往会获得快速的解释执行。正是因为这个原因，Google 的 Dalvik 与 JVM 不同。（也许他们也不想因为类文件格式而被 Sun/Oracle 起诉。）

我建议使用以下文档：[虚拟机摊牌：堆栈与寄存器](https://www.usenix.org/legacy/events/vee05/full_papers/p153-yunhe.pdf)。（PS：任何以 Anton Ertl 为作者的作品往往都是有趣的读物）。

# sparql - 此查询的正确 SPARQL 版本是什么？

> ID：11120344
> 
> 赞同：3
> 
> 时间：2012-06-20T13:10:45.780
> 
> 标签：sparql, dbpedia

我正在尝试通过 SPARQL 在 DBPedia.org 上运行查询。基本上，这就是我想要做的：

*   获取 DBPedia 资源链接列表

**在哪里**

*   foaf:name (http://xmlns.com/foaf/0.1/name) 等于 PARAMETER1
*   或者 dbpprop:companyName (http://dbpedia.org/property/companyName) 等于 PARAMETER1
*   或者 dbpprop:name (http://dbpedia.org/property/name) 等于 PARAMETER1

**和**

*   rdf:type (http://www.w3.org/1999/02/22-rdf-syntax-ns#type) 等于 PARAMETER2
*   或者 dbpedia-owl:type (http://dbpedia.org/ontology/type) 等于 PARAMETER2

我自己尝试过这样做，但完全没有得到任何成功的结果。

任何帮助将不胜感激 - 谢谢！

编辑：这是我一直在处理的一个查询：

```
SELECT ?s
WHERE {
    {
      ?s <http://xmlns.com/foaf/0.1/name> "Google Inc." .
    } UNION {
      ?s <http://dbpedia.org/property/companyName> "Google Inc." .
    } UNION {
      ?s <http://dbpedia.org/property/name> "Google Inc." .
    }

    {
      ?s <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://dbpedia.org/ontology/Company> .
    } UNION {
      ?s <http://dbpedia.org/ontology/type> <http://dbpedia.org/resource/Public_company> .
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:32:18.987

您几乎拥有它，唯一的问题是 DBPedia 中的属性值使用语言标签，而您的查询查找具有纯文字值的名称。这个查询对我有用：

```
SELECT DISTINCT ?s
WHERE {
    {
      ?s <http://xmlns.com/foaf/0.1/name> "Google Inc."@en .
    } UNION {
      ?s <http://dbpedia.org/property/companyName> "Google Inc."@en .
    } UNION {
      ?s <http://dbpedia.org/property/name> "Google Inc."@en .
    }

    {
      ?s <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://dbpedia.org/ontology/Company> .
    } UNION {
      ?s <http://dbpedia.org/ontology/type> <http://dbpedia.org/resource/Public_company> .
    }
} 
```

请注意，我添加了 a`DISTINCT`以消除当资源具有多个值时出现的重复答案，例如 for`foaf:name`和`dbpprop:companyName`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-16T15:16:34.970

**这可以用values**写得更清楚。您可以使用**值**来指定可能标识名称的属性。此外，[Google](http://dbpedia.org/page/Google)没有**dbpprop:type**的资源值（至少现在没有了）；最好坚持使用**rdf:type**和**dbpedia-owl:Company**。这意味着您的查询可以变成：

```
select distinct ?s where {
  values ?name { foaf:name dbpprop:companyName dbpprop:name }
  ?s a dbpedia-owl:Company ;
     ?name "Google Inc."@en .
} 
```

[SPARQL 结果](http://dbpedia.org/sparql/?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=select%20distinct%20%3Fs%20where%20%7B%0D%0A%20%20values%20%3Fname%20%7B%20foaf%3Aname%20dbpprop%3AcompanyName%20dbpprop%3Aname%20%7D%0D%0A%20%20%3Fs%20a%20dbpedia-owl%3ACompany%20%3B%0D%0A%20%20%20%20%20%3Fname%20%22Google%20Inc.%22%40en%20.%0D%0A%7D&format=text%2Fhtml&timeout=30000&debug=on)

# oracle - Oracle Apex 和 Sharepoint

> ID：11120346
> 
> 赞同：0
> 
> 时间：2012-06-20T13:10:55.450
> 
> 标签：oracle, sharepoint, oracle-apex

我被要求在一个我知之甚少的主题上做一些事情，需要一些帮助才能找到正确的方向。

我正在研究的问题是：

1.  与 Oracle APEX 相比，SharePoint（2003 和 2010）的数据管理功能是什么？

2.  Oracle 和 SharePoint 可以在何种程度上相互通信，以便将一个中的数据导入到另一个中或由另一个读取？

我对此有疑问： 1\. 那里是否有足够的信息来开始回答这两个问题？2\. 我应该问什么后续问题？3\. 我的理解是 APEX 是一个应用程序（就像 microsoft access），而 Sharepoint 更像是一个框架。那是对的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T15:58:56.890

> 1\. 与 Oracle APEX 相比，SharePoint（2003 和 2010）的数据管理功能是什么？

[Sharepoint](http://sharepoint.microsoft.com/en-us/pages/default.aspx)是 Microsoft 的一个文档管理系统，因此它是一个应用程序，允许您存储、检索和共享具有权限的文件等。它[不是数据库](http://chriswoodill.blogspot.co.uk/2009/05/sharepoint-is-not-database.html)。

[Oracle APEX](http://apex.oracle.com)是一种用于在 Oracle 数据库上构建 Web 应用程序的工具。它不是文档管理系统，也不是（APEX）数据库。如果有足够的时间，您可以使用 Oracle APEX 和 Oracle 数据库**构建**文档管理系统，但它不是一个。您可以使用 BLOB 数据类型将文档直接存储在 Oracle 数据库中。

这个问题真的是比较苹果和橘子！

> 2\. Oracle 和 SharePoint 可以在多大程度上相互通信，以便将其中的数据导入到另一个中或由另一个读取？

Sharepoint 提供[各种 API](http://blogs.msdn.com/b/sharepointdev/archive/2011/05/24/deciding-which-sharepoint-2010-api-to-use-jim-crowley.aspx)以使其他软件能够使用 Sharepoint 管理文档。Oracle APEX（或任何其他类型的）应用程序可以调用这些 API。

# android - 从 url 下载 12 mb 文本数据并保存到 sd 卡...发生堆内存问题。任何解决方案？

> ID：11120347
> 
> 赞同：12
> 
> 时间：2012-06-20T13:10:58.510
> 
> 标签：android, large-files, heap-memory

我使用以下两个，但不适用于 12 mb 的大量数据

```
char[] chars = new char[1024];
int len;
while((len=buffer.read(chars))>0) {
    data.append(chars,0,len);
} 
```

和

```
while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T08:00:00.310

将数据分块保存到 SD 卡中。然后，使用 Android 的内置[`XmlPullParser`](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)，您可以通过以下方式解析之前保存的文件：

1.  在刚刚下载的文件上打开一个输入流
2.  使用方法[`setInput(InputStream inputStream, String inputEncoding)`](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html#setInput%28java.io.InputStream,%20java.lang.String%29)
3.  在解析这个巨大的 XML 文件时玩得开心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:59:17.190

读取部分 1mb 数据并使用 SAXParser 进行解析

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T07:42:53.910

为什么不分块读取 XML 并将每个块保存到 SD 卡？此解决方案中的唯一问题是您需要某种 XML 流解析器，使用它您可以动态加载部分 XML 并解析它们。

可能您可以使用用于 XML 的 Streaming API，称为 StaX，并为这种情况编写自定义输入流。一些例子[http://www.vogella.com/articles/JavaXML/article.html#javastax](http://www.vogella.com/articles/JavaXML/article.html#javastax)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T05:44:34.510

1.  创建 XmlPullParser 实例
2.  使用您的输入（Reader 或 InputStream）调用 XmlPullParser.setInput；那就是你下载的数据（通过Socket或其他方式）
3.  使用 XmlPullParser 的函数来解析您的 xml 文本文件。

注意：您需要在非主线程上执行此操作，下载文件可能需要很长时间。（无论如何你不能在 UI 线程上做网络任务）。这应该是节省内存的，XmlPullParser 不会将数据缓存在内存中。无需先将文件存储到 SD 卡。

还要注意错误：连接超时、xml 中的错误等。当解析器报告它到达文档末尾时，将您的工作视为成功。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T07:42:37.793

您可能应该尝试将整个 12mb 分配到内存中，然后检查分配是否成功。然后将数据加载到缓冲区。

或者，如果您能够分部分加载文件并对其进行处理，那么这种方式应该是有效的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-02T19:31:12.137

您需要解析整个 XML 流并创建一个巨大的 DOM 对象，还是需要解析块？

如果您必须解析完整的 XML，那么您唯一能做的就是获得更多内存和 64 位操作系统。
如果没有，请使用 SAX 或 StAX 解析器直接从流中或在本地保存后获取和解析块。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-02T21:45:03.997

正如用户必须指出的那样，我建议逐块下载而不是一次下载整个文件，因为如果您在主线程上执行它可能会减慢您的所有应用程序，因此使用 asynctask 执行它并按块执行块。除此之外，我可以向您推荐一些有关该主题的帖子。

-在**[这篇](https://stackoverflow.com/questions/7332503/java-android-very-large-xml-parsing)**文章中，您可以找到有关**[如何使用 SAX的文章的链接](http://www.ibm.com/developerworks/opensource/library/x-android/)**

-在**[这个](https://stackoverflow.com/questions/5031261/parse-big-xml-file-in-android)**你可以找到另一个**[SAX 和 DOM 教程](http://onjava.com/pub/a/onjava/2002/06/26/xml.html)**

我希望这两篇文章可以帮助你实现你所需要的。或者，如果两篇文章都因您的问题而失败，那么您可能会尝试找到一种更好的方式来安排您的 XML，总有更好的方式来做，您只需要更加努力地思考。

**更新：**

-有关**[STAX](https://stackoverflow.com/questions/355909/parsing-very-large-xml-documents-and-a-bit-more-in-java)**的另一篇文章可能会有所帮助，因为它是用于 XML 处理的 STreaming Api，因此它可能最适合您的情况。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-03T06:50:26.940

我有同样的问题，我使用这个，如果可能的话，你应该分割 xml 文件，然后尝试将该文件读入字符串并解析它。

# email - 如何以编程方式检查电子邮件是否存在

> ID：11120350
> 
> 赞同：4
> 
> 时间：2012-06-20T13:11:03.737
> 
> 标签：email

如何编写代码来检查电子邮件是否存在？例如 donkey_sdh123@gmail.com、donkey_sdh123@yahoo.com 或 donkey_sdh123@lycos.com 所有这些电子邮件都不存在于 gmail、yahoo 和 lycos 数据库中。
![在此处输入图像描述](../Images/211162901accb1340958e9726bb549d3.png)

请参阅屏幕截图。donkey_sdh123@gmail.com 不好。这意味着它不存在。我怎样才能在我的项目中实现同样的东西？

欢迎使用 javascript、jquery shell 脚本、c 或 c++。没有.net。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T13:21:10.007

简而言之：这是不可能的。您最多可以尝试检查相关域是否有 MX 记录并尝试连接到其邮件服务器。即使这样也不能保证它处于工作状态。

您绝对无法以某种标准化的方式检查特定的电子邮件是否存在，因为许多服务器采用了许多伪装和别名的方法。服务器可以并且将在 SMTP 交换中报告不存在的地址，因为许多原因在`VRFY`和`MAIL`/中都是有效的`RCPT`。你能得到的唯一确定的答案是，如果电子邮件被`MAIL`/拒绝，它就是无效的`RCPT`，但被接受并不能确定它是有效的，因为它可以在电子邮件处理过程中被拒绝。滥用`MAIL`/`RCPT`没有实际发送任何内容也可能导致您被阻止。

如果您想验证用户提供的电子邮件，最好的办法是在那里发送确认信。

如果您真的需要确认的工作电子邮件，您还应该查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:17:57.293

可以通过 telnet 连接到远程 smtp 服务器：

[http://www.yuki-onna.co.uk/email/smtp.html](http://www.yuki-onna.co.uk/email/smtp.html)

唯一的问题是，许多邮件服务器不接受 smtp（例如 yahoo），并且由于有关地址是否对垃圾邮件发送者有价值的信息，因此很容易发现存在哪些电子邮件地址不符合任何电子邮件主机的利益。

您可以使用 ping 或其他网络扫描对域是否存在进行基本检查，并且您可以使用 Google API 搜索电子邮件地址，以防它在互联网上明确列出。但是你和所有的骗子都在做同样的事情，所以可能不值得尝试。

需要注意的另一件事是，许多电子邮件提供商允许用户提供派生地址、临时地址或别名地址，这些地址可以在有限的时间或使用范围内工作，但它们本身不是邮箱。在这种情况下，即使是有效的检查器也会认为该地址不存在，即使用户会收到一封发送给它的电子邮件。

由于过期地址可能不会被释放（以防止人们收到以前用户的邮件），因此会有误报的来源（检查说是但错误），以及假阴性（检查说没有但错误） ，以及被视为垃圾邮件发送者的所有摩擦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:56:29.283

看到这个代码我从网上得到的。

```
 class SmtpValidator {

    private $options = array(
            "port" => 25,
            "timeout" => 1,  // Connection timeout to remote mail server.
            "sender" => "info@webtrafficexchange.com",
            "short_response" => false,
    );

    /**
     *  Override the options for those specified.
     */
    function __construct($options = null) {
        if (!empty($options)) {
            if (is_array($options)) {
                foreach ($options as $key => $value) {
                    $this->options[$key] = $value;
                }
            }
        }
    }

    /**
     *  Validate the email address via SMTP.
     *  If 'shore_response' is true, the method will return true or false;
     *  Otherwise, the entire array of useful information will be provided.
     */
    public function validate($email, $options = null) {

        $result = array("valid" => false);
        $errors = array();

        // Email address (format) validation
        if (empty($email)) {
            $errors = array("Email address is required.\n");
        } else if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            $errors = array("Invalid email address.\n");
        } else {
            list($username, $hostname) = split('@', $email);
            if (function_exists('getmxrr')) {
                if (getmxrr($hostname, $mxhosts, $mxweights)) {
                    $result['mx_records'] = array_combine($mxhosts, $mxweights);
                    asort($result['mx_records']);
                } else {
                    $errors = "No MX record found.";
                }
            }

            foreach ($mxhosts as $host) {
                $fp = @fsockopen($host, $this->options['port'], $errno, $errstr, 
                                       $this->options['timeout']);
                if ($fp) {
                    $data = fgets($fp);
                    $code = substr($data, 0, 3);
                    if($code == '220') {
                        $sender_domain = split('@', $this->options['sender']);
                        fwrite($fp, "HELO {$sender_domain}\r\n");
                        fread($fp, 4096);
                        fwrite($fp, "MAIL FROM: <{$this->options['sender']}>\r\n");
                        fgets($fp);
                        fwrite($fp, "RCPT TO:<{$email}>\r\n");
                        $data = fgets($fp);
                        $code = substr($data, 0, 3);
                        $result['response'] = array("code" => $code, "data" => $data);
                        fwrite($fp, "quit\r\n");
                        fclose($fp);
                        switch ($code) {
                            case "250":  // We're good, so exit out of foreach loop
                            case "421":  // Too many SMTP connections
                            case "450":
                            case "451":  // Graylisted
                            case "452":
                                $result['valid'] = true;
                                break 2;  // Assume 4xx return code is valid.
                            default:
                                $errors[] = "({$host}) RCPT TO: {$code}: {$data}\n";
                        }
                    } else {
                        $errors[] = "MTA Error: (Stream: {$data})\n";
                    }
                } else {
                    $errors[] = "{$errno}: $errstr\n";
                }
            }
        }
        if (!empty($errors)) {
            $result['errors'] = $errors;
        }
        return ($this->options['short_response']) ? $result['valid'] : $result;
    }
} 
```

# jquery - Jquery 在 Firefox 中不起作用

> ID：11120352
> 
> 赞同：0
> 
> 时间：2012-06-20T13:11:10.930
> 
> 标签：jquery, firefox

我是 jquery 的新手，但已经设法在我的网站上制作了一个显示功能并将鼠标悬停在一个 div 上。不幸的是，它只适用于 Chrome 和 Safari 而不是 Firefox：

[http://kommunal.dk/konference/konference.html#](http://kommunal.dk/konference/konference.html#)

我知道我的编码有些混乱，但是任何回复都将不胜感激。开始：

在一个 div 我有：

```
<div id="tilmeldingknap" >Tilmelding</div><br />

    <script type="text/jscript">

    $('#tilmeldingknap').hover(
        function() {
            $(this).css('cursor','pointer');
        }, 
        function() {
            $(this).css('cursor','auto');
        }
    );

    $('#tilmeldingknap').click(
        function() {
             $('#konference-tilmelding').show('slow');
             $('#tilmeldingknap').hide(); 
             return false;
        }
    );
</script> 
```

在我的标题中，我有：

```
<script type="text/javascript" src="../js/jquery-1.7.1.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:14:59.087

```
<script type="text/jscript"> 
```

应该

```
<script type="text/javascript"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:12:55.560

删除`type="text/jscript"`，或使用`type="text/javascript"`. [JScript](http://msdn.microsoft.com/en-us/library/hbxc2t98%28VS.85%29.aspx)是微软对 ES3 的实现。JavaScript 不是 JScript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:40:19.790

在链接之前使用 jQuery，并且隐藏应该在文档就绪事件处理程序中。

SCRIPT5009：“$”未定义 konference.html，第 16 行字符 6 SCRIPT1010：预期标识符 konferencetilmelding.js，第 1 行字符 31 SCRIPT5009：“getTMqs”未定义 konference.html，第 515 行字符 1

从您的页面：

```
<script type="text/javascript">

     $('#konference-tilmelding').hide("fast");

</script>

<script type="text/javascript" src="file:///Macintosh HD/Users/jakobthuemoes/Documents/Webdesign/Kommunal/web/portal/js/generelle.js"></script>
2

    <script type="text/javascript" src="../js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="file:///Macintosh HD/Users/jakobthuemoes/Documents/Webdesign/Kommunal/web/portal/js/jqModal.js"></script>
    <script type="text/javascript" src="file:///Macintosh HD/Users/jakobthuemoes/Documents/Webdesign/Kommunal/web/portal/js/fade-plugin.js"></script>
    <script type="text/javascript" src="../js/konferencetilmelding.js"></script>
    <script type="text/javascript" src="file:///Macintosh HD/Users/jakobthuemoes/Documents/Webdesign/Kommunal/web/portal/js/kommunal.js"></script>
    <script type="text/javascript" src="file:///Macintosh HD/Users/jakobthuemoes/Documents/Webdesign/Kommunal/web/portal/js/jquery.validate.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T13:13:25.203

你那里有一些无效的 HTML，

```
<div id="tilmeldingknap" >Tilmelding</div><br /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T13:15:20.053

许多链接都位于您的 PC 上；

```
<script type="text/javascript" src="file:///Macintosh HD/Users/jakobthuemoes/Documents/Webdesign/Kommunal/web/portal/js/jqModal.js"></script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T13:15:46.810

您的代码中有大量本地文件链接，请确保您的所有 css / js 链接都是相对的，这样您就不会遇到这个问题。

例如，您应该更改：

```
<script type="text/javascript" src="file:///Macintosh HD/Users/jakobthuemoes/Documents/Webdesign/Kommunal/web/portal/js/generelle.js"></script> 
```

到：

```
<script type="text/javascript" src="../js/generelle.js"></script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T13:16:44.920

全部正确：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

```
<div id="tilmeldingknap" >Tilmelding</div><br />

<script type="text/javascript">
    $('#tilmeldingknap').hover(function() {
        $(this).css('cursor','pointer')
    ;}, function() {
        $(this).css('cursor','auto');
    });
    $('#tilmeldingknap').click(function() {
       $('#konferencetilmelding').show('slow');$('#tilmeldingknap').hide();        
       return false;
    });
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-20T13:16:47.087

第一行不应该是：

```
<div id="tilmeldingknap" >Tilmelding</div><br />

<script type="text/javascript"> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-20T13:24:57.367

试试这个

```
$(document).ready(function(){
    $('#tilmeldingknap').hover(
        function() {
            $(this).css('cursor','pointer');
        }, 
        function() {
            $(this).css('cursor','auto');
        }
    );
});

$('#tilmeldingknap').click(
        function() {
             $('#konference-tilmelding').show('slow');
             $('#tilmeldingknap').hide(); 
             return false;
        }
    ); 
```

# sql - 使用 Sybase 执行 Ant sql 任务时出错

> ID：11120353
> 
> 赞同：2
> 
> 时间：2012-06-20T13:11:13.490
> 
> 标签：sql, ant, sybase

我编写了一个构建文件，它在某些时候将对象安装到 Sybase 数据库中。

代码由我们的开发人员提供，我不允许修改它。`isql`如果使用命令手动运行给定的 SQL ，它可以工作。

这是安装给定对象的构建文件的一部分：

```
<sql
    driver="${db.driver}" url="${db.url}" userid="${db.user}"
    password="${db.password}" src="${file}"
    print="true" delimiter="go" delimitertype="row"
    classpathref="sybase.lib.path" output="${file}.out"
    errorproperty="install.failed" onerror="continue" keepformat="true" /> 
```

尽管该解决方案在大多数情况下都有效，但每次我尝试运行包含双引号 (") 的脚本时都会失败。

例如，如果 SQL 脚本包含如下内容：

```
declare @var varchar(30)
set @var = "SOME STRINGS" 
```

它失败并出现错误：

```
[sql] com.sybase.jdbc3.jdbc.SybSQLException: Invalid column name 'SOME STRINGS'. 
```

有人解决了这个问题吗？

我已阅读[Ant`sql`任务](http://ant.apache.org/manual/Tasks/sql.html)的文档。我正在使用 Ant 1.8.2 版。

我已经使用以下 jdbc 驱动程序进行了测试：

*   com.sybase.jdbc3.jdbc.SybDriver
*   net.sourceforge.jtds.jdbc.Driver

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:36:42.040

建立会话后，默认情况下它的设置 QUOTED_IDENTIFIER 设置为 true。我相信您可以使用服务器设置进行调整，但无论如何，您可以通过将其附加到 url 来设置会话：

```
?SQLINITSTRING=set quoted_identifier off 
```

所以网址可能看起来像：

```
"jdbc:sybase:Tds:<server>:<port>/<db>?SQLINITSTRING=set quoted_identifier off" 
```

如果您有多个设置，请使用 & 符号加入它们`&`。另[见](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc36272.1570/html/commands/X64136.htm)：

> **引用标识符**
> 
> 确定 Adaptive Server 是否识别双引号内的定界标识符。默认情况下，quoted_identifier 是关闭的，所有标识符必须：
> 
> *   符合有效标识符的规则。
>     
>     
> *   用括号括起来。
>     
>     
> 
> 如果您使用 setquoted_identifier on，双引号的行为方式与括号的行为方式相同，并且您可以使用以非字母字符开头的表、视图和列名称，包括在其他情况下不允许使用的字符或保留字，方法是将其括起来双引号内的标识符。分隔标识符不能超过 28 字节，可能并非所有前端产品都能识别，并且在用作系统过程的参数时可能会产生意想不到的结果。
> 
> 当quoted_identifier 打开时，双引号内的所有字符串都被视为标识符。在字符或二进制字符串周围使用单引号。

# java - 如何确认 ScheduledExecutorService 设置正确（并且将来仍在运行）

> ID：11120354
> 
> 赞同：1
> 
> 时间：2012-06-20T13:11:15.437
> 
> 标签：java, scheduling

我有一个 Java 方法，它使用 ScheduledExecutorService 来安排任务定期运行。

我想包含代码来检查：

1.  任务调度成功（即返回true）
2.  该`run()`部分被尝试（现在和将来），如果运行部分不起作用，则调用方法：doOtherStuff()

我正在考虑使用 try/catch 来实现这一点。我的想法是否正确？

我的代码是这样的：

```
private void scheduleCheck()
{
    ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();

    executor.scheduleAtFixedRate(new Runnable() 
    {
        // Task to be scheduled
        public void run() 
        {               
            periodicCheck();
        }
    }, 1, 10, TimeUnit.SECONDS);
} 
```

对于 1\. 我是否应该在调度任务的代码周围添加一个 try/catch，如果“try”部分运行到最后，则布尔变量设置为 true。

对于 2\. 我可以再次在 run() 部分中使用 try/catch，并在 catch 位中调用一个方法（如果运行失败）。

我在想一些事情。谁能看到我遗漏的任何东西，或者我的逻辑中有任何明显的缺陷？

```
 private boolean scheduleCheck()
{
    boolean isScheduled = false;
    try
    {
        ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();
        executor.scheduleAtFixedRate(new Runnable() 
        {
            // Task to be scheduled
            public void run() 
            {               
                try
                {
                    periodicCheck();
                }
                catch(java.lang.exception e)
                {
                    doOtherStuff();
                }
            }
        }, 1, 10, TimeUnit.SECONDS);
        isScheduled = true;
    }
    catch(java.lang.exception e)
    {
    }
    return isScheduled;
} 
```

# jquery - 你如何停止一个` 更新消息一次后的标记

> ID：11120356
> 
> 赞同：0
> 
> 时间：2012-06-20T13:11:26.780
> 
> 标签：jquery, jsf

如何在`<p:poll interval='3' update='messages'/>`标签更新一次消息后停止标签，然后在关闭消息时重新启动它？

基本上，我有这个代码：

```
<pe:layoutPane id="south" position="south" size="70">
   <p:messages id="messages" autoUpdate="true" >  
      <script>
          jQuery('#messages').effect("pulsate", {times:5}, 1000 );
          jQuery('#messages').show();
       </script>
  </p:messages>
  <h:form id="pollF">
      <p:poll interval="10" listener="#{alarmsBean.checkAlarms()}" update=":messages" partialSubmit="true" widgetVar="poll"/>
  </h:form>
</pe:layoutPane> 
```

看起来 Primefaces 有能力调用 poll.stop() 和 poll.start() 但问题是它们展示了按钮上的 onclick 事件的功能。

我的问题是我这里没有按钮并且不想要它们。我希望 poll.stop() 在消息标签更新一次时被调用。我希望 poll.start() 在消息标签关闭时被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:12:32.343

包括一个外部面板并通过投票对其进行更新。然后在面板中设置您的条件以停止投票。不确定这有多有效，但有效。

```
<p:panel id="topPanel" style="border-color: white" > 
      <script>
            function stopMe(){
                new window().refresh();
                //poll.stop(); // I just refresh the window that stops the poll as I expereinced issue with pool.stop() while using dynamically
            }
          </script>
        <c:if test="${bean.var}"> //set a boolean after setting your message in your bean
           <script> stopMe() </script>
       </c:if>
        <p:poll interval="10" widgetVar="poll"  autoStart="true" update=":topPanel, :messages" />

</p:panel> 
```

# java - JTree - JLabel 更新

> ID：11120357
> 
> 赞同：0
> 
> 时间：2012-06-20T13:11:26.860
> 
> 标签：java, swing, jlabel, jtree

JTree 的某些节点的标签表示在计数后长度增加的计数器。这导致缩写（...）。想象一下，您有一棵树，其中每个节点都可以随时更改其标签大小。

树每 100 毫秒在一个单独的线程中重新绘制 (tree.repaint()) 以跟踪更改的图标和更改的标签，这些更改是跟踪事件和及时进展的结果。我尝试了一种方法，在每个树节点上用 nodeChanged() 调用替换了 repaint() 方法。树开始闪烁。

为了根据新长度更新这些节点标签，我需要做什么？我已经在扩展 DefaultTreeCellRenderer。

```
 public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus) {
    DefaultMutableTreeNode node;
    Object                 nodeValue;
    TestComponent          currentComponent;

    super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);

    node      = (DefaultMutableTreeNode) value;
    nodeValue = node.getUserObject();

    if(nodeValue instanceof TestComponent) {
        currentComponent = (TestComponent) nodeValue;
        setText(currentComponent.getLabel());

    }       
    return this;
} 
```

为了“修复”“setText”的问题，我应该在 CellRenderer 中做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:37:28.567

> 树每 100 毫秒在一个单独的线程中重新绘制 (tree.repaint())，以跟踪更改的图标和更改的标签，这是跟踪事件和及时进展的结果

错了，`TreeModel`应该根据跟踪的事件触发事件，并且`JTree`会自动更新。这些更改当然应该发生在 EDT 上，而不是单独的`Thread`.

不幸的是， 的大小`JTree`（以及其中包含的标签的大小）将受到包含 的父容器的`JTree`限制。而且这个尺寸不会随着你的尺寸增长而自动`JTree`增长。

# c# - Visual C++ 中的 .NET 接口类型定义

> ID：11120358
> 
> 赞同：0
> 
> 时间：2012-06-20T13:11:27.027
> 
> 标签：c#, c++-cli, clr

我需要用 Visual C++ 编写一个接口，它将在 C# 项目中使用。我需要在 C# 中使用 out 参数，我将如何制作 C++ 签名？

类似 C++ 的代码

```
public interface class Iface
{
public:
    System::Object^ Method([out] bool there);
}; 
```

和 C# 必须是

```
public class TestObj : Library.Iface
    {
        object Library.Iface.Method(out bool there)
        {
            there = true;
            return null;
        }
    } 
```

我将如何编写我的 C++ 接口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:22:58.400

```
using namespace System;
using namespace System::Runtime::InteropServices;
interface class Iface
{
    Object^ Method([Out] bool% there);
}; 
```

# python - Python 文件对象的新类和内置类型：我想错了吗？

> ID：11120363
> 
> 赞同：0
> 
> 时间：2012-06-20T13:11:49.510
> 
> 标签：python, class, object

我编写了一个 Python 脚本，用于以几种不同的方式合并许多数据文件。这是我的第一个 Python 脚本，也是我第一次尝试 OOP，我怀疑我一直在以一种功能性但不是最佳的方式来考虑对象和类。

我为源文件创建了一个类，并为源文件中的记录行创建了一个子类。现在，随着我对 Python 中的一切都是对象的新理解，我怀疑我通过为文件创建一个类来创建不必要的复杂性，而内置类型不仅存在，而且我每次都在使用它我打开一个文件。

不幸的是，从文档中我不清楚如何将新属性、方法和子类分配给文件的内置类型。我也不明白文件数据类型与类有何不同；我只是将两者都理解为用于创建具有特定属性的对象的“工厂”。

```
class SrcFile:
   self.name = which  
   self.terminals = set([])

def <a few methods>():
   with open(self.name) as file:
      <do some stuff and return something>

class Record(SrcFile):
      <methods>

for file in files:
   file = SrcFile(file)
   if <conditions on values from SrcFile methods>:
      with open(file) as file:
         for line in file:
            if <regexp match>:
               record = Record(line)
               <apply Record() methods>
               <write to tempfiles>

<merge tempfiles to stdout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:37:31.150

> 不幸的是，从文档中我不清楚如何将新属性、方法和子类分配给文件的内置类型。

专业提示：**你没有**。（在某些情况下，您可以考虑修改内置文件类型，但这对于您当前的问题来说太过分了）

查看您示例的最后一部分，似乎我们可以丢弃您的 Record 和 SrcFile 类并像这样重写它：

```
def check_conditions(file):
    #return true if SrcFile conditions are met

def convert_record(line):
    #generate the string you want to print for the record

for file in files:
    if check_conditions(file):
        with open(file) as file:
            for line in file:
                if <regexp match>:
                    record = convert_record(line)
                    <write to tempfiles> 
```

Where`check_conditions`检查包含在 SrcFile 类中的条件并`convert_record`为 Record 行生成输出。

# php - PHP + Preg_replace ：删除电子邮件中“+”之后的部分

> ID：11120364
> 
> 赞同：-3
> 
> 时间：2012-06-20T13:11:55.373
> 
> 标签：php, email, preg-replace

为了推广网站，我允许订阅者通过电子邮件邀请朋友并奖励他们。

但是，其中一些人使用了一个电子邮件列表，例如：

```
user@example.com, user+1@example.com, user+2@example.com 
```

并且所有电子邮件所指`user@example.com`的都是有效的。

什么是 preg_replace 模式，它删除了“+”号之后的部分，这样我就可以在此之后分解并使用 array_unique 删除重复的电子邮件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-05T13:31:33.950

简单的

```
$email = preg_replace('/\+[^@]*/i' , '' , $email); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:42:56.353

我终于明白了。只需使用以下方法删除 '+' 和 '@' 之间的部分：

```
preg_replace('/\+(.)*@/', '@', $emails); 
```

希望它会有所帮助。

PS：我很抱歉巴特你以为我给你我的工作要做：如果我没有提供任何代码，那是因为它们都不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:16:15.573

试试看

```
preg_replace('/(.+)\+.+(@.+)/', '$1$2', $mail); 
```

如果`user+@example.com`也应该更换，你可以采取

```
preg_replace('/(.+)\+.*(@.+)/', '$1$2', $mail); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T13:23:32.013

要在您的情况下使用 preg_replace，您可以执行以下操作：

```
$email = 'user+1@example.com';
$email = preg_replace("#(.+)\+.*@(.*)#", '$1@$2', $email); 
```

# javascript - 在javascript中调用函数

> ID：11120368
> 
> 赞同：0
> 
> 时间：2012-06-20T13:12:09.883
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 对象/函数/类声明周围的括号是什么意思？](https://stackoverflow.com/questions/440739/what-do-parentheses-surrounding-a-javascript-object-function-class-declaration-m)

为什么以下代码不起作用

```
function func() {
    document.writeln("HELLO");
}(); 
```

更新：
为什么在下面的例子中 O 不应该在“function{}”周围使用括号？

```
var v = function() {
   return "HELLO";
}(); 
```

document.writeln(v); ​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:12:39.337

使用这个：

```
function func() {
    document.writeln("HELLO");
}

func(); 
```

或这个：

```
(function() {
    document.writeln("HELLO");
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:14:27.513

尝试：

```
(function() {
  document.writeln('HELLO');
})(); 
```

# android - 片段交易动画完成后执行动作

> ID：11120372
> 
> 赞同：58
> 
> 时间：2012-06-20T13:12:17.653
> 
> 标签：android, android-fragments, android-animation

我想在动画完成后设置按钮可见性。

这就是所谓的动画：

```
android.support.v4.app.FragmentTransaction fAnimation = this.getActivity().getSupportFragmentManager().beginTransaction();
fAnimation.setCustomAnimations(android.R.anim.slide_in_left, R.anim.pull_out_to_left);
if (this.isVisible()) {
    fAnimation.hide(this);
    fAnimation.commit();
}

// code that will be executed when the fragment is gone (after the animation is over) 
```

有什么方法可以附加一个监听器以知道我的片段何时消失？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-14T00:23:12.840

@nmw 在他的答案中实现的动画器是在 API 级别 11 中添加的，并且不能与 Android 支持库实现的片段一起使用。

为了收听 Fragment 动画事件，我扩展了支持库的`Fragment`类并覆盖`onCreateAnimation`，将自定义 AnimationListener 附加到返回的 Animation 对象：

```
public class MyFragment extends android.support.v4.app.Fragment {

    private static final String TAG = "MyFragment";

    @Override
    public Animation onCreateAnimation(int transit, boolean enter, int nextAnim) {

        Animation anim = AnimationUtils.loadAnimation(getActivity(), nextAnim);

        anim.setAnimationListener(new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {
                Log.d(TAG, "Animation started.");
                // additional functionality 
            }

            @Override
            public void onAnimationRepeat(Animation animation) {
                Log.d(TAG, "Animation repeating.");
                // additional functionality
            }

            @Override
            public void onAnimationEnd(Animation animation) {
                Log.d(TAG, "Animation ended.");
                // additional functionality
            }
        });

        return anim;
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-20T13:39:13.153

您需要继承 Fragment 并覆盖 onCreateAnimator，然后您可以从 XML 加载这些动画并将侦听器附加到它们。

例如

```
public class MyFragment extends Fragment
{
    @Override
    public Animator onCreateAnimator(int transit, boolean enter, int nextAnim)
    {
        final int animatorId = (enter) ? R.anim.in_anim : R.anim.out_anim;
        final Animator anim = AnimatorInflater.loadAnimator(getActivity(), animatorId);
        anim.addListener(new AnimatorListenerAdapter()
        {
            @Override
            public void onAnimationStart(Animator animation)
            {
                ...
            }

            @Override
            public void onAnimationEnd(Animator animation)
            {
               ...
            }
        });

        return anim;
   } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-02T12:04:08.130

结合上面的答案是我成功使用支持库片段的示例。

只需扩展 MenuFragment 并将侦听器设置为获取之后执行的回调。

```
public class MenuFragment extends Fragment {

private WeakReference<OnMenuClosedListener> onMenuClosedListener;

@Override
public Animation onCreateAnimation(int transit, boolean enter, int nextAnim) {
    Animation anim = null;
    if (enter) {
        anim = AnimationUtils.loadAnimation(getActivity(), R.anim.anim_slide_in_top);
    } else {
        anim = AnimationUtils.loadAnimation(getActivity(), R.anim.anim_menu_slide_out_top);
        anim.setAnimationListener(new AnimationListener() {
            @Override public void onAnimationStart(Animation animation) {
            }
            @Override public void onAnimationRepeat(Animation animation) {
            }
            @Override public void onAnimationEnd(Animation animation) {
                onMenuClosed();
            }
        });
    }

    // NOTE: the animation must be added to an animation set in order for the listener
    // to work on the exit animation
    AnimationSet animSet = new AnimationSet(true);
    animSet.addAnimation(anim);

    return animSet;
}

private void onMenuClosed() {
    if (this.onMenuClosedListener != null) {
        OnMenuClosedListener listener = this.onMenuClosedListener.get();
        if (listener != null) {
            listener.onMenuClosed();
        }
    }
}

public void setOnMenuClosedListener(OnMenuClosedListener listener) {
    this.onMenuClosedListener = new WeakReference<MenuFragment.OnMenuClosedListener>(listener);
}

/**
 * Callback for when the menu is closed.
 */
public static interface OnMenuClosedListener {

    public abstract void onMenuClosed();

} 
```

}

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-02T23:26:53.717

在 API 26（和支持库）中添加，您可以使用

```
 FragmentTransaction runOnCommit (Runnable runnable); 
```

例如：

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.setCustomAnimations(R.anim.enter_from_right, R.anim.exit_from_left);
ft.show(YourFragment);
ft.commit();
ft.runOnCommit(() -> Your_Action_Here); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-24T21:30:35.237

我必须在 Xamarin 中执行此操作。我的情况是片段动画结束后我需要回调。以下是我如何让它在没有任何闪烁的情况下工作（这是 C#/Xamarin）：

```
 public override Animation OnCreateAnimation(int transit, bool enter, int nextAnim)
    {
        Animation anim = base.OnCreateAnimation(transit, enter, nextAnim);

        if (anim == null && nextAnim != 0) {
            anim = AnimationUtils.LoadAnimation(Activity, nextAnim);
        }

        anim.SetAnimationListener(this);
        return anim;
    }

    public void OnAnimationEnd(Animation animation)
    {
    }

    public void OnAnimationRepeat(Animation animation)
    {
    }

    public void OnAnimationStart(Animation animation)
    {
    } 
```

笔记：

*   父片段必须实现`Animation.IAnimationListener`
*   您必须返回一个`AnimationSet`否则`FragmentManager`将覆盖您的侦听器并且回调不会触发。

# android - Android上的Corona SDK音频调谐器？

> ID：11120377
> 
> 赞同：2
> 
> 时间：2012-06-20T13:12:38.477
> 
> 标签：android, lua, coronasdk

我需要实时分析来自麦克风的输入数据。现在，我设法通过 media.startTuner() 和 media.getTunerVolume() 实现了这一点，而且效果很好。但是，我也注意到我需要的 Android 设备不支持此功能：http: [//developer.anscamobile.com/reference/index/objectgettunervolume](http://developer.anscamobile.com/reference/index/objectgettunervolume)

我尝试查看一些openAL“秘密”功能但没有运气： http: [//www.coronalabs.com/blog/2011/07/27/the-secretundocumented-audio-apis-in-corona-sdk/](http://www.coronalabs.com/blog/2011/07/27/the-secretundocumented-audio-apis-in-corona-sdk/)

我了解 openAL 不允许您查询缓冲区。

有没有人对此有任何想法 - 它会得到支持吗？有什么解决方法吗？我完全错了，有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:34:20.027

Corona SDK 在 android 上没有音频调谐器...

在论坛上人们要求这样做，但他们没有给出实施这个的时间表，或者即使他们有实施这个的意图......

很抱歉，现在对您的问题的答复是：除非您拥有 Corona Enterprise 并使用本机 API，否则无法做到这一点。

# android - HTC one x 上的活动生命周期处理有问题吗？

> ID：11120381
> 
> 赞同：0
> 
> 时间：2012-06-20T13:12:42.470
> 
> 标签：android, android-activity

我有一个已经在市场上销售一段时间的 android 应用程序，我现在正在大修。我正在使用新的 One x 进行测试，并注意到一些奇怪的事情......

1.  如果我在手机上运行，​​请单击主页按钮，以便应用程序进入后台，我会得到我在 onPause 等中的正常打印输出。onDestroy 不会被调用，这使您假设该过程仍在运行。

2.  但是，当我进入设置/应用程序/运行时，它没有列出！！只要我在“正在运行”屏幕上，我会在 android 日志中每隔几秒就会得到一个重复打印输出：

    06-20 15:04:42.435：INFO/RunningState(16694)：未知的非服务进程：XXX #16558

3.  如果我然后再次单击我的应用程序图标，我的生命周期方法会被调用，就好像我的应用程序没有启动一样，即 onCreate、onResume 等会再次被调用！！

我不知道为什么会这样，它不会发生在 Galaxy2 或我刚刚尝试过的 Note 上，我在那里得到了“预期的”生命周期调用。

有人有什么想法吗？对我来说，电话好像坏了，但我只是一个人，我还没有找到任何其他报告，所以我不明白这是怎么回事......

编辑：还在 HTC Legend 上测试了相同的代码，没有问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:55:46.107

There's no garantee that onDestroy will be called when you exit / finish an activity:

From [http://developer.android.com/reference/android/app/Activity.html#onDestroy()](http://developer.android.com/reference/android/app/Activity.html#onDestroy())

> There are situations where the system will simply kill the activity's hosting process without calling this method (or any others) in it, so it should not be used to do things that are intended to remain around after the process goes away.

Also see this thread here in SO

[Activity OnDestroy never called?](https://stackoverflow.com/questions/4449955/ondestroy-never-called)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:05:43.517

在 Android ICS 中，为开发人员提供了一些新设置，其中包括“不保留活动”。它默认被清除，但您的设备可能以其他方式配置。尝试打开/关闭此复选框，看看您的活动生命周期会发生什么。

# ios - 移动 SDK 的 Salesforce OAuth 回调 URL

> ID：11120383
> 
> 赞同：1
> 
> 时间：2012-06-20T13:12:43.923
> 
> 标签：ios, xcode, oauth, salesforce

我知道，在使用 OAuth 时，您可以通过在 ios 中使用自定义架构来捕获回调 URL。

使用 Salesforce 模板我找不到自定义架构 - Salesforce 如何知道在 iOS 上使用 Salesforce 移动 SDK 来处理原生应用程序和混合应用程序？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:34:44.893

为您的应用程序创建一个[自定义 URL](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)`oauth_callback`后，您可以在 OAuth 流程的请求令牌步骤中指定一个 URL 。这样 Salesforce 就会知道在设备上重定向到哪里。例如，在用户验证您的请求令牌后`myappname://salesforce-callback`，它将拦截。`oauth_verifier`

进一步澄清：一旦用户通过输入 Salesforce 用户名和密码授权您的请求令牌，他们将制定 HTTP 重定向响应到指定的回调。如果回调重定向指向映射到用户设备上的应用程序的 URL；iOS 拦截它并将其传递给应用程序。

# c# - 关联的 XML 方案允许的 XMLNode 子级

> ID：11120385
> 
> 赞同：1
> 
> 时间：2012-06-20T13:12:48.760
> 
> 标签：c#, xml, xsd

我需要一种方法来了解与 XML 文件关联的 XML 模式所允许的 XmlNode 的子级是什么。C#中有简单的方法吗？

我需要它来实现一种上下文编辑器，向用户建议当前编辑的 XML 节点允许的子级。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:06:02.893

您可以尝试使用[XmlSchemaValidator 类](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemavalidator.aspx#Y2272)-

它根据 XML 模式**验证 XML**数据`push-based manner`

请参阅“ [GetExpectedParticles](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemavalidator.getexpectedparticles.aspx) ”函数，其中的示例说明 -

> 如果在验证标题元素之后但在验证描述元素之前调用 GetExpectedParticles 方法，它将返回一个数组，其中包含一个表示描述元素的 XmlSchemaElement 对象。

您也可以尝试运行提供的示例。

# javascript - 使用 Javascript 或 jQuery 将数组字符串转换为对象

> ID：11120388
> 
> 赞同：3
> 
> 时间：2012-06-20T13:12:52.583
> 
> 标签：javascript, jquery, object

我列出`id`了页面上的每个 DOM 元素：

```
 var listy = $("*[id]").map(function(){
    return this.id;
 }).get().join(','); 
```

因此，listy 的示例输出将是：

```
"home,links,stuff,things" 
```

现在我想将 listy 转换`Array`为`Object`，例如：

```
function toObject(arr) {
    var rv = {};
    for (var i = 0; i < arr.length; ++i)
        if (arr[i] !== undefined) rv[i] = arr[i];
    return rv;
} 
```

但这会将所有内容都放在一个`Object`类似的位置：

```
0: "h", 1: "o", 2: "m", etc... 
```

我显然想要的是：

```
0: "home", 1: "links, 2: "stuff", etc.. 
```

我哪里错了，我得到了`toObject()`来自：[将数组转换为对象](https://stackoverflow.com/questions/4215737/convert-array-to-object)

这让我想到了一个类似但不同的问题：

[将页面元素索引到 JSON 对象？还是每次都使用 jQuery 选择器呢？](https://stackoverflow.com/questions/11143142/indexing-page-elements-to-json-object-or-jquery-selector-it-every-time)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T13:15:09.693

你`listy`是一个字符串，而不是一个数组。将您的第一个代码块更改为：

```
 listy = $("*[id]").map(function(){
    return this.id;
 }).get(); 
```

[http://jsfiddle.net/P7YvU/](http://jsfiddle.net/P7YvU/)

至于创建索引整个文档的对象：出于什么目的？当您可以直接解析 DOM 时，自己执行此操作几乎没有什么优势——尤其是因为 jQuery 使它变得如此简单。`DOMJSONTHING.body.div.h1`您已经可以调用`$('document > body > div > h1').attr('id')`并获得相同的结果，而不是调用来获取值“home”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T09:30:31.367

这可能是您可以编写的用于获取对象的最短代码：

```
// your existing code (a tiny bit changed)
var idArray = $("*[id]").map(function() {
    return this.id;
}).get();

// this one liner does the trick
var obj = $.extend({}, idArray); 
```

## 解决问题的更好方法 - 关联数组

但是正如我在其他答案中的评论中所读到的那样，这个对象结构在您的情况下可能不是最好的。你想要的是检查一个特定的 ID 是否已经存在。这个对象

```
{
    0: "ID1",
    1: "otherID",
    ...
} 
```

不会有太大帮助。一个更好的对象将是您的关联数组对象：

```
{
    ID1: true,
    otherID: true,
    ...
} 
```

`if`因为这将使通过在语句中使用此条件进行简单检查来确定特定 ID 变得简单：

```
if (existingIDs[searchedID]) ... 
```

所有不存在的 ID 都将不符合此条件，并且所有确实存在的 ID 都将返回`true`。但是要将您的 ID 数组转换为该对象，您应该使用以下代码：

```
// your existing code (a tiny bit changed)
var idArray = $("*[id]").map(function() {
    return this.id;
}).get();

// convert to associative "array"
var existingIDs = {};
$.each(idArray, function() { existingIDs[this] = true; }); 
```

或给定所需的结果，您可以对其进行更多优化：

```
var existingIDs = {};
$("*[id]").each(function() { existingIDs[this.id] = true; }); 
```

这将最大限度地加快您现有的 ID 搜索速度。只要您可以在 O(1) 中获取有关 ID 存在的信息，检查 ID 唯一性可能不需要分层对象结构。上层关联数组对象将为您提供这种超快速的可能性。当您创建一个具有新 ID 的新对象时，您可以轻松地将其添加到现有的关联数组对象中，只需执行以下操作：

```
existingIDs[newID] = true; 
```

就是这样。新 ID 将与其他 ID 一起缓存在同一个关联数组对象中。

> ***注意****：我可以看到您的代码隐含了全局（`listy`变量）。小心并尽可能避免。*

## 性能测试

正如[@Blazemonger 所暗示的那样](https://stackoverflow.com/questions/11120388/convert-array-to-object-with-javascript-or-jquery/11120421#comment17279080_11120421)，这并不成立，我会说这种说法可能是正确的。这一切都归结为：

*   您拥有的具有 ID 的元素数量
*   您想要进行的搜索次数

如果第一个通常像在常规 HTML 页面中一样低，其中 CSS 类比 ID 更频繁地使用，并且如果第二个足够大，那么[这个性能测试](http://jsperf.com/associative-array-vs-jquery-calls)证明关联数组可以比单独使用 jQuery 快一点。此测试中使用的 HTML 是 Stackoverflow 在移动网站上的问题列表的副本（因此我从源代码中删除脚本的工作较少）。我特意举了一个真实世界网站内容的例子，而不是准备好的测试用例，可以故意制造它以支持一种或另一种解决方案。

如果您的搜索规模要小得多，那么我使用直接的 jQuery 会更快，因为它不需要启动关联数组准备并立即开始搜索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T13:15:28.327

```
var str = 'home,links,stuff,things',
    obj = {};

$.each(str.split(','), function(index, val) {
    obj[index] = val;
}); 
```

**[演示](http://jsfiddle.net/WTTsB/7/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T11:22:37.653

看看这个[http://jsfiddle.net/ryan_s/XRV2m/](http://jsfiddle.net/ryan_s/XRV2m/)

它会

1.  创建一个缓存来存储现有元素的 id，这样每次生成新 id 时就不会产生性能开销。
2.  根据您传递给它的标签名称自动生成增量 id。
3.  如果您真的打算使用 id，请更新缓存。

为了方便起见，我只是在控制台上打印 id。

只是我的 2 美分，基于您之前对其他人回复的一些评论。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-03T07:17:53.743

我的代码：

```
jQuery.ajax({
        type: 'POST',                    
        url:'../pages/HomePage.php',            
        data:{param  : val},
        dataType:'HTML',                
        success: function(data)
        {
            var data = data ;
            obj = {};

             $.each(data.split(','), function(k, v) {
                 obj[k]= v;
            alert("success"); 

         $("#process_des").val(obj[0]);
             });

        }
    }); 
```

我的输出

```
Array
(
    [0] => FILLET SKIN OFF
    [1] => SF
) 
```

# java - 画布上的 Android 中心文本

> ID：11120392
> 
> 赞同：215
> 
> 时间：2012-06-20T13:13:15.967
> 
> 标签：java, android, android-activity, android-canvas, drawtext

我正在尝试使用下面的代码显示文本。问题是文本没有水平居中。当我为 设置坐标时`drawText`，它将文本的底部设置在此位置。我希望绘制文本，以便文本也水平居中。

这是一张进一步显示我的问题的图片：

[![截屏](../Images/dd2cca06e68d5b97810ad49b7efde946.png)](https://i.stack.imgur.com/vEJNb.png)

```
@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
    //canvas.drawRGB(2, 2, 200);
    Paint textPaint = new Paint();
    textPaint.setARGB(200, 254, 0, 0);
    textPaint.setTextAlign(Align.CENTER);
    textPaint.setTypeface(font);
    textPaint.setTextSize(300);
    canvas.drawText("Hello", canvas.getWidth()/2, canvas.getHeight()/2  , textPaint);
} 
```

* * *

## 回答 #1

> 赞同：408
> 
> 时间：2012-06-20T14:31:44.823

尝试以下操作：

```
 Paint textPaint = new Paint();
 textPaint.setTextAlign(Paint.Align.CENTER);

 int xPos = (canvas.getWidth() / 2);
 int yPos = (int) ((canvas.getHeight() / 2) - ((textPaint.descent() + textPaint.ascent()) / 2)) ; 
 //((textPaint.descent() + textPaint.ascent()) / 2) is the distance from the baseline to the center.

 canvas.drawText("Hello", xPos, yPos, textPaint); 
```

* * *

## 回答 #2

> 赞同：244
> 
> 时间：2015-08-18T19:40:18.637

以**Paint.getTextBounds() 居中**：

[![在此处输入图像描述](../Images/fd5040137e48c6e98ee2f156fa2d2a78.png)](https://i.stack.imgur.com/WVwFw.png)

```
private Rect r = new Rect();

private void drawCenter(Canvas canvas, Paint paint, String text) {
    canvas.getClipBounds(r);
    int cHeight = r.height();
    int cWidth = r.width();
    paint.setTextAlign(Paint.Align.LEFT);
    paint.getTextBounds(text, 0, text.length(), r);
    float x = cWidth / 2f - r.width() / 2f - r.left;
    float y = cHeight / 2f + r.height() / 2f - r.bottom;
    canvas.drawText(text, x, y, paint);
} 
```

*   **Paint.Align.CENTER**并不意味着文本的参考点垂直居中。参考点始终位于基线上。那么，为什么不使用**Paint.Align.LEFT**呢？无论如何，您必须计算参考点。

*   **Paint.descent()**的缺点是它不考虑真实的文本。**Paint.descent()**检索相同的值，无论文本是否包含带血统的字母。这就是我使用**r.bottom**的原因。

*   如果 API < 16，我在使用Canvas.getHeight **()**时遇到了一些[问题](https://stackoverflow.com/questions/32106170/get-size-of-canvas-before-api-16)。这就是我改用**Canvas.getClipBounds(Rect)**的原因。（不要使用**Canvas.getClipBounds().getHeight()**因为它为**Rect**分配内存。）

*******   出于性能原因，您应该在使用**onDraw()**之前分配对象。因为**drawCenter()**将在**onDraw()**中被调用，所以对象**Rect r**在这里被预分配为一个字段。****** 

 ***** * *

我尝试将两个热门答案的代码放入我自己的代码中（2015 年 8 月），并制作了一个屏幕截图来比较结果：

[![文本居中的三个版本](../Images/73d0af2b4c77219d7168424fc7ef87e3.png)](https://i.stack.imgur.com/VsiQc.png)

文本应该在红色填充的矩形内居中。我的代码生成白色文本，其他两个代码完全生成灰色文本（它们实际上是相同的，重叠的）。灰色文本有点太低了，右边有两个。

这就是我进行测试的方式：

```
import android.app.Activity;
import android.content.Context;
import android.content.pm.ActivityInfo;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.FrameLayout;

class MyView extends View {

    private static String LABEL = "long";
    private static float TEXT_HEIGHT_RATIO = 0.82f;

    private FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(0, 0);
    private Rect r = new Rect();
    private Paint paint = new Paint();
    private Paint rectPaint = new Paint();

    public MyView(Context context) {
        super(context);
    }

    private void drawTextBounds(Canvas canvas, Rect rect, int x, int y) {
        rectPaint.setColor(Color.rgb(0, 0, 0));
        rectPaint.setStyle(Paint.Style.STROKE);
        rectPaint.setStrokeWidth(3f);
        rect.offset(x, y);
        canvas.drawRect(rect, rectPaint);
    }

    // andreas1724 (white color):
    private void draw1(Canvas canvas, Paint paint, String text) {
        paint.setTextAlign(Paint.Align.LEFT);
        paint.setColor(Color.rgb(255, 255, 255));
        canvas.getClipBounds(r);
        int cHeight = r.height();
        int cWidth = r.width();
        paint.getTextBounds(text, 0, text.length(), r);
        float x = cWidth / 2f - r.width() / 2f - r.left;
        float y = cHeight / 2f + r.height() / 2f - r.bottom;
        canvas.drawText(text, x, y, paint);
        drawTextBounds(canvas, r, (int) x, (int) y);
    }

    // Arun George (light green color):
    private void draw2(Canvas canvas, Paint textPaint, String text) {
        textPaint.setTextAlign(Paint.Align.CENTER);
        textPaint.setColor(Color.argb(100, 0, 255, 0));
        int xPos = (canvas.getWidth() / 2);
        int yPos = (int) ((canvas.getHeight() / 2) - ((textPaint.descent() + textPaint.ascent()) / 2));
        canvas.drawText(text, xPos, yPos, textPaint);
    }

    // VinceStyling (light blue color):
    private void draw3(Canvas yourCanvas, Paint mPaint, String pageTitle) {
        mPaint.setTextAlign(Paint.Align.LEFT);
        mPaint.setColor(Color.argb(100, 0, 0, 255));
        r = yourCanvas.getClipBounds();
        RectF bounds = new RectF(r);
        bounds.right = mPaint.measureText(pageTitle, 0, pageTitle.length());
        bounds.bottom = mPaint.descent() - mPaint.ascent();
        bounds.left += (r.width() - bounds.right) / 2.0f;
        bounds.top += (r.height() - bounds.bottom) / 2.0f;
        yourCanvas.drawText(pageTitle, bounds.left, bounds.top - mPaint.ascent(), mPaint);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        int margin = 10;
        int width = w - 2 * margin;
        int height = h - 2 * margin;
        params.width = width;
        params.height = height;
        params.leftMargin = margin;
        params.topMargin = margin;
        setLayoutParams(params);
        paint.setTextSize(height * TEXT_HEIGHT_RATIO);
        paint.setAntiAlias(true);
        paint.setTypeface(Typeface.create(Typeface.SERIF, Typeface.BOLD_ITALIC));
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawColor(Color.rgb(255, 0, 0));
        draw1(canvas, paint, LABEL);
        draw2(canvas, paint, LABEL);
        draw3(canvas, paint, LABEL);
    }
}

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        FrameLayout container = new FrameLayout(this);
        container.setLayoutParams(new ViewGroup.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT,
                ViewGroup.LayoutParams.MATCH_PARENT));
        container.addView(new MyView(this));
        setContentView(container);
    }
} 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2014-02-22T08:17:10.830

垂直对齐很困难，因为发生了文本下降和上升，很多人使用**Paint.getTextBounds()**来检索 TextWidth 和 TextHeight，但它并没有使文本居中。这里我们可以使用**Paint.measureText()**来计算TextWidth，TextHeight我们简单的用descent和ascent做减法，然后我们得到最接近的TextSize，下面的工作互相比较容易。

```
// the Paint instance(should be assign as a field of class).
Paint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
mPaint.setTextSize(getResources().getDimension(R.dimen.btn_textsize));

// the display area.
Rect areaRect = new Rect(0, 0, 240, 60);

// draw the background style (pure color or image)
mPaint.setColor(Color.BLACK);
yourCanvas.drawRect(areaRect, mPaint);

String pageTitle = "文字小说";

RectF bounds = new RectF(areaRect);
// measure text width
bounds.right = mPaint.measureText(pageTitle, 0, pageTitle.length());
// measure text height
bounds.bottom = mPaint.descent() - mPaint.ascent();

bounds.left += (areaRect.width() - bounds.right) / 2.0f;
bounds.top += (areaRect.height() - bounds.bottom) / 2.0f;

mPaint.setColor(Color.WHITE);
yourCanvas.drawText(pageTitle, bounds.left, bounds.top - mPaint.ascent(), mPaint); 
```

![代码截图](../Images/20ae217fc8838160a27f69b283a059bd.png)

顺便说一句，我们强烈建议使用**RectF**而不是**Rect**，因为位置需要更准确的值，根据我的经验，RectF 在 xhdpi 设备上只完成了一个像素的上下偏差，而 Rect 会多两个。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-07-16T20:34:02.470

您的代码在视图中心绘制文本基线的中心。为了使文本在某个点 x、y 居中，您需要计算文本的中心，并将其放在*该*点上。

此方法将以点 x、y 为中心绘制文本。如果您将它传递到视图的中心，它将居中绘制文本。

```
private void drawTextCentered(String text, int x, int y, Paint paint, Canvas canvas) {
    int xPos = x - (int)(paint.measureText(text)/2);
    int yPos = (int) (y - ((textPaint.descent() + textPaint.ascent()) / 2)) ;

    canvas.drawText(text, xPos, yPos, textPaint);
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-02T13:52:33.350

我发现居中文本的最佳解决方案如下：

```
textPaint.setTextAlign(Paint.Align.CENTER);
//textPaint is the Paint object being used to draw the text (it must be initialized beforehand)
float textY=center.y;
float textX=center.x; 
// in this case, center.x and center.y represent the coordinates of the center of the rectangle in which the text is being placed
canvas.drawText(text,textX,textY,textPaint);    ` 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-19T11:57:38.277

适合我使用： **textPaint.textAlign = Paint.Align.CENTER** with **textPaint.getTextBounds**

```
private fun drawNumber(i: Int, canvas: Canvas, translate: Float) {
            val text = "$i"
            textPaint.textAlign = Paint.Align.CENTER
            textPaint.getTextBounds(text, 0, text.length, textBound)

            canvas.drawText(
                    "$i",
                    translate + circleRadius,
                    (height / 2 + textBound.height() / 2).toFloat(),
                    textPaint
            )
        } 
```

结果是：

[![在此处输入图像描述](../Images/dd3788c2202633ec89335444d0c28658.png)](https://i.stack.imgur.com/QN3XV.jpg)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-02T08:22:37.837

这对我有用：

```
 paint.setTextAlign(Paint.Align.CENTER);
        int xPos = (newWidth / 2);
        int yPos = (newHeight / 2);
        canvas.drawText("Hello", xPos, yPos, paint); 
```

如果有人发现任何问题，请告诉我

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-12-21T22:25:22.707

将这些添加到您的 onDraw 方法中：

```
paint.setColor(getContext().getResources().getColor(R.color.black));
paint.setTextAlign(Paint.Align.CENTER);
canvas.drawText("Text", (float) getHeight() / 2f, (float) getWidth() / 2f, paint); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-18T13:47:22.903

我创建了一个方法来简化这个：

```
 public static void drawCenterText(String text, RectF rectF, Canvas canvas, Paint paint) {
    Paint.Align align = paint.getTextAlign();
    float x;
    float y;
    //x
    if (align == Paint.Align.LEFT) {
        x = rectF.centerX() - paint.measureText(text) / 2;
    } else if (align == Paint.Align.CENTER) {
        x = rectF.centerX();
    } else {
        x = rectF.centerX() + paint.measureText(text) / 2;
    }
    //y
    metrics = paint.getFontMetrics();
    float acent = Math.abs(metrics.ascent);
    float descent = Math.abs(metrics.descent);
    y = rectF.centerY() + (acent - descent) / 2f;
    canvas.drawText(text, x, y, paint);

    Log.e("ghui", "top:" + metrics.top + ",ascent:" + metrics.ascent
            + ",dscent:" + metrics.descent + ",leading:" + metrics.leading + ",bottom" + metrics.bottom);
} 
```

rectF就是你要绘制文字的区域，就是这样。 [细节](http://ghui.me/post/2015/10/draw_center_text/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-05T11:40:09.623

就我而言，我不必将文本放在画布中间，而是放在一个旋转的轮子中。尽管我必须使用此代码才能成功：

```
fun getTextRect(textSize: Float, textPaint: TextPaint, string: String) : PointF {
    val rect = RectF(left, top, right, bottom)
    val rectHeight = Rect()
    val cx = rect.centerX()
    val cy = rect.centerY()

    textPaint.getTextBounds(string, 0, string.length, rectHeight)
    val y = cy + rectHeight.height()/2
    val x = cx - textPaint.measureText(string)/2

    return PointF(x, y)
} 
```

然后我从 View 类中调用这个方法：

```
private fun drawText(canvas: Canvas, paint: TextPaint, text: String, string: String) {
    val pointF = getTextRect(paint.textSize, textPaint, string)
    canvas.drawText(text, pointF!!.x, pointF.y, paint)
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-10-01T07:21:42.290

在您的油漆属性中使用它：

```
 textPaint.setTextAlign(Paint.Align.CENTER); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-05T20:56:13.973

如果我们使用静态布局

```
mStaticLayout = new StaticLayout(mText, mTextPaint, mTextWidth,
                Layout.Alignment.ALIGN_CENTER, 1.0f, 0, true); 
```

**Layout.Alignment.ALIGN_CENTER**这可以解决问题。静态布局还有很多其他优点。

参考：[Android 文档](https://developer.android.com/reference/android/text/StaticLayout.html)****

# android - onClick 事件发生时改变对话框的内容

> ID：11120393
> 
> 赞同：3
> 
> 时间：2012-06-20T13:13:22.147
> 
> 标签：android, dialog, android-alertdialog

在我的应用程序中，我创建了一个对话框来接受密码。在对话框中存在一条消息、一个 EditText 和两个按钮（一个 +ve 和一个 -ve）。当用户单击 +ve 按钮时，我正在检查在 EditText 中输入的密码是否有效。如果无效，我必须更改提示用户重新输入密码的对话框的消息。

如果密码有效，它会按预期工作，但它是无效的，而不是更新消息，它只是关闭对话框。

我已经尝试通过覆盖**onPrepareDialog()**来解决它，但它也不起作用。

这是我的代码：

```
protected Dialog onCreateDialog(int viewId){
    AlertDialog dialog = null;
    final AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Enter Password To Continue");
            final EditText passwordField = new EditText(getApplicationContext());
            builder.setView(passwordField);
            builder.setPositiveButton("SUBMIT", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                    if(passwordField.getText().toString().equals("password")){
                        Intent intent = new Intent(MyFirstActivity.this, NextActivity.class);
                        finish();
                        startActivity(intent);
                    }else{
                            //Here I need to update the message
                        builder.setMessage("SORRY!!! Wrong Password Entered.\n Re-Enter Correct Password Again ");
                    }                       
                }
            });
            builder.setNegativeButton("CANCEL", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });
            dialog =  builder.create();
    }
    return dialog;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:22:38.447

我认为这里有两个问题。

1.  如果我没记错，AlertDialog 上 PositiveButton 的默认行为将关闭对话框。我认为这就是为什么密码错误时您的关闭的原因。我想如果你切换到

    ```
    builder.setNeutralButton(...); 
    ```

    按下时它不会关闭您的对话框。

2.  您正在更改 Builder 上的消息，而不是 Dialog 本身。我不认为 Builder 会在 Dialog 已经创建和显示后动态改变它的外观。

    ```
    dialog.setMessage("WRONG PASSWORD"); 
    ```

我想会为你改变它。如果没有，那么您必须制作一个 TextView 并将其添加到您的 Dialog 中，`builder.setView(mTxt);`然后您可以调用`setText();`您的参考，它将更改屏幕上的文本。

我认为比任何一个更好的解决方案可能是[Toast](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)弹出窗口。用户刚刚输入了密码并按下了提交，所以我认为他们可以指望他们正在看屏幕。许多其他具有登录页面的应用程序使用 Toast 消息来告诉用户他们是否输入了错误的密码，所以我认为您不会混淆您的用户或任何东西，这是一种常见的设计模式。

**编辑：**

AlertDialog 类肯定有一个 setMessage() 方法。[请参阅此处的文档](http://developer.android.com/reference/android/app/AlertDialog.html#setMessage%28java.lang.CharSequence%29)。它位于文档页面的底部附近，因此当您正确单击链接时它不会滚动到顶部。但它就在那里，对我来说是从顶部向下的第三个。之间`setInverseBackgroundForced`和`setTitle`

**编辑2：**

我实施了类似于您不久前尝试做的事情。我必须将自己的自定义侦听器对象与我认为的对话框按钮一起使用，以使它们在按下时不会隐藏对话框。

以下是我创建和显示对话框的方式：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(YourActivity.this);
  builder.setCancelable(false)
  .setMessage("Please Enter Something")

  .setPositiveButton("Enter", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
        //All of the fun happens inside the CustomListener now.
        //I had to move it to enable data validation.
        }
   });
   AlertDialog alertDialog = builder.create();
   alertDialog.show();
   Button theButton = alertDialog.getButton(DialogInterface.BUTTON_POSITIVE);
   theButton.setOnClickListener(new CustomListener(alertDialog)); 
```

然后我在我的 Activity 中创建了一个名为 CustomListener 的内部类，如下所示：

```
class CustomListener implements View.OnClickListener {
    private final Dialog dialog;
    public CustomListener(Dialog dialog) {
        this.dialog = dialog;
    }
    @Override
    public void onClick(View v) {

        if(passwordField.getText().toString().equals("password")){
            //Password is correct.

        } else { //Password is incorrect.
            ((AlertDialog)dialog).setMessage("WRONG");
        }
    }
} 
```

当您以这种方式设置侦听器时，它不会在按下按钮时自动关闭对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:01:56.467

**虽然蒂姆**提供的答案是正确的，但我仍然发布我的答案，以帮助将来想要更多替代答案的人。

经过长时间的搜索，我通过覆盖**onShow()**方法以另一种方式解决了这个问题。

```
@Override
protected Dialog onCreateDialog(int viewId){
    AlertDialog dialog;
    final AlertDialog.Builder builder = new AlertDialog.Builder(this);

            builder.setMessage("Enter Password To Continue");
            final TextView message = new TextView(getApplicationContext());
            message.setText("Enter Password To Continue");
            builder.setView(message);

            final EditText passwordField = new EditText(getApplicationContext());
            builder.setView(passwordField);
            builder.setPositiveButton("SUBMIT", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                        //Do Nothing
                                    }
            });
            builder.setNegativeButton("CANCEL", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });
            dialog =  builder.create();
            dialog.setOnShowListener(new OnShowListener() {

                @Override
                public void onShow(final DialogInterface dialog) {
                    // TODO Auto-generated method stub
                    Button b = ((AlertDialog) dialog).getButton(AlertDialog.BUTTON_POSITIVE);
                    b.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                                       if(passwordField.getText().toString().equals("password")){
                                Intent intent = new Intent(PuzzleHome.this, PuzzleMaker.class);
                                startActivity(intent);
                            }else{
                                ((AlertDialog) dialog).setMessage("SORRY!!! Wrong Password Entered.\n Re-Enter Correct Password Again");
                            }
                        }
                    });
                }
            });
    }
    return dialog;
} 
```

# java - 首次使用布尔值 c++ 或 java

> ID：11120395
> 
> 赞同：3
> 
> 时间：2012-06-20T13:13:26.200
> 
> 标签：java, c++, boolean

我通常使用这样的布尔值“firstTime”：

在 C++ 中：

```
bool firsTime = true;
for (int i = 0; i < v.size(); i++) {
    if (firstTime) {
        //do something just once
        firstTime = false;
    }
    else {
        //do the usual thing
    }
} 
```

在java中使用布尔值而不是布尔值是一样的，所以我不放代码。

问题是，在 java 或 c/c++ 中是否有在 if 子句中使用 bool/boolean 并自动为该 bool/boolean 分配值 false ？

我知道这似乎是无稽之谈，但它会节省我的代码很多行，因为我有很多基本案例，而且在大的情况下，这很关键。

我确实想知道在 if 子句中使用它之后是否有任何方法将值设置为 false 。我知道在一段时间内我们可以使用：

```
if (i == 0) 
```

但我也在考虑调用需要了解事物并且通常由布尔值引用的函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T13:14:35.917

我只是将条件更改为

```
if ( i == 0 )
{ 
}
//... 
```

并完全摆脱额外的变量。

**编辑**在一行中看到有关如何执行此操作的所有建议后，我只能得出一个结论-**不要**。只需使用你所拥有的，它**就更**清晰了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T13:25:02.950

如果您还没有计数，则可以使用一个而不是布尔值

```
long counter = 0;
for(String arg: args) {
    if(counter++ == 0) {
       // first
    }
} 
```

使用布尔值的替代方法是

```
boolean first = true;
for(String arg: args) {
    if(first && !(first = false)) {
       // first
    }
} 
```

* * *

对于集合有类似的模式

```
Set<String> seen = ...
for(String arg: args) {
    if(seen.add(arg)) {
       // first time for this value of arg as its only added once.
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T13:32:12.257

有一个 C++ 特定的解决方案，它使用转换运算符来构建一次性防护：

```
class first_guard {
    bool val;
public:
    first_guard() : val(true) {}
    operator bool() { bool res = val; val = false; return res; }
}; 
```

以下是你如何使用警卫：

```
first_guard first;
for (int i = 0 ; i != 5 ; i++) {
    if(!first) {
        cout << i << ' ';
    }
} 
```

此代码打印`1 2 3 4`，跳过`0`。

缺少转换运算符会阻止您在 Java 中复制此解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T13:19:25.050

```
for (int i = 0, firstTime = 1; i < v.size(); i++, firstTime = 0) { 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T13:35:11.260

如果第一次迭代除了通常的“东西”（而不是“而不是通常的东西”）之外应该有一些额外的初始化，我会考虑这样的事情：

```
for (int i=0, do_first_time_stuff(); i<v.size(); i++) {
    do_other_stuff();
} 
```

另一种可能性是：

```
Initialization();
std::for_each(v.begin()+1, v.end(), loop_body); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-20T13:16:03.783

**编辑：请参阅 Luchian 的关于使用您所拥有的内容的编辑。我同意。非常清楚。**

为什么不直接将第一个循环迭代拉出循环呢？

```
//do something just once (if needed, so check)
for (int i = 1; i < v.size(); i++) {
    //do the usual thing
} 
```

现在，如果您有可能不做这第一件事，您需要检查一下，但很多时候您可能至少会做一次迭代。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T13:16:14.847

我会在 for 循环之外第一次做任何你想做的事情，然后启动迭代器。

```
if (v.size() > 0) {
    /* first time code */
}
for (int i = 1; i < v.size(); i++) {
    /* second time or more */
} 
```

如果您使用的是 foreach 循环，那么您的解决方案非常可靠。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-20T13:16:57.823

为什么不做类似的事情：

```
void firstTime() {
    // do stuff
}

void doWork(int i) {
    // do stuff
}

firstTime();
for(int i = 1; i<v.size();i++) {
 doWork(i);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-20T13:20:20.837

如果您在第一次活动中没有使用列表的内容。

```
if(v.size() >=1 ){
  //do Something for 1 time
}
for (int i = 0; i < v.size(); i++) {
        //do the usual thing
} 
```

如果您需要列表的内容，请使用

```
if ( i == 0 )
{ 
} 
```

正如 Luchian Grigore 所建议的那样

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-20T13:21:06.820

你可以试试（C++）：

```
bool checkFirst(bool& first)
{
  bool result = first;
  first = false;
  return result;
}

bool firstTime=true;
// loop here { 
if (checkFirst(firstTime))
{
  // do firsttime stuff
} else {
 // do regular stuff
}
// } // end loop 
```

爪哇：

```
public class CheckFirst
{
  private boolean first;

  public CheckFirst()
  {
    first = true;
  }

  boolean check()
  {
    boolean result = first;
    first = false;
    return result;
  }
}

CheckFirst first = new CheckFirst();
// loop here {
if (first.check()) {
  // do first stuff
} else {
  // do regular stuff
}
// } // end loop 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-20T13:21:47.993

我会尝试这样的事情，它有效，但我不确定这是否完全正确。（[http://ideone.com/Bcjva](http://ideone.com/Bcjva)）

```
boolean boo = true;
if( !((boo) ? (boo = !boo) : boo)) //enters the if successfully, but inside,prints boo as false.
     System.out.println(boo); 
```

# spring - 如何使用类路径位置

> ID：11120397
> 
> 赞同：9
> 
> 时间：2012-06-20T13:13:35.517
> 
> 标签：spring, spring-mvc, resources, classpath

为了解决这个问题，我到处搜索，但找不到解决方案。问题如下：我在 Tomcat 7 服务器上构建了一个 Spring-mvc webapp - 准确地说是 7.0.12 - 我无法让`<mvc:resources>`标签正常工作。正如您将在下面看到`<mvc:resources>`旧资源文件夹的作品，但我更喜欢将资源文件夹放在`/WEB-INF/web/`目录中。

MediorkoorVOICES-Web-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">        

    <context:component-scan base-package="com.oudejans.mediorkoorvoices.web" /> 

    <mvc:resources mapping="/resources/**" location="/WEB-INF/web/resources/"  />  
    <mvc:annotation-driven />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/web/jsp/" />
        <property name="suffix" value=".jsp" />
        <property name="order" value="1" />
    </bean>

    <bean id="handlerMapping" class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" /> 

    <import resource="web/tiles/web-tiles.xml" />
</beans> 
```

文件夹结构：

```
META-INF
resources (Old resources folder)
    - web
        - images
        - css
            - main.css      
WEB-INF
    - classes
    - lib
    - admin
    - shared
    - web
        - jsp
        - tiles
        - resources (New resources folder i want to access)
            - images
                - banner.png
            - js
            - etc. 
```

现在，如果我想访问旧的资源文件夹，下面的代码就可以了。

```
<mvc:resources mapping="/resources/**" location="/resources/" />
&
<img src="${pageContext.request.contextPath}/resources/oldBanner.png" /> 
```

但我更喜欢做这样的事情：

```
<mvc:resources mapping="/resources/**" location="classpath:/WEB-INF/web/resources/" />
&
<img src="${pageContext.request.contextPath}/resources/images/banner.png" /> 
```

有人可以向我解释我是如何做到这一点的吗？我对spring-mvc相当陌生。

EDIT1：附加数据：我使用的是netbeans 7.1.2，spring-mvc 版本是3.1.0，结合了maven。

下面是 Pom.xml

```
<!-- groupId config, etc. removed -->
<!-- packaging type is war -->
<properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <org.springframework.version>3.1.0.RELEASE</org.springframework.version>
    <org.hibernate.version>3.5.6-Final</org.hibernate.version>
    <org.apache.tiles.version>2.2.2</org.apache.tiles.version>
    <netbeans.hint.deploy.server>Tomcat</netbeans.hint.deploy.server>
    <netbeans.hint.j2eeVersion>1.6</netbeans.hint.j2eeVersion>
</properties>

<repositories>
    <repository>
        <id>com.springsource.repository.bundles.release</id>
        <name>EBR Spring Release Repository</name>
        <url>http://repository.springsource.com/maven/bundles/release</url>
    </repository>
    <repository>
        <id>com.springsource.repository.bundles.external</id>
        <name>EBR External Release Repository</name>
        <url>http://repository.springsource.com/maven/bundles/external</url>
    </repository>    
</repositories>

<dependencies>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${org.hibernate.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>slf4j-api</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>${org.hibernate.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>slf4j-api</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>        
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${org.hibernate.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>slf4j-api</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-api</artifactId>
        <version>${org.apache.tiles.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-core</artifactId>
        <version>${org.apache.tiles.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>jcl-over-slf4j</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-jsp</artifactId>
        <version>${org.apache.tiles.version}</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.18</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.5.8</version>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>        
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>        
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>3.0-alpha-1</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>        
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.core</artifactId>
        <version>${org.springframework.version}</version>
    </dependency> 
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.orm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.web</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.web.servlet</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.test</artifactId>
        <version>${org.springframework.version}</version>
        <scope>test</scope>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${endorsed.dir}</outputDirectory>
                        <silent>true</silent>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                                <type>jar</type>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

EDIT2：我添加了完整的 MediorkoorVOICES-Web-servlet.xml 和 web.xml

web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/hibernateContext.xml 
            /WEB-INF/applicationContext.xml
        </param-value>
    </context-param>
    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/log4j.xml</param-value>
    </context-param>    

    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <error-page>
        <error-code>404</error-code>
        <location>/errors/404.err</location>
    </error-page>

    <servlet>
        <servlet-name>MediorkoorVOICES-Web</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>    
    <servlet-mapping>
        <servlet-name>MediorkoorVOICES-Web</servlet-name>
        <url-pattern>*.mkvp</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>MediorkoorVOICES-Admin</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>    
    <servlet-mapping>
        <servlet-name>MediorkoorVOICES-Admin</servlet-name>
        <url-pattern>*.mkvap</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>ErrorHandler</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>0</load-on-startup>
    </servlet>    
    <servlet-mapping>
        <servlet-name>ErrorHandler</servlet-name>
        <url-pattern>*.err</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

EDIT3：经过更多测试后，我意识到该`<mvc:resources>`标签根本不起作用。（查看更新的文件夹结构）例如，如果我这样做：

```
<mvc:annotation-driven />
<mvc:resources location="/resources/web/" mapping="/resources/**" /> 
&
<a href="${pageContext.request.contextPath}/resources/css/main.css" />click</a> 
```

它也给了我一个 404，而事实上，它应该链接到 /resources/web/css/main.css 文件。所以我现在能想到的就是有一些配置错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T13:03:14.267

所以经过大量的调试和“尝试”之后，我尝试将 *.css 和 *.png 映射添加到 web.xml servlet。显然，资源文件没有映射到 servlet，因此无法找到。因此，对于与我具有相同映射的每个人，请将其添加到您的 web.xml **servlet-mapping**标记中。

```
<url-pattern>*.css</url-pattern>
<url-pattern>*.png</url-pattern> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:56:44.383

这应该有效：

```
<mvc:resources location="WEB-INF/resources/" mapping="/resources/**" /> 
```

您指的是使用 uri 的资源，`/resources/somestatic.gif`但将从`WEB-INF/resources/somestatic.gif`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:22:06.823

你在做什么是完全错误的。由于您的资源位于文件夹**/WEB-INF/web/resources/**中，因此您无需在其之前指定**classpath:。**

所以它就像下面一样

```
<mvc:resources mapping="/WEB-INF/web/resources/**" location="/WEB-INF/web/resources/"  /> 
```

我认为这会解决你的问题。希望这对您有所帮助。干杯。

# rest - 休息服务代理创建错误

> ID：11120398
> 
> 赞同：4
> 
> 时间：2012-06-20T13:13:41.413
> 
> 标签：rest, resteasy

我做了一个休息服务，当我从应用程序访问它时，我得到了这个 RunTimeError

> 您必须在客户端方法或接口上定义 @Consumes 类型，或提供默认值

下面是我创建代理的代码

```
UsersInterface proxy = ProxyFactory.create(UsersInterface.class,
                                ApplicationConfig.getSAPlatformURL(),
                                this.createExecutor()); 
```

我是休息服务的初学者，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T08:29:06.907

它通常是接受输入的问题。尝试使用以下注释

```
@Consumes(value = MediaType.APPLICATION_JSON) 
```

你可以把它放在你的类或方法上。

更多信息可在此处[获得 http://docs.oracle.com/cd/E19776-01/820-4867/ggqqr/index.html](http://docs.oracle.com/cd/E19776-01/820-4867/ggqqr/index.html)

# git - 致命：未启用交互式 git shell。收到致命消息：未启用交互式 git shell

> ID：11120399
> 
> 赞同：2
> 
> 时间：2012-06-20T13:13:46.933
> 
> 标签：git, fedora, fedora16

我已经用 root 运行了这个命令：

```
 [root@localhost git-shell-commands]# ssh git@192.168.1.12
    git@192.168.1.12's password: 
    Last login: Wed Jun 20 15:08:26 2012 from new-host.home
    fatal: Interactive git shell is not enabled.
    hint: ~/git-shell-commands should exist and have read and execute access.
    Connection to 192.168.1.12 closed.
    [root@localhost git-shell-commands]# 
```

任何人都可以告诉如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T13:56:16.710

`git help shell`给出了一些关于如何设置它的指示。输出中的提示也是。git 用户需要`git-shell-commands`在其主目录中调用一个子目录，具有适当的权限，并填充您希望用户能够运行的内容。

# c# - 从 MethodInfo 创建委托

> ID：11120401
> 
> 赞同：28
> 
> 时间：2012-06-20T13:13:57.587
> 
> 标签：c#, delegates, attributes, methodinfo

我目前在尝试从`MethodInfo`. 我的总体目标是查看类中的方法并为标记有特定属性的方法创建委托。我正在尝试使用`CreateDelegate`，但出现以下错误。

> 无法绑定到目标方法，因为其签名或安全透明度与委托类型的不兼容。

这是我的代码

```
public class TestClass
{
    public delegate void TestDelagate(string test);
    private List<TestDelagate> delagates = new List<TestDelagate>();

    public TestClass()
    {
        foreach (MethodInfo method in this.GetType().GetMethods())
        {
            if (TestAttribute.IsTest(method))
            {
                TestDelegate newDelegate = (TestDelagate)Delegate.CreateDelegate(typeof(TestDelagate), method);
                delegates.Add(newDelegate);
            }
        }
    }

    [Test]
    public void TestFunction(string test)
    {

    }
}

public class TestAttribute : Attribute
{
    public static bool IsTest(MemberInfo member)
    {
        bool isTestAttribute = false;

        foreach (object attribute in member.GetCustomAttributes(true))
        {
            if (attribute is TestAttribute)
                isTestAttribute = true;
        }

        return isTestAttribute;
    }
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-20T13:19:59.740

您正在尝试从*实例*方法创建委托，但您没有传入目标。

你可以使用：

```
Delegate.CreateDelegate(typeof(TestDelagate), this, method); 
```

...或者你可以让你的方法静态。

（如果你需要同时处理这两种方法，你需要有条件地这样做，或者`null`作为中间参数传入。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-27T18:19:17.350

如果委托没有目标，您需要为委托使用不同的签名。然后目标需要作为第一个参数传递

```
public class TestClass
{
    public delegate void TestDelagate(TestClass instance, string test);
    private List<TestDelagate> delagates = new List<TestDelagate>();

    public TestClass()
    {
        foreach (MethodInfo method in this.GetType().GetMethods())
        {
            if (TestAttribute.IsTest(method))
            {
                TestDelegate newDelegate = (TestDelagate)Delegate.CreateDelegate(typeof(TestDelagate), null, method);
                delegates.Add(newDelegate);
                //Invocation:
                newDelegate.DynamicInvoke(this, "hello");

            }
        }
    }

    [Test]
    public void TestFunction(string test)
    {

    }
} 
```

# jquery - 如何执行从一个 .load 到另一个 .load 的 jquery 操作

> ID：11120402
> 
> 赞同：0
> 
> 时间：2012-06-20T13:13:58.807
> 
> 标签：jquery

我有两个 div 每隔几秒就会自动刷新一次，内容是使用 jquery .load() 加载的

```
 <script>
    $(document).ready(function(){$("#a1").load("a1.php");
    var refreshId=setInterval(function(){
$("#a1").load('a1.php?randval='+Math.random());},10000);$.ajaxSetup({cache:false});});

    $(document).ready(function(){$("#b2").load("b2.php");
    var refreshId=setInterval(function(){
$("#b2").load('b2.php?randval='+Math.random());},20000);$.ajaxSetup({cache:false});});
    </script>

<div id='a1'></div>
<div id='b2'></div> 
```

我需要插入到 div b2 的内容才能使用 jquery 操作 div a1 中的内容。

例如，内容加载到 div 1 a1.php

```
<span class="test">Hello World</span> 
```

例如加载到 div 2 b2.php 中的内容

```
<script type="text/javascript">
$(document).ready(function(){
$('.test').text('Good Bye cruel world');
});
</script> 
```

但这似乎不起作用......希望这是有道理的..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:21:20.610

您的 $(document).ready... 代码在 .load() 完成之前运行，因为加载将在稍后完成。这意味着当它运行时，还没有“test”类的跨度。

您必须在第一次加载（到 a1）完成后执行第二次加载。为此， load 将允许您向它传递一个函数，以便在加载完成时调用（[jQuery 加载文档](http://api.jquery.com/load/)）：

```
$("a1").load("contentLocation.php", null, function () {
  $("a2").load("nextContentLocation.php");
}); 
```

这将导致 jQuery 将内容加载到 a1 中，并在完成后将内容加载到 a2 中。

# sql - 计算 Hour 是否至少有一半的覆盖率

> ID：11120407
> 
> 赞同：2
> 
> 时间：2012-06-20T13:14:15.857
> 
> 标签：sql, sql-server

所以我有以下数据，这些数据用计划工作的员工人数来重新设置小时和一刻钟。

```
Hour                QuarterHour         EmployeesWorking
13:00:00.0000000    13:00:00.0000000    2
13:00:00.0000000    13:15:00.0000000    1
13:00:00.0000000    13:30:00.0000000    1
13:00:00.0000000    13:45:00.0000000    1
14:00:00.0000000    14:00:00.0000000    5
14:00:00.0000000    14:15:00.0000000    1
14:00:00.0000000    14:30:00.0000000    2
14:00:00.0000000    14:45:00.0000000    1 
```

我需要能够最大限度地吸引员工工作，但仅限于至少两个季度的覆盖范围。所以在我上面的数据中，我会在 13:00 小时返回 1，在 14:00 小时返回 2。

有什么好方法可以做到这一点吗？我一直在尝试进行一系列不同的计算（Max、Sum(EmployeesWorking)/2 等），它们让我很接近，但我需要准确的计数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:19:36.353

如果您在一小时内按数量订购，您总是会选择第二个项目，所以这样做：

```
SELECT * FROM
(
    SELECT ROW_NUMBER() 
        OVER (PARTITION BY Hour ORDER BY EmployeesWorking DESC) AS RowNum, *
    FROM Table
) AS Agg
WHERE RowNum = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:27:21.850

看起来很简单 - 你想要每小时的最大值，丢弃一个最大值。这对我来说听起来像[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)2：

```
;with OrderedWork as (
    select [Hour],EmployeesWorking,ROW_NUMBER() OVER (PARTITION BY [HOUR] ORDER BY EmployeesWorking desc) as rn
    from @schedule
)
select * from OrderedWork where rn=2 
```

结果：

```
Hour             EmployeesWorking rn
---------------- ---------------- --------------------
13:00:00.0000000 1                2
14:00:00.0000000 2                2 
```

例如，如果一小时中有两个`5`s `14:00`，那么该小时的结果将是`5`- 因为*其中*一行将排在第二位（但哪一行是未知的）。

请注意，不适合使用不同的窗口函数（例如`RANK`），因为您*不想*将绑定的结果合并在一起。

* * *

数据设置：

```
declare @schedule table ([Hour] time,QuarterHour time,EmployeesWorking int)
insert into @schedule ([Hour], QuarterHour, EmployeesWorking) values
('13:00:00.0000000','13:00:00.0000000',2),
('13:00:00.0000000','13:15:00.0000000',1),
('13:00:00.0000000','13:30:00.0000000',1),
('13:00:00.0000000','13:45:00.0000000',1),
('14:00:00.0000000','14:00:00.0000000',5),
('14:00:00.0000000','14:15:00.0000000',1),
('14:00:00.0000000','14:30:00.0000000',2),
('14:00:00.0000000','14:45:00.0000000',1) 
```

# c# - 确定异步服务器中的套接字连接状态

> ID：11120413
> 
> 赞同：1
> 
> 时间：2012-06-20T13:14:48.883
> 
> 标签：c#, asyncsocket

是否可以检查客户端套接字目前是否保持连接活动？我使用使用 AsyncCallBack 操作的多线程服务器。关于这个问题有很多类似的问题，我已经阅读了 Socket.Poll 方法 - 一切都无法正常工作。

尝试应用此示例：

```
 bool IsConnectedAviable(Socket s)
    {
        try
        {
            if (s != null && s.Connected)
            {
                if (s.Poll(0, SelectMode.SelectRead))
                {
                    byte[] buff = new byte[1];
                    if (s.Receive(buff, SocketFlags.Peek) == 0)
                    {
                        return false;
                    }
                    else
                    {
                        return true;
                    }
                }

                return true;
            }
            else
            {
                return false;
            }
        }
        catch
        {
            return false;
        }
    } 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:20:19.867

如果您从另一端收到一些东西，您就知道连接仍然存在。如果您有一段时间没有从另一端收到任何东西，那么确定连接是否仍然存在的唯一方法是发送一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:19:45.750

我认为你必须改变你对 Sockets 的看法。稍微简化一下，它们有两种状态：“肯定断开”和“可能断开”。相应地编码。在“可能已断开连接”状态下，您能做的最好的事情就是尝试发送数据。如果您使用 TCP，并且交付成功，则不会发生任何事情。如果没有，你会得到一个异常——但只是*几秒钟*后，在 TCP 尝试重试之后。

这是物理世界的必然之恶：你乘坐的火车可能刚刚进入隧道，如果方法说“是的，我已连接”，那实际上是一个谎言。

# c# - 列表视图选择模式无法正常工作

> ID：11120415
> 
> 赞同：1
> 
> 时间：2012-06-20T13:14:52.470
> 
> 标签：c#, wpf

出于某种原因，如果我有一个包含复选框的列表视图，它将不允许使用 shift 键进行多项选择。

据我所知，我正确使用了这个：

```
<ListView SelectionMode="Multiple" /> 
```

请注意，由于在此示例中不需要它，我已经删除了代码中的所有其他设置。

我也做过扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:41:26.347

要使用键盘修饰符，您需要设置 SelectionMode="Extended"，然后按 shift+click。我记不太清了，但多重模式只能在每个项目上使用 Ctrl+单击。

我已经将它与列表框控件一起使用，据我所知，它无论如何都被剥离了 ListView 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:35:02.867

检查您是否没有覆盖列表视图或禁用控件中的任何内容

如果您使用的是 MVVM 模式，请确保控件没有阻止选择

[选择模式](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.selectionmode.aspx)

# wpf - 在多个 XAML 文件之间拆分大型 XAML 项目

> ID：11120419
> 
> 赞同：5
> 
> 时间：2012-06-20T13:15:01.847
> 
> 标签：wpf, xaml

我有一个大型 XAML 项目，它将有一个主 TabControl，每个选项卡“页面”都有自己相当复杂的一组元素和用户交互。（这适用于复杂的工业控制应用）

我希望每个选项卡的内容都有自己的 XAML 文件，部分是为了避免拥有一个包含所有内容的巨大、无法管理的 XAML 文件，部分是为了让不同的设计人员可以各自在自己的选项卡上工作。

在多个文件中拆分 XAML 项目的“正确”方法是什么？我在 Stack Overflow 上看到过这里建议的静态资源和用户控件，但似乎都不是这些功能的“预期”目的。前者**似乎**适用于字符串、画笔、颜色、样式、模板等资源，后者**似乎**适用于自定义控件。在多个文件和设计器之间拆分大型 XAML 项目的“最佳实践”是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:33:07.850

尝试使用 DataTemplate 的资源（并因此拆分您的资源文件）并将其 DataType 属性设置为与数据对象的特定实例相对应的特定 UI 片段（如果这适合您的场景）

[http://msdn.microsoft.com/en-us/library/ms742521.aspx#Styling_DataType](http://msdn.microsoft.com/en-us/library/ms742521.aspx#Styling_DataType)

否则，请使用 UserControls，因为现在这是满足您要求的公认方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:21:04.623

我会为此使用几个 UserControl，因为您将多个控件组合到一个控件中，并且由于它创建的概述，这使得它更加高效

# ruby - 使用两个数组替换字符串中的字符

> ID：11120420
> 
> 赞同：2
> 
> 时间：2012-06-20T13:15:07.340
> 
> 标签：ruby, text, replace

我想使用两个数组来更改字符串中的字符。第一个数组包含原始字符，第二个数组包含替换字符。

```
original = ["a", "b", "c"]
replacements = ["x", "y", "z"]
text = "a xx b xx c"
# New string should be "x xx y xx z" 
```

有没有简单的方法在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T13:18:55.480

您将使用它[`String#tr`](http://ruby-doc.org/core-1.9.3/String.html#method-i-tr)来进行替换，并将[`Array#join`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join)您的数组转换为字符串，这是`String#tr`预期的参数。

```
new_text = text.tr(original.join, replacements.join) 
```

[红宝石小提琴](http://rubyfiddle.com/riddles/3316a)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T13:17:14.170

看看`String#tr`方法[http://ruby-doc.org/core-1.9.3/String.html#method-i-tr](http://ruby-doc.org/core-1.9.3/String.html#method-i-tr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T17:31:12.207

```
original = ["/", ".", ",", "|"]
replacements = ["_", "_", "_", "__"]

i = 0
original.each do |char|
  text.scan(char).size.times do
    text.sub!(char, replacements[i])
  end
  i = i+1
end 
```

# python - 自定义 QGridLayout 项目选择行为

> ID：11120427
> 
> 赞同：0
> 
> 时间：2012-06-20T13:15:23.843
> 
> 标签：python, qt, pyqt, grid-layout

如何更改通过光标键在 QGridLayout 中选择项目的行为？我想通过左/右光标键水平移动选择，并通过向上/向下键垂直移动选择。谁对此负责？布局、项目容器或标签顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:38:07.000

您可以重新实现`keyPressEvent()`主小部件的方法以捕获按下的键。然后，您可以通过调用`QGridLayout::itemAtPosition (int row, int column)`并设置焦点来访问布局中所需的小部件。

# qt - Qt4：调整哪个小部件专注于开始

> ID：11120428
> 
> 赞同：8
> 
> 时间：2012-06-20T13:15:25.060
> 
> 标签：qt, qt4, window, focus

如果我不重新实现`QMainWindow::showEvent()`（它将包含该小部件的 setFocus() 方法），有没有办法让某些小部件在加载窗口时首先获得焦点？我使用 Qt4 的表单编辑器，但找不到配置它的地方。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T13:45:23.303

您可以在 Qt Designer 中设置[Tab 键顺序](http://qt-project.org/doc/qt-4.8/designer-tab-order.html)，也可以在 Qt Creator 中设置 Designer 组件。选项卡顺序中的第一个小部件应该关注加载。

> ![标签顺序](../Images/ee3405958561cbd1a06433ef4e8e1cb3.png)
> 
> 许多用户希望能够仅使用键盘在小部件和控件之间导航。Qt 允许用户使用`Tab`和`Shift+Tab`键盘快捷键在输入小部件之间导航。默认选项卡顺序基于构建小部件的顺序。尽管这个顺序对于许多用户来说可能已经足够了，但通常最好明确指定 Tab 键顺序以使您的应用程序更易于使用。
> 
> **设置标签顺序**
> 
> 要进入跳位顺序编辑模式，请打开*编辑*菜单并选择*编辑跳位顺序*。在此模式下，表单中的每个输入小部件都显示有一个数字，指示其在 Tab 键顺序中的位置。因此，如果用户将输入焦点赋予第一个输入小部件，然后按 Tab 键，则焦点将移动到第二个输入小部件，依此类推。
> 
> 通过按正确顺序单击每个数字来定义跳位顺序。您单击的第一个数字将变为红色，表示当前在跳位顺序链中编辑的位置。与数字关联的小部件将成为标签顺序链中的第一个。单击另一个小部件将使其成为选项卡顺序中的第二个，依此类推。
> 
> 重复此过程，直到您对表单中的 Tab 键顺序感到满意——如果您看到剩余的小部件已按正确的顺序排列，则无需单击每个输入小部件。已设置顺序的数字变为绿色，而尚未单击的数字仍为蓝色。
> 
> 如果您犯了错误，只需在任意数字之外双击​​或从表单的上下文菜单中选择重新启动以重新开始。如果您的表单上有许多小部件，并且想在跳位顺序链的中间或末端更改跳位顺序，您可以在任何位置对其进行编辑。按下`Ctrl`并单击要开始的号码。或者，在上下文菜单中选择*从此处开始。*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-20T13:23:11.330

从未使用过表单编辑器，但您可以在创建主窗口后在代码中调用小部件[setFocus 方法。](http://qt-project.org/doc/qt-4.8/qwidget.html#setFocus)

# c# - 更新多级嵌入式 mongo 数组

> ID：11120439
> 
> 赞同：4
> 
> 时间：2012-06-20T13:15:58.697
> 
> 标签：c#, mongodb

我无法找到正确的语法来替换嵌套在集合中的多个级别的对象数组。我的偏好是只更新单个属性，但由于阅读了下面的链接，似乎替换整个数组是最好的选择。

[https://jira.mongodb.org/browse/SERVER-831](https://jira.mongodb.org/browse/SERVER-831)

所以我有以下类作为例子：

```
public class Parent
    {
        public ObjectId _id { get; set; }
        public string Firstname { get; set; }
        public string Lastname { get; set; }
        public Collection<Child> Children { get; set; }
    }

    public class Child
    {
        public ObjectId _id { get; set; }
        public string Firstname { get; set; }
        public string Lastname { get; set; }
        public Collection<Pet> Pets { get; set; }
    }

    public class Pet
    {
        public string Name { get; set; }
    } 
```

使用以下代码，我创建了一个 Parent，添加了一些 Children，并将 Pet 添加到其中一个孩子。

```
// Construct Objects
Parent parent = new Parent() { _id = new ObjectId("4f979621682dbc1a8cefecb1") };

Collection<Child> children = new Collection<Child>();
Collection<Pet> pets = new Collection<Pet>();

children.Add(new Child() 
    { _id = new ObjectId("4f979621682dbc1a8cefecaf"), 
      Firstname = "Child", 
      Lastname = "One" });
children.Add(new Child() 
    { _id = new ObjectId("4f979621682dbc1a8cefecb0"), 
      Firstname = "Child", 
      Lastname = "Two" });
pets.Add(new Pet() { Name = "Fishy" });

parent.Children = children;
parent.Children[0].Pets = pets;

// Connect to Mongo
var server = MongoServer.Create("mongodb://localhost/?safe=true");
var db = server.GetDatabase("test");

// Insert into parent collection
MongoCollection<Parent> parents;
parents = db.GetCollection<Parent>("parents");
parents.Insert<Parent>(parent, MongoDB.Driver.SafeMode.True); 
```

这成功插入对象，生成以下 JSON 结果：

```
{   "_id" : ObjectId("4f979621682dbc1a8cefecb1"),
    "Firstname" : null,
    "Lastname" : null,
    "Children" : 
    [
        {
            "_id" : ObjectId("4f979621682dbc1a8cefecaf"),
            "Firstname" : "Child",
            "Lastname" : "One",
            "Pets" : 
            [
                {
                    "Name" : "Fishy"
                }
            ]
        },
        {
            "_id" : ObjectId("4f979621682dbc1a8cefecb0"),
            "Firstname" : "Child",
            "Lastname" : "Two",
            "Pets" : null
        }
    ]
} 
```

更新单个文档元素似乎也是一个微不足道的过程，并且可以使用以下代码成功运行。

```
// Change children's name
var query = new QueryDocument { { "Children._id", new ObjectId("4f979621682dbc1a8cefecaf") } };
var update = Update.Set("Children.$.Firstname", "Something");
parents.Update(query, update); 
```

现在我无法解决的问题是如何替换 Pets 数组。以下代码无法编译，因为 Update.Set 不接受集合。

```
// Change pets information
pets[0].Name = "Fishy2"; // change to pet
pets.Add(new Pet() { Name = "Doggy" }); // add new pet

query = new QueryDocument { { "Children._id", new ObjectId("4f979621682dbc1a8cefecaf") } };
update = Update.Set("Children.$.Pets", pets);
parents.Update(query, update); 
```

那么，让我能够更新 Pets 数组中的详细信息的最佳过程是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:25:17.517

这是您要查找的代码：您需要将 BsonArray 传递给 Update.Set 值。要创建该数组，您需要将每个“宠物”包装在 BsonDocumentWrapper 中，以便序列化库知道如何适当地序列化它们。

```
var query = new QueryDocument { { "Children._id", new ObjectId("4f979621682dbc1a8cefecaf") } };
var petDocuments = BsonDocumentWrapper.CreateMultiple(pets);
var petArray = new BsonArray(petDocuments);
var update = Update.Set("Children.$.Pets", petArray);
parents.Update(query, update); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T00:32:46.320

```
> db.Questions.find().pretty()
{
        "Answers" : [
                {
                        "_id" : ObjectId("52ae4946e1df9e1b10e1f6e1"),
                        "Text" : "ans",
                        "Comments" : [ ]
                }
        ],
        "CreatedDate" : ISODate("2013-12-16T00:28:47.790Z"),
        "QuestionText" : "test",
        "QuestionTitle" : "test",
        "Tag" : "test",
        "UserID" : "singleuserid_777",
        "_id" : ObjectId("52ae493fe1df9e1b10e1f6e0")
}
> 
```

现在，如果我需要更新 Questions 集合中 Answers 数组中的 Comments 数组，那么我的 C#.Net 代码将是

```
 base.GetContext.Collection.Find(Query.EQ("Answers._id", ObjectId.Parse(Id))).Collection.Update(Query.EQ("Answers._id", ObjectId.Parse(Id)),MongoDB.Driver.Builders.Update.PushWrapped("Answers.$.Comments", comm)); 
```

# sql - SQL - 如何从两个表中获取数据

> ID：11120447
> 
> 赞同：0
> 
> 时间：2012-06-20T13:16:19.227
> 
> 标签：sql, ruby-on-rails, postgresql

我有这些表：

## 表_a

```
user_id
article_id
created_at 
```

## 文章

```
user_id
created_at
... 
```

我需要从两个表中为各个用户获取所有行（比如说**user_id=1**）并按 column 对它们进行排序`created_at`。怎么做？

我试图这样做：

```
Model.find_by_sql('SELECT table_a.* FROM table_a JOIN articles ON articles.user_id = 1 WHERE table_a.user_id = 1') 
```

但是这个查询不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:19:14.013

试试这个

```
SELECT table_a.* ,articles.*
FROM table_a 
LEFT JOIN articles ON articles.user_id = table_a.user_id 
WHERE table_a.user_id = 1
ORDER BY table_a. created_at 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:19:35.060

```
SELECT
  table_a.*
FROM 
 table_a
JOIN 
 articles 
ON 
 articles.user_id = table_a.user_id 
WHERE 
 table_a.user_id = 1
ORDER BY
 table_a.created_at ASC; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:31:23.160

我会尝试以下查询： `SELECT table_a.*, articles.* FROM table_a JOIN articles ON articles.user_id = table_a.user_id WHERE table_a.user_id = 1 ORDER BY table_a.created_at ASC;`

# ios - NSURLAuthenticationMethodServerTrust 是 ssl

> ID：11120449
> 
> 赞同：4
> 
> 时间：2012-06-20T13:16:25.043
> 
> 标签：ios, ipad, nsurlconnection

我无法理解 NSURLAuthenticationMethodServerTrust。在我的应用程序中，我必须同时使用基于服务器的 http 和 https 连接。我的问题是，如果我收到 NSURLAuthenticationMethodServerTrust 挑战，是否可以安全地假设它是 https 连接。我究竟应该如何应对这一挑战。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-04T09:55:21.683

我不确定接收是否`NSURLAuthenticationMethodServerTrust`总是表示 https 连接。我不明白为什么或如何简单的 http 连接会导致`NSURLAuthenticationMethodServerTrust`身份验证挑战，所以我假设它是 https，但我不确定。但是`NSURLAuthenticationChallenge`有一个`NSURLProtectionSpace`，而后者又具有一个属性[`receivesCredentialSecurely`](https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLProtectionSpace_Class/index.html#//apple_ref/occ/instp/NSURLProtectionSpace/receivesCredentialSecurely)。文档有点不具体，但我假设此属性表示与服务器的安全连接，在 http/https 情况下，这意味着它是 https。

关于回复的内容，macnetworkprog-mailinglist 上有一个关于此主题的有用线程：[问题](https://lists.apple.com/archives/macnetworkprog/2012/Jul/msg00011.html)+[答案](https://lists.apple.com/archives/macnetworkprog/2012/Jul/msg00012.html)

总结：这`NSURLAuthenticationMethodServerTrust`不是关于你，客户端，响应服务器的身份验证挑战，而是给你，客户端，检查你是否应该信任服务器的机会。在这种情况下`protectionSpace`，挑战包含一个`serverTrust`对象/结构，其中包含验证该服务器是否应该被信任所需的所有信息。通常，您会使用该`SecTrustEvaluate`功能来检查`serverTrust`并根据检查结果采取行动。您可以在此处找到更多信息：[正确覆盖 TLS 链验证](https://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/NetworkingTopics/Articles/OverridingSSLChainValidationCorrectly.html#//apple_ref/doc/uid/TP40012544)

如果检查确定服务器应该是可信的，您可以[使用该](https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLCredential_Class/index.html#//apple_ref/occ/clm/NSURLCredential/credentialForTrust:)[对象](https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLCredential_Class/index.html#//apple_ref/occ/clm/NSURLCredential/credentialForTrust:)[创建一个`NSURLCredential``serverTrust`](https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLCredential_Class/index.html#//apple_ref/occ/clm/NSURLCredential/credentialForTrust:)并将其传递给身份验证质询发送者/完成块。

您可以在这里找到 Apple 提供的一个相当广泛的示例项目：http: [//developer.apple.com/library/ios/#samplecode/AdvancedURLConnections/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/AdvancedURLConnections/Introduction/Intro.html) 它已经很老了（iOS 3/4，pre-Arc）和只处理`NSURLConnectionDelegate`必须委托方法而不是委托方法的旧方法（如新方法和`NSURLSessionDelegate`）。但是那里显示的验证以及您可以实施的不同方案仍然适用，并且应该可以轻松转移到`NSURLSession`.

# c# - 从 C# 应用程序运行 PowerShell 脚本

> ID：11120452
> 
> 赞同：18
> 
> 时间：2012-06-20T13:16:39.820
> 
> 标签：c#, c#-4.0, powershell, console-application

我正在尝试从 ac# 应用程序执行 PowerShell 脚本。该脚本必须在特殊的用户上下文下执行。

我尝试了不同的场景，有些可行，有些不行：

**1\. PowerShell直接调用**

我直接从在正确用户凭据下运行的 ps-console 调用了该脚本。

```
C:\Scripts\GroupNewGroup.ps1 1 
```

**结果：**成功运行脚本。

**2.来自ac#控制台应用程序**

我从 ac# consoleapplication 调用了脚本，该脚本在正确的用户凭据下启动。

代码：

```
 string cmdArg = "C:\\Scripts\\GroupNewGroup.ps1 1"
 Runspace runspace = RunspaceFactory.CreateRunspace();
 runspace.ApartmentState = System.Threading.ApartmentState.STA;
 runspace.ThreadOptions = PSThreadOptions.UseCurrentThread;

     runspace.Open();

 Pipeline pipeline = runspace.CreatePipeline();

 pipeline.Commands.AddScript(cmdArg);
 pipeline.Commands[0].MergeMyResults(PipelineResultTypes.Error, PipelineResultTypes.Output);
 Collection<PSObject> results = pipeline.Invoke();
 var error = pipeline.Error.ReadToEnd();
 runspace.Close();

 if (error.Count >= 1)
 {
     string errors = "";
     foreach (var Error in error)
     {
         errors = errors + " " + Error.ToString();
     }
 } 
```

**结果：**没有成功。还有很多“空数组”异常。

**3\. 来自 ac# 控制台应用程序 - 代码端模拟**

（[http://platinumdogs.me/2008/10/30/net-c-impersonation-with-network-credentials](http://platinumdogs.me/2008/10/30/net-c-impersonation-with-network-credentials)）

我从 ac# consoleapplication 调用了脚本，该脚本在正确的用户凭据下启动，并且代码包含模拟。

代码：

```
using (new Impersonator("Administrator2", "domain", "testPW"))

                   {
  using (RunspaceInvoke invoker = new RunspaceInvoke()) 
{ 
    invoker.Invoke("Set-ExecutionPolicy Unrestricted"); 
} 

     string cmdArg = "C:\\Scripts\\GroupNewGroup.ps1 1";
     Runspace runspace = RunspaceFactory.CreateRunspace();
     runspace.ApartmentState = System.Threading.ApartmentState.STA;
     runspace.ThreadOptions = PSThreadOptions.UseCurrentThread;

         runspace.Open();

     Pipeline pipeline = runspace.CreatePipeline();

     pipeline.Commands.AddScript(cmdArg);
     pipeline.Commands[0].MergeMyResults(PipelineResultTypes.Error, PipelineResultTypes.Output);
     Collection<PSObject> results = pipeline.Invoke();
     var error = pipeline.Error.ReadToEnd();
     runspace.Close();

     if (error.Count >= 1)
     {
         string errors = "";
         foreach (var Error in error)
         {
             errors = errors + " " + Error.ToString();
         }
     }
 } 
```

**结果：**

*   术语“Get-Contact”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。
*   术语“C:\Scripts\FunctionsObjects.ps1”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。
*   没有为 Windows PowerShell 版本 2 注册任何管理单元。Microsoft.Office.Server，版本=14.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c
*   System.DirectoryServices.AccountManagement，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089
*   使用“1”参数调用“.ctor”的异常：“`http://XXXX/websites/Test4/`找不到 Web 应用程序。请验证您是否正确键入了 URL。如果 URL 应该提供现有内容，系统管理员可能需要添加映射到预期应用程序的新请求 URL。”
*   您不能在空值表达式上调用方法。无法索引到空数组。

**直到现在还没有有效的答案**

有谁知道为什么存在差异以及如何解决问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T13:22:51.093

你有没有尝试过`Set-ExecutionPolicy Unrestricted`

```
using ( new Impersonator( "myUsername", "myDomainname", "myPassword" ) ) 
{ 
    using (RunspaceInvoke invoker = new RunspaceInvoke()) 
    { 
        invoker.Invoke("Set-ExecutionPolicy Unrestricted"); 
    } 
} 
```

编辑：

找到了这个小宝石... [http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)

```
namespace Tools
{
    #region Using directives.
    // ----------------------------------------------------------------------

    using System;
    using System.Security.Principal;
    using System.Runtime.InteropServices;
    using System.ComponentModel;

    // ----------------------------------------------------------------------
    #endregion

    /////////////////////////////////////////////////////////////////////////

    /// <summary>
    /// Impersonation of a user. Allows to execute code under another
    /// user context.
    /// Please note that the account that instantiates the Impersonator class
    /// needs to have the 'Act as part of operating system' privilege set.
    /// </summary>
    /// <remarks>   
    /// This class is based on the information in the Microsoft knowledge base
    /// article http://support.microsoft.com/default.aspx?scid=kb;en-us;Q306158
    /// 
    /// Encapsulate an instance into a using-directive like e.g.:
    /// 
    ///     ...
    ///     using ( new Impersonator( "myUsername", "myDomainname", "myPassword" ) )
    ///     {
    ///         ...
    ///         [code that executes under the new context]
    ///         ...
    ///     }
    ///     ...
    /// 
    /// Please contact the author Uwe Keim (mailto:uwe.keim@zeta-software.de)
    /// for questions regarding this class.
    /// </remarks>
    public class Impersonator :
        IDisposable
    {
        #region Public methods.
        // ------------------------------------------------------------------

        /// <summary>
        /// Constructor. Starts the impersonation with the given credentials.
        /// Please note that the account that instantiates the Impersonator class
        /// needs to have the 'Act as part of operating system' privilege set.
        /// </summary>
        /// <param name="userName">The name of the user to act as.</param>
        /// <param name="domainName">The domain name of the user to act as.</param>
        /// <param name="password">The password of the user to act as.</param>
        public Impersonator(
            string userName,
            string domainName,
            string password )
        {
            ImpersonateValidUser( userName, domainName, password );
        }

        // ------------------------------------------------------------------
        #endregion

        #region IDisposable member.
        // ------------------------------------------------------------------

        public void Dispose()
        {
            UndoImpersonation();
        }

        // ------------------------------------------------------------------
        #endregion

        #region P/Invoke.
        // ------------------------------------------------------------------

        [DllImport("advapi32.dll", SetLastError=true)]
        private static extern int LogonUser(
            string lpszUserName,
            string lpszDomain,
            string lpszPassword,
            int dwLogonType,
            int dwLogonProvider,
            ref IntPtr phToken);

        [DllImport("advapi32.dll", CharSet=CharSet.Auto, SetLastError=true)]
        private static extern int DuplicateToken(
            IntPtr hToken,
            int impersonationLevel,
            ref IntPtr hNewToken);

        [DllImport("advapi32.dll", CharSet=CharSet.Auto, SetLastError=true)]
        private static extern bool RevertToSelf();

        [DllImport("kernel32.dll", CharSet=CharSet.Auto)]
        private static extern  bool CloseHandle(
            IntPtr handle);

        private const int LOGON32_LOGON_INTERACTIVE = 2;
        private const int LOGON32_PROVIDER_DEFAULT = 0;

        // ------------------------------------------------------------------
        #endregion

        #region Private member.
        // ------------------------------------------------------------------

        /// <summary>
        /// Does the actual impersonation.
        /// </summary>
        /// <param name="userName">The name of the user to act as.</param>
        /// <param name="domainName">The domain name of the user to act as.</param>
        /// <param name="password">The password of the user to act as.</param>
        private void ImpersonateValidUser(
            string userName, 
            string domain, 
            string password )
        {
            WindowsIdentity tempWindowsIdentity = null;
            IntPtr token = IntPtr.Zero;
            IntPtr tokenDuplicate = IntPtr.Zero;

            try
            {
                if ( RevertToSelf() )
                {
                    if ( LogonUser(
                        userName, 
                        domain, 
                        password, 
                        LOGON32_LOGON_INTERACTIVE,
                        LOGON32_PROVIDER_DEFAULT, 
                        ref token ) != 0 )
                    {
                        if ( DuplicateToken( token, 2, ref tokenDuplicate ) != 0 )
                        {
                            tempWindowsIdentity = new WindowsIdentity( tokenDuplicate );
                            impersonationContext = tempWindowsIdentity.Impersonate();
                        }
                        else
                        {
                            throw new Win32Exception( Marshal.GetLastWin32Error() );
                        }
                    }
                    else
                    {
                        throw new Win32Exception( Marshal.GetLastWin32Error() );
                    }
                }
                else
                {
                    throw new Win32Exception( Marshal.GetLastWin32Error() );
                }
            }
            finally
            {
                if ( token!= IntPtr.Zero )
                {
                    CloseHandle( token );
                }
                if ( tokenDuplicate!=IntPtr.Zero )
                {
                    CloseHandle( tokenDuplicate );
                }
            }
        }

        /// <summary>
        /// Reverts the impersonation.
        /// </summary>
        private void UndoImpersonation()
        {
            if ( impersonationContext!=null )
            {
                impersonationContext.Undo();
            }   
        }

        private WindowsImpersonationContext impersonationContext = null;

        // ------------------------------------------------------------------
        #endregion
    }

    /////////////////////////////////////////////////////////////////////////
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T20:43:58.047

我只是花了一天时间为自己解决这个问题。

**我终于能够通过将-Scope Process**添加到 Set-ExecutionPolicy来使其工作

```
invoker.Invoke("Set-ExecutionPolicy Unrestricted -Scope Process"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:49:24.340

`Several PowerShell cmddlets take a PSCredential object to run using a particular user account`. 可以看看这篇文章 - [http://letitknow.wordpress.com/2011/06/20/run-powershell-script-using-another-account/](http://letitknow.wordpress.com/2011/06/20/run-powershell-script-using-another-account/)

以下是创建包含要使用的用户名和密码的 Credential 对象的方法：

```
$username = 'domain\user'
$password = 'something'
$cred = New-Object System.Management.Automation.PSCredential -ArgumentList @($username,(ConvertTo-SecureString -String $password -AsPlainText -Force)) 
```

准备好在凭证对象中使用的密码后，您可以执行许多操作，例如调用 Start-Process 以启动 PowerShell.exe、在 -Credential 参数中指定凭证，或调用 Invoke-Command 以调用“ remote" 命令在本地，`specifying the credential in the -Credential parameter`或者您可以调用 Start-Job 作为后台作业来完成工作，`passing the credentials you want into the -Credential parameter`.

[有关更多信息](http://letitknow.wordpress.com/2011/06/20/run-powershell-script-using-another-account/)，请参见[此处](http://blogs.msdn.com/b/koteshb/archive/2010/02/13/powershell-creating-a-pscredential-object.aspx)、[此处](http://powergui.org/thread.jspa?threadID=13759)和在[msdn](http://technet.microsoft.com/en-us/magazine/ff714574.aspx)中

# perl - 使用 cpan 安装 Perl 模块时遇到问题

> ID：11120464
> 
> 赞同：1
> 
> 时间：2012-06-20T13:17:12.317
> 
> 标签：perl, cpan

必须从 Apple 下载命令行工具才能使 make 工作，但不确定这是否仍然是问题所在？

```
cpan[8]> install HTML::Template
Running install for module 'HTML::Template'
Running make for W/WO/WONKO/HTML-Template-2.91.tar.gz
  Has already been unwrapped into directory /Users/jaldama/.cpan/build/HTML-Template-2.91-    0bPiwL
  Has already been made
Running make test
  Has already been tested successfully
Running make install
Already tried without success 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:36:10.440

最终以 root 身份运行，这解决了明显的权限问题，但我将遵循 @daxim 的建议，将我自己的 Perl 分开。

# hibernate - 删除一对多单向休眠映射

> ID：11120466
> 
> 赞同：0
> 
> 时间：2012-06-20T13:17:21.253
> 
> 标签：hibernate, jpa

在单向休眠映射中删除父级的最佳做法是什么？（我正在使用 JPA）

```
Parent: 
@OneToMany(mappedBy = "parent", fetch = FetchType.LAZY)
private List<Child> children= new ArrayList<Child>();

Child:
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "fk_parent")
private Parent parent; 
```

孩子是这里关系的所有者，我想删除一个有孩子关联的父母。我如何实现它？我应该继续从父级中逐个迭代子级并删除它们，还是存在其他方式。不幸的是，在休眠文档中没有找到任何关于删除的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:49:39.053

所以事实上，你的关联是双向的，而不是单向的......

如果您的目标是在删除父级时删除子级，那么您只需要

```
@OneToMany(mappedBy = "parent", fetch = FetchType.LAZY, cascade = CascadeType.REMOVE)
private List<Child> children= new ArrayList<Child>(); 
```

和

```
em.remove(parent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:46:27.190

天哪！发现了问题。这与级联无关，但需要级联。问题在于我将孩子添加到父母并删除它们的方式。所以总结一下：

如果我在父级上执行保存以创建关联：

```
parent.addChild(child)  
em.save(parent) 
```

那么我必须在删除时从父级操作。或者，如果我将孩子添加为

```
child.setParent(parent)
em.save(child) 
```

然后我必须对孩子进行操作以删除它等等。

# javascript - 我可以将变量组合成一个 javascript 对象吗？

> ID：11120468
> 
> 赞同：2
> 
> 时间：2012-06-20T13:17:28.850
> 
> 标签：javascript

我有以下代码：

```
var submitHandler = function ($link, $form, close) {

   var val = $form.valid();
   var action = $form.attr('data-action')
   var entity = $form.attr('data-entity')
   var href = $form.attr('data-href');
   var rownum = $link.attr('data-row');
   var $row = $('#row_' + rownum);
   var $submitBt = $('.block-footer button:contains("Submit")');
   .....
   .....
   jsonSuccessModal(action, rownum, close, $form, $submitBt, $row);

}

function jsonSuccessModal(action, rownum, close, $form, $submitBt, $row) {
    ...
} 
```

除了有很多参数之外，还有一种方法可以在第一个代码块中组合变量，然后只需将表示组合的对象发送到 jsonSuccessModal。像匿名对象之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:20:23.547

```
var submitHandler = function (data) {
    data.link; // Do something...
    data.form; // Do something...
    ...
};

submitHandler({
    link: "foo",
    form: "form",
    close: "close"
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:21:10.330

您可以创建自己的对象并将其发送过来。当想要访问数据时也会更容易。 [http://www.howtocreate.co.uk/tutorials/javascript/objects](http://www.howtocreate.co.uk/tutorials/javascript/objects)展示了如何制作自己的对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:25:02.750

这是我在需要大量参数的函数上使用的模式（不过使用 jQuery）：

```
var myFunc = function (parameters) {
    // any parameters not passed will be defaulted here
    parameters = $.extend({
        foo: 1,
        bar: 'hello',
        biz: false
    }, parameters || {}); // default parameters to an empty object if it is not passed at all

    // use the parameters like you normally would
    var answer = 6 + parameters.foo;
};

// call the function using an object
myFunc({ foo: 2, bar: 'goodbye'}); // notice biz will be defaulted to false 
```

如果你不想使用 jquery，你可以使用类似这样的东西而不是`$.extend`（未经测试）

```
var extend = function (defaultObject, sourceObject) {
    for (var key in defaultObject) {
        if (!sourceObject.hasOwnProperty(key)) {
            sourceObject[key] = defaultObject[key];
        }
    }
    return sourceObject;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T13:30:41.107

在一般情况下，您的问题的答案是否定的——javascript 不支持关键字参数解包，例如在 Python ( `**kwargs`) 中。你可以尝试“扩展”Javascript 来支持这种特性，但是代码会很尴尬（因为这种语言也没有反射支持）：

```
function paramNames(func) {
    return func.toString().match(/\(([^)]+)\)/)[1].split(/[\s,]+/)
}

function callWithKwargs(func, args, thisptr) {
    return func.apply(thisptr || this,
        paramNames(func).map(function(e) { return args[e] }));
}

// example:

function foo(bar, baz, spam) {
    console.log('bar', bar, 'baz', baz, spam, 'spam'); 
}

callWithKwargs(foo, {
    spam: 'bacon',
    baz: 'hello',
    bar: 'barbar'
}) 
```

也就是说，如果有问题的函数是你的，你可以像已经建议的那样简单地将一个对象传递给它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-20T13:21:44.730

是的，你可以像下面那样做

```
var submitHandler = function ($link, $form, close) {
   var obj ={
 val = $form.valid();
 action = $form.attr('data-action')
 entity = $form.attr('data-entity')
 href = $form.attr('data-href');
 rownum = $link.attr('data-row');
 $row = $('#row_' + rownum);
 $submitBt = $('.block-footer button:contains("Submit")');};
   jsonSuccessModal(obj);

} 
```

# javascript - javascript向左/向右滑动div

> ID：11120469
> 
> 赞同：0
> 
> 时间：2012-06-20T13:17:30.807
> 
> 标签：javascript, jquery

嘿伙计们！我想做一个div的滑动切换效果。下面是我的html文件中的代码。我的 div 是 500px 宽 x 50px 高。当按下 div 内的第一个图像时，我想让它在屏幕上向左/向右滑动。这是一个工具箱，其中包含几个图标。左边的第一张图片 - left.jpg 应该是一张 swop 图片（某种按钮 - 这是一个指向左侧的箭头，在移动 div 后，这个箭头应该指向右侧 - 我的意思是应该更改图片）。我浏览了网络并看到了使用 jQuery 的不同示例，但找不到满足我需求的确切解决方案。我知道这是一个很棒的社区，希望有人能帮助解决这个问题！先感谢您！！！

```
<script> 
$(function(){
$("#clicky").click(function(){
    $("#slide").animate({marginLeft:'500px'},'slow');   
});
});
</script>
<div id="slide">
<img  id="clicky" src="left.jpg" width="15" height="15" />
Div Content here...</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:18:06.380

作为第三个参数，您可以传递一个函数，该函数将在动画完成时触发。像这样的东西：

```
$("#slide").animate({marginLeft:'500px'},'slow', function(){
  $("img#clicky").attr("src", "right.jpg");
}); 
```

# java - 在 Java 中实现这种模式的最佳方法（里面的 Python 示例）？

> ID：11120471
> 
> 赞同：1
> 
> 时间：2012-06-20T13:17:39.007
> 
> 标签：java, python, loops

我还是 Java 语言和库的新手……我经常在 Python 中使用这种模式，想知道我应该如何用 Java 实现这个模式。

我需要逐行读取一个巨大的文件，并带有某种 xml 标记（我正在生成输入，所以我确信不会有任何歧义）

我想在大文件的某些部分中进行迭代，例如下面的 python 代码：

（使用yield / python迭代器模式......在Java中有任何等价物吗？我真的很喜欢`for item in my collection: yield something_about(many items)`）

实现这种行为的最佳（java）方法是什么？

谢谢

**第一次编辑：**顺便说一句，我也会对 List 和 File 之间的类似映射感兴趣，从 Python 的角度来看，使用 file 和 [python list,] 如果当然可以使用 Java => 答案：请参阅 Jeff Foster使用建议：Apache.IOUtils

```
def myAcc(instream, start, end):
    acc = []
    inside = False
    for line in instream:
        line = line.rstrip()
        if line.startswith(start):
            inside = True
        if inside:
            acc.append(line)
        if line.startswith(end):
            if acc:
                yield acc
                acc = []
            inside = False

f = open("c:/test.acc.txt")

s = """<c>
<a>
this is a test
</a>
<b language="en" />
</c>
<c>
<a>
ceci est un test
</a>
<b language="fr" />
</c>
<c>
<a>
esta es una prueba
</a>
<b language="es" />
</c>"""

f = s.split("\n")   # here mimic for a input file...

print "Reading block from <c> tag!"
for buf in myAcc(f, "<c>", "</c>"):
    print buf # actually process this inner part... printing is for simplification
    print "-" * 10

print "Reading block from <a> tag!"
for buf in myAcc(f, "<a>", "</a>"):
    print buf  # actually process this inner part...
    print "-" * 10 
```

输出 ：

```
Reading block from <c> tag!
['<c>', '<a>', 'this is a test', '</a>', '<b language="en" />', '</c>']
----------
['<c>', '<a>', 'ceci est un test', '</a>', '<b language="fr" />', '</c>']
----------
['<c>', '<a>', 'esta es una prueba', '</a>', '<b language="es" />', '</c>']
----------
Reading block from <a> tag!
['<a>', 'this is a test', '</a>']
----------
['<a>', 'ceci est un test', '</a>']
----------
['<a>', 'esta es una prueba', '</a>']
---------- 
```

所以直接受到下面 Jeff Foster 的回答的启发，这里尝试解决我的问题并做与我的 python 代码相同的事情：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;

interface WorkerThing { 
    public void doSomething(List<String> acc); 
} 

class ThatReadsLargeFiles { 
    public void readAHugeFile( BufferedReader input, String start, String end, WorkerThing action) throws IOException { 
        // TODO write some code to read through the file and store it in line 
        List<String> acc = new ArrayList<String> ();
        String line; 
        Boolean inside = false;
        while ((line = input.readLine()) != null) {
            if (line.equals(start)) {
                inside = true;
            }
            if (inside) {
                acc.add(line);
            }
            if (line.equals(end)) {
                if (acc != null && !acc.isEmpty()) { // well not sure if both are needed here...
                    // Here you are yielding control to something else
                    action.doSomething(acc);
                    //acc.clear(); // not sure how to empty/clear a list... maybe : List<String> acc = new ArrayList<String> (); is enough/faster?
                    acc = new ArrayList<String> (); // looks like this is the *right* way to go!
                }
                inside = false;
                // ending
            }
        } 
        input.close();
    } 
 }

public class YieldLikeTest {

    public static void main(String[] args) throws IOException {

        String path = "c:/test.acc.txt";

        File myFile = new File(path);
        BufferedReader in = new BufferedReader(new InputStreamReader(new FileInputStream(myFile), "UTF8"));
        //BufferedReader in = new BufferedReader(new FileReader(path, "utf8"));

        new ThatReadsLargeFiles().readAHugeFile(in, "<a>", "</a>", new WorkerThing() {
                public void doSomething(List<String> acc) {
                    System.out.println(acc.toString());
                }
        });

    }

} 
```

**第二次编辑：**我接受这个答案的速度太快了，实际上，我仍然想念并且有一个误解：我不知道如何获取并跟踪`acc`@最上层（不在匿名类中）的内容。这样它就可以从调用中使用，而不是打印，例如实例化一个类，并进行其他处理......产量允许这种用法，我不知道如何调整建议的答案以具有这种行为. 抱歉，我的 Python 用法/示例太简单了。

所以这是来自 Jeff Foster 对记忆 acc 的解释的答案：

```
class betweenWorker implements WorkerThing {

    private List<String> acc;

    public void process(List<String> acc) {
        this.acc = acc;
    }
    public List<String> getAcc() { return this.acc; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:31:46.973

Java 不支持类似的东西`yield`，但是您可以通过创建一个封装了您将在各个行上执行的操作的接口来实现相同的功能。

```
interface WorkerThing {
  void doSomething(string lineOfText);
}

class ThatReadsLargeFiles {
    public void readAHugeFile(WorkerThing actions) {
        // TODO write some code to read through the file and store it in line

        // Here you are yielding control to something else
        action.doSomething(line);
    }
 } 
```

当你使用它时，你可以使用匿名接口实现来让事情变得更容易忍受。

```
new ThatReadsLargeFiles().readAHugeFile(new WorkerThing() {
    void doSomething(string text) {
        System.out.println(text); 
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:50:16.480

如果我正确理解了 Python 代码和您的任务，则可以通过以下方式完成：

```
// callback representing function to be invoked on String array
public interface Callback {
    void process(List<String> lines);
}

public void processFile(final String path, final String start, final String end, final Callback callback) {
    BufferedReader reader = null;
    try {
        final FileReader fileReader = new FileReader(path);
        reader = new BufferedReader(fileReader);

        List<String> lines = new ArrayList<String>();
        boolean inside = false;

        String line = null;
        while((line = reader.readLine()) != null) {
            if(line.startsWith(start)) {
                inside = true;
            }

            if(inside) {
                lines.add(line);
            }

            if(line.startsWith(end)) {
                inside = false;
                callback.process(lines);
                lines = new ArrayList<String>();
            }
        }
    // following is just boilerplate to correctly close readers
    } catch(final IOException ex) {
        ex.printStackTrace();
    } finally {
        if(reader != null) {
            try {
                reader.close();
            } catch(final IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

然后在你的代码中的某个地方你可以调用这个方法，如下所示：

```
// ...
// creating instance of class implementing Callback interface (this is called 'anonymous' class in Java)
final Callback myCallback = new Callback() {
    public void process(List<String> lines) {
        for(String line : lines) {
           System.out.println(line);
        }
    }
};
processFile("path/to/file", "<c>", "</c>", myCallback);
processFile("path/to/file", "<a>", "</a>", myCallback);
// ... 
```

希望这可以帮助 ...

# c++ - 在不强制固定宽度的情况下删除浮动的科学记数法

> ID：11120473
> 
> 赞同：2
> 
> 时间：2012-06-20T13:17:45.903
> 
> 标签：c++

我正在使用`ofstream`. 99% 的浮点数的精度为小数点后 1-2 位，因此简单地使用`fileOut.precision(3)`就足以强制实现正确的精度。

不时地，浮点数将具有极低的值，因此将以科学记数法输出`1e-007`。在这种情况下，我最好喜欢`0`.

这里的很多答案都建议使用类似于 to的东西`fileOut.setf(std::ios::fixed, std::ios::floatfield);`来防止这种情况，但这会使每个字段都输出，`0.000`而不管它是否需要那么多数字。

我想要的是所有花车都能正常运行并且不显示科学记数法。

有没有办法做到这一点，或者我必须创建一个简单的函数来检查一个 numebr 是否低于，比如说，`0.001`如果是的话，将它设置为 0？

**更新：**

我现在使用以下代码来环绕任何浮点数，它并不理想但可以工作。

```
float _RoundToZero(float in, int precision = 2)
{
  return in <= (1 / powf(10,precision)) ? 0.0 : in;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:37:49.590

`iostream` *抱歉，用and* 是不可能实现的`printf`。唯一的选择是：

*   实现您自己的浮点格式化例程以进行正确的舍入。
*   将浮点数格式化为字符串并修剪零。
*   如果该值小于阈值，则将其四舍五入为零。

第一个很复杂，最后一个不准确（不能精确地表示 10 ^(-n)二进制浮点数）。

所有这些都可以通过覆盖 numput 方面来实现，这将允许您让格式化代码像以前一样干净。

这是最后一个选项的实现：

```
#include <iostream>
#include <locale>
#include <math.h>
using namespace std;

class my_put : public std::num_put<char> {
    iter_type do_put (iter_type out, ios_base& str, char_type fill, double val) const
    {
        streamsize prec = str.precision();
        if((str.flags() & ios_base::floatfield) == ios_base::fixed && fabs(val)*2 <= pow(10.0, -(int)prec))
            str.precision(0);
        out = std::num_put<char>::do_put(out, str, fill, val);
        str.precision(prec);
        return out;
    }
};

int main()
{
    double a[] = {123, 0, 0.001, 0.0001 };
    cout.imbue(locale(cout.getloc(), new my_put));
    cout.precision(3);
    cout.setf(ios_base::fixed, ios_base::floatfield);
    for(int i = 0; i < 4; ++i)
        cout << a[i] << '\n';
} 
```

在此处查看输出：http: [//ideone.com/qaV0w](http://ideone.com/qaV0w)

请注意，边界情况 (0.0005) 的正确性取决于下划线浮点格式和实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:39:25.720

考虑将乘以 100 的值打印为整数（四舍五入以确保准确性）。这样，尽管有时您会得到尾随零，但您永远不必打印小数位，这将浪费每个值 1 个字符。

或者，将浮点数写入二进制。由于所有浮点数都具有相同的大小（4 个字节），因此您可以保留原始的所有精度，而不必担心尾随零，您的文件大小是非常可预测的，并且您不必浪费空间来分隔值。100 个值占用 400 个字节。在文本格式中，一个值至少需要 2 个字节（数字 + 字段分隔符）和最大格式允许的任何内容（包括小数点）加上分隔符。在这种格式中，4 个字节可以获得 2 个有效数字的精度，而不是浮点数的 5 或 6。

# java - 抽象类的子类包含无法访问抽象方法实现的对象

> ID：11120474
> 
> 赞同：2
> 
> 时间：2012-06-20T13:17:53.453
> 
> 标签：java, inheritance, object, subclass, abstract

好的，我会把代码放在第一位，希望它更清楚。

***编辑：问题已解决，通过在创建序列时将序列实例传递给对话框，然后对话框具有要调用的内部引用。

```
public abstract class RavelSequence {
    protected Dialog dialog; //every subclass uses one of these objects
    public abstract void hit();
}

public class BattleSequence extends RavelSequence {
    public void init(){                //this is the edited fix
        dialog.setSequence(this);      //
    }                                  //

    public void hit(){ //the effect of a 'hit' in battle
        doSomething();
    } 
}

public class OutOfBattleSequence extends RavelSequence {
    public void init(){                //this is the edited fix
        dialog.setSequence(this);      //
    }                                  //

    public void hit(){ //the effect of a 'hit' outside battle
        doSomethingElse();
    }
}

public class Dialog extends Container implements Runnable {
    private RavelSequence sequence;                  //this is the edited fix
    public void run (){
        if (somethingHappens)
            sequence.hit();
    }
    public void setSequence (RavelSeqence sequence){ //this is the edited fix
        this.sequence = sequence;                    //
    }                                                //
} 
```

我想要发生的是让Dialog能够调用在拥有Dialog实例的任何类中实现的方法hit()。我正在使用 IntelliJ IDEA，它告诉我“无法从静态上下文引用非静态方法命中”。
整个事情在一个应用程序中运行，该应用程序根据游戏的上下文创建序列对象的实例，因此命中需要引用序列中的非静态对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:19:52.877

因为`hit()`不是静态方法，您需要访问其封闭实例`RavelSequence`才能调用它。

你可以通过使用`this`关键字 if`Dialog`是一个嵌套类来做到这一点：

```
public abstract class RavelSequence {
    public class Dialog extends Container implements Runnable {
        public void run (){
            RavelSequence.this.hit();
        }
    }
    public abstract void hit();
} 
```

否则，您将需要将实例传递`RavelSequence`给`Dialog`实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:24:15.500

您是 Dialog 对象不知道它属于哪个 RavelSequence。所以你试图做的事情是不可能的。在您的对话框中包含一个 RavelSequence 它将正常工作。

例如：

```
public class Dialog extends Container implements Runnable {
    protected RavelSequence sequence;

    public Dialog(RavelSequence sequence) {
        this.sequence = sequence; // or any other mean to set your RavelSequence: setter, dependency injection...
    }

    public void run (){
        if (somethingHappens)
            sequence.hit();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:23:21.870

您需要一个 RavelSequence 实现的实例。因为 RavelSequence 是抽象的，所以不能直接实例化。

```
public class Dialog extends Container implements Runnable {
    public void run (){

        if (somethingHappens)
            RavelSequence  ravel = new OutOfBattleSequence(); // we choose implementation
            ravel.hit();
    }
} 
```

# jquery - jQuery：验证后拦截提交

> ID：11120495
> 
> 赞同：2
> 
> 时间：2012-06-20T13:18:57.887
> 
> 标签：jquery, validation

我正在使用 jQuery 的验证插件来检查我的表单的一些值。验证工作正常，但现在我想在提交表单之前检查其他内容。

这是附加检查，仅应在成功验证表单的所有字段后运行：

```
$("#formname").submit(function() {
    if($("#input").val() == $("#hiddenInput").val() {
        // Everything fine, may submit
        return true;
    } else {
        // Check wasn't successfull, let's alert
        alert("Fix the input");
        return false;
    }
}) 
```

这是插件的实际验证：

```
$("#formname").validate({
    rules: {
        ou: {
            required: true,
            minlength: 2,
            number: true
        },
        directors: {
            required: true,
            number: true
        }
    },
    messages: {
        ou: {
            required: "Message",
            minlength: "Message",
            number: "Message"
        },
        directors: {
            required: "Message",
            number: "Message"
        }
    },
    errorPlacement: function ($error, $element) {
        var name = $element.attr("name");

        $("#" + name + "Error").append($error);
    }
}) 
```

我确实在开头添加了第一个代码片段，但是每次单击提交时都会运行它，无论验证本身是否成功。是否有某种验证返回码或我可以检查的事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:21:55.310

假设相同的插件，添加

```
submitHandler: function(form) {
    alert('your submit code here');
} 
```

为了您的验证，请[在此处参考](http://docs.jquery.com/Plugins/Validation/validate#options)

或者添加如下规则：

```
input: {
      equalTo: "#hiddenInput"
    } 
```

这将像您的其他验证一样验证它。

# jsf - JSF 2 嵌套复合组件，传递 f:validateLength

> ID：11120505
> 
> 赞同：2
> 
> 时间：2012-06-20T13:19:23.407
> 
> 标签：jsf, jsf-2, nested, facelets, composite-component

我正在尝试创建一系列嵌套组件，其中标准 jsf/primefaces 组件包装在标准标记中，并且仍然可以接收标准方面属性等

我在以下代码中遇到问题，将 f:validateLength 应用于指定字段。

```
<util:reducedwrap id="baz" label="Baz">
    <f:validateLength minimum="3" for="value" />
</util:reducedwrap> 
```

## 减少包装.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:cc="http://java.sun.com/jsf/composite" 
    xmlns:util="http://java.sun.com/jsf/composite/components/util">
<cc:interface>
    <cc:attribute name="id"/>
    <cc:attribute name="value"/>
    <cc:editableValueHolder name="value" targets="fld" />
    <cc:attribute name="label"/>
</cc:interface>   
<cc:implementation>
    <util:reducedwrapper label="#{cc.attrs.label}">
        <h:inputText id="fld" value="#{cc.attrs.value}"/>
    </util:reducedwrapper>
</cc:implementation>
</html> 
```

## 减少包装器.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:cc="http://java.sun.com/jsf/composite">
<cc:interface>
    <cc:attribute name="label"/>
</cc:interface>   
<cc:implementation>
    <h:outputLabel for="fld" value="#{cc.attrs.label}" />
    <cc:insertChildren />
    <h:message for="fld" />
</cc:implementation>
</html> 
```

但是，虽然 f:validateLength 正在运行，因此 h:message 看不到“fld”，但 h:outputLabel 会看到并最终以正确生成的 for 属性输出。（这让我很困惑——这是对的吗？两者都是？）

我用于 f:validateLength（或实际上是 h:message）的“for”属性的值是否错误？如果是这样，它应该是什么？

* * *

我进一步减少了代码，以便所有嵌套的东西要么发生在被调用的组件中（util:reduced），要么直接从它调用（util:reducedsplit）。此代码（以及调用它们的示例页面）位于此消息的末尾。

两者都按我的预期工作，但似乎都不是理想的解决方案。

util:reduced 显然需要在使用此模式的任何其他组件中复制代码。

util:reducedsplit 有效，尽管我可以在其他组件中插入 2 个组件，但由于有效性考虑，我无法将任何包装标记（我确实拥有）移动到组件。所以无论如何都需要复制。

这让我回想起如何让 util:reducedwrap 按我的意愿工作

还是我应该去自定义组件路线？

精简代码如下：

## 减少composite.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:util="http://java.sun.com/jsf/composite/components/util">
    <h:body>
        <h:form id="default">
            util:reduced<br />
            <util:reduced id="foo" label="Foo">
                <f:validateLength minimum="5" for="value" />
            </util:reduced>
            <hr />
            util:reducedsplit<br />
            <util:reducedsplit id="bar" label="Bar">
                <f:validateLength minimum="4" for="value" />
            </util:reducedsplit>
            <hr />
            util:reducedwrap<br />
            <util:reducedwrap id="baz" label="Baz">
                <f:validateLength minimum="3" for="value" />
            </util:reducedwrap>
            <hr /> 
            <h:commandButton value="Do it!" />
        </h:form>
    </h:body>
</html> 
```

实用组件 (/resources/components/util)

## 减少的.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:cc="http://java.sun.com/jsf/composite">
<cc:interface>
    <cc:attribute name="id"/>
    <cc:attribute name="value"/>
    <cc:editableValueHolder name="value" targets="fld" />
    <cc:attribute name="label"/>
</cc:interface>   
<cc:implementation>
    <h:outputLabel for="fld" value="#{cc.attrs.label}" />
    <h:inputText id="fld" value="#{cc.attrs.value}"/>
    <h:message for="fld" />
</cc:implementation>
</html> 
```

## 缩减拆分.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:cc="http://java.sun.com/jsf/composite" 
    xmlns:util="http://java.sun.com/jsf/composite/components/util">
<cc:interface>
    <cc:attribute name="id"/>
    <cc:attribute name="value"/>
    <cc:editableValueHolder name="value" targets="fld" />
    <cc:attribute name="label"/>
</cc:interface>   
<cc:implementation>
    <util:reducedlabel label="#{cc.attrs.label}" />
    <h:inputText id="fld" value="#{cc.attrs.value}"/>
    <util:reducedmessage />
</cc:implementation>
</html> 
```

## 减少标签.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:cc="http://java.sun.com/jsf/composite" >
<cc:interface>
    <cc:attribute name="label"/>
</cc:interface>
<cc:implementation>
    <h:outputLabel for="fld" value="#{cc.attrs.label}" />
</cc:implementation>
</html> 
```

## 减少消息.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:cc="http://java.sun.com/jsf/composite" >
<cc:interface>
</cc:interface>
<cc:implementation>
    <h:message for="fld" />
</cc:implementation>
</html> 
```

## 减少包装.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:cc="http://java.sun.com/jsf/composite" 
    xmlns:util="http://java.sun.com/jsf/composite/components/util">
<cc:interface>
    <cc:attribute name="id"/>
    <cc:attribute name="value"/>
    <cc:editableValueHolder name="value" targets="fld" />
    <cc:attribute name="label"/>
</cc:interface>   
<cc:implementation>
    <util:reducedwrapper label="#{cc.attrs.label}">
        <h:inputText id="fld" value="#{cc.attrs.value}"/>
    </util:reducedwrapper>
</cc:implementation>
</html> 
```

## 减少包装器.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:cc="http://java.sun.com/jsf/composite">
<cc:interface>
    <cc:attribute name="label"/>
</cc:interface>   
<cc:implementation>
    <h:outputLabel for="fld" value="#{cc.attrs.label}" />
    <cc:insertChildren />
    <h:message for="fld" />
</cc:implementation>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-28T16:10:38.913

迟到总比没有好，你需要这个：

```
<composite:interface>
    ...
   <composite:editableValueHolder name="value" targets="inputText" />
    ...
</composite:interface>

<composite:implementation>
    ...
   <h:inputText id="inputText" value="#{cc.attrs.value}" />
    ...
</composite:implementation> 
```

假设该组件名为“inputText”，您将以传统方式使用它：

```
<util:inputText value="#{beanName.valueForInput}">
    <f:validateLength minimum="10" />
</util:inputText> 
```

# c# - 如何检测 Windows 7 开始菜单何时打开

> ID：11120514
> 
> 赞同：6
> 
> 时间：2012-06-20T13:19:42.983
> 
> 标签：c#, wpf, windows-7

我用 C# 编写了一个 WPF 应用程序，我想在每次打开开始菜单时显示它，并在菜单关闭时再次隐藏它。*我宁愿这样做而不轮询开始菜单的状态。*到目前为止，我已经尝试收听 SHELLHOOK 消息，但我没有看到任何有用的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:45:23.310

我不能给你写完整的代码，但这是它背后的逻辑，

1.  首先使用找到任务栏的句柄

    ```
    [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr FindWindow(string lpClassName, string lpWindowName); 
    ```

    也`Shell_TrayWnd`作为 lpClassName传递

2.  通过模拟点击按钮激活**开始菜单。**

3.  获取**开始菜单的窗口句柄**

4.  使用`GetWindowLong`功能检查它是否打开。

# android - Android和谷歌地图的奇怪错误

> ID：11120522
> 
> 赞同：2
> 
> 时间：2012-06-20T13:19:56.080
> 
> 标签：android, google-maps

我在使用谷歌地图的地方创建应用程序。我得到错误：

```
06-20 15:23:51.262: W/System.err(28660): java.io.IOException: Server returned: 3
06-20 15:23:51.272: W/System.err(28660):    at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
06-20 15:23:51.272: W/System.err(28660):    at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
06-20 15:23:51.272: W/System.err(28660):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
06-20 15:23:51.272: W/System.err(28660):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
06-20 15:23:51.272: W/System.err(28660):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
06-20 15:23:51.272: W/System.err(28660):    at java.lang.Thread.run(Thread.java:1019) 
```

你能告诉我这个错误的原因是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:29:42.440

您的地图 api 密钥是问题...，使用您用于创建 apk 的相同密钥库为您的 apk 生成正确的地图密钥。要签入模拟器，请为您的 SDK 创建 api 密钥。

参考这些链接： http: [//mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

[新的调试密钥库是否意味着新的地图 API 密钥？](https://stackoverflow.com/questions/9020565/does-a-new-debug-keystore-mean-a-new-map-api-key)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-30T09:24:55.523

我遇到了同样的问题，问题是**map api key**`google-services.json` ，在和 中是不一样的`AndroidManifest`：

在 google-services.json 中：

```
"api_key": [
        {
          "current_key": "*********************"
        }
      ] 
```

在 AndroidManifest 中：

```
<meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="*********************" /> 
```

# css - 可调整宽度的 div 夹在两个固定宽度的 div 之间

> ID：11120533
> 
> 赞同：3
> 
> 时间：2012-06-20T13:20:27.990
> 
> 标签：css, html

我正在处理一个页面，该页面具有三个彼此相邻的 div，每个 div 的高度相同。是否可以让第一个和第三个 div 具有固定宽度（例如 175px），并让中间 div 将其宽度调整为剩余空间（并且可以在窗口宽度改变时调整大小）？我知道它可以只用两个 div 来完成，但是这个场景用三个可行吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T14:22:48.867

假设您有类似的标记；

```
<div id="leftCol"></div>
<div id="rightCol"></div>
<div id="centerCol"></div> 
```

你可以用 CSS 做到这一点；

```
#leftCol {float: left; width: 175px;}
#rightCol {float: right; width: 175px;}
#centerCol {overflow: hidden;} 
```

在 jsFiddle 上看到这个；[http://jsfiddle.net/meSHp/](http://jsfiddle.net/meSHp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T14:07:49.890

当然，只需将两侧的列浮动`div`到左侧和右侧，使您的中心`div`边距等于列的宽度（如果它最终比任何一侧都高，以保持宽度受到限制），它应该像你一样工作说。见这里：http: [//jsfiddle.net/Q8eVz/](http://jsfiddle.net/Q8eVz/)。

# javascript - Javascript getElementByID().innerHTML() 不起作用

> ID：11120534
> 
> 赞同：1
> 
> 时间：2012-06-20T13:20:31.733
> 
> 标签：javascript

我是 Javascript 新手，由于某种原因，我无法让下面的代码工作，这让我发疯了！

它是

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="test" />
    <meta name="keywords" content="test" />
    <meta name="robots" content="index,follow" />
</head>

<body>
    <h1>test</h1>
<p id="demo">something</p>

<button type="button" onclick="myFunction();">Try it</button>

<script type="text/javascript">
        function myFunction() {
            document.getElementByID("demo").innerHTML = "testttt";
        }
    </script>

</body>
</html> 
```

有谁知道这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T13:21:02.877

你应该使用`getElementById`, 最后一个字母是小写的：

```
----------------------.
                      v
document.getElementById("demo") 
```

**注意**JavaScript 是一种区分大小写的语言。

# php - 知道php命令行脚本路径的可靠方法是什么？

> ID：11120540
> 
> 赞同：6
> 
> 时间：2012-06-20T13:20:51.687
> 
> 标签：php, command-line

我有一个带有符号链接的文件系统结构，如下所示：

```
folder123
    index.php
    config.php -> symlink to shared/config.php
shared
    config.php 
```

我在命令行上运行 index.php，index.php 包含 config.php，它是指向其他文件夹中文件的符号链接。

如何从 config.php 脚本中知道 index.php 文件路径？所需的结果是“folder123”（以及它的完整路径），而不是“共享”。所以，我不能使用__FILE__。

这适用于由浏览器运行的脚本（至少在我的情况下，它与 folder123 相同 - 基本目录）：

```
$_SERVER['DOCUMENT_ROOT'] 
```

我也需要命令行的东西。

看起来像

```
$_SERVER['PWD'] 
```

是我需要的东西，但没有记录，所以我觉得它不是一种可靠的方法。此外，您需要将其与 SCRIPT_FILENAME 组合以获得所需的结果 - PWD 显示运行脚本的目录，而不是完整路径。

getcwd 看起来很有希望，但它可以通过 chdir 进行更改 - 如果我找不到更好的替代方案，我会使用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T14:31:47.273

我不确定是否有办法确定哪个文件包含一个文件，但是您可以使用 获取正在运行的程序的名称（`index.php`在这种情况下）`$argv[0]`，或者`$_SERVER['argv'][0]`如果前者不可用。

```
//config.php
//running path
$path = dirname(realpath($argv[0])); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-05-28T14:08:04.060

如果您使用 PHP 5.3 或更高版本，您可以使用

```
$path = __DIR__; 
```

反而。

[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

# excel - 使用 cfhttp 在 ColdFusion 中获取文件后只读

> ID：11120542
> 
> 赞同：0
> 
> 时间：2012-06-20T13:20:58.943
> 
> 标签：excel, coldfusion, xls, cfhttp

我正在创建一个计划任务，它从第三方站点下载一个 excel 文件，然后相应地更新数据库。

我可以通过 url (ie `http://www.example.com/myExcel.xls`) 成功下载文件。但是当我之后尝试阅读它时，使用 Ben Nadel 的 POIUtility.cfc，我得到了各种错误。似乎是因为当我下载文件时，`CFHTTP`它以只读格式保存。

这种行为听起来对任何人来说都很熟悉，或者是否有人知道如何保存文件以使其不是只读的？

提前致谢。

部分代码：

```
<cfhttp method="get" 
     url="http://www.example.com/myExcel.xls" 
     path="#expandpath('xls')#" file="stocks.xls" />
<cfset objPOI = CreateObject("component", "POIUtility").Init()/>
<cfset arrSheets = objPOI.ReadExcel( FilePath = ExpandPath("xls/stocks.xls")
                                     , HasHeaderRow = true) /> 
```

**6 月 22 日更新：** 我收到的错误如下：

```
Object instantiation exception.
An exception occurred while instantiating a Java object. The class must not be an interface or an abstract class. Error: ''.
The error occurred in /Volumes/RAID/DATA/ColdFusion9/wwwroot/website/POIUtility.cfc: line 883
Called from /Volumes/RAID/DATA/ColdFusion9/wwwroot/website/autoUpdateStock.cfm: line 36
Called from /Volumes/RAID/DATA/ColdFusion9/wwwroot/website/POIUtility.cfc: line 883
Called from /Volumes/RAID/DATA/ColdFusion9/wwwroot/website/autoUpdateStock.cfm: line 36
881 :               "org.apache.poi.hssf.usermodel.HSSFWorkbook"
882 :               ).Init(
883 :                   LOCAL.ExcelFileSystem
884 :                   );
885 : 
```

如果我直接从我的操作系统中打开下载的文件，excel 中的状态栏也会显示“（只读）”。如果我将文件保存为不同的文件名，然后在 POI 代码中使用该新文件名，则它可以正常工作。

前段时间我有一个类似的错误，问题是 excel 文件中不支持的 excel-stuff 导致 POI 给出相同的错误。但是这个 excel 文件不包含特殊的东西，比如图形等，只是没有数据过滤器的普通数据。

我在想源文件可能以 POI 实用程序不受支持的 excel 格式保存，但是当我查看文件的信息窗口时，它显示“种类：Microsoft Excel 97-2004 工作簿”，这与其他文件相同我试过（那项工作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:50:49.350

该错误可能引用“只读”，但我严重怀疑这是否是问题所在。毕竟 CF 实际上*将*文件写入磁盘 - 因此它将能够*读取*相同的文件。

问题更有可能是语法。您是否尝试过 ExpandPath('./xls')？我还在您的 cfhttp 调用中看到了一个分号 - 我认为这是一个错字。

也可能是您在操作系统释放文件句柄之前使用 POI 击中文件。尝试增加一点睡眠时间 - 10 秒左右 - 以消除这种可能性。

# updatepanel - AjaxToolkit：页面上的 TabContainer 专注于回发

> ID：11120556
> 
> 赞同：0
> 
> 时间：2012-06-20T13:21:23.370
> 
> 标签：updatepanel, tabpanel, tabcontainer

我有几乎与以下帖子完全相同的问题（我尝试了两个答案，但都不起作用），除了我不担心 TabContainer 是否最后在页面上 - 我想阻止页面当包含 tabcontainer 的 updatePanel 被更新时，从上跳或下跳到任何 tabcontainer。（当然，我猜它实际上是一个 TabPanel - 活动的 - 获得焦点，而不是真正的 TabContainer。）

[AjaxToolkit：页面上的最后一个 TabContainer 专注于页面加载](https://stackoverflow.com/questions/10796772/ajaxtoolkit-the-last-tabcontainer-on-the-page-is-focused-on-page-load)

正如海报在上面的链接中所说，我没有明确设置任何焦点，所以我不知道为什么焦点被设置到我的 tabPanel。当我调试时，我可以看到 Ajax 加载了一些设置焦点的 javascript。

我想我想要做什么，除非我可以设置一些属性（autofocus=false ？）覆盖正在执行的任何 ajax javascript，以便不会设置焦点。

但是，不知道该怎么做。那个 javascript 源是在某个地方发布的，所以我可以复制它，注释掉焦点指令，然后覆盖吗？

**更新**

我正在调试 ajax 脚本的发布版本。我没有意识到有可用的调试版本。我在 web.config 中进行了调试，但显然 ScriptManager 也需要 ScriptMode="Debug"; 当我设置它时，我会得到内部 ajax 代码的调试版本。我还没有完成，但我认为现在应该能够找到设置焦点的攻击性代码，而无需我要求它设置任何焦点并覆盖它。完成后我会发布答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:32:31.733

最后通过调试ajax，找到攻击性代码并覆盖它自己修复它。

如果有人有同样的问题，这是 AjaxCotnrolToolkit 版本 4.1.60501.0，下面位于 Tabs.Tabs.js；只需将此脚本粘贴在您的页面上即可停止烦人的自动对焦。

我现在已经完全关闭了它，但是如果你想要的话，当然可以有条件地关闭它。

下面和原始方法之间的唯一区别是注释行。

```
 Sys.Extended.UI.TabContainer.prototype._app_onload = function (sender, e) {
            if (this._cachedActiveTabIndex != -1) {
                this.set_activeTabIndex(this._cachedActiveTabIndex);
                this._cachedActiveTabIndex = -1;

                var activeTab = this.get_tabs()[this._activeTabIndex];
                if (activeTab) {
                    activeTab._wasLoaded = true;
                    //activeTab._setFocus(activeTab);     // the only change made to this prototype
                }
            }
            this._loaded = true;
        } 
```

编辑：哇，我刚刚注意到这与我在上面发布的原始链接中提供的代码完全相同。我想我一定犯了一些愚蠢的错误，然后才阻止它为我工作。

# python - Python 中的参数化曲面创建

> ID：11120558
> 
> 赞同：3
> 
> 时间：2012-06-20T13:21:28.117
> 
> 标签：python, math, scipy

是否有用于处理参数 (uv) 表面的 Python 模块？我正在寻找与 scipy.interpolate 的样条函数类似的 3D 的东西，我可以通过一组 2D 点创建参数样条：

```
xypts = [[0., 1., 5., 2.], [4., 3., 6., 7.]]
tck, u = scipy.interpolate.splprep(xypts, s=0, k=3) 
```

然后在样条曲线上的任何 t 值处得到一个点，如下所示：

```
t = 0.5
intxypt = scipy.interpolate.splev(t, tck) 
```

所以，我想要的是这样的东西：

```
# xyzpts is a 3 x m x n matrix, with m and n >= 4 for a cubic surface
tck, s, t = srfprep(xyzpts, s=0, k=3)
u, v = 0.5, 0.5
intxyzpt = srfev(u, v, tck) 
```

前段时间我编写了自己的代码来做到这一点，但坦率地说，它有点糟糕（缓慢而脆弱，尤其是在表面边缘），我正在寻找更标准和优化的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:26:59.893

这可能很明显，但是如果您能够猜出每个数据点对应的 uv 坐标（最简单的情况`u=x`，`v=y`如果表面是图形），参数插值`(u,v) -> (x,y,z)`本质上是 3 个独立数据集（x、y、和 z 坐标），因此您可以使用任何常用的二维插值方法。

`splprep`实际上是这样工作的，假设点是有序的，并`u`根据`u[i] = u[i-1] + dist(p[i], p[j])`使用欧几里得距离分配坐标。如果您知道哪些点“彼此相邻”，这可以推广到二维。例如，如果`x,y,z`数据以二维数组的形式出现，您可以这样做

```
from scipy import interpolate
import numpy as np

# example dataset (wavy cylinder)

def surf(u, v):
    x = np.cos(v*np.pi*2) * (1 + 0.3*np.cos(30*u))
    y = np.sin(v*np.pi*2) * (1 + 0.3*np.cos(30*u))
    z = 2*u
    return x, y, z

ux, vx = np.meshgrid(np.linspace(0, 1, 20),
                     np.linspace(0, 1, 20))
x, y, z = surf(ux, vx)

# reconstruct (u, v) using the existing (!) neighbourhood information
du = np.sqrt(np.diff(x, axis=0)**2 + np.diff(y, axis=0)**2 + np.diff(z, axis=0)**2)
dv = np.sqrt(np.diff(x, axis=1)**2 + np.diff(y, axis=1)**2 + np.diff(z, axis=1)**2)
u = np.zeros_like(x)
v = np.zeros_like(x)
u[1:,:] = np.cumsum(du, axis=0)
v[:,1:] = np.cumsum(dv, axis=1)

u /= u.max(axis=0)[None,:] # hmm..., or maybe skip this scaling step -- may distort the result
v /= v.max(axis=1)[:,None]

# construct interpolant (unstructured grid)
ip_surf = interpolate.CloughTocher2DInterpolator(
        (u.ravel(), v.ravel()), 
        np.c_[x.ravel(), y.ravel(), z.ravel()])

# the BivariateSpline classes might also work here, but the above is more robust

# plot projections
import matplotlib.pyplot as plt

u = np.random.rand(2000)
v = np.random.rand(2000)

plt.subplot(131)
plt.plot(ip_surf(u, v)[:,0], ip_surf(u, v)[:,1], '.')
plt.title('xy')
plt.subplot(132)
plt.plot(ip_surf(u, v)[:,1], ip_surf(u, v)[:,2], '.')
plt.title('yz')
plt.subplot(133)
plt.plot(ip_surf(u, v)[:,2], ip_surf(u, v)[:,0], '.')
plt.title('zx')
plt.show() 
```

**编辑**：好的，我不完全确定上述计算`u,v`在实践中有多稳健，因为它似乎有失真的空间。但是，下面的 LocallyLinearEmbedding 在这方面可能会更好。

如果您*无法*猜测这些`u,v`值，例如您只有一堆点而没有邻域信息，那么问题就会变得更加困难。这里合适的关键词似乎是“表面重建”和“流形学习”。

我没有尝试，但在我看来，您可以使用scikits-learn轻松获得合适的`u,v`坐标，[请参阅此示例](http://scikit-learn.org/stable/auto_examples/manifold/plot_compare_methods.html)。他们有一堆不同的算法，这似乎足够可靠。然后，您可以将结果用于非结构化二维插值方法，如上所示。`LocallyLinearEmbedding``u = Y[:,0]; v = Y[:,1]`

也许谷歌搜索更多会发现更多的包裹。

# css - 在IE7中绝对定位一个INPUT元素

> ID：11120561
> 
> 赞同：1
> 
> 时间：2012-06-20T13:21:38.153
> 
> 标签：css, internet-explorer-7

我对`position: absolute`div 有一些问题。IE7 将其显示在输入旁边，但在普通浏览器中显示在其下方。我该如何解决？我正在使用一些我无法修改的第三方 javascript，因此我无法在`input`and之间插入任何内容`div`。

```
<div style="position: relative" id="header">qwe</div>
  <div style="position: relative">
    <table style="background: red; position: relative">     
      <tr>
         <td>      
            <input type="text" style="width:200px; " value="a date here" />        
            <div style="position:absolute; width: 300px; height: 300px; background: #eeeeee;"> 
              [a calendar here]       
            </div>        
         </td>  
      </tr>
      <tr>
        <td> 
         [text/inputs/buttons behind the calendar]
        </td>
      </tr>
    </table>
  </div> 
```

它只是我为这个问题制作的一个例子。我确实有 position: relative 设置在我的代码中的几个元素上，无论如何 ie7 都失败了。“在它之下”意味着它应该是在单击它以让用户轻松选择某个日期后在该输入下显示的日历。

编辑：重做示例

编辑：[问题解决程序-链接已删除]-单击右侧的“zapytanie i rezerwacja”，然后单击“folwark zamkowy”。您可以在该表单中找到这些日历输入。`<a>`在从 javascript 输入之后立即添加包含日历的块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:31:31.957

**更新：**我仍然不遵循您的代码。我不知道你为什么要这样做（为什么要使用表格？），但你需要在你`top:`的.`left:``absolute:position`

例如：`style="position:absolute; top:5px; left: 5px;"`

另外，摆脱`float:left`. 我不知道那里在做什么（！）。

* * *

**更新更新：**如果您只想让文本出现在日历后面，那么您需要绝对定位您的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:27:54.677

你试过了`float:left;`吗？也许丢失的浮动是问题所在。但是IE7本身就是一个问题。

# java - 使正则表达式替换可选

> ID：11120562
> 
> 赞同：2
> 
> 时间：2012-06-20T13:21:39.423
> 
> 标签：java, regex

所以我有一个正则表达式可以在java中搜索并被另一个正则表达式替换。我正在使用分组，想知道是否有办法让替换中的组成为可选。例如，这是我正在搜索的正则表达式：

```
^(\d*).(\d)(\d?)$ 
```

如果第三组不存在，我可以为替换做这样的事情吗：

```
$1$2$3? 
```

任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:24:19.260

不，你不能，但你也不需要这样做。

如果第三组不匹配，`$3`则为空字符串，因此不会改变替换操作的结果。

# html - Firefox 特殊字符行高

> ID：11120567
> 
> 赞同：2
> 
> 时间：2012-06-20T13:21:57.723
> 
> 标签：html, firefox, special-characters

有没有其他人得到以下信息：

Firefox（但不是 Chrome、IE 或 Safari）出于某种原因会显示某些特殊字符，例如 dArr 具有很大的行高。当您选择字符时，选择跨越大约 6 行。它破坏了我的 HTML 按钮并使它们变得非常大！（这不是填充问题...）

任何想法为什么应该这样？这是FF中的新错误吗？上周没有发生...

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:24:17.910

可能的解释是浏览器从具有非常大的默认行高的字体（例如 Cambria Math）中拾取双箭头（或其他特殊字符）。之所以不同的人有不同的观察，是因为当正常使用的字体不包含特定字符时，浏览器会使用一些回退，然后结果可能取决于浏览器版本和设置。

有两个修复，它们甚至可以同时应用：

1) 在 CSS 中设置行高，例如`* { line-height: 1.3 }`. 这会覆盖默认的行高。

2)`font-family`在文本上设置，以便所有使用的字符都出现在列出的字体中并且在样式上是可以接受的。例如，如果您包含 Arial Unicode MS 和 Lucida Sans Unicode，则不会使用 Cambria Math。但是，如果您认为 Cambria Math 适合该角色，请将其包含在列表中，但请记住使用修复 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:39:38.860

我无法重现此症状。我所做的是使用“块元素和几何形状”中的 Unicode 字符而不是“箭头”子范围。此外，我正在避免“不寻常”的字体系列。

示例视图：↓ ... ▼（9960 或 U25BC）

# symfony - 奏鸣曲：致命错误：达到“100”的最大函数嵌套级别..嵌入表单时

> ID：11120573
> 
> 赞同：7
> 
> 时间：2012-06-20T13:22:21.673
> 
> 标签：symfony, doctrine-orm, symfony-forms, symfony-sonata, sonata-admin

编辑：对于有兴趣解决相同问题的任何人，这都成功了：

```
echo `'xdebug.max_nesting_level = 250' >> /etc/php5/conf.d/xdebug.ini` 
```

* * *

我为彼此链接的 3 个实体创建了 3 个管理员，其中 A 管理员嵌入了 B 管理员，而 B 管理员嵌入了 C 管理员。B 实体与 A 和 B 实体具有多对一关系。

A 实体嵌入 B 实体，代码如下：

```
$formMapper->add('b', 'sonata_type_collection', array(
    'by_reference' => false
), array(
    'edit' => 'inline',
    'inline' => 'table',
    'sortable'  => 'position'
) ); 
```

B实体嵌入C实体与以下之一：

```
 $formMapper->add( 'c', 'sonata_type_model', array( 
    'required'  => true, 
    'label'     => ucfirst( $this->trans( 'c', array(), $this->translationDomain, $this->langCode ) )
    ), array( 'edit' => 'list' ) ); 
```

注意：改成`'edit' => 'list'`有利于`'edit' => 'standard'`避免以下错误。

在编辑 A 实体时，将 B Admin 实体放置`array( 'edit' => 'list' )`在`sonata_type_model`表单类型上会出现以下错误。如果改为`array( 'edit' => 'standard' )`使用，则不输出错误：

```
Sonata: Fatal error: Maximum function nesting level of '100' reached, aborting! in myProject/vendor/doctrine-common/lib/Doctrine/Common/Lexer.php on line 756 
```

棘手或奇怪的事情是，无论编辑是列表还是标准，如果我去 B admin 编辑它。仅当我使用编辑列表选项集编辑嵌入到 A 中的 B 时才会出现问题。这发生在我实施相同行为的其他一些实体中。

以下是 A、B 和 C 实体以及它们如何相互链接：

一个实体：

```
class A
{
    /**
     *  @ORM\Id
     *  @ORM\Column(type="integer", length=4)
     *  @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;
    /** @ORM\OneToMany(targetEntity="B", mappedBy="a", cascade={"persist"}, orphanRemoval=true ) */
    protected $b;
} 
```

B实体：

```
class B
{
    /**
     *  @ORM\Id
     *  @ORM\Column(type="integer", length=4)
     *  @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id
    /**
     *  @ORM\ManyToOne(targetEntity="C", inversedBy="b", cascade={"persist"} )
     *  @ORM\JoinColumn(name="c_id", nullable=false, referencedColumnName="id", onDelete="CASCADE")
     */
    private $c;
    /**
     *  @ORM\ManyToOne(targetEntity="A", inversedBy="b", cascade={"persist"} )
     *  @ORM\JoinColumn(name="a_id", nullable=false, referencedColumnName="id", onDelete="CASCADE")
     */
    private $a;
} 
```

C实体：

```
Class C
{
    /**
     *  @ORM\Id
     *  @ORM\Column(type="integer", length=4)
     *  @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;
    /** @ORM\OneToMany(targetEntity="B", mappedBy="c", cascade={"persist"} ) */
    private $b;
} 
```

为了能够查看所有内容，您可以使用奏鸣曲演示项目来检查类似的行为。
如您所见，它与 Sonata Project 演示中的用例相同，其中 Gallery 链接到 GalleHasMedias，而 GalleHasMedias 链接到 Media：[http ://demo.sonata-project.org/admin/sonata/media/gallery/255 /edit?context=default](http://demo.sonata-project.org/admin/sonata/media/gallery/255/edit?context=default)正如你所看到的，GalleryHasMedia 与 Gallery 有一个 ManyToOne 关系，另一个与 Media 有关系，所以当你编辑一个 Gallery 时，你可以看到一个`sonata_type_model`with`edit' => 'inline','inline' => 'table',`所以 GalleryHasMedia 被嵌入到 Gallery 表单中，以便能够添加新的将与当前图库链接并存储在其中的媒体`GalleryHasMedia`。

有没有人遇到过类似暴露的情况？希望有人可以指出正确的方向或帮助了解正在发生的事情。

PD：对我来说，B 和 C 实体似乎在无限循环中相互链接/嵌入。但如前所述，3 个管理员分别工作得很好（而 A 没有嵌入 B）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T03:09:32.163

这是运行 xdebug 的服务器的常见问题。您必须通过增加`xdebug.max_nesting_level`xdebug.ini 配置中的 来增加嵌套级别。将其设置为 250 就足够了。

添加设置的一种快速方法是在您的 linux 服务器上执行此操作：

```
echo `'xdebug.max_nesting_level = 250' >> /etc/php5/conf.d/xdebug.ini` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:37:10.573

对于任何有兴趣解决相同问题的人来说，这就是诀窍：

```
echo `'xdebug.max_nesting_level = 250' >> /etc/php5/conf.d/xdebug.ini` 
```

# android - ProgressBar setVisibility 不起作用

> ID：11120575
> 
> 赞同：4
> 
> 时间：2012-06-20T13:22:28.840
> 
> 标签：android, progress-bar

我有一些数据库操作的异步任务

在我开始任务之前，我调用了这个函数，以显示一个 prograssBar ProgressBar 在 RelativLayout 中，因为网上有人说调用`setVisibility();`progressBar 在某些追逐中不起作用（而且它也不适合我）

```
 public static void showProgressBar()
{
    Log.e("TEST","Try to show ProgressBar, Visibiliy: " + prog_bar.getVisibility());
    if(prog_bar != null)
    {
        prog_bar.setVisibility(RelativeLayout.VISIBLE);
        Log.e("TEST","Success");
    }
    else
    {
        Log.e("TEST","prog_bar != null");
    }
    Log.e("TEST","Visibiliy: " + prog_bar.getVisibility());
} 
```

在 PostExecute 我调用函数：

```
 public static void hideProgressBar()
{
    Log.e("TEST","Try to hide ProgressBar, Visibiliy: " + prog_bar.getVisibility());
    if(prog_bar != null)
    {
        prog_bar.setVisibility(RelativeLayout.INVISIBLE);
        Log.e("TEST","Success");
    }
    else
    {
        Log.e("TEST","prog_bar != null");
    }
    Log.e("TEST","Visibiliy: " + prog_bar.getVisibility());
} 
```

奇怪的是方法被称为正确，日志也是正确的，没有出现错误，但没有显示进度条。

Android 2.2，Windows 7，在模拟器和 GalaxyTab 上测试

最好的问候施万迪

编辑：

将我的方法更改为：

```
 public static void hideProgressBar()
{

    if(prog_bar != null)
    {
        Log.e("TEST","Try to hide ProgressBar, Visibiliy: " + prog_bar.getVisibility());
        prog_bar.setVisibility(View.GONE);
        Log.e("TEST","Success");
    }
    else
    {
        Log.e("TEST","prog_bar != null");
    }
    Log.e("TEST","Visibiliy: " + prog_bar.getVisibility());
}

public static void showProgressBar()
{

    if(prog_bar != null)
    {
        Log.e("TEST","Try to show ProgressBar, Visibiliy: " + prog_bar.getVisibility());
        prog_bar.setVisibility(View.VISIBLE);
        Log.e("TEST","Success");
    }
    else
    {
        Log.e("TEST","prog_bar != null");
    }
    Log.e("TEST","Visibiliy: " + prog_bar.getVisibility());
} 
```

仍然不起作用。

我也改变了 prog_bar 是 ProgressBar 本身。

```
 prog_bar = (ProgressBar) findViewById(R.id.progressBar1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-23T14:44:31.447

尝试将启动的整个代码块`asyncTask`放入这样的工作线程中（忽略`onClick()`不相关的）：

```
public void onClick(View v) {
    new Thread(new Runnable() {
        public void run() {

            // your entire asyncTask initiation code block here

        }
    }).start();
} 
```

[这是它如何解决我自己的问题](https://stackoverflow.com/a/40767263/1827488)&这里是[文档](https://developer.android.com/guide/components/processes-and-threads.html#WorkerThreads)。

# html - 在 IE7 中具有跨度对齐的 CSS

> ID：11120581
> 
> 赞同：0
> 
> 时间：2012-06-20T13:22:38.603
> 
> 标签：html, css, internet-explorer-7

我有以下情况：已编辑：已删除链接

在 IE7 中给了我不同的观点——这三个元素不是顶部对齐的。在其他浏览器中，代码看起来不错。

请建议如何处理三个元素的对齐？

HTML 代码：

```
<html>
 <head>
  <title> Text </title>
  <link href="/css/style.css" rel="stylesheet" type="text/css" />
 </head>

 <body>
  <div class="button-like">
    <a href="">
        <span class="left-button"></span>
        <span class="right-button"></span>
        Text text text
    </a>
</div>
 </body>
</html> 
```

CSS 代码：

```
.button-like{
margin: 0 0 20px 0;
/* Elipsis */
    white-space: nowrap;
    width: 100%; /*IE 6*/
    overflow: hidden;
    text-overflow: ellipsis;} 

.button-like a{
    max-width: 410px;
margin-left: 35px;
margin-right: 35px;
padding: 0 40px;
position: relative;
height: 38px;
color: #52455f;
text-decoration: none;
line-height: 40px;
display: inline-block;
background: url("/imgs/button-tile.png") 0 0 repeat-x transparent;
}

.left-button{
left: -35px;
position: absolute;
width: 35px;
height: 38px;
background: url("/imgs/button-left.png") 0 0 no-repeat transparent;
}

.right-button{
left: auto;
right: -35px;
position: absolute;
width: 35px;
height: 38px;
background: url("/imgs/button-right.png") 0 0 no-repeat transparent;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:58:13.763

你需要添加`top: 0`，因为他们有`.left-button`而且IE7 是错误的。`.right-button``position: absolute`

**见：http:** [//jsfiddle.net/thirtydot/JVZ6K/5/](http://jsfiddle.net/thirtydot/JVZ6K/5/)

# cygwin - 为什么 Cygwin 导入库安装模式为 755？

> ID：11120582
> 
> 赞同：4
> 
> 时间：2012-06-20T13:22:38.677
> 
> 标签：cygwin, libraries, file-permissions

我有一个最初为 Linux 开发的库。我现在正在将其移植到 Cygwin。我注意到我的 Cygwin 系统上的每个库都是这样安装的：

*   DLL ( `cygfoo.dll`) 安装到`/usr/bin`模式 755
*   静态存档 ( `libfoo.a`) 安装到`/usr/lib`模式 644
*   导入库 ( `libfoo.dll.a`) 安装到`/usr/lib`模式 755

前两个对我来说很有意义。DLL 是可执行文件，所以它们应该是模式 755。静态存档不是可执行文件，所以它们是模式 644。然而，第三个对我来说似乎很奇怪。导入库实际上是静态档案，而不是可执行文件（`ar -t libfoo.dll.a`列出档案的内容）。他们不应该也安装模式644吗？

为什么 Cygwin 的约定是安装模式为 755 的导入库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:25:13.737

回到 2000 年：

> 在 NTFS 分区上，NT/W2K 需要 DLL 的执行权限才能允许在进程启动时加载 DLL。
> 
> 这没有问题，除非使用的人`ntsec`获得了由不使用`ntsec`或打包在 FAT 分区上的人打包的 tar 存档。`ntsec`由于 Cygwin 仅伪造后缀“exe”、“bat”、“com”的执行权限，因此当未设置stat() 调用时，DLL 将被视为不可执行。
> 
> 当使用该 tar 存档的人`ntsec`解压该 tar 存档时，需要存档中的一个 DLL 的应用程序的启动将失败并显示 Windows 消息
> 
> “应用程序未能正确初始化（0xc0000022）”
> 
> 这对大多数用户来说意义不大。
> 
> 为了解决这个问题，我们必须做一个简单的步骤。`ntsec`未设置 DLL 或文件系统不支持 ACL (FAT/FAT32)时的虚假执行权限。

这里：[http ://cygwin.com/ml/cygwin-developers/2000-10/msg00044.html](http://cygwin.com/ml/cygwin-developers/2000-10/msg00044.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:32:17.537

我唯一想到的答案是安装程序正在文件名中寻找“.dll”字符串来激活复制文件的可执行属性（x）......应该寻找 /.+\.dll$/ （.dll 仅在最后）。

可以理解的是，操作系统/文件系统之间的阻抗不匹配迫使安装程序/复制程序在安装程序操作时有一个决定属性值的策略（这比必须将属性列表映射到复制的文件更容易......并且仅在 Windows 中）必须寻找 .exe、.com 和 .dll）

要确认这一点，请将您的“libfoo.dll.a”重命名为“libfoo.dxx.a”并对其进行测试...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T09:28:09.650

这是 Windows 要求：由于 .dll 文件包含将要执行的代码，因此需要设置可执行位。

删除执行文件的权限，Windows 不会让其中的任何代码被执行，即使执行执行的进程是分开的。

旁注：Windows 没有 +x 位是一个常见的误解。这在技术上是正确的；Windows 不使用 POSIX rwx 权限，尽管 Cygwin 确实尝试提供类似于它们的界面。但是，Windows 确实使用 ACL（访问控制列表）来获取权限，并且这些确实具有“执行权限”的概念，这就是 Cygwin 映射到其 +x 位的内容。

如果您想要资源/进一步阅读，Cygwin 邮件列表上对此进行了[长时间的讨论。](http://cygwin.com/ml/cygwin/2012-04/msg00428.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T12:24:23.347

似乎这只是一个懒惰的黑客行为，导致包含“.dll”的文件名出现这种行为。有关“修复”背后的原因，请参阅 hasanyasin 的回答（[此处](http://cygwin.com/ml/cygwin-developers/2000-10/msg00044.html)）。

# java - 在 JSF 2 组件中委托渲染

> ID：11120586
> 
> 赞同：1
> 
> 时间：2012-06-20T13:22:53.037
> 
> 标签：java, jsf-2

是否可以让自定义组件将其呈现委托给标准 JSF 组件：

```
@FacesComponent(value = "compositecomp")
public class CompositeComponent extends UIComponentBase {

    @Override
    public String getFamily() {
        return "composite";
    }

    @Override
    public void encodeEnd(FacesContext context) throws IOException {
        HtmlOutputText hot = new HtmlOutputText();
        // set some attributes here then...

       // delegate rendering
        hot.encodeEnd(context);
    }
} 
```

# iphone - 如何在 iPhone 应用中查找城市名称？

> ID：11120601
> 
> 赞同：0
> 
> 时间：2012-06-20T13:23:27.303
> 
> 标签：iphone, objective-c, json, google-maps, mapkit

如何从 google api 在 iPhone SDK 中查找城市名称？

[http://maps.googleapis.com/maps/api/geocode/json?address=YOURADDRESS&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?address=YOURADDRESS&sensor=true)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:23:27.630

首先，您在[此链接](https://code.google.com/apis/console/)上创建 google api 密钥，然后将其插入到下面的代码中。

```
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];

[request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/autocomplete/json?input=%@&sensor=true&key=<your api key here>",your_textField_search_str]]];
[request setHTTPMethod:@"POST"];

NSError *error;
NSURLResponse *response;
NSData *returnData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSString *returnString=[[NSString alloc]initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"%@",returnString);  
SBJSON *json = [[SBJSON new] autorelease];
dic = [[NSMutableDictionary alloc] initWithDictionary:[json objectWithString:returnString error:nil]]; 
```

# java - gwteventservice 支持多个选项卡

> ID：11120603
> 
> 赞同：1
> 
> 时间：2012-06-20T13:23:27.807
> 
> 标签：java, gwt, tabs, comet

到目前为止，我已经尝试过 gwt-comet 和 gwteventservice 的聊天演示。我个人更喜欢 gwteventservice，但它们都有相同的问题：我在 Firefox 中打开了两个选项卡：比如用户 ff1 和用户 ff2，Chrome 中的一个选项卡说用户 chrome1。当我从 chrome1 发送事件（例如新消息事件）时，只有一个用户 ff1 和 ff2 会收到该消息。这是使用 gwteventservice 1.2.0 和最新的源代码 1.3.0 (20-6-2012) 和 gwt-comet 1.2.3 测试的

演示的另一个问题是关闭选项卡/关闭浏览器不会被服务器感知，并且该用户似乎已登录到其他用户。只有在按下注销按钮时，用户才会被其他人注销。

我更喜欢使用 gwteventservice 的解决方案。因此，我的问题是：如何使用 gwteventservice 管理多个选项卡并在聊天应用程序中正确注销用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:35:49.710

```
# Generator for unique client ids
eventservice.connection.id.generator=de.novanic.eventservice.service.connection.id.SessionExtendedClientIdGenerator 
```

更多信息请访问： [https ://stackoverflow.com/a/5882001/1467482](https://stackoverflow.com/a/5882001/1467482)

# c - Assimp 图书馆使用文档

> ID：11120607
> 
> 赞同：3
> 
> 时间：2012-06-20T13:23:42.600
> 
> 标签：c, visual-studio, api, opengl

我找到了一个名为 [Assimp](http://assimp.sourceforge.net/)的库，用于解析大量可用于导入 OpenGL 的 3D 模型文件格式。这似乎是一个很好且稳定的库，但使用文档太差了。有人能告诉我如何使用这个库来导入一个 obj （或另一个）模型吗？或者只是给我一个教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:36:56.880

我发现他们的文档实际上非常好，尽管很难浏览。查看[使用页面](http://assimp.sourceforge.net/lib_html/usage.html)以了解如何开始。

# ruby-on-rails - 提交工作申请 rails

> ID：11120608
> 
> 赞同：0
> 
> 时间：2012-06-20T13:23:49.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

很抱歉这个相当普遍的问题，但我正在寻找在 Rails 中实施工作申请系统的最佳方法。

我目前拥有的是用户模型和工作模型。我希望发生的是，当用户提交工作申请时，很可能是通过单独的应用程序模型，发布工作的用户将在他们的“应用程序区域”中收到申请，并且还会收到一封电子邮件给工作所有者的电子邮件地址。

设置它以通过作业将应用程序与用户关联的最佳方法是什么？我还需要一个单独的数据库表来处理应用程序，还是可以使用 Actionmailer 进行设置？

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:30:04.583

听起来像一个非常简单的 has_many 通过关联

```
class User < ActiveRecord::Base
  has_many :applications
  has_many :jobs, :through => :applications
end

class Application < ActiveRecord::Base
  belongs_to :user
  belongs_to :job
end

class Job < ActiveRecord::Base
  has_many :applications
  has_many :users, :through => :applications
end 
```

然后在他们的应用程序区域中，您可以只查询`user.jobs`或`user.applications`根据您要显示的内容。

# numpy - 将数组与 Numpy 中的一行匹配

> ID：11120611
> 
> 赞同：4
> 
> 时间：2012-06-20T13:23:53.220
> 
> 标签：numpy, pattern-matching

我有一个形状为（50,3）的数组“A”和另一个形状为（1,3）的数组“B”。

实际上这个 B 是 A 中的一行。所以我需要找到它的行位置。

我用过`np.where(A==B)`，但它给出了搜索**元素明智**的位置。例如，下面是我得到的结果：

```
>>> np.where(A == B)
(array([ 3,  3,  3, 30, 37, 44]), array([0, 1, 2, 1, 2, 0])) 
```

实际上 B 是 A 中的第 4 行（在我的情况下）。但是上面的结果给出了 (3,0)(3,1)(3,2) 和其他的，它们是逐元素匹配的。

取而代之的是，我需要一个答案“3”，这是当 B 在 A 中整体搜索时获得的答案，它还删除了其他部分匹配，例如 (30,1)(37,2)...。

我怎么能在 Numpy 中做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T13:29:42.350

您可以指定轴：

```
numpy.where((A == B).all(axis=1)) 
```

# php - 如何删除由 PHP 中的函数生成的使我的链接断开的空间？

> ID：11120615
> 
> 赞同：0
> 
> 时间：2012-06-20T13:24:02.280
> 
> 标签：php, wordpress

我需要根据该页面的 URL 中的变量在 Wordpress 中构建一个链接。尽管在 PHP 中这可能很容易，但在 WP 中这似乎很困难（我知道 WP 出于安全原因不允许这样做）。因此，我根据[此链接](http://thewordpresswarrior.com/616/passing-variables-via-url)在我的 Wordpress 安装 (functions.php) 中添加了一个过滤器，以便获取该变量并在我的 WP 帖子页面中以编程方式使用它来构建我的链接。但是，链接形式有两个空格（一个在我调用相关函数之前，一个在我调用相关函数之后）。

所以，链接后面的代码是：

```
<?php echo ("<a href='www.mydomain.com/purchases/?refid="); ?> <?php echorefid(); ?> <?php echo ("'>download this amazing file</a>") ?> 
```

当我尝试访问 www.mydomain.com/?refid=3267 的网页时，输出代码（HTML）是：

```
<a href='www.mydomain.com/purchases/?refid= 3267 '>download this amazing file</a> 
```

请注意 3267 字符串之前的空格和该字符串之后的空格。显然，链接已损坏。

函数 echorefid() 出现在我添加到 functions.php 的以下代码中：

```
add_filter('query_vars', 'parameter_queryvars' );

function parameter_queryvars( $qvars ) 
{ 
$qvars[] = 'refid'; 
return $qvars; 
} 

function echorefid() 
{ 
global $wp_query; 
if (isset($wp_query->query_vars['refid'])) 
{ 
print $wp_query->query_vars['refid']; 
} 
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:26:55.790

那是因为你的代码中有空格！改变：

```
<?php echo ("<a href="www.mydomain.com/purchases/?refid="); ?> <?php echorefid(); ?> <?php echo (">download this amazing file</a>") ?>
//                                                            ^                     ^
// No needs for spaces here! ---------------------------------+---------------------+ 
```

至：

```
<?php echo ("<a href="www.mydomain.com/purchases/?refid="); ?><?php echorefid(); ?><?php echo (">download this amazing file</a>") ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:26:49.940

空格的原因是您`<?php ?> <?php ?>`用空格分隔多个空格。`<?php ?>`标签外的那些空格作为输出发送到浏览器。

对于所有 PHP 代码，您只需要其中一个。通过连接三个组来组合它们并将外部引号切换为单引号或转义内部引号。

```
<?php echo '<a href="www.mydomain.com/purchases/?refid=' . echorefid() . '">download this amazing file</a>'; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:26:41.673

```
<?php echo ("<a href="www.mydomain.com/purchases/?refid="); php echorefid(); echo (">download this amazing file</a>") ?> 
```

您的 PHP 标记之间的空格显示在完成的 HTML 中。

# javascript - 如何将数据库中的数据放入 asp.net/vb.net 的 javascript 数组中

> ID：11120616
> 
> 赞同：0
> 
> 时间：2012-06-20T13:24:03.247
> 
> 标签：javascript, asp.net, vb.net

我正在尝试制作一个简单的程序，将数据库中的数据放入 javascript 数组中，然后在文本框中显示一个结果。这是我到目前为止所拥有的

```
 Dim cmd As New IfxCommand("select first 20 fname from table", conn)
    Dim reader As IfxDataReader = cmd.ExecuteReader(CommandBehavior.CloseConnection)
    Dim i As Integer = 0
    While reader.Read()
        ClientScript.RegisterArrayDeclaration("Names", "'" & reader("fname") & "'")
        i += 1

    End While
    Dim cs As StringBuilder = New StringBuilder()
    cs.Append("<script type=""text/javascript\""> function DoIt() {")
    cs.Append("var TheTextBox = document.getElementById(""TextBox1"");")
    cs.Append("TheTextBox.value = Names[0];")
    cs.Append("script>")
    TextBox1.Text = cs.ToString 
```

这里是asp

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>Untitled Page</title>
</head>
<body>
<form id="form1" runat="server">
<div>

</div>
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<p>
    <asp:Button ID="Button1" runat="server" Text="Button" onclick = "DoIt"/>
</p>
</form>
</body>
</html> 
```

我不知道我还能用这个做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:39:08.927

因此，您想在最初显示您选择的 20 的名字，`TextBox`并且可能通过 javascript 从客户端延迟加载另一个？

尝试这个：

```
Using cmd = New IfxCommand("select first 20 fname from table", conn)
    Dim tbl = New DataTable
    Using reader = cmd.ExecuteReader()
        tbl.Load(reader)
        If tbl.Rows.Count <> 0 Then
            Dim allNames = From row In tbl
                           Select row.Field(Of String)("fname")
            TextBox1.Text = allNames.First
            ' embed names with quotes and separate the strings by comma '
            Dim embeddedNames = From name In allNames Select String.Format("'{0}'", name)
            ClientScript.RegisterArrayDeclaration("Names", String.Join(",", embeddedNames))
        End If
    End Using
End Using 
```

现在您只需要实现在必要时切换名称的 javascript 函数。您可以使用[String`split`](http://www.w3schools.com/jsref/jsref_split.asp)然后：

```
var allNames = documentGetElementById("Names").value.split(","); 
```

# amazon-ec2 - 即使我认为配置正确，我也无法访问 Amazon EC2 实例上的网站主机

> ID：11120617
> 
> 赞同：6
> 
> 时间：2012-06-20T13:24:03.433
> 
> 标签：amazon-ec2

我有一个免费的 Amazon EC2 实例。我在上面安装了 Apache Web 服务器。我的域的 DNS 记录指向 EC2 实例的 ip。我无法访问我的网站。然后我抬头并允许http入站。但我仍然无法访问我的网络？可能是什么原因。有人给我一个线索吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T14:42:51.820

转到 AWS 管理控制台并查看实例所在的安全组。然后确保您尝试连接的端口已打开（很可能是 80）。要将其向世界打开，请将 ip 范围设置为 0.0.0.0/0，并将其打开到特定的 ip（仅像您的房子），请将其设置为 xxx.xxx.xxx.xxx/32。

这几乎总是人们在刚接触 AWS 时遇到连接问题的原因。我写了[这篇文章](https://stackoverflow.com/a/8919031/667608)，它应该可以帮助您进行设置。

# sqlite - SQLite 数据库加密

> ID：11120619
> 
> 赞同：0
> 
> 时间：2012-06-20T13:24:05.373
> 
> 标签：sqlite, openssl, public-key-encryption, private-key, 16-bit

我正在使用 open_ssl 创建公钥和私钥来保护数据库和服务器的事务。

问题是数据库（sqllite）只有16位字节数组的输入。我使用的开放 ssl 方法创建了大约 600 - 1024 位，因此使用它是不可能的。

知道我可以对公钥做些什么来使用这种 16 位加密技术吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:08:04.373

听起来您在应该使用对称密钥时尝试使用公钥/私钥对。

我只是生成一个 16 字节的随机字符串并使用它。您可以从 Linux 上的 /dev/urandom 获取它。

公钥/私钥对更长，因为它们具有常规对称算法密钥没有的特殊要求。例如，RSA 密钥对的 mudolo 需要是两个素数的倍数，这不包括很多数字/字符串。例如。60000 不仅仅是两个素数的倍数 - 它的因式分解表明它是 5^4 * 2^5 * 3 的倍数。

# jsf - 指向 JSF bean 操作的直接 URL

> ID：11120620
> 
> 赞同：0
> 
> 时间：2012-06-20T13:24:05.697
> 
> 标签：jsf, jsf-1.2

有什么方法可以直接获取 JSF bean 操作方法的 URL？

基本上我希望能够做到以下几点：

```
<a href="/PA/faces/pageBeanAction">click</a> 
```

这应该调用 JSF bean 中的方法。是否可以？

我正在使用 JSF 1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:26:27.787

在与 URL 后面的视图关联的请求范围 bean 的构造函数中执行该工作。

```
public class Bean {

    public Bean() {
        // Here.
    }

    // ...
} 
```

只要您`#{bean.something}`在视图中有 a，那么 bean 的构造函数就会被调用。

# iphone - 如何从加密的 .p12 文件中检索证书并将其添加到 iPhone 钥匙串

> ID：11120621
> 
> 赞同：1
> 
> 时间：2012-06-20T13:24:08.023
> 
> 标签：iphone, ios, keychain

我有一个加密的 .p12 文件，我可以使用 方法导入它`**SecPKCS12Import()**`。在响应中，我得到了一个数组（如下所示）。

导入证书项数组： ( { chain = ( "" ); identity = ""; trust = ""; } )

我浏览了苹果文档（[https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html](https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html)）

我能够正确地获得身份、信任和评估信任。但我不知道如何将该身份中的证书添加到 iPhone 钥匙串中。我在将证书添加到钥匙串时遇到问题。

我可以给一个 kSecAttrLabel 稍后识别证书吗？

# shell - Uuencode 未将文件附加到电子邮件和 grep 未列出文件名

> ID：11120631
> 
> 赞同：0
> 
> 时间：2012-06-20T13:24:33.823
> 
> 标签：shell, unix, grep, mailx, uuencode

我一直在努力解决这个问题，但无论我尝试什么，它似乎都没有按我的意愿工作。基本上缺少的东西是 grep 在找到匹配项时没有列出文件名（我认为这是 -H 标志应该做的事情？）并且 uuencode 似乎不想将文件附加到电子邮件。我已经尝试过 uuencode 和 cat ，但我无处可去。

有谁知道这里可能有什么问题？

```
for i in `ls SystemOut_*[0-9].log`; do
    grep -inEH '^\[.*(error|exception)' $i >> scannedErrors.txt;
    mv "$i" "${i%.log}"_scanned.log;
done
if [[ -s scannedErrors.txt ]]; then
    uuencode scannedErrors.txt | mailx -s "Scanned Logfile Errors" someone@somewhere.com < Message.txt;
fi
/bin/rm scannedErrors.txt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:46:52.663

`uuencode scannedErrors.txt`期待输入 - 当仅使用一个选项调用时，它将该选项视为要包含在输出中的文件名，而不是要读取的文件名。所以要么做`cat scannedErrors.txt | uuencode scannedErrors.txt`要么`uuencode scannedErrors.txt scannedErrors.txt`。

我不一定认为该位有任何问题，但在其中放置一个以确保您找到所需的内容`grep`可能很有用。`cat scannedErrors.txt`你也可以做`grep ... SystemOut_*[0-9].log`而不是 for 循环，这将成为`-H`默认值，但你可能仍然需要 for 循环来重命名事物，除非你碰巧有`rename`可用的脚本（一个允许通过正则表达式创造性地重命名的 perl 脚本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:58:12.063

尝试 ：

```
{ cat scannedErrors.txt|uuencode scannedErrors.txt;cat Message.txt;}|mailx -s "Scanned Logfile Errors" someone@somewhere.com 
```

因为 | 之间有冲突 和 <

# javascript - TinyMCE：如何让 advimage 中的路径是相对的

> ID：11120634
> 
> 赞同：1
> 
> 时间：2012-06-20T13:24:37.040
> 
> 标签：javascript, html, tinymce, cmsmadesimple

我已经设置好`elements : 'relurls'`了，它适用于主图像。

但是，当我为鼠标悬停设置带有 advimage 的替代图像时，路径始终保持绝对。

有没有办法改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:26:34.747

看起来你正在寻找这个：[http ://www.tinymce.com/wiki.php/Configuration:relative_urls](http://www.tinymce.com/wiki.php/Configuration:relative_urls)

[查看有关相对路径的常见问题解答部分也可能有所帮助： http](http://www.tinymce.com/wiki.php/TinyMCE_FAQ#Paths.2FURLs_are_incorrect.2C_I_want_absolute.2Frelative_URLs.3F) ://www.tinymce.com/wiki.php/TinyMCE_FAQ#Paths.2FURLs_are_incorrect.2C_I_want_absolute.2Frelative_URLs.3F

# python - python中的KeyError

> ID：11120637
> 
> 赞同：-2
> 
> 时间：2012-06-20T13:24:44.527
> 
> 标签：python

这是我试图在 python 中运行的程序的一部分，但它给了我一个`KeyError`：

```
def xi_group_prep(infile=os.environ ['GAMA_DATA'] + '/groups/G3Cv04/G3CFoFGroup194v04.dat' 
```

编码：

```
def xi_mass_samples(infile='/export/scratch/loveday/gama/stellarMasses/StellarMassesPlus.fits',
                    ranfile='/export/scratch/loveday/gama/mask/mass_randoms_194.dat',):
    """
    Create mass sub-samples for xi(s).
    """
    Mlimits = (5, 9.5, 10, 10.5, 11, 11.5, 15)
    for i in range(len(Mlimits)-1):
        Mlo = Mlimits[i]
        Mhi = Mlimits[i+1]
        galout = 'gal_lgm' + str(Mlo) + '_' + str(Mhi) + '.dat'
        ranout = 'ran_lgm' + str(Mlo) + '_' + str(Mhi) + '.dat'
        xi_select(infile,
                  ranfile=ranfile,
                  galout=galout, ranout=ranout,
                  zrange=(0.002, 0.5), nz=50, 
                  appMin=14, appMax=19.4, lgmMin=Mlo, lgmMax=Mhi)

def xi_group_prep(infile=os.environ ['GAMA_DATA'] + '/groups/G3Cv04/G3CFoFGroup194v04.dat',
                  ranfile='/export/scratch/loveday/gama/mask/mass_randoms_194.dat',
                  galout='group.dat', ranout = 'ran_group.dat',
                  zrange=(0.002, 0.5), lgmMin=5, lgmMax=15,
                  appMin=14, appMax=19.4, absMin=-30, absMax=12): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:29:47.653

正如错误消息可能显示的那样，`os.environ`没有密钥`'GAMA_DATA'`，因此`KeyError`在尝试访问它时会给出一个。请注意，默认参数是在函数定义时评估的，因此此时必须存在此键。

# php - 在 codeigniter 中对编辑表单进行有限验证

> ID：11120641
> 
> 赞同：0
> 
> 时间：2012-06-20T13:24:56.337
> 
> 标签：php, codeigniter

我正在使用带有 codeigniter 的模块化 MVC。我有一个模块播放列表，其中有一个管理控制器，并且我有一个**私有 $rules 变量**来设置表单验证规则。

我在同一个文件中同时具有创建和编辑功能，并验证了这两种形式（添加、编辑也是仅从一个文件 form.php 动态创建的）。

```
$this->load->library('form_validation');
$this->form_validation->set_rules($this->rules);
$this->form_validation->set_error_delimiters(' <p class="error">', '</p>'); 
```

这些用于创建和编辑功能。我不想在编辑模式下验证的一些字段。我是否需要为它们创建不同的私有规则，或者是否有更好的方法在 codeigniter 中处理这个问题，因为我是新手。我想删除对**FILE 标记**的验证，因为用户不需要在编辑模式下上传。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:02:12.390

这是来自 CI 论坛的答案（[原始链接](http://codeigniter.com/forums/viewthread/120221/#819499)）。

然后，您可以使用某种形式的 heirachy 定义创建/编辑规则；

```
<?php
$this->form_validation->set_group_rules('createModule');
$this->form_validation->set_group_rules('editModule');
if($this->form_validation->run() == FALSE) {
   // whatevere you want
}
?> 
```

或者，你可以这样做；

```
<?php
// This will validate the 'accidentForm' first
$this->form_validation->set_group_rules('createModule');
if($this->form_validation->run() == FALSE) {
   // whatevere you want
}
// Now we add the 'locationForm' group of rules
$this->form_validation->set_group_rules('editModule');
// And now we validate *both* sets of rules (remember that the createModule rules are still
// there), but it doesn't necessarily matter, since it will simply redo the 'createModule'
// validation while also doing the 'editModule' validation
if($this->form_validation->run() == FALSE) {
   // whatevere you want
}
?> 
```

下面是扩展 Form_validation 类的代码，保存在应用程序库文件夹中为 MY_Form_validation.php

```
<?php
class MY_Form_validation extends CI_Form_validation {

    /**
     * Set Rules from a Group
     *
     * The default CodeIgniter Form validation class doesn't allow you to
     * explicitely add rules based upon those stored in the config file. This
     * function allows you to do just that.
     *
     * @param string $group
     */
    public function set_group_rules($group = '') {
        // Is there a validation rule for the particular URI being accessed?
        $uri = ($group == '') ? trim($this->CI->uri->ruri_string(), '/') : $group;

        if ($uri != '' AND isset($this->_config_rules[$uri])) {
            $this->set_rules($this->_config_rules[$uri]);
            return true;
        }
        return false;
    }

}

?> 
```

# c# - 是否有可能使功能方法可用？

> ID：11120644
> 
> 赞同：0
> 
> 时间：2012-06-20T13:25:01.090
> 
> 标签：c#, windows-phone-7, silverlight-4.0

使用 C# 进行开发时，使用 Where、Select、Aggregate 等类似函数的方法确实很好，原因有很多，我经常使用它们。但是，Windows Phone 7.1 的 Silverlight 4.0 框架似乎不包括这些。有什么办法可以改变吗？我想我不能只将 mscorlib.dll 更改为指向完整 .NET 框架中的那个，或者我可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:35:00.427

警告：我不进行积极的 WP7 开发。

然而！启动一个普通的 Windows Phone 7.1 项目，并使用以下内容，它工作正常 - LINQ 查询语法和扩展方法语法都工作正常：

```
 var foo = from x in arr
                  where x%2 == 0
                  select x*2;
        var bar = foo.Average(); 
```

唯一需要注意的是，它是从 System.Core.dll 中获取这些方法的，即（如果我在 IDE 中浏览它）：

```
// Type: System.Linq.Enumerable
// Assembly: System.Core, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e
// Assembly location: C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v4.0\Profile\WindowsPhone71\System.Core.dll 
```

所以：只要确保你引用了 Windows Phone 7.1 的 System.Core.dll

编辑（见评论）：还要检查你有：

```
using System.Linq; 
```

在文件的顶部。

# google-maps - jquery mobile + 谷歌地图 + 地理位置

> ID：11120648
> 
> 赞同：0
> 
> 时间：2012-06-20T13:25:04.353
> 
> 标签：google-maps, jquery-mobile, geolocation, navigation

我正在创建公司网站的移动版本，我想知道是否可以制作将成为页面一部分的导航片段，使用 WebKit 或 Safari（Android、Windows、iOS 设备）等移动浏览器打开，并显示当前的路线到固定地点（公司办公室）？类似导航的东西。全部使用 jquery mobile + Google Maps API 和...？也许还需要其他东西？

一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:42:55.657

好吧，您可以使用 GOOGLE MAPS API V3。检查[谷歌代码游乐场](http://code.google.com/apis/ajax/playground/?exp=maps#map_simple_v3)。

您还可以查看[Docs APIV3](https://developers.google.com/maps/documentation/javascript/reference)

您还需要使用[Google Maps Direction Service](https://developers.google.com/maps/documentation/directions/)

您可以直接使用 html5 获取当前位置。[HTML5 中的地理位置](http://html5demos.com/geo)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:35:30.737

这绝对应该适用于 jQuery Mobile 和 Google Maps API。其他用户之前已经这样做了。[jQuery Mobile 论坛 - http://forum.jquery.com/jquery-mobile](http://forum.jquery.com/jquery-mobile)是寻找更多关于同时使用这两者的信息的好地方

# c# - c# 我需要 ManagementBaseObject 来返回一个注册表数组

> ID：11120649
> 
> 赞同：0
> 
> 时间：2012-06-20T13:25:08.440
> 
> 标签：c#, registry, wmi, remote-registry, wmi-service

我使用我不太了解的管理类，只是为了读取远程注册表：

```
 string regKeyToGet = @"SOFTWARE\ODBC\ODBC.INI\ODBC Data Sources";
        string keyToRead = "Description";
        ConnectionOptions oConn = new ConnectionOptions();
        oConn.Username = "user1";
        oConn.Password = "user1password";

        ManagementScope scope = new ManagementScope(@"//" + "PC1" + @"/root/default", oConn);
        ManagementClass registry = new ManagementClass(scope, new ManagementPath("StdRegProv"), null);

        ManagementBaseObject inParams = registry.GetMethodParameters("GetStringValue");
        inParams["sSubKeyName"] = regKeyToGet;
        inParams["sValueName"] = keyToRead;
        ManagementBaseObject outParams = registry.InvokeMethod("GetStringValue", inParams, null);
        MessageBox.Show(outParams["sValue"].ToString()); 
```

此代码为我返回指定键的特定值，但我需要返回一个名称值数组，如下所示：

```
RegistryKey regKey = RegistryKey.OpenRemoteBaseKey(RegistryHive.CurrentUser, PC1, RegistryView.Registry64).OpenSubKey("SOFTWARE\\ODBC\\ODBC.INI\\ODBC Data Sources");
regKey.GetValueNames(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:41:07.670

经过一番研究，我找到了方法，这里是代码：

```
 ConnectionOptions oConn = new ConnectionOptions();
        oConn.Username = "user1";
        oConn.Password = "user1password";
        ManagementScope scope = new ManagementScope(@"//" + "PC1" + @"/root/default", oConn);
        scope.Connect();

        ManagementClass mc = new ManagementClass("stdRegProv");
        mc.Scope = scope;

        ManagementBaseObject mbo;
        mbo = mc.GetMethodParameters("EnumValues");

        mbo.SetPropertyValue("sSubKeyName", @"SOFTWARE\ODBC\ODBC.INI\ODBC Data Sources");

        string[] subkeys = (string[])mc.InvokeMethod("EnumValues", mbo, null).Properties["sNames"].Value;

        foreach (string strKey in subkeys)
        {
            MessageBox.Show(strKey);
        } 
```

我在页面上找到了帮助：[如何读取远程注册表项？](https://stackoverflow.com/questions/1566547/how-to-read-remote-registry-keys)

# deployment - SQL Server 2012 - SSAS 部署失败：文件系统错误，访问被拒绝

> ID：11120651
> 
> 赞同：0
> 
> 时间：2012-06-20T13:25:13.583
> 
> 标签：deployment, ssas, access-denied, sql-server-2012, sql-server-data-tools

上下文是 OLAP 多维数据集开发。通过 SQL Server Data Tools（SSDT，新的 BIDS）配置我的项目后，我无法部署该项目。

每次部署过程开始时，我都会收到如下错误：

> 文件系统错误：打开文件'\\?\D:\[...]\database\mssql\tmpdb\MDTempStore_1864_9_no8wd.tmp'时出现以下错误：访问被拒绝。

（[...] 表示我为简单起见而省略的路径的某些部分）

我总是收到同样的错误，表明无法访问某些 .tmp 文件。

我的环境：

*   **操作系统**：Windows Server 2008 R2 标准版、SP1
*   **SQL Server**：SQL Server 2012 (v11.0.2100.60)，在本地主机上运行

我尝试了什么：

*   我拥有相关文件夹的文件系统访问权限（有时我什至尝试在机器上使用管理员权限，但没有帮助）
*   我试图停用防病毒软件，以防它正在执行访问扫描（仍然没有帮助）
*   尝试部署/处理单个维度会导致相同的问题
*   通过 SMO（而不是 SSDT）以编程方式部署维度或多维数据集会遇到同样的问题
*   部署 DataSource 对象以及 DataSourceView 对象工作正常

也许你们中的一些人面临类似的问题或有进一步的建议/想法？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:20:33.530

所以，我终于想通了。

正如预期的那样，这是一个权限问题，但尽管错误消息提示缺少一些文件系统权限，但问题的原因是我配置数据源的用户。

我指定的 SQL 用户被赋予了角色

*   db_datareader
*   db_datawriter
*   db_ddladmin

在源数据库上，但这似乎还不够。当我试图给他服务器角色*sysadmin*时，它开始工作。

这可能是矫枉过正，可以进一步微调角色分配，但现在它也可以这样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:05:39.820

确切原因是 SSAS 服务用户无权访问 SSAS 配置中指定的文件夹（即错误状态为临时文件夹）。我认为它与 SQL Server 没有直接关系，因为它只是文件访问错误。在到达 SQL Server 之前引发错误。

将这些文件夹的完全权限授予 SSAS 服务用户。

问候奥努尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:55:34.713

这里只是一个建议-您是否尝试过以管理员身份运行 SSDT？也就是说，右键单击 SSDT，然后单击以管理员身份运行。然后尝试部署您的项目。这听起来绝对像是权限问题。

# python - 如何在 django 模型中存储函数

> ID：11120652
> 
> 赞同：2
> 
> 时间：2012-06-20T13:25:14.143
> 
> 标签：python, django, models

编辑：我完全重写了这个问题，因为原来的问题没有清楚地解释我的问题

我想运行一个特定于每个特定模型实例的函数。

理想情况下，我想要这样的东西：

```
class MyModel(models.Model):
    data = models.CharField(max_length=100)
    perform_unique_action = models.FunctionField() #stores a function specific to this instance

x = MyModel(data='originalx', perform_unique_action=func_for_x)
x.perform_unique_action() #will do whatever is specified for instance x

y = MyModel(data='originaly', perform_unique_action=func_for_y)
y.perform_unique_action() #will do whatever is specified for instance y 
```

但是没有数据类型 FunctionField。通常这可以通过继承解决，并创建 MyModel 的子类，可能像这样：

```
class MyModel(models.Model):
    data = models.CharField(max_length=100)
    perform_unique_action = default_function

class MyModelX(MyModel):
    perform_unique_action = function_X

class MyModelY(MyModel):
    perform_unique_action = function_Y

x = MyModelX(data='originalx')
x.perform_unique_action() #will do whatever is specified for instance x

y = MyModelY(data='originaly')
y.perform_unique_action() #will do whatever is specified for instance y 
```

不幸的是，我认为我不能使用继承，因为我试图以这种方式访问​​该函数：

```
class MyModel(models.Model):
    data = models.CharField(max_length=100)
    perform_unique_action = default_function

class SecondModel(models.Model):
    other_data = models.IntegerField()
    mymodel = models.ForeignKey(MyModel)

secondmodel = SecondModel.objects.get(other_data=3)
secondmodel.mymodel.perform_unique_action() 
```

问题似乎是，如果我覆盖子类中的 perform_unique_action，我不知道 SecondModel 中的外键是什么类型。

我可以从 SecondModel 作为外键访问 MyModel 并且对 MyModel 的每个实例仍然具有唯一的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:27:05.337

我想出了两种为每个对象定义特定函数的方法。一种是使用 marshal 创建可以存储在数据库中的字节码（不是一个好方法），另一种是通过存储对要运行的函数的引用，正如 Randall 所建议的那样。这是我使用存储引用的解决方案：

```
class MyModel(models.Model):
    data = models.CharField(max_length=100)
    action_module = models.CharField(max_length=100)
    action_function = models.CharField(max_length=100)

class SecondModel(models.Model):
    other_data = models.IntegerField()
    mymodel = models.ForeignKey(MyModel)

secondmodel_obj = SecondModel.objects.get(other_data=3)
#The goal is to run a function specific to the instance
#of MyModel referred to in secondmodel_obj

module_name = secondmodel_obj.mymodel.action_module
func_name = secondmodel_obj.mymodel.action_function

module = __import__(module_name)
func = vars(module)[func_name]
func() 
```

感谢所有回复的人，如果不是你的帮助，我不可能得到这个答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T03:22:15.883

这对我有用。我还没有测试过它，但你应该能够创建另一个类并覆盖它们的方法，它会工作的。检查该`class Meta`行，它将把它当作一个抽象类。这是我现在正在学习的实际课程的示例。

**编辑：**添加了 VoteComment 类并对其进行了测试。它按预期工作！

```
class Vote(models.Model):
    VOTE_ENUM = (
        (VoteEnum.DOWN_VOTE, VoteEnum.toString(VoteEnum.DOWN_VOTE)),
        (VoteEnum.NONE, VoteEnum.toString(VoteEnum.NONE)),
        (VoteEnum.UP_VOTE, VoteEnum.toString(VoteEnum.UP_VOTE)),

    )
    question = models.ForeignKey(Question, null=False, editable=False, blank=False)
    voter = models.ForeignKey(User, blank=False, null=False, editable=False)
    vote_type = models.SmallIntegerField(default=0, null=False, blank=False, choices=VOTE_ENUM)

    class Meta:
        abstract = True

    def is_upvote(self):
        return self.vote_type > 0
    def is_downvote(self):
        return self.vote_type < 0

class VoteAnswer(Vote):
    answer = models.ForeignKey(Answer, null=False, editable=False, blank=False)

    class Meta:
        unique_together = (("voter", "answer"),) # to prevent user from voting on the same question/answer/comment again

    def __unicode__(self):
        vote_type = "UP" if vote_type > 0 else ("DOWN" if vote_type < 0 else "NONE")
        return u"{0}: [{1}] {2}".format(user.username, vote_type, answer.text[:32])

    def is_upvote(self):
        return "FOO! "+str(super(VoteAnswer, self).is_upvote())

class VoteComment(Vote):
    comment = models.ForeignKey(Comment, null=False, editable=False, blank=False)

    class Meta:
        unique_together = (("voter", "comment"),) # to prevent user from voting on the same question/answer/comment again

    def __unicode__(self):
        vote_type = "UP" if vote_type > 0 else ("DOWN" if vote_type < 0 else "NONE")
        return u"{0}: [{1}] {2}".format(user.username, vote_type, comment.text[:32])

    def is_upvote(self):
        return "BAR!" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:12:39.667

您可以实现一些类似的行为来覆盖 save 方法。并为您的实例提供特殊回调。

就像是：

```
def default_function(instance):
    #do something with the model instance

class ParentModel(model.Model):
    data = models.CharField()
    callback_function = default_function

    def save(self, *args, **kwargs):
        if hasattr(self, 'callback_function'):
            self.callback_function(self)
        super(ParentModel, self).save(*args, **kwargs)

class ChildModel():
    different_data = models.CharField()
    callback_function = other_fun_specific_to_this_model

instance = ChildModel()
#Specific function to this particular instance
instance.callback_function = lambda inst: print inst.different_data
instance.save() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-12T08:16:07.397

您可以在您的服务器上编写端点，并将它们的访问权限限制为您自己。然后在每个模型实例中存储对应的url。例如：

视图.py

```
def funx_x(request):
    pass

def func_y(request):
    pass 
```

模型.py：

```
class MyModel(models.Model):
    data = models.CharField(max_length=100)
    perform_unique_action = models.URLField() 
```

接着：

```
x = MyModel(data='originalx', perform_unique_action='http://localhost/funx_x')
requests.post(x.perform_unique_action) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-20T14:38:00.577

我不知道我理解你是否正确。[但是您可以在此处](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)查看此示例。

例子：

表示模型属性的字符串。这与可调用的行为几乎相同，但在这种情况下， self 是模型实例。这是一个完整的模型示例：

```
class Person(models.Model):
    name = models.CharField(max_length=50)
    birthday = models.DateField()

    def decade_born_in(self):
        return self.birthday.strftime('%Y')[:3] + "0's"
    decade_born_in.short_description = 'Birth decade'

class PersonAdmin(admin.ModelAdmin):
    list_display = ('name', 'decade_born_in') 
```

# android - 如何让每个 ListItem 去不同的活动

> ID：11120653
> 
> 赞同：4
> 
> 时间：2012-06-20T13:25:14.070
> 
> 标签：android, eclipse, listview

我对 Android 世界比较陌生，但我有一个简单的问题。

我在一个页面上有一个列表，其中可能有无限数量的行，这些行将由数据库填充。这些将根据其类型（如客户等）进行不同的活动。是否可以根据用户点击的活动将用户发送到特定活动？

我见过一些基于 switch/case 的解决方案，但如果你有一个有限项的列表，并且你事先知道这些项的名称，这似乎是使用的。

所以，我要说的是，如果我使用 switch/case 解决方案，应用程序如何知道哪个按钮转到哪个 case？这需要在列表本身或数据库中定义吗？

我目前无法提供任何代码，因为它的开发还没有那么远，而且我也在该项目的 NDA 之下！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:39:36.760

你可以在`setonitemclicklistener()`. 每当您单击列表视图的任何行时都会调用此函数。您单击的项目的位置/行号也会传递给此函数。

由于您使用数据库来填充您的列表，您可以这样做：

```
 setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, COUNTRIES));

          ListView lv = getListView();
          lv.setTextFilterEnabled(true);

            //SEE THIS FUNCTION

            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                  /*
                    "position" is the position/row of the item that you have clicked

                    Query your table. Then move the cursor to "position" and get the 
                    details. THen based on the details call a new activity.

                    */
                    Cursor cur=db.query("your table name",null,null,null,null,null.null);
                    cur.moveToPosition(position); // see the argument int position

                //Extract details from this row,process it and send to the respective activiy                       
  }); 
```

# macos - NSTextField 透明背景

> ID：11120654
> 
> 赞同：47
> 
> 时间：2012-06-20T13:25:21.473
> 
> 标签：macos, cocoa, nstextfield

我创造*透明* `NSTextField`

```
self.myTextField = [[NSTextField alloc] initWithFrame:CGRectMake(backgroundView.frame.origin.x + backgroundView.frame.size.width + 20, self.projectTitle.frame.origin.y - 30.0, 100, 20)];
self.myTextField.editable = NO;
self.myTextField.bezeled = NO;
self.myTextField.drawsBackground = YES;
self.myTextField.backgroundColor = [NSColor clearColor];
self.myTextField.selectable = NO;
self.myTextField.font = [NSFont fontWithName:@"Helvetica Neue" size:16];

    [self addSubview:self.compressingTime]; 
```

结果文本看起来很糟糕。![在此处输入图像描述](../Images/3b67a2642e5a0f771eaad9cd89e91c69.png) 如果我设置背景颜色

```
 self.myTextField.backgroundColor = [NSColor colorWithCalibratedRed:0.85 green:0.85 blue:0.85 alpha:1.0]; 
```

一切看起来都不错![在此处输入图像描述](../Images/7709434ebde9db645c3db0379e6497bb.png) 我也尝试过`drawsBackground = NO;`你们知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-09-04T17:46:37.900

`NSTextField`秘诀是在...上设置所有三个属性

```
myTextField.bezeled         = NO;
myTextField.editable        = NO;
myTextField.drawsBackground = NO; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-10-02T21:33:38.100

.xib 文件中有一个属性，在文本字段的界面构建器窗口中，在属性检查器下

1.  检查显示绘制背景
2.  选择背景颜色。为透明背景选择清晰的颜色。

[![在此处输入图像描述](../Images/79a1169b515146bd6d70dbfc29992bad.png)](https://i.stack.imgur.com/6RbCt.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-01T08:38:06.360

从 10.12 开始，您可以这样做：

```
let label = NSTextField(labelWithString: "HELLO") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-18T09:23:56.650

也来这里找这个，并且有背景给我一个透明的灰色。关键是没有挡板。我的代码如下：

```
NSTextField *yourLabel = [[NSTextField alloc] initWithFrame:NSMakeRect(0, 0, width , height * 1.0/3.0)];
yourLabel.editable = false;
yourLabel.bezeled = false;
[yourLabel setTextColor:[NSColor blackColor]];
[yourLabel setBackgroundColor:[NSColor colorWithRed:0.1 green:0.1 blue:0.1 alpha:0.1]]; 
```

为了完整起见，我之前得到了宽度和高度，因为它们被多次用于布局：

```
height = self.window.frame.size.height;
width = self.window.frame.size.width; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T06:15:06.180

我最终`CATextLayer`改用`NSTextField`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-26T05:05:18.483

我有同样的问题。默认外观为空。我尝试设置暗模式，它可以工作。

```
self.nameTextField.appearance = [NSAppearance appearanceNamed:NSAppearanceNameVibrantDark]; 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-07-23T09:31:59.553

我刚才有这个问题。我通过从 NSTextField 的超级视图中**删除一个名为的属性`backgroundColor`**来修复它。

我`backgroundColor`只是将 NSView 子类上的 CALayer 属性用作方便的 getter/setter。虽然 NSView 上没有记录这个属性，但看起来我不小心覆盖了 NSView 上的一个属性。

是的，子类化！

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2012-08-29T11:41:13.417

清晰的颜色将使当前视图（即）NSTextView 的背景透明，因此保存 NSTextView 的 NSView 的颜色是可见的。

# c# - 缩小图像质量损失

> ID：11120656
> 
> 赞同：3
> 
> 时间：2012-06-20T13:25:32.543
> 
> 标签：c#, javascript, html, image-resizing, image-quality

我在 JS Carousel 中显示图像。这些图像非常大，所以我在 HTML 中缩小了它们。我做了一些数学运算来保持纵横比。最后，尽管这些大图像质量下降。应该注意这些图像已经存在于服务器中，我不应该更改原始文件的大小。

是什么导致质量下降？我应该坚持使用较小尺寸的图像，增加将显示的最终尺寸吗？这是帮助的代码，最大宽度和高度目前分别为 270 和 180。所有这些都是 C#。

```
// srcccccc is the image file. Can be any kind of extension jpg, png, etc.
if (srcccccc != "")
{
    Globals.NavigateURL();
    string path = PortalSettings.HomeDirectory + srcccccc;
    using (System.Drawing.Image img = System.Drawing.Image.FromFile(@Server.MapPath(path)))
    {
        int[] newSizes = ResizeWithRatio(img);
        contentsall += "<img src=\"" + PortalSettings.HomeDirectory + srcccccc + "\" alt=\"Image "
            + folderidddin + "\" height=\"" + newSizes[1] + "px\"" + "\" width=\"" + newSizes[0] + "px\" />";
    }
}

// HTML is dynamically added later....

private int[] ResizeWithRatio(System.Drawing.Image img)
{
            int[] sizes = new int[2];
            if (img.Width > maxWidth || img.Height > maxHeight)
            {
                float ri = (float)img.Width / (float)img.Height;
                float rs = (float)maxWidth / (float)maxHeight;
                if (rs > ri)
                {
                    sizes[0] = (int)((float)img.Width * (float)maxHeight / (float)img.Height);
                    sizes[1] = maxHeight;
                }
                else
                {
                    sizes[0] = maxWidth;
                    sizes[1] = (int)((float)img.Height * (float)maxWidth / (float)img.Width);
                }
            }
            else
            {
                sizes[0] = img.Width;
                sizes[1] = img.Height;
            }
            return sizes;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:31:12.080

您遇到的问题是您根本没有缩放图像，而是告诉网络浏览器获取完整尺寸的图像并将其渲染得更小。遗憾的是，浏览器在这方面并不是很擅长，我认为只需使用一个非常简单的算法来做到这一点。

解决方案是缩放服务器上的图像。我建议有一个页面处理程序，它以某种方式（文件名、id 等）接收图像引用并在输出到客户端之前调整大小。以下问题涉及 c# 中的缩放。

[高质量图像缩放库](https://stackoverflow.com/questions/249587/high-quality-image-scaling-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:29:54.893

最好缩小图像服务器端，[看看这个文档](http://msdn.microsoft.com/en-us/library/ets0sayh.aspx)。这将节省网络流量并创建质量更好的图片。

# asp.net-mvc - 通过 Ajax 验证用户：在 ajax 方法中的 User.Identity.IsAuthenticated，但在其他地方为 False

> ID：11120657
> 
> 赞同：2
> 
> 时间：2012-06-20T13:25:35.323
> 
> 标签：asp.net-mvc, forms-authentication

我正在使用 Facebook 对用户进行预认证，因此当他们访问页面时，会调用一个 ajax 函数来登录用户，并且服务器还将检查用户是否已通过该站点的身份验证。这些用户在服务器上的用户数据库中有条目。

服务器端代码如下，由ajax调用。之后，我使用第二种方法来获取有关存储在数据库中的用户的更多信息。

当我在第二种方法中调用 User.Identity.IsAuthticaed 时，在同一个控制器中，用户对象仍然为空。User 对象包含下面 FBReg 中的所有信息。

**编辑：** 经过进一步的故障排除后，我发现调用 getUserInfo() 的 ActionResult 填充了 User 对象。所以我不确定为什么 getUserInfo() 有一个空用户。我想那时我可以通过对象，但我仍然很好奇为什么会发生这种情况。

```
 [HttpPost]
    public String FBReg(FBInfo userinfo)
    {   
        ..
        ..
        ..

     if (!User.Identity.IsAuthenticated)
     {
         if (ModelState.IsValid)
         {
             if (Membership.ValidateUser(userinfo.id, "FBPassword"))
             {
                 FormsAuthentication.SetAuthCookie(userinfo.id, true);
                 var result = (from u in db.users where (u.username == userinfo.id) select u).FirstOrDefault();
                 result.LastLoginDate = DateTime.Now;
                 db.SaveChanges();
             }
             else
             {
                 ModelState.AddModelError("", "The user name or password provided is incorrect.");
             }
         }
        ..
        ..
        ..
        return "";
  }

public UserRepository getUserInfo()
{
    bool isauth = false;
    try
    {
        if (User.Identity.IsAuthenticated)  // User is always null even after FBReg has User as Authnticated with all the correct information
        {
            isauth = User.Identity.IsAuthenticated;
        }
    }
    catch { }

        // get user info from database to display on page
        ..
        ..
        ..

    return userInfo;
} 
```

# xquery - 如何在 Marklogic 中按顺序显示插入的 xml 文档？

> ID：11120659
> 
> 赞同：0
> 
> 时间：2012-06-20T13:25:42.163
> 
> 标签：xquery, marklogic

我正在从 Marklogic Server 的 UI 中插入一些 xml 文档，同时在列表中显示它们。我想按顺序显示文件。首先插入的文档应该排在列表的首位。第二个文件应该排在第二位，依此类推。但是 Marklogic 是随机显示它们，没有任何顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:13:22.100

使用 MarkLogic Server 时，插入顺序不会保留或保留。如果您希望保留文档的插入顺序，则数据或数据的属性将需要一些值，服务器可以在该值上执行“order by”子句。

```
for $doc in fn:doc()
order by $doc//some-aspect-of-the-xml-structure
return
$doc 
```

这些文档在“无共享”架构中确实彼此独立。这有助于 MarkLogic 比一些“行”在“表”中共享成员资格和排序的关系数据库方法运行得更快，因此无法有效地进行集群。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:54:31.017

您可以按上次更新的数据排序文档：

```
(:If uri lexicone is enabled, else you can iterate by fn:collection():)
for $uri in cts:uris((), "document") 
let $updated-date := xdmp:document-get-properties($uri, fn:QName("http://marklogic.com/cpf", "last-updated"))
order by $updated-date/text()
return $uri 
```

还有另一种方法，不使用 uri 词典：

```
for $doc in fn:collection()
let $uri := xdmp:node-uri($doc)
let $updated-date := xdmp:document-get-properties($uri, fn:QName("http://marklogic.com/cpf", "last-updated"))
order by $updated-date/text()
return $uri 
```

# mysql - 更新时间戳的mysql表列而不更改任何字段

> ID：11120666
> 
> 赞同：2
> 
> 时间：2012-06-20T13:26:19.780
> 
> 标签：mysql, sql

如果没有以下语句，我们如何更新表中的时间戳而不进行任何更新

```
update table_name set field_name1 = 1 where field_name =1; 
```

我添加了表格结构的图像

![在此处输入图像描述](../Images/340d763bccc67100d00805fb88e60344.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T13:28:57.940

不使用就无法更新`UPDATE`。

对于时间戳列，请阅读 MySQL 文档：[自动初始化和更新 TIMESTAMP](http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html)

> 如果该列是自动更新的，则当该行中任何其他列的值从其当前值更改时，它会自动更新为当前时间戳。如果所有其他列都设置为其当前值，则该列保持不变。为了防止该列在其他列更改时更新，请将其显式设置为其当前值。
> 
> **要即使在其他列未更改时也更新该列，请将其显式设置为应具有的值（例如，将其设置为`CURRENT_TIMESTAMP`）**。

因此，仅更新时间戳列：

```
UPDATE table_name 
SET last_delv_date = CURRENT_TIMESTAMP
WHERE ... ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:30:56.160

```
UPDATE table_name 
SET columnNAME = CURRENT_TIMESTAMP
WHERE columnName = ??? 
```

编辑：

或将您的表结构更改为：

```
ON UPDATE CURRENT_TIMESTAMP 
```

# android - 有没有 startActivity() 的替代方法？

> ID：11120668
> 
> 赞同：0
> 
> 时间：2012-06-20T13:26:21.447
> 
> 标签：android

我正在制作我的第一个 android 应用程序，它需要非常频繁地在活动之间切换。我知道我可以调用finish() 来结束当前的Activity，但我想知道是否有办法不调用finish() 或startActivity()，而是以某种方式返回该Activity 的旧实例？也不使用返回按钮。

如果有人有任何想法，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:29:25.817

可以使用`FLAG_ACTIVITY_CLEAR_TOP` 它将清除所有活动，直到此 OLD_ACTIVITY 的先前引用。

`Intent.FLAG_ACTIVITY_CLEAR_TOP`根据您的意图使用标志。有关更多详细信息 -

```
Intent i =new Intent(current_ACTIVITY.this, OLD_ACTIVITY.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

还有更多像 NO_History 这样的标志等等............

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:35:45.580

据我了解，我建议您使用`startActivityForResult()`启动一个新活动，然后在完成新活动后，您将返回上一个活动的旧实例。

# spring - 在 Spring 中用 AOP 代理替换目标对象

> ID：11120669
> 
> 赞同：1
> 
> 时间：2012-06-20T13:26:26.023
> 
> 标签：spring, aop, aspectj

在 AspectJ 中，我们有两个概念：

1.  目标对象
2.  AOP 代理

我实例化了一个目标对象，然后将它传递给代理工厂并建议它。为了获得新的建议对象，我必须调用`proxyFactory.getProxy()`.

我的目标对象是其他 bean 使用的 Spring bean。一旦 proxyFactory 建议我如何在任何使用它的地方用 AOP 代理替换目标对象？我正在使用 Spring 上下文。

我认为 AspectJ 做了类似的事情，因为您只需添加一些包含“aop”的 XML 标记，然后您的 bean 包含新的建议方法。

# csv - 按第一列的内容拆分 csv 文件而不创建副本？

> ID：11120686
> 
> 赞同：0
> 
> 时间：2012-06-20T13:27:07.053
> 
> 标签：csv, awk, split, copy

我正在尝试完成类似于此线程中描述的内容：[如何根据第一列的内容拆分巨大的 csv 文件？](https://stackoverflow.com/questions/9489078/how-to-split-a-huge-csv-file-based-on-content-of-first-column)

在那里，最好的解决方案似乎是使用 awk 来完成这项工作。但是，我正在处理非常庞大的 csv 文件，并且我想在不创建新副本的情况下拆分文件，因为磁盘 I/O 速度正在扼杀我。有没有办法在不创建新副本的情况下拆分原始文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:57:07.353

我不太确定你在问什么，但如果你的问题是：“我可以在磁盘上获取一个大文件并‘就地’拆分它，这样我就可以得到许多小文件，而不必将这些小文件写入磁盘？”，那么答案是否定的。

您将需要遍历第一个文件并将“段”作为新文件写回磁盘，无论您为此使用 awk、Python 还是文本编辑器。不过，您不需要事先制作第一个文件的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:56:03.400

“分割文件”仍然需要 RAM 和磁盘 I/O。没有办法解决这个问题。这就是世界的运作方式。

但是，您当然可以减少 I/O 绑定进程对系统的*影响*。一些明显的解决方案是：

1.  使用 RAM 磁盘来减少磁盘 I/O。
2.  使用 SAN 磁盘来减少本地磁盘 I/O。
3.  使用 I/O 调度程序对磁盘 I/O 进行速率限制。例如，大多数 Linux 系统为此目的支持*ionice实用程序。*
4.  将文件分块并使用批处理队列来减少 CPU 负载。
5.  在文件处理期间使用*nice*来减少 CPU 负载。

如果您正在处理文件，那么您正在处理 I/O。您可以在系统限制内充分利用它。

# ssl - 从 ssl-terminating-point 后面的 glassfish 连接到第三方双向 https ws

> ID：11120692
> 
> 赞同：2
> 
> 时间：2012-06-20T13:27:32.087
> 
> 标签：ssl, iis, glassfish, f5

# 语境

我开发了一个部署在 Glassfish 3.1 中的应用程序。此应用程序只能通过 https 访问，有时它必须连接到位于客户网络之外的第三方 Web 服务。客户在他的网络中有其他应用程序；我的只是一个新的“服务”。

## 拓扑近似

![网络逼近](../Images/d3927cda5b4d8b0af232a7337ed4a2e0.png)

*   Big-ip F5 是 ssl 端点。客户在此设备中拥有有效证书
*   IIS 按域重定向到相应的服务
*   glassfish 是带有应用程序的机器（当然，超过 glassfish 3.1）

## 这个怎么运作

当用户尝试连接到 _https://somedomain 时，请求会到达 SSL 加密结束的 F5；现在我们有一个请求到_http://somedomain。在下一步中，F5 将此请求重定向到 IIS，最后重定向到 glassfish。此请愿书已成功处理。

## 兴趣点

*   我完全控制 glassfish 服务器和它所在的虚拟机的 SO。没有其他应用程序正在或将要部署在此服务器上；它是应用程序及其所需的一些服务的专用服务器。Glassfish 在具有 Debian 发行版的 VM 上运行，因此该 VM 由 VM 服务器提供，但我不知道品牌、型号等。glassfish 具有默认的 http 侦听器配置。
*   我没有关于网络和其他设备的更多信息，也无法访问任何其他设备的任何配置文件。我不能为自己修改网络的任何部分，但可以要求、建议或建议进行更改。网络的行为不应改变。
*   实际上，用户可以毫无问题地访问应用程序。
*   使用的证书是Verysign信任的简单域证书
*   客户不知道如何解决这个问题。

## 问题

应用程序必须访问的所有第三方 WS 都具有唯一的 https 访问权限，并且在某些情况下，所需的身份验证是相互的（双向），我们在这里发现了问题。当应用程序想要通过相互 ssl 身份验证连接到 WS 时，它会发送 glassfish 本地密钥库配置目标证书。如果可能，客户希望对传入和传出的安全连接使用相同的证书。该证书在 F5 中，我无法添加到 glassfish 密钥库，因为如果我这样做，我将违反 Verysign 合同要求。我一直在谷歌寻找解决方案，这里（stackoverflow），jita，......但只有我找到的传入流量解决方案。我知道可能需要 SSL 代理，但我没有找到任何用于传出 ssl 连接的示例或替代解决方案。

# 我要什么

我不是说英语的人（不是很明显吗？），也许我在搜索词中没有使用正确的词。我可以理解，这种情况可能是一场噩梦并且难以解决，但我会坚持......我首先需要知道是否存在针对该问题的解决方案（或解决方案），以及它（或它们！）是否存在于哪里或者我怎样才能找到它/他们。我已经准备了不同的替代方案来与客户谈判，但我需要知道真相。我在这上面花了好几个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:36:41.990

有几个解决方案。

1）为第二个“许可证/证书”支付更多的钱。他们会很乐意拿你的钱换取“特权”。:)

2) 在 443 上创建一个不同的虚拟服务器，它指向一个将您的客户端服务器地址作为池成员的池。然后在虚拟服务器上，附加一个配置为使用与传入连接相同的证书的 serverssl 配置文件。然后 F5 将使用相同的证书进行身份验证，并且您的应用服务器不需要安装客户端证书。此外，如果他们需要向您发起会话，您将必须设置一个带有 clientssl 配置文件的虚拟服务器，该配置文件使用相同的证书并需要客户端证书才能连接。

如果您的目的地可能不是静态地址，则必须创建一个 irule 来处理它。可以在 10 或更高版本的代码中使用 irule 中的 DNS 调用并为会话设置一个节点进行处理。

# android - 三星 Galaxy Tab 和屏幕密度

> ID：11120693
> 
> 赞同：0
> 
> 时间：2012-06-20T13:27:32.950
> 
> 标签：android, galaxy-tab, android-screen-support

如您所知，三星 Galaxy Tab（7.4 英寸）的屏幕分辨率通常为 1200x600，dpi 为 160，但三星报告其密度为 240 dpi。

所以，我为 Galaxy 选项卡创建了 hdpi 图形并将它们放在`drawable-hdpi`文件夹中。

但我注意到在将自定义 ICS rom 安装到 Galaxy Tab 后，galaxy tab 开始报告其密度 160 dpi。所以它显示 mdpi 图形。

我想知道我可以在我的应用程序中做些什么来处理这种特殊情况；因为我知道我用`drawable-mpdi`图形替换图形`drawable-hdpi`，所以这次很多设备都会出现应用程序问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:39:59.250

如果只是针对上述情况，可以使用“平台版本”限定词。（参考[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)）

`drawable-v14`适用于 ICS，因此适用于其他版本。您还可以`drawable-hdpi-v14`用于细粒度控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:47:57.837

我认为您在谈论 GT-P1000，并且对于该尺寸具有 HDPI 密度而不是 MDPI 是唯一的例外。我在所有其他类似大小的选项卡的文件夹`drawable-large-HDPI`旁边使用它`drawable-large-MDPI`，因此两者都有不同的资源。

# vb.net - VB.NET 假进度条

> ID：11120697
> 
> 赞同：-1
> 
> 时间：2012-06-20T13:27:51.077
> 
> 标签：vb.net, progress-bar

当我点击按钮时，我想制作假的进度条：

```
for i = 0 to Maximum 
progressbar1.value = progressbar1.value + 1
next 
```

但是progressbar.value = 100 太快了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:29:18.177

使用计时器，
按钮：

```
timer1.enable = true 
```

计时器：

```
 If ProgressBar1.value = ProgressBar1.maximum Then
            Timer1.Enabled = False
            Exit Sub
        End If
        ProgressBar1.value = ProgressBar1.value + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:40:41.967

尝试类似...

```
for i = 0 to Maximum 
    progressbar1.value = progressbar1.value + 1
    Pause(5)
next

Public Sub Pause(ByRef seconds As Double)
    Dim fIni as DateTime = Now.AddSeconds(seconds)

    While Now < fIni
        My.Application.DoEvents()
    End While
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:43:05.670

当某事花费很长时间时，您通常会显示进度，以便您可以向用户显示进度。

```
 For i = 0 To ProgressBar1.Maximum - 1
        'some long running process happens here 
        ProgressBar1.Value += 1
    Next 
```

如果您想模拟登录运行过程以进行测试等，您可以使用 Sleep

```
 For i = 0 To ProgressBar1.Maximum - 1
        System.Threading.Thread.Sleep(50) 'wait for 50ms
        ProgressBar1.Value += 1
    Next 
```

*然而*

这样做的首选方法是在后台工作人员中执行长时间运行的进程，并在完成后使用委托更新进度条。但这是另一个问题。

# c# - 从一个复制项目 动态到另一个

> ID：11120699
> 
> 赞同：2
> 
> 时间：2012-06-20T13:27:54.910
> 
> 标签：c#, asp.net

这是我们的代码：

```
 <div>
 <table style="width: 349px">
    <tr>
    <td class="style1">
        <asp:ListBox ID="leftbox" runat="server" Height="114px" Width="212px" 
            SelectionMode="Multiple" AutoPostBack="True">
        </asp:ListBox>
    </td>
    <td>
        <asp:Button ID="Button1" runat="server" Text=">>" onclick="Button1_Click" /><br />
        <asp:Button ID="Button2" runat="server" Text="<<" onclick="Button2_Click" />
    </td>
    <td>
        <asp:ListBox ID="rightbox" runat="server" Height="117px" Width="231px" 
            SelectionMode="Multiple" AutoPostBack="True"></asp:ListBox>
    </td>

    </tr>
</table>
</div> 
```

后面的代码是：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        List<string> list= GetNameList();
        leftbox.DataSource = list;
        leftbox.DataBind();             
    }
}

private static List<string> GetNameList()
{
    List<string> list = new List<string>();
    list.Add("keerthana");
    list.Add("sirisha");
    list.Add("anusha");
    list.Add("Anuradha");
    list.Add("Bhavani");
    list.Add("divya");
    list.Sort();
    return list;
} 
```

请告诉我如何在不使用服务器端代码的情况下从`leftbox`到一个一个地添加两个或多个选定项（如下所示）：`rightbox`

```
protected void Button1_Click(object sender, EventArgs e)
{
    if (leftbox.SelectedIndex != -1)
    {
        rightbox.Items.Add(leftbox.SelectedItem.Text);
        leftbox.Items.Remove(leftbox.SelectedItem.Text);
    }
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:35:49.407

使用客户端 javascript 来执行此操作，因此您不会在每次有人移动某物时回发，如果您有 jquery，它可以很简单：

```
$("#Button1").button().click(function() {
  $("#leftbox option:selected").each(function() {
      $("#rightbox").append(this);
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:11:32.317

这是从 ListBox 中获取所选项目的 Linq 方式

```
var selectedItems =  leftbox.Items.OfType<ListItem>().Where(item => item.Selected).ToList(); 
```

然后您可以将所有选定的值添加到`rightbox`并最终从中删除`leftbox`

## 编辑

```
protected void Button1_Click(object sender, EventArgs e)
{
    List<ListItem> selectedItems = new List<ListItem>();
    if (leftbox.SelectedIndex >= 0)
    {
        for (int i = 0; i < leftbox.Items.Count; i++)
        {
            if (leftbox.Items[i].Selected)
            {
                    selectedItems.Add(leftbox.Items[i]);
            }
        }

    }

    for (int i = 0; i < selectedItems.Count; i++)
    {
        if (!rightbox.Items.Contains(selectedItems[i]))
            rightbox.Items.Add(selectedItems[i]);
        leftbox.Items.Remove(selectedItems[i]);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T03:30:27.693

这将完成工作，但这里的问题是.. 在您传输项目并单击保存按钮后，它将首先提交，然后您的保存代码将读取您从 Rightbox 移动到 Leftbox 的所有项目将返回到 Rightbox viseversa

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript">
            $(function () {
                $("#left").bind("click", function () {
                    var options = $("[id*=RIghtBox] option:selected");
                    for (var i = 0; i < options.length; i++) {
                        var opt = $(options[i]).clone();
                        $(options[i]).remove();
                        $("[id*=LeftBox]").append(opt);
                    } 
                });

                $("#right").bind("click", function () {
                    var options = $("[id*=LeftBox] option:selected");
                    for (var i = 0; i < options.length; i++) {
                        var opt = $(options[i]).clone();
                        $(options[i]).remove();
                        $("[id*=RIghtBox]").append(opt);

                    }
                });
            });

        </script> 
```

# javascript - 在 jQuery 中拆分此数组

> ID：11120700
> 
> 赞同：0
> 
> 时间：2012-06-20T13:27:56.137
> 
> 标签：javascript, jquery

我有一系列城市和 ID，如下所示：

```
Brønderslev|810,Frederikshavn|813,Hjørring|860,Jammerbugt|849,Læsø|825,Mariagerfjord|846,Morsø|773,Rebild|840,Thisted|787,Vesthimmerland|820,Aalborg|851 
```

我**不**想要这个：

```
<option value="810">Frederikshavn</option> 
```

我**确实**想要这个：

```
<option value="813">Frederikshavn</option> 
```

逗号分隔键/值*对*，管道分隔键和值。

我已经走了这么远，但它似乎没有循环？

```
//Get cities by Region 
```

功能GetCitiesByRegion（参数）{

```
var params = '{"regionGuid":"' + args + '"}'

var request = {
    type: "POST",
    async: false,
    cache: false,
    url: "http://" + location.hostname + "/webservices/services.svc/GetCitiesByRegion",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    data: params,
    success: function (result) {
        //alert("Data Loaded: " + result.d);
        var resultData = result.d;
        alert(resultData);
        $jq.each(resultData.split('|'), function (city, value) {
           //alert(this);
           alert(city + ': ' + value);
        });
    },
    error: function (xhr, status, error) {
        alert('Fejl ved webservice: error: ' + error);
    }
};

$jq.ajax(request); 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:31:35.030

这会将您的字符串转换为`option`元素：

```
$.each(str.split(","), function(k, v) {
    var v = v.split("|");
    $("<option />").text(v[0]).val(v[1]).appendTo("select");
}); 
```

**演示：http:** [//jsfiddle.net/XRD6Y/](http://jsfiddle.net/XRD6Y/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:46:47.727

您请求的 JSON 格式*不是*字符串。

因此，您不能使用`split()`将其更改为 text/html。

# php - mysqli::multi_query 是否比几个单个查询更有效？

> ID：11120706
> 
> 赞同：8
> 
> 时间：2012-06-20T13:28:00.213
> 
> 标签：php, mysqli

有人在回答中提出了 MySQLi multi_query 函数，声称它比循环遍历 3 个单独的查询要好。我试图在谷歌上找到某种答案，但并没有真正满足我的好奇心，所以我希望你们能更好地了解使用它的原因，而不是保存几行代码。

所以这就是我想知道的：

1.  multi_query 在幕后做什么？
2.  multi_query 是否只是简单地访问服务器 x 次并聚合结果？
3.  是否存在单个查询可能比多个查询更有效的情况？

我知道每次访问数据库 3 次以获得一百万个项目并将其粉碎成一个巨大的对象对内存使用不利，但我知道它的存在必须有原因，而且我也确信有时应该避免。我希望能更好地理解它，以便在需要时将其放入我的技巧包中。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T14:47:07.390

*   `What is multi_query doing under the hood?`- 只需一次将所有查询发送到服务器，而不是一次发送一个，然后一次性检索所有结果。没有比这更复杂的了。

*   `Does multi_query simply hit the server x number of times and aggregates the results?`- 它“命中”服务器两次——一次发送查询，一次检索结果。

*   `Is there a case where single queries may be more efficient than multiple queries?`- 取决于您如何定义“高效”。`multi_query()`网络上很轻，但内存很重，`query()`在循环中运行，反之亦然。

    对于许多`SELECT`返回大型结果集的语句，内存消耗的损失可能远远超过网络方面的收益，并且大多数情况下，您最好一次发出查询并处理结果集 - 尽管这完全取决于您对数据所做的工作。但是，如果您需要运行许多`UPDATE`语句，则可能`multi_query()`会更好，因为返回值只是成功/失败，并且内存消耗会很轻。

    您必须权衡所有因素，例如您在做什么、您预计需要多长时间、（数据库）服务器和客户端之间的网络延迟、服务器和客户端上的可用资源（主要是内存）等等...并根据具体情况进行处理。

我发现了不久前进行[的一些性能测试的记录](http://www.perkiset.org/forum/php/mysql_multiquery_performance_testing_results-t1171.0.html)，其中的结论是使用`multi_query()`. *然而*，测试用例只是简单地运行 4 个查询，每个查询一个`SELECT`结果，“更高效”的定义就是“更快”。没有针对大量查询或更大结果集的测试，虽然速度很重要，但它不是全部和全部 - 如果我给它无限量的内存，我可以让任何东西运行得非常快，但是尝试同时做任何事情都会惨败。它也不是真实世界的测试，因为最终结果可以通过单个`JOIN`ed 查询来实现。不过，它确实会带来一些有趣的阅读。

就我个人而言，我觉得这有点学术，因为如果您*一次*运行大量语句，90% 的时间它们只会在传递的数据上有所不同，并且查询结构将保持不变——这是一个明显的候选对于准备好的陈述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-29T13:53:31.290

上面的答案是错误的。

> multi_query 在幕后做什么？

它只是一次将所有查询发送到服务器，*同时仅检索第一个查询的结果。*因此，实际上，multi_query 是*异步查询执行的一种包装器。*

> multi_query 是否只是简单地访问服务器 x 次并聚合结果？

multi_query 只访问服务器一次。您必须通过调用 next_result**手动**完成所有其他点击，以获得所有其他查询的结果。

> 是否存在单个查询可能比多个查询更有效的情况？

这个问题假设存在 multi_query 更快的情况。这是一个有问题的说法。对于通常的查询，网络延迟在整个执行时间中是可以忽略不计的一部分。如果您*真的*担心速度*如此*之快，请看一下 HandlerSocket - 它会非常快。但是，对于常规开发，单查询和多查询之间的这种差异将是您最不关心的。如果您关心现实生活，而不是想象中的事情。

# jquery - Jquery flash/使用css更改边框颜色

> ID：11120708
> 
> 赞同：4
> 
> 时间：2012-06-20T13:28:12.183
> 
> 标签：jquery

在不使用任何其他 jquery 插件的情况下，我希望不断地闪烁/更改 div 的边框颜色。所以它应该从白色开始，然后在 1 秒后变为橙色，然后重复。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T13:30:15.180

CSS：

```
#my-div { border: 1px solid white; }
#my-div.orange-border { border: 1px solid #f93; } 
```

html:

```
<div id="my-div"></div> 
```

JavaScript：

```
var flashInterval = setInterval(function() {
    $('#my-div').toggleClass('orange-border');
}, 1000); 
```

停止闪烁：

```
window.clearInterval(flashInterval); 
```

## 无闪光灯解决方案：

```
$('#my-div').css({ border: '1px solid white' });

setInterval(function() {
    var isWhite = $('#my-div').css('border-color') == 'rgb(255, 255, 255)';
    $('#my-div').css({ 'border-color' : isWhite ? '#f93' : '#fff' });
}, 1000);​ 
```

rgb 比较看起来有点骇人听闻。有一个来回切换的标志可能会更整洁，也许是一个数据属性：

```
$('#my-div').css({ border: '1px solid white' }).data('white', true);

setInterval(function() {
    var isWhite = $('#my-div').data('white');
    $('#my-div').css({ 'border-color' : isWhite ? '#f93' : '#fff' }).data('white', !isWhite);
}, 100);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:30:10.513

```
function makewhite() {
  setTimeout(function() {
        $('#problem').css('border-color','#ffffff');
        makeOrange();
    }, 1000);

}
function makeOrange() {
  setTimeout(function() {
        $('#problem').css('border-color','#F37543');
        makewhite();
    }, 1000);

}

makewhite(); 
```

到处找，找不到任何直接解决我的问题的方法，所以我构建了上面的方法。

我相信有一个更快的方法来写这个......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:45:20.007

根据您的兼容性要求，您可以仅使用 css 执行此操作：

```
@-webkit-keyframes DIV-BORDER {
    0%   { border-color: orange }
    50%  { border-color: white }
    100% { border-color: orange }
}

div {
    border: 1px solid;

    -webkit-transition: all 1s;
    -webkit-animation: DIV-BORDER 2s infinite;
}​ 
```

相应地添加供应商前缀。

编辑：在 webkit 浏览器中工作的示例[小提琴。](http://jsfiddle.net/AhZbe/)

# c - 如何使用 LoadLibrary() 和 GetProcAddress() 函数将 ntdll.dll 添加到项目库中？

> ID：11120710
> 
> 赞同：3
> 
> 时间：2012-06-20T13:28:12.513
> 
> 标签：c, windows, winapi, nt

我想用 获取线程的起始地址`NtQueryInformationThread`，但我需要添加它的库。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T15:07:48.720

我更喜欢将 ntdll.lib（您可以在 Windows DDK/WDK 中找到它）添加到项目中。在这种情况下，您不需要 GetProcAddress 的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T13:51:05.700

我使用`NtQueryInformationThread`不需要加载ntdll（我认为它是自动加载的）。我只需要准备一个包含此类内容的特殊头文件：http: [//pastebin.com/ieEqR0eL](http://pastebin.com/ieEqR0eL)并将其包含在我的项目中。之后，我能够做这样的事情：

```
NTSTATUS status;
THREAD_BASIC_INFORMATION basicInfo;
typedef NTSTATUS ( WINAPI *NQIT )( HANDLE, LONG, PVOID, ULONG, PULONG );

/* Open thread */
HANDLE thread = OpenThread(THREAD_ALL_ACCESS, false, threadId);
/* Get the address of NtQueryInformationThread function. */ 
NQIT NtQueryInformationThread = ( NQIT )GetProcAddress( GetModuleHandle(TEXT("ntdll.dll")), "NtQueryInformationThread" );
/* Get basic thread information */
status = NtQueryInformationThread(thread, 0, &basicInfo, sizeof(basicInfo), NULL);
CloseHandle(thread);

/* Get address of the Thread Environment Block, stack start address and last stack address */
tebAddress = (DWORD)basicInfo.TebBaseAddress;
DWORD pebAddress = *((DWORD*)(tebAddress+0x30));
/* For example to get stack base address */
stackBase = *((DWORD*)(tebAddress+4));
stackLimit = *((DWORD*)(tebAddress+8)); 
```

# java - Google Guice 中的计算常数

> ID：11120711
> 
> 赞同：1
> 
> 时间：2012-06-20T13:28:19.843
> 
> 标签：java, gwt, dependency-injection, guice, gwt-gin

我希望能够使用 guice/gin 实现以下目标：

1.  从服务器获取各种常量（用户设置、语言等）
2.  将这些常量绑定到 guice/gin 模块中的“Named(###)”
3.  将它们注入我的代码中的构造函数，这些构造函数仅在我初始化上述 2 个步骤后调用。

我能以某种方式做到这一点吗？如果是这样，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:49:15.887

基本上有两种方法可以从服务器获取数据到应用程序：创建 RPC 或在初始页面加载时设置一些全局 Javascript 变量。

假设这些是相对简单的常量，不需要在服务器上进行大量计算，那么最好的办法可能是将它们包含在页面加载中（即在引导 GWT 应用程序的 HTML 页面中）。例如，您的页面可能如下所示：

```
<html>
<head>
...
<!-- This block would be generated by your server-side templating system -->
<script>
  var globalFoo = 1234; 
</script>
...
</head>
<body>
... 
```

然后在您的客户端中，您可以拥有一个带有如下代码片段的 Gin 模块：

```
@Provides
@Foo int providesFoo() {
  return getNativeFoo();
}

// Use JSNI to get the global Javascript variable.
private static native int getNativeFoo() /*-{
  return globalFoo;
}-*/; 
```

这仍然需要您对所有绑定注释进行硬编码（即使您正在使用`@Named`注释）。在杜松子酒中，没有办法解决这个问题。所有绑定都需要在 GWT 编译时知道。

如果您要使用基于 RPC*的*方法，那么使用 Gin 不会提供太多帮助。相反，您可能希望在 RPC 之前构造对象，侦听 RPC 响应，然后根据响应进行更新。

希望这能回答你的问题。

# internet-explorer-8 - AutoIt - Internet Explorer 导航到另一个页面（弹出对话框）

> ID：11120712
> 
> 赞同：2
> 
> 时间：2012-06-20T13:28:20.597
> 
> 标签：internet-explorer-8, dialog, autoit

我在 Internet Explorer 中使用 AutoIT 从一个网页导航到另一个网页

我正在使用的代码是：

```
_IENavigate($oIE, "http://www.google.co.uk") 
```

然而，它来自的网页显示一个 JavaScript 弹出框。我想单击确定按钮以允许导航继续

我尝试使用以下代码：

```
ControlClick("Windows Internet Explorer", "", "[CLASS:Button; TEXT:OK; Instance:1;]") 
```

然而，这不起作用，因为当对话框出现时，AutoIT 进程似乎会自行暂停。

对话框的标题是“Windows Internet Explorer”，有两个按钮。我想点击的按钮有“确定”的文字

有没有其他人遇到过这个？如果是这样，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:21:09.110

_IENavigate 默认等待页面完全加载。该对话框可能会阻止页面完全加载。正确的解决方案是：

*   _IEN浏览页面而不等待页面完全加载
*   等到对话框出现并关闭它
*   等待页面完全加载

_IENavigate 的参数是这样的，需要将 $f_wait 设置为 0：

```
_IENavigate(ByRef $o_object, $s_url [, $f_wait = 1]) 
```

要等待对话框出现，您可能会简单地反复尝试单击它，直到 ControlClick 函数成功返回它为止。

# c# - 从 ODBC 阅读器读取 - 算术溢出异常

> ID：11120713
> 
> 赞同：0
> 
> 时间：2012-06-20T13:28:21.243
> 
> 标签：c#, odbc, arithmeticexception

我正在尝试通过 ODBC 连接检索数据并将其放入数据表中。进来的数据可能有一些单元格值为空。

这是我用来在数据表中导入数据的代码：

```
DataTable dt = new DataTable();
OdbcCommand cmd = _conn.CreateCommand();
cmd.CommandText = sql;
OdbcDataReader reader = cmd.ExecuteReader();
bool firstRun = true;

while (reader.Read())
{
    object[] row = new object[reader.FieldCount];

    for (int i = 0; i < reader.FieldCount; i++)
    {
        if (firstRun)
            dt.Columns.Add(reader.GetString(i), reader[i].GetType());

        if (!reader.IsDBNull(i))
            row[i] = reader.GetValue(i);
    }
    firstRun = false;

    dt.Rows.Add(row); 
```

在我正在阅读的第一行中，我正在数据表中创建列。然后我继续阅读每一行的单元格值。这是一个问题：如果我执行一个返回单列的选择查询，上面的操作就可以工作。但是，如果我在多个列上执行它，则会引发异常：`Arithmetic operation resulted in an overflow`就行：`if (firstRun) dt.Columns.Add(reader.GetString(i), reader[i].GetType());`

我到底在这里想念什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:48:03.527

`reader.GetString(i)`显然返回指定列的值，而不是列的名称。因此，我将其替换为 a`reader.GetName(i)`以获取列的名称。

# iphone - UITableView 重新加载问题

> ID：11120718
> 
> 赞同：0
> 
> 时间：2012-06-20T13:28:49.053
> 
> 标签：iphone, uitableview

我遇到了重新加载 UITableView 的非常复杂的问题！

我有一个`UITableView`连续（接近 10 秒），从服务器检索数据并在我`UITableView`的包含自定义单元格的数据中显示该数据。问题是，当用户（就是我）滚动浏览时，`UITableView`它会由于`indexOutOfBound`错误而崩溃，因为我从服务器获取数据时`NSMutableArray`会清除并再次填充数据。

我还尝试使用`BOOL`变量设置`YES`或`NO`在`scrolling delegates`. 在这种情况下，如果我滚动`UITableView`它将删除滚动方向的单元格，10 秒后它将显示所有带有数据的单元格。

但我想要的是，如果用户滚动`UITableView`任何创建的单元格都不应该隐藏！`scrollEnabled`不是解决方案。

请帮帮我！

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:33:31.980

这是一个线程不安全的代码问题。数据源在被积极使用时被修改。

一种安全的解决方案是在解析到某个数据库（sqlite/Coredata）后提供所有数据，然后从 db 重新加载表数据源并为表调用 reloadData。这种方式在您使用数据源数组时 - 它不会为空。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:34:09.053

如果 indexOutOfBound 意味着您必须检查您指定的 numberofrow 是否超过我们在单元格 forrowatindex 中接收的数组。所以检查一下。

# tomcat - JAX-WS：来自另一个 Web 服务的 Web 服务调用

> ID：11120719
> 
> 赞同：0
> 
> 时间：2012-06-20T13:28:52.777
> 
> 标签：tomcat, servlets, jax-ws

我目前正在开发一个 jsp Web 应用程序，它维护两个其他 Web 服务的两个客户端。我正在使用 apache-tomcat 6.0.26、Oracle (Sun) java 1.6 和 Netbeans 6.9 (IDE)。我的问题是，当从标准 Java SE 应用程序调用这两个 Web 服务时，一切正常。但是，如果我尝试从使用这两个 Web 服务的 Web 服务调用 Web 服务方法，我会得到：

```
NoSuchMethodError: javax.xml.ws.WebFault.messageName()Ljava/lang/String; 
```

我使用一个包装类来处理 Web 服务的 RPC：

```
public class RecommenderEngineContainer {

    public ArrayList<Long> getRecommendationResults(long user_id, int nummOfRecs) {
        if(user_id < 0 || nummOfRecs < 0 || nummOfRecs > 100)
            return null;
        ArrayList<Long> recommendedProducts = (ArrayList<Long>) getRecommendation(user_id, nummOfRecs);
        return recommendedProducts;
    }

    private static java.util.List<java.lang.Long> getRecommendation(long arg0, int arg1) {
        ws.recommendationengine.RECOMMENDATIONENGINEWSService service = new ws.recommendationengine.RECOMMENDATIONENGINEWSService();
        ws.recommendationengine.RECOMMENDATIONENGINEWS port = service.getRECOMMENDATIONENGINEWSPort();
        return port.getRecommendation(arg0, arg1);
    }

} 
```

JAX-WS webservice的代码如下：

```
public class RECOMMENDATION_ENGINE_WS {

    private MyConnector dbManager;
    private Connection dbCon = null;
    private String DIRECTORY_PATH;
    private String data_model_file;
    private String dbTableUserPrefs = "user_preferences";
    private String dbTableSimModel = "item_similarities";
    private static SingletonItemSimilarityModel myHModel;

    public RECOMMENDATION_ENGINE_WS() {
        Context context = null;
        try {
            context = (Context) new InitialContext().lookup("java:comp/env");
            this.DIRECTORY_PATH = (String) context.lookup("RECOM_ENGINE_DIR_PATH");
            this.data_model_file = (String) context.lookup("USER_HISTORY_FILE_NAME");
        }catch(NamingException e) {
            System.err.println(e.getMessage());
        }
    }

    public ArrayList<Long> getRecommendation(long userId, int NumOfRecommendations) {
        List<RecommendedItem> recommendations = this.myHModel.getRecommendations(userId, NumOfRecommendations);
        ArrayList<Long> result = new ArrayList<Long>();
        Iterator itr = recommendations.iterator();
        while(itr.hasNext()) {
            RecommendedItem recItem = (RecommendedItem) itr.next();
            result.add(new Long(recItem.getItemID()));
        }
        return result;
    }
} 
```

NoSuchMethod Exception stact 跟踪从调用 ArrayList RecommendedProducts = (ArrayList) getRecommendation(user_id, nummOfRecs);

为什么会这样？由于异常来自的代码是自动生成的，我该怎么做才能克服它？为什么这只发生在 Web 应用程序中而不是 Java SE 应用程序中？它与我当前的设置有什么关系吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:59:11.610

其实我知道出了什么问题。由于返回值 ArrayList 对象，显然 JAX-WS 框架无法工作。当我将其更改为 String 对象时，没有出现任何问题。另外，我不得不提到我从 Oracle Java 1.6 升级到 1.7，尽管我不认为这是主要原因。

# web-services - 使用 Web 服务获取 SharePoint 中的所有文件夹和子文件夹

> ID：11120723
> 
> 赞同：3
> 
> 时间：2012-06-20T13:29:06.270
> 
> 标签：web-services, sharepoint, treeview, directory

我正在开发一个 Web 应用程序，该应用程序需要获取 SharePoint 上的文件夹和子文件夹，并将其放在表示层次结构的 TreeView 上。我的应用程序与 SharePoint 不在同一台服务器上运行，因此我认为最好的方法是通过 Web 服务。

所以我在我的项目中添加了对 SiteData.asmx 的 Web 引用，并找到了以下代码：

```
 Private Sub GetSiteData()
    Dim RootFolder As String = "http://mySharepointServer/site/doc_site"
    Dim DirWSSP As String = "http://mySharePointServer/_vti_bin/SiteData.asmx"

    'Definitions of TreeView
    Dim tree As TreeView
    Dim raiz As TreeNode
    Dim no As TreeNode

    tree = Page.FindControl("trvFolder")
    raiz = New TreeNode(RootFolder)
    tree.Nodes.Clear()
    tree.Nodes.Add(raiz)

    ' Definitions of web service
    Dim service As New SP_SiteData.SiteData

    service.Credentials = New System.Net.NetworkCredential("userID", "password", "domain")

    Dim enArray() As SP_SiteData._sFPUrl

    service.EnumerateFolder(RootFolder, enArray)

    Dim en As SP_SiteData._sFPUrl
    For Each en In enArray
        If en.IsFolder Then
            no = New TreeNode(en.Url)
            raiz.ChildNodes.Add(no)
        End If
    Next

End Sub 
```

[我从msdn](http://msdn.microsoft.com/en-us/library/ms774758.aspx)上的一个论坛复制了这段代码，但没有用，service.EnumerateFolder 总是返回一个空数组，也就是说，enArray 总是什么都没有，我得到一个错误：对象引用未设置为对象的实例。

这段代码有效吗？还有另一种方法可以做到这一点吗？我对 Web 服务和 Web 应用程序非常陌生。OBS：我正在使用 Visual Studio 2010 和 SharePoint 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:26:41.467

I found the solution using the web service Lists.asmx.

The problem is I am very novice in web develpment and I don't know nothing about Sharepoint, so i don't knew how to use the web services.

The problem was I was providing the wrong url. The url must be like:

```
http://mysharepointsite/site/subsite_or_list/_vti_bin/Lists.asmx 
```

and I was using

```
http://mysharepointsite/_vti_bin/Lists.asmx 
```

The difference is I call the web Service `lists.asmx` on subsite.

Another thing I didn't know, is that what I was calling the folders are actually lists in sharepoint, so im method `getlistitems()`, must put the list Name as parameter.

Anyway for futher help, if anybody have the same problem as i had follow this link :

[http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/99f3e9d0-6ecf-4b1d-8b68-d108f36aaacc](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/99f3e9d0-6ecf-4b1d-8b68-d108f36aaacc)

And the code are that here from msd: [http://msdn.microsoft.com/en-us/library/lists.lists.getlistitems(v=office.12)](http://msdn.microsoft.com/en-us/library/lists.lists.getlistitems(v=office.12))

Sorry for the bad english....

Thanks everybody

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:01:20.070

ListItems Folders 和 Documents，从 web 服务您可以分辨出与“ows_ContentType”属性的不同。在对象模型中，它们具有 IsFolder 属性。

```
IEnumerable<XElement> result = from child in root.Descendants(xns + "row")
    where child.Attribute("ows_ContentType").Value == "Folder"
    select child; 
```

此 LINQ 查询可用于 Web 方法结果以仅返回文件夹类型。即使您不了解 LINQ 调用，也很容易看到如何将其更改为适用于“文档”。

*相关注意“GetFolderCollection”的网络服务正在谈论Sharepoint文件夹，它表示网站目录文件夹。

# c# - 如何在 Web 浏览器中获取滚动条的当前垂直位置？

> ID：11120724
> 
> 赞同：2
> 
> 时间：2012-06-20T13:29:11.727
> 
> 标签：c#, .net

我可以设置滚动位置：

```
webCompareSQL.Document.Window.ScrollTo(0,0); 
```

但我怎样才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:31:54.417

以下链接与您的问题类似。

[如何在 .NET 中检索 webbrowser 控件的滚动条位置](https://stackoverflow.com/questions/1277691/how-to-retrieve-the-scrollbar-position-of-the-webbrowser-control-in-net)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:49:39.287

答案在 Gaz 提到的那一页上。

[这是关于它的 MSDN 文档。](http://msdn.microsoft.com/en-us/library/ie/ms534618%28v=vs.85%29.aspx)

为什么不...

```
 int top = webCompareSQL.Document.GetElementsByTagName("HTML")[0].ScrollTop; 
```

工作？

# javascript - 通过 Javascript 的 MS Word 对象模型：邮件合并

> ID：11120725
> 
> 赞同：0
> 
> 时间：2012-06-20T13:29:12.540
> 
> 标签：javascript, php, sql, ms-word, mailmerge

我正在为当地的慈善机构构建一个网站应用程序，进展顺利，我似乎克服了大多数挑战，但这是我遇到的一个巨大问题，我什至不知道这是否可能。

我希望用户能够单击一个按钮并通过邮件在服务器端合并文本文件和预建模板 (dotx) 文件来输出 Microsoft Word 文件。该文本文件将仅包含一条从 mySQL 数据库中获取并通过 PHP 生成的记录。

我知道使用 XSLT 来修改文档 zip 中的文档文件，但我无法访问 charities 服务器上的 php.ini，无论如何考虑到使用创建宏有多简单，这似乎有点太多了邮件合并。

所以我现在正在考虑使用 Word 对象模型，它必须通过 Javascript，但大多数用户使用 Firefox 或 Chrome，例如。`var oApplication = new ActiveXObject("Application.Word");`使用这些浏览器，还是我可以简单地使用`= new Object("Application.Word");`？

我也可以确认 Javascript 中的对象将具有与 VBA 中相同的函数名称和参数，我从未尝试过通过 Javascript 使用 Word，但如果它与 VBA 相同，那么我应该没问题。

我正在使用我的本地主机进行开发，文件结构是：

*   模板\构象.docx
*   模板\data.txt

其中 data.txt 是 PHP 生成的从数据库中获取的数据的 CSV。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:53:51.267

只有 IE 支持ActiveX/COM 自动化（需要访问`word.application`），没有其他浏览器以任何方式支持它。

如果支持它*，*您仍然无法从客户端轻松地与服务器上的 Word 文件进行交互。

您可以在服务器上生成文件（[使用 PHP 生成 word 文档](https://stackoverflow.com/questions/4153591/generating-word-documents-with-php)），但要访问实际内置于 Word 本身的功能（如邮件合并），您需要以编程方式与安装在服务器上的 Word 的真实实例进行交互（使用 PHP/COM/ `word.application`) 来控制它，为避免这种情况，您将手动执行邮件合并所做的任何事情。

另一种选择是使用包含 VBA 代码的 Word 文档，该代码与 PHP Web 服务交互以生成输出文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:05:45.510

您的应用程序可以选择 Web 服务吗？如果是这样，请查看 Docmosis - 您可以上传 doc 模板，然后发送带有数据的请求以进行邮件合并，并使用包括 MS word 在内的各种选项输出结果。

# clojure - Clojure 代理 Java 模板

> ID：11120727
> 
> 赞同：3
> 
> 时间：2012-06-20T13:29:21.247
> 
> 标签：clojure

## 语境

我有这段 Java 代码

```
 btn.setOnAction(new EventHandler<ActionEvent>() {

        public void handle(ActionEvent event) {
            System.out.println("Hello World");
        }
    }); 
```

我想把它转换成 Clojure。

## 我知道的

```
(. btn setOnAction (proxy .... ????? .... )) 
```

## 问题：

如何处理 Clojure 中的 EventHandler 部分？我相信这是一个 Java 模板。如何在 Clojure 中创建模板对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T13:44:15.060

在 Java 中，它们被称为[泛型](http://docs.oracle.com/javase/tutorial/java/generics/index.html)，而不是模板。[此外，它们是使用类型擦除实现的，即编译后的字节码中](http://en.wikipedia.org/wiki/Generics_in_Java#Problems_with_type_erasure)没有通用信息，因此`EventHandler<Foobar>`对象被编译为非通用`EventHandler`实例。

也就是说，Clojure 甚至没有尝试支持它们。您的 Java 代码转换为

```
(.setOnAction btn 
  (proxy [EventHandler] []
    (handle [event]
      (println "Hello World")))) 
```

有关语法的更多详细信息，请参阅[`proxy`](http://clojuredocs.org/clojure_core/1.3.0/clojure.core/proxy)有关[Java 互操作](http://clojure.org/java_interop)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:18:13.180

另一种方法是物化。一个例子：

```
(import [javax.swing JFrame JButton])
(import [java.awt.event  ActionListener])

(def f (JFrame. "Test"))
(def b (JButton. "OK"))

(.add (.getContentPane f) b)
(.addActionListener b
   (reify ActionListener
      (actionPerformed [this event]
         (println "Event is " event))
 ))
(.show f) 
```

请参阅此线程以了解代理与 reify
[为什么我应该在 clojure 中使用 Reify 而不是代理？](https://stackoverflow.com/questions/5821892/why-should-i-use-reify-instead-of-proxy-in-clojure)

# drupal - 修改 drupal 中的节点在查看时的外观

> ID：11120739
> 
> 赞同：0
> 
> 时间：2012-06-20T13:29:50.510
> 
> 标签：drupal, module

我有一些文本存储在名为“协议”的自定义内容类型的正文字段中。当您查看节点时，存储在 body 字段中的内容并不完全是我希望看到的内容。要么是完整的，要么是预告片。例如我可能会存储这样的东西：

“[用法]可重复使用 DNA 模板微阵列通过无细胞合成进行蛋白质排列。[/用法] [安全注意事项]测试安全注意事项 [/安全注意事项]”

但是当您查看它时我想要显示的是：

“通过无细胞合成可重复使用 DNA 模板微阵列进行蛋白质排列。测试安全性考虑”

我教这是你可以使用 hook_view 的，所以我在我的模块中尝试了这个功能：

```
function molmethtag_node_view($node, $view_mode, $langcode) {
  if ($node->type == 'protocol2' && $view_mode=='full') {

    $body = $node->body;
    $prot_array = _molmethtag_extract_data($body['und'][0]['value']);
    $protocol = '';
    foreach($prot_array as $tag => $prot_row) {
      $protocol .= "<div id='molmethtag_".$tag."'>".$prot_row."</div>";
    }                                                                                                                  
    $body['und'][0]['value'] = $protocol;

  }
} 
```

但这并没有如我所愿。我希望保存在协议中的文本在查看时会显示为正文，但它显示的是原始文本。

有人知道我做错了什么吗？hook_view 不用于此吗？我应该改用/做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:29:21.907

一开始有点令人困惑，但是您需要更改以进行显示的值在`$node->content`数组上：

```
$node->content['body'] = array(
  '#markup' => $protocol
); 
```

`hook_node_view()`是一个很好的地方，但只是为了完整起见，如果你愿意，你也可以做类似的事情`hook_preprocess_node()`。

# java - Java：Maven 清理后构建中缺少 log4j.properties

> ID：11120741
> 
> 赞同：0
> 
> 时间：2012-06-20T13:29:54.883
> 
> 标签：java, maven, log4j, slf4j, jibx

我做了一个 maven 项目，并使用 slf4j 和 log4j。我也在使用 jibx 绑定。

src/main/java 是我的类文件夹 src/main/config 文件夹，用于 jibx 绑定和生成的类

两者都被声明为源文件夹

log4j.properties 在类路径中（如果它存在于 java 或 config 中则无关）

这是情况：log4j 有效。我可以从 Eclipse 或通过创建的 jar 文件（maven）启动程序并记录工作。但是当我开始“maven clean”并再次构建项目并开始时，我得到“log4j：WARN No appenders could be found for logger”发生在从eclipse或通过jar文件开始。log4j.propeties 不会被复制到目标/类，也不会在 jar 文件中。我将 Eclipse 中的 log4j.properties 从示例 java 文件夹移动到配置文件夹并返回。再次用maven编译。属性位于类文件夹和 jar 中。maven clean 之后我总是必须这样做！我不知道为什么清理后属性会丢失。它仍然在类路径的文件夹中。我什么都不改变。任何人都知道如何解决它？这真的很令人不安。感谢 jibx 不时清洁是必要的。我用谷歌搜索，只有当属性不在类路径中时才发现问题。但就我而言，它是。

如果我错过了任何需要的信息，请：）

编辑：啊，是的。不在资源文件夹中的属性是问题所在。固定的。

但是如果属性不在资源文件夹中，仍然会出现奇怪的行为。即使在 Eclipse log4j 中，在 maven clean 之后也会停止工作。并在移动属性并返回到开始文件夹后再次工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:39:22.600

像这样的属性文件必须位于 src/main/resources 中才能进行生产。如果您希望对单元测试进行不同的配置，而不是将其放入 src/test/resources.xml 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:46:12.860

`<build>`您可以通过在 pom.xml 中配置标签来指定 maven 从 src/test/main 读取资源

我们甚至可以在 src/main/java/test 中放置测试用例，并通过配置`<testSourceDirectory>`标签使其在构建期间运行

`<testResources>`我们可以通过配置标签从项目中的任何位置读取属性

```
<build>     
        <testSourceDirectory>${basedir}/src/test/java/logical</testSourceDirectory>
        <testResources>
            <testResource>
                <directory>${basedir}/src/main/resources/</directory>
                <includes>
                    <include>*</include>
                </includes>             
            </testResource>
        </testResources>
</build> 
```

# backbone.js - 这两种数据结构中的哪一种使backbone.js 更高效？

> ID：11120748
> 
> 赞同：0
> 
> 时间：2012-06-20T13:30:33.230
> 
> 标签：backbone.js, pymongo

我想使用两个模型：

```
User:
 - firstname : stringField
 - lastname : stringField

Event:
 - description : stringField
 - users : list of referenceField(User) 
```

当查询一个事件时，我的 REST API 可以输出两种数据结构：

**API JSON 输出：**

```
{
  description: "MyDescription",
  users: [
       { $id: user_1_id },
       { $id: user_2_id }
  ]
} 
```

或者

```
{
  description: "MyDescription",
  users: [
       { $id: user_1_id, firstname : "user_1_firstname", lastname: "user_2_lastname" },
       { $id: user_2_id, firstname : "user_2_firstname", lastname: "user_2_lastname" }
  ]
} 
```

这两种结构中的哪一种更适合将模型嵌套到backbone.js 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:44:36.920

这两种方法都可以使用，第一种方法是使用列表中的 id 从用户集合中获取完整的模型，第二种方法基本上是在事件的用户列表中包含一个完整的副本。

如果您需要从多个地方引用用户模型，第一个 JSON 输出可能是更好的选择。由于您指出事件模型中的用户列表是一个参考列表，我想说这可能是您想要采用的方法。

另一方面，如果您只有一个事件模型，或者如果您的所有事件模型都有单独的用户，那么您也可以使用第二个 JSON 输出并将所有内容存储在事件模型中（特别是因为您的用户模型只有几个属性，但也许这只是为了说明）。

# c# - 从本机 C++ 或 C 调用 C# 函数

> ID：11120750
> 
> 赞同：2
> 
> 时间：2012-06-20T13:30:40.950
> 
> 标签：c#, c++-cli, pinvoke

我尝试按照以下步骤操作：[Calling C# from C++, Reverse P/Invoke, Mixed Mode DLLs and C++/CLI](https://stackoverflow.com/questions/1068762/calling-c-sharp-from-c-reverse-p-invoke-mixed-mode-dlls-and-c-cli?rq=1) 1\. 我将 C# Dll 命名为 TestLib：

```
namespace TestLib
{
    public class TestClass
    {
        public float Add(float a, float b)
        {
            return a + b;
        }
    }
} 
```

2\. 然后我创建名为 WrapperLib 的 C++/CLI Dll 并添加对 C# TestLib 的引用。

```
// WrapperLib.h

#pragma once

using namespace System;
using namespace TestLib;

namespace WrapperLib {

    public class WrapperClass
    {
    float Add(float a, float b)
        {
        TestClass^ pInstance = gcnew TestClass();
        //pInstance
        // TODO: Add your methods for this class here.
        return pInstance->Add(a, b);
        }
    };
} 
```

C+ 3\. 对于检查 tis 示例，我创建了 C++/CLI 控制台应用程序并尝试调用此代码：

```
// ConsoleTest.cpp : main project file.

#include "stdafx.h"

using namespace System;
using namespace WrapperLib;

int main(array<System::String ^> ^args)
{
    Console::WriteLine(L"Hello World");
    WrapperClass cl1 = new WrapperClass();

    return 0;
} 
```

但我得到一些错误：

```
error C2065: 'WrapperClass' : undeclared identifier C:\Projects\TestSolution\ConsoleTest\ConsoleTest.cpp    11  1   ConsoleTest
error C2146: syntax error : missing ';' before identifier 'cl1' C:\Projects\TestSolution\ConsoleTest\ConsoleTest.cpp    11  1   ConsoleTest
error C2065: 'cl1' : undeclared identifier  C:\Projects\TestSolution\ConsoleTest\ConsoleTest.cpp    11  1   ConsoleTest
error C2061: syntax error : identifier 'WrapperClass'   C:\Projects\TestSolution\ConsoleTest\ConsoleTest.cpp    11  1   ConsoleTest 
```

好吧，我知道我错过了某个地方，但是在哪里呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:12:03.023

根据@Ben Voigt 的建议，我相信您的代码应该看起来像这样：

```
// ConsoleTest.cpp : main project file.

#include "stdafx.h"
#include "WrapperLib.h"

using namespace System;
using namespace WrapperLib;

int main(array<System::String ^> ^args)
{
    float result;
    Console::WriteLine(L"Hello World");
    WrapperClass cl1;

    result = cl1.Add(1, 1);

    return 0;
} 
```

如果您不包含包装库的头文件，C++ 编译器将永远找不到它的函数，并且您将不断收到之前显示的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:39:48.577

这不是好的 C++，看起来像 Java 或 C#。

在 C++/CLI 中创建新对象的正确语法是

```
WrapperClass cl1; 
```

或者

```
WrapperClass^ cl1 = gcnew WrapperClass(); 
```

C++ 具有堆栈语义，您必须告诉编译器您是想要一个在函数末尾自动释放的本地对象（第一个选项），还是一个可以活得更久的句柄（第二个选项，使用`^`and `gcnew`）。

# c# - 使用 C# 和 Linq 查询大量数据的最有效方法

> ID：11120756
> 
> 赞同：1
> 
> 时间：2012-06-20T13:31:14.723
> 
> 标签：c#, asp.net, sql, sql-server-2005, linq-to-sql

我有一个 Web 应用程序（c# 中的 ASP.NET 4.0），我正在构建一个伪 Adhoc 组件。该组件允许用户从预先确定的类别列表中进行选择（汽车品牌、保养型号、汽车配件等）。用户可以根据需要选择任意数量的类别，然后按下“过滤器”按钮，该按钮将获取所选类别并将它们发送到带有每个类别选项的新表单。每个类别可以有多个选项。

示例：用户选择汽车颜色、汽车配件。

过滤器页面显示了一个带有预先填充了汽车颜色颜色的下拉列表的表单。表单显示一个用于卫星广播的复选框，另一个用于皮革内饰的复选框，等等。所有这些值都是预定义的。一旦用户指定了他们可以过滤的所有项目，我就使用 Linq 来查询数据库。就像现在一样，Linq 查询针对的是当前拥有 14 个左外连接的视图，如果根本没有过滤，则返回超过 30,000 行。

我正在使用动态 linq 来查询数据库链接，所以：

```
var data = CMS.Model.Adhoc.GetData().AsQueryable(); //must be AsQueryablefor Dynamic Linq to function

    public static List<ViewADHOCContractInfo> GetData()
    {
        PortalDataContext db = new PortalDataContext(AuthenticatedUser.ConnectionString);

        return db.ViewADHOCInfos.Select(x=>x).Distinct().ToList();
    } 
```

请注意，GetData() 正在返回结果集的所有行和所有列，我认为这不是最有效的方法，更多的是在底部。

从那里我对发送的过滤器执行 FOREACH 语句，并在每次迭代中最小化结果集，如下所示（缩写）：

```
foreach (Filters filter in filters.OrderBy(x=>x.strOrderNumber))
        {
            SanatizeFilter(filter.strFilter,filter);
            if (filter.strValue != string.Empty && filter.strValue != null)
            {
                if (filter.strOperator == "Contains")
                {
                    data = data.Where(filter.strFilter + "!= NULL and " + filter.strFilter + ".Contains(@0)", filter.strValue).
                        Select(x => x).ToList().AsQueryable();
                }
                else
                {
                    data = data.Where(filter.strFilter + FormatOperator(filter.strOperator) + "@0", filter.strValue).
                        Select(x => x).ToList().AsQueryable();

                }
            }
        } 
```

所有这些都可以正常工作，但是速度很慢。我的第一个问题是，我怎样才能使用 Linq 来减少它。我已经尝试了一些方法来仅将来自过滤器的数据拉入变量“数据”作为预填充的一种方式，但是我无法使用 .AsQueryable()。我希望能够从过滤器对象中获取列标识符并仅从数据库中选择那些标识符，这样我就不必处理所有的开销，但我找不到允许我的解决方案这样做，有什么想法吗？

第二个问题是现在这一切都在数据库中的一个视图中，将它移动到函数或存储过程会更快/更有效吗？Linq 可以与存储过程交互吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:41:56.837

好吧，您的问题可以分为两部分：

1) 我的 linq-2-sql 方法好吗

2）我的数据库方法好吗

第一部分可以通过分析发送到数据库的 SQL 来解决。这将向您显示实际执行的查询/查询。正如您在评论中看到的那样，通过在您的方法早期使用 ToList() ，这可能远非最佳。数据库在过滤和处理大量数据方面非常出色。所以让他们做他们最擅长的事情吧！

现在你问题的第二部分是关于观点的。使用存储过程等会更快吗？要回答您的部分问题：是的，Linq-2-sql 也可以使用存储过程。但是，如果您使用存储到过程来检索太多数据，它仍然会很慢。这是故事的 DBA 部分。也许基表上的一些索引就足够了。另一种方法是向视图添加聚集索引，然后将其具体化。

我建议您首先处理 linq-2-sql 部分：确保实际执行的 sql 是**基于集合的**，并且所有过滤都在数据库中完成。如果仍然太慢，请转到数据库层，看看那里可以改进什么。

# php - 从 PHP 调用 Javascript 函数

> ID：11120758
> 
> 赞同：0
> 
> 时间：2012-06-20T13:31:20.240
> 
> 标签：php, javascript, serverside-javascript

一个常见的问题是，对于验证，您需要在服务器和客户端上运行相同的代码。在 JavaScript 繁重的页面上，您希望在双方之间共享许多其他功能。由于您无法在客户端上运行 PHP，因此如果可以从 PHP 运行 Javascript 函数，我会感到很困惑。我正在考虑像[Rhino这样](http://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29)[的服务器端 JS](http://en.wikipedia.org/wiki/Server-side_JavaScript) ，但我不知道如何将它包含到 PHP 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:33:10.930

PHP 有一个 V8 扩展： http: [//php.net/manual/en/class.v8js.php](http://php.net/manual/en/class.v8js.php)从未尝试过那么多，但可能有用

编辑：这里是 pecl 包链接：[http ://pecl.php.net/package/v8js](http://pecl.php.net/package/v8js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T13:35:29.287

您可以使用服务器端 javascript 服务，即[node.js](http://nodejs.org/)并使用 PHP 调用它，但这不是解决问题的直接或微不足道的解决方案。如果它是一个大型应用程序，在验证逻辑中存在大量交叉，这可能才值得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T14:12:37.910

在 php 中试试这个：

```
echo "<script type='text/javascript'>
         myfunction();
      </script>"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T23:49:36.570

我的感觉和 AlexeyKa 一样。

我认为您需要走相反的路线，而不是在客户端和服务器上运行 JavaScript。在服务器端创建您的验证代码，并在表单提交之前使用 Ajax 调用验证。这样您就可以使用相同的代码进行验证（无重复），并且您不必担心在服务器上运行 JavaScript 引擎。

此外，如果您向客户端提供您将在服务器上运行的验证代码，那么您只是要求某人在您的验证代码中找到一个漏洞。在服务器上保留验证可以使您的验证代码远离用户。

### 更新：

我没有意识到您的问题不仅仅是验证。这不是 PHP 解决方案，但 Google 的[Closure Tools](https://developers.google.com/closure/templates/)是一种允许您的客户端与您的服务器相同的技术。您编写 UI 模板并定义它们应该如何工作（布局、验证、持久性），然后框架创建 HTML、JavaScript 和服务器代码。这一切都是为了确保您编写一次代码，并且客户端和服务器之间的任何相似代码都由框架处理。

# oracle - 是否有适用于仅由空格组成的 VARCHAR 字段的 Oracle Trim 等效项？

> ID：11120764
> 
> 赞同：1
> 
> 时间：2012-06-20T13:31:32.577
> 
> 标签：oracle, trim

```
SELECT 1 FROM dual where trim('X ') = 'X' 
```

给出 1。

```
SELECT 1 FROM dual where trim(' ') = '' 
```

不给出任何行。

有没有一种简单的方法来选择所有`field`缺少正则表达式的空格的行？

有没有办法将TRIM“欺骗”成TRIMming`' '`和给予`''`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T13:36:04.940

在 Oracle 中，[空字符串是 NULL](https://stackoverflow.com/questions/203493/why-does-oracle-9i-treat-an-empty-string-as-null/)。所以传统的方法是这样的

```
SELECT 1 
  FROM dual 
 WHERE trim(' ') IS NULL 
```

当然，这也将返回列所在的结果`NULL`。如果您想要列为非 NULL 且仅由空格组成的情况

```
SQL> ed
Wrote file afiedt.buf

  1  with t as (
  2    select 1 id, ' ' str from dual union all
  3    select 2, null from dual union all
  4    select 3, 'a' from dual
  5  )
  6  select *
  7    from t
  8   where trim(str) is null
  9*    and str is not null
SQL> /

        ID S
---------- -
         1 
```

只是为了完善答案，如果您也想使用简单`regexp_like`的

```
SQL> ed
Wrote file afiedt.buf

  1  with t as (
  2    select 1 id, ' ' str from dual union all
  3    select 2, null from dual union all
  4    select 3, 'a ' from dual
  5  )
  6  select *
  7    from t
  8*  where regexp_like( str, '^[[:space:]]+$' )
SQL> /

        ID ST
---------- --
         1 
```

# android - Android、意图和多重动作

> ID：11120768
> 
> 赞同：0
> 
> 时间：2012-06-20T13:31:38.547
> 
> 标签：android

我有一个带有 3 张图片的小部件。每张图片描述不同的事物。

我有一堂课，里面只有一个网络查看器。我希望如果用户触摸第一张图片，webviewer 将启动到地址 1，如果是第二张图片，则为 2，依此类推。

```
 Intent i = new Intent(context, WebViewTestActivity.class);
    i.putExtra("url", "http://www.google.com");
    PendingIntent pi = PendingIntent.getActivity(context,0, i,0);
    views.setOnClickPendingIntent(R.id.img1, pi); 
```

问题出在使用 webviewer 的课程中​​，我从意图的额外值中获取 url。但是我怎样才能添加三个具有相同“键”（url）的 url，以及如何知道用户在 webviewer 类上点击了第一张图片、第​​二张图片等等？

谢谢。

编辑 ：

我在这里找到了解决方案：

[在 Android Widget 上处理多个按钮单击](https://stackoverflow.com/questions/2471875/processing-more-than-one-button-click-at-android-widget)

使用 i.setAction("url1...."); （我是你的意图）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:03:33.297

我在这里找到了解决方案：

[在 Android Widget 上处理多个按钮单击](https://stackoverflow.com/questions/2471875/processing-more-than-one-button-click-at-android-widget)

使用 i.setAction("url1...."); （我是你的意图）

谢谢

# php - UTF-8 与 mysql 和 php 在 freebsd 瑞典字符 (åäö)

> ID：11120774
> 
> 赞同：-5
> 
> 时间：2012-06-20T13:31:53.627
> 
> 标签：php, mysql, encoding, utf-8, freebsd

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

嗨，我最近在我的服务器上从 linux 切换到了 freebsb，现在我的数据库正在运行。

当我尝试回显包含 å、ä 或 ö（瑞典字母）的字符串时，它会变成一个问号。即：Söndag 成为 Söndag。回声“ä”；作品。$文件--mime test.php test.php：文本/纯文本；字符集=utf-8

**测试.php**

```
<?php
$a="å";
mysql_connect("localhost", "root", ":-)");
mysql_select_db("lidev");

$result=mysql_query("select * from DLG where dag='Onsdag'");
$row=mysql_fetch_array($result);

echo $row['dagens'];
echo "<br>";
echo mb_detect_encoding($row['dagens']);
?> 
```

mb_detect_encoding() 输出“UTF-8” 我的 mysql 表在**utf8_general_ci**中。

我完全被困住了！怎么了？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:38:36.513

似乎您并没有在*任何地方*使用 utf-8，因此您的数据在某些时候会变得混乱。根据您的具体操作，您必须更改/添加以下一项或多项（很可能是您忘记的`SET CHARSET`/ ）：`mysql_set_charset`

*   告诉 MySQL 使用 utf-8。为此，请将其添加到您的 my.cnf：

    > ```
    > collation_server = utf8_unicode_ci
    > character_set_server = utf8 
    > ```

*   在与 mysql 交互之前，发送这两个查询：

    > ```
    > SET NAMES 'utf8';
    > CHARSET 'utf8'; 
    > ```

    或者，或者，让 php 在打开连接后执行此操作：

    > ```
    > mysql_set_charset('utf8', $conn); // when using the mysql_-functions
    > mysqli::set_charset('utf8') // when using mysqli 
    > ```

*   将 UTF-8 设置为数据库的默认字符集

    > ```
    > CREATE DATABASE `my_db` DEFAULT CHARACTER SET 'utf8'; 
    > ```

*   对表格执行相同的操作：

    > ```
    > CREATE TABLE `my_table` (
    >   -- ...
    > ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
    > ```

*   假设客户端是浏览器，将您的内容作为 utf-8 和正确的标头提供：

    > ```
    > header('Content-type: text/html; charset=utf-8'); 
    > ```

    为了确保浏览器能够理解，添加一个元标记：

    > ```
    > <meta http-equiv="Content-type" content="text/html; charset=utf-8" /> 
    > ```

*   最后但同样重要的是，告诉浏览器使用 utf-8 提交表单

    > ```
    > <form accept-charset="utf-8" ...> 
    > ```

# java - iText 图像调整大小

> ID：11120775
> 
> 赞同：23
> 
> 时间：2012-06-20T13:31:53.867
> 
> 标签：java, image, pdf, itext, watermark

我有一个水印，我想将其放入我的 pdf 中。水印是 .bmp 图像，大小为 2290 x 3026。我在尝试调整此图片大小以适应页面时遇到了很多麻烦，有人有什么建议吗？

```
Document document = new Document(); 
PdfWriter.getInstance(document, new FileOutputStream("result.pdf")); 
document.open(); 
document.add(new Paragraph("hello")); 
document.close(); 
PdfReader reader = new PdfReader("result.pdf"); 
int number_of_pages = reader.getNumberOfPages(); 
PdfStamper pdfStamper = new PdfStamper(reader, new FileOutputStream("result_watermark.pdf")); 
// Get the PdfContentByte type by pdfStamper. 
Image watermark_image = Image.getInstance("abstract(0307).bmp"); 
int i = 0; 
watermark_image.setAbsolutePosition(0, 0);
watermark_image.scaleToFit(826, 1100);
System.out.println(watermark_image.getScaledWidth());
System.out.println(watermark_image.getScaledHeight()); 
PdfContentByte add_watermark; 
while (i < number_of_pages) { 
    i++; 
    add_watermark = pdfStamper.getUnderContent(i); 
    add_watermark.addImage(watermark_image); 
} 
pdfStamper.close(); 
```

这是`getScaled()`方法的输出。

```
826.0 - Width
1091.4742 - Height 
```

我会和你们分享pdf的图片，但不幸的是我不能。

我应该尝试改用 .jpg 吗？我真的不知道 iText 处理不同图像扩展的能力如何。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-20T14:19:44.960

我这样做：

```
//if you would have a chapter indentation
int indentation = 0;
//whatever
Image image = coolPic;

float scaler = ((document.getPageSize().getWidth() - document.leftMargin()
               - document.rightMargin() - indentation) / image.getWidth()) * 100;

image.scalePercent(scaler); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-11T11:40:30.233

采用

```
watermark_image.scaleAbsolute(826, 1100); 
```

代替

```
watermark_image.scaleToFit(826, 1100); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-10-14T12:01:43.790

以防万一图像高度超过文档高度：

```
float documentWidth = document.getPageSize().width() - document.leftMargin() - document.rightMargin();
float documentHeight = document.getPageSize().height() - document.topMargin() - document.bottomMargin();
image.scaleToFit(documentWidth, documentHeight); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-04-05T05:24:57.103

您可以使用

```
imageInstance.scaleAbsolute(requiredWidth, requiredHeight); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-25T19:15:10.503

您可以使用另一种方法：“手动”（即通过图像处理软件）而不是通过 iText 以编程方式调整图像大小。

由于最终尺寸似乎是硬编码的，因此您可以使用已调整大小的图像，并在每次为 PDF 文档添加水印时节省一些处理时间。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-01-23T11:12:04.100

```
Document document = new Document();
PdfWriter.getInstance(document, new 
FileOutputStream("F:\\Directory1\\sample1.pdf"));
document.open();

Image img = 
Image.getInstance("F:\\Server\\Xyz\\WebContent\\ImageRestoring\\Rohit.jpg");
img.scaleToFit(200, 200);
document.add(new Paragraph("Sample 1: This is simple image demo."));
document.add(img);
document.close();
System.out.println("Done"); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-01-09T08:33:00.750

有时，仅当图像太大时才按比例*缩小，如果图像合适，则不要按比例放大。*换句话说，只有当宽度不适合可用宽度或高度不适合可用高度时，才会发生缩放。这可以按如下方式完成：

```
float scaleRatio = calculateScaleRatio(doc, image);
if (scaleRatio < 1F) {
    image.scalePercent(scaleRatio * 100F);
} 
```

用这个`calculateScaleRatio`方法：

```
/**
 * Calculate scale ratio required to fit supplied image in the supplied PDF document.
 * @param doc    PDF to fit image in.
 * @param image  Image to be converted into a PDF.
 * @return       Scale ratio (0.0 - 1.0), or 1.0 if no scaling is required.
 */
private float calculateScaleRatio(Document doc, Image image) {
    float scaleRatio;
    float imageWidth = image.getWidth();
    float imageHeight = image.getHeight();
    if (imageWidth > 0 && imageHeight > 0) {
        // Firstly get the scale ratio required to fit the image width
        Rectangle pageSize = doc.getPageSize();
        float pageWidth = pageSize.getWidth() - doc.leftMargin() - doc.rightMargin();
        scaleRatio = pageWidth / imageWidth;

        // Get scale ratio required to fit image height - if smaller, use this instead
        float pageHeight = pageSize.getHeight() - doc.topMargin() - doc.bottomMargin();
        float heightScaleRatio = pageHeight / imageHeight;
        if (heightScaleRatio < scaleRatio) {
            scaleRatio = heightScaleRatio;
        }

        // Do not upscale - if the entire image can fit in the page, leave it unscaled.
        if (scaleRatio > 1F) {
            scaleRatio = 1F;
        }
    } else {
        // No scaling if the width or height is zero.
        scaleRatio = 1F;
    }
    return scaleRatio;
} 
```

# c# - 访问多个文件

> ID：11120777
> 
> 赞同：3
> 
> 时间：2012-06-20T13:32:00.290
> 
> 标签：c#

我的程序没有遍历文件。程序正确地将所有文件名写入“文件列表”。然后我希望它输出每个文件中数据列表的平均值、最小值和最大值。但是，无论何时运行，它只输出一个文件的平均值、最小值和最大值。我认为循环不是很好。

我尝试在 textwriter tw3 及其右括号之间创建额外的循环，但这不起作用。我也用 tw4 尝试过同样的方法，但它再次不起作用。我不确定问题是由于循环还是我没有使用正确的语法来调用文件夹中的每个文件。整个代码如下。

```
namespace Filereader_m_15062012
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        string[] fileEntries;

        private void Form1_Load(object sender, EventArgs e)
        {
            DialogResult result = folderBrowserDialog1.ShowDialog(); // Show the dialog.
            // create a list to insert the data into
            //put all the files in the root directory into array
            string[] fileEntries = Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.csv");

            // Display all files.
            TextWriter tw1 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/listoffiles.txt");

            List<string> filenames = new List<string>();
            tw1.WriteLine("--- Files: ---");
            foreach (string path in fileEntries)
            {
                tw1.WriteLine(path);
            }

            tw1.Close();

            TextWriter tw2 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/errorlist.txt");
            foreach (string path in fileEntries)
            {  
                    string text = "";

                    // create a list to insert the data into
                    List<float> noise = new List<float>();

                    TextWriter tw3 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/rawdata.txt");

                    string file = path;

                    FileInfo src = new FileInfo(file);
                    TextReader reader = src.OpenText();
                    text = reader.ReadLine();

                    // while the text being read in from reader.Readline() is not null
                    while (text != null)
                    {
                        text = reader.ReadLine();

                        {
                            while (text != null)
                            {
                                text = reader.ReadLine();
                                if (text != null)
                                {
                                    string[] words = text.Split(',');
                                    noise.Add(Convert.ToSingle(words[3]));

                                    // write text to a file
                                    tw3.WriteLine(text);
                                    //foreach (string word in words)
                                    //{
                                    //    tw.WriteLine(word);
                                    //}
                                }

                            }
                        }

                        tw3.Close();

                        int count = 0;
                        float sum = 0;
                        float mean = 0;
                        float max = 0;
                        float min = 100;
                        List<string> means = new List<string>();
                        List<string> maximums = new List<string>();
                        List<string> minimums = new List<string>();

                        TextWriter tw4 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/noise.txt");

                            foreach (float ns in noise)
                            {
                                tw4.WriteLine(Convert.ToString(ns));
                                count++;
                                sum += ns;
                                mean = sum / count;

                                float min1 = 0;

                                if (ns > max)
                                    max = ns;

                                else if (ns < max)
                                    min1 = ns;

                                if (min1 < min && min1 > 0)
                                    min = min1;
                                else
                                    min = min;
                            }

                            means.Add(Convert.ToString(mean));
                            maximums.Add(Convert.ToString(max));
                            minimums.Add(Convert.ToString(min));

                            TextWriter tw5 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/summarymeans.txt");
                            tw5.WriteLine("Mean Noise");
                            tw5.WriteLine("==========");
                            foreach (string m in means)
                            {
                                tw5.WriteLine("mote_noise: {0}", Convert.ToString(m));
                            }

                            tw5.Close();

                            TextWriter tw6 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/summarymaximums.txt");
                            tw6.WriteLine("Maximum Noise");
                            tw6.WriteLine("=============");
                            foreach (string m in maximums)
                            {
                                tw6.WriteLine("mote_noise: {0}", Convert.ToString(m));
                            }

                            tw6.Close();

                            TextWriter tw7 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/summaryminimums.txt");
                            tw7.WriteLine("Minimum Noise");
                            tw7.WriteLine("=============");
                            foreach (string m in maximums)
                            {
                                tw7.WriteLine("mote_noise: {0}", Convert.ToString(m));
                            }

                            tw7.Close();

                        tw4.Close();

                    }

                tw2.Close();
            }
        }        

        private void folderBrowserDialog1_HelpRequest(object sender, EventArgs e)
        {

        }

    }
} 
```

我将非常感谢任何人的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:39:37.080

**您在**迭代文件的 for 循环中初始化您的数字（平均值、模式、总和、计数等） ，以便为每个文件重置它们。

在循环外初始化它们，它应该可以工作。（正如其他人指出的那样，代码还存在其他问题，看起来不是很干净，但这是根本问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:53:53.223

正如 Reniuz 指出的那样，当您遇到此类问题时，您应该单步执行您的代码。在 Visual Studio 中，就像在要开始单步执行的位置设置断点 (F9) 并在调试器到达该点后反复按 F11 一样困难。

但是，在您的情况下，这两个错误来自您的 while 循环和 foreach 循环。循环的正确版本以及完整代码如下所示：

> **While循环应该是：**

```
// while the text being read in from reader.Readline() is not null
while (text != null)
{
     string[] words = text.Split(',');
     noise.Add(Convert.ToSingle(words[3]));
     // write text to a file
     tw3.WriteLine(text);
     text = reader.ReadLine();
 } 
```

> **第二个循环应该是：**

```
foreach (float ns in noise)
{
     tw4.WriteLine(Convert.ToString(ns));
     count++;
     sum += ns;
     mean = sum / count;
     float min1 = 0;
     if (ns > max)
     max = ns;
     else if (ns < max)
         min1 = ns;
     if (min1 < min && min1 > 0)
         min = min1;
     means.Add(Convert.ToString(mean));
     maximums.Add(Convert.ToString(max));
     minimums.Add(Convert.ToString(min));
 } 
```

> **这是完整的代码**

```
 private void Form1_Load(object sender, EventArgs e)
              DialogResult result = folderBrowserDialog1.ShowDialog(); // Show the dialog.
        // create a list to insert the data into
        //put all the files in the root directory into array
        string[] fileEntries = Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.csv");

        // Display all files.
        TextWriter tw1 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/listoffiles.txt");

        List<string> filenames = new List<string>();
        tw1.WriteLine("--- Files: ---");
        foreach (string path in fileEntries)
        {
            tw1.WriteLine(path);
        }

        tw1.Close();

        TextWriter tw2 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/errorlist.txt");
        foreach (string path in fileEntries)
        {
            string text = "";

            // create a list to insert the data into
            List<float> noise = new List<float>();

            TextWriter tw3 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/rawdata.txt");

            string file = path;

            FileInfo src = new FileInfo(file);
            TextReader reader = src.OpenText();
            text = reader.ReadLine();

            // while the text being read in from reader.Readline() is not null
            while (text != null)
            {
                string[] words = text.Split(',');
                noise.Add(Convert.ToSingle(words[3]));

                // write text to a file
                tw3.WriteLine(text);
                text = reader.ReadLine();
            }

            tw3.Close();

            int count = 0;
            float sum = 0;
            float mean = 0;
            float max = 0;
            float min = 100;
            List<string> means = new List<string>();
            List<string> maximums = new List<string>();
            List<string> minimums = new List<string>();

            TextWriter tw4 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/noise.txt");

            foreach (float ns in noise)
            {
                tw4.WriteLine(Convert.ToString(ns));
                count++;
                sum += ns;
                mean = sum / count;
                float min1 = 0;
                if (ns > max)
                    max = ns;

                else if (ns < max)
                    min1 = ns;

                if (min1 < min && min1 > 0)
                    min = min1;
                means.Add(Convert.ToString(mean));
                maximums.Add(Convert.ToString(max));
                minimums.Add(Convert.ToString(min));
            }

            TextWriter tw5 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/summarymeans.txt");
            tw5.WriteLine("Mean Noise");
            tw5.WriteLine("==========");
            foreach (string m in means)
            {
                tw5.WriteLine("mote_noise: {0}", Convert.ToString(m));
            }

            tw5.Close();

            TextWriter tw6 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/summarymaximums.txt");
            tw6.WriteLine("Maximum Noise");
            tw6.WriteLine("=============");
            foreach (string m in maximums)
            {
                tw6.WriteLine("mote_noise: {0}", Convert.ToString(m));
            }
            tw6.Close();

            TextWriter tw7 = new StreamWriter(folderBrowserDialog1.SelectedPath + "/summaryminimums.txt");
            tw7.WriteLine("Minimum Noise");
            tw7.WriteLine("=============");
            foreach (string m in maximums)
            {
                tw7.WriteLine("mote_noise: {0}", Convert.ToString(m));
            }
            tw7.Close();
            tw4.Close();
        }

        tw2.Close();
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T14:48:33.440

就像你说的，你的循环对我来说看起来不正确。你为什么不试试这样的东西（“...”代表你的代码部分，为了简洁我没有复制）？请注意，有一个**while (text != null)**与**text = reader.ReadLine();** 最后，而不是您示例中的多个 while 和 ifs。

```
 foreach (string path in fileEntries)
        {
            ...
            string text = reader.ReadLine();

            // while the text being read in from reader.Readline() is not null
            while (text != null)
            {
                string[] words = text.Split(',');
                noise.Add(Convert.ToSingle(words[3]));

                // write text to a file
                tw3.WriteLine(text);
                //foreach (string word in words)
                //{
                //    tw.WriteLine(word);
                //}

                ...

                text = reader.ReadLine();
            }
            tw3.Close();
        } 
```

# c++ - 使用带有 boost::asio 异步操作的自定义 streambuf

> ID：11120778
> 
> 赞同：3
> 
> 时间：2012-06-20T13:32:02.480
> 
> 标签：c++, boost-asio

我正在使用 boost::asio 编写服务器应用程序。
我正在从用户读取已知数量的数据并将其写入具有以下 api 的数据接收器：

```
class Sink {
    ...
    void write(const char *data, size_t size);
} 
```

数据量大，可以`write(..)`多次调用处理一个流。
在我的代码中，我想调用：

```
boost::asio::async_read(socket, sink_buffer,
    boost::asio::transfer_exactly(size), ...); 
```

`Sink`是否可以用自定义包装，`std::streambuf`或者`boost::asio::basic_streambuf`它可以处理向其写入数据部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:07:17.467

对于作为 的*缓冲区*参数传递的对象`async_read()`，*缓冲区*参数要么：

*   需要是满足[`MutableBufferSequence`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/MutableBufferSequence.html)要求的类型。
*   成为一个`boost::asio::basic_streambuf`对象。

因此，可以编写一个`Sink`在读取发生时与对象交互的自定义​​类。但是，`boost::asio::basic_streambuf`似乎并没有被设计为用作基类。

如果`Sink::write`只是对底层内存的抽象，请考虑使用类似于 的方法[`basic_streambuf::prepare()`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/basic_streambuf/prepare.html)，其中成员函数返回给定大小的缓冲区的句柄。底层内存实现仍将在[`mutable_buffer`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/mutable_buffer.html). 例如：

```
boost::asio::async_read( socket, sink.buffer( size ), ... ); 
```

如果`Sink::write`有业务逻辑，比如根据某些字节的值进行逻辑分支，那么可能需要传递一个中间缓冲区给`async_read()`. `Sink::write()`然后将在`async_read()`的*处理程序*中完成对中间缓冲区的调用。例如：

```
void handle_read_into_sink( boost::system::error_code error,
                            std::size_t bytes_transferred,
                            boost::asio::ip::tcp::socket& socket,
                            Sink& sink,
                            char* buffer,
                            std::size_t buffer_size,
                            std::size_t bytes_remaining,
                            boost::function< void() > on_finish )
{
  sink.write( buffer, buffer_size );

  bytes_remaining -= bytes_transferred;
  // If there are more bytes remaining, then continue reading.
  if ( bytes_remaining )
  {
    read_into_sink( socket, sink, buffer, buffer_size,
                    bytes_remaining, on_finish );
  }
  // Otherwise, all data has been read.
  else
  {
    on_finish();
  }  
}

void read_into_sink( boost::asio::ip::tcp::socket& socket,
                     Sink& sink,
                     char* buffer,
                     std::size_t buffer_size,
                     std::size_t bytes_remaining,
                     boost::function< void() > on_finish )
{
  boost::asio::async_read(
    socket, boost::asio::buffer( buffer , buffer_size ),
    boost::asio::transfer_exactly( buffer_size ),
    boost::bind( handle_read_into_sink,
                 boost::asio::placeholders::error,
                 boost::asio::placeholders::bytes_transferred,
                 boost::ref( socket ),
                 boost::ref( sink ),
                 buffer,
                 buffer_size,
                 bytes_remaining,
                 on_finish ) );
} 
```

并开始异步读取循环：

```
read_into_sink( socket, sink, small_buffer, sizeof_small_buffer, 
                total_stream_size, read_handler_callback ); 
```

确保根据您所需的逻辑检查和处理*错误。*

# asp.net - 通过 iis 时站点布局不同

> ID：11120780
> 
> 赞同：2
> 
> 时间：2012-06-20T13:32:11.583
> 
> 标签：asp.net, iis

我已经使用我的本地 iis 来测试该站点，现在它被放置在服务器上，布局看起来“奇怪”，缺少位、未对齐，或者表格的一半边框是一种颜色，另一半是另一种颜色（其中我哪里都没有）

我知道，它不是 CSS 文件，这些项目几乎都在各自的位置（否则事情会完全搞砸，而且大多数事情都设置在 aspx 页面中），但只是一些小问题，例如看起来有别名的文本，奇怪表格单元格宽度，比我提到的边框厚，下拉列表箭头不是设置颜色等。

我能看到的唯一区别是我的机器上有 iis 6.1，而服务器上有 6.0。

如何解决这个问题？几乎就像服务器以不同的分辨率发送站点一样。它完全搞砸了整个网站。

该站点将仅由 ie9 和 Intranet 访问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T13:49:07.573

听起来您的公司政策是以“兼容模式”呈现 Intranet 网站，这会破坏一些更合适的 CSS。

尝试将此行添加到`<head>`页面的一部分：

```
<meta http-equiv="X-UA-Compatible" content="IE=11" /> 
```

或者以可用的最高模式显示以下内容（有时这是不希望的，尤其是在使用旧版本 IE 的组织中）：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

这应该强制页面退出“兼容模式”并正确呈现页面。

有关此元标记的不同值的更多详细信息，请查看此 SO 问题：[<meta http-equiv="X-UA-Compatible" content="IE=edge"> 做什么？](https://stackoverflow.com/questions/6771258/whats-the-difference-if-meta-http-equiv-x-ua-compatible-content-ie-edge-e)

*2015 更新 - 将示例更改为比 IE8 更新的内容，还包含指向不同选项的精彩说明的链接*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:44:00.113

可能是因为你有规定要使用|不要在本地Intranet和Internet上使用IE兼容模式。

问题也可能是由不同的应用安全规则引起的（由于授权设置，某些 css 文件可能不可用），但使用 IIS 6.x 和 7.x 或更高版本很常见，并且您有相同的...

# function - PowerShell 从 .ps1 运行具有多个参数的函数

> ID：11120788
> 
> 赞同：1
> 
> 时间：2012-06-20T13:32:30.590
> 
> 标签：function, powershell, parameters, call

我正在尝试运行位于 .ps1 文件中的函数。该函数接受两个参数，可以是字符串或整数。这是我的代码：

文件名：SetFarmProp.ps1

```
Function SetFarm ($property_name, $property_value) `
{
    $farm = Get-SPFarm

    $farm.Properties.Add($property_name, $property_value)

    $farm.properties
} 
```

当我进入我的 PowerShell 会话并输入

```
.\SetFarmProp.ps1
SetFarm "testkey" "testvalue1" 
```

我收到一条错误消息，指出“SetFarm”不是 cmdlet、函数、脚本文件或可运行程序的可识别名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:33:56.223

尝试点源：

```
. .\SetFarmProp.ps1
SetFarm "testkey" "testvalue1" 
```

要不就：

```
.\SetFarmProp.ps1 "testkey" "testvalue1" 
```

如果您将 .ps1 文件修改为：

```
param ($property_name, $property_value)
{
    $farm = Get-SPFarm

    $farm.Properties.Add($property_name, $property_value)

    $farm.properties
} 
```

# c# - C# 将日志文件读入列表视图

> ID：11120789
> 
> 赞同：0
> 
> 时间：2012-06-20T13:32:38.507
> 
> 标签：c#, winforms, listview, datatable, filereader

我正在尝试导入日志文件并以网格格式（很像 excel）在列表视图中显示它。我想知道这可能是最好的方法。文件阅读器和数据表可能吗？我以前没有编写过这样的程序。这是一个 Windows 窗体项目。

关于这个问题的任何建议都会有很大帮助。

**编辑2：**

日志文件示例：

```
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 i d   =   1 0 0 1
 P a r a m e t e r   1   =   E N A B L E D
 P a r a m e t e r   2   =   D I S A B L E D
 P a r a m e t e r   3   =   N U L L
 P a r a m e t e r   4   =   N U L L
 P a r a m e t e r   5   =   S U C C E S S  
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
```

这与不同的数据重复。

我希望将其读入并显示在不同标题 ID、名称等下的列表视图中

此应用程序也仅限于使用 .NET 3.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:42:51.980

[我最好的猜测是使用StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader%28v=vs.100%29.aspx)一次读取一行文件并将数据放在[DataGridView](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)中。

编辑：以下代码适用于针对 .Net 2.0 的项目，并假设您的 DataGridView 的名称是 dataGridView1

```
StreamReader reader = new StreamReader(@"C:\Users\jdudley\file.txt");
// Will be incremented every time ID shows up so it must started at -1 so we don't
// try and start inserting at 1.
int rowIndex = -1;
while (!reader.EndOfStream)
{
    string line = reader.ReadLine();
    string[] parsedLine = line.Split(new char[] { '=' });
    if(!this.dataGridView1.Columns.Contains(parsedLine[0]))
    {
        dataGridView1.Columns.Add(parsedLine[0],parsedLine[0]);
    }
    if (parsedLine[0].Trim().Equals("id"))
    {
        rowIndex++;
        dataGridView1.Rows.Add();
    }
    dataGridView1[parsedLine[0], rowIndex].Value = parsedLine[1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:38:28.570

如果您尝试在日志文件中的每一行显示列表中的一行，我只需使用`File.ReadAllLines`读取文件，然后使用字典来存储每个日志条目的键值对：

```
List<Dictionary<string, string>> entries = new List<Dictionary<string, string>>();
Dictionary<string, string> entry = null;
foreach (string line in File.ReadAllLines(logFilePath))
{
    string[] fields = line.Split('=');
    if (fields.Length > 1)
    {
        if (fields[0].Trim() == "id")
        {
            if (entry != null) entries.Add(entry);
            entry = new Dictionary<string, string>();
        }
        if (entry != null) entry[fields[0].Trim()] = fields[1].Trim();
    }
}
if (entry != null) entries.Add(entry); 
```

# iphone - 将静态库合并为单个

> ID：11120790
> 
> 赞同：25
> 
> 时间：2012-06-20T13:32:42.847
> 
> 标签：iphone, ipad, static-libraries

如何将静态库合并为一个？

我确实有三个静态库 libSignatureLibary_armv6.a 、 libSignatureLibary_armv7.a 和 libSignatureLibary_i368.a

现在我想将这三个文件合并到一个可以命名为 libSignatureLibary.a 的库中

在谷歌搜索时，我发现 lipo 是开源工具！

我是否需要运行任何额外的脚本语言来合并

或在终端 lipo 中并传递 lipo 的参数。

任何人都可以建议我为这三个构建公共库。

@在此先感谢基兰

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-20T19:35:11.797

打开终端并使用您的库转到文件夹。然后使用命令：

```
lipo -create libSignatureLibary_armv6.a libSignatureLibary_armv7.a libSignatureLibary_i368.a -output libSignatureLibary.a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-06T14:43:04.073

[`lipo`命令](https://ss64.com/osx/lipo.html)

> 创建或操作通用文件：将通用二进制文件转换为单个架构文件，反之亦然。

`lipo`从`liposuction`. 如您所知，当您构建项目时，Xcode 会为不同的 CPU 架构生成二进制文件。

*   **团结起来**。当开发人员希望将生产者二进制文件作为封闭源共享时，他应该考虑到客户端应该有可能在真实设备和模拟器上使用此二进制文件运行/调试项目。这个简单的例子表明开发人员必须有一个工具来将不同arch的二进制文件合并到一个文件中——`fat`二进制文件。

*   **分开**。另一个例子是，当您将应用程序发布到 AppStore 时，您可以使用`-remove`选项删除不必要的拱门。

*   如果您尝试在没有必要架构的情况下使用二进制文件构建项目，您会收到错误[^([Could not find module for architecture])](https://stackoverflow.com/a/57874340/4770877)

架构：

*   模拟器 - x86_64、i386
*   设备 - armv7、armv7s、arm64

如果您尝试对具有相同拱门的二进制文件运行此命令，您将得到

```
fatal error: <binary_list> have the same architectures (<arch>) and can't be in the same fat output file 
```

请注意该`-create`选项没有参数

```
lipo libMy_armv6.a libMy_armv7.a libMy_i368.a -create -output libMy.a 
```

检查现有架构

```
lipo -info <binary_path>
//or
file <binary_path> 
```

下一步是[[ `XCFramework`]](https://stackoverflow.com/a/67181295/4770877)

[[词汇]](https://stackoverflow.com/a/59216151/4770877)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-09-12T07:59:50.713

```
lipo -create libSignatureLibary_armv6.a libSignatureLibary_armv7.a libSignatureLibary_i368.a -output libSignatureLibary.a 
```

# silverlight - DependencyObject 的绑定上下文

> ID：11120791
> 
> 赞同：2
> 
> 时间：2012-06-20T13:32:42.387
> 
> 标签：silverlight, binding, dependency-properties, dependencyobject

我试图了解 Silverlight 依赖属性系统的低级细节。

我意识到 DependencyObject 没有明确的 DataContext 属性，甚至没有父级的概念。

然而，从 DependencyObject 派生的 Behavior 类具有绑定，它使用它所附加的 DataContext 作为自身绑定的 Source。

我的问题是：我可以从 DependencyObject 派生一个类并以某种方式确定要在 Source 处使用哪个其他对象进行绑定吗？或更清楚地说：如何实现类似 Behavior 类的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:04:56.363

> DataContext 是一个 FrameworkElement 属性。通过使用父子属性继承的形式，绑定系统可以解析存在于父元素上的 DataContext，即使子对象（具有目标属性）不是 FrameworkElement，因此不保存自己的 DataContext 值. 但是，该父元素必须是 FrameworkElement 才能设置和保存 DataContext。或者，您必须定义绑定，以便它可以使用 null DataContext。

和

> 从 Silverlight 4 开始，在以下情况下，目标也可以是 DependencyObject 的 DependencyProperty：
> 
> *   DependencyObject 是 FrameworkElement 的属性值。
>     
>     
> *   DependencyObject 位于作为 FrameworkElement 属性（例如，Resources 属性）值的集合中。
>     
>     
> *   DependencyObject 位于 DependencyObjectCollection 中。
>     
>     
> 
> 从 Silverlight 5 开始，目标也可以是 Style 中 Setter 的 Value 属性。例如，请参阅 Style 类概述。

所以你的问题的答案是：是的，你可以从 DependencyObject 派生你的类，只要满足上面列出的条件或绑定不依赖于 DataContext（使用 ElementName 或 Source 属性），它的依赖属性上的绑定就可以工作

# android - Canvas#drawBitmap 在 SurfaceView 中阻碍 Canvas#drawPath

> ID：11120793
> 
> 赞同：1
> 
> 时间：2012-06-20T13:33:01.933
> 
> 标签：android, path, bitmap, draw, surfaceview

我有一个`SurfaceView`必须在两个位图下方、之间或上方绘制路径。我正在为路径的绘制设置动画，使其看起来会增长到全尺寸。如果我不绘制位图，则**此**代码有效。

位图是这样指定的（在`onLayout(...)`, 以获取`View`尺寸），如下所示：

```
mFrontBitmap = Bitmap.createBitmap((int) width, (int) height, mConfig);
Canvas temp = new Canvas(mFrontBitmap);
temp.drawColor(Color.TRANSPARENT, Mode.CLEAR); 
```

（我正在擦拭它们，以免留下任何机会。）然后`SurfaceView`线程运行方法中的绘制代码是

```
if(mCurrentLayer==Layer.BACK) {
    //draw path
    if(mPath!=null)
    canvas.drawPath(mPath, mPaint);
}

canvas.drawBitmap(mBackBitmap, 0, 0, null);

if(mCurrentLayer==Layer.MIDDLE) {
    //draw path
    if(mPath!=null)
        canvas.drawPath(mPath, mPaint);
}

canvas.drawBitmap(mFrontBitmap, 0, 0, null);

if(mCurrentLayer==Layer.FRONT) {
    //draw path
    if(mPath!=null)
        canvas.drawPath(mPath, mPaint);
} 
```

`drawBitmap`注释掉这两行后，动画渲染得很好。有了它们，在动画完成之前我什么都看不到，然后将路径（完整地）直接渲染到其中一个位图。我有点不知所措。我查看了 LunarLander 示例，它正在渲染背景位图，所以这显然是`SurfaceView` *可以*做的，但对我来说不会。会是什么呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-20T14:05:55.317

要在每次需要位图内容时绘制，您可以在每次执行 canvas.drawPath(...) 时使用它：

```
mpath.invalidate(); 
```

（我假设 mpath 是视图/表面视图）。

所以它看起来像这样：

```
if(mCurrentLayer==Layer.BACK) {
    //draw path
    if(mPath!=null) {
        canvas.drawPath(mPath, mPaint);
        mPath.invalidate();
    }
}

canvas.drawBitmap(mBackBitmap, 0, 0, null);

if(mCurrentLayer==Layer.MIDDLE) {
    //draw path
    if(mPath!=null) {
        canvas.drawPath(mPath, mPaint);
        mPath.invalidate();
    }
}

canvas.drawBitmap(mFrontBitmap, 0, 0, null);

if(mCurrentLayer==Layer.FRONT) {
    //draw path
    if(mPath!=null) {
        canvas.drawPath(mPath, mPaint);
        mPath.invalidate();
    }
} 
```

# javascript - jQuery（或 javascript）验证日期范围

> ID：11120800
> 
> 赞同：0
> 
> 时间：2012-06-20T13:33:35.060
> 
> 标签：javascript, jquery, validation, date

> **可能重复：**
> [使用 Javascript，我如何确保日期范围有效？](https://stackoverflow.com/questions/73971/using-javascript-how-do-i-make-sure-a-date-range-is-valid)

我允许用户在页面上输入日期，并且我的一位测试人员正确地破坏了数据库保存并出现以下错误：

**SqlDateTime 溢出。必须介于 1753 年 1 月 1 日上午 12:00:00 和 9999 年 12 月 31 日晚上 11:59:59 之间。**

在将日期发送到服务器之前，是否有现有的函数可以在客户端在 jQuery 或 JavaScript 中验证这一点，以便我可以向用户提供反馈？我宁愿不必自己写（可能不完整）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:41:07.143

javascript 重载`>`和`<`比较运算符来处理日期。

```
if (yourDate > new Date('1/1/1753 12:00:00 AM') && 
    yourDate < new Date('12/31/9999 11:59:59 PM')) {
    // date is in your valid range
} else {
    // date is not in your valid range
} 
```

[http://jsfiddle.net/jbabey/UB9NR/](http://jsfiddle.net/jbabey/UB9NR/)

请记住，javascript 验证仅用于*性能*，不会增加安全性；它应始终辅以服务器端验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:41:16.600

使用 Datepicker 插件[http://jqueryui.com/demos/datepicker/#min-max](http://jqueryui.com/demos/datepicker/#min-max) 并使用日期范围方法限制用户输入错误范围

[http://jqueryui.com/demos/datepicker/#date-range](http://jqueryui.com/demos/datepicker/#date-range)

**代码**

```
$(function() {
        $( "#from" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onSelect: function( selectedDate ) {
                $( "#to" ).datepicker( "option", "minDate", selectedDate );
            }
        });
        $( "#to" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onSelect: function( selectedDate ) {
                $( "#from" ).datepicker( "option", "maxDate", selectedDate );
            }
        });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:42:24.517

您需要[日期 js](http://www.datejs.com/)库。我认为这个函数就是你要找的**Date.validateDay**。见[文档](http://code.google.com/p/datejs/wiki/APIDocumentation)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T13:37:00.727

您可以尝试使用 jQuery 验证[插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)在客户端处理此问题。**但不要只在客户端这样做。在发送到数据库之前，始终始终在服务器端执行此操作。**

根据 jQuery[文档](http://docs.jquery.com/Plugins/Validation/Methods/date)，代码可以很简单。

```
$("#myform").validate({
  rules: {
    field: {
      required: true,
      date: true
    }
  }
}); 
```

如果您想要自定义日期格式，这个[答案](https://stackoverflow.com/questions/511439/custom-date-format-with-jquery-validation-plugin)值得一看

# mysql - 使用 MySQL 对四个表进行 SQL 查询 - 'intersection'

> ID：11120801
> 
> 赞同：3
> 
> 时间：2012-06-20T13:33:41.300
> 
> 标签：mysql, sql, sql-match-all

我有 4 张桌子

```
POST:
id

POST_TAG:
post_id
tag_id
value

TAG:
id

SEARCH:
tag_id
post_tag_value 
```

我需要查询在 SEARCH 表中具有**所有标签和值作为行的****帖子**（不仅仅是标签的一个相等值）：

 **编辑：很抱歉没有提供当前查询和足够的信息。

```
SELECT POST.id FROM POST,POST_TAG, SEARCH
WHERE
      POST.id = POST_TAG.post_id AND
      POST_TAG.tag_id= SEARCH.tag_id AND
      POST_TAG.value = SEARCH.value; 
```

如果 SEARCH 表只有一行，它就可以工作。问题是，当它有更多时。结果应该更少，但实际上更多（如果用 2 行测试，正确的结果是重复的行；我正在寻找**交集**而不是联合）

添加了 sqlfiddle：[http ://sqlfiddle.com/#!2/9cfb9/1](http://sqlfiddle.com/#!2/9cfb9/1)

查询的结果是 '1','1','2' 。它应该只有“1”，因为它有两个“标签”，而“2”只有一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:42:27.563

根据您的 sqlfiddle，答案可能是这样的：

```
-- i want to select post that match to EVERY tag
-- the result of example data should be only '1'
SELECT POST.id as 'tag_id'
FROM POST,POST_TAG, SEARCH
WHERE
      POST.id = POST_TAG.post_id AND
      POST_TAG.tag_id= SEARCH.tag_id AND
      POST_TAG.value = SEARCH.value
GROUP BY POST.id
having COUNT(distinct POST_TAG.tag_id) = (select count(distinct tag_id) from POST_TAG); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:46:15.120

工作示例：[http ://sqlfiddle.com/#!2/393eb/39](http://sqlfiddle.com/#!2/393eb/39)

```
SELECT pt.post_id
FROM SEARCH s INNER JOIN post_tag pt ON pt.tag_id = s.tag_id AND pt.value = s.value
GROUP BY pt.post_id
HAVING COUNT(*) = (SELECT COUNT(*) FROM SEARCH) 
```

请注意，在您的小提琴中，id 为 0 的帖子也应该返回，因为它同时具有`(0,'yes')`和`(1, 'yes')`元组。**

# c# - “属性查询包含无效值。” - 我看不到

> ID：11120802
> 
> 赞同：0
> 
> 时间：2012-06-20T13:33:48.893
> 
> 标签：c#, sharepoint-2010, caml, spsitedataquery

```
query.Query = @"<Where>
<And>
<BeginsWith>
<FieldRef Name='ContentTypeId'/>
<Value Type='Text'>[LONG GUID]</Value>
</BeginsWith>
<And>
<Geq>
<FieldRef Name='PublishingStartDate' />
<Value Type='DateTime'>2011-01-01T15:55:52Z</Value>
</Geq>
<Leq>
<FieldRef Name='PublishingStartDate' />
<Value Type='DateTime'>2011-01-01T15:55:52Z</Value>
</Leq>
</And>
</And>
</Where>
<OrderBy>
<FieldRef Name='PublishingStartDate' Ascending='FALSE' />
</OrderBy>"; 
```

上面的查询试图在两个日期之间恢复特定内容类型的所有项目，并按相同的日期字段排序（降序）。

编辑：我应该提到这是一个 SPSiteDataQuery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:41:55.873

我看不出你的 CAML 有什么问题。我注意到的一件事是 PublishingStartDate 过滤器值的值。Geq 和 Leq 都具有完全相同的日期时间值。

```
<Geq>
<FieldRef Name='PublishingStartDate' />
<Value Type='DateTime'>2011-01-01T15:55:52Z</Value>
</Geq>
<Leq>
<FieldRef Name='PublishingStartDate' />
<Value Type='DateTime'>2011-01-01T15:55:52Z</Value>
</Leq> 
```

您确定两个过滤器都应该使用相同的日期时间吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T07:56:41.660

也许现在回答这个问题为时已晚，但供进一步参考：问题是查询或视图字段中不能有新的行符号。我有同样的问题——如果你把所有的 CAML 放在一行上，它会起作用。

# css - drupal视图中块和页面的自定义css

> ID：11120809
> 
> 赞同：0
> 
> 时间：2012-06-20T13:34:04.173
> 
> 标签：css, drupal, content-management-system

我有一个自定义视图，它有页面和块。但是当我设置块样式时的问题，相同的样式应用于页面。如何为页面或块创建另一个 CSS 规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:04:28.493

当您更改 css 类时，它假定您要在全局范围内这样做！要将您的 css 更改仅应用于页面或块，请从下拉列表中选择“此页面”或“此块”，因此不会全局应用。

让我知道这是否解决了您的问题！:-)

![在此处输入图像描述](../Images/2b5233e0c8c71a0c90cae742ce808019.png)

# ruby - 休息前从 div 获取内容

> ID：11120812
> 
> 赞同：0
> 
> 时间：2012-06-20T13:34:11.007
> 
> 标签：ruby, hpricot

使用 hpricot 我可以获得一些 div 的内容 -

```
doc = Hpricot(@response)

doc.search(".someDiv").each do |content|
   puts content.inner_html
end 
```

//这将以下内容

```
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
<br>
some more text, images and other stuff 
```

我怎样才能确保我只在换行符之前放东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:41:53.007

如果所有 div的段落结构都相同，您可以随时**拆分***内容*：

```
doc = Hpricot(@response)

doc.search(".someDiv").each do |content|
   puts content.inner_html.split("<br>").first
end 
```

# iphone - iOS 为 UIImageView 获取图像的可见部分

> ID：11120814
> 
> 赞同：2
> 
> 时间：2012-06-20T13:34:16.813
> 
> 标签：iphone, objective-c, ios

我正在尝试`UIImage`从`UIImageView`. `UIImageView`占据整个屏幕。捏和平移手势被添加到`UIImageView`。因此，用户可以平移/缩放图像视图。平移/缩放后，我只想裁剪图像视图的可见部分。我尝试了很多方法。但它返回了图像的错误部分。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T14:42:18.970

将 QuartzCore 框架包含到您的项目中并实现此方法以从图像视图中获取图像的可见部分：（注意：我的意思是您在项目中使用 ARC）

```
#import <QuartzCore/QuartzCore.h>

- (UIImage*)imageFromImageView:(UIImageView*)imageView
{
    UIGraphicsBeginImageContext(imageView.frame.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextRotateCTM(context, 2*M_PI);

    [imageView.layer renderInContext:context];
    UIImage *image =  UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:18:44.087

谢谢你们。我已经想出了解决方案。这是我用来获取图像可见部分的代码。（请记住，图像在缩放或平移时不完全可见，因为它占据了整个屏幕）

```
 - (UIImage *)cropVisiblePortionOfImageView:(UIImageView *)imageView {

  CGFloat zoomScaleX=imageView.frame.size.width/initialWidth;
  CGFloat zoomScaleY=imageView.frame.size.height/initialHeight;
  CGSize zoomedSize=CGSizeMake(initialWidth*zoomScaleX,initialHeight*zoomScaleY);

  UIGraphicsBeginImageContext(zoomedSize);
  [imageView.image drawInRect:CGRectMake(0, 0, zoomedSize.width, zoomedSize.height)];
  UIImage *zoomedImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();

  UIGraphicsBeginImageContext(CGSizeMake(initialWidth, initialHeight));
  [zoomedImage drawAtPoint:CGPointMake(imageView.frame.origin.x, imageView.frame.origin.y)];
  UIImage *cropedImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();

  return cropedImage;
} 
```

# ios - Objective-C：从头开始并揭示背后的图像

> ID：11120816
> 
> 赞同：2
> 
> 时间：2012-06-20T13:34:19.997
> 
> 标签：ios, user-interface

我不知道这个的正确标题是什么，但这就像一个划痕和揭示的东西。

这里是什么样的。我必须重叠 UIImageViews，现在我想要做的是擦除视图的某些部分，其中触摸点将显示后面的图像。它类似于触摸绘图，但它的作用是擦除某些点而不是在其上绘图。

我尝试在网上搜索，但找不到任何东西。

有人有想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T13:40:28.467

github 上有一个很棒的控件，它是 MIT 许可的。也许它会帮助你得到一些想法，

[https://github.com/akopanev/iOS-Scratch-n-See](https://github.com/akopanev/iOS-Scratch-n-See)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T18:27:03.757

如果您决定自己滚动，这只是拥有两张图像的过程，一张完全露出划痕，另一张完全隐藏划痕部分。您将这两个图像叠加在一起，根据手势识别器更新并应用蒙版到前面的图像。（您可以首先完全遮盖正面图像，然后在用户划痕时取消遮盖部分，或者像我在这里一样，完全显示正面图像并在用户划痕时遮盖掉部分。）无论如何，当您更新/应用时遮罩到前图像，这将决定后图像将显示多少。

我不是 Core Graphics 的人，但它可能看起来像：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImage *backgroundImage = [UIImage imageNamed:@"imgres-1.jpg"];

    _foregroundImage = [UIImage imageNamed:@"imgres-2.jpg"];

    CGRect frame = CGRectMake((self.view.frame.size.width - _foregroundImage.size.width) / 2.0, 
                              (self.view.frame.size.height - _foregroundImage.size.height) / 2.0, 
                              _foregroundImage.size.width, 
                              _foregroundImage.size.height);

    UIImageView *backgroundImageView = [[UIImageView alloc] initWithFrame:frame];
    backgroundImageView.image = backgroundImage;
    [self.view addSubview:backgroundImageView];

    _foregroundImageMask = [self createBlankMaskForImage:_foregroundImage];

    UIImageView *_foregroundImageView = [[UIImageView alloc] initWithFrame:frame];
    _foregroundImageView.image = [self maskImage:_foregroundImage withMask:_foregroundImageMask]; // _foregroundImage;
    [self.view addSubview:_foregroundImageView];

    UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];
    _foregroundImageView.userInteractionEnabled = YES;
    [_foregroundImageView addGestureRecognizer:pan];
}

- (void)pan:(UIPanGestureRecognizer *)sender
{
    static CGPoint lastPoint;
    UIImageView *maskedImageView = (UIImageView*)sender.view;
    CGPoint location = [sender locationInView:maskedImageView];

    if (sender.state == UIGestureRecognizerStateBegan)
    {
        lastPoint = location;
    } 
    else if (sender.state == UIGestureRecognizerStateChanged)
    {
        UIGraphicsBeginImageContext(_foregroundImage.size);

        CGContextRef context = UIGraphicsGetCurrentContext();
        [_foregroundImageMask drawInRect:maskedImageView.bounds];
        CGContextSetLineCap(context, kCGLineCapRound);
        CGContextSetLineWidth(context, 24.0);
        CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
        CGContextBeginPath(context);
        CGContextMoveToPoint(context, lastPoint.x, lastPoint.y);
        CGContextAddLineToPoint(context, location.x, location.y);
        CGContextStrokePath(context);
        _foregroundImageMask = UIGraphicsGetImageFromCurrentImageContext();

        maskedImageView.image = [self maskImage:_foregroundImage withMask:_foregroundImageMask];

        lastPoint = location;
    }
}

- (UIImage *)createBlankMaskForImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();

    CGContextRef context = CGBitmapContextCreate (NULL, image.size.width, image.size.height,
                                                  8, 0, colorSpace, kCGImageAlphaNone);
    CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 0.0); // don't use alpha
    CGContextFillRect(context, CGRectMake(0.0, 0.0, image.size.width, image.size.height));
    CGImageRef imageref = CGBitmapContextCreateImage(context);
    UIImage *result = [UIImage imageWithCGImage:imageref];

    CGColorSpaceRelease(colorSpace);
    CGContextRelease(context);
    CFRelease(imageref);

    return result;
}

// the following came from http://mobiledevelopertips.com/cocoa/how-to-mask-an-image.html

- (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage 
{
    CGImageRef maskRef = maskImage.CGImage; 

    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                        CGImageGetHeight(maskRef),
                                        CGImageGetBitsPerComponent(maskRef),
                                        CGImageGetBitsPerPixel(maskRef),
                                        CGImageGetBytesPerRow(maskRef),
                                        CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);

    UIImage *result = [UIImage imageWithCGImage:masked];

    CGImageRelease(masked);
    CGImageRelease(mask);

    return result;
} 
```

可能很明显，但这使用了两个 ivars：

```
UIImage *_foregroundImage;
UIImage *_foregroundImageMask; 
```

这不是一个非常优雅的实现，但它为您提供了基本思想。您可以随心所欲地使用它。

# configuration - 如何从我的 msbuild AfterBuild 目标中排除特定文件

> ID：11120819
> 
> 赞同：2
> 
> 时间：2012-06-20T13:34:32.320
> 
> 标签：configuration, msbuild

我的 csproj 文件中有这个 msbuild 目标：

```
<Target Name="AfterBuild" Condition=" '$(Configuration)' == 'Release' ">
    <CreateItem Condition="'%(Extension)'=='.dll'" Include="@(ReferenceCopyLocalPaths)">
        <Output TaskParameter="Include" ItemName="IlmergeAssemblies" />
    </CreateItem>
    <Exec Command="&quot;$(ProjectDir)..\..\..\tools\IlMerge\Ilmerge.exe&quot; /targetplatform:&quot;v4,C:\Windows\Microsoft.NET\Framework64\v4.0.30319&quot; /ndebug /out:@(MainAssembly) &quot;@(IntermediateAssembly)&quot; @(IlmergeAssemblies->'&quot;%(FullPath)&quot;', ' ')" />
    <Delete Files="@(ReferenceCopyLocalPaths->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)')" />
</Target> 
```

这就像一个魅力。但我希望它排除特定文件并尝试对其进行调整：

```
<Target Name="AfterBuild" Condition=" '$(Configuration)' == 'Release' ">
    <CreateItem Condition="'%(Extension)'=='.dll' AND '%(Filename)' != 'Foo.dll'" Include="@(ReferenceCopyLocalPaths)">
        <Output TaskParameter="Include" ItemName="IlmergeAssemblies" />
    </CreateItem>
    <Exec Command="&quot;$(ProjectDir)..\..\..\tools\IlMerge\Ilmerge.exe&quot; /targetplatform:&quot;v4,C:\Windows\Microsoft.NET\Framework64\v4.0.30319&quot; /ndebug /out:@(MainAssembly) &quot;@(IntermediateAssembly)&quot; @(IlmergeAssemblies->'&quot;%(FullPath)&quot;', ' ')" />
    <Delete Files="@(ReferenceCopyLocalPaths->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)')" />
</Target> 
```

但是，这不起作用。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:47:39.900

%(Filename) 仅包含文件名。

所以你可以测试**%(Filename)' != 'Foo'**：

```
<Target Name="AfterBuild" Condition=" '$(Configuration)' == 'Release' ">
<CreateItem Condition="'%(Extension)'=='.dll' AND '%(Filename)' != 'Foo'" Include="@(ReferenceCopyLocalPaths)">
    <Output TaskParameter="Include" ItemName="IlmergeAssemblies" />
</CreateItem>
<Exec Command="&quot;$(ProjectDir)..\..\..\tools\IlMerge\Ilmerge.exe&quot; /targetplatform:&quot;v4,C:\Windows\Microsoft.NET\Framework64\v4.0.30319&quot; /ndebug /out:@(MainAssembly) &quot;@(IntermediateAssembly)&quot; @(IlmergeAssemblies->'&quot;%(FullPath)&quot;', ' ')" />
<Delete Files="@(ReferenceCopyLocalPaths->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)')" /> 
```

# asp.net - 使用模拟 asp.net 时的 UNC 访问

> ID：11120829
> 
> 赞同：1
> 
> 时间：2012-06-20T13:35:09.017
> 
> 标签：asp.net, impersonation, unc

我试图让我的 ASP.net 应用程序访问 UNC 路径，但是我收到文件被拒绝错误。

如果我在应用程序位于本地计算机上的地方尝试这个，它可以工作，如果我在部署应用程序的浏览器中运行它，它工作正常。

但是，当我尝试从我的机​​器访问该网站到我的 IIS 框，然后它又访问文件服务器时，我可以访问被拒绝错误。

我已经检查过 ASP.Net 实际上是像我一样冒充我，而且似乎是这样，但仍然存在错误。

我的文件服务器上的所有文件都可以访问“所有人”

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:49:21.710

如果我没记错的话，在这种情况下，Web 服务器 (IIS) 正在向不同计算机上的 UNC 共享发出请求，默认情况下它不会将您的身份验证令牌传递给具有 UNC 共享的服务器。您必须信任 IIS 服务器或应用程序池用户才能进行委派以使其正常工作。请参阅这篇关于委派的[Technet 文章。](http://technet.microsoft.com/en-us/library/cc739764%28v=ws.10%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:18:01.413

在我们的技术服务团队对此进行调查后，似乎部分原因是 Chrome/FF 没有正确发送 WinAuth，而且`IIS Windows Authenication -> Providers`设置是错误的：

应该 ：

```
Negotiaton
NTLM 
```

# grails - 插入后的 Grails 实体 ID

> ID：11120833
> 
> 赞同：2
> 
> 时间：2012-06-20T13:35:13.593
> 
> 标签：grails, grails-orm

这是一个很长的问题和我希望解决的奇怪问题。我的客户将一个 JSON 对象发布到我的服务器。我保存报告并在我的 jms 中使用为其他目的生成的 id，但是当我的添加成功时有时会得到空 id。我怎样才能防止这种情况？

在我的域中

```
int id
String reportImage
Date reportDateTime;
static constraints = {
    id(blank:false, unique:true) 
    reportImage (blank:true, nullable:true)
    reportDateTime (blank:false)
}
def afterInsert = {

    id= this.id

} 
```

在我的控制器中，我有

```
JSONObject json = request.JSON        
AddReportService svc = new AddReportService()        
def id= svc.addReport(json)
json.put("id",id)
jmsService.send(queue:'msg.new', json.toString()) 
```

在我的添加报告服务中，

```
JSONObject obj = report
Reports reports = new Reports()
       ...
reports.save(flush:true)
myid = reports.id
return myid 
```

在我的 jms 中，

```
def jmsService
static transactional = false
static exposes = ['jms']

@Queue(name='msg.new')    
def createMessage(msg) {
    JSONObject json = new JSONObject(msg)
    int id = json.get("id") // sometimes is null, but report was added. How to prevent?

    AlertManagement am = new AlertManagement()
    am.IsToSendAlert(id) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T14:41:29.877

如果插入后 id 为空，则几乎可以肯定意味着插入以某种方式失败。当您调用 时`reports.save()`，您应该添加`failOnError: true`或检查返回值。

对您的代码的一些评论：

*   您不需要在域对象中声明 id 属性，grails 会隐式添加一个（类型`long`）。
*   同样，id 约束是多余的。
*   `id = this.id`在处理程序中分配`afterInsert`什么都不做，也没有必要。GORM 确保在插入后正确设置域对象 ID。

此外，对象在 grails 中持久化的方式和时间并不总是那么简单，尤其是当您添加手动刷新和事务时。这是一个必须阅读以获得更好的理解：http: [//blog.springsource.com/2010/06/23/gorm-gotchas-part-1/](http://blog.springsource.com/2010/06/23/gorm-gotchas-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T13:44:39.547

您正在尝试覆盖 id 属性。一般 Groovy 域类有一个默认的 id 属性。所以不需要定义 id 属性。您可以访问 id 属性而不在域类中定义它。

**领域类**

```
class A {
    String reportImage
    Date reportDateTime

} 
```

**在服务类**

```
def instance=new A("xxx",new Date())
if(instance.save())
{
    return instance.id
} 
```

# qt - 为什么 QGraphicsScene::advance() 不重新绘制我的项目？

> ID：11120835
> 
> 赞同：1
> 
> 时间：2012-06-20T13:35:18.617
> 
> 标签：qt, qgraphicsview

我正在尝试在 QGraphicsView 中移动精灵。我用 ：

```
connect(timer, SIGNAL(timeout()), scene, SLOT(advance()));
timer->start(1000/33); 
```

但是我的精灵没有重新绘制。我必须做 alt-tab 来更新视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:44:41.620

> 在第一阶段，所有项目都被通知场景即将改变，在第二阶段，所有项目都被通知他们可以移动。

文档暗示这是一个场景项目的动画通知工具，它没有说明实际更新视图。您可能需要将`QTimer::timeout()`信号连接到`QGraphicsScene::update()`插槽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:39:22.357

与[此类似（QGraphicsScene 缺少特定项目更新）](https://stackoverflow.com/questions/11037837/qgraphicsscene-is-missing-a-particular-item-update/11119585#11119585)，您只需使场景中的对象无效，并让场景负责更新。

# hash - 将字符串散列成 RGB 颜色

> ID：11120840
> 
> 赞同：54
> 
> 时间：2012-06-20T13:35:42.847
> 
> 标签：hash, colors, language-agnostic

是否有关于如何将任意字符串散列为 RGB 颜色值的最佳实践？或者更笼统地说：到 3 个字节。

你在问：我什么时候需要这个？对我来说没关系，但想象一下任何 GitHub[网络页面](https://github.com/CocoaPods/Specs/network "CocoaPods/Specs 的网络页面")上的那些管图。在那里你可以看到这样的东西：

![git 分支](../Images/013006391f2856e3b966beec36a23bf3.png)

每条彩色线都表示一个不同的 git 分支。为这些分支着色的低技术方法是 CLUT（颜色查找表）。更复杂的版本是：

```
$branchColor = hashStringToColor(concat($username,$branchname)); 
```

因为每次看到分支表示时都需要静态颜色。对于奖励积分：您如何确保该哈希函数的颜色分布均匀？

所以我的问题的答案归结为`hashStringToColor()`.

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-20T13:46:23.797

一个好的散列函数将在密钥空间上提供近乎均匀的分布。这减少了如何将随机 32 位数字转换为 3 字节 RGB 空间的问题。我认为只取低 3 个字节没有任何问题。

```
int hash = string.getHashCode();
int r = (hash & 0xFF0000) >> 16;
int g = (hash & 0x00FF00) >> 8;
int b = hash & 0x0000FF; 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-05-14T01:06:09.857

对于那里的任何 Javascript 用户，我将@jeff-foster 接受的答案与[erlycoder](http://erlycoder.com/49/javascript-hash-functions-to-convert-string-into-integer-hash-)`djb2`的哈希函数结合起来。

每个问题的结果：

```
function djb2(str){
  var hash = 5381;
  for (var i = 0; i < str.length; i++) {
    hash = ((hash << 5) + hash) + str.charCodeAt(i); /* hash * 33 + c */
  }
  return hash;
}

function hashStringToColor(str) {
  var hash = djb2(str);
  var r = (hash & 0xFF0000) >> 16;
  var g = (hash & 0x00FF00) >> 8;
  var b = hash & 0x0000FF;
  return "#" + ("0" + r.toString(16)).substr(-2) + ("0" + g.toString(16)).substr(-2) + ("0" + b.toString(16)).substr(-2);
} 
```

**更新**：修复了返回字符串以始终根据@alexc 的编辑返回一个#000000 格式的十六进制字符串（谢谢！）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-02-12T15:03:12.750

我只是构建了一个名为 color-hash 的 JavaScript 库，它可以根据给定的字符串生成颜色（使用 HSL 颜色空间和 BKDRHash）。

回购：[https](https://github.com/zenozeng/color-hash)
://github.com/zenozeng/color-hash 演示：[https ://zenozeng.github.io/color-hash/demo/](https://zenozeng.github.io/color-hash/demo/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-11-20T23:15:38.587

我尝试了其他人提供的所有解决方案，但发现相似的字符串（string1 vs string2）产生的颜色与我的喜好过于相似。因此，我在他人的输入和想法的影响下建立了自己的。

这将计算字符串的 MD5 校验和，并取前 6 个十六进制数字来定义 RGB 24 位代码。

MD5功能是一个开源的JQuery插件。JS功能如下：

```
function getRGB(str) {
    return '#' + $.md5(str).substring(0, 6);
} 
```

此工作示例的链接位于[jsFiddle](http://jsfiddle.net/rkophs/hdM8y/16/)上。只需在输入字段中输入一个字符串并按 Enter，然后一遍又一遍地执行此操作以比较您的发现。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T13:40:45.957

例如，[这是 Java 计算字符串哈希码的方式](http://www.docjar.com/html/api/java/lang/String.java.html)（第 1494 行及以下）。它返回一个`int`. 然后，您可以`int`用 16,777,216（2^24 = 3 个字节）计算它的模，以获得“RGB 兼容”数字。

这是一种确定性计算，因此相同的单词将始终具有相同的颜色。哈希冲突的可能性（2 个相同颜色的字符串）很小。不确定颜色分布，但可能相当随机。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-11T16:19:41.117

## 如果您使用 C# 并想要 HSL 颜色

这是我根据Zeno Zeng 编写的[库编写的课程，并在此](https://github.com/zenozeng/color-hash)[答案](https://stackoverflow.com/a/28480819/740639)中提到。

HSLColor 类是 Rich Newman 编写的，[在这里定义](https://richnewman.wordpress.com/about/code-listings-and-diagrams/hslcolor-class/)

```
 public class ColorHash
    {        

        // you can pass in a string hashing function of you choice
        public ColorHash(Func<string, int> hashFunction)
        {
            this.hashFunction = hashFunction;
        }

        // or use the default string.GetHashCode()
        public ColorHash()
        {
            this.hashFunction = (string s) => { return s.GetHashCode(); };
        }

        Func<string, int> hashFunction = null;

        static float[] defaultValues = new float[] { 0.35F, 0.5F, 0.65F };

        // HSLColor class is defined at https://richnewman.wordpress.com/about/code-listings-and-diagrams/hslcolor-class/
        public HSLColor HSL(string s) {
            return HSL(s, defaultValues, defaultValues);
        }

        // HSL function ported from https://github.com/zenozeng/color-hash/       
        public HSLColor HSL(string s, float[] saturationValues, float[] lightnessValues)
        {

            double hue;
            double saturation;
            double luminosity;

            int hash = Math.Abs(this.hashFunction(s));

            hue = hash % 359;

            hash = (int)Math.Ceiling((double)hash / 360);
            saturation = saturationValues[hash % saturationValues.Length];

            hash = (int)Math.Ceiling((double)hash / saturationValues.Length);
            luminosity = lightnessValues[hash % lightnessValues.Length];

            return new HSLColor(hue, saturation, luminosity);
        }

    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-20T20:13:39.757

有趣的是，像 sha256 或 md5 这样的散列函数的常见表示形式是十六​​进制字符串。这是一个小提琴，它使用 10 个 6 字节的段来创建一个 sha256 哈希的彩色表示。它使用最后 4 字节段来确定颜色的角度。

[https://jsfiddle.net/ypx4mtnr/4/](https://jsfiddle.net/ypx4mtnr/4/)

```
async function sha256(message) ... see fiddle ... 
```

```
 async function sha256(message) {
    // encode as UTF-8
    const msgBuffer = new TextEncoder().encode(message);                    

    // hash the message
    const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);

    // convert ArrayBuffer to Array
    const hashArray = Array.from(new Uint8Array(hashBuffer));

    // convert bytes to hex string                  
    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    return hashHex;
   }  
   function sha256tohtml(x,b){
var y=chunkSubstr(x,6);
return '<div style="'+
    'display: inline-block;'+
    'margin:2em;'+
    'width:128px;'+
    'height:128px;'+
    'border-radius: 512px;'+
    'background: conic-gradient('+
    '   from '+((360/65536)*parseInt(y[10],16))+'deg at 50% 50%,'+
    '   #'+y[0]+' '+(0+b)+'%,'+
    '   #'+y[0]+' 10%,'+
    '   #'+y[1]+' '+(10+b)+'%,'+
    '   #'+y[1]+' 20%,'+
    '   #'+y[2]+' '+(20+b)+'%,'+
    '   #'+y[2]+' 30%,'+
    '   #'+y[3]+' '+(30+b)+'%,'+
    '   #'+y[3]+' 40%,'+
    '   #'+y[4]+' '+(40+b)+'%,'+
    '   #'+y[4]+' 50%,'+
    '   #'+y[5]+' '+(50+b)+'%,'+
    '   #'+y[5]+' 60%,'+
    '   #'+y[6]+' '+(60+b)+'%,'+
    '   #'+y[6]+' 70%,'+
    '   #'+y[7]+' '+(70+b)+'%,'+
    '   #'+y[7]+' 80%,'+
    '   #'+y[8]+' '+(80+b)+'%,'+
    '   #'+y[8]+' 90%,'+
    '   #'+y[9]+' '+(90+b)+'%,'+
    '   #'+y[9]+' 100%);"></div>';
  }
   function chunkSubstr(str, size) {
  const numChunks = Math.ceil(str.length / size)
  const chunks = new Array(numChunks)

  for (let i = 0, o = 0; i < numChunks; ++i, o += size) {
    chunks[i] = str.substr(o, size)
  }

  return chunks
}
   function draw(x){
    sha256(x).then((x)=>{
        var html=sha256tohtml(x,0);
            document.getElementById('addhere').innerHTML=html;
        });
   }
   window.onload=function(){
    document.getElementById('sha256string').oninput=function(){draw(this.value);}
        draw(document.getElementById('sha256string').value)
}
```

```
<html>
<input id="sha256string" value="Hello World">
 <div id="addhere"></div>
</html>
```

# c# - 每当 ObservableCollection 中任何项目的某个字段发生更改时，如何获得通知？

> ID：11120841
> 
> 赞同：0
> 
> 时间：2012-06-20T13:35:45.533
> 
> 标签：c#, windows-phone-7, observablecollection, propertychanged

```
public ObservableCollection<Activity> activities = 
    new ObservableCollection<Activity> { };

public class Activity{
    public ObservableCollection<Event> Events { get; set; }
}

public class Event : INotifyPropertyChanged
{
    private int _Status;
    public int Status
    {
        get { return _Status; }
        set 
        {
            _Status = value;
            OnPropertyChanged("Status");
        } 
    }
} 
```

假设`Status`an 的属性发生了`Event`变化。`OnPropertyChanged("Status")`会叫，对吧？

但我希望该收藏`activities`也能收到有关此`Event`更改的通知。

有什么办法吗？？

**尝试恢复：** 上面描述了这种情况。想象一下某个事件的一些变化。我需要将包含此事件的父活动的集合活动通知此更改......所以我可以调用一个方法来更新显示在我的界面某个位置的事件。而在这个界面中只是可见的活动集合。

*正因为如此，还必须通知集合。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:09:19.483

我解决了这个问题，只是创建了一个静态动作：

```
public class Event{
    public static Action OnChanged;
} 
```

基本上，每当我需要根据某些事件更改进行一些更改时，我都会调用它。

```
 private StatusMode _Status;
    [DataMember(Name = "Status")]
    public StatusMode Status
    {
        get { return _Status; }
        set 
        {
            _Status = value;
            OnPropertyChanged("Status");
            if (OnChanged != null)
            {
                OnChanged();
            }
        } 
    } 
```

使用：

```
Event.OnChanged = UpdateContent;

public void UpdateContent()
{
//do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:38:56.813

您不 - .net 集合不关心其中项目的更改，只关心集合中的更改。

收听集合中事件的人必须在他感兴趣的项目上订阅/取消订阅 PropertyChanged。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:07:03.243

这是一种痛苦，并且没有任何内置功能可以为您做到这一点。

当我需要这样做时，我只是订阅了 ObservableCollection 的 CollectionChanged 事件，并手动管理我对包含项目的 PropertyChanged 事件的订阅和退订。请注意，取消订阅已删除的项目很重要！否则，您可能会因事件订阅停止对已删除项目的垃圾收集而陷入困境。

我想可以构建一个包装器或您自己的集合类，它们将围绕一个集合并调解添加/删除，以便订阅/取消订阅属性更改事件。这似乎不值得努力。

至于为什么要这样做，最基本的例子是您有一组可变的项目，您需要知道该集合是否脏/需要保存。如果您的保存操作对整个系列都进行，那么必须观看所有项目感觉就像是错误的事情。我敢肯定，这似乎是一种更清洁的解决方案，还有其他原因。

# php - 将下拉选择中的行值存储在数组中

> ID：11120844
> 
> 赞同：0
> 
> 时间：2012-06-20T13:35:54.300
> 
> 标签：php, mysql, arrays

当在下拉列表中进行选择时，我想存储表中的所有行值（可能在数组中？），以便我可以通过列名从所选行中检索任何值。

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"> 
<label for="select"><select name="id" value="Select" size="1" onChange="this.form.submit()"> 
<?php 
$sql = "SELECT * FROM matningar WHERE matningstyp ='odb'";  
$result = mysql_query($sql) or die (mysql_error());  
while ($row = mysql_fetch_array($result)) 
{ 
        $namn=$row["namn"]; 
        $foretag=$row["foretag"];  
        $options.="<OPTION VALUE=\"$foretag\">".$namn; 
} 
?> 
        <option>
        <? echo $options ?>
        </option>
    </select>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:44:30.070

你的代码应该是这样的

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"> 
<label for="your_select"><select id="your_select" name="id" onChange="this.form.submit()"> 
<?php 
$sql = "SELECT * FROM matningar WHERE matningstyp ='odb'";  
$result = mysql_query($sql) or die (mysql_error());  
while ($row = mysql_fetch_array($result)) 
{ 
        $namn=$row["namn"]; 
        $foretag=$row["foretag"];  
        $options.="<OPTION VALUE=\"$foretag\">".$namn.'</option>';
} 
?> 
        <? echo $options ?>
    </select>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:38:24.187

再次检查您的代码，我认为您犯了一些错误。

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"> 
    <label for="select">
    <select name="id">
           <?php 
                  $sql = "SELECT * FROM matningar WHERE matningstyp ='odb'";  
                  $result = mysql_query($sql) or die (mysql_error());  
                  while ($row = mysql_fetch_array($result)) { 
                          echo "<option value='".$row['foretag']."'>".$row['namn']."</option>";
                  } 
           ?> 
    </select>
</form> 
```

它更短更高效。

# python - 如何在python中将一个数组的一个元素与另一个数组中的另一个元素进行数值比较

> ID：11120850
> 
> 赞同：0
> 
> 时间：2012-06-20T13:36:22.153
> 
> 标签：python

我是 python 新手，为两个制表符分隔的输入文件创建了两个数组。我正在寻找一种方法来将一个数组的列（元素）与另一个数组的元素进行数字比较。有没有办法做到这一点。到目前为止，我的代码如下

```
#!/usr/bin/python
import sys
from array import *
#print len(sys.argv)
if len(sys.argv) != 4:
 print 'Usage: python scores.py <infile1> <infile2> <outfile>'
 sys.exit(1)

f1 = open ("12877overlappedallvariants.gvf", "r")
f2 = open ("unmatched.12877overlappedallvariants.gvf", "r")
f3 = open ("out.txt", "w")

for line in f1.readlines():
 cols = line.split('\t')
 #print cols[5:6]

for line in f2.readlines():
 cols1 = line.split('\t')
 #print cols1[5:6] 
```

我尝试了下面的代码部分，但不起作用

```
slice1 = cols[5:6]
slice2 = cols1[5:6]
new_list = []
for element in slice1:
 if element in slice2:
  new_list.append(element)
  print new_list 
```

我正在尝试查看 array1 的元素 5 是否等于、大于或小于 array2 的元素 5。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:44:57.360

值得注意的是，这些是列表，而不是数组。它们是有区别的。

每次循环时都会覆盖`cols`- 这意味着您只会获得最后一行数据 - 列表理解是为了在这里获取您想要的所有数据，或者更好的是，根本不存储数据 - 执行你想要的操作就可以了。

您比较的主要问题是您正在获取列表切片，而不仅仅是获取您需要的元素。这使您尝试做的事情过于复杂。

因此，正如我在评论中提到的，您可以对初始代码进行很多改进——主要是`with`语句和`csv`模块。

所以首先，使用`with`语句打开你的文件。我们`csv.reader()`也使用`"excel-tab"`方言，因为它是一个制表符分隔的文件，并`csv.QUOTE_NONNUMERIC`告诉它值是数字，所以我们以后不必将它们从字符串转换。请注意，如果只有某些值是数字，您要么需要引用所有非数字值才能使用此方法，要么显式转换这些值而不使用它。

```
with open("file1.tsv") as file1, open("file2.tsv") as file2:
    rows = csv.reader(file2, dialect="excel-tab", quoting=csv.QUOTE_NONNUMERIC)
    rows1 = csv.reader(file2, dialect="excel-tab", quoting=csv.QUOTE_NONNUMERIC) 
```

要执行您的检查，只需执行以下操作（从`with`上面的块中继续）：

```
 for cols, cols1 in zip(rows, rows1): #Use itertools.izip() in 2.x for efficiency.
        first = cols[4]
        second = cols1[4]

        if first < second:
            ...
        elif first == second:
            ...
        else: #first > second
            ... 
```

请注意使用 zip 一次循环遍历两个文件。我们需要遍历文件，因为它们一次返回一行，每一行是每一列的数据列表。然后，您可以随心所欲地处理数据。我已经给出了一个比较第五个值的例子（注意索引`4`- python 被`0`索引 - 即第一个值是`0`，所以第五个是`4`）。

通过在遍历文件时执行所有这些操作，我们确保不必创建列表并临时存储数据——如果我们最终处理大文件，这很有用。

如果您稍后需要使用该数据，并且希望将其作为一个列表，您可以简单地创建两个`rows`对象列表，方法是`list()`在`csv.reader()`s.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:50:42.410

您需要注意几件事——首先，在读取文件后，您只存储了最后一行（在一个名为“cols”的变量中，不少于；）。像这样的循环：

```
lines1=f1.readlines()
lines2=f2.readlines()

for f1line,f2line in zip(lines1,lines2):
    #compare here 
```

可能更合适。这会将两个文件的全部内容读入内存——当然有一些方法可以做到这一点，而无需一次读取那么多数据，但有时这是最简单的。 `zip`可能有点混乱，但基本上，它将 file1 的第一行与 file2 的第一行匹配，然后是两个文件的第二行，依此类推......

正如@Lattyware 的评论中所指出的，上述内容等同于：

```
for f1line,f2line in zip(f1,f2):
    #compare here 
```

因为文件可以被迭代。在 python 2 中，它仍然会同时读取/存储两个文件，但在 python 3 中，它一次只会产生一行。最后，如果您不想将文件的所有内容存储在 python 2 中，您可以使用`itertools.izip`

```
import itertools
for f1line,f2line in itertools.izip(f1,f2):
    #compare here 
```

它的工作原理与它一样`zip`，只是它一次产生一个元素。这里的缺点是`itertools.izip`当您迁移到 python 3 时它会消失......但是，在这种情况下，`2to3`应该进行适当的转换。（有关更多信息，请参阅评论）。

至于比较，这在很大程度上取决于文件包含的内容。如果它包含数字，你可以这样做......

```
 for f1line,f2line in zip(lines1,lines2):
     row1=map(float,f1line.split())
     row2=map(float,f2line.split())
     #compare the 5th element
     if(row1[4]==row2[4]):
         #equal
     elif(row1[4]>row2[4]):
         ... 
```

如果你没有这个`map(float,...)`位，python 会做一个字符串比较。

python 还具有[cmp 函数](http://docs.python.org/library/functions.html#cmp)，如果您想现在比较并稍后使用比较结果，这可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:50:45.577

我会这样写：

```
import csv

file1 = csv.reader(open('name1'), delimiter='\t')
file2 = csv.reader(open('name2'), delimiter='\t')

for row1, row2 in zip(file1, file2):
    print cmp(row1[5], row2[5]) 
```

`

cmp 为 lt 返回 -1，为 eq 返回 0，或为 gt 返回 1

**如果 row?[5] 是数字，那么...**

```
print cmp(float(row1[5]), float(row2[5])) # or int, or any other dtype 
```

# intellij-idea - 如何在 IntelliJ 中转到下一个/上一个突出显示的成员？

> ID：11120851
> 
> 赞同：1
> 
> 时间：2012-06-20T13:36:30.687
> 
> 标签：intellij-idea

当您在代码中的成员/方法上设置插入符号时，您会突出显示所有出现的地方，浏览它们的快捷方式是什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:43:57.027

`Edit`| `Find`| **查找下一个**和**查找上一个**（Windows 键盘映射上的`F3`/ `Shift`+ ）。`F3`请注意，您需要首先明确突出显示出现的情况（`Edit`| `Find`| **Highlight Usages in File**）。

# android - 如何在我的 android 应用程序中登录 google 以使用 C2DM？

> ID：11120854
> 
> 赞同：1
> 
> 时间：2012-06-20T13:36:50.120
> 
> 标签：android, android-c2dm

我正在尝试使用谷歌的 C2DM 服务，但是当我尝试发送 RegistrationIntent 时我卡住了。错误是：“AuthTokenCallBack：帐户丢失”。

所以，在谷歌上搜索，我找到了我没有登录谷歌的答案。我想知道：

1）如何以“后台模式”登录谷歌？2) 是使用 OAuth2.0 的唯一方法吗？3) 使用一个帐户和多个设备，我可以向一个特定设备发送消息吗？4）我是android开发的菜鸟，你知道任何教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:52:46.480

4）[在这里](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)你可以找到一个关于c2dm的好教程。

3) 如果您在发送注册 ID 时获得设备 ID 并将其发送到您的服务器，您可以将这些值保存在您的数据库中，主键为“设备 ID”。因此，您可以通过这种方式向特定设备发送消息。

在这里如何获取设备ID，

```
final String registrationId = intent.getStringExtra("registration_id");
final String deviceId = Secure.getString(context.getContentResolver(), Secure.ANDROID_ID);
    ` 
```

# eclipse - ManagedBuildManager CDT 导入

> ID：11120856
> 
> 赞同：0
> 
> 时间：2012-06-20T13:36:58.470
> 
> 标签：eclipse, eclipse-cdt

我需要使用 ManagedBuildManager 但我的 Eclipse 没有看到它。它的导入声明是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:29:18.133

我自己解决了这个问题。我需要获取包含 ManagedBuildManager 的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T10:53:14.560

你必须添加

```
org.eclipse.cdt.managedbuilder.core,
org.eclipse.cdt.core 
```

到 MANIFEST.MF，Require-Bundle 部分。在 plugin.xml 和 MANIFEST.MF 的 Eclipse UI 编辑器中，可以在“依赖项”选项卡的“必需插件”部分中找到此设置。

# jquery - 调整 json 以便谷歌可视化将在 getjson 上执行

> ID：11120859
> 
> 赞同：1
> 
> 时间：2012-06-20T13:37:03.757
> 
> 标签：jquery, json, google-visualization

我有一个json响应，例如：

```
{ "total": 2, "success": true, "rows": [ {"a1_id":"7847TK10", "output2":"7847TK10", etc. 
etc} ]} 
```

现在我的谷歌可视化（饼图）代码只有在以下情况下才能很好地执行：

```
<script type="text/javascript">

// load visualization library
google.load('visualization', '1', {packages: ['corechart']});

$(function() { 
     // when document loads, grab the json
     $.getJSON('regiontop11.json', function(data) {
         // once grabbed, we run this callback

         // setup the new map and its variables
         var map = new google.visualization.DataTable();
             map.addRows(data.length);  
             map.addColumn('string', 'outputsix');
         map.addColumn('number', 'outputnine');

         // now we need to build the map data, loop over each result
         $.each(data, function(i,v) {
             // set the values for both the name and the population
             map.setValue(i, 0, v.output6);
             map.setValue(i, 1, v.output9);
         });
         // finally, create the map!
         var chart = new google.visualization.PieChart(
           document.getElementById('visualization'));
              chart.draw(map, null);

     });
});

</script> 
```

....我将我的 json 调整为：

```
[ {"a1_id":"7847TK10", "output2":"7847TK10", etc. etc} ] 
```

问题是我无法调整 json.php 本身，因为扩展（见上文）输出对于其他应用程序是必需的。所以只是跳过 { "total": 2, "success": true, "rows": 它的一部分是没有选择的。两个版本都是有效的 Json。我可以在我的浏览器-Pie Code- 中使用例如 JQuery 做一些事情吗？解决方案非常受欢迎！

问候彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:34:53.403

在将其用于 DataTable 之前，您可以从 JSON 信封中提取您需要的内容。

如果响应是这样的：

```
{
  "total": 2,
  "success": true,
  "rows": [{
      "a1_id": "7847TK10",
      "output2": "7847TK10",
      etc.
      etc
  }]
} 
```

然后你可以像这样得到你想要的：

```
 $.getJSON('regiontop11.json', function(data) {

     var rows = data.rows;

     var map = new google.visualization.DataTable();
     map.addRows(rows.length);  
     map.addColumn('string', 'outputsix');
     map.addColumn('number', 'outputnine');
     ...
     $.each(rows, function(i,v) {
     ... 
```

# javascript - 在 JavaScript 数组中存储值

> ID：11120862
> 
> 赞同：1
> 
> 时间：2012-06-20T13:37:36.390
> 
> 标签：javascript, javascript-events

我正在定义一个 javascript 数组，它将保存被点击的复选框的行号和列号，如果选中了复选框，我会将行号和列号的值分配为 1，否则我将输入 0

我需要根据复选框的选中和取消选中进行一些操作，并将 1,0 存储在 DB 中。

这就是我想要做的。

```
var sampleArray=new Array();

function setAll(column, value) {

        var i, n = column.length;
        for (i = 0; i <= n; ++i) {
            column[i] = value;
        }
      }

if (//some condition){
    if(cell is checked)
        setAll(sampleArray,1); // here i am calling a function and setting the value in index to 1;
    } else if (cell is unchecked)
    {
        setAll(sampleArray,0);
    } 
```

上面代码的问题是它没有存储所有操作的值（选中和取消选中）。

有人可以帮我解决这个问题吗？是否可以在 javascript 中创建 hashmap 类型的函数？

```
H<key, value> 
```

其中 key 是 col no 和 row no，value 是 0 或 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:42:49.857

```
function setAll(column, value) {

    var i, n = column.length;
    for (i = 0; i <= n; ++i) {
        column[i] = value;
    }
return (column)
  }

if (//some condition){
if(cell is checked)
   sampleArray= setAll(sampleArray,1); // here i am calling a function and setting the value in index to 1;
} else if (cell is unchecked)
{
    sampleArray= setAll(sampleArray,0);
} 
```

或者如果你想使用全局变量

```
function setAll(value) {

    var i, n = sampleArray.length;
    for (i = 0; i <= n; ++i) {
        sampleArray[i] = value;
    }
  }

if (//some condition){
if(cell is checked)
setAll(1); // here i am calling a function and setting the value in index to 1;
} else if (cell is unchecked)
{
    setAll(0);
} 
```

为了检查复选框是否被选中，请查看[Javascript 以检查复选框是否被选中或未选中](https://stackoverflow.com/questions/473562/javascript-to-check-whether-a-checkbox-is-being-checked-or-unchecked)

# c# - 以编程方式将样式添加到表格行

> ID：11120864
> 
> 赞同：0
> 
> 时间：2012-06-20T13:37:42.327
> 
> 标签：c#, asp.net, html, css

我正在尝试将样式添加到 C# 代码中的表格行。但是，尽管看起来很简单，但我找不到正确的方法。我的表的代码是

```
<table width="100%" style="vertical-align:top; height:170px;" border="0" cellspacing="0" cellpadding="0"> 

    <tr id="trTasks" runat="server" onmouseover="this.bgColor='#eaeaea';" onmouseout="this.bgColor='#FFFFFF';" bgcolor="#FFFFFF"/>

</table> 
```

当条件已满时，我想为 trTasks 设置不同的背景颜色。我试过这样做：

```
trCompletedTasks.Attributes.Add("CssClass", "SelectedItem"); 
```

和

```
trCompletedTasks.Style.Add("CssClass", "SelectedItem"); 
```

但这些似乎都不起作用。

任何建议将不胜感激。非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:40:23.533

HTML 属性名为`class`：

```
trCompletedTasks.Attributes.Add("class", "SelectedItem"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:47:47.357

如果您只是想在鼠标悬停时让一行更改颜色，所有现代浏览器都会让您只使用 CSS 而不是在服务器端完成此操作。只需为 定义具有所需背景颜色的样式，就可以了`.yourtable tr:hover`。

在此处查看示例：http: [//jsfiddle.net/Vdy6q/](http://jsfiddle.net/Vdy6q/)。

# c++ - c++ linux监控sigsegv的进程

> ID：11120865
> 
> 赞同：3
> 
> 时间：2012-06-20T13:37:48.107
> 
> 标签：c++, linux, segmentation-fault

我想为 linux 编写一个 c++ 程序，它监视所有正在运行的进程并在任何这些进程由于 sigsegv 崩溃时写入日志文件。

是否有可能做到这一点，如果可以，我应该学习什么才能在 C++ 中实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:58:50.047

试图监视系统上的所有进程将是繁重的。如果您特别对 SIGSEGV 感兴趣，您可能需要考虑将自己安装为核心转储处理程序。它不会捕获已要求禁用核心转储的进程 ( `ulimit -c 0`)，但您会得到所有其他进程。

```
echo "|usr/local/sbin/crashcollector" >/proc/sys/kernel/core_pattern 
```

Now`/usr/local/sbin/crashcollector`将在每次进程崩溃时在其标准输入上调用核心转储。该程序可以做它想做的任何事情，例如保存核心转储和/或通知其他内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T14:07:04.130

我希望你能捕捉到所有进程的崩溃事件。使用 ptrace 是一种方法，但它非常复杂，您需要跟踪所有进程并附加到以后创建的新进程，而且您会遇到性能损失。

您可以通过 hook 捕获所有进程崩溃事件[`coredump`](https://www.kernel.org/doc/man-pages/online/pages/man5/core.5.html)：

```
echo "|yourcoredumphook" > /proc/sys/kernel/core_pattern 
```

这将启用 coredump 钩子，当进程终止时，`yourcoredumphook`将以 root 身份启动，并通过 stdin 发送 coredump，因此您可以通过分析 coredump 来确定哪个进程终止

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:49:45.530

你可能想用`ptrace`这个。看看这个问题： [如何拦截linux信号？（在 C 中）](https://stackoverflow.com/questions/1935537/how-to-intercept-linux-signals-in-c)

我想对*所有*进程执行此操作将需要重新实现 init，或者可能需要一个监视 sys 目录以调用`ptrace`每个进程的系统。

# java - 什么时候适合导入包？

> ID：11120868
> 
> 赞同：2
> 
> 时间：2012-06-20T13:37:57.123
> 
> 标签：java, import

*注意：我意识到这可能是一个开放式问题，所以如果您觉得这不属于或没有任何价值，请继续标记删除。*

我已经很长时间没有使用 Java（或真正的编程）了，我的大部分时间都花在学习实际应用程序（特别是 Android）上。因此，我意识到在概念问题上我非常落后。

我的问题是：什么时候适合使用该`import 'package name';`语句而不是简单地使用完全限定的类名？

我已经看过示例代码，其中编码人员决定使用`android.widget.Button`vs. 之后对每个实例进行调用`import android.widget.Button`和使用`Button`。我目前正在编写代码，我知道我只会使用某个类一次，我觉得使用`import`语句是一种浪费。

任何关于何时应该使用`import`语句与使用完全限定名称的指南将不胜感激。我不是在寻找一个明确的答案，只是一些有用的提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T13:41:31.333

解决方案很简单：如果您必须在同一个类中使用 1 个以上的**类**（**显然**`Button`，每个类都在自己的包中），则使用完全限定名称。否则，导入您需要的唯一类。****`Button`****

 ****通常，包导入是首选，因为它带来了更清晰的代码，并且它使编译器知道要预先编译哪个类（包）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:46:39.087

有三个明显的原因。

1.  它使您的代码简洁明了。
2.  如果您在一个包中使用许多类，那么导入整个包是有意义的。
3.  您的导入语句是类的元数据，它声明了类对外部世界的依赖关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:41:45.890

使用`import`是一个方便的问题。在代码中只使用类名更好的可读性（而且要输入的字符也更少！;-)）

此外，工具（如 Eclipse）将为您组织导入，并仅根据类名建议要从中导入的包。

至于在代码中使用完全限定的类名 - 如果您对类名（例如， class和）有*冲突*并且您需要在代码中明确指出您正在使用哪个类，这很有用（实际上是*必须*的） . 但是，即使在这种情况下，您也可以导入其中一个类（更常用的一个）并显式键入另一个。*`my.components.Button``android.widget.Button`*

 ** * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-20T13:41:26.207

始终使用导入，没有理由不使用，您将获得更清晰的代码。*****

# asp.net-mvc - 如何在 MVC 4 Web Api 中接收 XmlDocument？

> ID：11120872
> 
> 赞同：2
> 
> 时间：2012-06-20T13:38:16.047
> 
> 标签：asp.net-mvc, api, web, xmldocument

我将 XmlDocument 发布到 ApiController （来自 Windows 服务，服务工作正常，发布正确，我在 wcf web api 中使用它），但 xml 始终为空，我做错了什么？我可以发布一些课程，例如教程，或者获取任何数据，一切都会好起来的，但我不能发布 XmlDocument。

```
public class XmlController : ApiController
{
    public void PostXml(XmlDocument xml)
    {
       // code
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:11:02.497

我遵循@Rhot给出的解决方案，但不知何故它不起作用，所以我编辑如下对我有用的：

```
public class XmlMediaTypeFormatter : MediaTypeFormatter
    {
        public XmlMediaTypeFormatter()
        {
            SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/xml"));
        }

        public override bool CanReadType(Type type)
        {
            return type == typeof(XDocument);
        }

        public override bool CanWriteType(Type type)
        {
            return type == typeof(XDocument);
        }

        public override Task<object> ReadFromStreamAsync(Type type, Stream stream, HttpContent content, IFormatterLogger formatterLogger)
        {
            var reader = new StreamReader(stream);
            string value = reader.ReadToEnd();            

            var tcs = new TaskCompletionSource<object>();
            try
            {
                var xmlDoc = XDocument.Parse(value);
                tcs.SetResult(xmlDoc);
            }
            catch (Exception ex)
            {
                //disable the exception and create custome error
                //tcs.SetException(ex);
                var xml = new XDocument(
                    new XElement("Error",
                        new XElement("Message", "An error has occurred."),
                        new XElement("ExceptionMessage", ex.Message)
                ));

                tcs.SetResult(xml);
            }

            return tcs.Task;
        }

        public override Task WriteToStreamAsync(Type type, object value, Stream stream, HttpContent content, TransportContext transportContext)
        {
            var writer = new StreamWriter(stream);
            writer.Write(((XDocument)value).ToString());
            writer.Flush();

            var tcs = new TaskCompletionSource<object>();
            tcs.SetResult(null);
            return tcs.Task;
        }              
    } 
```

注册到 global.asax：

```
GlobalConfiguration.Configuration.Formatters.Insert(0, new XmlMediaTypeFormatter()); 
```

在我的 WebAPI 控制器下方：

```
public HttpResponseMessage Post(XDocument xml)
        {            
            return Request.CreateResponse(HttpStatusCode.OK, xml);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:48:28.677

我找到了一个解决方案：

我们需要使用继承来继承MediaTypeFormatter

```
public class XmlMediaTypeFormatter : MediaTypeFormatter
{
    public XmlMediaTypeFormatter()
    {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));      
    }

    public override System.Threading.Tasks.Task<object> ReadFromStreamAsync(Type type, Stream stream,
         HttpContentHeaders contentHeaders,
         IFormatterLogger formatterLogger)
    {
        var taskCompletionSource = new TaskCompletionSource<object>();
        try
        {
            var memoryStream = new MemoryStream();
            stream.CopyTo(memoryStream);
            var s = System.Text.Encoding.UTF8.GetString(memoryStream.ToArray());

            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.LoadXml(s);

            taskCompletionSource.SetResult(xmlDoc);
        }
        catch (Exception e)
        {
            taskCompletionSource.SetException(e);
        }
        return taskCompletionSource.Task;
    }

    public override bool CanReadType(Type type)
    {
        return type == typeof(XmlDocument);
    }

    public override bool CanWriteType(Type type)
    {
        return false;
    }
} 
```

然后在 Global.asax 中注册：

```
GlobalConfiguration.Configuration.Formatters.Insert(0, new XmlMediaTypeFormatter()); 
```

控制器：

```
public HttpResponseMessage PostXml([FromBody] XmlDocument xml)
    {//code...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T17:04:42.113

`PostXml`应该是控制器上的动作吗？如果是这样，您应该将控制器操作标记为接受 HttpPost。从那里我将修改操作，如下所示：

```
[HttpPost]
public ActionResult PostXml(HttpPostedFileBase xml)
{
    // code
} 
```

如果您仍然无法接受发布的文件，请启动调试器并检查请求文件集合：http: [//msdn.microsoft.com/en-us/library/system.web.httprequest.files.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.files.aspx)

# c# - ASP.NET 移动网站使用远程数据库？

> ID：11120878
> 
> 赞同：1
> 
> 时间：2012-06-20T13:38:33.877
> 
> 标签：c#, asp.net, mobile

![在此处输入图像描述](../Images/6ac73159c6d773b9840015beb570ecd1.png)

我的场景如下图所示。我有一个位于客户场所的数据库。它通过 Internet 连接到远程 Web 服务器。我必须开发一个可以在该数据库中操作数据（插入、删除...等）的移动网站。

这样做的最佳方法是什么？我必须使用网络服务吗？（我对 Web 服务的了解有限）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:42:36.327

不，您不必*使用*网络服务。

这种情况与托管在内部 LAN 上的数据库服务器没有什么不同——您只需使用完全限定的域在连接字符串中对其进行寻址。

例如：

```
<connectionStrings>
    <add name="myConnection" connectionString="data source=sqlserver101.databasehost.com;user id=admin;password=admin;initial catalog=myDatabase;" providerName="System.Data.SqlClient" />    
</connectionStrings> 
```

唯一的区别是，您需要有更多的安全意识，让数据库服务器暴露在互联网上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:47:09.807

Web 服务类型的解决方案是显而易见的选择，但不一定是 Microsoft 所称的 Web 服务（即 .Net Web 服务），您只需要一种从 Web 服务器传入和传出数据的方法，移动设备可以使用的方法支持。您应该查看用于将客户端连接到 Web 服务器的技术，也许可以重复使用。我正在用 WCF [WCF做类似的事情](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)

# android - Android - EditText 多行强制填充高度

> ID：11120879
> 
> 赞同：5
> 
> 时间：2012-06-20T13:38:35.813
> 
> 标签：android, android-edittext, scrollview, multiline, fill-parent

我需要一个 EditText 来填充我的窗口高度。我正在使用这个：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:fillViewport="true" >

<EditText
    android:id="@+id/text_editor"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:background="#ff0000"
    android:gravity="top|left"
    android:inputType="textMultiLine"
    android:textColor="@android:color/white" />

</ScrollView> 
```

但我得到的只是一行 EditText，一旦我在多行输入返回按钮时写了一些东西，它就会更长且可滚动。我知道我可以设置行号，但在这种情况下，它应该在不同的设备上工作，并且每个设备（我猜）都有不同数量的行。

如何强制它填充设备的高度？

有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:47:40.973

尝试使用（不带 ScrollView）：

```
<EditText
    android:id="@+id/text_editor"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:background="#ff0000"
    android:gravity="top|left"
    android:textColor="@android:color/white" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T14:07:28.810

尝试为 EditText 设置这个，我有同样的事情，这会工作。

```
<EditText
android:id="@+id/text_editor"
android:layout_width="match_parent"
**android:layout_height="wrap_content"**
android:background="#ff0000"
android:gravity="top|left"
android:inputType="textMultiLine"
android:textColor="@android:color/white" /> 
```

你也可以用这个来设置你需要多少行，

```
android:lines="number of Lines" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:42:55.920

如果您可以将其添加到代码中，它将是这样的：

```
EditText et = new EditText(this);
l.addView(et, new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 100)); 
```

这`100`意味着它将具有 100dp 的宽度。这`l`是`Layout`你可能拥有的（`ScrollView`在你的情况下）你可以得到`R.layout.name_of_the_scroll_view`。

我不确定，但尝试将 height 的属性放入`WRAP_CONTENT`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T14:00:07.347

```
RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <EditText
        android:id="@+id/editText1"
        android:scrollbars="vertical" <-----------
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:gravity="top|left"
        android:ems="10"
        android:text=" example text" />

</RelativeLayout> 
```

在java代码中设置这个.....

```
ed1 = (EditText) findViewById(R.id.editText1);
ed1.setMovementMethod(new ScrollingMovementMethod()); <-------- 
```

将在所有设备中工作。

希望这会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T15:59:20.867

我的代码对我有用。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ffffff"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView20"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:contentDescription="@string/img_desc1"
    android:src="@drawable/num74_head_payakorn" />

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <EditText
        android:id="@+id/edtPayakorn"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:textSize="22sp"
        android:clickable="false"
        android:cursorVisible="false"
        android:editable="false"
        android:enabled="true"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:gravity="top|left"
        android:scrollbars="vertical"
        android:inputType="textMultiLine" />
    </TableRow>
</LinearLayout> 
```

# openerp - 导入 openerp 翻译

> ID：11120881
> 
> 赞同：0
> 
> 时间：2012-06-20T13:38:44.027
> 
> 标签：openerp

我想问有没有什么好的方法可以将很多翻译文件导入openerp服务器？我知道我可以使用管理菜单一次导入一个文件。但这需要很多时间。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:38:51.293

您好，我确实理解您的担忧，即需要花费大量时间并挂起 ui。

如果您是技术角色，则查找国际化的服务器参数

## [OpenERP 国际化选项](http://doc.openerp.com/v6.1/developer/01_getting_started.html#internationalization-options)：

```
 Use these options to translate OpenERP to another language.See i18n
    section of the user manual. Option '-d' is mandatory.Option '-l' is
    mandatory in case of importation

    --load-language=LOAD_LANGUAGE
                        specifies the languages for the translations you want
                        to be loaded
    -l LANGUAGE, --language=LANGUAGE
                        specify the language of the translation file. Use it
                        with --i18n-export or --i18n-import
    --i18n-export=TRANSLATE_OUT
                        export all sentences to be translated to a CSV file, a
                        PO file or a TGZ archive and exit
    --i18n-import=TRANSLATE_IN
                        import a CSV or a PO file with translations and exit.
                        The '-l' option is required.
    --i18n-overwrite    overwrites existing translation terms on updating a
                        module or importing a CSV or a PO file.
    --modules=TRANSLATE_MODULES
                        specify modules to export. Use in combination with
                        --i18n-export 
```

希望这能解决您的问题。

# android - 蜂窝上的 StrictMode InstanceCountViolation

> ID：11120882
> 
> 赞同：1
> 
> 时间：2012-06-20T13:38:45.647
> 
> 标签：android

您好，我正在 android 3.2 上开发，并且有一个活动，我使用 asynctask 在工作线程上执行 sql 查询，然后在 UI 线程上填充列表视图。不知何故，有时我得到

```
06-20 15:25:00.270: E/StrictMode(6353): class com.abc.activity.ElencoOrdiniActivity; instances=2; limit=1
06-20 15:25:00.270: E/StrictMode(6353): android.os.StrictMode$InstanceCountViolation: class com.abc.activity.ElencoOrdiniActivity; instances=2; limit=1
06-20 15:25:00.270: E/StrictMode(6353):     at android.os.StrictMode.setClassInstanceLimit(StrictMode.java:1) 
```

是我的错吗？异步任务不保留上下文，而是使用 MyActivity.this

这是代码

```
 AsyncTask<Void, Void, List<JSONArray>> async = new AsyncTask<Void, Void, List<JSONArray>>()
    {

        @Override
        protected List<JSONArray> doInBackground(Void... params) {

            MyApp appState = ((MyApp)getApplicationContext());

            cursor_ordini = getHelper().getReadableDatabase().rawQuery("...");
            cursor_ordini.moveToFirst();

            List<JSONArray> ordini = new Vector<JSONArray>();
            if (cursor_ordini.getCount() > 0)
            {
                ....
                return ordini;

            }
            return null;
        }

        @Override
        protected void onPostExecute(List<JSONArray> ordini) {
            super.onPostExecute(ordini);

            MyApp appState = ((MyApp)getApplicationContext());

            ListView listView = (ListView) ElencoOrdiniActivity.this.findViewById(R.id.listView_elenco_ordini);
            listView.setAdapter( new OrdiniAdapter(ElencoOrdiniActivity.this, R.layout.elenco_ordini_instestazione, ordini));
            listView.setOnScrollListener( new EndlessOrdiniScrollListener(ElencoOrdiniActivity.this, appState.getDittaIdSelezionata(), "") );

        }

    };

    async.execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-11T21:31:01.283

我知道这是旧帖子。仅适用于正在寻找此问题的解决方案和解释的人。

如果出现 InstanceCountViolation 异常，则意味着可能存在 Activity 泄漏或与在 Android SDK 中如何实现 detectActivityLeaks 检查有关的问题。

为了确定这是否是一个问题，我可以推荐以下帖子：[Detecting leaked Activities in Android](http://www.codeka.com.au/blog/2014/06/detecting-leaked-activities-in-android#popup)。如果您会看到一些对象持有对此活动的引用，而这些引用与 Android 框架无关，那么您遇到的问题应该由您解决。

如果没有对象持有与 Android 框架无关的此活动的引用，则意味着您遇到了与如何实现 detectActivityLeaks 检查相关的问题。在这种情况下，要在不关闭 detectActivityLeaks 的情况下解决活动失败的问题，您可以在调试配置中启动活动之前简单地运行*System.gc()*，如下例所示：

```
 if (BuildConfig.DEBUG)
 {         
     System.gc();
 }

 Intent intent = new Intent(context, SomeActivity.class);
 this.startActivity(intent); 
```

[此答案](https://stackoverflow.com/a/25252425/1318002)中提供了更多信息。

# java - 在 Spring 中尝试 AOP 以从数据源获取连接

> ID：11120883
> 
> 赞同：0
> 
> 时间：2012-06-20T13:38:53.503
> 
> 标签：java, spring, spring-aop

这里我正在尝试使用 Spring 的 AOP，这里 AOP 用于从数据源获取连接并关闭连接，代码如下，

这是学生的pojo如下，

```
 package com.database.pojo;
 import org.springframework.context.annotation.Scope;
 import org.springframework.stereotype.Component;

 @Component("student01Inj")
 @Scope("prototype")
 public class StudentPOJO {

    private Integer studentId;
    private String studentName;

    public StudentPOJO(){
        System.out.println(this.getClass().getName()+" initialised ....");
    }   

    public StudentPOJO(Integer studentId,String studentName){
        this.studentId = studentId;
        this.studentName = studentName;
    }

    public Integer getStudentId() {
        return studentId;
    }
    public void setStudentId(Integer studentId) {
        this.studentId = studentId;
    }
    public String getStudentName() {
        return studentName;
    }
    public void setStudentName(String studentName) {
        this.studentName = studentName;
    }

 } 
```

这是一个接口及其实现，我想在其中放置切入点方法，

接口StudentPOJOService.java如下，

```
 package com.database.pojo;
 import java.sql.Connection;
 import java.util.List;

 public interface StudentPOJOService {
    List<StudentPOJO> getStudents(Connection[] connection);
 } 
```

上述接口的实现如下，

```
 package com.database.pojo;
 import java.sql.Connection;
 import java.sql.PreparedStatement;
 import java.sql.ResultSet;
 import java.util.ArrayList;
 import java.util.List;
 import org.springframework.context.annotation.Scope;
 import org.springframework.stereotype.Component;

 @Component("student_pojo_ser_inj")
 @Scope("singleton")
 public class StudentPOJOServiceImpl implements StudentPOJOService{ 

    @Override
    public List<StudentPOJO> getStudents(Connection[] objects){
        Connection con = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;
        List<StudentPOJO>  studentList = null;
        try{
            studentList = new ArrayList<StudentPOJO>();
            con = (objects != null && objects.length >  0) ? objects[0] : null;
            if(con == null){
                System.out.println(" CON NULL ");
            }
            pstmt = con.prepareStatement(" select id,studentName from tblstudent ");
            rs = pstmt.getResultSet();
            while(rs.next()){
                StudentPOJO pojo = new StudentPOJO();
                pojo.setStudentId(rs.getInt("id"));
                pojo.setStudentName(rs.getString("studentName"));
                studentList.add(pojo);
            }
        }catch(Exception e){
            System.out.println(" XXXXX "+e);
        }
        return studentList;
    }
 } 
```

这是我想在切入点调用方法的 AOP 相关类，

```
 package com.database.aop;
 import java.sql.Connection;
 import java.sql.SQLException;
 import org.aspectj.lang.ProceedingJoinPoint;
 import org.aspectj.lang.annotation.Around;
 import org.aspectj.lang.annotation.Aspect;
 import org.aspectj.lang.annotation.Pointcut;
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.beans.factory.annotation.Qualifier;
 import org.springframework.context.annotation.Scope;
 import org.springframework.jdbc.datasource.DriverManagerDataSource;
 import org.springframework.stereotype.Component;

 @Aspect
 @Component("databaseWrapperINJ")
 @Scope("prototype")
 public class DatabaseWrapperEx01 {

    public DatabaseWrapperEx01 (){
        System.out.println(this.getClass().getName()+" intialised ..... ");
    }

    @Autowired
    @Qualifier("demoDatasourceInj")
    public DriverManagerDataSource dataSourceManager;

    private Connection con = null; 

    private void setConnection() throws SQLException{
        this.con = this.dataSourceManager.getConnection();
    }

    private void closeConn() throws Exception{
        if(this.con != null && !this.con.isClosed()){
            this.con.close();
        }
    }

    @Pointcut("execution(* com.database.pojo.StudentPOJOService.getStudents(..))")
    public void fetchStudent() throws Throwable{ }

    @Around("fetchStudent()")
    public void methodCallForStudentFetch(ProceedingJoinPoint jointPoint) throws Throwable{
        try{
            this.setConnection();
            jointPoint.proceed(new Connection[] { this.con });
            this.closeConn();
        }catch(Throwable e){
            System.out.println(e);
            this.closeConn();
        }
    }
 } 
```

这是所有 spring 定义所在的 spring-data.xml，

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans     xmlns="http://www.springframework.org/schema/beans"
        xmlns:p="http://www.springframework.org/schema/p"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"       
        xmlns:util="http://www.springframework.org/schema/util"             
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
                            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

        <context:annotation-config />
        <context:component-scan  base-package="com.database" />

        <bean   id="demoDatasourceInj"
                class="org.springframework.jdbc.datasource.DriverManagerDataSource"
                p:driverClassName="org.apache.derby.jdbc.ClientDriver"
                p:url="jdbc:derby://localhost:1527/sun-appserv-samples"
                p:username="APP"
                p:password="APP" />

        <bean   id="proxyCreator_inj" class="org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator" />
 </beans> 
```

包含我将从命令提示符调用的 main 方法的类，

```
 package com.database.main;
 import java.sql.Connection;
 import java.util.List;
 import org.springframework.context.ApplicationContext;
 import org.springframework.context.support.ClassPathXmlApplicationContext;
 import com.database.pojo.StudentPOJO;
 import com.database.pojo.StudentPOJOService;

 public class Ex02 {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ApplicationContext ctx = null;
        StudentPOJOService service = null;
        List<StudentPOJO> studentList = null;
        Connection[] cons = null;
        try{
            ctx = new ClassPathXmlApplicationContext("spring-data.xml");
            service = (StudentPOJOService) ctx.getBean("student_pojo_ser_inj");
            studentList = service.getStudents(cons);
            System.out.println("     _ "+studentList.size());
        }catch(Exception e){
            System.out.println(e);
            e.printStackTrace();
        }
    }

 } 
```

现在，当我尝试运行上面的类时，我得到了一个异常，

```
[java]  "methodCallForStudentFetch" called
[java]  org.springframework.aop.AopInvocationException: AOP configuration seems to be invalid: tried calling method 
[public abstract java.util.List com.database.pojo.StudentPOJOService.getStudents(java.sql.Connection[])]
on target [com.database.pojo.StudentPOJOServiceImpl@b96751]; 
nested exception is java.lang.IllegalArgumentException: argument type mismatch 
```

在这里，我要做的是从 AOP 中的数据源获取连接，然后使用“joinpoint”的“proceed”方法将相同的连接传递给 getStudents 方法，但这会产生如上所示的异常，

任何人都可以告诉我哪里出错了，

等待回复，

# javascript - 从 JQuery/Ajax 调用 PHP 函数

> ID：11120885
> 
> 赞同：-1
> 
> 时间：2012-06-20T13:38:57.023
> 
> 标签：javascript, jquery, ajax

从阅读线程中可以清楚地看出，我可以使用 Ajax / JQuery 调用 PHP 函数，但我无法完全理解细节。

假设我有一个函数 foo()，它只是将“bar”添加到我传入的某个字符串中。foo() 存在于 foo.php 中。要在我的无 JavaScript 的 HTML 中使用它，我会做这样的事情：

```
<?php include 'foo.php';?>
<?php echo foo('bar')?> 
```

...我的输出是“foobar”。伟大的。

我怀疑我这样做是为了通过 JavaScript 获取 foo() 的输出：

```
<script>
$.post("http://foo.com/foo.php", {

  <Magic happens here> 

}, function(response) {
useTheOutput(response);
});
</script> 
```

....但我不清楚我应该发布还是获取...以及如何传递一个值，比如'bar'。

谁能把我推向正确的方向？以下是讨论同一件事的其他线程，我只是无法连接所有点：

[从 javascript 调用 php 函数](https://stackoverflow.com/questions/7165395/call-php-function-from-javascript)

[jquery-ajax中的调用函数](https://stackoverflow.com/questions/3130629/call-function-in-jquery-ajax)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:22:26.760

解决方案：

PHP (foo.php):

```
<?php

function generateTicket()

{
   //get_trusted_ticket_direct is another function that does heavy lifting...
   $ticket= get_trusted_ticket_direct($_POST['server'], $_POST['user'], $_POST['targetsite']);
   echo $ticket;
}

if ($_POST['toDo'] == 'generateTicket') {

    generateTicket();
}

?> 
```

JavaScript：

```
$(document).ready(function() {
    // Handler for .ready() called.

    $.post('http://foo.com/foo.php', {
        toDo: 'generateTicket',
        server: 'serverName',
        user: 'userName',
        targetsite: ''        
    }, function(response) {
         alert(response);

    });
});​ 
```

# multithreading - 在多线程环境中休眠

> ID：11120890
> 
> 赞同：1
> 
> 时间：2012-06-20T13:39:11.117
> 
> 标签：multithreading, hibernate, innodb

我有一个使用 Hibernate 作为 DAL 的网络服务 - 使用 MySql 和 InnoDB。

因为我想让 Web 服务调用非常短（为了在客户端获得更好的用户体验），所以我使用 2 个线程和 msg 队列来做一些工作。

1个线程在消息中获取userId，从数据库加载用户并获取电子邮件地址并将电子邮件发送到。

第二个线程是这样使用的：Webservice call....做一些动作。将 ActivityLog 添加到数据库中。做 session.save(log); session.commit(); 现在我们使用 logId 向线程发送消息。收到消息 - 将新条目插入时间线表（用户 ID、日志 ID）。会话是不同于主逻辑会话对象的会话对象。

我应该有这方面的问题吗？在延迟加载？在线程中，因为消息是在 commit() 之后发送到线程的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:11:38.957

如果您不需要对 Web 服务进行同步回复，Webservice -> 消息队列架构是相当标准的。

在 Web 服务中，将您想要的任何内容存储到数据库中，然后消息队列将获取这些内容。

不同的会话不是问题，但是如果这些线程中的每一个都有一个静态会话，它们可能会受到会话膨胀的影响：对象堆积在会话缓存中。有关此的更多信息：http: [//suryagaddipati.wordpress.com/2008/02/15/hibernate-rich-clients-and-long-running-sessions/](http://suryagaddipati.wordpress.com/2008/02/15/hibernate-rich-clients-and-long-running-sessions/)

# sql - 将递归生成 child_id 的 SQL 查询

> ID：11120908
> 
> 赞同：1
> 
> 时间：2012-06-20T13:40:02.263
> 
> 标签：sql, oracle, recursive-query

我有以下表结构：

```
ORGANIZATION_ID   | Name  |  PARENT_ID
--------------------------------------------------
1                 | A     |     0   -Indicates root
2                 | B     |     1
3                 | C     |     2
4                 | D     |     2
5                 | E     |     4
6                 | F     |     1
7                 | G     |     1
8                 | H     |     7
9                 | J     |     8
10                | K     |     9 
```

我不擅长编写 Oracle SQL 查询。`*`如果我传入某个组织 ID，如何生成所有 () 子组织的列表？

例如，如果我传入`2`，从逻辑上讲，我会查找所有父 ID 为 2 的行，然后我会递归地查看这些行中的每一行做同样的事情。

我知道逻辑，如何在 oracle 中使用 sql 查询重新创建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:46:09.773

[`CONNECT BY`](http://psoug.org/reference/connectby.html)可用于进行此递归查询：

```
SELECT organization_id, name
FROM t
CONNECT BY PRIOR organization_id = parent_id
START WITH organization_id = 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T15:15:04.870

如果您使用 Oracle 11g，则可以选择 Oracle 递归子查询。

```
with orgs (organization_id, name, parent_id) as (
    select organization_id, name, parent_id 
        from organization
        where organization_id=2
    union all
        select organization_id, name, parent_id 
        from organization org join orgs on org.parent_id=orgs.organization_id)
search depth first by organization_id set a
select organization_id, name
from orgs; 
```

# cluster-computing - 关于计算机集群中术语的两个问题

> ID：11120910
> 
> 赞同：0
> 
> 时间：2012-06-20T13:40:11.187
> 
> 标签：cluster-computing

我是计算机科学的外行，我在这里对计算机集群的术语有一些疑问。

*   一个集群有 300 个节点。

这是否意味着集群有 300 台计算机？

*   CPU的核心使用超线程，所以一共可以有16个线程同时运行。

什么是超线程或线程？数据流还是逻辑流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:48:38.787

[超线程](http://en.wikipedia.org/wiki/Hyper-threading)是一项用于管理同时多线程的 Intel 技术。它不一定与集群计算有任何关系。

[线程](http://en.wikipedia.org/wiki/Thread_%28computing%29)作为单个运行任务，可以与其他所有任务异步执行。因此，根据您的计算机拥有的处理器类型，它可能能够异步执行不同数量的事情。

同时，集群中的节点通常是独立的计算机。但是，它们也可以是虚拟机。在某些情况下，我也看到一个处理器内核也被视为一个节点（在这种情况下，一台具有 2 个内核的机器上将有 2 个节点）。这种取决于框架以及您正在做什么。

但通常使用集群计算，您有一个可以扩展的给定任务，并且执行它的每个实体都称为一个节点。

# asp.net - “提交”上的“输入”会发生什么？ASP.Net 如何做到这一点？

> ID：11120911
> 
> 赞同：0
> 
> 时间：2012-06-20T13:40:14.177
> 
> 标签：asp.net, html, asp.net-4.0, google-checkout

> **可能重复：**
> [读取提交到 ASP.Net 表单的帖子数据](https://stackoverflow.com/questions/564289/read-post-data-submitted-to-asp-net-form)

我有一个谷歌结帐“立即购买”按钮，并试图添加动态创建的内容以在点击时发送。事实证明，使用原始 html 有点困难，所以我想创建一个 ASP.Net 来`ImageButton`代替它。

我已经成功地创建了带有正确图像的按钮，并将其连接到代码隐藏中的事件处理程序。

但是，我不确定单击原始按钮时究竟会发生什么，以便尝试在新的`ImageButton`.

原始代码是：

```
<form action="https://sandbox.google.com/checkout/..." id="Form1" method="post" name="..." target="_top">
<input name="item_name_1" type="hidden" value="..." />
...
<input alt="" src="https://sandbox.google.com/checkout/buttons/buy.gif?merchant_id=..." type="image" />
</form> 
```

我想放置一个动态创建的`item_name_1`.

为此，我必须在`Button1_Click`方法中做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:54:43.433

简短，简洁和*有用*的版本：

html:

```
<form id="__parent" action="..." method="post" runat="server">
    <input id="__child0" name="type" type="hidden" value="button" runat="server" />
    <input id="__child1" name="name" type="hidden" value="teh_button" runat="server" />
    <input id="__child2" name="value" type="hidden" value="Hello?" runat="server" />
</form> 
```

tehfile.cs：

```
<%@ Page Language="C#" CodeFile="tehfile.cs" %>

String
    _type = __child0.Value,
    _name = __child1.Value,
    _value     = __child2.Value,
    _element   = String.Format( 
        "<{0} {1}=\"{2}\" {3}=\"{4}\" {5}=\"{6}\" />", 
        "input", 
        "type", _type,
        "name", _name,
        "value", _value  );

Literal _lit = new Literal( );
_lit.Text = _element;

__parent.AddControl( _lit ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:14:42.317

要将该数据发布到 ASP.NET 服务器端的另一台服务器，您将需要使用类似[WebRequest](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)类的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T14:37:15.253

或者，为了发布表单，您可以使用远程发布类，就像这里的任何一个：[Remote HTTP Post with C#](https://stackoverflow.com/questions/547347/remote-http-post-with-c-sharp)，@BobbyShaftoe 的答案是我在许多项目中使用过的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T15:16:39.963

同样的问题/[在这里](https://stackoverflow.com/q/11118890/304683)发布。我会发表评论而不是回答，但似乎这是一种更好/格式化的方式来了解这一切：

在您对@MarcusHansson 回答的评论中：

> 我看不到这如何解决如何使用代码隐藏发送信息的问题

您正在混合**服务器端**和**客户端**提交方法。

如果你想使用“代码隐藏”提交，你必须实现服务器到服务器的 HTTP Post。在 Google Checkout 的上下文中，我在您的另一篇文章中提供了该链接。

您的客户端正在使用 HTML FORM，它本身就是您“发送数据”的方式。您可以尝试各种客户端提交过程，但归根结底，它是一种客户端 (Javascript) 方法。

“立即购买”按钮的“动态”是什么？它适用于（一次）购买**单件商品。**为什么不能在创建按钮的同时构造所有需要的变量？你在添加什么（需要另一个重定向或回发）？

# iphone - 是否可以以编程方式从 ipod 库中删除媒体？

> ID：11120914
> 
> 赞同：0
> 
> 时间：2012-06-20T13:40:20.563
> 
> 标签：iphone, ipod, mpmediaitem, mpmediaquery

在搜索了几个苹果文档和网站后，我觉得苹果只允许从 ipod-library 读取媒体数据。有没有人证实这一点？是否可以实现从 ipod 库中删除媒体的功能？

问候， 李顺达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:43:42.927

不，如果有人向您展示该黑客，我仍然不建议您使用，因为您的应用程序可能会被 Apple 拒绝。这违反了沙盒。应用程序无权从其他应用程序的沙箱中添加或删除数据。

如果第三方应用程序开发人员创建一个允许用户从您的应用程序中删除数据的应用程序，您会觉得好吗？

# android - 矩阵变换后的细线图

> ID：11120917
> 
> 赞同：1
> 
> 时间：2012-06-20T13:40:24.560
> 
> 标签：android, vector-graphics

我正在我的 Android 平板电脑上测试 XY 图的绘制。这是运行 ICS 的三星 Galaxy Tab 2 (7")。

我创建了一个 View 子类型，它具有重写的 onDraw 方法。它的工作是简单地将 (x,y) 坐标数组绘制为一系列连接的线段。我有一个表示 y 值的浮点数组，x 值是数组索引。y 值从 -1 扩展到 1，大约有 10 个值。很简单。

目标画布是屏幕上的一个正方形，大约 480 x 480 像素，+1 位于屏幕顶部，-1 位于屏幕底部，第 0 个值位于最左侧，第 N 个值位于屏幕底部极右翼。

因此，沿 X 和 Y 轴从“世界坐标”到“屏幕坐标”的转换是不均匀的。在我的 onDraw 方法中，我对 Canvas 对象应用平移、缩放和另一个平移操作，然后使用细线描边宽度为 0 的画笔继续绘制线段。

结果是一个宽度不是细线的图形。显然，我的缩放操作是加粗线段，使平缓倾斜的线看起来比陡峭的线更粗。当我更改我的世界坐标范围以使它们沿两个轴相等（以匹配方形画布）时，这个问题就消失了。

有趣的是，这个问题出现在平板电脑上，而不是 Android ICS 模拟器上。

对此的任何想法将不胜感激。无论转换是什么，我的偏好是有一个细线图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:08:07.460

解决此问题的明显方法是保持画布矩阵不变，自己执行平移/缩放/平移操作（从世界坐标转换为屏幕坐标），然后使用屏幕坐标进行绘图，使用宽度为0。

# symfony - Symfony 2 项目接收 [PDOException] 一般错误：2050

> ID：11120920
> 
> 赞同：0
> 
> 时间：2012-06-20T13:40:32.667
> 
> 标签：symfony

[PDOException] SQLSTATE[HY000]：一般错误：2050

示例：dbextra:install [--drop]

数据库设置正确，pdo 启动并运行，pdo_mysql 启动并运行，redis 启动并运行，elasticsearch 启动并运行...

如果我查看parameters.ini 或加载页面并查看Symfony2 中的db，它会告诉我一切运行良好。但是我无法让 dbextra:install 工作，即使所有日志都说它正在写入数据库，我的应用程序也不会写入数据库。

我的应用程序具有用户名和密码登录以及创建新用户的能力。它正确加载表单并允许您创建一个新用户......但实际上从未将该信息写入数据库（即使它说它正在将其写入数据库。）

检查所有设置，所有服务器都正常运行（否则应用程序根本无法运行。）

我能得到的唯一错误信息就是那个。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:56:55.967

使用带有 Symfony2 的 Ubuntu 的人绝对会遇到这个问题。所以我想我会花一点时间来解释解决方案。

Symfony2 需要 PDO……而且它需要 MySQL……但是如果没有真正的 pdo_mysql，你可能会走得很远。如果您只安装了 PDO 和 MySQL……您的应用程序可能会运行……但它永远不会写入数据库。

如果您搜索 PDO_MySQL Ubuntu... 您会发现很多旧版本的 pdo_mysql 链接在 MySQL 5.5 中无法正常运行。

解决方案是运行：

```
apt-get install php5-mysql 
```

然后只需重新启动 apache 即可消除错误。

# android - 如何暂停和恢复通话音频

> ID：11120922
> 
> 赞同：0
> 
> 时间：2012-06-20T13:40:39.947
> 
> 标签：android, broadcastreceiver, android-mediaplayer

> **可能重复：**
> [在来电时停止和启动音乐](https://stackoverflow.com/questions/5610464/stopping-starting-music-on-incoming-calls)

我有一个简单的应用程序，它使用 MediaPlayer 类播放一些音频。在调试我的应用程序时，我发现在来电和去电期间仍然播放音频。

我发现我的问题的解决方案是使用 phoneStateListener。我不太明白如何做到这一点。我看到了一些使用 BroadcastReceiver 和 PhoneStateListener 的示例，但我不明白为什么我们需要 BroadCastReceiver。

如果有人可以提供 PhoneStateListener 的示例实现，我将不胜感激。如果我能获得电话状态，我可以暂停或恢复音频，因为我的 MediaPlayer 对象对于整个应用程序都是全局的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:22:50.323

这就是我使用的......`onCallStateChanged()`只要呼叫状态发生变化，就会在所有 PhoneStateListeners 中调用该函数，所以这就是您需要处理的。

```
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;

//Makes sure the audio is paused for incoming/outgoing phone calls
public class ListenToPhoneState extends PhoneStateListener {

    private boolean pausedForPhoneCall = false;
    private UIManager uiManager;

    ListenToPhoneState(UIManager manager){
        uiManager = manager;
    }

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {

        switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:
                resumeInAndroid();
                return;
            case TelephonyManager.CALL_STATE_OFFHOOK: 
                pauseInAndroid();               
                return;
            case TelephonyManager.CALL_STATE_RINGING: 
                pauseInAndroid();               
                return;
        }
    }

    private void resumeInAndroid(){
        if(pausedForPhoneCall == true) {
            pausedForPhoneCall=false;
            uiManager.waitForPhoneCall(false);
        }
    }

    private void pauseInAndroid(){
        if(pausedForPhoneCall == false){
            pausedForPhoneCall=true;
            uiManager.waitForPhoneCall(true);
        }
    }

    String stateName(int state) {
        switch (state) {
            case TelephonyManager.CALL_STATE_IDLE: return "Idle";
            case TelephonyManager.CALL_STATE_OFFHOOK: return "Off hook";
            case TelephonyManager.CALL_STATE_RINGING: return "Ringing";
        }
        return Integer.toString(state);
    }
} 
```

如果您想将此添加到您当前的活动中，请执行此操作..

```
ListenToPhoneState listener = new ListenToPhoneState(userInterface);
        TelephonyManager tManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        if(tManager != null)
            tManager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE); 
```

您不想暂停当前的活动吗？如果你向你的类传递一个当前活动的实例，你可以调用 finish() 并在 switch 语句中创建一个新活动，如果你真的想要的话。

# iphone - xcode 4.2 无法运行应用程序

> ID：11120926
> 
> 赞同：0
> 
> 时间：2012-06-20T13:40:49.727
> 
> 标签：iphone, xcode, xcode4, xcode4.2, xcodebuild

**我正在尝试在我的 iPhone 4 上构建我的应用程序，但我不断收到同样的错误。它之前已经运行过并且运行良好，但我改变了我的图标，现在这就是我得到的。**

```
 Command /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/PrivatePlugIns/iPhoneOS Build System Support.xcplugin/Contents/Resources/copypng failed with exit code 1 
```

错误被称为`CopyPNGFile`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:43:32.187

你可能在没有告诉 XCode 的情况下删除了项目文件夹中的一个文件，它仍然试图包含它。展开 Project Navigator 中的文件夹并查找红色文件，然后使用 ctrl 单击删除它们。在那之后 XCode 应该会更快乐。

# bioinformatics - Picard SamToFastq 仅提取一次读取，然后引发错误

> ID：11120934
> 
> 赞同：0
> 
> 时间：2012-06-20T13:41:08.380
> 
> 标签：bioinformatics, dna-sequence, fastq, picard, bam

我正在尝试从 bam 文件中提取一些 FastQ 文件。Picard 可以使用 SamToFastq 执行此操作，正如该工具的文档中所说，它接受 bam 或 sam 文件。

但是当我运行它时，它只提取一次读取，然后退出。这是错误消息。任何帮助表示赞赏。

```
[davy@xxxx picard-tools-1.70]$ java -jar SamToFastq.jar I=/home/davy/xxx_trio_data/xxxx-1.bam F=/home/davy/xxx_trio_data/1005-1.fastq
[Wed Jun 20 14:14:21 BST 2012] net.sf.picard.sam.SamToFastq INPUT=/home/davy/xxx_trio_data/xxxx-1.bam FASTQ=/home/davy/xxxx_trio_data/xxxx-1.fastq    OUTPUT_PER_RG=false RE_REVERSE=true INCLUDE_NON_PF_READS=false READ1_TRIM=0 READ2_TRIM=0 INCLUDE_NON_PRIMARY_ALIGNMENTS=false VERBOSITY=INFO QUIET=false VALIDATION_STRINGENCY=STRICT COMPRESSION_LEVEL=5 MAX_RECORDS_IN_RAM=500000 CREATE_INDEX=false CREATE_MD5_FILE=false
[Wed Jun 20 14:14:21 BST 2012] Executing as davy@xxxxx.xxxx.xxxx.xx.xx on Linux 2.6.34.9-69.fc13.x86_64 amd64; OpenJDK 64-Bit Server VM 1.6.0_18-b18; Picard version: 1.70(1215)
[Wed Jun 20 14:14:21 BST 2012] net.sf.picard.sam.SamToFastq done. Elapsed time: 0.00 minutes.
Runtime.totalMemory()=2029715456
FAQ:  http://sourceforge.net/apps/mediawiki/picard/index.php?title=Main_Page
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
        at java.util.ArrayList.rangeCheck(ArrayList.java:571)
        at java.util.ArrayList.get(ArrayList.java:349)
        at net.sf.picard.sam.SamToFastq.doWork(SamToFastq.java:156)
        at net.sf.picard.cmdline.CommandLineProgram.instanceMain(CommandLineProgram.java:177)
        at net.sf.picard.sam.SamToFastq.main(SamToFastq.java:118) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:47:48.603

事实证明，数据是配对结束的，而不是像我最初想象的那样单次读取，并且 picard 在这种情况下需要第二个输出文件，该实例使用 SECOND_END_FASTQ 选项指定。

# mysql - 如何在sql表中对不同的时间类型值求和

> ID：11120935
> 
> 赞同：2
> 
> 时间：2012-06-20T13:41:08.323
> 
> 标签：mysql

我的查询：

```
 SELECT (
 `total_hours`
)
FROM work_details
WHERE  `employee_id` =  '28'
AND DATE
BETWEEN  '2012-02-01'
AND  '2012-02-01'

LIMIT 0 , 30 
```

// 从数据库表 work_details 中获取给定员工在给定日期的总工作时间

结果：

```
total_hours
            02:27:29
            00:13:56
            03:03:49
            00:00:03
            00:30:20
            01:04:13 
```

//结果显示员工在给定日期的工作时间，我需要获取这些值的总和才能找到给定日期的总工作时间。

如何在字段中获取这些值的总和？？？

如果我使用 sum(total_hours) 结果将是

```
sum( total_hours ) 
67870 
```

这是不正确的。我在时间类型本身中需要它。

我还需要一个帮助，这个查询有效，因为我为 BETWEEN 子句提供了相同的日期。

```
DATE
    BETWEEN  '2012-02-01'
    AND  '2012-02-01' 
```

但是我需要计算给定范围内的总工作时间，比如说

```
DATE
    BETWEEN  '2012-02-01'
    AND  '2012-02-29' 
```

由于给定日期有多个总小时数条目，我需要获取每个不同日期的总小时数。帮助？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:50:08.103

试试这个（取自[这里](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-type-overview.html)）：

```
SELECT SEC_TO_TIME(SUM(TIME_TO_SEC(`total_hours`))) ... -- rest of your query 
```

# c# - 如何从第 n 个位置开始删除列表中的条目？

> ID：11120939
> 
> 赞同：-3
> 
> 时间：2012-06-20T13:41:20.290
> 
> 标签：c#, list

如何从第 n 个位置开始的字符串列表中删除条目？

这意味着如果我有一个包含 10 个元素的列表，并且如果 n=7，我需要删除第 8、第 9 和第 10 个条目并只获取前 7 个条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:43:33.893

使用 LINQ：

```
var firstSeven = list.Take(7); 
```

不要忘记

```
using System.Linq; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:43:36.937

您可以使用该[`List<T>.RemoveRange`](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)方法。或者使用 LINQ 创建一个新列表，其中仅包含满足您条件的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:44:03.320

看一下`list.RemoveRange`功能。

[http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T13:43:47.153

您可以使用不会直接影响原始集合的 LINQ[`.Take()`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)扩展方法，就像这样

```
var fewerStrings = myCollectionOfStrings.Take(n); 
```

此外，如果您想选择集合中的一系列项目，您可以将其与[`.Skip()`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)扩展方法结合使用

```
var fewerStrings = myCollectionOfStrings.Skip(n).Take(y); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T13:43:53.263

使用 List.RemoveRange：

```
int index = 7;
lst.RemoveRange(index,lst.Count-index); 
```

[List.RemoveRange](http://msdn.microsoft.com/en-us/library/y33yd2b5)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T13:44:03.500

只选择你需要的，你可以使用[`Enumerable.Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)：

```
var list   = new List<String>() { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j" };
var result = list.Take(7).ToList(); // a,b,c,d,e,f,g, 
```

另一种方法是使用[List.RemoveRange 方法](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)：

```
result = list.RemoveRange(6, 3) 
```

# php - 使用 jQuery 和 $.get 将信息发送到 php 页面

> ID：11120940
> 
> 赞同：0
> 
> 时间：2012-06-20T13:41:25.657
> 
> 标签：php, jquery

这是我的问题：我正在使用日期选择器表单 jQuery UI 来选择日期，在选择日期后，我试图将选择的日期发送到 php 文件！这是我尝试过但不起作用的方法：

```
$( "#datepicker" ).datepicker({
    onSelect: function(dateText, inst) { 
        $.get("myPhpFile.php",{ data: dateText },
                    function(data) {
                            alert(data);
                    }

      );}); 
```

选择日期后 - 出现警报框，但似乎没有任何反应！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:12:25.383

您的代码有一个不匹配的大括号，这可能是导致问题的原因。试试看

```
$( "#datepicker" ).datepicker({

    onSelect: function(dateText, inst) { 
        $.get("myPhpFile.php",{ data: dateText },
                    function(ajaxdata) {
                            alert(ajaxdata);
                    });
                    }
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:15:07.413

```
$( "#datepicker" ).datepicker({
onSelect: function(dateText, inst) { 
    $.post("myPhpFile.php",{ data: dateText },
                function(data) {
                        alert(data);
                }
         )}}); 
```

然后在PHP中：

```
 $date = $_POST['data'];​​
    // do your math with data
    echo $result; 
```

`$result`应该由你的`alert()`.

如果要使用 GET，请使用：

```
$.get("myPhpFile.php?data="+dateText,function () ...} 
```

注意括号，在您的示例中它们是错误的

# javascript - Node.JS/Javascript - 将字符串转换为整数会返回 NaN，而我不希望它返回

> ID：11120947
> 
> 赞同：11
> 
> 时间：2012-06-20T13:41:45.907
> 
> 标签：javascript, string, node.js, casting

这都是在一个更大的程序的上下文中，所以我会尽量保持简单，只显示有问题的行。我有一个值数组，它们是字符串形式的数字，例如“84”、“32”等。

然而这条线

```
console.log(unsolved.length + " " + unsolved[0] + " " + parseInt(unsolved[0]) + " " + parseInt("84")); 
```

印刷：

```
4 "84" NaN 84 
```

“84”是我试图解析的数组元素！然而，除非我将它从数组的上下文中取出并明确写入，否则它不会起作用。这是怎么回事？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T13:47:20.367

您可以尝试使用此函数从要处理的字符串中删除引号：

```
function stripAlphaChars(source) { 
  var out = source.replace(/[^0-9]/g, ''); 

  return out; 
} 
```

此外，您应该明确指定要解析以 10 为基数的数字：

```
parseInt(unsolved[0], 10); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T13:47:07.837

`parseInt`会从它的论点开始的一切看起来像一个数字，而忽略其余的。在您的情况下，您调用它的参数以 开头`"`，所以没有任何东西看起来像一个数字，它会尝试转换一个空字符串，这实际上不是一个数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T13:55:46.850

您应该确保数组元素确实是一个可以解析为数字的字符串。您的数组元素不包含 value `'84'`，但实际上是 value `'"84"'`（包含由 " 封装的数字的字符串）

您需要`"`从数组元素中删除 ，可能像这样：

```
function removeQuotationMarks(string) {
  return (typeof string === 'string') ? string.replace(/"|'/g, '') : string;
}

unsolved = unsolved.map(removeQuotationMarks); 
```

现在所有的数组元素都应该准备好被解析了`parseInt(unsolved[x], 10)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-08T05:14:30.587

首先，我们需要使用正则表达式替换“到”来提供数据并替换，然后我们需要进行转换。

```
var i = 1;
var j = "22"
function stringToNumber(n) {
  return (typeof n === 'string') ? parseInt(Number(n.replace(/"|'/g, ''))) : n;
}

console.log(stringToNumber(i)); // 1
console.log(stringToNumber(j)); // 22
```

# iphone - 来自网站的 GIF 在 iDevices 上运行缓慢

> ID：11120948
> 
> 赞同：0
> 
> 时间：2012-06-20T13:41:47.270
> 
> 标签：iphone, ipad, uiwebview, gif

我有一个网站，其中包含一些在某些页面加载时旋转的加载 Gif。桌面网络浏览器上的旋转非常流畅，包括 mac 上的 safari。

但是，当在 iPad 或 iPhone 上使用 safari 或在 UIWebView 中显示网页时，gif 旋转非常慢。

我可以对我的 GIF 或我的 iDevices 做些什么来防止这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:44:37.273

GIF 微调器是邪恶的。使用这个： http: [//fgnass.github.com/spin.js/](http://fgnass.github.com/spin.js/)

# sql - 插入的复杂性

> ID：11120952
> 
> 赞同：2
> 
> 时间：2012-06-20T13:42:04.003
> 
> 标签：sql, sql-server, sql-server-2008, insert, insert-update

![ERD](../Images/fee793e771d2f4c089d8b3cc8bfd0c8b.png)

我与老客户的问题加上过时的系统。部分问题。这 3 个表包含数据库中的现有数据。让我解释一下，当时的情景是什么，然后我希望你们能帮助我完成这项工作。

**场景**：

*   正如您可能想象的那样，有很多产品，尤其是 ProductZone...
*   客户添加新区域（假设**新区域 U、V、W、X、Y、Z**），不幸的是，ProductZone 没有！
*   客户需要更新（插入）ProductZones 以使所有现有产品引用新区域和一些较旧的区域（假设**较旧的区域 R、S、T**）如果它不存在，我在这里遇到......，需要你的帮助！

**说明**：

如果我理解正确，我必须大量插入 ProductZone，在这种情况下，通过复杂的 T-SQL 过滤条件和插入语句。

我很乐意接受任何建议，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:46:55.180

此查询将填充 ProductZone 表中可用的现有产品和 Product 表中可用的新产品的区域。

```
INSERT   INTO ProductZone 
SELECT ZoneNo, 
       ProductNo 
FROM   Product a 
       CROSS JOIN ZONE b 
WHERE  NOT EXISTS (SELECT 1 
                   FROM   ProductZone c 
                   WHERE  a.ProductNo = c.ProductNo 
                          AND a.zone = c.zone) 
```

# php - MySQLI 的删除函数

> ID：11120954
> 
> 赞同：-1
> 
> 时间：2012-06-20T13:42:06.187
> 
> 标签：php, mysqli

这样我就必须构建一个删除功能，我尝试用谷歌搜索它，但我没有运气。然后找不到一个好的功能或您所说的任何东西。

这样我就必须删除一个用户

希望你/我能进一步帮助我

这是我第一次在我的网站上使用 MySQLI 中的删除功能。:)

希望你能给我一些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:45:38.510

我猜你想从你的 mysql 表中删除用户，如果是，那么你可以使用 mysql`DELETE`关键字编写查询

```
"DELETE FROM `your-tbale(i.e users)` where `columnName` = 'somevalue'" 
```

希望这就是你要找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:52:05.747

基本上你只需要运行查询：

```
DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM tbl_name
    [WHERE where_condition]
    [ORDER BY ...]
    [LIMIT row_count] 
```

[http://dev.mysql.com/doc/refman/5.0/en/delete.html](http://dev.mysql.com/doc/refman/5.0/en/delete.html)

但是，您似乎发现了“特殊问题”，也许这篇文章会给您一个提示：

[Mysqli DELETE QUERY 在 PHP 脚本中不起作用](https://stackoverflow.com/questions/10153255/mysqli-delete-query-not-working-in-php-script)

# django - 适合单页 Web 应用程序的后端？

> ID：11120957
> 
> 赞同：10
> 
> 时间：2012-06-20T13:42:14.480
> 
> 标签：django, backbone.js, javascript-framework, singlepage, single-page-application

以前我主要用 Django 编写 Web 应用程序，但现在我越来越多地发现我想使用 Backbone.js 或类似的 JavaScript 框架编写单页 Web 应用程序，后端只包含一个数据库和一个 API。

我的问题是这样的。如果我的应用程序结构如下所示：

```
 1\. Database
 |
 v
 2\. API methods
 |
 v
 3\. Single-page front-end written with Backbone 
```

而且我在 Django 中最舒服——但也热衷于学习新事物，例如 NoSQL 和 Node，如果它们合适的话——人们会推荐我用于 (2) 什么？

通常我会使用带有 Piston 的 Django 作为 API 应用程序，但拥有所有 Django 并仅将其用作 API 提供程序似乎相当重量级。不过，也许我不应该担心。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T13:49:28.480

任何能够支持或提供 RESTful API 的服务器端框架或语言都应该可以工作。我自己现在正在使用 Slim PHP。但是看到您来自 Django/Python 背景，也许这篇文章会对您有所帮助。

[Python REST（Web 服务）框架的推荐？](https://stackoverflow.com/questions/713847/recommendations-of-python-rest-web-services-framework)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T16:10:35.140

[如果您使用 Django（一个 MVC 框架）并使用 Backbone，您可能会很乐意在纯 Node.js 或Express.js](http://expressjs.com/guide.html)中设置您的应用程序，并使用其他模块连接到您选择的数据库。

使用 Express，如果您计划仅通过 RESTful 接口提供 JSON，您甚至不需要使用 Views，这很方便。您只需要设置模型和路线（也可用作控制器）。

# jquery - 使用 jQuery 过滤数组

> ID：11120960
> 
> 赞同：0
> 
> 时间：2012-06-20T13:42:26.793
> 
> 标签：jquery, arrays

我有一系列幻灯片

```
$slide = $(".slide") 
```

**这些幻灯片中只有一张**也有“当前”类。如何**从数组**中选择它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:43:08.967

使用过滤方法见[这里](http://api.jquery.com/filter/)。

```
$(".slide").filter('.current'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T13:43:57.637

您可以使用[`.filter()`](http://api.jquery.com/filter/)

```
var $slide = $(".slide").filter('.current'); 
```

或者只是将选择器更改为需要两个类：

```
var $slide = $(".slide.current"); 
```

# php - PHP - 同时对两个数组（数字和字符串）进行排序

> ID：11120970
> 
> 赞同：0
> 
> 时间：2012-06-20T13:42:51.127
> 
> 标签：php

又一个 PHP 问题。我有两个数组：一个基于字符串，另一个是数字。字符串数组包含各种建筑物的名称。数字数组跟踪搜索与建筑物的相关性。

示例：我搜索“军械库建筑”（http://yoursite.com/search.php?building=Armory+Building）

我遍历所有 25 个建筑物并显示任何包含一个或多个搜索词（军械库和建筑物）的建筑物。

军械库 军械库国家大楼 军械库食堂大楼

显然，如果搜索应该根据相关性显示结果，那么最后两个应该首先出现。如何对其进行排序，以便两个数组重新排序但保持相同的索引，这意味着我根据相关性重新排序结果（最后 2 个的“相关性”为 2，第一个结果的“相关性” ”的 1)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:52:57.303

在这种情况下，要做到这一点并不容易。如果您有 2 个数组，并且对其中一个进行排序，则需要同时对另一个进行排序，如果元素有 chenge，则需要在第二个数组中更改相关元素。

更好的方法是将所有内容保存在一个二维数组中并对其进行排序：
[http ://uk3.php.net/array_multisort](http://uk3.php.net/array_multisort)

您也可以编写游览自己的排序功能，这里是示例：

```
<?php

$ar1 = array ('1', '2', '3', '4', '5', '6', '7', '8');
$ar2 = array ('a', 'b', 'c', 'd', 'e', 'f', 'g', 'h');

for ($j=0;$j<count($ar1)-1;$j++) {
    for ($i=$j;$i<count($ar1)-1;$i++) {
        if ($ar1[$i]<$ar1[$i+1]) {
            //  array 1
            $tmp=$ar1[$i];
            $ar1[$i]=$ar1[$i+1];
            $ar1[$i+1]=$tmp;
            //  array 2
            $tmp=$ar2[$i];
            $ar2[$i]=$ar2[$i+1];
            $ar2[$i+1]=$tmp;
        }
    }
}

?> 
```

# list - 公理化 Z3 列表的包含函数的不同方法

> ID：11120972
> 
> 赞同：1
> 
> 时间：2012-06-20T13:42:52.723
> 
> 标签：list, encoding, z3, axiom

将列表（[在 Rise4Fun 上](http://rise4fun.com/Z3/COBe)）上的包含操作公理化为

```
(declare-fun Seq.in ((List Int) Int) Bool)

(assert (forall ((e Int))
  (not (Seq.in nil e))))

(assert (forall ((xs (List Int)) (e Int))
  (iff
    (not (= xs nil))
    (=
      (Seq.in xs e)
      (or
        (= e (head xs))
        (Seq.in (tail xs) e)))))) 
```

使 Z3 4.0 能够反驳断言

```
(declare-const x Int)
(assert (Seq.in nil x))
(check-sat) ; UNSAT, as expected 
```

在我眼里等价的公理化

```
(assert (forall ((xs (List Int)) (e Int))
  (ite (= xs nil)
    (= (Seq.in xs e) false)
    (=
      (Seq.in xs e)
      (or
        (= e (head xs))
        (Seq.in (tail xs) e)))))) 
```

结果`unknown`。

这可能是触发器的问题，还是 List 域特有的东西可以解释行为差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:52:45.597

您在rise4fun 的脚本会禁用`:mbqi`引擎。因此，Z3 将尝试仅使用 E-matching 来解决问题。当没有提供模式（又名触发器）时，Z3 将为我们推断触发器。Z3 使用许多启发式方法来推断模式/触发器。其中之一与您的脚本相关，并解释了正在发生的事情。Z3 永远不会选择产生“匹配循环”的模式/触发器。当 Q 的实例将为 P 产生新的匹配时，我们说模式/触发器 P 为量词 Q 产生匹配循环。让我们考虑量词

```
(assert (forall ((xs (List Int)) (e Int))
  (ite (= xs nil)
    (= (Seq.in xs e) false)
    (=
      (Seq.in xs e)
      (or
        (= e (head xs))
        (Seq.in (tail xs) e)))))) 
```

Z3*不会*选择`(Seq.in xs e)`作为此量词的模式/触发器，因为它会产生匹配循环。假设我们有一个基本项`(Seq.in a b)`。该术语与模式匹配`(Seq.in xs e)`。实例化量词`a`将`b`产生`(Seq.in (tail a) b)`也匹配模式的术语`(Seq.in xs e)`。`(tail a)`用and实例化量词`b`将产生`(Seq.in (tail (tail a)) b)`也匹配模式的项`(Seq.in xs e)`，依此类推。

在搜索过程中，Z3 将使用多个阈值阻止匹配循环。但是，性能通常会受到影响。因此，默认情况下，Z3 不会选择`(Seq.in xs e)`为模式。相反，它将选择`(Seq.in (tail xs) e)`. 这种模式不会产生匹配循环，但它也可以防止 Z3 证明第二个和第三个查询是不可满足的。E-matching 引擎的任何限制通常由`:mbqi`引擎处理。但是，`:mbqi`在您的脚本中被禁用。

如果您在脚本中提供第二个和第三个查询的模式。Z3 将证明所有的例子都是`unsat`. 这是带有显式模式/触发器的示例：

[http://rise4fun.com/Z3/DkZd](http://rise4fun.com/Z3/DkZd)

即使不使用模式，第一个示例也会通过，因为只需要第一个量词来证明示例是`unsat`.

```
(assert (forall ((e Int))
  (not (Seq.in nil e)))) 
```

请注意，这`(Seq.in nil e)`是这个量词的完美模式，它是 Z3 选择的模式。

# tfs - CC.NET / TFS 不会删除构建服务器上已删除的文件

> ID：11120977
> 
> 赞同：0
> 
> 时间：2012-06-20T13:43:01.253
> 
> 标签：tfs, cruisecontrol.net, tfs-power-tools

TFS 是我的存储库，CC.NET 是我的构建服务器。如果我在 Visual Studio 或 TFS Powertools（Windows 资源管理器扩展）中删除一个文件，并检查该删除，我可以有理由相信该文件不会从我的构建服务器中删除。结果，由于文件冲突（尤其是*重命名*的文件），构建通常会失败。

有没有其他人目睹过这种行为？有没有办法确保这些更改反映在构建服务器上？

谢谢; 邓肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:46:49.837

虽然我们不使用 TFS 作为源代码控制，但我们使用 CC.Net。作为构建过程的一部分，我们清除所有文件的工作区（使用 Nant 任务），然后从 SCM 强制刷新文件。

听起来这会解决你的问题。

# php - 视图中的codeigniter数据库调用

> ID：11120983
> 
> 赞同：1
> 
> 时间：2012-06-20T13:43:16.590
> 
> 标签：php, mysql, codeigniter

嘿伙计们希望你能帮助我。

基本上我正在开发一个由其他人使用 codeigniter 创建的网站。该站点有两个实例，一个用于开发，一个用于实时。该站点仍在建设中，这意味着文件不断更改并从开发站点（经过测试后）移动到实时站点。

现在的问题是，最初创建该站点的人从几个视图中进行了一些数据库调用。而要从视图访问数据库，他手动从视图连接到数据库，即使用

```
$db=mysql_connect(...);
mysql_select_db(...); 
```

这意味着每次更改视图时，在将文件从开发站点复制到实时站点之前，我们需要更改这些视图中的变量。

将所有查询移动到模型，然后通过控制器调用它们会花费太长时间，所以想知道是否有一种方法可以访问 database.php 文件中的数据库变量并将它们作为 mysql_connect 的变量传递。

我尝试了 $this->db->database 但收到错误“未定义的属性：CI_Loader::$db”

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:06:14.833

无法从视图访问数据库对象。你也不应该这样做

```
$db=mysql_connect(...);
mysql_select_db(...); 
```

在视图中。尝试从视图中删除这些呼叫。并从模型中调用它。

这就是[codeigniter 中的 MVC 的](http://codeigniter.com/user_guide/overview/mvc.html) 用途。否则使用 codeigniter 框架有什么用。

也可以看看：

1.  [从codeigniter中的视图访问模型？](https://stackoverflow.com/questions/2719876/access-model-from-view-in-codeigniter)
2.  [CodeIgniter - 从视图内部调用函数](https://stackoverflow.com/questions/4357225/codeigniter-calling-a-function-from-inside-a-view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:05:37.673

首先不要急于将数据库调用移动到视图，而是看看这个答案：[https ://stackoverflow.com/a/5835321/1444604](https://stackoverflow.com/a/5835321/1444604)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:09:22.053

在 constant.php 中定义常量，为它们分配数据库用户名、密码、主机名等，并在您想要的任何地方使用它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-01T01:44:48.263

如果这个网站还在建设中，现在解决所有这些编程问题会比以后更好。

请记住 mysql_* 代码已被弃用，并且不会再被主机接受。

提示您可以使用有时我们忘记的内容，即在许多文本编辑器和 IDE 中替换文本的选项，通常使用快捷键 ctrl + H，您可以在许多文件中重写大量代码，但要小心，否则情况会变得更糟。

好吧...也就是说，如果您在加载数据库之前使用此代码，您在 $this->db->database() 视图中尝试执行的操作可能会起作用。我认为它应该像创建库一样工作。

$CI =& get_instance();

看一看，但即使它有效，也要尽可能避免它： [https ://www.codeigniter.com/user_guide/general/creating_libraries.html](https://www.codeigniter.com/user_guide/general/creating_libraries.html)

祝你好运！

# java - Guava Collections：限制排列大小

> ID：11120985
> 
> 赞同：6
> 
> 时间：2012-06-20T13:43:22.180
> 
> 标签：java, collections, permutation, guava

使用 guava 12 ***Collections2.permutations()***，我想知道是否可以限制排列的大小？

更准确地说，我想在 n 个元素的列表中获取 k 大小排列的列表，而不是获取所有 n 大小排列的列表。

目前，如果我传递 4 个水果的列表，***permutations()***当前将返回 24 个 4 大小排列的列表，尽管我只对检索 4 个唯一大小为 3 的排列感兴趣。

假设我有 4 种水果的清单：

```
["Banana", "Apple", "Orange", "Peach"] 
```

如果我只对大小 3 的排列感兴趣，我希望返回以下内容：

```
["Banana", "Apple", "Orange"]
["Banana", "Apple", "Peach"]
["Banana", "Orange", "Peach"]
["Apple", "Orange", "Peach"] 
```

任何人都可以提供任何解决方案的提示吗？谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T16:26:14.253

这段代码计算出变化，然后在每个唯一的 3 组上运行排列。

即对于“A”、“B”、“C”、“D”，可能性是 [[A, B, C], [A, B, D], [A, C, D], [B, C, D]]。然后我们计算每个三人组（或n-some）的排列，并将可能性附加到一个列表中。

**PermutationsOfN.processSubsets(List set, int k)**返回：[[A, B, C], [A, B, D], [A, C, D], [B, C, D]]

再进一步**PermutationsOfN.permutations( List list, int size )**返回：
[[A, B, C], [A, C, B], [C, A, B], [C, B, A], [B, C, A], [B, A, C], [A, B, D], [A, D, B], [D, A, B], [D, B, A], [B , D, A], [B, A, D], [A, C, D], [A, D, C], [D, A, C], [D, C, A], [C, D , A], [C, A, D], [B, C, D], [B, D, C], [D, B, C], [D, C, B], [C, D, B ]、[C、B、D]]

```
import java.util.Collection;
import java.util.List;

import com.google.common.collect.Collections2;
import com.google.common.collect.ImmutableList;
import com.google.common.collect.Lists;

public class PermutationsOfN<T> {
  public static void main( String[] args ) {
    List<String> f = Lists.newArrayList( "A", "B", "C", "D" );
    PermutationsOfN<String> g = new PermutationsOfN<String>();
    System.out.println( String.format( "n=1 subsets %s", g.processSubsets( f, 1 ) ) );
    System.out.println( String.format( "n=1 permutations %s", g.permutations( f, 1 ) ) );
    System.out.println( String.format( "n=2 subsets %s", g.processSubsets( f, 2 ) ) );
    System.out.println( String.format( "n=2 permutations %s", g.permutations( f, 2 ) ) );
    System.out.println( String.format( "n=3 subsets %s", g.processSubsets( f, 3 ) ) );
    System.out.println( String.format( "n=3 permutations %s", g.permutations( f, 3 ) ) );
    System.out.println( String.format( "n=4 subsets %s", g.processSubsets( f, 4 ) ) );
    System.out.println( String.format( "n=4 permutations %s", g.permutations( f, 4 ) ) );
    System.out.println( String.format( "n=5 subsets %s", g.processSubsets( f, 5 ) ) );
    System.out.println( String.format( "n=5 permutations %s", g.permutations( f, 5 ) ) );
  }

  public List<List<T>> processSubsets( List<T> set, int k ) {
    if ( k > set.size() ) {
      k = set.size();
    }
    List<List<T>> result = Lists.newArrayList();
    List<T> subset = Lists.newArrayListWithCapacity( k );
    for ( int i = 0; i < k; i++ ) {
      subset.add( null );
    }
    return processLargerSubsets( result, set, subset, 0, 0 );
  }

  private List<List<T>> processLargerSubsets( List<List<T>> result, List<T> set, List<T> subset, int subsetSize, int nextIndex ) {
    if ( subsetSize == subset.size() ) {
      result.add( ImmutableList.copyOf( subset ) );
    } else {
      for ( int j = nextIndex; j < set.size(); j++ ) {
        subset.set( subsetSize, set.get( j ) );
        processLargerSubsets( result, set, subset, subsetSize + 1, j + 1 );
      }
    }
    return result;
  }

  public Collection<List<T>> permutations( List<T> list, int size ) {
    Collection<List<T>> all = Lists.newArrayList();
    if ( list.size() < size ) {
      size = list.size();
    }
    if ( list.size() == size ) {
      all.addAll( Collections2.permutations( list ) );
    } else {
      for ( List<T> p : processSubsets( list, size ) ) {
        all.addAll( Collections2.permutations( p ) );
      }
    }
    return all;
  }
} 
```

特别提到[meriton](https://stackoverflow.com/users/183406/meriton)，他的回答帮助我解决了这个问题[。](https://stackoverflow.com/questions/4504974/how-to-iteratively-generate-k-elements-subsets-from-a-set-of-size-n-in-java)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T14:19:05.927

[尽管您可以提交功能请求](https://code.google.com/p/guava-libraries/issues/list)，但没有内置的 Guava 功能可以做到这一点。

如果我正在编写一个实现，我*认为*最简单的方法是遍历组合（使用[Gosper 的 hack](http://en.wikipedia.org/wiki/Combinatorial_number_system#Applications)），然后使用 Collections2.permutations 对这些组合进行排列。

或者，基于[此 Python 代码](http://docs.python.org/library/itertools.html#itertools.permutations)，对正常排列生成算法进行一些小的修改就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T14:28:25.183

您的问题的直接答案是：

```
public static <X> List<List<X>> test(List<X> input, final int n, final int m) {
    int x = 0;

    List<List<X>> newPerm = Lists.newArrayList();
    Collection<List<X>> perm = Collections2.permutations(input);
    for (Iterator<List<X>> it = perm.iterator(); it.hasNext(); x++) {
        if (x >= n) {
            break;
        }

        List<X> list = it.next();
        newPerm.add(Lists.partition(list, m).get(0));
    }

    return newPerm;
} 
```

进而：

```
 List<String> list = Lists.newArrayList("Banana", "Apple", "Orange", "Peach");
    List<List<String>> answer = test(list, 4, 3);
    for (List<String> list1 : answer) {
        System.out.println(list1);
    } 
```

但它只需要第一个而不是一个特别定义的集合，你最好听从路易斯的建议

# php - 将 array_multisort() 与自定义函数一起使用

> ID：11120986
> 
> 赞同：1
> 
> 时间：2012-06-20T13:43:25.250
> 
> 标签：php, arrays, multidimensional-array

我有以下数组，我想根据另一个数组对它进行排序，而不是`DESC`或`ASC`

```
$array = array(
    'note' => array('test', 'test1', 'test2', 'test3', 'test4'),
    'year' => array('2011','2010', '2012', '2009', '2010'),
    'type' => array('journal', 'conference', 'conference', 'conference','conference'),
); 
```

是否可以使用 array_multisort() 中的自定义函数来做到这一点？

例如：

```
array_multisort($array['type'], $array['year'], custom_function, $array['note']); 
```

代替：

```
array_multisort($array['type'], $array['year'], SORT_ASC, $array['note']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:21:33.197

如果您知道数组的深度，您可以简单地对每个要排序的数组元素应用[usort 。](http://be2.php.net/manual/en/function.usort.php)

这是一个根据自定义数组排序的示例：

```
<?php
$order = array(
    'first',
    'second',
    'third',
    'fourth',
    'fifth'
);

$array = array(
    array(
        'second',
        'fourth',
        'first',
        'third'
    ),
    array(
        'second',
        'first'
    )
);

foreach($array as &$value) {
    usort($value, function($a, $b) use($order) {
        return array_search($a, $order) > array_search($b, $order);
    });
}
unset($value);

var_dump($array);
/*
array(2) {
  [0]=>
  array(4) {
    [0]=>
    string(5) "first"
    [1]=>
    string(6) "second"
    [2]=>
    string(5) "third"
    [3]=>
    string(6) "fourth"
  }
  [1]=>
  array(2) {
    [0]=>
    string(5) "first"
    [1]=>
    string(6) "second"
  }
}
*/ 
```

如果您不知道数组可以走多深，我想到的唯一解决方案是递归函数：

```
<?php
$order = array(
    'first',
    'second',
    'third',
    'fourth',
    'fifth'
);

$array = array(
    array(
        'second',
        'fourth',
        'first',
        'third'
    ),
    array(
        array('second', 'first'),
        array('fourth', 'third')
    )
);

function custom_multisort($array, $order) {
    foreach($array as &$value) {
        if(is_array($value[0])) {
            $value = custom_multisort($value, $order);
        } else {
            usort($value, function($a, $b) use($order) {
                return array_search($a, $order) > array_search($b, $order);
            });
        }
    }
    return $array;
}

$array = custom_multisort($array, $order);

var_dump($array);
/*
array(2) {
  [0]=>
  array(4) {
    [0]=>
    string(5) "first"
    [1]=>
    string(6) "second"
    [2]=>
    string(5) "third"
    [3]=>
    string(6) "fourth"
  }
  [1]=>
  array(2) {
    [0]=>
    array(2) {
      [0]=>
      string(5) "first"
      [1]=>
      string(6) "second"
    }
    [1]=>
    array(2) {
      [0]=>
      string(5) "third"
      [1]=>
      string(6) "fourth"
    }
  }
}
*/ 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-20T13:47:53.450

我认为这是不可能的。而不是这样做

```
$custom_function_value = custom_function();
array_multisort($array['type'], $array['year'], $custom_function_value, $array['note']); 
```

我认为这将提供您想要的输出。

# java - Spring mvc结果页面和返回浏览器按钮

> ID：11120989
> 
> 赞同：2
> 
> 时间：2012-06-20T13:43:33.070
> 
> 标签：java, spring, jakarta-ee, spring-mvc

在我的 MVC spring 应用程序中，我使用 post 方法将表单发送到页面，以使用一些参数执行搜索。搜索结果是一个列表，并且对于每个条目都可以导航到详细信息页面。它工作正常，但是当用户尝试使用返回浏览器按钮（或 Javascript）返回结果页面时，我收到“过期页面”错误。刷新页面，它重新执行帖子提交并且工作正常。

为了防止这个错误，我添加了

```
response.setHeader("Cache-Control", "no-cache"); 
```

到搜索控制器，Safari 和 Firefox 一切正常，但是当我尝试使用 IE（8 和 9）执行 Web 应用程序时，出现相同的“过期页面”错误。

转到详细信息页面并返回而不会出现任何错误的正确方法是什么？

谢谢你的时间！
安德烈亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:58:14.033

正确的做法是使用 GET 而不是 POST：搜索是幂等操作，不会导致服务器发生任何变化，此类操作应使用 GET 完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T14:15:36.443

不使 POST 请求过期似乎破坏[了 POST 的想法](http://en.wikipedia.org/wiki/POST_%28HTTP%29)：

> 根据 RFC 2616，POST 方法应该用于请求是非幂等的任何上下文：也就是说，每次执行它都会导致服务器状态发生变化，例如向博客文章提交评论或投票在线投票。

相反，我会重组您查看详细记录的方式，可能会使用`DIV`不刷新显示结果的基础页面的覆盖。对于许多现代 Web 应用程序，使用 BACK 按钮可能会导致页面流出现问题。

# android - 通过缓存矩阵优化Android画布背景绘制

> ID：11120993
> 
> 赞同：1
> 
> 时间：2012-06-20T13:43:42.280
> 
> 标签：android, optimization, matrix, bitmap, android-canvas

我有一个正在绘制场景的 SurfaceView 画布。画布被转换以适应 1024x768 的逻辑场景大小（而实际屏幕为 800x480），并且还支持缩放/滚动导航。因为我不想在侧面出现黑色条纹（适合 4:3 到 16:9），所以我使用了不同的背景位图，它具有“拉伸”的侧面来覆盖比率差异。情节的另一个转折是我需要同时支持电话和桌子。对于平板电脑，我正在加载更高质量（尺寸）的图像，对于手机，我在从磁盘加载时缩小背景位图。下面是执行我想要的代码（尽管可能不是最好的方法），特别是，我感觉背景计算可以缓存到矩阵中以供以后使用`canvas.drawBitmap(Bitmap, Matrix, Paint);`

（此外，我无法通过使用这些偏移量翻译画布来获得 drawBitmap(Bitmap, left, top, Paint) 的等效定位，我也很好奇为什么）。

这是绘制例程：

```
public void draw(Canvas canvas) {    
    canvas.save();
    float midX = width/2;
    float midY = height/2;

    // zoom out to fit logical view, and translate for future
    // sprite drawing with logical coordinates
    // x,y and zoom are calculated in on init and updated in touch events
    canvas.translate(x, y);
    canvas.scale(zoom, zoom, midX, midY);

    // background part
    if(back != null && !back.isRecycled()) {
        // todo: these can probably be pre-calculated for optimization
        // todo: but so far I couldn't get it right..
        if(bgMatrix != null) { // this is where I'm thinking of using the cached matrix
            canvas.drawBitmap(back, bgMatrix, paint);
        }
        else {
           float offsetW = (width-back.getWidth())/2;
           float offsetH = (height-back.getHeight())/2;

           canvas.save();
           // bgScaleFactor is calculated upon setting the bg bitmap
           // it says by how much we need to scale the image to fill the canvas
           // taking into account the image (possible) downscale 
           canvas.scale(bgScaleFactor, bgScaleFactor, midX, midY);
           // this doesn't work: canvas.postTranslate(offsetW, offsetH) and use 0,0 for next draw
           canvas.drawBitmap(back, offsetW, offsetH, paint);
           // todo: here I would like to save a matrix which represents
           // how the back bitmap was drawn onto the canvas
           // so that next time these calculations can be avoided
           // this fails: bgMatrix = canvas.getMatrix();
           canvas.restore();
    }

    // draw scene shapes on transformed canvas
    if(shapes != null){
    shapes.onDraw(canvas);
}

canvas.restore();
} 
```