# StackOverflow 问答 11053000-11053999

# objective-c - 无法使用自定义颜色更改标签栏 tintColor

> ID：11053000
> 
> 赞同：2
> 
> 时间：2012-06-15T14:48:36.097
> 
> 标签：objective-c, ios, cocoa-touch, ios5

我正在尝试使用自定义颜色更改标签栏的颜色，但似乎没有办法做到这一点......

我以这种方式为 UIColor 类定义了一个类别：

```
@implementation UIColor (UakariColor)

+(UIColor *) defaultUakariColor {
    return [UIColor colorWithRed:237.0/255.0 green:28.0/255.0 blue:36.0/255.0 alpha:0];
}
@end 
```

然后我尝试以这种方式使用我的自定义颜色设置标签栏的颜色（在自定义标签栏控制器中）：

```
//Change the color of the tabbar
if([[self tabBar] respondsToSelector:@selector(setTintColor:)])
    [[self tabBar] setTintColor:[UIColor defaultUakariColor]]; 
```

但它不起作用（标签栏为黑色），如果我改为设置标准颜色，如 redcolor ：

```
[[self tabBar] setTintColor:[UIColor redColor]]; 
```

它有效，并将颜色设置为红色......

为什么使用自定义颜色不起作用？是BUG吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:40:50.743

如果你必须这样`set` `alpha(opacity)`做，`0`那么它会`like clear color`按照你的意愿去做。所以这样做：`requirment``set``1`

```
@implementation UIColor (UakariColor)

+(UIColor *) defaultUakariColor {
return [UIColor colorWithRed:(237.0/255.0) green:(28.0/255.0) blue:(36.0/255.0) alpha:1];
}
@end 
```

# asp.net - ASP.NET 动态 HTML 表更新

> ID：11053010
> 
> 赞同：1
> 
> 时间：2012-06-15T14:48:53.313
> 
> 标签：asp.net, html, dynamic

我的问题是如何在我的 HTML 文档中嵌入 ASP.NET 代码。我对这些东西很陌生，不知道如何将要执行的 ASP.NET 代码合并到我的网页中。我已经编写了要在我的站点中使用的代码，但是，我不知道如何添加此代码以便在我的网页中执行它。

我基本上只想在填写表单并按下提交按钮时更新 HTML 表格。我还希望能够在不覆盖原始行的情况下向表中添加多行。我已经想出了如何动态更新我的表格，但只是不知道如何将它合并到我的网页中。

例如，PHP（在页面顶部）：

```
<?php 
   //PHP code....
?> 
```

ASP.NET 代码呢？

任何方向/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:05:26.013

<% %> 标记可用于在 HTML 文档的任何部分中包含 ASP 代码。

```
<html>
<body>
<%
response.write("My first ASP script!")
%>
</body>
</html> 
```

来源：[http ://www.w3schools.com/asp/default.asp](http://www.w3schools.com/asp/default.asp)

# jquery - 单击链接更改父 li ID

> ID：11053018
> 
> 赞同：2
> 
> 时间：2012-06-15T14:49:16.087
> 
> 标签：jquery, css, hyperlink, anchor

```
<div id="content-container">
<ul>
<li id="link1"><a  href="http://mysite/ClassifiedPrograms/Pages/Training1.aspx">Training1</a></li>
<li id="link2" ><a  href="http://mysite/ClassifiedPrograms/Pages/Training2.aspx">Training2</a></li>

<li id="link3"  ><a href="http://mysite/ClassifiedPrograms/Pages/Training3.aspx">Training3</a></li>
<li id="link4" ><a href="http://mysite/ClassifiedPrograms/Pages/Training4.aspx">Training4</a></li>

</ul>
</div> 
```

单击任何链接时，该链接的 onclick 应更改父 li id，如果单击 link1，则使其成为 clickedlink1。我如何在 jquery 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:55:00.780

您不应该更改 ID，因为它们就是这样（在我看来）。

在这种情况下，我会使用 jQuery和跟踪类单击的内容`addClass()`，因此一旦单击，您就可以将类添加到父元素。`removeClass()``toggleClass()``clicked``li`

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

所以：

```
$(document).ready(function() {
    $("a").click(function(event){
         $(this).parent().toggleClass("clicked");
    });
}); 
```

作为跟踪单击状态的粗略示例，您可以使用`$(".clicked")`选择器来获取这些元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:55:07.427

使用 jQuery：

```
$('#content-container a).click(function(e) {
   e.preventDefault();
   $(this).parent().attr('id', 'clicked' + (this).attr('id'));
}); 
```

但你不应该真的改变id，你可以设置一个类

```
$('#content-container a).click(function(e) {
 e.preventDefault();
 $(this).parent().addClass('clicked');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:56:01.833

更改`li`单击链接时的类在这里不一定有帮助，因为它会在新页面加载后立即重置。

你可以改用这个：

```
$("a:visited").parent("li").addClass("is_visited"); 
```

这会将类“is_visited”添加到`li`已访问链接的任何位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:57:32.637

```
​$(document).ready(function(){
    $("#content-container a").click(function(){
          var id = $(this).parent().attr("id");
          $(this).parent().attr("id","clicked" + id);

    });        
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T14:55:26.313

您应该以某种方式将该数字添加到链接中，也许是一个`data-nr`属性。

然后：

1.  为链接分配事件侦听器

    `$('a').click(function(){ });`

2.  提取号码

    `var nr = $(this).attr('data-nr');`

3.  设置父id

    `$(this).parent().attr('id', 'clickedlink'+nr);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T14:56:24.457

将其放在您网站的头部或任何 Javascript 文件中：

```
$(document).ready(function () {    
$('a').click(function () {
$(this).parent().attr('id', 'clicked' + $(this).parent().attr('id'));
});
}); 
```

# c# - AX2012 C# 互操作代码类似于 X++ 中的 FieldNum

> ID：11053020
> 
> 赞同：1
> 
> 时间：2012-06-15T14:49:30.800
> 
> 标签：c#, axapta, x++, dynamics-ax-2012

我在 X++ 中有一些看起来像这样的代码：`fieldNum(InventDim, configId)`

我需要在 C# 中为 AX2012 互操作程序复制此代码。我需要这样做，因为我需要调用该方法

`EcoResProductDimensionAttribute::inventDimFieldId2DimensionAttributeRecId(FieldId _inventDimFieldId)`

我知道如何在 C# 中进行调用，但我完全不确定如何获取 FieldId。我确实找到了一篇文章[http://msdn.microsoft.com/en-us/library/cc616802.aspx](http://msdn.microsoft.com/en-us/library/cc616802.aspx)讨论了使用 dll Microsoft.Dynamics.AX.Framework.Services.Client 来访问那些特定方法，但我的 AX2012环境没有名为 Microsoft.Dynamics.AX.Framework.Services.Client 的 DLL 文件。是否有其他方法可以调用上述方法或不同的调用来访问 FieldId？

# php - 在 Capistrano 任务中引用当前服务器

> ID：11053021
> 
> 赞同：7
> 
> 时间：2012-06-15T14:49:33.547
> 
> 标签：php, ruby, deployment, capistrano, apc

如何在 Capistrano 任务中引用当前服务器？我想要`curl`一个本地文件来清除 APC 缓存，但服务器不监听，`localhost`所以我需要服务器的 IP 地址。

例如，

```
role :web, "1.1.1.1", "2.2.2.2", "3.3.3.3"

task :clear_apc, :role => :web do
    run "curl http://#{WHAT_DO_I_PUT_HERE}/deploy/clearAPC.php"
end 
```

我将使用什么变量，以便当任务在 1.1.1.1 上运行时它`curl`是 s`http://1.1.1.1/deploy/clearAPC.php`但在 2.2.2.2 上运行时它调用`curl`s`http://2.2.2.2/deploy/clearAPC.php`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-20T11:53:00.617

在 Capistrano 中，任务不会为每台服务器执行一次，run 会在每台服务器上执行您的命令。这是您应该做的：

```
task :clear_apc, :role => :web do
    find_servers_for_task(current_task).each do |current_server|

        run "curl http://#{current_server.host}/deploy/clearAPC.php", :hosts => current_server.host

    end
end 
```

接受的答案将起作用，但这个答案允许您将服务器作为变量/方法访问

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-15T16:13:18.573

有神奇的 $CAPISTRANO:HOST$

```
run "curl http://$CAPISTRANO:HOST$/deploy/clearAPC.php" 
```

应该做你想做的事。

注意：不要通过字符串插值将其用作变量，capistrano 只会替换字符串本身中的 $CAPISTRANO:HOST$。

这是一个非常奇怪且（afaik）未记录的功能:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-28T13:45:22.457

```
current_host = capture("echo $CAPISTRANO:HOST$").strip 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-07T15:42:45.543

Capistrano 3 - 服务器在角色块中可用作具有一组属性的对象：

`on roles(:app) do |server|`

因此，例如将主机名属性传递给 docker compose

```
 on roles(:app)  do |server|
    execute "docker-compose --build-arg SOME_HOST_NEEDED=#{server.hostname} ......
  end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T23:51:32.130

我想知道我正在部署的当前服务器，以便我可以向 campfire 发送消息。这是我能够弄清楚的，尽管我确信有更好的方法

```
 actions = current_task.namespace.parent.logger.instance_variable_get('@options')[:actions]
 message = "I am deploying #{fetch(:latest_release).split('/').last} using cap #{actions.join(' ')}" 
```

因此，当我将其部署到篝火时，我正在使用 cap QA2 campfire:notify deploy deploy:flex_master 部署 20121206154442

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-30T21:32:47.167

需要 capistrano (2.13.5)

```
puts current_task.namespace.logger.instance_variable_get('@base_logger').instance_variable_get('@options')[:actions].join(' ') 
```

想通了

```
puts current_task.namespace.logger.inspect 
```

# java - android中的后台线程

> ID：11053023
> 
> 赞同：1
> 
> 时间：2012-06-15T14:49:39.483
> 
> 标签：java, android, multithreading

我是一名刚开始 android 编程 3 周的研究生，我正在尝试编写一个应用程序，该应用程序从手机中提取加速度计中的数据并将其写在我的手机上。我的问题是我想在手机启动并运行时一直运行我的应用程序（从加速度计获取数据）。我的意思是，当有人打电话、发脸书等时，我的应用程序必须一直运行。那可能吗？我想得到一些参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:05:54.243

> 我的意思是，当有人打电话、发脸书等时，我的应用程序必须一直运行。那可能吗？

因此，对于长时间任务，您可以使用`AsyncTask`or `Services`。如果你想执行一些任务并且它必须在它没有连接任何东西时运行`Activity`（例如音乐播放器，在内存管理器释放内存后仍然运行的 RSS），你应该决定使用`Services`，你也可以`Services`结合`AsyncTask`.

`Services`是强大的工具，但与它们一起工作并非易事。您只能及时执行一个`Service`，并且只能`Service`运行一个，一个实例，一个副本。这一切都不是免费的，所以你必须小心，因为当你实施`Service`太脏时，可能会导致电池过早耗尽。有更多方法可以开始`Services`，但您必须阅读一些教程和指南。我建议检查一下：[Services](http://developer.android.com/reference/android/app/Service.html) , [ServicesDemo - Using Android Services](http://marakana.com/forums/android/examples/60.html) , [Android Service Tutorial](http://www.vogella.com/articles/AndroidServices/article.html) , [Local Service | Android 初学者教程](http://saigeethamn.blogspot.com/2009/09/android-developer-tutorial-for_04.html)

还可以查看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)、[Android 线程、处理程序和 AsyncTask - 教程](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:54:21.170

您可以使用`Services`. 看[这里](http://developer.android.com/guide/topics/fundamentals/services.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:25:50.857

如果您希望关闭应用程序的活动，但仍应在后台运行一个进程来完成您所需的工作，那么您可以使用`Service, or IntentService`（使用意图服务，例如，您希望在一段时间后进行更新）。

# iis-6 - IIS 6.0 默认网页不起作用

> ID：11053024
> 
> 赞同：0
> 
> 时间：2012-06-15T14:49:39.817
> 
> 标签：iis-6

在服务器 2003 r2 上运行的 IIS 6.0 中，找不到默认网页，但如果我将 url 更改为专门转到默认页面，它就可以工作。

ie website.com 在 defaultwebsite.html 设置为默认网站时不起作用，但 website.com/defaultwebsite.html 有效。

我做过一些简单的事情，比如启用默认内容页面和重置 iis，但我对它不太熟悉。

我有另一个网站工作得很好，我将设置与之进行了比较。唯一的区别是它在 32 位上运行，而这个新版本是 64 位。是否有任何特别需要更改或添加的设置才能获得相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:27:21.773

这修复了它：

在 Windows 注册表中，打开以下节点：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0

创建一个名为 EnableExtensionlessUrls 的新 DWORD 值。将 EnableExtensionlessUrls 设置为 0。这将禁用无扩展 URL 行为。保存注册表值并关闭注册表编辑器。运行 iisreset 命令行工具，这会导致 IIS 读取新的注册表值。

确保您在 64 位系统上，在注册表中您位于 Wow6432Node 下，而不仅仅是 SOFTWARE：HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\ASP.NET\4.0.30319.0\EnableExtensionlessUrls

# c# - 在源代码中解析 C# 未格式化的字符串，然后转换为字符串格式

> ID：11053026
> 
> 赞同：0
> 
> 时间：2012-06-15T14:49:46.303
> 
> 标签：c#, .net, regex

应用程序中有数千次 log4net 调用是使用字符串连接的样式完成的，而不是使用像“{0} 大于 {1}”这样的字符串格式。

因此，我们编写了一个程序，该程序将使用 Regex 解析所有 .cs 文件以查找 log4net 日志记录语句。它提取括号 () 之间的代码，然后调用一个方法来重新格式化它并返回结果。然后它重写源代码文件。

这个问题与重新格式化日志语句的方法有关。

它接收一个字符串参数并返回字符串。

以下是日志语句的示例：

```
"Column " + column + " Seq Cnt: " + sequentialCount + ": Seq Avg: " + (sequentialTotal / sequentialCount) 
"Opening file for writing copy protection failed. Retrying.", ex
"for assert " + value.ToString("X")
"ExpirationTime()"
"count = " + count + ", round << " + count + " = " + (round << count)
"Total Diff Bytes = " + (7*count)
(series.Count - i - 1) + " " + series.Time[i] + " O,H,L,C:" + series.Open[i].ToDouble() + "," +
                            series.High[i].ToDouble() + "," + 
                            series.Low[i].ToDouble() + "," + 
                            series.Close[i].ToDouble()
"Recovered orders from snapshot: \n" + OrderStore.OrdersToString() 
```

从本质上讲，该计划似乎应该将 Regex.Replace() 与 MatchEvaluator 一起使用。

Regex.Replace 的正确正则表达式是什么？

这些似乎是要求：

1.  基本上在字符串 "\s*+\s*(.*)\s+" 中找到每个中断（过度简化）。
2.  将每个匹配项替换为字符串中 {0} 形式的标记，然后将指定的值作为方法的参数。
3.  必须识别并跳过引用异常的 log.Debug("message",ex) 形式的调试方法。

当然，代码会将调用切换到 DebugFormat() InfoFormat() 等等。

上述正则表达式的问题在于它将此匹配为第一个匹配项：

" + column + " Seq Cnt: " + sequenceCount + "

代替：

“+列+”

我不能简单地使用 ([^"] *) 代替 (.* ) 或 ([^+]*) 因为某些值有额外的加号或使用引号作为方法的参数。

所以它需要某种方式来表示匹配所有字符，除非匹配模式 \s+\s" ，这意味着加号后跟由可选空格分隔的引号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:58:53.070

您可以使量词变得懒惰。例如：

```
"\s*\+\s*(\S.*?)\s*\+\s*" 
```

# visual-studio-2010 - VS2010 中缺少 Debug->Exceptions 选项

> ID：11053028
> 
> 赞同：5
> 
> 时间：2012-06-15T14:49:56.507
> 
> 标签：visual-studio-2010

我希望我的代码因异常而中断，因此通常在 VS2010 中，我会转到对话框 Debug->Exceptions... 来启用它。

但是在新安装的 VS2010 Professional 中，Debug 菜单中的该选项完全缺失。有没有人见过这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-17T09:30:55.917

![在此处输入图像描述](../Images/831fd1fff6fa8608298047ff14eec4d0.png)从这里：

[http://msdn.microsoft.com/en-us/library/d14azbfh.aspx#addexceptionscommand](http://msdn.microsoft.com/en-us/library/d14azbfh.aspx#addexceptionscommand)

做这个：

# 将异常命令添加到调试菜单

*   在工具菜单上，单击自定义。
*   出现自定义对话框。
*   单击命令选项卡，然后在菜单栏列表中单击调试。
*   单击添加命令。
*   在“添加命令”对话框的“类别”中，单击“调试”。
*   在命令中，单击例外，然后单击确定。
*   （可选）您可以单击“下移”来调整“调试”菜单上“异常”命令的位置。
*   单击关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:11:03.710

Visual Studio 可用于各种语言和环境。因此，基本 IDE 对每个目的都有不同的设置（这有点像 Eclipse 透视图）。使用某种语言配置文件并不意味着 VS 不能用于开发另一种语言，但 IDE 的某些功能可能不可用。要解决此问题，可以按照[此处](http://msdn.microsoft.com/en-us/library/f1z20s6z%28v=vs.100%29.aspx)所述修改 IDE 的配置文件。

# sql - 如何从 SQL 表中获取最小值？

> ID：11053029
> 
> 赞同：5
> 
> 时间：2012-06-15T14:49:57.037
> 
> 标签：sql

我有一张如下表

```
ID   Date  
1    Null  
1    Null  
1    Null  
1    02/02/2012  
1    02/03/2012  
1    02/04/2012  
1    02/05/2012 
```

我想从上表中取一个最小日期，结果应该是`Null`

我试图写

```
select min(date), Id from Table group by ID 
```

然后结果是`02/02/2012`，但我想要`Null`。

除了下面的方法，还有其他方法可以从上表中提取 Null 值吗？

```
select top 1 date, ID from table order by date asc 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:01:43.790

假设您的 dbms 是 SQL-Server。

如果您想分组`id`但无论如何选择所有字段，您可以使用`cte`with`ROW_NUMBER`函数：

```
WITH cte AS(
  SELECT x.*
  , RN=ROW_NUMBER()OVER(Partition By id Order By date)
  FROM Table x
)
SELECT * FROM cte 
WHERE RN=1 
```

[http://sqlfiddle.com/#!3/cc2a4/7](http://sqlfiddle.com/#!3/cc2a4/7)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T14:56:59.743

默认情况下，函数 MAX 和 MIN 在评估数据时不计算 NULL。

以这种方式尝试，应该可以解决问题：

```
SELECT 
CASE WHEN MIN(COALESCE(Date, '19001231')) = '19001231' THEN NULL ELSE MIN(Date) END AS Date,
Id 
FROM X 
group by ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:10:00.827

我想他们中的一些人已经给出了答案。但最终结果与以下查询一起使用

```
SELECT CASE WHEN   MIN(coalesce(date, '1900-01-01')) = '1900-01-01' THEN NULL ELSE MIN(date) END AS Date, ID
FROM table
GROUP BY ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T21:20:58.297

You can also do a simple check for 'NULL'. I didn't return an "ID" in the example since the "ID" seems meaningless in the example schema/query given.

```
 IF (EXISTS(SELECT TOP 1 * FROM x WHERE date IS NULL)) SELECT NULL AS MinDate
    ELSE SELECT MIN(date) AS MinDate FROM x; 
```

[http://sqlfiddle.com/#!3/d5fca/11](http://sqlfiddle.com/#!3/d5fca/11)

# symfony - 无法更新 symfony 2.0.15

> ID：11053031
> 
> 赞同：0
> 
> 时间：2012-06-15T14:50:10.427
> 
> 标签：symfony, assetic

我被困在这里：

> 安装/更新 AsseticBundle 9c1b7269a4517d1ae94af2dc0d6d6fc4b31e6c10 HEAD 现在位于 41b5913 Merge pull request #27 from stof/disable_profiler sh: /app/console: Permission denied sh: /app/console: Permission denied

存储库有什么问题？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:48:46.680

看来我需要让我的应用程序/控制台 chmod 777。我从 2.0.12 开始一直在更新，但奇怪的是我现在才收到那个错误。

另一个建议是使 git 存储库为 https；但这没有用。

# c# - 扩展现有活动设计器

> ID：11053034
> 
> 赞同：0
> 
> 时间：2012-06-15T14:50:18.940
> 
> 标签：c#, wpf, workflow-foundation-4

我希望创建一个与“If”活动基本相同的自定义活动，但想向设计器添加一个额外的按钮（就在条件表达式文本框的上方）。有谁知道这是否可能，或者我是否必须创建一个全新的自定义活动（以及一个新设计师），其功能与“如果”活动相同，但添加了我的额外部分？

感谢您的时间。

问候，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:23:50.560

取决于您是要重新托管设计器还是要使用 VS 中的功能。使用重新托管的设计器，有几种方法可以更新现有活动的 UI，例如使用[WPF 装饰器](http://msdn.microsoft.com/en-us/library/ms743737.aspx)

有关示例，请参阅[可视化工作流跟踪。](http://msdn.microsoft.com/en-us/library/ee624139.aspx)

# php - 新 COM("PowerPoint.Application") 不起作用

> ID：11053035
> 
> 赞同：1
> 
> 时间：2012-06-15T14:50:19.280
> 
> 标签：php, png, powerpoint

我正在尝试将 ppt 文件上的幻灯片转换为 PNG 文件，但我的代码有问题。

在本地测试中，脚本停留在这一行：

```
$ppApp = new COM("PowerPoint.Application") or die ("Unable to instantiate PowerPoint"); 
```

然后显示`"Maximum execution time of 30 seconds exceeded";`

当我在我的实时服务器上运行时，脚本第一次工作，但随后出现错误

> “致命错误：未捕获的异常‘异常’，消息‘无法关闭 ppt 文件 1251.pptx。’

我在 Windows 服务器上，我认为我使用 ppt 进程的方式有问题。

这是代码：

```
$ppApp = new COM("PowerPoint.Application") or die ("Unable to instantiate PowerPoint");
    $ppApp->Visible = True;
    $strPath = realpath(basename(getenv($_SERVER["SCRIPT_NAME"])));
    $ppName = $jobQuery['id'].".pptx";
    $FileName = "MyPP";

    //*** Open Document ***//
    $ppApp->Presentations->Open(realpath($ppName));

    //*** Save Document ***//
    $p_opned =  $ppApp->ActivePresentation->SaveAs($strPath."/".$jobQuery['id']."_".$FileName,18);
    //$ppApp->ActivePresentation->SaveAs(realpath($FileName),17);
    $ppApp->Quit();
    $ppApp = NULL;
    unset($ppApp); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:50:16.637

我认为您的问题可能与您的保存位置有关，或者只是找不到您的文件，您确定您尝试保存的位置实际上存在于您的代码中吗？我不太确定？

```
$strPath = realpath(basename(getenv($_SERVER["SCRIPT_NAME"]))); 
```

**应该：**

```
$strPath = realpath(dirname(__FILE__)); 
```

**您确定此文件实际存在于以下位置：**

```
$ppName = $jobQuery['id'].".pptx"; 
```

检查它：

```
file_exists($ppName) 
```

在这里寻找类似的问题：[Fatal Error in convert PPT to PNG in PHP](https://stackoverflow.com/questions/8786379/fatal-error-in-convert-ppt-to-png-in-php)

**编辑：**

试试下面的，我认为你的 $p_opned 保持对你的 $ppApp 对象的引用是开放的，因此你的实例没有被正确删除。

```
//*** Save Document ***//
$ppApp->ActivePresentation->SaveAs($strPath."/".$jobQuery['id']."_".$FileName,18); 
```

**编辑2：**

根据要求尝试包装您认为导致异常的行（因此假设它是这一行）：

```
try {
  //*** Save Document ***//
  $ppApp->ActivePresentation->SaveAs($strPath."/".$jobQuery['id']."_".$FileName,18);
} catch (Exception $e) {
    echo 'Exception message: ',  $e->getMessage(), "\n";
} 
```

虽然再次查看您的错误消息，但它指的是您尝试打开的原始文件（1251.pptx），因为您尝试使用不同的后期修复（代码中未提及）保存文件。

如果上述方法不起作用，您可以尝试将 Exception try / catch 包装在“打开”脚本行周围，或者您可以尝试在退出之前添加：

```
$ppApp->ActivePresentation->Close(); 
```

如果您的错误是因为 Powerpoint 在第一个实例调用后仍然挂起，那一定是因为您在某处仍然有一个活动的引用，所以请尝试检查您的所有代码。如果您仍然收到错误，您应该在您的问题中包含完整的错误消息并从您的问题中删除 Max execution 错误消息这实际上不是问题（我假设您仍然没有得到“超过 30 秒的最大执行时间“消息了吗？）。

**最后，您可以随时尝试 PowerPoint 库：**

[http://phppowerpoint.codeplex.com/](http://phppowerpoint.codeplex.com/)

# macos - 什么是链接的向上依赖？

> ID：11053038
> 
> 赞同：3
> 
> 时间：2012-06-15T14:50:30.697
> 
> 标签：macos, ld

`ld`支持一些用于指定“OS X 上的向上依赖项”的选项。这里的向上依赖项是什么？

```
-upward-lx  This is the same as the -lx but specifies that the dylib is an upward dependency.
-upward_framework name[,suffix]
             This is the same as the -framework name[,suffix] but also specifies that the framework is an upward dependency. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T02:47:11.743

向上依赖是违背正常依赖顺序的东西。假设库“A”中的代码调用库“B”中实现的函数；库“A”依赖于“B”。现在假设库“B”还包含依赖于库“A”中某些内容的代码；这是一种向上的依赖（这通常是一件非常糟糕的事情）。

我认为如果您遇到这样的情况，那么您应该通过中介进行间接回调而不是依赖链接器来解决代码中的问题。

回调/中介方案的示例如下...

想象一下，库“A”中的代码仍然依赖于库“B”，但库“B”具有注册回调函数以执行特定操作的机制。作为中介的第三个模块可以安排库“A”中的函数通过库“B”的回调来调用，而不是让库“B”直接调用库“A”。链接器现在只需解决从“A”到“B”的依赖关系，并且在运行时伪造从“B”到“A”的受控关系，而不是在链接阶段需要向上依赖链。

# sql-server-2008 - 在远程数据库服务器上等待查询完成需要多长时间？

> ID：11053043
> 
> 赞同：0
> 
> 时间：2012-06-15T14:50:53.850
> 
> 标签：sql-server-2008, query-optimization

我被要求根据特定 ID（此处为 406f-871b-a3ee71f7038）获取信息，如下所示：

```
select * from BIG_Session (nolock)
where SessionSID like '%406f-871b-a3ee71f70386%' 
```

这是低效的吗？等待它完成需要多长时间？我等了 30 秒，觉得太长了，就取消了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:52:57.160

您将使用前缀通配符进行扫描`%`。如果您知道这`406f...`将是字符串的开头，则可以使用可能的查找：

```
select * from BIG_Session
where SessionSID like '406f-871b-a3ee71f70386%' 
```

请注意，我取出了第一个百分号。

> 等待它完成需要多长时间？

这取决于您、您的环境、您的用户以及您的业务需求可接受的持续时间。30 秒在某些情况/环境中是可以接受的，但在其他情况下是有害的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:54:04.977

如果您正在搜索特定的 ID，我认为`=`会比`LIKE`：

```
select * from BIG_Session (nolock)
where SessionSID = '406f-871b-a3ee71f70386' 
```

至于多长时间，这是主观的，并且在不了解您的环境和期望的更多细节的情况下难以量化。

关于您的使用，也可能值得一读这个 SO 问题`NOLOCK`：[NOLOCK (Sql Server hint) 是不好的做法吗？](https://stackoverflow.com/questions/1452996/is-the-nolock-sql-server-hint-bad-practice)

# php - 如何在域上设置静态网站？

> ID：11053046
> 
> 赞同：0
> 
> 时间：2012-06-15T14:50:57.350
> 
> 标签：php, dns

我希望 url [http://welcome.com](http://welcome.com)（例如）呈现来自 url [http://www.cleaning.com/welcome](http://www.cleaning.com/welcome)的内容，而不重定向到cleaning.com。

因此，当人们访问welcome.com 时，他们会看到来自[http://www.cleaning.com/welcome](http://www.cleaning.com/welcome)的内容，但welcome.com 仍保留在地址栏中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:54:40.657

如果两个站点都在同一台服务器上，您可以将虚拟主机设置为`example.com`目录`DocumentRoot`路径`cleaning.com/welcome`。您如何完成此操作取决于您的网络服务器。在 apache 上，这将类似于：

```
<VirtualHost *:80>
    #rest of config
    DocumentRoot "/var/www/cleaning.com/web/"
    ServerName www.cleaning.com
</VirtualHost>
<VirtualHost *:80>
    #rest of config
    DocumentRoot "/var/www/cleaning.com/web/example"
    ServerName example.com
</VirtualHost> 
```

如果它们不在同一台服务器上，您可以使用（我不相信我这么说）框架集。

PS：框架集在 HTML5 上已过时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:31:11.630

如果需要，您可以使用 JavaScript 和 jQuery 来执行此操作。这样您就不必更改 Web 服务器配置。请参阅 jsfiddle：http: [//jsfiddle.net/seMUj/1/](http://jsfiddle.net/seMUj/1/)。虽然我同意上面的评论，但你不应该那样做。

HTML：

```
<div style="height:100%" id="a"></div>​ 
```

JS：

```
$('#a').html('<object style="width:100%;height:100%" data="http://saltwatertides.com/">');​ 
```

# jquery - 砌体已加载但无法正常工作

> ID：11053052
> 
> 赞同：0
> 
> 时间：2012-06-15T14:51:18.957
> 
> 标签：jquery, jquery-plugins, jquery-masonry

我已经在[这个页面](http://memeqc.com/memes.php)上设置了 Masonry 演示。

我看到插件加载正常，没有错误。我已经定义了列宽，但它仍然不起作用。

我找了几个小时也没发现什么问题？！你看到问题是什么了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T15:37:53.460

根据此处的文档：masonry docs，您的 css itemSelector 类需要指定宽度并向左浮动。你定义了浮点数，但我没有看到宽度规则。此外，由于 itemSelector 的锚标记中有图像，因此最好确保这些宽度与 itemSelector 的宽度相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:03:54.663

根据您的标记，您需要在砌体选项中指定类“box2”。所以你应该尝试：

```
$container.masonry({
    itemSelector : '.box2',
    columnWidth: 125
}); 
```

试试看，看看你是否成功。

# multithreading - 异步非阻塞循环与多线程的真实例子？

> ID：11053054
> 
> 赞同：3
> 
> 时间：2012-06-15T14:51:23.900
> 
> 标签：multithreading, node.js, asynchronous, io, event-loop

我最近一直在使用 Node.js 进行开发，并且对事件循环的情况有一个很好的了解。鉴于我有使用 javascript 的经验，Node 对我来说很有意义，但我想知道，有没有人曾经停止使用多线程系统并使用异步来提高性能？或者选择使用异步而不是多线程来提高性能？

什么是异步非阻塞 I/O 在现实世界中战胜多线程的真实例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:59:19.793

无论您是否使用多线程，所有现代操作系统 I/O 操作本质上都是异步的。所以说“异步更快”实际上是不正确的。但是，异步编程允许您以几乎相同的性能保存线程。这在服务器上很重要，因为您可以获得的线程数是有限的（受可用内存限制）。

因此，使用异步不一定会获得更好的性能，但在 I/O 繁重的任务上具有更好的可扩展性。异步甚至可能在 CPU 密集型任务上表现更差，因为您无法从服务器内核之间的并行工作中受益。另一方面，I/O 与不涉及 CPU 的中断和 DMA 一起工作。这就是您获得足够好的性能的方式，因为您可以继续执行直到硬件通过发出中断信号通知您 I/O 完成。

编辑：我只是发现我没有回答你的实际问题。但是，只要您知道异步如何使您受益，您可能就不需要真实世界的示例。只知道：

*   与数据库通信是 I/O
*   从磁盘读取或写入磁盘是 I/O
*   通过网络发送/接收数据包是 I/O
*   剩下的就是 CPU

根据您使用的是 I/O 还是 CPU，更多的异步可能会给您带来更好的可扩展性或更差的性能。通常，Web 应用程序是 I/O 密集型的，这得益于异步编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:49:13.453

编码更容易，因为您不需要管理多个进程/线程之间的一致性/数据交换。
当只创建一个简单的 Web 应用程序时，这种模型并没有真正的优势，但是当有一个服务器同时管理多个连接时，传递的数据以某种方式捆绑在一起。

性能方面有一些优势，因为拥有多个线程/进程往往比单个线程使用更多的内存。
简单的数学运算：让一个线程处理一个连接，每个线程需要 1MB 的 RAM，很容易计算出在一台计算机上可以连接多少连接。使用 node.js，您有一个处理多个连接的进程，例如，每个新连接需要 20MB 的 RAM 和 4kb。我想你应该已经明白了。
异步 I/O 并不快，但它可以帮助您消耗更少的资源，同时多次执行相同的操作。

# swing - 在存在重复行的情况下突出显示 JTextArea 中的文本

> ID：11053056
> 
> 赞同：2
> 
> 时间：2012-06-15T14:51:25.853
> 
> 标签：swing, jtextarea

我有一个`JTextArea`由行组成的（其中一些可能彼此重复）。我有一个要求，我必须在右键单击时突出显示选定的行。我用来突出显示的代码如下：

```
String highlightedText = textArea.getSelectedText();
if(highlightedText != null)
{
   try{
      int index = textArea.getText().indexOf(highlightedText, textArea.getCaretPosition());
      textArea.getHighlighter().addHighlight(index - 1, index + highlightedText.length(),
      new DefaultHighlighter.DefaultHighlightPainter(Color.ORANGE));
   }catch (BadLocationException ex) {           
   }
} 
```

虽然右键单击时的突出显示有效，但问题是在存在重复项的情况下我无法获得所选行的索引。所以如果有像

AAAA
BBBB
AAAA
CCCC
DDDD
AAAA

当用户尝试突出显示此特定行时，我无法获得第二个“AAAA”的索引。有人可以帮我提出一个想法/建议来解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:38:26.650

您几乎自己拥有它，但几乎没有问题。

1.  您应该使用`getSelectionStart()`而不是`getCaretPosition()`.
2.  亮点应该`index`从不开始`index-1`。

**请看下面的例子。**选择要突出显示的内容，右键单击 textArea 或按按钮突出显示您的选择：

```
public class HighlightingTextArea {    
    public static void main(String[] args) {    
        SwingUtilities.invokeLater(new Runnable() {    
            @Override
            public void run() {
                final JTextArea textArea = new JTextArea(10, 44);
                textArea.append("AAAA\nBBBB\nAAAA\nCCCC\nDDDD\nAAAA");
                JButton b = new JButton(new AbstractAction("highlight") {    
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        highlightTextAreaSelection(textArea);
                    }
                });
                textArea.addMouseListener(new MouseAdapter() {    
                    @Override
                    public void mousePressed(MouseEvent e) {
                        super.mousePressed(e);
                        if (e.getButton() == MouseEvent.BUTTON3) {
                            highlightTextAreaSelection(textArea);
                        }
                    }
                });
                JPanel panel = new JPanel(new BorderLayout());
                panel.add(textArea);
                panel.add(b, BorderLayout.SOUTH);
                JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setContentPane(panel);
                f.pack();
                f.setVisible(true);
            }
        });
    }

    private static void highlightTextAreaSelection(JTextArea textArea) {
        String highlightedText = textArea.getSelectedText();
        if (highlightedText != null) {
            try {
                int index = textArea.getText().indexOf(highlightedText, textArea.getSelectionStart());
                textArea.getHighlighter().addHighlight(index, index + highlightedText.length(),
                        new DefaultHighlighter.DefaultHighlightPainter(Color.ORANGE));
            } catch (BadLocationException ex) {
            }
        }
    }
} 
```

# php - 如何将 JSON 数组转换为 HTML 表

> ID：11053057
> 
> 赞同：0
> 
> 时间：2012-06-15T14:51:26.257
> 
> 标签：php, html, json

我在 PHP 脚本中有以下函数，它返回和 API 调用：

```
if (in_array((int)$result['code'], array(200, 201))) {
    $presult=(json_decode($result['body'],true));
    print_r($presult);
 } else {
    print("error parsing result");
    var_dump($result);
 } 
```

$presult 以下列格式显示原始数据：

```
Array
(
    [contacts] => Array
        (
            [users] => Array
                (
                    [0] => Array
                        (
                            [first_name] => Peter
                            [last_name] => Parker 
```

我想在 HTML 表中打印此数组，其中列序列号、名字、姓氏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:57:00.767

我猜数组索引是序列号，所以你可以这样做：

```
echo '<table>
<tr>
   <th>Serial Number</th>
   <th>First name</th>
   <th>Last name</th>
</tr>';

foreach($presult['contacts']['users'] as $number => $user){
   echo '<tr>
            <td>' . $number . '</td>
            <td>' . $user['first_name'] . '</td>
            <td>' . $user['last_name'] . '</td>
         </tr>';
}

echo '</table>'; 
```

如果需要，不要忘记转义 HTML 输出。

# java - 用于发送电子邮件的后台应用程序

> ID：11053059
> 
> 赞同：0
> 
> 时间：2012-06-15T14:51:38.427
> 
> 标签：java

我需要用 Java（Windows 平台）开发一个小应用程序，它应该一直保留在内存中并访问 mysql 数据库。如果将一行插入到具有特定状态的特定表中，我应该能够生成一封电子邮件并将其转发给特定的人。

我知道如何访问 mysql 数据库，检查行状态和生成电子邮件等。但是如何编写后台进程来监听有趣的行以及可以使用哪些工具来完成这项工作是我想知道的. 请阐明一些观点。

谢谢你。

苏迪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:51:55.523

在后台自动运行的应用程序的 Windows 术语是“服务”。有几种方法可以将 Java 应用程序变成服务，请参阅这个问题：[How to create a windows service from java app](https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:18:31.230

这应该让你开始：

1.  后台应用程序：
    里面有一个 sleep 的循环。
    每次休眠后，检查数据库表。

2.  发送电子邮件：
    Google JavaMail

# php - 数据库错误代码 1146 - 本地与在线

> ID：11053061
> 
> 赞同：2
> 
> 时间：2012-06-15T14:51:44.920
> 
> 标签：php, sql, database, localhost

我是这个站点的新手-请温柔一点：

本地主机上的 P mySQL 数据库适用于插入语句，但是一旦我将数据库连接更改为服务器连接，它就会给我错误：错误代码 1146：1146 没有任何错误描述. 可能是什么原因？

根据我的错误捕获逻辑，连接一直成功到查询运行的部分。在本地版本上，它就像一个魅力。有任何想法吗？

:::::::::::::::::::::::::::::::::::::::::::::::::: ::::::::::::::::::::::::::::::::::::::::::

```
if($errors == 0)
        {
            $DBConnect = @mysql_connect("db.start.ca", "nokeekwe", "classifiedlol");
            if($DBConnect === FALSE)
            {
                echo "<p>Unable to connect. " .
                "Error code " . mysql_errno() . ": " .
                mysql_error() . "</p>\n";
                $errors++;
            }
            else
            {
                $DBName = "nokeekwe";
                $result = @mysql_select_db($DBName, $DBConnect);
                if($result === FALSE)
                {
                    echo "<p>Unable to select DB. " .
                    "Error code " . mysql_errno($DBConnect) .
                    ": " . mysql_error($DBConnect) .
                    "</p>\n";
                    $errors++;
                }
            }
        }

        if($errors > 0)
        {
            echo "<p>Please use your browser's BACK button" .
            " to  return to the form and fix your errors.</p>\n";
        }

        if($errors == 0)
        {

            $title = stripslashes($_POST['title']);
            $desc = stripslashes($_POST['desc']);
            $req = stripslashes($_POST['req']);
            $employer = stripslashes($_POST['employer']);
            $phone = stripslashes($_POST['phone']);
            $fax = stripslashes($_POST['fax']);
            $email = stripslashes($_POST['email']);
            $address = stripslashes($_POST['address']);
            $insertJob = "INSERT INTO tbljobs (jobTitle, jobDesc, jobReq, jobEmployer, jobPhone, jobFax, jobEmail, jobAddress) VALUES ('$title', '$desc', '$req', '$employer', '$phone', '$fax', '$email', '$address')";
                $QueryResult = mysql_query($insertJob, $DBConnect); // Run the Query Now woohoo.
                if($QueryResult === FALSE)
                {
                    echo "<p>Unable to save your job. " .
                    " Error code " .
                    mysql_errno($DBConnect) . ": " .
                    mysql_errno($DBConnect) . "</p>\n";

                    //echo $insertJob;

                    $errors++;
                }
else
{
            echo "Job Lead Saved!";}
            mysql_close($DBConnect);
        } 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:56:03.650

错误 1146 表示您试图访问不存在的表。

[http://dev.mysql.com/doc/refman/5.0/en/error-messages-server.html](http://dev.mysql.com/doc/refman/5.0/en/error-messages-server.html)

确保本地和服务器系统上的数据库结构相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:56:05.820

> 错误：1146 SQLSTATE：42S02 (ER_NO_SUCH_TABLE)
> 
> 消息：表 '%s.%s' 不存在
> 
> [http://dev.mysql.com/doc/refman/5.0/en/error-messages-server.html](http://dev.mysql.com/doc/refman/5.0/en/error-messages-server.html)

好像你还没有设置你的数据库表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:58:16.943

您已将连接信息从本地数据库服务器更改为在线，但您是否真的将本地数据库表移动到在线服务器？

1146 表示该表不存在。

# objective-c - iPhone 项目默认为 iPad 视图控制器

> ID：11053063
> 
> 赞同：2
> 
> 时间：2012-06-15T14:51:49.317
> 
> 标签：objective-c, ios, uistoryboard, ios-universal-app

我通常为 iPad 创建应用程序，但我决定为 iPhone 制作一个。在创建项目时，我告诉 XCode 这是针对 iPhone 的。创建项目后，target/devices/everything 表示它是为 iPhone 构建的。但是，在情节提要中，每个视图控制器都默认为 iPad 尺寸/尺寸。如何告诉项目默认为 iPhone 尺寸？

另外，如何将已经创建的情节提要文件更改为正确的尺寸（无需硬编码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:30:52.657

要回答您的第一个问题，当您创建一个新的故事板文件（文件 -> 新建 -> 文件... -> 用户界面 -> 故事板）时，Xcode 会提示您为故事板选择一个设备系列。只需选择 iPhone 而不是 iPad。

更改现有的故事板比较棘手，但是如果仅制作新文件需要太长时间，[这个问题应该为您提供解决方案。](https://stackoverflow.com/questions/8465769/convert-storyboard-from-iphone-to-ipad)

# shell - 获取不在 XML 文档中的 xml 标记的内容

> ID：11053069
> 
> 赞同：1
> 
> 时间：2012-06-15T14:52:10.157
> 
> 标签：shell, unix, sed, awk

**不使用 XML 解析器** 我想获取 XML 标记的内容，所以我的 XML 文件看起来像（包括的不仅仅是 XML，这只是 XML 部分）

```
<ns1:CarrierServiceId>PD_PRIVATPAKKER_W</ns1:CarrierServiceId>
<ns1:LabellingReturned>0</ns1:LabellingReturned>
<ns1:DeliveryDate>2012-07-27T23:00:00Z</ns1:DeliveryDate>
<ns1:DespatchDate>2012-07-26T22:59:59Z</ns1:DespatchDate>
<ns1:International>0</ns1:International>
<ns1:ClearanceDocumentation>0</ns1:ClearanceDocumentation>
<ns1:ExceptionCode>0</ns1:ExceptionCode> 
```

我将如何获得 CarrierServiceId 的内容，所以我只获得 PD_PRIVATPAKKER_W 而没有其他我设法使用下面的行，但我需要内容

```
FOUND=$(awk '/<ns1:CarrierServiceId>/ {print $1}' TEST.tmp)

echo "${FOUND}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:58:34.617

使用尖括号作为分隔符并打印该字段。

```
FOUND=$(awk -F '[<>]' '/<ns1:CarrierServiceId>/ {print $3}' TEST.tmp) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:00:11.747

与`grep`：

```
grep -Po '(?<=CarrierServiceId>).*?(?=<)' inputFiles 
```

# c++ - 有限大小的队列

> ID：11053070
> 
> 赞同：9
> 
> 时间：2012-06-15T14:52:11.843
> 
> 标签：c++, boost, queue, std

我需要一个关于*n 个*项目的队列，其中插入 ( *n* +1)^个项目会删除第 0^个项目，并且只能在“背面”进行插入。
boost 或标准库中是否已经存在这样的结构？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T15:00:23.370

您可以使用由 a[`boost::circular_buffer`](http://www.boost.org/doc/libs/1_49_0/libs/circular_buffer/doc/circular_buffer.html)包裹的 a [`std::queue`](http://en.cppreference.com/w/cpp/container/queue)，如下所示：

```
#include <queue>
#include <boost/circular_buffer.hpp>

typedef std::queue<my_type, boost::circular_buffer<my_type>> my_queue;
const int n = 3;
...
my_queue q(boost::circular_buffer<my_type>(n));
q.push(1);
q.push(2);
q.push(3);
q.push(4); // queue now contains 2,3,4 
```

# jquery - JQuery 缓和与 JCarouselLite 的冲突和

> ID：11053072
> 
> 赞同：0
> 
> 时间：2012-06-15T14:52:15.050
> 
> 标签：jquery, jquery-plugins, accordion, jcarousellite

几天来，我一直在研究并试图解决这个问题。

我正在使用带有嵌套级别和 JCarouselLite 的 Bullet List Accordian Menu。

冲突似乎与 JQuery.easing 相关：
* ddaccordian 适用于 jquery.easing.1.3.js - 但不适用于 1.1
* jcarousellite 适用于 jquery.easing.1.1.js - 但不适用于 1.3

我也尝试过使用：
* `var $j = jQuery.noConflict()`- 无济于事。
* jquery.easing.compatibility.js（在这里找到：http: [//gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/)）也没有工作。

以下是我的标头代码：

```
<link href="style/main5.css" rel="stylesheet" type="text/css" />
<link href="style/bullet5.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jCarouselLite.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="js/ddaccordion.js">
/***********************************************
* Accordion Content script- (c) Dynamic Drive DHTML code library (www.dynamicdrive.com)
* Visit http://www.dynamicDrive.com for hundreds of DHTML scripts
* This notice must stay intact for legal use
***********************************************/
</script>
<script type="text/javascript"> 
    $(document).ready(function() {
          $(function() {
          $(".carousel").jCarouselLite({
            auto: 15000,
            speed: 3000,
            vertical: false,
            circular: true,
            visible: 9,
            scroll: 9,
            btnNext: ".next",
            btnPrev: ".prev",
            easing: "easeout",
              });
              });
            });

    function MM_preloadImages() { //v3.0
      var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
        var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
        if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
    }
</script> 

<script type="text/javascript">
        ddaccordion.init({ //top level headers initialization
            headerclass: "expandable", //Shared CSS class name of headers group that are expandable
            contentclass: "categoryitems", //Shared CSS class name of contents group
            revealtype: "click", //Reveal content when user clicks or onmouseover the header? Valid value: "click", "clickgo", or "mouseover"
            mouseoverdelay: 200, //if revealtype="mouseover", set delay in milliseconds before header expands onMouseover
            collapseprev: false, //Collapse previous content (so only one open at any time)? true/false 
            defaultexpanded: [], //index of content(s) open by default [index1, index2, etc]. [] denotes no content
            onemustopen: false, //Specify whether at least one header should be open always (so never all headers closed)
            animatedefault: false, //Should contents open by default be animated into view?
            persiststate: true, //persist state of opened contents within browser session?
            toggleclass: ["", ""], //Two CSS classes to be applied to the header when it's collapsed and expanded, respectively ["class1", "class2"]
            togglehtml: ["suffix", "<img src='images/bulletlist/btnPlus.png' class='statusicon' />", "<img src='images/bulletlist/btnMinus.png' class='statusicon' />"], //Additional HTML added to the header when it's collapsed and expanded, respectively  ["position", "html1", "html2"] (see docs)
            animatespeed: "fast", //speed of animation: integer in milliseconds (ie: 200), or keywords "fast", "normal", or "slow"
oninit:function(headers, expandedindices){ //custom code to run when headers have initalized
},
            onopenclose:function(header, index, state, isuseractivated){ //custom code to run whenever a header is opened or closed
                    if (isuseractivated && index!=1)  //if user clicks on any top level header that's not the 2nd one (1==2nd)
        ddaccordion.collapseone("subexpandable", 0) 
        //expand sub menu with class="subexpandable", specifically, the first header within it
            // to close the sub menu, use collapseone like this -->    ddaccordion.collapseone("subexpandable", 0) 
            // to open the sub menu, use expandone like this -->    ddaccordion.expandone("subexpandable", 0) 
                //do nothing
            }
        })

        ddaccordion.init({ //2nd level headers initialization
            headerclass: "subexpandable", //Shared CSS class name of sub headers group that are expandable
            contentclass: "subcategoryitems", //Shared CSS class name of sub contents group
            revealtype: "click", //Reveal content when user clicks or onmouseover the header? Valid value: "click" or "mouseover
            mouseoverdelay: 200, //if revealtype="mouseover", set delay in milliseconds before header expands onMouseover
            collapseprev: false, //Collapse previous content (so only one open at any time)? true/false 
            defaultexpanded: [], //index of content(s) open by default [index1, index2, etc]. [] denotes no content
            onemustopen: false, //Specify whether at least one header should be open always (so never all headers closed)
            animatedefault: false, //Should contents open by default be animated into view?
            persiststate: true, //persist state of opened contents within browser session?
            toggleclass: ["opensubheader", "closedsubheader"], //Two CSS classes to be applied to the header when it's collapsed and expanded, respectively ["class1", "class2"]
            togglehtml: ["suffix", "<img src='images/bulletlist/arrowbullet.png' class='statusicon' />", "<img src='images/bulletlist/arrowbullet_up.png' class='statusicon' />"], //Additional HTML added to the header when it's collapsed and expanded, respectively  ["position", "html1", "html2"] (see docs)
            animatespeed: "fast", //speed of animation: integer in milliseconds (ie: 200), or keywords "fast", "normal", or "slow"
            oninit:function(headers, expandedindices){ //custom code to run when headers have initalized
                //do nothing
            },
            onopenclose:function(header, index, state, isuseractivated){ //custom code to run whenever a header is opened or closed
            }
        })
</script>

<script type="text/javascript">  // Checkbox Input function
    $(document).ready(function(){
        $(".wrapper").change(function(){
            if($(this).is(":checked")){
                $(this).next("label").addClass("tick");
            }else{
                $(this).next("label").removeClass("tick");
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:41:17.773

您可以尝试更新您的 jCarouselLite 版本。我正在成功地使用`http://code.jquery.com/jquery-1.8.2.min.js`and `jcarousellite-1.0.1.js`with `jquery.easing.1.3.js`，with with `jquery.mousewheel.min`。

# math - 标准化 [0 -1] 范围内的值

> ID：11053081
> 
> 赞同：1
> 
> 时间：2012-06-15T14:53:00.270
> 
> 标签：math, normalization

这是一个关于考虑不同参数的数据标准化的问题。

我在一个网站上有一组文章。用户使用评分系统对文章进行评分，从 1 星到 5 星。1 星表示不好的文章，并将文章标记为“不好”。2 星给出“平均”评级。3,4 和 5 星评价“好”、“非常好”和“优秀”。

我想在 [0 - 2] 范围内标准化这些评级。标准化值将代表一个分数，并将用作在文章列表中向上或向下提升文章的因素。具有 2 星或更少星的文章应获得 [0-1] 范围内的分数，因此此提升因子将产生负面影响。评分为 2 星或更多星的文章应获得 [1-2] 范围内的分数，因此该提升因子将具有正提升。

例如，一篇拥有 3.6 星的文章将获得 1.4 的提升因子。这将在文章列表中提升文章。一篇 1.9 星的文章将获得 0.8 分。这个分数将使文章在列表中进一步下降。一篇有 2 星的文章将获得 1 的提升因子 - 没有提升。

此外，我想考虑每篇文章的投票数。一篇单票 3 星的文章排名必须低于 4 票和 2.8 星的平均排名。（升压因子可以分别为 1.2 和 1.3）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:00:36.097

如果我理解正确，您应该使用[Sigmoid 函数，它指的是](http://en.wikipedia.org/wiki/Sigmoid_function)[Logistic 函数](http://en.wikipedia.org/wiki/Logistic_function)的特例。神经网络中经常使用 Sigmoid 和其他逻辑函数来缩小（压缩或标准化）数据的输入范围（例如，缩小到 [-1,1] 或 [0,1] 范围）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-04T04:55:28.790

我不会解决你的评级系统，但标准化值的一般方法是这样的。

**Java方法：**

```
public static float normalise(float inValue, float min, float max) {
    return (inValue - min)/(max - min);
} 
```

**C函数：**

```
float normalise(float inValue, float min, float max) {
    return (inValue - min)/(max - min);
} 
```

这种方法让您在最大值和最小值上都有负值。例如：

```
variable = normalise(-21.9, -33.33, 18.7); 
```

**注意：**你不能让*max*和*min*是相同的值，或者让 max 小于 min。并且*inValue*应该是给定范围内的 winth。

如果您需要更多详细信息，请写评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:03:01.060

根据数字和我自己编造的一些数字，我得出了这 5 点

```
Rating     Boost
1.0        0.5
1.9        0.8
2.0        1.0
3.6        1.4
5.0        2.0 
```

为此计算近似[线性回归](http://en.wikipedia.org/wiki/Linear_regression)，我得到了公式`y=0.3x+0.34`。

所以，你可以创建一个转换函数

```
float ratingToBoost(float rating) {
    return 0.3 * rating + 0.34;
} 
```

使用它，您将获得*大致*符合您要求的输出。样本数据：

```
Rating     Boost
1.0        0.64
2.0        0.94
3.0        1.24
4.0        1.54
5.0        1.84 
```

这显然具有线性增长，这可能不是您想要的，但仅指定了三个值，很难确切知道您期望什么样的增长。如果您对线性增长不满意，并且您希望通过较低的提升来更多地惩罚不良文章，您总是可以尝试提出更多的值并生成指数或对数方程。

# android - Android 从 URL 填充 ImageView

> ID：11053085
> 
> 赞同：1
> 
> 时间：2012-06-15T14:53:08.850
> 
> 标签：android, image, imageview

嗨，我正在尝试将图像从 URL 添加到 ImageView，我尝试将其加载为位图，但没有显示任何内容。那么有谁知道最好的方法是什么或者我做错了什么？

这是我的代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //Check Preferences which sets UI
    setContentView(R.layout.singlenews);
      TextView headerText = (TextView) findViewById(R.id.header_text);
       headerText.setText("Latest News");

     PostTask posttask;
       posttask = new PostTask();
       posttask.execute();
}

public void loadNews(){

    newsStr = getIntent().getStringExtra("singleNews");

    try {
        JSONObject obj = new JSONObject(newsStr);
        content = obj.getString("content");
          title = obj.getString("title");
          fullName = obj.getString("fullname");
          created = obj.getString("created");
        NewsImageURL = obj.getString("image_primary");
        tagline = obj.getString("tagline");

        meta = "posted by: " + fullName + " " + created;

        URL aURL = new URL("NewsImageURL");
        URLConnection conn = aURL.openConnection();
        conn.connect();
        InputStream is = conn.getInputStream();
        /* Buffered is always good for a performance plus. */
        BufferedInputStream bis = new BufferedInputStream(is);
        /* Decode url-data to a bitmap. */
         bm = BitmapFactory.decodeStream(bis);
        bis.close();
        is.close();
        /* Apply the Bitmap to the ImageView that will be returned. */

        Log.v("lc", "content=" + content);
        Log.v("lc", "title=" + title);
        Log.v("lc", "fullname=" + fullName);
        Log.v("lc", "created=" + created);
        Log.v("lc", "NewsImage=" + NewsImageURL);
        Log.v("lc", "Meta=" + meta);
        Log.v("lc", "tagline=" + tagline);

} catch 
 (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

}

public class PostTask extends AsyncTask<Void, String, Boolean> {

    @Override
    protected Boolean doInBackground(Void... params) {
        boolean result = false;
        loadNews();
        publishProgress("progress");
        return result;
    }

    protected void onProgressUpdate(String... progress) {
        StringBuilder str = new StringBuilder();
            for (int i = 1; i < progress.length; i++) {
                str.append(progress[i] + " ");

            }
    }

        @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        Log.v("BGThread", "begin fillin data");

        fillData();

        }
}

public void fillData(){

    NewsView = LayoutInflater.from(getBaseContext()).inflate(R.layout.newsdetailact,
            null);

  TextView Title = (TextView) NewsView.findViewById(R.id.NewsTitle);
  Title.setText(title);

  TextView Tagline = (TextView) NewsView.findViewById(R.id.subtitle);
  Tagline.setText(tagline);

  TextView MetaData = (TextView) NewsView.findViewById(R.id.meta);
  MetaData.setText(meta);

     ImageView NewsImage = (ImageView)NewsView.findViewById(R.id.imageView2);
     NewsImage.setImageBitmap(bm);

  TextView MainContent = (TextView) NewsView.findViewById(R.id.maintext);
  MainContent.setText(content);

  Log.v("BGThread", "Filled results");

adapter = new MergeAdapter();

adapter.addView(NewsView);

setListAdapter(adapter);

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:01:40.763

请使用此代码尖晶石将 url 图像转换为位图并在图像视图中显示。

```
URL url = new URL("http://image10.bizrate-images.com/resize?sq=60&uid=2216744464");
Bitmap bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream());
imageView.setImageBitmap(bmp); 
```

T认为它对你有帮助。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:03:24.807

我使用[Prime](https://github.com/DHuckaby/Prime)进行所有图像加载，可以轻松处理此类情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:13:30.287

```
 String url1 = "Your URL....";

                    URL ulrn = new URL(url1);
                    HttpURLConnection con = (HttpURLConnection) ulrn
                            .openConnection();
                    InputStream is = con.getInputStream();
                    bmp1 = BitmapFactory.decodeStream(is);

                    int widthPx = 150;  //you can set width
                    int heightPx = 150; //you can set height
                    bmp1=Bitmap.createScaledBitmap(bmp1, widthPx, heightPx, true); 

         Imgview1.setImageBitmap(bmp1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:17:37.423

在这种情况下，我会尝试先将 InputStream 写入文件，然后从文件中加载。这通常有效。证明写入文件的另一个原因是因为我更喜欢从互联网上延迟加载图像，因为它可能需要比预期更长的时间。在这种情况下，我怀疑 InputStream 在有机会完成该过程之前已关闭。

您的代码和我的代码结构几乎相同，没有复制到文件部分。

如果你想调查，我建议你这样做：

1.  检查图像是否确实存在。
2.  检查并比较 Stream 和 Bitmap 的大小。
3.  检查 InpuStream 以查看它是否意外关闭。

# javascript - 元素javascript的读取宽度

> ID：11053086
> 
> 赞同：0
> 
> 时间：2012-06-15T14:53:08.950
> 
> 标签：javascript, asp.net, css

我正在尝试读取一个元素的宽度，然后将另一个元素的宽度设置为等于该宽度。出于某种原因，javascript 没有正确读取宽度，我不知道为什么。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <link href="../StyleSheet.css" rel="stylesheet" type="text/css" />
    <link href="iflyreader.css" rel="stylesheet" type="text/css" />
    <title></title>

    <script type="text/javascript">
        function setCommentWidth() {

            var comment = document.getElementById("comments");
            var pleft = document.getElementById("leftcontainer");
            alert(pleft.style.width.toString());
            comment.style.width = parseInt(pleft.style.width) * 2; 

        }

    </script>
    </head>
    <body onclick="setCommentWidth()" >

    <form id="form1"   runat="server">
    <div id = "container" >
    <h2> Ifly Checkin Sheet</h2>

        <asp:Repeater ID="Repeater1" runat="server">
        <ItemTemplate>
        <div class="row">

        <div class="rowcontainer" id ="leftcontainer">
        <p class="left">Last Name: <%# DataBinder.Eval(Container.DataItem, "lastname") %> </p>
        <p class="left">First Name: <%# DataBinder.Eval(Container.DataItem, "firstname") %> </p>
        <p class="left">Date: <%# DataBinder.Eval(Container.DataItem, "timestamp") %></p></div>
      <div class="rowcontainer"> <p class="right">Member Number: <%# DataBinder.Eval(Container.DataItem, "memnum") %> </p>
       <p class="right">Facility: <%# DataBinder.Eval(Container.DataItem, "facility") %> </p>
       <p class="right">Reason: <%# DataBinder.Eval(Container.DataItem, "reason") %> </p></div>

        <p id="comments"  >Comments: <%# DataBinder.Eval(Container.DataItem, "comments") %></p> 
          </div>
    </ItemTemplate>
        </asp:Repeater>
    </div>
    </form>
    </body>
    </html> 
```

我认为这可能与我的 css 声明值有关，但我不确定。这是我的样式表。

```
body
{
    background-color: #fff;
}

.cell {
  display:inline-block;
  margin-left:5px;
  margin-right:5px;
  padding:5px;
  width: 100px; 

}

.row  
{
 margin: 10px; 
 padding: 10px;
 display: inline-block;
 background-color: #888; 
border-radius: 5px; 

}

#container 
{
    margin-left: auto; 
    margin-right: auto; 
    width : 900px; 

    background-color: #fefefe;
    padding: 50px; 

}

p 
{

    font-weight: bold ;
    color: #fff;

}

p.left  
{
    text-align: left;
    width: auto;

}

p.right  
{
    text-align: right; 
    width: auto; 

}

.rowcontainer 
{
    display: inline-block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:25:39.407

试试偏移宽度。

```
function setCommentWidth() {

        var comment = document.getElementById("comments");
        var pleft = document.getElementById("leftcontainer");
        alert(pleft.offsetWidth);
        comment.style.width = parseInt(pleft.offsetWidth) * 2; 

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:45:02.353

上面的代码有很多可能的错误，所以我试着猜测一下：

首先，如果您想通过 javascript 更改宽度样式，而不使用 jquery，您应该将“px”添加到您的值中：

```
comment.style.width = parseInt(pleft.style.width) + "px"; 
```

然后，由于您的代码是 asp，在我看来，您正在重复后面的区域：

```
<asp:Repeater ID="Repeater1" runat="server">
<ItemTemplate> 
```

因此，如果您尝试使用重复的“id”值，它将不起作用，因为“id”应该是唯一的。

# xml - 从 XML 中对具有相同值的节点进行分组

> ID：11053091
> 
> 赞同：4
> 
> 时间：2012-06-15T14:53:41.733
> 
> 标签：xml, xslt

嗨，我是 Xslt/Xml 的新手。

我有这样的 XML：

```
<entry>
 <attribute1>A</attribute1>
 <attribute2>B</attribute2>
</entry>
<entry>
 <attribute1>A</attribute1>
 <attribute2>B</attribute2>
</entry>
<entry>
 <attribute1>C</attribute1>
 <attribute2>D</attribute2>
</entry>
<entry>
 <attribute1>E</attribute1>
 <attribute2>F</attribute2>
</entry>
... 
```

我需要表格输出：

一种

```
Attribute1 Attribute2 Qty
   A           B       2
   C           D       1
   E           F       1 
```

我需要你的帮助，我不知道如何计算唯一条目并将其显示为表格中的一个。

我正在使用 XSLT 1.0 版

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:31:41.010

把这个简短，作为起点：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

    <xsl:key name="keys" match="entry" use="concat(attribute1,'|',attribute2)"/>

    <xsl:template match="/test">
        <xsl:apply-templates select="entry[
          generate-id() 
          = generate-id(key('keys',concat(attribute1,'|',attribute2))[1])]"/>
    </xsl:template>

    <xsl:template match="entry">
        <xsl:value-of select="concat(
            attribute1,' ', 
            attribute2,' ',
            count(key('keys',concat(attribute1,'|',attribute2))),'&#10;')"/>
    </xsl:template> 

</xsl:stylesheet> 
```

如果您是 XSLT 的新手，要了解这种转换，您需要阅读以下内容：

*   xslt 输出方法
*   xsl：关键元素
*   Meunchian 分组
*   xpath 连接和计数功能
*   路径 | 联盟

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T01:36:47.963

**I. 简单的 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kEntryByChildren" match="entry" use="."/>

 <xsl:template match=
 "entry[not(generate-id() = generate-id(key('kEntryByChildren', .)[1]))]"/>

 <xsl:template match="entry">
  <tr>
   <xsl:apply-templates/>
   <td><xsl:value-of select="count(key('kEntryByChildren', .))"/></td>
  </tr>
 </xsl:template>

 <xsl:template match="entry/*">
   <td><xsl:value-of select="."/></td>
 </xsl:template>

 <xsl:template match="/*">
   <table>
     <xsl:apply-templates/>
   </table>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 时**（片段被包装到单个顶部元素以获得格式良好的 XML 文档）：

```
<t>
    <entry>
        <attribute1>A</attribute1>
        <attribute2>B</attribute2>
    </entry>
    <entry>
        <attribute1>A</attribute1>
        <attribute2>B</attribute2>
    </entry>
    <entry>
        <attribute1>C</attribute1>
        <attribute2>D</attribute2>
    </entry>
    <entry>
        <attribute1>E</attribute1>
        <attribute2>F</attribute2>
    </entry>
</t> 
```

**产生想要的正确结果**：

```
<table>
   <tr>
      <td>A</td>
      <td>B</td>
      <td>2</td>
   </tr>
   <tr>
      <td>C</td>
      <td>D</td>
      <td>1</td>
   </tr>
   <tr>
      <td>E</td>
      <td>F</td>
      <td>1</td>
   </tr>
</table> 
```

**当应用于这个棘手的 XML 文档时**（如果我们使用子值的简单串联，我们会错误地得出前三个`entry`元素“相同”的结论）：

```
<t>
    <entry>
        <attribute1>AB</attribute1>
        <attribute2>C</attribute2>
    </entry>
    <entry>
        <attribute1>A</attribute1>
        <attribute2>BC</attribute2>
    </entry>
    <entry>
        <attribute1>A</attribute1>
        <attribute2>BC</attribute2>
    </entry>
    <entry>
        <attribute1>C</attribute1>
        <attribute2>D</attribute2>
    </entry>
    <entry>
        <attribute1>E</attribute1>
        <attribute2>F</attribute2>
    </entry>
</t> 
```

**产生正确的结果：**

```
<table>
   <tr>
      <td>AB</td>
      <td>C</td>
      <td>1</td>
   </tr>
   <tr>
      <td>A</td>
      <td>BC</td>
      <td>2</td>
   </tr>
   <tr>
      <td>C</td>
      <td>D</td>
      <td>1</td>
   </tr>
   <tr>
      <td>E</td>
      <td>F</td>
      <td>1</td>
   </tr>
</table> 
```

**说明**：

正确使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

**请注意**：

1.  此解决方案不依赖于元素的名称和子元素的数量`entry`，因此如果有两个以上的子元素，或者预先命名未知的不同数量的子元素，则可以应用此解决方案。

2.  **这里我们假设**只有当相同的孩子具有相同的值时，所有孩子的字符串值的串联是相同的。

* * *

**二、完整的 XSLT 1.0 解决方案**：

如果无法保证上述假设 2.，这是一种可能的 XSLT 1.0 解决方案：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="entry">
  <xsl:variable name="vChildrenFp">
    <xsl:for-each select="*">
     <xsl:value-of select="concat(., '+')"/>
    </xsl:for-each>
  </xsl:variable>

  <xsl:variable name="vPrecedingSame">
    <xsl:for-each select="preceding-sibling::entry">
     <xsl:variable name="vthisFP">
       <xsl:for-each select="*">
         <xsl:value-of select="concat(., '+')"/>
       </xsl:for-each>
     </xsl:variable>

     <xsl:if test="$vthisFP = $vChildrenFp">1</xsl:if>
    </xsl:for-each>
  </xsl:variable>

  <xsl:if test="not(string($vPrecedingSame))">
      <xsl:variable name="vFollowingSame">
        <xsl:for-each select="following-sibling::entry">
         <xsl:variable name="vthisFP">
           <xsl:for-each select="*">
             <xsl:value-of select="concat(., '+')"/>
           </xsl:for-each>
         </xsl:variable>

         <xsl:if test="$vthisFP = $vChildrenFp">1</xsl:if>
        </xsl:for-each>
      </xsl:variable>

      <tr>
       <xsl:apply-templates/>
       <td><xsl:value-of select="string-length($vFollowingSame)+1"/></td>
      </tr>
  </xsl:if>
 </xsl:template>

 <xsl:template match="entry/*">
   <td><xsl:value-of select="."/></td>
 </xsl:template>

 <xsl:template match="/*">
   <table>
     <xsl:apply-templates/>
   </table>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于同一个 XML 文档（上图）时，会产生相同的正确结果：**

```
<table>
   <tr>
      <td>A</td>
      <td>B</td>
      <td>2</td>
   </tr>
   <tr>
      <td>C</td>
      <td>D</td>
      <td>1</td>
   </tr>
   <tr>
      <td>E</td>
      <td>F</td>
      <td>1</td>
   </tr>
</table> 
```

**说明**：

1.  对于每个`entry`元素，我们为其子元素生成一个“指纹”（FP），`entry`如果其前面的兄弟`entry`元素都没有相同的子元素指纹，则处理该元素。

2.  “相同”`entry`元素的计数以类似的方式完成——对于`entry`具有相同子 FP 值的任何后续兄弟元素，我们输出单个字符（'1'）。总计数是这样生成的字符串（“1”）的字符串长度加 1。

* * *

**三、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:my="my:my" exclude-result-prefixes="my xs">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:param name="pExoticString" select="'+'"/>

 <xsl:template match="/*">
   <table>
     <xsl:for-each-group select="entry" group-by="my:fingerprint(.)">
       <tr>
           <xsl:apply-templates/>
           <td><xsl:value-of select="count(current-group())"/></td>
       </tr>
     </xsl:for-each-group>
   </table>
 </xsl:template>

 <xsl:template match="entry/*">
   <td><xsl:value-of select="."/></td>
 </xsl:template>

 <xsl:function name="my:fingerprint" as="xs:string">
  <xsl:param name="pParent" as="element()"/>

  <xsl:sequence select="string-join($pParent/*, $pExoticString)"/>
 </xsl:function>
</xsl:stylesheet> 
```

**这个简单的解决方案可以轻松处理复杂的情况。当应用于最后一个 XML 文档时，会产生所需的正确结果**：

```
<table>
   <tr>
            <td>AB</td>
            <td>C</td>
         <td>1</td>
   </tr>
   <tr>
            <td>A</td>
            <td>BC</td>
         <td>2</td>
   </tr>
   <tr>
            <td>C</td>
            <td>D</td>
         <td>1</td>
   </tr>
   <tr>
            <td>E</td>
            <td>F</td>
         <td>1</td>
   </tr>
</table> 
```

**说明**：

正确使用**[`xsl:for-each-group`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#xsl-for-each-group)**,**[`xsl:function`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#element-function)**和.**[`current-group()`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#function-current-group)****[`string-join()`](http://www.w3.org/TR/xpath-functions/#func-string-join)**

# ruby-on-rails - 基本的新动作测试 ActionController::TestCase

> ID：11053094
> 
> 赞同：1
> 
> 时间：2012-06-15T14:53:47.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, functional-testing

我对在 Rails 中进行测试有点陌生，我想知道这对于我的新控制器是否足够测试。

```
test "should get new" do
  get :new
  assert_response :success
end 
```

控制器：

```
def new
  @question = Question.new
end 
```

因为新操作将控制器存储在内存中，不会将其写入数据库，也不会对其进行验证。这对我来说似乎足够了。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:14:10.533

控制器测试通常应该断言一些事情

1.  控制器渲染了正确的模板
2.  你重定向到正确的地方
3.  实例变量具有正确的数据

有时我还会发送一些额外的帖子变量，以确保不会有人将自己卷入管理员。

# java - 在 for 循环中重绘

> ID：11053097
> 
> 赞同：3
> 
> 时间：2012-06-15T14:53:51.157
> 
> 标签：java, swing

> **可能重复：**
> [如何使用 Swing 制作动画？](https://stackoverflow.com/questions/1682931/how-to-make-an-animation-with-swing)

在摇摆中，我对数组进行排序并希望对其进行动画处理。每次我在循环中更新数组时，我都有另一个用于暂停效果的 while 循环，当我调用实际上没有调用的 repaint() 时。为什么它不起作用？线程.sleep(1000); 冻结应用程序并且不恢复。

```
 public class Shape extends JPanel  {

    private static final long serialVersionUID = 1L;
    public int col;
    public JButton b2 = new JButton("Sort");
    public Rectangle2D.Double table = null;
    public ArrayList<Integer> arr = null;

    public Shape(){

        initArray(); // initialize array with random number of random numbers
        table = new Rectangle2D.Double(10,10,400,400);
        add(b2); // button sort

        b2.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                            System.out.println("sort it!");
                            Sort(arr);
                            display(arr);
                    }
         });
    }

    public void initArray() {
        col = generateRandom(10,20);            // generate a random number of bars 10 - 20
        arr = new ArrayList<Integer>(col);

        for(int i = 0; i < col; i++){
                // for each bar generate a random height 10 - 300
                int h = generateRandom(10, 390);
                arr.add(h);
        }
    }

    public void paintComponent(Graphics g){
        System.out.println("check");
        clear(g);
        Graphics2D g2d = (Graphics2D)g;
        System.out.println(arr.size());
        for(int j = 0; j < arr.size(); j++) {
                g2d.drawRect(j*20+20,410-arr.get(j),20,arr.get(j));
        }
    }

    protected void clear(Graphics g){
        super.paintComponent(g);
    }

    /*
     * generate random number in the range from 1 to 400
     */
    private int generateRandom(int start, int end){
        return new Random().nextInt(end)+start;
    }

    public void Sort(ArrayList<Integer> arr) {
        int t = 0;

        boolean swap = true;
        do {
                swap = false;
                for(int i = 0; i < arr.size() - 1; i++) {
                        if(arr.get(i).compareTo(arr.get(i+1)) > 0) {
                                int temp = arr.get(i);
                                arr.set(i, arr.get(i+1));
                                arr.set(i+1, temp);
                                swap = true;
                                // iterate to make effect of pausing
                                while(t < 100) {display(arr);t++;}
                                t = 0;
                                // repaint array
                                repaint();
                        }
                }
        } while(swap);
    }

    static void display(ArrayList<Integer> arr) {
        for(int i = 0; i < arr.size()-1; i++)
                System.out.print(arr.get(i) + ", ");
        System.out.println(arr.get(arr.size()-1));
    }

    public static void main(String[] arg){
        WindowUtilities.openInJFrame(new Shape(), 500,500);  
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T14:56:22.700

不要`Thread.sleep`用于 Swing，因为它会阻塞 UI。使用 a`javax.swing.Timer`代替：每次计时器触发动作侦听器时，您都会更新数组并安排重绘。这将为您提供动画效果。

也可以看看

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)
*   [如何使用 Swing 计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

# opencv - 如何判断单应矩阵是否可以接受？

> ID：11053099
> 
> 赞同：27
> 
> 时间：2012-06-15T14:53:53.700
> 
> 标签：opencv, geometry, computer-vision, homography

当使用 OpenCV 的`findHomography`函数来估计来自不同图像的两组点之间的单应性时，即使您使用 RANSAC 或 LMEDS，有时也会由于输入点内的异常值而得到错误的单应性。

```
// opencv java example:
Mat H = Calib3d.findHomography( src_points, dst_points, Calib3d.RANSAC, 10 ); 
```

如何判断生成的 3x3 单应矩阵是否可以接受？

我在 Stackoverflow 和 Google 中寻找了这个问题的答案，但找不到。

我找到了这篇文章，但对我来说有点神秘：

[“单应性的几何误差”](http://perception.inrialpes.fr/Publications/2005/CPS05/)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-23T07:58:59.893

判断单应性是否可接受的最好方法是。

**1- 获取一张图像的点并使用计算的单应性重新投影它们。**

```
//for one 3D point, this would be the projection
px' = H * px;
py' = H * py;
pz' = H * pz; 
```

**2-计算重投影点和图像中真实点之间的[欧几里得距离。](http://en.wikipedia.org/wiki/Euclidean_distance)**

[一点的重投影误差](http://en.wikipedia.org/wiki/Reprojection_error)。p 是投影点，q 是实点。

![在此处输入图像描述](../Images/5db3f0737ef88f59670d298df6f59674.png)

**3-建立一个阈值来决定重投影误差是否可以接受。**

例如，对于许多跟踪应用程序来说，大于一个像素的误差是不可接受的。

# sql - 将 SQL Server 2008 中的导出数据选项与函数一起使用时出错

> ID：11053102
> 
> 赞同：0
> 
> 时间：2012-06-15T14:54:01.290
> 
> 标签：sql, sql-server-2008, export-to-excel

这可能是一个容易回答的问题，但我无法弄清楚。

我有这个要导出到 Excel 的查询。我按照[这里](http://helpdeskgeek.com/how-to/export-sql-data-to-excel/)详述的说明进行操作，但是由于使用了我之前定义的函数，因此 sql 查询不正确。

这是我定义的函数：

```
CREATE FUNCTION FullMonthsSeparation 
(
    @DateA DATETIME,
    @DateB DATETIME
)

RETURNS INT
AS
BEGIN
DECLARE @Result INT

DECLARE @DateX DATETIME
DECLARE @DateY DATETIME

IF(@DateA < @DateB)
BEGIN
    SET @DateX = @DateA
    SET @DateY = @DateB
END
ELSE
BEGIN
    SET @DateX = @DateB
    SET @DateY = @DateA
END

SET @Result = (
    SELECT 
    CASE 
        WHEN DATEPART(DAY, @DateX) > DATEPART(DAY, @DateY)
            THEN DATEDIFF(MONTH, @DateX, @DateY) - 1
        ELSE DATEDIFF(MONTH, @DateX, @DateY)
    END
)
RETURN @Result
END
GO 
```

这是我要导出到 Excel 的 SQL 查询：

```
SELECT DISTINCT soc.idSocio,
                (SELECT Count(*)
                 FROM   [BaseSR].[dbo].[Movimiento] m
                 WHERE  m.idSocio = soc.idSocio
                        AND m.TipoMovimiento = 1) AS CantidadDeCompras,
                nombre,
                (SELECT TOP 1 fecha
                 FROM   [BaseSR].[dbo].[Movimiento] m
                 WHERE  m.idSocio = soc.idSocio
                        AND m.TipoMovimiento = 1/*Consumos*/
                 ORDER  BY fecha DESC) AS UltimoMovimiento,
                dbo.Fullmonthsseparation(soc.fechaAlta, Getdate()) AS MesesDesdeAltaEnPrograma
FROM   [BaseSR].[dbo].[Socio] soc
WHERE  soc.idTarjeta LIKE '2001%' 
```

这是我收到的错误消息：

> 无法解析该语句。附加信息：无法完成延迟准备。无法准备报表。找不到列“dbo”或用户定义的函数或聚合“dbo.FullMonthsSeparation”，或者名称不明确。

但是，当我执行查询时，它运行没有任何问题。

如果我将 sql 查询更改为，`[BaseSR].dbo.FullMonthsSeparation(...`则错误为：

> 无法解析该语句。附加信息：无法完成延迟准备。无法准备报表。找不到列“BaseSR”或用户定义的函数或聚合“BaseSR.dbo.FullMonthsSeparation”，或者名称不明确。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:59:13.370

您已经证明了到处都是数据库名称，这表明执行上下文不是`[BaseSR]`，这可以解释为什么找不到该函数。

尝试对函数执行相同的操作：

```
[BaseSR].dbo.FullMonthsSeparation(... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:00:52.260

我建议采取简单的方法 - 从那里创建视图和导出数据！:)

# dart - 如何从 Dart 中的字符串中删除换行符？

> ID：11053114
> 
> 赞同：26
> 
> 时间：2012-06-15T14:54:50.593
> 
> 标签：dart

如何从 Dart 中的字符串中删除换行符？

例如，我想转换：

```
"hello\nworld" 
```

到

```
"hello world" 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-15T14:54:51.670

您可以使用replaceAll（模式，替换）：

```
main() {
  var multiline = "hello\nworld";
  var singleline = multiline.replaceAll("\n", " ");
  print(singleline);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-22T17:12:10.250

[@SethLadd](https://stackoverflow.com/users/123471/seth-ladd)的答案是正确的，但在一个非常基本的例子中。

在多行输入的情况下，文本如下：

```
Hello, world!
{\n}
I like things:
- cats
- dogs
{\n}
I like cats, alot
{\n}
{\n}
and more cats
{\n}
{\n}
{\n}
. (ignore this dot) 
```

在上述情况下，您的字符串表示如下：

```
Hello, world!\n\nI like things:\n- cats\n- dogs\n\nI like cats, alot\n\n\nand more cats\n\n\n\n 
```

使用[@SethLadd](https://stackoverflow.com/users/123471/seth-ladd)的解决方案，我将得到：

```
Hello, world!I like things:- cats- dogsI like cats, alotand more cats 
```

这当然不是预期的结果。我建议使用常用的正则表达式方法来解决问题。

调用[.trim()](https://api.dart.dev/stable/2.13.4/dart-core/String/trim.html)将删除最后 4 个`\n`（以及任何前面的`\n`）。

如果愿意，您可以将新行限制为单个开放行，例如

```
text.trim().replaceAll(RegExp(r'(\n){3,}'), "\n\n") 
```

# mysql - MySQL批量删除表在哪里？

> ID：11053116
> 
> 赞同：34
> 
> 时间：2012-06-15T14:54:53.700
> 
> 标签：mysql, sql-drop

```
DROP TABLE (
SELECT table_name
FROM information_schema.`TABLES`
WHERE table_schema = 'myDatabase' AND table_name LIKE BINARY 'del%'); 
```

我知道这行不通！在 SQL 中，类似这样的东西的等价物是什么？我可以编写一个简单的 Python 脚本来执行此操作，但只是想知道我们是否可以直接使用 SQL 做一些事情。我正在使用 MySQL。谢谢！

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-15T14:59:25.817

您可以使用[准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)-

```
SET @tables = NULL;
SELECT GROUP_CONCAT('`', table_schema, '`.`', table_name,'`') INTO @tables FROM information_schema.tables 
  WHERE table_schema = 'myDatabase' AND table_name LIKE BINARY 'del%';

SET @tables = CONCAT('DROP TABLE ', @tables);
PREPARE stmt1 FROM @tables;
EXECUTE stmt1;
DEALLOCATE PREPARE stmt1; 
```

它将生成并执行这样的语句 -

```
DROP TABLE myDatabase.del1, myDatabase.del2, myDatabase.del3; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-08-18T14:12:24.523

[@Devart 的答案的](https://stackoverflow.com/a/11053206/)一个小改进：

```
SET @tables = NULL;
SELECT GROUP_CONCAT(table_schema, '.`', table_name, '`') INTO @tables FROM
(select * from
 information_schema.tables 
  WHERE table_schema = 'myDatabase' AND table_name LIKE 'del%'
  LIMIT 10) TT;

SET @tables = CONCAT('DROP TABLE ', @tables);
select @tables;
PREPARE stmt1 FROM @tables;
EXECUTE stmt1;
DEALLOCATE PREPARE stmt1; 
```

此脚本应重复执行，直到控制台的输出为`NULL`

这些变化是：

1.  反引号 (`) 包装表名（如果它包含非标准字符）
2.  添加了一个`LIMIT`以避免我评论过的截断问题
3.  添加了一个“打印”（`select @tables;`）以在停止执行脚本时进行某种控制

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-02T01:22:45.127

如果你只需要快速删除一堆表（不是纯 SQL，所以不直接回答这个问题），一个 shell 命令可以做到：

```
echo "show tables like 'fsm%'" | mysql | tail +2 | while read t; do echo "drop table \`$t\`;"; done | mysql 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-01T19:07:22.447

我发现将 IFNULL 添加到 Devart 的解决方案中很有用，以避免在没有与查询匹配的表时生成错误。

```
SET @tables = IFNULL(CONCAT('DROP TABLE ', @tables),'SELECT NULL;'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-23T08:55:31.163

除了@Devart 的回答：

如果你有很多表，你可能需要设置`group_concat_max_len`：

```
SET group_concat_max_len = 4096; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-03-23T09:41:03.207

如果您有可用的 phpMyAdmin 并且要求删除具有特定前缀的表，则可以快速轻松地完成此操作。转到您想要的数据库，并显示所有表的列表。由于表格是按字母顺序显示的，因此带有删除前缀的表格都会一起出现。转到第一个，然后单击左侧的复选框。然后向下滚动到带有前缀的最后一个表格，按住 shift 并单击复选框。这会导致所有带有前缀的表格都被勾选。转到列表的底部，然后为所有选定的表选择操作下拉。完成删除，检查生成的 SQL 是否正确！

# hibernate - JPA 2 Criteria API：在没有静态元模型的集合中过滤特定字段

> ID：11053118
> 
> 赞同：0
> 
> 时间：2012-06-15T14:54:56.943
> 
> 标签：hibernate, jpa, criteria

我有一个如下的 JPA 数据模型（简化版本），我想获得在某些给定日期之间有事件的需求。

```
public class Demand {
 private Set<Event> events;
}

public class Event {
 private Date date;
} 
```

我确实获得了对 events 属性的 Path 引用，但我不知道如何基于 date 属性来表示谓词之间的关系。

```
Path<Set<Evenement>> pathEvents = demand.<Set<Evenement>> get("events");
pathEvents.get("date") 
```

抛出“org.springframework.dao.InvalidDataAccessApiUsageException：非法尝试取消引用路径源”异常。谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T11:28:32.320

我找到了一种方法来获取对事件属性的引用

```
CriteriaBuilder cb = entityManager.getCriteriaBuilder();
CriteriaQuery<Tuple> c = cb.createTupleQuery();
Root<Demand> demandes = c.from(Demand.class);
Join<Demand, Evenement> joinEvent = d.join("events", JoinType.INNER); 
```

我无法从连接对象中获取路径引用。

```
Path<DateTime> dateExpr = joinEvent.get("date"); 
```

# javascript - 我们可以将 Highstocks 的功能扩展到 Highcharts 吗？

> ID：11053121
> 
> 赞同：0
> 
> 时间：2012-06-15T14:55:01.390
> 
> 标签：javascript, jquery, highcharts, highstock

我有一个功能，我们必须比较多个系列。我已经用 Highcharts 实现了相同的功能，但是当我查看[highstocks 比较](http://www.highcharts.com/stock/demo/compare)时，我对它的做法印象深刻。我们可以在 Highcharts 中扩展相同的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:44:39.097

您可以使用工具提示格式化程序创建具有格式的工具提示

series.name: series.values[x] 用于点 x，并在图表中的每个系列上循环。这应该会产生你想要的效果。

Highstock 也是 highcharts 的扩展，如果您愿意支付额外费用或将其用于非商业目的，您应该能够将其替换为您的 highcharts 代码而不会出现任何兼容性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:23:38.417

我不知道是否可以扩展，但您可以使用[tooltip formatter](http://www.highcharts.com/ref/#tooltip--formatter)来做同样的事情。

# c# - 在运行时更改 datagridview 行颜色

> ID：11053123
> 
> 赞同：1
> 
> 时间：2012-06-15T14:55:08.877
> 
> 标签：c#, .net-3.5, datagridview, datagridviewrow

我正在为正在开发的控件继承 DataGridView 控件。我的目标是让每一行的颜色代表一个可以在运行时改变的对象状态。我的对象实现了 Observable 设计模式。所以我决定开发自己的 DataGridViewRow 类，实现观察者模式并让我的行观察对象。在这个类中，我有这个方法：

```
public void UpdateColors(int state)
{
    DefaultCellStyle.BackColor = m_ETBackColors[state];
    DefaultCellStyle.ForeColor = m_ETForeColors[state];
} 
```

我暂时无法观察我的对象，因此，为了测试颜色变化，我在 SelectionChanged 事件中对选定的行调用我的 UpdateColors 方法。

现在是它不起作用的时刻！我之前选择的行保持蓝色（就像它们被选中时一样），当我滚动时，单元格文本是分层的。我尝试调用 DataGridView.Refresh()，但这也不起作用。

我必须添加我的 datagridview 没有绑定到数据源：我不知道在运行之前我有多少列，所以我手动提供它。

谁能告诉我我做错了什么？

========== 更新 ==========

这有效：

```
public void UpdateColors(int state)
{
    DefaultCellStyle.BackColor = System.Drawing.Color.Yellow;
    DefaultCellStyle.ForeColor = System.Drawing.Color.Black;
} 
```

但这不起作用：

```
public void UpdateColors(int state)
{
    DefaultCellStyle.BackColor = m_ETBackColors[nEtattech];
    DefaultCellStyle.ForeColor = m_ETForeColors[nEtattech];
} 
```

和 ：

```
 System.Drawing.Color[] m_ETBackColors = new System.Drawing.Color[] { };
    System.Drawing.Color[] m_ETForeColors = new System.Drawing.Color[] { }; 
```

没有数组溢出：它们是构造函数参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:29:38.157

好的，发现错误了。我使用的颜色是这样创建的：

```
System.Drawing.Color.FromArgb(value) 
```

不好的是 value 是一个整数，表示 alpha 设置为 0 的颜色。
感谢这篇文章：[MSDN social post](http://social.msdn.microsoft.com/Forums/es/vcses/thread/93ed438f-d7fe-4a69-ac5f-ed5c930ffa93)，我了解到单元格样式不支持 ARGB 颜色，除非 alpha 设置为 255（它们只支持 RGB颜色）。

所以我结束了使用这个，它有效，但肯定有一个更优雅的方式：

```
System.Drawing.Color.FromArgb(255, System.Drawing.Color.FromArgb(value)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:04:18.300

使用`CellFormatting`事件来做到这一点：

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
  if (this.dataGridView1.Rows[e.RowIndex].Cells["SomeStuff"].Value.ToString()=="YourCondition")
    this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.BackColor = Color.Red;
  else
    this.dataGridView1.Rows[e.RowIndex].DefaultCellStyle.BackColor = Color.White;
} 
```

# facebook - Facebook 应用页面缺少“转到应用”

> ID：11053125
> 
> 赞同：1
> 
> 时间：2012-06-15T14:55:10.563
> 
> 标签：facebook, facebook-page

我有一个名为 Mutuality 的 Facebook“应用程序”（一个带有 Facebook Connect 的外部网站），它正确链接到 Facebook“应用程序页面” [http://www.facebook.com/mutuality.org](http://www.facebook.com/mutuality.org)

起初[http://www.facebook.com/mutuality.org](http://www.facebook.com/mutuality.org)有一个不错的“转到应用程序”链接。但是在编辑了一些页面信息之后，它作为“组织”页面而不是“应用程序页面”出现在搜索中，无论我做什么，我都无法返回“转到应用程序”按钮！

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:13:36.177

似乎页面类别必须是品牌和产品/应用页面 - 不要改变它！现在在[http://www.facebook.com/pages/Mutuality/254370917995739工作](http://www.facebook.com/pages/Mutuality/254370917995739)

# security - 应该在哪里执行密码比较的最佳做法是什么

> ID：11053127
> 
> 赞同：6
> 
> 时间：2012-06-15T14:55:19.190
> 
> 标签：security, authentication, web

在对网站的用户进行身份验证时，应该在数据库中还是在网站中进行哈希生成和比较？

我的论点是网站应该将用户提供的密码（可能由网络服务器加密）传递给数据库。然后数据库用盐重新加密它并比较哈希值。无论用户的凭据是否有效，数据库都会响应 Web 服务器。通过这种方式，最小的离开数据库，基本上是或否，没有存储的凭证信息。缺点是，数据库必须做更多的工作。

另一个论点是工作应该在 Web 服务器中完成。在这里，Web 服务器将创建哈希并从数据库中请求存储的哈希并进行比较。在这种情况下，需要将盐从数据库传回 Web 服务器以创建散列。但是，随着网络服务器数量的增加，工作是共享的。

我个人认为第二种方法存在潜在的安全风险。如果 Web 服务器受到威胁，可以从数据库中请求盐和哈希值并轻松破解。

执行上述操作的最佳做​​法是什么？我是否忽略/遗漏了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:09:44.157

这里有一篇关于如何安全存储密码的非常好的文章：

[http://throwingfire.com/storing-passwords-securely/](http://throwingfire.com/storing-passwords-securely/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T15:10:50.110

您忽略了盐的用途。

盐用于防止对散列密码的字典攻击。如果您的密码是“花生”并且哈希为 12345，那么我可以为字典中的每个单词（包括您的密码）预先生成哈希列表，并通过查找我预先生成的密码集来快速找到您的密码哈希。这就是LinkedIn最近发生的事情。如果密码是加盐的，我必须在破坏数据库*后*为每个盐值预先生成一个字典，这将非常昂贵。

此外，适当的随机生成的盐可以防止攻击者知道你和我有相同的密码（没有盐，我们会有相同的哈希）。

我的观点是，这些盐并不是秘密。它们不是公共信息，但攻击者获得盐值 + 哈希值并不一定意味着密码已被泄露。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T15:14:36.757

我怀疑你会遇到的第一个问题（这是一个大问题）是你的数据库没有密码哈希函数。当然，它可能有 MD5() 和 SHA1() 但这些是加密哈希函数。它有 bcrypt() 或 scrypt() 或 PBKDF2() 吗？

使用加密哈希函数而不是密码哈希函数意味着 LinkedIn 密码可以如此迅速地被破解。如果您不使用上述功能之一，那么如果您的哈希值泄露，您将同样容易受到攻击。

* * *

继续回答您的问题，假设您的数据库*确实*支持密码哈希算法（使用 bcrypt 只是因为我必须选择一个）。两种选择是：

数据库中的哈希：

```
$db->query("SELECT COUNT(*) FROM users WHERE username = '?' AND password = BCRYPT(?, (SELECT salt FROM user WHERE username = '?'))", $username, $password, $username);
if($row['count'] != 1)
{
  // Not authenticated.  Throw exception.
} 
```

在这种情况下，原始密码被发送到数据库并返回一个简单的是或否（1 或 0）。该数据库通信可以加密。哈希和盐永远不会保存在应用程序中。

应用程序中的散列：

```
$db->query("SELECT username, salt, password FROM users WHERE username = '?', $username);
if(bcrypt($password, $row['salt']) != $row['password'])
{
  // Not authenticated.  Throw exception.
} 
```

在这种情况下，哈希值和盐值从数据库中提取到应用程序中，原始密码的哈希值和比较在那里完成。与数据库的通信仍然可以加密。原始密码永远不会保存在数据库内存中。

为了提高效率，我们可以假设两种散列算法都是用 C（或某种编译语言）编写的，并且可能由操作系统提供，因此需要相同的时间。应用程序散列选项通过网络接收更多数据，而数据库散列选项发送更多数据并且具有更复杂的查询（本质上是两个查询，一个用于获取盐值，一个用于进行比较）。可能无法按照我编写该查询的方式使用索引，但可以重写该查询。由于这两种情况下的数据大小可能仍然是一个 TCP 数据包，因此速度差异可以忽略不计。由于子查询，我认为这是应用程序哈希选项的胜利。

为了曝光。我认为原始密码比哈希和盐更敏感。因此，限制原始密码的暴露似乎是更安全的选择，使应用程序散列成为最佳实践。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:19:30.233

计算机安全的一个很好的经验法则是，如果你不得不问，你不应该自己做。但是，如果您担心如果 Web 服务器遭到破坏，密码详细信息会被泄露，那么一种方法是将身份验证转移到它自己的系统上，并且根本不让 Web 服务器访问密码数据库。

# ruby-on-rails - 包含关联时如何在数组中包含 JSON 根？

> ID：11053132
> 
> 赞同：0
> 
> 时间：2012-06-15T14:55:38.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

这类似于[在 json 中为数组包含 root？](https://stackoverflow.com/questions/9750690/include-root-in-json-for-array)，但略有不同。

我有一个与 Beta 有关联的对象 Alpha。我将 Alpha 渲染为 JSON，并希望包含 Beta。

```
@alpha.as_json(:include => :beta) 
```

这很好用，因为我将 include_root_in_json 设置为 true，所以输出了 alpha 的根。

```
{"alpha":
  {
    "created_at":"2012-06-07T23:37:30Z",
    "id":1,
    "beta":[
      {
        "created_at":"2012-06-11T23:46:58Z",
        "id":1,
      }
    ]
  }
} 
```

我也想将根包含在 beta 数组中，但我似乎找不到这样做的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:27:56.037

尝试将`root`选项设置`true`为关联：

```
@alpha.as_json(:include => { :beta => { :root => true } }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:37:25.463

我的解决方案是使用 RABL (https://github.com/nesquena/rabl)。它为 JSON 提供了更好的格式控制。

# ajax - 是否可以在 render: 部分调用中将 JavaScript 对象作为参数传递给 Locals Hash？

> ID：11053133
> 
> 赞同：0
> 
> 时间：2012-06-15T14:55:44.680
> 
> 标签：ajax, coffeescript, haml, partial-views, ruby-on-rails-3.2

我认为这很容易通过查看代码来解释，因此我发布了一些片段，展示了我通常如何在 Rails 3.2 中执行 Ajax 操作，

以下将起作用：

**create.js.coffee**

```
$("<%= raw j(render(partial: @comment, locals: { str: 'string' })) %>")
  .appendTo("ul#comments") 
```

**_comment.html.haml**

```
-puts "The variable's value is #{str}"
%li= comment.what 
```

现在，我想做与上面相同的事情，但不是传递 JS 字符串文字，而是传递一个对象文字，如下所示：

**create.js.coffee**

```
obj = 
  'v1': 'value'
  'v2': 'value'

$("<%= raw j(render(partial: @comment, locals: { o: obj })) %>")
  .appendTo("ul#comments") 
```

当然失败的原因如下： **ActionView::Template::Error (undefined local variable or method `obj'...**

有人知道如何完成我想要做的事情吗？有可能吗？让我知道我正在尝试做的事情是否疯狂，如果是这样的话，正确的方法是什么..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:01:06.360

好吧，我猜客户对象不与服务器对象共享，除非我们正在做远程处理。因此，在这种情况下，您必须将 JS 对象序列化为 JSON 或任何其他字符串格式（XML 或任何其他结构），然后必须在 Ruby 对象中反序列化，或者您可以手动解析字符串并使用提供的信息。

# c# - 推送通知 iphone 错误（月亮 aspn）

> ID：11053134
> 
> 赞同：1
> 
> 时间：2012-06-15T14:55:53.793
> 
> 标签：c#, asp.net, apple-push-notifications

我正在使用 moon aspn 库在 asp.net 和 c# 中发送推送通知。我遇到以下错误：`Call to SSPI Failed`; 在内部异常中，我有：`Unknown error while processing the certificate; error code: -2147467259`。

这是我的代码：

```
private void SendQueueToapple(IEnumerable<NotificationPayload> queue)
{
    int i = 1000;
    foreach (var item in queue)
    {
        if (!_conected)
        {
            Connect(_host, NotificationPort, _certificates);
            var response = new byte[6];
    --> --> --> _apnsStream.BeginRead(response, 0, 6, ReadResponse, new MyAsyncInfo(response,    _apnsStream));<-- <-- <--
        } try {
            if (item.DeviceToken.Length == 64) //check lenght of device token, if its shorter or longer stop generating Payload.
            {
                item.PayloadId = i;
                byte[] payload = GeneratePayload(item);
                _apnsStream.Write(payload);
                Logger.Info("Notification successfully sent to APNS server for Device Toekn : " + item.DeviceToken);
                Thread.Sleep(1000); //Wait to get the response from apple.
            }
            else
                Logger.Error("Invalid device token length, possible simulator entry: " + item.DeviceToken);
        }
        catch (Exception ex)
        {
            Logger.Error("An error occurred on sending payload for device token {0} - {1}", item.DeviceToken, ex.Message);
            _conected = false;
        }
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T08:12:33.133

这可能是与证书相关的问题。您必须创建 .cer 和 .p12 文件。密切注意这些文件。您首先生成 .cer，此处不再赘述。有足够的材料可用。生成 .p12 文件时出现问题。

在您的 Mac 中，转到 Keychain Access。从左侧窗格中选择“我的证书”。在那里，您将看到证书列表。选择您为推送通知生成的证书。右键单击并导出。确保**不要**扩展证书对私钥执行此步骤。这就是事情开始出错的地方。

# android - 发现默认 Twitter 应用程序并使用它打开 URL

> ID：11053138
> 
> 赞同：0
> 
> 时间：2012-06-15T14:56:02.543
> 
> 标签：android, twitter, android-package-managers

在应用程序中，我们从服务器检索 JSON 对象，该对象还包括经过验证的 Twitter 帐户或特色推文消息的 URL。当应用程序用户单击这些特定链接之一时，我们希望为设备启动默认 Twitter 应用程序。我查看了此处发布的问题数量，例如[Start twitter 应用程序](https://stackoverflow.com/questions/5594914/start-twitter-app)或[Android Intent for Twitter 应用程序](https://stackoverflow.com/questions/2077008/android-intent-for-twitter-application?lq=1)，但它们在 HTC Desire HD 上具有 ACTION_SEND 或 ACTION_VIEW 等流程，不会将 HTC Peep 识别为能够打开 twitter 链接的应用程序之一，setType 方法在设备数量上使用 application/twitter 参数根本没有返回任何结果。那么有没有办法找到默认的推特应用程序或仅列出设备上可用的推特应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:50:22.043

您可以将此放弃给用户的选择。只需打开一个 URL，系统就会询问用户她想使用哪些已安装的应用程序。如果她已经将 TweetDeck 设置为 twitter.com URL 的首选处理程序，那么这将打开。

```
String url = "https://twitter.com/edent";
Intent in = new Intent(Intent.ACTION_VIEW);
in.setData(Uri.parse(url));
startActivity(in); 
```

然后，这将打开默认的 Twitter 应用程序，或者如果没有，则提示用户选择一个。如果没有安装 Twitter 应用程序，它将在默认浏览器中打开移动 Web 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:31:41.690

目前不可能，所以我已经关闭了

# eclipse - 如何在 Eclipse 中使用正则表达式搜索此字符串？

> ID：11053143
> 
> 赞同：1
> 
> 时间：2012-06-15T14:56:13.993
> 
> 标签：eclipse, eclipse-plugin, replace

我正在尝试查找并替换以下行：

```
 <div id="fixed_bottom"></div>   
 </div>           
 <jsp:include flush="true" page="../includes/footer.jsp"/> 
```

有了这个：

```
<jsp:include flush="true" page="../includes/footer.jsp"/>
<div id="fixed_bottom"></div>
</div> 
```

而且我不知道如何找到它们，因为句子中有两个换行符。任何帮助将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:41:21.840

\n 或 \r\n 表示正则表达式中的换行符，具体取决于您所在的操作系统。有关正则表达式的更多帮助，请参见[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:15:46.880

如果您使用内置的 Eclipse“搜索文件”并选中正则表达式框，它将为您构建搜索字符串（如果您在打开搜索框之前将其突出显示）。请注意，如果您必须检查正则表达式框，您需要关闭对话框并重新打开以使其刷新。`\R`从那里您可以看到 Eclipse对换行符使用了有些奇怪的字符。

# java - 如何在 IntelliJ IDEA 中查看 JavaDoc？

> ID：11053144
> 
> 赞同：502
> 
> 时间：2012-06-15T14:56:20.720
> 
> 标签：java, intellij-idea, ide, javadoc

我刚从 Eclipse 切换到 IntelliJ。IntelliJ 缺少 Eclipse 的一项功能 - 当您将鼠标放在方法上时，Eclipse 会显示 javadoc 信息。我认为显示它的方法是使用快捷方式 - `command`+ `J`，但是当我单击它时，我得到了一些错误，如下面的屏幕截图所示。请告诉我如何快速获取 javadoc 信息。我至少需要知道一个方法返回什么类型。

![在此处输入图像描述](../Images/1eef5b1c81f3d5bfb8c7c335bba8880e.png)

* * *

## 回答 #1

> 赞同：709
> 
> 时间：2012-06-15T15:08:44.423

使用`View`| **快速文档**或相应的键盘快捷键（默认情况下：Windows/Linux上的`Ctrl`+和 macOS 上的 + 或最近的 IDE 版本）。有关更多信息，请参阅[文档](https://www.jetbrains.com/idea/help/viewing-inline-documentation.html)。`Q``Ctrl``J``F1`

也可以在**显式**（由快捷方式调用）代码完成时启用自动 JavaDoc 弹出窗口`Settings`| `Editor`| `General`| `Code completion`（**自动弹出文档**）：

[![自动弹出文档](../Images/14a8daf206ac1de4c7f00cdd3ef5ed92.png)](https://i.imgur.com/z5SLSQl.png)

另一种查看快速文档的方法是**鼠标移动**：

[![鼠标移动](../Images/d64af81168389d4fd61c3306b9c7b39c.png)](https://i.stack.imgur.com/3pdPU.png)

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2013-09-18T09:01:13.717

或者，您可以将光标放在项目上并使用显示 JavaDoc

> `CTRL`+`Q`

这是默认的快捷方式。

编辑：正如 Ethical*在 Mac*上提到的那样，快捷方式是

> `CTRL`+ `j`( `^`+`j`不`⌘</kbd>+`j`)`

* * *

## 回答 #3

> 赞同：140
> 
> 时间：2014-03-31T10:31:46.247

转到`File/Settings`, `Editor`, 单击`General`。

向下滚动，然后 ✔ `Show quick documentation on mouse move`。

[![在此处输入图像描述](../Images/df6c2fc9c4ed24c282f6a83f0fc9d7a0.png)](https://i.stack.imgur.com/Jm90g.jpg)

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2013-11-11T13:23:19.770

当您的鼠标悬停在元素上时，有一个很好的功能可以快速显示文档。

**智能 14**

编辑器/常规 -> 显示鼠标移动的快速文档

**旧版本**

将以下行添加到 idea.properties 文件中：

```
auto.show.quick.doc=true 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-03-06T01:18:11.973

**IntelliJ IDEA CE 2016.3.4**的配置以在鼠标悬停时启用 JavaDocs。我在 Mac OS 上运行 IntelliJ IDEA，但相信 Linux/Windows 应该有类似的选项。

**自动弹出文档：** `IntelliJ IDEA` > `Preferences`> `Editor`> `General`>`Code Completion`

[![在此处输入图像描述](../Images/99e665b488d12d69aaad546260f5d4f0.png)](https://i.stack.imgur.com/OEizD.png)

**关于鼠标移动的文档：** `IntelliJ IDEA` > `Preferences`> `Editor`>`General`

[![在此处输入图像描述](../Images/e2e32aaff4a97367b0c8e867b101846b.png)](https://i.stack.imgur.com/yS0NG.png)

注意：请点击**应用**按钮应用这些设置

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-09-03T04:55:00.553

要最好地反映 Eclipses 功能，请启用以下设置：

*   **IDE Settings/Editor** -> **Other.Show quick doc on mouse move**
*   **IDE 设置/编辑器/代码完成**->**自动弹出文档**

要在自动完成菜单中查看 javadoc，请点击“。” 要获取弹出窗口，然后将鼠标悬停在您正在使用的对象上，一旦您获得 javadoc 弹出窗口，您可以在弹出窗口中选择一个项目来切换 javadoc。不理想......但它的东西。

作为另一个说明。选项菜单的搜索功能非常有用。只需输入“doc”，您就会看到 doc 的所有选项。

此外，搜索“autopopup doc”不仅会找到每个选项，还会在菜单中突出显示它们。太棒了！

* * *

**编辑：** 超越最初的问题，这可能对那些只想快速轻松地访问文档的人有用。

在使用了几天之后，似乎习惯使用热键是最有效的方法。它会在您的文本输入标记所在的位置弹出任何内容的文档，因此您无需触摸鼠标。这也适用于智能感知弹出窗口，并且在上下导航时会保持不变。

就个人而言，Windows 上的 Ctrl+Q 并不理想，因此我将其重新映射为 Alt+D。重新映射可以在 IDE Settings/Keymap 下完成。进入键盘映射菜单后，只需搜索快速文档。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-01-31T22:46:15.287

对我来说，这不仅仅是让 javadoc 窗口打开，而且还让完整的 javadoc 呈现出来。如果您从 Maven 存储库导入库并且不告诉 Idea 在下载中包含 javadoc，您可能仍然会得到一个仅基于方法签名的稀疏 javadoc。请务必勾选“从 Maven 存储库下载库”对话框中的“JavaDocs”选项，该对话框可在项目结构 -> 项目设置 -> 库下找到。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-02-12T01:10:40.363

转到**设置 -> 编辑器 -> 常规**，然后启用**在鼠标移动时显示快速文档**

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-09-19T21:28:37.140

**IntelliJ IDEA 15**添加了这个功能

现在它可以作为 EAP 使用。

如下图所示，插入符号位置不会影响光标位置： [![在此处输入图像描述](../Images/ab4026c7b9e459a860149167e5e2f7cf.png)](https://i.stack.imgur.com/ga8dR.png)

[此功能](https://youtrack.jetbrains.com/issue/IDEA-66333#)已在[IntelliJ IDEA 15 142.4675.3 发行说明](https://confluence.jetbrains.com/display/IDEADEV/IntelliJ+IDEA+15+142.4675.3+Release+Notes)中实现。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-05-06T15:50:30.713

最接近 Eclipse 将是**Ctrl+Button2 单击（滚动单击）**

它在 IntelliJ 中被称为 Quick Doc，我希望 JetBrains 的人有朝一日可以使用**Ctrl+Mouse Move**来添加像 Eclipse 这样的快速文档，效果会更好。

在我的情况下，只有鼠标移动有点烦人，所以如果你在**Preferences/Settings --> Keymap**中搜索“快速文档”，你会发现：

*   Win-Linux：“ *Ctrl+Q* ”和“ *Ctrl+Button2 Click* ”（滚动点击）
*   Mac：“ *Ctrl+J* ”和“ *Ctrl+Button2 Click* ”（滚动单击）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-25T15:24:56.880

我注意到选择方法名称并按 F2（快速文档）显示它是 JavaDoc。我正在使用 Intellij 2016 和 Eclipse Keymap

# jquery - 跨域请求/响应触发的 jQuery ajax 失败处理程序

> ID：11053147
> 
> 赞同：0
> 
> 时间：2012-06-15T14:56:27.810
> 
> 标签：jquery

下面的“addReqeust”确实成功了，因为 Java servlet 获得了请求并成功地持久化了数据（使用 GAE）。但是会触发“失败处理程序”。请求的来源是我的 GAE 本地主机。该网址位于 Google 的 App Engine 服务器上。很好奇为什么会这样。有任何想法吗？谢谢。

```
 var addRequest = $.ajax({
    context: this, 
    url: myServlet,
    type: "POST",
    data: joText,
    dataType: "json",
    crossDomain: true // added this to see if it prevents fail, it does not.
    });

 addRequest.fail(function(jqXHR, textStatus) {
     alert("Request failed: " + textStatus );
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:00:22.507

也许您的 servlet 返回的响应代码不等于 200？您可以使用 firebug 和 firefox 进行检查。它显示在控制台请求/响应结果中。

# javascript - 使用 Javascript 发布表单值

> ID：11053148
> 
> 赞同：0
> 
> 时间：2012-06-15T14:56:28.017
> 
> 标签：javascript, forms

（我要讨论的网站可以在[http://www.akbrowser.tk/preset.html 访问](http://www.akbrowser.tk/preset.html)）

我要谈论的网站部分如下：

```
<html>
<head>
<title>Preset AKBrowser</title>
</head>
<body bgcolor="000000">
<center>
<table bgcolor="00FFFF" width="50%">
<tr><td>
<br>
<br>
<br>
AKBrowser 
<br>
<br>
<form id="akbrowser">
URL: <input type="text" name="aouwygbaiusvsjkraeiwc" value="http://www." />   
<br>
<INPUT TYPE="button" NAME="button" Value="Submit"  onClick="postakbrowser(document.akbrowser.aouwygbaiusvsjkraeiwc.value)">
</form>
<br><br>
<script type="text/javascript">
function postakbrowser(x) 
{
document.write("http://www.akbrowser.tk/?aouwygbaiusvsjkraeiwc=" + "x");
}
</script>
</td></tr>
</table>
</body>
</html> 
```

（如果您访问过网页，上面的部分是水平线以上的所有内容）

因此，如您所见，我正在尝试制作一个表单，以便在单击提交按钮时运行一个 javascript 函数（称为 postakbrowser() ）。

假设在表格中输入了“奶酪”

如您所见，我希望将字符串“http://www.akbrowser.tk/?aouwygbaiusvsjkraeiwc=cheese”发布在表单下方

我不明白为什么它不起作用！

我可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:58:38.313

你不需要 JavaScript。默认情况下，HTML 表单会为您完成所有繁重的工作。

只需将其作为您的表单标签：

```
<form name="input" action="script_name" method="GET"> 
```

然后您可以简单地使用提交输入标签来处理事件：

```
<input type="submit" Value="Submit" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:01:14.660

你为什么那样做

```
document.write("http://www.akbrowser.tk/?aouwygbaiusvsjkraeiwc=" + "x"); 
```

我认为你只需要这样做

```
document.write("http://www.akbrowser.tk/?aouwygbaiusvsjkraeiwc=" + x); 
```

试一下

# unit-testing - Gerrit 触发 Jenkins 构建时目标目录上的时间戳不正确

> ID：11053149
> 
> 赞同：0
> 
> 时间：2012-06-15T14:56:29.440
> 
> 标签：unit-testing, maven, jenkins, gerrit

Jenkins 没有报告我们的单元测试失败。这是我们在构建日志中看到的内容：

```
[JENKINS] Recording test results
hudson.AbortException: Test reports were found but none of them are new. Did tests run? 
For example, /home/tomcat/.jenkins/jobs/ws-main-gerrit/workspace/commons/commons-utils/target/surefire-reports/TEST-commons.utils.TransformationUtilsTest.xml is 32 min old 
```

问题在于，当 Gerrit 触发 Jenkins 构建时，它会创建带有不正确（30 分钟前）时间戳的目标目录。Jenkins 和 Gerrit 所在服务器的时间是正确的。当我登录并手动进行 Maven 构建时，它会正确报告单元测试中的失败。

有什么想法可能导致问题吗？
提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:11:17.007

问题是 Jenkins 所在的 NFS 没有使用 NTP（并且晚了大约 30 分钟），而系统的其余部分正在使用它。因此，这就是 date 命令返回正确时间戳但目标目录中的文件使用错误时间戳创建的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T17:17:55.890

这个答案帮助我确定了问题，但我决定改为实施一种解决方法。

我在 Jenkins 从站上运行了这个复合命令，以确定从站和它用于其工作区的 NFS 挂载之间存在差异：

```
$ date ; touch this ; ls -l this
Mon Nov 11 10:57:55 CST 2013
rw-rr- 1 davidg devtools 0 Nov 11 10:56 this 
```

我在另一个 VM / NFS 挂载上尝试了相同的命令，但它具有相同的差异。我推测这是一个数据中心范围的问题，可能很难很快解决，所以我决定通过使用“-t”选项的 touch 命令手动更新文件的修改时间戳来解决这个问题。

我在“Execute Shell”构建步骤中添加了以下内容，Jenkins 终于对我有当前测试结果要发布感到满意：

```
#!/bin/bash
echo $(hostname)
echo "Touching test results so that the Publish JUnit test result plugin always finds  new results..."
touch -m -t $(date "+%Y%m%d%H%M.%S") ${WORKSPACE}/myjob/target/surefire-reports/*.xml 
```

# c# - app.config 文件是否支持从更高层调用？

> ID：11053150
> 
> 赞同：0
> 
> 时间：2012-06-15T14:56:33.723
> 
> 标签：c#, .net

我为第 3 方应用程序编写扩展。该应用程序调用我的类库。当从另一个程序调用时，我无法让我的程序集从他们的 app.config 数据中读取。下面通过单元测试重现了该问题。

ConsoleApplication.exe 中的 App.config

```
<appSettings>
    <add key="testKey" value="testvalue" />
</appSettings>

    static void Main(string[] args)
    {
        TestClass c = new TestClass();
        c.Run();
    }

    //TestClass.Run()
    public void Run()
    {
        var readAppConfig = ConfigurationManager.AppSettings[0];
        MessageBox.Show("App config: " + readAppConfig);
    } 
```

单元测试代码，MSTEST

```
 [TestMethod]
    public void TestAppConfig()
    {
        TestClass c = new TestClass();
        c.Run();//fails here
    } 
```

Main() 有效，TestAppConfig() 因 ArgumentOutOfRangeException 而失败

> 指数超出范围。必须是非负数且小于集合的大小。

从外部程序集调用时 App.config 是否停止工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:58:56.053

应用程序设置必须位于最高级别的组件中（在这种情况下，您的 MSTEST app.config 需要保存设置。

# sql - 计算不同的记录实例

> ID：11053153
> 
> 赞同：0
> 
> 时间：2012-06-15T14:56:51.170
> 
> 标签：sql, sql-server

我需要根据 table 的以下标准计算系统中的所有报价实例。

表格1

```
Quote Number | Quote Version |
1            | A
1            | A
2            | B
2            | C 
```

所以你可能会看到 2 个引号。显然我需要计算 3 Not 2 ，因为我需要将不同的报价版本视为单独的报价。

所以我想添加一列说引用计数并为每次出现的引用添加一个 1，但确定如何在 sql 中构造它？

我需要在此过程的稍后时间添加此表中的引号数量，因此我认为我可以转到此列并使用 Quote Count=1 对表中的记录进行计数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:04:58.670

```
SELECT COUNT(*)
FROM (
    SELECT DISTINCT [Quote Number], [Quote Version]
    FROM Table1
    ) s 
```

无需添加列，通过查询轻松实现

# php - #1052 - 字段列表中的列 'lat' 在英里半径查询中不明确，无法弄清楚原因

> ID：11053155
> 
> 赞同：0
> 
> 时间：2012-06-15T14:56:51.497
> 
> 标签：php, sql

我有一个相当长的查询，我一直在处理它抛出错误'#1052 - 字段列表中的列'lat'不明确'。我把它分成几部分，每个部分似乎都工作正常，但是当我一次运行它时，我得到了这个错误。这是查询：

```
 SELECT lesson_requests_global_2.student_name,
           (3959 * ACOS(COS(RADIANS(30.096595)) * COS(RADIANS(lat)) * COS(RADIANS(lng) - RADIANS(- 81.718983)) + SIN(RADIANS(30.096595)) * SIN(RADIANS(lat)))) AS distance,
           lesson_requests_vendor.user_purchased
    FROM lesson_requests_global_2
    INNER JOIN
      ( SELECT student_name,
               MAX(request_date) AS max_request_date
       FROM lesson_requests_global_2
       WHERE ( 3959 * ACOS(COS(RADIANS(30.096595)) * COS(RADIANS(lat)) * COS(RADIANS(lng) - RADIANS(- 81.718983)) + SIN(RADIANS(30.096595)) * SIN(RADIANS(lat))) ) < 30
       GROUP BY student_name ) AS recent_student_lesson_request ON lesson_requests_global_2.student_name = recent_student_lesson_request.student_name
    AND lesson_requests_global_2.request_date = recent_student_lesson_request.max_request_date
    LEFT JOIN lesson_requests_vendor ON v.user_purchased = lesson_requests_global_2.student_name
    WHERE lesson_requests_vendor.user_purchased <> 'bob jones'
      AND distance < 30
    ORDER BY distance LIMIT 0 , 20 
```

请注意，长 COS/RADIANS 的东西看起来很复杂，但它是找到一英里半径的距离。我认为它以某种方式认为这些公式中的“纬度”以某种方式在列列表中？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:00:08.250

很简单。

您从您选择的地方加入同一张表，因此您将拥有两个具有相同名称的列。如果你没有把“表名”放在你的字段名之前，这会产生一个sql错误。

你可以这样做：

```
SELECT .... FROM lesson_requests_global_2 request
INNER JOIN
( SELECT ..... FROM lesson_request_globals_2 .....)
....
WHERE .... 
```

并重命名每次出现的`lat`in`request.lat`

`request`现在是您的表名的别名：“实际上”是您选择的第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:00:11.387

听起来 course_requests_global_2 和 course_requests_vendor 都有一个名为“lat”的列。您需要指定要从哪个表中查询它：

```
SELECT lesson_requests_global_2.student_name,
       (3959 * ACOS(COS(RADIANS(30.096595)) * COS(RADIANS(lesson_requests_global_2.lat)) * COS(RADIANS(lng) - RADIANS(- 81.718983)) + SIN(RADIANS(30.096595)) * SIN(RADIANS(lat)))) AS distance,
       lesson_requests_vendor.user_purchased
FROM lesson_requests_global_2
INNER JOIN
  ( SELECT student_name,
           MAX(request_date) AS max_request_date
   FROM lesson_requests_global_2
   WHERE ( 3959 * ACOS(COS(RADIANS(30.096595)) * COS(RADIANS(lesson_requests_global_2.lat)) * COS(RADIANS(lng) - RADIANS(- 81.718983)) + SIN(RADIANS(30.096595)) * SIN(RADIANS(lesson_requests_global_2.lat))) ) < 30
   GROUP BY student_name ) AS recent_student_lesson_request ON lesson_requests_global_2.student_name = recent_student_lesson_request.student_name
AND lesson_requests_global_2.request_date = recent_student_lesson_request.max_request_date
LEFT JOIN lesson_requests_vendor ON v.user_purchased = lesson_requests_global_2.student_name
WHERE lesson_requests_vendor.user_purchased <> 'bob jones'
  AND distance < 30
ORDER BY distance LIMIT 0 , 20 
```

# r - 在R中创建每个“bin”三个变量的直方图？

> ID：11053160
> 
> 赞同：0
> 
> 时间：2012-06-15T14:57:00.943
> 
> 标签：r, histogram

我正在尝试创建一个直方图，其中我的每个行名称都是一个“bin”，并且三个值（平均值、中位数和标准差）分别绘制在每个 bin 中。我用我的数据创建了一个矩阵，如下所示：

```
 Mean  Median     Stdev
1           0.3587489 0.33040 0.2495823
0.5         0.2190726 0.12610 0.2356564
0.333333    0.2156363 0.11210 0.2373799
0.25        0.2213469 0.13030 0.2352794
0.2         0.2158040 0.11590 0.2347598
0.166667    0.2373793 0.15280 0.2389180 
```

我试过玩直方图和谷歌搜索，但由于我不是统计学家，我什至可能无法正确表达自己。但是，如果有人可以帮助我完成这项相当平凡的任务（或以您认为比直方图更好的方式绘制此数据），我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:06:32.723

你可以这样做`barplot(t(mat), beside=TRUE)`

# database - 是 sqlitejdbc 驱动程序包含在 sqlite 中还是 Linux 系统上的默认 java 安装

> ID：11053167
> 
> 赞同：0
> 
> 时间：2012-06-15T14:57:11.187
> 
> 标签：database, sqlite, sqlitejdbc

我在我的 ubuntu 中安装了 liquibase 以使用 sqlite，这需要 sqlitejdbc 驱动程序才能运行。我在 6 个月前安装 sqlite 时找不到这个驱动程序是否已经安装。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:15:51.387

不，你需要自己去拿。不同的组提供了两个略有不同的版本：

[http://www.zentus.com/sqlitejdbc/](http://www.zentus.com/sqlitejdbc/)

[http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC](http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC)

# javascript - jQuery小部件内的覆盖方法

> ID：11053168
> 
> 赞同：5
> 
> 时间：2012-06-15T14:57:13.727
> 
> 标签：javascript, jquery

我正在尝试覆盖 jquery 小部件中的方法。该方法可以在[https://github.com/got5/tapestry5-jquery/blob/master/src/main/resources/org/got5/tapestry5/jquery/validation.js的第 122 行找到](https://github.com/got5/tapestry5-jquery/blob/master/src/main/resources/org/got5/tapestry5/jquery/validation.js)

我想更改第 141 行的 html 输出

我尝试将以下内容添加到我的自定义 js 类中但没有成功。如果有人可以解释如何做到这一点，我将不胜感激。

```
(function($) {    
$.widget( "ui.tapestryFieldEventManager", {
    showValidationMessage : function(message) {
        var field = this.element;
        var form = field.closest('form');

        this.options.validationError = true;
        form.formEventManager("setValidationError", true);

        field.addClass("t-error");

        this.getLabel() && this.getLabel().addClass("t-error");

        var icon = this.getIcon();

        if (icon) icon.show();
        alert("here");
        var id = field.attr('id')+"\\:errorpopup";
        if($("#"+id).size()==0) //if the errorpopup isn't on the page yet, we create it
            field.after("<div id='"+field.attr('id')+":errorpopup' class='tjq-error-popup test'/>");
        Tapestry.ErrorPopup.show($("#"+id),"<span>"+message+"</span>");

    }
});
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T15:24:46.303

您必须在原型上覆盖它。

```
var oldMethod = $.ui.tapestryFieldEventManager.prototype.showValidationMessage;    
$.ui.tapestryFieldEventManager.prototype.showValidationMessage = function (message) {
    // do your stuff here
    alert("worky");

    // apply old method
    oldMethod.apply(this,arguments);
}; 
```

当然，如果您的新方法完成了旧方法所做的一切，您可以跳过应用旧方法。

# java - 指定从 intellij 启动的应用程序的类路径

> ID：11053169
> 
> 赞同：3
> 
> 时间：2012-06-15T14:57:16.473
> 
> 标签：java, intellij-idea

在 IntelliJ 中，我为 Java（控制台）应用程序设置了运行时配置。我需要将目录添加`c:/tmp`到运行应用程序的类路径中。我想我需要添加`-cp c:/tmp`到此对话框中的其中一个框，但我不知道是哪一个：

![在此处输入图像描述](../Images/bf7cdd24aa8c7dc0f2df2a688c63250b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:09:53.970

Classpath 在[Module Dependencies](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)中配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:08:34.153

类路径是一个 VM 参数，因此它应该属于其中。但是，我不确定您是否可以使用这种技术覆盖类路径......

如果你想指定类路径来添加额外的 jar，你应该使用库来代替。

另外，您确定要更改类路径而不是工作文件夹吗？（类路径决定在哪里找到类，工作文件夹定义应用程序的起始目录。）

# ruby-on-rails - 设计基于角色的路由

> ID：11053175
> 
> 赞同：1
> 
> 时间：2012-06-15T14:57:25.210
> 
> 标签：ruby-on-rails, authentication, devise, routes, cancan

我有一个有多个用户的应用程序。每个用户作为一个理论角色（用户、客户等）。我为每种用户类型设计了一个视图/控制器。

我希望能够登录每种类型的用户做一个不同的根 url 并将它们锁定到它。

最初我打算在 Devise 中为用户添加一个名为角色的列，这样我就可以区分用户。我遇到的问题是如何在 routes.rb 中说 if current_user.role == "client" root :to => 'controller#index'

一旦他们登录到该页面，我还想让他们无法访问我的任何其他路径，即：domain.com/calls domain.com/units

我一直在研究 cancan 与 Devise 一起运行，但我不确定这是否是答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:13:41.530

与其在路由中处理，为什么不在ApplicationController中处理呢？

```
#application_controller.rb
before_filter :direct_to

def direct_to
  if current_user.role == "client"
    redirect_to client_controller_path
  # etc
end 
```

# cocos2d-iphone - CCLabelAtlas StartCharMap:':'

> ID：11053181
> 
> 赞同：0
> 
> 时间：2012-06-15T14:58:09.017
> 
> 标签：cocos2d-iphone

我想用 CCLabelAtlas 制作计时器字符串。问题是字符“：”。我在 .png 文件中将此字符添加为“：/0123456789”。我只能看到“：”并且看不到计时器的任何数字。

![在此处输入图像描述](../Images/4b671e72815abfe516fe50ac1bf43e79.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:06:12.797

AFAIK，cocos2d 使用 startCharacter 属性根据 ASCII 表计算所需的符号位置。例如，ASCII 中 ':' 之后的下一个字符是 ';'，而不是 '/'。放置您的字符，因为它们以 ASCII 格式放置，它应该可以正常显示。正确的顺序是

```
/0123456789: 
```

当然，这种情况下的起始字符将是 '/'，而不是 ':'

# javascript - getElementByID 使用变量

> ID：11053184
> 
> 赞同：2
> 
> 时间：2012-06-15T14:58:12.357
> 
> 标签：javascript, variables, getelementbyid

我正在尝试使多个文本输入字段共享一个值。文本字段命名为 StartDate#，其中 # 替换为数字。我正在尝试使用以下代码：

```
function SetTimeFrame(element) {
    if (document.Labs.SameDate.checked==true) {
        var Elements=document.Labs.elements.length;
        for (var i=0; i<Elements; i++) {
            if (document.Labs.elements[i].type=='select-one') {
                    document.Labs.elements[i].options[element.selectedIndex].selected=true;
                    document.getElementById("StartDate"+i).value = document.getElementById("StartDate0").value;
            }
        }
    }
} 
```

当我使用此代码时，我收到以下错误：

> 位置 (45:7) 的 Javascript 错误：'document.getElementById[...]' 为空或不是对象

45:7 是这条线：

```
document.getElementById("StartDate"+i).value = document.getElementById("StartDate0").value; 
```

似乎它没有将“i”的值附加到“StartDate”，因为它迭代了forloop。我知道页面中有“StartDate0”和“StartDate1”，所以我知道它们不为空。

我查看了其他几个与我类似的 Stack Overflow 问题，例如[getElementById with a variable plus an id name](https://stackoverflow.com/questions/10833826/getelementbyid-with-a-variable-plus-an-id-name)，以及[如何通过使用 getElementById 在 JSP 中提供变量来访问元素？](https://stackoverflow.com/questions/5184779/how-to-access-an-element-by-giving-a-variable-in-jsp-using-getelementbyid)但事实证明两者都没有给出成功的解决方案。

给予的任何帮助将不胜感激。

# facebook-opengraph - 在身份验证对话框中更改 Facebook Open Graph 操作的顺序

> ID：11053185
> 
> 赞同：0
> 
> 时间：2012-06-15T14:58:15.990
> 
> 标签：facebook-opengraph, facebook-authentication

是否可以选择在身份验证对话框中显示哪些 Facebook Open Graph 操作？它默认为字母顺序，仅显示前两个。我们的网站有 4 个操作，默认情况下不显示我们更突出的操作。在开发人员设置中找不到更改此顺序的方法。只是看看有没有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:28:22.113

不，这不可能，你不能这么详细地配置它

# jquery - 动画悬停和活动类问题 - jQuery

> ID：11053189
> 
> 赞同：1
> 
> 时间：2012-06-15T14:58:28.097
> 
> 标签：jquery, tabs, hover, jquery-animate

我对 jQuery 比较陌生，所以我真的不知道以下问题是否是由我看不到的非常琐碎的事情引起的。无论如何，我苦苦寻找答案，但一无所获。我希望你能帮帮我！

我一直在尝试编写一个简单的选项卡式菜单，以补充我的滑动内容。我希望标签有一些背景，这些背景会在悬停时淡入，并且活动类被删除并相应地添加到您单击的标签中。

这是我的淡化效果代码，使用 jQuery 颜色插件：

```
$('#menu a').not('.active').hover(function(){
        $(this).stop().animate({backgroundColor: '#FCEA77', 'opacity': '0.3'}, 'slow');
}, function() {
    $(this).stop().animate({backgroundColor: '#000000', color:'#ffffff', 'opacity': '1'}, 'slow');
}); 
```

这是活动类的代码：

```
$('a').click(function () {  
$(".active").removeClass("active");  
$(this).addClass("active");
}); 
```

两者都可以自行工作，但是当我尝试让它们同时工作时，会发生淡入淡出效果，并且当您单击另一个选项卡时，活动类将从当前类中删除，但是单击的选项卡没有得到活跃的班级。知道是什么原因造成的吗？如果它真的很容易和明显，我道歉。

哦，这是我的CSS：

```
#menu { padding: 10px 0 0 0;
    height: 25px;
    color: white;
    font-weight: bold;
    font-size: 14px;
    position:relative;
}

#menu a{
    color:white;
    padding: 10px;
    text-decoration: none;
}

#menu a.active {
    color:black;
    background:#FCEA77;
} 
```

和我的 HTML：

```
 <div id="menu">
        <a href="#home" class="active">Home</a>
        <a href="#news">News</a>
        <a href="#info">Info</a>
        <a href="#team">Team</a>
        <a href="#gallery">Gallery</a>
        </div> 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:21:26.047

这是[你](http://jsfiddle.net/PaJS6/11/)想要的吗？

我看到的问题是`.animate`直接向标签添加样式，根据正常的 CSS 规则`<a href>`覆盖类中的任何样式。`.active`

最简单的解决方案是添加`!important`到`active`类样式中：

```
#menu a.active {
    color: black !important;
    background: #FCEA77 !important;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:06:40.230

试试这个

```
 $('#menu a').hover(function(){
       if(!$(this).hasClass('active')) {
            $(this).stop().animate({'backgroundColor': '#FCEA77', 'opacity': '0.3'}, 'slow');
            }, function() {
              $(this).stop().animate({'backgroundColor': '#000000', 'color':'#ffffff', 'opacity':     '1'}, 'slow');
        }
     } 
```

你也可以查看这个例子[Demo](http://jsfiddle.net/PaJS6/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:16:01.270

我现在看到了问题。Opacity 根本不需要引号，而其他 CSS 规则确实需要它。所以它是：

```
$('#menu a').not('.active').hover(function(){
    $(this).stop().animate({backgroundColor: '#FCEA77', opacity: 0.3}, 'slow');
}, function() {
    $(this).stop().animate({backgroundColor: '#000000', color:'#ffffff', opacity: 1}, 'slow');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:23:04.510

1.  从动画中的属性中删除所有单引号
2.  使用`.on('mouseenter', ...)`and`.on('mouseleave', ...)`而不是`.hover(...)`，否则只有在文档就绪时不活动的元素才会被定位
3.  `$(this).trigger('mouseleave');`在`click`回调中放一个

[这里的](http://jsfiddle.net/qcSsm/)例子

# python - 将属性修饰的成员复制到新类

> ID：11053194
> 
> 赞同：2
> 
> 时间：2012-06-15T14:58:46.520
> 
> 标签：python

我正在尝试将所有方法和属性从一个类复制到另一个类的实例。不幸的是，我遇到了属性问题。这是一个例子：

```
class ToAdd(object):
    @property
    def foo(self):
        return 'foo!'

class Base(object):
    pass

b = Base()
for item, val in ToAdd.__dict__.iteritems():
    if not item.startswith('__'):
        setattr(b, item, val) 
```

打电话时`b.foo`我希望得到`'foo!'`，但它却返回`<property at 0x104a73d08>`。

请注意，这类似于 mixin，但我希望它适用于实例而不是类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:37:56.370

可能有一种方法可以用更少的“魔法”来完成您想要的事情，但是可以更改实例的类......

```
class ToAdd(object):
    @property
    def foo(self):
        return 'foo!'

class Base(object):
    pass

b = Base()

NewBase = type('NewBase', (Base, ToAdd), {})
b.__class__ = NewBase
print(b.foo)
# foo! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:02:10.610

属性（更一般地说，描述符）仅适用于类型，而不适用于实例，因此这不起作用。您不仅会遇到属性问题，还会遇到方法问题，因为您的方法破坏了`self`参数的隐式传递。

# shell - 使用 ssh 远程加 grep

> ID：11053195
> 
> 赞同：2
> 
> 时间：2012-06-15T14:58:46.927
> 
> 标签：shell, ssh, arguments

我正在运行一个类似上面的 shell 脚本：

```
vQtde=`ssh  user@server 'ls -lrt /mnta2/gvt/Interfaces/output/BI/sent/*.?${vDiaAnterior}* | grep "${vMDAtual}0[345678]:" |wc -l'` 
```

并且返回错误：`ksh: /usr/bin/sh: arg list too long`

我知道本地服务器中的相同脚本返回 9，如何在远程 grep 中转义“”？

变量是：

```
vDiaAtual=`date +%d`
vMesAtual=`date +%b`
vMDAtual=" $vMesAtual $vDiaAtual ";
vDiaAnterior=120614 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:43:12.850

这里的问题不在于 grep。问题如下：参数`/mnta2/gvt/Interfaces/output/BI/sent/*.?${vDiaAnterior}*`由 shell 扩展（`ksh`在本例中为 by），结果列表太大。

最好简单地做`ls -lrt /mnta2/gvt/Interfaces/output/BI/sent/`，然后在它之后添加额外`grep`的。

就像是：

```
ls -lrt /mnta2/gvt/Interfaces/output/BI/sent/ | grep "\..${vDiaAnterior}" | grep ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:05:50.487

根据[有关该错误消息的信息](http://www.unix.com/unix-advanced-expert-users/15577-arg-list-too-long.html)，我不确定转义引号是否是这里的真正问题。

你最终想要做什么？可能有一种稍微不同的方法可以避免这个问题。您似乎正在尝试计算具有某个“最后修改”日期的文件数。这是准确的吗？如果是这样，我强烈建议*不要*使用 的输出`ls`来做到这一点。平台之间的输出不一致，甚至可以在版本之间更改。该`find`实用程序更适合此类事情。

尝试这样的事情：

```
dir=/mnta2/gvt/Interfaces/output/BI/sent/
pattern="*.?${vDiaAnterior}*"
time= # Fill this in based on the "last modified" time that you're looking for

find $dir -iname "$pattern" -mtime $time -exec printf '.' \; | wc -c 
```

您可以省略使用额外的变量，它们只是为了使网页上的代码更具可读性。

这将在给定目录中搜​​索名称与指定通配符模式匹配且“最后修改”时间与您指定的任何文件匹配的所有文件。对于找到的每个匹配项，将`printf '.'`运行代码（将一个点打印到标准输出）。 `wc`然后计算点字符的数量，这将等于找到的匹配文件的数量。`ls`这种方法的好处是它最大限度地减少了程序之间（包括 shell 和） 之间需要传输的数据量。`find`在内部处理通配符匹配，而不是要求 shell 扩展通配符并将结果传递给`ls`. 您也只向每个匹配文件发送一个字符，`wc`而不是一长行`ls`每场比赛的输出。这应该会减少您遇到“arg list too long”错误的机会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:34:05.217

我用这种方式解决了这个问题： - 在本地服务器中创建一个文件 .sh 接收参数：

```
#!/usr/local/bin/bash 
```

vDiaAnterior="${1}"; vMDAtual="${2}";

ls -l /mnta2/gvt/Interfaces/output/BI/sent/*.?${vDiaAnterior} *AMA* | grep "${vMDAtual}[345678]:" | wc -l;

*   远程呼叫：

    > ssh 用户@服务器“。/mnta1/prod_med1/scriptsf/ver_jobs_3_horas.sh $vDiaAnterior '$vMDAtual'”

结果：9 个文件。

最好的问候，考卡

# c# - 在实例化 C# 对象之前验证 WPF 文本框中的数据？

> ID：11053198
> 
> 赞同：0
> 
> 时间：2012-06-15T14:58:55.093
> 
> 标签：c#, wpf, data-binding

我有一个带有 ListBox 的 WPF 浏览器应用程序，其中包含有关 Bicycle 类的多个对象的信息。该应用程序的下半部分包含许多文本框，用户可以在其中输入有关新自行车的信息。我的目标是使用验证规则（我已经工作过的规则）来显示验证错误，如果用户没有在字段中输入可接受的值并且在所有字段都通过验证测试之前不允许提交数据。我的问题是，如果数据未绑定到实例化的 Bicycle 对象，我不确定如何验证数据。我应该在接受零参数的 Bicycle 类中创建一个构造函数并将 TextBox 值绑定到此实例吗？或者有什么方法可以将验证规则绑定到类的属性而不创建该类的实例？来源是什么？

编辑：提交时，带有用户 TextBox 输入的 Bicycle 对象存储在 ObservableCollection 中，该集合填充 ListBox。如果我使用 Bicycle 类的一个实例来绑定数据，我不确定如何从 TextBoxes 中获取数据以将多个（唯一）自行车添加到 ObservableCollection。

编辑：我将 TextBoxes 绑定到与集合分开的 Bicycle 对象，并将其中的值传递到新的 Bicycle 对象中，当用户按下提交按钮时，该对象可以添加到集合中。我无法弄清楚如何复制 Bicycle 对象，而不仅仅是将原始对象作为引用传递，但是将值发送到新 Bicycle 对象的构造函数可能会避免这样的[问题](http://www.agiledeveloper.com/articles/cloning072002.htm)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:52:34.957

在您的代码隐藏中，创建一个 Bicycle 实例。在您的代码中拥有一个返回该 Bicycle 实例的公共属性。然后将所有文本框绑定到自行车上的属性。即：Bicycle.TireSize，或 Bicycle.Color，或其他。然后，您可以在用户完成输入数据后验证 Bicycle 对象。如果它是有效的，那么您的自行车已经制造好了，您可以将它发送到您需要存放它的任何地方。

# iphone - 在 iPhone 中使用弹出框控件

> ID：11053200
> 
> 赞同：1
> 
> 时间：2012-06-15T14:58:59.993
> 
> 标签：iphone, ios

```
 pop = [[UIPopoverController alloc] initWithContentViewController:popoverView]; 
    pop.delegate = self;  //optional
    CGSize size = CGSizeMake(300, 100); // size of view in popover…V2
    pop.popoverContentSize = size;

    [pop presentPopoverFromRect:control.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

Youtube 链接：[http](http://www.youtube.com/watch?v=1iykxemuxbk) ://www.youtube.com/watch?v=1iykxemuxbk 它在模拟器中运行良好，但在 iPhone 上运行时崩溃。我可以很容易地在 iPad 上实现这么多文章，但在 iPhone 上却找不到富有成果的文章。请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:01:09.610

`UIPopOverController`不适用于`iPhone`。**只有**iPad。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T06:43:26.503

UIPopOverController 不适用于 iPhone，仅适用于 Ipad

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T06:50:44.283

如果您想在 iPhone 上模拟类似弹出框（例如 Facebook 应用程序），您必须使用 UIViews 和自定义图形从头开始编写代码。

正如其他人所说，popover API 仅适用于 iPad。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:25:44.027

一个在 iPhone 上运行的类似 popover 的开源项目：

[这里是](http://mobiledevelopertips.com/open-source/ios-open-source-popover-control-for-iphone-and-ipad.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:44:20.843

尝试使用 WEPopover 框架。这是链接[https://github.com/werner77/WEPopover](https://github.com/werner77/WEPopover)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T19:10:07.763

如果你真的想在 iphone 中使用 popover，那么试试这个库。这很酷。我与我的 ios 应用程序集成。

[iphone 的自定义弹出框控制器](https://github.com/50pixels/FPPopover)

# mongodb - Mongo 三重复合指数

> ID：11053201
> 
> 赞同：3
> 
> 时间：2012-06-15T14:59:02.310
> 
> 标签：mongodb, mongodb-indexes

*如果您有一个双复合索引 { a : 1, b : 1}，那么对我来说，如果您单独查询b*将不会使用该索引（即您不能在查询中“跳过” *a*）。但是，如果您单独查询*a* ，则将使用该索引。

但是，给定一个三重复合索引 { a : 1, b: 1, c: 1} 我的解释命令显示当您查询*a*和*c*时使用该索引（即您可以在查询中“跳过” *b*）。

Mongo 如何在查询*ac时使用**abc*索引，在这种情况下索引的效果如何？

 ***背景：**

我的用例是有时我想查询 a,b,c，有时我想查询 a,c。现在我应该只在 a、b、c 上创建 1 个索引，还是应该在 a、c 上创建一个索引，在 a、b、c 上创建一个？

（在 a,c,b 上创建索引没有意义，因为*c*是具有良好选择性的多键索引。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:05:58.267

**bottom line / tl;dr：**如果查询和是否相等或不相等，`b`则可以“跳过”索引，但例如，对于 sorts on ，则不能“跳过” 。`a``c``c`

这个问题问得好。不幸的是，我找不到任何可以更详细地权威地回答这个问题的东西。我相信此类查询的性能在过去几年中有所提高，因此我不会相信有关该主题的旧材料。

整个事情非常复杂，因为它取决于索引的选择性以及您是否查询相等、不等式和/或排序，`explain()`您唯一的朋友也是如此，但这里有一些我发现的东西：

***警告***：现在出现的是实验结果、推理和猜测的混合体。我可能把凯尔的类比延伸得太远了，*我什至可能完全错了*（而且很不幸，因为我的测试结果与我的推理松散地吻合）。

显然可以使用 A 的索引，这取决于 A 的选择性，当然很有帮助。“跳过” B 可能很棘手，也可能没有。让我们保持类似于[Kyle 的食谱示例](http://kylebanker.com/blog/2010/09/21/the-joy-of-mongodb-indexes/)：

```
French
    Beef
        ...
    Chicken
        Coq au Vin
        Roasted Chicken
    Lamb
        ...
    ... 
```

如果你现在让我找一个叫“Chateaubriand”的法国菜，我可以用索引`A`，因为我不知道成分，所以必须扫描所有菜`A`。另一方面，我确实知道每个类别中的菜肴列表是通过 index 排序的`C`，所以我只需要在每个成分列表中查找以“Cha”开头的字符串。如果有 50 种成分，我将需要 50 次查找而不是仅查找一种，但这比扫描每道法国菜要好得多！

> 在我的实验中，这个数字比 中的不同值的数量要小得多`b`：它似乎从未超过 2。但是，我只用一个集合进行了测试，这可能与`b`-index 的选择性有关。

不过，如果你要我给你一份**按字母顺序排列的所有法国菜的清单**，那我就**麻烦**了。现在上的索引`C`毫无价值，我必须对所有这些索引列表进行合并排序。我必须扫描每个元素才能这样做。

这反映在我的测试中。以下是一些简化的结果。原始集合有日期时间、整数和字符串，但我想保持简单，所以现在都是整数。

本质上，只有两类查询：`nscanned`<= 2 *的查询`limit`，以及必须扫描整个集合（120k 文档）的查询。指数为`{a, b, c}`：

```
// fast (range query on c while skipping b)
> db.Test.find({"a" : 43, "c" : { $lte : 45454 }});
// slow (sorting)
> db.Test.find({"a" : 43, "c" : { $lte : 45454 }}).sort({ "c" : -1});
> db.Test.find({"a" : 43, "c" : { $lte : 45454 }}).sort({ "b" : -1}); 

// fast (can sort on c if b included in the query)
> db.Test.find({"a" : 43, "b" : 7887, "c" : { $lte : 45454 }}).sort({ "c" : -1});

// fast (older tutorials claim this is slow)
> db.Test.find({"a" : {$gte : 43}, "c" : { $lte : 45454 }}); 
```

您的里程会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:03:51.410

您可以将查询 A 和 C 视为查询 A 的特殊情况（在这种情况下将使用索引）。使用索引比加载整个文档更有效。

假设您想要获取所有文档，其中 A 在 7 到 13 之间，C 在 5 到 8 之间。

如果您仅在 A 上有一个索引：数据库可以使用该索引来选择 A 在 7 到 13 之间的文档，但是为了确保 C 在 5 到 8 之间，它也必须检索相应的文档。

如果你对 A、B、C 有一个索引：数据库可以使用索引来选择 A 在 7 到 13 之间的文档。由于 C 的值已经存储在索引的记录中，它可以确定是否对应文档也符合 C 标准，而无需检索这些文档。因此，您将避免磁盘读取，从而获得更好的性能。*

# javascript - JQuery 和 Azure 表，有没有办法用 JQuery 插入实体？，帐户密钥会发生什么？

> ID：11053210
> 
> 赞同：0
> 
> 时间：2012-06-15T15:00:00.670
> 
> 标签：javascript, jquery, rest, azure

我需要在浏览器中使用 REST Api for Tables 直接从浏览器中的 Javascript 插入一个实体，我想使用 jQuery，但我找不到任何代码可以做到这一点，我不知道，例如，帐户密钥会发生什么。我应该在页面中公开我的帐户密钥吗？我很确定这是一个非常非常糟糕的主意，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:44:56.490

直到 2012 年 6 月，如果不共享您的密钥，就无法做到这一点，正如您所说，这可能是一个非常糟糕的主意。

借助 2012 年 6 月的功能，您可以考虑使用共享访问签名来提供对表或部分表的不同级别的访问。

您将如何使用它在很大程度上取决于您的方案，但我希望您只想为经过身份验证的用户执行此操作，通过 SSL 连接传递共享访问签名，有效期很短，可能带有分区如果您的用户数量有限，则为每个用户提供密钥。

请参阅[http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx)

# class - 向Scala案例类添加字段？

> ID：11053214
> 
> 赞同：2
> 
> 时间：2012-06-15T15:00:09.953
> 
> 标签：class, scala, case

我在 上看到了一些博客`Pimp my Library pattern`，这些似乎可以很好地为类添加行为。

但是，如果我有一个`case class`并且我想要`add data members`它怎么办？作为一个案例类，我不能扩展它（*不推荐/强烈反对从案例类继承*）。这些皮条客模式中的任何一个都允许我将数据添加到案例类吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:12:49.733

不 - 我看不出你怎么能做到这一点，因为*丰富的实例*通常被丢弃（注意：新的 pimp-my-library 模式被称为丰富我的图书馆）。例如：

```
scala> case class X(i: Int, s: String)
defined class X

scala> implicit class Y(x: X)  {
   |     var f: Float = 0F
   |   }
defined class Y

scala> X(1, "a")
res17: X = X(1,a)

scala> res17.f = 5F
res17.f: Float = 0.0

scala> res17.f
res18: Float = 0.0 
```

您必须确保您保留了包装的实例：

```
scala> res17: Y
res19: Y = Y@4c2d27de

scala> res19.f = 4
res19.f: Float = 4.0

scala> res19.f
res20: Float = 4.0 
```

但是，我发现这在实践中没有用。你有一个包装器；你最好把这个明确

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T17:15:13.283

这不是办法。只是可能性的证明。通过这种方式，您可能会遇到很多问题。

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

case class A(i: Int)

class B(a: A){
  var s: String = ""
}

object B{
  val as = scala.collection.mutable.WeakHashMap[A, B]()
}

implicit def a2b(a: A) = B.as.getOrElseUpdate(a, new B(a))

// Exiting paste mode, now interpreting.

defined class A
defined class B
defined module B
a2b: (a: A)B

scala> val a = A(1)
a: A = A(1)

scala> a.s = "test"

scala> a.s
res0: String = test 
```

[WeakHashMap](http://www.scala-lang.org/api/current/scala/collection/mutable/WeakHashMap.html)：一个哈希映射，其中包含对弱可达条目的引用。当不再（强烈）引用该键时，将从该映射中删除条目。此类包装 java.util.WeakHashMap。

请注意，由于`case class`'s 被覆盖的`equals`方法，您会得到这种有趣的行为：

```
scala> A(2).s = "test2"

scala> A(2).s
res2: String = test2 
```

所以你不应该使用`case class`或使用它`override def equals(that: Any) = this eq that.asInstanceOf[AnyRef]`。

# ios - UITableView 部分始终保持在视图内

> ID：11053222
> 
> 赞同：4
> 
> 时间：2012-06-15T15:00:24.240
> 
> 标签：ios, uitableview, visible, always-on-top

我有一个包含 3 个部分的 UITableView：

**第 1 部分：** 该部分的标题是“球员”，内容正好是 1 个单元格，其中包含 1-4 个球员姓名的水平列表。

**第 2 部分：** 此部分的标题为“回合”，内容是 X 个单元格，每个单元格包含每个球员在第 X 回合得分的水平列表。

**第 3 部分：** 此部分的标题标题为“Totals”，内容正好是 1 个单元格，其中包含每个玩家回合得分的总和。

现在，所有这些部分都会随着第 2 部分的新一轮的展开而滚动，但我希望始终将第 1 部分保持在屏幕顶部，并将第 3 部分放在第 2 部分的正下方，直到它向下扩展到屏幕底部并且然后停下来呆在那里。

我想我可以在 UIView 中使用 3 个单独的表格视图来做到这一点，但这似乎有点令人费解，我第 3 节不会停留在第 2 节下方，直到它扩展到屏幕底部；它总是在底部......

有没有办法让表格部分/行始终可见，并且其他部分仍然可以滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:42:59.810

如您所讨论的那样使用 3 个 UITableViews，并且每次将单元格添加到 tableView 2 时，只需为第三个 tableview 的位置设置动画以将其向下移动，直到它到达屏幕底部，然后将其留在那里。（此外，在向 tableView 2 添加元素时，您需要扩展它的高度。）

否则，就像 Cyrille 所说的那样，没有办法只用一个 tableview 来实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:22:48.437

不是标准的 UITableView 实现，没有。

# javascript - Javascript 相当于 Kalileo 的 Visualizer？

> ID：11053225
> 
> 赞同：2
> 
> 时间：2012-06-15T15:00:33.553
> 
> 标签：javascript, networking, visualization

惠

我想从 flash 迁移到 javascript 以可视化我的数据。我的数据是具有语义关系的概念图。在 Flash 中，我使用“Kalileo 的可视化工具”来执行类似 [http://lab.kapit.fr/skin/frontend/default/kaplab/images/kap-lab-kalileo-3.png](http://lab.kapit.fr/skin/frontend/default/kaplab/images/kap-lab-kalileo-3.png)的操作。Kalieleo 允许我

*   添加/删除节点/链接（动态和静态）
*   添加没有父节点的节点
*   组节点
*   在动态添加/减少节点/链接的情况下重新布局可视化
*   拖放节点

我研究了许多现有的 js 框架，包括 InfoVis JIT、Dracula、D3.js、Sigma.js 等。我得到的最接近的是“Force-Directed Graph”，但我想要分层布局中的可视化。

有人可以告诉我另一个可以做我想做的 javascript/(html5) 库吗？

问候

# ios - jquery mobile，cordova不能在iphone模拟器上工作

> ID：11053231
> 
> 赞同：0
> 
> 时间：2012-06-15T15:00:54.087
> 
> 标签：ios, cordova

我是 ios phonegap 的新手。我开始使用基于cordova的应用程序。我的代码在模拟器中没有显示页眉和页脚，但在浏览器中运行良好。我的 index.html 代码是这样的。

```
<!doctype html>
<html>
<head>
    <title>JQM Sample</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta charset="utf-8">
   <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <link href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js" type="text/javascript"></script>

</head>
<body >
    <div data-role="page">
        <div data-role="header" data-position="fixed" >
            <h1>Header</h1>
        </div>
        <div data-role="content">
<p>Welcome</p>
...
           </div>
        <div data-role="footer"  data-position="fixed" >
            <h1>Footer</h1>
            </div>
        </div>
</body>
</html> 
```

我错过了什么吗？​我的 ios 版本是 5.1。我还在 Cordova.plist 中添加了 URL，仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:00:39.637

您需要将远程 URL code.jquery.com 添加到白名单中。如果您希望您的应用程序可以离线使用，最好将 JS 文件作为应用程序的一部分包含在内并使用本地副本。

要将 URL 添加到白名单，请编辑项目中的 Cordova.plist 文件并在 ExternalHosts 下添加 code.jquery.com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:47:26.270

你用的是什么版本的IOS？

JQM 团队众所周知并记录在案，像 IOS 4.3 这样的旧平台不支持开箱即用的固定工具栏定位。你需要polyfill。

看看他们的文档：http: [//jquerymobile.com/demos/1.1.0/docs/toolbars/bars-fixed.html](http://jquerymobile.com/demos/1.1.0/docs/toolbars/bars-fixed.html)

也不要忘记更新 *.plist，如本主题中所述。

# iphone - Sqlite 准备语句

> ID：11053232
> 
> 赞同：0
> 
> 时间：2012-06-15T15:01:00.297
> 
> 标签：iphone, objective-c, sqlite, prepared-statement

我的表中有 12 列。其中最后两列是新添加的。我使用 sqlite3 数据库。如果我对除最后创建的两个新列之外的任何其他列使用 where 子句，则会创建数据库并正确执行查询。最后两列返回 NULL 字符串，这会使应用程序崩溃并**由于未捕获的异常“NSInvalidArgumentException”而引发终止应用程序，原因：'****** +[NSString stringWithUTF8String:]: NULL cString' *** **

 *在 SQL 管理器中执行查询时，我可以检索最后两列。我想我的准备声明中有什么地方有问题。

```
 NSString *query = @"select * from tableName where lastColumn = 'Value'";
    const char *sqlStatement = [query UTF8String];
sqlite3_stmt *compiledStatement;
    NSLog(@"could not prepare statement: %s\n", sqlite3_errmsg(database));

if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
// Loop through the results and add them to the feeds array
while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
    } 
```

请帮助我。我完全不知道最后两列去了哪里.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:53:38.273

您将 NULL 传递给 stringWithUTF8String: 方法，这是不允许的。在实例化 NSString 对象之前，您应该检查从 sqlite 获得的值。

```
const char *ctext = sqlite3_column_text(compiledStatement, 2);
if (ctext) {
    text = [NSString stringWithUTF8String:ctext];
} 
```

添加新列时，所有现有行中此列的值都设置为 NULL。*

# c# - 使用 Fileupload 保存 XML 文件

> ID：11053233
> 
> 赞同：0
> 
> 时间：2012-06-15T15:01:01.733
> 
> 标签：c#, asp.net

如何将 xml 文件的内容保存到数据库（在具有 XML 类型的字段中）

我应该用ie读取文件的内容：

文件上传1.文件内容；

然后将其作为参数发送以保存在数据库中？这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:02:44.353

您应该使用 XmlReader 和 XmlTextReader 类将 XML 文件加载到内存中。它们在 System.XML 命名空间中定义。您还可以使用 System.Xml.Linq 命名空间中定义的 XDocument 类。欲了解更多信息，请看这里：

[http://www.c-sharpcorner.com/uploadfile/mahesh/readingxmlfile11142005002137am/readingxmlfile.aspx](http://www.c-sharpcorner.com/uploadfile/mahesh/readingxmlfile11142005002137am/readingxmlfile.aspx)

[http://support.microsoft.com/kb/307548](http://support.microsoft.com/kb/307548)

```
var reader = new XmlTextReader("C:\\temp\\xmltest.xml"); 
```

然后，如果可能（取决于您使用的 DB 系统）或 varchar，您可以将 XML 内容作为 XML 存储在 DB 中。将它们存储为 XML 会更好，因为您可以确保其格式正确并针对特定模式进行验证！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:16:56.823

您必须先将其保存到服务器硬盘，`InnerXML`然后将其保存到字符串变量中，然后将其保存到数据库中。

假设您将文件保存到磁盘中的某个文件夹，您可以使用以下方法（使用 LINQtoXML）读取内容

```
XElement elm = XElement.Load(Server.MapPath(@"../YourUploadFolder/yourXMl.xml"));
if(elm!=null)
{
    var reader = elm.CreateReader();
    reader.MoveToContent();
    string xmlContent = reader.ReadInnerXml(); xmlContent
   // Now save to the database    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:08:49.920

您基本上可以从 XML 文字字符串中填充 XML 类型的列，因此您可以轻松地使用 a`normal INSERT statement`并将 XML 内容填充到该字段中。为此，您必须阅读 XML 文件。

您可以使用`System.Xml.Linq`命名空间和使用`XDocument.Load(@"YourXmlFile.xml");`或任何标准方法来读取 XML 文件，如此处所述 - [http://support.microsoft.com/kb/307548](http://support.microsoft.com/kb/307548)

# monodevelop - 在 MonoDevelop 中包含 openFrameworks

> ID：11053236
> 
> 赞同：0
> 
> 时间：2012-06-15T15:01:07.787
> 
> 标签：monodevelop, openframeworks

如何在 MonoDevelop C/C++ 项目中包含 openFrameworks？

我将包含路径设置为`OF_ROOT/libs`and can do`#include <openFrameworks/ofMain.h>`但我收到一条错误消息，指出该`"ofConstants.h"`文件不存在，但确实存在。它位于`OF_ROOT/libs/openFrameworks/`子目录中的某处。

`ofMain.h`包括像 ofConstants.h 这样的文件`#include "ofConstants.h"`

帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:55:18.190

看起来 openFrameworks 的标题设置很奇怪，并且需要包含所有子目录的路径：[https ://github.com/openframeworks/openFrameworks/blob/master/apps/devApps/fboTester/emptyExample_linux.cbp#L47](https://github.com/openframeworks/openFrameworks/blob/master/apps/devApps/fboTester/emptyExample_linux.cbp#L47)

# apache-flex - 屏幕尺寸未及时更新以进行绑定，Flex Mobile

> ID：11053243
> 
> 赞同：0
> 
> 时间：2012-06-15T15:01:36.480
> 
> 标签：apache-flex, screen-orientation, flex-mobile, flex4.6

我有一个显示图像的应用程序。它根据屏幕旋转调整它们的大小，通常设置“picwidth = screen.width”，其中“picwidth”是每个图片的宽度绑定到的属性。

所以我有几个类似的功能：

```
protected function changeOrientation(e:StageOrientationEvent):void
               {
                     picwidth = screen.width;
                     picheight = screen.width*1.467;
               } 
```

我也试过用对象本身的变量来做这个：

```
protected function changeOrientation(e:StageOrientationEvent):void
               {
                   img.width = screen.width;
                   img.height = screen.width*1.467;
               } 
```

在模拟器中，这些功能可以正常工作。但在设备上，“screen.width”似乎总是在方向改变之前获取值，给出与我需要的完全相反的尺寸。

注意：这不仅发生在图像上，还发生在组容器、TextAreas 以及任何尺寸取决于屏幕尺寸的东西上。

我尝试简单地切换值，以便它获取值并将它们分配给相反的变量以解决延迟问题，然后它们在我的设备上工作，但它们在模拟器中倒退，我担心其他设备将作为模拟器可以，它会再次被破坏。

有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:43:01.167

此问题已通过以下方式解决：

更改事件侦听器：

```
stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGE, changeView); 
```

至：

```
stage.addEventListener(Event.RESIZE, changeView); 
```

并将 a`Event`而不是 a传递`stageOrientationEvent`给每个处理程序方法。

在我需要的每一个实例中工作。有点遗憾的是，唯一`StageOrientationEvent.ORIENTATION_CHANGE`设计要做的事情可以被更通用的功能所超越。

# java - 使用哪个 Java XML 解析器？

> ID：11053246
> 
> 赞同：0
> 
> 时间：2012-06-15T15:01:43.777
> 
> 标签：java, xml, jaxb, xml-parsing

我从这个[链接](http://www.mkyong.com/tutorials/java-xml-tutorials/#)中发现Java 中有几种类型的 XML 解析器。你能帮我选择哪一个会消耗更少的内存并且工作得更快：

```
DOM XML Parser
SAX XML Parser
JDOM XML Parser
JAXB 
```

我想用 C 客户端创建 Java 服务器应用程序，它使用 XML 通过网络进行通信。如果我选择使用 JAXB，我可以轻松地将它与`libxml`? `libxml`如果我使用 JAXB 并在应用程序之间传输数据，可能会出现哪些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:05:12.493

这些是更多的解析技术，而不是实际的解析工具。Xerces 是一个解析工具的例子。

SAX 有利于速度和解析事件处理。从事件中解析可以很容易地让你跳过不感兴趣的事件，并且跳过的惩罚很低。在读取整个文档时，不需要存储它，因此 SAX 可以处理比系统内存更大的文档。

DOM 非常适合将整个文档保存在内存中。这样做很容易让您完成需要文档的所有元素（交叉引用等）的工作。这种便利是有代价的，与 SAX 不同，您必须有足够的内存来保存整个文档。

JDOM 基本上是 DOM，但具有不同的编程接口。它假设它的编程接口更符合 Java，不管这意味着什么。

JAXP 是一套 XML 处理工具，它以可插入的方式包含 SAX 和 DOM 接口，允许您轻松更换后端实现。

JAXB 是一套 XML 处理工具，可方便地将 XML 映射到常规 Java 对象，以及从常规 Java 对象生成 XML。

就个人而言，我喜欢 SAX，但为了使用 SAX 进行有效解析，您应该使用堆栈和上下文相关的解析器块，这些块被推入堆栈并从堆栈中弹出，从而产生 XML 映射到的对象。这个想法是您将您在文档中的位置保持为 StringBuffer，然后推入一个处理程序来处理进入元素，然后处理所有事件，直到它检测到正确的退出事件。然后上面的处理程序从弹出的子处理程序中读取对象。像这样的技术需要一些工作，但可以将 SAX 的速度与 DOM 的便利性结合起来，生成*您自己的*对象树（而不是“节点”树）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:04:51.617

如果你想使用更少的内存，我会选择 SAX。它是一个基于事件的解析实用程序。整个 XML 文件不会像 DOM 对象那样加载到内存中。你把你想保存的东西保存在内存中。SAX 的另一个好处是你只控制你想要的事件，这确实可以提高解析的速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:07:16.370

DOM 将使用更多内存 - 您将需要在内存中创建整个 xml DOM 模型。因此 SAX 或 STAX 将允许解析您需要的内容并节省内存。

JAXB 允许您从 beans 自动映射到 xml 和反向。

# sinatra - 如何从 Sinatra 调用 .NET xml Web 服务？

> ID：11053249
> 
> 赞同：1
> 
> 时间：2012-06-15T15:01:54.463
> 
> 标签：sinatra

我有一个 .Net XML 网络服务，我需要一个简单的 Sinatra 应用程序来调用它。真的只是转发而已。假设我让我的 sinatra.myapp.com/mywebservice.asmx 捕获请求，然后将其与所有传入参数一起扔到 www.myoldapp.com/mywebservice.asmx，获取响应，然后让 sinatra.myapp.com 返回结果给客户。

在这种情况下，我们无法使用域别名，因为我们相信 sinatra.myapp.com 端点的消费者能够跟踪重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:32:02.417

我就是这样做的：

```
require 'sinatra'
require 'net/http'
require 'rexml/document'

get '/mywebservice.asmx' do
  query_string = ''
  params.each  { |k, v| query_string += k + '=' + v + '&' }

  http     = Net::HTTP.new('www.myoldapp.com', 80)
  response = http.get('mywebservice.asmx?' + query_string)

  xml      = REXML::Document.new(response.body)
end 
```

您现在可以对 REXML 对象做任何您想做的事情。
我不能告诉你如何使用它，因为我自己并不掌握它，但你可以在互联网上找到很多谈论它的资源。

# android - UI线程与其他线程的区别

> ID：11053250
> 
> 赞同：3
> 
> 时间：2012-06-15T15:01:56.793
> 
> 标签：android, multithreading, android-activity

我有一个显示启动画面的应用程序。启动屏幕活动创建一个新的 Runnable，它只是休眠 1 秒，然后启动主要活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    UKMPGDataProvider.init(this.getApplicationContext(), Constants.DATABASE_NAME);

    Thread splashThread = new Thread() {
        @Override
        public void run() {
            try {
                sleep(ONE_SECOND_IN_MILLIS);
            } catch (InterruptedException e) {
            } finally {
                Intent intent = new Intent(SplashScreen.this, MainScreen.class);
                finish();
                startActivity(intent);
            }
        }
    };
    splashThread.start();
} 
```

在这个新线程上启动主要活动（以及因此除了启动屏幕之外的整个应用程序）是否可以？

我们听到很多关于 Android 中的“UI 线程”的信息。这个新线程现在是否成为 UI 线程，或者 UI 线程在某些方面是*特殊*的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:14:47.057

Yes, that's fine. `startActivity(intent)` asks the system to launch your main `Activity`. You're not actually loading it yourself in the thread you call that from.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:07:43.363

基本上这是一个`single-thread model`只有一个线程可以修改 UI 的地方，因为 Android UI 工具包不是线程安全的。

黑莓也一样。请参阅[为什么大多数 UI 框架都是单线程的？](https://stackoverflow.com/questions/5544447/why-are-most-ui-frameworks-single-threaded)

# bash - iTerm/bash 脚本打开我的工作区

> ID：11053254
> 
> 赞同：4
> 
> 时间：2012-06-15T15:02:00.360
> 
> 标签：bash, workspace, iterm

所以我想在打开工作配置文件时自动打开我的工作区，问题是它正确打开了窗口（和窗口拆分）但没有运行任何脚本来启动我的服务器、芹菜任务、进入正确的文件夹， ETC。

有没有办法做到这一点？即使运行 bash 脚本也对我有用，iTerm 不必支持它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:59:22.477

我想你会发现这篇文章很有用。它使用 Apple Script 告诉 iTerm2 打开多个窗口并在每个窗口中运行命令。

[http://90kts.com/2011/09/29/split-panes-and-remembered-sessions-in-iterm2/](http://90kts.com/2011/09/29/split-panes-and-remembered-sessions-in-iterm2/)

# database - 在应用程序的数据库端支持多种语言

> ID：11053255
> 
> 赞同：2
> 
> 时间：2012-06-15T15:02:00.757
> 
> 标签：database, codeigniter, database-design, multilingual, multiple-languages

对于我们 Web 应用程序的前端，我们使用 Codeigniter 的 Language 类来支持多种语言。

对于后端：数据库中的某些值也需要以多种语言显示，因为它们将显示在前端。

这是我读过的两种方法：

*   为每个字段使用特定于语言的列：title_en、title_es、title_fr
*   使用包含所有翻译的单独表格

想知道是否还有更多（更好的）我们应该注意的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:55:54.583

这也是我通常做的事情，但是包含所有列的表：元素、en、fr、es 可能会更好，这样每一行都由列*元素*（或*id*或任何其他名称）引用并添加或删除语言将非常容易，因为您所要做的就是添加/删除一列

# java - Struts 2：如何将值加载到来自会话中的列表

> ID：11053256
> 
> 赞同：0
> 
> 时间：2012-06-15T15:02:02.570
> 
> 标签：java, jsp, struts2

我是新来的struts。我想将会话中的数据列表加载到`<s:select>`等于纯 html的选择标记`<select><option>values..</option></select>`。数据可能会从数据库中加载，并将它们放到一个列表中。我寻找互联网。但这一切都对我不起作用。请任何人告诉我如何做到这一点或提供任何工作示例的链接。（包括动作类，struts.xml和jsp页面。最需要的代码就足够了。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:32:44.960

只要您在堆栈上有 java.util.List 中的值列表，就可以使用以下内容：

```
<s:select label="Some label"          
list="yourList"
name="somName" /> 
```

您可以在此处找到示例：[http ://www.mkyong.com/struts2/struts-2-sselect-drop-down-box-example/](http://www.mkyong.com/struts2/struts-2-sselect-drop-down-box-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:45:46.210

我不确定您为什么要将 List 放在会话中？Struts2 提供了一种干净的方式将您的请求/响应数据放入 Valuestack 中，其 OGNL 系统提供了一种非常干净的方式来访问值栈中的这些数据。所有您需要在操作类中有一个列表及其 getter 和 setter 以及UI 使用内置 struts2 标记来访问这些数据。这是完成此操作的简单代码

## 动作类

```
public Class MyAction extends ActionSupport{

  private List<String> myList;
  //getter and setter for myList

  public String execute() throws Exception{
    myList=new ArrayList<String>();
   // fill the list
   return SUCCESS;
  }

} 
```

在 UI 级别，您需要使用 S2[选择标签](http://struts.apache.org/2.3.1/docs/select.html)，例如

## JSP

```
<s:select label="MyList"
       name="myList"
       headerKey="-1" headerValue="Select Value"
       list="myList"

/> 
```

这就是你需要做的。为了在 struts.xml 中映射它，它非常简单，您只需配置您的操作名称及其受人尊敬的类。希望这会对您有所帮助。有关 S2 的更多详细信息，我建议参考官方文档。

如果你想把列表放在你的java类的会话中并想在jsp中访问它，这里是JSP代码

```
%{#session.MyList} 
```

*   [Struts 2.3.1 文档](http://struts.apache.org/2.3.1/docs/home.html)

# c# - 通过 C# 进行串行通信

> ID：11053258
> 
> 赞同：3
> 
> 时间：2012-06-15T15:02:11.463
> 
> 标签：c#, serial-port, buffer, serial-communication

从串行端口读取时，我使用的是 serialport.read(xyz,0,4) 其中 xyz 是一个字节数组。

问题1：这样做时，我读取的数据是否从串口缓冲区中删除？还是有一个指针会增加？

问题2：

```
private void moduleSerialPort_DataReceived(object sender,System.IO.Ports.SerialDataReceivedEventArgs e)
{
.
.
.
} 
```

如果在执行之前数据的代码时接收到新数据，是否会触发接收数据事件？

我发现当我的系统运行几个小时时，发生了以下事情：传输新数据时，它是在串行端口上接收到的，但计算机处理了之前发送的数据。所以我怀疑数据是否保留在缓冲区中并在下一个 datareceived 事件中执行。

有人可以帮帮我吗。感谢你的帮助。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:08:43.463

数据保留在缓冲区中，直到您读取它。简单地处理一个`DataReceived`事件不会导致数据出队，您实际上必须阅读它。如果您读取的缓冲区少于整个缓冲区，那么下次`DataReceived`事件发生时，您将在新数据之前读取旧的剩余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:28:55.743

我认为这会解决你的问题

[http://www.fryan0911.com/2009/04/c-serial-port-communication.html](http://www.fryan0911.com/2009/04/c-serial-port-communication.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:37:16.753

遵循此代码示例

[http://code.msdn.microsoft.com/SerialPort-Windows-Forms-a43f208e](http://code.msdn.microsoft.com/SerialPort-Windows-Forms-a43f208e)

问候。

# linux - 我正在寻找在 FreeBSD 上托管 Web 服务的应用程序

> ID：11053262
> 
> 赞同：0
> 
> 时间：2012-06-15T15:02:18.093
> 
> 标签：linux, web-services, unix, web, freebsd

我的老板让我研究在我们的 FreeBSD 机器上托管 Web 服务的应用程序。以前我只使用 Visual Studio 来做 Web 服务，所以我想知道在 unix 环境中托管它们的最佳应用程序是什么？

谢谢您的帮助！

编辑：为了清楚起见，我说的是这样的事情： http: [//axis.apache.org/axis2/java/core/](http://axis.apache.org/axis2/java/core/) 我只是不熟悉什么是最流行/最稳定的等。在 Unix 方面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:23:50.857

这取决于您要托管的应用程序。有几种方法可以解决您的任务：

1.  使用普通的网络服务器（例如 Apache、Nginx 等）
2.  使用具有固有 Web 服务器功能的专用软件（例如 Twisted、Node.JS 等）。

你需要更具体才能得到更具体的答案:)

# javascript - RIA 开发的客户端和服务器端调试存在哪些技术

> ID：11053263
> 
> 赞同：1
> 
> 时间：2012-06-15T15:02:23.633
> 
> 标签：javascript, debugging, ria

我很想知道 RIA 开发的调试方法是什么。特别是我很好奇是否有工具可以同时为客户端和服务器端提供一种整体调试方法。

从我读过的内容来看，您可以使用托管模式或在 ASP.Net 中使用 GWT 执行类似的操作，其中服务器端断点[以某种方式映射](http://msdn.microsoft.com/en-us/library/7seh8d72.aspx)到客户端（我还没有尝试过）。

是否有一种方法可以将客户端和服务器端集成为更经典的方法，以 HTML+CSS+Javascript 作为客户端技术和单独的服务器后端（对其语言没有限制）。

我想这将是一个非常具体的实现，因为通常还有一种特定于框架的方式来与后端进行通信。

也许我只是不知道为什么这样的实现不明智的限制和原因，这也会让我感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:02:25.943

XDebug 具有[IDE](https://stackoverflow.com/questions/11632369/cant-get-php-debugging-to-work-with-komodo-but-im-almost-there)和[浏览器扩展](http://derickrethans.nl/new-xdebug-helper.html)。[Watir on Rails](https://github.com/chip/watir-on-rails)也是一个很好的解决方案。对于与语言无关的解决方案，[Komodo IDE](http://docs.activestate.com/komodo/7.0/) + [Stackato](http://www.activestate.com/stackato/compare-with-cloud-foundry) + [Feedhenry](https://www.feedhenry.com/mobile-application-platform/)将提供最大的灵活性。

# sql - SQL 具有来自不同表的单列显示值

> ID：11053266
> 
> 赞同：0
> 
> 时间：2012-06-15T15:02:31.450
> 
> 标签：sql, sql-server, sql-server-2008

我需要帮助。我试图在查询中显示一个名为 SubmissionStatus 的字段。但是我需要从多个表中选择它。例如...

我有：

表0

Table1.SubmissionStatus Table2.SubmissionStatus Table3.SubmissionStatus （这三个表都有一个外键将它们与Table0关联）

我可以：从 Table0 中选择 Table1.SubmissionStatus、Table2.SubmissionStatus、Table3.SubmissionStatus

但这不会给我任何东西

我需要类似的东西：SELECT SubmissionStatus FROM Table0（作为一列）

请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:11:32.917

我建议使用联合，如下所示：

```
SELECT T1.SubmissionStatus 
FROM Table1 T1
JOIN Table0 T0 ON T1.primaryKey = T0.foreignKey
UNION
SELECT T2.SubmissionStatus 
FROM Table1 T2
JOIN Table0 T0 ON T2.primaryKey = T0.foreignKey
UNION
SELECT T3.SubmissionStatus 
FROM Table1 T3
JOIN Table0 T0 ON T3.primaryKey = T0.foreignKey 
```

这会将所有内容放在一列中（想想类似 JOIN 关键字的联合类型，但用于连接行而不是列）。

# javascript - 从 cookie 中删除多个值

> ID：11053271
> 
> 赞同：-1
> 
> 时间：2012-06-15T15:02:52.887
> 
> 标签：javascript, jquery, cookies

我有一个项目列表，其中有两个值，一个名称和一个 ID。每个列表项都是使用从 cookie 中提取的数据构建的。它还有一个删除按钮，基本上是查看 HTML，然后从 cookie 中删除该项目。它不是很漂亮，但它很管用。

现在突然之间，引入了第三个值（img src）。因此，我创建了一个新函数来创建 cookie 并构建列表。生活还是很美好的。

但是，当我尝试从数组中删除该项目时，我的问题就出现了。

**JS**

```
$('.deleteNewCookie').on('click', function () {
  var val = $(this).prev().prev().html(); // Search DOM for value

  var cookieStr = cookieData.split('|');
  createCookie('cokLocation', "", -1);
  var newCookie = '';
  $.each(cookieStr, function (index, value) {
     if (value != '') {
        var cookieAdd = value.split(',');
        if (cookieAdd[1] != val) {
           newCookie = newCookie + value + '|';
        }
     }
  });
  createCookie('cokLocation', newCookie, '300');
}); 
```

cookie 中的一项如下所示：

```
ID,Name,/image.png| 
```

现在，当标记更简单并且只有 ID 和名称时，这可以按预期工作，但是当我`.deleteNewCookie`现在单击时，图像源仍保留在 cookie 中。我将如何删除该数组（项目）中的所有内容？为什么它显然只删除了前两个值？

**标记**

```
<li>
  <div class="myLocImg">
    <img src="/image.png">
  </div>
  <div class="myLocInfo">
    <h3>NAME</h3>
    <span url="locationid=ID" class="btn">More details</span>
    <a class="deleteNewCookie">Remove</a>
  </div>
</li> 
```

我有点不愿意重组我的 cookie（因为它正在其他地方使用），但我可能会被说服作为最后的手段。我也没有使用任何插件，而且我对导入任何插件都不感兴趣。请仅使用纯 JS 或 jQuery 解决方案。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:04:28.367

[小提琴](http://jsfiddle.net/sachleen/ptVgE)试图重现问题。代码按预期工作。代码的其他部分导致问题。

问题原来与“`createCookie()`以及值如何存储在 HTML 本身中”有关。

# android - Android 单例方法

> ID：11053275
> 
> 赞同：0
> 
> 时间：2012-06-15T15:03:06.640
> 
> 标签：android, singleton

所以我正在尝试使用单例方法制作应用程序。我想有一个类来存储有关我设备的蓝牙状态/连接/设备的所有信息，并且我想进行多个可以访问这些方法的活动。

我知道我需要一个扩展 Application 的类，然后我可以通过调用 getApplication() 来访问所有内容。我不明白的是我在哪里初始化这个对象。从我的参考框架来看，我有所有这些单独的活动，如果我将对象初始化为一个，我将需要使用意图将对象传递给下一个活动，这完全违背了使用单例的目的方法。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:12:10.787

简单地从`android.app.Application`. 然后将其注册为您的应用程序类`AndroidManifest.xml`：

```
<application android:name="mypackage.MyApplication" ...> 
```

在您的课堂上，您将收到通常的 Android 电话，例如

```
@Override
public void onCreate() { } 
```

您将能够在其中初始化全局实例。

在活动中获取 MyApplication 向下转换的实例：

```
MyApplication app = (MyApplication) getApplication(); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:07:23.937

如果您扩展应用程序，您的类将在您的应用程序启动时创建。可以使用 getApplication() 在 Activity 类中检索它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:51:54.113

在这里检查：[http ://www.kodejava.org/examples/12.html](http://www.kodejava.org/examples/12.html)

在这里： http: [//www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/](http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)

在这里：http: [//inhoo.net/mobile-development/android-development/android-global-variables/](http://inchoo.net/mobile-development/android-development/android-global-variables/)

# salesforce - 我可以在 SalesForce 上自定义“编辑自定义对象记录”页面布局吗？

> ID：11053278
> 
> 赞同：1
> 
> 时间：2012-06-15T15:03:13.483
> 
> 标签：salesforce, customization, page-layout

例如，要创建或编辑一个对象，当我想为某个特定字段添加或更改某些值时，我需要参考另一个网站来检索一些信息。这样，我可以在编辑页面上添加一个按钮或链接吗？ ?

SalesForce 的帮助链接在这里：[https ://help.salesforce.com/apex/htviewhelpdoc?id=co_edit.htm&language=en_US](https://help.salesforce.com/apex/htviewhelpdoc?id=co_edit.htm&language=en_US)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:43:19.610

自定义按钮和链接不会显示在新/编辑页面布局上，因此即使您制作了一个，它也只会在详细视图中可见。

1.  不太具有侵入性的选项是创建一个 URL 或文本字段，将其设置为您的链接的默认值，确保它显示在页面上但只读。还没有尝试过，但应该可以工作（您必须以系统管理员以外的身份对其进行测试，因为您将绕过页面布局的只读属性）。
2.  更具侵入性的选项是使用 Visualforce 覆盖新的和编辑页面布局。更多的工作，但有点干净的解决方案。
3.  真正疯狂的选择是将一段 Javascript 嵌入到标准页面布局的部分标题中，甚至嵌入到侧边栏中。这是一个丑陋的黑客，但它有效，例如，我用它来禁用名称字段的编辑。

* * *

使用方法#3：

1.  创建新的部分标题，向该部分添加一些内容（空白很好，您需要一些东西，否则不会呈现空白部分的标题），将该部分标记为仅在编辑页面上可见。
2.  部分名称限制为 80 个字符，但可以包含`<script>document.getElementById('Name').disabled = true;</script>`. 您需要更长的脚本才能在运行时以某种方式创建一个 URL 并将其附加到页面上靠近“特殊”字段的某个位置。
3.  使用脚本上传静态资源，然后将其用作部分标题：`<script src="filename.js" type="text/javascript"></script>`

* * *

**我对这个 hack 并不太自豪，如果可以的话 - 使用自定义 Visualforce 新和编辑页面。**它又快又脏，可能只应在不允许覆盖页面时使用..但它有效。

# ios - 如何在 Flash CS6 上同时定位 iPhone 和 iPad 分辨率

> ID：11053281
> 
> 赞同：1
> 
> 时间：2012-06-15T15:03:26.080
> 
> 标签：ios, flash, air, retina-display, multitargeting

我正在 Flash CS6 上为 iOS 构建一个小游戏，我想同时针对 iPad 和 iPhone 分辨率，如果可能的话还支持视网膜显示。我玩过电影属性和 Air for iOS 设置，但我仍然对屏幕分辨率感到困惑。我想制作一款高清（支持视网膜的）游戏，我也想针对非视网膜模型。我应该使用哪种分辨率？（我将只有横向）我应该选择 2048x1536（iPad 视网膜）、1024x768（iPad 非视网膜）、960x640（iPhone/iPod touch 视网膜）还是 480x320 像素（iPhone/iPod touch 非视网膜）？我已将 iOS 设置的分辨率设置为 High in Air，保持默认分辨率 (960x640) 不变，但当我在 iPad 3 上测试时，分辨率不是高清，即使我的图形是矢量（用 Flash 制作） . 边角处还可以看到背景颜色，以补偿 iPhone 和 iPad 的纵横比差异。为什么即使我在 iOS 的设置中检查了应用程序，应用程序也可以以非视网膜分辨率呈现？更重要的是，在单个应用程序中同时定位两种屏幕分辨率的最佳方法是什么？

谢谢，坎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:05:49.300

尽管 iOS 是一个依赖于分辨率的操作系统，但舞台分辨率并不重要。如果舞台分辨率为 240x160 或 1920x1280，它看起来是一样的。该设备会将游戏渲染为其原始分辨率。这就是为什么您需要在发布设置中设置分辨率：以便 flash 知道为 iOS 添加对这些分辨率的支持。将舞台设置为 960x640 对 iPhone 来说应该没问题。另一方面，当它为 iPad 发布时，它将根据其原生屏幕分辨率构建，但由于 iPhone 和 iPad 具有不同的纵横比，因此 iPad 将有更多的侧面空间。由于游戏将处于横向模式，因此可以简单地将舞台顶部和底部的黑色粗矩形放置。

至于新的 iPad 分辨率，Flash 并不足以支持该分辨率，即使在发布设置中将分辨率设置为高，它也会导出为 1024x768 的标准 iPad 分辨率。

因此，根据您喜欢的设备选择舞台分辨率，如果您希望应用程序在 iPad 的格式上看起来最好，请选择 1024x768，但 iPhone 在横向模式下将在侧面有额外的空间。我之前解释的 iPhone 分辨率也是如此。虽然，如果您想完全支持这两种方法，您可以尝试许多方法，用于根据 Flash 中的 Capabilities.screenResolutionX 和 Capabilities.ScreenResolutionY 方法在浩瀚的 Android 屏幕上定位 GUI 元素。

# php - 如何清除DIV并在while循环中添加新内容

> ID：11053282
> 
> 赞同：1
> 
> 时间：2012-06-15T15:03:26.427
> 
> 标签：php, javascript, jquery, html

我需要`<div>`在php中的每个while循环之后清除并插入从数据库中获取的新内容。有人可以帮我解决这个问题吗？我还需要在循环中睡大约 10 秒。

我在 while 循环中使用 PHP。

一般流程是这样的——

```
while() {
  read from database;
  sleep;
  clear div;      ///I nead help here;
  Add content to div ///I need help here
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:05:56.257

清除 -`$("div").empty();`

填写 -`$("div").html(your_ajax_response);`

# c++ - 为从 std::vector 派生的类正确重载双等号

> ID：11053284
> 
> 赞同：0
> 
> 时间：2012-06-15T15:03:37.883
> 
> 标签：c++, boost, boost-python

我有一堂课

```
class Item {
    int _one;
    int _two;
    int _three;
    // other stuff
};

class ItemList : public std::vector<Item> {
    // deriving from std vector because the ctor needs to
    // perform some work in discriminating what gets added
    // to the list
}; 
```

我已经阅读了许多反对从 std::vector<> 派生的论点，我想我会没事的，因为这个类不是派生自。我在 python 中公开这个，使用 boost 矢量索引套件，作为 python 列表。因为我需要构造函数在构造过程中从列表中删除某些元素，所以我决定走这条路，而不是做我在项目其他地方所做的事情：

```
class AnotherItem {
    // class definition
};
typedef std::vector<AnotherItem> AnotherItemList 
```

然后使用 typedef 使用 boost 矢量索引套件公开列表。一切似乎都很好，除了我有这个错误：错误2错误C2678：二进制'=='：没有找到采用'Item'类型的左手操作数的运算符（或者没有可接受的转换）

该错误不是来自 boost 库，而是来自 std 算法代码中的某些内容。我尝试添加自己的类重载 == 运算符，但这并没有解决问题。它看起来像这样：

```
class Item {
    // earlier stuff
    bool operator==(Item& rhs) {
        return (_one == rhs._one && _two == rhs._two && _three == rhs._three);
    }
    bool operator!=(Item& rhs) {
        return !(*this == rhs);
    }
}; 
```

这并没有解决问题。我错过了什么？[此处](http://en.cppreference.com/w/cpp/container/vector)的此链接显示向量的 == 运算符不是成员函数。我尝试在“全局”级别重载（即不在命名空间内），但这也无济于事。那么，我错过了什么？

谢谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:26:27.987

== 的正确重载是

```
class Item
{
    ...
    bool operator==(const Item& rhs) const
    { .... }

    bool operator!=(const Item& rhs) const
    { return !(*this==rhs); }
}; 
```

另外，请注意，因为`std::vector`没有虚拟成员，所以您的派生`ItelmList`不能对`std::vector`自身进行多态使用，特别是不要对 std::vector* 调用 delete。

我必须这样说，否则我和你将注定被 C++ 社区所毁灭，尽管在 30 多年的编程经验中，我从未*见过* ***std*** ::vector* 或 std::string*。（因此我真的不知道派生 std 类的所有“恐惧”是关于：只需知道你在做什么并让其他人知道）

# reporting-services - SSRS 2005 - 发送旧报告版本的电子邮件订阅

> ID：11053287
> 
> 赞同：0
> 
> 时间：2012-06-15T15:03:56.900
> 
> 标签：reporting-services, reportingservices-2005

我在使用 Sql Server 2005 Reporting Server 时遇到问题，只要通过订阅发送报告，人们就会收到旧版本的报告。

我在报告的页脚添加了一个日期，构建并部署了它，但订阅者仍会收到较旧的报告。

我找不到任何已知问题或有类似问题的人，并且可以使用一些指导来做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:59:28.177

检查`Properties`-> `Execution`。有一些选项可以根据缓存副本或快照运行报告。如果选择了这些选项，报告将从旧数据运行以提高性能。禁用这些以获取最新数据。

# android - Mono For Android 教程：网格视图如何遍历每个缩略图

> ID：11053291
> 
> 赞同：0
> 
> 时间：2012-06-15T15:04:18.487
> 
> 标签：android, mono

我正在阅读本教程： [http ://docs.xamarin.com/android/tutorials/User_Interface/grid_view](http://docs.xamarin.com/android/tutorials/User_Interface/grid_view)

我是一位经验丰富的程序员，但对 Android 较新，所以这可能是问题所在。

我了解正在发生的事情，但我看不到/不了解如何为 thumbs[] 中的每个单独资源调用 ImageAdapter 中的 GetView()。

我调试并逐步完成了代码，但仍然看不到它是什么/如何调用 GetView() 函数来为每个拇指生成一个视图，以及它如何增加调用 GetView() 的计数/位置计数器。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:56:32.747

Android 中的 GridView/ListView/ExpandableListView/Gallery 类提供了重要的优化，允许您显示长列表或内容网格，而无需同时绘制整个列表。

这些 AdapterView 类有一个底层适配器，它为 AdapterView 提供任何给定单元格的视图。因此，即使 ListView 可能包含 100 个项目，如果一次只有 6 个项目在视图中可见，那么 AdapterView 可能只会绘制约 8 个项目。

当用户滚动到 AdapterView 中该项目的位置时，AdapterView 将调用 Adapter 中的 getView() 方法。计数不应增加，除非您打算在 AdapterView 中可见的“单元格”数量正在增加。

通常，在您的 getView() 实现中，如果可能，您将希望回收现有视图，并且仅使用模型中的数据更新文本/图像。

# ruby-on-rails - Rails 自定义路由无法调用视图

> ID：11053293
> 
> 赞同：1
> 
> 时间：2012-06-15T15:04:23.830
> 
> 标签：ruby-on-rails, routes

我正在尝试在 Rails 中实现自定义路线

```
match '/:slug' => "products#get_by_slug", :as => :get_by_slug 
```

如果我没有相应的视图 (get_by_slug.html.erb)，我会收到一个模板丢失错误如果我添加该视图，我会收到一个路由错误：

```
No route matches {:controller=>"products"} 
```

如何让我的自定义路由调用相应的视图？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:45:50.693

您可能在 get_by_slug.html.erb 模板中有错误。如果您将文件设为空，它会产生错误吗？

# sql-server-2008 - 在优化 SQL Server 查询方面需要帮助

> ID：11053295
> 
> 赞同：-1
> 
> 时间：2012-06-15T15:04:35.180
> 
> 标签：sql-server-2008, indexing, query-optimization

我需要帮助优化我的一些 SQL 查询。我的 SQL 性能不好。我有一个 SQL Server 2008 RS Express，但我不能使用 DTA。

可能可以帮助我优化和手动为这两个查询创建索引：

```
SELECT tblBlogs.RecordID, tblBlogs.RecordText, tblBlogs.CDate, tblBlogs.UserID, tblBlogs.Comments, tblUsers.Username, tblUserpics.UserpicName 
FROM  ( 
      SELECT tblBlogs_2.RecordID, tblBlogs_2.RecordText, tblBlogs_2.CDate, tblBlogs_2.UserID, COUNT(dbo.tblBlogComments.CommentID) AS Comments 
      FROM ( 
      SELECT TOP (150) RecordID, RecordText, CDate, UserID 
           FROM dbo.tblBlogs AS tblBlogs_1 
           ORDER BY RecordID DESC 
           ) AS tblBlogs_2 
      LEFT OUTER JOIN dbo.tblBlogComments ON tblBlogs_2.RecordID = tblBlogComments.RecordID
      GROUP BY tblBlogs_2.RecordID, tblBlogs_2.RecordText, tblBlogs_2.CDate, tblBlogs_2.UserID 
     ) AS tblBlogs  
INNER JOIN dbo.tblUsers ON tblBlogs.UserID = tblUsers.UserID  
LEFT OUTER JOIN dbo.tblUserpics ON tblBlogs.UserID = tblUserpics.UserID
ORDER BY tblBlogs.CDate DESC 
```

这必须从每个博客条目的用户详细信息 + 评论的博客表中选择前 150 个 ros。

```
SELECT f.ForumID, f.ForumName, t.ThreadName, m.MsgID, m.MsgName, m.MsgBody, m.UserID,   m.CDate, m.IP, u.Username, tblCities.CityName, 
t.IsClosed, ISNULL(u.Msgs, 0) AS Posts, ISNULL(tblUserpics.UserpicName, '') AS UserpicName, t.IsPoll,  
t.IsPollMultiple, ISNULL(u.Crashes, 0) AS Crashes, 0 AS LastMsgID, m.IsFlood, ISNULL(u.RepaGood, 0) AS RepaGood, ISNULL(u.RepaBad, 0)  
AS RepaBad, ISNULL(dbo.vMsgsRepaGood.RepaGood, 0) AS MsgRepaGood, ISNULL(dbo.vMsgsRepaBad.RepaBad, 0) AS MsgRepaBad, t.ThreadID, 
tblUserPrivateStatuses.StatusName AS PrivateStatus 
FROM tblMsgs AS m  
INNER JOIN tblThreads AS t ON m.ThreadID = t.ThreadID 
INNER JOIN tblForums AS f ON t.ForumID = f.ForumID  
INNER JOIN tblUsers AS u ON m.UserID = u.UserID  
LEFT OUTER JOIN tblUserPrivateStatuses ON u.UserID = dbo.tblUserPrivateStatuses.UserID  
LEFT OUTER JOIN tblCities ON u.CityID = dbo.tblCities.CityID  
LEFT OUTER JOIN tblUserpics ON u.UserID = dbo.tblUserpics.UserID  
LEFT OUTER JOIN vMsgsRepaGood ON m.MsgID = vMsgsRepaGood.MsgID  
LEFT OUTER JOIN vMsgsRepaBad ON m.MsgID = vMsgsRepaBad.MsgID  
WHERE m.ThreadID = "& ThreadID & " AND IsFlood = 0 
GROUP BY f.ForumID, f.ForumName, t.ThreadName, m.MsgID, m.MsgName, m.MsgBody, m.UserID, m.CDate, m.IP, u.Username, tblCities.CityName, t.IsClosed, u.Msgs, dbo.tblUserpics.UserpicName, t.IsPoll, t.IsPollMultiple, u.Crashes, m.IsFlood, u.RepaGood, u.RepaBad, vMsgsRepaGood.RepaGood, vMsgsRepaBad.RepaBad, t.ThreadID, tblUserPrivateStatuses.StatusName 
ORDER BY m.CDate</pre> 
```

此查询从特定论坛的特定线程中选择所有未泛滥的消息，其中包含用户详细信息（注册日期、良好/不良声誉的数量、崩溃的数量、整个论坛上的帖子数量、城市、用户图片）。

或者也许有人可以告诉我用于优化查询和创建索引的免费工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:21:13.250

这里有很多要讨论的内容，如果没有更多信息，任何人都无法完全帮助您的查询。

预防措施：如果您的系统有 DBA，请在索引任何内容之前与他们核实，尤其是在实时系统上。如果你对他们好，他们甚至可以提供帮助。如果系统被许多其他人使用，在更改索引等任何内容之前要小心。

如果您不想深入研究问题，索引的基本技巧是：按以下顺序索引：

1.  连接谓词
2.  筛选
3.  排序方式/分组方式/等。

还：

*   确保任何可能的列都是非空的。
*   使用有意义的数据类型 - 如果它是整数或日期，则不将任何内容存储为 varchar。（列宽很重要。尽可能使用最小的数据类型。）
*   确保您的联接是相同的数据类型 - int 到 int，varchar 到 varchar，等等。
*   如果可能，请在每个表中的每个连接谓词上使用唯一的非空索引。

做这一切，你就会一路走好。但是，如果您经常需要这些东西，请学习它！那里有很多，而且这是一个很深的话题，但是如果您知道自己在做什么，就可以更好地进行查询。

编辑：建立索引的语法在这里：[如何索引数据库列](https://stackoverflow.com/questions/1156/how-do-i-index-a-database-column)。How/Why is here：[数据库索引如何工作？](https://stackoverflow.com/questions/1108/how-does-database-indexing-work)

# java - 保存为数组列表元素的哈希表在分配给数组元素后清除哈希表时丢失值

> ID：11053298
> 
> 赞同：0
> 
> 时间：2012-06-15T15:04:42.777
> 
> 标签：java, arraylist, hashtable

请告知..在以下代码中（经过测试。可以正常工作）

```
public class Exp_Test { 
     public static void main (String[] args) {
        ArrayList<Hashtable> objArrlistHshTbl = new ArrayList<Hashtable>();

        Hashtable objHashTable = new Hashtable();

        objHashTable.put("Key1", "Value1");
        objHashTable.put("Key2", "Value2");

        objArrlistHshTbl.add(objHashTable);

        objHashTable.clear();

        objHashTable.put("Key3", "Value3");
        objHashTable.put("Key4", "Value4");

        objArrlistHshTbl.add(objHashTable);
        System.out.println("Hi");//put a breakpoint here to check the values
    }
} 
```

我期待看到一个带有哈希表的数组列表保存为数组元素，第一个带有键“Key1”和“Key2”，第二个带有键“Key3”和“Key4”。我得到一个包含两个哈希表的数组列表，但是哈希表中的值和键对于这两个表都是“Key3”和“key4”。有人可以解释一下。如果这是一个参考问题，如何在不创建多个哈希表的情况下将两个哈希表放入不同的数组元素中（我必须在 for 循环中运行代码以添加多个哈希表。每次创建单独的哈希表并不好听好的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:07:51.830

这条线是一个很大的诺诺

```
objHashTable.clear(); 
```

你必须明白，`objHashTable`在你的情况下是指向一个对象。当您将其添加到数组时，该数组只会创建指向同一对象的指针。因此，当您对这些指针中的任何一个调用 clear 时，它会清除对象。这是编程中的一个基本概念。您需要创建一个`new Hashtable()`并将其添加为第二个元素。

此外，微软和大多数现代编程世界都建议您远离匈牙利命名约定。查看有关该主题的一些讨论：[C# 中的匈牙利表示法](https://stackoverflow.com/questions/768255/hungarian-notation-in-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:06:24.040

`ArrayList`通过引用存储对象。当你`clear` `objHashTable`,`objArrlistHshTbl.get(0)`被清除。

您需要为每个索引创建一个**新** `HashTable`索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:11:35.850

解决了

```
public static void main (String[] args) {
    ArrayList<Hashtable> objArrlistHshTbl = new ArrayList<Hashtable>();
    for(int i= 1; i< 3; i++){
              if(i == 1){
              Hashtable objHashTable = new Hashtable();
    objHashTable.put("Key" + i, "Value1");
    objHashTable.put("Key" + i+1, "Value2");
              objArrlistHshTbl.add(objHashTable);
              }else{
                  Hashtable objHashTable = new Hashtable();
                  objHashTable.put("Key" + i, "Value3");
        objHashTable.put("Key" + i+1, "Value4");
                  objArrlistHshTbl.add(objHashTable);
              }

    }

    }
} 
```

# mysql - 通过 Worker Role 在 Windows Azure 上安装 mysql

> ID：11053300
> 
> 赞同：0
> 
> 时间：2012-06-15T15:04:55.550
> 
> 标签：mysql, azure, azure-worker-roles

我在 ServiceDefinition 文件中使用以下 WorkerRole 元素创建了一个工作角色。我已将整个 C:\Program Files (x86)\MySQL\MySQL Server 5.5 文件夹复制到工作角色文件夹下的一个文件夹中，当我运行 cspack 和 csrun 时，它的名称是 mysql 它启动模拟器但它启动和停止角色，它有时不起作用，但它说 odbs@localhost 拒绝访问。感谢您的帮助

```
<WorkerRole enableNativeCodeExecution="true" name="MyPhpProj_MyWorkerRole" vmsize="Small">
<LocalStorage name="E2EStorage" cleanOnRoleRecycle="false" />
<Endpoints>
  <InternalEndpoint name="PeerEndpointIn" protocol="tcp" />
  <InternalEndpoint name="MasterElectionService" protocol="tcp" />
  <InternalEndpoint name="MySQL" protocol="tcp" />
  <InternalEndpoint name="InstanceManagerEndpontIn" protocol="tcp" />
</Endpoints>
<Runtime executionContext="limited">
  <EntryPoint>
    <ProgramEntryPoint commandLine="./mysql/bin/mysql.exe" setReadyOnProcessStart="true" />
  </EntryPoint>
</Runtime>
<Imports/>
<LocalResources>
  <LocalStorage cleanOnRoleRecycle="false" name="MySQL" sizeInMB="260"/>
  <LocalStorage cleanOnRoleRecycle="false" name="MySQLDatastore" sizeInMB="20"/>
</LocalResources>
<ConfigurationSettings>
  <Setting name="InitFile"/>
  <Setting name="LogLevel"/>
  <Setting name="ScheduledTransferPeriodInSeconds"/>
  <Setting name="WindowsAzureStorageConnectionString"/>
</ConfigurationSettings>
</WorkerRole> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:15:54.200

如果您的问题是随机的，就像有时工作一样，而在其他时候不起作用，我真的不知道发生了什么，因为它不应该发生。如果存在一些配置或访问问题，问题将始终相同。

当我以工作角色运行 MySQL 时，我有一个批处理脚本，在其中我添加了一个具有管理员权限的新用户，并在该用户权限访问下启动了 MySql，所以

我会使用**Elevated** 和 ProgramEntryPoint，如下所示：

```
 <Runtime executionContext="elevated">
  <EntryPoint>
    <ProgramEntryPoint commandLine="./mysql/bin/mysql.exe" setReadyOnProcessStart="true" />
  </EntryPoint>
 </Runtime> 
```

# .net - 将表格添加到内容控件

> ID：11053301
> 
> 赞同：1
> 
> 时间：2012-06-15T15:04:57.893
> 
> 标签：.net, ms-word, openxml

[本教程](http://msdn.microsoft.com/en-us/library/cc197932%28v=office.12%29.aspx)建议在内容控件中嵌套表格，但每次我尝试这样做时都会收到一条错误消息，提示“Word 无法关闭设计模式，因为内容控件中的占位符文本包含无效项目”。我已经尝试过富文本和纯文本内容控件。办公版本是2012。

**如何将表格添加到内容控件？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:01:16.823

如果关闭设计模式，它可以工作。但是我仍然不满意，因为 Word 会在每个表格后自动添加一个空段落。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-01T04:11:16.843

根据我自己的实验，并阅读 VBA 文档。对于内容控件的开头和结尾可以出现在文档中的位置，只有一组有限的受支持用例。有一个相关的常数，[`control.Level`](https://docs.microsoft.com/en-us/office/vba/api/word.wdcontentcontrollevel)所以你可以把它们区分开来。

*   `wdContentControlLevelInline`- 在单个段落内内联。

*   `wdContentControlLevelParagraph`- 一些完整的段落。

*   `wdContentControlLevelRow`- 链接到表格的一行。

*   `wdContentControlLevelCell`- 单个表格单元格。

似乎有第 5 个选项。如果您先创建一个表，然后选择它并添加控件。没有插入额外的空行。但是，如果您删除表，控件也将被删除。如果你用VBA检查表格和控件的`Range.Start`& `Range.End`，你会看到表格封装了Paragraph控件。

在不创建额外段落的情况下，似乎无法将 Excel 表格粘贴到现有内容控件中。

如果您确实将表格插入到现有控件中，它将首先转换为`LevelParagraph`. 带有前导和尾随空行。虽然您可以删除开头的段落，但 word 不允许您删除结尾的段落。

但是，您可以选择它并将字体效果更改为“隐藏”。至少那时它不会被打印出来。

或者您必须删除内容控件和表格，然后重新创建它们。

# sql - 编写一个查询，它将提取各个字段上的请求数。

> ID：11053306
> 
> 赞同：-3
> 
> 时间：2012-06-15T15:05:04.060
> 
> 标签：sql, sql-server

![源表](../Images/4c8277d480d1b5bada75600a50bc0762.png)

> 我想写一个查询，它会给出两列：
> 
> 1> 查询类型 2> 计数
> 
> 此结果集应具有以下结构

![在此处输入图像描述](../Images/a72b5edd75dec57f34285b01ddc6d722.png)

> 这里应该预定义第一列的值，并且必须计算计数。我想检查源表的请求列并找到特定的模式。如果找到该模式，则增加计数。
> 
> 例如 ：
> 
> 如果在请求列中找到单词“greenhopper”，则属于类型 GREENHOPPER 。
> 
> 或者
> 
> 如果找到一个单词“gadgets”，它是 DASHBOARD 类型。等等 ...
> 
> 所以想通过日志表来分析一下各个类别的使用情况。
> 
> 因此，最后我可以得到使用量，然后我可以用它构建一个饼图。 ![在此处输入图像描述](../Images/c330c5d8ae4b4d7dfc3377ef13122f05.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:12:45.273

```
SELECT 'Greenhopper' AS TypeOfQuery, COUNT(*) AS Cnt
FROM YourTable
WHERE Request LIKE '%Greenhopper%'
UNION ALL
SELECT 'Dashboard', COUNT(*)
FROM YourTable
WHERE Request LIKE '%gadgets%'
-- And so forth 
```

你说它们是预定义的对吗？因此，您将有大约 10 种不同`UNION`的陈述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:34:43.297

```
WITH Requests AS
(
SELECT
CASE
WHEN Request LIKE '%Greenhopper%' THEN 'GreenHopper'
WHEN Request LIKE '%gadgets%' THEN 'Gadgets'
-- and so on
ELSE 'Misc'
END RequestType
FROM YourTable
)
SELECT
RequestType,
COUNT(*) RequesCount
FROM Requests
GROUP BY RequestType
; 
```

没有要测试的数据，但我相信这种方法会表现得更好，因为扫描表的次数会更少。由于 LIKE 和第一个通配符，性能永远不会理想。这将防止搜索。

进一步解释为什么 LIKE 不在[这里执行](https://stackoverflow.com/questions/6142235/sql-like-vs-performance)

刚刚重新查看了这个问题，您可以通过更改搜索字符串来进一步提高性能，使其右侧只有一个通配符

例如 LIKE 'GET /rest/gadget%' 等等。

# html - 知道 textarea 中使用的字体吗？

> ID：11053314
> 
> 赞同：0
> 
> 时间：2012-06-15T15:05:21.517
> 
> 标签：html, css, textarea, styling

我有一个网页，有一个文本区域和一个文本。我需要在此网页中使用与 textarea 中使用的相同的字体和字体大小写一条消息（文本）。

如何知道文本区域中使用的字体名称和字体大小？

对于那些想知道为什么我需要这种字体和字体大小的人来说，这是因为任何字符的宽度和破折号 (-) 的宽度都是相同的。

谢谢 ！！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:08:22.237

实际上有一堆这样的字体（字体），称为[monospace](http://en.wikipedia.org/wiki/Monospaced_font)。顺便说一句，这是您`font-family:monospace`在 css 规则中指定时得到的。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:05:46.027

您可以通过某些特定设置检查特定浏览器使用的字体，但作为作者，您无法知道每个用户的浏览器将使用哪些字体。

要使用与浏览器默认设置的 textarea 元素中使用的字体相同的字体编写消息，您可以为其使用 textarea 元素并适当地设置其其他属性（例如，使用 HTML 属性使其只读并使用`white-space: normal`CSS使行正常流动）。

但似乎你真正想要的是等宽字体。在 HTML 中，您可以只使用它。在 CSS 中，您可以按偏好顺序设置字体列表，例如

```
tt { font-family: Consolas, Courier New, monospace; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:07:56.720

使用任何 HTML 检查工具，例如 firebug（firefox 插件）来了解您的 textarea 中使用的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:09:14.010

使用诸如 firebug（firefox 插件）、IE 开发工具或 Chrome 开发工具之类的工具来找出使用的字体。谷歌“使用萤火虫”你会得到大量关于如何使用它的教程。希望这有帮助

# module - Yii框架，在另一个模块中使用一个模块

> ID：11053315
> 
> 赞同：1
> 
> 时间：2012-06-15T15:05:25.417
> 
> 标签：module, yii

如何在另一个模块中调用一个模块？此代码适用于受保护/控制器中的控制器：

```
$image = Yii::app()->image->save($photofile, 'some_name','uploadedGal'); 
```

但是在我的另一个模块（`admin`）的控制器中，我收到了这个错误。

```
Property "CWebApplication.image" is not defined. 
```

我`image`在主配置文件中定义了模块：

```
'modules'=>array(
           'image'=>array(
                    'createOnDemand'=>true, // requires apache mod_rewrite enabled
                    'install'=>true, // allows you to run the installer
            ),
            'admin',

), 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T16:08:16.477

您需要在模块类中包含其他模块组件。像这样的东西：

```
class AdminModule extends CWebModule
{
    public function init()
    {
        $this->setImport(array(
            'admin.models.*',
            'admin.components.*',
            'image.models.*',
            'image.components.*',
        ));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T07:22:23.797

您可以在 config/main.php 中导入模块组件，如下所示：

```
'import'=>array(
    'application.models.*',
    'application.components.*',
    'application.modules.admin.models.*',
        'application.modules.admin.components.*',
            ....
            ....
), 
```

这样所有模型等都将为您导入。

# python - 如何从文件中读取浮点数？

> ID：11053318
> 
> 赞同：5
> 
> 时间：2012-06-15T15:05:40.693
> 
> 标签：python, string, file, floating-point

python - 当文件为字符串格式时，如何打开文件并从文件中读取浮点数？我还想更改每个浮点数的值并用新值重写文件。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T15:09:47.550

假设每行有一个浮点数：

```
with open("myfile") as f:
    floats = map(float, f)

# change floats

with open("myfile", "w") as f:
    f.write("\n".join(map(str, floats))) 
```

如果您想对格式进行更多控制，请使用字符串的[`format`方法](http://docs.python.org/library/string.html#formatstrings)。例如，这只会在每个句点后打印 3 位数字：

```
 f.write("\n".join(map("{0:.3f}".format, floats))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T15:07:32.417

“float()”函数接受字符串作为输入并将它们转换为浮点数。

```
>>> float("123.456")
123.456 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T15:09:06.930

```
def get_numbers():
    with open("yourfile.txt") as input_file:
        for line in input_file:
            line = line.strip()
            for number in line.split():
                yield float(number) 
```

然后在你完成后把它们写回来

并作为一个较短的版本（未经测试，从头开始编写）

```
with open("yourfile.txt") as input_file:
    numbers = (float(number) for number in (line for line in (line.split() for line in input_file))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-19T13:26:43.700

如果你想阅读 input_num 浮点数：

```
import numpy as np
import struct
float_size=4
np.array(struct.unpack('<'+str(input_num)+'f',
                    fin.read(float_size*input_num))) 
```

# javascript - 访问数据结构中的元素

> ID：11053323
> 
> 赞同：1
> 
> 时间：2012-06-15T15:05:57.123
> 
> 标签：javascript, ajax, arrays

我已经进行了很好的搜索并且很难过。这可能是一个简单的答案，但是在本周到目前为止工作了 80 个小时之后，我就是看不到它......

在我的应用程序中，我将一些变量传递给 Web 服务，该服务传递回包含键/值对的单个结构。

```
$.ajax({
    type: "POST",
    url: "it_submitcall.php",
    data: {callService: "getcall", callid: $("#callNumber").val()},
    dataType: "HTML",
    success: function(data){
        //do stuff here
    },
    error: function(data){
        // unable to communicate with web service stuff here
    }
}); 
```

我得到的回应是

```
Array
(
    [CALLID] => 44497
    [CALLERNAME] => Chris
    [TEAMID] => 1175
) 
```

如何在 javascript 中访问上述元素？任何指针将不胜感激......

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:16:41.910

在 PHP 端使用[json_encode](http://www.php.net/manual/en/function.json-encode.php)将数组转换为 JSON，例如：

```
<?php
    $arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
    echo json_encode($arr);
?> 
```

然后在 JavaScript 端使用[JSON.parse()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)来获取一个 JavaScript 对象 - 在你的情况下：

```
success: function(data){
    var obj = JSON.parse(data);
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:23:00.340

正如@phenomnomnominal 所指出的，您可以`json_encode()`在 PHP 对象上使用将其转换为 JSON（尤其是`json_decode()`将其从 JSON 转换为 PHP 对象）

一旦你明白了这一点，很好地，PHP 和 JS 类“散列”对象的行为非常相似（在 PHP 中，我们称这些关联数组，在 JavaScript 中，称为对象字面量）。

在 php 中，您可以像这样访问一个数组`$your_var`：

```
$value = $your_var[ 'key' ]; 
```

您还可以使用变量：

```
$key = 'key';
$value = $your_var[ $key ]; 
```

在 JavaScript 中，它非常相似：

```
var value = your_var[ 'key' ]; 
```

或者：

```
var key = 'key';
var value = your_var[ key ]; 
```

当您不需要对键进行变量访问时，还有另一种有用且更有效的语法：

```
var value = your_var.key 
```

# python - 我们的sql插入数据非常慢

> ID：11053324
> 
> 赞同：2
> 
> 时间：2012-06-15T15:05:58.587
> 
> 标签：python, mysql, database, oursql

我正在尝试将 python 脚本生成的一些数据存储在 MySQL 数据库中。本质上我正在使用以下命令：

```
con = oursql.connect(user="user", host="host", passwd="passwd", 
                     db="testdb")
c = con.cursor()                             

c.executemany(insertsimoutput, zippedsimoutput)

con.commit()
c.close() 
```

在哪里，

```
insertsimoutput = '''insert into simoutput 
                        (repnum, 
                         timepd, 
                         ...) values (?, ?, ...?)''' 
```

插入了大约 30,000 行，大约有 15 列。以上大约需要7分钟。如果我使用 MySQLdb 而不是 oursql，大约需要 2 秒。为什么会有这么大的差异？这应该在oursql中以其他方式完成吗，我们的oursql只是很慢？如果有更好的方法用我们的sql插入这些数据，如果你能告诉我，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-19T22:07:39.293

不同之处在于 MySQLdb 对您的查询进行了一些黑客攻击，而我们的 SQL 则没有......

采取这个：

```
cursor.executemany("INSERT INTO sometable VALUES (%s, %s, %s)",
    [[1,2,3],[4,5,6],[7,8,9]]) 
```

MySQLdb 在运行之前将其翻译成这样：

```
cursor.execute("INSERT INTO sometable VALUES (1,2,3),(4,5,6),(7,8,9)") 
```

但如果你这样做：

```
cursor.executemany("INSERT INTO sometable VALUES (?, ?, ?)",
    [[1,2,3],[4,5,6],[7,8,9]]) 
```

在我们的sql中，它被翻译成类似这样的伪代码：

```
stmt = prepare("INSERT INTO sometable VALUES (?, ?, ?)")
for params in [[1,2,3],[4,5,6],[7,8,9]]:
    stmt.execute(*params) 
```

因此，如果您想模拟 mysqldb 正在做什么，但要从准备好的语句和 oursql 的其他优点中受益，您需要这样做：

```
from itertools import chain
data = [[1,2,3],[4,5,6],[7,8,9]]
one_val = "({})".format(','.join("?" for i in data[0]))
vals_clause = ','.join(one_val for i in data)
cursor.execute("INSERT INTO sometable VALUES {}".format(vals_clause),
    chain.from_iterable(data)) 
```

我敢打赌，当你这样做时，oursql 会更快 :-)

另外，如果您认为它丑陋，那您是对的。但是请记住 MySQL db 在内部做了一些更丑陋的事情 - 它使用正则表达式来解析您的 INSERT 语句并中断参数化部分，然后执行我建议您为 oursql 做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T05:50:32.100

我会说检查是否`oursql`支持`bulk insert`sql 命令以提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T18:03:37.830

Oursql 确实支持`bulk insert`语句。我已经使用 sqlalchemy 包装器编写了这样做的代码。

对于纯oursql，这样的事情应该没问题：

```
with open('tmp.csv', 'wb') as tmp:
    for item in zippedsimoutput:
        tmp.write("{0}\n".format(item))
c.execute("""LOAD DATA LOCAL INFILE 'tmp.csv' INTO TABLE flags FIELDS TERMINATED BY ',' ENCLOSED BY '"'  LINES TERMINATED BY '\r\n' ;""") 
```

请注意，行的顺序必须与数据库中的列的顺序相同。

# postgresql - Postgresql pgagent 从另一个作业运行作业

> ID：11053325
> 
> 赞同：0
> 
> 时间：2012-06-15T15:06:04.983
> 
> 标签：postgresql, sql-job, pgagent

我在 pgagent 中有 4 个作业，我想从一个主作业按特定顺序执行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:04:58.780

如果我是对的，它们会按字母顺序运行。这是[Steps](http://www.pgadmin.org/docs/1.14/pgagent-steps.html)的情况。

# php - 本机应用程序在 iOS 中模拟但在 Android 中不模拟 - 是 JS 吗？

> ID：11053328
> 
> 赞同：0
> 
> 时间：2012-06-15T15:06:11.337
> 
> 标签：php, javascript, android-emulator, jqmobi

我正在尝试使用 phonegap 和 jqm 制作本机应用程序。当我在 DW 中测试我的应用程序并使用 xcode 模拟它时，一切似乎都运行良好。当我尝试模拟适用于 Android 的应用程序时，就会出现问题。

静态 HTML 元素可以很好地呈现，但动态元素不会在 Android 中呈现。这是我尝试使用 javascript 呈现的 HTML：

```
// JavaScript Document
//var serviceURL ="http://localhost/UnitedTrackClub/";
$(document).ready(function(e) {

var schedule;

$('#scheduleListPage').bind('pageinit', function(event) {
getScheduleList();
});

function getScheduleList() {
$.getJSON(serviceURL + 'get_schedule_hdr.php', function(data) {
    $('#scheduleList li').remove();
    schedule = data.items;
    $.each(schedule, function(index, employee) {
        $('#scheduleList').append('<li><a href="scheduledetail.html?id=' + employee.Duration + '">' +
                '<h4>' + employee.Event_Date + ' ' + employee.Meet_Name + '</h4>' +'</a></li>');

    });
    $('#scheduleList').listview('refresh');

});
}
}); 
```

有没有人有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:43:50.997

在我看来，它在获取数据之前打印了 HTML，我发现本机 jQuery $.ajax() 比 JQMobi 中的 getJSON 效果更好，所以我想：

```
$.ajax({
    url      : serviceURL + 'get_schedule_hdr.php',
    dataType : 'jsonp',
    crossDomain: true,
    success  : function(data) {
    $('#scheduleList li').remove();
    schedule = data.items;
    $.each(schedule, function(index, employee) {
    $('#scheduleList').append('<li><a href="scheduledetail.html?id=' + employee.Duration + '">' +
            '<h4>' + employee.Event_Date + ' ' + employee.Meet_Name + '</h4>' +'</a></li>');

});
$('#scheduleList').listview('refresh');
    }

}); 
```

但我并没有真正检查你的代码

# android - 如何将字符串添加到 JsonArray

> ID：11053332
> 
> 赞同：7
> 
> 时间：2012-06-15T15:06:26.817
> 
> 标签：android, json

我正在尝试在 JsonArray 中添加字符串值，然后创建 Json String 以将其发送到服务器上。

我在谷歌上搜索，但找不到任何有用的东西。谁能告诉我怎么做？谢谢

```
 JSONArray list = new JSONArray();
 list.put("Hello");
 list.put("Hey"); 
```

之后我想创建 JSONString

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T15:26:40.930

简单的：

```
JSONArray list = new JSONArray();
list.put("Hello");
list.put("Hey");

String jsonString = list.toString() 
```

根据文档，它应该导致 "["Hello", "Hey"]"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:20:14.820

只需使用

`list.toString(2)`

这将为您提供 json 中的字符串

# ios - 是否可以将 UIScrollView 指示器从右侧移动到左侧？

> ID：11053336
> 
> 赞同：20
> 
> 时间：2012-06-15T15:06:48.773
> 
> 标签：ios, xcode, uiscrollview

我意识到我可以通过“倒置”显示滚动视图来旋转单元格并移动指示器，但这需要大量其他旋转，并处理信息以使表格正确滚动。

谢谢你的时间

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-10T03:23:03.717

实际上，可以通过更改`scrollIndicatorInsets`属性将指标限制在左侧的一个小区域：

```
tableView.scrollIndicatorInsets = UIEdgeInsetsMake(0,0,0,tableView.bounds.size.width-10); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T04:41:24.743

我喜欢 Jeremy Jay 的解决方案（虽然我还没有测试过），但只是为了彻底探索这个想法......这是另一个可能值得尝试的方法（虽然它也未经测试）：

使用两个滚动视图。

一个滚动视图（我们将其称为“真实”视图）包含您的内容，但隐藏了它的指示符。另一个滚动视图不包含任何内容，但其`contentSize`设置与“真实”滚动视图的设置相匹配。当“真实”滚动视图的`contentOffset`更改（通过委托消息观察到）时，更改“假”滚动视图的偏移量以匹配。（查看 WWDC 2012 的滚动视图会话，了解更多关于使用没有内容视图的滚动视图的想法。）

理论上（同样，我还没有测试过），您现在有了一个与原始滚动视图分开的滚动指示器视图，您可以将其放置在与原始滚动视图相关的任何位置。将它放在原件的顶部并移动/调整大小，使其在左侧占据一条窄条，并且您有一个左侧滚动指示器。（或者，将其叠加在原件之上并使用仿射变换将其水平翻转。）将其完全放在其他地方，让您的 UI 踏上疯狂的小镇之旅。（或者不要。）但是，如果它在顶部分层，请确保它忽略触摸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-14T20:32:34.860

实现这一点（如果您不使用行操作）而无需计算插入或弄乱其他表格视图的快速方法是跨 Y 轴（翻转）转换表格视图，然后将单元格转换回来你得到他们。

```
tableView.transform = CGAffineTransformMakeScale(1, -1); 
```

进而

```
cell.transform = CGAffineTransformMakeScale(1, -1); 
```

# javascript - javascript infovis 工具包：每个级别的个人级别距离

> ID：11053340
> 
> 赞同：0
> 
> 时间：2012-06-15T15:07:12.520
> 
> 标签：javascript, jstree, toolkit, infovis, space-tree

当我设置 node.data.$width 和 label.style.width 绘制的不相等边缘的树时，如何为 spacetree 中的每个级别设置单独的 levelDistance

如何为空间树中的每个节点级别设置 levelDistance。例如，我想更改节点级别 3 的“levelDistance”。谢谢

```
function init(){
//init data

  json = {
    id: "node0",
    name: "zvet",
    data: {},
    children: [{
        id: "node0rrrrrr1",
        name: "1.3",
        data: {$orn:'left'},
        children: [{
             id: "fvwerr1",
             name: "w33",
             data: {$orn:'left'},
        }]

    },
    {
        id: "node02",
        name: "qwe",
        data: {$orn:'left'}

    } ,{
        id: "node03",
        name: "bnm",
        data: {$orn:'left'}

    } ,{
        id: "node04",
        name: "1.3",
        data: {$orn:"right",kk:"kk"}

    },

    {
        id: "vwer",
        name: "vfsewrg",
        data: {$orn:"right",kk:"kk"}

    },
    {
        id: "vweq33e",
        name: "vvvserser",
        data: {$orn:"right",kk:"kk"},
        children: [{
             id: "r345345",
             name: "w33",
             data: {$orn:'right'}
        },
        {
             id: "u786786",
             name: "w33",
             data: {$orn:'right'}
        },
        {
             id: "p809456",
             name: "w33",
             data: {$orn:'right'},
             children: [{
                 id: "weqr232344",
                 name: "w33",
                data: {$orn:'right',kk:"kk"},
                 children: [{
                 id: "weqoooooppp",
                 name: "w33",
                data: {$orn:'right'}
             }]
             }]

        }
        ]

    }

     ]      
};
//end
//init Spacetree
//Create a new ST instance
st = new $jit.ST({
    //id of viz container element
    injectInto: 'infovis',
    Canvas:{
    type: '2D'}  ,
    background:true,
    //set duration for the animation
    duration: 800,
    //set animation transition type
    transition: $jit.Trans.Quart.easeInOut,
    //set distance between node and its children
   levelDistance: 100,
    levelsToShow:5,          
    multitree: true,
    //enable panning
    Navigation: {
      enable:true,
      panning:true
    },
    //set node and edge styles
    //set overridable=true for styling individual
    //nodes or edges
    Node: {
        height: 20,
        width: 150,
        type: 'rectangle',
        color:'transparent',            
        overridable: true,
        autoWidth:false ,
        CanvasStyles: {  
        fillStyle: 'transparent'                     
        }
    },              
     Edge: {  
     type: 'bezier',  
    overridable: true  
}, 

    onBeforeCompute: function(node){
        Log.write("loading " + node.name);
    },

    onAfterCompute: function(){
        Log.write("done");
    },

    //This method is called on DOM label creation.
    //Use this method to add event handlers and styles to
    //your node.
    onCreateLabel: function(label, node){
        label.id = node.id;            
        label.innerHTML = node.name;
        label.innerHTML='<div  style="position:relative;">'+node.name+'</div>';

        label.onclick = function(){
            if(normal.checked) {
                st.onClick(node.id);
                //st.setRoot(node.id, 'animate'); 
                st.selectedNodeId=node.id;
                $("#"+node.id+" div").animate({"bottom":"+=10px"},"slow");
             //st.addNodeInPath("1234");                                 

            } else {
            st.setRoot(node.id, 'animate');
            }
        };
        //set label styles
         var style = label.style;  
    style.width = 150 + 'px';  
    style.height = 17 + 'px';              
    style.cursor = 'pointer';  
    style.color = '#fff';  
    style.backgroundColor = '#6257DD';  
    style.borderradius='14px';
    style.boxshadow='0 0 16px #FFFFFF';
    style.fontSize = '0.8em';  
    style.textAlign= 'center';         
    style.paddingTop = '3px';  
        if(node.data.kk=="kk")
        {
            style.width = 60+ 'px';
        } 

    },
    onPlaceLabel: function(label, node) {  

}  ,

    //This method is called right before plotting
    //a node. It's useful for changing an individual node
    //style properties before plotting it.
    //The data properties prefixed with a dollar
    //sign will override the global node style properties.
    onBeforePlotNode: function(node){
            if(node.data.kk=="kk")
        {
            node.data.$width = 60;  
        } 
        //add some color to the nodes in the path between the
        //root node and the selected node.
        if (node.selected) {
            node.data.$color = "#000000";

            $("#"+node.id).css("background-color","red");
        }
        else {
            delete node.data.$color;

            $("#"+node.id).css("background-color","#6257DD");
            //if the node belongs to the last plotted level
            if(!node.anySubnode("exist")) {
                //count children number
                var count = 0;
                node.eachSubnode(function(n) { count++; });
                //assign a node color based on
                //how many children it has
                node.data.$color = ['#aaa', '#baa', '#caa', '#daa', '#eaa', '#faa'][count];                    
            }
        }
    },

    //This method is called right before plotting
    //an edge. It's useful for changing an individual edge
    //style properties before plotting it.
    //Edge data proprties prefixed with a dollar sign will
    //override the Edge global style properties.
    onBeforePlotLine: function(adj){

        if (adj.nodeFrom.selected && adj.nodeTo.selected) {
            adj.data.$color = "#eed";
            adj.data.$lineWidth = 3;
        }
        else {
            delete adj.data.$color;
            delete adj.data.$lineWidth;
        }
    }
});
//load json data

//end
//Add event handlers to switch spacetree orientation.
var top = $jit.id('r-top'), 
    left = $jit.id('r-left'), 
    bottom = $jit.id('r-bottom'), 
    right = $jit.id('r-right'),
    normal = $jit.id('s-normal');

function changeHandler() {
    if(this.checked) {
        top.disabled = bottom.disabled = right.disabled = left.disabled = true;
        st.switchPosition(this.value, "animate", {
            onComplete: function(){
                top.disabled = bottom.disabled = right.disabled = left.disabled = false;
            }
        });
    }
};

st.loadJSON(json);
//compute node positions and layout
st.compute();
//optional: make a translation of the tree
st.geom.translate(new $jit.Complex(-200, 0), "current");
//emulate a click on the root node.
st.onClick(st.root);
st.select(st.root);
top.onchange = left.onchange = bottom.onchange = right.onchange = changeHandler;
//end 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:23:55.123

不同级别不可能有不同的距离。

您可以做的是更改关卡的 node.data.$size，使其显示比其他叶子更小或更大。

将距离视为要放置的节点的分配空间。如果创建大小小于距离的节点，则会出现间隙，可以将其视为外部的“边界”（仅在视觉上）一部分。

# mysql - 需要帮助编写 MySQL 查询

> ID：11053341
> 
> 赞同：0
> 
> 时间：2012-06-15T15:07:15.200
> 
> 标签：mysql, database, search

我有一个包含客户信息、订单等的数据库。我需要运行一个查询来返回所有未下订单的客户。

相关表：登录和订单

相关列：login.loginID、login.loginFirstName、login.loginLastName、login.loginEmailAddress AND orders.OrderuserID

所以本质上 - 在psuedocode中：比较表登录，在orders.OrderUserID下的orders表中的匹配列loginID。如果不存在匹配项（如未下订单），则输出用户的名字、姓氏和电子邮件地址。

我一直在绞尽脑汁，但对语言有一些真正的问题。当谈到 SQL 时，我是一个大时代的 N00B。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:12:26.617

基本上它看起来像这样：

```
 SELECT l.login_id
        FROM login l
   LEFT JOIN orders o
          ON l.login_id = o.login_id
       WHERE o.login_id IS NULL 
```

关键是使用带有 WHERE ... IS NULL 条件的 LEFT JOIN。换句话说，您专门在表中查找`login`表中没有任何“扩展”信息的行`orders`。

这只是一般性描述，但我希望它对您构建特定于您的案例的大查询的过程有所帮助。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:09:17.597

```
select loginFirstName, loginLastName, loginEmailAddress 
from login
where loginID not in
    (select distinct OrderuserID from orders) 
```

您也可以使用左连接来做到这一点：

```
select loginFirstName, loginLastName, loginEmailAddress 
from login left join orders on loginID = OrderuserID 
where OrderuserID is null 
```

不确定哪个会执行得更快；试试看。第一个更容易理解，恕我直言。

编辑：“选择不同”的意思是“向我返回该字段的唯一值集”。因此，第一个 SQL 中的子查询返回确实有订单的用户集（他们的 ID）。如果用户有多个订单，DISTINCT 会确保她的 ID 只返回一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:11:53.463

这应该这样做：

```
select *
from login l
left join orders o on l.loginId = o.OrderuserID
where o.OrderuserID is null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:16:51.077

尝试：

```
select login.loginFirstName, login.loginLastName, login.loginEmailAddress  
FROM login 
LEFT OUTER JOIN orders ON login.loginID = orders.OrderuserID 
WHERE orders.OrderuserID IS NULL; 
```

或类似的东西。我怀疑新 SQL 用户的诀窍是 LEFT OUTER 连接。如果没有该说明符，如果第二个表中有匹配项，则连接只会返回第一个表中的行。这样您就可以全部获取它们（然后使用 IS NULL 短语过滤掉匹配项）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T15:17:17.073

虽然你应该先自己尝试，你可以先在谷歌上搜索:):)。
不管怎样，你可以这样使用它，

```
SELECT l.loginFirstName,l.loginLastName,
l.loginEmailAddress FROM login AS l LEFT JOIN orders as o 
ON l.loginID = o.OrderuserID where OrderuserID is NULL 
```

# drupal-7 - javascript自定义节点上的drupal 7文件字段格式化程序（设置jQuizMe）

> ID：11053343
> 
> 赞同：0
> 
> 时间：2012-06-15T15:07:22.033
> 
> 标签：drupal-7

我已经设置了一个具有自定义节点类型的模块（我在我真正喜欢使用的 javascript jQuizMe 之后调用了 jquizme）。我为我需要提供的 javascript 文件设置了两个字段以使其工作（在一般 jQuizMe-2.2.js 文件之后，您需要添加另外两个 javascript 文件 - 一个用于设置，一个用于测验内容）。

Drupal 将文件保存为 myjavascriptfile.js.txt - 我对它们进行了测试，它们仍然可以制作 jQuizMe 界面 - 好的。问题是，我想在节点页面上添加这些文件......每个节点的文件都不同。如何访问 drupal_add_js() 函数的文件，以便他们为相关节点加载文件？

我尝试设置自定义字段格式化程序，但我不知道如何自动访问给定节点的文件的 uri 以放入 drupal_add_js() 函数（我可以添加一个静态文件，它加载得很好......我使用 hook_node_view ( jquizme_node_view ) 做到了这一点。

所以我只需要一种访问文件信息的方法......它们如何链接到每个节点？我找不到连接。正如您可能注意到的那样，我是一个编写模块的新手，我可能不太了解与面向对象编程相关的内容，抱歉，还没有进步到那个水平），但我愿意接受任何答案。我确定我遗漏了重要信息，但这已经太长了。

我之前还设置了一个特殊页面，看看我是否可以让 jQuizMe 在 Drupal 中工作，这样它仍然在代码中。

我已经尝试了很多答案（过去六个小时左右......在这里说太多了），其中最新的是使用令牌，但这不起作用。这是我到目前为止所拥有的：

> function jquizme_node_view($node, $view_mode, $langcode) { switch ($node->type) { case 'jquizme': $items = field_get_items('node', $node, 'field_myfield', $node->language); drupal_add_css(drupal_get_path('module', 'jquizme') . '/jQuizMe.css', >array('scope' => 'header')); drupal_add_js(drupal_get_path('module', 'jquizme') . '/alert.js'); drupal_add_js(drupal_get_path('module', 'jquizme') . '/jQuizMe-2.2.js', >array('scope' => 'header')); //drupal_add_js($tokens['node']['jquizme_js1_field'], array('scope' => >'header')); //drupal_add_js($tokens['node']['jquizme_js2'], array(' 范围' => '标题')); 休息; } }

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:18:58.703

你能试试这个吗？

```
// Let me assume that the field names of your two file fields
// are jquizme_js1_field and jquizme_js2_field for convenience..
function jquizme_node_view($node, $view_mode, $language) {
  $items = field_get_items('node', $node, 'jquizme_js1_field');
  _jquizme_add_js_from_filefield($items);

  $items = field_get_items('node', $node, 'jquizme_js2_field');
  _jquizme_add_js_from_filefield($items);

}

// Given the values of a filefield attached to some entity,
// adds them as JS files to the page.
function _jquizme_add_js_from_filefield($items = array()) {
  foreach ($items as $item) {
    $fid = &$item['fid'];
    $file = file_load($fid);
    if (!$file) {
      continue; // Maybe the file got deleted..
    }
    $wrapper = file_stream_wrapper_get_instance_by_uri($file->uri);
    $path = $wrapper->realpath();
    // Ensure that the path exists and that it is a Javascript file..
    if (file_exists($path) && preg_match('\.js$', $path)) {
      drupal_add_js($path, array('type' => 'file'));
    }
  }
} 
```

# java - synchronized(this) 是否暗示当前线程对象获得了自己的锁？

> ID：11053344
> 
> 赞同：4
> 
> 时间：2012-06-15T15:07:23.400
> 
> 标签：java, multithreading

考虑以下代码 -

```
class MyThread extends Thread {
    private int x = 5;

    public void run() {
        synchronized (this) // <-- what does it mean?
        {
            for (int i = 0; i < x; i++) {
                System.out.println(i);
            }
            notify();
        }
    }
}

class Test {
    public static void main(String[] args) {
        MyThread m = new MyThread();
        m.start();

        synchronized (m) {
            try {
                m.wait();
            } catch (InterruptedException e) {

            }
        }
    }
} 
```

在上面的例子中，线程 m 是否获得了自己的锁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:08:33.863

当前线程获取`MyThread`类的关联实例上的锁。

正在锁定与中`synchronized(this)`相同的对象。`synchronized(m)``main()`

最后，

```
public void run() {
    synchronized (this) { 
```

完全等同于

```
public synchronized void run() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:08:43.437

是的，这正是它的意思。线程获取类（MyThread）实例的锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:11:12.770

您必须将其视为任何其他 java 对象。您输入的内容意味着其他线程无法访问此 java 对象（无论它是否是线程实例，因为它没有任何区别。

# openlayers - Openlayers 中使用 GEOJson 格式的独立特征选择

> ID：11053347
> 
> 赞同：0
> 
> 时间：2012-06-15T15:07:28.043
> 
> 标签：openlayers, geojson

我正在使用 OpenLayers 并加载几个运行良好的 GEOJson 文件。现在我希望能够选择 GEOJson 文件的各个组件。例如，当我激活悬停选择时，如果我有多个特征（几个多边形），则不会发生任何事情。

我将悬停选择器添加到此示例[http://openlayers.org/dev/examples/geojson.html](http://openlayers.org/dev/examples/geojson.html)

我实际上可以独立拖动元素，但我无法选择它们。我认为这是因为我使用的投影。任何想法如何解决它？

干杯!

```
function init(){

var options = {
    projection: new OpenLayers.Projection("EPSG:900913"),
    displayProjection: new OpenLayers.Projection("EPSG:4326"),
    units: "m",
    numZoomLevels: 18,
};

map = new OpenLayers.Map('map', options );
var mapnik = new OpenLayers.Layer.OSM({layers: 'basic'});           
map.addLayer(mapnik);

map.addControl(new OpenLayers.Control.MousePosition());

var lon = 12.18;
var lat = 53.81;
var lonLat = new OpenLayers.LonLat(lon,lat).transform(map.displayProjection,  map.projection);

var mapcent = new OpenLayers.LonLat(lon, lat).transform(map.displayProjection, map.projection);
zoom = 5.5;
map.setCenter(mapcent, zoom);
document.getElementById('noneToggle').checked = true;

var proj = new OpenLayers.Projection("EPSG:4326");

var file = [];
file[0] = "geojson/nuts3.geojson";

var style = [];

i=0;
while(i<file.length){
    style[i] = new OpenLayers.StyleMap({
        pointRadius: 2,
        strokeColor: 'red',
        strokeWidth: 1,
        strokeOpacity: 1,
        fillColor: 'red',
        fillOpacity: 0.2
    });

    var layer_name = "layer_" + i;
    vectorLayer[i] = new OpenLayers.Layer.Vector(layer_name,  {
        styleMap: style[i],
        projection: map.displayProjection,
        preFeatureInsert: function(feature){
        feature.geometry.transform(proj, map.getProjectionObject());
        },
    });
    map.addLayer(vectorLayer[i]);   

    var gjson = new OpenLayers.Format.GeoJSON();
    var featurecollection = ReadFile(file[i]);
    //Readfile is just a normal Request.POST function   
    vectorLayer[i].addFeatures(gjson.read(featurecollection));  
    i=i+1;
}

controls = {
    selecthover: new OpenLayers.Control.SelectFeature(vectorLayer[0],{
        hover: true,
        highlightOnly: true
    })
};

for(var key in controls) {
    map.addControl(controls[key]);
    controls[key].activate();

}

            var report = function(e) {
            OpenLayers.Console.log(e.type, e.feature.id);
        };

        var highlightCtrl = new OpenLayers.Control.SelectFeature(vectors, {
            hover: true,
            highlightOnly: true,
            renderIntent: "temporary",
            eventListeners: {
                beforefeaturehighlighted: report,
                featurehighlighted: report,
                featureunhighlighted: report
            }
        });

        map.addControl(highlightCtrl);
        map.addControl(selectCtrl);            
} 
```

geojson 文件看起来像

{“类型”：“FeatureCollection”，“特征”：[{“类型”：“特征”，“id”：0，“属性”：{}，“几何”：{“类型”：“多边形”，“ coordinates": [ [ [ 9.244170, 48.847009 ], [ 9.246171, 48.822260 ], [ 9.248220, 48.796910 ], [ 9.248433, 48.794277 ], [ 9.290007, 48.791633 ], [ 9.298732, 48.785304 ], [ 9.145165, 48.859655 ], [ 9.153553, 48.861241 ], [ 9.207493, 48.852769 ], [ 9.235667, 48.848344 ], [ 9.244170, 48.847009 ] ] } } , { "type": "Feature", "id": 1, "properties": {}, "geometry" : { "类型": "多边形", "坐标": [ [ [ 9.064848, 48.755577 ], [ 9.038994, 48.741317 ], [ 9.104720, 48.709080 ], [ 9.104721, 48.709079 ], [ 9.13574.66], [ 9.13565.6]156822, 48.652414 ], [ 9.162166, 48.646602 ], [ 9.174173, 48.633544 ], [ 9.064848, 48.755577 ] ] } } 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:56:30.047

好的，我解决了。

[https://gis.stackexchange.com/questions/25314/change-vector-projection-in-openlayers](https://gis.stackexchange.com/questions/25314/change-vector-projection-in-openlayers)

按照该问题的正确答案中提出的投影并为geojson文件的每个部分使用独立的ID，可以在悬停时进行选择。

# android - 当我得到联系人时，它会例外吗？

> ID：11053355
> 
> 赞同：0
> 
> 时间：2012-06-15T15:07:46.787
> 
> 标签：android, android-intent, android-contacts

我要阅读 5- 联系人，所以我得到了这段代码并且顺利进行并且没有发生错误，但是当我添加这两行以保存名称和联系人以供以后使用时，出现了这个异常！

这是代码：

```
 Cursor cursor = getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    while (cursor.moveToNext()) {
        String contactId = cursor.getString(cursor
                .getColumnIndex(ContactsContract.Contacts._ID));
        String hasPhone = cursor
                .getString(cursor
                        .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));
        name = cursor.getString(cursor
                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

        // You know it has a number so now query it like this
        Cursor phones1 = getContentResolver().query(
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                null,
                ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = "
                        + contactId, null, null);
        if (count > 5)
            break;
        while (phones1.moveToNext()) {
            phoneNumber = phones1
                    .getString(phones1
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

        }

        phones1.close();

        Toast.makeText(this,
                contactId + " __ " + name + " # :  " + phoneNumber,
                Toast.LENGTH_SHORT).show();
        Contact2[count] = name;
        Numbers2[count] = phoneNumber;
        count++;

    } 
```

这两个语句导致异常！

```
Contact2[count] = name;
Numbers2[count] = phoneNumber; 
```

但是，没有这些语句，代码运行良好。

这是 logcat 窗口

```
06-15 18:00:02.745: I/ApplicationPackageManager(8639): cscCountry is not German : XEU
06-15 18:00:03.586: W/dalvikvm(8639): threadid=1: thread exiting with uncaught   exception (group=0x4001d560)
06-15 18:00:03.586: E/AndroidRuntime(8639): FATAL EXCEPTION: main
06-15 18:00:03.586: E/AndroidRuntime(8639): java.lang.IllegalStateException: Could not  execute method of the activity
06-15 18:00:03.586: E/AndroidRuntime(8639):     at  android.view.View$1.onClick(View.java:2154)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at android.view.View.performClick(View.java:2538)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at android.view.View$PerformClick.run(View.java:9152)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at android.os.Handler.handleCallback(Handler.java:587) 
06-15 18:00:03.586: E/AndroidRuntime(8639):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at android.os.Looper.loop(Looper.java:123)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at android.app.ActivityThread.main(ActivityThread.java:3687)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at java.lang.reflect.Method.invokeNative(Native Method)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at java.lang.reflect.Method.invoke(Method.java:507)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at dalvik.system.NativeStart.main(Native Method)
06-15 18:00:03.586: E/AndroidRuntime(8639): Caused by: java.lang.reflect.InvocationTargetException
06-15 18:00:03.586: E/AndroidRuntime(8639):     at java.lang.reflect.Method.invokeNative(Native Method)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at java.lang.reflect.Method.invoke(Method.java:507)
06-15 18:00:03.586: E/AndroidRuntime(8639):     at android.view.View$1.onClick(View.java:2149)
06-15 18:00:03.586: E/AndroidRuntime(8639):     ... 11 more
06-15 18:00:03.586: E/AndroidRuntime(8639): Caused by: java.lang.NullPointerException
06-15 18:00:03.586: E/AndroidRuntime(8639):     at oo.k.TestActivity.upload(TestActivity.java:156) 
```

我只需要保存联系结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:25:12.897

看起来你得到了一个空指针异常，可能是因为你没有初始化你的数组`Contact2`和`Numbers2`.

```
Contact2 = new String[5]; 
```

# ruby-on-rails-3 - Rails - 将模块包含到控制器中，在视图中使用

> ID：11053364
> 
> 赞同：7
> 
> 时间：2012-06-15T15:08:24.957
> 
> 标签：ruby-on-rails-3, module

我对 Rails 很陌生，我尝试设置一个模块文件以在视图中使用。所以我相信正确的行为是将模块定义为控制器中的助手，瞧，它应该可以工作。但是，对我来说并非如此。这是结构。

```
lib
  functions
    -- form_manager.rb 
```

form_manager.rb：

```
Module Functions 
  Module FormManager
    def error_message() ...
    end
  end
end 
```

users_controller.rb

```
class UsersController < ApplicationController

   helper FormManager

   def new ... 
```

好吧，结构就像上面那样，当我从中调用 error_message 时，`new.html.erb`它​​给了我错误：`uninitialized constant UsersController::FormManager`。

所以，首先，我知道在 rails 3 lib 中不会自动加载。假设自动加载 lib 文件夹不是强制性的，我该如何进行这项工作，我错过了什么？

顺便说一句，请不要说这个问题是重复的。我告诉你我一直在寻找这个废话将近 2 天。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T16:28:19.337

您的模块没有自动加载（至少在 3.2.6 中没有）。您必须明确加载它。您可以使用以下代码行来实现这一点

```
 # in application.rb
 config.autoload_paths += %W(#{config.root}/lib) 
```

您可以使用 . 检查您的自动加载路径`Rails.application.config.autoload_paths`。也许它确实是为你定义的？

现在您确定您的模块已加载，您可以`rails console`通过调用

```
> Functions::FormHelper 
```

现在默认情况下您不能将该模块用作视图助手。`#included`当您的模块被包含时，用于定义帮助程序。您可以通过这种方式实现“惰性评估”。我认为您的代码的问题是`helper`在包含模块之前调用了该方法。（如果我错了，有人应该纠正我）

这是代码：

```
Module Functions 
  Module FormManager
    def error_message() ...
    end

    def self.included m
      return unless m < ActionController::Base
      m.helper_method :error_message
    end

  end
end 
```

您还应该`helper`从控制器中删除该行。

编辑：

您可以在不自动加载的情况下实现此目的。只需使用`require "functions/form_manager"`. 您为每个方法定义一个 helper_method。如果您希望使用所有模块方法作为助手使用

```
def self.included m
  return unless m < ActionController::Base
  m.helper_method self.instance_methods
end 
```

编辑2：

看来您不需要使用`self.included`. 这实现了相同的功能：

```
class ApplicationController < ActionController::Base

  include Functions::FormManager
  helper_method Functions::FormManager.instance_methods

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:00:00.470

看来您正在其中进行命名空间`FormManager`，`Functions`这意味着您可以通过`helper Functions::FormManager`

试试看

# asp.net - MVC3，Spark View Engine：命名空间“Microsoft.Web”中不存在类型或命名空间名称“Mvc”

> ID：11053370
> 
> 赞同：2
> 
> 时间：2012-06-15T15:08:40.500
> 
> 标签：asp.net, asp.net-mvc-3, iis-7, spark-view-engine

当我尝试使用发布到本地 IIS 7 服务器的 Spark View Engine 访问 ASP.NET MVC3 应用程序时出现此错误。我已经看过[这个答案](https://stackoverflow.com/questions/2692007/the-type-or-namespace-name-mvc-does-not-exist-in-the-namespace-system-web)并且已经遵循了这个建议，但我仍然遇到问题。我还尝试将 Microsoft.Web.Mvc DLL 的*Copy Local*设置更改为*true*。我从来没有在 Visual Studio 调试服务器上遇到过这个错误。重新发布有时会使错误消失，但它会再次出现。

我应该从哪里开始寻找摆脱这个问题？

谢谢！

```
<!-- At the end of my Web.config: -->
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
            <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

**编辑：**为清楚起见，我尝试部署到的 IIS 服务器位于我的开发机器上。

**编辑：**我的 _global.spark 看起来像这样：

```
<use namespace="System.Collections.Generic"/>
<use namespace="System.Web.Mvc.Html"/>
<use namespace="System.Web.Mvc"/>
<use namespace="System" />
<use namespace="System.Linq" />
<use namespace="Namespace.For.Some.Code" />
<use namespace="Namespace.For.Some.More.Code" />
<use namespace="Namespace.For.Yet.Some.More.Code" />
<use namespace="Microsoft.Web.Mvc" />
<use namespace="Namespace.For.Still.More.Code" />

<!-- Added after suggested answer -->
<use assembly="Microsoft.Web.Mvc"/>

<global type="string" Title="'title of my app'" />
<global type="SomeDomainObject" SomeVariable="Utilities.ApplicationUtilities.GetSomeDomainObject" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:18:54.167

您是否从`/Shared/_global.spark`文件中引用了 MVC？

[您可以在此答案](https://stackoverflow.com/a/3952982/1107)中查看详细信息

`SparkSettings`或者，您可以在注册 ViewEngine 时将名称空间添加到您的名称空间。这是我的样子：

```
var settings = new SparkSettings()
 .SetDebug(true)
 .SetAutomaticEncoding(true)
 .AddAssembly("Web")
 .AddNamespace("Web.Model")
 .AddNamespace("System.Collections.Generic")
 .AddNamespace("System.Linq")
 .AddNamespace("System.Web.Mvc")
 .AddNamespace("System.Web.Mvc.Html"); 
```

希望有帮助，
罗布

# c# - 使用字母数字子集生成 1M 唯一随机密钥

> ID：11053377
> 
> 赞同：3
> 
> 时间：2012-06-15T15:08:53.473
> 
> 标签：c#, random, unique

我想生成 1M 随机（出现）唯一的字母数字键并将它们存储在数据库中。每个键的长度为 8 个字符，并且仅使用子集“abcdefghijk n pqrstuvxyz 和 0-9”。

字母 l、m、o 和 w 被丢弃。由于打印空间有限，省略了“m 和 w”，因为每个键都将在非常小的空间内打印在产品上。删除 m 和 w 可以将字母大小增加 2pt，从而提高可读性。l 和 o 被删除，因为它们在当前打印尺寸下很容易与 1、i 和 0 混淆。我们做了一些测试，字符 1、i 和 0 总是被正确读取，l 和 o 有很多错误。出于与“m 和 w”相同的原因，省略了大写字母。

那么为什么不是序列呢？几个原因： 密钥可以在之后注册，我们不希望任何人猜测序列中的下一个密钥并注册其他人的密钥。外观：我们不需要客户和竞争对手就知道我们只运送了几千把钥匙。

是否有一种实用的方法来生成密钥，确保每个密钥的唯一性并将它们存储在数据库中？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T15:17:28.303

编辑：@CodeInChaos 指出了一个问题：`System.Random`不是很安全，序列可以很容易地复制。我在`Random`这里替换为安全生成器：

```
var possibilities = "abcdefghijknpqrstuvxyz0123456789".ToCharArray();
int goal = 1000000;
int codeLength = 8;
var codes = new HashSet<string>();
var random = new RNGCryptoServiceProvider();
while (codes.Count < goal)
{
    var newCode = new char[codeLength];
    for (int i = 0; i < codeLength; i++)
        newCode[i] = possibilities[random.Next(possibilities.Length)];
    codes.Add(new string(newCode));
}
// now write codes to database

static class Extensions
{
    public static byte Next(this RNGCryptoServiceProvider provider, byte maximum)
    {
        var b = new byte[1];
        while (true)
        {
            provider.GetBytes(b);
            if (b[0] < maximum)
                return b[0];
        }
    }
} 
```

（下一个方法不是很快，但可能足以满足您的目的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:12:18.843

> 是否有一种实用的方法来生成密钥，确保每个密钥的唯一性并将它们存储在数据库中？

由于这是一个单一的操作，您可以简单地执行以下操作：

1) 生成单个密钥
2) 验证生成的密钥在数据库中不存在。
3）如果确实存在，则生成一个新密钥。
3b) 如果不存在，则将其写入数据库 4) 返回步骤 1

当然还有其他选择，最终归结为生成一个密钥，并确保它不存在于数据库中。

理论上，您可以生成 1000 万个密钥（以节省处理能力）将它们写入文件。生成密钥后，只需查看每个密钥，看看它是否已经存在于数据库中。 **您可能可以编写一个工具，在不到 48 小时内完成这项工作。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:15:54.977

如今，100 万并不多，您可以在一台机器上相当快地做到这一点。毕竟是一次性手术。

1.  获取哈希表（或哈希集）
2.  生成随机密钥并将它们作为密钥（或直接如果一组）放入其中，直到计数为 100 万
3.  将它们写入数据库

我快速而肮脏的测试代码如下所示：

```
function new-key {-join'abcdefghijknpqrstuvxyz0123456789'[(0..7|%{random 32})]}
$keys = @{}
for(){$keys[(new-key)]=1} 
```

但是 PowerShell 很*慢*，所以我希望 C++ 或 C# 在这里做得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T15:20:44.037

我曾经遇到过类似的问题。我所做的是创建一个唯一的序列 YYYY/MM/DD/HH/MM/SS/millis/nano 并获取其哈希码。之后，我使用哈希作为键。您的客户和您的竞争对手将无法猜测下一个值。这可能不是充分的证据，但就我而言，这已经足够了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T15:21:49.293

要实际获取随机字符串，您可以使用类似于以下的代码：

```
Random rand = new Random(new DateTime().Millisecond);
String[] possibilities = {"a","b","c","d","e","f","g","h","i","j","k",
    "l","n","p","q","r","s","t","u","v","x","y","z","0","1","2","3","4",
    "5","6","7","8","9"};
for (int i = 0; i < 1000000; ++i)
{
    System.Text.StringBuilder sb = new System.Text.StringBuilder();
    for (int j = 0; j < 8; ++j)
    {
        sb.Append(possibilities[rand.Next(possibilities.Length)]);
    }
    if (!databaseContains(sb.ToString()))
        databaseAdd(sb.ToString());
    else
        --i;
} 
```

# doctrine - 保存异构对象图

> ID：11053379
> 
> 赞同：1
> 
> 时间：2012-06-15T15:09:01.273
> 
> 标签：doctrine, doctrine-orm

我有一个非托管的对象图。如果我得到没有身份的对象，我可以用以下方式保存它们：

```
$em->persist($obj); 
```

但是，当我有一个**具有**身份（带有`$obj->id`集合）的方法时，该`persist()`方法想要重新创建它。我意识到这`merge()`是针对这种情况的。唯一的问题是它是递归的（因此图中的每个其他对象也应该具有标识）并且我的图在这方面是异构的（其中一些确实没有设置他们的 id）。

# android - BufferReader Android

> ID：11053382
> 
> 赞同：0
> 
> 时间：2012-06-15T15:09:12.997
> 
> 标签：android, sdk, bufferedreader, urlconnection

您好，我正在尝试设置一个简单的连接以通过 android 应用程序下载网页源，以便以后可以将它与我的 api 结合使用。我的代码下面显示没有错误，但在运行时应用程序在运行此代码时退出。当我注释掉 BufferReader 行时，应用程序继续正常运行，因此问题一定出在这行代码上：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream())); 
```

在下面，我已经从我使用它的地方获得了完整的代码片段。

```
 currentCustomer.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            try {
                URL url = null;
                url = new URL("http:www.google.com");
                URLConnection conn = url.openConnection();
                BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
                String line = "";
                while((line = reader.readLine()) != null) {
                    tv.append(line);
                }
            } catch(Exception e) {

            }

        }
    }); 
```

任何帮助，将不胜感激 ：）

这是堆栈跟踪：

```
06-15 16:15:50.911: D/dalvikvm(925): GC_FOR_ALLOC freed <1K, 4% free 7249K/7495K, paused 59ms
06-15 16:15:51.049: D/dalvikvm(925): GC_CONCURRENT freed <1K, 4% free 7249K/7495K, paused 5ms+4ms
06-15 16:15:51.159: V/TLINE(925): new: android.text.TextLine@40633f50
06-15 16:15:51.489: V/TLINE(925): new: android.text.TextLine@4063be20
06-15 16:15:55.019: W/System.err(925): java.lang.NullPointerException
06-15 16:15:55.039: W/System.err(925):  at      org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.hashCode(HttpConnection.java:296)
06-15 16:15:55.039: W/System.err(925):  at java.util.HashMap.get(HashMap.java:302)
06-15 16:15:55.039: W/System.err(925):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:73)
06-15 16:15:55.039: W/System.err(925):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:292)
06-15 16:15:55.049: W/System.err(925):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:274)
06-15 16:15:55.049: W/System.err(925):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1038)
06-15 16:15:55.049: W/System.err(925):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:523)
06-15 16:15:55.049: W/System.err(925):  at com.kylemcbride.SqueakyClean.SqueakyCleanActivity$1.onClick(SqueakyCleanActivity.java:48)
06-15 16:15:55.049: W/System.err(925):  at android.view.View.performClick(View.java:3100)
06-15 16:15:55.049: W/System.err(925):  at android.view.View$PerformClick.run(View.java:11644)
06-15 16:15:55.059: W/System.err(925):  at android.os.Handler.handleCallback(Handler.java:587)
06-15 16:15:55.059: W/System.err(925):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-15 16:15:55.069: W/System.err(925):  at android.os.Looper.loop(Looper.java:126)
06-15 16:15:55.069: W/System.err(925):  at android.app.ActivityThread.main(ActivityThread.java:3997)
06-15 16:15:55.069: W/System.err(925):  at java.lang.reflect.Method.invokeNative(Native Method)
06-15 16:15:55.069: W/System.err(925):  at java.lang.reflect.Method.invoke(Method.java:491)
06-15 16:15:55.080: W/System.err(925):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-15 16:15:55.080: W/System.err(925):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-15 16:15:55.080: W/System.err(925):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:23:18.877

您正在尝试加载网址：

```
http:www.google.com 
```

注意没有斜线。这不是一个真实的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T20:06:28.393

您应该`StringBuilder`在从 Web 源获取数据时用于连接字符串。每次连接字符串都会减慢已建立的连接速度。这是 StringBuilder 的参考：http: [//developer.android.com/reference/java/lang/StringBuilder.html](http://developer.android.com/reference/java/lang/StringBuilder.html)

**EDITED** 在执行网络操作、从数据库读取和写入或运行服务时也是如此。就像您尝试从 Web 源获取数据一样，建议在单独的线程中运行此类任务，而不是在主线程（也称为 UI 线程）上运行。当您不为此使用单独的线程时，您将始终不得不面对异常和应用程序崩溃。您正在做的工作的最佳解决方案，您应该使用`AsynchTask`. 查看这些参考资料：

**请参阅工作线程部分： http:**
[//developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)
**查看 AsynchTask 提供的内容：http:**
[//developer.android.com/reference/android/os/异步任务.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# linux - sudoers NOPASSWD 在桌面启动器脚本中无效

> ID：11053388
> 
> 赞同：1
> 
> 时间：2012-06-15T15:09:24.023
> 
> 标签：linux, launcher, sudoers

我在 Linux Mint 13 中有一个启动器脚本，以便我可以单击桌面上的图标来安装我的 NAS。为了在没有密码的情况下使用 /bin/mount 我必须将此行添加到 sudoers：

```
<username> ALL = NOPASSWD: /bin/mount 
```

挂载 NAS 的脚本非常简单：

```
#!/bin/bash
if [ 0 = `sudo mount |grep -c nasbox` ]
    then
        sudo mount -a
fi 
```

如果我使用终端，我的脚本无需输入密码即可工作，但是当它从启动器运行时（使用“终端中的应用程序”），它会要求输入密码。如果我给出它接受它并运行的密码 - 所以它必须知道哪个用户正在运行它并允许用户使用 sudo，所以它确实尊重部分 sudoers，但它不尊重 /bin/mount 的 NOPASSWD 关键字. 如何让 NOPASSWD 在这里工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:36:59.683

删除 /var/run/sudo、/var/lib/sudo 和 /var/db/sudo 以清除 sudo 可能缓存的任何内容。然后确保系统的时间和日期设置正确。作为一种（偏执的）安全措施，如果 sudo 确定系统时钟不可靠，它可能会提示输入密码。

在没有持久 RTC 时钟的系统上，这实际上发生在我身上一次。我想我通过删除这些目录并将系统时钟设置为启动时的未来值来解决它。sudo 实用程序现在可能已经改变，所以我不确定这是否仍然适用，但试一试！

# amazon-ec2 - 为什么 Amazon EC2 WSDL 中没有 WS-Security/WS-Policy 声明？

> ID：11053389
> 
> 赞同：0
> 
> 时间：2012-06-15T15:09:26.230
> 
> 标签：amazon-ec2, amazon-web-services, ws-security

[AWS EC2 SOAP API 文档](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-soap-api.html#using-soap-api-wsdl) 讨论了使用 WS-Security 标准（特别是 X509 令牌配置文件）保护 SOAP 消息的安全。

但是，[从页面链接的 WSDL](http://s3.amazonaws.com/ec2-downloads/ec2.wsdl)没有任何 WS-Security/WS-Policy 声明。我错过了什么？使用 X509 的要求是否意味着通过本文档完全带外传达？这似乎很奇怪。我注意到 WSDL 已于 2012-06-01 更新 - 是否有可能放宽 WS-Security 要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:36:24.553

您需要为您的 Amazon 账户下的 SOAP 操作申请证书。它将提供两个文件（私钥和证书，都是 PEM 文件）。

按照此[链接](https://aws-portal.amazon.com/gp/aws/securityCredentials)，如果需要登录并查看“访问凭据”部分。有一个“X.509 证书”选项卡，您可以在其中下载现有证书或创建新证书。

# bash - 如何定义 aspell 单词分隔符？

> ID：11053391
> 
> 赞同：7
> 
> 时间：2012-06-15T15:09:30.640
> 
> 标签：bash, spell-checking, aspell

Aspell 将带有下划线或破折号的单词视为两个单词，例如 cloud-based 被拼写检查为“cloud”和“based”。有没有办法指定单词分隔符以排除破折号和下划线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:33:10.473

如果我正确理解了这个问题，Aspell 不能完全按照你的意愿去做（据我所知）。这与[Aspells TODO 列表中的](http://aspell.net/)*条件复合词处理*有关。

在同一个列表中提到，[Hunspell](http://hunspell.sourceforge.net/)在复合词方面做得更好，所以如果你不绑定到 Aspell，它可能是一个可行的选择。OpenOffice 使用 Hunspell 进行拼写检查，因此很容易确定它是否符合您的要求。它至少适用于“基于云”的示例，并且不考虑所有带连字符的无条件复合词，即“基于云”不会被视为拼写错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:39:11.620

Aspell 目前无法执行您希望它执行的操作。它用于处理带有符号的单词的接口目前还不够复杂，无法处理这种情况。[此处](http://aspell.net/man-html/Words-With-Symbols-in-Them.html#Words-With-Symbols-in-Them)列出了有关此的更多信息。

抱歉，目前还不能解决这个问题，除非你想实现自己的接口。我建议按照[Mikhail](https://stackoverflow.com/users/190670/mikhail-kozhevnikov)的建议使用 Hunspell 。

# c# - 在 WPF 应用程序中找不到资源字典

> ID：11053393
> 
> 赞同：9
> 
> 时间：2012-06-15T15:09:35.867
> 
> 标签：c#, wpf, xaml

我正在构建 WPF 应用程序并在尝试引用资源字典时遇到错误。在我的 WPF 应用程序项目中，我有一个名为“Styles”的文件夹，其中包含我的应用程序的所有 xaml 样式模板：

![VS2010 解决方案资源管理器](../Images/c3d4233cbe94e1c27dc0f10714260de0.png)

在我的 app.xaml 文件中，我有这个：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Styles/MetroTheme.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

但是，当我将鼠标悬停在源属性上时，我收到一条错误消息，提示“查找资源字典“Styles/MetroTheme.xaml”时发生错误。我可以在 Visual Studio 和文件系统中的文件夹中看到 xaml 文件。

我还尝试了“/Styles/MetroTheme.xaml”和源属性的包 uri，但均未成功。知道为什么我收到此文件未找到错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:16:35.007

确保 MetroTheme.xaml 的构建操作设置为 Page。

![在此处输入图像描述](../Images/336ea0259604dc52b181fad81fe2f107.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-06T18:55:02.800

我有同样的问题，但设置***Build Action = Page***并没有解决我的问题。原来我需要使用[Pack URI Format](https://msdn.microsoft.com/en-us/library/aa970069(v=vs.110).aspx "打包 URI 格式")。所以，

```
<ResourceDictionary Source="pack://application:,,,/Styles/MetroTheme.xaml"/> 
```

**编辑**

事实证明，上述内容将消除构建错误，但仍会导致运行时错误。我需要包含完整的程序集规范以获得完整的解决方案（即使所有文件都在同一个程序集中）：

```
<ResourceDictionary Source="pack://application:,,,/WpfApplication10;component/Styles/MetroTheme.xaml"/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-05T21:57:09.610

有时关闭 Visual Studio 并再次打开它可以解决此问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-05-30T14:27:06.653

在项目属性中将目标 .net 版本更改为较旧的版本，然后重置为以前的版本。

# c# - IE 中的 ASP.NET 闪烁

> ID：11053394
> 
> 赞同：0
> 
> 时间：2012-06-15T15:09:36.573
> 
> 标签：c#, asp.net, css, internet-explorer, flicker

我是开发 asp.net 网站的新手，当我从一个页面导航到另一个页面或单击我自己的部分菜单时，它在 IE9 中闪烁（尚未测试其他 IE 版本），但在 Firefox 中没有。我在互联网上搜索并找到了这个解决方案：

```
<meta http-equiv="Page-Enter" content="blendTrans(Duration=0)" />
<meta http-equiv="Page-Exit" content="blendTrans(Duration=0)" /> 
```

但这实际上对我不起作用......

这是我的网站。母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="HomeSite.SiteMaster" %>
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head runat="server">
    <title></title>
        <meta http-equiv="Page-Enter" content="blendTrans(Duration=0)" />
        <meta http-equiv="Page-Exit" content="blendTrans(Duration=0)" />
        <link type="text/css" rel="stylesheet" href="~/Styles/Site.css" />
        <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>

<form runat="server">
<div class="page">
    <div class="header">
        <div class="loginDisplay">
            <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="False">
                <AnonymousTemplate>
                    [ <a href="http://www.flofab.com/partners.asp" ID="HeadLoginStatus" runat="server">Partner Login</a> ]
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" 
                        meta:resourcekey="HeadLoginNameResource1" /></span>!
                    [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" 
                        LogoutText="Log Out" LogoutPageUrl="~/" 
                        meta:resourcekey="HeadLoginStatusResource1"/> ]
                </LoggedInTemplate>
            </asp:LoginView>
        </div>
    </div>

    <div class="menuContainer">
        <div class="menuRight">
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" 
                EnableViewState="False" IncludeStyleBlock="False" Orientation="Horizontal" 
                meta:resourcekey="NavigationMenuResource1">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home" 
                        meta:resourcekey="MenuItemResource1"/>
                    <asp:MenuItem NavigateUrl="~/Literature.aspx" Text="Documents" 
                        meta:resourcekey="MenuItemResource2"/>
                    <asp:MenuItem NavigateUrl="~/Photos.aspx" Text="Photos & videos" 
                        meta:resourcekey="MenuItemResource4"/>
                    <asp:MenuItem NavigateUrl="~/Download.aspx" Text="Download" 
                        meta:resourcekey="MenuItemResource5"/>
                    <asp:MenuItem NavigateUrl="~/About.aspx" Text="About" 
                        meta:resourcekey="MenuItemResource6"/>
                </Items>
            </asp:Menu>
        </div>
        <div class="menuLeft">
        </div>
    </div>

    <div class="subMenu">
        <img src="Styles/images/Blue-Background.jpg" alt="" width="100%" height="150px" style="vertical-align: top;" />
        <img src="Styles/images/Logo_Flofab.png" alt='' height='100px' style="position:absolute;z-index:2;top:5px;left:120px;" />
    </div>

    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
    </div>
</div>
<div class="footerContainer">
    <div style='float:left;'>Copyright © 2012 Flofab All rights reserved.</div>
    <div style='float:right;'>
        <a href='http://www.linkedin.com'>
            <img src="Styles/images/linkedin.png" alt='' style='border:0;' />
        </a>
        <a href='http://www.twitter.com'>
            <img src="Styles/images/twitter.png" alt='' style='border:0;' />
        </a>
        <a href='http://www.facebook.com'>
            <img src="Styles/images/facebook-icon.png" alt='' style='border:0;' />
        </a>
    </div>
</div>
</form>

</body>
</html> 
```

现在这是我的 Default.aspx

```
<%@ Page Title="Flofab" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeBehind="Default.aspx.cs" Inherits="HomeSite._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <div id='mainTitle' class='mainTitle' runat='server'>
        Home
    </div>
    <div id='mainBody' class='mainBody'>
        <p>
            Put text here... 
        <br />
        This is some text to be sure it's placed over the FF logo. <br /> Is my text over it? I'm going to check now...
        </p>
    </div>
</asp:Content> 
```

还有我的 .css 文件

```
body   
{
    /*background-color: #fff;*/
    width:100%;
    height:100%;
    margin: 0px;
    padding: 0px;
    color: #575757;
    font: 12px/18px "Lucida Grande","Lucida Sans Unicode",Helvetica,Arial,Verdana,sans-serif;
    background-image:url('images/Body-Background.jpg');
    background-repeat:repeat-x;
}

a:link, a:visited
{
    color: #034af3;
}

a:hover
{
    color: #1d60ff;
    text-decoration: none;
}

a:active
{
    color: #034af3;
}

p
{
    margin: 0 10px 10px 10px;
    line-height: 1.6em;
}

table
{
    margin: 5px;
    border: 1px solid #4194E7;
    border-collapse:collapse;
    padding-left: 5px;
    padding-right: 5px;
}

table th
{
    border-bottom: 1px solid #4194E7;
    background-image:url('images/Menu-Background.jpg');
    background-repeat:repeat-x;
    color:White;
    padding-right: 10px;
}

table td
{
    border-bottom: 1px solid #4194E7;
    padding: 5px;
}

tr.row1
{
    background-color: #B4D4FA;
}

tr.row2
{
    background-color: #A0D4FA;
}

.page
{
    width: 80%;
    min-width:600px;
    margin: 2px auto 0px auto;
}

.header
{
    position: relative;
    margin: 0px;
    padding: 0px;
    width: 100%;
    min-height:50px;
}

.header h1
{
    font-weight: 700;
    margin: 0px;
    padding: 0px 0px 0px 20px;
    color: #000;
    border: none;
    line-height: 2em;
    font-size: 2em;
}

.subMenu
{
    margin-top: 35px;
    /*border: 1px solid gray;*/
    position: relative;
}

.main
{
    margin-top: 5px;
    min-height: 420px;
    border-left: 1px solid #4194E7;
    border-right: 1px solid #4194E7;
    border-bottom: 1px solid #4194E7;
    background-color:#C8D4FA;
}

.mainTitle
{
    padding: 5px 0px 2px 10px;
    /*border-bottom: 1px solid white;*/
    background-image:url('images/Menu-Background.jpg');
    background-repeat:repeat-x;
    font-size: 1.5em;
    font-variant: small-caps;
    font-weight: bold;
    color: #fff;
    min-height:25px;
}

.mainBody
{
    background-image:url('images/LogoFF-Filigrane.png');
    background-repeat:no-repeat;
    min-height: 395px; /*.main height - .mainTitle height*/
    padding-top:5px;
}

.mainItems
{
    padding-left: 10px;
    padding-right: 10px;
    margin-top:5px;
    border-bottom: 1px solid gray;
    /*background-color:#B8B8B8;*/
    font-size: 1em;
    font-variant: small-caps;
    text-transform: none;
    width: 120px;
}

.leftCol
{
    padding: 6px 0px;
    margin: 12px 8px 8px 8px;
    width: 200px;
    min-height: 200px;
}

.footerContainer
{
    color: #fff;
    padding-left: 2px;
    margin: 0px auto;
    text-align: center;
    line-height: normal;
    width: 80%;
}

.footerContainer a:link
{
    text-decoration:none;
}

div.menuContainer
{
    float:right;
    width:100%;
    background-image:url('images/Menu-Background.jpg');
    background-repeat:repeat-x;
    border-top:1px solid gray;
}

div.menuLeft
{
    width:100%;
    color:#ff99dd;
    display:inline;
}

div.menuRight
{
    color:#ff99dd;
    float:right;
    display:inline;
}

.menu
{
    padding: 0;
    margin: 0;
    min-height: 30px;
}

div.menu ul
{
    margin: 0;
    padding: 0;
    float:right;
}

div.menu ul li
{
    display: block;
    float:left;
    background-image:url('images/Menu-Background.jpg');
    background-repeat:repeat-x;
    border-left:1px solid white;
}

div.menu ul li a
{
    color: #fff;
    float: left;
    padding: 0.3em 1em 0.7em;
    text-decoration: none;

}

div.menu ul li a:hover
{
    color: #000;
 }   

div.menu ul li a:active
{
    color: #777;
    text-decoration: none;
}

fieldset
{
    margin: 1em 0px;
    padding: 1em;
    border: 1px solid #ccc;
}

fieldset p 
{
    margin: 2px 12px 10px 10px;
}

fieldset.login label, fieldset.register label, fieldset.changePassword label
{
    display: block;
}

fieldset label.inline 
{
    display: inline;
}

legend 
{
    font-size: 1.1em;
    font-weight: 600;
    padding: 2px 4px 8px 4px;
}

input.textEntry 
{
    width: 320px;
    border: 1px solid #ccc;
}

input.passwordEntry 
{
    width: 320px;
    border: 1px solid #ccc;
}

div.accountInfo
{
    width: 42%;
}

.clear
{
    clear: both;
}

.titleLogo
{
    display: block;
    float: left;
    text-align: left;
    width: auto;
}

.loginDisplay
{
    font-size: 1.1em;
    display: block;
    text-align: right;
    padding: 10px;
    color: #fff;
}

.loginDisplay a:link
{
    color: #fff;
    text-decoration:none;
}

.loginDisplay a:visited
{
    color: #fff;
}

.loginDisplay a:hover
{
    color: #fff;
}

.failureNotification
{
    font-size: 1.2em;
    color: Red;
}

.bold
{
    font-weight: bold;
}

.submitButton
{
    text-align: right;
    padding-right: 10px;
}

.floatLeft
{
    float:left;
}

.floatRight
{
    float:right;
}

.errorContent
{
    color: Red;
    text-align: center;
    font-size: 1.2em;
} 
```

知道是什么让 IE 闪烁吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:00:19.430

我没有将图像显示为背景和菜单，而是更改为 css linear-gradient 并且不再闪烁。看起来像 IE 缓存问题。

# opengl - 无法使用 OpenGL 显示 NPOT 纹理

> ID：11053396
> 
> 赞同：1
> 
> 时间：2012-06-15T15:09:37.733
> 
> 标签：opengl, nvidia

我编写了一个 C++ 简单应用程序，以找出为什么我不能使用“GL_Texture_2D”作为纹理目标来显示任何 NPOT 纹理。在某些时候，我需要生成一些 Mipmap，因此不能选择使用矩形纹理。

我正在运行 Win7 Pro (x64)、Intel i7-2600K CPU、8GB 内存、NVIDIA Quadro 600。我的 quadro 驱动程序是 296.35，它支持 OpenGL 4.2。

1 工作版本 当使用“默认”纹理时，它运行流畅并显示任何 NPOT 纹理。

```
glBindTexture( target = GL_TEXTURE_2D, texture = 0 ) 
```

2 Broken version 因为，我需要更多的 1 纹理，我需要得到他们的“名字”。一旦我们尝试绑定一个命名纹理，调用 glGenTexture 并将该纹理使用到 glBindTexture 中，我得到的只是一个白色矩形。

```
glGenTextures(n = 1, textures = &2)
glBindTexture(target = GL_TEXTURE_2D, texture = 2) 
```

我确定我的硬件支持 NPOT 纹理，我检查了 openGL 扩展并列出了“GL_ARB_texture_non_power_of_two”。另外，我使用 and 而不是典型的 Windows 版本的 .

我也在 nvidia 论坛上问过这个问题，[在这篇文章中](http://forums.developer.nvidia.com/devforum/discussion/9601/unable-to-display-npot-texture-with-opengl)你会找到两个日志文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:17:55.413

[`GL_TEXTURE_MIN_FILTER`默认为`GL_NEAREST_MIPMAP_LINEAR`.](http://www.opengl.org/wiki/Common_Mistakes#Creating_a_Texture)

上传 mipmap 或切换到`GL_NEAREST/GL_LINEAR`.

# c# - String.Format 和 SqlParameters

> ID：11053397
> 
> 赞同：0
> 
> 时间：2012-06-15T15:09:38.533
> 
> 标签：c#, string-formatting

我一直在查看.Net 中有关字符串格式的文档，但还没有找到这一点，希望有人能指出我正确的方向。我遇到了一段工作代码，它接受 SqlParameters 并将它们放在这样的字符串中：

```
 SqlParameter[] arrParams = new SqlParameter[]
        {
            new SqlParameter("@ClientID", clid),
            new SqlParameter("@CustomerID", cuid),
            new SqlParameter("@AdminUser", false)
        };
        string sqlText = string.Format("Insert into [Table1] (RID, CustomerID, AdminUser) values (@ClientID,@CustomerID,@AdminUser)"); 
```

..并且在 SqlCommand 中运行该字符串时，将正确的值放入正确的位置。我习惯于使用花括号作为字符串格式化参数而不是`@`符号，所以想知道在哪里可以了解更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:11:20.537

这段代码实际上不需要`String.Format`.

String.Format 适用于您通常会执行“字符串”+变量+“更多字符串”的时间。这将被写成`String.Format("string{0}morestring", variable);` 在这种情况下，它只是一个字符串，所以这就是为什么不需要......没有任何东西被连接在一起。

[这是对 String.Format 的一个很好的解释](http://www.dotnetperls.com/string-format)

这里发生的是 @VariableName 正在填充您的 SqlParameters 以避免 SQL 注入。简而言之，当您创建.NET 库时`SqlParameter`，.NET 库会查找与名称匹配的 SQL 参数，该参数可能是存储过程、函数等，或者 SQL 文本中以 @ 开头并与名称匹配的任何项目.

[这里很好地解释了 SqlParameters 如何工作](http://www.dotnetperls.com/sqlparameter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:12:22.887

我认为这里有些混乱。该`@`符号用于标识`INSERT INTO`语句中的命名 SQL 参数，而不是用于`String.Format`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:17:59.703

这与 String.Format 不同，实际发生的情况是您正在运行 SQL 命令，该命令查找名为 @ClientID、@CustomerID 和 @AdminUser 的变量，这些变量作为参数传递给 SQL Server。您将有类似 cmd.Parameters = arrparams 的东西再往下一点。

SQL 文本周围的实际 String.Format 部分是多余的，你是对的，它将像你建议的那样使用花括号路由。

希望这可以帮助。

# c# - 使用 savefiledialog 保存图像时出现问题

> ID：11053398
> 
> 赞同：1
> 
> 时间：2012-06-15T15:09:38.990
> 
> 标签：c#, image, bmp, savefiledialog

我正在使用 savefiledialog 来保存图像。画布是图片框，加载的图像是位图。当我尝试保存它时，文件已创建但不知何故损坏。因为当我尝试再次加载图像或在不同的查看器中显示时它不起作用 - 我的意思是保存的文件已损坏。有一种保存图像的方法。

```
 private void saveFileDialog1_FileOk(object sender, CancelEventArgs e)
        {

           System.IO.FileStream fs =
                (System.IO.FileStream)saveFileDialog1.OpenFile();

           try
           {
               switch (saveFileDialog1.FilterIndex)
               {
                   case 1:
                       canvas.Image.Save(saveFileDialog1.FileName, System.Drawing.Imaging.ImageFormat.Bmp);
                       break;
                   case 2:
                       canvas.Image.Save(saveFileDialog1.FileName, System.Drawing.Imaging.ImageFormat.Jpeg);
                       break;
                   case 3:
                       canvas.Image.Save(saveFileDialog1.FileName, System.Drawing.Imaging.ImageFormat.Png);
                       break;
                   case 4:
                       canvas.Image.Save(saveFileDialog1.FileName, System.Drawing.Imaging.ImageFormat.Tiff);
                       break;
               }

           }
           catch (Exception ex) 
           {
               System.Console.WriteLine("Exception " + ex);
           } 
```

我还应该提到属性过滤器。saveFileDialog1.Filter 具有值：

```
bmp (*.bmp)|*.bmp|jpeg (*.jpeg)|*.jpeg|png (*.png)|*.png|tiff (*.tiff)|*.tiff 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:58:38.113

我想问你为什么有电话线

```
System.IO.FileStream fs =
    (System.IO.FileStream)saveFileDialog1.OpenFile(); 
```

但事实证明，这正是导致您的问题的原因。您正在将文件打开到`FileStream`. 打开时，您可以`canvas.Image.Save`将图像写入同一个文件。

它会引发异常，但是由于您只是将异常写入控制台，因此您看不到它。

只需删除我提到的行，您的代码就可以工作。

# gwt - 在 GWTP 中如何处理 TabLayoutPanel 事件？

> ID：11053400
> 
> 赞同：0
> 
> 时间：2012-06-15T15:09:43.853
> 
> 标签：gwt, gwtp

我已经关注了 Dani 的 GWTP 课程，但没有涵盖将 TabLayoutPanel 与演示者一起使用。

我有一个带有 3 个选项卡的 TabLayoutPanel（每个选项卡上都有一个 VerticalPanel）。我使用了@ProxyCodeSplit，以便独立加载每个选项卡的代码。

如果在 Eclipse 中，在 GWT 的设计器中，我为 OnBeforeSelection 添加了一个处理程序，那么代码会自动添加到我的视图中。然后视图可以加载适当的演示者。

这感觉不是代码的正确位置 - 但它是吗？

您如何在 TabLayoutPanel 和代码拆分中处理不同的选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:07:03.130

我想我已经弄清楚了。

在带有 TabLayoutPanel 的演示者中（我们称之为 MainPresenter）：

```
@ContentSlot public static final Type<RevealContentHandler<?>> SLOT_first = new Type<RevealContentHandler<?>>();
@ContentSlot public static final Type<RevealContentHandler<?>> SLOT_second = new Type<RevealContentHandler<?>>();

public interface MyView extends View {
    public void setMainPresenter(MainPresenter presenter);
    public TabLayoutPanel getTeamsPanel();
}

@Inject PlaceManager placeMananger;
@Inject FirstPresenter firstPresenter;
@Inject SecondPresenter secondPresenter;

@ProxyCodeSplit
public interface MyProxy extends Proxy<MainPresenter> {
}

@Inject
public MainPresenter(final EventBus eventBus, final MyView view,
        final MyProxy proxy) {
    super(eventBus, view, proxy);
    view.setMainPresenter(this);
}

@Override
protected void revealInParent() {
    RevealRootContentEvent.fire(this, this);
}

public void setTabContents(Integer tab) {
    if (tab == 0) {
        placeMananger.revealPlace(new PlaceRequest("first"));
    } else if (tab == 1) {
        placeMananger.revealPlace(new PlaceRequest("second"));
} 
```

然后在您的 MainView 中实现方法 setMainPresenter() 以在本地存储引用。实现通常的 setInSlot()，然后添加这个选项卡处理程序：

```
@UiHandler("mainTabs")
void onMainTabsBeforeSelection(BeforeSelectionEvent<Integer> event) {
    mainPresenter.setTabContents(event.getItem());
} 
```

每次用户更改选项卡时，处理程序都会调用 MainPresenter。然后 setTabContents() 将为适当的“选项卡”Presenter 调用revealInParent()。

# php - 学说中的并发

> ID：11053402
> 
> 赞同：5
> 
> 时间：2012-06-15T15:09:45.603
> 
> 标签：php, mysql, concurrency, transactions, doctrine-orm

我有一个应用程序，在 php + mysql 平台上运行，使用 Doctrine2 框架。我需要在一个 http 请求期间执行 3 个 db 查询：第一个 INSERT，第二个 SELECT，第三个 UPDATE。UPDATE 取决于 SELECT 查询的结果。并发http请求的概率很高。如果出现这种情况，DB查询混淆（如INS1、INS2、SEL1、SEL2、UPD1、UPD2），就会导致数据不一致。如何确保 INS-SEL-UPD 操作的原子性？我是否需要使用某种锁，或者事务就足够了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-29T04:33:44.117

@YaK 的答案实际上是一个很好的答案。您应该知道一般如何处理锁。

特别针对 Doctrine2，您的代码应如下所示：

```
$em->getConnection()->beginTransaction();
try {
    $toUpdate = $em->find('Entity\WhichWillBeUpdated', $id,  \Doctrine\DBAL\LockMode::PESSIMISTIC_WRITE);
    // this will append FOR UPDATE http://docs.doctrine-project.org/en/2.0.x/reference/transactions-and-concurrency.html
    $em->persist($anInsertedOne);
    // you can flush here as well, to obtain the ID after insert if needed
    $toUpdate->changeValue('new value');
    $em->persist($toUpdate);
    $em->flush();
    $em->getConnection()->commit();
} catch (\Exception $e) {
    $em->getConnection()->rollback();
    throw $e;
} 
```

获取更新的每个后续请求都将等待该事务完成，以获取一个已获得锁的进程。事务成功或失败后，Mysql 会自动释放锁。默认情况下，innodb 锁定超时为 50 秒。因此，如果您的进程未在 50 秒内完成事务，它将自动回滚并释放锁。您不需要实体上的任何其他字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:25:38.057

保证表范围[`LOCK`](http://dev.mysql.com/doc/refman/5.5/en/lock-tables.html)在所有情况下都可以工作。但它们非常糟糕，因为它们有点防止并发，而不是处理它。*但是，如果您的脚本在很*短的时间内持有锁，这可能是一个可以接受的解决方案。

如果你的表使用 InnoDB 引擎（不支持使用 MyISAM 的事务），事务是最有效的解决方案，但也是最复杂的。

对于您非常具体的需求（在同一个表中，第一个 INSERT，第二个 SELECT，第三个 UPDATE 取决于 SELECT 查询的结果）：

1.  开始交易
2.  插入您的记录。在提交您自己的事务之前，其他事务不会看到这些新行（除非您使用非标准[隔离级别](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html)）
3.  [使用SELECT...LOCK IN SHARE MODE](http://dev.mysql.com/doc/refman/5.5/en/innodb-locking-reads.html)选择您的记录。您现在对这些行有一个 READ 锁，其他人不能更改这些行。(*)
4.  计算您需要计算的任何内容以确定您是否需要更新某些内容。
5.  如果需要，更新行。
6.  犯罪
7.  随时期待错误。如果检测到死锁，MySQL 可能会决定回滚您的事务以逃避死锁。如果另一个事务正在更新您尝试从中读取的行，则您的事务可能会被锁定一段时间，甚至超时。

如果您以这种方式进行，则可以保证您的交易的原子性。

(*) 一般而言，此 SELECT*未*返回的行仍可能插入到并发事务中，也就是说，除非采取适当的预防措施，否则在整个事务过程中不能保证不[存在](http://dev.mysql.com/doc/refman/5.5/en/innodb-record-level-locks.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-10T08:32:35.233

**事务不会阻止线程 B 读取线程 A 尚未锁定的值**

所以你必须使用锁来防止并发访问。

@Gediminas 解释了如何在 Doctrine 中使用锁。但是使用锁可能会导致死锁或锁超时。Doctrine 将这些 SQL 错误呈现为 RetryableExceptions。 如果您处于高并发环境中，**这些异常通常是正常的。**它们可能经常发生，**您的应用程序应该正确处理它们**。

*每次 Doctrine 抛出 RetryableException 时，处理此问题的正确方法是重试整个事务。*

看起来很容易，但有一个陷阱。Doctrine 2 EntityManager 在 RetryableException 之后变得不可用，您必须重新创建一个新的来重播整个事务。

我用一个完整的例子写了[这篇文章。](https://medium.com/lebouchondigital/thread-safe-business-logic-with-doctrine-f09c633f6554)

# php - 如何为某些帖子创建有效的内容过滤器？

> ID：11053409
> 
> 赞同：12
> 
> 时间：2012-06-15T15:10:05.460
> 
> 标签：php, ajax, wordpress, cron

我已将这篇文章标记为 WordPress，但我不完全确定它是特定于 WordPress 的，所以我将它发布在 StackOverflow 而不是 WPSE 上。*该解决方案不必是特定于 WordPress 的，只需 PHP 即可*。

**情景**
我经营一个[养鱼网站](http://www.seriouslyfish.com)，里面有许多热带鱼`Species Profiles`和`Glossary`条目。

我们的网站以我们的个人资料为导向。正如您所说，它们是网站的基础。

我希望实现的是，在每个提到另一个物种或词汇表条目的物种概况中，我可以用链接替换这些词——比如你会[在这里](http://www.seriouslyfish.com/species/badis-juergenschmidti/)看到的。理想情况下，我也希望这也出现在新闻、文章和博客文章中。

我们几乎`1400 species profiles`和`1700 glossary entries`. 我们的物种概况通常很长，最后只计算我们的物种概况`numbered more than 1.7 million words`信息。

**我目前正在尝试**
的目前，我有`filter.php`一个功能 - 我相信 - 可以完成我需要它做的事情。代码很长，可以在[这里](http://pastebin.com/HC3Z38bM)找到完整的代码。

此外，在我的 WordPress 主题中`functions.php`，我有以下内容：

```
# ==============================================================================================
# [Filter]
#
# Every hour, using WP_Cron, `my_updated_posts` is checked. If there are new Post IDs in there,
# it will run a filter on all of the post's content. The filter will search for Glossary terms
# and scientific species names. If found, it will replace those names with links including a 
# pop-up.

    include "filter.php";

# ==============================================================================================
# When saving a post (new or edited), check to make sure it isn't a revision then add its ID
# to `my_updated_posts`.

    add_action( 'save_post', 'my_set_content_filter' );
    function my_set_content_filter( $post_id ) {
        if ( !wp_is_post_revision( $post_id ) ) {

            $post_type = get_post_type( $post_id );

            if ( $post_type == "species" || ( $post_type == "post" && in_category( "articles", $post_id ) ) || ( $post_type == "post" && in_category( "blogs", $post_id ) ) ) {
                //get the previous value
                $ids = get_option( 'my_updated_posts' );

                //add new value if necessary
                if( !in_array( $post_id, $ids ) ) {
                    $ids[] = $post_id;
                    update_option( 'my_updated_posts', $ids );
                }
            }
        }
    }

# ==============================================================================================
# Add the filter to WP_Cron.

    add_action( 'my_filter_posts_content', 'my_filter_content' );
    if( !wp_next_scheduled( 'my_filter_posts_content' ) ) {
        wp_schedule_event( time(), 'hourly', 'my_filter_posts_content' );
    }

# ==============================================================================================
# Run the filter.

    function my_filter_content() {
        //check to see if posts need to be parsed
        if ( !get_option( 'my_updated_posts' ) )
            return false;

        //parse posts
        $ids = get_option( 'my_updated_posts' );

        update_option( 'error_check', $ids );

        foreach( $ids as $v ) {
            if ( get_post_status( $v ) == 'publish' )
                run_filter( $v );

            update_option( 'error_check', "filter has run at least once" );
        }

        //make sure no values have been added while loop was running
        $id_recheck = get_option( 'my_updated_posts' );
        my_close_out_filter( $ids, $id_recheck );

        //once all options, including any added during the running of what could be a long cronjob are done, remove the value and close out
        delete_option( 'my_updated_posts' );
        update_option( 'error_check', 'working m8' );
        return true;
    }

# ==============================================================================================
# A "difference" function to make sure no new posts have been added to `my_updated_posts` whilst
# the potentially time-consuming filter was running.

    function my_close_out_filter( $beginning_array, $end_array ) {
        $diff = array_diff( $beginning_array, $end_array );
        if( !empty ( $diff ) ) {
            foreach( $diff as $v ) {
                run_filter( $v );
            }
        }
        my_close_out_filter( $end_array, get_option( 'my_updated_posts' ) );
    } 
```

正如（希望）代码注释所描述的那样，这种工作方式是 WordPress 每小时运行一个 cron 作业（这就像一个错误的 cron - 在用户点击时起作用，但这并不重要，因为时间并不重要重要）运行上面找到的过滤器。

每小时运行一次的基本原理是，如果我们试图在保存每个帖子时运行它，那将损害作者的利益。一旦我们让客座作者参与进来，这显然不是一种可接受的方式。

**问题...**
几个月来，我一直无法让这个过滤器可靠运行。我不认为问题出在过滤器本身，而在于启用过滤器的功能之一 - 即 cron 作业，或选择过滤哪些帖子的功能，或准备单词列表的功能等。过滤器。

不幸的是，诊断问题非常困难（我可以看到），这要归功于它在后台运行并且仅每小时运行一次。我一直在尝试使用 WordPress 的`update_option`功能（它基本上写入一个简单的数据库值）来进行错误检查，但我运气不佳 - 老实说，我对问题出在哪里感到很困惑。

我们最终在没有此过滤器正常工作的情况下使网站上线。有时它似乎有效，有时却无效。结果，我们现在有很多没有正确过滤的物种概况。

**我想要什么...**
我基本上是在寻求有关运行此过滤器的最佳方法的建议。

Cron Job 是答案吗？我可以设置一个`.php`每天运行的文件，这不是问题。它如何确定需要过滤哪些帖子？它在运行时会对服务器产生什么影响？

或者，是 WordPress 管理页面的答案吗？如果我知道该怎么做，那么类似于页面的东西——利用 AJAX——允许我选择帖子来运行过滤器将是完美的。有一个叫做`AJAX Regenerate Thumbnails`这样的插件，也许那会是最有效的？

**注意事项**

*   受到影响/读取/写入的数据库/信息的大小
*   过滤了哪些帖子
*   过滤器对服务器的影响；特别是考虑到我似乎无法将 WordPress 内存限制增加到 32Mb 以上。
*   实际过滤器本身是否高效、有效和可靠？

* * *

这是一个相当复杂的问题，我不可避免地（因为我在这个过程中被同事分心了大约 18 次）遗漏了一些细节。请随时向我询问更多信息。

提前致谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:33:56.673

创建配置文件时执行此操作。

尝试反转整个过程。与其检查内容中的单词，不如检查单词中的内容。

1.  将内容帖子分解为单词（在空间上）
2.  消除重复项、数据库中最小单词大小的单词、大于最大单词大小的单词以及您保留的“常用单词”列表中的单词。
3.  检查每个表，如果您的某些表包含带空格的短语，请进行 %text% 搜索，否则进行直接匹配（更快），或者如果确实有那么大的问题，甚至构建哈希表。（我会以 PHP 数组的形式执行此操作并以某种方式缓存结果，没有意义重新发明轮子）
4.  使用现在大大缩小的列表创建您的链接。

即使您要检查的单词数达到 100,000 个，您也应该能够轻松地将其保持在 1 秒以内。我之前已经为贝叶斯过滤器做了这个，没有缓存单词列表。

使用较小的列表，即使它很贪心并且收集与“小丑”不匹配的单词也会抓住“小丑泥鳅”，由此产生的较小列表应该只有几到几十个带有链接的单词。这将不需要任何时间来查找和替换一大块文本。

以上并没有真正解决您对旧配置文件的担忧。您没有确切地说有多少，只是有很多文本，并且放在 1400 到 3100（两个项目）上。如果您有信息，您可以根据受欢迎程度来做这些较旧的内容。或在输入的日期，最新的在前。无论如何，最好的方法是编写一个脚本来暂停 PHP 的时间限制，并在所有帖子上批量运行加载/处理/保存。如果每个人需要大约 1 秒（可能要少得多，但最坏的情况），那么你说的是 3100 秒，也就是不到一个小时。

# perforce - 从命令行更改 perforce 工作区视图图

> ID：11053411
> 
> 赞同：4
> 
> 时间：2012-06-15T15:10:13.807
> 
> 标签：perforce, workspace

我搜索了互联网和 perforce 帮助页面，但找不到解决问题的方法。

在脚本中，所以在命令行中，我想更改我的工作区视图地图。例如：

//depot/some/branch/myfolder/mysubfolder/... /home/myuser/perforce/branch/myfolder/myworkspace/... 到 //depot/some/branch/... /home/myuser/perforce/分支/...

我无法弄清楚要使用什么命令。你能帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:35:55.880

您需要使用该`p4 client`命令。您可以使用`-i`and`-o`选项编写脚本，让您通过 STDIN 和 STDOUT 与工作区表单进行交互。

更简单的方法是使用像 P4Python 这样的脚本 API：

```
cspec = p4.fetch_client('my_ws_name')
view = ["//depot/some/branch/... /home/myuser/perforce/branch/..."]
cspec["View"] = view
p4.save_client(cspec) 
```

# android - postAtTime 未触发

> ID：11053412
> 
> 赞同：4
> 
> 时间：2012-06-15T15:10:16.990
> 
> 标签：android, timer, handler

我正在尝试制作一个每分钟更改 UI 的应用程序，但我在 postAtTime 函数上遇到了很多困难，因为我无法触发它。我已经用 postDelay 尝试过它并且它有效，但 postAtTime 应该给我更多的精确度。

我获取当前时间并设置日历，然后在日期上添加一分钟并调用 postAtTime，但它不会触发。让我们看看你能不能帮助我。

```
 private Runnable showMinute = new Runnable() {
    public void run() {
        calendar = Calendar.getInstance();
        minute = calendar.get(Calendar.MINUTE);
        minute = minute % 10;

        switch (minute){
        case 0: numero.setImageResource(R.drawable.b0);
            break;
        case 1: numero.setImageResource(R.drawable.b1);
            break;
        case 2: numero.setImageResource(R.drawable.b2);
            break;
        case 3: numero.setImageResource(R.drawable.b3);
            break;
        case 4: numero.setImageResource(R.drawable.b4);
            break;
        case 5: numero.setImageResource(R.drawable.b5);
            break;
        case 6: numero.setImageResource(R.drawable.b6);
            break;
        case 7: numero.setImageResource(R.drawable.b7);
            break;
        case 8: numero.setImageResource(R.drawable.b8);
            break;
        case 9: numero.setImageResource(R.drawable.b9);
            break;
        default:
            break;
        }

        handler.removeCallbacks(mostrarHora);
        calendar.add(Calendar.MINUTE, 1);
        calendar.set(Calendar.SECOND, 0);
        calendar.set(Calendar.MILLISECOND, 0);
        handler.postAtTime(showMinute, calendar.getTimeInMillis());
    }
  }; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T15:14:27.737

您正在使用绝对时间（来自`Calendar`班级）。`handler.postAtTime`时间格式是`ms`自启动以来的数量。

你应该使用`SystemClock.uptimeMillis()`你的计算。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T16:09:32.797

好吧，最后我解决了。如果有人遇到同样的问题，这就是解决方案。

```
 private Runnable mostrarHora = new Runnable() {
    public void run() {
        int segundo;
        long start, diferencia;
        calendar = Calendar.getInstance();
        diferencia = calendar.getTimeInMillis()-SystemClock.uptimeMillis();
        segundo = calendar.get(Calendar.MINUTE);
        segundo = segundo % 10;

        switch (segundo){
        case 0: numero.setImageResource(R.drawable.b0);
            break;
        case 1: numero.setImageResource(R.drawable.b1);
            break;
        case 2: numero.setImageResource(R.drawable.b2);
            break;
        case 3: numero.setImageResource(R.drawable.b3);
            break;
        case 4: numero.setImageResource(R.drawable.b4);
            break;
        case 5: numero.setImageResource(R.drawable.b5);
            break;
        case 6: numero.setImageResource(R.drawable.b6);
            break;
        case 7: numero.setImageResource(R.drawable.b7);
            break;
        case 8: numero.setImageResource(R.drawable.b8);
            break;
        case 9: numero.setImageResource(R.drawable.b9);
            break;
        default:
            break;
        }

        handler.removeCallbacks(mostrarHora);
        calendar.set(Calendar.MINUTE, calendar.get(Calendar.MINUTE)+1);
        calendar.set(Calendar.SECOND, 0);
        calendar.set(Calendar.MILLISECOND, 0);
        start = calendar.getTimeInMillis()-diferencia;
        handler.postAtTime(mostrarHora, start);
    }
  }; 
```

# asp.net-mvc-3 - 如何以编程方式在 asp.net MVC3 中启动 ssis 包以导入 excel 文件

> ID：11053419
> 
> 赞同：2
> 
> 时间：2012-06-15T15:10:58.127
> 
> 标签：asp.net-mvc-3, ssis

我正在开发的 asp.net MVC3 Web 应用程序遇到一些问题。我需要一个允许用户上传 excel 文件并将它们转储到文件系统的上传页面。我让这个工作正常。下一部分是我遇到问题的部分，上传 excel 文件后，我需要以编程方式启动我已经创建的 SSIS 包以导入 excel 文件。

这是我到目前为止的代码：

```
 //
    // POST: /Home/Update/
    [HttpPost]
    public ActionResult Update(HttpPostedFileBase file)
    {
        // Verify that the user selected a file
        if (file != null && file.ContentLength > 0)
        {

            var fileName = Path.GetFileName(file.FileName);

            // store the file inside ~/App_Data/uploads folder
            var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
            ViewBag.Message = "File Uploaded Successfully";
            file.SaveAs(path);

        }

        //Start the SSIS here

        try
        {
            Application app = new Application();

            Package package = null;
            package = app.LoadPackage( @"C:\Users\Chris\Documents\Visual Studio
            2008\Projects\Integration Services Project1\Integration Services Project1
            \bin\Package.dtsx", null);

            // Execute Package
            DTSExecResult results = package.Execute();

            if(results == DTSExecResult.Failure)
            {
                foreach(DtsError local_DtsError in package.Errors)
                {
                    ViewBag.Message("Package Execution results:{0}",  
                    local_DtsError.Description.ToString());
                }
            }
        }
        catch(DtsException ex)
        {
            //ViewBag.Message("{0} Exception caught.", ex);

        }

        // redirect back to the index action to show the form once again
        return RedirectToAction("Update");
    } 
```

当我运行代码并上传一个 excel 文件时，我捕获了一个 DtsException，它说：

由于错误 0x80070003“系统找不到指定的路径”，无法打开包文件“C:\Users\Chris\Documents\Visual Studio 2008\Projects\Integration Services Project1\Integration Services Project1\bin\Package.dtsx”。当加载一个包并且文件无法打开或正确加载到 XML 文档中时，会发生这种情况。这可能是由于在调用 LoadPackage 时指定了不正确的文件名，或者指定了 XML 文件并且格式不正确。

我不明白为什么它给我这个，因为我检查了文件路径是正确的并且它是完全正确的。我需要一些帮助来解决这个问题，我将非常感谢你们提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:22:31.013

我应该考虑的权限。将文件放在运行 IIS 的帐户可以看到的位置。无论您打算在哪里部署它，都会很好。

# c++ - QString::compare() 与将 QString 转换为数字然后比较

> ID：11053420
> 
> 赞同：2
> 
> 时间：2012-06-15T15:10:59.540
> 
> 标签：c++, qt

`QString`比较包含数字的 2 s，还是将这些`QString`s 转换为数字然后比较数字会更快吗？

那么哪个更快？

```
QString str1,str2;
if(str1.compare(str2)==0) 
```

或者

```
QString str1,str2;
if(QString::number(str1)==QString::number(str2)) 
```

我问的原因是因为我必须填写`QMap`与这些错误代码相对应的错误代码和错误消息。我将从 ini 文件中读取错误代码/错误消息，所以我想知道将错误代码转换为整数并 have`QMap<int,QString>`还是将它们保留为`QString`s 和 have是否更好`QMap<QString,QString>`。哪种方法会给我最优化的代码？

`QMap`包含在哪里`<error code, error message>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:42:56.963

字符串比较很可能以麻烦结束： "1.00" != "1.0" != "1" != "0001"

始终使用数字类型来比较数字，并且不要担心任何整体中如此微小的部分的想象性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:35:22.660

使用`QString`键，映射在每次插入、删除和查找时执行字符串比较。由于这些比较是重复进行的，因此在将字符串用作映射键之前将其转换为整数会更便宜。这样的转换每个项目只进行一次，也许每次查找一次，查找的键最初也是 QString 形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:19:38.023

有一次，只比较字符串（可能）比将它们转换为数字并比较数字要快。

如果您需要将结果作为其他步骤的数字，则在开始时将它们转换为数字并存储数字。

如果您的错误代码是连续的，那么您通常会将它们放入索引为的向量中`[error_code - first_error_code]`

但在进行任何优化之前 - 1，测量 2，决定你是否关心

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:21:35.917

对于您编写的代码，进行两次转换并比较结果会比直接比较字符串要慢。

问题是，要进行字符串比较，您至少必须访问每个字符串的每个字符。在 != 情况下，您可能会在找到差异并退出比较之前访问更少的字符（我假设一个比较例程会在失败时提前退出）。在转换和比较的情况下，您必须每次都访问两个字符串的所有字符。所以直接比较的情况会更快。

在地图的情况下，您将需要使用 QString，因为您将进行一次转换并进行多次比较。这意味着转换成本将被比较节省的成本所淹没，最终您将获胜。

# c# - 在 C# 中，处理密码等敏感数据的正确方法是什么？

> ID：11053421
> 
> 赞同：9
> 
> 时间：2012-06-15T15:11:05.313
> 
> 标签：c#, security, passwords, securestring

这个应用程序显示一个带有文本框的表单，用户应该在其中输入用于解密文档的密码。

我的代码如下所示：

```
string password = passwordTextBox.Text;
...
DecryptDocument(password); 
```

但有人告诉我，从技术上讲，这是一个安全漏洞，因为即使在应用程序关闭后，代表密码的数据也可能保留在内存中。

我尝试使用 System.Security.SecureString 类，但现在我正在处理指向 CoTaskMem 的指针，这似乎使问题变得更糟：

```
SecureString password = new SecureString();
foreach(char i in passwordTextBox.Text.ToCharArray())
password.AppendChar(i);

IntPtr ptr = Marshal.SecureStringToCoTaskMemAnsi(password);
int length = password.Length;
byte[] bytes = new byte[length];

Marshal.Copy(ptr, bytes, 0, length);

DecryptDocument(Encoding.Default.GetString(bytes));

Marshal.FreeCoTaskMem(ptr); 
```

如您所见，我似乎并没有让应用程序更安全，因为迟早我将不得不接受输入（passwordTextBox.Text）并将其转换为我可以传递给 DecryptDocument() 的字符串功能。

有没有办法解决这个问题，或者我应该只处理这个安全漏洞？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T15:18:23.423

如果您真的想使用 SecureString，则需要端到端使用它，最好一次只与一个字符交互。每当将字符串解密为字符数组时，您都需要在使用完毕后明确清除内存。这样做的后果：

1.  您应该使用直接与 SecureString 一起操作的安全 TextBox 控件。请参阅[此处](http://www.codeproject.com/Articles/16702/Securing-Text-Data-in-NET)以获取一个很好的示例。

2.  您应该修改 DecryptDocument 以直接获取 SecureString。

3.  您将希望实现解密，以便它花费尽可能少的时间来处理已解密的字符。.NET 中的一些加密架构实际上直接支持 SecureString。如果做不到这一点，最好的办法是使用非托管缓冲区，并在完成后将其明确清除。

# maven - 我如何配置 maven 以便它使用 jar 进行编译但在捆绑到 war 文件时排除所有这些

> ID：11053423
> 
> 赞同：1
> 
> 时间：2012-06-15T15:11:11.373
> 
> 标签：maven

我在应用服务器上部署了多个应用程序，并且都使用几乎相同的 JAR 文件集。这些应用程序被创建为 Maven 项目。我想在我的应用服务器上部署这些应用程序，而不必将它们与任何 JAR 文件捆绑在一起。相反，我会将所有这些 JAR 文件添加到应用服务器上，分别添加到其自己的 lib 目录或这些应用程序可以使用的其他目录中。

在这种情况下，我如何配置我的 Maven 项目，以便它使用工件来编译我的项目，但是当它创建一个 WAR 文件时，它会排除所有这些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:18:54.600

这就是`provided`范围的意义所在。来自[Maven](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)`provided`文档：

> 这很像 compile，但表明您希望 JDK 或容器在运行时提供依赖项。例如，在为 Java 企业版构建 Web 应用程序时，您可以将 Servlet API 和相关 Java EE API 的依赖设置为提供的范围，因为 Web 容器提供了这些类。此范围仅在编译和测试类路径上可用，并且不可传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:14:20.397

您是否使用 maven-assembly-plugin 创建 WAR 文件？如果是这样，您可以排除正在复制的依赖项。

# events - 从数组加载多行时未传递 Google Maps API V3 折线事件侦听器参数

> ID：11053425
> 
> 赞同：0
> 
> 时间：2012-06-15T15:11:13.430
> 
> 标签：events, maps, listener, polyline

如果我将它们编码为一次添加一个，我已经成功地向我添加到谷歌地图（V3）的折线的点击事件添加了一个处理程序，但是如果我创建一个 for 循环来简单地遍历我的数据，它失败。

工作演示：

[http://www.ikfoundation.org/demo/works.html](http://www.ikfoundation.org/demo/works.html)

[http://www.ikfoundation.org/demo/fails.html](http://www.ikfoundation.org/demo/fails.html)

除了画线的位之外，每个代码都是相同的：

作品：

```
var linePts = [[
new google.maps.LatLng(59.454924068851290, 17.094726562500000),
    new google.maps.LatLng(55.984639327677950, 17.270507812500000),
      ],[
new google.maps.LatLng(51.081191044453350, 26.938476562500000),
new google.maps.LatLng(62.112946929861720, 26.586914062500000)
      ]];

// Draw the lines...  

elines[0] = new google.maps.Polyline({
        path: linePts[0],
        strokeColor: "#0000ff",
        strokeOpacity: 1.00,
        strokeWeight: 7,
        clickable: true,
        editable: true,
        geodesic: true,
        zIndex: 1,
        map: map,
        myID: 0
    });

google.maps.event.addListener(elines[0], 'click', function()
{
    lineClick(elines[0]);
});

elines[1] = new google.maps.Polyline({
        path: linePts[1],
        strokeColor: "#0000ff",
        strokeOpacity: 1.00,
        strokeWeight: 7,
        clickable: true,
        editable: true,
        geodesic: true,
        zIndex: 1,
        map: map,
        myID: 1
    });

google.maps.event.addListener(elines[1], 'click', function()
    {
        lineClick(elines[1]);
    });

function lineClick(line)
{
    alert("Line clicked with myID=" + line.myID);
} 
```

失败（我排除了与上面显示的相同的线点定义数组，以及 lineClick 函数，两者再次相同）：

```
for (var i=0; i<=1; i++)
{       
elines[i] = new google.maps.Polyline({
            path: linePts[i],
            strokeColor: "#0000ff",
            strokeOpacity: 1.00,
            strokeWeight: 7,
            clickable: true,
            editable: true,
            geodesic: true,
            zIndex: 1,
            map: map,
            myID: i 
        });

google.maps.event.addListener(elines[i], 'click', function()
        {
            lineClick(elines[i]);
        });
} 
```

我做错了什么？两者都在这些变量中使用相同的变量名称和索引。正如您在我的示例链接中看到的那样，除了点击侦听器之外，一切都运行良好。在后一个“失败”版本中失败，因为似乎折线根本没有传递给 lineClick 函数（您需要运行 java 调试器才能看到错误）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:41:47.203

整理出来。不明白为什么（有人愿意解惑吗？）但是用以下代码替换 addListener 代码使其工作：

```
 google.maps.event.addListener(elines[i], 'click', function()
        {
            lineClick(this);
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:57:51.507

这是一个变量范围的问题。我只需在代码顶部声明一个新变量（如下`var elines = [];`）：

```
var elines = [];
var myLine; 
```

然后在 for 循环中实例化折线后，设置 myLine = elines[i]，如下所示：

```
myLine = elines[i];

google.maps.event.addListener(elines[i], 'click', function()
  {
    lineClick(myLine);
  }); 
```

# asp.net-mvc-3 - asp.net mvc3, api 推特

> ID：11053427
> 
> 赞同：0
> 
> 时间：2012-06-15T15:11:20.170
> 
> 标签：asp.net-mvc-3, linq-to-twitter

有人可以向我解释这段代码：

```
auth = new MvcAuthorizer
       {
           Credentials = credentials               
       };

       auth.CompleteAuthorization(Request.Url);

var auth = new MvcAuthorizer
        {
            Credentials = new SessionStateCredentials()
            {
                ConsumerKey = this.client.ConsumerKey,
                ConsumerSecret = this.client.ConsumerSecret,
                OAuthToken = identity.Token.Token
            }
        }; 
```

两个代码的区别

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:42:40.707

从逻辑上讲，没有区别。我假设第一个示例中的“凭据”是之前在代码中实例化的 SessionStateCredentials。第二个示例使用对象初始化语法来做同样的事情。

# c# - 无法删除字符串中的一组字符

> ID：11053431
> 
> 赞同：2
> 
> 时间：2012-06-15T15:11:30.570
> 
> 标签：c#, regex

我有一组要从字符串中删除的字符：`"/\[]:|<>+=;,?*'@`

我正在尝试：

```
private const string CHARS_TO_REPLACE = @"""/\[]:|<>+=;,?*'@";

private string Clean(string stringToClean)
{
    return Regex.Replace(stringToClean, "[" + Regex.Escape(CHARS_TO_REPLACE) + "]", "");
} 
```

但是，结果与类似的输入严格相同`"Foo, bar and other"`。

我的代码有什么问题？

[这个问题](https://stackoverflow.com/questions/1356425/c-sharp-3-0-remove-chars-from-string)看起来很多，但是使用黑名单而不是白名单，所以我删除了 not in `^`char。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:14:07.917

你没有逃脱右方括号`CHARS_TO_REPLACE`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T15:21:38.070

如前所述（但答案突然消失了），`Regex.Escape`不会 escape `]`，所以你需要调整你的代码：

```
 return Regex.Replace(stringToClean, "[" + Regex.Escape(CHARS_TO_REPLACE)
          .Replace("]", @"\]") + "]", " "); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T15:27:03.353

问题是对[`Regex.Escape`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)工作原理的误解。来自 MSDN：

> 通过用转义码替换最小字符集（\、*、+、?、|、{、[、(,)、^、$、.、# 和空格）来转义它们。

它按预期工作，但您需要将元字符视为字符类*之外*`Regex.Escape`的转义元字符。当你使用一个字符类时，你想要在*里面*转义的东西是不同的。例如，在字符类内部应该转义为文字，否则它可以充当字符范围（例如，）。**`-``[A-Z]`**

 **在你的情况下，正如其他人所提到的，`]`没有逃脱。对于任何在字符类中具有特殊含义的字符，您需要在调用`Regex.Escape`. 这应该做你需要的：

```
string CHARS_TO_REPLACE = @"""/\[]:|<>+=;,?*'@";
string pattern = "[" + Regex.Escape(CHARS_TO_REPLACE).Replace("]", @"\]") + "]";

string input = "hi\" there\\ [i love regex];@";
string result = Regex.Replace(input, pattern, "");
Console.WriteLine(result); 
```

否则，你会得到`["/\\\[]:\|<>\+=;,\?\*'@]`，它没有`]`转义，所以它实际上`["/\\\[]`是一个字符类，然后`:\|<>\+=;,\?\*'@]`是模式的其余部分，除非你的字符串完全匹配那些剩余的字符，否则它不会匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T15:15:11.480

有许多字符`CHARS_TO_REPLACE`对于正则表达式来说是特殊的，需要用斜杠进行转义`\`。

这应该有效：

```
"/\[]:\|<>\+=;,\?\*'@ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T15:15:31.730

为什么不这样做：

```
 private static string Clean(string stringToClean)
    {

        string[] disallowedChars = new string[] {//YOUR CHARS HERE};

        for (int i = 0; i < disallowedChars.Length; i++)
        {
            stringToClean= stringToClean.Replace(disallowedChars[i],""); 
        }

        return stringToClean;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-15T15:32:18.680

单语句 linq 解决方案：

```
private const string CHARS_TO_REPLACE = @"""/\[]:|<>+=;,?*'@";

private string Clean(string stringToClean) {
    return CHARS_TO_REPLACE
        .Aggregate(stringToClean, (str, l) => str.Replace(""+l, ""));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T15:52:15.387

为了知识起见，这里有一个适用于非常大的字符串（甚至是流）的变体。这里没有正则表达式，只需使用 stringbuilder 对每个字符进行循环以存储结果：

```
class Program
{
    private const string CHARS_TO_REPLACE = @"""/\[]:|<>+=;,?*'@";

    static void Main(string[] args)
    {
        var wc = new WebClient();
        var veryLargeString = wc.DownloadString("http://msdn.microsoft.com");

        using (var sr = new StringReader(veryLargeString))
        {
            var sb = new StringBuilder();

            int readVal;
            while ((readVal = sr.Read()) != -1)
            {
                var c = (char)readVal;
                if (!CHARS_TO_REPLACE.Contains(c))
                {
                    sb.Append(c);
                }
            }

            Console.WriteLine(sb.ToString());
        }
    }
} 
```**

# .net - 有没有办法以编程方式更改为 .NET 中的不同会话？

> ID：11053435
> 
> 赞同：0
> 
> 时间：2012-06-15T15:11:45.447
> 
> 标签：.net, session

我有一个大型 .NET 站点，我正在尝试添加来自第三方供应商的一些功能。

我们正在做的一个障碍是我们重定向到第三方站点，用户输入一些信息，第三方站点处理它，并使用我们需要存储的一些信息向我们进行程序化回传一旦第三方网站重定向回我们，会话和访问。

所以基本流程是：

1.  用户点击按钮，表明他们想要利用此第三方优惠
2.  我们重定向到第三方站点并在 URL 行中包含会话 ID 作为查询参数
3.  第三方网站收集信息并授权用户
4.  第三方网站以编程方式将用户信息和其他各种信息作为帖子正文中的数据回发。返回的部分信息是会话 ID。没有返回任何 COOKIE DATA，因此会话 ID 不在 .NET 通常期望的 cookie 中。
5.  我们缓存会话中的信息，并以 HTTP 成功或失败（2xx 或 4xx HTTP 响应）和正文中的一点数据响应第三方站点
6.  第三方网站告诉用户一切正常，用户可以单击按钮返回我们的网站。

很容易......所以我想。但诀窍是第 4 步。没有 cookie = 我所在的会话不是用户在第 6 步中被重定向回的会话。

过去我们通过从返回的数据中获取会话 ID 并重定向来处理类似的情况，但是对于这个供应商，他们需要一个 2xx 或 4xx 返回，而不是重定向会生成的 3xx。确实，返回重定向到程序化帖子……那是行不通的，不是吗？它不是处理重定向的浏览器，无论哪种方式，我们都不希望用户此时返回我们的站点。

我做了一些研究，看看是否有任何其他方式可以以编程方式连接到正确的会话，但我一无所获。希望有什么我错过了。

# javascript - Jquery ui选项卡问题

> ID：11053439
> 
> 赞同：0
> 
> 时间：2012-06-15T15:12:04.563
> 
> 标签：javascript, jquery, jquery-ui

我正在使用`jquery UI tabs`并想知道，是否可以指向一个 div 中不存在的 id

`main tab div`容器，是指

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">tab1</a></li>
        <li><a href="#tabs-2">tab2</a></li>
        <li><a href="#outerdiv">tab3</a></li>
    </ul>
    <div id="tabs-1">
        <p>Tab 1</p>
    </div>
    <div id="tabs-2">
        <p>Tab 2</p>
    </div>
</div>

<div id="outerdiv">
        <p>Tab 3</p>
    </div> 
```

我试过了，但是当我点击**tab3**`div#outer`时内容没有打开。我怎样才能做到这一点？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:14:42.807

我相信默认的 jQuery 插件正在寻找`$(this).find("#outerdiv")`（where `this`= `#tabs`）你的元素不是。

有一些方法可以让这个工作，但我认为最好的办法是`#outerdiv`进入`#tabs`.

如果您坚持保持标记相同，则可以使用如下`load`方法：

```
$("#tabs").tabs({
 load: function (event, ui) {
    switch (ui.index) {
       case 2:
           $("#tabs div").hide();
           $("#outerdiv").show();
           break;
    }
}
}); 
```

但我不知道这将如何影响您的其他选项卡面板。您可能必须将它们全部添加到此开关功能中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:24:26.703

您可以在初始化选项卡之前移动`div`using ：[`.appendTo()`](http://api.jquery.com/appendTo/)

```
$("#outerdiv").appendTo("#tabs"); 
```

[这里的工作示例](http://jsfiddle.net/manseuk/FACC8/)**

# php - 运行 bash 脚本以在 PHP 中创建文件

> ID：11053452
> 
> 赞同：0
> 
> 时间：2012-06-15T15:12:54.523
> 
> 标签：php, bash, exec

除了我[之前的问题](https://stackoverflow.com/questions/11052162/run-bash-command-from-php/11052453#comment14460416_11052453)之外，出现了另一个问题，我决定为它提出一个新问题：

我目前正在调用一个运行 bash 脚本的 php 脚本。php 脚本如下所示：

```
chdir('/home/');
$output = shell_exec('./do.sh');
echo "<pre>$output</pre>"; 
```

do.sh 包含：

```
#! /bin/bash

echo 12;
dd if=/dev/urandom of=test.test bs=1048576 count=2 
```

问题如下：

当我`./do.sh`从终端调用时，一切正常：创建 test.test 并且输出是`12`

但是，当我从我的 php 文件中调用它时，输出也是如此`12`，但**没有**创建任何文件。由于我对 bash 脚本几乎一无所知，所以我不知道为什么会发生这种情况......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:19:44.443

检查是否启用了 PHP 安全模式。您必须在 /etc/php.ini 文件中将其关闭，并且显然要检查文件系统权限。

# menu - IE7 li ul 下拉菜单上的错误

> ID：11053455
> 
> 赞同：1
> 
> 时间：2012-06-15T15:13:02.207
> 
> 标签：menu, drop-down-menu, internet-explorer-7

希望你们中的一个可以帮助我。

我有一个带有两个下拉菜单的基本列表菜单。这在除 IE6 和 IE7 之外的所有浏览器上都可以正常工作。请看我的标记。

```
<nav>
                <ul id="topNav"
                    ><li id="topNavFirst"><a href="../about/about.php" id="aboutNav">About Us</a></li
                    ><li id="topNavSecond"><a href="../people/our-people.php" id="peopleNav">Our People</a
                        ><ul id="subList1"><li><a href="../people/mike-hadfield.php">Mike Hadfield</a></li
                            ><li><a href="../people/karen-sampson.php">Karen Sampson</a></li
                            ><li><a href="../people/milhana-farook.php">Milhana Farook</a></li
                            ><li><a href="../people/kim-crook.php">Kim Crook</a></li
                            ><li><a href="../people/amanda-lynch.php">Amanda Lynch</a></li
                            ><li><a href="../people/gideon-scott.php">Gideon Scott</a></li
                            ><li><a href="../people/paul-fuller.php">Paul Fuller</a></li
                            ><li><a href="../people/peter-chaplain.php">Peter Chaplain</a></li
                            ><li><a href="../people/laura-hutley.php">Laura Hutley</a></li
                        ></ul
                    ></li
                    ><li id="topNavThird"><a href="../services/our-services.php" id="servicesNav">Our Services</a
                        ><ul id="subList2"><li><a href="../services/company-and-commercial.php">Company &amp; Commercial</a></li
                            ><li><a href="../services/employment.php">Employment</a></li
                            ><li><a href="../services/civil-litigation.php">Civil Litigation</a></li
                            ><li><a href="../services/debt-recovery.php">Debt Recovery</a></li
                            ><li><a href="../services/conveyancing.php">Conveyancing</a></li
                            ><li><a href="../services/commercial-property.php">Commerical Property</a></li
                            ><li><a href="../services/wills-and-probate.php">Wills &amp; Probate</a></li
                            ><li><a href="../services/family.php">Matrimonial &amp; Family</a></li
                    ></ul
                    ></li
                    ><li><a href="../news/news.php" id="newsNav">News</a></li
                    ><li><a href="../careers/careers.php" id="careersNav">Careers</a></li
                    ><li><a href="../contact/contact.php" id="contactNav">Contact</a></li
                ></ul><!-- /topNav -->
            </nav>​ 
```

和CSS

```
a {text-decoration:none;}

#topNav {
float:right;
height:30px;
margin:0;
font-size:12px;
}

#topNav li {
display:inline;
float:left;
list-style:none;
color:#666;
border-left: 1px solid #666;
padding: 0 3px 0 3px;
position:relative;
}

#topNav ul a {
white-space:nowrap;
}

#topNav li a:hover {
border-bottom:2px solid #369;
}

#topNavSecond a:hover {
border-bottom:2px solid transparent !important;
}

#topNavFirst {
border-left: 1px solid transparent !important;
}

/*****OUR-PEOPLE DROPDOWN*****/

#topNav ul{
background:#fff;
border:1px solid #666;
border-top:0px solid transparent;
border-bottom:2px solid #666;
list-style:none;
position:absolute;
left:-9999px;
width:100px;
text-align:left;
padding:5px 0 5px 0px;
margin:0 0 0 -4px;
z-index:10;
-webkit-box-shadow: 1px 1px 1px #666;
-moz-box-shadow: 1px 1px 1px #666;
box-shadow: 1px 1px 1px #666;
vertical-align: bottom;
}

#topNav ul li{
display:block;
border-left:0px;
margin-bottom: 0px;
padding:0;
vertical-align: bottom;
}

#topNav ul a{
padding:0 0 0 5px;    
}

#topNav li:hover ul{ 
left:auto;
}

#topNav li:hover a {
color:#369;
}

#topNav li:hover ul a{
text-decoration:none;
color:#666;
}

#topNav li:hover ul li a:hover{
color:#fff;;
width:100%;
border-bottom:0px solid transparent !important;
}

#topNav ul li:hover {
background:#369;
display: block;
}

#topNav ul li a {
display: block;
padding:0 0 0 4px;
}

/************/

/*****OUR-SERVICES DROPDOWN*****/

#topNavThird a:hover {
border-bottom:2px solid transparent !important;
}

#topNavThird ul{ 
/*background:#fff url(images/service-ul-bg.png) no-repeat;*/
width:135px !important;
/*margin-left:120px !important;*/
}​ 
```

脚本

```
jQuery(document).ready(function () {

            $('#subList1').css("display", "none");
        $('#topNavSecond').hover(function () {
            $('#subList1').stop(true, true).fadeIn('400');
        },
        function(){
            $('#subList1').stop(true, true).fadeOut('400');
        });
         $('#subList2').css("display", "none");
        $('#topNavThird').hover(function () {
            $('#subList2').stop(true, true).fadeIn('400');
        },
        function(){
            $('#subList2').stop(true, true).fadeOut('400');
        });
    }); 
```

在这里它工作得很好

[http://jsfiddle.net/BcWd9/6/](http://jsfiddle.net/BcWd9/6/)

这是它在 IE7 中的外观的屏幕截图。

hadfield.andymcnallydesign.co.uk/images/ie7-error.jpg

如您所见，ul 出现在 li 的右侧而不是左侧，它覆盖了顶部列表。我试过删除空白，但没有运气。有任何想法吗？如果你们中的一个可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T06:28:55.780

我有同样的问题。它为我解决的方法是为悬停时显示的 li 元素添加显式宽度

```
#nav li:hover ul {
    display: block;
    position: absolute;
    margin: 0;
    padding: 0; 
    *zoom:1; /*IE7*/
    *width:12em; /*IE7*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:47:18.503

试试这个——不要使用`left`值来隐藏子菜单，`display: none;`而是尝试使用。然后使用`left`和`top`在翻转时定位它们。这似乎在 Windows 和 Chrome/Firefox 的 IE7 中对我有用，尽管我无法在 IE6 中对其进行测试。

```
#topNav ul{
    background:#fff;
    border:1px solid #666;
    border-top:0px solid transparent;
    border-bottom:2px solid #666;
    list-style:none;
    display: none;
    width:100px;
    text-align:left;
    padding:5px 0 5px 0px;
    margin:0 0 0 -4px;
    z-index:10;
    -webkit-box-shadow: 1px 1px 1px #666;
    -moz-box-shadow: 1px 1px 1px #666;
    box-shadow: 1px 1px 1px #666;
    vertical-align: bottom;
}

.
.
.

#topNav li:hover ul{ 
    display: block;
    position: absolute;
    left: 3px;
    top: 14px;
} 
```

这是 jsFiddle 的更新版本：http: [//jsfiddle.net/BcWd9/5/](http://jsfiddle.net/BcWd9/5/)

# linux - cPanel/WHM IP Ban - 如何解禁 IP

> ID：11053458
> 
> 赞同：2
> 
> 时间：2012-06-15T15:13:11.490
> 
> 标签：linux, cpanel, whm

我们在我们的一个站点上使用 htaccess 基本身份验证。我们的一位客户尝试访问该站点并多次登录失败。现在访问我们的网站时，他们只会收到“无法显示网页”错误。

我相信我以前有过这种情况，而且我相信在经历了如此多的失败之后，IP 被禁止了。我不确定在 WHM/cPanel 中去哪里解禁它们 - 感谢任何帮助！

谢谢

罗兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:16:27.207

我不知道在 CPanel/WHM 中有任何方法可以做到这一点。相反，您需要对服务器的 root 访问权限，并且需要 SSH。可能是防火墙阻止了用户。

您需要从防火墙禁止 IP 列表中删除 IP 并重新启动防火墙。或者，您可以随后将用户 IP 列入白名单以防止将来出现问题。

编辑：看起来你毕竟可以在 WHM 中做到这一点。请参阅[http://www.anysitesupport.com/cpanel-add-firewall-exception/](http://www.anysitesupport.com/cpanel-add-firewall-exception/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T14:55:21.433

我在电子邮件服务器迁移后被禁止的客户 IP 有这件事。由于部分邮箱账号密码重置导致用户无法使用pop3、imap登录，甚至webmail也受到影响。

该禁令在 Cpanel 中针对 cPHulk 实施，以防止暴力尝试。

我的解决方案是暂时禁用 cPHulk 蛮力保护，直到所有客户都设置了正确的密码。

我希望这可以帮助你。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T08:28:22.540

第一次需要更改您的 isp 然后登录 whm 并搜索 cPHulk Brute Force Protection 和白名单管理并添加您的第一个 IP 地址并单击添加

# cocoa - 更改 Cocoa 绑定中的空占位符？

> ID：11053459
> 
> 赞同：3
> 
> 时间：2012-06-15T15:13:17.580
> 
> 标签：cocoa, interface-builder, cocoa-bindings

有没有办法改变（为了本地化）Cocoa 绑定中的空占位符？

绑定是在 Interface Builder 中为弹出按钮设置的。需要在 IB 中设置的绑定的双向性质，因此以编程方式执行此操作并不是很吸引人。

我知道处理 nib 文件本地化的标准方法是为每种语言制作一个，但由于这是整个 nib 文件在语言版本之间的唯一区别，因此单个字符串似乎有点过分。

如果有办法修改在 IB 中创建的绑定，我正在考虑在文件所有者的`awakeFromNib`方法中进行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:40:48.557

在您绑定的控制器对象中，例如您的 NSDocument 类，覆盖`-bind:toObject:withKeyPath:options:`. 这需要是该方法调用的目标 - 您在**Bind to:**下选择的对象：在 nib 中。

如果你绑定到一个 NSObjectController 或 NSArrayController，你需要一个子类。

该方法应该重写字典并调用 super，用您的本地化字符串`options`替换值。`NSNullPlaceholderBindingOption`

我会省略 nib 中的 null 占位符和代码中的键值，尽管您当然可以获取该键的传入值并进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T22:19:59.027

另一个答案似乎不再起作用，所以我想出了一个稍微不同的解决方案，它修改现有绑定以使用给定的空占位符字符串：

我的视图控制器中有这个方法：

```
- (void)rebind:(NSString *)binding of:(id)object withNullPlaceholder:(NSString *)nullPlaceholder {
    // Possibly a bad idea, but Xcode doesn't localize the null placeholder so we have do it manually.
    NSDictionary *bindingInfo = [object infoForBinding:binding];

    id bindObject = bindingInfo[NSObservedObjectKey];
    NSString *keyPath = bindingInfo[NSObservedKeyPathKey];
    NSMutableDictionary *options = [bindingInfo[NSOptionsKey] mutableCopy];
    options[NSNullPlaceholderBindingOption] = nullPlaceholder;

    [object unbind:binding];
    [object bind:binding toObject:bindObject withKeyPath:keyPath options:options];
} 
```

我`awakeFromNib`为所有需要它的绑定调用它并传入本地化字符串：

```
- (void)awakeFromNib {
    // Hacky hack hack: Xcode is stupid and doesn't localize the null placeholders so we have to do it.
    [self rebind:@"contentValues" of:self.fooPopup withNullPlaceholder:NSLocalizedString(@"No foos available", @"foo popup null placeholder")];
    [self rebind:@"contentValues" of:self.barPopup withNullPlaceholder:NSLocalizedString(@"No bars available", @"bar popup null placeholder")];
} 
```

然后，本地化的字符串通常作为`Localizable.strings`文件的一部分进行本地化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-13T21:33:58.953

我能够更改`NSPopUpButton`使用绑定的空占位符字符串（即“无值”）。

具体来说，我想要一个弹出按钮菜单项，其标题不是“无值”，表示对象为`nil`. 选择空占位符菜单项时，应将空的`NSString`或保存在用户默认值中。`nil`

**NSPopUpButton 绑定：**

*   **内容**绑定到`NSArrayController.arrangedObjects`

*   **内容对象**被绑定 `NSArrayController.arrangedObjects.exampleContentObject`（`NSString`），这是菜单项所代表的对象，`Selected Object`是

*   **内容值**绑定到`NSArrayController.arrangedObjects.exampleContentValue`( `NSString`)，这是弹出按钮的菜单项中显示的标题。

*   **弹出按钮的选定对象**与和( )绑定到`NSSharedUserDefaultsController.values.ExampleUserDefaultsKey`的对象类型相同。该对象应与绑定中指定的 NSUserDefault 键的对象类型匹配。当从弹出按钮中选择一个项目时，它会将**选定对象**保存为用户默认值。`Content Objects``Selected Object``NSString`

 **要将空占位符字符串从“无值”更改为其他内容，请 subclass`NSPopUpButton`和 override `-[NSPopUpButton bind:toObject:withKeyPath:options:]`。

* * *

```
@interface CustomPopUpButton : NSPopUpButton
@end

@implementation CustomPopUpButton
- (void)bind:(NSString *)binding toObject:(id)observable withKeyPath:(NSString *)keyPath options:(NSDictionary<NSString *,id> *)options {
    NSMutableDictionary *mutableOptions = options ? [options mutableCopy] : [NSMutableDictionary dictionaryWithCapacity:1];
    mutableOptions[NSInsertsNullPlaceholderBindingOption] = @YES;
    mutableOptions[NSNullPlaceholderBindingOption] = @"Custom Null Placeholder Text";
    [super bind:binding toObject:observable withKeyPath:keyPath options:[mutableOptions copy]];
}
@end 
```

* * *

最后，在 Xcode Identity Inspector 中的`NSPopUpButton`Interface Builder 和**Custom Class**下选择你的类到 `NSPopUpButton`子类。**

# php - 如何以编程方式获取 Drupal 模块名称？

> ID：11053461
> 
> 赞同：1
> 
> 时间：2012-06-15T15:13:27.847
> 
> 标签：php, drupal, drupal-6

我正在开发自己的模块。我意识到我经常需要在不同的地方手动输入我的模块名称。最流行的用法是[`drupal_get_path($type, $name)`](https://api.drupal.org/api/drupal/includes%21common.inc/function/drupal_get_path/7)函数（我的代码中有超过 10 个）。`$name`主题或模块名称在哪里。在此期间，我需要更改我的模块名称 3 次。正如您所猜测的那样，我还需要更改项目中硬编码的所有模块名称。所以我认为有一些方便的功能来自动获取这个名字会很好。

如何以编程方式获取机器模块名称？

例如，如果您的模块位于以下目录中..

```
sites/all/modules/my_module/ 
```

..那么你可以这样抓住它

```
drupal_get_current_module_name(); // return my_module 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:31:54.283

通常，您应该按照惯例知道 - 如果您有：`sites/all/modules/my_module/`那么模块的机器名称应该与文件夹名称匹配 - `my_module`。

几乎所有贡献的模块都遵循这个约定，你也应该这样做。

您的 .info 和 .module 文件可能与文件夹的名称不匹配，但这是不正确的。

如果您已经在模块中执行代码，那么您应该已经通过正在编辑的文件的名称知道模块的机器名称 - 除非您正在尝试做一些我不理解的事情。

编辑：由于我们已经确定您只是在尝试调用模块的主题功能，因此您实际上并不需要知道名称。

如果你有：

```
/** Implements theme_table **/
function my_really_long_module_name_table() {} 
```

您的函数可能会像这样调用：

```
theme('table'); 
```

不仅如此，主题引擎将根据实现它们的内容来确定调用哪些主题函数。

听起来您可能想阅读 Drupal 主题系统的一些基础知识。这是学习 Drupal 6 主题层的良好开端：http: [//drupal.org/node/165706](http://drupal.org/node/165706)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:14:57.627

我想出这样的事情：

```
function get_current_module_name() {
    return array_shift(explode('.', end(explode(DIRECTORY_SEPARATOR, __FILE__))));
} 
```

但不知道不是最好的方法..

更新：我现在看到最好使用 basename

```
$name = basename(__FILE__, '.module'); 
```

更新2：我认为如果整个模块都需要这样做，那么可以通过模块开头定义的常量访问它，例如：

```
define('MODULE_NAME', basename(__FILE__, '.module')); 
```

然后你可以像这样在你的所有函数中一直使用：

```
drupal_get_path('module', MODULE_NAME); 
```

# c# - 客户端套接字上的 C# 客户端-服务器实现错误“无法建立连接...”

> ID：11053464
> 
> 赞同：0
> 
> 时间：2012-06-15T15:13:32.393
> 
> 标签：c#, sockets

我正在尝试启动我的客户端，但出现错误。服务器已经在同一台计算机上运行。所以我在 GetHostEntry 中使用“localhost”：

```
 IPHostEntry ipHostInfo = System.Net.Dns.GetHostEntry("localhost");
 IPAddress ipAddress = ipHostInfo.AddressList[0];
 IPEndPoint remoteEP = new IPEndPoint(ipAddress, Port);

Sock = new Socket(remoteEP.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
Sock.BeginConnect(remoteEP, new AsyncCallback(ConnectCallback), Sock); 
```

但我有这个“无法建立连接，因为目标机器主动拒绝它”：

```
System.Net.Sockets.SocketException (0x80004005): No connection could be made because the target machine actively refused it [::1]:7777
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at NotifierClient.AsynchronousClient.ConnectCallback(IAsyncResult ar) in *** :line 156 
```

第 156 行是

```
client.EndConnect(ar); 
```

是什么原因？可能是因为 ipHostInfo.AddressList[0] 是 IPv6 吗？那我怎么能接受 IPv4 地址呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:16:48.453

您可以使用 IPAddress 类的[AddressFamily](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.addressfamily.aspx)属性来判断地址是 IPv4 还是 IPv6。

这样，您可以遍历返回的 IPAddress-es 列表并选择第一个 IPv4 地址：

```
IPHostEntry ipHostInfo = System.Net.Dns.GetHostEntry("localhost");    

IPAddress ipAddress = null;
foreach(var addr in ipHostInfo.AddressList)
{
    if(addr.AddressFamily == AddressFamily.InterNetwork)        // this is IPv4
    {
         ipAddress = addr;
         break;
    }
}

// at this point, ipAddress is either going to be set to the first IPv4 address
//  or it is going to be null if no IPv4 address was found in the list
if(ipAddress == null)
    throw new Exception("Error finding an IPv4 address for localhost");

IPEndPoint remoteEP = new IPEndPoint(ipAddress, Port);

Sock = new Socket(remoteEP.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
Sock.BeginConnect(remoteEP, new AsyncCallback(ConnectCallback), Sock); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T15:23:50.607

我用于 IPV4 的本地主机：

```
IPHostEntry ipHostInfo = Dns.GetHostEntry("localhost");
IPAddress ipAddress = ipHostInfo.AddressList[1]; 
```

# jquery - 在下拉选项文本中查找所有 html 字符并通过 jQuery 替换它们

> ID：11053467
> 
> 赞同：0
> 
> 时间：2012-06-15T15:13:40.450
> 
> 标签：jquery, html

我有一个下拉菜单，可以从数据库列中提取文本。数据库列可以包括 HTML 标记。在下拉列表中，我显然不需要在文本中使用它。我正在研究一些 jquery，它部分完成了我正在寻找的东西。但是，它似乎只是替换了每个字符的第一个实例

```
$('select option').each(function() { 
    this.text = this.text.replace('&nbsp;', ' ');
    this.text = this.text.replace('<div>', '' );
    this.text = this.text.replace('</div>', '' );
}); 
```

这是下拉菜单的 HTML：

```
<select name="ctl00$SubPageBody$ClassList" id="ctl00_SubPageBody_ClassList">
<option value="196">Four Week Series: July 19, 2012, 11:00am-12:00pm&<div>July 26, 2012, 11:00am-12:00pm&nbsp;</div><div>August 2, 2012, 11:00am-12:00pm</div><div>August 9, 2012, 11:00am-12:00pm</div></option>

</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:16:57.010

`<option>`不知道为什么在一个元素中会有 HTML ，但是......

[jsFiddle](http://jsfiddle.net/hfH5S/)

```
$('select option').each(function() { 
    this.text = $(this).text();       
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:22:10.087

使用正则表达式替换所有实例并做任何你想做的事情：

[http://davidwalsh.name/javascript-replace](http://davidwalsh.name/javascript-replace)

例如，这将替换 'hello' 和/或 'wo'：

```
var s = 'hello world hello';
var s = s.replace(/hello|wo/g, ''); 
```

请记住，您不能使用正则表达式解析 HTML :)

[RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:22:47.597

我同意在服务器端这样做会更合适。

如果你必须用 Javascript 来做，你可以使用正则表达式：

```
$(this).text().replace(/REPLACEME/g, 'repclacement'); 
```

注意 RegEx 末尾的 g：它是全局标志。

您还需要转义一些特殊字符，例如 /。</div> 也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:23:58.903

您可以使用正则表达式中的 /g 选项来替换一行中的所有实例。

```
this.text = this.text.replace(/<\/div>/g, '' ); 
```

请注意，当您想使用正则表达式查找时， / 会替换 '。

# android - Android 应用程序被列为与 Sony Xperia S 兼容但仍从 google play 过滤

> ID：11053474
> 
> 赞同：0
> 
> 时间：2012-06-15T15:13:57.410
> 
> 标签：android, google-play

我发布了一个 Android 应用程序，一些用户抱怨它被列为与 Sony Xperia S 不兼容。根据开发者控制台，Xperia S (LT26i) 被列为兼容。有谁知道为什么该应用程序仍被 Google Play 过滤掉的任何原因？

我见过有人报告大 apk 文件存在问题。这个应用程序大小约为 20Mb，最大文件为 14Mb。相当多，但不足以引起我认为的问题......

这是 aapt 转储标记的输出：

```
package: name='no.bouvet.nrkut' versionCode='4' versionName='1.0'
sdkVersion:'4'
targetSdkVersion:'13'
uses-permission:'android.permission.ACCESS_FINE_LOCATION'
uses-permission:'android.permission.ACCESS_COARSE_LOCATION'
uses-permission:'android.permission.ACCESS_WIFI_STATE'
uses-permission:'android.permission.ACCESS_NETWORK_STATE'
uses-permission:'android.permission.INTERNET'
uses-permission:'android.permission.WRITE_EXTERNAL_STORAGE'
application-label:'UT.no'
application-icon-120:'res/drawable-ldpi/utno_launcher.png'
application-icon-160:'res/drawable-mdpi/utno_launcher.png'
application-icon-240:'res/drawable-hdpi/utno_launcher.png'
application-icon-320:'res/drawable-xhdpi/utno_launcher.png'
application: label='UT.no' icon='res/drawable-mdpi/utno_launcher.png'
launchable-activity: name='no.bouvet.nrkut.MainActivity'  label='UT.no' icon=''
uses-feature:'android.hardware.location'
uses-feature:'android.hardware.location.gps'
uses-feature:'android.hardware.location.network'
uses-feature:'android.hardware.wifi'
uses-feature:'android.hardware.touchscreen'
uses-feature:'android.hardware.screen.portrait'
main
other-activities
search
supports-screens: 'small' 'normal' 'large' 'xlarge'
supports-any-density: 'true'
locales: '--_--'
densities: '120' '160' '240' '320' 
```

这是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?> 
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="no.bouvet.nrkut"
          android:installLocation="auto"
          android:versionCode="4"
          android:versionName="1.0">

    <uses-sdk
            android:minSdkVersion="4"
            android:targetSdkVersion="13"/>

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <instrumentation
            android:name="android.test.InstrumentationTestRunner"
            android:functionalTest="true"
            android:handleProfiling="false"
            android:label="tests"
            android:targetPackage="no.bouvet.nrkut">
    </instrumentation>

    <application
            android:name="MainApplication"
            android:icon="@drawable/utno_launcher"
            android:label="@string/app_name"
            android:theme="@style/Theme.Sherlock.Light.DarkActionBar">
        <activity
                android:name=".MainActivity"
                android:configChanges="orientation|keyboardHidden"
                android:label="@string/app_name"
                android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>

                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <activity android:name=".activity.SearchActivity">
            <intent-filter>
                <action android:name="android.intent.action.SEARCH"/>
            </intent-filter>

            <meta-data
                    android:name="android.app.searchable"
                    android:resource="@xml/searchable"/>
        </activity>
        <activity android:name=".activity.NearbyActivity"/>
        <activity android:name=".activity.MapActivity"/>
        <activity android:name=".activity.AboutActivity"/>
        <activity android:name=".activity.ProfileActivity"/>
        <activity android:name=".activity.ToplistsActivity"/>
        <activity android:name=".activity.CoresiteActivity"/>
        <activity android:name=".activity.FavouritesActivity"/>

        <meta-data
                android:name="android.app.default_searchable"
                android:value=".activity.SearchableActivity"/>
        <uses-library android:name="android.test.runner"/>
    </application>

</manifest> 
```

# html - css替代js解决方案，html顺序错误使用float

> ID：11053480
> 
> 赞同：0
> 
> 时间：2012-06-15T15:14:33.773
> 
> 标签：html, css

我的框架以错误的顺序为我的布局吐出 html。我可以更改它，但对于其他媒体，顺序是正确的。目前我有一行简单的 javascript 来传输 html，但我想知道是否有 css 替代品。

这是简单的例子。第一个例子是它应该如何工作，第二个是我现在拥有的。我想知道是否可以在第二个示例中完成相同的布局，即不使用 javascript 的所需版本

[http://jsfiddle.net/SPgyA/1/](http://jsfiddle.net/SPgyA/1/)

```
<div id="wrap">
    <div id="right" class="somediv">
        div right, dont know height in advance
    </div>
    <div id="main">
        main text, dont know height in advance<br />   
        main text, dont know height in advance<br />   
        main text, dont know height in advance<br />   
    </div>
</div>

<div id="desired_wrap">
      <div id="desired_main">
        main text, dont know height in advance<br />   
        main text, dont know height in advance<br />   
        main text, dont know height in advance<br />   
    </div>
    <div id="desired_right" class="somediv">
        div right, dont know height in advance
    </div>
</div> 
```

​</p>

的JavaScript：

```
$("#desired_right").prependTo("#desired_wrap"); 
```

的CSS

```
#wrap,#desired_wrap{
    width:200px;
    margin:10px;
    padding:10px;
    border:1px dashed grey;
}
#right{
    float:right;
}

#desired_right{
    float:right;
}

.somediv{
    color:red;
    width:100px;
    background-color:#eee;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:26:30.103

通过添加一个小的附加 html 属性* *，只需使用 CSS 即可在不更改 HTML 顺序*的情况下处理此问题：

**在我看来，这是完成这项工作的唯一可能方式，因为 w3c 指定的浮动行为在不添加至少一个 html 属性的情况下无法以这种方式工作。*

## HTML

```
<div id="desired_wrap">
    <div id="desired_main" data-placeholder="my box text">
        main text, dont know height in advance<br />   
        main text, dont know height in advance<br />   
        main text, dont know height in advance<br />   
    </div>
    <div id="desired_right" class="somediv">
        my box text
    </div>
</div> 
```

现在，我们通过 , 放置文本`data-placeholder`，[`:before`](http://reference.sitepoint.com/css/pseudoelement-before)然后`#desired_main`通过[`content`](http://reference.sitepoint.com/css/content)css 属性。

这样，生成元素的高度将与 from 的高度完全相同`#desired_right`，因为它们包含相同的文本。

## CSS

```
#desired_wrap{
    width:200px;
    padding:10px;
    position: relative;
}

.somediv {
    width: 100px;
}

#desired_main:before {
    content: attr(data-placeholder);
    float: right;
    width: 100px;
}​ 
```

将绝对定位`#desired_right`到右上方，将模拟一个向右浮动，就像在您的第一个工作示例中一样：

## CSS

```
#desired_right{
    position: absolute;
    top: 10px;
    right: 10px;
} 
```

### 适用于：

*   互联网浏览器 8+
*   火狐 3.6
*   铬 17+
*   野生动物园 5+

**现场演示**：http: [//jsfiddle.net/SPgyA/3/](http://jsfiddle.net/SPgyA/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:33:21.713

如果要将内部 .somediv 与右上角对齐，则需要添加 position:relative 和 absolute

```
#wrap,#desired_wrap{
    position:relative;
}

.somediv{
    position:absolute;
    top:0px;
    right:0px;
} 
```

编辑：

刚刚意识到，随着这种变化，文本不再在 div 周围流动......

# maven - Maven 无法从远程 nexus 存储库中找到依赖项

> ID：11053482
> 
> 赞同：2
> 
> 时间：2012-06-15T15:14:36.473
> 
> 标签：maven, jar, repository, nexus, sonatype

我今天不得不从旧的 Nexus 服务器迁移到 Nexus OSS v2.0.4。从早上开始，我一直面临着奇怪的问题。首先我安装了nexus并启动它，我只能从服务器机器上浏览它一次，然后就不能再浏览它了。但后来我可以从网络中的所有其他机器访问服务器（使用[http://remote.hostname:8081/nexus](http://remote.hostname:8081/nexus)）。

然后我把旧服务器机器上的存储目录的所有内容都复制下来，一一粘贴到新机器上。（对于每个存储库，在新服务器中创建一个存储库并将其`local storage Location`作为我从旧服务器复制的目录）。现在我可以看到我拥有的所有罐子，但是当我尝试从 maven 使用它们时，我无法这样做。意思是，如果我尝试运行一个 maven 项目，那么它会说找不到依赖项。我可以看到它正在新服务器中的位置寻找 jar，但无法下载它。知道为什么它无法下载罐子吗？

另外我仍然无法从服务器机器的浏览器访问新的nexus服务器，为什么会这样？任何建议将不胜感激。谢谢。

====更新====

当我摆弄 maven 时，我发现我能够从公共存储库访问依赖项，但不能从一个特定的存储库访问（到目前为止我只知道一个）。这可能是因为某种原因吗？我怀疑迁移的一些错误问题，这是从一台服务器迁移到另一台服务器的正确方法吗？

此外，所有代理存储库的状态为`In service-Remote automatically blocked and unavailable`. 这是否与我的问题有关？

===Settings.xml===

```
<settings>

  <localRepository>${env.TEST_HOME}\maven.repository</localRepository>

<proxies>
<proxy>
  <id>Compproxy</id>
  <active>true</active>
  <protocol>http</protocol>
  <username></username>
  <password></password>
  <host>proxy.abc.com</host>
  <port>81</port>
  <nonProxyHosts>*.abc.com|rick*</nonProxyHosts>
</proxy>
</proxies>
    <servers>
<server>
    <id>MyRep</id>
  <username>admin</username>
  <password>admin123</password>
</server>
</servers>
<mirrors>
<mirror>
  <id>central mirror</id>
  <url>http://rick1.abc.com:8081/nexus/content/groups/public</url>
  <mirrorOf>central</mirrorOf>
 </mirror>
 <mirror>
  <id>opensymphony mirror</id>
  <url>http://rick1.abc.com:8081/nexus/content/groups/public</url>
  <mirrorOf>opensymphony</mirrorOf>
</mirror>
</mirrors>
<profiles>
<profile>
  <id>actProf</id>
  <repositories>
    <repository>
        <id>public</id>
        <url>http://rick1:8081/nexus/content/groups/public</url>
    </repository>
    <repository>
        <id>MyRep</id>
        <url>http://rick1:8081/nexus/content/repositories/MyRep</url>
    </repository>
  </repositories>
  <properties>
  </properties>        
</profile>
</profiles>
<activeProfiles>
<activeProfile>actProf</activeProfile>
</activeProfiles>
</settings> 
```

===pom.xml===

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.abc.test</groupId>
  <artifactId>testgui_start</artifactId>
  <packaging>pom</packaging>
  <version>1</version>
  <name>Start POM Test GUI</name>
  <url>www.abc.com</url>
  <build>
<plugins>
</plugins>
</build>
  <dependencies>
  <dependency>
    <groupId>com.abc.test</groupId>
    <artifactId>testgui</artifactId>
    <version>${version}</version>
    <scope>runtime</scope>
  </dependency>
</dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:05:26.917

您必须做的一件事是将您创建的所有存储库添加到公共组，以便它们可供 Maven 使用，前提是您使用仅引用公共组的标准 settings.xml。

此外，我会停止并重新启动服务器，并仔细查看日志并报告更多信息。它可能被设置为侦听特定端口等。还请记住，当我们迁移到 2.0 时，启动脚本发生了变化，因此您必须替换您放置在 /etc/init.d/ 中的旧脚本。

# wordpress - 发布时让 w ordpress 添加到现有的外部 RSS 提要

> ID：11053484
> 
> 赞同：1
> 
> 时间：2012-06-15T15:14:37.330
> 
> 标签：wordpress, rss, publish

我在根级别的 XML 文件中有一个 RSS 提要。我有一个 php 脚本，可以在我想添加到 xml 时添加到它。有没有办法让 wordpress 在每次发布博客文章时都添加到该 RSS 提要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:30:51.293

是的，只要您可以解析 XML 然后将节点附加到它就没有问题（XML 文档并不像执行`file_put_contents()`附加到文档那样简单）。

一种方法是[挂钩](http://codex.wordpress.org/Function_Reference/add_action)[`edit_post`](http://adambrown.info/p/wp_hooks/hook/edit_post)操作并在回调函数中进行更新。

# objective-c - 如何用另一个视图控制器 (Kal) 替换 TabBar 应用程序中的 FirstViewController？

> ID：11053485
> 
> 赞同：2
> 
> 时间：2012-06-15T15:14:37.253
> 
> 标签：objective-c, xcode4

我使用 XCode 4 创建了一个空的 iPad TabBar 应用程序，*没有*情节提要。我将该应用程序放在工作区中。然后，我将 Kal 源（从 iPad Juice 构建中获得）作为单独的项目添加到工作区。最初的构建是干净的。

然后我转到 Kal 示例 (NativeKal) 并添加了 EventKitDataSource.h 和 .m，以及 NativeCalAppDelegate.h 和 .m。（下图显示了示例项目中有哪些文件）

![在此处输入图像描述](../Images/40454e3188c2698e531a28b3900366a4.png)

这是 NativeCalAppDelegate.h 文件中的代码：

![在此处输入图像描述](../Images/5e41fd3b1663016f0002849511895a9f.png)

我尝试将第一个 TabBar UIView 控制器设置为“KalViewController”，就像我在使用 Storyboards 时通常所做的那样，但它没有列在类的下拉列表中。

问题是：如何让 NativeCal 示例视图控制器在我的 TabBar 应用程序中替换 FirstViewController？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:37:35.863

添加为答案的评论。

我的建议是切换到情节提要，在其中执行 UITabBarControllers 会容易得多。您可以通过创建一个新的故事板并将所有内容复制并粘贴到其中然后控制从 UITabBarController 拖动到要链接到选项卡栏控制器的 UIViewControllers 来做到这一点，剩下的一切都是之后也一样。在情节提要中，您可以设置要加载的第一个视图控制器，因此如果您需要它是 KalController，那么您可以在设置 UITabBarController 时设置它。您也可以在代码中进行设置。我发现故事板是 xcode 的一个很棒的新功能，UITabBarCotrollers 在它们中比在 .nib 文件中要容易得多，我永远无法让它们工作。

希望这有帮助。

# ios - 如何手动设置 titleForHeaderInSection

> ID：11053489
> 
> 赞同：1
> 
> 时间：2012-06-15T15:14:51.483
> 
> 标签：ios, xcode, uitableview, plist, title

我将数据从 plist 加载到 uitableview，如下所示：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *path = [[documentPaths lastObject] stringByAppendingPathComponent:@"data.plist"];

    NSMutableDictionary *resultDic = [[NSMutableDictionary alloc] init];
    NSMutableArray *resultArray = [[NSMutableArray alloc] init];
    NSDictionary *myDict = [NSDictionary dictionaryWithContentsOfFile:path];

    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"purpleKey"])
    {
        NSArray *purple = [myDict objectForKey:@"Purple"];
        [resultArray addObject:@"Purple"];
        [resultDic setValue:purple forKey:@"Purple"];
    }
    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"orangeKey"])
    {
        NSArray *orange = [myDict objectForKey:@"Orange"];
        [resultArray addObject:@"Orange"];
        [resultDic setValue:orange forKey:@"Orange"];
    }

    self.tableData = resultDic;
    self.sectionsTitle = resultArray;

} 
```

titleForHeaderInSection

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
   return [sectionsTitle objectAtIndex:section];
} 
```

我的 plist 结构

![在此处输入图像描述](../Images/85b6ee22590e48ea8b5d0bfe7274c90d.png)

**我的问题是：如何手动设置紫色标题和橙色标题的标题而不更改 plist 文件中的名称？像这样：紫色 = 1 类，橙色 = 2 类**

编辑

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
   return sectionsTitle.count;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
   return [sectionsTitle objectAtIndex:section];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    int num = [[tableData objectForKey:[sectionsTitle objectAtIndex:section]] count];

    if (num > 3) {
        num = 3;
    }

    return num;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *dict = [[tableData objectForKey:[sectionsTitle objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];

    cell.textLabel.numberOfLines = 1; 
    cell.textLabel.font = [UIFont systemFontOfSize:11]; 
    cell.textLabel.text = [NSString stringWithFormat:@"%@ - %@", [dict objectForKey:@"Name"], [dict objectForKey:@"Address"]];

    if ([dict objectForKey:@"Address"] == (NULL)) {
        //do nothing
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:25:30.223

从您的代码的外观来看，部分标题来自`resultsArray`，您正在使用常量字符串 Orange 和 Purple 填充它们。

您可以将不同的常量字符串放入该数组中，除非我遗漏了什么。

所以，而不是

```
[resultArray addObject:@"Orange"]; 
```

利用

```
[resultArray addObject:@"Category 1"]; 
```

# c# - 如何将图形发送到另一个表单

> ID：11053495
> 
> 赞同：0
> 
> 时间：2012-06-15T15:15:10.997
> 
> 标签：c#, graphics

我有 2 个表格，在这 2 个表格中我有两个板。

在第一种形式中，用户将一些对象放在板上。然后它点击下一步。我想将精确的图形发送到另一种形式，这样我就可以在第二种形式中绘制相同的东西。

我尝试使用 Graphics.Save() 和 Restore() 功能，但没有奏效。有什么建议么 ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:39:18.373

您可能需要在第二个表单上调用 Invalidate() 以使图片在您通过后出现？如果您最小化然后最大化您的第二个表单并且图像出现，那么这将是问题。

# wpf - 如何在 App.xaml 中将带有图标的 MenuItems 定义为模板

> ID：11053497
> 
> 赞同：2
> 
> 时间：2012-06-15T15:15:13.820
> 
> 标签：wpf, xaml

在我的应用程序中，我有很多上下文菜单。它们中的大多数包含许多标准条目，例如用于剪切、复制和粘贴命令的菜单项。每个菜单都有一个附加图标。

如何为应用程序范围内可用的每种类型的 MenuItem 定义样式？以下 xaml 主要是我要查找的内容，但是图像的声明无效（如果冒险在多个位置同时使用样式的实例，则不会显示图像）。

```
<Style x:Key="CutMenuItem_Style" TargetType="{x:Type MenuItem}" >
     <Setter Property="Command" Value="Cut"/>
     <Setter Property="Header" Value="Cut"/>
     <Setter Property="Icon" >
          <Setter.Value>
              <Image Source="/image/cut_16_16.png" Stretch="None" />
            </Setter.Value>
     </Setter>                                            
</Style> 
```

你怎么做到这一点？您是否为每种菜单类型声明了一个 ControlTemplate？

*请注意：我理解为什么上述 xaml 不能按预期工作。我对一种替代且可靠的方法感兴趣，可以按照我对上述代码的预期进行操作。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:45:53.890

我不确定这是否可行（尚未测试），但我对您可能会遇到这样的事情很感兴趣：

```
class MyMenuItem
{
    public ICommand Command { get; set; }
    public string Header { get; set; }
    public ImageSource ImageSource { get; set; }
}

var cutMenuItem = new MyMenuItem()
{
    Command = ...,
    Header = "Cut",
    ImageSource = ...
}; 
```

然后使用 DataTemplates：

```
<DataTemplate DataType="{x:Type local:MyMenuItem}">
    <MenuItem Command="{Binding Command}" Header="{Binding Header}" 
              Icon="{Binding ImageSource}" />
    </MenuItem>
</DataTemplate> 
```

然后是你的菜单：

```
<Menu ItemsSource="{Binding ListOfMyMenuItems}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:20:17.590

一种可能性是使用`IValueConverter`转换`RoutedCommands`为的 a `Images`。然后`IValueConverter`可以在全局样式中使用。

XAML 如下所示：

```
<Style x:Key="MenuItemBase_Style" TargetType="{x:Type MenuItem}">
    <Setter Property="Icon" Value="{Binding Command,Converter={StaticResource CommandImage_ValueConverter},RelativeSource={RelativeSource Mode=Self}}"/>
</Style>

<Style x:Key="CutMenuItem_Style" BasedOn="{StaticResource MenuItemBase_Style}"  TargetType="{x:Type MenuItem}" >
    <Setter Property="Command" Value="Cut"/>
</Style>
<Style x:Key="CopyMenuItem_Style" BasedOn="{StaticResource MenuItemBase_Style}"  TargetType="{x:Type MenuItem}" >
    <Setter Property="Command" Value="Copy"/>
</Style>
<Style x:Key="AnotherMenuItem_Style" ... /> 
```

**IValueConverter**很简单，但也可以针对其他事物进行扩展。我已经这样写了，您可以提供 a`Style`作为参数。如果您想操作返回的`Image`.

```
public class CommandImageValueConverter : IValueConverter{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
        if (value == null) return null;
        var cmd = value as RoutedCommand;
        if (null != cmd) {                
            var uri = new Uri("/YourComponent;component/Image/" + cmd.Name + "_16_16.png", UriKind.Relative);                
            return new Image() { Stretch = Stretch.None ,Source=Load(uri),Style=parameter as Style};                
        }            
        throw new NotImplementedException("Conversion from " + value.GetType().Name + " is currently not supported");
    }

    public static ImageSource Load(Uri uri) {
        BitmapImage bi = new BitmapImage();
        bi.BeginInit();
        bi.UriSource = uri;
        bi.EndInit();
        return bi;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
        throw new NotImplementedException();
    }
} 
```

`IValueConverter`也必须**声明**一次：

```
<yourNamespace:CommandImageValueConverter x:Key="CommandImage_ValueConverter"/> 
```

希望这对其他人有帮助。

# yii - 为什么即使条件返回 false，这行代码也会被执行？

> ID：11053499
> 
> 赞同：0
> 
> 时间：2012-06-15T15:15:24.913
> 
> 标签：yii

也许有人可以在这里帮助我。我有这些代码行：

```
1 $(document).ready(function(){
2 if('<?php echo Yii::app()->controller->action->id?>' == 'update'){
3   if('<?php echo Yii::app()->user->id;?>' != '<?php echo $model->createUser->id; ?>'){ 
```

我越来越，

> 试图访问非对象的属性（第 3 行）。

这是有道理的，因为我在这里没有具有该属性的对象。

问题是第二个`if`正在运行，即使第一个`if`条件返回 FALSE。

`Yii::app()->controller->action->id`不等于“更新”，所以第二个 IF 永远不应该执行。所以，我不明白。

谁能澄清一下这里发生了什么？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:20:57.793

PHP 将始终评估，因为这是发生在服务器端，而 Javascript 将在客户端执行。当代码到达浏览器时，PHP 已经全部被评估和替换，只剩下 Javascript。换句话说，您视图中的所有 PHP 都将被评估（可能由 Apache 中的 PHP 解释器），并且在代码在浏览器中运行之前，Javascript 无关紧要。

您需要将服务器端代码和客户端代码分开。

您的代码在服务器端失败，因为所有 PHP 都必须评估以呈现 Javascript，在这种情况下，第三个 PHP 块：

```
<? if(isset($model)) echo $model->createUser->id; ?> 
```

看起来当 PHP 运行时， $model 已设置，只是没有设置为预期的对象。

# javascript - 如何在“onmouseover”功能中更改 div 子元素的可见性

> ID：11053503
> 
> 赞同：0
> 
> 时间：2012-06-15T15:15:40.310
> 
> 标签：javascript, html, javascript-events

在我的网站中，当用户将鼠标移到 div 上时，我想更改它的一些样式属性。我还想隐藏/显示这个 div 的一些子元素。我对 JavaScript 没有任何经验，我正在试验一些我在 Internet 上找到的代码。

假设我的 div 看起来像这样：

```
<div class="Advertisement">
    <h2 class="Title">title</h2>
</div> 
```

我想在将鼠标移到 div 上后隐藏这个 h2 元素。我的 JS 脚本如下所示：

```
window.onload = function() {
    var lis = document.getElementsByClassName("Advertisement");
    for (var i = 0; i < lis.length; i++) {
        lis[i].onmouseover = function() {
            this.style.backgroundColor = "green";
            this.style.width = "800px";
            var children = lis[i].childNodes.getElementsByClassName("Title");
            for (var j = 0; j < children.length; j++) {
                children[j].onmouseover = function() {
                    this.style.visibility = "hidden";
                };
            }
        };
    }
};​ 
```

更改大小和背景颜色效果很好，但“h2”元素不会消失。我做错什么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:31:38.923

实际上，您不需要 JavaScript 来完成该任务。为什么不使用纯 HTML/CSS？

试试这个：

```
<style>
    div.advertisement:hover > h2, div.advertisement:focus > h2 {
        color:      red;
    }
    div.advertisement > h3 {
        display:    none;
    }
    div.advertisement:hover > h3, div.advertisement:focus > h3 {
        display:    block;
    }
</style>

<div class="advertisement" tabindex="-1">
    <h2>title</h2>
    <h3>hidden text</h3>
</div> 
```

这个实际上显示了一些东西，但是当然反之亦然，隐藏你的 h2。

* * *

*RyanB 的扩展*

这与我给出的答案相似。我会说隐藏文本应该是 a`<p>, <span> or a <div>`与 a`<h3>`以具有更好的语义。如果它很重要，也可以添加`tabindex="-1"`到 div 中。添加`tabindex="-1"`允许`<div>`接收焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:27:58.527

lis[i] 在这里是未定义的，不需要子节点所以，而不是这个

```
var children = lis[i].childNodes.getElementsByClassName("Title"); 
```

写

```
 var children = this.getElementsByClassName("Title"); 
```

# assembly - GNU as：获取节的开始和结束地址

> ID：11053505
> 
> 赞同：1
> 
> 时间：2012-06-15T15:15:49.617
> 
> 标签：assembly, mips, gnu

`sect()`我正在移植一个使用和`sectend()`功能的 MIPS 汇编程序（非 MIPSPro 兼容语法） 。看起来他们返回了该部分的开始和结束地址。似乎 GNU AS 文档不支持任何类似的东西 - 任何想法如何用 GAS 语法编码？

这里有些例子。

```
 la  t0,sect(.bss)
        la  t1,sectend(.bss)
    @clear:
        sw  zero,0(t0)
        addiu   t0,t0,4
        sltu    at,t0,t1
        bne at,zero,@clear
        nop

....

__text  dw  sect(.text)
__textlen   dw  sectend(.text)-sect(.text) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:14:32.893

如果您使用的是运行 ELF 可执行文件的系统，您可能会在[此处](https://stackoverflow.com/questions/7370407/get-the-start-and-end-address-of-text-section-in-an-executable)和[此处](http://sourceware.org/binutils/docs/ld/PROVIDE.html)找到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:06:06.647

我相信您将信息（使用可以在 asm 中作为变量读取的指标包装该部分）放在链接描述文件中。这就是我看到 .data 部分从闪存复制到 ram 的方式，并且 .bss 被归零......（使用 gnu 工具）。

# javascript - 如何使用 D3 布局非树层次结构

> ID：11053511
> 
> 赞同：25
> 
> 时间：2012-06-15T15:16:10.327
> 
> 标签：javascript, d3.js

D3 对严格树的有向图有多种布局，例如：

```
A
|\
B C
 / \
D   E 
```

我需要绘制一个不是树的节点层次结构，而是一个有向无环图。这是树布局的问题，因为有几个分支会聚：

```
A
|\
B C
 \|
  D 
```

有谁知道一般层次结构的 D3 布局？或者，对现有的树形布局进行一些巧妙的修改？我注意到 GraphVis 可以很好地处理这种情况，但是 D3 生成的图表更适合这里的要求。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-17T18:25:47.240

您可以创建自己的代码，而不必依赖 D3 布局来完成它。

我[在 jsFiddle 中提供了一个示例](http://jsfiddle.net/plaliberte/6vCFg/)。该示例非常简单，需要进行一些工作以适应更复杂的示例。

该示例也可以通过相对较少的工作来重新处理分层数据。

这是我在 jsFiddle 中使用的代码：

```
 // Sample data set
var json = {
    nodes: [{
        name: 'A'},
    {
        name: 'B'},
    {
        name: 'C'},
    {
        name: 'D'}],
    links: [{
        source: 'A',
        target: 'B'},
    {
        source: 'A',
        target: 'C'},
    {
        source: 'B',
        target: 'D'},
    {
        source: 'C',
        target: 'D'}
                                                                                   ]

};

var vis = d3.select('#vis').attr('transform', 'translate(20, 20)');

// Build initial link elements - Build first so they are under the nodes
var links = vis.selectAll('line.link').data(json.links);
links.enter().append('line').attr('class', 'link').attr('stroke', '#000');

// Build initial node elements
var nodes = vis.selectAll('g.node').data(json.nodes);
nodes.enter().append('g').attr('class', 'node').append('circle').attr('r', 10).append('title').text(function(d) {
    return d.name;
});

// Store nodes in a hash by name
var nodesByName = {};
nodes.each(function(d) {
    nodesByName[d.name] = d;
});

// Convert link references to objects
links.each(function(link) {
    link.source = nodesByName[link.source];
    link.target = nodesByName[link.target];
    if (!link.source.links) {
        link.source.links = [];
    }
    link.source.links.push(link.target);
    if (!link.target.links) {
        link.target.links = [];
    }
    link.target.links.push(link.source);
});

// Compute positions based on distance from root
var setPosition = function(node, i, depth) {
    if (!depth) {
        depth = 0;
    }
    if (!node.x) {
        node.x = (i + 1) * 40;
        node.y = (depth + 1) * 40;
        if (depth <= 1) {
            node.links.each(function(d, i2) {
                setPosition(d, i2, depth + 1);
            });
        }

    }

};
nodes.each(setPosition);

// Update inserted elements with computed positions
nodes.attr('transform', function(d) {
    return 'translate(' + d.x + ', ' + d.y + ')';
});

links.attr('x1', function(d) {
    return d.source.x;
}).attr('y1', function(d) {
    return d.source.y;
}).attr('x2', function(d) {
    return d.target.x;
}).attr('y2', function(d) {
    return d.target.y;
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-25T16:45:06.340

作为这个例子：“ [Force Directed Trees](http://bl.ocks.org/mbostock/1138500) ”说明有一个经常有效的技巧。在示例中，力方向的行为在每个刻度上进行调整，以便节点根据链接的方向略微向上或向下漂移。如图所示，这将对树做得很好，但我发现它也适用于无环图。没有承诺，但它可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T22:18:17.620

一般来说，说到树和数据层次结构，您只需要在 B 和 C 的子列表中都有“D”。

创建你的节点列表，确保你有一个唯一的 id 返回，这样“D”就不会出现两次。

```
vis.selectAll("g.node").data(nodes, function(d) { return d.id; }); 
```

然后当你打电话

```
var links = tree.links(nodes) 
```

你应该让 D 出现两次作为“目标”（B 和 C 分别作为“源”），这导致单个节点“D”有两行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-29T22:18:07.790

我能够使用 Dagre（[https://github.com/dagrejs/dagre](https://github.com/dagrejs/dagre)）和 cytoscape的组合来做到这一点

有一个名为 Dagre-D3 的库，您可以将其用作此库的渲染器，因此它看起来像您想要的 D3 解决方案。

查看此小提琴以查看 Dagre 和 Cytoscape 的基本实现：[https ://jsfiddle.net/KateJean/xweudjvm/](https://jsfiddle.net/KateJean/xweudjvm/)

```
var cy = cytoscape({
  container: document.getElementById('cy'),
  elements: {
          nodes: [
            { data: { id: '1' } },
            { data: { id: '2' } },
            { data: { id: '3' } },
            { data: { id: '4' } },
            { data: { id: '5' } },
            { data: { id: '6' } },
            { data: { id: '7' } },
            { data: { id: '8' } },
            { data: { id: '9' } },
            { data: { id: '10' } },
            { data: { id: '11' } },
            { data: { id: '12' } },
            { data: { id: '13' } },
            { data: { id: '14' } },
            { data: { id: '15' } },
            { data: { id: '16' } },
            { data: { id: '17' } },
            { data: { id: '18' } }
          ],
          edges: [
            { data: { source: '1', target: '2' } },
            { data: { source: '1', target: '3' } },
            { data: { source: '2', target: '4' } },
            { data: { source: '4', target: '5' } },
            { data: { source: '4', target: '6' } },
            { data: { source: '5', target: '6' } },
            { data: { source: '5', target: '7' } },
            { data: { source: '7', target: '8' } },
            { data: { source: '3', target: '9' } },
            { data: { source: '3', target: '10' } },
            { data: { source: '10', target: '11' } },
            { data: { source: '11', target: '12' } },
            { data: { source: '12', target: '13' } },
            { data: { source: '12', target: '14' } },
            { data: { source: '14', target: '15' } },
            { data: { source: '15', target: '16' } },
            { data: { source: '16', target: '17' } },
            { data: { source: '16', target: '18' } }

          ]
        },
  layout: {
    name: "dagre",
    rankDir: 'TB' //love this. you can quickly change the orientation here from LR(left to right) TB (top to bottom), RL, BT. Great dropdown option for users here. 
  },
  style: [{
    selector: 'node',
    style: {
      'label': 'data(id)',
      'width': '30%',
      'font-size': '20px',
      'text-valign': 'center',
      'shape': 'circle',
      'background-color': 'rgba(113,158,252,1)', 
      'border': '2px grey #ccc'
    }
  }, {
    selector: 'edge',
    style: {
      'width': 2,
      'line-color': '#ccc',
      'target-arrow-color': '#ccc',
      'target-arrow-shape': 'triangle'
    }
  }]
}); 
```

# mysql - 前缀搜索的最佳数据库查询

> ID：11053512
> 
> 赞同：3
> 
> 时间：2012-06-15T15:16:13.697
> 
> 标签：mysql, algorithm, mongodb, tree, prefix

我有一个数据集，它是前缀范围的列表，并且前缀的大小并不完全相同。这里有一些例子：

```
low: 54661601   high: 54661679   "bin": a
low: 526219100  high: 526219199  "bin": b
low: 4305870404 high: 4305870404 "bin": c 
```

我想查找哪个“bin”对应于具有相应前缀的特定值。例如，值`5466160179125211`将对应于“bin”a。在重叠的情况下（其中很少），我们可以返回最长的前缀或所有前缀。

最佳算法显然是某种可以插入 bin 对象的树，其中树的每个连续级别代表越来越多的前缀。

问题是：我们如何在数据库中实现这一点（在一个查询中）？允许更改/添加到数据集。什么是最好的数据和查询设计？最好使用 mongo 或 MySQL 的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T20:09:26.347

如果您对前缀范围内的重叠数量做出一个温和的假设，则可以使用 MongoDB 或 MySQL 以最佳方式执行您想要的操作。在下面的答案中，我将使用 MongoDB 进行说明，但是将这个答案移植到 MySQL 应该很容易。

首先，让我们重新表述一下这个问题。当您谈论匹配“前缀范围”时，我相信您实际上在谈论的是在*字典*顺序下找到正确的范围（直观地说，这只是字符串的自然字母顺序）。例如，前缀匹配 54661601 到 54661679 的数字集恰好是当写为字符串时，在字典上大于或等于“54661601”但在字典上小于“54661680”的数字集。因此，您应该做的第一件事是将所有上限加 1 **，**这样您就可以用这种方式表达您的查询。在 mongo 中，您的文档看起来像

```
{low: "54661601", high: "54661680", bin: "a"}
{low: "526219100",  high: "526219200",  bin: "b"}
{low: "4305870404", high: "4305870405", bin: "c"} 
```

**现在问题变成了：给定一组 [ low** , **high** )形式的一维区间，我们如何快速找到哪些区间包含给定点？**最简单的方法是在低**或**高**字段上使用索引。让我们使用**高**场。在 mongo 外壳中：

```
db.coll.ensureIndex({high : 1}) 
```

现在，让我们假设间隔根本不重叠。如果是这种情况，那么对于给定的查询点“x”，包含“x”的唯一可能区间是具有大于“x”的最小**高值的区间。**因此我们可以查询该文档并检查其**低值**是否也小于“x”。例如，这将打印出匹配间隔，如果有的话：

```
db.coll.find({high : {'$gt' : "5466160179125211"}}).sort({high : 1}).limit(1).forEach(
       function(doc){ if (doc.low <= "5466160179125211") printjson(doc) } 
  ) 
```

现在假设不是假设间隔根本不重叠，而是假设每个间隔与小于*k*个相邻间隔重叠（我不知道*k*的值对你来说是否正确，但希望它很小）。在这种情况下，您可以在上面的“限制”中将 1 替换为*k*，即

```
 db.coll.find({high : {'$gt' : "5466160179125211"}}).sort({high : 1}).limit(k).forEach(
       function(doc){ if (doc.low <= "5466160179125211") printjson(doc) } 
  ) 
```

这个算法的运行时间是多少？索引是使用 B-trees 存储的，因此如果您的数据集中有*n 个*区间，则需要 O(log *n* ) 时间来查找第一个匹配的**高**值文档，然后需要 O( *k* ) 时间来迭代下一个*k*文档，总共 O(log *n* + *k* ) 时间。如果*k*是常数，或者实际上小于 O(log *n* )，那么这是渐近最优的（这是在标准计算模型中；我没有计算外部存储器传输的数量或任何花哨的东西）。

唯一会发生故障的情况是*k*很大时，例如，如果某个大区间几乎包含所有其他区间。在这种情况下，运行时间为 O( *n* )。如果您的数据是这样的结构，那么您可能需要使用不同的方法。一种方法是使用 mongo 的“2d”索引，您的**低值**和**高**值编码*x*和*y*坐标。然后，您的查询将对应于查询*x* - *y*平面的给定区域中的点。这在实践中可能会做得很好，尽管使用当前的 2d 索引实现，最坏的情况仍然是 O(n)。

*对于所有k*值，有许多理论结果可以实现 O(log *n* ) 性能。它们的名称包括优先级搜索树、段树、间隔树等。但是，这些是您必须自己实现的专用数据结构。据我所知，目前没有流行的数据库实现它们。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:40:54.390

佩顿！:)

如果您需要将所有内容保留为整数，并希望它与单个查询一起使用，则应该可以：

```
select bin from datatable where 5466160179125211 between 
      low*pow(10, floor(log10(5466160179125211))-floor(log10(low))) 
   and ((high+1)*pow(10, floor(log10(5466160179125211))-floor(log10(high)))-1); 
```

在这种情况下，它将在数字 5466160100000000（具有低前缀的最小数字和与要查找的数字相同的位数）和 546616799999999（具有高前缀的最大数字和与该数字相同的位数）之间进行搜索找到）。在高前缀的位数多于低前缀的情况下，这仍然有效。它也应该在数字短于前缀长度的情况下工作（我认为），其中先前解决方案中的 varchar 代码可能会给出不正确的结果。

您需要进行实验来比较在查询中使用大量内联数学的性能（如在此解决方案中）与使用 varchars 的性能。

编辑：即使在没有索引的大表上，性能似乎也非常好；如果您可以使用 varchars，那么您可以通过索引低列和高列来进一步提高性能。请注意，如果任何前缀具有初始零，您肯定希望使用 varchars。这是一个修复，以允许在使用 varchars 时数字短于前缀的情况：

```
select * from datatable2 where '5466' between low and high
    and length('5466') >= length(high); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:22:37.667

使用 MySQL，您可能必须使用存储过程，调用该存储过程将值映射到 bin。所述过程将查询每一行的桶列表并进行算术或字符串操作以找到匹配的桶。您可以通过使用固定长度的前缀来改进此设计，这些前缀排列在固定数量的层中。你可以为你的树分配一个固定的深度，每层都有一个表格。使用这些方法中的任何一种都不会获得类似树的性能。

如果你想做更复杂的事情，我怀疑你必须使用不同的平台。

Sql Server 有一个 Hierarchy 数据类型： [http ://technet.microsoft.com/en-us/library/bb677173.aspx](http://technet.microsoft.com/en-us/library/bb677173.aspx)

PostgreSQL 有一个 cidr 数据类型。我不熟悉它的查询支持级别，但理论上你可以在你的数据库中构建一个路由表并使用它来分配存储桶： [http ://www.postgresql.org/docs/7.4/static/ datatype-net-types.html#DATATYPE-CIDR](http://www.postgresql.org/docs/7.4/static/datatype-net-types.html#DATATYPE-CIDR)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T17:04:40.643

“最佳”对不同的人可能意味着不同的东西。似乎你可以做一些事情，比如将你的低值和高值保存为 varchars。那么你所要做的就是

```
select bin from datatable where '5466160179125211' between low and high 
```

或者，如果您有某种理由将值保留为表中的整数，则可以在查询中进行 CAST。

我不知道这是否会给你一个大数据集带来糟糕的性能。我希望我明白你想做什么。*

# css - 按钮的 CSS 样式：使用 问问题

> ID：11053516
> 
> 赞同：28
> 
> 时间：
> 
> 标签：css, button

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-15T15:24:11.310

你真的想要风格`<div>`吗？或者你想设计风格`<input type="button">`？如果你想要后者，你应该使用正确的选择器：

```
input[type=button] {
    color:#08233e;
    font:2.4em Futura, ‘Century Gothic’, AppleGothic, sans-serif;
    font-size:70%;
    /* ... other rules ... */
    cursor:pointer;
}

input[type=button]:hover {
    background-color:rgba(255,204,0,0.8);
} 
```

也可以看看：

*   [**JSFiddle 演示**](http://jsfiddle.net/8bDux/2/)
*   W3C：[CSS 3：6.3 属性选择器](http://www.w3.org/TR/selectors/#attribute-selectors)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-15T15:23:08.907

在您的`.button`CSS 中，尝试`display:inline-block`. 看到这个[JSFiddle](http://jsfiddle.net/w29DC/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-15T15:21:24.787

你想要给定的[小提琴之类的东西吗？](http://jsfiddle.net/2RYyD/)

* * *

**HTML**

```
<div class="button">
    <input type="button" value="TELL ME MORE" onClick="document.location.reload(true)">
</div> 
```

**CSS**

```
.button input[type="button"] {
    color:#08233e;
    font:2.4em Futura, ‘Century Gothic’, AppleGothic, sans-serif;
    font-size:70%;
    padding:14px;
    background:url(overlay.png) repeat-x center #ffcc00;
    background-color:rgba(255,204,0,1);
    border:1px solid #ffcc00;
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    border-radius:10px;
    border-bottom:1px solid #9f9f9f;
    -moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
    -webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
    cursor:pointer;
    display:block;
    width:100%;
}
.button input[type="button"]:hover {
    background-color:rgba(255,204,0,0.8);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T15:21:53.693

`Float:left`...虽然我认为您希望输入的样式不是 div？

```
.button input{
    color:#08233e;float:left;
    font:2.4em Futura, ‘Century Gothic’, AppleGothic, sans-serif;
    font-size:70%;
    padding:14px;
    background:url(overlay.png) repeat-x center #ffcc00;
    background-color:rgba(255,204,0,1);
    border:1px solid #ffcc00;
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    border-radius:10px;
    border-bottom:1px solid #9f9f9f;
    -moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
    -webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
    cursor:pointer;
}
.button input:hover{
    background-color:rgba(255,204,0,0.8);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T15:21:59.457

问题不在于按钮，问题在于`div`. 由于`div`s 是块元素，它们默认占据其父元素的整个宽度（作为一般规则；我很确定如果您在一个文档中使用不同的定位方案会导致它占据层次结构中更高元素的整个宽度）。

无论如何，尝试添加选择器`float: left;`的规则`.button`。这将导致`div`with 类`button`适合按钮，并且`div`如果您想要更多的 s，将允许您在同一行上有多个浮动`div.button`s。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T15:22:04.550

试着放

```
Display:inline; 
```

在 CSS 中。

# java - 为什么我的程序无法正确找到主类？

> ID：11053521
> 
> 赞同：3
> 
> 时间：2012-06-15T15:16:45.287
> 
> 标签：java, eclipse, ide

我正在用 java 制作一个程序，它只是一个基于 J 的基本 gui 程序。当我使用播放按钮在 Eclipse 中编译它时，它运行完美，没有任何错误或错误可见。

但是当我导出它并运行它时，它只是返回一个错误，说找不到主类，应该没有问题，因为我正确设置了启动配置，并且由于某种原因，这只发生在我用 java 编程时1.7，当我在 1.6 中执行此操作时，它可以完美编译并运行。即使我导出它。

我如何导出

![这就是我导出它的方式](../Images/3736e870b3072a646ca48cc2df9d4b41.png)

我只是通过打开 jar 文件来运行它

在我的 MANIFEST.MF 文件中：

```
Manifest-Version: 1.0
Rsrc-Class-Path: ./
Class-Path: .
Rsrc-Main-Class: net.undeadminecraft.wgh.main.Main
Main-Class: org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader 
```

我得到的错误信息

![错误信息](../Images/cb3353e3609f572f92dea7c7e8d4d273.png)

我的包裹（如果有帮助的话）

![包](../Images/f7e1ea5f31f5be8326f3447df02d991f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:58:07.967

在控制台 ( ) 上运行您的 JAR`java -jar yourjar.jar`并发布完整的堆栈跟踪。也发布`java -version`和的输出`javac -J-version`。

我的猜测是您的默认 Java 是 Java6，如果您使用 Java7 构建，您使用的是新的 Java7 类文件格式，或者您的主类包含对 Java6 中不存在的类的引用（在无法延迟验证的地方）。

**编辑：**使用[Process Explorer](http://live.sysinternals.com/procexp.exe)或其他显示 exe 路径并可以找到窗口进程的任务管理器，并显示哪个`javaw.exe`确切地向您显示该错误消息。然后尝试`java.exe`在同一目录中重现错误消息。或者卸载所有 JRE（JDK 可能会保留），但只有一个，所以很清楚哪个正在运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:30:42.130

我建议将您的主类设置为 MANIFEST.MF 中的“主类”：

```
Manifest-Version: 1.0
Rsrc-Class-Path: ./
Class-Path: .
Main-Class: net.undeadminecraft.wgh.main.Main 
```

可以解决您的问题，因为您在其中的主类是 Eclipse 的内部类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:50:40.877

您的主要方法签名不正确。请验证它是否如下所示：

```
public static void main(String args[]){ 
} 
```

你可能会遗漏一些东西。否则，请给我们您的方法声明。

# javascript - 通过javascript将元素添加到html的最简单方法是什么

> ID：11053527
> 
> 赞同：1
> 
> 时间：2012-06-15T15:16:52.417
> 
> 标签：javascript, html

似乎有很多方法可以做到这一点，但是，它们对我来说都没有意义。如果有人可以给我一个示例，说明如何添加标签并编辑其在所有常见浏览器（**但**IE 除外）中都可以使用的属性（没有 document.write 混乱），那就太好了。
编辑
我根本不在乎它是否适用于 IE。如果是这样，那很好，但我非常不喜欢 IE，我只会要求人们更改浏览器，因为我正在创建的页面上的其他内容在 IE 中不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:19:42.483

下面是如何创建`<div>`元素并将其添加到布局的最简单示例。

```
var el = document.createElement("div");   // creating element
el.setAttribute("class", "myClass");      // setting attribute "class"
el.innerHTML = "Text";                    // adding text inside the element
document.body.appendChild(el);​            // appending new element to page body 
```

**演示：http:** [//jsfiddle.net/XVaqY/](http://jsfiddle.net/XVaqY/)

要使其在 IE 中不起作用，请添加任何浏览器检查。[类似的](http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx)东西：

```
function isIE() {
    return (navigator.appName == "Microsoft Internet Explorer");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:20:21.767

这是使用 javascript 添加 DIV 的工作示例

[http://jsfiddle.net/wp2Re/](http://jsfiddle.net/wp2Re/)

```
<html>  
<head>  
    <title>Javascript Create Div Element Dynamically</title>  
    <style type="text/css">  
        .dynamicDiv {  
            width: 200px;  
            height: 100px;  
            border: solid 1px #c0c0c0;  
            background-color: #e1e1e1;  
            font-size: 11px;  
            font-family: verdana;  
            color: #000;  
            padding: 5px;  
        }  
    </style>  

    <script type="text/javascript" language="javascript">  

        function createDiv() { 
            var divTag = document.createElement("div"); 

            divTag.id = "div1"; 

            divTag.setAttribute("align", "center"); 

            divTag.style.margin = "0px auto"; 

            divTag.className = "dynamicDiv"; 

            divTag.innerHTML = "This HTML Div tag created "  
                                + "using Javascript DOM dynamically."; 

            document.body.appendChild(divTag); 
        } 
    </script>  
</head>  
<body>  
    <p align="center">  
        <b>Click this button to create div element dynamically:</b>  
        <input id="btn1"   
                type="button"   
                value="create div"   
                onclick="createDiv();" />  
    </p>  
</body>  
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:20:49.950

首先，您创建元素[`document.createElement()`](https://developer.mozilla.org/en/DOM%3adocument.createElement)并将其保存到变量中。此时它还没有在 DOM 中。然后，随心所欲地改变它的属性，然后在你喜欢的任何时候将它插入到 DOM 中。在我的示例中，它将在标签末尾插入一个带有of的`DIV`元素。`id``elementid``body`

```
var newDiv = document.createElement("div");
newDiv.id = "elementid";
document.body.appendChild(newDiv); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:27:26.097

以下是向 DOM 添加内容的几种方法：

使用 W3C 推荐的方法：

```
var heading = document.createElement("h1");
heading.createTextNode("Foobar");
heading.className = "semantic-class-name-goes-here";
heading.setAttribute("aria-something-here", "bar"); 
```

使用innerHTML：

```
document
    .innerHTML("<h1 class='semantic-class-name-goes-here' aria-something-here='bar'>Foobar</h1>"); 
```

使用 jQuery：

```
var heading = $("h1")
    .addClass("semantic-class-name-goes-here")
    .attr("aria-something-here", "bar");

$(document).append(heading); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T15:40:14.763

假设您想排除所有 IE 版本，使用[webreflection 博客](http://webreflection.blogspot.it/2009/01/32-bytes-to-know-if-your-browser-is-ie.html)中的这个技巧，您可以做到

```
if (!(!+"\v1")) {
   var el = document.createElement("div");    
   ...
   document.body.appendChild(el);
} 
```

或者，检测 IE 的另一个条件也可以是

```
if (!top.execScript) { ... } 
```

甚至

```
var isIE = /*@cc_on!@*/!1;
if (isIE) { ... } 
```

但老实说，他们对我来说太老套了。
无论如何，如果您指定排除 IE 的技术原因并告诉我们您要完成什么样的功能，可能会根据特定的 IE 限制为您提供一种更安全的方式来完成此任务（功能检测优于浏览器嗅探）。

# c++ - 如何使一个类只能访问另一个类的某些私有成员？

> ID：11053528
> 
> 赞同：7
> 
> 时间：2012-06-15T15:16:52.690
> 
> 标签：c++, class, friend

假设我们有两个类：

```
class Base
{
private:
    int x;
public:
    void f();
};

class Foo
{
    // some variables and methods
}; 
```

现在每个人都可以打电话`Base::f()`，但我只想`Foo`能够这样做。

为了达到这个效果，我们可以设为`Base::f()`private并声明`Foo`为friend：

```
class Base
{
private:
    int x;
    void f();
    friend Foo;
}; 
```

这种方法的问题在于它`Foo`可以同时访问`Base::f()`和`Base::x`（甚至可以访问 的任何其他私有成员`Base`）。但我只想`Foo`访问`Base::f()`.

有没有办法让一个类（或一个函数）只授予对另一个类的某些私有成员的访问权限？或者也许有人可以提出更好的方法来解决我的问题？

**编辑：**

我将尝试指定我需要的访问限制。首先，`Base`是库中的一个接口（实际上是一个抽象类）。用户仅使用从`Base`. `Base::f()`仅由`Foo`库中的另一个类调用。对用户隐藏`Base::f()`很重要，因为只`Foo`知道何时调用它。同时，`Foo`也不应该打扰其他成员`Base`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:26:08.703

非常hacky，但这将允许非常细粒度的访问。

```
class Base
{
private:
    int x;
    void f();
    friend class Base_f_Accessor;
};

class Base_f_Accessor
{
private:
    static void f(Base & b) { b.f(); }
    friend class Foo;
}

class Foo
{
    // some variables and methods
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T15:20:52.417

您可以创建另一个包含这样的数据的`Base`类：

```
class BaseData {
protected:
    int x;
};

class Base : public BaseData {
    friend class Foo;
    void f ();
}; 
```

现在，`Foo`可以像您想要`f`的那样访问，但不是. 友谊不是可交换的。通过使用,对所有人来说都是私有的，除了那些直接派生自.`Base``x``protected``x``BaseData`

更好的方法可能是使用多重继承来定义`Base`，并`Foo`仅提供对您想要`Base`派生的那些类的访问。

```
class With_f {
    friend class Foo;
protected:
    virtual void f () = 0;
};

class With_g {
protected:
    virtual void g () = 0;
};

class Base : public With_f, public With_g {
    int x;
    void f () {}
    void g () {}
}; 
```

在这里，`Foo`必须有一个指向 的`With_f`指针`Base`，但它可以访问该`f`方法。`Foo`无法访问`g`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T15:22:09.957

没有简单的，非黑客的方式来实现这一点。C++ 根本没有这样的访问控制粒度。您可以使用一些继承，但增加的复杂性超过了此访问限制可能具有的任何优势。此外，这种方法无法扩展——您只能将增加的权限授予一个朋友类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:34:38.907

也许有点麻烦，但你可以在嵌套类是朋友的地方创建嵌套类，然后你可以为每个嵌套类添加朋友。这给出了某种程度的粒度：

```
#include <iostream>

class Nesting
{
  friend class Foo;
  class Nested1
  {
    friend class Nesting;
  public:
    Nested1() : i(3) { }
  private:
    int i;
  } n1;
  class Nested2
  {
    friend class Nesting;
    friend class Foo;
  public:
    Nested2() : j(5) { }
  private:
    int j;
  } n2;
  int f() { return n1.i; }
};

class Foo
{
public:
  Foo(Nesting& n1) : n(n1) { }
  int getJ() { return n.n2.j + n.f(); }
private:
  Nesting& n;
};

int main()
{
  Nesting n;
  Foo foo(n);
  std::cout << foo.getJ() << "\n";
} 
```

# java - 有没有办法为 RESTful 堆栈生成样板代码？

> ID：11053534
> 
> 赞同：10
> 
> 时间：2012-06-15T15:17:07.627
> 
> 标签：java, javascript, rest, auto-generate, boilerplate

随着我对 RESTful API 的深入了解，该方法的（良好）简单性意味着您生成大量样板代码，以及必须在三个或四个不同位置匹配的代码，例如基于 Jersey 的堆栈：

1.  提供控件的网页上的 HTML（按钮`Create Foo`）
2.  网页上的 JS，它制定 JSON 和创建 Foo 的请求
3.  `FooRest`处理请求并创建 Foo的类方法
4.  一个`Foo`要实例化的类，它将操纵数据结构

是否有工具可以自动为部分或全部代码提供起点，可能从像 JSON 数据结构这样简单的东西开始？例如，提供：

```
card: {
  methods: [GET],
}
handOfCards: {
  methods: [GET POST PUT DELETE],
} 
```

并且至少以 Ajax 请求结束，带有指定方法的 CardRest 和 HandOfCardsRest 类，以及带有属性或 getter/setter 的 Card 和 HandOfCards 类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:32:45.157

你试过[Backbone.js](http://backbonejs.org/)吗？它是一个为您处理 REST Ajax 请求的 JavaScript 库。它允许您定义模型来包装数据，并提供 setter、getter、保存和删除功能等。

它还允许您将模型绑定到生成 UI HTML 的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:21:20.807

您的目标可能不应该是生成样板代码，而是实际编写更少的代码。

[Spark](http://www.sparkjava.com/)是一个基于[Sinatra](http://www.sinatrarb.com/)的 Java 微型 Web 框架。

这是一些示例代码：

```
import static spark.Spark.*;
import spark.*;

public class HelloWorld {
    public static void main(String[] args) { 
        get(new Route("/") {
           @Override
           public Object handle(Request request, Response response) {
              // .. Show something ..
           }
        });

        post(new Route("/") {
           @Override
           public Object handle(Request request, Response response) {
              // .. Create something .. 
           }
        });

        put(new Route("/") {
           @Override
           public Object handle(Request request, Response response) {
              // .. Update something ..
           }
        });

        delete(new Route("/") {
           @Override
           public Object handle(Request request, Response response) {
              // .. annihilate something ..
           }
        });

        options(new Route("/") {
           @Override
           public Object handle(Request request, Response response) {
              // .. appease something ..
           }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T19:59:46.367

[作为Juan 答案](https://stackoverflow.com/a/11089747/320399)的替代（或补充），您可能想查看[Knockback.js](http://kmalakoff.github.com/knockback/)，它充分利用了 Knockout 并添加了[Backbone.js](http://documentcloud.github.com/backbone/)的优点。Backbone 通过其“同步”功能支持 RESTful API。引用他们的网站：

> Backbone.sync 的方法签名是 sync(method, model, [options])
> 
> ```
> method – the CRUD method ("create", "read", "update", or "delete")
> model – the model to be saved (or collection to be read)
> options – success and error callbacks, and all other jQuery request options 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T22:39:59.713

我认为几乎所有 *rails 应用程序都会为您完成所有这些工作。[Grails](http://grails.org/)是我现在最喜欢的，一旦你完成了初始设置（一个命令），你就可以用另一个命令创建域类。

一旦创建了这些，您就可以生成视图 (html) 和控制器，以使用单个命令处理所有这些操作，并且样板对于许多初始站点来说已经足够了。它甚至会为您创建测试用例，尽管您需要定义实际测试的作用。您可以很容易地按照约定对其进行编程，或者从 URL -> 控制器操作创建自己的映射。它有大量的插件支持，并且可以轻松处理内置的远程表单提交（通过 javascript）。

它不需要 json 数据结构来创建，但是域很容易创建（使用 groovy），并且它自动连接 getter/setter、服务注入等，因为它基于 Spring Framework。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T15:52:57.477

您可能想完全尝试不同的方法，并尝试像[project lombok](http://projectlombok.org/)这样的想法。它至少会让你nix所有的getter和setter。

# xamarin.ios - MvvmCross 中的警报或弹出窗口

> ID：11053535
> 
> 赞同：3
> 
> 时间：2012-06-15T15:17:13.087
> 
> 标签：xamarin.ios, xamarin.android, mvvmcross

MvvmCross 是否支持显示警报或弹出窗口的跨平台解决方案？

搜索我找到的代码，`MvxDialogActivityView`但它已被注释掉。现在还会这样吗？

如果没有直接支持，您会建议如何最好地做到这一点？（也许 ViewModel 会更改一个属性并调用`FirePropertyChanged`，以便 View 知道它并显示警报。）

**编辑 2012 年 6 月 16 日 16:04**

对于这种特定情况，我尝试做的事情如下：在页面上单击一个按钮，这会导致在 ViewModel 中运行一个方法，该方法进行评估以确定应该向客户显示两条消息中的哪一条。该消息将显示为警报或弹出窗口（本机，或者最好完全由我设计）。消息会在（单击 OK 按钮，或者最好是 3 秒）后消失。

关闭消息后，还将导航一个新页面（取决于显示的两条消息中的哪一条）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T20:21:05.997

如何处理这绝对取决于情况 - 没有单一的最佳规则（恕我直言）

对于一般错误显示模式，[http ://slodge.blogspot.co.uk/2012/05/one-pattern-for-error-handling-in.html 有一个建议](http://slodge.blogspot.co.uk/2012/05/one-pattern-for-error-handling-in.html)

我使用类似的模式来显示应用程序级别的通知 - 例如，当长时间运行的操作完成或聊天消息到达时或...

关于如何显示消息框的一篇有趣的文章是：[http](http://awkwardcoder.blogspot.co.uk/2012/03/showing-message-box-from-viewmodel-in.html) ://awkwardcoder.blogspot.co.uk/2012/03/showing-message-box-from-viewmodel-in.html - 我不确定我会完全遵循最终解决方案，但是对于不该做什么肯定有一些好处。

* * *

对于您更新的场景，我会考虑使用信使（如 TinyMessenger）或使用由 ViewModel 公开并由其 View 使用的普通 C# 事件

> 在页面上单击一个按钮，这会导致一个方法在 ViewModel 中运行

我将使用绑定到按钮 Click/Tap/TouchDown 的 ICommand 来实现这一点

> 它进行评估以确定应该向客户显示两条消息中的哪一条。

我肯定会在服务中实现逻辑

这将从 ViewModel 调用 - 结果/决定可能会导致某些属性或私有字段状态更改。

然后视图如何决定显示一条消息？我可以想到3个选项：

1.  视图可以只响应属性更改（正常的 Mvvm INPC）——**这将是我的偏好**
2.  ViewModel 可以公开它触发的正常 C# 事件...
3.  ViewModel 可以发送消息

最后一个选项（Messenging）可能是这里最灵活的解决方案——它将 View 和 ViewModel 解耦，以防您以后决定更改职责。要实现消息传递，可以：

*   实现你自己的集线器（就像我对[http://slodge.blogspot.co.uk/2012/05/one-pattern-for-error-handling-in.html](http://slodge.blogspot.co.uk/2012/05/one-pattern-for-error-handling-in.html)中的错误所做的那样）
*   或使用像 TinyMessenger 这样的通用解决方案

> 该消息将显示为警报或弹出窗口（本机，或者最好完全由我设计）。

这是一个 View 问题 - 因此将完全由 View 项目控制。我会使用如下控件：UIAlert、Toast、ToastPrompt 等 - 所有这些都可以设置样式

> 消息会在（单击 OK 按钮，或者最好是 3 秒）后消失。消息被删除后...

我会在视图中使用某种形式的代码隐藏（或者可能是 WP7 中的行为）。这将检测到点击/淡入淡出/消失，然后调用 ViewModel 上的 ICommand（我的偏好）或公共方法

> 也将导航一个新页面

将从 ViewModel 请求此导航

> （取决于显示的两条消息中的哪一条）。

这将很容易通过上述流程进行跟踪......大概 ViewModel 已经知道要显示什么。

* * *

所以这就是我要做的...

*   它将应用程序流逻辑保留在 ViewModel（及更低版本）中
*   它将演示文稿保留在视图中

...但我敢肯定还有其他选择:)

* * *

最后一点......淡出然后导航逻辑真的会被 WP7 和 Android 上的切换/墓碑“搞砸”——这对于您的特定场景可能很重要，也可能无关紧要。

# coldfusion - 从 ColdFusion 8 获取 CLOB 数据

> ID：11053539
> 
> 赞同：3
> 
> 时间：2012-06-15T15:17:23.353
> 
> 标签：coldfusion, coldfusion-8

我正在尝试从我们的 Oracle 数据库中检索 CLOB 数据。代码如下：

```
<cfstoredproc datasource="#request.site.datasource#" procedure="GETPAGESWITHMETADATA" result="myResults">
    <cfprocparam cfsqltype="CF_SQL_VARCHAR" type="in" value="News">
    <cfprocparam cfsqltype="CF_SQL_VARCHAR" type="in" value="News Pages">
    <cfprocparam cfsqltype="CF_SQL_CLOB" type="out" variable="XML">
    <cfprocresult name="rs1">
</cfstoredproc>
<cfdump var="#myResults#">
<cfoutput>#XML#</cfoutput>
<cfcatch type="any">
    <cfdump var="#cfcatch#">
</cfcatch>
</cftry> 
```

基本上，存储过程的输出是：

```
select dbms_xmlquery.getxml(queryCtx) INTO XML from dual; 
```

我检查了服务器上的数据源和“启用长文本检索 (CLOB)”。为每个数据源检查选项。

令人惊讶的是，我没有在屏幕上显示 XML 结果，而是得到了一个非常短的字符串：[C@74897f5e

它看起来像句柄 id 而不是内容本身。

如何检索 XML 的完整内容？

作为参考，数据源正在使用具有 TNS 名称的宏媒体驱动程序：驱动程序类：macromedia.jdbc.MacromediaDriver

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:50:57.520

正如@MarkAKruger 建议的那样，从该过程中返回一个表格解决了这个问题。下面的 PL/SQL 代码起到了作用：

```
create or replace
PACKAGE PCK_Commonspot
AS
type t_clob IS record (metadata CLOB) ;
type t_clob_tab IS TABLE OF t_clob;
FUNCTION GetPagesWithMetadataAsRS(FormName varchar2, CategoryName varchar2)
    RETURN t_clob_tab pipelined;
END PCK_Commonspot; 
```

包体包含以下代码：

```
FUNCTION GetPagesWithMetadataAsRS(FormName varchar2, CategoryName varchar2)
    RETURN t_clob_tab pipelined
IS
    r t_clob;
 BEGIN
    GETPAGESWITHMETADATA(FormName, CategoryName, r.metadata) ;
    pipe row(r) ;
    RETURN;
END; 
```

函数 GETPAGESWITHMETADATA 是将 CLOB 返回到 r.metadata 的函数。这里的技巧是返回一个管道表。

它在 ColdFusion 方面变得非常好，因为调用非常简单：

```
<cfquery name="Test" datasource="myDS" maxrows="1">
    SELECT * FROM TABLE(PCK_Commonspot.GetPagesWithMetadataAsRS('abc','def'))
</cfquery>
<cfset XML = Xmlparse(Test.Metadata)> 
```

谢谢马克！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:10:08.183

尽管 Jaepetto 已经回答了他的问题，但我想我会为后代贡献另一个答案。

我在从 Oracle 11g 将 CLOB 数据返回到 CF8 时遇到了类似的问题。最初的解决方案（不起作用）大致是：

```
<cfquery name="GetDoc" DATASOURCE=myDS>
SELECT CLOBDATA FROM FILES WHERE FILES.FILEID = #FileID#
</cfquery> 
```

此查询将成功完成，但`GetDoc.CLOBDATA`始终为空字符串。事实证明，使用检索 CLOB 数据`cfquery`总是会这样做，但如果我将它包装在一个存储的过程中，那么它就可以了。我认为这是我们正在使用的 JDBC 驱动程序的一些怪癖。

无论如何，我的解决方案的 CF 胆量如下。注意使用`CF_SQL_LONGVARCHAR`而不是`CF_SQL_CLOB`- using`CF_SQL_CLOB`给了我 Jaepetto 看到的奇怪的句柄 ID 值。

```
<cfstoredproc PROCEDURE="GETCLOB" DATASOURCE=myDS >
<CFPROCPARAM    TYPE="IN" CFSQLTYPE="CF_SQL_INTEGER" DBVARNAME="pFileID" value="#fileID#"/> 
<CFPROCPARAM    TYPE="OUT" CFSQLTYPE="CF_SQL_LONGVARCHAR" DBVARNAME="pClob" VARIABLE="vClob" /> 
</cfstoredproc>

<!--- Dump the clob to the local filesystem --->
<cfscript>
fstream = CreateObject("java", "java.io.FileOutputStream").init(filepath, JavaCast("boolean","true"));
outStream = CreateObject("java", "java.io.BufferedOutputStream").init(fstream);

outStream.write(#toBinary(vClob)#);
outStream.flush();
outStream.close();
</cfscript> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:43:57.883

在 CF Administrator 中检查您的数据源设置。在高级设置下，有允许返回 BLOB 和 CLOB 数据的复选框。如果未选中它们，您可能会在查询中返回截断的数据

# c# - 更改 asp sql 数据库的默认日期格式（存储值的那个）

> ID：11053549
> 
> 赞同：-1
> 
> 时间：2012-06-15T15:18:02.040
> 
> 标签：c#, asp.net, sql

我有一个gridview 和SqlDatasource。我有一个名为 Date VMS 的列，它是 Date 类型。我注意到添加日期的格式不允许添加如下日期：30/02/2012。( 日/月/年)

我有一个 Excel 表，我从中复制行并将它们添加到表中。

[![在此处输入图像描述](../Images/77db2d81811a55c8504f2d60f772c4b2.png)](https://i.stack.imgur.com/ypgCc.png)

Excel 中日期的格式是：`DD/MM/YYYY`，所以我们在粘贴表格中的值时可以看到，不添加格式为 MM.DD.YYYY 的日期。

*   -其中一些：例如 2012 年 7 月 12 日，程序将它们同化为 MM/DD/YYY。

我还在第一行的第二个单元格中手动添加了日期，数据库不允许这种格式。

有什么方法可以更改日期格式以便我可以添加 dd.mm.yyyy？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:57:02.617

您的问题只有两种解决方案。第一个也是不太复杂的是像 Bala 建议的那样，为 SQL Server 添加一个具有正确格式的新列。

另一种解决方案是进入控制面板的“区域和语言”选项并在“高级设置”中更改日期格式。SQL Server 使用这些设置来验证和显示日期值。使用这种不寻常的日期格式的问题可能会导致其他软件出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:05:55.950

将数据从 excel 复制到 SQL Server（假设您正在使用 SQL Server）的标准方法是使用 SQL Server 的集成服务（以前称为数据转换服务）。在那里，您实际上可以映射您的日期列，它会为您处理一切。

下面是使用 SQL Server 2005 的教程，但对于更新的 SQL Server 版本也是如此。

教程：[如何使用集成服务将 Excel 文件导入 SQL Server 2005](http://www.techrepublic.com/blog/datacenter/how-to-import-an-excel-file-into-sql-server-2005-using-integration-services/205)

# java - 不使用 getter 和 setter 时的文档

> ID：11053550
> 
> 赞同：0
> 
> 时间：2012-06-15T15:18:06.597
> 
> 标签：java, php, python, setter, getter

在 Java 中，当我有简单的模型/pojo 时，我会使用 getter/setter。我发现当你这样做时，代码变成了自我记录。调用 getName() 将返回一个名称，我不需要关心它是如何映射到某个数据库的等等。

当使用 getter 和 setter 开始感觉笨拙的语言时，问题就会出现，比如在 Python 中，我经常听到人们说它们很糟糕。例如，有一次我有一个 PHP 项目，其中一些数据只是从数据库中查询，列值映射到对象/字典。我发现像这样的代码很难阅读，你不能真的只是阅读代码，你阅读了代码，然后你注意到值是从数据库中获取的，现在你必须查看数据库架构一直理解它。当您所能做的只是查看类定义并知道那里不会有任何未记录的魔术键时。

所以我的问题是你们如何在没有 getter 和 setter 的情况下记录代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:25:17.860

在我看来，一个类中不应该有任何未记录的属性。PHP 和其他语言允许您从任何地方将属性粘贴到类上，无论它们是否已在类中定义。由于您描述的原因以及更多原因，我认为这是不好的做法：

很难阅读。

它使其他程序员（包括你未来的自己）更难理解正在发生的事情。

它会阻止 IDE 中的自动完成功能正常工作。

它常常使领域层过于依赖持久层。

是否使用 getter 和 setter 来访问类的已定义属性对我来说更具可替代性。我喜欢保持一致，所以如果我有一个类有一个 getChildren() 方法来延迟加载一些对象数组，那么我不会将 $children 属性设为公开，我也倾向于将其他属性设为私有. 我认为这更像是一个品味问题，但我发现直接访问类中的某些属性（$object->name;）和通过 getter/setter 访问其他属性很烦人。

# javascript - javascript代码问题以适应多个html选择菜单

> ID：11053552
> 
> 赞同：0
> 
> 时间：2012-06-15T15:18:14.093
> 
> 标签：javascript, html

这是我到目前为止所得到的。目标是有一个选择菜单显示从 0 到 9 的数字，值作为相应的数字，并且还对选择标签进行递增编号。

```
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<script type="text/javascript">
function more()
    {
    counter += 1;
    document.getElementById("options").innerHTML += ("<select name='" + counter + "'>");
    for (var i=0;i<10;i++){
        document.getElementById("options").innerHTML += ("<option value='" + i + "'>"+ i + "</option>");
        }
    document.getElementById("options").innerHTML += ("</select>");

    }

</script>
</head>

<body>
<div id="options">
<script type="text/javascript">
var counter=0;
more();
</script>
</div>

<div id="more">
<button onClick='more()' style='color:blue;font-size:11px;font-family:verdana; cursor:pointer;'>more</button>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:26:00.140

您需要将`select`元素作为一个整体附加，否则它是无效标记：

```
function more()
{
    counter += 1;
    var selectBody = '';
    selectBody += "<select name='" + counter + "'>";
    for (var i=0;i<10;i++){
       selectBody += "<option value='" + i + "'>"+ i + "</option>";
    }
    selectBody += "</select>";
    //Appending as a whole
    document.getElementById("options").innerHTML += selectBody;   
} 
```

[**演示**](http://jsfiddle.net/Ut7fc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:23:21.203

你快到了。在添加实际选项元素的行中，您试图将它们附加到 div 而不是 select 元素。你需要使用`getElementsByName(counter)[0]`而不是`getElementById("options")`那里。

```
function more() {
    counter += 1;
    document.getElementById("options").innerHTML += ("<select name='" + counter + "'>");
    for (var i = 0; i < 10; i++) {
        document.getElementsByName(counter)[0].innerHTML += ("<option value='" + i + "'>" + i + "</option>");
    }
    document.getElementById("options").innerHTML += ("</select>");
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/7xzEg/)**。

# grails - Grails 请求的资源（/Receipts/receipts/index）不可用

> ID：11053557
> 
> 赞同：0
> 
> 时间：2012-06-15T15:18:34.007
> 
> 标签：grails, controller, sts-springsourcetoolsuite

我一直在尝试学习 Grails，但是我遇到了以下问题。我创建了四个域类（Receipts、Items、Categories 和 Owners），并为每个域类创建了四个控制器（ReceiptsController、ItemsController、CategoriesController 和 OwnersController）。域和控制器都在 com.receipts 包中。

在每个控制器中，我只有以下内容：

```
package com.receipts

class ReceiptsController {

     static scaffolding = Receipts

} 
```

但是，当我启动服务器 (localhost:8080) 时，对于四个控制器中的每一个，我都会收到以下错误：

```
"The requested resource (/Receipts/receipts/index) is not available" 
```

有谁知道这里发生了什么？我还尝试了以下脚手架格式：

*   静态脚手架 = true
*   def 脚手架 = 收据
*   def 脚手架 = 真

...而且那些也不起作用。我还尝试为 Receipts 域类生成视图，但这也没有做任何事情。清理项目也没有。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:46:59.730

正确的代码是

```
static scaffold = true 
```

# bash - 使用 Bash 重命名名称中间的多个文件的一小部分？

> ID：11053558
> 
> 赞同：21
> 
> 时间：2012-06-15T15:18:40.700
> 
> 标签：bash

我只是想改变这个

```
cc211_AMBER_13062012i.II  cc211_GROMOS_13062012i.II
cc211_CHARM_13062012i.II  cc211_OPLS_13062012i.II 
```

至

```
cc211_AMBER_15062012i.II  cc211_GROMOS_15062012i.II
cc211_CHARM_15062012i.II  cc211_OPLS_15062012i.II 
```

我试过了，

```
find -name "*.13 *" | xargs rename ".13" ".15" 
```

3 和第二个 asterix 之间通常没有空格，从我所看到的情况来看，这只是让它变成斜体。基本上，当它位于文件名的末尾时，有很多答案，asterix 似乎可以工作，但在这里我不能让它工作。

你所拥有的任何东西都会让我的生活更轻松！

编辑1：试用

```
-bash-4.1$ ls

cc211_AMBER_13062012.II  cc211_GROMOS_13062012.II
cc211_CHARM_13062012.II  cc211_OPLS_13062012.II

-bash-4.1$ rename 's/_13/_15/' cc*
-bash-4.1$ ls

cc211_AMBER_13062012.II  cc211_GROMOS_13062012.II
cc211_CHARM_13062012.II  cc211_OPLS_13062012.II 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-15T15:26:19.357

这个怎么样：

```
for i in *.II; do mv $i $(echo $i | sed 's/_13/_15/g'); done 
```

这将在所有带有扩展名的文件中替换`_13`为`_15``.II`

更多关于 sed的信息在[这里](http://www.grymoire.com/Unix/Sed.html)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-15T15:44:39.743

纯`bash`解决方案：

```
for i in cc*; do
  mv "$i" "${i/_13/_15}"
done 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-15T15:25:12.070

```
rename 's/_13/_15/' cc* 
```

应该做你想做的。正则表达式在所有以“cc”开头的文件中`s/_13/_15/`替换`_13`为。`_15`

```
$ ls
cc211_AMBER_13062012.II  cc211_GROMOS_13062012.II
cc211_CHARM_13062012.II  cc211_OPLS_13062012.II

$ rename 's/_13/_15/' cc*

$ ls
cc211_AMBER_15062012.II  cc211_GROMOS_15062012.II
cc211_CHARM_15062012.II  cc211_OPLS_15062012.II 
```

这仅适用于更新的 perl 版本的`rename`. 检查你有哪个版本`man rename`。如果页面顶部说

> Perl 程序员参考指南

你有 perl 版本。如果它说：

> Linux 程序员手册

你有标准（旧）版本。

对于旧版本，命令应该是：

```
rename _13 _15 cc* 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-19T17:09:19.487

在这种情况下，您可以使用以下命令：

```
rename -v "_130" "_150" *.II 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-06T10:08:02.187

我正在使用纯 Linux 解决方案：

```
### find all files that contains _DES in name and duplicate them adding _AUXLOCAL
for f in **/*_DES*; do
    cp "$f" "${f%.DES}_AUXLOCAL"
done 
###Rename all _AUXLOCAL files, removing _DES to _LOCAL
for f in **/*_AUXLOCAL*; do
  mv "$f" "${f/_DES/_LOCAL}"
done
###Rename all _AUXLOCAL files, removing _AUXLOCAL
for f in **/*_AUXLOCAL*; do
  mv "$f" "${f/_AUXLOCAL/}"
done 
```

我希望它有帮助

# javascript - 在 SciTE 中测试和编辑 JavaScript（独立的和 HTML 中的）？

> ID：11053560
> 
> 赞同：2
> 
> 时间：2012-06-15T15:18:50.577
> 
> 标签：javascript, html, scite

每当我尝试在 SciTE（Scintilla 文本编辑器）中运行“.js”文件时，我几乎总是会收到一条错误消息，指出某些变量未定义。我猜 SciTE 没有很多 JavaScript 库，但我不确定。

几次搜索后，我找到了[这](http://blog.dotsmart.net/2007/12/19/editing-and-testing-scripts-in-scite/) [两篇](http://blog.scriptoid.com/2010/07/run-javascript-from-scite.html)关于如何让 SciTE 将 JavaScript 测试打印到其输出的博客文章，而不是在按 F5 测试代码时打开 Web 浏览器。

我都试过了，但是我在第一个帖子的解决方案中遇到了与以前相同的错误，或者我收到了一个错误，说“'jrunscript' 不被识别为内部或外部命令，可运行程序或批处理文件”与第二个方法。

那么，是否可以在 SciTE 中测试 JavaScript 代码并将 JavaScript 输出（或错误）打印到 SciTE 的输出中？

我试过的简单示例代码：

控制台.log（“测试”）

我收到的错误消息：'Microsoft JScript 运行时错误：'控制台'未定义'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T21:18:55.933

**What is SciTe?**

SciTE is a SCIntilla based *Text Editor*. Lua is embedded with SciTe which allows you to access the Scintilla API.

```
# lua code example
`command.go.*.js=jrunscript $(FileNameExt)` 
```

**How to run js code in SciTe?**

Create a file called `testConsole.js` with the following content.

```
var console = console || {};
console.log = ( console.log || function( str ){
    if( typeof print == "function" ){
        print( "LOG: " + str + "\n" );
    }
    return "LOG: " + str;
});
console.log( "Javascript works." ); 
```

Open `testConsole.js` in SciTe.

To run the code, press `F5` or click `Tools` > `Go`.

An output window should appear showing

`LOG: Javascript works.`

**How do I configure SciTe to run javascript?**

I'm using SciTe 3.2.0\. Located [here](http://prdownloads.sourceforge.net/scintilla/wscite320.zip?download) In `wscite\wsite320\cpp.properties` at line: 424
change:
`command.go.*.js=cscript /nologo $(FileNameExt)`

to:
`command.go.*.js=jrunscript $(FileNameExt)`

if you want to use node.js, then change it to
`command.go.*.js=node $(FileNameExt)`

Make sure that you have the jrunscript or node in your path for the environment variables.
Tutorial [here](http://www.computerhope.com/issues/ch000549.htm)

**Do I have `jrunscript`?**

Here's the easiest way to check.
Open up run > type in `cmd` > type `jrunscript`.
`js>` should appear on the screen.

`jrunscript.exe` should be located here.
`C:\Program Files\Java\jdk1.7.0_01\bin\jrunscript.exe`

Download the lastest [Java SDK](http://www.oracle.com/technetwork/java/javase/downloads/index.html) if you can't find it.

**Error Messages**

**What does `'Microsoft JScript runtime error: 'console' is undefined'`**

This means Microsoft JScript ran your javascript and couldn't find the variable console.
Define console to get rid of the error message.

```
var console = console || {};
console.log = ( console.log || function( str ){
    if( typeof print == "function" ){
        print( "LOG: " + str + "\n" );
    }
    return "LOG: " + str;
}); 
```

Microsoft JScript might be located here:
`C:\Windows\Microsoft.NET\Framework\v4.0.30319\jsc.exe`

**Error:** `Input Error: There is no file extension in "location"`

Solution: You need to configure the cpp.properties file for javascript.

**Error:** `script file test is not found`

Solution: Rename the file. Make sure that it doesn't have any spaces.

# java - 强制 JDO 完全初始化（使用 datanucleus 库）

> ID：11053561
> 
> 赞同：0
> 
> 时间：2012-06-15T15:18:52.033
> 
> 标签：java, google-app-engine, jdo, datanucleus

我正在处理热身请求以最大限度地减少我的请求延迟： [https ://developers.google.com/appengine/docs/java/config/appconfig#Warmup_Requests](https://developers.google.com/appengine/docs/java/config/appconfig#Warmup_Requests)

在初始化期间，我执行：

```
PersistenceManager pm = PMF.get().getPersistenceManager(); 
```

..但从日志中我看到它没有解析存储类元数据的所有 .jdo 文件。它们仅在我第一次调用此函数“getObjectById”时才被解析（例如）..

是否可以强制 datanucleus 完全读取所有元数据以便在第一个 getObjectById 命中 PersistenceManager 时完全准备好？

谢谢你，米歇尔

==================================================== ============================= 更新：我尝试了这个persistence.xml文件：

```
<persistence-unit name="my-transaction">
        <mapping-file><path-to-first-jdo-file></mapping-file>
        <mapping-file><path-to-second-jdo-file></mapping-file>
        <mapping-file><path-to-third-jdo-file></mapping-file>
        <properties>
            <property name="datanucleus.NontransactionalRead" value="true"/>
            <property name="datanucleus.NontransactionalWrite" value="true"/>
            <property name="datanucleus.ConnectionURL" value="appengine"/>
        </properties>
    </persistence-unit> 
```

与 jdoconfig.xml 相关的：

```
<persistence-manager-factory name="my-transaction">
    <property name="javax.jdo.PersistenceManagerFactoryClass" value="org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory" />
    <property name="javax.jdo.option.ConnectionURL" value="appengine" />
    <property name="javax.jdo.option.NontransactionalRead" value="true" />
    <property name="javax.jdo.option.NontransactionalWrite" value="true" />
    <property name="javax.jdo.option.RetainValues" value="true" />
    <property name="datanucleus.appengine.autoCreateDatastoreTxns" value="true" />
    <property name="datanucleus.appengine.allowMultipleRelationsOfSameType" value="true" />
    <property name="datanucleus.appengine.datastoreReadConsistency" value="STRONG" />
    <property name="datanucleus.appengine.ignorableMetaDataBehavior" value="ERROR" />
    <property name="javax.jdo.option.Multithreaded" value="true"/>
    <property name="javax.jdo.option.Optimistic" value="false" />

</persistence-manager-factory> 
```

..但我继续在日志中看到以前的行为。在加载请求期间：

```
org.datanucleus.store.types.TypeManager addJavaType: Adding support for Java type <class> 
```

.. 在第一个真正需要类映射的请求期间（例如 getObjectById）：

```
org.datanucleus.metadata.xml.MetaDataParser parseMetaDataStream: Parsing MetaData file <class>.jdo 
```

所以第一个检索对象的请求比后面的请求要长，因为它需要解析 XML 文件。怎么了？

我正在使用数据核 1.1.5

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:53:26.667

指定定义所有类/映射文件的“persistence.xml”。然后在启动时读取/加载。也不支持旧版本的 DataNucleus，因此请使用较新版本的 GAE JPA 插件和 DataNucleus v3.x

# java - Java重载：数字，数字；整数，双

> ID：11053564
> 
> 赞同：14
> 
> 时间：2012-06-15T15:18:58.413
> 
> 标签：java, overloading

这两天我有一个Java考试，我想不出这个问题的答案：

```
class ClassA {
 public String foo(Integer x , int y) {
  return "Integer, int";
 }
 public String foo(int x, Double y) {
  return "int, Double";
 }
 public String foo(Number x, Number y) {
  return "Number, Number";
 }
 public String foo(Object x, Object y) {
  return "Object, Object";
 }
 public static void main(String... args) {
  ClassA a = new ClassA();
  System.out.print(a.foo(5, 1.2f) + " ");
  System.out.println(a.foo(null, null));
 }
} 
```

输出是什么？

答案是：

```
Number, Number Number, Number 
```

我知道java总是选择最指定的方法，这就是为什么`a.foo(null,null);`会调用`Number,Number`方法而不是`Object,Object`方法。但是为什么`a.foo(5,1.2f);`还唤起`Number,Number`方法而不是`int,Double`方法？

但是还有一件事可能会有所帮助：如果我删除`f`after `1.2`，那么调用是： `a.foo(5,1.2);` 我收到编译器错误，它无法在`Number,Number`and`int,Double`方法之间进行选择...

真的很有帮助，如果你们能向我解释一下:)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T15:25:21.707

`1.2f`不被 a 包裹`Double`，它被 a 包裹`Float`。由于`Float`不是 的子类`Double`（它们是 的不同子类`Number`），因此可以使用的最具体的方法签名是`foo(Number,Number)`.

一旦你删除`f`， 1.2 将默认被视为 a `double`（原语，而不是包装类），它可以被自动装箱为 a `Double`。但是 5 也可以自动装箱为`Integer`，从而导致歧义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T15:31:20.303

这里有两个重要因素。

首先，`1.2f`不是一个`Double`。这是一个`Float`。`(int, Double)`功能完全不匹配。`(Number, Number)`是最合适的。

其次，即使您将其更改为`1.2`它仍然不是`Double`. 它是一个`double`. 也就是说，它是一个原始的，而不是一个对象。现在，Java 仍然会很乐意将 a 传递给`double`一个想要 a 的函数，`Double`而没有太多抱怨，但是在这种情况下，您通过给它可能进行的两次有效转换而混淆了它：

1.  转换`5`为一个`Integer` ***并***转换`1.2`为一个`Double`
2.  保留`5`为原始`int`但转换`1.2`为`Double`.

对于哪一个更可取，没有一个规则。Java 会产生一个编译器错误，它有一个模棱两可的函数调用，并迫使您选择您喜欢的那个（通过手动将它们中的一个或两个包装在对象中）。

顺便说一句，如果您有一个采用的方法，`(int, double)`则根本不会有歧义：该方法实际上与 and 的现有类型匹配`5`，`1.2`因此将调用它。事实上，这里的一些论点是导致混乱的包装对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-30T06:42:15.517

通用答案：

```
public class OverloadingNumeric {

    public void print(int x){
        System.out.println("int");
    }

    public void print(long x){
        System.out.println("long");
    }

    public void print(float x){
        System.out.println("float");
    }

    public void print(double x){
        System.out.println("double");
    }

    public void print(Integer x){
        System.out.println("Integer");
    }

    public void print(Long x){
        System.out.println("Long");
    }

    public void print(Float x){
        System.out.println("Float");
    }

    public void print(Double x){
        System.out.println("Double");
    }

    public void print(Number x){
        System.out.println("Double");
    }

    public void print(Object x){
        System.out.println("Object");
    }

    public static void main(String[] args) {
        OverloadingNumeric obj = new OverloadingNumeric();
        /*
         * Primitives will take more precedence
         * of calling instead of wrapper class arguments,
         */
        obj.print(10);
        obj.print(10l);
        obj.print(10f);
        obj.print(10d);
        obj.print(10.1);
        //obj.print(999999999999999); Error: this letral type int is out of range
        obj.print(999999999999999l); 

        /*
         * OUTPUT
         * int
         * long
         * float
         * double
         * double
         * long
         */

        /*
         * Assume all primitive argument methods
         *  are commented. then calling the same again
         */
        obj.print(10);
        obj.print(10l);
        obj.print(10f);
        obj.print(10d);
        obj.print(10.1);

        //obj.print((Double)10); //Cannot cast int to Double 
        obj.print((double)10); //Success 
        //obj.print((Float)10); //Cannot cast int to Float 
        obj.print((float)10); //Success 
        //obj.print(null); ERROR AMBIGUOUS

        /*
         * OUTPUT
         * Integer
         * Long
         * Float
         * Double
         * Double
         * Double
         * Float
         * 
         */
    }
}

interface SuperIfc {}

class SuperClass implements SuperIfc{}

class SubClass extends SuperClass {}

public class OverloadingTest {

    public void print(SuperIfc x){
        System.out.println("SuperIfc");
    }

    public void print(SuperClass x){
        System.out.println("SuperClass");
    }

    public void print(SubClass x){
        System.out.println("SubClass");
    }

    public void print(Object x){
        System.out.println("Object");
    }

    public static void main(String[] args) {
        OverloadingTest obj = new OverloadingTest();
        SuperClass superObj = new SuperClass();
        SubClass subObj = new SubClass();
        obj.print(superObj);
        obj.print(subObj);
        obj.print(null);

        obj.print((SuperIfc)superObj);
        obj.print((SuperIfc)subObj);
        obj.print((SuperIfc)null);
        /*
         *  OUTPUT
         * SuperClass
         * SubClass
         * SubClass
         * SuperIfc
         * SuperIfc
         * SuperIfc
         */
    }
} 
```

# sql - 将数据插入 Hive 表

> ID：11053567
> 
> 赞同：24
> 
> 时间：2012-06-15T15:19:10.760
> 
> 标签：sql, insert, hadoop, hive

我是新来的蜂巢。我已经成功地设置了一个用于开发目的的单节点 hadoop 集群，并且在它之上，我安装了 hive 和 pig。

我在 hive 中创建了一个虚拟表：

```
create table foo (id int, name string); 
```

现在，我想将数据插入到这个表中。我可以像 sql 一样一次添加一条记录吗？请用类似的命令帮助我：

```
insert into foo (id, name) VALUES (12,"xyz); 
```

另外，我有一个 csv 文件，其中包含以下格式的数据：

```
1,name1
2,name2
..
..

..

1000,name1000 
```

如何将此数据加载到虚拟表中？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-04T09:51:18.347

我认为最好的方法是：
a）将数据复制到 HDFS（如果它不存在）
b）像这样在 CSV 上创建外部表

```
CREATE EXTERNAL TABLE TableName (id int, name string)
ROW FORMAT DELIMITED   
FIELDS TERMINATED BY ',' 
LINES TERMINATED BY '\n'
STORED AS TEXTFILE
LOCATION 'place in HDFS'; 
```

c) 您可以通过向 TableName 发出查询来开始使用它。
d) 如果要将数据插入到其他 Hive 表中：

```
insert overwrite table finalTable select * from table name; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-24T08:54:40.380

没有直接的方法可以从终端一次插入 1 条记录，但是，这里有一个简单直接的解决方法，我通常在想测试某些东西时使用它：

假设这`t`是一个至少有 1 条记录的表。列的类型或数量无关紧要。

```
INSERT INTO TABLE foo
SELECT '12', 'xyz'
FROM t
LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-11T00:52:17.540

Hive 显然支持从 Hive 0.14 开始的 INSERT...VALUES。

请参阅“从 SQL 插入表”部分：[https ://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-20T08:16:05.903

您插入到一个文本文件或日志文件中的任何数据都可以放在 hdfs 中的一个路径上，然后在 hive 中编写如下查询

```
 hive>load data inpath<<specify inputpath>> into table <<tablename>>; 
```

例子：

```
hive>create table foo (id int, name string)
row format delimited
fields terminated by '\t' or '|'or ','
stored as text file;
table created..
    DATA INSERTION::
    hive>load data inpath '/home/hive/foodata.log' into table foo; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-02T18:16:15.200

要插入像 (12,"xyz) 这样的临时值，请执行以下操作：

```
insert into table foo select * from (select 12,"xyz")a; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-13T18:38:05.810

你可以试试这个，我开发了一个从 csv 文件生成 hive 脚本的工具。以下是有关如何生成文件的几个示例。工具——https: [//sourceforge.net/projects/csvtohive/?source=directory](https://sourceforge.net/projects/csvtohive/?source=directory)

1.  使用浏览选择一个 CSV 文件并设置 hadoop 根目录，例如：/user/bigdataproject/

2.  工具使用所有 csv 文件生成 Hadoop 脚本，以下是生成的 Hadoop 脚本示例，用于将 csv 插入 Hadoop

    ```
    #!/bin/bash -v

    hadoop fs -put ./AllstarFull.csv /user/bigdataproject/AllstarFull.csv
    hive -f ./AllstarFull.hive

    hadoop fs -put ./Appearances.csv /user/bigdataproject/Appearances.csv
    hive -f ./Appearances.hive

    hadoop fs -put ./AwardsManagers.csv /user/bigdataproject/AwardsManagers.csv
    hive -f ./AwardsManagers.hive 
    ```

3.  生成的 Hive 脚本示例

    ```
    CREATE DATABASE IF NOT EXISTS lahman;

    USE lahman;

    CREATE TABLE AllstarFull (playerID string,yearID string,gameNum string,gameID string,teamID string,lgID string,GP string,startingPos string) row format delimited fields terminated by ',' stored as textfile;

    LOAD DATA INPATH '/user/bigdataproject/AllstarFull.csv' OVERWRITE INTO TABLE AllstarFull;

    SELECT * FROM AllstarFull;
    ```

谢谢维杰

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-09T06:49:46.267

这是[hive 的限制](https://sites.google.com/site/hadoopandhive/home/limitations-of-hive)。

1.数据插入后无法更新

**2.没有“插入表值...”语句**

3.您只能使用批量加载加载数据

4.没有“删除”命令

5.只能批量删除

但是您仍然希望从配置单元控制台插入记录，而不是*从 statck 中选择*。参考[这个](https://stackoverflow.com/questions/17425492/hive-insert-query-like-sql)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-15T12:21:30.830

您可以使用以下代码行将值插入到已经存在的表中。这里的表是 db_name.table_name 有两列，我在表中插入 'All','done' 作为一行。

```
insert into table db_name.table_name
select 'ALL','Done'; 
```

希望这会有所帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-13T21:01:19.343

这是从版本 hive 0.14 支持的

插入表 pd_temp(dept,make,cost,id,asmb_city,asmb_ct,retail) 值('production','thailand',10,99202,'northcarolina','usa',20)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-15T19:24:12.883

Hadoop 文件系统不支持将数据附加到现有文件。虽然，您可以将 CSV 文件加载到 HDFS 并告诉 Hive 将其视为外部表。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-09T11:26:10.943

用这个 -

```
create table dummy_table_name as select * from source_table_name; 
```

这将使用 上可用的现有数据创建新表`source_table_name`。

# objective-c - Cocos2d循环添加子项：无法添加子项

> ID：11053570
> 
> 赞同：0
> 
> 时间：2012-06-15T15:19:18.747
> 
> 标签：objective-c, cocos2d-iphone

我对 Objective-C 和 Cocos2d 还是很陌生，我真的不明白为什么我会在下面的代码中收到以下错误。能否请你帮忙 ？

```
- (NSArray *) menuItemsArray
{   
    NSMutableArray *array = [NSMutableArray alloc];
    for (Player * player in playersArray) {
        NSLog(@"creating menu item with image %@",player.imageFilename);
        CCLayer *newPage = [[CCLayer alloc] init];
        CCMenuItemImage *titem = [CCMenuItemImage itemFromNormalImage:player.imageFilename
                                                    selectedImage:player.imageFilename
                                                           target:self selector:@selector(playerSelected:)];

        CCMenu *menu = [CCMenu menuWithItems: titem, nil];
        menu.position = ccp(self.contentSize.width/2, self.contentSize.height/2);

        NSLog(@"before adding item to layer");
        //[titem removeFromParentWithCleanup:YES];
        [newPage addChild:titem];
        //[newPage release];
        NSLog(@"after adding item to layer");
        [array addObject:newPage];

        /*
        [titem release];*/
        //[newPage release];
        //[menu release];
    }    
return array;
} 
```

我得到了错误：

```
2012-06-15 17:13:11.003 Killer[3222:707] *** Assertion failure in -[CCLayer     addChild:z:tag:], /Users/max/Documents/workspace/Killer/Killer/libs/cocos2d/CCNode.m:388
2012-06-15 17:13:11.006 Killer[3222:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'child already added. It can't be added again' 
```

对不起，如果这个问题非常低级......如果你能帮助我，谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:25:12.897

您的错误是您试图将创建的 menuItem 添加到两个父母。仅将其添加到菜单中。然后将菜单添加到图层。更换你的线路

```
[newPage addChild:titem]; 
```

有了这个

```
[newPage addChild:menu]; 
```

您将收到每个玩家的一系列页面。

# scala - 如何使用 Scala 反射 API 来获取所有包含的类

> ID：11053571
> 
> 赞同：12
> 
> 时间：2012-06-15T15:19:26.333
> 
> 标签：scala, reflection

我上了这样的课：

```
trait ThirdParty { def invoke = println("right") }

trait WeatherIcon { def invoke = println("wrong") }

class MyClass {

    object objA extends ThirdParty

    object objB extends WeatherIcon

} 
```

如果它是类的实例，我如何使用 Scala 反射 API 遍历包含的对象并调用方法`ThirdParty`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T18:39:14.223

根据 soc 写的，我得到了这个：

```
import scala.reflect.runtime.universe._
val members = typeOf[MyClass].members.filter(_.typeSignature match {
  case tpe if tpe <:< typeOf[ThirdParty] => true
  case NullaryMethodType(tpe) if tpe <:< typeOf[ThirdParty] => true
  case MethodType(Nil, tpe) if tpe <:< typeOf[ThirdParty] => true
  case _ => false
}) 
```

让我解释一下模式匹配。a`val`或 an的类型`object`可以直接比较，但函数的类型略有不同。在这里，我匹配没有参数列表的方法和具有零参数列表的方法。

与 soc 的答案相比，这里有一些差异。首先，我使用`members`而不是`declarations`. 这将返回继承的成员以及在`MyClass`其自身上声明的成员。

其次，我检查它是一个值成员，而不是一个类型成员。您只能在值上调用方法，因此它看起来是一个合理的限制，尽管可能没有必要。更新。该`isValue`方法在 2.10.0-RC1 中不再可用，所以我去掉了勾选。

最后，我使用`<:<`而不是检查每个父母是否相等。

现在，到调用。我将更改上面的代码，因为调用取决于您拥有什么样的成员，所以我们最好同时进行过滤和调用。假设这就是我们想要的，我也会从 to 改变`members`。`nonPrivateMembers`更新。`nonPrivateMembers`在 2.10.0-RC1 中不再可用，`filter(!_.isPrivate)`如有必要，请使用。

而且我还将避免使用`typeOf`，它不适用于 REPL 上的镜像。更新。在 2.10.0-RC1`typeOf`中运行良好，但我将保持实现的框架不变。

以上所有内容基本上都与事物的结构有关：一个类型的成员是什么，它们是什么类型的成员，等等。当你想*使用*这些东西时，你需要镜子。

每当你有某事物的符号或类型——类、方法、obj 等——你就通过*镜子*作用于该事物。要（反射性地）作用于对象的实例，您需要一个实例镜像。要对方法采取行动，您需要一个方法镜像，依此类推。

因此，让我们尝试构建一个函数来执行要求的操作：

```
import scala.reflect.runtime.universe._
def invoke[Target : TypeTag](obj: Any): Seq[Target] = {
  val mirror = runtimeMirror(obj.getClass.getClassLoader)
  val insMirror = mirror reflect obj
  val originType = insMirror.symbol.typeSignature
  val targetType = typeTag[Target].tpe

  val members = originType.members

  val result = members collect (member => member.typeSignature match {
    case tpe if tpe <:< typeOf[ThirdParty] =>
      if (member.isModule)
        (insMirror reflectModule member.asModule).instance
      else
        (insMirror reflectField member.asTerm).get
    case NullaryMethodType(tpe) if tpe <:< typeOf[ThirdParty] =>
      (insMirror reflectMethod member.asMethod).apply()
    case MethodType(Nil, tpe) if tpe <:< typeOf[ThirdParty] =>
      (insMirror reflectMethod member.asMethod).apply()
  })

  result.map(_.asInstanceOf[Target]).toSeq
} 
```

请注意，嵌套模块无法使用 Scala 2.10.0-M4 恢复——这应该可以使用 M5 或 RC1。要使用 M4 测试此代码，请将模块代码替换为`null`.

这是一个示例：

```
scala> class MyClass {
    object objA extends ThirdParty
    object objB extends WeatherIcon
    val aVal = new ThirdParty {}
    val bVal = new WeatherIcon {}
    def aDef = new ThirdParty {}
    def bDef = new WeatherIcon {}
    def anotherDef() = new ThirdParty {}
    def yetAnotherDef() = new WeatherIcon {}
  }
defined class MyClass

scala> invoke[ThirdParty](new MyClass)
res88: Seq[ThirdParty] = List(MyClass$$anon$5@c250cba, MyClass$$anon$3@54668d90, MyClass$$anon$1@18d8143a, null) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:07:01.613

我无法提供完整的解决方案，但也许这是一个开始：

```
import reflect.runtime.universe._

val myClassType = typeOf[MyClass]    // Get the type of McClass
val thirdPartyType = typeOf[ThirdParty] // Get the type of ThirdParty
val methodToInvoke = newTermName("invoke")

val declsOfMyClass = myClassType.declarations // Get the declarations of MyClass

val subtypesOfThirdParty = 
  declsOfMyClass.filter(_.typeSignature.parents.contains(thirdPartyType))

val methodsToInvoke =             // Now we have the methods.
  subtypesOfThirdParty.map(tps => tps.typeSignature.member(methodToInvoke))

// TODO: Invoke! 
```

我想还有比这更直接的方法。

# performance - Hadoop 是否适合为 50GB 数据集中的 100 字节记录提供服务？

> ID：11053578
> 
> 赞同：0
> 
> 时间：2012-06-15T15:19:51.313
> 
> 标签：performance, hadoop

我们有一个问题，Hadoop 是否适合不需要运行应用程序但需要非常快速地读写少量数据的简单任务。

要求是能够以每秒 30 的速率编写带有一对索引的大约 100-200 字节长的消息，同时能够以每秒大约 10 的速率读取（通过这两个索引搜索）。读取查询必须非常快 - 每个查询最多 100-200 毫秒并返回少量匹配记录。

总数据量预计将达到 50-100 GB，并将通过删除较旧的记录（例如删除 14 天以上的记录的日常任务）保持此速度

如您所见，总数据量并没有那么大，但我们担心 Hadoop 的搜索速度可能会比我们需要的要慢。

Hadoop是一个解决方案吗？

谢谢尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:27:32.827

单独的 Hadoop 在提供许多小数据段方面非常糟糕。然而，HBase 是一个类似索引表数据库的系统，旨在运行在 Hadoop 之上。它非常擅长提供小型索引文件。我会研究它作为解决方案。

另一个需要注意的问题是将数据导入 HDFS 或 HBase 并非易事。它会使你的集群变慢很多，所以如果你选择 Hadoop，你还必须解决如何将这 75GB 放入 HDFS 以便 Hadoop 可以接触它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:04:12.317

As Sam noted HBase is the Hadoop stack solution that can handle your requirements. However I wouldn't go with Hadoop if these are your only requirements from the data.

You can go with other NoSQL solutions like MongoDB or CouchDB or even MySQL or Postgres

# iphone - iPhone base64编码图片异步下载

> ID：11053582
> 
> 赞同：1
> 
> 时间：2012-06-15T15:20:07.970
> 
> 标签：iphone

我有一个应用程序需要以 base64 编码字符串异步下载图像（服务器以 Base64 编码格式返回图像），我正在使用 AsyncImage 视图，但似乎 AsyncImageView 库只接受 url 异步下载。任何知道如何解决这个问题的人，如果我将一次下载所有图像然后我可以将该编码字符串传递给

```
 [self.imageView loadImageFromURL:[NSURL URLWithString:[EncodedString]]]; 
```

但这没有意义，因为所有图像仍将在 UIThread 中下载。请帮忙。谢谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:36:12.977

您**应该**查看[Cocoa Helpers](https://github.com/enormego/cocoa-helpers) - 它具有用于异步加载的 SimpleHTTPLoader 和完全满足您需要的 ImageViewCached。您创建的不是 imageView，而是 ImageViewCached，只需为其设置 URL。它会为您完成其余的工作。

但是，如果您想按照自己的方式进行操作：

我不保证下面的代码是正确的，但整个想法是（我从工作代码中获取并重写它以对应您的任务。我使用可可助手进行 base64 解码。您可以使用自己的方法。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
dispatch_async(queue, ^{    
  NSString *query = [NSString stringWithFormat:@"site.example/image.jpg"];
  NSString *data = [[[NSString alloc] initWithContentsOfURL:[NSURL URLWithString:query] encoding:NSUTF8StringEncoding error:nil] autorelease];
  theImage = [UIImage imageWithData:(rfc::from_base64(data))]
    dispatch_sync(dispatch_get_main_queue(), ^{
        self.imageview.image = theImage;}
    });
}); 
```

PS 对于 base64 编码的图像，您必须修改 ImageViewCached 才能加载*和解码*图像。

# objective-c - 目标 c 中的正则表达式帮助

> ID：11053587
> 
> 赞同：2
> 
> 时间：2012-06-15T15:20:27.423
> 
> 标签：objective-c, regex

```
<NSSimpleRegularExpressionCheckingResult: 0x100217890>{0, 4}{<NSRegularExpression: 0x100214700> test 0x1} 
```

这是存储正则表达式搜索结果的数组中的一个元素。

我得到了我想要的：“测试”。但是我不想要它周围的所有东西，即

```
<NSSimpleRegularExpressionCheckingResult: 0x100217890>{0, 4}{<NSRegularExpression: 0x100214700> etc 
```

我有一种感觉，我将不得不向这个元素发送一些东西，即

[元素字符串值];

但我需要一点帮助来发现那是什么..

我的完整代码如下：

```
NSString *test = @"test 123 test";
NSRegularExpression* regex = [[NSRegularExpression alloc] initWithPattern:@"test" options:NSRegularExpressionCaseInsensitive error:nil];
NSArray* result = [regex matchesInString:test options:0 range:NSMakeRange(0, [test length])];
NSLog(@" %@", [result objectAtIndex:0]); 
```

这表明

```
 <NSSimpleRegularExpressionCheckingResult: 0x105b17890>{0, 4}{<NSRegularExpression: 0x105b14700> test 0x1} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:00:04.730

```
[regex matchesInString... 
```

为您提供 NSTextCheckingResults 的 NSArray。也许您想使用 firstMatchInSting:options:range: 它将为您提供 NSTextCheckingResult，您可以从中获取范围 (NSRange)，您可以使用 substringWithRange: 方法将其应用于您的字符串。

我希望你能够明白。如果不是 - 我会更仔细地解释。不过，请阅读[NSRegularExpression 参考](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)和[NSTextCheckingResult 参考](https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSTextCheckingResult_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSTextCheckingResult)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:48:45.627

好的。我正在制作过程。如果我将“regularExpression”发送到元素，它会将结果缩小到

```
<NSRegularExpression: 0x106214700> test 0x1 
```

我知道这是一个对象的打印输出，但我仍然不确定如何隔离文本！

# ajax - 使用 MappingJacksonHttpMessageConverter 和 POST 将 json 映射到 pojo

> ID：11053592
> 
> 赞同：0
> 
> 时间：2012-06-15T15:20:50.683
> 
> 标签：ajax, rest, spring-mvc

我正在尝试使用 Spring MVC 3.1 制作与这篇文章非常相似的东西：

[JQuery、Spring MVC @RequestBody 和 JSON - 使其协同工作](https://stackoverflow.com/questions/5908466/jquery-spring-mvc-requestbody-and-json-making-it-work-together)

并尝试将响应作为自定义类获取，例如示例中的“FooBar”。

我的 ajax 调用如下所示：

```
// var rule = "giveThisATry";
var rule = {
    id : 1,
    name : {
        name1 : "1",
        name2 : "2",
        name3 : "3",
        name4 : "4"
    }
};
$.ajax({
    url : "http://localhost:8080/spring2/save",
    type : "POST",
    dataType : "json",
    //contentType : "application/json; charset=utf-8",
    data : rule,
    success : function(data) {
        alert("success saveRule: " + data);
    },
    error : function(request, status, error) {
        alert("error saveRule: " + request.responseText);
    }
}); 
```

我的休息方法如下所示：

```
@RequestMapping(method = RequestMethod.POST, value = "/save")
public @ResponseBody MyClass save(@RequestBody MyClass instance, final HttpServletResponse response) {
    response.setHeader("Access-Control-Allow-Origin", "*");
    return MyDB.Save(instance);
} 
```

现在无论我做什么，Spring 都不会将 ajax 调用映射到这个方法。另外，如果我在我的 ajax 调用中取消注释该行：

```
contentType : "application/json; charset=utf-8", 
```

Chrome 会将 "request-method" 更改为 "OPTIONS" ：

```
Request Method:OPTIONS
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:Origin, Content-Type, Accept
Access-Control-Request-Method:POST
Cache-Control:no-cache
Connection:keep-alive
Host:localhost:8080
Origin:http://127.0.0.1:8020
Pragma:no-cache
Referer:http://127.0.0.1:8020/JQueryPOC/src/index.html
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko)     Chrome/17.0.963.56 Safari/535.11
Response Headersview source
Allow:GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS
Content-Length:0
Date:Fri, 15 Jun 2012 15:07:19 GMT
Server:Apache-Coyote/1.1 
```

现在我如何测试/调试/控制 MappingJacksonHttpMessageConverter 以便我可以使用 requestbody 或其他东西将 json 映射到 pojo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:10:33.350

我看到你必须将其转换`rule`为 Json 字符串的一件事 - 这个插件可以帮助你：[http ://code.google.com/p/jquery-json/](http://code.google.com/p/jquery-json/) `data : $.toJSON(rule)`

# linux - 修复明显损坏的 pdf 并减小文件大小

> ID：11053596
> 
> 赞同：3
> 
> 时间：2012-06-15T15:21:00.183
> 
> 标签：linux, pdf, compression, pdftk

我有一个 PDF 文件（4.6MB），它是通过`pdftk`在 Ubuntu 12.04 中使用 6 个不同的 PDF（包含文本和位图图形）组合而成的。我希望在不影响其质量的情况下将此文件压缩到接近 2MB 的大小。

我尝试了 pdftk 的“压缩”选项（无法将其压缩到 2 MB），还尝试先将其转换为 ps，然后再转换为 pdf，它给出了以下警告：

> ****警告：将“0000000000 XXXXX n”视为免费条目。

然后挂起。`qpdf`也未能说文件已损坏。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T22:37:37.333

Ghostscript 给你什么结果？试试这个命令：

```
gs \
  -o output.pdf \
  -sDEVICE=pdfwrite \
  -dPDFSETTINGS=/screen \
   input.pdf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T16:29:54.400

这个pdf文件有保留信息吗？如果它没有机密数据，那将会很有趣

无论如何，很多时候 qpdf 失败，**Multivalent**工作

您可以尝试使用它的**压缩工具**（它也尝试修复 pdf 文件）

**多价**

*   [https://rg.to/file/c6bd7f31bf8885bcaa69b50ffab7e355/Multivalent20060102.jar.html](https://rg.to/file/c6bd7f31bf8885bcaa69b50ffab7e355/Multivalent20060102.jar.html) （包含工具的最新免费版本，当前本身没有工具）

> java -cp path....to/Multivalent.jar tool.pdf.Compress file.pdf

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-26T11:48:39.617

这对我来说可以修复损坏的 PDF

```
sudo apt-get install mupdf-tools 
```

```
mutool clean input.pdf output.pdf 
```

# c# - 如何模拟 CreateResponse HttpRequestMessage 上的扩展方法

> ID：11053598
> 
> 赞同：69
> 
> 时间：2012-06-15T15:21:03.337
> 
> 标签：c#, unit-testing, asp.net-mvc-4, mocking

我正在使用 ASP.Net MVC 4 RC 的 ApiController，我正在尝试对 GET 方法进行单元测试。

此方法使用 上的`CreateResponse<T>`方法`HttpRequestMessage`，但我不知道如何模拟它或使其正常运行。

该方法的主体包含以下内容：

```
MediaTypeHeaderValue header = new MediaTypeHeaderValue(versionedSmartBlock.ContentType);
var response = Request.CreateResponse<SmartBlock>(
    HttpStatusCode.OK, versionedSmartBlock, header); 
```

在我的单元测试中，我创建了一个空的`HttpRequestMessage`：

```
CallsController api = new CallsController(
    managerMock.Object, config, adapterFactoryMock.Object);
api.Request = new HttpRequestMessage(
    HttpMethod.Get, "http://localhost/Initiate?ern=%2B44123456789");    
var response = api.Get("+44123456789", null); 
```

但它只是生成一个`InvalidOperationException`：

> 请求没有关联的配置对象或提供的配置为空。

有没有人对我如何配置它`HttpRequestMessage`以使该`CreateResponse`方法真正发挥作用有任何指示？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-06-15T16:57:05.420

这是通过指定一个空配置来解决的：

```
request.Properties.Add(HttpPropertyKeys.HttpConfigurationKey, new HttpConfiguration()); 
```

我从这里得到了答案

[使用 Request.CreateResponse 进行 ASP.NET WebApi 单元测试](https://stackoverflow.com/questions/10868673/asp-net-webapi-unit-testing-with-request-createresponse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T15:37:27.307

WebAPI 1 与 VB 在这里！

我设法混合了您上面链接中的响应，以使其像这样简单地工作：

```
Dim request As HttpRequestMessage = New HttpRequestMessage()
Return request.CreateResponse(HttpStatusCode.BadRequest, myCustomClassObject, GlobalConfiguration.Configuration) 
```

只是张贴以防万一它对任何人有帮助。

# .net - 处理队列时管理线程的正确方法

> ID：11053599
> 
> 赞同：0
> 
> 时间：2012-06-15T15:21:03.483
> 
> 标签：.net, multithreading, .net-4.5

我有一个队列（实际上是 3 个不同的队列，但我不相信这会有所作为）。队列包含离散的工作单元。

我有一个`QueueManager`产生一个新线程并返回的。新线程查看队列，获取一份工作，然后生成一个新线程来处理它。

我显然希望限制并发线程的数量，并且看不到有任何理由在完成工作后不重用线程。

有些作业需要一段时间才能运行（几分钟/几小时），我已经读到这`ThreadPool`对于需要几秒钟以上的任何事情来说都不是一个好的选择。

实际上，我想实现 ThreadPool 但有更多控制权。

那么......实现这一目标的标准、最佳实践方法是什么？

看来我需要（假设队列长度 > `MaxThreadCount`）

*   创造新的工作，直到我击中`MaxThreadCount`
*   等到任何线程完成
*   从队列中获取下一个作业并将其分配给线程
*   重复
*   如果队列为空，则休眠一段时间，然后重新检查

（在这种情况下，队列在数据库中，因此添加项目时没有事件 - 我假设我只需要轮询）

许多工作涉及从远程站点/API 检索页面，通常是重复的。因此，我相信我会受益于拥有比核心多得多的线程（因为它们中的大多数将等待网络）。因此，我*认为* `WaitHandle`不合适，因为它有 64 线程的限制。

这显然是一种非常常见的模式，所以我认为必须有一种成熟的方式来实现它？

如果有人能给我举一个很好的例子，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:26:14.227

使用 TPL（任务并行库）。它正是为此目的而设计的。

[http://msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

具体来说，听起来您应该使用[TaskScheduler实例创建一个](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler)[TaskFactory](http://msdn.microsoft.com/en-us/library/dd321411)，该实例的[MaximumConcurrencyLevel](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.maximumconcurrencylevel)已设置为您想要的线程数。然后，不要将工作项放入队列中，而是调用[TaskFactory.StartNew](http://msdn.microsoft.com/en-us/library/dd321439)。它将为您处理工作排队。

# php - Magento 有没有办法在外面存储/管理前端用户身份验证？（LDAP等）

> ID：11053601
> 
> 赞同：1
> 
> 时间：2012-06-15T15:21:13.290
> 
> 标签：php, magento

我正在开发一个多站点项目（其中一半是 Magento 商店），我希望所有用户只有一个入口点，对用户透明，所有内容都在同一个系统/数据库中网站。

我想知道核心用户身份验证是否有替代方案？我看到有 LDAP 插件，但仅用于后端访问。前端认证有什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:07:40.437

我找到了一种方法。Magento 提供了一种对核心进行过度分类的简单方法。因此可以覆盖客户控制器并绕过 Magento 身份验证。但是您需要跟踪与订阅、密码更改等相关的所有内容，以覆盖这些方法并将它们链接到 LDAP

# java - 计算一个元素在数组中出现的次数 - Java

> ID：11053607
> 
> 赞同：1
> 
> 时间：2012-06-15T15:21:26.820
> 
> 标签：java, arrays

我最近用 Python 做了一个非常简单的练习程序，它接受用户输入并掷骰子。代码是：

```
import random
import sys
import math

def roll(rolls, sides, results):
    for rolls in range(1, rolls + 1):
        result = random.randrange(1, sides + 1)
        print result
        results.append(result)
def countf(rolls, sides, results):
    i = 1
    print "There were", rolls, "rolls."
    for sides in range(1, sides + 1):
        if results.count(i) != 1:
            print "There were", results.count(i), i,"s."
        else:
            print "There was", results.count(i), i
        i = i + 1
        if i == sides:
            break
    rolls = input("How many rolls? ")
        sides = input("How many sides of the die? ")
        results = []

        roll(rolls, sides, results)
        countf(rolls, sides, results) 
```

（实际上这是一个更大程序的一部分，所以我不得不剪切'n'paste 位，我可能错过了一些东西）。

所以我决定把它翻译成Java。请注意这里的算法：获取随机数，将其打印，将其附加到数组中，然后在最后计算数组中每个数字的数量，并打印出该值。问题是，我不知道如何`someArray.count(someIndex)`在 Java 语法中做等效的操作。所以到目前为止，我的 Java 程序看起来像这样：

```
import java.util.*;

public class Dice {
    static Scanner input = new Scanner(System.in);
    public static void main(String[] args) {
        final static int TIMES_TO_ROLL = getInt("Times to roll?");
        Random flip = new Random();
        int[] results = new int[TIMES_TO_ROLL];
        for (int i = 0; i < TIMES_TO_ROLL; i++) {
            int result = flip.nextInt(6);
            System.out.println(result);
            results[i] = result;
        }
    }
    public static int getInt(String prompt) {
        System.out.print(prompt + " ");
        int integer = input.nextInt();
        input.nextLine();
        return integer;
    }
} 
```

那么有人可以帮我处理数组计数代码吗？我知道这可能不是一个已定义的方法，因为 Python毕竟*是更高级别的，所以我可以制作自己的数组计数方法，但我想知道 Java 是否像 Python 一样具有预定义的方法。*

编辑：我管理这样的事情：

```
public static int arrayCount(int[] array, int item) {
    int amt = 0;
    for (int i = 0; i < array.length; i++) {
        if (array[i] == item) {
            amt++;
        }
        else {
            amt = amt;
        }
    }
    return amt;
} 
```

编辑：只是出于兴趣，假设我使用命令提示符来运行我的 Java 程序和 Python.exe（Python 的命令提示符控制台），哪个会更快（换句话说，对于相同的代码，哪种语言的性能更好？ )?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:28:52.657

您可以使用 HashMap 来存储结果。

如果新号码不在您的地图中，则将其添加为“1”作为初始值。如果存在，则将“+1”添加到当前地图值。

要显示值，您只需在 for each 循环中迭代您的条目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T15:36:42.617

解决方案是将数组转换为 List，然后使用以下`Collections.frequency`方法：

```
List<Integer> resultList = Arrays.asList(results);
int freq = Collections.frequency(resultList, 4); 
```

您也可以`ArrayList`从一开始就使用，为您节省转换：

```
List<Integer> result = new ArrayList<Integer>();
// add results
int freq = Collections.frequency(result, 4); 
```

[请参阅此处](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)的集合文档

编辑：如果性能是一个问题（如评论中所建议的那样），那么也许您想将数组的每个索引用作计数器，如下所示：

```
 Random flip = new Random(SIDES);
    int[] counters = new int[SIDES];
    for (int i = 0; i < TIMES_TO_ROLL; i++) {
        int result = flip.nextInt;
        counters[result] = counters[result]+1;
    } 
```

请注意，您不再需要在最后进行计数，因为您已经获得了数组中的所有计数器，并且没有计算散列的开销。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T15:36:14.537

有几个库可以为您执行此操作：

1.  Google Guava 的[MultiSet](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)
2.  Apache Common 的[包](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/Bag.html)

但是对于如此简单的事情，您可能会认为额外的库有点过分。

您也可以自己使用`int[]`. 假设您的骰子使用整数，让滚动的数字引用数组中的索引，然后增加该索引处的值。当您需要检索给定数字的值时，请通过索引查找其值。

```
private static final int NUMBER_DICE_SIDES = 6;
public static void main(String[] args) {
    final static int TIMES_TO_ROLL = getInt("Times to roll?");
    Random flip = new Random(NUMBER_DICE_SIDES);
    int[] results = new int[NUMBER_DICE_SIDES];
    for (int i = 0; i < TIMES_TO_ROLL; i++) {
        int result = flip.nextInt;
        System.out.println(result);
        results[result]++;
    }

    for(int i = 0; i < NUMBER_DICE_SIDES; ++i) {
        System.out.println((i+1)+"'s: " + arraysCount(results, i));
    }
}

public static int arrayCount(int[] array, int item) {
    return array[item];
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-15T15:38:08.763

集合中有一种频率方法

```
 int occurrences = Collections.frequency(listObject, searchItem); 
```

[集合的 Java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#frequency%28java.util.Collection,%20java.lang.Object%29)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T15:29:12.267

据我所知，没有定义方法来返回数组中特定元素的频率。如果您要编写自定义方法，只需遍历数组，检查每个值，如果该值与您所追求的元素匹配，则增加一个计数器。

所以像：

```
// in this example, we assume myArray is an array of ints
private int count( int[] myArray, int targetValue) {
    int counter = 0;
    for (int i = 0 ; i < myArray.length; i++ ) {
        if (myArray[i] == targetValue) {
            counter++;
        }
    }
    return counter;
} 
```

当然，如果您想找到数组中*所有*唯一值的频率，这可能会非常低效。

另外，为什么要使用 7 面模具？nextInt()将`Random`返回一个从 0 到但不包括最大值的数字。因此，您的骰子将返回 0 到 6 的值。对于六面骰子，您需要 a `new Random(6);`，然后将掷骰数增加 1 以获得从 1 到 6 的值：`flip.nextInt() +1;`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-27T07:38:23.827

```
class FindOccurrence {

  public static void main (String[]args) {

    int myArray[] = {5, 8, 5, 12, 19, 5, 6, 7, 100, 5, 45, 6, 5, 5, 5};
    int numToFind = 5;
    int numberOfOccurrence = 0;

    for (int i=0; i < myArray.length; i++) {

        if (numToFind == myArray[i]) { 
            numberOfOccurrence++;

        }

    }
    System.out.println("Our number: " + numToFind);
    System.out.println("Number of times it appears: " + numberOfOccurrence);
}
} 
```

# php - 访问嵌套的急切加载模型，而不会在 php activerecord 中导致 N+1 查询

> ID：11053613
> 
> 赞同：0
> 
> 时间：2012-06-15T15:21:50.340
> 
> 标签：php, codeigniter, phpactiverecord

我正在加载一个名为**Maintenance_Record**的模型，其中包含一个嵌套的急切加载，如下所示：

```
Maintenance_Record::find('all', array('include' => array('maintenance_plan' => array('user') ) ) ); 
```

如您所见，我渴望加载**Maintenance_Plan**和**User**。**用户**嵌套在**Maintenance_Plan**中。我想在我的视图中使用**Maintenance_Record模型中的****User**模型。我的观点之一是这样的：

 **```
foreach( $records as $record )
    echo $record->maintenance_plan->user->first_name; 
```

但是，当我查看 SQL 时，activerecord 会在循环中每次调用加载每个**用户**模型，从而导致 N+1 调用。

当我 var_dump **Maintenance_Record**模型时，**Maintenance_Plan**和**User**被正确加载。所以问题是如何在不引起 N+1 查询的情况下访问嵌套的预加载模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:54:19.533

[phpactiverecord 中的三级关联](https://stackoverflow.com/questions/9983803/triple-level-associations-in-phpactiverecord)

这是一个没有引起太多关注的错误，但我相当肯定这就是您在这里遇到的问题。**

# header - 取下报告的顶部标题

> ID：11053614
> 
> 赞同：3
> 
> 时间：2012-06-15T15:21:50.543
> 
> 标签：header, abap

我需要使报告的顶部标题消失。

我要删除的部分在下一张图片中：

![报告图片](../Images/e27155922ecb7dcec95c2c4b25f77b9a.png)

有谁知道该怎么做，如果是，我相信它是可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:29:56.413

```
REPORT  Z_report
MESSAGE-ID z_message
NO STANDARD PAGE HEADING. 
```

最后一行是您要查找的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T15:33:55.503

这个顶部页眉称为[标准页眉](https://help.sap.com/doc/abapdocu_753_index_htm/7.53/en-US/index.htm?file=abenstandard_page_header_glosry.htm)。

要隐藏它，请将[`NO STANDARD PAGE HEADING`](https://help.sap.com/doc/abapdocu_753_index_htm/7.53/en-US/abapreport_list_options.htm#!ABAP_ADDITION_1@1@)选项添加到您的`REPORT`行（程序中的第一个）。

例如：

```
REPORT zmyreportprogram NO STANDARD PAGE HEADING. 
```

# oauth - 当用户使用 Facebook 应用中心的“访问网站”按钮时无法获取 access_token

> ID：11053616
> 
> 赞同：4
> 
> 时间：2012-06-15T15:21:55.983
> 
> 标签：oauth, facebook-apps

我正在尝试使用应用中心推广我的应用，但从 Web 预览中我无法访问该网站。被调用的链接是[http://www.myappsite.it/?fb_source=appcenter&fb_appcenter=1&code=a_long_string](http://www.myappsite.it/?fb_source=appcenter&fb_appcenter=1&code=a_long_string)

从 myappsite 的 index.php 中，我使用这种和平的 php 代码来获取来自 facebook 的用户

```
$code = $_REQUEST["code"];

if($_REQUEST['state'] == $_SESSION['state'] && !$user && strlen($code) > 0) 
{
$token_url = "https://graph.facebook.com/oauth/access_token?" . 
"client_id=" . $appId . "&redirect_uri=" . urlencode("http://www.myappsite.it/") . 
"&client_secret=" . $secret . "&code=" . $code;

$response = @file_get_contents($token_url);
$params = null;

parse_str($response, $params);

$graph_url = "https://graph.facebook.com/me?access_token=" .     $params['access_token'];

$user = json_decode(file_get_contents($graph_url));
echo("Hello " . $user->name);
} 
```

但 $params['access_token'] 是空的，因为 $token_url 返回

```
{
"error": {
    "message": "Error validating verification code.",
    "type": "OAuthException",
    "code": 100
    }
} 
```

如何让用户从应用中心预览网页登录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T15:28:35.893

来自文档的[Authenticated Referrals](https://developers.facebook.com/docs/opengraph/authentication/#referrals)部分（应用中心算作经过身份验证的推荐）

请参阅**使用查询字符串设置时的特殊注意事项：**

> 如果您想使用服务器端身份验证流程，请务必确保在将代码交换为访问令牌时正确传递了 redirect_uri 参数。您应该将 redirect_uri 参数设置为您的网站的点击后到达 URL，而不使用 code 参数。在大多数情况下，URL 看起来像：
> 
> [http://www.example.com/?fb_source=search&code=CODE_HERE](http://www.example.com/?fb_source=search&code=CODE_HERE)剥离代码参数后，它将变为：
> 
> [http://www.example.com/?fb_source=search](http://www.example.com/?fb_source=search)应该在 redirect_uri 中设置的值。请确保此逻辑是动态的，因为附加到您的点击后到达网址的查询参数可能会发生变化。

使用上面的示例，这意味着您的`redirect_uri`参数应该是`http://www.myappsite.it/?fb_source=appcenter&fb_appcenter=1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T15:24:32.090

正如伊吉所说：

[http://www.example.com/?fb_source=search&code=CODE_HERE](http://www.example.com/?fb_source=search&code=CODE_HERE)剥离代码参数后，它将变为：

```
http://www.example.com/?fb_source=search 
```

但是，如果您使用此 url 进行重定向，则需要对 url 进行编码，否则 ? 将停止重定向参数并将 fb_source 添加到您的请求中。

发出时应该是这样的：

```
http%3a%2f%2fwww.example.com%2f%3ffb_source%3dappcenter%26fb_appcenter%3d1 
```

（这就是 Marco 已经做过的事情，这就是为什么他现在很高兴它起作用了）

```
urlencode("http://www.myappsite.it/") 
```

# php - 使用 foreach 循环包含文件夹中的文件 - 不起作用。为什么？

> ID：11053619
> 
> 赞同：0
> 
> 时间：2012-06-15T15:22:00.427
> 
> 标签：php, mysql, drupal, include, glob

我正在做的大约就像[这个问答](https://stackoverflow.com/questions/8766982/including-files-from-folder-with-foreach-loop)所说的那样：

```
$filenames = glob("../webform/components/*.inc");
foreach ($filenames as $filename)
{
    include $filename;
    echo $filename;
} 
```

但我得到的不是一堆包含的文件，而是：

```
Warning: Invalid argument supplied for foreach() in include_once() ... 
```

看来`$filenames`是空的。为什么会这样？（我已经检查过该文件夹是否包含 .inc 文件！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:44:45.237

做一个`var_dump($filenames)`。你得到一个空数组，例如

```
array(0) {
} 
```

如果是这样，glob 工作，但没有找到任何文件。如果你得到一个布尔假，例如

```
bool(false) 
```

然后 glob 完全失败了 - 路径不正确、目录不可读等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:52:02.540

如果您在 Drupal 中从模块内执行此操作，则使用相对路径可能不起作用，因为`index.php`in`DRUPAL_ROOT`是运行代码的位置。

您可能希望将其更改为以下 (1) 或 (2)：

```
// Assuming your webform folder is at sites/all/modules/[MODULE_NAME]/webform
$pattern = drupal_get_path('module', 'MODULE_NAME') . '/webform/components/*.inc'; // (1)
// Assuming the context is MODULE_NAME.module.
// $pattern = dirname(__FILE__) . '/webform/components/*.inc'; // (2)
$filenames = glob($pattern);
foreach ($filenames as $filename) {
    include $filename;
    echo $filename;
} 
```

如果您是从模块外部而不是从 Drupal 站点根目录中的脚本执行此操作，请使用`DRUPAL_ROOT`设置正确的搜索模式。

(Drupal 7)

# iphone - iOS 在没有附加 Xcode 的情况下在启动时崩溃

> ID：11053625
> 
> 赞同：9
> 
> 时间：2012-06-15T15:22:05.020
> 
> 标签：iphone, objective-c, debugging

我的 iOS 应用程序有一个奇怪的问题。当它通过 Xcode (Build & Run) 运行时，一切正常。该应用程序启动，一切都按预期工作。

但是，如果我尝试像用户一样（通过 Springboard）点击其图标来打开应用程序，应用程序会立即崩溃，并显示下面的崩溃日志。它似乎指向某种与图像相关的问题，但我不明白在使用 Xcode 进行调试时它不会发生。

任何人都可以解释一下吗？

```
Date/Time:       2012-06-15 16:13:29.035 +0100
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGKILL)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   dyld                            0x2fe76464 strcmp + 0
1   dyld                            0x2fe6a6e2 ImageLoaderMachO::parseLoadCmds() + 54
2   dyld                            0x2fe72058 ImageLoaderMachOCompressed::instantiateFromFile(char const*, int, unsigned char const*, unsigned long long, unsigned long long, stat const&, unsigned int, unsigned int, linkedit_data_command const*, ImageLoader::LinkContext const&) + 296
3   dyld                            0x2fe6b23a ImageLoaderMachO::instantiateFromFile(char const*, int, unsigned char const*, unsigned long long, unsigned long long, stat const&, ImageLoader::LinkContext const&) + 302
4   dyld                            0x2fe622f6 _ZN4dyldL10loadPhase6EiRK4statPKcRKNS_11LoadContextE + 478
5   dyld                            0x2fe6255e _ZN4dyldL14loadPhase5statEPKcRKNS_11LoadContextEP4statPiPbPSt6vectorIS1_SaIS1_EE + 386
6   dyld                            0x2fe62716 _ZN4dyldL10loadPhase5EPKcS1_RKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE + 278
7   dyld                            0x2fe628fe _ZN4dyldL10loadPhase4EPKcS1_RKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE + 218
8   dyld                            0x2fe630dc _ZN4dyldL10loadPhase3EPKcS1_RKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE + 1144
9   dyld                            0x2fe63240 _ZN4dyldL10loadPhase1EPKcS1_RKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE + 108
10  dyld                            0x2fe63392 _ZN4dyldL10loadPhase0EPKcS1_RKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE + 262
11  dyld                            0x2fe634c4 dyld::load(char const*, dyld::LoadContext const&) + 224
12  dyld                            0x2fe650f2 dlopen + 742
13  libdyld.dylib                   0x360d55a2 dlopen + 42
14  CoreFoundation                  0x37256092 _CFBundleDlfcnLoadBundle + 106
15  CoreFoundation                  0x37255f36 _CFBundleLoadExecutableAndReturnError + 370
16  Foundation                      0x32d7bf40 -[NSBundle loadAndReturnError:] + 904
17  SomeApp                         0x000bcb3a 0x5e000 + 387898
18  SomeApp                         0x000c56d0 0x5e000 + 423632
19  SomeApp                         0x000c539a 0x5e000 + 422810
20  SomeApp                         0x00062f86 0x5e000 + 20358
21  UIKit                           0x30438c84 -[UIViewController view] + 160
22  SomeApp                         0x000622a6 0x5e000 + 17062
23  SomeApp                         0x0005fcc4 0x5e000 + 7364
24  UIKit                           0x30437ca4 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1176
25  UIKit                           0x304317d6 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 402
26  UIKit                           0x303ffabc -[UIApplication handleEvent:withNewEvent:] + 1004
27  UIKit                           0x303ff560 -[UIApplication sendEvent:] + 48
28  UIKit                           0x303fef34 _UIApplicationHandleEvent + 5820
29  GraphicsServices                0x3741b224 PurpleEventCallback + 876
30  CoreFoundation                  0x3729f51c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
31  CoreFoundation                  0x3729f4be __CFRunLoopDoSource1 + 134
32  CoreFoundation                  0x3729e30c __CFRunLoopRun + 1364
33  CoreFoundation                  0x3722149e CFRunLoopRunSpecific + 294
34  CoreFoundation                  0x37221366 CFRunLoopRunInMode + 98
35  UIKit                           0x30430864 -[UIApplication _run] + 544
36  UIKit                           0x3042dcce UIApplicationMain + 1074
37  SomeApp                         0x0005fb00 0x5e000 + 6912
38  SomeApp                         0x0005fac0 0x5e000 + 6848 
```

**编辑：**与 Apple 开发团队讨论过这个问题。问题是我在我的应用程序中使用了一个没有代码签名的自制插件（即使我告诉 Xcode 这样做）。但是，Xcode 4.3.3 有一个错误会破坏捆绑包的代码设计，所以我们很快就会看到它是如何解决的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:46:23.683

从 Xcode 4.5 开始，这似乎仍然是一个问题。作为一种解决方法，您似乎可以强制构建对捆绑包进行签名。

添加以下内容作为捆绑包的最终“运行脚本”构建阶段为我修复了它：

`codesign -fs "iPhone Developer" ${BUILT_PRODUCTS_DIR}/${FULL_PRODUCT_NAME}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T19:12:59.163

您的应用程序可能需要很长时间才能启动。从 Xcode 启动时它被赋予了无限的时间，但从 SpringBoard 启动时却没有这种奢侈。

看看这个以供参考：[https ://developer.apple.com/library/ios/#qa/qa2009/qa1592.html](https://developer.apple.com/library/ios/#qa/qa2009/qa1592.html)

编辑：哦，我是怎么到这里的......这是两周大的。

# undefined - 如何更改 PHP 中的类变量？

> ID：11053628
> 
> 赞同：-5
> 
> 时间：2012-06-15T15:22:08.813
> 
> 标签：undefined, php

我确信这个问题有一个简单的答案，但对于我的生活，我找不到它。我正在使用 PHP5，我正在尝试更改类变量的值，但它似乎没有改变。例如，我有这样的事情：

```
<?php

include_once "../includes/global.php";

loadDAOs('yweightGroups','yweightCourses','yweightUsers','user','yweightData');

class yweight {

private $header_includes;
private $user;
private $yweightUser;

//Description:
//  Constructor.
//Parameters:
//  -none-
//Returns:
//  -nothing-
function __construct() {
    global $r_action;
    global $r_page;

    $this->user = login_required(); 

    if(!$this->user || empty($this->user)){
        die();
        goHome();   
    }

    $this->header_includes = "";

    if(isset($r_action)) {
        $this->$r_action(); 
    }
    else if (isset($r_page)) {
        $this->$r_page();   
    }
    else {
        $this->draw();  
    }       
}

//Description:
//  Draws the YWeight page
//Parameters:
//  -none-
//Returns:
//  -nothing-
function draw() {
    global $r_page;     
    global $colorDAO;
    global $yweightUsersDAO;

    ob_start();
    ?>
    <script type='text/javascript' src="./yweight.js"></script>
    <link rel="stylesheet" type="text/css" href="yweight.css" />
    <?php

    $this->header_includes .= ob_get_clean();

    $col = $colorDAO->read(17);
    print_top("",$this->header_includes,"resources","",$col->value,$col->fontcolor);

    $users = $yweightUsersDAO->GetByUserID($this->user->id);

    if(!$users){
        echo "<div class='msg_failed'>You are not authorized to view this page.</div>";
        die();
    }

    $this->yweightUser = $users;
    echo serialize($this->yweightUser[0]);
    ?>
    <div id="yweight_area"></div>
    <script type='text/javascript'>
        <?php
        if($users[0]->yweightUsers_intern == 0)
            echo "drawPage('main_participant');";
        else
            echo "drawPage('main_intern');";
        ?>
    </script>
    <?php   
    print_bottom();
    echo ob_get_clean();

}           

//Description:
//  Draws the main intern page.
//Parameters:
//  -none-
//Returns:
//  -nothing-
function main_intern() {
    ob_start();
    echo "hello intern";
    echo ob_get_clean();
}

//Description:
//  Draws the main participant page.
//Parameters:
//  -none-
//Returns:
//  -nothing-
function main_participant() {
    global $yweightDataDAO;
    ob_start();
    $this->yweightUser = $this->yweightUser[0];
    echo serialize($this->yweightUser);
    ?>
    <div id="banner_div">
        <img class="banner" width="927" src="images/ParticipantsMain.jpg" />
        <img id="tracker_btn" class="std_btn" src="images/trackerButton.png" />
        <img id="summary_btn" class="std_btn" src="images/summaryButton.png" />
        <img id="requirements_btn" class="std_btn" src="images/reqButton.png" />
    </div>
    <div id="discussion_board_input_div">
        <textarea id="discussion_board_input" />
        <?php
        echo build_btn("green",100,25,"Submit","","","","",
            'submit_post()',"margin-top:5px; margin-bottom:5px; float:right;");
        ?>
    <div class="clear_floats" />
    </div>
    <div id="discussion_board_div">

    </div>
    <?php
    echo ob_get_clean();
}

function submit_post(){
    global $yweightDataDAO;
    global $userDAO;
    global $r_post;
    echo serialize($this->yweightUser);
    $userDataID = $yweightDataDAO->GetByUserID($this->yweightUser->user_id);

    if($userDataID){
        $userData = $yweightDataDAO->read($userDataID);
        $userDiscussion = unserialize($userData->yweightData_discussionBoard);
    }

    $userDiscussion[$this->user->firstName .  time()] = $r_post;

    $userData->yweightData_discussionBoard = serialize($userDiscussion);

    $yweightDataDAO->save($userData);
}

}

$recs = new yweight();

?> 
```

submit_post() 是一个 ajax 调用函数。我得到的错误是它说 $this->yweightUser 未定义。我最初并没有包含所有代码，因为我认为我只是误解了类变量的声明方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:29:00.453

你有一个错字。使用`__construct`. 两个 ( `_ _`) 下划线。你`fooVariable`永远不会被设置。设置好之后就可以正常使用了。

**更新：**你只`$this->yweightUser`在你的函数`draw()`方法中设置。`draw()`如果您之前或 w/e不调用`ajax_post()`，它将不会被定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:30:10.977

如上所述，修复语法错误并且它可以工作，构造函数的两个下划线和构造函数的左大括号以及参数的括号：

```
 class foo {

protected $fooVariable;

function __construct () {
  $this->fooVariable = "hello world";
  $this->changeVariable();
}

function changeVariable(){
  $this->fooVariable = "goodbye world";
  $this->echoVariable();
}

function echoVariable(){
  echo $this->fooVariable;
}
}

$foo = new foo(); 
```

# mongodb - $all 如何使用多键索引？

> ID：11053633
> 
> 赞同：0
> 
> 时间：2012-06-15T15:22:18.173
> 
> 标签：mongodb

我试图了解 $all 运算符如何使用多键索引。

[Mongo 文档](http://www.mongodb.org/display/DOCS/Multikeys)说数组上的索引：

> 导致数据库索引数组的每个元素

因此，如果我有两个包含嵌入数组 [abcd] 和 [bc] 的文档，我相信生成的索引将如下所示：

```
a
b
b
c
c
d 
```

现在假设我对 $all [bc] 发出查询，我希望两个文档都匹配。但是上面的索引对于查找这些文档有什么用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:54:15.317

像 $all [b,c] 这样的查询会发生什么，索引用于查找包含“b”的文档，然后检查所有这些文档以查看它们是否还包含“c”。该索引有些帮助，因为它缩小了需要检查的文档数量。但在某些情况下，查询仍可能需要一段时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T15:07:21.827

我可以确认@matulef 所说的内容，因此可以建议您对参数进行排序，以便*最不频繁*的值在 $all 数组中排在第一位。这最大限度地减少了 Mongo 需要扫描以检查其他 $all 值是否也存在的对象数量。

# php - 如何在 onchange="this.form.submit()" 上停止刷新页面

> ID：11053637
> 
> 赞同：-1
> 
> 时间：2012-06-15T15:22:29.417
> 
> 标签：php, javascript, jquery, html

请先查看[我的客户网站](http://giftideasitems.com/)以获得想法。

在上面的站点中，我在右侧有一个礼品盒。有 3 个选择框。目前我为这 3 个选择框使用 3 个表单，这意味着每个下拉选择框都嵌入到表单中。当您选择第一个下拉选择框时，它会选择一个，第二个选择框的值将确定从第一个选择框中选择哪个值。所以如果你选择Man，那么所有与Man相关的场合都将显示在秒下拉选择框中。它工作正常。

但问题是每次选择第一个下拉框时它都会刷新。

我不想刷新页面。它必须选择值并传递值，以便秒选择框可以确定其相关值。

所以我在想我们的ajax。但没有成功。

所以我为第一个下拉选择框包含了一些代码。

这是 html 和 php 和 wordpress 的混合。

```
<div class="select-one">

 <form id="searrec" method="post" action="">
    <select name="selectionRecipient" id="selectionRecipient" onchange="this.form.submit();"> 

            <?php 
                    $results_rec = get_option('current_recipient');
                    if(isset($_POST['selectionRecipient'])){
                        $results_rec = $_POST['selectionRecipient'];
                        update_option('current_recipient', $results_rec);
                        $results_rec = get_option('current_recipient');
                    }
            ?>
        <?php 
        //asort($result_rec);
        $t_name_arr = array();

        foreach($result_rec as $rec):
                $t_id = $rec->term_id;
                $term = get_term($t_id , 'category' );
                $t_name_arr[] = $term->name;
        endforeach;

        //print_r($t_name_arr);

        rsort($t_name_arr);

        foreach ($t_name_arr as $t_name):?><option class="rec_val"<?php if($results_rec==$t_name){ echo 'selected="selected"';}?>value="<?php echo $t_name;?>"><?php echo $t_name;?></option>
      <?php endforeach;?>

      </select> 
    <input type="hidden" id="submitrec" value="Search" />
    </form> -->

</div> 
```

所以我正在使用表单方法 post 并使用`$_POST`来检索选定的值并将其传递给`$results_rec`变量。

稍后在代码中，我`if.. else`用于确定`if $results_rec =='Man'`然后显示与 Man 等相关的某些项目。

所以我想要的不是在我从第一个下拉选择框中选择项目时刷新页面。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:41:54.067

改变这个：

```
<select name="selectionRecipient" id="selectionRecipient" onchange="this.form.submit();"> 
```

对此：

```
<select name="selectionRecipient" id="selectionRecipient"> 
```

和jQuery：

```
$("#searrec").submit(function(e) {
   e.preventDefault();

   // your code

   return false;
}); 
```

**编辑：**

使用它来获取选定的索引（数字）

```
var index = $("#selectionRecipient")[0].selectedIndex; 
```

或价值：

```
var value = $("#selectionRecipient")[0].value; 
```

然后你可以调用一个ajax：（假设另一个选择框有“id=other_select”

```
$.ajax({url:"index.php",type:"POST",data {type:"populate",index:2,value:"option1"},dataType:"json",
   success: function(data) {
      // data (json) returned from server so populate other selection boxes with that..
  // in this example 'data' is an array, coming directly from server (see below the .php)   
      $("#other_select")[0].selectedIndex = 0;
  for(var x in data) {
     $("#other_select")[0].options[x] = new Option(data[x]);
  }
   }
}) 
```

在您的 .php 中，我假设您获得了一个列表（等数据库）来填充另一个选择列表（在客户端）。此代码可能如下所示：

```
if (isset($_POST["type"]) && $_POST["type"]=="populate") {
   echo json_encode(array("option1","option2","option3"));
   exit(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:31:27.023

> **伙计们，它是固定的。**

请查看[http://giftideasitems.com/](http://giftideasitems.com/)。

查看礼品盒，看看它是如何工作的。

我使用了 iframe 并嵌入了表单，在那里下拉编码。而已。

即使我使用了 onchange="this.form.submit()" 并且页面没有引用，实际上是页面刷新......但不是主页，只有 iframe 正在刷新，这很好。这正是我想要的。

```
<div id="gift-finder">
<div class="gift-finder-form">

            <iframe name="inlineframe" src="code.php" frameborder="0" 
                    scrolling="auto" width="200" height="180" 
                    marginwidth="0" marginheight="0" id="gift-iframe">
            </iframe>

</div> 
```

这是我的 iframe 代码，请参阅 src，我使用了 code.php；所以所有代码都在不同的地方。

虽然我不得不修改一些css，但无论如何这很好。

感谢昨天贡献的每一个人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:56:23.710

您应该从组合框中删除事件**onchange="this.form.submit();**

并将 ajax 与 jquery 一起使用：

```
$("#searrec").onchange(function() {
    $.ajax({
        url:"",
        success:function(response){
            alert("success");
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:25:19.800

```
$('#searrec').submit(function () {
 //do some form submit work here
 return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T15:30:21.137

您必须使用 AJAX 调用根据您在第一个选择框中选择的内容填充其他选择框，而无需重新加载页面。

我建议你看看 jQuery 的 AJAX 功能。继续阅读`$.ajax`并`$.post`- 使用它们，您可以将您在第一个列表框中选择的值提交给 PHP 脚本，然后根据该值返回并填充其他选择框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T15:31:19.093

使用 AJAX 更新其他选择而不刷新页面。使用 jQuery 让 AJAX 变得简单。

这个问题会有所帮助： [Change the selected value of a drop-down list with jQuery](https://stackoverflow.com/questions/499405/change-the-selected-value-of-a-drop-down-list-with-jquery)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T15:40:29.217

```
$('#searrec').submit(function(e){

    e.preventDefault();

}); 
```

# c# - 具有 Windows 7 拖动增强功能的无边框窗口窗体

> ID：11053640
> 
> 赞同：2
> 
> 时间：2012-06-15T15:22:31.297
> 
> 标签：c#, winforms, windows-7

在 Windows 7 中，您可以将一个典型的窗口拖到屏幕顶部，您会看到最大化的窗口轮廓。如果您放手，Windows 将最大化该表单。同样，您可以取一个已经最大化的窗口并将其“拉”下来以将其恢复到正常的窗口状态。我想在我的 C# WinForms 应用程序中以无边框形式利用这些增强功能。

我的表单是无边界的，因此我可以创建自定义标题栏和最小化/最大化/关闭按钮。我可以通过拖动标题栏来移动我的表单，但我不知道如何插入 Windows 7 增强功能，这些增强功能为我提供了最大化轮廓或“下拉”功能。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:42:17.263

几年前，我在 Delphi 7 中做过类似的事情。

1）Form - OnCLick - 在整个屏幕上捕获鼠标位置（也许这个链接会有所帮助：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.cursor.position.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.position.aspx)），保存信息关于在私有变量中按下的按钮（例如：buttonPressed = true）
2) Form - OnMouseMove - 根据新的鼠标位置，移动窗口
3) Form - OnMouseUp - buttonPressed = false。如果光标坐标位于屏幕顶部 (x[0..screenW] y[0..10] ) --> 最大化。

只是一个提示，也许它会帮助你。

# php - 用 ul al li 组括起来（可能有几个）

> ID：11053643
> 
> 赞同：2
> 
> 时间：2012-06-15T15:22:45.100
> 
> 标签：php, regex

我正在尝试使用给定的字符串生成列表块。我想将所有以 *, 开头的行转换为列表。例如：

```
Text...
* One
* Two
Other text. 
```

我已经用 php 正则表达式完成了它。

```
$source=preg_replace("/^\*([^\n]*)/m","<li>$1</li>",$source); 
```

我怎样才能让它在“ul”标签之间包含所有创建的 li 组？它可能是带有三个“li”行的块，有十个“li”行，依此类推......我试图搜索所有父母，如：
**“NOT < /li > + < li > + (WHATEVER) + < / li > + (NOT < li >)"**，但这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:14:53.160

您必须匹配连续的`<li>...</li>`元素对并将它们包装在`<ul>`：

```
preg_replace('#((?:<li>.*?</li>\s*)+)#', '<ul>\1</ul>', $source); 
```

内部`(?: ... )`组匹配一个`<li> ... </li>`，可选地后跟空格；整个匹配项至少需要存在一次。

顺便说一句，`?:`不匹配任何东西，它用于指示不应该为周围的组分配内存插槽用于反向引用。

通过使用非贪婪`.*?`，这可以匹配 's 的单独部分`<li>`，例如

```
Text...
* One
* Two
Other text.
* Three
* Four 
```

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:28:45.710

我不确定我是否正确理解了您的问题，但是： `$source = preg_replace('/\* ([^\r\n]+)/', '<li>$1</li>', $source);`

会变身：

```
* Test1
* Test2
* Test3
* Test4 
```

进入：

```
<li>Test1</li>
<li>Test2</li>
<li>Test3</li>
<li>Test4</li> 
```

编辑： `$source = preg_replace('<li>(.+)</li>', '<ul><li>$1</li></ul>', preg_replace('/\* ([^\r\n]+)/', '<li>$1</li>', $source));`

... 将包含或`<li>`s 中的`<ul>`

# c++ - 在 C++11 中，如何在捕获信号时立即离开函数？

> ID：11053647
> 
> 赞同：4
> 
> 时间：2012-06-15T15:22:56.300
> 
> 标签：c++, multithreading, exception, c++11

在 C++11 程序中，我有一些函数必须在每次收到给定的 unix 信号时尽快停止（并返回给调用者）。乍一看，仅在调用者函数中接收和拦截信号时抛出的异常似乎是显而易见的解决方案。

```
void sighandler(int sig) {
   throw new myexc();
}

void caller(void) {
    try {
        callee1();
        callee2();
    } catch (myexc e) {
        ...
    }
} 
```

但是安全、可移植的信号处理相当有限，因为更改 volatile sig_atomic_t 的值似乎是信号处理程序中唯一正确的事情。但我不想让我的代码到处都是检查 sig_atomic_t 是否已更改的测试。

```
void sighandler(int sig) {
    vol = 1;
}

void callee1(void) {
    do_stuff();
    if (vol == 1) return;
    do_other_stuff();
    if (vol == 1) return;
    do_something_again();
    ...
} 
```

让一个线程等待值被更改然后抛出一个异常被另一个线程捕获似乎也不是一个有效的解决方案。

我怎样才能以安全、便携和优雅的方式做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:57:44.987

您不能从信号处理程序中可移植地抛出异常。

并非所有操作系统实际上都具有堆栈展开所需的适当堆栈帧。您可以做的最好的事情是设置一个标志，然后在您的应用程序中对此进行测试。

为了防止您在代码中添加测试。
您可以将您的应用程序放入一个`Reactor`然后注册反应堆的实际工作。在反应器进行一项新工作之前，它会测试是否已设置信号标志。

```
 Reactor   workList;

 workList.add(&callee1);
 workList.add(&callee2);

 workList.run(); 
```

然后在里面`Reactor`;

```
 while(notSignalled() && !list.empty());
 {
     list.head().run();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:34:24.600

您确定在信号处理程序中允许抛出异常吗？它们完全独立于程序流程。这也是一个糟糕的设计——你应该只在*非常*特殊的情况下使用异常。

此外，全粒度`callee1`是必须的吗？很可能该函数大部分时间只花在几块代码上，因此不需要对返回条件进行大量检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T16:06:28.590

你不能。通常，确保线程迅速终止的唯一方法是立即终止包含它的进程。（Posix 在信号中允许的内容比 C 标准多一点：例如，您可以调用`abort()`or `_exit()`。但不能`exit()`。）否则...信号是异步的，并且可能存在某些内部数据结构（例如堆栈帧）不处于连贯状态。

# wpf - Caliburn 无法将用户控件加载为 Telerik 的 RadPane 中的 ActiveView

> ID：11053650
> 
> 赞同：2
> 
> 时间：2012-06-15T15:23:04.817
> 
> 标签：wpf, telerik, caliburn.micro

我最近在 Telerik RadPane 内的 View(xaml) 上移动了 ContentControl，如下所示：

```
<telerik:RadDocking.DocumentHost>
        <telerik:RadSplitContainer Visibility="{Binding UserControlVisible}">
            <telerik:RadPaneGroup>
                <telerik:RadPane CanUserClose="False" Header="{Binding Operation}">
                    <ContentControl x:Name="ActiveItem" Margin="10" VerticalAlignment="Top" />
                </telerik:RadPane>
            </telerik:RadPaneGroup>
        </telerik:RadSplitContainer>
    </telerik:RadDocking.DocumentHost> 
```

因为，我已经这样做了，我的 UserControls 没有作为 ContentControl 中的内容注入。我试图将 ContentControl 上的 Content 属性显式绑定到 ActiveItem ，但这就是说，无法找到关联的视图。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T12:56:41.023

尝试将数据模板添加到当前内容：

```
 <DataTemplate>
        <ContentControl cal:View.Model="{Binding}" />
 </DataTemplate> 
```

其中 cal 是：

```
xmlns:cal="http://www.caliburnproject.org" 
```

并显式绑定活动项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T13:47:40.563

现在看起来像

```
<telerik:RadDocking.DocumentHost>              
            <telerik:RadSplitContainer Visibility="{Binding UserControlVisible}">
                <telerik:RadPaneGroup>
                    <telerik:RadPane CanUserClose="False" Header="{Binding Operation}">
                        <ContentControl x:Name="ActiveItem" Margin="10" VerticalAlignment="Top" Content="{Binding ActiveItem}">
                            <ContentControl.ContentTemplate>
                                <DataTemplate>
                                    <ContentControl cal:View.Model="{Binding}" />
                                </DataTemplate>
                            </ContentControl.ContentTemplate>
                        </ContentControl>
                    </telerik:RadPane>
                </telerik:RadPaneGroup>
            </telerik:RadSplitContainer>
        </telerik:RadDocking.DocumentHost> 
```

# jquery - jqGrid：在不刷新整个网格的情况下执行排序

> ID：11053652
> 
> 赞同：0
> 
> 时间：2012-06-15T15:23:17.423
> 
> 标签：jquery, jqgrid

我有一个在运行时轮询数据库并更新 jqGrid 的应用程序。我正在使用 datatype: "local" 以便能够在客户端操作数据而无需重新加载所有内容。

我的第一次尝试更新了该数据本身，更新了网格的数据并重新加载了它。这行得通，但是在 IE8（不幸的是我们的主要目标）中，当滚动条重置到其原始位置时会出现闪烁。还有一个问题是选择被重置，但这个问题是可以解决的。

```
grid.setGridParam({ data: localData });
var scrollPosition = grid.closest(".ui-jqgrid-bdiv").scrollTop();
grid.trigger('reloadGrid');
grid.closest(".ui-jqgrid-bdiv").scrollTop(scrollPosition); 
```

我的第二次尝试根据操作更新各个行本身。

```
if (toUpdate) { /* Not auto sorted */
   grid.jqGrid('setRowData', entityUpdate.EntityId, entityUpdate);
}
else if(toAdd) { /* Not auto sorted */
   grid.jqGrid('addRowData', entityUpdate.EntityId, entityUpdate);
}
else if(toDelete) {
   grid.jqGrid('delRowData', entityUpdate.EntityId);
} 
```

这很好用。选择没有重置，没有闪烁，但是还有最后一个问题：行没有重新排序。

任何更新的行都保留在原处，并且添加的任何行都没有放在正确的位置。我可以使用“sortGrid”方法，但随后我们又要刷新整个网格。我可以使用 addRowData 方法的“位置”和“srcrowid”参数的组合，以便将其放置在正确的位置，但我必须知道确切的放置位置。有没有办法使用内置的排序算法来找到放置它的位置？代码将变为：

```
if (toUpdate) { 
   grid.jqGrid('delRowData', entityUpdate.EntityId);
   grid.jqGrid('addRowData', entityUpdate.EntityId, entityUpdate, ?, ?);
}
else if(toAdd) {
   grid.jqGrid('addRowData', entityUpdate.EntityId, entityUpdate, ?, ?);
}
else if(toDelete) {
   grid.jqGrid('delRowData', entityUpdate.EntityId);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:16:35.940

我建议你使用

```
grid.trigger('reloadGrid', [{current:true}]); 
```

保存选择（见[这里](https://stackoverflow.com/a/3808014/315935)）。取决于网格的其他选项，您实际上不需要保存和恢复`scrollTop`位置。我想滚动的问题可能是闪烁的原因。

Moreover it's very important to verify that you use `gridview: true` option. Moreover the usage of `datatype: "local"` could be not the best solution at all. Probably you need just use `datatype: "json"` together with `loadonce: true`. You can update the data from the server if needed. See [here](https://stackoverflow.com/a/5398136/315935) and [here](https://stackoverflow.com/a/7067579/315935) for details.

It's very important to understand, that if you change *one* element (like a cell of the grid) on the page the web browser have to recalculate position of *all* existing elements. I recommend you to read [the article](https://developers.google.com/speed/articles/reflow) about this. The current implementation of `setRowData` is so that html content of every cell of the row will be done separately (see [here](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L2847-2859)). So if you have `n` columns in the grid the web browser makes about `n` times reflow of the whole page. If you you `addRowData` the whole row will be made at *one* operation (like [here](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L2953)).

The main advantage of the reloading *the whole* grid (with `.setGridParam({ data: localData });` and `reloadGrid`) is that the *whole grid body* will be inserted as *one* operation (see [here](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L1411)). So the update of the whole grid follows only *one reflow*. Of cause there are some other changes (like updating of the pageer), but in general updating of the whole page is much more quickly as it looks like at the first look. It's very important to use `gridview: true` to have the behavior.

**UPDATED**: I recommend you additionally to read [the answer](https://stackoverflow.com/a/10461964/315935). Probably it can be helpful for you too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:39:49.870

I have resolved this by applying my own sorting. My columns are only of sorttype: 'text', therefore this works. As a future feature of the jqGrid, it would be nice if addRowData's position parameter would take in 'sorted', in order to specify that is goes in the sorted order. Please note that EntityId is my id column (a hidden column), and that my column options specify a sortname and sortorder when the grid is initially loaded.

```
function updateGrid(grid, entities) {
    var sortName = grid.jqGrid('getGridParam', 'sortname');
    var sortOrder = grid.jqGrid('getGridParam', 'sortorder');
    var rowData = grid.jqGrid('getRowData');
    for (var i = 0; i < entities.length; i++) {
        var entityUpdate = entities[i];
        if (shouldBeInGrid) {
             var currentRow = grid.jqGrid('getRowData', entityUpdate.EntityId);
            //The row exists, update it.
            if (!isEmptyRow(currentRow)) {
                if (currentRow[sortName] == entityUpdate[sortName]) {
                    //The column hasn't changed, just update the values.
                    grid.jqGrid('setRowData', entityUpdate.EntityId, entityUpdate);
                }
                else {
                    grid.jqGrid('delRowData', entityUpdate.EntityId);
                    addRowSorted(grid, rowData, sortName, sortOrder, entityUpdate);
                }
            }
            //The row does not exist, add it.
            else {
                 addRowSorted(grid, rowData, sortName, sortOrder, entityUpdate);
            }
        }
        //The row should not be in the table, delete it if it doesn't exist.
        else {
            grid.jqGrid('delRowData', entityUpdate.EntityId);
        }
    }
}

function addRowSorted(grid, allData, sortName, sortOrder, toAdd) {
    for (var i = 0; i < allData.length; i++) {
        var valueFromGrid = allData[i][sortName].toLowerCase();
        var valueToVerify = toAdd[sortName].toLowerCase();
        var srcId = allData[i][entityIdColumnId];
        if (sortOrder == "desc" && valueFromGrid < valueToVerify) {
            grid.jqGrid('addRowData', toAdd.EntityId, toAdd, 'before', srcId);
            return;
        }
        else if (sortOrder == "asc" && valueFromGrid > valueToVerify) {
            grid.jqGrid('addRowData', toAdd.EntityId, toAdd, 'before', srcId);
            return;
        }
    }
    //The data is empty or it should be last, add it at the end.
    grid.jqGrid('addRowData', toAdd.EntityId, toAdd, 'last');

}

function isEmptyRow(data) {
    for (var property in data) {
        return false;
    }
    return true;
} 
```

# uiwebview - Uimenucontroller 控制器对触摸没有响应

> ID：11053656
> 
> 赞同：2
> 
> 时间：2012-06-15T15:23:44.823
> 
> 标签：uiwebview, first-responder, uimenucontroller

我有一个在 uiwebview 上使用的 uimenucontroller。菜单控制器在简单的文本网站上工作正常，但在较大的网站上，即[http://www.foodnetwork.com/recipes/giada-de-laurentiis/grilled-chicken-with-basil-dressing-recipe/index.html](http://www.foodnetwork.com/recipes/giada-de-laurentiis/grilled-chicken-with-basil-dressing-recipe/index.html)我的自定义菜单项目不会响应触摸。当点击它时，它会短暂地突出显示蓝色然后变回黑色，菜单仍然显示并且 myAction 从未被调用。有时，如果我快速单击其他菜单控制器，它会做出响应，因此我相信这可能与响应者链和/或网页的大小有关。我初始化菜单控制器如下：

```
// in view did appear:  
UIMenuItem *item1 = [[UIMenuItem alloc] initWithTitle:@"Item1" action:@selector(myAction)];  
[[UIMenuController sharedMenuController] setMenuItems:[NSArray arrayWithObject:item1]];

-(void)myAction 
{  
//do something  
} 
```

谢谢！我已经被这个问题难住了 2 周，并且没有想法......

# entity-framework - 实体框架中的聚合根支持

> ID：11053660
> 
> 赞同：13
> 
> 时间：2012-06-15T15:23:51.433
> 
> 标签：entity-framework, domain-driven-design, aggregateroot

我们如何告诉 Entity Framework 关于[Aggregates](http://domaindrivendesign.org/node/88)的信息？

1.  保存聚合时，将实体保存在聚合中
2.  删除聚合时，删除聚合中的实体
3.  当两个不同的用户尝试修改同一聚合中的两个不同实体时引发并发错误
4.  加载聚合时，即使在我们访问聚合中的所有实体之前存在一些时间延迟，也要提供聚合的一致时间点视图

（实体框架 4.3.1 代码优先）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T16:41:51.070

EF 提供的功能允许您定义聚合并使用它们：

1.  这是最痛苦的部分。EF 使用实体图。如果您有像 Invoice 这样的实体，并且该实体具有相关 InvoiceLine 实体的集合，您可以像聚合一样处理它。如果您在附加场景中，一切都按预期工作，但在分离场景中（EF 未加载聚合或由不同的上下文实例加载），您必须将聚合附加到上下文实例并准确告诉它您更改了什么 = 设置状态对于对象图中的每个实体和独立关联。
2.  这由级联删除处理 - 如果您加载了相关实体，EF 将删除它们，但如果您不这样做，则必须在数据库中的关系上配置级联删除。
3.  这由数据库中的并发令牌处理 - 最常见的是时间戳或行版本列。
4.  您必须在开始时使用预先加载并一起加载所有数据（= 一致的观点），或者您将使用延迟加载，在这种情况下您将不会有一致的观点，因为延迟加载将加载当前的关系状态，但它不会更新您已经加载的聚合的其他部分（如果您尝试使用 EF 实现这种刷新，我认为这是性能杀手）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-07T16:29:24.720

我专门为此目的编写了[GraphDiff 。](https://github.com/refactorthis/GraphDiff)它允许您通过提供流畅的映射来定义更新时的“聚合边界”。我在需要来回传递分离的实体图的情况下使用了它。

例如：

```
// Update method of repository
public void Update(Order order)
{
    context.UpdateGraph(order, map => map
        .OwnedCollection(p => p.OrderItems);
} 
```

以上将告诉实体框架更新订单实体并合并 OrderItems 的集合。以这种方式映射允许我们确保实体框架仅在我们在聚合上定义的范围内管理图形并忽略所有其他属性。它支持对所有实体的乐观并发检查。它处理更复杂的场景，还可以处理多对多场景中的更新引用（通过 AssociatedCollections）。

希望这可以使用。

# serial-port - 简单的 SDLC CRC 计算没有给出正确的值

> ID：11053662
> 
> 赞同：0
> 
> 时间：2012-06-15T15:23:59.440
> 
> 标签：serial-port, modem, crc, data-link-layer

我试图弄清楚如何计算非常简单的 SDLC 帧的 CRC。

使用 MLT 我正在捕获流，我看到一些简单的帧被发送出去，例如：0x3073F9E3 和 0x3011EDE3

据我了解，F9E3 和 EDE3 是 3073 和 3011 的 2 字节校验和，因为这就是该帧中的全部内容。

使用大量 CRC 计算器和计算，我已经能够得到校验和的第一个字节，但不是最后一个字节（F9 和 ED）。

使用这个计算器（[http://www.zorc.breitbandkatze.de/crc.html](http://www.zorc.breitbandkatze.de/crc.html)）：

1.  选择 CRC-CCITT
2.  将最终异或值更改为：FFFF
3.  在最终异或之前检查反向数据字节和反向 CRC 结果
4.  然后输入：%30%11

这将给出输出 B8ED，因此最后一个字节是 ED。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:53:25.117

您得到了正确的 crc16（F9 F8，ED B8）。我不知道为什么在这两种情况下你的最后一个字节都是 E3。这可能是数据包没有被正确分解的线索。

# java - 在matlab中使用java

> ID：11053664
> 
> 赞同：4
> 
> 时间：2012-06-15T15:24:10.003
> 
> 标签：java, matlab, classpath

当我尝试从 matlab 使用 java 时遇到问题。我从 MathWork.com 上通读了几遍教程，还重新安装了 JDK1.6，以便与 matlab 兼容。但是，在我工作之后，它仍然无法正常工作......

这是classpath.txt中的内容：

```
 C:\Program Files\MATLAB\R2010a\java\jarext\xstream.jar                                  
    C:\Program Files\MATLAB\R2010a\toolbox\javabuilder\jar\win64   \javabuilder.jar            

    DYNAMIC JAVA PATH

C:\Users\Gao\Desktop\connected_components_labeling 
```

显然，该目录包含在文件中。connected_component_labeling 只是我磁盘上的一个文件夹。我想在 connected_components_labeling 中使用的类是：Disjoint_Set.class 和 Node.class 在 connected_components_labeling 文件夹中。

我试过了：

```
x =  Disjoint_Set(); 
```

还

```
x = connected_components_labeling.Disjoint_Set(); 
```

它们都不起作用。我从 matlab 得到的唯一反馈是：

```
??? Undefined variable "connected_components_labeling" or class
"connected_components_labeling.Disjoint_Set". 
```

我很沮丧。谁能帮帮我？我会很感激的。万分感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:18:37.110

确保您使用 MATLAB 兼容的 JRE/JDK 编译 java 文件。据我所知，MATLAB 不适用于 Java 7，所以暂时坚持使用 Java 6...

有几个环境变量会影响 MATLAB。就我而言，我有：

```
JAVA_HOME = C:\Program Files\Java\jdk1.6.0_32
MATLAB_JAVA = C:\Program Files\Java\jre6
PATH = ...;C:\Program Files\Java\jdk1.6.0_32\bin 
```

这是我刚刚做的一个简单测试：

### C:\work\Student.java

```
public class Student {
    private String name;
    public Student(String str) {
        name = str;
    }
    public void setName(String str) {
        name = str;
    }
    public String getName() {
        return name;
    }

    public static void main(String args[]) {
        Student s = new Student("amro");
        s.setName("unknown");
        System.out.println("Hello " + s.getName());
    }
} 
```

我编译：（`javac Student.java`输出放在同一目录下`c:\work\Student.class`）。现在我从 MATLAB 测试它：

```
javaaddpath('C:\work')

javaMethod('main','Student','')

s = Student('me')
char( s.getName() ) 
```

我得到：

```
Hello unknown

s =
Student@8d6877

ans =
me 
```

# android - GridView + ImageView + rotate = 意外停止？

> ID：11053667
> 
> 赞同：1
> 
> 时间：2012-06-15T15:24:17.223
> 
> 标签：android, rotation, android-gridview

我正在使用[Google 的 Hello GridView 教程](http://developer.android.com/resources/tutorials/views/hello-gridview.html)来学习如何使用`GridView`. 它可以正常工作`Drawable`，我可以将许多项目添加到`GridView`. 运行应用程序时，我可以滚动和旋转手机。

但是，如果我使用 SD 卡中的图像或照片，就会出现问题。我可以显示`Activity`带有缩略图的`Drawable`，但是当我旋转手机时，我会收到以下消息：

> 应用程序意外停止。

有人能帮我吗？

显现 ：

```
 <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
    </uses-permission>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

布局 ：

```
 <TextView
        android:id="@+id/txt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:columnWidth="90dp"
        android:gravity="center"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" />

</LinearLayout> 
```

活动：包test.test；

```
import java.io.File;

import android.app.Activity;
import android.content.Context;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.TextView;

public class TestActivity extends Activity {
    /** Called when the activity is first created. */
    protected String[] listImages;
    protected String txt;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        GridView gridview = (GridView) findViewById(R.id.gridview);

        // search files
        this.listImages = listFile("/sdcard/projetv/test");

        // to show files name
        TextView text = (TextView) findViewById(R.id.txt);
        text.setText(this.txt);

        gridview.setAdapter(new ImageAdapter(this));

    }

    /*
     * Return list of files in the directory "path", with extention "ext"
     */
    protected String[] listFile(String path) {
        File curs = new File(path);
        String[] temp = curs.list();

        this.txt = new String("");

        if (temp != null)
            for (int i = 0; i < temp.length; i++) {
                this.txt = this.txt + " | " + temp[i];
                temp[i] = path + "/" + temp[i];
            }

        return temp;
    }

    public class ImageAdapter extends BaseAdapter {
        private Context mContext;

        public ImageAdapter(Context c) {
            mContext = c;
        }

        public int getCount() {
            // return 20;
            return listImages.length;
        }

        public Object getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return 0;
        }

        // create a new ImageView for each item referenced by the Adapter
        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imageView;
            if (convertView == null) { // if it's not recycled, initialize some
                                        // attributes
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(8, 8, 8, 8);
            } else {
                imageView = (ImageView) convertView;
            }

            // load the image
            imageView.setImageBitmap(BitmapFactory
                    .decodeFile(listImages[position]));

            // load drawable
            // imageView.setImageResource(R.drawable.ic_launcher);
            return imageView;
        }
    }

} 
```

日志猫：

```
06-18 07:14:33.625: D/dalvikvm(521): GC freed 687 objects / 56160 bytes in 50ms
06-18 07:14:34.744: D/dalvikvm(521): GC freed 71 objects / 35824 bytes in 44ms
06-18 07:14:35.544: D/dalvikvm(521): GC freed 139 objects / 39392 bytes in 41ms
06-18 07:14:36.344: D/dalvikvm(521): GC freed 78 objects / 68928 bytes in 44ms
06-18 07:14:39.184: D/dalvikvm(521): GC freed 179 objects / 43424 bytes in 115ms
06-18 07:14:40.194: E/dalvikvm-heap(521): 3840000-byte external allocation too large for this process.
06-18 07:14:40.194: E/(521): VM won't let us allocate 3840000 bytes
06-18 07:14:40.194: D/skia(521): --- decoder->decode returned false
06-18 07:14:40.194: D/AndroidRuntime(521): Shutting down VM
06-18 07:14:40.194: W/dalvikvm(521): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
06-18 07:14:40.194: E/AndroidRuntime(521): Uncaught handler: thread main exiting due to uncaught exception
06-18 07:14:40.204: E/AndroidRuntime(521): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:459)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:271)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:296)
06-18 07:14:40.204: E/AndroidRuntime(521):     at test.test.TestActivity$ImageAdapter.getView(TestActivity.java:92)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.AbsListView.obtainView(AbsListView.java:1256)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.GridView.makeAndAddView(GridView.java:1218)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.GridView.makeRow(GridView.java:265)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.GridView.fillSpecific(GridView.java:465)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.GridView.layoutChildren(GridView.java:1123)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.AbsListView.onLayout(AbsListView.java:1113)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.view.View.layout(View.java:6830)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1119)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:998)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.LinearLayout.onLayout(LinearLayout.java:918)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.view.View.layout(View.java:6830)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.view.View.layout(View.java:6830)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1119)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:998)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.LinearLayout.onLayout(LinearLayout.java:918)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.view.View.layout(View.java:6830)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.view.View.layout(View.java:6830)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.view.ViewRoot.performTraversals(ViewRoot.java:996)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.os.Looper.loop(Looper.java:123)
06-18 07:14:40.204: E/AndroidRuntime(521):     at android.app.ActivityThread.main(ActivityThread.java:4363)
06-18 07:14:40.204: E/AndroidRuntime(521):     at java.lang.reflect.Method.invokeNative(Native Method)
06-18 07:14:40.204: E/AndroidRuntime(521):     at java.lang.reflect.Method.invoke(Method.java:521)
06-18 07:14:40.204: E/AndroidRuntime(521):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-18 07:14:40.204: E/AndroidRuntime(521):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-18 07:14:40.204: E/AndroidRuntime(521):     at dalvik.system.NativeStart.main(Native Method)
06-18 07:14:40.224: I/dalvikvm(521): threadid=7: reacting to signal 3
06-18 07:14:40.224: E/dalvikvm(521): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

**第二步：**

我尝试在 gridview 中加载图像，就像你说的 Luksprog 一样，但它不起作用。我想我不明白我怎么能做到这一点。

新的 TestActivity.java ：

```
package test.test;

import java.io.File;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.TextView;

public class TestActivity extends Activity {
    /** Called when the activity is first created. */
    protected String[] listImages;
    protected String txt;
    protected BitmapFactory.Options opt;
    protected GridView.LayoutParams paramgrid;

    public TestActivity() {
        super();
        // search files
        if (this.listImages == null)
            this.listImages = listFile("/sdcard/projetv/test");

        // set options of thumbnails
        this.opt = new BitmapFactory.Options();
        this.opt.inPreferredConfig = Bitmap.Config.RGB_565;
        this.opt.inSampleSize = 3;
        this.paramgrid = new GridView.LayoutParams(85, 85);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        GridView gridview = (GridView) findViewById(R.id.gridview);

        // to show files name
        TextView text = (TextView) findViewById(R.id.txt);
        text.setText(this.txt);

        // load images in GridView
        ImageView imageView;
        for(int i=0;i<this.listImages.length;i++){
            imageView = new ImageView(this);
            imageView.setLayoutParams(this.paramgrid);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
            imageView.setImageBitmap(BitmapFactory.decodeFile(this.listImages[i], this.opt));

            gridview.addView(imageView, i);
        }

    }

    /*
     * Return list of files in the directory "path", with extention "ext"
     */
    protected String[] listFile(String path) {
        File curs = new File(path);
        String[] temp = curs.list();

        this.txt = new String("");

        if (temp != null)
            for (int i = 0; i < temp.length; i++) {
                this.txt = this.txt + " | " + temp[i];
                temp[i] = path + "/" + temp[i];
            }

        return temp;
    }
} 
```

日志猫：

```
06-20 07:48:50.946: D/dalvikvm(520): GC freed 773 objects / 57808 bytes in 57ms
06-20 07:48:51.466: D/AndroidRuntime(520): Shutting down VM
06-20 07:48:51.466: W/dalvikvm(520): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
06-20 07:48:51.466: E/AndroidRuntime(520): Uncaught handler: thread main exiting due to uncaught exception
06-20 07:48:51.466: E/AndroidRuntime(520): java.lang.RuntimeException: Unable to start activity ComponentInfo{test.test/test.test.TestActivity}: java.lang.UnsupportedOperationException: addView(View, int) is not supported in AdapterView
06-20 07:48:51.466: E/AndroidRuntime(520):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
06-20 07:48:51.466: E/AndroidRuntime(520):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
06-20 07:48:51.466: E/AndroidRuntime(520):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
06-20 07:48:51.466: E/AndroidRuntime(520):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
06-20 07:48:51.466: E/AndroidRuntime(520):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-20 07:48:51.466: E/AndroidRuntime(520):     at android.os.Looper.loop(Looper.java:123)
06-20 07:48:51.466: E/AndroidRuntime(520):     at android.app.ActivityThread.main(ActivityThread.java:4363)
06-20 07:48:51.466: E/AndroidRuntime(520):     at java.lang.reflect.Method.invokeNative(Native Method)
06-20 07:48:51.466: E/AndroidRuntime(520):     at java.lang.reflect.Method.invoke(Method.java:521)
06-20 07:48:51.466: E/AndroidRuntime(520):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-20 07:48:51.466: E/AndroidRuntime(520):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-20 07:48:51.466: E/AndroidRuntime(520):     at dalvik.system.NativeStart.main(Native Method)
06-20 07:48:51.466: E/AndroidRuntime(520): Caused by: java.lang.UnsupportedOperationException: addView(View, int) is not supported in AdapterView
06-20 07:48:51.466: E/AndroidRuntime(520):     at android.widget.AdapterView.addView(AdapterView.java:448)
06-20 07:48:51.466: E/AndroidRuntime(520):     at test.test.TestActivity.onCreate(TestActivity.java:56)
06-20 07:48:51.466: E/AndroidRuntime(520):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-20 07:48:51.466: E/AndroidRuntime(520):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
06-20 07:48:51.466: E/AndroidRuntime(520):     ... 11 more
06-20 07:48:51.486: I/dalvikvm(520): threadid=7: reacting to signal 3
06-20 07:48:51.486: E/dalvikvm(520): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

你有更多信息可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:19:30.860

感谢 Luksprog 的指导，我在网上搜索并找到了一个很好的关于这个想法的教程：[Displaying images from SD card in Android](http://mihaifonoage.blogspot.fr/2009/09/displaying-images-from-sd-card-in.html)。有用 ！我希望它也可以帮助某人。

# sml - SML - 递归数据类型 VS 多态数据类型

> ID：11053668
> 
> 赞同：2
> 
> 时间：2012-06-15T15:24:19.783
> 
> 标签：sml

1.  有人可以解释它们之间的区别吗？

2.  此外，在尝试时：

```
datatype exp = Const of real | Pair of exp * exp;

val my_exp_2 = Pair(Const(1.2),Pair(Const(9.0),Const(2.0))); 
```

口译员给出：

```
val my_exp_2 = Pair (Const 1.2,Pair (Const #,Const #)) : exp 
```

为什么#符号出现在那里？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:57:58.590

*递归数据类型*是一种数据类型，它在其定义中使用自身。

这方面的一个例子可能是：

```
datatype intlist = IntNil
                 | IntCons of int * intlist 
```

注意在值构造函数`intlist`的定义中是如何使用的。`IntCons`

```
val ls = IntCons(5, IntCons(6, IntNil)); 
```

请注意此示例中 IncCons 如何包含另一个列表值。

多*态数据类型* 是一种数据类型，其中一个或多个值构造函数可以包含多态值。

例如，您可以查看：

```
datatype 'a pair = Pair of 'a * 'a 
```

这里，`'a`是一个类型变量，因此构造函数可以用于任何类型的值。例子：

```
val pairInt = Pair(1, 5);
val pairStr = Pair("Hello", "Goodbye");
val pairChr = Pair(#"x", #"y"); 
```

这两件事通常组合成*多态递归数据类型*，就像普通列表一样：

```
datatype 'a mylist = MyNil
                   | MyCons of 'a * 'a mylist; 
```

这既是多态的又是递归的，如以下示例所示：

```
val listInt = MyCons(5, MyCons(6, MyNil));
val listStr = MyCons("abc", MyCons("def", MyNil));
val listChr = MyCons(#"a", MyCons(#"b", MyNil)); 
```

# sql - SQL 不同但不那么不同的查询

> ID：11053669
> 
> 赞同：0
> 
> 时间：2012-06-15T15:24:25.000
> 
> 标签：sql, select, distinct

也许我过于复杂了......

我只需要一个“简单”查询来选择一列，但只返回不同的行。
这是关键，如果它们相似，则需要排除它们，而不仅仅是完全匹配。

例如，这是我当前的查询

```
select distinct channel from audio_srcs order by channel 
```

诀窍是这会返回如下内容

```
Channel
--------
1001
1003
1003 <Description@unitid>
1004
1004 <Description@unitid> 
```

我希望显示 1003 行中的唯一一个和 1004 行之一（例如）。我不在乎它返回哪一个。

我想要的最终结果如下所示：

```
Channel
---------
1001
1003
1004
etc. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:28:58.370

```
SELECT distinct left(Channel, 4) as Channel  --  or maybe first 5 characters
 from audio_srcs
 order by channel 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T15:40:19.670

我会将分隔符作为区别。您只需要列中的第一个标记：

```
SELECT distinct left(Channel,
                     (case when charindex(' ', channel) <= 0 then len(channel)
                           else charindex(' ', channel)
                      end
                     )
                    ) as Channel  --  or maybe first 5 characters
from audio_srcs
order by channel 
```

我使用了 SQL Server 版本的字符串函数。

# objective-c - 获取玩家别名

> ID：11053671
> 
> 赞同：5
> 
> 时间：2012-06-15T15:24:35.457
> 
> 标签：objective-c, ios, gamekit

我有一个名为 currentMatch 的 GKTurnBasedMatch，我想知道如何在当前正在玩的玩家之后获取正在玩的玩家的名字。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T19:38:29.867

```
NSMutableArray *playerIDs = [NSMutableArray arrayWithCapacity:match.participants.count];
for (GKTurnBasedParticipant *part in match.participants) {
    if([part.playerID isKindOfClass:[NSString class]]){
        [playerIDs addObject:part.playerID];
    }
}

[GKPlayer loadPlayersForIdentifiers:playerIDs withCompletionHandler:^(NSArray *players, NSError *error) {
    for (GKPlayer *player in players) {

       //get the aliases
}

}]; 
```

# asp.net - 您可以使用部分类在 VB 中制作两个（等效的）代码隐藏页面吗

> ID：11053672
> 
> 赞同：2
> 
> 时间：2012-06-15T15:24:36.697
> 
> 标签：asp.net, vb.net, code-behind, partial-classes

我们使用 T4 来生成我们的 .aspx 和 .vb 文件。一切正常 - 但我们经常需要自定义页面上的行为。

但是，我们有时也必须重新生成页面——这有可能会清除原本仍然有效的工作。

我想要这样的设置：

```
Default.aspx 'which would contain the controls
Default.aspx.vb 'which would bind, load and save data
Default.behaviour.vb '(or something like that) - which would store the behaviour 
```

两个页面都可以引用控件。

这有可能吗？

Stevedog：谢谢你，我怀疑我的错误在代码中会更明显——这是一个例子：

```
'##in codebehind Default.asp.vb:
'##there is a asp:label called lblTest
Partial Class pages_Default
Inherits System.Web.UI.Page
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Not Me.IsPostBack Then
            writeMessage()
        End If
    End Sub

    Partial Private Sub writeMessage()
    End Sub
End Class 
```

和

```
'##in codefile Default.behaviour.vb:
Partial Public Class pages_Default
    Inherits System.Web.UI.Page

    Private Sub writeMessage()
        lbltest.Text = "Hello"
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:34:18.047

是的，您可以为同一个类创建任意数量的部分类，而您提供的示例正是它们的主要目的。部分类中的代码可以访问类其余部分中的所有内容，就好像它们都在同一个文件中的同一个类声明中一样。我对 ASP 或 T4 不是很熟悉，但我无法想象为什么其中任何一个会改变部分类的工作方式。

# erlang - 二进制文件的拆分

> ID：11053673
> 
> 赞同：2
> 
> 时间：2012-06-15T15:24:39.847
> 
> 标签：erlang

我试图从二进制字符串中拆分两个字段：

```
-define(S,<<"M\0\0\0522039355099,010100000008,0,010170000000,0,0,0,0,0,0,,,0,0,,‌​0110,00,150,0,0,0\0">>).<<Message_length:4/binary,Msg/binary>> = S. 
```

前 4 个字节是后续消息的长度，另一个字节是消息，
空字节终止字符串。

结果是：**异常错误：o匹配右侧值
编辑就在给定代码之前，有：

```
[Sequence|Reste] = binary:split(T,<<"\0">>), 
```

“休息”有界吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:33:49.140

你的代码没问题，所以要么你没有二进制字符串，要么 Mystring 的长度不符合模式。这是一个快速测试：

```
1> Mystring = <<"abcde">>.
<<"abcde">>
2> <<Message_length:4/binary,Msg/binary>> = Mystring.
<<"abcde">>
3> Message_length.
<<"abcd">>
4> Msg.
<<"e">> 
```

如果您有一个字符串（整数列表）而不是二进制字符串（<<"string">>），正如 Vincenzo 建议的那样，请先调用 erlang:list_to_binary/1 。

希望能帮助到你

编辑：我已经检查了您在文森佐的回答的评论中留下的示例字符串。我已经用你的代码试过了，仍然有效。到达那行代码时，Message_length 和/或 Msg 是否可能已经绑定（并且与 Mystring 不同）？这将使模式匹配失败。

EDIT2：使用问题中的更新数据进行测试：

```
1> S = <<"M\0\0\0522039355099,010100000008,0,010170000000,0,0,0,0,0,0,,,0,0,,\342\200\214\342\200\2130110,00,150,0,0,0\0">>.
<<77,0,0,42,50,48,51,57,51,53,53,48,57,57,44,48,49,48,49,
  48,48,48,48,48,48,48,56,44,48,...>>
2> <<Message_length:4/binary,Msg/binary>> = S.
<<77,0,0,42,50,48,51,57,51,53,53,48,57,57,44,48,49,48,49,
  48,48,48,48,48,48,48,56,44,48,...>>
3> Message_length.
<<77,0,0,42>>
4> Msg.
<<"2039355099,010100000008,0,010170000000,0,0,0,0,0,0,,,0,0,,\342"...>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T22:43:20.383

erlang 字符串转义插值存在问题。第四个字节不插值为`"\0"`but `"\052"`。

```
1> Bin = <<"M\0\0\0522039355099,010100000008,0,010170000000,0,0,0,0,0,0,,,0,0,,0110,00,150,0,0,0\0">>.
<<77,0,0,42,50,48,51,57,51,53,53,48,57,57,44,48,49,48,49,                                                                                                                     
  48,48,48,48,48,48,48,56,44,48,...>> 
```

所以你必须以这种方式编写它。

```
2> f().
ok
3> Bin = <<"M\0\0\0","522039355099,010100000008,0,010170000000,0,0,0,0,0,0,,,0,0,,0110,00,150,0,0,0\0">>.
<<77,0,0,0,53,50,50,48,51,57,51,53,53,48,57,57,44,48,49,
  48,49,48,48,48,48,48,48,48,56,...>> 
```

那么解析这种形式的消息的常用方法是：

```
4> <<L:32/little,Rest/binary>> = Bin.
<<77,0,0,0,53,50,50,48,51,57,51,53,53,48,57,57,44,48,49,
  48,49,48,48,48,48,48,48,48,56,...>>
5> L.
77
6> <<Msg:L/binary,R/binary>> = Rest.
<<"522039355099,010100000008,0,010170000000,0,0,0,0,0,0,,,0,0,,0110,00,150,0,0,0"...>>
7> R.
<<0>>
8> Msg.
<<"522039355099,010100000008,0,010170000000,0,0,0,0,0,0,,,0,0,,0110,00,150,0,0,0">> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:31:19.530

您必须调用`list_to_binary/1`要匹配的字符串。

如果您还有其他问题，请输入示例字符串！

# javascript - Javascript日期对象失败

> ID：11053674
> 
> 赞同：2
> 
> 时间：2012-06-15T15:24:41.557
> 
> 标签：javascript

仅在我网站的一页上，javascript Date 对象将不起作用。调用`Date.parse(dateString)`或`new Date(dateString)`返回`undefined`而不是预期的 Date 对象。事实上，在这个页面上，在 firebug 控制台中输入这个命令会导致整个浏览器崩溃（这个命令类似于`Date.parse("6/1/2013")`or `Date.parse("Jun 6, 2013")`）。这只发生在这一页上，这些相同的命令在其他每一页上都可以正常工作。我一直在寻找 Date 对象和函数可能已被覆盖但找不到任何东西的任何地方。有谁知道可能导致此错误的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:31:21.187

首先 - 这是否发生在任何浏览器中？还是特定于一个？

最有可能的情况是，您在该页面上有一些插件（Java 小程序、Flash、Silverlite 或完全其他的东西），它用其他东西覆盖了内置的 Javascript 日期类型。

我将开始查看该页面与其他页面在加载的插件和仅在该页面上而不在其他页面上加载的其他 .js 文件方面的不同之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:58:56.080

日期对象非常灵活，它们比未定义更容易从错误输入返回 NaN。听起来你重新定义了日期——你没有任何地方都有'日期='的表达式，是吗？

# django - 姜戈。如何使用片段标识符重定向到 url

> ID：11053690
> 
> 赞同：3
> 
> 时间：2012-06-15T15:25:38.580
> 
> 标签：django, django-urls

例如，在某些情况下，在 POST 或 GET 请求之后，我不仅希望将用户重定向到特定页面，还希望将用户重定向到页面的特定部分。什么会更好：在 Django 中实现这个（重构重定向 url？）或在 javascript 中实现这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:30:35.180

为什么要在 JS 中做呢？如果您已经重定向到不同的页面，只需添加`#whatever`到重定向 URL 即可直接转到锚点。

# java - 使用 MDB 滚动升级

> ID：11053694
> 
> 赞同：2
> 
> 时间：2012-06-15T15:25:44.807
> 
> 标签：java, jakarta-ee, glassfish

我们在 Glassfish 3.1.2 集群上部署了一个 Java EE 应用程序，该集群使用 JAX-RS 提供了一个 REST API。我们通过将 EAR 部署到重复的集群实例来定期部署应用程序的新版本，然后更新 HTTP 负载均衡器以将流量发送到更新的实例而不是旧实例。

这使我们能够在不损失可用性的情况下进行升级，如下所述：http: [//docs.oracle.com/cd/E18930_01/html/821-2426/abdio.html#abdip](http://docs.oracle.com/cd/E18930_01/html/821-2426/abdio.html#abdip)。我们经常对应用程序进行重大更改，这使得新版本“不兼容”（这就是我们使用两个集群的原因）。

我们现在必须为应用程序提供一个消息队列接口，以实现一些高吞吐量的内部消息传递（来自 C++ 生产者）。但是，使用消息驱动 Beans 我看不到如何在不中断服务的情况下升级应用程序？

我调查的选项是：

**单个远程 JMS 队列 (openMQ)**

生产者将消息发送到单个消息队列，消息由 MDB 处理。当我们启动第二个集群实例时，消息应该负载均衡到升级后的集群，但是当我们停止“旧”集群时，未完成的事务将会丢失。

我考虑在升级期间使用 JMX 禁用该消息队列的生产者/消费者，但这只会暂停消息传递。当我们禁用旧集群时，未完成的消息仍然会丢失（我认为？）。

我还考虑放弃 @MessageDriven 注释并手动创建 MessageConsumer。这似乎确实有效，但 MessageConsumer 无法使用 EJB 注释访问其他 EJB（据我所知）：

```
// Singleton bean with start()/stop() functions that 
// enable/disable message consumption

@Singleton
@Startup
public class ServerControl {

private boolean running=false;

@Resource(lookup = "jms/TopicConnectionFactory")
private TopicConnectionFactory topicConnectionFactory;

@Resource(lookup = "jms/MyTopic")
private Topic topic;
private Connection connection;
private Session session;
private MessageConsumer consumer;    

public ServerControl()
{
    this.running = false;         
}

public void start() throws JMSException {
    if( this.running ) return;

    connection = topicConnectionFactory.createConnection();
    session = dbUpdatesConnection.createSession(false, Session.DUPS_OK_ACKNOWLEDGE);
    consumer = dbUpdatesSession.createConsumer(topic);
    consumer.setMessageListener(new MessageHandler());    

    // Start the message queue handlers
    connection.start();

    this.running = true;
}

public void stop() throws JMSException {
    if( this.running == false ) return;

    // Stop the message queue handlers

    consumer.close();

    this.running = false;
}
}

// MessageListener has to invoke functions defined in other EJB's

@Stateless
public class MessageHandler implements MessageListener {

@EJB
SomeEjb someEjb; // This is null

public MessageHandler() {
}

@Override
public void onMessage(Message message) {
    // This works but someEjb is null unless I 
    // use the @MessageDriven annotation, but then I 
    // can't gracefully disconnect from the queue
}

} 
```

**每个集群的本地/嵌入式 JMS 队列**

*   客户端必须连接到两个不同的消息队列代理（每个集群一个）。
*   必须通知客户端集群实例正在关闭并停止向该代理上的队列发送消息。
*   通常比现有的 http 解决方案更不方便和整洁。

**替代消息队列提供程序**

*   将 Glassfish 连接到不同类型的消息队列或不同的供应商（例如 Apache OpenMQ），也许其中一个能够平衡来自特定消费者集的流量？

我假设只是禁用应用程序只会“杀死”任何未完成的交易。如果禁用应用程序允许现有事务完成，那么我可以在启动第二个集群后执行此操作。

任何帮助，将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:19:47.903

如果您使用高可用性，则集群的所有消息都将存储在单个数据存储中，而不是每个实例上的本地数据存储中。然后，您可以将两个集群配置为使用同一个存储。然后，当关闭旧的并启动新的时，您可以访问所有消息。

这是一个很好的[视频](http://www.youtube.com/watch?v=RHUJBsy3udU)，有助于解释 glassfish 的高可用性 jms。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:50:01.943

我不明白您的假设，即*当我们停止“旧”集群时，未完成的交易将会丢失*。MDB 将被允许在应用程序停止之前完成它们的消息处理，并且任何未确认的消息将由“新”集群处理。

如果新旧版本之间的负载平衡是一个问题，我会将 MDB 分开`.ear`并在新 MDB 上线后立即停止旧 MDB，或者甚至在此之前，如果您的用例允许延迟消息处理直到新版本上线部署。

# deployment - 使用 PEAR 部署 PHP Web 应用程序？

> ID：11053699
> 
> 赞同：3
> 
> 时间：2012-06-15T15:26:06.460
> 
> 标签：deployment, pear

是否可以将 PHP Web 应用程序打包成 PEAR 格式以进行自动部署？像这样：

```
pear install myPackage 
```

并且，要升级：

```
pear upgrade myPackage 
```

但是因为我有一个网络应用程序，所以我还需要它来在 Apache 配置文件上激活我的网络应用程序。

据我所知，PEAR 主要包含库——但我听说它也可用于部署完整的 Web 应用程序。我找不到有关该主题的信息。所以我想知道 PEAR 是否也可以与 Apache 等 Web 服务器交互，以根据我的应用程序管理虚拟主机的创建？

有人已经这样做了吗？

将感谢您的回答。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:39:35.153

PEAR 安装程序不能直接修改您的 Apache vhost 文件，但您可以编写自己的插件来执行此操作并在安装/升级时自动调用。

PEAR 包中的文件具有[“角色”](http://pear.php.net/manual/en/guide.developers.package2.file.php#guide.developers.package2.file.roles)，例如`php`、和。是您要用于公共 HTML、javascript 和 CSS 文件的文件。`test``doc``www``www`

除此之外，您可以使用自己的角色并在安装具有该角色的文件时执行操作。或者，您也可以使用包中的安装后脚本来重新启动您的网络服务器。

使用 PEAR 部署的 Web 应用程序示例如下：

*   PEAR 网站本身，[http ://pear.php.net/package/pearweb/](http://pear.php.net/package/pearweb/)
*   SemanticScuttle，书签管理器：[http ://semanticscuttle.sourceforge.net/pirum.html](http://semanticscuttle.sourceforge.net/pirum.html)

# math - 是否存在跨越参数范围 0-1 的任何语言的数据类型？

> ID：11053705
> 
> 赞同：3
> 
> 时间：2012-06-15T15:26:17.533
> 
> 标签：math, types, precision

我经常编写数学算法，假设无量纲参数跨越 0..1 （含）的连续空间。这些算法理论上可以从参数空间上的最大分辨率中受益，我认为它可以用于在参数空间上消耗完整的 32 或 64 位精度，而不会浪费指数或符号。

我想这些方法看起来类似于无符号整数除以其最大可表示值。这是否已经存在，如果存在，如果不存在，是否有令人信服的理由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:29:49.013

您不能简单地使用从 0 到 MAX_INT 的整数进行所有计算，保持所有相同的公式/算法/无论什么，然后使用“无符号整数除以其最大可表示值”转换作为最后一步，然后再将结果打印给用户（或以其他方式输出它 - 例如在中间日志中）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:45:19.553

没有算法，这种表示是没有意义的。例如，您可以将其表示为定点（即 0..MAX_INT / MAX_INT）或浮点数、尾数和指数（例如，能够存储像 1e-1000 这样的值）或自定义的东西（例如，能够表示一个数字`1/π`）。在它之后，您定义了算法来操纵此类表示中的数字。因此，换句话说，没有涵盖所有情况的灵丹妙药。只有您知道自己的任务，才能选择最佳解决方案。

此外，`continuous space`不可能用计算来表示，因为空间有无限数量的元素，所以它不能被算法化。

# android - 相对布局：如果元素已消失，则有许多选项

> ID：11053720
> 
> 赞同：2
> 
> 时间：2012-06-15T15:27:20.353
> 
> 标签：android, android-relativelayout

有没有办法以声明方式告诉一个元素，相对于许多元素的位置 - 如果一个是 GONE 然后使用另一个？当然，如果所有元素都没有消失，则只取一个（例如第一个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:42:10.820

我看到的唯一与此相关的东西是`android:layout_alignWithParentIfMissing`：

> 如果设置为true，则在layout_toLeftOf、layout_toRightOf等找不到锚点时，将使用父级作为锚点
> 。 [boolean]

所以我相信要获得你想要的功能，你必须自己编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:46:12.977

一个非常简单的解决方案是在 RelativeLayout 中使用 LinearLayout。因此，您可以将元素放置在 LinearLayout 内，然后与 LinearLayout 中的前一个元素对齐 - 水平或垂直。

框架本身不支持相对于许多其他元素的可见性定位元素的功能。

# android - 如何将 SurfaceView 放入 View 的分层层次结构中？

> ID：11053726
> 
> 赞同：0
> 
> 时间：2012-06-15T15:27:31.483
> 
> 标签：android, surfaceview, layer

我想`View`在一层之上创建一个 s 的层次结构，大致是：

FrameLayout {
  SurfaceView
  查看   SurfaceView
  查看   SurfaceView   }

我希望每个`SurfaceView`的绘制事件都出现在层次结构中的正确位置。例如，顶面应该出现在所有东西的前面。底部的应该出现在所有东西的后面。

不幸的是，我可以让每个表面出现在所有使用的东西的前面，`setZOrderOnTop(true)`并且我可以通过不这样做来让每个表面出现在底部，但我不能让一个表面出现在中间。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:50:03.383

在撰写本文时，这似乎是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:59:01.213

`FrameLayout`旨在阻止屏幕上的一个区域以显示单个项目。通常，`FrameLayout`应该用于保存单个子视图，因为在不相互重叠的情况下，很难以可扩展到不同屏幕尺寸的方式组织子视图。

我建议您使用`LinearLayout`or`RelativeLayout`代替。

# java - android远程位图未显示

> ID：11053728
> 
> 赞同：0
> 
> 时间：2012-06-15T15:27:33.837
> 
> 标签：java, android, eclipse

我正在使用以下方法从 url 获取位图，但未显示图像。图片是一个大约 50x50px 的 png 文件。谢谢你。

```
public static Bitmap getBitmapFromURL(String src) {
         try {
             Log.e("src",src);
             URL url = new URL(src);
             HttpURLConnection connection = (HttpURLConnection) url.openConnection();
             connection.setDoInput(true);
             connection.connect();
             InputStream input = connection.getInputStream();

             BitmapFactory.Options options = new BitmapFactory.Options();
             options.inJustDecodeBounds = true;

             BitmapFactory.decodeStream(input,null,options);
             Log.e("Bitmap","returned");

             //The new size we want to scale to
             final int REQUIRED_SIZE=70;

             //Find the correct scale value.
             int scale=1;
             while(options.outWidth/scale/2>=REQUIRED_SIZE && options.outHeight/scale/2>=REQUIRED_SIZE)
                 scale*=2;

             //Decode with inSampleSize
             BitmapFactory.Options o2 = new BitmapFactory.Options();
             o2.inSampleSize=scale;
             return BitmapFactory.decodeStream(input, null, o2);

         } catch (IOException e) {
             e.printStackTrace();
             Log.e("Exception",e.getMessage());
             return null;
         }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:30:45.967

你`InputStream`的被“吃掉了”。您只能使用一次流，因此当您读取位图标题以缩放图像时，您的输入流会被“吃掉”。您需要创建一个新的 InputStream 才能获得真正的位图。

# ruby-on-rails - Ruby on Rails 延迟更新

> ID：11053729
> 
> 赞同：1
> 
> 时间：2012-06-15T15:27:34.867
> 
> 标签：ruby-on-rails, ruby

我正在学习 rails 并且遇到了一个小怪癖，我似乎无法在任何地方找到答案：

由于我正在学习 rails，我将在 localhost 运行时对代码进行一些调整（rails s），然后刷新浏览器以查看我想要进行的更改是否准确。这适用于视图、css、html、路由等的更改。

但是现在我正在对一个控制器文件进行更改，该文件正在调用我编写的另一个 ruby​​ 类，当我对 ruby​​ 类进行更改时，它们不会立即显示出来。我知道这一点的方式是，我在 Ruby 类中使​​用了各种 printf 函数来显示事物的当前状态，如果我添加一个并重新运行，它不会显示，除非我关闭服务器并重新启动它。

有什么想法吗？这是一个已知的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:34:04.647

您必须自动加载包含自定义文件的文件夹：

```
# in config/application.rb:

# Custom directories with classes and modules you want to be autoloadable.
config.autoload_paths += %W(#{config.root}/extras) 
```

在那里你写你想要自动加载的文件夹。

警告：命名非常重要：其中的文件必须命名为它们定义的类/模块（如模型、控制器等）：

*   foo.rb 必须定义 Foo 成本
*   foo/bar.rb 必须定义 Foo:Bar costant

并且您不能自动加载没有此命名约定的文件。原因与自动加载工作有关：当在您的代码中调用 fe`Foo`常量并且该常量丢失时，Rails 会尝试查看其自动加载路径中是否存在遵循此命名约定的文件，如果存在则加载它.

# c# - InvalidOperationException 连接未关闭。连接的当前状态为打开

> ID：11053731
> 
> 赞同：7
> 
> 时间：2012-06-15T15:27:44.590
> 
> 标签：c#, visual-studio-2010, tsql

为什么此代码会引发无效操作异常？

```
private SqlCommand cmd; // initialized in the class constructor

public void End(string spSendEventNotificationEmail) {
  try {
    cmd.CommandText = spSendEventNotificationEmail;
    cmd.Parameters.Clear();
    cmd.Parameters.Add("@packetID", SqlDbType.Int).Value = _packetID;
    cmd.Parameters.Add("@statusID", SqlDbType.Int).Value = _statusID;
    cmd.Parameters.Add("@website", SqlDbType.NVarChar, 100).Value = Tools.NextStep;
    cmd.Connection.Open();
    cmd.ExecuteNonQuery();
  } finally {
    cmd.Connection.Close();
    cmd.Parameters.Clear();
    cmd.Dispose();
  }
  endCall = true;
} 
```

![无效操作异常](../Images/f082597a262bb9fb9f26fb263081f709.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:30:04.300

您正在尝试打开一个已经打开的连接，这会导致异常。

**解决方案1（推荐）：**

检查您的代码，检查`cmd.Connection`打开连接的所有部分并确保它始终正确关闭。

**解决方案 2（快速修复）：**

行前

```
cmd.Connection.Open(); 
```

添加以下检查/清理代码：

```
if (cmd.Connection.State == ConnectionState.Open)
{
    cmd.Connection.Close();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T17:22:10.200

很少需要将 Sql* 对象保持在类级别，尤其是根据您所展示的内容。尝试自己进行连接池也将失去连接池的好处。

使用此方法，您可以消除错误的可能性，因为您没有共享任何对象

```
private readonly _connectionString = "...";

public void End(string spSendEventNotificationEmail) {
  using(var conn = new SqlConnection(_connectionString))
  using(var cmd = conn.CreateCommand())
  {
    cmd.CommandText = spSendEventNotificationEmail;
    cmd.Parameters.Add("@packetID", SqlDbType.Int).Value = _packetID;
    cmd.Parameters.Add("@statusID", SqlDbType.Int).Value = _statusID;
    cmd.Parameters.Add("@website", SqlDbType.NVarChar, 100).Value = Tools.NextStep;
    conn.Open();
    cmd.ExecuteNonQuery();
  }
  endCall = true;
} 
```

# iphone - 与故事板中的 UITabBarController 交谈

> ID：11053732
> 
> 赞同：1
> 
> 时间：2012-06-15T15:27:51.497
> 
> 标签：iphone, ios, uitabbarcontroller, storyboard, uistoryboard

所以在我的应用程序中，我使用了故事板，首字母`viewController`是`UITabBarController`. 我想要做的是当应用程序启动时，我希望能够设置`tabBarController`有 3 个或 4 个项目。所以在 中`appDel`，我计划检查用户应该看到 3 或 4 个选项卡的天气，然后`tabBarController`应该反映.

我尝试对 进行子类化`tabBarController`，但它不起作用：

```
@implementation TabBarController

-(id) init{
    if ((self = [super init])) {
        [[[[self tabBar] items] objectAtIndex:2] setEnabled:YES];
        [[[[self tabBar] items] objectAtIndex:3] setEnabled:NO];
        [[[[self tabBar] items] objectAtIndex:3] setHidden:YES];  
    }
    return self;
}
@end 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T17:59:33.283

我认为更简单（可能不是最好）的方法是让 TabBar 控制器不是初始视图控制器并创建两个标签栏控制器。从您的初始视图中，您可以决定使用您将显示的标签栏控制器。您还可以将两个选项卡栏控制器链接到相同的选项卡/视图控制器（在它们之间重复的那些）。

在初始视图控制器中，您添加一些代码以了解您将执行哪个 segue，瞧。

像这样的东西： ![在此处输入图像描述](../Images/cc51bf4773c9e5fe26a502c4d2a4db56.png)

不过，我正在研究一个代码解决方案（似乎很有趣！）。如果我发现任何东西会更新。

编辑：这是编码的解决方案。（我正在使用情节提要，但我相信您可以翻译代码以使用 nib 文件）。

首先要做的是创建故事板的一个实例：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]]; 
```

然后实例化tabbarcontroller：

```
UITabBarController *myTab = [storyboard instantiateViewControllerWithIdentifier:@"tabBar"]; 
```

然后实例化要添加到标签栏的新视图控制器：

```
UIViewController *newVC = [storyboard instantiateViewControllerWithIdentifier:@"newView"]; 
```

这是有趣的部分，您将所有视图控制器/选项卡放入一个数组中，然后从该数组中添加或删除视图。然后将 tabbarcontroller 的视图控制器设置为修改后的数组（我添加一个 viewController 并删除另一个）。

```
NSMutableArray* controllers = [myTab.viewControllers mutableCopy];
[controllers insertObject:newVC atIndex:0];
[controllers removeObjectAtIndex:2];
[myTab setViewControllers:controllers]; 
```

然后你可以像这样推动你的标签栏控制器：

```
[self.navigationController pushViewController:myTab animated:YES]; 
```

这里我使用的是故事板和 ARC，如果你不使用 ARC，你可以为 nib 修改它并释放数组。这写起来很有趣！希望能帮助到你！干杯！

# .net - Clickonce .net 升级

> ID：11053737
> 
> 赞同：7
> 
> 时间：2012-06-15T15:28:08.180
> 
> 标签：.net, clickonce, .net-4.5

Microsoft.Net 4.5 即将推出，我想在 MS 发布最终版本时升级我的 clickonce 应用程序。

我的问题是：已经安装了 clickonce 应用程序（使用 .net 4.0）的用户需要手动升级 .net 框架还是自动升级？

Tks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T04:33:05.083

如果用户安装了 .NET 4 并且您的应用程序以 .NET 4.5 为目标，则他们必须安装 .NET 4.5。

.NET 4 不会自动更新到 .NET 4.5。在某个时候，微软将开始在 Windows 更新中推出 .NET 4.5，但现在预测时间还为时过早。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T07:59:09.027

如果用户只安装了 .NET 4，他们需要在安装之前安装 .NET 4.5。

您的 ClickOnce 应用程序应具有 .NET 作为先决条件，并且在安装应用程序之前，您可以安装 .NET。

[如何：使用 ClickOnce 应用程序安装先决条件](http://msdn.microsoft.com/en-us/library/8st7th1x%28v=vs.110%29.aspx)

[如何：为 ClickOnce 部署中的各个先决条件指定支持 URL](http://msdn.microsoft.com/en-us/library/ms404264%28v=vs.110%29.aspx)

# ios - iOS - 基于日期范围的 UITableView 部分

> ID：11053741
> 
> 赞同：1
> 
> 时间：2012-06-15T15:28:33.150
> 
> 标签：ios, uitableview, nsdate, range, sections

我有一个问题，我想知道是否有可能解决。我有一个使用 Core Data 和 NSFetchedResultsController 的 UITableView。我的应用程序的很大一部分是根据日期组织事物。理想情况下，我想将 TableView 分成基于 3 个日期范围的部分。这些范围将介于现在和 2 天之间、2 天和 6 天之间以及 10 天及以后。用户有一个 UIDatePicker，当他们输入一个日期时，它会自动放入这些有组织的部分之一。现在我知道如何轻松地将表格视图按每个日期划分为多个部分，但不知道如何做到这一点，因此每个部分都有一个时间范围。感谢任何可能提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:55:56.290

这是我自己做的。最终结果是将核心数据对象分类为部分，每个部分为 1 天宽。多个对象可能在一个部分中。

```
//at a point where you define your fetched results controller
//add @"sectionTitle" as sectionNameKeyPath:

//...
 NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:context sectionNameKeyPath:@"sectionTitle" cacheName:@"CacheName"];
//....

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    NSString* dateString =  [[[self.sleepQualityController sections] objectAtIndex:section] name];

    return dateString;

}

//add this to your managed object's header file:
@property(nonatomic,assign)NSString* sectionTitle;

//this goes into your managed object's implementation file

-(NSDate *)dateWithOutTime:(NSDate *)datDate
{
    if( datDate == nil ) {
        datDate = [NSDate date];
    }
    NSDateComponents* comps = [[NSCalendar currentCalendar] components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:datDate];
    return [[NSCalendar currentCalendar] dateFromComponents:comps];

}

-(NSString*)sectionTitle
{

        NSDateFormatter* dateFormaterWeekdayMonthDay = [[NSDateFormatter alloc] init];
        dateFormaterWeekdayMonthDay.dateStyle = NSDateFormatterLongStyle;

    return [NSString stringWithFormat:@"%@", [dateFormaterWeekdayMonthDay stringFromDate:[self  dateWithOutTime:self.date]] ];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:46:28.217

我将探索在获取请求中使用 NSExpressions。在获取请求中使用类似 SQL 的表达式可能很难找到好的文档；但是您也可以编写自己的块供查询使用，这非常棒。

基本上你想要的是一个 NSExpression，它返回一个字符串作为部分名称，你可以告诉 NSFetchedResultsController 用于部分名称键路径。您需要围绕表达式构建一个 NSExpressionDescription 以将其添加到获取请求中。

我希望这能让你朝着正确的方向前进！

FWIW，我通常倾向于做一个类似 SQL 的解决方案（基本上选择一个比较日期字段并选择三个值之一的“案例”表达式），但有时使用核心数据，只需拔出大锤就更容易了（或者更确切地说，感觉就像他们希望我们做的那样）。

# ruby-on-rails - Heroku 上的简单 Rails 应用程序性能

> ID：11053743
> 
> 赞同：5
> 
> 时间：2012-06-15T15:28:39.800
> 
> 标签：ruby-on-rails, performance, heroku, newrelic

我有一个非常简单的 rails 3.2.6 应用程序。我多年来一直使用 Heroku 来托管原型，始终处于免费层。我终于在我最新的应用程序上添加了一个付费测功机，并添加了 New Relic 来监控性能。

我在流量接近零的极其简单的页面上看到 4500+ms 的请求时间（我们尚未启动）。New Relic 表示，99% 的时间都花在了渲染模板上。这是一个100 行布局内的 75 行*完全静态的 haml 模板。*应用程序模板具有标准`- if current_user.nil?`分支。

我还没有添加页面缓存。我当然会这样做，但我想在掩盖它之前确定这种性能非常差的根本原因。有小费吗？我应该从 Heroku 获得什么样的响应时间？在我的本地开发环境中，相同的页面响应时间为 26 毫秒（资产在 1.5 秒之前进入）。New Relic 报告我在 Heroku 上的动态页面的平均响应时间为 2000 毫秒到 6000 毫秒。

* * *

*编辑*：我为静态/打开了页面缓存，现在看到的平均值为 173 毫秒。但我仍然担心我在动态页面上的糟糕平均值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:22:19.953

正如评论中所说，我的猜测是因为在一段时间内第一次点击时，Heroku 将不得不启动应用程序（在免费应用程序的情况下）来服务请求，这会使您的平均请求时间非常慢。

# android - 导出 LinkedIn 联系人

> ID：11053746
> 
> 赞同：0
> 
> 时间：2012-06-15T15:28:50.420
> 
> 标签：android, linkedin

如何在 Android 应用程序上导出所有 LinkedIn 联系人？

我只是完成了 Auth，但我不知道如何将所有联系人导出到我的 Android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:33:37.637

安装

[https://play.google.com/store/apps/details?id=com.linkedin.android&hl=en](https://play.google.com/store/apps/details?id=com.linkedin.android&hl=en)

您可以将 LinkedIn 中的所有联系人与您的 Android 联系人同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-22T00:42:37.347

你不能。几年前，LinkedIn 切断了通过他们的 API 访问用户联系人的能力（除非你是他们批准的合作伙伴计划的一部分）。请参阅[https://developer.linkedin.com/partner-programs/apply](https://developer.linkedin.com/partner-programs/apply)

# php - 清除 div 并在其中重新加载新的音频内容

> ID：11053750
> 
> 赞同：0
> 
> 时间：2012-06-15T15:28:55.320
> 
> 标签：php, javascript, jquery, html

我有一个包含音频文件链接的数据库。我正在尝试使用 HTML 音频标签一个接一个地播放它们。目前我正在使用 PHP。我的代码 -

```
 $sql = "SELECT * FROM table";
    $r = mysql_query($sql);

       while($row = mysql_fetch_array($r)) {
            $id = $row["audID"];                                                
            $audsq = "SELECT * FROM table2 WHERE id ='$id'";            
            $resultaud = mysql_query($audsq);

            //Here I want to write a code to clear div="test"

            PlayAud(resultaud);
            sleep(2);   ///Not Sure             
        } 
```

我正在传递指向 aud 文件的链接，以便加载和输入 html

```
 <?php
      PlayAud($res) {
          $raud = mysql_fetch_array($res); ?>
      <div id="test">
      <audio> ...  </audio>
      </div>
 <?php }?> 
```

有人能告诉我我做得对吗？每个剪辑也是 2 秒，因此我需要在 while 循环中等待 2 秒。如果还有其他方法可以建议我吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:35:29.700

你不能在 PHP 中做你想做的事。您将不得不使用 javascript。这个问题将帮助您：

[更新 div auto 的内容](https://stackoverflow.com/questions/8063053/update-content-of-div-auto)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:37:27.463

您无法从 php 中清除 div。原因是php在服务器上运行，div被回显到客户端，php无法访问。

这里的解决方案可能是使用客户端脚本（使用 JavaScript）。您将编写一个函数来替换音频标签或其内容，并且实现一些预加载机制可能也是一个好主意。

问候，约斯特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:33:16.617

嗯....要清除 div 你必须让浏览器处理它，你可以通过 javascript 来做到这一点。

```
echo "<script>document.getElementById('test').innerHTML = '';</script>";
//Then do what you needed to do 
```

# maven - 设置 jasmine-maven-plugin 失败使 jenkins 不稳定

> ID：11053753
> 
> 赞同：2
> 
> 时间：2012-06-15T15:29:06.393
> 
> 标签：maven, jenkins, jasmine, jasmine-maven-plugin

如果测试失败，我想配置[jasmine-maven-plugin](http://searls.github.com/jasmine-maven-plugin/)以使 jenkins 不稳定，但唯一的选项似乎是：

1.  将 haltOnFailure 设置为 true 并让失败中断构建
2.  将 haltOnFailure 设置为 false 并在日志中报告失败，但构建成功。

有没有办法在测试后检查日志并将构建标记为不稳定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:05:11.493

自己找到了答案！

我必须配置 jenkins 才能查看 jasmine junit 报告：

在`Publish JUnit test result report`add `**/TEST-jasmine.xml`to下`Test report XMLs`，如果已经有东西，用逗号分隔：

`**/TESTS-TestSuites.xml,**/TEST-jasmine.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T10:51:26.547

Sam Hasler 的回答仅适用于自由式 Jenkins 工作。我们使用 Maven 作业，JUnit Jenkins 插件的这个配置选项不适用于 Maven 作业。所以我一直在寻找更通用的解决方案。

为了让它工作，我们所做的是重新配置 Jasmine Maven 插件，以便

*   不再在测试失败时停止构建，并且
*   将 Jasmine 测试报告写入Jenkins 期望找到它们的*target/surefire-reports 。*这还有一个额外的优势，我们现在在构建作业中也看到了失败的 Jasmine 测试以及我们的 Java 测试。

```
<haltOnFailure>false</haltOnFailure>
<jasmineTargetDir>${project.build.directory}/surefire-reports</jasmineTargetDir> 
```

现在我们的构建作业如预期的那样是黄色的（不稳定的），不再是红色的（失败的）。

# iphone - 在 iOS 设备（但不是模拟器）上运行时从 CGRectMake 获取异常

> ID：11053760
> 
> 赞同：0
> 
> 时间：2012-06-15T15:29:45.740
> 
> 标签：iphone, ios, nsexception, cgrectmake

我发生了一个我无法弄清楚的异常。我在这里有这段代码：

```
newControllers = [[NSMutableArray alloc] initWithCapacity:9];  // Only allocate what we need

    // Ok, add the new thumb UIs
    for (int i = 0; i < 3; ++i) {

        for (int j = 0; j < 3; ++j) {

            // Create the view controller
            ThumbViewController *newThumbVC = [[ThumbViewController alloc]
                                                   initWithNibName:@"NewThumbDisplayView" bundle:nil];
            // Set the info
            newThumbVC.localInfo = [newInfo objectAtIndex:(i * 3) + j];

            // Place it properly
            [self.scrollViewContent addSubview:newThumbVC.view];
            CGRect rect = CGRectMake(8 + (j * 99), 363 + (i * 134), 106, 142);
            newThumbVC.view.frame = rect;
            [self.scrollViewContent bringSubviewToFront:newThumbVC.view];

            [newControllers addObject:newThumbVC];
        }
    } 
```

在模拟器上运行时，这非常完美。今天早上我试图在我的手机上运行它，并且在使用以下堆栈调用 CGRectMake 时出现异常（请注意，在输出窗口中根本没有打印任何内容，这使得弄清楚这更加痛苦）。

线程 1，队列：com.apple.main-thread

```
 #0  0x35220238 in objc_exception_throw ()
    #1  0x3751b788 in +[NSException raise:format:arguments:] () 
```

如果有人可以向我指出这里到底有什么不合适的，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:58:53.433

CGRectMake 只是一个宏，所以这不是问题。你真的只需要一个视图控制器并让它管理一组视图而不是一组控制器。强烈建议不要使用多个控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:39:51.787

我认为您在构建 ThumbViewController 的视图时看到了竞争条件，这些视图是在加载 nib 后懒惰地构建的。我认为当您将新 vc 的视图添加为子视图时会发生崩溃，在模拟器上它可能会很快构建到非零。

SDK 不鼓励多个 VC 同时负责（只有少数例外，如 MPMoviePlayerController）。你真的需要风投吗？就名字而言，它们听起来更像是视图。

如果您必须使用 VC，那么您需要将它们的行/列传递给它们，并让它们在 viewDidLoad（或更高版本）中自行构建框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T21:17:23.017

结果是我的设备上的 iOS 版本与我正在运行的 XCode 版本之间的版本不匹配问题。更新 XCode 解决了所有问题。

# sql - 如何获取唯一标识符的当前值，将其分配给全局变量并将其映射到 ssis 执行 SQL 任务

> ID：11053763
> 
> 赞同：0
> 
> 时间：2012-06-15T15:29:49.440
> 
> 标签：sql, sql-server, tsql, ssis

我正在使用 SSIS 执行 SQL 任务来执行存储过程。在存储过程中，我传递某些输入值并将其插入到表中。该表有一个唯一标识符作为主键。作为返回输出，我需要当前值的唯一标识符。所以我把它带到一个变量@logid，如下所示

```
INSERT INTO logging.execution_log
            (ParentLogID,
             Description,
             PackageName,
             PackageGuid,
             MachineName,
             ExecutionGuid,
             LogicalDate,
             Operator,
             StartTime,
             EndTime,
             Status,
             FailureTask)
SELECT @ParentLogID,
       @Description,
       @PackageName,
       Cast(@PackageGuid AS UNIQUEIDENTIFIER),
       @MachineName,
       Cast(@ExecutionGuid AS UNIQUEIDENTIFIER),
       @logicalDate,
       @operator,
       Getdate(),
       NULL,
       @status,
       NULL

SET @LogID = Cast(Scope_identity() AS INT) ----@logid is output variable from ssis 
```

但它没有给出预期的结果。这里已经使用**set**运算符对@logid 完成了全局变量的分配，并**映射**到执行 sql ssis 任务变量。经过一番研究，我发现为了分配全局变量，我必须将**SET NOCOUNT**选项设置为 SQL 查询中的第一条语句。我也这样做了。但它没有返回任何东西...... .by the way ****为什么我们需要设置这个SET NOCOUNT参数？？？**欢迎任何帮助**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:58:25.853

为了让参数返回在过程主体中分配的值，必须在过程中使用`OUT`/`OUTPUT`关键字声明参数，如下所示：

```
CREATE PROCEDURE *procname* (
@logID int **OUTPUT**,
*other parameters*
)
AS
*body statements* 
```

*此外*，语句中的相应参数`EXEC`应提供相同的关键字（`OUT`或`OUTPUT`），如下所示：

```
EXEC *procname* @*someGlobalVar* **OUTPUT**, *other arguments* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:34:50.183

您始终可以`SELECT SCOPE_IDENTITY() AS LogID`在执行 SQL 任务结束时将预期结果集设置为单行，并使用单列 LogID 配置结果并将其映射到您的 SSIS 全局变量。

让我知道您是否需要我澄清这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:40:41.697

您可以使用 Scope_Identity 来获取用于标识列的唯一标识符。

要获得唯一标识符，您需要在使用之前将其分配给变量

```
Set @LogID = NewID()

INSERT INTO logging.execution_log VALUES(...., @logID, ...) 
```

除非您误解了唯一标识符的含义

标识列是自动生成的整数 1、2、3、4 序列......并与 Scope_Identity 一起使用。

# c# - 使用 Redemption 时如何解决此错误 MAPI_E_FAILONEPROVIDER

> ID：11053765
> 
> 赞同：1
> 
> 时间：2012-06-15T15:29:54.053
> 
> 标签：c#, scheduled-tasks, windows-server-2008-r2, outlook-redemption

嗨，我有一个奇怪的问题，无法找出根本原因。我们使用 Redemption 构建和部署了我们的应用程序，一切正常，但突然 UAT 服务器上的安装停止工作。但在生产中也是如此（感谢上帝）。

我们的应用程序是基于控制台并使用 .NET 3.5 编写的，它并没有完全关闭，它正在工作，但是当我们尝试通过调度程序任务运行相同的应用程序时它不起作用，但是当我们双击 exe 文件时它可以正常工作，成功连接到 Exchange 根据我们的业务逻辑读取和下载文件，但当我们尝试在调度程序任务下运行时未执行。

以下是小错误信息可能对您有所帮助..

> 2012-06-15 16:05:06,724 EmailProcess.Program - 消息 = IMAPISession::OpenMsgStore 中的错误：MAPI_E_FAILONEPROVIDER ulVersion：0 错误：Microsoft Exchange 不可用。存在网络问题或 Exchange 计算机因维护而停机。组件：Microsoft Exchange 信息存储 ulLowLevelError：2147746069 ulContext：1318

请建议

**编辑 1：更多信息**Windows 2008 Server，名为**SpecialTask​​sUser**的用户在服务器上配置为登录并具有管理员权限。**安装了 Outlook 并为不同的用户名OutlookSpecialUser**配置了配置文件，当我们使用**SpecialTask​​sUser**用户登录并启动 Outlook 时，它会加载并显示收件箱和私人文件夹......到目前为止一切都很好。

我们创建了计划任务并配置为在用户名**SpecialTask​​sUser**下运行，因为该用户具有管理员权限，这就是它给出错误的地方。另一方面，当我们进入安装目录并双击 *.exe 文件时，应用程序将运行，并且兑换成功地读取电子邮件并执行它应该做的事情......请帮助我希望这些信息会有所帮助.. ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:20:33.173

很可能您使用了错误的进程父身份 - 默认情况下，调度程序在其自己的帐户下运行。确保您指定了正确的 Windows 帐户。

# objective-c - 在 Objective-C 中查看 Facebook FQL 查询的结果

> ID：11053769
> 
> 赞同：0
> 
> 时间：2012-06-15T15:30:10.003
> 
> 标签：objective-c, facebook, facebook-fql

快速查看 Facebook FQL 查询结果中返回内容的最佳方法是什么。Facebook 示例代码在请求中使用以下内容：didLoad

```
if ([result isKindOfClass:[NSArray class]]) {
    result = [result objectAtIndex:0];
}
NSLog(@"%@", result); 
```

我相信这需要“结果”（最初是 NSArray）并将其变成 NSDictionary。NSLog 语句会打印“结果”（NSDictionary）的全部内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:15:36.147

> 快速查看 Facebook FQL 查询结果中返回内容的最佳方法是什么。

如果您只是出于调试目的而询问（我从您的问题中并不完全清楚）—— [Graph API Explorer](https://developers.facebook.com/tools/explorer)现在也有一个用于运行 FQL 查询的选项卡……</p>

# terminology - 数据验证类型的通用术语？

> ID：11053774
> 
> 赞同：1
> 
> 时间：2012-06-15T15:30:20.897
> 
> 标签：terminology, validation

对于可以对对象本身进行的数据验证与需要访问某种外部资源的验证之间的区别，是否有任何通用术语？

例如，如果我有用户记录，我可以检查“用户名是否存在？”之类的内容。“用户名至少有**n 个**字符长吗？” 等等，而不需要任何额外的上下文。但是，一旦我想做诸如“用户名可用吗？”之类的事情。它需要检查我系统中的其他记录。

我只是想知道是否有任何好的术语来描述这些类型场景的差异？“静态分析”与“运行时检查”比较合适，但显然不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:35:41.533

对于这些不同类型的验证，我真的不知道有任何广泛接受的术语。[维基百科](http://en.wikipedia.org/wiki/Data_validation)为您提供了一些指导。

重要的是您定义/使用团队中每个人都同意和使用的一组术语。我相信您提出的条款（*静态*与*运行时*）并不好，因为无论如何所有这些规则都是在*运行时*执行的。我会提出诸如*内在*与*外在*或*内部*与*外部*验证之类的东西。

# python - 如何在 Python 中解决这种循环依赖

> ID：11053786
> 
> 赞同：0
> 
> 时间：2012-06-15T15:30:55.863
> 
> 标签：python, circular-dependency, circular-reference, cyclic-reference

我遇到了如下所示的一些情况，其中每个类都需要另一个类并且它创建了循环依赖。我在使用 ctypes 包装一些 c 代码时遇到了这种类型的情况。已经有很多关于这个主题的帖子，但我觉得它们没有帮助，我需要一些例子。有关解决此问题的任何想法/示例都会有所帮助。

```
# Module A
from B import C2

class C1(object):
    def __init__(self):
        self.name = "C1"
        self.c2 = C2()

# Module B
from A import C1

class C2(object):
    def __init__(self):
        self.name = "C2"
        self.c1 = C1()

# Main
from A import C1

if __name__ == "__main__":
    o = C1()
    print o.name 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:35:29.437

解决方案（假设无限递归已解决）：

1.  避免这种循环依赖。

2.  将相互依赖的组件放入同一个模块中。

3.  使用`import A`and`import B`而不是`from ...`表单。（如果涉及到包，这在某些情况下可能会失败。）

4.  使用函数级导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:33:41.310

将模块 B 更改为`C1`直到最后一刻才导入类，在`__init__.py`：

```
class C2(object):
    def __init__(self):
        from A import C1
        self.name = "C2"
        self.c1 = C1() 
```

请注意，因为`C1`实例化`C2`和反之亦然，您最终会遇到无限递归问题，但我会仁慈地假设您在插图示例之外没有这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:42:26.907

这是任何语言的循环依赖，实际上是无限递归

从c1中取出c2，从c2中取出c1

```
from B import C2 
from A import C1

class C3(object):
  def __init__(self):         
    self.c1 = C1() 
    self.c2 = C2() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-02T11:48:02.617

由于是循环导入错误，请从 MODULE B -> "from A import C1" 中删除导入语句。

在您需要的地方（在方法内）导入“C1”。

**像这样 -** 从 B 导入 C2

C1类（对象）：

```
def __init__(self):
    self.name = "C1"
    self.c2 = C2() 
```

C2类（对象）：

```
def __init__(self): 
    import A.C1
    self.name = "C2"
    self.c1 = C1() 
```

# java - 过度使用异常处理的程序模型在速度方面是否有效？

> ID：11053787
> 
> 赞同：1
> 
> 时间：2012-06-15T15:30:56.550
> 
> 标签：java, exception-handling

虽然这个问题很笼统，但我会提到引发查询的场景。

***场景***：

我对分析大量字符串（尤其是数字字符串）感兴趣。因此，我的第一项工作是过滤掉那些甚至包含除数字以外的单个字符的那些。

一个简单的方法是（在 Java 中）：

```
for (String val : stringArray){
   try{
     int num = Integer.parseInt(val);
     doSomething(num);
   }
   catch(NumberFormatException nfe){}
} 
```

我必须提到的另一点是，数组中只有大约 5% 的字符串是纯数字的。因此，简而言之，将涉及很多捕捉。

我想知道的是，这在设计方面是否是一种有效的方式，还是我应该考虑其他方式来做同样的事情？

* * *

**基于答案的结论：**异常确实很昂贵，将它们用作控制语句的一种形式并不是一个很好的设计实践。因此，应该尽可能地尝试寻找替代方案，如果仍然有例外似乎更清晰/更容易，则应该将其记录好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:34:14.210

您在此处所做的操作本质上是正确的，因为 java 中没有其他标准方法可以检查字符串是否为数字。

如果[分析](https://www.google.com/?q=profiling+java)证明你这个操作太长了，你可以尝试像[在 parseInt 方法中](http://www.docjar.com/html/api/java/lang/Integer.java.html)那样自己做，但是 JVM 不能做同样的优化，所以我不推荐它。您将看到 JVM 为处理异常进行了高度优化，并且它很好地完成了这项工作。

出于好奇，以下是在 java 中执行此操作的几种方法：

[http://rosettacode.org/wiki/Determine_if_a_string_is_numeric#Java](http://rosettacode.org/wiki/Determine_if_a_string_is_numeric#Java)

带有指向其他语言的链接，但是您的解决方案是标准且惯用的解决方案，我怀疑您会像示例中那样重写它会发现很大的不同：

```
private static final boolean isNumeric(final String s) {
  if (s == null || s.isEmpty()) return false;
  for (int x = 0; x < s.length(); x++) {
    final char c = s.charAt(x);
    if (x == 0 && (c == '-')) continue;  // negative
    if ((c >= '0') && (c <= '9')) continue;  // 0 - 9
    return false; // invalid
  }
  return true; // valid
} 
```

在我看来，使用它是过早优化导致代码可维护性降低的典型案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:42:11.817

它效率不高。您可以在网上查找大量资源，了解为什么认为抛出异常很昂贵，例如：[http](http://www.yoda.arachsys.com/csharp/exceptions.html) ://www.yoda.arachsys.com/csharp/exceptions.html 。

不幸的是，Java 没有提供这样的实用方法 OOTB（如 C# 的 tryParse）。您可以枚举字符串的字符并使用 Character.isDigit 方法（您甚至可以将验证和转换交织成 int）。

异常应该用于某些流的异常终止。执行可能引发异常的操作时，您应该始终考虑是否可以执行检查以节省成本，尤其是处理异常的代码。例如 - 检查一个字符串是否是一个数字，而不是尝试解析它并依靠异常机制来告诉你它是否不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:34:45.910

在您的应用程序的更大上下文中，这可能不太重要。像这样的微优化很难猜测。

更好的方法是尽可能简洁地编写代码，然后进行测量以查看其性能以及瓶颈所在的位置（如果有的话）。如果你发现自己的性能不能接受，找到最大的瓶颈，如果可以的话，解决它；冲洗并重复，直到性能可以接受。

问题是我们都不够聪明，无法“知道”问题出在哪里。你最好用数据优化而不是猜测。

在您的情况下，这是一个未经检查的异常。你可以忽略它，但这意味着一个坏字符串会把你吹出循环。将 catch 放在循环中允许您容忍一小部分输入字符串未能通过数字解析并继续。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:38:16.110

检查纯数字字符串的一种基于非异常的方法是使用正则表达式。例如：

```
public static void main(String[] args) throws Exception {
    String[] array = {
            "abc",
            "123",
            "12A",
    };
    Pattern p = Pattern.compile("\\d*");
    for (String s: array) {
        Matcher m = p.matcher(s);
        if (m.matches()) {
            System.out.println(s);
        }
    }
} 
```

基于异常的处理可能很昂贵。

正则表达式也不是最快的。

两者都试一下，看看哪个对你来说更快。

# php - 如何获取通过 facebook 社交插件注册我的网站的用户的个人资料图片

> ID：11053790
> 
> 赞同：0
> 
> 时间：2012-06-15T15:31:15.863
> 
> 标签：php, facebook, image, facebook-graph-api, facebook-opengraph

我在我的网站上通过 iframe 嵌入了一个注册插件，该注册插件工作正常，**我还可以通过使用位于** [此处的 signed_request 文件中的以下代码行来获取每个用户的唯一 user_id](http://developers.facebook.com/docs/plugins/registration/)

我用来获取 user_id 的代码行是：`$response["user_id"];`

既然我有每个用户的唯一 ID，我想要一种方法来获取该用户的个人资料图片的链接，我知道我可以 使用开放图**获取个人资料图片的缩略图，**

但我正在寻找一种方法来获取完整或原始个人资料图片的链接，而不是缩略图。

有没有办法做到这一点？使用开放图或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:54:07.203

您首先需要`user_photos`权限。然后像这样的事情应该这样做：

```
SELECT cover_object_id FROM album WHERE owner=me() and type='profile' 
```

*替换`me()`为您要查询的用户。*

它返回照片对象，然后您可以使用该对象从中提取完整版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:45:05.970

`/user_id/?fields=picture`在同一个 signed_request 中使用 access_token 进行API 调用

# java - android java构建一个带有标题、正文和按钮的简单窗口

> ID：11053801
> 
> 赞同：0
> 
> 时间：2012-06-15T15:31:49.793
> 
> 标签：java, android, android-relativelayout, android-sdk-2.3

我正在尝试创建一个简单的活动，其中包含标题（固定在顶部）、正文（可滚动）和关闭按钮（固定在底部）。

我设法让正文和按钮工作，但是当我添加标题部分时，它停止工作并且我不断收到“java.lang.ClassCastException：android.widget.ScrollView”

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/detailDialogButton"
        android:layout_width="fill_parent"
        android:layout_height="35dip"
        android:layout_alignParentBottom="true"
        android:paddingTop="5dip"
        android:text="Close"
        android:textSize="16dip" >
    </Button>

    <TextView
        android:id="@+id/detailsDialogTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="TEST TEST"
        android:textSize="16sp" >
    </TextView>

    <ScrollView
        android:id="@+id/detailsDialogSV"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/detailDialogButton"
        android:layout_below="@id/detailsDialogTitle"
        android:isScrollContainer="true"
        android:overScrollMode="always"
        android:scrollbarAlwaysDrawVerticalTrack="true"
        android:scrollbarStyle="outsideInset"
        android:scrollbars="vertical" >

        <TextView
            android:id="@+id/detailsDialogText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="10sp" >
        </TextView>
    </ScrollView>

</RelativeLayout> 
```

现在工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:34:42.307

我的猜测是，在您的 Java 代码中，您试图将非 ScrollView 的内容转换为 ScrollView，反之亦然。

除非您编辑帖子并在调用 findViewById(); 的位置添加 java 代码，否则无法确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:09:35.580

愚蠢的 Eclipse 以某种方式保存了旧数据并在清理后工作

# ruby - 从windows获取环境变量

> ID：11053803
> 
> 赞同：1
> 
> 时间：2012-06-15T15:31:55.800
> 
> 标签：ruby, windows, environment-variables

根据一些答案，以下应该给我windows中的环境变量用户名。但只是给SYSTEM。我知道其他获取用户名的方法，但是在 Ruby193/Windows7 中获取环境变量的最简单方法是什么？

```
puts ENV['USERNAME'] #=> SYSTEM 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:23:05.953

找到了 ！尽管我没有收到错误但结果错误（我的用户名肯定不是 SYSTEM 并且我在解释器中运行脚本，没什么特别的）我不得不要求 win32ole。我之前注意到了这一点，windows 脚本没有运行或没有给出预期的结果，但不要抱怨遗漏了一些东西，当你包含一些库时，它会突然起作用。

```
require 'win32ole'
puts ENV['username'] #=> peter 
```

编辑：当我现在尝试它时，它突然无需要求就可以工作，令人毛骨悚然！我会在其他 W7 电脑上进行一些测试，并随时通知您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:35:18.140

这*就是*获取环境变量内容的方式。与操作系统无关。

如果返回，`SYSTEM`那么您的用户名*是* `SYSTEM`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:35:35.153

如果您的进程作为服务运行（例如，作为 Web 服务器），那么`SYSTEM`这是正确的答案。您可以更改服务以作为不同的用户运行（但我怀疑这不是您想要做的）。

# symfony - 如何跨多个捆绑管理 Twig 继承？

> ID：11053805
> 
> 赞同：0
> 
> 时间：2012-06-15T15:32:03.883
> 
> 标签：symfony, twig

我（仍然）是 Symfony 的初学者，并且一直在阅读关于Twig[的三级继承](http://symfony.com/doc/current/book/templating.html#three-level-inheritance)。

如果您在包中定义块，它们的名称可能是特定于包的，并且与您的应用程序`base.html.twig`或其他包中定义的块名称不匹配，或者甚至名称可能相同但用法可能不同。

*   有没有人发现这是一个问题？
*   有没有办法管理这个，会在`app/`帮助下覆盖模板吗？
*   是否有任何关于块名称的约定或其他任何可以最大限度地减少维护问题的约定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:40:57.437

块名称应该与将要放置在块中的内容有某种关系。因此，如果您在一个块中具有 css 样式，则将其称为样式表，而对于 javascript 文件，则将其称为 JavaScript。至于捆绑包，在视图文件夹中创建一个 layout.html.twig 并扩展 base.html.twig。

# python - 动态导入给定目录/包中的每个模块

> ID：11053808
> 
> 赞同：0
> 
> 时间：2012-06-15T15:32:08.080
> 
> 标签：python, import, importerror

我有这样的文件结构：

```
dir_a
    __init__.py
    mod_1.py
    mod_2.py
dir_b
    __init__.py
    my_mod.py 
```

我想动态导入 in 中的每个模块，`dir_a`为了`my_mod.py`做到这一点，我在`__init__.py`of 中有以下内容`dir_a`：

```
import os
import glob
__all__ = [os.path.basename(f)[:-3] for f in glob.glob(os.path.dirname(os.path.abspath(__file__)) + "/*.py")] 
```

但是当我这样做时：

```
from dir_a import * 
```

我明白了`ImportError: No module named dir_a`

我想知道是什么原因造成的，是因为父目录包含`dir_a`并且`dir_b`必须在 PYTHONPATH 中吗？此外，上述方法仅在`my_mod.py`运行时获取所有内容的意义上是动态的，但如果`dir_a`在运行期间添加新模块，则不会获取该新模块。那么有没有可能实现真正的动态导入机制呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:46:07.637

您问题第一部分的答案是微不足道的：`import dir_a`当包含的目录`dir_a`不在搜索路径中时，您不能。

对于第二部分，我认为这通常是不可能的——你*可以*在 中监听“文件创建”的 OS 信号，`dir_a`查看创建的文件是否为不会追溯性地将新事物添加到全局命名空间，因为只在导入时查看其中的内容。并且更改*它*很容易出错 - 它允许您的命名空间根据不可预测的外部事件随时更改。假设你这样做：`.py``dir_a.__all__``from foo import *``foo.__all__`

 *```
from dir_a import *
bar = 5 
```

然后将 a`bar.py`添加到`dir_a`. 如果不考虑这种情况并决定要发生什么，您就无法编写“真正动态的导入器”。*

# objective-c - 获取触摸位置滚动视图

> ID：11053811
> 
> 赞同：0
> 
> 时间：2012-06-15T15:32:11.100
> 
> 标签：objective-c, xcode

我需要获取触摸位置，并且我创建了一个获取它的方法。但是当我在 ScrollView 中触摸时，该方法不返回位置，只返回 scrollView。

这是代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint pos = [touch locationInView:nil];
    NSLog(@"Position of touch: %.0f, %.0f", pos.x, pos.y);
} 
```

有人知道怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:58:58.650

```
CGPoint pos = [touch locationInView:nil]; 
```

您正在检索相对于窗口原点的触摸坐标。根据[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UITouch_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006785-CH3-SW5)：

> *看法*
> 
> 您希望触摸位于其坐标系中的视图对象。处理触摸的自定义视图可以指定 self 以在其自己的坐标系中获取触摸位置。**通过`nil`以获取窗口坐标中的触摸位置。**

要在滚动视图中获取坐标，您需要传递`self`：

```
CGPoint pos = [touch locationInView:self]; 
```

# c - GNU C lib hsearch_r 返回负整数是什么意思？

> ID：11053819
> 
> 赞同：0
> 
> 时间：2012-06-15T15:32:34.430
> 
> 标签：c, gnu

```
int status;
status=hsearch_r(wishFind,FIND,&(h->retElem),(h->htab));
print("Debug: status is %d\n",status); 
```

结果显示状态为
-8400，但 wishFind 不在 h->htab 中。

```
I think status need to be 0.
it's confused me that status is -8400.
Thanks! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T08:35:01.840

从[手册页](http://linux.die.net/man/3/hsearch)：

> hsearch_r() 成功时返回非零值，错误时返回 0。

这意味着它允许在成功时返回*任何*非零值，因此您需要满足这一点：

```
if (status == 0) {
    // failure
} else {
    // success
} 
```

如果您要查找的内容确实*不在*哈希表中，那么您遇到的问题与您向我们展示的代码完全不同。

# algorithm - 在任意坐标周围找到半径为 r 的球体中的所有点

> ID：11053820
> 
> 赞同：4
> 
> 时间：2012-06-15T15:32:40.157
> 
> 标签：algorithm

我正在寻找一种有效的算法，对于具有已知高度、宽度和长度的空间，给定一个固定的半径 R，以及一个点列表 N，在该空间中具有 3 维坐标，将找到固定范围内的所有点网格上任意点的半径 R。此查询将使用不同的点多次完成，因此昂贵的预处理/排序步骤以换取快速查询可能是值得的。这是我正在处理的应用程序的一个瓶颈步骤，所以任何时候我可以切断它都是有用的

到目前为止我尝试过的事情：

- 朴素算法，遍历所有点并计算距离

- 将空间划分为长度为 R 的立方体的网格，并将点放入其中。这样，对于每个点，我只需要查询直接相邻的存储桶。这有显着的加速

-我尝试使用曼哈顿距离作为启发式方法。也就是说，在桶内，在计算到任何点的距离之前，使用曼哈顿距离过滤掉那些不可能在半径 R 内的（即曼哈顿距离 <= sqrt(3)*R 的那些） ）。我认为这会提供加速，因为它只需要加法而不是乘法，但它实际上使程序减慢了一点

编辑：为了比较距离，我使用平方距离来消除必须使用 sqrt 函数。

显然，我可以加快多少速度会有一些限制，但我可以使用任何关于现在尝试的事情的建议。

并不是说它在算法层面上可能很重要，但我正在使用 C 语言工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:35:10.140

不要在半径上比较，在半径的平方上比较。原因是，如果两点之间的距离小于`R`，则距离的平方小于`R^2`。

这样，当您使用距离公式时，您不需要计算平方根，这是一项非常昂贵的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T15:37:19.980

将点存储在具有三个维度的[kd 树](http://en.wikipedia.org/wiki/K-d_tree)中可能会提高速度。这将使您在 O(log n) 摊销时间内进行搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:37:46.157

我建议使用 KD 树或 z 曲线： [http ://en.wikipedia.org/wiki/Z-order_%28curve%29](http://en.wikipedia.org/wiki/Z-order_%28curve%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T16:22:08.760

[二叉索引树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)怎么样？（参考Topcoder教程）可以扩展到n维，编码更简单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T13:34:52.483

[Nicolas Brodu's NEIGHAND](http://nicolas.brodu.numerimoire.net/en/programmation/neighand/index.html) library do exactly what you want, improving on the bin-lattice algorithm.

More details can be found in his article: [Query Sphere Indexing for Neighborhood Requests](http://nicolas.brodu.numerimoire.net/common/recherche/publications/QuerySphereIndexing.pdf)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T17:53:09.063

[我可能误解了这个问题。我发现问题陈述难以解析。]

在过去，设计一种带有“早期输出”的算法通常很好，这些算法会进行测试以避免更昂贵的计算。在现代处理器中，分支预测的失败通常是非常昂贵的，而这些早期测试实际上可能比完整计算更昂贵。（确定的唯一方法是测量。）

在这种情况下，计算非常简单，因此*最好*避免构建数据结构或进行任何巧妙的提前检查，而是尝试优化、向量化和并行化以获得所需的吞吐量。

对于一个点 P(x, y, z) 和一个球体 S(x_s, y_s, z_s, radius)，隶属度检验是：

```
(x - x_s)^2 + (x - y_s)^2 + (z - z_s)^2 < radius^2 
```

where`radius^2`可以为查询中的所有点预先计算一次（避免任何平方根计算）。这些计算都是独立的，您可以并行计算多个点。使用 SSE 之类的东西，您可能一次可以做四个。如果您有很多点要测试，您可以拆分列表并进一步并行化跨多个内核的工作。

# javascript - 使用 jquery 从 ajax 响应中提取

> ID：11053822
> 
> 赞同：0
> 
> 时间：2012-06-15T15:32:59.280
> 
> 标签：javascript, jquery, asp.net, ajax, vb.net

```
http://localhost:2000/WebService/Handler.ashx?d=ck 
```

查看 URL 时的响应：

```
{"Status":"OK","Message":"0","Info":"(none)"} 
```

使用 JQuery 我如何从中提取？我知道你是如何进行 POST 和发送的，但对于如何从中提取信息来说几乎没有什么损失。我使用 GET 吗？

我在做类似 $.get("URL HERE"...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:34:49.063

```
$.ajax({
    url:"...",
    dateType: "json", // <=== you expect "JSON" string
    success: function(data){ 
        alert(data.Status); // Extract the data from the response.
        alert(data.Message);
        alert(data.Info);            
    }        
}); 
```

或简写`getJSON`函数：

```
$.getJSON(url,function(data){
    data.Status;
    ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:34:23.697

您可以使用[ajax](http://api.jquery.com/jQuery.ajax/)函数来检索您的 JSON 响应：

```
$.ajax({
  url: 'http://localhost:2000/WebService/Handler.ashx?d=ck',
  dataType: 'json',
  success: function(data) { 
      console.log(data); 
      console.log('Status: ' + data.Status); 
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:44:49.090

使用jquery 的[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)或[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/)函数。

```
 $.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: callback
}); 
```

或者这样...

```
 $.getJSON('ajax/test.json', {data: data },function(data) {
      // do as needed
 }); 
```

# php - 防止php xpath查询数组拆分结果

> ID：11053826
> 
> 赞同：0
> 
> 时间：2012-06-15T15:33:13.870
> 
> 标签：php, xpath

我认为的每个结果都应该在同一行。但是，对于每个 class="title"，每次遇到 BR 时，结果都会被拆分为另一个数组行。结果应该都在同一行。

[html]

```
<td class="title">
<a href="http://boguslink">bogus title</a>....<br>
here is some text
</td> 
```

[php]

```
$dom = new DOMDocument();
$dom->loadHTML($html);
$xpath = new DOMXPath($dom);

$result = $xpath->query('//td[@class="title"]/text()');

foreach ($result as $result_row) 
{       
         echo $i.":".$result_row->nodeValue."<br />";
         $i++;
} 
```

[输出]

```
 0: ....
 1: here is some text 
```

当输出应该是

[输出]

```
 0: ....here is some text 
```

这是一个错误吗？如果不是，那么如何保持 class="title" 结果不被拆分为单独的行并同时保持我的代码像上面一样快速精简？

编辑：

好吧，不是 /text() 的错误和行为。我可以通过简单地从 xpath 表达式中删除 /text() 来获取该类的所有内部文本。它只是想弄清楚此时如何排除链接文本，所以我只得到“....这里是一些文本”。

所以我需要一个不包括链接文本的表达式。第一次失败的尝试是。

```
//td[@class="title"][not(a)] 
//td[@class="title"][not(self::a)] 
//td[@class="title"][not(@href)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:38:40.307

不，它不是错误。该`text()`函数抓取文本节点。如果您`<br />`在文本之间有一个或另一个标签，那么您有必要制作多个节点。这就是 DOM 的工作方式。

> 好的，所以 text() 不像我想象的那样工作（所有 innerhtml 连续）。我删除了 /text() ，我只需要找出适当的 xpath，所以我没有得到链接文本。谢谢

是的，我认为您无法通过单个查询来做到这一点。基本上要获得`td`作为一个字符串的文本内容，您需要`nodeValue`. `td`但这也将始终包括 的文本节点`a`。XPath 只会根据节点选择事物，这就是它的工作原理。因此，您要么将 the`td`作为节点并将所有内容作为字符串获取，要么过滤 the 的子`td`节点以仅获取所需的节点（最初都是 direct `textNode`s）。但是你必须将它们重新组装成一个字符串。

所以你有3个选择：

1.  处理`a`文本并使用`$theTd->nodeValue`
2.  在执行之前从 DOM 中删除`a`标签`$theTd->nodeValue`
3.  只抓取文本节点，然后将它们重新组合成一个完整的字符串

我个人认为＃3是最好的选择，你只需要重新编写你的代码......

```
$tdNodes = $xpath->query('//td[@class="title"]');

foreach ($tdNodes as $i => $td) 
{       
         $text = $xpath->query('./text()', $td);
         $textStr = '';

         foreach($text as $str) 
         {
            $textStr .= $str->nodeValue;
         }

         echo $i.":".$textStr."<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:43:48.280

这是一个愚蠢的解决方案，但它可能对您有用...如果您不想处理文本中的中断，请在 DOM 之前用空格或 html 字符串中的任何内容替换它们。

# ruby - YAML.load(file) 返回 false？

> ID：11053831
> 
> 赞同：3
> 
> 时间：2012-06-15T15:33:27.650
> 
> 标签：ruby, ruby-1.9.3

我有一个指向空`.yml`文件的文件对象。当我尝试加载此文件时，`YAML.load`我得到`false`的不是空哈希。这是预期的行为吗？

`file.read`正在`""`按预期返回。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T15:57:37.313

那可能是因为`YAML.parse("")`返回`false`。所以我想这是预期的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-07T08:08:56.293

您可以修改`load_file`功能如下：

代替

`data_hash = YAML.load_file(yaml_file)`

至

`data_hash = YAML.load_file(yaml_file, {})`

因此，当`YAML`向`load_file`函数提供空文件时，它将返回一个空哈希（我的 Ruby 版本是 Ruby 2.4.0p0）

示例：空文件：/Users/batman/config/config.yml

```
 irb:
    2.4.0 :001 > require 'yaml'
    => true 
    2.4.0 :006 > YAML.load_file("/Users/batman/config/config.yml",{})
    => {} 
```

# git - github没有上传我创建的新文件

> ID：11053833
> 
> 赞同：1
> 
> 时间：2012-06-15T15:33:30.870
> 
> 标签：git, github

我是 github 菜鸟，但由于开源方面的原因，我想使用它。

我设法按照教程，最初填充存储库并从我的 eclipse android 工作区上传文件。现在我添加了更多文件并在我的 ubuntu 终端中尝试了以下 git 命令。

```
cd Dropbox/android/workspace
git add .    //figured this would add the new files?
git commit -m 'changed a few things...'
git push origin master 
```

任何地方都没有错误消息，当我查看 github 网站时，我看到了一个 .metadata 文件夹，其中包含我在上面输入的提交消息。其他文件夹没有此消息。我寻找我的新文件，但它们不在 github 上。

我错过了一些非常容易的事情吗？

这是终端输出：

```
git add -A 
```

没有。

```
git commit -m 'blah'

[master 41642e3] new fiels
 16 files changed, 57 insertions(+)
 create mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/Finance_Calculator2/.markers.snap
 create mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/Finance_Calculator2/.syncinfo.snap
 delete mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/Finance_Calculator2/org.eclipse.jdt.core/state.dat
 create mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/MyCalcFinance2/.markers.snap
 create mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/MyCalcFinance2/.syncinfo.snap
 delete mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/MyCalcFinance2/org.eclipse.jdt.core/state.dat
 create mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/TabletCalc/.markers.snap
 create mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/TabletCalc/.syncinfo.snap
 delete mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/TabletCalc/org.eclipse.jdt.core/state.dat
 create mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/blank/.markers.snap
 create mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/blank/.syncinfo.snap
 delete mode 100644 .metadata/.plugins/org.eclipse.core.resources/.projects/blank/org.eclipse.jdt.core/state.dat
 create mode 100644 .metadata/.plugins/org.eclipse.core.resources/.root/.markers.snap
 create mode 100644 .metadata/.plugins/org.eclipse.core.resources/.snap
 create mode 100644 .metadata/.plugins/org.eclipse.team.cvs.core/.running

git push origin master

To https://github.com/killerpixler/Android-Application-Development.git
   bb1d6a5..41642e3  master -> master 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:38:57.650

尝试`git add -A`而不是`git add .`. 由于您的代码位于当前目录下的目录中，我假设 git add 。只添加当前目录中的目录，但它不是递归的，不会添加这些目录下的文件。 `git add -A`将添加所有更改的文件。`-A`您可以通过创建一个`.gitignore`明确说明不添加的文件（即`/bin`和`/gen`目录）的文件来排除某些文件的添加选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:48:39.223

如果它是您正在谈论的空文件夹 - 这是正常的[git](/questions/tagged/git "显示标记为“git”的问题")行为。[git](/questions/tagged/git "显示标记为“git”的问题")默认不会添加空文件夹。您可以按照以下步骤强制它这样做：

在空目录中创建一个名为的文件`.gitignore`，其中包含以下两行：

```
# Ignore everything in this directory
*
# Except this file
!.gitignore 
```

# c - C指针分配：错误的地址和分段错误

> ID：11053836
> 
> 赞同：0
> 
> 时间：2012-06-15T15:33:44.600
> 
> 标签：c, pointers, segmentation-fault, fault, memory-address

我在这里遇到了一个非常奇怪的问题，希望有人可以帮助我。这就是代码。

```
Node *fct(Node *list)
{
  Node *node;
  node = list;
  ...
} 
```

通常一切运行顺利，但在某些随机情况下，我会遇到分段错误。我用 GDB 调试。通常列表和节点的地址都是0x80d4000，但是当发生Segfault时，节点的地址= 0x400。（列表仍然是 0x80d4000）。
我真的不知道这可能会出错，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:58:54.997

这还不足以确定代码，但我怀疑在某个地方，您传递了地址的副本（指针）并在 COPY 上进行了修改（如 malloc）；而不是传递此地址的地址（指针上的指针），因此您实际上修改了指针而不是其副本之一。

一个例子来说明我在说什么：

```
int dostuff(char* str)
{
    str = malloc(sizeof(char));
    str[0] = 0x42;
    return 1; // size of string.
}

int main(int argc, char** argv)
{
    char* mystr = NULL;
    unsigned int strlength = 0;
    strlength = dostuff(mystr);
    printf("%s\n", mystr);  // Segfaults here: mystr == NULL.
    free(mystr);
    return 0;
} 
```

所以这就是正在发生的事情：

1.  您创建一个设置为 NULL 的新 char 指针（例如，如果您想重新分配则更好）。
2.  您将其值 (NULL) 传递给`dostuff`. 该函数复制此值（具有 char* 类型），并修改此副本。
3.  printf 访问 mystr 进行打印，在尝试从 NULL[0] (0) 读取时，会出现段错误。

当然，其余的`main`都不会执行。

这就是为什么有人会掉进那个坑的原因：通常，当您使用带有函数的指针对其进行一些修改时，您修改的是它的*内容*，而不是它的地址。当你修改它的地址时，你几乎总是（除了这种情况）有修改它的函数来返回它的新地址。就像在`address = malloc(size)`.

另一方面，如果您想设置一个 POINTER（显然不是内容），您需要将其地址的副本传递给函数。这是上面代码的工作版本：

```
int dostuff(char** str)
{
    (*str) = malloc(sizeof(char));
    (*str)[0] = 0x42;
    return 1; // size of string.
}

int main(int argc, char** argv)
{
    char* mystr = NULL;
    unsigned int strlength = 0;
    strlength = dostuff(&mystr);
    printf("%s\n", mystr);  // Now works: mystr is allocated.
    free(mystr);
    return 0;
} 
```

所以请记住：如有疑问，请返回指针并获取其他变量的地址（`strlength`此处）。如果不可能，请对您正在操作的数据的实际类型非常谨慎，并在修改后仔细检查您的地址。

我希望它有所帮助。

# mvvm - 使用 jQuery Mobile 时应该如何设置 knockout.js 视图模型？

> ID：11053837
> 
> 赞同：0
> 
> 时间：2012-06-15T15:33:45.987
> 
> 标签：mvvm, jquery-mobile, knockout.js, viewmodel

我正在尝试使用 Knockout.js 来“清理”我的 jQuery Mobile 应用程序的架构。

初始化视图模型对象并将它们绑定到视图的“最佳实践”方法是什么？我应该像下面那样做吗？

```
$("#myPage").live("pagecreate", function (event, ui) {
    ko.applyBindings(new App.ViewModels.MyViewModel(), this);
}); 
```

这似乎会在创建页面时创建视图模型。有没有我遗漏的边缘情况，这将是一个问题？如果是这样，推荐的风格是什么？

我想从一开始就做到这一点，因为我认为如果我对这些位如何组合在一起有误解，那将是一场调试噩梦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:35:59.107

`applyBindings`看起来比实际更神奇。您唯一需要确定的是所有元素在调用之前都已实际加载。

# iphone - 有没有办法将 iOS 应用分发给特定的人群（超过 100 人）？

> ID：11053838
> 
> 赞同：2
> 
> 时间：2012-06-15T15:33:46.590
> 
> 标签：iphone, ios, app-store, ad-hoc-distribution

据我所知，有两种分发 iOS 应用程序的方法：

1) 应用商店：应用将向公众开放

2) Ad-Hoc：应用程序将共享到一组设备（最多 100 个）

我为一家公司构建了一个应用程序，他们希望该应用程序仅对超过 100 台设备的员工可见。因此，Ad-Hoc 方法将不起作用。

我想知道是否有办法在 App Store 上发布该应用程序，但将其隐藏。即，该应用程序仅在有人搜索时才会显示？

我有哪些选择？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T15:39:25.380

查看[iOS 开发者企业计划](https://developer.apple.com/programs/ios/enterprise/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:29:53.950

Apple 有一个批量购买计划，您可以直接将您的应用程序分发给您的客户。那是B2B，根本不通过应用商店。

目前它仅适用于美国，因此如果您的客户在其他国家/地区，您将无法利用。

这是[链接](http://www.apple.com/business/vpp/)

# iphone - 如何将文件保存在文档文件夹中？

> ID：11053842
> 
> 赞同：4
> 
> 时间：2012-06-15T15:33:56.567
> 
> 标签：iphone, nsfilemanager, nsdocumentdirectory

我正在尝试将数据保存在 iPhone 5.1 模拟器上的文档文件夹中。

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectory, @"myData.json"];

if ([[NSFileManager defaultManager] isWritableFileAtPath:filePath]) {
    NSLog(@"Writable");
}else {
    NSLog(@"Not Writable");
} 
```

我总是“不可写”。任何想法？请帮我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-15T15:40:16.533

可能因为你没有创建文件，你测试的文件不存在。:)

你可以这样做来找到问题，

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectory, @"myData.json"];
NSLog(@"filePath %@", filePath);

if (![[NSFileManager defaultManager] fileExistsAtPath:filePath]) { // if file is not exist, create it.
    NSString *helloStr = @"hello world";
    NSError *error;
    [helloStr writeToFile:filePath atomically:YES encoding:NSUTF8StringEncoding error:&error];
}

if ([[NSFileManager defaultManager] isWritableFileAtPath:filePath]) {
    NSLog(@"Writable");
}else {
    NSLog(@"Not Writable");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T15:59:11.383

尝试这个：

```
NSString *data = .... // your json representation
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *appFile = [documentsDirectory stringByAppendingPathComponent:@"myData.json"];
[data writeToFile:appFile atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T15:47:48.393

把你`[NSString stringWithFormat:]`的换成`[NSString stringByAppendingPathComponent:]`. 这决定或破坏了你创造可行道路的能力，或者我的经验告诉我。

此外，在模拟器与真实设备上编写时会出现这种情况。当您将内容保存在错误的路径中时，模拟器比设备更宽容，而且通常您会让 I/O 工作正常，只是遇到臭名昭著的“它在模拟器中工作！” 坑。 `stringWithFormat:`只是一种陷入困境的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-02T09:21:11.027

**获取文档目录路径**

```
+(NSURL *)getDocumentsDirectoryPath
{
    return [[[NSFileManager defaultManager]URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask]lastObject];
} 
```

**将数据写入文件末尾**

```
+(void)saveText:(NSString *)textTobeSaved atPath:(NSString*)fileName
{
    NSString *filePath = [NSString stringWithFormat:@"%@.text",fileName];

    NSString *path = [[self getDocumentsDirectoryPath].path
                      stringByAppendingPathComponent:filePath];
    NSFileHandle *fileHandler = [NSFileHandle fileHandleForWritingAtPath:path];
    if(fileHandler == nil) {
        [[NSFileManager defaultManager] createFileAtPath:path contents:nil attributes:nil];
        fileHandler = [NSFileHandle fileHandleForWritingAtPath:path];
    } else {
        textTobeSaved = [NSString stringWithFormat:@"\n-----------------------\n %@",textTobeSaved];
        [fileHandler seekToEndOfFile];
    }

    [fileHandler writeData:[textTobeSaved dataUsingEncoding:NSUTF8StringEncoding]];
    [fileHandler closeFile];
} 
```

# android - Android：如何在旋转后找到 ContentView 的高度？

> ID：11053846
> 
> 赞同：0
> 
> 时间：2012-06-15T15:34:13.533
> 
> 标签：android

我试图在设备旋转后找到我的内容视图的高度。下面的代码在启动时和旋转后打印 ContentView.bottom。如果我以纵向模式启动设备，旋转到横向模式，然后旋转回纵向模式，它会打印：989,989,565。最初的 989 是正确的，其他两个数字是错误的，它们是旋转前 ContnetView 的大小。

在打印 ContentVew 的大小之前，有没有办法检测到由于旋转而导致的布局更改已经完成？

活动设置此标志：

```
android:configChanges="keyboardHidden|orientation"  

public class TempProjActivity extends Activity 
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        printContentBottom();

    }

    @Override
    public void onConfigurationChanged(Configuration newConfig)
    {
        //this occurs when device is rotated or keyboard is exposed/hidden
        super.onConfigurationChanged(newConfig);
        printContentBottom();
    }

    private void printContentBottom()
    {
        getWindow().findViewById(Window.ID_ANDROID_CONTENT).post(new Runnable() {

            @Override
            public void run() {

                Log.e("", getWindow().findViewById(Window.ID_ANDROID_CONTENT).getBottom()+"");
            }
        });
    }
} 
```

# aop - 使用 PostSharp 实施覆盖策略

> ID：11053849
> 
> 赞同：0
> 
> 时间：2012-06-15T15:34:18.547
> 
> 标签：aop, postsharp

我想做以下事情：

假设我在一个名为 LoggingAspect 的类中实现了一个日志记录方面。我想使用多播属性工具配置整个程序集以在某个日志级别记录。现在假设我希望程序集中的特定类具有稍微不同的日志级别，我想装饰整个类或该类中的特定方法，从而获得具有指定类或方法指定级别的日志消息。

我的问题是：

1.  是否可以在 PostSharp 中做到这一点？
2.  如果可以，请具体说明如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:39:27.837

阅读 PostSharp 文档后，似乎解决方案是使用 aspect 属性注释方法，然后指定 AttributeReplace = true。这是我的问题的完整解决方案。

假设我在一个名为 LoggingAspectAttribute 的类中定义了一个日志记录方面，该类在构造函数中获取了 TraceLevel。在 AssemblyInfo.cs 我添加以下定义：

```
[assembly: TracingAspect(TraceLevel.Info,
    AttributeTargetTypes = "PostSharp2.*",
    AttributeTargetTypeAttributes = MulticastAttributes.Public,
    AttributeTargetMemberAttributes = MulticastAttributes.Private | MulticastAttributes.Public)] 
```

PostSharp2 只是我用来测试我的解决方案的程序集的名称。此定义导致我的所有跟踪都使用 Information TraceLevel。

要覆盖此定义，我执行以下操作：

```
[TracingAspect(TraceLevel.Warning, AttributeReplace = true)]
private static void Bar()
{
    Console.WriteLine("Inside Bar");
} 
```

这会导致 Bar 的跟踪消息带有警告跟踪级别，而所有其他消息都保留在信息跟踪级别。

现在，如果我将省略 AttributeReplace 属性并保留属性注释，如下所示：

```
[TracingAspect(TraceLevel.Warning)]
private static void Bar()
{
    Console.WriteLine("Inside Bar");
} 
```

我将看到来自 Bar 的 2 条跟踪消息。一个具有信息级别，另一个具有警告级别。

希望对某人有所帮助。

# solr - 根据 Solr 中的字段长度更改文档提升？

> ID：11053854
> 
> 赞同：2
> 
> 时间：2012-06-15T15:34:33.680
> 
> 标签：solr

我将 Solr 与使用 SolrNet 的 ASP.NET 应用程序一起使用。

我的索引包含具有不同长度的标题和描述字段的文档。这通常使用 dismax 处理程序进行查询，通过`bq`参数将不同的提升应用于每个字段 - 例如。`(is_curated:true^100 OR is_curated:false^0) (title:foo^50) (description:bar^30)`.

`*:*`当没有指定搜索词时（通过`q.alt`参数指定默认搜索词），我想在搜索结果中使标题和描述较短的文档不那么突出。

因此，如果用户搜索“apples”，那么提升应该正常工作，其中匹配的标题和描述较短的文档应该被赋予更大的权重，但如果没有指定搜索词，那么具有短标题和描述的文档应该权重较小。

Solr 查询不一定需要考虑非空查询，因为我可以从 C# 代码执行此检查，并且仅在查询为空时附加用于减少较短字段权重的任何其他参数。

大概我需要使用某种 FunctionQuery 作为提升参数，但任何关于如何实现这一点的建议都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:36:56.727

Solr 在计算 Score 时会考虑字段的长度。

[lengthNorm](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_are_documents_scored) - 较小字段的匹配分数高于较大字段的匹配

您可以自定义相似性类以覆盖该行为。

# c# - 如何确保我的软件连接到正确的服务器？

> ID：11053865
> 
> 赞同：3
> 
> 时间：2012-06-15T15:35:05.927
> 
> 标签：c#, .net, security, ssl, trust

我有一个用 ssl 证书标识自己的服务器。证书是自签名的。

如果用户尝试替换服务器并将“假”证书添加到操作系统信任的证书列表中，我想确保该软件不会发送数据。

到目前为止，这是我想出的：

```
ServicePointManager.ServerCertificateValidationCallback += ValidateRemoteCertificate;

private static bool ValidateRemoteCertificate(object sender, X509Certificate cert, X509Chain chain, SslPolicyErrors policyErrors)
{
    bool result = false;
    if (sender is HttpWebRequest)
    {
        var wr = sender as HttpWebRequest;
        if (wr.Address.Host == "<my host>")
        {
            if (cert == null)
            {
                return false;
            }
            if (cert.GetCertHashString() == "<certificate hash string>")
            {
                return true;
            }
            return false;
        }
    }

    return result;
} 
```

我理解代码的方式，它将信任我的证书`my host`，但它不会受到用户主机替换的保护。

我希望该软件`my host`仅在使用 证书标识自己时才接受`<certificate hash string>`，并且如果`my host`提供其他证书，则必须拒绝连接。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-13T09:24:08.367

> 如何确保我的软件连接到正确的服务器？

由于您事先知道服务器，因此您知道服务器应该使用的证书和公钥。为了利用这些知识，您使用一种称为固定的技术。OWASP 在[Certificate and Public Key Pinning](https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning)对此进行了讨论。

C# 的代码相当简单。以下摘自 OWASP 页面。它连接到 Google，并确保服务器使用预期的公钥：

```
// Encoded RSAPublicKey
private static String PUB_KEY = "30818902818100C4A06B7B52F8D17DC1CCB47362" +
    "C64AB799AAE19E245A7559E9CEEC7D8AA4DF07CB0B21FDFD763C63A313A668FE9D764E" +
    "D913C51A676788DB62AF624F422C2F112C1316922AA5D37823CD9F43D1FC54513D14B2" +
    "9E36991F08A042C42EAAEEE5FE8E2CB10167174A359CEBF6FACC2C9CA933AD403137EE" +
    "2C3F4CBED9460129C72B0203010001";

public static void Main(string[] args)
{
  ServicePointManager.ServerCertificateValidationCallback = PinPublicKey;
  WebRequest wr = WebRequest.Create("https://encrypted.google.com/");
  wr.GetResponse();
}

public static bool PinPublicKey(object sender, X509Certificate certificate, X509Chain chain,
                                SslPolicyErrors sslPolicyErrors)
{
  if (null == certificate)
    return false;

  String pk = certificate.GetPublicKeyString();
  if (pk.Equals(PUB_KEY))
    return true;

  // Bad dog
  return false;
} 
```

证书固定不适用于 Google 和其他一些。这是因为他们每 30 天左右轮换一次证书，以使 CRL 对于移动客户端来说很小。但是他们重新认证了相同的公钥，以允许像 pinning 这样的密钥连续性方案起作用。所以公钥固定将按预期工作。

# mysql - 使用嵌套查询更新

> ID：11053869
> 
> 赞同：0
> 
> 时间：2012-06-15T15:35:12.617
> 
> 标签：mysql

以下是我的查询和相关的错误。我究竟做错了什么？

```
update aaalogin 
  set name = 
      ( select aaacontactinfo.emailid 
        from aaacontactinfo 
        WHERE aaalogin.user_id = aaausercontactinfo.user_id 
          and aaausercontactinfo.contactinfo_id = aaacontactinfo.contactinfo_id
      ); 
```

我明白了

> 错误：“where 子句”中的未知列“aaausercontactinfo.user_id”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:57:30.290

尝试

```
UPDATE aaalogin SET name =
(
    SELECT aaacontactinfo.emailid
    FROM aaacontactinfo, aaausercontactinfo
    WHERE aaalogin.user_id = aaausercontactinfo.user_id
    AND aaausercontactinfo.contactinfo_id = aaacontactinfo.contactinfo_id
); 
```

子查询中不需要aalogin。如果使用，它甚至可能在子查询中返回多条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:39:25.237

`aaausercontactinfo`未包含在`FROM`表格列表中，请尝试：

```
UPDATE aaalogin SET name =
(
    SELECT aaacontactinfo.emailid
    FROM aaacontactinfo, aaalogin, aaausercontactinfo
    WHERE aaalogin.user_id = aaausercontactinfo.user_id
    AND aaausercontactinfo.contactinfo_id = aaacontactinfo.contactinfo_id
); 
```

# javascript - 用javascript绘制形状 - 形状问题

> ID：11053870
> 
> 赞同：0
> 
> 时间：2012-06-15T15:35:16.377
> 
> 标签：javascript, html, drawing

所以我想制作一个使用 javascript 图形的 html5 网站。到目前为止，它的接缝很容易，但是。

如果我画一个正方形，我会得到一个矩形。50 像素乘 50 像素不是正方形的吗？所以我试着玩弄数字。我注意到，如果我将宽度加倍，我会得到更接近正方形的东西。所以我认为这可能是因为我的屏幕比例我在 50 英寸屏幕上以 1920x1080 的分辨率查看我的页面

所以也许我必须做数学才能让我的正方形适合屏幕比例。

但是如果我画一个圆圈，我得到的只是中心和射线，那么我想如何让我的圆圈完美或几乎完美呢？

我正在使用的整个代码

```
<!DOCTYPE html>
<html lang="Fr">
<meta http-equiv="Content-type" content="text/html;charset=utf-8" />
<title>La Maison Repère</title>
<meta name="geo.placename" content="St-Hubert, Québec, Canada" /> 
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<link rel="stylesheet" media="all" href="lmr.css" /> 
<meta name="viewport" content="width=device-width" /> 

<SCRIPT type="text/javascript" SRC="js/jsDraw2D.js"> </SCRIPT>
<SCRIPT type="text/javascript" SRC="js/jquery-1.7.2.js"> </SCRIPT>

<body>
<canvas id="graph"></canvas>

<script type="text/javascript">

var c=document.getElementById("graph");
var ctx=c.getContext("2d");
var col1="FF0000";
ctx.fillStyle=col1;
ctx.fillRect(0,0,50,50);

function circle()
{
  var canvas = document.getElementById("graph"); 
  var context = canvas.getContext("2d");
  context.beginPath();
  context.lineWidth="3";
  context.arc(50, 50, 90, 0, 2 * Math.PI, true);
  context.stroke();
}
circle();  

</script>

</body> 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:49:33.260

您还需要在 JavaScript 中设置画布的宽度和高度。

所以[这](http://jsfiddle.net/SmgtV/)不会，但这[会](http://jsfiddle.net/SmgtV/1/)起作用。

# xcode4.3 - Xcode 在磁盘上的位置

> ID：11053872
> 
> 赞同：0
> 
> 时间：2012-06-15T15:35:20.480
> 
> 标签：xcode4.3

我从 AppStore 安装了 Xcode，但我不确定它安装在哪里。我没有看到它安装的常用路径 - /Developer/Library。当我搜索 Xcode 时，它​​显示它位于 Applications 下。它显示的只是 Xcode.app。我看不到任何相关的 Xcode 文件。

因此，我面临的问题是，我无法从我的系统中卸载 Xcode。由于我无法找到 Xcode 的安装位置，因此无法运行 uninstall-devtools 命令。

我有 Xcode 4.3.3 和 OS 10.7.4。

有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:37:55.910

要在 Finder 中查看所有 Xcode 内容，请右键单击 Xcode 应用程序并选择“显示包内容”。（应用程序实际上是一个目录，但 Finder 默认将其显示为单个文件。）

在终端中，您可以执行以下操作：

```
ls -al /Applications/Xcode.app/Contents 
```

# ruby-on-rails - 如何在控制器中创建条件语句来检测格式？

> ID：11053878
> 
> 赞同：0
> 
> 时间：2012-06-15T15:35:51.837
> 
> 标签：ruby-on-rails

在 Rails 3.2 应用程序中，当我在类上调用非 html 格式时 - 例如 json、csv 等 - 我收到错误

```
Template is missing

Missing partial /path/to/template with {:locale=>[:en], :formats=>[:json]..... 
```

从控制器中的方法调用模板。

如何在控制器中创建一个条件语句，它执行以下操作：

```
if format is html
  my_method_that_causes_the_error
end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:53:43.350

```
respond_to do |format|
  format.html { my_method_that_causes_the_error }
  format.csv  { render :something }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:52:40.113

在您的控制器中

```
 def index # or other method
    ...
    respond_to do |format|
      format.html # render index.html.erb
      format.json { render json: ...} # one-line block
      format.xml do 
        # multi-line block
      end
    end
  end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T15:52:24.137

也许[这](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)就是你要找的东西？

# objective-c - 如何为手势选择器传递参数

> ID：11053884
> 
> 赞同：0
> 
> 时间：2012-06-15T15:36:18.873
> 
> 标签：objective-c, ios4, xcode4.2

我在标签上添加了一个手势，当被点击时我想触发 showlbl 它将 int 作为参数，但是我得到一个编译器错误：

```
UITapGestureRecognizer *gestlbl0 = [[UITapGestureRecognizer alloc] initWithTarget:self 
                                                action:@selector(showlbl:1)   ]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:42:03.200

它不是那样工作的。您只能指定选择器的名称，即要调用的方法的名称。选择器的形式（参数的数量）是固定的，并由调用您的操作方法的类（在本例中为`UITapGestureRecognizer`）定义。

对于这个特定的 action 方法，action 方法的唯一参数是`UIGestureRecognizer *`) 类型的对象。如果您的方法可以访问另一个变量，则必须声明一个适当的 ivar/property 并将值存储在那里。

# c# - 将 20121004 (yyyyMMdd) 转换为有效的日期时间？

> ID：11053887
> 
> 赞同：73
> 
> 时间：2012-06-15T15:36:27.610
> 
> 标签：c#

我有一个以下格式的字符串，`yyyyMMdd`我试图让它看起来像这样：

`yyyy-MM-dd`

当我尝试：

```
string date = "20121004";

Convert.ToDateTime(date).ToString("yyyy-MM-dd"); 
```

我得到错误：

`FormatException: String was not recognized as a valid DateTime.`

以下工作是否可行，或者我会遇到问题：

```
private string GetValidDate(string date,string format)
{
    DateTime result;
    if(DateTime.TryParseExact(date, "yyyy-MM-dd", CultureInfo.InvariantCulture, DateTimeStyles.None, out result))
    {
        return date;
    }
    else if(DateTime.TryParseExact(date, "yyyyMMdd", CultureInfo.InvariantCulture, DateTimeStyles.None, out result))
    { 
        return DateTime.ParseExact(date, "yyyyMMdd",
                CultureInfo.InvariantCulture).ToString("yyyy-MM-dd");
     }
     else
     {
        return "Invalid Date Format";
     }
} 
```

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-06-15T15:42:15.760

只需使用以下`DateTime.ParseExact`方法：

```
string date = "20121004";

string result = DateTime.ParseExact(date, "yyyyMMdd",
                CultureInfo.InvariantCulture).ToString("yyyy-MM-dd"); 
```

这还提供了在使用连字符重新格式化日期之前验证日期的优势。`ParseExact`如果日期不在有效范围内或格式不匹配，则抛出您可以捕获的异常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T15:51:32.197

> 我得到错误：
> 
> FormatException：字符串未被识别为有效的 DateTime。

您收到此错误是因为您没有告诉 ToDateTime() 方法如何弄清楚如何解析您的字符串。

如果您使用以下方法：

```
public static DateTime ParseExact(
    string s,
    string format,
    IFormatProvider provider,
    DateTimeStyles style
) 
```

你不会得到这个错误。生成 DateTime 变量后，只需`yyyy-dd-mm`使用 ToString() 方法以格式显示它。

```
public string ToString(
    string format,
    IFormatProvider provider
) 
```

[http://msdn.microsoft.com/en-us/library/8tfzyc64](http://msdn.microsoft.com/en-us/library/8tfzyc64)
[http://msdn.microsoft.com/en-us/library/9h21f14e](http://msdn.microsoft.com/en-us/library/9h21f14e)

**我知道这基本上重复了与其他人相同的信息，但它也为他提供了能够理解他需要使用的两种方法实际上是做什么的。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T15:39:36.750

这是我使用的扩展方法。

```
/// <summary>
/// Converts a string to a dateTime with the given format and kind.
/// </summary>
/// <param name="dateTimeString">The date time string.</param>
/// <param name="dateTimeFormat">The date time format.</param>
/// <param name="dateTimeKind">Kind of the date time.</param>
/// <returns></returns>
public static DateTime ToDateTime(this string dateTimeString, string dateTimeFormat, DateTimeKind dateTimeKind)
{
    if (string.IsNullOrEmpty(dateTimeString))
    {
        return DateTime.MinValue;
    }

    DateTime dateTime;
    try
    {
        dateTime = DateTime.SpecifyKind(DateTime.ParseExact(dateTimeString, dateTimeFormat, CultureInfo.InvariantCulture), dateTimeKind);
    }
    catch (FormatException)
    {
        dateTime = DateTime.MinValue;
    }

    return dateTime;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T15:40:38.917

这有点难看，但是这个怎么样？

```
date.Insert(6, "-").Insert(4, "-"); 
```

如果您可以假设您输入的是一个表示有效日期的字符串，并且您不需要执行任何其他日期逻辑，那么为什么`DateTime`首先要使用 a 呢？

# java - 使用 JAXB 或 XML DOM 对象时，Spring Web 服务返回不同的结果

> ID：11053893
> 
> 赞同：1
> 
> 时间：2012-06-15T15:36:53.117
> 
> 标签：java, xml, spring, xsd, jaxb

我有一个代表 Web 服务请求的 XML 文档的 JAXB 对象 (ProductRequest)。假设它看起来像这样：

```
<ProductRequest>
<getProducts/>
</ProductRequests> 
```

对于响应，JAXB 对象 (ProductResponse) 将表示一个 XML 文档，如下所示：

```
<ProductResponse>
 <productId>1</productId>
 <productName>Oranges</productName>
 <productId>2</productId>
 <productName>Apples</productName>
</ProductResponse> 
```

使用 Spring-WS，我可以使用两种方法向 Web 服务发送请求

**使用 JAXB 对象**

```
ProductRequest productRequest = new productRequest();

ProductResponse productResponse = (ProductResponse) webServiceTemplate
                .marshalSendAndReceive(productRequest); 
```

**使用纯 XML/DOM**

```
DOMResult domresult = new DOMResult();

webServiceTemplate.sendSourceAndReceiveToResult(source, domresult);  //source represents the XML document as a DOMSource object
Element responseElement = (Element) domresult.getNode().getFirstChild(); 
```

当我尝试这两种方法时，结果是不同的。使用 JAXB 对象的第一种方法的结果是

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ProductResponse xmlns="http://mySchema">
 <productId>1</productId>
 <productName>Oranges</productName>
 <productId>2</productId>
 <productName>Apples</productName>
</ProductResponse> 
```

使用 XML Dom 对象的第二种方法的结果是（包括命名空间）

```
<?xml version="1.0" encoding="UTF-8"?>                 
<ns2:ProductResponse xmlns:ns2="http://mySchema">
 <ns2:productId>1</ns2:productId>
 <ns2:productName>Oranges</ns2:productName>
 <ns2:productId>2</ns2:productId>
 <ns2:productName>Apples</ns2:productName>
</ns2:ProductResponse> 
```

用于 Web 服务响应的模式的标头声明为：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xmlns:z="http://mySchema" 
  targetNamespace="http://mySchema" 
  elementFormDefault="qualified" 
  attributeFormDefault="unqualified">

    -- Schema elements

</xs:schema> 
```

反应有两个不同

*   JAXB 请求响应的第一行包括条目standalone="yes">
*   JAXB 版本上的元素不以命名空间为前缀
*   以架构为前缀的元素的响应不应该使用“z”（如架构中定义的那样）而不是ns2吗？

我不明白是什么导致了这种差异，因为它们都调用相同的 Web 服务，该服务基于相同的模式生成响应。有任何想法吗？

XML 内容是相同的，但 XML 格式的差异给我带来了问题，因为我不能使用 String.equals() 来比较两者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:41:59.187

结果是一样的。ns2 只是命名空间的前缀，jaxb 使用默认命名空间，XML Dom 使用前缀 ns2。xml 文件是等效的，并且它们都对该模式有效。[您可以在此处](http://en.wikipedia.org/wiki/XML_namespace)阅读有关 XML 名称空间的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:52:35.800

响应是相同的，只是没有使用命名空间限定。

附带说明一下，您的 XML 设计看起来有点不稳定。像这样可能会更好；

```
<ProductResponse>
  <product>
    <id>1</id>
    <name>Oranges</name>
  </product>
  <product>
    <id>2</id>
    <name>Apples</name>
  </product>
</ProductResponse> 
```

为什么？因为你不应该依赖元素的顺序。

# java - Eclipse 是否支持 Linux 桌面应用程序开发？

> ID：11053898
> 
> 赞同：0
> 
> 时间：2012-06-15T15:37:06.877
> 
> 标签：java, linux, eclipse, eclipse-plugin

我被分配在 Linux 上开发一个软件，opensuse 11.4。现在的问题是我是一名 Java 开发人员，我想在 Java 上开发该软件。我可以为这个软件使用 Eclipse IDE 吗？它将是 Linux 上的桌面应用程序。如果 Eclipse 支持这种类型的开发，我需要什么插件来启动它？另外，我还需要使用一些库例程。我可以使用 Java 和 Eclipse IDE 以及一些额外的插件来完成所有这些工作吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:53:50.107

只需下载[面向 Java 开发人员的 Eclipse IDE](http://www.eclipse.org/downloads/?osType=linux)。您将不需要任何插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:54:49.130

您可能没有意识到，但这个问题有两个不同的部分。响应在一定程度上取决于您是否已经决定使用什么 GUI 工具包。Java 应用程序的两个明显选择是 AWT/Swing（Java 的“标准”GUI 框架）或 Eclipse 的 SWT/RCP。您会看到，Eclipse 不仅仅是一个 IDE，它还是一个您可以在其上构建应用程序的平台。[这](http://wiki.eclipse.org/index.php/Rich_Client_Platform)是官方的描述，[这里](http://www.vogella.com/articles/EclipseRCP/article.html)有一个很好的介绍和教程。当然，它内置了大量工具来帮助您开发 RCP 应用程序。

如果您希望坚持使用 AWT/Swing，那么 Eclipse 也有工具可以帮助您。具体来说，[WindowBuilder](http://www.eclipse.org/windowbuilder/) (WB) 包含在 Eclipse IDE for Java Developers 包中，您可以下载该包。WB 在设计和实现您的 GUI 方面有很大帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:40:34.033

Java（几乎）编写一次，随处运行（WORA）。因此，您编写的任何 Java 程序都应该能够在任何支持 Java 的架构和操作系统上运行。换句话说，你不需要做任何额外的事情来让你的程序在 Linux 上正常运行。

Eclipse 可以将您的应用程序打包成漂亮的 JAR 文件等，这些文件可以分发到任何操作系统。

# r - 如何在 ggplot2 中获得反向的 log10 比例？

> ID：11053899
> 
> 赞同：48
> 
> 时间：2012-06-15T15:37:06.813
> 
> 标签：r, ggplot2

我想使用 ggplot2 绘制一个反向的 log10 x 比例图：

```
require(ggplot2)
df <- data.frame(x=1:10, y=runif(10))
p <- ggplot(data=df, aes(x=x, y=y)) + geom_point() 
```

但是，似乎我可以*使用*log10 比例*或*反向比例：

```
p + scale_x_reverse() + scale_x_log10() 
```

![log10 比例，但不反转](../Images/7e9616c9f96c8371c9c3411b02dbd371.png)

```
p + scale_x_reverse() 
```

![反转比例，但不是 log10](../Images/888bed16c755f15c0e58c049c9522e80.png)

我想这是合乎逻辑的，如果一个层只能有一个比例。当然，我可以通过自己对数据帧进行日志转换来破解它，`df$xLog <- log10(df$x)` 但这种解决方案似乎与 ggplot 的精神背道而驰。有没有办法在不进行 ggplot 调用外部的数据转换的情况下获得这种绘图？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-15T16:32:47.130

@joran 在他的评论中给出的链接给出了正确的想法（构建你自己的转换），但是对于现在使用的新`scales`包来说已经过时了`ggplot2`。查看`log_trans`并`reverse_trans`在 scales 包中获取指导​​和灵感，`reverselog_trans`可以创建一个函数：

```
library("scales")
reverselog_trans <- function(base = exp(1)) {
    trans <- function(x) -log(x, base)
    inv <- function(x) base^(-x)
    trans_new(paste0("reverselog-", format(base)), trans, inv, 
              log_breaks(base = base), 
              domain = c(1e-100, Inf))
} 
```

这可以简单地用作：

```
p + scale_x_continuous(trans=reverselog_trans(10)) 
```

这给出了情节：

![在此处输入图像描述](../Images/9cdd446f3ce9fbdeef8d7e21e4aef295.png)

使用稍微不同的数据集来显示轴肯定是反转的：

```
DF <- data.frame(x=1:10,  y=1:10)
ggplot(DF, aes(x=x,y=y)) + 
  geom_point() +
  scale_x_continuous(trans=reverselog_trans(10)) 
```

![在此处输入图像描述](../Images/3c9c36fb971e803c00eab9dcc1491da6.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-11-15T00:26:25.863

[`ggforce`](https://ggforce.data-imaginist.com/)包具有[`trans_reverser()`](https://ggforce.data-imaginist.com/reference/trans_reverser.html)此任务的功能。

```
library(ggplot2)
library(ggforce)

p <- ggplot() +
  geom_line(aes(x = 1:100, y = 1:100))

p +
  scale_x_continuous(trans = trans_reverser('log10')) +
  annotation_logticks(sides = 'tb') +
  theme_bw() 
```

![](../Images/4b536cc883905a78d425372c0bdc5bdf.png)

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2020 年 11 月 14 日创建)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-30T22:26:16.870

您可以在规范中直接在 ggplot 函数中应用对数`aes()`：

```
require(ggplot2)
df <- data.frame(x=1:10, y=runif(10))
p <- ggplot(data=df, aes(x = log10(x), y=y)) + geom_point() 
```

然后反转x轴

```
p + scale_x_reverse() 
```

这样你的数据不会改变，但你可以缩放图表

# mysql - 是否可以按索引命名列

> ID：11053901
> 
> 赞同：0
> 
> 时间：2012-06-15T15:37:12.430
> 
> 标签：mysql, sql, database, postgresql, database-design

我想知道是否可以使用 SQL 创建一个按索引（编号）命名列的表。说，我想创建一个包含 1000 万列左右的表，我绝对不想为每一列命名......

我知道我可以编写一个脚本来生成一个长字符串作为 SQL 命令。但是，我想知道是否有更优雅的方式

就像我在这里编造的一样：

```
CREATE TABLE table_name
(
number_columns 10000000,
data_type INT
) 
```

* * *

我猜说 1000 万列会引起很多混乱。对于那个很抱歉。我查阅了几个主要商业 DBMS 的手册，似乎不可能。感谢您指出这一点。

但是另一个最重要的问题是，SQL 是否支持列的数字命名，比如所有列都具有相同的类型并且有 50 列。当提到它时，就像

```
SELECT COL.INDEX(3), COL.INDEX(2) FROM MYTABLE 
```

语言支持吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:43:20.257

忍不住调查一下，发现[MySQL Docs](http://dev.mysql.com/doc/refman/4.1/en/column-count-limit.html)对此说“不”，那

> 每个表有 4096 列的硬性限制，但给定表的有效最大值可能会更少

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:09:18.690

您*可以在***Postgres**中使用**动态 SQL**轻松做到这一点。考虑演示：

```
DO LANGUAGE plpgsql
$$
BEGIN
    EXECUTE '
    CREATE TEMP TABLE t ('
    || (
        SELECT string_agg('col' || g || ' int', ', ')
        FROM generate_series(1, 10) g  -- or 1600?
        )
    || ')';
END;
$$; 
```

**但是你为什么**还要给这样一个怪物生命呢？

[正如@AH 评论的那样， PostgreSQL 中的列数](http://www.postgresql.org/docs/current/interactive/ddl-basics.html)有一个硬性限制：

> 一个表可以包含多少列是有限制的。根据列类型，它**介于 250 和 1600 之间**。但是，定义一个包含这么多列的表是非常不寻常的，并且通常是一个有问题的设计。

强调我的。更多关于[Postgres Wiki 中的表限制](https://wiki.postgresql.org/wiki/FAQ?nocache=0.74615200%201339778561#What_is_the_maximum_size_for_a_row.2C_a_table.2C_and_a_database.3F)。

* * *

### 按索引号访问列

至于您的附加问题：使用上述模式，您可以简单地编写：

```
SELECT col3, col2 FROM t; 
```

我不知道按索引引用列的内置方法。您可以再次使用动态 SQL。或者，对于仅由整数列组成的表，这也可以：

```
SELECT c[3] AS col3, c[2] AS col2
FROM  (
    SELECT translate(t::text, '()', '{}')::int[] AS c -- transform row to ARRAY
    FROM   t
    ) x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:14:24.473

注意：正如@GDP 所提到的，您只能拥有 4096 列，而且这个想法肯定不受欢迎，而且@GDP 再次表示，需要探索数据库设计想法以考虑是否有其他方法可以更好地处理此要求。

但是，我只是想知道除了荒谬的要求之外，如果我需要这样做，我该怎么做？我想为什么不创建一个自定义/用户定义的 MySQL 函数，例如 create_table() 它将接收您打算发送的参数，然后生成所需的`CREATE TABLE`命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:01:49.510

通常，在使用数据库时，您的架构应该或多或少“定义”，因此动态列添加不是内置功能。

但是，您可以运行一个循环并不断`ALTER TABLE`添加列，如下所示：

```
BEGIN
    SET @col_index = 0;
    start_loop: LOOP
        SET @col_index = @col_index + 1;
        IF @col_index <= num_columns THEN
            SET @alter_query = (SELECT CONCAT('ALTER TABLE table_name ADD COLUMN added_column_',@col_index,' VARCHAR(50)'));
            PREPARE stmt FROM @alter_query;
            EXECUTE stmt;
            DEALLOCATE PREPARE stmt;
            ITERATE start_loop;
        END IF;
        LEAVE start_loop;
    END LOOP start_loop;
END; 
```

但是再一次，就像你得到的大多数建议一样，如果你认为你需要那么多列，你可能需要看看你的数据库设计，我个人从未听说过需要这样的案例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-27T08:41:53.180

这是使用序数值查找列的选项。它可能不是最优雅或最有效的，但它确实有效。我正在使用它来创建一个新表，以便在需要解析所有列/行的数据之间进行更快的映射。

```
DECLARE @sqlCommand varchar(1000)
DECLARE @columnNames TABLE (colName varchar(64), colIndex int)
DECLARE @TableName varchar(64) = 'YOURTABLE' --Table Name
DECLARE @rowNumber int = 2 -- y axis
DECLARE @colNumber int = 24 -- x axis

DECLARE @myColumnToOrderBy varchar(64) = 'ID' --use primary key

--Store column names in a temp table
INSERT INTO @columnNames (colName, colIndex)
SELECT COL.name AS ColumnName, ROW_NUMBER() OVER (ORDER BY (SELECT 1))
    FROM sys.tables AS TAB
    INNER JOIN sys.columns AS COL ON COL.object_id = TAB.object_id
    WHERE TAB.name = @TableName
    ORDER BY COL.column_id;

DECLARE @colName varchar(64)
SELECT @colName = colName FROM @columnNames WHERE colIndex = @colNumber

--Create Dynamic Query to retrieve the x,y coordinates from table
SET @sqlCommand = 'SELECT ' + @colName + ' FROM (SELECT ' + @colName + ', ROW_NUMBER() OVER (ORDER BY ' + @myColumnToOrderBy+ ') AS RowNum FROM ' + @tableName + ') t2 WHERE RowNum = ' + CAST(@rowNumber AS varchar(5))
EXEC(@sqlCommand) 
```

# c++ - 用于 pbm 文件的预编码字符和数字资源（便携式位图）

> ID：11053906
> 
> 赞同：0
> 
> 时间：2012-06-15T15:37:24.473
> 
> 标签：c++, c, image

我需要生成包含数字和字符的 .pbm 图片。

有谁知道在哪里可以找到预编码的数字和字符，这样我就不必像[这个维基百科页面](http://en.wikipedia.org/wiki/Netpbm_format "例子")上的“J”那样自己写它们了？

我正在用 C 和 C++ 编写代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:52:15.917

如果你把类似的东西`"public domain" & "pixel font"`放到你最喜欢的搜索引擎中，你会发现很多网站都有像[dafont](http://www.dafont.com/bitmap.php)这样的字体。确保您喜欢的字体具有允许您随意使用它的许可证。

如果字体以图片或图片集合的形式出现，您可以编写一个简单的工具来从中提取单个像素并将它们转换为 C 数组或您需要的任何内容。

# javascript - 如何在 JavaScript 中获取这个子 html 元素？

> ID：11053910
> 
> 赞同：5
> 
> 时间：2012-06-15T15:37:39.217
> 
> 标签：javascript, html

我有一个看起来像这样的 iframe：

```
<iframe id="iframe2" ...>
    #document
        <html>...</html>
</iframe> 
```

我正在尝试`iframe`使用`html`标签获取下方的项目。
在 JavaScript 中，当我这样做时：

```
document.getElementByID("iframe2") 
```

这将返回正确的 iframe。

但是，当我这样做时：

```
document.getElementByID("iframe2").childNodes 
```

返回值为`[]`。

`document.getElementByID("iframe2").getElementsByTagName("#document")`并且`document.getElementByID("iframe2").getElementsByTagName("html")`还返回`[]`。

如何访问该`html`标签？
另外，那个`#document`标签叫什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T15:49:08.563

```
document.getElementByID("iframe2").contentWindow.document 
```

或者，旧版 IE 不支持的变体，

```
document.getElementByID("iframe2").contentDocument 
```

这将为您获取`document`嵌入页面的对象，然后您可以使用`.documentElement`,`.body`或`.head`properties 来获取 html/body/head DOM。

如果您想要`window`嵌入页面的对象，请使用`contentWindow`而不是`contentDocument`.

MDN 有一个[iframe 脚本](https://developer.mozilla.org/en/HTML/Element/iframe#Scripting)指南，您可能会发现它很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:46:03.667

请尝试以下代码：

```
var a = document.getElementById("iframe2").firstChild; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:56:38.107

试试这个 ：

```
var a = document.getElementById("iframe2").getElementsByTagName("*")[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:09:21.430

IFrame 内容的 URL 是否与父页面具有相同的域？否则，由于同源策略，您将无法访问 IFrame 内的任何内容。

# css - 在 SCSS 中制作精灵的最佳方法？

> ID：11053911
> 
> 赞同：0
> 
> 时间：2012-06-15T15:37:39.623
> 
> 标签：css, compass-sass, sass

我试图用 sass 让我的生活更轻松，但似乎我太菜鸟了......

我想简化我使用子弹的方式.....通常是这样的：D

```
//The Sprite 

@mixin sprite($pos: null){
@if $pos ==  null {
    background:url('img/assets/sprite-all.png') 0 0 no-repeat;
}

@else {
    background:url('img/assets/sprite-all.png') $pos no-repeat;

}
}

//The CSS // Bullets
    .bullet1-left:before,
    .bullet2-left:before,
    .bullet3-left:before,
    .bullet4-left:before,
    .bullet5-left:before,
    .bullet6-left:before,
    .bullet7-left:before,
    .bullet8-left:before,
    .bullet1-top:before,
    .bullet2-top:before,
    .bullet3-top:before,
    .bullet4-top:before,
    .bullet5-top:before,
    .bullet6-top:before,
    .bullet7-top:before,
    .bullet8-top:before{
      @include sprite;
      width:64px;
      height:65px;
      content:"";
    }

    .bullet1-left:before,
    .bullet2-left:before,
    .bullet3-left:before,
    .bullet4-left:before,
    .bullet5-left:before,
    .bullet6-left:before,
    .bullet7-left:before,
    .bullet8-left:before{
      float:left;
      padding:0 10px;
      margin:0;
      display:inline-block;
    }

    .bullet1-top:before,
    .bullet2-top:before,
    .bullet3-top:before,
    .bullet4-top:before,
    .bullet5-top:before,
    .bullet6-top:before,
    .bullet7-top:before,
    .bullet8-top:before{
      display:block;
      padding:10px 0;
      margin: 0 auto;  
    }

    .bullet1-left:before{}
    .bullet2-left:before{}
    .bullet3-left:before{}
    .bullet4-left:before{}
    .bullet5-left:before{}
    .bullet6-left:before{}
    .bullet7-left:before{}
    .bullet8-left:before{}

    .bullet1-top:before{}
    .bullet2-top:before{}
    .bullet3-top:before{}
    .bullet4-top:before{}
    .bullet5-top:before{}
    .bullet6-top:before{}
    .bullet7-top:before{}
    .bullet8-top:before{} 
```

简化这一切的最佳方法是什么？？？，有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:51:46.893

试试`[class^="bullet"][class$="-top"]:before {}`。我不确定如何在同一个 html 标记上执行多个选择器，但值得一试。更多关于选择器[的信息](http://w3schools.com/cssref/css_selectors.asp)。如果这不起作用，请尝试使用 `[class^="bullet"]>[class$="-top"]:before'。

**编辑：我做了一个基本的测试，我最初说的和**[这个例子](http://jsfiddle.net/Kyomu/L7HG6/1/embedded/result/)中注释掉的部分一样。

# utf-8 - UTF8 中的哪些字符可以有大写/小写对？

> ID：11053914
> 
> 赞同：1
> 
> 时间：2012-06-15T15:37:47.733
> 
> 标签：utf-8

我知道 az (AZ)、å (Å)、ä (Ä)、ö (Ö)。但是在另一种情况下，有没有官方定义哪些角色实际上有兄弟姐妹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:42:57.543

这是特定于语言的。但请查看[案例映射](http://www.unicode.org/versions/Unicode6.1.0/ch05.pdf#G21180)。这是标准的一部分。

> **5.18 案例映射**
> 
> 大小写是特定字母表中字符的规范属性，例如拉丁文、希腊文、西里尔文、亚美尼亚文和古格鲁吉亚文，因此字符被认为是单个字母的变体。

您可能还想查看[欧洲字母脚本](http://www.unicode.org/versions/Unicode6.1.0/ch07.pdf)部分的语言特定信息。

# javascript - 如何制作适用于 iOS 和桌面的视差滚动网站？

> ID：11053917
> 
> 赞同：17
> 
> 时间：2012-06-15T15:37:55.003
> 
> 标签：javascript, css, ios, parallax

在你说这不可能之前，我知道这是不可能的。这是一个例子：http: [//victoriabeckham.landrover.com/INT](http://victoriabeckham.landrover.com/INT)

主要问题是 iOS 在滚动时冻结了 DOM 操作，因此您必须使用某种技术来克服这个问题。我希望使用的视差插件是 stellar.js，但我遇到的问题是该插件的“iOS 演示”在桌面上并不能真正使用。今天早上我摆弄了 3 个小时，但无法获得在 iOS 和桌面上都能正常工作的设置。

我需要一些想法，要么是一种将 stellar.js 配置为在两者上以相同方式工作的技术（我不确定这是否可能），要么是另一个同时适用于两者的库，或者可能对我如何编程解决方法有所了解我。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T16:04:43.953

第 1 步：像这样创建和对象

```
{
startFrameNumber: {
     //first obj
     id: idOfElement
     duration: howeverManyFrames
     startLeft: whatever
     endLeft: whatever
     startTop: stillWhatever
     endTop: whateverAgain
   },

   nextStartFrameNumber: {

   }
} 
```

第 2 步：通过 CSS 使页面不可滚动，即 100% 的高度和宽度以及溢出：隐藏

第 3 步：当用户滚动（通过自定义滚动条、键盘操作或触摸事件）时，根据滚动的距离或其他内容推进动画 x 帧。如果您创建的动画对象有一个关键 [帧]，则将其添加到可见和移动的事物队列中，并将队列中的所有这些事物移动到它们的适当位置和/或将它们从活动对象队列中删除

而已。移动物体的功能应该非常简单，除了让动画平滑需要一点时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T14:48:36.503

只需手动滚动每一层视差效果并自行控制它们，而无需依赖浏览器的页面滚动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:22:28.440

查看 jQuery 插件“滚动路径” [http://joelb.me/scrollpath](http://joelb.me/scrollpath)并将其与不同的层和速度相结合。您将认识到示例页面的滚动不仅是垂直视差阶段，而且在您上下滚动时还会水平移动图层。滚动路径可以做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T18:47:22.640

我已经在[Zynga Scroller js 库](https://github.com/doctyper/scroller)的帮助下成功实现了跨设备/浏览器视差滚动。它解决了您主要关心的问题之一，即点击和触摸事件以及移动 webkit 设备上的滚动的互操作性——这允许您在滚动时操纵 DOM。

然后，要创建视差效果，您有三个选项：

1.  通过使用 3d 变换（使用控制透视和变换原点的父/包装元素）模拟真实世界的 3d 视差。
2.  使用 2d 视差库，例如 stellar.js 或[skrollr](http://prinzhorn.github.com/skrollr/)
3.  构建自己的视差滚动算法。

[这是选项 1 的快速演示](http://jsfiddle.net/dannygarcia/9j9Kp/1/embedded/result/)（使用现有示例代码），展示了在桌面和移动设备上的平滑视差滚动效果。当然，您仅限于支持 3d 转换的设备。请注意，Zynga Scroller 通过单击/触摸和拖动来工作——它可能不应该用作桌面解决方案，因为唯一需要的就是`overflow: scroll`CSS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T17:52:19.567

尝试同时使用[http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)和 stellar.js。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T16:26:25.280

正常为桌面做视差处理，然后添加一个“touchmove”事件监听器来触发滚动事件：

```
document.body.addEventListener('touchmove', function(){$window.scroll()}, true); 
```

经过 iOs 5.1.1 测试并在 iPad 2 上运行

# scala - 用于导入所有方法的 Scala 对象

> ID：11053926
> 
> 赞同：0
> 
> 时间：2012-06-15T15:38:29.600
> 
> 标签：scala

我正在尝试将一堆方法从一个类导入另一个类而不扩展它。我已经成功了，但为什么一种方法有效而另一种方法无效，这超出了我的理解。

剥离下来，这就是我想要做的

```
class A {def x() {println("x")}}
object A

class B {
   import A._
   def y() {x()}
} 
```

编译器告诉我“未找到：值 x”

但如果我这样做，它会起作用

```
class C extends A

class B {
   import C._ 
```

或者如果我这样做

```
object C extends A

class B {
   import C._ 
```

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:57:31.873

您的代码示例`class C extends A`不起作用的原因是您导入了只能存在于它们定义的类中的类成员。

而当您编写时，`object C extends A`您将创建一个单例（在 Scala 中称为 object like 关键字），它表示一个实例并允许您导入其成员。

因此，要使其他类的成员可见，您总是必须通过对象或另一个类/特征来扩展它们。声明一个类的伴生对象是不够的，因为它不包含其伴生类的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T17:42:43.877

还有使用隐式的可能性。

您需要有一种从 B 的实例到所需的 A 实例的方法。在下面的示例中，我使用了成员值，但也应该可以将其设为函数。

暴露的特征将 B 中的 this 暴露给 A 中声明的隐式。特征 PathTo 可用于暴露 A 的所需实例的路径。

```
class A {
  def a1(){ println("a1") };
  def a2(){ println("a2") };
  def a3(){ println("a3") };
}
object A{
    def a1()(implicit a:A){a.a1};
    def a2()(implicit a:A){a.a2};
    def a3()(implicit a:A){a.a3};

    //makes it possible to use a1() instead of a1()(this.a)
    implicit def insertPathToA(implicit path:PathTo[A]):A=path.pathTo;

    // Makes it possible to write this.a2() instead of this.a.a2();
    implicit def convertPathToA(path:PathTo[A]):A=path.pathTo;
};

trait exposed[U]{
    implicit def self:U=this.asInstanceOf[U];
}

trait PathTo[U]{
    implicit def pathTo:U;
}

class B(val a:A) extends exposed[B] with PathTo[A] {
    // imports the magic
    import A._

    override def pathTo:A=a;

    def y() {
       a1() ;
       this.a2();
   };
} 
```

# sql-server - SQL Server - 更新列在哪里 不在

> ID：11053927
> 
> 赞同：1
> 
> 时间：2012-06-15T15:38:39.467
> 
> 标签：sql-server

假设我有两个表`Main`，`Other`如下所示：

```
 Main
+----------+-----------------------------------+
|  Field1  |  <set of other columns...>        |
+----------+-----------------------------------+
|   NULL   |           ...                     |
|   NULL   |           ...                     |
|   NULL   |           ...                     |

                          Other
           +-----------------------------------+
           |  <same set of other columns...>   |
           +-----------------------------------+
           |           ...                     |
           |           ...                     |
           |           ...                     | 
```

是否有一种简洁的方法来更新`Main.Field1`其余列一起不在一行中的位置`Other`？

换句话说，我想更新`Field1`每一行

```
SELECT <set of other columns...> FROM Main
   EXCEPT
SELECT <same set of other columns...> FROM Other 
```

* * *

动态 SQL 是一种选择，但我试图找出最有效的方法来做这样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:41:07.917

```
update m
set ...
from Main m
where not exists(select * from Other where <columns-equal>) 
```

这转化为左反半连接。

您也可以使用左连接，但这会转化为普通的左连接加过滤器，效率略低。这看起来像是优化器的弱点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:44:41.760

如果你真的想要，你可以使用 except 子句

```
UPDATE m
SET field = 'AValue'
FROM 
   MAIN  m
   INNER JOIN 
    (SELECT * FROM MAIN
    EXCEPT
    SELECT * FROM OTHER ) t
on m.PK = t.PK 
```

[演示](http://sqlfiddle.com/#!3/6e476/6)

您应该注意， `*`此处的使用非常脆弱，您应该明确设置您的字段列表。它还假设连接字段 (PK) 在 Main 和 Other 中都可用，并且它们是相同的

否则，您最好使用 NOT EXISTS 或 ANTI-JOIN (LEFT/ISNULL)

```
UPDATE m
   SET Field1 = 'foo'
FROM 
   Main m
   LEFT JOIN 
     Other o
    ON m.FIELD2 = o.FIELD2
    AND m.FIELD3 = o.FIELD3
WHERE 
   o.PK is null 
```

[演示](http://sqlfiddle.com/#!3/6e476/8)

# ruby-on-rails - 在 Rails 视图中处理英语多元化的最佳方法是什么？

> ID：11053930
> 
> 赞同：2
> 
> 时间：2012-06-15T15:38:46.440
> 
> 标签：ruby-on-rails, pluralize

我通常会做这样的事情，但如果感觉很讨厌而且不是很干：

```
-if minutes == 1
  added #{minutes} minute ago
-else
  added #{minutes} minutes ago 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:41:20.507

```
<%= pluralize(minutes, "minute") %> if you're in a view. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:42:32.643

见[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-pluralize](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-pluralize)

```
"added #{ pluralize(minutes, "minute") } ago" 
```

如果复数版本是非标准的并且 rails 无法识别，您可以添加一个可选的第三个参数。例如（来自文档）：

```
pluralize(3, 'person', 'users') 
```

# javascript - 如何防止jquery覆盖“this”

> ID：11053932
> 
> 赞同：2
> 
> 时间：2012-06-15T15:38:48.637
> 
> 标签：javascript, jquery

我在javascript中有以下类：

```
function User(aJid){
    this.jid = aJid;
    this.name = '';
    this.uni = '';
    this.edad = '';
    this.foto = '';
    this.avatar = '';
    this.initialize2 = function(){

        $('#edit_vcards').on('click', '#enviar_vcard', function(){
            //alert("enviando...");
            console.log(this);
        });
    }; 
```

如您所见，我有一个方法“initialize2”，它将函数绑定到 DOM 中的某些元素。在那里，我`console.log(this)`打印了我们将方法绑定到的 DOM 元素，而不是正在执行该方法的对象`initialize2`。如何从该函数访问该对象？就像绑定的函数的范围是整个 DOM 而不是对象。无论如何做我想做的事？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T15:44:06.873

```
function User(aJid){
    this.jid = aJid;
    this.name = '';
    this.uni = '';
    this.edad = '';
    this.foto = '';
    this.avatar = '';
    this.initialize2 = function(){
    var that = this;  //store a reference to maintain scope

        $('#edit_vcards').on('click', '#enviar_vcard', function(){
            //alert("enviando...");
            console.log(that);  //use that variable here
        });
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:41:38.943

尝试将 obj 传递`this`给`.on`处理程序内部，您可以使用 event.data 来访问 obj `this`。见下文，

```
this.initialize2 = function(){

    $('#edit_vcards').on('click', '#enviar_vcard', {obj_this: this }, function(){
        //alert("enviando...");
        console.log(event.data.obj_this); //should be the obj this
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-17T14:41:13.293

`this`通过外部`event.data`：

```
$('#edit_vcards').on('click', { outerThis: this }, function (event) {
    console.log(event.data.outerThis);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-03T14:17:43.907

现在有了 ES6，它可以更加优雅

```
$('#edit_vcards').click( () => {
            //alert("enviando...");
            console.log(this); // all your variables are availabled here
        }); 
```

甚至像这样（如果你只需要一行）：

```
$('#edit_vcards').click( () => console.log(this) ); 
```

**注意：**此代码不能直接使用，应使用[balel](https://babeljs.io/)进行额外编译，例如。

# .net - 是否可以删除 NuGet 包但保留引用

> ID：11053934
> 
> 赞同：1
> 
> 时间：2012-06-15T15:38:53.740
> 
> 标签：.net, visual-studio, nuget, nuget-package

我不想将所有 NuGet 包存储在我的源代码存储库中。似乎包文件夹中有大量数据，效率低下让我很恼火。

是否可以以保留对它们的引用的方式删除所有 NuGet 包，以便现在更小的解决方案的接收者可以下载所有需要的 NuGet 包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:42:27.527

只需删除`packages`文件夹。重新编译时会下载丢失的包。您只需删除文件夹并重新编译即可在您的机器上对其进行测试。

解决方案/项目中使用的 NuGet 包的实际定义存储在`packages.config`文件中。

确保您已打开“恢复丢失的包”。更多信息在这里：

[http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)

最好*不要*将包文件夹提交到您的源代码存储库。

# jquery - 如何防止自定义选择菜单创建新页面？(jQuery 移动)

> ID：11053937
> 
> 赞同：0
> 
> 时间：2012-06-15T15:39:02.890
> 
> 标签：jquery, jquery-mobile

来自文档：*“当设备屏幕上显示的选项太多时，框架将自动创建一个新的“页面”，其中填充了选项的标准列表视图。”* . 我想防止这种情况发生。知道怎么做吗？谢谢 ：）

**编辑：** 肮脏的黑客是`f>h-80`在`0`你的`jquery.mobile-1.1.0.min.js`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:54:17.563

使用本机选择菜单：http: [//jquerymobile.com/demos/1.1.0/docs/forms/selects/custom.html](http://jquerymobile.com/demos/1.1.0/docs/forms/selects/custom.html)

```
<select data-native="true">
    ...
</select> 
```

这是一个演示：http: [//jsfiddle.net/AYXPs/](http://jsfiddle.net/AYXPs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T19:51:26.863

我相信 OP 正在寻找的是一种在选项列表很长时防止“页面”覆盖在较大设备上的方法，就像状态列表一样。jqm 行为对于手机或小型平板电脑来说可能很好，但它确实会导致桌面设备上的显示以一种使用户界面编程看起来很业余的方式运行——至少对我来说是这样。

我有一个类似的问题，但还没有比使用 data-native-menu="false" 属性更好的解决方案。

# tomcat - 带 SSL 的 Tomcat

> ID：11053938
> 
> 赞同：0
> 
> 时间：2012-06-15T15:39:07.563
> 
> 标签：tomcat, ssl, active-directory, certificate, keytool

我正在尝试使用从 AD 服务器获得的证书在 tomcat 中添加 SSL。

我使用MMC工具获得了我的个人证书，一个中间证书和根证书，活动目录。

这些是我用来在密钥库中导入它们的命令：

```
keytool -import -trustcacert -alias root -file rootcert.cer -keystore keystore
keytool -import -trustcacert -alias intermediate -file intercert.cer -keystore keystore
keytool -import -trustcacert -alias nunocert -file nunocert.cer -keystore keystore 
```

完成后，我更改了 server.xml 并添加了以下内容：

```
<Connector port="8443" maxThreads="150" scheme="https" secure="true" 
 SSLEnabled="true"   keystoreFile="D:/apache-tomcat-7.0.27/conf/keystore.jks" 
 keystorePass="password" clientAuth="false" 
 keyAlias="nunocert" sslProtocol="TLS"/> 
```

重新启动并尝试访问后

```
https://localhost:8443 
```

我总是被拒绝连接。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:59:16.920

您需要一个带有 Tomcat 私钥的密钥库。
您所做的是将各种证书从您的计算机导入到密钥库。
将您的私钥提取到 PKCS12 包中，然后将其设置为 tomcat`storetype=pkcs12`或创建用于 tomcat 的密钥库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:52:48.967

配置似乎是正确的。你用的是哪个兄弟？尝试在浏览器中手动添加根证书和中间证书，看看是否有帮助。如果没有帮助，请使用 VM 参数**-Dssl.debug=true**重新启动 JBoss并检查您的服务器日志以获取与此故障相关的其他信息。

# mysql - MySQL 插入 DATETIME：使用 ISO::8601 格式是否安全？

> ID：11053941
> 
> 赞同：18
> 
> 时间：2012-06-15T15:39:23.863
> 
> 标签：mysql, datetime, iso8601

在我们的项目中，我们使用 Zend Framework 模型生成器，它产生类似这样的东西来将存储在 DB (MySQL) 中的属性设置为 DATETIME 字段：

```
public function setObjectDatetime($data) {
  if (! $data instanceof Zend_Date) { ... some conversion code ... }
  $this->objectDatetime = $data->toString(Zend_Date::ISO_8601);
} 
```

所以 ISO::8601 格式的字符串（例如'2012-06-15T18:33:00+03:00'）实际上是作为属性存储的。

当我们尝试使用`save`此模型并将此字符串传递给 MySQL（版本 5.5.16）时会出现问题：它会引发警告，但仍会以正确的结果插入/更新相应的行。很容易检查问题是由 MySQL 引起的，而不是某些驱动程序的行为：只需发出这样的查询...

```
UPDATE table_name SET datetime_field = '2012-06-15T18:33:00+03:00' WHERE id = 1; 
```

...结果将`1 row affected, 1 warning`是

`1264 | Out of range value for column 'dt' at row 1`

警告（由 显示`SHOW WARNINGS`）。

令我惊讶的是，phpMyAdmin 根本没有显示任何警告。并且所有服务器端代码都将这个查询作为一个可靠的查询来处理。)

所以问题是：我们真的应该将我们存储在模型中的内容重新格式化为另一种字符串格式（例如，'YY-MM-dd HH:mm:ss'？）还是只是 MySQL 的一些奇怪行为将被修复迟早？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T17:50:03.723

看起来这个问题的简短回答是“不，这不安全”——这个结论是在一系列 MySQL shell 实验之后得出的。不过，仍然会欣赏一个更“理论”的答案......

显然，即使设置为 STRICT_ALL_TABLES，MySQL 引擎（默认情况下）在它接受的日期时间文字方面也非常自由`sql_mode`：不仅接受各种分隔符，它们也可能不同：

`INSERT INTO t(dt) VALUES('2012-01,03.04:05@06'); -- Query OK, 1 row affected`

此外，如果字符串太短，则会用零填充......但可能会有惊喜：

`INSERT INTO t(dt) VALUES('2012011'); -- 2020-12-01 01:00:00 is what's inserted`

可悲的是，字符串太长（当最后一个可解析数字后跟空格以外的其他内容时）在严格模式下将被视为无效值：

```
mysql> INSERT INTO t(dt) VALUES('2012-06-27T05:25Z');
ERROR 1292 (22007): Incorrect datetime value: '2012-06-27T05:25Z' for column 'dt' at row 1
mysql> INSERT INTO t(dt) VALUES('2012-06-27T05:25');
Query OK, 1 row affected (0.10 sec) 
```

在传统模式下，解析更加轻松——但不是更精确；此外，在严格模式下被认为不正确的字符串会给出某种“无声警告”，尽管操作会成功：

```
mysql> INSERT INTO t(dt) VALUES('2012-06-27T05:25Z');
Query OK, 1 row affected, 1 warning (0.10 sec)

mysql> SHOW WARNINGS;
+---------+------+---------------------------------------------+
| Warning | 1264 | Out of range value for column 'dt' at row 1 |
+---------+------+---------------------------------------------+

mysql> SELECT dt FROM t;
+---------------------+
| dt                  |
+---------------------+
| 2012-06-27 05:25:00 |
+---------------------+ 
```

底线是我们必须重写一些与 DAL 相关的代码，以便日期（和日期时间）始终以“标准化”形式发送到数据库。我想知道为什么是我们必须这样做，而不是 Zend_Db 开发人员。但那是另一个故事，我想。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T15:46:47.527

据我所知，没有办法在 MySQL Date 或 Time 类型中存储时间偏移信息（ISO 8601 字符串末尾的 +03:00），因此您只能靠自己来寻找解决方案。

一种可能的方法是拆分 ISO 8601 字符串并将偏移量存储在 char(5) 列中，尽管不可否认这会使其有点难以使用。我想您可以将偏移量存储在时间列中，这可能会使日期/时间操作更容易一些。

**编辑**
我刚刚在 MySQL 文档中偶然发现了[这一点](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)，这可能会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-04T14:32:19.700

默认情况下 MySQL 使用 ISO9075 格式作为日期时间

> 第一个和第二个参数的可能值导致几个可能的格式字符串（有关使用的说明符，请参见 DATE_FORMAT() 函数描述中的表）。ISO 格式指的是 ISO 9075，而不是 ISO 8601。

[http://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html#function_get-format](http://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html#function_get-format)

# c# - 如何将 UserControl 的 KeyBinding 传递给其父级？

> ID：11053945
> 
> 赞同：2
> 
> 时间：2012-06-15T15:39:30.223
> 
> 标签：c#, wpf, xaml, mvvm

我已经创建了一点`OKCancelControl`，我想在用户按下`Enter`或时绑定一个命令`Escape`

这是 XAML

```
<UserControl.InputBindings>
    <KeyBinding Key="Enter"
                Command="{Binding ElementName=this, Path=OkCommand, UpdateSourceTrigger=PropertyChanged}"/>

    <KeyBinding Key="Escape"
                Command="iw:InnerWindow.CancelCommand"/>
</UserControl.InputBindings>

<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Border Grid.Column="0"
            Style="{StaticResource BorderStyle}">
        <Button Content="{Binding ElementName=this, Path=ButtonName, UpdateSourceTrigger=PropertyChanged}"
                Command="{Binding ElementName=this, Path=OkCommand, UpdateSourceTrigger=PropertyChanged}"/>
    </Border>

    <Border Grid.Column="1"
            Style="{StaticResource BorderStyle}">
        <Button Content="{Binding Source={x:Static Member=t:BaseText.Cancel}}"
                Command="iw:InnerWindow.CancelCommand" />
    </Border>
</Grid> 
```

但是只有当我的注意力在我的情况下不好时`KeyBinding`才会处理。`UserControl`

我想找到一种 MVVM 或 XAML 方式（如果可能的话）让父母“听”用户按键。

先感谢您 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:32:59.050

使用 Enter 和 Escape 的 OK 和 Cancel 按钮是 Windows 长期以来标准化的东西，因此有一个内置的解决方案。您不需要为命令设置单独的键绑定，因为您可以将按钮设置为尊重这些键。

要使 WPF 在您按 Enter 时“按下”按钮，请`IsDefault="True"`在按钮的 Xaml 中进行设置。同样，设置`IsCancel="True"`将导致当您点击 Escape 时按下按钮。

然后，这两个键都应该在活动窗口中的任何位置起作用，而不管您的控件的焦点是什么。值得注意的是，如果您的窗口中有多个“默认”或“取消”按钮，则行为可能无法预测。

# android - Android：自定义 ArrayAdapter showContextMenu onClick

> ID：11053948
> 
> 赞同：0
> 
> 时间：2012-06-15T15:39:40.837
> 
> 标签：android, onclick

在我的 Android 应用程序中，我有一个自定义 ArrayAdapter，用于管理实现 onCLickListener 的 List 中的行。

在 onClick() 方法中，我想显示上下文菜单。

```
 public class MyAdapter extends ArrayAdapter<MyClass> implements
                                                                OnClickListener  {

    public void onClick(View v) {

            v.showContextMenu();
    } 
} 
```

在我的主 List Activity 类中，我重写了启动不同 Activity 的 onLongListItemClick() 方法。

当我单击列表中的一行时 - 上下文菜单正确显示，但一秒钟后 onLongListItemClick() 也被执行。如何阻止这种情况发生？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:01:13.360

在你的评论之后，我想我有一个解决方案。不要使用`onClick`上下文菜单的行，在您的适配器中为复选框设置一个单击侦听器，并从那里显示您的上下文菜单。这样你就避免了`onLongListItemClick`.

要使复选框*和*行都可单击，请将其添加到 XML 中的复选框定义中：

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

**编辑**

这应该可以解决问题：

```
checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() { 
    @Override 
    public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) { 
        if(isChecked){
           View v = buttonView.getParent();  // get the parent row view containing the checkbox
           v.showContextMenu();     // show the context menu
        }
   } 
} 
```

# android - 我如何打开资源文件以在 Android 中读取

> ID：11053955
> 
> 赞同：0
> 
> 时间：2012-06-15T15:40:17.803
> 
> 标签：android, deserialization

如果我的资源中有一个文件（例如在 res/raw 中），我如何打开它以读入输入流？该文件可能是任何东西：文本文件、类序列化等。

在PC上我会使用：

```
 MyClass x = null;
    FileInputStream fis = null;
    ObjectInputStream ois = null;

    fis = new FileInputStream("/home/me/Desktop/A.dat");
    ois = new ObjectInputStream(fis);

    x = (MyClass)ois.readObject(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:59:54.020

您可以通过以下方式从资源中打开文件：

```
BufferedInputStream bis = new BufferedInputStream(getResources().openRawResource(R.raw.A)); 
```

# oracle - 将选择语句转换为删除

> ID：11053956
> 
> 赞同：0
> 
> 时间：2012-06-15T15:40:18.997
> 
> 标签：oracle

我的数据库中有一种元数据表，我想剔除旧记录。我创建了一个“选择”语句来选择我要删除的行：

```
select m.tablename, m.OWNERNAME
    from MAPINFO.MAPINFO_MAPCATALOG m
    left outer join sys.ALL_TABLES t
    on TRIM(m.tablename) = t.TABLE_NAME and TRIM(m.OWNERNAME) = t.owner
    where t.num_rows is null 
```

这给了我 113 行。

但是，我不知道如何将其转换为“删除”。我打算只使用：

```
delete from MAPINFO.MAPINFO_MAPCATALOG where tablename in (...) 
```

但这会删除 115 行。有两个问题：

1.  我需要比较表名和所有者名。通过仅比较表名，我将删除两个不应删除的表。
2.  该表没有唯一键，我无法创建它们。

鉴于上述情况，我应该如何执行此删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:52:04.867

你可以这样做：

```
delete from MAPINFO.MAPINFO_MAPCATALOG where (tablename, ownername) in (...) 
```

# c++ - __cplusplus 指令在各种编译器中是如何定义的？

> ID：11053960
> 
> 赞同：46
> 
> 时间：2012-06-15T15:40:30.230
> 
> 标签：c++, preprocessor-directive, compiler-version

我的编译器将其扩展为 199711L。这意味着什么？我读到 __cplusplus > 199711L 表示 C++11。这个宏有哪些可能的扩展，它意味着什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-15T15:45:49.507

199711L 代表 Year=1997，Month = 11（即 1997 年 11 月）——委员会批准标准的日期，ISO 的其余部分在 1998 年初批准。

对于 2003 年标准，委员会（显然）决定保持该值不变的变化很少。

对于 2011 年标准，需要将其定义为 201103L，（同样，年 = 2011，月 = 03）再次意味着委员会批准了该标准于 2011 年 3 月完成。

对于 2014 标准，它需要定义为 201402L，解释方式与上述相同（2014 年 2 月）。

对于 2017 标准，要求定义为 201703L（2017 年 3 月）。

对于 2020 年标准，该值已更新为 202002L（2020 年 2 月）。

在原始标准获得批准之前，很多编译器通常将其定义为`0` （或只是一个空定义，如`#define __cplusplus`）以表示“不符合”。当被问及最严格的一致性时，许多人将其定义为`1`.

我差点忘了提，但还有一个关于古代编译器的花絮：一些最早的 cfront 版本（可能还有一些其他的复制它）定义`c_plusplus`而不是`__cplusplus`. 我不记得它被定义为任何有意义的值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-05-18T19:44:06.350

我认为各种版本的预处理器定义应该进入 SD-6：

```
#define __cpp_1997 199711L
#define __cpp_2003 __cpp_1997
#define __cpp_2011 201103L
#define __cpp_2014 201402L
#define __cpp_2017 201703L 
```

展望 2020 年代，我们可能会有另外三个标准。我不怀疑许多实现者将从 1997 年起拥有代码支持标准。

我想要一个助记符定义，所以我不必一直回到这篇文章。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T15:46:59.053

这意味着它与 1997 C++ 标准兼容（实际上称为 C++ '98，因为他们花了太长时间才批准它。.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-23T06:07:37.493

**C++20 的 __cplusplus 值**

根据 Acorn 的回答 __cplusplus 是宏定义为 202002 基于链接[cpp.predefined(1.1)](http://eel.is/c++draft/cpp.predefined#1.1)！这个定义也可以在这个[cppreference](https://en.cppreference.com/w/cpp/feature_test)中找到！搜索 __cplusplus

此后已更新至 202004

要了解其在 Visual Studio 社区 2019 中对 Microsoft Visual C++ 的实际价值，请执行以下操作：

*   创建一个 Visual C++ 项目
*   鼠标右键单击解决方案。
*   在下拉菜单中单击底部的属性
*   弹出对话框打开
*   单击“配置属性”将其展开
    *   单击“C/C++”将其展开。
        *   点击“所有选项”。
            *   您应该在右侧找到“附加选项”
                *   在此粘贴的相邻右列：/std:c++latest /Zc:__cplusplus

单击“应用”按钮，然后单击“确定”按钮

在函数 main() 中运行以下代码以获取 __cplusplus 的值

```
int main()
{
    long cppVer = __cplusplus;
    std::cout << "__cplusplus value for C++20 is: ";
    std::cout << std::to_string( cppVer ) << std::endl;
} 
```

代码应显示以下内容：

```
__cplusplus value for C++20 is: 202004 
```

# python - 使用 Python 进行 Google API 自定义搜索 - 程序化搜索结果

> ID：11053965
> 
> 赞同：0
> 
> 时间：2012-06-15T15:40:44.800
> 
> 标签：python, search, google-api-python-client

我正在尝试使用 Google API 自定义搜索，但我不知道从哪里开始。看来您必须创建一个“自定义搜索引擎”才能解析搜索结果，并且每天限制为 100 个。

我应该为此使用什么模块？我相信我从这里开始：[http ://code.google.com/p/google-api-python-client/](http://code.google.com/p/google-api-python-client/)

我需要一个 API 密钥或什么？基本上我希望能够做这个操作，而谷歌的文档很混乱，或者可能超出了我的水平。

伪代码：

```
from AwesomeGoogleModule import GoogleSearch

search = GoogleSearch("search term")

results = search.SearchResultsNumber

print results 
```

基本上，您从特定搜索词的总结果中获得的数字是多少？我想刮掉它。我不想通过前端谷歌，因为那很容易被屏蔽。我不需要超过 API 允许的 100 次搜索。这仅适用于 30-50 个搜索词，最多可能是 80-100 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T00:59:09.517

使用 google-api-python-client 库的自定义搜索示例代码如下：

[http://code.google.com/p/google-api-python-client/source/browse/#hg%2Fsamples%2Fcustomsearch](http://code.google.com/p/google-api-python-client/source/browse/#hg%2Fsamples%2Fcustomsearch)

您需要通过访问以下网址创建自己的 API 密钥：

[https://code.google.com/apis/console/](https://code.google.com/apis/console/)

在 API 控制台中创建一个项目，确保为该项目打开自定义搜索 API，然后您将在 API 访问选项卡的底部找到 API 密钥。

# sql-server - 在 SQL Server 中合并两个表

> ID：11053966
> 
> 赞同：1
> 
> 时间：2012-06-15T15:40:46.947
> 
> 标签：sql-server

我有相同行数的两个表

例子：

**表一：**

```
1,A
2,B
3,C 
```

**表b：**

```
AA,BB
AAA,BBB,
AAAA,BBBB 
```

我想要在 SQL SErver 中创建一个类似的新表：

```
1,A,AA,BB
2,B,AAA,BBB
3,C,AAAA,BBBB 
```

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:53:41.010

在 SQL Server **2005**（或更高版本）中，您可以使用如下内容：

```
-- test data setup
DECLARE @tablea TABLE (ID INT, Val CHAR(1))
INSERT INTO @tablea VALUES(1, 'A'), (2, 'B'), (3, 'C')

DECLARE @tableb TABLE (Val1 VARCHAR(10), Val2 VARCHAR(10))
INSERT INTO @tableb VALUES('AA', 'BB'),('AAA', 'BBB'), ('AAAA', 'BBBB')

-- define CTE for table A - sort by "ID" (I just assumed this - adapt if needed)
;WITH DataFromTableA AS
(
    SELECT ID, Val, ROW_NUMBER() OVER(ORDER BY ID) AS RN
    FROM @tablea
), 
-- define CTE for table B - sort by "Val1" (I just assumed this - adapt if needed)
DataFromTableB AS 
(
    SELECT Val1, Val2, ROW_NUMBER() OVER(ORDER BY Val1) AS RN
    FROM @tableb
)
-- create an INNER JOIN between the two CTE which just basically selected the data
-- from both tables and added a new column "RN" which gets a consecutive number for each row
SELECT
    a.ID, a.Val, b.Val1, b.Val2
FROM 
    DataFromTableA a
INNER JOIN
    DataFromTableB b ON a.RN = b.RN 
```

这为您提供了请求的输出：

![在此处输入图像描述](../Images/1d02edf3d1b284f70a2272eb1db07a91.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:47:47.620

您的查询很奇怪，但在 Oracle 中您可以这样做：

```
select a.*, tb.*
  from a
     , ( select rownum rn, b.* from b ) tb -- temporary b - added rn column
 where a.c1 = tb.rn -- assuming first column in a is called c1 
```

如果 a 中没有带数字的列，您可以执行两次相同的技巧

```
select ta.*, tb.*
  from ( select rownum rn, a.* from a ) ta
     , ( select rownum rn, b.* from b ) tb
 where ta.rn = tb.rn 
```

**注意：请**注意，这可以生成随机组合，例如

```
1 A AA BB
2 C A B
3 B AAA BBB 
```

因为`order by`ta 和 tb中没有

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:53:21.603

您可以对主键进行排名，然后加入该排名：

```
SELECT RANK() OVER (table1.primaryKey),
  T1.*,
  T2.*
FROM 

SELECT T1.*, T2.*
FROM
(
  SELECT RANK() OVER (table1.primaryKey) [rank], table1.* FROM table1
) AS T1
JOIN
(
  SELECT RANK() OVER (table2.primaryKey) [rank], table2.* FROM table2
) AS T2 ON T1.[rank] = T2.[rank] 
```

# wpf - 将 WPF 路径数据转换为 Winforms

> ID：11053970
> 
> 赞同：0
> 
> 时间：2012-06-15T15:40:54.893
> 
> 标签：wpf, winforms

我有来自 WPF 应用程序的以下路径数据片段：

```
<Path
    Data="F1 M 23.533,16.758 C 23.673,16.305 24.033,15.094 24.611,13.125 C 24.751,12.609 25.111,11.586 25.689,10.055 C 26.267,8.477 26.728,7.211 27.072,6.258 C 26.056,6.930 25.024,7.820 23.978,8.930 C 20.290,12.899 17.688,16.141 16.173,18.656 C 16.751,18.516 17.993,18.164 19.900,17.602 C 20.447,17.446 21.658,17.165 23.533,16.758 Z M 22.876,19.289 C 19.329,19.992 16.361,20.821 13.970,21.773 C 12.532,23.883 10.955,26.414 9.236,29.367 L 7.994,31.547 C 7.774,31.938 7.439,32.500 6.986,33.234 C 6.486,34.093 5.963,34.523 5.416,34.523 C 5.119,34.523 4.869,34.406 4.666,34.172 C 4.463,33.969 4.361,33.742 4.361,33.492 C 4.361,33.055 4.947,31.813 6.119,29.766 C 6.760,28.656 7.728,27.086 9.025,25.055 C 9.525,24.273 9.923,23.633 10.220,23.133 C 9.283,23.399 8.423,23.704 7.642,24.047 C 7.267,24.219 6.955,24.305 6.705,24.305 C 6.392,24.305 6.150,24.164 5.978,23.883 C 5.853,23.711 5.791,23.508 5.791,23.273 C 5.791,22.743 5.978,22.368 6.353,22.148 C 6.962,21.773 8.056,21.344 9.634,20.859 C 10.806,20.484 11.735,20.141 12.423,19.828 C 12.751,19.422 13.610,18.227 15.001,16.242 C 15.595,15.383 17.283,13.352 20.064,10.148 C 22.064,7.805 24.126,5.625 26.251,3.609 C 27.485,2.422 28.431,1.828 29.087,1.828 C 29.494,1.828 29.845,1.992 30.142,2.320 C 30.392,2.617 30.517,2.945 30.517,3.305 C 30.517,3.742 30.298,4.508 29.861,5.602 C 29.111,7.523 28.392,9.578 27.705,11.766 C 27.110,13.703 26.712,15.188 26.509,16.219 C 26.791,16.219 26.978,16.211 27.072,16.195 C 27.525,16.180 27.900,16.172 28.197,16.172 C 29.103,16.172 29.556,16.516 29.556,17.203 C 29.556,17.500 29.458,17.793 29.263,18.082 C 29.067,18.372 28.845,18.547 28.595,18.609 C 28.501,18.641 28.244,18.656 27.822,18.656 C 26.931,18.656 26.267,18.711 25.830,18.820 C 25.455,19.930 24.860,22.766 24.048,27.328 C 23.626,30.360 23.423,32.219 23.439,32.906 C 23.439,34.031 23.103,34.594 22.431,34.594 C 21.900,34.594 21.485,34.320 21.189,33.773 C 20.970,33.398 20.861,32.891 20.861,32.250 C 20.861,30.094 21.244,27.188 22.009,23.531 C 22.399,21.688 22.689,20.273 22.876,19.289 Z"
    Fill="#ff262324"
    Stroke="#ff262324"
    StrokeMiterLimit="1.0"
    StrokeThickness="0.3" /> 
```

我想知道是否有可能以某种方式转换此代码段，以便它显示在 WinForm 应用程序上。或者是否有可以将 WPF 路径数据转换为 GDI+ 的库？或者即使有一个程序可以将此路径数据转换为 PNG 或 JPeg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:53:39.640

可以将您的控件渲染为位图，有大量关于此的教程，

以下示例取自[此处](http://dotbay.blogspot.co.uk/2009/06/rendering-wpf-visuals-to-bitmap.html)。

```
 /// <summary>
    /// Extension Methods for the System.Windows.Media.Visual Class
    /// </summary>
    public static class VisualExtensions
    {
        /// <summary>
        /// Returns the contents of a WPF Visual as a Bitmap in PNG format.
        /// </summary>
        /// <param name="visual">A WPF Visual.</param>
        /// <returns>A GDI+ System.Drawing.Bitmap.</returns>
        public static Bitmap PngBitmap(this Visual visual)
        {
            // Get height and width
            int height = (int)(double)visual.GetValue(FrameworkElement.ActualWidthProperty);
            int width = (int)(double)visual.GetValue(FrameworkElement.ActualHeightProperty);

            // Render
            RenderTargetBitmap rtb =
                new RenderTargetBitmap(
                    height,
                    width,
                    96,
                    96,
                    PixelFormats.Default);
            rtb.Render(visual);

            // Encode
            PngBitmapEncoder encoder = new PngBitmapEncoder();
            encoder.Frames.Add(BitmapFrame.Create(rtb));
            System.IO.MemoryStream stream = new System.IO.MemoryStream();
            encoder.Save(stream);

            // Create Bitmap
            Bitmap bmp = new Bitmap(stream);
            stream.Close();

            return bmp;
        }

        /// <summary>
        /// Returns the contents of a WPF Visual as a BitmapSource, e.g.
        /// for binding to an Image control.
        /// </summary>
        /// <param name="visual">A WPF Visual.</param>
        /// <returns>A set of pixels.</returns>
        public static BitmapSource BitmapSource(this Visual visual)
        {
            Bitmap bmp = visual.PngBitmap();
            IntPtr hBitmap = bmp.GetHbitmap();
            BitmapSizeOptions sizeOptions = BitmapSizeOptions.FromEmptyOptions();
            return Imaging.CreateBitmapSourceFromHBitmap(
                                hBitmap,
                                IntPtr.Zero,
                                Int32Rect.Empty,
                                sizeOptions);
        }
    }
} 
```

# android - 蓝牙 isEnabled() 失败

> ID：11053972
> 
> 赞同：0
> 
> 时间：2012-06-15T15:41:02.973
> 
> 标签：android, bluetooth

我使用此代码启动蓝牙：

```
BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter();
if(btAdapter == null)
   returns; /no bluetooth
if(btAdapter.isEnabled() == false)
{  Toast("Bluetooth off. Starting it...");
   if(btAdapter.enable() == false)
      Toast("Error enabling bluetooth.");
} 
```

应该很简单。只需获取和适配器，如果未启用，则启动它。

问题是当蓝牙实际打开时 isEnabled() 返回 false（它应该返回 true）并且调用 enable() 返回 false，因此它显示“启用蓝牙时出错”。我猜是因为它已经打开了。之后我的蓝牙符号（在状态栏中）消失了。有什么提示吗？

我当然有权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:49:05.197

确保您在清单文件中具有正确的权限

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:24:24.203

未经用户确认，您无法启用蓝牙。你需要这样做，

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

if (mBluetoothAdapter != null) {
    // Device supports Bluetooth

    if (!mBluetoothAdapter.isEnabled()) {
        // Bluetooth isn't enabled, so enable it.
        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
    }
} 
```

将出现一个对话框，请求用户允许启用蓝牙，如下所示。

![在此处输入图像描述](../Images/89e8799fb9e3d60692dc3397285a35cc.png)

如果用户回答“是”，系统将开始启用蓝牙，一旦该过程完成（或失败），焦点将返回到您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-17T11:02:11.420

要检查蓝牙状态，以编程方式打开：

1.  添加以下权限： -

    `android.permission.BLUETOOTH`

2.  使用以下功能启用蓝牙：-

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

private void turnOn() {

   if (!mBluetoothAdapter.isEnabled()) {
        Intent enableBtIntent = new 
        Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivity(enableBtIntent);
    }

} 
```

# objective-c - NSFetchRequest 什么都不返回

> ID：11053974
> 
> 赞同：3
> 
> 时间：2012-06-15T15:41:08.323
> 
> 标签：objective-c, core-data, nsfetchrequest

谁能发现为什么这没有返回任何 ManagedObjects？我正在尝试将以下内容添加到 ATNSManagedObject+EasyFetching 类中，但获取结果不返回任何内容。如果我在 EasyFetch 类之外获取这些，我有 100 多个对象，所以我知道 CoreData 不是空的。

```
+ (void)deleteAllObjectsInContext;
{
    NSManagedObjectContext *context = [NSManagedObjectContext defaultContext];
    NSEntityDescription *entity = [self entityDescriptionInContext:context];
    NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];
    [request setEntity:entity];
    //[request setIncludesPropertyValues:NO];

    NSError *error = nil;
    NSArray *results = [context executeFetchRequest:request error:&error];
    if (error != nil)
    {
        //handle errors
        NSLog(@"delete error");
    }

    for (NSManagedObject *thing in results) {  <--- |results shows 0 objects|
        [context deleteObject:thing];
    }

    NSError *saveError = nil;
    [context save:&saveError];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:59:39.900

尝试将其简化为：

```
// first get the context or pass it in as an argument (this is usually what I do for
// a deleteAll class level method like this but your call

+ (void)deleteAllObjectsInContext:(NSManagedObjectContext*)context {

    NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@ "<yourEntity>"];
    // no predicate
    // no sortDescriptors

    NSError* error = nil;
    NSArray* results = [context executeFetchRequest:request error:&error];

    if (!results || error) { // nil is an error
        // handle error
    }

    // do something with results

} 
```

这样您就可以避免必须检索 NSEntityDescription 对象。

更新：

只是想添加这段[话](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html)：

返回值

“满足从接收器和与接收器的持久存储协调器关联的持久存储中获取的请求指定的条件的对象数组。如果发生错误，则返回 nil。如果没有对象符合请求指定的条件，则返回空大批”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:12:09.370

一种可能性是您`NSManagedObjectContext *context`实际上是`nil`. 在 Objective-C 中，向 nil 发送消息是完全可以接受的，并且可能很难检测出问题出在哪里。

我没有找到 的文档`[NSManagedObjectContext defaultContext]`，所以我假设这是您编写（或正在使用）的类别；而且我怀疑它并不*总是*返回有效的上下文。添加一些日志并查看！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:10:16.097

试试这个方法并观察日志。它只是从当前实体中获取所有内容。

```
+ (NSArray*) retrieveEntity:(NSString*) entityName {

// !!!Here you put your context
NSManagedObjectContext *context = appDelegate.managedObjectContext;

if (context == nil) {
    NSLog(@"Error: No context");
    return nil;
}

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:entityName inManagedObjectContext:context];
[fetchRequest setEntity:entity];

NSError *error = nil;
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];

if (fetchedObjects == nil) {
    // Handle the error
    NSLog(@"Error: No fetched objects.");
    return nil;
}
else 
    NSLog(@"Retrieved objects count:%d", [fetchedObjects count]);

return fetchedObjects;
} 
```

这是一个例子，如何调用它。

```
 // Retrieve all products
NSArray *flXProducts = [DbConnection retrieveEntity:@"FLXProduct"]; 
```

如果它返回 0，则说明您的数据库有问题。您可以通过查找数据库的 sql 文件并在终端中对其执行简单的 SQL 来揭示问题。

# javascript - 如何检查敲除是否完成数据绑定

> ID：11053976
> 
> 赞同：0
> 
> 时间：2012-06-15T15:41:12.910
> 
> 标签：javascript, binding, knockout.js, kendo-ui

我目前正在尝试将 KendoUI 的 panelBar 功能实现到工作中的应用程序中。我已经意识到 kendoUI 和 KnockOut 不能很好地交互。目前的主要问题是 panelBar 的实现不能很好地工作，因为有一个动态的剔除属性会破坏它。这是我发现干扰的ko：

数据绑定=“foreach：过滤器

这个小代码位于包装其他代码的 div 中。但主要问题是 foreach 正在干扰 KendoUI。我想解决这个问题的方法是通过某种方式检查敲除是否完成了所有绑定，然后调用代码来实现 kendoUI。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:33:59.617

您是否使用 Knockout 绑定处理程序来处理 Kendo UI？如果没有，请查看这些绑定处理程序。简而言之，它们有助于制定两个库之间的接口。[http://rniemeyer.github.com/knockout-kendo/](http://rniemeyer.github.com/knockout-kendo/)

# windows - 如何从 node.js 写入 Windows 下的 NUL 设备？

> ID：11053977
> 
> 赞同：12
> 
> 时间：2012-06-15T15:41:18.433
> 
> 标签：windows, node.js, null, device, nul

这让我困扰了好几天。我知道标准流重定向到 NUL 设备，但事实并非如此。node.js 在其 fs native/libuv 绑定下使用 CreateFileW。

不幸的是使用类似的东西：

```
require('fs').writeFileSync('NUL', 'foo') 
```

在具有 3 个字节的 cwd 中创建一个 NUL 文件。

我尝试写入 \Device\Null，但由于我几乎是一个 *nix 头，其中一切都是文件，我实际上未能找到 \Device\Null 的工作路径。例如抛出 ENOENT 的 \\.\Device\Null。

关于如何在 Windows 下进行这项工作的任何想法？

[这](https://stackoverflow.com/questions/438092/how-to-open-a-nul-file)似乎是相关的，但我无法跟踪从 lib/fs.js 到 uv/src/win/fs.c 的整个流程，以检查路径参数是否受到某种相对于绝对路径解析的影响。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-04-20T13:54:51.903

设备的有效路径`NUL`是`"\\\\.\\NUL"`，不是`NUL`，所以用法是：`fs.writeFileSync("\\\\.\\NUL", "foo")`。这个问题是针对 GitHub 上的 Node.js 提出的：[https ://github.com/nodejs/node-v0.x-archive/issues/9271](https://github.com/nodejs/node-v0.x-archive/issues/9271)

由于`NUL`是设备，而不是文件，因此必须通过设备名称空间访问它 - 这需要放在`\\.\`开头（其他斜杠用于转义） - 请参阅[https://msdn.microsoft.com/en-gb/library/ windows/desktop/aa365247.aspx#Win32_Device_Namespaces](https://msdn.microsoft.com/en-gb/library/windows/desktop/aa365247.aspx#Win32_Device_Namespaces)。

There is also a simple `dev-null` library on NPM that can be used with streams: [https://www.npmjs.com/package/dev-null](https://www.npmjs.com/package/dev-null) (not with `.writeFile` though).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T21:51:55.233

有一个很长的解决方法，比如自己编写代码。但是您可以从这里[https://github.com/hanshuebner/node-hid/blob/master/src/HID.cc](https://github.com/hanshuebner/node-hid/blob/master/src/HID.cc)获取一个想法，并在 C 库上编写一个包装器。

# java - 如何在linux中直接执行jar？

> ID：11053978
> 
> 赞同：2
> 
> 时间：2012-06-15T15:41:18.857
> 
> 标签：java, linux, bash, jar, executable-jar

我只想能够做到`./whatever.jar`而不是`java -jar whatever.jar`.

我找到了一种方法：

```
#!/bin/bash
java -jar $0 $*
exit
# jar goes here... 
```

但它不起作用。Java 只是抱怨它是一个无效/损坏的 jarfile。

我也试过管道：

```
#!/bin/bash
tail -n +4 $0 | java -jar
exit
# jar goes here... 
```

但这不起作用。

一种方法是以某种方式将文件拆分为两个单独的部分（脚本部分和 jar 部分），然后执行 jar，但这将是多余的。您不妨制作一个执行 jar 并执行该脚本的脚本。

所以我需要弄清楚如何以某种方式`tail`伪造文件。

我以为我可以使用`/dev/stdout`：

```
#!/bin/bash
java -jar /dev/stdout
tail -n +5 $0
exit
# jar goes here... 
```

那也行不通。它只是打印 jar 的内容，java 抱怨它是无效的。（我后来发现没有什么可读的`/dev/stdout`）

所以我需要从`stdout`其他方式阅读。我真的希望我能管它。它会让事情变得容易得多:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:55:01.813

您需要一个名为`jexec`某些 linux 发行版的服务，该服务附带此已安装的检查`/etc/init.d/jexec`. 我的 CentOS 5.5 肯定可以。

它所做的是将 jexec 解释器注册到 binfmt 系统。

有关更多信息，您可能需要快速阅读[binfmt_misc](http://en.wikipedia.org/wiki/Binfmt_misc)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:55:48.653

假设您已安装内核源代码，请查看 /usr/src/linux/Documentation/java.txt 以了解使用内核的 BINFMT_MISC 支持直接运行 Java 代码的方法（假设它已编译到您正在运行的内核版本中，但我认为这是在大多数主要发行版上）。如果您没有安装源代码，您应该可以很容易地在网上找到它（这里是[一个](http://code.metager.de/source/xref/linux/stable/Documentation/java.txt)示例）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T16:35:21.847

仅供参考，如果你想按照你原来的方式来做，它会是这样的：

```
$ cat jar.sh
#!/usr/bin/env bash
java -jar <(tail -n +4 "$0")
exit

$ cat jar.sh runme.jar > works.jar

$ chmod a+x works.jar

$ ./works.jar 
```

假设最近`bash`支持`<()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T20:35:16.303

java -jar 不适用于标准输入，显然它会进行一些搜索而不是直接读取。在无法修改的系统上，您必须使用 tmp。例如。

```
#!/bin/bash
JF=/tmp/junk$$.jar
(uudecode -o /dev/stdout >$JF;java -jar $JF;unlink $JF) <<JAR
begin-base64 644 junk.jar
UEsDBBQACAAIAEaBz0AAAAAAAAAAAAAAAAAJAAQATUVUQS1JTkYv/soAAAMA
UEsHCAAAAAACAAAAAAAAAFBLAwQUAAgACABGgc9AAAAAAAAAAAAAAAAAFAAA
AE1FVEEtSU5GL01BTklGRVNULk1G803My0xLLS7RDUstKs7Mz7NSMNQz4OVy
LkpNLElN0XWqBAmY6RnEG5koaASX5in4ZiYX5RdXFpek5hYreOYl62nycvkm
ZubpOuckFhdbKWSV5mXzcvFyAQBQSwcIBHn3CVkAAABZAAAAUEsDBBQACAAI
AEd+z0AAAAAAAAAAAAAAAAAKAAAAanVuay5jbGFzc21QTUvDQBB926RJE6Ot
ramfhXoQogcDXiteBPFQVIjowdOmXcrGZCMxEfxZelDw4A/wR4mzUShCF3Zn
9s2bt2/26/vjE8ARBi4stB10sNpC10UPazZ8G30G61gqWZ4wGMH+DYN5mk8F
Q3sslbioslgU1zxOCTEzLhVDP7gbJ/yJhylXszAqC6lmI93oRnlVTMSZ1GQn
qdT9oeZ5sNGyse5hA5sM3rlI03x4mxfpdNfGlodt7JC45jN05sqXcSIm5T8o
en4sRUZG84oK/q8NmYdX5KEkJ4JnI4beApjBftC3lAbwg0X+MUSTvkivBm3y
DJqCsgFFRrF58A72QglNSqdVg5qyBO+PuketGnVe0egabzDndLdWNUjVJGS5
fmXlB1BLBwjDUWL/IAEAAJ4BAABQSwECFAAUAAgACABGgc9AAAAAAAIAAAAA
AAAACQAEAAAAAAAAAAAAAAAAAAAATUVUQS1JTkYv/soAAFBLAQIUABQACAAI
AEaBz0AEefcJWQAAAFkAAAAUAAAAAAAAAAAAAAAAAD0AAABNRVRBLUlORi9N
QU5JRkVTVC5NRlBLAQIUABQACAAIAEd+z0DDUWL/IAEAAJ4BAAAKAAAAAAAA
AAAAAAAAANgAAABqdW5rLmNsYXNzUEsFBgAAAAADAAMAtQAAADACAAAAAA==
====
JAR 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T15:44:28.477

编写一个单独的shell脚本：

随便什么.sh

```
#!/bin/bash
java -jar whatever.jar $* 
```

您不能使 JAR 文件直接可执行，因为它不是可执行文件。它是 Java 字节码，机器无法直接读取，也无法由我知道的任何标准 shell 解释器读取。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T20:53:31.130

或者我可以只安装`jarwrapper`（Ubuntu）包。

# c++ - 从 const_cast 取消引用指针总是会调用未定义的行为吗？

> ID：11053982
> 
> 赞同：3
> 
> 时间：2012-06-15T15:41:29.217
> 
> 标签：c++

请参阅以下内容：

```
struct A
{
    std::string* get() const
    {
        //return const_cast<std::string*>(&m_pObj);
        return &const_cast<A*>(this)->m_pObj;
    }

    std::string m_pObj;
}; 
```

`const_cast`是取消引用`this`UB吗？是否有任何时间取消引用`const_cast`指针的常量的结果*不会*调用 UB？

（我知道上面的例子是不好的做法，不好的设计，可以用 mutable 解决 - 这不是重点）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T15:45:48.370

> 是否取消引用此 UB 的 const_cast？是否有任何时间取消引用 const_casting 指针的 constness 的结果不会调用 UB？

并非总是如此，只有当对象**是**const （`A`实例是`const A x;`）**并且**取消引用用于*修改*数据时。如果它仅用于*读取*它不会是未定义的行为，如果对象不是 const，（可能根本不是，可能是对非 const 对象的 const 引用）它也不会是 UB。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T15:44:43.067

`const`不，如果引用的对象已被声明为原始**并且**您随后修改了转换获得的数据（§5.2.11/7 和 §7.1.6.1/4），则它只是 UB 。以下是合法的：

```
A a;
a.get()->clear(); 
```

虽然这不是（因此是UB）：

```
A const a;
a.get()->clear(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:46:29.883

不。也就是说：

> **5.2.2 函数调用**
> 
> 5 [注意：函数可以更改其非常量参数的值，但这些更改不会影响参数的值，除非参数是引用类型（8.3.2）；如果引用是 const 限定类型，则需要使用 const_cast 来丢弃 const 性以修改参数的值。如果参数是 const 引用类型，则在需要时引入临时对象（7.1.6、2.14、2.14.5、8.3.4、12.2）。此外，可以通过指针参数修改非常量对象的值。——尾注]

然而，

> **5.2.11 常量转换**
> 
> 12 [注意：某些仅涉及更改 cv 限定的转换不能使用 const_cast 完成。例如，函数指针之间的转换不包括在内，因为这种转换会导致使用导致未定义行为的值。出于同样的原因，指向成员函数的指针之间的转换，特别是从指向 const 成员函数的指针到指向非 const 成员函数的指针的转换，不包括在内。——尾注]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:57:23.567

编译器可以自由地将 const 值存储在只读内存中，可以自由地假设在优化程序时它永远不会改变。如果你抛弃了 constness，你就违反了与编译器的约定，所以从技术上讲，*任何事情都*可能发生。

实际上，编译器很少会做一些会被 const_cast-ing 破坏的事情，但理论上这是可能的。

# c# - 从 C# 中的缓冲区中检索多个对象

> ID：11053983
> 
> 赞同：2
> 
> 时间：2012-06-15T15:41:28.887
> 
> 标签：c#, sockets, serialization, asynchronous, buffer

首先，让我解释一下我的情况：我正在使用 C# 开发客户端和服务器，它们使用套接字进行通信。

出于实际原因，我使用两个套接字的异步部分将二进制序列化对象从客户端传输到服务器，反之亦然。

我的问题是，当我一次发送太多对象时，接收对象“堆栈”到缓冲区中，当我尝试反序列化缓冲区内容时，它只给我一个对象。

我的问题是：如何将每个对象与缓冲区分开？

这是我的`ReceiveCallback`功能：

```
private void ReceiveMessageCallback(IAsyncResult asyncResult)
    {
        Socket socket = (Socket)asyncResult.AsyncState;
        try
        {
            int read = socket.EndReceive(asyncResult);
            if (read > 0)
            {
                Log("Reception of " + read + " Bytes");

                // Jumper is an object that I use to transport every message
                Jumper pod = Common.Serializer.DeSerialize<Jumper>(this.readbuf);

                Buffer.SetByte(this.readbuf, 0, 0);
                socket.BeginReceive(this.readbuf, 0, this.readbuf.Length, SocketFlags.None, new AsyncCallback(ReceiveMessageCallback), socket);

                //We fire an event to externalise the analyse process
                Receiver(pod, socket);
            }
        }
        catch (SocketException ex)
        {
            if (ex.SocketErrorCode == System.Net.Sockets.SocketError.ConnectionReset)
            {
                socket.Close();
                Log("Distant socket closed");
            }
            else
                Log(ex.Message);
        }
        catch (Exception ex)
        {
            Log(ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:46:51.087

反序列化将消耗一个对象的缓冲区，并将在下一个对象的开头留下缓冲区的“读取指针”。

我的建议是：

*   将数据从套接字流移动到其他（内存）缓冲区并从那里反序列化，并手动控制整个“缓冲”

或者

*   当你收到回调时，连续调用几次反序列化，直到你得到一个异常。

第二种方法很可能会失败，因为没有人能保证你总是会一次获得整个对象，因为附加到套接字的流是一个字节序列，它可以在任何时候被破坏。

希望这有点道理。

编辑：

事实上，正确的做法是将每个“消息”（发送时的序列化对象）封装到一个数据包中，例如，您将有一个小标题告诉您数据包的长度，并且在接收时，您将读取套接字流，直到您有完整的数据包数据，然后序列化。然后是下一个数据包，以此类推。

更：

假设您在发送方以 1000 字节的速率将数据发送到套接字中。在接收端，您可能永远不会从套接字中获得 1000 x 1000 字节，事实上，您只能在两种情况下预期：

*   每次发送之间的延迟非常大，并且在发送之间读取发生在接收方
*   纯属意外

# ruby-on-rails - Ruby on Rails：Cucumber：我如何点击链接

> ID：11053984
> 
> 赞同：0
> 
> 时间：2012-06-15T15:41:36.050
> 
> 标签：ruby-on-rails, cucumber

我的页面上有一个链接，如果这是您第一次按下该链接，它将带您到新的操作，所有其他时间都将采取更新，但两个链接具有相同的文本。

```
When /^I follow "(.*?)"$/ do |arg1|
  ???
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:49:41.277

好的链接文本相同：

```
When /^I follow "(.*?)"$/ do |arg1|
      click_link "Follow"
end

Then /^he should see hello message$/ do
  page.should have_selector('div.hello')
end 
```

# drupal - 将字段类型从 Int 更改为 Float

> ID：11053990
> 
> 赞同：1
> 
> 时间：2012-06-15T15:42:03.850
> 
> 标签：drupal, drupal-6

我正在帮助一位同事解决 Drupal (6) 问题，但我以前从未使用过 Drupal。客户端希望将十进制值存储在最初定义为整数的字段中。我不敢相信在不丢失内容或不进行大量 SQL 复制的情况下这是不可能的，但我找不到任何说“当然，您可以很容易地更新字段类型，只需... ”。

这可能吗？至今：

*   我们更改了`content_type_thing`表格，使该`_value`字段现在是`float`数据类型，而不是`int`.
*   我们已经更新了`content_node_field`表格，所以该`type`字段的值是`number_float`

现在我们可以将值从 1840 更改为 1840.25 而不会出现验证错误，但`.25`永远不会保存。它被切断，我们进入`18.00`数据库。

有任何想法吗？

谢谢。

**更新**

在有人问之前，我已经阅读[了这篇文章](http://drupal.org/node/769784)，但看起来该建议涉及大量数据迁移。我简直不敢相信没有办法就地更改数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T19:09:25.287

实际上有一个解决方案，但这并不容易，如果您不确切知道自己在做什么，它可能会产生副作用 [https://drupal.stackexchange.com/questions/79378/changeing-a-field-type-from -整数到十进制](https://drupal.stackexchange.com/questions/79378/changing-a-field-type-from-integer-to-decimal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:06:22.230

这很简单，我的朋友。下载此模块 [http://drupal.org/project/formatted_number](http://drupal.org/project/formatted_number)

安装时，转到内容类型并将该字段更改为使用浮动。

# jquery - 带有溢出的 jQuery UI 按钮

> ID：11053994
> 
> 赞同：0
> 
> 时间：2012-06-15T15:42:12.243
> 
> 标签：jquery, css, jquery-ui

我有两个嵌套容器，每个容器都指定了高度和溢出。这通常按预期工作，除非我的内部容器包含 jQuery UI 按钮。在这种情况下，它“看起来”是正确的，但是外部容器仍然滚动，就好像内容是可见的，即使它被内部容器隐藏了。

有关该问题的演示，请参见此 jsFiddle：http:
[//jsfiddle.net/bnT2r/1/](http://jsfiddle.net/bnT2r/1/)

有没有人以前见过这个，或者可以想出一个解决这个问题的方法？

**更新：**
这似乎只是 Chrome 中的一个问题。在 FF 和 IE8 中测试，结果符合预期。

TIA，
-J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:53:58.747

将复选框的高度设置为 0px 似乎可以解决问题。看起来有点奇怪，但由于它被 jQuery UI 隐藏，现在这是可以接受的。

```
input[type=checkbox].ui-helper-hidden-accessible {
   height: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:47:32.147

尝试将 #outer div 的溢出和位置属性更改为：

```
position:relative;
overflow:hidden; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/bnT2r/2/)**。

# c# - 对于 WinRT Metro 应用程序，Parallel.ForEach 等效于什么

> ID：11053997
> 
> 赞同：2
> 
> 时间：2012-06-15T15:42:20.510
> 
> 标签：c#, multithreading, windows-runtime

这是 MSDN 页面中关于 Parallel.For 的示例代码。我想在 WinRT C# 中做同样的事情：

```
#region Sequential_Loop
static void MultiplyMatricesSequential(double[,] matA, double[,] matB, double[,] result)
{
    int matACols = matA.GetLength(1);
    int matBCols = matB.GetLength(1);
    int matARows = matA.GetLength(0);

    for (int i = 0; i < matARows; i++)
    {
        for (int j = 0; j < matBCols; j++)
        {
            for (int k = 0; k < matACols; k++)
            {
                result[i, j] += matA[i, k] * matB[k, j];
            }
        }
    }
}
#endregion

#region Parallel_Loop

static void MultiplyMatricesParallel(double[,] matA, double[,] matB, double[,] result)
{
    int matACols = matA.GetLength(1);
    int matBCols = matB.GetLength(1);
    int matARows = matA.GetLength(0);

    // A basic matrix multiplication.
    // Parallelize the outer loop to partition the source array by rows.
    Parallel.For(0, matARows, i =>
    {
        for (int j = 0; j < matBCols; j++)
        {
            // Use a temporary to improve parallel performance.
            double temp = 0;
            for (int k = 0; k < matACols; k++)
            {
                temp += matA[i, k] * matB[k, j];
            }
            result[i, j] = temp;
        }
    }); // Parallel.For
}

#endregion 
```

WinRT Metro 的等效 int C# 是什么？

我应该创建一个任务数组并等待数组完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:55:42.810

Metro apps aren't supposed to do heavy CPU-intensive operations. I'm not sure what the app store requirements are, but I wouldn't be surprised if your app is rejected if it maxes out the CPU for a significant amount of time.

That said, Metro does have support for parallel asynchronous operations, and you can use this to do some basic parallel processing (if you must):

```
static async Task MultiplyMatricesAsync(double[,] matA, double[,] matB, double[,] result)
{
  int matACols = matA.GetLength(1);
  int matBCols = matB.GetLength(1);
  int matARows = matA.GetLength(0);

  var tasks = Enumerable.Range(0, matARows).Select(i =>
      Task.Run(() =>
      {
        for (int j = 0; j < matBCols; j++)
        {
          // Use a temporary to improve parallel performance.
          double temp = 0;
          for (int k = 0; k < matACols; k++)
          {
            temp += matA[i, k] * matB[k, j];
          }
          result[i, j] = temp;
        }
      }));
  await Task.WhenAll(tasks);
} 
```