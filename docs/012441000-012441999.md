# StackOverflow 问答 12441000-12441999

# javascript - Javascript - 从 contenteditable DIV 中选择文本范围

> ID：12441410
> 
> 赞同：1
> 
> 时间：2012-09-15T20:24:04.397
> 
> 标签：javascript, select, html, text, range

我有这个 DIV，我想选择一些文本，然后在按下某个按钮时，对其应用粗体样式。

```
<div id="editor" contenteditable="true"></div>
<input type="button" id="bold" value="B" /> 
```

我的 JavaScript 像这样“工作”

```
function CaretPosition(dom) {
    var caretPos = 0, containerEl = null, sel, range;
    if (window.getSelection) {
        sel = window.getSelection();
        if (sel.rangeCount) {
            range = sel.getRangeAt(0);
            if (range.commonAncestorContainer.parentNode == dom) {
                caretPos = range.endOffset;
            }
        }
    } else if (document.selection && document.selection.createRange) {
        range = document.selection.createRange();
        if (range.parentElement() == dom) {
            var tempEl = document.createElement("span");
            dom.insertBefore(tempEl, dom.firstChild);
            var tempRange = range.duplicate();
            tempRange.moveToElementText(tempEl);
            tempRange.setEndPoint("EndToEnd", range);
            caretPos = tempRange.text.length;
        }
    }
    return caretPos;
}

function SelectText(dom, start, end) {
    var sel, range;
    if (window.getSelection && document.createRange) {
        range = document.createRange();
        range.setStart(dom.firstChild, start);
        range.setEnd(dom.lastChild, end);
        sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
    } else if (document.body.createTextRange) {
        range = document.body.createTextRange();
        range.moveToElementText(dom);
        range.select();
    }
}

var cp = 0;
var sp;

document.getElementById('editor').onkeyup = function() {
    cp = CaretPosition(document.getElementById('editor'));
    sp = window.getSelection().getRangeAt(0);
}

document.getElementById('editor').onmouseup = function() {
    cp = CaretPosition(document.getElementById('editor'));
    sp = window.getSelection().getRangeAt(0);
}

document.getElementById('bold').onclick = function() {
    document.getElementById('editor').focus();
    SelectText(document.getElementById('editor'), cp, sp);
    document.execCommand('bold', false, null);
} 
```

好吧，这段代码不起作用，我试图了解可能出了什么问题。我希望它是跨浏览器的。我认为问题在于`setStart`和`setEnd`论点。谁能给我一些线索？

**预期结果** 当我选择部分文本并单击粗体按钮时，所选文本应变为粗体。

**实际结果** 看起来该`SelectText()`函数没有正确选择文本，因此在`execCommand`调用时，它不会更改所选文本。它改变了文本的其他部分。就像我没有发送正确的开始和结束值，或者`dom.firstChild`/可能有问题`dom.lastChild`。如果我在我的`SelectText()`函数中执行此操作（更改从 2 开始并以 6 结束）：

```
function SelectText(dom, start, end) {
    var sel, range;
    if (window.getSelection && document.createRange) {
        range = document.createRange();
        range.setStart(dom.firstChild, 2);
        range.setEnd(dom.lastChild, 6);
        sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
    } else if (document.body.createTextRange) {
        range = document.body.createTextRange();
        range.moveToElementText(dom);
        range.select();
    }
} 
```

然后，当我单击 DIV 内的文本时，从 char 2 到 6 被选中并更改。当我再次单击时，从 2 到 8 的字符被选中并更改，依此类推。

**更新** 我的最后一个代码可以在[http://jsfiddle.net/wjjvH/15/进行测试](http://jsfiddle.net/wjjvH/15/)

我设法让它在 IE 上工作，但不能在其他浏览器上工作。另外，我不知道如何找出选择的开始和结束，因此我可以将它们发送到 SelectText 函数。

# c++ - 类比 std::shared_ptr 中的“从/到 void”

> ID：12441411
> 
> 赞同：1
> 
> 时间：2012-09-15T20:26:48.210
> 
> 标签：c++, pointers, casting, shared-ptr

我正在使用`std::shared_ptr<T>`很多不同的类型。由于我想将所有这些不同`shared_ptr`的 s 存储在一个向量中，因此我认为必要时可以使用`std::vector<std::shared_ptr<void> >`and 来回转换。`void`

我熟悉以下“裸指针”用法

```
#include <iostream>

void print(void* void_ptr)
{
    int* int_ptr = static_cast<int*>(void_ptr);
    std::cerr << *int_ptr << std::endl;
}

int main()
{
    int* int_ptr = new int(4);
    void* void_ptr = static_cast<void*>(int_ptr);
    print(void_ptr);
    delete int_ptr;
} 
```

如果您有裸指针，这可以完美地工作`g++`并且afaik这是执行此操作的正确方法。但现在我想和`std::shared_ptr`s 一样。

```
#include <iostream>
#include <memory>

void print(std::shared_ptr<void> void_ptr)
{
    std::shared_ptr<int> int_ptr = ??(void_ptr); // simple cast won't work
    std::cerr << *int_ptr << std::endl;
}

int main()
{
    std::shared_ptr<int> int_ptr = std::make_shared<int>(4);
    std::shared_ptr<void> void_ptr = ??(int_ptr); // same problem here
    print(void_ptr);
} 
```

这甚至可能吗？我有很多不同的类型`shared_ptr`，但这些类型几乎没有共同点。他们不共享基类或类似的东西（如果这是唯一的方法，我会这样做，但使用某种`shared_ptr<void>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:23:49.983

`std::static_pointer_cast`执行此功能。然而，这通常是一个非常糟糕的主意——为什么不`boost::any`或者`boost::variant`什么？这种弱类型和弱强制执行的代码只会让你一头雾水。

# algorithm - O（log n）算法用于查找数组的最大值？

> ID：12441414
> 
> 赞同：17
> 
> 时间：2012-09-15T20:28:20.607
> 
> 标签：algorithm, big-o

是否存在在 O(log n) 时间内找到未排序数组的最大值的算法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-15T20:33:06.197

这个问题被问了很多（这是一个流行的 CS 作业问题还是什么？），答案总是一样的：**不**。

从数学上考虑。除非对数组进行排序，否则没有什么可以“切成两半”来给你`log(n)`行为。

阅读问题评论以进行更深入的讨论（无论如何这可能超出了问题的范围）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-15T20:38:13.970

考虑一下：如果不访问*每个*元素，你怎么知道你没有访问过的某个元素不大于你迄今为止找到的最大元素？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-16T12:25:22.243

在 中无法做到这一点`O(log(N))`。这是`O(N)`最好/最坏/平均的情况，因为需要访问数组中的每个项目以确定它是否是最大的。数组未排序，这意味着您不能偷工减料。

即使在并行化的情况下，这也不能在 中完成`O(N)`，因为*Big-O*表示法不关心一个 CPU 有多少或每个 CPU 的频率是多少。它是专门从这个抽象出来的，以给出问题的粗略估计。

可以忽略并行化，因为可以认为划分作业所花费的时间等于顺序执行的时间。这是由于忽略了常数的原因。以下都是一样的：

```
O(N) = O(Const * N) = O(N / Const) = O(N + Const) = O(N - Const) 
```

另一方面，在实践中，分治并行算法可以为您带来一些性能优势，因此它可能会运行得更快一些。幸运的是，*Big-O*不处理这种细粒度的算法复杂性分析。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-15T20:31:09.613

不。您必须至少遍历数组一次。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-15T20:32:13.857

不，它是 O(n)。在最坏的情况下，必须访问和比较数组的所有成员。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-13T12:34:27.577

当然不是 。假设还有一个元素，您还没有将它与任何其他元素进行比较。所以不能保证你没有比较的元素不是最大元素

并假设您的比较图（元素的顶点和比较的边）具有多个组件。在这种情况下，您必须放置一条边（以最好的方式在最多两个组件之间）。我们可以看到，在 n-1 操作必须完成

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-03-31T17:10:46.223

这是很老的，但我不同意给出的答案。**是**的，它可以用并行硬件在对数时间内完成。

时间复杂度为：

```
O(log(n) * log(m)) 
```

`n`是要比较的数字的数量；`m`是每个数字的大小。

但是，硬件大小将是：

```
O(n * m) 
```

该算法将是：

1.  成对比较数字。时间为`O(log(m))`，大小为`O(n * m)`，使用进位超前比较器。

2.  使用 1 中的结果来复用 1 的两个输入。时间为`O(1)`，大小为`O(n * m)`。

3.  现在你有一个初始大小一半的数组；转到步骤 1。此循环重复`log(n)`多次，因此总时间为`O(log(n) * log(m))`，总大小为`O(n * m)`。

如果需要，添加更多 MUX，您还可以跟踪最大数字的索引，而不会增加算法的复杂性。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-08-09T04:02:58.020

如果你使用`N`处理器，它可以及时完成`O(log N)`。但*工作复杂度*仍然存在`O(N)`。

如果使用`N^2`处理器，您可以`O(1)`通过应用*Usain Bolt 算法*来降低时间复杂度。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-03-20T17:10:20.890

我认为使用 Segment tree 可能会有所帮助，您可以实现 log(N) 成本。

# html - 可滚动的固定高度表

> ID：12441418
> 
> 赞同：4
> 
> 时间：2012-09-15T20:30:15.010
> 
> 标签：html, css, css-tables

[http://jsfiddle.net/6zM9T/](http://jsfiddle.net/6zM9T/)

我已将 tbody 设置为以下 css：

```
tbody {
    height:200px;
    overflow:scroll;
    display:block;
} 
```

一切似乎都正常，但行不再使用提供的全宽。我试过添加 width:100%; 但这什么也没做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T01:33:56.053

这是一个限制——就我而言——在 HTML 规范中。问题是，如果你有一个带有 display: 块的 tbody，它不再是 display:table-row-group，这是它能够让里面的行能够作为行工作所需要的。理想情况下，这些将能够在该显示模式下溢出，但这就是我发现限制的地方。最好的选择是有一个内表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T08:52:24.737

将表格放入具有固定高度和溢出的div：自动；

# android - ui-threads messagequeue、looper和handler类之间的行为

> ID：12441425
> 
> 赞同：2
> 
> 时间：2012-09-15T20:31:28.927
> 
> 标签：android, handler, message-queue, looper

我发布这个问题是因为我想知道我对基础知识的想法是否正确。

应该清楚的是 UI-Thread 包含 a `MessageQueue`，它与 a 相关联，`Looper`用于从队列中获取消息/可运行对象以进行处理。

此外，a`Handler`向 发送消息/可运行`Looper`文件，后者将对象集成到`MessageQueue`.

如果我是对的`MessageQueue`，那是堆栈，而`Looper`是传入和传出对象的看守者。

这引出了我的下一个问题。如果一个消息对象被 UI-Thread 处理，它会被回收到全局消息池中。但是没有关于此的明确文档。这个消息池有特定的大小吗？如果我发送/获取消息，它是否可扩展/可收缩？

如果这是真的，则池可能会因获取许多消息而变干。我无法相信这一点。考虑这样一种情况，您必须在特定时间段内获取一些消息而不将它们发回回收。

编辑使其更易于理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:45:57.313

您可以查看框架中的[Handler](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/Handler.java)和[Message](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/Message.java)的源代码，以了解其工作原理的详细信息。

简而言之，池是由方法填充的`Message`对象的链接列表（最多） 。这些方法只是首先检查任何可以重用的可用池，如果没有可用的，则只分配一个新池。`MAX_POOL_SIZE``recycle()``obtain()``Message`

# php - Twitter Search API multiple hash tags or users

> ID：12441430
> 
> 赞同：5
> 
> 时间：2012-09-15T20:33:03.607
> 
> 标签：php, twitter, twitter-search

I am trying to query the Twitter Search API for either a user, several users, a hashtag, several hashtags, or any combo of them. I am struggling with the syntax.

Multiple users (WORKS)

```
?q=from:user1 OR from:user2 OR from user3 
```

Single hashtag (WORKS)

```
?q=with:#hashtag 
```

Combo (BROKEN)

```
?q=from:user1 OR from:user2 OR with:#hash1 OR with:hash2
//returns most recent tweets and ignores my query altogether. No error 
```

I do not want to query a specific hashtag from a specific user. I want either/or results. If I use the following syntax, it works, but it also searches the contents of the tweet, as opposed to just the hashtag, which is not as nice.

Contains search (WORKS)

```
?q=from:user1 OR hashtag1 OR hashtag2 
```

Is there any way to accomplish what I am looking for or no? I have also tried the following

(BROKEN)

```
?q=from:user1 OR from:user2 OR with:hash1 OR hash2 OR hash3 
```

Hope this make sense. I can clarify further if needed. (Note: I am using since_id and max_id in my actual environment, as well as rpp, but for the ease of this question, I left them out of my examples.)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-02T14:32:19.003

This answer was written in 2013\. The API it uses has since been retired. It is kept for historical interest only. For Twitter API authenticated requests are now required now.

* * *

During same research i found to search with multiple hashtags in API V1.1\. you can do like

[http://search.twitter.com/search?q=#hashtag1+OR+#hashtag2](http://search.twitter.com/search?q=#hashtag1+OR+#hashtag2)

[http://search.twitter.com/search?q=#hashtag1+AND+#hashtag2](http://search.twitter.com/search?q=#hashtag1+AND+#hashtag2)

AND/OR will be caps and not forgot to values URL encode. for more detail you can look here [https://dev.twitter.com/docs/using-search](https://dev.twitter.com/docs/using-search)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-21T14:45:56.973

Normally you can use this type for hashtags or 2 simple words.

# haiku #poetry : %23haiku+%23poetry

“happy hour” :) : %22happy%20hour%22%20%3A%29

can verify the information [here](https://developer.twitter.com/en/docs/tweets/search/guides/standard-operators.html).

# java - 从 Ant 关闭 Java 程序？

> ID：12441432
> 
> 赞同：0
> 
> 时间：2012-09-15T20:33:09.600
> 
> 标签：java, ant

我有一个构建可执行 JAR 文件的 Ant 任务，运行一些 JUnit 测试，然后运行可执行 JAR 文件以查看它是否正确构建。但是，问题是我必须在我的计算机旁边才能关闭我的 Java 程序。有没有办法在它运行几秒钟后从 Ant 中关闭它？

```
<target name="buildAndTest" depends="create-submission-jar">
    <!-- Other stuff happening here -->
    <java fork="true" jar="${jar.executable}" failonerror="true" />
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:13:32.980

您的应用程序可能是线程化的并且具有主循环的概念。我认为更简单的方法是让您的应用程序接受一个额外的参数，例如`--timeout=120s`，并使用此参数来[`Timer`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)优雅地结束主循环（我认为您将拥有某种控制变量、PID 文件或任何东西）。然后 Ant 将传递这个额外的参数，因此在一段时间后该过程自行结束。

显然，如果没有设置参数，则`Timer`根本不会创建，您将使用常规方式告诉程序停止。

# php - 如何在 21 主题中构建自定义查询？

> ID：12441434
> 
> 赞同：1
> 
> 时间：2012-09-15T20:33:22.580
> 
> 标签：php, wordpress

如果有人给我一些想法，或者指出我正确的方向，那就太好了。

我需要在 21 主题中构建一个自定义查询，该查询在主页上显示 9 个帖子，在最底部显示 1 个粘性帖子。其他页面将仅显示 10 个常规帖子。

你能告诉我我会怎么做。content.php 是我需要修改的唯一文件吗？

提前感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:32:50.037

您可以使用 query_posts() 函数修改返回的帖子数。[http://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

例如：

```
<?php 
    query_posts('showposts=9');
    if ( have_posts() ) : while ( have_posts() ) : the_post(); 
?>

<a href="<?php echo get_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>

<?php endwhile; ?>

<?php endif; ?>
<?php wp_reset_query(); ?> 
```

# sql - 选择日期在开始日期和结束日期之间的行

> ID：12441448
> 
> 赞同：2
> 
> 时间：2012-09-15T20:36:11.623
> 
> 标签：sql, database, postgresql

我`timestampz`在 postgresql 表中有一个列，我希望检索特定时间范围内的条目

我尝试使用

```
SELECT * FROM table where date BETWEEN '2012-01-01' AND '2012-01-05' 
```

但是上面的查询无法检索到一些在指定日期内的行，所以我尝试了这样的事情

```
SELECT * FROM table WHERE date BETWEEN '2012-01-01 00:00:00' AND '2012-01-05 23:59:59' 
```

这很好用，但是有更好的方法来激活它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T21:28:59.477

You can try:

```
SELECT * 
FROM table 
where date::DATE BETWEEN '2012-01-01'::DATE AND '2012-01-05'::DATE 
```

## [SQL Fiddle](http://sqlfiddle.com/#!1/8561a/6/0)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T00:50:45.430

我认为没有更好但更清洁。

```
select *
from table
where 
    date >= '2012-01-01' 
    and 
    date < '2012-01-05'::date + 1 
```

它将覆盖到 '2012-01-05 23:59:59.999999'

# c# - 如何验证自签名证书

> ID：12441449
> 
> 赞同：4
> 
> 时间：2012-09-15T20:36:19.823
> 
> 标签：c#, certificate, client-server, sslstream

我会清楚地向您提供我的问题，以便您回答我

我有一个使用 SslStream 保护的客户端-服务器（套接字）连接，据我所知，使用 ssl 可以确保我的客户端只会连接到我的服务器

为此，我必须向我的客户端添加一个函数来验证服务器认证并确保服务器是真实的（我的服务器）

但我真的不明白如何验证我的自签名证书并希望得到您的帮助

问候，并提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T02:23:28.480

想象一下，如果证书不是自签名的——它是由受信任的证书颁发机构签名的。它起作用的原因是因为您的客户端设备 - windows、mac、linux、iphone、android 设备已经拥有所有知名证书颁发机构的证书。当您建立连接时，操作系统会为您完成工作。它确保在连接期间发送给客户端的证书由知名的证书颁发机构签名。这样做的唯一原因是客户端已经拥有所有知名证书颁发机构的证书。

如果您选择使用自签名证书 - 或由自签名证书颁发机构签名的证书 - 您必须完成这项工作，而不是操作系统。但是 - 任务基本相同 - 您需要验证在连接期间发送给客户端的证书是否与预期相符。您将需要使用与签名证书相同的策略 - 您的客户端必须预先安装预期的证书（或证书链）。

**您需要以某种方式，以某种方式确保您的客户已经拥有自签名证书。**特别是证书中的所有公共信息。客户端将没有私钥 - 因为那是......私人的。然后，您可以将代码添加到您的应用程序，验证连接期间发送的证书的哈希值是否与预安装的证书的哈希值匹配。

我注意到您之前曾问过类似的问题，您可能已经知道这一切。这里还有一点：

只要您确保自签名证书的私钥绝对安全，任何人都无法伪造您的自签名证书。就是做不到。如果有人尝试，他们将不得不生成一个与您的私钥不匹配的新私钥 - 因为他们不知道您的私钥，因为您保证了它的安全。

然后一切都崩溃了。如果他们有不同的私钥，他们将需要不同的公钥。这意味着它们将具有不同的证书哈希。 **而且您的应用已经知道正确的公钥和散列（如上所述），因此当他们尝试使用错误的公钥和散列进入时，您的应用将拒绝连接**。这是您必须在应用程序中执行的部分。

如果他们尝试使用您的公钥和散列但使用不同的私钥，则 SSL 将不允许他们建立连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:50:35.897

为什么不只使用受信任的廉价证书？

# r - 导入多个 csv 文件并将 NA 替换为 Zeros

> ID：12441452
> 
> 赞同：1
> 
> 时间：2012-09-15T20:37:21.497
> 
> 标签：r

我知道如何单独做到这一点。但是，我有超过 1000 个文件。我决定使用 for 循环。但是，似乎我没有找到评估变量的正确方法。

这是我的代码

```
setwd('C:/data')
filenames=dir() #find file names

for (i in filenames){
  adt = substr(x = i, start = 1, stop = nchar(i)-4)
  name=paste("data_", adt, sep="")
  assign(name, read.csv(i,header=T,sep=",")) #read each file and assign a variable name starting with data_ to it
  func=paste('name[is.na(name)] <- 0',sep="") # here is the place I have problem. R will not consider name is a parameter whose values change in each iteration
  eval((text=func))

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:06:43.013

您可以将结果分配给`read.csv`临时变量，替换`NA`s，然后分配给`name`

```
for (i in filenames){
  adt = substr(x = i, start = 1, stop = nchar(i)-4)
  name=paste("data_", adt, sep="")
  tmp <- read.csv(i, header=TRUE, sep=",")
  tmp[is.na(tmp)] <- 0
  assign(name, tmp, pos=.GlobalEnv)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T21:26:04.640

```
library(plyr)
# change the pattern to match whatever file type you are reading
filenames <- list.files(path = ".", pattern = ".csv", all.files = FALSE, 
full.names = FALSE, recursive = FALSE, ignore.case = FALSE)
data <- llply(filenames, read.csv)
cleaned_data <- llply(data, function(x)  {x[is.na(x)] <- 0; return(x)})
names(cleaned_data) <- paste0("data_", 1:length(cleaned_data)) 
```

# html - 将选择选项文本的一部分在左侧对齐，部分在右侧对齐？

> ID：12441464
> 
> 赞同：5
> 
> 时间：2012-09-15T20:40:10.107
> 
> 标签：html, css, selection

我有一个选择框，我需要让一些选项的文本向左对齐，其余的向右对齐，如下所示：

```
| option 1      0.5 |
| option 2      1.5 | 
```

那可能吗？我考虑过将 div 放在选项中，但在搜索是否允许这样做时，我遇到了几个说不允许的地方。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T11:39:55.157

[`option`元素](http://www.w3.org/TR/html401/interact/forms.html#h-17.6)内容被视为纯文本（不识别标签），因此没有直接的方法。作为一种笨拙的解决方法，您可以使用等宽字体手动格式化选项并使用不间断空格：

```
 <style>
    select, option { font-family: Consolas,  monospace; }
    </style>
    <select>
    <option>option 1          0.5
    <option>option 2          1.5
    <option>one more option 110.5
    </select>
```

（`option`元素内的空格是不间断空格；`&nbsp;`如果您不知道如何在创作环境中键入不间断空格，请使用它们）。

一个完全不同的解决方法或方法是`select`用一组复选框（或，取决于所需的逻辑，单选按钮）和相关标签替换元素。然后，您可以在表格中表示此数据并在其上设置合适的格式：

```
 <table>
    <tr><td><input type=checkbox> <td>option 1 <td align=right>0.5
    <tr><td><input type=checkbox> <td>option 2<td align=right>1.5
    <tr><td><input type=checkbox> <td>one more option <td align=right>110.5
    </table>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T21:00:21.867

这是一个问题，因为您不能像您所说的那样将 div 放在选择标签内。选择标签内的唯一选项是，您可以在此处了解更多信息：[optgroup](http://www.w3schools.com/tags/tag_optgroup.asp)

尽管在您尝试在选项标签本身内部进行编辑时，这对您没有多大帮助。我建议您尝试使用空格与选择框大小协作对其进行排序，以使其适合您的首选对齐方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-07T20:27:29.303

目前，我正在继续使用插入合适空格的解决方法。

```
select option {
     font-family: monospace;
 }
```

```
<select>
  <option>TEXT ONE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.02</option>
  <option>LONG TEXT&nbsp;&nbsp;&nbsp;&nbsp;1.00</option>
  <option>TEXT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100.00</option>
</select>
```

我通常用一些 JavaScript 代码来解决这个问题。

```
max_chars_col_1 = Math.max('TEXT ONE'.length, 'LONG TEXT'.length, ...);

option.innerHTML = 'TEXT ONE' + '&#160'.repeat( max_chars_col_1 - 'TEXT ONE'.length + max_chars_col_2 - '0.02'.length + 1 ; 
```

# date - YYYY-MM-DD HH:MM:SS 日期时间格式的技术名称是什么？

> ID：12441468
> 
> 赞同：12
> 
> 时间：2012-09-15T20:40:51.943
> 
> 标签：date, format, naming

YYYY-MM-DD HH:MM:SS 日期时间格式是否有特殊名称？我正在编写一个以这种格式返回日期的函数，并且我试图找出调用该函数的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-03-27T20:32:49.480

我找不到来源，但根据我的经验（在 UNIX 环境中作为系统程序员工作了 25 年），这种格式在工程师之间被通俗地称为*Yoda Time。*

它不是有效的 ISO 8601，因为它使用空格而不是 a`T`来分隔日期和时间部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T20:47:58.513

它看起来很像[ISO 8601 格式](http://en.wikipedia.org/wiki/ISO_8601)，但您永远无法确定时间格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T20:48:42.770

我认为它是 ISO 8601 格式的变体。这里有关于格式的更多信息：

[http://dataeducation.com/blog/input-date-formats](http://dataeducation.com/blog/input-date-formats)

# delphi - 如何通过 TDatasetProvider 检索所有记录？

> ID：12441470
> 
> 赞同：1
> 
> 时间：2012-09-15T20:41:03.800
> 
> 标签：delphi, tclientdataset

如果我有两个都来自 的数据集`TCustomClientDataset`，我可以在另一个上调用`CloneCursor`一个，并对相同的数据有一个独立的视图。该文档表明，您可以通过使用 a 来实现基本相同的目标`TDatasetProvider`，只是源数据集可以是任何数据集。

我正在努力完成这项工作。我有一个`TSimpleDataset`（我们称之为`A`）从数据库中读取数据，还有一个 TClientDataset（我们称之为`B`）与它的单独视图一起工作，并且有一个`TDBGrid`连接到`B`.

如果我调用`B.CloneCursor(A, ...)`，网格会显示`A`. 但是，如果我创建 a`TDatasetProvider`并将其`Dataset`属性设置为`A`，然后将其设置为 的提供者`B`，则连接到的网格`B`仅显示一行，而不是全部。

我做错了什么，我该如何解决它以便网格最终显示所有`A`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T01:55:31.953

在调试器中进行了很多探索之后，我设法追踪到了这一点。打开数据集会通过提供者拉取数据，但它不会`First`首先调用源数据集。由于程序中其他地方的原因，源数据集位于最后一行，所以在它命中之前我只得到了一行`EOF`。`First`事先明确调用可以解决问题。

# python - 如何使用 gae 的 html 输出运行示例代码片段？

> ID：12441471
> 
> 赞同：0
> 
> 时间：2012-09-15T20:41:08.147
> 
> 标签：python, html, google-app-engine

[以下代码来自这里。](https://developers.google.com/appengine/docs/python/tools/webapp/responseclass)我应该如何看到结果？我可以以某种方式使用 GAE 交互式控制台，还是需要使用 app.yaml 等创建整个应用程序并在 gae 启动器中运行它？我对带有 html 的片段特别感兴趣。

```
import datetime

from google.appengine.ext import webapp

class MyRequestHandler(webapp.RequestHandler):
    def get(self):
        self.response.out.write("<html><body>")
        self.response.out.write("<p>Welcome to the Internet!</p>")
        self.response.out.write("</body></html>")

        expires_date = datetime.datetime.utcnow() + datetime.timedelta(365)
        expires_str = expires_date.strftime("%d %b %Y %H:%M:%S GMT")
        self.response.headers.add_header("Expires", expires_str) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:02:29.213

您应该在开发服务器中运行它。您可以在浏览器中看到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T21:02:33.607

您是否安装了开发应用程序服务器？

# html - 如何让文本在图像结束后保持缩进

> ID：12441472
> 
> 赞同：0
> 
> 时间：2012-09-15T20:41:08.937
> 
> 标签：html, css, image, indentation

我有一个与 WordPress 中的标题左对齐的图像（代码如下）。`<div>`底部的标签是动态显示的（一次只显示一个）。当确实显示时，它会超出图像的底部，因此部分文本位于图像的右侧，部分文本一直包裹到左侧，直接位于图像下方。有没有一种简单的方法可以防止它在图像之后向左换行，而无需硬编码换行符？

这是一个粗略的示例（在下拉列表中选择选项 1 或选项 2）：

```
<div style="margin-top: -50px;">
[caption id="" align="alignleft" width="200"]<a href="LINK">
<img alt="alt" src="LINK" title="title" width="200" height="257"></a>
Click the image to view it full size[/caption]
A bunch of random text.<br>
<br>
<form>
<select id="choices">
    <option value="none">Select an option...</option>
    <option value="option1">Option 1</option>
    <option value="option2">Option 2</option>
    <option value="option3">Option 3</option>
    <option value="option4">Option 4</option>
    <option value="option5">Option 5</option>
    <option value="option6">Option 6</option>
    <option value="option7">Option 7</option>
</select>
</form>
<div id="option1" class="hide">Option 1 TEXT</div>
<div id="option2" class="hide">Option 2 TEXT</div>
<div id="option3" class="hide">Option 3 TEXT</div>
<div id="option4" class="hide">Option 4 TEXT</div>
<div id="option5" class="hide">Option 5 TEXT</div>
<div id="option6" class="hide">Option 6 TEXT</div>
<div id="option7" class="hide">Option 7 TEXT</div> 
```

[JSFIDDLE](http://jsfiddle.net/F7JzJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:37:24.020

由于您已经有了`img`浮动的左侧，并且知道它的宽度，因此最简单的方法是将您想要缩进的所有内容包装在一个 div 中，并将 a 添加`margin-left`到该包装器 div 中。

这是一个更新的提琴手：http: [//jsfiddle.net/F7JzJ/1/](http://jsfiddle.net/F7JzJ/1/)

# jquery - ruby on rails button_to 删除方法不起作用

> ID：12441475
> 
> 赞同：0
> 
> 时间：2012-09-15T20:41:49.920
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3, destroy

**看法：**

```
<%= button_to 'Delete Friend', friendships_path(:friend_id => @user), method: 'delete', :form_class => 'delete_btn', remote: true %> 
```

**控制器：**

```
def destroy
   @return = 'It works!'
   render :json => ActiveSupport::JSON.encode( @return )
end 
```

当我单击按钮时，我得到一个**404 页面未找到**......我怎样才能使**销毁方法**适用于**ajax jquery 请求**？

编辑：

**路线.rb**

```
resources :friendships, :except => [:new, :edit, :update, :index, :show] 
```

跑步`rake:routes`

```
 friendships POST   /friendships(.:format)                          friendships#create
                  friendship DELETE /friendships/:id(.:format)                      friendships#destroy 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T21:08:42.273

代替：

```
friendships_path(:friend_id => @user) 
```

和：

```
friendship_path(:id => @user) 
```

# xaml - 在 Windows 8 上的 XAML 中绑定第二级嵌套数组

> ID：12441476
> 
> 赞同：1
> 
> 时间：2012-09-15T20:42:05.363
> 
> 标签：xaml, data-binding, windows-8, windows-runtime, winrt-xaml

我想将两级嵌套数组绑定到 Windows 8 Metro 风格应用程序中的 XAML 控件。数组看起来像（A、B、C 是顶级数组的元素）

```
一个
--W
- X
乙
--是
C
--Z
```

我想绑定`W`,`X`和`Y`的属性`Z`。实现这一目标的推荐方法是什么？我应该使用[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)（这会导致很多代码）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:23:32.937

If I understand your question correctly, I think you can use LINQ's SelectMany() in a property and report PropertyChanged. Something like this:

```
private string[][] _my2DArray;
public string[][] My2DArray
{
    get { return _my2DArray; }
    set 
    { 
        _my2DArray = value;
        OnPropertyChanged("My2DArray");
        OnPropertyChanged("InternalArrays");
    }
}

public IEnumerable<string> InternalArrays
{
    get { return _my2DArray.SelectMany(a => a); }
} 
```

You may want to consider using an ObservableCollection instead of an array to notify changes within the collection.

# javascript - 'this' 的 addEventListener

> ID：12441478
> 
> 赞同：0
> 
> 时间：2012-09-15T20:42:21.790
> 
> 标签：javascript

例如，我们在 HTML 中有这样的事件：

```
<div onclick="bla(this)" class="gg"> 
```

我们如何通过不在`onclick="bla(this)"`HTML 中编写事物来为所有 gg 元素添加事件侦听器/处理程序？

我试过这样的事情。但当然它不起作用。

```
var ggs = document.getElementsByClassName('gg');
for (var i = 0; i < ggs.length; i++) {
// the 'this' below needs to go somewhere to become working
    ggs[i].addEventListener('click',bla,this); 
} 
```

**编辑**：原始代码工作[http://jsfiddle.net/pVpaV/2/](http://jsfiddle.net/pVpaV/2/)。为了使代码工作，我需要把它放在页面的末尾。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T20:51:56.230

如果您需要保持`bla`原来的使用方式，则需要将其包装并传递适当的参数：

```
var ggs,
    i;
ggs = document.getElementsByClassName('gg');
for (i = 0; i < ggs.length; i++) {
    ggs[i].addEventListener('click', function (e) {
        //in the event handler, `this` refers to the clicked element
        bla(this);
    }, false);
} 
```

如果您只需要`bla`在触发事件的元素的上下文中调用`addEventListener` *，默认情况下已经这样做了*。

```
var ggs,
    i;
function bla(e) {
    //`e` is event data
    //`this` is the element that triggered the event
}
ggs = document.getElementsByClassName('gg');
for (i = 0; i < ggs.length; i++) {
    ggs[i].addEventListener('click', bla, false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T20:47:51.440

所以你想要做的是处理`click`具有类的 div 上的事件`gg`

jQuery 可以很容易地做到这一点

```
$('.gg').click(function() {
// some code you want to execute on click
}); 
```

[您可以在此处](http://api.jquery.com/class-selector/)查看 jQuery 类选择器

`getElementsByClassName`仅使用 javascript （尽管支持[有限](http://caniuse.com/getelementsbyclassname)）：

```
var ggs = document.getElementsByClassName('gg');
for (var i = 0; i < ggs.length; i++)
{
    ggs[i].addEventListener('click', function() { bla(this); }, true);
}
function bla(param)
{
    // some very sinister code that uses this (which is param in this context)
    alert(param);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T20:56:03.387

如果您有一个名为 bla 的函数，您的代码应该可以正常工作

[http://jsfiddle.net/pVpaV/](http://jsfiddle.net/pVpaV/)

需要注意的一点是，某些版本的 IE 使用称为 attachEvent() 的遗留方法。您使用的是哪个浏览器？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T20:51:10.737

```
var ggs = document.getElementsByClassName('gg');
for(var i = 0; i < ggs.length; i++) {
    ggs[i].addEventListener('click', bla);
} 
```

`this`与使用时一样，该元素会自动传递`addEventListener`。请注意，您实际上需要`this`在函数内部使用 - 它不是参数。如果你确实想要一个论点，最简单和最便携的方法是这个：

```
var ggs = document.getElementsByClassName('gg');
for(var i = 0; i < ggs.length; i++) {
    ggs[i].addEventListener('click', function() {
        bla(this);
    });
} 
```

但是，在这种情况下，您无法访问浏览器传递给函数的事件对象，除非您将其作为附加参数传递：

```
 ggs[i].addEventListener('click', function(e) {
        bla(this, e);
    }); 
```

# python - python乌龟循环

> ID：12441480
> 
> 赞同：0
> 
> 时间：2012-09-15T20:43:05.323
> 
> 标签：python, loops, for-loop, turtle-graphics

我正在尝试创建一个循环方块，但无法弄清楚如何让我的代码允许我继续重复创建方块的命令，乘以数字输入，这就是我目前所拥有的。

```
square_count = input("Enter the number of squares to draw: ")
count_int = int(square_ct)

if count_int > 1:

    turtle.begin_fill()
    turtle.forward(100)
    turtle.right(90)
    turtle.forward(100)
    turtle.right(90)
    turtle.forward(100)
    turtle.right(90)
    turtle.forward(100)
    turtle.end_fill()

    turtle.up()
    turtle.forward(20)
    turtle.color(random.random(),random.random(), random.random()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T20:45:13.287

您可以使用`for i in range(count_int):`在给定重复计数的情况下重复运行一段代码`count_int`：

```
if count_int > 1:
    for i in range(count_int):
        turtle.begin_fill()
        turtle.forward(100)
        turtle.right(90)
        turtle.forward(100)
        turtle.right(90)
        turtle.forward(100)
        turtle.right(90)
        turtle.forward(100)
        turtle.end_fill()

        turtle.up()
        turtle.forward(20)
        turtle.color(random.random(),random.random(), random.random()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T09:24:20.643

你可以尝试这样做

```
x=1
while x < 10000000: 
```

当您执行此操作时，您在此之后键入的任何内容都将再次执行，直到已完成 10000000 次。最后虽然你必须把它放进去。

```
x+=1 
```

这是我做的例子。

```
import turtle
bob = turtle.Turtle()
wn = turtle.Screen()
bob.color("white")
bob.speed(1000000000000000000000000)
wn.bgcolor("black")
x=1
while x < 10000000:
bob.forward(90)
bob.left(89)
bob.forward(1+x) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-13T21:00:47.230

再说一次，你可以把它放在一个函数中并告诉它再次运行

```
def example():
    [insert code]
    example() 
```

# php - 从 url 隐藏主页和索引页面名称

> ID：12441481
> 
> 赞同：1
> 
> 时间：2012-09-15T20:43:05.473
> 
> 标签：php, apache, .htaccess, url, url-rewriting

我有一个网站，比如 www.example.com（不是实际名称）。在这个网站上我有

> index.php（登录前网站首页）和 home.php（登录后网站首页）

作为我的 DirectoryIndex index.php（在 .htaccess 中），index.php 不会出现在地址栏中。但是当登录时，它显示 home.php 作为链接的一部分。

我**不想**在 url中**显示“home.php”**。我正在考虑在 .htaccess 中使用一些 url 重写规则，但我被卡住了。

有什么简单的解决方案吗？

如果需要，请让我知道你们是否需要任何其他系统/服务器相关信息。

//编辑我从 facebook.com 得到这个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T20:58:54.567

做这样的事情的一种方法是在你的 php 脚本中使用某种控制器。在脚本的开头检查以查看是否已登录，并根据答案，需要适当的代码。你不需要 .htaccess 来做这样的事情！

您总是可以将 home.php 重命名为听起来更好听的名称，例如`/home`使用简单的重定向。

```
RewriteRule ^home/?$ home.php [NC,L] 
```

这将在浏览到 yoursite.com/home 时显示 home.php 页面。显然，即使未登录也可以访问，但您似乎暗示如果未登录，您不打算显示链接！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:28:32.087

恕我直言，最简单的方法是拥有单个登录页面`index.php`，该页面应包括`public.php`或`private.php`（`home.php`在您的情况下）取决于注销/登录状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T21:10:35.180

正如您所提到的，使用网络服务器重定向只是一种解决方法。

您的问题是 PHP 脚本本身。它当然不知道您的 URI 设置和*DirectoryIndex*文件，因此使用 home.php 作为 URL 目标。

所以你有两个选择：

*   使网络服务器重定向`/home.php`到`/`
*   调整您的 PHP 脚本以指向`home.php`
*   调整您的 PHP 脚本以检查何时`home.php`加载，如果 URI 为`/home.php`，然后重定向到`/`

很难说最好的选择是什么。但是您的 URI 设置（目录索引）比您的 php 文件名更有可能发生变化。因此我会选择网络服务器配置——一个[303 重定向](https://en.wikipedia.org/wiki/HTTP_303)到`/`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T06:59:29.137

在 index.php 页面上试试这个

```
<?php require('home.php');? 
```

home.php 是 url 的主页（当然没有 qoute）

# mysql - 我需要在调用语句中使用变量执行存储过程

> ID：12441482
> 
> 赞同：2
> 
> 时间：2012-09-15T20:43:17.357
> 
> 标签：mysql

我想编写一个名为 SpecificCity 的存储过程，它将列出居住在特定城市的学生 ssn、姓氏、地址、城市、州和邮编。我需要将特定城市放在通话声明中。我知道你们以前帮助过我，我真的可以在这方面使用你们的帮助。我不知道它是否必须有一个分隔符或者它是否可以是一个简单的存储过程。我什至不知道要采取的步骤，我看了看也不知道该怎么做。

```
 CREATE TABLE student ( SSN CHAR(9) , LastName VARCHAR(25), FirstName VARCHAR(25), MiddleName VARCHAR(25) NULL, Address VARCHAR(50) NULL, City VARCHAR(25) NULL, State CHAR(2) NULL, Zip CHAR(9) NULL, DateOfBirth DATETIME NULL, Salary FLOAT(8,2) not null,
    ParkingSpace INT, Gender CHAR(1) NULL, DptNumber SMALLINT, SuperID CHAR(9), constraint pkField PRIMARY KEY(ssn) ;

    Delimiter //
    create procedure spSpecificCity(IN city VARCHAR(25))
    BEGIN
    SELECT SSN, LASTNAME, ADDRESS, CITY, STATE, ZIP
    FROM STUDENT
    WHERE CITY = CITY;
    END //

    DELIMITER ;

    CALL spSpecificCity('Brooklyn'); 
```

当我尝试这样做时，它只会将布鲁克林放在每个名字旁边的城市列中。我正在尝试，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T22:20:54.227

如[Local Variable Scope and Resolution](http://dev.mysql.com/doc/en/local-variable-scope.html)中所述：

> 局部变量不应与表列同名。如果一条 SQL 语句，例如[`SELECT ... INTO`](http://dev.mysql.com/doc/en/select.html)语句，包含对列的引用和同名声明的局部变量，则 MySQL 当前将该引用解释为变量的名称。

因此，您应该将`city`参数重命名为与您希望引用的任何列不同的名称。我通常采用以下划线作为局部变量前缀的约定：

```
CREATE PROCEDURE spSpecificCity(IN _city VARCHAR(25))
BEGIN
  SELECT SSN,
         LastName,
         Address,
         City,
         State,
         Zip
  FROM   student
  WHERE  city = _city;
END 
```

或者，您可以通过使用表前缀限定列引用来避免歧义：

```
CREATE PROCEDURE spSpecificCity(IN city VARCHAR(25))
BEGIN
  SELECT student.SSN,
         student.LastName,
         student.Address,
         student.City,
         student.State,
         student.Zip
  FROM   student
  WHERE  student.city = city;
END 
```

`BEGIN ... END`顺便说一句，如果您的过程仅包含一条语句，则不需要使用（因此也不需要更改分隔符）。

# javascript - 获取点击链接的 ID

> ID：12441485
> 
> 赞同：5
> 
> 时间：2012-09-15T20:43:55.547
> 
> 标签：javascript, jquery

在下面的代码和此处的演示[http://jsfiddle.net/jasondavis/vp2YN/3/](http://jsfiddle.net/jasondavis/vp2YN/3/)中，您可以看到我需要获取单击项目的 ID 属性并将其分配给 Javascript 中的变量。

现在代码返回第一个项目的 ID 名称，无论单击哪个项目。

在 Javascript 中，您可以看到我已将这一行注释掉...

`var clickedID = this.attr("id");` 当我使用那条线时，我收到一条错误消息：`Object has no method 'attr'`

请帮我获取点击链接的 ID 名称并将其分配给变量

HTML

```
<a href="#" style="display:block" class="button insertcolumn" id="one_half">2 Columns</a>

<a href="#" style="display:block" class="button insertcolumn" id="one_third">3 Columns</a>

<a href="#" style="display:block" class="button insertcolumn" id="one_fourth">4 Columns</a>​ 
```

Javascript/jQuery

```
jQuery('.insertcolumn').click(function(){

    var clickedID = jQuery('.insertcolumn').attr("id");
    //var clickedID = this.attr("id");

    alert(clickedID);

});​ 
```

演示[http://jsfiddle.net/jasondavis/vp2YN/3/](http://jsfiddle.net/jasondavis/vp2YN/3/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T20:45:47.750

您必须使用 jQuery 包装器引用您单击的那个！

你想用

```
$(this).attr('id'); 
```

要获取 id（无需无缘无故地遍历 DOM），最好只调用 object `id`。

```
this.id; 
```

但是要访问属性，无论属性的类型如何，并且取决于属性的名称，请使用以下代码。

```
jQuery('.insertcolumn').click(function(){

    var clickedID = $(this).attr('id');

    alert(clickedID);

});​ 
```

# android - Android 中 UI 设计的更好替代方案

> ID：12441492
> 
> 赞同：1
> 
> 时间：2012-09-15T20:45:41.693
> 
> 标签：android, user-interface, wysiwyg, designer

我有一个应用程序设计项目，我一直在努力使用 DroidDraw，从设计师的角度来看，它是一个不可用的 UI 工具。

我需要一个支持 Android 4.0 UI 元素的工具，而不是像 Balsamiq 之类的模型工具。

有谁知道使用所见即所得编辑器的 UI 设计的另一种替代方法，可以让您设计和获取 XML 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:22:03.663

对于用户界面设计，您可以使用[Eclipse](http://www.eclipse.org/downloads/packages/eclipse-classic-42/junor)或[Intellij Leda Preview](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)

对于他们两个，您都需要安装 android sdk。更多信息[在这里](http://developer.android.com/sdk/installing/index.html)

如果您使用的是 Eclipse，则必须安装 ADT 插件。更多信息[在这里](http://developer.android.com/sdk/installing/installing-adt.html)。Eclipse 由 android 官方支持。

Intellij 附带捆绑的 android 支持。因此，您不必为此安装任何插件。

它们都是带有 android UI 设计器的 java IDE。他们不仅仅是 droid draw 的 UI 设计师。要查看您将从 Intellij 获得的内容，请点击此[链接](http://blogs.jetbrains.com/idea/2012/06/android-ui-designer-coming-in-intellij-idea-12/)

希望这会帮助你。

# c# - 一些带有 MVVM 的通知模式

> ID：12441500
> 
> 赞同：-2
> 
> 时间：2012-09-15T20:46:58.840
> 
> 标签：c#, wpf

> **可能重复：**
> [使用 MVVM 处理 WPF 中的对话框](https://stackoverflow.com/questions/454868/handling-dialogs-in-wpf-with-mvvm)

我对如何实施以下内容有严重疑问。

1.  从视图执行绑定到我的 ViewModel 的操作
2.  根据条件，向用户发出请求

现在我为此目的使用 System.Windows.MessageBox.Show，我不知道这是否合适并且还希望有一个自定义对话框。

可以帮助我解决这个问题的技术或模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T20:52:24.880

Firstly, if you are doing MVVM, then [you should be using an MVVM framework](http://www.lhotka.net/weblog/UsingTheMVVMPatternRequiresAFramework.aspx). With [Caliburn.Micro](http://caliburnmicro.codeplex.com/) for example you could either display another window (using the window manager), or display a part of the existing view over the top of the other elements within the view.

Either way, if you want to stick with a message box, then you'll want to work against an abstraction in your view model, so that you can unit test your view models without the tests producing dialogs that wait on user input.

# clojure - Jekyll 中的 Pygments 语法高亮显示，无需启动

> ID：12441501
> 
> 赞同：3
> 
> 时间：2012-09-15T20:47:00.760
> 
> 标签：clojure, jekyll, pygments

如果您将 Jekyll 与 Pygments 语法高亮包一起使用，则可以编写

```
{% highlight clojure %}
(def something :foobar)
{% endhighlight %} 
```

`<div>`根据 Clojure 语法生成一个包含该行的语法高亮。但是有没有办法在段落中间突出显示语法？我希望能够写作

```
In Clojure, keywords like {% highlight clojure %}:foobar{% endhighlight %}
are prepended by colons. 
```

此处所需的行为是 Clojure 关键字将使用与第一个示例中的关键字相同的样式突出显示。但是，当我尝试这样做时，它只会产生`<div>`类似的结果。（也许这是特定于我正在使用的 Kramdown 降价引擎，但 div 标签本身是 HTML 转义的，因此您可以在生成的文本中看到“<div>”。）

有没有办法让 Jekyll/Pygments 像这样进行“内联”语法突出显示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-14T20:42:24.450

两年后，我继续创建了自己的 Jekyll 插件来提供内联语法高亮。它被称为[inline_highlight](https://github.com/bdesham/inline_highlight)，它可以像这样使用：

```
In Clojure, keywords like {% ihighlight clojure %}:foobar{% endihighlight %}
are prepended by colons. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T18:38:51.727

您可以将 CSS 类添加到您在帖子中放置的任何对象。

如果你像这样定义一个 CSS 条目：

```
.inlined { display:inline; } 
```

然后，您可以将此类添加到生成的`<div>`执行此操作中：

```
In Clojure, keywords like 
{% highlight clojure %}:foobar{% endhighlight %}{: .inlined } 
are prepended by colons. 
```

这适用于所有类型的对象（表格、图像等）。我现在无法测试它，但我认为这将解决问题。

测试时，请查看输出 HTML。然后你会发现你的`<div>`now 已经`class=inlined`设置了属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:19:38.810

我认为您可以使用该`nowrap`选项来防止 Pygments 将代码包装在`div`标签中。所以你的例子会变成：

```
In Clojure, keywords like 
<span class='highlight'><code class='closure'>
{% highlight clojure nowrap %}:foobar{% endhighlight %}
</code></span>
are prepended by colons. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-19T19:27:14.057

我的快速解决方法是让 Jekyll 预处理代码：

```
<div class="highlight">
    <code class="language-css" data-lang="css">…&lt;/code>
</div> 
```

并在用 span 替换 div 后将其粘贴到所需的位置：

```
<span class="highlight">
    <code class="language-css" data-lang="css">…&lt;/code>
</span> 
```

# android - 代码未将事件插入日历

> ID：12441502
> 
> 赞同：0
> 
> 时间：2012-09-15T20:47:09.713
> 
> 标签：android, events, insert, calendar

有谁知道为什么这段代码没有将事件插入日历？我没有错误，它只是没有插入事件？

我正在使用带有 ICS 更新的 Galaxy s2，不确定这是否相关，但只是想知道它是否与它不是 Google 日历应用程序有关。

```
public void addEvent(Context ctx, String title, Calendar start, Calendar end) {
   Log.d(TAG, "AddUsingContentProvider.addEvent()");

TextView calendarList = 
    (TextView) ((Activity) ctx).findViewById(R.id.calendarList);

ContentResolver contentResolver = ctx.getContentResolver();

ContentValues calEvent = new ContentValues();
calEvent.put(CalendarContract.Events.CALENDAR_ID, 1); // XXX pick)
calEvent.put(CalendarContract.Events.TITLE, title);
calEvent.put(CalendarContract.Events.DTSTART, start.getTimeInMillis());
calEvent.put(CalendarContract.Events.DTEND, end.getTimeInMillis());
calEvent.put(CalendarContract.Events.EVENT_TIMEZONE, "Canada/Eastern");
Uri uri = contentResolver.insert(CalendarContract.Events.CONTENT_URI, calEvent);

// The returned Uri contains the content-retriever URI for 
// the newly-inserted event, including its id
int id = Integer.parseInt(uri.getLastPathSegment());
Toast.makeText(ctx, "Created Calendar Event " + id,
    Toast.LENGTH_SHORT).show(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:19:43.053

尝试代替 "Canada/Eastern" ， timeZone.getID() 像这样：

```
TimeZone timeZone = TimeZone.getDefault();
values.put(CalendarContract.Events.EVENT_TIMEZONE, timeZone.getID()); 
```

还要检查您何时查找事件，因为某些 Java 日历/日期函数具有 0 索引月份。所以您将 11 月设置为 12 月而不是 11 月。以防万一..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T13:55:58.783

不确定是否解决。尝试了以下代码，它正在 4.0 上运行 注意月份是基于 0 的，因此 2103、12 解析为 2014 年 1 月 20 日{

```
 Calendar beginTime = Calendar.getInstance();//it puts in 2014, Jan 20
    beginTime.set(2013, 12, 20, 7, 30);
    Calendar endTime = Calendar.getInstance();
    endTime.set(2013, 12, 20, 8, 30);

    ContentValues calEvent = new ContentValues();
    calEvent.put(CalendarContract.Events.CALENDAR_ID, 1); // XXX pick)
    calEvent.put(CalendarContract.Events.TITLE, "title is game time");
    calEvent.put(CalendarContract.Events.DTSTART, beginTime.getTimeInMillis());
    calEvent.put(CalendarContract.Events.DTEND, endTime.getTimeInMillis());
    calEvent.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());
    Uri uri = this.getContentResolver().insert(CalendarContract.Events.CONTENT_URI, calEvent);

    // The returned Uri contains the content-retriever URI for 
    // the newly-inserted event, including its id
    int id = Integer.parseInt(uri.getLastPathSegment());
    Toast.makeText(this, "Created Calendar Event " + id,
        Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T12:34:12.327

尝试这个：

```
calEvent.put(CalendarContract.Events.EVENT_TIMEZONE, CalendarContract.Calendars.CALENDAR_TIME_ZONE); 
```

奇迹般有效！

# javascript - 如何在非交互式 shell 中从命令获取颜色和格式数据

> ID：12441503
> 
> 赞同：0
> 
> 时间：2012-09-15T20:47:16.847
> 
> 标签：javascript, shell, colors, terminal, ls

我在 JavaScript 中有终端模拟器，可以执行 CGI 脚本（通过 Ajax），从命令中获取颜色和格式信息会很好，比如`ls --color=auto`.

有没有办法从显示此信息的非交互式外壳（我的 CGI 脚本）中获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:13:42.287

不知道你的意思但是

```
ls --color=always 
```

即使输出没有到终端，也会以彩色输出

有一个`aha`工具可以将 ANSI 颜色转义序列转换为 HTML (http://ziz.delphigl.com/tool_aha.php)。

```
ls --color=always | aha 
```

# delphi - IdHTTP 基本身份验证访问冲突

> ID：12441508
> 
> 赞同：8
> 
> 时间：2012-09-15T20:47:35.253
> 
> 标签：delphi, delphi-2010, indy, idhttp

我正在尝试使用 Indy HTTP 类进行 HTTP 身份验证。但是由于某些未知原因，我在这一行中遇到访问冲突错误： **IdHTTP1.Request.Authentication.Username := Username;**

代码延伸是：

```
 IdHTTP1:= TIdHttp.Create(Application);
  IdHTTP1.ConnectTimeout:= 10000;
  IdHTTP1.Request.Clear;
  IdHTTP1.Request.BasicAuthentication:= true;
  IdHTTP1.Request.Authentication.Username := Username;
  IdHTTP1.Request.Authentication.Password := Password;
      try
        IdHTTP1.Get(PbxURL);
        HttpCode := IdHTTP1.ResponseCode;
      except
        on E: EIdHTTPProtocolException do
          HttpCode := IdHTTP1.ResponseCode; 
```

我正在使用 Delphi 2010，并且已经尝试过类似的操作： **IdHTTP1.Request.Authentication.Username := 'admin';** 但没有解决问题...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-15T20:56:22.753

通过快速检查，当为真时，似乎`IdHTTP.Request.Authentication`不需要（因此没有创建） 。`Request.BasicAuthentication`您应该使用`Request.UserName`and`Request.Password`代替。

```
IdHTTP1:= TIdHttp.Create(Application);
IdHTTP1.ConnectTimeout:= 10000;
IdHTTP1.Request.Clear;
IdHTTP1.Request.BasicAuthentication:= true;
IdHTTP1.Request.UserName := UserName;
IdHTTP1.Request.Password := Password; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T03:17:08.370

默认情况下，在`Request.Authentication`发送请求并接收到身份验证响应之前不会分配对象，然后`OnSelectAuthorization`触发事件以确定为后续请求分配对象的类类型。

可以分配对象的唯一另一种方法`Request.Authentication`是，如果您在发送请求之前在自己的代码中手动执行此操作，例如，如果您提前知道服务器使用哪种身份验证方案，而无需发送请求以动态发现该方案。

# jquery - 寻求仅允许手动控制而没有寻呼机的 Drupal 7 幻灯片

> ID：12441509
> 
> 赞同：0
> 
> 时间：2012-09-15T20:47:45.220
> 
> 标签：jquery, drupal, controls, slideshow, pager

我正在寻找一个幻灯片模块，它允许我没有寻呼机并使用手动控制（上一个/下一个按钮）。除非用户使用 prev/next 按钮触发，否则我不希望幻灯片前进 我可以使用 Views Slideshow 执行此操作吗？

使用 View Slideshow，看起来我可以相当轻松地消除寻呼机，但我不知道如何手动控制幻灯片的速度。除非由用户触发，否则我不希望幻灯片继续播放，并且我根本不想要任何缩略图或文本寻呼机。

这会涉及对 jquery 文件的更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:57:29.623

只需打开“转换高级选项”并将“定时器延迟”设置为 0。

> **Timer Delay**
> 转换之间的时间量（以毫秒为单位）。将该值设置为 0 以不自动旋转幻灯片。

# php - PHP数组——重铸为关联

> ID：12441523
> 
> 赞同：0
> 
> 时间：2012-09-15T20:51:54.387
> 
> 标签：php, arrays

我没有成功使用`array_combine()`. 谁能帮我弄...

## 由此

```
array
  0 => 
    array
      0 => 
        array
          'traitvalue01' => string 'width'
          'traitvalue02' => string 'Length'
          'traitvalue03' => string 'Top'
          'traitvalue04' => string 'Bottom'
  1 => 
    array
      0 => 
        array
          'trait01' => string '7 in'
          'trait02' => string '25 in'
          'trait03' => string '3 in'
          'trait04' => string '3 in' 
```

## 到这个

```
array
    string 'width'  => string '7 in'
    string 'Length' => string '25 in'
    string 'Top'    => string '3 in'
    string 'Bottom' => string '3 in' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:08:52.137

你应该这样做：

```
> $a = unset($yourArray[0][$key]); 
> $b = unset($yourArray[1][$key]);
> array_combine($a, $b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T21:12:41.383

确保仔细检查 - 您可能将错误的数组传递给 array_combine()。

这是我为您整理的一个示例。您可以通过 PHP 二进制文件运行它以查看结果（正确）。

```
<?php
    $trait_array = array();
    array_push($trait_array, array(array('traitvalue01' => 'width', 'traitvalue02' => 'Length', 'traitvalue03' => 'Top', 'traitvalue04' => 'Bottom')));
    array_push($trait_array, array(array('trait01' => '7 in', 'trait02' => '25 in', 'trait03' => '3 in', 'trait04' => '3 in')));
    $result_array = array_combine($trait_array[0][0],$trait_array[1][0]);
    echo(print_r($result_array,1));
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T21:16:47.873

您是否尝试使用 array_combine？

```
$myarr = array(
              0=>array(
                  0=>array( 
                     'traitvalue01' => 'width',
                     'traitvalue02' => 'Length',
                     'traitvalue03' =>'Top',
                     'traitvalue04' => 'Bottom')),
             1=>array(
                  0=>array( 
                     'trait01' =>'7 in',
                     'trait02' => '25 in',
                     'trait03' => '3 in',
                     'trait04' => '3 in'))
          ); 
```

print_r(array_combine($myarr[0][0],$myarr[1][0]));

结果：数组（[宽度] => 7 英寸 [长度] => 25 英寸 [顶部] => 3 英寸 [底部] => 3 英寸）

你动态地制作它。如你所愿......简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T21:19:27.867

这是我的解决方案：

```
<?php

$a = array(
        array(
            array(
                'traitvalue01' => 'width',
                'traitvalue02' => 'Length',
                'traitvalue03' => 'Top',
                'traitvalue04' => 'Bottom'
            )
        ),
        array(
            array(
              'trait01' => '7 in',
              'trait02' => '25 in',
              'trait03' => '3 in',
              'trait04' => '3 in'
            )
        )
    );

print_r(array_combine($a[0][0], $a[1][0]));

?> 
```

这是输出：

```
Array
(
    [width] => 7 in
    [Length] => 25 in
    [Top] => 3 in
    [Bottom] => 3 in
) 
```

# zend-framework2 - Zend Framework 2 分页器 + TableGateway

> ID：12441529
> 
> 赞同：2
> 
> 时间：2012-09-15T20:52:23.443
> 
> 标签：zend-framework2, zend-db, zend-paginator, tablegateway

## 如何将数据库映射器与分页器一起使用？

我在理解如何使用下面的代码实现 DbSelect 分页器时遇到了一些麻烦（现在它正在使用不适用于 ResultSets 的 Iterator 适配器）。

据我所知，这并不像我希望的那样直截了当。DbSelect 需要一个`Zend\Db\Sql\Select`和一个适配器。适配器不是问题，可以通过以下方式检索：

```
$this->newsContents()->getAdapter() 
```

但我无法在`Select`不复制查询代码的情况下从 TableGateway 中取出对象。有没有简单的方法来解决这个问题？

**新闻控制器.php**

```
<?php

namespace News\Controller;

use Zend\Paginator\Paginator;

class NewsController extends \Application\Controller\WebsiteController
{
    protected $newsTable;

    protected $newsContents;

    protected function newsTable()
    {
        return $this->getServiceLocator()->get('News\Model\NewsTable');
    }

    protected function newsContents()
    {
        return $this->getServiceLocator()->get('News\Model\NewsContentsTable');
    }

    protected function articleId()
    {
        return (int) $this->params()->fromRoute('id');
    }

    public function articleAction()
    {
        $article = $this->newsTable()->getArticle($this->articleId());
        $pages   = $this->newsContents()->getPages($this->articleId());

        $paginator = new Paginator(new \Zend\Paginator\Adapter\Iterator($pages));
        $paginator->setCurrentPageNumber($this->params()->fromRoute('page'));

        return array(
            'css'       => 'news.css',
            'article'   => $article,
            'paginator' => $paginator,
        );
    }
} 
```

**新闻内容表.php**

```
<?php

namespace News\Model;

use Zend\Db\Adapter\Adapter;
use Zend\Db\ResultSet\ResultSet;
use Zend\Db\TableGateway\AbstractTableGateway;
use Zend\Db\Sql\Select;

class NewsContentsTable extends \Zend\Db\TableGateway\AbstractTableGateway
{
    protected $table = 'news_contents';

    public function __construct(Adapter $adapter)
    {
        $this->adapter = $adapter;
        $this->resultSetPrototype = new ResultSet;
        $this->resultSetPrototype->setArrayObjectPrototype(new NewsContents);
        $this->initialize();
    }

    public function getPages($newsId)
    {
        $rowset = $this->select(function(Select $select) use ($newsId)
        {
            $select
                ->order('order ASC')
                ->where(array('news_id' => $newsId));
        });

        return $rowset;
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-21T19:18:33.130

从 Zend Framework 2.2 开始，它变得更加容易（并且允许您充分享受 TableGateway 提供的优势） - 您应该使用

```
use Zend\Db\TableGateway\TableGateway;
use Zend\Paginator\Paginator;
use Zend\Paginator\Adapter\DbTableGateway;  // !!!

$dbTableGatewayAdapter = new DbTableGateway($this->tableGateway);
$paginator = new Paginator($dbTableGatewayAdapter);
return $paginator; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T22:09:47.570

使用 DbSelect 作为适配器实现分页器

```
// controller
public function articleAction()
{
    //...
    $paginator = $this->newsContents()->getPages($this->articleId());
    $paginator->setCurrentPageNumber($this->params()->fromRoute('page'));

    return array(
        'css'       => 'news.css',
        'article'   => $article,
        'paginator' => $paginator,
    );
}
?>

// table
public function getPages($newsId)
{
    $sql = $this->getSql();
    $select = $sql->select();
    $select->where(array('news_id' => $newsId))->order('id ASC');
    $adapter = new \Zend\Paginator\Adapter\DbSelect($select, $sql);
    $paginator = new \Zend\Paginator\Paginator($adapter);
    return $paginator;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:15:22.917

在 $rowset 中返回之前使用**buffer** () 和**next() 。**

```
$rowset->buffer();
$rowset->next();

return $rowset; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:22:31.477

> > 但是在不复制查询代码的情况下，我无法从 TableGateway 中获取 Select 对象。有没有简单的方法来解决这个问题？

您可以像这样在 NewsContentsTable 类中获取选择对象：

```
$this->getSql()->select(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-06T05:04:44.703

这是ZF2中分页的示例代码

```
 <?php
    //var/www/html/zend_app/module/Application/src/Application/Controller/Plugin/MyCustomPlugin.php
    namespace Application\Controller\Plugin;

    use Zend\View\Helper\AbstractHelper;

    use Zend\Db\Adapter\Adapter;
    use Zend\Db\ResultSet\ResultSet;
    use Zend\Db\Sql\Select;
    use Zend\Db\Sql\Sql;
    use Zend\Db\Sql\Where;

    use Zend\Mvc\Controller\Plugin\AbstractPlugin;

    use Zend\Paginator\Paginator;
    use Zend\Paginator\Adapter\Iterator as paginatorIterator;
    use Zend\Paginator\Adapter\DbSelect;

    class MyCustomPlugin extends AbstractPlugin {

        protected $adapter;

        public function __construct(\Zend\Db\Adapter\Adapter $adapter) {
            $this->adapter = $adapter;
        }

         public function getPaginatedTableData($tableName, $whereData = "", $selectedColumn = '' , $currentPageNumber = 1) {

            $sql = new Sql($this->adapter);
            $select = $sql->select();

            if ($selectedColumn) {
                $select->columns($selectedColumn);
            }
            $select->from($tableName);
            if ($whereData) {
                $select->where($whereData);
            }

            $paginator = $this->getPaginatorForSelect($select, $currentPageNumber);

            $resultSet = new ResultSet;
            $resultSet->initialize($paginator);
            $resultSet->buffer();

              $pagination = array(
               'current_page_number'=>$currentPageNumber,
               'page_count'=>$paginator->getPages()->pageCount,
               'previous'=>isset($paginator->getPages()->previous)?$paginator->getPages()->previous:0,
               'next'=>isset($paginator->getPages()->next)?$paginator->getPages()->next:0,
               );

 return ($resultSet &&  0 != $paginator->getPages()->pageCount)?array('resultSet'=>$resultSet->toArray(), 'pagination'=>$pagination):FALSE;

        }

        public function getPaginatorForSelect($select, $page, $limit=2)
    {
    $paginatorAdapter = new DbSelect($select, $this->adapter);
    $paginator = new Paginator($paginatorAdapter);
    $paginator->setItemCountPerPage($limit);
    $paginator->setPageRange(5);
    $paginator->setCurrentPageNumber($page);
    return $paginator;
    }

    } 
```

高温高压

# php - php聊天应用程序中的TCP实现

> ID：12441531
> 
> 赞同：0
> 
> 时间：2012-09-15T20:52:50.697
> 
> 标签：php, javascript, codeigniter, tcp

朋友们，我想开始在我的 php 网站聊天插件中学习 TCP 实现。

我用 jquery-ajax 开发了一个聊天插件，频繁地向数据库请求是一项繁琐的任务，而且会给服务器带来负担。

我在 CodeIgnitor 框架中开发了网站。

我的问题是：

-> php(CodeIgnitor) 中的任何 TCP 实现库？-> 在 PHP 中实现 TCP 是一项艰巨的任务吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T22:30:52.130

你不需要学习`tcp`制作聊天应用程序，你需要的是某种反向 ajax 和 websockets，我推荐 node.js 和 socket.io。

# grails - Grails grails-oauth-scribe linkedin redirect

> ID：12441533
> 
> 赞同：3
> 
> 时间：2012-09-15T20:53:49.450
> 
> 标签：grails, grails-plugin, scribe

I am trying to use the new oAuth 2.0 plugin for Grails to consume LinkedIn resources. With my code, I am able to get to LinkedIn authorization page where I can grant my app permission to access my LinkedIn account info.

The problem is that once I hit the continue button, it does not redirect back to my app. instead, it goes to a page that says "You have successfully authorized XXXX. Please return to your application and enter the following security code to grant access: some number"

How do I get this to redirect back to my app?

My settings are:

Config.groovy

```
oauth {
        providers{
            linkedin {              
                api="org.scribe.builder.api.LinkedInApi"
                key = 'my key'
                secret = 'my secret'
                successUri = '/linkedinProfile/success'
                failureUri = '/linkedinProfile/failed'
                callback = "http://localhost:8080/myApp/secure/linkedinProfile/success"
            }
        }
    } 
```

my gsp view:

```
<oauth:connect provider="linkedin">Connect to linkedin</oauth:connect> 
```

my linked in developer account:

Website URL: `http://localhost:8080/myApp` OAuth Redirect URL: `http://localhost:8080/myApp/secure/linkedinProfile/success`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:41:39.933

好吧，如果其他人需要这个，这就是我所做的：

我有三个文件，视图、开始控制器和结束控制器。

在视图中，我有一个这样的链接：

```
 <g:link action="registerOnLinkedIn" controller="linkedinProfile" >connect </g:link> 
```

我有这个方法的地方：

```
 String apiKey =:myKey"
String apiSecret="mySecret"
String callBackUrl="http://localhost:8080/myApp/secure/mySub/success"

    def registerOnLinkedIn = {  

        Token linkedInAccessToken=null;
            OAuthService service=new ServiceBuilder()
            .provider(LinkedInApi.class)
            .apiKey(apiKey)
            .apiSecret(apiSecret)
            .callback(callBackUrl)
            .build();

            Token requestToken = service.getRequestToken();
            String authUrl = service.getAuthorizationUrl(requestToken);
            session['REQUEST_TOKEN'] = requestToken
            redirect(url: authUrl)
}
    def success ={
    String v = params.oauth_verifier
    String r=  session['REQUEST_TOKEN']

    linkedInXmlService.getXmlStream(v,session['REQUEST_TOKEN'])

} 
```

当用户点击链接时，他们会被发送到该方法，该方法会创建一个重定向 url。重定向 url 是linkedIn 的授权页面，用户可以在其中接受应用程序。一旦被接受，它们将被重定向到成功方法，该方法重定向到服务。

服务获取验证者和令牌并向linkedin API 发送请求。大部分在这里：

```
 def apiUrl = "http://api.linkedin.com/v1/people/~:(" +
"id," + 
"picture-url," +    
"site-standard-profile-request," +
"first-name," +
"date-of-birth," +
"last-name," +
"industry," +   
"location," +
"educations," + 
"positions:(id,title,summary,start-date,end-date,is-current,company)," +
"skills:(id,skill:(name),proficiency:(level),years:(name))," +
"connections:(id,industry,first-name,last-name,site-standard-profile-request,headline,location,positions,educations,date-of-birth,picture-url,skills:(id,skill:(name),proficiency:(level),years:(name)))" + 
")"

    public void getXmlStream(String ver, rt)
{
    String accessTokenKey=""
    String accessTokenSecret=""

    String xmlString =""
    OAuthService service=new ServiceBuilder()
    .provider(LinkedInApi.class)
    .apiKey(apiKey)
    .apiSecret(apiSecret)
    .build();

    Verifier v = new Verifier(ver);

    Token accessToken = service.getAccessToken(rt, v);
    accessTokenSecret = accessToken.secret
    accessTokenKey = accessToken.token

    OAuthRequest request = new OAuthRequest(Verb.GET, apiUrl);
    service.signRequest(accessToken, request); // the access token from step 4
    Response response = request.send();
    xmlString=response.getBody();
    log.debug (xmlString)
    processData(xmlString, accessTokenKey, accessTokenSecret)

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:50:55.170

使用插件执行此操作的正确方法是在您的linkedin 配置中指定回调属性。

我还在学习这个，所以我的配置中的其他东西可能是错误的。但是，回调参数解决了这个问题。

```
oauth {
providers {
    linkedin {
        api = org.scribe.builder.api.LinkedInApi
        key = 'XXX'
        secret = 'XXX'
        successUri = "/oauth/linkedin/callback"
        failureUri = "/oauth/linkedin/error"
        callback = "https://localhost:8443/myapp/oauth/linkedin/callback"
        scope = "w_messages"
    }
}   
debug = true
} 
```

# c# - C# xml 反序列化

> ID：12441534
> 
> 赞同：0
> 
> 时间：2012-09-15T20:54:07.883
> 
> 标签：c#, xml, deserialization

我有这个类叫`identity`

```
namespace Game.World.Entities
{
    [XmlRoot("Identity")]
    public class Identity
    {
        public string Name { get; set; }
        public string Texture { get; set; }
        public string HeroType { get; set; }

        public Stats Stats { get; set; }
        public ActiveAbilitites ActiveAbilitites { get; set; }
        public PassiveAbilitites PassiveAbilitites { get; set; }
    }

    public class ActiveAbilitites
    {
        [XmlElement("AbilityId")]
        public List<int> ActiveAbilitiesId { get; set; }
    }

    public class PassiveAbilitites
    {
        [XmlElement("AbilityId")]
        public List<int> PassiveAbilitiesId { get; set; }
    }

    public class Stats
    {
        public int Health { get; set; }
        public int MagicDamage { get; set; }
        public int PhysicalDamage { get; set; }
        public int Defense { get; set; }
    }
} 
```

我已经将该类序列化为一个 xml 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<Identity xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Name>foo</Name>
  <Texture>player</Texture>
  <HeroType>tracker</HeroType>
  <Stats>
    <Health>5</Health>
    <MagicDamage>5</MagicDamage>
    <PhysicalDamage>5</PhysicalDamage>
    <Defense>5</Defense>
  </Stats>
  <ActiveAbilitites>
    <AbilityId>1</AbilityId>
    <AbilityId>2</AbilityId>
    <AbilityId>3</AbilityId>
  </ActiveAbilitites>
  <PassiveAbilitites>
    <AbilityId>1</AbilityId>
    <AbilityId>2</AbilityId>
    <AbilityId>3</AbilityId>
  </PassiveAbilitites>
</Identity> 
```

但是，当我尝试将 xml 反序列化为`identity`对象时，出现错误

> xml 文档中存在错误 (2,2) .....
> System.InvalidOperationException 不是预期的。
> 在 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderList1.Read6_ArrayOfIdentity()

现在这让我很难过，因为 xml 来自序列化，所以我不知道为什么我不能反序列化它。我假设我在某处错过了一个注释标签，任何关于此事的帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:20:35.867

This turned out to be a problem with how I was deseralizing the code. I have no idea what I did to mess it up so much but I'm presuming it was to do with my string reader. I just copied and pasted some example code from [Deserialize from string instead TextReader](https://stackoverflow.com/questions/2347642/deserialize-from-string-instead-textreader) and its now working fine.

# java - JAva Vector Print

> ID：12441539
> 
> 赞同：0
> 
> 时间：2012-09-15T20:54:20.090
> 
> 标签：java, arrays, oop, vector, arraylist

I have a class Bank

```
public class Bank {
    public static final double INTEREST = 0.1;  //Interest rate charged on overdrawn accounts
    private Vector customers=new Vector();
    private Address address;

    public Bank() {
        //address = null;
    }

    public Bank(Address add) {
        customers = new Vector ();
        address = add;
    }

    // add a Customer to the customers Vector
    public void addCustomer(Customer cus) {
        customers.add(cus);
    }

    // get and set methods
    public Vector getCustomers() {
        return customers;
    }

    public void setCustomers(Vector v) {
        customers = v;
    }

} 
```

now i am adding customers to the Banks class

```
public void actionPerformed(ActionEvent e){
    int custnum=b.getBank().getCustomers().size()+1;
    ad=new Address(txtCustStreet.getText(),txtCustCity.getText(),txtCustPostCode.getText());
    cus=new Customer(txtCustName.getText(),ad,custnum, Integer.parseInt(txtoverdraft.getText()));

    if (e.getSource() == jbExit) {
        frame.dispose();
    }
    if (e.getSource() == jbSubmit) {
        // b.getBank().setCustomers(null);
        b.getBank().addCustomer(cus);
    }
    System.out.println(b.getBank().getCustomers().size());
} 
```

when i am printing the vector size after adding 1 customers it prints 1 when i add two customers it prints like 1 2 while i add 3 customers it prints like 1 2 3

i want only only to print 3 when i add 3 customers not 1 2 3 please help me out thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T21:41:37.537

As MadProgrammer mentioned above it looks like you're using an `actionPerformed` method to add `Customers`. This would cause you to see:

```
1
2
3 
```

when you add 3 `Customers` because if you're doing this in an event handler then you must be triggering the event 3 times. Each of these `ActionEvents` being handled is triggering the `actionPerformed` method which has a `System.out.println()` call at the end of it. What's happening is that you're seeing all three numbers since each call is printing out the result of `b.getBank().getCustomers().size()` which is going up by one each time the method is called.

If you are triggering this with a button, try looking at your output between button clicks and you see that you'll have one line of output for each time you've clicked the button. If that's the case and you want to only see the final size of your `Vector` then you'll have to move your `System.out.println()` call outside of your event handling method.

# objective-c - Scheduling NSStream events on an NSRunLoop that isn't the main run loop

> ID：12441546
> 
> 赞同：4
> 
> 时间：2012-09-15T20:55:52.463
> 
> 标签：objective-c, ios, nsrunloop, nsstream

I'm scheduling events on the main run loop using the following code:

```
[stream setDelegate:self];
[stream scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
[stream open]; 
```

I assume that this means that `NSStreamDelegate` events are being scheduled on the main run loop and therefore can potentially impact UI responsiveness if frequent enough. This certainly seems to be the case in my program - even if the event handlers detach into a background thread without doing much work themselves.

How would I go about scheduling on a run loop other than `mainRunLoop`? Do I need to create a thread? Can I just create an NSRunLoop directly? What setup needs to be performed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:36:11.520

我的建议是使用并发 nsoperstion。我在 github 上有一个演示应用程序，它显示了如何向这样的对象发送消息。你也会发现很多这样的项目。然后，您可以使用带有线程说明符的 performSelector 变体（此类操作的线程是持久的）。

该操作有一个运行循环，因此可以发送消息，一个线程，可以轻松取消，您可以创建多个。

# c++ - 符号无法在 C++ 中解析

> ID：12441552
> 
> 赞同：0
> 
> 时间：2012-09-15T20:57:02.643
> 
> 标签：c++, scope

我正在为一个类的项目工作，用 C++ 编写。尝试构建代码时，我不断收到一个奇怪的错误，说符号未在其范围内声明。这可能是一个简单的解决方法，但我在论坛上找不到，并且对 c++ 了解不足，无法自行解决。这是代码：

```
#include "Menu.h"
#include "MovieCollection.h"
#include "Movie.h"

Menu::Menu() {
MovieCollection mc("Collection.txt");
}

void Menu::displayTopMenu(){
    MovieCollection mc("Collection.txt");
    cout<<"Press:\n"<<
        "1- To list all movies\n"<<
        "2- To search by title\n"<<
        "3- To search by year\n"<<
        "4- To search by Director\n"<<
        "5- To add a movie to the collection\n"
        "6- to remove a movie from the collection\n"
        "0- To exit the program\n";
}

void displaysub1(){
    mc.listAll();
    // This is the bit that gives me the "out of scope" error
} 
```

这里还有 Menu.h 文件……

```
#ifndef MENU_H_
#define MENU_H_

#include "Movie.h"
#include "MovieCollection.h"
#include <iostream>

using namespace std;

class Menu {
public:
Menu();
void displayTopMenu();
void displaysub1();
};

#endif /* MENU_H_ */ 
```

消息是这样的：此行有多个标记 - 'mc' 未在此范围内声明 - 符号 'mc' 无法解析 - 方法 'listAll' 无法

另外，我尝试声明`MovieCollection mc`为私有实例变量；变化不大

发现问题：我想让每种方法都作为`Menu::displaysub1()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T21:01:39.013

```
void displaysub1(){
        mc.listAll();
    // This is the bit that gives me the "out of scope" error
    } 
```

`mc`是本地的`Menu::displayTopMenu()`，以及您的构造函数。如果您需要在该方法之外访问它，则需要在更高的范围内声明它，可能最好作为实例变量。

另请注意，`displaysub1()`它不是成员函数（但应该是，我认为这可能只是一个错误），因此它仍然无法访问您的类的成员变量。如果它需要访问它们，则必须将其作为参数传递（或设为`mc`静态，但我认为没有理由这样做）。

```
class Menu {
public:
    Menu() : mc("Collection.txt") { }
private:
    // each instance gets a copy of this 
    // variable.  I can be accessed anywhere
    // within the class and is initialized
    // in the contructor's initialization list.
    MovieCollection mc;
}; 
```

* * *

进一步阅读：[C++ 中的变量范围/生命周期](http://courses.cs.vt.edu/~cs1044/spring01/cstruble/notes/12.scope.pdf)。

# c# - Overriding without "override"/"new" not causing an error

> ID：12441553
> 
> 赞同：2
> 
> 时间：2012-09-15T20:57:26.880
> 
> 标签：c#

I've just read that when you define a method in a derived class that has the same name as a method described in a base class, you should get the error: "*please add the 'override' or 'new' keyword*". But despite me trying to cause it to do so by the code below, everything seems to be OK.

I'd like to know why? I use Visual Studio 2010.

```
class Base
{
  public void Method()
  {
    Console.WriteLine("Base class");
  }
}

class Child : Base
{
  public void Method()
  {
    Console.WriteLine("Child class");
  }
}

static void Main(string[] args)
{
  Base myBase = new Base();
  Child myChild = new Child();
  myBase.Method();
  myChild.Method();
} 
```

The output I'm getting is as follows.

> Base class
> 
> Child class

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:02:27.827

They're simply two different methods that happen to have the same name. Which method is bound at compile time depends on the type the compiler sees in any given context.

Note that if this were a compile-time or run-time errors, then library developers could break consuming code simply by adding a new method to a shared base class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T21:02:34.730

You don't get an error, you get a compile time warning.

[Here is the MSDN documentation that explains it all.](http://msdn.microsoft.com/en-us/library/ms173153%28v=vs.110%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T21:08:32.477

It isn't an error, it's a warning.

See CS0108: [http://msdn.microsoft.com/en-us/library/3s8070fc.aspx](http://msdn.microsoft.com/en-us/library/3s8070fc.aspx)

If you want to treat it as an error, you can go to your project's properties, build tab, treat warnings as errors, and check specific warning while putting 108 into the box.

# php - 如何比较当前日期和mysql日期？

> ID：12441556
> 
> 赞同：1
> 
> 时间：2012-09-15T20:58:00.933
> 
> 标签：php, mysql

我试图通过匹配当前日期来显示当前生日。Mysql 日期格式是 1990 年 9 月 16 日，所以我从当前日期修剪了年份并回显 16 Sep，现在如何回显，如果当前日期等于行中的日期。我尝试了下面的方法，这是一个错误。

```
$timezone = new DateTimeZone("Asia/Kolkata" );
$date = new DateTime();
$date->setTimezone($timezone );
$date2= $date->format( 'd M' );
$date4=date('d M', strtotime($date2));

<?php $sel = $db->query("select * from mov_birthday where date('d M', strtotime(dateofb)) == '$date4' order by dateofb"); 

while($row=mysql_fetch_array($sel)){

echo ($row['name']); } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:09:11.717

您可以使用`like`：

```
// this will select every date that starts with date('d M') - day Month
$timezone = new DateTimeZone("Asia/Kolkata" );
$date = new DateTime();
$date->setTimezone($timezone);
$dateFormat = $date->format( 'd F' );
$sel = $db->query("SELECT * FROM `mov_birthday` where `dateofb` LIKE '".$dateFormat."%' ORDER BY `dateofb`");
while($row = $sel->fetch(PDO::FETCH_ASSOC)) {
    echo $row['name'];
} 
```

# php - Zend Framework 2 如何对 Doctrine 2 实体进行单元测试

> ID：12441557
> 
> 赞同：1
> 
> 时间：2012-09-15T20:58:29.857
> 
> 标签：php, doctrine-orm, zend-framework2, phpunit

所以我在 Zend Framework 中使用 Doctrine 2 模块。我让我的控制器内的一切正常工作。我可以：

```
use ModuleName\Entity\User; 
```

然后在控制器动作中：

```
$user = new User;
$user->username = 'john.doe';
$user->password = md5('password');
$this->_getEntityManager()->persist($user);
$this->_getEntityManager()->flush(); 
```

它工作正常。在数据库中创建一个新行。

当我在单元测试中尝试同样的事情时，我得到：

```
class_parents(): Class User does not exist and could not be loaded
/Users/richardknop/Projects/myproject/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php:40
/Users/richardknop/Projects/myproject/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/AbstractClassMetadataFactory.php:257 
```

有任何想法吗？我对我的单元测试使用与我的应用程序相同的引导程序。在单元测试中，我扩展了 PHPUnit_Framework_TestCase。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T12:52:03.653

我像这样引导我的测试：

我有测试套件设置`module/Something/tests`

**运行-tests.php**

```
#!/usr/bin/env php
<?php

chdir(__DIR__);
$paths = array();
if ($argc > 1) {
    foreach ($argv as $key => $path) {

        if (!$key) continue;
        system('phpunit -c '. __DIR__ . DIRECTORY_SEPARATOR . 'phpunit.xml '. __DIR__ . DIRECTORY_SEPARATOR . $path, $result);
        echo $result;
    }

} else {

    system('phpunit -c '. __DIR__ . DIRECTORY_SEPARATOR . 'phpunit.xml '. __DIR__, $result);
    echo $result;
} 
```

** phpunit.xml

```
<phpunit
    bootstrap="./Bootstrap.php"
    backupGlobals="false"
    backupStaticAttributes="false"
    cacheTokens="true"
    colors="true"
    convertErrorsToExceptions="true"
    convertNoticesToExceptions="true"
    convertWarningsToExceptions="true"
    forceCoversAnnotation="false"
    mapTestClassNameToCoveredClassName="false"
    processIsolation="false"
    stopOnError="false"
    stopOnFailure="false"
    stopOnIncomplete="false"
    stopOnSkipped="false"
    strict="false"
    verbose="true"
>
    <testsuites>
        <testsuite name="Module Test Suite">
            <directory>./</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

**测试配置.php**

```
<?php

return array(
    'output_buffering' => false, // required for testing sessions
    'modules' => array(
        //'DoctrineModule',
        //'DoctrineORMModule',
        'Base',
    ),
    'module_listener_options' => array(
        'config_glob_paths' => array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            './module',
            './vendor',
        ),
    ),
); 
```

**Boostrap.php**

```
<?php

use Zend\ServiceManager\ServiceManager;
use Zend\Mvc\MvcEvent;
use Zend\Mvc\Service\ServiceManagerConfig;
use BaseModuleTest\TestCase;

error_reporting( E_ALL | E_STRICT );
chdir(__DIR__);

$configuration = @include __DIR__ . '/TestConfiguration.php';
if (isset($configuration['output_buffering']) && $configuration['output_buffering']) {

    ob_start(); // required to test sessions
}

spl_autoload_register('loadTestClass', true, false);
function loadTestClass($classname) {

    $file = __DIR__ . DIRECTORY_SEPARATOR . str_replace('\\', DIRECTORY_SEPARATOR, $classname) . '.php';
    if (is_file($file) && is_readable($file)) {

        require_once $file;
    }
}

$previousDir = '.';
while (!file_exists('config/application.config.php')) {
    $dir = dirname(getcwd());

    if ($previousDir === $dir) {
        throw new RuntimeException(
            'Unable to locate "config/application.config.php":'
                . ' is DoctrineORMModule in a sub-directory of your application skeleton?'
        );
    }

    $previousDir = $dir;
    chdir($dir);
}

/////////////////////////////////////////////////////////////

require './module/Base/src/functions.php';

if  (!@include_once 'vendor/autoload.php') {
    throw new RuntimeException('vendor/autoload.php could not be found. Did you run `php composer.phar install`?');
}

$serviceManager = new ServiceManager(new ServiceManagerConfig(
    isset($configuration['service_manager']) ? $configuration['service_manager'] : array()
));
$serviceManager->setService('ApplicationConfig', $configuration);
$serviceManager->setFactory('ServiceListener', 'Zend\Mvc\Service\ServiceListenerFactory');

/** @var $moduleManager \Zend\ModuleManager\ModuleManager */
$moduleManager = $serviceManager->get('ModuleManager');
$moduleManager->loadModules();
$serviceManager->setAllowOverride(true);

$application = $serviceManager->get('Application');
$event  = new MvcEvent();
$event->setTarget($application);
$event->setApplication($application)
    ->setRequest($application->getRequest())
    ->setResponse($application->getResponse())
    ->setRouter($serviceManager->get('Router')); 
```

# android - 编辑类型时间的解决方法，显示没有冒号的键盘

> ID：12441558
> 
> 赞同：2
> 
> 时间：2012-09-15T20:58:35.190
> 
> 标签：android, android-softkeyboard

我需要让用户以格式输入时间`hh:mm`，但由于[问题 28132](http://code.google.com/p/android/issues/detail?id=28132)我无法使用

```
<EditText ... android:inputType="time"> 
```

我以为我会接受任何分隔符，例如`hh mm`or之类的东西`hh.mm`，但也不能输入这样的字符（合乎逻辑，因为它们不属于时间；冒号可以，但键盘上缺少）。将类型更改为`text`会起作用，但文本键盘不适合打字。

所以我想在编辑开始之前删除冒号并在编辑结束时将其放回，但我不知道如何识别这些事件。`addTextChangedListener`允许跟踪所有细粒度的更改，但我认为在编辑文本*期间*更改文本没有意义，我宁愿需要像`editStarts`and之类`editEnds`的事件，对应于显示和隐藏键盘。*他们是这样的事件吗？*

您会推荐什么解决此错误的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:08:48.343

您应该为 TextView 使用[InputFilter](http://developer.android.com/reference/android/text/InputFilter.html)并验证输入是否为 Time 类型。

因为 TimeKeyListener 也实现了一个 InputFilter。

你可能会使用

```
 TextView.setInputFilter({new TimeKeyListener()}); 
```

编辑：或者你甚至可以自定义时间键监听器**。**作为公认的角色

```
 edittext.setKeyListener(new TimeKeyListener() {
        public final char[] CHARS = new char[] {
                '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'm', 'p', ':', '.'
        };

        @Override
        protected char[] getAcceptedChars() {
            return CHARS;
        }
    }); 
```

* * *

现在用冒号替换备用分隔符（点）也很容易，如下所示：

```
public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
    final CharSequence superSource = super.filter(source, start, end, dest, dstart, dend);
    final CharSequence prefilteredSource = superSource!=null ? superSource : source;
    return prefilteredSource.toString().replace('.', ':');
} 
```

# authentication - Integrating Swift and Keystone

> ID：12441561
> 
> 赞同：3
> 
> 时间：2012-09-15T20:58:58.750
> 
> 标签：authentication, token, openstack, openstack-swift, keystone

I have swift-proxy and keystone installed in a multi-node environment.

When I try to curl for a token, keystone returns the token successfully

```
curl -d '{"auth":{"passwordCredentials":{"username": "swift", "password": "swift"}}}' -H "Content-type: application/json" http://host_ip:35357/v2.0/tokens 
```

returns successfully with

```
{"access": {"token": {"expires": "2012-09-16T20:50:45Z", "id": "43ffcfed72a441e69c12c53b82cd4017"}, "serviceCatalog": {}, "user": {"username": "swift", "roles_links": [], "id": "090faedcf3e641ec9ad39babbc68bc8f", "roles": [], "name": "swift"}}} 
```

When I try running some swift commands, the command just hangs and does not return.

```
swift -V 2 -A http://host_ip:5000/v2.0 -U service:swift -K swift stat 
```

I see the following log in the keystone logs

```
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] ******************** REQUEST ENVIRON ********************
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] SCRIPT_NAME = /v2.0
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] webob.adhoc_attrs = {'response': <Response at 0x20a66d0 200 OK>}
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] REQUEST_METHOD = POST
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] PATH_INFO = /tokens
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] SERVER_PROTOCOL = HTTP/1.0
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] CONTENT_LENGTH = 102
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] eventlet.posthooks = []
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] RAW_PATH_INFO = /v2.0/tokens
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] REMOTE_ADDR = swift_proxy_ip
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] eventlet.input = <eventlet.wsgi.Input object at 0x207ee10>
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] wsgi.url_scheme = http
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] SERVER_PORT = 5000
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] wsgi.input = <cStringIO.StringI object at 0x22349f0>
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] openstack.context = {'token_id': None, 'is_admin': False}
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] HTTP_HOST = keystone_host_ip:5000
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] wsgi.multithread = True
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] openstack.params = {u'auth': {u'tenantName': u'service', u'passwordCredentials': {u'username': u'swift', u'password': u'swift'}}}
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] wsgi.version = (1, 0)
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] SERVER_NAME = swift_proxy_ip
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] GATEWAY_INTERFACE = CGI/1.1
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] wsgi.run_once = False
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] wsgi.errors = <open file '<stderr>', mode 'w' at 0x7f2a86a3e1e0>
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] wsgi.multiprocess = False
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] webob.is_body_seekable = True
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] CONTENT_TYPE = application/json
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] HTTP_ACCEPT_ENCODING = identity
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] 
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] ******************** REQUEST BODY ********************
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] {"auth": {"tenantName": "service", "passwordCredentials": {"username": "swift", "password": "swift"}}}
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] 
2012-09-15 23:54:09    DEBUG [routes.middleware] Matched POST /tokens
2012-09-15 23:54:09    DEBUG [routes.middleware] Route path: '{path_info:.*}', defaults: {'controller': <keystone.service.PublicRouter object at 0x1d29a10>}
2012-09-15 23:54:09    DEBUG [routes.middleware] Match dict: {'controller': <keystone.service.PublicRouter object at 0x1d29a10>, 'path_info': '/tokens'}
2012-09-15 23:54:09    DEBUG [routes.middleware] Matched POST /tokens
2012-09-15 23:54:09    DEBUG [routes.middleware] Route path: '/tokens', defaults: {'action': u'authenticate', 'controller': <keystone.service.TokenController object at 0x1d29b50>}
2012-09-15 23:54:09    DEBUG [routes.middleware] Match dict: {'action': u'authenticate', 'controller': <keystone.service.TokenController object at 0x1d29b50>}
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] arg_dict: {}
2012-09-15 23:54:09    DEBUG [root] TOKEN_REF {'id': 'e7846e13518f46f192d89216f4c1a79f', 'expires': datetime.datetime(2012, 9, 16, 20, 54, 9, 786881), 'user': {u'tenantId': u'dfb8e05385a6481892f259c7ea72df02', u'enabled': True, u'email': u'test@email.com', 'name': u'swift', 'id': u'090faedcf3e641ec9ad39babbc68bc8f'}, 'tenant': {u'description': None, u'enabled': True, 'id': u'dfb8e05385a6481892f259c7ea72df02', 'name': u'service'}, 'metadata': {u'roles': [u'b54e958ad08f4585885a325fcaa773e5', u'4f3ae4562e424dcfa9542b1794637f4a']}}
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] ******************** RESPONSE HEADERS ********************
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] Content-Type = application/json
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] Vary = X-Auth-Token
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] Content-Length = 789
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] 
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] ******************** RESPONSE BODY ********************
2012-09-15 23:54:09    DEBUG [keystone.common.wsgi] {"access": {"token": {"expires": "2012-09-16T20:54:09Z", "id": "e7846e13518f46f192d89216f4c1a79f", "tenant": {"description": null, "enabled": true, "id": "dfb8e05385a6481892f259c7ea72df02", "name": "service"}}, "serviceCatalog": [{"endpoints": [{"adminURL": "http://swift_proxy_ip:8080", "region": "RegionOne", "internalURL": "http://swift_proxy_ip:8080/v1/AUTH_dfb8e05385a6481892f259c7ea72df02", "publicURL": "http://swift_proxy_ip:8080/v1/AUTH_dfb8e05385a6481892f259c7ea72df02"}], "endpoints_links": [], "type": "object-store", "name": "swift"}], "user": {"username": "swift", "roles_links": [], "id": "090faedcf3e641ec9ad39babbc68bc8f", "roles": [{"id": "b54e958ad08f4585885a325fcaa773e5", "name": "Member"}, {"id": "4f3ae4562e424dcfa9542b1794637f4a", "name": "admin"}], "name": "swift"}}}
2012-09-15 23:54:09    DEBUG [eventlet.wsgi.server] host_ip - - [15/Sep/2012 23:54:09] "POST /v2.0/tokens HTTP/1.1" 200 918 0.059865 
```

Is there something I am missing in the command ? I notice similar behavior for the following commands too - when I try to upload files to a container and list them

```
swift -V 2 -A http://keystone_host_ip:5000/v2.0 -U service:swift -K swift upload myfiles test.txt

swift -V 2 -A http://keystone_host_ip:5000/v2.0 -U service:swift -K swift list myfiles 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:04:27.553

根据您的请求，我猜您正在尝试连接到租户名称服务。但是，从响应中带有 curl 的令牌中，必须有关于租户信息和端点的信息。您必须使用以下命令为服务租户添加端点。

```
keystone --token {admin_token} --endpoint http://keystone_host:35357/v2.0 endpoint-create --region RegionOne --service_id={id of storage service}  --publicurl=http://proxy_host:8080/v1/AUTH_{tenant-id} --internalurl=http://proxy_host:8080/v1/AUTH_{tenant-id} --adminurl=http://proxy_host:8080 
```

在此之前，您必须在 keystone 上为 swift 定义一个服务。您可以查看文档以获取更多信息，与以前的版本相比，它们已经改进了很多。

[http://docs.openstack.org/essex/openstack-compute/install/apt/content/](http://docs.openstack.org/essex/openstack-compute/install/apt/content/)

# android - Android Application Crashing

> ID：12441562
> 
> 赞同：0
> 
> 时间：2012-09-15T20:59:07.010
> 
> 标签：android

I'm trying to make my application start another class.

What im trying to learn is how to get another class to run in the background - like if the user opens the application, the application stays running.

I thought if I could try to open another class by using an intent, it would work. When i run my application on the emulator, it just crashes...

Here is the opening:

```
package omg.justry;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
    //super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_main);
    public void onCreate(Bundle savedInstanceState) {
        Intent openStartingPoint = new Intent("omg.justtry.PartF**king2");
        startActivity(openStartingPoint);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

Here is the **"PartF**king2"** class:

```
package omg.justry;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.widget.Toast;

public class PartF**king2 extends Activity{
public void onCreate(Bundle savedInstanceState) {
    Context context = getApplicationContext();
    CharSequence text = "Hello toast!";
    int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(context, text, duration);
    toast.show();
}
    } 
```

The thing is, Eclipse doesn't show any errors. I just exported the app and installed it to the emulator using adb.

I also added the class to the **AndroidManifest** as you see here:

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="omg.justry"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
    android:name=".MainActivity"
    android:label="@string/title_activity_main" >
    <intent-filter>
    <action android:name="android.intent.action.MAIN" />

    <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    </activity>
    <activity android:name="PartF**king2"></activity>
</application> 
```

I think its the manifest now that I look at it but whatever i do, it gets an error or crashes with Eclipse not explaining anything.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:11:35.050

在每个类中，您的`onCreate(Bundle savedInstanceState)`方法必须包含

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main); 
```

超级是绝对强制性的，setContentView 定义了您的活动的布局。

并且 Activity 不能“在后台运行”。从阅读一些 Android 教程开始，您将获得一些关于该做什么的线索。

# sql - SQL Server 2008 R2 Express 删除输出文件中的页脚

> ID：12441563
> 
> 赞同：0
> 
> 时间：2012-09-15T20:59:14.793
> 
> 标签：sql, sql-server, ssms

我正在使用`SQL Server SSMS`将查询输出到以空格分隔的文本文件。它工作正常，但有一个例外。在文件的底部，它会打印一条消息，说明它打印了多少行，就像将查询路由到结果网格时一样`SSMS`：

```
 id         sales       region
 001          100,000       North
 001          100,000       North
 001          100,000       North
 001          100,000       North
 001          100,000       North
 ...             ...         ...

(78482 row(s) affected) 
```

这是一个问题，因为有多个文件并且它们被读入另一个程序，此消息会导致错误。

我已经查看了输出和查询选项，但没有看到任何解决此问题的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T21:02:51.637

[`set nocount on`](http://msdn.microsoft.com/en-us/library/ms189837.aspx)在查询/输入文件的开头。

> 停止显示受 Transact-SQL 语句或存储过程影响的行数的消息作为结果集的一部分返回。

# unit-testing - 单元测试检查空值

> ID：12441565
> 
> 赞同：5
> 
> 时间：2012-09-15T20:59:17.673
> 
> 标签：unit-testing, mstest

这是一个非常基本的问题，但我仍然找不到合适的答案。在我的测试中，可能会有空值，因此最后一个阶段（Act）开始看起来有点奇怪（它不再只是 Act）。我的意思是：

```
Assert.IsNotNull(variable);

var newVariable = variable.Property;
Assert.IsNotNull(newVariable);

var finalVariable = newVariable.AnotherProperty;
Assert.AreEqual(3, finalVariable.Count); 
```

现在它们显然是相关的，我必须确保这些值不为空，而且在一个测试中也有三个断言，并且行为部分开始看起来不正确。

那么在这种情况下，一般的解决方案是什么？有什么比 3 个测试更聪明的东西，每个测试一个断言并在最后 2 个断言之前检查 null 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T22:49:28.397

基本上有两种方法可以处理您的问题：

1.  [Guard assertions](https://stackoverflow.com/a/1021037/343266)：额外的断言确保数据在正确的测试发生之前处于已知状态（这就是你现在正在做的事情）。
2.  将*守卫断言*转移到他们自己的测试中。

选择哪个选项很大程度上取决于被测代码。如果先决条件会在其他测试中重复，这是单独测试方法的提示。如果前提条件在生产代码中有所反映，则再次提示单独的测试方法。

另一方面，如果这只是您为了增强信心而做的事情，那么单独的测试可能太多了（但正如其他答案中所述，这可能表明您无法完全控制您的测试，或者您一次重新测试太多东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T21:09:12.497

我认为您应该将此测试拆分为三个测试，并根据发生的情况对它们进行命名。即使您在这些测试中的行为相同，这也是非常明智的，您通过检查方法的返回值来测试不同的场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T21:10:07.303

无效是皇家的痛苦。问题是，它们可以合法存在吗？

让我们将讨论分为代码和测试。

如果 null 不应该存在，那么代码本身，而不是测试，应该检查并验证它们不为 null。出于这个原因，我的代码的每个方法都是使用检查参数的片段构建的：

```
 public VideoPosition(FrameRate theFrameRate, TimeSpan theAirTime)
    {

        Logger.LogMethod("theVideoMovie", theFrameRate, "theAirTime", theAirTime);
        try
        {
            #region VerifyInputs

            Validator.Verify(theFrameRate);
            Validator.Verify(theAirTime);
            Validator.VerifyTrue(theAirTime.Ticks >= 0, "theAirTime.Ticks >= 0"); 
```

如果 null 在代码中是合法的，但您正在测试返回值不应为 null 的场景，那么您当然必须在测试代码中验证这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T21:11:29.860

在您的单元测试中，您应该能够控制被测类的每个输入。这意味着您可以控制变量是否具有值。

因此，您将有一个单元测试强制您的变量为空，然后断言这一点。

然后，您将进行另一个测试，您可以确定您的变量有一个值，并且您完全需要其他断言。

我前段时间写了一篇关于这个的博客。也许它可以提供帮助：[单元测试，地狱还是天堂？](http://wouterdekort.blogspot.nl/2012/03/unit-testing-hell-or-heaven.html)

# asp.net - Efficient Server side paging with EntityFramework Complex type

> ID：12441573
> 
> 赞同：0
> 
> 时间：2012-09-15T21:01:43.827
> 
> 标签：asp.net, entity-framework-4

I came accross with this link [http://www.dbtutorials.com/display/linq-to-sql-paging-cs.aspx](http://www.dbtutorials.com/display/linq-to-sql-paging-cs.aspx)

which has e.g. of efficient server side paging in LINQ but i want to do same thing with Entity Framework but with Complex type is it possible ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:11:03.620

`Skip`是的，您仍然可以使用`Take`LINQ to Entities 提供程序，这些将在服务器上执行。您还应该研究[PagedList](https://github.com/TroyGoode/PagedList)，它使您的事情变得更容易。

# c - Declaring a variable of type t in a macro in C

> ID：12441576
> 
> 赞同：1
> 
> 时间：2012-09-15T21:02:10.730
> 
> 标签：c, types, macros

I need to define a macro in C that does the following.

`swap_m(t,x,y)` interchanges the two arguments `x`, `y` of type `t`.

I'm not really sure how to set `x` and `y` to type `t`. It could be really simple, but I'm new to C and not really sure how to do this.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T21:06:39.300

尝试

```
#define SWAP(x, y, t) \
    do {
        t __temp = x;
        x = y;
        y = __temp;
    } while (0) 
```

用于

```
int a = 1, b = 2;
SWAP(a, b, int); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T21:14:41.183

您可以利用 memcpy 和 sizeof 运算符：

```
void __swap(void* a, void* b, size_t size)
{
    void* temp= malloc(size);
    memcpy(temp,a,size);
    memcpy(a,b,size);
    memcpy(b,temp,size);
    free(temp);
}

#define swap(a,b) __swap(&a,&b,sizeof(a)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T21:07:33.950

您只需将类型传递为`t`，例如`swap_m(int, x, y)`。

`t`然后你可以在你的宏中定义一个类型的变量：

```
#define swap_m(TYPE, X, Y)    do { TYPE ___tmp = X; X = Y; Y = ___tmp; } while(0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T23:29:39.133

`#define SWAP(a,b) { __typeof__(a) temp; temp = a; a = b; b = temp; }`

就像在： http: [//publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp ?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Ftypeof_operator.htm](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Ftypeof_operator.htm)

# python - Python insert via psycopg2 into postgresql failing

> ID：12441583
> 
> 赞同：0
> 
> 时间：2012-09-15T21:02:40.897
> 
> 标签：python, postgresql, psycopg2

I'm a noob so having trouble with inserting into Postgresql via psycopg2\. I have a file with lines such as:

```
42::Dead Presidents (1995)::Action|Crime|Drama
43::Restoration::Drama 
```

I'm trying to change those lines into insert statements via the following code:

```
import psycopg2

try:
   db = psycopg2.connect("dbname='db' user='postgres' host='localhost' password='password'")
   cur = db.cursor()
except:
   print("Unable to connect to the database.")

for line in open('./movies.dat'):
   (movie_id, movie_name, tags) = line.split('::')[0:3]
   ypos = movie_name.rfind('(')
   ypos2 = movie_name.rfind(')')
   if ypos < 0:
      cur.execute("insert into movies values (%s, %s, %s, null)", (movie_id, movie_name, tags))
   else:
      cur.execute("insert into movies values (%s, %s, %s, %s)", (movie_id, movie_name[0:ypos].strip(), tags, movie_name[ypos+1:ypos2].strip())) 
```

Unfortunately I get the error:

```
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
psycopg2.InternalError: current transaction is aborted, commands ignored until end of transaction block 
```

I have no idea why, or how to go about debugging the general error of psycopg2\. Anybody have any helpful ideas?

This is python 3.2.3 and postgresql 9.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:17:48.250

```
except:
    print("Unable to connect to the database.") 
```

您忽略了一个致命错误。你应该：

1.  打印更有用的错误消息（包含实际错误）
2.  停止执行（要么删除此 catch 语句并让异常向上传播，要么返回错误代码）。

# android - 如何为安卓应用添加样式

> ID：12441587
> 
> 赞同：5
> 
> 时间：2012-09-15T21:03:07.600
> 
> 标签：android, css, html, android-styles

我想知道如何为我的 android 应用程序添加样式。我在 Eclipse 上创建了一些应用程序，但它们都具有固定的样式。我想知道人们是如何设法创建可以从 GooglePlay 下载的那些花哨而酷炫的应用程序。我想知道是否有任何工具可以将样式应用于按钮、选项卡等，例如将 CSS 应用于 HTML。

我希望不要用这个问题打扰任何人，我很想知道该怎么做^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T04:35:44.387

我喜欢使用 PhoneGap ( [http://phonegap.com/](http://phonegap.com/) )，它可以让你用 HTML、CSS 和 JavaScript 编写整个应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-29T23:08:22.387

和薯条一起去。这是一个专门为 Android 设计的框架，它提供了所有花哨的按钮、标签等：http: [//jaunesarmiento.me/fries/](http://jaunesarmiento.me/fries/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-08T01:18:05.013

如果您想使用 CSS 语言为您的原生应用程序（Android 和 iOS）设置样式，我知道有两个选项：

1.  **FreeStyle**：前 Pixate，*免费*- [http://www.freestyle.org/](http://www.freestyle.org/)
2.  **NativeCSS**：*付费*- [https://nativecss.com/](https://nativecss.com/)

# c++ - Lua 访问表的键和值

> ID：12441593
> 
> 赞同：2
> 
> 时间：2012-09-15T21:03:51.280
> 
> 标签：c++, lua, lua-table

我想在关卡编辑器中读取 Lua 文件，以便以可视格式显示其数据供用户编辑。

如果我有这样的 Lua 表：

```
properties = {
  Speed = 10,
  TurnSpeed = 5
} 
```

`Speed`显然是关键和`10`价值。我知道如果我知道这样的键（假设表已经在堆栈上），我可以访问该值：

```
lua_pushstring(L, "Speed");
lua_gettable(L, idx); 
int Speed = lua_tointeger(L, -1);
lua_pop(L, 1); 
```

我想要做的是在 C++ 中访问密钥的名称和相应的值。这可以做到吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T21:41:57.253

这由[`lua_next`函数](http://www.lua.org/manual/5.1/manual.html#lua_next)覆盖，它遍历表的元素：

```
// table is in the stack at index 't'
lua_pushnil(L);  // first key
while (lua_next(L, t) != 0)
{
  // uses 'key' (at index -2) and 'value' (at index -1)
  printf("%s - %s\n", luaL_typename(L, -2), luaL_typename(L, -1));
  // removes 'value'; keeps 'key' for next iteration
  lua_pop(L, 1);
} 
```

`lua_next`表的键，嗯，键，所以你需要在迭代时将它保留在堆栈中。每次调用都会跳转到下一个键/值对。一旦它返回 0，那么你就完成了（当键被弹出时，下一个键没有被按下）。

Obviously adding or removing elements to a table you're iterating over can cause issues.

# r - 如何将 ggplot 旋转为横向？

> ID：12441594
> 
> 赞同：6
> 
> 时间：2012-09-15T21:03:55.213
> 
> 标签：r, knitr, ggplot2

我有一系列`ggplot`s 我想按如下所示排列并插入到通过`knitr`. 而不是一个非常小的肖像人物，我想把它旋转成横向，这样它就可以尽可能地填满页面。有任何想法吗？

```
library(ggplot2)
library(grid)
df <- data.frame(x = 1:100, y =rnorm(100))
plota <- ggplot(df, aes(x, y)) + geom_point(size = 4)

pushViewport(viewport(layout = grid.layout(3, 5)))
vplayout <- function(x, y) viewport(layout.pos.row = x, layout.pos.col = y) 
        print(plota, vp = vplayout(1:2, 1:2)) 
        print(plota, vp = vplayout(1, 3)) 
        print(plota, vp = vplayout(1, 4))
        print(plota, vp = vplayout(1, 5))
        print(plota, vp = vplayout(2, 3)) 
        print(plota, vp = vplayout(2, 4))
        print(plota, vp = vplayout(2, 5))
        print(plota, vp = vplayout(3, 1))
        print(plota, vp = vplayout(3, 2))
        print(plota, vp = vplayout(3, 3))
        print(plota, vp = vplayout(3, 4))
        print(plota, vp = vplayout(3, 5)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T00:52:15.553

在 LaTeX 中旋转图形很容易；您可以使用选项`angle=90`，如[http://yihui.name/knitr/options](http://yihui.name/knitr/options)中所述；请参阅下面的完整示例：

```
\documentclass{article}
\begin{document}

<<out.extra='angle=90'>>=
library(ggplot2)
library(grid)
df <- data.frame(x = 1:100, y =rnorm(100))
plota <- ggplot(df, aes(x, y)) + geom_point(size = 4)

pushViewport(viewport(layout = grid.layout(3, 5)))
vplayout <- function(x, y) viewport(layout.pos.row = x, layout.pos.col = y) 
        print(plota, vp = vplayout(1:2, 1:2)) 
        print(plota, vp = vplayout(1, 3)) 
        print(plota, vp = vplayout(1, 4))
        print(plota, vp = vplayout(1, 5))
        print(plota, vp = vplayout(2, 3)) 
        print(plota, vp = vplayout(2, 4))
        print(plota, vp = vplayout(2, 5))
        print(plota, vp = vplayout(3, 1))
        print(plota, vp = vplayout(3, 2))
        print(plota, vp = vplayout(3, 3))
        print(plota, vp = vplayout(3, 4))
        print(plota, vp = vplayout(3, 5))
@

\end{document} 
```

# c++ - C++ 函数指针类型与 Linux 和 VMS 上的候选不兼容

> ID：12441596
> 
> 赞同：0
> 
> 时间：2012-09-15T21:04:18.840
> 
> 标签：c++, linux, function-pointers, vms

这个问题与我的另一个问题有关- [boost::bind 返回一个函数对象，它是需要指针的函数的参数](https://stackoverflow.com/questions/12432556/boostbind-return-a-function-object-which-is-the-argument-for-a-function-that-r)

除了界面

```
bridge_set_pound_var_func 
```

不允许更改。

此外，`boost::function`或者`boost::bind`不能很好地与大型项目配合使用。

我的新代码如下：

```
#include <iostream>

class myA
{
 public:

 int bridge_set_pound_var_func(int (*fp)(const char *, char *, void *), void *arg)
 {
     void * b = NULL;
     int a = fp("this is poundVar", "ths is t1", b) ;
     std::cout << "bridge_set_pound_var_func is called "<< " , a is " << a << std::endl ;
     return 0;

 }

};

class myC
{
public:
myA *myOA;
int func(const char * poundVar , char * t1, void * t2);

int myCCall()
{
    myA myAO;
    myOA = &myAO;
    std::cout << "myCCall is called " << std::endl;

    myOA->bridge_set_pound_var_func( &myC::func, (void *)this );

    return 0;

 }

};

int myC::func(const char * poundVar , char * t1, void * t2)
{
 std::cout << "myC::func is called " << std::endl;
 return 1;

}

int main()
{
  myC myCO ;
  myC *m1p = &myCO ;
  m1p->myCCall() ;

  return 0 ;
}

// EOF 
```

Linux 上的错误：

```
 In member function 'int myC::myCCall()':

  error: no matching function for call to 'myA::bridge_set_pound_var_func(int (myC::*)(const char*, char*, void*), void*)'

  candidates are: int myA::bridge_set_pound_var_func(int (*)(const char*, char*, void*), void*) 
```

VMS 上的错误：

```
 In member function 'int myC::myCCall()':

 error: no matching function for call to 'myA::bridge_set_pound_var_func(int (myC::*)(const char*, char*, void*), void*)'

 candidates are: int myA::bridge_set_pound_var_func(int (*)(const char*, char*, void*), void*) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:19:27.430

简短的回答是：指向成员函数的指针**不是**指向函数的指针。前者需要知道他们被调用的对象，后者不需要。一种典型的做法是使用通常存在的“用户数据”`void*`来指向一个合适的基类，转换指针并调用相应的虚函数。在那里，您可以轻松地恢复必要的对象上下文。

# mercurial - 将 mercurial 存储库克隆到外部存储库

> ID：12441601
> 
> 赞同：0
> 
> 时间：2012-09-15T21:05:38.300
> 
> 标签：mercurial, backup, clone, commit

我有一个运行[RhodeCode](http://rhodecode.org/)的 mercurial 服务器，我将代码提交到该服务器。我的客户安装了[Redmine](http://www.redmine.org/)，并要求我为他们修改的代码存储在他们的服务器上（可以理解）。

我仍然想提交到 RhodeCode，并在成功提交后，自动将这些更改推送到他们的存储库。他们的代码在 SVN 存储库和 mercurial 存储库中都有。我可以承诺任何一个 - 他们处理两者之间的同步。我的假设是推送到 mercurial 存储库会更容易。

我有一个 changegroup 钩子，但我有一些关于它应该如何工作的技术问题。

但是，处理接收和推送到外部存储库的最佳方法是什么？

```
User ----> RhodeCode ----> Redmine 
```

在 RhodeCode 步骤/更改组挂钩处，我如何转发我的更改？我可以直接从主存储库执行此操作，还是被迫将其克隆到另一个目录并将其推*送到*客户端？

有没有更好的方法来维护我的主存储库并推送我的客户的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:24:21.893

我认为这没有问题；[Buildbot 中的 Mercurial 钩子是这样](http://buildbot.net/buildbot/docs/latest/manual/cfg-changesources.html#mercurial-hook)工作的，不是吗？

# android - 通过技能发送数据到其他安卓设备

> ID：12441603
> 
> 赞同：-1
> 
> 时间：2012-09-15T21:05:48.130
> 
> 标签：android, multiplayer

我正在尝试使用 Skiller SDK for android 平台制作多人游戏。我需要将一些数据从创建者发送给其他玩家。我尝试通过发送游戏设置字符串中的数据并从其他设备接收并处理它来做到这一点。问题是当我这样做时，我的字符串只发送了 50 个字符，而其他字符没有发送。所以我的问题是游戏设置字符串是否只允许发送 50 个字符？？？？以及如何在游戏开始时发送这个？请给我一些代码示例。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:37:53.197

我们将描述和设置字符串更新为最大长度为 250 个字符。请再次测试您的游戏。

欲了解更多信息，请查看我们的 wiki 页面：[wiki.skiller-games.com](http://wiki.skiller-games.com)

# java - 此代码如何在每三位数字前添加逗号？

> ID：12441605
> 
> 赞同：6
> 
> 时间：2012-09-15T21:06:04.633
> 
> 标签：java, math

帮助我理解这段代码是如何工作的。它本质上是将逗号添加到一串数字中。因此，如果用户键入 1 到 3 位数字，则它不会改变。对于四位数字，它添加一个逗号，所以

*   1111 变成 1,111
*   11111 变成 11,111
*   111111111 变为 11,111,111

等等。这是代码：

```
private String addCommasToNumericString (String digits)
{
    String result = "";
    int len = digits.length();
    int nDigits = 0;

    for (int i = len - 1; i >= 0; i--)                      
    {
        result = digits.charAt(i) + result;                 
        nDigits++;                                          
        if (((nDigits % 3) == 0) && (i > 0))                
        {
            result = "," + result;
        }
    }
    return (result);
} 
```

我会解释我*对它*的理解

该`for`循环主要计算用户写入的数字的长度，以避免在第一个数字之前放置逗号（例如，1111）。而 while`i`小于它减去的字符串的长度`1`。

`result`返回位置处的字符`i`，因为它向下计数，它从右向左返回“相反”的字符。

`nDigits``0`在循环的每次迭代中将1 from 加到 的初始值上。

我想现在是我无法确切看到发生了什么的地方：`if ("nDigits % 3) == 0`。

因此，对于通过循环的两次第一次迭代，它不会执行`if`循环，因为：

*   1 % 3 = 1
*   2 % 3 = 2
*   3 % 3 = 0

`nDigits`开始是`1`因为循环`nDigits++`内的代码`for`，那么它如何将逗号放在三位而不是两位之后？它如何知道只有 4 位或 5 位数字可以将逗号正确地放置在位置 1 和 2 (1,111 - 11,111) 上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T21:19:23.780

我认为解释这一点的最简单方法是在每次通过时减慢速度。

循环从字符串的末尾开始，所以如果你有字符串 12345，那么在第一次循环之后，结果将为“5”，nDigits 将为 1。

下一次，“4”将被添加到结果的前面，给你“45”，nDigits 将是 2。

第三次，它在结果前面添加“3”，使结果为“345”，然后 if-then 触发并在前面添加一个逗号。结果现在是“,345”。

更多通行证将为您提供“12,345”。

我认为让您感到困惑的是循环从“5”而不是“1”开始。一切都添加到结果的前面，而不是您通常期望的末尾。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T20:03:49.177

这个方法的关键是从右到左数数。如果你不这样做，它就行不通。

您也可以使用字符串操作而不是字符操作来执行相同的操作。也许它更容易理解，所以我将提供一个例子。

我的解决方案涉及使用 subString 方法，并以与您类似的方式操作。从右到左开始，它将原始字符串分成两个子字符串，并在每次有 3 位数字组时在它们之间添加一个逗号。

```
private String addCommas (String digits) {

    String result = digits;

    if (digits.length() <= 3) return digits; // If the original value has 3 digits or  less it returns that value

    for (int i = 0; i < (digits.length() – 1) / 3; i++) {

      int commaPos = digits.length() – 3 – (3 * i); // comma position in each cicle

      result = result.substring(0, commaPos) + "," + result.substring(commaPos);
    }
   return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T21:21:26.780

该变量`result`用于最终输出的增量构建，在每次迭代中，从左侧连接一个或两个字符（即从右到左构建字符串）。

*   每次通过运行连接一个字符

    ```
    result = digits.charAt(i) + result; 
    ```

    这是实际数字

*   第二个字符通过运行在每第三次迭代中连接

    ```
    result = "," + result; 
    ```

    它是订单分隔符

该实现根本不是最优的，因为在 Java 中字符串是不可变的，`result = "," + result;`最终会创建一个新对象。`StringBuffer`或对于`StringBuilder`此目的更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T21:17:27.900

```
for (int i = len - 1; i >= 0; i--) 
```

`i`以`len - 1`, 开头，从最后一位数字开始。`i > 0`in`if (((nDigits % 3) == 0) && (i > 0))`是在第一个数字之前避免逗号的那个（例如，1111）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T21:20:48.410

本质上，它的作用是从数字的最后一位开始并从右到左迭代，将它们添加到`result`字符串之前，并在每 3 个字符中放置一个逗号。

在这个特定的代码中，`len`保存数字的总长度，并且`nDigits`是已经评估了多少这些数字的计数。从位置`len-1`（即数字的最后一位数字的索引）开始，for 循环遍历位置 0（数字的第一位）。它获取 position 处的数字`i`，将其放在`result`字符串的前面，然后评估它前面是否应该有一个逗号。`nDigits % 3`将每 3 位返回 0，因此该`if`语句通过检查是否已写入 3 位并且您刚刚写入的数字不是 0 来评估是否应该有逗号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-12T13:53:07.943

为了我的目的，我修改了@Antonio Ricardo Diegues Silva 的答案。

```
/**
 * Get number in {@link String} with divider after 'n' number of digits
 * @param number number for processing
 * @param n amount after which will be inserted divider
 * @return {@link String} number with dividers
 */
public static <T extends Number> String insertDividerBetweenEveryNDigits(T number, int n, String divider) {
    StringBuilder builder = new StringBuilder().append(number);
    int digitsNumber = builder.length();
    if (digitsNumber > n) { // If the original value has n digits or less it just returns that value
        for (int i = 1; i <= (digitsNumber - 1) / n; i++) {
            int dividerPos = digitsNumber - (n * i); // divider position in each cycle
            builder.insert(dividerPos, divider);
        }
    }
    return builder.toString();
} 
```

# ruby-on-rails - 在 ruby -on-rails 中重定向 POST 请求会导致闪存哈希被清除

> ID：12441606
> 
> 赞同：1
> 
> 时间：2012-09-15T21:06:10.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, http, redirect

当尝试重定向 POST 请求时，我发现 rails 的 flash 散列被清除了。

当初始请求是 GET 时，重定向工作正常。

在 config/routes.rb

```
post 'test/hello' 
#get 'test/hello' #uncomment this line and comment out the post and the flash is preserved
get 'test/goodbye' 
```

在 app/controllers/test_controller.rb

```
def hello
    respond_to do |format|
        format.html do
            redirect_to movies_goodbye_url, :notice => "I disappear on post requests"
        end
    end
end

def goodbye
end 
```

在 app/views/test/goodbye.html.haml

```
%h1 Test#goodbye
%p#alert= alert
%p#notice= notice 
```

我希望此操作能够处理来自表单提交的帖子，这些帖子在错误情况下重定向到我现有的视图之一。我对 Rails 很陌生，所以如果有更好的方法来处理这个用例，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:01:55.677

尝试[`flash.keep`](http://rails.rubyonrails.org/classes/ActionController/Flash/FlashHash.html#M000311)在其中添加一个：

```
flash.keep(:notice)
redirect_to movies_goodbye_url, :notice => "I disappear on post requests" 
```

另请参阅：[重定向中的 Flash 消息不起作用](https://stackoverflow.com/questions/7426526/flash-message-in-redirect-not-working-rail3)

# android - 使用 Java 代码而不是 XML (Android) 在横向模式下更改文本

> ID：12441611
> 
> 赞同：0
> 
> 时间：2012-09-15T21:07:03.977
> 
> 标签：android

我完全用 java 代码编写了布局，因为它更方便。（我有很多`textViews`并且使用`for`语句更方便）。

但是，我的 TextViews 需要星期几并且在纵向模式下，我想将星期几缩短为简短的形式。例如，我希望“星期日”在纵向模式下显示“太阳”，而在横向模式下显示“星期日”。

我了解如何在 XML 文件中执行此操作，但如何在代码中执行此操作？

即示例代码：

```
LinearLayout parent = new LinearLayout(getApplicationContext());
parent.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
TextView example = new TextView;
example.setLayoutParams(mparams);
example.setText("Sunday"); //<--make this "Sun" when in portrait but "Sunday" in landscape
parent.addView(example); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:18:49.277

您可以在 Activity 类中覆盖**onConfigurationChanged()**方法，并且可以设置文本，当方向改变时，此方法将调用...希望对您有所帮助..:)

```
 @Override
       public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
            // Here you can set text **Sun**
        } else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            //Here you can set text **Sunday**
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T21:31:05.080

如果您的应用程序在移动到横向时重新启动，那么您可以定义需要在横向模式下扩展的字符串`values-land`

使用硬编码字符串从来都不是一个好主意。即使您以编程方式创建布局，也可以使用 strings.xml 来存储字符串

# django - 更新 Django 模板中的非请求用户信息并查看

> ID：12441614
> 
> 赞同：0
> 
> 时间：2012-09-15T21:07:45.127
> 
> 标签：django, django-templates, django-views

所以我有一个`ManageUserForm`forms.py——它可以正确呈现，但它没有从我试图编辑的用户那里提取正确的数据。

在模板中，我有一个正常工作的 for 循环

```
{% for tenants in tenants %}
{{ tenants.user }} {{ tenants.type }}
{% endfor %} 
```

此模板呈现 UserProfile 中的对象列表。它正确地做到了。我面临的挑战是更新“tenants.type”属性。同样，该类型显示正确，但我不知道如何从此模板页面更新它。

```
#views.py

def manage_users(request):
tenants = UserProfile.objects.all()

form = ManageUserForm(request.POST or None)

if form.is_valid():
    update = form.save(commit=False)
    update.save()

return render_to_response('manage_users.html', locals(), context_instance=RequestContext(request))

#forms.py

class ManageUserForm(forms.ModelForm):
     class Meta:
         model = UserProfile
         exclude = ('full_name', 'user',) 
```

`我想我需要调用一个实例，但我不知道如何为非请求用户这样做，并且仍然遵循模板的模式。模板基本上是一个用户列表，请求用户（员工用户）将能够更改列表中的数据。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:24:41.423

您有一个用户的一个表单。如果您想使用该表单来编辑多个租户，您需要一个 FormSet。编辑对象和显示它们是完全不同的野兽；不要混淆他们。

```
formset = modelformset_factory(form=ManageUserForm, queryset=tenants) 
```

* * *

更新：
您应该拥有一个`{{ form.management_form }}`和其余的`{% for form in formset %}{{ form }}{% endfor %}`合一`<form>`标签。您的所有表单都是表单集中的第一个表单。

您应该重写模板循环以遍历表单集表单而不是租户对象。租户对象可以通过`{{ form.instance }}`

* * *

更新 2：
您有一个额外的表单，因为您可能没有将`extra=0`参数传递给`modelformset_factory`函数。这些表格通常用于添加/编辑数据；因此它支持添加N个空白表格进行创建。

# java - 尝试在 Java 中创建双端队列时出现 Nullpointer 异常

> ID：12441615
> 
> 赞同：0
> 
> 时间：2012-09-15T21:07:46.883
> 
> 标签：java, nullpointerexception, deque, doubly-linked-list

我一直在尝试在 Java 中创建一个双端队列，但是当我添加一个新节点时出现空指针异常。这是我用于双向链表的辅助类：

```
private class Node {
    private Item item;
    private Node next;
    private Node prev;
} 
```

然后我将节点添加到列表的开头，如下所示：

```
 public void addFirst(Item item) {
    Node oldfirst = first;
    first = new Node();      
    first.prev = null;
    first.item = item;
    first.next = oldfirst;
    oldfirst.prev = first;        
    N++;
} 
```

我得到了一条`NullPointer`例外`oldfirst.prev = first;`。此外，当我编译代码时，我收到以下警告：

`Warning: The field Deque2<Item>.Node.prev is never read locally`

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:12:14.473

异常表示`oldfirst`为空。并且您将其初始化为`Node oldfirst = first`，因此这意味着它`first`为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T21:19:27.233

我的猜测是，当您的双端队列为空时，`first`为空。然后，当您分配`first`into时`oldFirst`，这将变为`oldFirst`null，因此尝试访问`prev`会给出 NPE。更改访问权限：

```
if (oldFirst != null)
    oldfirst.prev = first; 
```

应该修复它。

你的警告可能只是因为你还`prev`没有在你的双端队列中使用，你只是在设置它。有趣的事实：使用双端队列，您*不需要*双向链表，因此您的`prev`变量不太可能被使用。如果你还想在你的双端队列中支持排队（类似于如何[`LinkedList`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)实现`Deque`和`Queue`），那么你需要保留`prev`.

# c# - 在 Windows 8 中通过图像控件下载图像后如何在本地存储图像？

> ID：12441617
> 
> 赞同：0
> 
> 时间：2012-09-15T21:08:19.097
> 
> 标签：c#, windows-8, local-storage

我的 Windows 应用商店（又名 Windows 8）应用程序使用默认的网格应用程序模板来显示项目。那里的项目模板包括一个带有重叠文本信息的图像。为了减小应用程序的大小，我不会为每个项目存储图像，而是将具有绝对路径 (http) 的 Uri 保存到图像所在的网络服务器。我修改了标准模板以绑定到图像 Uri（我必须将 Uri 转换为字符串才能正常工作），现在每当我启动应用程序时，所有图像都会由 Image 控件自动下载和显示。

我现在想要的是自动保存曾经下载的图像并将下载图像的Uris修改为指向本地存储的图像。这里我遇到了两个问题：

*   如果我从`StandardStyles.xaml`

这是我的绑定`GroupedItemsPage.xaml`：

```
 <GridView
        x:Name="itemGridView"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"> 
```

绑定模板已修改为触发事件 ( `StandardStyles.xaml`)：

```
<DataTemplate x:Key="Standard250x250ItemTemplate">
            <Image Source="{Binding ImageUri}" ImageOpened="Image_ImageOpened"/>
</DataTemplate> 
```

事件`Image_ImageOpened`处理程序在代码隐藏文件 (`GroupedItemsPage.xaml.cs') 中定义，但从不触发：

```
 private void Image_ImageOpened(object sender, RoutedEventArgs e)
    {

    } 
```

*   我不知道如何将 Image 框架元素的内容存储为二进制文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T02:22:28.653

我还必须在本地复制一些 http 图像；这是我的工作代码。您应该使用 internetURI = "http://wherever-your-image-file-is" 和图像的唯一名称调用此方法。它将图像复制到 AppData 的 LocalFolder 存储中，然后返回新本地图像的路径，您可以将其用于绑定。希望这可以帮助！

```
 /// <summary>
    /// Copies an image from the internet (http protocol) locally to the AppData LocalFolder.  This is used by some methods 
    /// (like the SecondaryTile constructor) that do not support referencing images over http but can reference them using 
    /// the ms-appdata protocol.  
    /// </summary>
    /// <param name="internetUri">The path (URI) to the image on the internet</param>
    /// <param name="uniqueName">A unique name for the local file</param>
    /// <returns>Path to the image that has been copied locally</returns>
    private async Task<Uri> GetLocalImageAsync(string internetUri, string uniqueName)
    {
        if (string.IsNullOrEmpty(internetUri))
        {
            return null;
        }

        using (var response = await HttpWebRequest.CreateHttp(internetUri).GetResponseAsync())
        {
            using (var stream = response.GetResponseStream())
            {
                var desiredName = string.Format("{0}.jpg", uniqueName);
                var file = await ApplicationData.Current.LocalFolder.CreateFileAsync(desiredName, CreationCollisionOption.ReplaceExisting);

                using (var filestream = await file.OpenStreamForWriteAsync())
                {
                    await stream.CopyToAsync(filestream);
                    return new Uri(string.Format("ms-appdata:///local/{0}.jpg", uniqueName), UriKind.Absolute);
                }
            }
        }
    } 
```

# perl - 使用 Perl 在哈希中获取 git show-ref --tags 的输出

> ID：12441618
> 
> 赞同：1
> 
> 时间：2012-09-15T21:08:20.687
> 
> 标签：perl, git, hashmap

我得到 的输出 `git show-ref --tags`，如下所示：

```
1231243424324234234324242421412414121212 Tagname
1231341253432148224235423652423654782363 tagnametwo
2453491533961372624623247862387746223647 tagnamethree 
```

我想将这些值放在哈希中，这样提交 id 是键，标签名称是它的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T21:59:28.853

Since your incoming data is arranged as alternating keys and assoicated values, all you need to do is extract that list and assign it to a hash. The important thing is to get the patterns right.

## Defining the Patterns

Given that:

*   a git id is a sequence of hex digits matched by the pattern `\p{ahex}+`
*   its tag is a sequence of non-whitespace matched by the pattern `\S+`

You could do this to build up a hash mapping ids to tags:

```
my %id2tag = ();
my $data = `git show-ref --tags`;
while ( $data =~ / (\p{ASCII Hex Digit}+) \s+ (\S+) /gx ) {
    $id2tag{ $1 } = $2;
} 
```

## Named Groups

If you prefer named groups, support in Perl v5.10 or better, you could do it this way:

```
use v5.10;
my %id2tag = ();
my $data = `git show-ref --tags`;
while ( $data =~ / (?<ID> \p{ASCII Hex Digit}+ ) \s+ (?<TAG> \S+ ) /gx ) {
    $id2tag{ $+{ID} } = $+{TAG};
} 
```

## Interpolated Patterns

Or you could store the pattern in variables and interpolate them:

```
use v5.10;
my %id2tag = ();

my $id_rx  = qr/ (?<ID>  \p{ASCII Hex Digit} + ) /x;
my $tag_rx = qr/ (?<TAG> \S                  + ) /x;

my $data = `git show-ref --tags`;
while ( $data =~ / $id_rx \s+ $tag_rx /gx ) {
    $id2tag{ $+{ID} } = $+{TAG};
} 
```

That approach is more extensible, and for more complex patterns, more readable.

## Hash Assignment

Or you could do it all at once, since everything is already in the right order:

```
%id2tag = `git show-ref --tags` =~ / (\p{ASCII Hex Digit}+) \s+ (\S+) /gx; 
```

* * *

# A Real-world Demo

Here is an example of running this on some canned data I extracted from the current git repo for Perl itself.

```
my $data   = do { local $/; <DATA> };
my %id2tag = $data =~ /(\p{ahex}+)\s+(\S+)/gx;

for my $id (sort keys %id2tag) {
    print "$id $id2tag{$id}\n";
} 
```

```
__END__
da71581858ddfe0f74d9e276c5bbe888c75b6d7f refs/tags/GitLive-blead
c4fb1312746aed9e0b696326f3c2664a71284324 refs/tags/GitLive-maint-5.004
5c487ee4c7541fbfd48376965aaefc58ee92541e refs/tags/GitLive-maint-5.005
acb6b050e21c7f3a48affc353ed066777fc1bd0a refs/tags/GitLive-maint-5.10
e03dffa8c006bd53504464a288371e71419497fd refs/tags/GitLive-maint-5.6
9b4fcc40a6ef2b8882b7dda7568ac911f7718b0f refs/tags/GitLive-maint-5.8
790fbd2b1de809897ebacddb828652a3f1d75dd9 refs/tags/code-review/2009-07-22
8d063cd8450e59ea1c611a2f4f5a21059a2804f1 refs/tags/perl-1.0
112e33b1b18999ffceafcdafac4e1888f882dc74 refs/tags/perl-1.0.15
4f78c20b5e222c45328d0f7f30988dc4bbe99c1e refs/tags/perl-1.0.16
378cc40b38293ffc7298c6a7ed3cd740ad79be52 refs/tags/perl-2.0
ffd30a0b488495f48bc676c58309803860e1e715 refs/tags/perl-2.001
a687059cbaf2c6fdccb5e0fae2aee80ec15625a8 refs/tags/perl-3.000
27e2fb84680b9cc1db17238d5bf10b97626f477f refs/tags/perl-3.044
fe14fcc35f78a371a174a1d14256c2f35ae4262b refs/tags/perl-4.0.00
e334a159a5616cab575044bafaf68f75b7bb3a16 refs/tags/perl-4.0.36
a0d0e21ea6ea90a22318550944fe6cb09ae10cda refs/tags/perl-5.000
fec02dd38faf8f83471b031857d89cb76fea1ca0 refs/tags/perl-5.000o
748a93069b3d16374a9859d1456065dd3ae11394 refs/tags/perl-5.001
8e07c86ebc651fe92eb7e3b25f801f57cfb8dd6f refs/tags/perl-5.001n
a5ebd2dff0239f64f342318d01cd92dc19aa52c8 refs/tags/v5.13.9
6a69229c1ab56c42c6097e1a84993663bd6a23f3 refs/tags/v5.14.0
6ac2c00aba1f90aa074905caff75d24ac4224c79 refs/tags/v5.14.0-RC1
a944cabb82c555112be417b6fdcf2abeea9e2c90 refs/tags/v5.14.0-RC2
3a178b6f9ebcc27e659c48b690758c679fec5cc5 refs/tags/v5.14.0-RC3
cf28be8222b700a410ab05a0d7a770e029973b0c refs/tags/v5.14.1
0f687828d8e355bb557d0cf0d3b274cf08f6bae7 refs/tags/v5.14.1-RC1
6a56b9d83500deafe8d850e244906f5513cdd222 refs/tags/v5.14.2
8b560c3170c9c6e2263384868d0287017aecb59d refs/tags/v5.14.2-RC1
cc2b21d47cd66b31fa33901d19112160488dc7d7 refs/tags/v5.15.0
cbeacc71ada41500c888d4cbd36c7314a14843d1 refs/tags/v5.15.1
a818eb37604096e91a51fbb947af5754c7067235 refs/tags/v5.15.2
eaa96143a800c6dca466021db99e8fe857e9e1b1 refs/tags/v5.15.3
5f4091681272a7ec88e3fe7eb014a8083ed95c5f refs/tags/v5.15.4
424c2e57d9f2f65dc08ae9e0d8179f9aa5d581d9 refs/tags/v5.15.5
33a408b7de68c683fad755d341d7899ec1953216 refs/tags/v5.15.6
c605ae044d8a52e820eb785305f0fd4d271faf51 refs/tags/v5.15.7
9b30811fee3478af913382334909acde68afd36d refs/tags/v5.15.8
7b50a15ad488ff4d4f50c99b5e534ede59c2d4af refs/tags/v5.15.9
fb2f5b1704c64fe55da0a05bbc71480c98fe5aac refs/tags/v5.16.0
340c15b2c5103c00d84cd7f15a65ca6ad15a116d refs/tags/v5.16.0-RC1
adee78d52422370b60888092a0155e40cdade038 refs/tags/v5.16.0-RC2
b59ea6d0dab824ba97b3cd1cfc85b3d6e91aab63 refs/tags/v5.16.1
aca8d19feb348b88fde0b018584caa2f40790d69 refs/tags/v5.17.0
002fcd4de39f0355cb9158aca59103d1218836a5 refs/tags/v5.17.1
7ef87a62992c4ed1cad491f65a28ee406fe909e7 refs/tags/v5.17.2
1e37de6eef7be989cb0181b094452e0adbefe976 refs/tags/v5.17.3 
```

Prints out things like:

```
002fcd4de39f0355cb9158aca59103d1218836a5 refs/tags/v5.17.1
0f687828d8e355bb557d0cf0d3b274cf08f6bae7 refs/tags/v5.14.1-RC1
112e33b1b18999ffceafcdafac4e1888f882dc74 refs/tags/perl-1.0.15
1e37de6eef7be989cb0181b094452e0adbefe976 refs/tags/v5.17.3
27e2fb84680b9cc1db17238d5bf10b97626f477f refs/tags/perl-3.044
33a408b7de68c683fad755d341d7899ec1953216 refs/tags/v5.15.6
340c15b2c5103c00d84cd7f15a65ca6ad15a116d refs/tags/v5.16.0-RC1
378cc40b38293ffc7298c6a7ed3cd740ad79be52 refs/tags/perl-2.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T21:36:26.530

1) Get the output of the command

```
my $output = qx/git show-ref --tags/; 
```

2) Write a regular expresion and iterate on it:

```
my @RESULT;
while( $output =~ m!(\w+)\s*!g ) {
   push @RESULT, $1;
} 
```

3) Build your hash from array

```
my %MY_HASH = @RESULT; 
```

# jquery - 使用 slimscroll 插件滚动顶部

> ID：12441619
> 
> 赞同：10
> 
> 时间：2012-09-15T21:08:23.073
> 
> 标签：jquery, ajax

我`slimScroll`在我的网页上使用的内容是通过 AJAX 添加的。

如果我向下滚动滚动然后重新加载更多内容（AJAX 加载），滚动条本身始终保持与以前相同的位置。

我想知道`slimScroll`加载新内容后是否有任何可以调用以滚动到顶部的功能？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T23:04:12.533

我认为`scroll`@rochal 描述的选项现在不会起作用，因为它似乎没有被[GitHub 上的当前版本](https://github.com/rochal/jQuery-slimScroll/blob/master/jquery.slimscroll.js)使用。而是尝试`scrollTo`或`scrollBy`。

滚动到顶部：

```
$('#elem_id').slimScroll({ scrollTo : '0px' }); 
```

相反，如果你想滚动到底部，那么以下应该可以工作：

```
var scrollTo_val = $('#elem_id').prop('scrollHeight') + 'px';
$('#elem_id').slimScroll({ scrollTo : scrollTo_val }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T08:39:01.133

从 1.0.0 版本开始，如果您需要滚动到顶部，您可以使用内置**[scrollTo](http://rocha.la/jQuery-slimScroll)**方法：

`$(element).slimScroll({ scrollTo: '0' });`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-25T09:28:58.017

这段代码已经为我运行了。

```
var scrollTo_int = $('#elem_id').prop('scrollHeight') + 'px';
$('#elem_id').slimScroll({scrollTo : scrollTo_int }); 
```

这将在底部位置获取滚动条，并在 div 的底部获取内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-26T06:57:39.917

或者你可以使用javascript来解决这个问题......

```
document.getElementById("element-id").scrollTop = document.getElementById("element-id").scrollHeight; 
```

`element-id`是`id`您的内容区域的（通常是它的`div`）..

当新内容附加到您的`div`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-06T12:22:16.220

对我来说，作者@rochal 建议的答案不起作用，[`scrollTo`](https://stackoverflow.com/a/12445507/2126442)也不[`scroll`](https://github.com/rochal/jQuery-slimScroll/issues/29#issuecomment-8501328)是 slimScroll 配置参数：两者都滚动内容但不滚动句柄，其中一个甚至破坏了我的情况下的容器高度。

相反，这对我有用：

```
// let's assume the plugin was initialized with this class name present:
$('.slim-scroll').slimScroll(config);

// then this is the solution.
$('.slimScrollDiv.inQuestion').find('.slimScrollBar').css({ top: 0 }).end().find('.slim-scroll').get(0).scrollTop = 0;

// -----------------------------
// once more, with explanations:
$('.slimScrollDiv.inQuestion')        // this is the ‹div› wrapped around our .slim-scroll element by the plugin. It always has the 'slimScrollDiv' class name.

  .find('.slimScrollBar')             // first address the handle. The order is important because we're going to break the chain at the end.
    .css({ top: 0 })                  // 'scroll' it.
  .end()                              // stay in the jQuery chain; go back to the last jQuery collection before find().

  .find('.slim-scroll')               // address the content.
    .get(0)                           // leave jQuery terrain, get the DOM element.
      .scrollTop = 0                  // scroll it.
; 
```