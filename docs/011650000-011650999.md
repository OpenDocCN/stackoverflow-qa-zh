# StackOverflow 问答 11650000-11650999

# php - 小花 3.2\. 未找到表名

> ID：11650001
> 
> 赞同：1
> 
> 时间：2012-07-25T12:43:36.507
> 
> 标签：php, orm, kohana, kohana-3

我正在使用 kohana 3.2。我在让这个新模型工作时遇到了一些麻烦。有一个模型：`Model_User_Unavailability`它工作得很好，有一个模型`Model_User_Unavailability_Status`不能。

问题不是找到模型，而是使用它。我可以使用：创建状态`ORM::factory('user_unavailability_status');`，它工作得很好，但是当我想将状态添加到不可用性类时，它不起作用，我得到以下异常：

```
Incorrect table name '' [ INSERT INTO `` (`user_unavailability_id`, `status_id`) VALUES ('670', NULL) ] 
```

这些类看起来像这样：

```
class Model_User_Unavailability extends ORM
{
    protected $_belongs_to = array(
        'user' => array(),
    );
    protected $_table_name = 'user_unavailability';

    protected $_has_many = array(
        'status' => array(
            'model' => 'User_Unavailability_Status', 
            'foreign_key' => 'user_unavailability_id'
        )
    );
...etc 
```

­

```
class Model_User_Unavailability_Status extends ORM
{
    protected $_table_name = 'user_unavailability_status';
    protected $_belongs_to = array(
        'user_unavailability' => array(
            'foreign_key' => 'user_unavailability_id', 
            'model' => 'user_unavailability'
        )
    );
    etc... 
```

现在，当我尝试以下操作时出现异常：

```
$db = $user->unavailable->where('id', '=', $id)->find(); // Returns User_Unavailability object
//... do some other stuf...
$db->save();

if($db->loaded())
{
    $status = ORM::factory('user_unavailability_status');
    $status->status = 'requested';
    $status->responder_id = 1;
    $db->add('status',$status);
} 
```

正如您在前面的异常中看到的那样，它不会使用指定的表名。但是，当我从状态类中删除 $_table_name 变量时，我收到以下错误：

```
Table 'urenregistratie.user_unavailability_statuses' doesn't exist [ SHOW FULL COLUMNS FROM `user_unavailability_statuses` ] 
```

如您所见，它确实找到了模型，但找不到数据库表。所以我的问题是，这里发生了什么？我想我错过了一些东西，但我不知道是什么......

当我`$this->_table_names_plural = false`在状态模型中使用时也会发生同样的情况。

那么......有什么建议/想法吗？

**编辑：**

当我将`$db->add('status',$status);`行更改为：

```
$status->user_unavailability_id = $db->id;
$status->save(); 
```

虽然不漂亮，但仍然想知道是什么阻止我使用该`add`功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:54:51.190

`add()`用于[has_many“通过”](http://kohanaframework.org/3.2/guide/orm/relationships#hasmany-through)关系。

在您的情况下，您已经编写了正确的方法：

```
$status->user_unavailability_id = $db->id;
$status->save(); 
```

# java - Java 类型不匹配 - 无法从构造函数中的 int[][] 错误转换

> ID：11650002
> 
> 赞同：0
> 
> 时间：2012-07-25T12:43:36.513
> 
> 标签：java

我的构造函数是

```
public class Figure{
    int[][] x;
    Color y;
    public Figure(int[][] x , Color y){
        this.x=x;
        this.y=y;
    } 
```

我正在通过以下方式初始化对象：

```
Figure s = new Figure({{0,1,1},{1,1,0}},Color.ORANGE); 
```

收到以下错误：

类型不匹配 - 无法从 int[][] 转换为图形 令牌上的语法错误：错位的构造 应改为变量声明符

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T12:44:54.143

您必须像这样创建矩阵：

```
new Figure(new int[][]{{0,1,1}, {1,1,0}},Color.ORANGE); 
```

或者一种不太脏的方式：将矩阵构造分布在几行上：

```
int[][] matrix = new int[2][];
matrix[0] = new int[]{0,1,1};
matrix[1] = new int[]{1,1,0};

new Figure(matrix, Color.ORANGE); 
```

# phpunit - 是否可以在没有梨的情况下安装 PHPUnit？

> ID：11650004
> 
> 赞同：0
> 
> 时间：2012-07-25T12:43:50.443
> 
> 标签：phpunit

> **可能重复：**
> [PHP - 是否有 PHPUnit 的可移植版本？](https://stackoverflow.com/questions/4801183/php-is-there-a-portable-version-of-phpunit)

在 Red Hat Linux 机器上，没有 root 权限，所以不能使用 pear。

手动下载导致[https://github.com/sebastianbergmann/phpunit/](https://github.com/sebastianbergmann/phpunit/)，但这似乎是 Windows 版本，因为可执行文件是 phpunit.bat。

有没有办法在没有 PEAR 的情况下在 Linux 上安装 PHPUnit？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:15:56.367

我为此做了一个安装程序：[https ://github.com/kblomqvist/gitinstall-phpunit](https://github.com/kblomqvist/gitinstall-phpunit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:53:35.277

在同一页面的下方，它说明了如何从 git checkout 安装 PHPUnit：

[来自 git checkout 的 PHPUnit](https://github.com/sebastianbergmann/phpunit/#using-phpunit-from-a-git-checkout)

# linq-to-entities - 具有可空参数输入的 C# Lambda 表达式

> ID：11650005
> 
> 赞同：0
> 
> 时间：2012-07-25T12:43:53.020
> 
> 标签：linq-to-entities

在下面，model.Status 和 model.Source 值可能为空，也可能不为空。如果为 null，我希望表达式提取所有状态/来源。这对 lambda 是否可行，因为下面的语句不起作用？

```
var leads = db.CallCenterLead.Include("Profile").Include("Account")
.Where(x => x.DateSent >= model.DateFrom && x.DateSent <= model.DateTo 
&& ((model.Status != null && x.Status == model.Status) || (model.Status == null)) 
&& (model.Source != null && x.Source == model.Source)).OrderByDescending(x => x.DateSent).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:04:52.283

一种方法是使用扩展方法，如下所示：

```
var leads = db.CallCenterLead.Include("Profile").Include("Account")
    .Where(x => x.DateSent >= model.DateFrom && x.DateSent <= model.DateTo)
    .WhereIf(model.Status != null, x.Status == model.Status)
    .WhereIf(model.Source != null, x.Source == model.Source)
    .OrderByDescending(x => x.DateSent).ToList(); 
```

扩展方法：

```
public static IQueryable<TSource> WhereIf<TSource>(this IQueryable<TSource> source, bool condition, Expression<Func<TSource, bool>> predicate)
{
    return condition ? source.Where(predicate) : source;
} 
```

如果条件为真，该方法添加谓词。否则，它只是按原样返回源。

# plone - 如何在zope页面模板中编写python代码

> ID：11650006
> 
> 赞同：0
> 
> 时间：2012-07-25T12:43:53.210
> 
> 标签：plone, zope, template-tal, zpt

我对 Zope 和 Plone 很陌生。我正在尝试在 index_html 页面中编写 python 代码。我有人员类型的对象列表，现在我想重新排序它们。所以，我之前有的是：

```
<ul tal:define="persons python: context.portal_catalog(portal_type='Person');">
<tal:listing repeat="p persons"> 
```

`<tal:listing`现在我在...之前有这个python代码

```
<?python
  order=[0,2,1]
  persons = [persons[i] for i in order]
?> 
```

但不知何故，这个人的顺序保持不变。另外，我也不喜欢这种在视图中编写 python 代码的方式。有什么办法可以使用此代码更改列表的顺序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:48:13.100

Zope 页面模板根本不支持`<? ?>`语法。

`tal:repeat`但是，您可以很好地遍历您的 python 列表：

```
<ul tal:define="persons python: context.portal_catalog(portal_type='Person');">
    <tal:listing repeat="i python:[0, 2, 1]">
        <li tal:define="p python:persons[i]" tal:content="p/name">Person name</li>
    </tal:listing>
</ul> 
```

但是，我怀疑您想让 portal_catalog 使用`sort_on`参数进行排序（请参阅[目录上的 Plone KB 文章](http://plone.org/documentation/manual/developer-manual/indexing-and-searching/querying-the-catalog/)）：

```
<ul tal:define="persons python: context.portal_catalog(portal_type='Person', sort_on='sortable_title');">
    <tal:listing repeat="p persons">
        <li tal:content="p/name">Person name</li>
    </tal:listing>
</ul> 
```

如果您想做更复杂的事情，请使用[浏览器视图](http://plone.org/documentation/manual/developer-manual/archetypes/appendix-practicals/b-org-creating-content-types-the-plone-2.5-way/zope-3-views)为您进行列表按摩。

# java - 在 JSch 中使用 ChannelSftp 传输文件夹和子文件夹？

> ID：11650013
> 
> 赞同：6
> 
> 时间：2012-07-25T12:44:02.920
> 
> 标签：java, sftp, jsch

我想使用 JSch 传输文件夹和子文件夹`ChannelSftp`。我可以使用命令成功传输文件，`channelsftp.put(src, dest)`但这不适用于文件夹（至少我无法使其工作）。那么有人可以解释我如何使用传输文件夹和子文件夹`ChannelSftp`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-21T18:09:48.567

要在 jsch 中使用多级文件夹结构，您：

1.  输入它们；
2.  列出它们的内容；
3.  对每一个找到的项目做某事；
4.  如果找到子文件夹，请重复 1、2 和 3。

下载 JSCH 类中的 dirs 方法：

```
public void downloadDir(String sourcePath, String destPath) throws SftpException { // With subfolders and all files.
    // Create local folders if absent.
    try {
        new File(destPath).mkdirs();
    } catch (Exception e) {
        System.out.println("Error at : " + destPath);
    }
    sftpChannel.lcd(destPath);

    // Copy remote folders one by one.
    lsFolderCopy(sourcePath, destPath); // Separated because loops itself inside for subfolders.
}

private void lsFolderCopy(String sourcePath, String destPath) throws SftpException { // List source (remote, sftp) directory and create a local copy of it - method for every single directory.
    Vector<ChannelSftp.LsEntry> list = sftpChannel.ls(sourcePath); // List source directory structure.
    for (ChannelSftp.LsEntry oListItem : list) { // Iterate objects in the list to get file/folder names.
        if (!oListItem.getAttrs().isDir()) { // If it is a file (not a directory).
            if (!(new File(destPath + "/" + oListItem.getFilename())).exists() || (oListItem.getAttrs().getMTime() > Long.valueOf(new File(destPath + "/" + oListItem.getFilename()).lastModified() / (long) 1000).intValue())) { // Download only if changed later.
                new File(destPath + "/" + oListItem.getFilename());
                sftpChannel.get(sourcePath + "/" + oListItem.getFilename(), destPath + "/" + oListItem.getFilename()); // Grab file from source ([source filename], [destination filename]).
            }
        } else if (!(".".equals(oListItem.getFilename()) || "..".equals(oListItem.getFilename()))) {
            new File(destPath + "/" + oListItem.getFilename()).mkdirs(); // Empty folder copy.
            lsFolderCopy(sourcePath + "/" + oListItem.getFilename(), destPath + "/" + oListItem.getFilename()); // Enter found folder on server to read its contents and create locally.
        }
    }
} 
```

在 JSCH 类中删除 dirs 方法：

```
try {
    sftpChannel.cd(dir);
    Vector<ChannelSftp.LsEntry> list = sftpChannel.ls(dir); // List source directory structure.
    for (ChannelSftp.LsEntry oListItem : list) { // Iterate objects in the list to get file/folder names.
        if (!oListItem.getAttrs().isDir()) { // If it is a file (not a directory).
            sftpChannel.rm(dir + "/" + oListItem.getFilename()); // Remove file.
        } else if (!(".".equals(oListItem.getFilename()) || "..".equals(oListItem.getFilename()))) { // If it is a subdir.
            try {
                sftpChannel.rmdir(dir + "/" + oListItem.getFilename());  // Try removing subdir.
            } catch (Exception e) { // If subdir is not empty and error occurs.
                lsFolderRemove(dir + "/" + oListItem.getFilename()); // Do lsFolderRemove on this subdir to enter it and clear its contents.
            }
        }
    }
    sftpChannel.rmdir(dir); // Finally remove the required dir.
} catch (SftpException sftpException) {
    System.out.println("Removing " + dir + " failed. It may be already deleted.");
} 
```

从外部调用这些方法，例如：

```
MyJSCHClass sftp = new MyJSCHClass();
sftp.removeDir("/mypublic/myfolders");
sftp.disconnect(); // Disconnecting is obligatory - otherwise changes on server can be discarded (e.g. loaded folder disappears). 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-28T15:26:50.977

根据我的理解，上面的代码（由zon）可以下载。我需要上传到远程服务器。我写了下面的代码来实现同样的效果。如果有任何问题，请尝试并评论（它忽略以“。”开头的文件）

```
private static void lsFolderCopy(String sourcePath, String destPath,
            ChannelSftp sftpChannel) throws SftpException,   FileNotFoundException {
    File localFile = new File(sourcePath);

if(localFile.isFile())
{

    //copy if it is a file
    sftpChannel.cd(destPath);

    if(!localFile.getName().startsWith("."))
    sftpChannel.put(new FileInputStream(localFile), localFile.getName(),ChannelSftp.OVERWRITE);
}   
else{
    System.out.println("inside else "+localFile.getName());
    File[] files = localFile.listFiles();

    if(files!=null && files.length > 0 && !localFile.getName().startsWith("."))
    {

        sftpChannel.cd(destPath);
        SftpATTRS  attrs = null;

    //check if the directory is already existing
    try {
        attrs = sftpChannel.stat(destPath+"/"+localFile.getName());
    } catch (Exception e) {
        System.out.println(destPath+"/"+localFile.getName()+" not found");
    }

    //else create a directory   
    if (attrs != null) {
        System.out.println("Directory exists IsDir="+attrs.isDir());
    } else {
        System.out.println("Creating dir "+localFile.getName());
        sftpChannel.mkdir(localFile.getName());
    }

    //System.out.println("length " + files.length);

     for(int i =0;i<files.length;i++) 
        {

         lsFolderCopy(files[i].getAbsolutePath(),destPath+"/"+localFile.getName(),sftpChannel);

                    }

                }
            }

         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-03T07:45:25.597

来自：[http ://the-project.net16.net/Projekte/projekte/Projekte/Programmieren/sftp-synchronisierung.html](http://the-project.net16.net/Projekte/projekte/Projekte/Programmieren/sftp-synchronisierung.html)

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.Vector;
import com.jcraft.jsch.ChannelSftp;
import com.jcraft.jsch.ChannelSftp.LsEntry;
import com.jcraft.jsch.SftpException;

public class FileMaster {
	public boolean FileAction;
	public File local;
	public String serverDir;
	public ChannelSftp channel;

	public FileMaster(boolean copyOrDelete, File local, String to, ChannelSftp channel){
		this.FileAction = copyOrDelete;
		this.local = local;
		this.serverDir = to;
		this.channel = channel;
	}

	/*
	 * If FileAction = true, the File local is copied to the serverDir, else the file is deleted.
	 */
	public void runMaster() throws FileNotFoundException, SftpException{
		if(FileAction){
			copy(local, serverDir, channel);
		} else { 
			delete(serverDir, channel);
		}
	}

	/*
	 * Copies recursive
	 */
	public static void copy(File localFile, String destPath, ChannelSftp clientChannel) throws SftpException, FileNotFoundException{
		if(localFile.isDirectory()){
			clientChannel.mkdir(localFile.getName());
			GUI.addToConsole("Created Folder: " + localFile.getName() + " in " + destPath);

			destPath = destPath + "/" + localFile.getName();
			clientChannel.cd(destPath);

			for(File file: localFile.listFiles()){
				copy(file, destPath, clientChannel);
			}
			clientChannel.cd(destPath.substring(0, destPath.lastIndexOf('/')));
		} else {
			GUI.addToConsole("Copying File: " + localFile.getName() + " to " + destPath);
			clientChannel.put(new FileInputStream(localFile), localFile.getName(),ChannelSftp.OVERWRITE);
		}

	}

	/*
	 * File/Folder is deleted, but not recursive
	 */
	public void delete(String filename, ChannelSftp sFTPchannel) throws SftpException{		
		if(sFTPchannel.stat(filename).isDir()){
			@SuppressWarnings("unchecked")
			Vector<LsEntry> fileList = sFTPchannel.ls(filename);
			sFTPchannel.cd(filename);
			int size = fileList.size();
			for(int i = 0; i < size; i++){
				if(!fileList.get(i).getFilename().startsWith(".")){
					delete(fileList.get(i).getFilename(), sFTPchannel);
				}
			}
			sFTPchannel.cd("..");
			sFTPchannel.rmdir(filename);
		} else {
			sFTPchannel.rm(filename.toString());
		}
		GUI.addToConsole("Deleted: " + filename + " in " + sFTPchannel.pwd());
	}

}
```

# git - 变基 Git 后快进错误

> ID：11650014
> 
> 赞同：0
> 
> 时间：2012-07-25T12:44:04.503
> 
> 标签：git, push, rebase

我在两台不同的计算机上使用我的 git 存储库。我必须在桌面上运行一些测试，所以我创建了分支 X，然后我在 master 分支上做了一些工作，不得不重新设置 X 并压缩一些提交以创建补丁，然后我将更改强制推送到远程仓库。

之后我将 repo 克隆到我的笔记本电脑并做了一些更改，但现在当我尝试推送它时抱怨快进并且我必须做一个 git-pull（我不想这样做，因为我已经重新设置和压缩/编辑再次提交）我想要的只是在我的笔记本电脑上的原始存储库上复制存储库

所以问题是：强制推送是我唯一的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:17:52.110

如果您希望远程计算机上的分支与您的笔记本电脑上的完全一样，并丢弃存在的任何差异：`git push -f`就这样做。它将您本地分支的状态推送到远程仓库，并强制将远程分支设置为您刚刚推送的内容的尖端。远程分支包含的任何未在本地分支或其他地方引用的提交都将无法访问。

# h.264 - 我通过 VLC 获得 rtp 流，但没有使用 gstreamer 管道

> ID：11650015
> 
> 赞同：0
> 
> 时间：2012-07-25T12:44:06.520
> 
> 标签：h.264, gstreamer, rtp

我正在尝试从 DM365 Board 获取 rtp 流。

使用 VLC 没有问题。流可以用 sdp 文件打开。它是使用 TI 特定的 h264 编码器 (TIVidenc1 codecName=h264enc) 和声音编码的摄像机视图。我正在开发一个应用程序，我想使用 gstreamer。我构建了一个 gstreamer 管道以在我的应用程序中嵌入稍后的视频。但我无法使用此管道打开流。 *在 ubuntu* 客户端管道上

```
gst-launch -v gstrtpbin name=rtpbin latency=200 \
udpsrc caps="application/x-rtp,media=(string)video,clock-rate=(int)90000,encoding-name=(string)H264" port=5000 ! rtpbin.recv_rtp_sink_0 \
rtpbin. ! rtph264depay ! decodebin ! xvimagesink \
udpsrc port=5001 ! rtpbin.recv_rtcp_sink_0 \
rtpbin.send_rtcp_src_0 ! udpsink port=5005 host=192.168.231.14 sync=false async=false \
udpsrc caps="application/x-rtp,media=(string)audio,clock-rate=(int)8000,encoding-name=(string)PCMA" port=5002 ! rtpbin.recv_rtp_sink_1 \
rtpbin. ! rtppcmadepay ! decodebin ! audioconvert ! audioresample ! alsasink \
udpsrc port=5003 ! rtpbin.recv_rtcp_sink_1 \
rtpbin.send_rtcp_src_1 ! udpsink port=5007 host=192.168.231.14 sync=false async=false 
```

发件人是 DM365 管道如下：

**发件人**

```
gst-launch-0.10     gstrtpbin name=rtpbin 

v4l2src always-copy=FALSE input-src=composite ! queue ! 
TIVidResize contiguousInputFrame=FALSE ! 'video/x-raw-yuv,width=608,height=384,format=(fourcc)NV12,bitRate=48100' ! 
TIVidenc1 codecName=h264enc engineName=encode contiguousInputFrame=TRUE ! rtph264pay ! queue ! 
rtpbin.send_rtp_sink_0 rtpbin.send_rtp_src_0 ! udpsink port=5000 host=192.168.231.255 ts-offset=0 name=vrtpsink rtpbin.send_rtcp_src_0 ! udpsink port=5001 host=192.168.231.255 sync=false async=false name=vrtcpsink udpsrc port=5005 

name=vrtpsrc ! 
rtpbin.recv_rtcp_sink_0 alsasrc ! queue ! 
alawenc ! rtppcmapay ! queue ! 

rtpbin.send_rtp_sink_1 rtpbin.send_rtp_src_1 ! udpsink port=5002 host=192.168.231.255 ts-offset=0 name=artpsink rtpbin.send_rtcp_src_1 ! udpsink port=5003 host=192.168.231.255 sync=false async=false name=artcpsink udpsrc port=5007 name=artpsrc ! rtpbin.recv_rtcp_sink_1"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:44:54.953

我解决了需要将发送方的 udp caps 信息告诉客户端的 updsrc。当您生成用于发送视频的管道时，您会从终端上的发送方 udp 元素获取大写信息。只需将其添加到您的 udpsrc caps="...." 即可。

# iphone - GTM OAuth iOS5 保留访问令牌

> ID：11650016
> 
> 赞同：1
> 
> 时间：2012-07-25T12:44:16.170
> 
> 标签：iphone, objective-c, ios, ios5, oauth

我不希望用户每次启动应用程序时都经过授权步骤。相反，我希望应用程序保存来自 3 条腿 OAuth 1.0a 进程的访问令牌，并使用它们来访问受保护的资源。

这是我到目前为止所拥有的，它每次都要求我授权（而不是登录）。

有任何想法吗？请帮忙。使用 GTMOauth 库。

```
 - (void)signIn
{
    activityIndicator.hidden = NO;
    [activityIndicator startAnimating];

    NSURL *requestURL = [NSURL URLWithString:@"http://webservice/oauth/request_token/"];
    NSURL *accessURL = [NSURL URLWithString:@"http://webservice/oauth/access_token/"];
    NSURL *authorizeURL = [NSURL URLWithString:@"http://webservice/oauth/authorize/"];
    NSString *scope = @"http://webservice";

    auth = [self getAuthForWebservice];

    [auth setCallback:@"http://webservice/OAuthCallback"];    

    GTMOAuthViewControllerTouch *viewController;
    viewController = [[GTMOAuthViewControllerTouch alloc] initWithScope:scope
                                                                language:nil
                                                         requestTokenURL:requestURL
                                                       authorizeTokenURL:authorizeURL
                                                          accessTokenURL:accessURL
                                                          authentication:auth
                                                          appServiceName:@"webservice"
                                                                delegate:self
                                                        finishedSelector:@selector(viewController:finishedWithAuth:error:)];

    [[self navigationController] pushViewController:viewController
                                           animated:YES];

    [self navigationController].navigationBarHidden = YES;    
}

- (void)viewController:(GTMOAuthViewControllerTouch *)viewController
      finishedWithAuth:(GTMOAuthAuthentication *)auth
                 error:(NSError *)error {
    if (error == nil) {
        [self performSelector:@selector(doAnAuthenticatedAPIFetch)];

    }
}

- (void)doAnAuthenticatedAPIFetch {
    NSString *urlStr = @"http://webservice/resource/";

    NSURL *url = [NSURL URLWithString:urlStr];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [auth authorizeRequest:request];

    NSError *error = nil;
    NSURLResponse *response = nil;
    NSData *data = [NSURLConnection sendSynchronousRequest:request
                                         returningResponse:&response
                                                     error:&error]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:58:15.887

gtm-oauth 控制器将令牌保存到钥匙串中。[当应用程序再次启动时，从钥匙串中读取它，如此处](http://code.google.com/p/gtm-oauth/wiki/GTMOAuthIntroduction#Retrieving_Authorization_from_the_Keychain)所示。

# php - array_push 在 foreach 循环中不起作用

> ID：11650017
> 
> 赞同：0
> 
> 时间：2012-07-25T12:44:25.577
> 
> 标签：php, foreach, array-push

尝试通过 foreach 循环向数组添加值时遇到问题。基本上我有这个表格，其中有一堆主题，用户可以点击“喜欢”或“不喜欢”，每个主题有两个单选按钮。然后我想在两个单独的数组中收集“喜欢”和“不喜欢”，并将它们插入到数据库中，但我没有做正确的事情。这是来自 HTML 代码的示例：

```
Action movies  Like<input type="radio" name="1" value="1" />  Dislike<input type="radio" id="2" name="1" value="2" /> 
```

和 PHP 代码：

```
if (isset($_POST['submit'])) {
    $likes = array();
    $dislikes = array();

    foreach($_POST as $key => $value) {

        /* $key is the name of the object an user can click "like" or "dislike" on, $value   
        is either 'like', which is equal to '2' or 'dislike', equal to '1' */
        if ($value > 1) { array_push($likes, $key); } else { array_push($dislikes, $key); 
    }
} 
echo 'The object(s) the user likes: ' . $likes . ' , 
       and the object(s) the user dislikes: ' . $dislikes; 
```

然而，我收到了这个：

**“用户喜欢的对象：Array ，用户不喜欢的对象：Array”**

我敢肯定这只是我在这里犯的一些愚蠢的错误。我已经用谷歌搜索了很多，但我找不到任何对我有帮助的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:46:26.517

转换为字符串的数组将简单地作为字符串输出`"Array"`。如果要输出*数组中的每个元素*，请遍历它们或使用类似的东西`join`：

```
echo join(', ', $likes); 
```

`array_push`工作得很好。

# postgresql - 用于创建、列出和删除数据库的 libpq 代码（C++/VC++、PostgreSQL）

> ID：11650018
> 
> 赞同：2
> 
> 时间：2012-07-25T12:44:29.040
> 
> 标签：postgresql, visual-c++

我是 PostgreSQL 数据库的新手。我的可视化 C++ 应用程序需要做的是创建多个表并从中添加/检索数据。

我的应用程序的每个会话都应该创建一个新的、不同的数据库。我可以使用当前日期和时间作为唯一的数据库名称。

还应该有一个删除所有数据库的选项。

我已经弄清楚了如何连接到数据库、创建表以及将数据添加到表中。如果用户想清除所有数据库，我不确定如何为每次运行创建一个新数据库或如何检索数据库的数量和名称。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:58:38.653

请参阅[文档中的 libpq 示例](http://www.postgresql.org/docs/9.1/static/libpq-example.html)。该示例程序向您展示了如何列出数据库，以及一般如何对数据库执行命令。那里的示例代码很容易适应创建和删除数据库。

创建数据库是一个简单的[`CREATE DATABASE`](http://www.postgresql.org/docs/9.1/static/manage-ag-createdb.html)SQL 语句，与任何其他 libpq 操作相同。您必须连接到一个临时数据库（通常是`template1`）才能发出`CREATE DATABASE`，然后断开连接并与您刚刚创建的数据库建立新连接。

与其创建新数据库，不如考虑创建新[模式](http://www.postgresql.org/docs/9.1/static/sql-createschema.html)。麻烦少得多，因为您需要做的就是更改[`search_path`](http://www.postgresql.org/docs/9.1/static/ddl-schemas.html#DDL-SCHEMAS-PATH)表引用或为表引用添加前缀，因此您不必断开连接并重新连接即可更改架构。请参阅[有关架构的文档](http://www.postgresql.org/docs/9.1/static/ddl-schemas.html)。

不过，我质疑你设计的智慧。应用程序创建和删除数据库（或表，临时表除外）作为其操作的正常部分很少是一个好主意。也许如果您详细说明了*为什么*要这样做，我们可以提出可能比您当前的方法更容易和/或性能更好的解决方案。

# php - 更改 Flash 站点中的菜单链接

> ID：11650019
> 
> 赞同：0
> 
> 时间：2012-07-25T12:44:30.720
> 
> 标签：php, flash

我有一个 Flash 站点和 php 面板。它的xml文件是动态的。我想在菜单项上添加外部链接。

EG 新闻菜单转到 news.com

我在面板/应用程序/控制器中找到了 process.php。具有以下内容：

```
//News
        if($lang == 'tr')
        {
            $nTitle = 'Haberler';
            $nName = 'Haber Listesi';
        }
        else
        {
            $nTitle = 'News';
            $nName = 'News List';
        }

        echo '<page>
                    <title><![CDATA['.$nTitle.']]></title>
                    <data>news</data>
                '.$this->getpagebackground('news').'
                    <page>
                        <title><![CDATA['.$nName.']]></title>
                        <data>news_list</data>'.$nl;

        $newsRs = $this->db->query("Select date_format(date,'%d.%m.%Y') date,content,content_en,id,title,title_en From news Where status = 10 Order By viewOrder Desc");
        if($newsRs[0])
        {
            foreach($newsRs as $news):
                if($lang == 'tr')
                {
                    $nContent = $news->content;
                        $newsTitle = $news->title;
                }
                else
                {
                    $nContent = $news->content_en;
                        $newsTitle = $news->title_en;
                }
               echo   '<news>
                                <data>news_'.$news->id.'</data>
                                <title>'.$newsTitle.'</title>
                            <date><![CDATA['.$news->date.']]></date>
                                <sum>'.substr($nContent,0,150).'</sum>
                            <content><![CDATA[<p>'.$nContent.'</p>]]></content>'.$nl;
               $newsGallery = $this->db->query("Select * From news_media Where status=10 And news_id=".$news->id);
                   if($newsGallery[0])
                   {
                       echo '<gallery>'.$nl;
                       foreach($newsGallery as $ng):
                           echo '<item>'.$ng->media.'</item>';
                       endforeach;
                       echo '</gallery>'.$nl;
                   }

                   echo '</news>'.$nl;
            endforeach;
        }
        echo '</page>'.$nl; 
```

我可以在这里更改链接吗？

# visual-studio-2010 - VS2008 -> VS2010 RDLC 在调用方法时停止工作

> ID：11650022
> 
> 赞同：0
> 
> 时间：2012-07-25T12:44:38.267
> 
> 标签：visual-studio-2010, visual-studio-2008, rdlc

我使用我的 VS2008 报告工作正常。我迁移到 VS2010 并且我的报告已经停止工作。之前我直接从这样的表达式中调用了 TextBox 的方法：

```
=First(Fields!CteImpressao.Value.ObterValor("Number")) 
```

或者

```
=First(Code.AtribuirCte(Fields!CteImpressao.Value)) 
```

现在在 VS2010 中它会生成 #Error

由于类标记为可序列化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T17:49:01.497

Microsoft 更改了报告的组合方式，因此您不能再像在版本 VS2008 中那样使用 RDLC。

只需以其他方式为我的报告功能正确生成数据源。

# map - 如何计算地图上的线段交点

> ID：11650024
> 
> 赞同：8
> 
> 时间：2012-07-25T12:44:40.927
> 
> 标签：map, line, gis, intersection

我正在使用谷歌地图中的纬度/经度坐标。

我有两行：

*   A 线：48.31508162629726、-2.591741396838972 至 48.40216156645915、-2.2218462112093404
*   B 线：48.383816077371215、-2.274292940053768 至 48.66103546935337、-1.7066197241571377

然后我使用以下公式找到它们交叉的点。

```
var XAsum = A.LngStart - A.LngEnd;
var XBsum = B.LngStart - B.LngEnd;
var YAsum = A.LatStart - A.LatEnd;
var YBsum = B.LatStart - B.LatEnd;

var LineDenominator = XAsum * YBsum - YAsum * XBsum;
if(LineDenominator == 0.0)
    return false;

var a = A.LngStart * A.LatEnd - A.LatStart * A.LngEnd;
var b = B.LngStart * B.LatEnd - B.LatStart * B.LngEnd;

var x = (a * XBsum - b * XAsum) / LineDenominator;
var y = (a * YBsum - b * YAsum) / LineDenominator; 
```

这告诉我这些线确实交叉并返回 x 和 y 值。

但是，当我绘制返回的点时，它与真正的交点有偏移（不多）。

有没有更好的和一样快的算法我可以使用它来返回正确的交点？

它需要快速，因为我正在迭代大量行（~1000）。

编辑：请注意，这给了我大约 7.5 米的误差偏移

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:49:40.417

我假设您使用的算法是在笛卡尔坐标系（即平面）上查找线交点的算法。不幸的是，地球不是平面（甚至不是球体），因此使用该算法会引入错误。Google 地图使用椭球体（特别是 WGS84）来近似地球表面，因此您需要一种算法来查找椭球体上弧的交点。

此页面可能包含一些有用的信息： http: [//mathhelpforum.com/calculus/90196-point-intersection-two-lines.html](http://mathhelpforum.com/calculus/90196-point-intersection-two-lines.html)

# node.js - Socket.io 和现代浏览器不工作

> ID：11650035
> 
> 赞同：6
> 
> 时间：2012-07-25T12:45:18.650
> 
> 标签：node.js, websocket, socket.io

我在使用 socket.io 和现代浏览器时遇到了一些奇怪的问题。令人惊讶的是，使用 IE9 可以正常工作，因为回退到 flashsocket 似乎效果更好。

在我的服务器中（使用快递）

```
var io = socketio.listen(server.listen(8080));
io.configure('production', function(){
    console.log("Server in production mode");
    io.enable('browser client minification');  // send minified client
    io.enable('browser client etag');          // apply etag caching logic based on version number
    io.enable('browser client gzip');          // gzip the file
    io.set('log level', 1);                    // reduce logging
    io.set('transports', [                     // enable all transports (optional if you want flashsocket)
        'websocket'
        , 'flashsocket'
        , 'htmlfile'
        , 'xhr-polling'
        , 'jsonp-polling'
    ]);
}); 
```

在浏览器上，我可以在网络选项卡（在 Chrome 上）中看到 websocket 已建立并进入`101 Switching Protocols`待处理模式。之后，出现 xhr-polling 和 jsonp-polling（flashsocket 发生了什么？）

最糟糕的部分是信息不会来回传递。我有这个连接：

```
io.sockets.on('connection', function (socket) {
    // If someone new comes, it will notified of the current status of the application
    console.log('Someone connected');
    app.sendCurrentStatus(socket.id);
    io.sockets.emit('currentStatus', {'connected': true);
}); 
```

在客户端：

```
socket.on('currentStatus', function (data){ console.log(data) }); 
```

*但是，当我关闭启动的服务器时*，我只能看到该日志：

```
NODE_ENV=production node server.js 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T10:50:08.033

最后，在我的头撞到墙上之后，我决定在几个环境中进行测试，看看这是否是防火墙问题，因为机器落后于几个环境。

事实证明，除了我之外没有人遇到问题，所以我检查了防病毒软件（Trend Micro），禁用后，Chrome/Firefox 能够发挥它们的魔力。

# 故事的道德启示

除了这里所说的 - [Socket.IO 和防火墙软件](https://github.com/LearnBoost/socket.io/wiki/Socket.IO-and-firewall-software)- 每当您遇到互联网上似乎没有人遇到的问题（即，未登录 github 或 socket.io 组）时，它可能是由您的防病毒软件引起的。他们是邪恶的。有时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:42:26.957

您应该让 socketio 监听应用程序本身。
另外，我从来不需要用你正在做的套接字来做所有的服务器端配置——socket.io 应该在大多数浏览器上开箱即用，而无需这样做。我会先尝试而不进行配置。此外，在服务器上，您应该从传递给回调函数的套接字发出，而不是执行 io.sockets.on。

```
var io = socketio.listen(app);

io.sockets.on('connection', function (socket) {
  // If someone new comes, it will notified of the current status of the application
  console.log('Someone connected');
  app.sendCurrentStatus(socket.id);
  socket.emit('currentStatus', {'connected': true);
}); 
```

在客户端上，您需要先连接：

```
var socket = io.connect();
socket.on('currentStatus', function (data){ console.log(data) }); 
```

如果您想查看使用 socket.io 的双向通信示例，请查看我的 Nodio 应用程序。

服务器端： [https ://github.com/oveddan/Nodio/blob/master/lib/Utils.js](https://github.com/oveddan/Nodio/blob/master/lib/Utils.js)

和客户端： [https ://github.com/oveddan/Nodio/blob/master/public/javascripts/Instruments.js](https://github.com/oveddan/Nodio/blob/master/public/javascripts/Instruments.js)

# c++ - Dev C++ 中的编译错误错误

> ID：11650037
> 
> 赞同：-2
> 
> 时间：2012-07-25T12:45:25.897
> 
> 标签：c++, compiler-errors, dev-c++

> **可能重复：**
> [dev c++ 编译器错误](https://stackoverflow.com/questions/11733511/dev-c-compiler-error)

我用 Dev-C++ 编写了一个非常简单的 Windows 应用程序（实际上它是 Dev-C++ 默认项目模板）。

你有这个错误

```
E:\proj1\Makefile.win [构建错误] [main.o] 错误 1
```

这是编译器日志：

```
编译器：默认编译器
构建 Makefile：“E:\proj1\Makefile.win”
执行制作...
make.exe -f "E:\WorkSpace\POINTMAN CARD PRINTER\Cds\New folder\Makefile.win" all
g++.exe -c main.cpp -o main.o -I"C:/Dev-Cpp/lib/gcc/mingw32/3.4.2/include" -I"C:/Dev-Cpp/include/c++/3.4 .2/backward" -I"C:/Dev-Cpp/include/c++/3.4.2/mingw32" -I"C:/Dev-Cpp/include/c++/3.4.2" -I"C:/Dev -Cpp/包括"   

'C:\Users\r' 未被识别为内部或外部命令，
可运行的程序或批处理文件。

该系统找不到指定的路径。

make.exe: *** [main.o] 错误 1

执行终止
```

我已经用谷歌搜索并测试了解决方案，但没有一个对我有用。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:28:51.880

看起来是路径中的反斜杠 r '\r' 导致了麻烦。我不怀疑 ming 工具链在没有转义的情况下处理得很好：

```
make.exe -f "E:\\WorkSpace\\POINTMAN CA..." 
```

或者，更简单的是，使用正斜杠“/”。

```
make.exe -f "E:/WorkSpace/POINTMAN CA..." 
```

您可能也必须转义空格：

```
make.exe -f "E:/WorkSpace/POINTMAN\ CA..." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:55:12.550

您的用户名中可能没有空格吗？C:\Users\r anything\myproject 可能是错误的位置，因为其中有空间。

# sql - CDC 中与 CHANGE_TRACKING_IS_COLUMN_IN_MASK 有什么相似之处？

> ID：11650039
> 
> 赞同：4
> 
> 时间：2012-07-25T12:45:39.740
> 
> 标签：sql

我正在开发一个同步数据的应用程序。我们决定使用 CDC 代替 CT，因为我们需要更多信息，但同时我们需要一个函数来返回更改影响它的列，就像使用 CT 一样：

```
SELECT 
CTTable.SYS_CHANGE_OPERATION,
[FNameCh] = CHANGE_TRACKING_IS_COLUMN_IN_MASK(COLUMNPROPERTY(OBJECT_ID('CONTACT_TABLE'),        
       'contact_name', 'ColumnId'), SYS_CHANGE_COLUMNS),
[LNameCh] = CHANGE_TRACKING_IS_COLUMN_IN_MASK(COLUMNPROPERTY(OBJECT_ID('CONTACT_TABLE'), 
       'contact_lastname', 'ColumnId'), SYS_CHANGE_COLUMNS),

FROM CHANGETABLE (CHANGES Contacts, @VersionId) AS CTTable 
LEFT OUTER JOIN Contacts AS C ON C.CONTACT_ID = CTTable.CONTACT_ID
GO 
```

编辑：

```
SELECT * , sys.fn_cdc_has_column_changed ('dbo_CONTACT_TABLE', 'contact_name', __$update_mask) AS FNameCh 

From   cdc.fn_cdc_get_all_changes_dbo_CONTACT_TABLE(@Start_Lsn,@End_Lsn,'all')
which 1 for if the contact_name is changed and 0 if is not. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T09:25:51.023

我们可以使用 sys.fn_cdc_is_bit_set 进行识别。请在下面的链接中找到详细信息

[http://msdn.microsoft.com/en-us/library/bb500241.aspx](http://msdn.microsoft.com/en-us/library/bb500241.aspx)

# jquery - 使用 jQuery UI Datepicker 仅显示从今天开始的最后 7 天

> ID：11650040
> 
> 赞同：0
> 
> 时间：2012-07-25T12:45:40.743
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

任何人都可以帮忙，使用 jQuery UI Picker 仅显示从今天开始的最后 7 天。

这就是我到目前为止所拥有的。

```
function getMinDate(){ 
    var minDate = new Date(); //alert(minDate.getDate() - (7));    
    minDate.setDate(minDate.getDate() - (7)); 
} 
$(document).ready(function(){ 
    $("#dt_store_visited_at").datepicker({ 
       "dateFormat": "dd-mm-yy", 
       "minDate": getMinDate(), 
       "maxDate": new Date() 
    }).attr("readonly", true); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:57:12.837

我终于明白了，这是代码

```
 $(document).ready(function(){
      $("#dt_store_visited_at").datepicker({
        "dateFormat": "dd-mm-yy",
        "minDate": -7,
        "maxDate": new Date()
    })
    .attr("readonly", true);
  }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:50:11.510

你必须使用

```
minDate: new Date(Year, Month - 1, Day) 
```

财产

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:53:45.957

```
var selectedDateDayNo = selectedDate.getDay();
        var daysDiff = selectedDateDayNo - weeekStartDayNo;

        var startDay = 0;

        if (daysDiff < 0) {
            // Previous week Need to be highlighted
            startDay = -(noOfDays + daysDiff);
        } else if (daysDiff > 0) {
            // Current week Need to be highlighted
            startDay = -daysDiff;
        }

        for ( var days = 0; days < noOfDays; days++) {
            var nextDayDate = new Date();
            nextDayDate.setDate(selectedDate.getDate() + startDay);
            startDay++;
            dates.push(nextDayDate);
        } 
```

尝试使用上面的代码片段。它对我来说完美无缺...它基于所选日期...。选择将由您或数据库从预定义的值（例如：“星期一”）进行。希望这会有所帮助，您还必须添加css 以突出显示 DATEPICKER 中的单元格。祝一切顺利

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:55:29.283

```
$( '#date' ).datepicker({
    minDate: '-7d',
    maxDate: new Date()
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T12:57:35.277

你可以试试这个：

```
function getMinDate(){ 
    var minDate = new Date(); //
    minDate.setTime(minDate.getTime() - 7*24*60*60*1000);
                                        //^^^^^^^^^^^^^----miliseconds in 1 day
    return minDate;
} 
```

# java - 用Java将命令行输出写入文件

> ID：11650042
> 
> 赞同：1
> 
> 时间：2012-07-25T12:45:50.017
> 
> 标签：java, command-line

我正在从 java 运行命令行命令：

```
ping localhost > output.txt 
```

该命令通过 Java 发送，如下所示：

```
Process pr = rt.exec(command); 
```

由于某种原因，该文件没有创建，但是当我从命令行本身运行此命令时，该文件确实创建并且输出在该文件中。

为什么 java 命令不创建文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:47:13.380

因为您尚未将其定向到文件。

在命令行上，您已请求将其重定向到文件。您必须在 Java 中通过 Process 对象提供的 InputStream（对应于实际流程的输出流）来执行相同的操作。

以下是如何从流程中获取输出。

```
InputStream in = new BufferedInputStream( pr.getInputStream()); 
```

您可以从这里读取直到 EOF，并将输出写入文件。如果您不希望该线程阻塞，请从另一个线程读取和写入。

```
InputStream in = new BufferedInputStream( pr.getInputStream());
OutputStream out = new BufferedOutputStream( new FileOutputStream( "output.txt" ));

int cnt;
byte[] buffer = new byte[1024];
while ( (cnt = in.read(buffer)) != -1) {
   out.write(buffer, 0, cnt );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T13:02:58.330

**1**、Java程序成功执行命令后，**需要读取输出，然后将输出转移到文件中。**

**例如：**

```
 Process p = Runtime.getRuntime().exec("Your_Command");

    InputStream i = p.getInputStream();

    InputStreamReader isr = new InputStreamReader(i);

    BufferedReader br = new BufferedReader(isr);

    File f = new File("d:\\my.txt");

    FileWriter fw = new FileWriter(f);            // for appending use (f,true)

    BufferedWriter bw = new BufferedWriter(fw);

    while((br.readLine())!=null){

         bw.write(br.readLine());           // You can also use append.
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:50:27.070

补充安迪的回答，我认为你**必须**阅读这篇文章：[http](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html) ://www.javaworld.com/jw-12-2000/jw-1229-traps.html 。

对于需要在 Java 中处理外部进程的人来说，这一点非常重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T12:59:31.187

我想保持简单，并且您使用的是 Windows，请尝试：

```
Process pr = rt.exec("cmd /c \"ping localhost > output.txt\""); 
```

# google-maps-api-3 - 使用 Google Adsense 的 Google Maps API V3 自定义控件？

> ID：11650044
> 
> 赞同：0
> 
> 时间：2012-07-25T12:45:55.257
> 
> 标签：google-maps-api-3, adsense

我对javascript很陌生，所以请温柔一点；）

我正在使用 Google Maps API V3 并根据此示例创建自定义控件。这很简单，因为它是 Google 的示例。我遇到的麻烦是用现有的包含 javascript 的 DIV 替换 .innerHTML 。

最终，我试图在我的谷歌地图上创建一个包含谷歌 Adsense 广告的自定义控件。通常我会在我的 HTML 中的 body 标记之后创建一个 div，其中包含 Google Adsense 广告的 javascript 代码。

通常我会使用 controlText.innerHTML = 'some html goes here'; 对于自定义控件，但在我的情况下，我想使用包含 Google Adsense 广告的 javascript 代码的现有 DIV。

我试过更换

```
controlText.innerHTML = 'some html goes here'; 
```

和

```
controlText.innerHTML = document.getElementById("verticalad"); 
```

但它只是打破了地图。谁能建议我做错了什么？我希望它很容易解决。

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Custom Controls</title>
    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>

    var map;
    var chicago = new google.maps.LatLng(41.850033, -87.6500523);
    function HomeControl(controlDiv, map) {

    controlDiv.style.padding = '4px';

    var controlUI = document.createElement('div');
    controlUI.style.backgroundColor = 'white';
    controlUI.style.borderStyle = 'solid';
    controlUI.style.borderWidth = '2px';
    controlUI.style.cursor = 'pointer';
    controlUI.style.textAlign = 'center';
    controlUI.title = 'Click to set the map to Home';
    controlDiv.appendChild(controlUI);

    var controlText = document.createElement('div');
    controlText.style.fontFamily = 'Arial,sans-serif';
    controlText.style.fontSize = '12px';
    controlText.style.paddingLeft = '4px';
    controlText.style.paddingRight = '4px';

    //**********************************************************************//
    //Normally this would be controlText.innerHTML = 'some html goes here';
    //**********************************************************************//
    controlText.innerHTML = document.getElementById("verticalad");

    controlUI.appendChild(controlText);

    google.maps.event.addDomListener(controlUI, 'click', function() {
    map.setCenter(chicago)
    });

    }

    function initialize() {
    var mapDiv = document.getElementById('map_canvas');
    var mapOptions = {
    zoom: 12,
    center: chicago,
    mapTypeId: google.maps.MapTypeId.TERRAIN,
    streetViewControl: false,
    mapTypeControl: true,
    mapTypeControlOptions: {

    style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
    position: google.maps.ControlPosition.RIGHT_BOTTOM

    }

    }
    map = new google.maps.Map(mapDiv, mapOptions);

    var homeControlDiv = document.createElement('div');
    var homeControl = new HomeControl(homeControlDiv, map);

    homeControlDiv.index = 1;
    map.controls[google.maps.ControlPosition.LEFT_CENTER].push(homeControlDiv);
    }

    </script>
    </head>
    <body onload="initialize()">
    <div id="map_canvas" style="width:100%;height:700px;"></div>

    //****************************************************************
    // This is the div that needs to be in the custom control
    //****************************************************************
    <div id="verticalad"><script type="text/javascript">adsense code goes here</script></div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:23:29.340

我想我在某处丢失了分号，因为我已经设法让它工作了..

我确实将 Adsense 代码完整地保存在 HTML 正文中的 div 中，然后使用 controlText.innerHTML = document.getElementById("verticalad").innerHTML;

我确实还有一个进一步的问题，即 adsense 广告没有出现在 IE 中，但我放置了一个元标记，强制它模拟 IE7，它现在​​工作正常.. 不是我知道的最佳解决方案，但 IE7 工作正常。我认为该网站现在应该在所有现代浏览器中看起来都不错。

如果有人有兴趣查看最终站点，[请访问 http://www.flighttracker.gleff.com](http://www.flighttracker.gleff.com)。

谢谢你的帮助。

杰夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:50:47.277

要将整个verticalad div 移入控件还是仅将verticalad 的内容移入控件？如果要移动它，请使用`appendChild`而不是`innerHTML`

```
controlText.appendChild(document.getElementById("verticalad")); 
```

如果您想要内容，请使用 verticalad 的 innerHTML

```
controlText.innerHTML = document.getElementById("verticalad").innerHTML; 
```

# mysql - 是否可以让 MySQL 以百分位组输出？

> ID：11650045
> 
> 赞同：1
> 
> 时间：2012-07-25T12:45:59.600
> 
> 标签：mysql

我有一个包含每个用户消息的表格：

```
users
----------------
user_id messages
----------------
  725       0
   30       0
 1436       1
10454       4
    .       .
    .       .
 1507      901 
```

该表包含 74,500 个用户。该表按`ASC`消息数排序。我现在想计算每百分位数的推文数量，所以：

```
SELECT SUM(messages) FROM users LIMIT     0, 745;
SELECT SUM(messages) FROM users LIMIT   745, 745;
SELECT SUM(messages) FROM users LIMIT  1490, 745;
.
.
SELECT SUM(messages) FROM users LIMIT 73755, 745; 
```

这个我可以，没问题。我可以编写一个脚本来触发对数据库的查询。但我想知道，难道不能让 MySQL 输出每个用户组的消息总数吗？所以输出会是这样的

```
group  users         total_messages
-----------------------------------
  1       0 - 745     451
  2     745 - 1490   5627
  .      .      .      .
  .      .      .      .
100   73755 - 74500  2654 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:04:20.513

像这样的东西？

```
SELECT grp + 1                                       AS `group`,
       CONCAT(grp*grpsize, ' - ', (grp+1)*grpsize-1) AS users,
       SUM(messages)                                 AS total_messages
FROM (
  SELECT   @i:=@i+1, @i DIV grpsize AS grp, grpsize, messages
  FROM     users, (SELECT COUNT(*) / 100 AS grpsize, @i:=0 FROM users) t
  ORDER BY messages
) t
GROUP BY grp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:23:28.330

试试这个：

```
select group_id,concat(MIN(user_id) ,'-',MAX(user_id)) as users,
SUM(messages) as messages  
from
  (SELECT ceil(@rownum:= @rownum+1/745 ) AS group_id,user_id,messages
  FROM users, (SELECT @rownum:=0) r
  order by user_id)a
  group by group_id 
```

如果您还希望显示组范围，您可以这样做

```
select group_id,concat(MIN(rownum) ,'-',MAX(rownum)) as groups,
concat(MIN(user_id) ,'-',MAX(user_id)) as users,
SUM(messages) as messages
from
  (SELECT ceil(@rownum:= @rownum+1/745 ) AS group_id,@slno:= @slno+1 
  as rownum,user_id,messages
  FROM users, (SELECT @rownum:=0)k,(select @slno:=0) r
  order by user_id)a
  group by group_id 
```

# facebook - 如何使用支付对话框以真实货币显示 Facebook 支付？

> ID：11650050
> 
> 赞同：0
> 
> 时间：2012-07-25T12:46:27.267
> 
> 标签：facebook, facebook-graph-api

我正在使用带有动作购买项目的 facebook 支付对话框...我实现了回调 url，一切正常。在“payments_get_items”回调中，我将“price”属性设置为（例如）5（意思是 5 美元），但似乎 facebook 将其理解为 5 个积分，定价为 1.5 美元（或与 5 美元不同的其他价值）。我不想在我的支付对话框中显示积分，而是以客户的当地货币显示。我不知道该怎么做。注意：我还没有注册公司（可能是这个问题？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:53:00.187

根据文档：[https://developers.facebook.com/docs/payments/callback/](https://developers.facebook.com/docs/payments/callback/)价格应在 Facebook Credits 中设置：

> 基于积分的产品成本。所有产品成本必须以积分为基础。整数值必须 > 0。

事实上，使用 dev_purchase_params: {'oscif': true} 将指示 Facebook 以用户首选货币而不是 Facebook Credits 显示价格。您无需注册公司即可使其正常工作。

我认为您的问题是将美元转换为 Facebook 积分（如果我错了，请纠正我）。目前，一个 Facebook 积分价值 0.10 美元，1.00 美元 = 10 个 Facebook 积分 (http://www.facebook.com/help/?faq=204417036262972)

请注意，您还可以使用此工具将货币转换为 Facebook 积分，反之亦然：http: [//developers.facebook.com/docs/payments/user_currency/](http://developers.facebook.com/docs/payments/user_currency/)这将允许您以美元、欧元显示准确的值...

# c# - 删除 Request.Form 的一部分

> ID：11650057
> 
> 赞同：0
> 
> 时间：2012-07-25T12:46:58.000
> 
> 标签：c#, asp.net-mvc, request.form

在 C# MVC3 解决方案中，我将 request.form 作为字符串传递给 Web 服务（我知道将其分解并填充模型会更好，但它会受到旧代码的影响，主要是时间）由于选项很多，字符串很大并且在服务中失败。

实际上我不需要所有这些选项，它们基本上是几个下拉列表，我只需要其中一个，所以我试图弄清楚如何更改 request.form 以删除多余的选项并保留选择的那个。

为了把它放到上下文中，这应该是字符串的一部分（只是它的中间部分）

```
NG2BEF01-16344-181-E-16344-0-SHW_SHR*16344*MAT*1*2500*1600=0&NG2BEF01-16344-181-E-16344-0-SHW_SHR*16344*MAT*2*5500*6200=0&NG2BEF01-16344-181-E-16344-0-SHW_39S*16344*EVE*1*1500*0=2 
```

我想从（在这部分）最后一个 =2 的选项中删除所有选项。这个 0 和 2 来自一个下拉列表，其名称是参数的所有其余部分（即 NG2BEF01-16344-181-E-16344-0-SHW_39S*16344*EVE*1*1500*0），尽管它可能完全不同，并不总是遵循这种模式。

有什么办法可以在提交之前摆脱我在 request.form 中保留为 0 的下拉列表（甚至在控制器中也是可以接受的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:07:04.720

您可以过滤掉不想保留的值：

```
var values = HttpUtility.ParseQueryString("NG2BEF01-16344-181-E-16344-0-SHW_SHR*16344*MAT*1*2500*1600=0&NG2BEF01-16344-181-E-16344-0-SHW_SHR*16344*MAT*2*5500*6200=0&NG2BEF01-16344-181-E-16344-0-SHW_39S*16344*EVE*1*1500*0=2");
string result = string.Join("&", values.Cast<string>().Where(key => values[key] == "2").Select(key => string.Format("{0}={1}", key, HttpUtility.UrlEncode(values[key]))));
// The result variable will contain only kvps where the value equals 2 
```

# iphone - (Lua+iOS) 使用 lua_pushstring 时出错

> ID：11650059
> 
> 赞同：0
> 
> 时间：2012-07-25T12:47:11.620
> 
> 标签：iphone, ios, lua, fpc

```
==============
Info Develope:
MacOS 10.6 SnowLeopard
iOS SDK 5.0
FreePascal 2.6.0 for MacOS X
FreePascal 2.6.0 for iOS
XCode 4.2
Device: iPad
Lua: Object library = liblua.a (ver 5.14) 
============== 
```

代码：

```
A) lua_pushnumber(LuaInstance, 5);
B) lua_pushstring(LuaInstance, 'TEST');
C) lua_pushlstring(LuaInstance, 'TEST', 4); 
```

问题：当我使用变体“B”和“C”并在 iPad 上启动项目时，应用程序在启动时闪烁并关闭并出现下一个错误：

(iPad) 控制台日志中的错误：

```
Exited with code: 217
<Warning> Application 'demo1' exited abnormally with exit status 217 
```

对于变体“A”，一切正常，应用程序启动正常。

有趣的是，当我在模拟器上编译和启动时，所有变体（“A”、“B”、“C”）都可以正常工作，而不会崩溃。

谁能知道为什么，lua_pushstring 设备上的应用程序崩溃？

可能有人在没有 freepascal 的情况下处理了这个问题，可能是在 c++ 上。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:06:06.307

我注意到，当我将 printf 添加到 func lua_pushlstring 时，问题已解决。为什么？

```
LUA_API void lua_pushlstring (lua_State *L, const char *s, size_t len) {
  lua_lock(L);
  luaC_checkGC(L);
  printf ("Test= %s ", s);  
  setsvalue2s(L, L->top, luaS_newlstr(L, s, len));
  api_incr_top(L);
  lua_unlock(L);
} 
```

链接 liblua.a 时，可能会发生解决冲突？

# extjs - Rownumberer 与列一起增长

> ID：11650063
> 
> 赞同：0
> 
> 时间：2012-07-25T12:47:26.270
> 
> 标签：extjs

我正在使用 Ext Js 开发一个应用程序，但我遇到了一个问题，在我的一个视图中，用户能够动态添加新列，并且在网格中，第一个 Ext 组件是一个行编号器，它在添加用户时枚举我的行它。但是，随着行的添加，“rownumberer”的第一列一起增长，如下所示。谁能给我一个见解？谢谢！

![在此处输入图像描述](../Images/de82ac1aead6a574f1263e67b8c49c5f.png)

编码：

```
var store = Ext.getStore('store');
var rowEditing = Ext.create('Ext.grid.plugin.RowEditing');
var contador = 0;
Ext.define('Grid', {
extend : 'Ext.grid.Panel',
title: 'Grid',
store: 'StoreTemp',
columns: [ 
    {
     xtype: 'rownumberer'
 },{    
     header : "Data Type",
     dataIndex : 'nome',
     flex : 0.8,
     editor:'textfield'
 }],            
dockedItems : [ {
xtype : 'toolbar',
items : [ {
    xtype: 'button',
    tooltip: 'Click here to set data type on axis Y',
    id : 'buttonTipoDado',
    icon : Webapp.icon('edit.png'),
    iconAlign : 'top',
    handler : function() {
        var gridView = Ext.ComponentQuery.query('gridpanel')[1];
        Ext.Msg.prompt('Alert', 'Insert data type: ', function(
                btn, text) {
            if (btn == 'ok') {
                gridView.getView().getHeaderAtIndex(1).setText(text);
                var botao = Ext.getCmp('buttonTipoDado');
                botao.setDisabled(true);
            } else {
                Ext.Msg.alert('Alert', 'Insert type!');
            }
            gridView.getView().refresh();
        });
    }
}, {
    xtype: 'button'
    icon : Webapp.icon('add1.png'),
    iconAlign : 'top',
    handler : function() {
        var gridView = Ext.ComponentQuery.query('gridpanel')[1];
        grid = gridView.headerCt;
        if(grid.getGridColumns().length >= 1){
            var column = Ext.create('Ext.grid.column.Column', {text : contador, editor: {xtype: 'textfield', flex: 0.5}});
            gridView.headerCt.insert(gridView.columns.length, column);
            var botao = Ext.getCmp('buttonRemoverColuna');
            botao.setDisabled(false);
        }
        contador++;
    }
}, {
    xtype: 'button',
    icon : Webapp.icon('cancel.png'),
    iconAlign : 'top',
    id : 'buttonRemoverColuna',
    handler : function() {
        var gridView = Ext.ComponentQuery.query('gridpanel')[1];
        gridView = gridView.headerCt;
        var botao = Ext.getCmp('buttonRemoverColuna');
        if(gridView.getGridColumns().length == 2){
            botao.setDisabled(true);    
            contador = 0;
        }
        else{
            gridView = gridView.remove(gridView.getGridColumns().length - 1);               
        }
    }
}, {
    xtype: 'button',
    icon : Webapp.icon('add1.png'),
    iconAlign : 'top',
    handler: function(){
        var gridView = Ext.ComponentQuery.query('gridpanel')[1];
        grid = gridView.getView();
        grid.insert(0, new Ext.create('Model'));
        rowEditing.startEdit(0, 0); 
        gridView.getView().refresh();
    }   
}, {
    xtype: 'button'
    icon : Webapp.icon('cancel.png'),
    iconAlign : 'top',
    handler: function(){
        store.removeAt(0);
    }   
}]
} ],
plugins : [ rowEditing ]

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:18:38.447

问题在于您的`Data Type`列`flex`配置。您应该将其更改为`flex: 1`。

该`rownumberer`列具有默认`width: 23`配置，因此您无需指定确切的宽度。

# c - 启用可取消性时，pthread_setcancelstate 函数是否是取消点

> ID：11650067
> 
> 赞同：1
> 
> 时间：2012-07-25T12:47:31.727
> 
> 标签：c, multithreading, pthreads

手册页`pthread_cancel`说：

> 取消状态可以设置为 PTHREAD_CANCEL_DISABLE，在这种情况下，所有取消请求都处于挂起状态，

这很清楚。如果有一个挂起的取消请求，并且`pthread_setcancelstate`调用启用了可取消性，那么线程何时被取消？

1.  在`pthread_setcancelstate`通话期间
2.  在下一个取消点

使用默认取消类型 (PTHREAD_CANCEL_DEFERRED)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:00:19.983

由于`pthread_setcancelstate` [不允许作为取消点](http://www.mkssoftware.com/docs/man3/pthread_cancel.3.asp)并且取消被推迟到取消点，因此直到下一个取消点才能取消线程。

# c++ - QGraphicsItem::toGraphicsObject() 在 QGraphicsPixmapItem 派生的自己的类中返回 0

> ID：11650068
> 
> 赞同：0
> 
> 时间：2012-07-25T12:47:32.283
> 
> 标签：c++, linux, qt, qgraphicsitem

目前我试图从我自己的 QGraphicsView 中获取项目：QObject 和 :QGraphicsPixmapItem 派生的项目。所以我在我的场景中添加了 2 个项目，现在我希望这些项目用另一种方法将它们取出，`QList <QGraphicsItem*>`但不幸的是它不能很好地工作并`QGraphicsItem::toGraphicsObject()`返回 0。

所以我在 Qt-Reference-Documentation 中找到了这个描述：

```
QGraphicsObject * QGraphicsItem::toGraphicsObject ()

Return the graphics item cast to a QGraphicsObject, if the class is actually a
graphics object, 0 otherwise. 
```

因为我想为我想从我身上得到的东西`itemList`制作`setTargetObject`动画`myAnimation`。但是这种方法需要一个`QGraphicsObject`所以这就是为什么我需要将它转换为。希望我的源代码能说明更多：

**——啊——**

```
class A : public QObject, public QGraphicsPixmapItem
{
    Q_OBJECT
    Q_PROPERTY (QPointF pos READ pos WRITE setPos)

public:
    A()
    {
        setTransformationMode (Qt::SmoothTransformation);
    }

    QPointF itemPos;
}; 
```

**-- A.cpp--**

```
void A::method()
{
    QList <QGraphicsItem*> itemList = myGraphicsView -> items();

    QGraphicsObject *test = itemList.at (0) -> toGraphicsObject();

    qDebug() << test; // <-- QGraphicsObject(0)

    myAnimation -> setTargetObject (test);
    myAnimation -> setPropertyName ("pos");
    myAnimation -> setStartValue (QPointF (0, 100));
    myAnimation -> setEndValue (QPointF (60, 100));

    myAnimation -> start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:47:31.037

首先，a`QGraphicsObject`本身就是一个特定的类。您不能从其中创建新类`QObject`并将`QGraphicsItems`其用作`QGraphicsObject`. 两者甚至不在同一个类层次结构中。所以你不能把一个投给另一个。

其次，`setTargetObject`需要一个`QObject`，不是`QGraphicsObject`。因此，您可以通过以下方式获取对象 a `QObject`：

```
A *test = dynamic_cast<A*>(itemList.at(0)); 
```

`setTargetObject`会很高兴地接受它。

# wolfram-mathematica - 我在 Mathematica 中使用 Evaluate and Plot 后，这个偏差是如何出现的？

> ID：11650070
> 
> 赞同：1
> 
> 时间：2012-07-25T12:47:33.473
> 
> 标签：wolfram-mathematica, precision, evaluation, pde, deviation

当我尝试求解偏微分方程时遇到了这个问题。这是我的代码：

```
dd = NDSolve[{D[tes[t, x], t] ==D[tes[t, x], x, x] + Exp[-1/(tes[t, x])],
   tes[t, 0] == 1, tes[t, -1] == 1, tes[0, x] == 1}, {tes[t, x]}, {t, 0, 5}, {x, -1, 0}]

f[t_, x_] = tes[t, x] /. dd
kkk = FunctionInterpolation[Integrate[Exp[-1.1/( Evaluate[f[t, x]])], {x, -1, 0}], {t, 0, 0.05}]
kkg[t_] = Integrate[Exp[-1.1/( Evaluate[f[t, x]])], {x, -1, 0}]
Plot[Evaluate[kkk[t]] - Evaluate[kkg[t]], {t, 0, 0.05}]
N[kkg[0.01] - kkk[0.01], 1] 
```

奇怪的是，图中显示的偏差达到了`5*10^-7`大约`t=0.01`，而只有`-3.88578*10^-16`在计算时才`N[kkg[0.01] - kkk[0.01], 1]`，我想知道这个错误是怎么来的。

顺便说一句，我觉得奇怪的是输出`N[kkg[0.01] - kkk[0.01], 1]`有这么多小数位，我把精度设置为1，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:35:36.577

使用*Mathematica* 7，我得到的图没有显示 0.01 的峰值：

```
Plot[kkk[t] - kkg[t], {t, 0, 0.05}, GridLines -> Automatic] 
```

![数学图形](../Images/4060ab2395b8935214c463fbc8f9e412.png)

大约有*一个*峰值`0.00754`：

```
kkk[0.00754] - kkg[0.00754] // N 
```

> ```
> {6.50604*10^-7} 
> ```

* * *

关于`N`，它不会像精确或任意精度那样改变机器精度数的精度：

```
N[{1.23456789, Pi, 1.23456789`50}, 2]

Precision /@ % 
```

> ```
> {1.23457, 3.1, 1.2}
> 
> {MachinePrecision, 2., 2.} 
> ```

查看[`SetPrecision`](http://reference.wolfram.com/mathematica/ref/SetPrecision.html)是否要强制（伪造）精度，以及[`NumberForm`](http://reference.wolfram.com/mathematica/ref/NumberForm.html)是否要以特定格式打印数字。

# python - 单元测试 MySQL 数据库交互

> ID：11650071
> 
> 赞同：1
> 
> 时间：2012-07-25T12:47:36.690
> 
> 标签：python, mysql, database, unit-testing

我正在为主要解析和解释用户输入并调用业务层函数来进行数据库交互（插入和选择）的python代码编写测试用例。我如何为它编写/计划单元测试用例。

调用业务逻辑函数的虚拟版本有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:53:52.947

是的，测试你的“业务逻辑”是实用的。数据库交互的单元测试不是。建议[http://pyunit.sourceforge.net/](http://pyunit.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:02:22.323

如果您使用虚拟业务逻辑，那么您最终会测试什么？您的业​​务逻辑确实是您应该进行的单元测试。

您应该使用模拟来模拟用户输入并避免数据库交互。看看我对[如何在 Python 的单元测试场景中模拟 HTTP 请求的](https://stackoverflow.com/questions/11399148/how-to-mock-an-http-request-in-a-unit-testing-scenario-in-python/11399210#11399210)回答。

# batch-file - 批量删除txt文件中的行

> ID：11650079
> 
> 赞同：0
> 
> 时间：2012-07-25T12:48:14.740
> 
> 标签：batch-file, cmd

我需要检查某些进程（它是 20 个进程的列表，所以不会全部列出），并记录哪些进程正在运行。然后我需要杀死它们，运行一些其他代码，最后重新打开它们......只有在所有进程都结束后，代码才会成功运行。

我欢迎任何建议，或者只是有人解释为什么我的代码不起作用。

我一直在做的是使用任务列表检查每个进程，并将结果写入文件，然后我试图删除进程未运行的文件行（即我得到一个“信息： ...“ 信息）

我知道我以前做过类似的事情，我一次取一个文件的每一行（在 for 循环中），替换其中的一串文本，并将编辑后的行发送到另一个文件（即可能不是最有效的方法，但它有效）。

由于某种原因，我现在无法复制它...

我得到的代码（失败了）是

```
SETLOCAL ENABLEDELAYEDEXPANSION 
cd\
for /f "tokens=* delims= " %%a in (somefile.txt) do (
set q=INFO: No tasks are running which match the specified criteria.
set r=%%a
set s=!r:%q%=!
echo %s% >>test.txt
) 
```

如果有人知道一种更好的方法来做我需要的事情，我很乐意改变我的计划，但它确实需要通过批处理（CMD）来完成，或者我会很高兴有人至少修复上述代码.

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:55:45.337

试试这个代码。虽然我不确定输出文件是否与您想要的匹配。如果参数包含任何空格，请确保用双引号括起来。

`taskchk.cmd`：

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
if "%1" == "" (
  echo Please specify criteria.
  echo e.g.: taskchk myprocess.exe
  goto :eof
)
cd\
type nul>test.txt
set found=0
for /f "tokens=*" %%a in ('tasklist /nh') do (
  for /f "tokens=1" %%b in ("%%a") do (
    if /i "%%b" == "%~1" (
     set found=1
    ) else (
     echo %%a>>test.txt
    )
  )
)
if %found% == 0 echo INFO: No tasks are running which match the specified criteria.>>test.txt 
```

# c# - EPPlus 数据透视表/图表

> ID：11650080
> 
> 赞同：23
> 
> 时间：2012-07-25T12:48:17.283
> 
> 标签：c#, asp.net, epplus

我已经将 EPPlus 用于 .net 有一段时间了，但仅用于简单的数据操作。是否有任何关于如何使用它来创建数据透视表/图表的示例？它似乎支持它，因为我可以在智能感知中看到数据透视表，但只是不确定语法。

我只能在提供的示例中找到饼图/条形图之类的东西。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-20T20:19:44.793

我从 Tim's Answer 中制作了一个类似的解决方案。首先，我定义了一个简单的接口，用作导出方法的一部分：

```
public interface IPivotTableCreator
{
    void CreatePivotTable(
        OfficeOpenXml.ExcelPackage pkg, // reference to the destination book
        string tableName,               // "tab" name used to generate names for related items
        string pivotRangeName);         // Named range in the Workbook refers to data
} 
```

然后我实现了一个简单的类来保存变量值和程序代码来完成这项工作：

```
public class SimplePivotTable : IPivotTableCreator
{
    List<string> _GroupByColumns;
    List<string> _SummaryColumns;
    /// <summary>
    /// Constructor
    /// </summary>
    public SimplePivotTable(string[] groupByColumns, string[] summaryColumns)
    {
        _GroupByColumns = new List<string>(groupByColumns);
        _SummaryColumns = new List<string>(summaryColumns);
    }

    /// <summary>
    /// Call-back handler that builds simple PivatTable in Excel
    /// http://stackoverflow.com/questions/11650080/epplus-pivot-tables-charts
    /// </summary>
    public void CreatePivotTable(OfficeOpenXml.ExcelPackage pkg, string tableName, string pivotRangeName)
    {
        string pageName = "Pivot-" + tableName.Replace(" ", "");
        var wsPivot = pkg.Workbook.Worksheets.Add(pageName);
        pkg.Workbook.Worksheets.MoveBefore(PageName, tableName);

        var dataRange = pkg.Workbook./*Worksheets[tableName].*/Names[pivotRangeName];
        var pivotTable = wsPivot.PivotTables.Add(wsPivot.Cells["C3"], dataRange, "Pivot_" + tableName.Replace(" ", ""));
        pivotTable.ShowHeaders = true;
        pivotTable.UseAutoFormatting = true;
        pivotTable.ApplyWidthHeightFormats = true;
        pivotTable.ShowDrill = true;
        pivotTable.FirstHeaderRow = 1;  // first row has headers
        pivotTable.FirstDataCol = 1;    // first col of data
        pivotTable.FirstDataRow = 2;    // first row of data

        foreach (string row in _GroupByColumns)
        {
            var field = pivotTable.Fields[row];
            pivotTable.RowFields.Add(field);
            field.Sort = eSortType.Ascending;
        }

        foreach (string column in _SummaryColumns)
        {
            var field = pivotTable.Fields[column];
            ExcelPivotTableDataField result = pivotTable.DataFields.Add(field);
        }

        pivotTable.DataOnRows = false;
    }
} 
```

然后我创建我的`SimplePivotTable`创建者类的一个实例：

```
IPivotTableCreator ptCreator = new SimplePivotTable(
    new string[] { "OrganizationTitle", "GroupingTitle", "DetailTitle" }, /* collapsible rows */
    new string[] { "Baseline", "Increase", "Decrease", "NetChange", "CurrentCount"}); /* summary columns */ 
```

我有第三个类，它目前公开了大约六种不同的方法来获取一个或多个数据集（通常是 List 对象），并将每个数据集转换为具有数据命名范围的数据工作表。现在，我正在调整这些导出方法，以允许我为任何/所有这些导出方法生成数据透视表。他们都做这样的事情：

```
OfficeOpenXml.ExcelPackage pkg = new ExcelPackage();
ExportCollectionToExcel(pkg, tableName, dataset);   // Create worksheet filled with data
                                                    // Creates a NamedRange of data
ptCreator.CreatePivotTable(pkg, tableName, GetPivotRangeName(tableName)); 
```

通过使用界面，我留下了更多机会（我认为）来生成，例如，为多个工作表生成不同的数据透视表。我的基本`SimplePivotTable`类仅用于具有一些特定假设的单个表，但将配置数据放入以表名称为键的字典中并不难。

希望对某人有所帮助。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-25T13:01:14.523

这是我最近创建的枢轴的代码，也许它确实有帮助：

```
DataTable table = getDataSource();
FileInfo fileInfo = new FileInfo(path);
var excel = new ExcelPackage(fileInfo);
var wsData = excel.Workbook.Worksheets.Add("Data-Worksheetname");
var wsPivot = excel.Workbook.Worksheets.Add("Pivot-Worksheetname");
wsData.Cells["A1"].LoadFromDataTable(table, true, OfficeOpenXml.Table.TableStyles.Medium6);
if (table.Rows.Count != 0)
{
    foreach (DataColumn col in table.Columns)
    {
        // format all dates in german format (adjust accordingly)
        if (col.DataType == typeof(System.DateTime))
        {
            var colNumber = col.Ordinal + 1;
            var range = wsData.Cells[2, colNumber, table.Rows.Count + 1, colNumber];
            range.Style.Numberformat.Format = "dd.MM.yyyy";
        }
    }
}

var dataRange = wsData.Cells[wsData.Dimension.Address.ToString()];
dataRange.AutoFitColumns();
var pivotTable = wsPivot.PivotTables.Add(wsPivot.Cells["A3"], dataRange, "Pivotname");
pivotTable.MultipleFieldFilters = true;
pivotTable.RowGrandTotals = true;
pivotTable.ColumGrandTotals = true;
pivotTable.Compact = true;
pivotTable.CompactData = true;
pivotTable.GridDropZones = false;
pivotTable.Outline = false;
pivotTable.OutlineData = false;
pivotTable.ShowError = true;
pivotTable.ErrorCaption = "[error]";
pivotTable.ShowHeaders = true;
pivotTable.UseAutoFormatting = true;
pivotTable.ApplyWidthHeightFormats = true;
pivotTable.ShowDrill = true;
pivotTable.FirstDataCol = 3;
pivotTable.RowHeaderCaption = "Claims";

var modelField = pivotTable.Fields["Model"];
pivotTable.PageFields.Add(modelField);
modelField.Sort = OfficeOpenXml.Table.PivotTable.eSortType.Ascending;

var countField = pivotTable.Fields["Claims"];
pivotTable.DataFields.Add(countField);

var countryField = pivotTable.Fields["Country"];
pivotTable.RowFields.Add(countryField);
var gspField = pivotTable.Fields["GSP / DRSL"];
pivotTable.RowFields.Add(gspField);

var oldStatusField = pivotTable.Fields["Old Status"];
pivotTable.ColumnFields.Add(oldStatusField);
var newStatusField = pivotTable.Fields["New Status"];
pivotTable.ColumnFields.Add(newStatusField);

var submittedDateField = pivotTable.Fields["Claim Submitted Date"];
pivotTable.RowFields.Add(submittedDateField);
submittedDateField.AddDateGrouping(OfficeOpenXml.Table.PivotTable.eDateGroupBy.Months | OfficeOpenXml.Table.PivotTable.eDateGroupBy.Days);
var monthGroupField = pivotTable.Fields.GetDateGroupField(OfficeOpenXml.Table.PivotTable.eDateGroupBy.Months);
monthGroupField.ShowAll = false;
var dayGroupField = pivotTable.Fields.GetDateGroupField(OfficeOpenXml.Table.PivotTable.eDateGroupBy.Days);
dayGroupField.ShowAll = false;

excel.Save(); 
```

# xml - 用元素名称替换重复的属性值

> ID：11650089
> 
> 赞同：1
> 
> 时间：2012-07-25T12:48:42.250
> 
> 标签：xml, xslt

假设我有以下 XML：

```
<element1 title="title1">
<element2 title="title2">
<element3 title="title1"> 
```

这里的属性 title`element1`与 和重复`element3`。我想找到所有重复的元素，`title`并用元素名称替换`title`值。因此，上面的示例将是：

```
<element1 title="element1">
<element2 title="title2">
<element3 title="element3"> 
```

XSLT 1.0 怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:56:53.783

**I. 这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "@title[. = ../preceding::*/@title
         or
          . = ../following::*/@title
          ]">
  <xsl:attribute name="title"><xsl:value-of select="name(..)"/></xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时：**

```
<t>
    <element1 title="title1"/>
    <element2 title="title2"/>
    <element3 title="title1"/>
</t> 
```

**产生想要的正确结果：**

```
<t>
   <element1 title="element1"/>
   <element2 title="title2"/>
   <element3 title="element3"/>
</t> 
```

* * *

**二、使用键可能更有效的解决方案：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kTitleVyVal" match="@title" use="."/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "@title[key('kTitleVyVal', .)[2]]">
  <xsl:attribute name="title"><xsl:value-of select="name(..)"/></xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

# jqgrid - jqGrid加载消息不起作用

> ID：11650103
> 
> 赞同：1
> 
> 时间：2012-07-25T12:49:40.603
> 
> 标签：jqgrid, jqgrid-asp.net

我在这里做错了什么？我应该有一个 loadText，我有一个，我将 loadui 设置为“阻止”。我到底做错了什么...

该数据正在使用 reloadGrid 命令加载...也许我应该设置 loadText 并加载 ui 呢？这是我设置jqGrid的方式...

```
$(document).ready(function () {
    $("#list").jqGrid({
        shrinkToFit: false,
        autowidth: true,
        datatype: 'jsonstring',
        mtype: 'POST',
        colNames: [
                    'Last Name',
                    'First Name',
                    'DOB',
                    'Gender',
                    'EMPIID',
                    'MedipacId',
                    'EPCID'
                    ],
        colModel: [
                    { name: 'Last_Name', width: 115, align: 'left' },
                    { name: 'First_Name', width: 115, align: 'left' },
                    { name: 'DOB', width: 115, align: 'left' },
                    { name: 'GENDER', width: 115, align: 'left' },
                    { name: 'EMPIID', width: 115, align: 'left' },
                    { name: 'medipacId', width: 145, align: 'left' },
                    { name: 'EPCID', width: 145, align: 'left' }
                ],
        rowNum: 10,
        rowList: [5, 10, 20, 50],
        sortname: 'Id',
        sortorder: "desc",
        loadui: 'block',
        loadtext: 'Does this thing every work?',
        viewrecords: true,
        imgpath: '/Content/themes/UPMC-theme/images',
        caption: 'Patient Return Result',
        ondblClickRow: function (id) {
            var rowData = $("#list").getRowData(id);
            var dummyURL = '@Url.Action("EditEncounter", "EditEncounterAdd", new { FirstName ="-1", LastName="-2", DOB = "-3", MRN="-4", popID = TempData["POPULATIONID"] })';
            var FName = rowData['First_Name'];
            var LName = rowData['Last_Name'];
            var DOB = rowData['DOB'];
            var MRN = rowData['medipacId'];
            var path = dummyURL.replace("-1", FName);
            var path = dummyURL.replace("-2", LName);
            var path = dummyURL.replace("-3", DOB);
            var path = dummyURL.replace("-4", MRN);
            debugger;
            document.location.href = path;
        }
    });
}) 
```

谢谢。 **更新：不……那行不通**

**更新：以下是我更新表格的方式**

```
$("#list").setGridParam({
            datatype: 'jsonstring',
            datastr: result,
            loadui: 'block',
            loadtext: 'what is good in the hood?',
            caption: 'Search Results'
        }).trigger("reloadGrid"); 
```

ps ...... loadui 和 loadtext 根本没有显示任何东西......我最想念的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:55:09.687

首先想到的是没有`url`选项，所以网格不知道从哪里加载数据......或者我错过了什么？

# c# - 防止 SQL 中的重复结果

> ID：11650104
> 
> 赞同：0
> 
> 时间：2012-07-25T12:49:44.503
> 
> 标签：c#, sql, list, combobox

我的应用程序中有一个组合框 ( `comboBox1`)，其中列出了我的 SQL 数据库中的类别。它目前正在正确提取数据。我唯一的问题是，当组合框中列出的数据时，有重复的结果。例如：

我希望它列出的内容：

```
Example 1
Example 2
Example 3 
```

它实际上列出了什么：

```
Example 1
Example 1
Example 1
Example 1
Example 1
Example 2
Example 2
Example 2
Example 3
Example 3
Example 3 
```

这是我用来列出数据的代码：

```
public void ListCat()
{
DataTable linkcat = new DataTable("linkcat");
using (SqlConnection sqlConn = new SqlConnection(@"Connection stuff;"))
{
using (SqlDataAdapter da = new SqlDataAdapter("SELECT name FROM list WHERE name <> 'NULL'", sqlConn))
{
da.Fill(linkcat);
}
}
foreach (DataRow da in linkcat.Rows)
{
comboBox1.Items.Add(da[0].ToString());
}
} 
```

简而言之，我的问题是如何防止列出重复数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T12:51:01.563

使用`DISTINCT`. 它将消除重复记录。

将您的查询更改为

```
SELECT DISTINCT name FROM list WHERE name <> 'NULL' 
```

假设您可能已将**字符串值`NULL`**存储在名称列中以获取某些记录。

如果您在名称字段中有**真正的 NULL**，您的查询应该是这样的

```
SELECT DISTINCT name FROM list WHERE name is not NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:52:11.383

采用`DISTINCT`

```
SELECT DISTINCT name FROM list WHERE name <> 'NULL' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:50:58.263

将 group by 添加到 SELECT 语句。

```
SELECT name FROM list WHERE name <> 'NULL' GROUP BY name 
```

# osgi - OSGi Web 应用程序教程

> ID：11650107
> 
> 赞同：2
> 
> 时间：2012-07-25T12:50:00.527
> 
> 标签：osgi

任何人都可以为我提供使用 JBoss Developer 创建 OSGi Web 应用程序的良好教程链接。我必须使用 OSGi 框架，但我不知道从哪里开始，我正在使用 JBoss 开发人员工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T06:26:37.563

[这里](http://www.javabeat.net/2011/11/writing-an-osgi-web-application/)有对 OSGi Web 应用程序的一般介绍，虽然它没有专门讨论 JBoss 或 JBoss 开发人员。然而，这些原则是相当普遍的。如果您可以创建一个普通的 OSGi 包和一个普通的 Web 应用程序，那么您就可以创建一个 OSGi Web 应用程序。

# c++ - 使用 QJson 库

> ID：11650108
> 
> 赞同：-1
> 
> 时间：2012-07-25T12:50:00.073
> 
> 标签：c++, qt, static-libraries, qjson

我知道这是一个愚蠢的问题，但仍然如此。

我想在我的项目中使用[QJson](http://qjson.sourceforge.net/usage.html)库。我已经从官方网站下载了压缩包（可能需要提到我在 64 位 Ubuntu 12.04 下）。*INSTALL*文件有以下说明

```
 mkdir build
  cd build
  cmake -DCMAKE_INSTALL_PREFIX=_preferred_path_ ..
  make
  make install
  /sbin/ldconfig, if necessary 
```

我准确地遵循了这一点。我已将QJson 的 和 文件夹添加到`/include`我`/lib`的.`share``/usr/local`

之后，我打开我的 IDE（即 QtCreator），并使用以下简单代码创建一个测试项目：

```
#include <QVariant>
#include <qjson/serializer.h>

int main(int argc, char *argv[])
{
    QJson::Serializer s;
    QVariantMap map;
    map["hello"] = QVariantList() <<"t1"<<"t2";
    QByteArray json = s.serialize(map);
} 
```

处理得`#include`很好，所有类型都被识别，QJson 类的自动完成工作正常。但是，在尝试编译时，我得到了这个（为了便于阅读，删除了完整路径）：

```
<...>/QJsonTest/main.cpp:15: undefined reference to `QJson::Serializer::Serializer()'
<...>/QJsonTest/main.cpp:18: undefined reference to `QJson::Serializer::serialize(QVariant const&)'
<...>/QJsonTest/main.cpp:18: undefined reference to `QJson::Serializer::~Serializer()'
<...>/QJsonTest/main.cpp:18: undefined reference to `QJson::Serializer::~Serializer()'
collect2: ld returned 1 exit status 
```

是什么原因，我该如何让它发挥作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T12:53:13.707

您遇到了链接器（而不是编译器）错误。您需要使用`-L`选项添加 QJson 库文件的路径

# richfaces - rich:fileUpload 没有上传按钮

> ID：11650116
> 
> 赞同：1
> 
> 时间：2012-07-25T12:50:21.987
> 
> 标签：richfaces

我正在使用 RichFaces 4.2.2，我想知道是否有任何方法可以在没有上传按钮的情况下实现 Rich:fileUpload？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:27:01.907

看看这里： [RichFaces 迁移指南。3.3.x - 4.x Migration](https://community.jboss.org/wiki/RichFacesMigrationGuide33x-4xMigration-ComponentsMigration-RichInputComponents) 表示尚未实现自动上传（它曾经在 3.3.x 中工作）

# html - 混入JSP美化HTML

> ID：11650118
> 
> 赞同：1
> 
> 时间：2012-07-25T12:50:25.283
> 
> 标签：html, jsp, coding-style

有谁知道可以处理（或至少忽略）JSP 的 HTML 美化器？我搜索了高低...我不是在寻找 HTML 验证器，只是可以体面地格式化文件的东西（即缩进）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:53:29.203

大多数优秀的 IDE 会让您说出在另一个文件扩展名中默认使用哪个代码模板。

所以我使用 PHPstorm，我可以说，例如 *.jsp 将`html`首先使用，然后`jsp`. 通过这种方式，页面将显示并重新格式化我的代码，并以正确的间距和不正确的间距。

假设您使用的是一个 IDE，值得研究一下您正在使用的 IDE：）

# android - 从 ArrayAdapter 获取所有项目

> ID：11650121
> 
> 赞同：19
> 
> 时间：2012-07-25T12:50:27.080
> 
> 标签：android

我有一个由 a`ListFragment`支持的`ArrayAdapter`，由 a 填充`Loader`。当用户单击其中一个项目时，我想将对所选项目以及列表项的其余部分的引用传递给另一个片段。我的问题是我应该如何从适配器中获取所有项目？以下是我看到的可能性：

**1.保留对支持的引用`List`**

像这样创建适配器：

```
List<DomainObject> items = new ArrayList<DomainObject>();
listAdapter = new ArrayAdapter<DomainObject>(getActivity(), R.layout.mine, items); 
```

然后简单地将其传递`items`或复制到下一个活动。

我看到的缺点是我依赖于未记录的事实，即我传递给构造函数的同一个列表包含稍后的项目。

**2\. 遍历适配器**

单击项目时，遍历适配器并建立列表。这似乎是不必要的工作量。这些项目包含在`List`适配器中，我手动将每个项目复制到一个新列表中。

**3.添加到适配器时保留单独的项目列表**

在将项目添加到适配器之前，将其添加到我在片段中维护的单独列表中。这也是浪费的，因为项目列表被复制到`ArrayAdapter`和片段中。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-12T14:23:05.230

我玩游戏有点晚了，但我遇到了类似的问题。

处理 #1 的一种方法是在 的子类中维护对列表的引用`ArrayAdapter`，以便您的重用由适配器对象控制。

就像是：

```
public class DomainAdapter extends ArrayAdapter<DomainObject> {

    private final List<DomainObject> items;

    public DomainAdapter(Context context, List<DomainObject> items) {
        super(context, R.layout.mine, items);
        this.items = items;
    }

    public List<DomainObject> getItems() {
        return items;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-16T23:25:39.737

我在此期间采用的解决方案就是不使用`ArrayAdapter`. 在您与此 API 作斗争的情况下，似乎最好只使用功能不太全面（且复杂）`BaseAdapter`的 。您可以阅读更多关于决定使用的信息，`BaseAdapter`而不是`ArrayAdapter`在这篇文章中：[Android Adapter Good Practices](http://www.piwai.info/android-adapter-good-practices)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T03:39:54.400

快速测试表明方法 1 有效。它似乎是最快和最干净的，但由于它没有记录，您可能希望在预期的平台上测试它，并在它们更新时进行测试，以防 ArrayAdapter 的底层结构发生变化。

我正在使用编译 SDK 版本 22 和最小 SDK 版本 10。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-20T09:00:12.900

最好的方法是“保留对列表的引用”但不将“项目”变量/参数传递给构造函数：

`List<DomainObject> items = new ArrayList<DomainObject>(); listAdapter = new ArrayAdapter<DomainObject>(getActivity(), R.layout.mine);`

这样，您只需将 ArrayList 实例化为一个空数组，您必须自己管理您的列表。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-25T13:07:15.317

我认为第一种方法是最好的方法。

我不认为，数据将是另一个活动的原始数据。因为，你会通过bundle传递项目，所以对象首先写在bundle上，然后在我们从bundle读取的下一个Activity中。

但是，如果您使用其他方式传递列表，请使用`list.clone()`创建新对象，而不是传递原始对象。

# c# - Lucene.Net 使用 Ninject InSingletonScope()

> ID：11650126
> 
> 赞同：3
> 
> 时间：2012-07-25T12:50:40.393
> 
> 标签：c#, singleton, ninject, lucene.net

阅读 Lucene，似乎建议在所有请求中使用相同的 IndexSearcher 实例。

如果我有一个使用 ninject 注入的搜索类

```
public interface IPatientSearch
{
    void DoSearch(ref SearchDTO _search);

    //...
} 
```

使用 InSingletonScope 绑定它会不会有任何问题，这将确保所有请求共享同一个实例？

```
 Bind<IPatientSearch>().To<PatientSearch>().InSingletonScope(); 
```

我错过了使用这种方法的任何明显缺陷吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:20:30.810

从 Lucene.NET 的角度来看，这里没有问题；假设您的实现`IPatientSearch`创建`IndexWriter`并使用它，应该没有任何问题。该类`IndexWriter`是线程安全的，访问 Lucene.NET 索引不会有任何问题。

但是，您必须确保实现的*所有其他方面*都是`IPatientSearch`线程安全的；如果从多个线程访问此单例，那么您在实现中拥有的任何其他状态都必须是线程安全的。如果您的类只是对 Lucene.NET 的调用的传递，那么您会很好，但如果您有其他状态，那么您需要确保对该状态的访问是同步的。

您可能希望围绕 Lucene.NET 创建一个瘦抽象，并将*其*设为单例以用于依赖注入，并让您的其他类正常实例化（除非您只需要该类的*一个*实例）。

# google-visualization - Google Geocharts：同一地图上的区域和标记？

> ID：11650130
> 
> 赞同：8
> 
> 时间：2012-07-25T12:50:52.953
> 
> 标签：google-visualization

我正在尝试使用 Google 的[GeoCharts](https://google-developers.appspot.com/chart/interactive/docs/gallery/geochart)。我有想要在城市数据上显示的州数据和城市数据。这意味着我想同时使用地理图表`regions`和`markers`显示模式。这是可以做到的，还是伪造的？我似乎找不到办法，但想知道是否有其他人取得了成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T08:02:11.490

如文档`mode`参数中所述，可以是`region`或`marker`。所以它们不能一起使用。我建议您尝试支持这种行为的[jVectorMap库。](http://jvectormap.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T10:26:07.710

通过一些 CSS hack，您可以使用标记模式并为您想要的区域着色。这并不容易，您必须知道要着色并制定高级 css 规则的 svg 地图的“子”路径。

例如：

```
#map_canvas path:nth-child(57) {
fill:#cccccc;
} 
```

查看此页面的最后一个示例，来自我的网站： [http ://cmoreira.net/interactive-world-maps-demo/advanced-customization/](http://cmoreira.net/interactive-world-maps-demo/advanced-customization/)

希望能帮助到你！干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T14:39:29.037

[VectorWorkz GeoChart](http://vectorworkz.com/)允许您在同一实例中定义区域颜色绑定和标记绑定，请查看[VectorWorkz 在线演示](http://vectorworkz.com/demo/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-04T21:12:29.453

我可以通过重叠两个图表来做到这一点，一个用于区域，一个用于标记（使用带有 z-index 的绝对 div）

您需要使用透明颜色作为标记层的样式 backgroundColor: 'transparent', datalessRegionColor: 'transparent', defaultColor: 'transparent' 并将其放在顶层

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-22T13:57:53.587

或者可能将一个“标记”类型的图表放在另一个“区域”类型的图表上？:)

# android - 不兼容问题（AndroidManifest）

> ID：11650132
> 
> 赞同：0
> 
> 时间：2012-07-25T12:50:57.250
> 
> 标签：android, android-manifest, android-compatibility

我在清单文件的设置上遇到了一些困难。由于兼容性问题，某些用户似乎无法下载我的应用程序。

我的应用程序不需要任何特别的东西，所以我只想了解在清单文件中设置哪些最佳选项..

现在我有：

```
<supports-screens 
 android:anyDensity="true" 
 android:resizeable="true" 
 android:normalScreens="true" 
 android:xlargeScreens="true" 
 android:largeScreens="true" 
 android:smallScreens="false" /> 
```

和

```
 <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="10"/> 
```

遇到此问题的一些用户（或者可能是所有用户）已经修改了 rom。有什么我应该关心的改装 rom 吗？

# asp.net - .net 类中的 CSS 链接属性

> ID：11650139
> 
> 赞同：1
> 
> 时间：2012-07-25T12:51:14.860
> 
> 标签：asp.net

如何在 main.css 的类中指定链接属性。

将标准链接属性放在 CSS 文件的未定义区域时很好。

```
a:link { color:white } 
```

但是，如果我想创建一个类，以便我只定义属性如何应用于菜单，则它会作为语法错误而出错。例如。

```
menuLinks {
           a:link { color:white }
} 
```

将显示为错误，那么如何在类中定义链接属性。我正在使用可视化 Web 开发人员 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:53:31.080

您不能“嵌套”大括号。

假设`menuLinks`是`id`对象的，使用这个......

```
#menuLinks a:link { color:white; } 
```

如果`menuLinks`是`class`对象的，使用这个...

```
.menuLinks a:link { color:white; } 
```

**更新**基于评论...

而不是像这样的单个块......

```
#Menu a:link { color:white; }
#Menu a:link { text-decoration:none; } 
```

您可以将它们组合成一个块...

```
#Menu a:link { color:white; text-decoration:none; } 
```

也可以这样写，这样更容易阅读，取决于你有多少项目......

```
#Menu a:link {
  color:white;
  text-decoration:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:53:34.840

使用[后代选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)

```
menuLinks a:link {} 
```

注意：

*   `menuLinks`将匹配`<menuLinks>`哪个不是有效的 HTML
*   CSS 没有类（也不是面向对象的编程语言）。它有规则，这些规则包含在规则集中，以选择器为前缀。（CSS 确实有一个选择 HTML（或其他标记语言）类的类选择器）
*   CSS 没有属性，它有值、属性、规则、规则集和其他一些东西。

# c# - 创建动态用户界面？

> ID：11650144
> 
> 赞同：5
> 
> 时间：2012-07-25T12:51:40.903
> 
> 标签：c#, user-interface

我主要是后端开发人员，但我正在从事前端设计。我在应用程序中只构建一个面板（表单）。我必须根据用户为先前参数选择的内容从表单中动态添加/删除其他项目。例如，面板顶部会有一个客户下拉菜单。我需要能够配置用户做出选择后将显示哪些其他下拉菜单。我将有至少 90 种不同的配置。每个配置将有大约 50 个参数。在 C# 中处理这种情况的最佳方法是什么？

我公司的某个人建议为每个配置使用一个新表单，因此我看到人们说要使用用户控件，而在其他地方则说要动态地将控件放在列表中并以这种方式生成内容。其中一些建议似乎违反直觉......

有人可以建议一个“正确”的方法来做到这一点吗？从这个角度来看，我以前只构建过一个表单，而且非常简单。（这是一个使用 .net 4.0 的桌面应用程序）

编辑：这是在 Winforms

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:18:09.483

在设计需要大量组件的表单时，您可以使用多种方法来获得所需的结果。看着一些可能性...

方法 1：为每个配置创建单独的表单

这不是一个坏主意，因为在用户做出选择后，您可以创建所需表单的新实例，但设置所有单独的表单需要一些时间，但并不困难。

方法 2：为每个配置创建多个面板

这与方法一类似，只是您最初会隐藏所有面板，然后显示用户选择的面板。您可以提前创建面板并隐藏或显示，也可以在运行时以编程方式进行。（如果您以非编程方式执行面板，那么在我看来，隐藏大量组件的面板有点不合适）

方法3；以编程方式创建所需的组件

您可以只编写代码来根据用户的选择生成所需的组件。

例子：

```
if(comboBox1.SelectedIndex == 0)
{
    ComboBox selection1 = new ComoboBox();
    selection1.Location = new Point(XXX,YYY); //Set location
    //You can add the events for the combobox, set up the properties 
    form1.Controls.Add(selection1); //Add the component to the form or panel that you want it displayed on

    //Write code to dynamically create next object(s)....
}
else if (comboBox1.SelectedIndex == 1)
{
    //Programmatically create components for selection2
} 
```

其中我认为方法 1 是最简单的，因为它只是将组件放置在表单上，​​但这会很耗时。在我看来，以编程方式可能是最优雅的，只要您为不同的可能性保持良好的代码组织，并且您没有大量的表单或面板需要处理。你只会弄乱组件。但是，当以编程方式创建组件时，分配属性也可能很耗时。

我不是 100% 确定最正式的方法是什么，但这些只是一些想法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:01:22.653

这是 WinForms 还是 WPF？

无论如何，您在设计器中所做的任何事情，都可以在运行时在代码中执行。添加控件只是创建新对象并分配属性：

赢表格：

```
Button btn = new Button();
btn.Name = "Dynamic Button";
btn.Id = "DynButton"
btn.Width = 50;
btn.Click = {...};
[...]
panel.Controls.Add(btn); // panel is a parent container control. You have to have a parent for you button. 
```

等等 WPF 几乎是相同的 - 控件、父级、容器等。

在您的情况下，您可能有一组最初隐藏的面板，其中包含所有内容，并且显示/隐藏它们取决于您的流程逻辑。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:39:34.467

作为一个 C# 人，我不能给你示例代码，但根据过去的经验，听起来你正在寻找的是[Decorator Pattern](http://en.wikipedia.org/wiki/Decorator_pattern)。

装饰器模式将允许您在运行时而不是编译时动态创建对象。您可以使用它来创建您的表单/按钮/之前输入的任何内容。

# ios - 停止 Cordova 控制台日志记录

> ID：11650148
> 
> 赞同：3
> 
> 时间：2012-07-25T12:51:44.590
> 
> 标签：ios, cordova, phonegap-plugins, cordova-2.0.0

我刚刚从 iOS 的 1.8.1 升级到 Cordova 2.0.0，文件访问的控制台日志让我很生气。我正在使用cordova file api加载一个巨大的文本文件，而cordova正在尝试将每一行记录到XCode中的控制台。在早期版本中并非如此。感谢这个新版本中的默认日志记录模式，我什至无法停止 XCode！

有没有办法停止或驯服科尔多瓦伐木？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:36:46.793

Shaz 正在寻找修复方法，但目前的解决方法是将您的方案设置为 Release。默认情况下，它是 Debug，它会像您所看到的那样冗长。

# iphone - iOS iPhone 中的可拖动按钮，以便在触摸结束后将自身重新定位到其原始位置。

> ID：11650149
> 
> 赞同：0
> 
> 时间：2012-07-25T12:51:46.593
> 
> 标签：iphone, ios, uibutton, drag

我正在制作一个应用程序，其中有不同颜色的不同按钮，如果我在特定视图上拖动此颜色按钮，其颜色必须更改为此按钮的颜色，并且颜色按钮应重新定位在其原始位置。我尝试了各种方法，例如开始触摸和结束触摸，但似乎并没有解决我的问题。我还尝试了在各种 uicontrolstate 上触发的自定义方法，但效果不佳。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:47:46.937

我认为您使用 touchesBegan、touchesMoved 和 touchesEnded 可以解决问题。

touchesBegan 是标记orignPosition。

```
CGPoint orignPosition;
CGColor buttonColor;
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    UIView *touchView = [touch view];
        if ([touchView isKindOfClass:[UIButton class]]) 
        {
            orignPosition = (UIButton *)touchView.center;
            buttonColor = (UIButton *)touchView.backgroundColor;
        }
} 
```

touchesMoved 是让按钮用手指移动

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    UIView *touchView = [touch view];
    CGPoint movedPoint = [touch locationInView:yourMainView];
        CGPoint deltaVector = CGPointMake(movedPoint.x - lastTouchPoint.x, movedPoint.y - lastTouchPoint.y);
    lastTouchPoint = movedPoint;

    if ([touchView isKindOfClass:[UIButton class]])
        {
        touchView.center = CGPointMake(touchView.center.x + deltaVector.x, touchView.center.y + deltaVector.y);
        }
} 
```

touchesEnded 是判断是否改变你的特殊视图的颜色

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{   
    UITouch *touch = [touches anyObject];
    UIView *touchView = [touch view];
        CGPoint movedPoint = [touch locationInView:scrollView];
        if ([touchView isKindOfClass:[UIButton class]]) 
        {
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:0.3];
            (UIButton *)touchView.center = orignPosition;
            [UIView commitAnimations];
        }
        if(CGRectContainsPoint(specialView.frame, [touch locationInView:yourMainView]))
        {
            [yourMainView setBackgroundColor:buttonColor];
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:15:12.533

我认为您不需要使用按钮，您可以创建 UIView，为其设置背景颜色，并为其添加平移手势。在 .h 文件中创建一些变量：

```
UIView *green;
CGRect initialPosition; 
```

在 .m 文件中的 init 方法中添加类似这样的东西

```
initialPosition = CGRectMake(0, 0, 44, 44);
green = [[UIView alloc]initWithFrame:initialPosition];
green.backgroundColor = [UIColor greenColor];
UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(habdlePan:)]
[green addGestureRecognizer:green];
[panGesture release];
[self.view addSubview:green];
[green release]; 
```

HandleTap 必须像：

```
- (void) habdlePan:(UIPanGestureRecognizer *)panGesture {
    //Move your button here
    if(gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        //All fingers are lifted.
        //Return btn to init position
        [UIView beginAnimations:nil context:nil];
        green.frame = initialPosition;
        [UIView commitAnimations];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:43:56.567

我建议您使用`UIImageView`而不是`UIButton`. 设置`[UIImageView userInractionEnabled:YES]`。会更好。`imageView`您可以使用`touchBegin:`和`touchMove:`方法轻松拖动。

# android - ViewPager 离屏页面限制

> ID：11650152
> 
> 赞同：30
> 
> 时间：2012-07-25T12:52:03.503
> 
> 标签：android, android-fragments, android-viewpager

有没有办法绕过正常行为`ViewPager`及其*屏幕外页面限制*？My`ViewPager`包含四个`fragments`，每个包含一个`gridview`图像。我遇到的问题是，在实例化时`ViewPager`，会创建两个`fragments`，这导致同时从 catch 下载/获取大约 20 个图像（每个片段大约 10 个）。是否可以禁用屏幕外页面限制？

我的目标是仅在`fragment`选择 a 时或仅当用户悬停图像时才下载图像。实现此目的的一种方法是使用`onPageSelected`侦听器并设置一个标志，该标志告诉`GridViewAdapter`它是否允许下载图像。

我能想到的第二种方法是在 上设置 a `HoverListener`，`ImageView`并且只在 上下载图像`onHover`，但该监听器仅在 4.0 及更高版本中可用。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-25T13:16:33.330

> 是否可以禁用屏幕外页面限制？

不。它已经设置为可能的最小值：查看页面的每一侧都有一个页面。这是让动画效果正常工作所必需的——您可以同时看到两个片段（原始片段和新片段）的一部分。

> 我的目标是仅在选择片段时下载图像，或者仅在用户悬停图像时下载图像。

然后使用占位符图像加载您的网格，并且在页面更改之前不要加载真实图像。

另外，请注意，“悬停”意味着某种鼠标或类似的指针，大多数 Android 设备上都没有使用。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-07-25T12:58:30.273

只需将屏幕外限制设置为 1。

```
ViewPager mViewpager = (ViewPager)findView....
mViewPager.setOffscreenPageLimit(1); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-18T09:36:21.760

> 我的目标是仅在选择片段时下载图像

您可以`setUserVisibleHint(boolean isVisibleToUser)`在 ViewPager 中使用片段的回调。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-01T03:20:01.700

处理`viewPager.addOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener()`

在其中，在使用`position + 1`前后删除额外的视图（即限制寻呼机仅加载 3 个页面：当前、上一个和下一个。`position - 1``viewPager.removeViewAt(int)`

然后你应该`destroyItem`在 viewpager 适配器中`recycle()`处理被破坏视图中的位图。

```
@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    LinearLayout layout = (LinearLayout) object;
    ((ViewPager) container).removeView(layout);
    ImageView imgDisplay = (ImageView) layout.findViewById(R.id.quranPage);
    Drawable drawable = imgDisplay.getDrawable();
    if (drawable instanceof BitmapDrawable) {
        BitmapDrawable bitmapDrawable = (BitmapDrawable) drawable;
        Bitmap bitmap = bitmapDrawable.getBitmap();
        if (bitmap != null) //when reading page fails, this will be null
            bitmap.recycle();
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-16T07:43:45.343

您也可以使用 Android 数据绑定在 xml 中执行此操作：

```
<android.support.v4.view.ViewPager
    [...]
    app:offscreenPageLimit="@{1}"
    [...]
</android.support.v4.view.ViewPager> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-12T00:57:42.413

为了避免在没有用户实际滚动到片段的情况下下载图像，您可以覆盖“setUserVisibilityHint (boolean visibleToUser)”并仅在“visibleToUser”变为 true 时加载图像

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-13T13:18:54.283

`mViewPager.setOffscreenPageLimit(1);`不会给你想要的，如果它还没有加载，它将加载邻居片段（这意味着它将加载 2 个片段）。

假设您想一次加载所有片段（4 个片段），则仅使用`setOffscreenPageLimit(3)`，否则避免使用`setOffscreenPageLimit`。

我认为您无法更改 viewpager 加载邻居片段的默认行为。

# svn - svn结账深度

> ID：11650156
> 
> 赞同：46
> 
> 时间：2012-07-25T12:52:12.703
> 
> 标签：svn, svn-checkout

我有一个像这样的树的 SVN 项目：

```
/project
    /dir1
        /subdir1
           -file1
           -file2
            .....
        -file1
        -file2
        .....
    /dir2
        -file1
        -file2
        .....
    /dir3
        /subdir1
           -file1
           -file2
            .....
        /subdir2
           -file1
           -file2
            .....
        /subdir3
           -file1
           -file2
            .....
        /subdir4
           -file1
           -file2
            .....
    /dir4
        -file1
        -file2
        .....
-file1
-file2 
```

我需要结帐

*   /project 中的所有文件
*   完整的 /dir1
*   完整的 /dir2
*   完整的 /dir4
*   从 /dir3 我只需要 /subdir1 和 /subdir3

我可以使用具有某种深度的 svn 命令行检查这些文件/文件夹吗？如果是这样，我该怎么做？我可以在结帐后将 subdir2 添加到 dir3 吗？如何更新以这种方式创建的工作副本？正常的“svn up”命令会只更新这些文件夹还是会执行项目的完整更新？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-25T20:51:11.457

您需要的称为[稀疏结帐](http://svnbook.red-bean.com/en/1.7/svn.advanced.sparsedirs.html)。

在您的情况下，您可以：

```
svn co --depth files file:///project project
cd project
svn up --set-depth infinity dir1 dir2 dir4
svn up --set-depth empty dir3
svn up --set-depth infinity dir3/subdir1 dir3/subdir3 
```

> 我可以在结帐后将 subdir2 添加到 dir3 吗？

是的：`svn up --set-depth infinity dir3/subdir2`

> 如何更新以这种方式创建的工作副本？正常的“svn up”命令会只更新这些文件夹还是会执行项目的完整更新？

是的，`svn up`只会更新这些文件和文件夹，即会保留更新深度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-29T12:54:27.497

1.  `svn up --set-depth empty file/folder path`

*   =>它将从您的系统中删除文件**

2.  `svn up --set-depth infinity file/folder path`

*   => 它会将文件从 svn 服务器重新生成到您的本地系统**

# web-services - beantalk 应用程序运行状况变为红色

> ID：11650158
> 
> 赞同：2
> 
> 时间：2012-07-25T12:52:22.147
> 
> 标签：web-services, amazon-web-services, amazon-elastic-beanstalk

我有一个可以在 ubuntu ec2 微型实例上完美运行的应用程序，我试图让它在 beanstalk 上运行，并且由于某种原因我加载了页面并且正在加载 70 多个资产（它处于开发模式），它结束了中途崩溃了。负载均衡器似乎会自动将其转换为黄色，然后是红色几秒钟，然后一旦转换所有资产失败并出现 503 错误，它就会恢复为绿色。当我查看监控时，所有级别都很低，CPU 几乎没有峰值。

我想知道的是如何解决导致负载均衡器开始返回 503 的问题。我也想知道这怎么可能，beantalk 的想法不是允许应用程序自动缩放吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:54:20.523

我会仔细查看 503，看看它们是由 ELB 还是后端实例生成的？这与 CloudWatch 上的 Unhealthyhost 计数指标密切相关。在此之后，我建议重新访问负载均衡器上的运行状况检查配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-11T12:32:38.207

对我来说，这是因为健康检查配置不正确。

转到日志并找到与“ELB-HealthChecker”相关的内容。您将看到四个数字，而左边的一个是 http 状态码。它必须是 200。此外，如果您的运行状况检查 URL 返回正文，请确保“Content-Length”标头值为零。

# php - 将数据插入MySql DB并显示插入成功或失败

> ID：11650160
> 
> 赞同：16
> 
> 时间：2012-07-25T12:52:31.203
> 
> 标签：php, mysql

我正在将数据插入 MySQL 数据库，如果插入失败，我需要给出适当的错误消息来指示。根据我下面的代码，如果插入成功或失败，我将成为`Echo-ing`消息。`Inserted`

我想要做的是`Inserted`仅在数据插入成功时才回显消息，`fail`如果失败则返回。我如何修改我的代码来做到这一点？

```
<?php

mysql_connect("localhost", "root", "123") or die(mysql_error());
mysql_select_db("swm_database") or die(mysql_error());

mysql_query("INSERT INTO PEOPLE (NAME ) VALUES ('COLE')")or die(mysql_error()); 

echo "Inserted";
?> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-25T12:54:31.407

```
$result = mysql_query("INSERT INTO PEOPLE (NAME ) VALUES ('COLE')"));
if($result)
{
echo "Success";

}
else
{
echo "Error";

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-21T08:33:31.107

根据[PHP and MySQL for Dynamic Web Sites (4th edition)一书](https://rads.stackoverflow.com/amzn/click/com/0321784073)

**例子：**

```
$r = mysqli_query($dbc, $q); 
```

**对于像INSERT**、**UPDATE**、**DELETE**等简单查询（不返回记录），`$r`变量（结果的缩写）将是**TRUE**或**FALSE**，具体取决于查询是否成功执行。

请记住，“执行成功”意味着它运行没有错误；这并不意味着查询的执行一定会产生预期的结果；您需要对此进行测试。

**那么如何测试呢？**

虽然该`mysqli_num_rows()`函数将返回**SELECT**查询生成的行`mysqli_affected_rows()`数，但返回受**INSERT**、**UPDATE**或**DELETE**查询影响的行数。它是这样使用的：

```
$num = mysqli_affected_rows($dbc); 
```

与 不同`mysqli_num_rows()`的是，该函数采用的一个参数是数据库连接（**$dbc**），而不是前一个查询的结果（**$r**）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T12:55:00.017

查询后`INSERT`，您可以使用`ROW_COUNT()`以下方式检查插入操作是否成功：

```
SELECT IF(ROW_COUNT() = 1,  "Insert Success", "Insert Failed") As status; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T12:57:17.087

检查： http: [//php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-25T12:55:04.673

```
if (mysql_query("INSERT INTO PEOPLE (NAME ) VALUES ('COLE')")or die(mysql_error())) {
  echo 'Success';
} else {
  echo 'Fail';
} 
```

虽然既然你有`or die(mysql_error())`它，它会在失败时在屏幕上显示 mysql_error() 。如果它不是所需的结果，您可能应该删除它

# javascript - 突出显示要完成的正确字母

> ID：11650164
> 
> 赞同：0
> 
> 时间：2012-07-25T12:52:49.027
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

在我的拖放游戏中，我目前有一种样式可以向用户显示要拼写的单词，但它没有任何约束来确保他们不会在除第一个单词的第一个单元格之外的任何其他地方放置一个字母。

我将如何确保用户只能在单词的第一个字母中删除一个字母？

或者有没有办法让放置在放置区域的任何字母向左滑动，以便它们按顺序放置？

这是将样式应用于要拼写的单词的代码...

```
$('#pickNext').click(function() {
// remove the class from all td's
$('td').removeClass('spellword');
// pick a random word
rndWord = shuffledWords.sort(function() {
    return 0.8 - Math.random();
})[0];
// apply class to all cells containing a letter from that word
$('td[data-word="' + rndWord + '"]').addClass('spellword');
}); 
```

这是我的拖放脚本...

```
$('.drag').draggable({

helper: 'clone',
snap: '.drop',
grid: [60, 60],
revert: function(droppable) {
    if (droppable === false) {
        return true;
    }

    else {

        return false;
    }
}
});

$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));
    console.log($(event));
    console.log($(ui.draggable).text());

    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    if ($(this).text() == $(ui.draggable).text().trim()) {

        $(this).addClass('wordglow3');
    } else {
        $(this).addClass('wordglow');
    }
    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass('wordglow2');

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow4");
            guesses[word].splice(0, guesses[word].length);
        }
    }
}, 
```

要应用的样式将是...

```
 .spellLetter {

-webkit-box-shadow: inset 20px 0px 10px 5px #176BC9;
box-shadow: inset 0px 0px 10px 5px #176BC9;

 } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:42:39.707

这是一个更新的小提琴[http://jsfiddle.net/bmgonzal/uu99V/](http://jsfiddle.net/bmgonzal/uu99V/) @m0onio

# iphone - 截屏并再次将其设置为 UIImageView 使其尺寸更小？

> ID：11650181
> 
> 赞同：0
> 
> 时间：2012-07-25T12:53:53.497
> 
> 标签：iphone, objective-c, uiimageview, uiimage, screenshot

我正在做一个项目，我需要在特定时间间隔以编程方式截取 UIImageView 并将该图像设置回该 UIImageView。但是当我这样做时，UIImageview 的图像尺寸比前一个更小。下面是我如何截取屏幕截图的代码。

```
- (UIImage*)screenshot 
{
    // Create a graphics context with the target size
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
    CGSize imageSize = [[UIScreen mainScreen] bounds].size;
    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
    else
        UIGraphicsBeginImageContext(imageSize);

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIWindow *window in [[UIApplication sharedApplication] windows]) 
    {
        if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
        {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);
            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [window center].x, [window center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [window transform]);
            // Offset by the portion of the bounds left of and above the anchor point
            CGContextTranslateCTM(context,
                                  -[window bounds].size.width * [[window layer] anchorPoint].x,
                                  -[window bounds].size.height * [[window layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[window layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);
        }
    }

    // Retrieve the screenshot image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return image;
} 
```

我把它设置为

```
theImageView.image=[self screenshot]; 
```

为什么图像每次都带有较小的尺寸？而且它变得越来越小。

请分享解决方案。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:42:54.150

这段代码帮助我以更好的方式截屏

```
- (UIImage*)screenshot 
{
    CGRect rect = CGRectMake(0, 0, 320, 480);
    UIGraphicsBeginImageContextWithOptions(rect.size,YES,0.0f);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:context];   
    UIImage *capturedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return capturedImage;
} 
```

# authentication - Liferay中的页面分类和二级认证页面

> ID：11650183
> 
> 赞同：1
> 
> 时间：2012-07-25T12:53:54.180
> 
> 标签：authentication, content-management-system, system, liferay, categories

我想知道我是否可以在 Liferay CMS 中对页面进行分类，所以当我创建页面时，我可以有一个下拉菜单选择（公共或分类）

**如果是 Public ：**表示系统上的所有用户都可以查看此页面。

**如果它是分类的：**它应该询问第二个身份验证级别然后如果第二个身份验证级别正确然后将它们定向到请求的页面但是当过程完成或取消时，它应该结束第二个身份验证级别会话并且一旦我尝试要访问相同的分类页面或另一个分类页面，它应该再次询问我。

可以直接从 Liferay 系统完成还是我需要在其中进行编程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:29:54.350

我认为这是在 Liferay 中开箱即用的。在 liferay 中，我们有公共和私人页面的概念。

将其映射到您的要求 Liferay 中的每个社区（站点）都会有公共和私人页面，

公共页面 = Liferay 中的公共页面。来宾用户可以看到它。

Private Pages = Classifieds，需要一个人登录才能看到这些页面。

我认为这类似于奥拉夫先生提到的内容，因为用户需要拥有一组权限才能查看页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:17:00.130

如果您需要受保护的页面/内容（基于用户角色），这已经是 Liferay 的一部分，开箱即用。

如果您需要不同级别的身份验证（例如，用户名/密码与智能卡），您可能需要考虑添加提供不同身份验证方法的 SSO 解决方案。SSO 解决方案在 Liferay 中开箱即用，您可能需要进行一些自定义来确定身份验证方法并将其映射到 Liferay 可以检查的某些角色（Liferay 中的所有权限都与角色相关联）。

# c# - 从匿名对象中获取值

> ID：11650186
> 
> 赞同：0
> 
> 时间：2012-07-25T12:54:04.387
> 
> 标签：c#, wpf, listview, anonymous-types

我有一个 ListView（在 WPF 应用程序中），我以编程方式填充它：

```
l1.Items.Add(new
{
    AA = aa++,
    Description = descriptions[k],
    Shop = names[k + 2],
    Price = price
}); 
```

我想取第一行和列价格的值。我可以拿走对象

`object b = l1.Items.GetItemAt(0);`

但我不能接受这个价格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T12:57:26.083

您可以`dynamic`为此使用关键字。

```
dynamic b = l1.Items.GetItemAt(0); 
var price = b.Price; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T12:57:42.467

一旦匿名对象超出范围，您只能使用反射（不推荐）、动态（这会使您失去编译时类型安全）或其他一些技巧来访问其属性。

最干净的解决方案是使用*非匿名*对象，即定义一个类：

```
public class MyData {
    public int AA { get; set; }
    public string Description { get; set; }
    ...
}

...

l1.Items.Add(new MyData { AA = aa++, Description = descriptions[k], ...});

...

MyData b = (MyData) l1.Items.GetItemAt(0);
int aaValueOfB = b.AA; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T12:57:26.473

您可以使用`dynamic`c# 4 中的功能，如下所示：

```
dynamic item = l1.Items.GetItemAt(0);
double price = item.Price; 
```

您还可以使用反射（在幕后动态使用）：

```
object item = l1.Items.GetItemAt(0);
Type t = item.GetType();
PropertyInfo pi = item.GetProperty("Price");
object price = pi.GetValue(item, null); 
```

或者，如果它在应用程序中有意义，只需将其声明为常规类，并照此使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T12:58:33.527

一旦它进入`object`，您就无法将其抛出。你有两个选择：

*   使用`dynamic`关键字来回避输入值。

    ```
    dynamic d = l1.Items.GetItemAt(0);
    var price = d.Price; 
    ```

*   使用实际类而不是匿名类型。

就个人而言，我会上课：

```
public class ItemsModel
{
    // Define the properties, etc.
} 
```

因为您可能希望`INotifyPropertyChanged`实现数据绑定。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-25T13:01:46.537

正如人们已经说过的，您可以使用 C# 中的动态关键字。另一种选择（如果您知道您的对象结构）是使用反射来获取相关属性并提取其值。

```
List<object> collection = new List<object>
{
    new { Age1 = 1, Name = "Mr. Someone" } 
};            

// you can use reflection
object anonymous = collection.First();
var parameterInfo = anonymous.GetType().GetProperty("Name");
string name1 = (string)parameterInfo.GetValue(anonymous, null);

// another way
dynamic dynamicObject = collection.First();
string name2 dynamicObject.Name; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T13:12:09.863

尝试这个：

```
private static T GetAnonType<T>(T type, object obj)
        {
            return (T)obj;
        }

Object obj= l1.Items.GetItemAt(0);

var info = GetAnonType(new { AA = aa++, Description = descriptions[k], Shop = names[k + 2], Price = price},obj); 
```

对 AA、描述等参数使用默认值。

然后你可以使用`info.AA, info.Price`等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T13:18:04.797

我是匿名类型的新手，但您可能需要将对象转换为该类型：

```
private static T CastTo<T>(this Object x, T targetType)
{
    return (T)x;
}
...
var tmp = new { AA = 0, Description = "", Shop = "", Price = 0.0}
tmp = l1.Items.GetItemAt(0).CastTo(tmp);
string price= "Price = " + tmp.Price; 
```

确保将使用正确的类型初始化 tmp 属性。

# c# - 在 WebView 控件中的 c#/xaml Metro 应用程序中下载文件

> ID：11650187
> 
> 赞同：0
> 
> 时间：2012-07-25T12:54:13.783
> 
> 标签：c#, xaml, webview, windows-8, microsoft-metro

我正在开发一个地铁风格的应用程序。我正在使用 WebView 控件来访问该网站。现在当我想下载一些东西时，我无法弹出保存它，我得到的只是空白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:23:32.963

根据[这个 MSDN Social conversation](http://social.msdn.microsoft.com/Forums/en-GB/winappswithcsharp/thread/98d4fab5-0ba0-41cd-83ba-4dbf548f9ffe)，你想要的都是不可能的。

*Hpcd（合作伙伴）*：

> 您好我将一个外部网页加载到 WebView 中。该页面包含一个下载文件的链接。当我单击链接时，没有任何反应。如果我单击指向其他 html 页面的常规链接，它会重定向。在 Metro IE 中，当您单击要下载的链接时，会打开带有运行、保存、取消按钮的命令魅力。如何从 WebView 执行此操作？谢谢

*马特小微软（MSFT）*：

> 你不能这样做。

# jquery - django 和 ajax 返回数据

> ID：11650188
> 
> 赞同：0
> 
> 时间：2012-07-25T12:54:14.600
> 
> 标签：jquery, ajax, django

我正在尝试实现一个非常简单的 ajax 调用，但是自从我的第一个调用以来，出现了问题，我找不到原因。在用户从下拉列表中选择之后，我希望在相应查询之后完成表单的另一个字段。这是我的代码：jquery：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#id_veh_id1').bind('click', function () {
            var val1 =$("#id_veh_id1").val();
            $.get(""+val1+"/", function(data) {
                result=data.veh_length;
                document.getElementById('id_vlength').value=result;
            });
        });
    });
</script> 
```

带网址：`url(r'^(?P<user_id>\d+)/main_Webrequests/(?P<veh_id>\d+)/$', 'auth.views.test', name='test')`

并查看：

```
def test(request, veh_id, user_id):   
    message = {"veh_length": ""}
    if request.is_ajax():
        vehicle1 = Vehicles.objects.get(id = veh_id)
        veh_length = vehicle1.vlength
        message['veh_length'] = vehicle1.vlength
    else:
        message = "yoohoo"
        json = simplejson.dumps(message)
    return HttpResponse(json, mimetype='application/json') 
```

当我尝试`veh_id`而不是`veh_length`一切似乎都很好，但也许我对整个事情不太了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:47:05.547

simplejson 无法将 a 转储`Decimal`到 JSON，您应该可以通过以下方式解决该问题：

```
message['veh_length'] = "%d" % vehicle1.vlength 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:34:25.210

我认为您需要在 django 代码中序列化您的 json 数据.....查看此链接以获取更多参考..

[https://docs.djangoproject.com/en/dev/topics/serialization/](https://docs.djangoproject.com/en/dev/topics/serialization/)

# php - 使用 PDO 的 SELECT 查询失败，在 phpMyAdmin 中有效

> ID：11650189
> 
> 赞同：0
> 
> 时间：2012-07-25T12:54:14.627
> 
> 标签：php, mysql, sql

数据库

```
start                  end
2012-07-21 15:40:00    2012-07-28 21:00:00
2012-07-23 20:00:00    2012-07-27 13:00:00 
```

这是我通过 phpMyAdmin 运行并返回正确的行

```
SELECT * 
FROM  `events` 
WHERE  "2012-07-25 15:40"
BETWEEN START AND END 
```

但是在我的 php 代码中，我在下面发布的我无法得到任何结果。（表格提交的所有数据均已发布 100% ）。我错过了什么？

```
$question= 'SELECT * FROM events WHERE ';

$hasTime = false;
if(!empty($time)) { // @note better validation here
    $hasTime = true;
    $question .= 'WHERE time=:time BETWEEN start AND end';
}
$hasCity = false;
if(!empty($city)) { // @note better validation here
    $hasCity = true;
    $question .= 'AND city=:city ';
}
$hasType = false;
if(!empty($type)) { // @note better validation here
    $hasType = true;
    $question .= 'AND type=:type';
}

$query = $db->prepare($question);

if($hasTime)
    $query->bindValue(":time", $time, PDO::PARAM_INT);
if($hasCity)
    $query->bindValue(":city", $city, PDO::PARAM_INT);
if($hasType)
    $query->bindValue(":type", $type, PDO::PARAM_INT);

$query->execute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:56:47.037

```
$question= 'SELECT * FROM events WHERE ';

$hasTime = false;
if(!empty($time)) { // @note better validation here
    $hasTime = true;
    $question .= 'WHERE time=:time BETWEEN start AND end';
} 
```

您将`WHERE`在查询中结束两次，这是一个语法错误。改变

```
$question .= 'WHERE time=:time BETWEEN start AND end'; 
```

至

```
$question .= 'time=:time BETWEEN start AND end'; 
```

**编辑**

请改用此代码。如果`time`未指定，这可以避免其他潜在的语法错误。

```
// Store where clauses and values in arrays
$values = $where = array();

if (!empty($time)) { // @note better validation here
    $where[] = ':time BETWEEN `start` AND `end`';
    $values[':time'] = $time;
}

if (!empty($city)) { // @note better validation here
    $where[] = '`city` = :city';
    $values[':city'] = $city;
}

if (!empty($type)) { // @note better validation here
    $where[] = '`type` = :type';
    $values[':type'] = $type;
}

// Build query
$question = 'SELECT * FROM `events`';
if (!empty($where)) {
    $question .= ' WHERE '.implode(' AND ', $where);
}

$query = $db->prepare($question);

$query->execute($values); 
```

# android - 基于电话号码的android搜索联系人列表

> ID：11650195
> 
> 赞同：1
> 
> 时间：2012-07-25T12:54:40.143
> 
> 标签：android, android-contacts

我有以下代码：

```
public String getContactDisplayNameByNumber(String number) {

        Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));
        String name = "?";

        ContentResolver contentResolver = getContentResolver();
        Cursor contactLookup = contentResolver.query(uri, new String[] {BaseColumns._ID,
                ContactsContract.PhoneLookup.DISPLAY_NAME }, null, null, null);

        try {
            if (contactLookup != null && contactLookup.getCount() > 0) {
                contactLookup.moveToNext();
                name = contactLookup.getString(contactLookup.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
                //String contactId = contactLookup.getString(contactLookup.getColumnIndex(BaseColumns._ID));
            }
        } finally {
            if (contactLookup != null) {
                contactLookup.close();
            }
        }
        Toast.makeText(this, name, Toast.LENGTH_LONG).show();

        return name;
    } 
```

我想问一下是否可以仅根据电话号码中的 4 个号码搜索联系人列表。我想显示电话号码中显示 4 个字符的所有联系人。这个怎么做？

# java - 线程问题..内部类..字段

> ID：11650197
> 
> 赞同：0
> 
> 时间：2012-07-25T12:54:48.973
> 
> 标签：java, thread-safety, field, inner-classes, performance-testing

我有一个线程问题..

我正在使用内部类进行查找..我一直在阅读如何正确执行此操作，并且所有内容都指向使用字段..在我的情况下是“布尔验证”。

基本上如果对象在那里。我将字段声明为 true 并返回值。问题是，在性能测试期间，同一对象中的同一方法同时在多个线程中被调用，并且效果很有趣。（我猜是因为 pause() （等待 10 毫秒））

所以在线程A..那里的对象，所以它声明字段true..waits 10ms..在线程B..对象不存在，但由于等待并且正在访问相同的字段，它无论如何都会返回true。

我在这里遇到了麻烦:(

有谁知道更好的方法来做到这一点？

```
boolean verify; 
  public boolean lookupAndVerify(String id) throws InterruptedException
  {
    final String key = id;
    PastryIdFactory localFactory = new rice.pastry.commonapi.PastryIdFactory(env);
    final Id lookupKey = localFactory.buildId(key);
    Past p = (Past) apps.get(env.getRandomSource().nextInt(apps.size()));
    p.lookup(lookupKey, new Continuation<PastContent, Exception>()
    {
      public void receiveResult(PastContent result)
      {
        P2PPKIContent content = (P2PPKIContent) result;
        if(content !=null){
        verify = true; 
        }
      }
      public void receiveException(Exception result)
      {
        System.out.println("Error looking up " + lookupKey);
      }
    });
    pause();
    return verify;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:06:45.873

我认为您可以对异步调用进行一些研究。暂停一定的毫秒数*不是*确保回调已被调用的安全方法，并且正如您所说，`verify`如果对象由多个线程共享，则创建字段将不起作用。

您可以使用的一个选项是[`Future<Boolean>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)（在这种情况下，[`SettableFuture<Boolean>`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/SettableFuture.html)来自 Guava 库很方便）：

```
final SettableFuture<Boolean> verify = new SettableFuture<Boolean>();

p.lookup(lookupKey, new Continuation<PastContent, Exception>()
{
  public void receiveResult(PastContent result)
  {
    P2PPKIContent content = (P2PPKIContent) result;
    if(content !=null){
       verify.set(true);
    }
  }
  public void receiveException(Exception result)
  {
    System.out.println("Error looking up " + lookupKey);
    verify.set(false);
  }
});

return verificationQueue.get(); //this will block until verify has been set! 
```

A是一个并发构造，它将*在未来的某个时间*`Future<T>`具有值。但是，只要您要求它的值，它就会阻塞，直到它具有值为止。

 *## 编辑

如果由于某种原因你不能引入 Guava，一个稍微不那么直观的解决方案是使用[`BlockingQueue<Boolean>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)容量为 1 的 a：

```
final BlockingQueue<Boolean> verificationQueue = new ArrayBlockingQueue<Boolean>(1);

p.lookup(lookupKey, new Continuation<PastContent, Exception>()
{
  public void receiveResult(PastContent result)
  {
    P2PPKIContent content = (P2PPKIContent) result;
    if(content !=null){
       verificationQueue.put(true);
    }
  }
  public void receiveException(Exception result)
  {
    System.out.println("Error looking up " + lookupKey);
    verificationQueue.put(false);
  }
});

return verify.take(); //blocks until an item has been put on the queue 
```

如果您打算这样做，则值得将队列封装在一个具有更可读 API 的类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:06:53.970

*如果不需要*共享，您应该为每个线程创建其中一个对象（省略类名，所以我不能具体说明） 。*

# objective-c - iOS 委托命名约定 - 应该、将、已

> ID：11650200
> 
> 赞同：7
> 
> 时间：2012-07-25T12:55:01.770
> 
> 标签：objective-c, ios, cocoa-touch

我正在研究 iOS 控件代表的命名约定。我熟悉[委托方法的 should, will, did 模式](http://mattgemmell.com/2012/05/24/api-design/)。我可以看到 Apple API 广泛使用的这种命名约定。我的问题是，苹果提供的代表是否应该、将、是否为单个操作提供方法？例如对于行选择：

```
shouldSelectRow
willSelectRow
didSelectRow 
```

我还没有找到定义所有这三个的代表。我的感觉是'will' 方法经常被用来代替should，即它们可以返回一个值来取消操作。

有没有反例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:30:33.300

方法应该总是返回一个 BOOL 值，并告诉你一个对象的当前行为（但它们永远不会自动调用）。Will 方法是在事件即将发生时调用的委托方法，例如

```
-(void)applicationWillResignActive... 
```

和“did”方法也是在事件发生后调用的委托方法，例如 appplicationDidFinishLaunching...

# jboss - JBoss AS 7 对同一耳朵中其他模块中的类的引用

> ID：11650209
> 
> 赞同：0
> 
> 时间：2012-07-25T12:55:22.573
> 
> 标签：jboss

您好，我尝试从 jboss 4.2.3 迁移到 jboss 7，但遇到了一些问题。我的问题是，当战争（dts.war）中需要它时，我如何在其他 jar 中指向一个类（dts.jar 中的 ChartGenerateVariables.class）。如何编辑他知道其他模块中所需类的战争（这次是在 jar 文件中）和其他问题是如何解决此错误无法使用 PersistenceUnitInfo.getNewTempClassLoader 加载实体类“com.recglobal.dts.model.views.PlanSalesValue”（ ）。关于这个问题，我没有任何线索，因为这次它不是 jar 文件或其他东西，而是它自己的类，只是它是一个 @Entity。也许有些人现在会对此有所了解。

```
12:19:26,839 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed to start service jboss.deployment.subunit."dts.ear"."dts.war".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.subunit."dts.ear"."dts.war".INSTALL: Failed to process phase INSTALL of subdeployment "dts.war" of deployment "dts.ear"

    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:121) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_15]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_15]
    at java.lang.Thread.run(Thread.java:619) [:1.6.0_15]

***Caused by: java.lang.RuntimeException: Error getting reflective information for class com.recglobal.dts.chart.SalesGoalChartServlet***
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:70) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.as.ee.component.EEModuleClassDescription$DefaultConfigurator.configure(EEModuleClassDescription.java:176)
    at org.jboss.as.ee.component.deployers.EEClassConfigurationProcessor$1.compute(EEClassConfigurationProcessor.java:147)
    at org.jboss.as.ee.component.deployers.EEClassConfigurationProcessor$1.compute(EEClassConfigurationProcessor.java:122)
    at org.jboss.as.ee.component.LazyValue.get(LazyValue.java:40)
    at org.jboss.as.ee.component.EEApplicationDescription.getClassConfiguration(EEApplicationDescription.java:183)
    at org.jboss.as.ee.component.ComponentDescription.createConfiguration(ComponentDescription.java:153)
    at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:70)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:115) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]

    ... 5 more

**Caused by: java.lang.NoClassDefFoundError: com/recglobal/dts/chart/ChartGenerateVariables**
    at java.lang.Class.getDeclaredMethods0(Native Method) [:1.6.0_15]
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427) [:1.6.0_15]
    at java.lang.Class.getDeclaredMethods(Class.java:1791) [:1.6.0_15]
    at org.jboss.as.server.deployment.reflect.ClassReflectionIndex.<init>(ClassReflectionIndex.java:65) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:66) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]

    ... 13 more

**Caused by: java.lang.ClassNotFoundException: com.recglobal.dts.chart.ChartGenerateVariables from [Module "deployment.dts.ear.dts.war:main" from Service Module Loader]**
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:191) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:361) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:333) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:333) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:310) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103) [jboss-modules.jar:1.0.2.GA]
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) [:1.6.0_15]
    ... 18 more

12:19:31,436 INFO  [org.jboss.jpa] (MSC service thread 1-3) starting Persistence Unit Service 'dts.ear/dts.jar#dts'

12:19:34,804 INFO  [org.hibernate.annotations.common.Version] (MSC service thread 1-3) HCANN000001: Hibernate Commons Annotations {4.0.0.CR2}

12:19:34,868 INFO  [org.hibernate.Version] (MSC service thread 1-3) HHH00412:Hibernate Core {4.0.0.CR2}

12:19:34,991 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-3) HHH00206:hibernate.properties not found

12:19:34,992 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-3) HHH00021:Bytecode provider name : javassist

12:19:35,185 INFO  [org.hibernate.ejb.Ejb3Configuration] (MSC service thread 1-3) HHH00204:Processing PersistenceUnitInfo [

    name: dts

    ...]

12:19:35,250 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.persistenceunit."dts.ear/dts.jar#dts": org.jboss.msc.service.StartException in service jboss.persistenceunit."dts.ear/dts.jar#dts": Failed to start service

    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1780) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]

    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_15]

    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_15]

    at java.lang.Thread.run(Thread.java:619) [:1.6.0_15]

**Caused by: java.lang.RuntimeException: error trying to scan <jar-file>: vfs:/D:/liferay-portal-6.1.0-ce-ga1/jboss-7.0.2/bin/content/dts.ear/dts.jar/**

    at org.hibernate.ejb.Ejb3Configuration.scanForClasses(Ejb3Configuration.java:849)

    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:591)

    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:72)

    at org.jboss.as.jpa.service.PersistenceUnitService.createContainerEntityManagerFactory(PersistenceUnitService.java:143)

    at org.jboss.as.jpa.service.PersistenceUnitService.start(PersistenceUnitService.java:77)

    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]

    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]

    ... 3 more

**Caused by: java.lang.RuntimeException: could not load entity class 'com.recglobal.dts.model.views.PlanSalesValue' with PersistenceUnitInfo.getNewTempClassLoader()**

    at org.jboss.as.jpa.hibernate4.HibernateAnnotationScanner.getClassesInJar(HibernateAnnotationScanner.java:152)

    at org.hibernate.ejb.Ejb3Configuration.addScannedEntries(Ejb3Configuration.java:479)

    at org.hibernate.ejb.Ejb3Configuration.scanForClasses(Ejb3Configuration.java:846)

    ... 9 more

**Caused by: java.lang.ClassNotFoundException: com.recglobal.dts.model.views.PlanSalesValue from [Module "deployment.dts.ear.dts.jar:main" from Service Module Loader]**

    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:191)

    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:361)

    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:310)

    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103)

    at org.jboss.as.jpa.hibernate4.HibernateAnnotationScanner.getClassesInJar(HibernateAnnotationScanner.java:148)

    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:58:37.883

你有一个简单 **的错误：原因：java.lang.ClassNotFoundException: com.recglobal.dts.chart.ChartGenerateVariables from [Module "deployment.dts.ear.dts.war:main" from Service Module Loader]**

这意味着你的类路径中没有这个类。

在 ear 包中，你有 war、ejb 和 alco `client`jar。但是在 JEE6 中有一个很好的做法是将所有 jar 文件保存到 lib 目录中。所以 lib dir 中的所有 jar 对于其他包 war 、 ejb .. 都是全局可见的。

例如我们从war包中删除arr jar依赖，因为我们有多个war，所以我们的项目可能非常繁重。我们将所有 jar 依赖项复制到 lib ear 文件夹中。

在 Maven 中，您只需简单地添加：

```
 <artifactId>maven-war-plugin</artifactId>
        <configuration>
          <packagingExcludes>WEB-INF/lib/*.jar</packagingExcludes> 
```

并在你的耳朵里设置了 skinnywar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T20:57:09.777

JBoss 7 有一个新的模块系统，因此默认情况下模块不再可见，这很好，因为现在您可以显式控制依赖关系。您所要做的就是将依赖项添加到您的清单文件中。

[https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6/html/Development_Guide/Add_an_Explicit_Module_Dependency_to_a_Deployment1.html](https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6/html/Development_Guide/Add_an_Explicit_Module_Dependency_to_a_Deployment1.html)

# c# - 如何获取泛型方法的类型参数？

> ID：11650215
> 
> 赞同：2
> 
> 时间：2012-07-25T12:56:08.250
> 
> 标签：c#, generics, delegates

假设我有这个通用方法

```
void ActivateView<T>(ViewCommand command) where T : IPresenter
{
    //code
} 
```

我有一个动作：

```
Action<ViewCommand> action = this.ActivateView<DiagnosticPresenter>; 
```

现在给出`action`，我怎么知道泛型方法的类型参数`ActivateView`？在这种情况下，它应该是`DiagnosticPresenter`。所以我期待一个`Type`等于的实例`typeof(DiagnosticPresenter)`：

```
Type type = Magic(action); //what should Magic do?
if ( type == typeof(DiagnosticPresenter))
{
    //I want to do something here!
} 
```

那可能吗？我应该如何实施`Magic()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:07:21.510

这似乎对我有用：

```
public Type Magic(Action action)
{
    return action.Method.GetGenericArguments().First();
} 
```

# php - php 应用程序变红了 aws beanstalk

> ID：11650216
> 
> 赞同：0
> 
> 时间：2012-07-25T12:56:20.083
> 
> 标签：php, amazon-web-services, amazon-elastic-beanstalk

我有一个 PHP 应用程序在部署到 Elstic BeanStalk 时变为 RED。我只需压缩我的应用程序文件夹并上传它。我需要在这里检查/更改任何内容吗？

我迫切需要这个应用程序正常工作。如果有人可以调查它或为我提供一些解决问题的建议，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:57:56.777

如果是后者，它应该可以正常工作，因为 zip 的内容将简单地解压到文档根目录中。

如果是前者，并且整个目录在文档根目录中解压，则需要在控制台中更新 document_root 设置以指向目录名称。

谢谢希望这可以解决您的问题。

# css - 字体系列是否有解决方法：IE7 的继承

> ID：11650217
> 
> 赞同：0
> 
> 时间：2012-07-25T12:56:20.657
> 
> 标签：css, internet-explorer-7

我有一个CSS类：

text_css

我想在其中应用继承属性。这适用于 IE8 和 IE9。我知道继承不适用于 IE7。

任何人都可以为此提出任何解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:17:53.743

解决方法是将属性设置为应继承的特定值。这是否可行取决于上下文。

例如，如果您想让`input`元素具有与周围内容相同的字体系列，您可以使用`input { font-family: inherit; }`，尽管这在 IE7 上不起作用（大问题？）。但大多数人都想设置整体字体系列，所以你可以简单地设置 eg `body, input { font-family: Calibri, sans-serif; }`。

为了获得更好的建议，请说明使用的上下文和目的`inherit`。这是一个很少需要的值。

# android - Android：LinkedIn OAuth 回调不起作用

> ID：11650218
> 
> 赞同：6
> 
> 时间：2012-07-25T12:56:22.877
> 
> 标签：android, oauth

我`OAuth`在我的 Android 应用程序中使用 LinkedIn。我已经有一个 LinkedIn 应用程序、消费者密钥和秘密，因此我可以成功请求。

一切都很好，直到回调。网页没有回调，我的意思是`onNewIntent`或者`onResume`方法没有调用。网页只显示带有参数的回调 url。我的意思是它看起来像：

```
callback_url://?oauth_token=324sdf&oath_verifier=as21dsf 
```

这是我的所有代码：

```
try {
    consumer = new CommonsHttpOAuthConsumer("ConsumerKey", "ConsumerSecret");
provider = new CommonsHttpOAuthProvider("https://api.linkedin.com/uas/oauth/requestToken", "https://api.linkedin.com/uas/oauth/accessToken", "https://api.linkedin.com/uas/oauth/authorize");
    final String url = provider.retrieveRequestToken(consumer, Constants.OAUTH_CALLBACK_URL);
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
    startActivity(intent);                          
} catch (Exception e) {
    e.printStackTrace();
} 
```

活动已定义`singleInstance`为`Manifest`.

有什么问题或遗漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:34:08.650

经过长时间的研究，我自己找到了答案。

我已经改变了我的基类`linkedin-j`，可以在[这里查看](http://code.google.com/p/linkedin-j/)。

然后将此常量设置如下：

```
 public static final String CONSUMER_KEY = "ConsumerKey";
    public static final String CONSUMER_SECRET = "ConsumerSecret";
    public static final String OAUTH_CALLBACK_SCHEME = "callback";
    public static final String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME + ":///"; 
```

并像这样初始化：

```
LinkedInOAuthService oAuthService = LinkedInOAuthServiceFactory.getInstance().createLinkedInOAuthService(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
LinkedInApiClientFactory factory = LinkedInApiClientFactory.newInstance(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
LinkedInRequestToken liToken;
LinkedInApiClient client;

liToken = oAuthService.getOAuthRequestToken(Constants.OAUTH_CALLBACK_URL);
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(liToken.getAuthorizationUrl()));
startActivity(i); 
```

这个回调很好，我在 OnNewIntent 处理过：

```
String verifier = intent.getData().getQueryParameter("oauth_verifier");

LinkedInAccessToken accessToken = oAuthService.getOAuthAccessToken(liToken, verifier);
client = factory.createLinkedInApiClient(accessToken);
client.postNetworkUpdate("Test"); 
```

就这样。

# php - 你怎么称呼数组上的 => 符号？

> ID：11650219
> 
> 赞同：4
> 
> 时间：2012-07-25T12:56:23.090
> 
> 标签：php, arrays

我似乎无法在谷歌上找到答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T12:59:05.803

它被称为[双箭头](https://github.com/php/php-src/blob/master/Zend/zend_language_parser.y#L185)。

# c# - 可以包含整数值的最小字节数

> ID：11650222
> 
> 赞同：1
> 
> 时间：2012-07-25T12:56:29.680
> 
> 标签：c#, integer, bit-manipulation

给定一个整数值，我需要一些方法来找出存储该值所需的最小字节数。该值可以是有*符号或无符号的，最多 64 位*。对于有符号整数，还要考虑符号位。

例如：

```
 8     requires 1 byte at minimum
               unsigned 255     requires 1 byte at minimum
                 signed 255     requires 2 bytes at minimum
                       4351     requires 2 bytes at minimum
                -4294967296     requires 5 bytes at minimum
unsigned 0xFFFFFFFFFFFFFFFF     requires 8 bytes at minimum 
```

我可以想到一种快速而简单的方法来解决这个问题，使用许多 if 语句，但可能有更好的（例如更简单、更聪明、更快）的方法来做到这一点。您可以假设一个带有签名的方法`int (long value, bool signed)`或两个方法`int (long value)`（用于签名）和`int (ulong value)`（用于未签名）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:07:01.100

让我试一试我自己的问题。据我所知，这是一个正确的解决方案，但在速度和简洁性方面可能不是最佳的：

```
public static int GetMinByteSize(long value, bool signed)
{
    ulong v = (ulong)value;
    // Invert the value when it is negative.
    if (signed && value < 0)
        v = ~v;
    // The minimum length is 1.
    int length = 1;
    // Is there any bit set in the upper half?
    // Move them to the lower half and try again.
    if ((v & 0xFFFFFFFF00000000) != 0)
    {
        length += 4;
        v >>= 32;
    }
    if ((v & 0xFFFF0000) != 0)
    {
        length += 2;
        v >>= 16;
    }
    if ((v & 0xFF00) != 0)
    {
        length += 1;
        v >>= 8;
    }
    // We have at most 8 bits left.
    // Is the most significant bit set (or cleared for a negative number),
    // then we need an extra byte for the sign bit.
    if (signed && (v & 0x80) != 0)
        length++;
    return length;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:09:39.540

```
static int BytesForNum(long value, bool signed)
{
    if (value == 0)
        return 1;
    if (signed)
    {
        if (value < 0)
            return CalcBytes(2 * (-1-value));
        else
            return CalcBytes(2 * value);
    }
    else
    {
        if (value < 0)
            throw new ArgumentException("Can't represent a negative unsigned number", "value");
        return CalcBytes(value);
    }
}
//should only be called with positive numbers
private static int CalcBytes(long value)
{
    int bitLength = 0;
    while (value > 0)
    {
        bitLength++;
        value >>= 1;
    }
    return (int)(Math.Ceiling(bitLength * 1.0 / 8));
} 
```

我可能没有完全正确的签名代码，但这是一般的想法。

# c# - HtmlTextWriter 动态创建表行

> ID：11650223
> 
> 赞同：0
> 
> 时间：2012-07-25T12:56:30.990
> 
> 标签：c#, umbraco, tablerow, htmltextwriter

我正在创建一个用户可以登录的 umbraco 网站。在这个登录页面上，我想向他/她展示用户注册的研讨会。这是通过用户控件完成的。如果用户注册了任何研讨会，它应该创建与研讨会数量匹配的表格行 - 如果没有，用户控件应该显示一个简单的消息。

我正在使用 htmlTextWriter 输出表格行，但是它不起作用。目前我的代码如下：

```
'foreach loop
 writer.AddAttribute(HtmlTextWriterAttribute.Class, "standard-content");
 writer.RenderBeginTag(HtmlTextWriterTag.Tr);

 writer.AddAttribute(HtmlTextWriterAttribute.Class, "workshop-availability-name");
 writer.RenderBeginTag(HtmlTextWriterTag.Td);
 writer.Write(nodeName);
 writer.RenderEndTag();

 writer.AddAttribute(HtmlTextWriterAttribute.Class, "workshop-availability-date");
 writer.RenderBeginTag(HtmlTextWriterTag.Td); 

 writer.RenderBeginTag(HtmlTextWriterTag.Strong);   
 writer.Write(umbraco.library.FormatDateTime(nodeStartDate.ToString(), "dd-MMM-yy")); 
 writer.RenderEndTag();
 writer.Write(" to ");
 writer.RenderBeginTag(HtmlTextWriterTag.Strong); 
 writer.Write(umbraco.library.FormatDateTime(nodeEndDate.ToString(), "dd-MMM-yy")); 
 writer.RenderEndTag();
 writer.RenderEndTag();

writer.AddAttribute(HtmlTextWriterAttribute.Class, "workshop-availability-more");
writer.RenderBeginTag(HtmlTextWriterTag.Td);

writer.AddAttribute(HtmlTextWriterAttribute.Src, nodeUrl);
writer.RenderBeginTag(HtmlTextWriterTag.A);
writer.Write("Read more...");
writer.RenderEndTag();
writer.RenderEndTag();
'foreach end 
```

然后我将它输出到占位符：

```
RegisteredWorkshops.RenderControl(writer); 
```

但是每当我运行该站点时，占位符都是空的。如何根据工作坊的注册在我的页面上的表格中显示这些动态行？

最好的问候， brinck10

# haskell - 未能产生惰性流

> ID：11650227
> 
> 赞同：2
> 
> 时间：2012-07-25T12:56:46.397
> 
> 标签：haskell

我会尽量简短而切题地说明这个问题。

我希望在向命令行输入三个字符后完成此计算。但是，事实并非如此。我很好奇为什么会这样。

```
return . take 3 =<< sequence (repeat getChar) 
```

**编辑：**

我应该补充一点，我正在尝试将选择与生成分开，因此希望生成我从中选择的无限的字符流。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T13:13:51.693

I/O 确定性地对动作进行排序，所以你真正的意思是你想要`getChar`无限次地执行动作，然后在完成之后，你想要从生成的列表中获取前三个项目。您可能会看到这将需要很长时间。

如果您想延迟执行 I/O（并且不确定），您可以使用包中的函数执行此[`unsafeInterleaveIO`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO-Unsafe.html#v:unsafeInterleaveIO)操作`System.IO.Unsafe`。

例如，实现您想要的一种方法是：

```
import System.IO.Unsafe

lazyIOSequence :: [IO a] -> IO [a]
lazyIOSequence [] = return []
lazyIOSequence (x:xs) = do
    first <- unsafeInterleaveIO $ x
    rest  <- unsafeInterleaveIO $ lazyIOSequence xs
    return $ first:rest

test = return . take 3 =<< lazyIOSequence (repeat getChar) 
```

但是，现在用户对数据的实际提示会延迟，直到您评估列表的元素，因此它可能不会像您希望的那样运行。事实上，惰性 I/O 流通常被认为是有问题的（参见例如问题[“Haskell 惰性 I/O 和关闭文件”](https://stackoverflow.com/questions/2981582/haskell-lazy-i-o-and-closing-files)和[“惰性 I/O 有什么不好的地方？”](https://stackoverflow.com/questions/5892653/whats-so-bad-about-lazy-i-o)）。

目前推荐的将生产与选择和处理分开的方法是使用各种严格的流处理库之一，例如[枚举](http://hackage.haskell.org/package/enumerator)器、[管道](http://hackage.haskell.org/package/pipes)或[管道](http://hackage.haskell.org/package/conduit)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T13:10:27.157

1.  `=<<`在开始左侧的效果之前完成右侧的效果`=<<`。
    *   这意味着如果右侧的`=<<`动作将永远运行，那么整个动作将永远运行。
2.  `sequence`获取一个动作列表并返回一个执行所有这些动作的动作。
    *   如果您提供`sequence`无限的操作列表，它将永远运行。
3.  `repeat`接受一个值，并给出该值的无限列表，重复。

你现在明白为什么你会得到你所经历的行为吗？

* * *

这会起作用，因为没有无限列表：

```
sequence (take 3 $ repeat getChar) 
```

但想必你真正的选择功能比“取前三个”要复杂。它是什么？

# c# - 微软单元测试。是否可以从测试方法体中跳过测试？

> ID：11650228
> 
> 赞同：43
> 
> 时间：2012-07-25T12:56:45.997
> 
> 标签：c#, unit-testing, mstest

因此，当我需要从测试方法主体中跳过当前测试时，我遇到了这种情况。最简单的方法是在测试方法中写这样的东西。

```
if (something) return; 
```

但是我有很多复杂的测试，我需要一种方法来跳过我在当前测试方法主体中调用的方法中的测试。可能吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-25T12:58:36.193

您不应该以这种方式跳过测试。最好做以下事情之一：

*   `[Ignore]`通过属性将测试标记为忽略
*   `NotImplementedException`从你的测试中抛出
*   写`Assert.Fail()`（否则你可能会忘记完成这个测试）
*   删除此测试

另请记住，您的测试不应包含条件逻辑。相反，您应该创建两个测试 - 为每个代码路径单独测试（带有名称，描述您正在测试的条件）。所以，而不是写：

```
[TestMethod]
public void TestFooBar()
{
   // Assert foo
   if (!bar)
      return;
   // Assert bar
} 
```

编写两个测试：

```
[TestMethod]
public void TestFoo()
{
   // set bar == false
   // Assert foo
}

[Ignore] // you can ignore this test
[TestMethod]
public void TestBar()
{
   // set bar == true
   // Assert bar
} 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-07-25T13:24:45.053

除了其他答案（并按照建议）：我建议使用`Assert.Inconclusive`over `Assert.Fail`，因为原始发帖人的情况不是明确的失败案例。

使用`Inconclusive`结果清楚地表明您不知道测试是成功还是失败 - 这是一个重要的区别。不证明成功并不总是构成失败！

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-25T13:04:02.327

您可以忽略测试并在代码中完全保持原样。

```
[TestMethod()]
[Ignore()]    //ignores the test below
public void SomeTestCodeTest()
{
   //test code here

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-04T23:22:14.207

有一种`Assert.Inconclusive()`方法可以用来很好地跳过当前测试。检查[文档](https://docs.microsoft.com/en-us/dotnet/api/microsoft.visualstudio.testtools.unittesting.assert.inconclusive?view=mstest-net-1.2.0)。基本上它会抛出一个异常并将这个方法显示为`Skipped`.

我将其用作测试方法中代码中的程序检查：

```
if (!IsEnvironmentConfigured())
{
   Assert.Inconclusive("Some message");
} 
```

结果如下：

```
! ShouldTestThisMethod [31ms]

Test Run Successful.
Total tests: 92
     Passed: 91
    Skipped: 1
 Total time: 1.2518 Seconds 
```

# css - 侧边角标记 (CSS)

> ID：11650235
> 
> 赞同：2
> 
> 时间：2012-07-25T12:56:58.300
> 
> 标签：css

我有一个 HTML 页面，上面列出了许多照片。我正在寻找一些关于如何做 CSS 的帮助，以便一些照片有一个顶角“标记”，比如这里称为“精选”的红色条纹——

[http://www.logospire.com/logos/3922](http://www.logospire.com/logos/3922)

![在此处输入图像描述](../Images/4db70e58fb88f47f029a8cac94489bf9.png)

我可以用谷歌搜索这是什么，但我不知道关键字。会喜欢任何提示和指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:58:49.127

在您链接的页面上，它是用 解决的`background-image`，所以它只是一个图像。您可以使用 Chrome Inspector / Firebug / IE Developer Tools / DragonFly / 等来检查元素。

**HTML**：

```
<a id="featured" href="/?sort=featured"></a> 
```

**CSS**：

```
#featured {
    display: block;
    width: 94px;
    height: 78px;
    background: url(/images/featured_bg.png) no-repeat;
    position: absolute;
    z-index: 10;
    top: -2px;
    left: -2px;
} 
```

您还可以使用[CSS3 变换](https://developer.mozilla.org/en/CSS/Using_CSS_transforms)（特别是[Rotation](https://developer.mozilla.org/en/CSS/transform#rotate)）来实现类似的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:13:29.913

我昨天使用 css3 阅读的好文章。

[http://www.pvmgarage.com/2010/01/how-to-create-depth-and-nice-3d-ribbons-only-using-css3/](http://www.pvmgarage.com/2010/01/how-to-create-depth-and-nice-3d-ribbons-only-using-css3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:58:38.757

[http://fusioncold.blogspot.co.uk/2011/06/text-rotate-with-css.html](http://fusioncold.blogspot.co.uk/2011/06/text-rotate-with-css.html)

您可以从该链接开始，如果您需要更多帮助，请搜索更多关键字

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T13:02:37.240

您只需将主图像放在一个具有相对位置的 div 中，并且 z-index 为“1”。

然后你也将小角图像放在 div 中，并使其绝对位置，top:0 left:0 和 z-index 为“2”。

如果您希望它像示例中那样稍微开箱即用，请使其左侧和顶部定位稍微负值。

# asp.net-mvc-3 - 从ajax get返回的缓存MVC PartialView

> ID：11650237
> 
> 赞同：0
> 
> 时间：2012-07-25T12:57:05.600
> 
> 标签：asp.net-mvc-3, jquery, asp.net-mvc-partialview

是否可以缓存从 ajax 获取请求返回的 MVC 部分视图？

这是我的场景。我正在调用一个指向返回部分视图的控制器方法的 url：

控制器方法：

```
public ActionResult SignIn()
{
    return View("SignIn");
} 
```

获取视图的 Ajax 请求：

```
$.get('/Home/SignIn', function (data) { $('.content').html(data); }); 
```

是否可以缓存我的“登录”视图，以便每次用户单击它时，它不必返回服务器再次从控制器获取视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:13:56.617

这将缓存服务器上的视图 - 限制服务器负载 -

将您的操作更改为：

```
public class Home : Controller
{
    // You can change this duration to whatever you want (in seconds)
    [OutputCache(Duration = 6000)] 
    public ActionResult SignIn()
    {
        return View("SignIn");
    }
} 
```

您的 AJAX 请求保持不变：

```
$.get('/Home/SignIn', function (data) { $('.content').html(data); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:17:29.867

也许将结果存储在本地声明的 javascript 变量中。例如（伪代码）..

```
var PageState = {};
PageState.CachedView = function(){ $.get('/Home/SignIn', function (data) { $('.content').html(data); }); }

  $(document).ready(function(){
    $("#myButton").click(function(){ $("#myDialogContents").html(PageState.CachedView);
  }); 
```

我要注意的一件事是在显示缓存的 html 时清除文本框，除非您希望保留用户名。

# c# - 使用 linq 将多个总和转换为一种匿名类型？

> ID：11650251
> 
> 赞同：3
> 
> 时间：2012-07-25T12:57:55.053
> 
> 标签：c#, .net, linq, datatable

我有这个简单的数据表：

```
 type (string)   |       cnt (int)     
_____________________________________
aaa                         1
aaa                         2
aaa                         10
bbb                         1
bbb                         1 
```

我想生成**1 个**这样的匿名类型：

```
{
sumAAA= 13 , sumBBB=2  //13=1+2+10....
} 
```

类似的东西：（伪代码）

```
var obj= dt.AsEnumerable().Select(f=> new { sumAAA =f.sumOfCntOfAaa , sumBBB =f.sumOfCntOfBbb }); 
```

有什么帮助吗？

编辑，这将帮助你

```
 DataTable dt = new DataTable("myTable");
    dt.Columns.Add("cnt", typeof (int));
    dt.Columns.Add("type", typeof (string));
    DataRow row = dt.NewRow();
    row["cnt"] = 1;
    row["type"] = "aaa";
    dt.Rows.Add(row);
    row = dt.NewRow();
    row["cnt"] = 2;
    row["type"] = "aaa";
    dt.Rows.Add(row);
    row = dt.NewRow();
    row["cnt"] = 10;
    row["type"] = "aaa";
    dt.Rows.Add(row);
    row = dt.NewRow();
    row["cnt"] = 1;
    row["type"] = "bbb";
    dt.Rows.Add(row);
    row = dt.NewRow();
    row["cnt"] = 1;
    row["type"] = "bbb";
    dt.Rows.Add(row); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T13:20:59.907

**动态：**

```
dynamic result = new ExpandoObject();
dt.AsEnumerable()
  .GroupBy(r => r.Field<String>("type"))
  .ToList()
  .ForEach(g=> ((IDictionary<String, Object>)result)["sum" + g.Key.ToUpper()] = g.Sum(r=>r.Field<Int32>("cnt")));

Console.WriteLine(result.sumAAA);
Console.WriteLine(result.sumBBB); 
```

适用于任意数量的不同`type`s，不仅`aaa`和`bbb`.

**输出：**

> 13
> 2

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T13:15:28.770

在程序集中，具有相同属性、相同类型和顺序的所有匿名类型都是相同类型。因此可以创建*相同*匿名类型的新实例：

***第一版***

```
var totals = new {
    SumAs = 0,
    SumBs = 0
};

var result = dt.AsEnumerable().Select(dr => {
    totals = new {
        SumAs = totals.SumAs + (dr["type"].Equals("aaa") ? (int)dr["cnt"] : 0),
        SumBs = totals.SumBs + (dr["type"].Equals("bbb") ? (int)dr["cnt"] : 0)
    };
    return totals;
}).Last(); 
```

但是用聚合一个可以做得更好......

***版本二***

```
var result2 = dt.AsEnumerable().Aggregate(new { SumAs = 0, SumBs = 0 }, (total, dr) => {
    return new {
        SumAs = total.SumAs + (dr["type"].Equals("aaa") ? (int)dr["cnt"] : 0),
        SumBs = total.SumBs + (dr["type"].Equals("bbb") ? (int)dr["cnt"] : 0)
    };
}); 
```

***更新：使用版本 2 的完整示例***

（使用元组是因为它们更容易设置）：

粘贴到默认的 C# 控制台项目中：

```
using System;
using System.Linq;

class Program {
    static void Main(string[] args) {
        var input = Enumerable.Range(1, 10).Select(x => Tuple.Create(x, x*x));

        var res = input.Aggregate(new { Firsts = 0, Seconds = 0}, (total, val) => {
            return new {
                Firsts = total.Firsts + val.Item1,
                Seconds = total.Seconds + val.Item2
            };
        });

        Console.WriteLine("Firsts: {0}; Seconds: {1}", res.Firsts, res.Seconds);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:14:58.413

你有什么理由不想使用 2 LINQ 语句？

```
var obj = new {
    sumAAA = dt.Rows
        .Where(x => x["type"] == "aaa")
        .Sum(y => (int) y["cnt"]), 
    sumBBB = dt.Rows
        .Where(x => x["type"] == "bbb")
        .Sum(y => (int) y["cnt"])
}; 
```

还是一个简单的for循环？

```
int sAAA = 0; int sBBB = 0;

foreach (DataRow row in dt.Rows)
{
    if(row["type"] == "aaa")
        sAAA += (int) row["cnt"];
    else
        sBBB += (int) row["cnt"];
}

var obj = new { sumAAA = sAAA, sumBBB = sBBB }; 
```

**编辑：**哎呀......匿名对象是不可变的，相应地改变了我的答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:02:25.007

```
var list = dt.AsEnumerable()
          .GroupBy(row => row["type"])
          .Select(grp => new { Type = grp.Key, 
                             Sum = grp.Sum(c => (int)c["cnt"])
          }); 
```

这将为您提供一个匿名 {type, sum} 列表，这一定是一个好的开始！

# git - 如果文件名在 git 存储库中，则获取 gitdir

> ID：11650254
> 
> 赞同：0
> 
> 时间：2012-07-25T12:57:57.997
> 
> 标签：git

我有一个脚本需要检查文件是否已提交。文件名是脚本的第一个参数。我知道我可以使用以下命令获取 gitdir：

```
gitdir=$(cd $(dirname $filename) && git rev-parse --git-dir 2>/dev/null) 
```

但是还有另一种方法可以在目录中没有第一个 cd 的情况下获取 gitdir 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:23:25.787

git 依赖于运行它的当前目录，所以这是不可能的。我尝试在不`cd`使用目录并使用`--work-tree=<dir>`选项的情况下运行您的命令，但它不起作用。

所以看起来除了以当前目录作为工作副本的目录运行它之外别无他法。

# c# - 用于查询数据库的数组 int

> ID：11650255
> 
> 赞同：1
> 
> 时间：2012-07-25T12:58:02.580
> 
> 标签：c#, .net, mysql, ado.net

```
MySqlCommand cmd = new MySqlCommand("select id from table", conn);
MySqlDataReader dr = cmd.ExecuteReader(); 
```

例如我得到 4 行，所以 23,3,12,9

我怎样才能得到这个整数的数组？

```
int[] arr = { 23, 3, 12, 9 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:00:21.767

用这个：

```
IEnumerable<int> r;
using (reader)
{
    r = Read(reader);
}
int[] arr = r.ToArray(); 
```

您可以在其中以各种方式实现该方法：

```
private static IEnumerable<int> Read(IDataReader reader)
{
    IList<int> list = new List<int>();
    while (reader.Read())
    {
        list.Add(reader.GetInt32(0));
    }
    return list;
} 
```

或（扩展阿吉拉斯的回答）：

```
private static IEnumerable<int> Read(IDataReader reader)
{
    while (reader.Read())
    {
        yield return reader.GetInt32(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:00:17.223

你可以使用产量迭代器

```
while(reader.Read()
{
    yield return reader.GetInt32(0);
} 
```

# sql - 子查询返回超过 1 个值。当子查询跟随时，这是不允许的

> ID：11650256
> 
> 赞同：0
> 
> 时间：2012-07-25T12:58:05.153
> 
> 标签：sql

我有以下脚本由于标题错误而停止工作。有人可以提供一些帮助吗？

```
SELECT DISTINCT TOP 100 PERCENT
         Locs.lCustomerGroupPK, Locs.lCustomerID, Locs.Customer_Group_Name, Locs.Customer_Name, Locs.Location_Name, TY.ThisYearsSales,
        (SELECT ThisYearsSales
           FROM dbo.Vw_Level_3_Sales_This_Year
          WHERE (lLocationID = Locs.lLocationID2 OR lLocationID = Locs.llocationid)
            AND (Current_Read_Date = TY.Current_Read_Date - 364) AND (ThisYearsSales <= 400)
         ) AS LastYearsSales, 
         TY.Current_Read_Date - 1 AS Current_Read_Date INTO #tmplocationlflsales
  FROM dbo.Vw_Level_3_Sales_This_Year AS TY 
        INNER JOIN dbo.vw_locations_Like_For_Like_Previous AS Locs 
                ON TY.lLocationID = Locs.llocationid OR TY.lLocationID = Locs.lLocationID2
 WHERE (TY.ThisYearsSales <= 400)
    AND (TY.Current_Read_Date = @RecordDate)
    AND TY.ThisYearsSales IS NOT NULL
    AND (SELECT ThisYearsSales
           FROM dbo.Vw_Level_3_Sales_This_Year
          WHERE (lLocationID = Locs.lLocationID2 OR lLocationID = Locs.llocationid) 
            AND (Current_Read_Date = TY.Current_Read_Date - 364) 
            AND (ThisYearsSales <= 400)
         ) IS NOT NULL 
 ORDER BY Locs.Customer_Group_Name, Locs.Customer_Name, Locs.Location_Name, Current_Read_Date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:07:31.943

问题似乎是 SELECT 中的子查询：

```
 SELECT ThisYearsSales
        FROM dbo.Vw_Level_3_Sales_This_Year
        WHERE (lLocationID = Locs.lLocationID2 OR 
                lLocationID = Locs.llocationid) 
            AND (Current_Read_Date = TY.Current_Read_Date - 364) 
            AND (ThisYearsSales <= 400) 
```

这返回了太多行。也许您想将其更改为：

```
 SELECT sum(ThisYearsSales)
        FROM dbo.Vw_Level_3_Sales_This_Year
        WHERE (lLocationID = Locs.lLocationID2 OR 
                lLocationID = Locs.llocationid) 
            AND (Current_Read_Date = TY.Current_Read_Date - 364) 
            AND (ThisYearsSales <= 400) 
```

由于您两次使用相同的子查询，因此您应该将它放在 FROM 子句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:09:59.533

据我所知，您的脚本中有这个子查询

```
SELECT ThisYearsSales
FROM dbo.Vw_Level_3_Sales_This_Year
WHERE (lLocationID = Locs.lLocationID2 OR lLocationID = Locs.llocationid) 
 AND (Current_Read_Date = TY.Current_Read_Date - 364) 
 AND (ThisYearsSales <= 400) 
```

如果这返回一个值（一条记录中的一列），那么它将包含在您的结果中，但是，如果这返回多于一行，您将收到您遇到的错误。

查看 Vw_Level_3_Sales_This_Year 视图中的数据以查看每个 lLocationID / Current_Read_Date 是否存在重复项，因为这些是您过滤的字段。类似于以下内容：

```
SELECT count(*), lLocationID, Current_Read_Date 
FROM dbo.Vw_Level_3_Sales_This_Year
GROUP BY lLocationID, Current_Read_Date 
HAVING count(*)>1 
```

此查询返回的任何行都应指出问题所在。

# jsf - 自定义 JSF EL 函数、日期转换器和电流组件

> ID：11650257
> 
> 赞同：1
> 
> 时间：2012-07-25T12:58:10.560
> 
> 标签：jsf, el

我们使用可收藏的 URL 和 GET 方法。

我们有一些包含日期的参数，并使用默认的 DateTime 转换器进行转换。

```
<f:viewParam name = "parameter" value  = "#{model.parameter}" converter = "javax.faces.DateTime" /> 
```

这完美无瑕，参数与字符串相互转换

当我们必须生成`<h:link>`到这些页面的链接（例如，with）时，我们需要将 `Date`参数转换为格式正确的字符串（因为`<f:param>`标签不支持转换器）。的默认格式`Date.toString()`不会被`javax.faces.converter.DateTimeConverter`.

我想出了以下解决方案，但我觉得它可以做得更优雅。

我定义了一个自定义 EL 函数`convertDate`

```
<f:param name="parameter" value="#{ func:convertDate( model.someDate, component ) }" /> 
```

具有以下实现

```
public static String convertDate( Date date, UIComponent uiComponent )
{
    DateTimeConverter dateTimeConverter = new DateTimeConverter();
    return dateTimeConverter.getAsString( FacesContext.getCurrentInstance(), uiComponent, date );
} 
```

这个想法是使用默认值`javax.faces.convert.DateTimeConverter`来转换日期，但我需要引用相应的`UIComponent`.

的使用`#{component}`有意义吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:07:27.043

幕后的`DateTimeConverter`用途[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。您可能想改用它，以便摆脱`#{component}`争论。

# django - 接收 CSRF 失败。请求中止

> ID：11650258
> 
> 赞同：1
> 
> 时间：2012-07-25T12:58:16.077
> 
> 标签：django, django-csrf

我按照错误响应页面上的建议进行操作，但仍然无法正常工作。这是我的代码；

视图.py

```
from django.http import HttpResponse
from django.template import RequestContext
from django.shortcuts import render_to_response
from forms import *
from models import *
def main_page(request):
  if request.method == 'POST':
    form = UserForm(request.POST)
    if form.is_valid():
      username = form.cleaned_data['username']
      icecream = form.cleaned_data['icecream']
    output = '''
    <html>
      <head>
        <title>
          Reading user data
        </title>
      </head>
      <body>
        <h1>
          Your ice cream is: %s
        </h1>
      </body>
    </html>''' %(
      icecream
    )
    return HttpResponse(output)

  else:
     form = UserForm()

    variables = RequestContext(request, { 'form': form})

    return render_to_response( 'icecream.html', variables, context_instance=RequestContext       (request)) 
```

icecream.html（模板）

```
<html>
  <head>
    <title>Getting user input</title>
  </head>
   <body>
    <h1>Getting user input</h1>
    <form method="post" action=".">
    {% csrf_token %}
      {{ form.as_p }}    
       <input type="submit" value="Submit"/>
    </form>
  </body>
</html> 
```

网址.py

```
from django.conf.urls.defaults import *
from forms.views import *

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

urlpatterns = patterns('',
  (r'^$', main_page), 
```

settings.py（相关部分）

```
MIDDLEWARE_CLASSES = (
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',    
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
) 
```

我处于学习模式，所以这只是一个内部站点，我正在使用 localhost 访问它。我在学习这本书的其他章节之前从未遇到过这个问题。这是我第一次使用表单和发布。我在这个网站上查看了许多已回答的问题，但似乎没有任何帮助。感谢所有帮助。

# c# - 为什么 ExpandoObject 不能按预期工作？

> ID：11650259
> 
> 赞同：5
> 
> 时间：2012-07-25T12:58:16.697
> 
> 标签：c#, .net, dynamic

目前，即使是使用“ExpandoObject”的最简单示例也无法在我的机器上运行。

两个都

```
dynamic obj = new ExpandoObject();
obj.Value = 10;
var action = new Action<string>((line) => Console.WriteLine(line));
obj.WriteNow = action;
obj.WriteNow(obj.Value.ToString()); 
```

[（来自本网站）](http://www.codeproject.com/Articles/62839/Adventures-with-C-4-0-dynamic-ExpandoObject-Elasti)和

```
dynamic sampleObject = new ExpandoObject();
sampleObject.test = "Dynamic Property";
Console.WriteLine(sampleObject.test); 
```

[（来自 MSDN 示例）](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)失败并出现 RuntimeBinderException。我想我配置错误了，但我不知道它可能是什么。

我正在使用 .NET v4.0.30319 和 Visual Studio 2010 SP1 Premium。请询问您可能需要知道的其他任何信息。=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:30:16.637

删除解决方案目录中隐藏的“SolutionName.suo”文件为我解决了这个问题。

不过，我仍然不知道它为什么会发生。

**编辑：** 删除答案的安德拉斯佐尔坦猜对了。我启用了“打破所有例外”并且很愚蠢。=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:12:21.397

问题只是`Console.WriteLine`过载太多，因此无法正确计算出动态部分。将输出放入类型变量之前或只是转换它。例如

```
dynamic sampleObject = new ExpandoObject();
sampleObject.test = "Dynamic Property";
Console.WriteLine((string)sampleObject.test); 
```

# jquery - 如何将一个函数中的 json 对象数组调用到另一个函数中？

> ID：11650264
> 
> 赞同：0
> 
> 时间：2012-07-25T12:58:32.220
> 
> 标签：jquery, json

这让我很困惑。如何制作以下 json 函数...

```
$.mfjson = function() {
var mjson = { LinkToDesktopSite : [    
{"section":"aboutus","name":"DemoA","mobile":"demoa.htm","desktop":"/desktop/demoa.aspx"},
{"section":"google","name":"DemoB","mobile":"demob.htm","desktop":"http://www.google.com"}
 ]};
} 
```

...与我在另一个函数中的 .each 方法进行通信...

```
 $.loopjson = function() {
 $.each(mfjson().mjson.LinkToDesktopSite, function(key,value) {
   var external = "www.";   
   if((value['mobile'] == url)) { 
    if((value['desktop'].indexOf(external) == -1)) {
     $('.readmore').attr("href","https://www.mysite.org"+value['desktop']);
     }else{
       $('.readmore').attr("href",value['desktop']);
     }
   }
 });
} 
```

收到萤火虫控制台错误，说 .loopjson 不知道 mfjson 是什么。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:27:47.827

我想我想通了。将“返回 mjson 到第一个函数和 $.mfjson().LinkToDesktopSite 到附加函数...

```
$.mfjson = function() {
var mjson = { LinkToDesktopSite : [    
{"section":"aboutus","name":"DemoA","mobile":"demoa.htm","desktop":"/desktop/demoa.aspx"},
{"section":"google","name":"DemoB","mobile":"demob.htm","desktop":"http://www.google.com"}
]};
return mjson;
}

$.loopjson = function() {
 $.each($.mfjson().LinkToDesktopSite, function(key,value) {
 var external = "www.";   
 if((value['mobile'] == url)) { 
 if((value['desktop'].indexOf(external) == -1)) {
 $('.readmore').attr("href","https://www.mysite.org"+value['desktop']);
 }else{
   $('.readmore').attr("href",value['desktop']);
  }
 }
});
} 
```

# scala - 用于测量长度的最佳性能不可变 Seq

> ID：11650268
> 
> 赞同：1
> 
> 时间：2012-07-25T12:58:39.327
> 
> 标签：scala, immutability, scala-collections

无论出于何种原因，[Performance Characteristics Doc](http://docs.scala-lang.org/overviews/collections/performance-characteristics.html)中对此没有任何概念，所以我挖掘了源代码并发现了这一点，`List`并且`Queue`似乎有*O(n)*，因为它们遍历所有成员。`Vector`似乎有O *(1)*，因为它只是`Int`从另一个中减去一个。

现在，集合是面向附加还是面向前置都没有关系，但其中任何一个都必须是*O(1)*，并且不需要 performant `apply`。

是`Vector`正确的选择吗？你会建议哪个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T13:03:04.250

> Vector是正确的选择吗？

是的。另一种方法是围绕 List 创建自己的不可变包装器，将其大小添加为常量，但如果您想允许所有标准收集操作，这将是很多工作。坚持`Vector`。

# jquery - 带有单元格的Jquery左键单击事件

> ID：11650271
> 
> 赞同：2
> 
> 时间：2012-07-25T12:58:56.130
> 
> 标签：jquery, jquery-plugins

示例代码：简单的上下文菜单

右键单击链接后会弹出此窗口。但是单击网站中的任何单元格后都希望获得相同的结果。

```
$(function(){
    $.contextMenu({
        selector: '.context-menu-one', 
        callback: function(key, options) {
            var m = "clicked: " + key;
            window.console && console.log(m) || alert(m); 
        },
        items: {
            "edit": {name: "Edit", icon: "edit"},
            "cut": {name: "Cut", icon: "cut"},
            "copy": {name: "Copy", icon: "copy"},
            "paste": {name: "Paste", icon: "paste"},
            "delete": {name: "Delete", icon: "delete"},
            "sep1": "---------",
            "quit": {name: "Quit", icon: "quit"}
        }
    });

    $('.context-menu-one').on('click', function(e){
        console.log('clicked', this);
    })
});

<div class="context-menu-one box menu-1">
    <strong>right click me</strong>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:03:44.773

要让您的脚本在整个页面上触发，请更改您的选择器：

```
selector: 'body', 
```

# ruby-on-rails - Ruby on Rails：搜索后在页面上显示结果

> ID：11650272
> 
> 赞同：0
> 
> 时间：2012-07-25T12:58:57.513
> 
> 标签：ruby-on-rails, ruby, search, params

我试图隐藏我的搜索结果，直到搜索发生。在我从主页点击到搜索页面的那一刻，页面显示了搜索框，同时也将所有的数据库显示在了一个表格中。我只想显示搜索选项和搜索按钮，然后根据搜索显示正确的表格。

这是我的搜索视图：

```
<h1>Search</h1>

<%= form_tag search_path, method: :get do %>

Client :
<%= select(@projects, :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "-Any-", :selected => params[:client]) %></br>

Industry :
<%= select(@projects, :industry, Project.all.map {|p| [p.industry]}.uniq, :prompt => "-Any-", :selected => params[:industry]) %></br>

Role :
<%= select(@projects, :role, Project.all.map {|p| [p.role]}.uniq, :prompt => "-Any-", :selected => params[:role]) %></br>

Technologies :
<%= select(@projects, :tech, Project.all.map {|p| [p.tech]}.uniq, :prompt => "-Any-", :selected => params[:tech]) %></br>

Business Division :

<%= select(@projects, :business_div, Project.all.map {|p| [p.business_div]}.uniq, :prompt => "-Any-", :selected => params[:business_div]) %></br>

Project Owner :
<%= select(@projects, :project_owner, Project.all.map {|p| [p.project_owner]}.uniq, :prompt => "-Any-", :selected => params[:project_owner]) %></br>

Exception PM
<%= select(@projects, :exception_pm, Project.all.map {|p| [p.exception_pm]}.uniq, :prompt => "-Any-", :selected => params[:exception_pm]) %></br>

Start Date :

<%=  text_field_tag("start_date") %></br>

End Date :

<%= text_field_tag("end_date") %></br>

Status :

<%= select(@projects, :status, Project.all.map {|p| [p.status]}.uniq, :prompt => "-Any-", :selected => params[:status]) %></br>

Keywords :

<%= text_field_tag :keywords, params[:keywords] %></br>

<%= submit_tag "Search", name: nil %>

<% end %>

<% if @search %>
    <h3><%=@project_search.total_entries%> results</h3>
<% end %>

<% if @search %>
<table class = "pretty">
<table border="1">
  <tr>
    <th><%= sortable "project_name", "Project name" %> </th>
    <th><%= sortable "client", "Client" %></th>
    <th>Exception pm</th>
    <th>Project owner</th>
    <th>Tech</th>
    <th>Role</th>
    <th>Industry</th>
    <th>Financials</th>
    <th>Business div</th>
    <th>Status</th>
    <th>Start date</th>
    <th>End date</th>
<% if false %>
    <th>Entry date</th>
    <th>Edited date</th>
    <th>Summary</th>
    <th>Lessons learned</tStackh>
    <th>Customer benifits</th>
    <th>Keywords</th>
    <!th></th>
    <!th></th>
    <!th></th>
<% end %>
  </tr>

<%# end %>

<% @project_search.each do |t| %>
  <tr>
    <td><%= t.project_name %></td>
    <td><%= t.client %></td>
    <td><%= t.exception_pm %></td>
    <td><%= t.project_owner %></td>
    <td><%= t.tech %></td>
    <td><%= t.role %></td>
    <td><%= t.industry %></td>
    <td><%= t.financials %></td>
    <td><%= t.business_div %></td>
    <td><%= t.status %></td>
    <td><%= l t.start_date %></td>
    <td><%= l t.end_date %></td>
<% if false %>
    <td><%= t.entry_date %></td>
    <td><%= t.edited_date %></td>
    <td><%= t.summary %></td>
    <td><%= t.lessons_learned %></td>
    <td><%= t.customer_benifits %></td>
    <td><%= t.keywords %></td>
<% end %>
    <!td><%#= link_to 'Show', project %></td>
    <!td><%#= link_to 'Edit', edit_project_path(project) %></td>
    <!td><%#= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

Results per page: <%= select_tag :per_page, options_for_select([10,20,50], params[:per_page].to_i), :onchange => "if(this.value){window.location='?per_page='+this.value;}" %>

<br />
<%= hidden_field_tag :direction, params[:direction] %>
<%= hidden_field_tag :sort, params[:sort] %>
<%= hidden_field_tag :per_page, params[:per_page] %>
<%= hidden_field_tag :page, params[:page] %>
<%= will_paginate (@project_search) %>

<%= button_to "Search Again?", search_path, :method => "get" %>

<%# end %>
<%= button_to "Home", projects_path, :method => "get" %> 
```

这是搜索操作：

```
def search

@search = params[:client], params[:industry], params[:role], params[:tech], params[:business_div], params[:project_owner], params[:exception_pm], params[:status], params[:start_date], params[:end_date], params[:keywords]

@project_search = Project.search(@search)

   @project = Project.new(params[:project])

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

这是我的模型。

```
class Project < ActiveRecord::Base
  attr_accessible :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

validates_presence_of :business_div, :client, :customer_benifits, :end_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

def self.search(search_client, search_industry, search_role, search_tech, search_business_div, search_project_owner, search_exception_pm, search_status, search_start_date, search_end_date, search_keywords) 
  return scoped unless search_client.present? || search_industry.present? || search_role.present? || search_tech.present? || search_business_div.present? || search_project_owner.present? || search_exception_pm.present? || search_status.present? || search_start_date.present? || search_end_date.present? || search_keywords.present?

if search_start_date != ""
search_start_date = Date.parse(search_start_date).strftime("%Y-%m-%d")
end
if search_end_date != ""
search_end_date = Date.parse(search_end_date).strftime("%Y-%m-%d")
end

  where(['client LIKE ? AND industry LIKE ? AND role LIKE ? AND tech LIKE ? AND business_div LIKE ? AND project_owner LIKE ? AND exception_pm LIKE ? AND status LIKE ? AND start_date LIKE ? AND end_date LIKE ? AND keywords LIKE ?', "%#{search_client}%", "%#{search_industry}%" , "%#{search_role}%" , "%#{search_tech}%" , "%#{search_business_div}%" , "%#{search_project_owner}%" , "%#{search_exception_pm}%" , "%#{search_status}%", "%#{search_start_date}%", "%#{search_end_date}%","%#{search_keywords}%"])

end

def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

希望你能看到我试图做的事情。我收到错误`wrong number of arguments (1 for 11)`，因为我没有拆分参数。但是当我使用时，`*@search`我会遇到很多错误。

在我试图隐藏表格之前，我在控制器中的原始代码如下所示：

`@project_search = Project.search(params[:client], params[:industry], params[:role], params[:tech], params[:business_div], params[:project_owner], params[:exception_pm], params[:status], params[:start_date], params[:end_date], params[:keywords]).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page`)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:07:54.370

您需要`@search`在传递参数时将参数splat`.search`告诉 Ruby 将参数数组扩展为要传递给的单独参数`Project.search`

```
@project_search = Project.search(*@search) 
```

[使用 splat 的信息](http://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/)

**编辑** *（回答您的后续问题）*

测试

```
<% if @search %> 
```

还不够，因为它总是有一个计算结果为 的值`true`，即使它只是`[]`or `["", "", "", "", "", "", "", "", "", "", ""]`。正确检查这一点的一种方法是创建一个新的布尔实例变量，`true`如果搜索过滤器中的所有字段都是空白的。

```
# put this after you set @search in your action
@search_performed = !@search.reject! { |c| c.blank? }.empty? 
```

现在`@search_performed`在您的视图中进行测试

```
<% if @search_performed %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:10:10.713

你正在存储数组，`@search`你必须使用`*`运算符

```
@project_search = Project.search(*@search) 
```

# php - REST API 使用统一资源标识符 (URI) 来寻址资源？

> ID：11650274
> 
> 赞同：-2
> 
> 时间：2012-07-25T12:58:59.907
> 
> 标签：php, web-services

> **可能重复：用于重写**[SEO 友好 URL](https://stackoverflow.com/questions/6002203/seo-friendly-url)
> [的 URL 重写代码](https://stackoverflow.com/questions/806697/url-rewriting-code-for-rewriting)

目前我有`login.php`登录功能。我正在使用`http://localhost/login.php?param=x`

现在我想这样称呼`http://localhost/login/paramvalue`

我应该怎么做才能做到这一点，因为我不知道在谷歌中搜索它的命名约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:01:10.280

这称为 URL 重写 - 你如何做取决于你的网络服务器。

在 Apache 中，使用 mod_rewrite。

在 IIS 中，使用 URL 重写模块

# iphone - 应用程序崩溃，不知道为什么

> ID：11650276
> 
> 赞同：3
> 
> 时间：2012-07-25T12:59:04.110
> 
> 标签：iphone, crash, crash-reports

我试图弄清楚为什么我的应用程序有时会在客户设备上崩溃。设备是否越狱无关紧要。我的应用程序来自 AppStore。其他崩溃日志几乎相同，尽管它们崩溃的线程不同。

```
Hardware Model:      iPhone3,1
Process:         [the APP] [296]
Path:            /var/mobile/Applications/06DF5BC5-F9C2-49EE-B2D5-5979C09B51A2/[the APP].app/[the APP]
Identifier:      [the APP]
Version:         3.3.0
Code Type:       ARM
Parent Process:  launchd [1]

Date/Time:       2012-07-22 15:15:18 +0000
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0xbbadbeef
Crashed Thread:  7

Thread 0:
0   libsystem_kernel.dylib              0x35c39004 mach_msg_trap + 20
1   CoreFoundation                      0x353673f3 __CFRunLoopServiceMachPort + 127
2   CoreFoundation                      0x353660f1 __CFRunLoopRun + 825
3   CoreFoundation                      0x352e94a5 CFRunLoopRunSpecific + 301
4   CoreFoundation                      0x352e936d CFRunLoopRunInMode + 105
5   GraphicsServices                    0x36f85439 GSEventRunModal + 137
6   UIKit                               0x32df5cd5 UIApplicationMain + 1081
7   [the APP]                           0x0000b549 main (main.m:20)

Thread 1:
0   libsystem_kernel.dylib              0x35c393a8 kevent + 24
1   libdispatch.dylib                   0x3422cbc9 _dispatch_mgr_wakeup + 1

Thread 2:
0   libsystem_kernel.dylib              0x35c490d8 __psynch_mutexwait + 24
1   WebCore                             0x311454ef _ZL17_WebTryThreadLockb + 215
2   WebCore                             0x311a4173 _ZL19SendDelegateMessageP12NSInvocation + 707
3   WebKit                              0x3507ad87 -[_WebSafeForwarder forwardInvocation:] + 119
4   CoreFoundation                      0x35395a83 ___forwarding___ + 667
5   CoreFoundation                      0x352f0650 _CF_forwarding_prep_0 + 48
6   WebKit                              0x350816a1 WebFrameLoaderClient::dispatchDecidePolicyForNavigationAction(void (WebCore::PolicyChecker::*)(WebCore::PolicyAction), WebCore::NavigationAction const&, WebCore::ResourceRequest const&, WTF::PassRefPtr) + 221
7   WebCore                             0x3120b8b9 WebCore::PolicyChecker::checkNavigationPolicy(WebCore::ResourceRequest const&, WebCore::DocumentLoader*, WTF::PassRefPtr, void (*)(void*, WebCore::ResourceRequest const&, WTF::PassRefPtr, bool), void*) + 873
8   WebCore                             0x3120ae4d WebCore::FrameLoader::loadWithDocumentLoader(WebCore::DocumentLoader*, WebCore::FrameLoadType, WTF::PassRefPtr) + 913
9   WebCore                             0x312092b9 WebCore::FrameLoader::load(WebCore::DocumentLoader*) + 169
10  WebCore                             0x312091e5 WebCore::FrameLoader::load(WebCore::ResourceRequest const&, WebCore::SubstituteData const&, bool) + 241
11  WebKit                              0x350b3f5f -[WebFrame _loadData:MIMEType:textEncodingName:baseURL:unreachableURL:] + 1119
12  WebKit                              0x350b3797 -[WebFrame _loadHTMLString:baseURL:unreachableURL:] + 79
13  WebKit                              0x350b37bb -[WebFrame loadHTMLString:baseURL:] + 31
14  WebCore                             0x311950b5 HandleRunSource + 365
15  CoreFoundation                      0x35367ad3 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
16  CoreFoundation                      0x35367335 __CFRunLoopDoSources0 + 365
17  CoreFoundation                      0x35366045 __CFRunLoopRun + 653
18  CoreFoundation                      0x352e94a5 CFRunLoopRunSpecific + 301
19  CoreFoundation                      0x352e936d CFRunLoopRunInMode + 105
20  WebCore                             0x311e8ca3 _ZL12RunWebThreadPv + 403
21  libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 3:
0   libsystem_kernel.dylib              0x35c39004 mach_msg_trap + 20
1   CoreFoundation                      0x353673f3 __CFRunLoopServiceMachPort + 127
2   CoreFoundation                      0x3536612b __CFRunLoopRun + 883
3   CoreFoundation                      0x352e94a5 CFRunLoopRunSpecific + 301
4   CoreFoundation                      0x352e936d CFRunLoopRunInMode + 105
5   Foundation                          0x34e22bb9 +[NSURLConnection(Loader) _resourceLoadLoop:] + 309
6   Foundation                          0x34e22a81 -[NSThread main] + 73
7   Foundation                          0x34eb6591 __NSThread__main__ + 1049
8   libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 4:
0   libsystem_kernel.dylib              0x35c49570 __select + 20
1   libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 5:
0   libsystem_kernel.dylib              0x35c39004 mach_msg_trap + 20
1   CoreFoundation                      0x353673f3 __CFRunLoopServiceMachPort + 127
2   CoreFoundation                      0x3536612b __CFRunLoopRun + 883
3   CoreFoundation                      0x352e94a5 CFRunLoopRunSpecific + 301
4   CoreFoundation                      0x352e936d CFRunLoopRunInMode + 105
5   YouTube                             0x33e336c9 -[YTImageLoader(Internal) _startLoader] + 245
6   Foundation                          0x34e22a81 -[NSThread main] + 73
7   Foundation                          0x34eb6591 __NSThread__main__ + 1049
8   libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 6:
0   libsystem_kernel.dylib              0x35c49cd4 __workq_kernreturn + 8

Thread 7 Crashed:
0   WebCore                             0x311454e2 _ZL17_WebTryThreadLockb + 202
1   WebCore                             0x3114540f WebThreadLock + 55
2   UIKit                               0x32e5537b -[UIWebTiledView layoutSubviews] + 43
3   UIKit                               0x32e5534b -[UIWebDocumentView layoutSubviews] + 127
4   UIKit                               0x32dcaf37 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 183
5   CoreFoundation                      0x352f21fb -[NSObject performSelector:withObject:] + 43
6   QuartzCore                          0x321c2aa5 -[CALayer layoutSublayers] + 217
7   QuartzCore                          0x321c26bd CA::Layer::layout_if_needed(CA::Transaction*) + 217
8   QuartzCore                          0x321c6843 CA::Context::commit_transaction(CA::Transaction*) + 227
9   QuartzCore                          0x321c657f CA::Transaction::commit() + 315
10  QuartzCore                          0x3220dd01 CA::Transaction::release_thread(void*) + 37
11  libsystem_c.dylib                   0x327490ff _pthread_tsd_cleanup + 171
12  libsystem_c.dylib                   0x32748d7b _pthread_exit + 123
13  libsystem_c.dylib                   0x3275a0f3 pthread_exit + 31
14  Foundation                          0x34e3237b +[NSThread exit] + 11
15  Foundation                          0x34eb65af __NSThread__main__ + 1079
16  libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 8:
0   libsystem_kernel.dylib              0x35c49cd4 __workq_kernreturn + 8

Thread 9:
0   libsystem_kernel.dylib              0x35c49cd4 __workq_kernreturn + 8

Thread 10:
0   libsystem_kernel.dylib              0x35c49cd4 __workq_kernreturn + 8

Thread 11:
0   libsystem_kernel.dylib              0x35c49cd4 __workq_kernreturn + 8

Thread 7 crashed with ARM Thread State:
    r0: 0xffffffff     r1: 0x00001100     r2: 0x2ffc850c     r3: 0x00000000 
    r4: 0xbbadbeef     r5: 0x00000000     r6: 0x0054b000     r7: 0x2ffc8b4c 
    r8: 0x0ca32800     r9: 0x3399fc2c    r10: 0x2ffc8be4    r11: 0x2ffc8ebc 
    ip: 0x3ee8e270     sp: 0x2ffc8b40     lr: 0x35790fef     pc: 0x32c7f4e2 
  cpsr: 0x60000030 

Binary Images:
[cut cause of char limit] 
```

我不知道发生了什么，有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:04:59.487

问题是您从后台线程向 UI 对象发送消息，这是被禁止的。

线程 7 崩溃，堆栈跟踪进入 UIView 的布局机制。线程 7 在此代码中的事实可能是`setNeedsLayout`由于从该后台线程发送的某个或其他方法所致。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T13:24:53.103

我认为 Web 视图已完成加载并尝试重新加载视图，但视图控制器已弹出并释放，您需要在 viewWillDisappear 方法中添加它：

```
- (void)viewWillDisappear:(BOOL)animated{
    [super viewWillDisappear:animated];
    if ([webView isLoading]) {
        [webView stopLoading];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T14:59:20.270

我所在的项目看到了在 WebKit 上运行的基于 WinTel 的 GWT 应用程序的类似异常。已确定此特定问题仅在 WebKit 内存不足时发生。

# regex - 根据列号应用面颜色

> ID：11650278
> 
> 赞同：2
> 
> 时间：2012-07-25T12:59:07.353
> 
> 标签：regex, emacs, strict, emacs-faces, font-lock

有所谓的严格格式，例如[pdb](http://en.wikipedia.org/wiki/Protein_Data_Bank_%28file_format%29) - 其中符号的含义由符号的列号定义。例如[，这里](http://www.wwpdb.org/documentation/format32/sect9.html#ATOM)是上述 pdb 格式的规范。

有没有办法可以根据列范围应用面部颜色？

通常可以通过以下方式添加要突出显示的正则表达式，例如对于当前会话：

```
(font-lock-add-keywords nil '(("\\[\\(.+?\\)\\]" . font-lock-keyword-face))) 
```

那么有没有办法在列上指定那个面，比如 7-11 - 应该是，比如 - 红色？

**编辑**：

所以答案是：

```
(font-lock-add-keywords nil '(("^.\\{2\\}\\(.\\{2\\}\\)" 1 font-lock-warning-face))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:49:45.567

定义一个将选择适当列的正则表达式。例如，要选择第三列（假设列仅包含字母以使示例清晰），您可以执行类似的操作`"\(?:[a-z]+ \)\{2\}\([a-z]+\)"`，然后在第一组上进行匹配。

当然，您可以通过使用`format`并传递一些参数来创建这样的字符串，以获得更大的灵活性。

`(font-lock-add-keywords nil '(("\\(?:[a-z]+ \\)\\{2\\}\\([a-z]+\\)" 1 font-lock-warning-face)))`

作为另一个方向，在空白模式中找到了以下代码，它突出显示了某个数字上的字符：

```
;; Show "long" lines
(list
(let ((line-column (or whitespace-line-column fill-column)))
   (format
    "^\\([^\t\n]\\{%s\\}\\|[^\t\n]\\{0,%s\\}\t\\)\\{%d\\}%s\\(.+\\)$"
    whitespace-tab-width
    (1- whitespace-tab-width)
    (/ line-column whitespace-tab-width)
    (let ((rem (% line-column whitespace-tab-width)))
      (if (zerop rem)
      ""
    (format ".\\{%d\\}" rem)))))
 (if (memq 'lines whitespace-active-style)
     0              ; whole line
   2)               ; line tail
 whitespace-line t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:07:10.347

以下内容最初将着色应用于第 7 列到第 11 列的文本：

```
(defun bk-pdb-color-ATOM-initially()
  (interactive)
  (save-excursion
    (goto-char (point-min))
    (while (search-forward-regexp "^ATOM  \\(.\\{5\\}\\).\\(.\\{4\\}\\).\\(.\\{3\\}\\).\\(.\\{5\\}\\).\\{4\\}\\(.\\{24\\}\\)" nil t)
      (progn
        (overlay-put
         (make-overlay (match-beginning 1) (match-end 1))
         'face '(:foreground "blue"))
        (overlay-put
         (make-overlay (match-beginning 2) (match-end 2))
         'face '(:foreground "red"))
        (overlay-put
         (make-overlay (match-beginning 3) (match-end 3))
         'face '(:foreground "purple1"))
        (overlay-put
         (make-overlay (match-beginning 4) (match-end 4))
         'face '(:foreground "orange"))
        (overlay-put
         (make-overlay (match-beginning 5) (match-end 5))
         'face '(:foreground "green"))
        t nil)
))) 
```

# google-maps - 带有多边形和标记的融合表层

> ID：11650286
> 
> 赞同：1
> 
> 时间：2012-07-25T12:59:30.217
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-fusion-tables

使用谷歌地图 API v3

我有一张使用融合表图层中的多边形着色的国家/地区的地图。单击多边形时，它将打开已在 Web 界面中配置的默认 Fusion Table 信息窗口。

在某些缩放级别下无法看到某些国家/地区，因此我希望这些国家/地区具有多边形和标记，单击该标记时会打开默认的 Fusion Table 信息窗口。我确实添加了一个标准地图标记，但单击时无法打开 Fusion Table 信息窗口。

我已经阅读了文档并查看了示例，但看不到这是如何实现的。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:36:49.510

设法得到这个工作。

我创建了第二个 Fusion Table 图层，我没有选择 KML 列，而是选择了带有 WHERE 子句指定较小国家/地区的经度列。这会在位于多边形图层顶部的较小国家/地区上呈现带有标记的图层。

唯一的缺点是多边形和标记都是可点击的，这可能会打开重复的默认融合表信息窗口。不过也不是什么大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:49:12.083

您无法从外部单击事件访问“默认 FusionTables 信息窗口”。您可以从您的页面查询 FusionTable，并在单击 Google Maps API 标记（或侧边栏条目）时显示包含相同信息的信息窗口。

[示例](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_Watershed_Stewards_Map_sidebar2.html)（从侧边栏单击打开信息窗口，而不是标记，因为您没有提供示例）

# javascript - 选中/取消选中复选框 ajax 请求

> ID：11650287
> 
> 赞同：1
> 
> 时间：2012-07-25T12:59:30.763
> 
> 标签：javascript, ajax, asp.net-mvc, razor

我在剃刀视图引擎上有一个复选框：

```
@Html.CheckBoxFor(model => model.Attempt, new { id = "Attempt" }) 
```

我想在复选框上的每次选中/取消选中时发出 ajax 请求。所以，我使用了javascript，

```
$(document).ready(function () {

// Some other functions here

        $('#Attempt input:checkbox').change(function () {
            $.ajax({
                url: '@Url.Action("Select", "Test")',
                type: 'POST',
                data: { attempt: true }

            });

        })

    }); 
```

但它根本不起作用。根本没有发送请求。我错过了什么？另外，如何`attempt`根据 check/uncheck 映射数据 true 或 false ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T13:59:54.933

我不知道为什么它不起作用，但我稍作修改以使其起作用。

```
$('#Attempt').change(function () {
            if ($('#Attempt').is(':checked')) {
                $.ajax({
                    url: '@Url.Action("Select","Test")',
                    data: { isLocked: true },

                    type: 'POST',
                    dataType: "json"
                });
            }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:05:18.483

您的选择器说找到一个具有 id Attempt 的元素，然后找到里面的复选框。我相信您的选择器应该只是 id，除非我不了解您使用的电镀语言。

# asp.net-mvc-3 - 更新控制器中的模型对象

> ID：11650291
> 
> 赞同：1
> 
> 时间：2012-07-25T12:59:44.543
> 
> 标签：asp.net-mvc-3, c#-4.0, asp.net-mvc-controller

我正在尝试在我的模型对象中更新用户

```
 public ActionResult AddJob(JobQueue job,HttpPostedFileBase file)
    {
       job.User = "itdev";

       TryUpdateModel(job) 

       if (ModelState.IsValid)//Always returns false
       {

       }
    } 
```

模型

```
 public class JobQueue { 
   [Required] 
   [Display(Name="JobId")] 
   public string JobId { get; set; } 

   [Required] [Display(Name = "FileName")] 
   public string FileName { get; set; } 

   [Required] 
   [Display(Name = "Job Run Date")] 
   public DateTime JobRunDate { get; set; } 

   [Required] 
   [Display(Name = "Email")] 
   public string Mail { get; set; } 

   [Required] 
   [Display(Name = "User")] 
   public string User { get; set; } 
```

我在分配值后尝试使用 TryUpdateModel(job) 和 UpdateModel(job)。这两个似乎都没有更新模型，因为 ModelState.IsValid 返回 false。有人能指出我正确的方向吗？我正在使用 MVC3

谢谢，

萨布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:04:42.473

我在这里可能是错的，但我认为`job.User = "itdev";`应该足以更新模型而不使用`TryUpdateModel(job)`我们在我们网站上的操作方式。我从来不需要使用任何方法来实际更新模型本身。只需手动分配值。

我猜这取决于你的模型是如何设置的。

您可能应该发布您的模型的代码，以防我的回答没有帮助。

# jpa - 如何使用同一集合的多个成员编写 JPQL 查询？

> ID：11650297
> 
> 赞同：0
> 
> 时间：2012-07-25T13:00:16.053
> 
> 标签：jpa, collections, jpql, one-to-many

我有一个通知实体，它与其参数具有 OneToMany 关系，它是 NotificationParamEntity 对象的列表。

这两个类的代码如下所示：

```
// Notification Entity
@Entity
@Table (name = "NOTIFICATIONS")
public class NotificationEntity {
    ......
    @OneToMany (mappedBy = "notification")
    private List<NotificationParamEntity> params;
    ......
}

// Notification Parameter Entity
@Entity
@Table (name = "NOTIFICATIONS_PARAM")
public class NotificationParamEntity {
    ......
    @Column (name = "KEY", length = 40, nullable = false)
    @Enumerated (EnumType.STRING)
    private NotificationParameterEnum key;

    @Column (name = "VALUE", length = 4000, nullable = false)
    private String value;

    @ManyToOne
    @JoinColumn (name = "NOTIFICATION_ID", nullable = false)
    private NotificationEntity notification;
    ......
} 
```

现在我可以使用下面的查询来获取具有名为“P1”的参数和值为“V1”的通知：

> SELECT DISTINCT anEntity FROM NotificationEntity anEntity, IN (anEntity.params) p WHERE p.key = "P1" AND p.value = 'V1'

但是当我想找出具有两个指定参数（P1=V1 和 P2=V2）的通知时，我在下面的查询找不到任何东西：

> SELECT DISTINCT anEntity FROM NotificationEntity anEntity, IN (anEntity.params) p WHERE p.key = "P1" AND p.value = 'V1' AND p.key = "P2" AND p.value = "V2"

我可以理解为什么它不起作用：没有参数可以有两个不同的键，所以查询什么也不返回。

但是如何使这项工作？假设我有一个通知实体，它有两个参数，一个名为 P1，值为 V1，另一个为 P2，值为 V2，如何使用 JPQL 查询找到此通知实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:41:40.090

尝试这样的事情：

```
SELECT n FROM NotificationEntity n WHERE EXISTS 
     (SELECT p FROM NotificationParamEntity p WHERE p.key = 'P1' AND p.value = 'V1' 
     AND p.notificationEntity = n) 
AND EXISTS 
     (SELECT p2 FROM NotificationParamEntity p2 WHERE p2.key = 'P2' AND p2.value = 'V2' 
     AND p2.notificationEntity = n) 
```

请注意，它需要从 NotificationParamEntity 到 NotificationEntity 的引用（我在您的代码片段中没有看到该列，但您应该拥有它，@ManyToOne）。

# facebook - 画廊中每张图片的特定赞、Twitter 和 Pinterest 按钮？

> ID：11650302
> 
> 赞同：0
> 
> 时间：2012-07-25T13:00:29.780
> 
> 标签：facebook, image, wordpress, facebook-like, gallery

我正在开发的网站是 WordPress。我现在正在尝试创建一个图片库，但我希望每张图片都有自己的 URL 和社交按钮。这意味着您将能够看到像它一样的图像，看到它以正确的缩略图张贴在您的墙上，并再次重定向到画廊中的正确页面。直到现在，我尝试使用简单的 WordPress 库和 NextGEN 库。不幸的是，我还没有得到好的结果。

到目前为止，我可以使用 NextGEN 做以下事情：

[画廊主页](http://www.101greatgoals.com/gallery/)

[图库图片页面](http://www.101greatgoals.com/gallery/gimages/image/gabriel_batistuta_0/)

我在那里遇到的问题：

1.  当我喜欢一张图片时，Facebook 中出现的拇指是错误的。
2.  来自 Facebook 的重定向 URL 也是如此，它将我带到主画廊，而不是我喜欢的特定图像。
3.  与推特相同。

这是我在图像页面上使用的代码：http: [//jsbin.com/ujahex/watch](http://jsbin.com/ujahex/watch)

非常感谢！

# ruby-on-rails - Ruby 1.8.7 在另一个模块中扩展常量

> ID：11650303
> 
> 赞同：0
> 
> 时间：2012-07-25T13:00:35.710
> 
> 标签：ruby-on-rails, ruby

`MIME_TYPES`我需要通过向常量哈希添加一些项目来扩展现有模块（即 Redmine::MimeType） 。

这是我迄今为止尝试过的，这只给了我一个“动态常量分配”错误：

```
module MimeTypePatch
  def self.included(base) # :nodoc:
    base.extend(ClassMethods)

    base.class_eval do
      MIME_TYPES_VIDEO = {
        'video/x-flv' => 'flv,f4v',
        'video/mpeg' => '*.mpeg *.mpg *.mpe',
        'video/quicktime' => 'qt,mov',
        'video/vnd.vivo' => 'viv,vivo',
        'video/x-msvideo' => 'avi'
      }.freeze

      # merge the new mime types with the existing ones
      MIME_TYPES = MIME_TYPES.merge(MIME_TYPES_VIDEO).freeze

      EXTENSIONS = MIME_TYPES.inject({}) do |map, (type, exts)|
        exts.split(',').each {|ext| map[ext.strip] = type}
        map
      end
    end
  end
end 
```

那么我做错了什么，改变另一个模块中现有常量的正确方法可能是什么？我确实看到在运行时更改常量有点过时，但我想不出更优雅的方法来实现我想要的（检测视频 mime 类型）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:19:23.980

除了冻结之外，您可以在许多情况下*修改*现有常量，而不是尝试重新定义它们。例如，在您的示例中，使用`#merge!`而不是`#merge`会更改常量。我不确定您是否必须采取措施将当前范围内的定义与继承范围内的定义区分开来（*即*，您不想更改任何祖先上游值（`MIME_TYPES`如果有的话））。

```
MIME_TYPES = {} unless (defined?(MIME_TYPES))
MIME_TYPES.merge!(MIME_TYPES_VIDEO) 
```

同样令人感兴趣的是、和其他的`#replace`方法：`Hash``Array`

```
MIME_TYPES.replace(MIME_TYPES.merge(MIME_TYPES_VIDEO)) 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:32:33.150

您不能在初始定义后为常量分配值，您必须创建一个具有合并哈希值的新常量。将这一行从

```
# merge the new mime types with the existing ones
MIME_TYPES = MIME_TYPES.merge(MIME_TYPES_VIDEO).freeze 
```

到

```
# merge the new mime types with the existing ones
MERGED_MIME_TYPES = MIME_TYPES.merge(MIME_TYPES_VIDEO).freeze 
```

然后你可以`MERGED_MIME_TYPES`在进一步的逻辑中使用这个新常量

# amazon-web-services - 需要 aws beanstalk us-west ami 吗？

> ID：11650306
> 
> 赞同：0
> 
> 时间：2012-07-25T13:00:43.930
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk, amazon-ami

我需要使用 Amazon 的 Elastic Beanstalk amis 作为起点（使用 Java 和 Tomcat）构建一些自定义 AMI。我知道美国的价值观是什么，但 eu-west-1 地区的价值观是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:02:09.330

我也许可以使用命令行工具“ec2-describe-images”自己回答这个问题。

使用以下内容提供了 AMI 列表，其中美国官方的 AMI 出现在列表中（请参阅[https://forums.aws.amazon.com/ann.jspa?annID=1363](https://forums.aws.amazon.com/ann.jspa?annID=1363)）：

ec2-describe-images --owner amazon --filter "architecture=x86_64" --filter "manifest-location= *ElasticBeanstalk* "

所以现在我为区域 eu-west-1 运行同样的事情......

ec2-describe-images --region eu-west-1 --owner amazon --filter "architecture=x86_64" --filter "manifest-location= *ElasticBeanstalk* "

我发现对于 eu-west-1 ......

运行 Tomcat 6 的 32 位 Amazon Linux：ami-33261d47 运行 Tomcat 6 的 64 位 Amazon Linux：ami-35261d41

运行 Tomcat 7 的 32 位 Amazon Linux：ami-37261d43 运行 Tomcat 7 的 64 位 Amazon Linux：ami-4b261d3f

干杯！！！

# css - 是不是 Blueprint CSS 框架过时了？

> ID：11650307
> 
> 赞同：4
> 
> 时间：2012-07-25T13:00:43.947
> 
> 标签：css, blueprint-css

我想使用蓝图 css 框架，但最后一个版本发布是一年多以前。在 Github 存储库中都没有提交。有人维护吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T22:37:10.203

蓝图已经过时了。

试试这个：

*   [http://getbootstrap.com/](http://getbootstrap.com/)
*   [http://foundation.zurb.com/](http://foundation.zurb.com/)
*   [http://semantic-ui.com/](http://semantic-ui.com/)

# windows - 我可以获得 Windows Azure 诊断性能计数器名称的完整列表吗？

> ID：11650309
> 
> 赞同：3
> 
> 时间：2012-07-25T13:00:48.790
> 
> 标签：windows, performance, azure, performancecounter, azure-diagnostics

在 Windows Azure 诊断中启用性能计数器时，我必须使用一些魔术字符串文字来指定计数器，例如`\Processor(_Total)\% Processor Time`. 我找不到可能的字符串文字列表。

哪里有清单吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:10:19.273

这是 Windows 性能监视基础结构。

但是，您是对的，很难在互联网上找到真实的清单。但这里有几个链接可以帮助你。

*   [与 Azure Web 角色一起使用的性能计数器列表](http://blogs.msdn.com/b/avkashchauhan/archive/2011/04/01/list-of-performance-counters-for-windows-azure-web-roles.aspx)
*   [性能计数器的好列表](http://blogs.msdn.com/b/joelo/archive/2007/01/16/good-list-of-performance-counters.aspx)

Rest 正在使用您最喜欢的搜索引擎搜索互联网。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T07:45:54.093

应@sharptooth 的要求添加我的评论作为答案:)

RDP 进入 VM 后，打开命令提示符并键入“typeperf -q”以列出 VM 上所有可用的性能计数器。正如@Sandrino Di Mattia 提到的，您可以使用“typeperf -q > counters.txt”将结果保存在文本文件中。

请注意，根据 VM 托管的角色类型（Web 角色或工作角色），您可能会获得不同的性能计数器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T13:09:23.377

使用远程桌面连接转到 Azure 服务器。运行 perfmon 并添加一个新的计数器，瞧，这就是你的列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-04T21:56:56.617

对于它的价值，根据 Gaurav Mantri 的评论，这是我从我的 Web 角色中获得的列表。这是 的输出`typeperf -q`。我假设不同的 Azure 角色有不同的计数器，它们甚至可能因 Web 角色而异。我们的是中号。

该列表对于 SO 上的帖子来说太大了，所以这里有一个 github 要点： [https ://gist.github.com/seibar/74b376aa1c57f2f7c2fd](https://gist.github.com/seibar/74b376aa1c57f2f7c2fd)

# android - 使用 android.support.v4.app.ListFragment 时列表的背景颜色在滚动时变为白色；

> ID：11650323
> 
> 赞同：7
> 
> 时间：2012-07-25T13:01:24.697
> 
> 标签：android, android-layout, arraylist, android-listview, android-listfragment

我正面临一个关键问题。我正在尝试在滚动时更改列表的背景颜色（透明），但无法做到。我试图通过 listView 的 xml 以及代码进行更改。但在这两种情况下，**列表背景都变为白色**。我正在使用 android.support.v4.app.ListFragment; 和 FragmentPagerAdapter。

我想改变列表滚动时间的颜色变化。为此，我正在使用以下代码。

```
public static class ArrayListFragment extends ListFragment {
    int mNum;
    /**
     * Create a new instance of CountingFragment, providing "num"
     * as an argument.
     */
    static ArrayListFragment newInstance(int num) {
        ArrayListFragment f = new ArrayListFragment();
        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putInt("num", num);
        f.setArguments(args);

        return f;
    }
    /**
     * When creating, retrieve this instance's number from its arguments.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mNum = getArguments() != null ? getArguments().getInt("num") : 1;
    }

    /**
     * The Fragment's UI is just a simple text view showing its
     * instance number.
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_pager_list, container, false);
        //v.setBackgroundResource(R.drawable.background);
        View tv = v.findViewById(R.id.text);

        ((TextView)tv).setText(frameName());

        return v;
    }

   // @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_checked, RishavArraylist() ));

    } 
```

请告诉我如何在运行时更改滚动列表的背景？谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T13:30:16.513

看看Google 的[这篇博](http://android-developers.blogspot.co.uk/2009/01/why-is-my-list-black-android.html)文，特别是 XML 的相关部分；

```
 android:cacheColorHint="#00000000" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T03:43:12.890

对于这个问题，我们有很多选择，您可以通过编程将背景设置为透明，例如

```
yourlistview.setCacheColorHint(Color.TRANSPARENT); 
```

或通过xml

```
android:cacheColorHint="@android:color/transparent" 
```

# python - Python中概率数组的离散化

> ID：11650324
> 
> 赞同：2
> 
> 时间：2012-07-25T13:01:28.317
> 
> 标签：python, numpy, probability

我有一个 numpy 数组（实际上是从 GIS 栅格地图导入的），其中包含一个物种出现的概率值，如下例所示：

```
a = random.randint(1.0,20.0,1200).reshape(40,30)
b = (a*1.0)/sum(a) 
```

现在我想再次获得该数组的离散版本。例如，如果我有 100 个位于该阵列区域（1200 个单元）的个体，它们是如何分布的？当然，它们应该根据它们的概率分布，这意味着较低的值表示较低的发生概率。但是，由于一切都是统计数据，因此个人仍有可能位于低概率单元格中。应该有可能多个人可以占据一个单元...

这就像将连续分布曲线再次转换为直方图。就像许多不同的直方图可能会导致某个分布曲线一样，它也应该反过来。因此，应用我正在寻找的算法每次都会产生不同的离散值。

...python中有没有可以做到这一点的算法？由于我对离散化不太熟悉，也许有人可以提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:18:31.443

`random.choice`与 一起使用`bincount`：

```
np.bincount(np.random.choice(b.size, 100, p=b.flat),
            minlength=b.size).reshape(b.shape) 
```

如果您没有 NumPy 1.7，您可以替换`random.choice`为：

```
np.searchsorted(np.cumsum(b), np.random.random(100)) 
```

给予：

```
np.bincount(np.searchsorted(np.cumsum(b), np.random.random(100)),
            minlength=b.size).reshape(b.shape) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:39:28.643

到目前为止，我认为 ecatmur 的回答似乎非常合理和简单。

我只想添加一个更“应用”的示例。考虑一个有 6 个面（6 个数字）的骰子。每个数字/结果的概率为 1/6。以数组的形式显示骰子可能如下所示：

```
b = np.array([[1,1,1],[1,1,1]])/6.0 
```

因此，掷骰子 100 次`(n=100)`会产生以下模拟：

```
np.bincount(np.searchsorted(np.cumsum(b), np.random.random(n)),minlength=b.size).reshape(b.shape) 
```

我认为这可能是此类应用程序的合适方法。因此，感谢 ecatmur 的帮助！

/约翰内斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:29:54.517

这类似于我本月早些时候提出的[问题。](https://stackoverflow.com/questions/11380491/how-to-create-a-list-of-random-integer-vector-whose-sum-is-x)

```
import random
def RandFloats(Size):
    Scalar = 1.0
    VectorSize = Size
    RandomVector = [random.random() for i in range(VectorSize)]
    RandomVectorSum = sum(RandomVector)
    RandomVector = [Scalar*i/RandomVectorSum for i in RandomVector]
    return RandomVector

from numpy.random import multinomial
import math
def RandIntVec(ListSize, ListSumValue, Distribution='Normal'):
    """
    Inputs:
    ListSize = the size of the list to return
    ListSumValue = The sum of list values
    Distribution = can be 'uniform' for uniform distribution, 'normal' for a normal distribution ~ N(0,1) with +/- 5 sigma  (default), or a list of size 'ListSize' or 'ListSize - 1' for an empirical (arbitrary) distribution. Probabilities of each of the p different outcomes. These should sum to 1 (however, the last element is always assumed to account for the remaining probability, as long as sum(pvals[:-1]) <= 1).  
    Output:
    A list of random integers of length 'ListSize' whose sum is 'ListSumValue'.
    """
    if type(Distribution) == list:
        DistributionSize = len(Distribution)
        if ListSize == DistributionSize or (ListSize-1) == DistributionSize:
            Values = multinomial(ListSumValue,Distribution,size=1)
            OutputValue = Values[0]
    elif Distribution.lower() == 'uniform': #I do not recommend this!!!! I see that it is not as random (at least on my computer) as I had hoped
        UniformDistro = [1/ListSize for i in range(ListSize)]
        Values = multinomial(ListSumValue,UniformDistro,size=1)
        OutputValue = Values[0]
    elif Distribution.lower() == 'normal':
        """
            Normal Distribution Construction....It's very flexible and hideous
            Assume a +-3 sigma range.  Warning, this may or may not be a suitable range for your implementation!
            If one wishes to explore a different range, then changes the LowSigma and HighSigma values
            """
            LowSigma    = -3#-3 sigma
            HighSigma   = 3#+3 sigma
            StepSize    = 1/(float(ListSize) - 1)
            ZValues     = [(LowSigma * (1-i*StepSize) +(i*StepSize)*HighSigma) for i in range(int(ListSize))]
            #Construction parameters for N(Mean,Variance) - Default is N(0,1)
            Mean        = 0
            Var         = 1
            #NormalDistro= [self.NormalDistributionFunction(Mean, Var, x) for x in ZValues]
            NormalDistro= list()
            for i in range(len(ZValues)):
                if i==0:
                    ERFCVAL = 0.5 * math.erfc(-ZValues[i]/math.sqrt(2))
                    NormalDistro.append(ERFCVAL)
                elif i ==  len(ZValues) - 1:
                    ERFCVAL = NormalDistro[0]
                    NormalDistro.append(ERFCVAL)
                else:
                    ERFCVAL1 = 0.5 * math.erfc(-ZValues[i]/math.sqrt(2))
                    ERFCVAL2 = 0.5 * math.erfc(-ZValues[i-1]/math.sqrt(2))
                    ERFCVAL = ERFCVAL1 - ERFCVAL2
                    NormalDistro.append(ERFCVAL)  
            #print "Normal Distribution sum = %f"%sum(NormalDistro)
            Values = multinomial(ListSumValue,NormalDistro,size=1)
            OutputValue = Values[0]
        else:
            raise ValueError ('Cannot create desired vector')
        return OutputValue
    else:
        raise ValueError ('Cannot create desired vector')
    return OutputValue

ProbabilityDistibution = RandFloats(1200)#This is your probability distribution for your 1200 cell array
SizeDistribution = RandIntVec(1200,100,Distribution=ProbabilityDistribution)#for a 1200 cell array, whose sum is 100 with given probability distribution 
```

重要的两行主要是上面代码中的最后两行

# filemaker - FMP 12 中基于 ExecuteSQL() 的查询中的 ValueList

> ID：11650326
> 
> 赞同：0
> 
> 时间：2012-07-25T13:01:31.607
> 
> 标签：filemaker

我正在考虑将我们的 FMP11 开发解决方案升级到 FMP12。对我们来说，ValueList 特性周围存在关键功能，可以在选定字段中显示一个值（例如描述）同时返回另一个值（例如 UID）。

如果您能够从 ExecuteSQL() 函数中复制此功能，我会很感兴趣（我可以成功返回单个 ValueList ...遇到上述问题）

非常感谢吉尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:56:51.097

基于值列表的核心功能，您不能使用该`ExecuteSQL()`函数直接在值列表对话框内计算值。

您需要做的是创建一个包含一条记录和两个字段的表。然后，您将使用`ExecuteSQL()`计算来用数据填充第一个和第二个字段。确保`executeSQL()`在两个字段中以相同的顺序对内部数据进行排序非常重要。

因此，您的文件制作者计算将是（假设第一个字段是`key`，第二个字段是`name`并且它来自名为 items 的表，并且您正在寻找 where `key > 100`）

```
keylist = 
ExecuteSQL ( 
"SELECT key 
FROM items 
WHERE key > 100
ORDER BY key ASC"
; "" ; "" )

namelist = 
ExecuteSQL ( 
"SELECT name 
FROM items 
WHERE key > 100
ORDER BY key ASC"
; "" ; "" ) 
```

然后，您将创建一个使用 keylist 作为第一个字段，使用 namelist 作为第二个字段的值列表，仅显示来自第二个字段的值。

拥有计算值列表的功能会很好，但据我所知，filemaker 总是需要从值列表对话框之外的源中提取值。

# java - 刷新android Listview

> ID：11650327
> 
> 赞同：0
> 
> 时间：2012-07-25T13:01:40.663
> 
> 标签：java, android, android-listview, android-arrayadapter

当数据发生变化时，我正在尝试重新加载列表视图。但它不起作用。这是我正在使用的代码

```
localPits.clear();//
this.adapter.clear();
//Fetch new data and update the list
this.localPits.addAll(pl);
this.adapter.notifyDataSetChanged();
this.lst_Pits.invalidate(); 
```

每次我调用这部分代码时，都会成功删除现有值。但新值不会加载到列表视图中。

我怎么能在android中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:16:10.490

`this.adapter.clear();`不应该需要。它必须重置 和 之间的`adapter`链接`localPits`。

如果您需要保留它，请更新列表适配器`localPits.setAdapter(adapter);`。它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:08:02.977

这不是很清楚，但我怀疑没有加载新值，因为您正在清除适配器而不更新它。

你的第二行：`this.adapter.clear();`

您需要在调用之前更新并添加适配器`invalidate()`。或者，至少，这是我所能收集到的。

# google-sheets - Google 电子表格查询错误 - 列不存在

> ID：11650331
> 
> 赞同：21
> 
> 时间：2012-07-25T13:01:51.390
> 
> 标签：google-sheets, google-sheets-formula, google-sheets-query

Google 电子表格 API 的另一个问题。我正在尝试使用`QUERY()`函数来从我们的数据库中获取来自华沙的所有客户。然而，谷歌 API 似乎在解析我的查询时遇到了一个大问题。我检查了几次，一切正常。尝试了分号、不同的撇号和列名——它仍然不起作用。我在工作表单元格中键入此代码：

```
=QUERY(IMPORTRANGE("0ArsOaWajjzv9dEdGTUZCWFc1NnFva05uWkxETVF6Q0E"; "Kuchnia polska!A3:G40"); "select B where E contains 'Warszawa'") 
```

并得到这样的错误：

```
Invalid query: Column [E] does not exist in table. 
```

而且我 110% 确定该列存在并且电子表格密钥正常。;)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-28T03:26:44.130

如果您正在使用`Query`直接引用单元格矩形的函数，则使用大写字母来引用列。但是，如果您使用`Query`的是数组公式的输出，例如从 的返回`ImportRange`，那么您需要使用`Col1`, `Col2`, ... 来引用列。因此，您的示例查询字符串需要阅读：

```
"select Col2 where Col5 contains 'Warszawa'" 
```

工作示例：

```
=Query(ImportRange("0AtEH2Kw9zfIodEQ2dFNFam9sdEFEZlVnNEV3ZEZMZEE", "data!A:G"), "select Col3, count(Col4) group by Col3 order by count(Col4) desc label count(Col4) 'count'") 
```

我不知道为什么它不只是让您使用标题行中的名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-25T10:02:18.537

或者，您可以在这种情况下尝试该`FILTER`功能，然后您就不需要为 SQL 操心了。:)

`=FILTER(ImportRange("0ArsOaWajjzv9dEdGTUZCWFc1NnFva05uWkxETVF6Q0E"; "Kuchnia polska!B3:B40"); ImportRange("0ArsOaWajjzv9dEdGTUZCWFc1NnFva05uWkxETVF6Q0E"; "Kuchnia polska!e3:e40")="Warszava")`

虽然我承认它不是那么漂亮，因为这两个`importRange`功能。

无论如何希望它有所帮助。

# java - 使用文件中的随机记录作为preparedstatement

> ID：11650333
> 
> 赞同：0
> 
> 时间：2012-07-25T13:02:04.040
> 
> 标签：java

我正在使用 Swingbench 进行一些负载测试。我只需要创建一个运行类似的案例

```
SELECT COL1 FROM TABLE WHERE COL2 = ? 
```

COL2 的值是文件中包含的数字，就像客户编号一样，不是序列。在 Swingbench 和演示中寻找可用的类，我发现无论在哪里 Swingbench 读取带有（例如）productids 的文件，它都会使用单个产品 id 来计算文件的最小值和最大值之间的随机值。就我而言，这不适用。

如何在 Java 中解决这个问题？

# actionscript-3 - 在 ActionScript 中动态更改浏览器标题

> ID：11650335
> 
> 赞同：1
> 
> 时间：2012-07-25T13:02:09.297
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4.5

我通过`Application.pageTitle`属性设置了浏览器的标题。有什么方法可以动态更改 Web 浏览器的标题或 as3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:12:30.237

您可以从 AS3 调用 Javascript 函数来更改标题

```
//AS3
ExternalInterface.call("changeTitle","title you want");

//javascript
function changeTitle(newTitle){
    document.title = newTitle;
} 
```

# c# - 找到垂直线及其与矩形的交点

> ID：11650339
> 
> 赞同：2
> 
> 时间：2012-07-25T13:02:17.903
> 
> 标签：c#, math

我有三个点 A、B 和 C 和一个矩形，如下所示。我想知道来自 A 的射线与矩形相交的 x,y 坐标，因为它也必须垂直于来自 BC 的线。我知道如何在 BC 上找到光线将拦截的点，但我似乎无法弄清楚如何从那里延伸以找到它将拦截矩形的点。插图：

![在此处输入图像描述](../Images/9313376405126557f8550288bceb1d1c.png)

这是我用来查找 BC 拦截的代码。

```
double k = ((By - Cy) * (Ax - Cx) - (Bx - Cx) * (Ay - Cy)) / ((By - Cy) * (By - Cy) + (Bx - Cx) * (Bx - Cx));
double Dx = Ax - k * (By - Cy);
double Dy = Ay + k * (Bx - Cx); 
```

如何扩展 Dx 和 Dy 以截取矩形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:16:32.260

首先弄清楚如何找到两条线的交点（注意平行情况）。

那么如何找到与一条线的交点或射线，如果有的话。

那么如何找到一条射线与*线段*的交点，如果有的话。

然后将其应用于来自 A 的射线和四个侧面中的每一个，就完成了。

提示：您可以将线或射线表示为矢量和点。这样您就可以定义来自 A 的射线，而不必担心与 BC 线的交点（可能不在 B 和 C 之间）。

# java - 我如何在 jsp 页面中使用 servlet？

> ID：11650343
> 
> 赞同：0
> 
> 时间：2012-07-25T13:02:27.657
> 
> 标签：java, jsp, servlets

```
<body>
  <form action="testServlet.java">
  <TABLE border="0" align="center">
    <TR height="40">
      <TD width="40"><a href="Hoda/testServlet?direction=b"><img
        src=<%=request.getAttribute("imgSrc")%> width="40" height="40" /></a>
      </TD>
  </form>
</body> 
```

伺服器：

```
@WebServlet("/testServlet")
public class testServlet extends HttpServlet {
   String imgSrc = "red.png";

   protected void service(HttpServletRequest reques,HttpServletResponse response) throws ServletException, IOException {

      String str = request.getParameter("direction");

      if (str.startsWith("b")) {
        imgSrc = "black.png";
      }

      request.setAttribute("imgSrc", imgSrc);
   }
} 
```

在我的 JSP 页面中，我创建了一个单元格，我想从 servlet 获取其图像源。我把链接标签向 servlet 询问 imgSrc，但它不起作用。请告诉我如何使用 servlet 更改 JSP 页面中的 imgSrc。我希望 JSP 只显示结果，而不是分派到另一个页面。这是我的代码：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:59:54.410

请参考这篇文章可能对你有帮助。

[http://ajax911.com/dynamically-display-images-java-servlet-tomcat/](http://ajax911.com/dynamically-display-images-java-servlet-tomcat/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:37:53.943

您必须使用 Servlet API 的 RequestDispatcher 将 Servlet 转发到 JSP，以便处理发生在同一个请求上，否则将不会设置该属性。您可能还可以使用一些自定义包含逻辑，但通常您会使用 servlet 作为“前端”，然后使用 JSP 呈现内容。希望这是有道理的，您应该能够在 Servlet JavaDoc 中跟踪 API。

# python - Python：将长度为 n 的列表拆分为一个表或更多列表，按类型，保留顺序

> ID：11650346
> 
> 赞同：3
> 
> 时间：2012-07-25T13:02:40.220
> 
> 标签：python, list

本质上，我有一个项目列表，每个项目都有不同的类型，例如

```
['a',1,'b',2,3,'c'] 
```

或者

```
[{"A":1},1,{"B":2},{"C":3},"a"] 
```

我想将它们分成两个单独的列表，保留原始顺序

```
[[ 'a', None,  'b', None, None,  'c'],
 [None,    1, None,    2,    3, None]] 
```

或者

```
[[{"A":1}, None, {"B":2},{"C":3}, None],
 [None,       1,    None,   None, None],
 [None,    None,    None,   None,  "a"]] 
```

是）我有的 ：

```
def TypeSplit(sources)
  Types = [dict(),str(),num()]
  return [[item for item in sources if type(item) == type(itype)] for itype in types] 
```

虽然这没有填写`None`。

我这样做的原因是我将获得一个包含不同类型信息的列表，并且需要用其他与原始列表相得益彰的值来充实它。

有一个更好的方法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:06:12.913

这是条件表达式的一个很好的用例。另外，我假设您希望以尽可能通用的方式执行此操作，因此我建议您动态生成列表，而不是使用固定的类型列表：

```
def type_split(sources):
    types = sorted(set(type(i) for i in sources))
    return [[item if type(item) == itype else None for item in sources] 
            for itype in types] 
```

如果您需要使用固定列表（并且您知道您的输入列表将不包含这些类型及其子类之外的任何内容），您可以这样做：

```
import collections
import numbers
def type_split(sources):
    types = [basestring, collections.Mapping, numbers.Number]
    return [[item if isinstance(item, itype) else None for item in sources] 
            for itype in types] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:18:04.520

我可能会在这里使用稍微不同的方法`defaultdict`：

```
from collections import defaultdict
def type_split(sources):
   d=defaultdict(lambda : [None]*len(sources))
   for i,src in enumerate(sources):
       d[type(src)][i] = src
   return d 
```

这将返回字典而不是列表，但更容易内省各种元素的类型...如果您真的想要列表列表，您可以随时查看`d.values()`（在 python2.x 中）或`list(d.values())`在 python 3 中。 X

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:20:22.627

```
>>> def type_split(seq, types): 
        return [[x if isinstance(x, t) else None for x in seq] for t in types]

>>> type_split(['a',1,'b',2,3,'c'], (str, int))
[['a', None, 'b', None, None, 'c'], [None, 1, None, 2, 3, None]]
>>> type_split([{"A":1},1,{"B":2},{"C":3},"a"], (dict, int, str))
[[{'A': 1}, None, {'B': 2}, {'C': 3}, None], [None, 1, None, None, None], [None, None, None, None, 'a']] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T14:04:04.710

@mgilson 对解决方案的改编，将类型的原始顺序保留为有序键。

```
>>> from collections import OrderedDict
>>> def type_split(seq):
        d = OrderedDict()
        for i, x in enumerate(seq):
            d.setdefault(type(x), [None] * len(seq))[i] = x
        return d.values()

>>> type_split(['a',1,'b',2,3,'c'])
[['a', None, 'b', None, None, 'c'], [None, 1, None, 2, 3, None]]
>>> type_split([{"A":1},1,{"B":2},{"C":3},"a"])
[[{'A': 1}, None, {'B': 2}, {'C': 3}, None], [None, 1, None, None, None], [None, None, None, None, 'a']] 
```

# jquery - if 语句检查 div hasClass

> ID：11650348
> 
> 赞同：0
> 
> 时间：2012-07-25T13:02:50.047
> 
> 标签：jquery

嗨，我想编写 if 语句来检查 div 是否没有 hasClass，如果没有，脚本应该使用 toggleClass 添加它（我正在使用 jquery ui），我在上面写的脚本几乎可以正常工作，但第一个（这个）应该指向没有“min”类的（.apla），第二个（this）应该指向（.apla）并单击（.arrow）

这一点是检查是否有任何（.apla）打开，如果有任何（.apla）打开，脚本应该使用toggleClass（带动画）关闭它，并且在这个脚本应该打开点击（.apla）之后也使用toggleClass，可以请帮帮我

小提琴 - [http://jsfiddle.net/eNqew/](http://jsfiddle.net/eNqew/)

JS

```
$('.arrow').click(function(){
    if (!$(".apla").hasClass("min")) {
    $(this).toggleClass("min", "slow");
    } else {
    $(this).parent().parent().toggleClass("min", "slow");
    }
}); 
```

UPDATE JS 几乎可以工作

```
$('.arrow').click(function(){
        if (!$("#apla01").hasClass("min")) {
            $("#apla01").toggleClass("min", "slow");
        }
        if (!$("#apla02").hasClass("min")) {
            $("#apla02").toggleClass("min", "slow");
        }
        if (!$("#apla03").hasClass("min")) {
            $("#apla03").toggleClass("min", "slow");
        }
        else {
            $(this).parent().parent().toggleClass("min", "slow");
        }
    }); 
```

HTML

```
<div id="apla01" class="apla min">
    <div class="apla-wraper">
        <div class="arrow"></div>
    </div>      
</div>
<div id="apla02" class="apla min">
    <div class="apla-wraper">
        <div class="arrow"></div>
    </div>      
</div>
<div id="apla03" class="apla min">
    <div class="apla-wraper">
        <div class="arrow"></div>
    </div>      
</div> 
```

CSS

```
#apla01.apla.min {
    z-index: 5;
    left: -800px;
}
#apla02.apla.min {
    z-index: 4;
    left: -760px;
}
#apla03.apla.min  {
    z-index: 3;
    left: -720px;
}
.apla {
    width: 838px;
    height: 634px;
    position: absolute;
    top: 20px;
    left: 0;
    background: url(../img/bgApla.png) no-repeat -5px center;
}
.apla.min {
}
.apla-wraper {
    position: relative;
    width: 100%;
    height: 100%;
}
.arrow {
    width: 28px;
    height: 28px;
    background: url(../img/arrow.png) no-repeat 0 0;
    position: absolute;
    top: 50%;
    right: -10px;
    margin-top: -14px;
    cursor: pointer;
}
.apla.min  .arrow{
    background: url(../img/arrow.png) no-repeat -28px 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:39:01.267

试试这个 ：

```
$('.arrow').click(function(){
    var $currentApla = $(this).parent().parent()
    $('.apla:not(.min)').not('#'+$currentApla.attr('id')).toggleClass("min", "slow");
    $currentApla.toggleClass("min", "slow")
}); 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:43:27.827

这检查父 .alpa 类：

```
 $('.arrow').click(function(){
         $('.apla').not('.min').not($(this)).toggleClass("min", "slow");
         $(this).closest(".apla").toggleClass("min", "slow");
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:05:26.413

你会在`.is()`它返回 true 或 false 时

```
 $('.arrow').click(function(){
     if (!$(".apla").is(".min")) {
     $(this).toggleClass("min", "slow");
     } else {
     $(this).parent().parent().toggleClass("min", "slow");
     }
 }); 
```

# java - 让文本到语音活动与 onclick 一起工作去一个新的 xml

> ID：11650353
> 
> 赞同：1
> 
> 时间：2012-07-25T13:03:16.707
> 
> 标签：java, android, android-activity

我正在开发一个应用程序，我希望该应用程序使用文本到语音来告诉用户他们刚刚按下了哪个按钮。我无法让我的按钮在两个相互冲突的活动中正常工作。我可以让它工作，要么只做文本到语音，要么只在按下它时进入不同的页面，但我不能让它同时做这两个。目前它将用户发送到新菜单而不播放文本到语音，但我终于从我的 LogCat 中得到一个错误，所以我认为它是可以修复的。我已经包含了我的 LogCat 和 java。我已经在问题代码所在的上方和下方评论了。

```
07-25 12:52:35.031: E/ActivityThread(328): Activity com.example.com.proto1.menu has leaked ServiceConnection android.speech.tts.TextToSpeech$1@4051eb10 that was originally bound here
07-25 12:52:35.031: E/ActivityThread(328): android.app.ServiceConnectionLeaked: Activity com.example.com.proto1.menu has leaked ServiceConnection android.speech.tts.TextToSpeech$1@4051eb10 that was originally bound here
07-25 12:52:35.031: E/ActivityThread(328):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:938)
07-25 12:52:35.031: E/ActivityThread(328):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:833)
07-25 12:52:35.031: E/ActivityThread(328):  at android.app.ContextImpl.bindService(ContextImpl.java:867)
07-25 12:52:35.031: E/ActivityThread(328):  at android.content.ContextWrapper.bindService(ContextWrapper.java:347)
07-25 12:52:35.031: E/ActivityThread(328):  at android.speech.tts.TextToSpeech.initTts(TextToSpeech.java:467)
07-25 12:52:35.031: E/ActivityThread(328):  at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:433)
07-25 12:52:35.031: E/ActivityThread(328):  at com.example.com.proto1.menu.onActivityResult(menu.java:122)
07-25 12:52:35.031: E/ActivityThread(328):  at android.app.Activity.dispatchActivityResult(Activity.java:3908)
07-25 12:52:35.031: E/ActivityThread(328):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
07-25 12:52:35.031: E/ActivityThread(328):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
07-25 12:52:35.031: E/ActivityThread(328):  at android.app.ActivityThread.access$2000(ActivityThread.java:117)
07-25 12:52:35.031: E/ActivityThread(328):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
07-25 12:52:35.031: E/ActivityThread(328):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 12:52:35.031: E/ActivityThread(328):  at android.os.Looper.loop(Looper.java:123)
07-25 12:52:35.031: E/ActivityThread(328):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-25 12:52:35.031: E/ActivityThread(328):  at java.lang.reflect.Method.invokeNative(Native Method)
07-25 12:52:35.031: E/ActivityThread(328):  at java.lang.reflect.Method.invoke(Method.java:507)
07-25 12:52:35.031: E/ActivityThread(328):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-25 12:52:35.031: E/ActivityThread(328):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-25 12:52:35.031: E/ActivityThread(328):  at dalvik.system.NativeStart.main(Native Method) 
```

**菜单.java**

```
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.speech.RecognizerIntent;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;
import android.speech.tts.TextToSpeech;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

@SuppressWarnings("unused")
public class menu extends Activity implements TextToSpeech.OnInitListener,
        OnClickListener {

    TextToSpeech mTts;
    Button speakButton;

    // TTS object
    public TextToSpeech myTTS;
    // status check code
    public int MY_DATA_CHECK_CODE = 0;

    @Override
    protected void onCreate(Bundle aboutmenu) {
        // TODO Auto-generated method stub
        super.onCreate(aboutmenu);
        setContentView(R.layout.mainx);

        SpeakingAndroid speak = new SpeakingAndroid();

        // get a reference to the button element listed in the XML layout
        speakButton = (Button) findViewById(R.id.btn_speak);
        // listen for clicks
        speakButton.setOnClickListener(this);

        // check for TTS data
        Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);

        // Setting up the button references
        Button info = (Button) findViewById(R.id.aboutbutton);
        Button voice = (Button) findViewById(R.id.voicebutton);

        info.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("android.intent.action.INFOSCREEN"));

            }
        });

        voice.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {

                } catch (Exception e) {

                }
            }
        });
// This is the start of the problem area
        starteyephone();
        {
            speakButton.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent voiceIntent = new Intent(
                            "android.intent.action.RECOGNITIONMENU");
                    startActivity(voiceIntent);

                }
            });
        }

    }

    private void starteyephone() {
        // TODO Auto-generated method stub

    }
    // respond to button clicks
    public void onClick(View v) {

        // get the text entered
        speakButton = (Button) findViewById(R.id.btn_speak);
        String words = speakButton.getText().toString();
        speakWords(words);
    }

    //this is the end of the problem area

    // speak the user text
    public void speakWords(String speech) {

        // speak straight away
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
    }

    // act on result of TTS data check
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // the user has the necessary data - create the TTS
                myTTS = new TextToSpeech(this, this);
            } else {
                // no data - install it now
                Intent installTTSIntent = new Intent();
                installTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
            }
        }
    }

    // setup TTS
    public void onInit(int initStatus) {

        // check for successful instantiation
        if (initStatus == TextToSpeech.SUCCESS) {
            if (myTTS.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
                myTTS.setLanguage(Locale.US);
        } else if (initStatus == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:51:56.807

我在这里看到了一些问题：

1.  `TextToSpeech`您使用菜单活动的上下文进行初始化。这意味着当菜单活动被破坏时，`TextToSpeech`实例将被泄漏，因为它永远不会正确关闭（这可能是您在 logcat 中看到该错误的原因）。`myTTS.shutdown()`您需要在此处初始化时调用`menu.onDestroy()`或需要作为上下文参数传递：`getApplicationContext()``TextToSpeech`

    myTTS = new TextToSpeech(getApplicationContext(), this);

    注意：如果您使用应用程序上下文，则需要确定何时不再需要 TTS 并`shutdown()`在那时调用它。

2.  您正在使用`android.intent.action.RECOGNITIONMENU`，但此 Intent 用于语音识别（即：语音到文本），而不是文本到语音。我不明白你想在这里做什么。

3.  我仍然不明白你的确切问题。在我看来，您发布的代码应该说出按钮的文本。您还期望在这里发生什么？

**编辑：添加观察**

我现在看到您正在调用`setOnClickListener()`两次`speakButton`。一次在开头，`onCreate()`然后在您的“问题部分”中再次出现。不能设置多个 onClickListener，所以第一个会被覆盖。你应该只移动这段代码：

```
Intent voiceIntent = new Intent("android.intent.action.RECOGNITIONMENU");
startActivity(voiceIntent); 
```

到您现有的`onClick()`方法中。

# javascript - 为 javascript 准备正则表达式

> ID：11650354
> 
> 赞同：1
> 
> 时间：2012-07-25T13:03:29.217
> 
> 标签：javascript, regex

我制作了这个正则表达式，当我在 RegExr 中测试它时，它完全符合我的要求：

```
^https?:\/\/(www\.)?(test\.yahoo\.com|sub\.yahoo\.com)?(?!([a-z0-9]+\.)?(localhost|yahoo\.com))(.*)? 
```

但是，当我在 javascript 中对其进行测试时，它说表达式无效。经过数小时的调试，我发现这个表达式在 javascript 中有效：

```
^https?:\/\/(www\.)?(test\.yahoo\.com|sub\.yahoo\.com)?(?![a-z0-9]+\.)?(localhost|yahoo\.com)(.*)? 
```

但是，这并不能满足我的要求（再次在 RegExr 中进行测试）。

为什么我不能在 javascript 中使用第一个表达式？我该如何解决？

**7月25日更新**

抱歉信息不足。我使用正则表达式的方式是通过一个 jQuery 扩展，它让我可以使用正则表达式进行选择。该脚本可以在这里看到：http: [//james.padolsey.com/javascript/regex-selector-for-jquery/](http://james.padolsey.com/javascript/regex-selector-for-jquery/)

我试图开始工作的具体代码是：

```
$('a:regex(href, ^https?:\/\/(www\.)?(test\.yahoo\.com|sub\.yahoo\.com)?(?!([a-z0-9]+\.)?(localhost|yahoo\.com))(.*)?)').live('click', function(e) { 
```

在包含链接的 jQuery 插件之后。我正在测试的文本字符串是：

*   [http://yahoo.com](http://yahoo.com)
*   [http://google.dk](http://google.dk)
*   [http://subdomain.yahoo.com](http://subdomain.yahoo.com)
*   [http://test.yahoo.com](http://test.yahoo.com)
*   [http://localhost.dk](http://localhost.dk)
*   [http://sub.yahoo.com/lalala](http://sub.yahoo.com/lalala)

它应该匹配“http://google.dk”、“http://test.yahoo.com”和“http://sub.yahoo.com/lalala”的地方——它在使用 RegExr 但失败时会匹配（无效表达式）使用 jQuery 插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:06:13.630

第一个正则表达式不是无效的：

```
var regexp = /^https?:\/\/(www\.)?(test\.yahoo\.com|sub\.yahoo\.com)?(?!([a-z0-9]+\.)?(localhost|yahoo\.com))(.*)?/; 
```

工作正常。

如果要从字符串实例化表达式，则必须将所有反斜杠加倍：

```
var regexp = new RegExp("^https?:\\/\\/(www\\.)?(test\\.yahoo\\.com|sub\\.yahoo\\.com)?(?!([a-z0-9]+\\.)?(localhost|yahoo\\.com))(.*)?"); 
```

当您从字符串开始时，您必须考虑到字符串常量本身使用反斜杠作为引用机制的事实，因此将进行**两种**评估：一种作为字符串，另一种作为正则表达式。

*编辑*-好的，我想我看到了问题。考虑到 Sizzle 解析选择器的方式，您尝试使用的那个插件只是试图做一些不起作用的事情。换句话说，问题不在于您的正则表达式，而在于整体选择器。它甚至还不足以解析正则表达式。

具体来说，它似乎是正则表达式中的嵌套括号。像这样简单的东西

```
$('a:regex(href, ((abc)))') 
```

导致错误。您可以改为执行以下操作：

```
$('a').filter(function() {
  return /^https?:\/\/(www\.)?(test\.yahoo\.com|sub\.yahoo\.com)?(?!([a-z0-9]+\.)?(localhost|yahoo\.com))(.*)?/.test(this.href);
}).whatever( ... ); 
```

# hibernate - 如何为命名查询设置参数

> ID：11650361
> 
> 赞同：2
> 
> 时间：2012-07-25T13:03:52.150
> 
> 标签：hibernate, jpa

嗨，我有一个命名查询

```
@NamedQuery(name = "StudyplanCategory.findByStatusAndLimit",
            query = "SELECT s FROM StudyplanCategory s WHERE 
            s.status =:status LIMIT s.start=:start,s.end=end") 
```

我想像这样设置限制：

```
@NamedQuery(name = "StudyplanCategory.findByStatusAndLimit", 
            query = "SELECT s FROM StudyplanCategory s WHERE 
            s.status =:status LIMIT s.start=:start,s.end=end") 
```

但这在服务器启动时显示错误。我正在使用以下代码在 DAO 类中调用查询：

```
Query query = entityManager.createNamedQuery("StudyplanCategory.findByStatusAndLimit");
int end=(start*pageNumber);
query.setParameter("status", status);
query.setParameter("start", start);
query.setParameter("end", end);
return (List<StudyplanCategory>) query.getResultList(); 
```

需要设置开始和结束参数。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T13:17:55.013

正如@DataNucleus 所说， LIMIT 不是 JPQL 中的有效关键字。这不是指定要返回多少行的方法。这就是你的做法：

```
@NamedQuery(name = "StudyplanCategory.findByStatusAndLimit", 
        query = "SELECT s FROM StudyplanCategory s WHERE 
                    s.status =:status") 
```

这将是调用命名查询的代码：

```
Query query = entityManager.createNamedQuery("StudyplanCategory.findByStatusAndLimit");
int end=(start*pageNumber);
query.setParameter("status", status);
query.setFirstResult(start);
query.setMaxResults(end - start);
return (List<StudyplanCategory>) query.getResultList(); 
```

# c# - DateTime 支持的格式化语言？

> ID：11650362
> 
> 赞同：2
> 
> 时间：2012-07-25T13:04:00.840
> 
> 标签：c#, .net, .net-4.0, globalization, culture

DateTime 让您根据当前的文化进行格式化。默认支持的文化是什么？

如果文化设置为美国英语，我想到的场景`this.Date.Value.ToString("MMMM")`将打印“January”，但如果文化是法语，则打印“Janvier”。此格式文档可以在[MSDN 网站](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.monthnames.aspx)上找到，但没有给出可以翻译的文化范围。

我想知道支持哪些语言，如果不支持，我有什么选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:17:39.460

```
Afrikaans( afr-af )
Afrikaans (South Africa)( afr-af )
Albanian( sqi-sq )
Albanian (Albania)( sqi-sq )
Alsatian( gsw-gsw )
Alsatian (France)( gsw-gsw )
Amharic( amh-am )
Amharic (Ethiopia)( amh-am )
Arabic( ara-ar )
Arabic (Algeria)( ara-ar )
Arabic (Bahrain)( ara-ar )
Arabic (Egypt)( ara-ar )
Arabic (Iraq)( ara-ar )
Arabic (Jordan)( ara-ar )
Arabic (Kuwait)( ara-ar )
Arabic (Lebanon)( ara-ar )
Arabic (Libya)( ara-ar )
Arabic (Morocco)( ara-ar )
Arabic (Oman)( ara-ar )
Arabic (Qatar)( ara-ar )
Arabic (Saudi Arabia)( ara-ar )
Arabic (Syria)( ara-ar )
Arabic (Tunisia)( ara-ar )
Arabic (U.A.E.)( ara-ar )
Arabic (Yemen)( ara-ar )
Armenian( hye-hy )
Armenian (Armenia)( hye-hy )
Assamese( asm-as )
Assamese (India)( asm-as )
Azeri( aze-az )
Azeri (Cyrillic)( aze-az )
Azeri (Cyrillic, Azerbaijan)( aze-az )
Azeri (Latin)( aze-az )
Azeri (Latin, Azerbaijan)( aze-az )
Bashkir( bak-ba )
Bashkir (Russia)( bak-ba )
Basque( eus-eu )
Basque (Basque)( eus-eu )
Belarusian( bel-be )
Belarusian (Belarus)( bel-be )
Bengali( bng-bn )
Bengali (Bangladesh)( bng-bn )
Bengali (India)( bng-bn )
Bosnian( bsb-bs )
Bosnian (Cyrillic)( bsc-bs )
Bosnian (Cyrillic, Bosnia and Herzegovina)( bsc-bs )
Bosnian (Latin)( bsb-bs )
Bosnian (Latin, Bosnia and Herzegovina)( bsb-bs )
Breton( bre-br )
Breton (France)( bre-br )
Bulgarian( bul-bg )
Bulgarian (Bulgaria)( bul-bg )
Catalan( cat-ca )
Catalan (Catalan)( cat-ca )
Chinese( zho-zh )
Chinese (Simplified)( zho-zh )
Chinese (Simplified) Legacy( zho-zh )
Chinese (Simplified, PRC)( zho-zh )
Chinese (Simplified, Singapore)( zho-zh )
Chinese (Traditional)( zho-zh )
Chinese (Traditional) Legacy( zho-zh )
Chinese (Traditional, Hong Kong S.A.R.)( zho-zh )
Chinese (Traditional, Macao S.A.R.)( zho-zh )
Chinese (Traditional, Taiwan)( zho-zh )
Corsican( cos-co )
Corsican (France)( cos-co )
Croatian( hrv-hr )
Croatian (Croatia)( hrv-hr )
Croatian (Latin, Bosnia and Herzegovina)( hrb-hr )
Czech( ces-cs )
Czech (Czech Republic)( ces-cs )
Danish( dan-da )
Danish (Denmark)( dan-da )
Dari( prs-prs )
Dari (Afghanistan)( prs-prs )
Divehi( div-dv )
Divehi (Maldives)( div-dv )
Dutch( nld-nl )
Dutch (Belgium)( nld-nl )
Dutch (Netherlands)( nld-nl )
English( eng-en )
English (Australia)( eng-en )
English (Belize)( eng-en )
English (Canada)( eng-en )
English (Caribbean)( eng-en )
English (India)( eng-en )
English (Ireland)( eng-en )
English (Jamaica)( eng-en )
English (Malaysia)( eng-en )
English (New Zealand)( eng-en )
English (Republic of the Philippines)( eng-en )
English (Singapore)( eng-en )
English (South Africa)( eng-en )
English (Trinidad and Tobago)( eng-en )
English (United Kingdom)( eng-en )
English (United States)( eng-en )
English (Zimbabwe)( eng-en )
Estonian( est-et )
Estonian (Estonia)( est-et )
Faroese( fao-fo )
Faroese (Faroe Islands)( fao-fo )
Filipino( fil-fil )
Filipino (Philippines)( fil-fil )
Finnish( fin-fi )
Finnish (Finland)( fin-fi )
French( fra-fr )
French (Belgium)( fra-fr )
French (Canada)( fra-fr )
French (France)( fra-fr )
French (Luxembourg)( fra-fr )
French (Monaco)( fra-fr )
French (Switzerland)( fra-fr )
Frisian( fry-fy )
Frisian (Netherlands)( fry-fy )
Galician( glg-gl )
Galician (Galician)( glg-gl )
Georgian( kat-ka )
Georgian (Georgia)( kat-ka )
German( deu-de )
German (Austria)( deu-de )
German (Germany)( deu-de )
German (Liechtenstein)( deu-de )
German (Luxembourg)( deu-de )
German (Switzerland)( deu-de )
Greek( ell-el )
Greek (Greece)( ell-el )
Greenlandic( kal-kl )
Greenlandic (Greenland)( kal-kl )
Gujarati( guj-gu )
Gujarati (India)( guj-gu )
Hausa( hau-ha )
Hausa (Latin)( hau-ha )
Hausa (Latin, Nigeria)( hau-ha )
Hebrew( heb-he )
Hebrew (Israel)( heb-he )
Hindi( hin-hi )
Hindi (India)( hin-hi )
Hungarian( hun-hu )
Hungarian (Hungary)( hun-hu )
Icelandic( isl-is )
Icelandic (Iceland)( isl-is )
Igbo( ibo-ig )
Igbo (Nigeria)( ibo-ig )
Indonesian( ind-id )
Indonesian (Indonesia)( ind-id )
Inuktitut( iku-iu )
Inuktitut (Latin)( iku-iu )
Inuktitut (Latin, Canada)( iku-iu )
Inuktitut (Syllabics)( iku-iu )
Inuktitut (Syllabics, Canada)( iku-iu )
Invariant Language (Invariant Country)( ivl-iv )
Irish( gle-ga )
Irish (Ireland)( gle-ga )
isiXhosa( xho-xh )
isiXhosa (South Africa)( xho-xh )
isiZulu( zul-zu )
isiZulu (South Africa)( zul-zu )
Italian( ita-it )
Italian (Italy)( ita-it )
Italian (Switzerland)( ita-it )
Japanese( jpn-ja )
Japanese (Japan)( jpn-ja )
Kannada( kan-kn )
Kannada (India)( kan-kn )
Kazakh( kaz-kk )
Kazakh (Kazakhstan)( kaz-kk )
Khmer( khm-km )
Khmer (Cambodia)( khm-km )
K'iche( qut-qut )
K'iche (Guatemala)( qut-qut )
Kinyarwanda( kin-rw )
Kinyarwanda (Rwanda)( kin-rw )
Kiswahili( swa-sw )
Kiswahili (Kenya)( swa-sw )
Konkani( kok-kok )
Konkani (India)( kok-kok )
Korean( kor-ko )
Korean (Korea)( kor-ko )
Kyrgyz( kir-ky )
Kyrgyz (Kyrgyzstan)( kir-ky )
Lao( lao-lo )
Lao (Lao P.D.R.)( lao-lo )
Latvian( lav-lv )
Latvian (Latvia)( lav-lv )
Lithuanian( lit-lt )
Lithuanian (Lithuania)( lit-lt )
Lower Sorbian( dsb-dsb )
Lower Sorbian (Germany)( dsb-dsb )
Luxembourgish( ltz-lb )
Luxembourgish (Luxembourg)( ltz-lb )
Macedonian (Former Yugoslav Republic of Macedonia)( mkd-mk )
Macedonian (FYROM)( mkd-mk )
Malay( msa-ms )
Malay (Brunei Darussalam)( msa-ms )
Malay (Malaysia)( msa-ms )
Malayalam( mym-ml )
Malayalam (India)( mym-ml )
Maltese( mlt-mt )
Maltese (Malta)( mlt-mt )
Maori( mri-mi )
Maori (New Zealand)( mri-mi )
Mapudungun( arn-arn )
Mapudungun (Chile)( arn-arn )
Marathi( mar-mr )
Marathi (India)( mar-mr )
Mohawk( moh-moh )
Mohawk (Mohawk)( moh-moh )
Mongolian( mon-mn )
Mongolian (Cyrillic)( mon-mn )
Mongolian (Cyrillic, Mongolia)( mon-mn )
Mongolian (Traditional Mongolian)( mon-mn )
Mongolian (Traditional Mongolian, PRC)( mon-mn )
Nepali( nep-ne )
Nepali (Nepal)( nep-ne )
Norwegian( nob-nb )
Norwegian (Bokmål)( nob-nb )
Norwegian (Nynorsk)( nno-nn )
Norwegian, Bokmål (Norway)( nob-nb )
Norwegian, Nynorsk (Norway)( nno-nn )
Occitan( oci-oc )
Occitan (France)( oci-oc )
Oriya( ori-or )
Oriya (India)( ori-or )
Pashto( pus-ps )
Pashto (Afghanistan)( pus-ps )
Persian( fas-fa )
Persian( fas-fa )
Polish( pol-pl )
Polish (Poland)( pol-pl )
Portuguese( por-pt )
Portuguese (Brazil)( por-pt )
Portuguese (Portugal)( por-pt )
Punjabi( pan-pa )
Punjabi (India)( pan-pa )
Quechua( qub-quz )
Quechua (Bolivia)( qub-quz )
Quechua (Ecuador)( que-quz )
Quechua (Peru)( qup-quz )
Romanian( ron-ro )
Romanian (Romania)( ron-ro )
Romansh( roh-rm )
Romansh (Switzerland)( roh-rm )
Russian( rus-ru )
Russian (Russia)( rus-ru )
Sami (Inari)( smn-smn )
Sami (Lule)( smk-smj )
Sami (Northern)( sme-se )
Sami (Skolt)( sms-sms )
Sami (Southern)( smb-sma )
Sami, Inari (Finland)( smn-smn )
Sami, Lule (Norway)( smj-smj )
Sami, Lule (Sweden)( smk-smj )
Sami, Northern (Finland)( smg-se )
Sami, Northern (Norway)( sme-se )
Sami, Northern (Sweden)( smf-se )
Sami, Skolt (Finland)( sms-sms )
Sami, Southern (Norway)( sma-sma )
Sami, Southern (Sweden)( smb-sma )
Sanskrit( san-sa )
Sanskrit (India)( san-sa )
Scottish Gaelic( gla-gd )
Scottish Gaelic (United Kingdom)( gla-gd )
Serbian( srp-sr )
Serbian (Cyrillic)( srp-sr )
Serbian (Cyrillic, Bosnia and Herzegovina)( srn-sr )
Serbian (Cyrillic, Montenegro)( srp-sr )
Serbian (Cyrillic, Serbia and Montenegro (Former))( srp-sr )
Serbian (Cyrillic, Serbia)( srp-sr )
Serbian (Latin)( srp-sr )
Serbian (Latin, Bosnia and Herzegovina)( srs-sr )
Serbian (Latin, Montenegro)( srp-sr )
Serbian (Latin, Serbia and Montenegro (Former))( srp-sr )
Serbian (Latin, Serbia)( srp-sr )
Sesotho sa Leboa( nso-nso )
Sesotho sa Leboa (South Africa)( nso-nso )
Setswana( tsn-tn )
Setswana (South Africa)( tsn-tn )
Sinhala( sin-si )
Sinhala (Sri Lanka)( sin-si )
Slovak( slk-sk )
Slovak (Slovakia)( slk-sk )
Slovenian( slv-sl )
Slovenian (Slovenia)( slv-sl )
Spanish( spa-es )
Spanish (Argentina)( spa-es )
Spanish (Bolivarian Republic of Venezuela)( spa-es )
Spanish (Bolivia)( spa-es )
Spanish (Chile)( spa-es )
Spanish (Colombia)( spa-es )
Spanish (Costa Rica)( spa-es )
Spanish (Dominican Republic)( spa-es )
Spanish (Ecuador)( spa-es )
Spanish (El Salvador)( spa-es )
Spanish (Guatemala)( spa-es )
Spanish (Honduras)( spa-es )
Spanish (Mexico)( spa-es )
Spanish (Nicaragua)( spa-es )
Spanish (Panama)( spa-es )
Spanish (Paraguay)( spa-es )
Spanish (Peru)( spa-es )
Spanish (Puerto Rico)( spa-es )
Spanish (Spain)( spa-es )
Spanish (United States)( spa-es )
Spanish (Uruguay)( spa-es )
Swedish( swe-sv )
Swedish (Finland)( swe-sv )
Swedish (Sweden)( swe-sv )
Syriac( syr-syr )
Syriac (Syria)( syr-syr )
Tajik( tgk-tg )
Tajik (Cyrillic)( tgk-tg )
Tajik (Cyrillic, Tajikistan)( tgk-tg )
Tamazight( tzm-tzm )
Tamazight (Latin)( tzm-tzm )
Tamazight (Latin, Algeria)( tzm-tzm )
Tamil( tam-ta )
Tamil (India)( tam-ta )
Tatar( tat-tt )
Tatar (Russia)( tat-tt )
Telugu( tel-te )
Telugu (India)( tel-te )
Thai( tha-th )
Thai (Thailand)( tha-th )
Tibetan( bod-bo )
Tibetan (PRC)( bod-bo )
Turkish( tur-tr )
Turkish (Turkey)( tur-tr )
Turkmen( tuk-tk )
Turkmen (Turkmenistan)( tuk-tk )
Ukrainian( ukr-uk )
Ukrainian (Ukraine)( ukr-uk )
Upper Sorbian( hsb-hsb )
Upper Sorbian (Germany)( hsb-hsb )
Urdu( urd-ur )
Urdu (Islamic Republic of Pakistan)( urd-ur )
Uyghur( uig-ug )
Uyghur (PRC)( uig-ug )
Uzbek( uzb-uz )
Uzbek (Cyrillic)( uzb-uz )
Uzbek (Cyrillic, Uzbekistan)( uzb-uz )
Uzbek (Latin)( uzb-uz )
Uzbek (Latin, Uzbekistan)( uzb-uz )
Vietnamese( vie-vi )
Vietnamese (Vietnam)( vie-vi )
Welsh( cym-cy )
Welsh (United Kingdom)( cym-cy )
Wolof( wol-wo )
Wolof (Senegal)( wol-wo )
Yakut( sah-sah )
Yakut (Russia)( sah-sah )
Yi( iii-ii )
Yi (PRC)( iii-ii )
Yoruba( yor-yo )
Yoruba (Nigeria)( yor-yo ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:16:08.677

您可以使用[`CultureInfo.GetCultures`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx)来获取所有支持的文化。

```
CultureInfo[] cultures = CultureInfo.GetCultures(CultureTypes.AllCultures & ~CultureTypes.NeutralCultures);
string allTranslatedJanuaries = 
    string.Join(Environment.NewLine, cultures.Select(c =>
        String.Format("{0}: {1}", c.EnglishName, c.DateTimeFormat.GetMonthName(1)))); 
```

这是一个演示：http: [//ideone.com/9CUjK](http://ideone.com/9CUjK)

在我的服务器上安装了 352 个文化，在 ideone 上只有 112 个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:08:18.800

我会想象操作系统支持的所有语言（考虑到信息的来源）。

[这是OS 支持](http://msdn.microsoft.com/en-us/goglobal/bb896001.aspx)的所有默认语言的列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T16:25:06.427

支持的文化集将是已安装在盒子上的[自定义文化](http://msdn.microsoft.com/en-us/library/ms172469.aspx)集加上预定义的文化集（对于 .Net 3.5 及更低版本或 Vista 及更低版本，这是一个固定集，但对于 .Net 4 及更高版本Win7 及更高版本，这是运行它的操作系统的预定义文化）。

如果不支持某种语言，您可以创建自定义文化。这确实需要管理员权限才能安装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T13:13:28.840

你可以像这样改变你的文化：

将 CurrentThread.CurrentCulture 设置为新的文化，例如设置为法语：

```
System.Globalization.CultureInfo ci = new System.Globalization.CultureInfo("fr-FR");
System.Threading.Thread.CurrentThread.CurrentCulture = ci; 
```

在您的日期格式之后，月份名称将是法语。

您可以从这些[文化中进行选择](http://www.csharp-examples.net/culture-names/)

# xpath - 用于在多个帧中匹配 XPath 的工具（类似于例如 Firepath）

> ID：11650364
> 
> 赞同：1
> 
> 时间：2012-07-25T13:04:02.900
> 
> 标签：xpath, firebug, frames

我目前使用 Firepath 来测试我的 XPath。Firepath 仅从当前聚焦的帧中提供匹配。是否有类似的工具可以为我提供页面上所有框架中的所有匹配项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:12:06.890

您可以右键单击框架并选择“在新窗口中打开”（或选项卡）。在那里，您将能够测试您的 xpath。现在我明白了你想要做什么......匹配所有框架内的所有元素。我不这么认为。试试 Xpath 检查器，一个 firefox 插件。

# javascript - 将html标签和内容转换为字符串

> ID：11650367
> 
> 赞同：1
> 
> 时间：2012-07-25T13:04:13.897
> 
> 标签：javascript

我的问题是我需要从 event.content 的结果中创建一个字符串。Event.content 向我返回一个包含 html 标签的条目。我可以像 container.innerHTML = event.content 一样使用它。我需要 event.content 作为字符串。我试图做这样的事情：

```
var a = '' + event.content; 
```

但它不起作用。这里是 event.content 的结果：

```
<img src="http://image.weather.com/web/common/wxicons/31/30.gif?12122006" alt="" />Partly Cloudy, and 84 &deg; F. For more details? 
```

我无法将其转换为 javascript 中的字符串。是否可以？我也试过字符串（event.content）。好的，我把我的整个代码。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>  
<meta http-equiv="content-type" content="text/html;charset=ISO-8859-1">
<title>Hava Durumu</title>  

 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

  google.load("feeds", "1");
function havabas(){

   var feed = new google.feeds.Feed("http://rss.weather.com/weather/rss/local/TUXX0014? cm_ven=LWO&cm_cat=rss&par=LWO_rss");
  feed.load(function(result) {
    if (!result.error) {
        var entry = result.feed.entries[0];
        var container = document.getElementById("weather");
        var c = entry.content;

        var regex = /<img.*?src="(.*?)".*?>.*?([0-9]+\s*&deg;)/;
        var results = regex.exec(entry.content);
        var html = '<img src= ' + results[1] + ' alt="" /> ' + results[2];

      container.innerHTML = html;

    }
  });
}

function initialize() {
havabas();
setInterval(function(){havabas()},2000);
}
google.setOnLoadCallback(initialize);

</script>
</head>
<body>
<div id="weather"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:30:18.480

您的正则表达式无效。它与来自 的字符串不匹配`entry.content`。原因是`&deg;`。将您的代码更改为：

```
var regex = /<img.*?src="(.*?)".*?>.*?([0-9]+)/;
var results = regex.exec(entry.content);
var html = '<img src= ' + results[1] + ' alt="" /> ' + results[2] + ' &deg;'; 
```

[演示](http://jsbin.com/ebokah/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:12:34.703

可能您忘记使用反冲转义单引号或双引号？这是一个有效的字符串 -

```
var string="<img src=\"http://image.weather.com/web/common/wxicons/31/30.gif?12122006\"     alt=\"\" />Partly Cloudy, and 84 &deg; F. For more details?"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T13:31:09.430

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> New Document </TITLE>
<META NAME="Generator" CONTENT="EditPlus">
<META NAME="Author" CONTENT="">
<META NAME="Keywords" CONTENT="">
<META NAME="Description" CONTENT="">
</HEAD>
<script>
function get1()
{

var i='<img src="http://image.weather.com/web/common/wxicons/31/30.gif?12122006" alt="" />Partly Cloudy, and 84 &deg; F. For more details?';
var j='\'' +i+ '\'';
alert(j);
}
</script>
<BODY onload='get1();'>

</BODY>
</HTML> 
```

请试试这个

# c++ - 运算符重载时运算符+错误不匹配

> ID：11650369
> 
> 赞同：4
> 
> 时间：2012-07-25T13:04:27.313
> 
> 标签：c++, overloading, operator-keyword

我正在学习gameinsitute的c++编程课程，有一个运算符重载的例子，我不断得到一个

> main.cpp|20|错误：'v + w'中的'operator+'不匹配</p>

我不知道问题出在哪里。

主文件

```
// main.cpp

#include "Vector3.h"
#include <iostream>

using namespace std;

int main()
{
    float coords[3] = {1.0f, 2.0f, 3.0f};
    Vector3 u;
    Vector3 v(coords);
    Vector3 w(-5.0f, 2.0f, 0.0f);

    cout << "u = ";    u.print();
    cout << "v = ";    v.print();
    cout << "w = ";    w.print();
    cout << endl;

    u = v + w; // this gives the error
    cout << "v + w = ";
    u.print();
    cout << endl;

    v.normalize();
    cout << "unit v = ";
    v.print();
    cout << "v.length() = "<< v.length() << endl;
    cout << endl;

    float dotP = u * w; // this also gives error
    cout << "u * w = " << dotP << endl;

    float* vArray = v.toFloatArray();

    cout <<
          "[0] = " << vArray[0] << ", "
          "[1] = " << vArray[1] << ", "
          "[2] = " << vArray[2] << endl <<endl;

    cout << "Input vector..." << endl;
    Vector3 m;
    m.input();
    cout << "m = ";
    m.print();

    return 0;
} 
```

矢量3.h

```
#ifndef VECTOR3_H
#define VECTOR3_H

#include <iostream>

class Vector3
{
public:

    // constructors
    Vector3();
    Vector3(float coords[3]);
    Vector3(float x, float y, float z);
    Vector3(const Vector3& vec);

    // methods
    float  length();
    void    normalize();
    float* toFloatArray();
    void    print();
    void    input();

    // operators
    Vector3 operator=(const Vector3& rhs);
    Vector3 operator+(const Vector3& rhs) const;
    Vector3 operator-(const Vector3& rhs) const;
    float  operator*(const Vector3& rhs) const;
    Vector3 operator*(float scalar) const;

    // fields
    float mX;
    float mY;
    float mZ;
};

#endif // VECTOR3_H 
```

Vector3.cpp

```
#include "Vector3.h"
#include <cmath>
#include <iostream>

using std::cout;
using std::cin;

Vector3::Vector3()
{
    mX = 0.0f;
    mY = 0.0f;
    mZ = 0.0f;
}

Vector3::Vector3(float coords[3])
{
    mX = coords[0];
    mY = coords[1];
    mZ = coords[2];
}

Vector3::Vector3(float x, float y, float z)
{
    mX = x;
    mY = y;
    mZ = z;
}

Vector3::Vector3(const Vector3& vec)
{
    mX = vec.mX;
    mY = vec.mY;
    mZ = vec.mZ;
}

float Vector3::length()
{
    return sqrt(mX*mX + mY*mY + mZ*mZ);
}

void Vector3::normalize()
{
    float len = length();
    mX /= len;
    mY /= len;
    mZ /= len;
}

float* Vector3::toFloatArray()
{
    return &mX;
}

void Vector3::print()
{
    cout << "<" << mX << ", " << mY << ", " << mZ << "> \n";
}

void Vector3::input()
{
    cout << "Enter x: ";
    cin >> mX;
    cout << "Enter y: ";
    cin >> mY;
    cout << "Enter z: ";
    cin >> mZ;
}

//operators

Vector3 Vector3::operator=(const Vector3& rhs)
{
    Vector3 vTemp;
    vTemp.mX = rhs.mX;
    vTemp.mY = rhs.mY;
    vTemp.mZ = rhs.mZ;

    return vTemp;
}

Vector3 Vector3::operator+(const Vector3& rhs) const
{
    Vector3 sum;
    sum.mX = mX + rhs.mX;
    sum.mY = mY + rhs.mY;
    sum.mZ = mZ + rhs.mZ;

    return sum;
}

Vector3 Vector3::operator-(const Vector3& rhs) const
{
    Vector3 dif;
    dif.mX = mX - rhs.mX;
    dif.mY = mY - rhs.mY;
    dif.mZ = mZ - rhs.mZ;

    return dif;
}

float Vector3::operator*(const Vector3& rhs) const
{
    float dotP = mX*rhs.mX + mY*rhs.mY + mZ*rhs.mZ;

    return dotP;
}

Vector3 Vector3::operator*(float scalar) const
{
    Vector3 p;
    p.mX = mX * scalar;
    p.mY = mY * scalar;
    p.mZ = mZ * scalar;

    return p;
} 
```

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:53:11.633

你没有错`operator+`——是你`operator=`错了，导致`operator+`你没有做你认为它正在做的事情。解决这个问题将解决您的问题。

```
Vector3 Vector3::operator=(const Vector3& rhs)
{
    mX = rhs.mX;
    mY = rhs.mY;
    mZ = rhs.mZ;
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T13:53:03.320

附带说明一下，其中一些重载存在问题，您正在返回本地参考。很抱歉，这不是一个答案，我可能会对此投反对票，但仍然：

以 operator= 为例。它应该是

```
Vector3& Vector3::operator=(const Vector3& rhs)
{
  this->mX = rhs.mX;
  this->mY = rhs.mY;
  this->mZ = rhs.mZ;
  return (*this);
} 
```

否则，您将返回一个本地引用，一旦此函数退出，该引用将成为垃圾。运算符 +- 也有同样的问题。至于 operator* 你正在做一个点积，这与向量乘法不同。为此，我建议编写一个名为 dot() 的函数，该函数采用另一个向量并在自身和第二个向量之间执行点积

或者，您应该使用 [Eigen 库](http://eigen.tuxfamily.org/index.php?title=Main_Page)

如果您可以向我们提供如何编译您的代码，也许我们可以提供帮助

# objective-c - 在 xcode 中显示数组

> ID：11650370
> 
> 赞同：0
> 
> 时间：2012-07-25T13:04:27.533
> 
> 标签：objective-c, arrays, cocoa

我正在尝试显示具有不同数字因子（“素数”）的数组。但是我总是得到 0,1,2,3,4,5,... 而不是给我 int 数字。

```
 factors.text = @"";

        int factorsNumber;

        NSMutableArray *array;
        array = [NSMutableArray arrayWithCapacity:5];

        for (factorsNumber=1; factorsNumber<=prime; factorsNumber++) {
            if (prime%factorsNumber == 0) {
                [array addObject:[NSString stringWithFormat:@"%d", factorsNumber]];
            }

        }

        for (int i = 0; i < [array count]; i++) {

            [array replaceObjectAtIndex:1 withObject:@"4"];

            NSString *temp = [NSString stringWithFormat:@"%d, ", i, [[array objectAtIndex:i] intValue]];
            factors.text = [factors.text stringByAppendingString:temp];
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:12:29.493

代替

```
NSString *temp = [NSString stringWithFormat:@"%d, ", i, [[array objectAtIndex:i] intValue]]; 
```

和

```
NSString *temp = [NSString stringWithFormat:@"%d, ", [[array objectAtIndex:i] intValue]]; 
```

问题是您只打印数组索引，而不是值。

# ruby-on-rails - 我可以显示 PayPal 框架来为我的用户显示付款报告吗？

> ID：11650373
> 
> 赞同：0
> 
> 时间：2012-07-25T13:04:38.417
> 
> 标签：ruby-on-rails, reporting, paypal

我的任务是向我的用户提供财务报告。

我的应用程序正在与用户分享使用特殊广告的利润。

PayPal 报告页面实际上应该是插入到我们网站中的 PayPal 站点框架 - 这是我们的 PAYPAL 帐户的实际 Paypal 报告系统，显示该特定用户的转移。

有可能吗？据我所知 PayPal 正在阻止帧或我错了？

****如果不可能，我应该在用户在我的网站上注册时为用户提供一些角色？****

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:16:11.237

所有 PayPal URL 都将脱离 iframe。X-FRAME 标头在其所有站点上都设置为 SAMEORIGIN。[在这里](http://web-sniffer.net/)搜索一下，你会看到：

```
HTTP Response Header

Name    Value   Delim
Status: HTTP/1.1 301 Moved Permanently
Date:   Wed, 25 Jul 2012 13:16:27 GMT   
Server: Apache  
X-Frame-Options:    SAMEORIGIN  
Set-Cookie: cwrClyrK4LoCV1fydGb [..]
Set-Cookie: cookie_check=yes; expires=Sat, 23-Jul-2022 [...]
Location:   https://www.paypal.com/ 
Vary:   Accept-Encoding 
Content-Encoding:   gzip    
Connection: close   
Transfer-Encoding:  chunked 
Content-Type:   text/html 
```

你不能（也不应该试图）[绕过这个](https://stackoverflow.com/questions/6666423/overcoming-display-forbidden-by-x-frame-options)。**

# java - 使用 Java 下载文件随机冻结

> ID：11650375
> 
> 赞同：5
> 
> 时间：2012-07-25T13:04:41.697
> 
> 标签：java, io

当我尝试下载文件时（在这种情况下它只是一个图像，但真正的应用程序是一个更新机制），`InputStream`似乎冻结在`read`. 我很确定我的代码没问题，所以我想知道为什么会发生这种情况，以及它是否只是在我的计算机上。有人可以运行这个吗？请注意，这`Timer`仅用于调试目的。

非常感谢你。

这是一个显示问题的视频：[视频](http://dev.fhmp.net/java/SO_demo.swf)

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import java.net.URL;
import javax.swing.Timer;

public class FileDownloader {

    public final static int BUFFER_LENGTH = 1 << 14;

    private static Timer timeoutTimer = new Timer(5000, new ActionListener(){
        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println("Timeout");
            System.exit(0);
        }
    });

    public static void main(String [] args) throws Exception{
        URL url = new URL("http://host.trivialbeing.org/up/tdk-aug3-jokr-high-res-2.jpg");
        download(url, new File("joker.jpg"));
    }

    public static void download(final URL url, final File dest) throws IOException {
        FileOutputStream fos = new FileOutputStream(dest);
        BufferedOutputStream out = new BufferedOutputStream(fos);
        BufferedInputStream in = new BufferedInputStream(url.openStream());
        byte[] buf = new byte[BUFFER_LENGTH];
        int bytesRead;
        int bytesWritten = 0;
        timeoutTimer.start();
        while ((bytesRead = in.read(buf, 0, BUFFER_LENGTH)) != -1) {
            timeoutTimer.restart();
            out.write(buf, 0, bytesRead);
            out.flush();
            bytesWritten += bytesRead;
            System.out.println(bytesWritten / 1024 + " kb written");
        }
        in.close();
        out.close();

        System.out.println("Finished");
        fos.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:30:23.873

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:45:55.540

好的，我认为这是一个滞后的系统，或者是在我上面回答的那个人（我认为是罗伯特），但是如果您已经对 ipv4 没有很多了解，那么使用 ipv6 将会很困难。

只是巧合我叫罗伯特:)

# php - 使用 php 针对 xsd 验证 xml 文件

> ID：11650377
> 
> 赞同：22
> 
> 时间：2012-07-25T13:04:49.790
> 
> 标签：php, xml, validation, xsd, xml-parsing

如何针对 xsd 验证 xml 文件？有 domdocument::schemaValidate() 但它没有告诉错误在哪里。有什么课程吗？从头开始制作该解析器是否值得？还是只是重新发明他的轮子，

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-25T13:12:33.487

这段代码做生意：

```
$xml= new DOMDocument();
$xml->loadXML(<A string goes here containing the XML data>, LIBXML_NOBLANKS); // Or load if filename required
if (!$xml->schemaValidate(<file name for the XSD file>)) // Or schemaValidateSource if string used.
{
   // You have an error in the XML file
} 
```

[请参阅http://php.net/manual/en/domdocument.schemavalidate.php](http://php.net/manual/en/domdocument.schemavalidate.php)中的代码来检索错误。

IE

贾斯汀在 redwiredesign dot com 2006 年 11 月 8 日 03:32 发布。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-14T07:52:52.940

[来自http://php.net/manual/en/domdocument.schemavalidate.php](http://php.net/manual/en/domdocument.schemavalidate.php)的用户贡献

**它就像一个魅力！**

> 如需来自 DOMDocument::schemaValidate 的更详细反馈，请禁用 libxml 错误并自行获取错误信息。有关详细信息，请参阅 [http://php.net/manual/en/ref.libxml.php](http://php.net/manual/en/ref.libxml.php)。

**例子.xml**

```
<?xml version="1.0"?>
<example>
    <child_string>This is an example.</child_string>
    <child_integer>Error condition.</child_integer>
</example> 
```

**例子.xsd**

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
elementFormDefault="qualified">
    <xs:element name="example">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="child_string" type="xs:string"/>
                <xs:element name="child_integer" type="xs:integer"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

**PHP**

```
<?php

function libxml_display_error($error)
{
    $return = "<br/>\n";
    switch ($error->level) {
        case LIBXML_ERR_WARNING:
            $return .= "<b>Warning $error->code</b>: ";
            break;
        case LIBXML_ERR_ERROR:
            $return .= "<b>Error $error->code</b>: ";
            break;
        case LIBXML_ERR_FATAL:
            $return .= "<b>Fatal Error $error->code</b>: ";
            break;
    }
    $return .= trim($error->message);
    if ($error->file) {
        $return .=    " in <b>$error->file</b>";
    }
    $return .= " on line <b>$error->line</b>\n";

    return $return;
}

function libxml_display_errors() {
    $errors = libxml_get_errors();
    foreach ($errors as $error) {
        print libxml_display_error($error);
    }
    libxml_clear_errors();
}

// Enable user error handling
libxml_use_internal_errors(true);

$xml = new DOMDocument();
$xml->load('example.xml');

if (!$xml->schemaValidate('example.xsd')) {
    print '<b>DOMDocument::schemaValidate() Generated Errors!</b>';
    libxml_display_errors();
}

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-11T14:03:55.810

这是显示 xsd 验证错误的完整代码片段：

```
 $xml = '<test/>';
    $xsd = '/path/to/xsd';
    // needed for getting errors
    libxml_use_internal_errors(true);

    $domDocument= new DOMDocument();
    $domDocument->loadXML($xml); 
    if (!$domDocument->schemaValidate($xsd)) {
        $errors = libxml_get_errors();
        foreach ($errors as $error) {
            print_r($error);
        }
        libxml_clear_errors();
    } 
```

# ajax - ExtJS 文件上传 ajax 响应从 JSON 内的字符串中去除 HTML

> ID：11650382
> 
> 赞同：0
> 
> 时间：2012-07-25T13:05:01.993
> 
> 标签：ajax, iframe, extjs4

我有一个带有文件上传控件的表单，我使用成功函数调用 form.submit。

我的服务器端通常将内容类型设置为 text/html 以使其成为一体。

在成功函数中，action.response.responseText 确实包含我发送的 JSON。

当它离开服务器时，它看起来像：

```
{
   html: "<div>a div</div>"
} 
```

当它到达成功函数时，标签丢失了。这是怎么回事？我是否需要在服务器上的整个响应周围放置某种 html cdata 包装器以避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:11:19.517

这是情况。当您要求 ExtJS 或 JQuery 为带有文件上传的表单执行 Ajax 时，它必须使用 iframe。为了使响应正确返回，它必须是内容类型 text/html 中的任何内容。所以它必须为 HTML 转义它的 HTML 字符，这是我使用 CommonsLang 的一个函数完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:47:53.580

JSON 中的字符串中的字符串。只要格式正确，您就可以将 HTML 放入字符串值中（确保您转义引号等）。

这可能是您用来插入去除标签的 HTML 的功能。

# xpages - 如果未设置过滤器，如何防止带有类别过滤器的 viewPanel 显示空行

> ID：11650383
> 
> 赞同：0
> 
> 时间：2012-07-25T13:05:10.180
> 
> 标签：xpages, xpages-ssjs

我将此分类视图显示在未显示类别列本身的视图面板中。相反，我在 viewPanel 上方显示了一个组合框，用户可以在其中从所有可用类别中进行选择（请参见下面的屏幕截图）。该组合绑定到一个 scopeVariable 并刷新 viewPanel onChange。viewPanel 有一个从同一个 scopeVar 读取的计算 categoryFilter。这一切都很好。

现在我还在选择列表中实现了一个额外的通配符 (*) 值，它（如果选择）以编程方式将 cat 过滤器设置为 NULL。这样我就强制 viewPanel 显示所有条目。同样，这工作正常，但缺点是现在视图显示空行，类别条目将正常显示（在屏幕截图中，您看到每个条目上方的空行，类别“edcom GmbH”的 2 个条目显然属于到同一类别；那些不被空行分隔）：

![在此处输入图像描述](../Images/8423b769af9960cf7f5cc8d45c5f2938.png)

至少隐藏那些空行的一种方法是通过 css 编码。但我更希望那些行根本不被渲染。

这完全可以使用 viewPanel 来完成吗？怎么做？或者我是否必须使用其他控件，例如重复或数据表？

提前致谢，

洛萨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T03:30:10.173

一个“hack”（我承认一个丑陋的）是将您的分类列从更改`Firma`为`Firma:"--All--"`或`Firma:"*"`，然后将类别过滤器设置为）。`NULL `you set it to "--All--"` (or "*"`

双重类别命中索引器，但应该做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:39:36.860

显然没有简单的方法。所以同时我会坚持这个css风格的解决方案：

在视图面板和所有属性 - 我设置 var = "entry" 的数据。然后，在所有属性 - 样式下，我为 rowClasses 属性设置了一个编程值：

```
if(entry.isCategory()){
    return "rowStyleHidden";
}
return ""; 
```

样式类“rowStyleHidden”使用隐藏这些行

```
display: none; 
```

还不知道这在性能方面如何，一旦我在真实数据库的副本中实现它，我将不得不观察这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:37:23.513

您还可以通过根据组合框中的值计算视图名称来切换到非分类视图。

# iphone - 适用于 iOS 的非越狱 VNC 服务器？远程使用 iOS 设备？

> ID：11650385
> 
> 赞同：14
> 
> 时间：2012-07-25T13:05:16.693
> 
> 标签：iphone, ios, ipad, vnc

我知道有一个名为 veency 的现有应用程序可以在 VNC 服务器中转换 iPhone/iPad。使用 mac 或 windows 上的另一个程序，如tightvnc，您可以从 windows/mac 远程使用 iOs 设备。问题是，我找不到在普通 iOS 设备（未越狱）上执行此操作的任何现有应用程序或程序。我发现的是相反的，从 iPad 远程使用台式计算机的程序。

有谁知道在 VNC 服务器中打开 iOS 设备的任何应用程序或方法？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T23:11:04.097

试试[http://www.reflectionapp.com](http://www.reflectionapp.com)

或[http://www.airserverapp.com](http://www.airserverapp.com)

他们像苹果电视一样镜像屏幕。

希望这可以帮助。

# asp.net - .net +oracle 错误

> ID：11650387
> 
> 赞同：0
> 
> 时间：2012-07-25T13:05:20.497
> 
> 标签：asp.net, exception-handling, ado.net, oracle10g, .net-2.0

我正在使用 ASP.NET 2.0 (Visual Studio 2005) 和 Oracle 10g 数据库

我的应用程序没有构建错误。构建成功。

但我收到运行时错误。

下面的事情是我得到的错误。

> 异常详细信息：System.DllNotFoundException：无法加载 DLL 'OraOps10w.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:08:42.133

您的项目中没有引用程序集 OraOps10w.dll（这可能没问题），因此它可以编译。但在运行时，任何引用的 Oracle 程序集最有可能依次调用 OraOps10w.dll，而在运行程序集的位置找不到该程序集。

我怀疑您复制了编译所需的 Oracle 程序集（通常是 Oracle.DataAccess.dll），而您应该在其原始位置（即 Oracle HOME 安装目录）引用它。

编辑：与 NHibernate Oracle 非常相似的问题[- 无法加载 DLL 'OraOps10w.dll'](https://stackoverflow.com/questions/7821076/nhibernate-oracle-unable-to-load-dll-oraops10w-dll)

正如对该问题的回答中提到的，您可以安装 Oracle XEClient（免费下载，大约 20MB），并在该位置引用 Oracle.DataAccess.dll。请记住，您必须在每个客户端上安装此软件包才能工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:10:38.433

Oracle 数据提供者需要这些 dll：Oracle.DataAccess.dll 和 OraOps11w.dll

添加对 Oracle.DataAccess.dll 的引用

# android - 从 Android 中的 Spinner 中删除特定值

> ID：11650393
> 
> 赞同：0
> 
> 时间：2012-07-25T13:05:47.580
> 
> 标签：android

我必须将数据从服务器解析到微调器。现在我想从 Spinner 中删除一些值。

这是我的代码。

mytaxList 包括所有值。现在我想检查一下 TaxType 是否是复合的，从微调器中删除该类型的 TaxName 和 TaxValue。实际上我不想在微调器中显示 cound 类型的税。即我想从 ArrayList mytaxList 中删除复合类型税。

```
JSONObject taxes = returnTaxlist.getJSONObject(TAG_TAXES);

        Object tax ;

         if (taxes.optJSONArray("tax") != null){
                //The result isn't null so it is a JSONArray
                tax = taxes.optJSONArray("tax");
                }
                else
                {
                //The result is null so it isn't a JSONArray
                tax = taxes.optJSONObject("tax");
                }

                if (tax instanceof JSONObject){
                // The object is a JSONObject
                    tax =  taxes.getJSONObject(TAG_TAX);
                }

                    else
                     {
                // The object is a JSONArray

                    tax = taxes.getJSONArray(TAG_TAX);

                    mytaxList = new ArrayList<TaxList>();

                    for(int i = 0; i <=((JSONArray)tax).length(); i++)
                         {
                        if(i==0){
                            TaxList iTaxClass = new TaxList();
                             iTaxClass.setTaxId("");
                             iTaxClass.setTaxName("--Select--");
                             iTaxClass.setTaxType("");
                             iTaxClass.setTaxvalue("");
                             mytaxList.add(iTaxClass);

                             continue;

                        }

                          JSONObject taxlist = ((JSONArray)tax).getJSONObject(i-1);
                          TaxList iTaxClass = new TaxList();

                               //***** Storing each JSON item in variable
                         iTaxClass.setTaxId(taxlist.getString(TAG_TAX_ID));
                         iTaxClass.setTaxName(taxlist.getString(TAG_TAX_NAME));
                         iTaxClass.setTaxType(taxlist.getString(TAG_TAX_TYPE));
                         iTaxClass.setTaxvalue(taxlist.getString(TAG_TAX_VALUE));

                         mytaxList.add(iTaxClass);

                         } 

                            tax1 = (Spinner)findViewById(R.id.item1);
                            tax1.setAdapter(new TaxListAdapter(mytaxList,this));

                            tax1.setOnItemSelectedListener(new Spinner.OnItemSelectedListener() {

                             public void onItemSelected(AdapterView<?> parent, View selectedItemView, int position, long id) 
                             {

                                    TaxListAdapter taxlistvalue = (TaxListAdapter)parent.getAdapter();
                                    taxlistvalue.getItemId(position);

                        }

                        public void onNothingSelected(AdapterView<?> arg0) {

                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:32:56.697

我没有完整的回应，只有一个起点：

```
tax1.setOnItemSelectedListener(new Spinner.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View selectedItemView, int position, long id){
        //get the selected item
        Object item = tax1.getItemAtPosition(position);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:29:55.287

在添加到税收对象`ArrayList`的这个条件之前`Custom`，如果它已经添加对象到数组列表中，则不需要添加。

```
if( taxlist.getString(TAG_TAX_NAME).equals("Normal") mytaxList.add(iTaxClass);
    mytaxList.add(iTaxClass); 
```

# android - Android：从 TabHost 继承，例如使用不带 Activity 的 TabHost

> ID：11650396
> 
> 赞同：0
> 
> 时间：2012-07-25T13:05:53.503
> 
> 标签：android, xamarin.android, android-tabhost

我想在现有的 TabHost/TabActivity 中使用 TabHost。所以我想摆脱 Activity 类，只实现一个从 TabHost 继承的视图组类。但是，似乎无法在没有相应 Activity 类的情况下使用 TabHost - TabHost 及其内容在显示扩展类时不会显示。

我使用了 TabHost 类并添加了包含选项卡和内容容器的线性布局，其中包含来自 xml 的适当 ID（android:id/tabs 和 android:id/tabcontent）。

```
public class EmitterView : TabHost, TabHost.ITabContentFactory
{
public EmitterView(Context context) :
base(context)
{
Initialize();
}

public EmitterView(Context context, IAttributeSet attrs) :
base(context, attrs)
{
Initialize();
}

private void Initialize()
{
// construct the TAB Host

LayoutInflater inflater = (LayoutInflater)    
this.Context.GetSystemService(Context.LayoutInflaterService);
View view = inflater.Inflate(AndroidFilterEditor.Resource.Layout.EmitterTabHost, null);
this.AddView(view);

this.Setup();

// Create Tabs
TabSpec emitter = this.NewTabSpec("Emitter");
emitter.SetIndicator("Emitter", Resources.GetDrawable(AndroidFilterEditor.Resource.Drawable.ic_tab_artists));
//Intent emitterIntent = new Intent(this.Context, typeof(EmitterActivity));
emitter.SetContent(this);
this.AddTab(emitter);
this.Invalidate();
}

public View CreateTabContent(string tag)
{
EmitterContentView view = new EmitterContentView(this.Context);
return view;
}
} 
```

布局定义：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:padding="5dp">
<FrameLayout
android:id="@android:id/tabcontent"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:padding="5dp"/>
<TabWidget
android:id="@android:id/tabs"
android:layout_width="fill_parent"
android:layout_height="wrap_content"/>
</LinearLayout> 
```

知道这是否可能吗？顺便说一句，这是 Android 的 Mono，所以代码显然是 C# 中的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:22:08.367

您可以使用 ActivityGroup 在其中托管多个活动，并将 tabhost 分配给每个活动。尽管它变得复杂并且不被鼓励。我会建议你在另一个 tabhost 中使用 Fragments 而不是 tabhost。

# c# - FileSavePicker：保存到内存？

> ID：11650397
> 
> 赞同：0
> 
> 时间：2012-07-25T13:05:55.770
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我有一个管理文档的 WinRT Metro 应用程序（XAML/C#，Windows Release Preview）。文档在内存中表示并通过 Web 服务获取，但并未物理存储在磁盘上。

为了改进我的应用程序，我想实现 FileSavePicker 合同。因此，其他应用程序可以将他们的文档直接保存到我的应用程序中。但似乎无法将内存中的文件保存选择器中的内容获取到我的应用程序中。我已将事件处理程序附加到`FileSavePickerActivatedEventArgs.FileSavePickerUI.TargetFileRequested`当用户想要将文件保存到我的应用程序时触发的事件。但是在这里我必须设置`TargetFileRequestedEventArgs.Request.TargetFile`为 a`StorageFile`并且由于我在内存中并且还没有文件，因此此操作失败。

此外（即使我有一个 StorageFile）我必须对文件保存过程的完成做出反应，而且似乎没有我可以采取的方法/事件来处理这个问题。

我不明白为什么微软决定为文件保存选择器合同采用这种 API 方式。为什么我不能将保存的数据/文件作为参数/流获取并做我想做的事？在这种情况下，沙盒/安全性不是原因！

编辑：我已经看到并查看了 SDK 中的文件选择器合同示例应用程序，但它没有帮助，因为它只保存到物理 StorageFile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:37:38.120

你看过[CachedFileUpdater 合约](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.storage.provider.cachedfileupdater.aspx)吗？当源应用程序写入文件时，您可以使用它来接收通知。您仍然需要为此创建一个 StorageFile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:17:12.060

您需要使用[StorageFile.CreateStreamedFileAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.createstreamedfileasync.aspx)。此方法将在向您请求数据时向您返回一个由您即时构建的 StorageFile。当从“文件”请求数据时，将调用您传入第二个参数的委托。发生这种情况时，您可以从任何您想要的流中抽取数据。

# oracle - 将 oracle 转储导入 PostgreSQL

> ID：11650398
> 
> 赞同：3
> 
> 时间：2012-07-25T13:05:56.907
> 
> 标签：oracle, postgresql, data-migration

我有一个纯文本而不是 oracle 二进制转储。如何将其导入 postgres？那里有可用的工具吗？还是有其他的，以前有人这样做过吗？

我想将一个转储（oracle）转换为另一个转储（postgres）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:47:52.833

查看[Talend](http://www.talend.com/index.php)和[Pentaho](http://kettle.pentaho.com/)等[ETL 工具](http://en.wikipedia.org/wiki/Extract,_transform,_load)，了解 Oracle 和 PostgreSQL 之间的转换。

从 Oracle 转储来看，这将变得更加困难。您最好的选择几乎肯定是将其加载到 Oracle 实例中，然后从那里使用迁移/ETL 工具。根据转储大小、所需功能等，您可能可以为此使用免费的 Oracle 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:53:38.287

我认为以简单的直接方式是不可行的。是sqlloader格式的纯文本吗？我认为，如果数据库大小不是很大，导出 DDL 然后以 INSERT 格式导出数据可能会更容易。

另一种选择是迁移工具，例如[Talend](http://www.talendforge.org/forum/viewtopic.php?id=6388)，但同样，它不是即时的。**最短路径通过标准 SQL**，恕我直言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-04T14:59:23.453

使用较新的 PostgreSQL 版本（9.1 或更高版本），您可能能够使用外部数据包装器从 PostgreSQL 数据库中访问 Oracle 模式，例如：

[http://laurenz.github.io/oracle_fdw/](http://laurenz.github.io/oracle_fdw/)

# android - 如何获取传入短信的 URI 当前/默认铃声？

> ID：11650405
> 
> 赞同：10
> 
> 时间：2012-07-25T13:06:14.990
> 
> 标签：android, notifications, sms, ringtone

我正在编写旨在替换标准/库存信使的应用程序。所以我需要为传入消息定义默认铃声。我的意思是传入的短信通知铃声。

有谁知道如何得到它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T14:03:47.093

要检索[`Ringtone`](http://developer.android.com/reference/android/media/Ringtone.html)默认铃声的对象，请使用[`RingtoneManager`](http://developer.android.com/reference/android/media/RingtoneManager.html)：

```
Ringtone ringtone = RingtoneManager.getRingtone(context, Settings.System.DEFAULT_RINGTONE_URI); 
```

如果用户已将默认铃声更改为 3rd 方消息应用程序中提供的铃声，AFAIK 您无法访问新铃声，除非 3rd 方应用程序通过`ContentProvider`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T13:43:47.843

对于默认通知声音：

```
String defaultPath = Settings.System.DEFAULT_NOTIFICATION_URI.getPath(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T07:15:15.200

如果您正在使用`Notification.Builder`or`NotificationCompact.Builder`类，`setSound(Settings.System.DEFAULT_NOTIFICATION_URI)`则调用构建器应该可以解决问题。

这将播放系统显示您的通知时用户选择的默认通知音。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-23T21:29:07.273

帮助我的是 `RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)`。

# php - 如何使用 PHP 从 csv 文件中提取所有电子邮件？

> ID：11650406
> 
> 赞同：0
> 
> 时间：2012-07-25T13:06:24.313
> 
> 标签：php, csv

我需要邮寄我的客户，为此我有一个 csv 文件，其中包含客户数据，包括 CSV 文件中的电子邮件。

如何使用 PHP 读取所有电子邮件地址，将它们放入数组或将它们插入文本文件（只是我可以使用的一种格式）

CSV 如下所示：（示例记录）

```
"Date","Ref #","Time","Customer","Country","Email","Product","Product ID","Contract","Contract ID","Payment Type","Frequency","Referrer","Qty","Sale type","Adds","Total","Price","Plimus Commission","Affiliate Commssion (%)","Affiliate Commssion ($)","Tracking Id","CUSTOM1","CUSTOM2","CUSTOM3","CUSTOM4","CUSTOM5","Subscription ID","Target Balance","PayPal Comm.(main contracts)","PayPal Transaction ID","Original PayPal Transaction ID","PayPal email address"
"06/06/2008","19796287","04:06:29"," Mehmet Özekinci","Turkey","mhmtozek@gmail.com","Website Templates Pack","190830","xxxxxxxxxxx","1941602","PAYPAL","Once","xxxxxxxxxxxx","1","CHARGE","0","25","25","0","n/a","n/a"," "," "," "," "," "," "," ","xxxxx Account"," "," "," ","k_anafor56@hotmail.com" 
```

该文件包含超过 3000 条记录（CSV 文件）。如何在 PHP 中查找/获取所有电子邮件 ..@..？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:08:38.687

只需遍历 CSV 并获取相应的字段。你[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)可以这样做：

```
$emails = array();
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $emails[] = $data[5];
} 
```

# php - 从列唯一的数据库中获取值

> ID：11650412
> 
> 赞同：0
> 
> 时间：2012-07-25T13:06:48.403
> 
> 标签：php, sql, database

我需要有关高级 SQL 查询 (MSSQL 2000) 的帮助。

我有一张表`Result`，上面列出了田径 100 米的比赛时间。一个跑步者可以有多个比赛时间，但我只想展示每个跑步者的最佳时间。

结果表包含三列，`Result_id`, `athlete_id`, `result_time`。所以`athlete_id`当我列出值时必须是唯一的，并且`result_time`必须是最快（最低）的值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:09:48.853

在 SQL Server 2000 中，不能使用 windows 函数。您可以按如下方式执行此操作：

```
select r.*
from result r join
     (select athlete_id, min(result_time) as mintime
      from result r
      group by athlete_id
     ) rsum
     on rsum.athlete_id = r.athlete_id and r.time = rsum.mintime 
```

在较新版本的 SQL Server 中，您将使用 row_number()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:08:01.610

您想要的是使用聚合函数。在这种情况下`min()`，它将从其他选定列中具有相同数据的所有行中选择最小数据。这意味着您还必须使用 group by 子句。下面的查询应该会给你你想要的结果。

编辑：如果您需要其他列，只需将它们放入`select`子句中，然后将它们添加到`group by`子句中，如下所示：

`select althlete_id, result_id, min(result_time) as result_time from result-table group by althlete_id, result_id`

`select althlete_id, result_id, min(result_time) as result_time, race_date from result-table group by althlete_id, race_date, result_id`

编辑：您需要将所有列添加到`group by`不属于聚合函数的列中。聚合函数是`min()`,`max()`等`avg()`。

简短回答：如果您没有将列放在括号中，则它可能必须在 group by 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:13:03.380

如果您只需要每个 最快的时间`athlete_id`，请执行以下操作：

```
select athelete_id, min(result_time) as FastestTime
from result
group by athelete_id 
```

要显示表格中的其他列`result`，您可以像这样加入它：

```
select r.*
from result r
inner join (
    select athelete_id, min(result_time) as FastestTime
    from result
    group by athelete_id
) rm on r.athelete_id = rm.athelete_id and r.result_time = rm.FastestTime 
```

# objective-c - NSCell 重绘问题

> ID：11650414
> 
> 赞同：2
> 
> 时间：2012-07-25T13:06:59.467
> 
> 标签：objective-c, nstableview, nscell, nstableviewcell

我正在创建一个`NSCell`子类，它将一些对象直接绘制到视图上（使用），并且还简单地使用 NSView 的选择器`drawInRect:fromRect:operation:fraction:respectFlipped:hints:`绘制一个实例。`NSButton``addSubview:`

虽然使用第一种方法绘制的对象都绘制正确，但我在`NSButton`正确绘制时遇到了问题。问题是我的`NSButton`实例会在正确的位置绘制，但会重复多次。

我已经在互联网上研究了一段时间，有些人建议使用缓存，但我不确定这是否有效。（使用 for 循环访问包含按钮的数组肯定会导致滚动缓慢，因为我显示了很多数据......）

你会怎么做？我在吠叫错误的树吗？

这是相关代码：

```
- (void)drawInteriorWithFrame:(NSRect)cellFrame inView:(NSView *)controlView
{    
    NSRect _controlRect = cellFrame;

    float _Y = cellFrame.origin.y;

    NSRect _accessoryRect = NSMakeRect(_controlRect.size.width - 70.0f, _Y + 9.0f, 50.0f, 23.0f);

    _switch = [self _choiceSwitch];

    [_switch setFrame:_accessoryRect];
    [controlView addSubview:_switch];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T02:54:56.303

*长话短说*：**朋友不让朋友`addSubview`，一边画画。**

这是管理控制接口的一个基本的，并且*不是特别清楚解释*的方面，但重要的是要掌握。

让您的控制器决定子视图的“顺序”，并且您知道该按钮不应该被公然弄乱（如果它在您的自定义绘图例程中被推挤，则不是这种情况）。

很容易被困在这条小巷里，*因为，就像，嘿，我`NSImageView`在我的里面加了一个`initWithFrame`，一切似乎都还好*……但这*有点不是你应该怎么做的*，我猜……当你开始子类化时NSControl 等是您开始意识到原因的时候。

**更新：** [这里有一篇关于设计自定义控件的非常好的文章，](http://www.seanpatrickobrien.com/journal/posts/3/)附带一个[同样出色的示例项目](http://www.seanpatrickobrien.com/downloads/track/?path=/tutorials/1/ExampleButton.zip)- 它体现了可以帮助避免此类问题的代码组织。例如..您会在控制器类中注意到他如何使每个按钮保持独立、唯一且独立于其他视图的业务...</p>

```
for (int butts = 0; butts < 3; butts++) {
    NSRect buttFrame = NSMakeRect(0, butts * 10, 69, 10);
    ExampleButt *butt = [[ExampleButt alloc]initWithFrame:buttFrame];
    [mainView addSubview:butt];
} 
```

![在此处输入图像描述](../Images/d7acd14e585150116138c45088848168.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:50:07.190

`NSButton`每次绘制单元格本身时，通过将其实例添加到视图层次结构中来“绘制”绝对是个坏主意。相反，创建一个 NSButtonCell 并根据您的喜好对其进行配置。然后，在您`-[NSCell drawInteriorWithFrame:inView:]`使用单元格 ivar 来绘制其外观。

如果您想`NSButton`在表格视图的每个单元格中都有一个可点击的实例，请尽量避免调用`addSubview:`。每次执行此操作时，控件视图都可能使其布局无效并从头开始重新绘制所有内容，从而在您的情况下进行某种递归。

# javascript - 将文件路径从 XSL 传递给 JavaScript 函数

> ID：11650416
> 
> 赞同：0
> 
> 时间：2012-07-25T13:07:00.430
> 
> 标签：javascript, xslt

我正在尝试将文件夹路径从 XSL 传递给 JavaScript。JavaScript 中有函数，并且该函数在 XSL 中 HTML 按钮的 onClick 按钮上被调用。路径类似于“C:\ABC\DEF\GH”。在发出警报时，我看到该路径正在发送，例如：“CABCDEFGH”。所有的斜线都被删除。即使我删除了 OnClick 事件上的函数调用，只是用硬编码路径在那里发出警报，仍然是一样的。它删除了所有的斜线。

```
<img class="viewcls" src="images/copy.jpg" title="Copy Profile" onclick="fnCopyProfile({$CurlDPID},'{@T}','{SOURCE/I/@DP}')"/> 
```

这里 fnCopyProfile 函数的最后一个参数是一个 XPath，其值将是一个文件路径，如 C:\ABC\DEF\GH。在 JS 中，它没有斜线。

即使我将警报放在 XSL 本身中，例如：

```
<img class="viewcls" src="images/copy.jpg" title="Copy Profile" onclick="alert('{SOURCE/I/@DP}');fnCopyProfile({$CurlDPID},'{@T}','{SOURCE/I/@DP}')"/> 
```

然后它也显示没有斜线的路径。

但是，如果我这样做：

```
<xsl:value-of select="SOURCE/I/@DP" /> 
```

然后它显示带有斜杠的路径，但是我想我们不能像这样将值传递给 JS。

如何将带有斜杠的确切路径发送到 JavaScript。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:24:07.977

确保您正在转义所有`\`字符。在 JavaScript 字符串中使用时，`\`用于表示控制字符（例如`\n`换行符）。

因此，您需要做的是将所有`\`字符替换为`\\`.

我不知道您将如何使用您正在使用的内联变量来做到这一点（希望 Dimitre 会向我们展示）。

~~但是，你*可以*这样做......~~

 ~~```
<img class="viewcls" src="images/copy.jpg" title="Copy Profile">
  <xsl:attribute name="onclick">fnCopyProfile(<xsl:value-of select="$CurlDPID"/>,'<xsl:value-of select="@T"/>','<xsl:value-of select="translate(SOURCE/I/@DP,'\','\\')"/>');</xsl:attribute>
</img> 
```~~  ~~**更新**

以上不能工作，因为`translate`用单个字符替换单个字符。

如果您使用的是 XSLT 2.0，那么我相信您可以做到这一点（[w3.org 参考](http://www.w3.org/TR/xpath-functions/#func-replace)）...

```
<xsl:value-of select="replace(SOURCE/I/@DP,'\\','\\\\'")/> 
```

的原因`\\`是第二个和第三个参数是正则表达式，所以需要`\`转义。

如果您使用的是 XSLT 1.0，那么我刚刚[通过 Google 找到了这篇文章，](http://geekswithblogs.net/Erik/archive/2008/04/01/120915.aspx)它提供了“搜索和替换”模板

```
<xsl:template name="string-replace-all">
  <xsl:param name="text" />
  <xsl:param name="replace" />
  <xsl:param name="by" />
  <xsl:choose>
    <xsl:when test="contains($text, $replace)">
      <xsl:value-of select="substring-before($text,$replace)" />
      <xsl:value-of select="$by" />
      <xsl:call-template name="string-replace-all">
        <xsl:with-param name="text"
        select="substring-after($text,$replace)" />
        <xsl:with-param name="replace" select="$replace" />
        <xsl:with-param name="by" select="$by" />
      </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$text" />
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

您应该可以这样称呼它（我已将其放入变量中以使其更清晰）...

```
<xsl:variable name="mypath">
  <xsl:call-template name="string-replace-all">
    <xsl:with-param name="text"><xsl:value-of select="SOURCE/I/@DP"/>
    <xsl:with-param name="replace">\</xsl:with-param>
    <xsl:with-param name="by">\\</xsl:with-param>
  </xsl:call-template>
</xsl:variable>
<img class="viewcls" src="images/copy.jpg" title="Copy Profile">
  <xsl:attribute name="onclick">fnCopyProfile(<xsl:value-of select="$CurlDPID"/>,'<xsl:value-of select="@T"/>','<xsl:value-of select="$mypath"/>');</xsl:attribute>
</img> 
```~~

# c# - 起订量和具有动态参数的方法

> ID：11650425
> 
> 赞同：2
> 
> 时间：2012-07-25T13:07:26.003
> 
> 标签：c#, dynamic, moq, verify

> **可能重复：**
> [如何模拟采用动态对象的方法调用](https://stackoverflow.com/questions/10458714/how-to-mock-a-method-call-that-takes-a-dynamic-object)

我有一个动态参数的方法：

```
public void SampleMethod(dynamic arg) 
{ 
Console.WriteLine(arg.dynamicProperty);
} 
```

我还有一个包含此方法的类的 Moq 模拟。我需要验证是否调用了 SampleMethod，所以我尝试了以下代码

`_dynClassMock.Verify(x => x.SampleMethod(It.IsAny<dynamic>()), Times.Once);`

但它不起作用。我有以下编译时错误：

表达式树可能不包含动态操作

这个问题有什么解决方法吗？

# rest - 在 Backbone 中使用超媒体 (REST) API

> ID：11650426
> 
> 赞同：5
> 
> 时间：2012-07-25T13:07:30.013
> 
> 标签：rest, backbone.js, hypermedia

在构建与 RESTful（希望如此）API 对话的 Backbone.js SPA 的过程中。我尝试围绕资源设计 API，使用超媒体将资源链接在一起。当我开始在 Backbone 中实现一些东西时，我开始意识到使用 Backbone 完成真正的超媒体可能并不合适。

主要问题是骨干路由器希望预先声明其路径。使用良好的超媒体 API，资源 URI 不应在客户端中硬编码，以便灵活地添加新功能和 ( *gasp* ) 更改资源位置。

我正在考虑将客户端级别的**页面资源**与 API 级别的**对象资源**分离的想法。如果这很疯狂，有人会尖叫。基本上，这意味着在我的主干应用程序中定义到资源的路由（想象一个离散页面），然后检索一个或多个 API 级别的资源。

这导致了一些有趣的问题：

1.  这甚至是个好主意吗？我是否应该尽我所能在我的应用程序中重用 API 级别的资源 URI，以使路由是一对一的。

    *   我意识到一个*页面*和一个*api 对象*只是同一资源的不同表示，但在大多数情况下，一个页面是多个资源的组合。或者我只是疯了:)
2.  在一系列导航中间的页面刷新会发生什么。如果 API 级资源不同，我如何知道它们的位置？

3.  在我看来，RESTful 设计强调*发现*而不是预先了解事物。我这样假设是对的吗？这就是代码下载的全部内容吗？如果我朝着正确的方向前进，有人可以指出我进一步阅读。

*大多数*资源都是只读的，因此只使用 GET 动词，但我确实有一些使用 POST/PUT 的场景（DELETE 确实不在这个特定客户端的域中，除了之前可能中止订单它已完全放置）。

*我只想说我绝不是 REST 大师。我仍在学习过程中，所以请随时告诉我我完全脱离了基地。没有感情会受到伤害。

**编辑：**

我一直在考虑更多与 SPA 相关的代码下载。还有几个选择：

1.  在动态加载（代码下载）的“API”资源或类似资源中定义您的资源 URI。这是一个例子：

    ```
    // this object downloaded along with the application code, on a refresh
    Framework.API.Resources = {
        Tasks: {
            uri: '/tasks',
            rel: 'self'
        },
        Users: {
            uri: '/users',
            rel: 'self'
        },
        // ... etc
    }

    // then in a collection

    var TaskCollection = Backbone.Collection.extend(
        uri: Framework.API.Resources.Tasks.uri
        // implementation details
    ); 
    ```

2.  在您浏览资源时动态定义您的路线，使用“根”资源 uri 作为您的路线。我相信 Backbone.Router.route 可以做到这一点，但我不确定是否可以即时执行。有没有人试过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:05:39.863

回复 #3

按需代码的真实世界示例很难找到，我还没有找到这样做的理由。

我想到了两个地方的发现。1) 预先发现，然后您可以对其进行编码。因此，例如，每个浏览器都知道他们将处理 HTML，并且可以预先设计媒体类型。2) 运行时发现，虽然浏览器知道他们需要处理什么，但他们不知道这些消息中有什么。他们有移动的机制，虽然超媒体已经完成，但会在运行时发现它的执行。

在我正在开发的应用程序中。我们使用设计时发现来查看 REST API 的文档。该 API 详细说明了所有可能的链接关系、媒体类型和超媒体。我们根据所有可能的超媒体对客户端进行了编码。在运行时，我们根据超媒体是否存在来检查它们是否可用。

我看不出为什么您的 SPA 和页面需要与资源保持 1-1 的关系。REST 的原则之一是它是客户端 --> 服务器，因此它们可以以不同的方式发展。如果您获得使它们 1-1 的设计优势，那么这就是您的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:35:19.360

虽然这是 Roy Fielding 描述的 REST 的意图，但我认为我们的框架中还没有，包括 Backbone.js。在我看来，如今的 javascript 框架假设与远程资源存在一对一的映射。就个人而言，我不会尝试在 Backbone.js 中实现超媒体

# sql - 如何访问从 QSqlquerymodel 集合查询返回的元素

> ID：11650427
> 
> 赞同：4
> 
> 时间：2012-07-25T13:07:30.573
> 
> 标签：sql, qt

当我实现 QSqlQueryModel 时，我无法理解如何访问返回的元素。

我知道你可以做 QSqlQuery 查询；

```
query.prepare("select * from database");

query.exec();

query.next();

qDebug() << "value in 0 is " << query.value(0).SomeFormat; 
```

所以我想用 QSqlQueryModel 做类似的事情（显然是更好的方法）。我在哪里设置查询，然后我可以将值输出到我拥有的另一批盒子。到目前为止我所拥有的是......

```
QSqlQuery selectAllUserFields;

selectAllUserFields.prepare(QString("SELECT * from %1 WHERE %2=:firstName and %3=:lastName;")
                            .arg(dbase::c_userTableName)
                            .arg(dbase::c_colUserFirstName)
                            .arg(dbase::c_colUserSecondName));

// finds the index of the current selection, so we can select the row
QModelIndexList tableIndex = m_ui->populatedUserBox->selectionModel()->selection().indexes();

QString firstName = tableIndex.at(0).data().toString();

QString lastName = tableIndex.at(1).data().toString();

QSqlQueryModel dbUsers;

dbUsers.setQuery(selectAllUserFields);

qDebug() << "DEBUG: {temp} " << dbUsers.record(0).value(0).toString(); 
```

我是初学者，所以如果有人可以提供帮助，我将不胜感激。

谢谢格兰特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:40:12.487

我建议您查看 QSqlQueryModel 文档“详细说明”部分，其中提供了一个示例。为了进一步帮助您，以下是我为应用程序编写的一些代码，用于迭代模型结果集：

```
for(int i = 0; i < sqlQueryModel->rowCount(); ++i)
{
    qDebug() << sqlQueryModel->record(i).value(0).toString();
} 
```

另一种方法是使用函数 QSqlQueryModel::data(); 我再次建议您在这里查看文档：http: [//doc-snapshot.qt-project.org/4.8/qsqlquerymodel.html](http://doc-snapshot.qt-project.org/4.8/qsqlquerymodel.html)

# javascript - 如何在 Android 中将 javascript 应用于我的 webView 的 html 内容？

> ID：11650429
> 
> 赞同：0
> 
> 时间：2012-07-25T13:07:33.503
> 
> 标签：javascript, android, android-webview

我正在为 android 平台开发一个 epub 阅读器。不是我开始了这个项目，我只是继续它，所以我有大量的代码可以进入它。

我的问题很简单：

android 中有没有办法将 javascript 应用于我的 webView 中的 html 内容？

例如，我想通过单击按钮来使 html 的字体大小变小或变大......因此用户可以在 webView 中修改字体大小。

有没有办法做到这一点？

任何建议将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:12:24.487

> android 中有没有办法将 javascript 应用于我的 webView 中的 html 内容？

给定一个`WebView`名为 的对象`wv`，执行：

```
wv.loadUrl("javascript:..."); 
```

其中`...`是要在当前显示的网页上下文中执行的 JavaScript 的源代码。这与桌面浏览器中的小书签使用的语法相同。

请注意，您还需要首先启用 JavaScript，如 nicholas.hauschild 的回答中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:13:39.573

`WebView`默认情况下，Javascript 在's上被禁用。

要在 a 中启用 javascript `WebView`，您需要先获取`WebView`' 的`WebSettings`成员。这可以通过调用`getWebSettings()`您的`WebView`.

一旦你有了你的`WebSettings`，你就可以调用[`setJavaScriptEnabled(true)`](http://developer.android.com/reference/android/webkit/WebSettings.html#setJavaScriptEnabled%28boolean%29)它。

```
WebView webView = getWebView(); 
WebSettings webSettings = webView.getWebSettings();
webSettings.setJavaScriptEnabled(true); 
```

# mobile - Sencha Touch 2.0 - 如何在 Mobile Safari 的文本区域内设置滚动？

> ID：11650431
> 
> 赞同：1
> 
> 时间：2012-07-25T13:07:35.660
> 
> 标签：mobile, extjs, safari, scroll, textarea

在我的移动 Safari 项目中，我需要创建一个消息发布功能。当文本行超过文本区域的最大行数时，需要在文本区域内滚动。我在 Ext.field.textarea 中找不到“可滚动”属性，知道怎么做吗？干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T22:38:26.713

touch 2.0.x 中存在一个错误，因此框架显式地阻止了滚动操作。据说修复将在 2.1 中，虽然我没有正式看到，只是来自论坛上的一个人。

在那之前，这里有一种 touch1 解决方案[http://www.sencha.com/forum/showthread.php?180207-TextArea-scroll-on-iOS-not-working](http://www.sencha.com/forum/showthread.php?180207-TextArea-scroll-on-iOS-not-working)可以移植到 V2。它基本上涉及向实际的 textarea 字段（不是 sencha 对象）添加一个事件侦听器，然后如果它是一个有效的滚动事件，则调用 preventdefault。

完整的代码在那个链接上，但重要的部分在这里。

直接获取 <textarea> 字段（不是 Sencha Touch 对象）并使用 addListener 在 touchstart 上应用“handleTouch”，在 touchmove 上应用“handleMove”

```
handleTouch: function(e) { 
  this.lastY = e.pageY;
},

handleMove: function(e) {
  var textArea = e.target;
  var top = textArea.scrollTop <= 0;
  var bottom = textArea.scrollTop + textArea.clientHeight >= textArea.scrollHeight;
  var up = e.pageY > this.lastY;
  var down = e.pageY < this.lastY;

  this.lastY = e.pageY;

  // default (mobile safari) action when dragging past the top or bottom of a scrollable
  // textarea is to scroll the containing div, so prevent that.
  if((top && up) || (bottom && down)) {
    e.preventDefault();
    e.stopPropagation(); // this tops scroll going to parent
  }

  // Sencha disables textarea scrolling on iOS by default,
  // so stop propagating the event to delegate to iOS.
  if(!(top && bottom)) {
    e.stopPropagation(); // this tops scroll going to parent
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T11:16:11.350

```
 Ext.define('Aspen.util.TextArea', {
override: 'Ext.form.TextArea',
adjustHeight: Ext.Function.createBuffered(function (textarea) {
    var textAreaEl = textarea.getComponent().input;
    if (textAreaEl) {
        textAreaEl.dom.style.height = 'auto';
        textAreaEl.dom.style.height = textAreaEl.dom.scrollHeight + "px";
    }
}, 200, this),

constructor: function () {
    this.callParent(arguments);
    this.on({
        scope: this,
        keyup: function (textarea) {
            textarea.adjustHeight(textarea);
        },
        change: function (textarea, newValue) {
            textarea.adjustHeight(textarea);
        }
    });
} 
```

});

# oracle - 用游标 ORACLE 替换 SELECT INTO 语句

> ID：11650438
> 
> 赞同：0
> 
> 时间：2012-07-25T13:08:17.093
> 
> 标签：oracle, plsql

这是查询。如何`SELECT INTO`用游标替换语句？

我是甲骨文的新手

谢谢你的帮助

```
SELECT CEQ_LISTE_TYPE_QUESTIONS.ID_LISTE_TYPE_QUESTION
        INTO vintIdListeTypeQuestion
        FROM CEQ_FORMULAIRES
        inner join CEQ_LISTE_TYPE_QUESTIONS
          on CEQ_LISTE_TYPE_QUESTIONS.ID_LISTE_TYPE_FORMULAIRE=CEQ_FORMULAIRES.ID_TYPE_FORMULAIRE 
             AND CEQ_LISTE_TYPE_QUESTIONS.WEBCODE='ITEM_BETA_LACTAMASE'
WHERE CEQ_FORMULAIRES.ID_FORMULAIRE=to_number(out_rec.ID_FORMULAIRE) 
and ceq_formulaires.date_inactive is null; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:24:10.647

该错误告诉您查询返回多于 1 行，因此您应该确定需要哪一行。这是一个示例，如何根据我在 ceq_list_type_questions "some_date" 中想到的日期字段获取最新行。

```
select max(q.id_liste_type_question) keep (dense_rank last order by q.some_date) into vintidlistetypequestion
from   ceq_formulaires f
join   ceq_liste_type_questions q on q.id_liste_type_formulaire = f.id_type_formulaire
where  f.id_formulaire = to_number(out_rec.id_formulaire) 
and    f.date_inactive is null
and    q.webcode = 'ITEM_BETA_LACTAMASE' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T13:20:42.547

好吧，如果你想在一个循环中处理你的多行，它就像

```
BEGIN
    FOR curs IN (SELECT     ceq_liste_type_questions.id_liste_type_question
                 FROM       ceq_formulaires
                 INNER JOIN ceq_liste_type_questions ON ceq_liste_type_questions.id_liste_type_formulaire=ceq_formulaires.id_type_formulaire 
                                                    AND ceq_liste_type_questions.webcode = 'ITEM_BETA_LACTAMASE'
                 WHERE      ceq_formulaires.id_formulaire = TO_NUMBER(out_rec.id_formulaire) 
                 AND        ceq_formulaires.date_inactive IS NULL)
    LOOP
        DBMS_OUTPUT.PUT_LINE(curs.id_liste_type_question);  -- do what you need to do
    END LOOP;
END;
/ 
```

但是，正如 BazzPsychoNut 提到的，如果您的 SQL 需要在单行上返回/操作，则需要修改查询以满足该要求。

# javascript - 在点击事件上使用jquery淡入隐藏文本？

> ID：11650444
> 
> 赞同：2
> 
> 时间：2012-07-25T13:08:42.913
> 
> 标签：javascript, jquery

我试图淡入`.example`隐藏使用的元素：

```
.example {

    display: none;

 } 
```

的JavaScript：

```
$('.clickme').click( function() {
   .....
   ....

 $el.html(html).children().hide().each(function(i, e){
    if($(this).hasClass('special')){
      $(this).delay(i*600).show(0);
      animateDiv(e.id);
    }
    else{
        $(this).delay(i*600).fadeIn(900); // the problem is here its not fading in
    } 
```

工作示例在这里：http: [//jsfiddle.net/6czap/19/](http://jsfiddle.net/6czap/19/)

我似乎找到了问题所在，我在没有点击事件的情况下尝试了这个，它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:24:38.173

您需要`example`从 div 中删除该类，否则它将永远不会显示内容。请参阅[更新的 jsFiddle](http://jsfiddle.net/6czap/25/)。

```
$el.removeClass("example").html(html).children().hide().each(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:25:29.247

更改 .example div 的内容后添加 .show()。

```
$el.html(html).show()... 
```

[工作示例](http://jsfiddle.net/6czap/24/)

# iphone - 在 Objective-C 中调试应用程序图稿变慢

> ID：11650445
> 
> 赞同：1
> 
> 时间：2012-07-25T13:08:46.390
> 
> 标签：iphone, objective-c, ipad, uitableview, uisegmentedcontrol

我有一个 tableviewcontroller，特别是在我的应用程序中，滚动时有点紧张。

我相当肯定这是因为我的自定义 UISegmentedControl 外观，我的表中有四个，每个都在自己的单元格中。

我在我的应用程序委托中使用此代码来自定义它们：

```
[[UISegmentedControl appearance] setBackgroundImage:[[UIImage imageNamed:@"SegmentedControl.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 4, 0, 4)] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setBackgroundImage:[[UIImage imageNamed:@"SegmentedControlSelected.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 4, 0, 4)] forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setDividerImage:[UIImage imageNamed:@"SegmentedControlDivider.png"] forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setDividerImage:[UIImage imageNamed:@"SegmentedControlSelectedDivider.png"] forLeftSegmentState:UIControlStateSelected rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setDividerImage:[UIImage imageNamed:@"SegmentedControlSelectedDivider.png"] forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                             [UIColor whiteColor], UITextAttributeTextColor,
                                                             [UIColor grayColor], UITextAttributeTextShadowColor,
                                                             [NSValue valueWithUIOffset:UIOffsetMake(0, -1)], UITextAttributeTextShadowOffset,
                                                             [UIFont fontWithName:@"Georgia-Italic" size:0.0], UITextAttributeFont,
                                                             nil] forState:UIControlStateNormal]; 
```

为什么这会导致速度如此缓慢？我可以做些什么来提高性能？当它们出现在屏幕上时，它会抖动。我以前从来没有遇到过这样的问题。

我相当确定它的开关和分段控件，因为当我移除它们时，它会加速并且变得如丝般顺滑。我基本上是这样做的：

```
if (indexPath.row == 0)
        {
            cell.textLabel.text = @"text";
            UISegmentedControl *segControl = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"1", @"2", nil]];
            [segControl setSelectedSegmentIndex:[myBool boolValue]];
            [segControl setSegmentedControlStyle:UISegmentedControlStyleBar];
            [segControl addTarget:self action:@selector(myMethod:) forControlEvents:UIControlEventValueChanged];
            cell.accessoryView = segControl;
        } 
```

在我的`cellForRowAtIndexPath`7 次中，我怎样才能让它更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:47:18.033

我有一个正在开发的应用程序，并且有一些类似的自定义设置。我建议重用设置控件...您可以通过创建 UITableViewCell 子类并在其中设置您的 seg 控件来完成此操作，然后您可以为需要自定义的内容创建插座。

快速搜索找到了这个教程，它看起来就像我在说什么

[UITableViewCell 原型教程](http://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_Build_Dynamic_TableViews_with_Prototype_Table_View_Cells)

这样，您的细胞将完全可重复使用，因此速度更快。

但是，我现在不知道您的确切用例，所以也许这不适用于您。它通过自定义按钮、艺术和动画加速了我的单元格。

请记住 alloc 初始化非常慢。

我想另一种选择是使用控件预先初始化所有可以使用的控件，并将它们存储在数组中，然后仅将它们加载到 cellForRowAtIndexPath 中：

# jquery - 无限滚动插件错误地检测高度

> ID：11650448
> 
> 赞同：0
> 
> 时间：2012-07-25T13:08:57.420
> 
> 标签：jquery, jquery-plugins, cross-browser, infinite-scroll

我的网站上有 Paul Irish 的无限滚动插件，它在一个页面上完美运行，但在另一个页面上却没有。在非工作页面上，它似乎检测到页面比实际高得多。在工作页面上，我收到调试消息，例如`["math:", 260, 110]`，在非工作页面上，我收到消息，例如`["math:", 807, 3154]`。有时它会跳到 4264，或者它会下降到 997，但它总是比工作页面上一致的 110 高得多。

我假设第一个坐标是窗口底部到文档底部的距离，第二个是容器底部到文档底部的距离。如果我的假设是正确的，那么脚本由于某种原因错误地检测到容器的底部。我还没有找到任何不匹配的 html 标签，不过欢迎您在[这里查看。](http://completeset.us/organizer/index/index)哪些情况可能会导致插件无法正确检测高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:29:27.550

问题是我在将无限滚动脚本应用于非工作页面之前隐藏了分页控件，导致它对高度感到困惑。将 hide 语句移动到 document.ready 以便无限滚动脚本可以准确评估页面的高度首先解决了问题。

我知道无限滚动脚本会自动隐藏分页控件，但直到第一次加载另一组项目后才会这样做。如果只有一页或第一页很短，例如如果您使用砖石并且用户有一个大屏幕，则分页控件将显示在他们的屏幕上，因此在这些情况下您可能需要隐藏手动控制。

# c++ - c++ 只允许某些参数放在 argv[1] 中

> ID：11650449
> 
> 赞同：-8
> 
> 时间：2012-07-25T13:09:01.070
> 
> 标签：c++, argv, argc

我试图编写一些代码，只允许在 argv[1] 参数中输入四个字母之一。如果它是另一个字符，字母 q 应该出现。

所以我写了

```
#include <iostream>
#include <cstdlib>

char D, A , R, B;

if(argv[1] != D||A||R||B)
{
  cout << "Q" << endl;
  return(0);
} 
```

谁能帮帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:12:47.290

这个`if(argv[1] != D||A||R||B)`

语法不正确

`D`, `A`, `R`, 并且`B`没有被初始化为任何东西！它们就是你所说的变量。

你也没有`main()`功能。您在这里遗漏了很多东西，但我会回答如何检查正确的`char`.

您可能会得到更好的服务`switch statement`：

```
switch (*argv[1])
{
    case 'D':
    case 'A':
    case 'R':
    case 'B':
       cout << "Not Q" << endl;
       break;
    case 'Q':
       cout << "We have a Q" << endl;
       break;
    default: 
       cout << "unknown char" << endl;
       break;
} 
```

我们可以在这里讨论很多其他内容，例如如何正确构建程序，或一般 C/C++ 问题，但这至少应该让您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:28:59.393

第三种选择是在 C++11 中：

```
#include <set>
#include <iostream>

int main(int argc, char** argv) {
  if (argc < 2)
    return 1;

  // here is the actual check:
  if (std::set<char>{'D','A','R','B'}.insert(argv[1][0]).second) {
    std::cout << "Q" << std::endl;
  } else {
    std::cout << "OK" << std::endl;
  }
  return 0;
} 
```

这使用一个包含所有值的临时集合和一个初始化列表来将所需的值放入集合中。然后它尝试`insert`将传递的值（即`argv[1][0]`）放入集合并检查它是否成功插入元素（访问`second`），然后它不是它，因此是“错误的”。

请注意，我们不必检查，`arvg[1][0]`因为每个数组至少有一个元素位于 position `0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:11:08.683

这在 C++ 中是不可能的。你必须

```
if (argv[1] != D && argv[1] != A && ...) 
```

通常最好检查实际有多少参数（尽管`argv[0]`并且`argv[1]`总是存在）。

此外，您缺少`main()`功能，因此甚至没有`char *argv[]`定义：

```
int main (int argc, char *argv[]) {
 ...
} 
```

# javascript - 输入框在Firefox中不起作用

> ID：11650451
> 
> 赞同：0
> 
> 时间：2012-07-25T13:09:12.923
> 
> 标签：javascript, firefox, input, onclick

当有人将单词放入输入框中并在单击时隐藏列表项时，我正在尝试使用基本过滤器，这在 chrome 中工作正常，但在 Firefox 中它根本不起作用。

html:

```
<form ACTION="#" id="navsform" class="my-search">
<input id="formwidth" type="text" name="query" placeholder="Search...">
<input type="submit" class="my-button" value="Search" onclick="query_searchvar()"></form> 
```

javascript:

```
function query_searchvar()
{
var searchquery=document.navsform.query.value.toLowerCase();
if(searchquery == '')
{alert("No Text Entered");
}
var queryarray = searchquery.split(/,|\s+/);

event.preventDefault();

$('li').each(function() {
  var searchtags = $(this).attr('data-searchtags');
  //alert(searchtags);
  var searcharray = searchtags.split(',');
//alert(searcharray);
var found = false;
for (var i=0; i<searcharray.length; i++)
    if ($.inArray(searcharray[i], queryarray)>-1) {
        found = true;
        break;
    }

if (found == true )
  {

 $(this).show("normal");
  }
else {
$(this).hide("normal");
}
});
} 
```

非常感谢任何帮助。谢谢你。

嗨，我设法通过您所有的评论和一些 jquery 资源的组合来解决这个问题： HTML：

```
<form id="myform" action="#" class="my-search">
  <input id="formwidth" type="text" name="query" placeholder="Search..." />
  <input class="my-button"  type="submit" value="Search" />
</form>

$('#myform').submit(function() {
var searchquery = String($('#myform input[name=query]').val()).toLowerCase();
  if (searchquery == '') {
  alert('No Text Entered');
  }
var queryarray = searchquery.split(/,|\s+/);
$('li').each(function() {
  var searchtags = $(this).attr('data-searchtags');
  var searcharray = searchtags.split(',');
var found = false;
for (var i = 0; i < searcharray.length; i++)
    if ($.inArray(searcharray[i], queryarray) > -1) {
        found = true;
        break;
    }

if (found == true) {

 $(this).show('normal');
  }
else {
$(this).hide('normal');
}

});
 return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:25:20.310

1.  document.navsform.query.value ???
2.  onclick="query_searchvar()" ???
3.  event.preventDefault ??? -- 缺少跨浏览器
4.  为什么使用点击而不是提交？
5.  缺少返回false？

为什么要使用它？

您已经在使用 jQuery，最好 100% 使用 Jquery？

```
<form ACTION="#" id="navsform" class="my-search">
<input id="formwidth" type="text" name="query" placeholder="Search...">
<input type="submit" class="my-button" value="Search"></form> 
```

Javascript：

```
$(document).ready(function(){
$("#navsform").submit(function(event){
event = event||window.event; //Cross
var searchquery=String($("#navsform input[name=query]").val()).toLowerCase();
if(searchquery == ''){
alert("No Text Entered");
}
var queryarray = searchquery.split(/,|\s+/);

event.preventDefault();

$('li').each(function(){
var searchtags = $(this).attr('data-searchtags');
//alert(searchtags);
var searcharray = searchtags.split(',');
//alert(searcharray);
var found = false;
for (var i=0; i<searcharray.length; i++){
if ($.inArray(searcharray[i], queryarray)>-1) {
    found = true;
    break;
}
}
if (found == true ){
$(this).show("normal");
} else {
$(this).hide("normal");
}
});
});
return false;//prevents sending the form, remove if necessary.
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:26:34.877

有几件事，你应该改变：

1.  将事件对象传递给处理函数。
2.  将事件处理程序附加到表单提交事件，而不是按钮。这样返回键就可以工作了。
3.  然后你应该使用像 Firebug、Dragonfly 或类似的工具。它有很大帮助。如评论中所述，您可能已经发现了错误。

有关示例，请参见 Guilherme Nascimento 的答案。（但忽略语气..）

# java - 如何在java中创建旋转圆圈动画？

> ID：11650454
> 
> 赞同：3
> 
> 时间：2012-07-25T13:09:27.730
> 
> 标签：java, swing, paintcomponent, paint

我想在中间创建一个旋转圆圈，`JPanel`并能够设置开始/停止旋转并设置为可见/不可见。

**有没有人知道如何做或任何现有的例子？**

```
private static class RotatingCirclePanel extends JPanel {        
    protected void paintComponent(Graphics g) {

    }                      
} 
```

**这是一个例子。**

![在此处输入图像描述](../Images/5e3196391dc6419082d56d57bd6a0b10.png)

**编辑：**这是第一个版本。任何机构都可以帮助制作 gif 示例吗？

```
public class ProgressWheelPanel extends JPanel {
private double angleInDegrees = 1;
private Timer rotatingTimer;

public ProgressWheelPanel() {
    rotatingTimer = new Timer(100, new ActionListener() {
        //            @Override
        public void actionPerformed(ActionEvent e) {
            angleInDegrees = angleInDegrees +1;
            if (angleInDegrees == 360) {
                angleInDegrees = 0;
            }
            repaint();
        }
    });
    rotatingTimer.setRepeats(false);
    rotatingTimer.start();
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g.create();

    rotatingTimer.stop();

    g2d.clearRect(0, 0, getWidth(), getHeight());
    g2d.setBackground(Color.white);
    g2d.setColor(Color.black);
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.3f));
    g2d.setStroke(new BasicStroke(10f, BasicStroke.CAP_ROUND, BasicStroke.JOIN_MITER));
    g2d.rotate(angleInDegrees * Math.PI / 180.0, getWidth() / 2, getHeight() / 2);
    g2d.drawLine(getWidth() / 2, getHeight() / 2, getWidth() / 2 + 100, getHeight() / 2);
    //**************************************************************************************
    AffineTransform transformer = new AffineTransform();
    transformer.translate(5,5);
    transformer.scale(2,2);
    g2d.getTransform().concatenate(transformer);
    //***************************************************************************************
    g2d.dispose();
    rotatingTimer.start();
}
public void start(){
    rotatingTimer.start();
}
public void stop(){
  rotatingTimer.stop();
}

public static void main(String[] args) {
    final ProgressWheelPanel demo = new ProgressWheelPanel();
    WebButton btnStrat= new WebButton("Start"),btnStop= new WebButton("Stop");
    btnStrat.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            demo.setVisible(true);
            demo.start();
        }
    });
    btnStop.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            demo.stop();
            demo.setVisible(false);
        }
    });
    JFrame frame = new JFrame();
    Container cp = frame.getContentPane();
    cp.add(demo,BorderLayout.CENTER);
    cp.add(btnStrat,BorderLayout.NORTH);
    cp.add(btnStop,BorderLayout.SOUTH);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(500, 500);
    frame.setLocation(500, 500);
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:16:19.210

[您可以简单地在JFrame](https://stackoverflow.com/questions/2935232/show-animated-gif-in-java)或[JPanel](https://stackoverflow.com/questions/4339029/display-animated-gif-on-jpanel) *上显示动画 GIF ，例如使用问题中显示的图像，然后设置包含图像的控件的可见/不可见属性。但是，这并没有给你一种方法（据我所知）在任何给定的时间点开始/停止动画。

如果您想要包括启动/停止在内的全部功能，您可能必须自己动手。在这种情况下，开始编码！当您遇到问题时，我们很乐意为您提供帮助，但我们不会为您编写代码。（但在你开始做这件事之前，问问自己：你真的需要，我的意思是*真的*需要启动/停止功能吗？如果你可以使用显示/隐藏，你已经到家了......）

* * *

*) 还有许多[其他](http://www.java-forums.org/java-2d/653-animation-animated-gif.html)关于[动画 gif](http://www.java-forums.org/java-2d/653-animation-animated-gif.html)的资源可能会派上用场。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T13:20:33.527

[这个答案](https://stackoverflow.com/questions/10055336/jtabbedpane-show-task-progress-in-a-tab/10055387#10055387)包含一个代码片段，用于基于图像创建这样的图标。它基本上使用代码来旋转图标，并`Timer`触发旋转以获得动画效果。

# c++ - QVariant userType() id

> ID：11650460
> 
> 赞同：0
> 
> 时间：2012-07-25T13:09:50.257
> 
> 标签：c++, qt

我的问题是指：

[如何验证 QVariant::UserType 类型的 QVariant 是预期类型？](https://stackoverflow.com/questions/3193275/how-to-verify-qvariant-of-type-qvariantusertype-is-expected-type)

具体来说，如果

```
struct MyType {
  ....
};

Q_DECLARE_METATYPE(MyType);

QVariant v(QVariant::fromValue(MyType()); 
```

有没有办法找出`v.userType()`在编译时会返回什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:46:26.437

没有办法在编译时找到它，因为它直到运行时才确定。你可以得到它`qMetaTypeId<MyType>()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:53:36.470

根据我的尝试，`userType()`您声明的索引将从 256 开始，然后增加 1。

因此，如果您使用`Q_DECLARE_METATYPE(someType);`，则此类型将`256`在`userType()`调用时返回。如果你这样做`Q_DECLARE_METATYPE(someOtherType);`，它将返回`257`等等。

此外，如果您需要在运行时检查它，您可以获取一次值，然后将其用于比较：

```
int MyTypeID = QVariant::fromValue(MyType()).userType(); 
if( someObject.userType == MyTypeID )
{
//do stuff
} 
```

您可能还想查看[qRegisterMetaType()](http://doc.qt.nokia.com/4.7-snapshot/qmetatype.html#qRegisterMetaType-2)函数。

# regex - Perl脚本，查找字符串的前半部分

> ID：11650468
> 
> 赞同：-5
> 
> 时间：2012-07-25T13:10:20.023
> 
> 标签：regex, string, perl

在 Perl 脚本中，我需要处理以下字符串：

```
426852  total 
```

该字符串将始终包含一个整数，后跟一些空格和单词 total。我需要去掉变量的字符串部分，只留下一个整数，以便稍后在脚本中进行比较。

实现这一目标的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:19:52.453

由于您不需要其余部分，因此只需找到前导数字就足够了：

```
$str =~ /^(\d+)/; 
```

`^`- 字符串开头，`\d`- 数字，`+`- 一个或多个。结果将在`$1`，由`()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:19:26.617

如果数字在开头，则可以保留字符串原样。Perl 可以处理在数字之后包含非数字内容的数字（不过会发出警告）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T13:39:16.387

不需要正则表达式，[`split`](http://perldoc.perl.org/functions/split.html)可以为您执行此操作：

```
my $string = '426852  total';
my $number = (split " ", $string)[0];
say $number; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:15:15.043

只需使用这样的正则表达式：

```
$string =~ /^(\d+)\s+\w+/;
$num = $1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T16:29:16.550

```
my @numbers = map { (split " ", $_)[0] } <DATA>;

print join "\n", @numbers;

__DATA__
126852  total
426852  total 
```

# devexpress - DevExpress 控件值得使用吗？

> ID：11650470
> 
> 赞同：1
> 
> 时间：2012-07-25T13:10:25.313
> 
> 标签：devexpress

在 Windows 窗体、wpf 等中使用 DevExpress 等第三方控件是否会增加/减少处理时间和内存消耗？

它们确实增加了开发的便利性。

与 Microsoft 提供的本机控件不同，它们的在线支持也很有限。

使用它们值得吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-13T14:00:36.927

基本上，您每年将获得四位数（或更少）的开发团队扩展，所以是的，这是值得的。

他们的控件在 CPU 和内存方面表现良好，它们易于使用并且看起来也不错。用户喜欢与他们合作。此外，他们的生产力工具是一流的。

您需要注意的一件事是[他们在异常处理方面的立场](https://www.devexpress.com/Support/Center/Question/Details/Q495211)。DevExpress 不相信[快速失败的](http://en.wikipedia.org/wiki/Fail-fast)开发，有时他们会隐藏异常——是的，即使是**你的代码**产生的异常——以“帮助”你使你的应用程序“稳定”。不幸的是（也是意料之中的），它产生的问题比它解决的问题多得多。

这是我对他们的一个大问题。如果不是因为这个，我会说它是最好的 3rd 方控制制造商。远射。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T13:20:15.383

只需考虑您将花费在创建自定义控件并使其工作上的时间，这已经由 n 供应商创建`DevExpress`，可以为您节省资金。

当涉及到他们自己的控制时，这一切都取决于您的需求。我发现`DevExpress`特别好。使用控件的易用性比它的竞争对手要好，但话又说回来，一个精心打磨的带有`C1`控件的开发人员会不同意。

对于报表设计器，C1 非常慢。Devexpress 在 WPF 中的设计师不是很好。非常马车。Infragistics 报告可以跨平台构建，这是必须具备的。

这一切都归结为您的特定需求。如果您有可用的资金，那么从长远来看，这将是一项不错的投资。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T13:15:35.733

我在工作中使用它们，并会全心全意地推荐它们。针对您的一些问题：

*   不，它们似乎没有内存问题，并且在处理大量数据时表现更好（我主要考虑 DataGrid 控件）
*   在线支持令人印象深刻——完整的 api 文档、大型社区论坛、付费支持论坛（我从来不需要使用）。就文档质量而言，它们接近 MSDN。

如果你有钱，我会亲自选择它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T21:20:50.780

我也在工作中使用 DevExpress 的 VCL。我对学习和使用它们的整个体验非常满意。我会重申其他帖子所说的话。我还要补充一点，DevExpress 有很多试用期，您可以在其中试用他们的整个产品，或者如果您知道自己在寻找什么，您可以请求试用特定的软件包。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-18T14:41:33.007

我之前使用过componentart，但是当我使用Devexpress时，我认为值得，你可以轻松快速地完成所有事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-23T02:34:48.180

在质量、功能、易用性和支持方面，我会说是的。

但是在许可方面存在巨大的烦恼。一张执照就是一张席位。构建服务器是灰色地带，当你的团队中的人需要加入时，它会变成一个突然的意外费用，通常会在 1 年后发生，因此你还必须重新购买自己的许可证（因为 1 年的限制加上版本更新和你不能买旧版本）。

# mysql - 无需记录即可观看最新的 mysql 查询

> ID：11650472
> 
> 赞同：0
> 
> 时间：2012-07-25T13:10:28.247
> 
> 标签：mysql

mysql 的命令行客户端是否允许我收听当前的查询？

所以我不需要打开日志记录并且可以检查查询的时间，我暂时对它感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:12:54.843

是的，使用用户登录 mysql，`root`然后执行以下查询：

```
SHOW FULL PROCESSLIST; 
```

您可以启用对文件的查询日志记录，然后使用`tail -f file_name`linux 命令查看当前查询。看[这里](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)

或者你也可以使用 linux 命令：

外壳>`watch -n1 'uptime ; mysql -u root -p'your_password' test -e"show full processlist"'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:42:37.763

假设您使用的是 MySQL 5.1.16 或更高版本，您可以临时启用通用查询日志并将其记录到表而不是文件中。然后，您可以从该表中进行选择以获取最新查询。

这是一个例子：

```
-- capture current state
SET @old_general_log = @@global.general_log;
SET @old_log_output = @@global.log_output;

-- set log output to table instead of file
set global log_output = 'TABLE';
-- enable the general log
set global general_log = 'ON';

-- get the latest query, excluding my session
select * 
from mysql.general_log
where thread_id != connection_id()
order by event_time desc
limit 1;

-- revert to previous state when done
set global general_log = @old_general_log;
set global log_output = @old_log_output; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:13:22.003

正如 MySQL[手册所说](http://dev.mysql.com/doc/refman/5.1/en/show-processlist.html)：

```
SHOW [FULL] PROCESSLIST; 
```

# visual-studio-2008 - 如何在VS2008中禁用我的DLL项目的注册DLL构建步骤？

> ID：11650482
> 
> 赞同：3
> 
> 时间：2012-07-25T13:11:09.847
> 
> 标签：visual-studio-2008

我收到此错误

```
error PRJ0050: Failed to register output.  Please try enabling Per-user Redirection or register the component from a command prompt with elevated permissions. 
```

我真的不需要将 DLL 注册为构建的一部分，我在哪里可以从项目配置中禁用该步骤？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T13:33:44.250

找到它，我需要将“链接器设置”->“注册输出”设置为 false。

# android - Android AlarmManager 和 DST/时区/时间变化？

> ID：11650486
> 
> 赞同：7
> 
> 时间：2012-07-25T13:11:22.763
> 
> 标签：android, timezone, alarmmanager, dst

我正在编写一个闹钟应用程序，我想知道当我在凌晨 2:59 使用 AlarmManager 设置一些闹钟时会发生什么（这不是我的闹钟时间，这只是我设置一些闹钟的时间)，并且在凌晨 3:00 时，时间将自动从夏令时更改为冬令时 (DST)。我的预定闹钟会发生什么情况？我在文档中一无所获，而且测试起来也不是那么容易，至少我必须更改日期并等待几个小时……我没那么耐心；）

下一个问题 - 我也很好奇，当用户更改时区时，我使用 AlarmManager 设置的闹钟会发生什么。幸运的是，这很容易测试，而且我发现 android 非常“智能”并且会自动重新安排警报。因此，当在我的时区例如 9:00 并且我在 10:00 设置闹钟，并在实际时间为 10:00 的情况下切换时区（+1 小时）时，android 将我的闹钟重新安排到 11:00，正如预期的那样。这很好，但是，我在文档中也没有找到任何东西......

谁有更多官方信息？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T13:19:21.893

`RTC`并`RTC_WAKEUP`用作`System.currentTimeMillis()`时基，它采用 UTC 时间，因此与时区变化、夏令时变化等无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T13:21:16.090

警报将仅取决于系统时间。闹钟不会受到夏令时的影响，只会改变系统时间。警报将根据系统时间和设备所在（或将要在）哪个区域

# java - Tomcat 和 JBoss 的 Maven JavaEE 6 依赖项

> ID：11650487
> 
> 赞同：1
> 
> 时间：2012-07-25T13:11:27.757
> 
> 标签：java, jakarta-ee, maven

哪个 JavaEE 6 maven 依赖项应该包含在要部署在 Tomcat 和 JBoss 上的 Web 应用程序中？两个都？

**雄猫：**

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

**老板：**

```
<dependency>
    <groupId>org.jboss.spec</groupId>
    <artifactId>jboss-javaee-6.0</artifactId>
    <version>1.0.0.Final</version>
    <type>pom</type>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:28:23.070

为 Java EE 6 实现提供了良好的依赖关系 javax/javaee-api/6.0。

因为 Tomcat 不是其中之一（假设您没有提到[TomEE](http://openejb.apache.org/apache-tomee.html)），所以将它与 Tomcat 一起使用会产生很大的误导。Tomcat 作为 servlet 容器确实只实现了 Java EE 6 的部分功能）。实际上，只要不使用 tomcat 不提供的这种功能，它就可以工作。

请注意，如果您将此依赖项中的任何类与单元测试一起使用，您将遇到问题。这些类仅在编译时可用。

# session - Express.js 会话在路由子集上激活

> ID：11650489
> 
> 赞同：3
> 
> 时间：2012-07-25T13:11:43.160
> 
> 标签：session, routes, express, connect

我正在使用 expressjs 并希望使用会话对用户进行身份验证以进行登录。站点/应用程序一方面应允许用户在允许缓存这些页面的无状态网页中浏览和调查不同的产品和信息，但另一方面应具有让用户登录和访问使用会话获取的不同内容的功能.

因此，对于我的路由子集，我希望激活会话状态，而对于补充子集（我的路由的其余部分），应该停用快速会话，从而允许缓存这些页面。

我怎样才能以干净的方式做到这一点？

假设我要激活会话的路由是“/kj%C3%B8p”、“/bibliotek”和“/register”。

我尝试了类似的东西

```
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');

  var pageName = 'somepage';
  var oneYear = 1000*60*60*24*365;
  app.use(express.bodyParser());
  app.use('/kj%C3%B8p', express.cookieParser());
  app.use('/kj%C3%B8p', express.session({key: pageName, secret: 'someCode', store: new RedisStore, cookie: {path:'/', maxAge: (5*oneYear), httpOnly: true}}));
  app.use('/bibliotek', express.cookieParser());
  app.use('/bibliotek', express.session({key: pageName, secret: 'someCode', store: new RedisStore, cookie: {path: '/', maxAge: (5*oneYear), httpOnly: true}}));
  app.use('/registrer', express.cookieParser());
  app.use('/registrer', express.session({key: pageName, secret: 'someCode', store: new RedisStore, cookie: {path:'/', maxAge: (5*oneYear), httpOnly: true}}));

  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));

}); 
```

但这会为三个路由中的每一个重新生成会话对象，并且看起来很混乱。有小费吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T13:36:48.330

您可以将中间件包装在一个函数中，以将某些 URL 列入黑名单或白名单。这是一个白名单示例：

```
function allow(paths, fn) {
  return function(req, res, next) {
    if (~paths.indexOf(req.url)) {
      return fn(req, res, next);
    }
    next();
  }
} 
```

你把它包裹在你的中间件上，比如：

```
app.use(allow(['/bibliotek', '/registrer'], express.cookieParser())); 
```

您也可以对其他中间件使用相同的技术。这是基于作者在 irc 中展示的[要点。](https://gist.github.com/3155979)

# android - Android：第二次启动时跳过用户详细信息输入页面

> ID：11650490
> 
> 赞同：0
> 
> 时间：2012-07-25T13:11:45.390
> 
> 标签：android, android-intent

我有三个活动，其中第一个活动是欢迎应用程序页面（SavingsGuiderSplashActivity），它将动画到第二个活动，它将询问用户名（SavingsGuiderUserActivity）。我使用共享偏好来存储用户名。然后单击提交按钮后，它将转到菜单页面（SavingsGuiderMenuActivity）。我在第二个页面中声明了检索首选项方法，因此当用户再次启动应用程序时，如果首选项包含用户名，它将直接转到主菜单活动页面，而不是要求输入用户名的第二个活动。我认为问题更多关注 SavingsGuiderSplashActivity 和 SavingsGuiderUserActivity。不过，我在菜单页面上显示名称没有问题。例如（“嗨，约翰”）。我试图制作这个，但不知何故，当我第二次启动应用程序时，它仍然会转到第二页。谁能告诉我我的代码有什么问题？

我的动画欢迎页面代码：

```
public class SavingsGuiderSplashActivity extends SavingsActivity {

EditText nameEdit;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    startAnimating();
}

private void startAnimating() {
    // Fade in top title
    TextView img1 = (TextView) findViewById(R.id.TextViewTopTitle);
    Animation fade1 = AnimationUtils.loadAnimation(this, R.anim.fade_in);
    img1.startAnimation(fade1);
    // Fade in bottom title after a built-in delay.
   TextView img2 = (TextView) findViewById(R.id.TextViewBottomTitle);

    Animation fade2 = AnimationUtils.loadAnimation(this, R.anim.fade_in2);
    img2.startAnimation(fade2);

    // Transition to Main Menu when bottom title finishes animating
    fade2.setAnimationListener(new AnimationListener() {
        public void onAnimationEnd(Animation animation) {

            // The animation has ended, transition to the Main Menu screen              

                 startActivity(new Intent(SavingsGuiderSplashActivity.this, SavingsGuiderUserActivity.class));
            SavingsGuiderSplashActivity.this.finish();
        }

    @Override
    public void onAnimationRepeat(Animation animation) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAnimationStart(Animation animation) {
        // TODO Auto-generated method stub

    }});

    // Load animations for all views within the TableLayout

    Animation spinin = AnimationUtils.loadAnimation(this, R.anim.custom_anim);
    LayoutAnimationController controller = new LayoutAnimationController(spinin);
    TableLayout table = (TableLayout) findViewById(R.id.tableLayout1);
    for (int i = 0; i < table.getChildCount(); i++) {
        TableRow row = (TableRow) table.getChildAt(i);
        row.setLayoutAnimation(controller);

    }
}

        @Override
        protected void onPause() {
            super.onPause();
            // Stop the animation
            TextView img1 = (TextView) findViewById(R.id.TextViewTopTitle);
            img1.clearAnimation();
            TextView img2 = (TextView) findViewById(R.id.TextViewBottomTitle);
            img2.clearAnimation();

            TableLayout table = (TableLayout) findViewById(R.id.tableLayout1);
            for (int i = 0; i < table.getChildCount(); i++) {
                TableRow row = (TableRow) table.getChildAt(i);
                row.clearAnimation();

        }
        }

        @Override
        protected void onResume() {
            super.onResume();

            // Start animating at the beginning 
            startAnimating();

        } 
```

}

我的用户活动页面在这里：

```
public class SavingsGuiderUserActivity extends SavingsActivity {
 /** Called when the activity is first created. */

    String tag = "SavingsGuiderActivity";
    EditText nameEdit;
    Toast toast;        

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);  
    retrievePreferences();
    setContentView(R.layout.user);        

    Button submitBtn = (Button)findViewById(R.id.btn_submit);
    nameEdit=(EditText)findViewById(R.id.edit_name);

    submitBtn.setOnClickListener(new View.OnClickListener() {           
        public void onClick(View v) {
                String txt = nameEdit.getText().toString();                  

                //validate the editText
                if (!txt.equals("")) {                      
                Intent intent = new Intent(SavingsGuiderUserActivity.this, SavingsGuiderMenuActivity.class);
                Bundle extras = new Bundle();
                extras.putString("name",txt);
                intent.putExtras(extras);
                saveAsPreferences();
                startActivity(intent);

                } 
                else {
                    Context context = getApplicationContext();
                    CharSequence text = "Please enter your name!";
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show();
                }                   

        }
    });

}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Log.d(tag, "In the onDestroy() event");
}
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

    Log.d(tag, "In the onPause() event");
}
@Override
protected void onRestart() {
    // TODO Auto-generated method stub
    super.onRestart();
    Log.d(tag, "In the onRestart() event");
    retrievePreferences();
}
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();       
    Log.d(tag, "In the onResume() event");
    retrievePreferences();
}
@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    Log.d(tag, "In the onStart() event");
    retrievePreferences();
}
@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
    Log.d(tag, "In the onStop() event");
}
public void saveAsPreferences(){
String nameString = nameEdit.getText().toString();
SharedPreferences prefs = getSharedPreferences("preferences", MODE_PRIVATE);
SharedPreferences.Editor editor = prefs.edit();
editor.putString("name", nameString);
}
public void retrievePreferences(){
SharedPreferences prefs = getSharedPreferences("preferences",MODE_PRIVATE);
if(prefs.contains("name")){
String nameString = prefs.getString("name", "");
nameEdit.setText(nameString);
Intent intent = new Intent(SavingsGuiderUserActivity.this, SavingsGuiderMenuActivity.class);
Bundle extras = new Bundle();
intent.putExtras(extras);
startActivity(intent);
}

} 
```

}

我的菜单页面在这里：

```
public class SavingsGuiderMenuActivity extends SavingsActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);

    Bundle bundle = getIntent().getExtras();
    String name= bundle.getString("name"); 
```

TextView resultView = (TextView)findViewById(R.id.view_Name);

```
 resultView.setText("Welcome " + name);

    ListView menuList = (ListView) findViewById(R.id.ListView_Menu);
    String[] items = { getResources().getString(R.string.start),
            getResources().getString(R.string.about),
            getResources().getString(R.string.help) };
    ArrayAdapter<String> adapt = new ArrayAdapter<String>(this, R.layout.menu_item, items);
    menuList.setAdapter(adapt);
    menuList.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View itemClicked, int position, long id) {
            // Note: if the list was built "by hand" the id could be used.
            // As-is, though, each item has the same id
            TextView textView = (TextView) itemClicked;
            String strText = textView.getText().toString();
            if (strText.equalsIgnoreCase(getResources().getString(R.string.start))) {
                // Launch the Game Activity
                startActivity(new Intent(SavingsGuiderMenuActivity.this, SavingsGuiderAppActivity.class));
            } else if (strText.equalsIgnoreCase(getResources().getString(R.string.help))) {
                // Launch the Help Activity
                startActivity(new Intent(SavingsGuiderMenuActivity.this, SavingsGuiderHelpActivity.class));
            } else if (strText.equalsIgnoreCase(getResources().getString(R.string.about))) {
                // Launch the Settings Activity
                startActivity(new Intent(SavingsGuiderMenuActivity.this, SavingsGuiderAboutActivity.class));
            } 
        }
    });
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:32:32.923

尝试在第一页本身（即 SavingsGuiderSplashActivity）中检索您的首选项，并查看用户名是否存在。使用以下功能

```
public boolean usernameExists()
{
SharedPreferences prefs = getSharedPreferences("preferences",MODE_PRIVATE);
if(prefs.contains("name"))
{
return true;
}
else
{
return false;
}
} 
```

等等，我会为你更改 SavingsGuiderSplashActivity 代码

```
public class SavingsGuiderSplashActivity extends SavingsActivity {

EditText nameEdit;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.splash);
startAnimating();
}

 private void startAnimating() {
// Fade in top title
TextView img1 = (TextView) findViewById(R.id.TextViewTopTitle);
Animation fade1 = AnimationUtils.loadAnimation(this, R.anim.fade_in);
img1.startAnimation(fade1);
// Fade in bottom title after a built-in delay.
TextView img2 = (TextView) findViewById(R.id.TextViewBottomTitle);

Animation fade2 = AnimationUtils.loadAnimation(this, R.anim.fade_in2);
img2.startAnimation(fade2);

// Transition to Main Menu when bottom title finishes animating
fade2.setAnimationListener(new AnimationListener() {
    public void onAnimationEnd(Animation animation) {

        // The animation has ended, transition to the Main Menu screen              

         if(!usernameExists())
         {
             startActivity(new Intent(SavingsGuiderSplashActivity.this, SavingsGuiderUserActivity.class));
         }
          else
          {
             startActivity(new Intent(SavingsGuiderSplashActivity.this, SavingsGuiderMenuActivity.class));
          }
        SavingsGuiderSplashActivity.this.finish();
    }

public boolean usernameExists()
{
SharedPreferences prefs = getSharedPreferences("preferences",MODE_PRIVATE);
if(prefs.contains("name"))
{
return true;
}
else
{
return false;
}
} 

@Override
public void onAnimationRepeat(Animation animation) {
    // TODO Auto-generated method stub

}

@Override
public void onAnimationStart(Animation animation) {
    // TODO Auto-generated method stub

}});

// Load animations for all views within the TableLayout

Animation spinin = AnimationUtils.loadAnimation(this, R.anim.custom_anim);
LayoutAnimationController controller = new LayoutAnimationController(spinin);
TableLayout table = (TableLayout) findViewById(R.id.tableLayout1);
for (int i = 0; i < table.getChildCount(); i++) {
    TableRow row = (TableRow) table.getChildAt(i);
    row.setLayoutAnimation(controller);

 }
}

    @Override
    protected void onPause() {
        super.onPause();
        // Stop the animation
        TextView img1 = (TextView) findViewById(R.id.TextViewTopTitle);
        img1.clearAnimation();
        TextView img2 = (TextView) findViewById(R.id.TextViewBottomTitle);
        img2.clearAnimation();

        TableLayout table = (TableLayout) findViewById(R.id.tableLayout1);
        for (int i = 0; i < table.getChildCount(); i++) {
            TableRow row = (TableRow) table.getChildAt(i);
            row.clearAnimation();

    }
    }

    @Override
    protected void onResume() {
        super.onResume();

        // Start animating at the beginning 
        startAnimating();

    } 
```

这应该解决它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:23:23.683

如果您有用户名，请在检索首选项的底部尝试输入：

```
this.finish(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:24:26.790

如果我理解正确，第二次你想直接从**SavingsGuiderSplashActivity** --> **SavingsGuiderMenuActivity**移动，跳过**SavingsGuiderUserActivity**。如果这是真的，那么在您的**SavingsGuiderSplashActivity 的**onAnimationEnd 方法中，您需要检查是否设置了首选项值，并且基于该值您需要启动适当的活动，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T03:34:27.743

所以这就是我的老师教我让 amy 应用程序运行的方法！

用户活动页面

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.user);        

    Button submitBtn = (Button)findViewById(R.id.btn_submit);
    nameEdit=(EditText)findViewById(R.id.edit_name);

    submitBtn.setOnClickListener(new View.OnClickListener() {           
        public void onClick(View v) {
                String txt = nameEdit.getText().toString();                  

                //validate the editText
                if (!txt.equals("")) {                      
                Intent intent = new Intent(SavingsGuiderUserActivity.this, SavingsGuiderMenuActivity.class);
                Bundle extras = new Bundle();
                extras.putString("name",txt);
                intent.putExtras(extras);
                saveAsPreferences();
                startActivity(intent);

                } 
                else {
                    Context context = getApplicationContext();
                    CharSequence text = "Please enter your name!";
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show();
                }                   

        }
    });

}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Log.d(tag, "In the onDestroy() event");
}
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

    Log.d(tag, "In the onPause() event");
}
@Override
protected void onRestart() {
    // TODO Auto-generated method stub
    super.onRestart();
    Log.d(tag, "In the onRestart() event");
}
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();       
    Log.d(tag, "In the onResume() event");
}
@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    Log.d(tag, "In the onStart() event");
}
@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
    Log.d(tag, "In the onStop() event");
}
public void saveAsPreferences(){
String nameString = nameEdit.getText().toString();
SharedPreferences prefs = getSharedPreferences("preferences", MODE_PRIVATE);
SharedPreferences.Editor editor = prefs.edit();
editor.clear();
editor.putString("name", nameString);
editor.commit();
}
} 
```

飞溅活动：

```
public void onAnimationEnd(Animation animation) {

            // The animation has ended, transition to the Main Menu screen
            if(!usernameExists())
            {
                startActivity(new Intent(SavingsGuiderSplashActivity.this, SavingsGuiderUserActivity.class));
            }
             else
             {
                Intent intent = new Intent(SavingsGuiderSplashActivity.this, SavingsGuiderMenuActivity.class);
                Bundle extras = new Bundle();
                extras.putString("name",strName);
                intent.putExtras(extras);
                startActivity(intent);                 
             }
           SavingsGuiderSplashActivity.this.finish();
       }

   public boolean usernameExists()
   {
   SharedPreferences prefs = getSharedPreferences("preferences",MODE_PRIVATE);
   if(prefs.contains("name"))
   {
       strName = prefs.getString("name", null);
   return true;
   }
   else
   {
   return false;
   }
   } 
```

# jquery - 自定义表单字段类型嵌入表单 Symfony2

> ID：11650491
> 
> 赞同：0
> 
> 时间：2012-07-25T13:11:49.680
> 
> 标签：jquery, symfony, twig

我有三个实体：

*   饮食、菜单和膳食
*   饮食有一组菜单，
*   菜单有一组餐点。

所以我必须为Diet 创建一个嵌入式表单。

我遵循 Symfony2 的嵌入式形式的文档，但这并不是那么简单。

好的。我首先需要的是：

*   每种饮食形式都需要有两个菜单。
*   每种形式的菜单都需要三餐。（我不知道这是否可能）。

我可以在控制器中执行此操作并发送到树枝。但问题是当我“允许添加”时，动态添加表单。

那就是问题所在：

![在此处输入图像描述](../Images/e5742d43de6725a62964a42445492c1f.png)

编码：

```
class DietType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('calories')
            ->add('menus', 'collection', array('type' => new MenuType(),
            'allow_add' => true, 'by_reference' => false, 'prototype' => true   
        ));
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Project\FoodBundle\Entity\Diet',
            );
    }

    public function getName()
    {
        return 'diet';
    }
}

class MenuType extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('description')
            ->add('meals', 'collection', array('type' => new MealType(),
                           'allow_add' => true, 'by_reference' => false,
                           'prototype' => true
                 ));
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Project\FoodBundle\Entity\Menu',
        );
    }

    public function getName()
    {
        return 'menu';
    }
}

class MealType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('name');
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Project\FoodBundle\Entity\Meal',
        );
    }

    public function getName()
    {
        return 'meal';
    }
} 
```

和树枝模板：

```
{% extends '::base.html.twig' %}

{% block body %}

<h1>Diet creation</h1>

<form action="{{ path('diet_create') }}" method="post" {{ form_enctype(form) }}>

    {{ form_row(form.calories) }}

        <div id = "menus" data-prototype="{{ form_widget(form.menus.vars.prototype)|e }}">

        <h3>Menus</h3>
        {% for menu in form.menus %}
        <ul class="menu">
               {{ _self.prototype(menu)  }}
        </ul>
        {% endfor %}

        {% macro prototype(menu) %}
        {{ form_row(menu.description) }}
        <li class="meal">
            {% for meal in menu.meals %}
                {{ form_row(meal.name) }}
            {% endfor %}
        </li>
        {% endmacro %}
    </div>

    <p>
        <button type="submit">Save</button>
    </p>
</form>

<script>

var collectionHolder = $('#menus');

var $addMenuLink = $('<a href="#" class="add_menu_link">Add menu</a>');
var $newLinkMenuLi = $('<li></li>').append($addMenuLink);

$(document).ready(function(){

    $('#menus').append($newLinkMenuLi);

    $.each($('ul.menu'), function(){
        $(this).append('<a href="#"> Add meal </a>');
    });

    $addMenuLink.click( function(e) {
        // prevent the link from creating a "#" on the URL
        e.preventDefault();

        // add a new menu form (see next code block)
        addMenuForm(collectionHolder, $newLinkMenuLi);
    });

    function addMenuForm(collectionHolder, $newLinkMenuLi){
        // Get the data-prototype we explained earlier
        var prototype = collectionHolder.attr('data-prototype');

        // Replace '$$name$$' in the prototype's HTML to
        // instead be a number based on the current collection's length.
        var newForm = prototype.replace(/\$\$name\$\$/g, collectionHolder.children().length);

        // Display the form in the page in an li, before the "Add a menu" link li
        var $newFormLi = $('<li></li>').append(newForm);
        $newLinkMenuLi.before($newFormLi);
    }

});

</script>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:36:39.257

关于验证，尝试在您的饮食和菜单实体上添加[验证器回调](http://symfony.com/doc/current/reference/constraints/Callback.html)，它应该没问题:)

现在对于表单主题，您可以查看[表单主题文档](http://symfony.com/doc/current/cookbook/form/form_customization.html)

# spring - 触发请求时出现 GWT RequestFactory 错误：org.springframework.beans.factory.NoSuchBeanDefinitionException

> ID：11650494
> 
> 赞同：0
> 
> 时间：2012-07-25T13:12:01.617
> 
> 标签：spring, gwt, maven, requestfactory

我有一个 maven+spring+gwt 项目，我想在其中使用请求工厂。我只是不知道为什么我会得到这个例外。

请求工厂：

```
 public interface StarRequestFactory extends RequestFactory {

@Service(value = RaduService.class, locator = GWTServiceLocator.class)
public interface RaduRequestContext extends RequestContext {
       Request<Void> save( );
    }

RaduRequestContext raduRequestcontext();
} 
```

服务 ：

```
public class RaduService {

  public void save(){
    System.out.println("You have saved.");
  }

} 
```

定位器：

```
public class GWTServiceLocator implements ServiceLocator,
    ApplicationContextAware {
  private ApplicationContext context;

  @Override
  public Object getInstance(Class<?> clazz) {
    return context.getBean(clazz);
  }

  @Override
  public void setApplicationContext(ApplicationContext context)
        throws BeansException {
    this.context = context;
  }

} 
```

在我的入口点类中，我提出了请求：

```
requestFactory.raduRequestcontext().save().fire(new Receiver<Void>() {

        @Override
        public void onSuccess(Void response) {
            System.out.println("Success");

        }
    }); 
```

在此请求中，我收到以下错误：

[错误] Iul 25, 2012 3:35:36 PM com.google.web.bindery.requestfactory.server.RequestFactoryServlet doPost [错误] 严重：意外错误 [错误] org.springframework.beans.factory.NoSuchBeanDefinitionException：没有唯一的 bean [com.base.star.shared.services.StarRequestFactory$RaduRequestContext] 类型的定义：预期单个 bean，但在 org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:269 找到 0:[错误] ) [错误] 在 org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1083) [错误] 在 com.base.star.server.integration.GWTServiceLocator.getInstance(GWTServiceLocator.java:25) [错误]在 com.base.star.server.integration.GWTServiceLayerDecorator.createServiceInstance(GWTServiceLayerDecorator.java:43) [错误] 在太阳。reflect.NativeMethodAccessorImpl.invoke0(Native Method) [ERROR] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [ERROR] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [ERROR] at java .lang.reflect.Method.invoke(Method.java:601) [ERROR] at com.google.web.bindery.requestfactory.server.ServiceLayerCache.getOrCache(ServiceLayerCache.java:233) [ERROR] at com.google.web .bindery.requestfactory.server.ServiceLayerCache.createServiceInstance(ServiceLayerCache.java:117) [错误] 在 com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.processInvocationMessages(SimpleRequestProcessor.java:451) [错误] 在 com.google .web.bindery.requestfactory.server.SimpleRequestProcessor.process(SimpleRequestProcessor.java:225) [错误] 在 com.google.web。bindery.requestfactory.server.SimpleRequestProcessor.process(SimpleRequestProcessor.java:127) .................... ………………………………………………………………………………

有谁知道这是怎么回事？

如果需要，我可以发布 pom。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:21:00.973

似乎是一个弹簧错误：

您是否在 ApplicationContext.xml 文件中注释或将`RaduService`其`@Service`定义为 bean？

# c# - 如何在窗口控制台应用程序中调用非静态方法

> ID：11650497
> 
> 赞同：1
> 
> 时间：2012-07-25T13:12:20.367
> 
> 标签：c#

我构建了一个控制台应用程序，并尝试测试我的应用程序是否按预期工作。
我创建了一个 API 类的实例，如下面的代码所示，但我收到一个错误：
`An object reference is required for the non-static field.`我已经检查过类似的问题，[但](http://www.codeproject.com/Questions/177586/An-object-reference-is-required-for-the-non-static/)它似乎有所不同。我究竟做错了什么？

```
namespace ConsoleApplication1
{
    class Api
    {

        String ConStr = "SERVER=myservername; Database=mydb; UID=mylogin; PWD=mypassword;encrypt=no;enlist=false";
        String bin_Num = "201284-11-000";
        Label lblResults;

        static void Main(string[] args)
        {
            Api Test_api = new Api();
            Test_api.getQualWeight(ConStr, bin_Num, lblResults);
        }

        public Dictionary<String, String> getQualWeight(String sqlConStr, String inBin, Label lblResults)
        {
            Dictionary<String, String> qualList = new Dictionary<string, string>();
            string selectSQL = "select Name,qual_weight from Qualification_type "
                             + "where ID in (select Qualification_ID from Qualifications where BIN = @inBin)";
            con = getConn(sqlConStr);
            SqlCommand cmd = new SqlCommand(selectSQL, con);
            cmd.Parameters.AddWithValue("@inBin", inBin);
            SqlDataReader reader;

            try
            {
                con.Open();
                reader = cmd.ExecuteReader();
                while (reader.Read())
                {
                    qualList.Add(reader[0].ToString(), reader[1].ToString());
                }
                reader.Close();
                return qualList;
            }
            catch (Exception err)
            {
                lblResults.Text = "error fetching qualification weight " + err.Message;
                return null;
            }
            finally
            {
                con.Close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T13:15:32.657

如果你想使用一个`Object`并且不是所有成员都是静态的，你需要使用类的实例来引用非静态成员变量。

改变：

```
Test_api.getQualWeight(ConStr, bin_Num, lblResults); 
```

到：

```
Test_api.getQualWeight(Test_api.ConStr, Test_api.bin_Num, Test_api.lblResults); 
```

因为`ConStr`,`bin_Num`和`lblResults`是*实例*变量，所以它们必须是类实例的引用——在这种情况下`Test_api`。

或者，您可以通过更改它们的声明将这些值移动到全局静态范围：

```
String ConStr = "SERVER=myservername; Database=mydb; UID=mylogin; PWD=mypassword;encrypt=no;enlist=false";
String bin_Num = "201284-11-000";
Label lblResults; 
```

对此：

```
static String ConStr = "SERVER=myservername; Database=mydb; UID=mylogin; PWD=mypassword;encrypt=no;enlist=false";
static String bin_Num = "201284-11-000";
static Label lblResults; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:15:35.030

您已将传递给函数调用的成员声明为实例变量，但您正试图从静态`Main`方法的范围内访问它们。这是不可能的，因为静态`Main`方法无法访问成员变量。

要么也声明它们`static`，要么使用`Test_API.ConStr`例如作为方法的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:19:43.370

您必须将 ConStr、bin_Num 和 lblResults 标记为静态。

```
static String ConStr = "SERVER=myservername; Database=mydb; UID=mylogin; PWD=mypassword;encrypt=no;enlist=false";
static    String bin_Num = "201284-11-000";
static    Label lblResults; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T13:14:08.133

更改您的方法签名如下

```
public static Dictionary<String, String> getQualWeight(String sqlConStr, String inBin, Label lblResults) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-25T13:15:00.503

```
 public static Dictionary<String, String> getQualWeight 
```

将 static 关键字放在方法的声明中。

# random - 随机 Microsoft.AnalysisServices.AdomdClient.AdomdConnectionException

> ID：11650506
> 
> 赞同：2
> 
> 时间：2012-07-25T13:12:51.100
> 
> 标签：random, connection, ssas, cube, adomd.net

我遇到了与 SSAS 的 AdomdConnection 的问题。它在 99% 的情况下都能正常工作，但有时我会收到以下错误：

```
2012-07-25 09:58:47.5286|ERROR|BI.AdoMD.CubeConnectionAttribute|Microsoft.AnalysisServices.AdomdClient.AdomdConnectionException: A connection cannot be made. Ensure that the server is running. ---> System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond
at System.Net.Sockets.TcpClient..ctor(String hostname, Int32 port)
at Microsoft.AnalysisServices.AdomdClient.XmlaClient.GetTcpClient(ConnectionInfo   connectionInfo)
--- End of inner exception stack trace ---
at Microsoft.AnalysisServices.AdomdClient.XmlaClient.GetTcpClient(ConnectionInfo connectionInfo)
at Microsoft.AnalysisServices.AdomdClient.XmlaClient.OpenTcpConnection(ConnectionInfo connectionInfo)
at Microsoft.AnalysisServices.AdomdClient.XmlaClient.Connect(ConnectionInfo connectionInfo, Boolean beginSession)
at Microsoft.AnalysisServices.AdomdClient.AdomdConnection.XmlaClientProvider.Connect(Boolean toIXMLA)
at Microsoft.AnalysisServices.AdomdClient.AdomdConnection.ConnectToXMLA(Boolean createSession, Boolean isHTTP)
at Microsoft.AnalysisServices.AdomdClient.AdomdConnection.Open()
at BI.AdoMD.CubeConnectionAttribute.OnActionExecuting(ActionExecutingContext filterContext) in . 
```

我似乎无法弄清楚是什么导致了这个问题。

我检查了运行 SSAS 的服务器，看起来它没有身份验证/防火墙问题。

希望有人以前遇到过这个问题并且知道是什么导致了这些随机连接问题。

-瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:30:57.163

您尝试连接到目标计算机上的 TCP 端口时遇到超时。

> 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机在 System.Net.Sockets.TcpClient..ctor(String hostname, Int32 port) 没有响应

这可能是服务器的暂时加载问题，或者偶尔会出现一些网络问题。无论哪种方式，它都不一定与 SSAS 直接相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:56:20.573

根据上面 Nat 的回答，当多维数据集处于负载状态时，我偶尔会看到这种情况——它似乎对传入的请求进行了“排队”。多维数据集是否有可能同时受到大量查询或一些繁重的查询？这是否发生在多维数据集处理时间上/前后？

当我诊断出类似的情况时，我发现在 Perfmon 中为连接和查询设置计数器，并将其设置为将它们写入磁盘以供以后交叉检查是非常宝贵的。

# linux - 最佳轻量级响应式 GUI 框架 Linux

> ID：11650510
> 
> 赞同：5
> 
> 时间：2012-07-25T13:12:59.197
> 
> 标签：linux, user-interface, x11

我买了一个 Raspberry Pi，它有一个 300 Mhz CPU，但它确实有一个相当不错的 GPU。它甚至可以运行 XBMC。我想为它编写一个 GUI，它需要响应迅速且美观，同时充分利用可用的硬件（不幸的是，这不太好......）。Raspberry Pi 运行 Debian 最低限度，我已经在上面安装了 X Windowing System，其余的由我来编写代码。

深入研究此问题的最佳方法是什么？我已经研究过 HTML5 和 jQuery（通过 Python 和 PyWebkit），但它们似乎过于占用 CPU（除非有人知道如何让 (Py)WebKit 使用 GPU，而不是 CPU）。

为避免混淆，该系统将连接到电视等设备上，主要用于家庭娱乐。我不希望这是一个桌面或类似桌面的系统，我只想知道你们认为什么可以在 Raspberry Pi 盒子上顺利运行，以便我可以在该框架上编写我的 UI。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T04:41:36.270

在动力不足的硬件 (litl.com) 上完成了自定义非桌面 UI 并在 GTK 和 Clutter 上进行了相当多的攻击后，我会稍微重新构建这个问题。

主要问题是你必须使用 GPU 而不是“轻量级”——通常当有人说它是轻量级时，这只是意味着它没有很多功能或其他东西。一个词太模糊了。关键是GPU。

使用 GPU 的难点在于驱动程序是否正常工作。我不知道树莓派的人们在这里关注什么。一般来说，对于 ARM 来说，获得工作驱动程序最可靠的方法可能是使用 Android。也许不是普通的 Android UI，而是他们的驱动程序和基本框架，然后替换 UI。

X11 驱动程序（如果存在）通常在 ARM 上被破坏。这是 X 的真正问题，而不是轻量级与重量级。通过损坏，我的意思是驱动程序可能有点启动并运行桌面，但在重要情况下它很慢或缺少硬件视频解码等内容。

简短的回答：使用具有最佳 3D 驱动程序的框架（和窗口系统）来支持您需要的功能，例如视频解码。同样，我没有看过树莓派，但我敢打赌只有一两个选择符合这个标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:20:12.063

如果您自己编写 GUI，那么“好看”就取决于您的设计技巧。没有您的帮助，任何 UI 框架都无法创建“好看”的 UI。

而且我真的无法在一顶帽子下获得“X11”和“轻量级”。如果您真的需要一些完全不会妨碍您的东西，请查看像[SDL](http://www.libsdl.org/)这样的游戏框架。

如果您希望为您完成大部分工作，那么您需要付出代价，而代价是以绩效的形式出现的。在这种情况下，我建议 X11 + [Qt](https://qt.nokia.com/products/)。Qt 不是目前最轻量级的 UI 框架，但它是大多数人最有生产力的框架，它确实努力对硬件友好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:26:37.257

取决于您实际需要 ui 的用途。

如果您想插入显示器并拥有丰富的 UI - X11+LXDE 可能是最轻的组合（或稍重的 Xfce） - 并且您拥有标准桌面

如果您想远程访问它以执行特定任务 - 可能 apache/php 网站会为您工作。

如果您想创建 ya-window-manager 但没有 X - SDL 可能会这样做。但由于非标准 wm，它只会运行您的 UI 应用程序。

# php - 事件数组 javascript

> ID：11650512
> 
> 赞同：0
> 
> 时间：2012-07-25T13:13:09.740
> 
> 标签：php, javascript, html

我有一个 Javascript 数组，如下所示：

```
var fruits=['apple','orange','peach','strawberry','mango'] 
```

我想在这些元素上添加一个事件，这些元素会给我的数据库带来多样性。例如“苹果”会给我

```
<div class="apple">golden</div>
<div class="apple">granny</div>
<div class="apple">canada</div> 
```

此外，我的数据库中没有关于芒果品种的任何信息，我想从数组的其余部分中突出显示“芒果”。我已经创建了这样的类：

```
.black {
    color: black;
    pointer-events: none;
    cursor: default;
}

.couleur {
    color: blue;
} 
```

我必须添加 HTML 代码吗？感谢您的帮助，这只是我在 stackoverflow 上的第二篇文章，对于奇怪的代码示例感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:48:05.380

好的，因为这是您的第二篇文章，我假设您对 Web 开发比较陌生。欢迎！

你的问题不是很清楚你想要发生什么，所以我首先假设简单：我们将创建一个 onclick 事件，对 php 脚本进行 AJAX 调用（你标记了 php，所以我假设你'重新编写 php 脚本），然后将结果显示在页面上的动态 div 中。

我将使用一些替代样式的 php 脚本，所以当你看到时不要害怕

```
if ($something):
    // do something
else:
    // do something else
endif; 
```

首先，让我们设置我们的元素：

```
<?php
// Assume we already have the fruit categories stored in an array, $categories
// Display each fruit category on the page
foreach ($categories as $category) :
?>
    <div class='category' id='<?=$category?>'><?=$category?></div>

<?php
endforeach;
?>
<!-- empty placeholder div - this is where our results will go -->
<div id='results'></div> 
```

这将显示我们希望在页面上启动的所有元素。如果您想根据*类别*类设置这些元素的样式，请继续。

接下来我们需要编写一些 javascript 来确定 onClick 行为。为此，我们可以使用直接的 javascript，或者我们可以使用 jQuery（这在今天非常流行 - 阅读它，并不难掌握）。

```
<script type='text/javascript' language='javascript'>
    $('.category').click(function() {
        // grab the category (based on the id of the element) and send it to our background page
        var category = $(this).id();
        $.post('backgroundScript.php', 
            {
                type: category
            }, 
            function(data) {
                // print the results inside the #results div
                $('#results').html(data);
            }
        );
    });        
</script> 
```

最后，我们需要一个后台脚本来处理我们的数据并返回我们的结果。

```
<?php
//backgroundScript.php

$type = $_POST['type'];

// pass $type in to the database and perform some joins to get the subcategories in an array,
// then present a list of subcategories
$subcategories = findSubCategoriesInDB($type);

if (count($subcategories)) {
    echo "<ul>";
    foreach ($subcategories as $subcat) {
        echo "<li>" . $subcat . "</li>";
    }
    echo "</ul>";
} else {
    echo "No subcategories were found for " . $type;
} 
```

# java - 运行 JIRA Jelly 脚本的 Java 代码

> ID：11650514
> 
> 赞同：0
> 
> 时间：2012-07-25T13:13:14.280
> 
> 标签：java, jira, jelly

这是我在 Jira 4.2 中执行 IssueLinking 的 Jelly 脚本......当尝试直接在 Jira4.2 中运行时，这可以正常工作。

```
 <JiraJelly xmlns:jira="jelly:com.atlassian.jira.jelly.JiraTagLib">
    <jira:Login username="jiraloginname" password="jirapwd">
    <jira:LinkIssue key="issuekey1" linkKey="issuekey2" linkDesc="duplicates"/>
    </jira:Login>
    </JiraJelly> 
```

这是我调用 JellyScript 并执行的 Java 代码。但这会引发一些异常。

```
 JellyContext context = new JellyContext();
    Writer objWriter = new StringWriter();
    XMLWriter xmlWriter = new XMLWriter(objWriter);
    XMLOutput objOut = XMLOutput.createXMLOutput(objWriter);
    context.runScript("IssueLinking-Jelly.jelly", objOut); 
```

执行此代码时，将捕获以下异常。

```
org.apache.commons.jelly.JellyTagException: <jira:Login> com.atlassian.jira.jelly.tag.login.Login doesn't have any satisfiable constructors. Unsatisfiable dependencies: [[interface com.atlassian.jira.security.JiraAuthenticationContext]]
Caused by: org.picocontainer.defaults.UnsatisfiableDependenciesException: com.atlassian.jira.jelly.tag.login.Login doesn't have any satisfiable constructors. Unsatisfiable dependencies: [[interface com.atlassian.jira.security.JiraAuthenticationContext]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T10:07:24.217

使用 Http Post 方法将相同的问题链接功能修复到 JIRA 中的 LinkExistingIssue 页面。

谢谢。

# image - 错误：java.lang.UnsupportedOperationException：使用 App Engine 的 BlobStore 和 Image API 时没有可用的图像数据

> ID：11650518
> 
> 赞同：6
> 
> 时间：2012-07-25T13:13:25.413
> 
> 标签：image, google-app-engine, file-upload, blobstore

我需要使用 App Engine BlobStore 检索上传图像的高度和宽度。为了发现我使用了以下代码：

```
try {
            Image im = ImagesServiceFactory.makeImageFromBlob(blobKey);

            if (im.getHeight() == ht && im.getWidth() == wd) {
                flag = true;
            }
        } catch (UnsupportedOperationException e) {

        } 
```

我可以上传图像并生成 BlobKey，但是当将 Blobkey 传递给 makeImageFromBlob() 时，它会生成以下错误：

> **java.lang.UnsupportedOperationException：没有可用的图像数据**

如何解决这个问题或以任何其他方式直接从 BlobKey 查找图像高度和宽度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T05:49:23.480

Image 本身的大多数方法当前都会抛出 UnsupportedOperationException。所以我使用 com.google.appengine.api.blobstore.BlobstoreInputStream.BlobstoreInputStream 来操作来自 blobKey 的数据。这样我就可以获得图像的宽度和高度。

```
byte[] data = getData(blobKey);
Image im = ImagesServiceFactory.makeImage(data);
if (im.getHeight() == ht && im.getWidth() == wd) {}
private byte[] getData(BlobKey blobKey) {
    InputStream input;
    byte[] oldImageData = null;
    try {
        input = new BlobstoreInputStream(blobKey);
                ByteArrayOutputStream bais = new ByteArrayOutputStream();
        byte[] byteChunk = new byte[4096];
        int n;
        while ((n = input.read(byteChunk)) > 0) {
            bais.write(byteChunk, 0, n);
        }
        oldImageData = bais.toByteArray();
    } catch (IOException e) {}

    return oldImageData;

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T08:47:57.810

如果您可以使用 Guava，则实现更容易遵循：

```
public static byte[] getData(BlobKey blobKey) {
    BlobstoreInputStream input = null;
    try {
        input = new BlobstoreInputStream(blobKey);
        return ByteStreams.toByteArray(input);
    } catch (IOException e) {
        throw new RuntimeException(e);
    } finally {
        Closeables.closeQuietly(input);
    }
} 
```

其余的保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-14T08:38:10.790

另一种可能性是对图像进行无用的转换（如旋转 0 度）

```
Image oldImage = ImagesServiceFactory.makeImageFromFilename(### Filepath ###);
Transform transform = ImagesServiceFactory.makeRotate(0);
oldImage = imagesService.applyTransform(transform,oldImage); 
```

转换后，您可能会按预期获得图像的宽度和高度：

```
oldImage.getWidth(); 
```

即使这样有效，这种转换也会对性能产生负面影响；）

# xml - xQuery，如何从带有孩子的节点获取文本？

> ID：11650522
> 
> 赞同：1
> 
> 时间：2012-07-25T13:13:30.083
> 
> 标签：xml, text, xquery, xmlnode

这一行：

```
//div[@id="transactions"]/p 
```

给出这个输出（来自我试图获取的 html 内容）：

![在此处输入图像描述](../Images/8de070906c081e159ef0c399fa69e464.png)

我怎样才能使这个查询返回一个这样的字符串（如果每个都`<p>`在它自己的行中的内容）：

```
contentOfP1
contentOfP2
contentOfP3
... 
```

请注意，每个 p 都有子节点 (`<strong>`和`<a>`) 和没有标签的文本。当尝试从特定的 检索所有文本时`<p>`，它给出了：

![在此处输入图像描述](../Images/952b3c5ec18c472fda4f0ea274469c90.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:25:09.580

**使用**：

```
//div[@id="transactions"]/p/concat(string(.), '&#xA;') 
```

或者，如果需要空间标准化的“每个段落的内容”——如注释中所示，请使用：

```
//div[@id="transactions"]/p/concat(normalize-space(.), '&#xA;') 
```

# sql-server - Service Broker — many SQL servers in one domain. How to deploy?

> ID：11650527
> 
> 赞同：2
> 
> 时间：2012-07-25T13:13:50.837
> 
> 标签：sql-server, service-broker

I have the following situation. There is one central SQL Server (2008 R2, Standard Edition) and more (say 10) technological SQL Servers (2008 R2, Express). The technological servers are located near "real" machines, and they capture data from sensors. The data are to be passed to the central SQL Server to be processed somehow. All machines are located in the same domain.The Service Broker was chosen to send the data to the central Server.

I have tried the standard MSDN tutorials [Completing a Conversation Between Instances](http://msdn.microsoft.com/en-us/library/bb839483%28v=sql.105%29) that shows how to create users without login, the certificates, etc. To summarize, it is quite a lot of things that are to be parametrized. No problem with manual settings for two servers, but...

1.  What is usual approach when working with more servers? If the servers are to be added in future, is it reasonable to insert the parameters (computer names, ports, etc.) into some configuration table or to create some stored procedures with hardwired constants... to be able to (re)construct the communication channels for newly added SQL servers?

2.  All the SQL servers are located within the same domain. Is it reasonable to simplify the deployment by not creating the users and the certificates? I have found the Remus Rusanu's answer on [Service broker with only domain account](https://stackoverflow.com/a/11438275/1346705) on how to do that? Would you use the approach in real environment? What are the pros and cons?

Thanks, Petr

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:21:33.973

When we designed Service Broker we tried to make a very clear distinction between design time (when you write the code) and deployment time (when the code is actually used in production). We took very explicit measures to be able to completely reconfigure the deployment without changing a single line in the the application code. We considered things like the message type, contract and service names used as *design time*. How you write your activated procedure and the RECEIVE, the code that issues BEGIN DIALOG/SEND verbs are all, again, considered *design time*.

*Deployment time* are things like routing information (which changes when the physical topology of the network changes), certificates used for security (they expire and require replacement), permissions, endpoints ports etc.

A special case is [dialog security](http://technet.microsoft.com/en-us/library/ms166036%28v=sql.105%29) and remote service bindings: it is a mixture of design time (application code specifies `WITH ENCRYPTION = ON`) and deployment time (a [remote service binding](http://msdn.microsoft.com/en-us/library/ms178024.aspx) is present). The idea is that if an application *requires* dialog security it must specify `ENCRYPTION = ON` (which is the default if not specified) and then the administrator, at deployment time, *must* configure dialog security. Or, if the application does not explcilty require dialog security it can specify `ENCRYPTION = OFF` and then is up to the administrator, at deployment time, to configure dialog security if he chooses so.

Everything related to endpoint security ([transport security](http://technet.microsoft.com/en-us/library/ms166092%28v=sql.105%29)) is considered deployment time.

Finally a great deal of care was put in place to make the programing experience and the available API behave identically whether your pair of services is local within a database, in two databases on the same instance or on two separate instances (ie. make sure [coupling](http://en.wikipedia.org/wiki/Coupling_%28computer_science%29) does not creep in).

I provided this explanation in hope it sheds some light and puts things better in perspective. To answer your questions: you certainly *can* write an application that is compeltely agnostic to the actual physical layout of your deployment, including the name, location, listening port and *number* of hosts involved. Basically the application code is all about *services* conversing with *services* and has 0 knowledges about routes, certificates, endpoints and so on. But that is all from the point of view of *application development*. In practice the deployment is often automated and is *an application in itself*. Even if, as often the case is, is the same person or team that codes *both* applciations (or both *sides* of the same application) is healthy to think at it as two compeltely separate tasks (or apps). If you can make this separation and keep the code clean, you're nealy there. The 'app' code has no knowledge whatsoever about *where* the service it talks to is, or where has the message it processes was sent *from*. The configuration code (or app) is all about knowing exactly where a service resides, how should a route be configured, what endpoints are listening on what ports etc etc.

As a side note, there is a thing called [Service Broker Dynamic Routing](http://msdn.microsoft.com/en-us/library/ms166054%28v=SQL.105%29.aspx) which allows a configuration in which SSB itself is used to configure a large deployed site (ie. SSB can contact a central repository to locate routing info) but I would not recommend it.

# delphi - 在当前调用堆栈中不涉及用户编写代码的情况下，诊断和修复 TControl.Perform 中的访问冲突？

> ID：11650529
> 
> 赞同：2
> 
> 时间：2012-07-25T13:14:00.707
> 
> 标签：delphi, delphi-2007, access-violation

我有一个 delphi 2007 应用程序，它在标准 VCL 单元 Controls.pas 的 TControl.Perform 方法中存在周期性访问冲突。调用堆栈如下所示：

```
exception message : Access violation at address 00000000\. Read of address 00000000.

Main ($1cac):
00000000 +000 ???
004cd644 +024 mainexe.exe  Controls  5021   +5 TControl.Perform
004ce705 +015 mainexe.exe  Controls  5542   +2 TControl.CMMouseEnter
004cd9b7 +2bb mainexe.exe  Controls  5146  +83 TControl.WndProc
004d19bb +4fb mainexe.exe  Controls  7304 +111 TWinControl.WndProc
004a8ff8 +06c mainexe.exe  StdCtrls  3684  +13 TButtonControl.WndProc
004cd644 +024 mainexe.exe  Controls  5021   +5 TControl.Perform
004d182b +36b mainexe.exe  Controls  7255  +62 TWinControl.WndProc
004a8ff8 +06c mainexe.exe  StdCtrls  3684  +13 TButtonControl.WndProc
004d10e4 +02c mainexe.exe  Controls  7073   +3 TWinControl.MainWndProc
0048af08 +014 mainexe.exe  Classes  11583   +8 StdWndProc
75ce7bc5 +00a USER32.dll                       DispatchMessageA
004ecaf4 +0fc mainexe.exe  Forms     8105  +23 TApplication.ProcessMessage
004ecb2e +00a mainexe.exe  Forms     8124   +1 TApplication.HandleMessage
004ece23 +0b3 mainexe.exe  Forms     8223  +20 TApplication.Run
0136cac7 +383 mainexe.exe  mainexe    326  +45 initialization
75563398 +010 kernel32.dll                     BaseThreadInitThunk 
```

我无法在办公室复制它，所以我只能通过 MadExcept 直接从客户那里获得调用堆栈。

我不确定如何诊断或以其他方式确定原因，然后纠正以这种方式发生的故障。我希望有人已经看到了这种“TControl.Perform”风格的访问冲突，并对根本原因有所了解。

我的＃1怀疑是我的代码的其他一些区域已经“释放”了一个表单，并且正在处理一个窗口消息，并且 TControl （作为某种真实形式的某些真实控件的基类）只是失败了因为 Self 是 nil，或者像窗口句柄这样的资源是无效的。

我正在寻找一种可以帮助我诊断此问题的技术，该技术可以在客户端计算机上执行，而无需访问 delphi 调试器。我的想法包括添加一些日志记录（但什么？），甚至在客户端机器上运行 WinDbg（Windows SDK 调试器工具）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:39:15.477

上面的问题是由 TMS StringGrid 控件的旧版本引起的，并且有问题的代码在 WM_MOUSEMOVE 上执行，但责任完全在于我，而不是 TMS，因为我是那个没有彻底更新我的 TMS 组件文件夹。

当我使用更高版本的代码重建并删除`DCU`与我的应用程序链接的旧文件时，问题就消失了。

简而言之，您的源代码就是您认为的应用程序中的内容，并且如果您`DCU`的库或项目搜索路径中有一些旧文件夹，对于您的发布版本，您的代码中有一些神秘的预编译内容。我已经知道你不应该以一种可以留下旧 DCU 的方式来构建你的项目，并且你的版本控制系统中不应该有任何 DCU，但是这个从我身边溜走了。

# ruby-on-rails - bundle exec 抛出“已签出”错误

> ID：11650535
> 
> 赞同：1
> 
> 时间：2012-07-25T13:14:13.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, bundler

我跑`bundle exec foreman start`了，我得到了这个：

```
10:09:17 web.1  | /home/luiz/.gem/ruby/1.9.1/gems/bundler-1.1.5/lib/bundler/source.rb:574:in `rescue in load_spec_files': git://github.com/drnic/composite_primary_keys.git (at master) is not checked out. Please run `bundle install` (Bundler::GitError) 
```

我所做的只是`bundle update`...我知道我可以`--deployment`在捆绑安装中运行选项，但我不想将我的宝石存储在我的应用捆绑文件夹中...有
什么解决方法吗？

# iphone - 带有 Clips 规则引擎的 iPhone 应用程序

> ID：11650537
> 
> 赞同：2
> 
> 时间：2012-07-25T13:14:28.397
> 
> 标签：iphone, objective-c, artificial-intelligence, rule-engine, clips

我正在开发一个使用[CLIPS RULES ENGINE](http://clipsrules.sourceforge.net/)的 iPhone 应用程序。
我已经使用下面的代码成功地将它与 XCode 集成。

```
InitializeEnvironment();
Clear(); 

NSString *filePath = [[NSBundle mainBundle]
                      pathForResource:@"animal" ofType:@"clp"];

NSData *myData = [NSData dataWithContentsOfFile:filePath]; 

if (myData) {

    char *clipsFileChar = (char *)[filePath cStringUsingEncoding:NSASCIIStringEncoding]; 

    IncrementGCLocks();
    Load(clipsFileChar);
    Reset();
    AssertString("(find-all-facts ((?f state-list)) FALSE)"); 

    int numberRulesFired = Run(-1); 
    NSLog(@"Number of rules that fired: %d", numberRulesFired); 

    DecrementGCLocks(); 
}
else {
    NSLog(@"Could not find file %@", filePath);
} 
```

问题是当我运行我的应用程序时，它会从 line 进入无限循环`int numberRulesFired = Run(-1);`。
如果您有任何想法，请帮助我.......谢谢.. :)

# api - Youtube API - 搜索多个作者/上传者？

> ID：11650539
> 
> 赞同：4
> 
> 时间：2012-07-25T13:14:34.577
> 
> 标签：api, video, youtube, youtube-api, author

我想通过链接搜索多个作者/上传者视频。Youtube API 文档说： **作者参数包含一个逗号分隔的列表，最多 20 个 YouTube 用户名。**

我试试这个，但没有找到结果：

```
http://gdata.youtube.com/feeds/api/videos?v=2&author=cokkomikizbiz,srknrzy 
```

*作者 1: cokkomikizbiz*

*作者2：srknrzy*

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:16:54.380

问题是，它需要逗号作为 AND ...

我正在使用 q 来搜索上传者，有更好的方法吗？

# java - Slick - Filled Rectangles

> ID：11650540
> 
> 赞同：1
> 
> 时间：2012-07-25T13:14:36.930
> 
> 标签：java, slick2d

I am trying to render a health bar with Slick. I want a red rectangle with a green one in front of it to show the health remaining. This is what I have so far:

```
 Rectangle healthBG = new Rectangle(healthX, healthY, healthWidth, healthHeight);
        ShapeFill healthFill = new GradientFill(0, healthHeight / 2, Color.red, healthWidth, healthHeight - 1, Color.orange, true);

        float healthGAWidth = ((float) health / (float) maxHealth) * (float) healthWidth;
        Rectangle healthGA = new Rectangle(healthX, healthY, healthGAWidth, healthHeight);
        ShapeFill healthGAFill = new GradientFill(0, healthHeight / 2, Color.green, healthGAWidth, healthHeight - 1, Color.green, true);

        //g.setColor(Color.red);
        g.draw(healthBG, healthFill);
        //g.setColor(Color.green);
        g.draw(healthGA, healthGAFill); 
```

This is what is rendered on the screen:

![Screenshot of health bar in action](../Images/7e894afb5b6a7f3427ee4d80a4325438.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:54:52.970

The problem is that you are using the wrong rendering method. In Graphics there are 2 types of methods draw() and fill(). Your rendering line should be:

```
g.fill(healthBG, healthFill); 
```

Alternatively you could skip making a Rectangle or ShapeFill, because Graphics has a method for filling rectangles:

```
float healthGAWidth = ((float) health / (float) maxHealth) * (float) healthWidth;
g.fillRect(healthX, healthY, healthWidth, healthHeight);
g.fillRect(healthX, healthY, healthGAWidth, healthHeight); 
```

# c# - 添加新复选框

> ID：11650541
> 
> 赞同：-3
> 
> 时间：2012-07-25T13:14:37.450
> 
> 标签：c#

我正在尝试为 alist 中的每个字符串添加一个新复选框。

代码是：

```
void MainFormLoad(object sender, EventArgs e)
        {
            ArrayList alist = new ArrayList();
            alist.Add("First");
            alist.Add("Second");

            foreach (String s in alist) {

// add new checkbox with different name for each string in alist

            }

        } 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:26:41.417

```
 ArrayList alist = new ArrayList();
        alist.Add("First");
        alist.Add("Second");

        int loopCount=1;
        foreach (String s in alist)
        {

            // add new checkbox with different name for each string in alist
            CheckBox c = new CheckBox();
            c.Name = s;
            c.Text = s;
            c.Parent = this;
            c.Visible = true;

            //position the checkbox
            c.Top = loopCount*c.Height;

            this.Controls.Add(c);
            loopCount++;

        } 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:24:23.857

`Controls`您可以使用表单的集合动态添加控件。`i`用于确保复选框的位置不会过度重叠。

```
int i = 0;
foreach (String s in alist) 
{
    CheckBox myCheckBox = new CheckBox();
    myCheckBox.Name = s;
    myCheckBox.Text = s;
    myCheckBox.Size = new Size(74, 13);
    myCheckBox.Location = new Point(138, i);
    this.Controls.Add(myCheckBox);
    i = i + 18;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:19:50.427

这至少应该让你开始：

```
foreach (String s in alist) 
{            
    CheckBox cb = new CheckBox();
    cb.Text = s;
    this.Controls.Add(cb);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:23:18.460

创建一个`CheckBox` 类对象并设置`Name`属性值并将其添加到`Controls`任何容器元素的集合中。您需要将每个新创建的复选框的位置设置为不同的，否则它将全部位于一个位置（一个在另一个之上），您将无法看到所有内容。

```
int top = 10;
foreach (String s in alist)
{
    top = top + 10;
    var chk = new CheckBox();
    chk.Name = s;
    chk.Top=top;  
    groupBox1.Controls.Add(chk);

} 
```

在这里，我将新创建的复选框添加到`GroupBox`名为 groupBox1 的控件中。

# c# - 如何检测 asp.net mvc 3 中的单选按钮检查条件？

> ID：11650542
> 
> 赞同：0
> 
> 时间：2012-07-25T13:14:40.910
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

如何识别选定的单选按钮值或检查条件。我一直在开发以下代码，但我不明白为什么如果我检查 IsPerDay，IsPerDay 不会返回到控制器检查。如何在控制器中查看单选按钮检查或未检查？

**看法**

```
<script type="text/javascript">
    function EveryDay() {
        document.getElementById('RdIsPerDay').checked = true;
        document.getElementById('RdIsPerWeekDay').checked = false;
        document.getElementById("txtPerDay").style.visibility = 'visible';
        document.getElementById("lblPerday").style.visibility = 'visible';
    }
    function EveryWeekDay() {
        document.getElementById('RdIsPerDay').checked = false;
        document.getElementById('RdIsPerWeekDay').checked = true;
        document.getElementById("txtPerDay").style.visibility = 'hidden';
        document.getElementById("lblPerday").style.visibility = 'hidden';
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:36:39.297

您没有为单选按钮分配任何值。将此添加到您的代码中并检查：-

```
<script type="text/javascript">
    function EveryDay() {
    document.getElementById('RdIsPerDay').checked = true;
    document.getElementById('RdIsPerWeekDay').checked = false;
    //add this to your code
    document.getElementById('RdIsPerDay').value= true;
    document.getElementById('RdIsPerWeekDay').value= false;

    document.getElementById("txtPerDay").style.visibility = 'visible';
    document.getElementById("lblPerday").style.visibility = 'visible';
}
function EveryWeekDay() {
    document.getElementById('RdIsPerDay').checked = false;
    document.getElementById('RdIsPerWeekDay').checked = true;
    //add this to your code
    document.getElementById('RdIsPerDay').value= false;
    document.getElementById('RdIsPerWeekDay').value= true;

    document.getElementById("txtPerDay").style.visibility = 'hidden';
    document.getElementById("lblPerday").style.visibility = 'hidden';
}
</script> 
```

# php - 如何使用 Composer 将代码标记为稳定？

> ID：11650543
> 
> 赞同：34
> 
> 时间：2012-07-25T13:14:46.697
> 
> 标签：php, git, composer-php

我最近遇到了作曲家的变化，这意味着默认`minimum-stability`值为`stable`，而不是将其设置为`dev`我想将我的一些库标记为稳定。

我实际上使用了两个相关的分支，`release`并`dev`从`master`. 每隔一段时间就会有一些东西被合并`release`并标记为新版本。

composer 如何确定我的库的稳定性，是否有分支的命名约定、版本号、composer.json 中的键？

谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-25T13:49:30.777

答案是：[标签](http://getcomposer.org/doc/02-libraries.md#tags)。如果您不想使用标签，您也可以使用[Alias 。](http://getcomposer.org/doc/articles/aliases.md)但值得一提的是，你应该只将你的包标记为稳定，当它们是稳定的，而不是让别人相信它们是稳定的。

更新：另一个链接：[稳定性](https://getcomposer.org/doc/articles/versions.md#stability)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-17T10:01:25.517

详细说明 KingCrunch 的答案，因为这对我来说并不是很明显。

来自[https://getcomposer.org/doc/02-libraries.md#specifying-the-version](https://getcomposer.org/doc/02-libraries.md#specifying-the-version)

> 当您在 Packagist 上发布您的包时，它能够从 VCS（git、svn、hg）信息中推断出版本。这意味着您不必显式声明它。

使用 Github 非常容易： [https ://help.github.com/articles/working-with-tags/](https://help.github.com/articles/working-with-tags/)

此外：

> 如果您手动创建包并且确实必须明确指定它，则只需添加一个版本字段：
> 
> ```
> {
>     "version": "1.0.0" 
> } 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-18T14:55:02.083

# 要回答这个问题：

*   对于 VCS，它是`dev-master`
*   对于包装师来说，它是`*@stable`

* * *

# 有关“稳定”或“冻结”作曲家版本的更多信息

## 冻结使稳定

它有时很有用，尤其是在审计期间，可以获取您需求的最新版本，这就是为什么我制作了一个 composer 包来稳定您的所有依赖项：[Composer 稳定版本](https://github.com/MaximeCulea/Composer-Stable-Versions)（[https://github.com/MaximeCulea/Composer-Stable-Versions](https://github.com/MaximeCulea/Composer-Stable-Versions)）。

使用此命令，您对 composer.json 的依赖项将自动更改为：

`"wpackagist-plugin/wordpress-seo":"6.2"`

进入：

`"wpackagist-plugin/wordpress-seo":"*@stable"`

## 冻结作曲家版本

如果之后您打算做相反的事情来获取您测试站点的 composer.lock 的最新版本，这在使站点上线时特别有用，请查看我的另一个 composer 命令：[Composer Freeze Versions](https://github.com/MaximeCulea/Composer-Freeze-Versions) ( [https:/ /github.com/MaximeCulea/Composer-Freeze-Versions](https://github.com/MaximeCulea/Composer-Freeze-Versions)）。

使用此命令，您对 composer.json 的依赖将被自动锁定：

`"wpackagist-plugin/wordpress-seo":"@stable"`

进入：

`"wpackagist-plugin/wordpress-seo":"6.2"`

* * *

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-15T14:44:51.027

如果您不是从 github 或类似的存储库获取包，而是从本地路径“路径”类型获取包，则必须在“composer.json”文件中明确定义版本，它不会t 从本地 git 标签中找出答案。此外，只有在 packagegist、github 上不存在这样的包时才会安装这样的包，因此如果它存在于本地路径 composer.json “name”字段中，则可能需要将其临时重命名为其他内容。

# java - 无法弄清楚如何返回要添加到框架的多边形绘图数据

> ID：11650544
> 
> 赞同：0
> 
> 时间：2012-07-25T13:14:48.777
> 
> 标签：java, swing

我有一个有 2 的程序`Frames`。1`Frame`拥有一个简单的`Button`GUI`JComboBox`界面，而另一个`Frame`应该根据界面上选择的选项来绘制和操作形状。

我已经设置了界面，但我不知道如何实现多边形绘图。我知道如何绘制多边形，但我在网上搜索的所有教程和帮助并没有真正为我提供绘图+多种方法的组合。此外，我的代码可能与我构建程序的所有尝试都相当复杂，所以我想知道这是否会增加我的问题。

我将在下面发布我的代码，并在我需要关注的地方写下“此处需要帮助 1”和“此处需要帮助 2”。这是我的程序大致样子的[图像。](http://imgur.com/ydqa4)

提前感谢任何试图解决我的问题的人。

```
 import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.Container;
    import java.awt.Graphics;
    import java.awt.Graphics2D;
    import java.awt.GridBagConstraints;
    import java.awt.GridBagLayout;
    import java.awt.Insets;
    import java.awt.event.ItemEvent;
    import java.awt.event.ItemListener;
    import java.awt.Polygon;
    import javax.swing.JButton;
    import javax.swing.JComboBox;
    import javax.swing.JComponent;
    import javax.swing.JFrame;
    import javax.swing.JPanel;
    import javax.swing.JTextField;

    public class Final {

// Declare variables for everything used in the program
private JFrame f;

private JPanel p, p2;

private JButton b1, b2, b3, b4, b5, b6, b7, b8;

private JComboBox combo, combo2, combo3;

private JTextField txt, txt2, txt3;

private Graphics g;

private Shape selectedShape;

public Final() {
    gui();
    draw();
}

public void gui() {

    f = new JFrame("Interface");
    f.setVisible(true);
    f.setSize(800, 600);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); // Closes the program
                                                        // when you click
                                                        // the X

    p = new JPanel(new GridBagLayout()); // create panel and decide the
                                            // details
    p.setBackground(Color.WHITE);
    GridBagConstraints c = new GridBagConstraints(); // Define way to call
                                                        // constraints for
                                                        // grid layout
    GridBagConstraints c2 = new GridBagConstraints();
    GridBagConstraints c3 = new GridBagConstraints();
    c.insets = new Insets(0, 0, 0, 0); // add spacing between objects on the
                                        // grid. 10 pixels from bottom top,
                                        // left and right
    c2.insets = new Insets(5, 5, 5, 5);
    c3.insets = new Insets(0, 0, 0, 0);

    // Combo Box stuff below this
    String course2[] = { "CHOOSE", "YELLOW", "BLUE", "RED" };
    String course3[] = { "CHOOSE", "YELLOW", "BLUE", "RED" };

    combo = new JComboBox(Shape.values());
    combo.setBackground(Color.white);
    combo.setForeground(Color.black);
    txt = new JTextField(20);
    combo.addItemListener(new ItemListener() {
        public void itemStateChanged(ItemEvent ie) {
            if(ie.getStateChange() == ItemEvent.DESELECTED) {
                return;
            }
            Shape selectedShape = (Shape) combo.getSelectedItem();
            setSelectedShape(selectedShape);
            String str = selectedShape.getLabel();
            txt.setText(str);
            switch (selectedShape) {
            case NONE:                  
                break;
            case PARALLELOGRAM:
                drawParallelogram();
                break;
            case QUADRILATERAL:
                drawQuadrilateral();
                break;
            case RECTANGLE:
                drawRectangle();
                break;
            case RHOMBUS:
                drawRhombus();
                break;
            case SQUARE:
                drawSquare();
                break;
            case TRAPEZOID:
                drawTrapezoid();
                break;
            case TRIANGLE:
                drawTriangle();
                break;
            default:
                break;
            }
        }

        private Polygon drawTriangle() {
            // Need Help Here 1
            Polygon triangle = new Polygon();

            triangle.addPoint(100,100);
            triangle.addPoint(150,150);
            triangle.addPoint(50,150);
            return triangle;
        }

        private void drawTrapezoid() {
            // TODO Auto-generated method stub          
            System.out.println("This is the code to draw a trapezoid");
        }

        private void drawSquare() {
            // TODO Auto-generated method stub      
            g.drawRect(0, 0, 50, 50);
        }

        private void drawRhombus() {
            // TODO Auto-generated method stub      
        }

        private void drawRectangle() {
            // TODO Auto-generated method stub          
            System.out.println("This is the code to draw a rectangle");
        }

        private void drawQuadrilateral() {
            // TODO Auto-generated method stub      
            System.out.println("This is the code to draw a quadrilateral");
        }

        private void drawParallelogram() {
            // TODO Auto-generated method stub          
            System.out.println("This is the code to draw a parallelogram");
        }
    });

    combo2 = new JComboBox(course2);
    combo2.setBackground(Color.white);
    combo2.setForeground(Color.black);
    txt2 = new JTextField(20);
    combo2.addItemListener(new ItemListener() {
        public void itemStateChanged(ItemEvent ie) {
            String str2 = (String) combo2.getSelectedItem();
            txt2.setText(str2 + " BORDER");
        }
    });

    combo3 = new JComboBox(course3);
    combo3.setBackground(Color.white);
    combo3.setForeground(Color.black);
    txt3 = new JTextField(20);
    combo3.addItemListener(new ItemListener() {
        public void itemStateChanged(ItemEvent ie) {
            String str3 = (String) combo3.getSelectedItem();
            txt3.setText(str3 + " INSIDE");
        }
    });

    // X and Y movement buttons
    b1 = new JButton("X+");
    b2 = new JButton("X-");
    b3 = new JButton("Y+");
    b4 = new JButton("Y-");
    b5 = new JButton("Clockwise");
    b6 = new JButton(" Counter ");
    b7 = new JButton("Enlarge");
    b8 = new JButton("Shrink ");

    // Object adding to panel and grid layout here
    c.gridx = 0;
    c.gridy = 0;
    p.add(combo, c);

    c.gridx = 1;
    c.gridy = 0;
    p.add(txt, c);

    c2.gridx = 0; // x and y for first object
    c2.gridy = 1;
    p.add(b1, c2);

    c2.gridx = 1;
    c2.gridy = 1;
    p.add(b2, c2);

    c2.gridx = 0;
    c2.gridy = 2;
    p.add(b3, c2);

    c2.gridx = 1;
    c2.gridy = 2;
    p.add(b4, c2);

    c3.gridx = 0;
    c3.gridy = 4;
    p.add(combo2, c3);

    c3.gridx = 1;
    c3.gridy = 4;
    p.add(txt2, c3);

    c3.gridx = 0;
    c3.gridy = 5;
    p.add(combo3, c3);

    c3.gridx = 1;
    c3.gridy = 5;
    p.add(txt3, c3);

    c2.gridx = 0;
    c2.gridy = 6;
    p.add(b5, c2);

    c2.gridx = 1;
    c2.gridy = 6;
    p.add(b6, c2);

    c2.gridx = 0;
    c2.gridy = 7;
    p.add(b7, c2);

    c2.gridx = 1;
    c2.gridy = 7;
    p.add(b8, c2);

    f.add(p, BorderLayout.NORTH); // add the entire panel to the frame
    f.show();
}

public void draw() {
    // Need help here 2
    // Create a frame
    JFrame frame = new JFrame();

    // Add a component with a custom paint method
    //frame.getContentPane().add(new MyComponent());

    Container contentPane = frame.getContentPane();
    contentPane.add(drawTriangle());

    // Display the frame
    int frameWidth = 600;
    int frameHeight = 600;
    frame.setSize(frameWidth, frameHeight);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

  /* class MyComponent extends JComponent {
    // This method is called whenever the contents needs to be painted
    public void paint(Graphics g) {
        // Retrieve the graphics context; this object is used to paint
        // shapes
        Graphics2D g2d = (Graphics2D) g;
    }
}*/

public static void main(String[] args) {

    new Final();

}

public Shape getSelectedShape() {
    return selectedShape;
}

public void setSelectedShape(Shape selectedShape) {
    this.selectedShape = selectedShape;
}

public enum Shape {
    NONE, TRIANGLE, QUADRILATERAL, PARALLELOGRAM, TRAPEZOID, RHOMBUS, RECTANGLE, SQUARE;

    static {
        NONE.label = "Choose one...";
        TRIANGLE.label = "Triangle";
        QUADRILATERAL.label = "Quadrillateral";
        PARALLELOGRAM.label = "Parallelogram";
        TRAPEZOID.label = "Trapezoid";
        RHOMBUS.label = "Rhombus";
        RECTANGLE.label = "Rectangle";
        SQUARE.label = "Square";
    }

    private String label;

    public String getLabel() {
        return label;
    }
}
} 
```

对不起，这`JComboBoxes`似乎是我存在的祸根，我想知道我是否应该只使用从头开始重建程序`JButtons`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:55:58.820

我将为形状创建自己的类，而不是形状的枚举（在您的情况下会导致非 OO 开关情况）。然后您可以使用子类（或 java.awt.Shape 类型的成员）来实现绘制不同的形状（该示例假设使用 java.awt.Shape 来描述您传递给构造函数的要绘制的元素）：

```
public class MyShape {

    private String label;
    private Shape awtShape;

    public MyShape(String label, Shape awtShape) {
        this.label = label;
        this.awtShape = awtShape;
    }

    public String toString() {
        return label;
    }

    public int hashCode() {
        return label.hashCode();
    }

    public boolean equals(Object obj) {
        return obj instanceof MyShape && ((MyShape) obj).label.equals(label);
    }

    // x and y parameters may be useful when the shape needs to be relocated
    // when drawing. Use Graphics.translate(x, y) to draw the shape at different
    // coordinates (don't forget to undo the translater after that).
    public void draw(Graphics2D g, int x, int y) {
        g.fill(awtShape);
    }

} 
```

通过实现 toString()、hashCode() 和 equals() 方法，您可以将 MyShape 类用作组合框项（toString() 控制组合框中的显示，hashCode/equals 建立标识 - 您可能希望根据不同的方式实现它们详细要求）。

# kernel - 如何以编程方式使仅由一个进程打开的功能？

> ID：11650564
> 
> 赞同：1
> 
> 时间：2012-07-25T13:15:40.563
> 
> 标签：kernel, device-driver, freebsd

我有一个设备驱动程序，我希望它只被一个进程打开。我必须使用哪些结构来实际设置此属性？Freebsd OS，C语言，内核设备驱动程序有什么技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:40:56.623

您可以在设备驱动程序中跟踪它；并拒绝开放。即做一些簿记（is_open=true on open，is_open=false on close/loss）。

或者您可以简单地使用 open() 本身的正常锁定语义 - 如果需要与独占模式和/或 fcntl/flock 结合使用。

# primefaces - ajax 更新在 ui:composition 中不起作用

> ID：11650565
> 
> 赞同：0
> 
> 时间：2012-07-25T13:15:43.610
> 
> 标签：primefaces

当我在主页中完全插入表单时，它可以工作，但是当我使用 ui:include 时它不会。

```
<!-- Main JSF -->
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:ui="http://java.sun.com/jsf/facelets">
  <h:head>
    <title>Facelet Title</title>
  </h:head>
  <h:body>
    <ui:include src="main.xhtml" />
  </h:body>
</html>

<!-- to be included -->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:p="http://primefaces.org/ui">
  <h:form>
    <h:outputLabel value="ID" for="userId" />
    <p:inputText value="#{managedEmployee.userId}" />
    <p:commandButton value="Show" update="result" />
    <p:panel id="result">
      <h:outputText value="#{managedEmployee.userId}" />
    </p:panel>
  </h:form> 
</ui:composition> 
```

希望这能解释我的意图。我整天都在寻找答案，但没有成功。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:26:39.040

尝试更改为（带斜线）：

```
<ui:include src="/main.xhtml" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:22:21.570

这可能是因为在您尝试包含的文件中，您需要使用标签。

仔细阅读[本教程。](http://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example/)它解释了很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:15:00.167

只是为了关闭这张票，我在这里找到了我的问题的问题，使用了错误的 bean 引用，我知道有点愚蠢..

# delphi - 什么是价值类型框架？

> ID：11650570
> 
> 赞同：2
> 
> 时间：2012-07-25T13:15:55.233
> 
> 标签：delphi, orm, frameworks, value-type

我经常遇到与针对 D2010 之前的旧 Delphi 版本的 OPF 和 ORM 相关的值类型框架，但我不明白它们是什么。什么是价值类型框架？

# objective-c - 积木式让我抓狂

> ID：11650577
> 
> 赞同：1
> 
> 时间：2012-07-25T13:16:17.603
> 
> 标签：objective-c, block

我有这个代码：

```
typedef void (^OutputBlockType) (void (^) (NSString*));

static  OutputBlockType outputBlock;

+(void) logMessage:(NSString*) msg {
 NSString* bla = @"bla"; 
 outputBlock(bla);
} 
```

当然，原始代码有点复杂。仍然.. Xcode（4.3）对这段代码不满意，给我一个

> 将'NSString * _strong'传递*给不兼容类型'void (^* _strong)(NSString *__strong)'的参数；

消息，基本上，什么也没告诉我。有没有人知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:22:23.277

消息或多或少很清楚：您已将块声明为采用带有字符串参数的块，但您正在向其传递一个字符串。

如果你想要一个带有字符串的块，这里有一个`typedef`：

```
typedef void (^OutputBlockType)(NSString*) 
```

# asp.net - Paypal API TransactionSearch 对象参考未设置 asp.net

> ID：11650579
> 
> 赞同：0
> 
> 时间：2012-07-25T13:16:19.413
> 
> 标签：asp.net, api, paypal

Ok Paypal 让我发疯。我直接从 xcom 的最新区域（或者他们现在所说的任何东西）获取了他们的“示例代码”，并安装了 DLL 就好了。我正在做一个简单的 TransactionSearch，如下所示：

```
protected void btnSearch_Click(object sender, EventArgs e)
    {

        GenerateCodeSOAP.TransactionSearch t = new GenerateCodeSOAP.TransactionSearch();
        String mysearch = t.TransactionSearchnCode(Convert.ToDateTime(dtStart.Text), Convert.ToDateTime(dtEnd.Text), "05S08011830926906");
        Response.Write("Results:<br/>" + mysearch);
        lblStatus.Text = "Finished";
    } 
```

这是我用我自己的 API 内容稍微修改的示例代码：

```
public class TransactionSearch
{
    public TransactionSearch()
    {

    }

    public string TransactionSearchnCode(DateTime startDate, DateTime endDate,string transactionId)
    {

        CallerServices caller = new CallerServices();
        IAPIProfile profile = ProfileFactory.createSignatureAPIProfile();       

        // Set up your API credentials, PayPal end point, and API version.
                    profile.APIUsername = "[removed for security]";
        profile.APIPassword = "[removed for security]";
        profile.APISignature = "[removed for security]";
        profile.Subject = "[removed for security]";
        profile.Environment = "live";

        // Create the request object.
        TransactionSearchRequestType concreteRequest = new TransactionSearchRequestType();          
        concreteRequest.Version="92.0";

        // Add request-specific fields to the request.
        concreteRequest.StartDate = startDate;
        concreteRequest.EndDate = endDate.AddHours(23).AddMinutes(59).AddSeconds(59);
        concreteRequest.EndDateSpecified = true;
        //concreteRequest.TransactionID=transactionId;

        // Execute the API operation and obtain the response.
        TransactionSearchResponseType pp_response=new TransactionSearchResponseType();
        pp_response= (TransactionSearchResponseType) caller.Call("TransactionSearch", concreteRequest);
        return pp_response.Ack.ToString();

    }
} 
```

无论我尝试什么（你会看到我注释掉了 transactionid 只是为了给我一些东西）我在这一行得到一个 Object Reference Not Set 错误：

```
pp_response= (TransactionSearchResponseType) caller.Call("TransactionSearch", concreteRequest); 
```

我知道这只是“示例代码”，但这似乎应该很简单。我通过沙箱尝试过，但显然没有用，所以我在自己的贝宝账户中有交易，所以我设置了 API 凭据，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:06:48.070

很久没有做过 Paypal，所以这更通用 - 调试并在行中放置一个断点 - 如果实际发出请求（或请求阻止发出请求的问题），您应该从 PayPal 获得一些错误响应。

# oracle11g - Oracle：批量删除重复记录

> ID：11650580
> 
> 赞同：0
> 
> 时间：2012-07-25T13:16:20.510
> 
> 标签：oracle11g

我有一个表，其中存在 1220200 条重复记录。

我正在使用以下查询来删除重复记录。

```
DELETE /*+ NO_CPU_COSTING  */
  FROM  FCST f1
  WHERE
       ROWID >
           (SELECT MIN (ROWID)
              FROM FCST f2
             WHERE 
                  f1.DMDUNIT = f2.DMDUNIT
                   AND f1.DMDGROUP = f2.DMDGROUP
                   AND f1.LOC = f2.LOC
                   AND f1.STARTDATE = f2.STARTDATE
                   AND f1.TYPE = f2.TYPE
                   AND UPPER (f1.FCSTID) = UPPER (f2.FCSTID)); 
```

删除这些记录大约需要 2 分钟。我也尝试了批量删除方法，方法是将重复数据加载到游标中并批量删除，但这需要更多时间。

优化此代码的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T09:24:49.017

一个简单的事情是这样的

```
delete /*+RULE*/ from t
where rowid in ( select rid
                   from ( select rowid rid,
                                 row_number() over
                                   (partition by cust_seg_nbr order by rowid) rn
                            from t
                        )
                 where rn <> 1 ); 
```

但是，如果您有大量数据，那么

检查此链接[http://www.rampant-books.com/t_stoever_delete_duplicates.htm](http://www.rampant-books.com/t_stoever_delete_duplicates.htm)或使用下面的代码

```
 DECLARE     -- Code ©2004 by Edward Stoever
   CURSOR c_get_duplicates
   IS
      SELECT   ssrfees_term_code, ssrfees_crn, ssrfees_detl_code,
               ssrfees_ftyp_code, ssrfees_levl_code, COUNT (*)
          FROM ssrfees
        HAVING COUNT (*) > 1
      GROUP BY ssrfees_term_code,
               ssrfees_crn,
               ssrfees_detl_code,
               ssrfees_ftyp_code,
               ssrfees_levl_code;

   var_get_duplicates c_get_duplicates%ROWTYPE;

   CURSOR c_del_only_one
   IS
      SELECT ROWID
        FROM ssrfees
       WHERE ssrfees_term_code = var_get_duplicates.ssrfees_term_code
         AND ssrfees_crn = var_get_duplicates.ssrfees_crn
         AND ssrfees_detl_code = var_get_duplicates.ssrfees_detl_code
         AND NVL(ssrfees_ftyp_code,'1') = NVL(var_get_duplicates.ssrfees_ftyp_code,'1')
         AND NVL(ssrfees_levl_code,'1') = NVL(var_get_duplicates.ssrfees_levl_code,'1');

   var_del_only_one ROWID;
BEGIN
   OPEN c_get_duplicates;

   LOOP
      FETCH c_get_duplicates
       INTO var_get_duplicates;

      EXIT WHEN c_get_duplicates%NOTFOUND;

      OPEN c_del_only_one;

      FETCH c_del_only_one
       INTO var_del_only_one;

      DELETE FROM ssrfees
            WHERE ROWID = var_del_only_one;

      COMMIT;

      CLOSE c_del_only_one;
   END LOOP;

   CLOSE c_get_duplicates;
END;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T10:02:07.490

包含“ROWID > ...”的查询基本上是可疑的。

我认为您正在寻找的是：

```
DELETE FROM
  FCST f1
WHERE
  ROWID NOT IN (
    SELECT   MIN(ROWID)
    FROM     FCST f2
    GROUP BY f2.DMDUNIT,
             f2.DMDGROUP,
             f2.LOC,
             f2.STARTDATE,
             f2.TYPE,
             UPPER(f2.FCSTID)); 
```

子查询标识一组 ROWID，涵盖 GROUP BY 子句中列的所有唯一值，并删除所有其他列。

一个更快的替代方法可能是创建一个只包含要保留的行的新表，但如果这足够高性能，那么就坚持下去。

# python - Python Twitter 未在 Eclipse 中注册

> ID：11650581
> 
> 赞同：0
> 
> 时间：2012-07-25T13:16:28.870
> 
> 标签：python, eclipse, python-2.7, python-twitter

我正在尝试使用 Python 2.7.3 和 PyDev 2.5 在 Eclipse 上导入 python-twitter 我下载它如下。

```
pip install twitter 
```

Eclipse 无法识别它，而是说：

```
Traceback (most recent call last):
  File "/Users/Jen/Documents/workspace/drugs/src/marijuana.py", line 1, in <module>
    import twitter as twitter
ImportError: No module named twitter 
```

我在尝试导入 Matplotlib、Scipy、SimpleJSON 和 NLTK 时遇到了同样的错误。事实上，我唯一可以导入的模块是 NumPy。所以，我认为 Eclipse 的 PyDev 插件可能不知道这些文件已添加到 PYTHONPATH 中？

关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:22:33.207

在 eclipse 中，即使你在机器上安装了一些东西，你也需要在 eclipse 中刷新你的 python 配置——它不会手动识别更改。（这样它可以存储多个配置。）

在 OSX 上，这是在 Preferences -> PyDev -> Interperter-Python 下

从这里，我通常删除配置并再次运行自动配置，但您也可以手动添加文件夹。

如果文件夹在配置中，但它仍然不起作用，您可以通过启动解释器并键入以下内容来验证系统路径：

```
import sys
print sys.path 
```

如果它不存在，则尝试再次刷新解释器......并验证它是否接收到导入。您还可以从这篇文章中查看[如何配置 Eclipse](http://www.rose-hulman.edu/class/csse/resources/Eclipse/eclipse-python-configuration.htm)[如何持久保存 Eclipse Pydev 项目的 PYTHONPATH 设置？](https://stackoverflow.com/questions/9249995/how-to-persist-pythonpath-setting-of-an-eclipse-pydev-project)

并通过打开终端（在您的 Mac 上，而不是在 Eclipse 中）并从那里启动 python 并验证它是否工作来验证它是否安装正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:05:18.063

我安装了 Python-Twitter，但随后不得不将 egg 文件添加为 Eclipse 中项目的外部库。

在项目 > 属性 > PyDev - PYTONPATH > 外部库 > 添加 zip/jar/egg

# c# - 在 C# DLL 中定义的 PowerShell 中使用函数时出现转换错误

> ID：11650583
> 
> 赞同：0
> 
> 时间：2012-07-25T13:16:33.700
> 
> 标签：c#, dll, powershell, casting

我正在开发一个将定制的 c# .DLL 集成到 powershell 中的项目。但是，我在将 C# 对象转换为 PowerShell 可以理解的形式时遇到问题。我已经在谷歌上搜索了一百万次并尝试了一些不同的东西，但没有一个是成功的。

当我使用对象数组调用 SNC-getVlan 时，会发生以下错误：

**“使用“1”参数调用“printObject”的异常：“无法将'System.Management.Automation.PSObject'类型的对象转换为'Objects.blablazz.DC_Object'”**

我正在发布我的代码的一些小子集，希望你们能看到我做错了什么。

我正在使用的课程：

```
public class DC_Object
{
    public string name = "undefined";
}

public class Cmdb_Host : DC_Object
{
    //Lots of properties
}

public class Cmdb_Vlan : DC_Object
{
    //Lots of properties
} 
```

打印对象的函数：

```
public static void printObject(Object[] objects)
{
    foreach (Object o in objects)
    {
        string name = ((DC_Object)o).name; //I'm assuimg things go wrong in here. 
```

fromJSON 函数是实际返回发送到 printObject 的对象的函数，不确定它是否重要，但无论如何我都会发布它。

```
static public Object[] fromJSON(string input)
{
    //Check the string to see to what object it should convert to
    switch (input.Substring(0, 16))
    {
        //Reuest for a host (Host Table)
        case "{\"u_cmdb_ci_host":
            if (input[18] == '[') // We have an array
            {
                Container_Host c_host = JsonConvert.DeserializeObject<Container_Host>(input);
                return c_host.u_cmdb_ci_host;
            }
            else    // We have a single object
            {
                Container_Host_Single c_host = JsonConvert.DeserializeObject<Container_Host_Single>(input);
                Container_Host h = new Container_Host();
                h.u_cmdb_ci_host = new Cmdb_Host[1];
                h.u_cmdb_ci_host[0] = c_host.u_cmdb_ci_host;
                return h.u_cmdb_ci_host;
            }
        //Request for a VLAN (Network Table)
        case "{\"cmdb_ci_ip_net":
            Container_Vlan c_vlan = JsonConvert.DeserializeObject<Container_Vlan>(input);
            return c_vlan.cmdb_ci_ip_network;
    }

    return null;
} 
```

Powershell 模块/脚本：

```
#Loads in the custom DLL created for this specific project.
[Reflection.Assembly]::LoadFrom(“C:\Users\Joey\Documents\PSScripts\DataCollector\DataCollect.dll”)

# Creates a new Client object that handles all communication between the PowerShell module and the
# sncdb-worker at server side.
$client = new-object blablazzz.Sender;
[blablazzz.Config]::Configure("C:\Users\Joey\Documents\PSScripts\DataCollector\asp4all.ini")
$client.Connect();

# This functions returns a Host Machine (Virtual or Physical) in object notation to    for easy post-processing
# in PowerShell. 
Function SNC-GetHost($hostz = "blabla")
{
    return $client.sendMessage([blablazzz.Parser]::getHost($hostz));    
}

# This function returns VLAN information in object notation. This is a collection most     of the time.
function SNC-GetVLAN($vlan = "TLS-TL2-CPH-TEST")
{
    return $client.sendMessage([blablazzz.Parser]::getVlan($vlan));
}
Function printObject($hostz)
{
    [blablazzz.Formatter]::printObject($hostz)
} 
```

PowerShell 命令（已加载 dll）：

```
PS C:\$variable = SNC-Get-VLAN
PS C:\printObject($variable) 
```

我必须注意，我的 printDebug 函数在 SNC-getHost 上使用时工作正常，但在 SNC-getVlan 上不起作用，SNC-Get-Vlan 返回一个值数组，而 SNC-getHost 只返回一个值（它仍在虽然是一个数组，但它看起来不像 PowerShell 将它保存在一个数组中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:15:35.250

对于可能遇到同样问题的人。解决方案是更改我的函数的返回值和 DC_Object 的参数，因为这是顶部封装对象。这解决了所有的铸造问题。

# xcode - 如何导出 xcode 项目以传输到另一台 mac 机器

> ID：11650584
> 
> 赞同：-1
> 
> 时间：2012-07-25T13:16:40.773
> 
> 标签：xcode

我正在做 iphone Apple Applcation。我正在使用 Xcode 4.2。但我的 iphone 是 ios 5.1 版本，所以我需要使用 xcode 4.3.3。我已经在 xcode 4.2 中开发了应用程序。但现在我需要在 xcode 4.3.3 中运行该应用程序，那么如何从 xcode 4.2 导出项目？请为此指导我，否则我需要再次开发应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:25:22.520

从 XCode 4.2 到 Xcode 4.3.3，你只需要打开同一个项目，使用不同的 XCode 版本，就完成了。不需要出口或复杂的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:17:03.417

向@George Aguirre 答案添加更多信息

从 XCode 4.2 到 Xcode 4.3.3，你只需要打开同一个项目，使用不同的 XCode 版本，就完成了。不需要出口或复杂的东西。您可以压缩“您的应用程序文件夹”，然后保存一些位置，然后解压缩它，并在需要时在新的 Xcode 4.3 设置中进行必要的更改，您就可以开始了。

# sql - 从 SQL Server 2008 R2 获取大约 7Mb 的数据到客户端大约需要 5 秒。为什么这么慢，正常吗？

> ID：11650587
> 
> 赞同：1
> 
> 时间：2012-07-25T13:16:41.877
> 
> 标签：sql, performance, select

从 SQL Server 2008 R2 获取大约 7Mb 的数据到客户端大约需要 5 秒。该机是比较强大的 AMD 12 Core，64Gb RAM，Windows Server 2008，2 10Gbit 卡。在服务器上运行 select 甚至更慢，然后从客户端运行。将 7Mb 文件从该服务器复制到本地工作站大约需要 500 毫秒。

这是一个小型复制器：

```
--create test table for reproducer
CREATE TABLE [dbo].[Test_Speed](
    [ED] [datetime] NULL
) ON [PRIMARY]

  --fill test table with data, insert took 3:51 mins
  declare @r int
  set @r = 1
  while (@r < 830000)
  begin 
  insert into [CDB_ODS].[dbo].[Test_Speed] select getdate()
  set @r = @r+1
  end

  --select all records, roughly 7Mb. 4 secs if run on the client, 5 secs on the server (1.4Mb sec)
  select ed from [dbo].[Test_Speed]

  /*
  SELECT on CLIENT
    SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.
Table 'Test_Speed'. Scan count 1, logical reads 1833, physical reads 0, read-ahead reads 0, 
lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

 SQL Server Execution Times:
   CPU time = 281 ms,  elapsed time = 4020 ms.
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.

 SQL Server Execution Times:
   CPU time = 0 ms,  elapsed time = 0 ms.

   --- SELECT on SERVER 
   SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.

(829999 row(s) affected)
Table 'Test_Speed'. Scan count 1, logical reads 1833, physical reads 0, read-ahead reads 0,
 lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

 SQL Server Execution Times:
   CPU time = 328 ms,  elapsed time = 5369 ms.
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.

 SQL Server Execution Times:
   CPU time = 0 ms,  elapsed time = 0 ms.

   */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:23:18.410

是的，这对我来说似乎比较正常。7Mbytes 是相当数量的数据。

性能高度依赖于客户端。当然，诸如网络速度之类的东西会产生影响。更大的影响是沿途各个点的缓冲区大小。为了获得最快的性能，您希望 SQL Server 一次性发送大量结果，这些结果可以快速放入应用程序中。

其他选项也有很大的影响。在 Excel/VBA 中，有不同的数据导入方法。如果使用游标，则需要一个只读的向前读游标。其他任何事情都可以慢得多。例如，一种游标将一次读取一行数据——因此延迟成为性能而不是带宽的主要因素（我认为这是可更新的游标，但我并不肯定）。

您需要详细说明您的客户以及它如何访问数据。这很可能是客户端问题，而不是数据库问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:27:22.810

主键、索引查找、索引扫描、执行计划，这些都是你的朋友。[检查此链接](http://www.sqlservercentral.com/stairway/72399/)以获取索引主题。这个[论坛帖子](http://www.sqlservercentral.com/Forums/Topic1296026-1291-1.aspx)也可以帮助理解主键和外键。关于执行计划的分析和理解查看[这个链接](http://www.simple-talk.com/sql/performance/execution-plan-basics/)

在我工作的数据库上，检索相似数量的信息，数千行，花费不到一秒钟的时间。考虑您的数据库设计并稍后通过测试不同的方法调整查询来提高性能非常重要，并不总是投入更多的 CPU/RAM 功率是最好的方法

已编辑

我对你的评论感到有些讽刺，希望不是你的目标。使用我刚刚完成的以下测试成为我的客人（以前不可能这样做，现在我下班了）。在我的情况下，插入大约是 20-30 秒，因为我使用了更好的方法 (CTE) 来插入近 100 万行。比较时间你会发现使用主键比不使用它快 1 秒多一点。同样在服务器上通常快 1 秒。

```
CREATE TABLE [dbo].[Test_Speed]([ED] [DATETIME2] NULL) ON [PRIMARY]
CREATE UNIQUE CLUSTERED INDEX Idx1 ON Test_Speed(ED);

DECLARE @firstdate DATETIME2='00010101 00:00:00', 
        @lastdate DATETIME2= '25001231 00:00:00'

;WITH CTE_DatesTable
  AS
  (
    SELECT @FirstDate AS auxDate
    UNION ALL
    SELECT DATEADD(dd, 1, auxDate)
    FROM CTE_DatesTable
    WHERE DATEADD(dd, 1, auxDate) <= @LastDate
  )
  INSERT INTO [dbo].[Test_Speed]
  SELECT auxDate FROM CTE_DatesTable
  OPTION (MAXRECURSION 0);

  SET STATISTICS TIME ON;
  SET STATISTICS IO ON;
  SELECT ED FROM [dbo].[Test_Speed]
  SET STATISTICS TIME OFF;
  SET STATISTICS IO OFF;

/*
    Select on Client with primary key , insertion 21s
    (913106 row(s) affected)
     SQL Server Execution Times:
       CPU time = 0 ms,  elapsed time = 0 ms.
    (913106 row(s) affected)
    Table 'Test_Speed'. Scan count 1, logical reads 1919, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
     SQL Server Execution Times:
       CPU time = 375 ms,  elapsed time = 7790 ms   

    Select on Client without primary key , insertion 31s   
    SQL Server Execution Times:
       CPU time = 0 ms,  elapsed time = 0 ms.
    (913106 row(s) affected)
    Table 'Test_Speed'. Scan count 1, logical reads 1931, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
    (1 row(s) affected)
     SQL Server Execution Times:
       CPU time = 405 ms,  elapsed time = 8049 ms.

    ------------------  

    Select on Server with Primary key, insertion 19s
    (913106 row(s) affected)
     SQL Server Execution Times:
       CPU time = 0 ms,  elapsed time = 0 ms.
    (913106 row(s) affected)
    Table 'Test_Speed'. Scan count 1, logical reads 1931, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
     SQL Server Execution Times:
       CPU time = 187 ms,  elapsed time = 6164 ms.   

    Select on Server without Primary key, insertion 25s
     (913106 row(s) affected)
     SQL Server Execution Times:
       CPU time = 0 ms,  elapsed time = 0 ms.
    (913106 row(s) affected)
    Table 'Test_Speed'. Scan count 1, logical reads 1919, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
     SQL Server Execution Times:
       CPU time = 343 ms,  elapsed time = 7407 ms.
*/ 
```

# postgresql - JPA Postgres 使用默认值插入 Bit(4)

> ID：11650590
> 
> 赞同：1
> 
> 时间：2012-07-25T13:16:45.947
> 
> 标签：postgresql, jpa-2.0, eclipselink

我有 Postgres DB、Java with JPA 2.0 和 eclipseLink。

在我的 To 对象中：

```
 @Column(name = "mask")
     private Boolean mask; 
```

在 DB: 掩码位 (4) 默认 B'1000'::"位",

当我想保留对象时：

原因：org.postgresql.util.PSQLException：错误：列“掩码”是位类型，但表达式是布尔类型提示：您将需要重写或强制转换表达式。

我在 TO 类中尝试： - 布尔值 - BitSet(4) - 字符串 - 整数 - 字符

我尝试使用 BitSet，这些： TO object: @Column(name = "mask") private BitSet mask;

```
 public BitSet getMask() {
         BitSet work = new BitSet(4);        
         work.set(0);
         if (mask == null){
           return work;
         }
        return mask;
    }

    public void setMask(BitSet mask) {
      BitSet work = new BitSet(4);        
      work.set(0);
      if (mask== null) {
        this.mask= work;
      } else {
        this.mask= mask;
      }
    } 
```

我怎样才能让它工作？

布尔方法不好，存储1位。我在谷歌搜索，失去了论坛。

经过 5 小时的谷歌搜索，我发现：http: [//archives.postgresql.org/pgsql-bugs/2005-05/msg00014.php](http://archives.postgresql.org/pgsql-bugs/2005-05/msg00014.php)

它关于一个postgres BUG：

“拥有一个名为“BIT”的 JDBC 类型实际上映射到一个布尔类型是非常令人困惑的。如果您假设 JDBC 的 BIT与名为“bit”的服务器类型*无关*，并且它们具有同名，那事情应该就清楚了。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:41:51.810

如果您通过原始 JDBC 访问您的字段，则返回什么类型？

您是否尝试将其映射为字符串，会发生什么错误？您可能需要使用 @Converter 来转换类型。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Basic_Mappings/Default_Conversions_and_Converters/Converter](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Basic_Mappings/Default_Conversions_and_Converters/Converter)

# magento - 如何在本地使用生产数据库？

> ID：11650592
> 
> 赞同：0
> 
> 时间：2012-07-25T13:16:58.633
> 
> 标签：magento

我已经从生产环境下载了 Magento 数据库以在本地使用。现在在安装时我尝试使用该数据库。我陷入了一个不确定的循环。我必须在数据库中进行什么更改才能使其在本地正常工作，以便我可以使用内容。我在本地使用 wamp。

生产环境有多个网站。所以每个地区都有自己的网站。有5个网站。请提出一些我真正需要使用内容的内容，例如 cms 页面阻止客户组等。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:25:04.370

转到表 cone_config_data

将这些值更新为您的 localhost url：

```
web/secure/base_url //put the unsecure one in this one for the local 
web/unsecure/base_url 
```

将此值更改为`0`

```
web/seo/use_rewrites 
```

清空`var`文件夹。

# c# - while 语句忽略响应值

> ID：11650595
> 
> 赞同：1
> 
> 时间：2012-07-25T13:17:08.727
> 
> 标签：c#, command-line, if-statement, while-loop, console-application

我有一个命令行要求用户说（Y/N），这个值被传递给 checkResponse 方法。

出于某种原因，while 循环会忽略该值，即使在我调试时它显示的值为“Y”。当值设置为“N”时，它也会继续循环。如果我将 if 语句移到 while 语句下方，程序就可以正常工作。我可以发送一个初始值“Y”，while 语句将忽略它并开始运行其中的代码。

知道我错过了什么或忽略了什么吗？

提前致谢。

```
public void checkResponse(string response, string confirmValue)
{
    Console.WriteLine(response);
    Console.WriteLine(response);
    if (response == "Y")
    {
        return;
    }
    else if (response == "N")
    {
        Environment.Exit(0);
    }
    else
    {
        while ((response != "Y") || (response != "N"))
        {
            Console.Clear();
            Console.WriteLine("\"" + response + "\" is not a valid response.");
            Console.WriteLine();
            Console.WriteLine("You entered:" + confirmValue);
            Console.WriteLine("Is this correct? (Y/N)");
            response = Console.ReadLine().ToUpper();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T13:19:15.933

更改`OR`为`AND`逻辑运算符：

```
(response != "Y") && (response != "N") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T13:19:35.030

你`((response != "Y") || (response != "N"))`的永远是`true`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T13:19:31.190

```
while ((response != "Y") || (response != "N")) 
```

永远是正确的，因为响应不能同时是 Y 和 N。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:21:17.493

行。如果`while`循环终止怎么办？我们希望它再次检查：

```
public void checkResponse(string response, string confirmValue)
{
Check:
    Console.WriteLine(response);
    Console.WriteLine(response);
    if (response == "Y")
    {
        return;
    }
    else if (response == "N")
    {
        Environment.Exit(0);
    }
    else
    {
        while ((response != "Y") && (response != "N"))
        {
            Console.Clear();
            Console.WriteLine("\"" + response + "\" is not a valid response.");
            Console.WriteLine();
            Console.WriteLine("You entered:" + confirmValue);
            Console.WriteLine("Is this correct? (Y/N)");
            response = Console.ReadLine().ToUpper();
        }
        goto Check;
    }
} 
```

或更好：

```
public void checkResponse(string response, string confirmValue)
{
    Console.WriteLine(response);
    while (response != "Y" && response != "N")
    {
            Console.Clear();
            Console.WriteLine("\"" + response + "\" is not a valid response.");
            Console.WriteLine();
            Console.WriteLine("You entered:" + confirmValue);
            Console.WriteLine("Is this correct? (Y/N)");
            response = Console.ReadLine().ToUpper();
    }
    if (response == "N")
           Environment.Exit(0);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T13:21:57.003

你确定输入也是大写的吗？您可以使用[equals](http://msdn.microsoft.com/en-us/library/c64xh8f9)方法并忽略大小写。

```
message.Equals("Y", StringComparison.InvariantCultureIgnoreCase); 
```

编辑：虽然这对于使用 or 而不是 and 的错误可能更好，但这是您的实际问题。

# java - 应用程序更名 - 何时应采用分支策略？

> ID：11650596
> 
> 赞同：2
> 
> 时间：2012-07-25T13:17:10.803
> 
> 标签：java, git, branch, branching-and-merging, branding

**注意：** *如果重要的话，我们正在使用**git**，（因此分支和合并轻而易举），这是一个 Android 应用程序（**Java** - 所以条件编译并不真正适用）。*

[与此处](https://stackoverflow.com/questions/4381523/branching-strategy-for-configurable-software)的这个问题类似，但是如果您的软件的单个版本的不同更名之间的 UI 差异不仅仅是 UI 差异，该怎么办？例如，如果不应该将整个功能或子系统编译到其中一个更名中（例如，它包含属于一家公司的知识产权并且不应该提供给其他公司的代码）怎么办？

在这种情况下，是否应该为每个更名创建一个单独的分支？如果是这样，主/主分支是否有任何用途，因为它只会成为代码存储而不编译成任何有用的应用程序（奇怪）？但是没有主/主分支意味着必须挑选（单独选择）提交以跨品牌合并，这似乎是一种不好的方法。

还是有另一种不涉及分支的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:02:55.357

根据您的问题中提供的信息，我建议不要使用分支。

除非合并，否则分支将转移。因此，在所有分支中提供错误修复将需要大量挑选或至少非常小心的提交/合并处理。

将客户特定的代码放入应用程序加载的库中怎么样？

临：

*   只有客户特定的代码会被复制。
*   通用代码不会无缘无故分叉。
*   通用代码是针对通用接口编码的。
*   客户特定的应用部件仅运送给相应的客户。

缺点：

*   需要对通用接口进行仔细的设计和生命周期管理。
*   用于查找和加载客户特定库的附加代码。（在 Java 或者 Android 的构建过程中都不太难）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:02:06.847

对于真正的敏感信息/代码问题，分支机构不会削减它：
您需要：

*   将敏感代码库隔离到自己的 git repo 中
*   将其作为某些项目的**[子模块引用](http://git-scm.com/book/ch6-6.html)**
*   不要在不应该​​看到该代码的其他项目中引用*它*。

这个想法是为了确保不会将敏感信息从一个存储库错误地推送到另一个存储库。

# google-chrome - Yii 框架，引导小部件 BootTabbable 不适用于 Chrome 或 Safari

> ID：11650602
> 
> 赞同：1
> 
> 时间：2012-07-25T13:17:48.930
> 
> 标签：google-chrome, safari, yii, twitter-bootstrap, yii-extensions

我正在使用带有 Yii 框架的[引导扩展](http://www.yiiframework.com/extension/bootstrap/)来为内容设置选项卡。[这是一个例子](http://marionette-cola.linkmesrl.com/compania/viewstoria)。这些选项卡在 Firefox 中运行良好，但在 Google Chrome 和 Safari 中，选项卡的行为不同，它们随着页面加载而加载，但在单击选项卡后，它们会被选中，但内容不显示。

以下是这些选项卡的代码：

```
<?php $this->widget('bootstrap.widgets.BootTabbable', array(
                'type'=>'tabs', // 'tabs' or 'pills'
                'tabs'=>array(
                        array('label'=>'Marionettisti', 'content'=>$this->renderPartial('staff/_view_staff_marionettisti', array('model'=>$model),$this),'active'=>true),
                        array('label'=>'Voci e Musica', 'content'=>$this->renderPartial('staff/_view_staff_vociemusica', array('model'=>$model),$this)),
                        array('label'=>'Laboratorio', 'content'=>$this->renderPartial('staff/_view_staff_laboratorio', array('model'=>$model),$this)),
                        array('label'=>'Direttore Artistico', 'content'=>$this->renderPartial('staff/_view_staff_direttore_artistico', array('model'=>$model),$this)),
                ),
            )); ?> 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:20:44.840

尝试在 renderPartial 中传递第三个和第四个元素 true ，例如

```
$this->renderPartial('staff/_view_staff_marionettisti', array('model'=>$model),true,true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-11T10:25:08.240

检查我们所有的 div 是否在渲染页面中正确关闭。我遇到了同样的问题错误是不恰当地关闭了 div

# php - phpDoc - 为持有类实例的私有成员记录文档

> ID：11650614
> 
> 赞同：3
> 
> 时间：2012-07-25T13:18:15.730
> 
> 标签：php, phpdoc

我有一堂课要记录。有一个变量持有类实例，它将在构造函数中初始化。我想知道如何记录（或放置标签）以便正确反映变量类型。

到目前为止，我已经这样做了：

```
/**
 * Holds the instance of ParseMessage class
 *
 * @access private
 * @var ParseMessage
 */
 private $_parse_message; 
```

为该成员生成的 Doc 如下所示：

```
Holds the instance of ParseMessage class
$_parse_message : **\ParseMessage** 
```

我想在变量类型之前删除这个'\'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:29:25.120

由于 phpDoc 处理命名空间的方式，可能存在前导斜杠。带有前导 \ 的类位于全局命名空间中。除了将您的类放入其自己的命名空间（正如您所说的对这个特定类所做的那样）之外，我找不到可以使 phpDoc 省略全局命名空间类上的前导斜杠的设置。

# perl - 使用 perlbrew 是否可以按架构进行多次安装？

> ID：11650615
> 
> 赞同：5
> 
> 时间：2012-07-25T13:18:19.597
> 
> 标签：perl, architecture, multiple-versions, perlbrew

我希望能够安装多个版本的 Perl，但我也需要按体系结构安装它们。

我知道我可以使用 perlbrew 按版本进行安装：5.10.1、5.12.3、5.16.0 等。我找不到按体系结构、Solaris-sparc、Solaris-x86、Linux 进行安装的方法-i686、Linux-x86_64 等。

进行[手动安装](https://stackoverflow.com/questions/3486665/how-can-install-multiple-perl-versions-without-them-tripping-over-each-others-x)我可以做到这一点

手动安装没什么大不了的，但是 perlbrew 使管理等方面的一些事情变得更容易。

**编辑：**正如评论中指出的那样，我正在使用一个安装在各种平台上的通用主目录 NFS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:46:19.260

您可以使用该`--as`选项为`perlbrew install`安装指定不同的名称（以避免与相同版本发生冲突），并且您可以将任何`Configure` `-D`、`-U`或`-A`选项传递给`perlbrew`它，它将传递它们。但是我也看不到在 perlbrew 的上下文中，不同拱门的 perl 是如何有用的。

下面是使用 perlbrew 在实际 64 位机器上安装 32 位 perl 的示例：

```
perlbrew install perl-5.8.8 --as perl-5.8.8-i386-linux-thread-multi -Dcc='cc -m32' -Dplibpth='/lib64 /usr/lib64 /usr/lib/ /usr/lib/x86_64-linux-gnu/' -Darchname=i386-linux-thread-multi -Dusethreads 
```

传递给`Configure`through的标志`-D`将根据环境和特定需求而有所不同。

# java - JSF 2.0：在呈现视图之前未更新数据

> ID：11650620
> 
> 赞同：1
> 
> 时间：2012-07-25T13:18:30.443
> 
> 标签：java, jsf-2, updates

在我的应用程序中，我有以下 bean：

```
@Named(value = "mrBean")
@SessionScoped
public class MrBean implements Serializable {

    @EJB
    private MrsBean mrsBean;

    private Item item;

    public void updateItem() {
        this.item = mrsBean.updateItem(item.getId());
    }

}

@Named(value = "itemBean")
@RequestScoped
public class itemBean {
    @Inject
    private MrBean mrBean;

    @PostConstruct
    public void init() {
        if (FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("update") != null) mrBean.updateItem();
    }
} 
```

在`ViewItem.xhtml`页面显示商品的信息之前，我会在显示之前检查是否`update`提交了参数以更新商品。

当我使用参数测试页面时`update=true`，我不知道为什么呈现旧数据而不是新更新的数据。事实上，我必须在新数据呈现之前刷新页面。

从上面的结果，我想知道是否`@PostConstruct`在视图渲染后调用了该方法。

如果您能给我一个建议，我将不胜感激。

最好的祝福，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:21:33.730

*如果在之后*`#{itemBean}`的视图中第一次被引用，就会发生这种情况。例如 *`#{mrBean.item}`*

 *```
#{mrBean.item}
...
#{itemBean} 
```

当 EL 表达式第一次引用它并且它还不存在于作用域中时，托管 bean 是第一次构造的。在一个 GET 请求中，托管 bean 实例没有被 taghandler 属性或 a 引用`f:event`，那么它只会在渲染响应期间被构造。

如果重新排列它们以便在被引用*之前*`#{itemBean}`总是被引用（并因此被构造）是不可能的，那么最好改为使用a 。 *`#{mrBean.item}``@PostConstruct``#{itemBean}``<f:event type="preRenderView">`*

 *```
<f:event type="preRenderView" listener="#{itemBean.init}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:47:49.453

我正在发布另一个解决方案，以防万一它对您有所帮助。您可以通过在每次要呈现页面时调用初始化方法来尝试不同的方法，并避免使用请求 bean 来进行更新。将此元数据标记添加到您的 xhtml：

```
<f:metadata>
    <f:event type="preRenderView" listener="#{mrBean.init}" />
</f:metadata> 
```

在你的 MrBean 中，定义这个方法：

```
public void init() {
    if(!FacesContext.getCurrentInstance().isPostback() && FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("update") != null) 
        mrBean.updateItem();
} 
```

这样，每次呈现 ViewItem 页面时都会进行 updateItem 检查。如果您的 MrBean 是 ViewScoped 而不是 SessionScoped，我会建议改用`@PostConstruct`注释。**

# ruby - 使用 ruby aws-sdk [ruby newbie] 更改 SQS 消息的可见性超时

> ID：11650626
> 
> 赞同：1
> 
> 时间：2012-07-25T13:18:43.413
> 
> 标签：ruby, amazon-web-services, amazon-sqs

有人可以帮助举个例子，如何使用 ruby​​ aws-sdk 更改 sqs 消息的可见性超时？

这是我使用方法 batch_change_message_visibility 用于测试的代码，但我收到错误“未定义的方法 'batch_change_message_visibility'”

```
require 'rubygems'
require 'aws-sdk'

sqs = AWS::SQS.new(
    :access_key_id => access_key,
    :secret_access_key => access_secret)

queue = sqs.queues.named(queue_name)

messages = []
messages << { :message => message_handle, :visibility_timeout => 5 }
queue.batch_change_message_visibility(messages) 
```

任何的想法？非常欢迎任何帮助:)谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:11:12.237

将消息数组参数传递给 batch_change_message_visibility 方法时，您必须使用 splat 运算符。

[如此处](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/SQS/Queue.html#batch_change_visibility-instance_method)的文档中所示，您应该编写（注意消息参数之前的 *）：

```
messages = []
messages << { :message => 'handle1', :visibility_timeout => 5 }
messages << { :message => 'handle2', :visibility_timeout => 10 }

queue.batch_change_visibility(*messages) 
```

# javascript - jquery设置元素悬停

> ID：11650627
> 
> 赞同：1
> 
> 时间：2012-07-25T13:18:49.740
> 
> 标签：javascript, jquery, static, hover

我有一个带有 6 个菜单按钮的页面。每个按钮都有自己的悬停事件 (CSS) 背景。一切正常，但现在我想在选择页面时做到这一点，我想让背景保持静态。有可能用javascript制作吗？这将帮助访问者知道他选择了哪种类型的按钮。

如果您不明白我的意思，我将在 jquery 中编写一个小代码（这只是一个示例）：

```
$(document).ready(function(){
   $("#button-index1").makeItStaticBackground();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:30:49.890

您必须向要应用 css 悬停效果的元素添加一个类（Ex menu-element），并在元素处于活动状态时删除该类。

CSS：

```
.menu-element:hover{
...
} 
```

javascript:

```
$(document).ready(function(){
   $("#button-index1").removeClass('menu-element');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:33:49.217

我通常通过`active`在服务器上添加一个类或通过 JavaScript 来解决这个问题。通过 JavaScript，您可以使用一些`location.href`===`a.href`魔法。在 CSS 中很简单：

```
.menu a:hover,
.menu a.active {
    // definitions..
} 
```

# android - 获得所需的布局 - android

> ID：11650628
> 
> 赞同：-1
> 
> 时间：2012-07-25T13:18:50.147
> 
> 标签：android, android-layout, layout, alignment

我知道这可能太匹配了，但需要帮助才能获得正确的布局

这是我想要的样子- [http://s7.postimage.org/4oay4d2sb/layout.png](http://s7.postimage.org/4oay4d2sb/layout.png)

我遇到的问题是空格和文本视图以及按钮的对齐方式（几乎所有内容）- 1- 有没有办法让我确保文本视图的大小保持不变，即使没有里面的文字还是里面有太多匹配的文字？

2-如果没有办法做到这一点，我可以告诉空格填充文本视图和我希望按钮出现的点之间的剩余部分吗？

3-我有没有办法将按钮与按钮对齐，以确保它们始终保持在同一个地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:31:10.677

看看这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

   <LinearLayout 
    android:layout_height="150dp"
    android:layout_width="fill_parent">
  <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:layout_marginTop="20dp"
    android:text="qqqqqqqq" />
  </LinearLayout>

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="20dp">

        <Button 
        android:id="@+id/btn"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="30dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="30dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn2"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="30dp"
        android:text="Toast"/>
    </LinearLayout>
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp">

        <Button 
        android:id="@+id/btn"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="30dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="30dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn2"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="30dp"
        android:text="Toast"/>
    </LinearLayout>
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp">

        <Button 
        android:id="@+id/btn"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="30dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="30dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn2"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="30dp"
        android:text="Toast"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="40dp">

        <Button 
        android:id="@+id/btn"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn2"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:text="Toast"/>
    </LinearLayout>
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        >

        <Button 
        android:id="@+id/btn"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn2"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:text="Toast"/>
    </LinearLayout>
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        >

        <Button 
        android:id="@+id/btn"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:text="Toast"/>
        <Button 
        android:id="@+id/btn2"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="50dp"
        android:text="Toast"/>
    </LinearLayout>

</LinearLayout> 
```

# window - 为什么 isActive 不能与键盘绑定器一起使用？

> ID：11650629
> 
> 赞同：0
> 
> 时间：2012-07-25T13:18:55.383
> 
> 标签：window, wxpython

为什么wxframe[不是从使用全局 gtk binder 调用的函数中引发的？](https://stackoverflow.com/questions/6398417/why-wxframe-isnt-raised-from-a-function-called-with-global-gtk-binder)我遇到了另一个奇怪的行为..

谁能给我一个解决方案（提示也很好:)）为此..？

```
import wx, os
import keybinder

class FrameWithHotKey(wx.Frame):

    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)
        hotkey = "<Ctrl>period"
        keybinder.bind(hotkey, self.toggle_shown)

    def toggle_shown(self):
        # windowNow id
        if self.IsShown():
            self.Hide()
        else:
            self.Show()
            self.Raise()
        print self.IsActive()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame = FrameWithHotKey(None)
    app.MainLoop() 
```

如果按下热键 isActive 总是返回 false。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:55:49.710

一些快速的谷歌搜索发现[了这个 wx.PyApp.IsActive() 文档](http://wxpython.org/docs/api/wx.PyApp-class.html#IsActive)，说明该方法仅在所讨论的 wx.PyApp 具有焦点时才返回 true。当然，wx.Frame 和 wx.PyApp 是不同的对象。不幸的是，wxpython 的[wx.TopLevelWindow 文档](http://wxpython.org/docs/api/wx.TopLevelWindow-class.html)没有提供详细的解释`IsActive()`，但是[wxwidget 的文档](http://docs.wxwidgets.org/2.8/wx_wxtoplevelwindow.html#wxtoplevelwindowisactive)似乎表明这种“焦点检查”的推理方式值得追求。

我采用了您的代码的修改版本（已删除`gtk`，`keybinder`因为我没有安装它们。将您的`toggle_shown`方法绑定到`wx.EVT_KEY_DOWN`）并设置断点`print self.IsActive()`，然后手动运行几行调试代码。我观察到以下行为：

> >self.IsActive()
> 假
> 
> >self.SetFocus()
> 
> >self.IsActive()
> 真
> 
> >self.HasFocus()
> 真

在我看来，仅仅因为您将窗口放在顶层（使用`self.Raise()`）并不意味着您将应用程序设置为活动的（即给予它焦点）。

当然，这提出了一个问题，即为什么有两种方法`IsActive()`和`HasFocus()`，它们看起来检查相同的东西。我不知道这个问题的答案。

# c - Posix vs System V中基于共享内存的管道之间的区别？

> ID：11650630
> 
> 赞同：0
> 
> 时间：2012-07-25T13:18:59.253
> 
> 标签：c, operating-system, posix, shared-memory

作为我的家庭作业项目的一部分，我必须实现一个使用共享内存实现管道的库。匿名管道和命名管道。

我选择了`Posix`实现，意思是，我使用了以下调用：

```
mmap()
shm_open()
ftruncate()
shm_unlink()

For semaphores and synchronization 

sem_init()
sem_getvalue()
sem_wait()
sem_post() 
```

（我可能会忘记一两个电话）

我的 TA 告诉我，他更喜欢我用`System V`version 来实现那个库，但是因为我正在考试中，所以我没有额外的时间来做这件事（我猜至少需要一周时间）。

我的问题是：

1.  在 Posix 中实现的管道与在 System-V 中实现的管道有什么区别？
2.  `Sys V`使用该版本实现上述库需要哪些调用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:31:12.893

关于问题（1） -`Posix`管道的`System V`实现和管道的实现之间应该没有区别 - 如果您正在使用一组例程实现库，那么用户不应该看到两者之间的任何区别实施。

对于开发者来说，用于共享内存的调用`System V`是：[`shmget`](http://www.wlug.org.nz/shmget%282%29)创建[`shmat`](http://www.wlug.org.nz/shmat%282%29)访问和[`shmctl`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/shmctl.html)销毁（`shmdt`用于从当前进程取消映射共享内存段）。

您使用[`ftok`](http://www.wlug.org.nz/ftok%283%29)将文件名转换为您将使用的密钥的调用。

请注意，关键是区分不同共享内存/信号量项的神奇*唯一项。*

用于获取您使用的信号量[`semget`](http://www.wlug.org.nz/semget%282%29)、锁定和解锁您使用的信号量[`semop`](http://www.wlug.org.nz/semop%282%29)以及销毁您使用的信号量[`semctl`](http://www.wlug.org.nz/semctl%282%29)。

System V 信号量和共享内存段可以在程序执行后继续存在 - 即，如果程序在没有销毁它们的情况下终止，那么它们将保留在系统中，直到它们被销毁或以编程方式重新创建，或者使用[`ipcrm`](http://linux.about.com/library/cmd/blcmdl8_ipcrm.htm)

# javascript - window.open 仅在 Firefox 中？

> ID：11650633
> 
> 赞同：0
> 
> 时间：2012-07-25T13:19:08.643
> 
> 标签：javascript, html

对不起，如果这是一个重复的问题！

我有以下 Javascript 可以在 Firefox 中正常工作并生成一个弹出窗口。然而在 IE 9 中它什么都不做，而在 Chrome 中它就像一个链接并改变当前页面！

任何建议表示赞赏！

```
window.open(page,name,'width='+width+', height='+height+',location=yes,menubar=no,resizable=no,toolbar=no,scrollbars=yes'); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:35:48.000

这是一个工作示例

**JS**

```
function openWindow()
{
    var width=668;
    var height=548;
    var page="http://google.com";
    window.open(page, "awindow", "width="+width+",height="+height+",location=yes,scrollbars=yes, resizable=yes");
} 
```

**HTML**

```
<a href="javascript:openWindow()">Open</a>​ 
```

[**演示。**](http://jsfiddle.net/heera/BMm9a/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:29:51.937

您是否正确创建了变量？

这段代码对我有用：

```
var page = 'page.php';
var name = 'pagename';
var width = 200;
var height = 100;
window.open(page,name,'width='+width+', height='+height+',location=yes,menubar=no,resizable=no,toolbar=no,scrollbars=yes'); 
```

编辑

在我的 webapp 中，我使用以下功能打开窗口。它应该适用于所有浏览器。

```
function wopen(url, name, w, h, scrollb) {
    scrollb = typeof(scrollb) != 'undefined' ? scrollb : 'no';
    w += 32;
    h += 96;
    wleft = (screen.width - w) / 2;
    wtop = (screen.height - h) / 2;
    var win = window.open(url, name,
    'width=' + w + ', height=' + h + ', ' + 'left=' + wleft + ', top=' + wtop + ', ' +
    'location=no, menubar=no, ' +
    'status=no, toolbar=no, scrollbars=' + scrollb + ', resizable=yes');
    // Just in case width and height are ignored
    win.resizeTo(w, h);
    // Just in case left and top are ignored
    win.moveTo(wleft, wtop);
    win.focus();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:22:13.937

你在哪里打电话`window.open`？如果在页面加载期间作为其弹出窗口阻止程序的一部分进行调用，IE9 将阻止调用。Chrome 做了类似的事情，但将新窗口重定向到主选项卡（因此，让用户处于控制之中）。至于 Firefox... 检查您的 FF 弹出窗口阻止程序设置。

# excel - 替代单元格在excel中的自动增量？

> ID：11650637
> 
> 赞同：1
> 
> 时间：2012-07-25T13:19:14.390
> 
> 标签：excel, auto-increment

请检查例如。

> 行 - 值
> 
> 1 - 测试1
> 
> 2 - 测试1
> 
> 3 - 测试2
> 
> 4 - 测试2
> 
> 5 - 测试3
> 
> 6 - 测试3

像这样自动必须在 MS-Excel 中增加而不使用任何脚本

请给我一个建议

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T13:21:58.740

您可以结合使用行号 ( `ROW()`) 和舍入来获得所需的结果：

```
="test" & ROUND(ROW() / 2, 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:41:22.837

这不完全是您要寻找的，它需要一些解决方法，但它在已知数量的行上对我有用。

它依赖于 Excel 的内置功能来计算填充系列。

首先，您改为这样设置数据。我们为每个递增的数据点跳过了一行。

![数据设置](../Images/d111f1c69f322c4f90cc732d6e10c622.png)

然后突出显示数据**并包括它下面的行**，如下所示：

![数据亮点](../Images/e9c8594c6c8e418ad2375c97a810d987.png)

现在，由于您为每个数据点使用两行，因此将填充手柄向下拖动到**偶数行**：

![数据下拉](../Images/4953c9ebec58ece33913ee7a1db2ea98.png)

现在我们使用众所周知的填空技术：

*   转到特殊，空白：

![去特别的，空白](../Images/0b206772c071e22c4e57001cfc9710ef.png)

*   键入`=`、↑、`Ctrl`+ `Enter`（等号、向上箭头、Ctrl+Enter）

![数据公式](../Images/2af835ae8dd878291ebdbbba459dabfe.png)

*   突出显示值，复制 ( `Ctrl`+ `C`) 和粘贴值。

# android - 电话号码后的android搜索联系人

> ID：11650639
> 
> 赞同：0
> 
> 时间：2012-07-25T13:19:17.650
> 
> 标签：android, contacts

我有以下代码：

```
public String getContactDisplayNameByNumber(String number) {

        Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));
        String name = "?";

        ContentResolver contentResolver = getContentResolver();
        Cursor contactLookup = contentResolver.query(uri, new String[] {BaseColumns._ID,
                ContactsContract.PhoneLookup.DISPLAY_NAME }, null, null, null);

        try {
            if (contactLookup != null && contactLookup.getCount() > 0) {
                contactLookup.moveToNext();
                name = contactLookup.getString(contactLookup.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
                //String contactId = contactLookup.getString(contactLookup.getColumnIndex(BaseColumns._ID));
            }
        } finally {
            if (contactLookup != null) {
                contactLookup.close();
            }
        }
        Toast.makeText(this, name, Toast.LENGTH_LONG).show();

        return name;
    } 
```

在这里，我正在根据完整的联系人电话号码搜索联系人姓名。是否可以仅根据电话号码中的 4 个号码搜索联系人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:51:19.413

获取整个联系人号码和姓名，使用正则表达式获取匹配的条目？

# php - 为什么 _SERVER["HTTPS"] 没有设置为 1？

> ID：11650640
> 
> 赞同：7
> 
> 时间：2012-07-25T13:19:18.790
> 
> 标签：php, apache, webserver

我的网站有一个 SSL 证书，我正在点击[https://mysite.com/info.php](https://mysite.com/info.php)，但在 PHP 变量部分 _SERVER["HTTPS"] 没有被报告。我相信这会导致 Drupal 站点出现问题，其中一些 URL 以 https://... 形式写入页面，而另一些则以 http://...

什么决定是否设置了 _SERVER["HTTPS"]？

* * *

**编辑：**这可能是我的问题[Detecting HTTPS vs HTTP on server send back nothing有用](https://stackoverflow.com/questions/552162/detecting-https-vs-http-on-server-sending-back-nothing-useful)的问题的答案。可能是负载平衡器问题

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T13:07:21.070

事实证明，由于负载均衡器处理 SSL 加密/解密，Web 服务器没有得到 $_SERVER["HTTPS"]，但 $_SERVER["HTTP_USESSL"] 已设置并可用作闪存SSL 流量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T13:22:32.377

它在文档中说`$_SERVER['HTTPS']`

```
Set to a non-empty value if the script was queried through the HTTPS protocol. 
```

所以

```
function checkHTTPS() {
    if(!empty($_SERVER['HTTPS']))
        if($_SERVER['HTTPS'] !== 'off')
            return true; //https
        else
            return false; //http
     else
        if($_SERVER['SERVER_PORT'] == 443)
            return true; //https
        else
            return false; //http
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-08T11:16:03.967

在代理/负载均衡器后面

$_SERVER['SERVER_PORT'] 总是 80

$_SERVER["HTTPS"] 和 $_SERVER["HTTP_USESSL"] 为 NULL

我使用了返回 http 或 https 的 $_SERVER['HTTP_X_FORWARDED_PROTO']

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-30T23:11:40.753

添加到 Arnaud Hallais 的帖子中，我设法在我的本地主机 (apache/mac)、测试服务器 (apache/linux) 和生产站点 (iis/win) 上获得正确协议的唯一方法是：

```
define("PROTOCOL", isset($_SERVER['HTTP_X_FORWARDED_PROTO']) ? $_SERVER['HTTP_X_FORWARDED_PROTO'] : ((isset( $_SERVER["HTTPS"] ) && strtolower( $_SERVER["HTTPS"] ) == "on" ) ? 'https' : 'http')); 
```

# c# - 数据模板中的 MVVM 灯光命令

> ID：11650645
> 
> 赞同：2
> 
> 时间：2012-07-25T13:19:24.987
> 
> 标签：c#, mvvm-light

我创建了一个包含 ListView 的用户控件。当用户更改嵌套文本框的文本（使用 MVVM Light）时，我想添加一个 RelayCommand：

```
<UserControl xmlns:my="clr-namespace:UI.View"  x:Class="UI.View.MontureView"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.WPF4"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" >
        <ListView ItemsSource="{Binding Path=Monture}" Margin="0,39,0,95" Height="600" HorizontalAlignment="Center">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Qte" Width="50" >
                        <GridViewColumn.CellTemplate >
                            <DataTemplate>
                                <TextBox Text="{Binding Path=Qte}" Width="40" TextAlignment="Right" Name="a">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="TextChanged" >
                                            <cmd:EventToCommand  Command="{Binding MontureViewModel.MyProperty}" CommandParameter="{Binding ElementName=a}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </TextBox>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
</UserControl> 
```

在我的虚拟机中：（我删除了部分代码）

```
namespace UI.ViewModel
{
    public class MontureViewModel : ViewModelBase
    {
        public MontureViewModel()
        {
            MyProperty = new RelayCommand<TextBox>(e =>
            {
                MessageBox.Show("test");
            });
        }
        public RelayCommand<TextBox> MyProperty { get; set; }
    }
} 
```

我尝试在未嵌套到 DataTemplate （在 ListView 之外）中的 TextBox 上添加一个事件，并且它可以工作。我认为当我进入 DataTemplate 时我必须修改代码。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:16:04.553

您需要将 CommandParameter="{Binding ElementName=a}" 更改为

CommandParameter="{绑定 SelectedItem，ElementName=a}"。这将 CommandParameter 绑定到 GridView 的选定项，并且 ElementName 设置它在绑定中绑定到的控件。

# struts2 - 我想通过使用struts2.0标签一次添加多个图像。如果我不在betwwen中添加图像，它应该插入null

> ID：11650647
> 
> 赞同：0
> 
> 时间：2012-07-25T13:19:29.923
> 
> 标签：struts2

我在页面上有多个浏览按钮，如果我没有在一个浏览按钮中输入图像，它应该在该索引上插入 null，而不是将下一个图像放在同一个标​​签中。示例：--假设页面上有 3 个浏览按钮，我为第一个和第三个浏览按钮输入图像，而不是我在操作中获得的文件数组的大小为 2，因为它已将第三个图像映射到第二个索引中。但是我希望数组的大小与浏览按钮的数量相同。我该怎么做。

# c# - 无法以编程方式读取 Excel 2010 xltm 电子表格文件

> ID：11650649
> 
> 赞同：1
> 
> 时间：2012-07-25T13:19:31.720
> 
> 标签：c#, excel-2010

我有一些现有的 C# 可以将 *.xlsm 电子表格读入 Excel 2010。当我将 Excel 2010 中的电子表格另存为 xltm 文件时，从“另存为”对话框中选择“启用 Excel 宏的模板 (*xltm)”格式。

生成的文件双击并在 Excel 中启动。由于它是一个模板，因此您可以获得文件的副本，因此一切正常。

如果我尝试使用以下代码加载 xltm 模板文件：

```
using Microsoft.Office.Interop.Excel;

// blah....

Excel._Workbook workbook = _applicationHandle.Workbooks.Add(fullFilename);

// or 

 Excel._Workbook workbook = _applicationHandle.Workbooks._Open(fullFilename, misval, misval,
 misval, misval, misval, misval, misval, misval, misval, misval, misval, misval); 
```

我收到以下错误：

```
Excel cannot open the file 'RiskStationCal.xltm' because the file format or file extension is not valid. Verify that the file has not been corrupted and that the file extension matches the format of the file. 
```

也许 Microsoft API 无法读取模板电子表格？

适用于 Xls 和 Xlsm 文件，但不适用于 XLTM 文件。

# java - 锁定从集群中的 MDB 大规模更新的 JPA 实体层次结构

> ID：11650650
> 
> 赞同：1
> 
> 时间：2012-07-25T13:19:32.860
> 
> 标签：java, jpa, concurrency, locking

在以下情况下我需要一些帮助：想象一个`Job`具有`progress`属性的实体层次结构。一些作业由多个子作业组成，形成一个作业树。这些复合作业的进度是根据它们的子作业计算的。底部作业进度会定期更新，然后自下而上重新计算整个树的进度。作业进度通过收到的 JMS 消息进行更新。在这种情况下，作业是通过 JPA 从数据库中获取的，并且会修改进度并开始递归重新计算。

如果它在集群中运行，我应该如何处理锁定？我想避免两个子作业从 0% 更新到 100% 并且父作业变为 50% 而不是 100% 的情况，因为两个更新都看到 0%、100%，反之亦然。

我的第一个想法是在作业对象上使用同步。但这不行，因为多个运行时对象可能代表数据库中的同一条记录。

你能给我一个好的、有效的方法来处理这种情况吗？

# android-layout - 我需要在 android 中实现一个 linerlayout 并填充一个项目列表。我这样做是因为我希望列表不可滚动？

> ID：11650653
> 
> 赞同：0
> 
> 时间：2012-07-25T13:19:39.317
> 
> 标签：android-layout

最终线性布局 l = (LinearLayout) findViewById(R.id.linearlist); public void onTextChanged(CharSequence s, int start, int before, int count) { textlength = et.getText().length(); array_sort.clear(); for (i = 0; i < namelist.length; i++) {

```
 if (textlength <= namelist[i].length()) {
                    if (et.getText()
                            .toString()
                            .equalsIgnoreCase(
                                    (String) namelist[i].subSequence(0,
                                            textlength))) {
                        array_sort.add(namelist[i]);
                        if (et.getText().length() == 0) {
                            // array_sort.remove(namelist[i]);
                            array_sort.clear(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:34:23.213

只需即时实例化新的 TextView 并将它们添加到您的布局中。

```
TextView view = new TextView(context);
l.addView(view); 
```

# web-services - 豆茎 豆茎配置错误

> ID：11650656
> 
> 赞同：0
> 
> 时间：2012-07-25T13:19:48.113
> 
> 标签：web-services, amazon-web-services, amazon-elastic-beanstalk

我将一个war文件部署到弹性beantalk中，但我不断收到此错误：

> 健康检查 URL 配置错误

我的环境设置为红色。

我将我的应用程序的第一个 html 页面作为健康检查的 URL。

有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:22:00.640

健康检查 url 必须以 200 (ok) 的 http 状态代码回复，您确定您指向的根页面这样做吗？

还要记住，elb 将在您设置的每个时间间隔完全加载该页面，如果它是一个非常复杂的页面，这将计为带宽和可能的 db/disk IO。

如果是这样，您可能希望将一个空白的 hc.html 文件添加到您的 web 应用程序中，以便健康检查可以加载或类似的简单内容。

或者您也可以尝试使用此命令检查 url 健康状况

```
 curl -i -X HEAD http://qwert.elasticbeanstalk.com 
```

# python - Python删除numpy数组中的行

> ID：11650663
> 
> 赞同：3
> 
> 时间：2012-07-25T13:20:07.307
> 
> 标签：python, multidimensional-array, numpy

我有一个大的 numpy 数组（8 x 30000），我想根据某些标准删除一些行。此标准仅适用于一列。

例子：

```
>>> p = np.array([[0, 1, 3], [1 , 5, 6], [4, 3, 56], [1, 34, 4]])
>>> p
array([[ 0,  1,  3],
   [ 1,  5,  6],
   [ 4,  3, 56],
   [ 1, 34,  4]]) 
```

在这里，我想删除第三列的值> 30的每一行，即。这里是第 3 行。

由于数组非常大，我想避免`for`循环。我想到了这个：

```
>>> a[~(a>30).any(1), :]
array([[0, 1, 3],
   [1, 5, 6]]) 
```

但是在那里，它显然删除了最后两行。关于如何以有效的方式做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:24:05.700

```
p = p[~(p[:,2] > 30)] 
```

或（如果您的情况很容易逆转）：

```
p = p[p[:,2] <= 30] 
```

返回

```
array([[ 0,  1,  3],
       [ 1,  5,  6],
       [ 1, 34,  4]]) 
```

# python - 套接字发送超时 - 更改是否安全？

> ID：11650665
> 
> 赞同：2
> 
> 时间：2012-07-25T13:20:08.977
> 
> 标签：python, windows, vb.net, sockets, connection-timeout

**简短的问题将**[默认超时值](https://serverfault.com/questions/193160/which-is-the-default-tcp-connect-timeout-in-windows)从 72 秒
缩短到 5 秒是否有任何危险或陷阱？

**背景**
我在 VB.NET 中有一个客户端应用程序，在 Python 中有一个服务器，它们都在 Windows 7 上运行并监视活动连接/在检测到损坏的套接字时自行关闭。当客户端或服务器关闭时，所有逻辑都将起作用。如果从 PC 上拔下物理网络电缆，问题就会出现。在此事件之后，我的 socket.send() 超时并退出之前需要整整 72 秒。由于客户端是一个 UI，您可以想象它在意识到连接已死之前等待一分钟是多么烦人。

**编辑**1) 客户端 UI在超时事件期间
未被*阻止。*故障模式是连接指示在 72 秒内显示“已连接”，即使没有发送消息。

2）我每秒从客户端和服务器发送一次心跳消息。使用这些消息速率，如果我**关闭**任何一个应用程序，我会在 5 秒内看到连接失败。**当我拔下网络电缆**时，这个时间就消失了。这就是为什么我现在很茫然...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:10:34.860

如果您每秒发送一次心跳，但在 5 秒内没有收到心跳，则应考虑连接丢失。这基本上只是一个 UI 问题——你有信息，你只是没有报告它。

# iphone - VerificationController #warning 在此处处理错误

> ID：11650669
> 
> 赞同：1
> 
> 时间：2012-07-25T13:20:16.927
> 
> 标签：iphone, objective-c, ios, in-app-purchase

我一直致力于将 Apple在 iOS 上进行应用内购买收据验证的示例[代码集成到我的应用程序代码库中。](http://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html)

有谁知道如何处理 VerificationController.m 中有警告行的两个地方：

```
#warning Handle the error here. 
```

据我所见，代码正在解析一些 plist 数据或 json 数据并将其转换为 NSDictionary，然后用于验证交易信息是否与收据匹配。

我不知道需要做什么才能正确处理错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:08:25.197

忽略这些错误并没有不良影响，代码似乎可以很好地处理它。

您需要确保您的实施：

```
- (NSString *)decodeBase64:(NSString *)input length:(NSInteger *)length 
```

可以处理接收一个 nil NSString ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:06:53.563

如果错误在那里发生，那么函数

```
 - (BOOL)isTransactionAndItsReceiptValid:(SKPaymentTransaction *)transaction
 {
   ......
   BOOL result = checkReceiptSecurity(transactionPurchaseInfo, signature,
                                   (__bridge CFDateRef)(purchaseDate));
   if (!result)
   {
       return NO;
   } 
```

预计会`return NO`。因此，我只需将其替换为`#warning ...`：

```
NSLog(@"%@", [error localizedDescription]); 
```

仅用于调试目的。

# javascript - 页面在加载时消失

> ID：11650675
> 
> 赞同：0
> 
> 时间：2012-07-25T13:20:30.530
> 
> 标签：javascript, extjs, extjs4.1

我有一个包含 ExtJS 4.1 网格的 Web 应用程序。

我创建了网格（并且呈现正确），但是当我加载商店时，整个页面消失了。我在商店中添加了一个*负载*监听器，似乎成功收到了结果。

此问题仅在 IE8 中出现 - Chrome 和 FireFox 显示一切正常。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:19:48.693

我已经设法解决了这个问题。

问题是我也在使用 PIE(http://css3pie.com/) 并自定义了**strong**标签，使其具有阴影和圆角。网格的一个字段有几个**强**标签。似乎一个单元格中存在多个这样的标签会使 IE8 崩溃（或类似的东西），因此出现了上述问题。

# routing - MVC 4 简单的重新路由，如何？

> ID：11650677
> 
> 赞同：0
> 
> 时间：2012-07-25T13:20:35.153
> 
> 标签：routing, asp.net-mvc-4

我正在尝试在 MVC 4 中做一些看似简单的事情：

我收到一个看起来像这样的路线的请求

> 数据/* 随便 *

然后，我想将其重新路由到以下内容：

> 内容/数据/* 随便 *

我想这应该用`routes.MapRoute`in来完成`RouteConfig.cs`，但我不知道怎么做。

# jquery - Uploadify 不会自动上传队列中的所有文件

> ID：11650680
> 
> 赞同：0
> 
> 时间：2012-07-25T13:20:44.420
> 
> 标签：jquery, uploadify

我对uploadify 有一个问题，它不会自动上传队列中的所有文件。要么我没有正确地将它们添加到队列中，要么我遗漏了一些东西。当我单击上传按钮时，我真的希望将队列中的所有文件都上传，但是每次上传完成时我都必须单击上传按钮。

按钮代码：

```
<div id="some_file_queue"></div>
<input type="file" name="batchImport" id="batchImport"/>
<input type="button" class="batchImport" value="Upload Files"> 
```

javascript:

```
$("#batchImport").uploadify({
                'queueSizeLimit':10,
                'queueID':'some_file_queue',
                "swf":"/js/uploadify-v3.1/uploadify.swf",
                "uploader":"/js/uploadify-v3.1/uploadify.php",
                "uploadFolder":"/uploads/",
                "auto":false,
                "multi":true,
                "height":19,
                "width":94,
                "onUploadError":function(file,errorCode,errorMsg,errorString){
                    alert("The file " + file.name + " could not be uploaded: " + errorString);
                },
                "onQueueComplete":function(queueData){
                    console.log(queueData);
                },
                "onUploadSuccess":function(file, data, response){
                    $.ajax({
                        type:"POST",
                        data:{
                            single:1,
                            file:file,
                            data:data,
                            call:'element',
                            objContainer:$('select[name="objContainer"] option:selected').val()
                        },
                        url:"/index.php/upload_handler/handler",
                        success:function(response){
                            checkResponse(response);
                        }
                    });
                }
            });

            $(document).on("click",".batchImport",function(){
                $("#batchImport").uploadifyUpload("*");
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:46:07.583

如果您按照以下方式设置 auto:true： [http](http://www.uploadify.com/documentation/uploadify/auto/) ://www.uploadify.com/documentation/uploadify/auto/ 文件将自动上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:41:02.507

我相信您正在寻找：

```
$("#batchImport").uploadify('upload','*'); 
```

uploadify 网站上的[现场演示。](http://www.uploadify.com/documentation/uploadify/upload/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-09T06:37:04.500

您应该在您的javascript代码中放置“auto”：true..然后它的工作..

$("#batchImport").uploadify({ 'queueSizeLimit':10, 'queueID':'some_file_queue', "swf":"/js/uploadify-v3.1/uploadify.swf", "uploader":"/ js/uploadify-v3.1/uploadify.php", "uploadFolder":"/uploads/", **"auto":true,** "multi":true, "height":19, "width":94, "onUploadError":function(file,errorCode,errorMsg,errorString){ alert("文件 " + file.name + " 无法上传： " + 错误字符串); }, "onQueueComplete":function(queueData){ console.log(queueData); }, "onUploadSuccess":function(file, data, response){ $.ajax({ type:"POST", data:{ single:1, file:file, data:data, call:'element', objContainer:$('select[name="objContainer"] option:selected').val() }, url:"/index.php/upload_handler/handler", success:function(response){ checkResponse(response); } }); } });

```
 $(document).on("click",".batchImport",function(){
            $("#batchImport").uploadifyUpload("*");
        }); 
```

# javascript - 简化此 If 语句，使其不会重复代码 - Javascript

> ID：11650684
> 
> 赞同：2
> 
> 时间：2012-07-25T13:20:52.627
> 
> 标签：javascript, if-statement

我有一个在“for”循环中运行的 If 语句，用于为 Google 地图创建标记。基本上，如果未勾选复选框，它将运行代码全部显示所有标记，但如果勾选复选框，则检查第二个参数并仅运行符合此条件的项目的代码。

我下面的代码工作正常，但这意味着我必须在 if 语句的两个部分使用相同的代码。除了将其构建为函数之外，是否有更好的方法来构造 If 语句来实现这一点？

```
if(!FriendlyChecked){

    //Code here

} else if(FriendlyChecked && Friendly == "Yes"){

    //Same code here

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T13:22:40.037

如果`FriendlyChecked`为假，则满足第一个条件并执行代码。

因此，如果满足第二个条件，则`FriendlyChecked`必须为真，因此您根本不需要检查它，您只需要检查`Friendly == "Yes"`.

```
if(!FriendlyChecked || Friendly == "Yes"){
    // code here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:22:43.623

```
if( !FriendlyChecked || (FriendlyChecked && Friendly == "Yes") ) {

  // your code

} 
```

`!FriendlyChecked || (FriendlyChecked && Friendly == "Yes")`将检查是否`FriendlyChecked`为`false`（未检查）

**OR** 是`FriendlyChecked`is`true`的值`Friendly``Yes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:27:23.660

这将解决您的问题

```
 if((!FriendlyChecked) ||((FriendlyChecked)&&(Friendly == "Yes")){

 //Code here

} 
```

# c# - gridview 分页不工作

> ID：11650685
> 
> 赞同：5
> 
> 时间：2012-07-25T13:20:58.657
> 
> 标签：c#, asp.net, gridview, paging, page-index-changed

我有一个 gridview 控件，但是，当我单击页码时，出现错误“找不到页面”。我在这里想念什么？

**我的代码是：**

```
<asp:GridView ID="gvEmployeeResults" Width="900px" CellSpacing="1" 
    CellPadding="2"  
    AutoGenerateColumns="false" OnRowDataBound="gvEmployeeResults_OnRowDataBound" 
    runat="server" AllowPaging="true" >
    <Columns>
        <asp:TemplateField HeaderText="Last Name, First Name" ItemStyle-Wrap="true" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="left">
            <ItemTemplate>
                    <asp:LinkButton id="lbtnEmployeeName" OnCommand="EditEmployee_Command" CommandArgument='<%#Eval("EmployeeNum")%>' CommandName="EmployeeName" Visible="true" runat="server" ToolTip="Click to edit Employee."><%# DataBinder.Eval(Container.DataItem, "empLastName") + ", " + DataBinder.Eval(Container.DataItem, "empFirstName")%></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="empAddrLine1" ControlStyle-Width="225px" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="left" HeaderText="Address" />
        <asp:BoundField DataField="empCity" ControlStyle-Width="120px" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="left" HeaderText="City" />
        <asp:BoundField DataField="empState" ControlStyle-Width="50px" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="left" HeaderText="State" />
        <asp:BoundField DataField="empPostalCode" ControlStyle-Width="100px" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="left" HeaderText="Zip" />
        <asp:BoundField DataField="empDOB" ControlStyle-Width="100px" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="left" HeaderText="Date Of Birth" />
    </Columns>
</asp:GridView>

        protected void BindGridview()
        {
            corpEmployee.Employee emp = new corpEmployee.Employee();

            emp.empLastName = tboxLastName.Text.Trim();
            emp.empFirstName = tboxFirstName.Text.Trim();
            emp.empDOB = tboxDateOfBirth.Text.Trim();

            gvEmployeeResults.DataSource = corpEmployeeMgr.GetEmployees(emp);
            gvEmployeeResults.DataBind();
        }

        protected void gvEmployeeResults_OnRowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                if (e.Row.Cells[0].Text.Contains("nbsp;"))
                {
                    e.Row.Cells[0].Text = e.Row.Cells[0].Text.Replace("&lt;", "<").Replace("&gt;", ">").Replace("&amp;", "&");
                }
            }
            else
            {
                return;
            }
        }

        protected void gvEmployeeResults_PageIndexChanging(object sender, GridViewPageEventArgs e)
        {
            gvEmployeeResults.PageIndex = e.NewPageIndex;
            gvEmployeeResults.DataBind();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:24:04.007

您必须使用 EnableViewstate= true 并绑定一次并使用 IsPostback。（页面索引）

```
1\. EnableViewState=true for your control

2\. In the page load 

If(! IspostBack )
{
   Bind()....
}

And set PageIndex 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:23:19.753

您必须调用`BindGridview()`事件`PageIndexChanging`处理程序。

```
protected void gvEmployeeResults_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
   gvEmployeeResults.PageIndex = e.NewPageIndex;
   BindGridview();
} 
```

# java - 使用 Xpath 检查特定节点是否存在于 Xml 文件中

> ID：11650690
> 
> 赞同：-2
> 
> 时间：2012-07-25T13:21:24.040
> 
> 标签：java, xml, xpath

我想`code = "ABC"` 使用 xPath 检查我的 xml 文件中是否存在。你能建议我一些方法吗？

```
<metadata>
 <codes class = "class1">
      <code code = "ABC">
            <detail "blah blah"/>
        </code>
  </codes>
  <codes class = "class2">
      <code code = "123">
            <detail "blah blah"/>
        </code>
  </codes>
 </metadata> 
```

[编辑] 我做了以下。它返回空值。

```
 XPath xPath = XPathFactory.newInstance().newXPath();
            XPathExpression expr = xPath.compile("//codes/code[@ code ='ABC']");
            Object result = expr.evaluate(doc, XPathConstants.NODESET);

            NodeList nodes = (NodeList) result;
            for (int i = 0; i < nodes.getLength(); i++) {
                System.out.println("nodes: "+ nodes.item(i).getNodeValue()); 
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:26:01.020

我不知道你是如何测试你的代码的，因为`<detail "blah blah"/>`它是一个不正确的 xml 构造，它应该是`<detail x="blah blah"/>`一个***名称-值***对！

对于 XPath 表达式`"//codes/code[@ code ='ABC']"`，`nodes.item(i).getNodeValue())`将是**`null`**因为它将返回一个元素。请参阅下面的 Javadoc 注释：

![在此处输入图像描述](../Images/42b60fa5ec3a263a79e4407469b10781.png)

***`A working sample:`***

```
import java.io.ByteArrayInputStream;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;

public class Test 
{
    public static void main(String[] args) throws Exception
    {
        Document doc = getDoc();
        XPath xPath = XPathFactory.newInstance().newXPath();
        XPathExpression expr = xPath.compile("//codes/code[@code ='ABC']");
        Object result = expr.evaluate(doc, XPathConstants.NODESET);

        NodeList nodes = (NodeList) result;
        System.out.println("Have I found anything? " + (nodes.getLength() > 0 ? "Yes": "No"));

        for (int i = 0; i < nodes.getLength(); i++) {
            System.out.println("nodes: "+ nodes.item(i).getNodeValue()); 
        }

    }

    private static Document getDoc() 
    {
        String xml = "<metadata>"+
                 "<codes class = 'class1'>"+
                      "<code code='ABC'>"+
                            "<detail x='blah blah'/>"+
                        "</code>"+
                  "</codes>"+
                  "<codes class = 'class2'>"+
                      "<code code = '123'>"+
                            "<detail x='blah blah'/>"+
                        "</code>"+
                  "</codes>"+
                 "</metadata>";

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

        try {

            DocumentBuilder db = dbf.newDocumentBuilder();
            Document dom = db.parse(new ByteArrayInputStream(xml.getBytes()));
            return dom;

        }catch(Exception pce) {
            pce.printStackTrace();
        }
        return null;
    }
} 
```

# sql - 如果 TSQL 中不存在存储过程，如何创建它

> ID：11650692
> 
> 赞同：1
> 
> 时间：2012-07-25T13:21:40.390
> 
> 标签：sql, sql-server, sql-server-2008, tsql, stored-procedures

我试过这个：

```
if object_id('a_proc22') is not null
CREATE PROCEDURE a_proc22 AS SELECT 1
go 
```

但它给了我一个语法错误。

但这似乎编译：

```
if object_id('a_proc22') is not null
EXEC('CREATE PROCEDURE a_proc22 AS SELECT 1')
go 
```

为什么第一个不正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:27:15.203

我猜这个错误类似于“CREATE/ALTER PROCEDURE 必须是查询中的第一条语句”，所以，这意味着它`CREATE PROCEDURE`必须是查询中的**第一**条语句。如果你把它包装在一个 上`EXEC`，那么当它执行时，它就是那个查询的第一条语句，所以这就是它起作用的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-22T10:22:38.033

```
IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[a_proc22]')
           AND TYPE IN (N'P', N'PC'))
DROP PROCEDURE [dbo].[a_proc22];
GO

CREATE PROCEDURE [dbo].[a_proc22]
AS
BEGIN 

-- Code here

END
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:39:38.027

您的第一条语句给出错误，因为在 if 条件之后您不能放置创建/更改过程语句。试试这个

```
if Exists(select * from sys.procedures  -- if exists then drop it
    where name = 'a_proc22')
    Drop procedure a_proc22
    GO
    CREATE PROCEDURE a_proc22 -- create the new procedure
    AS
    SELECT 1
    go 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T15:07:47.970

```
if object_id('a_proc22') is not null
drop procedure a_proc22 
go
create procedure a_proc22 
AS 
SELECT 1 
```

GO 是下降后的重要内容，您不能先创建，我想出于安全目的进行一些 SQL 验证。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-25T13:24:44.217

```
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[a_proc22]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[a_proc22]
--and create here... Or you can remove the drop and create with if not exists
GO 
```

# java - 你知道用 Java 将 CopyBook 转换为 XSD 的方法吗？

> ID：11650695
> 
> 赞同：1
> 
> 时间：2012-07-25T13:21:55.023
> 
> 标签：java, xsd, copybook

我正在尝试使用 java 快速完成此操作 - 获取 CopyBook 文件，并从此 CopyBook 生成 xsd。

（我知道有一些开源项目可以从 cb 创建 xml，但不幸的是，它们生成的 xml 包含项目以及许多标签和属性，不幸的是，它也不是 XSD）

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:28:00.617

这可能会满足您的要求：- [cobol 到 xml 转换器](http://cb2xml.sourceforge.net/)

虽然没有使用此工具的个人经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:31:25.170

据我所知，没有开源的、基于 Java 的项目可以为您做到这一点。如果您需要定期执行此操作，那么解决方案是让您编写一些 Java 代码，以从您使用 XML 收集的元数据生成 XSD（如果我记得的话，有一个很好的 SourceForge cb2xml 项目）。

如果这只是一次，那么我建议你下载 eval 版本的[QTAssistant](http://paschidev.com)（我与它相关联）；有一个 COBOL to XML Schema 工具可以为您完成（在工具选项卡下，企业工具箱组）。

可能有几件事可能需要调整您的 COBOL 副本，这取决于您如何获得它 - 与使用 IBM 的 Rational Application Developer 之类的工具从COBOL 字帖。

如果遇到困难，请发送电子邮件至网站上的支持地址。

# javascript - glBindTexture() 是否需要 GLuint 指针？

> ID：11650699
> 
> 赞同：1
> 
> 时间：2012-07-25T13:21:59.553
> 
> 标签：javascript, c++, opengl, v8, embedded-v8

我正在尝试为 OpenGL/V8/JavaScript 中的纹理使用实现 OpenGL 绑定。

**我的问题很简单：**

OpenGL 的 glBindTexture() 方法是否需要指向 GLuint 的指针，还是只需要有效的 GLuint？

这里的khronos 文档说它只需要一个GLuint。

[http://www.khronos.org/opengles/documentation/opengles1_0/html/glBindTexture.html](http://www.khronos.org/opengles/documentation/opengles1_0/html/glBindTexture.html)

**问题如下：**

我在 v8 JavaScript 上下文中有一个自定义数据类型，用于初始化和加载纹理。加载后，纹理通过以下方式生成：

```
// blabla...
GLuint texture;
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_2D, texture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid*) image_data);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
// ...blabla
return texture; 
```

因此，此方法从 c++ 端返回 GLuint，并将转换后的 Integer 值作为属性“id”附加到 JavaScript 上下文中的对象：

```
var texture = new Texture('./texture.png');
texture.load();
texture.onload = function() {
  gl.bindTexture(gl.TEXTURE_2D, texture.id); // this is the casted v8::Integer value
}; 
```

在 v8 中对全局 gl（命名空间）对象使用 bindTexture 方法时，它在本机端执行以下操作：

```
v8::Handle<v8::Value> GLglBindTextureCallback(const v8::Arguments& args) {

  // blabla...
  int arg0 = args[0]->IntegerValue();
  unsigned int arg1 = args[1]->Uint32Value();
  glBindTexture((GLenum) arg0, (GLuint) arg1);
  // ... blabla

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:19:33.570

为什么你认为它需要一个指针？你只需传递一个GLuint。

# python - BeautifulSoup 不适用于某些网站

> ID：11650700
> 
> 赞同：3
> 
> 时间：2012-07-25T13:21:59.827
> 
> 标签：python, web-crawler, web-scraping, beautifulsoup

我有这个脚本：

```
import urrlib2
from bs4 import BeautifulSoup
url = "http://www.shoptop.ru/"
page = urllib2.urlopen(url).read()
soup = BeautifulSoup(page)
divs = soup.findAll('a')
print divs 
```

对于[这个](http://www.shoptop.ru)网站，它打印空列表？有什么问题？我在 Ubuntu 12.04 上运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:46:59.573

实际上，BeautifulSoup 中有很多错误可能会引发一些未知错误。我在使用`lxml`解析器处理 apache 时遇到了类似的问题

因此，只需尝试使用[文档中提到的其他几个解析器](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

```
soup = BeautifulSoup(page, "html.parser") 
```

这应该工作！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-25T13:33:38.517

看起来你的代码中有一些错误 urrlib2 应该是 urllib2，我已经为你修复了代码，这可以使用 BeautifulSoup 3

```
import urllib2
from BeautifulSoup import BeautifulSoup
url = "http://www.shoptop.ru/"
page = urllib2.urlopen(url).read()
soup = BeautifulSoup(page)
divs = soup.findAll('a')
print divs 
```

# c# - 是否可以重用代码进行集成和单元测试？

> ID：11650703
> 
> 赞同：5
> 
> 时间：2012-07-25T13:22:06.957
> 
> 标签：c#, unit-testing, language-agnostic, tdd, integration-testing

我使用具有单元和集成测试的分布式系统。我试图通过在集成和单元测试之间重用代码来节省时间和维护工作。为此，我实现了一个接口和 2 个类：fake 和 real。*假*类返回一些存根数据，而*真实*类对其他分布式服务进行一些调用。

我的项目的当前结构

```
/BaseTest              
   接口 IFoo
-------------------------------------
/单元测试
   FakeFoo 类：IFoo

   [测试夹具]
   class FooTest {...} //使用 FakeFoo
-------------------------------------
/集成测试
   类 RealFoo : IFoo

   [测试夹具]
   class FooTest {...} //使用 RealFoo

```

我想以某种方式重用两个测试的代码，所以如果我有一个测试

```
[Test]
public void GetBarIsNotNullTest()
{
    var foo = IoC.Current.Resolve<IFoo>();
    Bar actual = foo.GetBar();
    Assert.IsNotNull(actual);   
} 
```

我希望这个测试在两种实现中运行：`RealFoo`和`FakeFoo`. 到目前为止，我考虑过在*/UnitTest*和*/IntegrationTest*项目之间复制粘贴测试，但这听起来不对。

系统是用 C# 编写的，但我相信这个问题与语言无关。

**有人有更好的想法吗？我做错了吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:09:36.990

**即使其他人的答案很好，这就是我最终做的**

我为单元和集成测试创建了一个基类

```
[TestFixture]
public class FooBase
{
    [Test]
    public void GetBarIsNotNullTest()
    {
        var foo = IoC.Current.Resolve<IFoo>();
        Bar actual = foo.GetBar();
        Assert.IsNotNull(actual);   
    }

    //many other tests  
} 
```

然后是两个派生类`FooBase`。这些类将只有 the`SetUp`而没有别的。IE：

```
[TestFixture]
public class UnitTestFoo : FooBase
{
    [SetUp]
    public void SetUp()
    {
        IoC.Current.Register<IFoo, FakeFoo>();        
    }

    //nothing else here
}

[TestFixture]
public class IntegrationTestFoo : FooBase
{
    [SetUp]
    public void SetUp()
    {
        IoC.Current.Register<IFoo, RealFoo>();        
    }

    //nothing else here
} 
```

因此，如果我现在运行我的测试，我会让父类中定义的测试`FooBase`运行两次，用于单元测试类和集成测试类，它们有自己的*真实*和*假*对象。这是因为测试夹具的继承性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:29:05.390

您的测试场景有一些非常错误的地方。

让我们先看看单元测试。您有一个可以提供可预测结果的依赖存根。您有 CUT，它应该根据存根配置给出*预期的结果。*到目前为止，一切都很好。

但。如果您想在集成测试中重用您的测试代码（您的断言），这实际上意味着您期望您的*真正依赖实现*产生与您在单元测试中存根所做的相同的结果。如果是这样，您为什么不测试您的依赖关系以给出这些结果并跳过整个代码层？

**更新**

你的例子是错误的。`FakeFoo`是一个存根，不应该*被*测试。你做存根来测试*依赖*于某些服务的类。所以让我们假设您正在测试一些`Bar`依赖于的类`IFoo`，这意味着：

```
[Test]
public void GetBarIsNotNullTest()
{
    var bar = IoC.Current.Resolve<Bar>();
    var actual = bar.GetDon();
    Assert.IsNotNull(actual);   
} 
```

并且您在测试中使用了不同的实现`IFoo`。

**澄清我的立场**

因为您在测试中复制了 Act 和 Assert 阶段，所以您很可能在*CUT* ( `Bar`) 中测试相同的代码路径。这意味着测试重复，并不比代码重复好。

你应该确保你的 CUT ( `Bar`) 在所有代码路径上都是好的，通过使用假货（这将是单元测试）。然后您应该确保您的*依赖*项( `RealFoo`) 返回预期的数据（这将是集成测试，因为它适用于分布式服务）。无需使用 进行测试`Bar`，`RealFoo`因为它已经过全面测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:41:12.517

编写自己的虚假实现不会节省您的时间。创建依赖模拟要容易得多：

```
Mock<IFoo> fooMock = new Mock<IFoo>(); 
```

最糟糕的部分是设置你的模拟对象。您可以为不同的测试场景设置不同的结果：

```
fooMock.Setup(f => f.Bar).Returns(true);
// or
fooMock.Setup(f => f.Bar).Returns(false); 
```

这对假货来说是不可能的。您将拥有一个`Bar`属性实现，它将返回`true`或`false`。

更新：单元测试和集成测试之间的唯一区别是测试的`Arrange`一部分。`Act`并且`Assert`可能是相同的（*如果您只进行状态测试，而不进行交互测试*）。但`Arrange`完全不同。它不仅仅是创建直接依赖的实例。如果您使用模拟，您应该为 SUT 使用的成员设置返回结果。这足以重现测试场景。但是对于真实对象，您应该将堆栈中的所有依赖项设置为**当前**测试场景所需的某种状态。

# php - php的爆炸数组索引

> ID：11650704
> 
> 赞同：0
> 
> 时间：2012-07-25T13:22:07.587
> 
> 标签：php, arrays

使用php的explode和下面的代码

```
$data="test_1, test_2, test_3";
$temp= explode(",",$data); 
```

我得到一个这样的数组

```
array('0'=>'test_1', '1'=>'test_2', 2='test_3') 
```

爆炸后我想要什么

```
array('1'=>'test_1', '2'=>'test_2', 3='test_3') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:25:57.620

你可以这样：

```
$temp = array_combine(range(1, count($temp)), array_values($temp)); 
```

用于[`array_combine()`](http://ca3.php.net/manual/en/function.array-combine.php)使用现有值（使用[`array_values()`](http://php.net/manual/en/function.array-values.php)）创建数组并[`range()`](http://php.net/manual/en/function.range.php)创建一个从 1 到数组大小的新范围

[这里的工作示例](http://sandbox.onlinephpfunctions.com/code/ec881ac76f1c8523f29a73c2926c7c99d8a7a848)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:23:21.160

数组索引从 0 开始。如果你真的想让数组从 1 开始，你可以分解它，然后将它复制到另一个数组，索引定义为从 1 开始 - 但是为什么呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:34:00.110

你不能直接这样做，但这会做你所追求的：

```
$temp=explode(',',',' . $data);
unset($temp[0]);
var_dump($temp);
array(3) {
  [1]=>
  string(6) "test_1"
  [2]=>
  string(7) " test_2"
  [3]=>
  string(7) " test_3"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:25:06.750

你可以使用这个可能（未经测试）

```
$newArray=array_unshift($temp,' ');
unset($newArray[0]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T13:25:45.447

使用爆炸是不可能的。

```
for($i = count($temp) - 1; $i >= 0; $i--) 
    $temp[$i + 1] = $temp[$i];
unset($temp[0]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-02T12:25:40.663

Lloyd Watkin 的回答使最少的函数调用达到预期的结果。这无疑是对 ManseUK 方法的一个更好的回答，ManseUK 的方法在字符串被分解后在其单行中使用四个函数。

由于这个问题已经快5年了，老了，如果现在有人敢插话，应该有一些有价值的东西......

我有两件事要解决：

1.  OP 和 Lloyd Watkins 都未能根据示例字符串为他们的 explode 方法分配正确的分隔符。分隔符*应该是*一个逗号，后跟一个空格。

    样本输入：

    ```
    $data="test_1, test_2, test_3"; 
    ```

2.  没有人提供与 Lloyd 的两功能方法相匹配的单线解决方案。这是：（[演示](http://sandbox.onlinephpfunctions.com/code/d9cf622ff3a268394d520e348e40c1580bbfec59)）

    ```
    $temp=array_slice(explode(", ",", $data"),1,null,true); 
    ```

    这个双函数单行在`$data`字符串前面加上一个逗号，然后是一个空格，然后再分解它。然后`array_slice`忽略第一个空元素，并从第二个元素 ( `1`) 返回到末尾 ( `null`)，同时保留键 ( `true`)。

    根据需要输出：

    ```
    array(
        1 => 'test_1',
        2 => 'test_2',
        3 => 'test_3',
    ) 
    ```

# spring - 自动装配 bean - eclipse 调试为空

> ID：11650709
> 
> 赞同：0
> 
> 时间：2012-07-25T13:22:17.417
> 
> 标签：spring, spring-mvc

我遇到了一个可以让我学习spring mvc的项目。我希望将会话 bean（用户）自动连接到控制器（聊天控制器）中。下面的代码示例似乎可以做到这一点，但是当我设置断点时，我注意到 User 的所有属性都保持为空。然而，printlns 会按预期打印名字。

知道我做错了什么吗？

聊天控制器

```
@Controller
public class ChatController {

    @Autowired
    private User user;

    @RequestMapping(value="/chat")
    public ModelAndView start()
    {
        System.out.println("pre" + user.getFirstName());
        user.setFirstName(user.getFirstName() + " foo");
        System.out.println("post"+user.getFirstName());

        return new ModelAndView("/WEB-INF/views/error.jsp");
    }   

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

} 
```

用户

```
@Component("user")
@Scope(value="session")
public class User {
    private String firstName;

    public String getFirstName() {
        return firstName;
    }
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

} 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>ContactUs</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>springServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/spring-context.xml</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>springServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

弹簧上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
        ">
    <context:component-scan base-package="com" scoped-proxy="targetClass" />

    <mvc:annotation-driven />   
    <context:annotation-config/>

 <!--   <bean id="user" class="User" scope="session" autowire="byName">
        <aop:scoped-proxy/>                 
    </bean>
-->     
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:56:01.657

我通过对 CGLIB 的进一步阅读了解到，这是使用该库的代理的正常行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T13:58:27.893

将出现代理的属性`null`。代理只是到实际类的路由，它不保存类本身的值。

Explore the properties of the proxy and you will find the object with its properties populated; i.e. it might have advised, explore that and find `targetSource`, explore that and find target.

# java - 为什么Java的`indexOf`返回除（-1）以外的负数

> ID：11650716
> 
> 赞同：3
> 
> 时间：2012-07-25T13:22:33.483
> 
> 标签：java, indexof

我有一个多行文本输入文件：如果存在字符串“日志编号：”，则紧随其后的是一个日志编号。如果字符串“日志编号：”不存在，则该记录中没有日志编号。总是有字符串“日志日期：”。它在“日志编号：”之后（如果存在），如果不存在，则出现在文件中的该位置。

我`inputLine`的结果是`BufferedReader`逐行读取我的文件。

```
...
if((inputLine.indexOf("Log Number:"))>-1) {
  logNumRecStart = inputLine.indexOf("Log Number:")+12;}
else
  logNumRecStart = 0;
logNumRecEnd = inputLine.indexOf("Log Date:");
...
logNumber = inputLine.substring(logNumRecStart,logNumRecEnd);
... 
```

当我输出 Start 和 End indeces 时，这是我得到的示例。

```
49>>>  -0 to 357
50>>>  -0 to 361
51>>>  -0 to 384
52>>>  -371 to 390
53>>>  -315 to 334
54>>>  -325 to 352 
```

记录 49-51 是“日志编号：”未出现在输入行中的情况，并且正如预期的那样，`logNumRecStart`设置为 0。记录 52-54*确实*包含“日志编号：”，但索引被设置为负数number，导致我的子字符串出现越界异常。目视检查文件表明在适当的行中存在（或不存在）测试值。我的`logNumRecEnd`价值在所有情况下都是正确的。

通过计算源文件中 的字符`inputLine`，我已经验证了如果 的负值`logNumRecStart`是正的，那么它就是正确的数字。

我没有使用`lastIndexOf`，所以我不知道为什么我会得到负值。任何人都可以看到我遗漏的东西或我需要检查我没有提到的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T13:26:42.500

我会将代码更改为以下内容以确保您没有错误。

```
final int logNumberPos = inputLine.indexOf("Log Number:");
final int logNumRecStart = logNumberPos > -1) ? logNumberPos + 12 : 0;
final int logNumRecEnd = inputLine.indexOf("Log Date:", logNumRecStart);

if (logNumRecEnd > 0)
    logNumber = inputLine.substring(logNumRecStart, logNumRecEnd); 
```

* * *

> 49>>> -0 到 357

我怀疑你`-`在数字前面打印 a ，因为没有`-0`for `int`（顺便说一句：你说这是`0`）

> 52>>> -371 到 390

这应该`371 to 390`更有意义。

顺便说一句：有这样的`-0.0`事情`double``float`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:31:44.617

```
if((inputLine.indexOf("Log Number:"))>-1) {
  logNumRecStart = inputLine.indexOf("Log Number:")+12;}
else
  logNumRecStart = 0;
logNumRecEnd = inputLine.indexOf("Log Date:");
... 
```

这一切都是正确的，并且为您提供了正确的值，因此您的错误必须在...您在某处遗漏的地方。

# sql-server - 在 SQL Server 上的事务中读取数据的成本

> ID：11650723
> 
> 赞同：0
> 
> 时间：2012-07-25T13:23:08.073
> 
> 标签：sql-server, transactions

我正在通过网络将一些数据从 sql server 复制到 firebird。由于完整性，我需要使用事务，但我正在传输大约 9k 行。相对于非交易模式的阅读，在打开的交易中阅读对阅读成本有一些负面影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:46:24.613

“非交易模式”根本不存在，总有一笔交易，不管你声明与否。问题实际上是在隐式事务中读取与在显式事务中读取之间是否有任何区别。简短的回答是**否定的，没有区别**。

如果您在更高的隔离级别下使用显式事务，则*可能会有一些差异，而不是默认的 READ_COMMITTED。*这还取决于您是否在显式交易中做*了其他任何事情*，但是所有这些细节都无法从您帖子中的节俭信息中推断出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:52:50.817

默认事务隔离级别是 READ COMMITTED。它会在查询时为其他人锁定表。

MSDN 关于事务隔离级别：http: [//msdn.microsoft.com/en-us/library/ms173763.aspx](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

我遇到了一个关于锁定死锁的奇怪错误消息的问题。这甚至发生在 stackoverflow - 请参阅 Jeff Atwood 的这篇精彩文章。我强烈建议切换到“读取提交快照”，这解决了错误+我的性能问题。

[http://www.codinghorror.com/blog/2008/08/deadlocked.html](http://www.codinghorror.com/blog/2008/08/deadlocked.html)

# perl - 在两个单独的目录中查找两个最新文件并将它们合并

> ID：11650725
> 
> 赞同：2
> 
> 时间：2012-07-25T13:23:14.887
> 
> 标签：perl

我有两个目录，每个目录都包含图片。区域目录每 5 分钟更新一次，监视目录每 15 分钟更新一次。

我想做的是在每个目录中找到最新的文件并获取这些文件并使用*Image Magik*创建第三个图像。

我对某些人有用但非常不一致，例如，当时间与监视文件匹配时，我的代码有时会错过区域文件。

有时它会合并两个监视文件，即使监视文件和区域文件位于两个单独的目录中。

我不知道如何解决它。
这是我的代码：

```
#!/usr/bin/perl

use strict;
use warnings;
use File::Find;

use vars qw/%files_watch/;
use vars qw/%files_regional/;

sub findNewestFiles {
    my $element = $File::Find::name;
    return if ( !-f $element );

    $files_watch{$element} = ( stat($element) )[10];
    $files_regional{$element} = ( stat($element) )[10];

}

my $image_magick_exe = "composite.exe\"";
my $pic_dir = "C:\\eterra\\eterravision\\weather";
my $watch_dir = "C:\\eterra\\eterravision\\weather\\watch";
my $regional_dir = "C:\\eterra\\eterravision\\weather\\regional";

open( OUT, ">>names.txt" ) || die;

find( \&findNewestFiles, $watch_dir );
my $newestfile_watch;
my $time_watch = 0;

while ( my ( $t1, $t2 ) = each(%files_watch) ) {
    if ( $t2 > $time_watch ) {
        $newestfile_watch = $t1;
        $time_watch       = $t2;

    }

}

$time_watch = localtime($time_watch);

find( \&findNewestFiles, $regional_dir );
my $newestfile_regional;
my $time_regional = 0;

while ( my ( $t3, $t4 ) = each(%files_regional) ) {
    if ( $t4 > $time_regional ) {
        $newestfile_regional = $t3;
        $time_regional       = $t4;

    }
}

$time_regional = localtime($time_regional);

$newestfile_watch =~ s/\//\\/g;
$newestfile_regional =~ s/\//\\/g;    #replacing the "/" in the file path to "\"

my @temp = split( /_/, $newestfile_regional );

my $type = $temp[0];
my $date = $temp[1];
my $time = $temp[2];

my $check = "$pic_dir/radarwatch\_$date\_$time";    #check if file was created

unless ( -e $check )

{

    system("\"$image_magick_exe \"$newestfile_regional\" \"$newestfile_watch\"      \"$pic_dir\\radarwatch\_$date\_$time\"");

    print "file created\n";
} 
```

我将子函数中的 [10] 更改为 [8] 和 [9]。8是访问时间，9是修改时间，10是创建时间，10是最成功的。

我认为问题出在子功能上。有没有更好的方法来搜索最新的创建时间？比我拥有的更可靠的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:02:05.300

我认为你的问题的症结是在每个目录中找到最新的文件，然后处理它们。撇开处理它们的细节不谈，这是一个查找最新文件的脚本。我省略了 imagemagick 的东西，它们都可以放入 process_latest 子例程中。不需要文件::查找。File::stat 允许我们使用名称而不是试图记住这些数字。该程序具有更清晰的结构。

```
use strict;
use warnings;
use File::stat;

my $watch_dir    = "C:\\eterra\\eterravision\\weather\\watch";
my $regional_dir = "C:\\eterra\\eterravision\\weather\\regional";

# get the latest in each directory
my $latest_regional = get_latest_file($regional_dir);
my $latest_watch    = get_latest_file($watch_dir);

# do whatever you want here...
process_latest ($latest_regional, $latest_watch);

# I exit 1 in Windows, exit 0 in Unix
exit 1;

#--------------------------------
# subroutines
#--------------------------------

sub get_latest_file {
    my $dir = shift;
    opendir my $DIR, $dir or die "$dir $!";
    my $latest_time = -1;
    my $latest_file = '';
    FILE:
    while (readdir($DIR)) {
        my $file = "$dir\\$_";
        next FILE unless -f $file;
        my $file_time = stat($file)->mtime;
        print "$file $file_time\n";
        if ($file_time > $latest_time) {
            $latest_time = $file_time;
            $latest_file = $file;
        }
    }
    closedir $DIR;
    return $latest_file;
}

sub process_latest {
    my $regional = shift;
    my $watch    = shift;

    print "Latest Regional: $regional\n";   
    print "Latest Watch:    $watch\n";

} 
```

# sql-server-2008 - Sql Server全文索引排序多个索引

> ID：11650731
> 
> 赞同：1
> 
> 时间：2012-07-25T13:23:19.483
> 
> 标签：sql-server-2008, full-text-search

我们系统的几个部分添加了全文索引，例如论坛、新闻等。这些部分彼此无关，但我们有一个站点范围的搜索功能，可以从这些全文索引中返回结果。

我的问题是我如何对这些进行排名以显示最相关的，因为我得到的排名分数是不相关的，或者有更好的方法来做到这一点？

非常感谢您的帮助。

# css - 将 div 元素缩放到窗口大小

> ID：11650734
> 
> 赞同：0
> 
> 时间：2012-07-25T13:23:25.370
> 
> 标签：css, html

我目前正在为一个新的 Web 应用程序开发[骨架布局](http://jsfiddle.net/methuselah/zRrxf/)，但遇到了一些问题，其中最明显的是 CSS 布局和 DIV。

1) 框 1 和 2（第 1 列）与 3（第 2 列）和 4（第​​ 3 列）不对齐。我怎样才能解决这个问题？

2）我真的很喜欢[这里](http://biblia.com/books/esv)的界面如何在最小化到一定大小时自动调整大小，并在窗口最大化时放大。我一直试图在我的布局中实现这一点，但不能。不幸的是，页脚“突出”。我希望所有内容都适合一页。我该如何在上述网站中实现这一目标？

提前谢谢了。

**HTML：**

```
<!--  
============================================
LOGO
============================================
-->

<div id="wrapper">
    <div class="logo">logo</div>

<!--   
============================================
NAVBAR
============================================
-->   

<div id="header">
    <a href="#">link 1</a>
    &nbsp;|&nbsp;
    <a href="#">link 2</a>
    &nbsp;|&nbsp;
    <a href="#">link 3</a>
    &nbsp;|&nbsp;
    <a href="#">link 4</a>
</div>

  <div style="clear: both;"></div>

<!--  
============================================
NAVIGATION & CONTACTS
============================================
-->

<div class="column" id="first-column">
    <div class="window" id="window-1">1</div>
    <div class="window" id="window-2">2</div>
</div>

<!--   
============================================
MAIN CONTENT
============================================
-->

<div class="column" id="second-column">
    <div class="window" id="window-3">3</div>
</div>

<!--
============================================
CHAT
============================================
-->

<div class="column" id="third-column">
    <div class="window" id="window-4">4</div>
</div>

<!--  
============================================
FOOTER
============================================
-->

        <div style="clear: both;"></div>
        <div class="footer">footer</div>
</div>​ 
```

**CSS：**

```
/*
============================================
GENERAL
============================================
*/

body, html{
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif;
    height: 100%;
}

/*
============================================
LAYOUT SKELETON
============================================
*/

#wrapper {
    margin: 0 auto;
    max-width: 1212px;
    min-height: 540px;
    min-width: 784px;
    position: relative;
    height: 100%;
}

#header{
    text-align:right;
    padding:5px;
    font-size:10px;
    padding-right: 30px;
}

#first-column{
    width: 20%;
    padding-left: 5px;
    height: 100%;
}

#second-column{
    width: 50%;
    height: 100%;
}

#third-column{
    width: 25%;
}

.window{
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border:1px solid #CECECE;
    width:100%;
}

#window-1{
    height:50%;
}

#window-2{
    margin-top:10px;
    height:50%;
}

#window-3{
    height: 100%;
}

#window-4{
    height:100%;
}

.column{
    float:left;
    margin: 5px;
    height: 100%;
}

.logo {
    font-family: arial;
    font-size: 12px;
    float: left;
    padding-left: 10px;
}

.footer {
    margin-top: 10px;
    padding-left: 10px;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:34:20.900

1）您在第 1 列中有 2 个 div，高度为 50%，因此有 2 组边距。您在第 2 列中有 1 个 div，因此只有 1 组边距，因此第 1 列自然会比您使用的边距更长。我能提供的最好的解决方法是在底部添加 10px 的填充。这应该赶上第一列的边距。

2) 添加最小和最大宽度，然后将宽度设置为 %。说最小 100 像素，最大 300 像素和 50% 宽度。只要屏幕是 200px 到 600px 宽，它将是 50%，否则它将处于指定的限制

# c# - 字符串：替换字符串中的最后一个“.something”？

> ID：11650741
> 
> 赞同：1
> 
> 时间：2012-07-25T13:24:00.637
> 
> 标签：c#, .net, regex

我有一些字符串，我想用新字符串替换最后一个 .something。例如：

```
string replace = ".new";
blabla.test.bla.text.jpeg => blabla.test.bla.text.new
testfile_this.00001...csv => testfile_this.00001...new 
```

所以不管`.....`有多少，我只想改变最后一个和最后一个之后的字符串`.`。

我在 C# 中看到有**Path.ChangeExtension**但它只能与**File**结合使用- 有没有办法仅将它与字符串一起使用？我真的需要正则表达式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:26:31.563

您可以使用`string.LastIndexOf('.');`

```
string replace = ".new"; 
string test = "blabla.test.bla.text.jpeg";
int pos = test.LastIndexOf('.');
if(pos >= 0)
    string newString = test.Substring(0, pos-1) + replace; 
```

当然，需要进行一些检查以确保 LastIndexOf 找到最后一点。

但是，看到其他答案，让我说，虽然 Path.ChangeExtension 有效，但使用依赖于操作系统的文件处理类中的方法来操作字符串**对我来说**并不合适。（当然，如果这个字符串真的是一个文件名，那我的反对是无效的）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T13:26:53.247

```
string replace = ".new";
string p = "blabla.test.bla.text.jpeg";
Console.WriteLine(Path.GetFileNameWithoutExtension(p) + replace); 
```

**输出：**

```
blabla.test.bla.text.new 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T13:29:40.437

`ChangeExtension`应该像宣传的那样工作；

```
string replace = ".new";
string file = "testfile_this.00001...csv";

file = Path.ChangeExtension(file, replace);

>> testfile_this.00001...new 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T13:27:37.743

```
string s = "blabla.test.bla.text.jpeg";
s = s.Substring(0, s.LastIndexOf(".")) + replace; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T13:28:21.287

不，您不需要正则表达式。只需 .LastIndexOf 和 .Substring 就足够了。

```
string replace = ".new";
string input = "blabla.bla.test.jpg";

string output = input.Substring(0, input.LastIndexOf('.')) + replace;
// output = "blabla.bla.test.new" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T13:36:37.583

请使用此功能。

```
public string ReplaceStirng(string originalSting, string replacedString)
{
    try
    {
        List<string> subString = originalSting.Split('.').ToList();
        StringBuilder stringBuilder = new StringBuilder();
        for (int i = 0; i < subString.Count - 1; i++)
        {
            stringBuilder.Append(subString[i]);
        }
        stringBuilder.Append(replacedString);
        return stringBuilder.ToString();
    }
    catch (Exception ex)
    {
        if (log.IsErrorEnabled)
            log.Error("[" + System.DateTime.Now.ToString() + "] " + System.Reflection.MethodBase.GetCurrentMethod().DeclaringType.FullName + " :: " + System.Reflection.MethodBase.GetCurrentMethod().Name + " :: ", ex);
            throw;
    }
} 
```

# security - 从 localhost 和外部查询 css 项时 IIS 7.5 的区别

> ID：11650743
> 
> 赞同：0
> 
> 时间：2012-07-25T13:24:04.537
> 
> 标签：security, iis-7.5, http-status-code-404, static-content

经过 4 小时查看堆栈溢出并搜索 Google 后，我终于决定与“希望”大师一起检查...

我的问题是，当通过远程桌面从本地计算机查询时，查询 www.domainname.com/Content/Styles/reset.css 我得到的 css 很好。

从外部机器执行相同操作时，出现 404 错误...我知道原因，原因是它试图从以下位置获取文件：C:\inetpub\wwwroot\Content\Styles\reset.css

考虑到该网站实际上托管在以下位置，这有点糟糕：c:\http\www.domainname.com\

来自 IIS 的浏览器中的错误提供以下信息： Module IIS Web Core Notification MapRequestHandler Handler StaticFile Error Code 0x80070002 Requested URL [http://www.domainname.com:80/Content/Styles/reset.css](http://www.domainname.com:80/Content/Styles/reset.css) 物理路径 C： \inetpub\wwwroot\Content\Styles\reset.css 登录方式匿名登录用户匿名

我一直在查看在 IIS 上运行的其他站点，它们都没有指向 InetPub 作为它们的目录，所以我根本不明白它为什么试图从这个路径获取项目。

调用主应用程序，一个基于 MVC 的运行 Umbraco 的站点，可以正常工作，或者更确切地说，所有动态内容都可以正常工作，而不是静态内容。

提供更多信息：目前 IIS 7.5 有 4 个站点和 1 个 ftp 服务器正在运行。

1 个具有以下绑定的站点：http - 第一个站点主机名 - 端口 80 - ip 地址 * https - 空白主机名 - 端口 443 - ip 地址 *

1 个具有以下绑定的站点：http - 第二个站点主机名 - 端口 80 - ip 地址 *

1 个具有以下绑定的域：http - 第三个站点主机名 - 端口 80 - ip 地址 *

实际域名 http - www.domainname.com - 端口 80 - ip 地址 *

最后是一个 ftp 服务器

我希望有人知道发生了什么...

最好的问候和祈祷（尽管是无神论者），波尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:34:03.813

于是我发现了问题...

原来是代理问题...由于这是一个新站点，DNS 尚未设置，我们正在使用 HOSTS 文件。

不幸的是，在曼谷使用电缆连接时，True（最大的 ISP）会强制您使用代理，而不告诉您...

现在DNS实际上指向另一个IIS服务器......

当我提出请求时，请求域名 X 上的文件。我的机器通过我的 HOSTS 文件查找 IP 地址，发送请求，代理随后也进行了 DNS 查找，但获得了另一个 IP 地址，并转发了而是向该 IP 地址请求。

该服务器上的 IIS，知道 IP，知道域名，但有另一个配置，不知道我们要求的文件（对于新网站）......

所以确实对所有事情都有一个合乎逻辑的解释，只是并不总是一个显而易见的解释。

实际上，我通过使用另一个域进行测试来解决问题，一个根本不存在的域，在这个域上，代理当然无法查找它，并开始返回代码 324。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:42:11.017

可能是您的网站不包含静态文件处理程序吗？如果处理程序映射包含静态文件作为处理程序，请检查您的网站。（最好在列表的底部）

更新： wwwroot 下是否有一个名为 content\styles 的物理文件夹？还是文件夹 www.domainname.com ？

您是否查看过来自 IIS 的本网站应用程序池的日志 -> C:\inetpub\logs\LogFiles\W3SVCxx（xx = 分配给您的应用程序池的编号）我忘记了如何找到它（通常我会快速检查这里有几个文件夹。

也许这是一个安全问题 -> 您是否在安全事件记录器中看到事件。

# antixsslibrary - 微软最新的 asp.net 反 XSS 库 - 4.2.1 - 问题和替代方案（？）

> ID：11650754
> 
> 赞同：2
> 
> 时间：2012-07-25T13:24:33.273
> 
> 标签：antixsslibrary

我在使用他们最新的 WPL v 4.2.1 时遇到问题。对可疑 HTML、javsacript 和样式的剥离是如此激进，它剥离了所有的 CSS。

我知道 CSS 可以很容易地使用 URL 引用来注入恶意 javascript，但这也意味着我失去了所有使我的内容看起来可读的无辜样式。我想在我的 aspx 页面上显示的最后一件事是无聊的“纯”文本。

我的问题：市场/网络上是否有另一个我可以使用的库不会完全剥离我的样式元素？我的意思是选择性地仅删除 CSS 中可能存在的恶意属性。

我试过搜索但没有太多运气。如果有人知道，您可以在这里发布答案吗？我知道可以修改当前的源代码，但如果有一个可用的项目，我真的很想使用一个可用的项目，因为我对跨站点脚本不是很了解。

万分感谢！

# java - 如何向这个泛型集合添加子类型？

> ID：11650759
> 
> 赞同：0
> 
> 时间：2012-07-25T13:24:45.853
> 
> 标签：java, generics, object

我想要一个子类对象的集合，但是我的泛型类型实现现在给出了一个错误，`allItems.add(item);`因为`allItems`它不`Item`包含类型。那么如何更改以下代码而不给出错误？

```
public class ItemManager {
    public static Collection<? extends Item> allItems;
    ...
    public static boolean addItem(Item item){
        return allItems.add(item);
    }
} 
```

可能会添加一个新项目：

```
itemManager.add(new Bomb()); 
```

有没有办法改成`addItem`：

```
public static boolean addItem([all subclasses of Item] item) { ... } 
```

或者也许改变`allItems`，所以它可以接受接收一个`Item`和一个子类`Item`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T13:28:30.787

该集合应声明为`Collection<Item>`.

`Collection<? extends Item>`意思是：*一些**未知**类的集合，它是或扩展了 Item*。你不能向这样的集合添加任何东西，因为你不知道它所拥有的对象的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:33:00.927

为什么不使用 T 作为模板参数？

```
public class ItemManager<T extends Item> {
    public static Collection<T> allItems;
    ...
    public static boolean addItem(T item){
        return allItems.add(item);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:42:07.627

要允许 Item 和任何子类，您需要使用下限声明您的集合：

```
public static Collection<? super Item> allItems; 
```

这表示“元素 e 的集合，其中 Item isSuperType(e) ”

例如

```
public class Item {
}

public class SubItem extends Item {
}

public class OtherSubItem extends Item {
}

public static class ItemManager {
    public static Collection<? super Item> allItems;

    public static void addItems(){
        allItems.add(new Item());
        allItems.add(new SubItem());
        allItems.add(new OtherSubItem());
    }
} 
```

# c# - 如何在嵌套母版页中使用控件？

> ID：11650760
> 
> 赞同：0
> 
> 时间：2012-07-25T13:24:48.520
> 
> 标签：c#, asp.net

在我的主页中，我有：

```
<html>
<head runat="server">
    <title>Master Page</title>
</head>
<body>
    <form runat="server">
    <div>
    <table cellpadding="0" cellspacing="0" style="width: 100%">
    <tr>
    <td align="center">
       <img src="images/download.jpg" alt="manipallogo" />
    </td>
    <td align="center" valign="middle">
       <h2 style="font-style:normal;font-size:x-large">Mobility Sanjivini</h2>
    </td>
    <td align="center">
       <img src="images/philips.jpg" alt="philipslogo" 
                            height="84" width="170" />
    </td>
    </tr>
    <tr>
    <td colspan="1">
        <asp:ContentPlaceHolder runat="server" ID="cntplace1">
        </asp:ContentPlaceHolder>
    </td>
    <td colspan="2">
    <asp:ContentPlaceHolder runat="server" ID="ContentPlaceHolder2">
    </asp:ContentPlaceHolder>
    </td>
    </tr>

    </table>
    </div>
    </form>
</body>
</html> 
```

嵌套的多页：

```
<asp:Content ID="Content1" ContentPlaceHolderID="cntplace1" Runat="Server">
    <table width="100%">
        <tr> 
        <td>
           <asp:Label runat="server" ID="lblImmu" Text="Immunization Details">
           </asp:Label>
        </td>
        </tr>
        <tr>
        <td>
           <asp:Label runat="server" ID="lblDel" Text="Immunization Details">   
           </asp:Label>
        </td>
        </tr>
        <tr>
        <td>
           <asp:Label runat="server" ID="lblMal" Text="Immunization Details">
           </asp:Label>
        </td>
        </tr>
    </table>
</asp:Content> 
```

但是当我运行时，不会显示嵌套页面标签。请有人告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:31:53.137

asp:content 与 ContentPlaceholderID 属性对齐。所以你必须在你的母版页中添加它：

```
<asp:ContentPlaceHolder runat="server" ID="cntplace1" ContentPlaceholderID="cntplace1"></asp:ContentPlaceHolder></td> 
```

# javascript - 如何将我的拖放变成点击事件？

> ID：11650769
> 
> 赞同：2
> 
> 时间：2012-07-25T13:25:10.510
> 
> 标签：javascript, jquery, jquery-ui

我有一个拖放游戏，我现在正在考虑更改。

基本上有一个带有单词的网格，并且要拼写的单词被突出显示。通常你会拖放字母来完成单词，但我现在正在考虑让用户点击字母并且它们出现在突出显示的区域中。

这是它的脚本....

```
$('#pickNext').click(function() {
// remove the class from all td's
$('td').removeClass('spellword');
// pick a random word
rndWord = shuffledWords.sort(function() {
    return 0.8 - Math.random();
})[0];
// apply class to all cells containing a letter from that word
$('td[data-word="' + rndWord + '"]').addClass('spellword');
});

$('.drag').draggable({

helper: 'clone',
snap: '.drop',
grid: [60, 60],
revert: function(droppable) {
    if (droppable === false) {
        return true;
    }

    else {

        return false;
    }
}
});

$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));
    console.log($(event));
    console.log($(ui.draggable).text());

    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    if ($(this).text() == $(ui.draggable).text().trim()) {

        $(this).addClass('wordglow3');
    } else {
        $(this).addClass('wordglow');
    }
    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass('wordglow2');

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow4");
            guesses[word].splice(0, guesses[word].length);
        }
    }

},

activate: function(event, ui) {
    word = $(this).data('word');

    // try to remove the class
    $('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3');
}

}); 
```

我将如何改变这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:30:51.637

恐怕由于代码结构的巨大变化，你最好从头开始这部分

[http://weepy.github.com/jquery.path/](http://weepy.github.com/jquery.path/)

试试这些例子，祝你好运。

# javascript - 如何将函数绑定到 Javascript 中对象数据成员的更改？

> ID：11650777
> 
> 赞同：2
> 
> 时间：2012-07-25T13:25:48.637
> 
> 标签：javascript, data-binding

我正在使用 JavaScript 开发一个项目，我们正在为我们在办公室使用的组织站点构建一个 Greasemonkey 插件。我们无法让我们的更改保持渲染，因为我们不能简单地将更改注入现有的渲染函数。

因此，我们需要找到渲染发生的每个事件，并在那里注入我们自己的渲染函数。但是，有些事件我们可以看到正在发生，但我们无法参与其中。我想知道的是如何将函数绑定到对象的数据成员，以便在该成员更改时调用该函数。我们的一位团队成员似乎认为这是可能的，但他告诉我们使用的方法似乎不起作用。

我们尝试的是类似的东西

```
window.Controller.bind("change:idBoardCurrent", OMGITWORKED); 
```

where`idBoardCurrent`是其中的成员，`window.Controller`并且`OMGITWORKED`是我们希望在`window.Controller.idBoardCurrent`更改时调用的函数。

我对 JavaScript 或数据绑定不是很熟悉，所以我不知道这是对还是错，也不知道它是对还是错。如果有人可以指出此代码段中要更改的内容，或者他们可以提出另一种解决方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:36:15.713

您可以使用 Object.defineProperty 为 Objects 属性定义 setter 和 getter

```
Object.defineProperty(window.Controller,"idBoardCurrent",{
      get : function() { return this.val; },
      set : function(value) {this.val = value;OMGITWORKED(value); }
});
function OMGITWORKED(param) {
  console.log("idBoardCurrent has been Changed to " + param);
}

window.Controller.idBoardCurrent = "Test";
window.Controller.idBoardCurrent = "Test2";
console.log(window.Controller.idBoardCurrent) 
```

编辑：根据上下文对象更改代码

[JSBin](http://jsbin.com/esofay/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:32:02.797

由于这是专门针对 Firefox 的，因此您可以使用它提供的[突变事件。](https://developer.mozilla.org/en/DOM/Mutation_events)但请注意该页面上的警告：

*   他们的 W3C 规范从未被广泛实施，现在已被*弃用*
*   使用 DOM 突变事件“显着降低”DOM 修改的性能

如果您能够将自己限制在 Firefox 14 及更高版本，则可以改用新的[变异观察者的东西](https://developer.mozilla.org/en/DOM/DOM_Mutation_Observers)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:41:41.320

这是，当我没有完全错的时候，更多的是 javascript 的问题。我找到了有关该主题的一些信息

[监听 JavaScript 或 jQuery 中的变量变化](https://stackoverflow.com/questions/1759987/listening-for-variable-changes-in-javascript-or-jquery)

[jQuery触发变量更改](https://stackoverflow.com/questions/3267741/jquery-trigger-on-variable-change)

[Javascript 跟踪变量变化](https://stackoverflow.com/questions/4530248/javascript-track-variable-change)

对不起，当我不明白这个话题时。

祝一切顺利

# cocos2d-iphone - 带面具的 Cocos2d 动画

> ID：11650779
> 
> 赞同：2
> 
> 时间：2012-07-25T13:26:07.820
> 
> 标签：cocos2d-iphone, sprite, mask, sprite-sheet

我有一个人走路的动画。背景图像包含一些树。我有一个带有这些树的面具，我想将它应用在那个人身上，所以看起来那个人在树后面走。

这是我的代码：

```
CCRenderTexture * rt = [CCRenderTexture 
                        renderTextureWithWidth:maskSprite.contentSizeInPixels.width 
                        height:maskSprite.contentSizeInPixels.height];
rt.position = ccp(maskSprite.contentSize.width/2, maskSprite.contentSize.height/2);
[rt.sprite setBlendFunc: (ccBlendFunc) { GL_ONE_MINUS_SRC_ALPHA, GL_ZERO }];
[rt beginWithClear:0.0f g:0.0f b:0.0f a:1.0f];
[walkingManSprite visit];
[rt end];
[maskSprite setBlendFunc: (ccBlendFunc) { GL_ZERO, GL_ONE_MINUS_SRC_ALPHA }];
[rt beginWithClear:0.0f g:0.0f b:0.0f a:1.0f];
[maskSprite visit];    
[rt end];

CCSprite *retval = [CCSprite spriteWithTexture:rt.sprite.texture];
retval.flipY = YES;
return retval; 
```

结果是这个人走在树后面，但我的面具在背景上显示为黑色阴影。如何不显示蒙版而是将其应用于动画？

# iphone - iOS - 允许用户从文档目录下载文件，但不允许使用 iTunes 上传文件

> ID：11650781
> 
> 赞同：2
> 
> 时间：2012-07-25T13:26:13.373
> 
> 标签：iphone, ios, itunes, file-sharing

这是一种情况，我在文档目录中有一个数据文件，该文件不时在应用程序中更新。所以我想使用 iTunes 将它保存到我的桌面。但我不希望将文件上传回我的应用程序。即我希望该用户可以下载文件但不能上传任何文件。

我正在考虑将数据文件放在其他位置，如库，并在应用程序设置上放置一个按钮，显示“准备备份”，它将将该数据文件复制到 Document 目录中，用户可以从中下载它。如果用户上传任何东西，它不会有任何区别，因为我当前的文件在库目录中。

这只是一个想法，任何人都可以建议我其他方式还是上述方式很好？

**编辑**：我只需要在成功导出后用户可以在不支持应用程序的情况下查看数据文件（可能稍后）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:30:37.077

你不能。
但是您可以做的是检查（每 10 秒使用一次计时器）是否将新文件添加到文档目录中，然后以编程方式将其删除。
但这当然不会禁用文件替换。

# mysql - 代码点火器 - 一对多的孩子加入？

> ID：11650793
> 
> 赞同：0
> 
> 时间：2012-07-25T13:26:58.200
> 
> 标签：mysql, join, codeigniter-2

嗨，伙计们，我有两张表，表 B 与表 A 有多对一的关系

```
TableA        TableB
id  name       id   value
1  basketA     1    10
2  basketB     1    5 
               1    7
               2    7
               2    3 
```

等等。现在 $query = $this->db->get('TableA'); 返回 $query->result_array();

显然返回 A 字段，但我怎样才能进行连接，以便它将返回 A-Field 以及该字段的 B-Items 的总和？

例如。在结果数组中

```
BasketA 22
BasketB 10 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:30:50.163

试试这个：

```
select A.id,A.name,SUM(B.value)
from    TableA A join tableB B
on A.id=B.id
group by A.id,A.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:34:52.463

这应该有效：

```
SELECT A.name, SUM(B.value) AS sum_value
FROM   TableA A 
       INNER JOIN tableB B
          ON A.id=B.id
GROUP BY A.id; 
```

# php - 如何在 symfony 2 中下载上传的文件？

> ID：11650794
> 
> 赞同：1
> 
> 时间：2012-07-25T13:27:03.283
> 
> 标签：php, symfony

我有一个文档实体，我希望网站的用户能够下载已上传的文件。我不知道该怎么做（我尝试在 DocumentController 中使用 downloadAction，但出现了一些错误）。

这是我的文档实体：

```
<?php
namespace MyBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Bridge\Doctrine\Validator\Constraints as DoctrineAssert;
use Symfony\Component\HttpFoundation\File\UploadedFile;

/**
 * MyBundle\Entity\Document
 * @ORM\Table()
 * @ORM\Entity()
 * @ORM\HasLifecycleCallbacks
 */
class Document
{

    public function __toString() {
    return $this->document_type->getName();
    }

    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var date $endDate
     *
     * @ORM\Column(name="endDate", type="date")
     */
    private $endDate;

    /**
     * @ORM\ManyToOne(targetEntity="DocumentType")
     * @ORM\JoinColumn(name="document_type_id", referencedColumnName="id")
     */
    private $document_type;

    /**
     * @ORM\Column(type="string", length="255", nullable="TRUE")
     * @Assert\File(maxSize="6000000")
     */
    public $file;

    /**
     * @ORM\Column(type="string", length=255, nullable=true)
     */
    public $path;

    public function getAbsolutePath()
    {
        return null === $this->path ? null : $this->getUploadRootDir().'/'.$this->path;
    }

    public function getWebPath()
    {
        return null === $this->path ? null : $this->getUploadDir().'/'.$this->path;
    }

    protected function getUploadRootDir()
    {
        // the absolute directory path where uploaded documents should be saved
        return __DIR__.'/../../../../web/'.$this->getUploadDir();
    }

    protected function getUploadDir()
    {
        // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view.
        return 'uploads/documents';
    }

    /**
     * @ORM\PrePersist()
     * @ORM\PreUpdate()
     */
    public function preUpload()
    {
        if (null !== $this->file) {
            // do whatever you want to generate a unique name
            $this->path = uniqid().'.'.$this->file->guessExtension();
        }
    }

    /**
     * @ORM\PostPersist()
     * @ORM\PostUpdate()
     */
    public function upload()
    {
        if (null === $this->file) {
            return;
        }

        $this->file->move($this->getUploadRootDir(), $this->path);
        unset($this->file);
    }

    /**
     * @ORM\PostRemove()
     */
    public function removeUpload()
    {
        if ($file = $this->getAbsolutePath()) {
            unlink($file);
        }
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set endDate
     *
     * @param date $endDate
     */
    public function setEndDate($endDate)
    {
        $this->endDate = $endDate;
    }

    /**
     * Get endDate
     *
     * @return endDate 
     */
    public function getEndDate()
    {
        return $this->endDate;
    }

    /**
     * Set document_type
     *
     * @param Was\RHBundle\Entity\DocumentType $documentType
     */
    public function setDocumentType(MyBundle\Entity\DocumentType $documentType)
    {
        $this->document_type = $documentType;
    }

    /**
     * Get document_type
     *
     * @return MyBundle\Entity\DocumentType 
     */
    public function getDocumentType()
    {
        return $this->document_type;
    }

    /**
     * Set path
     *
     * @param string $path
     */
    public function setPath($path)
    {
        $this->path = $path;
    }

    /**
     * Get path
     *
     * @return string 
     */
    public function getPath()
    {
        return $this->path;
    }

    /**
     * Set file
     *
     * @param string $file
     */
    public function setFile($file)
    {
        $this->file = $file;
    }

    /**
     * Get file
     *
     * @return string 
     */
    public function getFile()
    {
        return $this->file;
    }

} 
```

现在，这是我的 DocumentController.php 中的 downloadAction：

```
public function downloadAction($id)
{   
    $em = $this->getDoctrine()->getEntityManager();

    $document = $em->getRepository('MyBundle:Document')->find($id);

    if (!$document) {
        throw $this->createNotFoundException('Unable to find the document');
    }   

        $headers = array(
            'Content-Type' => $document->getMimeType()
            'Content-Disposition' => 'attachment; filename="'.$document->getDocumentType().'"'
        );  

    $filename = $document->getUploadRootDir().'/'.$document->getDocumentType();

    return new Response(file_get_contents($filename), 200, $headers);
} 
```

我有这个错误：

```
Call to undefined method MyBundle\Entity\Document::getMimeType() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:19:17.683

我使用[IgorwFileServeBundle](https://github.com/igorw/IgorwFileServeBundle)。

这是我在我的一个项目中使用的示例：

```
 $em   = $this->getDoctrine()->getEntityManager();
    $file = $em->getRepository('MyBundle:File')->find($id);

    $path = $file->getPath();
    $mimeType = $file->getMimeType();
    $folder = 'Public';
    $factory = $this->get('igorw_file_serve.response_factory');
    $response = $factory->create($folder.'/'.$path, $mimeType);        

    return $response; 
```

我希望它可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:33:14.193

这是我的一个项目的代码

```
public function downloadAction()
{
    $items = $this->get('xxxx')->getXXX();
    $response = $this->render('xxx:xxx:xxx.csv.twig', array('items' => $items));

    $response->headers->set('Content-Type', 'text/csv');
    $response->headers->set('Content-Disposition', 'attachment; filename=budget.csv');

    return $response;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T20:43:37.750

将变量**$mimeType**添加到 Document 实体

```
/**
 * @ORM\Column()
 * @Assert\NotBlank
 */
private $mimeType; 
```

和**getter**和**setter**（或生成它们）

```
public function setMimeType($mimeType) {
    $this->mimeType = $mimeType;
    return $this;
}

public function getMimeType() {
    return $this->mimeType;
} 
```

**更新****数据库**架构_

```
php app/console doctrine:schema:update --force 
```

并将**setMimeType**添加到您的**setFile**函数

```
/**
 * Set file
 *
 * @param string $file
 */
public function setFile($file)
{
    $this->file = $file;
    $this->setMimeType($this->getFile()->getMimeType());
} 
```

然后您的控制器将正常工作。

# windows - 如何优雅地停止正在侦听 Windows 管道的服务器进程

> ID：11650802
> 
> 赞同：5
> 
> 时间：2012-07-25T13:27:30.337
> 
> 标签：windows, visual-c++, named-pipes

[我在http://msdn.microsoft.com/en-us/library/windows/desktop/aa365588(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365588(v=vs.85).aspx)有一个类似于 MSDN 示例的命名管道服务器，并希望允许客户端发送导致服务器正常停止的“退出”消息。

所以在“InstanceThread()”中，如果收到特殊消息，我想让服务器停止。

我试图通过关闭管道句柄来停止从“InstanceThread()”的单独线程对主线程中的 ConnectNamedPipe() 的调用，但这不起作用。

我已经尝试了各种方法，其中包括关闭整个管道、直接从 InstanceThread 退出……但它们都不会导致对 ConnectNamedPipe() 的调用停止。

我玩过 SetNamedPipeHandleState()，但它使实现变得非常复杂，而且对于这个简单的要求，使用重叠 I/O 似乎有点过分了。

那么有没有更简单的方法让 ConnectNamedPipe() 在服务器进程应该停止而不是无休止地等待客户端连接时返回？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T20:01:50.727

如果您不需要支持 Windows XP，您可以尝试使用[CancelSynchronousIo](http://msdn.microsoft.com/en-us/library/aa363794%28v=vs.85%29)。

如果进程正在退出，则无需执行任何操作；当 Windows 终止进程时，线程将终止。

或者，您可以通过自己连接到命名管道来调用[ConnectNamedPipe退出。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365146%28v=vs.85%29.aspx)

# javascript - IE9 上的 Selenuim 和 jQuery addClass 和 removeClass

> ID：11650810
> 
> 赞同：0
> 
> 时间：2012-07-25T13:27:55.280
> 
> 标签：javascript, jquery, selenium, internet-explorer-9, removeclass

嗨 - 为一个普通问题的机器人道歉......我们正在使用 Selenium Web 驱动程序（v2.24.1）自动化我们的 UI 测试，它就像一个梦想一样工作，除了 IE9 上的例外。

我们通过 addClass 和 removeClass jQuery 方法隐藏/显示 UI 控件来完成客户端功能的一部分。addClass 和 removeClass jquery 方法从 DOM 中追加（或删除）类。这样，我们可以进行 Selenium DOM 迭代，寻找那些更改以触发操作......

我们的问题是这些 DOM 更改没有反映在 IE9 中——例如，功能上一切都在 IE 上正常工作，但是“dom 是静态的”，因此 Selenium 无法识别某些面板是否显示或隐藏......

所以，问题：

1）有没有办法以动态的方式反映IE9中的addClass和removeClass？2）我们是否应该以不同的方式监控/捕获变化？（可能在导致我们问题的组件上分配某种事件侦听器？）

希望这个问题不要太含糊——这不是一个特定组件的问题，但我认为这更多地取决于我们试图在多种产品中以通用方式使用 Selenium 的方式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:50:08.653

让我确保我理解正确：

*   DOM 加载状态为“A”
*   jQuery 操作 DOM 以声明“B”
*   IE9 中的 Selenium 不反映处于“B”状态的 DOM，它仍然看起来像“A”

如果是上述情况，也许您遇到了 selenium 和 IE9 的错误？

这是一个可能的快速解决方法：在 DOM 处于状态“B”后通过 Selenium 执行 JavaScript（或检查它是否已达到状态“B”）并将结果返回给 selenium：

```
IJavaScriptExecutor js = webDriver as IJavaScriptExecutor;
string hasClass = (string)js.ExecuteScript("$('#ui-control').hasClass('someClass')"); 
```

# java - 从java中的线程获取异常

> ID：11650812
> 
> 赞同：0
> 
> 时间：2012-07-25T13:28:00.693
> 
> 标签：java, multithreading, exception, future

我对我的代码有疑问。

我有两个从 main 方法运行的线程，我想捕获 main 方法的两个线程中的任何一个线程中可能发生的异常。

```
Future<Object> incoming=Executors.newSingleThreadExecutor().submit(new Task1(param1));
Future<Object> outgoing=Executors.newSingleThreadExecutor().submit(new Task2(param2)); 
```

问题是，如果我对异常使用 Future Object 并调用 get() 方法，它将阻塞我的代码，并且我不知道线程 2 是否在线程 1 之前完成/抛出异常。

我怎样才能优雅地处理这个而不是这个？

```
while(!(incoming.isDone() || outgoing.isDone())){} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:35:13.197

如果您想在异常发生时立即处理而不是等待任何其他任务完成，我会异步处理异常。

```
 ExecutorService oneService = ...

 oneService.submit(new Runnable() {
    public void run() {
        try {
            new Task(param1).run();
        } catch(Exception e) {
            // handle exception asynchronously
        }
    }        
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:38:59.530

这个怎么样：

所有线程之间共享的队列（确保线程安全！），

```
Queue<Throwable> exceptionsToProcess; 
```

然后，用 while 循环锁定你的 main 方法：

```
//start threads, pass them the queue

while(true)
{
    Throwable t;
    while((t = exceptionsToProcess.poll()) == null);
    //process t
} 
```

异常将按正确的顺序处理，但如果您不注意线程安全，您将面临 ConcurrentModificationException 的风险。

编辑：这可能是一个有用的队列类：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/LinkedBlockingQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/LinkedBlockingQueue.html)

# android - 文件过早结束

> ID：11650814
> 
> 赞同：2
> 
> 时间：2012-07-25T13:28:12.740
> 
> 标签：android, xml

我还没有找到任何解决方案，有些人问几乎同样的事情，但这对我没有帮助。

所以，我想为 Android 应用程序定义一个菜单。

我创建了一个名为`menu`“res”的文件夹，当我创建一个 xml 文件时，出现错误：
“文件过早结束”

此错误位于我的 xml 文件的第一行，即：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

在文件中我只有这一行：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"></menu> 
```

在控制台中我有这个错误：

```
" Error in an XML file: aborting build. " 
```

如果有人有同样的问题或理解我的问题，你能帮助我吗，我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:42:33.283

尝试在菜单中添加至少一项；例如：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/test"
        android:title="Test/>

</menu> 
```

# ruby-on-rails - 如何在 AREL 中检查连接表关联？

> ID：11650816
> 
> 赞同：1
> 
> 时间：2012-07-25T13:28:16.180
> 
> 标签：ruby-on-rails, where, arel

基本上我正在寻找这种工作方法的 AREL 版本：

```
@jobs.select{|a| !a.assignments.present? } 
```

假设 AREL 或`where`语句会更正确*和*更快。一个人怎么会比我现在写得*更快？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:39:36.973

假设一个`Job has_many assignments`

```
@jobs.where('id in (select j.id from jobs j inner join assignments a on a.job_id=j.id)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:20:27.603

```
Job.joins(:assignments).where('assignments.present' => false) 
```

执行这个 sql：

```
 SELECT "jobs".* FROM "jobs" INNER JOIN "assignments" ON "assignments"."job_id" = "jobs"."id" WHERE "assignments"."present" = 't' 
```

# permissions - drupal 7 - 限制对完整节点的访问

> ID：11650820
> 
> 赞同：3
> 
> 时间：2012-07-25T13:28:23.277
> 
> 标签：permissions, drupal-7, nodes

我有一个名为“logos”的内容类型，所有这些都在网格视图中并作为一个块输出。

我不希望用户查看完整节点，只查看视图。我尝试了 content_access 模块，但我的网格视图也消失了，有没有办法限制对特定内容类型的完整节点的访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:13:22.010

我刚刚在重新处理页面功能中做了一个肮脏的修复

```
if ($variables['node']->type == "logos") {
            drupal_goto('404');

    } 
```

肯定有更好的办法。另外谷歌忽略节点怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:45:16.367

你能澄清一下吗？您正在显示一个块视图。那么为什么不将视图限制在要显示的字段而不是显示节点呢？

您还可以使用字段权限（或 cck 权限，我忘记了确切的名称），因此请指定每个字段的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:01:57.010

另一种选择是不按照[https://drupal.stackexchange.com/questions/11026/how-to-restrict-direct-access-to-the-nodes-in-drupal-7发布节点](https://drupal.stackexchange.com/questions/11026/how-to-restrict-direct-access-to-the-nodes-in-drupal-7)

我已经测试过了，Views 仍然可以显示数据。您可能需要调整样式，但我发现默认情况下，Drupal 会为未发布的节点添加一个突出显示以区分它是未发布的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T09:14:58.540

看看[https://www.drupal.org/project/restrict_node_page_view](https://www.drupal.org/project/restrict_node_page_view)，很简单：

```
/**
 * Implements hook_node_access().
 */
function MYMODULE_node_access($node, $op, $account) { 
  // Default checks
  if (!is_object($node)) {
    return NODE_ACCESS_IGNORE;
  }
  $type = is_string($node) ? $node : $node->type;
  if($op == 'view' && arg(0) == 'node' && arg(1) === $node->nid) {
    // Restrict access to full MYTYPE node for anon users
    if ($type == 'MYTYPE' && user_is_anonymous()) {
      return NODE_ACCESS_DENY;
    }
  }
  // Default
  return NODE_ACCESS_IGNORE;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-10T13:23:46.637

看看[Rabbit Hole](https://www.drupal.org/project/rabbit_hole) Drupal 贡献模块

> 这是什么？Rabbit Hole 是一个模块，它增加了控制在其自己的页面上查看实体时应该发生什么的能力。
> 
> 也许您有一个永远不应该在其自己的页面上显示的内容类型，例如在轮播中显示的图像内容类型。Rabbit Hole 可以通过 node/xxx 来阻止这个节点在自己的页面上被访问。

该模块将完成您的要求：

> 我不希望用户查看完整节点，只查看视图。我尝试了 content_access 模块，但我的网格视图也消失了，有没有办法限制对特定内容类型的完整节点的访问？

兔子洞也是这个问题的答案中的链接中的[答案](https://stackoverflow.com/a/11972825/227926)。

# django - Django 反序列化 - 我指定了一个自然密钥管理器，但它不会反序列化

> ID：11650824
> 
> 赞同：3
> 
> 时间：2012-07-25T13:28:44.287
> 
> 标签：django, serialization

首先，这是我用作指南的页面：[https ://docs.djangoproject.com/en/dev/topics/serialization/](https://docs.djangoproject.com/en/dev/topics/serialization/)

这是我的模型定义：

```
class LocationManager(models.Manager):
    def get_by_natural_key(self, zip_code):
        return self.get(zip_code=zip_code)

class Location(models.Model):
    city = models.CharField('City', blank=True, null=True, max_length=50)
    state = models.CharField('State', blank=True, null=True, max_length=2, choices=STATE_CHOICES)
    zip_code = models.CharField('Zip Code', blank=False, null=False, max_length=9, unique=True)
    date_added = models.DateField('Date Added')

    objects = LocationManager()

    def natural_key(self):
        return self.zip_code 
```

这是我试图反序列化的序列化项目：

```
 {
        "pk": 10259, 
        "model": "news.news", 
        "fields": {
            "content": "some content", 
            "created_on": "2012-07-24T16:10:44.570", 
            "location": "99801", 
            "title": "Some title"
        }
    } 
```

我试图反序列化 json 的代码：

```
 for news_obj in serializers.deserialize('json', news_json):
        news_obj.save() 
```

我得到的错误是：

```
IntegrityError: insert or update on table "news" violates foreign key constraint "news_location_id_fkey"
DETAIL:  Key (location_id)=(99801) is not present in table "location". 
```

因此，它似乎正在尝试将 zip_code 解析为自然键，而不是尝试使用我定义的自然键检查数据库中是否存在该项目。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:10:40.490

我找到了一个适合我的解决方案。看起来自然键需要一个列表而不是单个字段，猜测他们只计划自然键是字段值的组合。我通过在列表中返回 zip_code 解决了这个问题。

```
def natural_key(self):
    return [self.zip_code] 
```

这样做之后，反序列化就像我想要的那样工作。

执行此操作后生成的编码 JSON 如下所示：

```
{
    "pk": 10661, 
    "model": "news.news", 
    "fields": {
        "content": "", 
        "created_on": "2012-07-25T10:19:56.627", 
        "location": [
            "36101"
        ], 
        "article_date": "2012-07-25T10:05:56", 
        "title": ""
    }
} 
```

# groovy - 执行 UpdateProperty() 时如何避免 CDATA 中出现内容 - Groovy 脚本

> ID：11650828
> 
> 赞同：1
> 
> 时间：2012-07-25T13:28:55.000
> 
> 标签：groovy, soapui, cdata

很抱歉向我之前的一个[在 sopaUI 中使用 Groovy 脚本 - 将 XML 持有者的内容复制到另一个（尝试克隆 SOAP 请求测试步骤）](https://stackoverflow.com/questions/11625796/using-groovy-script-in-sopaui-copy-the-content-of-a-xml-holder-to-another-try/11625966#11625966)

在我之前的问题中，我刚刚意识到我错过了提及我对 CDATA 的担忧……我认为这可能会误导其他人了解我真正关心的是什么。我的错！！

重申我所做的。

**肥皂请求（原始）**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:idm="http://vedaxml.com/vxml2/idmatrix-v2-0.xsd">
   <soapenv:Header/>
   <soapenv:Body>
      <idm:request>
         <idm:dataset-searches>
            <idm:profile-name></idm:profile-name>
         </idm:dataset-searches>
         <idm:individual-name>
            <idm:family-name>ABC</idm:family-name>
            <idm:first-given-name>DEF</idm:first-given-name>
         </idm:individual-name>
         <idm:date-of-birth>1985-12-12</idm:date-of-birth>
      </idm:request>
   </soapenv:Body>
</soapenv:Envelope> 
```

**我的 Groovy 脚本如下**

```
def grUtils = new com.eviware.soapui.support.GroovyUtils(context)
def ReqHolder2 = grUtils.getXmlHolder("Modified#Request")

ReqHolder2.removeDomNodes("//idm:request")
ReqHolder2.updateProperty()

ReqHolder2 ["//soapenv:Body"] = context.expand( '${Original#Request#//idm:request}' )
ReqHolder2.updateProperty() 
```

当我执行上述 groovy 脚本时，修改后的请求会使用原始请求中的内容进行更新，但更新后的内容在 CDATA 中并引用了架构。

**SoapRequest（修改）**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:idm="http://vedaxml.com/vxml2/idmatrix-v2-0.xsd">
   <soapenv:Header/>
   <soapenv:Body>***<![CDATA[<idm:request xmlns:idm="http://vedaxml.com/vxml2/idmatrix-v2-0.xsd">***
         <idm:dataset-searches>
            <idm:profile-name/>
         </idm:dataset-searches>
         <idm:individual-name>
            <idm:family-name>ABC</idm:family-name>
            <idm:first-given-name>DEF</idm:first-given-name>
         </idm:individual-name>
         <idm:date-of-birth>1985-12-12</idm:date-of-birth>
      </idm:request>**]]>**</soapenv:Body>
</soapenv:Envelope> 
```

您能否建议我如何避免在 CDATA 中更新 XML。而是正确更新 XML。友善的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:15:42.077

将修改后的请求更改为：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"   xmlns:idm="http://vedaxml.com/vxml2/idmatrix-v2-0.xsd">
   <soapenv:Header/>
   <soapenv:Body>${test123}</soapenv:Body>
</soapenv:Envelope> 
```

并将您的常规更改为：

```
def grUtils = new com.eviware.soapui.support.GroovyUtils(context)
def ReqHolder2 = grUtils.getXmlHolder(context.expand( '${Original#Request#//idm:request}' ))
context.setProperty("test123", ReqHolder2.getXml())

testRunner.runTestStepByName( "Modified")

log.info(grUtils.getXmlHolder(context.expand( '${Modified#Request}')).getPrettyXml()) 
```

如果您将日志复制并粘贴到文本编辑器中，您将看到：

```
Wed Jul 25 13:11:20 MDT 2012:INFO:<soapenv:Envelope     xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:idm="http://vedaxml.com/vxml2/idmatrix-v2-0.xsd">
   <soapenv:Header/>
   <soapenv:Body>
      <idm:request>
         <idm:dataset-searches>
            <idm:profile-name/>
         </idm:dataset-searches>
         <idm:individual-name>
            <idm:family-name>ABC</idm:family-name>
            <idm:first-given-name>DEF</idm:first-given-name>
         </idm:individual-name>
         <idm:date-of-birth>1985-12-12</idm:date-of-birth>
      </idm:request>
   </soapenv:Body>
</soapenv:Envelope> 
```

# java - 蚂蚁脚本排除文件夹，除了一些文件

> ID：11650838
> 
> 赞同：1
> 
> 时间：2012-07-25T13:29:16.780
> 
> 标签：java, ant

我想编写除某些文件外不包括完整文件夹的[Ant](http://en.wikipedia.org/wiki/Apache_Ant)脚本。

我有一个文件夹，其中有数千个 Java 文件。现在我想排除那个文件夹，我想在其中包含两个 Java 文件。我怎样才能做到这一点？

下面的代码对我不起作用。

```
<target  name="compile" >
    <javac srcdir="src" destdir="./classes"
        <exclude name="com/corporate/modes/**"/>
        <include name="com/corporate/modes/UpdatePersonalDetail.java"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:27:48.857

[`javac`](http://ant.apache.org/manual/Tasks/javac.html)要在编译任务中仅包含文件夹中的特定文件，请使用`<include>`元素指定文件。当`<include>`指定一个元素时，只有命名文件（及其项目依赖项）将包含在编译中。

# 示例项目

**项目目录：** /home/project
**源目录：** /home/project/src
**构建目录：** /home/project/build

* * *

### build.xml（位于 /home/project 中）

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="compile_test" basedir="." default="compile_class1">

  <property name="src.dir" value="${basedir}/src" />
  <property name="build.dir" location="${basedir}/build" />
  <property name="classes.dir" location="${build.dir}/classes" />

  <target name="init" description="Initialize the build directory.">
    <mkdir dir="${build.dir}" />
    <mkdir dir="${classes.dir}" />
  </target>

  <target name="clean" description="Delete all files created by this script.">
    <delete dir="${build.dir}" />
  </target>

  <target name="compile_class1" depends="init">
    <javac srcdir="${src.dir}" destdir="${classes.dir}"
        includeantruntime="false">
      <include name="com/mypackage/Class1.java" />
    </javac>
  </target>

  <target name="compile_class2" depends="init">
    <javac srcdir="${src.dir}" destdir="${classes.dir}"
        includeantruntime="false">
      <include name="com/mypackage/Class2.java" />
    </javac>
  </target>
</project> 
```

* * *

## Java 源文件

### Class1.java

```
package com.mypackage;

public class Class1 {
  public static void main(String[] args){
    System.out.println("Class1");
  }
} 
```

### Class2.java

```
package com.mypackage;

public class Class2 {
  public static void main(String[] args){
    Class3 class3 = new Class3();
    System.out.println(class3.getMessage());
  }
} 
```

### Class3.java

```
package com.mypackage;

public class Class3 {
  public String getMessage() {
    return "The answer is 42.";
  }
} 
```

* * *

## 蚂蚁输出

### Ant 目标 compile_class1

```
$ ant clean compile_class1

Buildfile: /home/project/build.xml

clean:
   [delete] Deleting directory /home/project/build

init:
    [mkdir] Created dir: /home/project/build
    [mkdir] Created dir: /home/project/build/classes

compile_class1:
    [javac] Compiling 1 source file to /home/project/build/classes

BUILD SUCCESSFUL
Total time: 1 second 
```

请注意，虽然有三个 Java 源文件，但只有`<include>`元素指定的文件被编译。

* * *

### Ant 目标 compile_class2

```
$ ant clean compile_class2

Buildfile: /home/project/build.xml

clean:
   [delete] Deleting directory /home/project/build

init:
    [mkdir] Created dir: /home/project/build
    [mkdir] Created dir: /home/project/build/classes

compile_class2:
    [javac] Compiling 1 source file to /home/project/build/classes

BUILD SUCCESSFUL
Total time: 1 second 
```

在这种情况下，虽然 Ant 目标`compile_class2`只在嵌套`<include>`元素中指定了一个文件，但 Class2.java 和 Class3.java 都被编译了，因为 Class2.java 依赖于 Class3.java。如果编译时没有包含 Class2.java 的依赖项，那么在尝试执行 Class2 时，会收到无法定位 com.mypackage.Class3 的错误。

# ruby-on-rails-3 - rails default_scope 抛出异常：未定义的方法 abstract_class？对象：类

> ID：11650839
> 
> 赞同：1
> 
> 时间：2012-07-25T13:29:19.360
> 
> 标签：ruby-on-rails-3, default-scope

我想在我的应用程序中应用逻辑删除（而不是永久删除已标记为已删除的记录）。我已将*可用*列添加到默认值为**true**的所有表中。现在我想共同为所有模型编写以下代码。

```
1) Write the instance method which make 'available' column value false when user clicks on destroy link.
2) Merge the 'available=true' condition to all ActiveRecord's queries while fetching the records. 
```

参考[Rails 扩展 ActiveRecord::Base](https://stackoverflow.com/questions/2328984/rails-extending-activerecordbase)，我决定使用猴子补丁来做上面的事情。在 config/initializer/active_record_patch.rb 中创建猴子补丁文件：

```
class ActiveRecord::Base
   def inactive
      update_attribute(:available, false)
   end

   default_scope :available => true
end 
```

添加 default_scope 时出现以下错误

**/gems/ruby-1.9.2-p290/gems/activerecord-3.0.9/lib/active_record/base.rb:1212:in `class_of_active_record_descendant': undefined method`abstract_class？对于对象：类（NoMethodError）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:35:03.920

试试`default_scope where(:available => true)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:36:09.057

我相信猴子补丁`ActiveRecord::Base`不是要走的路。也许您应该尝试创建一个模块，当您的模型中包含/扩展该模块时，可以无缝地创建此功能。

# linux - 从 $PATH 变量中删除冗余路径

> ID：11650840
> 
> 赞同：141
> 
> 时间：2012-07-25T13:29:21.920
> 
> 标签：linux, bash, path, environment-variables, sh

我已经在 $PATH 变量中定义了 6 次相同的路径。

我没有注销以检查它是否有效。

如何删除重复项？

$PATH 变量如下所示：

```
echo $PATH

/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/flacs/Programmes/USFOS/bin:/home/flacs/Programmes/USFOS/bin:/home/flacs/Programmes/USFOS/bin:/home/flacs/Programmes/USFOS/bin:/home/flacs/Programmes/USFOS/bin:/home/flacs/Programmes/USFOS/bin 
```

我将如何将其重置为

```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-07-25T13:37:24.543

你只需执行：

```
export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

这将适用于当前会话，如果您想永久更改，请将其添加到任何 .bashrc、bash.bashrc、/etc/profile - 适合您的系统和用户需要的任何内容。

注意：这是针对 Linux 的。我们将为新编码人员明确这一点。(` , ') 不要尝试 SET = 这些。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-09-20T20:58:07.337

如果您使用的是 Bash，如果您想`/home/wrong/dir/`从`PATH`变量中删除目录，还可以执行以下操作：

```
PATH=`echo $PATH | sed -e 's/:\/home\/wrong\/dir\/$//'` 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-11-07T13:57:55.883

> ## Linux：从 $PATH 变量中删除冗余路径

Linux From Scratch[在 /etc/profile 中有这个功能](http://www.linuxfromscratch.org/blfs/view/6.3/postlfs/profile.html)

```
# Functions to help us manage paths.  Second argument is the name of the
# path variable to be modified (default: PATH)
pathremove () {
        local IFS=':'
        local NEWPATH
        local DIR
        local PATHVARIABLE=${2:-PATH}
        for DIR in ${!PATHVARIABLE} ; do
                if [ "$DIR" != "$1" ] ; then
                  NEWPATH=${NEWPATH:+$NEWPATH:}$DIR
                fi
        done
        export $PATHVARIABLE="$NEWPATH"
} 
```

这旨在与这些功能一起使用以添加到路径中，这样您就不会多余地执行此操作：

```
pathprepend () {
        pathremove $1 $2
        local PATHVARIABLE=${2:-PATH}
        export $PATHVARIABLE="$1${!PATHVARIABLE:+:${!PATHVARIABLE}}"
}

pathappend () {
        pathremove $1 $2
        local PATHVARIABLE=${2:-PATH}
        export $PATHVARIABLE="${!PATHVARIABLE:+${!PATHVARIABLE}:}$1"
} 
```

简单的用法是只给出`pathremove`要删除的目录路径 - 但请记住它必须完全匹配：

```
$ pathremove /home/username/anaconda3/bin 
```

这将从您的路径中删除该目录的每个实例。

如果您想要路径中的目录，但没有冗余，您可以只使用其他功能之一，例如 - 对于您的特定情况：

```
$ pathprepend /usr/local/sbin
$ pathappend /usr/local/bin
$ pathappend /usr/sbin
$ pathappend /usr/bin
$ pathappend /sbin
$ pathappend /bin
$ pathappend /usr/games 
```

但是，除非可读性是问题，否则在这一点上你最好只做：

```
$ export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

## 上述内容是否适用于人类已知的所有贝壳？

我认为以上内容至少适用于`sh`, `dash`, 和。`bash`如果得知它在 ksh 中不起作用，我会感到`csh`惊讶`fish', or`。我怀疑它会在 Windows 命令 shell 或 Powershell 中工作。

如果你有 Python，下面的命令应该做直接询问的事情（即删除冗余路径）：

```
$ PATH=$( python -c "
import os
path = os.environ['PATH'].split(':')
print(':'.join(sorted(set(path), key=path.index)))
" ) 
```

单线（回避多线问题）：

```
$ PATH=$( python -c "import os; path = os.environ['PATH'].split(':'); print(':'.join(sorted(set(path), key=path.index)))" ) 
```

以上删除了以后的冗余路径。要删除较早的冗余路径，请使用反转列表的索引并再次反转它：

```
$ PATH=$( python -c "
import os
path = os.environ['PATH'].split(':')[::-1]
print(':'.join(sorted(set(path), key=path.index, reverse=True)))
" ) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-08-13T01:50:03.480

这是清理 PATH 的一行代码

*   它不会扰乱 PATH 的顺序，只是删除重复项
*   对待 : 并优雅地清空 PATH
*   没有使用特殊字符，所以不需要转义
*   使用`/bin/awk`它即使在 PATH 损坏时也能正常工作

    ```
    export PATH="$(echo "$PATH" |/bin/awk 'BEGIN{RS=":";}
    {sub(sprintf("%c$",10),"");if(A[$0]){}else{A[$0]=1;
    printf(((NR==1)?"":":")$0)}}')"; 
    ```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-07T23:32:47.963

如果您只想删除任何重复的路径，我会使用我不久前写的这个脚本，因为我遇到了多个 perl5/bin 路径的问题：

```
#!/bin/bash
#
# path-cleanup
#
# This must be run as "source path-cleanup" or ". path-cleanup"
# so the current shell gets the changes.

pathlist=`echo $PATH | sed 's/:/\n/g' | uniq`

# echo "Starting PATH: $PATH"
# echo "pathlist: $pathlist"
unset PATH
# echo "After unset, PATH: $PATH"
for dir in $pathlist
do
    if test -d $dir ; then
        if test -z $PATH; then
            PATH=$dir
        else
            PATH=$PATH:$dir
        fi
    fi
done
export PATH
# echo "After loop, PATH: $PATH" 
```

最后我把它放在我的 ~/.profile 中。由于我几乎只使用 BASH，因此我没有在其他 shell 中尝试过。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-05T07:45:01.067

1.  只是`echo $PATH`
2.  将详细信息复制到文本编辑器中
3.  删除不需要的条目
4.  `PATH= # pass new list of entries`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-10T13:59:20.093

在 bash 中，您只需 ${var/find/replace}

```
PATH=${PATH/%:\/home\/wrong\/dir\//} 
```

或者在这种情况下（因为替换位是空的）只是：

```
PATH=${PATH%:\/home\/wrong\/dir\/} 
```

我首先来到这里，但因为我认为会有一个[参数扩展](http://mywiki.wooledge.org/BashFAQ/073)来做到这一点，所以我去了其他地方。比 sed 容易！

[如何用 Bash 中另一个变量的值替换变量中的占位符或单词？](https://stackoverflow.com/questions/13710806/string-replace-this-shell-variable)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-25T13:33:26.043

您是如何将这些重复的路径添加到 PATH 变量中的？您必须编辑过您的`.`文件之一。( `.tcshrc`, 或`.bashrc`, 等取决于您的特定系统/外壳)。修复它的方法是再次编辑文件并删除重复的路径。

如果您*没有*编辑任何文件，并且您必须以交互方式修改 PATH。在这种情况下，更改不会“坚持”，即如果您打开另一个 shell，或者注销并重新登录，更改将自动消失。

请注意，也有一些系统范围的配置文件，但您不太可能修改这些文件，因此很可能您将更改个人主目录中的文件（如果您希望在确定一组路径后永久更改这些文件）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-25T13:38:31.947

假设你的 shell 是 Bash，你可以设置路径

```
export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

但就像 Levon 在另一个答案中所说的那样，一旦您终止 shell，更改就会消失。您可能想要设置您的`PATH`in`~/.bash_profile`或`~/.bashrc`.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-25T13:40:42.647

没有标准工具可以“编辑”其值`$PATH`（即“仅当文件夹不存在时添加”或“删除此文件夹”）。

要检查下次登录时的路径，请使用`telnet localhost`（或`telnet 127.0.0.1`）。然后它会询问您的用户名和密码。

这为您提供了一个新的登录 shell（即一个不从当前环境继承任何内容的全新登录 shell）。

您可以检查`$PATH`那里的值并编辑您的 rc 文件，直到它正确为止。这对于查看在对重要文件进行更改后是否可以再次登录也很有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-15T22:18:07.550

对于一个简单的复制粘贴模板，我使用这个 Perl 片段：

```
PATH=`echo $PATH | perl -pe s:/path/to/be/excluded::` 
```

这样您就不需要为替代运算符转义斜线。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-09-29T04:29:10.773

路径=`echo $PATH | sed 's/:/\n/g' | sort -u | sed ':a;N;$!ba;s/\n/:/g'`

# jquery - 使用 jQuery Mobile 在 Windows 上垂直滚动视图

> ID：11650842
> 
> 赞同：1
> 
> 时间：2012-07-25T13:29:26.247
> 
> 标签：jquery, windows-phone-7, jquery-mobile, cordova, scrollview

我正在使用 jQuery 1.1 加上 PhoneGap。我一直在尝试使用 jQuery Mobile for Windows Mobile 实现带有行的垂直滚动（基本上是带有自定义单元格的列表视图）。我一直在我可以访问的每个论坛上搜索它，但没有找到任何合适的 tut 这样做。

它可以在 iOS 和 Android 上运行，但由于某种原因，它无法在 Windows Mobile 上运行。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:16:23.507

jQuery Mobile 中的滚动行为依赖于 CSS 3D 转换来模拟移动风格的浏览。转换的使用确保渲染的内容被放置在一个新的“层”中，该层可以在支持它的浏览器上进行硬件加速。

不幸的是，Windows Phone 浏览器不支持 3D 转换，所以这些都不起作用！

jQuery Mobile 团队与 Microsoft 合作创建[了一个特殊的 Metro 主题](http://www.scottlogic.co.uk/blog/colin/2012/04/introducing-the-jquery-mobile-metro-theme/)，您可能想尝试一下。

# rest - 主干集合、REST 和裸阵列

> ID：11650843
> 
> 赞同：1
> 
> 时间：2012-07-25T13:29:27.980
> 
> 标签：rest, collections, backbone.js, hypermedia

在 Backbone 中，[似乎鼓励收集资源返回裸数组](http://backbonejs.org/#Collection-fetch)。这似乎是[由 Rails 做事模型驱动的，这](http://backbonejs.org/#Sync)*根本*不是做某事的好理由。我对此有一些问题：

1.  通常，“集合”资源也需要围绕它的上下文。至少，我喜欢在响应中包含资源 URI 的约定。其他东西，如分页、小计（例如在购物车中）等，意味着集合很少是“裸露的”。
2.  据说裸阵列存在安全问题。我在几个地方听说过这个，但需要一些参考来确认它。

另一方面，我可以看到“裸”数组如何使 API 更自然：

1.  集合中每个对象的格式往往与在该集合中创建/更新对象时的格式相同。
2.  “集合”在语义上很好地映射到项目集合的概念。

免责声明：这里的前提可能完全有缺陷。我意识到 REST 不仅仅是 HTTP 动词和 JSON。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:59:00.737

您引用的安全问题是一个 CSRF 漏洞，原因是脚本包含请求的 JSON 数组可以通过覆盖本机 javascript Array 类型来评估。 [这是该漏洞的一个很好的解释](http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx)。AFAIK，这对于普通的 JSON 对象是不可能的。

但是，Backbone 不会阻止您包装您的收藏响应。您可以覆盖 Backbone.Collection.parse 以“解包”或在填充集合之前修改原始响应。

```
var MyCollection = Backbone.Collection.extend({
  model:MyModel,
  parse: function(response) {
    //Assume the response looks like { "data": [ ... ] }
    return response.data;
  }
}); 
```

我通常更喜欢包装收集响应，不仅是出于安全原因，还因为它允许 API 具有更大的灵活性和更改弹性。

# batch-file - 通过批处理脚本使用名称和创建日期编辑文件名

> ID：11650844
> 
> 赞同：1
> 
> 时间：2012-07-25T13:29:32.660
> 
> 标签：batch-file

我正在尝试创建一个批处理文件，该文件通过名称和创建日期重命名文件夹中的所有文件。例如 >User 文件名将其更改为 >User_13-06-2012。请帮我。

我有这个代码，它只是添加带有名称的新日期。

```
@echo off
cd "C:\account folder"
for /f "tokens=1-3 delims=/" %%a in ('echo %date%') do set today=%%a%%b%%c
for %%f in (*.*) do ren "%%f" "%%~nf_%today%%%~xf" 
```

从现在开始感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:41:14.970

已编辑：先前的答案错误地显示了修改时间，而不是创建时间。

这

```
@echo off
for %%A in (*.*) do ( 
  for /f "skip=7" %%B  in ('dir /T:c "%%A"^|sort') do (
   for /f "tokens=1-3 delims=/" %%C in ("%%B") do echo %%~nA_%%C-%%D-%%E%%~xA
  )
) 
```

将为根据您的要求格式化的文件吐出新名称。从这里开始工作应该相当容易。

**注意：**这假设您的日期分隔符是“/”并且**通常它取决于语言环境**

编辑：因为上面的纯批处理解决方案本质上是不可靠的，所以下面是等效的 powershell 一个衬里 - 它更快，独立于语言环境并且易于修改。如果 ps 可用，我建议改用它。

```
get-childitem | ? {$_ -is [IO.FileInfo]} | foreach-object {$_.basename + "_" + (get-date ($_.CreationTime) -uformat "%d-%m-%Y") + $_.extension} 
```

# c# - 序列化相似的类

> ID：11650845
> 
> 赞同：4
> 
> 时间：2012-07-25T13:29:34.750
> 
> 标签：c#, serialization

我有以下课程：

```
 [Serializable]
    public class ExtendedAddressData
    {
        public String AddressLine1 { get; set; }
        public String AddressLine2 { get; set; }
        public String Country { get; set; }
        public String City { get; set; }
        public String Firstname { get; set; }
        public String Surname { get; set; }
        public String FakeField { get; set; }
    }

    [Serializable]
    public class AddressData
    {
        public String AddressLine1 { get; set; }
        public String AddressLine2 { get; set; }
        public String Country { get; set; }
        public String City { get; set; }
        public String ZipCode { get; set; }
        public String Firstname { get; set; }
        public String Surname { get; set; }
    } 
```

我试图确保旧的 AddressData 在未来仍然可以反序列化，尽管它被序列化了一个稍微不同的类。

基本上，空的（不存在的）字段应该被删除，那些被删除的应该被遗忘。

我正在从 Object 序列化到 Byte[] （并返回）。不是 XML 或 JSON

```
 private static byte[] ObjectToByteArray(object _Object)
    {
        try
        {
            var memoryStream = new MemoryStream();
            new BinaryFormatter().Serialize(memoryStream, _Object);
            return memoryStream.ToArray();
        }
        catch (Exception e)
        {
            Console.WriteLine("Exception caught in process: {0}", e);
        }
        return null;
    }

    private static object ByteArrayToObject(byte[] aBytes)
    {
        try
        {
            var memoryStream = new MemoryStream(aBytes);
            var serializedObject = new BinaryFormatter().Deserialize(memoryStream);
            return serializedObject;

        }
        catch (Exception e)
        {
            Console.WriteLine("Exception caught in process: {0}", e);
        }
        return null;
    } 
```

这是一个简化的 UnitTest，它可能解释了我比我能做的更好的事情

```
 public void LegacySerializationSupportTest()
    {
        var realData = new AddressData()
        {
            AddressLine1 = "AddressLine1",
            AddressLine2 = "AddressLine2",
            City = "City",
            Country = "Country",
            Firstname = "Firstname",
            Surname = "Surname",
            ZipCode = "ZipCode"
        };
        var bytearray = AddressRepository_Accessor.ObjectToByteArray(realData);

        AddressData realObject = (AddressData) AddressRepository_Accessor.ByteArrayToObject(bytearray);
        ExtendedAddressData fakeObject = (ExtendedAddressData) AddressRepository_Accessor.ByteArrayToObject(bytearray);
        Assert.AreEqual(realObject.AddressLine1,fakeObject.AddressLine1);
    } 
```

有什么办法可以做到这一点并且仍然使用 bytearray 而不是 JSON 或 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:18:26.100

我同意詹姆斯的观点。如果旧类和新类都继承自同一个父类，那么这不仅仅是架构上的事情（DRY 原则），您可以完成工作。在父类上创建一个序列化程序，它将为一个类中的缺失值输出“null”值，并且根本不包含您要排除的另一个类的字段。然后在父类而不是派生类上调用序列化程序，一切最终都会看起来一样。

在子类上，您仍然需要弄清楚您想对新序列化格式中未包含的值做什么（即，您的代码的其余部分是否愿意让该字段为空的类？）。

# android - DecorView 子框架布局

> ID：11650847
> 
> 赞同：3
> 
> 时间：2012-07-25T13:29:38.563
> 
> 标签：android, android-layout

有人可以向我解释为什么我的布局上的 DecorView 的孩子是一个 FrameLayout，而我还没有定义一个？

这是xml布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background_general" >

<ImageView
    android:id="@+id/ivIKUGo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:src="@drawable/mainbutton_selector" />

<ImageView
    android:id="@+id/imageViewmoto"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="150dp"
    android:src="@drawable/motto_buttonpage_hdpi" />

</RelativeLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:10:46.990

如果您使用普通主题，您将有一个`LinearLayout`介于 the`DecorView`和 the之间`FrameLayout`的内容。`Activity`如果您使用`NoTitleBar`主题类型，则不需要额外的内容，`LinearLayout`因此将其删除，将内容保留`FrameLayout`为`DecorView`.

# sql - sql查询phpmyadmin

> ID：11650850
> 
> 赞同：0
> 
> 时间：2012-07-25T13:29:46.427
> 
> 标签：sql, phpmyadmin

数据库 phplogin > 用户

```
id                   int 11
username         varchar25
password         varchar25 
```

添加 2 个用户 1 名为 Admin 并通过：123 其他名称：acc2 通过：pass2 的代码是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:32:31.627

按顺序运行这些查询

```
ALTER TABLE `users` ADD PRIMARY KEY(`id`);

ALTER TABLE `users` CHANGE `id` `id` INT( 11 ) NOT NULL AUTO_INCREMENT

INSERT INTO `users`(`username`,`password`) value('Admin','123'),('acc2','pass2'); 
```

或（为安全起见，使用 sha1() 保护您的密码）

```
 INSERT INTO `users`(`username`,`password`) value('Admin',sha1('123')),('acc2',sha1('pass2')); 
```

# android - making phone call in android

> ID：11650852
> 
> 赞同：1
> 
> 时间：2012-07-25T13:29:48.767
> 
> 标签：android

Making a Call through android device via phone and the code does not seems to work

I am call this function

```
private void call() {
    try {
        Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("912345678"));
        startActivity(callIntent);
    } catch (ActivityNotFoundException activityException) {
        Log.e("dialing-example", "Call failed", activityException);
    }
} 
```

also I have given the permission

```
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
```

What am I doing wrong any one can guide me?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T04:37:23.917

```
 Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + number));
                       startActivity(intent); 
```

make permission in manifest file:

```
 <uses-permission android:name="android.permission.CALL_PHONE"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:32:56.900

```
callIntent.setData(Uri.parse("tel:91234566")); 
```

If you do not specify the scheme of the URI (`tel:` in this case), it won't be recognized as a phone number and hence, the desired action will not occur.

# wordpress - 如何在上午 10 点到下午 5 点之间显示 wordpress 页面？

> ID：11650857
> 
> 赞同：1
> 
> 时间：2012-07-25T13:29:57.660
> 
> 标签：wordpress, datetime, custom-wordpress-pages

我正在为我的表弟创建一个汽车预订网站，并且我使用 wordpress 创建了它，他不希望预订页面仅在上午 10 点到下午 5 点之间可用。否则页面必须显示预订时间结束。请给我这个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:07:37.937

您可以在 index.php 本身中检查当前时间。如果当前时间不在您指定的时间之间，则重定向到显示某些消息的页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:53:44.097

我已经结束了，只需将此代码段放入您的`functions.php`

```
add_filter('the_content', 'check_time');
function check_time($content)
{
    $pagename = get_query_var('pagename');
    if($pagename=='booking_page') // page name assumed 'booking_page' here
    {
        date_default_timezone_set('Asia/Dhaka'); // set your timezone if it was not set, currently it's mine
        $currentTime=strtotime(date("H:i", time()));
        $start=strtotime("10:00"); // 10am
        $end=strtotime("17:00"); // 5pm

        if($currentTime >= $start && $currentTime <= $end)
        {
            return $content; // return the original content, it's intime
        }
        else
        {
            $content="Booking hour ends!"; // change the content to "Booking hour ends!"
        }

    }
    return $content;
} 
```

我已经对其进行了测试并且运行良好，但不确定这是否是执行此操作的完美方法。

# c - char* 变量中的垃圾值

> ID：11650861
> 
> 赞同：-3
> 
> 时间：2012-07-25T13:30:13.753
> 
> 标签：c

代码：

```
char* data = NULL;
data = new char[lengthOfParam];   //lengthOfParam = 3
                               //after allocation **data = ¥¥¥¥Ü\r**
memcpy(data,&buffer[offset],lengthOfParam);   //**data = pki¥Ü\r** 
```

为什么我得到那个垃圾值？？？如果我尝试将该值分配给任何其他数组 ex，如何避免或删除这些额外的值 bcs：

```
obj[1] = data; 
```

然后将带有 junk' 的整个值分配给该变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:35:41.993

C 中的字符串需要以 NUL 结尾。这意味着您需要在字符串的末尾添加一个零值字节以指示字符串的结尾。因为当您查看/打印您正在读取的超出数组末尾的值到它之后的任何内存时，您没有任何迹象表明字符串的结尾。

如果源数据包含 NUL 终止符，您可以简单地分配和复制 1 个字节，但假设它是一个没有 NUL 终止符的固定长度字段，您将需要手动添加一个：

```
data = new char[lengthOfParam+1];

memcpy(data, &buffer[offset], lengthOfParam);
data[lengthOfParam] = 0; 
```

还进一步查看您发布的这一行：

```
obj[1] = data; 
```

我在这里可能错了，如果我错了，我很抱歉，但我强烈怀疑这条线没有按照你的想法做。这将存储指向您的字符串的指针，而`obj[1]`不是从您的字符串中复制数据。因此，如果您删除`data`,`obj[1]`也将不再有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:59:39.290

这是 C 还是 C++？

在包含 的语言中`new`，您还可以执行

```
std::string data(&buffer[offset], lengthOfParam); 
```

假设`buffer`是一个字符数组。

# python - 带有 Python 的 DLL

> ID：11650867
> 
> 赞同：0
> 
> 时间：2012-07-25T13:30:20.780
> 
> 标签：python, dll

我正在尝试从 DLL 调用函数

```
function oziRepositionWP(Number:integer;lat,lon:double):integer;stdcall; 
```

我已经用python编写了代码

```
no = c_int(1)
lat = c_double(34.00962)
lon = c_double(74.80067)

var =windll.OziAPI.oziRepositionWP(byref(no),byref(lat),byref(lon)) 
```

但我得到了消息

```
var =windll.OziAPI.oziRepositionWP(byref(no),byref(lat),byref(lon))
ValueError: Procedure probably called with not enough arguments (8 bytes missing) 
```

我哪里错了请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:35:43.243

我不确定，`function oziRepositionWP(Number:integer;lat,lon:double):integer;stdcall;`实际上是什么语言。是德尔福吗？无论如何，签名看起来像是按值接受所有参数；但是，在您的实际调用中，所有值都是通过引用传递的。假设您在 32 位中工作，您正在传递 3 个指针值（每个 32 位 => 12 个字节），但该函数需要一个整数（32 位）和两个双精度数（64 位）=> 20 个字节。

然而，这只是一个有根据的猜测，只要`OziAPI`没有定义的实现语言。

# c++ - 这种使用模板对类层次结构进行函数重载的方式安全吗？

> ID：11650868
> 
> 赞同：5
> 
> 时间：2012-07-25T13:30:23.893
> 
> 标签：c++, class, templates, overloading

好的，这有点复杂，所以请多多包涵。:)

## 我们有这个简单的类层次结构：

```
class A {};
class DA : public A {};
class DDA : public DA {}; 
```

## 我们在这些类上运行了以下函数：

```
void f(A x) {
  std::cout << "f A" << std::endl;
}
void f(DA x) {
  std::cout << "f DA" << std::endl;
}
void f(DDA x) {
  std::cout << "f DDA" << std::endl;
} 
```

现在我们想添加另一个处理 DA 的函数。

## (1) 第一次尝试可能如下所示：

```
void g(A t) {
  std::cout << "generic treatment of A" << std::endl;
  std::cout << "called from g: ";
  f(t);
}
void g(DA t) {
  std::cout << "special treatment of DA" << std::endl;
  std::cout << "called from g: ";
  f(t);
} 
```

但是用每个类的对象调用它显然不会产生预期的效果。

称呼：

```
 A a; DA b; DDA c;
  g(a); g(b); g(c) 
```

结果：

```
generic treatment of A
called from g: f A
special treatment of DA
called from g: f DA
special treatment of DA
called from g: f DA        //PROBLEM: g forgot that this DA was actually a DDA 
```

## (2) 因此，我们可能会尝试使用模板：

```
template<typename T>
void h(T t) {
  std::cout << "generic treatment of A" << std::endl;
  std::cout << "called from h: ";
  f(t);
}

template<>
void h<>(DA t) {
  std::cout << "special treatment of DA" << std::endl;
  std::cout << "called from h: ";
  f(t);
} 
```

这导致：

```
generic treatment of A
called from h: f A
special treatment of DA
called from h: f DA
generic treatment of A    //PROBLEM: template specialization is not used
called from h: f DDA 
```

那么，我们不使用模板特化，而是为特殊情况定义一个非模板函数怎么样？（关于非常令人困惑的问题的[文章](http://www.gotw.ca/publications/mill17.htm "[萨特]")。）事实证明，它的行为方式完全相同，因为根据文章“一等公民”的非模板函数似乎丢失了，因为使用它必须进行类型转换. 如果它会被使用，那么我们就会回到第一个解决方案（我假设）并且它会忘记 DDA 的类型。

## (3) 现在我在工作中遇到了这段代码，这对我来说似乎很花哨：

```
template<typename T>
void i(T t, void* magic) {
  std::cout << "generic treatment of A" << std::endl;
  std::cout << "called from i: ";
  f(t);
}

template<typename T>
void i(T t, DA* magic) {
  std::cout << "special treatment of DA" << std::endl;
  std::cout << "called from i: ";
  f(t);
} 
```

但它似乎正是我想要的：

```
generic treatment of A
called from i: f A
special treatment of DA
called from i: f DA
special treatment of DA
called from i: f DDA 
```

即使它需要以一种奇怪的方式调用：i(a, &a); i(b, &b); i(c, &c);

现在我有几个问题：

1.  为什么这会奏效？
2.  你认为这是个好主意吗？可能的陷阱在哪里？
3.  你会建议哪些其他方式来进行这种专业化？
4.  （类型转换如何适应模板部分排序等疯狂......）

我希望这是相当清楚的。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:40:07.390

函数模板重载

```
template<typename T>
void i(T t, DA* magic) { 
```

仅当参数`magic`可转换为 type时才可用`DA *`。这显然是这种情况，`&b`但也`&c`因为指向派生的指针可转换为指向基址的指针。`void *`函数模板重载始终可用，但优先`DA *`于`void *`§13.3.3.2:4：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 13.3.3.2 对隐式转换序列进行排名[over.ics.rank]
> 
> [...]
> 
> *4*标准转换序列按其等级排序：完全匹配是比提升更好的转换，这是比转换更好的转换。除非以下规则之一适用，否则具有相同等级的两个转换序列是无法区分的：
> 
> [...]
> 
> — 如果类`B`直接或间接派生自类`A`，则`B*`to`A*`的转换优于to 的转换， `B*`to的`void*`转换优于`A*`to的转换。`void*``B*``void*`

正如您所指出的，这是一个完全可行的方案。`i`将魔法包装在另一个负责调用的模板函数中会更有意义`(a, &a)`：

```
template<typename T>
void j(T t) {
    i(t, &t);
} 
```

在安全方面，没问题；如果`DA *`重载丢失，那么`void *`重载将被静默选择；由您决定这是否可取。

作为替代方案，您可以使用`std::enable_if`在模板之间进行选择：

```
template<typename T>
typename std::enable_if<!std::is_base_of<DA, T>::value>::type g(T t) {
  std::cout << "generic treatment of A" << std::endl;
  f(t);
}
template<typename T>
typename std::enable_if<std::is_base_of<DA, T>::value>::type g(T t) {
  std::cout << "special treatment of DA" << std::endl;
  f(t);
} 
```

# jquery - 在使用 jquery 加载页面时将内容附加到 div 元素

> ID：11650869
> 
> 赞同：0
> 
> 时间：2012-07-25T13:30:24.203
> 
> 标签：jquery, html, ajax, get, load

我想将 html 内容接收器从服务器（服务器 2）附加到当前页面的正文（我从服务器 1 收到）。这是我想在加载页面时实现的（从服务器 1 接收）。（因此我从两个不同的服务器获取原始内容。）

我尝试使用

```
function Faulttest() {var myarray=new Array();
    var urlarray=new Array();
$(document).ready(function(){
    $.get({
     url:"http://csce.unl.edu:8080/Anomalies/index.jsp",
     data: "html",
     success:  function(result) {
     alert(result);
     $('#body').append(result) // result will be the contents received from the server
     },
     dataType:"text/html"
    });
});
// more contents   
} 
```

页面的 HTML 内容为：

```
<body style="font-size:62.5%;" onload="Faulttest();" >
<div id="body" >
        <h1>content top </h1>
       //HTML CONTENTS GOES HERE
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:42:01.290

看起来您正在尝试从不同的域加载页面。[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)会给你带来麻烦。你不能那样做！

如果您尝试从中加载内容的文件在同一个域中，您可以通过调用 jQuery`get`方法轻松完成。

```
$(function(){
  $.get("somepageInyourdomain.html",function(data){
       $('#body').append(data);
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:38:34.990

我猜你混淆[了 $.get](http://api.jquery.com/jQuery.get/)和[$.ajax](http://api.jquery.com/jQuery.ajax/)，因为你使用的是 for 的语法`$.ajax`，它应该是：

```
$(document).ready(function(){

    Faulttest();

    function Faulttest() {
        var myarray=new Array();
        var urlarray=new Array();

        $.ajax({
            url:"http://csce.unl.edu:8080/Anomalies/index.jsp",
            data: "html",
            dataType:"text/html",
            success:  function(result) {
                $('#body').append(result);
            }
        });
    }
}); 
```

diEcho 也是正确的，通常由于安全限制，您不能执行跨域 ajax 请求，但有一定的黑客攻击。使用数据类型 jsonp 将允许您进行跨域请求，但是当然服务应该以 json 格式返回结果并支持回调等。

并删除 body 标签上的 onload 函数，并在 document.ready 语句中运行该函数以确保 jQuery 已加载。

# http - HTTP：确定访问站点的设备是否为移动设备的最可靠方法

> ID：11650870
> 
> 赞同：1
> 
> 时间：2012-07-25T13:30:30.040
> 
> 标签：http, mobile

确定访问站点的设备是否是移动设备最可靠的方法是什么？还应该有一种方法来区分设备是平板电脑还是智能手机。平板电脑可以是 10 英寸，因此能够显示普通网页，而智能手机则不能，我想提供特定于智能手机的内容。我想我应该检查的是屏幕分辨率，但我找不到可靠的方法。屏幕分辨率应以像素而不是每英寸像素为单位。所以我的网站会认为 320x480 或 480x600 和 600x800 是移动的。但是 1024x768 的东西可能应该被视为桌面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:36:26.627

所以我们开始：

[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/) - 这里有检测访问者是否在移动设备上的工具。但 ...

[http://modernizr.com/docs/#s2](http://modernizr.com/docs/#s2) - 这里有检测功能的工具。通过功能做一些后备比通过移动/桌面更好

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/) - 这里你已经内置了媒体查询，你可以用它来检测屏幕大小。您可以在此处查看实际情况：[https ://github.com/twitter/bootstrap/blob/master/less/responsive.less](https://github.com/twitter/bootstrap/blob/master/less/responsive.less)

# xcode - 为 Gatekeeper 进行代码签名后：无法再访问我的应用程序的钥匙串项目

> ID：11650875
> 
> 赞同：2
> 
> 时间：2012-07-25T13:30:42.667
> 
> 标签：xcode, code-signing, osx-gatekeeper

我想对我的 Mac 软件进行代码签名，以便为 Gatekeeper 和 OS X Lion 做好准备。所以我更改了 Xcode 中的构建设置并选择了我的 Developer ID 证书。构建我的项目是成功的。但是，如果我运行这个新应用程序，我将无法再访问应用程序的钥匙串项！如果我删除代码签名一切正常。

有人知道该问题的解决方案吗？

# django - Django 查询查询集性能

> ID：11650876
> 
> 赞同：0
> 
> 时间：2012-07-25T13:30:43.033
> 
> 标签：django

我有一个模型，我正在做一个查询：

```
my_objects = Model.objects.filter(user = request.user) 
```

现在我正在做的 my_objects ：

```
obj = my_objects.get(user = x ) 
```

我试图了解我的**.get** over my_objects 是否不会对数据库生成另一个查询，并且只会对过滤器输出起作用？否则它将生成另一个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:43:47.580

如果`Model`不是 User 实例，它将再次命中数据库，因为在这种情况下 User 是一个相关对象，如果您不想再次命中数据库，请使用 select_related() 并自行过滤`obj`：

> “将自动“遵循”外键关系，在执行查询时选择附加的相关对象数据”

```
my_objects = Model.objects.select_related().filter(user = request.user) 
```

在此处查看更多信息： [https ://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)

**编辑：** 我忘了提到 Django 中的 QuerySet 是懒惰的，实际上在评估查询集之前不要点击数据库，这些是强制评估查询集的方法： [方法](https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated)

# php - fgetcsv / fopen 反向

> ID：11650880
> 
> 赞同：1
> 
> 时间：2012-07-25T13:30:49.960
> 
> 标签：php, codeigniter, csv

我正在尝试做这个确切的功能，只希望能够显示文档的最后 20 行？

```
 $file = fopen("/tmp/$importedFile.csv","r");
    while ($line =  fgetcsv($file))
    {
        $i++;
        $body_data['csv_preview'][] = $line;
        if ($i > 20) break;
    }
    fclose($file); 
```

我尝试过更改 `"r"`in`$file = fopen("/tmp/$importedFile.csv","r");`但是似乎只有将指针放置在何处进行读写的变化。

我觉得这可能是一件容易的事。我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:42:28.030

一种方法是使用[`SqlFileObject`](http://us3.php.net/manual/en/class.splfileobject.php). 首先，您需要知道文件中有多少行，可以这样计算：

```
$filename = "/tmp/$importedFile.csv";

// Create a new object for the file
$file = new SplFileObject( $filename, "r");

$lines = 0;
while ( !$file->eof()) {
   $file->fgets();
   $lines++;
} 
```

现在您知道文件中有`$lines`多少行。然后，您必须查找`$lines - 20`行号，并读取您的 CSV 数据直到 EOF，如下所示：

```
$file->seek( $lines - 20);
while ( !$file->eof()) { 
    $body_data['csv_preview'][] = $file->fgetcsv();
} 
```

也许有一种更有效的计算方法`$lines`。此外，您应该先确认文件中有超过 20 行，然后再`seek()`尝试`$lines - 20`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:39:34.210

您的代码返回前 20 行。尝试修改最后 20 行

```
if($i > 20)
   array_shift($body_data['csv_preview']) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:13:59.953

我想出了这个：

```
$file = fopen("/tmp/$importedFile.csv","r");
$start = count( file( $file ) ) - 20;
$i = 0;
while ($line =  fgetcsv($file)) {
    $i++;
    if ( $i > $start ) $body_data['csv_preview'][] = $line;
}
fclose($file);
//Body_data has now the last 20 lines. 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:41:01.280

这是一种方式

```
$fileend = array();
$file = fopen("/tmp/$importedFile.csv","r");
while ($line =  fgetcsv($file))
{
    // we have a line, so if $fileend already contains the required number
    // of lines we have to make some room.
    if (count($fileend) > 20) {
        $fileend=array_shift($fileend);
    }
    // add freshly read line to array's end
    array_push($fileend,$line);
}
fclose($file);
// at this point $fileend will contain the 20 last lines of the file. 
```

我不能向你保证它会快得令人眼花缭乱......

一种更快的方法是将行存储在固定大小的循环缓冲区中，这比听起来容易

```
$i=0;
while ($line =  fgetcsv($file))
{
    // store as linenumber modulo 20 'th element in array
    $circularbuffer[$i % 20] = $line;
    $i++;
} 
```

然后阅读它

```
// must start reading after last written element, $i has the correct value.
// and we will read 20 times - same modulo calculation to "circulate" buffer
for ($j=$i;$j<$i+20;$j++) {
    $body_data['csv_preview'][] = $circularbuffer[$j%20];
} 
```

显然，这里最大的优势是您只读取文件一次，并且我认为读取操作是该函数迄今为止最昂贵的（执行时间）部分。

# java - MySql Java：我无法解决的奇怪问题

> ID：11650882
> 
> 赞同：0
> 
> 时间：2012-07-25T13:30:50.530
> 
> 标签：java, mysql, tuples

我在从 Java 程序插入数据时遇到问题。我的问题是用户被问到“你想在部门表中有多少个元组？”

他们可以添加任意数量的元组。然后我问他们“你想在学生表中有多少个元组？” 不管他们想要多少。

好吧，我在学生表中输入 10，有时会跳过随机条目。有时我会得到 1-8，或 1、2、3、5、6、9 或不同的变体。

我知道我的 while 循环是正确的，所以我不确定是什么原因造成的，所以我希望有人可以查看我的代码并发现我可能遗漏的东西。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package program2;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.Statement;
import java.util.Random;

public class Program2 {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {

            // Variables
            int instructornum=0;
            int coursenum = 0;
            int studentnum = 0;
            int count = 0;
            int departmentnum =0;
            int counts= 0;
            int minimum=0;
            int x=0;
            int teachesnum=0;
            // Variables

            //Connection to the database
            Connection conn = null;
            String url = "jdbc:mysql://localhost:3306/";
            String dbName = "university1";
            String Driver = "com.mysql.jdbc.Driver";
            // Change the userName & password to what ever your credentials are.
            String userName = "root"; 
            String password = "121089bn";
            //Connection to the database

       try {

            InputStreamReader istream = new InputStreamReader(System.in);
            BufferedReader MyReader = new BufferedReader(istream);

            Class.forName(Driver).newInstance();
            conn = DriverManager.getConnection(url+dbName,userName,password);
            System.out.println("Connected");

            // Ask the user how many tuples in department table.
            System.out.println("How many tuples would you like to create in Department     Table?");

            // Takes in as string the number then parse it to an int.
            String dept = MyReader.readLine();
            departmentnum = Integer.parseInt(dept);

// ****************** Department Table ******************//  
            while (count < departmentnum)
            {
                Statement st = conn.createStatement();
                // Counts keeps the counter so the Primary Key is unique.
                st.executeUpdate("Insert into department (dept_name, building, budget) values ('Dept "+counts+"', 'Voigt', '1200')");
                count++;
                counts++;
            }

// ****************** Student Table ******************//                
            count=0;
            counts=0;

            System.out.println("How many tuples would you like to create in Student Table?");
            String student = MyReader.readLine();
            studentnum = Integer.parseInt(student);

            while (count < studentnum)
            {
                Random ran = new Random(); 
                int range = departmentnum - minimum + 1; 
                x =  ran.nextInt(range) + minimum; 

                Statement st = conn.createStatement();
                st.executeUpdate("Insert into student (id, name, dept_name,tot_cred) select '"+counts+"', 'Student "+counts+"', dept_name, '10' from department where dept_name='Dept "+x+"'");
                count++;
                counts++;
            }

// ****************** Course Table ******************//                 
            x=0;
            count=0;
            counts=0;   

            System.out.println("How many tuples would you like to create in Course Table?");
            String course = MyReader.readLine();
            coursenum = Integer.parseInt(course);

            while (count < coursenum)
            {
                Random ran = new Random(); 
                int range = departmentnum - minimum + 1; 
                x =  ran.nextInt(range) + minimum; 

                Statement st = conn.createStatement();
                st.executeUpdate("Insert into course (course_id, title, dept_name,credits) select '"+counts+"', 'Computer Science "+counts+"', dept_name, '3' from department where dept_name='Dept "+x+"'");
                count++;
                counts++;
            }

// ****************** Instructor Table ******************//                   
            x=0;
            count=0;
            counts=0;   

            System.out.println("How many tuples would you like to create in Instructor Table?");
            String instructor = MyReader.readLine();
            instructornum = Integer.parseInt(instructor);

            while (count < instructornum)
            {
                Random ran = new Random(); 
                int range = departmentnum - minimum + 1; 
                x =  ran.nextInt(range) + minimum; 

                Statement st = conn.createStatement();
                st.executeUpdate("Insert into instructor (id, name, dept_name,salary) select '"+counts+"', 'Instructor "+counts+"', dept_name, '10000' from department where dept_name='Dept "+x+"'");
                count++;
                counts++;

            }

// ****************** Takes Table ******************//                    
            x=0;
            count=0;
            counts=0;

            System.out.println("How many tuples would you like to create in Teaches Table?");
            String teaches = MyReader.readLine();
            teachesnum = Integer.parseInt(teaches);

            while (count < teachesnum)
            {
                Random ran = new Random(); 
                int range = instructornum - minimum + 1; 
                x =  ran.nextInt(range) + minimum; 

                Random random = new Random(); 
                int courserange = coursenum - minimum + 1; 
                int y =  random.nextInt(courserange) + minimum; 

                Statement st = conn.createStatement();
                st.executeUpdate("Insert into teaches (id, course_id, semester, year) select id, course_id, 'Spring', '2010' from course, instructor where instructor.id='"+x+"' and course.course_id='"+y+"'");
                count++;
                counts++;
            }

            conn.close();
       }

            catch (Exception e) {
            System.err.println("Error");
            System.err.println(e.getMessage());
            }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:52:23.663

您的问题可能是您正在为不存在的部门创建学生。您的范围变量等于 departmentnum + 1，这意味着您`nextInt()`将返回 0-departmentnum（含）。

但是，您是部门 ID，仅从 0 到部门编号 - 1 因为您的 while 循环是`count < departmentnum`. 要么让你的while循环成为你的，要么`count <= departmentnum`摆脱你范围内的+ 1。

也欢迎使用stackoverflow :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:54:37.880

我认为您遇到的问题是随机部门编号。假设用户输入 5，您将创建 5 个部门，其 ID 为 0 到 4，而随机生成器选择 0 到 5 之间的数字。

# .htaccess - Cakephp 在域名前使用 www 时重定向到 /app/webroot

> ID：11650883
> 
> 赞同：0
> 
> 时间：2012-07-25T13:30:59.003
> 
> 标签：.htaccess, cakephp

当我使用“www”输入我的域名时，例如[http://domain.nl](http://domain.nl) ，一切正常，但是当我使用前面带有“www”的同一个域时，它会重定向到 /app/webroot，这会产生错误。问题可能是什么？

我使用默认的 cakephp .htaccess 文件

```
<IfModule mod_rewrite.c>
 RewriteEngine on
 RewriteRule    ^$ app/webroot/    [L]
 RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:22:35.187

您可以先检查您的重写模式是否在`apache\conf\httpd.conf`文件中

检查`httpd.conf`文件中的以下代码

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

在此行中删除哈希并重新启动 apache 服务器

之后你可以设置

```
RewriteBase /YOURPATH/ 
```

或者

```
RewriteBase / 
```

过程中

我想你可以试试这个

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /YOURPATH/
    RewriteRule    ^$    app/webroot/    [L]
    RewriteRule    (.*) app/webroot/$1    [L]

 </IfModule> 
```

# openerp - 将相同的数据插入两个字段浮点数

> ID：11650884
> 
> 赞同：1
> 
> 时间：2012-07-25T13:31:01.287
> 
> 标签：openerp

请帮忙，我有两列，A 列和 B 列（A 和 B 类型为浮点型）。所以我想如果我填写A列中的值并点击保存，我在A列中输入的自动值也将出现在B列中

我这样做

```
def _dept_count(self, cr, uid, ids,A,B,arg, context=None):
    result = {}
    for r in self.browse(cr, uid, ids, context=context):
       B=0
       if r.deposit:
            B = A
       result[r.id] = A 
    return result

_columns = {
    'name': fields.many2one('res.partner','Partner'),
    'date':fields.date('Date of Deposit'),
    #'deposit': fields.function(_save_deposit, type='float',string='Deposit'),
    'available': fields.float('Available'),
    'note': fields.text('Description'),
} 
```

但没有任何回应。未包含在数据库中。请帮忙

**PS他的第二个在同一个数据库中**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:31:42.377

您还可以使用`on_change`来设置备用字段的值。但除此之外，您还有两个 Options fields.function 和 field。有关的 ;）

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:48:17.700

我可以在您的代码中看到两个问题：

*   `deposit`使用函数`_save_deposit`，而不是`_dept_count`；
*   `dept_count`返回一个字典，并且应该返回一个浮点数。

如果您尝试更新`available`何时`deposit`更改，为什么不重写`create`and`write`方法呢？

# jquery - 如果 youtube embed src 为空，则 jquery 隐藏 div

> ID：11650888
> 
> 赞同：0
> 
> 时间：2012-07-25T13:31:13.667
> 
> 标签：jquery, youtube, hide

嗨，我想要的是当 src="" 时（容器）div 被隐藏（.videocontainer）并在源中有链接时显示。希望有人可以帮助解决这个问题

这是我正在处理的代码，显然不起作用：

```
<script type="text/javascript">
        $(document).ready(function(){
                          if ($('iframe[src]').text() === "")
                          $(".videocontainer").hide(

                          });
    </script>
</head>
<body>
    <div class="videocontainer">
        <div class="thevideo">
            <iframe width="310" height="174" src="http://www.youtube.com/embed/860PGF9GXZY" frameborder="0" allowfullscreen></iframe>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:32:36.770

```
if ( $('iframe[src][src=""]') )
   $(".videocontainer").hide();
else
   $(".videocontainer").show(); 
```

`'iframe[src][src=""]'`将检查`iframe`has`src`和`src`是否为空，如果为空则隐藏`videocontainer`else 显示`videocontainer`.

**或者**

```
if ( $('iframe').attr('src').length )
   $(".videocontainer").hide();
else
   $(".videocontainer").show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:33:35.023

```
if($('iframe').attr('src') === ""){
    console.log('11');
  $(".videocontainer").hide();
} 
```

编辑：[工作演示](http://jsfiddle.net/ysKLw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:35:23.947

```
if ($('iframe').attr('src').length == 0)
$(".videocontainer").css("display","none");
else{
      $(".videocontainer").css("display","block"); 
} 
```

# c# - 原始 Http：处理子域

> ID：11650889
> 
> 赞同：0
> 
> 时间：2012-07-25T13:31:14.523
> 
> 标签：c#, http, subdomain

我正在使用套接字练习原始 HTTP 请求。我了解 HTTP 协议的工作原理（基本），并且知道如何构建请求。

目前我的基本 HTTP 请求是：

```
GET / HTTP/1.1
Host: google.com
Connection: Close 
```

当我想请求**google.com/toll.php**（当然不存在）时：

```
GET /toll.php HTTP/1.1
Host: google.com
Connection: Close 
```

但是，如果我有一个包含子域的 url，例如：

```
lol.google.com/toll.php 
```

请求应该是：

```
GET /lol/toll.php HTTP/1.1
Host: google.com
Connection: Close 
```

或者应该是：

```
GET /toll.php HTTP/1.1
Host: lol.google.com
Connection: Close 
```

这个问题快把我逼疯了！我已经阅读了 .NET 文档和套接字以及一些关于 HTTP 协议的文档。我也用谷歌搜索了很多术语，但仍然......我无法找到答案。

我正在使用 C# (.NET)，并且我知道没有必要编写 HTTP 类或执行手动 HTTP 请求，因为我们有 HttpWebRequest 类。这仅用于学习目的。

提前致谢。斯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:32:28.070

绝对应该是

```
GET /toll.php HTTP/1.1
Host: lol.google.com 
```

Http 不区分域和子域。它们都是具有不同名称的简单主机。

# amazon-ec2 - 为什么我的额外自动缩放 EC2 实例无法终止？

> ID：11650890
> 
> 赞同：2
> 
> 时间：2012-07-25T13:31:16.760
> 
> 标签：amazon-ec2, amazon-web-services

其中之一是对多个请求进行负载测试，并且正如预期的那样，自动缩放开始创建多个实例。然而，尽管请求计数现在运行得非常低，但我发现我无法永久终止额外的实例，因为它们不断被重新创建。

额外的实例出现在负载均衡器中，我可以将它们从负载均衡器中删除，但同样只是暂时的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:32:38.103

您可以通过将 Auto Scaling 所需容量设置回 1 来解决此问题（现在它为 3，这就是为什么杀死实例只会导致 Auto Scaling 再增加两个）。

为此，您需要下载 Auto Scaling CLI (http://aws.amazon.com/developertools/2535)（或者直接 PM 我，我可以为您完成）并使用 API 调用来设置所需的容量.

希望这个答案对你有帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:47:13.443

这实际上应该自动发生。在我看来，您在 Auto Scaling 组上创建了一项策略来扩展您的实例，而没有创建一个缩减的策略。如果您不想在`as-update-auto-scaling-group`每次集群向上和向下扩展时都运行该命令。

```
as-put-scaling-policy MyScaleUpPolicy --auto-scaling-group MyAutoScalingGroupName--adjustment=2 --type ChangeInCapacity --cooldown 600
as-put-scaling-policy MyScaleDownPolicy --auto-scaling-group MyAutoScalingGroupName--adjustment=-2 --type ChangeInCapacity --cooldown 600 
```

这些命令中的每一个都将返回一个 ARN 资源名称。然后，您可以创建一个将执行纵向扩展和缩减策略的云监视指标。让我们在下面的两个命令中将它们称为“ARN:MyScaleUpPolicy”和“ARN:MyScaleDownPolicy”，只需将该文本替换为从`as-put-scaling-policy`命令返回的值。

```
mon-put-metric-alarm MyHighCPUAlarm --comparison-operator GreaterThanThreshold --evaluation-periods 2 --metric-name CPUUtilization --namespace "AWS/EC2" --period 120 --statistic Average --threshold 50 --alarm-actions ARN:MyScaleUpPolicy --dimensions 'AutoScalingGroupName=MyAutoScalingGroupName'
mon-put-metric-alarm MyLowCPUAlarm --comparison-operator LessThanThreshold --evaluation-periods 2 --metric-name CPUUtilization --namespace "AWS/EC2" --period 120 --statistic Average --threshold 20 --alarm-actions ARN:MyScaleDownPolicy --dimensions 'AutoScalingGroupName=MyAutoScalingGroupName' 
```

# fortran90 - 发生某些情况时如何通过消息中断程序

> ID：11650891
> 
> 赞同：2
> 
> 时间：2012-07-25T13:31:17.240
> 
> 标签：fortran90

当我的 f90 程序的一个子程序中出现某些情况时，我试图找到一种方法来设置中断顺序。是否有可能从中得到任何想法？代码方案如下所示：

```
 /
    modules
    PROGRAM
    allocate variables
    CALL subroutines for initializing variables
    ...
    do 1,max iterations
    CALL subroutine1
    CALL subroutine2
    CALL subroutine3 !--> here I have the condition
    ...
    ...
    end do

    END PROGRAM

    Subroutine subroutine3 
    ...
    if (condition = true) then ! what I want to do here is to break the program printing a message saying that it is stopped because condition is true)

    end if
    end subroutine 3

    / 
```

我会很感激你的帮助，

我对 fortran 很陌生，而且我是这个论坛的新手！

先感谢您，

阿尔伯特 P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:32:59.400

```
if (condition) stop 
```

将立即停止您的程序。你可能更喜欢

```
if (condition) then
   write(*,*) 'A friendly message'
   stop
end if 
```

如果您的编译器与 Fortran 2008 兼容，您甚至可以编写

```
if (condition) stop 'A friendly message' 
```

但是，也许您想要做的不是停止程序而是退出子例程，在这种情况下，您将以某种可接受的方式跳到子例程的末尾。

请注意，`condition=true`将条件值与逻辑常量进行比较在语法上是不正确的`.true.`。这是一个赋值语句。语法上正确的比较会是`condition == .true.`，但这在语义上是有害的，简单地写作`if (condition)`表达了所做的一切`if (condition == .true.)`。缩写形式还表明您是程序员而不是脚本小子。

# php - array_unique 用于多维数组

> ID：11650892
> 
> 赞同：0
> 
> 时间：2012-07-25T13:31:19.020
> 
> 标签：php, arrays

如果是单色数组，我可以使用它`array_unique`来获取唯一条目。但是应该使用哪个函数来处理二维数组？例如：

```
Array[0][0] = '123'; Array[0][1] = 'aaa';
Array[1][0] = '124'; Array[1][1] = 'aaa';
Array[2][0] = '124'; Array[2][1] = 'aaa'; 
```

在上面的示例中，我需要根据第 0 列删除非唯一行。因此，我应该得到前两个条目，而第三个条目应该被删除。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:00:48.290

尝试这个：

```
$matrix = array(
    0 => array(0 => '123', 1 => 'aaa'),
    1 => array(0 => '124', 1 => 'aaa'),
    2 => array(0 => '124', 1 => 'aaa'),
    3 => array(0 => '124', 1 => 'aaa'),
    4 => array(0 => '114', 1 => 'aaa'),
    5 => array(0 => '124', 1 => 'aaa'),
    6 => array(0 => '124', 1 => 'aaa'),
    7 => array(0 => '124', 1 => 'aaa'),
    8 => array(0 => '124', 1 => 'aaa'),
    9 => array(0 => '124', 1 => 'baa'),
    10 => array(0 => '123', 1 => 'baa'),
    11 => array(0 => '1241', 1 => 'baa'),
);

$d = array();
foreach ($matrix AS $key => $value) {
    if (!array_search($value, $d)) {
        $d[] = $matrix[$key];
    }
}

var_dump($d); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:08:56.073

如果您的数组总是为第 1 列返回相同的值，那么当第 0 列重复时，您应该在 array_unique 上使用标志 SORT_REGULAR，如下所示：

```
$matrix = array(
    array(0 => '123', 1 => 'aaa'),
    array(0 => '124', 1 => 'aaa'),
    array(0 => '124', 1 => 'aaa'),
);

var_dump(array_unique($matrix, SORT_REGULAR)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:01:12.353

尝试这个...

```
function unique_matrix($matrix) {
    $matrixAux = $matrix;

    foreach($matrix as $key => $subMatrix) {
        unset($matrixAux[$key]);

        foreach($matrixAux as $subMatrixAux) {
            if($subMatrix === $subMatrixAux) {
            // Or this
            //if($subMatrix[0] === $subMatrixAux[0]) {
                unset($matrix[$key]);
            }
        }
    }

    return $matrix;
}

$matrix = array(
    0 => array(0 => '123', 1 => 'aaa'),
    1 => array(0 => '124', 1 => 'aaa'),
    2 => array(0 => '124', 1 => 'aaa'),
);

var_dump(unique_matrix($matrix)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-24T04:02:57.173

我有几个有效的技术要分享。（[演示](https://3v4l.org/kCHOq)）

如果您不关心结果的顺序，则此单行将保留第一个唯一行（基于列值）。

代码：

```
var_export(array_reverse(array_column(array_reverse($array), null, 0))); 
```

这会反转输入并用重复的第一列值覆盖先前找到的行——因为在同一数组级别中不允许重复键。

或者，如果您想保留行的原始顺序，这将提供相同的结果而不会反转。

代码：

```
$result = [];
foreach ($array as $row) {
    if (!isset($result[$row[0]])) {
        $result[$row[0]] = $row;
    }
}

var_export(array_values($result)); 
```

使用临时键`isset()`比`array_search()`php 搜索键比值更快更有效。

# java - 成功编译但出现 NoClassDefFound 错误

> ID：11650894
> 
> 赞同：1
> 
> 时间：2012-07-25T13:31:26.653
> 
> 标签：java, unix

我是一名制药科学专业的学生，​​我边走边学，所以如果这个问题的答案没有让我知道，我深表歉意。

我在 NetBeans 和 Eclipse 中编写了一些 java 源代码。代码在两个 IDE 中运行良好，但是当我将所有 .java 文件移动到 UNIX 环境时，我成功编译了代码，但是命令行告诉我它找不到位于同一个 jar 中的类我编译了。我收到了关于编译的警告，但我认为这不会影响代码的运行。我已经搜索和搜索，似乎无法找到答案。这是我的命令行代码（有我的程序名称等）：

```
[jknights@u2:~]$ cd chorus_jk

[jknights@u2:~/chorus_jk]$ ls
Chorus_JK.java       EntropyNormal_JK.java   Main_JK.java
colt.jar             EstimateParzen_JK.java  RA_reformatted_forCHORUS_JK.txt
Combination_JK.java  LIST_JK.java

[jknights@u2:~/chorus_jk]$ javac -cp colt.jar ./*.java -Xlint:unchecked
.
.  (I edited out the 100 warnings as they refer to unchecked items)
.

100 warnings

[jknights@u2:~/chorus_jk]$ jar cfe ChorusJK_RA.jar Main_JK ./*.class

[jknights@u2:~/chorus_jk]$ java -jar ChorusJK_RA.jar
89
317504
Exception in thread "main" java.lang.NoClassDefFoundError: cern/colt/matrix/DoubleMatrix2D
    at Chorus_JK.init(Chorus_JK.java:24)
    at Main_JK.main(Main_JK.java:23)
Caused by: java.lang.ClassNotFoundException: cern.colt.matrix.DoubleMatrix2D
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 2 more 
```

“89”和“317504”是读入文件的摘要输出，因此编译成功；但是，当程序进入计算部分时，它给了我线程“main”中的异常 java.lang.NoClassDefFoundError: cern/colt/matrix/DoubleMatrix2D 错误。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:37:34.880

您需要在运行应用程序时将 colt.jar 添加到类路径，因为 DoubleMatrix2D 可能在该 jar 中。尝试

```
 java -cp colt.jar -jar ChorusJK_RA.jar 
```

它在 IDE 中工作，因为它们默认将 jar 添加到类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:37:43.117

colt.jar 包中有“cern.colt.matrix.DoubleMatrix2D”类吗？也许您也应该将其添加到第二次调用的类路径中：

```
java -cp colt.jar -jar ChorusJK_RA.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:14:42.340

从命令行运行代码的困难证明了 IDE 的价值。如果我正确理解了您的工作流程，您在一台带有 IDE 的机器上开发了代码，那么您必须在没有 GUI 环境的另一台计算机上运行它，所以您只能使用命令行。这是相当普遍的，尤其是对于 Web 应用程序开发。

Netbeans 创建一个 dist 文件夹（分发），您可以配置您的项目以将您的库复制到 lib 文件夹（我认为这是默认行为）。jar 文件中包含的清单文件应包含如下行： Class-Path: lib/colt.jar

您可以使用 zip 工具或在 IDE 中检查 jar 文件的内容。在文件视图的 netbeans 中，您可以展开 dist 文件夹，然后展开 jar 以检查其内容。

在将您的代码从图形环境移动到命令行之前，请尝试在没有 IDE 的情况下运行您的程序。您应该能够双击 /dist 文件夹中的 jar 文件，它应该会运行。如果是这样，那么您应该能够将整个 /dist 文件夹移动到具有不同操作系统的不同计算机上，并且它应该仍然可以运行，而无需将 -cp colt.jar 添加到您的命令行参数中。

**您不需要重新编译代码**以使其在不同的操作系统上运行。只需移动 /dist 文件夹，您就应该体验“一次编写，随处运行”的乐趣。

# c# - C# Web 浏览器，单击并突出显示 Frame/iFrame 元素

> ID：11650895
> 
> 赞同：0
> 
> 时间：2012-07-25T13:31:27.073
> 
> 标签：c#, web-scraping

我正在寻找一个浏览器控件，用户可以在其中预览网页中的框架/iframe，然后突出显示其中的元素，一旦突出显示，我就可以获得所选元素的 div 或 id。

有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:42:40.297

我得到了答案……！尝试此代码以获取驻留在网页中的 iframe 和框架，并为其添加文档处理程序。它很简单，我们需要为每个框架/iframe 添加文档处理程序。

```
 private void webBrowser1_DocumentCompleted_1(object sender, WebBrowserDocumentCompletedEventArgs e)
    {

        if (this.webBrowser1.ReadyState != WebBrowserReadyState.Complete)

            return;
        else
        {

            HtmlDocument _document = webBrowser1.Document;
            _document.MouseOver += new HtmlElementEventHandler(document_MouseOver);
            _document.MouseLeave += new HtmlElementEventHandler(document_MouseLeave);
            mshtml.HTMLDocumentEvents2_Event iEvent;
            IHTMLDocument2 currentDoc = (IHTMLDocument2)webBrowser1.Document.DomDocument;
            iEvent = (mshtml.HTMLDocumentEvents2_Event)currentDoc;
            iEvent.onclick += new mshtml.HTMLDocumentEvents2_onclickEventHandler(clickDocumentHandler);

            if (currentDoc.frames.length > 0)
            {
                FramesCollection FrameList = currentDoc.frames;

                for (int i = 0; i < FrameList.length; i++)
                {
                    object id = (object)i;

                    IHTMLWindow2 frameWindow = (IHTMLWindow2)FrameList.item(ref id);
                    IHTMLDocument2 frameDocument = (IHTMLDocument2)frameWindow.document;
                    iEvent = (mshtml.HTMLDocumentEvents2_Event)frameDocument;
                    iEvent.onclick += new mshtml.HTMLDocumentEvents2_onclickEventHandler(clickDocumentHandler);

                }

            }

        }
    }

    private bool clickDocumentHandler(IHTMLEventObj pEvtObj)
    {
        IHTMLElement element = (mshtml.IHTMLElement)pEvtObj.srcElement;
        label2.Text = element.id;
        pEvtObj.cancelBubble = true;
        pEvtObj.returnValue = false; 
        return false;
    }

    private bool clickElementHandler(IHTMLEventObj pEvtObj)
    {
        IHTMLElement element = (mshtml.IHTMLElement)pEvtObj.srcElement;
        label1.Text = element.id;
        pEvtObj.cancelBubble = true;
        pEvtObj.returnValue = false;
        return false;
    }

    private void document_MouseOver(object sender, HtmlElementEventArgs e)
    {
        HtmlElement element = e.FromElement;
        mshtml.HTMLElementEvents2_Event iEvent;
        iEvent = element.DomElement as mshtml.HTMLElementEvents2_Event;
        if (iEvent == null)
            return;
        iEvent.onclick += new mshtml.HTMLElementEvents2_onclickEventHandler(clickElementHandler);
    }

    private void document_MouseLeave(object sender, HtmlElementEventArgs e)
    {
        HtmlElement element = e.FromElement;
        mshtml.HTMLElementEvents2_Event iEvent;
        iEvent = element.DomElement as mshtml.HTMLElementEvents2_Event;
        if (iEvent == null)
            return;
        iEvent.onclick -= new mshtml.HTMLElementEvents2_onclickEventHandler(clickElementHandler);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:37:03.773

**为了摆脱跨框架问题，我们必须在将事件处理程序附加到框架文档时更改一行代码。**

```
 IHTMLDocument2 frameDocument = (IHTMLDocument2) CrossFrame.GetDocumentFromWindow  (frameWindow); 
```

**包括 Interop.SHDocVw.dll 并添加以下类：**

```
 public class CrossFrame
 {
    // Returns null in case of failure.
    public static IHTMLDocument2 GetDocumentFromWindow(IHTMLWindow2 htmlWindow)
    {
        if (htmlWindow == null)
        {
            return null;
        }

        // First try the usual way to get the document.
        try
        {
            IHTMLDocument2 doc = htmlWindow.document;
            return doc;
        }
        catch (COMException comEx)
        {
            // I think COMException won't be ever fired but just to be sure ...
            if (comEx.ErrorCode != E_ACCESSDENIED)
            {
                return null;
            }
        }
        catch (System.UnauthorizedAccessException)
        {
        }
        catch
        {
            // Any other error.
            return null;
        }

        // At this point the error was E_ACCESSDENIED because the frame contains a document from another domain.
        // IE tries to prevent a cross frame scripting security issue.
        try
        {
            // Convert IHTMLWindow2 to IWebBrowser2 using IServiceProvider.
            IServiceProvider sp = (IServiceProvider)htmlWindow;

            // Use IServiceProvider.QueryService to get IWebBrowser2 object.
            Object brws = null;
            sp.QueryService(ref IID_IWebBrowserApp, ref IID_IWebBrowser2, out brws);

            // Get the document from IWebBrowser2.
            SHDocVw.IWebBrowser2 browser = (SHDocVw.IWebBrowser2)(brws);

            return (IHTMLDocument2)browser.Document;
        }
        catch
        {
        }

        return null;
    }

    private const int E_ACCESSDENIED = unchecked((int)0x80070005L);
    private static Guid IID_IWebBrowserApp = new Guid("0002DF05-0000-0000-C000-000000000046");
    private static Guid IID_IWebBrowser2 = new Guid("D30C1661-CDAF-11D0-8A3E-00C04FC9E26E");
}

// This is the COM IServiceProvider interface, not System.IServiceProvider .Net interface!
[ComImport(), ComVisible(true), Guid("6D5140C1-7436-11CE-8034-00AA006009FA"),
InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
public interface IServiceProvider
{
    [return: MarshalAs(UnmanagedType.I4)]
    [PreserveSig]
    int QueryService(ref Guid guidService, ref Guid riid, [MarshalAs(UnmanagedType.Interface)] out object ppvObject);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T11:24:24.967

我有另一种方法...

```
 using System.Runtime.InteropServices; 
```

**声明一个代表**

```
 public delegate void DOMEvent(IHTMLEventObj e);

  private void webBrowser1_DocumentCompleted_1(object sender, WebBrowserDocumentCompletedEventArgs e)
    {

        if (this.webBrowser1.ReadyState != WebBrowserReadyState.Complete)

            return;
        else
        {

            HTMLDocument htmlDoc = (HTMLDocument)this.webBrowser1.Document.DomDocument;
            DispHTMLDocument doc = (DispHTMLDocument)htmlDoc;

            DOMEventHandler onmousedownhandler = new DOMEventHandler(doc);
            onmousedownhandler.Handler += new DOMEvent(Mouse_Down);
            doc.onmousedown = onmousedownhandler;

            if (htmlDoc.frames.length > 0)
            {
                FramesCollection FrameList = htmlDoc.frames;

                for (int i = 0; i < FrameList.length; i++)
                {
                    object id = (object)i;

                    IHTMLWindow2 frameWindow = (IHTMLWindow2)FrameList.item(ref id);
                    HTMLDocument frameDoc = (HTMLDocument)frameWindow.document;
                    DispHTMLDocument frameDispDoc = (DispHTMLDocument)frameDoc;
                    DOMEventHandler onmousedownhand = new DOMEventHandler(frameDispDoc);
                    onmousedownhand.Handler += new DOMEvent(Mouse_Down);
                    frameDispDoc.onmousedown = onmousedownhand;

                }
            }

        }
    }

        public class DOMEventHandler
        {
        public DOMEvent Handler;
        DispHTMLDocument Document;
        public DOMEventHandler(DispHTMLDocument doc)
        {

            this.Document = doc;

        }
        [DispId(0)]

        public void Call()
        {
            Handler(Document.parentWindow.@event);
        }
    }

       public void Mouse_Down(IHTMLEventObj e)
        {
        IHTMLElement element = (mshtml.IHTMLElement)e.srcElement;
        label1.Text = element.id;

         } 
```

# c# - 将数据从 XML 文档解析到数据库

> ID：11650896
> 
> 赞同：0
> 
> 时间：2012-07-25T13:31:35.373
> 
> 标签：c#, asp.net, sql, xml, parsing

我目前在标准 Web 服务中有这种方法：

```
[WebMethod]
        public void addGame(int GamePlayID, int @ParticipantID, int @GameVersionID, string Start, string End,string success)
        {
            SqlConnection oConn = new SqlConnection();
            oConn.ConnectionString = @"Data Source=SNICKERS\SQLEXPRESS;Initial Catalog=VerveDatabase;Integrated Security=True";
            oConn.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = oConn;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "addGamePlay";
            cmd.Parameters.Add(new SqlParameter("@GamePlayID", SqlDbType.Int));
            cmd.Parameters["@GamePlayID"].Value = GamePlayID;
            cmd.Parameters.Add(new SqlParameter("@ParticipantID", SqlDbType.Int));
            cmd.Parameters["@ParticipantID"].Value = @ParticipantID;
            cmd.Parameters.Add(new SqlParameter("@GameVersionID", SqlDbType.Int));
            cmd.Parameters["@GameVersionID"].Value = @GameVersionID;
            cmd.Parameters.Add(new SqlParameter("@Start", SqlDbType.Time));
            cmd.Parameters["@Start"].Value = Start;
            cmd.Parameters.Add(new SqlParameter("@End", SqlDbType.Time));
            cmd.Parameters["@End"].Value = End;
            cmd.Parameters.Add(new SqlParameter("@success", SqlDbType.VarChar, 10));
            cmd.Parameters["@success"].Value = success;
            cmd.ExecuteNonQuery();
        } 
```

这允许我将值传递给手动输入的数据库。但是我希望能够从 XML 文档加载数据。如何从此 XML 文档中获取数据以填充此方法中的变量。这是 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<anyType xmlns="http://tempuri.org/" xmlns:d1p1="http://www.w3.org/2001/XMLSchema-instance" d1p1:type="q1:string" xmlns:q1="http://www.w3.org/2001/XMLSchema">
<NewDataSet>
<Game> 
<GamePlayID>1</GamePlayID>
            <ParticipantID>1</ParticipantID> 
<GameVersionID>1</GameVersionID> 
<Start-Time>PT0S</Start-Time> 
<End-Time>PT5H</End-Time> 
<Success>true </Success> 
</Game>
</NewDataSet>
</anyType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:37:27.507

您是否考虑过创建一个具有一个 XML 类型参数并发送整个参数的存储过程`<NewDataSet>`？您可以使用 XQuery 直接从 XML 类型插入到您的表中，类似于`INSERT`我的应用程序之一：

```
INSERT INTO CategoryItems (CategoryID, ItemID, SortOrderID) 
    SELECT @ID, 
        ParamValues.Item.value('./ID[1]', 'int'), 
        ParamValues.Item.value('./SortID[1]', 'int')
    FROM @Items.nodes('/Items/Item') AS ParamValues(Item) 
```

（`@Items`属于 XML 类型）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:03:31.123

我不太明白为什么我被否决了，因为这是一个真正的问题，但我想我会概述我如何设法克服这个问题。由于我的特定 XML 文档只包含一个节点，我使用 xmlDocument 上的“selectSingleNode”函数来选择我想要的数据并将它们分配给准备好通过 SQL proc 插入到我的数据库中的变量。

```
[WebMethod]
        public void addGame()
        {
            XmlDocument xd = new XmlDocument();
            xd.Load(@"C:\Users\bradleya\Documents\Visual Studio 2010\Projects\Web Services\Web Services\addGame.xml");
            XmlNode documentNode = xd.SelectSingleNode("/NewDataSet/Game");

            int GamePlayID = Convert.ToInt32(documentNode.SelectSingleNode("GamePlayID").InnerText);
            int ParticipantID = Convert.ToInt32(documentNode.SelectSingleNode("ParticipantID").InnerText);
            int GameVersionID = Convert.ToInt32(documentNode.SelectSingleNode("ParticipantID").InnerText);
            string Start = Convert.ToString(documentNode.SelectSingleNode("Start-Time").InnerText);
            string End = Convert.ToString(documentNode.SelectSingleNode("End-Time").InnerText);
            string success = Convert.ToString(documentNode.SelectSingleNode("Success").InnerText);

            SqlConnection oConn = new SqlConnection();
            oConn.ConnectionString = @"Data Source=SNICKERS\SQLEXPRESS;Initial Catalog=VerveDatabase;Integrated Security=True";
            oConn.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = oConn;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "addGamePlay";
            cmd.Parameters.Add(new SqlParameter("@GamePlayID", SqlDbType.Int));
            cmd.Parameters["@GamePlayID"].Value = GamePlayID;
            cmd.Parameters.Add(new SqlParameter("@ParticipantID", SqlDbType.Int));
            cmd.Parameters["@ParticipantID"].Value = @ParticipantID;
            cmd.Parameters.Add(new SqlParameter("@GameVersionID", SqlDbType.Int));
            cmd.Parameters["@GameVersionID"].Value = @GameVersionID;
            cmd.Parameters.Add(new SqlParameter("@Start", SqlDbType.Time));
            cmd.Parameters["@Start"].Value = Start;
            cmd.Parameters.Add(new SqlParameter("@End", SqlDbType.Time));
            cmd.Parameters["@End"].Value = End;
            cmd.Parameters.Add(new SqlParameter("@success", SqlDbType.VarChar, 10));
            cmd.Parameters["@success"].Value = success;
            cmd.ExecuteNonQuery();
        } 
```

# android - 触摸时设置元素的背景颜色 - android

> ID：11650897
> 
> 赞同：0
> 
> 时间：2012-07-25T13:31:42.600
> 
> 标签：android

在我`CustomAdapter`的列表中，当用户按下其中一行时，我想更改列表中一行的背景颜色。

我有一个静态类，其中包含列表每一行中的对象：

```
static class ViewHolder {
    ImageView image;
    TextView text;   
} 
```

持有人包含我列表中的元素：

```
 holder = new ViewHolder();
 holder.image = (ImageView) convertView.findViewById(R.id.imageView1); 
 holder.text = (TextView) convertView.findViewById(R.id.textView1); 
 convertView.setTag(holder);

 holder.image.setImageResource(items.get(position).getImage());
 holder.text.setText(items.get(position).getTextToView()); 
```

对此 convertView 我添加了`setOnTouchListener`这种方式：

```
 convertView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            switch(event.getAction()) {

            case MotionEvent.ACTION_DOWN:

                //Toast.makeText(c, "DOWN", Toast.LENGTH_SHORT).show();
                break;
            case MotionEvent.ACTION_UP:
                //Toast.makeText(c, "UP", Toast.LENGTH_SHORT).show();
                break;
            }

            return false;
        }

    }); 
```

我试过这个：

```
 convertView.setBackgroundColor(Color.RED); 
```

但是我的编译器抱怨说`convertView`应该是`final`并且会干扰其他一些代码。

`Toast`当用户在我的列表中按下一行时，这非常适合引发 a 。但是我怎样才能改变被按下的行的背景颜色呢？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:44:17.017

尝试将“final”修饰符设置为指向 convertView 的对象。

```
final View view = convertView;

holder = new ViewHolder();
holder.image = (ImageView) view.findViewById(R.id.imageView1); 
holder.text = (TextView) view.findViewById(R.id.textView1); 
view.setTag(holder);

holder.image.setImageResource(items.get(position).getImage());
holder.text.setText(items.get(position).getTextToView());    

// And the listener
view.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        switch(event.getAction()) {

        case MotionEvent.ACTION_DOWN:
            view.setBackgroundColor(Color.RED); 
            //Toast.makeText(c, "DOWN", Toast.LENGTH_SHORT).show();
            break;
        case MotionEvent.ACTION_UP:
            //Toast.makeText(c, "UP", Toast.LENGTH_SHORT).show();
            break;
        }

        return false;
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:45:33.383

您的问题的简单解决方案 - 使用临时最终变量。

出现问题是因为在某些情况下（可能不在您的）convertView 引用可以在侦听器范围之外更改。

更多类似 Android 的解决方案 - 如果可能，使用状态可绘制对象 - [http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:52:15.440

你为什么不使用

```
 yourList.setOnItemClickListener(new OnItemClickListener(){

     public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

       ....
       view.setBackgroundColor(....);
       ....

     }
 }); 
```

# sdl - 在程序中使用按钮时哪种方法更好？

> ID：11650900
> 
> 赞同：1
> 
> 时间：2012-07-25T13:31:56.107
> 
> 标签：sdl

# **任务：**

在程序中制作按钮以响应鼠标事件（运动，按下，释放）

### ***方法[1]：***

Button 类有一个处理事件的方法。因此，它检查事件是按下、释放还是运动并调用正确的方法，然后我为每个创建的按钮获取每个句柄，并在程序运行时循环它。

### ***方法[2]：***

我已经有一个处理所有鼠标输入的鼠标类。所以第二种方法适用于鼠标运动。我的意思是我不会一直循环处理程序，但是当检测到鼠标运动时，我会检查该运动是否在按钮上（此检查将在处理鼠标输入的 Mouse 类中执行）。如果它在按钮上，则执行对应于事件类型的按钮方法。

所以我想知道哪种方法会更好？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:00:31.060

按钮可能不完全绑定到您的鼠标输入，但也可以由您的键盘输入触发（例如）。

即使这个程序没有使用键盘输入按钮，你的下一个程序也可能是这种情况。如果您选择**方法 [1]**，您将能够在各种情况下重用您的代码。

最重要的是，使用**方法 [2]** ，您的鼠标代码将充满可能污染它的按钮内容。

这就是为什么我建议您采用该**方法 [1]**

# netbeans - 为 Zend Framework2 设置 NetBeans

> ID：11650901
> 
> 赞同：1
> 
> 时间：2012-07-25T13:31:56.700
> 
> 标签：netbeans, zend-framework2

我一直在尝试寻找如何为 Zend Framework 2 设置我的 NetBeans。我找到了 Zend Framework 以前版本的大量材料，即 Zend Framework 1 ......但不是 Zend Framework 2。如果有人有如果可以共享，解决方案会很棒。

PS 没有 zf.bat 文件，这通常是教程所说的在 netbeans 中包含 zf.bat 的路径。

任何帮助，将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:51:25.690

在 Zend 框架到达某种候选版本或某个最终版本之前，我不希望有一个 zf.bat 文件。

应用程序的结构已经由 github 上的 Skeleton Application 建立，但我不希望在最终版本之前有一个 zf 文件。

zf 将建立一个标准的项目结构。虽然骨架应用程序存在，但这种结构还不是 100%。

老实说，如果我们开始使用 Composer 或 Git 作为将骨架从互联网上拉下来的一种方式，我不会感到惊讶，但我怀疑这会发生。

无论如何，zf 文件一开始很有用，但后来变得更加麻烦。一旦您了解了结构的方式，它就很有用但不会太多。此外，Zend 必须对其进行重新设计以适应整个模块的想法。

但是，如果您只想要一些 IDE 代码完整的帮助，您真正需要做的就是将 Zend 库添加到您的项目路径中，并让 Netbeans 帮助您。

# ruby-on-rails - 将助手和实用程序从一个应用程序转移到另一个应用程序

> ID：11650902
> 
> 赞同：0
> 
> 时间：2012-07-25T13:31:56.937
> 
> 标签：ruby-on-rails

最近我一直在 Rails 世界中徘徊（非常享受）。

我已经完成了我在 Rails 中的第一个项目，并且我创建了一堆助手来处理日期、菜单等。

我的问题是，将这些助手（和其他一些文件）从一个项目转移到另一个项目的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:35:03.680

您应该创建一个 gem。例如从[这里开始。](http://docs.rubygems.org/read/chapter/1/)

# c - 循环体中声明的变量是否在迭代期间保留？

> ID：11650905
> 
> 赞同：2
> 
> 时间：2012-07-25T13:32:04.243
> 
> 标签：c, loops, scope, variable-declaration

考虑 C 中的一个循环，它在循环体中声明了一个字符数组。在每次迭代中，数组的一个字符都会被修改，直到到达末尾。最后，打印变量。描述将扩展到下一个代码：

```
#include <stdio.h>

int main(void) {
    int i = 0;
    for (;;) {/* same as: while(1) { */
        char x[5];
        x[i] = '0' + i;
        if (++i == 4) {
            x[i] = '\0'; /* terminate string with null byte */
            printf("%s\n", x);
            break;
        }
    }
    return 0; 
```

许多人可能期望`0123`作为输出。`-O1`但是由于某种原因，GCC 4.7 在启用优化（和更高版本）的情况下不会这样做。而是将随机数据放在字符数组的第一个字节中，变为：

```
| 0  |  1  |  2  |  3  |  4   |
|     RANDOM     | '3' | '\0' | 
```

我认为从语言的角度来看这是合乎逻辑的行为：块终止后自动变量消失了，因此应该预料到上述“随机”行为。

正确的行为应该是什么？**我知道将声明移到`x`循环之外“修复”它，但这并没有说明这个片段的行为**。现实世界的问题是[Netfilter 中的一个错误](http://bugzilla.netfilter.org/show_bug.cgi?id=774)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:35:14.747

由于数组是在循环体的范围内声明的，因此您可以将其视为在每次循环迭代的自动存储区域中分配的新数组。该未初始化数组的内容是未定义的，除了您在当前迭代期间分配的索引处的字符，所以您看到的值是不确定的：

> **C99 标准，第 6.7.8 节**：如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的

关闭优化时，数组会落在自动存储中的同一位置，因此您的程序很幸运；但是，这绝不是保证。

将数组移到循环外，如下所示：

```
int i = 0;
char x[5];
for (;;) {
    x[i] = '0' + i;
    if (++i == 4) {
        x[i] = '\0'; /* terminate string with null byte */
        printf("%s\n", x);
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:36:01.360

这是块范围的问题。循环体是一个块，用 表示`{}`，在每次循环迭代中进入和离开。每次输入块时，您都会（从概念上）获得一个`x`具有未指定内容的新块。

由于您只设置`x[3] = '3'`并`x[4] = '\0'`在迭代中`printf`调用 where，因此只有这两个数组成员具有明确定义的内容。其余的可以包含任何内容，包括`'\0'`，因此`printf`可以输出长度最多为 2 的任何字符串，可选地后跟任何其他字符和`3`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:35:00.933

这将按预期输出（随机字符数组），因为自动变量在声明它的范围终止后被清理。要修复，请移出循环`x`范围。`for`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T13:58:02.247

每次迭代都会为数组分配内存，并且只有在最后一次迭代中获得的值。

# sql - 找不到光标时退出问题

> ID：11650909
> 
> 赞同：1
> 
> 时间：2012-07-25T13:32:08.003
> 
> 标签：sql, oracle, plsql, oracle10g

嗨，伙计们，我有一个 pl/sql 语句，它应该通过游标从一个表中获取数据到另一个表，但是有些字段是空的，我想这就是它退出该行的原因

```
exit when cursor%not found; 
```

我用谷歌搜索了一下，我看到了在 fetch 语句之后使用该行的建议，但是当你有两个游标但在 Mycase 我有一个游标时似乎就是这种情况。请有人帮我调整这个查询

```
CREATE OR REPLACE procedure TBAADM.MIGR_EIT
AS
CURSOR cur_eit  IS SELECT entity_id, nrml_accrued_amount_cr,nrml_accrued_amount_dr,   nrml_booked_amount_cr, nrml_booked_amount_dr, nrml_interest_amount_cr,
nrml_interest_amount_dr,
next_int_run_date_cr ,next_int_run_date_dr ,interest_calc_upto_date_cr,   interest_calc_upto_date_dr,xfer_min_bal
,xfer_min_bal_date, booked_upto_date_cr,booked_upto_date_dr FROM TBAADM.eit_temp  ;
tempeit1  TBAADM.EIT%ROWTYPE;
number_of_rows_updated number;
BEGIN
number_of_rows_updated:=0;

update tbaadm.eit_temp set entity_id=(select gam.acid from tbaadm.gam where gam.foracid=eit_temp.act_num);

OPEN cur_eit;

LOOP
FETCH cur_eit INTO  tempeit1.entity_id,tempeit1.nrml_accrued_amount_cr,tempeit1.nrml_accrued_amount_dr,tempeit1    .nrml_booked_amount_cr,tempeit1.nrml_booked_amount_dr,
tempeit1.nrml_interest_amount_cr, tempeit1.nrml_interest_amount_dr,
tempeit1.next_int_run_date_cr ,tempeit1.next_int_run_date_dr  ,tempeit1.interest_calc_upto_date_cr,  tempeit1.interest_calc_upto_date_dr,tempeit1.xfer_min_bal
,tempeit1.xfer_min_bal_date, tempeit1.booked_upto_date_cr,tempeit1.booked_upto_date_dr;
exit when cur_eit%notfound; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:11:44.017

自 Oracle 8 以来，不再需要显式游标（恕我直言）。我将重写您的代码以在 a 中使用隐式游标`FOR ... LOOP`：

```
CREATE OR REPLACE PROCEDURE tbaadm.migr_eit
AS
  number_of_rows_updated   NUMBER;
BEGIN
  number_of_rows_updated := 0;

  UPDATE tbaadm.eit_temp
     SET entity_id =
           (SELECT gam.acid
              FROM tbaadm.gam
             WHERE gam.foracid = eit_temp.act_num);

  FOR tempeit1 IN (SELECT entity_id
                         ,nrml_accrued_amount_cr
                         ,nrml_accrued_amount_dr
                         ,nrml_booked_amount_cr
                         ,nrml_booked_amount_dr
                         ,nrml_interest_amount_cr
                         ,nrml_interest_amount_dr
                         ,next_int_run_date_cr
                         ,next_int_run_date_dr
                         ,interest_calc_upto_date_cr
                         ,interest_calc_upto_date_dr
                         ,xfer_min_bal
                         ,xfer_min_bal_date
                         ,booked_upto_date_cr
                         ,booked_upto_date_dr
                     FROM tbaadm.eit_temp)
  LOOP
    /* do what ever you need to do with 
      tempeit1.entity_id,tempeit1.nrml_accrued_amount_cr,tempeit1.nrml_accrued_amount_dr,tempeit1    .nrml_booked_amount_cr,tempeit1.nrml_booked_amount_dr,
      tempeit1.nrml_interest_amount_cr, tempeit1.nrml_interest_amount_dr,
      tempeit1.next_int_run_date_cr ,tempeit1.next_int_run_date_dr  ,tempeit1.interest_calc_upto_date_cr,  tempeit1.interest_calc_upto_date_dr,tempeit1.xfer_min_bal
      ,tempeit1.xfer_min_bal_date, tempeit1.booked_upto_date_cr,tempeit1.booked_upto_date_dr;
    */
    NULL; -- do something useful
  END LOOP; 
```

# java - Spring Web Flow ...如何仅在一次转换时停止表单验证

> ID：11650919
> 
> 赞同：0
> 
> 时间：2012-07-25T13:32:32.287
> 
> 标签：java, spring, spring-mvc, spring-webflow

Spring Web Flow ...如何仅在一次转换时停止表单验证。

如何仅在一次转换上停止表单验证。使用以下代码，我打开了表单验证，一切正常，但是如果用户单击“取消”，我不想运行表单验证。反正围绕这个？

```
<view-state id="helloworld" view="input.jsp" model="customer" popup="true">
<transition on="submit" to="preview" />
<transition on="cancel" to="thanks"/>
</view-state> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T13:36:44.737

转换有能力定义你是否想要绑定和验证，只需将它们设置为 false。

```
<view-state id="helloworld" view="input.jsp" model="customer" popup="true">
<transition on="submit" to="preview" />
<transition on="cancel" to="thanks" validate="false" bind="false"/>
</view-state> 
```

# extjs - EXTJS 网格数据问题

> ID：11650923
> 
> 赞同：0
> 
> 时间：2012-07-25T13:32:39.120
> 
> 标签：extjs, grid

我对 Extjs 网格组件有疑问。如果您查看随附的屏幕截图，您将看到两行正确的 JSON 数据。

但是，正如您在附加的屏幕截图中看到的那样，ExtJS 网格组件仅显示一行，这是一个奇怪的问题。我尝试了一切都没有成功:(

![](../Images/2ae7bfd0f03445c3e8e90a10ffa0ee1a.png)

这是 ExtJS 代码：

**客户部分的数据存储：**

```
 var customersStore = new Ext.data.JsonStore({
    root: 'customers',
    baseParams: { action: 'customers'},
    proxy: new Ext.data.HttpProxy({
        url: '../invoice/grid-master-details.php',
        method: 'POST'
    }),
    fields: ['MetroNo', 'SpecVatNo', 'HomeStoreNo', 'CustShortName', 'StoreName', 'months',
    { name: 'invtotal', type: 'float' },
    { name: 'invcount', type: 'int' }],
    idProperty: 'MetroNo'
}); 
```

**网格初始化参数：**

```
 Ext.onReady(function() {
    Ext.state.Manager.setProvider(new Ext.state.CookieProvider());

    function change(val) {
        if (val > 0) {
            return '<span style="color:green;">' + val + '</span>';
        } else if (val < 0) {
            return '<span style="color:red;">' + val + '</span>';
        }
        return val;
    }

    var customersGrid = new Ext.grid.GridPanel({
        title: 'Customer Informations',
        plugins: new Ext.ux.GridTotals(),
        renderTo: 'customers-div',
        store: customersStore,
        sm: new Ext.grid.RowSelectionModel({ singleSelect: true }),
        columns: [
            { id: 'vat-no',
                header: "Tax Number",
                width: 50,
                dataIndex: 'SpecVatNo',
                sortable: false,
                hidden: true

            },
            { id: 'store-name',
                header: 'Store Name',
                width: 70,
                dataIndex: 'StoreName',
                sortable: true
            },
            { id: 'cust-name',
                header: 'Customer Title',
                width: 130,
                dataIndex: 'CustShortName',
                sortable: true,
                totalsText: 'TOTAL'
            },
            { id: 'invoice-count',
                header: "Invoice Address",
                width: 40,
                dataIndex: 'invcount',
                align: 'right',
                sortable: false,
                summaryType: 'sum'
            },
            { id: 'invoice-total',
                header: "Invoice Total",
                width: 60,
                dataIndex: 'invtotal',
                align: 'right',
                sortable: false,
                renderer: Ext.util.Format.CurrencyFactory(true, 2, ",", ".", "TL", true),
                summaryType : 'sum',
                roundToPlaces: 3
            },
            {
                id: 'selected-date',
                header: "Period",
                width: 20,
                dataIndex: 'months',
                sortable: false,
                hidden: true
            }               
        ],
        autoExpandColumn: 'cust-name',
        width: 700,
        height: 240,
        loadMask: {msg:'Loading customer infos ...'},
        stripeRows: true,
        columnLines:true,
        stateful: true,
        stateId: 'customerGrid',
        viewConfig: {
            forceFit: true
        },
        tbar: new Ext.Toolbar({
            items: [{   xtype: 'tbtext', text: 'Period' }, 
                    {   xtype: 'tbspacer', width: 10},
                    {   xtype: 'combo',
                            store: datesStore,
                            id: 'monthid',
                            displayField: 'months',
                            valueField: 'dateid',
                            editable: false,
                            mode: 'remote',
                            forceSelection: true,
                            triggerAction: 'all',
                            emptyText: 'Select Period...',
                            selectOnFocus: true
                    }, 
                    {   xtype: 'tbspacer', width: 15},
                    {   xtype: 'tbseparator'},
                    {   xtype: 'tbspacer', width: 10},
                    {   xtype: 'tbtext', text: 'Tax Number'},
                    {   xtype: 'tbspacer', width: 10},
                    {   xtype: 'textfield', id: 'vatnoid'},
                    {   xtype: 'tbspacer', width: 10},
                    {   xtype: 'button', 
                            text: ' Show ', 
                            iconCls: 'quicksearch',
                            handler: function() {
                                var mid = Ext.getCmp('monthid').getValue();
                                var vid = Ext.getCmp('vatnoid').getValue();
                                customersStore.load({
                                    params: {'months': mid, 'vatno': vid}
                                });
                            }
                    }
                    ]
        })
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:50:41.830

`idProperty`on 基础`Model`类指定为，对于`MetroNo`JSON 响应中返回的每条记录，它不是唯一的。

更改`idProperty`为每条记录唯一的字段。

# jquery - Android 2 上的 Knockout.js

> ID：11650938
> 
> 赞同：0
> 
> 时间：2012-07-25T13:33:18.843
> 
> 标签：jquery, jquery-mobile, knockout.js

我正在使用 knockout.js 显示列表值，当我不使用输入元素时它很好，但是当我在“foreach”中使用输入元素时，它呈现错误（它不显示列表并显示损坏的 HTML 元素）安卓 2。

我在结束正文标记之前的脚本中初始化视图模型：

```
$(".pageId").bind('pageinit', function(){
ko.applyBindings(new MyViewModel());
}); 
```

我也在使用 jQuery Mobile，所以我尝试了

```
$(".pageId").bind('pageshow',function(){ 

$("input").checkboxradio();

}); 
```

但我也没有在 Android 2 上工作。

有没有办法在 Android 2 上使用 knockout.js 使复选框/单选按钮/dropdows 正确呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:24:14.390

这就是我如何让它工作的方法。您必须使用 KO 的 afterRender 属性来渲染 jQuery Mobile 元素。例如：

```
<script type="text/javascript">
    function jQueryify(elements, dataObj)
    {
        $.each(elements, function(key, obj)
        {
            if($(this).is('input[type="radio"]'))
                $(obj).checkboxradio();
            else if($(this).is('select'))
                $(obj).selectmenu();
        });
    }
</script> 
```

然后在标记中

```
<div data-bind="foreach: {data: collection, afterRender: jQueryify}>
    <!-- Your template goes here -->
</div> 
```

我确信有更好的方法可以做到这一点，但我就是这样做的。我知道您也可以使用 jQuery Mobile 公开的“创建”事件，但我还没有研究过。

编辑：我刚刚在我正在寻找的 jQuery Mobile 网站上找到了文档：http: [//jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html)
如果您查看“增强新标记” " 部分，您将看到他们对如何呈现内容以使其看起来正确的建议。此外，绑定到 'pageinit' 事件意味着任何需要创建的东西都已经变成了 jquery 移动小部件版本。如果您想在 jquery 获取内容之前绑定到内容（从而使新内容与其余内容一起呈现），您可以绑定到常规 $(document).ready() 函数。

# php - mediawiki 如何以及何时创建和上传文件？

> ID：11650939
> 
> 赞同：1
> 
> 时间：2012-07-25T13:33:20.903
> 
> 标签：php, mediawiki, cdn, openstack-swift

我现在正忙于我的第一个 mediawiki 项目，我必须将它连接到 Swift (CDN) 服务。我已经放弃了常规的（专门用于机架空间 - 我们有自己的），并围绕我们自己的包装器构建了一个 - 到目前为止没有问题。

除了现在 mediawiki 不会自动创建缩略图。也许有些愚蠢，但我一直在绞尽脑汁，才能找到解决方案......

这是配置的一部分（我不能透露所有内容 - 机密性和所有内容：P）：

```
$wgFileBackends[] = array(
    'lockManager'    => 'nullLockManager',
    'class'          => 'SomeSwiftBackend',
    'wikiId'         => 'somewiki',
    'lockManager'    => 'nullLockManager',
    'shardViaHashLevels' => array(
        'remote-public'  => array( 'levels' => 1, 'base' => 36, 'repeat' => false ),
        'remote-thumb'   => array( 'levels' => 1, 'base' => 36, 'repeat' => false ),
        'local-thumb'    => array( 'levels' => 1, 'base' => 36, 'repeat' => false ),
        'remote-archive' => array( 'levels' => 1, 'base' => 36, 'repeat' => false ),
        'local-deleted'  => array( 'levels' => 1, 'base' => 36, 'repeat' => false ),
        'remote-deleted' => array( 'levels' => 1, 'base' => 36, 'repeat' => false ),
    ),
    'url' => 'http://url-to-swift/v1/AUTH_',
); 
```

我可能连这个权利都没有...

身份验证配置直接传递到我们的 swift 后端，所以你不会在这里找到它......

# regex - sed - 如何使用 sed 进行正则表达式组

> ID：11650940
> 
> 赞同：50
> 
> 时间：2012-07-25T13:33:22.207
> 
> 标签：regex, linux, sed

无论如何你可以使用像java regex pattern/match/group这样的sed来做正则表达式匹配组吗？

如果我有类似的字符串

```
test-artifact-201251-balbal-0.1-SNAPSHOT.jar 
```

我如何使用 sed 来获得如下结果：

```
test-artifact-0.1-SNASHOT.jar 
```

我想知道 sed 是否允许您执行 java regex 之类的操作，您可以定义如下模式：

```
([a-z]*-[a-z]*-)([0-9]*-)([a-z]*-)([.]*SNAPSHOT.jar) 
```

然后您可以将结果作为数组获取，例如：

```
test-artifact-
201251-
balbal-
0.1-SNAPSHOT.jar 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-25T13:46:09.250

您必须将括号转义为组表达式：

```
\([a-z]*-[a-z]*-\)\([0-9]*-\)\([a-z]*-\)\([.]*SNAPSHOT.jar\) 
```

并将它们与`\1`,`\2`等一起使用。

* * *

**编辑**`SNAPSHOT`：还要注意之前`[.]`不匹配。括号内`.`是文字。它应该是`[0-9.-]*`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-25T13:59:44.143

这就是Birei和Thor的意思：

```
sed -r "s/([a-z]*-[a-z]*-)([0-9]*-)([a-z]*-)(.*)/\1\n\2\n\3\n\4/" 
```

输出：

```
test-artifact-
201251-
balbal-
0.1-SNAPSHOT.jar 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-25T14:05:09.283

事实上，对于那些常规字符串，awk 可以使您免于分组。:)

您只需提供所需的零件索引号：

```
awk 'BEGIN{FS=OFS="-"}{print $1,$2,$5,$6}' 
```

输出：

```
kent$  echo "test-artifact-201251-balbal-0.1-SNAPSHOT.jar"|awk 'BEGIN{FS="-";OFS="-"}{print $1,$2,$5,$6}'
test-artifact-0.1-SNAPSHOT.jar 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-27T19:10:13.430

如果您正在寻找一种更简单的方法，我想这可能会对您有所帮助！:)

```
echo "est-artifact-201251-balbal-0.1-SNAPSHOT.jar" | cut -d- -f1,2,5,6 
```

“-”用作分隔符，并打印字段 1、2、5、6。

注意：这需要您知道该字段的确切位置。

# c# - 表明函数参数是（或不是）要修改的最佳实践

> ID：11650941
> 
> 赞同：0
> 
> 时间：2012-07-25T13:33:23.977
> 
> 标签：c#, function, coding-style, parameters

函数参数往往有不同的用途：在大多数情况下，它们只是内部逻辑用来产生结果/效果的只读指示，但有时它们会被调用函数（初始化函数、排序算法等）修改。

我想知道是否有最佳实践可以在代码中显示该函数将修改参数（除了在上面写注释明确说明这一点）？就像一个广泛认可的编码约定。

对于 C++，我对函数不会修改的每个参数都使用“const”关键字，但 C# 不允许以这种方式使用 const 或“readonly”。并且缺少“const”并不意味着该参数无论如何都打算由函数更新。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:50:01.223

实际上，在 C# 值类型参数（和字符串，由于不变性）默认情况下是“const”，除非您使用`out`or`ref`关键字显式标记它们。至于引用类型，函数只能修改参数所指的对象，不能修改引用本身。

此外，这些`out`和`ref`关键字是编译器的提示，用于分析代码流并禁止使用“未初始化”变量。所以。即，如果您声明方法：

```
void DoSomething(int i) { ... } 
```

然后尝试从以下代码中调用它：

```
int x;
DoSomething(x); 
```

编译器将不允许，因为`x`在调用时将未初始化。另一方面：

```
void DoSomething(out int i) { ... i = 10; ... } 
```

现在允许以下调用：

```
int x;
DoSomething(out x); 
```

因为编译器现在知道这`DoSomething`将初始化 x。请注意，`DoSomething`除非它包含一个为参数分配一些值的状态，否则它不会编译`i`。

# android - 屏幕锁定后 MediaPlayer 重新启动

> ID：11650943
> 
> 赞同：1
> 
> 时间：2012-07-25T13:33:31.597
> 
> 标签：android, android-mediaplayer

我有一个 MediaPlayer 播放视频，一切正常，除了当你锁定屏幕然后解锁它时，视频将重新启动。

目前我正在使用

```
 KeyguardManager keyguardManager = (KeyguardManager)getSystemService(Activity.KEYGUARD_SERVICE);
    KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
    lock.disableKeyguard(); 
```

它可以工作，但是如果您按下主页按钮，您将无法锁定屏幕，因为应用程序已将其关闭。您知道无需使用 KeyGuardLock 即可保持视频进度的更好方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:29:01.443

而不是 KeyGuard，您可以简单地`android:keepScreenOn=true`在`VideoView`布局 xml 中使用。

对于后一部分，您必须将视频的进度保存在 中`onSaveInstanceState()`并将进度数据加载到 中`onRestoreInstanceState()`，而不是仅`seekTo(progress)`在您的视频上使用您刚刚返回的数据。

也不要忘记检查 null`onRestoreInstanceState()`以防它是新的播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:44:05.033

您在哪里启动媒体播放器来播放视频（mvideo.start）。它是在 onCreate 方法还是 onRestart 方法中？如果你用代码更新你的问题来解决这个问题，这将是很有帮助的。

# c# - 如何通过 ADO.NET

> ID：11650952
> 
> 赞同：0
> 
> 时间：2012-07-25T13:33:59.367
> 
> 标签：c#, sql, sql-server-2008, ado.net

我正在使用 SQL Server 2008 和 C# ADO.NET 来完成此任务。

我想使用存储过程将这些数据插入到表中`SAVEDATA`

谢谢

斯罗什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:51:11.927

好吧，您只需编写一条`INSERT`语句，然后从该表中选择传入的数据：

```
CREATE PROCEDURE [dbo].[spSave] (@theDATA As [dbo].[TVP] Readonly)
AS
BEGIN      
    INSERT INTO dbo.SaveResponse(ID, myQuestion, PersonWhoResponses,
                                 Response, [User], [DateTime])

       SELECT 
          ID, myQuestion, PersonWhoResponses,
          Response, [User], [DateTime]
       FROM
          @theDATA
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:50:51.773

```
INSERT INTO @theData ( 
  SELECT [ID], [myQuestion], [PersonWhoResponses], [Response] , [User],  [DateTime]
  FROM SAVERESPONSE
  WHERE ...
) 
```

# ruby-on-rails - 什么 Ruby HTTP 守护进程为 Heroku Bamboo 应用程序提供支持？

> ID：11650954
> 
> 赞同：2
> 
> 时间：2012-07-25T13:34:05.387
> 
> 标签：ruby-on-rails, ruby, heroku

我已经设法弄清楚在 Aspen 中它是 Thin 的一个版本，而 Cedar 它是你想要的任何东西......在 Bamboo 上是什么？您可以通过 Gemfile 或其他地方更改它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:43:37.403

Heroku 文档是这样说的：

> 在 Bamboo 上，所有 Web 进程都使用 Thin

资料来源：[迁移到 Celadon Cedar Stack](https://devcenter.heroku.com/articles/cedar-migration#choose_app_server)

从我读到的内容来看，你无法改变它。这种灵活性是为最近的 Cedar 堆栈保留的。

# html - 无法使用 Sticky footer 技术垂直对齐 div

> ID：11650955
> 
> 赞同：2
> 
> 时间：2012-07-25T13:34:07.180
> 
> 标签：html, css

我在我的网站上应用了 Styck 页脚的技术，但是我的内容需要水平对齐和垂直对齐`#main`但是由于`padding-bottom: 180px`底部必须与页脚的大小相同，所以我`#main`不会垂直对齐。如果我去掉这个填充，并在`#main`height 设置一些值，这可行！但我的页脚并不总是在底部。在这种情况下我应该如何处理？

摆弄`padding-bottom:180px;`：[这个链接](http://jsfiddle.net/79aZE/3/)

小提琴没有`padding-bottom:180px;`：[这是另一个链接](http://jsfiddle.net/79aZE/4/)

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:48:45.513

首先将您的 HTML 结构更改为

```
<div id="wrap">
    <div id="main" class="block clearfix">
        <div id="wrapper" class="content">
            <p>text</p>
       </div>
    </div>
    <div id="footer"> <!-- footer within wrapper -->
       footer content
    </div>
</div> 
```

并将您的 CSS 更改为

```
#footer { 
    position:relative;
    margin-top: 0; 
    height: 180px;
    clear:both;
    background:#FFCC00;
} 
```

现在，您的页脚将始终“附加”到您的内容。 [请看小提琴。](http://jsfiddle.net/79aZE/4/)

# python - 使用 numpy ndarray 的 joblib 并行循环的性能

> ID：11650956
> 
> 赞同：1
> 
> 时间：2012-07-25T13:34:07.697
> 
> 标签：python, numpy, parallel-processing

我正在使用 numpy 在 python 中进行一些统计计算。到目前为止，我当前的实现还没有并行化。因此，我正在研究 python joblib Parallel 以进行简单的循环并行化。

我的代码的非并行部分如下所示：

```
def calcRADMatInt( i, j , RADMat, pdfMu, pdfSigma):
  if i==j:
    RADMat[i, j] = 0.0
  else:
    RADMat[i, j] = calcRAD( pdfMu[i], np.squeeze( pdfSigma[i]), pdfMu[j], np.squeeze( pdfSigma[j]) )
    RADMat[j, i] = RADMat[i,j]

def caldRADMat(....):

....
....
  RADMat = np.zeros( (numLandmark, numLandmark) )

  for i in range( 0, numLandmark):
    for j in range( i, numLandmark)):
      calcRADMatInt( i, j, RADMat, pdfMu, pdfSigma)

....
.... 
```

我试图像这样并行化它：

```
def caldRADMat(....):
....
....

  RADMat = np.zeros( (numLandmark, numLandmark) )

  for i in range( 0, numLandmark):
    Parallel(n_jobs=8)(delayed(calcRADMatInt)( i, j, RADMat, pdfMu, pdfSigma) for j in    range( i, numLandmark))

....
.... 
```

但是，生成的并行代码运行速度明显慢于非并行版本。

所以我想我的实际问题是：我是否正确使用 joblib Parallel？这是并行计算 numpy ndarray 元素的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-31T13:38:32.427

您可以在 Parallel 任务中包含两个 for 循环，如下所示：

```
def calcRADMatInt( i, j , RADMat, pdfMu, pdfSigma):
  if i==j:
    RADMat[i, j] = 0.0
  else:
    RADMat[i, j] = calcRAD( pdfMu[i], np.squeeze( pdfSigma[i]), pdfMu[j], np.squeeze( pdfSigma[j]) )
    RADMat[j, i] = RADMat[i,j]

def caldRADMat(....):
....
....

  RADMat = np.zeros( (numLandmark, numLandmark) )

  Parallel(n_jobs=-1)(delayed(calcRADMatInt)
  (i, j, RADMat, pdfMu, pdfSigma)
  for i in range(0,numLandmark)
  for j in range( i, numLandmark))

....
.... 
```

如果您在循环中调用 Parallel 任务，就像您所做的那样，您的计算是次优的。

希望能帮助到你！

此致，

# sql-server - SQL Server：排序和检查

> ID：11650957
> 
> 赞同：0
> 
> 时间：2012-07-25T13:34:11.747
> 
> 标签：sql-server, sorting, if-statement, case

我有一个名为`Logs`：

```
 ->OCCUR_TIME --date and time
 ->NAME --name of a person
 ->KIND --the kind of log (eg. 40 means `something`)
 ->VALUE --the value of the kind of log (eg. 99) 
```

我必须创建一个查询：

```
SELECT 
*
FROM        LOGS
WHERE       NAME='dude'
ORDER BY    KIND, OCCUR_TIME, VALUE; 
```

现在这会显示日志并按种类排序，然后是发生时间（如果发生时间完全相同，它将按值排序）。

笔记：

*   KIND 的 VALUE 必须始终为 +1
*   如果不报告问题。

例如，如果日志出现问题并且在 VALUE 400 之后下一个 VALUE 是 398，该怎么办？

例子：

```
 Occur_Time                | Name    | Kind | Value
   2012-06-26 15:14:25.407     dude      40     398
   2012-06-27 16:55:28.730     dude      40     399
   2012-06-30 02:43:26.763     dude      40     400
   2012-06-30 05:26:32.673     dude      40     398 <-- data prob. (possible rollback)
   2012-06-30 16:35:28.330     dude      40     399 <-- problem continuing
   2012-06-20 20:29:51.207     dude      41     100 <-- no prob. bcoz its another kind
   2012-06-23 05:50:59.130     guy       40     500 <-- no prob. bcoz its another name 
```

我想要一个能找到问题的查询，以及它从哪里开始。像这样？

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:39:28.557

不是一个理想的查询，但这将列出问题：

```
select l1.*, l2.* 
from logs l1 -- self join on the columns that are the same
  inner join logs l2 on l1.Name = l2.Name and l1.Kind = l2.kind
where l1.occur_time > l2.occur_time
  and l1.value < l2.value 
```

基本上这会发现所有不匹配的地方，时间会增长，但价值会减少。但是，每次出现它都会返回很多重复项，因此您可能必须使用以下内容进行限制：

```
select distinct l1.Name, l1.Kind
from logs l1 -- self join on the columns that are the same
  inner join logs l2 on l1.Name = l2.Name and l1.Kind = l2.kind
where l1.occur_time > l2.occur_time
  and l1.value < l2.value 
```

隔离有问题的名称/种类对

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:44:33.320

在 SQL Server 2012 中，您可以使用 lag() 函数来执行此操作。

我假设您使用的是早期版本，但在 2005 年之后。您可以使用嵌套的 windows 函数来执行此操作。

```
select name, KIND, OCCUR_TIME, VALUE,
       (case when max(testval) over (partition by kind, name) <> min(testval) over (partition by kind)
              then 'FAIL'
              else 'OKAY'
        end) as status
from (SELECT *,
             row_number() over (partition by kind, name order by occur_time, value) as seqnum,
             (value - row_number() over (partition by kind, name order by occur_time, value)) as testval
      FROM LOGS
      WHERE NAME='dude'
     ) t
  ORDER BY name, KIND, OCCUR_TIME, VALUE 
```

这个想法是使用 row_number() 来生成一个数字序列。值和序列之间的差异应该是一个常数。外部查询查看这些的最小值和最大值。如果它们不同，那么您就有问题了。

# java - Tomcat文件夹作为类路径？

> ID：11650958
> 
> 赞同：1
> 
> 时间：2012-07-25T13:34:13.083
> 
> 标签：java, spring, tomcat, web-applications

我对 Tomcat 有一个非常奇怪的问题，我似乎无法解决。我的问题是 Tomcat 似乎将 Tomcat 文件夹（C:/Program Files/Apache Software Foundation/Tomcat 6）视为类路径。当我将 JAVA_OPTS 设置为引用我的属性文件时，此问题就会生效。

```
-Ddoiadmin.properties.file=doiadmin.properties 
```

我的类路径（WEB-INF/classes）中有属性文件，但是当我启动 Tomcat 时，出现错误：

```
com.XXXXX.commons.servicecore.ServiceConfigurationException: Could not find main properties file (directly or on classpath): [doiadmin.properties] 
```

使应用程序正确启动的唯一方法是将属性文件放在 Tomcat 文件夹中。这很烦人，从长远来看，这不是我想做的事情。

我在网上搜索了一些人，但无济于事。有没有人有什么建议？

感谢您的帮助-蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:19:43.893

如果我理解正确，我会这样做：

在您的 web.xml 中有以下内容：

```
<env-entry>
  <env-entry-name>RootPathPropertyName</env-entry-name>
  <env-entry-type>java.lang.String</env-entry-type>
  <env-entry-value>uk.co.foo.project.path</env-entry-value>
</env-entry>

<env-entry>
  <env-entry-name>RootPathPropertyValue</env-entry-name>
  <env-entry-type>java.lang.String</env-entry-type>
  <env-entry-value>d:/foo/bar</env-entry-value>
</env-entry> 
```

在您的上下文中设置 PlaceHolderConfigurer，如下所示：

```
<!-- Properties Configuration -->
<bean id="propertyConfigurer"
     class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="order" value="1"/>
  <property name="locations">
    <list>
      <value>file:${uk.co.foo.project.path}/config/foo.properties</value>
    </list>
  </property>
</bean> 
```

在您的 tomcat 配置中，您可以使用 /conf/Catalina/localhost/foo.xml 文件中的以下内容覆盖默认位置：

```
<Context path="foo" >
<Environment name="RootPathPropertyValue" value="c:/foo/bar" type="java.lang.String" override="false"/>
</Context> 
```

# python - 防止连接的套接字在 Python 中关闭

> ID：11650959
> 
> 赞同：3
> 
> 时间：2012-07-25T13:34:13.070
> 
> 标签：python, sockets

**我有一个像客户端**一样的简单功能。它发送事件消息并等待确认（为简单起见，我删除了该部分）。之后它将收到更多消息：

```
def send_data(message):
    """Connect to server and get requests"""
    sock = socket.socket()
    host = 'localhost'
    port = 8000
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.connect((host,port))

    try:
        if message:
            sock.sendall(message)

        # Look for the response
        has_request = False
        while not has_request:
            data = sock.recv(1024)

            #First I get ACK, code not listed here...
            #Next iteration, I got my request message
            has_request = True

    finally:
        print >> sys.stderr, 'Closing socket'
        sock.close() 

    return data 
```

`__main__`我在声明中称之为：

```
if __name__ == '__main__':
    server_data = send_data(event)

    if server_data:
        parse_request(server_data) 
```

但是我需要防止套接字自动关闭。因为我在解析请求后必须发送另一条消息。我删除了 sock.close() 但套接字仍然关闭。这是因为我正在返回数据并且我超出了函数范围吗？

我只想在我的程序中随时连接，然后毫无问题地接收和发送消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:39:31.590

当您离开该`send_data`方法时，您的套接字`sock`将不再被任何人引用，因此垃圾收集器将完成他的工作并删除该对象，从而关闭套接字（即使没有`close()`调用）。

如果您返回带有数据的套接字对象并将其放在主要部分中，则套接字仍将被引用而不是关闭。

```
def create_socket():
    sock = socket.socket()
    host = 'localhost'
    port = 8000
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.connect((host,port))
    return sock

def send_data(message, sock):
    """Get requests"""
    if message:
        sock.sendall(message)

    # Look for the response
    has_request = False
    while not has_request:
        data = sock.recv(1024)

        #First I get ACK, code not listed here...
        #Next iteration, I got my request message
        has_request = True
    return data

if __name__ == '__main__':
    server_sock = create_socket()
    server_data = send_data(event, server_sock)

    if server_data:
        parse_request(server_data, server_sock)

    #no more use of server_socket ? 
    server_sock.close() 
```

# php - 页面错误

> ID：11650960
> 
> 赞同：0
> 
> 时间：2012-07-25T13:34:16.977
> 
> 标签：php, android, web-services

我正在为我的 android 应用程序创建一个 php 脚本，它将对用户进行身份验证。在脚本中发生以下错误：

> 已连接 欢迎 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' AND Password = '' 附近使用正确的语法

```
query :- $query = "SELECT * FROM admin WHERE Username = ‘$un’ AND Password = ‘$pw’";

$result = mysql_query($query) or die(mysql_error());; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T13:37:46.003

您使用的报价似乎不同。您应该在值的任一侧使用 ascii 单引号字符。

```
query :- $query = "SELECT * FROM admin WHERE Username = '$un' AND Password = '$pw'"; 
```

还要确保正确的值存在于`$un`和`$pw`

# c# - 横向模式下多行消息框正文显示

> ID：11650963
> 
> 赞同：0
> 
> 时间：2012-07-25T13:34:31.757
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, messagebox

我有消息框，在不同的场景中显示不同的消息。我的问题是，在纵向模式下，消息正文很好，但在横向模式下，即使有很多空间，消息正文也会被包装并以多行显示。为什么不完全传播消息文本？？？这是 WP7 中的一个已知问题还是本机行为？为了让大家理解我说的问题，我附上两张横向和纵向模式的消息框图片。我采用了一个带有非常长的消息文本的消息框进行测试。

这是消息框的代码：

```
void btnLike_Click(object sender, RoutedEventArgs e)
    {
        msgPrompt.Hide();
        MessageBoxResult result = new MessageBoxResult();
        result=MessageBox.Show("Thank You for your feedback!! It was nice to know that you liked this app, We will be back with a more amazing features!!! Upgrades will be available soon!!!", "Feedback", MessageBoxButton.OK);
        if (result == MessageBoxResult.OK)
        {
            Game game = new Game();
            game.Exit();
        }
    } 
```

请查看并以代码形式（如果有）提供您的评论或修复。

谢谢你，阿普尔瓦 :)![人像模式](../Images/39dec7ab53e7491bf9fa29b1aca947fc.png) ![横向模式，文本对齐方式与纵向模式相同](../Images/950ec463416ebba8dd4aa65898f964a6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:06:46.307

Although this might be the standard behavior (it looks like it is), you can quite simply create your own custom control to achieve what you'd like to do. I made my first one the other day, and it was quite easy really.

For more information about how to do the same, you can look at some of these links:

[http://www.windowsphonegeek.com/articles/Creating-a-WP7-Custom-Control-in-7-Steps](http://www.windowsphonegeek.com/articles/Creating-a-WP7-Custom-Control-in-7-Steps)

[http://www.windowsphonegeek.com/articles/7-Mistakes-Developer-make-when-implementing-Windows-Phone-Custom-Controls](http://www.windowsphonegeek.com/articles/7-Mistakes-Developer-make-when-implementing-Windows-Phone-Custom-Controls)

Happy coding :-)

# java - 线段的Java角度

> ID：11650966
> 
> 赞同：1
> 
> 时间：2012-07-25T13:34:47.320
> 
> 标签：java, geometry

![](../Images/bd10b2758221086ba16c318389195149.png)

在上述情况下，我想检查 和 之间的`b`角度`c`。
数学上只是

```
asin(a/c) 
```

但是在Java中我偶然发现了一个小问题。这就是我试图达到同样目的的方式：

```
Math.asin(Math.toRadians(a/c)); 
```

我读到`Math.asin()`期望以弧度表示的参数，这就是我执行转换的原因。但它似乎没有按预期工作。我想得到学位的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:36:19.147

反正弦函数**返回**弧度，它不**接受**它们作为参数。将您的返回值转换为度数。

# cpu-usage - vmstat 结果不一致

> ID：11650969
> 
> 赞同：1
> 
> 时间：2012-07-25T13:34:54.973
> 
> 标签：cpu-usage

当我发出不带任何参数的 vmstat 命令时，我得到以下结果：

```
# vmstat
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------
r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
7 117      0 719328 1251624 258624672    0    0   346    64    0    0  4  0 92  3  0 
```

如您所见，cpu 空闲率为 92%。无论我发出多少次命令，我都会得到类似的结果。

但是当我发出带有时间间隔参数的 vmstat 时，cpu 空闲值立即下降：

```
# vmstat 5        
    procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
385  0      0 145380064 1457188 115708528    0    0   346    64    0    0  4  0 92  3  0
417  0      0 144694256 1457204 116388928    0    0     0    49 1122 528500 84  5 12  0  0
413  0      0 143960640 1457220 117117040    0    0     0    31 1127 529619 84  5 11  0  0
418  0      0 143224224 1457228 117850080    0    0     0    26 1114 530135 84  5 11  0  0
444  0      0 142483520 1457240 118587048    0    0     0    33 1112 530314 84  5 11  0  0
397  0      0 141820240 1457256 119245040    0    0     0    37 1114 531348 85  5 10  0  0 
```

这里是！即使我在 5 秒间隔内得到结果，cpu 空闲值也会下降大约 80%！

我无法想象 vmstat 本身是否会消耗这么多 CPU 功率（服务器有 32 个 Inter Xeon X7550 CPU，每个 CPU 有两个 2 核和 2 个线程）。

有人能告诉我我失去的 %80 Cpu 电源吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T13:45:03.260

vmstat 输出的第一个统计数据为您提供自机器上次启动以来的平均统计数据（无论您是否指定时间延迟）。当您指定时间延迟时，后续统计信息会显示每个间隔之间的机器统计信息。例如，假设您指定 5 秒的时间延迟，第一个统计信息会显示自机器上次启动以来的统计信息。第二个统计数据在报告第一个统计数据 5 秒后向您显示该统计数据。第 3 个统计数据显示您在第 2 个统计数据 5 秒后的统计数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:39:47.927

从手册页：

```
If no delay is specified, 
only one report is printed with the average values since boot. 
```

# java - MongoDB Java：使用 QueryBuilder $in 运算符在 Mongo 中查找对象不返回任何内容

> ID：11650970
> 
> 赞同：4
> 
> 时间：2012-07-25T13:34:55.130
> 
> 标签：java, mongodb, mongo-java

我有一个`JUnit rule`看起来`MongoRule`像

```
public class MongoRule extends ExternalResource {

    private static final Logger LOGGER = LoggerFactory.getLogger(MongoRule.class);
    private final MongoService mongoService;

    public MongoRule() throws UnknownHostException {
        mongoService = new MongoService(getConfiguredHost(), getConfiguredPort(), getConfiguredDatabase());
    }

    @Override
    protected void before() throws Throwable {
        LOGGER.info(" Setting up Mongo Database - " + getConfiguredDatabase());
    }

    @Override
    protected void after() {
        LOGGER.info("Shutting down the Mongo Database - " + getConfiguredDatabase());
        mongoService.getMongo().dropDatabase(getConfiguredDatabase());
    }

    @Nonnull
    public DB getDatabase() {
        return mongoService.getMongo().getDB(getConfiguredDatabase());
    }

    @Nonnull
    public Mongo getMongo() {
        return mongoService.getMongo();
    }

    @Nonnull
    public MongoService getMongoService() {
        return mongoService;
    }

    public static int getConfiguredPort() {
        return Integer.parseInt(System.getProperty("com.db.port", "27017"));
    }

    @Nonnull
    public static String getConfiguredDatabase() {
        return System.getProperty("com.db.database", "database");
    }

    @Nonnull
    public static String getConfiguredHost() {
        return System.getProperty("com.db.host", "127.0.0.1");
    }
} 
```

然后我尝试插入一些文件如下

```
 public static void saveInDatabase() {
        LOGGER.info("preparing database - saving some documents");
        mongoRule.getMongoService().putDocument(document1);
        mongoRule.getMongoService().putDocument(document2);
    } 
```

哪里`document1`和`document2`是有效`DBObject`文件。架构看起来像

```
{
    Id: 001
    date_created: 2012-10-31
    vars: {
      '1': {
           name: n1
           value:v1
       }
      '2': {
           name: n2
           value:v2
       }
      '3': {
           name: n3
           value:v3
       }

} 
{
    Id: 002
    date_created: 2012-10-30
    vars: {
      '1': {
           name: n4
           value:v4
       }
      '2': {
           name: n5
           value:v5
       }
      '3': {
           name: n6
           value:v6
       }

} 
```

现在我尝试查询集合并获取这些对象，所以我这样做了

```
public static void getDocuments(List<String> documentIds) {
        BasicDBList docIds = new BasicDBList();
        for (String docId: documentIds) {
            docIds.add(new BasicDBObject().put("Id", docId));
        }
        DBObject query = new BasicDBObject();
        query.put("$in", docIds);
        DBCursor dbCursor = mongoRule.getDatabase().getCollection("mycollection").find(query);
        System.out.println(dbCursor == null);
        if (dbCursor != null) {
            while (dbCursor.hasNext()) {
                System.out.println("object -  " + dbCursor.next());
            }
        }
    } 
```

`mycollection`是保存所有文档的集合，它来自外部服务。
当我运行此文档时，我看到以下内容

```
preparing database - saving some documents
inserting document - DBProposal # document1
inserting document - DBProposal # document2
false 
```

这意味着`collection.find()`找不到这些文件。

我在这里没有做什么？我怎样才能取回文件？

我对使用`Java`with非常陌生，`Mongo`并使用此[引用](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/9WqH7CRfwak)来构造查询

**UPDATE**
更改查询的构造方式后，我仍然看不到文档

```
public static void getDocuments(List<String> documentIds) {
            BasicDBList docIds = new BasicDBList();
            docIds.addAll(documentIds)
            DBObject query = new BasicDBObject();
            query.put("$in", docIds);
            DBCursor dbCursor = mongoRule.getDatabase().getCollection("mycollection").find(query);
            System.out.println(dbCursor == null);
            if (dbCursor != null) {
                while (dbCursor.hasNext()) {
                    System.out.println("object -  " + dbCursor.next());
                }
            }
        } 
```

并且集合名称通过返回

```
private static String getCollectionName(@Nonnull final DBObject dbObject) {
        return "mycollection";
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T15:37:41.880

你现在正在做相当于：

```
db.col.find({$in:[{Id:id1}, {Id:id2}, ..., {Id:idN}]}) 
```

这不是一个有效的查询，因为您没有指定 $in 的字段。我假设你想要：

```
db.col.find({Id:{$in:[id1, id2, ..., idN]}}) 
```

相应地更改您的查询构造代码，您应该没问题。

编辑：添加正确的代码：

```
public static void getDocuments(List<Integer> documentIds) {

            BasicDBList docIds = new BasicDBList();
            docIds.addAll(documentIds)
            DBObject inClause = new BasicDBObject("$in", docIds);
            DBObject query = new BasicDBObject("Id", inClause);
            DBCursor dbCursor = mongoRule.getDatabase().getCollection("mycollection").find(query);
            System.out.println(dbCursor == null);
            if (dbCursor != null) {
                while (dbCursor.hasNext()) {
                    System.out.println("object -  " + dbCursor.next());
                }
            }
        } 
```

请注意，这假定“Id”不是“_id”

# unix - 如何在“grep”之后“cd”到目录？

> ID：11650973
> 
> 赞同：5
> 
> 时间：2012-07-25T13:35:00.900
> 
> 标签：unix, terminal

我想找到一个目录，`grep`然后将当前目录更改为结果目录。例如：

```
$ ls | grep 1670 | 
```

找到我的目录haib12CJS1670。我正在尝试执行以下操作：

```
$ ls | grep 1670 | cd 
```

这样我的目录就可以一步设置为haib12CJS1670。显然我的方法行不通。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T13:36:12.647

```
 cd `ls | grep 1670` 
```

应该让你`cd`工作（注意，那些是“反勾号”）

另一种方法（有些人会说首选）是使用`$`替换。例如，

```
 cd $(ls | grep 1670) 
```

虽然我无法让它与 . 一起使用`tcsh`，但它与`bash`.

第一个解决方案与*外壳无关*:)

# android - 应用程序加载微调器

> ID：11650980
> 
> 赞同：0
> 
> 时间：2012-07-25T13:35:14.610
> 
> 标签：android, android-progressbar

我想在带来应用程序内容的同时使用 Google Play 应用程序使用的应用程序加载微调器。我怎么能得到那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:48:19.700

首先，它不是一个“微调器”（微调器本身就是一个完全不同的组件）而是一个 ProgressDialog，它有两种类型。1.微调器样式 2.单杠样式

您在 Play 商店中看到的是 Spinning 风格的 progressDialog- [ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html)。

它通常与[Asynctask一起使用](http://developer.android.com/reference/android/os/AsyncTask.html)

这里有一个小例子让你了解progressdialogs是如何工作的：[android progress dialog example](http://mobile-development.org/index.php/android/android-progress-dialog-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:44:44.260

我认为您的意思是在加载某些东西时旋转的圆圈。如果我是正确的，请继续阅读。android 应用程序开发人员可以添加像 GIF 格式这样的动态图像的方法之一是使用“android.graphics.drawable.AnimationDrawable”包下的 AnimationDrawable 类。该类使用多个图像作为框架并以特定的方式显示它们可以使用类函数设置的动画。

首先，需要导入包并在 \res\drawable 文件夹中复制要显示或动画的图像。

其次，需要使用“android.graphics.drawable.BitmapDrawable”包下的BitmapDrawable类将图像转换为Bitmap。图像转换如下所示：

```
BitmapDrawable frame1=(BitmapDrawable)getResources().getDrawable(R.drawable.w1); 
```

其中 w1 是 \res\drawable 文件夹中图像的名称。

第三，必须将这些位图图像添加到动画中。

addFrame(Drawable frame,int duration) 函数用于向动画添加帧（图像）。frame 和 duration 两个参数是位图图像（帧）和帧（图像）应该出现的时间（以毫秒为单位）。函数 setOmeShot(boolean) 用于设置动画是播放一次还是重复播放。如果动画应该只播放一次，则传递 true，否则为 false。

第四，动画必须设置为 ImageView。

最后必须开始动画。

```
animation.start(); 
```

欲了解更多信息，请访问此网站：http: [//jannatyahan.com/android-application-development-tutorial-for-displaying-moving-images-in-android-application/](http://jannatyahan.com/android-application-development-tutorial-for-displaying-moving-images-in-android-application/)

# flash - 3 行文本中的缓动

> ID：11650982
> 
> 赞同：-1
> 
> 时间：2012-07-25T13:35:17.627
> 
> 标签：flash, apache-flex, actionscript

我想显示带有时间戳的某个文本的三行，但在动画中很容易，我的想法是显示文档的 3 行，它们将轻松地相互替换。

**例如：**

[0:02]1号线
[0:03]2号线 [0:04]
3号线

在第二个2：

（空）
第 1 行 - 突出显示的行 -
第 2 行

在第二个3：

第 1
行 第 2 行 - 突出显示的行 -
第 3 行

在第二个3：

第 2
行 第 3 行 - 突出显示的行 -
（空）

我可以在正确的时间更改每一行，但我想简化它以获得更好的视图。
卡拉OK之类的东西。

谢谢

这是我重新编辑文本的函数：
文本的值是当前时间的 3 行文本。
此函数将由 elapsedTime 的侦听器调用。
_field.htmlText 包含要显示的最终文本。这将是我想要放松的领域。

```
 private function _renderText(text:String,style:Object=null):void {
        if (style) {
            _sheet.setStyle("p",style);
        } else { 
            _sheet.setStyle("p",_style);
        }
        // Place the text and align bottom
        _field.htmlText = '<p>'+text+'</p>';
        _field.y = _outline.y = -_field.height;
        _outline.graphics.clear();
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:08:33.883

看看[Flex / Actionscript 中文本动画库的答案？](https://stackoverflow.com/questions/189207/libraries-for-text-animation-in-flex-actionscript?rq=1)对于一些可以帮助你的图书馆。

[TextAnim](http://flupie.net/textanim/maker/)看起来是一个不错的选择，可以帮助您入门。

# javascript - 用于 jQuery 的 History.js 在 IE7 中触发不需要的“警报”

> ID：11650984
> 
> 赞同：1
> 
> 时间：2012-07-25T13:35:22.917
> 
> 标签：javascript, jquery, internet-explorer-7, pushstate, history.js

我以以下方式将 History.js 用于 jQuery（v1.7.1，html4+html5 捆绑包）

在我的 js 文件顶部准备：

```
(function(window,undefined){

    // Prepare
    var History = window.History; // Note: We are using a capital H instead of a lower h
    if ( !History.enabled ) {
         // History.js is disabled for this browser.
         // This is because we can optionally choose to support HTML4 browsers or not.
        return false;
    }

    // Bind to StateChange Event
    History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
        var State = History.getState(); // Note: We are using History.getState() instead of event.state
        History.log(State.data, State.title, State.url);
    });

})(window); 
```

然后在我的代码中进一步向下：

```
 $foo.click(function(e) {
        e.preventDefault();
        History.pushState({}, "", "?" + bar);
    }); 
```

基本上我想要实现的是，每次单击某些项目时，都会将查询字符串`"?" + bar`附加到 url 并且 pushState 将其存储在浏览器历史记录中。这在 FF 最新版本中运行良好，但在 IE7 中测试时，会出现以下类似警报的消息：

![IE7 中的 History.js 错误](../Images/1516cdb47510a7405fac6b71de1d0c73.png) 弹出窗口中的 url 是我所期待的，即使在浏览器中它显示为

```
http://www.foobar.com/.../#?Fixed 
```

也就是说，有一个额外的哈希。不过，让我担心的是错误信息 - 任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:07:47.237

仅作记录，如果有人再次出现在此页面上 - 我已经隔离了脚本并且错误不再发生。经过漫长而乏味的测试，我发现这是与专有 jquery 插件冲突引起的，并修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:11:46.987

原因：您需要从代码中删除“History.log()”...在 IE 中，此 History.log 正在将日志输出写入警报框...

# windows - 奇怪的批处理文件问题

> ID：11650986
> 
> 赞同：1
> 
> 时间：2012-07-25T13:35:25.070
> 
> 标签：windows, windows-7, batch-file, windows-7-x64

有人可以帮我解决这个问题吗？我有一个批处理文件，我试图根据我当前的内部 IP 地址连接几个网络驱动器。问题是，它输出以下内容：

家 192.168.2.99 地下室

它应该在哪里输出：Home 192.168.2.99

这是代码：

```
@echo off

@for /F "tokens=2 delims=:" %%i in ('"ipconfig | findstr IP | findstr 192."') do SET LOCAL_IP=%%i

@if ("%LOCAL_IP%" == "192.168.2.99") Call ConnectHome else (Call ConnectBasement)

:ConnectHome
@echo Home %LOCAL_IP%

:ConnectBasement
@echo Basement
@REM net use R: \\192.168.2.98\Storage
@REM net use S: \\192.168.2.98\MyStuff
@REM net use T: \\192.168.2.98\Server 
```

我还尝试将 IF 语句替换为：

```
@if ("%LOCAL_IP%" == "192.168.2.99") goto ConnectHome else (goto ConnectBasement) 
```

和：

```
@if ("%LOCAL_IP%" == "192.168.2.99") goto :ConnectHome else (goto :ConnectBasement) 
```

结果总是一样的......操作系统是Windows 7 Pro

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:42:51.183

`Call`旨在调用与您当前所在的批处理文件*不同的批处理文件（请参见*[此处](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/batch.mspx?mfr=true)）。如果它传递了一个标签，它将从该标签执行，但它会执行到文件的末尾，所以当它到达 :ConnectBasement 行时它不会停止。

您可能需要`:END`在文件底部添加一个标签，`Goto :END`就在您的 :ConnectBasement 行之前。为了保持一致性，我可能建议使用`Goto`而不是`Call`自始至终。（如果您愿意，也可以`Goto :EOF`在不定义标签的情况下使用。）

（或者，学习 PowerShell 并使用它的功能来更干净地实现它；-)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:39:51.307

你是不是忘了在 :ConnectHome 部分之后停止执行？我不确定，但我认为这批只是在那之后继续，打印“地下室”。

编辑：杰罗恩打败了我:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:38:29.373

去 :ConnectHome 后，它只是去 :ConnectBasement。`goto :eof`在下面添加`@echo Home %LOCAL_IP%`。

# c# - DataGridView CurrentCellChanged 事件不允许我选择多于一行

> ID：11650989
> 
> 赞同：2
> 
> 时间：2012-07-25T13:35:35.740
> 
> 标签：c#, winforms, events, datagridview, multi-select

我的表单上有一个 DataGridView。我为它设置了 CurrentCellChanged 事件，MultiSelect 属性为真，但现在我不能选择超过一行！

我希望能够选择超过 1 行。

# javascript - 使用javascript访问和排序json中的数组对象

> ID：11650991
> 
> 赞同：0
> 
> 时间：2012-07-25T13:35:41.793
> 
> 标签：javascript, json

我正在玩 javascript 中的 json 对象，想看看是否有人可以帮助我解决问题

我的 json 文件包含一个哈希对象列表，其中包含一个键 (id) 和值是 [ipaddress, timestamp, url] 的数组

例如

```
{"output":
    {
    "1":["10.0.0.1","2012-07-11T11:41:42+01:00","http://myurl.com"],
    "2":["10.0.0.1","2012-07-11T11:45:42+01:00","http://myurl2.com"],
    "3":["192.168.1.1","2012-07-11T11:41:47+01:00","http://myurl3.com"]
    }
} 
```

我想要做的是能够对数组的内容进行排序

例如，我想通过 json 并提取每个 ip 地址的最高时间戳

因此，上面 json 的示例输出如下所示：-

```
10.0.0.1 - http://myurl2.com
192.168.1.1 - http://myurl3.com 
```

目前我有一个简单的函数可以在 div 中输出原始数据，但我确信我可以更好地处理数组

```
 var displayOutput = function(data){
    var container = $("#fragment-1");
   var body = “”;
    $.each(data.output, function(key, val) {
      var arr = val.toString().split(",");
      body = body + arr[0]+ ' - ' +  arr[1]) + ' - ' +  arr[2]
    });
    container.html(body);                                                
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:45:40.253

您需要将格式更改为 JSON，以便于排序。

也许是一个多维数组？

也许这可能会有所帮助：[对 JavaScript 对象数组进行排序](https://stackoverflow.com/questions/979256/how-to-sort-an-array-of-javascript-objects)

或者这个： http: [//www.devcurry.com/2010/05/sorting-json-array.html](http://www.devcurry.com/2010/05/sorting-json-array.html)

或者这样：[在 Javascript 中对 JSON 对象进行排序](https://stackoverflow.com/questions/4222690/sorting-a-json-object-in-javascript)

其中之一肯定会导致一个好的解决方案。需要任何帮助询问:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:54:08.873

您可以使用 underscore.js 库。例如，您可以使用以下命令对集合进行排序：

```
_.sortBy(yourData.output, function (elem) {
    return new Date(elem[1]).getTime() - new Date().getTime();
}); 
```

当然，您需要先将 JSON 解析为 JavaScript 对象。

# r - R生成1分钟间隔的时间序列

> ID：11650996
> 
> 赞同：3
> 
> 时间：2012-07-25T13:36:01.887
> 
> 标签：r, physics, time-series, finance, xts

我想生成一个 1 分钟间隔的时间序列，然后粘贴到 xts 对象。基本上，我有一个逐个滴答的 dateTime 对象，如下所示：

```
 [1] "2010-02-02 08:00:03 CET" "2010-02-02 08:00:04 CET" "2010-02-02 08:00:04 CET" "2010-02-02 08:00:04 CET" "2010-02-02 08:00:04 CET"
 [6] "2010-02-02 08:00:04 CET" "2010-02-02 08:00:04 CET" "2010-02-02 08:00:05 CET" "2010-02-02 08:00:05 CET" "2010-02-02 08:00:05 CET" 
```

我正在聚合我的 xts 系列（按上一个刻度）以使用 RTAQ 包函数获得 1 分钟（相等）间隔的时间序列：

```
price_1m<-aggregatets(price,FUN="previoustick",k=1,on="minutes") 
```

问题是时间标签未聚合，即聚合系列未由 1 分钟间隔的时间对象标记。这是因为有几秒钟没有价格。为了获得等间隔的时间序列，这些函数用前一个分时价格填充空白。

因此，我如何创建一个 1 分钟间隔的时间序列来获得一个人工的 1 分钟间隔时间序列？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:42:01.257

出于兴趣，RTAQ 是否提供其他 R 包中没有的东西？0.1 版是两年多前发布的，所以它看起来像是一个死项目。无论如何，您仍然可以使用 XTS 的`to.minute()`功能，因为 RTAQ 似乎使用 xts 对象。

这是我用来获取刻度并转换为条形的一些示例代码，以及添加其他列，例如平均值/标准差：

```
k=60
...
bars=to.period(x,k,period="secs")
colnames(bars)=c("Open","High","Low","Close")
ep=endpoints(x,"secs",k)
bars$Volume=period.apply(x,ep,length)
bars$mean=period.apply(x,ep,mean)
bars$sd=period.apply(x,ep, function(x){apply(x,2,sd)})
align.time(bars,k)  #Do this last 
```

而不是`align.time`我使用`align.time.down`, 以便从 06:00:00 到 06:00:59.999 的刻度进入标有“06:00:00”的条，而不是标有“06:01:00”的条。这与我拥有的历史数据格式相匹配。如果你需要它，定义是：

```
align.time.down=function(x,n){index(x)=index(x)-n;align.time(x,n)} 
```

最后，如果您有一整分钟没有刻度，并且仍然希望在您的数据中为它们提供一个条形图，我使用它（与上面相同的 k=60）：

```
full_index=do.call("c",mapply(
    seq.exclude_final_period.POSIXt,period_from,period_to,by=k,SIMPLIFY=F
    ))
bars=merge(bars,xts(,full_index),all=TRUE) 
```

`seq.exclude_final_period.POSIXt`函数定义如下：

```
#' Helper for process_one_day_of_ticks(); intended as a
#' replacement for seq.POSIXt (which will not exclude the final period).
#' @internal Use from=from+by instead of to=to-by to exclude the
#      first period instead.
seq.exclude_final_period.POSIXt=function(from,to,by){
to=to-by    #Make the final entry exclusive
seq(from,to,by)
} 
```

`period_from`和`period_to`是`POSIXct`对象，描述了您的交易时段的开始和结束。

# asp.net - WebResource.axd 和 ScriptResource.axd 获取方法失败

> ID：11650997
> 
> 赞同：0
> 
> 时间：2012-07-25T13:36:05.063
> 
> 标签：asp.net, ajax, get, webresource.axd, scriptresource.axd

我一直在这里和互联网上的其他地方搜索解决方案，并在此浪费了太多时间。请记住，我对网页设计相当陌生，并且是自学成才的。有可能我只是完全错过了一些东西。

当我单击但谁调用 CallMeMaybe() 函数时，我将仅收到“Starting 1”和“passed test 1”警报。所以我假设我的pagemethods gethello() 没有被调用，或者至少没有做任何事情。

```
function CallMeMaybe() {
            var dest;
            // call server side method
            alert("Starting 1");

            if (typeof (PageMethods) == "undefined") {
                alert("Not Working");
            }
            else {
                alert("passed test 1");
                var prm = Sys.WebForms.PageRequestManager.getInstance();

                PageMethods.GetHello(CallSuccess, CallFailed, dest);
            }
            alert("Sent");
        }

        function CallSuccess(res, destCtrl) {
            alert("success");
            var dest = document.getElementById(destCtrl);
            alert(res);
            var str = "";
            var table_result = "<table border='1'>";
            for (var i = 1; i < res.length - 1; i++) {
                str += (res[i] + "<br />");
                table_result += "<tr><td><img src='Images/img" + i + ".jpg' alt='' width='100' height='100'/></td></tr>";
            }
            table_result += "</table>";
            //document.querySelector('#results').innerHTML += str;
            document.querySelector('#results').innerHTML += table_result;
        }

        // alert message on some failure
        function CallFailed(res, destCtrl) {
            alert(res.get_message());
        } 
```

当我在 Chrome 中运行开发者工具时，我得到了这个： ![截屏](../Images/47aecab3842f74d33ef1c1ad7a30335d.png)

如果你们中的任何人可以帮助我或指出我正确的方向，那就太棒了！就像我说的那样，我浪费了太多时间试图弄清楚这一点，最后决定来这里寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:03:21.883

发现我的问题！我必须将以下代码添加到我的 Web.config 文件中：

```
<system.webServer>
<handlers>
  <add name="ManifestHandler" verb="*" path="*.manifest" type="TestWebSvc.ManifestHandler" resourceType="Unspecified" preCondition="integratedMode"/>
  <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions,  Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
  <add name="Telerik.Web.UI.WebResource" path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource, Telerik.Web.UI" verb="*"/>
</handlers>
</system.webServer> 
```