# StackOverflow 问答 11169000-11169999

# google-apps-script - 使用 Google Apps 脚本仅从 Google 电子表格中选择特定列中的值或公式不为空的行

> ID：11169001
> 
> 赞同：4
> 
> 时间：2012-06-23T11:06:51.097
> 
> 标签：google-apps-script, google-sheets

我有一个谷歌电子表格，我很难计算出选择多行所需的代码。

我要选择的唯一行是在其中一列（比如说 B 列）中具有值*或公式的行。*

我**无法**按列排序工作表，只能选择前 x 值。

我想我需要遍历工作表中的每一行并确定 B 列是否为空，但我不知道如何执行此操作或如何检查单元格是否包含值或公式。如果它包含一个公式，那么它必须优先于该值保留。

如何使用 Google Apps 脚本仅从 Google 电子表格中选择某一列中的值或公式不为空的行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T12:37:26.353

这应该做你想要的......也许它需要一些调试，因为我没有测试它，因为我不确定你真正想要什么;-)

```
function copynotempty(){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sh = SpreadsheetApp.setActiveSheet(ss.getSheets()[0])
  var col = 1 ; // choose the column you want to check: 0 = col A, 1= col B ...
  var range = sh.getDataRange();
  var values=range.getValues();// data is a 2D array, index0 = col A
  var formulas=range.getFormulas();// data is a 2D array, index0 = col A
  var target=new Array();// this is a new array to collect data
   for(n=0;n<range.getHeight();++n){
     if (values[n][col]!=''|| formulas[n][col]!=''){ ; 
        for (cc=0;cc<range.getWidth();++cc){
                if (formulas[n][cc]!=''){target[n][cc]=formulas[n][cc]}else{target[n][cc]=values[n][cc]}
    // if the cell has a formula copy it or else copy the value, do that for the whole row
// (this also defines and apply the 'priority' you mentioned in your question, I wasn't sure if it should apply to the whole row or only on column B)
                }
              }
            }
            if(target.length>0){// if there is something to copy
          var sh2=SpreadsheetApp.setActiveSheet(ss.getSheets()[1]); //second sheet of your spreadsheet
          sh2.getRange(1,1,target.length,target[0].length).setValues();// paste the selected values in the 2cond sheet
          }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:33:59.043

在这些行上尝试一些东西 - 此代码未经测试，但会给你一个公平的想法

```
var sheet = // get sheet ; 
var data = sheet.getDataRange().getValues(); 
for ( var i = 0; i < data.length ; i++){
  if (data[i][1] != ''){  // Column B is at index 1
    // Do whatever you want
  }
} 
```

# android - 如何创建继承的android应用程序？

> ID：11169004
> 
> 赞同：0
> 
> 时间：2012-06-23T11:07:30.923
> 
> 标签：android, inherited

我想从我的主应用程序创建另一个应用程序，用于实例“带广告的应用程序”。现在我在我的 repo 中创建了分支，根据需要更改主要来源，然后.. 现在是什么？如果我构建新的，它将被命名为我的“主应用程序”。
如何轻松处理它？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:42:57.133

第 1 步：将通用业务逻辑移动到[Android 库项目](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)中。

第 2 步：让您的应用程序（“主应用程序”和“带广告的应用程序”）的每种风格都引用 Android 库项目中的公共代码和资源。

# lua - Gilbert Tableview 库显示问题

> ID：11169005
> 
> 赞同：0
> 
> 时间：2012-06-23T11:07:42.740
> 
> 标签：lua, coronasdk

如何从显示中删除 tableview。我面临的问题是，当我创建 tableview 并返回时，tableview 会叠加在组上。

我努力了

```
tableView:cleanUp() 
```

无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:43:53.420

让我试着总结一下。。

```
local a=display.newGroup()
//few text objects and button objects in it.on the same screen 
local resultList=tableView.newList{data=resultData} 
```

所以我当前的屏幕包含一个 tableviewList 和一些其他按钮
和图像控件或组用于电晕重要的压力列表不属于任何组。现在下一部分，如果我按下 android 后退按钮，我要做的是

```
transition.to(a,{alpha=0}) 
```

除列表外，其他控件也一样。因为我希望新组出现。我想从显示中删除列表。我试过了

```
resultList:cleanUp() 
```

如文档中所述，但不起作用。是否清楚？

# c# - 数据聚合

> ID：11169012
> 
> 赞同：1
> 
> 时间：2012-06-23T11:08:21.457
> 
> 标签：c#, aggregation

在我的代码中，我正在创建`List<>`以下类：

```
public class Calculations
{
        public int Year { get; set; }
        public double Payment { get; set; }
        public double AnnualInterest { get; set; }
        public double AnnualPrincipalSplit { get; set; }
        public double NLVBalance { get; set; }
        public double apportionedValue { get; set; }
        public double OpenMarketValue { get; set; }
        public double NotionalLoan { get; set; }
        public double ResidencyFee { get; set; }
        public double BalanceOfShare { get; set; }
        public double TotalShareOwnedOutright { get; set; }
        public double TotalEquity { get; set; }
} 
```

列表包含代表投资期限的数据（例如超过 30 年，列表中将有 30 项）

我有一个名为 的变量`globalReviewPeriod`，它是一个整数，它用于定义列表中的数据应在何时聚合（例如，如果`globalReviewPeriod`是 5，投资期限为 30 年，那么数据将需要在第 5、10、15、20、25 和 30 年汇总）。

聚合本身非常简单，它只是类中包含的数据的累积值。

但是，鉴于我在上面定义的逻辑（即在审查期间），我正在为如何聚合数据的逻辑而苦苦挣扎。

任何指点将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T11:11:04.360

使用[`Where`](http://msdn.microsoft.com/en-us/library/bb549418.aspx)that 的重载允许您根据索引进行过滤：

```
var result = listCalculations
    .Where((x, index) => index % globalReviewPeriod == 0)
    .Sum(...); // Put some aggregation here. 
```

从文档中，lambda函数的使用如下：

> *谓词*
> 
> 类型：System.Func
> 
> 测试每个源元素的条件的函数；函数的第二个参数表示源元素的索引。

请注意，上面的代码将始终包含第一项，因为它的索引 0 可以被每个数字整除。如果您想使用基于 1 的索引，其中第一个元素的索引为 1，您可能希望使用`(index + 1)`而不是。`index`

```
var result = listCalculations
    .Where((x, index) => (index + 1) % globalReviewPeriod == 0)
    .Sum(...); // Put some aggregation here. 
```

# c++ - Visual C++ 如何为 Delphi 导出 x64 DLL 函数

> ID：11169017
> 
> 赞同：0
> 
> 时间：2012-06-23T11:08:50.580
> 
> 标签：c++, visual-studio, dll, 64-bit

我主要是 Delphi 开发人员，我一直在使用 DLL 包装器，它与 Logitech 的 G15 等 api DLL 接口以与键盘 LCD 屏幕进行交互。

几年前，有人制作了这个包装器以与 delphi 一起使用，基本上是一个与 Logitech lib 接口并将函数导出到 Delphi 的 DLL。它一直运行良好，但是，它只是 32 位的。

我得到了包装源并尝试将其编译为 64 位，但出了点问题。我将平台设置为 64 位，相应地更改了配置等（我认为），并将库路径指向 Logitech 64 位 .lib

导出似乎在那里，但是当我尝试使用 GetProcAddress 加载任何内容时，出现错误“找不到指定的模块”

怎么了？

![在此处输入图像描述](../Images/f8baf5162e4e7d5cfdfd4a664492bffb.png)

```
// lgLCDWrapper.DLL
//
// A Wrapper-DLL for Delphi and other compilers who cannot include the original
// lcLcd.Lib provided by Logitech. These functions are needed to communicate with
// the graphical LCD of an Logitech G15-Keyboard.
//
// Code by Olaf Stieleke, May 1st, 2007
// Compiler Visual C++ 2005 Express Edition
// Hereby dedicated to Open Source under GPL-License.
//

//Make sure to set additional Include-Path to lglcd.h (found in Logitech-SDK-Folders)
//Make sure to set additional Library-Path to lglcd.lib (found in Logitech-SDK-Folders)

#include "stdafx.h"
#include <lglcd.h>
#include "lgLcdWrapper.h"

BOOL APIENTRY DllMain( HMODULE hModule, DWORD ul_reason_for_call,LPVOID lpReserved)
{
    return TRUE;
}

DWORD _cdecl lgLcdInitWrap(void)
{
    return lgLcdInit();
}

DWORD _cdecl lgLcdDeInitWrap(void)
{
    return lgLcdDeInit();
}
DWORD _cdecl lgLcdConnectAWrap(lgLcdConnectContextA *ctx)
{
    return lgLcdConnectA(ctx);
}
DWORD _cdecl lgLcdDisconnectWrap(int connection)
{
    return lgLcdDisconnect(connection);
}
DWORD _cdecl lgLcdEnumerateWrap(int connection, int index, lgLcdDeviceDesc *description)
{
    return lgLcdEnumerate(connection,index,description);
}
DWORD _cdecl lgLcdOpenWrap(lgLcdOpenContext *ctx)
{
    return lgLcdOpen(ctx);
}
DWORD _cdecl lgLcdCloseWrap(int device)
{
    return lgLcdClose(device);
}
DWORD _cdecl lgLcdReadSoftButtonsWrap(int device, DWORD *buttons)
{
    return lgLcdReadSoftButtons(device,buttons);
}
DWORD _cdecl lgLcdUpdateBitmapWrap(int device, lgLcdBitmapHeader *bitmap, DWORD priority)
{
    return lgLcdUpdateBitmap(device,bitmap,priority);
}
DWORD _cdecl lgLcdSetAsLCDForegroundAppWrap(int device, int foregroundYesNoFlag)
{
    return lgLcdSetAsLCDForegroundApp(device,foregroundYesNoFlag);
} 
```

包含文件

```
extern "C" __declspec(dllexport) DWORD  _cdecl lgLcdInitWrap(void);
extern "C" __declspec(dllexport) DWORD  _cdecl lgLcdDeInitWrap(void);
extern "C" __declspec(dllexport) DWORD  _cdecl lgLcdConnectAWrap(lgLcdConnectContextA *ctx);
extern "C" __declspec(dllexport) DWORD  _cdecl lgLcdDisconnectWrap(int connection);
extern "C" __declspec(dllexport) DWORD  _cdecl lgLcdEnumerateWrap(int connection, int index, lgLcdDeviceDesc *description);
extern "C" __declspec(dllexport) DWORD  _cdecl lgLcdOpenWrap(lgLcdOpenContext *ctx);
extern "C" __declspec(dllexport) DWORD  _cdecl lgLcdCloseWrap(int device);
extern "C" __declspec(dllexport) DWORD  _cdecl lgLcdReadSoftButtonsWrap(int device, DWORD *buttons);
extern "C" __declspec(dllexport) DWORD  _cdecl lgLcdUpdateBitmapWrap(int device, lgLcdBitmapHeader *bitmap, DWORD priority);
extern "C" __declspec(dllexport) DWORD  _cdecl lgLcdSetAsLCDForegroundAppWrap(int device, int foregroundYesNoFlag); 
```

stdafx.cpp

```
 #include "stdafx.h"
    // stdafx.h : Includedatei für Standardsystem-Includedateien
// oder häufig verwendete projektspezifische Includedateien,
// die nur in unregelmäßigen Abständen geändert werden.
//

#pragma once

// Ändern Sie folgende Definitionen für Plattformen, die älter als die unten angegebenen sind.
// In MSDN finden Sie die neuesten Informationen über die entsprechenden Werte für die unterschiedlichen Plattformen.
#ifndef WINVER              // Lassen Sie die Verwendung spezifischer Features von Windows XP oder später zu.
#define WINVER 0x0501       // Ändern Sie dies in den geeigneten Wert für andere Versionen von Windows.
#endif

#ifndef _WIN32_WINNT        // Lassen Sie die Verwendung spezifischer Features von Windows XP oder später zu.                   
#define _WIN32_WINNT 0x0501 // Ändern Sie dies in den geeigneten Wert für andere Versionen von Windows.
#endif                      

#ifndef _WIN32_WINDOWS      // Lassen Sie die Verwendung spezifischer Features von Windows 98 oder später zu.
#define _WIN32_WINDOWS 0x0410 // Ändern Sie dies in den geeigneten Wert für Windows Me oder höher.
#endif

#ifndef _WIN32_IE           // Lassen Sie die Verwendung spezifischer Features von IE 6.0 oder später zu.
#define _WIN32_IE 0x0600    // Ändern Sie dies in den geeigneten Wert für andere Versionen von IE.
#endif

#define WIN32_LEAN_AND_MEAN     // Selten verwendete Teile der Windows-Header nicht einbinden.
// Windows-Headerdateien:
#include <windows.h> 
```

德尔福代码：

```
DLLHandle := LoadLibrary('lgLcdWrapperX64.dll');
  if DLLHandle = 0 then Exit(False);

  @lgLcdInit       := GetProcAddress(dllHandle, 'lgLcdInitWrap');
  if (not Assigned(lgLcdInit)) then ShowMessage(SysErrorMessage(GetLastError)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:49:43.810

> 我收到一个错误“找不到指定的模块

这不是 GetProcAddress 产生的错误，您可以从 LoadLibrary() 中获得该错误。错误代码 126。GetProcAddress 失败并出现错误 127，“找不到指定的过程”。所以检查你的错误处理代码，它可能有一个错误。并三重检查您是否使用了正确的 DLL 路径名以及相关 DLL 是否已正确部署，例如 CRT dll。

唯一其他相关的花絮是应用于 64 位 DLL 中导出函数的名称修饰。您的客户端代码之前肯定使用过类似“_lgLcdInitWrap”的名称，前导下划线表示 __cdecl 调用约定有效。幸运的是，64 位代码与调用约定无关，只有一个。因此，出口不再装饰，它只是简单的“lgLcdInitWrap”。使用 dumpbin.exe /exports 或depends.exe 之类的工具，您肯定会看到一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:38:13.253

发现问题。当我在 VS2010 中添加 x64 平台时，它设置了 2 个导致整个问题的设置：

项目选项 > 链接器 > 高级 > - 随机基地址 - 数据执行保护 (DEP)

禁用这两个设置可以修复它。

![在此处输入图像描述](../Images/d66adc302fdfc5a2d42ea8d4fd319c96.png)

# java - 如何使用 astyanax 在 Cassandra 中设置 GCGraceSeconds？

> ID：11169022
> 
> 赞同：4
> 
> 时间：2012-06-23T11:09:12.483
> 
> 标签：java, cassandra, astyanax

我需要将 GCGraceSeconds 设置为 0，因为我只有一个节点，但我找不到可以为此设置值的位置。是否可以从 astyanax 设置或在某些设置文件中设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T14:24:29.207

在最新版本的 cassandra 中，您实际上将`gc_grace_seconds`每个列族设置为架构的一部分。据我所知，Astyanax 目前不支持设置该属性。类中没有对应的方法`ColumnFamilyDefinition`。

[https://github.com/Netflix/astyanax/blob/master/src/main/java/com/netflix/astyanax/ddl/ColumnFamilyDefinition.java](https://github.com/Netflix/astyanax/blob/master/src/main/java/com/netflix/astyanax/ddl/ColumnFamilyDefinition.java)

如果您愿意，可以使用 cassandra-cli 工具在任何现有列族上设置属性。

此外，添加对 Astyanax 的支持似乎并不难。我相信他们会接受拉取请求。

**更新**

Astyanax（暂时）现在支持此设置。请参阅[ColumnFamilyDefinition](https://github.com/Netflix/astyanax/blob/d174b9a111ead1b3cd9c9c498d36447e1e02be95/astyanax-cassandra/src/main/java/com/netflix/astyanax/ddl/ColumnFamilyDefinition.java)。这可以在 astyanax 列族创建中设置，如下所示：

```
OperationResult<SchemaChangeResult> opres = keyspace.createColumnFamily(cf, ImmutableMap.<String, Object> builder()
    .put("comparator", "UTF8Type")
    .put("key_validation_class", "UTF8Type")
    .put("gc_grace_seconds", 60*60*24) // gc grace seconds of one day
    .build()
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T13:30:53.290

这是在*conf/cassandra.yaml*（Cassandra 配置文件）中完成的

0.7 之前的版本：*conf/storage-conf.xml*

请记住：“*将此设置为一个足够大的值，以便您确信删除标记将在经过这么多秒时传播到所有副本，即使面对硬件故障也是如此。默认值是十天。* ”

默认值为：“ **864000** ”秒或**10**天。

# magento - 处理（接收）外部付款——如何告诉 Magento 已收到付款

> ID：11169024
> 
> 赞同：1
> 
> 时间：2012-06-23T11:09:38.447
> 
> 标签：magento, payment

我有一些通过蜗牛邮件收到的支票或汇票付款，最近我注意到，即使我已经运送了这些订单并且它们在后端显示为“完整”，仪表板统计数据并未反映这些付款被记录。

我找不到手动告诉 Magento 使用任意非自动付款方式（无论是支票、汇票、现金、自动付款方式之外的贝宝等）在后端收到付款的方法，所以我通常只是发表评论，然后“发货”，但我希望更新统计数据（终生销售额，最后金额图）。

我用谷歌搜索没有成功，只是不断地得到相同的“如何接受支票”维基文章。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:15:38.413

哦，我想通了。您只需创建发票。

# perl - LWP 请求中没有内容

> ID：11169033
> 
> 赞同：4
> 
> 时间：2012-06-23T11:10:42.330
> 
> 标签：perl, lwp

**已解决：我通过安装 HTML::HeadParser 修复了它。但我仍然不知道为什么它突然停止工作。**

我注意到一些以前有效的 LWP 请求停止工作，所以我制作了一个小脚本来检查原因。出于某种原因，我没有从大多数网站获得任何内容（目前仅有的两个有效的是 icanhazip.com 和 gdata.youtube.com api）。我得到一个状态 200 并且我得到了标题的正确 Content-Lenght。我已经尝试在 curl 和 wget 中毫无问题地获取页面。如果我使用 tcpdump 检查请求，我确实会得到包含所有正确信息的回复。我已经尝试使用 LWP::UserAgent 和 LWP::Simple 获得相同的结果。

```
#!/usr/bin/perl
use warnings;
use strict;
use LWP::UserAgent;

my $agent = LWP::UserAgent->new;
$agent->agent("Mozilla/5.0");

my $req = HTTP::Request->new(GET => 'http://stackoverflow.com');
my $res = $agent->request($req);

print $res->status_line, "\n";
print $res->header("Content-Length"), "\n";
print $res->content, "\n"; 
```

使用 DumpLex 转储 $res 会得到以下结果：

```
$HTTP_Response1 = bless( {
                    _content => '',
                    _headers => bless( {
                                  "cache-control"
                                               => 'public, max-age=15',
                                  "client-aborted"
                                               => 'die',
                                  "client-date"
                                               => 'Sat, 23 Jun 2012 15:07:23 GMT',
                                  "client-peer"
                                               => '64.34.119.12:80',
                                  "client-response-num"
                                               => 1,
                                  connection   => 'close',
                                  "content-length"
                                               => 211684,
                                  "content-type"
                                               => 'text/html; charset=utf-8',
                                  date         => 'Sat, 23 Jun 2012 15:07:22 ',
                                  expires      => 'Sat, 23 Jun 2012 15:07:38 ',
                                  "last-modified"
                                               => 'Sat, 23 Jun 2012 15:06:38 GMT ',
                                  vary         => '*',
                                  "x-died"     => 'Can\'t locate HTML/HeadParser.pm in @INC (@INC contains: /usr/lib/perl5/site_perl /usr/share/perl5/site_perl /usr/lib/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl /usr/share/perl5/core_perl .) at /usr/share/perl5/site_perl/LWP/UserAgent.pm line 663.'
                                }, 'HTTP::Headers' ),
                    _msg     => 'OK',
                    _protocol
                             => 'HTTP/1.1',
                    _rc      => 200,
                    _request => bless( {
                                  _content => '',
                                  _headers => bless( {
                                                "content-type" => 'application/html',
                                                "user-agent"   => 'Mozilla/5.0'
                                              }, 'HTTP::Headers' ),
                                  _method  => 'GET',
                                  _uri     => \do { my $v = 'http://stackoverflow.com/' },
                                  _uri_canonical
                                           => 'V: $HTTP_Response1->{_request}{_uri}'
                                }, 'HTTP::Request' ),
                    default_add_content
                             => 1
                  }, 'HTTP::Response' );
$HTTP_Response1->{_request}{_uri_canonical} = $HTTP_Response1->{_request}{_uri};
bless( $HTTP_Response1->{_request}{_uri}, 'URI::http' ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:43:28.257

在这种情况下，当一个模块的行为似乎超出其记录的功能时，*强制*重新安装将很有用

```
cpan -f -i LWP::UserAgent 
```

我建议你现在就这样做，以防你的模块库出现其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:37:06.743

您在问题中的脚本工作得很好。我敢打赌你对图书馆有一些问题。

我建议你跑

```
perl -MCPAN -e 'install LWP::UserAgent' 
```

以确保您的库是最新的。

# android - Android XML 转义“@”符号

> ID：11169051
> 
> 赞同：11
> 
> 时间：2012-06-23T11:14:01.537
> 
> 标签：android, xml, android-layout

您如何`@`在 Android XML 文件中使用 as 文本，因为它具有特殊含义？我有一个`TextView`它将简单地保存文本`@`

我试过：

```
<TextView
    android:id="@+id/at_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/account_name"
    android:gravity="center_horizontal"
    android:padding="3dip"
    android:text="@" /> 
```

这当然不适用于错误

> 错误：错误：未指定资源类型（在“文本”处，值为“@”）。

所以我尝试将它指向这样的条目`strings.xml`： `<string name="at">@</string>`这显示了错误：

> 错误：错误：未指定资源类型（在“at”处，值为“@”）。

那么如何`@`作为 TextView 的文本转义呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-23T11:15:16.383

用这种方式........

```
 <string name="at">\@</string> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-23T11:16:33.287

```
android:text="\@"
              ^ 
```

**代替**

```
android:text="@" 
```

# git - 协作工作流程的 Git 指南/教程

> ID：11169052
> 
> 赞同：0
> 
> 时间：2012-06-23T11:14:13.150
> 
> 标签：git

1.  我正在尝试做的事情：

我和两个朋友一起做一个大学项目，他们对代码做了一些修改。我还对代码进行了很多更改，其中大部分是我想保留的。

我是 git 新手，不知道从哪里开始。我的朋友建议我使用：

```
git pull origin 
```

当我这样做时，我得到：

```
error: Your local changes to the following files would be overwritten by merge:
Please, commit your changes or stash them before you can merge 
```

我在 stackoverflow 的某个地方读到：[你如何 git fetch 然后合并？“错误：您对以下文件的本地更改将被合并覆盖”](https://stackoverflow.com/questions/9588111/how-do-you-git-fetch-then-merge-error-your-local-changes-to-the-following-fil)

如果我不提交对本地存储库的更改，它们会丢失吗？

1.  你如何在本地提交？
2.  我如何合并更改（有没有一种我可以使用的方法无法比较）？
3.  如何上传更改？

谢谢

这就是它现在的样子：

```
Arthur Wulf@SUPERWOLF-PC /c/Current Project/study-wise (master|MERGING)
$ git pull origin master
M       .pydevproject
U       src/app.yaml
M       src/getters/__init__.pyc
M       src/index.yaml
M       src/model/ClassM.pyc
M       src/model/CourseM.py
M       src/model/CourseM.pyc
M       src/model/GeneralM.pyc
M       src/model/LectureM.py
M       src/model/LectureM.pyc
M       src/model/PostClassM.py
A       src/model/PostClassM.pyc
M       src/model/QuestionM.py
M       src/model/QuestionM.pyc
M       src/model/StudentM.py
M       src/model/StudentM.pyc
M       src/model/TopicM.py
M       src/model/TopicM.pyc
M       src/model/__init__.pyc
M       src/setters/__init__.pyc
A       src/setters/setQuestionStats.py
D       src/setters/setRemoveOldData.py
A       src/setters/setStartNewClass.py
A       src/setters/setStudentAnswer.py
D       src/setters/setTopicChanged.py
A       src/setters/setUpdateTopicStats.py
M       src/view/allCourses.html
M       src/view/lecture.html
U       src/view/prof.html
M       src/view/question.html
Pull is not possible because you have unmerged files.
Please, fix them up in the work tree, and then use 'git add/rm <file>'
as appropriate to mark resolution, or use 'git commit -a'. 
```

我不明白的是，我如何将本地文件与在线原始存储库端的文件进行比较并合并它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T11:34:45.943

正确的做法是在本地提交所有更改，然后再次尝试拉取。该错误是为了保护您不会丢失尚未提交的本地更改。创建提交（committing）就像创建代码的新快照，然后安全地记录该状态。

要回答您的问题：

> 1）你如何在本地提交？

看看输出`git status`。如果有任何列为“未跟踪文件”的文件要保留在 git 中，请使用`git add <filename>...`表示您希望它们在下一次提交中。然后查看列为“更改未暂存以进行提交”列出的文件 - 这些文件已经在您更改的存储库中。您可以再次`git add <filename>...`对其中的每一个进行指示，以表明您在准备的提交中确切想要该文件的那个版本。（如果您对文件进行进一步修改，则必须`git add`再次对该文件进行暂存以提交文件的新内容。）

最后，您应该运行`git commit`. 这将打开一个编辑器，您应该在其中输入有用的提交消息 - 当您保存该文件并退出编辑器时，应该创建您的提交。然后你可以运行`git pull origin master`，就像你最初想要的那样。

（作为一种快捷方式，如果你这样做`git commit -a`了，对已经在存储库中的文件所做的所有更改都将暂存以进行提交，而无需您进行`git add`。）

> 2）我如何合并更改（有没有一种我可以使用的方法无法比较）？

您尝试的`git pull origin master`命令实际上做了两件事：

1.  `master`从名为的远程存储库中获取分支`origin`
2.  将该获取的分支的状态合并到您当前的分支中。

git 擅长避免抱怨虚假冲突，但如果您确实需要帮助处理它们，请查看`git mergetool`.

> 3) 我如何上传更改？

你可以用`git push origin master`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:15:58.737

有一本很棒的在线书籍可以解释 git：[Pro Git](http://git-scm.com/book)

所以我更喜欢教钓鱼而不是给鱼

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T11:30:30.637

```
git pull origin 
```

`pull`( `fetch`+ `merge`) 从远程（源）检索最新的并将其与您的代码合并。如果您工作的分支有未提交的更改，则无法合并新代码。您可以使用以下命令检查分支状态：

```
git status 
```

在本地提交，通常我会这样做

```
git add .                          //stage all files
git commit -a -m "local commit"    //commit all staged 
```

这是对本地仓库的本地提交。然后您可以`pull`尝试将您最近的提交与远程更改合并。

从某种意义上说，这`pull`就像一个`commit`事件`pull`被记录在回购的历史中。它会尝试合并分支中文件的更改（我很少看到覆盖），但就像我说的那样，就像 a 一样`commit`，事件被记录下来，你可以恢复。

要上传更改，您可以执行 a `push`，其中`remote`要推送的服务器的别名存储在您的 GIT 中，并且`branch`是要推送的分支。

```
git push [remote] [branch] 
```

看到您已经与[@zerkms](https://stackoverflow.com/users/251311/zerkms)与 GIT 客户端进行了讨论，我个人使用[msysGit](http://msysgit.github.com/)，它是适用于 Windows 的 GIT。它有一个 GUI 和一个命令行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T18:54:19.487

当你感觉自己的方式时，你应该避免`git pull`，因为它同时做 a `fetch`（你想要的）和 a `merge`（你可能不想要的）。

您将需要与您的朋友讨论最适合您的工作流程 - 查看 git 教程 [`git help tutorial`适用于 Windows 的 Git] 和 gitworkflows [ `git help workflows`]，当然还有[Nvie 的成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)（带图片，尽管它可能比您需要的更高级）。

关键是避免使用公共分支（“our_work”）进行开发黑客攻击，因为单独的“my_branch”、“his_branch”和“her_branch”等会给你们每个人所需的自由，同时你还可以有“feature_1”等的分支，当功能以协调的方式成熟时，您可以作为一个团队使用。

另外，要注意区分自动推送的分支和自动获取的分支。他们可能不是你想的那样。

# javascript - 使用 jQuery.ajax 使用 google places api 添加一个地方

> ID：11169054
> 
> 赞同：-1
> 
> 时间：2012-06-23T11:14:31.850
> 
> 标签：javascript, jquery, html, ajax, google-places-api

当我尝试向 Google 地方信息添加地点时，出现错误：

```
{"readyState":0,"responseText":"","status":0,"statusText":"error"} 
```

这是我的代码：

HTML：

```
<form id="addShopForm">

          ...

        <a type="submit" id="submitshop">Submit</a>

</form> 
```

查询：

```
 $('#submitshop').click(function(){
 $.ajax({
                    type: "POST",
                    url: "https://maps.googleapis.com/maps/api/place/add/json?sensor=true&key=asdEFasdBaasdasdasdMrN2ST5tRS5c",
                    crossDomain: true,
                    data: {
                       "location": {
                        "lat": 68.7425471,
                        "lng": 9.1370879
                       },
                       "accuracy": 50,
                       "name": "Test Shop!",
                       "language": "de"
                    },
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        alert(JSON.stringify(msg));
                    },
                    error: function (errormessage) {
                        alert(JSON.stringify(errormessage));
                        //{"readyState":0,"responseText":"","status":0,"statusText":"error"}
                    }
                });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T15:06:25.030

我也一直在努力让它发挥作用。执行您的代码后，我在我的 chrome 调试器中发现了这个错误：

```
Failed to load resource: the server responded with a status of 405 (Method Not Allowed)
https://maps.googleapis.com/maps/api/place/add/json?sensor=false&key={Key}
Failed to load resource: Origin http://localhost:8888 is not allowed by Access-Control Allow-Origin. 
https://maps.googleapis.com/maps/api/place/add/json?sensor=false&{key}
XMLHttpRequest cannot load https://maps.googleapis.com/maps/api/place/add/json?sensor=false&key={Key}. 
Origin http://localhost:8888 is not allowed by Access-Control-Allow-Origin. 
```

因此，即使您在 ajax 对象中指定了它，google maps places API 似乎也不支持跨域。

幸运的是，有一个[客户端 javascript 库](https://developers.google.com/maps/documentation/javascript/places)。不幸的是，它不支持添加地点或事件:(。

我希望 google 将来能增加对 places API 的支持。

# blackberry - 在黑莓应用程序的创建目录中抛出“FileIOException：Not a directory”

> ID：11169063
> 
> 赞同：3
> 
> 时间：2012-06-23T11:15:29.117
> 
> 标签：blackberry, file-io, create-directory

我想创建我的应用程序目录来保存我的配置文件。但黑莓模拟器在创建目录时抛出异常。我已经尝试了以下代码。

```
try {
FileConnection myAppDir = (FileConnection) Connector.open("file:///store/home/user/myAppDir", Connector.READ_WRITE);
    if (!myAppDir.exists()){
        myAppDir.mkdir(); // Exception throw here
    }
} catch (Exception e) {
e.printStackTrace();
} 
```

异常抛出

```
net.rim.device.api.io.file.FileIOException: Not a directory 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T11:25:06.027

您是否尝试在路径末尾添加一个正斜杠，以便连接器知道它是一个目录？

```
try {
FileConnection myAppDir = (FileConnection) Connector.open("file:///store/home/user/myAppDir/", Connector.READ_WRITE);
    if (!myAppDir.exists()){
        myAppDir.mkdir(); // Exception throw here
    }
} catch (Exception e) {
e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T12:11:54.173

你确定你正在测试的设备/模拟器有内部存储吗？您应该使用[FileSystemRegistry](http://www.blackberry.com/developers/docs/7.0.0api/javax/microedition/io/file/FileSystemRegistry.html)来获取可用的文件系统根，例如从 API 文档：

```
 Enumeration rootEnum = FileSystemRegistry.listRoots();
   while (rootEnum.hasMoreElements()) {
      String root = (String) rootEnum.nextElement();
      FileConnection fc = (FileConnection) Connector.open("file:///" + root);
      System.out.println(fc.availableSize());
   } 
```

# php - 选择后的 JSON 字符串

> ID：11169067
> 
> 赞同：0
> 
> 时间：2012-06-23T11:16:23.143
> 
> 标签：php, jquery, json, .post

mysql 选择后如何在 JSON 中创建字符串：

```
$ritorno = '{"Prodotto":'.$riga['Prodotto'].',"Prezzo":'.$riga['Prezzo'].'}' 
```

并返回：

```
{"Prezzo":24.00,"Prodotto":Chiavetta Usb Moskeyto 8 gb} 
```

但我无法在我的输入字段中插入

**jQuery**

```
function chiama(elemento){
      var $code_bar = $("#code_bar").val();

      $.post("return.php", 
            { code_bar: $code_bar },
      function(data) {
            $("#Prodotto").val(data.Prodotto);
            $("#Prezzo").val(data.Prezzo);
    }

      , "json");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:18:54.300

您可以使用[json_encode](http://php.net/manual/en/function.json-encode.php)将 php 数组转换为 json 格式的字符串。

手册中的示例：

```
<?php
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);

echo json_encode($arr);
// prints {"a":1,"b":2,"c":3,"d":4,"e":5}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:25:10.387

如果您在该数组上没有任何其他元素，`$riga`那么您可以这样做

```
echo json_encode($riga) 
```

如果您在该数组上有其他元素并且只想将这两个元素进行 json 编码，那么您可以使用

```
echo json_encode(array(
    "Prodotto" => $riga['Prodotto'],
    "Prezzo" => $riga['Prezzo']

   )); 
```

你的不工作的原因是因为你没有 有效`string value`的`quotes``JSON`

你必须这样做

```
$ritorno = '{"Prodotto":"'.$riga['Prodotto'].'","Prezzo":'.$riga['Prezzo'].'}'; 
```

如果你坚持走自己的路。

但是使用`json_encode`效果更好。

**示例代码：** [http ://codepad.org/r6D7z9TF](http://codepad.org/r6D7z9TF)

# php - 创建调整大小的图像缓存但防止滥用

> ID：11169069
> 
> 赞同：2
> 
> 时间：2012-06-23T11:16:36.860
> 
> 标签：php, image, .htaccess, caching

好的，所以我对如何提供和缓存我的图像有了一个想法。我不知道这是否是正确的做法，但如果是，我想知道如何防止滥用。

情况：

**索引.php**

```
<img src="images/cache/200x150-picture_001.jpg" /> 
```

**图像/缓存/.htaccess**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ images/image.php?f=$1 [L] 
```

上面检查图像是否存在，如果不存在则重写为 image.php

**image.php** 伪代码

> 从文件名获取高度和宽度
> 
> 调整图像大小并将图像保存到缓存文件夹
> 
> 使用 content-type 和 readfile 提供图像。

通过这种方式，我试图通过 readfiles 减少 HTTP 请求和 PHP 负载。如果存在，浏览器将获取图像/jpeg，否则将生成。

最终，所有图像都将被缓存并以正确的高度和宽度提供服务，因此浏览器不会下载过大的图像。

唯一的问题..如果您将图像网址更改为不同的尺寸，您可以填满服务器。

我做得对吗，正确的方法是什么。有没有机会阻止这种情况发生？

我知道缓存的整个概念已经被提炼了一百万次，请赐教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:50:12.177

不确定我的答案是否为时已晚，但你为什么不简单地使用[SLIR（Smart Lencioni Image Resizer）](http://code.google.com/p/smart-lencioni-image-resizer/)呢？它可以做任何您需要的事情（包括缓存和缓存管理），因此您只需将其放入并使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:23:02.043

一些方法：

*   维护一个允许分辨率的数组，并检查请求的分辨率是否在该数组中。缺点：您无法在不编辑数组的情况下快速添加分辨率。

*   如果这是在 CMS 上下文中：仅允许经过身份验证的用户创建*新*图像（尚未在缓存中）；否则拒绝该请求。当经过身份验证的用户在 CMS 中添加图像时，他们会预览它，然后生成调整大小的图像。缺点：并不完全容易实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T11:24:55.350

缓存显然是一个重要的问题 - 您的解决方案似乎合理，但确实容易受到有意和无意的拒绝服务攻击。它也没有解决图像更改时会发生什么 - 如何从缓存中删除所有调整大小的图像？它没有设置缓存标头以允许“下游”缓存。它没有处理同时刷新整个缓存的风险，需要在 HTTP 请求的上下文中重新生成所有图像，这可能是主要的性能消耗。

[您是否看过诸如Apache 的缓存模块之](http://httpd.apache.org/docs/2.0/mod/mod_cache.html)类的“现成”解决方案？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T11:49:55.247

我只是做：

```
<img src="/thumbnail.php?thumb=mybigpicture.ext" ... /> 
```

这就是我的做法。请注意，此实现会缩放图像，无论它们是宽于高还是反之亦然，并且与大多数 PHP 尝试不同，它在缩放方面做得不错。

```
<?php

function thumb_image($request = "") {
  $cfgthumb['folder'] = "/images/cache";
  $cfgthumb['height'] = 150;
  $cfgthumb['width'] = 200;
  $cfgthumb['error'] = "/images/error.jpg";
  $cfgthumb['default'] = "/images/notfound.jpg";

  $thumb = $cfgthumb['folder'] . "/" . md5($request);
  header("Content-Type: image/jpeg");
  if (is_readable($thumb)) echo file_get_contents($thumb);
  elseif (is_readable($request)) {
    $extension = strtolower(end(explode(".", $request)));
    switch ($extension) {
    case "gif":
      $simage = imagecreatefromgif($request);
      break;
    case "jpeg":
    case "jpg":
      $simage = imagecreatefromjpeg($request);
      break;
    case "png":
      $simage = imagecreatefrompng($request);
      break;
    }
    if ($simage) {
      $simage_width = imagesx($simage);
      $simage_height = imagesy($simage);
      if (($simage_width > $cfgthumb['width']) || ($simage_height > $cfgthumb['height'])) {
        if ($simage_width > $simage_height) {
          $dimage_width = $cfgthumb['width'];
          $dimage_height = floor($simage_height * ($cfgthumb['width'] / $simage_width));
        } else {
          $dimage_width = floor($simage_width * ($cfgthumb['height'] / $simage_height));
          $dimage_height = $cfgthumb['height'];
        }
      } else {
        $dimage_width = $simage_width;
        $dimage_height = $simage_height;
      }
      $dimage = imagecreatetruecolor($dimage_width, $dimage_height);
      imagegammacorrect($simage, 2.2, 1.0);
      imagecopyresampled($dimage, $simage, 0, 0, 0, 0, $dimage_width, $dimage_height, $simage_width, $simage_height);
      imagegammacorrect($dimage, 1.0, 2.2);
      imagejpeg($dimage, $thumb, 100);
      imagejpeg($dimage, NULL, 100);
      imagedestroy($simage);
      imagedestroy($dimage);
    } else echo file_get_contents($cfgthumb['error']);
  } else echo file_get_contents($cfgthumb['default']);
}

?> 
```

# android - Android视图不刷新

> ID：11169071
> 
> 赞同：1
> 
> 时间：2012-06-23T11:16:56.233
> 
> 标签：android, android-layout

我曾尝试使用`invalidate()`来刷新我的视图，但它不起作用。我知道还有另一种使用`draw(Canvas canvas)`.

有人可以向我解释如何以及为什么使用 draw 方法吗？什么是画布？（这是我想要重绘的视图吗？）

这是如何使用它的一些示例代码：

```
 if(pageNumber == 1)
    {
        if(pageCount == --lastPageCount)
        {
            page2Layout.setVisibility(View.GONE);
            page1Layout.setVisibility(View.VISIBLE);
        }
        if(created1 == false)
        {
            help.setOrientation(LinearLayout.HORIZONTAL);
            help.setLayoutParams(params);

            helpText.setLayoutParams(params);
            helpText.setText("TEST!\n\n" + 
                    "test\n" +
                    "Test");

            help.addView(helpText);
            page1Layout.addView(help);
            newSheetLayoutV.addView(page1Layout);
            created1 = true;
        }
    } 
```

此代码还有另一部分/部分无法正常工作（这就是我需要使用刷新的原因）。

```
 else if(pageNumber == 4)
    {
        if(pageCount == ++lastPageCount)
        {
            page3Layout.setVisibility(View.GONE);
            page4Layout.setVisibility(View.VISIBLE);
        }
        else if (pageCount == --lastPageCount)
        {
            page5Layout.setVisibility(View.GONE);
            page4Layout.setVisibility(View.VISIBLE);
        }

        if(created4 == false)
        {
            LinearLayout horizontalPageLayout = new LinearLayout(this);
            horizontalPageLayout.setOrientation(LinearLayout.HORIZONTAL);
            horizontalPageLayout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

            TextView testText = new TextView(this);
            testText.setLayoutParams(params);
            testText.setText("Test!");

            page4Layout.addView(testText);

            newSheetLayoutV.addView(page4Layout);

            created4 = true;
        }
    } 
```

基本上代码工作正常，除了当我删除视图时刷新`page1Layout.setVisibility(View.GONE);`，并向布局添加一个新视图！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:29:13.737

修复，添加`visibility(View.GONE);`和 addView 到布局的创建，然后在需要时使布局可见。

# ruby - 红宝石平衡指数 - 注入的奇怪用法

> ID：11169073
> 
> 赞同：0
> 
> 时间：2012-06-23T11:17:28.623
> 
> 标签：ruby, inject, parallel-assignment

我今天花了一些时间来解决均衡指数问题（[在此处](http://blog.codility.com/2011/03/solutions-for-task-equi.html)描述）

在编写了我自己的解决方案（它在大数字时表现不佳）后，我决定找到一个完美的分数。我发现了这个（[其中 Codility 得分为 100/100](http://codility.com/demo/results/demoRD26JU-JYQ/)）：

```
 def equi(a)
    left, right = 0, a.inject(0, &:+)
    indices = []
    a.each_with_index do |val, i|
      right -= val

      indices << i if right == left

      left += val
    end
    indices
  end 
```

我不明白的是方法顶部的并行分配和注入的使用。有谁能够描述这是在做什么？

非常感谢！斯图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:27:23.757

它将 0`left`和`a`的元素之和分配给`right`。0 参数在那里，因为否则会返回一个空数组`nil`。用于求和的简写是[Symbol#to_proc](http://ruby-doc.org/core-1.9.3/Symbol.html#method-i-to_proc)并且是不必要的，因为`inject`直接将符号作为其参数 - `inject(0, :+)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:25:12.067

它只是数组的总和：

```
>> ar = (1..10).to_a
=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
>> ar.inject(0, &:+)
=> 55 
# or a shorter version
>> ar.inject(&:+)
=> 55 
```

您真的应该阅读有关该方法的[文档。](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)`Enumerable#inject`它解释了一切。

# android - Libgdx 空指针异常

> ID：11169078
> 
> 赞同：1
> 
> 时间：2012-06-23T11:18:36.633
> 
> 标签：android, nullpointerexception, libgdx

过去 3 个月我没有使用 libgdx，现在我尝试制作一个简单的游戏，但是当我导入 libgdx jar 并在我的手机（Android）上运行该应用程序时，它崩溃了。我在网上发现 ADT 版本处理所有库。因此，我将 Libgdx jar 放在 libs 文件夹中，但应用程序仍然崩溃。

日志猫：

> 未捕获的处理程序：线程主因未捕获的异常而退出
> 
> java.lang.RuntimeException：无法恢复活动 {com.class.path/com.class.path.ExampleActivity}：java.lang.NullPointerException

在此之后，我在 android 类中有 10 个引用（例如：在 android.app.ActivityThread.main ...），比我有这个：

> 引起：com.badlogic.gdx.backends.android.AndroidApplication.onResume(AndroidApplication.java:223) 处的 java.lang.NullPointerException

在 libgdx 源代码的第 223 行，我发现了这个：

> ((AndroidInput)getInput()).registerSensorListeners();

示例活动：

> 公共类 ExampleActivity 扩展 AndroidApplication {
> 
> ```
> @Override
> public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     initialize(new Game(), false);
> } 
> ```
> 
> }

游戏：公共类游戏实现ApplicationListener {

```
@Override
public void create() {

}

@Override
public void dispose() {
    // TODO Auto-generated method stub

}

@Override
public void pause() {
    // TODO Auto-generated method stub

}

@Override
public void render() {
}

@Override
public void resize(int arg0, int arg1) {
    // TODO Auto-generated method stub

}

@Override
public void resume() {
    // TODO Auto-generated method stub

} 
```

}

PS：对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-25T09:01:35.280

我也碰巧遇到了这个问题。并通过使用基于[ModelPreiviewApp的代码修复它](https://github.com/ASneakyFox/libgdx-fbxconv-gui/blob/3bc6c0a3efc47c757e24090f9a173c4ed13d830a/core/src/asf/modelpreview/ModelPreviewApp.java)

```
private boolean backFaceCulling = true;
private boolean alphaBlending = false;
private float alphaTest = -1;

public void setAlphaBlending(ModelInstance modelInstance, boolean alphaBlendingEnabled){
    if(modelInstance != null){
        if(alphaBlendingEnabled){
            for (Material mat : modelInstance.materials) {
                mat.set(new BlendingAttribute(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA));
            }
        }else{
            for (Material mat : modelInstance.materials) {
                mat.remove(BlendingAttribute.Type);
            }
        }
    }
}

public void setAlphaTest(ModelInstance modelInstance, float alphaTestValue){
    if(modelInstance != null){
        if(alphaTestValue>=0){
            for (Material mat : modelInstance.materials) {
                mat.set(new FloatAttribute(FloatAttribute.AlphaTest, alphaTestValue));
            }
        }else{
            for (Material mat : modelInstance.materials) {
                mat.remove(FloatAttribute.AlphaTest);
            }
        }
    }
}

public void setBackFaceCulling(ModelInstance modelInstance, boolean backFaceCullinEnabled) {

    if (modelInstance != null) {
        if (backFaceCullinEnabled) {
            for (Material mat : modelInstance.materials) {
                mat.remove(IntAttribute.CullFace);
            }
        } else {
            for (Material mat : modelInstance.materials) {
                mat.set(new IntAttribute(IntAttribute.CullFace, 0));
            }
        }
    }
}

public void onModelLoaded(ModelInstance modelInstance) {
    ...
    setBackFaceCulling(modelInstance, true);
    setAlphaBlending(modelInstance, false);
    setAlphaTest(modelInstance, -1);
} 
```

# jquery-mobile - jQuery mobile 中的图像格式

> ID：11169082
> 
> 赞同：0
> 
> 时间：2012-06-23T11:18:47.760
> 
> 标签：jquery-mobile

我正在使用 jQuery mobile 创建以下页面。

[http://ielts.progmic.com/iOS/college.php?title=Royal+College+Of+Arts](http://ielts.progmic.com/iOS/college.php?title=Royal+College+Of+Arts)

在上面的链接中......当我在 Safari for iOS 中打开它时，图像不在中心。就像标题和内容位于中心一样，填充为 15 像素。我希望图像也位于中心，每端有 15px 的空间。

图像宽度为 610 像素，iPod Touch 屏幕宽度为 640 像素。内边距设置为 15 像素。出现静止图像，因为它粘在右侧。

这是我在 Safari for iOS 中得到的输出。

![最佳](../Images/90aa4cec3b0705f65b072ea3c85f9d12.png)

![在此处输入图像描述](../Images/f2f6db04e16233e5e3ca57db4fa747dc.png) 请告诉我如何在其他内容出现时使图像出现在中间并具有适当的 15px 填充。我希望我解释得很好。我不擅长解释。如果我错过了什么，请提前道歉。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:36:24.987

在图像上尝试以下操作并添加样式：

`width:100%; max-width:610px`

最终代码应如下所示：

`<img src="http://ielts.progmic.com/images/uni/1340408113.png" alt="college" style="width:100%; max-width:610px">`

# javascript - Javascript根据屏幕宽度创建表格

> ID：11169083
> 
> 赞同：0
> 
> 时间：2012-06-23T11:18:48.673
> 
> 标签：javascript, html, browser, html-table, width

我有一个 940 像素宽的表格，目前包含我网站的所有内容。

使用 Javascript 我想测试一下浏览器的宽度是否大于 1240，如果是这样，在 a 中显示我现有的 940 像素宽的表格，`<td>`并在相邻`<td>`的 300 像素宽的表格中显示广告。

如果浏览器窗口小于 1240，那么我将只显示我现有的 940 像素宽的表格。

有没有办法测试宽度并设置一个标志，然后使用 Javascript 来测试该标志并包含或不包含我的`<table> <tr> <td>`结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:20:03.423

您可以使用 javascript 加载不同的 CSS。

```
<script type = "text/javascript">
    function x(y) {
        var styles = y;
        var newSS = document.createElement('link');
        newSS.rel = 'stylesheet';
        newSS.href = 'data:text/css,' + styles;
        document.getElementsByTagName("head")[0].appendChild(newSS);
    }

    if (screen.width >= 1240) {
        x('largeTable.css');
    }
    else {
        x('smallTable.css');
    }
</scipt> 
```

来源：[这个](https://stackoverflow.com/questions/5365997/select-different-css-style-sheet-for-different-browser-window-sizes)

编辑：这可能会帮助您完成您正在尝试做的事情。您可以使用 javascript 加载不同的 CSS。

```
 if (screen.width >= 1240) {
       document.getElementById('advert').style.display = 'none';
    }
</scipt> 
```

# sql - 如果两个表具有“一对一”关系，它们是否应该具有与主键相同的列？

> ID：11169086
> 
> 赞同：1
> 
> 时间：2012-06-23T11:20:06.677
> 
> 标签：sql

假设我有一个名为的表`Users`，它代表网站的注册用户。我还有一个`AccountActivation`表，它存储发送到新用户电子邮件以验证该电子邮件的随机生成的字符串。

该`AccountActivation`表的`UserId`列也恰好是该`Users`表的主键。它还具有`ActivationCode`存储代码的列。任一列都可以唯一标识`AccountActivation`表中的一行。

因此，如果我选择激活码列作为主键，我最终会得到两个具有不同主键的一对一表。我以为在一对一的关系中，两张表必须具有相同的主键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:31:22.943

如果选择`ActivationCode`作为PK，那*为什么*会有两个*一对一的*关系呢？

唯一的关系是

```
AccountActivation.UserId -> Users.UserId 
```

或者你认为你突然还有什么？

如果按照您的建议去做，那么桌子`Users`的 PK 开启`UserId`，桌子`AccountActivation`的 PK 开启`ActivationCode`- 根本不是问题，没有理由不这样做。

您为 PK 选择哪一列（`UserId`或）无关紧要 - 这不会影响 / 干扰 and 之间的 FK 关系，也不会添加任何类型的额外一对一关系......`ActivationCode``AccountActivation``AccountActivation``User`

如果您确实选择`ActivationCode`PK `AccountActivation`，我将采取的唯一额外步骤是创建一个非聚集索引，`UserId`以便连接两个表的查询将受益于最大性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:31:48.583

如果只有一个`ActivationCode`，他们可以共享`UserId`. 但这意味着当用户重新生成密钥时，您应该更新旧行或删除它。

但是为什么你需要存储这些数据呢？您还可以将帐户激活码与某种计算和加密与来自`User`.

只是为了说明我的建议：

```
Users table has two columns UserId CreationDate 
```

那么令牌可能是`UserId + CreationDate`（示例）。您将能够在数据库中没有额外数据的情况下生成和检查它。我知道这可能不符合您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T11:32:49.610

使 AccountActivation 中的 UserId 列成为用户表的外键。

```
Users
=====

UserId primary key
Name
Address
etc...

AccountActivation 
=================

UserId primary key (foreign key to Users.UserId)
ActivationCode (unique constraint) 
```

现在你有了一对一的关系

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T16:52:43.480

您不需要与 2 个表中的主键具有相同的列以具有一对一的关系。
您可以将任何列作为`AccountActivation`表中的主键。

`UserId`这是表的外键是`AccountActivation`表中的主键`Users`。因此，您绝对应该能够使用此列从表中唯一标识用户激活码`AccountActivation`，无论它是否是该表的主键（但它应该是唯一的，我希望它是唯一的）。

# php - 访问 PHP 对象数组

> ID：11169088
> 
> 赞同：1
> 
> 时间：2012-06-23T11:20:17.263
> 
> 标签：php, arrays, zend-framework

需要一些快速建议我正在尝试访问对象数组但我很挣扎，请参阅下面的数组。它从一个我通常会使用 $result->_messages->token 的对象开始，但它不起作用我已经搜索了谷歌和这个网站，但无法访问令牌。

```
object(Zend_Auth_Result)#76 (3) {
["_code":protected] => int(1)
["_identity":protected] => string(9) "3232323233"
["_messages":protected] => array(2) {
    ["user"] => object(stdClass)#71 (13) {
      ["id"] => string(9) "232323332"
      ["name"] => string(14) "John Smith"
      ["first_name"] => string(5) "John"
      ["last_name"] => string(8) "Smith"
      ["link"] => string(41) "http://www.facebook.com/"
      ["username"] => string(17) "john.smith"
      ["location"] => object(stdClass)#68 (2) {
        ["id"] => string(0) ""
        ["name"] => NULL
      }     
      ["email"] => string(22) "john@doe.com"
      ["timezone"] => int(1)
      ["locale"] => string(5) "en_US"
      ["verified"] => bool(true)
      ["updated_time"] => string(24) "2012-06-21T13:57:12+0000" 
    }
    ["token"] => string(109) "AAAGIFdDivU4BAMoxyHT3bqY8eBGhnWo9YKM1szHZAnWgY10AIBgxz9LeNCeA2HV9Yhkp8uM5Aq0WR39ZBdcnOa4MxXVI22rnmFKNbYdQZDZD"
    }
} 
```

任何建议任何机构？

干杯

Ĵ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:22:23.840

_messages 是受保护的，所以不可能从这个（或扩展的）类外部调用该变量，检查该类是否存在一个方法来获取数组中的变量

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T11:40:27.260

来自[ZF 命名约定参考指南：](http://framework.zend.com/manual/en/coding-standard.naming-conventions.html#coding-standard.naming-conventions.variables)

> 对于使用“private”或“protected”修饰符声明的实例变量，变量名的第一个字符必须是单个下划线。这是变量名中唯一可接受的下划线应用。声明为“public”的成员变量不应该以下划线开头。

所以你不能`_messages`直接从`Zend_Auth_Result`实例外部访问，因为它是[`protected`](http://php.net/manual/en/language.oop5.visibility.php). 您必须对该属性使用吸气剂。

请参阅 API 文档[`Zend_Auth_Result`](http://framework.zend.com/apidoc/1.7/Zend_Auth/Zend_Auth_Result.html)

```
$messages = $zendAuthResult->getMessages();
$token = $messages['token']; 
```

# php - TCPDF：带有分页符的两个独立列

> ID：11169089
> 
> 赞同：1
> 
> 时间：2012-06-23T11:20:17.660
> 
> 标签：php, tcpdf

我想创建一个包含 2 个独立列的页面。如果文本不适合一页上的一列，则应在下一页使用相同的列设置继续。

我尝试使用 setColumnsArray 和 selectColumn 问题在于，如果第一列已满，它将继续在下一列而不是在下一页。

有可能实现这一目标吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:30:12.917

请参阅 Sample10，这正是您所要求的：

*   PHP源代码：[http ://www.tcpdf.org/examples/example_010.phps](http://www.tcpdf.org/examples/example_010.phps)
*   最终 PDF：[http ://www.tcpdf.org/examples/example_010.pdf](http://www.tcpdf.org/examples/example_010.pdf)

Sample7 也可能有帮助，但列分布在多个页面上：

*   PHP源代码：[http ://www.tcpdf.org/examples/example_007.phps](http://www.tcpdf.org/examples/example_007.phps)
*   最终 PDF：[http ://www.tcpdf.org/examples/example_007.pdf](http://www.tcpdf.org/examples/example_007.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:53:54.450

我现在解决了这个问题，没有用 html 编写所有内容。我曾经遵循以下方法：

1.  使用 getY 和 getPage 保存列的顶部。
2.  写第一列
3.  使用 setY 和 setPage 回到第二列的顶部
4.  使用 setX 移动右侧的秒列。
5.  使用以下技巧来解决第二列左右页面上不同页面边框的问题：

    ```
    if ($curPage<>$pdf->getPage())
    {
      $curPage=$pdf->getPage();
      if (($curPage % 2)==1)
      {
        $xPos+=15;
      }
      else          
      {
        $xPos-=15;
      }
    }
    $pdf->SetX($xPos); 
    ```

# javascript - 在 Ext JS 4 上显示/隐藏一个系列的单个 Line 元素

> ID：11169096
> 
> 赞同：2
> 
> 时间：2012-06-23T11:21:49.633
> 
> 标签：javascript, extjs, charts, extjs4, line

我对 Ext JS 4 很陌生，我有以下问题：

如何显示/隐藏系列的单个 Line 元素？

我有这个代码：

代码：

```
Ext.require('Ext.chart.*');
Ext.require(['Ext.Window', 'Ext.fx.target.Sprite', 'Ext.layout.container.Fit', 'Ext.window.MessageBox']);

Ext.onReady(function () {

    var chart = Ext.create('Ext.chart.Chart', {
            xtype: 'chart',
            style: 'background:#fff',
            animate: true,
            store: store1,
            shadow: true,
            theme: 'Category1',
            legend: {
                position: 'right'
            },
            axes: [{
                type: 'Numeric',
                minimum: 0,
                position: 'left',
                fields: ['Nome mese', 'Valore medio del magazzino budget percentuale', 'Valore medio del magazzino percentuale vs Budget','Valore medio del magazzino percentuale vs Anno Precedente'],
                title: 'Valore percentuale',
                minorTickSteps: 1,
                grid: {
                    odd: {
                        opacity: 1,
                        fill: '#ddd',
                        stroke: '#bbb',
                        'stroke-width': 0.5
                    }
                }
            }, {
                type: 'Category',
                position: 'bottom',
                fields: ['Nome mese'],
                title: 'Mese dell\'anno'
            }],

            series: [{
                type: 'line',
                highlight: {
                    size: 7,
                    radius: 7,
                },
                axis: 'left',
                xField: 'Nome mese',
                yField: 'Valore medio del magazzino budget percentuale',
                style:{stroke: '#E5B96F'},
                markerConfig: {
                    type: 'cross',
                    size: 4,
                    radius: 4,
                    fill: '#E5B96F',
                    'stroke-width': 0
                }
            }, {
                type: 'line',
                highlight: {
                    size: 7,
                    radius: 7,
                },
                axis: 'left',
                smooth: true,

                tips: {
                    trackMouse: true,
                    width: 80,
                    height: 25,
                    renderer: function(storeItem, item) {
                        this.setTitle(item.value[1] + ' %</span>');
                    }
                },

                xField: 'Nome mese',
                yField: 'Valore medio del magazzino percentuale vs Budget',

                style:{stroke: '#690011'},
                markerConfig: {
                    type: 'circle',
                    size: 4,
                    radius: 4,
                    fill: '#690011',
                    'stroke-width': 0,
                }
            } , {
                type: 'line',
                highlight: {
                    size: 7,
                    radius: 7,
                },
                axis: 'left',
                smooth: true,

                tips: {
                    trackMouse: true,
                    width: 80,
                    height: 25,
                    renderer: function(storeItem, item) {
                        this.setTitle(item.value[1] + ' %</span>');
                    }
                },

                xField: 'Nome mese',
                yField: 'Valore medio del magazzino percentuale vs Anno Precedente',

                style:{stroke: '#690011'},

                markerConfig: {
                    type: 'circle',
                    size: 4,
                    radius: 4,
                    fill: '#690011',
                    'stroke-width': 0,
                }
            } 
            ]

         });

    var win = Ext.create('Ext.Window', {
        width: 800,
        height: 600,
        minHeight: 400,
        minWidth: 550,
        hidden: false,
        maximizable: true,
        title: 'Magazzini 3',
        renderTo: Ext.getBody(),
        layout: 'fit',
        tbar: [{
            text: 'Salva grafico',
            handler: function() {
                Ext.MessageBox.confirm('Conferma il download', 'Confermi di voler eseguire il download del grafico come immagine \'png\'?', function(choice){
                    if(choice == 'yes'){
                        chart.save({
                            type: 'image/png'
                        });
                    }
                });
            }
        },  ],
        items: chart
    });
}); 
```

我想隐藏系列的其中一条线。

我已经看到有 showAll() 和 hideAll 方法，但我不明白如何使用它们。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:29:16.720

这是一个工作示例：您应该为每个系列分配一个 id 以按原样使用此代码。

```
series: [{

            type: 'line',
            id: 'line1', // Set Id here
            highlight: {
                size: 7,
                radius: 7,
            }, 
```

...

```
var chart = 'assign your chart component to this'
    chart.series.each(function(aSeries) {
         if (aSeries.id == 'line1') {
            aSeries.hideAll();
            return false;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:33:09.837

在 ExtJS 4.1.x 中，您可以使用`toggleAll`线条系列的功能来显示/隐藏所有系列元素（标记、线条等）。我不知道为什么`toggleAll`没有出现在文档中，但可以在[此处](http://docs.sencha.com/ext-js/4-1/source/Line.html#Ext-chart-series-Line)的行系列源代码中找到。

如果您有要显示/隐藏的系列字段名称，这很容易。您可以简单地遍历图表的系列并检查系列字段是否是您想要的，然后`toggleAll`使用布尔参数调用它以显示或隐藏它。

例如，如果`myField`是您要显示/隐藏的系列字段名称，并且`myChart`是对您的图表的引用：

```
Ext.each(myChart.series.items, function(series) {
    if (series.yField == myField) {

        // hides the series
        series.toggleAll(false);

        // shows the series
        series.toggleAll(true);
    }
}); 
```

不幸的是，图表系列不是的子类，`Ext.Component`因此您无法使用 ComponentQuery 选择器获取对它们的引用，就像`myChart.down('series[yField=fieldName')`您必须以其他方式（如上面所示的迭代）一样。

# domain-driven-design - CQRS 是否适合我的域？

> ID：11169097
> 
> 赞同：3
> 
> 时间：2012-06-23T11:22:00.257
> 
> 标签：domain-driven-design, cqrs, aggregateroot

我正在对作为视频需求系统一部分的档案进行建模。想想像 Windows 资源管理器这样的存档，其中多个用户可以创建文件夹、上传视频、重组文件夹等。有业务规则（权限）确定是否允许用户执行任务（即重命名文件夹、移动文件夹、查看文件夹等）。

我已将每个文件夹建模为聚合根，将一个文件夹移动到另一个文件夹似乎会影响两个聚合根。

据我了解，我应该发送一个事件来修改另一个聚合。然而，我担心的是，如果第二个文件夹也被修改（比如从系统中删除或删除），那么我需要发送一个补偿命令来撤消第一个聚合更改。

我更喜欢某种同时处理移动（两个聚合上的更改）的事务，如果它失败，那么至少我不需要撤消移动的第一部分或引发事件的第一部分。

这让我想到，CQRS 是否适合我要解决的问题？如果是这样，我的聚合可能是错误的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T13:09:07.977

在 DDD 中，聚合应该代表事务边界。需要涉及多个聚合的交易通常表明模型应该被改进，或者交易需求应该被审查，或者两者兼而有之。

这是一个纯粹的 DDD 问题，独立于 CQRS 或任何其他架构模式。

另一方面，您真的需要重新发明分层结构，例如包含文件的文件夹吗？据我所知，这已经解决了很长一段时间的问题。再次正式化该特定领域可能没有固有的优势。

使用 DDD 模式的域建模在有界上下文中最有意义，其中 (1) 域非常复杂并且 (2) 对域进行建模将使您的软件相对于类似应用程序具有真正的（例如竞争）优势。如果该特定的有界上下文相当简单和/或对其进行重构并没有带来真正的优势，那么最好使用最简单的解决方案。

这代表了领域驱动设计中最重要的概念，即*专注于核心领域*

# math - 'setIsRelativeAnchorPoint:' 已弃用

> ID：11169100
> 
> 赞同：1
> 
> 时间：2012-06-23T11:22:22.883
> 
> 标签：math, cocos2d-iphone, deprecated

在 CCLayerColor.m

if ((self = [super init]))

```
{

    [self setIsRelativeAnchorPoint:YES];
    self.anchorPoint = ccp(0.5,0.5); 
```

}

但是提示方法已弃用。谁知道如何找到未弃用的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:00:17.080

尝试这个：

```
// v1.0
node.isRelativeAnchorPoint = YES;

// v2.0
node.ignoreAnchorPointForPosition = NO;  // The value is "negated" 
```

# c# - 如何保存 WPF UI 状态？

> ID：11169103
> 
> 赞同：5
> 
> 时间：2012-06-23T11:22:29.917
> 
> 标签：c#, .net, wpf, settings, tabcontrol

我有一个`TabControl`，在它下面我有几个元素，比如`TreeView`和`DataGrid`。当我展开树并调整数据网格列的大小时，如果我随后切换到另一个选项卡并返回，则整个 UI 状态都会被遗忘。我必须重新展开树并调整列的大小。

是否有一种明智且现有的方法来保存 UI 状态？让我们把它分成——

1.  临时（在内存中）和
2.  永久（在磁盘上）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T11:32:16.563

要保存状态，您可以将相关的控件（`Width`、、`Height`等`IsSelected`）属性绑定到绑定源的属性（即 MVVM 中的 ViewModel），这将自动保存您的临时状态；对于永久保存，您可以序列化您的 ViewModel 并将其保存在磁盘上，并在需要时显然加载它。

就像保存你的树视图状态一样，你可以在对象（ViewModel）中拥有`IsExpanded`和`IsSelected`属性，你`TreeView`必须像这样 -

```
<Style TargetType="{x:Type TreeViewItem}">
    <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
</Style> 
```

您还可以使用项目设置来保存应用程序的状态，看看这个 SO Question -

[c# - 在 WPF 应用程序中保存用户设置的方法？](https://stackoverflow.com/questions/3784477/c-sharp-approach-for-saving-user-settings-in-a-wpf-application/3784591#3784591)

和这篇文章 -[应用了用户设置](http://www.codeproject.com/Articles/25829/User-Settings-Applied)

# mysql - SQL查询不知道变量

> ID：11169104
> 
> 赞同：0
> 
> 时间：2012-06-23T11:22:38.380
> 
> 标签：mysql

我正在尝试使用一个简单的下拉列表查询我的数据库中的一些表，其中列出了表的名称。查询只有一个记录结果显示数据库中注册的最年轻的机构的名称和年龄！

```
$table = $_GET['table'];
$query = "select max('$table'.est_year) as 'establish_year' from '$table' "; 
```

我需要将表的名称作为变量发送到查询器 php 文件。当我将变量名放在查询语句中时，无论方法是 GET 还是 POST，它都会给出错误：

> > “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在 '.order) 附近使用的正确语法，作为来自 'customers'' 的 'last'”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:24:52.573

您将表名用单引号括起来，这不是有效的 SQL（这是字符串的语法，而不是表名）。您应该根本不包装名称，或者将其包装在反引号中（在美国键盘布局上，这是上面的键`TAB`）。

您也不应该引用别名`established_year`：

```
select max(`$table`.est_year) as establish_year from `$table` 
```

**此外，您的代码容易受到 SQL 注入的影响。[立即解决此问题！](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)**

### 更新（sql注入防御）：

在这种情况下，最合适的操作可能是根据白名单验证表名：

```
if (!in_array($table, array('allowed_table_1', '...'))) {
    die("Invalid table name");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T11:31:08.140

**单引号 (')**，在 mysql 中，它表示字符串值。

```
SELECT *, 'table' FROM `table`; 
```

## [演示](http://sqlfiddle.com/#!2/416e4/1)

所以你的查询应该是

```
$table = $_GET['table'];
$query = "select max($table.est_year) as 'establish_year' from $table "; 
```

另请阅读旧帖子，[phpmyadmin sql apostrophe not working](https://stackoverflow.com/questions/11155915/phpmyadmin-sql-apostrophe-not-working/11156024#11156024)。

您的代码也容易受到 SQL 注入的影响。你可以使用这样的东西

```
//Function to sanitize values received from the form. Prevents SQL injection

function clean($str) {
    $str = @trim($str);
    if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
}

$firstName = clean($_POST['firstName']);
$lastName  = clean($_POST['lastName']);
.
.
. 
```

# java - 使用 JAVA 进行 X11 端口转发

> ID：11169109
> 
> 赞同：2
> 
> 时间：2012-06-23T11:23:07.830
> 
> 标签：java, ssh, jsch

在大多数情况下，我使用以下命令将一个鼠标/键盘用于多个系统

```
ssh user@host -X x2x -west -to :0 
```

我在 Java 中搜索相同的解决方案，我找到了`ganymed`and `jsch`。

在`geanymed`我找到一个示例中，我尝试扩展：

```
Session sess = conn.openSession();          
sess.requestX11Forwarding("localhost", 6000, null, true); 
```

`ssh user@host -X x2x -west -to :0`是否可以使用 t`ganymed`或做同样的事情（ ） `jsch`？如果是的话，谁能给我一个最小的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:35:52.173

您不能直接执行与 ssh 可执行文件支持的命令相同的命令，但您可以解析这些参数并相应地安排它们 [针对您正在使用的每个库/框架] 以完成您的工作。

对于 JSch，请尝试[http://www.jcraft.com/jsch/examples/X11Forwarding.java](http://www.jcraft.com/jsch/examples/X11Forwarding.java)。如果您的 Java VM 在无头模式下运行，您将需要一些最小的调整来剥离基于 Swing 的代码。这是示例，直接从参考中复制：

```
public class X11Forwarding{
  public static void main(String[] arg){

String xhost="127.0.0.1";
int xport=0;

try{
  JSch jsch=new JSch();  

  String host=null;
  if(arg.length>0){
    host=arg[0];
  }
  else{
    host=JOptionPane.showInputDialog("Enter username@hostname",
                                     System.getProperty("user.name")+
                                     "@localhost"); 
  }
  String user=host.substring(0, host.indexOf('@'));
  host=host.substring(host.indexOf('@')+1);

  Session session=jsch.getSession(user, host, 22);

  String display=JOptionPane.showInputDialog("Please enter display name", 
                     xhost+":"+xport);
  xhost=display.substring(0, display.indexOf(':'));
  xport=Integer.parseInt(display.substring(display.indexOf(':')+1));

  session.setX11Host(xhost);
  session.setX11Port(xport+6000);

  // username and password will be given via UserInfo interface.
  UserInfo ui=new MyUserInfo();
  session.setUserInfo(ui);
  session.connect();

  Channel channel=session.openChannel("shell");

  channel.setXForwarding(true);

  channel.setInputStream(System.in);
  channel.setOutputStream(System.out);

  channel.connect();
}
catch(Exception e){
  System.out.println(e);
}
}

public static class MyUserInfo implements UserInfo, UIKeyboardInteractive{
public String getPassword(){ return passwd; }
public boolean promptYesNo(String str){
  Object[] options={ "yes", "no" };
  int foo=JOptionPane.showOptionDialog(null, 
         str,
         "Warning", 
         JOptionPane.DEFAULT_OPTION, 
         JOptionPane.WARNING_MESSAGE,
         null, options, options[0]);
   return foo==0;
}

String passwd;
JTextField passwordField=(JTextField)new JPasswordField(20);

public String getPassphrase(){ return null; }
public boolean promptPassphrase(String message){ return true; }
public boolean promptPassword(String message){
  Object[] ob={passwordField}; 
  int result=
  JOptionPane.showConfirmDialog(null, ob, message,
                JOptionPane.OK_CANCEL_OPTION);
  if(result==JOptionPane.OK_OPTION){
passwd=passwordField.getText();
return true;
  }
  else{ return false; }
}
public void showMessage(String message){
  JOptionPane.showMessageDialog(null, message);
}
final GridBagConstraints gbc = 
  new GridBagConstraints(0,0,1,1,1,1,
                         GridBagConstraints.NORTHWEST,
                         GridBagConstraints.NONE,
                         new Insets(0,0,0,0),0,0);
private Container panel;
public String[] promptKeyboardInteractive(String destination,
                                          String name,
                                          String instruction,
                                          String[] prompt,
                                          boolean[] echo){
  panel = new JPanel();
  panel.setLayout(new GridBagLayout());

  gbc.weightx = 1.0;
  gbc.gridwidth = GridBagConstraints.REMAINDER;
  gbc.gridx = 0;
  panel.add(new JLabel(instruction), gbc);
  gbc.gridy++;

  gbc.gridwidth = GridBagConstraints.RELATIVE;

  JTextField[] texts=new JTextField[prompt.length];
  for(int i=0; i<prompt.length; i++){
    gbc.fill = GridBagConstraints.NONE;
    gbc.gridx = 0;
    gbc.weightx = 1;
    panel.add(new JLabel(prompt[i]),gbc);

    gbc.gridx = 1;
    gbc.fill = GridBagConstraints.HORIZONTAL;
    gbc.weighty = 1;
    if(echo[i]){
      texts[i]=new JTextField(20);
    }
    else{
      texts[i]=new JPasswordField(20);
    }
    panel.add(texts[i], gbc);
    gbc.gridy++;
  }

  if(JOptionPane.showConfirmDialog(null, panel, 
                                   destination+": "+name,
                                   JOptionPane.OK_CANCEL_OPTION,
                                   JOptionPane.QUESTION_MESSAGE)
     ==JOptionPane.OK_OPTION){
    String[] response=new String[prompt.length];
    for(int i=0; i<prompt.length; i++){
      response[i]=texts[i].getText();
    }
return response;
  }
  else{
    return null;  // cancel
  }
}
}
} 
```

# javascript - 有没有办法在谷歌地图 V3 中动态放置不同的标记？

> ID：11169123
> 
> 赞同：1
> 
> 时间：2012-06-23T11:25:53.590
> 
> 标签：javascript, jsp, google-maps, google-maps-api-3

我正在研究谷歌地图 API V3。我需要在地图上动态放置标记，并且需要以任何方法区分每个标记。

我需要有编号标记或不同颜色的标记。请提出一种完成我的项目的方法。我在 JSP 页面中使用纯 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:18:12.463

[这](http://www.geocodezip.com/v3_MW_example_categories.html)是[Mike Williams 的 v2 教程](http://econym.org.uk/gmap/)中的标记类别示例，翻译为 google maps API v3。我有[使用字母标记](http://www.geocodezip.com/basic8i.asp?filename=example_letter.xml)和[编号标记](http://www.geocodezip.com/basic8j.asp?filename=example_number.xml)或[在 xml](http://www.geocodezip.com/basic8l.asp?filename=example4_numbered.xml)中定义的编号标记的 v2 API 示例，可以转换为 v3。

**代码片段：**

```
// this variable will collect the html which will eventually be placed in the side_bar 
var side_bar_html = "";

var gmarkers = [];
var gicons = [];
var map = null;

var infowindow = new google.maps.InfoWindow({
  size: new google.maps.Size(150, 50)
});

gicons["red"] = new google.maps.MarkerImage("http://www.geocodezip.com/mapIcons/marker_red.png",
  // This marker is 20 pixels wide by 34 pixels tall.
  new google.maps.Size(20, 34),
  // The origin for this image is 0,0.
  new google.maps.Point(0, 0),
  // The anchor for this image is at 9,34.
  new google.maps.Point(9, 34));
// Marker sizes are expressed as a Size of X,Y
// where the origin of the image (0,0) is located
// in the top left of the image.

// Origins, anchor positions and coordinates of the marker
// increase in the X direction to the right and in
// the Y direction down.

var iconImage = new google.maps.MarkerImage('http://www.geocodezip.com/mapIcons/marker_red.png',
  // This marker is 20 pixels wide by 34 pixels tall.
  new google.maps.Size(20, 34),
  // The origin for this image is 0,0.
  new google.maps.Point(0, 0),
  // The anchor for this image is at 9,34.
  new google.maps.Point(9, 34));
var iconShadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',
  // The shadow image is larger in the horizontal dimension
  // while the position and offset are the same as for the main image.
  new google.maps.Size(37, 34),
  new google.maps.Point(0, 0),
  new google.maps.Point(9, 34));
// Shapes define the clickable region of the icon.
// The type defines an HTML &lt;area&gt; element 'poly' which
// traces out a polygon as a series of X,Y points. The final
// coordinate closes the poly by connecting to the first
// coordinate.
var iconShape = {
  coord: [9, 0, 6, 1, 4, 2, 2, 4, 0, 8, 0, 12, 1, 14, 2, 16, 5, 19, 7, 23, 8, 26, 9, 30, 9, 34, 11, 34, 11, 30, 12, 26, 13, 24, 14, 21, 16, 18, 18, 16, 20, 12, 20, 8, 18, 4, 16, 2, 15, 1, 13, 0],
  type: 'poly'
};

function getMarkerImage(iconColor) {
  if ((typeof(iconColor) == "undefined") || (iconColor == null)) {
    iconColor = "red";
  }
  if (!gicons[iconColor]) {
    gicons[iconColor] = new google.maps.MarkerImage("http://www.geocodezip.com/mapIcons/marker_" + iconColor + ".png",
      // This marker is 20 pixels wide by 34 pixels tall.
      new google.maps.Size(20, 34),
      // The origin for this image is 0,0.
      new google.maps.Point(0, 0),
      // The anchor for this image is at 6,20.
      new google.maps.Point(9, 34));
  }
  return gicons[iconColor];

}

function category2color(category) {
  var color = "red";
  switch (category) {
    case "theatre":
      color = "blue";
      break;
    case "golf":
      color = "green";
      break;
    case "info":
      color = "yellow";
      break;
    default:
      color = "red";
      break;
  }
  return color;
}

gicons["theatre"] = getMarkerImage(category2color("theatre"));
gicons["golf"] = getMarkerImage(category2color("golf"));
gicons["info"] = getMarkerImage(category2color("info"));

// A function to create the marker and set up the event window
function createMarker(latlng, name, html, category) {
  var contentString = html;
  var marker = new google.maps.Marker({
    position: latlng,
    icon: gicons[category],
    shadow: iconShadow,
    map: map,
    title: name,
    zIndex: Math.round(latlng.lat() * -100000) << 5
  });
  // === Store the category and name info as a marker properties ===
  marker.mycategory = category;
  marker.myname = name;
  gmarkers.push(marker);

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString);
    infowindow.open(map, marker);
  });
}

// == shows all markers of a particular category, and ensures the checkbox is checked ==
function show(category) {
  for (var i = 0; i < gmarkers.length; i++) {
    if (gmarkers[i].mycategory == category) {
      gmarkers[i].setVisible(true);
    }
  }
  // == check the checkbox ==
  document.getElementById(category + "box").checked = true;
}

// == hides all markers of a particular category, and ensures the checkbox is cleared ==
function hide(category) {
  for (var i = 0; i < gmarkers.length; i++) {
    if (gmarkers[i].mycategory == category) {
      gmarkers[i].setVisible(false);
    }
  }
  // == clear the checkbox ==
  document.getElementById(category + "box").checked = false;
  // == close the info window, in case its open on a marker that we just hid
  infowindow.close();
}

// == a checkbox has been clicked ==
function boxclick(box, category) {
  if (box.checked) {
    show(category);
  } else {
    hide(category);
  }
  // == rebuild the side bar
  makeSidebar();
}

function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click");
}

// == rebuilds the sidebar to match the markers currently displayed ==
function makeSidebar() {
  var html = "";
  for (var i = 0; i < gmarkers.length; i++) {
    if (gmarkers[i].getVisible()) {
      html += '<a href="javascript:myclick(' + i + ')">' + gmarkers[i].myname + '<\/a><br>';
    }
  }
  document.getElementById("side_bar").innerHTML = html;
}

function initialize() {
  var myOptions = {
    zoom: 11,
    center: new google.maps.LatLng(53.8363, -3.0377),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map"), myOptions);

  google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
  });

  // Read the data
  // downloadUrl("categories.xml", function(doc) { // doesn't work cross-domain, load the xml from a string
  var xml = xmlParse(xmlString);
  var markers = xml.documentElement.getElementsByTagName("marker");

  for (var i = 0; i < markers.length; i++) {
    // obtain the attribues of each marker
    var lat = parseFloat(markers[i].getAttribute("lat"));
    var lng = parseFloat(markers[i].getAttribute("lng"));
    var point = new google.maps.LatLng(lat, lng);
    var address = markers[i].getAttribute("address");
    var name = markers[i].getAttribute("name");
    var html = "<b>" + name + "<\/b><p>" + address;
    var category = markers[i].getAttribute("category");
    // create the marker
    var marker = createMarker(point, name, html, category);
  }

  // == show or hide the categories initially ==
  show("theatre");
  hide("golf");
  hide("info");
  // == create the initial sidebar ==
  makeSidebar();
  // });
}
google.maps.event.addDomListener(window, 'load', initialize);
var xmlString = '<markers> <marker name="Grand Theatre" address="33 Church St, Blackpool, Lancashire, FY1 1HT" lng="-3.053102" lat="53.817260" category="theatre" /> <marker name="Claremont Theatre Club" address="Burwood Dr, Blackpool, Lancashire, FY3 8NS" lng="-3.049690" lat="53.829649" category="theatre" /> <marker name="Pendle Productions" address="249 Hawes Side La, Blackpool, Lancashire, FY4 4AA" lng="-3.030698" lat="53.794399" category="theatre" /> <marker name="Tram Shed Theatre" address="7 Moor Pk Av, Blackpool, Lancashire, FY2 0LT" lng="-3.034974" lat="53.845938" category="theatre" /> <marker name="Thornton Little Theatre" address="Fleetwood Road North, Thornton Cleveleys, FY5 3SZ" lng="-3.010607" lat="53.872058" category="theatre" /> <marker name="Barbara Jackson Arts" address="Rossall La, Fleetwood, Lancashire, FY7 8JP" lng="-3.033960" lat="53.897928" category="theatre" /> <marker name="North Shore Golf Club" address="Devonshire Rd, Blackpool, Lancashire, FY2 0RD" lng="-3.043305" lat="53.839898" category="golf" /> <marker name="St Annes Old Links" address="Highbury Road East, Lytham St. Annes, Lancashire, FY8 2LD" lng="-3.038407" lat="53.762917" category="golf" /> <marker name="Fairhaven Golf Club" address="Oakwood Av, Lytham St. Annes, Lancashire, FY8 4JU" lng="-2.983218" lat="53.742781" category="golf" /> <marker name="Green Drive Golf Club" address="Ballam Rd, Lytham St. Annes, Lancashire, FY8 4LE" lng="-2.959530" lat="53.745971" category="golf" /> <marker name="Fleetwood Golf Club" address="Princes Wy, Fleetwood, Lancashire, FY7 8AF" lng="-3.042973" lat="53.917606" category="golf" /> <marker name="Knott End Golf Club" address="Wyre Side, Knott End-on-Sea, Poulton-le-Fylde, Lancashire, FY6 0AA" lng="-2.997062" lat="53.923200" category="golf" /> <marker name="Tourist Information 1" address="1 Clifton St, Blackpool, Lancashire, FY1 1LY" lng="-3.054529" lat="53.818775" category="info" /> <marker name="Tourist Information 2" address="Thornton-Cleveleys, Lancashire, FY5 1WA" lng="-3.042989" lat="53.876079" category="info" /> <marker name="Tourist Information 3" address="Victoria Rd West, Thornton-Cleveleys, Lancashire, FY5 1AJ" lng="-3.041668" lat="53.877403" category="info" /> <marker name="Tourist Information 4" address="St. Annes Rd West, Lytham St. Annes, Lancashire, FY8 1SA" lng="-3.031074" lat="53.752122" category="info" /> <marker name="Tourist Information 5" address="The Esplanade, Fleetwood, Lancashire, FY7 6DL" lng="-3.006366" lat="53.926970" category="info" /> <marker name="Tourist Information 6" address="10-12 York St, Blackpool, Lancashire, FY1 5AQ" lng="-3.052919" lat="53.810556" category="info" /></markers>';
/**
 * Parses the given XML string and returns the parsed document in a
 * DOM data structure. This function will return an empty DOM node if
 * XML parsing is not supported in this browser.
 * @param {string} str XML string.
 * @return {Element|Document} DOM.
 */
function xmlParse(str) {
  if (typeof ActiveXObject != 'undefined' && typeof GetObject != 'undefined') {
    var doc = new ActiveXObject('Microsoft.XMLDOM');
    doc.loadXML(str);
    return doc;
  }

  if (typeof DOMParser != 'undefined') {
    return (new DOMParser()).parseFromString(str, 'text/xml');
  }

  return createElement('div', null);
}
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
}
```

```
<script src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<!-- you can use tables or divs for the overall layout -->
<table border=1>
  <tr>
    <td>
      <div id="map" style="width: 550px; height: 450px"></div>
    </td>
    <td valign="top" style="width:150px; text-decoration: underline; color: #4444ff;">
      <div id="side_bar"></div>
    </td>
  </tr>
</table>
<form action="#">
  Theatres: <input type="checkbox" id="theatrebox" onclick="boxclick(this,'theatre')" /> &nbsp;&nbsp; Golf Courses: <input type="checkbox" id="golfbox" onclick="boxclick(this,'golf')" /> &nbsp;&nbsp; Tourist Information: <input type="checkbox" id="infobox"
    onclick="boxclick(this,'info')" /><br />
</form>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:40:16.650

添加标记时使用关联数组存储标记，其键是标记的唯一标识符。像这样的东西：

```
var markersOnMap=[];

function addMarker(markerJson)
{
  if(!markersOnMap[markerJson.identifier])
  {
     //code to add marker
     markersOnMap[markerJson.identifier]=true;
  }
} 
```

# javascript - 如何从客户端脚本检测身份验证超时

> ID：11169126
> 
> 赞同：0
> 
> 时间：2012-06-23T11:26:26.073
> 
> 标签：javascript, asp.net, forms-authentication, wcf-client

我有一个使用表单身份验证的 ASP.NET 应用程序，超时设置为五分钟。在我的页面上，我有一个按钮，当单击该按钮时，将对位于我的 .svc 文件中命名的服务上的操作进行 AJAX 调用。我如何从客户端 javascipt 知道应用程序已超时？或者，我如何在 global.asax 中检测到这一点；也许在 application_beginrequest 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:54:35.297

您的方法的一个变体：有一个单独的客户端脚本，首先通过请求一个特殊的页面/处理程序来检查身份验证过期，该页面/处理程序返回 JSON 结构以指示当前用户的身份验证状态。只有在知道用户仍然处于活动状态之后，您才会运行您的主要 ajax 操作。这是另一个请求，但可以防止您将超时逻辑与主要的 ajax 逻辑纠缠在一起。您也可以在“警告，您的会话将在 x 分钟后超时”弹出窗口中单独使用。

有关如何设置它的更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/12824550/check-authentication-ticket-expiration-without-affecting-it)和[我的回答](https://stackoverflow.com/questions/12824550/check-authentication-ticket-expiration-without-affecting-it/12898799#12898799)，但关键是如果您不希望**检查**过期以延长滑动过期时间，则必须将过期页面/处理程序配置为单独的带有表单身份验证的虚拟目录设置为slidingExpiration = false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:39:49.607

如果您在谈论会话超时。发生这种情况时，[应将 IHttpSessionState.IsNewSession](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.ihttpsessionstate.isnewsession.aspx)属性设置为 true。

如果您指的是身份验证超时，那么您必须检查 AuthenticationTicket 是否过期。

# c# - 如何从列表或 XML 文件中提取一个具有 3 个属性的对象？

> ID：11169131
> 
> 赞同：-2
> 
> 时间：2012-06-23T11:26:50.530
> 
> 标签：c#, xml, arrays, list, listbox

我有一个书店列表，在用户从列表框中选择一个项目后，它应该显示该项目的价格和相关点：

```
书名1, 15$, 5分
书名2, 25$, 15 点
书名3, 11$, 8分
书名4, 30$, 12 点

```

最后，如果他选择了其中两本书，则应计算价格，还应显示他获得了多少积分。
我现在没有使用数据库，我正在考虑为它创建一个 xml 文件，我不知道谁来组织我的 xml 文件以及之后应该如何读取它。它还应该具有删除能力，这意味着如果用户插入了 3 个不同的书名，但他想删除其中一个，他应该能够选择名称并将其删除，并且价格和积分应该从总文本字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:52:36.590

xml文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<books>  
<book>
<name>Book1</name>
<price>10</price>
<points>1</points>
</book>  
<book>
<name>Book2</name>
<price>20</price>
<points>10</points>
</book>
</books> 
```

如何阅读：（我做了一个小助手类“书籍”，只是为了保持清洁，但你不必这样做，你也可以使用匿名类型）

```
 public class Books
        {
            public string name { get; set; }
            public double price {get;set;}
            public int points { get; set; }
        } 
```

阅读 xmlfile: (你必须为此导入`using System.Xml.Linq;`命名空间)

```
 XDocument doc = XDocument.Load("PathToYourXml.xml");
        List<Books> books = (from x in doc.Descendants("book")
                    select new Books
                    {   name = x.Element("name").Value,
                        price = Convert.ToDouble(x.Element("price").Value),
                        points = Convert.ToInt32(x.Element("points").Value)
                    }).ToList(); 
```

打印结果：

```
 foreach (Books i in books)
        {
            Console.WriteLine(i.name + " " + i.price + " " + i.points);
        } 
```

# c++ - Opencv分类器更新错误

> ID：11169133
> 
> 赞同：1
> 
> 时间：2012-06-23T11:27:05.473
> 
> 标签：c++, image-processing, opencv, computer-vision, classification

我在尝试更新 OpenCV 中的 CvBoost 分类器时遇到错误，我遇到的错误如下

**OpenCV 错误：CvDTreeTrainData::set_data，文件 /home/bsoni/Downloads/OpenCV-2.4.1/modules 中的参数错误（新的训练数据必须具有相同的类型以及输入和输出变量以及分类变量的相同类别） /ml/src/tree.cpp，第 172 行**

基本上我正在研究一个 2 类问题，最初我用一组 SURF 特征训练分类器。所以这个过程是我最初使用一组冲浪描述符训练分类器。

data.surf_features 是一组 128 位 SURF 描述符 data.surf_classes 是一组类标签，它们是 +1 或 -1

最初我训练分类器使用

```
void train()
{
    CvBoostParams params(CvBoost::REAL,80,0.95,2,false,0);
    aSurfBoost.train(data.surf_features,CV_ROW_SAMPLE,data.surf_classes,Mat(),Mat(),Mat(),Mat(),params,false);

} 
```

之后我尝试使用下面的代码重新训练分类器

```
void train()
{
    CvBoostParams params(CvBoost::REAL,80,0.95,2,false,0);
    aSurfBoost.train(data.surf_features,CV_ROW_SAMPLE,data.surf_classes,Mat(),Mat(),Mat(),Mat(),params,true);

} 
```

我唯一想改变的是将更新参数设置为true。

我已经检查了描述符的 Mat.type 并且在这两种情况下它们都是完全相同的。

欢迎任何建议解决方案甚至可能的解决方法。

# thread-safety - AWS 正在以线程安全方式发送电子邮件

> ID：11169134
> 
> 赞同：1
> 
> 时间：2012-06-23T11:27:15.177
> 
> 标签：thread-safety, amazon-web-services

`AmazonSimpleEmailServiceClient.sendEmail() ;`按照 java 文档使用

> 使用此客户端进行的所有服务调用都是阻塞的，并且在服务调用完成之前不会返回。

快速的问题是，它是线程安全的吗？多个线程可以使用相同的实例并行`AmazonSimpleEmailServiceClient`调用吗？`sendEmail()`就像，假设我的网站的多个用户试图同时在网站上注册。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T01:14:12.590

这是我从 AWS 得到的答案：

你好，

您应该能够使用同一个`AmazonSimpleEmailServiceClient()`对象使用多个线程进行发送。

问候， 罗汉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T08:43:58.570

我正在添加一个更新的答案，因为原始答案来自 2012 年，并且对线程安全性不太放心。

我不确定它是在哪个版本中引入的，但在今天可用的最新 Java AWS SDK 版本（2016 年 10 月，版本 1.11.43）中，该类被注释为`@ThreadSafe`，因此可以假定 sendEmail 方法是线程安全的

# android - 使用 progressBar 而不是 ProgressDialog

> ID：11169138
> 
> 赞同：-1
> 
> 时间：2012-06-23T11:27:40.357
> 
> 标签：android, progress-bar

我想在从服务器下载时使用进度条，实际上我使用的是progressDialog，但如果我使用progressBar而不是progressDialog，它会很好看。我有以下进度对话框代码。

```
 public class FeaturedData extends AsyncTask<Void, Void, Void> {

    Home home;
    ProgressDialog dialog = null;

    public FeaturedData(Home home) {
        // TODO Auto-generated constructor stub
        this.home = home;
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        //calling here method
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        dialog.dismiss();

    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        dialog = ProgressDialog.show(home, "", "", true);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:35:04.520

As per your below comment:

> Actually i want to do it programatically don't want to declare in xml.

=> i would suggest you to take it inside the XMl layout.

*   Inside the onPreExecute(), make it visible using `progressBar.setVisibility(View.VISIBLE)`
*   and inside the onPostExecute(), make it GONE by using `progressBar.setVisibility(View.GONE)`

# google-maps - 谷歌地图点击拖动不起作用

> ID：11169143
> 
> 赞同：1
> 
> 时间：2012-06-23T11:29:10.590
> 
> 标签：google-maps, google-maps-api-3

我正在使用这个超级基本代码将谷歌地图添加到我的网站：

```
var map;
function initMaps(latIn, longIn, htmltext) {
    var LatLng = new google.maps.LatLng(latIn, longIn);
    var Options = {
        zoom: 13,
        center: LatLng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map(document.getElementById("mapStatic"), Options);

    marker = new google.maps.Marker({
        position: LatLng, 
        map: map
    });

    marker.setMap(map);
    map.enableDragging(); 
}

google.maps.event.addDomListener(window, "load", initMaps); 
```

地图显示正常，但由于某种原因我无法拖动它，是否有其他一些 javascript 正在这样做？我环顾四周，但没有发现任何可能导致问题的东西。

# c# - 如何修改 PetaPoco 类以使用由非数字列组成的复合键？

> ID：11169144
> 
> 赞同：8
> 
> 时间：2012-06-23T11:29:33.213
> 
> 标签：c#, .net, petapoco

我有一个包含以下列的表格：

ContractorId .... INT .... IDENTITY
ContractorName .... Varchar(50) .... PK
ContractorGrade ... .... Varchar(3) .... PK

PetaPoco T4 模板生成的类如下所示：

```
[TableName("contractor_master")]
[PrimaryKey("contractorname", autoIncrement=false)]
[ExplicitColumns]
public partial class contractor_master : TubewellRepo.Record<contractor_master>  
{
    [Column] 
    public int contractorid 
    { 
        get
        {
            return _contractorid;
        }
        set
        {
            _contractorid = value;
            MarkColumnModified("contractorid");
        }
    }
    int _contractorid;

    [Column] 
    public string contractorname 
    { 
        get
        {
            return _contractorname;
        }
        set
        {
            _contractorname = value;
            MarkColumnModified("contractorname");
        }
    }
    string _contractorname;

    [Column] 
    public string contractorgrade 
    { 
        get
        {
            return _contractorgrade;
        }
        set
        {
            _contractorgrade = value;
            MarkColumnModified("contractorgrade");
        }
    }
    string _contractorgrade;
  } 
```

插入新记录的代码如下：

```
// Insert a record
var Contractor=new contractor_master();
Contractor.contractorname = "Super Borewells";
Contractor.contractorgrade = "A";

db.Insert(Contractor); 
```

在 Class Code 的第二行，我想知道如何提及一个 Composite Key，即 (ContractorName + ContractorGrade)。

其次，它没有插入记录，因为它需要一个 Id 列。即使 ContractorId 是 IDENTITY，它也不是主键。

它没有插入新记录并给出错误，因为它在 IDENTITY 列中插入 0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T08:26:52.123

我的分支在这里：[https](https://github.com/schotime/petapoco) ://github.com/schotime/petapoco 通过指定 PrimaryKey 属性来支持复合主键，例如：

```
[PrimaryKey("ContractorName,ContractorGrade")] 
```

如果您还想要标识列，我不确定它将如何工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T03:23:43.393

我必须进行以下更改以支持 IsNew()

```
// Check if a poco represents a new record
        public bool IsNew(string primaryKeyName, object poco)
        {
            var pd = PocoData.ForObject(poco, primaryKeyName);
            object pk;
            PocoColumn pc;
            if (pd.Columns.TryGetValue(primaryKeyName, out pc))
            {
                pk = pc.GetValue(poco);
            }
#if !PETAPOCO_NO_DYNAMIC
            else if (poco.GetType() == typeof(System.Dynamic.ExpandoObject))
            {
                return true;
            }
#endif
            else if (primaryKeyName.Contains(","))
            {
                return primaryKeyName.Split(',')
                    .Select(pkPart => GetValue(pkPart, poco))
                    .Any(pkValue => IsDefaultOrNull(pkValue));
            }
            else
            {
                pk = GetValue(primaryKeyName, poco);
            }

            return IsDefaultOrNull(pk);
        }

        private static object GetValue(string primaryKeyName, object poco)
        {
            object pk;
            var pi = poco.GetType().GetProperty(primaryKeyName);
            if (pi == null)
                throw new ArgumentException(
                    string.Format("The object doesn't have a property matching the primary key column name '{0}'",
                                  primaryKeyName));
            pk = pi.GetValue(poco, null);
            return pk;
        }

        private static bool IsDefaultOrNull(object pk)
        {
            if (pk == null)
                return true;

            var type = pk.GetType();

            if (type.IsValueType)
            {
                // Common primary key types
                if (type == typeof(long))
                    return (long)pk == default(long);
                else if (type == typeof(ulong))
                    return (ulong)pk == default(ulong);
                else if (type == typeof(int))
                    return (int)pk == default(int);
                else if (type == typeof(uint))
                    return (uint)pk == default(uint);
                else if (type == typeof(Guid))
                    return (Guid)pk == default(Guid);

                // Create a default instance and compare
                return pk == Activator.CreateInstance(pk.GetType());
            }
            else
            {
                return pk == null;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-24T11:48:05.973

我可以看到现在有[CompositeKeySuppport 分支](https://github.com/CollaboratingPlatypus/PetaPoco/tree/CompositeKeySuppport)，所以我们很有可能很快就会在官方 repo 中支持它，这意味着我们将获得 NuGet 更新和东西。

# opencv - opencv- 使用光流的车辆跟踪

> ID：11169146
> 
> 赞同：4
> 
> 时间：2012-06-23T11:29:57.360
> 
> 标签：opencv

我已经实现了光流来跟踪道路上的车辆，结果非常慢。

我的代码使用以下功能：

*   cvGoodFeaturesToTrack
*   cvFindCornerSubPix
*   cvCalcOpticalFlowPyrLK

如何使这种跟踪快速有效？

我的代码是：

```
#include "highgui.h"
#include "cv.h"
#include "cxcore.h"
#include <iostream>
using namespace std;

const int MAX_CORNERS = 500;

int main()
{
CvCapture* capture=cvCreateFileCapture("E:\cam1.avi");
IplImage* img_A;// = cvLoadImage("image0.png", CV_LOAD_IMAGE_GRAYSCALE);
IplImage* img_B;// = cvLoadImage("image1.png", CV_LOAD_IMAGE_GRAYSCALE);
img_A=cvQueryFrame(capture);

IplImage* imgA = cvCreateImage( cvGetSize(img_A), 8, 1 );
IplImage* imgB = cvCreateImage( cvGetSize(img_A), 8, 1 );
cvNamedWindow( "ImageA", CV_WINDOW_AUTOSIZE );
cvNamedWindow( "ImageB", CV_WINDOW_AUTOSIZE );
cvNamedWindow( "LKpyr_OpticalFlow", CV_WINDOW_AUTOSIZE );

while(1)
{
    int couter=0;
    for(int k=0;k<20;k++)
    {
        img_B=cvQueryFrame(capture);
    }

    //cvCvtColor(imgA,imgA,CV_BGR2GRAY);
    //cvCvtColor(imgB,imgB,CV_BGR2GRAY);
    // Load two images and allocate other structures
    /*IplImage* imgA = cvLoadImage("image0.png", CV_LOAD_IMAGE_GRAYSCALE);
    IplImage* imgB = cvLoadImage("image1.png", CV_LOAD_IMAGE_GRAYSCALE);*/

    CvSize img_sz = cvGetSize( img_A );
    int win_size = 10;

    IplImage* imgC = cvCreateImage( cvGetSize(img_A), 8, 1 );
    cvZero(imgC);
    // Get the features for tracking
    IplImage* eig_image = cvCreateImage( img_sz, IPL_DEPTH_32F, 1 );
    IplImage* tmp_image = cvCreateImage( img_sz, IPL_DEPTH_32F, 1 );

    int corner_count = MAX_CORNERS;

    CvPoint2D32f* cornersA = new CvPoint2D32f[ MAX_CORNERS ];

    cvCvtColor(img_A,imgA,CV_BGR2GRAY);

    cvCvtColor(img_B,imgB,CV_BGR2GRAY);

    cvGoodFeaturesToTrack( imgA, eig_image, tmp_image, cornersA, &corner_count ,0.05, 5.0, 0, 3, 0, 0.04 );

    cvFindCornerSubPix( imgA, cornersA, corner_count, cvSize( win_size, win_size ) ,cvSize( -1, -1 ), cvTermCriteria( CV_TERMCRIT_ITER | CV_TERMCRIT_EPS, 20, 0.03 ) );

    // Call Lucas Kanade algorithm
    char features_found[ MAX_CORNERS ];
    float feature_errors[ MAX_CORNERS ];

    CvSize pyr_sz = cvSize( imgA->width+8, imgB->height/3 );

    IplImage* pyrA = cvCreateImage( pyr_sz, IPL_DEPTH_32F, 1 );
    IplImage* pyrB = cvCreateImage( pyr_sz, IPL_DEPTH_32F, 1 );

    CvPoint2D32f* cornersB = new CvPoint2D32f[ MAX_CORNERS ];

    /*int jk=0;
    for(int i=0;i<imgA->width;i+=10)
    {
        for(int j=0;j<imgA->height;j+=10)
        {
            cornersA[jk].x=i;
            cornersA[jk].y=j;
            ++jk;
        }
    }
  */
    cvCalcOpticalFlowPyrLK( imgA, imgB, pyrA, pyrB, cornersA, cornersB, corner_count,
        cvSize( win_size, win_size ), 5, features_found, feature_errors,
         cvTermCriteria( CV_TERMCRIT_ITER | CV_TERMCRIT_EPS, 20, 0.3 ), 0 );

    // Make an image of the results

    for( int i=0; i < corner_count; i++ ) 
    {
        if( features_found[i]==0|| feature_errors[i]>550 ) 
        {
            //printf("Error is %f/n",feature_errors[i]);
            continue;
        }
        //printf("Got it/n");
        CvPoint p0 = cvPoint( cvRound( cornersA[i].x ), cvRound( cornersA[i].y ) );
        CvPoint p1 = cvPoint( cvRound( cornersB[i].x ), cvRound( cornersB[i].y ) );
        cvLine( imgC, p0, p1, CV_RGB(255,0,0), 2 );
        cout<<p0.x<<" "<<p0.y<<endl;
    }

    cvShowImage( "LKpyr_OpticalFlow", imgC );
    cvShowImage( "ImageA", imgA );
    cvShowImage( "ImageB", imgB );
    //cvCopyImage(imgB,imgA);
    delete[] cornersA;
    delete[] cornersB;
    cvWaitKey(33);
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T17:58:03.370

我在这里可能有点过分了，但我建议你去看看[`OpenTLD`](http://info.ee.surrey.ac.uk/Personal/Z.Kalal/)。OpenTLD（又名 Predator）是最有效的跟踪算法之一。Zdenek Kalal 在 MATLAB 中实现了 OpenTLD。乔治·内贝海（George Nebehay）取得了非常有效率的表现[`C++ OpenCV port of OpenTLD`](https://github.com/gnebehay/OpenTLD)。

它非常易于安装，并且跟踪非常有效。

OpenTLD 使用 Median Flow Tracker 来跟踪和实现 PN 学习算法。在这个[YouTube 视频](http://www.youtube.com/watch?feature=player_embedded&v=1GhNXHCQGsM)中，Zdenek Kalal 展示了 OpenTLD 的使用。

如果您只想实现中值流跟踪器，请点击此链接[https://github.com/gnebehay/OpenTLD/tree/master/src/mftracker](https://github.com/gnebehay/OpenTLD/tree/master/src/mftracker)

如果你想在 Python 中使用它，我已经制作了一个[Median Flow Tracker](https://github.com/jayrambhia/MFTracker)并且还制作了[OpenTLD 的 Python 端口](http://github.com/jayrambhia/pyOpenTLD)。但是python端口效率不高。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T14:02:04.350

首先要跟踪汽车，您必须以某种方式检测它（例如使用颜色分割/背景减法）。当检测到汽车时，您必须使用`cvCalcOpticalFlowPyrLK`. 我没有找到响应汽车检测的代码。

看看[这个](http://www.ces.clemson.edu/~stb/ece847/projects/VISION_BASED_VEHICLE_TRACKING.pdf)和[这篇](http://www.cse.unr.edu/~bebis/iasted08amol.pdf)文章。你的想法应该是一样的。

你的代码也有点错误。例如，为什么要`cvGoodFeaturesToTrack`在主循环中调用？您必须调用它一次 - 在循环之前检测要跟踪的良好功能。但这也会检测到非汽车。

看一下默认的 OpenCV 示例：[OpenCV/samples/cpp/lkdemo.cpp](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/lkdemo.cpp?rev=4118)。

# sql - 使用正则表达式进行 Postgresql 数据库搜索

> ID：11169152
> 
> 赞同：1
> 
> 时间：2012-06-23T11:30:49.013
> 
> 标签：sql, regex, postgresql

我正在使用带有 VB.NET 和 ODBC (Windows) 的 PostgreSQL 数据库。

我通过将 SELECT 与正则表达式相结合来搜索整个单词的句子，如下所示：

```
"SELECT dtbl_id, name 
   FROM mytable 
  WHERE name ~*'" + "( |^)" + TextBox1.Text + "([^A-z]|$)" 
```

这在某些情况下搜索得很好，但由于文本中的语法错误（或其他原因），它有时会失败。例如，如果我有句子

> 比利偶像：白色婚礼

将找到“白色”一词。但如果我有

> 冲突白暴动

然后找不到“white”，因为单词“white”的开头之间没有空格。

最简单的解决方案是将句子`:,.\/-=`等中的字符临时更改或替换为空格。

这是否可以在单个 SELECT 行中执行以适合与 .NET/ODBC 一起使用？也许在同一个正则表达式中？

如果是，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:09:40.747

尝试这个：

```
SELECT 'CLASH-WHITE RIOT' ~ '[[:<:]]WHITE[[:>:]]'; 
```

`[[:<:]]`并且`[[:>:]]`分别表示单词的开头和结尾

您可以在以下位置找到更多信息：[http ://www.postgresql.org/docs/9.1/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP](http://www.postgresql.org/docs/9.1/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP)

# vb.net - VB.Net动态添加用户控件的问题

> ID：11169157
> 
> 赞同：0
> 
> 时间：2012-06-23T11:31:24.960
> 
> 标签：vb.net, user-controls

我已经从学校设置了一个项目来在 VB.Net 中设计蛇，但我正在努力动态添加用户控件，该控件充当蛇体中的一个点。每次我在蛇上加一个点，以前的就消失了。我认为这是由于我通过创建对象的新实例覆盖了前一个实例，但我找不到添加新实例的方法。

```
 Dim body As New Dot
    Sub AddToSnake(ByVal i As Integer)
            'add 1 dot on to the back of the snake
            body.Location = New Point(50 + i, 50)
            body.Visible = True
            Me.Controls.Add(body)
         End Sub 
```

我曾尝试使用 body(i) 和其他方式添加对象的新实例，但被卡住了。当需要新的控件时，将调用该子程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:35:21.120

> 我认为这是由于我通过创建对象的新实例来覆盖前一个

您实际上并没有在任何地方创建新实例，您的代码只会创建单个实例`Dot`并修改单个实例在`AddToSnake`. 为了克服这个问题，创建一个`Dot`inside的新实例`AddToSnake`。

也就是说，无论如何，用户控件都不是正确的方法。您应该在控件上绘制蛇身`PictureBox`，并将身体保持为 aa `List(Of Point)`。然后，您可以简单地在列表末尾添加新点。

# objective-c - 我可以在它的意图功能或工作完成后停止某些代码执行部分吗？

> ID：11169162
> 
> 赞同：0
> 
> 时间：2012-06-23T11:32:18.217
> 
> 标签：objective-c, ios, xcode

很抱歉没有发布任何代码，因为我不知道这个逻辑。

我有一个while循环，只要用户按下按钮，它就会运行并在他再次按下后停止。但是我有一个条件需要检查一小段时间，直到它的条件得到满足（定时器不能满足我的需要）。所以我想执行那部分代码，直到它满足该条件，然后我不需要那部分代码来检查该条件，或者换句话说，我希望程序停止执行那部分代码以便我可以保存我为那部分代码浪费了执行时间。

那么这可能吗？或者这是我们在编程中无法实现的？

请注意，我不想实现计时器来完成这项工作！

已编辑（我需要建立的工作）

我正在检查的是加速度计更新...当用户按下按钮时更新开始。我已经设置了一个条件来检查它是否超过了某个值，如果超过了我想将一个计数存储到一个全局变量中。然后就像我说的那样，我不需要它来重复检查那个条件。因为我一旦开始就不会停止加速数据，除非用户按下按钮停止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:34:27.140

I have no idea what your code *will* look like... but yes, this is something you can easily accomplish [via Notifications](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i) (i.e. register for "`NSNotifications`" and when some condition is satisfied, it posts a notification and then any other objects listening will run a selector to "stop"). Or you can have your other threads monitoring some condition [via Key-Value-Observing](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html), so when some BOOL condition (that each of your sections of code are observing) changes, they can finish up whatever they're doing.

Hopefully this makes sense so far, but the overall idea is "yes, what you're asking for shouldn't be too hard to do".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:48:00.097

```
while(mainCondition)
{
    if(!extraCondidion)
    {
        // Do extra bit of code only until extra condition is met
    }

    // Do normal code that runs before and after extra condition is met
} 
```

# jquery - 两个测试站点，ajax 只适用于一个

> ID：11169168
> 
> 赞同：0
> 
> 时间：2012-06-23T11:32:57.903
> 
> 标签：jquery

我有两个开发站点调用`api.localhost`和`game.localhost`. 两者都是从旧版本的 Apache 运行的，它与在物理服务器上运行的相同，所以我不想更改它，除非我必须这样做。我也在运行旧版本的 PHP（除非必须，否则我不想更新它）。

问题是如果我在它上面运行一个测试页面（如下所示）`api.localhost`工作正常。如果我在同一页面上运行，`game.localhost`那么它会失败。起初我认为失败是由于我当时使用的 jquery.jsonrpc 导致的，所以我减少到只使用 jQuery ajax 调用。我将我正在调用的 index.php 文件的响应减少为一个简单正确的通用 jsonrpc 响应。实际的 ajax 调用来自另一个 SO question。萤火虫控制台出乎意料地`200 OK`在请求的红色字符串之后显示并且在其下方没有响应。

我看过的东西：

*   两个站点上都有相同版本的 jquery。
*   虚拟主机看起来不错。它们仅在错误日志文件名不同方面有所不同。
*   除了很多网站图标错误外，错误日志中没有任何内容。
*   主机文件看起来不错。那里没有什么不寻常的。

**索引.html**

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>test</title>
<head>
<body>
<script type="text/javascript" src="jquery.js"></script>
<script>
$(document).ready(function() {
    $.ajax({ 
        url: 'http://api.localhost/index.php',  
        data: JSON.stringify({jsonrpc:'2.0',method:'add', params:[1400,2100],id:"jsonrpc"}),  // id is needed !! 
        type:"POST", 
        dataType:"json", 
        success: function (result) {  
            alert("ok"); 
        }, 
        error: function (err,status,thrown) { 
            alert ("this syntax sucks!! " + " ERROR: " + err + " STATUS: " + status + " " + thrown ); 
        }, 
        complete: function (xhr,status) {  
            alert('Complete=>  showing status as: '+ status);  
            data = $.parseJSON(xhr.responseText);   
            alert (data); 
        }  
    }); 
});
</script>
test
</body>
</html> 
```

**api.localhost/index.php**

```
<?php
print '{"jsonrpc": "2.0", "result": 19, "id": 1}';
?> 
```

**是什么阻止了请求继续进行并得到服务？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:42:53.897

[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)阻止您在子域之间进行 AJAX 调用。

您可以尝试添加此行以允许跨子域请求：

```
document.domain = "localhost"; 
```

另一种方法是使用[JSONP](http://en.wikipedia.org/wiki/JSONP)绕过同源策略。

# sql - SQL 到 Magento 模型的理解

> ID：11169169
> 
> 赞同：1
> 
> 时间：2012-06-23T11:33:38.920
> 
> 标签：sql, magento

通过参考 SQL 了解 Magento 模型：

1.  `select * from user_devices where user_id = 1`
2.  `select * from user_devices where device_id = 3`

我如何使用我的 magento 模型执行相同的操作？`getModel("module/userdevice")`

另外，我怎样才能找到每个查询的行数

以下问题已在此线程中得到解答。

```
How to perform a where clause ?
How to retrieve the size of the result set ?
How to retrieve the first item in the result set ?
How to paginate the result set ? (limit)
How to name the model ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T12:00:27.460

你指的是集合

给你一些参考：

1.  [http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-b​​asics](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-basics)
2.  [http://alanstorm.com/magento_collections](http://alanstorm.com/magento_collections)
3.  [http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)
4.  lib/varien/data/collection/db.php 和 lib/varien/data/collection.php

因此，假设您的模块设置正确，您将使用集合来检索模型类型的多个对象。

语法是：

```
$yourCollection = Mage::getModel('module/userdevice')->getCollection() 
```

Magento 为开发人员提供了一些很棒的功能来使用集合。所以你上面的例子很容易实现：

```
$yourCollection = Mage::getModel('module/userdevice')->getCollection()
    ->addFieldToFilter('user_id', 1)
    ->addFieldToFilter('device_id', 3); 
```

您可以获得返回的对象数：

$yourCollection->count() 或简单地 count($yourCollection)

**编辑**

回答评论中提出的问题：“*如果我不需要一个集合而只需要一个特定的对象怎么办*”

这取决于您是否仍需要满足原始问题中的两个条件，或者您是否知道要加载的对象的 ID。

如果您知道对象的 id，那么只需：

```
Mage::getModel('module/userdevice')->load($objectId); 
```

但如果您仍希望基于这两个属性加载：

```
user_id = 1
device_id = 3 
```

那么您仍然会使用集合，但只需返回第一个对象（假设只有一个对象只能同时满足两个条件）。

为了重用，将此逻辑包装在一个方法中并放置在您的模型中：

```
public function loadByUserDevice($userId, $deviceId)
{
    $collection = $this->getResourceCollection()
        ->addFieldToFilter('user_id', $userId)
        ->addFieldToFilter('device_id', $deviceId)
        ->setCurPage(1)
        ->setPageSize(1)
    ;

    foreach ($collection as $obj) {
        return $obj;
    }
    return false;
} 
```

你可以这样称呼它：

```
$userId = 1;
$deviceId = 3;
Mage::getModel('module/userdevice')->loadByUserDevice($userId, $deviceId); 
```

**笔记：**

您可以将 loadByUserDevice 缩短为以下内容，但如果找不到对象，您将无法获得 false 返回值的好处：

```
public function loadByUserDevice($userId, $deviceId)
{
    $collection = $this->getResourceCollection()
        ->addFieldToFilter('user_id', $userId)
        ->addFieldToFilter('device_id', $deviceId)
    ;

    return $collection->getFirstItem();
} 
```

# database - 使用 Git 部署在 Azure 上迁移数据库架构

> ID：11169172
> 
> 赞同：10
> 
> 时间：2012-06-23T11:33:58.560
> 
> 标签：database, git, azure, migration

我正在寻找一种在 Windows Azure 上使用 Git 部署以及他们的 MySQL 或其他数据库解决方案的方法。

作为部署的一部分，我需要一种迁移数据库架构更改的方法——Azure 是否在不使用 Visual Studio 或 .NET 的情况下对此提供支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:28:28.847

您基本上想将 Azure 用作持续集成 (CI) 平台，而我的观点是 Azure 本身还不存在。

基于 git 的基本 CI 场景将涉及以下步骤。

1.  您的 src 代码和任何数据库架构/数据更新都被推送到 GitHub 等中央 git 存储库。[可用功能]
2.  然后 GitHub 会将更新推送到 Azure。[在 Azure 中不支持，直到它们支持 GitHub 挂钩]
3.  Azure 编译和部署代码。[支持的]
4.  Azure 从 repo 中提取的 sql 文件更新数据库（请记住，这需要自动化）。[不支持]
5.  Azure 报告运行数据库或 Web 应用程序的任何错误。[支持的]
6.  Azure 运行用户提供的集成测试以更彻底地检查特定功能并将这些测试的状态报告给用户 [不支持]。
7.  Azure 允许您回滚到以前的部署快照 [部分支持。例如，快照不基于 git 提交]。

我可能在其中一些点上错了，或者自从我写了这篇文章后可能会添加新功能。非常欢迎更正，我会尝试相应地更新列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:53:05.463

我不确定您对 Windows Azure 网站有多少经验，但是当您创建 Windows Azure 网站时，您可以使用直接与您的 Windows Azure 网站集成的 SQL Azure 数据库或 MySQL 云数据库。

因此，如果您将使用 SQL Azure 数据库，那么您可以通过以下链接迁移数据库：

[将数据库迁移到 Windows Azure SQL 数据库（以前称为 SQL Azure）](http://msdn.microsoft.com/en-us/library/windowsazure/ee730904.aspx)

要管理 MySQL，您可以使用 Local Web Server 来完成。我所做的方法是使用 PHP、MySQL 命令行工具（MySQL 的一部分）和在我的本地计算机上设置的 Web 服务器，并且我已经为 MySQL 启用了 PDO 扩展。这样我可以直接从我自己的本地机器上管理我的 MySQL，详细信息在本文底部进行了解释：

[创建 PHP-MySQL Windows Azure 网站并使用 Git 进行部署](https://www.windowsazure.com/en-us/develop/php/tutorials/website-w-mysql-and-git/)。

如果您使用 MySQL，您可以在 Workbench 中编写 SQL 部分，如果您使用 Oracle SQL，则可以使用 Oracle SQL Developer。

最后，Git Deployment 允许您将任何类型的应用程序直接部署到 Windows Azure，而无需使用 VSx。

# jquery - 需要 Jquery/CSS 帮助来回退 IE 和旧版浏览器

> ID：11169175
> 
> 赞同：2
> 
> 时间：2012-06-23T11:34:20.073
> 
> 标签：jquery, css

想知道你们中是否有人可以帮助我：

我制作了一个注册模式，它使用 CSS 转换在两种注册方法之间切换。我决定尝试“卡片翻转”类型的效果。

1.  在任何支持 CSS 3D 转换的浏览器中查看此 JSfiddle - 单击“老式方式”文本以“翻转”模式（为演示目的而简化）：http: [//jsfiddle.net/voodoo6/cnTMz/8/](http://jsfiddle.net/voodoo6/cnTMz/8/)
2.  然后看一下 IE8/9 - 因为“背面”比正面高，而 IE 不支持“背面可见性：隐藏；” 正面下方可以看到反面。

我一直在尝试使用 JQuery 和条件 CSS 在 IE（和较旧的浏览器）中加载时“显示：无”“返回”，然后添加“显示：块；” 类在点击时显示它，问题是，我是一个 JQuery 初学者，一直在努力让它工作！甚至不确定这是否是最好的方法？任何人都可以提出一种可以在功能较弱的浏览器中使用的方法吗？

谢谢你的建议。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:48:50.957

```
$().ready(function(){

var userAgent = navigator.userAgent.toLowerCase();
$.browser.chrome = /chrome/.test(navigator.userAgent.toLowerCase());
var browserName = '';
var version = '';
var displayPop = false;
var chromeversion=11; //working when chrome have version below 11 
var safariversion=5;  //working when safari have version below 5
var firefoxversion=3.6; //working when firefox have version below 3.6
var miseversion=9; //working when ie have version below 9
var operaversion=10; //working when opera have version below 10

if ($.browser.chrome) {
    userAgent = userAgent.substring(userAgent.indexOf('chrome/') + 7);
    userAgent = userAgent.substring(0, userAgent.indexOf('.'));
    $.browser.version = userAgent;
    $.browser.safari = false;
    browserName = 'Chrome';
    version = $.browser.version;
    displayPop= parseInt(version) < chromeversion ? true : false;
} else if ($.browser.safari) {
    userAgent = userAgent.substring(userAgent.indexOf('version/') + 8);
    userAgent = userAgent.substring(0, userAgent.indexOf(' '));
    $.browser.version = userAgent;
    $.browser.safari = false;
    browserName = 'Safari';
    version = $.browser.version;
    displayPop= parseInt(version) < safariversion ? true : false;
} else if ($.browser.mozilla) {
    browserName = 'Mozilla';
    var ver = userAgent.split('firefox/');
    version = ver[1];
    displayPop= parseFloat(version) < firefoxversion ? true : false;
} else if ($.browser.msie) {
    browserName = 'IE';
    version = $.browser.version;
    displayPop= parseInt(version) < miseversion ? true : false;
}

if (displayPop) {
        alert(browserName); // current browser name
        alert(version);// current version of the browser
        $('h1').html('Lower version!'); // write your code
}

}); 
```

# apache-flex - 创建新的动作脚本类时出现奇怪的错误

> ID：11169179
> 
> 赞同：0
> 
> 时间：2012-06-23T11:34:49.523
> 
> 标签：apache-flex, class, actionscript, flexbuilder

早上好，

我在 adobe flexbuilder 3 中工作时遇到一个非常奇怪的错误。

从昨天开始，当我创建一个新类时，Flex builder 就没有发现我的类有任何问题。

我如何创建一个：

1.  右键单击包层次结构中的文件夹 --> 新建 --> 动作脚本类

2.  我保留一切，但显然我给它起了个名字

3.  结束

类已创建。

我现在可以在这个类中输入任何东西......即使是“abc”和 flex builder 也没有看出这是错误的。

如果我去一个现有的班级并输入“abs”，我点击保存的那一刻就会抱怨“abc”

我尝试了以下方法，但问题仍然存在。

1.  删除了我的工作区并创建了一个新的并重新导入。
2.  如果我右键单击 Flex 导航器中的类，“包含库中的类”将显示为灰色。

如果有人可以给我一个想法，即使它很愚蠢，请做。我真的需要能够添加新课程。

谢谢

我创建的新类看起来像

```
package za.co.dcs.cib.das.application.vo.authorisation.appDetails.memberDetails
{
    public class MyNewlyTestClass
    {
        public function MyNewlyTestClass()
        {
        }

    }
} 
```

然后我将“ABC”添加到它......它不会抱怨。我可以在这门课中添加我想要的任何东西......而且没有什么是错误的。

```
package za.co.dcs.cib.das.application.vo.authorisation.appDetails.memberDetails
{
    public class MyNewlyTestClass
    {
        public function MyNewlyTestClass()
        {
        abc
        }

    }
} 
```

或者如果我删除该功能

```
package za.co.dcs.cib.das.application.vo.authorisation.appDetails.memberDetails
{
    public class MyNewlyTestClass
    {
        public MyNewlyTestClass()
        {

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:18:26.913

Flash Builder 简直是愚蠢的。ide 在键入时不会将 ActionScript 转换为抽象语法树，仅在保存时检查语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:01:46.207

不知道这是否是默认行为，但我发现...

如果我更改现有类，编译器会检查语法，但如果我添加一个随机文件，编译器只会在我的应用程序使用该文件时检查该文件。

我已经尝试过了，它似乎有效。您从应用程序中调用该文件的那一刻，它会验证并给我错误应该在哪里。

感谢您的所有更新

# c# - New async/await constructs in .net cause bumps

> ID：11169180
> 
> 赞同：1
> 
> 时间：2012-06-23T11:34:50.057
> 
> 标签：c#, .net, asynchronous, .net-4.5

I am trying to take advantage of new async/await constructs while working UdpClient. It has several async methods that work nice with async/await.

The problem occurs when I need to connect current request with appropriate response. Since responses from UdpClient are not ordered, it is possible to mess up whole logic by using:

```
var response = await udpClient.ReceiveAsync();
// We might receive here a response
// that belongs to other request 
```

Full source below:

```
// Here I am trying to provide unified message sending logic
private async Task<Response> SendMessageAsync(IPEndPoint destination, Message message)
{
    var stream = new MemoryStream();

    formatter.Serialize(stream, message);

    var buffer = stream.GetBuffer();

    // Here I am sending message 
    var numBytes = await udp.SendAsync(buffer, buffer.Length, destination);

    // Now I need to wait for response
    // but I can't just use:

    // var response = await udp.ReceiveAsync();

    // Because current receive operation might catch data that is subject to
    // another send message operation which has started some time before the
    // current one.

    // So how the question how is it possible to implement the following construct:

    // return await GetResponse(message.ConversationID);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:31:35.570

阅读回复后，您需要自己匹配它。

这是 UDP 的基本限制，而不是`async`/的限制`await`。

如果您需要保持消息井井有条，我建议使用 TCP。TCP 就是为此而设计的。

# android - fetching the last line from the server using android

> ID：11169188
> 
> 赞同：0
> 
> 时间：2012-06-23T11:35:53.907
> 
> 标签：android

I want to download only the last line displayed on the server to my android device. Can you please tell me the process or give a basic idea. I am trying to download files and then compare. But cant we do by just fetching the last line.

```
 try { 
                    BufferedReader br1 = new BufferedReader(new FileReader(file1));
                    BufferedReader br2 = new BufferedReader(new FileReader(file2));

                    String strLine1, strLine2;
                    boolean isSame = true;
                    StringBuilder finalText = new StringBuilder();
                    strLine1 = br1.readLine();
                    strLine2 = br2.readLine();
                    if (strLine1.equals(strLine2))
                        Toast.makeText(getBaseContext(), strLine2,
                                Toast.LENGTH_LONG).show();
                    else {
                        isSame = false;
                        Toast.makeText(getBaseContext(), strLine1,
                                Toast.LENGTH_LONG).show();
                        tv.setText(finalText.toString());

                    }
                }finally{
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:41:00.053

我认为应该有循环

```
 String thisLine ="";   
    String line="";
         while ((thisLine = br.readLine()) != null) { // while loop begins here
                 System.out.println(thisLine);
                  // line = line + thisLine ;
                     line = thisLine ;
               } // 
```

# imagemagick - Have problems installing imagemagick in particular with brew link libtiff

> ID：11169190
> 
> 赞同：0
> 
> 时间：2012-06-23T11:36:01.430
> 
> 标签：imagemagick, homebrew, libtiff

Basically I am trying to install imagemagick using brew and got the following error.

```
[~]$ brew install imagemagick
==> Installing imagemagick dependency: libtiff
==> Downloading http://download.osgeo.org/libtiff/tiff-4.0.1.tar.gz
Already downloaded: /Library/Caches/Homebrew/libtiff-4.0.1.tar.gz
==> ./configure --prefix=/usr/local/Cellar/libtiff/4.0.1
==> make install
Error: The linking step did not complete successfully
The formula built, but is not symlinked into /usr/local
You can try again using `brew link libtiff'
==> Summary
/usr/local/Cellar/libtiff/4.0.1: 239 files, 3.7M, built in 42 seconds
Error: You must `brew link libtiff' before little-cms can be installed
[~]$ brew link libtiff
Linking /usr/local/Cellar/libtiff/4.0.1... 
Error: Could not symlink file: /usr/local/Cellar/libtiff/4.0.1/share/man/man3/TIFFWriteDirectory.3tiff
Target /usr/local/share/man/man3/TIFFWriteDirectory.3tiff already exists. You may need to delete it. 
```

Everytime I remove one, I get the error message asking me to remove another file. I have already removed like 20 of those files and I am not sure how many more are there. Is there a easier way of doing this?

Appreciate any advice.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T06:54:06.113

尝试这个...

```
> brew link --overwrite libtiff 
```

# xml - Convert the word 2007 file in to XML

> ID：11169194
> 
> 赞同：0
> 
> 时间：2012-06-23T11:36:32.410
> 
> 标签：xml, ms-word, word-2007

I have a word 2007 .docx document. I have created its zip file by adding the extention ".zip" at the end. When I extract the zip file it gave me few folders with xml files in it. I want to get a single xml sheet by combining all the xml files that are there in the folders, in order to write a xsl style sheet for that. I do not want to open the ".docx" file and try "save as xml". Is there a way to do that? Or can I atleast have the WordML file of that document? If so how. Thank you in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:06:53.130

使用您选择的支持解压缩、目录树遍历和基于行的文本文件处理的工具（集）。首先解压缩您的word文件，保留存档的目录结构。接下来在您解压缩到的目录上启动您的目录步行器，处理所有`.xml`文件`.rels`；从每个文件中删除第一行（包含 xml 声明，例如`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>`），然后将每个文件依次连接到您的全局输出 xml 文件，该文件的第一行应包含一个 xml 声明本身。确保您的工具尊重 xml 文件的字符集编码（应该是 utf-8）。

[Perl](http://perldoc.perl.org)包[File::Find](http://search.cpan.org/~rjbs/perl-5.16.1/lib/File/Find.pm)和[Archive::Zip](http://search.cpan.org/~adamk/Archive-Zip-1.30/lib/Archive/Zip.pm)可以方便地完成这项任务，但您可以使用标准 cli 工具（zip/unzip、find、cat、sed）完成工作。

您可能必须使用一些综合区分属性来补充文件的顶级`Relationships`元素`.rels`以避免 id 冲突 - 大多数关系条目的适用性应该是唯一的给定`Type`属性，但 ms 规范对于 office 本身是否保证唯一的 id 似乎有点模糊同类型的关系项目（或者我没有仔细阅读规格......）。请注意，相关的非 xml 文件（图形、vba 代码）的名称显示在`[Content_Types].xml`和关系文件中。

希望（仍然）有帮助，问候，carsten

# c++ - HLSL 着色器（Phong /w 法线贴图）

> ID：11169195
> 
> 赞同：1
> 
> 时间：2012-06-23T11:36:33.343
> 
> 标签：c++, directx, hlsl, pixel-shading

**编辑：现在看来唯一剩下的问题是，如果我使用法线贴图计算，光线来自相反的方向。如果我只使用：**

```
n = normalize(Input.NorView); 
```

**似乎没问题。**

我开始使用 DirectX10 学习一些 HLSL 着色，并尝试使用法线贴图来计算我的 phong 闪电。首先，这是一个我已经走了多远的例子：

[http://i.stack.imgur.com/IFAo4.jpg](http://i.stack.imgur.com/IFAo4.jpg)

我不太确定这是否是我希望通过此法线贴图完成的目标：http: [//i.stack.imgur.com/moQvf.jpg](http://i.stack.imgur.com/moQvf.jpg)

我不知道..这看起来不应该更像 3Dish 吗？也许我对法线贴图的使用有一个错误的理解，但在我的想法中，法线贴图是用来通过在法线贴图的基础上添加阴影来使模型更详细的，所以它看起来更 3D ish。

这是我的着色代码：顶点着色器：

```
T3dVertexPSIn MeshVS(T3dVertexVSIn Input) {
    T3dVertexPSIn output = (T3dVertexPSIn) 0;
    float4 tempVar;

    output.Pos = mul(float4(Input.Pos.xyz, 1).xyzw, g_WorldViewProjection);

    output.Tex = Input.Tex;

    tempVar = mul(float4(Input.Pos.xyz, 1).xyzw, g_WorldView);
    output.PosView = tempVar.xyz;

    tempVar = mul(float4(Input.Nor.xyz, 0).xyzw, g_WorldViewNormals);
    output.NorView = tempVar.xyz;
    output.NorView = normalize(output.NorView);

    tempVar = mul(float4(Input.Tan.xyz, 0).xyzw, g_WorldViewNormals);
    output.TanView = tempVar.xyz;
    output.TanView = normalize(output.TanView);

    return output;
} 
```

像素着色器：

```
float4 MeshPS(T3dVertexPSIn Input) : SV_Target0 {
    float4 output = (float4)0; //output color

    float3 N = normalize(Input.NorView);

    float3 T = Input.TanView;

    T = normalize(T - N * dot(N,T));
    float3 B = cross(T,N);

    column_major float3x3 mTBN= {T, B, N};
    float4 matDiffuse = g_Diffuse.Sample(samAnisotropic, Input.Tex);
    float4 matSpecular = g_Specular.Sample(samAnisotropic, Input.Tex);
    float4 matGlow = g_Glow.Sample(samAnisotropic, Input.Tex);
    float4 colLight = float4(1,1,1,1);
    float4 colLightAmbient = float4(1,1,1,1);
    float3 n = mul(g_Normal.Sample(samAnisotropic, Input.Tex).rgb * 2.0 - 1.0, mTBN);
    //float3 n = mul(float3x3(T,B,N), nT);
    //float3 n = normalize(Input.NorView);
    float4 I = g_LightDirView;
    float3 r = reflect(-I.xyz, n);
    float3 v = normalize(-Input.PosView);

    float cd = 0.5f, cs = 0.3f, ca = 0.1f, cg = 0.3f;

    output = cd*matDiffuse*saturate(dot(n,I.xyz))*colLight
            +cs*matSpecular*pow(saturate(dot(r.xyz,v)),10)*colLight
            +ca*matDiffuse*colLightAmbient
            +cg*matGlow;

    return output;
} 
```

当我使用法线贴图时，我也有一种闪电正在改变方向的感觉。但我不确定。也许有人可以向我解释一下这件事。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:06:00.837

法线贴图不会产生阴影。简单地说，它允许您重新评估每个纹素的光照。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:53:55.850

好像我计算的法线不正确，一些纹理也得到了错误的法线。

# google-maps - 谷歌地图不显示缩放控件

> ID：11169198
> 
> 赞同：17
> 
> 时间：2012-06-23T11:37:26.910
> 
> 标签：google-maps, google-maps-api-3, zooming, infowindow

我正在使用 gmaps.js 插件[http://hpneo.github.com/gmaps/](http://hpneo.github.com/gmaps/)

滑动缩放控件和信息窗口不显示并且在显示时有一些问题。链接：[http ://bakasura.in/startupsradar/index.html](http://bakasura.in/startupsradar/index.html)

![在此处输入图像描述](../Images/70a5bfadb7465d26f37e1d7ce821ef0b.png)

```
// JavaScript Document
$(document).ready(function () {
    var map = new GMaps({
        div: '#map',
        lat: 13.00487,
        lng: 77.576729,
        zoom: 13,
    });

    GMaps.geolocate({
        success: function (position) {
            map.setCenter(position.coords.latitude, position.coords.longitude);
        },
        error: function (error) {
            alert('Geolocation failed: ' + error.message);
        },
        not_supported: function () {
            alert("Your browser does not support geolocation");
        },
        always: function () {
            //alert("Done!");
        }
    });

    map.addControl({
        position: 'top_right',
        text: 'Geolocate',
        style: {
            margin: '5px',
            padding: '1px 6px',
            border: 'solid 1px #717B87',
            background: '#fff'
        },
        events: {
            click: function () {
                GMaps.geolocate({
                    success: function (position) {
                        map.setCenter(position.coords.latitude, position.coords.longitude);
                    },
                    error: function (error) {
                        alert('Geolocation failed: ' + error.message);
                    },
                    not_supported: function () {
                        alert("Your browser does not support geolocation");
                    }
                });
            }
        }
    });

    map.addMarker({
        lat: 13.00487,
        lng: 77.576729,
        title: 'Lima',
        icon: "http://i.imgur.com/3YJ8z.png",
        infoWindow: {
          content: '<p>HTML Content</p>'
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-23T12:01:42.907

Bootstrap 与地图的渲染发生冲突

添加这些 CSS 行就可以了

```
/* Bootstrap Css Map Fix*/
#mainBody #map img { 
  max-width: none;
}
/* Bootstrap Css Map Fix*/
#mainBody #map label { 
  width: auto; display:inline; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T21:12:31.250

我以前有过这个，是我自己的一些 CSS 覆盖了地图中的一些值。我建议检查应用于 img 标签的所有样式。特别是全局设置为图像的宽度值。

# c - 为什么我的程序不能将大量 (>2GB) 保存到文件中？

> ID：11169202
> 
> 赞同：1
> 
> 时间：2012-06-23T11:38:15.580
> 
> 标签：c, large-files

我无法弄清楚为什么我的程序无法将超过 2GB 的数据保存到文件中。我无法判断这是编程问题还是环境 (OS) 问题。这是我的源代码：

```
#define _LARGEFILE_SOURCE
#define _LARGEFILE64_SOURCE
#define _FILE_OFFSET_BITS 64
#include <math.h>
#include <time.h>
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
/*-------------------------------------*/
//for file mapping in Linux
#include<fcntl.h>
#include<unistd.h>
#include<sys/stat.h>
#include<sys/time.h>
#include<sys/mman.h>
#include<sys/types.h>
/*-------------------------------------*/
#define PERMS 0600
#define NEW(type) (type *) malloc(sizeof(type))
#define FILE_MODE (S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH)

void write_result(char *filename, char *data, long long length){

int fd, fq;

  fd = open(filename, O_RDWR|O_CREAT|O_LARGEFILE, 0644);

  if (fd < 0) {
  perror(filename);
  return -1;
  }

  if (ftruncate(fd, length) < 0)
  {
  printf("[%d]-ftruncate64 error: %s/n", errno, strerror(errno));
  close(fd);
  return 0;
  }

  fq = write (fd, data,length);

  close(fd);

  return;

}

main()
{
long long offset = 3000000000; // 3GB
char * ttt;
ttt = (char *)malloc(sizeof(char) *offset);
printf("length->%lld\n",strlen(ttt));  // length=0
memset (ttt,1,offset);
printf("length->%lld\n",strlen(ttt));  // length=3GB
write_result("test.big",ttt,offset);
return 1;
} 
```

根据我的测试，该程序可以生成超过 2GB 的文件，也可以分配这么大的内存。当我尝试将数据写入文件时发生了奇怪的事情。我检查了文件，它是空的，应该用 1 填充。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:39:12.923

我要在这里冒个险，说你的问题可能出在 memset() 上。

我认为，在 memset() 之后，最好的办法是，

```
for (unsigned long i = 0; i < 3000000000; i++) {
  if (ttt[i] != 1) { printf("error in data at location %d", i); break; }
} 
```

一旦您验证了您尝试写入的数据是正确的，那么您应该考虑写入一个较小的文件，例如 1GB，看看您是否有同样的问题。消除每一个可能的变量，你就会找到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:49:28.803

您需要阅读更多关于 C 字符串以及做什么`malloc`和`calloc`做什么的内容。

在您的原始`main` `ttt`文件中，指向`malloc`调用时内存中的任何垃圾。这意味着 nul 终止符（C 字符串的结束标记，二进制 0）可以位于`malloc`.

此外，由于`malloc`不会触及分配内存的每个字节（并且您要求很多），因此您可能会获得稀疏内存，这意味着在读取或写入内存之前，该内存实际上在物理上是不可用的。

`calloc``calloc`分配并用 0 填充分配的内存。因此，它更容易失败（它触及分配的每个字节，因此如果操作系统使分配稀疏，则在填充后不会稀疏。）

这是您的代码，其中包含上述问题的修复程序。您还应该始终检查来自的返回值`write`并做出相应的反应。我会把它留给你...

```
主要的（）
{
    长长偏移= 3000000000；// 3GB
    字符 * ttt;
    //ttt = (char *)malloc(sizeof(char) *offset);
    ttt = (char *)calloc( sizeof( char ), offset ); // 而不是 malloc( ... )
    如果（！ttt）
    {
        puts("calloc 失败，再见！");
        退出（87）；
    }

    printf("长度->%lld\n",strlen(ttt)); // length=0（如果 calloc 没有失败，这现在可以正常工作）
    memset(ttt, 1, 偏移量);
    ttt[偏移量 - 1] = 0; // 现在它被 nul 终止了，下面的 printf 就可以工作了
    printf("长度->%lld\n",strlen(ttt)); //长度=3GB
    write_result("test.big",ttt,offset);
    返回 1；
}

```

Linux 大师注意...我知道稀疏可能不是正确的术语。如果我错了，请纠正我，因为我已经有一段时间没有被 Linux 细枝末节所埋没了。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T17:44:58.963

看起来您正在达到 iDevice 的内部文件系统限制：[ios - 具有超过 2GB 大小的资源文件的企业应用程序](https://stackoverflow.com/questions/9872699/ios-enterprise-app-with-more-than-resource-files-of-size-2gb)

2Gb+ 文件根本不可能。如果您需要存储如此大量的数据，您应该考虑使用其他一些工具或编写文件块管理器。

# python - 没有在 html 文件中获得所需的输出

> ID：11169203
> 
> 赞同：0
> 
> 时间：2012-06-23T11:38:20.307
> 
> 标签：python, web.py

我正在尝试制作一个分支预测器：

这是我在 app.py 中的代码：

```
import web
urls = (
'/hello','index'
)

app = web.application(urls,globals())

render = web.template.render('templates/', base='layout')

class index(object):
    def GET(self):
        return render.hello_form()

    def POST(self):
        form=web.input(name='nobody', rank=0)
        branch=None
        if form.rank<=4613:
            branch = 'COE, ECE,IT,ICE,MPAE,BT'
        if int(form.rank)<=7471 & int(form.rank)>4613:
            branch='ECE,IT,ICE,MPAE,BT'
        if int(form.rank)<=11325 & int(form.rank)>7471:
            branch = 'IT,ICE,MPAE,BT'
        if int(form.rank)<=16565 & int(form.rank)>11325:
            branch='ICE,MPAE,BT'
        if int(form.rank)<=17955 & int(form.rank)>16565:
            branch='MPAE,BT'
        if int(form.rank)<=20714 & int(form.rank)<17955:
            branch='BT'
        return render.index(branch=branch) 

if __name__=='__main__':
    app.run() 
```

这是我的 html 文件 hello_form.html 中的代码

```
<h1>NSIt Branch Predictor for First Round</h1>
<form action='hello' method ='POST'>
Your Name: <input type = 'text' name = 'name'>
<br>
AIEEE Rank: <input type = 'text' name ='rank'>
<input type='submit'> 
```

这是我在 index.html 中的代码：

```
$def with (branch)
branch: $branch 
```

我有 layout.html 如下：

```
$def with (content)
<html>
<head>
<title> first python website</title>
</head>
<body>
$:content
</body>
</html> 
```

但在输出中我得到：

```
branch: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:12:33.033

我从未使用过您正在使用的应用程序框架，但是您的`POST`方法存在很多问题。这是它应该看起来的样子。然后我将讨论这些问题和一些替代解决方案。

```
def POST(self):
    form = web.input(name='nobody', rank='0')
    rank = int(form.rank)
    if rank <= 4613:
        branch = 'COE, ECE,IT,ICE,MPAE,BT'
    elif rank <= 7471:
        branch = 'ECE,IT,ICE,MPAE,BT'
    elif rank <= 11325:
        branch = 'IT,ICE,MPAE,BT'
    elif rank <= 16565:
        branch = 'ICE,MPAE,BT'
    elif rank <= 17955:
        branch = 'MPAE,BT'
    elif rank <= 20714:
        branch = 'BT'
    else:
        branch = None
    return render.index(branch=branch) 
```

第一个问题是您的第一次比较是在字符串和整数之间进行的：`if form.rank<=4613`。那应该是`if int(form.rank)<=4613`。比较字符串和数字很少能达到您的预期。

```
>>> rank = '4613'
>>> rank <= 4613
False
>>> rank > sys.maxint
True 
```

接下来，您使用的是[按位和运算符`&`](http://docs.python.org/reference/expressions.html#binary-bitwise-operations)而不是[布尔`and`运算符](http://docs.python.org/reference/expressions.html#boolean-operations)。例如，`int(form.rank)<=7471 & int(form.rank)>4613`应该是`int(form.rank)<=7471 and int(form.rank)>4613`。

您可以通过使用[运算符链接](http://docs.python.org/reference/expressions.html#not-in)而不是这些`and`东西来改进这一点：

```
if rank <= 4613:
    branch = 'COE, ECE,IT,ICE,MPAE,BT'
if 4613 < rank <= 7471:
    branch = 'ECE,IT,ICE,MPAE,BT'
if 7471 < rank <= 11325:
    branch = 'IT,ICE,MPAE,BT' 
```

最终，除非您想使用某种基于区间的数据结构，否则最好将您所拥有的内容表示为`if`and语句链。`elif`对于这么简单的事情，这些`if`语句可以正常工作。

快乐的 Pythoning！

# database - 一桌还是四桌？（分贝结构）

> ID：11169205
> 
> 赞同：0
> 
> 时间：2012-06-23T11:38:42.880
> 
> 标签：database, data-structures, language-agnostic

项目连接到：
一个或多个“区域”和/或
一个或多个“县”和/或
一个或多个“城市”和/或
一个或多个“地方”。

我的问题是我应该如何建立关系：

```
id | thingID | regionId | countyId | cityId | placeId 
```

或者

4 `tables`?

```
id | thingId | regionId

id | thingId | countyId

id | thingId | cityId

id | thingId | placeId 
```

还是有其他更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:57:02.310

第二种选择显然更好。这些类别中的每一个都是多对多的关系，这就是第二个选项所描述的内容。

第一个选项会导致一些非常奇怪的数据。如果您有一个与所有不同类型关联一次的 ThingId，那么您将拥有一个填充了所有列的行。然后，如果您的 ThingId 需要与另一个城市相关联，那么您将拥有另一行只有填写了cityId，其他列保持为空。

导致大量空值的表设计通常（并非总是）表明您的模型存在缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:58:44.663

我可能想多了，但我认为“地区”、“县”、“城市”和“地方”之间可能存在关系——属于“地方”的项目也应该属于城市、县和地区。

您可以在您提供的两种设计中解决这个问题 - 但您需要大量额外的逻辑。在第一个解决方案中，您需要确保每次插入记录时，都从“左到右”填充位置 - 只有“位置”的记录是无效的。

在第二个解决方案中，您需要填充所有相关行——Chelsea 中的项目还必须具有伦敦、米德尔塞克斯和英格兰东南部的记录。

还有另一种方式...

```
Table: location
ID     Name                 Parent
------------------------
1     South East England    null
2     Middlesex             1
3     London                2
4     Chelsea               3
5     Kent                  1
6     Canterbury            5

Table: item
Id     name
-----------------
1      Posh Boy
2      Cricket ground
3      Rain

Table: item_location
ItemID    LocationID
--------------------
1        4    //Posh boy in Chelsea
2        2    // Cricket ground in Middlesex
3        1    // Rain in the South East of England. 
```

# php - 根据另一个数组中的值对数组进行排序

> ID：11169207
> 
> 赞同：1
> 
> 时间：2012-06-23T11:39:38.857
> 
> 标签：php, arrays, sorting

我有一个数组，我想根据另一个数组的值对其进行排序。第一个数组：

```
$array1 = ( '2' , [val]->'3' , [val1]->'1') 
```

第二个：

```
 $array2 = (1,4,3) 
```

我尝试了冒泡排序但不起作用：

```
 for ($i = 1 ; $i <= $array1[0] ; $i++){
    for ($j = $i+1 ; $j <= $array1[0] ; $j++){
        if ($array2[$i] < $array2[$j]){
            $temp = $array1[$i];
            $array1[$i] = $array1[$j];
            $array1[$j] = $temp;  
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:43:22.720

使用`usort()`，它允许你给用户定义的函数来排序..

[文档..](http://php.net/manual/en/function.usort.php)

# cocoa - 大纲视图中的鼠标事件

> ID：11169208
> 
> 赞同：0
> 
> 时间：2012-06-23T11:39:39.693
> 
> 标签：cocoa, mouseevent, nsoutlineview

我有一个包含拆分视图的窗口。其中一个“拆分”包含一个大纲视图。我有一个窗口控制器（它是窗口 XIB 的文件所有者）。窗口控制器是大纲视图的委托和数据源。

当我在窗口控制器中调用该`-(void)mouseDown:(NSEvent *)e`方法时，只有工具栏响应该方法 - 大纲视图没有。

如何获取大纲视图的鼠标事件，例如 mouseDown？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:33:19.667

获取大纲视图的鼠标事件：

1.  子类化大纲视图。
    *   在 Interface Builder (IB) > Library 面板 > Classes 选项卡中选择 NSOutlineView
    *   右键单击 NSOutlineView 并选择“新建子类...”
    *   完成以下弹出窗口选择“生成源文件”并将文件添加到您的项目中
    *   选择 NSOutlineView
    *   在 Inspector Panel > Identity 选项卡 > Class Identity > Class 中选择您的新班级
2.  实现鼠标事件方法

    *   在 Xcode > 您的大纲视图的新子类 > 实现 (.m) 文件中输入您的方法，例如

        ```
        (void)mouseDown:(NSEvent *)theEvent {
            /* CODE YOU WANT EXECUTED WHEN MOUSE IS CLICKED */
            NSLog(@"Mouse down occurred");
            // call this to get the usual behaviour of your outline
            // view in addition to your custom code
            [super mouseDown:theEvent];
        } 
        ```

知道可以通过使用`[NSEvent modifierFlags]`. 这不仅适用于大纲视图，也适用于整个应用程序的视图。例如，在窗口控制器（在问题中提到）中，我可以包含如下代码：

```
if ([NSEvent modifierFlags] == NSAlternateKeyMask) { // if the option key is being pressed
            /*SOME CODE*/
} 
```

# django - Django 表单向导 - 每个步骤的自定义表单布局

> ID：11169211
> 
> 赞同：2
> 
> 时间：2012-06-23T11:40:15.887
> 
> 标签：django, django-forms, django-templates, django-formwizard

目前我正在尝试使用 django 表单向导。基本设置现在可以工作了，我可以为显示可变文本的每个步骤调用不同的模板。

现在我想更进一步，为每一步创建一个自定义的表单布局。Django 的文档显示了一种显示表单的通用方式，总是垂直对齐。

在我的实验中，我有两个步骤：

*   第 1 步：电子邮件和密码（仅需要垂直对齐的两个字段）
*   第 2 步：个人数据：地址、职业、...

因此，对于第 2 步，我想使用与第 1 步完全不同的表单布局：使用字段集、字段水平对齐（例如地址：街道和号码），...

从 django 文档开始，我认为以下可以工作（尚未测试）：

```
{% block content %}
# block step: variable text for each step
{% block step %}{% endblock %}
<p>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>
<form action="" method="post">{% csrf_token %}
<table>
{{ wizard.management_form }}
{% if wizard.form.forms %}
    {{ wizard.form.management_form }}
    {% for form in wizard.form.forms %}
        # block form_if: shows a complete customized form layout for each step
        {% block form_if %}{% endblock %}
    {% endfor %}
{% else %}
    # block form_else: shows a complete customized form layout for each step
    {% block form_else %}{% endblock %}
{% endif %}
</table>
{% if wizard.steps.prev %}
<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}">{% trans    "first step" %}</button>
<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">{% trans "prev step" %}</button>
{% endif %}
<input type="submit" value="{% trans "submit" %}"/>
</form>
{% endblock %} 
```

但我在这里遇到的问题是我有两个`blocks`:`form_if`并`form_else`调用相同的表单布局。因此，我对表单布局进行了双重维护。

有没有更好的方法来实现我想要实现的目标？

谢谢！

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:01:45.230

根据 Rohan 的输入和以下[帖子](https://stackoverflow.com/questions/1178743/whats-the-best-way-to-duplicate-data-in-a-django-template)，我找到了一个可行的解决方案：

我的 base_wizard 模板如下所示：

```
<form enctype="multipart/form-data" action="" method="post">{% csrf_token %}
    <table>
        {{ wizard.management_form }}
        {% if wizard.form.forms %}
            {{ wizard.form.management_form }}
            {% for form in wizard.form.forms %}
                <!-- block below accesses a customized form layout for each step -->
                {% block form_if %}{% endblock %}
            {% endfor %}
        {% else %}
            <!-- block below accesses a customized form layout for each step -->
            <!-- using the with statement makes it possible to use the same layout used in the form_if block -->
            {% with form=wizard.form %}
            {% block form_else %}{% endblock %}
            {% endwith %}
        {% endif %}
    </table>
    {% if wizard.steps.prev %}
    <button name="wizard_goto_step" value="{{ wizard.steps.first }}" class="button">{% trans "first step" %}</button>
    <button name="wizard_goto_step" value="{{ wizard.steps.prev }}" class="button">{% trans "prev step" %}</button>
    {% endif %}
    <div>
        <input type="submit" value="{% trans "submit" %}" class="button"/>
    </div>  
</form> 
```

在每个步骤的模板中，我使用以下代码：

```
{% extends "base_wizard.html" %}

{% block form_if %}{% block form_else %}
    <fieldset>
        <legend>Title</legend>
        <div>
            <label>{{ form.field.label }}:<p class="note">{{ form.field.help_text }}</p></label> {{ form.field }}
            <p class="error">
                {% if form.field.errors %}
                    {% for error in form.field.errors %}
                        {{ error }}
                    {% endfor %}
                {% endif %}
            </p>
        </div>
    </fieldset>
{% endblock %}{% endblock %} 
```

使用它可以在每个步骤中只维护一个表单布局，而不是两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T08:31:32.247

可能在这种情况下，您可以在模板中使用“with”语句。类似于：在您的 block_if 和 block_else 中，将表单称为 myform。

```
{{ wizard.management_form }}
{% if wizard.form.forms %}
    {{ wizard.form.management_form }}
    {% for form in wizard.form.forms %}
        # block form_if: shows a complete customized form layout for each step
        {% with myform=form %}
        {% block form_if %}{% endblock %}
        {%e endwith %}
    {% endfor %}
{% else %}
    # block form_else: shows a complete customized form layout for each step
    {% with myform=form %}    
    {% block form_else %}{% endblock %}
    {% endwith %}
{% endif %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T18:00:56.870

您可以为每个步骤创建不同的模板。模板可以根据需要生成 html。

要告诉 django 对步骤使用不同的表单模板，您可以按照以下步骤操作...

```
class TestFormWizard(SessionWizardView):

    def get_template_names(self):
        if self.steps.current == 1:
            return 'step1_form.html'
        if self.steps.current == 2:
            return 'step2_form.html'
        return 'wz_form.html' 
```

您可以根据需要定义 step1_form.html、step2_form.html 等。提示：对于模板中的通用代码（即管理表单字段），创建不同的模板并将它们包含在每一步表单中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T18:12:53.017

试着看看[脆的形式](http://django-crispy-forms.readthedocs.org/en/d-0/index.html)。简而言之，您将`helper`在表单上设置一个实例属性，该属性几乎可以控制您希望通过构建表单来完成的大部分工作，而无需触及模板代码。

在某些情况下，如果您最终不得不自己手动编写整个标记，那么自定义表单的呈现方式会产生笨拙的模板。`form_helpers.py`在这里，您可以隔离和构建应用程序模块中的混乱。

如果您可以使用`crispy-forms`在创建表单布局方面提供的内容，您会发现定义表单助手布局所需的大约 10 行代码使您摆脱了数十行模板代码，否则您必须这样做维持。

在您的情况下，您最终会得到多个表单、每个特定表单的表单帮助程序实例和一个仅调用`crispy-form`标签以呈现向导为每个步骤提供的表单的模板。

# c# - 我如何删除关系 .HasOptional().WithMany() （EntityFramework）

> ID：11169215
> 
> 赞同：1
> 
> 时间：2012-06-23T11:40:52.477
> 
> 标签：c#, asp.net, entity-framework, entity-relationship

我有两个有关系的表：

```
 modelBuilder.Entity<User>()
        .HasOptional(u => u.Subscription)
        .WithMany(); 
```

我怎样才能删除关系？我想删除订阅但保留所有用户。如果我删除订阅 EF 抛出异常：

```
"The DELETE statement conflicted with the REFERENCE constraint
\"FK_Users_Subscriptions_Subscription_Id\". 
The conflict occurred in database \"db\",table \"dbo.Users\",
column 'Subscription_Id'.\r\nThe statement has been terminated. 
```

我想从用户访问订阅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:38:46.757

当您删除订阅时，您必须确保拥有该订阅的所有用户的订阅引用都设置为空，否则您违反了数据库中的外键约束。我认为，将订阅的用户加载到上下文中就足够了。EF 将自动修复关系：

```
using (var ctx = new MyContext())
{
    var subscriptionToDelete = ctx.Subscriptions.Find(subscriptionToDeleteId);
    ctx.Users.Where(u => u.Subscription.Id == subscriptionToDeleteId).Load();

    ctx.Subscriptions.Remove(subscriptionToDelete);

    ctx.SaveChanges();
} 
```

# webfonts - 在 typekit 上托管字体与自托管字体的优缺点是什么

> ID：11169218
> 
> 赞同：3
> 
> 时间：2012-06-23T11:41:07.057
> 
> 标签：webfonts, typekit, cloudflare

我正在做一个新网站，我实际上有许可/免费字体用作@font-face 网络字体。

我的问题是：由于这些字体也在 TypeKit.com 上，我是否真的从那里使用它们而不是自己托管字体获得了什么？

我的网站将通过 CloudFlare 运行，因此字体文件也将缓存在那里。

我有什么理由继续在这个特定网站上使用 TypeKit 吗？

最好的问候，迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-06T00:44:53.233

在选择托管字体文件的位置时，需要权衡性能、成本和稳定性。字体文件可以占页面文件大小和加载时间的很大一部分。理想情况下，您应该使用 CDN（内容交付网络）通过从分布在世界各地的位置提供文件来加快加载时间。CloudFlare 和 TypeKit 都使用 CDN。如果您自己托管字体文件，则可以将 CloudFlare 放在服务器前面以缓存和交付文件。CloudFlare 的真正好处是它们不根据页面浏览量/带宽收费（TypeKit 按浏览量收费）。如果您的网站突然变得非常受欢迎，您不会从 CloudFlare 收到巨额账单，而使用 TypeKit 会。此外，所有提供商都会时不时地出现中断。一些网络比其他网络具有更强大的设置。

另一方面：CloudFlare 通常不会在网页上缓存外部资源（例如 TypeKit 提供的字体）。仅当文件最初来自 CloudFlare 后面的服务器时，才会缓存文件。

# asp.net-mvc-3 - 信号员聊天室

> ID：11169222
> 
> 赞同：1
> 
> 时间：2012-06-23T11:42:08.570
> 
> 标签：asp.net-mvc-3, signalr

我正在尝试创建一个聊天应用程序，并且我已经读过 Signalr 是一个好用的东西。我寻找了它的例子，到目前为止，我已经这样做了：

```
<script src="Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.signalR.min.js" type="text/javascript"></script>

 <script type="text/javascript">
    $(function () {
        var connection = $.connection('echo');

        connection.received(function (data) {
            $('#messages').append('<li>' + data + '</li>');
        });

        connection.start();

        $("#broadcast").click(function () {
            connection.send($('#msg').val());
        });
    });
</script>
<input id="msg">
<input id="broadcast" type="button">
<ul id="messages"></ul> 
```

这只会创建一个连接。我想创建多个聊天室，如何建立另一个连接并将这些连接存储在数据库中，这样我就可以记录这些连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:50:34.610

使用 signalr 和 ASP.NET MVC 的基于 Web 的聊天的一个很好的例子是[http://jabbr.net](http://jabbr.net)。它具有聊天室、命令、微笑和其他有用的功能。只需探索其源代码，可在此处获得：[https ://github.com/davidfowl/JabbR](https://github.com/davidfowl/JabbR)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:23:51.867

我不认为您需要多个连接，但是对于一个很好的示例，您可以查看[gitHub](https://github.com/davidfowl/JabbR)上的 jabbr.net，这是一个使用 signalR 构建的开源聊天应用程序，由创建 SignalR 的同一个人创建。

# android - 如何在Android中捕捉RelativeLayout按下状态？

> ID：11169223
> 
> 赞同：0
> 
> 时间：2012-06-23T11:42:12.320
> 
> 标签：android, state, android-relativelayout, pressed

我有相对布局，里面有两个 TextView。按下RelativeLayout时如何更改文本颜色TextViews？

我试过使用选择器，但相对布局不支持文本颜色属性。

还尝试使用 OnFocus 和 OnTouch 侦听器捕获相对布局按下状态，但它们不工作（OnFocusChangeListener）或在一侧工作（OnTouchListener）。

编码：

```
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="243dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="@drawable/singup_button_selector"
        android:clickable="true"
        android:focusable="true"
        android:gravity="center"
        android:id="@+id/sungup"
        android:textColor="@drawable/singup_button_text_selector"
        android:focusableInTouchMode="true">

        <TextView
            android:id="@+id/singupTV1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:text="@string/singup"
            android:textColor="#3c5775"/>

        <TextView
            android:id="@+id/singupTV2"
            android:layout_width="300dp"
            android:layout_height="wrap_content"
            android:layout_below="@+id/singupTV1"
            android:layout_marginTop="15dp"
            android:gravity="center"
            android:text="@string/singup_extended"
            android:textColor="#506378"
            android:textSize="15dp" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:50:38.700

对我有用的是设置一个`OnTouchListener`.

```
setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event)
    {
        if(event.getAction() == MotionEvent.ACTION_DOWN || event.getAction() == MotionEvent.ACTION_MOVE) {
            // focus in
        } else{
            // focus out
        }

        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:18:23.007

您可以在 RelativeLayout 上设置 onClickListener，然后在 onClick 方法中，更改代码中两个 TextView 中的文本颜色。

# objective-c - 为 UIButton 添加背景阴影

> ID：11169225
> 
> 赞同：3
> 
> 时间：2012-06-23T11:42:37.260
> 
> 标签：objective-c, ios, cocoa-touch, uibutton

如何向 a 添加浅灰色阴影`UIButton`，我现在不想要一个方法来做到这一点，它应该是这样的：

```
UIButton *button1... button1.layer.shadowOpacity = 0.8 
```

等等，但这不起作用，它只会在按钮内部添加一个阴影，但我需要它在外面。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T13:29:16.700

首先你必须`#import <QuartzCore/QuartzCore.h>`。然后：

```
mybtn.layer.shadowColor = [UIColor blackColor].CGColor;
mybtn.layer.shadowOpacity = 0.5;
mybtn.layer.shadowRadius = 2;
mybtn.layer.shadowOffset = CGSizeMake(3.0f,3.0f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:17:13.620

您还可以使用[`–[UIButton setBackgroundImage:forState:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instm/UIButton/setBackgroundImage%3aforState%3a)将背景图像设置为[`UIControlStateNormal`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIControlStateNormal)带有阴影的图像。例如：

```
[button setBackgroundImage:[UIImage imageNamed:@"ButtonBackgroundNormal"]
                 forState:UIControlStateNormal]; 
```

哪里`ButtonBackgroundNormal.png`有影子。图像通常比使用代码绘制更快。而且，速度很重要，尤其是当您将其添加到`UITableViewCell`. 在这种情况下，为了加快滚动速度，请确保背景图像完全不透明，方法是使用与 相同的背景颜色设计它并在不透明的`UITableViewCell`情况下保存它。然后，设置`button.opaque = YES`.

# javascript - 页面加载时的许多请求（require.js）

> ID：11169229
> 
> 赞同：1
> 
> 时间：2012-06-23T11:42:54.893
> 
> 标签：javascript, jquery, requirejs

我正在尝试 require.js 并且只包含在我的主页上的 js 文件中。该 main.js 加载加载其他脚本。

我正在使用 yslow 测试我的网站的性能。它说我的页面有 15 个 js 文件，我应该尝试将它们合并为一个。这不就是 require.js 的目的吗？我不应该将我所有的 js 合并到一个大文件中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T11:44:42.367

好吧，RequireJS 的想法是将你的脚本构建成模块（小部分）。这样做时，您会注意到您将要处理许多模块和许多文件。

为了解决“文件多”的问题，[RequireJS 有一个优化器](http://requirejs.org/docs/optimization.html)。

> RequireJS 有一个优化工具，它执行以下操作
> 
> *   将相关脚本组合到构建层中，并通过 UglifyJS（默认）或 Closure Compiler（使用 Java 时的一个选项）将它们缩小。
> *   通过内联 @import 引用的 CSS 文件和删除注释来优化 CSS。

# java - Google App Engine Jsf2 欢迎文件列表不起作用

> ID：11169231
> 
> 赞同：0
> 
> 时间：2012-06-23T11:43:06.360
> 
> 标签：java, google-app-engine, jsf-2

我有一个网络应用程序。我正在使用 JSF2 框架。在谷歌应用引擎服务器上运行这个项目时，我的问题开始了。

```
<welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list> 
```

这部分 web.xml 文件没有给出正确的输出。当我输入 localhost:8080 时，找不到 index.html 页面。怎么了？请帮忙。完整的 web.xml 文件是：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://java.sun.com/xml/ns/javaee"

         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         id="WebApp_ID" version="2.5">
    <display-name>
        Wildstar Technologies, LLC. Google AppEngine JSF 2.0 Template
    </display-name>
    <description>
        Template JSF 2.0 application configured to run on the Google
        AppEngine for Java.
    </description>

    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>cupertino</param-value>
    </context-param>
    <context-param>
        <param-name>com.ocpsoft.pretty.DEVELOPMENT</param-name>
        <param-value>/WEB-INF/pretty-config.xml</param-value>
    </context-param>
    <servlet>
        <display-name>Remote API Servlet</display-name>
        <servlet-name>RemoteApiServlet</servlet-name>
        <servlet-class>com.google.apphosting.utils.remoteapi.RemoteApiServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>RemoteApiServlet</servlet-name>
        <url-pattern>/remote_api</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>ShowImage</servlet-name>
        <servlet-class>mucayufa.web.jsf2.ferizliAdmin.beans.ShowImage</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>ShowImage</servlet-name>
        <url-pattern>/show</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>Upload</servlet-name>
        <servlet-class>mucayufa.web.jsf2.ferizliAdmin.beans.UploadDocument</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Serve</servlet-name>
        <servlet-class>mucayufa.web.jsf2.ferizliAdmin.beans.Serve</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Upload</servlet-name>
        <url-pattern>/upload</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Serve</servlet-name>
        <url-pattern>/serve</url-pattern>
    </servlet-mapping>
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern><!--*/-->
    </filter-mapping>
    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/applicationContext.xml</param-value>
        </init-param>

    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/*</url-pattern><!--*/-->
    </servlet-mapping>

    <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>/*</url-pattern><!--*/-->
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- ***** Designate server-side state saving. *****  -->
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>

    <context-param>
        <param-name>com.sun.faces.expressionFactory</param-name>
        <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
    </context-param>
    <!-- Disable use of threading for single-threaded environments such as
 the Google AppEngine. -->
    <context-param>
        <param-name>com.sun.faces.enableThreading</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Production</param-value>
    </context-param>
    <!-- ***** Load the JavaServer Faces Servlet ***** -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <!-- ***** Load the JavaServer Faces Servlet ***** -->

    <!-- Map these files with JSF -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern><!--*/-->
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <!-- ***** Specify session timeout of thirty (30) minutes. ***** -->
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
 <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:27:45.820

不确定这是否是您的问题，但我的经验是有时在 devmode 下，找不到静态资源。

虽然这里说“默认情况下，WAR 中的所有文件都被视为静态文件和资源文件” [https://developers.google.com/appengine/docs/java/config/appconfig#Static_Files_and_Resource_Files](https://developers.google.com/appengine/docs/java/config/appconfig#Static_Files_and_Resource_Files)，但我肯定遇到过案例静态资源在开发模式下无法解析，即使它们应该并且在生产中执行。

我的意思是，如果在appengine-web.xml 中没有<include path="**.html" /> 的映射，例如html 文件不会被视为静态资源。

我会在 appengine-web.xml 中尝试一个显式的 <include> 映射，并确保没有 <exclude> 通配符路径可能解析为该文件，因为开发服务器似乎处理得不好。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-05-09T15:49:45.333

我有一个条目

```
<url-pattern>/</url-pattern> 
```

在 web.xml 中。评论说，它的工作...

# asp.net-mvc - 为什么 Elmah 不能识别我自己的 Exception 派生类型？

> ID：11169237
> 
> 赞同：2
> 
> 时间：2012-06-23T11:43:54.047
> 
> 标签：asp.net-mvc, elmah

我刚刚实现了 Elmah 来登录我的 MVC3 应用程序，当然一切都很好，除了当我使用信号记录自定义异常时，Elmah 似乎“看到”了我的自定义异常的 InnerException 属性，但不是自定义的异常本身。

当我使用下面的代码发出异常信号时，我没有在错误日志中看到“CtsDataException：错误”，正如我所料，我看到的是“DbEntityValidation：一个或多个实体的验证失败。”，内部异常和它的信息。如果我打开日志项，我会看到我的自定义异常已正确记录，因此看起来“异常描述符”是错误的，而不是实际的日志条目。

我究竟做错了什么？

PS，我的自定义例外是这样的：

```
public class CtsDataException: Exception
{
    public CtsDataException(string message, Exception innerException): base(message, innerException)
    {
        ValidationResults = new List<CtsDbValidationResult>();
        var vex = innerException as DbEntityValidationException;
        if (vex != null)
        {
            ValidationResults = vex.EntityValidationErrors.Select(e => new CtsDbValidationResult(e)).ToList();
        }
    }
    public IEnumerable<CtsDbValidationResult> ValidationResults { get; set; }
} 
```

信令代码如下所示：

```
protected void HandleDbEntityValidationException(DbEntityValidationException vex, string message)
{
    var ctsEx = new CtsDataException(message, vex);
    ErrorSignal.FromCurrentContext().Raise(ctsEx);
} 
```

`HandleDbEntityValidationException`在我的基本控制器上。它在派生控制器中调用，如下所示：

```
catch (DbEntityValidationException vx)
{
    var msg = string.Format("Error updating employee '{0}'", entity.RefNum);
    HandleDbEntityValidationException(vx, msg);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T13:20:05.960

我已经做了一些自己的测试，得出的结论是不是 ELMAH 选择只报告`InnerException`. 如果您查看错误的详细信息，然后单击**原始 ASP.NET 错误页面**，您会看到发生的原始黄色屏幕会将异常详细信息列为`InnerException`抛出的主要自定义异常，而不是主要的自定义异常。堆栈跟踪进一步显示了引发的原始自定义异常。这是 ELMAH 在记录错误时使用的信息。

我的测试包括创建一个`CustomException`除了继承自`Exception`. 然后我简单地打电话：

```
throw new CustomException("error!", new NullReferenceException()); 
```

...并且报告的是`NullReferenceException`仅`CustomException`出现在堆栈跟踪中的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:57:00.790

在这种情况下，我的选择理论是 ELMAH 选择显示抛出的异常，而不是用于包装它的异常。如果 ELMAH 有办法在日志中包含一条消息，我认为这种“包装在一个更具描述性但最终不相关的异常中，永远不会抛出”malarkey 可能会结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-02T07:42:34.517

我意识到我迟到了几年才能真正按时回答最初的问题，但是对于其他试图实现我认为是 OP 意图的人来说，我在 Hangfire 的 LibLog 包中遇到了一些聪明（略微改编） ：

```
 var _errorType = Type.GetType("Elmah.Error, Elmah");
        dynamic error = Activator.CreateInstance(_errorType, originalException);

        error.Message = "Your custom message";
        error.Type = "Error"; // Or type of original exception or ...
        error.Time = DateTime.Now;

        Elmah.ErrorLog.GetDefault(null).Log(error); 
```

# uitableview - Unrecognized Selector - Custom UITableView Section Headers

> ID：11169238
> 
> 赞同：0
> 
> 时间：2012-06-23T11:43:55.480
> 
> 标签：uitableview, header, unrecognized-selector

I'm trying to create a custom UIView (.h .m & .xib) for a UITableView Section Header.

The aim is that I can pass the Heading title using the following line:

```
sectionHeaderView.sectionLabel.text = @"SOME TEXT"; 
```

However this always causes the following error:

```
[UIView sectionLabel]: unrecognized selector sent to instance 0x6d3f6f0 
```

Why does it think this is a UIView when I declare it as DUSettingsSectionView? Here is the code. Hopefully someone can point me in the right direction.

==== CODE ====

From my UIViewController

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return 1;
}
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
return 16;
}
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
DUSettingsSectionView *sectionHeaderView = [[DUSettingsSectionView alloc] init];
//    sectionHeaderView.sectionLabel.text = @"SOME TEXT";
return sectionHeaderView;
} 
```

From DUSettingsSectionView.h

```
#import <UIKit/UIKit.h>
@interface DUSettingsSectionView : UIView {
    UILabel *sectionLabel;
}
@property (nonatomic, strong) IBOutlet UILabel *sectionLabel;
@end 
```

From DUSettingsSectionView.m

```
#import "DUSettingsSectionView.h"
@implementation DUSettingsSectionView
@synthesize sectionLabel;
- (id)initWithFrame:(CGRect)frame {
self = [super initWithFrame:frame];
if (self) {
    NSArray *nibArray = [[NSBundle mainBundle] loadNibNamed:@"DUSettingsSectionView" owner:self options:nil];
    self = [nibArray objectAtIndex:0];
}
return self;
}
@end 
```

sectionLabel is fully connected inside the .xib and the .xib is set to the DUSettingsSectionView class.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:06:44.150

似乎您加载了`initWithFrame:`DUSettingsSectionView 的 .xib 内部方法，但您`init`在内部调用`(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section` 要修复它，请更改`(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`为以下内容：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
  DUSettingsSectionView *sectionHeaderView = [[DUSettingsSectionView alloc] initWithFrame:frame];
  sectionHeaderView.sectionLabel.text = @"SOME TEXT";
  return sectionHeaderView;
} 
```

# android - Multiple AsyncTask do not execute together

> ID：11169241
> 
> 赞同：0
> 
> 时间：2012-06-23T11:44:31.703
> 
> 标签：android, multithreading

I have an issue here , if i invoke two AsyncTasks , the last one's doinbackground never gets called. I really need to invoke these two operations from my main activity threads.

Please shed some light on the issue..

Thanks

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    .
    .
    .
    .
    .
    .
    new ClientListener(this).execute();
    new DatabaseReader(this).execute();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:45:46.893

AsyncTask 使用线程池模式来运行来自 doInBackground() 的内容。问题最初是（在早期的 Android 操作系统版本中）池大小仅为 1，这意味着一堆 AsyncTask 没有并行计算。但后来他们修复了这个问题，现在大小为 5，所以最多 5 个 AsyncTask 可以同时运行。不幸的是，我不记得他们到底在哪个版本中改变了这一点。

根据谷歌文档

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。在 HONEYCOMB 之后，计划将其改回单线程，以避免并行执行导致的常见应用程序错误。如果你真的想要并行执行，你可以使用这个方法的 executeOnExecutor(Executor, Params...) 版本和 THREAD_POOL_EXECUTOR; 但是，请参阅那里的评论以获取有关其使用的警告。

# ruby-on-rails - 在作业、应用程序和用户之间创建关联的正确方法

> ID：11169247
> 
> 赞同：0
> 
> 时间：2012-06-23T11:44:53.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在创建一个允许用户创建和申请工作的应用程序。

我遇到的问题是让我的三个模型之间的关联正确。

目前我有以下内容：

```
 class App < ActiveRecord::Base
    belongs_to :job
    belongs_to :user
 end 

 class Job < ActiveRecord::Base
    belongs_to :user, :dependent => :destroy
    has_many :apps, :through => :users
 end

 class User < ActiveRecord::Base
    has_many :jobs
    has_many :apps, :through => :jobs
 end 
```

在我的应用程序数据库表中，我有两个额外的 user_id 和 job_id 列，以便可以在那里正确建立关联。

我也不确定如何为新应用程序创建表单。目前我使用了以下内容，但因为我没有应用程序作为用户的嵌套资源，所以我不确定这是否是导致问题的原因：

```
 class AppsController < ApplicationController

 def new
   @user = current_user
   @app = @user.apps.build
 end

def create
  @user = current_user
  @app = @user.apps.create(params[:app])
  if @app.save
    redirect_to user_path
  else
    render new_app_path
  end
end 
```

和

```
<%= form_for [@app] do |f| %>

<div class = "field">
    <%= f.label :name %>
    <%= f.text_field :name %>
</div>

<div class = "field">
    <%= f.label :cover_letter %>
    <%= f.text_field :cover_letter %>
</div>

<div class = "field">
    <%= f.label :cv %>
    <%= f.text_field :cv %>
</div>

<%= f.submit "Submit" %>

<% end %> 
```

如果有人可以提供一个示例，说明他们将如何设置此应用程序的关联以及他们将如何确保相关表单与此设置一起使用，那就太好了。

在此先感谢您的帮助！

我还将我的应用程序推送到 Github 以防万一：[Github Link](https://github.com/supert56/Jobapp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:03:34.277

我认为用户和工作之间会有多对多的关系。应用程序可以充当连接表（作为jobs_users）。

所以模型...

```
class App < ActiveRecord::Base 
    belongs_to :job
    belongs_to :user
end

class Job < ActiveRecord::Base
     has_many :users
     has_many :apps, :through => :apps
end

class User < ActiveRecord::Base
     has_many :jobs,:dependent => :destroy
     has_many :apps, :through => :apps
end 
```

对于嵌套形式，请通过此
[http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast](http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast)

# php - 使用 PHP 计算 JSON 结果中的记录

> ID：11169250
> 
> 赞同：1
> 
> 时间：2012-06-23T11:45:50.493
> 
> 标签：php, facebook, json

对大多数这些东西来说都是全新的，但基本上我在一个下雨的星期六下午玩 Facebook API 来应对一些挑战。

我已经获取了本页底部的代码：-

[http://developers.facebook.com/docs/reference/fql/](http://developers.facebook.com/docs/reference/fql/)

并稍微改变了一下。基本上我此时要做的只是在屏幕上打印朋友的总数，我认为这就像返回 JSON 查询返回的记录数一样简单，但我做错了. 我知道我做错了什么，但需要一个关于什么的指针。目前我的代码只返回 1，它应该是 160 左右。

我的代码在这里（我已经取出了我的应用程序 ID/秘密）：-

```
 <?php

  //Very basic code to pull out details about the logged in user.
  $app_id = 'myid';
  $app_secret = 'mysecret';
  $my_url = 'http://lab.2toria.com/facebook/test1.php';

  $code = $_REQUEST["code"];

 //auth user
 if(empty($code)) {
    $dialog_url = 'https://www.facebook.com/dialog/oauth?client_id=' 
    . $app_id . '&redirect_uri=' . urlencode($my_url) ;
    echo("<script>top.location.href='" . $dialog_url . "'</script>");
  }

  //get user access_token
  $token_url = 'https://graph.facebook.com/oauth/access_token?client_id='
    . $app_id . '&redirect_uri=' . urlencode($my_url) 
    . '&client_secret=' . $app_secret 
    . '&code=' . $code;
  $access_token = file_get_contents($token_url);

  // Run fql query
  $fql_query_url = 'https://graph.facebook.com/'
    . '/fql?q=SELECT+uid2+FROM+friend+WHERE+uid1=me()'
    . '&' . $access_token;
  $fql_query_result = file_get_contents($fql_query_url);
  $fql_query_obj = json_decode($fql_query_result, true);

  //Now need to find a way to count the number of results returned in the array to get the number of facebook friends.
  for($a=0;$a<count($fql_query_obj);$a++)
  {
    $theCount++;  
  }

  echo '<pre>';
  print_r("Number of friends:");
  print_r($theCount);
  echo '</pre>';

?> 
```

提前致谢。垫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:48:28.007

我不确定，但你不能只打印，`count($fql_query_obj)`因为它现在是一个数组，它应该返回相同的值，不是吗？

编辑：你检查过facebook是否给你一个有效的json_object吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:51:19.847

你应该做这个

> for($a=0;$a<count($fql_query_obj['data']);$a++)

因为 Facebook 响应将具有包含原始数据的数据属性。

# c# - Accessing the common entity properties in Inheriting Class in Fluent NHibernate

> ID：11169251
> 
> 赞同：-2
> 
> 时间：2012-06-23T11:45:51.987
> 
> 标签：c#, nhibernate, fluent-nhibernate

> I am implementing [repository model](http://code.google.com/p/nhibernate-repository-example/) for fluent nhibernate.
> 
> My project has the following structure

```
 public interface IRepository<T>
    {

    #region Create Methods 1

        /// <summary>
        /// This method Submits the Bonus Offer to the database.
        /// </summary>
        /// <param name="Value">Type of Bonus Subject Eg. Bonus1, Bonus2, Bonus3, Bonus4 </param>
        void SubmitPost(T Value);

        #endregion

        #region Read Methods 4

        /// <summary>
        /// This method retrieves the Bonus offers not older than a month.
        /// </summary>
        /// <returns>Returns a List of Type T which is collection of particular type of Bonus Subject Eg. Bonus1, Bonus2, Bonus3, Bonus4</returns>
        IList<T> GetPostsNotOlderThan30Days();

        /// <summary>
        /// This method returns the most recent 10 posts.
        /// </summary>
        /// <returns>Returns a List of Type T which contains a collection of Bonus offers which are the top 10 recently posted ones.</returns>
        IList<T> GetRecent10Posts();

        /// <summary>
        /// This method returns a Bonus Subject given its matching Id Provided.
        /// </summary>
        /// <param name="Id">Id of the Bonus Subject of Type T. Eg. If of any of the Bonus1, Bonus2, Bonus3, Bonus4 Subjects.</param>
        /// <returns></returns>
        T GetPostById(object Id);

        /// <summary>
        /// This method returns all the Bonus offers of any Particular Bonus Subject posted by a particular user.
        /// </summary>
        /// <param name="UserId">Logged In UserId</param>
        /// <returns></returns>
        IList<T> GetUserPosts(object UserId);
        #endregion
    } 
```

> ```
>  and I have 4 Bonus Types
>     namely Bonus1, Bonus2, Bonus3, Bonus4
>     All these have some common properties like DateUpdated, DateExpires.
> 
>     And when I wanted to implement the class for IRepository which is BonusRepository 
> ```

```
 public class BonusRepository<T>:IRepository<T> where T:class
        {
            protected Configuration config;
            protected ISessionFactory sessionFactory;

            public BonusRepository(string conStr)
            {
                config=Fluently.Configure()
                    .Database(
                        MsSqlConfiguration
                        .MsSql2008
                        .ConnectionString(conStr))
                        .Mappings(m => m.FluentMappings.AddFromAssemblyOf<BonusRepository<T>>())
                    .BuildConfiguration();
                sessionFactory = config.BuildSessionFactory();
            }

            #region Create Methods 1

            /// <summary>
            /// This method Submits the Bonus Offer to the database.
            /// </summary>
            /// <param name="value">Type of Bonus Subject Eg. Bonus1, Bonus2, Bonus3, Bonus4</param>
            public void SubmitPost(T value)
            {
                using (var session = sessionFactory.OpenSession())
                using (var transaction = session.BeginTransaction())
                {
                    session.Save(value);
                    transaction.Commit();
                }
            }
            #endregion

            #region Read Methods 4

            /// <summary>
            /// This method retrieves the Bonus offers not older than a month.
            /// </summary>
            /// <returns>Returns a List of Type T which is collection of particular type of Bonus Subject Eg. Bonus1, Bonus2, Bonus3, Bonus4</returns>
            public IList<T> GetPostsNotOlderThan30Days()
            {
                using (var session = sessionFactory.OpenSession())
                using (var transaction = session.BeginTransaction())
                {
                  //Here I'm unable to get DateUpated, DateExpires
                  IList<T> returnVal=session.QueryOver<T>()
                       .Where(c=>c.

                }
            }
    } 
```

> while I'm also having classes like below Bonus1Repository: BonusRepository, IRepository Bonus2Repository: BonusRepository, IRepository Bonus3Repository: BonusRepository, IRepository Bonus4Repository: BonusRepository, IRepository but as the desired functionality is same across all the entites I wanted to implement in BonusRepositry class iteslf. What is the best approach for this ? Can anyone suggest the solution for this?
> 
> Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:23:02.250

如果我正确理解您的问题，您可以为您的奖励实体创建一个界面，指定共同成员。例如

```
public interface IBonus
{
    string GetBonusValue();
    DateTime DateUpdated{ get; set; }
} 
```

然后使用`IBonus`界面约束您的 BonusRepository。例如

```
public class BonusRepository<T> : IRepository<T> where T : class, IBonus 
```

这将使您可以访问泛型类中的`IBonus`成员。`BonusRepository<T>`

# qt - 在 Qt 4.8.0 中使用 OpenCV 2.3.1 时应用程序在启动时崩溃

> ID：11169255
> 
> 赞同：0
> 
> 时间：2012-06-23T11:46:57.153
> 
> 标签：qt, opencv, crash

我尝试使用 OpenCV 功能控制我的相机。构建进度很好，但是，当我尝试运行我的程序时它崩溃了，Qt 只提供有关退出代码 -1073741515 的信息。我尝试使用 OpenCV 函数注释所有代码，程序似乎没问题。我包含的库是错误的吗？

**opencv.pro**

```
QT       += core gui

TARGET = opencv
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui

INCLUDEPATH += F:/opencv/build/include
INCLUDEPATH += F:/opencv/build/include/opencv

LIBS += F:/opencv/build/x86/mingw/lib/libopencv_calib3d231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_contrib231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_core231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_features2d231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_flann231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_gpu231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_highgui231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_imgproc231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_legacy231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_ml231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_objdetect231.dll.a
LIBS += F:/opencv/build/x86/mingw/lib/libopencv_video231.dll.a 
```

**主窗口.cpp**

由于 MainWindow.cpp 很长，我将在此处粘贴构造函数并在需要时添加其余部分。

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    cam = NULL;
    frame = NULL;
    timer = new QTimer;
    imag = new QImage();
    connect(timer,SIGNAL(timeout()),this,SLOT(readFrame()));
    connect(ui->open,SIGNAL(clicked()),this,SLOT(openCamara()));
    connect(ui->pic,SIGNAL(clicked()),this,SLOT(takingPictures()));
    connect(ui->closeCam,SIGNAL(clicked()),this,SLOT(closeCamara()));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:31:01.773

终于开始工作了！当我尝试从 Windows 资源管理器运行该应用程序时，它抱怨缺少**libstdc++-6.dll**。虽然存在于 C:\QtSDK\mingw\bin 下，但它的版本对于 OpenCV 2.3 不正确（或任何其他原因？）并会导致错误。我从[这里](http://code.google.com/p/wtfu/downloads/detail?name=libstdc%2b%2b-6.dll&can=2&q=)得到了一个，程序运行正常。

# java - 无法使用 mockito 模拟方法调用

> ID：11169256
> 
> 赞同：0
> 
> 时间：2012-06-23T11:47:08.740
> 
> 标签：java, mockito

我正在编写一个测试用例，我试图使用 mockito 来避免通过控制台输入文本。但是在运行测试用例时，它会等待在控制台中输入某些内容（这也是我无法做到的），而不是从 mockito 获取它。如果有人可以提供帮助将不胜感激。测试代码如下所示：

```
SongsNameUpdater songsNameUpdater = new SongsNameUpdater();
bufferedReader = mock(BufferedReader.class);
when(bufferedReader.readLine()).thenReturn("test Path");
songsNameUpdater.updateSongNames(); 
```

主要代码是：

```
public class SongsNameUpdater {
       public void updateSongNames() throws IOException {
               bufferedReader = new BufferedReader(new InputStreamReader(System.in));
               String path = bufferedReader.readLine();
               System.out.println(path);
       }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T11:53:15.150

你必须传递你的 BufferedReader 模拟，例如`updateSongNames(bufferedReader)`，而不是在方法中实例化它

# iphone - ios iphone UITextField events

> ID：11169257
> 
> 赞同：0
> 
> 时间：2012-06-23T11:47:34.030
> 
> 标签：iphone, ios, events, uitextfield

I have a UITextField in the event calls a function EditingDidEnd A to validate the contents of the field, then I have a button that calls a function B by passing the contents of text field and then brings me to another view which shows the results . The issue is that if the text field is empty by giving the button brings me to the view of results and then shows me the error that the field is empty ... :) Typical rookie with the theme events ... What you suggest I use? Exit on I put a function that validates for not following that execution??!

Thanks in advance,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:51:42.527

只需检查您的委托方法中的空文本，如果它是空的，则什么也不做。

```
if (!textField.text || [textField.text isEqualToString:@""])
   return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:53:54.607

按下按钮时进行验证

```
-(void)buttonNextClicked:(id)sender
{
     if(!self.textField.text || [self.textField.text isEqualToString:@""])
     {
          // Show an alert with validation message
          return;
     }

     //Proceed with the new view
} 
```

如果您想在编辑停止后立即进行验证，请创建一个验证方法并在两个地方调用它

```
-(BOOL)isInputTextValid:(NSString *)txt
{
    if(!txt)
       return NO;
    if([txt isEqualToString:@""])
       return NO;
    if(other_invalid_values)
       return NO;

    return YES;
} 
```

# regex - awk 按空格序列分割

> ID：11169264
> 
> 赞同：1
> 
> 时间：2012-06-23T11:49:08.867
> 
> 标签：regex, awk, split, whitespace, separator

可以`split(string, array, separator)`在**awk**中 使用空格序列作为分隔符（或更一般地说，任何正则表达式作为分隔符）？

显然，可以使用内部自动拆分（在输入的每一行上运行，`FS`变量的值作为分隔符），并且使用简单`for`而`$0`神奇的方法来解决问题。但是，我只是想知道是否有更直接的方法使用它`split`本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:55:04.373

从 GNU awk(1) 手册页：

```
split(s, a [, r]) 
```

> 将字符串 s 拆分为正则表达式 r 上的数组 a，并返回字段数。如果省略 r，则使用 FS。

这里的重点是您可以使用任何正则表达式来执行字段拆分——至少您可以使用 gawk。如果您使用其他东西，则需要检查您的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T11:56:25.410

[GNU Awk 用户指南](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html)指出：

```
split(string, array, fieldsep) 
```

> 这将字符串分成由fieldsep分隔的片段，并将这些片段存储在数组中。第一部分存储在数组 [1] 中，第二部分存储在数组 [2] 中，依此类推。第三个参数***fieldsep的字符串值是一个***描述在哪里分割字符串的正则表达式（就像FS可以是一个描述在哪里分割输入记录的正则表达式）。如果省略 fieldsep，则使用 FS 的值。split 返回创建的元素数。然后， split 函数以类似于将输入行拆分为字段的方式将字符串拆分为片段

这是一个简短（有点傻）的示例，它使用一个简单的*正则表达式* `".s "`来匹配任何单个字符，后跟一个小写字母`s`和一个空格。拆分的结果被放入 array `a`。请注意，匹配的部分*不会*放入数组中。

```
BEGIN { 
  s = "this isn't a string yes isodore?"
  count = split(s, a, ".s ")
  printf("number of splits: %d\n", count)

  print "Contents of array:"
  for (i = 1; i <= count; i++) 
    printf "a[%d]: %s\n", i, a[i]
} 
```

输出：

```
$ awk -f so.awk

number of splits: 3
Contents of array:
a[1]: th
a[2]: isn't a string y
a[3]: isodore? 
```

文章[Advanced Awk for Sysadmins](http://www.linuxforu.com/2011/06/advanced-awk-for-sysadmins/)展示了一个使用`split()`. 此[页面](http://www.unix.com/shell-programming-scripting/31140-regular-expression-query-awk.html)包含使用正则表达式将数据拆分为数组的示例。

# java - in java, how to print entire line in the file when string match found

> ID：11169266
> 
> 赞同：0
> 
> 时间：2012-06-23T11:49:19.183
> 
> 标签：java

i am having text file called "Sample.text". It contains multiple lines. From this file, i have search particular string.If staring matches or found in that file, i need to print entire line . searching string is in in middle of the line . also i am using string buffer to append the string after reading the string from text file.Also text file is too large size.so i dont want to iterate line by line. How to do this

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T11:53:46.763

您可以使用[Apache Commons IO的 FileUtils 来完成](http://commons.apache.org/io/)

小样本：

```
 StringBuffer myStringBuffer = new StringBuffer();
    List lines = FileUtils.readLines(new File("/tmp/myFile.txt"), "UTF-8");
    for (Object line : lines) {
        if (String.valueOf(line).contains("something")) { 
            myStringBuffer.append(String.valueOf(line));
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-09T09:29:52.517

我们还可以将正则表达式用于文件中的字符串或模式匹配。

示例代码：

```
import java.util.regex.*;
import java.io.*;

/**
 * Print all the strings that match a given pattern from a file.
 */
public class ReaderIter {
  public static void main(String[] args) throws IOException {
    // The RE pattern
    Pattern patt = Pattern.compile("[A-Za-z][a-z]+");
    // A FileReader (see the I/O chapter)
    BufferedReader r = new BufferedReader(new FileReader("file.txt"));
    // For each line of input, try matching in it.
    String line;
    while ((line = r.readLine()) != null) {
      // For each match in the line, extract and print it.
      Matcher m = patt.matcher(line);
      while (m.find()) {
        // Simplest method:
        // System.out.println(m.group(0));
        // Get the starting position of the text
        int start = m.start(0);
        // Get ending position
        int end = m.end(0);
        // Print whatever matched.
        // Use CharacterIterator.substring(offset, end);
        System.out.println(line.substring(start, end));
      }
    }
  }
} 
```

# c# - 在 AFORGE.NET 中创建结构元素

> ID：11169271
> 
> 赞同：1
> 
> 时间：2012-06-23T11:50:03.390
> 
> 标签：c#, image-processing, aforge

我需要创建一个 4x13 大小的结构元素。我的理解是，对于我的情况，结构元素可以是 3x3、5x5 或 13x13。如果我要创建 4x13，它应该像 13x13 结构元素一样，我应该用“1”填充它的 4x13 区域，其余的为零吗？因为 Aforge.Net 不允许我直接使用 4x13。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:07:55.593

我设法创建了一个可以自动为我填充索引的方法

# facebook - 在没有任何权限的情况下获取 Facebook Page Feed 及其喜欢/评论

> ID：11169273
> 
> 赞同：1
> 
> 时间：2012-06-23T11:50:19.863
> 
> 标签：facebook, facebook-graph-api, facebook-page

我正在尝试获取所有喜欢或评论 Facebook 页面上状态的用户的用户 ID。我尝试使用 graph.facebook.com/page_id/posts?access_token=... 但它只给了我 2-4 个喜欢的用户 ID 和他们的总数，类似的评论。有没有办法获取所有的id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:49:22.110

根据[“发布”对象的文档](https://developers.facebook.com/docs/reference/api/post/) （并由我在我自己的页面上使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)工具验证），这些工作：

*   `/POST_ID/comments`获取评论
*   `/POST_ID/likes`获取喜欢

# c# - C# 打印在 calc 中创建的 A5 文档（打开办公室）

> ID：11169274
> 
> 赞同：0
> 
> 时间：2012-06-23T11:50:38.107
> 
> 标签：c#, printing, formatted-text

我每天在办公室使用 calc 文档打印几次手动输入的信息，因此我决定通过从 mysql 检索数据并自动填写表格来加快处理速度。问题是我不知道如何设置 printDocument 以使打印结果与原始 calc 文档相同。文件在纸张上的特定位置应该有不同的文字大小，纸张必须是 A5，我需要插入一个小 .jpg 代表我的印章。有没有办法在某处设计文档并将其与 printDocument 对象“连接”？或者我应该逐行从头开始创建它？到目前为止，我只设法在 printPreviewControl 中创建简单的文本行，但没有格式化，也不是我想要的位置......如果我在网络浏览器中预览 calc 文档，获取源代码并将其发送到我的应用程序中的网络浏览器控件中，这样会更容易吗？我是否能够通过以编程方式选择正确的设置来自动化打印过程？（打印机和 A5 尺寸）

# ruby-on-rails-3 - rubyZip Gem：想要在 RoR 中压缩远程文件

> ID：11169275
> 
> 赞同：5
> 
> 时间：2012-06-23T11:50:49.733
> 
> 标签：ruby-on-rails-3, zipfile, rubyzip

我想在压缩后从我的网站下载照片。我正在使用 ruby​​Zip gem，但无法压缩远程文件。以下是场景：

我正在尝试从服务器压缩内容。内容是这样的

[http://myApplication.s3.amazonaws.com/xxxxxxxx/image/image1.jpeg](http://myApplication.s3.amazonaws.com/xxxxxxxx/image/image1.jpeg)，

所以在“zipfile.add(attachment.document_file_name, attachment.document.url)”中，我分配了以下值：

document_file_name = image1.jpeg/image2.jpeg/image3.jpeg document.url = [http://myApplication.s3.amazonaws.com/xxxxxxxx/image](http://myApplication.s3.amazonaws.com/xxxxxxxx/image)

现在在这里我收到以下错误：

没有这样的文件或目录 - myApplication.s3.amazonaws.com/xxxxxxxx/image

如果我从本地文件系统（例如：/home/user/images）压缩文件，这个 gem 可以正常工作，但不能用于远程文件。

我做错了什么吗？有人可以帮我吗？或者任何其他可以做到这一点的宝石？

谢谢，-Tahniyat

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T08:31:46.197

您可以做的是首先从 s3 读取它，将其直接写入存档文件（将存档文件放入您的临时目录），提供它然后删除临时存档文件。这是一个小片段：

```
 require 'zip/zip'

  s3 = Aws::S3.new(S3_KEY, S3_SECRET)
  bucket_gen = Aws::S3Generator::Bucket.create(s3, S3_BUCKET)
  archive_file = "#{Rails.root}/tmp/archive.zip"

  Zip::ZipOutputStream.open(archive_file) do |zos|
    list_of_files_to_loop.each do |file|
      filename = file.filename
      url = "#{S3_PATH}/#{filename}"

      signed_url = bucket_gen.get(URI.unescape(URI.parse(URI.escape(url)).path[1..-1]), 1.minute)

      zos.put_next_entry(filename) # Give it next file a filename
      zos.print(URI.parse(signed_url).read) # Add file to zip
    end
  end # Write zip file

  # TODO: Serve file
  # TODO: Delete archived file from tmp directory 
```

参考： [http ://rubyzip.sourceforge.net/classes/Zip/ZipOutputStream.html](http://rubyzip.sourceforge.net/classes/Zip/ZipOutputStream.html)

# css - Twitter Bootstrap 2.0 中是否内置了任何东西来对齐表格内容？

> ID：11169277
> 
> 赞同：23
> 
> 时间：2012-06-23T11:50:55.247
> 
> 标签：css, twitter-bootstrap, twitter-bootstrap-2

通过设置“align”属性可以很容易地对齐表格，但是通过 css 对齐表格有点 hacky。Twitter Bootstrap 2.0 中是否内置了对表格对齐的支持？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-29T10:40:06.097

没有内置任何东西来支持这一点，但很容易添加如下内容：

```
.table th.rightCell,
.table td.rightCell {
  text-align: right;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-27T15:06:26.303

Bootstrap 的[对齐类](http://twitter.github.com/bootstrap/base-css.html#typography)包括`.text-right`哪些集合`text-align: right`。

不幸的是`text-align: left`，为表格单元格设置了引导集，因此应用于`.text-right`a`<td>`没有任何效果：

```
<td class="text-right">
  Still left aligned
</td> 
```

但是，添加到单元格*内*`.text-right`的块元素确实有效：

 *```
<td>
  <p class="text-right">Right aligned</p>
</td>
<td>
  <div class="text-right">Right aligned</div>
</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T13:18:52.100

对于“td”，我使用了包含在引导 css 中的它：

```
<td class="pagination-centered"> 
```*

# youtube - Youtube API - 视频不可用

> ID：11169278
> 
> 赞同：0
> 
> 时间：2012-06-23T11:50:59.493
> 
> 标签：youtube, youtube-api

有什么方法可以检测视频是否被删除或不可用？如果它已从 youtube 服务器中删除，我们需要能够将其从视频列表中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:01:28.647

如果您使用 youtube API，Hung BUI 有一种方法可以过滤您所在地区已删除或不可用的视频。

请观看此视频并搜索到2m:03s，导师会说如何过滤不可用和受限视频，..

[YOUTUBE 搜索 API 上的 Youtube 视频](http://www.youtube.com/watch?v=sOEAD-gfJ_M)

使用参数格式和限制以及 youtube api 端点

> [https://gdata.youtube.com/feeds/api/videos?q=GoogleDevelopers&max-results=1&v=2.1&alt=jsonc&format=5&restriction=DE](https://gdata.youtube.com/feeds/api/videos?q=GoogleDevelopers&max-results=1&v=2.1&alt=jsonc&format=5&restriction=DE)

如果您点击 youtube 的此端点，您可以获得一组可以嵌入的 youtube 视频，并且我们可以检查该视频是否在我们当地受到限制。

# objective-c - UITableViewCell 在自定义单元格中具有备用背景颜色

> ID：11169281
> 
> 赞同：3
> 
> 时间：2012-06-23T11:51:22.567
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我希望我的 UITableViewCells 的背景每显示两个单元格都有不同的颜色，但是当我向下和向后滚动时，它们都会得到相同的颜色。知道我的单元格具有不同的 contentView 大小（根据它们的内容），我怎样才能获得这种效果？

```
#define FONT_SIZE 14.0f
#define CELL_CONTENT_WIDTH 320.0f
#define CELL_CONTENT_MARGIN 20.0f
#define NAME_CELL_HEIGHT 20.0f

#import "CartCell.h"

@implementation CartCell

@synthesize nameLabel = _nameLabel;
@synthesize ingredientsLabel = _ingredientsLabel;
@synthesize myStore;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{

    myStore = [Store sharedStore];

    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {

        self.nameLabel = nil;
        self.ingredientsLabel = nil;

        // SET "NAME" CELL
        self.nameLabel = [[UILabel alloc] initWithFrame:CGRectZero];
        [self.nameLabel setLineBreakMode:UILineBreakModeWordWrap];
        [self.nameLabel setMinimumFontSize:FONT_SIZE];
        [self.nameLabel setNumberOfLines:1];
        [self.nameLabel setTag:1];
        self.nameLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:18];
        [self.nameLabel sizeToFit];
        self.nameLabel.backgroundColor = [UIColor clearColor];
        [[self contentView] addSubview:self.nameLabel];

        // SET "INGREDIENTS" CELL
        self.ingredientsLabel = [[UILabel alloc] initWithFrame:CGRectZero];
        [self.ingredientsLabel setLineBreakMode:UILineBreakModeWordWrap];
        [self.ingredientsLabel setMinimumFontSize:FONT_SIZE];
        [self.ingredientsLabel setNumberOfLines:0];
        [self.ingredientsLabel setFont:[UIFont systemFontOfSize:FONT_SIZE]];
        [self.ingredientsLabel setTag:2];
        self.ingredientsLabel.backgroundColor = [UIColor clearColor];
        [[self contentView] addSubview:self.ingredientsLabel];

        if (myStore.cellBackgroundShouldBeLight == YES) {
            NSLog(@"clear [in] ? %@", myStore.cellBackgroundShouldBeLight ? @"Yes" : @"No");
            self.contentView.backgroundColor = [[UIColor alloc]initWithRed:87.0/255.0 green:168.0/255.0 blue:229.0/255.0 alpha:1];
            myStore.cellBackgroundShouldBeLight = NO;
        } else {
            NSLog(@"clear [in] ? %@", myStore.cellBackgroundShouldBeLight ? @"Yes" : @"No");
            self.contentView.backgroundColor = [[UIColor alloc]initWithRed:187.0/255.0 green:268.0/255.0 blue:229.0/255.0 alpha:1];
            myStore.cellBackgroundShouldBeLight = YES;
        }

    }

    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

更新：

我知道尝试按照建议在 cellForRowAtIndexPath 中设置它，但我得到了相同的结果：第一次向下滚动效果很好，但随后再次向上滚动会弄乱单元格的背景颜色。

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CartCell";
    CartCell *cell = (CartCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    Recipes *info = [_fetchedResultsController objectAtIndexPath:indexPath];

    if (cell == nil) 
    {
        cell = [[CartCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }

//    if (!cell.nameLabel) {
//        cell.nameLabel = (UILabel*)[cell viewWithTag:1];
//        //        cell.nameLabel = (UILabel*)[cell viewWithTag:1];
//    }
//    if (!cell.ingredientsLabel)
//        cell.ingredientsLabel = (UILabel*)[cell viewWithTag:2];

    CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);
    CGSize size = [info.ingredients sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

    [cell.nameLabel setFrame:CGRectMake(10, 10, CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), NAME_CELL_HEIGHT)];
    [cell.ingredientsLabel setFrame:CGRectMake(CELL_CONTENT_MARGIN, CELL_CONTENT_MARGIN + NAME_CELL_HEIGHT, CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), MAX(size.height, 44.0f))];

    // SETTING TEXT CONTENT
    cell.nameLabel.text = info.name;
    cell.ingredientsLabel.text = info.ingredients;

    // SETTING BACKGROUND COLOR

    //        UIView *lab = [[UIView alloc] initWithFrame:cell.frame];
    //        [lab setBackgroundColor:[UIColor blueColor]];

    if (myStore.cellBackgroundShouldBeLight == YES) {
        NSLog(@"clear? %@", myStore.cellBackgroundShouldBeLight ? @"Yes" : @"No");
        cell.contentView.backgroundColor = [[UIColor alloc]initWithRed:87.0/255.0 green:84.0/255.0 blue:229.0/255.0 alpha:1];
        //            cell.backgroundView = lab;
        //            ingredientsLabel.backgroundColor = [UIColor clearColor];
        //            nameLabel.backgroundColor = [[UIColor alloc]initWithRed:87.0/255.0 green:168.0/255.0 blue:229.0/255.0 alpha:1];
        //            [cell setBackgroundColor: [[UIColor alloc]initWithRed:87.0/255.0 green:168.0/255.0 blue:229.0/255.0 alpha:1]];
        //            [cell setBackgroundColor:[UIColor colorWithRed:.8 green:.8 blue:1 alpha:1]];
        myStore.cellBackgroundShouldBeLight = NO;
    } else {
//        cell.contentView.tag = 2;
        NSLog(@"clear? %@", myStore.cellBackgroundShouldBeLight ? @"Yes" : @"No");
        cell.contentView.backgroundColor = [[UIColor alloc]initWithRed:187.0/255.0 green:184.0/255.0 blue:229.0/255.0 alpha:1];
        myStore.cellBackgroundShouldBeLight = YES;
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-23T13:14:33.357

很简单，indexPath 告诉你你需要知道的一切。如果 indexPath.row 是偶数，则使用一种颜色。如果 indexPath.row 是奇数，请使用不同的颜色。

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    …

    // SETTING BACKGROUND COLOR

    //        UIView *lab = [[UIView alloc] initWithFrame:cell.frame];
    //        [lab setBackgroundColor:[UIColor blueColor]];

    if (indexPath.row % 2) {
        cell.contentView.backgroundColor = [[[UIColor alloc]initWithRed:87.0/255.0 green:84.0/255.0 blue:229.0/255.0 alpha:1] autorelease];
    } else {
        cell.contentView.backgroundColor = [[[UIColor alloc]initWithRed:187.0/255.0 green:184.0/255.0 blue:229.0/255.0 alpha:1] autorelease];
    }

    …

    return cell;
} 
```

* * *

您的方法存在问题，因为盲目假设单元格将被要求交替成对是一个错误的假设。tableView 可以选择任何顺序的单元格。在您的示例中，我相信可以按如下方式要求单元格。首先，要求 0、1、...、9。接下来，向下滚动并获取 10、11 和 12。此时，0、1 和 2 已离开屏幕。您向上滚动并要求 2，但是哦，不，您的模型是奇数交替，所以您得到错误的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:12:31.700

使用`-willDisplayCell`方法。

```
- (void)tableView: (UITableView *)tableView willDisplayCell: (UITableViewCell *)cell forRowAtIndexPath: (NSIndexPath *)indexPath {

    if (indexPath.row %2) { //change the "%2" depending on how many cells you want alternating.
        UIColor *altCellColor = [UIColor colorWithRed:255/255.0 green:237/255.0 blue:227/255.0 alpha:1.0]; //this can be changed, at the moment it sets the background color to red.
        cell.backgroundColor = altCellColor;
    }
    else if (indexPath.row %2) { 
        UIColor *altCellColor2 = [UIColor colorWithRed:1 green:1 blue:1 alpha:1.0]; //this can be changed, at the moment it sets the background color to white.
        cell.backgroundColor = altCellColor2;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T11:59:51.330

更改单元格背景颜色的适当位置是“ `cellForRowAtIndexPath:`”方法，其中单元格数据被填写并返回到表格视图。

一种方法是：当数据进入单元格时，根据您所在的行更改背景颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T12:37:19.887

将颜色放在 cellForRowAtIndexPath: 上不要设置在自定义单元格上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-18T11:55:28.147

## 标题##更改备用颜色的最简单方法

* * *

```
if(indexPath.row%2) {
    cell.backgroundColor=[UIColor nameUrColor] //brownColor, yellowColor, blueColor
} else {
    cell.backgroundColor=[UIColor nameAnotherColor]
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T13:36:04.840

看看我用什么来定制我的桌子

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
#if USE_CUSTOM_DRAWING
    const NSInteger TOP_LABEL_TAG = 1001;
    const NSInteger BOTTOM_LABEL_TAG = 1002;
    UILabel *topLabel;
    UILabel *bottomLabel;
#endif

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [aTableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        //
        // Create the cell.
        //
        cell =
            [[[UITableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]
            autorelease];

#if USE_CUSTOM_DRAWING
        UIImage *indicatorImage = [UIImage imageNamed:@"indicator.png"];
        cell.accessoryView =
            [[[UIImageView alloc]
                initWithImage:indicatorImage]
            autorelease];

        const CGFloat LABEL_HEIGHT = 20;
        UIImage *image = [UIImage imageNamed:@"imageA.png"];

        //
        // Create the label for the top row of text
        //
        topLabel =
            [[[UILabel alloc]
                initWithFrame:
                    CGRectMake(
                        image.size.width + 2.0 * cell.indentationWidth,
                        0.5 * (aTableView.rowHeight - 2 * LABEL_HEIGHT),
                        aTableView.bounds.size.width -
                            image.size.width - 4.0 * cell.indentationWidth
                                - indicatorImage.size.width,
                        LABEL_HEIGHT)]
            autorelease];
        [cell.contentView addSubview:topLabel];

        //
        // Configure the properties for the text that are the same on every row
        //
        topLabel.tag = TOP_LABEL_TAG;
        topLabel.backgroundColor = [UIColor clearColor];
        topLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
        topLabel.highlightedTextColor = [UIColor colorWithRed:1.0 green:1.0 blue:0.9 alpha:1.0];
        topLabel.font = [UIFont systemFontOfSize:[UIFont labelFontSize]];

        //
        // Create the label for the top row of text
        //
        bottomLabel =
            [[[UILabel alloc]
                initWithFrame:
                    CGRectMake(
                        image.size.width + 2.0 * cell.indentationWidth,
                        0.5 * (aTableView.rowHeight - 2 * LABEL_HEIGHT) + LABEL_HEIGHT,
                        aTableView.bounds.size.width -
                            image.size.width - 4.0 * cell.indentationWidth
                                - indicatorImage.size.width,
                        LABEL_HEIGHT)]
            autorelease];
        [cell.contentView addSubview:bottomLabel];

        //
        // Configure the properties for the text that are the same on every row
        //
        bottomLabel.tag = BOTTOM_LABEL_TAG;
        bottomLabel.backgroundColor = [UIColor clearColor];
        bottomLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
        bottomLabel.highlightedTextColor = [UIColor colorWithRed:1.0 green:1.0 blue:0.9 alpha:1.0];
        bottomLabel.font = [UIFont systemFontOfSize:[UIFont labelFontSize] - 2];

        //
        // Create a background image view.
        //
        cell.backgroundView =
            [[[UIImageView alloc] init] autorelease];
        cell.selectedBackgroundView =
            [[[UIImageView alloc] init] autorelease];
#endif
    }

#if USE_CUSTOM_DRAWING
    else
    {
        for (UIView *sub in [cell.contentView subviews]) {
//            if([sub class] == [UITableViewCellContentView class])
                NSLog(@"this is uilabel %@",[sub class]);
        }
        topLabel = (UILabel *)[cell viewWithTag:TOP_LABEL_TAG];
        bottomLabel = (UILabel *)[cell viewWithTag:BOTTOM_LABEL_TAG];
    }

    topLabel.text = [NSString stringWithFormat:@"Cell at row %ld.", [indexPath row]];
    bottomLabel.text = [NSString stringWithFormat:@"Some other information.", [indexPath row]];

    //
    // Set the background and selected background images for the text.
    // Since we will round the corners at the top and bottom of sections, we
    // need to conditionally choose the images based on the row index and the
    // number of rows in the section.
    //
    UIImage *rowBackground;
    UIImage *selectionBackground;
    NSInteger sectionRows = [aTableView numberOfRowsInSection:[indexPath section]];
    NSInteger row = [indexPath row];
    if (row == 0 && row == sectionRows - 1)
    {
        rowBackground = [UIImage imageNamed:@"topAndBottomRow.png"];
        selectionBackground = [UIImage imageNamed:@"topAndBottomRowSelected.png"];
    }
    else if (row == 0)
    {
        rowBackground = [UIImage imageNamed:@"topRow.png"];
        selectionBackground = [UIImage imageNamed:@"topRowSelected.png"];
    }
    else if (row == sectionRows - 1)
    {
        rowBackground = [UIImage imageNamed:@"bottomRow.png"];
        selectionBackground = [UIImage imageNamed:@"bottomRowSelected.png"];
    }
    else
    {
        rowBackground = [UIImage imageNamed:@"middleRow.png"];
        selectionBackground = [UIImage imageNamed:@"middleRowSelected.png"];
    }
    ((UIImageView *)cell.backgroundView).image = rowBackground;
    ((UIImageView *)cell.selectedBackgroundView).image = selectionBackground;
//  cell.backgroundView.backgroundColor = [UIColor colorWithPatternImage:rowBackground];
//    cell.selectedBackgroundView.backgroundColor = [UIColor colorWithPatternImage:selectionBackground];
    //
    // Here I set an image based on the row. This is just to have something
    // colorful to show on each row.
    //
    if ((row % 3) == 0)
    {
        cell.imageView.image = [UIImage imageNamed:@"imageA.png"];
    }
    else if ((row % 3) == 1)
    {
        cell.imageView.image = [UIImage imageNamed:@"imageB.png"];
    }
    else
    {
        cell.imageView.image = [UIImage imageNamed:@"imageC.png"];
    }
#else
    cell.text = [NSString stringWithFormat:@"Cell at row %ld.", [indexPath row]];
#endif

    return cell;
} 
```

`#import`在所有行之后过去

```
#define USE_CUSTOM_DRAWING 1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-09T11:25:27.723

```
if(cell.contentView)
{
    [cell.nameLbl setFont:[UIFont systemFontOfSize:24]];
    int red_value = arc4random() % 210;
    int green_value = arc4random() % 210;
    int blue_value = arc4random() % 210;

    cell.contentView.backgroundColor = [UIColor colorWithRed:red_value/255.0 green:green_value/255.0 blue:blue_value/255.0 alpha:0.6];

} 
```

# java - jsf与spring的整合

> ID：11169284
> 
> 赞同：0
> 
> 时间：2012-06-23T11:51:45.617
> 
> 标签：java, spring, jakarta-ee, jsf-2, tomcat7

我尝试将jsf和spring集成，但是tomcat有错误404。我真的很困惑，我找不到问题所在。我将 default.xhtml 放在 web-content 中，但 tomcat 说：description 请求的资源（/jsfandspring/faces/default.xhtml）不可用。UserBoImpl.java

```
package p;

public class UserBoImpl implements UserBo{
    String name;

    public void setName(String name) {
        this.name = name;
    }

    public String getMessage() {

        return "hi: " + name;

    }
} 
```

用户Bean.java

```
package p;
import java.io.Serializable;

import p.UserBo;

//DI via JSF managed bean
public class UserBean implements Serializable{

    //DI via Spring
    UserBo userBo;

    public void setUserBo(UserBo userBo) {
        this.userBo = userBo;
    }

    public String printMsgFromSpring() {

        return userBo.getMessage();

    }

} 
```

默认.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      >

    <h:body>

        <h1>JSF 2.0 + Spring Example</h1>

        #{user.printMsgFromSpring()}

    </h:body>

</html> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="UserBo" class="p.UserBoImpl">
        <property name="name" value="Samira" />
    </bean>

</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>jsfandspring</display-name>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
   <welcome-file-list>
    <welcome-file>faces/default.xhtml</welcome-file>
  </welcome-file-list>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>
   <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
  <listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>
</web-app> 
```

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

    <application>
                <el-resolver>
                org.springframework.web.jsf.el.SpringBeanFacesELResolver
                </el-resolver>
    </application>

    <managed-bean>
        <managed-bean-name>user</managed-bean-name>
        <managed-bean-class>p.UserBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
        <managed-property>
            <property-name>userBo</property-name>
            <value>#{userBo}</value>
        </managed-property>
    </managed-bean>

</faces-config> 
```

我上面的听众有这个警告：

```
Class org.springframework.web.jsf.el.SpringBeanFacesELResolver must extend the type javax.el.ELResolver 
```

我的问题在哪里。我找不到它。

# javascript - Google Chrome 弹出扩展中的 Javascript 未运行

> ID：11169285
> 
> 赞同：3
> 
> 时间：2012-06-23T11:51:52.223
> 
> 标签：javascript, google-chrome, google-chrome-extension

嗨，我遇到了一个非常奇怪的问题。

我有一个基本的 chrome 扩展，它有一个默认的 popup.html 文档，定义如下：

```
<html>

<head>
  <script type="text/javascript">
    function disp() {
    document.getElementById("test").innerHTML = "Bye";
    }
  </script>
</head>

<body>

<p id="test">Hello</p>
<button type="button" onclick="disp()">'Twas Nice to meet you</button>

</body>

</html> 
```

在浏览器中独立运行 html 文件后，它会按预期运行：单击按钮会更改*p*标签的文本。但是，从使用 chrome 扩展程序开始，在弹出窗口中按钮似乎没有响应

这与一般弹出窗口有关还是特定于我的代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T14:07:47.677

虽然您发现您可以规避内联脚本“问题”（它是一项安全功能），但如果您不这样做，下面是它的样子。这显示了如何调用通知和基于“窗口”的对话框。

**清单.json**

```
{
  "name": "Hello World!",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "notifications",
    "create",
    "tabs"
  ]
} 
```

**popup.html**

```
<!doctype html>
<html>
  <head>
    <title>Getting Started with Extension's Popup</title>
    <style>
      body {
        min-width:357px;
        overflow-x:hidden;
      }
      img {
        margin:5px;
        border:2px solid black;
        vertical-align:middle;
        width:75px;
        height:75px;
      }
    </style>

    <!-- JavaScript and HTML must be in separate files for security. -->
    <script src="popup.js"></script>
  </head>
  <body>
    <div style="text-align: center;">
        <button type="button" id="click">Show Notification</button>
        <button type="button" id="dialog">Show Dialog</button>
    </div>
  </body>
</html> 
```

**对话框.html**

```
<!doctype html>
<html>
  <head>
    <title>Dialog Prompt - Chrome</title>
    <style>
    body {
      overflow: hidden;
      margin: 0px;
      padding: 0px;
      background: white;
    }
    p {
        text-align: center;
        padding: 20px;
    }
    </style>
  </head>
  <body>
    <p>This is a dialog prompt.</p>
  </body>
</html> 
```

**popup.js**

```
var notifier,
    dialog;

function showNotify() {
    var notify;

    if (window.webkitNotifications.checkPermission() == 0) {
        notify = window.webkitNotifications.createNotification(
            "",
            'Notification Test',
            'This is a test of the Chrome Notification System. This is only a test.'
        );
        notify.show();
    } else {
        window.webkitNotifications.requestPermission();
    }
}    
function showDialog(){
    chrome.windows.create({
        url: 'dialog.html',
        width: 200,
        height: 120,
        type: 'popup'
    });
}    
function init() {
    clicker = document.querySelector('#click');
    dialog = document.querySelector('#dialog');

    clicker.addEventListener('click', showNotify, false);
    dialog.addEventListener('click', showDialog, false);
}    
document.addEventListener('DOMContentLoaded', init); 
```

您可以在此处找到要下载的文件：

[http://jfcoder.com/projects/chrometestdialogs/](http://jfcoder.com/projects/chrometestdialogs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T04:58:33.387

manifest_version 2 不允许用户出于安全目的在 html 文件中输入函数，我们是否需要将所有函数编写在单独的文件中并将其导入到该 html 文件中，如下所示

```
<head>
  <script src="yourjsfile.js"></script> //All our functions are defined here
  <script src="jquery.js"></script>  // This is the jquery
</head> 
```

并且这里不允许调用函数，如 onclick、onkeydown、onkeyup 等...

```
 <body>
    <p id="test">Hello</p>
    <button type="button" id="btn">Twas Nice to meet you</button>
    </body> 
```

上面的***“onclick="disp()"***不允许，应该***分配一个id***

所以我们是否需要创建事件和定义必须从 .js 文件创建

所以你应该写一个 js 文件，如下所示***yourjsfile.js***

```
document.addEventListener('DOMContentLoaded', function () {
$("#btn").on("click",function(){
 disp();
});
});

function disp() {
document.getElementById("test").innerHTML = "Bye";
} 
```

# c# - 如何在解决方案上使用同名类库

> ID：11169289
> 
> 赞同：1
> 
> 时间：2012-06-23T11:53:07.583
> 
> 标签：c#, .net, class-library

需要在我的解决方案中添加两个相同名称的 .csproj 类库。有两个项目，但不幸的是这些项目类库名称相同，例如：Hello.csproj。我尝试在解决方案中添加现有项目然后显示错误

[http://blogs.msdn.com/b/ansonh/archive/2006/09/27/774692.aspx](http://blogs.msdn.com/b/ansonh/archive/2006/09/27/774692.aspx) 从上面的 url 我学会了如何在同一个项目上使用相同的命名空间 dll，但我需要帮助如何使用相同的类库一个解法

如果有任何疑问请询问，在此先感谢。

![在此处输入图像描述](../Images/10caa24963a92564e6d5c5eefa087f4d.png)

**注意**：好的人们想知道原因，我在 Autocat 2005 和 2010 上有两个项目，现在想将这些项目合并到一个解决方案上，2010 更新基于 2005，所以类库是相同的，但我需要同时使用它们。因此出现问题并寻求帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T12:44:39.540

您可以拥有具有相同名称的项目，只要它们已经在不同的文件夹中创建并且它们位于不同的解决方案文件夹中。如果项目已经创建，请执行以下操作将它们添加到您的解决方案中：

1.  将您的第一个项目添加到解决方案中。
2.  在解决方案资源管理器窗口中，右键单击您的解决方案并选择**添加->新建解决方案文件夹**
3.  为新创建的文件夹命名。
4.  右键单击文件夹并选择**添加->现有项目**
5.  导航到您的第二个项目并双击 .csproj 文件。

你完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:07:00.780

如果您确实必须这样做，请确保第二个项目具有不同的名称，然后更改第二个项目中类的名称空间（通常项目名称包含名称空间的第一部分 - 只需更改该部分）。这些类在内部仍然是相同的，但是因为它们具有不同的命名空间，所以它们将是不同的实体。这将导致非常臭的代码，尽管当您开始在 ClientApp 中混合它们时 - 为避免混淆，请确保您始终通过它们的完整命名空间引用它们（即`using xyz.myclassname;`在使用它们的类文件的顶部没有声明） .

也许您想运行相同服务或其他东西的两个（几乎相同）实例，但如上所述，很难想到您*需*要这样做的真正原因。如果您希望拥有两个外观相同但实现不同的实例，那么您将希望使用接口。

**编辑：** Visual Studio 不允许您拥有两个相同名称的项目，如果您更改项目名称但不更改其项目 GUID（在 .proj 文件和 .sln 文件中），您正在玩​​疯狂的游戏。

您在这里做的最简单的事情是在解决方案资源管理器中创建一个新的**空**项目，右键单击它并*在资源管理器中打开文件夹*，然后将类文件从原始项目复制到新项目，然后返回解决方案资源管理器选择*显示所有文件*（解决方案资源管理器顶部的小按钮），然后选择新项目下新添加的文件，右键单击，*添加到项目*。（这些菜单选项来自记忆，它们应该大致正确）。

# c# - 更改画布内矩形的比例

> ID：11169292
> 
> 赞同：2
> 
> 时间：2012-06-23T11:53:38.577
> 
> 标签：c#, wpf, xaml, wpf-controls, shape

我有`Canvas`一个`Rectangle`：

```
<Canvas>
   <Rettangle/>
</Canvas> 
```

我希望，当我调整画布大小时，矩形保持相同的相对位置，例如：

```
----------------------------------------
|                                      |
|                                      |
|           ____                       |
|          |    |                      |
|          |____|                      |
|                                      |
|--------------------------------------

--------------------
|                   |
|   ___             |
|   |__|            |
|                   |
|------------------- 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T15:19:49.647

为什么不把所有的东西都放在一个[Viewbox](http://msdn.microsoft.com/en-us/library/ms617883)中？

```
<Viewbox Stretch="Fill">
    <Canvas Width="400" Height="300">
        <Rectangle Canvas.Left="100" Canvas.Top="100" Width="100" Height="100" Fill="Blue"/>
    </Canvas>
</Viewbox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:36:24.310

最好的解决方案是创建您自己的自定义画布并使用这些问题中提到的一些技术实现重新调整大小和重新定位 -

[你如何在WPF中进行相对定位？](https://stackoverflow.com/questions/158175/how-do-you-do-relative-positioning-in-wpf)

[WPF：将宽度（和高度）设置为百分比值](https://stackoverflow.com/questions/717299/wpf-setting-the-width-and-height-as-a-percentage-value?sort=votes#sort-top)

但对我来说，这个功能看起来非常类似于缩放。如果您的窗口只有 Canvas，您可以尝试使用 Kael Rowan 的 ZoomableCanvas 并在窗口重新调整大小时显式放大/缩小：

[http://blogs.msdn.com/b/kaelr/archive/2010/07/29/zoomablecanvas.aspx](http://blogs.msdn.com/b/kaelr/archive/2010/07/29/zoomablecanvas.aspx)

# apache - 意外删除 Mac OS X Lion 上的 Apache

> ID：11169295
> 
> 赞同：0
> 
> 时间：2012-06-23T11:54:23.720
> 
> 标签：apache, osx-lion

当我也必须删除 Apache 程序时，我正在从我的电脑上卸载 Postgresql DB。谁能告诉我如何将Apache重新安装回我的Mac。我正在使用 OS X Lion 10.7.4 在这个主题上我也是安静的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:55:50.023

Mamp 真的很有用[http://www.mamp.info/en/index.html](http://www.mamp.info/en/index.html)比内置实现要好得多。

# ruby-on-rails-3 - Rails 和 Devise 的 Gravatar 问题

> ID：11169300
> 
> 赞同：0
> 
> 时间：2012-06-23T11:55:30.213
> 
> 标签：ruby-on-rails-3, devise, gravatar

我正在尝试创建一个简单的个人资料选项卡，其中包括使用 Devise 的 gravatar，但是我不断收到一封`undefined method`电子邮件'nil:NilClass` cant' see where I'm going wrong

tab_check.html.erb

```
<div class="tabbable"> <!-- Only required for left/right tabs -->
  <ul class="nav nav-tabs">
    <li class="active"><a href="#tab1" data-toggle="tab">Dashboard</a></li>
    <li><a href="#tab2" data-toggle="tab">Inbox</a></li>
    <li><a href="#tab3" data-toggle="tab">Three</a></li>
    <li><a href="#tab4" data-toggle="tab">Four</a></li>
    <li><a href="#tab5" data-toggle="tab">Profile</a></li>

    <li><a href="#tab6" data-toggle="tab">Account</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="tab1">
      <p>This will be the Dashboard</p>
    </div>
    <div class="tab-pane" id="tab2">
      <p>This will be the Inbox</p>
    </div>
    <div class="tab-pane" id="tab3">
      <p>This will be tab 3</p>
    </div>
    <div class="tab-pane" id="tab4">
      <p>This will be tab 4/p>
    </div>
    <div class="tab-pane" id="tab5">
      <%= render 'users/show' %>
    </div>
    <div class="tab-pane" id="tab6">
      <p>Account settings sections email etc</p>
    </div>
  </div>
</div> 
```

users_controller.rb

```
class UsersController < ApplicationController

  def index
    @users = User.all
  end

  def show
    @user = User.find(params[:id])
  end
end 
```

用户.rb

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me,
                                :first_name, :last_name
  # attr_accessible :title, :body

  has_many :items
end 
```

users_helper.rb

```
module UsersHelper
  def gravatar_for(user, options = { size: 50})
    gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
    size = options[:size]
    gravatar_url = "http://gravatar.com/avatar/#{gravatar_id}.png?s=#{size}"
    image_tag(gravatar_url, alt: user.name, class: "gravatar")
  end
 end 
```

最后是 _show.heml.erb

```
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.first_name %>
      </h1>
    </section>
  </aside>
</div> 
```

编辑：全栈跟踪：

```
app/helpers/users_helper.rb:3:in `gravatar_for'
app/views/users/_show.html.erb:5:in `_app_views_users__show_html_erb__248270508__620770878'
actionpack (3.2.3) lib/action_view/template.rb:143:in `block in render'
activesupport (3.2.3) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.3) lib/action_view/template.rb:141:in `render'
actionpack (3.2.3) lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
actionpack (3.2.3) lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
actionpack (3.2.3) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.3) lib/action_view/renderer/partial_renderer.rb:237:in `render'
actionpack (3.2.3) lib/action_view/renderer/renderer.rb:41:in `render_partial'
actionpack (3.2.3) lib/action_view/helpers/rendering_helper.rb:27:in `render'
app/views/static_pages/tab_check.html.erb:25:in `_app_views_static_pages_tab_check_html_erb___410072822_92462190'
actionpack (3.2.3) lib/action_view/template.rb:143:in `block in render'
activesupport (3.2.3) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.3) lib/action_view/template.rb:141:in `render'
actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
actionpack (3.2.3) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:18:in `render'
actionpack (3.2.3) lib/action_view/renderer/renderer.rb:36:in `render_template'
actionpack (3.2.3) lib/action_view/renderer/renderer.rb:17:in `render'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:110:in `_render_template'
actionpack (3.2.3) lib/action_controller/metal/streaming.rb:225:in `_render_template'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:103:in `render_to_body'
actionpack (3.2.3) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
actionpack (3.2.3) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:88:in `render'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:16:in `render'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
activesupport (3.2.3) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/home/toaksie/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
activesupport (3.2.3) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:39:in `render'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.3) lib/active_support/callbacks.rb:414:in `_run__447462369__process_action__180978766__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
warden (1.1.1) lib/warden/manager.rb:34:in `catch'
warden (1.1.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__496782642__call__984513863__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/home/toaksie/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/home/toaksie/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/home/toaksie/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

任何指针都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:49:37.953

您的问题是您在 tab_check.html.erb 中呈现显示模板，但未初始化用户。如果您在显示视图上使用部分渲染，则显示操作未运行，用户也必须在 tab_check 操作中设置。

添加`@user = User.find(params[:id])`到您的 tab_check 操作。

# html - div 延伸到屏幕的角落部分

> ID：11169303
> 
> 赞同：0
> 
> 时间：2012-06-23T11:55:46.430
> 
> 标签：html, css, stretch

这就是这种情况。

即使用户在他们的浏览器上使用放大/缩小，我也希望我的特定 div 延伸到屏幕的右侧。

你会在这里看到我的例子[http://jsfiddle.net/4LD7h/](http://jsfiddle.net/4LD7h/)

所以这就是缩小该页面时的样子。

[http://i48.tinypic.com/14kjo1k.png](http://i48.tinypic.com/14kjo1k.png)

这就是我想要出现的

[http://i48.tinypic.com/zwgwwj.png](http://i48.tinypic.com/zwgwwj.png)

我不想要任何水平滚动条。

谢谢你。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:07:56.480

在 **CSS中**

```
#container {
    width:850px;
    text-align:left;
} 
```

用。。。来代替

```
#container {
    text-align:left;
} 
```

和

```
#center {
    background:#aa1616;
    width:600px;
    height:500px;
    float:left;
    position:relative;
} 
```

用。。。来代替

```
 #center {
        background:#aa1616;
        width:100%;
        height:500px;

    } 
```

演示：http: [//jsfiddle.net/4LD7h/6/](http://jsfiddle.net/4LD7h/6/)

# python - 一个接一个地运行两个ffmpeg命令

> ID：11169305
> 
> 赞同：-1
> 
> 时间：2012-06-23T11:55:54.160
> 
> 标签：python, ffmpeg

我需要运行两个`ffmpeg`命令，一个接一个，即等到第一个命令完成，然后运行第二个命令。第一个命令是

```
ffmpeg -threads 8 -i D:\imagesequence\dpx\brn_055.%04d.dpx D:\imagesequence\dpx\test2.mov 
```

第二个是

```
ffmpeg -i D:/imagesequence/background.jpg -vf "movie='D\:/imagesequence/dpx/thumbnail.jpg' [watermark]; [in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/3 [out]" D:/imagesequence/dpx/final_with_text_mod_04.jpg 
```

在 Python 中完成此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:04:45.250

您只需`ffmpeg`使用 python 模块调用 2 次命令`subprocess`，这已经是默认行为

```
import subprocess

execstr1 = 'ffmpeg -x -y -z ...'
execstr2 = 'ffmpeg -a -b -c ...'

out1 = subprocess.check_output(execstr1, shell=True)

out2 = subprocess.check_output(execstr2, shell=True) 
```

# java - 在服务器上运行 java 应用程序

> ID：11169306
> 
> 赞同：1
> 
> 时间：2012-06-23T11:55:58.027
> 
> 标签：java, web-applications

我的主机 (one.com) 不支持 java webapps。但是我有一个 java 程序，它从 twitter API 获取新数据并将数据存储在一些文本文件中。我使用这些文本文件根据我的网站项目中的数据显示信息图形并进行处理（基于 java 的数据可视语言）。在服务器上运行处理草图没有问题，但支持告诉我不支持运行 java webapp。

我想要做的是运行在后台获取新数据的java程序。它应该定期更新文本文件，可能每 24 小时更新一次。我该怎么做呢？如果服务器不支持 java webapps，我可以尝试的下一个最好的事情是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:14:35.590

快速浏览一下主机站点告诉我，它们托管 PHP 应用程序，并允许您运行通过站点上的控制面板设置的 cron 作业。您可以用 PHP 编写程序，这应该很容易做到，然后创建一个 cron 作业，每天在所需的时间调用您的 PHP 程序。是否有一些需要 Java 的特定要求？从您对问题的描述来看，这并不清楚。

# asp.net-mvc - MVC 父子嵌套视图返回模型

> ID：11169310
> 
> 赞同：2
> 
> 时间：2012-06-23T11:56:23.040
> 
> 标签：asp.net-mvc

假设我有一个带有 parentModel 的 parent.cshtml 视图，以及一个带有 childModel 的 child.cshtml 视图。此子操作`[ChildActionOnly]`在 parent.cshtml: 中呈现并呈现`@Html.Action("ChildAction")`。

现在，在控制器/ParentAction

```
public ActionResult ParentAction() {return View();}
[HttpPost] 
public ActionResult ParentAction(ParentModel parentmodel) { 
    if(!ModelState.IsValid) {
      ...
      ModelState.AddModelError("", "parent view has an error");
    }
    return View(parentmodel); // pass the ball back to user
} 
```

在控制器/ChildAction

```
[ChildActionOnly]
public ActionResult ChildAction() {return View();}
[HttpPost] 
public ActionResult ChildAction(ChildModel childmodel) { 
     if(!ModelState.IsValid) {
       ...
       ModelState.AddModelError("", "child view has an error");
    }
    //??? return ParentView(parentmodel, childmodel) ??? how do i do this??? 
} 
```

在子操作中，我如何返回到 ParentView（也呈现 ChildView），并在他们的模型中保留数据？

编辑： - - -

我的观点是如何不这样做。`return View(childmodel);`from child action 不会得到我们想要看到的东西，因为它只会给我们一个只有子视图的“部分”页面，缺少父部分。`RedirectToAction("ParentAction");`将再次给我们完整的视图，但它会丢失模型。不确定如何处理嵌套视图中的返回模型。这就是我卡住的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:20:32.913

首先，您必须创建一个包含 的通用模型，`ParentModel`否则`ChildModel`将.`ChildModel`作为`ParentModel`. 我建议您`Html.RenderPartial`在这种情况下使用，而不是调用子操作并呈现子视图。

假设`ParentModel`包装`ChildModel`然后从`ParentView.cshtml`你可以渲染`the ChildView.cshtml`，

```
@Html.Partial("ChildView", Model.ChildModel); 
```

现在，您必须从子发布操作中构建`ParentModel`并返回`ParentView`.

```
[HttpPost] 
public ActionResult ChildAction(ChildModel childmodel) { 
    if(!ModelState.IsValid) 
    {
       ...
       ModelState.AddModelError("", "child view has an error");
    } 

    ParentModel model = .. build the model from querying database.

    return View("ParentView", model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:07:33.440

只是你没有。为什么要在子动作中返回父模型？每个动作都会处理自己的模型

# google-maps-api-3 - 如何使用 Just 坐标设置中心

> ID：11169312
> 
> 赞同：1
> 
> 时间：2012-06-23T11:56:38.980
> 
> 标签：google-maps-api-3

嗨，我已经尝试了几种方法，但我不确定我错过了什么。此处的文档[https://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)指出我应该能够使用如下坐标设置地图的中心：

设置中心（latlng：LatLng）

我猜这意味着我可以使用以下语法：

```
myMap.setCenter(-37.8025182,144.9987055); 
```

但我收到错误“未捕获的错误：属性值无效：-37.8025182”

有什么我遗漏的吗 - 文档并没有真正给我任何线索。

问候，

莉亚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T12:00:19.583

文档说 for 的*唯一*参数`setCenter`是 a `LatLng`。`setCenter`不需要两个数字。

```
var centerpoint = new google.maps.LatLng(-37.8025182,144.9987055);
myMap.setCenter(centerpoint); 
```

或将所有内容组合在一起：

```
myMap.setCenter(new google.maps.LatLng(-37.8025182,144.9987055)); 
```

# sqlite - 如何在带有 ARM CPU 的 WinRT 设备中部署 SQLite？

> ID：11169315
> 
> 赞同：3
> 
> 时间：2012-06-23T11:57:49.180
> 
> 标签：sqlite, windows-8, windows-runtime

我正在开发一个 C# Window8 / WinRT 应用程序，我正在使用 SQLite-NET 和链接在文档底部的 sqlite3.dll

[https://github.com/praeclarum/sqlite-net](https://github.com/praeclarum/sqlite-net)

我的项目在我的计算机上运行良好，但由于 sqlite 是一个非托管 DLL，我想知道当我将我的应用程序部署到应用程序商店并且使用 ARM cpu 的人尝试运行它时会发生什么。它会工作吗？如果没有，我怎样才能让它工作？

谢谢，

阿德里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T22:44:39.383

不，这行不通。当涉及 C++ 组件时，您不能选择中性架构（任何 CPU）。您必须将 SQLite DLL 编译到 ARM 中才能获得 ARM 版本。如果您有一个原生组件，您将为 Store 提交多个版本，客户将为他们的架构下载正确的版本。

[关于 ARM 架构](http://blogs.msdn.com/b/b8/archive/2012/02/09/building-windows-for-the-arm-processor-architecture.aspx)的 Windows 上的好博文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:24:12.313

我唯一知道的是微软正在与来自 SQLLite 的人合作，现在得到了官方支持

# php - URL验证检测电影标题

> ID：11169316
> 
> 赞同：0
> 
> 时间：2012-06-23T11:58:00.257
> 
> 标签：php, regex

我如何从 url 中检测电影标题..

```
http://www.mysite.com/2430-Moonrise-Kingdom.aspx
http://www.mysite.com/2405-Dark-Shadows.aspx
http://www.mysite.com/2415-Madagascar-3-Europes-Most-Wanted.aspx 
```

我需要将utl从：

```
http://www.mysite.com/2405-Dark-Shadows.aspx 
```

至：“*暗影*”或“*暗影*”

**我的代码是：**

```
$regexUrl = "/\/[0-9]{2,4}\-[a-zA-Z0-9\-\.]+\.aspx\/?";

echo preg_match($regexUrl, $_SERVER["REQUEST_URI"]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:56:23.457

最后你的模式似乎出了问题。试试这个（注意最后几个字符）：

```
/\/[0-9]{2,4}\-[a-zA-Z0-9\-\.]+\.aspx/ 
```

您还需要添加一个组，以便更轻松地获取标题部分。

```
/\/[0-9]{2,4}\-([a-zA-Z0-9\-\.]+)\.aspx\/? 
```

最后，这里有一个简化的版本，如果开头的数字有一位或多于四位，或者标题有奇怪的字符（可能不是英文电影），它不会中断。

```
\/\d+-(.+)\.aspx$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:12:07.463

```
$url = 'http://www.mysite.com/2415-Madagascar-3-Europes-Most-Wanted.aspx';

$url = basename($url, '.aspx');
$url = substr($url, 1+strpos($url, '-'));
$url = strtr($url, '-', ' ');

echo $url; 
```

但如果这是你的网站，你应该使用这个：

```
$id = (int)basename($url); 
```

并从数据库加载标题。因此，即使您的 URL 被损坏，您仍然可以加载正确的页面。

# routes - 是否可以通过 Ember.Route 重定向到动态段？

> ID：11169317
> 
> 赞同：2
> 
> 时间：2012-06-23T11:58:28.527
> 
> 标签：routes, ember.js

我希望某条路线立即重定向到 /50

```
index: Ember.Route.extend({
  route: '/',
  redirectsTo: '/50',
}),
post: Ember.Route.extend({
  route: '/:post_id',
  connectOutlets: function(router) {
  },
  deserialize: function() {
  }
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:42:49.147

由于`redirectsTo`基本上只是“翻译”到`router.transitionTo(redirection)`内部调用`connectOutlets`（请参阅[routeable.js](https://github.com/emberjs/ember.js/blob/1ebfd08e1260f238808ecaf37faa3f42ca1dbcf6/packages/ember-routing/lib/routable.js#L34-40)），您可以以类似的方式解决您的问题，请参阅[http://jsfiddle.net/pangratz666/DLYQK/](http://jsfiddle.net/pangratz666/DLYQK/)：

```
App.Router = Ember.Router.extend({
    enableLogging: true,
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function(router) {
                router.route('/50');
            }
        }),
        post: Ember.Route.extend({
            route: '/:post_id'
        })
    })
});

App.initialize(); 
```

# java - 上传图片时出现 RuntimeException 错误

> ID：11169318
> 
> 赞同：0
> 
> 时间：2012-06-23T11:58:31.187
> 
> 标签：java, android

我正在上传图片。当我在我的设备上从 eclipse 运行应用程序时，它运行良好并且上传文件非常好。当我关闭应用程序并从设备菜单启动它，然后当我尝试上传图像时，它给了我 RuntimeException 错误。我不知道是怎么回事。请帮忙

这是我的代码

```
public class Camera extends Activity {
ImageView ivUserImage;
Button bUpload;
Intent i;
int CameraResult = 0;
Bitmap bmp;
public String globalUID;
UserFunctions userFunctions;
String photoName;
InputStream is;
String largeImagePath;

int serverResponseCode = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera);

    userFunctions = new UserFunctions();
    globalUID = getIntent().getExtras().getString("globalUID");
    Toast.makeText(getApplicationContext(), globalUID, Toast.LENGTH_LONG).show();
    ivUserImage = (ImageView)findViewById(R.id.ivUserImage);
    bUpload = (Button)findViewById(R.id.bUpload);
    openCamera();
}

private void openCamera() {
    i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(i, CameraResult);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

    if(resultCode == RESULT_OK) {
        //set image taken from camera on ImageView
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        ivUserImage.setImageBitmap(bmp);

        //Create new Cursor to obtain the file Path for the large image
         String[] largeFileProjection = {
                 MediaStore.Images.ImageColumns._ID,
                 MediaStore.Images.ImageColumns.DATA
         };

         String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
         Cursor myCursor = this.managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, largeFileProjection, null, null, largeFileSort);

         try {
             myCursor.moveToFirst();
             //This will actually give you the file path location of the image.
             largeImagePath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));

             File f = new File("" + largeImagePath);

             photoName = f.getName();

             bUpload.setOnClickListener(new View.OnClickListener() {   
                 public void onClick(View v) {
                     new Upload().execute(largeImagePath, globalUID, photoName);
                 }

             });

         } finally {
             myCursor.close();
         }
    }
}
public class Upload extends AsyncTask<String, Integer, String> {

    ProgressDialog dialog;

    protected void onPreExecute() {
        dialog = ProgressDialog.show(Camera.this, "", "Uploading file...", true);
    }

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        String success = "false";
        Bitmap bitmapOrg = BitmapFactory.decodeFile(largeImagePath);
        ByteArrayOutputStream bao = new ByteArrayOutputStream();
        bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);

        byte [] ba = bao.toByteArray();
        String ba1=Base64.encodeToString(ba, 0);

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("image",ba1));
        nameValuePairs.add(new BasicNameValuePair("imageName", photoName));
        nameValuePairs.add(new BasicNameValuePair("uid", globalUID));

        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://www.example.info/android/fileupload.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            if(response != null) {
                success = "true";
            }
            is = entity.getContent();
        } catch(Exception e) {
            Log.e("log_tag", "Error in http connection "+e.toString());
        }
        dialog.dismiss();
        return success;
    }

    protected void onProgressUpdate(Integer...progress) {

    }

    protected void onPostExecute(String f) {
        Toast.makeText(getApplicationContext(), "File uploaded", Toast.LENGTH_LONG).show();
    }

}

} 
```

这是我的日志猫

```
06-23 14:47:50.830: E/AndroidRuntime(7069): FATAL EXCEPTION: AsyncTask #4
06-23 14:47:50.830: E/AndroidRuntime(7069): java.lang.RuntimeException: An error occured while executing doInBackground()
06-23 14:47:50.830: E/AndroidRuntime(7069):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at java.lang.Thread.run(Thread.java:1019)
06-23 14:47:50.830: E/AndroidRuntime(7069): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
06-23 14:47:50.830: E/AndroidRuntime(7069):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:573)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:384)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:412)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at com.zafar.login.Camera$Upload.doInBackground(Camera.java:122)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at com.zafar.login.Camera$Upload.doInBackground(Camera.java:1)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-23 14:47:50.830: E/AndroidRuntime(7069):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
06-23 14:47:50.830: E/AndroidRuntime(7069):     ... 4 more
06-23 14:47:56.280: E/WindowManager(7069): Activity com.zafar.login.DashboardActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40a67df0 that was originally added here
06-23 14:47:56.280: E/WindowManager(7069): android.view.WindowLeaked: Activity com.zafar.login.DashboardActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40a67df0 that was originally added here
06-23 14:47:56.280: E/WindowManager(7069):  at android.view.ViewRoot.<init>(ViewRoot.java:266)
06-23 14:47:56.280: E/WindowManager(7069):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:174)
06-23 14:47:56.280: E/WindowManager(7069):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:117)
06-23 14:47:56.280: E/WindowManager(7069):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
06-23 14:47:56.280: E/WindowManager(7069):  at android.app.Dialog.show(Dialog.java:241)
06-23 14:47:56.280: E/WindowManager(7069):  at android.app.ProgressDialog.show(ProgressDialog.java:107)
06-23 14:47:56.280: E/WindowManager(7069):  at android.app.ProgressDialog.show(ProgressDialog.java:90)
06-23 14:47:56.280: E/WindowManager(7069):  at com.zafar.login.Camera$Upload.onPreExecute(Camera.java:115)
06-23 14:47:56.280: E/WindowManager(7069):  at android.os.AsyncTask.execute(AsyncTask.java:391)
06-23 14:47:56.280: E/WindowManager(7069):  at com.zafar.login.Camera$1.onClick(Camera.java:100)
06-23 14:47:56.280: E/WindowManager(7069):  at android.view.View.performClick(View.java:2538)
06-23 14:47:56.280: E/WindowManager(7069):  at android.view.View$PerformClick.run(View.java:9152)
06-23 14:47:56.280: E/WindowManager(7069):  at android.os.Handler.handleCallback(Handler.java:587)
06-23 14:47:56.280: E/WindowManager(7069):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-23 14:47:56.280: E/WindowManager(7069):  at android.os.Looper.loop(Looper.java:130)
06-23 14:47:56.280: E/WindowManager(7069):  at android.app.ActivityThread.main(ActivityThread.java:3691)
06-23 14:47:56.280: E/WindowManager(7069):  at java.lang.reflect.Method.invokeNative(Native Method)
06-23 14:47:56.280: E/WindowManager(7069):  at java.lang.reflect.Method.invoke(Method.java:507)
06-23 14:47:56.280: E/WindowManager(7069):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
06-23 14:47:56.280: E/WindowManager(7069):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
06-23 14:47:56.280: E/WindowManager(7069):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:28:15.727

**解决方案**

首先在@DheereshSingh 和@duffy356 评论的帮助下。我在此[链接](https://stackoverflow.com/questions/7400754/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-on-bitmap)上找到了解决方案。

# php - 你如何调用包含 uri 一部分的列

> ID：11169324
> 
> 赞同：-2
> 
> 时间：2012-06-23T11:59:24.600
> 
> 标签：php, mysql

英语不是我的母语，所以我想不出一个好名字。例如（一个简单的）页面“关于我们”，您如何调用数据库中包含“关于我们”的列。我已经在寻找这个词几年了，从未找到明确的答案。例子：

```
Table: pages
Columns:
`name`      `????`

Values:
About us    about-us 
```

有什么好听的名字？？？列，每个人似乎都使用随机的东西，如“标题”或“蛞蝓”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:18:55.073

您似乎正在寻找一个易于理解的列名来保存您网站中页面的短标题。

“slug”是 WordPress、Joomla! 和其他 CMS 中用于 URL 片段的术语，如下所示：

```
 http://my.web.site/pages/slug 
```

因此，按照这些软件包的说法，将您的专栏称为 slug 是有道理的。

当然，“标题”是进入网页 `<TITLE/>`部分的信息。`<HEAD/>`

在我看来，“蛞蝓”对你来说是个不错的选择。“urlfragment”也可能没问题。

# c# - 如何关闭文件并删除该图像文件？

> ID：11169327
> 
> 赞同：1
> 
> 时间：2012-06-23T11:59:54.413
> 
> 标签：c#, asp.net, system.drawing

```
Imagename = objUser.UserID + filename;
Imagepath = "D:\\Shop\\ShopMonkey\\Images" + Imagename;
FileUpload.SaveAs(Path.Combine(@"D:\ShopMonkey_Web_21-6-12\ShopMonkey\Images", Imagename));

objUser.UploadImagePath = Imagepath;
objUser.UploadImagename = Imagename;

System.Drawing.Image img1 = System.Drawing.Image.FromFile(Imagepath);

System.Drawing.Image bmp1 = img1.GetThumbnailImage(50, 50, null, IntPtr.Zero);
 ThumbNailPath = "D:\\ShopMonkey_Web_21-6-12\\ShopMonkey\\ThumbNails" + Imagename;
bmp1.Save(Path.Combine(@"D:\ShopMonkey_Web_21-6-12\ShopMonkey\ThumbNails", Imagename));
objUser.UploadThumbnailPath = ThumbNailPath; 
```

如何删除其他功能中的图像和缩略图？（是否有必要先关闭它？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:54:49.837

我猜您正在尝试删除磁盘上的文件，如果该用户在 asp.net 再次上传同一用户的图像时已存在该文件。

如果存在，此方法将删除图像和缩略图。

将您的图像创建活动与图像清理活动分开，以保持您的意图清晰并且您的代码可维护。

```
 // replace with an entry loaded from a config file    
    const string ImageRoot = @"D:\ShopMonkey_Web_21-6-12\ShopMonkey"; 
    // replace this is your user instance
    object user = new object(); 
    string Imagename = objUser.UserID + filename;
    string uploadImagePath = Path.Combine(ImageRoot, "Images", Imagename);
    string thumbnailPath = Path.Combine(ImageRoot, "ThumbNails", Imagename);
    objUser.UploadImagePath = uploadImagePath;
    objUser.UploadImagename = Imagename;
    objUser.UploadThumbnailPath = thumbnailPath;
    // delete both if they exist
    if (File.Exists(uploadImagePath))
        File.Delete(uploadImagePath);
    if (File.Exists(thumbnailPath))
          File.Delete(thumbnailPath);
    // replace this with your uploaded file details
    object fileInfo = new object(); 
    using (System.Drawing.Image img1 = System.Drawing.Image.FromFile(uploadImagePath)) {
          img1.Save(uploadImagePath);
          using (System.Drawing.Image bmp1 = img1.GetThumbnailImage(50, 50, null, IntPtr.Zero)) {
            bmp1.Save(thumbnailPath);
          }
          FileUpload.SaveAs(uploadImagePath);
    } 
```

# javascript - 用于单元测试的 Node.js 模块

> ID：11169335
> 
> 赞同：1
> 
> 时间：2012-06-23T12:01:45.760
> 
> 标签：javascript, ajax, unit-testing, node.js, buster.js

假设我有一个 Web 应用程序，它将 jQuery 用于 Ajax 和 UI。现在我想向它添加单元测试。我希望单元测试在单个进程中运行，而无需启动浏览器和单独的 Web 服务器，我希望它适用于 Node.js 和以下 Node.js 模块：

*   `buster.js`
*   jQuery Node.js 模块
*   jsdom Node.js 模块

我错过了什么吗？有没有这样的单元测试的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:38:02.827

尝试“断言”模块。它包含在标准 Node.js 中，您可以执行以下操作：

```
var assert = require('assert');
assert.ok(true, 'test fails'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:49:05.723

好吧，您可以使用 编写测试例程`assert`，但我想推荐使用单元测试框架——更具体地说，[nodeunit](https://github.com/caolan/nodeunit/)。有[一篇简洁的文章](http://caolanmcmahon.com/posts/unit_testing_in_node_js)描述了如何使用这个模块来简化单元测试。

我可以说这里实际上有一堆线程（咳咳......）同样的问题 - 例如，[这个](https://stackoverflow.com/questions/7254025/node-js-unit-testing)，有很多选择。)

# android - 如何以编程方式从 Android 平板电脑中的 USB 存储设备访问文件？

> ID：11169340
> 
> 赞同：0
> 
> 时间：2012-06-23T12:03:00.253
> 
> 标签：android

我正在使用安卓平板电脑。我已将 USB 存储设备 ( Pendrive ) 连接到 android 平板电脑。我不知道如何访问 USB 存储设备 ( Pendrive ) 中的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:48:07.010

查看[android.hardware.usb 包](http://developer.android.com/reference/android/hardware/usb/package-summary.html)的文档。

# c# - 在 C# 中获取一个表的架构

> ID：11169345
> 
> 赞同：14
> 
> 时间：2012-06-23T12:03:23.560
> 
> 标签：c#, sql

初始化connectionString后，我想在SQL SErver中获取名称为“Petro”的表的架构，我使用此代码

```
conn.open();
conn.getSchema("Tables"); 
```

但它返回所有表的架构。我只想要 Petro 模式。我该怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-23T12:09:40.053

```
string[] restrictions = new string[4];
restrictions[2] = "Petro";
DataTable table = conn.GetSchema("Tables",restrictions); 
```

在此处查看更多信息：[MSDN：使用 GetSchema 方法](http://msdn.microsoft.com/en-us/library/ms254934%28v=vs.80%29.aspx)

编辑：使用 GetSchema 而不是 getSchema

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-23T12:15:28.633

您可以通过以下方式检索架构：

```
 string sql = "select * from Petro WHERE 1 = 0";
            conn.Open();
            SqlCommand cmd = new SqlCommand(sql, conn);
            SqlDataReader reader = cmd.ExecuteReader();
            DataTable schema = reader.GetSchemaTable(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-23T12:09:03.097

SQL Server 解决方案：

有一个存储过程称为`sp_columns`. 当您使用表名作为参数运行该过程时，它将仅返回该表的架构。

# maven - 在 Teamcity 中设置项目运行器以将构建工件部署到 Artifactory

> ID：11169347
> 
> 赞同：2
> 
> 时间：2012-06-23T12:03:58.287
> 
> 标签：maven, continuous-integration, teamcity, artifactory

在我们的 Web 应用程序中，我们使用 TeamCity 管理我们的持续集成。到目前为止，我们已经手动添加了所需的 jar，并使用了一个 ant 脚本来构建和部署我们的应用程序。最近我们切换到 Maven 并将 Artifactory 添加到循环中。

我需要知道如何将我们的构建工件从 TeamCity 部署到 Artifactory。我将 Artifactory 插件添加到 TeamCity（遵循[本](http://wiki.jfrog.org/confluence/display/RTF/TeamCity+Artifactory+Plug-in)指南），但是在尝试添加新的构建步骤时，我似乎找不到任何与 Artifactory 相关的步骤（我希望找到）。

这里缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T13:41:00.737

我不认为这是一个单独的步骤，但实际上是 Maven 构建步骤本身末尾的一组选项（它应该朝向底部）。

请参阅此处了解更多详细信息：

*   [http://wiki.jfrog.org/confluence/display/RTF/TeamCity+Artifactory+Plug-in](http://wiki.jfrog.org/confluence/display/RTF/TeamCity+Artifactory+Plug-in)。

具体来说，它说“‘部署 maven 工件’选项仅在使用‘Maven2’构建运行程序时可用。”

# c# - 多个 FileStreams 用于在独立线程中同时读取/写入同一文件的不同部分

> ID：11169354
> 
> 赞同：5
> 
> 时间：2012-06-23T12:04:51.733
> 
> 标签：c#, .net, multithreading, file-io

我有一个大磁盘文件（大约 8 GB），其中包含我需要读取、在内存中处理和写回另一个文件的几百万条记录。所有记录的长度都是固定的（比如 100 字节）。

我正在考虑将我的进程并行化以在多个线程（通常为 4-8 个）上运行，每个线程将（专门）分配文件的特定部分来处理（例如，1 GB 块）。由于每个线程都会将其读取和写入限制在分配给它的文件部分，因此我的代码不存在竞争风险。

我是否允许初始化多个线程，每个线程都有自己的`FileStream`，以便在没有锁定的情况下读取/写入同一个文件，而不会有损坏的风险？假设目标文件已经提前（使用`FileStream.SetLength`）扩展至其完整大小，并且`FileShare`在打开每个`FileStream`.

另外，如果多个线程同时访问同一个文件，我是否会因缓冲丢失而面临减速的风险？我担心 MSDN 文档中关于[`FileStream`class](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)的“Detection of stream position changes”部分，其中指出：

> 当一个`FileStream`对象的句柄没有独占保留时，另一个线程可以同时访问文件句柄并更改与文件句柄关联的操作系统文件指针的位置。[…]
> 
> 如果在对该方法的调用中检测到句柄位置发生意外更改`Read`，.NET Framework 将丢弃缓冲区的内容并再次从文件中读取流。这可能会影响性能，具体取决于文件的大小以及可能影响文件流位置的任何其他进程。

这是否适用于我的情况，或者由`FileStream`实例创建的文件句柄是否不同且独立，即使访问同一个文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T12:25:04.773

这是完全安全的。

MSDN 文章中提到的问题没有风险，因为它仅适用于您自己更改底层句柄的情况。您根本没有访问句柄。

您会注意到随机磁盘 IO 会破坏性能。您可能希望通过从文件中读取大块（16MB 左右）并使用锁来防止并发读取和写入调用来缓解这种情况。请注意，即使在不同的 FileStream 实例上，您也需要防止并发调用，因为操作系统不会自动处理 IO。在内部，它们被分成小尺寸，以实现公平和可预测的延迟。这会导致随机 IO。

为什么不创建一个将缓冲区推送到 BlockingCollection 的读取器线程？您可以在多个线程上使用 Parallel.ForEach 处理该集合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T12:15:52.617

“内存映射文件将文件的内容映射到应用程序的逻辑地址空间。内存映射文件使程序员能够处理非常大的文件，因为内存可以同时管理，并且它们允许在没有需要查找。内存映射文件也可以跨多个进程共享。

CreateFromFile 方法从指定路径或磁盘上现有文件的 FileStream 创建内存映射文件。当文件未映射时，更改会自动传播到磁盘。

CreateNew 方法创建一个未映射到磁盘上现有文件的内存映射文件；并且适用于为进程间通信（IPC）创建共享内存。

内存映射文件与名称相关联。

您可以创建内存映射文件的多个视图，包括文件部分的视图。您可以将文件的同一部分映射到多个地址以创建并发内存。为了使两个视图保持并发，它们必须从同一个内存映射文件创建。使用两个视图创建同一文件的两个文件映射不提供并发性。”

[http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile.aspx](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile.aspx)

# ruby-on-rails - 复杂活动记录关联

> ID：11169355
> 
> 赞同：0
> 
> 时间：2012-06-23T12:04:52.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
User
  first_name: "Johnny"
  age: 15

Car
  name: "Mazda"

Car
  name: "BMW" 
```

我想要看起来像的结果

```
[ {"first_name": "Johnny", "age": 15, cars: [ { "name": "Mazda" }, { "name" : "BMW" } ] } ] 
```

在 Rails 中可以做到这一点吗？到目前为止，我可以通过键入来获取用户汽车，`johnny.cars`但我希望数据结构也能保存`parent`.

我正在玩弄使用 named_scopes 和瞬态属性的想法，但到目前为止还没有运气，非常感谢任何想法/帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:53:43.990

您实际上可以使用`:includes`语句从另一个表中检索所有记录

`includes`是一种神奇的语法，您可以在其中急切加载记录的所有相关记录。

示例在您的情况下

用户 has_many car

所以如果你这样做

`@users = User.includes(:cars)`

现在这将加载**所有**用户记录，并将为每个用户对象预先加载所有汽车记录

因此，如果您遍历用户对象并执行

```
<% @users.each do |user| %>
  <%= user.cars %>
<%end%> 
```

`user.cars`不会触发单独的查询来为用户获取所有汽车，而是会获取那些使用该`includes`子句急切加载的记录

这种技术被广泛用于避免`N+1`查询问题

谷歌`N+1`了解更多信息

希望这个帮助

# android - Android动态删除按钮

> ID：11169360
> 
> 赞同：9
> 
> 时间：2012-06-23T12:05:25.763
> 
> 标签：android, android-layout

我有一个按钮，当我按下它时，我想删除它（而不是让它不可见）。我读到我可以这样做，`layout.removeView(mybutton)`但布局是什么？以及如何在我的活动中获得它

```
Button showQuestion;
private void initialize() {
    showQuestion = (Button) findViewById(R.id.bAnswerQuestionShowQuestion);
}
public void onClick(View v) {
    switch (v.getId()) {
        case R.id.bAnswerQuestionShowQuestion:
                showQuestion.setVisibility(View.INVISIBLE);
                //Here i want to delete the button
                question.setVisibility(View.VISIBLE);
                theAnswer.setVisibility(View.VISIBLE);
                answerQuestion.setVisibility(View.VISIBLE);
                showChoices.setVisibility(View.VISIBLE);
                showHint.setVisibility(View.VISIBLE);
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-23T12:07:44.190

见[链接](http://developer.android.com/reference/android/view/View.html#getParent%28%29)

```
ViewGroup layout = (ViewGroup) button.getParent();
if(null!=layout) //for safety only  as you are doing onClick
  layout.removeView(button); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-23T12:13:21.007

> 我有一个按钮，当我按下它时，我想删除它（不要让它不可见）

=> 你做了如下：

```
 showQuestion.setVisibility(View.INVISIBLE); 
```

尝试：

```
 showQuestion.setVisibility(View.GONE); 
```

仅供参考，INVISIBLE 只是隐藏视图但实际存在于那里，并且 GONE 隐藏以及物理上移除存在。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-23T12:10:36.403

您可以使用

```
 button.setVisibility(View.GONE); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T12:09:23.910

Layout 是 Button 的父 Layout，通常是 RelativeLayout 或 LinearLayout。

您可以按以下方式获取它：

```
ViewParent layout = button.getParent(); 
```

# android - 如何安全地复制剪切文件

> ID：11169361
> 
> 赞同：0
> 
> 时间：2012-06-23T12:05:46.193
> 
> 标签：android

您知道在 Android 中进行安全复制剪切操作的任何方法吗？

我想做一个文件管理器。我可以使用 FileReader/Writer 来完成它们，但由于不安全（如果应用程序崩溃），我想要另一种安全的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:35:28.923

您可能应该设计一个故障安全的操作顺序。例如（只是编造这个，还没有彻底验证它）：

1.  在持久性工作清单文件（/共享首选项等）中记录您打算做什么
2.  复制文件
3.  验证副本是否完整
4.  只有这样才能删除原来的
5.  清理工作清单中的记录

您不应该在 UI 线程上进行工作。您可能需要考虑在服务中处理可能需要一段时间的大文件（或大量文件）的情况。

您可能还需要考虑是否可以在某些情况下使用 File.renameTo() 方法 - 这将要求源和目标位于同一分区上（即，都在外部存储上）。此外，您还必须确保目标目录存在。

如果所选对象是目录而不是文件，还要考虑一下您将要做什么......

# c++ - 如何分配具有复杂构造函数的对象？

> ID：11169366
> 
> 赞同：3
> 
> 时间：2012-06-23T12:07:12.630
> 
> 标签：c++, memory-management, raii

我想我对 C++ 相当了解，并且我正在考虑实现比“玩具”程序更大的东西。我知道堆栈内存和堆内存与 RAII 成语之间的区别。

假设我有一个简单的类*点*：

```
class point {
public:
    int x;
    int y;
    point(int x, int y) : x(x), y(y) {}
}; 
```

我总是在堆栈上分配点，因为对象很小。因为在 64 位机器上`sizeof(point) == sizeof(void*)`，如果没有错，我会走得更远，默认情况下按值传递分数。

现在让我们假设一个更复杂的职业*战场*，我想在职业*游戏*中使用它：

```
class battlefield {
public:
    battlefield(int w, int h, int start_x, int start_y, istream &in) {
        // Complex generation of a battlefield from a file/network stream/whatever.
    }
}; 
```

因为我真的很喜欢 RAII 和对象离开范围时的自动清理，所以我很想在堆栈上分配战场。

```
game::game(const settings &s) :
        battlefield(s.read("w"), s.read("h"), gen_random_int(), gen_random_int(), gen_istream(s.read("level_number"))) {
    // ...
} 
```

但是我现在有几个问题：

*   由于这个类没有零参数构造函数，我必须在我使用战场的类的初始化列表中对其进行初始化。这很麻烦，因为我需要来自某个地方的 istream。这导致了下一个问题。

*   复杂的构造函数有时会“滚雪球”。当我在*游戏类中使用**战场*并在初始化列表中初始化游戏的构造函数时，*游戏*的构造函数也会变得相当复杂，*游戏*本身的初始化也可能变得繁琐。（当我决定将*istream*作为*游戏*构造函数的参数时）

****   我需要辅助函数来填写复杂的参数。*** 

 ***我看到这个问题的两种解决方案：

*   要么我为不初始化对象的*战场*创建一个简单的构造函数。但是这种方法的问题是我有一个半初始化的对象，也就是一个违反 RAII 习惯用法的对象。在这样的对象上调用方法时可能会发生奇怪的事情。

    ```
    game::game(const settings &s) {
        random_gen r;
        int x = r.random_int();
        int y = r.random_int();
        ifstream in(s.read("level_number"));
        in.open();
        this->battlefield.init(s.read("w"), s.read("h"), x, y, in);
        // ...
    } 
    ```

*   或者我在*游戏*构造函数的堆上分配*战场。*但是我必须小心构造函数中的异常，并且我必须注意析构函数会删除*战场*。

     **```
    game::game(const settings &s) {
        random_gen r;
        int x = r.random_int();
        int y = r.random_int();
        ifstream in(s.read("level_number"));
        in.open();
        this->battlefield = new battlefield(s.read("w"), s.read("h"), x, y, in);
        // ...
    } 
    ```** 

 **我希望你能看到我在想的问题。我遇到的一些问题是：

*   我不知道这种情况是否有设计模式？

*   大型 C++ 项目的最佳实践是什么？哪些对象在堆上分配，哪些在栈上分配？为什么？

*   关于构造函数的复杂性的一般建议是什么？对于构造函数来说，从文件中读取太多了吗？（因为这个问题主要来自复杂的构造函数。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:36:16.307

> 但是这种方法的问题是我有一个半初始化的对象，也就是一个违反 RAII 习惯用法的对象。

那不是*RAII*。这个概念是您使用对象来管理资源。当您获取堆内存、信号量、文件句柄等资源时，您必须将所有权转移给资源管理类。这就是 C++ 中智能指针的用途。`unique_ptr`如果您想拥有对象的唯一所有权，则必须使用或者如果`shared_ptr`您希望多个指针拥有所有权，则必须使用 a。

> 或者我在游戏构造函数的堆上分配战场。但是我必须小心构造函数中的异常，并且我必须注意析构函数会删除战场。

如果你的构造函数抛出一个异常，那么对象的析构函数就不会被调用，你最终可能会得到一个半熟的对象。在这种情况下，您必须记住在抛出异常之前在构造函数中进行了哪些分配，并解除所有这些分配。再次，*智能指针*将有助于自动清理资源。查看此[常见问题解答](http://www.parashift.com/c++-faq-lite/exceptions.html#faq-17.10)

> 哪些对象在堆上分配，哪些在栈上分配？为什么？

尽可能在堆栈中分配对象。然后，您的对象仅在该块的范围内具有生命。如果您遇到不可能进行堆分配的情况 - 例如：您只知道运行时的大小，对象的大小太大而不能放在堆栈上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T12:45:28.953

你可以让你的战场从设置中构建：

```
explicit battlefield(const settings& s); 
```

或者，为什么不为您创建一个工厂函数`battlefield`？

例如

```
battlefield CreateBattlefield(const settings& s)
{
    int w = s.read("w");
    int h = s.read("w");
    std::istream& in = s.genistream();
    return battlefield(w, h, gen_random_int(), gen_random_int(), in);
}

game::game(const settings &s) :
    battlefield(CreateBattlefield(s)) {
    // ...
} 
```*****

# ruby-on-rails - 我们如何在 Ruby on Rails 中使用 MongoDB？

> ID：11169371
> 
> 赞同：1
> 
> 时间：2012-06-23T12:08:28.977
> 
> 标签：ruby-on-rails, mongodb, nosql

有人知道如何创建使用 noSql 数据库的 Rails 应用程序吗？我们使用 mysql 数据库执行 rails new app_name -d mysql ，我需要知道在 noSql 数据库的情况下应该触发什么命令。如何配置和连接到该数据库以及如何使用其中的表。我需要参考链接来学习。有人可以帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T13:24:17.073

就我而言，您将不得不创建一个不包括活动记录的新 Rails 项目：

```
rails new my_app --skip-active-record 
```

然后您可以按照 Mongoid 的配置步骤进行操作：

[http://mongoid.org/en/mongoid/docs/installation.html](http://mongoid.org/en/mongoid/docs/installation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:25:26.623

[http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started](http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started)应该让你开始。

# c++ - 项目创建失败 Microsoft Visual C++ 2010 Express 和 Visual Studio 2010

> ID：11169372
> 
> 赞同：2
> 
> 时间：2012-06-23T12:08:40.197
> 
> 标签：c++, visual-studio-2010, visual-c++

我一直在使用 Microsoft Visual Studio 2010 一段时间，有一天我去创建一个新项目，它在我的屏幕底部出现“正在创建项目'XInput'......项目创建失败”。

我已经在互联网上搜索了很多天以找到解决此问题的方法，但没有运气，所以我将列出我所做的。

*   更改了我的注册表文件权限

*   以管理员身份运行

*   开了一个新账户

*   卸载、重新安装并再次卸载 Visual Studio

*   安装 Visual C++ 2010 Express

*   删除注册表文件并重新创建它们

*   尝试将项目保存在我的外部硬盘而不是我的内部

*   尝试查看和编辑配置文件

我可以打开现有项目，但我无法打开任何现有项目。任何帮助是极大的赞赏。我正在运行 Windows 7 Ultimate（64 位）

# java - 需要帮助修改正则表达式

> ID：11169374
> 
> 赞同：0
> 
> 时间：2012-06-23T12:08:43.253
> 
> 标签：java, regex, url

我目前正在使用下面给出的正则表达式将 href 添加到我的网址。但最近我遇到了一个错误，因为其中一个 url 在它之后有一个句号，并且正则表达式将点添加到链接中。

```
(?:https?|ftps?)://[\\w/%.-]+", "<a href='$0'target='_blank'> $0</a> 
```

那么，它可以修改为只需要一个点吗？我正在使用 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:24:32.177

我用过这个：

```
(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])? 
```

[但是你可以在这里](http://regexlib.com/Search.aspx?k=URL&AspxAutoDetectCookieSupport=1)找到更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:24:33.593

我像这样编辑了我的，它起作用了。"(?:https?|ftps?)://[\w.]+/[\w]+"

# lua - Corona 中 display.newText 的文本字体大小参数中的 * 是什么意思？

> ID：11169376
> 
> 赞同：-1
> 
> 时间：2012-06-23T12:09:11.150
> 
> 标签：lua, coronasdk

在这个 display.newText 参数中，16*2 是什么意思？谢谢。

```
 local display_txt=display.newText("Wait",0,0,native.SystemFont,16*2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:20:48.390

[display.newText](http://developer.anscamobile.com/content/displaynewtext)的最后一个参数是大小。在这种情况下，程序员将大小设置为 32，但出于某种原因选择将其表示为 16*2。

# php - str_replace 回变量

> ID：11169382
> 
> 赞同：-2
> 
> 时间：2012-06-23T12:09:45.300
> 
> 标签：php

我有一个字符串：

```
$ht="Sunday_ Oct. 31_ 2012" 
```

我想用逗号替换下划线

我可以：

```
echo "-------------------->>>".str_replace("_", ",", $ht); 
```

它像那样工作得很好，但我不想回应它，我希望它回到 $ht 中。

也许像

```
 $ht=str_replace("_",",",$ht) 
```

这是行不通的。

提前致谢，

艾伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:12:17.527

简单地：

```
$ht = str_replace("_", ",", $ht); 
```

它***确实***有效：

```
$ht="Sunday_ Oct. 31_ 2012";
$ht = str_replace("_", ",", $ht);
echo $ht; // Sunday, Oct. 31, 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:11:15.673

也许你忘记了`;`？因为这应该可以正常工作：

```
$ht = str_replace("_", ",", $ht); 
```

[^(在键盘上查看输出)](http://codepad.org/sHH8RKgt)

* * *

旁注：您应该使用您的编码风格，在这种情况下：

*   `=`字符前后的空格
*   每个函数参数后都有一个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T12:19:48.260

strtr 比 str_replace 快，因为它用 1 个字符替换 1 个字符：

```
$ht = strtr($ht, '_', ','); 
```

如果你想用任意数量的字符替换超过 1 个字符，你应该使用 str_replace。

# android - listviewitem上未显示警报框单击android

> ID：11169383
> 
> 赞同：1
> 
> 时间：2012-06-23T12:09:56.480
> 
> 标签：android, textview

我想在警报框中设置 textview 文本。我想做倒计时框。我的代码如下：我的自定义警报框。

```
public abstract class ChallengeDialog extends AlertDialog.Builder implements OnClickListener {

    TextView msg;

 /**
  * @param context
  * @param title resource id
  * @param message resource id
  */
 public ChallengeDialog(Context context, String title, String message) {
  super(context);
  setTitle(title);
//  setMessage(message);
  msg = new TextView(context);
  msg.setText(message);
  setView(msg);

  setPositiveButton("accept", this); //In android this is OK button
  setNegativeButton("reject", this);//In android this is cancel button
 }

public void setDialogMsg(String m){
     msg.setText(m);
     setView(msg);
 }

 /**
  * will be called when "cancel" pressed.
  * closes the dialog.
  * can be overridden.
  * @param dialog
  */
 //This is cancel button
 public void onOkClicked(DialogInterface dialog) {
  dialog.dismiss();
 }

 @Override
 public void onClick(DialogInterface dialog, int which) {

  if (which == DialogInterface.BUTTON_POSITIVE) { 

    dialog.dismiss();

  } else {

      onOkClicked(dialog);

  }

 }

 /**
  * called when "ok" pressed.
  * @param input
  * @return true, if the dialog should be closed. false, if not.
  */
 //This is challenge button 
 abstract public boolean onCancelClicked(String input); 

} 
```

使用自定义警报框的代码

```
ChallengeDialog chlngDialog = new ChallengeDialog(MyActivity.this,"title","count") {

                            @Override
                            public boolean onCancelClicked(String input) {
                                // TODO Auto-generated method stub
                                return false;
                            }

                        };

                        AlertDialog a = chlngDialog.show();

                        for(int i = 15 ; i>0 ;i--){

                            try {
                                chlngDialog.setDialogMsg("count "+i);
                                Thread.sleep(1000);

                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
//a.dismiss(); 
```

我在单击列表视图时执行此代码。但是警报框在 15 秒后显示，我点击了 listview 项目。我不知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:27:11.937

正如 Android Coader 所建议的那样，我最终完成了异步任务。下面是代码：

```
public abstract class MyDialog extends AlertDialog.Builder implements OnClickListener {

    TextView msgTxt;
    private static int count= 15 ;
    private String user;
    private int c;

 /**
  * @param context
  * @param title resource id
  * @param message resource id
  */
 public ChallengeDialog(Context context, String title, String message) {
  super(context);
  setTitle(title);
  setCancelable(false);
//  setMessage(message);
  msgTxt = new TextView(context);
  msgTxt.setText(message);
  setView(msgTxt);

  setPositiveButton("accept", this); //In android this is OK button
  setNegativeButton("reject", this);//In android this is cancel button

  MyTimerTask myTask = new MyTimerTask();
  myTask.execute(new String[] { "abc" });

 }

public void setUserAndBet(String u,int b){
        c= b;
        user = u ;
 }

 /**
  * will be called when "cancel" pressed.
  * closes the dialog.
  * can be overridden.
  * @param dialog
  */

 @Override
 public void onClick(DialogInterface dialog, int which) {

  if (which == DialogInterface.BUTTON_POSITIVE) { 

      onAcceptClicked(dialog);
//    dialog.dismiss();

  } else {

      onRejectClicked(dialog);

  }

 }

 /**
  * called when "ok" pressed.
  * @param input
  * @return true, if the dialog should be closed. false, if not.
  */
 //This is accept button 
 abstract public boolean onAcceptClicked(DialogInterface d);
 abstract public boolean onRejectClicked(DialogInterface d);

    Handler mHandler = new Handler() {
     @Override
     public void handleMessage(Message msg) {

        int countDownValue = (Integer)msg.obj;

        msgTxt.setText(countDownValue +" seconds");

        //call setText here
     }
    };

 class MyTimerTask extends AsyncTask<String, Void, String>{

        @Override
        protected String doInBackground(String... urls) {
          //mHandler.sendEmptyMessage(0);

          while(count > 0 ){

              Message msg = new Message();
              int countDownValue = count--;
              msg.obj = countDownValue;
              mHandler.sendMessage(msg);
              try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

          }

          return " ";

      }
 } 
} 
```

只需创建此调用的对象并调用 show() 方法。感谢 Adndroid Coader

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:25:55.840

您是否将 for 循环放在`onItemClick`侦听器中？

如果是，则创建一个异步任务并在`onItemClick`侦听器中执行该任务。将 for 循环放入`doInBackground`.

# regex - Apache 替换的正则表达式

> ID：11169384
> 
> 赞同：0
> 
> 时间：2012-06-23T12:09:59.750
> 
> 标签：regex, apache, sed

将 wp-admin 转换为 acceso08 在正常情况下可以正常工作，但在 #wp-admin: xx 这样的情况下不起作用。

代替`s|wp-admin|acceso08|n`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:48:32.027

注意末尾的“g”标志。

```
sed -e 's|wp-admin|acceso08|g' input_file > output_file 
```

g 标志的详细信息：http: [//www.grymoire.com/Unix/Sed.html#uh-6](http://www.grymoire.com/Unix/Sed.html#uh-6)

# svn - 安装和运行 Subversion

> ID：11169387
> 
> 赞同：0
> 
> 时间：2012-06-23T12:10:30.740
> 
> 标签：svn, installation

我为 subversion "Setup-Subversion-1.7.5" 安装了安装向导，但是如何运行 Subversion？安装完成后，我看不到任何程序在任何目录中运行。自述文件对我也没有帮助。

基本上，安装程序运行完成后我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:16:16.440

查看颠覆手册，这是一本非常棒的[书](http://svnbook.red-bean.com/)，可以解释一切。

您可以免费下载或在线搜索。他们提供多种格式。它甚至有不同的语言版本。

您通常从[创建存储库](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html)开始。确保您之前计划过。

如果您已经有一个存储库，您可以开始[检查一些东西](http://svnbook.red-bean.com/en/1.7/svn.tour.initial.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:19:33.797

它已集成到 Windows 资源管理器中，因此您应该在其上下文菜单中看到新的菜单项。

但是要像专业人士一样使用它，您应该阅读这本书[http://svnbook.red-bean.com/](http://svnbook.red-bean.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T12:18:39.757

一旦您的系统上安装了 SVN，您就可以使用命令提示符来使用它。如果你想要一个用户界面，请下载 TortoiseSVN，它是一个 shell 扩展，所以在使用它时请记住这一点，即右键单击任何文件夹，你将有一个称为 repo 浏览器的 TortoiseSVN 菜单（我认为）打开它将显示用户界面。

或者，如果您在 eclipse 中工作，则可以使用一系列插件。Subversive 和 Subclipse 是两个众所周知的插件。

希望这能回答你的问题

# c++ - C ++闹钟，循环问题

> ID：11169392
> 
> 赞同：0
> 
> 时间：2012-06-23T12:11:37.013
> 
> 标签：c++, loops, clock, alarm

我正在尝试制作一个可以设置多次的闹钟。这是代码

```
std::cout<<"Enter the link: ";
        std::string link;
        std::cin>>link;
        std::cout<<"\n\nProccessing...";

        loop3: //Keep getting the time until everything adds up...

        time_t s=time(0); //Getting ready for time
        tm t=*localtime(&s); //Getting time put into Variable t

        for(int i=0;i<n;i++){
            if (hour[i] != t.tm_hour){
                goto loop3;
            }

            if (min[i] != t.tm_min){
                goto loop3;
            }

            ShellExecute(NULL, "open", link.c_str(), NULL, NULL, SW_SHOWNORMAL);
        } 
```

我希望它会在 n 中打开确切的输入次数，但据我了解，当他执行 ShellExecute 命令时，它会回到循环的开头，检查时间并且时间仍然相同，因此他执行命令再次。这样一来，它就类似于那一分钟的无限循环。

那么，有没有办法解决这个问题？他执行命令的那一刻，他只会执行一次，然后继续前进？我希望你能理解我的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:29:01.063

你想那样做吗？

```
time_t s;
tm t;

for(int i=0;i<n;){
    s=time(0); //Getting ready for time
    t=*localtime(&s); //Getting time put into Variable t

    if (hour[i] != t.tm_hour){
        continue;
    }

    if (min[i] != t.tm_min){
        continue;
    }

    ShellExecute(NULL, "open", link.c_str(), NULL, NULL, SW_SHOWNORMAL);
    i++;
} 
```

# c# - C#发送一个简单的SSH命令

> ID：11169396
> 
> 赞同：62
> 
> 时间：2012-06-23T12:12:14.080
> 
> 标签：c#, ssh

我是一名年轻的学生，这周收到了我的作业。这对我来说非常困难，因为我必须创建一个能够连接到 SSH 服务器并发送命令“etc/init.d/networking restart”的程序。

我应该用 C# 编写这个应用程序，而且我对它很陌生（刚刚从一些学校课程中学到了东西）。我还应该创建一个 GUI。

我了解 C# 的基础知识（循环、if 等...）。

我已经创建了 GUI、菜单、按钮和日志列表框。GUI = 3 个文本框（ip、用户名、密码）和一个连接按钮。

![界面截图](../Images/a797a03d72b3f052a32d2434e7e013ce.png)

![代码截图](../Images/b2b8a349239a8dfd42f43cb8861d3e71.png)

我正在使用 Microsoft Visual Studio 进行编码。

我的问题是：如何与我的服务器建立 SSH 连接？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-10-15T19:26:12.003

不久前我在一个项目中使用了[SSH.Net](https://github.com/sshnet/SSH.NET)，并且对此非常满意。它还附带了一个很好的文档，其中包含许多关于如何使用它的示例。

原始包网站仍然可以在[这里](http://sshnet.codeplex.com/)找到，包括文档（目前在 GitHub 上不可用）。

对于您的情况，代码将是这样的。

```
using (var client = new SshClient("hostnameOrIp", "username", "password"))
{
    client.Connect();
    client.RunCommand("etc/init.d/networking restart");
    client.Disconnect();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-18T20:54:05.203

```
SshClient cSSH = new SshClient("192.168.10.144", 22, "root", "pacaritambo");
cSSH.Connect();
SshCommand x = cSSH.RunCommand("exec \"/var/lib/asterisk/bin/retrieve_conf\"");
cSSH.Disconnect();
cSSH.Dispose(); 
```

//使用SSH.Net

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T13:03:48.787

SharpSSH 应该可以完成这项工作。 [http://www.codeproject.com/Articles/11966/sharpSsh-A-Secure-Shell-SSH-library-for-NET](http://www.codeproject.com/Articles/11966/sharpSsh-A-Secure-Shell-SSH-library-for-NET)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-17T08:13:52.113

迟到的答案，但对我来说，不幸的是，没有一个解决方案有效。实际上，如果您需要执行多个命令，并且这些命令相互依赖（第一个命令修改了环境，例如后面的​​命令使用的变量），您必须在一个通道内执行它们。为此使用 shell 语法，例如`&&`or `;`：

```
using (var client = new SshClient("hostnameOrIp", "username", "password"))
{
    client.Connect();

    using (var command = client.CreateCommand("command1 && command2"))
    {
        Console.Write(command.Execute()); //Don't forget to Execute the command
    }

    client.Disconnect();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-22T21:00:13.453

对于 .Net 核心，我在使用 SSH.net 时遇到了很多问题，而且它也被弃用了。我尝试了其他一些库，甚至是其他编程语言。但我找到了一个很好的选择。 [https://stackoverflow.com/a/64443701/8529170](https://stackoverflow.com/a/64443701/8529170)

# css - 为什么不在 Web 中使用 Gradient div？

> ID：11169397
> 
> 赞同：-1
> 
> 时间：2012-06-23T12:12:15.517
> 
> 标签：css, styling

在开发人员中使用渐变图像来设置页面样式非常普遍。从导航栏的样式到背景的样式，许多地方都使用了渐变图像。像在任一方向重复小图像这样的技术也很常见。

另一种设置样式和提供这种效果的方法是在另一个下面使用多个具有不同颜色的 div，后者比前者轻一点。在最简单的情况下，这样做只会包含一个小脚本。所以，写很多标记没有问题，只是一些简单的代码。

剩下的唯一问题是速度和性能。

**速度**

脚本，更准确地说，函数的大小比图像要短得多。因此，就速度而言，后一种方法似乎更好。

**表现**

今天的浏览器非常强大，因此显示图像和执行功能之间的差异可以忽略不计。

**CSS管理**

显然，定位等问题将是另一个问题，但我们确实在日常生活中与这些问题作斗争。问题不在于重叠两个 div 并设置它们的 z-index。整个渐变 div 可以位于一个父 div 内。

那么，在解决了性能和速度问题之后，使用 Gradient div 是不是比使用图像更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:18:32.743

这是另一种方法，是的。但不是一个好的。你得到零分：

*   可维护性
*   可扩展性
*   搜索引擎优化
*   呈现与内容的分离

此外，说我们不必担心性能，因为今天的浏览器更强大是一个粗略的假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:36:00.580

实际上，我认为您描述的第二个选项（创建多个具有不同颜色的 div）非常糟糕。

1.  为了样式，您正在更改标记。那是不行的。
2.  用户禁用 JavaScript 是很常见的事情。那会发生什么？
3.  正如你自己所说，定位混乱。
4.  在性能方面，我会更加谨慎，而不是说它不再是一个问题。尤其是考虑到移动浏览器的兴起。
5.  这样的样式将更难理解和维护。特别是当你的团队有一天发生变化时。

此外，还有另外两种实现渐变的方法。

1.  CSS 渐变——仅限于简单的变体，需要大量的 CSS 才能提供不错的跨浏览器功能。你可以试试这个生成器来尝尝这些： http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)
2.  SVG 背景。这些允许您创建任何您想要的渐变。您可以像使用任何其他图像一样在 CSS 中使用 svg 文件。但是，某些浏览器不支持此功能。这是一个表格，显示[何时可以选择](http://caniuse.com/#feat=svg-css)

使用图像是最可靠的选择，而将 SVG 与普通图像结合（对于这些不支持 SVG 的浏览器）似乎是最灵活的方法。

# ios - IOS - 在故事板中连接 segue 时遇到问题

> ID：11169414
> 
> 赞同：0
> 
> 时间：2012-06-23T12:14:40.570
> 
> 标签：ios, xcode, uiviewcontroller, uistoryboard, uistoryboardsegue

我正在做我的第一个 segue，我有点困惑。我用一些按钮制作了一个初始屏幕。然后我做了第二个屏幕。然后我点击第一个屏幕，进入编辑器 -> embed_in -> NavigationController 并且工作正常。

但是我试图将按钮连接到的屏幕没有出现在情节提要上，所以我不确定如何连接到它。

我正在添加我的故事板的屏幕截图。![在此处输入图像描述](../Images/dc7a480a68b54e763769c8abfe89e8b1.png)

您将看到故事板如何将具有 4 个按钮的屏幕连接到 NavigationController。但是如何让我想要连接的另一个控制器显示在同一屏幕上并连接到它？

这是 LearningCenter.h 文件

```
#import <UIKit/UIKit.h>

@interface LearningCenter : UIViewController

@end 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T12:44:36.053

在情节提要中打开 Xcode 中的对象库并搜索视图控制器并将其拖到画布上：

![在此处输入图像描述](../Images/7b38c86dade8d2bbb9481be65215a7ee.png)

然后选择新的视图控制器并转到身份检查器并替换`UIViewController`为您的自定义类的名称。

![在此处输入图像描述](../Images/be63ac350223e9400c1262dba007f5a0.png)

现在，您已经将情节提要视图控制器与项目中的视图控制器代码“粘合”起来。

要使用 segue 回答您的第二个问题：按住 ctrl 并单击并按住您的按钮。然后（同时按住 ctrl + 鼠标左键！）从按钮拖动到新的视图控制器视图。现在应该有一个segue

# c# - PrintPage 绘制字符串未显示 C#

> ID：11169416
> 
> 赞同：1
> 
> 时间：2012-06-23T12:14:59.227
> 
> 标签：c#, graphics, printdocument

所以我试图在 a 的情况下在循环中绘制一个`PrintPage`字符串`PrintDocument`：

```
for (int c = 0; c < currentwords; c++)
{
    // index is a global int that starts at 0 and f9 is a font with size 9
    ev.Graphics.DrawString(allitems[index], f9, Brushes.Black, new Point(100, 100));
    // I used new Point(100, 100) for debugging purposes but normally I would
    // do some calculating to see where it is to be printed
    index++;
} 
```

看起来一切正常，调试器显示它在我使用断点时运行，但是当我在 a 中显示文档时`PrintPreviewDialog`它没有显示。`allitems[index]` **确实**包含一个值，我不确定它为什么不显示。我在循环*之外*打印其他字符串和矩形，它们显示在对话框中。如果有人可以帮助我，请在此处发布，谢谢！

编辑：

以下是图形模式/渲染提示：

```
ev.Graphics.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
ev.Graphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
ev.Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
ev.Graphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.ClearTypeGridFit;
ev.Graphics.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality; 
```

编辑2：

好的，所以我使用了：

```
ev.Graphics.DrawString(allitems[0], f9, Brushes.Black, new Point(100, 100));
for (int c = 0; c < currentwords; c++)
{
    // index is a global int that starts at 0 and f9 is a font with size 9
    ev.Graphics.DrawString(allitems[index], f9, Brushes.Black, new Point(100, 100));
    // I used new Point(100, 100) for debugging purposes but normally I would
    // do some calculating to see where it is to be printed
    index++;
} 
```

并且只`DrawString`显示了循环外部，但循环应该可以工作并且代码正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:24:12.350

所以我发现问题是如果我在 for 循环中多次绘制，如下所示：

```
for (int c = 0; c < currentwords; c++)
{
    ev.Graphics.DrawString(allitems[index], f9, Brushes.Black, 100, 100);
    ev.Graphics.DrawString(allqty[index], f9, Brushes.Black, new Point(200, 200);
    ev.Graphics.DrawString((allprices[index].Contains('$')) ? allprices[index] : "$" + allprices[index], f9, Brushes.Black, 300, 300);
} 
```

它根本不会显示它们中的任何一个。要解决此问题，我必须将每种`DrawString`方法置于不同的循环中，不知道为什么它不起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T08:47:59.000

将循环控制变量更改为“索引”。您的错误是您没有为循环使用循环控制变量。

# c++ - C++ 的 NumPy 样式数组？

> ID：11169418
> 
> 赞同：102
> 
> 时间：2012-06-23T12:15:45.217
> 
> 标签：c++, arrays, python-3.x, numpy, dynamic-arrays

是否有任何 C++（或 C）库具有类似 NumPy 的数组，支持切片、矢量化操作、逐个元素添加和减去内容等？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-23T13:10:38.350

这里有几个可能适合您需求的免费软件。

1.  [GNU 科学库](http://www.gnu.org/software/gsl/)是用 C 编写的GPL 软件。因此，它具有类似 C 的分配和编程方式（指针等）。使用[GSLwrap](http://gslwrap.sourceforge.net/)，您可以使用 C++ 编程方式，同时仍使用 GSL。GSL 有一个[BLAS](http://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms)实现，但如果您想要更多性能，您可以使用[ATLAS代替默认的 CBLAS。](http://math-atlas.sourceforge.net/)

2.  [boost/uBLAS](http://www.boost.org/doc/libs/1_49_0/libs/numeric/ublas/doc/index.htm)库是一个 BSL 库，用 C++ 编写并作为 boost 包分发。它是实现 BLAS 标准的 C++ 方式。uBLAS 带有一些线性代数函数，并且有一个[与 ATLAS 的实验绑定](http://www.crystalclearsoftware.com/cgi-bin/boost_wiki/wiki.pl?Linear_Algebra_With_UBLAS)。

3.  [eigen](http://eigen.tuxfamily.org)是一个用 C++ 编写的线性代数库，在 MPL2 许可证（从版本 3.1.1 开始）或 LGPL3/GPL2（旧版本）下分发。这是一种 C++ 编程方式，但比其他两种方式更集成（可用的算法和数据结构更多）。Eigen[声称](http://eigen.tuxfamily.org/index.php?title=FAQ#How_does_Eigen_compare_to_BLAS.2FLAPACK.3F)比上面的 BLAS 实现更快，但不遵循事实上的标准 BLAS API。Eigen 似乎并没有在并行实现上投入太多精力。

4.  [Armadillo](http://arma.sourceforge.net/)是用于 C++ 的 LGPL3 库。[它具有LAPACK](http://www.netlib.org/lapack/)（numpy 使用的库）的绑定。它使用递归模板和模板元编程，这是一个好点（我不知道其他库是否也在这样做？）。

5.  [xtensor](https://github.com/QuantStack/xtensor)是一个获得 BSD 许可的 C++ 库。它提供了一个与 NumPy 非常相似的 C++ API。有关备忘单，请参阅[https://xtensor.readthedocs.io/en/latest/numpy.html](https://xtensor.readthedocs.io/en/latest/numpy.html)。

如果您只想获得数据结构和基本线性代数，这些替代方案非常好。根据您对风格、许可证或系统管理员挑战的品味（安装 LAPACK 等大型库可能很困难），您可以选择最适合您需求的库。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2016-11-06T11:23:16.027

试试[xtensor](http://quantstack.net/xtensor "张量器")。（请参阅[NumPy 到 Xtensor 备忘单](http://xtensor.readthedocs.io/en/latest/numpy.html "备忘单")）。

xtensor 是一个 C++ 库，用于使用多维数组表达式进行数值分析。

**xtensor 提供**

*   一个可扩展的表达系统，支持 numpy 风格的广播。
*   一个遵循 C++ 标准库习语的 API。
*   用于操作数组表达式并基于 xtensor 构建的工具。

**例子**

**初始化一个二维数组并计算其中一行与一维数组的总和。**

```
#include <iostream>
#include "xtensor/xarray.hpp"
#include "xtensor/xio.hpp"

xt::xarray<double> arr1
  {{1.0, 2.0, 3.0},
   {2.0, 5.0, 7.0},
   {2.0, 5.0, 7.0}};

xt::xarray<double> arr2
  {5.0, 6.0, 7.0};

xt::xarray<double> res = xt::view(arr1, 1) + arr2;

std::cout << res; 
```

输出

```
{7, 11, 14} 
```

**初始化一维数组并就地重塑它。**

```
#include <iostream>
#include "xtensor/xarray.hpp"
#include "xtensor/xio.hpp"

xt::xarray<int> arr
  {1, 2, 3, 4, 5, 6, 7, 8, 9};

arr.reshape({3, 3});

std::cout << arr; 
```

输出

```
{{1, 2, 3},
 {4, 5, 6},
 {7, 8, 9}} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-27T17:48:51.763

[DyND](https://github.com/libdynd/libdynd)被设计成一个类似 NumPy 的 C++ 库。诸如广播、算术运算符和切片之类的东西都可以正常工作。另一方面，它仍然是*非常*实验性的，许多功能还没有实现。

这是使用 DyND 数组在 C++ 中的 de Casteljau 算法的简单实现：

```
#include <iostream>
#include <dynd/array.hpp>

using namespace dynd;

nd::array decasteljau(nd::array a, double t){
    size_t e = a.get_dim_size();
    for(size_t i=0; i < e-1; i++){
        a = (1.-t) * a(irange()<(e-i-1)) + t * a(0<irange());
    }
    return a;
}

int main(){
    nd::array a = {1., 2., 2., -1.};
    std::cout << decasteljau(a, .25) << std::endl;
} 
```

不久前，我写了[一篇博客文章](http://insertinterestingnamehere.github.io/posts/basic-examples.html)，其中包含更多示例以及 Fortran 90、C++ 中的 DyND 和 Python 中的 NumPy 的语法的并排比较。

免责声明：我是当前的 DyND 开发人员之一。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-06-18T17:11:16.857

如果您想使用多维数组（如 numpy）进行图像处理或神经网络，您可以使用`OpenCV` `cv::Mat`大量的图像处理算法。如果您只想将它​​用于矩阵运算，您只需编译相应的 opencv 模块以减小大小并拥有微型 OpenCV 库。

`cv::Mat`(Matrix) 是一个 n 维数组，可用于存储各种类型的数据，例如 RGB、HSV 或灰度图像、具有实数或复数值的向量、其他矩阵等。

一个 Mat 包含以下信息：`width, height, type, channels, data, flags, datastart, dataend`等等。

它有几种矩阵操作方法。您可以在 CUDA 核心以及`cv::cuda::GpuMat`.

考虑我想创建一个 10 行 20 列的矩阵，输入 CV_32FC3：

```
int R = 10, C = 20;
Mat m1; 
m1.create(R, C, CV_32FC3); //creates empty matrix

Mat m2(cv::Size(R, C), CV_32FC3); // creates a matrix with R rows, C columns with data type T where R and C are integers, 

Mat m3(R, C, CV_32FC3); // same as m2 
```

奖金：

为矩阵运算编译[小巧紧凑的 opencv](https://mdeore.medium.com/opencv-on-android-tiny-with-optimization-enabled-932460acfe38)库。其中一种方法就像本文中提到的那样。

或者

使用以下 cmake 命令编译 opencv 源代码：

```
$ git clone https://github.com/opencv/opencv.git
$ cd opencv
$ git checkout <version you want to checkout>
$ mkdir build
$ cd build
$ cmake -D WITH_CUDA=OFF -D WITH_MATLAB=OFF -D BUILD_ANDROID_EXAMPLES=OFF -D BUILD_DOCS=OFF -D BUILD_PERF_TESTS=OFF -D BUILD_TESTS=OFF -DANDROID_STL=c++_shared -DBUILD_SHARED_LIBS=ON -D BUILD_opencv_objdetect=OFF -D BUILD_opencv_video=OFF -D BUILD_opencv_videoio=OFF -D BUILD_opencv_features2d=OFF -D BUILD_opencv_flann=OFF -D BUILD_opencv_highgui=OFF -D BUILD_opencv_ml=OFF -D BUILD_opencv_photo=OFF -D BUILD_opencv_python=OFF -D BUILD_opencv_shape=OFF -D BUILD_opencv_stitching=OFF -D BUILD_opencv_superres=OFF -D BUILD_opencv_ts=OFF -D BUILD_opencv_videostab=OFF -D BUILD_opencv_dnn=OFF -D BUILD_opencv_imgproc=OFF ..
$ make -j $nproc
$ sudo make install 
```

试试这个例子：

```
 #include "opencv2/core.hpp"
 #include<iostream>

 int main()
 {
     std::cout << "OpenCV Version " << CV_VERSION << std::endl;

     int R = 2, C = 4;
     cv::Mat m1;
     m1.create(R, C, CV_32FC1); //creates empty matrix

     std::cout << "My Mat : \n" << m1 << std::endl;
 } 
```

使用以下命令编译代码：

```
$ g++ -std=c++11 opencv_mat.cc -o opencv_mat `pkg-config --libs opencv` `pkg-config --cflags opencv` 
```

运行可执行文件：

```
$ ./opencv_mat

OpenCV Version 3.4.2
My Mat :
[0, 0, 0, 0;
 0, 0, 0, 0] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-10-12T17:22:05.860

这是一个老问题。还是想回答。想法可能会帮助很多人，尤其是 pydevs 用 C++ 编码。

如果您已经使用过 python numpy，那么[NumCpp](https://github.com/dpilger26/NumCpp)是一个不错的选择。它的语法极简，并且具有与 py numpy 类似的功能或方法。

自述文件中的[比较](https://github.com/dpilger26/NumCpp#from-numpy-to-numcpp--a-quick-start-guide)部分也非常非常酷。

> NumCpp

```
nc::NdArray<int> arr = {{4, 2}, {9, 4}, {5, 6}};
arr.reshape(5, 3);
arr.astype<double>(); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-23T12:20:40.347

Eigen 是一个很好的线性代数库。

[http://eigen.tuxfamily.org/index.php?title=Main_Page](http://eigen.tuxfamily.org/index.php?title=Main_Page)

它很容易安装，因为它是一个只有头文件的库。它依赖于模板来生成优化好的代码。它自动向量化矩阵运算。

它还完全支持系数明智的操作，例如两个矩阵之间的“每元素乘法”。这是你需要的吗？

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-08-02T10:28:48.627

使用 LibTorch（C++ 的 PyTorch 前端）并开心。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-04T13:07:10.637

[Blitz++](http://blitz.sourceforge.net/)支持具有任意数量轴的数组，而 Armadillo 最多支持三个（向量、矩阵和立方体）。Eigen 仅支持向量和矩阵（不支持立方体）。缺点是 Blitz++ 除了基本的入口运算和张量收缩之外没有线性代数函数。开发似乎在很长一段时间前已经放缓，但也许这只是因为图书馆做了它所做的事情，不需要做太多的改变。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-08-05T14:27:01.357

VIGRA 包含一个很好的 N 维数组实现：

[http://ukoethe.github.io/vigra/doc/vigra/Tutorial.html](http://ukoethe.github.io/vigra/doc/vigra/Tutorial.html)

我广泛使用它，发现它非常简单有效。它也只是标题，因此很容易集成到您的开发环境中。就其 API 而言，这是我遇到的最接近使用 NumPy 的东西。

主要的缺点是它没有像其他人那样广泛使用，所以你不会在网上找到太多帮助。那个，而且它的名字很尴尬（尝试搜索它！）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-10-17T23:37:38.693

xtensor 很好，但我最终自己用 c++20 编写了一个迷你库作为玩具项目，同时试图保持界面尽可能简单。这是：[https ://github.com/gbalduzz/NDArray](https://github.com/gbalduzz/NDArray)

示例代码：

```
using namespace nd;
NDArray<int, 2> m(3, 3); // 3x3 matrix
m = 2; // assign 2 to all
m(-1, all) = 1; // assign 1 to the last row.

auto tile = m(range{1, end}, range{1, end}); // 2x2 tile
std::sort(tile.begin(), tile.end());

std::cout << m; // prints [[2, 2, 2], [2, 1, 1], [1, 2, 2]] 
```

~~它还没有提供将多个操作折叠在一起的花哨的算术运算符，但是~~您可以将任意 lambda 广播到一组具有相同形状的张量，或者使用惰性求值的算术运算符。

让我知道你对接口的看法以及它与其他选项的比较，如果这有任何希望，你希望看到什么样的操作被实现。

免费许可，无依赖！

附录：我设法正确编译和运行 xtensor，结果是我的库在迭代视图时明显更快（2 到 3 倍）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-23T12:21:05.033

[Eigen](http://eigen.tuxfamily.org/)是一个线性代数（矩阵、向量……）的模板库。它只是标题并且可以免费使用（LGPL）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-06-23T12:25:09.253

[GSL](http://www.gnu.org/software/gsl/)很棒，它可以满足您的所有要求，甚至更多。虽然它是在 GPL 下获得许可的。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-09-18T19:01:59.113

虽然[GLM](http://glm.g-truc.net/0.9.7/index.html)旨在与 OpenGL 和 GLSL 轻松结合，但它是一个功能齐全的仅适用于 C++ 的头文件数学库，具有一组非常直观的接口。

它声明了向量和矩阵类型以及对它们的各种操作。

将两个矩阵相乘很简单，如 (M1 * M2)。减去两个向量 (V1- V2)。

访问向量或矩阵中包含的值同样简单。例如，在声明一个 vec3 向量之后，可以使用 vector.x 访问它的第一个元素。看看这个。

# javascript - JavaScript 中的第一个可选参数

> ID：11169420
> 
> 赞同：8
> 
> 时间：2012-06-23T12:15:53.237
> 
> 标签：javascript

为了用户的方便，我有一个函数，它首先接收可选参数，然后是必需的参数。例如：

```
ns.myFunction('optional arg', function(){
    //the required callback
}); 
```

我这样做而不是执行以下操作，因为回调正文可能很长，并且用户可能忘记覆盖可选参数的默认值：

```
ns.myFunction(function(){
    //the required callback
}, 'optional arg'); 
```

目前我这样做是为了检查：

```
function myFunction(first, second) {

    //if second is undefined and first is a function
    if (typeof second === 'undefined' && typeof first === 'function') { 
        second = first;
    }
} 
```

问题

*   这是正确的方法吗？
*   我将如何做到这一点以使其扩展，特别是如果在所需参数之前有 N 个可选参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T12:27:39.350

这不是*正确*的方法，因为按照惯例，可选参数总是放在最后。您会看到一个原因：处理它们要容易得多。如果您关心匿名函数的长度，API 的客户端应该使用函数引用或变量：

```
function callback1() { //...

var callback2 = function() {//...

myFunction(callbackX, optional); 
```

转义的问题`this`可以用`bind()`.

如果你真的想走多可选参数和最后回调的路径，我可以考虑两种方法：`arguments`对象或将所有可选参数包装在一个`options`对象中。

你`arguments`可以写：

```
var lastOptionalIndex = arguments.length - 2;
var callback = arguments[lastOptionalIndex + 1];  //required callback is always last
var optionalFirst = lastOptionalIndex >=0? arguments[0] : undefined;
var optionalSecond = lastOptionalIndex >=1? arguments[1] : undefined;
//... 
```

看看它与以下相比有多丑：

```
function myFunction(callback, firstOptional, secondOptional //... 
```

使用`options`包装器对象，您总是有两个参数：

```
function myFunction(options, callback); 
```

Where`options`只是一个对象：

```
{
  firstOptional: 1,
  secondOptional: 'foo'
  //...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:32:12.817

它可以通过 ArgueJS 轻松[完成](https://github.com/zvictor/ArgueJs)：

```
function myFunction (){
  arguments = __({first: [String], second: Function})

  // and now on, you can access your arguments by
  //   arguments.first and arguments.second
} 
```

* * *

[在ArgueJS 的第一个示例](https://github.com/zvictor/ArgueJs#example)中可以找到一个非常相似的示例。注意只需要中间的参数：

```
function range(){ 
  arguments = __({start: [Number, 0], stop: Number, step: [Number, 1]})

  for(var i = arguments.start; i < arguments.stop; i += arguments.step)
    console.log(i);
} 
```

回复：

```
>>> range(3)
 0
 1
 2
>>> range(3, 5)
 3
 4
>>> range(0, 5, 2)
 0
 2
 4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-25T08:23:36.717

您可以配置函数参数，具体取决于它们的数量：

```
myFunction() {
    let first, second;
    if (arguments.length === 2) {
        [first, second] = arguments;
    } else if (arguments.length === 1) {
        [second] = arguments;
    }
    if ( ! first) {
        // first is undefined, so only second argument was passed.
    }
} 
```

ES6 解构使代码干净并适合缩放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T12:25:59.287

没有必要命名任何参数。你可以简单地说：

```
if (arguments.length < 2)  // There are no optional parameters 
```

并通过 arguments[i] 检索每个参数。该函数位于 arguments[arguments.length - 1]。

需要注意的是，typeof 运算符总是返回一个字符串，所以 == 可以用来代替 ===

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-25T17:53:41.997

ArgueJS：

```
function range(){ 
  arguments = __({start: [Number, 0], stop: Number, step: [Number, 1]});
  for(var i = arguments.start; i < arguments.stop; i += arguments.step)
    console.log(i);
} 
```

使用 ES6 变得更漂亮：

```
function range(){ 
  {start, stop, step} = __({start: [Number, 0], stop: Number, step: [Number, 1]})
  for(var i = start; i < stop; i += step)
    console.log(i);
} 
```

或 CoffeeScript：

```
range = ->
  {start, stop, step} = __ {start: [Number, 0], stop: Number, step: [Number, 1]}
  console.log i for i in [start...stop] by step 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T12:28:00.153

如果你真的想先传递多个可选参数，你可以这样做：

```
function myFunction() {
    alert("optional:");
    for(var i=0; i<arguments.length-1) alert(arguments[i]);
    alert("function: "+ arguments[arguments.length-1]);
} 
```

但是比较丑。我认为你应该把可选的东西放在最后。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-11T06:24:03.993

```
function test(num = 1) {
  console.log(typeof num)
}

test()           // 'number' (num is set to 1)
test(undefined)  // 'number' (num is set to 1 too)

// test with other falsy values:
test('')         // 'string' (num is set to '')
test(null)       // 'object' (num is set to null)
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-10-10T23:14:50.650

一个简单的函数式方法：

主意：

1.  编写一个函数 myFunction(required, optional)，其中可选参数位于最后，因此很容易处理。
2.  使用函数 appendFirstArgumentIf() 从 myFunction 创建一个新函数 myNewFunction(optional, required)。
3.  函数 appendFirstArgumentIf 调用 myFunction，如果它通过了 testfunction，则第一个参数移动到最后一个位置，否则它不会更改参数。

_

```
 /**
 * @param {function} fn(a,...b)
 * @param {function} argumentTest - a function to test the first parameter
 * @return {function} returns a function that passes its first argument into 
  argumentTest. If argumentTest returns true, fn is called with the first 
  argument shifted to the last position else fn is called with the arguments 
   order unchanged
 */
function appendFirstArgumentIf (fn,argumentTest){
   return function(a,...b){
       return argumentTest(a) ? fn(...b,a) : fn(a,...b) 
   }
} 
```

用法：

```
function myFunction(callback, string){
    string = string ? string : 'Default Message'
    callback(string)
}

var myNewFunction = appendFirstArgumentIf(myFunction,
                                          firstArgument=> typeof firstArgument !== 'function')

myNewFunction('New Message', console.log)  // using console.log as callback function
//>>>New Message
myNewFunction(console.log)
//>>>Default Message 
```

也可以这样：

```
function mySecondFunction(callback, name, string){
string = string ? string : 'Welcome'
callback(string, name)
}

var myLatestFunction = appendFirstArgumentIf(mySecondFunction,
                                      firstArgument=> typeof firstArgument !== 'function')

myLatestFunction('Hello', console.log, 'John')
//>>>Hello John
myLatestFunction(console.log, 'John')
//>>>Welcome John 
```

# android - 为什么从帧缓冲区截屏在android上非常慢？

> ID：11169422
> 
> 赞同：0
> 
> 时间：2012-06-23T12:16:21.833
> 
> 标签：android, screenshot, framebuffer, frame-rate

使用 /dev/graphics/fb0 从帧缓冲区截取屏幕截图非常慢（200~300 毫秒）。我怎样才能让它更快？

byte[] request = formAdbRequest("framebuffer:");

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T13:24:18.093

> byte[] request = formAdbRequest("framebuffer:");

如果那是您正在使用的代码，那么您并不是严格地“使用 /dev/graphics/fb0 从帧缓冲区截取屏幕截图”。

相反，您正在开发机器上运行代码，该代码通过 USB 连接发送消息，该消息由 Android 设备上的守护进程获取，该进程截取屏幕截图并将其通过 USB 连接发送回开发机器。

> 非常慢（200~300ms）。我怎样才能让它更快？

一般来说，如果不修改 Android 操作系统的各个方面，或者在有根设备上滚动您自己的屏幕截图逻辑，您就无法做到这一点。

# asp.net - App Harbor 上的“网络工作者”和“后台工作者”有什么区别

> ID：11169427
> 
> 赞同：7
> 
> 时间：2012-06-23T12:17:02.003
> 
> 标签：asp.net, appharbor

我正在使用 App Harbor 为回合制游戏开发后端服务器，到目前为止它似乎非常适合我的需求。我真的很想运行一个后台进程来处理轮流数据等，我想知道是否有人可以澄清“网络工作者”和“后台工作者”之间的区别是什么？我在 Web 开发方面的经验相当有限，但据我所知，“Web 工作者”用于与 AJAX 页面（我不需要）交互，“后台工作者”允许您在后台运行控制台应用程序（我确实需要！）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T13:35:16.340

**Web Worker**与来自浏览器的请求连接，可以获取和发送数据到浏览器上的请求。

**Background Workers**是独立的线程，不连接任何请求，不能单独向浏览器发送数据*。

[*] 仅通过网络工作者。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T13:02:38.130

通常，“Web 工作者”是 Web 应用程序，或处理来自用户的请求的 ASP.NET 站点/服务。“后台工作人员”只是一个计划任务。它在后台以指定的时间间隔运行，并执行一些代码。

不同之处在于，当应用程序收到新请求时，Web 工作者会做一些工作。请求意味着有人在 ASP.NET 上加载页面/调用 Web 服务。当后台工作人员在某个时间间隔启动时，不需要用户加载要执行的页面。它主要用于处理长时间运行的任务。通常的工作流程是 - Web Worker 接收来自用户的请求，并将一些要处理的数据排队。在下一次运行时，后台工作人员获取数据并对其进行处理，并将数据存储在某处（通常在数据库中）。然后网络工作者在用户的下一个请求中检查数据库，如果结果在那里 - 将其显示给用户。

这样用户就不需要等待asp.net页面处理数据并立即返回结果。

# php - PHP 和 Node.js 还是只有 Node.js？

> ID：11169428
> 
> 赞同：3
> 
> 时间：2012-06-23T12:17:08.457
> 
> 标签：php, http, node.js, symfony, backbone.js

我想写一个简单的聊天应用程序（供测试使用）。

用户和消息被持久化在 MongoDB 中，会话被 Redis 存储。

PHP (Symfony2) 提供身份验证、注册、密码重置等，并服务于公共站点（如 /、/contact 等）。

当用户登录后，它就可以控制聊天应用程序。Backbone.js 处理应用程序，node.js 通过 rest（或 socket.io）提供数据。

**我应该同时使用 PHP 和 Node 还是应该只使用 node？**

仅使用节点的优点是没有端口冲突，相反的是节点应用程序变得非常大并且不那么可读（恕我直言：cmf，注册，授权，电子邮件处理比节点更容易使用 symfony）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:24:21.680

将 Web 应用程序逻辑保留在 PHP 中是完全有意义的。这就是 PHP 所擅长的，将其移植到 node.js 代码可能会是一种浪费和痛苦的体验。

另一方面，Node 擅长联网和服务长时间运行的连接，例如 WebSockets（socket.io、SockJS 等）。因此，使用它的聊天服务器也很有意义。

我建议您同时使用这两种方法，因为它们中的每一种都解决了它擅长的特定问题。您可以使用某种消息队列轻松连接它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:51:32.297

您可以尝试使用 JooDee，这是一个节点网络服务器，它允许您在网页中嵌入服务器端 javascript。如果您熟悉 Node 和 PHP/ASP，那么创建页面是轻而易举的事。下面是一个页面的样例，如下所示：

```
<!DOCTYPE html>
<html>
<:  //server side code in here
    var os = require('os');
    var hostname = os.hostname();
:>
<body>
    <div>Your hostname is <::hostname:></div>
</body>
</html> 
```

使用 JooDee 还允许您通过将属性附加到“客户端”对象服务器端并访问客户端 JavaScript 中生成的“客户端”对象，毫不费力地向客户端公开服务器 JavaScript 变量。

[https://github.com/BigIroh/JooDee](https://github.com/BigIroh/JooDee)

# c# - 如何从具有管理员权限的进程中启动没有管理员权限的新进程？

> ID：11169431
> 
> 赞同：42
> 
> 时间：2012-06-23T12:17:57.120
> 
> 标签：c#, windows, administrator

我正在为应用程序创建自动更新程序。该应用程序由用户启动，无需管理员权限即可运行。自动更新程序以管理员权限启动，并在下载新文件之前终止应用程序。

当我想在自动更新程序完成后启动更新的应用程序时，问题就来了。如果我使用常规 System.Diagnostics.Process.Start(file)，应用程序也以管理员权限启动，并且它*必须*在当前用户上运行才能按预期工作。

那么，如何让自动更新程序以当前用户而不是管理员身份启动应用程序？

我尝试过使用以下内容：

```
var pSI = new ProcessStartInfo() { 
    UseShellExecute = false, 
    UserName = Environment.UserName, 
    FileName = file 
};
System.Diagnostics.Process.Start(pSI); 
```

但这会引发错误“无效的用户名或密码”。我检查了用户名是否正确，并且我知道密码可能无效，因为我没有包含它。但是要求用户输入他/她的密码不是一个选项，因为自动启动应用程序的全部原因是为了让用户更容易。

有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-27T19:37:29.263

您想要实现的目标不能很容易地完成，并且不受支持。但是，可以使用少量的黑客攻击。Aaron Margosis 写了[一篇](http://blogs.msdn.com/b/aaron_margosis/archive/2009/06/06/faq-how-do-i-start-a-program-as-the-desktop-user-from-an-elevated-app.aspx)描述一种技术的文章。

要引用相关部分，您需要执行以下步骤：

> 1.  在您当前的令牌中启用 SeIncreaseQuotaPrivilege
> 2.  获取代表桌面外壳的 HWND (GetShellWindow)
> 3.  获取与该窗口关联的进程的进程 ID (PID) (GetWindowThreadProcessId)
> 4.  打开那个进程（OpenProcess）
> 5.  从该进程获取访问令牌 (OpenProcessToken)
> 6.  使用该令牌制作主令牌（DuplicateTokenEx）
> 7.  使用该主令牌启动新进程 (CreateProcessWithTokenW)

这篇文章包含一些演示 C++ 源的下载链接，从中它应该足够简单，可以转换为 C#。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-11-09T07:05:55.493

[Aaron Margosis文章](http://blogs.msdn.com/b/aaron_margosis/archive/2009/06/06/faq-how-do-i-start-a-program-as-the-desktop-user-from-an-elevated-app.aspx)的 C# 代码：

```
 private static void RunAsDesktopUser(string fileName)
    {
        if (string.IsNullOrWhiteSpace(fileName))
            throw new ArgumentException("Value cannot be null or whitespace.", nameof(fileName));

        // To start process as shell user you will need to carry out these steps:
        // 1\. Enable the SeIncreaseQuotaPrivilege in your current token
        // 2\. Get an HWND representing the desktop shell (GetShellWindow)
        // 3\. Get the Process ID(PID) of the process associated with that window(GetWindowThreadProcessId)
        // 4\. Open that process(OpenProcess)
        // 5\. Get the access token from that process (OpenProcessToken)
        // 6\. Make a primary token with that token(DuplicateTokenEx)
        // 7\. Start the new process with that primary token(CreateProcessWithTokenW)

        var hProcessToken = IntPtr.Zero;
        // Enable SeIncreaseQuotaPrivilege in this process.  (This won't work if current process is not elevated.)
        try
        {
            var process = GetCurrentProcess();
            if (!OpenProcessToken(process, 0x0020, ref hProcessToken))
                return;

            var tkp = new TOKEN_PRIVILEGES
            {
                PrivilegeCount = 1,
                Privileges = new LUID_AND_ATTRIBUTES[1]
            };

            if (!LookupPrivilegeValue(null, "SeIncreaseQuotaPrivilege", ref tkp.Privileges[0].Luid))
                return;

            tkp.Privileges[0].Attributes = 0x00000002;

            if (!AdjustTokenPrivileges(hProcessToken, false, ref tkp, 0, IntPtr.Zero, IntPtr.Zero))
                return;
        }
        finally
        {
            CloseHandle(hProcessToken);
        }

        // Get an HWND representing the desktop shell.
        // CAVEATS:  This will fail if the shell is not running (crashed or terminated), or the default shell has been
        // replaced with a custom shell.  This also won't return what you probably want if Explorer has been terminated and
        // restarted elevated.
        var hwnd = GetShellWindow();
        if (hwnd == IntPtr.Zero)
            return;

        var hShellProcess = IntPtr.Zero;
        var hShellProcessToken = IntPtr.Zero;
        var hPrimaryToken = IntPtr.Zero;
        try
        {
            // Get the PID of the desktop shell process.
            uint dwPID;
            if (GetWindowThreadProcessId(hwnd, out dwPID) == 0)
                return;

            // Open the desktop shell process in order to query it (get the token)
            hShellProcess = OpenProcess(ProcessAccessFlags.QueryInformation, false, dwPID);
            if (hShellProcess == IntPtr.Zero)
                return;

            // Get the process token of the desktop shell.
            if (!OpenProcessToken(hShellProcess, 0x0002, ref hShellProcessToken))
                return;

            var dwTokenRights = 395U;

            // Duplicate the shell's process token to get a primary token.
            // Based on experimentation, this is the minimal set of rights required for CreateProcessWithTokenW (contrary to current documentation).
            if (!DuplicateTokenEx(hShellProcessToken, dwTokenRights, IntPtr.Zero, SECURITY_IMPERSONATION_LEVEL.SecurityImpersonation, TOKEN_TYPE.TokenPrimary, out hPrimaryToken))
                return;

            // Start the target process with the new token.
            var si = new STARTUPINFO();
            var pi = new PROCESS_INFORMATION();
            if (!CreateProcessWithTokenW(hPrimaryToken, 0, fileName, "", 0, IntPtr.Zero, Path.GetDirectoryName(fileName), ref si, out pi))
                return;
        }
        finally
        {
            CloseHandle(hShellProcessToken);
            CloseHandle(hPrimaryToken);
            CloseHandle(hShellProcess);
        }

    }

    #region Interop

    private struct TOKEN_PRIVILEGES
    {
        public UInt32 PrivilegeCount;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 1)]
        public LUID_AND_ATTRIBUTES[] Privileges;
    }

    [StructLayout(LayoutKind.Sequential, Pack = 4)]
    private struct LUID_AND_ATTRIBUTES
    {
        public LUID Luid;
        public UInt32 Attributes;
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct LUID
    {
        public uint LowPart;
        public int HighPart;
    }

    [Flags]
    private enum ProcessAccessFlags : uint
    {
        All = 0x001F0FFF,
        Terminate = 0x00000001,
        CreateThread = 0x00000002,
        VirtualMemoryOperation = 0x00000008,
        VirtualMemoryRead = 0x00000010,
        VirtualMemoryWrite = 0x00000020,
        DuplicateHandle = 0x00000040,
        CreateProcess = 0x000000080,
        SetQuota = 0x00000100,
        SetInformation = 0x00000200,
        QueryInformation = 0x00000400,
        QueryLimitedInformation = 0x00001000,
        Synchronize = 0x00100000
    }

    private enum SECURITY_IMPERSONATION_LEVEL
    {
        SecurityAnonymous,
        SecurityIdentification,
        SecurityImpersonation,
        SecurityDelegation
    }

    private enum TOKEN_TYPE
    {
        TokenPrimary = 1,
        TokenImpersonation
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct PROCESS_INFORMATION
    {
        public IntPtr hProcess;
        public IntPtr hThread;
        public int dwProcessId;
        public int dwThreadId;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    private struct STARTUPINFO
    {
        public Int32 cb;
        public string lpReserved;
        public string lpDesktop;
        public string lpTitle;
        public Int32 dwX;
        public Int32 dwY;
        public Int32 dwXSize;
        public Int32 dwYSize;
        public Int32 dwXCountChars;
        public Int32 dwYCountChars;
        public Int32 dwFillAttribute;
        public Int32 dwFlags;
        public Int16 wShowWindow;
        public Int16 cbReserved2;
        public IntPtr lpReserved2;
        public IntPtr hStdInput;
        public IntPtr hStdOutput;
        public IntPtr hStdError;
    }

    [DllImport("kernel32.dll", ExactSpelling = true)]
    private static extern IntPtr GetCurrentProcess();

    [DllImport("advapi32.dll", ExactSpelling = true, SetLastError = true)]
    private static extern bool OpenProcessToken(IntPtr h, int acc, ref IntPtr phtok);

    [DllImport("advapi32.dll", SetLastError = true)]
    private static extern bool LookupPrivilegeValue(string host, string name, ref LUID pluid);

    [DllImport("advapi32.dll", ExactSpelling = true, SetLastError = true)]
    private static extern bool AdjustTokenPrivileges(IntPtr htok, bool disall, ref TOKEN_PRIVILEGES newst, int len, IntPtr prev, IntPtr relen);

    [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool CloseHandle(IntPtr hObject);

    [DllImport("user32.dll")]
    private static extern IntPtr GetShellWindow();

    [DllImport("user32.dll", SetLastError = true)]
    private static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern IntPtr OpenProcess(ProcessAccessFlags processAccess, bool bInheritHandle, uint processId);

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern bool DuplicateTokenEx(IntPtr hExistingToken, uint dwDesiredAccess, IntPtr lpTokenAttributes, SECURITY_IMPERSONATION_LEVEL impersonationLevel, TOKEN_TYPE tokenType, out IntPtr phNewToken);

    [DllImport("advapi32", SetLastError = true, CharSet = CharSet.Unicode)]
    private static extern bool CreateProcessWithTokenW(IntPtr hToken, int dwLogonFlags, string lpApplicationName, string lpCommandLine, int dwCreationFlags, IntPtr lpEnvironment, string lpCurrentDirectory, [In] ref STARTUPINFO lpStartupInfo, out PROCESS_INFORMATION lpProcessInformation);

    #endregion 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-12-07T22:47:46.470

这是我多年前看到的一个非常古老的问题，现在又重新审视了。由于它是第一个谷歌搜索结果......我会在这里发布我的答案。

我发现的所有解决方案都极其复杂和荒谬。多年来，我偶然发现了一个我在任何地方都没有看到文档的解决方案，直到现在才真正分享。

代码非常简单......基本上我们正在编写一个批处理文件，其中包含您要运行的进程的可执行文件的名称/路径，以及您想要的任何参数。然后我们用批处理文件的路径生成一个 explorer.exe 进程......

```
File.WriteAllText(@"C:\test.bat", @"C:\test.exe -randomArgs");

var proc = new Process
{
    StartInfo = new ProcessStartInfo
    {
        FileName = "explorer.exe",
        Arguments = @"C:\test.bat",
        UseShellExecute = true,
        Verb = "runas",
        WindowStyle = ProcessWindowStyle.Hidden
    }
};
proc.Start(); 
```

我们生成的资源管理器进程立即被操作系统杀死，但是！根 explorer.exe 进程运行运行批处理文件！您可以为 explorer.exe 提供可执行文件的名称，它会做同样的事情，但是该方法不支持参数。

据我所知，这是一个错误或未记录的功能。但是我无法想象它是如何被恶意使用的，因为它允许降低权限......这适用于 Windows 7/8/8.1/10。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-24T21:02:27.393

假设您正在向应用程序发出信号以干净地关闭而不是终止它，并且如果您仍然能够在发布更新程序之前对应用程序进行更改，那么一个简单的解决方案是让应用程序在退出之前启动一个临时进程。您可以在临时位置为临时进程创建可执行文件。更新完成后，向中间进程发出信号以重新启动应用程序并退出。这样，一切都会自然而然地发生，您不必乱来。

另一种选择是使用[`OpenProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%28v=vs.85%29.aspx), [`OpenProcessToken`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379295%28v=vs.85%29.aspx), 并[`DuplicateToken`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446616%28v=vs.85%29.aspx)在终止应用程序之前获取应用程序安全令牌的副本。然后，您可以使用[`CreateProcessAsUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)在原始上下文中重新启动应用程序。

即使更新程序在不同的帐户下和/或在与应用程序的不同会话中运行，这两种方法也应该有效。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-23T13:52:19.333

codeplex 上有一个名为[User Account Control Helpers](http://uachelpers.codeplex.com/)的项目。

该项目提供了一个与 UAC 机制交互的库。

在库中，您将找到一个名为`UserAccountControl`. 该类有一个静态方法`CreateProcessAsStandardUser`，用于从具有标准用户权限的提升进程启动进程。

简而言之，这些函数打开桌面外壳进程的进程令牌。然后，它复制该令牌以获得主令牌。然后使用此令牌在已登录用户下启动新进程。

[有关更多信息，请阅读Aaron Margosis](http://blogs.msdn.com/b/aaron_margosis/archive/2009/06/06/faq-how-do-i-start-a-program-as-the-desktop-user-from-an-elevated-app.aspx)的以下博客文章。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-11T11:12:07.117

我遇到了类似的问题。在 processstartinfo 中有一个密码字段，问题是您必须将密码作为安全字符串提供。所以代码如下：

```
System.Security.SecureString password = new System.Security.SecureString();
password.AppendChar('c1');
//append the all characters of your password, you could probably use a loop and then,
Process p =new Process();
p.UseShellExecute = false;
p.UserName = Environment.UserName;
p.FileName = file ;
p.Sassword=password;
p.Start(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-05T23:07:41.880

实用的 VB.NET 代码，用于从提升的父进程使用默认 shell 权限启动进程

```
#Region "References"

Imports System.Runtime.InteropServices

#End Region

Public Class LaunchProcess

#Region "Native Methods"

    <DllImport("User32.dll", SetLastError:=True)> Private Shared Function GetShellWindow() As IntPtr
    End Function

    <DllImport("advapi32.dll", SetLastError:=True)> Private Shared Function OpenProcessToken(ByVal ProcessHandle As IntPtr, ByVal DesiredAccess As Integer, ByRef TokenHandle As IntPtr) As Boolean
    End Function

    <DllImport("user32.dll", SetLastError:=True)> Private Shared Function GetWindowThreadProcessId(ByVal hwnd As IntPtr, ByRef lpdwProcessId As IntPtr) As Integer
    End Function

    <DllImport("kernel32.dll")> Private Shared Function OpenProcess(ByVal dwDesiredAccess As UInteger, <MarshalAs(UnmanagedType.Bool)> ByVal bInheritHandle As Boolean, ByVal dwProcessId As IntPtr) As IntPtr
    End Function

    <DllImport("advapi32.dll", SetLastError:=True)> _
    Private Shared Function DuplicateTokenEx( _
    ByVal ExistingTokenHandle As IntPtr, _
    ByVal dwDesiredAccess As UInt32, _
    ByRef lpThreadAttributes As SECURITY_ATTRIBUTES, _
    ByVal ImpersonationLevel As Integer, _
    ByVal TokenType As Integer, _
    ByRef DuplicateTokenHandle As System.IntPtr) As Boolean
    End Function

    <DllImport("advapi32.dll", SetLastError:=True)> Private Shared Function LookupPrivilegeValue(lpSystemName As String, lpName As String, ByRef lpLuid As LUID) As Boolean
    End Function

    <DllImport("advapi32.dll", SetLastError:=True)> _
    Private Shared Function AdjustTokenPrivileges( _
    ByVal TokenHandle As IntPtr, _
    ByVal DisableAllPrivileges As Boolean, _
    ByRef NewState As TOKEN_PRIVILEGES, _
    ByVal BufferLengthInBytes As Integer, _
    ByRef PreviousState As TOKEN_PRIVILEGES, _
    ByRef ReturnLengthInBytes As Integer _
  ) As Boolean
    End Function

    <DllImport("advapi32", SetLastError:=True, CharSet:=CharSet.Unicode)> Private Shared Function CreateProcessWithTokenW(hToken As IntPtr, dwLogonFlags As Integer, lpApplicationName As String, lpCommandLine As String, dwCreationFlags As Integer, lpEnvironment As IntPtr, lpCurrentDirectory As IntPtr, ByRef lpStartupInfo As STARTUPINFO, ByRef lpProcessInformation As PROCESS_INFORMATION) As Boolean
    End Function

#End Region

#Region "Structures"

    <StructLayout(LayoutKind.Sequential)> Private Structure SECURITY_ATTRIBUTES

        Friend nLength As Integer
        Friend lpSecurityDescriptor As IntPtr
        Friend bInheritHandle As Integer

    End Structure

    Private Structure TOKEN_PRIVILEGES

        Friend PrivilegeCount As Integer
        Friend TheLuid As LUID
        Friend Attributes As Integer

    End Structure

    Private Structure LUID

        Friend LowPart As UInt32
        Friend HighPart As UInt32

    End Structure

    <StructLayout(LayoutKind.Sequential, CharSet:=CharSet.Unicode)> Private Structure STARTUPINFO

        Friend cb As Integer
        Friend lpReserved As String
        Friend lpDesktop As String
        Friend lpTitle As String
        Friend dwX As Integer
        Friend dwY As Integer
        Friend dwXSize As Integer
        Friend dwYSize As Integer
        Friend dwXCountChars As Integer
        Friend dwYCountChars As Integer
        Friend dwFillAttribute As Integer
        Friend dwFlags As Integer
        Friend wShowWindow As Short
        Friend cbReserved2 As Short
        Friend lpReserved2 As Integer
        Friend hStdInput As Integer
        Friend hStdOutput As Integer
        Friend hStdError As Integer

    End Structure

    Private Structure PROCESS_INFORMATION

        Friend hProcess As IntPtr
        Friend hThread As IntPtr
        Friend dwProcessId As Integer
        Friend dwThreadId As Integer

    End Structure

#End Region

#Region "Enumerations"

    Private Enum TOKEN_INFORMATION_CLASS

        TokenUser = 1
        TokenGroups
        TokenPrivileges
        TokenOwner
        TokenPrimaryGroup
        TokenDefaultDacl
        TokenSource
        TokenType
        TokenImpersonationLevel
        TokenStatistics
        TokenRestrictedSids
        TokenSessionId
        TokenGroupsAndPrivileges
        TokenSessionReference
        TokenSandBoxInert
        TokenAuditPolicy
        TokenOrigin
        TokenElevationType
        TokenLinkedToken
        TokenElevation
        TokenHasRestrictions
        TokenAccessInformation
        TokenVirtualizationAllowed
        TokenVirtualizationEnabled
        TokenIntegrityLevel
        TokenUIAccess
        TokenMandatoryPolicy
        TokenLogonSid
        MaxTokenInfoClass

    End Enum

#End Region

#Region "Constants"

    Private Const SE_PRIVILEGE_ENABLED = &H2L
    Private Const PROCESS_QUERY_INFORMATION = &H400
    Private Const TOKEN_ASSIGN_PRIMARY = &H1
    Private Const TOKEN_DUPLICATE = &H2
    Private Const TOKEN_IMPERSONATE = &H4
    Private Const TOKEN_QUERY = &H8
    Private Const TOKEN_QUERY_SOURCE = &H10
    Private Const TOKEN_ADJUST_PRIVILEGES = &H20
    Private Const TOKEN_ADJUST_GROUPS = &H40
    Private Const TOKEN_ADJUST_DEFAULT = &H80
    Private Const TOKEN_ADJUST_SESSIONID = &H100
    Private Const SecurityImpersonation = 2
    Private Const TokenPrimary = 1
    Private Const SE_INCREASE_QUOTA_NAME = "SeIncreaseQuotaPrivilege"

#End Region

#Region "Methods"

    Friend Shared Sub LaunchFile(ByVal FilePath As String, ByVal IsWaitToFinish As Boolean)

        Try

            'Enable the SeIncreaseQuotaPrivilege in current token
            Dim HPrcsToken As IntPtr = Nothing
            OpenProcessToken(Process.GetCurrentProcess.Handle, TOKEN_ADJUST_PRIVILEGES, HPrcsToken)

            Dim TokenPrvlgs As TOKEN_PRIVILEGES
            TokenPrvlgs.PrivilegeCount = 1
            LookupPrivilegeValue(Nothing, SE_INCREASE_QUOTA_NAME, TokenPrvlgs.TheLuid)
            TokenPrvlgs.Attributes = SE_PRIVILEGE_ENABLED

            AdjustTokenPrivileges(HPrcsToken, False, TokenPrvlgs, 0, Nothing, Nothing)

            'Get window handle representing the desktop shell
            Dim HShellWnd As IntPtr = GetShellWindow()

            'Get the ID of the desktop shell process
            Dim ShellPID As IntPtr
            GetWindowThreadProcessId(HShellWnd, ShellPID)

            'Open the desktop shell process in order to get the process token
            Dim HShellPrcs As IntPtr = OpenProcess(PROCESS_QUERY_INFORMATION, False, ShellPID)
            Dim HShellPrcSToken As IntPtr = Nothing
            Dim HPrimaryToken As IntPtr = Nothing

            'Get the process token of the desktop shell
            OpenProcessToken(HShellPrcs, TOKEN_DUPLICATE, HShellPrcSToken)

            'Duplicate the shell's process token to get a primary token
            Dim TokenRights As UInteger = TOKEN_QUERY Or TOKEN_ASSIGN_PRIMARY Or TOKEN_DUPLICATE Or TOKEN_ADJUST_DEFAULT Or TOKEN_ADJUST_SESSIONID
            DuplicateTokenEx(HShellPrcSToken, TokenRights, Nothing, SecurityImpersonation, TokenPrimary, HPrimaryToken)

            Dim StartInfo As STARTUPINFO = Nothing
            Dim PrcsInfo As PROCESS_INFORMATION = Nothing

            StartInfo.cb = Marshal.SizeOf(StartInfo)
            Dim IsSuccessed As Boolean = CreateProcessWithTokenW(HPrimaryToken, 1, FilePath, "", 0, Nothing, Nothing, StartInfo, PrcsInfo)

            If IsSuccessed = True Then

                If IsWaitToFinish = True Then

                    Try

                        Dim Prcs As Process = Process.GetProcessById(PrcsInfo.dwProcessId)
                        Prcs.WaitForExit()

                    Catch ex As Exception
                    End Try

                End If

            Else

                'Could not launch process with shell token may be the process needs admin rights to launch, we will try to launch it with default parent process permissions.

                Dim Prcs As New Process
                Prcs.StartInfo.FileName = FilePath
                Prcs.Start()

                If IsWaitToFinish = True Then Prcs.WaitForExit()

            End If

        Catch ex As Exception
        End Try

    End Sub

#End Region

End Class 
```

LaunchProcess 类用法

```
LaunchProcess.LaunchFile("C:\Program Files\Test\text.exe", False) 
```

您可以使用 Telerik 代码转换器将代码转换为 C# [http://converter.telerik.com/](http://converter.telerik.com/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-08-27T21:04:11.697

在我的应用程序中，我最初使用[了 user3122201](https://stackoverflow.com/a/40501607/862099)的解决方案，效果很好。但是，我希望提升的应用程序使用匿名管道与低权限应用程序进行通信。为此，我需要一个允许继承管道句柄的解决方案。

我想出了下面允许处理继承的解决方案。

请注意此解决方案与 user3122201 的另一个小区别：以下方法作为同一用户的进程运行，但访问受限，而 user3122201 的方法作为桌面用户的进程运行。

```
 public static class ProcessHelper
    {
        /// Runs a process as a non-elevated version of the current user.
        public static Process? RunAsRestrictedUser(string fileName, string? args = null)
        {
            if (string.IsNullOrWhiteSpace(fileName))
                throw new ArgumentException("Value cannot be null or whitespace.", nameof(fileName));

            if (!GetRestrictedSessionUserToken(out var hRestrictedToken))
            {
                return null;
            }

            try
            {
                var si = new STARTUPINFO();
                var pi = new PROCESS_INFORMATION();
                var cmd = new StringBuilder();
                cmd.Append('"').Append(fileName).Append('"');
                if (!string.IsNullOrWhiteSpace(args))
                {
                    cmd.Append(' ').Append(args);
                }

                if (!CreateProcessAsUser(
                    hRestrictedToken,
                    null,
                    cmd,
                    IntPtr.Zero,
                    IntPtr.Zero,
                    true, // inherit handle
                    0,
                    IntPtr.Zero,
                    Path.GetDirectoryName(fileName),
                    ref si,
                    out pi))
                {
                    return null;
                }

                return Process.GetProcessById(pi.dwProcessId);
            }
            finally
            {
                CloseHandle(hRestrictedToken);
            }
        }

        // based on https://stackoverflow.com/a/16110126/862099
        private static bool GetRestrictedSessionUserToken(out IntPtr token)
        {
            token = IntPtr.Zero;
            if (!SaferCreateLevel(SaferScope.User, SaferLevel.NormalUser, SaferOpenFlags.Open, out var hLevel, IntPtr.Zero))
            {
                return false;
            }

            IntPtr hRestrictedToken = IntPtr.Zero;
            TOKEN_MANDATORY_LABEL tml = default;
            tml.Label.Sid = IntPtr.Zero;
            IntPtr tmlPtr = IntPtr.Zero;

            try
            {
                if (!SaferComputeTokenFromLevel(hLevel, IntPtr.Zero, out hRestrictedToken, 0, IntPtr.Zero))
                {
                    return false;
                }

                // Set the token to medium integrity.
                tml.Label.Attributes = SE_GROUP_INTEGRITY;
                tml.Label.Sid = IntPtr.Zero;
                if (!ConvertStringSidToSid("S-1-16-8192", out tml.Label.Sid))
                {
                    return false;
                }

                tmlPtr = Marshal.AllocHGlobal(Marshal.SizeOf(tml));
                Marshal.StructureToPtr(tml, tmlPtr, false);
                if (!SetTokenInformation(hRestrictedToken,
                    TOKEN_INFORMATION_CLASS.TokenIntegrityLevel,
                    tmlPtr, (uint)Marshal.SizeOf(tml)))
                {
                    return false;
                }

                token = hRestrictedToken;
                hRestrictedToken = IntPtr.Zero; // make sure finally() doesn't close the handle
            }
            finally
            {
                SaferCloseLevel(hLevel);
                SafeCloseHandle(hRestrictedToken);
                if (tml.Label.Sid != IntPtr.Zero)
                {
                    LocalFree(tml.Label.Sid);
                }
                if (tmlPtr != IntPtr.Zero)
                {
                    Marshal.FreeHGlobal(tmlPtr);
                }
            }

            return true;
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct PROCESS_INFORMATION
        {
            public IntPtr hProcess;
            public IntPtr hThread;
            public int dwProcessId;
            public int dwThreadId;
        }

        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
        private struct STARTUPINFO
        {
            public Int32 cb;
            public string lpReserved;
            public string lpDesktop;
            public string lpTitle;
            public Int32 dwX;
            public Int32 dwY;
            public Int32 dwXSize;
            public Int32 dwYSize;
            public Int32 dwXCountChars;
            public Int32 dwYCountChars;
            public Int32 dwFillAttribute;
            public Int32 dwFlags;
            public Int16 wShowWindow;
            public Int16 cbReserved2;
            public IntPtr lpReserved2;
            public IntPtr hStdInput;
            public IntPtr hStdOutput;
            public IntPtr hStdError;
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct SID_AND_ATTRIBUTES
        {
            public IntPtr Sid;
            public uint Attributes;
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct TOKEN_MANDATORY_LABEL
        {
            public SID_AND_ATTRIBUTES Label;
        }

        public enum SaferLevel : uint
        {
            Disallowed = 0,
            Untrusted = 0x1000,
            Constrained = 0x10000,
            NormalUser = 0x20000,
            FullyTrusted = 0x40000
        }

        public enum SaferScope : uint
        {
            Machine = 1,
            User = 2
        }

        [Flags]
        public enum SaferOpenFlags : uint
        {
            Open = 1
        }

        [DllImport("advapi32", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
        private static extern bool SaferCreateLevel(SaferScope scope, SaferLevel level, SaferOpenFlags openFlags, out IntPtr pLevelHandle, IntPtr lpReserved);

        [DllImport("advapi32", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
        private static extern bool SaferComputeTokenFromLevel(IntPtr LevelHandle, IntPtr InAccessToken, out IntPtr OutAccessToken, int dwFlags, IntPtr lpReserved);

        [DllImport("advapi32", SetLastError = true)]
        private static extern bool SaferCloseLevel(IntPtr hLevelHandle);

        [DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
        private static extern bool ConvertStringSidToSid(string StringSid, out IntPtr ptrSid);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool CloseHandle(IntPtr hObject);

        private static bool SafeCloseHandle(IntPtr hObject)
        {
            return (hObject == IntPtr.Zero) ? true : CloseHandle(hObject);
        }

        [DllImport("kernel32.dll", SetLastError = true)]
        static extern IntPtr LocalFree(IntPtr hMem);

        enum TOKEN_INFORMATION_CLASS
        {
            /// <summary>
            /// The buffer receives a TOKEN_USER structure that contains the user account of the token.
            /// </summary>
            TokenUser = 1,

            /// <summary>
            /// The buffer receives a TOKEN_GROUPS structure that contains the group accounts associated with the token.
            /// </summary>
            TokenGroups,

            /// <summary>
            /// The buffer receives a TOKEN_PRIVILEGES structure that contains the privileges of the token.
            /// </summary>
            TokenPrivileges,

            /// <summary>
            /// The buffer receives a TOKEN_OWNER structure that contains the default owner security identifier (SID) for newly created objects.
            /// </summary>
            TokenOwner,

            /// <summary>
            /// The buffer receives a TOKEN_PRIMARY_GROUP structure that contains the default primary group SID for newly created objects.
            /// </summary>
            TokenPrimaryGroup,

            /// <summary>
            /// The buffer receives a TOKEN_DEFAULT_DACL structure that contains the default DACL for newly created objects.
            /// </summary>
            TokenDefaultDacl,

            /// <summary>
            /// The buffer receives a TOKEN_SOURCE structure that contains the source of the token. TOKEN_QUERY_SOURCE access is needed to retrieve this information.
            /// </summary>
            TokenSource,

            /// <summary>
            /// The buffer receives a TOKEN_TYPE value that indicates whether the token is a primary or impersonation token.
            /// </summary>
            TokenType,

            /// <summary>
            /// The buffer receives a SECURITY_IMPERSONATION_LEVEL value that indicates the impersonation level of the token. If the access token is not an impersonation token, the function fails.
            /// </summary>
            TokenImpersonationLevel,

            /// <summary>
            /// The buffer receives a TOKEN_STATISTICS structure that contains various token statistics.
            /// </summary>
            TokenStatistics,

            /// <summary>
            /// The buffer receives a TOKEN_GROUPS structure that contains the list of restricting SIDs in a restricted token.
            /// </summary>
            TokenRestrictedSids,

            /// <summary>
            /// The buffer receives a DWORD value that indicates the Terminal Services session identifier that is associated with the token.
            /// </summary>
            TokenSessionId,

            /// <summary>
            /// The buffer receives a TOKEN_GROUPS_AND_PRIVILEGES structure that contains the user SID, the group accounts, the restricted SIDs, and the authentication ID associated with the token.
            /// </summary>
            TokenGroupsAndPrivileges,

            /// <summary>
            /// Reserved.
            /// </summary>
            TokenSessionReference,

            /// <summary>
            /// The buffer receives a DWORD value that is nonzero if the token includes the SANDBOX_INERT flag.
            /// </summary>
            TokenSandBoxInert,

            /// <summary>
            /// Reserved.
            /// </summary>
            TokenAuditPolicy,

            /// <summary>
            /// The buffer receives a TOKEN_ORIGIN value.
            /// </summary>
            TokenOrigin,

            /// <summary>
            /// The buffer receives a TOKEN_ELEVATION_TYPE value that specifies the elevation level of the token.
            /// </summary>
            TokenElevationType,

            /// <summary>
            /// The buffer receives a TOKEN_LINKED_TOKEN structure that contains a handle to another token that is linked to this token.
            /// </summary>
            TokenLinkedToken,

            /// <summary>
            /// The buffer receives a TOKEN_ELEVATION structure that specifies whether the token is elevated.
            /// </summary>
            TokenElevation,

            /// <summary>
            /// The buffer receives a DWORD value that is nonzero if the token has ever been filtered.
            /// </summary>
            TokenHasRestrictions,

            /// <summary>
            /// The buffer receives a TOKEN_ACCESS_INFORMATION structure that specifies security information contained in the token.
            /// </summary>
            TokenAccessInformation,

            /// <summary>
            /// The buffer receives a DWORD value that is nonzero if virtualization is allowed for the token.
            /// </summary>
            TokenVirtualizationAllowed,

            /// <summary>
            /// The buffer receives a DWORD value that is nonzero if virtualization is enabled for the token.
            /// </summary>
            TokenVirtualizationEnabled,

            /// <summary>
            /// The buffer receives a TOKEN_MANDATORY_LABEL structure that specifies the token's integrity level.
            /// </summary>
            TokenIntegrityLevel,

            /// <summary>
            /// The buffer receives a DWORD value that is nonzero if the token has the UIAccess flag set.
            /// </summary>
            TokenUIAccess,

            /// <summary>
            /// The buffer receives a TOKEN_MANDATORY_POLICY structure that specifies the token's mandatory integrity policy.
            /// </summary>
            TokenMandatoryPolicy,

            /// <summary>
            /// The buffer receives the token's logon security identifier (SID).
            /// </summary>
            TokenLogonSid,

            /// <summary>
            /// The maximum value for this enumeration
            /// </summary>
            MaxTokenInfoClass
        }

        [DllImport("advapi32.dll", SetLastError = true)]
        static extern Boolean SetTokenInformation(
            IntPtr TokenHandle,
            TOKEN_INFORMATION_CLASS TokenInformationClass,
            IntPtr TokenInformation,
            UInt32 TokenInformationLength);

        const uint SE_GROUP_INTEGRITY = 0x00000020;

        [DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
        static extern bool CreateProcessAsUser(
            IntPtr hToken,
            string? lpApplicationName,
            StringBuilder? lpCommandLine,
            IntPtr lpProcessAttributes,
            IntPtr lpThreadAttributes,
            bool bInheritHandles,
            uint dwCreationFlags,
            IntPtr lpEnvironment,
            string? lpCurrentDirectory,
            ref STARTUPINFO lpStartupInfo,
            out PROCESS_INFORMATION lpProcessInformation);
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-23T13:59:39.863

您可以使用[CreateProcessWithLogonW 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682431%28v=vs.85%29.aspx)或类似的[CreateProcessAsUser](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)和[CreateProcessWithTokenW](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682434%28v=vs.85%29.aspx)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-14T17:35:00.537

正如作者所描述的，这个问题没有解决。我现在有同样的问题，我想描述一下我是如何解决这个问题的。

如您所知，这并不容易，但最好的解决方案是强制计算机通过另一个非管理员进程启动“*.exe”文件。我所做的是在任务计划程序`without Highest Privilege`参数上创建一个任务，这意味着安排时间或手动运行此任务。

这似乎很愚蠢，但似乎没有办法。

您可以看到描述如何在 Windows 任务调度程序上创建新任务的[链接/](https://taskscheduler.codeplex.com/)

# c++ - c++奇怪的函数

> ID：11169432
> 
> 赞同：-1
> 
> 时间：2012-06-23T12:17:59.883
> 
> 标签：c++

我不知道为什么它将第三个符号更改为 w，这是一个非常奇怪的符号（我知道它为什么是第三个，但我不知道它是如何工作的）。

```
using namespace std;
char napis[] = "ALICE";

char& which(int n){
    return napis[n];
}

int main(){
which(2) = 'w';
cout << napis << endl;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T12:20:32.193

买本书，认真的。

`which()`返回对数组第三个元素的引用；通过`which(2) = ...`您将值分配给该引用所引用的变量。

但是要了解它的真正工作原理，您必须了解**参考**是什么——您应该得到的那本书中对此进行了解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:21:23.107

由于字符串“ALICE”是一个字符数组，并且数组从索引 0 开始，因此第二个索引是字符串中的第三个字符。

您还将返回一个引用而不是 char 的副本，这就是为什么如果您更改它的值，字符串会发生变化。

# linux - 停止未列出的服务

> ID：11169442
> 
> 赞同：0
> 
> 时间：2012-06-23T12:20:14.933
> 
> 标签：linux, ubuntu-12.04, lampp

我刚刚重新安装了 LAMPP。当我尝试使用 启动 LAMPP 时`/opt/lampp/lampp start`，它说另一个 ftp 和 mysql 守护程序已经与另一个 Web 服务器一起运行。我在没有停止所有服务的情况下删除了旧的 LAMPP 实例。当我使用`service --status-all`这些服务时没有列出。

我现在有什么办法可以阻止它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:22:53.050

是的，有了这个：`pkill -f apache; pkill -f httpd`

您可以在要停止的每个服务上运行它。

要测试它是否仍在运行，请尝试`pgrep -fl <APP_NAME>`.

如果是这种情况，请考虑使用`pkill -1 -f <APP_NAME>`and if still present `pkill -9 -f <APP_NAME>`。`-9`是更高的信号。默认情况下不要使用`-9`，您将面临关闭不完善的应用程序（文件描述符和其他系统内容）的问题

见`man 7 signal`。

# excel - 使用 VBA 在 Excel 中查找最后使用的单元格时出错

> ID：11169445
> 
> 赞同：190
> 
> 时间：2012-06-23T12:20:51.780
> 
> 标签：excel, vba, excel-formula

当我想找到最后使用的单元格值时，我使用：

```
Dim LastRow As Long

LastRow = Range("E4:E48").End(xlDown).Row

Debug.Print LastRow 
```

当我将单个元素放入单元格时，我得到了错误的输出。但是当我在单元格中输入多个值时，输出是正确的。这背后的原因是什么？

* * *

## 回答 #1

> 赞同：344
> 
> 时间：2012-06-23T13:33:16.590

**注意**：我打算将其设为“一站式帖子”，您可以在其中使用该`Correct`方式找到最后一行。这还将涵盖查找最后一行时要遵循的最佳实践。因此，每当我遇到新的场景/信息时，我都会继续更新它。

* * *

## **找到最后一行的不可靠方法**

一些最常见的查找最后一行的方法非常不可靠，因此永远不应该使用。

1.  使用范围
2.  xl向下
3.  计数A

`UsedRange`永远**不要**用来查找最后一个有数据的单元格。这是非常不可靠的。试试这个实验。

在单元格中输入一些内容`A5`。现在，当您使用下面给出的任何方法计算最后一行时，它会给您 5。现在将单元格涂成`A10`红色。如果你现在使用下面的任何代码，你仍然会得到 5。如果你使用`Usedrange.Rows.Count`你会得到什么？不会是5。

这是一个展示如何`UsedRange`工作的场景。

![在此处输入图像描述](../Images/770a5c3ed8a2cb2e7b483f22e5fbf205.png)

`xlDown`同样不可靠。

考虑这段代码

```
lastrow = Range("A1").End(xlDown).Row 
```

如果只有一个单元格 ( `A1`) 有数据会怎样？您最终将到达工作表中的最后一行！这就像选择单元格`A1`，然后`End`按键，然后`Down Arrow`按键。如果某个范围内有空白单元格，这也会给您带来不可靠的结果。

`CountA`也是不可靠的，因为如果中间有空白单元格，它会给你不正确的结果。

因此应该避免使用`UsedRange`,`xlDown`并`CountA`找到最后一个单元格。

* * *

## 在列中查找最后一行

要查找 Col E 中的最后一行，请使用此

```
With Sheets("Sheet1")
    LastRow = .Range("E" & .Rows.Count).End(xlUp).Row
End With 
```

如果你注意到我们有一个`.`before `Rows.Count`。我们经常选择忽略这一点。有关您可能遇到的错误，请参阅[此问题。](https://stackoverflow.com/questions/19985345/vba-excel-compability-mode#comment29753337_19985345)我总是建议使用`.`before`Rows.Count`和`Columns.Count`. 该问题是一个经典场景，其中代码将失败，因为Excel 2003 及更早版本以及Excel 2007 及更高版本的`Rows.Count`返回。类似地分别返回和。`65536``1048576``Columns.Count``256``16384`

Excel 2007+ 具有行的上述事实`1048576`也强调了这样一个事实，即我们应该始终声明将保存行值的变量，`Long`否则`Integer`会出现`Overflow`错误。

请注意，此方法将跳过任何隐藏的行。回顾[我上面针对 A 列的屏幕截图](https://i.stack.imgur.com/3TqSI.png)，如果第 8 行被隐藏，这种方法将返回`5`而不是`8`.

* * *

## 在工作表中查找最后一行

要查找`Effective`工作表中的最后一行，请使用它。注意使用`Application.WorksheetFunction.CountA(.Cells)`. 这是必需的，因为如果工作表中没有包含数据的单元格，那么`.Find`将为您提供`Run Time Error 91: Object Variable or With block variable not set`

```
With Sheets("Sheet1")
    If Application.WorksheetFunction.CountA(.Cells) <> 0 Then
        lastrow = .Cells.Find(What:="*", _
                      After:=.Range("A1"), _
                      Lookat:=xlPart, _
                      LookIn:=xlFormulas, _
                      SearchOrder:=xlByRows, _
                      SearchDirection:=xlPrevious, _
                      MatchCase:=False).Row
    Else
        lastrow = 1
    End If
End With 
```

* * *

## 查找表中的最后一行 (ListObject)

同样的原则也适用，例如获取表格第三列的最后一行：

```
Sub FindLastRowInExcelTableColAandB()
Dim lastRow As Long
Dim ws As Worksheet, tbl as ListObject
Set ws = Sheets("Sheet1")  'Modify as needed
'Assuming the name of the table is "Table1", modify as needed
Set tbl = ws.ListObjects("Table1")

With tbl.ListColumns(3).Range
    lastrow = .Find(What:="*", _
                After:=.Cells(1), _
                Lookat:=xlPart, _
                LookIn:=xlFormulas, _
                SearchOrder:=xlByRows, _
                SearchDirection:=xlPrevious, _
                MatchCase:=False).Row
End With

End Sub 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-12-24T13:34:51.457

**注意：这个答案是由[这个评论](https://stackoverflow.com/questions/11169445/error-in-finding-last-used-cell-in-excel-with-vba/27637752#comment43694683_11169920)激发的。的目的与`UsedRange`上面答案中提到的不同。**

**至于找到最后使用的单元格的正确方法，首先要确定什么是已*使用*的，然后选择合适的方法**。我认为至少三个含义：

1.  Used = 非空白，即有**数据**。

2.  Used = "... in use，表示包含**数据或格式**的部分。" [根据官方文档](http://support.microsoft.com/kb/244435)，这是 Excel 在保存时使用的标准。另请参阅[此官方文档](https://support.office.com/en-sg/article/Locate-and-reset-the-last-cell-on-a-worksheet-c9e468a8-0fc3-4f69-8038-b3c1d86e99e9)。如果没有意识到这一点，该标准可能会产生意想不到的结果，但它也可能被故意利用（不经常，肯定），例如，突出或打印最终可能没有数据的特定区域。而且，当然，最好将其作为保存工作簿时使用的范围的标准，以免丢失部分工作。

3.  Used = "... in use，表示包含**数据或格式**的部分"**或条件格式。** 与 2\. 相同，但也包括作为任何条件格式规则目标的单元格。

**如何找到最后使用的单元格取决于*您*想要什么（您的标准）**。

*对于标准 1，我建议阅读[此答案](https://stackoverflow.com/a/11169920/2707864)*。请注意，这`UsedRange`被引用为不可靠。我认为这是误导（即，“不公平” `UsedRange`），因为`UsedRange`它根本不意味着报告包含数据的最后一个单元格。因此，如该答案所示，在这种情况下不应使用它。另请参阅[此评论](https://stackoverflow.com/questions/11169445/error-in-finding-last-used-cell-in-vba/27637752#comment43694683_11169920)。

*对于标准 2，`UsedRange`*与同样为此用途设计的其他选项相比，*是最可靠的选项。*它甚至不需要保存工作簿以确保最后一个单元格已更新。 `Ctrl`+`End`将在保存之前转到错误的单元格（“在保存工作表之前不会重置最后一个单元格”，来自 [http://msdn.microsoft.com/en-us/library/aa139976%28v=office.10% 29.aspx](http://msdn.microsoft.com/en-us/library/aa139976%28v=office.10%29.aspx)。这是一个旧的参考，但在这方面是有效的）。

*对于标准 3，我不知道任何内置方法*。标准 2 不考虑条件格式。一个人可能已经根据公式格式化了单元格，而这些单元格没有被`UsedRange`or `Ctrl`+检测到`End`。在图中，最后一个单元格是 B3，因为它已明确应用了格式。单元格 B6:D7 具有从条件格式规则派生的格式，即使`UsedRange`. 考虑到这一点需要一些 VBA 编程。

![在此处输入图像描述](../Images/debe08d9f5fdbecdb53e01ba93a70c74.png)

* * *

**至于你的具体问题**： *这背后的原因是什么？*

您的代码使用范围 E4:E48 中的第一个单元格作为蹦床，用于*跳下*.`End(xlDown)`

如果您的范围内除了第一个以外没有*非空白单元格，则将获得“错误”输出。*然后，您*在黑暗中跳跃，即在工作表中向下跳跃（您应该注意**空白*字符串和*空字符串*之间的区别！）。

注意：

1.  如果您的范围包含不连续的非空白单元格，那么它也会给出错误的结果。

2.  如果只有一个非空白单元格，但它不是第一个，您的代码仍然会给您正确的结果。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-12-23T21:55:40.073

我创建了这个一站式函数来**确定最后一行、最后一列和最后一个单元格，无论是数据、格式化（分组/注释/隐藏）单元格还是条件格式**。

```
Sub LastCellMsg()
    Dim strResult As String
    Dim lngDataRow As Long
    Dim lngDataCol As Long
    Dim strDataCell As String
    Dim strDataFormatRow As String
    Dim lngDataFormatCol As Long
    Dim strDataFormatCell As String
    Dim oFormatCond As FormatCondition
    Dim lngTempRow As Long
    Dim lngTempCol As Long
    Dim lngCFRow As Long
    Dim lngCFCol As Long
    Dim strCFCell As String
    Dim lngOverallRow As Long
    Dim lngOverallCol As Long
    Dim strOverallCell As String

    With ActiveSheet

        If .ListObjects.Count > 0 Then
            MsgBox "Cannot return reliable results, as there is at least one table in the worksheet."
            Exit Sub
        End If

        strResult = "Workbook name: " & .Parent.Name & vbCrLf
        strResult = strResult & "Sheet name: " & .Name & vbCrLf

        'DATA:
        'last data row
        If Application.WorksheetFunction.CountA(.Cells) <> 0 Then
            lngDataRow = .Cells.Find(What:="*", _
             After:=.Range("A1"), _
             Lookat:=xlPart, _
             LookIn:=xlFormulas, _
             SearchOrder:=xlByRows, _
             SearchDirection:=xlPrevious, _
             MatchCase:=False).Row
        Else
            lngDataRow = 1
        End If
        'strResult = strResult & "Last data row: " & lngDataRow & vbCrLf

        'last data column
        If Application.WorksheetFunction.CountA(.Cells) <> 0 Then
            lngDataCol = .Cells.Find(What:="*", _
             After:=.Range("A1"), _
             Lookat:=xlPart, _
             LookIn:=xlFormulas, _
             SearchOrder:=xlByColumns, _
             SearchDirection:=xlPrevious, _
             MatchCase:=False).Column
        Else
            lngDataCol = 1
        End If
        'strResult = strResult & "Last data column: " & lngDataCol & vbCrLf

        'last data cell
        strDataCell = Replace(Cells(lngDataRow, lngDataCol).Address, "$", vbNullString)
        strResult = strResult & "Last data cell: " & strDataCell & vbCrLf

        'FORMATS:
        'last data/formatted/grouped/commented/hidden row
        strDataFormatRow = StrReverse(Split(StrReverse(.UsedRange.Address), "$")(0))
        'strResult = strResult & "Last data/formatted row: " & strDataFormatRow & vbCrLf

        'last data/formatted/grouped/commented/hidden column
        lngDataFormatCol = Range(StrReverse(Split(StrReverse(.UsedRange.Address), "$")(1)) & "1").Column
        'strResult = strResult & "Last data/formatted column: " & lngDataFormatCol & vbCrLf

        'last data/formatted/grouped/commented/hidden cell
        strDataFormatCell = Replace(Cells(strDataFormatRow, lngDataFormatCol).Address, "$", vbNullString)
        strResult = strResult & "Last data/formatted cell: " & strDataFormatCell & vbCrLf

        'CONDITIONAL FORMATS:
        For Each oFormatCond In .Cells.FormatConditions

            'last conditionally-formatted row
            lngTempRow = CLng(StrReverse(Split(StrReverse(oFormatCond.AppliesTo.Address), "$")(0)))
            If lngTempRow > lngCFRow Then lngCFRow = lngTempRow

            'last conditionally-formatted column
            lngTempCol = Range(StrReverse(Split(StrReverse(oFormatCond.AppliesTo.Address), "$")(1)) & "1").Column
            If lngTempCol > lngCFCol Then lngCFCol = lngTempCol
        Next
        'no results are returned for Conditional Format if there is no such
        If lngCFRow <> 0 Then
            'strResult = strResult & "Last cond-formatted row: " & lngCFRow & vbCrLf
            'strResult = strResult & "Last cond-formatted column: " & lngCFCol & vbCrLf

            'last conditionally-formatted cell
            strCFCell = Replace(Cells(lngCFRow, lngCFCol).Address, "$", vbNullString)
            strResult = strResult & "Last cond-formatted cell: " & strCFCell & vbCrLf
        End If

        'OVERALL:
        lngOverallRow = Application.WorksheetFunction.Max(lngDataRow, strDataFormatRow, lngCFRow)
        'strResult = strResult & "Last overall row: " & lngOverallRow & vbCrLf
        lngOverallCol = Application.WorksheetFunction.Max(lngDataCol, lngDataFormatCol, lngCFCol)
        'strResult = strResult & "Last overall column: " & lngOverallCol & vbCrLf
        strOverallCell = Replace(.Cells(lngOverallRow, lngOverallCol).Address, "$", vbNullString)
        strResult = strResult & "Last overall cell: " & strOverallCell & vbCrLf

        MsgBox strResult
        Debug.Print strResult

    End With

End Sub 
```

结果如下所示：
![确定最后一个单元格](../Images/a8e30ccd3391d3d949eabca2b5aee269.png)

要获得更详细的结果，可以取消注释代码中的某些行：
![最后一列，行](../Images/4c0b4932cc0e6119b18c23c5a157ccdb.png)

存在一个限制 - 如果工作表中有表格，结果可能会变得不可靠，因此我决定避免在这种情况下运行代码：

```
If .ListObjects.Count > 0 Then
    MsgBox "Cannot return reliable results, as there is at least one table in the worksheet."
    Exit Sub
End If 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-01-02T18:58:31.870

使用该解决方案时要记住的一个重要注意事项...

```
LastRow = ws.Cells.Find(What:="*", After:=ws.range("a1"), SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row 
```

...是为了确保您的`LastRow`变量是以下`Long`类型：

```
Dim LastRow as Long 
```

否则，在 .XLSX 工作簿中的某些情况下，您最终会遇到 OVERFLOW 错误

这是我在各种代码使用中的封装函数。

```
Private Function FindLastRow(ws As Worksheet) As Long
    ' --------------------------------------------------------------------------------
    ' Find the last used Row on a Worksheet
    ' --------------------------------------------------------------------------------
    If WorksheetFunction.CountA(ws.Cells) > 0 Then
        ' Search for any entry, by searching backwards by Rows.
        FindLastRow = ws.Cells.Find(What:="*", After:=ws.range("a1"), SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row
    End If
End Function 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-04-22T23:01:27.270

由于最初的问题是关于*找到*最后一个单元格的问题，因此**在这个答案中，我将列出可以获得意外结果的各种方法**；请参阅我对[*“如何使用宏在 Excel 工作表中找到包含数据的最后一行？”的*](https://stackoverflow.com/a/49971492/1026)[回答。](https://stackoverflow.com/a/49971492/1026)*我对解决这个问题的看法。*

 *我将首先扩展[sancho.s 的答案](https://stackoverflow.com/questions/11169445/error-in-finding-last-used-cell-in-vba/27637752#27637752)和GlennFromIowa[的评论](https://stackoverflow.com/questions/11169445/error-in-finding-last-used-cell-in-vba#comment73816621_27637752)，添加更多细节：

> [...] 首先要决定什么被认为是使用的。我看到至少6个意思。细胞有：
> 
> *   1) 数据，即公式，可能会产生空值；
> *   2）一个值，即一个非空白公式或常数；
> *   3) 格式化；
> *   4）条件格式；
> *   5）与单元格重叠的形状（包括评​​论）；
> *   6）参与一个表（列表对象）。
> 
> 您要测试哪种组合？有些（例如表格）可能更难测试，有些可能很少见（例如超出数据范围的形状），但其他可能会因情况而异（例如，具有空白值的公式）。

您可能需要考虑的其他事项：

*   A) 可以有*隐藏行*（例如自动过滤器）、*空白单元格*或空白行吗？
*   B) 什么样的表现是可以接受的？
*   C) VBA 宏能否以任何方式影响工作簿或应用程序设置？

考虑到这一点，让我们看看**获取“最后一个单元格”的常用方法如何产生意想不到的结果：**

*   [由于Siddharth Rout 在此处的答案](https://stackoverflow.com/questions/11169445/error-in-finding-last-used-cell-in-vba/11169920#11169920)中解释的原因（搜索*“xlDown 同样不可靠”*） ，问题中的`.End(xlDown)`代码最容易中断（例如，**使用单个非空单元格**或中间有**空白单元格）。**
**   任何基于`Count`ing ( `CountA`or `Cells*.Count`) or的解决方案`.CurrentRegion`也会在出现空白单元格或行时中断*   涉及`.End(xlUp)`从列末尾向后搜索的解决方案将与 CTRL+UP 一样，在**可见行中查找****数据**（产生空白值的公式被视为“数据”）（因此在启用自动过滤器的情况下使用它可能会产生不正确的结果 ⚠️ ）。 **您必须注意避免标准陷阱（有关详细信息，我将在此处再次参考[Siddharth Rout 的答案，查找](https://stackoverflow.com/questions/11169445/error-in-finding-last-used-cell-in-vba/11169920#11169920)*“查找列中的最后一行”*部分），例如硬编码最后一行 ( `Range("A65536").End(xlUp)`)而不是依靠`sht.Rows.Count`.** ***   `.SpecialCells(xlLastCell)`相当于 CTRL+END，返回“使用范围”的最底部和最右侧的单元格，因此所有适用于依赖“使用范围”的警告也适用于此方法。此外，“使用范围”仅在保存工作簿和访问时重置`worksheet.UsedRange`，因此`xlLastCell`可能会产生陈旧的结果⚠️未保存的修改（例如在删除某些行之后）。请参阅[dotNET 附近的答案](https://stackoverflow.com/a/29899739/1026)。*   `sht.UsedRange`（在[sancho.s 的答案](https://stackoverflow.com/questions/11169445/error-in-finding-last-used-cell-in-vba/27637752#27637752)中详细描述）考虑**数据和格式**（尽管不是条件格式）并**重置工作表的“使用范围”**，这可能是也可能不是您想要的。

    请注意，一个常见的错误️是使用`.UsedRange.Rows.Count`⚠️，它返回已使用范围内的*行*数，而不是*最后一行数*（如果前几行为空白，它们会有所不同），有关详细信息，请参阅newguy 对[*我如何找到*](https://stackoverflow.com/a/35975280/1026)[的回答*最后一行包含带有宏的 Excel 工作表中的数据？*](https://stackoverflow.com/a/35975280/1026)

    *   `.Find`**允许您在任何列**中查找包含任何数据（包括公式）或非空白值的最后一行。您可以选择是否对公式或值感兴趣，但问题是它会**重置 Excel 查找对话框中的默认值**️️⚠️，这可能会让您的用户非常困惑。它还需要小心使用，请参阅[Siddharth Rout 的答案](https://stackoverflow.com/questions/11169445/error-in-finding-last-used-cell-in-vba/11169920#11169920)here（*“Find Last Row in a Sheet”*部分）*   在循环中检查单个`Cells`' 的更明确的解决方案通常比重新使用 Excel 函数慢（尽管仍然可以是高性能的），但让您准确指定要查找的内容。请参阅[我](https://stackoverflow.com/a/49971492/1026)的基于`UsedRange`VBA 数组的解决方案，以查找给定列中包含数据的最后一个单元格——它处理隐藏的行、过滤器、空白，不修改 Find 默认值并且非常高效。***

 ***无论您选择哪种解决方案，都要小心

*   使用`Long`而不是`Integer`存储行号（以避免`Overflow`超过 65k 行）和
*   始终指定您正在使用的工作表（即`Dim ws As Worksheet ... ws.Range(...)`，而不是`Range(...)`）
*   使用时`.Value`（这是 a `Variant`）避免隐式转换`.Value <> ""`，因为如果单元格包含错误值，它们将失败。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-04-27T15:21:54.507

我想知道没有人提到这一点，但获取最后使用的单元格的最简单方法是：

```
Function GetLastCell(sh as Worksheet) As Range
    GetLastCell = sh.Cells(1,1).SpecialCells(xlLastCell)
End Function 
```

这实质上返回了您在选择 Cell 后通过`Ctrl`+获得的相同单元格。`End`**`A1`**

提醒一句：Excel 会跟踪曾经在工作表中使用过的最右下角的单元格。因此，例如，如果您在**B3**中输入内容，在**H8**中输入其他内容，然后删除**H8**的内容，则按`Ctrl`+`End`仍会将您带到**H8**单元格。上述函数将具有相同的行为。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-11-05T15:24:15.557

我要补充 Siddarth Rout 给出的答案，说可以通过让 Find 返回 Range 对象而不是行号来跳过 CountA 调用，然后测试返回的 Range 对象以查看它是否为 Nothing（空白工作表） .

另外，我会让我的任何 LastRow 过程版本为空白工作表返回零，然后我可以知道它是空白的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-10-01T05:09:44.313

```
sub last_filled_cell()
msgbox range("A65536").end(xlup).row
end sub 
```

这`A65536`是 A 列中的最后一个单元格，此代码在 excel 2003 上进行了测试。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-05-08T21:48:48.940

然而，这个问题正在寻求使用 VBA 找到最后一行，我认为最好为工作表函数包含一个数组公式，因为它经常被访问：

```
{=ADDRESS(MATCH(INDEX(D:D,MAX(IF(D:D<>"",ROW(D:D)-ROW(D1)+1)),1),D:D,0),COLUMN(D:D))} 
```

您需要输入不带括号的公式，然后点击`Shift`++`Ctrl`使其`Enter`成为数组公式。

这将为您提供 D 列中最后使用的单元格的地址。

* * *

感谢[pgsystemtester](https://stackoverflow.com/questions/11169445/error-in-finding-last-used-cell-in-excel-with-vba/43857774#comment104400383_43857774)，这将为您提供最后使用的单元格的行号：

```
{=MATCH(INDEX(D:D,MAX(IF(D:D<>"",ROW(D:D)-ROW(D1)+1)),1),D:D,0)} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-11-28T04:11:51.183

# 于 2021 年底更新

有了 Excel 的新[计算引擎和数组功能](https://support.microsoft.com/en-us/office/tips-for-improving-excel-s-performance-a8294ac5-652d-47f2-8e89-1c3ce2c09439)，以及[过滤器功能](https://support.microsoft.com/en-us/office/filter-function-f4f7cb66-82eb-4767-8f7c-4877ad80c759)，我相信这个话题现在应该少很多争议，并且以下选项提供了速度、可靠性和简单性的最佳组合（过去已证明难以平衡，因为这里的众多帖子说明了）。

另外，我将[isBlank](https://support.microsoft.com/en-us/office/is-functions-0f2d7971-6019-40a0-a171-f2d869135665)函数定义`last used`为*NOT 空白。*

## Excel公式

首先，请注意，过滤器函数使得使用以下公式获取最后一个单元格变得更加简单，用于特定的行或列（在这些情况下为`Column A`或`Row 1`）：

```
=MAX(FILTER(ROW(A:A),NOT(ISBLANK(A:A))))
=MAX(FILTER(COLUMN(1:1),NOT(ISBLANK(1:1)))) 
```

## 最后一行特定范围的 VBA 函数

使用上述函数，我们可以将其转换为 VBA 函数，但通过限制范围使其更快，同时通过执行多个列来扩展其功能（感谢[Chris Neilsen](https://stackoverflow.com/users/445425/chris-neilsen)的即时反馈 tweeking/建议）。我还发现，通过将每一列限定为仅比前一行高一行的范围，我发现了速度的巨大提升。

```
Function FindLastRowInRange(someColumns As Range) As Long
Const zFx = "=MAX(FILTER(ROW(????),NOT(ISBLANK(????)),0))"

   Dim tRng As Range, i As Long, tRow As Long, nRng As Range
   With someColumns.Worksheet
      Set tRng = Intersect(someColumns.EntireColumn, .UsedRange)

      For i = 1 To tRng.Columns.Count

         Set pRng = Intersect(tRng.Columns(i), _
         Range(.Rows(FindLastRowInRange + 1), .Rows(.Rows.Count)))

         If Not pRng Is Nothing Then
            tRow = .Evaluate(Replace(zFx, "????", _
               pRng.Address, 1, -1))

            If tRow > FindLastRowInRange Then _
               FindLastRowInRange = tRow

         End If
      Next i
   End With
End Function 
```

## 工作表中最后一行的 VBA 函数

要考虑整个工作表（所有列），我建议使用引用前一个的不同 VBA 公式，但它是一个[Volatile Function](https://docs.microsoft.com/en-us/office/vba/api/excel.application.volatile)。这可确保公式随着工作表的*任何*更改而更新。显然，可以将这两个公式结合起来，但我更喜欢限制 volatile 函数的使用。

```
Function FindLastRowInSheet(anywhereInSheet As Range) As Long
      Application.Volatile
      FindLastRowInSheet = FindLastRowInRange(anywhereInSheet.Worksheet.UsedRange)
End Function 
```

## 与其他选项相比的优势

*   允许工作表中的某些或所有行/列而不改变方法。
*   不可能丢失隐藏的行，因为这是一个风险`xlup`
*   忽略格式化/使用范围问题。
*   不干扰用户`Find`设置。
*   使用比 VBA 计算更快的工作表功能。
*   没有计数细胞（性能猪）。

希望这能结束辩论，但如果有人发现这方面的弱点，请分享。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-05-17T15:23:25.220

我一直在寻找一种模仿`CTRL`++的方法，所以`Shift`dotNET`End`解决方案很棒，除了我的 Excel 2010，`set`如果我想避免错误，我需要添加一个：

```
Function GetLastCell(sh As Worksheet) As Range
  Set GetLastCell = sh.Cells(1, 1).SpecialCells(xlLastCell)
End Function 
```

以及如何自己检查：

```
Sub test()
  Dim ws As Worksheet, r As Range
  Set ws = ActiveWorkbook.Sheets("Sheet1")
  Set r = GetLastCell(ws)
  MsgBox r.Column & "-" & r.Row
End Sub 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-29T08:07:22.737

```
Sub lastRow()

    Dim i As Long
        i = Cells(Rows.Count, 1).End(xlUp).Row
            MsgBox i

End Sub

sub LastRow()

'Paste & for better understanding of the working use F8 Key to run the code .

dim WS as worksheet
dim i as long

set ws = thisworkbook("SheetName")

ws.activate

ws.range("a1").select

ws.range("a1048576").select

activecell.end(xlup).select

i= activecell.row

msgbox "My Last Row Is " & i

End sub 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-06-01T19:30:44.203

在过去 3 年多的时间里，这些是我用来查找每个定义的列（对于行）和行（对于列）的最后一行和最后一列的函数：

## 最后一栏：

```
Function lastCol(Optional wsName As String, Optional rowToCheck As Long = 1) As Long

    Dim ws  As Worksheet

    If wsName = vbNullString Then
        Set ws = ActiveSheet
    Else
        Set ws = Worksheets(wsName)
    End If

    lastCol = ws.Cells(rowToCheck, ws.Columns.Count).End(xlToLeft).Column

End Function 
```

## 最后一行：

```
Function lastRow(Optional wsName As String, Optional columnToCheck As Long = 1) As Long

    Dim ws As Worksheet

    If wsName = vbNullString Then
        Set ws = ActiveSheet
    Else
        Set ws = Worksheets(wsName)
    End If

    lastRow = ws.Cells(ws.Rows.Count, columnToCheck).End(xlUp).Row

End Function 
```

对于 OP，这是获取 column 中最后一行的方法`E`：

`Debug.Print lastRow(columnToCheck:=Range("E4:E48").Column)`

## 最后一行，用数据计算空行：

在这里，我们可以使用[众所周知的 Excel 公式](https://www.vitoshacademy.com/last-used-row-last-used-column-in-excel-with-formula-without-vba/)，它为我们提供 Excel 中工作表的最后一行，而不涉及 VBA -`=IFERROR(LOOKUP(2,1/(NOT(ISBLANK(A:A))),ROW(A:A)),0)`

为了把它放在 VBA 中而不是在 Excel 中写任何东西，使用后面函数的参数，可以考虑这样的事情：

```
Public Function LastRowWithHidden(Optional wsName As String, Optional columnToCheck As Long = 1) As Long

    Dim ws As Worksheet

    If wsName = vbNullString Then
        Set ws = ActiveSheet
    Else
        Set ws = Worksheets(wsName)
    End If

    Dim letters As String
    letters = ColLettersGenerator(columnToCheck)
    LastRowWithHidden = ws.Evaluate("=IFERROR(LOOKUP(2,1/(NOT(ISBLANK(" & letters & "))),ROW(" & letters & " )),0)")

End Function

Function ColLettersGenerator(col As Long) As String

    Dim result As Variant
    result = Split(Cells(1, col).Address(True, False), "$")
    ColLettersGenerator = result(0) & ":" & result(0)

End Function 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-16T17:04:51.927

## **常规范围或表中的最后一行 (ListObject)**

1.  如果范围是常规范围或表格（列表对象），则查找最后一行需要使用不同的方法。
2.  查找表中的最后一行需要指定其他参数（表名，列相对于第一个表列的位置）。

无论范围类型如何，我都为最后一行创建了这个通用函数。只要给它任何单元格引用，它就会返回最后一行。知道范围特征没有任何麻烦，特别是如果您的范围有时是常规范围，有时是 ListObject。在表上使用常规范围方法可能会返回错误的结果。当然，您可以提前计划并每次都使用正确的方法，但是如果您可以使用通用功能，为什么还要麻烦呢？

> ```
> Sub RunMyLastRow()
> Dim Result As Long
> Result = MyLastRow(Worksheets(1).Range("A1"))
> End Sub 
> ```

```
 Function MyLastRow(RefrenceRange As Range) As Long
    Dim WS As Worksheet
    Dim TableName As String
    Dim ColNumber As Long
    Dim LastRow As Long
    Dim FirstColumnTable As Long
    Dim ColNumberTable As Long
    Set WS = RefrenceRange.Worksheet
    TableName = GetTableName(RefrenceRange)
    ColNumber = RefrenceRange.Column

    ''If the table (ListObject) does not start in column "A" we need to calculate the 
    ''first Column table and how many Columns from its beginning the Column is located.
    If TableName <> vbNullString Then
     FirstColumnTable = WS.ListObjects(TableName).ListColumns(1).Range.Column
     ColNumberTable = ColNumber - FirstColumnTable + 1
    End If 

    If TableName = vbNullString Then
    LastRow = WS.Cells(WS.Rows.Count, ColNumber).End(xlUp).Row
    Else
    LastRow = WS.ListObjects(TableName).ListColumns(ColNumberTable).Range.Find( _
               What:="*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row
    End If
    MyLastRow = LastRow
    End Function 
```

> ```
>  ''Get Table Name by Cell Range
>     Function GetTableName(RefrenceRange As Range) As String
>         If RefrenceRange.ListObject Is Nothing Then
>             GetTableName = vbNullString
>         Else
>             GetTableName = RefrenceRange.ListObject.Name
>         End If
>     End Function 
> ```****

# wordpress - WordPress 自动翻译自动帖子

> ID：11169446
> 
> 赞同：0
> 
> 时间：2012-06-23T12:20:54.363
> 
> 标签：wordpress

我有一个 WordPress 博客，并且正在使用 Automatic Youtube Video Posts 插件。但是，我的网站是丹麦语的，我希望我的帖子是丹麦语的。

有没有办法或插件在发布时自动翻译 wordpress 帖子的实际内容？

不仅通过使用实时翻译按钮，而且实际上将帖子数据更改为新语言（以便谷歌将其读取为丹麦语）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T03:25:27.370

[http://wordpress.org/extend/plugins/speaklike-worldwide-lexicon-translator/](http://wordpress.org/extend/plugins/speaklike-worldwide-lexicon-translator/)

[http://wordpress.org/extend/plugins/bens-translator/](http://wordpress.org/extend/plugins/bens-translator/)

[http://wordpress.org/extend/plugins/global-translator/](http://wordpress.org/extend/plugins/global-translator/)

这三个例子是“自动”翻译，并且在帖子上工作。他们也有谷歌的缓存系统。

但是，由于您“自动发布”-您可能需要以某种方式吸引他们。我从来没有真正使用过任何一个，但我认为其中至少有两个是全自动的，并在帖子的发布时间（而不是实时）创建选择的翻译。

话虽如此 - 仅在谷歌翻译服务（或任何其他自动服务）上进行翻译可能会产生不需要的结果。

# android - 尽管有 wrap_content，但 GridView 填充父级

> ID：11169447
> 
> 赞同：2
> 
> 时间：2012-06-23T12:20:54.733
> 
> 标签：android, android-layout

我在我的活动的主要布局 xml 中有一个这样的网格布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/parentLayout"
    android:layout_gravity="right">

    <GridView 
        android:id="@+id/gridview"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:background="#AAAAAA"
        android:columnWidth="90dp"
        android:numColumns="3"
        android:verticalSpacing="10dp"
        android:horizontalSpacing="10dp"
        android:stretchMode="none"
        />

</LinearLayout> 
```

我通过膨胀以下内容用 6 个图标填充它：

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/searchIcon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/searchIcon"/> 
```

我想要的是网格布局在线性布局中右对齐，并且它只是包装其内容。我通过给它一个不同的颜色背景来测试它。layout_height="wrap_content" 工作正常，但宽度似乎没有效果。结果是这样的：

![wrap_content 的屏幕截图没有按我的预期工作](../Images/b8ab013cb5b72d8b3044df6fbb78993c.png)

有任何想法吗？

在此先感谢，斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:25:03.603

在 LinearLayout 中使用`android:gravity="right"`而不是 LinearLayout ........

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/parentLayout"

    android:gravity="right"> //<----------------------- 
```

*   android:gravity 设置其使用的 View 内容的重力。
*   android:layout_gravity 设置视图或布局在其父级中的重力。

用于测试

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical" android:id="@+id/parentLayout"

    android:gravity="right">

    <TextView android:id="@+id/gridview" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:background="#AAAAAA"
        android:text="ewewqe" />

</LinearLayout> 
```

也看到这不是答案，而是看到

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:id="@+id/parentLayout"
    android:layout_gravity="right"
    android:gravity="right" android:weightSum="1">

    <GridView
        android:id="@+id/gridview"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:background="#AAAAAA"
        android:columnWidth="90dp"
        android:numColumns="3"
        android:verticalSpacing="10dp"
        android:horizontalSpacing="10dp"
        android:stretchMode="none"
        android:layout_weight=".5" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:25:57.697

`android:gravity="right"`在 GridView 中插入

```
<GridView 
  ......
  .....
  android:gravity="right" /> 
```

# c++ - 使用什么 MPEG4 编码器库？

> ID：11169451
> 
> 赞同：0
> 
> 时间：2012-06-23T12:21:26.240
> 
> 标签：c++, directx, directshow, mpeg-4

所以我有一个使用 DirectShow 录制视频的 WIN32 应用程序。现在我想将 .AVI 文件转换为 .MP4。

我宁愿不在源代码中使用自定义过滤器，因为我不想注册过滤器（需要管理员）。我也不想使用独立的应用程序，因为它应该是自动化的。最好我只想要一个具有良好记录的 API 的库，因为我对此很陌生。然后我可以在我的应用程序中使用它来转换完成录制的 .AVI 文件。任何人都可以指出我的方向吗？或者对我选择的方法有意见？

我会非常感谢任何帮助，并提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T12:59:28.537

由于 MPEG-4 编解码器不是免版税的，因此找到合适的编码器可能并不像您想象的那么容易。Microsoft 不向 Windows 提供编码器，除了 Windows 7 的某些版本中的 H.264 (MPEG-4 Part 10) 编码器，并且仅在 Media Foundation 中提供（与 DirectShow 相对）。如果您可以仅限于那些 Windows 7 版本，Media Foundation 可能是一个不错的选择，MSDN 提供了将文件转码为文件的示例，并且相当简单且有据可查。

有第三方解决方案，有一半制作的库可以用于编码器，FFmpeg 提供 LGPL 下的 MPEG-4 Part 2 视频编码器，以及 GPL 下通过 libx264 提供的 MPEG-4 Part 10。我的理解是，您可能仍然需要向 MPEG-LA 支付版税。FFmpeg 可能仍然是将文件转换为文件的好选择，因为它的命令 lnie 接口有很好的文档记录（与 libavformat/libavcodec API 相反，它的文档记录不那么好）。

另一种选择是使用 Windows Media 编解码器并压缩成 ASF/WMV 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:25:44.967

Libavcodec 和 libffmpeg - 一个一切到一切的媒体转换器（包括库和命令行应用程序）： http: [//ffmpeg.org/](http://ffmpeg.org/)

# c++ - OpenGL 批处理：为什么我的绘图调用超出数组缓冲区范围？

> ID：11169452
> 
> 赞同：0
> 
> 时间：2012-06-23T12:21:52.607
> 
> 标签：c++, opengl-es, rendering, vertex-buffer

我尝试使用顶点缓冲区对象在 OpenGL ES 2.0 中实现一些相对简单的 2D 精灵批处理。但是，我的几何图形没有正确绘制，并且我似乎无法找到的一些错误导致 Instruments 中的 GL ES 分析器报告：

> 绘制调用超出数组缓冲区边界
> 
> 一个绘图调用访问了一个超出正在使用的数组缓冲区范围的顶点。这是一个严重的错误，可能会导致崩溃。

我已经通过一次绘制单个四边形而不是批处理来测试具有相同顶点布局的绘图，并且它按预期绘制。

```
// This technique doesn't necessarily result in correct layering, 
// but for this game it is unlikely that the same texture will 
// need to be drawn both in front of and behind other images.
while (!renderQueue.empty()) 
{
    vector<GLfloat> batchVertices;
    GLuint texture = renderQueue.front()->textureName;

    // find all the draw descriptors with the same texture as the first 
    // item in the vector and batch them together, back to front
    for (int i = 0; i < renderQueue.size(); i++) 
    {
        if (renderQueue[i]->textureName == texture)
        {
            for (int vertIndex = 0; vertIndex < 24; vertIndex++) 
            {
                batchVertices.push_back(renderQueue[i]->vertexData[vertIndex]);
            }

            // Remove the item as it has been added to the batch to be drawn 
            renderQueue.erase(renderQueue.begin() + i);
            i--;
        }
    }

    int elements = batchVertices.size();
    GLfloat *batchVertArray = new GLfloat[elements];
    memcpy(batchVertArray, &batchVertices[0], elements * sizeof(GLfloat));

    // Draw the batch
    bindTexture(texture);
    glBufferData(GL_ARRAY_BUFFER, elements, batchVertArray, GL_STREAM_DRAW);
    prepareToDraw();
    glDrawArrays(GL_TRIANGLES, 0, elements / BufferStride);

    delete [] batchVertArray;
} 
```

其他可能相关的信息：renderQueue 是 DrawDescriptors 的向量。BufferStride 是 4，因为我的顶点缓冲格式是交错的 position2, texcoord2: X,Y,U,V...

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:19:06.050

[`glBufferData`](http://www.opengl.org/sdk/docs/man/xhtml/glBufferData.xml)期望它的第二个参数是以**字节**为单位的数据大小。因此，将顶点数据复制到 GPU 的正确方法是：

```
glBufferData(GL_ARRAY_BUFFER, elements * sizeof(GLfloat), batchVertArray, GL_STREAM_DRAW); 
```

还要确保调用时绑定了正确的顶点缓冲区`glBufferData`。

在性能说明上，这里绝对不需要分配临时数组。直接使用向量即可：

```
glBufferData(GL_ARRAY_BUFFER, batchVertices.size() * sizeof(GLfloat), &batchVertices[0], GL_STREAM_DRAW); 
```

# twitter-bootstrap - 一页有几个容器

> ID：11169455
> 
> 赞同：4
> 
> 时间：2012-06-23T12:22:10.780
> 
> 标签：twitter-bootstrap

我最近开始使用 Twitter Bootstrap 并试图了解它是如何工作的。我正在查看[流体布局示例](http://twitter.github.com/bootstrap/examples/fluid.html)源代码。有两个容器（div class="container-fluid"）。使用两个容器而不是添加一个容器和几行的原因是什么（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:31:31.987

每个`.container-fluid`可用的都包含演示页面的两个不同部分。第一个包含顶部固定导航栏，它具有与其他内容不同的响应行为。第二个是`.container-fluid`在内容部分中找到的，它包含页面的主要内容。

`.container-fluid`因此，为了回答您的问题，由于页面两个部分的响应行为不同，因此有两个容器。

# ruby-on-rails - 在测试驱动开发中使用 Rspec 和 Cucumber 解释错误

> ID：11169457
> 
> 赞同：1
> 
> 时间：2012-06-23T12:22:37.927
> 
> 标签：ruby-on-rails, rspec, cucumber

我是 Rails 和 TDD 的新手，并且被困在 Rspec 测试和 Cucumber 测试之间的过渡中。我的 Rspec 测试全部通过绿色：

```
 ModelController
    Find with same attribute
      should call the controller method that performs attribute search
      should select the Search Results template for rendering
      should make the attribute search results available to that template 
```

所以我回到我的 Cucumber 功能：

```
 When I follow "Find Items With Same Attribute"              
  Then I should be on the Similar Items page for "Attribute" 
```

如果我将其包含在我的视图中，则第一个变为绿色：

```
 = link_to "Find Items With Same Attribute" 
```

对于第二个，我修改了我的 paths.rb 文件以包含：

```
 when /^the Similar Items page for "(.*)"/
    "/model/search_by_attribute/#{Model.find_by_name($1).attribute}" 
```

然后它失败并出现此错误

```
 expected: "/model/search_by_attribute/Attribute"
             got: "/model/1" (using ==) (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/web_steps.rb:233:in `/^(?:|I )should be on (.+)$/'
      features/search_by_attribute.feature:25:... 
```

如果我在 model_steps.rb 中包含一个步骤定义，我会得到一个不同的错误：

```
Ambiguous match of "I should be on the Similar Items page for "Attribute"":

features/step_definitions/model_steps.rb:11:in `/^(?:|I )should be on the (.+) page for "(.*)"$/'
features/step_definitions/web_steps.rb:230:in `/^(?:|I )should be on (.+)$/' 
```

我需要在视图中完成路线吗？我是否需要编写一个不会模棱两可的步骤定义？我不知道如何从这里开始，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:29:02.020

我的猜测是您需要完成您创建的 link_to 方法。Cucumber 进行高级测试，因此它会单击该链接并关注它。由于您没有指定路径，它可能会将您留在当前页面，而不是带您进入“相似项目”页面。

# c++ - 添加异常信息或检查此信息到类似 doxygen 的评论的工具？

> ID：11169474
> 
> 赞同：1
> 
> 时间：2012-06-23T12:25:11.707
> 
> 标签：c++, exception, exception-handling

我一直在考虑这个问题很长时间（实际上是几年），并寻找在 C++ 中处理异常的最佳方法。所以我想到了可以帮助我的工具，所以我想问一下这个工具是否存在（我无法谷歌它）。

该工具将解析 C++ 源代码（包括头文件和源代码）并使用异常信息填充类似 doxygen 的注释（最好扩展我已经写过的关于方法本身的注释）。对于每个方法，异常列表将从代码中生成——从每次出现“throw SomeException;”开始。命令，来自被调用函数的列表（注意递归）和已知命令可能引发异常（目前，我只能找到 operator new）。所以我可以跟踪所有异常，看看我是否忘记管理来自其他模块的异常，看看是否有意外从析构函数抛出异常的可能性（这禁止了 AFAIK）。

或者我可以使用类似的工具，它不会自动填充 doxygen 评论，但至少会警告我没有评论的评论。类似地，当我运行 doxygen 文档生成器时，我忘记注释一个输入变量并且生成器会警告我这一点。

那么，有这样的工具吗？如果没有，是否有非常易于使用的库解析 C++ 代码，以便我可以轻松地为自己实现它？

例子：

```
//// Example.h ////

/**
  * Does almost nothing.
  */
void foo1();

/**
  * Generates some error.
  */
void foo2();

//// Example.cpp ////

#include "Example.h"

void foo1()
{
    foo2();
}

void foo2()
{
    throw MyException();
} 
```

这个会：

1.  在 foo1() 注释中添加“@throw MyException”行。

2.  发出警告：“foo1() in file ... line ...: throws MyException, but not in comment！”

我知道 C++ 语言提供了可能引发异常的规范的可能性，问题是这不是在编译时检查的，而是在运行时检查的。我需要处理这种情况（如果我没记错的话，std::unexpected）。

如果需要像 doxygen 一样手动运行此工具，而不是每次编译时都需要手动运行，这不是问题。

# asp.net - 为什么我看到“路径”错误

> ID：11169478
> 
> 赞同：1
> 
> 时间：2012-06-23T12:25:34.573
> 
> 标签：asp.net, path

我正在尝试将 excel 文件导入到我的 SQL 表中，我写了很多代码，但在 Visual Studio 中我的计算机没有正确看到我的路径。例子 ：

`string path = @"~\Uploads\File1.xls";` 这是我的项目文件中上传文件中的excel表。

我有这个错误：`'C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\~\Uploads\File1.xls', is not a valid path.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:35:20.033

如果您的路径与您的 asp.net 项目相关，请使用：

```
Server.MapPath("~/Uploads/File1.xls"); 
```

否则，使用完整路径

# objective-c - 如何从 AppDelegate 向 ViewController 设置文本？

> ID：11169486
> 
> 赞同：1
> 
> 时间：2012-06-23T12:26:39.060
> 
> 标签：objective-c, ios5, xcode4.3

我有一个单视图应用程序。它有 myAppDelegate 和 myViewController。在我从一本书中完成的早期学习项目中，myViewController.h 包含以下内容：

```
IBOutlet UILabel *textField; 
```

为了在 iPhone 上向该标签显示文本，您需要在 myViewController.m 中添加以下内容：

```
[textField setText:@"Hello World!"]; 
```

它奏效了！漂亮的！但是......我如何从 myAppDelegate 完成相同的任务？如果我将同一行放在 myAppDelegate.m 的上方，则在里面：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

我收到一个错误：使用未声明的标识符“textField”。

所以我可以从 myAppDelegate 将文本打印到 myViewController 内的同一个标签吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:42:20.680

最好的答案可能是，“不要……因为视图控制器应该对自己的视图负责。”

但是，实际上，您需要引用您的视图控制器才能更改其属性之一。语法将是某种形式`[controller.textField setText:@"Hello World!"];`，但以您自己的变量名作为目标。确切的陈述将取决于您的`didFinishLaunchingWithOptions:`方法中当前的内容以及您的应用程序委托和视图控制器如何相互连接。

# jsoup - 如何使用 Java 在 JSoup 中打印元素

> ID：11169488
> 
> 赞同：0
> 
> 时间：2012-06-23T12:27:06.387
> 
> 标签：jsoup

我用 Java 编写了一个函数，通过它们的 ID 从给定的 URL 中获取 10 个链接。HTML 代码中的`href`标签 ID 写为：`id-1`、`id-2`等。我使用的是 JSoup 库。我的代码是：

```
 public static void linkList(String URL)
       {
          Document doc=Jsoup.parse(URL);
          Element e;
          int eId=1;

              for(int x=1; x<=10; x++)
              {
                //element ids: id-1, id-2, etc.. 
                e = doc.getElementById("id-"+eId); 
               System.out.println(e); //print the link
               eId++; //increment the id to fetch the next
              }
       } 
```

我得到的输出总是`null`. 这是我第一次使用 JSoup，当我尝试在 JSoup 网站上提问时，它会引导我到 Stack Overflow 询问有关 JSoup 的任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:40:43.743

尝试

```
String elementText = e.text(); 
```

# iphone - 为什么 UITextField becomeFirstResponder 在我的子视图控制器中不显示键盘？

> ID：11169489
> 
> 赞同：0
> 
> 时间：2012-06-23T12:27:10.910
> 
> 标签：iphone, ipad, keyboard

在我的第一个 ViewController 中，我将一个 UITextField 设置为成为FirstResponder，并且焦点保持在 TextField 和键盘自动出现的位置。它工作正常。但是然后我在这个 ViewController 中展示了另一个具有 3 个 UITextFields（A、B、C）的子 ViewController，我在这个子 ViewController 中将第一个 UITextField（比如 A）设置为 becomeFirstResponder，焦点保持在 A 但键盘没有出现. 我整天搜索所有答案，但没有找到。

这是代码。

在父VC中，我设置：

```
TestVC *testVC= [[TestVC alloc] init];
testVC.modalPresentationStyle=UIModalPresentationFormSheet;
[detailvc presentViewController:testVC animated:NO completion:nil]; 
```

在子 VC TestVC 中，我设置：

```
UITextField *v_matcode=[MyViewUtil addTextField:@"" x:10 y:10 width:100 height:40];
[self.view addSubview:v_matcode];
[v_matcode becomeFirstResponder]; 
```

这是 addTextField()：

```
+(UITextField *) addTextField:(NSString *)text x:(int)_x y:(int)_y width:(int)_width height:(int)_height {
  UITextField *v_txt = [[UITextField alloc] init];
  v_txt.frame= CGRectMake(_x, _y, _width, _height);
  v_txt.borderStyle = UITextBorderStyleRoundedRect;
  return v_txt;} 
```

v_matcode 有焦点，但键盘没有出现。但是，如果我不将此文本字段设置为 FirstResponder 并让用户点击它，则键盘会正确显示。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T14:58:26.413

尝试将动画设置为YES

[detailvc presentViewController:testVC 动画:YES 完成:nil];

# opengl - 使用线和衍生指令

> ID：11169502
> 
> 赞同：0
> 
> 时间：2012-06-23T12:28:33.807
> 
> 标签：opengl, glsl, derivative

我想知道 glsl 中的衍生物是否适用于`GL_LINES`原语。

AFAIK OpenGL 实现对一组 4 个像素（2x2 像素四边形）执行离散逼近以计算导数。有没有可能让它们在 1 像素宽度的线上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:37:03.923

是的，mipmapping 和衍生产品适用于在线原语。

# c# - 添加 xmlns 命名空间

> ID：11169506
> 
> 赞同：0
> 
> 时间：2012-06-23T12:29:06.870
> 
> 标签：c#, xml, xml-namespaces

我真的不想问你这个问题，你们中的许多人可能认为这是一个简单的问题，但请帮助我在这个问题上工作了几个小时，我离解决方案还差了一步。我真的需要这个来拼贴。

我必须创建一个 xml 文档，这个文档工作正常。

现在我需要定义命名空间，或者至少我认为它们是这样的。

我需要将其插入到我的文档中

```
 <language>
    <language id="1" tag="english"/>
    <language id="2" tag="english"/> 
  </language> 
```

并像这样使用它：

```
<item id="1">
  <item>
    <item language="1">Periods</item>
  </item>
<item/> 
```

我的代码：

```
XmlElement element = xmldoc.CreateElement("", "item", "1"); 
```

问题是我得到 xmlns 的语言，我在哪里可以定义命名空间以及如何创建 `<language id="1" tag="english"/> ?`

我的问题是我不知道如何定义`<language id="1" tag="english"/>` ，我不知道如何像这样使用它`<item language="1">Periods</item>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:51:28.603

您可能可以编写一个简单的类，例如我使用这样的 Speech 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.Serialization;

namespace StackOverflowSamples
{
    [Serializable]
    public class Speech
    {
        public Speech()
        {
            this.Items = new List<LanguageItem>();
        }

        [XmlArray]
        public List<LanguageItem> Items;
    }

    [Serializable]
    public class LanguageItem
    {
        [XmlAttribute]
        public string Language { get; set; }

        [XmlAttribute]
        public int Id { get; set; }
    }
} 
```

可以使用以下代码简单地序列化：

```
// use built in serialization mechanism
XmlSerializer mySerializer = new XmlSerializer(typeof(Speech));
// Writing the file requires a TextWriter.
TextWriter writer = new StreamWriter("test.xml");

var speech = new Speech();
var lang1 = new LanguageItem() { Id = 1, Language = "English", };
var lang2 = new LanguageItem() { Id = 2, Language = "Slovenian", };
speech.Items.Add(lang1);
speech.Items.Add(lang2);

XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
//Add an empty namespace and empty value
ns.Add("", "");

mySerializer.Serialize(writer, speech, ns);
writer.Close(); 
```

在这里产生这样的XML：

```
<?xml version="1.0" encoding="utf-8"?>
<Speech>
  <Items>
    <LanguageItem Language="English" Id="1" />
    <LanguageItem Language="Slovenian" Id="2" />
  </Items>
</Speech> 
```

# php - 获取颜色选择器输入值并将其用于 url 查询？

> ID：11169509
> 
> 赞同：1
> 
> 时间：2012-06-23T12:29:48.447
> 
> 标签：php, jquery, input, color-picker

我有一个访问者可以更改的 jQuery 颜色选择器，我试图弄清楚，如何传递他们输入/选择的任何值，以便我可以将其用作 url 查询？

使用我现在所拥有的，您可以单击色轮以在输入中获取十六进制代码（例如`#ffffff`），或者您可以将其输入到输入中，但我需要做的是然后获取此值并创建一个链接链接到网站的 url plus `?color=#ffffff`。我可以在颜色选择器旁边创建一个链接来执行此操作，但我不知道如何将它链接到访问者在颜色输入中选择的任何内容。

这是现场直播：[http ://www.brainbuzzmedia.com/themes/vertex/](http://www.brainbuzzmedia.com/themes/vertex/)

这是输入的html：

```
<input type="text" name="color-demo" id="color-demo" value="#ff0000" class="colorfield regular-text" data-hex="true" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:34:28.600

这可以显示你的价值

```
alert(document.getElementById('color-demo').value); 
```

因此，只需将其添加到您的链接中：

```
<a href="" id="mylink">LINK</a> 
```

像这样：

```
document.getElementById('mylink').href += document.getElementById('color-demo').value; 
```

当 onChange for color-demo 触发时，应该调用上面的 JS 代码。例如，更改：

```
<input id="color-demo" class="colorfield regular-text" type="text" data-hex="true" value="#ff0000" name="color-demo"> 
```

到

```
<input id="color-demo" class="colorfield regular-text" type="text" data-hex="true" value="#ff0000" name="color-demo" onChange="myfun()"> 
```

并创建 myfun()：

```
function myfun()
{
document.getElementById('mylink').href += document.getElementById('color-demo').value;
} 
```

# delphi - delphi如何创建MDI表单

> ID：11169511
> 
> 赞同：1
> 
> 时间：2012-06-23T12:30:07.260
> 
> 标签：delphi, delphi-7

如何解决“无法创建表单。当前没有 MDI 表单处于活动状态”的问题。我想制作一个简单的程序，它需要一个登录表单才能访问主表单。我得到了三个表单：主表单（MDI 表单）、Form2（MDIChild）和登录表单（普通）。登录表单将首先出现，然后是主表单，然后当我尝试从主表单调用表单 2 时，将显示错误“无法创建表单。当前没有 MDI 表单处于活动状态”。我在 Windows XP 上使用 Delphi 7。我是初学者。先生非常感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:43:07.983

听起来您让您的 LoginForm 自动创建，并且它是首先创建的。这不起作用，因为`Application.CreateForm`在项目文件中创建的第一个表单变成了`Application.MainForm`. 为了成为 MDI 应用程序，`MainForm`必须是 MDI 父窗口。

解决方案通常是不自动创建您的登录表单，而是自己创建它。为此，您需要编辑 .dpr 文件（`Project->View Source`从 IDE 的主菜单中）。

您的项目源现在应该看起来像这样（显然，在`Application.CreateForm`调用中使用您的类）：

```
begin
  Application.Initialize;
  Application.CreateForm(TLoginForm, LoginForm);
  Application.CreateForm(TMainForm, MainForm);
  Application.CreateForm(TChildForm, ChildForm);
  Application.Run;
end. 
```

您需要对其进行修改，以免`LoginForm`先创建 。

```
var
  LoginOK: Boolean = False;

begin
  LoginForm := TLoginForm.Create(nil);
  try
    // Show login form. When it closes, see if login worked.
    LoginForm.ShowModal;
    LoginOK := LoginForm.CanLogin; // However you know login is OK or not here
  finally
    LoginForm.Free;
  end;
  if not LoginOK then
    Halt;    // Login failed - terminate application.
  Application.Initialize;
  Application.CreateForm(TMainForm, MainForm);
  {
     I normally do not auto-create anything but the main form
     and maybe a datamodule (which you **can** autocreate first -
     it is not a form), but a MDI application is pretty useless
     without at least one open child window, IMO.
  }
  Application.CreateForm(TChildForm, ChildForm);
  Application.Run;
end. 
```

# html - CSS表格列宽“原样”

> ID：11169513
> 
> 赞同：1
> 
> 时间：2012-06-23T12:30:09.773
> 
> 标签：html, css, width, css-tables

有没有办法“按原样”指定表格列宽。换句话说，我希望一列具有显示其内容所需的精确宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:48:10.663

这应该是默认情况。

```
<!-- "table-layout" is "auto" by default as well, just to force it -->
<table border="1" style="table-layout:auto;">
    <tr>
        <td>Column 1</td>
        <td>Column 2</td>
    </tr>
</table> 
```

[这是它的样子](https://dl.dropbox.com/u/4254118/table.html)

# objective-c - IBOutlet 在某种程度上是一个 NSZombie？

> ID：11169514
> 
> 赞同：0
> 
> 时间：2012-06-23T12:30:17.697
> 
> 标签：objective-c, cocoa, xib, iboutlet, nszombie

这是一个 OS X 应用程序。我正在设计一个自定义工作表。在我的 XIB 文件中，我有工作表的窗口和 NSViewController 的子类，它负责控制窗口/工作表中的视图。XIB 的所有者是另一个控制器类。

我在窗口的内容视图中放置了一个 NSTextField。在我的 NSViewController 中，我为 NSTextField 创建了一个 IBOutlet 声明，并确保出口在 XIB 中正确连接。

我覆盖了 -[NSViewController setRepresentedObject:] 并在该方法中查看了代表对象，根据它的属性，我要么从它的超级视图中删除 NSTextField，要么将其添加回超级视图。

我第一次显示带有表示文本字段的代表对象的工作表应该从超级视图中删除。这工作得很好。

第二次显示带有表示文本字段的工作表时，我的应用程序在调用 -[NSView addSubview:] 时会因 EXC_BAD_ACCESS 而崩溃。

Running Instruments 显示 NSTextField 在我尝试将其添加回超级视图时是僵尸。Instruments 还表明，每次对保留/释放/自动释放的调用都是由 AppKit 或 Foundation 执行的——所以我的任何代码都不会增加或减少保留计数。事实上，在我的代码中引用 IBOutlet 的仅有两行是对 -[NSView removeFromSuperview] 和 -[NSView addSubview:] 的调用。

我做错了什么还是这是 OS X 中的错误？除非 XIB 被卸载，否则永远不应该释放 IBOutlet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:35:54.763

很自然，我在发布问题后 2 分钟就明白了。

我的 XIB 中实际上有 2 个文本字段，它们都具有与问题中描述的相同的行为。只有一个文本字段变成了 NSZombie，这让事情变得更加混乱。

好吧，当我设计 XIB 时，我放置了一个 NSTextField，对其进行配置，然后在拖动 NSTextField 时按住 Option 键复制它。我确实确保为复制的 NSTextField 正确设置了出口，但由于某种原因，对象保持不变。

解决方案是删除有问题的 NSTextField，然后从调色板中删除一个新的并以这种方式配置它。

# java - 除了标准化期望之外，还有没有使用接口（在 Java 中）？

> ID：11169518
> 
> 赞同：2
> 
> 时间：2012-06-23T12:30:52.627
> 
> 标签：java, interface

我是 Java 和学习界面的新手。除了标准化期望之外，我不了解接口的使用。

如果有任何其他用途，请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T12:46:08.220

接口有一些很好的用途：

***多态性***

它们允许您以相同的方式处理几个不同但相似的对象。例如：

```
public interface Flyer {
  public void fly();
}   

public class Bird implements Flyer {
  @Override
  public void fly() {
    System.out.println("I'm flying");
  }   
}   

public class Airplane implements Flyer {
  @Override
  public void fly() {
    System.out.println("I'm inanimate and flying");
  }   
}   

// then you can have a method like so:
public void makeFly(Flyer flyer) {
  flyer.fly();
} 

// or make a list like so:
List<Flyer> fliers = Arrays.asList(new Airplane(), new Bird()); 
```

它们还允许对象放入几个不同的盒子中。例如，a`Bird`不仅会飞，而且是`Animal`. 接口允许您将`Bird`其视为任一：

```
public interface Animal {
  public void move();
}

public class Bird implements Flyer, Animal {
  @Override
  public void fly() {
    System.out.println("I'm flying");
  }   

  @Override
  public void move() {
    fly();
  }
}

// now I can do:
Bird bird = new Bird();
Flyer flyer = new Bird();
Animal animal = new Bird(); 
```

***解耦设计***

此外，它们使您可以灵活地选择实施。（我不确定您所说的“标准化期望”是什么意思，但这种用法可能与标准化*最*相关。即它之所以有效，*是因为*它创建了一个标准。）例如，假设我有一个返回`List<Flyer>`. 由于`List`是一个接口，我可以选择 use `ArrayList`,`LinkedList`等作为我的实现：

```
public List<Flyer> makeFlyerList() {
  return new ArrayList<Flyer>(Arrays.asList(new Airplane(), new Bird()));
}

// works just the same
public List<Flyer> makeFlyerList() {
  return new LinkedList<Flyer>(Arrays.asList(new Airplane(), new Bird()));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T12:33:53.770

接口是一种声明实现类的契约的方法；它是在消费者和生产者之间创建**抽象**和**解耦设计的主要工具。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T12:34:20.690

我想到的另一种情况是标记功能。

`java.lang.Cloneable`例如，没有任何方法声明，它仅用于标记实现为可克隆类的类。

从[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Cloneable.html)中：

> 一个类实现了 Cloneable 接口，以向 Object.clone() 方法指示该方法可以合法地对该类的实例进行逐个字段的复制。

[在Serializable](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/Serializable.html)中可以看到另一个相同用途的示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T13:05:10.597

Java 在继承（即多重继承）中存在设计上的限制。所以你不能扩展一个以上的类，但你可以实现任意数量的接口。

在 java 中使用接口的第二个优势与应用程序的设计和性能有关。对于任何应用程序，它都需要“松散耦合”和“高度一致”。这里接口出现了。接口实现类之间的契约，因此设计变得松散耦合。

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T13:33:43.887

是的，但我反对“公正”这个词。

请记住，您不仅可以定义抽象方法，还可以定义`expectation`.

例如，请注意在[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)接口中有[Map.Entry](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html)内部接口。在这里，我们不仅看到*了您对 Map 的期望，*而且还详细了解了您对 Map 的一些期望**，**`Map`例如他们的`Entries`.

尽管您不会在 java API 中找到很多示例，但在实际编程中的许多情况下，接口类中也会有大量的`enum`s 和/或`public static final`s。这些用于细化和详细说明您可以和不能对此类对象执行的操作。

总而言之，你是对的......在一定程度上...... an`interface`只是*标准化期望*，但一些研究会告诉你*标准化期望*是一个广泛而深入的主题，值得一些非常复杂`interface`的 s。

# python - 如何使用 PyEphem 计算给定银河坐标 (GLON, GLAT) 的 (alt, az)？

> ID：11169523
> 
> 赞同：4
> 
> 时间：2012-06-23T12:31:57.760
> 
> 标签：python, coordinate-transformation, astronomy, pyephem

对于地球上给定的观察者（经度、纬度、时间）和给定的银河坐标（GLON、GLAT），我如何使用 PyEphem 计算天空中对应的（alt、az）点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:12:25.473

鉴于 PyEphem 目前的工作方式，有两个步骤可以回答您的问题。首先，您必须将一对银河坐标转换为赤道 RA/dec 坐标对。

```
import ephem

# Convert a Galactic coordinate to RA and dec                          

galactic_center = ephem.Galactic(0, 0)
eq = ephem.Equatorial(galactic_center)
print 'RA:', eq.ra, 'dec:', eq.dec

→ RA: 17:45:37.20 dec: -28:56:10.2 
```

这些坐标非常接近维基百科给出的银河中心坐标。

现在我们有了一个正常的 RA/dec 坐标，我们只需要确定它现在在天空中的位置。由于 PyEphem 构建在一个只知道恒星和行星等天体“天体”的库之上，我们只需要在该位置创建一个假“恒星”并询问它的方位角和高度。

```
# So where is that RA and dec above Boston?
# Pretend that a star or other fixed body is there.

body = ephem.FixedBody()
body._ra = eq.ra
body._dec = eq.dec
body._epoch = eq.epoch

obs = ephem.city('Boston')
obs.date = '2012/6/24 02:00' # 10pm EDT
body.compute(obs)
print 'Az:', body.az, 'Alt:', body.alt

→ Az: 149:07:25.6 Alt: 11:48:43.0 
```

我们可以通过查看当晚晚些时候波士顿的天空图来检查这个答案是否合理：人马座——银河中心的位置——刚刚从天空的东南边缘升起，这完全可以理解东南方位角149°，以及像 11° 这样的低高度。

# jquery - 使背景图像淡入并不断向左移动

> ID：11169525
> 
> 赞同：0
> 
> 时间：2012-06-23T12:32:03.823
> 
> 标签：jquery, jquery-animate

我有这个整洁的[jQuery 滑块](http://www.slidorion.com/)，我想让图像在淡入时从右向左缓慢滑动。

在查看 jQuery 时，我看到了这一点：

```
switch(effect){
    case 'fade':
    $new.css({'z-index':zPos,'top':'0','left':'0','display':'none'}).fadeIn(speed); 
```

现在我想让图像在淡入时不断向左滑动，直到出现下一张图像。

```
$new.animate({
    left: parseInt($new.css('left'),10) == 0 ?
    -$new.outerWidth() :
    0
}); 
```

如果我将此附加到淡入淡出，则图像仅在幻灯片持续时间加上轮播持续时间后才向左滑动。换句话说，就在图像切换之前，它向左滑动。另外，我想控制速度，因为过渡应该很慢。

如何使图像不断向左滑动，就好像它是不间断的流体运动一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:40:14.267

我强烈推荐使用[GreenSock (GSAP) v12](http://www.greensock.com/v12/)来制作动画效果。使用timelineMax 功能来排列多个动画并同时播放它们，而不是一个接一个地播放。它比 jquery 的动画和淡入淡出更灵活。它使您可以完全控制并与 jquery 一起工作。

# c# - 将 Uri 分配给图像源

> ID：11169528
> 
> 赞同：1
> 
> 时间：2012-06-23T12:32:25.903
> 
> 标签：c#, silverlight-4.0, uri

我有多个项目，如图所示，我正在处理 addpath.cs 我分配图像源如下：

```
Image image = new Image();
image.Source = new BitmapImage(new Uri("images/arrow.jpg", UriKind.Relative)); 
```

当我使用以下内容时：

```
rt.CenterX = image.Width / 2;
rt.CenterY = image.Height / 2; 
```

宽度和高度的值是楠，所以我猜分配给图像源的 uri 有问题，还是其他什么？

![在此处输入图像描述](../Images/73bddebcf28c2e825da6fe0b92623240.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:02:03.837

使用以下代码片段：

```
var logo = new BitmapImage();
logo.BeginInit();
logo.UriSource = new Uri("pack://application:,,,/YOURAPP;component/images/arrow.jpg");
logo.EndInit();
rt.CenterX = logo.Width / 2.0;
rt.CenterY = logo.Height / 2.0; 
```

不要忘记将 YOURAPP 替换为您的项目名称！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:02:57.917

我找到了解决方案，图像文件夹应该放在网站目录中的“客户端 bin”文件夹中。谢谢你们。

# android - 创建自定义 ui 元素并使其响应用户输入

> ID：11169530
> 
> 赞同：0
> 
> 时间：2012-06-23T12:33:18.663
> 
> 标签：android, user-interface

我有一个音量旋钮，想知道如何让它响应 android 中的用户输入。请指出正确的方向，因为我不知道该怎么做？[自定义旋钮](http://www.photoshop-plus.co.uk/2011/09/14/learn-how-to-create-a-gui-volume-dialknob/)看起来像本文中创建的东西。我的问题是将这个旋钮移植到安卓应用程序中的一般方法是什么。我是否必须扩展视图类并将其绘制为位图。如果是这样，我将如何响应用户输入。如果这是不可能的并且我走错了路，有人可以告诉我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:22:46.147

我会扩展 View 类。

View 是 android 中小部件的基类（小部件是指文本字段、按钮等），所以我认为音量旋钮适合其中。关于用户输入，我不太确定。我认为这取决于您要如何控制旋钮。我认为看这`onTouchEvent(MotionEvent)`将是一个好的开始。我的猜测是无论如何你都需要重载一个类似的方法。

相关链接：

*   [http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)
*   [http://www.vogella.com/articles/AndroidGestures/article.html](http://www.vogella.com/articles/AndroidGestures/article.html)

# html - 为什么最后一个li不在位？

> ID：11169532
> 
> 赞同：0
> 
> 时间：2012-06-23T12:33:27.680
> 
> 标签：html, css, list, drop-down-menu

我正在尝试编辑导航栏，但最后一个 li 有点下降。另外，当我将鼠标悬停在上面时`English`，应该会出现其他语言的下拉菜单。请看这里：

[http://jsfiddle.net/kKqZS/1/](http://jsfiddle.net/kKqZS/1/)

是什么导致下拉问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:39:01.133

`&nbsp;`从你的 html中删除那些

工作小提琴：http: [//jsfiddle.net/surendraVsingh/kKqZS/10/](http://jsfiddle.net/surendraVsingh/kKqZS/10/)

因此，我使该下拉菜单在国家**下拉列表的****父 li****内**有一个额外的 li 。

 ****CSS 有一个名为的类`.no-js #main-nav li:hover > ul`，所以我删除了**.no-js**，因为它在 HTML 中的任何地方都没有使用，然后移动这个完整的类`#main-nav ul ul`作为它的一个好习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T12:47:43.017

这个有效：http: [//jsfiddle.net/ryAJ2/](http://jsfiddle.net/ryAJ2/)

html 代码以及用于显示嵌套 ul 的 css 选择器中存在问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T12:38:53.920

你的代码：

```
<li>
    <li class="top"><a href="http://bin.xxx/?op=change_lang&lang=english">English</a</li>
    <ul>
        <li><a href="http://bin.xxx/?op=change_lang&lang=russian">Russian</a></li>
        <li><a href="http://bin.xxx/?op=change_lang&lang=german">German</a></li>
        ...
    </ul>
</li> 
```

您不能将 li 元素嵌套在 li 中。浏览器将自动关闭 li 标签并理解您的代码，例如：

```
<li></li>
<li>English</li>
<ul>
        <li><a href="http://bin.xxx/?op=change_lang&lang=russian">Russian</a></li>
        <li><a href="http://bin.xxx/?op=change_lang&lang=german">German</a></li>
</ul> 
```****

# c# - How to call top class constructor?

> ID：11169536
> 
> 赞同：3
> 
> 时间：2012-06-23T12:33:57.993
> 
> 标签：c#, class, inheritance, xna

I hope I can explain this problem right, it's a bit confusing for me.

I have been working on a game library similar to flixel but, using C#'s XNA framework instead of Flash. Right now the current class layout is something like this.

ClxBasic -> ClxObject -> ClxSprite

Each class has a constructor and calls the constructor for the class below it. I use this code to do this.

```
namespace Test
{
    public class ClxBasic
    {
        public ClxBasic()
        {
            Constructor();
        }

        public void Constructor()
        {
            DoSomething();
        }
    }

    public class ClxObject : ClxBasic
    {
        public ClxObject() : base()
        {
            Constructor();
        }
            public void Constructor()
            {
                    DoSomething();
            }
    }

    public class ClxSprite : ClxObject
    {
        public ClxSprite() : base()
        {
            Constructor();
        }
            public void Constructor()
            {
                    DoSomething();
            }
    }
} 
```

So basically when I create a new ClxSprite it calls the ClxSprite constructor, then all the ones below it (ClxObject and ClxBasic).

I'm sure there is an easier way to do this and I am all ears.

However, my bigger issue is actually how to properly derive and override methods from the other classes.

The issue is that when creating a class that extends from ClxSprite, for example, when calling a method that was overridden from the most basic class (ClxBasic), it will only call the bottom method and not the top.

The reason I need to do this is because I have a global class which keeps control of all the objects derived from ClxBasic by adding themselves to a list in the ClxBasic constructor.

Here's some example code.

```
namespace Test
{
    public static class ClxG()
    {
        public static List<ClxBasic> GlobalObjects; //All objects will be added here by the ClxBasic constructor
            ClxSprite test = new ClxSprite();
            GlobalObjects.Add(test);
        public static Update()
        {
            foreach(ClxBasic basic in GlobalObjects)
                basic.Update(); //Calling this calls ClxBasic.Update() when it should call ClxSprite.Update()
        }
    }
} 
```

When calling basic.Update() it goes to the bottom Update, the one located in ClxBasic, despite the object being a ClxObject or ClxSprite or other derived class.

I have a limited fix as well, by changing the ClxBasic to ClxSprite in the foreach loop, you can call that classes constructor method properly. However, when making custom classes based off of the library who override a method, the lower Update is called.

However, the limit is that you can't add classes I didn't specifically plan for. For example, if I were to derive a class Player from ClxSprite and, override the Update() method, it would get added to the GlobalObjects list but, never have it's update called, the highest it will go is ClxSprite's.

The way I *want* it to work is, in Game1.cs I want to just be able to put FlxG.Update() in the Game.Update() loop and just be able to create the object and have my framework handle the rest.

I hope I've made a bit of sense, the whole thing feels like some sort of inheritance inception and kind of makes my brain hurt.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:39:03.427

To also call a base class method as part of a child class implementation, you'd do this:

```
class Base {
  public virtual void Method() {
    // ...
  }
}

class Derived : Base {
  public override void Method() {
    base.Method();
    // ....
  }
}

class Derived2 : Derived {
  public override void Method() {
    base.Method();
    // ....
  }
} 
```

But the child method is not *required* to call the base one.

Constructors, on the other hand, are always required to (ultimately) call a base constructor.

Now, if you want a base class method to *always* be called as part of some processing, you can employ the [*template method pattern*](http://en.wikipedia.org/wiki/Template_method_pattern). Basically your base class has a non-virtual method that drives an algorithm that calls virtual (or abstract) methods; which the child classes can override to create their own versions.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:37:03.280

You are properly using `base()` to call the constructors of your base classes. As for how you are defining your constructors, why is `Constructor()` a separate method, rather than the body of the different constructors? If you are only planning on calling `Constructor()` when you create a new insance of one of your classes, I would recommend moving `Constructor()` back into your actual constructors, like so:

```
namespace Test
{
    public class ClxBasic
    {
        public ClxBasic()
        {
            // Do Something
        }
    }

    public class ClxObject : ClxBasic
    {
        public ClxObject() : base()
        {
            // Do Something
        }
    }

    public class ClxSprite : ClxObject
    {
        public ClxSprite() : base()
        {
            // Do Something
        }
    }
} 
```

As for being able to call the appropriate `Update()` function, depending on the actual class of your object, you would accomplish this using the [virtual](http://msdn.microsoft.com/en-us/library/9fkccyh4) and [override](http://msdn.microsoft.com/en-us/library/ebca9ah3.aspx) keywords. You would use them like so:

```
namespace Test
{
    public class ClxBasic
    {
        // Define the base function that can be overridden
        // in subclasses.
        public virtual void Update()
        {
            // Do Some Updates
        }
    }

    public class ClxObject : ClxBasic
    {
        // We're overridiung the base function, so we
        // must mark this function as an override.
        public override void Update()
        {
            // Do Some Updates
        }
    }

    public class ClxSprite : ClxObject
    {
        // We're overridiung the base function, so we
        // must mark this function as an override.
        public override void Update()
        {
            // Do Some Updates
        }
    }
} 
```

When you call `Update()` on an object that is an instance of a class derived from `ClxBasic`, the top-level `Update()` function in that objects inheritance-chain will be called. For instance:

```
ClxBasic clxBasic = new ClxBasic();   // Calls ClxBasic.Update()
ClxBasic clxObject = new ClxObject(); // Calls ClxObject.Update()
ClxBasic clxSprite = new ClxSprite(); // Calls ClxSprite.Update() 
```

In addition, if you want your `Update()` functions to call the `Update()` function of their parent, you can use the [base keyword](http://msdn.microsoft.com/en-us/library/hfw7t1ce.aspx). For example:

```
public class ClxSprite : ClxObject
{
    // We're overridiung the base function, so we
    // must mark this function as an override.
    public override void Update()
    {
        base.Update(); // Will call ClxObject's Update() function
        // Do Some Updates
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T13:11:34.410

Based on your description, your goal seems to be to achieve polymorphic behavior among different game classes. A better solution is to define an interface that different game classes must implement. Then you can put all of your game objects in one generic container, such as an array list, and then have the master game loop iterate through the object list and invoke each object's update method the method during each overall update. I would design the classes like this:

```
interface IUpdatable {
   void doUpdate();
}

class GameClassA : IUpdatable {
   void doUpdate() { // }
}

class GameClassB : IUpdatable {
   void doUpdate() { // }
} 
```

etc.

Your goal is to achieve polymorphic behavior among objects of different classes but not necessarily to share data and common functionality. While you can achieve polymorphism through inheritance as well, it is better achieved in this case through simple interfaces and composition.

# php - 负调整大小的图像

> ID：11169540
> 
> 赞同：0
> 
> 时间：2012-06-23T12:34:31.133
> 
> 标签：php

这是我用来调整图像大小的脚本。

我的问题是这个脚本会生成负片（比如负片**[只有 .png 文件]**）。哪里/什么问题？

我使用 GD 库重新调整图像大小，但得到了相同的结果。

```
 $dir = "../images/sliderimages/";
       $photo = $_FILES['slid_image_upload']['name'];
       $tmp_name = $_FILES['slid_image_upload']['tmp_name'];
       $filename = $dir.$photo;
   $dir_thm = "../images/thm_sliderimages/";
   $thm_filename = $dir_thm.'thm_'.$photo;

       /************Resizing the image***************/

       $size = getimagesize($tmp_name);

       $width = $size[0];

       $height = $size[1];

       $newheight = 200;
       $newwidth = 420;

   $newheight_thm = 50;
       $newwidth_thm = 80;

       $tmp=imagecreatetruecolor($newwidth,$newheight);
       $tmp_thm=imagecreatetruecolor($newwidth_thm, $newheight_thm);
       if($size[2] == IMAGETYPE_GIF)

       {

        $src = imagecreatefromgif($tmp_name);

        imagecopyresampled($tmp,$src, 0,0,0,0, $newwidth, $newheight, $width, $height);
        imagecopyresampled($tmp_thm, $src, 0,0,0,0, $newwidth_thm, $newheight_thm, $width, $height);
        imagegif($tmp,$filename,100);
        imagegif($tmp_thm,$thm_filename,100);

       }

       elseif($size[2] == IMAGETYPE_JPEG)

       {

        $src = imagecreatefromjpeg($tmp_name);

        imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);
        imagecopyresampled($tmp_thm, $src, 0,0,0,0, $newwidth_thm, $newheight_thm, $width, $height);
        imagejpeg($tmp,$filename,100);
        imagejpeg($tmp_thm,$thm_filename,100);
       }

       elseif($size[2] == IMAGETYPE_PNG)

       {

        $src = imagecreatefrompng($tmp_name);

        imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);
        imagecopyresampled($tmp_thm, $src, 0,0,0,0, $newwidth_thm, $newheight_thm, $width, $height);
        imagepng($tmp,$filename,9);
        imagepng($tmp_thm,$thm_filename,9);

       }
       imagedestroy($src);

       imagedestroy($tmp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:52:10.230

我建议您尝试在另一台服务器\本地机器上编写代码，以确保这不是当前的库安装问题。

# delphi - 我无法将 Xml 发布到 Linkedin Share API

> ID：11169541
> 
> 赞同：0
> 
> 时间：2012-06-23T12:34:41.747
> 
> 标签：delphi, linkedin, indy

我正在使用 Delphi 2010、Indy 10.5.8（svn 版本）和来自chuckbeasley 的 oAuth.pas。我能够使用应用程序密钥和应用程序秘密收集令牌，使用网页授权令牌并访问最终令牌。现在我必须使用 Linkedin 的 Share API 发布状态。我收到未经授权的回复。我的请求和响应如下。要求，

```
 POST /v1/people/~/shares HTTP/1.0
Content-Encoding: utf-8
Content-Type: text/xml; charset=us-ascii
Content-Length: 999
Authorization: OAuth oauth_consumer_key="xxx",oauth_signature_method="HMAC-SHA1",oauth_timestamp="1340438599",oauth_nonce="BB4C78E0A6EB452BEE0FAA2C3F921FC4",oauth_version="1.0",oauth_token="xxx",oauth_signature="Pz8%2FPz8%2FPz9ePzkxPyc%2FDD82Pz8%3D"
Host: api.linkedin.com
Accept: text/html, */*
Accept-Encoding: identity
User-Agent: Mozilla/3.0 (compatible; Indy Library)

%3C%3Fxml+version=%25221.0%2522%2520encoding%253D%2522UTF-8%2522%253F%253E%253Cshare%253E%253Ccomment%253E83%2525%2520of%2520employers%2520will%2520use%2520social%2520media%2520to%2520hire%253A%252078%2525%2520LinkedIn%252C%252055%2525%2520Facebook%252C%252045%2525%2520Twitter%2520%255BSF%2520Biz%2520Times%255D%2520http%253A%252F%252Fbit.ly%252FcCpeOD%253C%252Fcomment%253E%253Ccontent%253E%253Ctitle%253ESurvey%253A%2520Social%2520networks%2520top%2520hiring%2520tool%2520-%2520San%2520Francisco%2520Business%2520Times%253C%252Ftitle%253E%253Csubmitted-url%253Ehttp%253A%252F%252Fsanfrancisco.bizjournals.com%252Fsanfrancisco%252Fstories%252F2010%252F06%252F28%252Fdaily34.html%253C%252Fsubmitted-url%253E%253Csubmitted-image-url%253Ehttp%253A%252F%252Fimages.bizjournals.com%252Ftravel%252Fcityscapes%252Fthumbs%252Fsm_sanfrancisco.jpg%253C%252Fsubmitted-image-url%253E%253C%252Fcontent%253E%253Cvisibility%253E%253Ccode%253Eanyone%253C%252Fcode%253E%253C%252Fvisibility%253E%253C%252Fshare%253E 
```

回复，

```
 HTTP/1.1 401 Unauthorized
Server: Apache-Coyote/1.1
x-li-request-id: K14SWRPEPL
Date: Sat, 23 Jun 2012 08:07:17 GMT
Vary: *
x-li-format: xml
Content-Type: text/xml;charset=UTF-8
Content-Length: 341
Connection: keep-alive

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<error>
  <status>401</status>
  <timestamp>1340438838344</timestamp>
  <request-id>K14SWRPEPL</request-id>
  <error-code>0</error-code>
  <message>[unauthorized]. OAU:xxx|nnnnn|*01|*01:1340438599:Pz8/Pz8/Pz9ePzkxPyc/DD82Pz8=</message>
</error> 
```

请帮忙。

问候，

维杰什奈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:02:08.193

我无法评论您`Authentication`标头的内容，但您的 HTTP 请求的其余部分肯定不正确，这告诉我您没有`TIdHTTP.Post()`正确使用该方法。特别是，XML 已经过两次 url 编码（只有 Indy 会做其中之一），并且`Content-Encoding`标头是错误的。

我怀疑您犯了常见的新手错误，即使用 的`TStrings`重载版本发布 XML `TIdHTTP.Post()`，并预先对 XML 进行预编码。这些都行不通。您必须改用`TStream`重载版本，并且根本不对 XML 进行预编码。

正确的请求应该更像这样：

```
POST /v1/people/~/shares HTTP/1.0
Content-Type: text/xml; charset=utf-8
Content-Length: 571
Authorization: OAuth oauth_consumer_key="xxx",oauth_signature_method="HMAC-SHA1",oauth_timestamp="1340438599",oauth_nonce="BB4C78E0A6EB452BEE0FAA2C3F921FC4",oauth_version="1.0",oauth_token="xxx",oauth_signature="Pz8%2FPz8%2FPz9ePzkxPyc%2FDD82Pz8%3D"
Host: api.linkedin.com
Accept: text/html, */*
Accept-Encoding: identity
User-Agent: Mozilla/3.0 (compatible; Indy Library)

<?xml version="1.0" encoding="UTF-8"?><share><comment>83% of employers will use social media to hire: 78% LinkedIn, 55% Facebook, 45% Twitter [SF Biz Times] http://bit.ly/cCpeOD</comment><content><title>Survey: Social networks top hiring tool - San Francisco Business Times</title><submitted-url>http://sanfrancisco.bizjournals.com/sanfrancisco/stories/2010/06/28/daily34.html</submitted-url><submitted-image-url>http://images.bizjournals.com/travel/cityscapes/thumbs/sm_sanfrancisco.jpg</submitted-image-url></content><visibility><code>anyone</code></visibility></share> 
```

生成该请求的代码应如下所示：

```
var
  PostData: TMemoryStream;
begin
  PostData := TMemoryStream.Create;
  try
    WriteStringToStream(PostData, '<?xml version="1.0" encoding="UTF-8"?><share><comment>83% of employers will use social media to hire: 78% LinkedIn, 55% Facebook, 45% Twitter [SF Biz Times] http://bit.ly/cCpeOD</comment><content><title>Survey: Social networks top hiring tool - San Francisco Business Times</title><submitted-url>http://sanfrancisco.bizjournals.com/sanfrancisco/stories/2010/06/28/daily34.html</submitted-url><submitted-image-url>http://images.bizjournals.com/travel/cityscapes/thumbs/sm_sanfrancisco.jpg</submitted-image-url></content><visibility><code>anyone</code></visibility></share>', IndyUTF8Encoding);
    PostData.Position := 0;
    IdHTTP1.Request.ContentType := 'text/xml';
    IdHTTP1.Request.Charset := 'utf-8';
    IdHTTP1.Request.CustomHeaders.Values['Authorization'] := 'OAuth oauth_consumer_key="xxx",oauth_signature_method="HMAC-SHA1",oauth_timestamp="1340438599",oauth_nonce="BB4C78E0A6EB452BEE0FAA2C3F921FC4",oauth_version="1.0",oauth_token="xxx",oauth_signature="Pz8%2FPz8%2FPz9ePzkxPyc%2FDD82Pz8%3D"';
    IdHTTP1.Post('http://api.linkedin.com/v1/people/~/shares', PostData);
  finally
    PostData.Free;
  end; 
```

# haskell - 如何序列化/反序列化哈希图？

> ID：11169542
> 
> 赞同：10
> 
> 时间：2012-06-23T12:35:03.173
> 
> 标签：haskell, serialization

我有一个包含数百万个条目的大型哈希图，我想将它持久化到磁盘，这样当再次从磁盘读取它时，我没有将键值对再次插入映射的开销。

我正在尝试使用谷物库来执行此操作，但似乎[HashMap](http://hackage.haskell.org/package/unordered-containers-0.2.1.0)数据类型需要派生通用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T16:36:41.863

您也许可以使用[独立派生](https://downloads.haskell.org/~ghc/8.0-latest/docs/html/users_guide/glasgow_exts.html#stand-alone-deriving-declarations)来`Generic`为`HashMap`. 您可能会收到有关[孤儿实例](https://downloads.haskell.org/~ghc/8.0-latest/docs/html/users_guide/separate_compilation.html#orphan-modules-and-instance-declarations)的警告，但您也可能不在乎 :) 无论如何，我还没有尝试过，但它可能值得一试......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:46:33.180

我不确定使用泛型是否是实现高性能的最佳方法。我最好的选择实际上是为 Serializable 编写自己的实例，如下所示：

```
instance (Serializable a) => Serializable (HashMap a) where
  ... 
```

为避免创建孤立实例，您可以使用 newtype 技巧：

```
newtype SerializableHashMap a = SerializableHashMap { toHashMap :: HashMap a }
instance (Serializable a) => SerializableHashMap a where
  ... 
```

问题是如何定义`...`？

在您实际尝试实施和对可能的解决方案进行基准测试之前，没有明确的答案。

一种可能的解决方案是使用`toList`/`fromList`函数并存储/读取`HashMap`.

另一个（类似于使用泛型）是基于内部 HashMap 结构编写直接序列化。鉴于您实际上并没有导出内部结构，这仅适用于泛型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T06:15:33.193

目前，在不修改 HashMap 库本身的情况下，无法使 HashMap 可序列化。

正如@mergeconflict 的回答所描述的那样，使用独立派生无法使 Data.HashMap 成为 Generic 的实例（用于谷物），因为 Data.HashMap 不会导出其所有构造函数（这是 GHC 的要求）。

因此，序列化 HashMap 的唯一解决方案似乎是使用 toList/fromList 接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-08T09:41:09.660

如果您可以使用二进制，则可以使用 binary-orphans 为无序容器提供实例。由于一些阴谋集团的冲突，我无法安装二进制孤儿，但只是抢走了我需要的部分，例如：

```
{-# LANGUAGE CPP           #-}
{-# LANGUAGE DeriveGeneric #-}

module Bin where

import           Data.Binary
import           Data.ByteString.Lazy.Internal
import           Data.Hashable                 (Hashable)
import qualified Data.HashMap.Strict           as M
import qualified Data.Text                     as T

#if !(MIN_VERSION_text(1,2,1))
import           Data.Text.Binary              ()
#endif

instance  (Hashable k, Eq k, Binary k, Binary v) => Binary (M.HashMap k v) where
  get = fmap M.fromList get
  put = put . M.toList

-- Note: plain `encode M.fromList []` without type annotations won't work
encodeModel :: M.HashMap T.Text Int -> ByteString
encodeModel m =
  encode m 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-12T16:26:05.683

CerealPlus 包为严格的 HashMap 提供了 Serialize 的定义。

[http://hackage.haskell.org/package/cereal-plus](http://hackage.haskell.org/package/cereal-plus)

# sql - CTE、子查询、临时表或表变量之间是否存在性能差异？

> ID：11169550
> 
> 赞同：265
> 
> 时间：2012-06-23T12:36:14.007
> 
> 标签：sql, sql-server, tsql, subquery, common-table-expression

在这个优秀的[SO question](https://stackoverflow.com/questions/706972/difference-between-cte-and-subquery)`CTE`中，讨论了和之间`sub-queries`的差异。

我想具体问一下：

在什么情况下，以下每种情况更有效/更快？

*   CTE
*   子查询
*   临时表
*   表变量

传统上，我`temp tables`在开发中使用了很多`stored procedures`——因为它们看起来比许多相互交织的子查询更具可读性。

`Non-recursive CTE`s 很好地封装了数据集，并且可读性很好，但是在特定情况下可以说它们总是会表现得更好吗？还是必须总是摆弄不同的选项才能找到最有效的解决方案？

* * *

**编辑**

最近有人告诉我，就效率而言，临时表是一个不错的首选，因为它们具有相关的直方图，即统计信息。

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2012-06-23T13:32:05.577

SQL 是一种声明性语言，而不是过程性语言。也就是说，您构造一个 SQL 语句来描述您想要的结果。您没有告诉 SQL 引擎*如何*完成这项工作。

作为一般规则，最好让 SQL 引擎和 SQL 优化器找到最佳查询计划。开发 SQL 引擎需要花费很多人年的努力，所以让工程师去做他们知道该怎么做的事情。

当然，也有查询计划不是最优的情况。然后你想使用查询提示、重组查询、更新统计信息、使用临时表、添加索引等等以获得更好的性能。

至于你的问题。CTE 和子查询的性能理论上应该是相同的，因为它们都向查询优化器提供相同的信息。一个不同之处在于，使用不止一次的 CTE 可以很容易地识别和计算一次。然后可以多次存储和读取结果。不幸的是，SQL Server 似乎没有利用这种基本的优化方法（您可以将这种常见的子查询消除称为消除）。

临时表是另一回事，因为您提供了有关如何运行查询的更多指导。一个主要区别是优化器可以使用临时表中的统计信息来建立其查询计划。这可以带来性能提升。此外，如果您有一个多次使用的复杂 CTE（子查询），则将其存储在临时表中通常会提高性能。查询只执行一次。

您的问题的答案是您需要尝试获得您期望的性能，特别是对于定期运行的复杂查询。在理想情况下，查询优化器会找到完美的执行路径。尽管它经常这样做，但您也许能够找到一种获得更好性能的方法。

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-06-23T15:55:53.093

没有规则。我发现 CTE 更具可读性，*除非*它们表现出一些性能问题，否则我会使用它们，在这种情况下，我会调查实际问题，而不是猜测 CTE 是问题并尝试使用不同的方法重新编写它。这个问题通常比我选择用查询声明我的意图的方式更多。

在某些情况下，您可以解开 CTE 或删除子查询并用#temp 表替换它们并减少持续时间。这可能是由于各种原因造成的，例如过时的统计信息、甚至无法获得准确的统计信息（例如加入表值函数）、并行性，甚至由于查询的复杂性而无法生成最佳计划（在这种情况下，分解它可能会给优化器一个战斗的机会）。但在某些情况下，创建#temp 表所涉及的 I/O 可能会超过其他性能方面，这可能会使使用 CTE 的特定计划形状不那么有吸引力。

老实说，有太多变量无法为您的问题提供“正确”的答案。没有可预测的方法可以知道查询何时可能倾向于一种或另一种方法 - 只要知道理论上，CTE 或单个子查询的相同语义*应该*执行完全相同。我认为，如果您提出一些不正确的情况，您的问题会更有价值-可能是您发现了优化器中的限制（或发现了已知限制），或者您的查询在语义上不等效或者那个包含阻碍优化的元素。

因此，我建议以对您来说最自然的方式编写查询，并且仅在您发现优化器遇到的实际性能问题时才会偏离。我个人对它们进行 CTE 排名，然后是子查询，#temp 表是最后的手段。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-06-25T01:03:15.573

#temp 是物质化的，而 CTE 不是。

CTE 只是语法，所以理论上它只是一个子查询。它被执行。#temp 已实现。因此，执行多次的连接中昂贵的 CTE 在#temp 中可能会更好。另一方面，如果它是一个简单的评估，但没有执行几次，那么不值得#temp 的开销。

SO上有一些人不喜欢表变量，但我喜欢它们，因为它们比#temp 更具体化并且创建速度更快。与表变量相比，查询优化器有时使用#temp 做得更好。

在 #temp 或表变量上创建 PK 的能力为查询优化器提供了比 CTE 更多的信息（因为您不能在 CTE 上声明 PK）。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-06-27T09:50:43.393

我认为只有两件事让使用# Temp Table 而不是 CTE 总是更可取的是：

1.  您不能在 CTE 上放置主键，因此 CTE 访问的数据必须遍历 CTE 表中的每个索引，而不是仅访问临时表上的 PK 或索引。

2.  因为您不能向 CTE 添加约束、索引和主键，所以它们更容易出现错误和不良数据。

* * *

-onedaywhen昨天

这是一个示例，其中#table 约束可以防止坏数据，而 CTE 的情况并非如此

```
DECLARE @BadData TABLE ( 
                       ThisID int
                     , ThatID int );
INSERT INTO @BadData
       ( ThisID
       , ThatID
       ) 
VALUES
       ( 1, 1 ),
       ( 1, 2 ),
       ( 2, 2 ),
       ( 1, 1 );

IF OBJECT_ID('tempdb..#This') IS NOT NULL
    DROP TABLE #This;
CREATE TABLE #This ( 
             ThisID int NOT NULL
           , ThatID int NOT NULL
                        UNIQUE(ThisID, ThatID) );
INSERT INTO #This
SELECT * FROM @BadData;
WITH This_CTE
     AS (SELECT *
           FROM @BadData)
     SELECT *
       FROM This_CTE; 
```

# database - 这里应该使用一对一的表关系吗？

> ID：11169552
> 
> 赞同：0
> 
> 时间：2012-06-23T12:36:17.517
> 
> 标签：database, database-design, database-schema, one-to-one

对于两个用户之间的简单请求/操作过程，我有以下列：

```
request_type
request_to
request_by
request_msg
request_time 
```

和

```
action_type
action_by
action_msg
action_time 
```

来自[何时我们需要在数据库设计中使用 1-to-1 关系？](https://stackoverflow.com/questions/6352324/when-we-need-to-use-1-to-1-relationship-in-database-design)表明我的示例不符合此处接受的任何分区原因。但是，我仍然想知道这两组列是否应该属于同一个表，因为：

*   该过程本质上是两个行插入，但后者必须使用更新来应用，因为表包含两组列
*   每个集合都无法更新，因此两个表将有助于拒绝更新权限
*   操作未决时，表的一半是空字段
*   虽然直接相关，但它们仍然感觉像是两个语义不同的用户操作

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:06:49.443

您可以有两张表，一张用于请求，一张用于操作。

```
request
=======
request_id (primary key identity(1,1))
request_type (fk to type table)
request_to (fk to user table)
request_by (fk to user table)
request_msg 
request_time (default getdate())

action
======
action_id (primary key identity(1,1))
request_id (fk to request table)
action_type (fk to type table)
action_by (fk to user table)
action_msg 
action_time (default getdate()) 
```

# javascript - 如何设置拖动元素的样式

> ID：11169554
> 
> 赞同：12
> 
> 时间：2012-06-23T12:36:44.770
> 
> 标签：javascript, html, drag-and-drop, dom-events

我可以使用一些事件来处理拖放：

[https://developer.mozilla.org/en/DragDrop/Drag_and_Drop](https://developer.mozilla.org/en/DragDrop/Drag_and_Drop)

有一个`drag`事件，在拖动元素期间触发。我可以控制源元素样式或目标可放置容器，但如何设置浏览器创建的“幽灵”元素的样式？

当元素位于不可拖动区域上方时，我想从中删除“禁用”图标，并将其替换为“光标移动”图标

这是我到目前为止所拥有的：

[http://jsfiddle.net/YkaCM/](http://jsfiddle.net/YkaCM/)

![在此处输入图像描述](../Images/6e2ebcaa65ed27514b48fd2c4e075c7e.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-23T12:52:16.103

您不能直接设置它的样式，因为它是拖动开始时元素外观的位图/副本：

[http://jsfiddle.net/2EvGP/](http://jsfiddle.net/2EvGP/)

**编辑：**

实际上，您可以通过在拖动开始时短暂更改元素的样式来作弊：http: [//jsfiddle.net/LULbV/](http://jsfiddle.net/LULbV/)

```
$('#draggable').bind('dragstart', function (e){

  [Set style here]

  setTimeout(function(){
    [Reset style here]
  }, 1);

  ...

}); 
```

这在 Chrome 19 中完美运行，并根据您在 Firefox 13 中的拖动方式显示样式更改。您需要在放置时重置拖动元素的样式。

（注意我有一台非常快的电脑，所以我不确定这个 hack 是否仍然适用于慢速机器）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T12:40:56.433

不太确定其他浏览器，但是该`dataTransfer`对象包含一个名为`mozCursor`. 这允许您在拖动状态下更改光标，但这是 Mozilla 属性。

[https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/mozCursor](https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/mozCursor)

可以在以下位置找到使用此功能的示例，设置更改为`dragstart`（设置为使用默认的“箭头”光标）、`dragover`（设置为使用自动拖动光标（带副本的箭头））和`dragleave`（重置为使用默认的“箭头” ' 光标）：

[http://jsfiddle.net/YkaCM/4/](http://jsfiddle.net/YkaCM/4/)

* * *

尝试以下问题的答案：
[Javascript：如何在网站上的拖放操作期间设置光标？](https://stackoverflow.com/questions/6079346/javascript-how-can-i-set-the-cursor-during-a-drag-drop-operation-on-a-website)

* * *

使用以下内容更新了您的拖拽：

```
$('#droppable').bind('dragover', function (e) {
  $(this).addClass('over'); // new

  ... 
```

[http://jsfiddle.net/YkaCM/1/](http://jsfiddle.net/YkaCM/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T12:41:03.223

基本上，您想将特定样式应用于#droppable 的儿子新创建的元素？

```
#droppable div { here your code } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-24T18:12:35.003

仅使用 CSS 的替代方法是`:active`将元素的伪类样式设置为所需的拖动样式。将基于此状态创建拖动的副本。

但是，原始元素将保留这种样式，因为浏览器似乎会保留它`:active`直到删除。为了避免这种情况，我们可以在运行时间很短的动画中指定样式。足以让浏览器复制样式但不能太短。对于 Chrome、Safari 和 Firefox，0.1s 似乎足够了。

[https://jsfiddle.net/mLsw5ajr/](https://jsfiddle.net/mLsw5ajr/)

```
$('#draggable').bind('dragstart', function(e) {

  // http://stackoverflow.com/questions/2419749/get-selected-elements-outer-html
  var stuff = $(this).clone().wrap('<div></div>').parent().html();

  e.originalEvent.dataTransfer.effectAllowed = 'copy';
  e.originalEvent.dataTransfer.setData('stuff', stuff);
});

$('#draggable').bind('drag', function(e) {
  // here I want to style the ghost element, not the source...    
});

$('#droppable').bind('dragover', function(e) {

  if (e.originalEvent.preventDefault)
    e.preventDefault();

  e.originalEvent.dataTransfer.dropEffect = 'copy';
  return false;
});

$('#droppable').bind('dragenter', function(e) {
  $(this).addClass('over');
});

$('#droppable').bind('dragleave', function(e) {
  $(this).removeClass('over');
});

$('#droppable').bind('drop', function(e) {

  if (e.originalEvent.stopPropagation)
    e.originalEvent.stopPropagation();

  var stuff = $(e.originalEvent.dataTransfer.getData('stuff'));
  stuff.appendTo(this);
  return false;
});
```

```
#draggable,
#droppable {
  background: #ccc;
  color: #fff;
  padding: 10px;
  margin: 10px 0 100px;
}

#draggable:active {
  animation: drag_style .1s;
}

#droppable.over {
  background: #000;
}

@keyframes drag_style {
  0% {
    background-color: #fc0;
    color: #000;
  }
  99% {
    background-color: #fc0;
    color: #000;
  }
  100% {
    background-color: #ccc;
  }
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="draggable" draggable="true">
  <p>Drag me to my target</p>
</div>

<div id="droppable">
  <p>Drop me</p>
</div>
```

我在 Firefox 中发现的一个问题是，`:active`如果没有由另一个元素触发的事件（如 drop），则保留该元素。为了解决这个问题，我们可以触发元素外部的点击。

# android - Android - 创建新的 SIM 卡联系人

> ID：11169555
> 
> 赞同：2
> 
> 时间：2012-06-23T12:36:51.507
> 
> 标签：android, android-contacts, contact, telephony, contactscontract

我正在尝试将单个联系人写入 SIM 卡。

到目前为止，我已经浏览了这些问题： [这个、](https://stackoverflow.com/questions/10345279/android-adding-new-contacts-in-sim) [这个、](https://stackoverflow.com/questions/4075694/inserting-contacts-in-android-2-2) [这个](https://stackoverflow.com/questions/6274640/insert-contact-to-sim-from-android) [和这个。](https://stackoverflow.com/questions/3128199/android-how-to-add-a-contact-to-the-sim-using-the-sdk)

我已经获得了[这个不错的库](http://code.google.com/p/simsalabim/)的来源，但我仍然没有看到从应用程序导出的联系人。更糟糕的是，我已经填满了我的一张 SIM 卡，没有任何可能清除它，所以我不得不再买一张。

没有任何帮助。

这是我的代码：

```
Uri simUri = Uri.parse("content://icc/adn");
OR RawContacts.CONTENT_URI;

SIM_ACCOUNT_NAME = "vnd.sec.contact.sim";
SIM_ACCOUNT_TYPE = "vnd.sec.contact.sim";

public static final void exportToSim(Context context,
            List<Contact> listContacts) {
        ArrayList<ContentProviderOperation> operations = new ArrayList<ContentProviderOperation>();

        for (Contact contact : listContacts) {
            if (contact.getPhones() == null)
                continue;
            if (contact.getPhones().isEmpty())
                continue;
            /* Create empty contact */
            int backReference = operations.size();
            operations.add(ContentProviderOperation.newInsert(simUri)
                    .withValue(RawContacts.ACCOUNT_TYPE, SIM_ACCOUNT_TYPE)
                    .withValue(RawContacts.ACCOUNT_NAME, SIM_ACCOUNT_NAME)
                    .build());
            /* Add name Data */
            operations
                    .add(ContentProviderOperation
                            .newInsert(DATA_URI)
                            .withValueBackReference(Data.RAW_CONTACT_ID,
                                    backReference)
                            .withValue(Data.MIMETYPE,
                                    StructuredName.CONTENT_ITEM_TYPE)
                            .withValue(StructuredName.DISPLAY_NAME,
                                    contact.displayName).build());
            /* Add phone data */
            for (Phone phone : contact.getPhones()) {
                operations.add(ContentProviderOperation
                        .newInsert(DATA_URI)
                        .withValueBackReference(Data.RAW_CONTACT_ID,
                                backReference)
                        .withValue(Data.MIMETYPE,
                                CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                        .withValue(CommonDataKinds.Phone.NUMBER, phone.number)
                        .withValue(CommonDataKinds.Phone.TYPE,
                                CommonDataKinds.Phone.TYPE_MOBILE).build());
            }
        }

        try {
            context.getContentResolver().applyBatch(ContactsContract.AUTHORITY,
                    operations);
        } catch (RemoteException e) {
            Log.e(e.getClass().getSimpleName(), e.getMessage());
        } catch (OperationApplicationException e) {
            Log.e(e.getClass().getSimpleName(), e.getMessage());
        }
    } 
```

在 simUri 等于 Uri.parse("content://icc/adn") 的情况下，应用程序因 UnsupportedOperationException 而崩溃，

在 simUri 等于 RawContacts.CONTENT_URI 的情况下，联系人被写入 RawCts 表中，并且它被标记为来自 sim 的联系人，但重新加载后我在任何地方都看不到联系人。看来，它没有直接写入 SIM 卡。

SIM_ACCOUNT_TYPE/NAME 的值反映了来自 cts 的相同帐户类型/名称对，由系统应用程序导出。

应用的清单包含两个权限：READ 和 WRITE _CONTACTS

请帮忙。我应该使用什么代码将联系人正确写入 SIM 卡？

感谢任何回应的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T19:23:05.783

**使用以下代码创建新的 SIM 卡联系人**

```
void insertSIMContact() {

Uri simUri = Uri.parse("content://icc/adn");

ContentValues values = new ContentValues();
values.put("tag","Mitesh");
values.put("number", "1234");

getContentResolver().insert(simUri, values);
getContentResolver().notifyChange(simUri, null);

} 
```

# javascript - 在 Android 上使用 PhoneGap 进行地理定位仅适用于 index.html

> ID：11169561
> 
> 赞同：1
> 
> 时间：2012-06-23T12:37:50.113
> 
> 标签：javascript, android, html, cordova, geolocation

我正在尝试使用 PhoneGap API doc 使用地理位置，地理位置适用于 index.html，但是当我尝试在不同页面中使用相同的功能时，它不起作用。

[http://docs.phonegap.com/en/1.8.1/cordova_geolocation_geolocation.md.html#Geolocation](http://docs.phonegap.com/en/1.8.1/cordova_geolocation_geolocation.md.html#Geolocation)

这是我正在使用的 JS。

这是我用来访问其他页面的按钮。

我也在使用 jQuery Mobile。

```
 <a href="test.html" data-theme="b" data-icon="plus">Add category</a></li> 
```

这是test.html的头

```
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title></title>
<link rel="stylesheet" href="styles/jquery.mobile-1.1.0.min.css" />
<link rel="stylesheet" href="styles/jquery.mobile.structure-1.1.0.min.css" />
<link rel="stylesheet" href="styles/jquery.mobile.theme-1.1.0.min.css" />
<link rel="stylesheet" href="styles/my.css" />
<script src="scripts/jquery-1.7.2.min.js"></script>
<script src="scripts/jquery.mobile-1.1.0.min.js"></script>
<script src="scripts/cordova-1.8.1.js"></script>
<script>

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    var watchID = null;

    // Cordova is ready
    //
    function onDeviceReady() {
        // Throw an error if no update is received every 30 seconds
        var options = { timeout: 10000 };
        watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
    }

    // onSuccess Geolocation
    //
    function onSuccess(position) {
        var element = document.getElementById('geolocation');
        element.innerHTML = 'Latitude: ' + position.coords.latitude + '<br />' +
                        'Longitude: ' + position.coords.longitude + '<br />' +
                        '<hr />' + element.innerHTML;
    }

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: ' + error.code + '\n' +
          'message: ' + error.message + '\n');
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:39:53.097

首先在 Android Manifest 中授予权限：

```
 android.permission.ACCESS_FINE_LOCATION
      android.permission.ACCESS_LOCATION_EXTRA_COMMANDS
      android.permission.ACCESS_COARSE_LOCATION 
```

然后复制您的cordova-1.8.1.js并在资产的www子文件夹中创建index.html，然后将cordova-1.8.1.jar复制到libs，然后使用cordova-1.8.1.jar配置构建路径。

然后创建 res-->xml 并复制插件（从之前下载的 PhoneGap 1.8.1）。

然后运行应用程序。你肯定会得到输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:02:50.030

问题是我没有将 cordova.jar 文件加载到我的项目中，这就是它不起作用的原因

# javascript - jQuery 模糊事件在 Chrome 中触发了两次

> ID：11169562
> 
> 赞同：6
> 
> 时间：2012-06-23T12:37:54.237
> 
> 标签：javascript, jquery, google-chrome

我创建了一个带有输入字段的简单“无限”表单。每次聚焦一个空输入时，它都会创建一个新输入，并且在空输入字段模糊时，该字段被删除。

在此处查看[示例](http://jsfiddle.net/EPxkh/)

我使用以下代码来实现这一切：

```
var $input = $('<div/>').html( $('<input/>').addClass('value') );
$('form').append( $input.clone() );

$('form').on( 'focus', 'input.value', function(e) {

    // Add new input if the focused one is empty
    if(!$.trim(this.value).length) {
        $('form').append( $input.clone() );
    }

}).on( 'blur', 'input.value', function(e) {
    var $this = $(this);

    if( !$.trim(this.value).length ) {
        console.log('REMOVING INPUT');
        $this.parent().remove();
    } else {
        $this.attr('name', 'item-'+$this.val());
    }

}); 
```

然而问题是，在 Chrome 中，`blur`当我切换到另一个应用程序 ( `⌘``tab`) 时，该事件会被触发两次。这会产生错误，因为无法删除节点，因为它已经消失了：

```
Uncaught Error: NOT_FOUND_ERR: DOM Exception 8 
```

Firefox 似乎工作正常。

那么为什么`blur`事件会触发两次，我该如何防止这种情况发生呢？

**编辑**- 尝试了[这个问题](https://stackoverflow.com/questions/9649966/chrome-maybe-safari-fires-blur-twice-on-input-fields-when-browser-loses-foc)的答案，但没有运气。仍然在 Chrome 中收到错误消息，我做错了什么？

[查看更新的小提琴](http://jsfiddle.net/EPxkh/3/)

有没有办法检查元素是否仍然存在？因为第二次`blur`触发节点被删除。`$(this).length`仍然是非零的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T15:43:23.417

这看起来像 Blink 中的一个错误，Chromium 项目页面上有一个错误报告： [http ://code.google.com/p/chromium/issues/detail?id=253253](http://code.google.com/p/chromium/issues/detail?id=253253)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:44:48.037

请检查此小提琴是否具有您需要的行为， [http://jsfiddle.net/EPxkh/8/](http://jsfiddle.net/EPxkh/8/)

[http://www.quirksmode.org/js/introevents.html](http://www.quirksmode.org/js/introevents.html)

[http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

[http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html](http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html)

# php - 每当生成一个 php 文件时，PHP 都会在 div 框中包含一个 php 文件

> ID：11169565
> 
> 赞同：0
> 
> 时间：2012-06-23T12:39:02.243
> 
> 标签：php

每当通过 form.php 文件生成一个 php 文件时，我都想在 div 框中包含一个 php 文件自动生成新的 div 框，这是我需要改进和修复的代码

```
<?php
$dir=opendir('.') or die ('Cannot open directory');
$file=readdir($dir);
for($j=1; $j < 13; $j++) :
    print '<div style="float:left; width:100px">';
    if(preg_match("/php$/", $file)){
            include($file);
    }
    print '</div>';
    if($j%6==0) print '<div style="clear:both;></div>';
endfor; 
?> 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:51:07.337

您可以使用`scandir();`

这是代码：

```
<?php
$dir    = 'folder/';
$files = scandir($dir);
$count=2;
foreach($files as $file){
    $count++;
    echo '<div style="float:left; width:100px">';
    if(strpos($file,".php")){
        include($dir.$file);
    }
    echo '</div>';
    if($count==6){echo'<div style="clear:both;></div>';}
}
?> 
```

如果您仍有困惑，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T05:39:50.573

或更简单：

```
foreach(glob(dirname(__FILE__)."/*.php") as $i => $file) {
  echo "<div style='float:left; width:100px'>";
  include_once($file);
  echo "</div>";
  if($i%6==0) {
    echo "<div style=\"clear:both;\"></div>";
  }

); 
```

# objective-c - Objective C - 我的代码没有看到声明的@property - 在类型的对象中找不到属性

> ID：11169570
> 
> 赞同：2
> 
> 时间：2012-06-23T12:39:41.330
> 
> 标签：objective-c, xcode, properties

我是 ObjectiveC 和 Xcode 的新手，我有一个奇怪的行为：

这是 Packet 类标头：Packet.h

```
#import <Foundation/Foundation.h>

@interface Packet : NSObject
{
    short index;
    NSData *packetData;
    short totalChunks;
}

@property (nonatomic) short index;
@property (strong, nonatomic) NSData *packetData;
@property (nonatomic) short totalChunks;

@end 
```

这是 Packet.m

```
#import "Packet.h"

@implementation Packet

@synthesize index;
@synthesize packetData;
@synthesize totalChunks;

-(id)init 
{
    self = [super init];
    return self;
}

@end 
```

问题是我不能使用 getter 和 setter，尽管在我看来属性已正确声明和合成！

例如：

```
#import "TransferManager.h"

@implementation TransferManager

-(void)sendAckPacket
{
    Packet *packet = [[Packet alloc] init];
    packet.index; //ERROR HERE: Property not found on object of type Packet *

}

@end 
```

我知道没有附加TransferManager.h，因为我不想写无用的东西，但它会导入“Packet.h”。否则我应该在初始化 *packet 时出错。

我被卡住了......有什么帮助吗？:)

# ios - Childbrowser ＋ Cordova 1.8.1 iPhone4S(iOS5.1)问题

> ID：11169573
> 
> 赞同：0
> 
> 时间：2012-06-23T12:40:05.563
> 
> 标签：ios, xcode, cordova, phonegap-plugins

我在 xcode 4.3.3 中使用 Cordova 1.8.1 并尝试将 ChildBrowser 插件添加到我的 phonegap 应用程序中。我正在使用的 ChildBrowser 插件在[这里](https://github.com/alunny/ChildBrowser)，我认为它是 ChildBrowser 的最新版本，我按照[这里](http://blog.digitalbackcountry.com/2012/03/installing-the-childbrowser-plugin-for-ios-with-phonegapcordova-1-5/)的教程制作确保它适用于 iOS Simulator 5.1，但无法打开链接。

这是我的示例 index.html 代码....

```
<script type="text/javascript" charset="utf-8" src="childbrowser.js"></script>
<script type="text/javascript">
var childbrowser;

function onBodyLoad() {
  document.addEventListener("deviceready", onDeviceReady, false);

}

function onDeviceReady() {
  navigator.notification.alert("Cordova is working");
}

function onLinkClick() {
    window.plugins.childBrowser.onLocationChange = function(loc){ alert("In index.html new loc = " + loc); };
    window.plugins.childBrowser.onClose = function(){alert("In index.html child browser closed");};
    window.plugins.childBrowser.onOpenExternal = function(){alert("In index.html onOpenExternal");};        

    window.plugins.childBrowser.showWebPage('http://www.google.com',
                                    { showLocationBar: true });
    console.log(window.plugins.childBrowser);

}
</script> 
```

有谁知道如何让 ChildBrowser 启动并运行？

非常感谢任何帮助，谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:35:47.800

我在这个位置有一个使用 childbrowser 的示例应用程序，其中包含使其在任何应用程序中工作的步骤。

[ios-子浏览器](https://github.com/dhavaln/cordova-examples/tree/master/ios-cordova-childbrowser)

有关更多详细信息，请查看这篇文章 - [Childbrowser with Cordova 1.7 iPhone issue](https://stackoverflow.com/questions/11027479/childbrowser-with-cordova-1-7-iphone-issue/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T00:39:54.683

我发现我的大部分错误都是基于那些旧的博客文章，所以我写了一篇关于如何使用 PhoneGap/Cordova 1.8.1 和 1.9.0 逐步安装适用于 iOS/xcode 的 ChildBrowser 的博客文章。

检查这篇文章——[使用 PhoneGap/Cordova 1.8.1 和 1.9.0 安装适用于 iOS/xcode 的 ChildBrowser](http://www.3ch.me/2012/07/newest-way-to-installing-childbrowser.html)

希望这可以帮助某人。

# eclipse - 寻找专为程序员设计的 IDE 配色方案

> ID：11169574
> 
> 赞同：5
> 
> 时间：2012-06-23T12:40:15.067
> 
> 标签：eclipse, vim, ide, colors, syntax-highlighting

我正在寻找专为许多流行 IDE 使用的程序员设计的配色方案。最近我发现了[Solarized](http://ethanschoonover.com/solarized)。它应该可以减少眼睛疲劳，使用一段时间后我必须说这是真的。虽然，我真的不喜欢solarized的颜色。

当我切换回我的旧颜色时，它们太亮了。我对日晒后的颜色对我眼睛的影响感到非常惊讶。

我想知道是否有其他主题设计得如此精确，适用于各种 IDE（甚至是终端颜色！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:51:43.403

您可以检查的另一个流行主题是[zenburn](http://slinky.imukuppi.org/zenburnpage/)。您可以为任何流行的 IDE 找到该主题。

# doctrine-orm - 如何克隆具有关系的 Doctrine 2 实体？

> ID：11169583
> 
> 赞同：2
> 
> 时间：2012-06-23T12:42:09.117
> 
> 标签：doctrine-orm, cloning

我有一个有一些关系的实体。我需要用关系克隆这个实体。如何克隆具有关系的 Doctrine 2 实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:10:37.163

Benjamin Eberlei 之前回答过这个问题：

> 您可以实现 __clone() 并在用户空间中正确处理副本。

来源：[https ://groups.google.com/group/doctrine-user/browse_thread/thread/36edab6b2ac39204/1a39a8b0eaa213a8](https://groups.google.com/group/doctrine-user/browse_thread/thread/36edab6b2ac39204/1a39a8b0eaa213a8)

# android - Android设置单选按钮文字

> ID：11169584
> 
> 赞同：0
> 
> 时间：2012-06-23T12:42:17.653
> 
> 标签：android, android-layout, android-event

我有四个单选按钮，我想为每个按钮设置一个文本，我从服务器获取数据并将该数据设置为这些按钮，如下所示：

```
protected String[] doInBackground(String... params) {
HttpClient client = new DefaultHttpClient();
                website = new URI(
                        "http://10.0.2.2:8080/LocalizedBasedComptitionServer/SendQuestion");
                HttpPost request = new HttpPost();
                request.setURI(website);
                HttpResponse response = client.execute(request);
                HttpEntity entity = response.getEntity();
                results[0] = response.getFirstHeader("Info").toString();
                results[1] = response.getFirstHeader("Question").toString();
                results[2] = response.getFirstHeader("Choice1").toString();
                results[3] = response.getFirstHeader("Choice2").toString();
                results[4] = response.getFirstHeader("Choice3").toString();
                results[5] = response.getFirstHeader("Choice4").toString();
                results[6] = response.getFirstHeader("Hint1").toString();

    results[7] = response.getFirstHeader("Hint2").toString();
}
protected void onPostExecute(String[] results) {
            super.onPostExecute(results);
            question.setText(results[1]);
            choice1.setText(results[2]);
            choice2.setText(results[3]);
            choice3.setText(results[4]);
            choice4.setText(results[5]);
            firstHint.setText(results[6]);
            secondHint.setText(results[7]);
            // rightChoice = Integer.parseInt(results[8]);
        } 
```

但我的问题是，如果我发送 roma , milan, italy , love 给客户，打印到单选按钮的数据是choice1:romachoice2:milan,choice3:italy,choice4:love 我不想打印那个choice1,choice2 ,choice3,choice4 我做错了什么，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:53:40.117

尝试`response.getFirstHeader("xxx").getValue()`

# if-statement - 在 Ember Handlebar If block helper 中检查值是否等于

> ID：11169595
> 
> 赞同：51
> 
> 时间：2012-06-23T12:43:28.867
> 
> 标签：if-statement, ember.js, handlebars.js

我们如何检查[ember.js](http://www.emberjs.com)的 If-block 助手中的值是否相等？

```
{{#if person=="John"}} 
```

我们如何在车把上执行上述操作？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-24T12:30:35.757

`{{#if}}`助手只能测试属性，不能测试任意表达式。因此，在这种情况下，最好的办法是编写一个属性来计算您想要测试的任何条件。

```
personIsJohn: function() {
  return this.get('person') === 'John';
}.property('person') 
```

然后做`{{#if personIsJohn}}`。

注意：如果你觉得这太局限了，你也可以[注册你自己更强大的`if`helper](https://stackoverflow.com/questions/8853396/logical-operator-in-a-handlebars-js-if-conditional)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-01-30T23:22:39.920

使用[`Ember.Component`](http://emberjs.com/api/classes/Ember.Component.html)，从而避免在您的类中重复定义计算属性（`personIsJohn`如上）：

```
// if_equal_component.js script
App.IfEqualComponent = Ember.Component.extend({
  isEqual: function() {
    return this.get('param1') === this.get('param2');
  }.property('param1', 'param2')
});

// if-equal.handlebars template
{{#if isEqual}}
  {{yield}}
{{/if}} 
```

您可以使用以下内容定义比较的 else 部分`App.ElseEqualComponent`：

```
// else_equal_component.js script
App.ElseEqualComponent = App.IfEqualComponent.extend();

// else-equal.handlebars template
{{#unless isEqual}}
  {{yield}}
{{/unless}} 
```

## 用法：

```
{{#if-equal param1=person param2="John"}}
  Hi John!
{{/if-equal}}
{{#else-equal param1=person param2="John"}}
  Who are you?
{{/else-equal}} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-03-17T13:58:15.650

如果您使用的是 HTMLBars（Ember 版本 1.10+），那么您可以使用**Ember Truth Helper**插件：

[https://github.com/jmurphyau/ember-truth-helpers](https://github.com/jmurphyau/ember-truth-helpers)

安装后，它会像这样简单：

```
{{#if (eq person "John")}} hello {{/if}} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-08-31T11:58:51.623

虽然这个问题可以通过编写使用 eq 助手来解决

```
{{#if (eq person "John")}} hello {{/if}} 
```

但是对于一般解决方案，您可以制作自己的助手，该助手将采用三个参数`param[0]`并`param[2]`作为操作数和`param[1]`作为运算符。下面是帮助文件。

比较.js

```
import Ember from 'ember';

export function compare(params) {
  if(params[3]){  //handle case insensitive conditions if 4 param is passed.
    params[0]= params[0].toLowerCase();
    params[2]= params[2].toLowerCase();
  }
  let v1 = params[0];
  let operator = params[1];
  let v2 = params[2];
  switch (operator) {
    case '==':
      return (v1 == v2);
    case '!=':
      return (v1 != v2);
    case '===':
      return (v1 === v2);
    case '<':
      return (v1 < v2);
    case '<=':
      return (v1 <= v2);
    case '>':
      return (v1 > v2);
    case '>=':
      return (v1 >= v2);
    case '&&':
      return !!(v1 && v2);
    case '||':
      return !!(v1 || v2);
    default:
      return false;
  }
}

export default Ember.Helper.helper(compare); 
```

现在您可以轻松地将其用于多种用途。

用于平等检查。

```
{{#if (compare person '===' 'John')}} {{/if}} 
```

进行更大的检查。

```
{{#if (compare money '>' 300)}} {{/if}} 
```

等等。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-07-30T14:18:51.790

扩展 Jo Liss 的答案，您现在可以使用计算属性宏来执行此操作，以获得更简洁和可读的代码。

```
personIsJohn: function() {
  return this.get('person') === 'John';
}.property('person') 
```

变成

```
personIsJohn: Ember.computed.equal('person', 'John') 
```

[相关文档](http://emberjs.com/api/#method_computed_equal)。

# mysql - 使用 DQL 对布尔列进行 COUNT 查询

> ID：11169599
> 
> 赞同：0
> 
> 时间：2012-06-23T12:44:39.907
> 
> 标签：mysql, doctrine-orm, dql

我有一个“简单”的问题，其答案似乎不在官方 DQL 文档中。给定一个使用 Doctrine2 构建的应用程序，假设有一个**布尔列**（假设实体*Foo为**B*），如何计算行数以使 B 中的值为真（或假）？

 *PS：如果可能有帮助，我使用 MySql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:44:41.263

如果您想计算“真”值的数量：

```
 'SELECT COUNT(f.B) as numtrue  
            FROM Foo f 
            WHERE f.B = TRUE' 
```

要获得“假”值的出现次数：

```
 'SELECT COUNT(f.B) as numfalse  
            FROM Foo f 
            WHERE f.B = FALSE' 
```*

# node.js - nginx、node.js 和 socket.io - 有工作婚姻吗？

> ID：11169603
> 
> 赞同：5
> 
> 时间：2012-06-23T12:45:09.783
> 
> 标签：node.js, nginx, websocket, socket.io, haproxy

`nginx`是杀手级静态文件服务器。

`node.js`如[本例所示](https://stackoverflow.com/questions/5009324/node-js-nginx-and-now)，它可以提供服务，但方式有限。

但`nginx`显然[无法](https://github.com/LearnBoost/socket.io/wiki/Nginx-and-Socket.io)代理`websockets`。

我发现唯一可行的方法是根据[本文使用](http://jfarcand.wordpress.com/2011/10/06/configuring-haproxy-for-websocket/)[HAProxy](http://haproxy.1wt.eu/)前端- 但它是从 2011 年 10 月 6 日开始的。

这*必须*是一个常见问题，但我没有找到一个非常常见的解决方案。

* * *

## 解决方案

（有关完整的解决方案和详细信息，请参阅[https://github.com/bangkok-maco/barebone-node ）](https://github.com/bangkok-maco/barebone-node)

ip 测试架构：

*   127.0.0.12 - www.chat.nit - 公共，在 /etc/hosts 和 haproxy
*   127.0.1.12 - 内部 nginx 网络服务器
*   127.0.2.12 - 内部聊天服务 node.js socket.io

### /etc/haproxy/haproxy.cfg：

```
global
 maxconn 4096
 nbproc 2
 daemon
 # user nobody
 log             127.0.0.1       local1 notice

defaults
 mode http

# listen on 127.0.0.12:80
frontend app
 bind 127.0.0.12:80
 mode tcp
 timeout client 86400000
 default_backend www_backend
 acl is_chat hdr_dom(Host) chat
 acl is_websocket path_beg /socket.io

 use_backend chat_socket_backend if is_websocket is_chat
 tcp-request inspect-delay 500ms
 tcp-request content accept if HTTP

# ngnix on 127.0.1.12:80
backend www_backend
 balance roundrobin
 option forwardfor
 mode http
 option httplog
 option httpclose
 timeout server 30000
 timeout connect 4000
 server w1 127.0.1.12:80 weight 1 maxconn 1024 check

# node (socket.io) on 127.0.2.12:80
backend chat_socket_backend
 balance roundrobin
 mode http
 option httplog
 option forwardfor
 timeout queue 5000
 timeout server 86400000
 timeout connect 86400000
 timeout check 1s
 no option httpclose
 option http-server-close
 option forceclose
 server s14 127.0.2.12:8000 weight 1 maxconn 1024 check 
```

### /etc/nginx/sites-enabled/www.chat.nit

```
server {
    listen   127.0.1.12:80;

    root /data/node/chat;
    index client.html;

    server_name www.chat.nit;

    # favicon.ico is in /images
    location = /favicon.ico$ { rewrite /(.*) /images/$1 last; }

    # standard includes
    location ^~ /(css|images|scripts)/ {
            try_files $uri =404;
    }

    # html page (only in root dir)
    location ~ ^/([-_a-z]+).html$ {
            try_files $uri =404;
    }

    error_page 404 /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page 500 502 503 504 /50x.html;
    location = /50x.html {
            root /usr/share/nginx/www;
    }
} 
```

### 聊天（node.js）：server.js

```
var app = require('http').createServer()
   , io = require('socket.io').listen(app);    
app.listen(8000,'127.0.2.12');

io.sockets.on('connection', function(socket) {
  ...
}; 
```

### 聊天：client.html

```
<head>
  <script src="/scripts/socket.io/socket.io.js"></script>
  <script>
    var socket = io.connect('http://www.chat.nit:80'); 
    ...
  </script>
</head> 
```

笔记：

1.  将socket.io客户端js链接到`scripts/`目录

    /.../scripts$ ln -s ../node_modules/socket.io/node_modules/socket.io-client/dist/socket.io

2.  /etc/default/haproxy （与文本相反，必须设置为*工作*）

    启用=1

3.  这个版本的 haproxy 没有记录。找到[kvz](http://kevin.vanzonneveld.net/techblog/article/haproxy_logging/)关于如何`rsyslogd`通过127.0.0.1使用的文章，但无法让它飞起来。

4.  该解决方案*有效*-可以确定不是系统管理员质量。（增强功能非常受欢迎。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:32:55.970

从 v1.3.13 开始，您似乎可以通过 nginx 代理 WebSockets

有关详细信息，请参阅[http://nginx.org/en/docs/http/websocket.html](http://nginx.org/en/docs/http/websocket.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:39:32.207

这是我的（旧的和用于测试目的的）HAProxy 配置，用于代理 WebSockets 和正常的 HTTP 请求。

```
global
    maxconn 4096
    nbproc 2
    daemon
    user nobody

defaults
    mode http

frontend app
    bind 0.0.0.0:8000
    mode tcp
    timeout client 86400000
    default_backend www_backend
    acl is_websocket path_beg /sockets

    use_backend socket_backend if is_websocket
    tcp-request inspect-delay 500ms
    tcp-request content accept if HTTP

backend www_backend
    balance roundrobin
    option forwardfor
    mode http
    option httplog
    option httpclose
    timeout server 30000
    timeout connect 4000
    server w1 localhost:8080 weight 1 maxconn 1024 check

backend socket_backend
    balance roundrobin
    mode http
    option httplog
    option forwardfor
    timeout queue 5000
    timeout server 86400000
    timeout connect 86400000
    timeout check 1s
    no option httpclose
    option http-server-close
    option forceclose
    server s1 localhost:8081 weight 1 maxconn 1024 check 
```

`acl is_websocket path_beg /sockets`请注意，我通过查看路径（行）来识别请求是否为 WS 。这可以替换为例如：

```
acl is_websocket hdr(Upgrade) -i WebSocket 
```

或这个：

```
acl is_websocket hdr_beg(Host) -i ws 
```

或两者。使用此配置代理到 nginx 应该可以开箱即用。

# if-statement - Twig：在 if 语句中按键获取数组的元素

> ID：11169608
> 
> 赞同：14
> 
> 时间：2012-06-23T12:45:41.233
> 
> 标签：if-statement, twig

我想在 if 语句中按键获取元素的值。

**例子：**

作品：

```
{{ example[5] }} 
```

不起作用：

```
{% if example2 is example[5] %} something ... {% endif %} 
```

**抛出异常：**

> 值“[”的意外标记“标点符号”（预期为“语句块结束”）

非常感谢你

亲切的问候

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-24T22:07:29.353

代替

```
{% if example2 is example[5] %} something ... {% endif %} 
```

尝试将 'is' 更改为 '=='

```
{% if example2 == example[5] %} something ... {% endif %} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-14T14:44:27.453

也许您应该使用该`attribute`函数来获取对象或数组值。[此链接](http://twig.sensiolabs.org/doc/functions/attribute.html)可能对您有所帮助

# r - 在 R 中限制 abline 的 x 轴跨度

> ID：11169610
> 
> 赞同：0
> 
> 时间：2012-06-23T12:46:15.527
> 
> 标签：r, plot

关于我[在这里](https://stackoverflow.com/questions/10893696/make-histograms-of-stacked-rectangles-rather-than-columns)的问题，我有一个情节可以`xlim`说`c(0,1000)`。我怎样才能限制每条线产生的

```
abline(h=seq(0,45,5),col="white") 
```

`xlim`沿 x 轴的宽度为0 到 500，同时保留`c(0,1000)`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:15:20.427

你可以利用`?lines`.

```
plot(1:100)
sapply(seq(1,100,5), function(i) lines(c(0,50), c(i,i))) 
```

# jquery - 滚动后淡入 div

> ID：11169612
> 
> 赞同：2
> 
> 时间：2012-06-23T12:46:24.263
> 
> 标签：jquery

我需要能够根据用户滚动的 px 数量淡入/淡出 div。这是我现有的jquery。我可以切换它的视图，但我想淡化该切换。这里的正确方法是什么？

```
$("#subOverlay").hide();

$(window).bind('scroll', function(){
    $("#subOverlay").toggle($(this).scrollTop() > 520);
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T12:53:44.020

可以这样做：

```
$(window).bind("scroll", function() {
    if ($(this).scrollTop() > 520) {
        $("#subOverlay").fadeIn();
    } else {
        $("#subOverlay").stop().fadeOut();
    }
}); 
```

**演示：http:** [//jsfiddle.net/ZHkY8/](http://jsfiddle.net/ZHkY8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T11:21:17.573

```
$(window).bind("scroll", function() {
    if ($(this).scrollTop() > 520) {
        $("#subOverlay").stop().fadeOut();
     } else {
        $("#subOverlay").fadeIn();
    }
}); 
```

^^ Simply reverse the array :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T18:43:55.850

我正在处理类似于 Alexander 的链接的东西，但需要它在屏幕顶部以超过 100% 的速度消失。

您可以根据浏览器大小调整对象何时开始淡化以及何时结束淡化。如果你想从 0.2 而不是 0 开始，你也可以调整开始淡入淡出的不透明度。

[http://www.kevinnunn.com/fadetest/](http://www.kevinnunn.com/fadetest/)

# php - 从 PHP MySQL 结果创建 JSON 对象

> ID：11169613
> 
> 赞同：3
> 
> 时间：2012-06-23T12:46:47.627
> 
> 标签：php, mysql, json

我想用 PHP 从我的 MySQL 结果中创建一个 JSON 对象，这样我就可以将它传递给 JavaScript。我不太明白 JSON 数组和 JSON 对象之间的区别。

我就是这样做的。但是有更好的方法吗？这是我相信的阵列方式？

```
$json = array();
while($r=mysql_fetch_array($res)){
  $json['firstname'] = $r['firstname'];
  $json['lastname'] = $r['lastname'];
}
echo json_encode($json); 
```

我希望能够通过仅选择所有名字来从 JavaScript 获取信息，如果我愿意的话等等。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T12:52:25.527

你可以试试这个，获取数据并推送到数组，然后回显该数组

```
$info=array();
while($row = mysql_fetch_array($res,MYSQL_ASSOC)){
array_push($info,$row);
}
echo json_encode($info); 
```

会回来

```
array(2) { [0]=> array(3) { ["id"]=> string(1) "1" ["firstname"]=> string(3) "foo" ["lastname"]=> string(3) "bar" } [1]=> array(3) { ["id"]=> string(1) "2" ["firstname"]=> string(3) "foo" ["lastname"]=> string(3) "bar" } } 
```

json

```
[{"id":"1","firstname":"foo","lastname":"bar"},{"id":"2","firstname":"foo","lastname":"bar"}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T12:51:20.790

好吧，这将对每一行进行编码，每一行都是 JSON 对象：

```
$json = array();
while($r=mysql_fetch_array($res)){
  $json[] = $r;
}
echo json_encode($json); 
```

# c++ - 为迭代器实现接口

> ID：11169615
> 
> 赞同：0
> 
> 时间：2012-06-23T12:46:57.377
> 
> 标签：c++, tdd

我正在编写一个将遍历一组句柄的类。基本上我正在处理一堆实现以下接口的C函数：

```
SomeHandle getFirst(ParentHandle);
SomeHandle getNext(SomeHandle); 
```

这是我的迭代器的接口及其部分实现。我需要一个接口，以便为了 TDD 的目的模拟这个迭代器。

```
template<class HandleT>
class IHandleIterator
{
public: 
    virtual void operator++() = 0;
    virtual const HandleT& operator*() const = 0;
};

template<class HandleT>
class HandleIterator : public IHandleIterator<HandleT>
{
public:
    // used by something.end()
    HandleIterator() : _isLast(true)
    {
    }

    // updates _isLast when the end is reached        
    virtual void operator++()
    {
    }

    virtual const HandleT& operator*() const
    {
        return _currentHandle;
    }

protected:
    HandleT _currentHandle;
    bool _isLast;
}; 
```

我想要做的是将 operator!= 添加到接口中，以便在我迭代结束时进行测试，如下所示：

```
for(IHandleIterator i=something.begin(); i!=seomething.end(); i++)
{
    *i;
} 
```

但是我无法弄清楚如何做到这一点。谁能给我建议？

如果我找不到涉及 operator!= 的解决方案，那么我想知道这是否是一个好方法：

```
class IHandleIterator
{
public: 
    virtual void operator++() = 0;
    virtual const HandleT& operator*() const = 0;
    virtual bool isLast const = 0;
};

for(IHandleIterator i=something.begin(); !i.isLast(); i++)
{
    *i;
} 
```

你怎么看？

# html - “aria-haspopup”属性主要用于工具栏菜单吗？

> ID：11169626
> 
> 赞同：2
> 
> 时间：2012-06-23T12:48:40.973
> 
> 标签：html, popup, wai-aria

我已经看到在[WYSIWYG editor](http://oaa-accessibility.org/example/25/)`aria-haspopup`等应用程序的工具栏菜单上使用了属性。但是，我还没有看到它在任何 ARIA 演示网站的主导航中使用。

这个属性主要是为应用程序的工具栏菜单引入的吗？在网站的主导航（有子菜单）上使用它是否合适和合理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:30:16.303

刚刚看到这个属性被用在[jQuery UI Selectmenu](http://wiki.jqueryui.com/w/page/12138056/Selectmenu)的标记上（在`a`元素上，也就是selectmenu的开关）。所以似乎可以在任何代码上使用它。

```
<span class="ui-selectmenu-button css-scope">
    <a class="ui-corner-all ui-state-default ui-widget ui-button" href="#speed" tabindex="0" id="speed-button" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-owns="speed-menu" aria-haspopup="true">
        <span class="ui-icon-triangle-1-s ui-icon"></span>
        <span class="ui-selectmenu-text">Medium</span>
    </a>
 </span> 
```

# ios - iCloud Core 数据同步设置

> ID：11169627
> 
> 赞同：1
> 
> 时间：2012-06-23T12:48:43.163
> 
> 标签：ios, core-data, icloud

我正在开发一个应用程序，它结合了其核心数据存储的 iCloud 同步（具有单个存储/模型/上下文的简单应用程序）。由于商店还包含图像数据，因此它有可能变得非常大，因此我想添加一个设置以允许用户根据需要禁用同步。我已经查看了在这两种情况下使用 Core Data 的一些示例代码，在我看来，启用和禁用 iCloud 运行之间的唯一真正区别`NSPersistentStoreCoordinator`是添加时传递给的选项。因此，我虽然想做这样的事情：

```
NSPersistentStoreCoordinator *psc;
NSDictionary* options;
//Set options based on iCloud setting
if ([enableSwitch isOn]) {
    options = [NSDictionary dictionaryWithObjectsAndKeys:
        @"<unique name here>", NSPersistentStoreUbiquitousContentNameKey,
        cloudURL, NSPersistentStoreUbiquitousContentURLKey,
        [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
        [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
        nil];
} else {
    options = nil;
}

//Add the coordinator
if (![psc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
    //Handle error
} 
```

所以，我对上述问题有几个问题：

1.  我的假设是否正确，或者两个州之间是否还有更多需要不同的地方？
2.  通常在示例中，此代码在应用程序委托中调用，因此通常每次应用程序运行仅调用一次。当用户切换设置时，是否有一个好的策略来响应必要的更改？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:18:20.970

这是我想出的解决方案，而且效果很好。基本上，下面的代码放置在您可以在应用程序启动时调用的方法中，或者在您面向用户的“启用 iCloud 同步”设置发生更改时调用。两种操作模式之间需要改变的只是`NSPersistentStore`实例，底层模型文件和协调器不需要改变。

我的应用程序只需要担心一个持久性存储，因此在调用此方法时，它只会删除当前附加到协调器的所有存储，然后根据用户设置使用适当的选项创建一个新存储。

```
NSFileManager *fileManager = [NSFileManager defaultManager];

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"DataModel.sqlite"];
NSError *error = nil;

NSArray *stores = [__persistentStoreCoordinator persistentStores];
for (int i=0; i < [stores count]; i++) {
    [__persistentStoreCoordinator removePersistentStore:[stores objectAtIndex:i] error:&error];
}

//Determine availability.  If nil, service is currently unavailable
NSURL *cloudURL = [fileManager URLForUbiquityContainerIdentifier:nil];
if (!cloudURL) {
    NSLog(@"iCloud currently unavailable.");
}

//Check if user setting has been set
if (![[NSUserDefaults standardUserDefaults] objectForKey:kCloudStorageKey]) {
    //Set the default based on availability
    BOOL defaultValue = (cloudURL == nil) ? NO : YES;
    [[NSUserDefaults standardUserDefaults] setBool:defaultValue forKey:kCloudStorageKey];
    [[NSUserDefaults standardUserDefaults] synchronize];
}

//Set options based on availability and use settings
BOOL cloudEnabled = [[NSUserDefaults standardUserDefaults] boolForKey:kCloudStorageKey];
NSDictionary *options = nil;

if (cloudEnabled && cloudURL) {
    NSLog(@"Enabling iCloud Sync in Persistent Store");
    options = [NSDictionary dictionaryWithObjectsAndKeys:
            @"<awesome.unique.name.key>", NSPersistentStoreUbiquitousContentNameKey,
            cloudURL, NSPersistentStoreUbiquitousContentURLKey,
            [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
            [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
            nil]; 
}

//Add the store with appropriate options
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
{
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
} 
```

如果您有一个使用多个商店的应用程序，您可能需要保留对要启用/禁用同步的商店的引用，以便您可以采用更智能的方法，而不是每次都将它们全部吹走。

# r - 如何使用 IF 语句分配 NA？

> ID：11169631
> 
> 赞同：4
> 
> 时间：2012-06-23T12:49:27.057
> 
> 标签：r, if-statement, na

我想对 0 到 1 之间的值向量进行分类。低于 0.001 的值，高于 0.10 或不感兴趣的值。因此，我希望这些范围内的值是 NA。

当我运行下面的代码时，我收到一个警告：

```
Error in if (x[i] > 0.001 & x[i] <= 0.01) x[i] = 0.01 :  missing value where TRUE/FALSE needed 
```

如何修复我的代码？

```
for (i in 1:length(x))
  {
    if (x[i] <= .001)
      x[i] = NA
    if (x[i] > .001 & x[i] <= .01)
      x[i] = .01
    if (x[i] > .01 & x[i] <= .02)
      x[i] = .02
    if (x[i] > .02 & x[i] <= .03)
      x[i] = .03
    if (x[i] > .03 & x[i] <= .04)
      x[i] = .04
    if (x[i] > .04 & x[i] <= .05)
      x[i] = .05
    if (x[i] > .05 & x[i] <= .06)
      x[i] = .06
    if (x[i] > .06 & x[i] <= .07)
      x[i] = .07
    if (x[i] > .07 & x[i] <= .08)
      x[i] = .08
    if (x[i] > .08 & x[i] <= .09)
      x[i] = .09
    if (x[i] > .09 & x[i] <= .10)
      x[i] = .10
    if (x[i] > .10 & x[i] <= 1)
      x[i] = NA
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T13:06:38.217

首先，一些测试数据：

```
set.seed(1); x = dnorm(rnorm(100))/(sample(1:100, 100, replace=TRUE)) 
```

子集可以通过以下方式完成：

```
x[x < .001] = NA
x[x > .1] = NA 
```

或者，您可以将其组合在一个语句中：

```
x[x < .001 | x > .1] = NA 
```

## 更新：回答为什么您的代码不起作用

如果它*确实*在那里找到了一个，你就会遇到问题`NA`，所以从你的`for`循环中删除它们，但是在你运行循环之前索引它们，以便你以后可以删除它们。

```
temp = which(x < .001 | x > .1) # Index the values you want to set as NA 
```

`for`从循环中删除以下条件：

```
if (x[i] > .10 & x[i] <= 1)
  x[i] = NA
if (x[i] <= .001)
  x[i] = NA 
```

运行你的`for`循环，然后使用`temp`将值设置为`NA`应该是`NA`.

```
x[temp] = NA 
```

希望这可以帮助！

## 更新 2：两行

```
x[x < .001 | x > .1] = NA
out <- ceiling(x*100)/100 
```

与 AKE 使用地板的建议几乎相同。

这应该会得到与循环相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:19:04.143

您应该尝试使用矢量化函数，而不是使用显式`for`循环，例如非常方便的`ifelse`. 以下是如何`NAs`在您的示例中重新编码：

```
> x <- ifelse(x <= 0.001 | x > 0.1, NA, x) 
```

要重新编码其他值，您可以尝试一些“聪明”的使用`cut`：

```
> x <- (cut(x, breaks=seq(0.01, 0.09, 0.01), labels=FALSE) / 100) + 0.01 
```

尽管可能有更好（和更透明）的方法。在 R中避免显式循环的原因`for`是，与矢量化替代方案相比，它们的效率非常低。[R Inferno](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)很好地讨论了这个和其他 R 技巧和技巧 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T13:12:34.613

虽然您的解决方案在概念上有效，但它是“蛮力”，这意味着大量输入，不会扩展到稍微不同的问题，并且执行起来也很慢。

R 允许使用向量，因此如果您的逻辑适用于 0 到 1 之间的任意数字，那么它应该适用于值介于 0 和 1 之间的向量。

尝试以下操作：

```
 y=((floor(100*x))       # all values < 0.01 map to 0
      if y>10 then y=0        # force values > 0.1 to 0
      if y>0, then (y+1)/100  # for non-zero values, map to the upper interval, then return to original scale. 
```

第一行将所有小于 0.01 的值压缩为 0。第二行将所有大于 0.1 的值压缩为 0。第三行将剩余的非零值提升到范围的最大值（向上舍入）并将它们返回到原始值规模。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T13:51:49.903

该`findInterval`函数可以有效地用于这个非常结构化的选择问题。它生成一个索引，可以“查找”或为特定间隔中的值选择所需的结果：

```
x <- rnorm(1000)
x <- c(NA, seq(0.1, 1, by=0.1), NA)[
            1+ findInterval(x, c(0.001, seq(0.1, 1, by=0.1)) ,rightmost.closed=TRUE) ]
#---------------
table(x)
x
0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9   1 
 34  38  48  44  29  30  26  20  17  31 
> table(is.na(x))

FALSE  TRUE 
  317   683 
```

rightmost.closed 参数改变了通常最左边的区间闭包，尽管在这个例子中它并不重要，因为没有随机抽取在边界上。不过，销毁输入数据通常不是一个好主意。我希望`x`是您原始数据的副本。这样做的另一种方法是省略第二个参数`1+`中的间隔，而是使用间隔，例如`findInterval``c(-Inf, 0.001, seq(0.1, 1, by=0.1) , Inf)`

# visual-studio-2010 - 移除解决方案资源管理器中的滚动条

> ID：11169634
> 
> 赞同：0
> 
> 时间：2012-06-23T12:49:31.893
> 
> 标签：visual-studio-2010, visual-studio

操作系统：Windows 7 64 位

Visual Studio：2010 专业版

你能告诉我如何在带有项目文件列表的窗口中删除垂直滚动条吗？

![在此处输入图像描述](../Images/f1973c81d9992c1942321a36542e653b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:51:13.707

你没有。您需要它才能查看所有文件。

# java - 字符串文字作为方法的参数

> ID：11169641
> 
> 赞同：16
> 
> 时间：2012-06-23T12:50:06.557
> 
> 标签：java, string, literals

Java 中的任何 String 文字都是类型的常量对象，`String`并存储在 String 文字池中。

`String`作为参数传递给方法的文字是否也会存储在文字`String`池中？

比如我们写的时候，

```
System.out.println("Hello"); 
```

或者

```
anyobj.show("Hello"); 
```

会创建一个`String`“Hello”并将其存储在`String`文字池中吗？

有没有办法打印字符串文字池的内容？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-23T12:54:21.783

每次在代码中使用字符串文字时（无论在哪里），**编译器**都会将该字符串放在符号表中，并在每次在同一文件中的某处遇到相同字符串时引用它。稍后这个字符串将被放置在常量池中。如果将该字符串传递给另一个方法，它仍然使用相同的引用。字符串是不可变的，因此重用它们是安全的。

以这个程序为例：

```
public class Test {

    public void foo() {
        bar("Bar");
    }

    public void bar(String s) {
        System.out.println(s.equals("Bar"));
    }

} 
```

反编译后`javap -c -verbose`你会发现以下内容：

```
const #2 = String   #19;    //  Bar
//...
const #19 = Asciz   Bar;

public void foo();
    //...
    1:  ldc #2; //String Bar

public void bar(java.lang.String);
    //...
    4:  ldc #2; //String Bar 
```

常量池中有两个条目：一个 for `String`( `#2`) 引用实际字符 ( `#19`)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T12:53:13.423

> 作为参数传递给方法的字符串文字也会存储在字符串池中吗？

当然。为什么你会期望它们有所不同？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T12:57:43.667

至于检查字符串文字池，@Puneet 似乎为此编写[了一个工具](https://stackoverflow.com/a/7626113/14955)。

# image - 如何使用 HTML5 拖放在线图像？

> ID：11169642
> 
> 赞同：0
> 
> 时间：2012-06-23T12:50:17.400
> 
> 标签：image, html, drag-and-drop

我目前正在测试拖放。从我的桌面拖放图像可以正常工作，但我遇到了一个问题：当我拖放“在线”图像（从另一个网站，甚至使用 a 的同一网页）时，变量`e.dataTransfer.files`为空。

总结一下我正在尝试做的事情：您将图像从桌面拖到我的页面（在特殊区域内），然后将图像显示在`<canvas>`. 我也希望能够从我的页面中拖出一张图片，比如说“嘿，你可以先试试这些图片！”。

对于拖放的基础知识，我从本教程中获得了灵感：http: [//www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:06:15.543

因为在线拖放被解释为链接，而不是文件传输。您必须首先将图片保存在桌面上，然后它将被解释为真正的拖放。但是，由于您的页面上已经有图片，您可以通过用现有图片填充画布（例如使用 javascript）来实现您的目标。

PS：只有当您使用 2 个不同的浏览器时，Drag&Drop 才能以您想要的方式工作，例如将图片从 IE 拖到 FF 中。为此，您需要在 2 个不同的浏览器中加载您的页面。

# corba - Corba AMI 和连接管理

> ID：11169653
> 
> 赞同：0
> 
> 时间：2012-06-23T12:52:11.380
> 
> 标签：corba

Corba 的主要显着特征之一是 AMI（异步方法调用），与 Web 服务的轮询方法相反。
例如，您可以实现客户端并“侦听”服务器更新，而无需过多地对服务器进行轮询（并且在任何情况下都会有一些延迟），但可以实现对服务器更新的回调。
这意味着一直保持连接，不是吗？在这种情况下何时会断开连接？
Corba 如何管理连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:37:29.397

CORBA 中的典型同步请求和通过 AMI 发出的异步请求之间的唯一区别是，客户端的调用线程在从服务器返回回复之前不会被阻塞。两种方法之间的服务器差异为零。

CORBA 中的 AMI 并不意味着服务器可以随时用通知回调客户端。在向服务器发出标准的双向请求时，客户端的行为方式完全不同。

“回调”部分与客户端异步的实现方式有关。它不需要连接管理或其他低级行为的差异。欲了解更多信息：[http ://www.ciaranmchale.com/corba-explained-simply/corba-messaging.html#toc78](http://www.ciaranmchale.com/corba-explained-simply/corba-messaging.html#toc78)

# iphone - 如何使用操作按钮而不是来自文本字段来调用小键盘

> ID：11169654
> 
> 赞同：1
> 
> 时间：2012-06-23T12:52:12.393
> 
> 标签：iphone, ios5, xcode4.3

我知道这是个愚蠢的问题，但作为 xcode 的初学者，我无法从任何来源找到答案，我可以从我的操作按钮调用小键盘（数字键盘）吗？我只希望我的操作按钮可以像文本字段一样调用小键盘。我应该在我的操作按钮中插入什么代码？

我的代码：

```
- (IBAction)setLoopBtn:(id)sender
{

} 
```

再次感谢您将您的知识分享给像我这样的菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:03:46.247

创建一个`UITextField`带有框架的框架，将其从可见屏幕上移开。指定要显示的键盘类型作为该字段的默认值。点击按钮后，发送`becomeFirstResponder`到您的屏幕外字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:28:54.183

```
-(IBAction) ButtonClick
{
      txtField.keyboardType = UIKeyboardTypeNumberPad;
     [txtField becomeFirstResponder];
} 
```

# c - 使用 setuid 调试 setuid 程序/“权限被拒绝”

> ID：11169656
> 
> 赞同：4
> 
> 时间：2012-06-23T12:52:18.980
> 
> 标签：c, permissions, gdb, setuid

这实际上是一个由三部分组成的问题，我将在下面解释，但问题是：

*   使用gdb，我怎样才能以root权限运行程序的一部分，而其余的则以正常权限运行？
*   为什么我会在 setuid (to root) 程序中使用 mkstemp 在 /tmp 中创建文件时获得“权限被拒绝”？
*   为什么“sudo program_name”的执行与 ./program_name 与 setuid 到 root 有任何不同？

我有一个在 Linux（多个发行版）上运行的 C 程序，通常由具有正常权限的用户运行，但程序的某些部分必须以 root 权限运行。为此，我使用了 set-UID 标志，就它而言，它工作得很好。

但是，现在我想以普通用户权限调试程序，我发现我有一个 catch-22。我刚刚添加了一个函数来创建一个临时文件（/tmp/my_name-XXXXXX），并且该函数从程序中的许多点调用。无论出于何种原因，此函数在运行时都会发出以下消息：

```
sh: /tmp/my_name-hhnNuM: Permission denied 
```

（当然，实际名称会有所不同。）然而，该程序能够执行原始套接字功能，我绝对知道除了 root 之外的用户无法完成。（如果我删除 setuid 标志，程序会惨遭失败。）

如果我在没有 sudo 的情况下通过 gdb 运行这个程序，它会在原始套接字的东西上死掉（因为 gdb 显然不 - 或者可能不能 - 尊重程序上的 setuid 标志）。如果我在“sudo gdb”下运行它，那么一切正常。如果我将它作为“sudo ./my_name”运行，一切正常。

这是该程序的 ls -l 输出：

```
-rwsr-xr-x 1 root root 48222 Jun 23 08:14 my_name 
```

所以我的问题，没有特别的顺序：

*   （如何）我可以在 gdb 下运行具有不同有效 UID 的程序的不同部分吗？
*   当 ./program 已将 set-uid 设置为 root 时，为什么“sudo ./program”与“./program”不同？
*   为什么 mkstemp 在 setuid (to root) 程序中被普通用户调用时会失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:53:49.393

**1** 在 gdb 下正确调试 setuid 应用程序的唯一方法是以 root 身份运行 gdb。对 setuid 应用程序执行此操作的最明智的方法是在应用程序启动后附加到该应用程序。这样做的一个快速技巧是在 setuid 应用程序中添加一行：

```
kill(getpid(), SIGSTOP); 
```

这会导致它在此时停止，然后使用以下命令附加 gdb：

```
sudo gdb <application> <pid> 
```

然后，您将连接到应用程序并可以正常调试它。

**2** sudo 更改了规则，因为它允许将当前用户环境中的各种项目导出到 root 用户的环境中。这完全取决于当前的 sudo 配置，并且可以为您提供与 setuid 应用程序非常不同的环境，这就是为什么您需要依赖诸如停止应用程序然后在运行时附加到它等技巧的原因。

此外，应用程序中可能有逻辑来检测它是否在 setuid 环境中运行，而在 sudo 下运行时实际上并非如此 - 请记住，sudo 将所有进程的 id 字段（真实 uid、有效 uid 和保存的 uid）设置为相同值，setuid 没有（真正的 uid 仍然是原始调用者的 uid）。您可以使用[getresuid()](http://www.kernel.org/doc/man-pages/online/pages/man2/getresuid.2.html)调用来确定三个变量的状态。

**3**问题是`Permission Denied`消息的前缀为`sh:`; 这似乎意味着正在执行另一个试图访问该文件的子进程。调用 mkstemp 后，您可能希望放宽读取文件的权限，以便子进程能够读取文件。

# c# - 在静态类中有效地重用“HttpClient”

> ID：11169659
> 
> 赞同：1
> 
> 时间：2012-06-23T12:52:34.767
> 
> 标签：c#, .net, static, .net-4.0, httpclient

我正在我的`HttpClient`每个静态请求方法中重新创建一个实例，但已经[读到](http://social.msdn.microsoft.com/Forums/fi/netfxnetcom/thread/4e12d8e2-e0bf-4654-ac85-3d49b07b50af)（在大多数情况下）*重用*一个`HttpClient`实例是可取的。

`HttpClient`在静态类中重用实例的首选/推荐方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:02:36.627

由于您的请求方法是静态的，因此`HttpClient`也必须是`static`该类的成员才能被重用（或某种道德等价物）。

您还可以决定在此处添加更多抽象，例如，`static`使用`private static`getter 方法代替获取字段；这使您可以集中决定是否`HttpClient`应该重用或在每次调用的基础上返回另一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T08:44:39.930

我的理解是，只要您公开调用它，您就可以初始化 HTTP 客户端并重用该实例，这将是线程安全的，请参见此处的线程安全部分[https://msdn.microsoft.com/en-us/library/system。 net.servicepointmanager.dnsrefreshtimeout(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.dnsrefreshtimeout(v=vs.110).aspx) 如果您每次都创建一个新的 HTTPClient 调用，那么您所做的就是打开多个套接字。这篇文章（以及相关的评论）非常简洁地处理了这个话题。 [https://aspnetmonsters.com/2016/08/2016-08-27-httpclientwrong/](https://aspnetmonsters.com/2016/08/2016-08-27-httpclientwrong/)

# php - PHP 无法从 URL 打开/读取 CSV 文件，而我可以从 localhost 打开/读取它。怎么了？

> ID：11169662
> 
> 赞同：3
> 
> 时间：2012-06-23T12:53:05.607
> 
> 标签：php, csv

使用 php 我试图从在线存储的 .csv 文件（www.website.com/data/my_file.csv）中获取一些数据。在本地主机上测试代码（使用 xampp）时，一切正常，但是当我将文件移动到我的在线服务器时，它就不起作用了。我正在做的是：

```
$filesize=2000;
$handle = fopen("www.website.com/data/my_file.csv", "r") or die ('cannot open the file');
$raw = fread($handle, $filesize);
fclose($handle); 
```

这会给我“*无法打开文件*”。如果我从 localhost 尝试相同的代码，它可以工作。此外，我尝试了另一种方式：

```
$filesize=2000;
$handle = fopen("my_file.csv", "r") or die ('cannot open the file');
$raw = fread($handle, $filesize);
fclose($handle); 
```

这实际上有效，但问题是 .csv 文件应该从完整的 url 打开/读取。有什么我忽略的或者这只是错误的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:57:18.163

您是否使用某种共享主机帐户？许多地方不允许通过禁用 allow_url_fopen 指令进行远程调用。

尝试在文件开头运行它：

```
<?php
   ini_set("allow_url_fopen", 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:57:14.357

这可能是安全问题。我会尝试使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)。

```
$csv = file_get_contents("www.website.com/data/my_file.csv");
// limit maximum length
$csv = file_get_contents("www.website.com/data/my_file.csv", false, null, 0, $filesize); 
```

> file_get_contents() 是将文件内容读入字符串的首选方法。如果您的操作系统支持，它将使用内存映射技术来提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T12:56:01.757

`fopen('http://www.website.com/data/my_file.csv','r')`确保[`allow_url_fopen`](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)启用后使用。

# ios5 - iOS - 真正持久的数据？

> ID：11169669
> 
> 赞同：1
> 
> 时间：2012-06-23T12:53:52.280
> 
> 标签：ios5, persistence

我正在探索一种业务模型，该模型指定应用程序中每个用户可以调用多少次（昂贵的）函数。

现在，无论我保存什么，例如用户默认值，都会在删除应用程序时被删除。重新安装应用程序后，计数器归零。

我需要的是一种保存信息的方法，这样删除应用程序仍然会使信息保持原样。

我见过模仿已弃用的唯一标识符的示例，但这是针对每个设备的，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:45:06.737

钥匙串似乎是正确的方法。我可以在其中存储特定于用户的唯一 ID 以及用户默认值，这样也可以跟踪是否重新安装了应用程序。

# sorting - 快速排序逻辑

> ID：11169674
> 
> 赞同：0
> 
> 时间：2012-06-23T12:54:05.407
> 
> 标签：sorting, quicksort

我正在尝试在 java 中实现**快速排序**，但我有一个疑问。所以这是我的快速排序代码：

```
package com.sorting;

public class QuickSort implements Sort {

@Override
public int [] sort(int[] arr) {
    return quickSort(arr, 0, arr.length - 1);
}

private int [] quickSort(int[] numbers, int low, int high) {

    if (low < high) {
        int q = partitionTheArrayAroundPivot(numbers, low, high);

        if (low < q)
            quickSort(numbers, low, q);

        if ((q+1) < high)
            quickSort(numbers, q + 1, high);
    }

    return numbers;
}

private int partitionTheArrayAroundPivot(int[] numbers, int low, int high) {

    int pivot = selectPivot(numbers, low, high);
    int i = low;
    int j = high;

    while (true) {

            while (numbers[i] < pivot) {
            i++;
        }

            while (numbers[j] > pivot) {
            j--;
        }

        if ( i <= j) {
            swap(numbers, i, j);
            i++;
            j--;
        } else {
            return j;
        }

    }

}

private int selectPivot(int[] numbers, int low, int high) {
    return numbers[high];
}

private void swap(int[] numbers, int i, int j) {
    int temp = numbers[i];
    numbers[i] = numbers[j];
    numbers[j] = temp;
}

} 
```

**疑问 1：**我们不断增加索引 i 直到达到 >= pivot 的数字

```
while (numbers[i] < pivot)
    i++; 
```

同样，我们不断减少索引`j`，直到我们达到 <= pivot 的数字

```
while (numbers[j] > pivot)
    j--; 
```

因此，这意味着如果两个索引都在两个不同的位置（例如 1,0,1）在两个不同的位置枢轴，则两个索引也将退出循环，如果枢轴为 1，则 i 将为 0，j 将为 2。下面的条件将满足 if (i <= j) { .... } 但在这种情况下，它将无法对上述数组 (1,0,1) 进行排序，因为交换后我们正在增加 i 并减少 j 所以值变为 i = j = 1。之后，我将命中第三个元素，即 1，并再次以 i = 2 和 j = 0 的值退出循环，我们将无法对数组进行排序。

那么问题出在哪里？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:52:34.987

我会稍微重写代码，以便 selectPivot 返回索引：

```
private int selectPivotIndex(int[] numbers, int low, int high) {
    return high;
} 
```

然后分区函数可以将枢轴移到一边，并根据枢轴值对剩余的项目进行排序。一个循环就可以了，在这个实现中，重复的枢轴将在右侧结束：

```
private int partitionTheArrayAroundPivot(int[] numbers, int low, int high) {

    int pivotIndex = selectPivotIndex(numbers, low, high);

    swap(numbers, pivotIndex, high); // Not needed if selectPivotIndex always returns high
    int newPivotIndex = low;
    for(int i = low; i < high; i++)
    {
        if(numbers[i] < numbers[pivotIndex])
        {
            swap(numbers, i, newPivotIndex);
            newPivotIndex++;
        }
    }
    swap(numbers, newPivotIndex, pivotIndex);

    return newPivotIndex;
} 
```

最后，需要在`quickSort`方法中做一个小的调整，这样我们就不会陷入一个永恒的循环：

```
if (low < q)
      quickSort(numbers, low, q - 1); 
```

恕我直言，这种方法更易于理解和调试，希望它对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T03:55:56.153

使用
`while (numbers[i] <= pivot)`and `while (numbers[j] >= pivot)`你的代码就可以工作了

# php - mp3 通过 PHP 在 linux 上转换为 wav

> ID：11169681
> 
> 赞同：1
> 
> 时间：2012-06-23T12:55:40.460
> 
> 标签：php, linux, lame

我想要你关于如何通过 PHP 脚本在 Linux 上将 mp3 文件转换为 wav 的建议。

我在 lame 上取得了成功，但仅在 Windows 上，我将这里发布的 PHP 脚本放在一起`lame.exe`并`lame.xxx.dll`执行：

*   [使用 PHP 生成 MP3 波形（作者：Andrew；2010 年 4 月 29 日）](http://andrewfreiday.com/2010/04/29/generating-mp3-waveforms-with-php/)

但到目前为止一切顺利，我在 Linux 上做同样的事情并没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T13:12:51.563

对不起，但是 afaik php 只会让你弄乱 id3 标签。您将需要使用外部工具来完成此操作。

使用跛脚：

```
exec("lame –decode input.mp3 output.wav"); 
```

或使用 mpg123：

```
exec("mpg123 -w output.wav input.mp3"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T04:34:02.693

我正在使用 mpg123 将 *.mp3 文件转换为 *.wav。

// 安装 mpg123 {Ubuntu 12.04} sudo apt-get install mpg321

// 我的 PHP 脚本（示例）

```
<?php

# glob() :  to collect all files in a folder
# foreach() : to loop

foreach (glob("*.mp3") as $file)
{
    $act_name = explode ('.', $file);

    $command = "mpg123 -w {$act_name[0]}.wav $file";
    echo $command . "\n";
    exec($command)  
    echo "file converted {$file}\n";

    sleep(1);
} 
```

# .net - 使用 Mono.Cecil 确定类型是否实现接口

> ID：11169685
> 
> 赞同：2
> 
> 时间：2012-06-23T12:56:58.043
> 
> 标签：.net, vb.net, mono.cecil

我浏览了 Wiki 上的文档，但似乎有点薄。如何确定一个类型是否使用 Cecil 实现了给定的接口？对于我的特定实现，重要的是我实际上并未将类型加载到 AppDomain 中。

这是我到目前为止的代码：

```
Dim outputModule As ModuleDefinition = ModuleDefinition.ReadModule(outputFile)

For Each assemblyType As TypeDefinition In outputModule.Types
    'How to determine if assemblyType implements a specific interface?
Next 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T13:04:13.087

在 C# 中，我已经实现了它比较接口的全名：

```
if (assemblyType.Interfaces.Any(
  type => type.Resolve().FullName == typeof(YourInterface).FullName
)) {
  // ...
} 
```

`TypeDefinition`如果您的界面有一个，您也可以比较s。

# android - 根据主题在菜单中设置可绘制图标

> ID：11169688
> 
> 赞同：1
> 
> 时间：2012-06-23T12:57:24.920
> 
> 标签：android, themes, drawable

我正在创建一个支持 2.1 版和当前可用版本的应用程序。现在，在设计我正在创建的 ActionBar 时，我想利用用户当前主题和/或 Android 版本可用的可绘制对象。

Android 提供的每个版本中启用的可绘制对象都非常清晰明了，非常适合我的需求。问题。例如，我无法在整个项目的 XML 文件中访问 @android:drawable/ic_menu_refesh。当然有可能从特定的 android 版本复制图标并使用这些图标，但我真的不明白如果不从每个版本中复制图标的每个版本并跟踪 Android 的版本，我将如何使其正常工作当前正在运行并引用合适的drawable。

另一个问题，诸如 Sense 之类的主题（？）让事情变得更加困难。在我的应用程序中，我想使用设备的当前主题。就我而言，我有一个使用 Dark Holo 主题的 ICS 设备和一个使用其默认主题的 2.3.6 设备。在这些情况下，这意味着为 ActionBar/菜单选择合适的浅色可绘制对象。问题。在我的 HTC Sensation S 上的 Sense 中，菜单项的背景颜色是白色，这意味着我现在必须选择一个合适的深色图标。

我将如何做到这一点才能使用设备的当前主题，并且仍然提供可调整的可绘制对象，以便它们适合主题的外观和感觉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:58:09.370

如果我理解正确，您希望能够仅引用默认图标，例如“菜单刷新图标”，并让它像在系统应用程序中一样显示。我不知道如何做到这一点，并记得阅读 Android 文档时警告不要引用默认可绘制对象，因为这些图标可能会在未来的 Android 版本中发生变化，并且您的应用程序看起来不会像预期的那样。

通常，您需要为每个菜单项/操作栏项/通知/等创建自己的图标。有一些简单的工具可以为不同的系统主题创建自定义和默认的 Android 图标。您可以使用`res`文件夹中的资源标识符为不同的 API 版本/布局/密度/等设置不同的图标。

[http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)

我不明白您为什么将图标设置为灰色...我认为您忘记的是您的应用程序设置了主题，您可以选择所需的任何系统主题，或者具有从系统主题扩展的自定义主题。无论您选择深色还是浅色，您只需要您设置的主题的图标。唯一需要注意的是确保您拥有不同 API 版本的图标（即菜单图标 2.2、2.3 和 3.0+），您需要制作每个 API 版本并使用资源标识符来确保您的应用使用正确的一个。

如果您的应用程序支持多个主题，您可以让它为每个主题使用不同的图标。在我对类似问题的回答中查看如何执行此操作：

[根据样式更改操作栏菜单图标](https://stackoverflow.com/questions/12761677/change-actionbar-menu-icons-depending-on-style/14608585#14608585)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:41:44.067

我可以完成这项工作的唯一方法是复制我想要的 Android 提供的图标，然后将它们重新着色为中间的灰色阴影。不是一个非常理想的解决方案，但它必须这样做。

# jquery - jQuery - 使用控制对

> ID：11169689
> 
> 赞同：0
> 
> 时间：2012-06-23T12:57:41.873
> 
> 标签：jquery, selector

我同意问题标题含糊不清，但我找不到更好的。

问题：

```
 $('[id="SearchSnippetActor"]').autocomplete({
    source: function (request, response) {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "foo/foo.asmx",
            data: // pass data,
            dataType: "json",
            async: true,
            success: function (data) {
                // do something
                        label: 'blah blah',
                        val: 'blah blah'
                }))
            },                              
        });
    }, select: function (e, i) {    
                   $('#'+e.target.id).val(i.item.val);
                   $('#DisplaySnippetActor').text(i.item.label);
        return false;
    }
}); 
```

我有这些文本框和标签对。作为一个自动完成功能，每当我在文本框中选择一个值时，我都会在其中存储“val”，在标签中存储“label”。

它工作正常。问题是，对于每一对，我都必须复制整个代码并替换文本框/标签 ID。

是否有优化选择器以便我只需要编写一个函数？

示例对：

DisplaySnippetType : SearchSnippetType DisplaySnippetText : SearchSnippetText

谢谢，开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:01:54.947

您可以使用 class 而不是 id 分配给所有人。就像是

$('.SearchActorNameClass')....

# sql - SQL 返回的信息未存储在另一个表中

> ID：11169693
> 
> 赞同：0
> 
> 时间：2012-06-23T12:57:58.523
> 
> 标签：sql

我有两张表治疗和处方。

治疗包含患者_no、原因等。

处方包含 Patient_no、drug_code 等。

我想要做的是从治疗表中返回原因，其中患者_ID 不包含在处方表中，换句话说，返回已接受治疗但未获得处方的患者。

我已经尝试过这个和其他许多组合，但没有得到所需的结果。

```
Select Treatment.Reason
From Treatment LEFT OUTER JOIN Prescription
ON Treatment.Patient_No = Prescription.Patient_No 
```

任何指针或方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T13:00:16.240

你几乎用`LEFT OUTER JOIN`. 要查找没有处方的患者，请`NULL`在处方列中查找 s：

```
SELECT
   DISTINCT Treatment.Reason
FROM
   Treatment 
   LEFT OUTER JOIN Prescription ON Treatment.Patient_No = Prescription.Patient_No
WHERE Prescription.Patient_No IS NULL 
```

# javascript - Knockoutjs 与 || 的可见绑定 或者？

> ID：11169694
> 
> 赞同：1
> 
> 时间：2012-06-23T12:57:59.987
> 
> 标签：javascript, jquery, knockout.js

我想做一些基本的事情，比如：

```
data-bind="visible: x || y" 
```

显示 x 或 y 是否设置为 true

到目前为止，我尝试过的一切都失败了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T12:59:24.327

如果`x`和`y`是可观察的属性，那么您需要将它们称为方法：

```
data-bind="visible: x() || y()" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:00:44.257

在这样的公式中使用 observables 时，您需要将它们称为函数。

```
data-bind="visible: x() || y()" 
```

# cocos2d-iphone - 如何在 Box2d 中设置身体在特定轨迹中的移动

> ID：11169698
> 
> 赞同：-1
> 
> 时间：2012-06-23T12:59:52.013
> 
> 标签：cocos2d-iphone, box2d

如何让一些身体在特定的轨迹上运动？

我需要一些身体在无视重力的情况下不断上下移动。有什么办法可以用一些身体来做到这一点，或者我应该让它在每次迭代中手动创建一个特定位置的新身体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:17:23.323

您必须为它应该在的位置编写代码，并在每个模拟步骤之前设置它的位置。如果您希望其他可能从它反弹的物体正确运行，也可以设置它的速度。还要给它无限的质量，所以它是一个固定的物体，不会被撞击它的东西移动。

创建物体时像这样设置无限质量：

```
bodyDef.type = b2_staticBody; 
```

# jquery - jQuery可拖动取消选项

> ID：11169701
> 
> 赞同：1
> 
> 时间：2012-06-23T13:00:21.063
> 
> 标签：jquery, jquery-ui

我正在研究 jQuery 可拖动取消选项，但我没有得到任何示例来理解“取消选项”。

我可以举个例子吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T13:08:19.473

从[jQuery UI 文档](http://jqueryui.com/demos/draggable/#option-cancel) `cancel`选项...

> ... 防止从指定元素开始拖动。

让我们看看下面的例子。

*HTML：*

```
​&lt;div class="selector">This can be dragged</div>
​&lt;span class="selector">​​​​​​​This can be dragged</span>
<input type="button" value="This can be dragged" class="selector" />
<button class="selector">This can't be dragged</​​​​​​​​​​​​​​button>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

*JavaScript：*

```
$(".selector").draggable({
    cancel: "button"
});​ 
```

这里`button`元素有`selector`类，应该像其他具有相同类的元素一样拖动。但是，`cancel`为 all 设置了选项`button`，因此所有`button`具有类的元素`selector`都被排除在可拖动列表之外并且不能被拖动。

**演示：http:** [//jsfiddle.net/uPRaH/](http://jsfiddle.net/uPRaH/)

* * *

在下一个示例中，我们有许多可以拖动`li`的类元素。`selector`

```
<ul>
    <li class="selector">This can be dragged</li>
    <li class="selector">This can be dragged</li>
    <li class="selector not-this">This can't be dragged</li>
    <li class="selector">This can be dragged</li>
    <li class="selector">This can be dragged</li>
    <li class="selector">This can be dragged</li>
    <li class="selector">This can be dragged</li>
</ul>​ 
```

`not-this`让我们从可拖动列表中排除具有类的第三个元素。`cancel`使用选项也很容易：

```
$(".selector").draggable({
    cancel: ".not-this"
});​ 
```

**演示：http:** [//jsfiddle.net/uPRaH/1/](http://jsfiddle.net/uPRaH/1/)

* * *

在第三个示例中，我们可以看到`cancel`option 如何防止嵌套元素拖动。

对于以下标记...

```
<div class="selector">
    Draggable
    <div>Draggable</div>
    <span>Not draggable</span>
    <div>Draggable</div>
    Draggable
</div> 
```

...让我们可以`selector`通过任何手柄拖动，除了`span`：

```
$(".selector").draggable({
    cancel: "span"
});​ 
```

**演示：http:** [//jsfiddle.net/uPRaH/2/](http://jsfiddle.net/uPRaH/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:12:54.450

这个示例程序可以帮助你。要对此进行测试，请将列表项拖放到 textarea 中。您可以了解其功能。

```
 <html>
        <head>
            <style type="text/css">
                #divFields
                {
                    margin-right: 2em;
                }
                #txtMessageFields
                {
                    margin: 0;
                    padding: 1em 0 1em 3em;
                    font-weight:bold;
                    font-size:18px;

                }
            </style>
            <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.6.1.min.js"></script>
            <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>

            <script type="text/javascript">        
                $(document).ready(initialize);
                function initialize() 
                {
                    $("#divFields li").draggable
                    ({
                        helper: "clone",
                        cancel:"li#iComputer"
                    });

                    $("#divDroppedFields").droppable
                    ({
                        accept: "#divFields li",                            
                        drop: function (event, ui)
                        {                               
                                $(this).find('#txtMessageFields').append((ui.draggable.attr('data-value')));                        
                        }
                    });
                }
            </script>
        </head>
        <body>
            <div id="divFields">
                <ul>
                    <li data-value="iPhone">iPhone</li>
                    <li data-value="iPod">iPod</li>
                    <li data-value="iComputer" id="iComputer">iComputer</li>
                </ul>
            </div>
            <div id="divDroppedFields" class="ui-widget-content">
                <textarea id="txtMessageFields" cols="50" rows="10"></textarea>
            </div>
        </body>
    </html> 
```

# css - CSS在导航栏的浮动中垂直居中文本

> ID：11169705
> 
> 赞同：1
> 
> 时间：2012-06-23T13:00:46.370
> 
> 标签：css, html, vertical-alignment, navbar

我正在尝试在 html+css 中创建一个导航栏，类似于以下链接中的图像：

[http://i.imgur.com/5PEhv.png](http://i.imgur.com/5PEhv.png)

基本上，我在左侧浮动矩形/ div 中有一些灰色的大文本，在右侧浮动矩形/div 中有一个较小字体的链接列表，我希望该文本垂直居中而不必求助于摆脱浮动和调整灰色和红色框的左边距/右边距。这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:05:57.960

如果您知道红色容器的高度，那就很容易了。以这种方式提供**HTML**：

```
<div class="red">
    <a href="Home">Home</a>
    <a href="...">...</a>
    <a href="etc.">etc.</a>
</div> 
```

而**CSS**为：

```
.red {line-height: 50px; vertical-align: middle; background: #f00; font-family: tahoma, sans-serif; text-align: center; font-size: 11px; font-weight: bold;}
.red a {color: #fff; text-decoration: none;} 
```

看看这个[小提琴](http://jsfiddle.net/bmHBX/1/)！希望能帮助到你！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:47:45.850

在 div 中垂直显示文本似乎非常困难。

诀窍在于以下。

假设以下 HTML：

```
<div id="parent">
<p id="child"> text</p>
</div> 
```

现在您可以通过执行以下技巧垂直对齐文本。

```
#parent{
    display: table;
    ....
 }

 #child{
    display: talble-cell;
    vertical-align: center;
 } 
```

这样做会导致以下结果。 [http://jsfiddle.net/RLchH/1/](http://jsfiddle.net/RLchH/1/)

# c++ - C++ - 在构造函数中使用引用时出现语法错误

> ID：11169707
> 
> 赞同：-1
> 
> 时间：2012-06-23T13:00:56.450
> 
> 标签：c++, visual-studio-2008, syntax-error

我正在开发一个包装 Win32 的`mixerXXX`API 函数的小型 OOP/RAII 库。

我正在编写一个封装`MIXERLINE`结构的类，所以我的`MixerLine`类有这个作为它的标题：

```
#pragma once
#define UNICODE
#include <stdio.h>
#include <string>
#include <windows.h>
#include "MixerDevice.h"

//////////////////////////////

class MixerLine {

private:
    MIXERLINE _mixerLine;

public:

    MixerLine(MixerDevice& parentMixer, DWORD destinationIndex); 

    ~MixerLine();

}; 
```

但是我得到一个语法错误（在 VC9 中）：

> 错误 2 错误 C2061：语法错误：标识符 'MixerDevice' d:\tfs\misc\winwavein\mixerline.h

为什么消息没有更多帮助？我不知道它有什么问题。

FWIW，文件中根本没有错误`MixerDevice.h`。

编辑：这是原始的完整文件：

混合线.h

```
#pragma once

#define UNICODE
#include <stdio.h>
#include <string>

#include <windows.h>

#include "MixerDevice.h"

//////////////////////////////

class MixerLine {

private:
    MIXERLINE _mixerLine;

public:

    MixerLine(MixerDevice& parentMixer, DWORD destinationIndex); 

    ~MixerLine();

    // Properties

    DWORD getDestinationLineIndex() {
        return _mixerLine.dwDestination;
    }   

    DWORD getSourceIndex() {
        return _mixerLine.dwSource;
    }

    DWORD getLineId() {
        return _mixerLine.dwLineID;
    }

    DWORD getStatus() {
        return _mixerLine.fdwLine;
    }

    std:wstring getStatusString() {

        switch( _mixerLine.fdwLine ) {
            case MIXERLINE_LINEF_ACTIVE:
                return L"MIXERLINE_LINEF_ACTIVE";
            case MIXERLINE_LINEF_DISCONNECTED:
                return L"MIXERLINE_LINEF_DISCONNECTED";
            case MIXERLINE_LINEF_SOURCE:
                return L"MIXERLINE_LINEF_SOURCE";
            default:
                return L"";
        }

    }

    DWORD getUserData() {
        return _mixerLine.dwUser;
    }

    DWORD getComponentType() {
        return _mixerLine.dwComponentType;
    }
}; 
```

MixerDevice.h

```
#pragma once
#define UNICODE

#include <memory>
#include <stdio.h>
#include <iostream>
#include <vector>

#include <windows.h>

////////////////////////

#include "MixerLine.h"

class MixerDevice {

    private:
        DWORD     _deviceId;
        HMIXER    _mixerHandle;
        MIXERCAPS _mixerCaps;

    public:
        MixerDevice(DWORD deviceId);
        ~MixerDevice();

        void enumerateLines();

        // Properties

        DWORD getDeviceId() {
            return _deviceId;
        }

        HMIXEROBJ getHandle() {
            return (HMIXEROBJ)_mixerHandle;
        }

        // Caps

        WORD getManufacturerId() {
            return _mixerCaps.wMid;
        }
        WORD getProductId() {
            return _mixerCaps.wPid;
        }
        MMVERSION getDriverVersion() {
            return _mixerCaps.vDriverVersion;
        }
        WCHAR* getProductName() {
            return _mixerCaps.szPname;
        }
        DWORD getSupportBits() {
            return _mixerCaps.fdwSupport;
        }
        DWORD getDestinationCount() {
            return _mixerCaps.cDestinations;
        }
    }; 
```

MixerDevice.cpp（我要编译的文件）：

```
#include "MixerDevice.h"

using namespace std;

MixerDevice::MixerDevice(DWORD deviceId) {

    _deviceId = deviceId;

    MMRESULT result;

    result = mixerOpen( &_mixerHandle, deviceId, NULL, NULL, MIXER_OBJECTF_MIXER );
    if( result != MMSYSERR_NOERROR ) throw new exception("Call to mixerOpen failed.", result);

    result = mixerGetDevCaps( (UINT)_mixerHandle, &_mixerCaps, sizeof(MIXERCAPS) );
    if( result != MMSYSERR_NOERROR ) throw new exception("Call to mixerGetDevCaps failed.", result);
}

MixerDevice::~MixerDevice() {

    MMRESULT result = mixerClose( _mixerHandle );
    if( result != MMSYSERR_NOERROR ) exit(666);
}

// Methods

void MixerDevice::enumerateLines() {    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:19:45.493

您的代码中有循环包含，难怪它不起作用。您需要在标题中尽可能用前向声明替换包含。

**MixerLine.h** - 用前向声明替换包含：

```
//#include "MixerDevice.h"
class MixerDevice; 
```

并将实现移动到实现文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:08:50.750

正如 Luchian Grigore 已经说过的，如果前向声明比包含整个标题（至少，这里和恕我直言）足够的话，它会更好。

`#pragma once`对循环内含物没有帮助，它只能避免无限内含物。_

但包含开始于`MixerDevice.cpp`：

MixerDevice.cpp -- `#include`--> MixerDevice.h -- `#include`--> MixerLine.h -- `#include`-->MixerDevice.h

由于in ，最后一个`#include`指令什么也不做。预处理器组装单个文档（翻译单元），看起来像（使用或查看）：`#pragma once``MixerDevice.h``/P``/showIncludes`

1.  几个 StdLib 和 windows 标头的内容
2.  MixerLine.h 的内容
3.  MixerDevice.h 的内容
4.  MixerDevice.cpp 的内容

这就是编译器有效地接收到的输入。现在，当编译器到达以下内容中的行时`MixerLine.h`：

```
MixerLine(MixerDevice& parentMixer, DWORD destinationIndex); 
```

这个名字`MixerDevice`还不知道；该名称在文档内容的“下方”中介绍`MixerDevice.h`。您至少需要在`MixerDevice`使用其名称之前声明该类。您也可以更改您的包含顺序，因为`MixerDevice`目前不依赖于`MixerLine`，但是*您以后可能会遇到更多麻烦*。

在与 Luchian Grigore 讨论后，我想指出：

**不要通过颠倒包含顺序来解决问题，此解决方案仅适用于这种特殊情况，并且仅当您没有提及`MixerDevice.h`仅在中声明的名称时才有效`MixerLine.h`。如 Luchian Grigore 所述，请改用前向声明。**

# amazon-s3 - 我已完成工作的 AWS EMR 减速器输出在哪里（应该在 S3 上，但那里什么也没有）？

> ID：11169708
> 
> 赞同：1
> 
> 时间：2012-06-23T13:01:04.730
> 
> 标签：amazon-s3, amazon-web-services, elastic-map-reduce, missing-data

我遇到了一个问题，我在 AWS 的 EMR 上的 Hadoop 作业没有保存到 S3。当我在较小的样本上运行该作业时，该作业可以很好地存储输出。当我在完整的数据集上运行相同的命令时，作业再次完成，但在我指定输出的 S3 上没有任何内容。

显然[，AWS EMR 在 2009 年存在一个错误](https://forums.aws.amazon.com/thread.jspa?threadID=34011&tstart=0)，但它已“修复”。

其他人有过这个问题吗？我的集群仍然在线，希望数据被埋在某处的服务器上。如果有人知道我在哪里可以找到这些数据，请告诉我！

**更新：**当我查看其中一个减速器的日志时，一切看起来都很好：

```
2012-06-23 11:09:04,437 INFO org.apache.hadoop.fs.s3native.NativeS3FileSystem (main): Creating new file 's3://myS3Bucket/output/myOutputDirFinal/part-00000' in S3
2012-06-23 11:09:04,439 INFO org.apache.hadoop.fs.s3native.NativeS3FileSystem (main): Outputstream for key 'output/myOutputDirFinal/part-00000' writing to tempfile '/mnt1/var/lib/hadoop/s3/output-3834156726628058755.tmp'
2012-06-23 11:50:26,706 INFO org.apache.hadoop.fs.s3native.NativeS3FileSystem (main): Outputstream for key 'output/myOutputDirFinal/part-00000' is being closed, beginning upload.
2012-06-23 11:50:26,958 INFO org.apache.hadoop.fs.s3native.NativeS3FileSystem (main): Outputstream for key 'output/myOutputDirFinal/part-00000' upload complete
2012-06-23 11:50:27,328 INFO org.apache.hadoop.mapred.Task (main): Task:attempt_201206230638_0001_r_000000_0 is done. And is in the process of commiting
2012-06-23 11:50:29,927 INFO org.apache.hadoop.mapred.Task (main): Task 'attempt_201206230638_0001_r_000000_0' done. 
```

当我连接到这个任务的节点时，提到的临时目录是空的。

**更新 2：**在阅读[了 Hadoop 中 Amazon S3 和 S3n 之间的差异](https://stackoverflow.com/questions/10569455/difference-between-amazon-s3-and-s3n-in-hadoop)之后，我想知道我的问题是否是使用“s3://”而不是“s3n://”作为我的输出路径。在我的小样本（存储良好）和我的全部工作中，我使用了“s3://”。关于这是否可能是我的问题的任何想法？

**更新 3：**我现在看到在 AWS 的 EMR 上，s3:// 和 s3n:// 都映射到 S3 本机文件系统（[AWS EMR 文档](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/FileSystemConfig.html)）。

**更新 4：**我又重新运行了两次这项工作，每次都增加服务器和减速器的数量。这两个中的第一个完成了 89/90 减速器输出被复制到 S3。90th 说它根据日志复制成功，但 AWS Support 说文件不存在。他们已将此问题上报给他们的工程团队。我第二次运行更多的减速器和服务器实际上完成了所有数据复制到 S3（谢天谢地！）。一个奇怪的是，一些 reducer 需要 FOREVER 将数据复制到 S3——在这两次新运行中，有一个 reducer 的输出需要 1 或 2 个小时才能复制到 S3，而其他 reducer 最多只需要 10 分钟（文件是 3GB 左右）。我认为这与 EMR 使用的 S3NativeFileSystem 有问题有关（例如长期挂起——我当然要为此付费；以及未上传的所谓成功上传）。我会先上传到本地 HDFS，然后上传到 S3，但我是[在这方面也有问题](https://stackoverflow.com/questions/11181280/problems-using-distcp-and-s3distcp-with-my-emr-job-that-outputs-to-hdfs)（等待 AWS 工程团队的审查）。

TLDR；使用 AWS EMR 直接存储在 S3 上似乎有问题；他们的工程团队正在调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T00:53:53.343

这原来是 AWS 的一个错误，他们已经在最新的 AMI 版本 2.2.1 中修复了它，在[这些发行说明](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/EnvironmentConfig_AMIVersion.html#ami-versions-supported)中有简要描述。

我从 AWS 得到的长解释是，当 reducer 文件 > S3 的块限制（即 5GB？）时，会使用 multipart，但没有进行适当的错误检查，这就是为什么它有时会起作用，而其他时候不是。

如果其他人继续出现这种情况，请参阅我的案例编号 62849531。

# rdf - Sparql 替代推理 - 修改查询

> ID：11169709
> 
> 赞同：0
> 
> 时间：2012-06-23T13:01:41.300
> 
> 标签：rdf, sparql, semantic-web, 4store

据我所知，无法将 sparql inference("?link") 与 4store 一起使用。

但是有人告诉我，如果无法集成推理，可以稍微修改查询。

如何通过修改查询来避免使用推理？

# joomla - 针对不同 Joomla 用户类型的不同注册表单

> ID：11169718
> 
> 赞同：0
> 
> 时间：2012-06-23T13:02:58.490
> 
> 标签：joomla

我有两个用户组：客户和供应商。在基本注册时，我有一个单选按钮，可让我将新用户放入相应的用户组。

用户（客户或供应商）登录后，我需要为他们每个人提供一份额外的登记表，以便他可以提供具体的详细信息，例如客户必须提供车辆详细信息，而供应商必须提供他/她的银行信息。

那么登录后如何获取/创建两个不同的附加注册表单？我正在使用 Joomla 2.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:48:20.287

除非您打算使用某种社区组件，例如 CB 或 JomSocial，否则我相信您必须编写一个[自定义配置文件插件](http://docs.joomla.org/Creating_a_profile_plugin)来自己区分。

[社区](http://extensions.joomla.org/extensions/clients-a-communities/comomunities)的Joomla 扩展目录有很长的列表，您可以查看哪些选项最适合您的需求。

# ios - IOS Quartz 2D drawRect 和调整大小

> ID：11169730
> 
> 赞同：0
> 
> 时间：2012-06-23T13:05:30.200
> 
> 标签：ios, drawrect, cgcontext

我正在使用一个名为 Quarkee 的应用程序将徽标从 SVG 转换为 Quartz 2d 代码，这是一种享受。唯一的问题是我似乎无法弄清楚如何调整结果大小。如果我设置 UIView 的框架，drawRect 的结果会在框架中保持巨大。我如何让它成为我正在设置的框架的大小？

下面是一个输出的例子。

有人可以帮忙吗？

```
- (void)drawRect:(CGRect)rect
{

CGContextRef context = UIGraphicsGetCurrentContext();
CGColorSpaceRef colorspace_1 = CGColorSpaceCreateDeviceRGB();
CGFloat components_1[] = {0.9961,0.9961,0.9961, 1.0000};
CGColorRef color_1 = CGColorCreate(colorspace_1, components_1);
CGContextSetFillColorWithColor(context,color_1);

CGContextMoveToPoint(context, 0.4960,0.1090);
CGContextAddLineToPoint(context,662.9260,0.1090);
CGContextAddLineToPoint(context,662.9260,227.8780);
CGContextAddLineToPoint(context,0.4960,227.8780);
CGContextAddLineToPoint(context,0.4960,0.1090);
CGContextClosePath(context);

CGContextFillPath(context); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:04:16.440

这里的解决方案是使用 view.transform = CGAffineTransformMakeScale(0.5f, 0.5f); 调整视图大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:17:30.833

看看这些值：

```
CGContextMoveToPoint(context, 0.4960,0.1090);
CGContextAddLineToPoint(context,662.9260,0.1090);
CGContextAddLineToPoint(context,662.9260,227.8780);
CGContextAddLineToPoint(context,0.4960,227.8780);
CGContextAddLineToPoint(context,0.4960,0.1090); 
```

调用该`drawRect`方法时，您可以使用`self.bounds`视图的当前矩形并根据它调整这些值。您说您已经从应用程序生成了此代码 - 这些应用程序通常在生成代码时硬编码您绘制的图形的大小，因此您必须查看这些值与您绘制的图像的实际大小之间的关系和根据`self.bounds`大小使它们动态...

# json - 具有数组结构的 JSON 数据

> ID：11169733
> 
> 赞同：0
> 
> 时间：2012-06-23T13:05:36.627
> 
> 标签：json, web-services, http

我在我的应用程序中使用 Neo4j 和 ExtJS。

一件好事是两者都使用数组结构处理 JSON。

Neo4j 返回并且 ExtJS 可以像这样使用 JSON：

```
{
  columns: ["name", "age"],
  data: [
    ["Peter", 34],
    ["Mike", 52]
  ]
} 
```

代替：

```
[
  {"name": "Peter", "age" 34},
  {"name": "Mike", "age" 52},
] 
```

但是，从我的应用程序服务器的 HTTP API 中，我希望人们能够选择接收这些 JSON 结构中的哪一种。

所以它们都是 JSON，这意味着 HTTP 标头应该是“Accept”：“application/json”。但是我应该如何让他们选择其中一种结构呢？他们应该设置标题还是查询参数？什么是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:07:20.653

我认为请求中的一个简单参数就足够了。

# c# - C#“注册 COM 互操作”选项被禁用

> ID：11169748
> 
> 赞同：9
> 
> 时间：2012-06-23T13:08:10.217
> 
> 标签：c#, com, com-interop

我正在尝试从我的 C# 代码中创建 DLL，我发现一些[链接](http://richnewman.wordpress.com/2007/04/15/a-beginner%E2%80%99s-guide-to-calling-a-net-library-from-excel/)可以指导我创建我的 DLL 文件并根据需要在 Excel 中使用它。步骤之一是选中项目的“构建”选项卡中的“注册 COM 互操作”复选框。

不幸的是，**这个复选框总是被禁用**！有谁知道如何启用它？我正在使用 VS 2010。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T13:19:14.963

首先验证您的输出类型，他必须是类库而不是控制台应用程序。

其次，如果您的问题仍然存在，请打开您的 csproj 并修改您的节点

```
<RegisterForComInterop>true</RegisterForComInterop> 
```

![截屏](../Images/7778aa3df33817cfa4cbfacdf509fc2c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-07T19:28:01.610

我在使用新的 Visual Studio 2019 时遇到了同样的问题。创建类库的首选是 Class Library .Net 框架，这不起作用。您必须走几行才能找到类库（.NET 框架）C# Windows 库。这将起作用，前提是在项目属性中，您不要忘记在“程序集信息”中激活“使程序集副本可见”以及在构建中注册 com 互操作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-07-21T08:42:22.110

我刚遇到同样的问题。

发生的事情是，当我创建项目时，我选择了针对 .Net 框架的类库选项。

当我创建一个不针对 .Net 框架的新项目时，该选项再次启用。

# javascript - 如何在 Javascript 中将地点添加到 Google 地方信息？

> ID：11169754
> 
> 赞同：0
> 
> 时间：2012-06-23T13:09:14.013
> 
> 标签：javascript, post, geolocation, google-places-api

您能否指出有关如何通过 JavaScript 将地点添加到 google 地点的参考资料。

我发现的唯一参考是在[google.developers](https://developers.google.com/maps/documentation/places/#adding_a_place)上，但我不知道如何在 JavaScript 中实现他们的解决方案：

```
POST https://maps.googleapis.com/maps/api/place/add/json?sensor=true_or_false&key=api_key HTTP/1.1
Host: maps.googleapis.com

{
  "location": {
    "lat": -33.8669710,
    "lng": 151.1958750
  },
  "accuracy": 50,
  "name": "Google Shoes!",
  "types": ["shoe_store"],
  "language": "en-AU"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:23:36.110

编辑：刚刚意识到这在浏览器中不起作用。我在一个可以的应用程序中执行此操作，但如果您在浏览器中，这将违反同源策略。您无法发布到外部 URL 并获得回复。

JavaScript API 中的大多数（如果不是全部）功能也可以通过 Web 服务 API 获得。地点操作仅是 Web 服务。这仍然可以在客户端使用，因为 JavaScript 可以发出 HTTP 请求。这是一个很棒的[入门](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)指南。像[jQuery](http://api.jquery.com/category/ajax/?rdfrom=http://docs.jquery.com/mw/index.php?title=Ajax&redirect=no)这样的库可以让事情变得更简单。示例中的 JSON 数据是一个 POST 正文。因此，您只需将其创建为字符串并通过 POST 将其发送到 googleapis.com URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:43:09.457

您可以使用 JavaScript Maps API 的 Google Places Library： [https ://developers.google.com/maps/documentation/javascript/places](https://developers.google.com/maps/documentation/javascript/places)

# php - create GIF animation using Gmagick

> ID：11169755
> 
> 赞同：1
> 
> 时间：2012-06-23T13:09:23.380
> 
> 标签：php, animation, gif, animated-gif, gmagick

I have some jpg files i want to create gif animated from them. i cant find useful method in gmagick for this problem. any one know about it?

I need simple example for it. ty

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:24:13.587

Gmagick example on how to create a GIF picture from two PNG files:

```
$first = new Gmagick("example.0.png");
$first->setImageformat("gif");
$first->setImageDelay(100);
$second = new Gmagick ("example.1.png");
$first->nextImage();
$first->addImage($second);
$first->previousImage();
$first->write('example.gif'); 
```

> *Example taken from [https://bugs.php.net/bug.php?id=59420](https://bugs.php.net/bug.php?id=59420)*

Take care that [`Gmagick`](http://php.net/gmagick) internally keeps track at which image you are, that is why [`nextImage`^(*­Docs*)](http://php.net/gmagick.nextImage) is used before adding the second image and why [`previousImage`^(*­Docs*)](http://php.net/gmagick.previousImage) is used before writing it to disk.

Start with this two picture example and then change it to a version that adds pictures from an `array` and with three pictures. And then finally read the `array` from a directory from 0 to N pictures (e.g. with `glob`). Have fun!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-26T02:09:03.857

alone with run the next command be can do

open the terminal of command in linux and write it

```
convert -delay 25 1.png  2.png 3.png 4.png 5.png 6.png 7.png 8.png 9.png 10.png -loop 0 animate.gif 
```

you can to create the image with inkscape and export to .png .jpg or other format

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T13:51:07.043

**Please Try..**

[Creating an Animated GIF image](http://www.tjhsst.edu/~dhyatt/supercomp/n401a.html)

[ImageMagick v6 Animation basics](http://www.imagemagick.org/Usage/anim_basics/)

# ruby-on-rails-3 - Rails FormBuilder - 如何将 Select 与分组选项一起使用？

> ID：11169756
> 
> 赞同：0
> 
> 时间：2012-06-23T13:09:30.170
> 
> 标签：ruby-on-rails-3, forms, formbuilder

我有一个 Rails 表单，我试图在其中插入一个 Select formfield 。

我当前的代码是这样运行的 -

```
 <select id="selectservice"  name="service">

<% @categories.each do |category| %>

      <% @services= category.services %>
      <% @services.each do |service| %>
          <option  value="<%= service.id %>"><%= service.name %></option>
      <% end %>

<% end %>

</select> 
```

现在我想将其转换为 Formbuilder 样式，因为表单的其余部分都是该样式。而且我将能够插入此处缺少的变量。如何插入选项标签？

```
<%= form_for @appointment  do |f| %>
 <%= f.select :service_id, :name=>"service" %>

##How do I insert the Option tags here ?

<%= end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:42:35.323

我想我找到了答案。这可以通过 Select 的 Grouped Options 来实现

```
<%= f.grouped_collection_select :service_id,
                    @categories, :services, :name,
                    :id, :name , :id=>"selectservice"
                %> 
```

# php - 如何使用 php-mysql 在不同的表中显示每一行？

> ID：11169757
> 
> 赞同：-1
> 
> 时间：2012-06-23T13:09:42.773
> 
> 标签：php, mysql

我有三张桌子：

员工（EmployeeID，Fname，Lname...）
ProjectHeader（ProjectID，LeadID，Status....）
ProjectDetails（ProjectDetailsID，ProjectID....）

这是我当前的代码：

```
$get_projects = "SELECT DISTINCT projectheader.ProjectID, projectheader.ProjectName ,projectheader.Lead, projectheader.StartDate, projectheader.EndDate, projectheader.Status, projectheader.Remarks, CONCAT (employee.Firstname, ' ' ,employee.Lastname) AS EmployeeName
FROM employee, projectheader, projectdetails
WHERE projectheader.ProjectID = projectdetails.ProjectID
AND projectheader.Lead = employee.EmployeeID";

$result = mysql_query($get_projects);

$project_id = "";
$project_name = "";
$project_lead = "";
$project_start = "";
$project_end = "";
$project_status = "";
$project_remarks = "";
$table = "";
$table .= "<table border='1'> <th>ProjectID</th>" 
."<th>Project name</th>" 
."<th>Lead</th>" 
."<th>Start</th>" 
."<th>End</th>" 
."<th>Status</th>" 
."<th>Remark</th>";
while($row = mysql_fetch_array($result))
{
    $project_id = $row['ProjectID'];
    $project_name =  $row['ProjectName'];
    $project_lead = $row['EmployeeName'];
    $project_start = $row['StartDate'];
    $project_end = $row['EndDate'];
    $project_status = $row['Status'];
    $project_remarks = $row['Remarks'];

    $table .= "<tr>";
    $table .= "<td>" .$project_id ."</td>"; 
    $table .= "<td>" .$project_name ."</td>"; 
    $table .= "<td>" .$project_lead ."</td>"; 
    $table .= "<td>" .$project_start ."</td>"; 
    $table .= "<td>" .$project_end ."</td>"; 
    $table .= "<td>" .$project_status ."</td>"; 
    $table .= "<td>" .$project_remarks ."</td>"; 
    $table .= "</tr>";

}
$table .= "</table>";
echo $table;
?> 
```

我现在拥有的是这样的![在此处输入图像描述](../Images/5504bf24985b06792c430b17feae3e13.png)

我想要的不是将每一行都显示在一个表中，而是每一行都在表中。

![在此处输入图像描述](../Images/97919056f2414fa091a0726637313414.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:16:43.857

只需`table`在`while`循环内创建一个新表，它将为每个 SQL 结果行创建一个新表。请注意，您还缺少`tr`表头周围的标签 ( `th`)

```
while($row = mysql_fetch_array($result))
{
    $table .= "<table border='1'>"
    ."<tr><th>ProjectID</th>" 
    ."<th>Project name</th>" 
    ."<th>Lead</th>" 
    ."<th>Start</th>" 
    ."<th>End</th>" 
    ."<th>Status</th>" 
    ."<th>Remark</th></tr>";

...

    $table .= "<tr>";
    $table .= "<td>" .$project_id ."</td>"; 
    $table .= "<td>" .$project_name ."</td>"; 
    $table .= "<td>" .$project_lead ."</td>"; 
    $table .= "<td>" .$project_start ."</td>"; 
    $table .= "<td>" .$project_end ."</td>"; 
    $table .= "<td>" .$project_status ."</td>"; 
    $table .= "<td>" .$project_remarks ."</td>"; 
    $table .= "</tr>";
    $table .= "</table>";
}

echo $table; 
```

# android - 在 Google Map API 的自动补全教程中需要帮助

> ID：11169758
> 
> 赞同：2
> 
> 时间：2012-06-23T13:09:46.647
> 
> 标签：android, google-maps-api-3, autocomplete

我正在尝试在我的应用程序中使用**自动完成功能。**

搜索了一段时间后，我找到了以下教程：

[http://www.claytical.com/blog/android-dynamic-autocompletion-using-google-places-api](http://www.claytical.com/blog/android-dynamic-autocompletion-using-google-places-api)

*有一个未解析的变量，称为**s**。*创建 URL 的位置：

```
URLEncoder.encode(s.toString(), "UTF-8") + 
```

我不明白这个变量是从哪里来的。

这里几乎是本教程中的整个代码都经过了一点修改。

```
public class PlacesListSearchActivity extends Activity {

    private static final String TAG = "PlacesListActivity";

    public ArrayAdapter<String> adapter;
    public AutoCompleteTextView textView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.places_search);
        final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.item_list);
        final AutoCompleteTextView textView = (AutoCompleteTextView)
        findViewById(R.id.autoCompleteTextView1);
        adapter.setNotifyOnChange(true);
        textView.setAdapter(adapter);
        textView.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if (count%3 == 1) {
                adapter.clear();
                    GetPlaces task = new GetPlaces();
                    //now pass the argument in the textview to the task
                    task.execute(textView.getText().toString());
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
        // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {

        }

        });
    }

    class GetPlaces extends AsyncTask<String, Void, ArrayList<String>> {

        @Override
        // three dots is java for an array of strings
        protected ArrayList<String> doInBackground(String... args)
        {
            Log.d("gottaGo", "doInBackground");

            ArrayList<String> predictionsArr = new ArrayList<String>();

            try
            {
                //https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Vict&types=geocode&language=fr&sensor=true&key=AddYourOwnKeyHere
                URL googlePlaces = new URL(
                        "https://maps.googleapis.com/maps/api/place/autocomplete/json?input=" +
                        URLEncoder.encode(s.toString(), "UTF-8") +
                        "&types=geocode&language=en&sensor=true&key=" +
                        getResources().getString(R.string.googleAPIKey));

                URLConnection tc = googlePlaces.openConnection();
                BufferedReader in = new BufferedReader(new InputStreamReader(
                        tc.getInputStream()));

                String line;
                StringBuffer sb = new StringBuffer();
                //take Google's legible JSON and turn it into one big string.
                while ((line = in.readLine()) != null) {
                    sb.append(line);
                }
                //turn that string into a JSON object
                JSONObject predictions = new JSONObject(sb.toString()); 
                //now get the JSON array that's inside that object            
                JSONArray ja = new JSONArray(predictions.getString("predictions"));

                for (int i = 0; i < ja.length(); i++) {
                    JSONObject jo = (JSONObject) ja.get(i);
                    //add each entry to our array
                    predictionsArr.add(jo.getString("description"));
                }
            } catch (IOException e)
            {
            Log.e("YourApp", "GetPlaces : doInBackground", e);
            } catch (JSONException e)
            {
            Log.e("YourApp", "GetPlaces : doInBackground", e);
            }

            return predictionsArr;
        }

        //then our post

        @Override
        protected void onPostExecute(ArrayList<String> result){

        Log.d("YourApp", "onPostExecute : " + result.size());
        //update the adapter
        adapter = new ArrayAdapter<String>(getBaseContext(), R.layout.item_list);
        adapter.setNotifyOnChange(true);
        //attach the adapter to textview
        textView.setAdapter(adapter);

        for (String string : result) {
            Log.d("YourApp", "onPostExecute : result = " + string);
            adapter.add(string);
            adapter.notifyDataSetChanged();
        }

        Log.d("YourApp", "onPostExecute : autoCompleteAdapter" + adapter.getCount());

        }

    }

} 
```

***好的，我回答了我自己的问题。请看下面的答案！***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:43:47.933

好，我知道了。上面的 URL 应该这样计算：

```
 URL googlePlaces = new URL(
                    "https://maps.googleapis.com/maps/api/place/autocomplete/json?input=" +
                    URLEncoder.encode(args[0], "UTF-8") +
                    "&types=geocode&language=en&sensor=true&key=" +
                    getResources().getString(R.string.googleAPIKey)); 
```

# css - -webkit-transform: rotate - 在顶部隐藏元素

> ID：11169760
> 
> 赞同：0
> 
> 时间：2012-06-23T13:09:58.223
> 
> 标签：css, webkit, css-transforms

我正在使用`-webkit-transform: rotate(40 deg)`，似乎旋转元素隐藏了旋转元素顶部（**不是子**元素）的部分元素。

[我在这里](http://jsfiddle.net/Vzw8T/)用代码创建了一个 jsFiddle ，因为它更容易演示。

可能这是因为旋转的元素隐藏了其他元素的一部分，但我不想要这种效果。我该如何解决？

我用过`z-index`但是没用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:00:36.147

你正在做一个 3D 变换。你在小提琴中有'rotateY'而不是'rotate'。所以你正在移动按钮前面的飞机的一部分。通过将第二个按钮的代码更改为

```
$("div.buttonB").click( function() {
    $("div.background").css('-webkit-transform', 'rotateY(-190deg)')
}); 
```

​这样点击buttonB后，buttonB可以点击，但是buttonA不能点击。现在将 -190deg 更改为 190deg，您会发现它以其他方式工作。

如果您想深入了解 3D 转换，请查看此站点。

[http://thewebrocks.com/demos/3D-css-tester/](http://thewebrocks.com/demos/3D-css-tester/)

观看视频并使用控件进行游戏。希望这可以帮助。

# java - 在使用 commons-digester XML 规则时，如何排除一些我不需要的 XML 属性？

> ID：11169761
> 
> 赞同：1
> 
> 时间：2012-06-23T13:10:18.800
> 
> 标签：java, xml, xml-serialization, xml-parsing, apache-commons-digester

我正在尝试使用 apache-commons-digester 3 将 XML 加载到对象中。我面临的问题是某些标签具有我不感兴趣的属性。但是，如果我使用`<set-properties-rule>`规则，它会尝试将所有属性加载到对象属性中，并在发现某些属性没有匹配的属性时失败. 如何排除这些属性？我正在寻找类似的东西`<set-properties-rule exclude="/xmlns:xsi*"/>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:37:22.620

我认为您正在寻找的是**忽略**规则。我认为这是在某些 3.x 版本中添加的。

```
<set-properties-rule>   
    <ignore attr-name="whatever" />
    <alias attr-name="surname" prop-name="lastname" />
</set-properties-rule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T14:13:57.757

忽略元素不在消化器库中嵌入的 DTD 中，这会在运行时导致一些令人讨厌的异常。另一种方法是使用别名而不指定属性值，如下例所示：

```
<set-properties-rule>
    <alias attr-name="whatever" />
    <alias attr-name="surname" prop-name="lastname" />
</set-properties-rule> 
```

在上面的例子中，属性“whatever”被忽略了。

SetPropertiesRule 类的文档说：

> 如果属性名称为 null 或属性名称没有匹配的属性名称，则表示应忽略该属性。

很抱歉这个迟到的答案，但我刚刚在我的项目中遇到了这个问题并找到了这个解决方案。它对我来说非常好用（我正在使用digester3-3.2）。

# python - 使用破折号 ('-') 搜索类名

> ID：11169762
> 
> 赞同：0
> 
> 时间：2012-06-23T13:10:23.007
> 
> 标签：python, python-2.7, lxml, canonical-quickly

我`lxml`在 Python 中搞乱了，但似乎无法弄清楚如何使用该`cssselect()`函数来获取所有`div`的 class `reddit-entry`，因为它似乎不喜欢这个`-`角色。没有其他任何类名都`-`可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:16:01.420

这是 lxml.cssselect 中的解析器中的一个错误。我接管了项目的维护，并从 lxml 中提取了它。该错误已在新的 cssselect 中修复：[http ://packages.python.org/cssselect/](http://packages.python.org/cssselect/)

lxml 2.4 将使用新的 cssselect，但在那之前使用它的方法是：

```
from cssselect import HTMLTranslator
result = lxml_document.xpath(HTMLTranslator().css_to_xpath('div.reddit-entry')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:04:44.317

如果您通过 xpath 运行 cssselector 使用的代码，它确实可以工作......

```
obj.xpath("//div[contains(concat(' ', normalize-space(@class), ' '), ' reddit-entry ')]") 
```

# iphone - 如何在 UIWebView 中加载带有 HTML 文件的图像

> ID：11169763
> 
> 赞同：2
> 
> 时间：2012-06-23T13:10:32.413
> 
> 标签：iphone, html, ios, uiwebview

我想使用以下代码行在 UIWebView 中加载 HTML 文件：

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"01Numbers" ofType:@"html"];
NSURL *url=[NSURL fileURLWithPath:htmlFile];
NSURLRequest *request=[NSURLRequest requestWithURL:url];
[WebView loadRequest:request]; 
```

我能够加载 HTML 文件，但是这个 HTML 文件还包含一些图像，并且图像在视图中没有加载/可见，任何人都可以为此提出任何解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T07:36:12.530

HTML 文件：

```
<HTML>
<HEAD>
<TITLE>My Web Page</TITLE>
</HEAD>
<BODY>
<img alt="" src="1.jpg" style="width: 100px; height: 100px;"/>
<P>This is where you will enter all the text and images you want displayed in a browser window.</P>
</BODY>
</HTML> 
```

网页浏览代码：

```
 NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"desk" ofType:@"html"];
 NSURL *url=[NSURL fileURLWithPath:htmlFile];
 NSURLRequest *request=[NSURLRequest requestWithURL:url];
 [_webView loadRequest:request]; 
```

截屏：

![在此处输入图像描述](../Images/5753b7c4b7cd72a0c68ecb6b31fe7cd0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:22:07.383

您可以使用以下方式加载 HTML 文件，

通过这种方式，所有内容都会转换为 Data 并加载到 webView 中。（所有与 UI 相关的内容，如图像图标，都应该在项目的 Resources 目录中）

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"FileName" ofType:@"html"];  
  NSData *htmlData = [NSData dataWithContentsOfFile:filePath];  

 if (htmlData)
  {  
      [webView loadData:htmlData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:nil];  
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T13:25:51.353

我假设图像也在捆绑包中。您必须确保标签上设置的路径是对捆绑包中图像文件位置或存储位置的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T13:35:00.170

也许您应该尝试将所有本地网页放在一个文件夹中并使用

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"01Numbers" ofType:@"html" inDirectory:@"Your directory"]; 
```

# blackberry - 在 BlackBerry OS 4.5 中设置页眉和页脚

> ID：11169766
> 
> 赞同：1
> 
> 时间：2012-06-23T13:10:39.753
> 
> 标签：blackberry, java-me, background, header, footer

如何在 BlackBerry 中设置页眉和页脚？

另外，如何将透明图像设置为背景？

这两个问题都在 BlackBerry OS 4.5 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T13:15:08.710

参考这个[链接](http://www.blackberry.com/developers/docs/4.5.0api/net/rim/device/api/ui/container/MainScreen.html)

对于标题 -

```
setTitle(Field); 
```

对于页脚 -

```
setStatus(Field); 
```

# c++ - 如何告诉 C++ 正则表达式被视为纯文本/转义所有字符

> ID：11169767
> 
> 赞同：0
> 
> 时间：2012-06-23T13:10:52.413
> 
> 标签：c++, regex, std

我正在编写一个 c++ 函数来实现字符串替换。函数如下：

```
using namespace std;

string Replace(const string & str, const string & strOld,
            const string & strNew, bool useRegex, bool caseSensitive)
{
    regex::flag_type flag=regex::basic;
    if(!caseSensitive)
         flag |= regex::icase;

    if(!useRegex)
        // WHAT TO DO ?

    std::regex rx(strOld,flag);
    string output=regex_replace(str,rx,strNew);
    return output;
} 
```

它替换所有出现的`strOld`in `str`to `strNew`。我试图使用`std::regex`并`std::regex_replace`实现它。`useRegex`如果是真的，它会很好地工作。但是，如果`useRegex`是`false`，我无法告诉他们这`strOld`只是一个普通字符串而不是正则表达式字符串。

例如，当我打电话时：

```
string output=Replace("hello.",".","?",false,true); 
```

它`"??????"`在我期望的时候返回`"hello?"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:28:12.880

中途解决方案是预处理正则表达式并手动转义所有元字符。如果 C++11 中缺少此功能，这是最好的解决方案，从评论中听起来是这样。

# php - 如何在没有多个连接的情况下使用多个类？

> ID：11169768
> 
> 赞同：0
> 
> 时间：2012-06-23T13:10:53.427
> 
> 标签：php, mysql, database-connection

在到目前为止的页面中，我使用了一个连接类和一个类来保存页面的逻辑。但是，我现在有一个页面，我需要根据可能发生的不同场景使用多个类。

这是我能够完成的工作，但这似乎是不好的做法。我四处寻找，但找不到解决方案。所以我的问题是，什么是我正在尝试做的更好的方法。

```
<?php
require 'class/connect.php';
$db = new Connect();
require 'class/normal-page.php';
require 'class/get-page.php';
?>

    <?php if (!isset($_GET['id'])) { ?>
        <?php $normalpage = new NormalPage($db); ?>
    <?php
        } else {
        $id = $_GET["id"];
        $getpage = new Getpage($id, $db);
    ?>

        <h1><?php echo $getpage->getTitle(); ?></h1>
        <p><?php echo $getpage->getDescription(); ?></p>
    <?php } ?>

class Normalpage {

    function __construct($db) {

        $query = 'SELECT something FROM table';
        $result = $db->query($query);
}
} 
```

希望这些信息足够有意义。所以简而言之，我包括连接类并在其他两个类中使用该变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T13:15:54.513

这是处理数据库对象的正确方法。事实上，它被称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)设计模式，实际上是相当普遍的。您可能需要考虑将构造函数参数保存`$db`到成员变量中，以便其他类方法可以通过`$this->db`将成员变量声明为`private $db;`.

但是，您可能需要考虑[工厂](http://en.wikipedia.org/wiki/Factory_design_pattern)设计模式，因为它有助于组织页面的类。从上面的链接看这个例子：

```
class Factory
{
    public static function build($type)
    {
        $class = 'Format' . $type;
        if (!class_exists($class)) {
            throw new Exception('Missing format class.');
        }
        return new $class;
    }
}

class FormatString {}
class FormatNumber {}

try {
    $string = Factory::build('String');
}
catch (Exception $e) {
    echo $e->getMessage();
}

try {
    $number = Factory::build('Number');
}
catch (Exception $e) {
    echo $e->getMessage();
} 
```

# java - 如何匹配除一个以外的所有单词？

> ID：11169769
> 
> 赞同：3
> 
> 时间：2012-06-23T13:11:10.947
> 
> 标签：java, regex, negative-lookahead

我正在尝试匹配以 PRE 开头并以 PRE 结尾的表达式。我正在寻找一个惰性匹配，即匹配表达式中的结尾 PRE 应该是在起始 PRE 之后找到的第一个。我试图通过负前瞻正则表达式来实现这一点，在 RegExr 上进行测试：

正则表达式：

```
PRE(\w|\s)+(?!PRE) 
```

要匹配的表达式：

```
PRE erp PRE edas PRE 
```

上面的表达式与给定的正则表达式完全匹配，而我原本期望只匹配 PRE erp PRE。请建议一个延迟匹配以 PRE 开头和结尾的表达式的正则表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T13:16:20.757

假设您的语言支持惰性匹配（如果它支持环视，我想它也支持惰性量词）：

```
PRE(.*?)PRE 
```

由于此答案可能有误，请下次指定您的语言。正则表达式针对不同的语言具有不同的功能集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T13:23:23.990

```
"(PRE)(.*?)(PRE)" 
```

这在我的（C#）代码中对我有用，返回一个匹配项，PRE erp PRE。

```
 var codeBlocks = Regex.Matches("PRE erp PRE edas PRE", "(PRE)(.*?)(PRE)", RegexOptions.IgnoreCase | RegexOptions.Singleline);
        MessageBox.Show("Matches found: " + codeBlocks.Count.ToString() + "\nMatch: " + codeBlocks[0].Value); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T13:25:00.170

这应该做的工作：

```
(?<=PRE)(.+?)(?=PRE) 
```

[http://regexr.com?31bc5](http://regexr.com?31bc5)

# jquery - 在输入焦点/模糊上删除/添加 CSS 类

> ID：11169782
> 
> 赞同：8
> 
> 时间：2012-06-23T13:13:58.150
> 
> 标签：jquery, css, html, focus, blur

我有一个带有一些输入字段的表单`<div>`，每个输入的右侧都有一点描述。我想要的是为每个输入启用一个 CSS 类，`<div>`并使用它自己的描述。

我在这里做了一个工作示例：http: [//jsfiddle.net/VL2FH/8/](http://jsfiddle.net/VL2FH/8/)。这`<div>`在输入的焦点状态上使用 :hover 状态。

我想问的是：是否有某种“捷径”，所以我不必做：

```
$('#submit_name').bind('blur', function(){
   $('#submit_name-desc').removeClass('input-desc-hover').addClass('input-desc');
});
$('#submit_name').bind('focus', function(){
  $('#submit_name-desc').removeClass('input-desc').addClass('input-desc-hover');
});
​ 
```

对于表单中的每个输入字段。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-23T13:31:25.677

您可以像这样概括`focus and blur`回调

```
$('input').on('blur', function(){
   $(this).next('div').removeClass('input-desc-hover').addClass('input-desc');
}).on('focus', function(){
  $(this).next('div').removeClass('input-desc').addClass('input-desc-hover');
}); 
```

如果您的描述`divs`在输入元素旁边，它将正常工作。

并且最好[`.on()`](http://api.jquery.com/on)用于事件绑定。​</p>

**演示：http:** [//jsfiddle.net/joycse06/VL2FH/11/](http://jsfiddle.net/joycse06/VL2FH/11/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T22:54:04.927

您也可以仅通过使用相邻兄弟选择器在 CSS 中实现相同的效果，`+`以便任何`.input-desc`直接跟随焦点输入的内容都将应用不同的规则：

```
input:focus + .input-desc {
    cursor: default;
    width: 265px;     
    -moz-box-shadow: 0px 2px 5px #aaaaaa;
    -webkit-box-shadow: 0px 2px 5px #aaaaaa;
    box-shadow: 0px 2px 5px #aaaaaa; 
    animation:desc 0.3s;
    -moz-animation:desc 0.3s; /* Firefox */
    -webkit-animation:desc 0.3s; /* Safari and Chrome */  
} 
```

从版本 8 开始，现代浏览器和 Internet Explorer 支持相邻兄弟选择器。 ( [http://reference.sitepoint.com/css/adjacentsiblingselector](http://reference.sitepoint.com/css/adjacentsiblingselector) )

这是一个小提琴：http: [//jsfiddle.net/VL2FH/14/](http://jsfiddle.net/VL2FH/14/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T13:32:20.423

检查下面的示例程序

```
 <html>
        <head>
            <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
            <script type="text/javascript">
                $(document).ready(function()
                {

                    $('#submit_name').bind('blur', function()
                    {
                        $('#submit_name-desc').removeClass('cls1').addClass('cls2');
                    });

                    $('#submit_name').bind('focus', function()
                    {
                        $('#submit_name-desc').removeClass('cls2').addClass('cls1');
                    });
                });
            </script>

            <style>
                .cls1
                {
                    background-color: #ccc;                
                }

                .cls2
                {
                    background-color: #fff;
                }
                .submit_name-desc
                {
                    height: 30px;
                    border: 1px;
                }
            </style>
        </head>
        <body>
            <input type="text" id="submit_name" />
            <div id="submit_name-desc">
                Name Description
            </div>
        </body>
    </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T13:22:53.093

使用类而不是 id 来选择元素。如果你的输入元素有`submit-name`类和你的描述`desc`类，你可以这样做：

```
$('.submit-name').bind('blur', function(){
    $("~ .desc", this).first().removeClass('input-desc-hover').addClass('input-desc');
}).bind('focus', function(){
    $("~ .desc", this).first().removeClass('input-desc').addClass('input-desc-hover');
}); 
```

`$("~ .desc", this).first()`将选择具有类的输入元素 ( `this`)的第一个同级`desc`。

这是一个更新的 jsFiddle：http: [//jsfiddle.net/miroslav/VL2FH/13/](http://jsfiddle.net/miroslav/VL2FH/13/)

**编辑**

[不过， Joy 的解决方案](https://stackoverflow.com/a/11169903/119230)要`$(this).next()`好得多。

# facebook - 发布在 FB 业务页面墙上的 Java 代码

> ID：11169785
> 
> 赞同：0
> 
> 时间：2012-06-23T13:14:34.567
> 
> 标签：facebook, facebook-wall

有谁知道如何从我的网络服务器（Java）在 facebook BUSINESS 页面墙上发布文本/图像。

我知道如何在个人资料（涉及应用程序）上执行此操作，但对于业务页面我不知道，因为我发现无法为 FB 业务页面创建应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:18:41.393

您也可以使用应用程序执行此操作，但首先会获得[页面访问令牌](https://developers.facebook.com/docs/authentication/pages/)。

# model-view-controller - 简单煎茶 2.0 mvc 列表

> ID：11169786
> 
> 赞同：0
> 
> 时间：2012-06-23T13:14:41.850
> 
> 标签：model-view-controller, extjs, sencha-touch-2

我正在尝试编写我的第一个简单的 mvc 应用程序。我有一个主视图和一个产品视图。我也有一个主控制器。我的产品视图扩展了 Ext.List。我的问题是即使我设置了数据和 itemTpl，列表也没有显示任何内容。这是我的代码：

应用程序.js

```
Ext.application({
    name: 'SenchaTest',

    controllers: ['Main'],

    launch: function() {
        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        Ext.create('SenchaTest.view.Main');
    },
}); 
```

查看/Main.js

```
Ext.define('SenchaTest.view.Main', {
    extend: 'Ext.TabPanel',
    requires:['Ext.data.Store'],

    config: {
        fullscreen: true,
        items:[
            {
                xtype:'productspage',
                title:'Products',
                data: [
                        { title: 'Item 1' },
                        { title: 'Item 2' },
                        { title: 'Item 3' },
                        { title: 'Item 4' }
                ],
                itemTpl:'{title}'
            }
        ]
    },

    initialize: function() {
        console.log('Main view initialize');
    }

}); 
```

查看/Products.js

```
Ext.define('SenchaTest.view.Products', {
    extend: 'Ext.List',
    xtype: 'productspage',

    initialize: function() {
        console.log('Products view initialize');
    },

}); 
```

控制器/Main.js

```
Ext.define('SenchaTest.controller.Main',{
    extend: 'Ext.app.Controller',
    config:{
        views:['Main', 'Products'],
    },

    launch: function() {
        console.log('Main Controller launch');
    },

    init: function() {
        console.log('Main Controller init');
    }
}); 
```

这是我的控制台中显示的内容：

```
Main Controller init 
Products view initialize 
Main view initialize 
Main Controller launch 
```

所以我的视图和控制器被启动。但我的产品列表中没有显示任何内容。列表组件似乎已加载，因为拖动它时我可以看到滚动条。

**奇怪的是，如果我将 xtype: 'productspage' 更改为 xtype:'list' .... 它可以工作....但是我的产品视图扩展了 Ext.List ... 所以不一样吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:46:22.333

尝试为您的主视图设置布局

```
config: {
    fullscreen: true,
    layout:'fit', <---------- the item is gonna fit the screen
    items:[
        {
            xtype:'productspage',
            title:'Products',
            data: [
                    { title: 'Item 1' },
                    { title: 'Item 2' },
                    { title: 'Item 3' },
                    { title: 'Item 4' }
            ],
            itemTpl:'{title}'
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T05:56:31.937

让我们尝试将所有配置（标题、数据、itemTpl）放入您的`productsPage`定义中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:49:11.500

终于找到问题了.. omg 这都是因为视图 ​​Products.js 的初始化覆盖没有调用基本方法...

# javascript - 带有 jQ uery 倒计时的 JavaScript 日期

> ID：11169788
> 
> 赞同：0
> 
> 时间：2012-06-23T13:15:08.727
> 
> 标签：javascript, jquery

我试图从 2 小时开始显示一个简单的倒计时，如下所示：

```
$(function () {

    var timeout = new Date(20000); 

    $('#countdown').countdown({until: timeout, compact: true, format: 'HMS'});
}); 
```

但是我只是得到00:00:00，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T13:24:06.343

你得到了`00:00:00`，因为`new Date(20000);`实际上是

```
Thu Jan 01 1970 00:00:20 GMT+0000 (GMT) 
```

就像40年前一样。:D 你需要做的是：

```
var timeout = new Date(Date.now() + 20000); 
```

或者

```
var timeout = 20000; 
```

顺便说一句：两个小时不是`20000`，它是

```
1000 (ms) * 60 (s) * 60 (min) * 2 == 7200000 
```

# ruby - 如何在 Ruby 中遍历部分哈希？

> ID：11169791
> 
> 赞同：1
> 
> 时间：2012-06-23T13:15:31.190
> 
> 标签：ruby, hash, iterator

```
h = Hash.new
(1..100).each { |v| h.store(v * 2, v*v) } 
```

在不使用键的情况下迭代哈希的给定部分的最佳方法是什么？例如，从元素 10 到元素 20？使用 Ruby 1.9.3。

编辑 - 回应戴夫的评论：
最初我想通过键访问数据（因此是哈希）。但我也想按元素编号进行迭代。顺便说一句，每个元素都是一个哈希。

那么，设计可以通过元素编号迭代或通过键访问的散列散列或散列数组的最佳方法是什么？数据如下所示。缺少日期。

2011 年 6 月 23 日
-> 5、6、8、3、6 2011 年 6 月 26 日 -> 6、8、4、8、5 2011 年 6 月 27 日
-> 8、4、3、2、7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:50:26.847

如果我理解您的要求，您可以按如下方式迭代您的一部分哈希。这为您提供了第 1001 到第 2000 个值：

```
h.keys[1000..1999].each do |key|
    # Do something with h[key]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:43:45.743

我认为你最好使用 Array （Ruby 1.9.3 中的哈希是有序的，但访问方法是键）。所以：

```
a = h.values
# or
a = h.to_a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T21:36:19.103

```
h = Hash.new
(1..100).each { |v| h.store(v * 2, v*v) }

#for an array of arrays
h.drop(9).take(10) #plus an optional block
#if the slice must be a hash:
slice = Hash[h.drop(9).take(10)] 
```

但是，如果这是一个经常重复的操作，那么最好使用数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T14:03:55.130

将其转换为数组，然后对其进行[切片](http://ruby-doc.org/core-1.9.3/Array.html#method-i-5B-5D)：

```
h.to_a[10..20].each { |k, v| do_stuff } 
```

请注意，在 Ruby 1.9 之前，不保证哈希中元素的顺序，因此这不一定会像您期望的那样工作。

或者，您可以使用`each_with_index`并跳过不需要的元素：

```
h.each_with_index do |(k, v), i|
  next unless (10..20).include?(i)
  # do stuff
end 
```

# java - 如何在 webspec 上禁用 javascript？

> ID：11169794
> 
> 赞同：0
> 
> 时间：2012-06-23T13:16:08.100
> 
> 标签：java, watij

有没有办法在 webspec 上禁用 javascript？例如，在 htmlunit 上完成了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:10:55.090

这个问题之前在 Watij Google Groups 上被问过。

[禁用 Javascript](https://groups.google.com/forum/?fromgroups#!searchin/watij/disable%2420javascript/watij/_t9NerpLHtY/au7SQaT-jtEJ)

# html - 由于在页面顶部插入的文本而产生的空白

> ID：11169800
> 
> 赞同：3
> 
> 时间：2012-06-23T13:16:43.130
> 
> 标签：html, css

我对真正使用 HTML/CSS 有点陌生，所以这可能是一个愚蠢的问题。

我的问题是页面顶部的持久空白。起初我认为这是关于边距或填充的东西，正如谷歌和 StackOverflow 所建议的那样，但据我所知，这与此无关。我将其缩小到在开始正文标记之后添加的一段文本。

这就是我的意思：

如果我在文件上的代码是（简化，但这足以引起效果）：

`<html><body><p>text</p></body></html>`

当我在 Chrome 中打开它并使用开发人员工具查看元素时，它是这样的：

`<html><body>""<p>text</p></body></html>`

如果我删除“”，它会完美呈现。现在我有几行 Javascript 来从每个页面中删除“”，但这显然并不理想。

另外值得注意的是，如果没有在正文中放置标签，如下所示：

`<html><body>text</body></html>`

然后不插入“”。

除了 Chrome，我在 Firefox 和 IE9 上进行了测试，同样的事情发生了。我在这里想念什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:52:05.203

谢谢。你的评论很棒。我没有脚本，只有纯 HTML，但正如 Jon 指出的那样，它是动态生成的。一旦我意识到所涉及的内容（我承认我应该早点意识到......），很容易找到答案：

[Django 模板继承破坏了站点布局](https://stackoverflow.com/questions/9112104/django-template-inheritance-breaks-site-layout)

解决了。再次感谢。

# spotify - 在应用内共享特定视图

> ID：11169802
> 
> 赞同：1
> 
> 时间：2012-06-23T13:16:44.513
> 
> 标签：spotify

如何通过像这样的标准共享弹出框在应用程序内共享特定视图？

```
models.application.showSharePopup(document.getElementById("share_playlist"), "spotify:app:whatsnew:home"); 
```

这给出了错误

```
Uncaught Error: The provided URI cannot be shared. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:46:18.293

简而言之：你不能。分享弹窗目前只支持分享一些项目，如曲目、艺术家、专辑和播放列表。

# css - Zombie.js 在页面上找不到按钮元素

> ID：11169803
> 
> 赞同：4
> 
> 时间：2012-06-23T13:16:58.973
> 
> 标签：css, node.js, zombie.js

我正在尝试使用zombie.js 提交表单，而pressButton() 失败并显示“错误：没有按钮'xxx'”，其中xxx 是选择器。这是应用程序：

```
var Browser = require('zombie');
b = new Browser();
b.visit('https://www.example.com/login/', function() {
        b.
          fill('name', 'My Name').
          fill('code', 'My Code').
          pressButton('submit', function() {
                console.log(b.html());
          });
}); 
```

这是表格：

```
<form method="post" class="login">
    <p> <label for="name"> <span id="nameprompt">Your Name:</span> </label> </p>
        <input name="name" id="name" value="" size="40" maxlength="40" />
    <p> <label for="code"> <span id="codeprompt">Bar Code</span> </label> </p>
        <input name="code" id="code" type="PASSWORD" value="" size="40" maxlength="40" />
    <div class="formButtonArea">
        <input type="image" src="/screens/pat_submit.gif" border="0" name="submit" value="submit" />
    </div>
</form> 
```

除了明显的“提交”之外，我尝试了一堆选择器，包括“.formButtonArea input”之类的东西，但没有成功。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:14:21.993

您似乎需要输入 type="submit" （或 type="button" 可能）。根据[https://groups.google.com/forum/?fromgroups=#!topic/zombie-js/8L0_Cpn8vVU](https://groups.google.com/forum/?fromgroups=#!topic/zombie-js/8L0_Cpn8vVU)，作者对*clickLink*的评论，很可能*clickButton*会做同样的事情：找到按钮，然后触发*click*。

希望能帮助到你。

# haskell - 无法安装 c2hs 和语言-c

> ID：11169804
> 
> 赞同：8
> 
> 时间：2012-06-23T13:17:00.107
> 
> 标签：haskell, cabal

我在这里使用 cabal 来安装 package `c2hs`。但是，它需要快乐，所以我安装`happy`了`cabal install happy`.

之后，在尝试安装时`c2hs`，`language-c`我都`package happy not found`上了。

这是终端日志：

```
~> cabal install happy     
Resolving dependencies...
[1 of 1] Compiling Main             ( /tmp/happy-1.18.9-12936/happy-1.18.9/Setup.lhs, /tmp/happy-1.18.9-12936/happy-1.18.9/dist/setup/Main.o )

/tmp/happy-1.18.9-12936/happy-1.18.9/Setup.lhs:6:52:
    Warning: In the use of `buildVerbose'
             (imported from Distribution.Simple.Setup):
             Deprecated: "Use buildVerbosity instead"

/tmp/happy-1.18.9-12936/happy-1.18.9/Setup.lhs:7:52:
    Warning: In the use of `defaultUserHooks'
             (imported from Distribution.Simple):
             Deprecated: "Use simpleUserHooks or autoconfUserHooks, unless you need Cabal-1.2
             compatibility in which case you must stick with defaultUserHooks"

/tmp/happy-1.18.9-12936/happy-1.18.9/Setup.lhs:12:26:
    Warning: In the use of `try'
             (imported from System.IO.Error):
             Deprecated: "Please use the new exceptions variant, Control.Exception.try"
Linking /tmp/happy-1.18.9-12936/happy-1.18.9/dist/setup/setup ...
Warning: defaultUserHooks in Setup script is deprecated.
Configuring happy-1.18.9...
Building happy-1.18.9...
Preprocessing executable 'happy' for happy-1.18.9...
[ 1 of 18] Compiling NameSet          ( src/NameSet.hs, dist/build/happy/happy-tmp/NameSet.o )
[ 2 of 18] Compiling Target           ( src/Target.lhs, dist/build/happy/happy-tmp/Target.o )
[ 3 of 18] Compiling AbsSyn           ( src/AbsSyn.lhs, dist/build/happy/happy-tmp/AbsSyn.o )
[ 4 of 18] Compiling ParamRules       ( src/ParamRules.hs, dist/build/happy/happy-tmp/ParamRules.o )
[ 5 of 18] Compiling GenUtils         ( src/GenUtils.lhs, dist/build/happy/happy-tmp/GenUtils.o )
[ 6 of 18] Compiling ParseMonad       ( src/ParseMonad.lhs, dist/build/happy/happy-tmp/ParseMonad.o )
[ 7 of 18] Compiling Lexer            ( src/Lexer.lhs, dist/build/happy/happy-tmp/Lexer.o )
[ 8 of 18] Compiling Parser           ( dist/build/happy/happy-tmp/Parser.hs, dist/build/happy/happy-tmp/Parser.o )
[ 9 of 18] Compiling AttrGrammar      ( src/AttrGrammar.lhs, dist/build/happy/happy-tmp/AttrGrammar.o )
[10 of 18] Compiling AttrGrammarParser ( dist/build/happy/happy-tmp/AttrGrammarParser.hs, dist/build/happy/happy-tmp/AttrGrammarParser.o )
[11 of 18] Compiling Grammar          ( src/Grammar.lhs, dist/build/happy/happy-tmp/Grammar.o )
[12 of 18] Compiling First            ( src/First.lhs, dist/build/happy/happy-tmp/First.o )
[13 of 18] Compiling LALR             ( src/LALR.lhs, dist/build/happy/happy-tmp/LALR.o )
[14 of 18] Compiling Paths_happy      ( dist/build/autogen/Paths_happy.hs, dist/build/happy/happy-tmp/Paths_happy.o )
[15 of 18] Compiling ProduceCode      ( src/ProduceCode.lhs, dist/build/happy/happy-tmp/ProduceCode.o )
[16 of 18] Compiling ProduceGLRCode   ( src/ProduceGLRCode.lhs, dist/build/happy/happy-tmp/ProduceGLRCode.o )
[17 of 18] Compiling Info             ( src/Info.lhs, dist/build/happy/happy-tmp/Info.o )
[18 of 18] Compiling Main             ( src/Main.lhs, dist/build/happy/happy-tmp/Main.o )
Linking dist/build/happy/happy ...
Installing executable(s) in /home/david/.cabal/bin
~> cabal install c2hs      
Resolving dependencies...
Configuring language-c-0.3.2.1...
cabal: The program happy is required but it could not be found.
cabal: Error: some packages failed to install:
c2hs-0.16.3 depends on language-c-0.3.2.1 which failed to install.
language-c-0.3.2.1 failed during the configure step. The exception was:
ExitFailure 1
exit 1
~> cabal install language-c
Resolving dependencies...
Configuring language-c-0.4.2...
cabal: The program happy is required but it could not be found.
cabal: Error: some packages failed to install:
language-c-0.4.2 failed during the configure step. The exception was:
ExitFailure 1
exit 1
~> 
```

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T13:38:54.670

我不得不添加`~/.cabal/bin`到我的路径中，然后它起作用了。

# performance - 系统调用与函数调用之间的性能差异

> ID：11169809
> 
> 赞同：8
> 
> 时间：2012-06-23T13:17:26.973
> 
> 标签：performance, x86, kernel, system-calls

我经常听到驱动程序开发人员说尽可能避免内核模式切换是件好事。我无法理解确切的原因。首先我的理解是——

1.  系统调用是软件中断。在 x86 上，它们是通过使用 sysenter 指令触发的。它实际上看起来像一个分支指令，它从机器特定的寄存器中获取目标。
2.  系统调用实际上不必更改地址空间或进程上下文。
3.  不过，它们确实将寄存器保存在进程堆栈上，并将堆栈指针更改为内核堆栈。

在这些操作中，系统调用几乎就像一个普通的函数调用一样工作。尽管 sysenter 可能表现得像一个错误预测的分支，这可能导致处理器管道中的 ROB 刷新。即使这也不是很糟糕，它就像任何其他错误预测的分支一样。

我听到一些人在 Stack Overflow 上回答：

1.  你永远不知道系统调用需要多长时间 - [我] 是的，但任何功能都是如此。所需时间取决于功能
2.  它经常是调度点。- [me] 进程可以重新调度，即使它一直在用户模式下运行。例如，`while(1);`不保证无上下文切换。

实际的系统调用成本来自哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:14:43.840

您没有说明您要询问的操作系统。无论如何，让我尝试一个答案。

CPU 指令不应与系统调用的概念`syscall`及其[在](http://en.wikipedia.org/wiki/System_call)各自操作系统中的表示相混淆。`sysenter`

通过阅读*英特尔® 64 和 IA-32 架构开发人员手册*[第 2A 卷](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-2a-manual.html)（对于，请参阅第 3-392 页）和第**2B**[卷](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-2b-manual.html)（对于请参阅第 4-463 页）。也不要忘记看看它。 *`int``sysenter``iretd``sysexit`*

 *随意计算操作的伪代码会得出：

*   408行`int`
*   55行`sysenter`

**注意：**尽管现有的答案是正确的，`sysenter`并且`syscall`不是中断或与中断有任何关系，*但 Linux 和 Windows 世界中的旧内核**使用中断来实现其系统调用机制***。在 Linux 上，这曾经是`int 0x80`在 Windows 上`int 0x2E`。因此，在那些内核版本上，IDT 必须准备好为相应的中断提供中断处理程序。在较新的系统上，确实如此，`sysenter`和`syscall`指令已经完全取代了旧的方式。使用`sysenter`它的是 MSR（机器特定寄存器）`0x176`，它使用处理程序的地址进行初始化`sysenter`（请参阅下面链接的阅读材料）。

* * *

## 在 Windows ...

就像在 Linux 上一样，Windows 上的系统调用会导致切换到内核模式。NT 的调度程序不提供关于授予线程的时间的任何保证。它还从线程中抽出时间，甚至可能最终导致线程饥饿。一般来说，可以说用户模式代码可以被内核模式代码抢占（除了极少数非常具体的例外情况，您肯定会在“高级驱动程序编写课程”中获得这些例外情况）。如果我们只看一个例子，这是完全有道理的。用户模式代码可以被换出——或者，就此而言，它试图访问的数据。现在 CPU 一点也不知道如何访问交换/分页文件中的页面，因此需要一个中间步骤。这也是为什么内核模式代码必须能够抢占用户模式代码的原因。`IRQL_NOT_LESS_OR_EQUAL`. 这意味着当无法抢占触及该内存的代码时，驱动程序访问了分页内存。

* * *

## 进一步阅读

1.  [Geoff Chappell在 Windows 中的 SYSENTER 和 SYSEXIT](http://www.geoffchappell.com/studies/windows/km/cpu/sep.htm)（根据我的经验总是值得一读！）
2.  [Linux 2.6 中基于 Sysenter 的系统调用机制](http://articles.manugarg.com/systemcallinlinux2_6.html)
3.  Windows NT 平台特定讨论：[Windows NT 系统调用如何真正工作？](http://www.codeguru.com/cpp/w-p/system/devicedriverdevelopment/article.php/c8035/How-Do-Windows-NT-System-Calls-REALLY-Work.htm)
4.  Windows NT 平台特定讨论：[使用 SYSENTER 指令优化系统调用](http://www.codeguru.com/cpp/misc/misc/system/article.php/c8223/System-Call-Optimization-with-the-SYSENTER-Instruction.htm)
5.  Windows Internals，第 5 版，Russinovich 等人。人。- 第 125 至 132 页。
6.  [ReactOS 的实现`KiFastSystemCall`](https://code.google.com/p/reactos-mirror/source/browse/branches/ros-amd64-bringup/reactos/dll/ntdll/dispatch/i386/dispatch.S)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T13:30:55.250

`SYSENTER`/`SYSCALL` **不是**软件中断；这些指令的重点是避免发出 IRQ 和调用中断处理程序引起的开销。

在堆栈上保存寄存器会花费时间，这是系统调用成本的来源之一。

另一个地方来自内核模式切换本身。它涉及更改段寄存器 - CS，DS，ES，FS，GS，它们都必须更改（在 x86-64 上成本较低，因为分段大部分未使用，但您仍然需要基本上跳转到内核代码）并且还更改了 CPU 执行环。

总而言之：函数调用（在不使用分段的现代系统上）是近调用，而系统调用涉及远调用和响铃切换。*

# objective-c - 在它们之间的一定距离处创建 UIbuttons

> ID：11169810
> 
> 赞同：1
> 
> 时间：2012-06-23T13:17:55.103
> 
> 标签：objective-c, loops, uibutton, frame, distance

我制作了一个为开发人员提供 API 支持的应用程序。想要为我的应用程序制作插件的开发人员只需调用一个方法“-(void)createToggle”，一个 UIButton 就会自动添加到我的应用程序的视图中。问题是我不知道如何在“-(void)createToggle”中实现一种使 UIButtons 之间具有一定距离（在本例中为 180）的方法。

我做了一个循环来做到这一点，在这里你可以看到代码：

```
-(void)createToggle 
{
    for (unsigned int i=0; i<[[SPUtils dylibs] count]; i++) 
    {

        toggle = [UIButton buttonWithType:UIButtonTypeCustom];
        toggle.frame = CGRectMake(3487+180 *i, 27, 100, 100); 
        [toggle addTarget:self action:@selector(buttonTarget:) forControlEvents:UIControlEventTouchUpInside];
        [toggleScroll addSubview:toggle];

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:26:28.693

您可以在此处粘贴代码段。问题似乎在线：

```
toggle.frame = CGRectMake(3487+180 *i, 27, 100, 100); 
```

3487是一个很大的数字。按钮将放置在哪里？iPhone 的 x 水平范围为 0->320。试试这个：

```
float margin=180;
float buttonWidth=100;
toggle.frame = CGRectMake(margin+i*buttonWidth+i*margin, 27, 100, 100); 
```

让我知道它是否已解决。

# android - 窗口甚至在 dialog.dismiss() 上泄漏

> ID：11169811
> 
> 赞同：3
> 
> 时间：2012-06-23T13:18:01.417
> 
> 标签：android, dialog

我正在使用这段代码：

```
public void Close() {
    DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            switch(which) {
            case DialogInterface.BUTTON_POSITIVE:
                dialog.dismiss();
                MainActivity.this.finish();
                break;
            case DialogInterface.BUTTON_NEGATIVE:
                dialog.cancel();
                break;
            }
        }
    };
    final AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Thanks");
    builder.setPositiveButton("Quit", dialogClickListener);
    builder.setNegativeButton("Stay", dialogClickListener);
    MainActivity.this.runOnUiThread(new Runnable() {
        public void run() {
            builder.show();

        }
    });
} 
```

当用户选择退出时调用 Close()。它会打开一个警报框“构建器”。当我在构建器上选择“退出”时，我收到此错误：

```
06-23 18:32:25.230: E/WindowManager(532): 活动 com.amateurprogs.championpkg.MainActivity 泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@41768940
06-23 18:32:25.230: E/WindowManager(532): android.view.WindowLeaked: Activity com.amateurprogs.championpkg.MainActivity 泄露了窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@41768940最初添加在这里
06-23 18:32:25.230: E/WindowManager(532): 在 android.view.ViewRootImpl.(ViewRootImpl.java:344)
06-23 18:32:25.230: E/WindowManager(532): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
06-23 18:32:25.230: E/WindowManager(532): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
06-23 18:32:25.230: E/WindowManager(532): 在 android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
06-23 18:32:25.230: E/WindowManager(532): 在 android.view.Window$LocalWindowManager.addView(Window.java:537)
06-23 18:32:25.230: E/WindowManager(532): 在 android.app.Dialog.show(Dialog.java:278)
06-23 18:32:25.230: E/WindowManager(532): 在 android.app.AlertDialog$Builder.show(AlertDialog.java:932)
06-23 18:32:25.230: E/WindowManager(532): at com.amaturprogs.championpkg.MainActivity$2.run(MainActivity.java:42)

```

MainActivity.java 的第 42 行引用了 builder.show()。

在选择“退出”按钮时，我执行 dialog.dismiss()，然后执行 Activity.finish()。仍然我得到一个窗口泄漏。

为什么即使在 dialog.dismiss() 上我也会收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-01T09:53:51.463

您需要在`onPause()`or`onDestroy()`方法中关闭对话框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:11:47.997

谢谢回答我的问题。实际上，我是从非活动类调用 Close()，因此是 runOnUiThread()。我期待 dialog.dismiss() 将在调用 activity.finish() 之前完成其工作。无论如何，我将使用 dialog.builder.create() 并尝试您的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T13:35:14.337

所以一开始，你的代码写得很脏。没有理由将您的侦听器包装到`close()`方法中，只需`OnClickListener`像声明普通方法一样声明即可。 其次，

也没有理由打电话`dialog.show()`。`runOnUiThread`只是当用户点击时`Quit Button`，才调用`dialog.show()`。

改变我的意思。

* * *

**更新：**这是工作示例：

```
package com.sajmon.test; // sajmon is my old nick

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class TestActivity extends Activity implements View.OnClickListener {

    protected static final int CREATE_CLOSE_DIALOG = 1245;
    protected Button someBtn;
    protected AlertDialog diag;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        someBtn = (Button) findViewById(R.id.btn);
        someBtn.setOnClickListener(this);

    }

    public void onClick(View view) {
        if (view.getId() == R.id.btn) {
            diag = createDialog(CREATE_CLOSE_DIALOG);
            diag.show();
        }
    }

    private AlertDialog createDialog(int type) {
        AlertDialog dialog = null;
        switch (type) {
        case CREATE_CLOSE_DIALOG:
            dialog = new AlertDialog.Builder(TestActivity.this)
                .setTitle("Closing")
            .setMessage("Do you want to quit?")
            .setPositiveButton("Yes", dialogListener)
            .setNegativeButton("no", dialogListener)
            .create();
            break;
        }
        return dialog;
    }

    final DialogInterface.OnClickListener dialogListener = new OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            switch (which) {
                case DialogInterface.BUTTON_POSITIVE:
                    dialog.dismiss();
                    finish();
                break;
                case DialogInterface.BUTTON_NEGATIVE:
                    dialog.dismiss();
                break;  
            }
        }
    };
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button 
        android:id="@+id/btn"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Quit!"
        android:layout_marginTop="20dp"
        />

</LinearLayout> 
```

# php - 如何使用php发布特殊字符和符号

> ID：11169813
> 
> 赞同：0
> 
> 时间：2012-06-23T13:18:08.583
> 
> 标签：php, string

我是 php 中的新人。我只是创建了一个用于发送特殊字符和符号的表单。我得到了文本

```
<form name='form1' method='post' action='s.php'>
<textarea name='ask' id='ask' style=' resize:none ; border: #093; height:250px;     width:350px'></textarea><input type="submit" name="button" id="button" value="Submit" /></td>
</form> 
```

这是表单，s.php 是

```
<?php
 $ask=$_POST['ask'];
 echo $ask;
?> 
```

输入值

```
 #include<iostream.h> 
```

但我只有

**#include** 为什么我得到这样的输出？以及任何获取全文的方法。请帮助我任何人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T13:19:41.470

右键单击并查看页面源代码。`<iostream.h>`被您的浏览器解释为 HTML 标记。

传递值[`htmlentities()`](http://php.net/htmlentities)将使其按预期工作：

```
$ask = $_POST['ask'];
echo htmlentities($ask); 
```

# html - 在网站中链接图像的正确方法是什么？

> ID：11169814
> 
> 赞同：3
> 
> 时间：2012-06-23T13:18:22.713
> 
> 标签：html, css

根据我的标题，正确的方法是什么？我已经看到这两个出现在网站上：

```
<img alt="My image" height="60" src="http://www.website.com/images/myimage.png" width="80"> 
```

和

```
<img src="images/myimage.png" width="60" height="80" alt="my image"/> 
```

每种类型的优点是什么？与第二个相比，第一个是否有助于更快地加载图像？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T13:20:18.907

第二个示例是相对 URL。一般来说，当您不对 URL 等内容进行硬编码时，可扩展性会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T13:21:11.277

唯一的区别是，如果图像不在同一个域中，您必须使用完整的 URL。速度没有区别。

如果您有相对 URL，如果您将 HTML 文件移动到其他位置，图像就会中断；如果您有完整的 URL，如果您将网站移动到另一个域，图像会中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T13:22:03.187

我更喜欢第二个选项。该链接相对于您的 html 文件所在的路径。如果您将网站复制到另一个子目录等，则无需更新您选择第一个选项时必须更新的 html 代码。如果图像在另一个域上，那么第一个选项就是要走的路。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T13:28:29.963

如果您遵循最佳实践，您应该有多个环境，例如用于开发、测试、QA、预生产和生产。仅出于这个原因，URL 应该是相对的。如果您在 prod 中进行所有开发和测试，那么……这是一种糟糕的经商方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T13:23:20.697

使用相对 URL 肯定更好。因为当您更改代码结构中的某些内容时，您还必须更改对图像的所有引用。

使用相对路径，您根本不必更改任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-19T08:05:27.057

第二个示例加载图像并不正确。

使用 Root 相对 URL 进行良好实践

```
<img src="/images/myimage.png" width="60" height="80" alt="my image"/> 
```

这些 URL 始终相对于文件夹的根目录。这些 URL 在服务器之间移动时很有用。

# sql - 想要访问其各自的主键值（按外键分组）必须满足一个条件的外键值（在子表中）

> ID：11169818
> 
> 赞同：0
> 
> 时间：2012-06-23T13:18:51.407
> 
> 标签：sql, tsql

我有一个子表 task_details havin 主键 tid，n 一列状态 na 外键 pid（项目表主键）

我只想访问那些所有任务（tid）必须完成的pid（status='Completed'），如果任何项目的任何任务不完整，即（status='Running'）它不会返回那个pid] 注意每个prr

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:22:03.157

其带有 where 条件的简单选择查询

```
select * from table where status='Completed' 
```

或者

如果提交的状态是其他项目表的一部分

```
 select t.tid,t.pid FROM TASK_DETAILS as t inner join
   Project_details as p  on  t.pid = p.pid
   where p.Status = 'Completed' 
```

# zend-db - 如何在 RDMS 中级联删除后清理引用的文件？

> ID：11169820
> 
> 赞同：0
> 
> 时间：2012-06-23T13:19:13.607
> 
> 标签：zend-db

Zend_Db 包含级联删除和更新的方法，就像大多数 RDMS 的方式一样。文档指出，如果您使用支持外键的 RDMS，您应该使用它来代替 Zend_Db 中的支持。原因很明显；Zend_Db 为每个删除/更新发出单独的数据库查询，因此您会失去性能和（取决于事务并发设置）原子性。

鉴于以下情况，最佳选择是什么：

一个用户有多个相册，一个相册包含多张照片。每张照片、相册和用户在等效的数据库表中都有一行，但是每张照片也存储在 CDN 上。如果用户被删除，数据库级联删除他们的相册和照片。但是，照片仍保留在 CDN 上，需要删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:14:59.673

也许可以用我自己模型的删除方法覆盖默认的级联删除方法，但听起来工作量很大，所以我为我的项目做了一个解决方法。

我有“zadania”表和“zadania_images”表。第二个表有“zadanie_id”列，它与这两个表相关。

“zadanie_images”行包含文件名，在级联删除父“zadanie_id”后，文件仍然存在。这是我的解决方案：

在“Zadanie”模型中：

```
public function deleteZadanie($id) {

    $row = $this->find($id)->current();
    if($row) {
        $image = new Model_ZadanieImage();
        $image->deleteRelatedFiles($id);
        $row->delete();
    }
} 
```

在“ZadanieImage”模型中：

```
public function deleteImage($id) {

    $row = $this->find($id)->current();

    if($row) {
        //delete the record
        $filename = $row['name'];
        $row->delete();
        //and delete related files

        unlink('images/zadanie/' . $filename);
        unlink('images/zadanie/thumbs/' . $filename);
    } 
}

public function deleteRelatedFiles($zadanie_id) {

    $select = $this->select()->where('zadanie=?', $zadanie_id);
    $images = $this->fetchAll($select);
    foreach($images as $image) {
        $this->deleteImage($image->id);
    }
} 
```

# r - 在 r 中重复整个向量采样

> ID：11169827
> 
> 赞同：2
> 
> 时间：2012-06-23T13:19:53.127
> 
> 标签：r, loops, random-sample

我有以下类型的数据

```
ntrt = paste ("EL", 1:4, sep= "")
repl = 3 
```

我想从 ntrt 中采样，但是 3 次（rep = 3），输出如下所示：

```
nsam <- c(sample(ntrt),sample(ntrt), sample(ntrt)) 
repl <- rep (1:3, each = length (ntrt))
newd <- data.frame (nsam, repl)
newd 
 nsam repl
1   EL3    1
2   EL1    1
3   EL4    1
4   EL2    1

5   EL2    2
6   EL4    2
7   EL1    2
8   EL3    2

9   EL1    3
10  EL3    3
11  EL4    3
12  EL2    3 
```

这是我的循环试验：

```
nsam <- rep (NULL, ntrt)
for (i in 1:rep){
         nsam[i] <- sample(ntrt)
         } 
```

编辑：只是澄清

```
ntrt
[1] "EL1" "EL2" "EL3" "EL4"

> sample(ntrt,4)
[1] "EL4" "EL3" "EL2" "EL1" 

# is equal to:
sample(ntrt)

but what I need:
c(sample(ntrt), sample(ntrt), sample(ntrt))

[1] "EL4" "EL3" "EL1" "EL2" "EL1" "EL2" "EL3" "EL4" "EL3" "EL1" "EL2" "EL4"

which is equal to 
c(sample(ntrt,4), sample(ntrt,4), sample(ntrt,4)) 
```

![在此处输入图像描述](../Images/4a89233a3ff53446e0695fa3ed99351b.png)

**因此过程是：**

```
# for repl = 1
sample from ntrt  size = length(ntrt)

# repeat the same process again
# for repl = 2
sample from ntrt  size = length(ntrt)
# note: I only concerned with order of names within ntrt (randomization process)

# repeat the same process again
# for repl = 3
sample from ntrt  size = length(ntrt)

same process for n levels of repl 
```

我收到错误，对不起一个简单的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T17:15:23.380

尝试使用`lapply`：

```
set.seed(1) # Just so you can compare -- remove for your actual purposes
ntrt = paste ("EL", 1:4, sep= "")
repl <- rep (1:3, each = length (ntrt))
nsam = unlist(lapply(1:3, FUN=function(i) sample(ntrt)))
newd <- data.frame (nsam, repl)
# > newd
# nsam repl
# 1   EL2    1
# 2   EL4    1
# 3   EL3    1
# 4   EL1    1
# 5   EL1    2
# 6   EL3    2
# 7   EL2    2
# 8   EL4    2
# 9   EL3    3
# 10  EL1    3
# 11  EL4    3
# 12  EL2    3 
```

## 更新

我注意到@joran 已经`replicate`在评论中推荐了。这是复制方法：

```
data.frame(nsam = as.vector(replicate(3, sample(ntrt))), repl) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:36:01.623

看来您需要学习使用 R 中的帮助工具。该`sample`函数应该执行您所要求的操作，即您只需提交第二个参数：

```
?sample      # to get the help page
nsam <- sample(ntrt, 3)
nsam
#[1] "EL2" "EL1" "EL4" 
```

重复排列 3 次：

```
replicate(3, sample(ntrt, length(ntrt))) 
```

# android - 在 google play 上找不到我的应用

> ID：11169829
> 
> 赞同：2
> 
> 时间：2012-06-23T13:20:21.813
> 
> 标签：android, google-play

嗨，我刚刚在 google play 中上传了一个应用程序，但我找不到它。

我没有搜索任何标记，然后我以我的名字作为开发人员搜索了谷歌游戏，我发现只有一个我上传的旧应用程序。

然后我尝试使用包名搜索

```
http://market.android.com/details?id=[your app package name] 
```

什么也没有……有什么建议吗？

在开发者控制台中，一切看起来都很好，我的应用程序显示为已发布。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T11:42:30.063

[像这里](http://developer.android.com/distribute/googleplay/publish/preparing.html#final-checks)所说的那样需要一段时间：

> 准备就绪后，单击 Developer Console 中的 Publish 按钮。在几个小时内，您的应用将可供用户使用，并且您的产品页面将出现在 Google Play 中，供您浏览、搜索或链接您的促销活动。

# android - 多个 Android 设备上的远程 IP 摄像机视频

> ID：11169841
> 
> 赞同：3
> 
> 时间：2012-06-23T13:22:26.537
> 
> 标签：android, stream, camera, ip

我的一位客户在教堂安装了 IP 摄像头 (D-Link S930L)，并希望使用 Android 应用与他人分享视频。

问题是，多个（几百）用户将同时连接到该服务，他还希望将音频从网络摄像机流式传输到 Android 应用程序。

我该怎么办？我发现的所有其他主题都涉及直接将视频流式传输给少数用户。我需要在 Android 应用程序中使用哪些控件来显示流以及如何支持几百个用户？任何帮助将不胜感激。

发现以下链接与相机一起使用：

[http://aaa.bbb.ccc.ddd/mjpeg.cgi](http://aaa.bbb.ccc.ddd/mjpeg.cgi)（动态JPEG）

[http://aaa.bbb.ccc.ddd/IMAGE.JPG](http://aaa.bbb.ccc.ddd/IMAGE.JPG) (JPEG)

[http://aaa.bbb.ccc.ddd/VIDEO.CGI](http://aaa.bbb.ccc.ddd/VIDEO.CGI)（视频）

[http://aaa.bbb.ccc.ddd/image/jpeg.cgi](http://aaa.bbb.ccc.ddd/image/jpeg.cgi) (JPEG)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T09:21:09.793

我的朋友在 C# 中为我做了一些事情：

Form1.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading;
using System.Windows.Forms;
using System.IO;

namespace kamera
{
    public partial class Form1 : Form
    {

        //private static String imageUrl = "http://cam-kk-03/now.jpg";
        private static String imageUrl=null;
        private static Thread t ;  
        private static Image webImage;
        private static List<String> kamere;
        System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
        private static int intervalOsvezevanja=3000; //ms
        public Form1()
        {
            InitializeComponent();
            ////timer k pokliče funkcijo vsake x sekund
            //AutoResetEvent autoEvent = new AutoResetEvent(false);
            //TimerCallback tcb = updatePicture;
            //System.Threading.Timer stateTimer = new System.Threading.Timer(tcb, autoEvent, 0, 200);

            t = new Thread(updatePicture);
            t.IsBackground = true;
            t.Start();

            timer.Tick += new EventHandler(timer_Tick); // Everytime timer ticks, timer_Tick will be called
            timer.Interval = (intervalOsvezevanja) ;             // Timer will tick every 0.05 seconds
            timer.Enabled = true;                       // Enable the timer
            timer.Start();                              // Start the timer

            //skrijemo formo za dodajanje kamer
            panelDodajKamero.Hide();

            //inicializacija
            kamere = new List<String>();
            tbNaslovKamere.Text =  "cam-kk-";
            preberiDatoteko();
        }

        void timer_Tick(object sender, EventArgs e)
        {
            pictureBox1.Image = webImage;
        }

        ~Form1() {
            //t.Join();
            t.Abort();
            timer.Stop();
            timer.Dispose();
        }

        private void updatePicture(object stateInfo)
        {
            while (true)
            {
                if (imageUrl != null)
                {
                    try
                    {
                        WebRequest requestPic = WebRequest.Create(imageUrl);
                        WebResponse responsePic = requestPic.GetResponse();
                        webImage = Image.FromStream(responsePic.GetResponseStream());
                        //webImage.Save("C:\\Users\\Public\\kamera\\kamera" + fileName + ".jpg");
                    }
                    catch{}
                }
                Thread.Sleep(intervalOsvezevanja);
            }
        }

        private void pictureBox1_Click(object sender, EventArgs e)
        {
            if (menuStrip1.Visible)
            {
                menuStrip1.Hide();
            }
            else
            {
                menuStrip1.Show();
            }
        }

        private void menjajKamero(String camAddr)
        {
            if (camAddr.Contains("http"))
            {
                imageUrl = camAddr;
            }
            else
            {
                imageUrl = "http://" + camAddr + "/now.jpg";
            }
        }

        private void btDodajKamero_Click(object sender, EventArgs e)
        {
            String webAddres;
            if (tbNaslovKamere.Text.Contains("http"))
            {
                webAddres = tbNaslovKamere.Text;
            }
            else
            {
                webAddres = "http://" + tbNaslovKamere.Text + "/now.jpg";
            }
            if (RemoteFileExists(webAddres))
            {
                if (!kamere.Contains(tbNaslovKamere.Text) && !kamere.Contains(webAddres))
                {
                    kamere.Add(tbNaslovKamere.Text);
                    //kamere.Add(webAddres);
                }
                menjajKamero(tbNaslovKamere.Text);
                //menjajKamero(webAddres);
                panelDodajKamero.Hide();
                izpisKamer();
                tbNaslovKamere.Text = "cam-kk-";
            }
            else
            {
                MessageBox.Show("Ne najdem Kamere");
            }
        }

        private void dodajKameroToolStripMenuItem_Click(object sender, EventArgs e)
        {
            panelDodajKamero.Show();
        }

        private void izpisKamer()
        {
            //zanka ki odstrani vse prej dodane kamere
            textBox1.Text = kamereToolStripMenuItem.DropDownItems.Count.ToString();

            foreach (String kamera in kamere)
            {
                kamereToolStripMenuItem.DropDownItems.RemoveByKey(kamera);
            }

            System.IO.StreamWriter file = new System.IO.StreamWriter(System.Environment.CurrentDirectory + "\\kamere.txt");
            foreach (String kamera in kamere)
            {
                ToolStripDropDownButton btTemp = new ToolStripDropDownButton(kamera, null, kameraOnClick, kamera);
                file.WriteLine(kamera);

                //dodamo trenutno kamero, ki je v kamerah.txt
                kamereToolStripMenuItem.DropDownItems.Add(btTemp);
            }
            file.Dispose();
            file.Close();
        }

        private void kameraOnClick(object sender, EventArgs e)
        {
            //tbNaslovKamere.Text+=sender.ToString();
            imageUrl = "http://" + sender.ToString() + "/now.jpg";
        }

        private void izhodToolStripMenuItem_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }

        private void preberiDatoteko()
        {
            String vrstica;
            // Read the file as one string.
            if (File.Exists(System.Environment.CurrentDirectory + "\\kamere.txt"))
            {
                kamere = new List<String>();
                StreamReader myFile = new StreamReader(System.Environment.CurrentDirectory + "\\kamere.txt");
                while ((vrstica = myFile.ReadLine()) != null)
                {
                    //zapis v list
                    kamere.Add(vrstica);
                    //doda v meni
                    ToolStripDropDownButton btTemp = new ToolStripDropDownButton(vrstica, null, kameraOnClick, vrstica);
                    kamereToolStripMenuItem.DropDownItems.Add(btTemp);
                }
                myFile.Close();
            }
        }

        private void menuPobrisiKamere()
        {
            foreach (String kamera in kamere)
            {
                kamereToolStripMenuItem.DropDownItems.RemoveByKey(kamera);
            }
            kamere = new List<String>();
        }

        private void odpriToolStripMenuItem_Click(object sender, EventArgs e)
        {
            // Create an instance of the open file dialog box.
            OpenFileDialog openFileDialog1 = new OpenFileDialog();

            // Set filter options and filter index.
            openFileDialog1.Filter = "Text Files (.txt)|*.txt";
            openFileDialog1.FilterIndex = 1;

            //openFileDialog1.Multiselect = true;
            // Call the ShowDialog method to show the dialog box.
            DialogResult userClickedOK = openFileDialog1.ShowDialog();

            //tbNaslovKamere.Text = userClickedOK.ToString();
            // Process input if the user clicked OK.
            if (userClickedOK.ToString().Equals("OK"))
            {
                menuPobrisiKamere();
                String vrstica;

                // Open the selected file to read.
                System.IO.Stream fileStream = openFileDialog1.OpenFile();
                kamere = new List<String>();
                StreamReader myFile = new StreamReader(fileStream);
                while ((vrstica = myFile.ReadLine()) != null)
                {
                    //zapis v list
                    kamere.Add(vrstica);
                    //doda v meni
                    ToolStripDropDownButton btTemp = new ToolStripDropDownButton(vrstica, null, kameraOnClick, vrstica);
                    kamereToolStripMenuItem.DropDownItems.Add(btTemp);
                }
                myFile.Dispose();
                myFile.Close();
                fileStream.Dispose();
                fileStream.Close();
                myFile.Close();
                fileStream.Close();
            }
        }

        private void pobrišiKamereToolStripMenuItem_Click(object sender, EventArgs e)
        {
            menuPobrisiKamere();
        }

        private void zbrišiShranjeneKamereToolStripMenuItem_Click(object sender, EventArgs e)
        {
            menuPobrisiKamere();
            System.IO.StreamWriter file = new System.IO.StreamWriter(System.Environment.CurrentDirectory + "\\kamere.txt");
            file.Dispose();
            file.Close();
        }

        private void pictureBox1_DoubleClick(object sender, EventArgs e)
        {
            Form1 frm1 = new Form1();
            frm1.Size = new Size(100, frm1.Size.Height);
        }

        private bool RemoteFileExists(string url)
        {
            try
            {
                //Creating the HttpWebRequest
                HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
                //Setting the Request method HEAD, you can also use GET too.
                request.Method = "HEAD";
                //Getting the Web Response.
                HttpWebResponse response = request.GetResponse() as HttpWebResponse;
                //Returns TRUE if the Status code == 200
                return (response.StatusCode == HttpStatusCode.OK);
            }
            catch
            {
                //Any exception will returns false.
                return false;
            }
        }
    }
} 
```

这将打开表单并打开链接（主机）并显示来自的图像`http://IP/HOSTNAME/now.jpg`，可以更改为其他内容。在txt文件中写入主机...一个非常简单有效和可爱的应用程序。经过我的优化，现在只需要 0-1 CPU 时间和最大 70K 内存。

我希望你会发现有用的......是一个.Net 3.5 应用程序。

# regex - 使用正则表达式的 apache 虚拟主机定义

> ID：11169843
> 
> 赞同：4
> 
> 时间：2012-06-23T13:22:42.907
> 
> 标签：regex, apache, vhosts

对于开发项目，我使用主机文件将真实域指向 localhost。我将虚拟主机定义添加到 apache 配置文件中。我的问题是可以将所有“xyz.com”域重定向到“d:/xampp/htdocs/websites/xyz.com”目录吗？这样我就不需要每次都添加虚拟主机定义。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T13:25:09.707

`VirtualHost`你可以在你的`ServerAlias`指令中使用通配符：

```
<VirtualHost *:80>
  # Official name is example.com
  ServerName example.com

  # Any subdomain *.example.com also goes here
  ServerAlias *.example.com

  DocumentRoot "D:/xampp/htdocs/websites/xyz.com"

  # Then rewrite subdomains into different directories
  RewriteEngine On
  RewriteCond %{HTTP_HOST} ^(.*)\.example.com$
  # Use the %1 captured from the HTTP_HOST
  # For example abc.example.com writes to websites/abc.com
  RewriteRule ^(.*)$ "D:/xampp/htdocs/websites/%1.com/$1" [L]
</VirtualHost> 
```

# jakarta-ee - Tomcat Web 应用程序在 Netbeans 中工作，但在生产服务器中显示空白页面

> ID：11169844
> 
> 赞同：1
> 
> 时间：2012-06-23T13:22:44.523
> 
> 标签：jakarta-ee, tomcat, deployment, netbeans

标题是不言自明的。当我在 Netbeans (Tomcat 7) 上运行我的应用程序时，一切正常（我的 dir 结构中的根 index.jsp 文件显示在浏览器中）：

![在此处输入图像描述](../Images/acac3412b0293b09652c1342251d1bfd.png)

当我将应用程序部署到我的生产服务器时，它会成功部署：

![在此处输入图像描述](../Images/24adf6d63ddcb3c013db1ea14602c74e.png)

但是，当我尝试访问生产服务器中的页面时，它只显示一个空白页面，而不是 index.jsp 文件：

![在此处输入图像描述](../Images/5284df658036a25944079aebe49305c8.png)

这是我的这个应用程序的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<filter>
    <filter-name>filter</filter-name>
    <filter-class>com.dendro.mvc.filters.StaticFilesFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<!-- abstract controller to filter static file requests -->
<servlet>
    <servlet-name>Controller</servlet-name>
    <servlet-class>com.dendro.mvc.filters.Controller</servlet-class>
</servlet>
<!-- servlet names -->
<servlet>
    <servlet-name>PropagatedResults</servlet-name>
    <servlet-class>com.dendro.query.PropagatedResultsServlet</servlet-class>
</servlet>
<servlet>
    <servlet-name>PlainResults</servlet-name>
    <servlet-class>com.dendro.query.PlainResultsServlet</servlet-class>
</servlet>
<servlet>
    <servlet-name>HomeFilter</servlet-name>
    <servlet-class>com.dendro.query.HomeFilterServlet</servlet-class>
</servlet>

<!-- mappings -->
<servlet-mapping>
    <servlet-name>Controller</servlet-name>
    <url-pattern>/views/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>HomeFilter</servlet-name>
    <url-pattern>/views/</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>PlainResults</servlet-name>
    <url-pattern>/views/query/plain_results</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>PropagatedResults</servlet-name>
    <url-pattern>/views/query/propagated_results</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

还有我的 context.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path=""/> 
```

tomcat 日志只显示成功的请求（200 ok）：

```
192.168.5.77 - - [23/Jun/2012:14:00:29 +0100] "GET /GraphQuery-1.0-SNAPSHOT/ HTTP/1.1" 200 -
192.168.5.77 - - [23/Jun/2012:14:00:29 +0100] "GET /GraphQuery-1.0-SNAPSHOT/ HTTP/1.1" 200  -
192.168.5.77 - - [23/Jun/2012:14:00:30 +0100] "GET /GraphQuery-1.0-SNAPSHOT/ HTTP/1.1" 200 -
192.168.5.77 - - [23/Jun/2012:14:00:31 +0100] "GET /GraphQuery-1.0-SNAPSHOT/ HTTP/1.1" 200  - 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:49:26.017

尝试以下提示，我试图缩小错误来源：

*   检查您是否是使用指定过滤器过滤的内容。也许改进`/*`映射有帮助？
*   还可以尝试访问您定义的其他一些 URL 映射，例如`localhost:8080/GraphQuery-1.0-SNAPSHOT/views/`
*   在访问 URL 时显式映射`/`到您`index.jsp`或您想要执行的 servlet。对于到 JSP 文件的映射，您可以使用 web.xml 中`jsp-file`元素中的`servlet-mapping`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:03:01.353

原来问题是我在 web.xml 文件中的过滤器类。最初我把它放进去处理 Tomcat 中的静态文件服务，但它似乎让 Tomcat 感到困惑，并且没有日志显示重定向或异常。它在 Netbeans 中工作，因为 Netbeans 始终将您正在调试的应用程序部署在 ROOT 文件夹中。与 tomcat 生产服务器不同，没有需要考虑的上下文目录，例如

```
http://localhost:8084/myapp, 
```

其中 myapp 是上下文。

在更改 web.xml 文件并为静态文件使用默认 servlet 之后，我开始使用相对映射——有时有点不合时宜，但它可以工作。

我不得不更改项目中的一些 url 以说明更改。由于在生产服务器中我在 URL 中有上下文，因此我必须更改 CSS 中的 URL，例如，使用相对路径，例如 ../static/img/myimage.jpg

这是现在正在运行的 Web.xml 文件的新版本，供进一步参考：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <!--servlet classes-->
    <servlet>
        <servlet-name>PropagatedResults</servlet-name>
        <servlet-class>com.dendro.query.PropagatedResultsServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>PlainResults</servlet-name>
        <servlet-class>com.dendro.query.PlainResultsServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Home</servlet-name>
        <servlet-class>com.dendro.query.HomeServlet</servlet-class>
    </servlet>

    <!--serving static files-->
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.css</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.js</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.jpg</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.jpeg</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.png</url-pattern>
    </servlet-mapping>

    <!--servlets urls-->
    <servlet-mapping>
        <servlet-name>PlainResults</servlet-name>
        <url-pattern>/query/plain_results</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>PropagatedResults</servlet-name>
        <url-pattern>/query/propagated_results</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Home</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

# android - Android如何裁剪图像使用像css这样的xml

> ID：11169847
> 
> 赞同：1
> 
> 时间：2012-06-23T13:22:57.897
> 
> 标签：android, imageview, margin, crop

如您所见，我们可以通过为[图像](http://imm.io/tHCE)设置负边距并将其设置`overflow:hidden`为其父元素来裁剪它。那么我该如何在android中使用它呢？我相信强大的 Bitmap 类可以裁剪它并创建一个新图像。有没有更简单的方法，比如做一些宽度的边距或布局？

* * *

这是我的解决方案：我刚刚找到了一种更好的方法并解决了我的大部分问题：

`imageview.setScaleType(ImageView.ScaleType.CENTER_CROP);`

可选代码（设置一点负边距（实际上是填充））

`imageview.setPadding(-5, -10, -5, -10);`

将调整图像大小以适应其父级的宽度或高度并自动使其居中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-26T04:18:47.623

```
android:scaleType="centerCrop" 
```

很棒，但它并没有真正裁剪图像。要正确裁剪它，您还应该使用：

```
android:cropToPadding="true" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:53:02.080

`com.android.camera.action.CROP`您可以使用as裁剪图像

```
File tempFile = new File("mnt/sdcard/Images/beijingtesttemp.jpeg");//Image path which u want to crop
Intent intent = new Intent("com.android.camera.action.CROP");  
intent.setDataAndType(Uri.fromFile(tempFile), "image/*");
intent.putExtra("crop", "true"); 
intent.putExtra("aspectX", 1);
intent.putExtra("aspectY", 1);
intent.putExtra("outputX", 96); 
intent.putExtra("outputY", 96);
intent.putExtra("output", Uri.fromFile(tempFile)); 
intent.putExtra("outputFormat", "JPEG");
startActivityForResult(intent,PHOTOR); 
```

并`onActivityResult`使用`data.getExtras()`

```
 @Override 
     protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
            if (resultCode == NONE)  
                return;  
            if (requestCode == PHOTOR) {  
                Bundle extras = data.getExtras();  
                if (extras != null) {  
                     // get cropped image as bitmap here
                    Bitmap photo = extras.getParcelable("data");  

                }  
            }  
            super.onActivityResult(requestCode, resultCode, data);  
        } 
```

# c# - 在 Asp.Net 网站中使用 Silverlight

> ID：11169854
> 
> 赞同：0
> 
> 时间：2012-06-23T13:24:04.587
> 
> 标签：c#, asp.net, .net, silverlight, web

我已经用 ASP.NET 建立了新网站，但是当我开始设计时，我想要一些吸引人的外观，所以我想是否可以使用 Silverlight 来获得这种吸引人的外观。

实际上，我对 Silverlight 很陌生，我真的不知道如何在我的网站中使用 Silverlight（如果可以的话）。谁能帮我这个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:31:40.737

**是的，您可以在 asp.net 网站中使用 Silverlight 组件**...。

# MSDN 链接

[**将 Silverlight 与网页集成**](http://msdn.microsoft.com/en-us/library/cc838145%28v=vs.95%29.aspx)

[**使用 ASP.NET 控件封装 Silverlight**](http://msdn.microsoft.com/en-us/magazine/cc135987.aspx)

Silverlight 使用对象标记嵌入到 ASP.NET（或 HTML）页面中。这意味着您可以很容易地将其集成到现有页面中，而无需更改任何现有结构 - 您只需找到要将应用程序放入的位置，或创建一个单独的页面以链接到。下面是 Silverlight 对象元素及其属性的正式参考（在左侧的树视图中），下面是演示如何将 Silverlight 添加到现有页面的演练。您还可以在 Visual Studio 中使用托管 Web 应用程序创建一个新的 Silverlight 项目，然后查看生成的 HTML 和 ASP.NET 页面的源代码以了解它是如何完成的。

这是一篇好文章：[如何在 ASP.NET Grid 中使用 Silverlight 控件，](http://www.codeproject.com/Articles/33193/How-To-Use-Silverlight-Controls-in-ASP-NET-Grid)它可以让您对这个主题有更多的了解

# ios - 从 ViewDidLoad 中的 viewcontroller 进行 Segue

> ID：11169863
> 
> 赞同：3
> 
> 时间：2012-06-23T13:24:54.917
> 
> 标签：ios, login, uiviewcontroller, segue, viewdidload

我正在开发的应用程序中遇到问题。用户需要登录服务器才能在 iPhone 上获取他的帐户信息，但一旦登录，他将不需要在下次启动时再次登录。由于登录页面是初始视图控制器，如果用户之前在他的手机上登录过，我希望能够直接从它转到 tabController。为了做到这一点，我将 userData 的 NSDictionary 存储在 NSUserdefaults 中，当登录视图加载时，我检查 NSUserdefaults 中是否有数据。如果有数据，我尝试进行 segue 并调用 performSegueWithIdentifier 方法，但它只是不执行 segue。这一切都在 loginViewController 中进行。这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"user"])
    {
        self.userData = [defaults objectForKey:@"user"];
        [self performSegueWithIdentifier:@"Logged In" sender:self];
    }
} 
```

有没有人对如何解决这个问题有想法？谢谢 ！

# php - Codeigniter 中的流错误

> ID：11169867
> 
> 赞同：-2
> 
> 时间：2012-06-23T13:25:26.657
> 
> 标签：php, codeigniter, flow

当它不应该出现在我的 codeigniter 脚本中时出现了错误。我假设我的代码流很简单，但我无法弄清楚。

这是页面：

```
http://77.96.119.180/beer/user/activate/ 
```

您可以看到底部出现的错误，这不应该出现

> “那个用户名不存在。”

这是我的 CodeIgniter 类代码：

```
public function activate($code = '', $username = '')
    {
        $go = 0;
        $form = '';
        // This function lets a user activate their account with the code or link they recieved in an email
        if($code == '' || $username == '' || isset($_POST[''])){

            $this->load->library('form_validation');
            $this->load->helper('form');

            $this->form_validation->set_rules('code', 'Activation Code', 'trim|required|xss_clean|integer');
            $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');

            if ($this->form_validation->run() == FALSE){
                // No code, so display a box for them to enter it manually
                $form .= validation_errors();
                $form .= form_open_multipart('user/activate', array('class' => 'formee'));

                $form .= form_label('Enter your activation code below and click \'Activate\' to start using your account. If you need a hand please contact live chat.', 'activation_code');
                $form .= form_input(array('name' => 'code'));

                $form .= form_label('And enter your username', 'username');
                $form .= form_input(array('name' => 'username'));

                $data = array(
                    'name'        => 'submit',
                    'value'       => 'Activate',
                    'class'       => 'right',
                    'style'       => 'margin-top:10px;',
                );

                $form .= form_submit($data);
                $form .= form_close();
            }else{
                $go = 1;
                // Put POST variables into variables
                $code = $this->input->post('code');
                $username = $this->input->post('username');
            }
        }else{
            // Code recieved through the GET or POST variable XSS clean it and activate the account
            $go = 1;

            // Put GET variables into variables
            $code = $this->uri->segment(3);
            $username = $this->uri->segment(4);
        }

        if($go = 1){
            // Activate!

            // Check if user exists
            $query = $this->db->get_where('users', array('username' => $username, 'confirmation' => $code), 1);
            if ($query->num_rows() > 0){
                // Username exsists, activate the account
                $data = array(
                   'is_validated' => 1
                );

                $this->db->where('username', $username);
                $this->db->update('users', $data);

                $form .= '<div class="formee-msg-success">Acount activated, <a href="#">click here</a> to login.</div>'; 

            }else{
                // Username doesn't exsist or code doesn't match, find out which
                $form .= '<div class="formee-msg-error">That username doesn\'t exsist.</div>'; 
            }
        }

        $data = array(
            'title' => $this->lang->line('activate_title'),
            'links' => $this->gen_login->generate_links(),
            'content' => $form
        );
        $this->parser->parse('beer_template', $data);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:22:44.987

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:31:26.283

所以盯着这个看了一会儿，是我的错，但我很困惑没有人拿起它！

问题是这样的：

```
if($go = 1){ 
```

应该

```
if($go == 1){ 
```

这解决了这个问题。

但是由于您的建议，我现在无论如何都要重写它。

> **编辑：刚刚注意到米莎对此发表了评论！**

# iphone - 从 NSArray 将 URL 加载到 UIWebView 中？

> ID：11169868
> 
> 赞同：-1
> 
> 时间：2012-06-23T13:25:36.070
> 
> 标签：iphone, objective-c, xcode, ios5

我用导航控制器创建了一个表格视图。我想链接表数据，`UIWebView`以便当我单击特定表数据时，它将打开其各自的 URL。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:38:14.770

我假设您有一系列 URL

```
 NSArray* aryURL =[[NSURL alloc]initWithObjects:@"WWW.google.com",@"www.yahoo.com",@"www.facebook.com",nil]; 
```

现在在 tableView DataSource 方法中

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
  {
       return [aryURL count];
  }

  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {
      UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil];
     if (cell == nil) 
     {
          cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
     }
     cell.textLabel.text = [aryURL objectAtIndex:indexPath.row];
     return cell;
 }

 -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
     WebViewController *webObj = [[WebViewController alloc]initWithNibName:@"WebViewController" bundle:nil];
     webObj.stringURl = [aryURL objectAtIndex:indexPath.row];
     [self.navigationController pushViewController:webObj animated:YES];
 } 
```

现在在**WebViewController**类中，您必须创建**stingURL**文件和 @property @synthesise 它，在**ViewDidLoad**中，您可以将 stringURL 作为 URL 字符串提供给 WebView 对象。

# android - Android改变TextView的颜色

> ID：11169871
> 
> 赞同：1
> 
> 时间：2012-06-23T13:26:26.180
> 
> 标签：android

我有一个 textView，我想给它`0X33CCFF` 我试过的颜色

```
firstHint.setTextColor(0X33CCFF); 
```

但 textView 似乎只是消失了，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:29:39.317

您只是缺少一点，请尝试以下操作：

```
firstHint.setTextColor(Color.parseColor("#33CCFF")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:30:52.510

可以尝试使用小“x”

firstHint.setTextColor(0x33CCFF);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T13:38:02.417

原因是你忘了给 Alpha 值！

改变

```
firstHint.setTextColor(0X33CCFF); 
```

到

`firstHint.setTextColor(0xFF33CCFF);` // 这里First FF表示alpha值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T13:43:17.177

正如您在[Android 文档](http://developer.android.com/reference/packages.html)中看到的那样，TextView.setTextColor() 采用 int 或 ColorStateList。0x33ccff 是一个整数。但是，正如 Vipus Shah 所说，您没有 alpha 值（表示颜色的透明度）。十六进制颜色的格式如下：0xAARRGGBB，其中 AA 当然是 alpha。

小写和大写字母没有区别，所以 0XfFaEEb 与 0xffaeeb 或 0XFFAEEB 相同。

这是你的代码：

```
firstHint.setTextColor(0xFF33CCFF); 
```

Alpha 是 FF(255)，这意味着它是完全可见的。

# twitter - 页面加载时的 Twitter Bootstrap 轮播循环

> ID：11169881
> 
> 赞同：2
> 
> 时间：2012-06-23T13:28:08.970
> 
> 标签：twitter, twitter-bootstrap, carousel

我在让 Twitter Bootstrap Carousel 在页面加载时以所需的设置时间速率自动开始循环时遇到问题。

任何人都可以帮助指出我做错了什么> [http://phraseological.co.uk/](http://phraseological.co.uk/)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T16:30:42.043

您可以通过添加以下代码来更改轮播的速度：

```
<script type="text/javascript">
  $(document).ready(function() {
    $('.carousel').carousel({
      interval: 2000
    })
  });
</script> 
```

[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

删除第 289 行：

```
<script src="./Phraseological SEO, SEO IS WHERE SEO IS HERE_files/jquery.js"></script> 
```

删除第 325 行：

```
<script src="./Phraseological SEO, SEO IS WHERE SEO IS HERE_files/jquery.min(1).js"></script> 
```

删除第 326 行：

```
<script>window.jQuery || document.write('<script src="js/jquery-1.7.2.min.js"><\/script>')</script> 
```

删除第 328 行：

```
<script src="./Phraseological SEO, SEO IS WHERE SEO IS HERE_files/bootstrap.min.js"></script> 
```

它会起作用（经过测试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T16:40:10.590

当我使用 Chrome 的开发人员工具打开页面时，我收到 bootstrap.min.js 的资源错误 (404)。确保正确包含引导程序的核心 js 文件。其余的引导插件似乎加载得很好。

这可能与您何时包含某些内容有关。确保您使用另一个问题中提到的代码片段来使轮播自动启动，但仅在页面/DOM 已完全初始化并且因此存在 div.carousel 元素之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T10:45:48.640

要自动启动循环，您只需将 interval:true 添加到脚本中。

```
<script type="text/javascript">
  $(document).ready(function() {
    $('.carousel').carousel({
      interval: true
    })
  });
</script> 
```

# javascript - 可以通过 $() 注入恶意 javascript 代码吗？

> ID：11169894
> 
> 赞同：15
> 
> 时间：2012-06-23T13:29:58.740
> 
> 标签：javascript, jquery

例子：

```
if($('#' + untrusted_js_code).length) > 0
  ....` 
```

通常，“untrusted_js_code”应该是一个简单的字符串，代表一个项目的 ID。变量的值来自 iframe（通过 postMessage），这就是它不受信任的原因。我只是检查该项目是否存在于当前页面中，然后才对其进行处理。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T13:33:32.860

## 截至 2012 年 10 月 22 日，jQuery 1.8.2：

**是的，XSS 攻击是可能的。**

```
var input = "<script>alert('hello');</script>"
$(input).appendTo("body"); 
```

[见演示](http://jsfiddle.net/TwBaS/)。jQuery 团队似乎已经[承认了这一点](http://blog.jquery.com/2012/06/22/jquery-1-8-beta-1-see-whats-coming-and-going/)，并计划在 jQuery 1.9 中解决这个问题。

从 jQuery 1.8 开始，**`$.parseHTML`**如果您希望用户输入是 html，请使用：

```
var input = "<script>alert('hello');</script>"
$($.parseHTML(input)).appendTo("body");​ 
```

[见演示](http://jsfiddle.net/3SNDN/1/)，没有警报。

* * *

然而，在 OP 描述的情况下，以下内容：

```
var untrusted_js_code = 'alert("moo")';
$('#' + untrusted_js_code).show(); 
```

将转化为：

```
$('#alert("moo")').show(); 
```

jQuery 将其解释为 CSS 选择器，这要归功于字符串中前面的 #，相对于 html 不能有内联 JS 代码，因此相对安全。上面的代码只会告诉 jQuery 通过该 ID 查找 DOM 元素，导致 jQuery 无法找到该元素，因此不执行任何操作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-23T13:58:46.020

是的，如果您使用的是旧版本的 jQuery，在某些情况下这是可能的。[这已在1.6.3 版本](http://blog.jquery.com/2011/09/01/jquery-1-6-3-released/)中修复（[这里是提交](https://github.com/jquery/jquery/commit/db9e023e62c1ff5d8f21ed9868ab6878da2005e9)）。另请参阅[相应的错误报告](http://bugs.jquery.com/ticket/9521)。

提交包括一个澄清问题的测试用例：

```
jQuery( '#<img id="check9521" src="no-such-.gif"' +
        'onerror="jQuery._check9521(false)">' ).appendTo("#qunit-fixture"); 
```

对于 1.6.3 之前的 jQuery 版本，`onerror`代码会被执行。

但是，您的特定示例（仅检查长度）没有此问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T13:36:11.687

使用该语句，您要求 jQuery 基于选择器执行查询。作为选择器的字符串，它不会造成任何伤害。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-23T13:54:31.567

这不像其他人说的那么清楚。不受信任的代码将无法进行 XSS（只要您有足够新的 jQuery 版本，正如 balpha 指出的那样），但它可以挂起用户的浏览器或使您的代码收到意外的输入。

例如，如果`untrusted_js_code`是`:input`，则翻译为：

```
$("#:input") 
```

并且 jQuery 似乎只是忽略了`#`and 上的匹配`:input`。说真的，打开一个控制台并在这个页面上运行那段代码。（这似乎只适用于伪类。）

一个邪恶的一方可能会给你一个计算密集型的选择器（非常简单`:not(.asdf):not(.asdf)`地数万次），它需要几秒钟（或几分钟......）来处理。

（此外，浏览器可能存在错误，因此可以构造一个选择器来使用户的 Web 浏览器崩溃。）

# ruby-on-rails - 使用 ajax 和 js.erb 渲染动作视图

> ID：11169900
> 
> 赞同：1
> 
> 时间：2012-06-23T13:30:57.477
> 
> 标签：ruby-on-rails

在 show.js.erb 里面

```
$('#viewport').html("<%= escape_javascript(render('show')) %>"); 
```

我正在尝试将显示视图呈现到索引视图的底部。显示不是局部的。这行不通。但我确信这个页面会被执行，因为我尝试了类似“hello world”的东西，并且它被渲染了。

我做的其他事情是：

在索引视图中添加了一个 div #viewport

在索引视图内的链接中添加了 remote: true

在控制器的显示操作中添加了 render js { :layout => false }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:10:41.860

将显示视图转换为部分视图。将 show.html 中的源代码移动到名为 _view.html.erb 的文件中：

```
$('#viewport').html("<%= escape_javascript(render('view')) %>"); 
```

Show.html.erb 变成：

```
render('view') 
```

# java - 如何为二维字符串数组中的每一行创建一个对象

> ID：11169909
> 
> 赞同：1
> 
> 时间：2012-06-23T13:32:01.777
> 
> 标签：java, list, matrix

我有一个对象矩阵，其中包含这种形式的数据：

```
name A,2,name B
name C,3,name D
name E,4,name F
name G,5,name H 
```

我处理数据的代码是：

```
for (int i = 0; i < numRow; i++) {
    for (int j = 0; j < numColumn; j++) {
        Object o = matrix[i][j];
        String x = o.toString();
    }
} 
```

这样，`x`依次假设这些值：

```
name A,
2,
name B,
name C,
3
name D,
name E,
... 
```

等等。

从表中，我必须创建一个 objects 的链表`Expression(String, int, String)`，例如：

```
Expression a = new Expression("name A", 2, "name B") 
```

我怎样才能以正确的方式从矩阵中提取数据呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T14:00:08.230

你的意思是这样的吗？

```
String[][] matrix = { 
        { "name", "2", "name" }, 
        { "name", "2", "name" },
        { "name", "2", "name" }, 
        { "name", "2", "name" }, 
};

List<Expression> list=new LinkedList<Expression>();
for (int i = 0; i < matrix.length; i++) 
    list.add(new Expression(matrix[i][0], Integer.parseInt(matrix[i][1]), matrix[i][2])); 
```

# ruby-on-rails - 使用 ajax 部分渲染失败

> ID：11169918
> 
> 赞同：0
> 
> 时间：2012-06-23T13:32:37.503
> 
> 标签：ruby-on-rails, jquery, mongoid

我有一个 add_new_button 它将在数据库中创建一个新对象并使用 ajax 显示更新的记录。代码运行良好，直到我从 2.4 => 3.0.0.rc 更新 Mongoid（捆绑更新）。

现在的问题是，当单击按钮时，数据库会更新为新记录，但页面不会更新。我检查了 ajax 请求，它确实呈现了部分页面，但没有新添加的记录。而第二次点击会呈现之前添加的记录，但没有最新的记录。有任何想法吗？

**更新了代码片段**

它呈现 _desktop.html.erb

```
#index.html.erb
<div id=columns>
    <%= render :partial => "desktop", :locals => { :items => @items } %>
</div> 
```

*_desktop.html.erb* 由视图呈现，也用于 ajax 更新（这是未使用 ajax 更新的页面）

```
#_desktop.html.erb
<%= form_tag(new_path, :remote => true) do %>
    <div class="m-body">
        <p>Select an item</p>
        <%= select_tag "user_items", options_from_collection_for_select(services, "id", "name", :prompt => true) %>
    </div>
    <div class="m-footer">
        <a href="#" class="btn">Close</a>
        <%= submit_tag "Confirm", :id => "add-item_btn" %>
    </div>
<% end %> 
```

创建新项目没问题，它通过json呈现_desktop.html.erb

```
# items_controller.rb
def new
    @user.items.create!(
        handle: 'name',
        content: 'body'
    )

    respond_to do |format|
        format.json { render :json => {:sucess => true, :html => (render_to_string '_items.html.erb', :locals => { :items => @items })} }
        format.html {}
    end
end 
```

但是，它不会使用新添加的项目获取更新的 html..

```
 <%# new.js.erb %>
    $('#add-item_btn').live('ajax:success', function(event, data){
    if(data.success == true) { $('#columns').html(data.html); }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:58:50.967

如果问题是从特定 gem（在本例中为 MongoID）的更新开始的，那么首先要考虑的是找到 CHANGELOG，看看可能是什么原因。在这种情况下，**[它是一个相当长的变更日志](https://github.com/mongoid/mongoid/blob/master/CHANGELOG.md)**，但最好还是自己找出原因。

此外，MongoID 有一个非常好的**[升级指南](http://mongoid.org/en/mongoid/docs/upgrading.html)**，它可能会为您指明正确的方向。

引起我注意的一件事是，在 中，您使用由 .填充的局部变量进行`ItemsController#new`渲染。但是在哪里设置？使用您提供的代码，看起来返回 nil。`_items.html.erb``@items``@items``@items`

# android - 临时许可证 Play 商店

> ID：11169923
> 
> 赞同：0
> 
> 时间：2012-06-23T13:33:39.390
> 
> 标签：android, app-store, payment, temporary, android-lvl

我想尽快发布一个付费应用程序并将其放在 Google Play 商店中进行购买。关于许可，我看到 Google 提供了很棒的许可证验证库 (LVL)，文档也非常有用。
我唯一的问题是我需要临时许可证的选项，所以：

*   如果用户在 Play Store 上花少量钱购买应用程序，他应该能够在第一次启动后运行一段时间。
*   到期后，用户应该能够再次从 Google Play 商店购买许可证，并再次使用同一帐户在同一设备上运行它。

我正在寻找 Google 提供的许可证续订选项，而无需设置自己的许可服务器。在我看来，这在 Google Play 商店中是不可能的，因为一旦购买了应用程序，它就会在 Google 上注册，无论用户使用什么设备，都不需要重新购买。

我的应用程序旨在用于商业目的，因此我正在寻找 Google 支持的许可模式。到目前为止，我无法找到有关 LVL 临时许可的任何信息。您知道我可以实施的其他可能性吗？我真的在 Play Store 上寻找一个选项，因为它被广泛使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:46:21.090

为此使用 LVL 是一个坏主意，因为：

*   它确实不适用于订阅类型模型
*   它很容易破解。大多数实现都可以被 AntiLVL 之类的脚本破解

相反，您可以使用 Google 提供的应用内购买 API 的[订阅](http://developer.android.com/guide/google/play/billing/billing_overview.html#billing-types)功能。这是专门为做你想做的事而设计的。

# sql - SQL查询/存储过程来计算每日总和的月平均值

> ID：11169925
> 
> 赞同：0
> 
> 时间：2012-06-23T13:33:48.367
> 
> 标签：sql, query-optimization, firebird, firebird2.1

我正在使用火鸟 2.1。

我可以使用一些帮助来创建以下查询或存储过程。

我需要列出每日零用现金交易总额的月平均值。

让我解释：

> 表 PettyCash（行 ID、TDate、InOut、金额）

*   1 2012-01-01 0 5.000
*   2 2012-01-01 1 3.000
*   3 2012-01-05 0 4.000
*   4 2012-01-23 1 2.000
*   5 2012-02-20 1 5.000

InOut = 0 如果是传入事务，InOut = 1 如果是传出事务

查询要做的是计算当月每一天的余额，将金额相加，然后除以当月的天数。

如果某一天没有交易，余额保持不变。

所以在一月份它是这样的：

*   2012-01-01 2.000
*   2012-01-02 2.000
*   2012-01-03 2.000
*   ...
*   2012-01-05 6.000

等等。

使事情复杂化的是，从去年开始总是有一个起始余额（加起来就是今年的余额）。

我这样计算：

```
SELECT SUM(IIF(INOUT = 0, AMOUNT, -AMOUNT))
FROM PETTYCASH
WHERE TDATE < '2012-01-01'; 
```

应为生成的查询或存储过程指定开始日期和结束日期 - 开始日期始终是一年的第一天，结束日期可以是一年中的给定日期，即：StartDate = 2012-01- 01，结束日期 = 2012-06-23

如果 EndDate 不是一个月的最后一天，则最后一个月的平均值应仅除以最后一天，在示例中，六月应除以 23 而不是 30。

> 结果应该是这样的：月 | 当月的每日总和的平均值

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:40:55.870

你需要的是一个子查询。内部子查询计算每天的总和，外部查询计算平均值。

我不熟悉火鸟的日期功能，但它确实有“提取”功能。以下使用它来获得您想要的东西：

```
select yr, mon, avg(amt)
from (SELECT extract(year from tdate) as yr, extract(month from tdate) as mon,
             extract(day from tdate) as day,
             SUM(IIF(INOUT = 0, AMOUNT, -AMOUNT)) as amt
      FROM PETTYCASH
      WHERE TDATE < '2012-01-01'
      group by extract(year from tdate), extract(month from tdate),
               extract(day from tdate)
     ) t
group by yr, mon
order by yr, mon 
```

# html - 跟踪电子邮件是否被阅读

> ID：11169927
> 
> 赞同：2
> 
> 时间：2012-06-23T13:34:54.553
> 
> 标签：html, iframe, tracking, html-email

一家公司想要一个可以在他们的客户打开公司发送给他们的电子邮件时进行记录的系统。

我首先想到的不是简单地在 html 电子邮件中添加（一个）图像并跟踪何时和谁从服务器请求这些图像，以及特定电子邮件的 ID，因此能够确定电子邮件何时被阅读.

但经过进一步研究，这似乎不太可靠，因为它确实需要用户显示图像，并且大多数现代客户端在用户批准之前禁用它。

还有其他更有效的方法来实现这一点吗？也许通过 iFrames？

此外，隐私当然是一个问题，并且会通知用户正在跟踪电子邮件。我还应该注意其他与法律或隐私相关的事项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:29:43.973

The way all CRM systems dos it, is excatly by tracking when a 1x1 image is shown. Theres no other way of doing this. The big issue is the spamfilters that stops anykind of iFrames or ip's.

The downside to this methode is that around 10% of users read an email without showing images first.

# iphone - 如何重新创建或从此视图控制器继承

> ID：11169933
> 
> 赞同：-1
> 
> 时间：2012-06-23T13:35:44.600
> 
> 标签：iphone, objective-c, ios

当您尝试在 iphone 上创建事件时会显示此内容：http: [//postimage.org/image/mlx00ycwr/](http://postimage.org/image/mlx00ycwr/)

我希望将上图中看到的完全相同的功能用于其他用途。

例如，我可以继承这个视图控制器或其他影响吗？这样我就不必按照我的意思重新创建它。

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:38:33.917

很抱歉，（一般而言）如果您想在自己的应用程序中复制另一个应用程序的功能，您将不得不自己创建它***或***找到一些库或开源框架来为您完成它。

也就是说，这似乎是您要添加的事件。我认为您可能能够在 EventKit 中获得其中的一些功能。StackOverflow 上还有其他问题（[例如这个](https://stackoverflow.com/questions/6530687/how-to-add-events-in-iphone-using-event-kit-framework)），您可以查找这些问题应该能够帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:39:06.633

您必须重新创建整个 UI 并使用该`EventKit`框架来操作用户的日历数据库。

# asp.net-mvc - 没有数据库的 ASP.NET MVC 2 DropDownListFor

> ID：11169939
> 
> 赞同：1
> 
> 时间：2012-06-23T13:36:30.780
> 
> 标签：asp.net-mvc

我是 MVC 的新手，我正在尝试使用 TextBox 和 DropDownList 字段创建一个小型产品表单，我在 Model 中创建了一个带有 personName、productName 的类。我只有 5 个产品，所以我不想使用 db。

我尽我所能通过谷歌搜索但仍然无法获得我的下拉列表

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:40:13.883

如果您不想使用数据库，您可以创建一个存储所有产品信息的 XML 文档。

然后，您可以创建一个使用 XML 解析器从 XML 文档中获取所有值的模型。

在模型中获得值后，您可以将其绑定到`DropDownListFor<Model>`.

如果产品没有更改，您还可以将产品硬编码到 DropDownList 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:01:13.230

假设您有一个`PersonsProduct`类来表示您的模型/视图模型，如下所示

```
public class PersonsProduct
{

    public string PersonName { set;get;}
    public IEnumerable<SelectListItem> Products { get; set; }
    public string SelectedProductId { get; set; }
    //Other Properties
} 
```

在您的`GET`操作方法中，您可以像这样初始化值

```
public ActionResult AddProduct()
{
    var objProduct = new PersonsProduct();
    objProduct.Products = new[]
    {
          new SelectListItem { Value = "1", Text = "Book" },
          new SelectListItem { Value = "2", Text = "Pen" },
          new SelectListItem { Value = "3", Text = "Computer" },
          new SelectListItem { Value = "4", Text = "Table" },
          new SelectListItem { Value = "5", Text = "Mouse" }
    };
    // can replace the above line with loading data from Data access layer.
    return View(objProduct);
} 
```

在你的视图中，它是对视图模型的强`PersonsProduct`类型

```
@model PersonsProduct 
@using (Html.BeginForm())
{ 
  @Html.DropDownListFor(x => x.SelectedProductId, new SelectList(Model.Products ,"Value","Text"), "Select..")
  <input type="submit" value="save" />
} 
```

在您的`HTTPPost`操作中，您可以像这样获取所选的 productId

```
[HttpPost]
public ActionResult Index(PersonsProduct model)
{
 //  check model.SelectedProductId here

} 
```

## 从来没有这样的硬编码。它是丑陋的丑陋的！

这回答了您的问题（不使用数据库和 XML）。**但我强烈建议避免这种硬编码方法**。您应该更好地为产品列表使用不同的源，例如数据库/XML 文件等。否则，每当您想将新产品添加到列表中时，您都需要重新编译。我希望您将更改此代码以从其他来源读取产品数据，而不是硬编码值。

# c - 比较“argv”和“int”变量 (C)

> ID：11169945
> 
> 赞同：1
> 
> 时间：2012-06-23T13:37:28.810
> 
> 标签：c, argv

我想知道如何用 C 语言比较我输入`argv[2]`的数字和`int`代码中的数字：

```
EX: prog.exe file.txt 74
========================

int n; 
scanf ("%d", &n);

if (n > argv[2]) 
{ 
   [...] 
} 
```

如何比较这些不同类型的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T13:39:28.723

传递给您的应用程序的任何命令行参数都存储`argv`为字符指针（也称为“C 字符串”）。在比较之前，您需要通过几十种方法中的任何一种（最简单的是[`atoi`](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)）将字符串转换为整数。

如果您正在编写严肃的生产代码，请避免使用`atoi`，因为很难区分失败和评估为 number 的字符串`0`。您应该改为使用[`strtol`](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)适当的错误检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T13:56:39.247

命令行参数是一个字符串。它们需要转换为各自的类型。就个人而言，我会首先使用整数变量和 atoi 解压缩您的 argv[2]；在 中输入用户输入的值`n`，然后进行比较，如下所示：

```
#include <stdio.h>
#include <string.h>

int n;
int argv_2;

int main(int argc, char *argv[])
{
    int rc = 0;

/* Check for three arguments, program name and two passed. */    

    if(3 == argc) 
    {
        argv_2 = strtol(argv[2], NULL, NULL, 10);

        printf("Please enter a number for the vaue of the variable n\t: ");
        scanf("%d", &n);
        printf("\n\n");

        if (n > argv_2)
        {
            printf("The value of n: %i is greater than argv[2]: %i\n", 
                   n, argv_2);
        }
        else
        {
            printf("The value of n: %i is not greater than argv[2]: %i\n", 
                   n, argv_2);
        }
    }
    else
    {
        printf("Usage: ./test arg1 arg2 \n\n");
    }

    return rc;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T13:48:07.033

`atoi()`如果要将 argv[2]转换 为`int`包含. 此函数只是转换字符串的第一个数字，直到遇到字符串的非数字成员。`stdlib.h``atoi()`

# ios - 开源iphone之类的短信UI界面

> ID：11169947
> 
> 赞同：1
> 
> 时间：2012-06-23T13:37:59.957
> 
> 标签：ios, open-source, chat

我是ios开发新手。我正在寻找构建一个类似于 iphone 内置聊天的小型应用程序。有谁知道任何模仿聊天界面的开源项目？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:02:55.063

试试这个 - [http://mobiforge.com/developing/story/sms-bubble-ui-iphone-apps](http://mobiforge.com/developing/story/sms-bubble-ui-iphone-apps)

您可以从这里下载源代码[http://www.mediafire.com/?w2p0dfjbad3vcvy](http://www.mediafire.com/?w2p0dfjbad3vcvy)。

# iphone - iPhone 好像当我调用 MPMoviePlayerController 的 setFullscreen 方法时不起作用

> ID：11169950
> 
> 赞同：0
> 
> 时间：2012-06-23T13:38:14.763
> 
> 标签：iphone, objective-c

我希望我的视频 t0 开始全屏，我正在调用以下方法 [ mp setFullscreen: yes]; 似乎它没有做任何事情，如果我将其注释掉，视频播放器的运行方式相同。当玩家运行时，右侧有一个带有 2 个箭头的图标，似乎按下它会进入全屏状态。

我做错了什么吗？

(void)viewDidLoad {

```
 // save it in a fix file name for testing documets\ted.mp4
NSURL *url  = [[NSBundle mainBundle]
               URLForResource:@"FredCouplesDriv"
               withExtension:@"mov"];

mp=[[MPMoviePlayerController alloc] initWithContentURL: url];
[mp.view setFrame: self.view.bounds];
[self.view addSubview: mp.view];

// Set movie player layout
[mp setControlStyle:MPMovieControlStyleEmbedded];

// set full screen
[mp setFullscreen:YES];

// May help to reduce latency
[mp prepareToPlay];

[mp play];
  [mp setFullscreen:YES];

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePlayBackDidFinish:) 
                                             name:MPMoviePlayerPlaybackDidFinishNotification 
                                           object:nil];

  [self.view bringSubviewToFront: mStop ]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:23:09.987

移动`[mp setFullscreen:YES];`到`viewDidAppear`你会没事的

```
-(void) viewDidAppear:(BOOL)animated
{
    [mp setFullscreen:YES];
} 
```

# .htaccess - HTACCESS 捕获文件名作为请求参数

> ID：11169953
> 
> 赞同：2
> 
> 时间：2012-06-23T13:38:39.220
> 
> 标签：.htaccess

我有这个 htaccess 规则将我的页面重定向到 data_parser.php

```
 RewriteEngine On
 RewriteRule ^main/([^/]+)$ data_parser.php?rand_code=$1 [nc] 
```

当我在 data_parser.php 中打印请求时，rand_code 值原来是页面的文件名。例如网址： http: [//mysite.com/main/ran12345](http://mysite.com/main/ran12345)。当 print_r 时，这是我会看到的值

```
[rand_code] => data_parser.php 
```

代替，

```
[rand_code] => ran12345 
```

它正在获取文件名，我的规则做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:14:08.217

也许尝试在你的前面添加这个`RewriteRule`：

```
RewriteCond %{REQUEST_URI} !data_parser.php 
```

因为看起来正在发生的是请求不止一次地循环通过您的规则。第二次，`([^/]+)`匹配 data_parser.php。

# java - 如何在 Clojure 中导入位于单独文件中的嵌套 Java 类？

> ID：11169958
> 
> 赞同：2
> 
> 时间：2012-06-23T13:39:21.123
> 
> 标签：java, clojure

例如 SearcherServer 和 SearcherClient 位于不同的文件中：

[https://github.com/linkedin/indextank-engine/tree/master/src/main/java/com/flaptor/indextank/rpc](https://github.com/linkedin/indextank-engine/tree/master/src/main/java/com/flaptor/indextank/rpc)

在 Java 中，SearcherClient 在其主要方法中使用，如下所示：

```
Searcher.Client client = new Searcher.Client(protocol); 
```

[https://github.com/linkedin/indextank-engine/blob/master/src/main/java/com/flaptor/indextank/rpc/SearcherClient.java#L106](https://github.com/linkedin/indextank-engine/blob/master/src/main/java/com/flaptor/indextank/rpc/SearcherClient.java#L106)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:14:54.130

您可以将 Searcher.Client 称为`com.flaptor.indextank.rpc.Searcher$Client`.

Client 不在 Searcher 的单独文件中：它们都在自动生成的类`Searcher.java` [中](https://github.com/linkedin/indextank-engine/blob/master/gen-java/com/flaptor/indextank/rpc/Searcher.java)。

# java - 居中 JFrame 容器对象

> ID：11169959
> 
> 赞同：2
> 
> 时间：2012-06-23T13:39:24.043
> 
> 标签：java, swing, jframe, containers, centering

每次我创建一个新的 JFrame 对象时，框架都会出现在 0,0 位置。我尝试使用 setLocationRelativeTo() 查找如何使窗口居中，但我尝试在容器上调用的所有内容都显示为不可编译的代码。这是我正在使用的课程之一：

```
package Ginfo;

import java.awt.*;
import java.awt.event.*;
import java.io.*;

import javax.swing.*;

public class EditUsers extends JFrame implements ActionListener
{
    Container EU;

    JPanel modUsers, button, output;
    JLabel user, password;
    JTextField tuser, tpassword;
    JTextArea toutput;
    JButton addAdmin, addStand, editPass, removeUser, exit;

    ObjectOutputStream oout;
    ObjectInputStream oin;

    Message m;
    ConnectInfo c;

public EditUsers (ObjectOutputStream oout2, ObjectInputStream oin2, Message m2, ConnectInfo a)
{
    super("User Modifications");
    EU = getContentPane();
    oout = oout2;
    try 
    {
        oout.reset();
    } 
    catch (IOException e)
    {
        e.printStackTrace();
    }
    oin = oin2;
    m = m2;
    c = a;

    buildUserInfoPanel();
    buildOutputPanel();
    buildButtonPanel();
    EU.add(modUsers, BorderLayout.NORTH);
    EU.add(output, BorderLayout.CENTER);
    EU.add(button, BorderLayout.SOUTH);
    pack();
    setVisible(true);

}

private void buildUserInfoPanel()
{
    modUsers = new JPanel();
    modUsers.setLayout(new GridLayout (2,2));
    user = new JLabel ("Enter the username you wish to edit: ");
    tuser = new JTextField (15);
    password = new JLabel("Enter their new password: ");
    tpassword = new JTextField(15);

    modUsers.add(user);
    modUsers.add(tuser);
    modUsers.add(password);
    modUsers.add(tpassword);
}

private void buildOutputPanel()
{
    output = new JPanel();
    toutput = new JTextArea();
    toutput.setPreferredSize(new Dimension (400,100));

    output.add(toutput);
}

private void buildButtonPanel()
{
    button = new JPanel();
    addAdmin = new JButton ("Add user as administrator");
    addStand = new JButton ("Add user as standard");
    editPass = new JButton ("Change password");
    removeUser = new JButton ("Remove user");
    exit = new JButton ("Back");

    button.add(addAdmin);
    button.add(addStand);
    button.add(editPass);
    button.add(removeUser);
    button.add(exit);

    addAdmin.addActionListener(this);
    addStand.addActionListener(this);
    editPass.addActionListener(this);
    removeUser.addActionListener(this);
    exit.addActionListener(this);
}

public void actionPerformed(ActionEvent e) 
{
    if (e.getSource() == addAdmin)
    {
        m.type = Message.ADDADMIN;
        m.main = tuser.getText();
        m.setPassword = tpassword.getText();
        m.setPermission = 1;
    }
    else if (e.getSource() == addStand)
    {
        m.type = Message.ADDSTANDARD;
        m.main = tuser.getText();
        m.setPassword = tpassword.getText();
        m.setPermission = 2;
    }
    else if (e.getSource() == editPass)
    {
        m.type = Message.CHANGEPASSWORD;
        m.main = tuser.getText();
        m.setPassword = tpassword.getText();
    }
    else if (e.getSource() == removeUser)
    {
        m.type = Message.REMOVEUSER;
        m.main = tuser.getText();
    }
    else if (e.getSource() == exit)
    {
        new WhatToDo (oout, oin, m, c);
        dispose();
        return;
    }
    try 
    {
        oout.writeObject(m);
        m = (Message)oin.readObject();
        toutput.setText(m.response);
    } 
    catch (IOException e1) 
    {
        e1.printStackTrace();
    } 
    catch (ClassNotFoundException e1) 
    {
        e1.printStackTrace();
    }
}
} 
```

当我运行此代码时，窗口从 (0,0) 位置开始。我想做的是将窗口大小调整为运行它的计算机分辨率大小的 1/4，并重置窗口的位置，使窗口的中心位于屏幕的中心。如果分辨率为 1000x1000，则窗口应为 250x250，并位于 (500 - 250/2)X,(500 - 250/2)Y（左上角）乘 (500 + 250/2)X, (500 + 250/2) )Y（右下角）

（请注意，我为每个窗口使用不同的类，我在进程完成时打开和关闭它，所以如果没有其他类，这将无法完全编译。我正在传递我的 ObjectOutputStream、ObjectInputStream、我的对象调用 Message，另一个我称为 ConnectInfo 的对象。输出和输入流是为了保持与服务器的连接，Message 是来回发送的序列化信息，ConnectionInfo 主要保存 cookie 信息（用户连接、会话信息、权限水平等）。

好的，现在我有

```
package Ginfo;

import java.awt.*;
import java.awt.event.*;
import java.io.*;

import javax.swing.*;

public class EditUsers implements ActionListener
{

Container EU;

JFrame myJFrame;

JPanel modUsers, button, output;
JLabel user, password;
JTextField tuser, tpassword;
JTextArea toutput;
JButton addAdmin, addStand, editPass, removeUser, exit;

ObjectOutputStream oout;
ObjectInputStream oin;

Message m;
ConnectInfo c;

public EditUsers (ObjectOutputStream oout2, ObjectInputStream oin2, Message m2, ConnectInfo a)
{
    myJFrame = new JFrame("User Modifications");
    EU = myJFrame.getContentPane();
    oout = oout2;
    try 
    {
        oout.reset();
    } 
    catch (IOException e)
    {
        e.printStackTrace();
    }
    oin = oin2;
    m = m2;
    c = a;

    buildUserInfoPanel();
    buildOutputPanel();
    buildButtonPanel();
    EU.add(modUsers, BorderLayout.NORTH);
    EU.add(output, BorderLayout.CENTER);
    EU.add(button, BorderLayout.SOUTH);
    myJFrame.add(EU);
    myJFrame.pack();
    myJFrame.setVisible(true);

}

private void buildUserInfoPanel()
{
    modUsers = new JPanel();
    modUsers.setLayout(new GridLayout (2,2));
    user = new JLabel ("Enter the username you wish to edit: ");
    tuser = new JTextField (15);
    password = new JLabel("Enter their new password: ");
    tpassword = new JTextField(15);

    modUsers.add(user);
    modUsers.add(tuser);
    modUsers.add(password);
    modUsers.add(tpassword);
}

private void buildOutputPanel()
{
    output = new JPanel();
    toutput = new JTextArea();
    toutput.setPreferredSize(new Dimension (200,100));

    output.add(toutput);
}

private void buildButtonPanel()
{
    button = new JPanel();
    addAdmin = new JButton ("Add user as administrator");
    addStand = new JButton ("Add user as standard");
    editPass = new JButton ("Change password");
    removeUser = new JButton ("Remove user");
    exit = new JButton ("Back");

    button.add(addAdmin);
    button.add(addStand);
    button.add(editPass);
    button.add(removeUser);
    button.add(exit);

    addAdmin.addActionListener(this);
    addStand.addActionListener(this);
    editPass.addActionListener(this);
    removeUser.addActionListener(this);
    exit.addActionListener(this);
}

public void actionPerformed(ActionEvent e) 
{
    if (e.getSource() == addAdmin)
    {
        m.type = Message.ADDADMIN;
        m.main = tuser.getText();
        m.setPassword = tpassword.getText();
        m.setPermission = 1;
    }
    else if (e.getSource() == addStand)
    {
        m.type = Message.ADDSTANDARD;
        m.main = tuser.getText();
        m.setPassword = tpassword.getText();
        m.setPermission = 2;
    }
    else if (e.getSource() == editPass)
    {
        m.type = Message.CHANGEPASSWORD;
        m.main = tuser.getText();
        m.setPassword = tpassword.getText();
    }
    else if (e.getSource() == removeUser)
    {
        m.type = Message.REMOVEUSER;
        m.main = tuser.getText();
    }
    else if (e.getSource() == exit)
    {
        new WhatToDo (oout, oin, m, c);
        myJFrame.dispose();
        return;
    }
    try 
    {
        oout.writeObject(m);
        m = (Message)oin.readObject();
        toutput.setText(m.response);
    } 
    catch (IOException e1) 
    {
        e1.printStackTrace();
    } 
    catch (ClassNotFoundException e1) 
    {
        e1.printStackTrace();
    }
}
} 
```

现在问题出在 myJFrame.add(EU) 上，它说“java.lang.IllegalArgumentException：将容器的父级添加到自身”。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T13:46:56.490

尝试`myJFrameObject.setLocationRelativeTo(null);`

来自 JavaDoc

*   如果该组件为空，或者与该组件关联的 GraphicsConfiguration 为空，则窗口被放置在屏幕的中心。中心点可以通过 GraphicsEnvironment.getCenterPoint 方法获得。
*   如果组件不为 null，但当前未显示，则窗口将放置在与此组件关联的 GraphicsConfiguration 定义的目标屏幕的中心。
*   如果组件不为空并且显示在屏幕上，则窗口的位置应使窗口的中心与组件的中心重合。

## 编辑

我刚刚在这个（不太高级的）构造函数上测试了你的代码，它似乎像你想要的那样工作（至少这是我希望的）。`setLocationRelativeTo(null)`我刚刚放置`setVisible(true)`以确保 Frame 将包含其所有元素并知道居中时使用的大小。

```
public EditUsers() {
    super("User Modifications");
    //I removed some not GUI operations

    EU = getContentPane();

    buildUserInfoPanel();
    buildOutputPanel();
    buildButtonPanel();
    EU.add(modUsers, BorderLayout.NORTH);
    EU.add(output, BorderLayout.CENTER);
    EU.add(button, BorderLayout.SOUTH);
    pack();
    //put setLocationRelativeTo before setVisible() 
    setLocationRelativeTo(null);
    setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T13:44:37.233

您必须在 GUI 构造函数中调用最后的代码行

```
JFrame#pack();
JFrame#setLocationRelativeTo(null); // Windows OS
//or JFrame#setLocationByPlatform(true); //depends of Native OS
JFrame#setVisible(true); 
```

另一个建议

*   不要扩展 JFrame，创建一个局部变量，实例

*   不要为[JTextArea 设置 PreferredSize，最好设置为 Column 和 row](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#JTextArea%28int,%20int%29)

*   可能设置`GridLayout`为`button = new JPanel();`,`JPanel`默认有`FlowLayout`

编辑

将代码行`EditUsers eu = new EditUsers();`放在主类中，返回新的 GUI 实例`JFrame`，包装代码创建 GUI 到[InitialThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)，别无所求:-)

```
 public static void main(String[] a_args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                EditUsers eu = new EditUsers();
            }
        });
    } 
```

编辑2

修改后的代码返回

![在此处输入图像描述](../Images/d54c8fa0d9e45c914fd64906bf224fbb.png)

从代码

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import javax.swing.*;

public class EditUsers implements ActionListener {

    private JFrame myJFrame;
    private JPanel modUsers, button, output;
    private JLabel user, password;
    private JTextField tuser, tpassword;
    private JTextArea toutput;
    private JButton addAdmin, addStand, editPass, removeUser, exit;
    private ObjectOutputStream oout;
    private ObjectInputStream oin;
    //private Message m;
    //private ConnectInfo c;

    public static void main(String[] a_args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                EditUsers eu = new EditUsers();
            }
        });
    }

    public EditUsers() {
        //editUsers(oout2, oin2, m2, a);
        buildUserInfoPanel();
        buildOutputPanel();
        buildButtonPanel();
        myJFrame = new JFrame("User Modifications");
        myJrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        myJFrame.add(modUsers, BorderLayout.NORTH);
        myJFrame.add(output, BorderLayout.CENTER);
        myJFrame.add(button, BorderLayout.SOUTH);
        myJFrame.pack();
        myJFrame.setLocationRelativeTo(null);
        myJFrame.setVisible(true);
    }

    /*private void editUsers(ObjectOutputStream oout2, 
          ObjectInputStream oin2, Message m2, ConnectInfo a) {
        oout = oout2;
        try {
            oout.reset();
        } catch (IOException e) {
            e.printStackTrace();
        }
        oin = oin2;
        m = m2;
        c = a;
    }*/ 
```

编辑 3

[JTextArea](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)应该在[JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)中，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T14:14:16.893

应该在`setLocationRelativeTo`窗口的尺寸或多或少初始化后调用。

关于您在[pack](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Window.html#pack%28%29)命令之后直接采样。该`pack()`命令可能会重新排列您的框架。

# networking - 分配给待传输数据包skb的空间量究竟是如何确定和分配的？

> ID：11169961
> 
> 赞同：2
> 
> 时间：2012-06-23T13:39:40.177
> 
> 标签：networking, linux-kernel, kernel

据我了解，当内核堆栈（在 Tx 路径上）分配套接字缓冲区（skb）时，“头”和“尾”指针指向保留内存空间的开始和结束。

我的问题是：究竟是什么决定了这个数量：（尾 - 头）八位字节？是最大 MTU 吗？看起来不像是一个小实验表明字节数（尾头）可能非常小（320字节等）。那么是套接字应用程序在这里发挥作用吗？

此外，AFAIK 的想法是保留足够的内存，以便在协议堆栈的下方不需要进一步的分配，即，保留的空间可以超过有效负载。如果是这样，那么进一步封装的情况（如 VoIP、SSL 等）呢？

*更新：* 这有助于回答问题吗？

1.  在 net/ipv4/tcp_output.c 中找到：

    ... tcp_make_synack() { ... skb = sock_wmalloc(sk, MAX_TCP_HEADER + 15 + s_data_desired, 1, GFP_ATOMIC); ... }

这似乎是 TCP 状态 m/c 的 SYN-ACK 部分。因此，通过这个，“大小”似乎可以达到 320 左右。

1.  TCP 分段数据包.. 默认 'mss' 是 512 ？<-- 基于 tcp_base_mss ？

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:24:09.743

首先进行小修正 - 缓冲区介于`head`和之间`end`，而不是`tail`（与 配对`data`）。

你的基本想法是正确的。TCP 根据它需要的数据进行分配，加上较低层头的空间。由于事先并不真正知道这些标头，因此 TCP 根据可能的最大值进行分配（这很可能比实际需要的要多得多）。

如果这还不够，可以重新分配数据包（`pskb_expand_head`可以使用）。
在大多数情况下，将数据添加到数据包的代码首先检查是否有足够的顶部空间（希望是这种情况），如果没有则重新分配。

“默认” MSS 不是很重要 - 只有在找不到更好的值时才使用它。通常，MSS 为 MTU-40，通常为 1460。

# c# - 拆分cs文件，创建接口，然后将实现删除到其他项目

> ID：11169962
> 
> 赞同：0
> 
> 时间：2012-06-23T13:39:46.117
> 
> 标签：c#, .net, structuremap

我有两个项目：`DataProj`和`DomainProj`. 我的解决方案的当前状态是在 DomainProj 我有 .cs 文件，每个文件中有两个类：`class X`和`class XRepository`. 例如，我有文件调用`Customer.cs`，它包含：

```
public class Customer {
...
}

public class CustomerRepository {
...
} 
```

我正在寻找一种方法：
1\. 拆分文件，以便每个类都在自己的文件中。2\. 为每个 Repository 类创建接口。3\. 将 Repository 类移动到 DataProj 项目中。4\. 为将每个接口映射到其实现的 StructureMap 创建代码。

是否有任何工具可以让我简单地做到这一点？有什么快速的方法我可以自己做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:59:50.367

[JetBrains 的ReSharper](http://www.jetbrains.com/resharper/download/ "锐化器")是完成几乎所有这些工作的绝佳工具。

安装 ReSharper 后，单击文件中的类名，然后按 F6 将允许您将文件中的类移动到单独的文件/文件夹/项目等...这将解决第 1 点和第 3 点。

Resharper 还允许您通过右键单击类并选择重构-> 提取接口来提取接口。然后，您可以选择要提取到接口的方法和属性。解决第 2 点...

resharper 的文档很棒，如果您下载键盘快捷键的“备忘单”，您应该能够完成大部分需要做的事情。

不太熟悉 StructureMap 所以不确定那个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:44:40.653

结构图问题基本上是此处找到的问题/答案的副本：

[StructureMap 使用 Scan 自动注册泛型类型](https://stackoverflow.com/questions/516892/structuremap-auto-registration-for-generic-types-using-scan)

您不需要创建将接口映射到具体类的代码。StructureMap 已经提供了这种能力。你只需要扫描

# php - 克隆的 jQuery 对象和 CodeIgniter $_POST

> ID：11169965
> 
> 赞同：0
> 
> 时间：2012-06-23T13:40:40.330
> 
> 标签：php, jquery, html, codeigniter, caching

我遇到了克隆对象和 CodeIgniter 的问题。提交表单时，我需要在下一页显示克隆的字段。有一些逻辑可以保存与大多数浏览器兼容的克隆字段？对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:16:11.623

如果您需要获取一些数据到下一页，使用会话可能是一种解决方案。CodeIgniter`flashdata`用于在会话中存储临时信息。

要设置一个值，您可以使用：

```
$this->session->set_flashdata('item', 'value'); 
```

要在您使用的下一个请求中再次阅读它：

```
$this->session->flashdata('item'); 
```

在下一次请求之后，变量被销毁。更多信息可以在[文档](http://codeigniter.com/user_guide/libraries/sessions.html)中找到。

给我们看一些代码，也许我们可以提供更准确的解决方案。

# php - 使用 ffmpeg 而不是 flvmdi 将元数据添加到 flv 文件

> ID：11169970
> 
> 赞同：0
> 
> 时间：2012-06-23T13:41:09.783
> 
> 标签：php, flash, ffmpeg, metadata, netstream

我已经用netstream制作了一个播放flv电影的播放器，但它需要一些名为“关键帧”的元数据信息，其中包含两个时间和位置数组，一些flv视频有这个元数据，有些没有，我可以添加关键帧元数据名为“flvmdi”的程序和播放器工作正常，但由于某些原因我无法在我的服务器上安装此软件。我知道我们可以在 PHP 中使用 ffmpeg 函数将元数据添加到电影中。我可以在 PHP 中使用 ffmpeg 函数将关键帧数组作为元数据添加到 flv 文件吗？我们如何在 php 中使用 ffmpeg 将时间和位置数组注入到 flv 文件中？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-30T09:07:16.243

使用*ffmpeg*，您可以插入保留视频（-vcodec 复制）/音频（-acodec 复制）编解码器的关键帧，以可变间隔插入关键帧。

例如; 每 1 秒：**-g 1**

```
ffmpeg -i /INPUT.FLV -acodec copy -vcodec copy -copyts -g 1 /OUTPUT.FLV 
```

将命令中断为变量并修改您的输入和输出文件/路径，调整 -g 的值；

```
$interval = 1;                       // 1sec
$pI = '/usr/local/www/sitex/upload'; // Input
$pO = '/usr/local/www/sitex/encode'; // Output
$fI = 'inp.flv';
$fO = 'out.flv';

    ffmpeg -i $pI+$fI -acodec copy -vcodec copy -copyts -g $interval $pO+$fO 
```

# java - 由于 .properties 文件加载，可执行 .jar 无法启动

> ID：11169971
> 
> 赞同：4
> 
> 时间：2012-06-23T13:41:17.500
> 
> 标签：java, jar, executable-jar, properties-file

我在运行可执行 .jar 文件时遇到问题。我创建了一个包含 .properties 文件的项目。当我从 eclipse 启动它时它工作得很好，但是当我将它导出到可执行的 .jar 文件并尝试运行它时：

```
java -jar myfile.jar 
```

我得到以下异常：

（无法在此处发布图片） [http://imageshack.us/photo/my-images/824/29583616.png/](http://imageshack.us/photo/my-images/824/29583616.png/)

我检查了 .jar 中的清单文件，它包含

```
Class-Path: . 
```

这是加载的属性文件：

```
properties = new Properties();
    properties.load(new FileInputStream(
            "src/com/resources/treeView.properties")); 
```

知道是什么导致了这个异常吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T13:56:53.747

如果属性文件在 jar 文件中，则不能将其作为文件访问。

您需要让类加载器将资源作为输入流获取。请参阅[从类路径资源（XML 文件）获取输入流](https://stackoverflow.com/questions/793213/getting-the-inputstream-from-a-classpath-resource-xml-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:54:10.417

在 Eclipse（以及大多数 IDE）中，当前目录是项目的根目录。这意味着这`Class-Path: .`在 Eclipse 中意味着与从命令行运行它时不同的东西。这就是你写“src/com/...”的原因。删除“src”：

```
properties.load(new FileInputStream("com/resources/treeView.properties")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T06:54:01.443

您的属性文件在 JAR 文件中。所以，使用：**ClassLoader.getResourceAsStream()。**

# c# - datagridview 中的每一行（对象）都有自己的绑定源？

> ID：11169972
> 
> 赞同：2
> 
> 时间：2012-06-23T13:41:58.050
> 
> 标签：c#, datagridview, bindingsource

我正在用 C# (.NET 4.0) 编写一个小应用程序。我有一个datagridview，每一行代表一个对象。我想要一个允许选择该对象的特定属性的组合框列。

**例子：**

```
public class Car
{
   public String Make {get; set;}
   public BindingList<String> AllColors {get; set;}
   public int SelectedColorIndex {get; set;}
} 
```

每行代表一个 Car 对象。每个（不同的）汽车对象都有自己的可能颜色选择（AllColors）。我想要一列，您可以通过从 AllColors 中选择一种颜色来设置 SelectedColorIndex（AllColors 特定于每个 Car 对象）。

注意：我编写了这个示例，但它描述了我想要完成的任务。

我怎样才能做到这一点？我发现的唯一解决方案是在 datagridview 之外有一个特定的组合框，您可以使用它来更改选定的行。在行输入事件中，我将绑定源的数据源更改为当前的“AllColors”。

感谢您的时间和回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:35:37.393

这是一个工作示例背后的代码，其中可用颜色被过滤为绑定对象的 AllColors 列表中提供的颜色。

魔术发生在`CellBeginEdit`和`CellEndEdit`事件处理程序中 - 我们为每个组合框单元格提供绑定行中的列表，然后在退出时将其重置。

这依赖的一件事是拥有一个包含所有颜色的主列表 - 没有办法解决这个问题。

此外，我还为新行需要默认值的情况添加了处理。我所做的只是将选定的索引默认设置为一个。当然这在现实世界中是行不通的，你需要一些更聪明的东西！该`DefaultValuedNeeded`事件[在 MSDN 上](http://msdn.microsoft.com/en-us/library/b22t666e.aspx)进行了描述。

```
public partial class Form1 : Form
{

    private BindingSource cars;
    private BindingSource masterColors;

    public Form1()
    {
        InitializeComponent();

        masterColors = new BindingSource();
        masterColors.Add(new CarColor{Name = "Blue", Index = 1});
        masterColors.Add(new CarColor{Name = "Red", Index = 2});
        masterColors.Add(new CarColor { Name = "Green", Index = 3 });
        masterColors.Add(new CarColor { Name = "White", Index = 4 });

        BindingList<CarColor> fordColors = new BindingList<CarColor>();
        fordColors.Add(new CarColor{Name = "Blue", Index = 1});
        fordColors.Add(new CarColor{Name = "Red", Index = 2});

        BindingList<CarColor> toyotaColors = new BindingList<CarColor>();
        toyotaColors.Add(new CarColor { Name = "Green", Index = 3 });
        toyotaColors.Add(new CarColor { Name = "White", Index = 4 });

        cars = new BindingSource();
        cars.Add(new Car { Make = "Ford", SelectedColorIndex = 1, AllColors = fordColors });
        cars.Add(new Car { Make = "Toyota", SelectedColorIndex = 3, AllColors = toyotaColors });

        dataGridView1.DataSource = cars;
        dataGridView1.Columns["SelectedColorIndex"].Visible = false;
        //dataGridView1.Columns["AllColors"].Visible = false;

        DataGridViewComboBoxColumn col = new DataGridViewComboBoxColumn();
        col.Name = "AvailableColors";
        col.DataSource = masterColors;
        col.DisplayMember = "Name";
        col.DataPropertyName = "SelectedColorIndex";
        col.ValueMember = "Index";
        dataGridView1.Columns.Add(col);

        dataGridView1.CellBeginEdit += new DataGridViewCellCancelEventHandler(dataGridView1_CellBeginEdit);
        dataGridView1.CellEndEdit += new DataGridViewCellEventHandler(dataGridView1_CellEndEdit);
        dataGridView1.DefaultValuesNeeded += new DataGridViewRowEventHandler(dataGridView1_DefaultValuesNeeded);
    }

    void dataGridView1_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
    {
        if (e.ColumnIndex == dataGridView1.Columns["AvailableColors"].Index)
        {
            if (e.RowIndex != dataGridView1.NewRowIndex)
            {
                // Set the combobox cell datasource to the filtered BindingSource
                DataGridViewComboBoxCell dgcb = (DataGridViewComboBoxCell)dataGridView1
                                [e.ColumnIndex, e.RowIndex];
                Car rowCar = dataGridView1.Rows[e.RowIndex].DataBoundItem as Car;
                dgcb.DataSource = rowCar.AllColors;
            }

        }
    }

    private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
        if (e.ColumnIndex == dataGridView1.Columns["AvailableColors"].Index)
        {
            // Reset combobox cell to the unfiltered BindingSource
            DataGridViewComboBoxCell dgcb = (DataGridViewComboBoxCell)dataGridView1
                            [e.ColumnIndex, e.RowIndex];
            dgcb.DataSource = masterColors; //unfiltered
        }
    }

    void dataGridView1_DefaultValuesNeeded(object sender, DataGridViewRowEventArgs e)
    {
        e.Row.Cells["SelectedColorIndex"].Value = 1;
    }

}

public class Car
{
    public String Make { get; set; }
    public BindingList<CarColor> AllColors { get; set; }
    public int SelectedColorIndex { get; set; }
}

public class CarColor
{
    public String Name { get; set; }
    public int Index { get; set; }
} 
```

* * *

^(1我第一次从)[DataGridView 常见问题解答](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CF4QFjAA&url=http://windowsclient.net/Samples/Go%2520To%2520Market/DataGridView/DataGridView%2520FAQ.doc&ei=dNPlT8XEEIrtsgbjq8WjAQ&usg=AFQjCNFxVe3EWtsJNP7xXxENGfV6dxU0EQ)中学会了如何做到这一点，这是一个很好的资源，由当时`DataGridView`Microsoft 的项目经理 Mark Rideout 编写。FAQ 中的示例基于另一个组合框进行过滤，并使用 DataTables，但原理相同。

# javascript - :not 和 :first 在 jquery

> ID：11169973
> 
> 赞同：-2
> 
> 时间：2012-06-23T13:41:59.027
> 
> 标签：javascript, jquery, html, css, jquery-selectors

我有一个 jQuery 脚本来找出浏览器的分辨率，然后更改它的 css。

```
if ((screen.width>=1024) && (screen.height>=768))
{
 alert('Screen size: 1024x768 or larger');
  $("link[rel=stylesheet]:not(:first)").attr({href : "detect1024.css"});
}
else
{
  alert('Screen size: less than 1024x768, 800x600 maybe?');
  $("link[rel=stylesheet]:not(:first)").attr({href : "detect800.css"});
}
}); 
```

你能帮我了解它的实际功能吗？

是什么`:not(:first)`意思？请解释。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:45:31.557

实际上，这意味着您选择具有与单词匹配`link`的属性的每个元素，但排除第一个找到的结果:)`rel``stylesheet`

因此，如果您在容器中有三个元素并尝试使用它们来选择它们，`:not(:first)`您将收到第二个和第三个，但排除第一个（！）一个

不确定这是否是您想要的...但是如果您在标头中有多个链接属性并且除了第一个之外的所有属性都设置为该 href 您可能（！）最终请求/检查了服务器/缓存的 CSS几次

媒体查询（thirtydot 的评论）也是个好主意（评论 +1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:43:38.190

尝试使用交互式控制台，例如 Chrome 的检查器中的控制台或 Firefox 中的 Firebug。只需输入`$("link[rel=stylesheet]:not(:first)")`并查看是否有任何元素匹配。

编辑：Thirtydot 关于使用媒体查询的评论也是一个很好的评论，如果您要拥有多个样式表，[这篇文章](http://www.alistapart.com/articles/alternate/)可能会有一些有用的信息。

# sed - 将不以特定正则表达式开头的行添加到上一行

> ID：11169974
> 
> 赞同：2
> 
> 时间：2012-06-23T13:42:00.143
> 
> 标签：sed, grep, tr

> 短信；投递；"+99999999999";"";"";"2012.06.23 09:21";"";"xxxxxxxxxxxx xxxxxxxx,
> xxxxxxxxxxxx
> xxxxxxxxxxxx
> xxxxxxxxxxxx"

我需要任何不以“sms;deliver;”开头的行 被添加到上一行。即得到这样一条线：

> 短信；投递；"+99999999999";"";"";"2012.06.23 09:21";"";"xxxxxxxxxxxx xxxxxxxx, xxxxxxxxxxxx xxxxxxxxxxxx xxxxxxxxxxxx"

^ 那是一行。此外，删除/替换 xxxxx(content) 部分中的任何双引号也会很有帮助。

短信;发送;“+99999999999”;“”;“”;“2012.06.23 09:21”;“”;“xxxxxxxxxxxxxxx xxxxxxxx, xxxxxxxxxxxx xxxxxxxxxxxx”xxxxxx“xxxxxxxx”

所以上面的行会被转换成这个（双引号转换成单引号）：

短信；发送；"+99999999999";"";"";"2012.06.23 09:21";"";"xxxxxxxxxxxxxxx xxxxxxxx, xxxxxxxxxxxx xxxxxxxxxxxx 'xxxx'xxxxxxxx"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:32:51.587

以下`sed`命令似乎可以满足您的需要（已编辑：`sed`开头的简短命令用于过滤引号）：

```
sed '/^sms;deliver;/!'"y/\"/'/" yourfile | sed -n '/^sms;deliver;/!b;:r;${p;b};N;/\nsms;deliver;/!{s/\n//;br};P;s/.*\n//;br' 
```

一个简短的解释：

```
sed -n '# not print by default
/^sms;deliver;/!b # if line not starting with the pattern, goto end
:r #label r
${p;b} # if last line, print & exit
N # read new line, append to pattern space
/\nsms;deliver;/!{s/\n//;br} # if appended line doesn't start with pattern,
                             # remove newline & goto r
P # print everything up to the newline
s/.*\n//;br # remove what was just printed, goto r' 
```

`sed`开头的仅更改为`"`不`'`与`sms;delivered;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:43:00.367

这可能对您有用：

```
sed ':a;$!N;/\nsms;deliver;/!s/\n//;ta;:b;s/\(;".*\)"\([^";]*\)"\([^";]*"\)$/\1'\''\2'\''\3/;tb;P;D' file 
```

编辑：

的问题的测试数据`"`：

```
echo 'sms;deliver;"+99999999999";"";"";"2012.06.23 09:21";"";"xxxxxxxxxxxxx xxxxxxxx, xxxxxxxxxxxx xxxxxxxxxxxx "xxxx"xxxxxxxx"' >/tmp/a
sed ':a;$!N;/\nsms;deliver;/!s/\n//;ta;:b;s/\(;".*\)"\([^";]*\)"\([^";]*"\)$/\1'\''\2'\''\3/;tb;P;D' /tmp/a
sms;deliver;"+99999999999";"";"";"2012.06.23 09:21";"";"xxxxxxxxxxxxx xxxxxxxx, xxxxxxxxxxxx xxxxxxxxxxxx 'xxxx'xxxxxxxx"
sed 's/xx/"&"/g' /tmp/a >/tmp/b
sed ':a;$!N;/\nsms;deliver;/!s/\n//;ta;:b;s/\(;".*\)"\([^";]*\)"\([^";]*"\)$/\1'\''\2'\''\3/;tb;P;D' /tmp/b
sms;deliver;"+99999999999";"";"";"2012.06.23 09:21";"";"'xx''xx''xx''xx''xx''xx'x 'xx''xx''xx''xx', 'xx''xx''xx''xx''xx''xx' 'xx''xx''xx''xx''xx''xx' ''xx''xx'''xx''xx''xx''xx'" 
```

# scala - Play 如何识别特定的 websocket 消息？

> ID：11169975
> 
> 赞同：0
> 
> 时间：2012-06-23T13:42:56.180
> 
> 标签：scala, websocket, playframework-2.0

我正在查看 websocket-chat 示例。它揭示了很多，但我仍然无法得到一些东西。我了解如何在网页端接收、处理和发送消息。

`receive`然而，Play 通过Akka actor的方法捕获 websocket 消息。在websocket-chat中，这个方法有几种情况，但是我没搞懂，怎么知道哪个websocket消息应该映射到哪个case。事实上，我不明白 websocket 消息在进入 Play 域时遵循的路径，它是如何处理的，以及如何从网页发送不同的消息类型/种类。

我没有找到与此相关的任何信息或来源。请有人解释一下或指出某种好的参考吗？

**更新：**

[原始示例的链接](https://github.com/playframework/Play20/tree/master/samples/scala/websocket-chat)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:44:35.633

示例中的[接收方法](https://github.com/playframework/Play20/blob/master/samples/scala/websocket-chat/app/models/ChatRoom.scala#L91)没有任何指向 Play Websocket API 的链接。这个接收方法来自 Akka 库。

Websockets 事件[通过 Iteratee 管理](https://github.com/playframework/Play20/blob/master/samples/scala/websocket-chat/app/models/ChatRoom.scala#L62)`Talk`，它创建并向 Actor 系统发送消息。

简单地说，它允许通过在“工人”之间发送消息来拥有一个高度可扩展的系统（非阻塞）。

所以我建议你看看[Akka 库中的 Actor 模型](http://doc.akka.io/docs/akka/2.0.2/intro/getting-started-first-scala.html)。

# html - 更改 HTML 文档中标签之间的文本

> ID：11169976
> 
> 赞同：-2
> 
> 时间：2012-06-23T13:43:08.810
> 
> 标签：html, vb.net

基本上我想知道是否有人知道如何使 Visual Basic 自动更改其中的内容

```
<span id="total_quantity">1</span> 
```

更改和之间的内容`>`（`<` 例如数字或文本）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:32:03.737

如果您有许多涉及处理 HTML 的任务，我会推荐[HTML Agility Pack](http://html-agility-pack.net)

# ruby - 正确的 OO 2D 动画逻辑

> ID：11169982
> 
> 赞同：0
> 
> 时间：2012-06-23T13:43:46.983
> 
> 标签：ruby, animation, logic

我在 RPG Maker XP（用 ruby​​ 制作）中编写了一些动画脚本，允许您显示动态图像。我的问题不是严格意义上的 RPG Maker，而是笼统的。这是我到目前为止发现的代码，它可以工作，但是有问题：

```
class Poser
  attr_accessor :images

  def initialize 
    @images = Sprite.new
    @images.bitmap = RPG::Cache.picture('Character.png') #display picture 
    @images.x = 540 #place it on the bottom right corner of the screen
    @images.y = 180
  end

  def move(x,y)
    @images.x += x
    @images.y += y
  end

  def animate(x,y,step,delay) #Animate moving the picture up and down with delay
    forward = true
    2.times { #the first loop, do code 2 times of :
      step.times {
        wait(delay) #wait x frame
        if forward
          move(x/step,y/step) #move the picture down
        else
          move(-x/step,-y/step) #move the picture up
        end
      }
      wait(delay*3)
      forward = false
    }
  end

  def wait(time)
    while time > 0
      time -= 1
      Graphics.update
    end
  end
end 
```

然后我创建它的一个实例并调用该方法：

```
$test = Poser.new
$test.animate(0,10,10,10) 
```

上面的代码所做的就是上下移动图片（就像呼吸动画一样，你的头上下摆动）

如您所见，我使用**循环函数**延迟移动图片。我得到的是，在**动画完成****之前我****不能做**任何其他事情。我所说的“其他”是指与我的角色四处走动，与NPC交谈，我想在后台播放动画时做这些事情。最后，游戏在循环块中“暂停”了。

 ****是否有另一种方法可以在不循环的情况下制作动画，或者在动画完成之前不会“暂停”屏幕的任何方法？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:12:19.093

通常，游戏使用称为游戏循环的系统。游戏循环是程序主要功能中的一个循环，它尽可能快地执行。每次执行时，它都会执行两个函数（或者这些函数可以是循环体，这是您可以做出的设计选择）：`draw`和`update`( `update`, then `draw`)。

`update`的工作是改变角色的位置，通常通过`position=(x+pixelsPerSecond*secondsSinceLastTick,y+pixelsPerSecond*secondsSinceLastTick)`（在游戏术语中，滴答是游戏循环的迭代）的公式。游戏循环的系统针对游戏进行了优化，因为每个滴答声您都可以执行每个动画的一小部分，它们的速度足够快，以至于它们给人一种并发的错觉（游戏循环每秒运行多次）。

在`update`改变了整个对象的位置之后（例如，一个快速的 NPC 现在距离左侧 5 个像素），`draw`用于绘制场景。`draw`可以做几件事。它可以在 指示的位置绘制精灵，`update`也可以保持自己的动画（腿走路的动画之类的小东西--`update`不应该在走路的动画中设置腿的位置，只是角色的新位置对于这个勾号）。

我不确定我是否准确地回答了你的问题，因为我对 RPG Maker 一无所知（所以也许你必须完全做其他事情），但因为你说的一般来说，这就是它。****

# java - 在java中只运行线程一分钟

> ID：11169988
> 
> 赞同：0
> 
> 时间：2012-06-23T13:44:23.153
> 
> 标签：java, concurrency

仅在一段时间内运行线程的最佳做法是什么？我可以很容易地检查curentTime并在工作一段时间后关闭线程，但我认为这不是正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:17:21.323

这取决于您想要实现的目标，但一般来说，您提到的从一开始就测量时间的方法并没有那么错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T15:24:40.687

我会这样编码：

```
private static class MyTimerTask extends TimerTask {
    private final Thread target;
    public MyTimerTask(Thread target) { this.target = target; }
    public void run() {
        target.interrupt();
    }
}

public void run() {
    Thread final theThread = Thread.currentThread();
    Timer timer = new Timer();
    try {
         timer.schedule(new MyTimerTask(theThread), 60000});
         while(!theThread.interrupted()) {
             ....
         }
    } finally {
         timer.cancel();
    }
} 
```

...这是气垫船描述的，除了使用中断而不是临时标志。使用中断的好处是一些 I/O 调用不会被中断阻塞，一些库会尊重它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T16:10:31.663

我很惊讶（也很失望）没有人提到[Executors 框架](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)。它篡夺了 Timer 框架（或至少是`java.util.Timer`类）作为计划任务的“goto”。

例如，

```
// Start thread
final Thread t = new Thread(new Runnable(){
    @Override
    public void run(){
        while(!Thread.currentThread().isInterrupted()){
            try{
                // do stuff
            }
            catch(InterruptedException e){
                Thread.currentThread().interrupt();
            }
        }
    }
});
t.start();

// Schedule task to terminate thread in 1 minute
ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();
exec.schedule(new Runnable(){
    @Override
    public void run(){
        t.interrupt();
    }
}, 1, TimeUnit.MINUTES); 
```

# javascript - 添加文本区域中选定文本的标签

> ID：11169990
> 
> 赞同：4
> 
> 时间：2012-06-23T13:44:35.690
> 
> 标签：javascript, html

如何创建一些 javascript 来执行以下操作 - 当用户单击“BOLD”按钮时，选定的文本会得到一个“<b>”和一个“</b>”环绕它。

```
 <form name="my">
<textarea name="textarea"></textarea><br />
<input type="button" value="bold" onclick="formatText ('b');" />
<input type="button" value="italic" onclick="formatText ('i');" />
<input type="button" value="underline" onclick="formatText ('u');" />
</form> 
```

请帮我创建支持几乎网络浏览器的java脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:21:25.283

您应该使用现有的富文本编辑器，它们是可配置的，因此您可以只为用户提供您希望他们使用的功能。它们还具有跨多种不同浏览器工作的额外好处。

仅使用粗体、斜体和下划线设置[tinyMCE的示例。](http://www.tinymce.com/)

```
tinyMCE.init({
    // General options
    mode : "textareas",
    theme : "advanced",

    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:10:26.150

请尝试下面给出的脚本...

```
<script>
 function formatText (key){

    var elem = document.my.textarea; 
    /*start of selection area*/ 
    var start = elem.selectionStart;
    var end = elem.selectionEnd;
    var len = elem.value.length;
    var sel_txt = elem.value.substring(start,end);

    if (sel_txt != ""){
      var begin_tag = "<"+key+">"; 
      var close_tag =  "</"+key+">";
      var replace = begin_tag + sel_txt + close_tag;
      elem.value = elem.value.substring(0,start) + replace + elem.value.substring(end,len);
   }
</script> 
```

我在[http://jsfiddle.net/VRqU3/](http://jsfiddle.net/VRqU3/)上尝试过脚本。请检查一下。

希望对你有用，谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T14:11:49.467

如果不是 IE < 9，这将是相对简单的，它不支持textarea 元素的`selectionStart`和`selectionEnd`属性。这是我以前的答案，详细说明了如何执行此操作：

[https://stackoverflow.com/a/10739034/96100](https://stackoverflow.com/a/10739034/96100)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-23T14:01:20.737

试试这个功能：

```
function formatText(tag) {
   var Field = document.getElementById('text');
   var val = Field.value;
   var selected_txt = val.substring(Field.selectionStart, Field.selectionEnd);
   var before_txt = val.substring(0, Field.selectionStart);
   var after_txt = val.substring(Field.selectionEnd, val.length);
   Field.value = before_txt + '<' + tag + '>' + selected_txt + '</' + tag + '>' + after_txt;
} 
```

示例： http: [//jsbin.com/ilecug/](http://jsbin.com/ilecug/)
来源：http: [//jsbin.com/ilecug/edit](http://jsbin.com/ilecug/edit)

# java - 在 Spring MVC 应用程序中使用 facebook 登录？

> ID：11169992
> 
> 赞同：5
> 
> 时间：2012-06-23T13:44:39.327
> 
> 标签：java, facebook, spring

我想将 facebook 登录集成到我使用 Spring MVC 开发的 Web 应用程序中。有哪些方法可以做到？

*   我可以简单地在我的网站上添加登录按钮的 javascript 和 iframe 吗？
*   facebook 是否提供了用户的详细信息，例如用户名、家乡、大学等？请提供适当的链接或教程

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T13:48:56.733

如果您想获取这些信息，例如用户名......您将不得不在后端编写一些代码来处理 facebook 回调。

当您使用 Spring 时，您可以在 Spring Social 上尝试一下吗？[http://www.springsource.org/spring-social](http://www.springsource.org/spring-social)

看起来很容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-05T18:03:06.817

**1)**首先访问 [https://developers.facebook.com](https://developers.facebook.com)并创建您的帐户并获取您的 appId 和 appSecret；
**2）**转到自动配置并在您的`.net`MVC 应用程序中提供您的 appId 和 appSecret
**3）**在 Facebook 的开发人员中添加您的重定向 URI（产品 -> 添加产品），它将看起来像这样[http://localhost](http://localhost) .....
**4）**在您的产品在开发者控制台上，启用所需的功能，这将是：

*   客户端 OAuth 登录
*   网络 OAuth 登录

**（可选 - 如果你想发布应用程序）**
**5）**比在 facebook 的开发者中去应用程序审查
**6）**选择是让它活
**7）**享受.....希望它有效！如果你有什么问题可以问我...

# android - 如何在输入“收件人”字段时获得电子邮件地址的建议？

> ID：11169993
> 
> 赞同：2
> 
> 时间：2012-06-23T13:44:42.433
> 
> 标签：android, api, email, gmail, email-address

我正在编写一个应用程序，它将使用 Java Mail 外部库发送电子邮件。我搜索了一周关于如何向用户显示电子邮件地址建议的问题，例如在 Gmail 中显示的建议。

任何帮助都会得到帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:48:53.470

获取电子邮件列表并使用 autocompleteTextView 在您键入时显示它们。

为文本框设置一个适配器：

```
ArrayAdapter<String> namesAdapter = new ArrayAdapter<String>(getBaseContext(), android.R.layout.simple_dropdown_item_1line, names);
searchBox.setAdapter(namesAdapter);

searchBox.setOnItemClickListener(new OnItemClickListener() {

       public void onItemClick(AdapterView<?> arg0, View view, int position, long arg3) {
            String email = searchBox.getText().toString(); //or use the position to reference the email address you want.

        });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:49:15.780

据我所知，Gmail 使用 Gmail 地址簿来提供建议。对于您的建议，您可以使用手机的通讯录，如果您已将它们与您的 Gmail 地址簿同步，它们也可以在通讯录中找到。

希望这可以帮助！如果您需要更具体的内容，请随时询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:08:18.453

好的，经过一番挖掘，这就是我发现的。获取有关自动完成 TextView 的答案，添加以下内容，您就会得到我想要的东西。

```
Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null); 
    while (cursor.moveToNext()) { 
        String contactId = cursor.getString(cursor.getColumnIndex( 
                ContactsContract.Contacts._ID)); 
        String hasPhone = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)); 
        if (Boolean.parseBoolean(hasPhone)) { 
            // You know it has a number so now query it like this
            Cursor phones = getContentResolver().query( ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId, null, null); 
            while (phones.moveToNext()) { 
                String phoneNumber = phones.getString(phones.getColumnIndex( ContactsContract.CommonDataKinds.Phone.NUMBER));                 
            } 
            phones.close(); 
        }

        Cursor emails = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = " + contactId, null, null); 
        while (emails.moveToNext()) { 
            // This would allow you get several email addresses 
            String emailAddress = emails.getString( 
                    emails.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
        } 
        emails.close(); 
    }
    cursor.close(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T07:51:15.217

“Smartr Contacts” [http://smartrcontacts.com/](http://smartrcontacts.com)是一款适用于 Gmail 和 Android 和 iPhone 的优秀应用程序，它将同步您的所有联系人并合并他们的电子邮件、电话等，然后您也许可以从 dbase 调用您想要的电子邮件。

# java - Java docx4j 粗体文本

> ID：11169998
> 
> 赞同：0
> 
> 时间：2012-06-23T13:45:53.940
> 
> 标签：java, ms-word, openxml, wordprocessingml, docx4j

我使用 docx4j 和以下代码对 word 文档进行搜索和替换：

```
WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.load(new File(pathFinder.findUploadPath() + filename));

        //Get all text elements out of the doc
        List texts = wordMLPackage.getMainDocumentPart().getJAXBNodesViaXPath(XPATH_TO_SELECT_TEXT_NODES, true);

        // Loop through all "text" elements
        for (Object obj : texts) {
            Text text = (Text) ((JAXBElement) obj).getValue(); //get the value of the object

            // Get the string value
            String textValueBefore = text.getValue();

            text.setValue(string_afterwards);
        } 
```

“string_afterwards”是由其他一些代码行生成的字符串。

我的问题是，格式化这个字符串，使它以**粗体显示**。
有没有机会在不改变搜索和替换行的情况下做到这一点？
像在字符串中添加标签 < b > 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:25:42.800

您需要更改 XPATH_TO_SELECT_TEXT_NODES 以便它选择感兴趣的文本节点的父 w:r 元素。

然后确保 w:r 具有 aw:rPr（运行属性元素），并将其设置为粗体。

# c# - today() 函数返回项目转换为 .net 时的日期和时间

> ID：11169999
> 
> 赞同：1
> 
> 时间：2012-06-23T13:46:18.987
> 
> 标签：c#, datetime, powerbuilder, powerbuilder-conversion

当我在 Windows Server 2008 R2 上工作时，我的应用程序的行为有所不同。

当我将我的 PowerScript 转换为 .net 项目时， today() 的函数将值作为日期以及时间（日期+时间）返回，而不仅仅是日期。

```
ldt_date = today() 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:51:28.913

您可以添加 ToString 格式

```
yourdate.ToString("d"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:54:13.710

这是正常的 .NET 行为。

```
 DateTime dt = DateTime.Today;
        Console.WriteLine(dt.ToString);  //output 6/23/2012 12:00:00 AM 
```

如果您只想要日期（2012 年 6 月 23 日），请尝试：

```
 DateTime dt = DateTime.Today;
        Console.WriteLine(dt.ToShortDateString());  //output 6/23/2012 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T13:50:49.423

[**在 .NET 中，您可以使用DateTime.Date 属性**](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)获取 DateTime 变量的唯一日期部分[](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)

 **就像是

```
 yourdate.ToString("d") 
```

例子

```
DateTime date1 = new DateTime(2008, 6, 1, 7, 47, 0);
Console.WriteLine(date1.ToString());

// Get date-only portion of date, without its time.
DateTime dateOnly = date1.Date;
// Display date using short date string.
Console.WriteLine(dateOnly.ToString("d")); 
```**