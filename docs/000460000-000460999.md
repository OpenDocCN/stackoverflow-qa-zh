# StackOverflow 问答 000460000-000460999

# php - PHP5 的 PDO rowCount MySQL 问题的解决方法

> ID：460010
> 
> 赞同：15
> 
> 时间：2009-01-20T03:15:59.973
> 
> 标签：php, pdo

我最近开始使用 PHP5 开发一个新项目，并希望使用他们的 PDO 类。问题是 MySQL PDO 驱动程序不支持 rowCount() 因此无法运行查询然后获取受影响的行数或返回的行数，就我而言，这是一个相当大的问题。我想知道是否有其他人以前处理过这个问题，以及你为解决这个问题做了什么。必须执行 fetch() 或 fetchAll() 来检查是否有任何行受到影响或返回对我来说似乎是一种黑客行为，我宁愿只做 $stmt->numRows() 或类似的事情。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-03-18T20:47:30.130

`SELECT FOUND_ROWS()`您可以在原始查询之后立即发出`SELECT`查询以获取行数。

```
$pdo->query("SELECT * FROM users");
$foundRows = $pdo->query("SELECT FOUND_ROWS()")->fetchColumn(); 
```

另请参阅：[FOUND_ROWS() 上的 MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-27T00:36:34.133

对于那些使用 MySQL 存储过程的人来说，这个解决方案并不可行。我建议您做的是让您的存储过程创建两个行集。第一个将包含一行和一列，包含记录数。第二个将是您将用于获取该行数的记录集。

无限行数可以是与没有/子句的第二行集`SELECT COUNT(*)`完全相同的子句。 `WHERE``LIMIT``OFFSET`

另一个想法可能是创建一个临时表。使用您的`SELECT`语句填充临时表。然后你可以使用`SELECT COUNT(*) FROM tmpTable`你的第一个行集和`SELECT * FROM tmpTable`你的第二个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-15T17:10:54.670

这个问题是基于几个错误的假设和一个过时的陈述。

首先，不要混淆*受影响*的行数和*选定*的行数。PDO 甚至早在 09 年就支持前者。

说到 SELECT 语句返回的行数 - 你只是不需要那个数字。你拥有的数据就足够了。

是的，现在也 `rowCount()`支持从 mysql 中选择的行数。但同样 - 无论如何，您在普通的 Web 应用程序中都不需要这个数字。

# c# - 在文件系统或程序集中嵌入资源中的文件的多态搜索

> ID：460011
> 
> 赞同：0
> 
> 时间：2009-01-20T03:16:42.343
> 
> 标签：c#, polymorphism, embedded-resource

我正在学习在 C# 中使用多态性，但无法弄清楚这一点。我正在尝试编写一个类，该类允许我从存储库中获取过滤后的文件列表。

存储库可以是文件系统文件夹或任意已加载程序集中的嵌入式资源（但它不是当前正在执行的程序集）。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T03:45:04.687

您可以像这样定义一对接口：

```
public interface IReadableFile
{
    Stream OpenRead();
}

public interface IRepository
{
    IEnumerable<IReadableFile> Search(string pattern);
} 
```

并有两种不同的实现：

```
public class FolderFile : IReadableFile
{
    readonly private string _name;

    public FolderFile(string name)
    {
        _name = name;
    }

    #region IFile Members

    public Stream OpenRead()
    {
        return File.OpenRead(_name);
    }

    #endregion
}

public class FolderRepository : IRepository
{
    readonly private string _directory;

    public FolderRepository(string directory)
    {
        _directory = directory;
    }

    #region IRepository Members

    public IEnumerable<IReadableFile> Search(string pattern)
    {
        return Array.ConvertAll(Directory.GetFiles(_directory, pattern), name => new FolderFile(name));
    }

    #endregion
}

public class AssemblyFile : IReadableFile
{
    readonly private Assembly _assembly;
    readonly private string _name;

    public AssemblyFile(Assembly assembly, string name)
    {
        _assembly = assembly;
        _name = name;
    }

    #region IReadableFile Members

    public Stream OpenRead()
    {
        return _assembly.GetManifestResourceStream(_name);
    }

    #endregion
}

public class AssemblyRepository : IRepository
{
    readonly private Assembly _assembly;

    public AssemblyRepository(Assembly assembly)
    {
        _assembly = assembly;
    }

    #region IRepository Members

    public IEnumerable<IReadableFile> Search(string pattern)
    {
        return _assembly.GetManifestResourceNames().Where(name => name.Contains(pattern)).Select(name => new AssemblyFile(_assembly, name)).ToArray();
    }

    #endregion
} 
```

然后您可以编写仅依赖于这些接口而不是它们的实现的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T03:30:34.887

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.IO;

namespace Reposes
{
    class ReposeFile
    {
        string m_name;

        public string Name
        {
            get { return m_name; }
        }

        public ReposeFile(string name)
        {
            m_name = name;
        }
    }

    interface IRepose
    {
        void RetriveFiles();
        ReposeFile[] Files { get; }
    }

    class FileSystemRepose : IRepose
    {
        string m_path = null;
        List<ReposeFile> m_files = new List<ReposeFile>();

        public FileSystemRepose(string path)
        {
            m_path = path;
        }

        #region IRepose Members

        public void RetriveFiles()
        {
            string[] files = Directory.GetFiles(m_path);
            foreach (string file in files)
            {
                m_files.Add(new ReposeFile(file));
            }
        }

        public ReposeFile[] Files
        {
            get { return m_files.ToArray(); }
        }

        #endregion
    }

    class AssemblyRepose : IRepose
    {
        string m_assembly = null;
        List<ReposeFile> m_files = new List<ReposeFile>();

        public AssemblyRepose(string assembly)
        {
            m_assembly = assembly;
        }

        #region IRepose Members

        public void RetriveFiles()
        {
            m_files.Add(new ReposeFile("Stuff"));
        }

        public ReposeFile[] Files
        {
            get { return m_files.ToArray(); }
        }

        #endregion
    }

    class Consumer
    {
        static void Main()
        {
            List<IRepose> reps = new List<IRepose>();
            reps.Add(new FileSystemRepose("c:\\")); // would normally be @"c:\" but stackoverflow's syntax highlighter barfed :)
            reps.Add(new AssemblyRepose("rep.dll"));

            foreach (IRepose rep in reps)
            {
                rep.RetriveFiles();

                foreach (ReposeFile file in rep.Files)
                {
                    Console.WriteLine(file.Name);
                }
            }

            Console.ReadKey();
        }
    }
} 
```

这是一个粗略的例子，但应该指出你正确的方向:)

# ios - 选中后，您可以为 UITableViewCell 上的高度变化设置动画吗？

> ID：460014
> 
> 赞同：402
> 
> 时间：2009-01-20T03:17:52.450
> 
> 标签：ios, cocoa-touch, uitableview

我`UITableView`在我的 iPhone 应用程序中使用 a，并且我有一个属于某个组的人员列表。我希望这样当用户单击特定的人（从而选择单元格）时，单元格的高度会增加以显示几个 UI 控件来编辑该人的属性。

这可能吗？

* * *

## 回答 #1

> 赞同：887
> 
> 时间：2010-01-14T11:42:26.963

`UITableView`我找到了一个非常简单的解决方案，作为我正在研究的副作用......

将单元格高度存储在通常通过 报告原始高度的变量中`tableView: heightForRowAtIndexPath:`，然后当您想要动画高度变化时，只需更改变量的值并调用它...

```
[tableView beginUpdates];
[tableView endUpdates]; 
```

您会发现它不会完全重新加载，但足以让`UITableView`用户知道它必须重绘单元格，获取单元格的新高度值......猜猜怎么着？它为您带来变化。甜的。

我的博客上有更详细的解释和完整的代码示例... [Animate UITableView Cell Height Change](http://locassa.com/index.php/animate-uitableview-cell-height-change/)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2011-04-25T23:25:51.510

我喜欢西蒙·李的回答。我实际上并没有尝试这种方法，但它看起来会改变列表中所有单元格的大小。我希望只改变被窃听的单元格。我有点像西蒙那样做，但只有一点点不同。这将在选中单元格时更改其外观。它确实有动画效果。只是另一种方法。

创建一个 int 来保存当前选定单元格索引的值：

```
int currentSelection; 
```

然后：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    int row = [indexPath row];
    selectedNumber = row;
    [tableView beginUpdates];
    [tableView endUpdates];
} 
```

然后：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    if ([indexPath row] == currentSelection) {
        return  80;
    }
    else return 40;

} 
```

我相信您可以在 tableView:cellForRowAtIndexPath: 中进行类似的更改，以更改单元格的类型，甚至为单元格加载 xib 文件。

像这样，currentSelection 将从 0 开始。如果您不希望列表的第一个单元格（在索引 0 处）默认被选中，则需要进行调整。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-08-05T16:02:31.380

添加属性以跟踪所选单元格

```
@property (nonatomic) int currentSelection; 
```

将其设置为 (例如) 中的哨兵值`viewDidLoad`，以确保`UITableView`从“正常”位置开始

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    //sentinel
    self.currentSelection = -1;
} 
```

在`heightForRowAtIndexPath`您可以为所选单元格设置所需的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    int rowHeight;
    if ([indexPath row] == self.currentSelection) {
        rowHeight = self.newCellHeight;
    } else rowHeight = 57.0f;
    return rowHeight;
} 
```

如果`didSelectRowAtIndexPath`需要，保存当前选择并保存动态高度

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
        // do things with your cell here

        // set selection
        self.currentSelection = indexPath.row;
        // save height for full text label
        self.newCellHeight = cell.titleLbl.frame.size.height + cell.descriptionLbl.frame.size.height + 10;

        // animate
        [tableView beginUpdates];
        [tableView endUpdates];
    }
} 
```

在`didDeselectRowAtIndexPath`将选择索引设置回标记值并将单元格设置为正常形式

```
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {       
        // do things with your cell here

        // sentinel
        self.currentSelection = -1;

        // animate
        [tableView beginUpdates];
        [tableView endUpdates];
    }
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-11-19T16:47:52.377

而不是`beginUpdates()`/ `endUpdates()`，现在推荐的调用是：

```
tableView.performBatchUpdates(nil, completion: nil) 
```

Apple 说，关于 beginUpdates/endUpdates：“尽可能使用 performBatchUpdates(_:completion:) 方法而不是这个方法。”

请参阅：[https ://developer.apple.com/documentation/uikit/uitableview/1614908-beginupdates](https://developer.apple.com/documentation/uikit/uitableview/1614908-beginupdates)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2009-05-06T23:24:36.700

reloadData 不好，因为没有动画......

这是我目前正在尝试的：

```
NSArray* paths = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]];
[self.tableView beginUpdates];
[self.tableView insertRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationFade];
[self.tableView deleteRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationFade];
[self.tableView endUpdates]; 
```

它几乎可以正常工作。几乎。我正在增加单元格的高度，有时在替换单元格时表格视图中会出现一些“打嗝”，好像表格视图中的某些滚动位置正在被保留，新单元格（这是第一个单元格在表中）以它的偏移量太高结束，并且滚动视图反弹以重新定位它。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-08-02T22:52:00.997

我不知道关于连续调用 beginUpdates/endUpdates 的所有这些东西是什么，你可以使用`-[UITableView reloadRowsAtIndexPaths:withAnimation:]`. [这是一个示例项目](http://cl.ly/063e0W2s1r00)。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2014-11-14T13:20:05.123

我解决了`reloadRowsAtIndexPaths`。

我保存在`didSelectRowAtIndexPath`所选单元格的 indexPath 中并`reloadRowsAtIndexPaths`在最后调用（您可以发送 NSMutableArray 以获取要重新加载的元素列表）。

在`heightForRowAtIndexPath`您可以检查 indexPath 是否在 expandIndexPath 单元格的列表中并发送高度。

您可以查看这个基本示例： [https](https://github.com/ferminhg/iOS-Examples/tree/master/iOS-UITableView-Cell-Height-Change/celdascambiadetam) ://github.com/ferminhg/iOS-Examples/tree/master/iOS-UITableView-Cell-Height-Change/celdascambiadetam 这是一个简单的解决方案。

如果对您有帮助，我会添加一种代码

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 20;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath: (NSIndexPath*)indexPath
{
    if ([indexPath isEqual:_expandIndexPath])
        return 80;

    return 40;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Celda";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    [cell.textLabel setText:@"wopwop"];

    return cell;
}

#pragma mark -
#pragma mark Tableview Delegate Methods

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSMutableArray *modifiedRows = [NSMutableArray array];
    // Deselect cell
    [tableView deselectRowAtIndexPath:indexPath animated:TRUE];
    _expandIndexPath = indexPath;
    [modifiedRows addObject:indexPath];

    // This will animate updating the row sizes
    [tableView reloadRowsAtIndexPaths:modifiedRows withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-11-23T11:53:03.153

**Swift 4 及更高版本**

将以下代码添加到您的 tableview 的 didselect 行委托方法中

```
tableView.beginUpdates()
tableView.setNeedsLayout()
tableView.endUpdates() 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-09-24T05:41:11.287

试试这是为了扩展索引行：

```
@property (nonatomic) NSIndexPath *expandIndexPath;
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath*)indexPath
{
if ([indexPath isEqual:self.expandedIndexPath])
    return 100;

return 44;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
NSMutableArray *modifiedRows = [NSMutableArray array];
if ([indexPath isEqual:self.expandIndexPath]) {
    [modifiedRows addObject:self.expandIndexPath];
    self.expandIndexPath = nil;
} else {
    if (self.expandedIndexPath)
        [modifiedRows addObject:self.expandIndexPath];

    self.expandIndexPath = indexPath;
    [modifiedRows addObject:indexPath];
}

// This will animate updating the row sizes
[tableView reloadRowsAtIndexPaths:modifiedRows withRowAnimation:UITableViewRowAnimationAutomatic];

// Preserve the deselection animation (if desired)
[tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
[tableView deselectRowAtIndexPath:indexPath animated:YES];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:ViewControllerCellReuseIdentifier];
    cell.textLabel.text = [NSString stringWithFormat:@"I'm cell %ld:%ld", (long)indexPath.section, (long)indexPath.row];

return cell;
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-08-15T16:32:22.750

```
BOOL flag;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    flag = !flag;
    [tableView beginUpdates];
    [tableView reloadRowsAtIndexPaths:@[indexPath] 
                     withRowAnimation:UITableViewRowAnimationAutomatic];
    [tableView endUpdates];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES == flag ? 20 : 40;
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-03-25T20:08:15.120

只是给像我这样的人在自定义单元格上搜索添加“更多详细信息”的注释。

```
[tableView beginUpdates];
[tableView endUpdates]; 
```

做得很好，但不要忘记“裁剪”单元格视图。从界面生成器中选择您的单元格 -> 内容视图 -> 从属性检查器中选择“**剪辑子视图**”

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-05-30T23:36:56.357

这是 Swift 3 的 Simons 答案的较短版本。还允许切换单元格的选择

```
var cellIsSelected: IndexPath?

  func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
    cellIsSelected = cellIsSelected == indexPath ? nil : indexPath
    tableView.beginUpdates()
    tableView.endUpdates()
  }

  func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
    if cellIsSelected == indexPath {
      return 250
    }
    return 65
  } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-08-01T11:29:15.773

是的，这是可能的。

`UITableView`有一个委托方法`didSelectRowAtIndexPath`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [UIView animateWithDuration:.6
                          delay:0
         usingSpringWithDamping:UIViewAnimationOptionBeginFromCurrentState
          initialSpringVelocity:0
                        options:UIViewAnimationOptionBeginFromCurrentState animations:^{

                            cellindex = [NSIndexPath indexPathForRow:indexPath.row inSection:indexPath.section];
                            NSArray* indexArray = [NSArray arrayWithObjects:indexPath, nil];
                            [violatedTableView beginUpdates];
                            [violatedTableView reloadRowsAtIndexPaths:indexArray withRowAnimation:UITableViewRowAnimationAutomatic];
                            [violatedTableView endUpdates];
                        }
                     completion:^(BOOL finished) {
    }];
} 
```

但是在您的情况下，如果用户滚动并选择不同的单元格，那么您需要让最后一个选定的单元格缩小和展开当前选定的单元`reloadRowsAtIndexPaths:`格调`heightForRowAtIndexPath:`用，以便相应地处理。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-06-07T15:30:24.187

Simon Lee 的答案的 Swift 版本。

```
// MARK: - Variables 
  var isCcBccSelected = false // To toggle Bcc.

    // MARK: UITableViewDelegate
func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -> CGFloat {

    // Hide the Bcc Text Field , until CC gets focused in didSelectRowAtIndexPath()
    if self.cellTypes[indexPath.row] == CellType.Bcc {
        if (isCcBccSelected) {
            return 44
        } else {
            return 0
        }
    }

    return 44.0
} 
```

然后在 didSelectRowAtIndexPath()

```
 func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {
    self.tableView.deselectRowAtIndexPath(indexPath, animated: true)

    // To Get the Focus of CC, so that we can expand Bcc
    if self.cellTypes[indexPath.row] == CellType.Cc {

        if let cell = tableView.cellForRowAtIndexPath(indexPath) as? RecipientTableViewCell {

            if cell.tag == 1 {
                cell.recipientTypeLabel.text = "Cc:"
                cell.recipientTextField.userInteractionEnabled = true
                cell.recipientTextField.becomeFirstResponder()

                isCcBccSelected = true

                tableView.beginUpdates()
                tableView.endUpdates()
            }
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-03-04T12:10:04.983

在 iOS 7 及更高版本之后检查此方法。

```
- (CGFloat)tableView:(UITableView *)tableView estimatedHeightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return UITableViewAutomaticDimension;
} 
```

iOS 8 对此进行了改进。我们可以将其设置为表格视图本身的属性。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-02-08T14:11:55.483

[Simon Lee 的](https://stackoverflow.com/a/2063776/3151675)Swift 版本的回答：

```
tableView.beginUpdates()
tableView.endUpdates() 
```

请记住，您应该在**BEFORE 之前** `endUpdates()`修改高度属性。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-11-10T02:14:40.437

这是我的自定义`UITableView`子类代码，它`UITextView`在表格单元格处展开，无需重新加载（并且丢失键盘焦点）：

```
- (void)textViewDidChange:(UITextView *)textView {
    CGFloat textHeight = [textView sizeThatFits:CGSizeMake(self.width, MAXFLOAT)].height;
    // Check, if text height changed
    if (self.previousTextHeight != textHeight && self.previousTextHeight > 0) {
        [self beginUpdates];

        // Calculate difference in height
        CGFloat difference = textHeight - self.previousTextHeight;

        // Update currently editing cell's height
        CGRect editingCellFrame = self.editingCell.frame;
        editingCellFrame.size.height += difference;
        self.editingCell.frame = editingCellFrame;

        // Update UITableView contentSize
        self.contentSize = CGSizeMake(self.contentSize.width, self.contentSize.height + difference);

        // Scroll to bottom if cell is at the end of the table
        if (self.editingNoteInEndOfTable) {
            self.contentOffset = CGPointMake(self.contentOffset.x, self.contentOffset.y + difference);
        } else {
            // Update all next to editing cells
            NSInteger editingCellIndex = [self.visibleCells indexOfObject:self.editingCell];
            for (NSInteger i = editingCellIndex; i < self.visibleCells.count; i++) {
                UITableViewCell *cell = self.visibleCells[i];
                CGRect cellFrame = cell.frame;
                cellFrame.origin.y += difference;
                cell.frame = cellFrame;
            }
        }
        [self endUpdates];
    }
    self.previousTextHeight = textHeight;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-03-28T11:08:58.123

输入 -

**tableView.beginUpdates() tableView.endUpdates()** 这些函数不会调用

**func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {}**

但是，如果你这样做， **tableView.reloadRows(at: [selectedIndexPath! as IndexPath], with: .none)**

它将调用 **func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {}** 这个函数。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-11-19T21:00:56.900

我使用了@Joy 的出色答案，它与 ios 8.4 和 XCode 7.1.1 完美配合。

如果您希望使您的单元格可切换，我将 -tableViewDidSelect 更改为以下内容：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
//This is the bit I changed, so that if tapped once on the cell, 
//cell is expanded. If tapped again on the same cell, 
//cell is collapsed. 
    if (self.currentSelection==indexPath.row) {
        self.currentSelection = -1;
    }else{
        self.currentSelection = indexPath.row;
    }
        // animate
        [tableView beginUpdates];
        [tableView endUpdates];

} 
```

我希望这对你有所帮助。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2009-08-20T20:18:59.380

I just resolved this problem with a little hack:

```
static int s_CellHeight = 30;
static int s_CellHeightEditing = 60;

- (void)onTimer {
    cellHeight++;
    [tableView reloadData];
    if (cellHeight < s_CellHeightEditing)
        heightAnimationTimer = [[NSTimer scheduledTimerWithTimeInterval:0.001 target:self selector:@selector(onTimer) userInfo:nil repeats:NO] retain];
}

- (CGFloat)tableView:(UITableView *)_tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
        if (isInEdit) {
            return cellHeight;
        }
        cellHeight = s_CellHeight;
        return s_CellHeight;
} 
```

When I need to expand the cell height I set `isInEdit = YES` and call the method `[self onTimer]` and it animates the cell growth until it reach the s_CellHeightEditing value :-)

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2009-01-21T15:13:54.297

获取所选行的索引路径。重新加载表。在 UITableViewDelegate 的 heightForRowAtIndexPath 方法中，将所选行的高度设置为不同的高度，其他的返回正常的行高

# version-control - 首选版本控制方法

> ID：460022
> 
> 赞同：16
> 
> 时间：2009-01-20T03:22:57.913
> 
> 标签：version-control

我是源代码/版本控制领域的新手，我一直在尽可能多地阅读，以了解人们用于他们自己的源代码/版本控制的不同技术。

我注意到的一件事是开发人员的方法非常明显地分为两组（可能更多？）：一组更喜欢将他们的主干保持在始终稳定的状态并在分支中执行所有维护和未来开发，而其他人更喜欢在主干中完成所有开发并使其处于不太稳定的状态。

我很好奇 StackOverflow 的社区更喜欢什么，或者您是否有自己的方法。

注意：如果它有助于调整答案，我应该注意我是一个主要在 ASP.NET 和 SQL Server 2005 中工作的开发人员（同一个项目中最多会有两三个人）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-20T05:27:58.753

正如我确定您在网上搜索有关该主题的答案时已经注意到的那样，这是其中最佳答案是“视情况而定”的事情之一，并且正如大多数回复所表明的那样，这是一种权衡在您希望能够轻松提交/合并新代码与管理广泛的版本历史记录之间，您可以轻松地回滚以进行支持或调试。

我在一家小公司工作，这意味着在任何给定时间，我们可能在尚未提交到存储库的开发人员机器上拥有 3 或 4 个不同版本的代码。我们将 TortoiseSVN 用于我们的版本控制系统，这使我们能够轻松地进行分支/合并，并且能够非常轻松地查看更新日志或将我们的本地副本恢复到早期版本。

根据您的问题，我想我们属于那些试图始终保持稳定主干的开发人员，我们会分支新代码并对其进行测试，然后再将其合并回主干。我们还努力保留每个版本的“快照”，以便在必要时，我们可以轻松检查早期版本并重新构建它，而无需为未来版本添加任何新功能（这也是一个很棒的跟踪错误的机制，因为您可以使用早期版本的代码来帮助确定特定错误何时首次引入您的代码中。但是，要注意的一件事是，如果您的应用程序引用了与您的版本分开维护的公共代码-ed 代码，您也需要跟踪它！）。

在存储库上，它最终看起来像这样：

*   树干

    *   v1.0.1.x 发布
    *   v1.0.2.x 发布

        *   v1.0.2.x Bug-Fix A *<--（这些被合并回主干，但保留在仓库中）*
        *   v1.0.2.x 错误修复 B
    *   v1.1.1.x 发布

    *   v1.2.1.x Development *<--（这将被合并回 Trunk，并被 Release 文件夹替换）*

        *   v1.2.1.x 新特性 A *<--（这些被合并回开发分支）*
        *   v1.2.1.x 新功能 B

当我刚开始在公司时，我们的版本结构并不那么复杂，根据我的经验，我会说，如果你有任何需要跟踪早期版本，那么付出这样的努力是值得的一起（就像我之前说的，它不必看起来完全像这样，只要它符合您的个人需求），保持它有据可查，以便所有贡献者都可以维护它（另一种选择是创建者最终“保姆” ” repo，这很快就变成了令人难以置信的时间浪费），并鼓励您的所有开发人员遵循它。一开始可能感觉需要付出很多努力，但是当您第一次需要利用它时，您会很感激。

祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-20T03:30:13.627

我在后备箱中进行所有开发。我是一个单一的开发人员，不想处理分支的麻烦。当我的代码稳定时，我只需标记当前版本。例如，我会标记版本 1.0、2.0 beta、2.0 候选版本 1、版本 2.0 等。如果您要维护旧版本以进行错误修复和支持，分支可能是更好的选择，但由于我不这样做，我不这样做别担心。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-20T03:30:15.513

这些差异可能与给定版本控制系统中合并的痛苦程度有关。

使用 git，分支和合并实际上是毫不费力的，因此保持我的主人干净并在分支中完成所有工作对我来说是一个常见的工作流程。在 svn 中分支和合并，特别是在以前的版本中，并不是那么便宜和容易，所以当我使用 svn 时，我倾向于直接在主干上工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-20T03:29:18.540

始终稳定。即使我是一个单独的开发人员——尤其是当我是一个单独的开发人员时。

对我来说，拥有一棵折断的树意味着少了一种知道我*应*该做什么的方式。

大的变化出现在分支中，以及稳定的版本中，并在任何给定的时间点做最小的变化单元，以便继续以良好的速度前进。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-20T03:34:47.360

我一直使用主干作为代码头。通常新的开发代码会在那里。

我们为发布分支，我们可能为一个“大”的不稳定实验分支。

当我们进行错误修复时，它们首先进入 main，然后如果需要，它们会合并（向后移植）到适当的版本分支中。

如果大实验成功了，它就会被合并回 main 中。

我们在版本分支和主版本中使用内部版本号的标签。这样我们就可以回到特定版本并在必要时进行构建。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-20T03:39:55.307

这是我们遵循的方法：任何稳定版本都应该从主干中获取。任何进一步的工作或修改都应该进入工作分支，并在准备发布时与主干合并。

如果有多个独立开发，每个组都应该有分支，他们应该定期与 trunc 同步，并在准备好时将其合并回主干。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-20T03:25:18.470

我喜欢永远稳定的后备箱。您需要能够随时重建最新的稳定版本...

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-20T03:28:00.527

在您的情况下，我强烈建议避免大量分支。这确实是一个相当先进的过程，对于小型项目和小型团队来说不是必需的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-20T03:38:06.870

尽量保持简单，我总是尝试有一个已知的工作版本，可以复制用于测试和部署等。根据你的存储库，你可以使用修订号（SVN），或者只是标记已知的工作版本，因为它们是必需的。

如果您发现有多个人接触相同的文件，那么您将需要考虑分支策略，而不是对于这么小的开发团队来说，这只是不必要的开销......（IMO）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-20T06:07:08.817

一方面是变化将处于不稳定状态多长时间。

当我所做的更改可能会影响其他人或夜间构建时，我会在分支上工作，并在稳定时合并。

当我所做的更改不会影响其他人时（因为这是我在家的私人代码，而不是工作中的代码），那么如果我想要的话，我可以检查非工作中间状态。有时，我会连续做几个不稳定的签到；当只有我受到影响并且工作流程将是连续的时，这对我来说没问题。如果我在几年后回来（而不是仅仅几天）并且事情不起作用，那么它就会出现问题（我一直存在的一个缺点 - 我确实有一些项目仍在在开发和维护中足够老可以投票）。

我使用标记的变体来实现可重复的构建——所以如果我需要回到稳定版本来修复错误，我可以使用标记信息来做到这一点。能够按需获得稳定版本至关重要。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-07-14T11:14:33.240

一个关键区别是文件的平均大小。大文件（1000 行以上）往往有许多可以自动合并的独立更改。因此，其他人正在积极更改您将要开始工作的文件这一事实可能是无趣的，因此如果系统很难发现它是可以的。

因此，您倾向于最终采用具有大量分支且易于合并的 VC 策略。新功能是在新分支中编写的。

如果您使用像 Java 这样的语言来处理典型的 OO 设计中较小的、高度内聚的文件，那么这种意外冲突就很少见了。即使作为一个人为的例子，也很难想出可以对一个类（和相应的 JUnit 测试用例）进行的两组更改，这些更改可以明智地单独进行，然后通过文本合并工具自动重新组合在一起.

如果您进行大量重构（重命名和拆分文件），那么合并工具的压力会更大。

因此，最好采用具有可识别且可用的稳定主干和最少分支的 VC 策略。

在第一种方法中，新功能编写在新分支中，并在完成时合并。第二，它被写入新文件，并在完成时启用。

当然，如果你做第二个，你肯定需要强大的保护，以防止基线在任何时间长度内都无法使用（即持续集成和强大的自动运行测试套件）。

# c# - VB.NET 相当于 C# 属性的简写？

> ID：460027
> 
> 赞同：136
> 
> 时间：2009-01-20T03:25:07.800
> 
> 标签：c#, vb.net, language-features

是否有与 C# 等效的 VB.NET：

```
public string FirstName { get; set; } 
```

我知道你能做到

```
Public Property name() As String
   Get
      Return _name.ToString
   End Get
   Set(ByVal value As String)
       _name = value
   End Set
End Property 
```

但我似乎无法在 Visual Basic 速记上搜索答案。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2009-01-20T03:27:53.507

VB.NET 没有 Visual Studio 2008 或更早版本的简写。

在 Visual Studio 2010 及更高版本中，您可以使用以下速记：

```
Public Property FirstName as String 
```

这将被处理为您在 C# 中的简短版本 - 我认为他们称之为“自动属性”

另请参阅：[自动实现的属性 (Visual Basic)](http://msdn.microsoft.com/en-us/library/dd293589.aspx)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-08-01T12:25:46.777

在 Visual Studio 2008 中，仅键入关键字 后`Property`，按`Tab`键。它会为您粘贴一个模板片段，您可以非常快速地填写它。

But yeah, there is not a replacement of a Visual Basic 10-type shortcut in Visual Basic 9.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-20T03:28:35.610

不幸的是，Visual Basic 9（.NET 3.5/Visual Studio 2008 附带）没有自动属性。

# csv - 有没有 TapeMACS 数据文件格式化之类的东西？

> ID：460046
> 
> 赞同：0
> 
> 时间：2009-01-20T03:34:19.373
> 
> 标签：csv

我正在尝试对数据集成进行估计，并且客户端为他们当前的系统发送了一些似乎是 TapeMACS 格式的文件？它不是逗号分隔或制表符分隔的格式，并且似乎有一个布局映射到指定了“字段名称”、“描述”、“格式”和“位置”的文件。这是一个过时的系统，您能否提供更多信息？我需要编写自定义解析器吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-25T22:01:39.890

原来这是一种与电子商务软件 Ecometry 相关的 ASCII 文件格式。

# bash - 如何确定目录是否是 shellscript 中已挂载的 NFS 挂载点

> ID：460047
> 
> 赞同：22
> 
> 时间：2009-01-20T03:34:21.167
> 
> 标签：bash, unix, shell, nfs

我想编写一个 sh/bash 脚本，它可以确定特定目录是否是 NFS 文件系统的挂载点。

例如类似的东西

```
$ mkdir localdir
$ mkdir remotedir
$ mount host:/share ./remotedir
$ classify_dirs.sh
 -->  localdir is local
 -->  remotedir is an NFS mount point 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-01-20T03:39:52.983

这个问题实际上是 [how-can-i-tell-if-a-file-is-on-a-remote-filesystem-with-perl](https://stackoverflow.com/questions/296455/how-can-i-tell-if-a-file-is-on-a-remote-filesystem-with-perl)

简短的回答是使用`stat`命令

例如

```
$ stat -f -L -c %T localdir
ext2/ext3
$ stat -f -L -c %T remotedir
nfs 
```

如果一个目录的类型是“nfs”而它的父目录不是，那么它就是一个 NFS 挂载点。

# asp-classic - ASP 使用 Null 执行存储过程

> ID：460050
> 
> 赞同：0
> 
> 时间：2009-01-20T03:35:15.643
> 
> 标签：asp-classic, ado

在 asp.net 中可以使用 dbnull.value 将 Null 值发送到 db。在 ASP 中如何使用？

非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-28T12:32:07.637

在 ASP 中，您需要使用关键字**NULL**作为存储过程的空值。

注意：不要使用 vbNull，因为它的计算结果为 1 而不是 null。

# c++ - 一种确保删除系统托盘图标的方法......保证

> ID：460059
> 
> 赞同：10
> 
> 时间：2009-01-20T03:38:50.003
> 
> 标签：c++, windows, winapi, system-tray

有没有办法保证您的系统托盘图标被删除？

要添加系统托盘图标，请执行以下操作：

```
Shell_NotifyIcon(NIM_ADD, &m_tnd); 
```

要删除系统托盘图标，请执行以下操作：

```
Shell_NotifyIcon(NIM_DELETE, &m_tnd); 
```

我想知道：如果您的应用程序崩溃了怎么办？该图标会一直保留在系统托盘中，直到您将鼠标悬停。有没有办法保证图标会被删除，即使应用程序崩溃？由于各种原因，我宁愿不使用结构化异常处理。

我要处理的另一种情况是进程被终止但不一定崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T23:58:48.013

大多数程序员忘记检查的另一件事是资源管理器是否重新启动/崩溃。如果应用程序处理这个并重新创建自己的图标，那就太好了。

只需检查消息 WM_TASKBARCREATED 并重新创建图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T03:45:50.007

您可以有一个单独的、更简单（因此可能更健壮）的程序来监控您的应用程序。该程序实际上可以启动您的程序，然后监视该过程。是的，这是一个非常丑陋的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T09:29:46.207

我个人会使用向量异常处理程序。是的，它基于 SEH，但您不必处理可能需要展开的所有不同堆栈。

TerminateProcess() 必须更具破坏性。你真的无法避免这种情况；当它发生时，你的进程已经死了。没有矿石指令被处理，所以你的应用程序中有什么代码并不重要。

外部应用程序不会真正有帮助，不是吗？它也可能崩溃，或被杀死。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-27T14:06:12.817

在应用程序崩溃的情况下，有很多方法可以确保`Shell_NotifyIcon(NIM_DELETE, &m_tnd);`在 C++ 中调用；在您使用的[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)包装器上`NOTIFYICONDATA`使用将完成工作，例如：

```
struct NID
{
    NID() : icon_data() { icon_data.cbSize = sizeof(icon_data); }
    ~NID() { Shell_NotifyIcon(NIM_DELETE, &icon_data); }
    void Show(HWND w) { icon_data.hWnd = w; Shell_NotifyIcon(NIM_ADD, &icon_data); }
    NOTIFYICONDATA icon_data;
}; 
```

这是包装器的简化版本，但它将说明主要思想：如果您`NID`在静态存储中创建一个实例，它将在`WinMain`or`main`调用之前初始化，并且在程序清理时将调用其析构函数，即使此清理到期异常终止。

所以，我们可以用这种方式`NOTIFYICONDATA`包装这个资源`struct NID`：

```
NID nid; // <--- automatic storage duration, cleared after WinMain return
         // even if it returns normal or abnormally

int CALLBACK WinMain(HINSTANCE, HINSTANCE, LPSTR, int)
{
    try
    {
        // GetMessage(&message, NULL, 0, 0) loop ...
        // ...
        // use nid.icon_data as you please
    }
    catch (...)
    {
        // something bad happened...
    }

    return 0;
} 
```

上例调用`~NID()`当程序终止时（异常后或关闭程序后），析构函数会调用`Shell_NotifyIcon(NIM_DELETE, &icon_data);`，图标从通知区删除；此代码涵盖了正常终止和异常终止，您可以在[NPE的](https://stackoverflow.com/users/367273/npe)[这个好答案](https://stackoverflow.com/a/8311472/499359)中阅读有关此主题的更多信息：

至于*杀死进程*的情况，没有简单的方法可以做到这一点。

我已经测试过了，[`std::atexit`](http://en.cppreference.com/w/cpp/utility/program/atexit)并且[`std::at_quick_exit`](http://en.cppreference.com/w/cpp/utility/program/at_quick_exit)在通过任务管理器杀死程序后不会调用函数，所以我想你必须*挂钩*终止调用......这似乎是一个非常复杂的任务，但在 BSH 的这个答案中进行[了](https://stackoverflow.com/users/1129665/bsh)[解释](https://stackoverflow.com/a/18456520/499359)：

> 当一个进程终止（未关闭）时，除非你开始做一些挂钩，要么通过挂钩[`TerminateProcess`](https://github.com/mirror/reactos/blob/master/reactos/dll/win32/kernel32/client/proc.c#L1575)或[`NtTerminateProcess`](https://github.com/mirror/reactos/blob/master/reactos/ntoskrnl/ps/kill.c#L1159)在任务管理器进程中，否则什么都做不了

希望它有所帮助（虽然是 6 年后的答案，哈哈）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-20T03:46:08.397

嗯，你总是可以让一个外部监视器进程调用带有 WM_PAINT 消息的 SendMessage 到系统托盘窗口（你必须根据窗口的类来做）。那应该删除不再有效的图标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-20T10:14:37.960

您可以使用[SetUnhandledExceptionFilter](http://msdn.microsoft.com/en-us/library/ms680634.aspx)来捕获崩溃。我通常使用它来创建崩溃转储文件，以便可以调试崩溃，但没有理由不能进行一些简单的清理，例如删除托盘图标。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-20T03:47:00.237

当以某种方式崩溃时，您必须处理应用程序退出，否则图标不会消失。

看看它是否有任何帮助： http: [//www.codeproject.com/KB/shell/ashsystray.aspx](http://www.codeproject.com/KB/shell/ashsystray.aspx)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2010-11-24T09:02:33.633

不能直接解决您的问题，但这对我来说是一个非常有用的解决方法：

我想避免混淆系统托盘状态。所以对我来说，在启动时“刷新”通知托盘就足够了。这比我最初想象的要棘手，但[下面](http://www.computersecurityarticles.info/security/refreshing-the-taskbar-notification-area/)演示了一个 SendMessage 解决方案，它模拟了用户鼠标悬停清理，不需要实际移动用户的光标。

请注意，在 Windows 7 机器上，名称`Notification Area`应替换为`User Promoted Notification Area`.

# python - Python/Twisted - 发送到特定的套接字对象？

> ID：460068
> 
> 赞同：2
> 
> 时间：2009-01-20T03:43:14.223
> 
> 标签：python, sockets, twisted, multiprocess

我在一个节点上有一个“管理器”进程，还有几个工作进程。管理器是拥有与客户端的所有连接的实际服务器。管理器接受所有传入的数据包并将它们放入队列中，然后工作进程将数据包从队列中拉出，处理它们并生成结果。他们将结果发送回管理器（通过将它们放入另一个由管理器读取的队列中），但这是我卡住的地方：如何将结果发送到特定的套接字？在单个进程上处理数据包时，这很容易，因为当您收到一个数据包时，您只需在上下文中抓取“传输”对象即可回复它。但是我将如何使用我正在使用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T06:00:42.790

听起来您可能需要在“事件”对象中保留对传输（或协议）的引用以及刚刚进入该协议的字节。这样，来自连接的响应会在同一个连接上输出。

如果不需要串行处理事情，也许您应该考虑设置可以并行处理数据的函子以消除排队的需要。请记住，您需要保护代码的关键部分。

编辑：从您关于评估服务器设计的其他问题来看，您的情况似乎无法并行处理，所以我的第一个建议是有效的。

# javascript - 在 javascript 中检测错误输入的电子邮件地址

> ID：460070
> 
> 赞同：6
> 
> 时间：2009-01-20T03:44:41.380
> 
> 标签：javascript, email-validation

我注意到有时用户输入错误的电子邮件地址（在联系我们的表格中），例如输入@yahho.com、@yhoo.com 或@yahoo.co 而不是@yahoo.com

我觉得这可以用一些 javascript 现场纠正。只需检查电子邮件地址是否存在可能的错误，例如上面列出的错误，这样如果用户输入 his_email@yhoo.com，就会显示一条不显眼的消息，或者类似的东西，表明他可能指的是@yahoo。 com，并要求仔细检查他是否正确输入了电子邮件。

**问题是：**
如何在 java 脚本中检测到字符串与“yahoo”或“yahoo.com”非常相似？或者一般来说，我如何检测两个字符串之间的相似度？

PS（这是一个旁注）在我的具体情况下，用户不是以英语为母语的人，而且他们中的大多数人都不流利，网站本身不是英语。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-20T04:03:09.050

这是一个肮脏的实现，可以让你使用[`Levenshtein distance`](http://en.wikipedia.org/wiki/Levenshtein_distance). “levenshteinenator”的功劳归于[`this link`](http://andrew.hedges.name/experiments/levenshtein/). 您可以将所需的任何流行域添加到域数组中，它会检查输入的电子邮件的主机部分的距离是 1 还是 2，这将合理地接近假设某处有错字。

```
levenshteinenator = function(a, b) {
    var cost;

    // get values
    var m = a.length;
    var n = b.length;

    // make sure a.length >= b.length to use O(min(n,m)) space, whatever that is
    if (m < n) {
        var c=a;a=b;b=c;
        var o=m;m=n;n=o;
    }

    var r = new Array();
    r[0] = new Array();
    for (var c = 0; c < n+1; c++) {
        r[0][c] = c;
    }

    for (var i = 1; i < m+1; i++) {
        r[i] = new Array();
        r[i][0] = i;
        for (var j = 1; j < n+1; j++) {
            cost = (a.charAt(i-1) == b.charAt(j-1))? 0: 1;
            r[i][j] = minimator(r[i-1][j]+1,r[i][j-1]+1,r[i-1][j-1]+cost);
        }
    }

    return r[m][n];
}

// return the smallest of the three values passed in
minimator = function(x,y,z) {
    if (x < y && x < z) return x;
    if (y < x && y < z) return y;
    return z;
}

var domains = new Array('yahoo.com','google.com','hotmail.com');
var email = 'whatever@yahoo.om';
var parts = email.split('@');
var dist;
for(var x=0; x < domains.length; x++) {
    dist = levenshteinenator(domains[x], parts[1]);
    if(dist == 1 || dist == 2) {
        alert('did you mean ' + domains[x] + '?');
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-20T03:54:15.153

除了 soundex，您可能还想看看确定[Levenshtein](http://en.wikipedia.org/wiki/Levenshtein_distance)距离的算法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T03:52:40.023

查看 soundex 和差异：如果您使用 ajax，您可以让 sql-server 针对“正确”域检查单词的 soundex-value 并获取建议。也可以制作自己的 soundex 版本（它并不复杂）。

[SQL Server 对非拉丁字符集的 SoundEx 函数？](https://stackoverflow.com/questions/299949/sql-servers-soundex-function-on-non-latin-character-sets)

[soundex算法的数据结构？](https://stackoverflow.com/questions/270771/data-structure-for-soundex-algorithm)

[你如何实现“你的意思是”？](https://stackoverflow.com/questions/41424/how-do-you-implement-a-did-you-mean)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-20T03:56:51.107

当然，作为第一步，您可以去掉域名并进行 DNS 查询——这至少应该告诉您它是否合法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-31T18:32:59.647

正如其他人所说，[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)是一个可靠的解决方案。

有一个出色的 Javascript 库可以完全满足您的需求：来自[**Kicksend**](https://github.com/Kicksend/mailcheck)的 Mailcheck。

[https://github.com/DimitarChristoff/mailcheck](https://github.com/DimitarChristoff/mailcheck)

图书馆：

*   为域和顶级域提供建议。
*   可以自定义（域、顶级域、字符串距离方法）。
*   可以与 jQuery 一起使用
*   与 jQuery 解耦

该库使用[sift3](http://siderite.blogspot.com/2007/04/super-fast-and-accurate-string-distance.html)字符串相似度算法来提高速度。据报道，Levenshtein 距离产生更好的结果（[https://github.com/DimitarChristoff/mailcheck](https://github.com/DimitarChristoff/mailcheck)）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-01-20T03:52:33.503

可能可以使用正则表达式，但就我个人而言，编写一个我很满意的正则表达式会花费我太长时间，因为它可以获得所有可能的排列而不会导致太多误报。

所以，这就是我要做的：

*   硬编码所有常见输入错误的列表。
*   使用不区分大小写的字符串比较将电子邮件与列表中的每个字符串进行比较。
*   如果匹配，则显示警告 - “您是说 yahoo.com 吗？”

是的，它不是很漂亮，但看起来（至少从你的问题来看）你需要检查那么多，所以它应该表现得很好。它似乎（至少对我而言）也不值得投入大量时间，所以这是一个令人难以置信的简单解决方案，可以在大约 15-30 分钟内完成。

# user-interface - 无需拖放即可快速创建用户界面的最佳语言？

> ID：460085
> 
> 赞同：11
> 
> 时间：2009-01-20T03:53:24.000
> 
> 标签：user-interface, accessibility

我是一名盲人大学生，正在学习侧重于用户界面设计的编程课程。该类正在使用处理，这是完全无法访问的。我正在寻找一种语言，它允许我无需拖放即可创建 GUI，并希望它足够聪明，可以完成大部分布局，而不会强迫我以像素为单位指定控制位置。

我知道 Perl、Java、C/C++、c# 和 HTML。我正在考虑创建 HTA 应用程序。我唯一的要求是该语言必须在 MS Windows 下运行，并且不能使用 SWING 或 GTK 作为底层工具包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T04:37:36.610

我会说 xaml 将是一个不错的选择：

*   不需要像素操作
*   代码背后的项目功能
*   以后可以添加像素更改以进行控制
*   有很多关于如何使用它的文档

也许如果你告诉我们你需要什么语言，我们可以给你更好的建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T13:51:51.890

作为一个盲人程序员说：

*   C# + WinForms：您可以手动创建代码并使用布局管理器或在头脑中计算尺寸，或者如果您使用 JAWS 屏幕阅读器，那么在 WinForms 设计器中会有一些脚本可以帮助您。
*   C# + WPF：在这里你用 XML 定义你的 UI，但你的头脑更复杂。当然看看这个，因为它是一个非常好的解决方案。目前 WPF 的另一个问题是并非所有屏幕阅读器都支持这种新技术。
*   www.EmpowermentZone.com 的 Jamal Mazrui 创建了一个名为“Layout By Code”的东西，但我没有这方面的经验。
*   HTML + Javascript 会很好，但我怀疑你的课程是否允许这样做。
*   WXWidgets：我对这个跨平台、多语言的 UI 工具包没有太多经验，但我相信它有布局管理器，因此我认识的几个盲人程序员都在使用它。
*   最后，我过去常常手动设计 Win32 资源脚本，在脑海中计算大小（没有布局管理器）。如果你想走这条路，这当然是可以实现的。

总而言之，WPF 不错，但请确保您的屏幕阅读器可以与此类应用程序一起使用。下一个最佳选择可能是 WinForms。如果你喜欢 Layout By Code 然后使用它，但如果这是你想要的就业技能，那么请记住这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T03:57:16.067

看看 XAML。我认为这对于现代 Windows 和 Web UI 创建者来说都是一个好的开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-20T03:58:05.940

Tcl/Tk 将完全按照您的意愿行事。包和**网格布局管理****器**基于小部件的逻辑相对位置。

 **尽管 Tk 的“本地”语言是 Tcl，但许多其他语言都有 Tk 绑定。

```
label .l -text "this is a label"
button .b -text 'quit' -command "exit"
pack .l .b 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T10:34:16.643

在 codeplex 上查看这个项目。它可以帮助你（作为处理和java的替代品） [http://bling.codeplex.com/](http://bling.codeplex.com/)

ling 是一个基于 C# 的库，用于在 Microsoft 的 WPF/.NET 上轻松编程图像、动画、交互和可视化。Bling 面向设计技术人员，即有时会编程的设计师，以帮助快速制作丰富的 UI 设计理念的原型。学生、艺术家、研究人员和业余爱好者也会发现 Bling 作为快速表达想法或可视化的工具很有用。Bling 的 API 和结构针对丢弃代码的快速编程进行了优化，而不是生产代码的仔细编程。

Bling 具有以下功能，有助于快速制作丰富的 UI 原型：

```
* Declarative constraints that maintain dynamic relationships in the UI without the need for complex event handling. For example, button.Width = 100 - slider.Value causes button to shrink as the slider thumb is moved to the right, or grow as it is moved to the left. Constraints have many benefits: they allow rich custom layouts to be expressed with very little code, they are easy animate, and they support UIs with lots of dynamic behavior.
* Simplified animation with one line of code. For example, button.Left.Animate.Duration(500).To = label.Right will cause button to move to the right of label in 500 milliseconds.
* Pixel shader effects without the need to write HLSL code or boilerplate code! For example, canvas.CustomEffect = (input, uv) => new ColorBl(new Point3DBl(1,1,1) - input[uv].ScRGB, input[uv].ScA); defines and installs a pixel shader on a canvas that inverts the canvas's colors. Pixel shading in Bling takes advantage of your graphics card to create rich, pixel-level effects.
* Support for multi-pass bitmap effects such as diffuse lighting.
* An experimental UI physics engine for integrating physics into user interfaces! The physics supported by Bling is flexible, controllable, and easy to program.
* Support for 2.5D lighting.
* A rich library of geometry routines; e.g., finding where two lines intersect, the base of a triangle, the area of triangle, or a point on Bezier curve. These routines are compatible with all of Bling's features; e.g., they can be used in express constraints, pixel shaders, or physical constraints. Bling also provides a rich API for manipulating angles in both degrees and radians.
* And many smaller things; e.g., a frame-based background animation manager and slide presentation system.
* As a lightweight wrapper around WPF, Bling code is completely compatible with conventional WPF code written in C#, XAML, or other .NET languages. 
```

Bling 是由 Sean McDirmid 和朋友创建的一个开源项目，用于帮助设计快速原型。我们使用 Bling 来提高我们的生产力，并希望与其他 WPF UI 设计原型师分享它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-20T03:58:19.963

我可能会尝试使用 C#。即使不使用拖放，它也对 Windows 常用控件等具有相当友好的界面。只是不要像往常一样使用设计器和代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-20T04:04:44.680

我不使用 Java 编程，但我知道 Java 提供了 UI 的编程创建并提供了一些出色的布局管理组件（Java 原生而不需要 SWING）。我第一次接触到 Layout Managers 是在 X11 的旧时代使用 X Toolkits（有人记得 Motif、OpenLook、HP Open View 吗？），而 Java 似乎也采用了类似的技术。

您可以从简单的布局管理器创建窗口、对话框和菜单。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-20T04:06:19.793

我自己有视力并且没有在任何已经过可访问性审核或盲人用户大量访问的内容上进行过密切合作，我认为我的回答不会非常彻底。然而，我的第一直觉是说某种生成 HTML 的动态 Web 服务器架构（如 C#、PHP 或 ColdFusion）将适合您为您处理大部分布局的描述，而无需您以像素为单位指定控制位置。当然可以通过 CSS 以像素为单位指定控制位置，但这不是必需的。而且我知道 HTML 也有明确定义的可访问性标准，而我不确定其他类型软件的可访问性标准的状态如何。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-20T04:49:27.630

您可以使用 javascript 和 html。有一个处理 javascript 的端口，因此您知道它对于您的课程将涵盖的内容来说已经足够强大了。您可以在不知道它的外观的情况下创作 html。事实上，这是编写 html 的首选方式。

javascript 的主要缺点不是 javascript 本身，而是浏览器 dom。那是控制 html 元素的接口。但是，像 jquery、mootools 或 dojo 这样的库可以解决大部分问题。

至于可访问性，请查看[WAI ARIA](http://www.w3.org/WAI/intro/aria) 以及[歌剧对 WAI ARIA 的介绍](http://dev.opera.com/articles/view/introduction-to-wai-aria/).a

WAI ARIA 是一种构建丰富的 javascript 应用程序同时与屏幕阅读器配合得很好的方法。这很酷。我没有看到更多的工作和热情投入到使 Web 堆栈在任何其他编程堆栈中可访问。

# java - 是否有一个只有键而没有值的 java 哈希结构？

> ID：460088
> 
> 赞同：37
> 
> 时间：2009-01-20T03:55:36.930
> 
> 标签：java, list, hash, collections

我正在寻找一种无需值即可散列键的结构。查询时，如果找到密钥，则返回 true，否则返回 false。我正在寻找类似于 `Hashtable<MyClass, Boolean>` 除了插入只需要一个键并且查询只返回真或假，从不为空的东西。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2009-01-20T03:57:32.057

您需要 Java 的[HashSet](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html) ( [Java 8](http://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html) )。

来自[官方文档](https://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)的描述是：

> 该类实现了由哈希表（实际上是 HashMap 实例）支持的 Set 接口。它不保证集合的迭代顺序；特别是，它不保证订单会随着时间的推移保持不变。此类允许空元素。
> 
> 此类为基本操作（添加、删除、包含和大小）提供恒定的时间性能，假设哈希函数将元素正确地分散在桶中。迭代这个集合需要的时间与 HashSet 实例的大小（元素的数量）加上支持 HashMap 实例的“容量”（桶的数量）的总和成正比。因此，如果迭代性能很重要，则不要将初始容量设置得太高（或负载因子太低），这一点非常重要。
> 
> 请注意，此实现不同步。如果多个线程同时访问一个哈希集，并且至少有一个线程修改了该集，则必须在外部进行同步。这通常是通过在一些自然封装集合的对象上同步来完成的。如果不存在这样的对象，则应使用 Collections.synchronizedSet 方法“包装”该集合。这最好在创建时完成，以防止对集合的意外不同步访问：
> 
> Set s = Collections.synchronizedSet(new HashSet(...));
> 
> 此类的迭代器方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间修改了集合，除了通过迭代器自己的 remove 方法之外的任何方式，迭代器都会抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。
> 
> 请注意，不能保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证。快速失败的迭代器会尽最大努力抛出 ConcurrentModificationException。因此，编写一个依赖于这个异常的正确性的程序是错误的：迭代器的快速失败行为应该只用于检测错误。
> 
> 此类是 Java 集合框架的成员。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-20T03:57:38.670

java.util.HashSet？使用 contains() 进行查找。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T00:55:33.450

另请参阅`Collections#newSetFromMap`基于给定地图实现创建集合的静态方法。例如，这对于创建弱散列集很方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-07T11:54:45.557

Java Set 旨在删除重复项，希望 HashMap 必须在内部使用 Java **Set**来管理键，因为键永远不会有重复项，因此您应该考虑根据您的要求设置。

# iphone - applicationWillTerminate 在 iPhone 上究竟是如何工作的？

> ID：460115
> 
> 赞同：8
> 
> 时间：2009-01-20T04:13:44.943
> 
> 标签：iphone

我正在考虑如何让我的 iPhone 应用程序尽可能地“防弹”。

现在，我正在考虑应用程序将如何响应用户在应用程序处理的关键点按下主页按钮。

究竟会发生*什么*？应用程序的线程中是否执行了更多指令？

当 applicationWillTerminate 被调用时，我读到应用程序“在操作系统终止进程之前有几秒钟的时间”——再次，到底发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T05:51:56.320

我观察到的是主屏幕会立即出现，但允许应用程序在后台继续运行至少几秒钟。如果时间太长，它会被杀死。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-21T15:06:46.497

applicationWillTerminate 当您的应用程序由于用户决定进行的调用而退出时或当操作系统由于某些其他原因而将其终止时调用。您无法阻止应用程序被终止，但可以存储一些您想稍后在此方法中使用的数据。

例如，如果您的应用程序允许用户搜索某些内容，您可以在应用程序即将终止时（在 applicationWillTerminate 方法中）保存搜索词，以便稍后用户再次登录应用程序时使用它。

因此，该方法的实现取决于您希望您的应用程序在用户决定退出应用程序或操作系统杀死它时执行的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-13T02:53:14.033

我听说从调用 applicationWillTerminate 开始，您有大约 4.8 秒的时间进行处理，否则它会被杀死。基本上可以快速保存您需要的任何东西！

# c# - ClickOnce 部署 Windows 服务？

> ID：460118
> 
> 赞同：53
> 
> 时间：2009-01-20T04:16:44.110
> 
> 标签：c#, visual-studio-2008, windows-services, clickonce

是否可以使用 ClickOnce 部署 Windows 服务？如果是这样，您如何实现这一目标？

目前我们必须使用一个Deployment项目，使用ClickOnce可以大大简化安装过程。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-01-20T06:39:27.190

AFAIK 你不能真正使用 ClickOnce 端到端部署服务；文件位置（ClickOnce 安装到用户的配置文件中）和安装（ClickOnce**基本上没有**副作用）都存在问题。

但是，您可以将服务编写为可以从服务列表中自行安装/卸载的 exe，[如下所示](https://stackoverflow.com/questions/255056/install-a-net-windows-service-without-installutil-exe)；基本上，您将其编写为控制台 exe 并处理一些命令行参数，`AssemblyInstaller`用于从当前程序集中 [un]install。另一个优点是可以使用相同的方法来帮助调试，因为您可以从命令行运行它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-08-30T09:26:13.703

[根据在 ClickOnce 和 Windows Installer 之间](http://msdn.microsoft.com/en-us/library/ms973805.aspx)进行选择，我猜不

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-21T13:53:54.560

而不是 ClickOnce，我喜欢使用 Inno Setup 的方法，就像这里[https://stackoverflow.com/a/1450051/396200](https://stackoverflow.com/a/1450051/396200)

您可以更好地控制复制和执行的内容和方式。

正如 Marc Gravell 在他的回答中所说，我创建了一个自我安装我的服务的 exe，然后使用 Inno Setup 来打包和部署它。安装 Inno 安装程序后，它会自动运行 exe，然后我的 exe 安装我的服务。

# sharepoint - Access 2007 与 Sharepoint 2007 任务列表的集成

> ID：460130
> 
> 赞同：3
> 
> 时间：2009-01-20T04:28:43.460
> 
> 标签：sharepoint, ms-access, moss, ms-access-2007

我们的一个客户有一个 Access 2007 应用程序，其中包含一个用于创建任务以上传到 Sharepoint 任务列表的表单。用户填写表格（标题、状态、优先级、开始日期、截止日期）。然后，用户在必须将此任务分配给的共享点用户名旁边放置复选标记（每个选定的 sp 用户一个任务）。这些数据被聚合到 TaskQueue 表中，并且任务成功添加到 Sharepoint 列表中（通过链接列表 - 我认为）。问题是我们需要为每个任务项包含零个或多个附件。有没有办法通过宏、VBA 或其他一些我尚未了解的内置功能来做到这一点？

我最初的想法是使用 C# windows 服务来监视此任务队列表，然后在给定列表项 ID 和附件文件的 NTFS 路径时使用 Lists.asmx Shareopint Web 服务和 AddAttachment 方法将附件添加到任务列表项在共享点。

在使用 Access 并在 Sharepoint 中将链接表设置为任务列表后，我发现您可以通过 Access 2007 数据表视图添加附件。问题是您只能在“分配给”字段中选择一个用户或 SP 组。他们有很多重复的任务要分配给一群不同的人。这就是他们开发这种表格的原因。如果有人对如何解决此问题有任何想法，请告诉我。还有人知道任何好的 Access 2007/Sharepoint 集成资源吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T21:33:33.263

1.  将附件作为访问表单的一部分上传。
2.  将附件加载到文档库中
3.  像他们当前正在完成一样检查用户
4.  将第 2 步中上传的附件的超链接添加到描述（富文本）字段。（可能在步骤 1-2 中自动完成）
5.  不理会 TaskQueue 表。

这样，可以包含 0..n 个文档。任务列表只存储结构化数据，文档在文档库中存储一次，当将 1 个文档附加到 5 个不同的任务（导致文档的 5 个副本）时，您不会出现失控增长。

# windows - Windows Internet 快捷方式：从 IE 最大化开始？

> ID：460136
> 
> 赞同：0
> 
> 时间：2009-01-20T04:32:12.050
> 
> 标签：windows, shortcut

我的桌面上有一个 Internet 快捷方式，其内容如下所示：

```
[InternetShortcut]
URL=http://www.microsoft.com/isapi/redir.dll?prd=ie&pver=6&ar=IStart
Modified=D03458CE7738C801A2 
```

我想知道是否有任何调整可以保证在有人加载链接后浏览器开始最大化。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T08:29:44.177

简而言之：您不能保证浏览器从一个特殊的 Internet 链接开始最大化。所有或没有互联网链接开始最大化。

但是：有人遇到了与此类似的问题。检查[这个](http://www.eggheadcafe.com/software/aspnet/31821712/ie7-wont-start-maximized.aspx)，如果它对你有帮助。

* * *

编辑：哎呀，我发现了一些很脏的东西，我认为你不应该使用它，但是......在这里。将您的第二行替换为以下内容：

```
URL=javascript:window.moveTo(0,0);window.resizeTo(screen.width,screen.height);window.location.href="http://www.microsoft.com/isapi/redir.dll?prd=ie&pver=6&ar=IStart"; 
```

它不会使窗口真正最大化，而是使浏览器窗口达到最大高度和宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T08:39:56.620

*与其使用 Internet 快捷方式(.url)* ，不如创建Internet Explorer的快捷方式*(.lnk) 。*(iexplore.exe) 您可以在 lnk 文件中设置初始窗口状态。（右键单击图标并查看属性。）

您可以提供一个 URL 作为参数。目标将类似于 `"%programfiles%\Internet Explorer\iexplore.exe" http://reddit.com`

当您仅在计算机中使用它时，这没关系。这不是一个通用的解决方案。如果您想以编程方式执行此操作，则有一些与创建快捷方式相关的 Windows API。您还必须从注册表中获取 Internet Explorer 的路径，因为它可能会有所不同。有些用户可能没有 IE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T07:42:42.883

我认为 IE 会记住上次打开它的方式，然后使用这些设置。您可能会从 Registry 中找到此信息并使用它，但我怀疑它是为了从启动参数中获取值而实现的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T08:22:28.090

你在这里很快就得出结论。我认为您甚至不能保证 Internet Explorer 会启动。您将获得用户设置为默认浏览器的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T11:40:43.797

我认为这是保证除非系统关闭，否则 Internet Explorer 将启动。即使您获得了默认窗口，您也可以很容易地从那里将浏览器设置为您想要的。

# performance - 在单链表中找到指向节点 M 步长的指针的算法

> ID：460137
> 
> 赞同：1
> 
> 时间：2009-01-20T04:33:32.093
> 
> 标签：performance, algorithm, linked-list

假设有一个长度未知的单链表。我们想找到到尾部有 M 步的节点。

例如，单列表是这样的：(A)->(B)->(C)->(X)->(Y) 和 M = 2。那么输出应该是指向 (C) 的指针。

面对这个测验，我的第一反应是遍历单链表得到长度N。然后第二次遍历单链表，但只向前NM-1步。时间复杂度为 O(n)，空间复杂度为 O(1)。

然后，我面临的挑战是找到一种解决方案以单次遍历的方式进行。解决方案是有两个指针。第二个指针比第一个指针落后 M 步。这两个指针以相同的速度向前移动。当第一个指针到达尾部时，第二个指针就是结果。

经过对这个问题的深入思考，我真的不相信第二个“棘手”的解决方案比第一个更好。它是一次遍历，但它也涉及 2*NM 指针分配。

有没有想过这个问题？还有其他真正更快的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T04:49:20.627

您应该使用循环缓冲区

分配一个 M + 1 个指针的数组，并通过列表为每个节点填充第 (i mod M + 1) 个指针。当你到达终点时，在数组中回看 M（如果需要，可以环绕）。

这样，您只有 N 次写入！

这是 C++ 中的 hack 作业示例程序

```
node* get_Mth_from_end(node* head, int m)
{
  int pos = 0;
  node** node_array = new node*[m + 1];
  node_array[0] = head;
  while (node_array[(pos + 1) % (m + 1)] = node_array[pos % (m + 1)]->next)
     pos++;
  if (pos < m)
  {
     delete[] node_array;
     return NULL;
  }
  pos = pos - m;
  if (pos < 0)
     pos = pos + m + 1;
  node* retval = node_array[pos];
  delete[] node_array;
  return retval;
} 
```

这应该被 1 个错误检查为关闭。我的指针语法也可能有点偏差，但想法就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T04:42:56.850

除了您提出的计数式算法之外，您可以使用类似于以下的递归函数：

```
int getNumNodesAfter(Node *node){
   if( node->next == NULL ){
      return 0;
   }else{
      return getNumNodesAfter(node->next) + 1;
   }
} 
```

当然，当函数返回您要查找的数字时，您需要找到一种存储相关节点的好方法。

（编辑：这可能不会比计数算法更有效，只是一种替代方法）

然而，这个问题的真正答案是：您的数据结构（单链表）不利于快速实现您想要对其执行的操作，因此您应该选择一个新的数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T04:46:50.320

我喜欢递归的建议。但是，我不相信它会提高问题中双指针算法的性能。

Rubancache 是正确的，因为数据结构不支持更快的操作。它是为慢速遍历而设计的，但插入时间很快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T08:51:44.037

可以通过 N+4M 指针分配和 log(M) 空间来完成（嗯，额外的空间，你的列表已经占用了 N）。方法如下（这个想法与人们在回退调试器中使用的想法相同）。伪代码如下，其中 M < 2^m，p 为长度为 m 的循环缓冲区

```
for (n=0, front = 0; p[front] != end; ++n, ++p[front]) {
  for (j = 0; j < m; ++j)
    if (n % j = 0)
      ++ front
  front = front % m
}
front = (front-1) % m
for (j = M; j < n-2^m - (n mod 2^m); ++j)
  ++p[front] 
```

p[front] 现在是你的答案

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-01-20T06:26:23.753

我认为更好的东西是这样的：

```
FindNFromEnd(head, n)
    counter = 0;
    first = head
    firstplusn = head
    while (head.next != null)
        counter++
        head = head.next

        if counter == n
            first = firstplusn
            firstplusn = head
            counter = 0

     while counter < n
         counter++
         first = first.next

     return first 
```

例如，如果 n = 3，它看起来像：

```
 0   1   2   3   4   5   6   7
1   FNH
2   FN  H   
3   FN      H
1   F           NH 
2   F           N   H
3   F           N       H
1   F           N           H
2               F           N   H
---
3                  [F] 
```

所以 F 跟踪 head - N - counter，N 跟踪 head-counter，你只需要做一些事情 (N + M + N/M) 而不是 O(2*N - M)。

# screensaver - 有没有一种体面的方法来抑制 linux 中的屏幕保护程序？

> ID：460140
> 
> 赞同：14
> 
> 时间：2009-01-20T04:37:13.677
> 
> 标签：screensaver

我正在寻找一种体面的、非蹩脚的方式来抑制 xscreensaver、kscreensaver 或 gnome-screensaver，无论哪个可能正在运行，最好以与屏幕保护程序无关的方式，并且它绝对必须*快速*执行。

我已阅读[xscreensaver 常见问题解答](http://www.jwz.org/xscreensaver/faq.html)。

我有一个基于 gtk 的游戏程序，它在混合多个音频通道时以 30 帧/秒的速度运行，并且由于它是由操纵杆控制的，因此有时会启动“the”屏幕保护程序。我将“the”放在引号中，因为有至少三个不同的流行屏幕保护程序，xscreensaver、gnome-screensaver 和 kscreensaver，每个都有自己独特而笨重的方法，应用程序可能会通过这些方法来抑制它们。

有没有人将代码封装成一个*快速*的代码块来禁止所有这些？哦，它必须与 GPL 兼容。

目前，如果检测到任何屏幕保护程序并且操纵杆正在使用中，我的代码只是对不合作的屏幕保护程序开发人员发出悲哀的抱怨，并且实际上除了建议用户手动禁用屏幕保护程序之外并没有尝试做任何事情，这是我唯一能做的事情想去做是非常丑陋的，我干脆拒绝去做。

只是想知道是否有其他人遇到过这个问题，他们做了什么，如果他们做了什么，它是否像我认为的那样丑陋，或者是否有一些优雅的解决方案......似乎可能以某种方式合成 X 事件以欺骗屏幕保护程序，使其认为有一些活动可能会以一种通用的方式来解决问题，但我真的不知道该怎么做（并且希望你不需要 root 来做到这一点.)

有任何想法吗？

* * *

嗯，不幸的是，至少在 Fedora core 8 上，这似乎不起作用。

xdg-screensaver 脚本在那里，并且似乎打算工作，但实际上并没有工作。

一旦你执行“xdg-screensaver 暂停窗口 ID”，窗口 ID 是从程序中通过

```
xwindow_id = GDK_WINDOW_XWINDOW (GTK_WIDGET (widget)-&gt;window); 
```

或者无论是通过xprop获取窗口id，还是手动运行xdg-screensaver，都会创建两个进程：

```
[scameron@zuul wordwarvi]$ ps -efa | grep xdg
scameron  4218     1  0 20:12 pts/2    00:00:00 /bin/sh /usr/bin/xdg-screensaver suspend 0x3a00004
scameron  4223     1  0 20:12 pts/2    00:00:00 /bin/sh /usr/bin/xdg-screensaver suspend 0x3a00004
scameron  4313  3151  0 20:15 pts/1    00:00:00 grep xdg
[scameron@zuul wordwarvi]$ 
```

他们永远不会死，即使他们应该等待的程序死了，屏幕保护程序也永远不会重新启用。

```
[scameron@zuul wordwarvi]$ xdg-screensaver status
disabled
[scameron@zuul wordwarvi]$ ls -ltr /tmp | grep xdg
-rw------- 1 scameron scameron    15 2009-01-20 20:12 xdg-screensaver-scameron--0.0
[scameron@zuul wordwarvi]$ 
```

运行 xdg-screensaver resume window-id 不会恢复屏幕保护程序。

要重新启用屏幕保护程序，我必须手动杀死它们，并手动删除它留在 /tmp 中的文件：

```
[scameron@zuul wordwarvi]$ kill 4218 4223
[scameron@zuul wordwarvi]$ rm /tmp/xdg-screensaver-scameron--0.0 
[scameron@zuul wordwarvi]$ xdg-screensaver status
enabled
[scameron@zuul wordwarvi]$ 
```

所以，好意，但似乎并没有真正奏效。

* * *

不，当然不希望每帧都运行它，但不希望它在运行时引起打嗝，仅此而已。考虑到合成 X 事件，我想象它经常足以让屏幕保护程序认为有活动。

看着 xdg-screensaver （这似乎是一个 shell 脚本，最终只是为我的进程做一个“等待”——很酷），它似乎是为了做我想做的事。我知道我不可能是唯一或第一个面临这个问题的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-20T11:44:52.597

不，但是是的……

没有很好的干净方法可以做到这一点。在我看来，应该有一种由 X 服务器管理的机制，屏幕保护程序和感兴趣的应用程序都可以自愿使用它来协商在一个或多个程序运行期间抑制任何屏幕保护程序。但据我所知，尚不存在这样的机制。GNOME 和 KDE 看起来正在实现一个 DBUS 方法来解决这个问题，但在我看来，即使它变得普遍（它还不够广泛，无法在 3rd 方代码中依赖它），它也不是正确的方法。

但是，xdg-screensaver 是 FreeDesktop 标准化的 shell 脚本，您可以将其作为子进程运行以控制屏幕保护程序。它控制最流行的屏幕保护程序，操作系统供应商将负责更新/维护它，以便在未来与更新的屏幕保护程序或更好的方法一起使用。与许多其他 kludges 不同，如果您的应用程序通过某些忘记调用重新启用代码的路线崩溃或退出，它将自动重新启用屏幕保护程序。有关如何使用它的详细信息，请参阅手册页。

作为一个 GTK+ 用户，对你来说最棘手的方面可能是创建子进程来运行 shell 脚本（如果你还没有这样做，那么你会想要找到一个关于使用 fork + exec 的教程）并获取 XWindow要提供给 xdg-screensaver 的应用程序主窗口的 ID。

您要求代码应该“快速”。这让我想知道您是否希望每帧都运行它 - 不要。xdg-screensaver 解决方案允许您显式禁用或重新启用屏幕保护程序，而不是尝试每帧抑制一次或类似的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-25T14:28:29.557

尝试这个：`xdg-screensaver suspend [window id]`

（见： http: [//portland.freedesktop.org/xdg-utils-1.0/xdg-screensaver.html](http://portland.freedesktop.org/xdg-utils-1.0/xdg-screensaver.html)）

一个 Bash 脚本解决方案：

```
activ_win_id=`DISPLAY=:0.${display} xprop -root _NET_ACTIVE_WINDOW`
activ_win_id=${activ_win_id:40:9}
xdg-screensaver suspend $activ_win_id 
```

它适用于 gnome 屏幕保护程序。

还有更复杂的 DBus“禁止”方法：[https ://people.gnome.org/~mccann/gnome-screensaver/docs/gnome-screensaver.html#gs-method-Inhibit](https://people.gnome.org/~mccann/gnome-screensaver/docs/gnome-screensaver.html#gs-method-Inhibit)

```
dbus-send --session \
      --dest=org.gnome.ScreenSaver \
      --type=method_call \
      --print-reply \
      --reply-timeout=20000 \
      /org/gnome/ScreenSaver \
      org.gnome.ScreenSaver.Inhibit \
      [application name e.g. ""] \
      [reason e.g."playing a game"] \
      [non-zero-random-integer e.g. 123] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-20T22:34:15.553

**编辑 2019/12/04：**

我回到这个，发现`dbus-send`现在不能正常工作。`Inhibit`一旦 D-Bus 连接被释放（`dbus-send`退出时发生） ，该方法就会被释放。

一个好方法（使用 Gnome 3.34）是以下[python 脚本](https://gist.github.com/fxthomas/9bdfadd972eaf7100b374042faac28c2#file-gnome-inhibit-py)：

```
#!/usr/bin/python
# coding=utf-8
# Usage: gnome-inhibit <command-line>
# Example: gnome-inhibit mpv video.mp4

import subprocess
import dbus
import sys
import os

bus = dbus.SessionBus()
proxy = bus.get_object('org.freedesktop.ScreenSaver','/org/freedesktop/ScreenSaver')
iface = dbus.Interface(proxy, 'org.freedesktop.ScreenSaver')
cookie = iface.Inhibit(sys.argv[1], "gnome-inhibit")
print("Inhibiting screensaver (pid: %d)" % os.getpid())
print("Executing: %s" % subprocess.list2cmdline(sys.argv[1:]))

subprocess.check_call(sys.argv[1:]) 
```

* * *

**不再起作用的**旧答案：****

 **当前的方式（在 Gnome 3.22 和可能的其他，如 KDE 下）似乎是这样，它返回一个 uninhibition cookie 作为`uint32`：

```
dbus-send --session \
      --dest=org.freedesktop.ScreenSaver \
      --type=method_call \
      --print-reply \
      --reply-timeout=20000 \
      /org/freedesktop/ScreenSaver \
      org.freedesktop.ScreenSaver.Inhibit \
      string:program string:reason 
```

然后，禁用抑制：

```
dbus-send --session \
      --dest=org.freedesktop.ScreenSaver \
      --type=method_call \
      --print-reply \
      --reply-timeout=20000 \
      /org/freedesktop/ScreenSaver \
      org.freedesktop.ScreenSaver.UnInhibit \
      uint32:<inhibit-cookie> 
```

这是一个[小脚本](https://gist.github.com/fxthomas/9bdfadd972eaf7100b374042faac28c2)，它禁用给定程序的屏幕保护程序，然后在退出时恢复它。

*（[D-Feet](https://wiki.gnome.org/action/show/Apps/DFeet?action=show&redirect=DFeet)对反省不断变化的 D-Bus 方法名称特别有帮助）*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-30T21:17:41.963

它不是一个完全与桌面无关的解决方案，但如果安装了核心 Gnome 库（许多基于 GTK 的应用程序需要它们），它也可以在其他桌面环境中工作：

禁用屏幕保护程序：

```
gsettings set org.gnome.desktop.screensaver idle-activation-enabled false 
```

（重新）启用屏幕保护程序：

```
gsettings set org.gnome.desktop.screensaver idle-activation-enabled true 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-20T11:22:36.840

电影播放器​​通常禁用屏幕保护程序。您可以查看[mplayer](http://svn.mplayerhq.hu/mplayer/trunk/) -code 以了解他们是如何做到的。

对于常规 X，他们在支持的情况下使用[XScreenSaverSuspend 。](http://svn.mplayerhq.hu/mplayer/trunk/libvo/x11_common.c?revision=28285&view=markup)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-13T14:28:52.253

这个“肮脏的解决方案”适用于 Debian 10 + LXDE：

```
[ "$(cat ~/.xsessionrc | grep 'xset -dpms')" ] || echo 'xset -dpms' >> ~/.xsessionrc  # disables DPMS (Energy Star) features
sed -i '/^timeout:/c timeout:\t3:00:00' ~/.xscreensaver  # 3 hours should be enough to see a film without interruptions
# DOESN'T WORK:  xset s off   # turns the screen saver functions off 
```

# python - Python/Twisted - TCP 数据包碎片？

> ID：460144
> 
> 赞同：6
> 
> 时间：2009-01-20T04:38:17.107
> 
> 标签：python, tcp, twisted, packet

在 Twisted 中，当实现 dataReceived 方法时，似乎没有任何例子提到数据包被分段。在所有其他语言中，这是您手动实现的，所以我只是想知道这是否已经在扭曲中为您完成了，还是什么？如果是这样，我是否需要在我的数据包前面加上一个长度标头？还是我必须手动执行此操作？如果是这样，那会是什么方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-20T05:47:42.567

在 dataReceived 方法中，您将数据作为不确定长度的字符串返回，这意味着它可能是您协议中的完整消息，也可能只是某些“客户端”发送给您的消息的一部分。您必须检查数据以查看它是否包含协议中的完整消息。

我目前在我的一个项目中使用 Twisted 来实现协议，并决定使用 struct 模块来打包/解包我的数据。我正在实现的协议具有固定的标头大小，因此在我至少读取 HEADER_SIZE 字节数之前我不会构造任何消息。总消息大小在此标头数据部分中声明。

我想您实际上并不需要将消息长度定义为协议的一部分，但这会有所帮助。如果您没有定义一个，则必须有一个特殊的分隔符来确定消息何时开始/结束。FIX 协议如何使用 SOH 字节来分隔字段。尽管它确实有一个必填字段来告诉您一条消息有多长（只是不是一条消息中有多少个字段）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-20T14:20:12.720

在处理 TCP 时，您真的应该忘记所有“数据包”的概念。TCP 是一种流协议 - 您将数据流入并从另一端流出数据。一旦数据被发送，只要数据都以正确的顺序到达，它就可以到达任意多或尽可能少的块。您必须像使用其他语言一样手动进行分隔，使用长度字段、消息类型字段或特殊分隔符等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-03T16:01:47.913

您还可以使用 LineReceiver 协议

# asp.net-mvc - 与 ASP.NET WebForms 相比，ASP.NET MVC 页面的“页面生命周期”是什么？

> ID：460145
> 
> 赞同：160
> 
> 时间：2009-01-20T04:38:47.763
> 
> 标签：asp.net-mvc

与 ASP.NET WebForms 相比，ASP.NET MVC 页面的“页面生命周期”是什么？

我试图更好地理解这个“简单”问题，以确定我在一个（非常）简单网站中的现有页面是否可以轻松地从 ASP.NET WebForms 转换。

我正在寻找以下过程的“转换”或替代生命周期。

我目前在做什么：

*（是的，我知道任何能够回答我的问题的人都已经知道这一切——我只是想比较一下“生命周期”，所以我想我先填写我们都知道的内容）*

**渲染页面：**

*   我有一个包含我的基本模板的母版页
*   我的内容页面为我提供了来自母版页的命名区域，我将内容放入其中。
*   在每个内容页面的事件处理程序中，我从数据库加载数据（主要是只读的）。
*   我将此数据绑定到表示网格、下拉列表或中继器的 ASP.NET 控件。这些数据都“存在”在生成的 HTML 中。其中一些进入 ViewState （但我不会进入太多！）
*   我设置属性或将数据绑定到某些项目，如页面上的 Image 或 TextBox 控件。
*   页面被发送到呈现为不可重用 HTML 的客户端。
*   我尽量避免使用除页面最低要求之外的 ViewState。

**客户端（不使用 ASP.NET AJAX）：**

*   我可能会使用 JQuery 和一些讨厌的技巧来查找页面上的控件并对其执行操作。
*   如果用户从下拉列表中选择 - 会生成一个回发，它会在我的代码隐藏中触发一个 C# 事件。此事件可能会发送到数据库，但无论它做什么，一个全新生成的 HTML 页面最终都会被发送回客户端。
*   我可能会使用 Page.Session 来存储我以后需要重用的键值对

那么对于 MVC，这个“生命周期”是如何变化的呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-01-20T05:24:54.190

我将尝试评论您提到的每个要点：

您的母版页仍然存在于 MVC 中，并用于为站点提供一致的布局。那里没有多少新东西。

您的内容页面将成为 MVC 世界中的视图。它们仍然为您的母版页提供相同的内容区域。

Webforms 的事件处理不应该在 MVC 中使用，而是您的 Controller 类及其操作方法将处理将您的数据加载到传递给视图的“模型”中。

虽然 Webform 样式的数据绑定在 MVC 中是可能的，但我发现它不是最佳解决方案。最好将您的数据放在模型类中并强烈键入您的视图，以便您可以直接访问该模型。然后，只需使用`<%= ViewData.Model.SomeProperty %>`语法访问您的数据并将其显示在所需位置即可。至于视图状态，我的建议是忘记它甚至存在。

请记住，使用 MVC 的优点之一是您可以控制发送给客户端的 HTML。拥抱这种力量并尝试找到让您保持这种控制的解决方案。Webform 控件试图对您隐藏 html，因此在您需要时自定义 html 变得更加困难。

我强烈推荐 JQuery 或其他类似强大的 javascript 库之一。但是学习使用它们直接访问 HTML DOM 并避免 webform 控件的 id mangling 问题。

您可以使用 jquery 挂钩到客户端的下拉选择并提交标准或 ajax 样式的请求。这些请求可以返回可用于更新现有页面的新页面、重定向、html 片段甚至 JSON 数据。

asp.net Session 可以根据需要使用。

# c# - 在窗口的标题栏上绘制工具栏

> ID：460146
> 
> 赞同：1
> 
> 时间：2009-01-20T04:40:23.890
> 
> 标签：c#, winforms, windows-vista, titlebar

如何在 windows vista 中的 C# winforms 窗口的标题栏上绘制工具栏？我有一个可以工作的窗口，除非窗口未最小化/未最大化，它的大小增加了大约 16x32px。如果可能，请提供代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T05:07:29.687

有效执行此操作的唯一方法是在您覆盖 Form 的 WndProc 方法时处理 WM_NCPAINT 消息。

传递给 WndProc 的基本实现将导致绘制窗口框架，但此时，您将负责在标题栏上绘制工具栏元素。

您还需要处理所有其他 WM_NC* 消息，这将允许您处理按钮单击等（您需要处理绘制控件的事件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T06:04:45.560

我一直在寻找同样的问题，因为我想用左上角的那个大按钮编写一个功能区栏...我找到的唯一好的资源是~~在~~[这个博客](http://www.thecodeking.co.uk/2007/09/adding-caption-buttons-to-non-client.html)上的~~[CodeProject](http://www.codeproject.com/KB/cs/ActiveButtons.aspx)~~以及[这个](http://www.codeproject.com/KB/vista/takecontroloftitlebar.aspx)和[另一个](http://www.codeproject.com/KB/dialog/AeroNonClientAreaButtons.aspx)。

# inversion-of-control - 库程序集 IoC 设置

> ID：460149
> 
> 赞同：1
> 
> 时间：2009-01-20T04:43:29.360
> 
> 标签：inversion-of-control

我在一个有两个主要部分的项目中工作：类库程序集和主应用程序。两者都将 Castle Windsor 用于 IoC，并且都在代码中手动设置了组件列表（以帮助重构并避免需要配置文件）。目前主应用程序有这样的代码：

```
public static void Main()
{        
    // Perform library IoC setup
    LibraryComponent.Init();

    // Perform application IoC setup
    IoC.Register<IXyz, Abc>("abc");
    // etc, etc, ...

    // Start the application code ...
} 
```

然而，初始化库的调用似乎不是一个好的解决方案。设置使用 IoC 容器解耦其内部组件的类库的最佳方法是什么？

* * *

**编辑：**

*   [Lusid](https://stackoverflow.com/users/56855/lusid)建议在库中的每个公共组件上使用静态方法，然后调用初始化。使它变得更好的一种可能的方法是使用[PostSharp](http://www.postsharp.org/)之类的东西以面向方面的方式执行此操作。但是我希望有一些更优雅的东西;-)

*   [Lusid](https://stackoverflow.com/users/56855/lusid)还建议使用该`AppDomain.AssemblyLoad`事件在加载时执行自定义步骤，但是我真的在寻找一种方法来避免客户端程序集需要任何设置代码。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T04:52:01.120

我不确定我是否完全理解您要解决的问题，但我的第一个猜测是您正在寻找一种方法来分离从主应用程序调用 Init 方法的需要。

我过去使用的一种方法是类库中静态类的静态构造函数：

```
static public class LibraryComponent {
  static LibraryComponent() {
    Init();
  }
} 
```

如果您有多个类库，并且想要一种快速而肮脏的方式来评估所有这些类库，那么这是一种（有点毛茸茸的）方式：

```
[STAThread]
static void Main()
{
    AppDomain.CurrentDomain.AssemblyLoad += new AssemblyLoadEventHandler(CurrentDomain_AssemblyLoad);
}

static void CurrentDomain_AssemblyLoad(object sender, AssemblyLoadEventArgs args)
{
    IEnumerable<Type> types = args.LoadedAssembly.GetTypes()
        .Where(t => typeof(IMyModuleInterface).IsAssignableFrom(t));
    foreach (Type t in types)
    {
        doSomethingWithType(t);
    }
} 
```

Where 子句当然可以是你想要的任何东西。上面的代码会在加载到当前 AppDomain 的每个程序集中找到派生自 IMyModuleInterface 的任何类，然后我可以对它做一些事情，无论是注册依赖项、维护内部列表等等。

可能不是您正在寻找的东西，但希望它在某种程度上有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T04:53:09.760

你可以有一个注册模块。基本上 LibraryComponent.Init() 函数需要一个 IRegistrar 来连接所有东西。

IRegistrar 基本上可以有一个函数 Register(Type interface, Type implementation)。implimentor 将该函数映射回他们的 IOC 容器。

缺点是你不能依赖任何特定于你使用的容器的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T17:28:16.193

Castle Windsor 实际上有一个称为设施的概念，它基本上只是包装标准化配置的方法。在这个模型中，您只需将这两个设施添加到容器中，它们就会完成工作。

当然，这并不会比调用库例程来完成这项工作更好，除非您在配置文件中配置了这些设施（考虑 binsor）。如果您真的对配置文件过敏，那么您当前的解决方案可能是最好的。

# estimation - 你如何向销售人员解释编程真的很困难并且需要时间

> ID：460152
> 
> 赞同：8
> 
> 时间：2009-01-20T04:47:43.610
> 
> 标签：estimation

我经常与无法弄清楚如何使用 Excel 的销售和营销类型一起工作，更不用说从技术角度了解他们的要求范围了。当然，期望他们这样做是不公平的，但这仍然给我留下了一个问题。

向营销和销售类型展示他们要求的需要大量复杂编程和一些耐心的东西的最佳方式是什么？

您能否分享问题和解决方案的示例？

你能推荐一下这方面的书吗？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-20T05:06:35.960

将问题分解为尽可能多的细分任务。在每项旁边提供以小时为单位的每项估算。

当他们将项目视为一个整体时，似乎很简单。然而，当他们看到必须完成的每件单独的事情以及每件事情需要的小时数时，这就是将其转化为业务人员可以理解的术语。突然间，他们想要的软件解决方案对他们来说不再是一个“黑匣子”，他们现在对这个过程有了一些了解。

如果您正在寻找书籍，我建议您使用[Software Estimation - Demystifying the Black Art](https://rads.stackoverflow.com/amzn/click/com/0735605351)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-20T06:02:28.170

**计算机将按照您的要求执行操作，而不是您希望它执行的操作。**

任何形式的抽象都需要被翻译成精确的细节。

来源[http://c2.com/cgi/wiki?TeachMeToSmoke](http://c2.com/cgi/wiki?TeachMeToSmoke)

```
Teacher: "It's hard to express ourselves clearly. You're a smoker, right? 
Are you pretty good at it? [Student nods.] 
Let's pretend I'm a man from Mars and you are going to teach me to smoke. 
Do you have a fresh pack? Let's start with that. 
[Takes pack.] OK, now tell me what to do." 

Student: "Tear open the pack."

T: [Tears pack to shreds. Cigarettes fly everywhere.] 
S: "No, no, tear off the top of the pack!" 
T: "OK, sorry, do you have another pack? No? OK, let's just start with this cigarette. [Picks one up.] 
S: "Put it in your mouth." 
T: [Puts whole cigarette in mouth.] 
S: "No, no, just put the end in your mouth!" 
T: "Sorry." [Tears filter off, puts whole filter in mouth.] 
S: "No, no, don't tear the cigarette, just hold it between your lips!" 
T: "Oh, sorry, give me another one." [Places new cig sideways between lips.] 
```

... 等等。你可以玩很长时间的游戏。即使您知道域，也很难给出明确的指示。编程将持续很长时间。——罗恩杰弗里斯

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-20T07:51:10.290

我有一个朋友可以在几秒钟内完成魔方。

这让我想到了用这种方式向我的经理解释为什么我们的最新项目失败了！

Olivier 在查看 3x3 魔方大约 5 秒后，平均需要 10 秒才能完全分类所有颜色。

如果你让他估计排序需要多长时间，你给他立方体，启动时钟，5秒后他会说：

“好的，只要我开始，我将在 10 秒内完成”

你笑着说：“开始！” 3 秒后，你让他停下来……再给他一个魔方，然后说……排序这个……

在他开始第二个魔方 4 秒后，你认为他需要多长时间才能再次对第一个魔方进行排序？

如果你答对了大约 7 秒，恭喜你：你是高层管理人员！

*（奥利维尔有权强迫你吃方块）*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-20T07:01:14.807

我同意 Simucal 的观点，即当您将问题分解为几个小时而不是编程任务时，经理往往会做得更好。例如，对你的老板说：“这应该需要大约两个小时才能完成，但我还有一些其他事情必须先完成，所以我应该在明天之前把它交给你。” 比说“嗯，首先我必须设计一个接口来在对象之间进行通信，然后创建类来实现接口等等”有用得多。经理们了解他们能看到的东西，所以只要你能根据最终用户的影响来解释你的任务，你就可能会取得更大的成功。

话虽如此，不要让你的经理恐吓你做出你无法兑现的承诺。你可能知道他们想要听到的只是“我会在一天结束时得到它。”但如果你知道它做不到，不要说它可以，希望如果你有它对他们来说，在接下来的几天里，它将“足够接近”。如果您开始考虑设计和测试的时间并给他们适当的估计，最终他们将开始了解完成某些类型的任务需要多长时间，并且不再期望在昨天完成所有事情。

我还注意到，一路走来的切实成果往往会让他们的神经放松（至少暂时）。当我的老板开始对一项任务是否能按时完成感到恐慌时，他就开始要求完成结果。然而，当他能够“看到”一步一步的进展时，他更有可能理解我们实际上正在取得进展，即使它还没有进入成品。

此外，当您开始此过程时，请尝试从他们的角度看待事物，并了解在您可以花费您认为必要的时间之前，您可能必须找到一个快乐的媒介。在我的经验中，我需要开发一个 Cache 对象，虽然我很想花几周的时间来设计和实现一个可以广泛分布在多个应用程序中的可配置和可扩展的 Cache，但我不得不限制自己手头的任务。只要确保如果您决定缩减规模或继续使用短视的设计，请确保它有充分的文档记录，以便您可以在有时间时返回并修复它（或者其他开发人员可以接手你无法完成的思路）。另外，不要牺牲良好的编码标准和风格，

祝你好运！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-20T05:10:43.797

对于非程序员来说，这本书可能是一本好书，可以了解其中一些问题和失控需求的陷阱：

[代码中的梦想：两个十几个程序员，三年，4732个Bug，一个对超越软件的追求](https://rads.stackoverflow.com/amzn/click/com/1400082471)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-20T05:14:11.823

说真的，我认为最好的办法就是告诉他们有些事情很复杂，而且确实需要复杂的问题解决、分析和设计。他们所做的事情与程序员所做的事情之间存在差距，不幸的是他们永远不会理解全部含义。有时你只需要坚定并解释这可能需要很多时间。

也许将任务分解为子任务并给它们估计可能会有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-20T05:26:27.183

确保您也了解他们的问题。人们通常会提出解决方案（“我们需要这个功能”），而不是从根本的业务需求开始。您对问题了解得越多，就越有可能提出妥协建议。

有时有人告诉我，某个大型功能是绝对必要的，但我已经能够部署更简单的解决方案，从而基本上解决了这个问题。有时这些临时解决方案已经发展成为重要的功能，就像我经常能够在两个版本之后删除它们而没有任何人注意到一样。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-20T06:02:47.500

以我的经验，过去每当我开始向销售人员解释为什么一项任务需要一定的时间时，他们很快就会承认他们并不真的想知道技术细节，我对此很好。我通常不希望他们向我解释为什么他们在 n 天后仍然没有敲定那笔大买卖。为了有效地工作，每个人都有自己的职责范围。只需确保您与您为其提供估算的销售人员的关系良好，并且他们相信您有能力进行正确和合理的估算并完成工作。恕我直言，没有必要对每个细节进行解释和推理，但如果有的话，我会说真正的问题出在其他地方。

我完全同意上面的“这取决于”。

# php - 从 PHP 到 JavaScript 的赋值

> ID：460158
> 
> 赞同：0
> 
> 时间：2009-01-20T04:50:20.860
> 
> 标签：php, javascript, jquery, ajax

我正在使用 jQuery、JavaScript 和 PHP。我的`Ajax.php`文件只显示数据。File`test.php`已将值分配给 JavaScript 函数。

我的问题是我无法获取 test.php 分配的值`getList(data)`。

我的逻辑有什么问题吗？我该怎么做才能让 test.php 分配的值显示在`getList()`函数中？

```
$.ajax({
    type: 'POST',
    url: 'ajax.php',
    data: 'id=' + id  ,
    success: function(data){
        $("#response").html(data);
            if(flag != 0){
                flag = 0;
                $.get("test.php", function(data){
                    alert("Data Loaded: " + data);
                    getList(data);
                });
             }
        } //Success
    }); //Ajax 
```

test.php 有以下内容。

```
<?php
    print "<script language='javascript'>";
    print " temp[temp.length]=new Array('STA-VES','East',4500);";
    print " temp[temp.length]=new Array('STA-CRF','West',5400);";
    print "</script>";
?> 
```

我的 JavaScript 函数有：

```
var temp=new Array();
getList(){
    alert(temp.length);
    for(var i=0; i<temp.length; i++){
        var val = temp[i];
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T08:44:29.903

下面的代码会将您需要的值输出到[JSON](http://en.wikipedia.org/wiki/JSON)中，这些值在重构时将类似于您的数组：

```
<?php
    echo json_encode(array(
        array(
            'STA-VES',
            'East',
            4500
        ),
        array(
            'STA-CRF',
            'West',
            5400
        )
    ));
?> 
```

然后，您的 jQuery 代码可以将响应解析回 JavaScript 对象。

```
<?php
    json_encode(array(
        array(
            'STA-VES',
            'East',
            4500
        ),
        array(
            'STA-CRF',
            'West',
            5400
        )
    ));
?>

<script type="text/javascript">
    $.getJSON("test.php", function(json){
        // Access object
        for(var i = 0; i < json.length; i++) {
            alert(json[i][0]);
            alert(json[i][1]);
            alert(json[i][2]);
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T05:05:54.727

```
$.get("test.php", function(data){
    alert("Data Loaded: " + data);
    getList(data);
}); 
```

您是否收到带有以下输出的警报框？

```
 <?php

      print "<script language='javascript'>";
      print " temp[temp.length]=new Array('STA-VES','East',4500);"; 
      print " temp[temp.length]=new Array('STA-CRF','West',5400);"; 
      print "</script>";  

      ?> 
```

请注意，您应该获得 HTML（因为这是您在 PHP 文件中生成的内容。这不是将数据从 PHP 传递到 JavaScript 的方式，除非您在 iframe 中加载此 PHP 以直接操作父窗口语境。

您应该更改 test.php 以返回 JSON。ajax.PHP 到底返回了什么？

# sql-server - 如何在不删除 SQL 2008 中的表的情况下更改列

> ID：460163
> 
> 赞同：50
> 
> 时间：2009-01-20T04:53:48.887
> 
> 标签：sql-server, sql-server-2008, column-types

为什么当我将列类型从say int更改为real时，SQL 2008突然想要删除我的表？据我所知，这在 SQL 2005 中从未发生过。任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-09-07T15:20:06.837

我不敢相信最佳答案已经在这里坐了这么久——这是非常危险的建议！

您可以在不删除表的情况下就地执行一些操作：

*   展开 varchar 列[https://dba.stackexchange.com/questions/5211/sharing-column-width](https://dba.stackexchange.com/questions/5211/changing-column-width)
*   使列可以为空（但反之亦然）
*   [使用sp_rename](http://technet.microsoft.com/de-de/library/ms188351.aspx)重命名列

如果您发现自己处于不删除表就无法更改列的情况，您通常可以使用`SELECT INTO` 查询将数据投影到新表中，然后删除旧表（暂时禁用约束），然后重命名投影表. 但是，在这种情况下，您需要使数据库脱机进行维护。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-11-25T10:49:52.483

Here is what I use:

```
-- Add new column
ALTER TABLE MyTable
ADD Description2 VARCHAR(MAX)
GO

-- Copy data to new column (probably with modifications)
Update MyTable
SET Description2 = Description
GO

-- Drop old column
ALTER TABLE MyTable
DROP COLUMN Description
GO

-- Rename new column to the original column's name.
sp_RENAME 'MyTable.Description2' , 'Description', 'COLUMN'
GO 
```

1.  Copy the data into a new column.
2.  Drop the old column.
3.  Rename the new column to the old column's name.

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2009-01-20T05:21:04.137

在 SQL Server 2008 中，转到工具 >> 选项。在小窗口中，单击“设计器”。取消选中“防止保存需要...的更改”

=====

**于 2015 年 9 月 4 日编辑。**

*很久很久以前，我在这里添加了这个答案，描述了我解决上述问题所描述情况的方式。从那时起，以下线程上的用户就按照我当时推荐的方式做事暴露了一些担忧。基本上，我描述的解决方案在某些情况下可能会出现问题。然后我建议您继续阅读以检查其他用户的评论并为您选择最佳解决方案。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-13T16:35:00.363

我有同样的问题。如果我尝试使用另一个 sa 帐户，虽然我的帐户具有 sa 权限，但它可以工作。看来我的帐户不知何故无法更改。仍在调查，但这是一个权限问题。

更新：

I cannot expain it. but this is what I did. there two domain groups my account belonged to. One was a new AD domain group and the other was an NT legay domain group. Once I removed the legacy domain group I was able to alter the table successfully. Mind you both groups had "sa" priviliges.

The behavior was that the alter commands would result in success, but nothing changed on the table. Then when I manually tried to change the fields through the designer it complained that I was not allowed to make change if it required to drop and recreate the table. I found the setting in tools and I was able to turn that off. But this table is huge and not a good idea to do this. I woud advise others against it.

so it was a permission issue. I can't explain how, but I hope it helps someone else

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-21T10:24:52.903

Another way to this without totally dropping the table is

1.  Take a backup of the column values.
2.  Make the column nullable if it does not already allow nulls. Set the column values to be null by doing

    ```
    update tablename set columnname = null 
    ```

3.  Delete the column
4.  Insert a new column with the same name as the deleted column and the type which you want
5.  Insert the saved data into this column

# php - PHP中的唯一和临时文件名？

> ID：460164
> 
> 赞同：64
> 
> 时间：2009-01-20T04:55:03.283
> 
> 标签：php

我需要将一些文件转换为 PDF，然后将它们附加到电子邮件中。我将 Pear Mail 用于它的电子邮件方面，这很好（大部分 - 仍在解决一些问题），但作为其中的一部分，我需要创建临时文件。现在我可以使用[tempnam()](http://au.php.net/manual/en/function.tempnam.php)函数，但听起来它在文件系统上创建了一个文件，这不是我想要的。

我只想要一个临时文件系统中的名称（使用[sys_get_temp_dir()](http://au.php.net/manual/en/function.sys-get-temp-dir.php)），它不会与运行同一用户多次调用该脚本的同一脚本的其他人发生冲突。

建议？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2009-01-20T05:04:28.100

我过去曾使用 uniqid() 来生成唯一的文件名，但实际上并未创建文件。

```
$filename = uniqid(rand(), true) . '.pdf'; 
```

第一个参数可以是任何你想要的，但我在这里使用了 rand() 让它更加随机。使用设置的前缀，您可以进一步避免与系统中的其他临时文件发生冲突。

```
$filename = uniqid('MyApp', true) . '.pdf'; 
```

从那里，您只需创建文件。如果一切都失败了，把它放在一个while循环中并继续生成它，直到你得到一个可以工作的东西。

```
while (true) {
 $filename = uniqid('MyApp', true) . '.pdf';
 if (!file_exists(sys_get_temp_dir() . $filename)) break;
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-02-18T21:17:57.870

说真的，使用 tempnam()。是的，这会创建文件，但这是一种非常有意的安全措施，旨在防止系统上的另一个进程“窃取”您的文件名并导致您的进程覆盖您不想要的文件。

即，考虑这个序列：

*   您生成一个随机名称。
*   您检查文件系统以确保它不存在。如果是，请重复上一步。
*   另一个邪恶的进程会创建一个文件，该文件的名称与邪恶先生希望您意外覆盖的文件的硬链接相同。
*   您打开文件，认为您正在创建文件，而不是在写入模式下打开现有文件，然后开始写入。
*   你只是覆盖了一些重要的东西。

PHP 的 tempnam() 实际上在后台调用系统的 mkstemp （这适用于 Linux ......用“最佳实践”功能代替其他操作系统），它经历了这样的过程：

*   选择一个文件名
*   在一个目录中创建具有限制性权限的文件，以防止其他人删除它不拥有的文件（这就是粘着位在 /var/tmp 和 /tmp 上所做的）
*   确认创建的文件仍然具有限制性权限。
*   如果上述任何一项失败，请使用其他名称重试。
*   返回创建的文件名。

现在，您可以自己做*所有*这些事情，但是为什么，当“适当的功能”完成创建安全临时文件所需的一切时，并且几乎总是涉及为您创建一个空文件。

例外：

*   您正在一个目录中创建一个临时文件，只有您的进程可以在其中创建/删除文件。
*   创建一个随机生成的临时*目录*，只有您的进程可以在其中创建/删除文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-20T05:48:56.810

您可以使用部分日期和时间来创建唯一的文件名，这样在多次调用时不会重复。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-29T20:44:24.437

最好使用带有用户 ID 的 Unix 时间戳。

```
$filename='file_'.time().'_'.$id.'.jepg'; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-11T14:59:52.607

另一种基于`@Lusid`最大执行时间故障转移的答案的替代方案：

```
// Max exectution time of 10 seconds.
$maxExecTime = time() + 10; 
$isUnique = false;

while (time() !== $maxExecTime) {
    // Unique file name
    $uniqueFileName = uniqid(mt_rand(), true) . '.pdf';
    if (!file_exists(sys_get_temp_dir() . $uniqueFileName)){
        $isUnique = true;
        break;
    }
}

if($isUnique){
    // Save your file with your unique name
}else{
    // Time limit was exceeded without finding a unique name
} 
```

* * *

> **笔记：**
> 
> 我更喜欢使用`mt_rand`而不是`rand`因为第一个函数使用`Mersenne Twister algorithm`并且它比第二个（`LCG`）更快。

* * *

**更多信息：**

*   [http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)
*   [http://php.net/manual/en/function.mt-rand.php](http://php.net/manual/en/function.mt-rand.php)
*   [http://php.net/manual/en/function.time.php](http://php.net/manual/en/function.time.php)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-20T05:04:29.083

考虑使用 uuid 作为文件名。考虑 uniqid 函数。 [http://php.net/uniqid](http://php.net/uniqid)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-03-10T21:01:55.163

我推荐你使用 PHP 函数 [http://www.php.net/tempnam](http://www.php.net/tempnam)

```
$file=tempnam('tmpdownload', 'Ergebnis_'.date(Y.m.d).'_').'.pdf';
echo $file;
/var/www/html/tmpdownload/Ergebnis_20071004_Xbn6PY.pdf 
```

或 [http://www.php.net/tmpfile](http://www.php.net/tmpfile)

```
<?php
$temp = tmpfile();
fwrite($temp, "writing to tempfile");
fseek($temp, 0);
echo fread($temp, 1024);
fclose($temp); // this removes the file
?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-02T10:30:54.250

我的想法是使用递归函数来查看文件名是否存在，如果存在，则迭代到下一个整数：

```
function check_revision($filename, $rev){
    $new_filename = $filename."-".$rev.".csv";
    if(file_exists($new_filename)){
        $new_filename = check_revision($filename, $rev++);
    }
    return $new_filename;
}

$revision = 1;
$filename = "whatever";
$filename = check_revision($filename, $revision); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-01-08T09:12:32.180

```
function gen_filename($dir) {
    if (!@is_dir($dir)) {
        @mkdir($dir, 0777, true);
    }
    $filename = uniqid('MyApp.', true).".pdf";
    if (@is_file($dir."/".$filename)) {
        return $this->gen_filename($dir);
    }
    return $filename;
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-05-20T07:07:59.320

2020 年更新

`hash_file('md5', $file_pathname)`

这样，您将防止重复。

# javascript - 如何使用 javascript (jquery) 将整数值添加到返回字符串的值中？

> ID：460172
> 
> 赞同：94
> 
> 时间：2009-01-20T05:07:05.520
> 
> 标签：javascript, jquery, casting

我有一个简单的 html 块，例如：

```
<span id="replies">8</span> 
```

使用 jquery 我正在尝试将 1 添加到值 (8)。

```
var currentValue = $("#replies").text();
var newValue = currentValue + 1;
$("replies").text(newValue); 
```

发生的事情是它看起来像：

81

然后

811

不是 9，这将是正确的答案。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2009-01-20T05:08:57.467

parseInt() 将强制它为整数类型，或者如果它无法执行转换，则为 NaN（不是数字）。

```
var currentValue = parseInt($("#replies").text(),10); 
```

第二个参数（基数）确保它被解析为十进制数。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2011-05-15T23:09:53.490

Parse int 是您应该在这里使用的工具，但与任何工具一样，它应该正确使用。使用 parseInt 时，应始终使用 radix 参数以确保使用正确的基数

```
var currentValue = parseInt($("#replies").text(),10); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2009-01-20T05:10:08.183

整数被转换为字符串而不是反之亦然。你要：

```
var newValue = parseInt(currentValue) + 1 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-01-22T09:05:46.617

parseInt 在 IE 中对我不起作用。所以我只是在你想要的变量上使用 + 作为整数。

```
var currentValue = $("#replies").text();
var newValue = +currentValue + 1;
$("replies").text(newValue); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-01-21T22:05:11.110

关于 .js 的八进制误解 - 我只是使用了这个......

```
parseInt(parseFloat(nv)) 
```

在使用前导零进行测试后，每次都以正确的表示形式返回。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-11-15T14:08:09.270

增加一个你可以做类似的事情

```
 var newValue = currentValue ++; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-04-21T10:35:50.537

你的代码应该是这样的：

```
<span id="replies">8</span>

var currentValue = $("#replies").text();
var newValue = parseInt(parseFloat(currentValue)) + 1;
$("replies").text(newValue); 
```

[破解 N 技巧](http://rajeevcse04.blogspot.com)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-08-21T13:34:41.033

简单地说，在文本值之前添加一个加号

```
var newValue = +currentValue + 1; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-09T11:13:30.950

```
var month = new Date().getMonth();
var newmon = month + 1;
$('#month').html((newmon < 10 ? '0' : '') + newmon ); 
```

我只是修复了你的月份问题，getMonth 数组从 0 到 11 开始。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-01-22T20:14:39.980

您可以将变量乘以 1 以强制 JavaScript 将变量转换为您的数字，然后将其添加到您的其他值。这是有效的，因为乘法不会像加法那样重载。有人可能会说这不如 parseInt 清楚，但它是一种实现方式，尚未提及。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-03-23T05:41:40.467

您可以使用 parseInt() 方法在 javascript 中将字符串转换为整数

您只需像这样更改代码

```
$("replies").text(parseInt($("replies").text(),10) + 1); 
```

# google-maps - 使用谷歌地图时，将 GPS 坐标映射到屏幕位置的好算法是什么？

> ID：460174
> 
> 赞同：0
> 
> 时间：2009-01-20T05:07:44.957
> 
> 标签：google-maps, gps

我需要一种算法，将 GPS 坐标转换为显示的谷歌地图上的屏幕位置。我认为这很简单——获取显示地图四个角的坐标，找到差异并为屏幕上的像素位置创建比例因子。这是正确的还是我错过了什么。我知道这已经完成了，但我希望我能听到成功实施它或拥有实施它的资源的人的来信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-26T12:30:56.347

基本上你需要横向墨卡托投影的代码（谷歌地图和其他人使用）。这是我使用[Kosmos](http://igorbrejc.net/kosmoshome)软件的 C# 片段：

```
public Point2<int> ConvertMapToViewCoords (Point2<double> mapCoords)
{
    double x = (mapCoords.X - MapPosition.Longitude) / resolution;
    double y = Math.Log (Math.Tan (Math.PI*(0.25 + mapCoords.Y/360)))*u180dPiResolution;

    return new Point2<int> ((int)(x + viewWidthHalf), (int)((y0 - y) + viewHeightHalf));
} 
```

使用的变量：

```
double resolution = 360.0 / (Math.Pow (2, MapPosition.ZoomFactor) * 256);
double u180dPiResolution = 40.7436654315252 * Math.Pow(2, MapPosition.ZoomFactor);
double y0 = Math.Log(Math.Tan(Math.PI * (0.25 + MapPosition.Latitude / 360))) * u180dPiResolution;
float viewWidthHalf = ViewWidth / 2.0f;
float viewHeightHalf = ViewHeight / 2.0f; 
```

ZoomFactor 是 Google 缩放级别（参见[http://laudontech.com/GISBlog/?p=28](http://laudontech.com/GISBlog/?p=28)）。顺便说一句，相同的代码适用于 OpenStreetMap、Yahoo Maps 等，因为它们都使用相同的投影和平铺系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T05:16:37.700

[Google Maps API](http://code.google.com/apis/maps/)可以让你做这样的事情。

这是我使用 API 编写的一些 JS 代码，它们执行类似的操作：

```
var map = new GMap2(document.getElementById("map"));

//...

var location = new GLatLng(37.771008, -122.41175);
map.setCenter(location);

var marker = new GMarker(location);
var overlay_caption = "Our location!";

GEvent.addListener(marker, "click", function() {
  marker.openInfoWindowHtml(overlay_caption);
});

map.addOverlay(marker);
marker.openInfoWindowHtml(overlay_caption); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T11:25:16.823

如果您需要当前谷歌地图实例的纬度/经度位置的像素坐标，您可以使用[fromLatLngToDivPixel()](http://code.google.com/apis/maps/documentation/reference.html#GMap2.fromLatLngToDivPixel)函数。

假设 map 是一个初始化的 GMap2 的实例：

```
var location = new GLatLng(37.771008, -122.41175);
var point = map.fromLatLngToDivPixel(location);

alert("X: " + point.x + ", Y: " + point.y); 
```

根据您的需要，另请参阅[fromLatLngToContainerPixel](http://code.google.com/apis/maps/documentation/reference.html#GMap2.fromLatLngToContainerPixel)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T05:19:18.680

您还可以使用如下 URL 将页面重定向到新地图：

`http://maps.google.com/maps?q=37.771008,+-122.41175+(You+can+insert+your+text+here)&iwloc=A&hl=en`

# bookmarks - 您发现跟踪所有编程信息的最佳方法是什么？

> ID：460178
> 
> 赞同：3
> 
> 时间：2009-01-20T05:10:01.163
> 
> 标签：bookmarks

尽管这个 [问题](https://stackoverflow.com/questions/161114/how-do-you-keep-track-of-temporary-threads-of-conversation-online) 和这个 问题与我要问的问题很接近，但我相信可能会有一个更以开发人员为中心的解决方案[。](https://stackoverflow.com/questions/230789/keeping-track-of-opensource-freeweare-plugins-etc)

所以，所以 - 你用什么来跟踪你每天遇到的所有重要信息，但当时无法阅读。我目前使用 del.icio.us 但我想我会调查 SO 社区，看看我是否遗漏了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-20T05:51:51.983

我肯定会推荐[印象笔记](http://evernote.com/)。我用它来保存代码片段、项目文档、想法、密码，并且使用网页剪辑器，我也将它用作书签管理器。最重要的是，它是免费的，而且它可以在线同步，所以每次我必须格式化我的盒子或其他东西时，我只需将它同步备份就可以了。不能足够推荐这个产品。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-20T05:38:39.670

我也使用 del.icio.us。我有 Firefox 的工具栏，很棒！[编辑：] OneNote 也不错。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T05:32:56.593

[Google Notebook](https://www.google.com/googlenotebook/faq.html)非常适合用于代码片段、编程链接和相关文章。

[![替代文字](https://i.stack.imgur.com/lHjub.png)](https://i.stack.imgur.com/lHjub.png)

它自动保存，被索引并具有搜索功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-20T05:52:52.090

如果这是一个困难的概念，或者我可能不止一次提到的东西，我通常会打印它。然后，当我完成它时，我将它归档。归档通常意味着“将一堆其他文件放在你的右边”。如果那堆超过某个阈值，比如 10 厘米，我将它移到另一堆。\o/

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-20T07:35:21.820

由于谷歌笔记本“关闭”，我切换到[ubernote](http://www.ubernote.com)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-20T05:49:59.350

我喜欢 Microsoft OneNote——简单的 UI，没有保存按钮，内置即时搜索（包括 OCR！），与 Outlook 集成。

我也使用谷歌的笔记本，不幸的[是谷歌不会](http://googlenotebookblog.blogspot.com/2009/01/stopping-development-on-google-notebook.html)再开发它了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-20T05:59:46.320

我把所有的书签都整理得井井有条。我只是在需要时添加更多类别。

[书签 http://glidertools.net/org.png](http://glidertools.net/org.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-20T20:09:47.850

我试过 Evernote 并且非常喜欢它——你可以使用他们的 Web 界面或本地安装的小型应用程序（我觉得更方便）在其中存储各种信息。搜索您的数据非常有效，Evernote 甚至可以找到实际包含在图像中的文本（非常适合挂图等照片）。目前我也在尝试使用 Ubernote ......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-20T05:32:03.613

每次我发现一些似乎比噪音更信号的博客文章时，我都会打印它。我每天花 2 个小时在公共交通工具上阅读，如果我没有打印任何东西，我会阅读一些编程书籍。

[虽然从大量博客（ codinghorror](http://www.codinghorror.com/blog/)、[joelonsoftware](http://www.joelonsoftware.com/)、[debuggable](http://debuggable.com/)等）中阅读所有这些内容非常有帮助，而且**书籍**起到了一定的作用，但事实是你必须挑剔你想要真正跟上的主题如果您想成为“第一个”了解大事的人，请迄今为止并关注许多网站。但是如果新闻很重要，第一个和“其他所有人”之间的差异就像 3 天，所以对于我们大多数人来说真的不值得。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-20T06:08:09.250

我用 Firefox 浏览，所以我使用[Foxmarks](https://addons.mozilla.org/en-US/firefox/addon/2410 "狐狸标记")来组织和同步。我所有计算机上的所有书签（您也可以在网页上访问它们）

我有一个名为“Brain”的特殊文件夹，其中存储了我所有好的代码链接，通常我只存储难以找到的晦涩的小技巧，以及我经常访问的一些好的编程博客/网站。我使用子文件夹等组织它们。

另外，当我遇到一篇文章而没有时间阅读时，我只是[稍后阅读](http://readitlaterlist.com/ "稍后阅读")，然后当我有时间阅读它时，要么将其丢弃，要么将其添加为书签。

此外，我使用 Google Reader 订阅了许多不同的网站。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-20T07:41:49.513

我曾想过为自己建立一个 wiki，但我从未实现过。这就是我通常喜欢的方式来组织我的信息，这样我就可以从我需要的任何地方访问它。

# jquery - 如何让 JQuery DIV 切换更动态？

> ID：460183
> 
> 赞同：0
> 
> 时间：2009-01-20T05:12:29.923
> 
> 标签：jquery, asp.net-mvc

如何使下面的函数更加动态，例如 commentLink 和 commentContainer 在它们之后会有一个 ID，就像这个**commentLink-2289** **commentContainer-2289**因为列表中会有多个一样。

### Javascript

```
$(function() {
    $("#commentLink").click(function() 
   {
        $("#commentContainer").toggle();
        if ($("#commentContainer").is(":visible")) 
        {
            $("#commentContainer").load($(this).attr("href"));
        } else 
        {
             $("#commentContainer").html("Loading..."); //Or just leave it as is...
        }
        return false; //Prevent default action
   });
}); 
```

### html

```
<div id="SystemNews">
 <ul id="dc_news">
   <li>
     <a href="/Home/SystemNews/69" id="commentLink-0">Comments</a>
     <div id='commentContainer-0' style="display:none;">    Loading...</div>
   </div>
   </li>
   </ul> 
</div> 
```

**注意：**请提供一个工作示例，我通过示例学习最好谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T05:51:42.153

试试这个：

```
jQuery(function($){ 
  $("a[id^='commentLink-']").click(function(){
    match = this.id.match(/commentLink-(\d+)/);
    container = $("div#commentContainer-"+match[1])
    container.toggle();
    if (container.is(":visible")) {
        container.load($(this).attr("href"));
    } else {
        container.html("Loading...");
    }
    return false; //Prevent default action
  });
}); 
```

但是，如果您可以发布 html 或指向 html 的链接，这会有所帮助，这样我们就可以看到您正在使用的格式是什么。我不知道你得到的错误是来自我的代码还是你的（因为我的代码只是你的一个模型）。脚本中的错误出现在哪一行？

* * *

**编辑**我的原始代码在 this.id.match 行有一个错误，上面已经修复，现在试试。

* * *

**编辑**：此外，您提供的 HTML 中有一个额外的关闭`</div>`，不确定这是否是拼写错误，但应该将其删除。

点击事件应该包装在 $(document).ready(function(){ ... }); 以便 jquery 可以准确地访问 dom（因为您正在查询`<a>`和`<div>`元素）。我遇到了最后一个`return false;`没有到达的问题，我怀疑它与 is(:visible) 代码有关。if/else 块的预期功能是什么？

# windows - XulRunner：隐藏 xul-window 任务栏按钮

> ID：460195
> 
> 赞同：0
> 
> 时间：2009-01-20T05:26:19.413
> 
> 标签：windows, xulrunner

有什么方法可以隐藏由 window.open 或其他东西打开的 xul 窗口上的任务栏按钮吗？在 Windows 女士。hidechrome 等并不能解决问题 - 这样的窗口仍然存在任务栏按钮

如果没有直接的方法，可能有一些扩展可以用于以编程方式存档这样的目标？

谢谢！非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-29T02:27:16.420

[window.open](https://developer.mozilla.org/En/DOM/Window.open)有`dependent`“功能”字符串。它会创建一个始终位于所有者窗口顶部且不会显示在侧边栏中的窗口。

# javascript - 是否可以从 HTML 元素中“删除”样式？

> ID：460197
> 
> 赞同：0
> 
> 时间：2009-01-20T05:26:37.400
> 
> 标签：javascript, html, css, styles

我想知道是否可以使用 Javascript 或其他方式将元素的样式恢复为“默认”状态。

我需要这样做，因为我将 HTML 插入到第 3 方网页中，并且无法控制它们赋予不同元素的样式。例如，他们可能有：

```
div {
  margin: 10px;
  padding: 5px;
  line-height: 10px;
  font-size: 150%;
  border: 10px solid yellow;
  foo: bar;
} 
```

有没有一种简单的方法可以清除所有样式并将其设置回“默认”设置？甚至有默认样式列表吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T05:36:16.243

似乎有人已经在 SO 上问过这个问题。

[CSS Reset，常用元素的默认样式](https://stackoverflow.com/questions/99643/css-reset-default-styles-for-common-elements)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T05:34:01.567

默认样式由每个浏览器定义，您可以猜到，所有浏览器的样式都略有不同。您可以定义每个样式属性并将其分配给继承！重要：

```
div {
  margin: inherit !important;
  padding: inherit !important;
  line-height: inherit !important;
  font-size: inherit !important;
  border: inherit !important;
  foo: inherit !important;
} 
```

我并不完全肯定这会奏效，所以我会环顾四周并尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T08:44:27.733

如果您可以上传自己的 CSS（或内部样式表），则可以设置元素的 id，这些样式将优先于通用 div{} 样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T17:24:36.530

您始终可以使用所有默认样式规则定义一个 reset 或类似的类，然后使用 JS 将该样式应用于要重置的元素。例如

```
.reset {
  margin: 0 !important;
  color: #000 !important;
  ... etc ...
} 
```

然后是一些 jQuery，例如：

```
$('div').addClass('reset'); 
```

也许会工作...

# flash - 将 Flash 电影导出为可下载的动画 GIF，服务器端

> ID：460206
> 
> 赞同：2
> 
> 时间：2009-01-20T05:33:28.323
> 
> 标签：flash, export, server-side, animated-gif

假设我有一个 Flash 网站，您可以在其中创建头像和一些动作。

有没有办法用服务器端语言将它们保存到动画 GIF 中？（首选php）

我环顾四周，我所拥有的只是使用 Flash 软件本身的方法。有人试过这个吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T10:01:55.597

尝试：

AS3 GIF 动画编码类 0.1 [ by Thibault Imbert ]

[http://www.bytearray.org/?p=93](http://www.bytearray.org/?p=93)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T12:57:52.217

有趣的问题。应该可以将动画的帧作为位图数据发送到服务器并在服务器上组装一个动画 gif。您可能希望动画非常短并且分辨率非常低才能正常工作。

一些起点：

*   [Tinic Uro 有一个如何将 BitmapData 压缩为 PNG 的示例](http://www.kaourantin.net/2005/10/png-encoder-in-as3.html)。
*   [使用 AMFPHP 将 ByteArray 上传到服务器](http://www.sephiroth.it/tutorials/flashPHP/amfphp_bytearray/index.php)
*   [用于生成动画 GIF 的 PHP 类](http://www.phpclasses.org/browse/package/3163.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T22:08:31.263

这完全取决于您在 Flash 中创建头像的方式。巧合的是，我的团队开发了一个类似的演示应用程序。它叫做[FunIcons](http://www.digitalelite.us.com/Pages/DigitalElite/FunIcons.html)，你可以选择一个角色，然后用鼠标在脸上画一条路径来创建动画（按住鼠标按钮这样做），然后点击“保存”按钮，你会使用您刚刚绘制的序列获得动画 gif。

诀窍很简单：服务器端的 PHP 脚本获取构建动画的 GIF 文件序列，并从中构建动画 GIF。这是脚本本身：

```
<?php
    header ("Content-type: image/gif");
    header ("Expires: Mon, 26 Jul 1997 05:00:00 GMT");    // Date in the past
    header ("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); 
    header ("Cache-Control: no-cache, must-revalidate");  // HTTP/1.1
    header ("Pragma: no-cache");                          // HTTP/1.0
    header ("Content-Disposition: attachment; filename=\"funicons.gif\"");

    require_once "GifBuilder/GIFEncoder.class.php";

    $path = "http://" . $_SERVER["HTTP_HOST"] . $_SERVER["PHP_SELF"];
    $i = strrpos($path, "/");
    $path = substr($path, 0, $i+1);

    $images = split(",", $_REQUEST["images"]);
    $prevUrl = "";
    while (list ($key, $val) = each($images))
    {   
        if (substr($val, 0, strlen($path)) == $path) $val = substr($val, strlen($path)); 
        if ($val == $prevUrl)
        {
            $delay[count($delay)-1] += 10;
        } else {
            $frames[] = file_get_contents($val);
            $delay[] = 10;
            $prevUrl = $url;
        }
        @set_time_limit(30);
    }
    $gif = new GIFEncoder ( $frames, $delay, 0, 2, -1, -1, -1, "bin" );
    print($gif->GetAnimation());
?> 
```

# c# - 有人可以解释这个程序的输出吗？

> ID：460208
> 
> 赞同：1
> 
> 时间：2009-01-20T05:34:04.890
> 
> 标签：c#

有人可以解释为什么这个程序输出 0x00000004 吗？

```
class AndAssignment
{
    static void Main()
    {
        int a = 0x0c;
        a &= 0x06;
        Console.WriteLine("0x{0:x8}", a);
    }
}
/*
Output:
0x00000004 

*/ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-20T05:40:43.130

0x0c = 1100 in binary
0x06 = 0110 in binary
& 运算是一个二进制与，如果它在两个操作数中都设置一个位，则将其设置为 1，因此：
0x0c & 0x06 = 1100 & 0110 = 0100 = 0x04
您可以使用 windows 计算器查看如何整数以不同的形式呈现（在您的情况下为十六进制和二进制）。[更多信息](http://en.wikipedia.org/wiki/Hexadecimal)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T06:35:38.883

也许[维基百科上的这篇文章](http://en.wikipedia.org/wiki/Binary_numeral_system#Hexadecimal)可以帮助您理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T06:47:57.690

此外，Windows 计算器在 hex/bin/oct 和十进制值之间的转换方面做得很好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T06:41:11.197

您必须了解从数基转换的基础知识。十进制以 10 为底。二进制以 2 为底。十六进制以 16 为底。

十六进制请看下表：

```
16^0 = 1
16^1 = 16
16^2 = 256
16^3 = 4096 
```

十六进制有以下数字：1、2、3、4、5、6、7、8、9、a、b、c、d、e、f。

所以你有：十六进制的0C，或者只是C。

```
16^0 x c (or 12) = 12 in decimal.
16^1 x 0 = 0 
```

现在将 12 十进制转换为二进制。我只是要向您展示小数的简单加法模式：

```
2^0 = 1
2^1 = 2
2^2 = 4
2^3 = 8
2^4 = 16 
```

所以要以二进制形式生成 12，您需要一组 (2^3) 和一组 (2^2)。因此你有

```
1100. 
```

如果您像使用十六进制一样将其转换为十进制，您将得到 12。

```
0 x 2^0 = 0
0 x 2^1 = 0
1 x 2^2 = 4
2 x 2^3 = 8

total = 12. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T06:42:41.427

Sara，他正在十六进制和二进制之间进行转换。阅读以下内容：
[http ://www.purplemath.com/modules/numbbase.htm](http://www.purplemath.com/modules/numbbase.htm)

C（十六进制）= 12（十进制）1100（二进制）= 12（十进制）

# asp.net-mvc - “模型绑定到列表”的对面

> ID：460211
> 
> 赞同：0
> 
> 时间：2009-01-20T05:36:59.640
> 
> 标签：asp.net-mvc

我想知道人们对与[Phil Haack 的模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)相反的最佳方式的想法。我有一个表单，其中包含几个单独的字段以及使用 JQuery 动态创建的表单字段。这意味着当我查询数据库以获取要编辑的内容时，它将返回一个对象，该对象本身将附加 n 个对象（每个对象都相同）。

我想知道人们会建议什么作为创建表单的“动态”部分的最佳方式，特别是确保为下拉列表选择正确的项目。我有一个模糊的想法，它将涉及查看用户控件，但我正在努力解决如何将它们放在一起。

表格：

```
<form action="/MyItems/Edit" method="post">
   Title: <input type="text" name="Title" value="" /><br />
   Description <input type="text" name="Description" value="" /><br /><br />

   <input type="hidden" name="myItem.Index" value="0" />
   <input id="item[0].Amount" name="item[0].Amount" type="text" value="" />
   <select id="item[0].selectA"><option value="1">1</option>
   <option value="2">2</option><option value="3">3</option></select>
   <select id="item[0].selectB"><option value="1">1</option>
   <option value="2">2</option><option value="3">3</option></select>

   <input type="hidden" name="myItem.Index" value="1" />
   <input id="item[1].Amount" name="item[1].Amount" type="text" value="" />
   <select id="item[1].selectA"><option value="1">1</option>
   <option value="2">2</option><option value="3">3</option></select>
   <select id="item[1].selectB"><option value="1">1</option>
   <option value="2">2</option><option value="3">3</option></select>

   <input type="hidden" name="myItem.Index" value="2" />
   <input id="item[2].Amount" name="item[2].Amount" type="text" value="" />
   <select id="item[2].selectA"><option value="1">1</option>
   <option value="2">2</option><option value="3">3</option></select>
   <select id="item[2].selectB"><option value="1">1</option>
   <option value="2">2</option><option value="3">3</option></select>
</form> 
```

从隐藏输入到第二个选择列表末尾的所有内容都可以重复 n 次。从数据库查询中提取的 DTO 如下所示：

```
public class MyItem
{
    public string Name { get; set; }
    public string Description { get; set; }
    public IEnumerable<SelectItem> SelectItems { get; set; }
} 
```

然后每个`SelectItem`看起来像：

```
public class SelectItem
{
    public int SelectA { get; set; }
    public int SelectA { get; set; }
} 
```

我希望我已经解释过了，提前感谢任何花时间看这个的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T08:55:00.897

将其包装在 UserControl 或您自己的 HtmlHelper 扩展方法中会整理视图，但本质上您想要这样的东西：

```
<%  int idx = 0;
    foreach (SelectItem item in myItem.SelectItems) { %>
<input type="hidden" name="myItem.Index" value="<%= idx %>" />
<input id="item[<%= idx %>].Amount" name="item[<%= idx %>].Amount" type="text" value="" />
<select id="item[<%= idx %>].selectA">
  <option <%= item.selectA == 1 ? "selected" : "" %> value="1">1</option>
  <option <%= item.selectA == 2 ? "selected" : "" %> value="2">2</option>
  <option <%= item.selectA == 3 ? "selected" : "" %> value="3">3</option>
</select>
<select id="item[<%= idx %>].selectB">
  <option <%= item.selectB == 1 ? "selected" : "" %> value="1">1</option>
  <option <%= item.selectB == 2 ? "selected" : "" %> value="2">2</option>
  <option <%= item.selectB == 3 ? "selected" : "" %> value="3">3</option>
</select>
<%  idx++;
    } %> 
```

`form`假设您的 MyItem 实例称为 myItem，将其包含在您的标签中，它应该可以很好地呈现。`option`如果您的值也保存在集合中，则可以将重复的标签包装在另一个循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T10:35:55.443

To complete this I ended up creating a while loop to loop through the form items and then query my data source to hydrate my objects. I have since changed this so that the same code now sits inside a custom modelbinder. Very neat.

# c# - 在列表中间插入一些东西的好方法是什么？

> ID：460223
> 
> 赞同：1
> 
> 时间：2009-01-20T05:44:30.313
> 
> 标签：c#, list, sorting, insert

这大概是一个简单的问题。假设我有一个包含大约 20-50 个条目的小列表。就像是：

```
class Item
{
   int ItemNumber;
   int OrderNumber;
   string Name;
}

stored in something like
List<Item> 
```

这存储在通用列表或数组中，OrderNumber 从 1、2、3、4、....50 开始。为了使事情变得更容易，我们假设 OrderNumber 已经在 List 中的其他地方通过 QuickSort 进行了排序（除非这使事情变得更复杂）。

假设我想将 Item.OrderNumber = 30 移动到 Item.OrderNumber = 20 或类似的位置。当我这样做时，现在需要移动 20 以上的所有内容，以便旧的 20 现在是 21，21 现在是 22，等等，直到我达到 30。它还需要以其他方式进行，所以当 Item.OrderNumber = 30被移动到 Item.OrderNumber = 34 并且一切都必须向下移动。

我正在考虑将列表冒泡几次，但我希望有更好的方法来做到这一点。尽管列表大小很小，但这需要为各种不同的事情做很多事情。

编辑：只是为了让你知道。结果最终必须以某种类型的事务存储在数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T06:21:56.197

它必须是一个`List<T>`吗？如果没有，您可以考虑使用 a`SortedList<TKey, TValue>`或 a `SortedDictionary<TKey, TValue>`。然后，您可以使用 OrderNumber 作为键，让集合完成工作。

或者，`List<T>`您可以使用按订单号进行比较`List<T>.BinarySearch`的适当`IComparer<T>`的 - 您将拥有：

```
int position = list.BinarySearch(newOrder, orderComparer);
list.Insert(position >= 0 ? position : ~position, newOrder); 
```

`IComparer<T>`您可以在整个代码中使用相同的实例，因为它是无状态的。

编辑：此解决方案不会更改任何其他条目的 OrderNumber，如[Robert Wagner's answer](https://stackoverflow.com/questions/460223/whats-a-good-way-to-insert-something-in-the-middle-of-a-list#460347)中所建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T07:24:09.627

如果我理解正确，您正试图将 OrderNumber 保留在对象内（无论出于何种原因），但需要能够向列表中添加一个新对象并让所有其他对象调整它们的 OrderNumber 以使新对象适合。此外，列表中项目的实际顺序（不一定）无关紧要。

这可以通过包装列表并实现您自己的操作来完成（移动/插入/删除函数，它执行以下操作：

**Insert** 循环遍历所有项目并将订单号加一，其中订单号 >= 新项目的订单号 将项目添加到列表

**删除** 删除项目 循环遍历所有项目并将订单号减一，其中订单号 > 已删除项目的订单号

**移动** 移除项目 重新编号项目 插入项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T05:49:57.073

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

public class Class1
{                     
    static void Main()
    {
        var beatles = new LinkedList<string>();

        beatles.AddFirst("John");                        
        LinkedListNode<string> nextBeatles = beatles.AddAfter(beatles.First, "Paul");
        nextBeatles = beatles.AddAfter(nextBeatles, "George");
        beatles.AddAfter(nextBeatles, "Ringo");

        LinkedListNode<string> paulsNode = beatles.NodeAt(1); // middle's index
        LinkedListNode<string> recentHindrance = beatles.AddBefore(paulsNode, "Yoko");
        recentHindrance = beatles.AddBefore(recentHindrance, "Aunt Mimi");
        beatles.AddBefore(recentHindrance, "Father Jim");

        Console.WriteLine("{0}", string.Join("\n", beatles.ToArray()));

        Console.ReadLine();                       
    }
}

public static class Helper
{
    public static LinkedListNode<T> NodeAt<T>(this LinkedList<T> l, int index)
    {
        LinkedListNode<T> x = l.First;

        while ((index--) > 0) x = x.Next;

        return x;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T05:52:04.277

如果您使用双链表，您可以非常便宜地将 OrderNumber = 30 插入 19 之后或 20 之前的位置。然后迭代到小于 30 的 OrderNumber 并将每个订单增加 1。然后对在列表中上移一个项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T06:58:59.757

只需在填充列表后进行排序，然后通过在最后粘贴东西来填充。如果您需要始终对其进行分类，请按照 Skeet 所说的做。

# bazaar - bzr remove 删除具有未提交更改的分支的文件

> ID：460236
> 
> 赞同：0
> 
> 时间：2009-01-20T05:53:38.127
> 
> 标签：bazaar

我必须使用 bzr remove 命令删除我的 bzr 存储库的版本控制文件。

> > > bzr 删除文件名

它删除版本控制文件（从文件系统中）

我不能使用 bzr commit ，（因为该文件已从存储库中删除）

> > > bzr 提交

将所有更改的文件提交到存储库。

即使我的分支中有未提交的更改，我如何单独删除文件？

提交所有未更改的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T06:12:42.800

我不清楚你在问什么。使用 Bazaar 1.6.1 版，我可以做你想做的事。

```
$ mkdir /tmp/wd; cd /tmp/wd
$ bzr init
$ touch foo bar
$ bzr add foo bar
added foo
added bar
$ bzr commit -m Initial
Committing to: /tmp/wd/
added foo
added bar
Committed revision 1.
$ echo 123 > bar
$ bzr rm foo 
deleted foo 
```

现在，我已从`foo`树中删除，但`bar`有未提交的更改。要提交删除，我使用：

```
$ bzr commit foo -m "Deleting foo"
Committing to: /tmp/wd/
deleted foo
Committed revision 2. 
```

修订版 2 没有看到更改为`bar`

```
$ bzr diff -r1..2
=== removed file 'foo' 
```

但工作树确实

```
$ bzr diff
=== modified file 'bar'
--- bar 2009-01-20 06:06:37 +0000
+++ bar 2009-01-20 06:07:07 +0000
@@ -0,0 +1,1 @@
+123 
```

我误解了这些问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T05:21:06.573

您可以使用`bzr commit <target>`仅提交分支中的某些更改。例如，如果您删除的文件名为`testfile.php`，`bzr commit testfile.php`则将仅提交该文件的删除。

这也适用于目录：

`bzr commit testdirectory`

# apache2 - 在 NAT 防火墙后面时，是否可以在 Apache 日志文件中获取远程 IP 地址？

> ID：460241
> 
> 赞同：0
> 
> 时间：2009-01-20T05:56:18.433
> 
> 标签：apache2, firewall, logging, nat

我正在使用 Apache2，Ubuntu 8.10。目前 Apache 正在将网关的 IP 记录为主机 ip，我该怎么做才能让它记录远程客户端的 IP 地址？这是否可能，或者 NAT 路由器是否会永远“丢失”它？

**更新**：它实际上看起来只是在记录网关的 IP 以获取来自网络内的地址，外部请求似乎是用正确的 IP 记录的......看图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-20T06:00:10.327

问题不是 apache，而是您的 NAT/防火墙。当它向 apache 发送请求时，它需要配置为“模拟”（不是正确的术语，但它会做）IP。如何配置取决于问题的答案：您的防火墙是什么？

# javascript - 使用 javascript 与 actionscript 3.0 交互

> ID：460242
> 
> 赞同：1
> 
> 时间：2009-01-20T05:56:32.877
> 
> 标签：javascript, actionscript-3, flash, external

正如标题所说...我正在尝试通过 javascript 与我的 flash 电影的动作脚本进行交互。具体来说，我正在尝试将文本发送到我的 Flash 电影。我遇到了几个有一些演练的网站，但我一生都无法让它们工作。

来自 adobe 网站。 [http://kb.adobe.com/selfservice/viewContent.do?externalId=tn_15683&sliceId=1](http://kb.adobe.com/selfservice/viewContent.do?externalId=tn_15683&sliceId=1)

真正酷的是他们的源文件下载链接已经死了。并遇到另一个帖子：

[http://www.jesuscarrera.info/2009/01/05/communication-between-actionscript-3-and-javascript/](http://www.jesuscarrera.info/2009/01/05/communication-between-actionscript-3-and-javascript/)

下载工作...除了 fla 文件是空白的并且运行 html 页面，您可以接收来自 flash 电影的文本...但是您不能将文本从 html 发送到 flash 电影。

我非常严格地遵循了这些步骤，任何人都可以通过 adobe 网站上的说明看到任何问题吗？如果任何人都可以帮助我，你能发布这个功能的源示例吗？谢谢大家的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T06:26:02.617

您发布的示例使用 ExternalInterface 类从 Flash 到 Javascript 进行通信。您可以使用 ExternalInterface 添加回调，但如果您需要从 DOM (HTML) 触发一个函数，该函数会转到 FLASH。

好的，现在要将值从 Javascript 获取到 Flash，有几个选项。
您可以使用 ExternalInterface 类设置回调函数。[这是来自 Live Docs链接文本](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/external/ExternalInterface.html#addCallback())的示例

如果您需要在没有任何 Flash 交互的情况下从 Javascript 调用 Flash（例如播放视频或其他内容），您将再次使用 ExternalInterface。这是一个 AS3 示例[链接文本](http://blog.topholt.com/2008/03/27/calling-actionscript-3-from-javascript/)

这是回答您问题的 AS2 示例：

```
//AS2
import flash.external.*;
function helloWorld():Void
{
    //Do something
}
ExternalInterface.addCallback("myFunction", helloWorld);

// HTML
<script language="JavaScript">

    flashObject.myFunction();
</ script>
...
<object id="flashObject"...>
    ...
    <embed name="flashObject".../>
</object> 
```

# javascript - JavaScript：当我从 iframe 函数传递数组时，数组失去了他的类型！

> ID：460256
> 
> 赞同：1
> 
> 时间：2009-01-20T06:12:37.807
> 
> 标签：javascript, jquery

我有一个表单中的 iframe。iframe 包含一些我想通过数组实例传递给表单父级的信息。问题： Array 实例失去了它的类型并变成了一个对象！iframe 函数：

```
function getIDS2() { return new Array(); } 
```

父调用代码：

```
alert(top.frames["sup_search"].getIDS2() instanceof Array); 
```

当然，警报的答案是错误的......所以，我可以通过这样做来解决它：

```
var arr = [];
for(var i =0; i < SuppliersIDs.length; i+=1) {
    arr.push(SuppliersIDs[i]);
} 
```

其中 SuppliersIDs 是交付的数组，arr 是新的真实类型数组。但是为什么这不能像我想要的那样工作呢？顺便说一句，有没有办法用 jQuery 访问 iframe 函数？

感谢帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-20T06:25:42.383

因为每个页面都有一个带有自己的“Array”函数的全局上下文，如果一个页面上的代码将一个数组传递给另一个页面上的函数，那么测试“array instanceof Array”将失败。对于 Array 你可以这样做：

```
var arr = top.frames["sup_search"].getIDS2();
var isArray = arr && Object.prototype.toString.call(arr)=="[object Array]"; 
```

感觉很hacky，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T06:58:01.460

@darin 感谢您的回答。你肯定发现了问题实际上我想做一些铸造。我需要像源一样将它作为一个数组来获取。我写了这样的代码：

```
var arr = new Array(SuppliersIDs); 
```

结果是一个对象数组，而不是原始的整数数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T08:05:40.917

我找到了使用 jquery 访问 iframe 函数的方法

```
$(this).contents()[0].defaultView.yourFunc() 
```

# css - jQuery-UI Datepicker CSS 问题

> ID：460263
> 
> 赞同：4
> 
> 时间：2009-01-20T06:23:23.620
> 
> 标签：css, jquery-ui, themes

我有一个带有 jQ​​uery 日期选择器的非常简单的 HTML 页面：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>jQuery Datepicker</title>
    <link rel="stylesheet" href="../App_Themes/Default/ui.datepicker.css" type="text/css"
        media="screen" title="Smoothness" />

    <script src="../Shared/Scripts/jquery-1.2.6.min.js" type="text/javascript"></script>

    <script src="../Shared/Scripts/jquery-ui-1.5.3.min.js" type="text/javascript"></script>

    <script language="javascript" type="text/javascript">
        $(document).ready(PageLoad);

        function PageLoad() {
            $('#textBox').datepicker();
        }
    </script>

</head>
<body>
    <input type="text" id="textBox" />
</body>
</html> 
```

日期选择器本身似乎工作得很好，但我无法应用我的主题。我在这里错过了一些非常愚蠢的东西吗？

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-05-11T21:34:56.583

如果您通过 Google 加载 jQueryUI，请确保 jQueryUI CSS 主题与 jQueryUI 库具有相同的版本。

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>

<script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js' type='text/javascript'></script> 
```

检查上面的代码，都使用1.8.5。但是，如果您为主题加载 1.8 而不是 1.8.5，则数据选择器将不会显示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-20T22:57:51.473

我的问题不在于 CSS 有效性或相对路径……我只是为我的 jQuery-ui 版本引用了错误版本的 CSS 文件。对于所有遇到类似问题的人，请确保为您的 jQuery-ui 脚本下载正确的主题版本。

谢谢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-05-04T08:56:39.637

我遇到了与你相反的问题。其中我忘记在我的头部插入下面的行，而我的日期选择器正在从我的模板中获取 css。将其包含在我的 head 部分后，我可以使用 googleapi 的 css 查看日期时间选择器

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-18T18:41:31.903

让我们试试这个......

```
 function eds_admin_styles() {
          wp_enqueue_style( 'jquery-ui-datepicker-style' , '//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css');
        }
        add_action('admin_print_styles', 'eds_admin_styles');
        function eds_admin_scripts() {
          wp_enqueue_script( 'jquery-ui-datepicker' );
        }
        add_action('admin_enqueue_scripts', 'eds_admin_scripts'); 
```

这里是js

```
 (function($) {
      $('#jquery-datepicker').datepicker();
    }(jQuery)); 
```

# validation - 企业库验证块 - 验证可为空的属性？

> ID：460264
> 
> 赞同：5
> 
> 时间：2009-01-20T06:24:39.357
> 
> 标签：validation, null, enterprise-library

我正在尝试对可空属性（例如 int）进行验证。

例子

```
[RangeValidator(0, RangeBoundaryType.Inclusive, 1, RangeBoundaryType.Inclusive)]
int? Age { get; set; } 
```

但是，如果我设置`Age`为 null 验证失败，因为它不在范围内，我知道我也需要一个`[ValidatorComposition(CompositionType.Or)]`，但我还应该使用什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-06-16T19:29:13.220

虽然`IgnoreNulls`可以添加属性，但`ValidationResults`在返回验证结果时会导致混乱。这是因为验证块隐式地将验证器包装到一个`OrCompositeValidator`- 属性可以是 null 或者它可以是指定范围内的整数。

当验证失败时，顶级验证结果为`OrCompositeValidator`. 要获得实际的`RangeValidator`验证结果，您现在需要深入了解对象的`NestedValidationResults`属性`ValidationResult`。

处理验证结果消息似乎需要做很多工作，所以在我看来，必须有更好的方法。

这就是我所做的。

1.  我创建了一个名为的类`IgnoreNullStringLengthValidator`，它继承自`StringLengthValidator`（在这里你将继承`RangeValidator`）。
2.  创建支持基本构造函数所需的所有构造函数。
3.  覆盖该`DoValidate`方法并检查空值 - 在这里你会写：

    ```
    if (!objectToValidate.HasValue) return; 
    ```

4.  确保您的下一行代码调用`base.DoValidate(...)`。
5.  创建了一个名为的属性类`IgnoreNullStringLengthValidatorAttribute`，它返回新的`IgnoreNullStringLengthValidator`. 在这里，您将创建一个`IgnoreNullRangeValidatorAttribute`类。

生成的验证结果更符合您的预期，因为它不会隐式嵌套您的验证器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-20T06:41:34.410

您可以添加 IgnoreNulls 属性：

```
[IgnoreNulls()]
[RangeValidator(0, RangeBoundaryType.Inclusive, 1, RangeBoundaryType.Inclusive)]
int? Age { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-09T20:04:43.153

是的，但是如果`RangeValidator`原因 a `ValidationResult`，那么由于某种原因，我最终得到了两个`ValidationResults`... 一个正确用于范围验证问题，但是另一个神秘的说：

> 该值不为 null，并且未通过键 Age 的所有验证规则。

这很愚蠢，我不希望`IgnoreNulls`验证器产生验证结果！它真的是用来修改其他的，不是吗？再加上在使用多态性时缺乏真正的验证继承和功能，还有很多其他事情，而且 VAB 属性有很多“小”问题，我发现它无法用于任何琐碎的事情。

# sql - 超标准化的危险？

> ID：460273
> 
> 赞同：3
> 
> 时间：2009-01-20T06:31:09.610
> 
> 标签：sql, database-design, architecture

我和几位同事面临一个对性能有严重影响的架构决策：我们的产品包括一个 UI 驱动的模式构建器，它允许非程序员为 Web 应用程序构建自己的数据类型。目前，它在幕后构建适当的规范化模式，并包含一些复杂的逻辑来更改模式并在管理员更改数据类型时自动迁移遗留数据。

规范化的模式在过去遇到了性能瓶颈，并且已经安排了一次重大的重构。一组开发人员希望将数据类型的每个属性存储在单独的表中，以便对数据类型的更改永远不需要模式更改。（单个属性可以转换为 1:n 关系，例如，只需更改应用程序逻辑。）

由于早期的基准测试表明这将导致巨大的性能损失，因此他们在应用程序代码中构建了一个缓存层，用于维护每种数据类型的非规范化版本。虽然它确实加快了查询速度，但我对应用层将承担的复杂性持怀疑态度，但我希望得到反馈——我是悲观的吗？其他人是否成功部署了此类解决方案？我应该坚持自己的立场，还是将复杂性从“模式修改工具”转移到“模式镜像工具”是一件好事？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-20T06:48:13.553

> 规范化的模式在过去遇到了性能瓶颈，并且已经安排了一次重大的重构。其中一组开发人员希望将数据类型的每个属性存储在单独的表中，以便对数据类型的更改永远不需要模式更改。（单个属性可以转换为 1:n 关系，例如，只需更改应用程序逻辑。）

这对我来说听起来是个坏主意。

1.  它会破坏你的数据库性能。如果您将这些东西存储在一行上，它们将在物理上一起位于磁盘上，并且出于锁定等目的被视为一物。
2.  您编写的查询将需要大量额外的连接，并且会非常痛苦。您最终将编写视图以将其恢复为最初应有的样子。
3.  所描述的场景可能永远不会发生，因此您放慢了应用程序的速度并使其变得复杂而可能没有任何好处，
4.  如果确实发生了，并且您将不得不重新编码和测试一堆应用程序代码，那么在那时进行数据库更改的额外努力是什么？您可以制作子表，通过更新将数据复制到其中，然后从父表中删除列
5.  如果您成功了，将来可能会附加一个不同的应用程序到您的数据库。他们将无法分辨真正的模式是什么，因为该信息由您的应用程序保存。数据库中的模型数据。
6.  如果 (a) 内存无法容纳太多，(b) 扩展到多个应用程序服务器，(c) 有不同的应用程序连接到数据库，应用程序服务器上的缓存可能会变得棘手。您正在解决您自己造成的性能问题。
7.  如果它们都位于子表中，您将无法在多个列上创建索引。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-20T06:55:18.097

您所描述的与我所说的规范化不同。它更像是超抽象——试图找到一些抽象级别，从中可以派生出其他所有东西。就像 javascript 中的“对象”。如果您得出合乎逻辑的结论，则可以使用两张表。每个对象都有一个表，其中有一列用于 ObjectTypeCode 和 ObjectId；另一个带有关联的表，有两个 ObjectId 列，第三个用于唯一性，第四个用于 Value。

我建议你需要重新审视你的领域模型。你描述的那个对我来说听起来很可怕（但不幸的是，非常熟悉）。我有一个为我工作的人，他发明了一张名为“Objects”的桌子。有两个子表，ObjectAttributes 和 ObjectProperties。很难清楚地解释两者之间的区别。这张桌子（幸运的是他）并没有持续多久。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T14:38:19.907

严格来说，不存在“超归一化”这回事。如果将完全规范化的模式重构为另一个等效的完全规范化模式，则它们都被同等规范化。通常所说的“超规范化”实际上是为了追求规范化以外的目标而进行的表格分解。

如果我没看错，我认为这不是您在原始帖子中概述的情况。似乎您的小组正在规范化模式和某种非规范化模式之间进行辩论。

当这由聪明的设计者手动完成时，在某些类型的非规范化设计获得的性能优势与非规范化带来的更新问题之间需要权衡取舍。我希望你做同样事情的产品会自动遭受智能人类模式设计师所遭受的同样困难，然后是一些。

我猜您网站上的真正问题根本不是性能问题。相反，我认为这是让用户随意定义新数据类型的要求与从一组静态信息要求派生的精心设计的数据库获得相同结果的愿望之间的冲突。

在我看来，这两个目标是不可调和的。数据库中的最终数据管理层由您的用户社区完成。他们甚至可能不会在委员会中开会来决定哪些新定义将成为标准，哪些将被丢弃。除非我猜错了，否则架构可能充满了同义数据类型，不同的用户发明了相同的数据类型，但给了它不同的名称。它可能还包含一些同名的数据类型，不同的用户发明了不同的数据类型，但给了它们相同的名称。

每次尝试这样做，都会导致混乱。这种混乱的第一个明显迹象是一个棘手的性能问题，但这只是冰山一角。迟早，您会发现数据库中的数据是非托管数据。而且您会发现，不可能像使用托管数据一样物有所值。

如果我错了，我很想了解证明我错了的例子。这将代表最先进技术的根本性进步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T07:32:53.760

我们亲切的 SO 团队已经解决了这个问题：[Maybe Normalizing Is not Normal](http://www.codinghorror.com/blog/archives/001152.html)。

结论 -

> **正如古老的格言所说，规范化直到它受伤，非规范化直到它起作用**。

# c# - .net 操作的交易

> ID：460278
> 
> 赞同：1
> 
> 时间：2009-01-20T06:37:07.897
> 
> 标签：c#, transactions

我必须在 Windows 应用程序中作为事务执行 3 个操作。这些不是 SQL 操作，否则我会使用 TransactionScope。第一个操作是在数据库中记录一些值，第二个是将电子邮件移动到 pst，第三个是将电子邮件移动到另一个邮箱。如果这些操作失败，我希望其他操作回滚到以前的状态。有什么办法，这个交易可以实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T06:42:52.910

除非您的电子邮件后端支持 DTC，否则您可以使用`TransactionScope`; 请注意，这`TransactionScope`不仅限于 SQL 提供者；一些中间件工具支持它，甚至`TransactionScope`还为 .NET 对象提供了一个基于 - 的对象（不是**任何**对象——只有那些使用库的基类/属性包/等编写的对象）。

就目前而言，您可能必须手动回滚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T06:44:50.737

您可以滚动自己的 ResourceManager 并使用[System.Transactions](http://msdn.microsoft.com/en-us/library/system.transactions.aspx)来帮助您处理事务。

[http://www.codeguru.com/csharp/.net/net_data/sortinganditerating/article.php/c10993__1/](http://www.codeguru.com/csharp/.net/net_data/sortinganditerating/article.php/c10993__1/)

但是，根据复杂性以及您需要它的频率，它可能是一个过于复杂的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T10:50:22.520

如果每个包含的操作都具有适当的事务支持，那么“按书本”进行事务处理很容易，否则尝试以自己的 DIY 方式单独支持（提交/回滚）每个操作将是一场噩梦 :)
正如 Marc 指出的那样，手动操作将是更简单的选择。

# asp.net - 来自 javascript PageMethods 的自定义 C# 数据传输对象

> ID：460280
> 
> 赞同：6
> 
> 时间：2009-01-20T06:40:32.650
> 
> 标签：asp.net, javascript, ajax, json, asp.net-ajax

我创建了一个自定义对象，我想以 JSON 格式将其返回给 javascript 方法。该对象是在 C# 中作为类创建的。

将此对象从 PageMethod（如果您愿意，可以使用 [WebMethod]）返回到 javascript onPageMethodCallback() 函数的最佳方法是什么？我需要能够通过 javascript 访问该对象的属性并根据（可能使用 jQuery）更新 DOM。

谢谢 StackOverflow！:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-21T15:50:12.850

服务器端的 ASP.NET AJAX 将为您处理序列化对象。例如：

```
public class Name
{
  public string FirstName;
  public string LastName;
}

[WebMethod]
public Name GetName()
{
  Name name = new Name();

  name.FirstName = "Dave";
  name.LastName = "Ward";

  return name;
} 
```

然后，您可以使用与 JD 链接的基本相同的方法直接从 jQuery 调用 PageMethod。更具体地说，这是[一篇关于使用 jQuery 调用 PageMethods 的帖子](http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/)。

服务器会将您的返回类型序列化为 JSON，您将能够按预期访问 Name 类的属性。在此示例中，**msg.d.FirstName**和**msg.d.LastName**。

请注意.d。 [这是 3.5 中添加的安全功能](http://encosia.com/2009/02/10/a-breaking-change-between-versions-of-aspnet-ajax/)，在 2.0 中不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-20T08:34:45.303

这是一篇相当广泛的文章，主题是使用带有 jQ​​uery 的 asmx 中的 JSON 序列化 WebMethods。它应该可以解决问题。

[http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/](http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/)

如果您想使用 ASP.NET AJAX 而不是 jQuery 来执行 AJAX 位，那么您应该查看为您创建 javascript 代理的 ScriptManager 和 ServiceReference。它真的很强大，我们在一些相当大的应用程序中成功地使用了它。找到这篇文章：

[http://dotnetslackers.com/articles/ajax/JSON-EnabledWCFServicesInASPNET35.aspx](http://dotnetslackers.com/articles/ajax/JSON-EnabledWCFServicesInASPNET35.aspx)

# c++ - 调用方法时的C++前向声明问题

> ID：460281
> 
> 赞同：5
> 
> 时间：2009-01-20T06:40:43.383
> 
> 标签：c++, compiler-construction, declaration

我有一个我认为与前向声明有关的问题，但也许不是。

以下是相关代码：

啊

```
#ifndef A_H_
#define A_H_

#include "B.h"

class A
{
    private:
        B b;

    public:
        A() : b(*this) {}

        void bar() {}
};

#endif /*A_H_*/ 
```

溴化氢

```
#ifndef B_H_
#define B_H_

#include "A.h"

class A;

class B
{
    private:
        A& a;

    public:
        B(A& a) : a(a) {}

        void foo() { /*a.bar();*/ } //doesn't compile
};

#endif /*B_H_*/ 
```

主文件

```
#include "A.h"

int main()
{
    A a;

    return 0;
} 
```

问题似乎在于 A::bar() 的调用。该程序成功编译，直到我尝试调用此方法，此时我得到两个错误：

> 错误：无效使用不完整类型'struct A'</p>
> 
> 错误：“结构 A”的前向声明</p>

我认为这是因为 A::bar() 尚未定义或声明，因为两个标题相互引用。但是，我转发了声明的 A 类并且不知道我还需要做什么。我是 C++ 新手，所以请原谅我。我在网上其他任何地方都找不到这个问题的答案。一如既往，提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-20T06:50:09.430

你有一个循环引用，所以你需要分开 Bh 试试类似的东西：

乙：

```
#ifndef B_H_
#define B_H_

// don't include A.h here!

class A;

class B
{
   private:
      A& a;

   public:
      B(A& a) : a(a) {}

      void foo();
};

#endif /*B_H_*/ 
```

B.cpp：

```
#include "B.h"
#include "A.h"

void B::foo() { a.bar(); } // now you're ok 
```

编辑：解释为什么需要将其拆分为两个文件：

该类`B`包含对 的引用`A`，它可以是所谓的*不完整*类型。你不能在它上面调用任何函数，因为编译器还不知道到底`A`是什么——它只知道它是某种类。一旦你包含 Ah（在 .cpp 文件中）， then`A`就是一个完整的类型，你可以用它做任何你喜欢的事情。

您不能将整个内容保存在一个头文件中，因为您将获得循环引用。您正在使用包含防护来防止无限循环，但是您得到了您不想要的东西。当你编译 main.cpp 时，看看编译器会得到什么，就像你以前一样：

```
// #include "A.h" ==>
#define A_H_

// #include "B.h" ==>
#define B_H_

// #include "A.h" ==> nothing happens! (since A_H_ is already defined)

class A;

class B {
private:
    A& a;

public:
    B(A& a) : a(a) {}

    void foo() { a.bar(); } // <-- what the heck is A here?
                            //     it's not defined until below
};

class A {
private:
   B b;

public:
   A() : b(*this) {}

   void bar() {}
};

int main() {
    A a;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T07:16:17.647

该行将`#include<file.h>`仅将该行替换为`file.h`. 因此，当计算机尝试编译您`main.cpp`的 . 在你想使用 A::bar() 的地方，它还没有被定义。

```
// result from #include "A.h"

#ifndef A_H_
#define A_H_

// Now, #include "B.h" in A.h will get you the following
#ifndef B_H_
#define B_H_

// here you include "A.h" again, but now it has no effect
// since A_H_ is already defined

class A;

class B
{
    private:
            A& a;
    public:
            B(A& a) : a(a) {}
            // Oops, you want to use a.bar() but it is not defined yet
            void foo() { /*a.bar();*/ } 
};

#endif /*B_H_*/

class A
{
    private:
            B b;
    public:
            A() : b(*this) {}
            void bar() {}
};
#endif /*A_H_*/

// now this is your main function
int main()
{
    A a;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T07:34:47.047

正如其他几个人提到的那样，循环引用似乎是您的问题。另一个短语是“相互依赖”。但是，与其尝试找到正确的语法来编译和运行您的应用程序（我假设实际问题存在于一个比您发布的内容稍微高级的程序中），我鼓励您从一个对象来解决问题 -面向设计的立场。

作为一般规则，应尽可能避免相互依赖。我之前在自己的代码中遇到过这个问题（这导致了几天的调试，扯掉我的头发，诅咒我的编译器），这就是我最终能够克服它的方法。我将提出一个我自己的问题的淡化版本作为如何解决这个问题的具体例子，所以希望你能提取出这一切背后的隐藏含义，最终一切都会变得有意义。

假设我们有两个类：Data 和 DataAnalyzer

Data 持有对 DataAnalyzer 的引用（用于分析数据），而 DataAnalyzer 持有对 Data（要分析的数据）的引用——相互依赖！为了消除这种依赖性，我们从 DataAnalyzer 中提取了一个接口（在 C++ 中，一个纯虚拟类），它定义了 DataAnalyzer 所需的公共方法/属性。它可能看起来像：

```
class IAnalyzer
{
public:
    virtual void Analyze () = 0;
}; 
```

当我们定义 DataAnalyzer 时，我们这样做：

```
class DataAnalyzer : public IAnalyzer
{
public:
    DataAnalyzer (Data* data);

    virtual void Analyze (); // defined in DataAnalyzer.cpp
}; 
```

和数据看起来像：

```
class Data
{
public:
    Data ();

    IAnalyzer* Analyzer;
}; 
```

在某个地方，在你的控制器类中，你可能有类似的东西：

```
void main ()
{
    Data*  data = new Data ();
    data->Analyzer = new DataAnalyzer (data);
} 
```

现在，Data 是独立存在的（据它所知，IAnalyzer 不需要对 Data 的引用），只有 DataAnalyzer 依赖于 Data。如果你想继续下去，你可以继续去掉DataAnalyzer对Data的依赖，但为了简单的打破相互依赖，这应该足够了。

**警告：**我没有编译测试过这段代码，所以它可能需要一些小的调整才能正确编译和运行。

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-20T10:54:55.070

如果你真的希望 B::foo 是内联的，你可以在 Bh 中实现，尽管我不推荐它。

乙：

```
#ifndef B_H_
#define B_H_

// Forward declaration of A.
class A;

class B
{
private:
    A& a;

public:
    B(A& a) : a(a) {}

    void foo();
};

// Include definition of A after definition of B.
#include "A.h"

inline void B::foo()
{
    a.bar();
}

#endif /*B_H_*/ 
```

啊：

```
// Include definition of B before definition of A.
// This must be done before the ifndef A_H_ include sentry,
// otherwise A.h cannot be included without including A.h first.
#include "B.h"

#ifndef A_H_
#define A_H_

class A
{
private:
    B b;

public:
    A() : b(*this) {}

    void bar() {}
};

#endif /*A_H_*/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T06:54:38.173

在 Bh 中，您包括 Ah 以及前向声明 A。

您需要将 Bh 分成 Bh 和 B.cpp，或者删除前向声明。

PS你也有一个循环依赖。Ah 包括 Bh，反之亦然。不过，你的警卫发现了问题；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-20T06:55:40.060

要添加到另一个答案（循环引用，这是正确的答案），如果您来自 C#/Java，请了解 C++ 是不同的，因为文件是按顺序解析的（而不是作为一个整体考虑）。因此，您需要注意确保在使用之前定义所有内容，按照包含文件的实际顺序（和/或根据需要将功能分离到 .cpp 文件中）。

# msdn - Microsoft BizSpark 是否具有完整的 MSDN 优势？

> ID：460283
> 
> 赞同：12
> 
> 时间：2009-01-20T06:41:19.463
> 
> 标签：msdn, bizspark

想知道这里是否还有其他人已经注册了相同的程序并可以给我一些建议。我在一两个月前的某个时候登录了 Microsoft BizSpark 计划，并激活了该计划附带的 MSDN 订阅。

登录 MSDN 门户后，可以访问该站点的订阅者和密钥部分。

我也想订阅 MSDN 杂志，并被指示通过“管理我的订阅”页面上的指定链接登录。找不到上述链接。查看帮助页面，应该有这个 Online Concierge 链接，我可以点击它来获得实时帮助。同样，它应该在“管理我的订阅”页面上，但无处可寻。

通过 BizSpark 程序提供的 MSDN 订阅是否应该被“削弱”（仅部分提供）？此外，我们是否可以像零售 MSDN 订阅一样选择交付光盘而不是仅下载？

编辑：这很奇怪 - 我想知道 MSDN 的人是否阅读 StackOverflow，因为我刚刚登录到我的订阅者下载区域，我在 MSDN 订阅主页的“订阅权益”框下找到了一个新的链接到“MSDN 杂志订阅”。

我填写了申请表并成功提交，不知道现在应该发生什么，因为提交页面没有提供太多细节。手指交叉！=)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-17T16:43:24.510

这是悬崖，@微软

我们调整了 MSDN Premium 以创建 BizSpark 订阅。

我们删除了内部使用许可证和媒体邮件，并减少了技术支持事件。

我们添加了标准（完整）版本的 VSTS，它在任何 MSDN 订阅中都不可用，并且我们为 Windows Server、SQL Server、Biztalk、Sharepoint 和 Systems Center 添加了无限制的生产许可证。

不过，我们并没有故意关掉杂志和礼宾服务。我们正在对此进行检查，如果没有充分的理由将其关闭，我们将予以纠正。

悬崖

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-20T06:47:05.460

IIRC 我不认为它是对 MSDN 的完整订阅，它只是访问 MSDN 订阅者下载 - 我当然没有选择该杂志，也没有获得任何光盘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T15:32:19.717

我专门向 MS 提出了这个问题（通过电子邮件），但还没有得到很好的答案。服务台的人显然不懂英语。当我得到一个好的答案时，我会报告。

编辑

我今天打电话给 MSDN，他们说我只是下载 - 没有物理媒体。

我发现 MSDN 网站有很多错误。我还发现整个网站非常混乱且不直观。（多年来一直如此——即使作为拥有批量许可证的公司的用户）

[http://download.microsoft.com/download/4/d/4/4d41081a-d8d9-407a-9bae-5127e6e931ca/BizSpark%20Startup%20Program%20Guide.pdf](http://download.microsoft.com/download/4/d/4/4d41081a-d8d9-407a-9bae-5127e6e931ca/BizSpark%20Startup%20Program%20Guide.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-29T00:36:36.483

我查看了这两个帐户，以下是它们附带的内容：

# 带有 MSDN Premium 的 Visual Studio Team Suite (VSTS)：

*   订阅者下载和产品密钥 - 下载软件并获取产品密钥。
*   Microsoft E-learning - 利用免费的 Microsoft E-learning 课程来磨练您的技能。
*   MSDN 论坛/托管新闻组 - 在两个工作日内获得专家解答您的技术问题。（仅限英语）
*   支持事件 - 对于最棘手的技术问题，请联系 Microsoft 支持。
*   MSDN 杂志订阅 - 每年注册以随时了解 Microsoft 开发技术和趋势。
*   在线礼宾聊天 - 您是否需要寻找您正在寻找的答案的指导，或非技术问题的帮助？

# 商业火花：

*   订阅者下载和产品密钥
*   支持事件
*   MSDN 杂志订阅

Bizspark 中我唯一真正缺少的是 MSDN 论坛/托管新闻组。微软添加它们确实很有意义，因为 Bizspark 旨在帮助公司起步，而论坛对此非常有用。

# java - 如何在我的 Web 服务器 url 中隐藏 .jsp 扩展名

> ID：460288
> 
> 赞同：19
> 
> 时间：2009-01-20T06:43:59.913
> 
> 标签：java, jsp

我有一个 JSP Web 服务器，所有页面都以 .jsp 扩展名结尾。

如何在不使用非 Java 技巧（例如，apache 重写）的情况下将其隐藏在我的 Web 服务器 url 中？

例如：用户无需输入 http://www.sample.com/search.jsp?xxx，而是[只需](http://www.sample.com/search.jsp?xxx) 输入 [http://www.sample.com/search?xxx](http://www.sample.com/search?xxx)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-20T06:58:27.590

您可以像这样创建一个 servlet 映射：

```
<servlet-mapping>
   <servlet-name>MappingServlet</servlet-name>
   <url-pattern>path/*</url-pattern>
 </servlet-mapping> 
```

必须编辑 url 模式以满足您的需要。您当然需要创建 servlet 以便将 url 映射到实际的 jsp。大多数 MVC 框架都使用这种技术。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-02T09:58:11.813

`web.xml`在您的文件中使用此 servlet 映射。

```
<servlet>   
  <servlet-name>search</servlet-name>
  <jsp-file>/search.jsp</jsp-file>
</servlet>
<servlet-mapping>
  <servlet-name>search</servlet-name>
  <url-pattern>/search</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-20T23:21:17.433

[UrlRewrite](http://tuckey.org/urlrewrite/)是一个很好的灵活的基于 Java 的独立于框架的解决方案。

这比 中的 Servlet 映射要好`web.xml`，因为它的功能太有限，而且比基于 Apache 的解决方案要好，因为它是 Web 应用程序的一部分，因此您不需要将 Apache 放在应用程序服务器前面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-20T07:43:04.410

将 .jsp 映射为 servlet，但使用 <jsp-file> 标记而不是 <url-mapping> 标记。

```
<servlet>
  <servlet-name>myjsp</servlet-name>
  <jsp-file>/myjsp.jsp</jsp-file>
</servlet> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-11T21:11:34.843

If you opt for the Apache rewrite rule, rather than the application server mapping/filter (as I did) you might also want to do more than just look for "^([0-9a-zA-Z]+)$"

You may want to confirm the url is not a directory or a file that does exist if apache is fronting and serving the non-jsp resources. And confirm that the JSP exists, and do a pass thru rather than redirect, and append any possible query string.

```
RewriteCond %{REQUEST_URI} !^/.*\.(jsp)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME}.jsp -f
RewriteRule ^(.+)$ /$1.jsp [PT,QSA,L] 
```

And to make sure that users only see this via /search, not /search.jsp then you want to rewrite the reverse as well

```
RewriteRule ^(.+)\.jsp$ $1 [R=301,QSA,L]
RewriteRule ^(.+)index$ $1 [R=301,QSA,L] 
```

This is a good idea for SEO purposes so that search engines dont ding you for duplicating content at multiple urls.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-12T18:40:05.893

我有一个位于 data/feed.jsp 的 jsp 将它添加到我的 web.xml 意味着我可以在 data/feed ...

```
<servlet>   
  <servlet-name>feed</servlet-name>
  <jsp-file>/data/feed.jsp</jsp-file>
</servlet>
<servlet-mapping>
  <servlet-name>feed</servlet-name>
  <url-pattern>/data/feed</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-20T06:48:06.457

```
RewriteEngine On

RewriteRule ^([0-9a-zA-Z]+)$  $1.jsp 
```

在您的 .htaccess 中应该将所有 URL 重写为 .jsp。因此，正如您所描述的，search.jsp 将只是搜索。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-20T06:50:11.320

我不是 JSP 专家，但我认为您可以在 web.xml 中定义 URL 映射来为您的 servlet 和 jsps 提供别名。

# java - 你如何在 Java 的日历中设置时间并且只设置时间？

> ID：460293
> 
> 赞同：33
> 
> 时间：2009-01-20T06:47:21.730
> 
> 标签：java, date, calendar, hour, minute

有了小时和分钟，有没有比以下更简单或更好的方法将其设置为 Calendar 对象：

```
calendar.set(calendar.get(Calendar.YEAR),
                        calendar.get(Calendar.MONTH),
                        calendar.get(Calendar.DAY_OF_MONTH),
                        hour, minute); 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2009-01-20T06:58:27.277

从[这里](http://www.java2s.com/Code/JavaAPI/java.util/Calendarsetintfieldintvalue.htm)：

```
calendar.set(Calendar.HOUR_OF_DAY, hour);
calendar.set(Calendar.MINUTE, minute); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-20T06:55:05.740

使用[set(int field, int value)](https://docs.oracle.com/javase/9/docs/api/java/util/Calendar.html#set-int-int-)。第一个参数是 HOUR/MINUTE/SECOND 的字段编号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-13T16:09:33.653

在 2018 年，没有人应该再使用该`Calendar`课程了。它早已过时，而且`java.time`现代 Java 日期和时间 API 使用起来更方便。取而代之的是，根据您的确切要求，使用 a`ZonedDateTime`或者可能是`OffsetDateTime`or `LocalDateTime`。无论哪种情况，请以这种方式设置一天中的时间：

```
dateTime = dateTime.with(LocalTime.of(hour, minute)); 
```

**链接**：[Oracle 教程日期时间](https://docs.oracle.com/javase/tutorial/datetime/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-03T11:15:18.663

除了[Xn0vv3r 公认的答案之外](https://stackoverflow.com/a/460312/2359227)，别忘了设置

`calendar.set(Calendar.SECOND, 0);`

# git - Git - 在索引中查找单个文件的 SHA1

> ID：460297
> 
> 赞同：50
> 
> 时间：2009-01-20T06:50:03.473
> 
> 标签：git, sha1

我在“索引”中添加了一个文件：

```
git add myfile.java 
```

我如何找出这个文件的 SHA1？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2014-06-18T10:35:26.320

这是一个老问题，但有一件事需要澄清：

这个问题和下面的答案讨论了一个文件**的 Git 哈希**，它与问题中所问的*“这个文件的 SHA1”***不完全相同。**

 *简而言之：

如果您想**在索引中获取文件的 Git 哈希**- 请参阅 [CB Bailey 的答案](https://stackoverflow.com/questions/460297/git-finding-the-sha1-of-an-individual-file-in-the-index#answer-460422)：

```
git ls-files -s $file 
```

如果您想获取**文件系统上任何文件的 Git 哈希**- 请参阅 [cnu 的答案](https://stackoverflow.com/questions/460297/git-finding-the-sha1-of-an-individual-file-in-the-index#answer-460315)：

```
git hash-object $file 
```

如果您想获取**文件系统上任何文件的 Git 哈希值并且您没有安装 Git**：

```
(echo -ne "blob `wc -c < $file`\0"; cat $file) | sha1sum 
```

（上面显示了 Git 哈希的实际计算方式 - 它不是文件的 sha1 总和，而是字符串**“blob SIZE\0CONTENT”**的 sha1 总和，其中**“blob”**实际上是一个字符串“blob”（它后跟一个空格），**SIZE**是以字节为单位的文件大小（ASCII 十进制），**“\0”**是空字符，**CONTENT**是实际文件的内容）。

如果您只想获得问题中字面意思**的“此文件的 SHA1” ：**

```
sha1sum < $file 
```

如果没有，`sha1sum`您可以使用`shasum -a1`或`openssl dgst -sha1`（输出格式略有不同）。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2009-01-20T08:04:05.617

您希望`-s`选择`git ls-files`. 这为您提供了索引中文件的模式和 sha1 哈希。

```
git ls-files -s myfile.java 
```

请注意，您不需要`git hash-object`，因为这会为您提供当前工作树中文件的 sha1 id，而不是您添加到索引中的文件的 sha1 id。一旦您在`git add`.

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-01-20T07:00:34.370

```
$ git hash-object myfile.java
802992c4220de19a90767f3000a79a31b98d0df7 
```

# c# - 在 C# 中存储查询或在 Postgres 中使用存储函数？

> ID：460300
> 
> 赞同：2
> 
> 时间：2009-01-20T06:50:36.763
> 
> 标签：c#, sql, postgresql

我应该将原始 SQL 查询存储在我的 c# 代码中，还是应该将它们委托给 Postgres 后端中的存储函数？

如果我应该将它们存储在代码中，因为它们可能会变得很长，那么存储它们的最佳方式是什么（即作为单独的静态类中的常量）？

使用存储函数对应用程序的可部署性/可更新性有任何影响吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T13:52:59.920

As a rule we do all of our database interactions via stored procedures instead of direct SQL statements; this allows a lot of flexibility for adjusting to schema changes and performance issues without having to rebuild or redeploy binary images or configuration files to all targets.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T07:25:17.490

我非常喜欢将 SQL 存储在作为资源嵌入到程序集中的文本文件中（当我绝对*必须*拥有大量它们时；我通常是 ORM 人）。

当然，如何格式化该文本文件完全取决于您。你可以有双换行符分隔：

```
UpdateCustomer:
UPDATE CUSTOMER SET NAME=@Name WHERE ID=@ID

FindCustomer:
SELECT NAME, ADDRESS FROM CUSTOMER
WHERE ID=@Id

etc 
```

然后，不难有一个类将其加载到`Dictionary<string,string>`类型初始值设定项中的 a 中，或者甚至`Dictionary<string,SqlStatementHelper>`在后者是一个类的情况下，以便轻松地准备具有适当值的语句。不过，您可以使用您想要的任何其他格式，包括 XML——尽管如果您不需要除了名称/sql 对之外的任何其他格式，那可能就有点过头了。

这样做的缺点是 SQL 和使用它的代码之间的脱节 - 如果不查看文本文件，您无法立即知道参数是什么。另一方面（我只是想马上行动）您可能*可以*使用具有强类型参数的方法从 SQL（和一些元数据）自动生成一个类。

存储过程的好坏参半是它们存在于数据库中而不是您的代码中。这样做的好处是您更有可能使它们与 DDL 更改保持同步。缺点是它们比本地定义的查询更努力地改变（IME，无论如何）。（显然还有很多其他优点和缺点，但我将自己限制在方便的一面。）

As for maintenance - well, I suppose it's possible that you'd have a "database only" update of just tables and stored procs, without any clients having to know at all - in which case the stored procs would be a better move. In my experience (certainly with custom solutions where there are only a couple of applications accessing the database, so compatibility isn't *as* much of an issue) code changes are almost ubiquitous but database changes less so - at which point storing the queries with the application means you're less likely to have to do a database change when you update. Does any of that make sense? I haven't had coffee yet...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T07:33:04.400

Either way! But case by case,

SQL at code level as constant,

*   Value is evaluated at compile time, this optimizes the performance.
*   It is safe, it can not be modified after code compiled or deployed.
*   Some draw back on performance by sending all the SQL text to the sql server over the wire.
*   Some drawback on security if SQL was dynamically created.

SQL at SQL function level

*   More Secure since parameters are typed.
*   Easier to maintain against database schema. e.g. table can not dropped if one function is referencing it.
*   Better performance by just sending through function names and parameters to the SQL server.
*   Easier to apply hotfix at function level since it is not compiled. People can see & modify your code since it exposes as plain text.
*   Some drawback to maintain the versions between application and the sql function.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T11:20:43.317

From the normal deployability/updatability considerations, storing SQL queries in code will limit your options, as source code is less likely to be recompiled when deployed, in comparison with the usual modifications/hotfixes of SQL stored procedures.

Of course it also depends on how big the your "update" would be. This point would be mood if there are significant changes of business logics or a database switch is required

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T14:00:06.693

I think it's better to use stored procedures because of its using gives performance. In case if it's possible.

I mean - queries and source code, local variables, etc are enough 'independent' - it doesn't requires much 'preparation' and you can just send some variables to a stored procedure as parameters.

# asp.net - HttpHandler 101 失败

> ID：460301
> 
> 赞同：4
> 
> 时间：2009-01-20T06:51:04.250
> 
> 标签：asp.net, httphandler

当我添加 HTTP 处理程序时：

```
<add verb="*" path="*test.aspx" type="Handler"/> 
```

与班级：

```
using System;
using System.Web;

public class Handler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";
        context.Response.Write("Hello World");
    }

    public bool IsReusable
    {
        get { return false; }
    }

} 
```

我的 ASP.NET 应用程序因错误“无法加载类型‘处理程序’而死机。” 当我尝试访问[http://localhost:port/mysite/this-is-a-test.aspx](http://localhost:port/mysite/this-is-a-test.aspx)时。

我想这可能是一个命名空间问题，所以我尝试了以下内容，但得到了相同的“无法加载类型'Test.Handler'”。错误。

```
<add verb="*" path="*test.aspx" type="Test.Handler, Test"/> 
```

与班级：

```
using System;
using System.Web;

namespace Test
{

    public class Handler : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            context.Response.ContentType = "text/plain";
            context.Response.Write("Hello World");
        }

        public bool IsReusable
        {
            get { return false; }
        }

    }

} 
```

我知道我对 ASP.NET 越来越生疏了，但我对此一无所知。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-20T07:08:57.367

我猜您正在使用与 Web 应用程序项目相反的网站项目。在这种情况下，您需要将处理程序 (Handler.cs) 的代码隐藏文件放在特殊的 App_Code 文件夹中。标记文件 (Handler.ashx) 可能位于您网站的根目录：

```
<%@ WebHandler Language="C#" Class="Handler" CodeBehind="Handler.cs" %> 
```

然后你可以直接在 web.config 中声明你的处理程序：

```
<add verb="*" path="*test.aspx" type="Handler"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T07:20:57.263

当 Handler 是我的 App_Code 目录中的一个类时，以下对我有用：

```
 <add verb="*" path="*test.aspx" type="Test.Handler,__Code"/> 
```

（我只为像“*.test”这样的整个前缀添加了处理程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T09:07:58.420

默认情况下，asp.net Pagerhandlerfactory 对象将处理所有的 .aspx 资源请求。

# sql-server - Msdtc 交易

> ID：460302
> 
> 赞同：1
> 
> 时间：2009-01-20T06:52:54.277
> 
> 标签：sql-server, msdtc

我正在使用链接服务器进行交易
示例

```
Alter Proc [dbo].[usp_Select_TransferingDatasFromServerCheckingforExample]

@RserverName varchar(100), ----- Server Name  
@RUserid Varchar(100),     ----- server user id
@RPass Varchar(100),       ----- Server Password 
@DbName varchar(100)       ----- Server database    

As
Set nocount on
Set Xact_abort on
Declare @user varchar(100)
Declare @userID varchar(100)
Declare @Db Varchar(100)
Declare @Lserver varchar(100)
Select @Lserver = @@servername
Select @userID = suser_name()
Select @User=user
Exec('if exists(Select 1 From [Master].[' + @user + '].[sysservers] where srvname = ''' + @RserverName + ''') begin Exec sp_droplinkedsrvlogin ''' + @RserverName + ''',''' + @userID + ''' exec sp_dropserver ''' + @RserverName + ''' end ')

Set @RserverName='['+@RserverName+']'

BEGIN TRY
BEGIN TRANSACTION

Declare @ColumnList varchar(max)
Set @ColumnList = null
Select @ColumnList = case when @ColumnList is not null then @ColumnList + ',' + quotename(name) else quotename(name) end from syscolumns where id = object_id('bditm') order by colid
Set identity_insert Bditm on
Exec ('Insert Into Bditm ('+ @ColumnList +') Select * From '+ @RserverName + '.'+ @DbName + '.'+ @user + '.Bditm')
Set identity_insert Bditm off

Commit
Select 1 

End try
Begin catch
If (@@ERROR <> 0)
Begin  
    If @@trancount >0 
    Begin
        Rollback transaction
        Select 0
    END
End 
End Catch

Set @RserverName=replace(replace(@RserverName,'[',''),']','')

Exec sp_droplinkedsrvlogin  @RserverName,@userID
Exec sp_dropserver @RserverName 
```

这是发生的错误：
Microsoft 分布式事务协调器 (MS DTC) 已取消分布式事务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T16:31:10.100

这对你有帮助吗？

[http://blogs.msdn.com/florinlazar/archive/2005/09/16/469064.aspx](http://blogs.msdn.com/florinlazar/archive/2005/09/16/469064.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-01T21:03:15.100

[http://support.microsoft.com/kb/937517](http://support.microsoft.com/kb/937517)

# java - 在 Java 中使用 jexcelapi 将数据写入 Excel 文件

> ID：460304
> 
> 赞同：0
> 
> 时间：2009-01-20T06:53:09.520
> 
> 标签：java, core

我是 Java 初学者，我创建了一个 Excel 文件并使用 jxl API 写入该文件。

但是文件占用 14kB 但在 VC++ 中它会创建 2KB 我不明白这是什么原因，我是否必须使用另一种方式进行编码？请帮我解决问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-02-03T00:18:10.773

你听起来像是在担心一些不重要的事情。文件的大小是否以某种方式受到限制？与许多其他常见文件相比，14k 仍然很小。

Visual C++ 创建更小的文件并不奇怪，因为它和 Excel 是 Microsoft 产品。Jxl 是一个人 Andy Khan 制作的小型开源项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T07:01:35.790

如果您在 Excel 中打开 14kb 文件并保存而不做任何更改，会发生什么情况？它的大小仍然是 14kb 吗？

JExcel [FAQ](http://jexcelapi.sourceforge.net/resources/faq/)说，JExcel 输出的大尺寸可能是由于 JExcel 不对 Excel 文件执行任何优化。

# sql - 数据库触发器是邪恶的吗？

> ID：460316
> 
> 赞同：200
> 
> 时间：2009-01-20T07:01:04.463
> 
> 标签：sql, triggers

数据库触发器是个坏主意吗？

根据我的经验，它们是邪恶的，因为它们会导致令人惊讶的副作用，并且难以调试（尤其是当一个触发器触发另一个触发器时）。通常，开发人员甚至不会考虑查看是否有触发器。

另一方面，如果您有逻辑必须在每次`FOO`在数据库中创建新的时发生，那么放置它的最简单的地方就是 FOO 表上的插入触发器。

我们唯一一次使用触发器是为了非常简单的事情，比如设置`ModifiedDate`.

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2009-01-20T07:22:43.203

触发器的主要问题是

*   它们完全是全球性的——无论表活动的上下文如何，它们都适用；
*   他们是隐形的；很容易忘记它们的存在，直到它们以意想不到的（而且非常神秘的）后果伤害您。

这只是意味着它们需要在适当的情况下谨慎使用；以我的经验，这仅限于关系完整性问题（有时粒度比您可以通过声明获得的粒度更细）；通常不用于商业或交易目的。YMMV。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2009-01-20T07:16:04.857

不，它们实际上是个好主意。如果您的特定触发器有问题，那么您做的不对，但这通常意味着您的实现存在问题，*而不是*触发器本身的概念:-)。

我们大量使用触发器，因为它将特定于 DBMS 的活动置于其所属数据库的控制之下。DBMS 的用户不必担心这类事情。数据的完整性取决于数据库本身，*而不是*使用它的应用程序或用户。如果数据库中没有约束和触发器以及其他功能，则留给应用程序执行规则，并且只需要一个流氓或错误的应用程序/用户来破坏数据。

例如，如果没有触发器，就不会存在自动生成的列之类的奇妙事物，并且在选择它们时您必须在每一行上处理一个函数。这可能会破坏 DBMS 的性能，最好在插入/更新时创建自动生成的列，因为这是它唯一更改的时间。

此外，缺少触发器会阻止在 DBMS 中强制执行数据规则，例如预触发器以确保列具有特定格式。请注意，这与通常只是外键查找的数据完整性规则不同。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2009-01-20T19:19:01.823

工具从不邪恶。这些工具的应用可能是邪恶的。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2009-01-20T09:46:43.570

我同意。触发器的问题在于人，而不是触发器。尽管它需要更多地查看、更多地考虑并增加编码人员正确检查事物的责任，但我们不会丢弃索引以使我们的生活更简单。（坏索引可能和坏触发器一样坏）

触发器的重要性（在我看来）是......
- 任何系统都应该始终处于有效状态
- 强制执行此有效状态的代码应该集中（不是写在每个 SP 中）

从维护的角度来看，触发器对有竞争力的编码人员非常有用，而对于更多初级/业余爱好者来说，触发器是非常有用的。然而，这些人需要以某种方式学习和成长。

我想这取决于你的工作环境。您是否有可靠的人，他们学得很好并且可以相信有条不紊？如果不是，你似乎有两个选择：
- 接受你必须失去功能来补偿
- 接受你需要不同的人或更好的培训和管理

他们听起来很刺耳，我猜他们是。但这是基本事实，在我看来...

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2010-02-03T20:27:11.967

我认为触发器不仅不是邪恶的，而且是良好的数据库设计所必需的。应用程序程序员认为数据库只受其应用程序的影响。他们经常是错的。如果要保持数据完整性，无论数据来自何处，触发器都是必需的，避免它们是愚蠢的，因为一些程序员过于以民族为中心，认为除了他们珍贵的应用程序之外的其他东西可能会影响事物。如果您是一位称职的数据库开发人员，那么设计、测试或排除触发器故障并不难。也很难确定触发器是否会导致意外结果，如果它发生在您身上（就像它发生在我身上一样）看那里。如果我收到一条错误消息，指出我没有在我的 sp 中引用的表有 FK 错误，我想都没想就知道是触发器导致了问题，任何称职的数据库开发人员也应该如此。仅将业务规则放在应用程序中是我发现不良数据的首要原因，因为其他人甚至不知道规则存在并在他们的流程中违反它。以数据为中心的规则属于数据库，触发器是执行更复杂规则的关键。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2009-01-20T10:15:16.617

大多数情况下，是的。

触发器的困难在于它会“在你背后”做一些事情。维护应用程序的开发人员很容易没有意识到它的存在，并且在没有注意到的情况下进行了更改，从而搞砸了事情。

它创造了一层复杂性，只会增加维护工作。

除了使用触发器，存储过程/例程通常可以做同样的事情，但是以一种清晰且可维护的方式 - 调用存储例程意味着开发人员可以查看其源代码并准确了解正在发生的事情。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2009-01-20T10:35:49.477

触发器非常强大和有用，在许多情况下触发器是问题的最佳解决方案。

它们也是一个非常好的“hack”工具。在某些情况下，您无法立即控制代码和数据库。如果您必须等待 2 个月的代码的下一个主要版本，但您可以立即将补丁应用到您的数据库，那么您可以在表上放置一个触发器以执行一些额外的功能。然后，当可以发布代码时，如果需要，您可以用相同功能的编码版本替换此触发器。

归根结底，如果您不知道它在做什么，那么一切都是“邪恶的”。决定触发器是因为有些开发人员不了解它们，这与认为汽车是邪恶的，因为有些人不会开车是一样的……

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2009-01-20T11:32:32.810

触发器有它们的用途 - 记录/审计和维护“最后修改”日期是两个非常好的用途，在之前的回复中已经提到过。

然而，好的设计的核心原则之一是业务规则/业务逻辑/无论你想怎么称呼它都应该集中在一个地方。将一些逻辑放在数据库中（通过触发器或存储过程）和一些放在应用程序中违反了该原则。在这两个地方重复逻辑更糟糕，因为它们总是会彼此不同步。

还有已经提到的“最小意外原则”问题。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2011-11-30T13:59:25.453

概括地说，触发器有两个用例1

1）让事情“自动”发生。在这种情况下，触发器会产生副作用，它们会以不期望的方式更改数据，因为（原始）运算符插入、更新或删除已执行并导致触发器触发。

这里的普遍共识是触发器确实是有害的。因为它们改变了众所周知的 INSERT、UPDATE 或 DELETE 语句的语义。更改这三个原始 SQL 操作符的语义会影响其他开发人员，他们以后需要处理您的数据库表，当使用 SQL 原语对它们进行操作时，这些表不再以预期的方式运行。

2) 执行数据完整性规则，除了我们可以声明式处理的规则（使用 CHECK、PRIMARY KEY、UNIQUE KEY 和 FOREIGN KEY）。在这个用例中，所有触发器所做的都是查询（SELECT）数据，以验证是否允许 INSERT/UPDATE/DELETE 所做的更改。就像声明性约束对我们所做的一样。只有在这种情况下，我们（开发人员）才对执行进行了编程。

为后一个用例使用触发器是无害的。

我在写博客：http: [//harmfultriggers.blogspot.com](http://harmfultriggers.blogspot.com)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2009-03-03T15:55:51.757

如果使用得当，触发器是一个很好的工具。特别是对于审计更改、填充汇总表等。

现在，如果您以一个触发器启动其他触发器而最终陷入“触发器地狱”，那么它们可能是“邪恶的”。我曾经在一个 COTS 产品上工作过，他们有所谓的“弹性触发器”。*这些触发器存储在一个表中，因为每次*执行它们时都会编译动态 sql 字符串。编译的触发器会进行查找，看看该表是否有任何弹性触发器要运行，然后编译并运行“弹性”触发器。从理论上讲，这听起来是一个非常酷的想法，因为该产品很容易定制，但现实是数据库由于它必须做的所有编译而几乎爆炸......

所以，是的，如果你能正确看待你正在做的事情，它们会很棒。如果它是非常简单的事情，比如审计、总结、自动排序等，那就没有问题了。请记住表的增长率以及触发器将如何影响性能。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2009-01-20T10:22:51.297

我知道那些认为触发器应该始终用于实现他们想要的功能的最直接方式的开发人员，以及永远不会使用触发器的开发人员。这几乎就像两个阵营之间的教条。

但是，我个人完全同意 MarkR - 您可以（几乎）始终编写功能上等同于触发器的代码，这将更加明显，因此更易于维护。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2009-01-20T10:28:15.140

不邪恶。他们实际上简化了诸如

1.记录/审计记录甚至数据库模式的更改

您可以在 ALTER TABLE 上有一个触发器来回滚生产环境中的更改。这应该可以防止任何意外的表修改。

* * *

2.在多个数据库中执行引用完整性（主/外键关系等）

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2009-01-20T10:57:44.207

说他们是邪恶的有点夸张，但他们可能会导致网格。当一个触发器的触发导致其他触发器触发时，它变得非常复杂。假设他们很麻烦： [http ://www.oracle.com/technology/oramag/oracle/08-sep/o58asktom.html](http://www.oracle.com/technology/oramag/oracle/08-sep/o58asktom.html "Oracle 和触发器")

由于多并发问题，在 Oracle 中使用触发器执行业务逻辑比看起来更难。在其他会话提交之前，您不会在其他会话中看到更改。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2010-04-29T06:51:26.360

他们绝对不是邪恶的。我发现在重构数据库模式、重命名列或将列拆分为两列或反之亦然（例如：姓名/姓氏大小写）并协助转换时，触发器很重要。

它们对于审计也非常有用。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2011-04-24T12:36:17.327

这个答案特别适用于 SQL Server。（虽然它也可能适用于我不知道的其他 RDBMS。我宁愿在[这里](https://stackoverflow.com/questions/3048340/when-are-database-triggers-bad)给出它作为答案，但由于这个问题而被关闭。）

到目前为止，任何答案中都没有提到一个方面是安全性。因为，默认情况下，触发器在执行导致触发器触发的语句的用户的上下文中执行，这可能会导致安全威胁，除非所有触发器都经过审查。

BOL 中“[管理触发器安全](http://msdn.microsoft.com/en-us/library/ms191134.aspx)”标题下给出的示例是用户创建包含代码的触发器`GRANT CONTROL SERVER TO JohnDoe ;`以升级他们自己的权限。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2009-01-20T07:03:51.323

如果有副作用，那是设计问题。在某些数据库系统中，没有其他可能设置自动增量字段，即为主键 ID 字段。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2009-01-20T10:40:21.090

我认为它们可能是邪恶的，但只能与开发中的其他任何东西一样邪恶。

尽管我对它们并没有太多经验，但我确实在我最近参与的一个项目中拥有它们，这使我得出了这个结论。我对它们的问题是它们可能导致业务逻辑最终出现在两个位置，一个代码库**和**一个数据库。

我认为它与使用存储过程类似。您通常会有非常擅长将业务逻辑写入数据库的 SQL 的开发人员，而不擅长的开发人员则将他们的业务逻辑放在其他地方。

所以我的经验法则是看看你的项目的结构是什么。如果将业务逻辑存储在数据库中似乎可行，那么拥有触发器可能会很有用。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2009-01-20T10:44:24.653

不，他们不是邪恶的——他们只是被误解了:-D

触发器有一个有效的用途，但往往作为一种复古黑客，最终使事情变得更糟。

如果您将数据库作为应用程序的一部分开发，则逻辑应始终在进行调用的代码或存储过程中。触发器只会在以后导致调试痛苦。

如果您了解锁定、死锁以及 DB 如何访问磁盘上的文件，那么以正确的方式使用触发器（例如审计或归档直接 DB 访问）会非常有价值。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-01-20T07:23:41.640

事实上，触发器经常被滥用。实际上，在大多数情况下，您甚至不需要它们。但这并不意味着它们一定是坏的。

我想到的一个触发器很有用的场景是，当您有一个遗留应用程序时，您没有源代码并且无法更改它。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2010-02-16T18:59:36.907

触发器的想法不是邪恶的，限制触发器的嵌套是邪恶的。

# php - 来自 PHP 的 JSON 对象值

> ID：460322
> 
> 赞同：2
> 
> 时间：2009-01-20T07:05:54.877
> 
> 标签：php, javascript, ajax, json

我在 PHP 中使用 JSON，现在我需要从 JavaScript 访问它。如何将 JSON 对象传递给 JavaScript？

```
<?php
    $array = array("a"=>"Caucho", "b"=>"Resin", "c"=>"Quercus");
    $json = json_encode($array);
> 
```

My.js 有：

```
showAll(){
    alert("Show All Json Objects");
    // How do I get the JSON value here?
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T12:13:03.663

假设您使用 Ajax 作为下载 JSON 的方法，您将回显 json_encode 的结果：

```
<?php
    $array = array("a"=>"Caucho", "b"=>"Resin", "c"=>"Quercus");

    echo json_encode($array);
?> 
```

然后在您的回调事件中，您将评估响应：

```
var obj = eval('(' + req.ResponseText + ')');
for(var i in obj) {
    alert(i + ': ' + obj[i]);
} 
```

假设您有一个名为 的[XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)对象`req`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-02-19T10:29:44.070

```
<?php
$array = array("a"=>"Caucho", "b"=>"Resin", "c"=>"Quercus");
$json = json_encode($array);
?>
<script type="text/javascript">
var myjson = <?php echo $json; ?>;
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T07:21:40.337

您可以使用 AJAX 请求 JSON 数据，也可以将数据从 PHP 传递到 JavaScript 作为 JavaScript 变量：

```
$array = array("a"=>"Caucho", "b"=>"Resin", "c"=>"Quercus");
$json = json_encode($array);

echo '<script type="text/javascript">';
echo 'var myJson = "' . $json . '";';
echo '</script>'; 
```

编辑：你必须评估json字符串，否则你只会有一个字符串而不是一个对象......

记住所有关于混合 PHP/HTML/JavaScript 的指导方针...

# sharepoint - 与“将数据提供给”Webpart 连接兼容的 Webparts

> ID：460324
> 
> 赞同：1
> 
> 时间：2009-01-20T07:07:52.237
> 
> 标签：sharepoint, moss, web-parts

我正在使用开箱即用的列表查看器 Web 部件来显示列表并向其他 Web 部件提供数据。我看到在 webpart 连接菜单中，有一个名为“将数据提供给”的选项，该选项始终显示为灰色。是否有任何开箱即用的 Web 部件与这种连接兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T23:36:53.753

MS 说“支持 Web 部件连接的 Web 部件包括列表视图 Web 部件、表单 Web 部件和图像 Web 部件。”：

[http://office.microsoft.com/en-us/sharepointserver/HA100241051033.aspx](http://office.microsoft.com/en-us/sharepointserver/HA100241051033.aspx)

因此，我将表单部分添加到我的测试环境中，因为列表和图像已经存在。果然，他们都没有“提供数据”。MOSS 2k3 中的 PivotView 部分确实具有该选项，但在 2k7 中已将其删除。Joel Oleson 有一个很好的概述：

[http://blogs.msdn.com/joelo/archive/2007/01/05/what-happened-to-the-office-web-components.aspx](http://blogs.msdn.com/joelo/archive/2007/01/05/what-happened-to-the-office-web-components.aspx)

# perl - Perl 有哪些绘图包/API？

> ID：460325
> 
> 赞同：11
> 
> 时间：2009-01-20T07:08:26.337
> 
> 标签：perl, charts, graphing

我正在对不同语言的在线图形包进行一些研究，并想知道当前有哪些适用于 Perl 的最新图形包值得研究

所需的最低功能应包括 Google 通过[其 API提供的功能](http://code.google.com/apis/chart/)

推荐的包/API的主要好处的简要概要将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-20T09:01:11.040

我最近一直在搞乱[Chart::Clicker](http://gphat.github.com/chart-clicker/)。那些半透明的面积图确实对他们有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-20T16:23:58.867

您可能会发现这个类似问题的答案很有帮助[How do I create graphs in Perl on Windows?](https://stackoverflow.com/questions/64537/how-do-i-create-graphs-in-perl-on-windows)

如果它是基于网络的，那么我确实喜欢使用基于 Flash 的图表。我用过[Chart::OFC](http://search.cpan.org/dist/Chart-OFC/)并且强烈推荐它。但是请注意，有一个[Open Flash Chart 2](http://teethgrinder.co.uk/open-flash-chart-2/)正在运行，一个互惠模块[Chart::OFC2](http://search.cpan.org/dist/Chart-OFC2/)已经进入 CPAN。

要获得良好的商业 Flash 图表，请查看[FusionCharts](http://www.fusioncharts.com/)。我目前正在自己​​测试它，它看起来确实不错。

对于非 Flash 商业替代品，请查看[ChartDirector](http://www.advsofteng.com/)。我已经在与我合作过的几家公司中与其他 Perl/Python 程序员一起成功地使用了它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-20T08:41:36.523

对于 Perl 中的绘图，我使用了[GD](http://search.cpan.org/dist/GD/)和[GD::Graph](http://search.cpan.org/dist/GDGraph/)模块。GD::Graph 可以制作简单的条形图、折线图和饼图，并输出多种图形格式，包括PNG。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-20T09:14:47.143

我支持 Chart::Clicker 的建议。这无疑是最好的纯 Perl 图表模块。

顺便说一句，我将您的标签编辑为“图表”而不是“图形”。在计算机世界中，图形是具有边和节点的东西，图表是漂亮的图片。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-22T15:58:28.327

它不是开源的（或免费的），但请查看[Chart Director](http://www.advsofteng.com/download.html) - 他们可以免费下载（没有时间限制），它是跨平台的（Windows/Linux/Solaris/FreeBSD/Mac），而且图表看起来比我的要好'在 CPAN 上见过。

许可证只需 99 美元。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-08T17:31:42.537

我的建议 PDL::Graphics::PLplot PDL

# ruby - Ruby 有哪些绘图包/API？

> ID：460329
> 
> 赞同：10
> 
> 时间：2009-01-20T07:09:58.847
> 
> 标签：ruby, graph

**类似：** [Perl 有哪些图形包/API？](https://stackoverflow.com/questions/460325/what-graphing-packages-apis-exist-for-perl)

我正在对不同语言的在线图形包进行一些研究，并想知道有哪些适用于 Ruby 的当前、最新的图形包值得研究。

所需的最低功能应包括 Google 通过[其 API](http://code.google.com/apis/chart/)提供的功能。

我们将不胜感激推荐的包/API 的主要优点的简要概要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T09:51:06.040

在时间允许的情况下，我将以下内容添加为调查书签：

**基于闪存**

我还没有尝试过任何这些，但如果你想要活泼的动画，它们看起来都很有希望：

*   [图表](http://www.amcharts.com/)
*   [融合图表](http://www.fusioncharts.com/free/Default.asp?gMenuItemId=1)
*   [打开 Flash 图表](http://teethgrinder.co.uk/open-flash-chart/download.php)
*   [子牙宝石](http://ziya.liquidrail.com/)

**[谷歌图表](http://code.google.com/apis/chart/)**

两种宝石都在进行中。我在一些简单的情况下都尝试过，两者都工作得很好，尽管我认为 DSL 风格的替代方案会是赢家。（注意自我）。

*   [谷歌图表宝石](http://googlecharts.rubyforge.org/)
*   [gchartrb 宝石](http://code.google.com/p/gchartrb/)

**基于[RMagick](http://rmagick.rubyforge.org/)**

我是基于 Windows 的，这对于 RMagick 安装来说似乎是一件坏事。我让它工作了——短暂地——然后它停止了。在那段时间里，我设法尝试了 gruff，效果很好。但是图书馆对我脾气暴躁的人来说太麻烦了！

*   [粗暴的宝石](http://rubyforge.org/projects/gruff/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-04-14T12:36:10.123

[RubyVis](http://rubyvis.rubyforge.org/)

Protovis 库的 Ruby 端口根据 protovis 站点

Protovis 使用条形和点等简单标记组成自定义数据视图。与快速变得乏味的可视化低级图形库不同，Protovis 通过对数据进行编码的动态属性定义标记，允许继承、缩放和布局以简化构造。作为 Protovis，Rubyvis 是免费和开源的，在 BSD 许可证下提供。它原生提供 SVG，可以导出为 PNG、JPEG 和其他图形格式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T07:41:58.780

[rgplot](http://rubyforge.org/projects/rgplot/)是一个红宝石[gnuplot](http://en.wikipedia.org/wiki/Gnuplot)宝石。它支持 ruby​​ 的 gnuplot 可视化。我是 gnuplot 的长期粉丝，所以我有偏见 - gnuplot 提供了一种简单的脚本方法来创建图形。我还发现了一个叫做[rmagick](http://rmagick.rubyforge.org/)的东西，看起来很整洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T10:07:35.943

您还有[ruby​​-gd](http://rubyforge.org/projects/ruby-gd/)，用于 gd2 的绑定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T08:21:15.223

我非常喜欢扩展 Ruby 矢量图形 ( [http://xrvg.rubyforge.org/](http://xrvg.rubyforge.org/) )

# php - 用于存储大量数据的 PHP 会话？

> ID：460330
> 
> 赞同：1
> 
> 时间：2009-01-20T07:11:50.307
> 
> 标签：php, session

我正在开发一个媒体书签站点，并且正在寻找一种方法来记住用户是否已将某个项目添加为书签（无需在每个页面加载时都去数据库进行检查）。

我以前没有使用过 PHP 会话，但我认为他们会做到这一点。

当用户登录时进行初始数据库调用，获取用户已添加书签的所有项目并将所有项目 ID 的数组保存到用户会话中是否有意义？

然后，当页面加载时，对于页面上的 100 个项目中的每一个，它都会检查该项目的 ID 是否在会话数组中（因此我们知道是否显示“书签”按钮或他们已经为它添加书签的指示符）。

只是想确保这是一个正确的策略，或者是否有更好的方法。即使数组中有 10,000 个 ID，这也能正常工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-20T08:21:31.727

你也可以看看 Memcached 扩展——它使用服务器的内存作为数据存储。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-20T07:34:45.113

请记住，提高会话管理的健壮性和速度的常见 PHP 策略是将会话数据存储在数据库中。你似乎正朝着相反的方向前进。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T07:29:23.800

我建议您查看数据库而不是将这些数据存储到会话中。如果您在那里有大量信息，那么您将在高负载站点上非常快地阻塞内存。只是做一些缓存，你应该没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-20T09:19:54.043

在会话中存储数据也意味着数据将在大约 15 分钟后丢失（默认值，但可能会有所不同）。

恕我直言，您应该将数据保存到数据库中，然后为后续读取使用一些缓存（即，如@Mark Tyler 所说，memcache）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-21T00:18:26.600

不要高估每次页面加载对数据库的破坏程度。您会发现很多（很多）PHP 应用程序可以执行您所说的操作。许多应用程序从数据库中提取页面的各个部分，获取用户数据、论坛数据、新闻等，因此单个页面加载可能会运行约 30 个查询。

在 cookie 中存储一个唯一的 ID，并将您想要存储的会话信息以一种智能的方式存储在数据库中。

你可能想得太远了。这里的一个好方法是以合理的方式（即服务器端）构建您需要的功能，监控您的系统资源（数据库负载，Web 服务器负载），然后如果您*发现*问题，重构以解决它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-20T08:14:20.790

好吧，如果你想做一些荒谬的事情，你可以使用 Javascript 将所有数据存储在客户端浏览器上，在页面更改后仍然存在的某个对象中。我不推荐它，因为它让你很头疼，但我认为所有奇怪的 AJAX-y 解决方案都在那里，它可能很有趣 :-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-20T14:30:55.303

我建议使用 ADODB for php。[它内置了查询缓存和 sql 注入保护等。您可以在http://phplens.com/lens/adodb/docs-adodb.htm#caching](http://phplens.com/lens/adodb/docs-adodb.htm#caching)阅读有关缓存功能的更多信息

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-20T15:08:37.397

这里最好的解决方案是在您的数据库中有一个收藏夹/书签表，让它包含 user_id 和 item_id 并添加一个连接到您的项目检索逻辑。

然后你不需要运行额外的 SQL 命令，也不需要在 session 中存储任何东西，你只需要检查这些收藏列是否存在。

# git - Git - 从 SHA1 中查找文件名

> ID：460331
> 
> 赞同：45
> 
> 时间：2009-01-20T07:12:20.027
> 
> 标签：git, sha1

我在索引中添加了一个文件：

```
git add somefile.txt 
```

然后我得到了这个文件的 SHA1：

```
git hash-object somefile.txt 
```

我现在有一个 SHA1，我想使用 SHA1 检索索引中对象的文件名。

```
git show 5a5bf28dcd7944991944cc5076c7525439830122 
```

此命令返回文件内容，但不返回文件名。

如何从 SHA1 获取完整的文件名和路径？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-01-20T07:59:54.877

git 中没有这样的直接映射，因为文件名是包含文件的树对象的一部分，而不是作为文件内容的 blob 对象的一部分。

想要从 SHA1 哈希中检索文件名不是通常的操作，所以也许您可以扩展它的实际用例？

如果您正在查看当前文件（即 HEAD 提交），您可以尝试以下操作。

```
git ls-tree -r HEAD | grep <SHA1> 
```

如果你想在以前的提交中找到内容，你需要做更多类似的事情。

```
git rev-list <commit-list> | \
xargs -n1 -iX sh -c "git ls-tree -r X | grep <SHA1> && echo X" 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-05-23T21:30:31.863

伟大的单线做到这一点：

```
git rev-list --objects --all | grep <blob sha1> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-20T08:01:42.767

下面的 shell 脚本很大程度上基于[哪个提交有这个 blob？](https://stackoverflow.com/questions/223678/git-which-commit-has-this-blob)以及 Aristotle Pagaltzis 提供的答案。

```
#!/bin/sh

obj_hash=$1

# go over all trees
git log --pretty=format:'%T %h %s' \
| while read tree commit subject ; do
     git ls-tree -r $tree | grep  "$obj_hash" \
     | while read a b hash filename ; do
        if [ "$hash" == "$obj_hash" ]; then
          f=$filename
          echo $f
          break
        fi
        if $f ; then break; fi
      done
      if $f; then break; fi
done 
```

我确信有人可以美化这个脚本，但它确实有效。这个想法是查看所有提交的树并搜索您的特定哈希。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-11-18T20:58:08.950

`git rev-list <commit-list>`不会包括任何提交，例如被删除`rebase -i`，现在仅由 reflog 引用，因此如果上面的命令未找到 blob，您还应该检查 reflog，例如：

```
git reflog --all | \
cut -d\  -f1 | \
xargs -n1 -iX sh -c "git ls-tree -r X | grep <BLOB_SHA> && echo X" 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-01-20T07:54:23.187

提交文件并记下提交对象的 sha1 哈希。之后使用

```
git ls-tree <commit-sha1> 
```

您将获得带有哈希的文件的名称。

查看手册页以获取更多选项。

# asp.net - 生产服务器中 .net 应用程序的硬件要求

> ID：460337
> 
> 赞同：0
> 
> 时间：2009-01-20T07:18:09.470
> 
> 标签：asp.net, sql-server, hardware, server-hardware

我已经使用 SQL Server 2005 开发了我的 ASP.net 应用程序，它作为 .net Framework 2.0 的安装版本。

请有人建议在生产服务器中托管的硬件要求（Windows 服务器）及其托管应用程序的配置。

每秒用户总数约10,000

每秒大约 10,000 个请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-02T17:54:06.903

每秒 10k 个请求是非常核心的，除非它们是非常轻的请求，否则您将需要多个集群服务器。与您选择的硬件供应商详细讨论您的需求，如果不花更多时间让您更好地了解需求，任何人都无法提供更多帮助。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T16:27:31.513

[http://www.tpc.org/](http://www.tpc.org/)可能会为您提供有关哪些硬件可以满足您的需求的指南。一定要检查他们的交易标准，看看它是否符合你的标准。

[http://www.tpc.org/tpcc/results/tpcc_results.asp?orderby=dbms](http://www.tpc.org/tpcc/results/tpcc_results.asp?orderby=dbms)列出了数据库供应商的列表。

您提供的信息很少，但是每个用户每秒发出一个请求似乎有点太频繁了。

# javascript - sIFR 无法显示正确文本的问题

> ID：460352
> 
> 赞同：0
> 
> 时间：2009-01-20T07:25:37.333
> 
> 标签：javascript, jquery, sifr

我正在尝试在我的网站上使用 sIFR（带有 jQ​​uery sIFR 插件），但从一开始就遇到了问题。我能够使用我选择的字体创建 swf，但是当我运行脚本时，我只得到默认的“使用 sIFR3 渲染”消息，而不是我元素的文本。

有任何想法吗？

* * *

正如[Novemberborn 自己](http://novemberborn.net/sifr3/r436)指出的那样，我确实将 sIFR 升级到了版本 3，而 jQuery 插件仅支持 v2。我尝试恢复到 sIFR (v2.0.5) 的打包版本：

我的 HTML：

```
<h1 class="img">Why should I do ELBC?</h1> 
```

jQuery：

```
$(":header.img")
    .sifr({
        path : 'lib/sifr/2',
        font : 'test',
        width: 900,
        height: 60
    })
; 
```

该`lib/sifr/2/test.swf`文件只是`.fla`编译后的打包文件。

这次看起来它实际上在做某事：显示了正确的文本，但它很小。比如，4pt 大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T14:19:51.363

jQuery 插件使用 sIFR 2，但您似乎使用的是（旧）sIFR 3 电影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T09:26:51.847

在我看来，swf 文件已损坏（例如在导出期间）。

您可以通过将您的 swf 文件替换为预先构建的文件之一（随 sIFR 分发）来确定这一点 - 这样您就可以知道问题出在 javascript 中还是在 flash 中。无论哪种方式-您可以发布更多详细信息吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-16T00:23:56.813

是的，我遇到了同样的问题，我花了一段时间才发现这不是脚本或任何东西的问题；这只是正在使用的脚本和 swf 之间的不兼容。

尝试使用不同的导出选项以使它们兼容 - 我使用 sifrgenerator.com 从字体生成 swf 文件。希望能帮助到你。

*   马特 [http://www.baradesign.com.au](http://www.baradesign.com.au)

# asp.net - 如何在“网关”页面中为 ASP.NET 站点设置主题？

> ID：460355
> 
> 赞同：0
> 
> 时间：2009-01-20T07:28:23.037
> 
> 标签：asp.net, master-pages

我希望能够在网关页面中设置 ASP.NET 主题，它将根据合作伙伴 ID 或类似的东西确定主题。我想我只是将主题名称粘贴在会话中，如果需要，可以从那里获取它。

我很难找到将这段代码放在一个地方的正确位置。

我似乎看不到您可以设置主题的全局位置。您必须为每个页面设置它。

如[MSDN](http://msdn.microsoft.com/en-us/library/tx35bd89(VS.80).aspx "MSDN")中所述，您可以在页面的 PreInit 函数中分配 Theme 属性。

```
Protected void Page_PreInit(object sender, EventArgs e)
{
    switch (Request.QueryString["theme"])
    {
        case "Blue":
           Page.Theme = "BlueTheme";
            break;

        case "Pink":
           Page.Theme = "PinkTheme";
            break;
    }
} 
```

所以我想好吧 - 我会在我的母版页中做到这一点。不幸的是，将完全相同的代码复制到母版页中是行不通的。所以我想 - 嗯，也许母版页不使用这个事件。事实证明这是真的。

我真的不想把这个主题代码放在每个内容页面上。这似乎完全愚蠢。但我还找不到其他方法。[MSDN](http://msdn.microsoft.com/en-us/library/0yy5hxdk(VS.80).aspx "MSDN")仅描述了将主题应用于页面的两种方法——在 web.config 中或使用 Page.Theme。

我是否必须创建 Page 的子类并让我的所有页面子类化该页面，并覆盖该子类中的 PreInit？我想我一定错过了一些东西，因为我无法想象 MS 真的希望人们在每个内容页面上以编程方式设置主题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T07:38:04.467

一种选择是创建您自己的 Page 基类并在那里处理主题切换/设置。然后将该类用作所有页面的基类。

```
public class PageBase : Page
{
  protected void Page_PreInit(object sender, EventArgs e)
  {
    //..
    Page.Theme = "BlueTheme";
    //..
  }
}

public class MyPageOne : PageBase
{
 ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T08:37:49.307

如果您的网站使用干净的标记，您可以根据查询字符串、浏览器类型、登录信息等轻松切换样式表。

使用 CSS 可以为您在未来创建新主题/母版页/标记...等方面节省大量时间。

# javascript - 使用javascript分隔两个字符串的子字符串函数

> ID：460356
> 
> 赞同：0
> 
> 时间：2009-01-20T07:29:08.743
> 
> 标签：javascript

我有像 X,Y 这样的字符串。我想使用 javascript 将 X 与 Y 分开。请描述如何，因为我是 javascript 新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-20T07:33:18.143

听起来你想要[split()](http://www.w3schools.com/jsref/jsref_split.asp)。你会像这样使用它：

```
a = "X,Y"
b = a.split(",") 
```

这将创建一个字符串“X”和“Y”的数组并将其放入 b。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T07:35:29.293

您可以对字符串使用[split()](http://www.w3schools.com/jsref/jsref_split.asp)方法，该方法会将字符串拆分为数组：

```
var myString = "X,Y";
var myArray = myString.split ( "," ); 
```

myArray 然后将在索引 0 上包含“X”，在索引 1 上包含 Y

或者您可以像这样使用[substring](http://www.w3schools.com/jsref/jsref_substring.asp)方法：

```
var myString = "X,Y";
var myX = myString.substring ( 0, myString.indexOf ( "," ) );
var myY = myString.substring ( myString.indexOf ( "," ) + 1 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T07:34:59.340

尝试：

```
var Test= "X,Y";
var Part = Test.slice(0, 1); 
```

或者

```
var Test = "X,Y";
var Part = Test.substr(0, 1); 
```

# sql-server - SQLServer 2005 和 UTF8

> ID：460358
> 
> 赞同：3
> 
> 时间：2009-01-20T07:31:00.003
> 
> 标签：sql-server, sql-server-2005, unicode, utf-8

我正在尝试设置将使用 C++ 和 ODBC 访问的 sqlserver 2005（读取的数据将在 XML 文件中发送）。所以，我想从数据库（最好是 utf-8）中读取数据，编写一个 XML 文件并发送它。

我一直在浏览，但我还没有找到一种方法来设置数据库和使用 utf-8 的表（如在 MySQL 中）。我读过内部 sqlserver 使用 UCS-2

是否可以设置 sqlserver 2005 数据库（或表或字段）以使用 utf-8？

如果没有，推荐的方法是什么？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T08:45:46.953

希望 MSDN 中的以下文章 -[在 SQL Server 中存储 UTF-8 数据的描述](http://support.microsoft.com/kb/232580)会有所帮助。我在 2000 年遇到了类似的问题，但我从文章中看到他们已将其更新为适用于 SQL 2005。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T19:16:56.147

您可以请求 unicode 数据（UTF16 或 UCS2）并将其转换为您需要的 UTF-8。

UTF-8 是完整的 unicode 格式，转换快速简单。

# java - 如何使用 .jar 文件中的类？

> ID：460364
> 
> 赞同：140
> 
> 时间：2009-01-20T07:33:41.373
> 
> 标签：java, jar

我阅读了有关 Sun 的 JAR 文件的 Java 教程，但我仍然找不到解决问题的方法。我需要使用一个名为 jtwitter.jar 的 jar 文件中的类，我下载了该文件并尝试执行它（我昨天发现 .jar 文件可以通过双击它们来执行），Vista 给我一个错误说“无法从 [path]/jtwitter.jar 加载 Main-Class Manifest 属性”。

编写 .jar 文件的人要我导入它，但是我在哪里存储 .jar 文件以将其导入我的代码中？我尝试将 .jar 文件和我的 .java 文件放在同一个目录中，但没有用。

我要工作的文件在这里： http: [//www.winterwell.com/software/jtwitter.php](http://www.winterwell.com/software/jtwitter.php)

我正在使用 JCreator LE。

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2010-05-12T08:42:24.873

假设我们需要使用`Classname`jar 文件中包含的类`org.example.jar`

您的来源在文件中，`mysource.java`如下所示：

```
import org.example.Classname;

public class mysource {
    public static void main(String[] argv) {
    ......
   }
} 
```

首先，如您所见，您必须在代码中导入类。为此，您需要`import org.example.Classname;`

其次，编译源码时，必须引用jar文件。

请注意使用`:`和`;`编译时的区别

*   如果您在类似 Unix 的操作系统下：

    ```
    javac -cp '.:org.example.jar' mysource.java 
    ```

*   如果你在windows下：

    ```
    javac -cp .;org.example.jar mysource.java 
    ```

在此之后，您获得字节码文件`mysource.class`

现在你可以运行这个：

*   如果您在类似 Unix 的操作系统下：

    ```
    java -cp '.:org.example.jar' mysource 
    ```

*   如果你在windows下：

    ```
    java -cp .;org.example.jar mysource 
    ```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-01-20T07:39:05.777

并非每个 jar 文件都是可执行的。

现在，您需要在您的 java 文件中导入 jar 下的类。例如，

```
import org.xml.sax.SAXException; 
```

如果您正在使用 IDE，那么您应该参考它的文档。或者至少指定您在此线程中使用的是哪一个。它肯定会使我们能够进一步帮助您。

如果您没有使用任何 IDE，请查看[javac -cp](http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html)选项。但是，最好将程序打包到一个`jar`文件中，并在其中包含所有必需`jar`的 s。然后，为了执行你的`jar`，比如，

```
java -jar my_program.jar 
```

你应该有一个`META-INF/MANIFEST.MF`文件在你的`jar`. 请参阅[此处](https://stackoverflow.com/questions/2848642/how-to-setup-main-class-in-manifest-file-in-jar-produced-by-netbeans-project)，了解操作方法。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-01-20T07:41:21.513

您需要在类路径中添加 jar 文件。编译你的java类：

```
javac -cp .;jwitter.jar MyClass.java 
```

要运行您的代码（前提是 MyClass 包含 main 方法）：

```
java -cp .;jwitter.jar MyClass 
```

您可以在任何地方拥有 jar 文件。如果 jar 文件与您的 java 文件位于同一目录中，则上述工作。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-20T07:38:19.490

编译/运行代码时，您需要将 .jar 文件放入类路径中。然后，您只需使用 .jar 中类的标准导入。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-01-20T07:40:38.283

正如 workmad3 所说，您需要将 jar 文件放在类路径中。如果您从命令行编译，这将意味着使用 -classpath 标志。（避免使用 CLASSPATH 环境变量；这对 IMO 来说很痛苦。）

如果您使用的是 IDE，请告诉我们是哪一个，我们可以帮助您执行特定于该 IDE 的步骤。

# c# - C# UnitTest - 如果参数为 null，则 Assert.AreEqual() 不会调用 Equals

> ID：460371
> 
> 赞同：5
> 
> 时间：2009-01-20T07:36:28.323
> 
> 标签：c#, visual-studio, unit-testing, equals

我最近偶然发现了谷歌完全无法解释的看似奇怪的行为。

```
 using Microsoft.VisualStudio.TestTools.UnitTesting;

class TestClass
{
    public override bool Equals(object obj)
    {
        return true;
    }
}

[TestMethod]
public void TestMethod1()
{
    TestClass t = new TestClass ();
    Assert.AreEqual (t, null); // fails
    Assert.IsTrue (t.Equals (null)); // passes
} 
```

我希望这个测试能够成功。但是，在 Visual Studio 2008 / .NET 3.5 中它失败了。它是打算这样还是一个错误？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-20T07:47:57.600

您的 TestClass 违反了[`Object.Equals`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx). `Assert.AreEqual`非常合理地依赖该合同。

文档状态（在要求列表中）：

*   x.Equals（一个空引用（在 Visual Basic 中为无））返回 false。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-20T07:39:35.620

测试空值时，不要使用`Assert.AreEqual`.

你必须使用`Assert.IsNull()`它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T07:40:30.687

第一次测试失败。测试“t”是否为空，但不是，因为您使用新的 TestClass 对象初始化了 t。

第二个测试通过了，因为 t.Equals 总是返回 true。

如果一个测试失败，则整个 TestMethod1 被标记为失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-20T07:48:01.263

不，这是正确的 - 您已将 t 初始化为一个新的 TestClass 对象，该对象不为空，因此断言失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T07:48:49.033

如果我说得对，实际上是打算`AreEqual(anythingButNull, null)`总是返回false？

（编辑）我想知道的原因是因为在对类进行单元测试时没有调用 Equals 合同所要求的 null 测试。因此，因为 AreEqual 依赖于合同，所以它无法检查我的班级是否也遵守合同。所以我想我必须使用`Assert.IsFalse(blah.Equals(null))`.

# android - android中的WiFi编程

> ID：460387
> 
> 赞同：7
> 
> 时间：2009-01-20T07:45:28.617
> 
> 标签：android, android-wifi

什么是 ScanResult.capabilities？由于我没有设备，我不知道它的格式。

您如何连接到特定的 API？我查看了 API 文档，但没有找到实现该功能的方法。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T09:26:38.883

徒劳地尝试只浏览相关代码，知道Android平台是开源的，但失败了。但是，如果您愿意[遵循](http://source.android.com/download)有关如何获取源的指南，它仍然是可能的。

当然，阅读源代码以了解它们如何生成特定字符串可能会导致您的应用程序被“锁定”针对特定实现，我看到有迹象表明他们打算稍后将其从字符串更改为更结构化的东西。

# html - CSS文件的浏览器缓存

> ID：460389
> 
> 赞同：67
> 
> 时间：2009-01-20T07:47:09.940
> 
> 标签：html, css, http, caching, browser

关于 CSS 和浏览器的快速问题。我尝试搜索 SO 并找到了一些类似的帖子，但没有确定的。

我在我的 Web 项目中使用一两个 CSS 文件。这些在我的网页的 HEAD 中被引用。一旦我点击了我的一个页面，CSS 是否会被缓存，以便不会在每个请求中重新下载？但愿如此。IE、Firefox 和 Safari 的处理方式不同吗？如果浏览器关闭，当新的浏览器实例打开时，CSS 是否会在第一次访问时刷新？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2009-01-20T08:32:19.240

您的文件*可能会*被缓存-但这取决于...

不同的浏览器的行为略有不同——在处理来自服务器的模糊/有限的缓存标头时最为明显。如果您发送一个明确的信号，浏览器几乎总是会服从。

迄今为止最大的差异在于不同 Web 服务器和应用程序服务器的默认缓存配置。

一些（例如 Apache）可能会使用 HTTP 标头为已知的静态文件类型提供服务，鼓励浏览器缓存它们，而其他服务器可能会`no-cache`在每次响应时发送命令 - 无论文件类型如何。

...

所以，首先，阅读一些优秀的[HTTP 缓存教程](http://www.mnot.net/cache_docs/)。[内容发布者的 HTTP 缓存和缓存清除](http://www.radwin.org/michael/talks/http-caching.ppt)让我大开眼界 :-)

接下来安装并摆弄[Firebug](https://addons.mozilla.org/en-US/firefox/addon/1843)和[Live HTTP Headers](https://addons.mozilla.org/en-US/firefox/addon/3829) add-on，以找出您的服务器实际发送的标头。

然后阅读您的 Web 服务器文档以了解如何将它们调整到完美（或让您的系统管理员为您做这件事）。

...

至于浏览器重启后会发生什么，取决于浏览器和用户配置。

根据经验，每次重新启动后浏览器更有可能与服务器签入，以查看是否有任何更改（请参阅[If-Last-Modified](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25)和[If-None-Match](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26)）。

如果你正确配置你的服务器，它应该能够返回一个超短的[304 Not Modified](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5)（占用很少的带宽），之后浏览器将正常使用缓存。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2009-01-20T08:18:42.327

对于你问题的第一部分 - 是的，浏览器缓存 css 文件（如果浏览器的配置没有禁用它）。许多浏览器都有组合键来重新加载没有缓存的页面。如果您对 css 进行了更改并希望用户立即看到它们，而不是在下次浏览器重新加载文件而不缓存时等待，您可以通过向 url 添加一些参数来更改 CSS ir 的服务方式，如下所示：

```
/style.css?modified=20012009 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-20T08:17:37.117

它确实取决于与 CSS 文件一起发送的 HTTP 标头，因为前面的两个答案都表明 - 只要您不将任何缓存清除内容附加到 href。例如

```
<link href="/stylesheets/mycss.css?some_var_to_bust_cache=24312345" rel="stylesheet" type="text/css" /> 
```

一些框架（例如rails）默认将它们放入。

但是，如果你得到类似[firebug](http://getfirebug.com/)或[fiddler](http://www.fiddlertool.com/fiddler/)的东西，你可以准确地看到你的浏览器在每个请求上下载了什么——这对于找出你的浏览器*正在*做什么特别有用，而不是它*应*该做什么。

所有浏览器*都应该*以相同的方式尊重缓存头，除非配置为忽略它们（但肯定会有例外）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-20T15:54:44.653

值得注意的是，IE 不会缓存其他 css 文件使用 @import 方法调用的 css 文件。因此，例如，如果您的 html 页面链接到通过 @import 引入“reset.css”的“master.css”，则 IE 不会缓存 reset.css。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-20T07:50:16.953

这取决于您与 CSS 文件一起发送的标头。检查您的服务器配置，因为您可能没有手动发送它们。在 Google 上搜索“http 缓存”以了解您可以设置的不同缓存选项。例如，您可以强制浏览器在每次加载文件时下载文件的新副本，或者您可以将文件缓存一周...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-20T07:50:29.043

除非您弄乱了服务器，否则它会被缓存。所有浏览器都应该以相同的方式处理它。有些人（比如我）可能将他们的浏览器配置为不缓存任何文件。关闭浏览器不会使缓存中的文件无效。但是，更改服务器上的文件应该会导致文件刷新。

# web-applications - 让用户对长时间运行的任务感到满意（WEB）

> ID：460392
> 
> 赞同：2
> 
> 时间：2009-01-20T07:48:19.923
> 
> 标签：web-applications

当用户等待长时间运行的任务完成时，让他保持忙碌/开心的最佳方法是什么？

想法：

*   显示随机提示或帮助信息
*   进度条（但如果它是一个长时间运行的任务，这不是很方便，因为它不会经常更改）

或者有人有其他人如何在他们的 Web 应用程序中解决这个问题的例子吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-20T07:51:56.530

你不认为他宁愿把你的窗口最小化，做一些其他的工作吗？还是去喝杯咖啡？或者和他的朋友聊天？

你为什么不让他知道这需要一些时间让他决定？

看来您要做的只是为自己和用户宝贵的 CPU 做更多的工作:-)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-20T07:54:27.493

我会专注于尽可能准确地计算任务需要多长时间，然后让用户知道，这样他们就可以决定在它运行时做什么。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-20T09:25:39.773

1.  通知用户：估计持续时间显示进度（也许如果您的用户是技术人员，请向他/她展示实际在做什么）

2.  通知用户：确保用户知道一旦任务完成或需要他们注意（错误等）他们将收到通知。这将允许他们在知道过程正在进行的同时轻松地做其他事情。

3.  后台处理：在可能的情况下尽量使该过程不具有侵入性。也就是说，尝试让它在后台运行，同时用户继续使用他/她的网站，一旦完成，它就会通知他们（通过 AJAX 弹出窗口或某种通知）。如果该过程与帐户相关而不是与会话相关，则最好这样做。这样，如果用户提出启动进程的请求并且连接丢失（浏览器关闭等），则进程完成并在用户返回时准备就绪。如果进程与会话相关，这将很困难，因为它将随着会话终止。

4.  有用的信息：如果你只需要让用户等待，试着利用时间来显示有用的信息（提示或广告等）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-20T10:37:21.517

如果它是一个网络应用程序，为什么不给他们一个估计的完成时间并在完成后通过电子邮件发送给他们呢？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-20T15:24:26.787

对于长时间的任务，如果可能的话，甚至不要*要求*他们将窗口保持在最小化状态。相反，将他们请求的操作放入队列中，并通知他们需要一些时间才能完成。正如@Colin Pickard 所说，您甚至可以在完成后提供电子邮件选项。

当您对照片进行大量重新标记时，Flickr 会采用这种方法，并且非常方便。（虽然我必须说我最后一次重新标记从未奏效:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-20T07:55:48.550

最重要的是给用户一个精确估计该过程将花费的时间。

正如您所说，提供提示是经典但始终有用的信息。

但是，根据您正在开发的应用程序类型，您可以提供一些小游戏（例如数独或刽子手……）！

另一个想法是显示一些新闻（例如，您可以使用链接到与您的业务相关的网站的 RSS 插件）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-20T07:56:24.103

与您的问题相关，您可能想看看：

[https://stackoverflow.com/questions/182112/funny-loading-statements-to-keep-users-amused](https://stackoverflow.com/questions/182112/funny-loading-statements-to-keep-users-amused)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-20T09:16:06.907

Web 应用程序很难进行精确估计，因为存在许多潜在的延迟因素。粗略猜测，如果普通用户必须等待..

*   .. 几分之一秒，什么都不做，责备他人（用户的系统、IE、Windows、ISP 等），有时需要更长的时间
*   .. 几秒钟，加载一个带有几帧的小而漂亮的 GIF（它是有趣的、专业的、严肃的还是烦人的取决于你）
*   .. 超过几秒钟但不到一分钟，显示一个带有解释的表格，如果可以的话，最好是带有进度条
*   ..一个必须以分钟计算的延迟，那么该应用程序不适合当今的大众，习惯于Web 2.0的典型速度。包括一些不错的游戏（像[这样](http://www.brittlefish.com/2006/11/03/red-square-escape/)）可能有助于重新赢得他们的耐心，但不能保证

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-20T08:18:29.817

展示喜欢使用该产品的[丑陋](http://www.guysmithferrier.com/images/VS2008Installation1.jpg)[人士的](http://lh4.ggpht.com/jacqui.chow/R_7Pid9MMfI/AAAAAAAAAXE/KKrMRiRFNnc/interesting_screenshot_of_vs2008_beta2_installer%5B5%5D.jpg)[漂亮](http://ohforfuckssake.com/files/Visual_Studio_2008_The_Cliche.jpg) [面孔](http://ohforfuckssake.com/blogs/visual-studio-2008-where-are-politically-correct-install-pictures)，并附上解释为什么这个版本比之前的任何版本更好的文字。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-20T08:47:06.200

如果可能，请在后台执行此操作。当你估计要完成的工作时告诉他，然后通过一些明智的方法通知他们。如果在作业运行时用户（使用您的应用程序）做其他事情没有意义，我只会做进度条和/或“有趣”的事情。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-20T09:01:18.043

电梯音乐？

# javafx - JMF+JavaFx 布局问题

> ID：460393
> 
> 赞同：1
> 
> 时间：2009-01-20T07:48:31.343
> 
> 标签：javafx, jmf

我可以在 javafx 中创建一个 GUI 并在 JavaFx 中调用 JMF 组件，就像这样

```
public class JMFComponent extends SwingComponent{

    var panel: JPanel;

    public var center: java.awt.Component on replace{
        println("[center] set component: {center}");
        panel.add(center, BorderLayout.CENTER);
    }

    public override function createJComponent():javax.swing.JComponent{
        panel= new JPanel(new BorderLayout());

        var size:Dimension =   new  Dimension(width, height);
        panel.setPreferredSize(size);
        panel.setMinimumSize(size);
        panel.setMaximumSize(size);
        panel.setSize(size);
        return panel;
    }
}

public class MyMedia extends CustomNode {

    var xpos: Number;
    var ypos: Number;
    var dx: Number;

    public var url: java.net.URL;
    public var autoPlay: Boolean;

    public override function create(): Node{

        var comp:java.awt.Component;
        var control:java.awt.Component;
        var w:Number;
        var h:Number;
        var cw:Number;
        var ch:Number;

        var jmfCom:JMFComponent;
        var player = Manager.createRealizedPlayer(url);

        comp=player.getVisualComponent();

        control=player.getControlPanelComponent();

        if (autoPlay) {
            player.start();
        }
        w=comp.getPreferredSize().getWidth();
        h=comp.getPreferredSize().getHeight();
        cw=control.getPreferredSize().getWidth();
        ch=control.getPreferredSize().getHeight();
        jmfCom=JMFComponent {
                    width:w
                    height:h+ch
                    center:  comp
                    blocksMouse: true
                    bottom:  control
                };

        return Group{
            content: [

                jmfCom

            ] 

        }
    }
}

Stage {
    title: "Media Example"
    width: 500
    height: 500
    onClose: function(){ java.lang.System.exit(0);}
    scene: Scene {
        content: MyMedia{
            url: (
                new java.io.File("C://My//Videos//DELTA.MPG")).toURI().toURL()
            autoPlay: true
        }
    }
} 
```

视频可以在 JavaFx gui 中播放，但是当我将鼠标光标移动到 JMF 播放器的控制栏中时，视频窗口会同时移动。

有谁知道如何让 JMF 在 JavaFx 中正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-02T21:24:01.673

为什么选择 JMF？[javafx.scene.media](http://java.sun.com/javafx/1/docs/api/javafx.scene.media/javafx.scene.media.Media.html)下有简洁的 API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-31T22:51:37.100

我有一个解决方案。在尝试了一些更改之后，将组件 JMFComponent 的属性“disable”设置为“false”。这可以防止某些包含流的屏幕在其上移动鼠标指针。

```
jmfCom=JMFComponent {
    width:   w*2
    height:  h*2  //+ch
    center:  comp
    disable: true
}; 
```

# regex - RegEx 允许在开头使用字母数字并在其后使用连字符

> ID：460404
> 
> 赞同：9
> 
> 时间：2009-01-20T07:55:48.067
> 
> 标签：regex

我有一个要求，在文本字段中，第一个字符应该是字母数字，然后我可以在 JavaScript 中允许此后的连字符。最后也不应该允许连字符

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-20T08:00:14.533

如果您不想在彼此之后匹配多个破折号：

```
^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*$

```

这将匹配：`a`, `a-a`, `aaa-a`, `aaa-a-aaa-a-aaa-a`, 等
但不匹配： `-`, `-a`, `a-`, `a--a`, `a-a-a-`,`a-a--a`等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-20T07:57:12.587

```
^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$ 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-20T09:14:46.097

我建议：

```
^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?$ 
```

这也匹配长度为 1 的字符串。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-20T08:16:12.393

这是执行此操作的 POSIX + look-ahead 变体：

```
^[[:alnum:]](?:[[:alnum:]-](?!-$))*$ 
```

这也允许只有一个字符作为匹配项。但是，它不是那么可读。;-)

请注意，这`[[:alnum:]]`是一个等同于 的速记预定义字符类`[a-zA-Z0-9]`，效率更高，但在其他方面可互换。不是每个正则表达式都知道这些 POSIX 类，如果你愿意，可以使用传统形式。

这是一个不允许多个连续连字符的，它更短：

```
^(?:[[:alnum:]]+(?:-(?!$))?)+$ 
```

它是非POSIX形式：

```
^(?:[a-zA-Z0-9]+(?:-(?!$))?)+$ 
```

# c# - 有没有办法在 Asp.Net MVC 的 MasterPage 中调用操作？

> ID：460411
> 
> 赞同：1
> 
> 时间：2009-01-20T07:58:14.503
> 
> 标签：c#, asp.net-mvc

我想在我的 MasterPage 中放置一些通用信息，以便在所有页面上显示，例如类别。我怎样才能做到这一点，而不是在我的每个动作中填充那个区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T08:18:48.660

您可以从单个基本控制器派生所有控制器，并将所有控制器和所有操作中相同的所有数据添加到那里的视图数据中，然后在您的母版页中呈现。

特定于单个操作的数据被添加到派生控制器中的视图数据中。

此处的 ASP.NET MVC 教程中有一个示例：[http ://www.asp.net/learn/mvc/tutorial-13-cs.aspx](http://www.asp.net/learn/mvc/tutorial-13-cs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T02:09:19.233

查看[www.codeplex.com/aspnet](http://http:/www.codeplex.com/aspnet)上的 Futures DLL 中的 RenderAction 辅助方法。这允许您渲染从不同控制器获取 ViewData 的局部视图（也称为用户控件）。

# windows - 脚本大胆

> ID：460414
> 
> 赞同：4
> 
> 时间：2009-01-20T07:59:36.390
> 
> 标签：windows, scripting, audacity

Audacity 有没有脚本库？

具体来说，我正在寻找一种方法来给它一个长的 mp3 文件`podcast.mp3`并将其拆分为每个 10 分钟的文件：`podcast0.mp3, podcast1.mp3`等等......

我不想手动执行此操作，因为我想运行通过此脚本收听的所有播客。

* * *

**一些背景知识：**
我听过各种很长的播客（例如 Stackoverflow）。我在我的手机上听这些，它有一个很小的 ​​MP3 播放器，不允许我跳到文件中的任意时间。这个 MP3 播放器有一个讨厌的习惯，就是忘记我在文件中的位置。例如：

*   有时，如果有人在我播放播客时打电话给我，它会从头开始播客。
*   有时我开始工作时会暂停播客，而当我尝试在一天结束时继续播客时，它会重置为曲目的开头。

发生这种情况时，我必须手动快进或快退。这个极小的播放器以 5 倍的速度快进，所以如果我在播客的中间，按住快进按钮可能需要 6 或 7 分钟才能回到原来的位置。我想如果我将长播客分成更短的文件，我可以省去一些烦恼。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-20T08:18:18.443

我建议使用不同的工具，例如[ffmpeg](http://ffmpeg.org/)或[mp3split](http://sourceforge.net/docman/display_doc.php?docid=12439&group_id=55130)。这些是命令行工具，因此很容易编写脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-05-18T16:19:20.360

如果您只对拆分文件感兴趣，那么我会接受 Douglas 的建议。但是，如果您想使用 Audacity 的 GUI 功能，Audacity 具有使用管道的脚本功能。它被称为 mod-script-pipe。如果您从 svn 下载源代码，您将在名为 pipe-test.pl 的脚本文件夹中看到一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-28T16:33:26.740

在 Mac 上（你是快乐的用户！:-)），你可以使用[Automator](https://support.apple.com/en-us/HT2488)来做这样的事情。

# android - 如何在屏幕“上方”显示文本编辑框？

> ID：460418
> 
> 赞同：15
> 
> 时间：2009-01-20T08:01:46.150
> 
> 标签：android, text, popup, android-edittext

我有一个应用程序，其主要布局为纵向（固定为纵向），并且有一个地方可以输入文本。我想像一个横向的弹出窗口一样启动，背景图像模糊不清。我知道有一个弹出窗口小部件，但任何旋转文本编辑框的想法都会很棒。滑出键盘时将其旋转到纵向视图（仅限文本框）也可以，就像在键盘滑动上显示带有文本框的新屏幕一样。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-01-20T09:18:09.257

解决您的问题的最简单方法是`EditText`在一个单独的`dialog`主题 Activity 中显示您，该 Activity 您从您的主（纵向固定）Activity 中启动。

EditText Activity 的方向不应固定，因此当您滑出键盘时它会按预期旋转。

**创建文本输入活动**

创建一个新的 Activity，它只包含 EditText 视图和您想要包含的任何其他内容（可能是 OK / Cancel 按钮，也可能是一个标签？）。在清单中将其主题设置为`Theme.Dialog`.

```
<activity android:name="TextEntryActivity" 
          android:label="My Activity" 
          android:theme="@android:style/Theme.Dialog"/> 
```

通过修改前台 Activity（您的文本输入对话框）的 Window 属性来对对话框后面的 Activity 进行模糊或模糊处理。在它的 onCreate 方法`getWindow().setFlags`中，用于将模糊应用于任何背景活动。

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND,  
                     WindowManager.LayoutParams.FLAG_BLUR_BEHIND); 
```

**从文本输入活动启动和读取输入的值**

用于`startActivityForResult`启动文本输入活动。在该 Activity 调用中，使用[本文](https://stackoverflow.com/questions/449484/android-capturing-the-return-of-an-activity#449824)`setResult`中描述的技术返回在返回的意图中输入的文本字符串。

重写`onActivityResult`方法以侦听来自子 Activity 的结果。

**在暴露的键盘上触发启动**

您可以随时启动文本输入活动，但如果您想在键盘暴露时始终显示它，您可以显式捕获此事件。

首先将`android:configChanges`属性添加到肖像 Activity 的清单条目中。它应该被注册来监听`keyboardHidden`。

```
android:configChanges="keyboardHidden" 
```

在该活动中，覆盖`onConfigurationChanged`以启动文本输入活动。

```
@Override
public void onConfigurationChanged(Configuration newConfig) {  
  Intent i = new Intent(this,TextEntryActivity.class);    
  startActivityForResult(i, STATIC_INTEGER_VALUE);
} 
```

在启动文本输入 Activity 之前，您可能需要使用 newConfig 变量检查确认键盘是否被暴露（而不是隐藏）。

您可能还希望使用相同的技术在键盘隐藏时自动从文本输入活动返回。

# java - 为什么不推荐使用“新日期（整数年，整数月，整数天）”？

> ID：460423
> 
> 赞同：59
> 
> 时间：2009-01-20T08:04:23.527
> 
> 标签：java, date, deprecated

我最近继承的应用程序充满了关于构造函数的弃用警告：

```
Date d = new Date(int year, int month, int day) 
```

有谁知道或可以指出为什么像这样简单的东西被这样的东西“取代”的原因：

```
Date d = null;
Calendar cal = GregorianCalendar.getInstance();
cal.set(1900 + year, month, day);
d = cal.getTime(); 
```

现在，显然弃用警告本身不是问题，但你能想象如果这个构造函数被删除，数百万的 LOC 会痛苦地哭泣吗？

在我简短的基准测试中，后者需要大约 50% 的时间来执行。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-01-20T09:57:14.077

最初，`Date`旨在包含有关日期的所有逻辑，但 API 设计者最终意识到，他们迄今为止的 API 严重不足，无法干净地扩展以正确处理时区、语言环境、不同日历、夏令时等问题， ETC。

所以他们创建`Calendar`来处理所有这些复杂性，并降级`Date`为一个简单的时间戳，弃用其处理格式化、解析和单个日期字段的所有功能。

顺便说一句，在内部这些方法（例如`Date(int, int, int)`构造函数）现在调用`Calendar`了，所以如果你看到速度上的差异，那么你在调用时做错了`Calendar`。

底线：不是 Java 的`Calendar`API 过于复杂，而是人类对日期的概念，唯一的问题`Calendar`是它提供的最常见用法的快捷方式并不多。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-20T08:11:17.600

Java 日期 API 长期以来一直受到批评，例如[这个线程](https://stackoverflow.com/questions/87676/whats-the-best-way-to-manipulate-dates-and-timestamps-in-java)。

您可能想查看[Joda-Time](http://joda-time.sourceforge.net/index.html)或[Apache Commons Lang](http://commons.apache.org/lang/)以获取替代日期/时间实用程序。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-20T08:08:48.197

答案是便携性。

类`Date`不是很灵活。您可以定义日期，但不能转换为其他日历格式。因此 Sun 决定使用额外的类层次结构 ( `Calendar`) 以使其更加灵活。

尽管如此，它不是很方便。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-20T08:33:38.850

主要是因为原来的 java.util.Date 过于臃肿，不完全了解时区，而且对国际化不友好。

但是，Date 仍在使用中，而且非常好，在值对象中，或者说是一种数据类型。只要您明确地使其不可变，您就可以轻松进行。我倾向于认为它必须是不可变的，出于其他目的，我们可以使用 Calendar 来操作。在预期有很多操作的地方，应该考虑类似 Joda-Time 之类的东西。

**[已编辑]**

只是不要在后面的代码中实例化日期。它没有用。您可能会为您的基准测试获得更好的结果。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-20T11:59:18.090

当然，没有人使用任何其他日历格式，但新的 API 增加了为 99% 的常见情况编写的代码量，因此对于由 LoC 支付的 Java 程序员来说这是一个巨大的福音。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-03-22T14:13:14.107

从技术上讲，Michael Borgwardt 给出了最好的答案。但是，为什么他将我们太阳系的布局方式归咎于人类呢？

好的，我们想出了秒、分钟和小时的概念。

但是地球的日子是近似的并不是我们的错（取决于我们是在谈论真正的太阳日、平均太阳日还是恒星日，每个日都是周期性和随机变化的）。地球绕太阳公转的时间*大约*是365 天不是我们的错，月球绕地球公转的时间*大约*是27.3 天也不是我们的错（取决于我们是否在谈论恒星、会合、热带月、异常月或龙（节点）月）。

您不高兴日历没有考虑所有这些细节吗？那么我们的软件错误可能确实取决于月相。

# javascript - 如何将 DOM 元素传递给 API 函数？

> ID：460425
> 
> 赞同：0
> 
> 时间：2009-01-20T08:04:44.553
> 
> 标签：javascript, dom

在尝试将 Yahoo Media Player 集成到我自己的网站时，我希望允许用户单击链接以将单击的曲目添加到播放列表中。YMP API 有一个功能可以做到这一点（[http://mediaplayer.yahoo.com/api/#method_addTracks](http://mediaplayer.yahoo.com/api/#method_addTracks)）。它需要一个 DOM 元素。现在我应该如何传递 dom 元素。我的代码现在看起来像这样：...

```
<li id="track1">
<a href="location of track" style="display:none">track1</a>
<a href="#" onclick="YAHOO.MediaPlayer.addTracks(WHAT SHOULD I PUT HERE?, null, true);">Add this to the playlist</a>
</li> 
```

如果有人与 YMP 合作过或对此有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T09:09:19.167

据我从 API 页面了解，您应该使用

```
YAHOO.MediaPlayer.addTracks(document.getElementById('track1'), null, true); 
```

（文档说“HTML DOM 元素（可能**包含**媒体锚标签）”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T08:09:26.463

您应该放置对要添加的 DOM 元素的引用，最有可能通过 id 像这样：

```
<li id="track1">
<a id="trackelement" href="location of track" style="display:none">track1</a>
<a href="#" onclick="YAHOO.MediaPlayer.addTracks(document.getElementById('trackelement'), null, true);">Add this to the playlist</a>
</li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-27T21:53:37.327

我终于解决了这个问题。这就是我所做的

```
<div id="debug"><a href="http://www.radioreloaded.com/audio/7k/6724_Akela Hoon Main.mp3">Akela hoon Mein, Raeth</a></div>

<a href="#" onclick="YAHOO.MediaPlayer.addTracks(document.getElementById("debug"),null,true);">Add to playlist</a> 
```

开始播放曲目，您可以

```
YAHOO.MediaPlayer.play(); 
```

# c++ - 我想开始 Qt 开发 - 我必须拥有哪些 C++ 和 OS 基础知识？

> ID：460426
> 
> 赞同：6
> 
> 时间：2009-01-20T08:05:15.303
> 
> 标签：c++, qt

我要学习Qt，我只想知道C++的哪些部分，OO设计和其他我必须有背景的东西？模板，RAII，模式，......？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-20T08:11:24.650

QT 与您可以使用的任何其他平台或库没有什么不同。要正确使用它，您只需要了解 C++ 的基础知识以及如何编译和构建代码。

[本教程](http://doc.trolltech.com/4.3/tutorial.html)将带您了解构建 QT 应用程序的基础知识。

当然，与任何其他编程工作一样，您对所使用的语言和工具了解得越多越好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T08:16:31.830

[恕我直言，“Qt 开发基础”](http://apress.com/book/view/1590598318)一书是最好的资源。它是由非常好的 Qt3 教程的作者 - Johan Thelin 编写的。起初这本书也是一本免费教程，但后来变成了一本书。

您可以获得印刷书籍和/或 PDF。

也可能想在[Qt4 开发的最佳 IDE 上偷看这个问题](https://stackoverflow.com/questions/420065/best-crossplatform-c-qt4-development-environment)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T08:45:29.730

我认为带有 KDE GUI 的 Linux/Unix 是学习 qt 的最佳选择之一，因为您可以放心，已经安装了 qt 库和 c++ 编译器。如果您的预算有限，那么出色的 Qt 文档足以让您完成基本操作。*在你的 linux 框中键入assistant*来查看 qt 文档比在线 更容易。
此外，您可以浏览/编辑许多基于 qt 的开源项目的代码以了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-20T16:07:02.473

我建议阅读[C++ GUI Programming with Qt4](https://rads.stackoverflow.com/amzn/click/com/0132354160)一书。

它几乎涵盖了 Qt 的所有功能，对于初学者来说很容易阅读，还包括对 C++ 和 Java 的介绍，解释了使用 Qt 进行开发所需的基本概念。

我真的很喜欢这本书。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T08:19:34.650

我记得使用 Qt 为 Linux 开发 GUI 的 Kylix（来自 Borlard aka CodeGear aka Embarcadero）。你可以在这里阅读一篇文章：http: [//dn.codegear.com/article/29706](http://dn.codegear.com/article/29706)

不幸的是，Kylix 很久以前就停产了......但你可以在这里试试运气：http: [//support.codegear.com/forums/directory/kylix](http://support.codegear.com/forums/directory/kylix)

另一个值得阅读的好点是在 Eclipse 上使用 Qt： [http ://www.qtsoftware.com/developer/eclipse-integration](http://www.qtsoftware.com/developer/eclipse-integration)

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-20T08:34:48.987

如果您了解 Python，则可以使用[PyQt](http://www.riverbankcomputing.co.uk/software/pyqt/intro)，它与 C++ Qt 一样强大，但 Python 比 C++ 更容易。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-15T23:37:05.227

这是您应该开始使用/阅读的书。

[Qt书](http://www.barnesandnoble.com/w/advanced-qt-programming-mark-summerfield/1100836028?cm_mmc=googlepla-_-textbook_notinstock_26to75_pt99-_-q000000633-_-9780321635907&ean=9780321635907&isbn=9780321635907&r=1)

另外，您需要对指针和类有基本的了解。

# c# - 虚函数在 C# 和 Java 中如何工作？

> ID：460446
> 
> 赞同：20
> 
> 时间：2009-01-20T08:21:09.107
> 
> 标签：c#, java, virtual, vtable

虚函数如何在 C# 和 Java 中工作？

它是使用类似于 C++ 的相同 vtable 和 vpointer 概念还是完全不同的东西？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-18T14:55:20.417

## Java中的虚函数是如何工作的？

编码面试官喜欢这个问题。是的。尽管 Java 没有 virtual 关键字，但 Java 有虚函数，您可以编写它们。

在面向对象的编程中，[虚函数](http://en.wikipedia.org/wiki/Virtual_function)或虚方法是一种函数或方法，其行为可以在继承类中被具有相同签名的函数覆盖。这个概念是面向对象编程 (OOP) 的多态部分的一个非常重要的部分。

像这样询问有关特定语言的架构问题需要出色的沟通技巧和深入掌握 Java 编译器的基本原理，特别是接口、抽象类以及继承的工作原理。

引导面试官了解虚拟功能的具体示例。

**是的，您可以使用接口在 Java 中编写虚拟函数。**

Java[接口方法](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)都是“纯虚拟的”，因为它们被设计为被覆盖。例如：

```
interface Bicycle {         //the function applyBrakes() is virtual because
    void applyBrakes();     //functions in interfaces are designed to be 
}                           //overridden.

class ACMEBicycle implements Bicycle {
    public void applyBrakes(){               //Here we implementing applyBrakes()
       System.out.println("Brakes applied"); //function, proving it is virtual.
    }
} 
```

**是的，您可以使用抽象类在 Java 中编写虚拟函数。**

Java[抽象类](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)包含隐含的“虚拟”方法，由扩展它的类实现。例如：

```
abstract class Dog {                   
    final void bark() {               //bark() is not virtual because it is 
        System.out.println("woof");   //final and if you tried to override it
    }                                 //you would get a compile time error.

    abstract void jump();             //jump() is a virtual function because it
}                                     //is part of an abstract class and isn't
                                      //final.  
class MyDog extends Dog{
    void jump(){
        System.out.println("boing");    //here jump() is being overridden, a 
    }                                   //demonstration that it is virtual.
}
public class Runner {
    public static void main(String[] args) {
        MyDog myDog = new MyDog();       //instantiating myDog
        myDog.jump();                    //calling the overridden function jump()
    }
} 
```

**你可以强制一个函数在泛型类中不是虚拟的，方法是让它`final`**

例如：

```
class myJavaFoobarClass {

    final boolean giveMeTrueFunction()   //this Java function is NOT virtual
    {                                    //because final keyword prevents this
        return true;                     //function from being modified in a
    }                                    //subclass.

    boolean isItRainingFunction()   //this Java function IS virtual because
    {                               //without the final keyword, the function
        return false;               //can be overridden in a subclass.
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-20T08:42:39.750

至少在 Java 中没有 virtual 关键字。

它只是解析为您调用的任何方法的最衍生版本......

```
class A{
void sayhi(){ System.out.println("A");}
}
class B extends A{
void sayhi(){ System.out.println("B");}
}

A a = new B();
a.sayhi(); 
```

将打印“B”。

您可以通过声明类 Abstract 并保留已声明但未实现的纯虚拟方法来创建“纯虚拟”方法。或者通过使用接口/实现而不是类/扩展。接口基本上是一个类，其中所有方法都是纯虚拟的。这有一个额外的好处，一个类可以实现多个接口，因为与 C++ 不同，Java 类只能直接继承另一个类。

编辑：

* * *

针对您的评论，Naveen：

如果你说 A a = new A(); a.sayhi(); 它会打印“A”。

Java 术语是动态的。您可以将其视为虚拟的，但这可能会使一些 Java 开发人员感到困惑。至少那些不懂 C++ 的人。在 Java 中没有显式指针，所以我们不需要担心虚拟/非虚拟。没有 VTable，您只需回溯类及其祖先，直到找到所需方法的实现。只有单一继承，所以你不必担心构造函数的顺序（它总是自下而上）。

在 C++ 中，如果你有虚拟方法并执行类似的操作，你会得到不同的行为

```
a->sayhi(); 
```

其中 a 是 A* 指向 B 的实例而不是

```
a.sayhi(); 
```

其中 a 是 A 类型的对象，其中包含 B 类型的对象

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-04-28T18:14:54.427

在 Java 中，虚函数是完全不同的。在 Java 中，虚函数是指可以在其子类中覆盖的函数。所以Java的所有非静态方法都是虚函数。只有 final 和 private 函数没有被继承，所以它们不是虚函数。

所以我们可以说Java中所有非final和private的非静态函数都是虚函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-20T08:54:46.700

所有支持多态的语言都使用 vtables 来解析对正确函数的方法调用。Java 和 .NET 也是如此。

它们都编译为某种中间语言（.NET 的 IL 和 java 的字节码），但 vtable 在这种中间语言中不可见。它由底层引擎支持（CLR for .NET）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T08:31:45.107

我确信 Java 不使用 vtables，因为它能够支持二进制兼容性。

澄清： vtable 是在编译派生/子类时构建的。如果基类/超类布局发生变化，则需要重新编译 d/s 的 vtable。在 Java 中，情况并非如此。您可以更改 b/s 而无需重新编译 d/s。

嗯。有可能在运行时构建 vtable。加载类时。在这种情况下，Java 和 C++ 将相同但不同。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-06-17T13:31:59.593

纯虚函数在 C++ 中。C# 使用接口来达到同样的目的，所以我建议你走那条路。

# .net - 标识符或变量：哪个是哪个？

> ID：460454
> 
> 赞同：6
> 
> 时间：2009-01-20T08:27:59.670
> 
> 标签：.net, variables, identifier

我对我读过的几本 .NET 书籍感到很困惑。有人愿意向我解释什么是标识符以及它与变量有何不同吗？或者变量和标识符是一样的？

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-20T09:03:35.403

变量和标识符之间的区别与人与其姓名之间的区别相同。

变量不是标识符。变量**具有**标识符。它也有一个类型和（如果它被初始化的话）一个值。

例如，指令：

```
bool isClosed = true; 
```

使用名称（标识符）*isClosed*、类型**bool**和 value声明并初始化一个变量`true`。

当然，我们通常会说“isClosed 是一个变量……”“isClosed 的值为 true”……但是就像我们说“Peter 是一名软件工程师”、“John 很累”……那也就是说，我们通过变量名来引用变量。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-01-20T08:38:22.677

标识符是您选择用来描述类、方法、变量等的名称。

变量由标识符引用，并表示可以通过使用标识符来操作的内存区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T08:36:01.963

标识符是识别变量的句法手段。变量引用程序内部的内存，您可以在其中存储值或对对象的引用。标识符是表示该变量的语法方式。标识符的概念通常比仅用于变量更笼统。标识符也可以识别方法。因此，应用于命名变量的相同语法规则也适用于命名方法或函数。类、方法和变量都由标识符标识。

# javascript - 如何在javascript中设置计时器

> ID：460474
> 
> 赞同：10
> 
> 时间：2009-01-20T08:36:51.383
> 
> 标签：javascript, jquery

我想运行以下代码：

```
ajaxUpdate(10); 
```

每次迭代之间有 1 秒的延迟。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-01-20T08:40:37.213

```
var i = window.setInterval( function(){ 
          ajaxUpdate(10); 
 }, 1000 ); 
```

这将每秒调用 ajaxUpdate，直到它停止。

如果您想稍后停止它：

```
window.clearInterval( i ); 
```

但是，如果您只想运行*一次*，

```
var i = window.setTimeout( function(){ 
          ajaxUpdate(10); 
 }, 1000 ); 
```

会成功的，如果你想在它开始运行一次之前停止它运行

```
window.clearTimeout(i); 
```

“window”前缀并不是严格必要的，但它是一个好主意，因为你永远不知道其他人何时可能想在可见范围内创建具有相同名称但行为不同的其他东西。

对于这方面的完整参考，我总是发现 MDC 非常有帮助：

*   [MDC：window.setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)
*   [MDC：window.clearInterval](https://developer.mozilla.org/en/DOM/window.clearInterval)
*   [MDC：window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)
*   [MDC：window.clearTimeout](https://developer.mozilla.org/en/DOM/window.clearTimout)

此外，您可能希望阅读 John Resig 关于计时器的这篇文章，

*   [ejohn.org：Javascript 计时器的工作原理](http://ejohn.org/blog/how-javascript-timers-work/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-20T08:41:59.847

你也可以这样做

```
setTimeout(function() {ajaxUpdate(10)}, 1000); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-20T08:39:55.763

你可以使用[`setInterval()`](https://developer.mozilla.org/en/DOM/window.setInterval)它。创建一个要调用的匿名函数，并以毫秒为单位使用时间：

```
var myInterval = window.setInterval(function() { ajaxUpdate(10); }, 1000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-09-10T16:43:28.107

您可以使用这个[JavaScript Timer](http://www.dailycoding.com/Posts/object_oriented_programming_with_javascript__timer_class.aspx)类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T08:53:56.000

您也可以使用 jQuery Timers： http: [//plugins.jquery.com/project/timers](http://plugins.jquery.com/project/timers)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-01-20T08:42:47.147

您可以使用函数 setTimeout(String fonc, Integer delay)。例如，要每秒执行您的代码，您可以执行以下操作：

```
window.setTimout("ajaxUpate",100); 
```

希望我回答你的问题；）

# python - 生成生成集的算法

> ID：460479
> 
> 赞同：11
> 
> 时间：2009-01-20T08:38:46.047
> 
> 标签：python, algorithm

鉴于此输入：[1,2,3,4]

我想生成一组跨越集：

```
[1] [2] [3] [4]
[1] [2] [3,4]
[1] [2,3] [4]
[1] [3] [2,4]
[1,2] [3] [4]
[1,3] [2] [4]
[1,4] [2] [3]
[1,2] [3,4]
[1,3] [2,4]
[1,4] [2,3]
[1,2,3] [4]
[1,2,4] [3]
[1,3,4] [2]
[2,3,4] [1]
[1,2,3,4] 
```

每个集合都有原始集合的所有元素，排列出现在唯一的子集中。产生这些集合的算法是什么？我已经尝试使用选择、排列、组合、幂集等 Python 生成器函数，但无法获得正确的组合。

2009 年 1 月 20 日

这不是一个家庭作业问题。这是我为 www.projecteuler.net 问题 #118 所做的改进答案。我已经有了一个缓慢的解决方案，但想出了一个更好的方法——除了我无法弄清楚如何进行跨越集。

当我从就职派对回来时，我会发布我的代码。

2009 年 1 月 21 日

这是我使用的最终算法：

```
def spanningsets(items):
    if len(items) == 1:
        yield [items]
    else:
        left_set, last = items[:-1], [items[-1]]
        for cc in spanningsets(left_set):
            yield cc + [last]
            for i,elem in enumerate(cc):
                yield cc[:i] + [elem + last] + cc[i+1:] 
```

@Yuval F：我知道如何做一个powerset。这是一个简单的实现：

```
def powerset(s) :
    length = len(s)
    for i in xrange(0, 2**length) :
        yield [c for j, c in enumerate(s) if (1 << j) & i]
    return 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-20T09:02:54.873

这应该可行，尽管我还没有对其进行足够的测试。

```
def spanningsets(items):
    if not items: return
    if len(items) == 1:
        yield [[items[-1]]]
    else:
        for cc in spanningsets(items[:-1]):
            yield cc + [[items[-1]]]
            for i in range(len(cc)):
                yield cc[:i] + [cc[i] + [items[-1]]] + cc[i+1:]

for sset in spanningsets([1, 2, 3, 4]):
    print ' '.join(map(str, sset)) 
```

输出：

```
[1] [2] [3] [4]
[1, 4] [2] [3]
[1] [2, 4] [3]
[1] [2] [3, 4]
[1, 3] [2] [4]
[1, 3, 4] [2]
[1, 3] [2, 4]
[1] [2, 3] [4]
[1, 4] [2, 3]
[1] [2, 3, 4]
[1, 2] [3] [4]
[1, 2, 4] [3]
[1, 2] [3, 4]
[1, 2, 3] [4]
[1, 2, 3, 4] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-20T08:55:20.070

那这个呢？我还没有测试过，但我稍后会尝试......</p>

我认为这种技术称为动态编程：

1.  拿第一个元素`[1]`
    你能用它创造什么？仅有的`[1]`

2.  拿第二个`[2]`
    现在你有两种可能性：`[1,2]`和`[1] [2]`

3.  拿第三个`[3]`
    用第 2个中的第`[1,2]`一个可以创建`[1,2,3]`，`[1,2] [3]`
    用第 2 个中的第二个`[1] [2]`可以创建`[1,3] [2]`，`[1] [2,3]`并且`[1] [2] [3]`

我希望我试图展示的内容足够清楚。（如果没有，请发表评论！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T09:23:06.300

这是关于该问题[的 SUNY 算法存储库](http://www.cs.sunysb.edu/~algorith/files/generating-subsets.shtml)页面。也许您可以将其中一个代码引用翻译成 python。

编辑：这是一个类似的问题。[这](http://www.cs.sunysb.edu/~algorith/files/generating-partitions.shtml)是关于生成分区的 SUNY 存储库页面，我认为这是正确的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T23:46:59.193

我认为以下方法是为欧拉问题生成它们的最佳方法，因为您可以将返回值替换为素数跨越子集的数量，并且进行乘法将是微不足道的（尤其是使用记忆化）：

```
GenerateSubsets(list)
    partitions = { x | x is subset of list and x contains the lowest element of list }
    foreach (parition in partitions)
        if set == list
            yield { partition }
        else
            yield { partition } x GenerateSubsets(list - part) 
```

关键部分是确保递归端总是有最左边的元素，这样你就不会得到重复。

我有一些乱七八糟的 C# 代码可以做到这一点：

```
 IEnumerable<IEnumerable<List<int>>> GenerateSubsets(List<int> list)
    {
        int p = (1 << (list.Count)) - 2;
        List<int> lhs = new List<int>();
        List<int> rhs = new List<int>();
        while (p >= 0)
        {
            for (int i = 0; i < list.Count; i++)
                if ((p & (1 << i)) == 0)
                    lhs.Add(list[i]);
                else
                    rhs.Add(list[i]);

            if (rhs.Count > 0)
                foreach (var rhsSubset in GenerateSubsets(rhs))
                    yield return Combine(lhs, rhsSubset);
            else
                yield return Combine(lhs, null);

            lhs.Clear();
            rhs.Clear();
            p -= 2;
        }
    }

    IEnumerable<List<int>> Combine(List<int> list, IEnumerable<List<int>> rest)
    {
        yield return list;
        if (rest != null)
            foreach (List<int> x in rest)
                yield return x;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-01-20T13:03:18.040

结果集与空集 {} 一起看起来像幂集（或幂集）的结果[，](http://en.wikipedia.org/wiki/Power_set)但它不是一回事。

我开始了一篇关于类似问题的帖子，该问题有一些实现（尽管在 C# 中）并且在某些情况下更注重速度而不是清晰度。第一个例子应该很容易翻译。也许它无论如何都会给出一些想法。

他们的工作原理是对组合进行计数类似于二进制计数（想象从 0 计数到 16）。您没有说明顺序是否重要，或者只是生成所有组合，因此之后可能需要快速整理一下。

看看这里（忽略奇怪的标题，讨论转向另一个方向[）](https://stackoverflow.com/questions/343654/c-data-structure-to-mimic-cs-listlistint)

# c# - 在 .NET 中将 Markdown 转换为 HTML

> ID：460483
> 
> 赞同：17
> 
> 时间：2009-01-20T08:40:08.133
> 
> 标签：c#, html, .net, markdown

如何在 .NET 中将 markdown 转换为 html？

```
var markdown = "Some **bold** text";
var output = ConvertMarkdownToHtml(markdown)
// Output: <p>Some <strong>bold</strong> text</p> 
```

我将 Markdown 文本存储在数据库中，在显示时需要将其转换为 html。

我知道 StackOverflow 的[WMD 编辑器](https://meta.stackexchange.com/q/121981/209031)（现在是[PageDown](https://github.com/StackExchange/pagedown)），但这只会转换客户端。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2021-02-01T21:49:12.370

TL；DR：现在是 2021 年使用[markdig](https://github.com/xoofx/markdig)

我刚遇到这个问题，答案都很老了。现在看来，基于[commonmark](https://commonmark.org/)的实现是建议的方式。可以在[这里找到许多语言（包括 C#）的实现](https://github.com/commonmark/commonmark-spec/wiki/List-of-CommonMark-Implementations)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2011-04-28T13:44:32.100

另一个似乎正在取得进展的实现是[MarkdownDeep](http://www.toptensoftware.com/markdowndeep/)

这是 C# 和 JavaScript 的完整实现。Nuget 上的[MarkdownHelper](http://blog.dantup.com/2011/04/markdownhelper-on-nuget-using-markdowndeep)现在使用 MarkdownDeep 而不是 MarkdownSharp。

我都使用过，MarkdownDeep 似乎功能更齐全，并且拥有 JavaScript 版本非常适合快速客户端设置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-20T08:44:25.473

[Markdown Sharp](https://github.com/StackExchange/MarkdownSharp)是该站点使用的，可在[NuGet](https://www.nuget.org/packages/MarkdownSharp/)上使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-10-02T14:24:43.763

查看[Markdown Sharp](http://code.google.com/p/markdownsharp/)。它是 Stack Overflow 开发的开源库，比 markdown.net 更健壮/积极开发。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-09-11T19:48:17.477

**降价锐利**

正如 John Leidegren 所指出的，Markdown Sharp 在代码方面也没有那么糟糕，注释掉正则表达式或管理复杂项目并不容易，在最干净的 OOP 中。它绝对非常快速且得到很好的支持。我还没有找到基于标记解析器的方法。这是一个例子：

```
 pattern = string.Format(@"
            (?:
                (?<=\n\n)           # Starting after a blank line
                |                   # or
                \A\n?               # the beginning of the doc
            )
            (                       # save in $1
                [ ]{{0, {0}}}
                <(hr)               # start tag = $2
                \b                  # word break
                ([^<>])*?           #
                /?>                 # the matching end tag
                [ \t]*
                (?=\n{{2,}}|\Z)     # followed by a blank line or end of document
            )", tabWidth - 1);
        text = Regex.Replace(text, pattern, new MatchEvaluator(HtmlEvaluator), RegexOptions.IgnorePatternWhitespace); 
```

# .net - 在 Delphi 中通过 COM 对象使用 .Net 类有时会挂起

> ID：460486
> 
> 赞同：2
> 
> 时间：2009-01-20T08:41:56.367
> 
> 标签：.net, delphi, com, dll, typelib

我有一组用 Delphi.NET (.NET 1.1) 编写的库，我想在我的 Win32 (Delphi) 应用程序中使用它们。对于与性能相关的问题，我决定遵循 COM 路线。

有时，在重建 DLL 后，当我尝试实例化通过 COM 公开的对象时，Win32 应用程序在`CreateComObject`调用时挂起。我怎么解决这个问题？

为了通过 COM 公开 Delphi.NET 库，我在每个类减速上方添加以下属性：

```
[Comvisible(true)] 
[Guid('some guid')] 
[ClassInterface(ClassInterfaceType.AutoDual)] 
```

编译 DLL 后，我生成一个`TLB.pas`文件，该文件包含 DLL 中所有公共和 COM 可见类和接口的定义。这个文件允许我更容易地在我的 Delphi Win32 应用程序中使用 COM 对象。最后，`.dll`我`.tlb`使用`regasm`.

我尝试注销并运行引用 DLL 的 Win32 应用程序；我预计会收到运行时错误，但应用程序再次挂起`CreateComObject()`。

我也尝试过注销和注册 DLL，但没有任何运气。

ps 我正在使用 BDS 2006

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-26T19:26:10.827

我对 COM 的体验很复杂；COM 有时很难稳定下来，所以如果不需要，我经常采取另一条路线。

在这种情况下，您可以尝试使用反向 P/Invoke 绕过 COM。

这里有几篇文章可以帮助你：

[http://blogs.codegear.com/timjarvis/2006/11/10/29270](http://blogs.codegear.com/timjarvis/2006/11/10/29270) [http://www.blong.com/Conferences/BorConUK2002/Interop1/Win32AndDotNetInterop.htm](http://www.blong.com/Conferences/BorConUK2002/Interop1/Win32AndDotNetInterop.htm) [http://www.blong.com/Conferences/ BorCon2004/Interop1/Win32AndDotNetInterop.htm](http://www.blong.com/Conferences/BorCon2004/Interop1/Win32AndDotNetInterop.htm)

[当您在“Delphi Inverse PInvoke”](http://www.google.nl/search?q=delphi+inverse+pinvoke)上搜索时，您可以获得更多点击，但以上是最好的文章。

亲切的问候，

杰伦·普莱默斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-23T07:51:26.653

使用[RemObjects Hydra](http://www.remobjects.com/hydra.aspx)是一种混合托管和非托管 Delphi 代码的简单方法。但不幸的是，它相当昂贵 - 499 美元 :(

更新：试试[Delphi.Net](http://sourceforge.net/projects/delphinet)开源项目。该项目处于非活动状态，但您可以将其用于 Win32 -> dotNet1.1 程序集交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T09:24:34.517

确保以正确的方式关闭代码，而不仅仅是在调试器中停止它。我发现使用调试器杀死进程间应用程序会导致各种问题，通常需要重新启动才能清除它们。这样做需要纪律，因为通常你可以毫无问题地做到这一点。

# crystal-reports - 预览子报表时水晶会消失

> ID：460494
> 
> 赞同：0
> 
> 时间：2009-01-20T08:45:08.997
> 
> 标签：crystal-reports

Crystal 被证明是一个不断增长的 PITA ......无论如何，这是我的全新问题 :-)

我仍在处理余额报告，结构相同，只是现在第三方资产运行良好。它已通过使用子报表实现，但我现在正尝试将其包含在新报表中，因为我需要将所有子报表复制到具有不同过滤条件的新子报表中。

由于这是一项艰巨的任务，我认为最好的方法是再编写一份报告，其中包括以前的报告，因此我进行了测试以使其发挥作用。

当我选择“插入|子报表...”时，我可以找到文件、添加它、定位它并编辑链接。到目前为止，一切都很好。问题是当我尝试预览它时，Crystal 就消失了。我不知道它为什么会这样，显然在消失之前没有显示错误消息。在这种情况下，事件查看器没有帮助，那里也没有消息。谷歌上的快速浏览似乎没有列出任何相关的内容（但有可能我错过了它？）。

我不知道 Crystal Reports 是否有某种日志记录，如果有，那么它一目了然。

你能指出我正确的方向吗？我真是一头雾水。

感谢您的时间，

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-20T15:56:51.420

我不知道我是怎么做到的，但最终它奏效了。但是，我仍然**很想**听听您关于可能导致它发疯的原因，因为我再次**不**知道我是如何使它避免崩溃的，而且无论如何它没有预览任何数据（我确定那里是数据）所以它仍然有点不起作用。

安德鲁

# vim - 在 Vim 中注释/取消注释 ruby 代码块的最优雅的方式是什么？

> ID：460496
> 
> 赞同：38
> 
> 时间：2009-01-20T08:45:25.470
> 
> 标签：vim

在VIM中，此时我需要注释掉一段Ruby代码：

*   我导航到要注释掉的行中的第一列
*   我按 CTRL-v 进入可视块模式
*   我向下导航到我想结束操作的地方
*   `r<space>`如果我想取消注释代码或者我想将其注释掉，我输入`r#`。

这个工作流程对我来说似乎没问题，有什么方法可以改进这个过程吗？在 vim 中注释或取消注释 ruby​​ 代码部分还有其他技巧吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-01-23T16:26:55.210

我做的几乎和你一样。

评论：

*   `CTRL-V`使用then 进行可视块选择`I#`（插入`#`开头）

取消注释：

*   `CTRL-V`使用then 进行可视块选择`X`（删除行上的第一个符号）

请注意大写`I`和`X`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-21T00:56:39.583

对于每种语言（ftplugin），我都会编写映射来添加或删除评论前导并将光标向下移动一行。例如，在我的 python ftplugin 中，我有这个：

```
noremap   <buffer> K      :s,^\(\s*\)[^# \t]\@=,\1#,e<CR>:nohls<CR>zvj
noremap   <buffer> <C-K>  :s,^\(\s*\)#\s\@!,\1,e<CR>:nohls<CR>zvj 
```

我发现这是一个非常灵活的设置：

*   点击`K`评论当前行。
*   反复点击`K`以评论很多行。
*   `6K`评论 6 行。
*   `K`在视觉模式下评论整个选择。
*   一切都可以使用相同的方式取消注释`CTRL-K`
*   如果行已被注释，则它们不会`#`在开头添加额外的内容。
*   如果 a`#`后跟一个空格，则它被视为文本注释并且不会被触及。

我对每种语言稍作调整。它不适用于旧 C 注释 (/*...*/)，但我还是不想使用它们。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-20T17:20:56.850

有些人似乎喜欢[书呆子评论者](http://www.vim.org/scripts/script.php?script_id=1218)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-22T05:03:00.600

### 我使用这些插件：

1.  由 Tim Pope[编写的 vim-commentary ，它定义了一个注释运算符](https://github.com/tpope/vim-commentary)`gc`
2.  [vim-textobj-rubyblock](https://github.com/nelstrom/vim-textobj-rubyblock) ，它为 Ruby do ... 块 定义`ir`（在 Ruby 块内）和（在 Ruby 块周围）。`ar`
3.  [vim-ruby](https://github.com/vim-ruby/vim-ruby)定义`im`/`am`用于 inside/around Ruby 方法，和`iM`/`aM`用于 inside/around Ruby 类。

### 使用这种组合，我可以在普通模式下轻松注释/取消注释特定于 Ruby 的代码，例如：

1.  `gcir`/`gcar`在 Ruby do/end 块内/周围注释。
2.  `gcim`/`gcam`在 Ruby 方法内部/周围评论。
3.  `gciM`/`gcaM`在 Ruby 类内部/周围评论。
4.  加上普通`gcc`的评论地图喜欢评论一行，或者`5gcc`评论 5 行。

总而言之，它非常像 Vim 和自然。

希望有帮助。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-01-20T09:50:59.520

我喜欢使用以下内容：

*   将光标放在要注释掉的第一行
*   输入 ma（无冒号）在该行上放置一个标记
*   转到要注释掉的块的最后一行
*   输入 :'a,.s/^/#/ 然后输入

也就是说，从包含标记“a”的行到当前行，用散列替换行的开头。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-01-20T09:06:05.867

你试过[EnhCommentify.vim](http://www.vim.org/scripts/script.php?script_id=23)或[tComment.vim](http://www.vim.org/scripts/script.php?script_id=1173)吗？

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-01-21T00:35:11.560

在块模式下，在视觉上选择要注释的文本后，按**I**（即大写 i），键入**#**，最后按退出键。它基本上与您当前使用的过程相同，但使用插入而不是替换。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-10-12T21:34:05.503

你也可以这样做：

*   移到第一行注释掉
*   然后按“ESC”
*   点击`Ctrl + q`进入可视块模式
*   将完成移至最后一行以注释掉
*   点击`I`, 按 注释掉`#`
*   打`ESC`

并取消注释：

*   移至`#`评论的第一条
*   点击`Ctrl + q`进入可视块模式
*   将完成移至最后一行以注释掉
*   点击`d`删除评论字符

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-02T21:21:31.317

我会向您推荐一种使用宏进行评论的替代方法

首先，只需将其放入您的`.vimrc`

```
let @c="I#\ej"
let @u="^xj" 
```

例如

要评论 12 行：

1.  导航到要开始评论的第一行。
2.  在命令模式下输入`12@c`注释 12 行

取消注释 12 行：

1.  导航到要取消注释的第一行。
2.  `12@u`在命令模式下键入以取消注释 12 行

**结论**

评论：

```
[quantifier]@c 
```

取消注释：

```
[quantifier]@u 
```

注意：这些命令将从当前行开始注释/取消注释。

额外的：

为了提高你的导航`number.vim`可以帮助你很多关于量词的数字。

[https://github.com/myusuf3/numbers.vim](https://github.com/myusuf3/numbers.vim)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-09-29T14:23:12.207

尝试使用[Ruby block进行](https://github.com/nelstrom/vim-textobj-rubyblock)[T-comment](http://git://github.com/tsaleh/vim-tcomment.git)。

我将 T 评论映射到 //。

```
" Easy commenting
nnoremap // :TComment<CR>
vnoremap // :TComment<CR> 
```

这允许从 Ruby 块中的任何位置将其注释掉：

```
var  (visual around Ruby)
//   (toggle comments) 
```

请注意，Ruby 块有几个需要安装的插件依赖项，请参阅我的[Vimfiles](https://github.com/krisleech/vimfiles)示例。

# php - 使用 php 脚本提供 postscript 文件

> ID：460500
> 
> 赞同：2
> 
> 时间：2009-01-20T08:48:30.363
> 
> 标签：php, postscript

我想提供一个 postscript 文件的链接，但首先我想制作一个脚本来监视该文件的下载。该链接必须是“直接”的，所以我添加`.ps`了由 PHP 解释的扩展。一开始脚本会打开文本文件，写入一些信息，然后我不知道该怎么做。
基本上我有这样的东西（文件`apendix.ps`）：

```
header('Content-type: application/postscript');
header('Location: appendix.ps'); 
```

但是，该文件的链接必须具有不同的名称，因此最终我提供的文件与“直接”链接中的文件不同。
是否可以编写一个`appendix.ps`在开始时执行某些操作然后提供真实`appendix.ps`文件的脚本？

问候
克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T08:50:08.143

您可以使用[readfile](http://nz2.php.net/readfile)：

```
header('Content-type: application/postscript');
readfile('appendix.ps'); 
```

您可能还想发送一个“ [Content-Disposition](http://www.ietf.org/rfc/rfc2183.txt) ”标头来向用户代理提示其打算如何显示。

如果您想建议在新窗口中打开它，即：触发下载动作：

```
header('Content-Disposition: attachment'); 
```

如果您想建议在浏览器中显示它，如果可以的话：

```
header('Content-Disposition: inline'); 
```

当然，请注意这些只是*建议*，浏览器可能无法发挥作用，甚至无法发挥作用，但它们很方便。

# svn - 使用中央存储库是否违背了 GIT 的目的？

> ID：460502
> 
> 赞同：33
> 
> 时间：2009-01-20T08:49:22.967
> 
> 标签：svn, git, dvcs

如果您在一个*公司*环境中，有很多人在开发一个特定的应用程序，那么拥有一个官方的中央存储库是否违背了[分布式版本控制系统的原则？](http://en.wikipedia.org/wiki/Distributed_revision_control)

有时我很难理解公司环境中分布式版本控制系统（如[GIT ）的概念。](http://git-scm.com/)如果您没有中央存储库，那么是否需要 PITA 才能确定谁拥有最新的更新版本，谁拥有每个人都需要获取的功能 x 或错误修复 y，等等等等。

[以与SVN](http://subversion.tigris.org/)类似的方式使用它是否违背了[GIT](http://git-scm.com/)的目的，它有一个每个人都可以从中推/拉的中央存储库？每次我想到这样做时，我都觉得我错过了所有事情的重点。

有人可以启发我吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-01-20T08:55:16.310

并不真地。DCVS 只是允许在不涉及中央存储库的情况下如何在开发人员之间进行交互方面更自由。官方存储库仅是官方**共识**。Linux 也有一个中央存储库，从中创建“官方”内核版本，但中央、“官方”、存储库和客户端存储库之间没有物理区别，因为它在集中式 VCS 中。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-01-20T10:43:30.100

您可能正在按照此图的思路思考：

![替代文字](https://betterexplained.com/wp-content/uploads/version_control/distributed/distributed_example.png)

这可能看起来像是来自 CVCS 的混乱。“我们需要一些命令”，我听到你说？

> 如果您没有中央存储库，那么是否需要 PITA 才能确定谁拥有最新的更新版本，谁拥有每个人都需要获取的功能 x 或错误修复 y，等等等等。

是的。与 CVCS 不同 没有真正的“最新版本”。如果没有中心位置，您不会立即知道是否要查看 Sue、Joe 或 Eve 的最新版本。中心位置有助于阐明最新的“稳定”版本是什么。

有点像这样：

![替代文字](https://betterexplained.com/wp-content/uploads/version_control/distributed/distributed_push_pull.png)

还可能值得注意的是，根据组织内人群的职权范围，可能存在多个感知的中央存储库。

想象一个管理多个开发团队的项目经理，每个团队可能有一个他们推送到的“中央”存储库。每周，项目经理可能会将每个团队的更改拉入他的“中央”存储库，合并它们并将它们推送回他的团队的“中央”存储库。

这可能不是一个很好的例子（我仍然在思考这一切），但这只是一个项目经理。再加入几个项目/经理和 QA 团队，然后你可能会看到我来自哪里..

--

*   图表和一段[由 Kalid Azad 的文章提供](http://betterexplained.com/articles/intro-to-distributed-version-control-illustrated/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-20T08:58:27.037

使用分布式源代码控制，通过策略而不是源代码控制工具架构建立一个中央“官方”存储库。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-01-20T10:08:41.963

绝对不会违背 Git 的目的。

即使有一个中央的官方存储库，使用 Git 或任何其他 DVCS 的优势*仍然*是源代码控制是分散的。也就是说，您可以获取存储库的副本，处理您的代码，并在需要时每隔几分钟进行一次本地提交。您不必担心提交是在破坏构建的半完成代码上，它都是本地的。（而且非常快。）

然后，当所有工作完成后，您可以清理历史并将完成的更改以同质、干净的状态推送到中央存储库。

我认为你不能低估将“私人”提交和“公共”推送分开的优势。即使您是唯一受益于如此小粒度的人，它也允许跟踪更改。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-20T08:55:38.850

如果您查看此[Git 演示文稿](http://www.slideshare.net/chacon/getting-git?src=embed)（幻灯片 475 及以下），Git 完全支持中央存储库模型。

您可以强迫任何希望`git push`其发展的人先做出`git fetch + git merge`第一个，然后再推动。

这根本不会违背 Git 的目的，并确保每个人都彼此“同步”。

[JesperE 提到](https://stackoverflow.com/questions/460502#460513)的 Linus 的“官方”存储库的不同之处在于它由不同的工作流程管理，即“独裁者和副手”模型，其中写入访问（推送）仅授予 Linus，而读取授予任何人。

现在：“这是否违背了 DVC 的观点”？

不，您仍然有分布式存储库，每个开发人员一个，他们可以根据自己的内部团队工作流程在自己的存储库之间获取/合并。
但是，如果他们想为中央存储库做出贡献，他们必须首先了解该存储库的最新历史。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-20T10:46:14.290

DVCS 的主要好处之一是您可以从“官方”存储库中获取最新版本，然后对它进行冒险。您可以在本地提交更改并随意回滚。这也意味着您甚至可以在没有访问中央存储库的情况下工作，并且仍然拥有源代码控制的好处。

我认为只要有一点纪律，这个模型就可以很好地工作。[本文](http://bazaar-vcs.org/Workflows)很好地解释了您可以采用的各种模型

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-20T09:05:24.603

像 Git 这样的 DVCS 不会强迫您使用中央存储库。当然，可以将一个存储库声明为“中央”或“官方”或其他任何内容，并且在公司环境中，中央存储库是有意义的——如果不是为了开发，那么至少是为了备份目的。

# sql-server - 如何使用 SQL Server 2005 和 BCP 9 中的批量插入从分号分隔文件中保存数据？

> ID：460508
> 
> 赞同：0
> 
> 时间：2009-01-20T08:53:22.677
> 
> 标签：sql-server, sql-server-2005, insert, bcp, bulk

这是我的示例数据：

```
1;a;b;c;; 2;d;e;f;; 3;g;h;i;; 
4;j;k;l;; 5;m;n;o;; 
6;p;q;r;; 
```

这是我的示例格式文件（BCP 9）：

```
9.0
7
1 SQLCHAR 0 0 ""  0 x Latin1_General_CI_AS
2 SQLCHAR 0 0 ";" 2 i Latin1_General_CI_AS
3 SQLCHAR 0 0 ";" 3 s Latin1_General_CI_AS
4 SQLCHAR 0 0 ";" 4 t Latin1_General_CI_AS
5 SQLCHAR 0 0 ";" 5 u Latin1_General_CI_AS
6 SQLCHAR 0 0 ";" 6 v Latin1_General_CI_AS
7 SQLCHAR 0 0 "\r\n" 0 x Latin1_General_CI_AS 
```

这是表结构：

```
create table bcp 
(
    id int identity, 
    i int, 
    s varchar(2), 
    t varchar(2), 
    u varchar(2), 
    v varchar(2), 
    dte datetime default getdate()
) 
```

问题是当我使用“\r\n”时，只有1、4、6不是全部保存，但是当我尝试使用“\0”时，只保存第一条记录。我将如何解决这个问题？

另一个问题，分号后空格的行终止符是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-26T15:35:13.307

asiaenforcer，我很抱歉一周不在线！

使用上面的数据，我想我已经明白了...

首先，我的目标表有问题 - 语句“CREATE TABLE [dbo].SansayRawInfo NOT NULL”不是正确的语法，所以通过查看您以前的格式文件，我相信您错过了一个列 (RawDataId)，因此目标我想出的表是...

```
CREATE TABLE [dbo].[SansayRawInfo](
    [RawDataId] [int] IDENTITY(1,1) NOT NULL,
    [Sequence] [varchar](5) NULL,
    [Version] [varchar](5) NULL,
    [RecordType] [varchar](5) NULL,
    [ConnectionType] [varchar](5) NULL,
    [SessionID] [varchar](5) NULL,
    [ReleaseCause] [varchar](5) NULL,
    [StartTime] [varchar](5) NULL,
    [AnswerTime] [varchar](5) NULL,
    [ReleaseTOD] [varchar](5) NULL,
    [WestofGMT] [varchar](5) NULL,
    [RelCauseTxt] [varchar](5) NULL,
    [RelCauseBin] [varchar](5) NULL,
    [1strelease] [varchar](5) NULL,
    [OrgTrunkId] [varchar](5) NULL,
    [OrgProtocol] [varchar](5) NULL,
    [OrgSrcNo] [varchar](5) NULL,
    [OrgSrcHost] [varchar](5) NULL,
    [OrgDestNo] [varchar](5) NULL,
    [OrgDestHost] [varchar](5) NULL,
    [OrgCallID] [varchar](5) NULL,
    [OrgRemPayIPAdd] [varchar](5) NULL,
    [OrgRemPayUDPAdd] [varchar](5) NULL,
    [OrgLocPayIPAdd] [varchar](5) NULL,
    [OrgLocPayUDPAdd] [varchar](5) NULL,
    [OrgCodecList] [varchar](5) NULL,
    [OrgIngrPck] [varchar](5) NULL,
    [OrgEgrPck] [varchar](5) NULL,
    [OrgIngrOct] [varchar](5) NULL,
    [OrgEgrOct] [varchar](5) NULL,
    [OrgIngrPckLoss] [varchar](5) NULL,
    [OrgIngrDelay] [varchar](5) NULL,
    [OrgIngrPckJitter] [varchar](5) NULL,
    [TermTrunkId] [varchar](5) NULL,
    [TermProtocol] [varchar](5) NULL,
    [TermSrcNo] [varchar](5) NULL,
    [TermSrcHost] [varchar](5) NULL,
    [TermDestNo] [varchar](5) NULL,
    [TermDestHost] [varchar](5) NULL,
    [TermCallID] [varchar](5) NULL,
    [TermRemPayIPAdd] [varchar](5) NULL,
    [TermRemPayUDPAdd] [varchar](5) NULL,
    [TermLocPayIPAdd] [varchar](5) NULL,
    [TermLocPayUDPAdd] [varchar](5) NULL,
    [TermCodecList] [varchar](5) NULL,
    [TermIngrPck] [varchar](5) NULL,
    [TermEgrPck] [varchar](5) NULL,
    [TermIngrOct] [varchar](5) NULL,
    [TermEgrOct] [varchar](5) NULL,
    [TermIngrPckLoss] [varchar](5) NULL,
    [TermIngrDelay] [varchar](5) NULL,
    [TermIngrPckJitter] [varchar](5) NULL,
    [FinRouteInd] [varchar](5) NULL,
    [RoutingDigits] [varchar](5) NULL,
    [CallDuration] [varchar](5) NULL,
    [PostDialDelay] [varchar](5) NULL,
    [RingTime] [varchar](5) NULL,
    [Duration] [varchar](5) NULL,
    [ConfID] [varchar](5) NULL,
    [RPIDANI] [varchar](5) NULL,
    [Status] [bit] NULL CONSTRAINT [DF__SansayRaw__Statu__7C8480AE]  DEFAULT ((0))
) ON [PRIMARY] 
```

**请注意**

*   在上面的创建表脚本中，所有 varchars 的长度都是 5（基于您的示例数据而不是您的格式文件），尽管这不应该有所作为，因为您的所有长度都更大（并且在您的创建表脚本中没有指定）。
*   我的脚本中没有排序规则语句，因为 SQL_Latin1_General_CP1_CI_AS 是我的数据库默认值，我只是在 SSMS 中编写了表的脚本。同样，这不应该引起任何问题。

所以，我的下一步是根据您提供的示例原始数据检查格式文件，我想出了以下格式文件......

```
9.0 
61 
1 SQLINT 0 0 "" 0 RawDataId "" 
2 SQLCHAR 0 20 ";" 2 Sequence SQL_Latin1_General_CP1_CI_AS 
3 SQLCHAR 0 30 ";" 3 Version SQL_Latin1_General_CP1_CI_AS 
4 SQLCHAR 0 44 ";" 4 RecordType SQL_Latin1_General_CP1_CI_AS 
5 SQLCHAR 0 26 ";" 5 ConnectionType SQL_Latin1_General_CP1_CI_AS 
6 SQLCHAR 0 42 ";" 6 SessionID SQL_Latin1_General_CP1_CI_AS 
7 SQLCHAR 0 14 ";" 7 ReleaseCause SQL_Latin1_General_CP1_CI_AS 
8 SQLCHAR 0 42 ";" 8 StartTime SQL_Latin1_General_CP1_CI_AS 
9 SQLCHAR 0 42 ";" 9 AnswerTime SQL_Latin1_General_CP1_CI_AS 
10 SQLCHAR 0 42 ";" 10 ReleaseTOD SQL_Latin1_General_CP1_CI_AS 
11 SQLCHAR 0 42 ";" 11 WestofGMT SQL_Latin1_General_CP1_CI_AS 
12 SQLCHAR 0 42 ";" 12 RelCauseTxt SQL_Latin1_General_CP1_CI_AS 
13 SQLCHAR 0 28 ";" 13 RelCauseBin SQL_Latin1_General_CP1_CI_AS 
14 SQLCHAR 0 22 ";" 14 1strelease SQL_Latin1_General_CP1_CI_AS 
15 SQLCHAR 0 64 ";" 15 OrgTrunkId SQL_Latin1_General_CP1_CI_AS 
16 SQLCHAR 0 16 ";" 16 OrgProtocol SQL_Latin1_General_CP1_CI_AS 
17 SQLCHAR 0 138 ";" 17 OrgSrcNo SQL_Latin1_General_CP1_CI_AS 
18 SQLCHAR 0 138 ";" 18 OrgSrcHost SQL_Latin1_General_CP1_CI_AS 
19 SQLCHAR 0 138 ";" 19 OrgDestNo SQL_Latin1_General_CP1_CI_AS 
20 SQLCHAR 0 138 ";" 20 OrgDestHost SQL_Latin1_General_CP1_CI_AS 
21 SQLCHAR 0 138 ";" 21 OrgCallID SQL_Latin1_General_CP1_CI_AS 
22 SQLCHAR 0 26 ";" 22 OrgRemPayIPAdd SQL_Latin1_General_CP1_CI_AS 
23 SQLCHAR 0 16 ";" 23 OrgRemPayUDPAdd SQL_Latin1_General_CP1_CI_AS 
24 SQLCHAR 0 26 ";" 24 OrgLocPayIPAdd SQL_Latin1_General_CP1_CI_AS 
25 SQLCHAR 0 16 ";" 25 OrgLocPayUDPAdd SQL_Latin1_General_CP1_CI_AS 
26 SQLCHAR 0 138 ";" 26 OrgCodecList SQL_Latin1_General_CP1_CI_AS 
27 SQLCHAR 0 20 ";" 27 OrgIngrPck SQL_Latin1_General_CP1_CI_AS 
28 SQLCHAR 0 20 ";" 28 OrgEgrPck SQL_Latin1_General_CP1_CI_AS 
29 SQLCHAR 0 20 ";" 29 OrgIngrOct SQL_Latin1_General_CP1_CI_AS 
30 SQLCHAR 0 20 ";" 30 OrgEgrOct SQL_Latin1_General_CP1_CI_AS 
31 SQLCHAR 0 20 ";" 31 OrgIngrPckLoss SQL_Latin1_General_CP1_CI_AS 
32 SQLCHAR 0 20 ";" 32 OrgIngrDelay SQL_Latin1_General_CP1_CI_AS 
33 SQLCHAR 0 20 ";" 33 OrgIngrPckJitter SQL_Latin1_General_CP1_CI_AS 
34 SQLCHAR 0 64 ";" 34 TermTrunkId SQL_Latin1_General_CP1_CI_AS 
35 SQLCHAR 0 16 ";" 35 TermProtocol SQL_Latin1_General_CP1_CI_AS 
36 SQLCHAR 0 138 ";" 36 TermSrcNo SQL_Latin1_General_CP1_CI_AS 
37 SQLCHAR 0 138 ";" 37 TermSrcHost SQL_Latin1_General_CP1_CI_AS 
38 SQLCHAR 0 138 ";" 38 TermDestNo SQL_Latin1_General_CP1_CI_AS 
39 SQLCHAR 0 138 ";" 39 TermDestHost SQL_Latin1_General_CP1_CI_AS 
40 SQLCHAR 0 138 ";" 40 TermCallID SQL_Latin1_General_CP1_CI_AS 
41 SQLCHAR 0 26 ";" 41 TermRemPayIPAdd SQL_Latin1_General_CP1_CI_AS 
42 SQLCHAR 0 16 ";" 42 TermRemPayUDPAdd SQL_Latin1_General_CP1_CI_AS 
43 SQLCHAR 0 26 ";" 43 TermLocPayIPAdd SQL_Latin1_General_CP1_CI_AS 
44 SQLCHAR 0 16 ";" 44 TermLocPayUDPAdd SQL_Latin1_General_CP1_CI_AS 
45 SQLCHAR 0 138 ";" 45 TermCodecList SQL_Latin1_General_CP1_CI_AS 
46 SQLCHAR 0 20 ";" 46 TermIngrPck SQL_Latin1_General_CP1_CI_AS 
47 SQLCHAR 0 20 ";" 47 TermEgrPck SQL_Latin1_General_CP1_CI_AS 
48 SQLCHAR 0 20 ";" 48 TermIngrOct SQL_Latin1_General_CP1_CI_AS 
49 SQLCHAR 0 20 ";" 49 TermEgrOct SQL_Latin1_General_CP1_CI_AS 
50 SQLCHAR 0 20 ";" 50 TermIngrPckLoss SQL_Latin1_General_CP1_CI_AS 
51 SQLCHAR 0 20 ";" 51 TermIngrDelay SQL_Latin1_General_CP1_CI_AS 
52 SQLCHAR 0 20 ";" 52 TermIngrPckJitter SQL_Latin1_General_CP1_CI_AS 
53 SQLCHAR 0 44 ";" 53 FinRouteInd SQL_Latin1_General_CP1_CI_AS 
54 SQLCHAR 0 74 ";" 54 RoutingDigits SQL_Latin1_General_CP1_CI_AS 
55 SQLCHAR 0 16 ";" 55 CallDuration SQL_Latin1_General_CP1_CI_AS 
56 SQLCHAR 0 16 ";" 56 PostDialDelay SQL_Latin1_General_CP1_CI_AS 
57 SQLCHAR 0 16 ";" 57 RingTime SQL_Latin1_General_CP1_CI_AS 
58 SQLCHAR 0 20 ";" 58 Duration SQL_Latin1_General_CP1_CI_AS 
59 SQLCHAR 0 46 ";" 59 ConfID SQL_Latin1_General_CP1_CI_AS 
60 SQLCHAR 0 74 ";" 60 RPIDANI SQL_Latin1_General_CP1_CI_AS 
61 SQLCHAR 0 0 " " 0 Status "" 
```

我认为这里的关键位是最后一行中的单个空格作为行分隔符**61 SQLCHAR 0 0 " " 0 Status ""**

然后我运行了以下语句...

```
BULK INSERT dbo.SansayRawInfo 
FROM 'C:\MYPATH\data.txt' 
WITH (FORMATFILE = 'C:\MYPATH\fmt.fmt') 
```

它正确导入了前 7 行。最后一行没有导入，因为在我的数据文件中没有尾随空格行终止符，因为所有其他行都有。当我将这个最后的空间添加到数据文件中时，我得到了所有 8 行。如果您的源数据是系统生成的，我希望它会打印出尾随空格 - 如果不是，您需要重新访问您的源数据，因为 SQL Server 要求它在整个集合中保持一致，并且可能会丢失不一致的行。

最后我的结果数据如下所示......

```
8   1   a1  a2  a3  a4  a5  a6  a7  a8  a9  a10 a11 a12 a13 a14 a15 a16 a17 a18 a19 a20 a21 a22 a23 a24 a25 a26 a27 a28 a29 a30 a31 a32 a33 a34 a35 a36 a37 a38 a39 a40 a41 a42 a43 a44 a45 a46 a47 a48 a49 a50 a51 a52 a53 a54 a55 a56 a57 NULL    0
9   2   b1  b2  b3  b4  b5  b6  b7  b8  b9  b10 b11 b12 b13 b14 b15 b16 b17 b18 b19 b20 b21 b22 b23 b24 b25 b26 b27 b28 b29 b30 b31 b32 b33 b34 b35 b36 b37 b38 b39 b40 b41 b42 b43 b44 b45 b46 b47 b48 b49 b50 b51 b52 b53 b54 b55 b56 b57 NULL    0
10  3   c1  c2  c3  c4  c5  c6  c7  c8  c9  c10 c11 c12 c13 c14 c15 c16 c17 c18 c19 c20 c21 c22 c23 c24 c25 c26 c27 c28 c29 c30 c31 c32 c33 c34 c35 c36 c37 c38 c39 c40 c41 c42 c43 c44 c45 c46 c47 c48 c49 c50 c51 c52 c53 c54 c55 c56 c57 NULL    0
11  4   d1  d2  d3  d4  d5  d6  d7  d8  d9  d10 d11 d12 d13 d14 d15 d16 d17 d18 d19 d20 d21 d22 d23 d24 d25 d26 d27 d28 d29 d30 d31 d32 d33 d34 d35 d36 d37 d38 d39 d40 d41 d42 d43 d44 d45 d46 d47 d48 d49 d50 d51 d52 d53 d54 d55 d56 d57 NULL    0
12  5   e1  e2  e3  e4  e5  e6  e7  e8  e9  e10 e11 e12 e13 e14 e15 e16 e17 e18 e19 e20 e21 e22 e23 e24 e25 e26 e27 e28 e29 e30 e31 e32 e33 e34 e35 e36 e37 e38 e39 e40 e41 e42 e43 e44 e45 e46 e47 e48 e49 e50 e51 e52 e53 e54 e55 e56 e57 NULL    0
13  6   ef1 ef2 ef3 ef4 ef5 ef6 ef7 ef8 ef9 ef10    ef11    ef12    ef13    ef14    ef15    ef16    ef17    ef18    ef19    ef20    ef21    ef22    ef23    ef24    ef25    ef26    ef27    ef28    ef29    ef30    ef31    ef32    ef33    ef34    ef35    ef36    ef37    ef38    ef39    ef40    ef41    ef42    ef43    ef44    ef45    ef46    ef47    ef48    ef49    ef50    ef51    ef52    ef53    ef54    ef55    ef56    ef57    NULL    0
14  7   g1  g2  g3  g4  g5  g6  g7  g8  g9  g10 g11 g12 g13 g14 g15 g16 g17 g18 g19 g20 g21 g22 g23 g24 g25 g26 g27 g28 g29 g30 g31 g32 g33 g34 g35 g36 g37 g38 g39 g40 g41 g42 g43 g44 g45 g46 g47 g48 g49 g50 g51 g52 g53 g54 g55 g56 g57 NULL    0
15  8   h1  h2  h3  h4  h5  h6  h7  h8  h9  h10 h11 h12 h13 h14 h15 h16 h17 h18 h19 h20 h21 h22 h23 h24 h25 h26 h27 h28 h29 h30 h31 h32 h33 h34 h35 h36 h37 h38 h39 h40 h41 h42 h43 h44 h45 h46 h47 h48 h49 h50 h51 h52 h53 h54 h55 h56 h57 NULL    0 
```

**请注意**

我的 RawDataId 从 8 开始，因为该表之前已被清除并重新填充。

希望这会有所帮助，并且您不必重新访问源数据，因为这可能是正确的痛苦:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T10:22:23.717

好的，我让这个为我工作。我使用了以下...

数据文件（基于您的示例）...

```
1;a;b;c;; 
2;d;e;f;; 
3;g;h;i;; 
4;j;k;l;; 
5;m;n;o;; 
6;p;q;r;; 
```

每行都以返回字符终止-而不是您的示例中的连续行

然后使用格式文件...

```
9.0
7
1 SQLCHAR 0 0 "" 0 x ""
2 SQLCHAR 0 0 ";" 2 i Latin1_General_CI_AS
3 SQLCHAR 0 0 ";" 3 s Latin1_General_CI_AS
4 SQLCHAR 0 0 ";" 4 t Latin1_General_CI_AS
5 SQLCHAR 0 0 ";" 5 u Latin1_General_CI_AS
6 SQLCHAR 0 0 ";" 6 v Latin1_General_CI_AS
7 SQLCHAR 0 0 "" 0 x "" 
```

并得到结果集...

```
 1 1   a   b   c   NULL    20/01/2009 10:17:51
  2 2   d   e   f   NULL    20/01/2009 10:17:51
  3 3   g   h   i   NULL    20/01/2009 10:17:51
  4 4   j   k   l   NULL    20/01/2009 10:17:51
  5 5   m   n   o   NULL    20/01/2009 10:17:51
  6 6   p   q   r   NULL    20/01/2009 10:17:51 
```

我相信这里的关键是如何跳过标识字段的列和目标表中的默认值。[这里](http://msdn.microsoft.com/en-us/library/ms179250.aspx)有一篇很好的 MSDN 文章

# openldap - 如何找出与我的 slapd LDAP 服务器的连接数？

> ID：460510
> 
> 赞同：1
> 
> 时间：2009-01-20T08:54:37.900
> 
> 标签：openldap

我有一个对我的应用程序至关重要的 slapd LDAP 服务器。我想监视它以检测它何时过载或是否失败。

不幸的是，我们被一个非常旧的 slapd 版本困住了，它有一个已知的错误：它不能处理超过 64 个并发连接。如果客户端尝试打开任何更多的连接 slapd 块，导致各种问题。

我被要求制作一个工具来查找在任何给定时刻打开的连接数 - 这可能用于自动监控工具，但我怎样才能找出 slapd 的状态？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T09:37:55.693

最好的工具是[lsof](http://people.freebsd.org/~abe/)。

```
lsof -i tcp:389 
```

将向您显示到您的 LDAP 服务器的所有 TCP 连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T09:36:35.913

不直接与 slapd 相关，但您是否想过使用**netstat**来获取已建立的连接数？

像这样的东西可以做到：

```
netstat -na | grep ESTABLISHED | grep -E "^tcp\s+[0-9]+\s+[0-9]+\s+[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:3306" | wc -l 
```

这是一个用于 ubuntu linux - 打印到 mysql 服务器的连接数。因此，您需要将端口号更改为 389（或用于 slapd 的端口）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:21:09.997

您可以使用 OpenLDAP 的监视器后端来查询 ldapserver 本身以获取它当前拥有的连接数。

# security - 缓冲区溢出如何用于利用计算机？

> ID：460519
> 
> 赞同：19
> 
> 时间：2009-01-20T08:59:55.973
> 
> 标签：security, buffer-overflow, exploit

[缓冲区溢出](http://en.wikipedia.org/wiki/Buffer_overflow)如何用于利用计算机？

一个人如何能够仅仅通过导致[堆栈](http://en.wikipedia.org/wiki/Stack_buffer_overflow)或[堆](http://en.wikipedia.org/wiki/Heap_overflow)溢出来执行任意代码？

我知道程序内存的某些部分被覆盖了，这是不应该的，但我不明白这如何导致执行他们自己的代码。另外，第三方的恶意代码必须用目标处理器的汇编语言编写吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-20T09:02:04.470

这是关于该主题的最广为人知的文档：[Smashing the Stack for Fun and Profit](http://insecure.org/stf/smashstack.html)

但是，“堆栈溢出”与缓冲区溢出无关。堆栈溢出通常只是错误代码中的错误情况，不能用于崩溃 (DoS) 之外的任何事情。

编辑：您还询问了堆溢出。这是一个关于这个主题的好文档：[http ://www.w00w00.org/files/articles/heaptut.txt](http://www.w00w00.org/files/articles/heaptut.txt)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-20T09:02:40.380

当您跳入子程序时，堆栈包含数据和返回地址。如果您设法将特定地址放在返回地址所在的堆栈上，则可以强制 CPU 跳转到特定的内存位置，即您放置自己的代码的位置。那是缓冲区溢出。堆溢出有点不同，更难利用。

堆栈溢出只是表明您已用完堆栈空间（通常更有限，尤其是在内核中）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-20T14:11:43.143

想象街道上有两座房子。一个是你朋友的房子，一个是他邪恶的偏执狂邻居的房子，三个门。邪恶的偏执邻居从不进出，他的地方被锁得很紧。

现在，你的朋友是一个非常值得信赖的朋友，他会让你在他的地方存放任何东西，一个接一个地放下箱子，从一面墙开始。事实上，他是个好朋友，他会一个接一个地放下箱子，不检查他是否撞到墙上，直到他们在半空中继续前进，最后穿过街上的另外两间房子，进入邪恶的偏执狂邻居的房子。但是你的朋友相信你不会那样做，因为他喜欢你（而且他有点天真）。

因此，您有机会通过利用您信任的好朋友，将一些东西放入邪恶的偏执邻居的房子里。

* * *

替换以下术语，您将看到与缓冲区溢出攻击的类比：

*   "你朋友的房子" --> "程序的一部分，不检查缓冲区溢出"
*   “他邪恶的偏执邻居的房子”->“程序的另一部分应该是安全的”
*   “盒子”->“不检查缓冲区溢出的程序的参数/参数”

只有当有人弄清楚内存的安全区域在哪里，以及必须将什么作为参数传递给相关程序时，这才是成功的，这最终会在安全区域中产生预期的效果。（无论是数据，还是导致漏洞利用者代码被执行的代码）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-20T10:14:22.547

几乎所有现代处理器在调用子程序时都会将返回地址推送到与本地数据（堆栈）相同的区域。对于不检查变量上限的例程（特别是 strcpy 函数），可能会发生指令地址重定向（缓冲区溢出）。

```
void make(char *me)
{
    char sandwich[4]; // local data, this is in stack.  the buffer for data is too small
    strcpy(sandwich, me);
    puts(sandwich);

    // implicit "return;" the return instruction(RET on Intel) instructs the processor to implicitly pop an address from stack then resume execution on that address
}

void main()
{
    // calling a subroutine (CALL on Intel) implicitly instructs the processor to push the next instruction's address(getchar line) on stack before jumping to make.
    make("Love Not War"); 
    getchar();

    puts("This will not execute.  The address to next instruction(getchar) gets overwritten with Not War");

} 
```

“另外，第三者的恶意代码必须用目标处理器的汇编语言编写吗？” **是的**

正常运行的程序可能会发生堆栈溢出，例如递归例程（调用自身的函数）忽略了终止条件。堆栈区域将充满堆栈上的许多局部变量以及返回地址。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-20T09:06:22.683

通常的方法是你在内存中的某个地方有恶意代码。然后你创建一个缓冲区溢出：这里的魔法不是让它溢出，而是正如你已经提到的，程序内存的某些部分被覆盖。由于堆栈不仅包含变量，而且当一个函数被调用时返回地址，一个人试图用你的恶意代码的地址覆盖这个地址。当缓冲区溢出的函数返回其调用者时，该函数不会返回其原始调用者，而是返回到恶意子程序。由于现在执行的代码通常具有调用代码的权限，因此尝试在比邪恶代码具有更高权限的代码中查找/创建此溢出（否则您可以通过直接调用邪恶例程来做到这一点）。

# c# - 删除处理对象的处理程序

> ID：460525
> 
> 赞同：8
> 
> 时间：2009-01-20T09:01:45.313
> 
> 标签：c#, .net

我可以想出一些杂乱无章的方法来解决这个问题，但令我震惊的是，应该有一个比我已经想出的更优雅的解决方案。

对象在被释放之前清除其所有事件处理程序的最合适方法是什么。遗憾的是无法枚举事件处理程序。

理论上，将处理程序添加到对象以记住删除它比假设对象会在超出范围之前自行清理是否被认为更正确？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-20T09:08:14.520

有一种方法可以避免这种常见的事件问题 - [WeakEvent 模式](https://msdn.microsoft.com/en-us/library/aa970850(v=vs.100).aspx)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-20T09:04:37.100

> 理论上，将处理程序添加到对象以记住删除它比假设对象会在超出范围之前自行清理是否被认为更正确？

对于上面的问题，我不得不说是的。关于事件的基本理论是事件触发者不应该负责管理自己的处理程序；添加事件的人应该进行清理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-20T10:19:37.323

在我的设计中，我对定义合同非常严格，例如：

*   每次资源获取都必须与释放配对
*   每次启动服务的调用都必须与停止服务的调用配对
*   每个依附于对象的观察者必须分离
*   等等

（这样的合约并不罕见，比如您必须配对文件的打开和关闭，或者在不采用自动垃圾收集的语言中配对新/删除调用）。

这些合约中的每一个都可以在一定程度上在运行时进行测试。例如，可以检测和报告观察者的分离次数多于其附加次数（根据情况断言或异常）。

所以，你的问题是：

> 理论上，将处理程序添加到对象以记住删除它比假设对象会在超出范围之前自行清理是否被认为更正确？

是现场。答案是肯定的，不仅在理论上，而且在实践中也是如此。在我看来，这些合同可以帮助您避免隐蔽的错误。

规定这种思维方式，你就可以很好地构建真正强大的软件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T09:16:43.037

对我来说，事件处理程序是 .NET 应用程序内存消耗的最大威胁，尤其是当您开始在 Web 服务器上下文中使用它时。对我来说，附加到分离的对象总是有责任。附加对象应始终具有与其附加对象相比更小或相同的寿命，否则事件设计会出现问题，因为您不希望被通知对象的更改不再具有任何意义. 如果它们的寿命相等，它们将一起超出范围，您不需要做任何事情，如果它更短，则附加对象必须分离。在一个基本的 Web 应用程序中，您只有 3 种类型的生命周期，应用程序、会话和页面，并且规则很容易应用。在更复杂的应用程序中，这需要更多的思考。

# sql-server - 从 Silverlight 应用程序调用的 Web 服务的异步回调上的 CommunicationException

> ID：460528
> 
> 赞同：1
> 
> 时间：2009-01-20T09:02:49.430
> 
> 标签：sql-server, silverlight, wcf, linq-to-sql

我正在与网站上的另一位编码员合作，该网站通过他创建的一些 Web 服务（主要涉及 LINQ to SQL）访问 SQL Server（2008 Express），并且 UI 位于 Silverlight 中。我一直在研究系统的另一部分，但刚刚获得了他的最新代码，并试图在我的机器上运行它，但出现错误。

在reference.cs文件的一行中出现了CommunicationException，web服务的EndXXX方法：

```
// This is for a Ping method we created just to trouble shoot- it behaves the same.
public string EndPing(System.IAsyncResult result) {

    object[] _args = new object[0];

    // Next line throws Communication Exception
    string _result = ((string)(base.EndInvoke("Ping", _args, result)));
    return _result;
} 
```

错误信息是：

“尝试向 URI ' [http://localhost:1233/SummitService.svc](http://localhost:1233/SummitService.svc) ' 发出请求时发生错误。这可能是由于在没有适当的跨域策略的情况下尝试以跨域方式访问服务位置，或不适合 SOAP 服务的策略。您可能需要联系服务的所有者以发布跨域策略文件并确保它允许发送与 SOAP 相关的 HTTP 标头。请参阅内部异常更多细节。”

整个堆栈都在我的本地机器上，所以我不需要进行任何跨域调用。我们查看了所有可以找到的配置代码（web.config、ServiceReferences.ClientConfig），将所有对他机器的引用更改为我的。我们对所有这些技术都很陌生，所以我们已经走到了我们知识的尽头。

这会为任何人敲响警钟吗？

* * *

**更新**

所以我做了一些故障排除，发现如果我输入启动这整个事情的 aspx 页面的 localhost 地址，它可以正常加载，并且我在页面上看到来自 web 服务的数据。只有在调试时才会收到此错误。

我还注意到，当我尝试调试页面时，它会将文件位置 - D:\projects\etc - 加载到浏览器中，而不是通过 localhost。它实际上是在项目中加载 .html 测试页面，即使我已将 .aspx 页面设置为起始页面。

所以它看起来与项目设置或 VS2008 设置有关，而不是我最初设想的配置问题。有没有人有任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T20:04:28.763

好吧，所以我觉得有点傻。

在断断续续地对这个东西打了几天之后，我发现我将 Silverlight 项目设置为启动项目。我需要它是真正具有正确身份验证设置以连接到数据库的 Web 项目——更不用说我一直设置为起始页的实际主机 .aspx 页面，并且想知道为什么它没有被使用。

一旦我设置了正确的项目。一切都很美好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T22:14:55.010

问题可能出在 LINQ 序列化查询结果的方式上。如果它检测到表之间的关系，则会将它们与服务中的数据一起发送，但由于 Silverlight 是沙盒化的，它不能接受任何“分支”数据。

在 LINQ 设计器中尝试将序列化模式更改为单向，看看是否可行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-10-26T14:05:58.687

我认为在您添加silverlight项目的测试Web项目中，您已定义每次构建项目时都创建一个测试页面。首先取消选中该选项。

# java - java中的^运算符

> ID：460542
> 
> 赞同：73
> 
> 时间：2009-01-20T09:09:40.587
> 
> 标签：java, operators

任何人都可以通过一些例子来解释 ^ 运算符在 java 中的使用吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2009-01-20T09:13:03.247

这与大多数语言中的 ^ 相同，只是一个 XOR。

```
false ^ false == false
true ^ false == true
false ^ true == true
true ^ true == false 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-13T20:52:40.113

[根据this source](http://java.operator-precedence.com/)，其他一些答案只说它是按位异或，但请注意，如果操作数是布尔类型，它也可以是逻辑异或。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-20T09:13:06.240

这是按位异或。

[http://en.wikipedia.org/wiki/Exclusive_or](http://en.wikipedia.org/wiki/Exclusive_or)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-20T09:16:03.770

这就是**按位异或运算**。查看[Java 教程](http://java.sun.com/docs/books/tutorial/)的[按位和位移运算符部分](http://java.sun.com/docs/books/tutorial/java/nutsandbolts/op3.html)了解更多信息。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-20T09:25:30.053

在 java 中，^ 运算符用于按位异或运算。

点击此链接也可以查看运算符优先级。

[http://www.uni-bonn.de/~manfear/javaoperators.php](http://www.uni-bonn.de/~manfear/javaoperators.php)

# .net - 强大的 WCF 服务

> ID：460543
> 
> 赞同：2
> 
> 时间：2009-01-20T09:10:07.887
> 
> 标签：.net, wcf, robustness

确保服务稳健性以防止服务变得不可用的最佳方法是什么，如果它确实变得不可用，是否有重新启动服务的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T09:15:35.223

使用托管技术。您可以自行托管在 Windows 服务中，并放置故障事件以触发服务关闭。然后，您可以使用 windows 重新启动您的服务。

或者，如果您有 Windows 2008，您可以使用 WAS 来托管您的服务，这将自动重新启动它。

重要的是要意识到您的服务可能具有状态，但其中没有正在运行的“线程”，因此它不是这样运行的，对象只是存在。你基本上是付钱给微软来为你提供 .net 和 WCF 来照顾事物的托管方面，他们向你保证你的服务将保持可用。

方法中的崩溃会使服务出错，但是您可以处理任何您可以优雅处理的异常，并让操作系统处理您无法处理的事情（例如内存不足异常等）。请注意，这是您的责任处理服务故障。除此之外，WCF 非常强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T09:19:59.050

这取决于您托管服务的方式。

可以在此处找到不同可用选项的解释和比较：http: [//msdn.microsoft.com/en-us/library/ms730158.aspx](http://msdn.microsoft.com/en-us/library/ms730158.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T09:27:04.873

只是为了清楚起见，如果出于某种原因我没有处理异常并且这触发了服务终止，则在 IIS 7.0 下，服务应该以新状态重新启动。

# c# - 如何在 asp.net 页面中添加 wpf 浏览器应用程序

> ID：460555
> 
> 赞同：0
> 
> 时间：2009-01-20T09:18:00.960
> 
> 标签：c#, asp.net, wpf

我写了一个 WPF 应用程序。但我想添加像 java applet 这样的 aspx 页面，但我没有找到任何想法。你能帮助我吗？

请看： http://img132.imageshack.us/my.php?image= [wpfinaspuc2.jpg](http://img132.imageshack.us/my.php?image=wpfinaspuc2.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-22T11:39:29.317

1.  如果您想**在浏览器中使用您的 WPF 应用程序**，您需要创建一个**XBAP 应用程序**。请注意，您需要客户端计算机具有 .Net 3.0 运行时才能运行您的应用程序，并且只能在 Windows 中运行。

    这个页面将是一个好的开始，有教程和示例： http:
    [//www.xbap.org/index.html](http://www.xbap.org/index.html)

2.  但是，如果您想**在现有网站中放入一段代码**，例如 java 小程序，您将需要创建一个 Silverlight 组件，这与 WPF 应用程序不是 100% 相同，但您将共享大部分代码。

    在这种情况下，客户端将需要**Silverlight 运行时**，它是多平台的（Windows、Mac 和 Linux）
    转到此页面以获取起点
    [http://silverlight.net/GetStarted/](http://silverlight.net/GetStarted/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T10:10:46.813

将 XBAP 添加到您的网页，或使用 Silverlight 重写功能并将应用程序嵌入您的页面。

Silverlight 将是首选。

可嵌入；

```
 <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">....</object> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-22T07:19:07.983

Scott Guthrie 在这里有一个 Silverlight 教程博客系列：

[http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-1-creating-quot-hello-world-quot-with-silverlight-2-and-vs-2008.aspx](http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-1-creating-quot-hello-world-quot-with-silverlight-2-and-vs-2008.aspx)

我同意 Jamie 和 Marc 的观点，如果您想要类似于 Java Applet 的东西，Silverlight 可能是您的最佳选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T09:22:32.400

你能澄清一下吗？标题表明您拥有 ASP.NET 并希望添加 WPF（在这种情况下，请查看 xbap 或 Silverlight），但问题表明您拥有 WPF 并希望添加网页。

如果要**查看**网页，您应该能够`WebBrowser`在 WPF 应用程序中托管控件。如果您想托管 Web 服务器，请查看`HttpListener`.

那么你有什么，你到底想做什么？

# c# - 了解移位运算符

> ID：460562
> 
> 赞同：20
> 
> 时间：2009-01-20T09:21:37.957
> 
> 标签：c#

我无法理解这个移位运算符（c# 参考）：

```
class MainClass1
{
 static void Main()
    {
        int i = 1;
        long lg = 1;
        Console.WriteLine("0x{0:x}", i << 1);
        Console.WriteLine("0x{0:x}", i << 33);
        Console.WriteLine("0x{0:x}", lg << 33);
    }
}

/*
Output:
0x2
0x2
0x200000000
*/

class MainClass2
{
     static void Main()
     {
         int a = 1000;
         a <<= 4;
         Console.WriteLine(a);
     }
}

/*
Output:
16000
*/ 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-01-20T09:25:14.250

`<<`是左移运算符；这采用一个值的二进制表示，并将所有位“n”位向左移动（“mod”除外，参见“1”），用零回填。

`>>`是右移运算符；这几乎相反（向右移动），除了有符号值（即可以为负的值）之外，它用 1 回填负值，否则为零。

1：

移位运算符本质上是“修改”数据的宽度。int 是 32 位，因此左移 33（在 Int32 中）与左移 1 完全相同。您不会得到全零。A`long`是 64 位，因此左移 33 会给出不同的答案（原始乘以 2^33）。

2：

每个左移（在数据宽度内）与 x2 相同（对于整数） - 所以 <<4 是 x2x2x2x2 = x16。

这是简单的二进制：

```
0000000001 = 1 
```

<< 前往

```
0000000010 = 2 
```

<< 前往

```
0000000100 = 4 
```

<< 前往

```
0000001000 = 8 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-20T09:29:22.013

只是为了稍微扩展 Marc 的答案（Marc，请随意将其包含在您的答案中，我将删除此答案），这是在规范的第 7.8 节中指定的：

* * *

下面列出了预定义的移位运算符。

左移：

*   整数运算符 <<(int x, int count);
*   uint 运算符 <<(uint x, int count);
*   长运算符 <<(long x, int count);
*   ulong 运算符 <<(ulong x, int count);

<< 运算符将 x 左移若干位，计算如下所述。

x的结果类型范围之外的高位被丢弃，其余位左移，低位空位位置设置为零。

右移：

*   int 运算符 >>(int x, int count);
*   uint 运算符 >>(uint x, int count);
*   长运算符 >>(long x, int count);
*   ulong 运算符 >>(ulong x, int count);

>> 运算符将 x 右移若干位，计算如下所述。

当 x 为 int 或 long 类型时，x 的低位被丢弃，其余位右移，如果 x 为非负数，则高位空位位置设置为零，如果 x 设置为 1是负数。

当 x 为 uint 或 ulong 类型时，x 的低位被丢弃，其余位右移，高位空位位置设置为零。

对于预定义的运算符，要移位的位数计算如下：

当 x 的类型为 int 或 uint 时，移位计数由 count 的低五位给出。换句话说，移位计数是从 count & 0x1F 计算出来的。

当 x 的类型为 long 或 ulong 时，移位计数由 count 的低六位给出。换句话说，移位计数是从 count & 0x3F 计算出来的。

如果结果移位计数为零，则移位运算符简单地返回 x 的值。

* * *

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-20T11:39:43.107

给新手程序员的一些注意事项：

为什么要使用移位运算符？他们似乎做的不多。嗯，有两个原因：

1.  它们非常快，因为几乎所有 CPU 都有移位寄存器，这意味着移位操作是在硬件中完成的，只需最少的工作量（周期）。

2.  因为它们速度很快，所以设计了许多协议和标准来利用这一点。例如IP地址操作、CRC校验、图形操作等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-09-03T01:57:49.177

“移位运算符本质上是“修改”数据的宽度。”

垃圾！如果移位量大于或等于数据宽度，则结果未定义。不要期望您碰巧看到的相同“mod”操作会发生在不同的编译器或同一编译器的不同版本中，或在同一程序中的不同移位情况下，或当其他任何事情发生变化时。这就是“未定义”的意思。

# java - How to mix java webstart with RMI?

> ID：460567
> 
> 赞同：3
> 
> 时间：2009-01-20T09:24:53.300
> 
> 标签：java, rmi, java-web-start

I want to distribute a webstart application which uses RMI.

I want to avoid to ask the user the address of the RMI server, because the website that distributes the application is also the RMI server.

Furthermore, I don't know the address of the server at build time, therefore the address must be added with ad hoc configuration to the JNLP, or the address must be provided at execution time. This is the preferred way: is it possible to do so?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T09:36:06.493

I haven't used Java RMI exactly (I've only used Java Web Start with [Hessian](http://hessian.caucho.com/) binary protocol for doing something like RMI), but at least the part of passing the server address to the Web Start client app should be easy. When you generate the JNLP file in your application, add the address as a property:

```
<jnlp>
  [...]
  <resources>
    [...]
    <property name="serverAddress" value="..." />
  </resources>
</jnlp> 
```

Then, in client code read that property:

```
String serverAddress = System.getProperty("serverAddress"); 
```

I assume here the website that distributes the application knows its own address :)

**Edit** (with the additional limitation of not knowing address at build time): Hmm, Is the website distributing the app a dynamic or static one?

1.  dynamic: either generate whole JNLP dynamically (with a JSP page or dom4j or whatever), or read the "template" JNLP XML file and replace the real server address in place
2.  static: I guess the person who deploys the site has to manually configure the right address in the JNLP file?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T22:22:54.770

Where I work we do exactly this, and put the hostname of the RMI registry in the JNLP as per Jonik's answer. In Java 6u10 or u11 Sun closed several security holes with Webstart, including an issue with dynamic JNLP. In order to satisfy all the security warnings you must place an identical copy of your JNLP in the main jar of your program. This is to prevent third parties injecting extra jars or parameters into your code. Programs will run without it, but users will be shown a trust notice.

We *do* know the address at build time, but had other dynamic JNLP issues and so had to resort to providing a JNLP and a JAR for each possible runtime set-up. This was more of a deployment headache for us, rather than an issue for customers, but if you're signing your distribution then it's worth knowing.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-27T13:04:17.913

The JDK includes source code (in the samples/jnlp/servlet directory) for a servlet that inserts appropriate values into the JNLP file. You can use this to insert the host name into the JNLP file.

*   [JnlpDownloadServlet Guide](http://java.sun.com/javase/6/docs/technotes/guides/javaws/developersguide/downloadservletguide.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T10:35:33.080

I use variable placeholders in my jnlp:

```
...
<application-desc>
    <argument>{host}</argument>
    <argument>{port}</argument>
</application-desc>
... 
```

And use an Interceptor servlet to replace these at run time as the JNLP is served to the client.

# language-agnostic - 哈希码和校验和 - 有什么区别？

> ID：460576
> 
> 赞同：135
> 
> 时间：2009-01-20T09:28:23.653
> 
> 标签：language-agnostic, hash, computer-science, checksum

我的理解是哈希码和校验和是相似的东西 - 一个数值，为数据块计算，*相对*唯一。

即两个数据块产生相同数字散列/校验和值的概率足够低，以至于可以忽略应用程序的目的。

那么我们是否对同一事物有两个词，或者哈希码和校验和之间是否存在重要区别？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2009-01-20T09:31:16.627

我会说[校验和](http://en.wikipedia.org/wiki/Checksum) **必然**是[hashcode](http://en.wikipedia.org/wiki/Hash_code)。但是，并非所有哈希码都能产生良好的校验和。

校验和有一个特殊的用途——它验证或*检查数据的完整性（有些可以通过允许*[纠错](http://en.wikipedia.org/wiki/Error_correction)来超越）。“好”校验和易于计算，并且可以检测多种类型的数据损坏（例如，一个、两个、三个错误位）。

哈希码只是描述了一个将数据映射到某个值的[数学函数。](http://en.wikipedia.org/wiki/Function_(mathematics))当用作数据结构（例如哈希表）中的索引手段时，需要低冲突概率。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2009-01-20T09:43:40.033

他们每个人背后都有不同的目的：

*   哈希码 - 设计为在其域中随机（以尽量减少哈希表等中的冲突）。密码散列码也被设计为在计算上无法逆转。
*   校验和 - 旨在检测数据中最常见的错误，并且通常可以快速计算（用于有效校验和快速数据流）。

在实践中，相同的功能通常对这两个目的都有好处。特别是，如果您能负担得起计算成本，加密强哈希码是一个很好的校验和（随机错误几乎不可能破坏强哈希函数）。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2009-01-20T09:46:09.000

确实有一些区别：

*   当输入不同时（尽可能频繁），校验和只需要不同，但它们的计算速度几乎同样重要。
*   哈希代码（用于哈希表）具有相同的要求，此外它们应该均匀分布在代码空间中，尤其是对于相似的输入。
*   加密散列具有更严格的*要求*，即给定散列，您不能构造产生此散列的输入。计算时间排在第二位，根据应用程序，甚至可能希望哈希的计算速度非常慢（以对抗暴力攻击）。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-01-20T09:46:17.877

哈希码和校验和都用于从数据项创建短数值。不同之处在于校验和值应该改变，即使只是对数据项进行了很小的修改。对于散列值，要求仅仅是现实世界的数据项应该具有不同的散列值。

一个明显的例子是字符串。字符串的校验和应该包括每一位，并且顺序很重要。另一方面，哈希码通常可以实现为有限长度前缀的校验和。这意味着“aaaaaaaaaaaba”的哈希值与“aaaaaaaaaaab”相同，但哈希算法可以处理这种冲突。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-01-20T09:32:11.803

[维基百科](http://en.wikipedia.org/wiki/Checksum)说得很好：

> 校验和函数与散列函数、指纹、随机函数和加密散列函数有关。然而，这些概念中的每一个都有不同的应用，因此也有不同的设计目标。校验位和奇偶校验位是校验和的特殊情况，适用于小数据块（例如社会保险号、银行帐号、计算机字、单字节等）。一些纠错码基于特殊校验和，不仅可以检测常见错误，还可以在某些情况下恢复原始数据。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-03-13T11:15:20.590

> 尽管散列和校验和的相似之处在于它们都基于文件的内容创建一个值，但散列与创建校验和不同。校验和旨在验证（检查）数据的完整性并识别数据传输错误，而哈希旨在创建数据的唯一数字指纹。

来源：CompTIA ® Security+ 网络安全基础指南 - 第五版 - Mark Ciampa - 第 191 页

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-11-20T20:14:44.440

校验和可防止意外更改。

加密哈希可以防止非常积极的攻击者。

当您在线发送位时，可能会意外发生某些位被翻转、删除或插入。为了让接收方检测（或有时纠正）此类事故，发送方使用校验和。

但是，如果您假设有人主动且智能地修改了网络上的消息，并且您希望防止此类攻击者受到攻击，那么请使用加密哈希（我忽略了对哈希进行加密签名，或者使用辅助通道等，因为这个问题似乎并没有回避这一点）。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-01-20T09:33:23.377

这些天它们是可以互换的，但是在过去，校验和是一种非常简单的技术，您可以将所有数据（通常以字节为单位）相加并在最后加上一个字节，该值在..那么您希望知道是否有任何原始数据已损坏。类似于校验位，但带有字节。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-02-27T04:35:10.533

哈希码和校验和函数之间的区别在于，它们是为不同的目的而设计的。

*   校验和用于查明输入中的某些内容**是否**已更改。

*   哈希码用于找出输入中的某些内容是否发生了变化**，****并**在各个哈希码值之间保持尽可能大的“距离”。

    此外，与此规则相反，*可能*对哈希函数有进一步的要求，例如能够尽早形成哈希码值的树/集群/桶。

    如果你添加一些共享的初始随机化，你就会得到现代加密/密钥交换的概念。

* * *

关于概率：

例如，假设输入数据实际上总是在变化（100% 的时间）。假设您有一个“完美”的哈希/校验和函数，它会生成一个 1 位的哈希/校验和值。因此，对于随机输入数据，您将在 50% 的时间内获得不同的哈希/校验和值。

*   如果您的随机输入数据中恰好有 1 位发生了变化，那么无论输入数据有多大，您都将能够 100% 地检测到这一点。

*   如果随机输入数据中的 2 位发生了变化，则检测到“变化”的概率除以 2，因为这两种变化可以相互抵消，并且没有哈希/校验和函数会检测到输入数据中的 2 位实际上是不同的.

    ...

这意味着，如果输入数据中的位数比哈希/校验和值中的位数大很多倍，那么对于不同的输入值，您实际获得不同哈希/校验和值的概率会降低，并且**不是常数**。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-01-20T09:38:17.347

在提及为文件或数据创建的代码（数字或其他）时，我倾向于使用单词校验和，这些代码可用于*检查*文件或数据是否已损坏。我遇到的最常见的用法是检查通过网络发送的文件是否未被更改（有意或无意）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-04T19:50:45.167

在 Redis 集群数据分片中，它使用 a`hash slot`来决定它去哪个节点。以下面的模运算为例：

```
123 % 9 = 6
122 % 9 = 5
141 % 9 = 6 
```

`6`在不同的输入中出现两次。散列的目的只是将输入值映射到输出值，唯一性不是交易的一部分。因此，在哈希世界中，产生相同输出的两个不同输入是可以的。

另一方面，即使输入中的一位发生变化，校验和也必须使输出不同，因为它的目的不是映射，而是检测数据损坏。因此，产生相同输出的两个不同输入在校验和中是不可接受的。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-11-19T21:39:30.030

*   `hash code`（Sip Hash）通常用于基于哈希表的结构（Dictionary、Set、HashMap...），其中基本操作具有恒定的时间 - O(1)
*   `check sum`(MD5, SHA) 用于表示数据完整性

主要区别在于它`check sum`必须是**唯一的**，而`hash code`对于不同的对象可以是相同的。例如，在 Java 或 Swift 中，您`hash code`受限于`Int`. 通常与`equals`函数配合使用。两个不同的对象可以有相同的`hash code`。

[[Java 哈希码]](https://stackoverflow.com/a/57100339/4770877)

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2020-02-24T15:59:16.803

校验和只是通过 oring（通过逻辑加法因此求和）从数据字段生成的数字。校验和具有检测生成它的数据字段内的任何位或位数的损坏的能力，即它检查所有错误，它不能纠正它们。校验和是哈希，因为校验和的大小小于原始数据。是的，您会遇到冲突，因为校验和对数据字段中的位位置根本不敏感。

循环冗余校验（CRC）是完全不同的东西，更复杂**，不称为校验和。**它是多项式系列的应用，它能够纠正生成它的数据字段中任何选定数量的单个损坏位。CRC 的创建会产生比原始数据字段更大的数字（与校验和不同） - 因此名称中包含“冗余”一词以及您为纠错功能付出的代价。因此，CRC 不是散列，不得混淆或命名为校验和，因为冗余必然会增加原始数据的大小。

# c++ - 如何在 STL 容器中移动元素

> ID：460583
> 
> 赞同：6
> 
> 时间：2009-01-20T09:31:53.303
> 
> 标签：c++, stl, containers

我想在容器内的任何位置向左或向右移动元素。移位元件不连续。

例如，我有一个向量 {1,2,3,4,5,6,7,8}，我想将 {4,5,7} 向左移动 2 个位置，预期结果将是 {1,4 ,5,2,7,3,6,8}

有没有优雅的方法来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T13:32:49.243

您可以编写自己的移位函数。这是一个简单的：

```
#include <iterator>
#include <algorithm>

template <typename Container, typename ValueType, typename Distance>
void shift(Container &c, const ValueType &value, Distance shifting)
{
    typedef typename Container::iterator Iter;

    // Here I assumed that you shift elements denoted by their values;
    // if you have their indexes, you can use advance
    Iter it = find(c.begin(), c.end(), value);
    Iter tmp = it;

    advance(it, shifting);

    c.erase(tmp);

    c.insert(it, 1, value);
} 
```

然后你可以像这样使用它：

```
vector<int> v;
// fill vector to, say, {1,2,3,4,5}
shift(v, 4, -2); // v = {1,4,2,3,5}
shift(v, 3, 1); // v = {1,4,2,5,3} 
```

这是一个幼稚的实现，因为当移动多个元素时，`find`会在容器的开头进行多次迭代。此外，它假设每个元素都是唯一的，但情况可能并非如此。但是，我希望它能给你一些关于如何实现你需要的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T09:42:34.730

你不能做一个简单的插入然后擦除吗？

不要忘记，您将使任何引用高于删除点或插入点的元素的迭代器无效，以最低者为准。

高温高压

干杯，

抢

# python - 在 python 中模拟“局部静态”变量

> ID：460586
> 
> 赞同：29
> 
> 时间：2009-01-20T09:32:42.503
> 
> 标签：python

考虑以下代码：

```
def CalcSomething(a):
    if CalcSomething._cache.has_key(a):
      return CalcSomething._cache[a]
    CalcSomething._cache[a] = ReallyCalc(a)
    return CalcSomething._cache[a] 

CalcSomething._cache = { } 
```

这是我能想到的在 python 中模拟“局部静态”变量的最简单方法。
困扰我的是 CalcSomething._cache 在函数定义之外被提及，但替代方案是这样的：

```
if not hasattr(CalcSomething, "_cache"):  
    setattr(CalcSomething, "_cache", { } ) 
```

在函数的定义里面，真的很麻烦。

有没有更优雅的方式？

[编辑]
澄清一下，这个问题与本地函数缓存无关，正如上面的示例所暗示的那样。这是另一个简短的示例，其中“静态本地”可能很方便：

```
def ParseString(s):
    return ParseString._parser.parse(s)  
# Create a Parser object once, which will be used for all parsings.
# Assuming a Parser object is heave on resources, for the sake of this example.
ParseString._parser = Parser() 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-01-20T10:57:30.133

把它变成一个可调用的对象（因为这就是它的本质。）

```
class CalcSomething(object):
    def __init__(self):
        self._cache = {}
    def __call__(self, a):
        if a not in self._cache: 
            self._cache[a] = self.reallyCalc(a)
        return self._cache[a]
    def reallyCalc(self, a):
        return # a real answer
calcSomething = CalcSomething() 
```

现在您可以像使用`calcSomething`函数一样使用它。但它仍然保持整洁和独立。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-01-20T09:39:21.727

把它变成一个装饰器。

```
def static_var(var_name, initial_value):
    def _set_var(obj):
        setattr(obj, var_name, initial_value)
        return obj
    return _set_var

@static_var("_cache", {})
def CalcSomething(a):
    ... 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-20T10:10:57.263

考虑编写将维护缓存并且您的函数不会被缓存代码污染的装饰器：

```
def cacheResults(aFunc):
    '''This decorator funcion binds a map between the tuple of arguments 
       and results computed by aFunc for those arguments'''
    def cachedFunc(*args):
        if not hasattr(aFunc, '_cache'):
            aFunc._cache = {}
        if args in aFunc._cache:
            return aFunc._cache[args]
        newVal = aFunc(*args)
        aFunc._cache[args] = newVal
        return newVal
    return cachedFunc

@cacheResults
def ReallyCalc(a):
    '''This function does only actual computation'''
    return pow(a, 42) 
```

也许一开始看起来不太好，但是您可以`cacheResults()`在不需要关键字参数的任何地方使用。可以创建类似的装饰器，它也适用于关键字参数，但这次似乎没有必要。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-20T11:34:50.620

一种选择是滥用默认参数。IE：

```
def CalcSomething(a, _cache={}):
    if _cache.has_key(a): 
```

这样做的好处是您不需要限定名称，并且将获得对变量的快速本地访问，而不是进行两次缓慢的 dict 查找。然而，它仍然存在在函数之外提到它的问题（事实上，它现在在函数签名中更糟。）

为防止这种情况，更好的解决方案是将函数包装在包含静态参数的闭包中：

```
@apply
def CalcSomething():
    cache = {}  # statics go here

    def CalcSomething(a):
        if cache.has_key(a):
            return cache[a]
        cache[a] = ReallyCalc(a)
        return cache[a]
    return CalcSomething 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-20T14:37:35.510

S.Lott 提出的解决方案也是我提出的解决方案。

周围也有有用的“memoize”装饰器，例如：

*   [具有缓存大小限制的 Memoize 装饰器功能](http://code.activestate.com/recipes/496879/)
*   [具有 O(1) 长度限制的 LRU 缓存的 Memoize 装饰器，支持可变类型](http://code.activestate.com/recipes/498110/)

鉴于这一切，我为您最初尝试一个函数和一个“静态本地”提供了一个替代方案，它是独立的：

```
def calc_something(a):

    try:
        return calc_something._cache[a]
    except AttributeError: # _cache is not there
        calc_something._cache= {}
    except KeyError: # the result is not there
        pass

    # compute result here

    calc_something._cache[a]= result
    return result 
```

# php - 扩展 PHP5 在 XAMPP 中不解析

> ID：460589
> 
> 赞同：1
> 
> 时间：2009-01-20T09:35:11.830
> 
> 标签：php, apache, xampp

我已经安装了 XAMPP Apache 服务器并将我的网站放入 htdocs。我已经启动了 Apache 服务器。在我的网站上，我有扩展名为 PHP 和扩展名为 PHP5 的文件。不同之处在于，当我在浏览器中输入 localhost/file.php 时 - 我看到了一个已解析的网站。

但是当我输入 localhost/file.php5 （我在服务器上有这个文件）时，浏览器会询问我是否要下载或打开这个文件。如果我选择打开，我会看到 file.php5 的 PHP 代码！

我研究了配置，所以：

1.  我没有 htaccess 文件
2.  PHPINFO() 显示 PHP 5
3.  c:\xampp\apache\conf\extra\httpd-xampp 包含在配置中，并且在开头有这个：

    AddType application/x-httpd-php-source .phps

    AddType 应用程序/x-httpd-php .php .php5 .php4 .php3 .phtml .phpt

我也尝试过：

```
AddHandler php5-script .php5
AddType text/html .php5 
```

进入 httpd.conf，但它对我不起作用（没有变化）。

你能帮我修一下吗？我想用 php5 解析器打开 php5 和 php 扩展文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-08-17T06:15:54.277

1.  跟随路径`c:/xampp/apache/conf/extra/httpd-xammp`

    打开`httpd-xammp`

2.  找到与此类似的文本区域：

    ```
    <FilesMatch "\.php$"> 
       SetHandler application/x-httpd-php   
    </FilesMatch>
    <FilesMatch "\.phps$">
        SetHandler application/x-httpd-php-source
    </FilesMatch> 
    ```

3.  将代码的第一行替换为以下内容：

    ```
    <FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$"> 
    ```

4.  因此文本类似于以下内容：

    ```
    <FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$"> 
        SetHandler application/x-httpd-php  
    </FilesMatch>
    <FilesMatch "\.phps$">
        SetHandler application/x-httpd-php-source
    </FilesMatch> 
    ```

这对我有用。

祝你好运..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-28T07:59:49.933

默认情况下，XAMPP 将具有以下扩展名的文件传递给 PHP：.php **.php5** .php4 .php3 .phtml .phpt（这是使用 XAMPP Lite 1.6.8 测试的）。

我的建议是从 XAMPP 配置中删除“AddType text/html .php5”行。或者，使用全新安装的 XAMPP 并查看差异（使用[WinMerge](http://winmerge.org/)之类的东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-07T06:27:20.350

当我切换到 Ubuntu 操作系统时，我不得不弄清楚如何再次执行此操作。需要修改的文件称为`php5.conf`.

我使用突触包管理器（系统>管理>突触包管理器）安装了 apache 2、php5、phpmyadmin、mysql-server 和 rapache，但没有使用 XAMPP。如果您已经安装了 XAMPP，那么路径`php5.conf`会有所不同，可能在`/opt/lampp`文件中的某个位置。

通过我的安装，它的路径是`/etc/apache2/mods-avaible/php5.conf`. 在修改之前，您必须使用终端更改权限以允许您对其进行写入。要访问它，请打开终端并输入：

```
cd /etc/apache2/mods-available 
```

然后更改权限的行：

```
sudo chmod a+w php5.conf 
```

您可以键入以下内容以确保权限已更改：

```
ls -l 
```

您应该会看到一长串带有权限概念的文件。的行`php5.conf`应该如下所示（日期和时间除外）：

```
-rw-rw-rw- 1 root root  139 2009-12-06 22:35 php5.conf 
```

这意味着每个人都有读写权限。如果需要，您可以在完成后更改权限。现在继续通过键入以下内容进行所需的更改：

```
nano php5.conf 
```

这将在一种文本编辑器中打开文件。你应该看到的是：

```
<IfModule mod_php5.c>
AddType application/x-httpd-php .php .phtml .php3
AddType application/x-httpd-php-source .phps
</IfModule> 
```

将文本更改为如下所示：

```
<IfModule mod_php5.c>
AddType application/x-httpd-php .php .phtml .php3 .php5
AddType application/x-httpd-php-source .phps
</IfModule> 
```

在第一个命令之后添加`.php5`to 。`AddType`

按`ctrl`+`x`退出，按 y 保存更改。然后重新启动计算机。然后你的带有`.php5`扩展名的文件应该可以工作了！

我不敢相信这花了我几个小时才弄清楚！祝你好运！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-01-28T07:07:19.603

添加：

```
AddType application/x-httpd-php .php .php5 
```

在 OS X 和 Apache 2.2.10 下为我工作，我无法想象它在 XAMPP 上会有所不同。我会撤消您对 httpd.conf 的所有其他更改/修改，然后只有：

```
LoadModule php5_module modules/libphp5.so
AddType application/x-httpd-php .php .php5 
```

然后重启apache。摆脱 AddHandler、AddType 等。

# c# - 当我将属性添加到参数时，.NET Web 服务会中断吗？

> ID：460591
> 
> 赞同：2
> 
> 时间：2009-01-20T09:36:35.273
> 
> 标签：c#, .net, web-services

我有一个 .NET Web 服务，它承载了一个名为 AddMyObject 的方法。

```
[WebMethod]
public void AddMyObject(MyObject[] objects){...} 
```

MyObject 声明为

```
public class MyObject
{
    public string Pro1{get;set;}
    public string Pro2{get;set;}
} 
```

如果我现在向 MyObject 添加一个属性，客户端从新的 WSDL 创建一个新的代理并使用这个属性，那么 Web 服务的旧实例是否能够处理它？当然新的属性会是`null`，但是会有任何例外吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T10:09:23.180

幸运的是，我刚刚抽出时间为这个问题写了一个小测试服务。

实际发生的情况是，如果在客户端添加了一个属性，它会在旧服务中被忽略。

即使在客户端删除了属性，服务器上也没有异常：属性只是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T09:52:06.647

这是一个很好的问题，+1。

我从未尝试过，但我会说它可能会起作用。请告诉我们结果:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T09:44:46.600

是的，一般来说它会失败。不一定在 .NET 客户端上（它相当宽松），但其他客户端会失败。

# jsp - JSF 1.x 通用异常处理

> ID：460596
> 
> 赞同：16
> 
> 时间：2009-01-20T09:37:58.140
> 
> 标签：jsp, jsf, exception-handling, jsf-1.2

如果我的业务层中有异常（例如，我的 JDBC 连接 bean 中的 SQL 异常），我如何将它与自定义消息一起传播到全局`error.jsp`页面？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-20T11:05:25.237

JSF 1.x 不提供这种类型的任何隐式错误处理，尽管您可以使用导航规则重定向到错误页面（假设表单发布）...

```
<navigation-case>
<description>
Handle a generic error outcome that might be returned
by any application Action.
</description>
<display-name>Generic Error Outcome</display-name>
<from-outcome>loginRequired</from-outcome>
<to-view-id>/must-login-first.jsp</to-view-id>
</navigation-case> 
```

...或使用重定向...

```
FacesContext context = FacesContext.getCurrentInstance();
ExternalContext extContext = context.getExternalContext();
String url = extContext.encodeActionURL(extContext
        .getRequestContextPath()
        + "/messages.faces");
extContext.redirect(url); 
```

我建议查看[JSF 规范](http://java.sun.com/javaee/javaserverfaces/reference/api/)以获取更多详细信息。

可以根据需要将错误消息放在请求范围/会话范围/url 参数上。

* * *

假设一个 Servlet 容器，您可以使用通常的[web.xml 错误页面配置](http://java.sun.com/javaee/5/docs/tutorial/doc/bnaeo.html#bnaet)。

```
<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/errorPage.faces</location>
</error-page> 
```

[在您的支持 bean 中，您可以在RuntimeException](http://java.sun.com/javase/6/docs/api/java/lang/RuntimeException.html#RuntimeException(java.lang.Throwable))中包装并抛出您检查的异常。

一些 JSF 实现/框架会捕获这些错误（Apache MyFaces/Facelets），因此您必须将[它们配置为不](http://wiki.apache.org/myfaces/Handling_Server_Errors).

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-04-29T20:43:39.977

JSF 2 现在有一种处理异常的机制：

[http://java.sun.com/javaee/6/docs/api/javax/faces/context/ExceptionHandler.html](http://java.sun.com/javaee/6/docs/api/javax/faces/context/ExceptionHandler.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-04-28T21:06:39.487

我在站点faces中做了一个错误页面，并把错误的stacktrace这个代码先放到web.xml中

```
<error-page>
                <error-code>500</error-code>
                <location>/errorpage.jsf</location>
</error-page> 
```

虽然 jsf 页面有这个代码

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
<h:head>
    <h:outputStylesheet name="EstilosOV.css" library="css" />
    <!-- <h:outputScript name="sincontext.js" library="scripts"/> -->

</h:head>
<h:body >
<table width="338" border="0" align="center" bordercolor="#FFFFFF">

    <tr bgcolor="#1D2F68">
      <td colspan="4" height="35" class="TablaHeader2"> PLAN SEGURO</td>
    </tr>
    <tr  bgcolor="#FDF2AA">
    <td colspan="4"  class="HeaderExcepcion">
      <h:graphicImage library="images" name="errormark.jpg"/>
      <font size="5px" color="#CC0000" >Error de ejecución</font>
      </td>
    </tr>
    <tr >
    <td colspan="3" class="anuncioWarning2">Ocurrio un error al realizar la operación, favor de intentarlo nuevamente, si el error aún se presenta, favor de notificarlo a soporte técnico al 5147-31-00 extensión 6893</td>
    </tr>
    <tr>
      <td height="17" colspan="3" class="TablaHeader2"></td>
    </tr>

</table>
    <h:form id="formerror">
        <h:inputHidden id="valuestack" value="#{errorDisplay.stackTrace}"></h:inputHidden>
    </h:form>
</h:body>

</html> 
```

请注意，motif 可让您调试堆栈跟踪，以了解隐藏字段中的异常。让我们看看类是如何定义的恢复 StackTrace

```
public class ErrorDisplay implements Serializable{

    private static final long serialVersionUID = 6032693999191928654L;
    public static Logger LOG=Logger.getLogger(ErrorDisplay.class);

    public String getContacto() {
        return "";
    }

    public String getStackTrace() {
        FacesContext context = FacesContext.getCurrentInstance();
        Map requestMap = context.getExternalContext().getRequestMap();
        Throwable ex = (Throwable) requestMap.get("javax.servlet.error.exception");

        StringWriter writer = new StringWriter();
        PrintWriter pw = new PrintWriter(writer);
        fillStackTrace(ex, pw);
        LOG.fatal(writer.toString());

        return writer.toString();
    }

    private void fillStackTrace(Throwable ex, PrintWriter pw) {
        if (null == ex) {
            return;
        }

        ex.printStackTrace(pw);

        if (ex instanceof ServletException) {
            Throwable cause = ((ServletException) ex).getRootCause();

            if (null != cause) {
                pw.println("Root Cause:");
                fillStackTrace(cause, pw);
            }
        } else {
            Throwable cause = ex.getCause();

            if (null != cause) {
                pw.println("Cause:");
                fillStackTrace(cause, pw);
            }
        }
    }
} 
```

并且在您在文件 facesconfig 中完成此 bean 定义时已附加

```
<managed-bean>
            <description>
                Bean que sirve para llenar la especificacion de un error. Stacktrace 
            </description>
            <managed-bean-name>errorDisplay</managed-bean-name>
            <managed-bean-class>mx.com.tdc.datos.page.bean.ErrorDisplay</managed-bean-class>
            <managed-bean-scope>session</managed-bean-scope>
        </managed-bean> 
```

我希望这将有助于

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-20T09:44:01.670

在 JSF 中向用户显示错误消息的一般方法是使用 FacesMessage：

在 Java 方面：

```
...
if (errorOccurred) {
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("An error occurred blabla..."));
} 
```

在 JSF（JSP 或 XHTML）页面中，只需使用`<h:messages/>`页面中的组件即可显示错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-24T13:20:49.890

你可以把

```
<%@ page errorPage="error.jsp" %> 
```

在 jour jsp/jsf 页面中。在 error.jsp 中，jou 将具有：

```
<%@ page isErrorPage="true" %> 
```

isErrorPage="true" 将为您的页面提供另一个隐式对象：异常（与您在 jsp 页面上已经有请求和响应的方式相同）。然后，您可以从异常中提取消息。

[额外细节](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPIntro4.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-02-02T20:02:30.477

我遇到了同样的问题，并找到了描述如何在 JSF2 中使用 ExceptionHandler 的链接：

[http://jugojava.blogspot.com/2010/09/jsf-2-exception-handling.html](http://jugojava.blogspot.com/2010/09/jsf-2-exception-handling.html)

# java - 检查对象是否来自另一个（例如固定）对象列表的最佳方法是什么？

> ID：460602
> 
> 赞同：4
> 
> 时间：2009-01-20T09:39:34.503
> 
> 标签：java, collections, hashmap

目前，我创建了一个 HashMap，其中 Object Id 作为键，1 作为值。该方法会询问 Object/Id 并检查是否有匹配的键。

那样行吗？或者，是否有更好的选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-20T09:47:14.083

这取决于您所说的“是”是什么意思。

如果您的意思是对象身份（即），那么您可以按照您描述的方式`object1 == object2`使用[IdentityHashMap 。](http://java.sun.com/j2se/1.5.0/docs/api/java/util/IdentityHashMap.html)

如果您的意思是对象相等（即`object1.equals(object2)`），那么您可以只使用[HashSet](http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashSet.html)而不是胡乱使用 HashMap。

如果您的对象使用 Object 的默认实现[`equals()`](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#equals(java.lang.Object))并[`hashCode()`](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#hashCode())继承自 Object，那么这是一个没有区别的区别：默认实现对象相等作为对象标识。

[Phill Sacre](https://stackoverflow.com/questions/460602/java-what-is-the-best-way-to-check-if-an-object-is-from-anothersay-fixed-list#460606)通过建议让我想起了一些事情`List.contains()`。您不必*使用*Set 或 Map 实现。您可以使用列表（例如`ArrayList`）。您可能会发现让包含在*短*列表中执行线性搜索的成本低于维护散列结构的成本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-20T09:41:57.137

List.contains [(Object)](http://java.sun.com/javase/6/docs/api/java/util/List.html#contains(java.lang.Object))会做你想做的事吗？

但是请记住，无论您做什么，都应该始终[实现 equals() 和 hashCode()](http://www.geocities.com/technofundo/tech/java/equalhash.html)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-20T09:47:45.673

正如其他人所指出的，您实际上可以为此使用 HashSet 或任何类型的 Set。如果您使用自己的对象，请确保它们覆盖`hashCode()`（HashSet 需要）和`equals()`（如果它们覆盖两者，它们将适用于任何 Set）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-20T09:41:54.360

没关系。或者，您可以使用[HashSet](http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashSet.html)。

**编辑：**

您可以通过 2 种方式比较对象：

1.  引用
2.  风俗

默认`Object`比较是通过引用完成的，并在`Object`类上实现。

如果对象层次结构中的任何*类*覆盖此默认实现，那么您将进行自定义比较。如果发生这种情况，您还必须覆盖`hashcode`。

鉴于此，**如果**您想通过引用比较对象但有一个自定义的相等实现，那么您应该使用[IdentityHashMap](http://java.sun.com/j2se/1.5.0/docs/api/java/util/IdentityHashMap.html) **ELSE** 使用`HashSet`.

如果你想用`HashMap`它来维护你当前的实现也很好。HashSet 在内部使用 HashMap 实现。但是，不要将值设置为 1，而是将其设置为`null`.

还有正确*数据结构*的问题。您可以使用 a`List`而不是*Hash*结构。您应该使用的数据结构类型取决于您。这取决于许多想法，例如您打算将多少对象放入集合中，将有多少访问，插入等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-20T09:42:30.440

这基本上就是 HashSet 所做的，但我会使用 HashSet 而不是重复实现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-20T09:43:57.380

正如布鲁诺建议的那样，您可以为固定的对象列表使用一组，然后调用`contains()`.

如果您使用 a `HashSet`，请确保您覆盖`hashCode()`了在这种情况下用于身份检查的对象的实现。

（上次我研究 JRE 时，您使用 a 的方法`HashMap`正是 a`HashSet`所做的！）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-20T09:44:36.957

“来自另一个列表”的定义是什么？是对象平等吗？那么你所拥有的是好的，但你可能会考虑使用 (Hash)Set 以获得更好的清晰度。

如果它是你需要的引用相等然后查找`IdentityHashMap`，或者使用 a `HashSet`of`IdentityHashcode`

# terminology - 代码构建和架构之间有什么区别？

> ID：460609
> 
> 赞同：0
> 
> 时间：2009-01-20T09:42:53.250
> 
> 标签：terminology

当我阅读 Code Complete 这本书时，经常提到“构造”这个词。这意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T09:45:31.590

我会说**架构是设计**，而**构造是实现**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T09:48:28.730

与一本书的类比可能是：

*   建筑是情节
*   构造是文本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T09:58:49.643

程序或计算系统的软件架构是系统的一个或多个结构，它包括软件组件、这些组件的外部可见属性以及它们之间的关系。

施工是设计的实施

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T09:53:05.520

就像房屋一样，（房屋的）建造实现了建筑（计划）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T10:05:17.353

将房屋用作类比建筑是在绘制图纸，解释房屋将拥有哪些房间，如何布置等。建筑是那些带着木头和木头出现的人，看看建筑，然后开始建造屋。

# c++ - #ifdef 在 switch 语句中的错误？

> ID：460613
> 
> 赞同：0
> 
> 时间：2009-01-20T09:43:49.067
> 
> 标签：c++, macros, switch-statement

我有一些看起来像这样的代码：

```
someFunc(value)
{

    switch(value){
        case 1:
        case 2:
        case 3:
#ifdef SOMEMACRO
        case 4:
        case 5:
#endif
           return TRUE;
    }
return FALSE;
} 
```

SOMEMACRO 已定义，假设值为 4.. 为什么会跳过 case 4 和 5 而返回 FALSE？:(

是因为我没有默认情况，还是我不允许在 switch 语句中使用 ifdef？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-20T09:55:23.147

尝试以下操作：

```
someFunc(value)
{
  switch(value){
    case 1:
    case 2:
    case 3:
#ifdef SOMEMACRO
#error macro is defined
    case 4:
    case 5:
#else
#error macro is not defined
#endif
       return TRUE;
  }
  return FALSE;
} 
```

编译它，看看编译器给你的两个错误中的哪一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-20T09:53:28.593

您没有指定您正在使用哪个编译器/预编译器，但大多数都可以选择保留预处理器的结果——我首先要检查的是那里正在生成什么。

诚然，我更愿意维护看起来更像这样的代码：

```
 someFunc(value)
    {
        switch(value){
            case 1:
            case 2:
            case 3:
                return TRUE;
#ifdef SOMEMACRO
            // Special build for SOMEMACRO Inc.
            case 4:
            case 5:
                return TRUE;
#endif
            default:
                return FALSE;
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T09:54:53.957

根据您的编译器，应该有一种方法可以让您阅读和检查预处理的代码。这样，您就无需从远处猜测和戳它，并且可以看到您要求编译器编译的确切代码。使用 gcc，[相关选项是 -E](http://www.redhat.com/docs/manuals/enterprise/RHEL-3-Manual/gcc/preprocessor-options.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-20T10:14:17.820

“开关”没有坏掉

或多或少地引用[The Pragmatic Programmer](https://rads.stackoverflow.com/amzn/click/com/020161622X)。

继续并在其他地方寻找错误。为了说服自己在 someFunc 中添加`value = 4`并就在那里。`#define SOMEMACRO`

进行干净的构建以确保解决每个依赖项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-20T09:46:59.043

你确定你的模块是在你定义了 SOMEMACRO 之后编译的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-20T09:47:50.837

为什么不把“return false”放在默认情况下呢？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-20T09:53:24.273

您的假设中的某些内容不正确，请像这样更改代码并从那里向后工作。

```
#define SOMEMACRO 1

someFunc(value)
{

    value = 4;

    switch(value){
        case 1:
        case 2:
        case 3:
#ifdef SOMEMACRO
        case 4:
        case 5:
#endif
           return TRUE;
    }
return FALSE;
} 
```

如果这不返回 true，那么您就有真正的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-20T09:57:51.847

其他人已经指定如何检查是否定义了宏。

如果您的构建系统正在定义宏，那么找到它的好方法是；将构建输出通过管道传输到 grep（或类似的文本搜索工具）以搜索宏定义（类似于：）`make | grep "-DSOMEMACRO"`。

如果您的系统上没有 grep；将构建输出重定向到一个文件并在您的文本编辑器中打开它，以使用文本搜索手动检查。）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-20T10:00:54.587

像其他人一样，我认为您的假设之​​一一定是不正确的。您没有说您使用的是哪个编译器，但如果它是 MS Visual C++，请尝试将以下内容放入您的 #ifdef 以验证 SOMEMACRO 是否确实**已**定义。

```
#ifdef SOMEMACRO

#pragma message("SOMEMACRO is defined")

    case 4:
    case 5:

#endif 
```

# asp.net - ASP.NET WebForms 或 MVC

> ID：460622
> 
> 赞同：1
> 
> 时间：2009-01-20T09:46:10.357
> 
> 标签：asp.net, asp.net-mvc, webforms

### 复制：

> [我应该追求 ASP.NET WebForms 还是 ASP.NET MVC？](https://stackoverflow.com/questions/191556/should-i-pursue-asp-net-webforms-or-asp-net-mvc)

我们正在开发一个使用客户端-服务器架构的企业应用程序。它基于.NET Framework 3.5，客户端是一个丰富的WinFom应用程序，整个系统处于Beta测试阶段。我们需要通过 web 暴露这个系统的一些功能。当前的桌面客户端应用程序对服务器的调用量最少，但它具有相对中等到大量的数据传输量。

目前的基本思想是为我们的系统创建一个前端层，使用 ASP.NET Web Forms 或 ASP.NET MVC。我们在 ASP.NET MVC 方面没有太多经验，但这项技术似乎非常有趣和有前途（至少对我而言）。

我的问题是：

*   在选择 Web 开发技术时，您会考虑哪些因素？
*   对于这样的场景，您可以选择什么，Web 表单或 MVC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T10:08:10.530

如果您现在想使用 ASP.NET MVC 框架（目前处于测试阶段），您将面临版本更改的风险，即某些功能会中断。您可能需要将此视为维护问题。

ASP.NET MVC 框架还要求软件开发人员习惯于模型-视图-控制器“模式”。如果开发人员不同意应该如何在三层之间进行交互，就会陷入很多坑。

除非您有可以使用此功能的程序员，否则您可能需要考虑使用 Web 表单。有大量可用于 Web 窗体的文档和资源，但 MVC 框架必须在博客和[项目主页](http://www.asp.net/mvc/)上可用的少量文档中进行搜索。

我自己一直在研究 ASP.NET MVC Framework Beta，我可以说它到目前为止非常棒。但它对我很有效的原因是因为我之前一直在修补其他 MVC 框架，例如[Ruby on Rails](http://rubyonrails.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T10:34:39.430

这些问题总是很难负责任地回答，因为每个项目都是不同的，并且总是有多种因素决定技术选择。但在我看来，在这种情况下，就像 Web Forms 是“已知的”，而 MVC 是“未知的”，所以在不了解更多信息的情况下，您已经有一些困难需要克服。

有鉴于此，天平可能更倾向于 Web 表单。它们是经过验证的，是规则而不是例外，所以虽然我理解学习新事物的愿望，但如果你按计划进行，并且产品需要可靠，它们可能是更负责任的选择。在我看来，你会在学习 [MVC] 的同时进行开发，这对于个人项目来说很好，但对于企业项目或任何客户的任何项目来说，它都是在自找麻烦：这可能需要，比如说, 50% 的时间，甚至更多，以使用未知（或鲜为人知的）技术构建项目，而且，假设你从第一天起就没有完全理解它，你将沿途吸取教训可能会增加对最终重构的需求，仅仅因为你“得到它”

因此，如果它是一个重要的项目，并且需要正确完成，并且您对 Web 窗体很熟悉并且感觉自己很了解它们，那么答案可能是 Web 窗体。在更小、更不重要的东西上学习 MVC。您的公司将感谢您为他们做出正确的选择。:)

# bazaar - Bazaar 绑定分支提交和更新

> ID：460632
> 
> 赞同：1
> 
> 时间：2009-01-20T09:49:18.977
> 
> 标签：bazaar

我将 bzr 用于网站。我已经设置了所有当前的分支，因此通过绑定它们将主分支保留在服务器上。这意味着当我在本地提交时，更改会自动推出。到目前为止一切都很好。

但我仍然必须在远程服务器上调用更新。虽然我可以看到这对某些人来说很棒，但我发现它越来越烦人。

有没有办法同时提交、推送和远程更新？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-12T20:51:35.663

bzr 有 2 个插件可以帮助您：

推送和更新：[https ://launchpad.net/bzr-push-and-update/](https://launchpad.net/bzr-push-and-update/)

bzr 上传：[https ://launchpad.net/bzr-upload](https://launchpad.net/bzr-upload)

后者根本不需要在服务器上保留具有完整历史记录的分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T10:10:40.557

生产网站的自动更新很糟糕，即使使用 VCS 来备份 IMO。无论如何，你看过[这个](http://doc.bazaar-vcs.org/bzr.dev/en/user-reference/bzr_man.html#hooks)吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T10:23:53.120

也许是脚本？例如

```
#!/bin/bash
bzr commit $*
bzr pull
bzr push 
```

把它放在你的 PATH 中，并给它一个明显的名字，比如“bzrsync”。这很简单，但应该可以为您节省一些击键...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T19:11:49.493

绑定分支上的 bzr 提交会上传您的更改，但不会更新主分支的工作树。

提交后， bzr push 应该会导致工作树远程更新。

# jquery - 使用 jQuery ui.sortable 时未触发鼠标悬停事件

> ID：460634
> 
> 赞同：6
> 
> 时间：2009-01-20T09:49:56.340
> 
> 标签：jquery, jquery-ui-sortable

我正在使用 jQuery UI Sortables 对列表之间的项目进行排序，并将项目从一个列表拖放到另一个列表。

列表可与控制展开/折叠操作的标题 DIV 一起折叠。我想让列表在用鼠标悬停在标题 DIV 上时自动展开，但仅在我当前正在对列表进行排序时。

问题是，在当前排序时（当我当前正在拖动列表项时），鼠标悬停 / mouseout 事件似乎不会为页面上的任何对象触发。

任何人都知道为什么会发生这种情况/如何解决这个问题？

总体布局：

```
<div class="category">
  <div class="title">title</div>
  <ul class="sortable">
    <li>item 1</li>
    <li>item 2</li>
     ....
  </ul>
</div>
<div class="category">
  ...
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T18:34:29.393

[http://api.jqueryui.com/droppable/#event-over](http://api.jqueryui.com/droppable/#event-over)

```
$( ".title" ).droppable({
  over: function( event, ui ) {
    $(this).next().show(); # show ul.sortable
  }  
}) 
```

当然需要jquery-ui droppable

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-22T06:40:40.417

这是因为在最新的官方 JQuery 1.3 版本中有一个错误。获取[最新的主干版本](http://dev.jquery.com/browser/trunk)来修复它。

这与我回答的关于启动和更新事件也不起作用的另一个问题有关：[jQuery 可排序回调不起作用？](https://stackoverflow.com/questions/466464/jquery-sortable-callbacks-not-working#466566)

# javascript - 使用 Prototype 触发事件

> ID：460644
> 
> 赞同：62
> 
> 时间：2009-01-20T09:54:08.657
> 
> 标签：javascript, events, prototypejs

有没有人知道在 Prototype 中触发事件的方法，就像使用 jQuery 的触发函数一样？

我已经使用观察方法绑定了一个事件侦听器，但我也希望能够以编程方式触发事件。

提前致谢

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2009-01-20T10:12:25.263

[`event.simulate.js`](http://github.com/kangax/protolicious/blob/5b56fdafcd7d7662c9d648534225039b2e78e371/event.simulate.js)适合您的需求。

我已经用过好几次了，它就像一个魅力。它允许您**手动触发原生事件**，例如单击或悬停，如下所示：

```
$('foo').simulate('click'); 
```

这样做的好处是所有附加的事件处理程序仍将被执行，就像您自己单击元素一样。

对于**自定义事件**，您可以使用标准原型方法[`Event.fire()`](http://www.prototypejs.org/api/element/fire)。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-01-20T10:15:30.547

我不认为 Prototype 内置了一个，但是您可以使用它（未经测试，但至少应该让您朝着正确的方向前进）：

```
Element.prototype.triggerEvent = function(eventName)
{
    if (document.createEvent)
    {
        var evt = document.createEvent('HTMLEvents');
        evt.initEvent(eventName, true, true);

        return this.dispatchEvent(evt);
    }

    if (this.fireEvent)
        return this.fireEvent('on' + eventName);
}

$('foo').triggerEvent('mouseover'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-04-20T15:45:41.383

我发现这篇文章很有帮助... [http://jehiah.cz/archive/firing-javascript-events-properly](http://jehiah.cz/archive/firing-javascript-events-properly)

它涵盖了在 Firefox 和 IE 中触发事件的方法。

```
function fireEvent(element,event){
    if (document.createEventObject){
        // dispatch for IE
        var evt = document.createEventObject();
        return element.fireEvent('on'+event,evt)
    }
    else{
        // dispatch for firefox + others
        var evt = document.createEvent("HTMLEvents");
        evt.initEvent(event, true, true ); // event type,bubbling,cancelable
        return !element.dispatchEvent(evt);
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-06-25T22:24:12.583

这里的答案对于“正常”事件是正确的，即由用户代理定义的事件，但对于自定义事件，您应该使用原型的“触发”方法。例如

```
$('something').observe('my:custom', function() { alert('Custom'); });
.
.
$('something').fire('my:custom'); // This will cause the alert to display 
```

# javascript - HTML 窗口对象 onclose 或关闭事件

> ID：460646
> 
> 赞同：1
> 
> 时间：2009-01-20T09:54:22.773
> 
> 标签：javascript, html

窗口对象 onclose() 或 closing() 事件是否在 HTML/Javascript 中公开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T10:06:27.600

您同时拥有 onunload() 和 onbeforeunload() javascript 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T09:57:17.603

我想你想要[onUnload](http://docs.sun.com/source/816-6408-10/handlers.htm#1121231)事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T15:13:49.150

没有任何事件可以让您确定页面刷新、表单提交、链接单击或浏览器关闭之间的区别。

我猜这就是你真正想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-04-08T22:42:49.913

正如 epascarello 建议的那样：您不能直接使用 onunload 或 onbeforeunload 事件 - 它们在窗口关闭、页面刷新、表单提交、链接单击或 url 更改之间没有区别。

唯一可行的解​​决方案是[如何捕获浏览器窗口关闭事件？](https://stackoverflow.com/questions/1631959/browser-window-close-event#1632004)

弹出窗口有问题（带到前面、关闭事件、阻塞）并且很烦人 - 您应该考虑使用模态弹出窗口。

# wpf - 如何停止多个 WPF 调度程序之一？

> ID：460647
> 
> 赞同：0
> 
> 时间：2009-01-20T09:54:31.930
> 
> 标签：wpf, shutdown, dispatcher

我有一个带有一些后台线程的应用程序（实际上是一个进程内 WCF 服务）。每个线程运行自己的 Dispatcher 以使用一些 WPF 类（MediaPlayer 对象来处理一些音频/视频文件；它使用 BeginInvoke 将一些委托排队，最后调用 Dispatcher.Run）。处理完成后，我想关闭它的调度程序以便线程可以完成。调用 BeginInvokeShutdown 会关闭应用程序中的每个调度程序，从而导致关闭应用程序。

有什么我可以做的，所以调度程序完成了消息循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T12:49:32.047

好的，当您在 WPF-App 中托管 WCF-Service 时，该服务的调用方法与应用程序具有相同的调度程序。如果我使用自己的调度程序启动一个新线程，InvokeShutdown 将按预期工作。

# iphone - TableView 不会向单元格发送 setEditing 消息

> ID：460652
> 
> 赞同：1
> 
> 时间：2009-01-20T09:56:26.560
> 
> 标签：iphone, uitableview

到目前为止，我有一个 UITableView，它可以正常工作。

我的问题是当进入“编辑”模式时，显然单元格根本没有改变，并且红色标志（删除控件）仅在我将单元格拖出 tableview 时出现（意味着 iphone 再次重新加载单元格，并且当它检测到单元格被“标记”为正在编辑时，它就在这里）。

当我选择“编辑”按钮时，问题是正确的，红色控件应该出现，但它们没有。

我确实实现了 tableview 的委托方法来返回编辑类型控件（插入或删除）并且没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T15:00:20.233

当然你可以使用 UIViewController。

在`setEditing:animate`方法中，只需调用

```
[super setEditing:editing animated:animate];
[self.myTableView setEditing:editing animated:animate]; 
```

你会得到那些漂亮的小图标；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-24T02:03:44.267

您的控制器可能是 UIViewController 的子类，而不是 UITableViewController。据我目前所发现的是，在继承 UITableViewController 时，您只能获得“免费”图标，这并不酷，因为您不能在 UITableViewController 上混合视觉元素，您只有一个 tableView。

# c# - C# Ajax 更新面板不起作用

> ID：460653
> 
> 赞同：0
> 
> 时间：2009-01-20T09:56:32.987
> 
> 标签：c#, updatepanel, overlay

我有一个不工作的更新面板。我的整个代码：

```
<%@ Page Language="C#" MasterPageFile="~/Master.Master" AutoEventWireup="true" CodeBehind="AlgemeenDocument.aspx.cs" Inherits="PCK_Web_new.WebForm7" Title="Untitled Page" %> 
```

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />

<script language="javascript" type="text/javascript">

    function showOverlay(panel)
    {
        var pageHeight;

        // Get viewport height
        if (typeof window.innerWidth != 'undefined')
            // Get viewport height - FF
            vpHeight = window.innerHeight;
        else
            // Get viewport height - IE
            vpHeight = document.documentElement.clientHeight;

        // Get site height (div)

        var treeview = document.getElementById("Treeview");
        var siteHeight = 0;

        if(treeview != null)
        {
            siteHeight = document.getElementById("Treeview").offsetHeight;
        }
        siteHeight += document.getElementById("HeaderContainer").offsetHeight;
        siteHeight += document.getElementById("divMainMenu").offsetHeight;

        // Compare heights and set the overlay height
        if(vpHeight < siteHeight)
            pageHeight = siteHeight + "px";
        else
            pageHeight = vpHeight + "px";

        var div = document.getElementById(panel);

        div.className = "DocOverlayShow";
        div.style.height = pageHeight;

        document.getElementById('<%= pnlAddComment.ClientID %>').className="DocAddCommentBox";
    }

    function hideOverlay()
    {
        //document.getElementById(commentID).style.visibility = "hidden";
        //document.getElementById(titelID).style.visibility = "hidden";

        var inputs = new Array();
        inputs = document.getElementsByTagName('input'); 

        for ( i = 0; i < inputs.length; i++ )
        { 
            if ( inputs[i].type == 'text' )
            {
                inputs[i].value = '';
            }
        }     

        document.getElementById('<%= txtTitel.ClientID %>').value = "";
        document.getElementById('<%= txtComment.ClientID %>').value = "";

        document.getElementById('<%= pnlOverlay.ClientID %>').className = "DocOverlayHide";
    }

</script>

    <asp:Panel ID="pnlOverlay" runat="server" CssClass="DocOverlayHide">

        <!-- <div id="DocAddCommentBox"> -->
        <asp:Panel ID="pnlAddComment" runat="server" CssClass="DocAddCommentBox">

            <div id="DocACTitleBox">
                Opmerking plaatsen
            </div>

            <div id="DocACContentBox">
                <div class="DocACLabel">
                    Titel:
                </div>
                <div class="DocACInput">
                    <asp:TextBox ID="txtTitel" runat="server"></asp:TextBox>
                </div>
                <div class="ClearFloat">

                </div>
                <div class="DocACLabel">
                    Opmerking:
                </div>
                <div class="DocACInput">
                    <asp:TextBox ID="txtComment" runat="server" TextMode="MultiLine" Rows="15" 
                        Columns="40">
                    </asp:TextBox>
                </div>
                <div class="ClearFloat">

                </div>
                <div id="DocBtnBox">
                    <input id="btnCancel" type="button" onclick="hideOverlay()" value="Annuleren"/>

                    <asp:UpdatePanel ID="UpdatePanel2" runat="server" EnableViewState="False" UpdateMode="Always" RenderMode="Block">
                    <ContentTemplate>
                        <asp:Button ID="btnSave" runat="server" CssClass="btnSave" onclick="btnSave_Click" Text="Opslaan" />
                        <asp:Label ID="lblTitleError" runat="server" Text="ertroro"></asp:Label>
                    </ContentTemplate>
                    </asp:UpdatePanel>

                </div>
                <div class="ClearFloat">&nbsp;</div>
            </div>

        </asp:Panel>
        <!-- </div> -->

        <asp:Panel ID="pnlResult" runat="server" CssClass="DocOverlayHide">

            <div id="DocResultBox">
                <div id="Div1">
                    Opmerking plaatsen
                </div>

                <div id="Div2">
                    <div class="DocACLabel">
                        <asp:Label ID="lblResult" runat="server" Text="Label"></asp:Label>
                    </div>

                    <div id="Div1">
                        <input id="btnClose" type="button" onclick="hideOverlay()" value="Sluiten"/> 
                    </div>
                    <div class="ClearFloat">&nbsp;</div>
                </div>
            </div>

        </asp:Panel>

</asp:Panel>

<div class="DocContainer">

    <div class="DocTitleBox">

        <div class="DocLogo">
            Het logo
        </div>

        <div class="DocTitle">
            <asp:Label ID="lblTitle" runat="server"></asp:Label>
        </div>

        <div class="DocType">
            Document soort
            <asp:Label ID="lblDocType" runat="server"></asp:Label>    
        </div>

        <div class="DocBtn">
            <input type="button" value="Opmerking" onclick="showOverlay('<%=pnlOverlay.ClientID %>')" />
        </div>
    </div>

    <div class="DocContentBox">

        <asp:Label ID="lblID" runat="server"></asp:Label>

        <p>Algemeen Document Geen vaste opmaak.</p>

    </div>

</div> 
```

我试过触发器，但他们没有工作..

当我按 btnSave 这是执行的代码：

```
 protected void btnSave_Click(object sender, EventArgs e)
    {

        lblTitleError.Text = "BUTTON PRESSED";

    } 
```

当我设置断点时，它会运行代码。但未设置标签文本：S

希望有人可以帮忙？

谢谢！

编辑：

我也试过这个：

```
<div id="DocBtnBox">
                    <input id="btnCancel" type="button" onclick="hideOverlay()" value="Annuleren"/>

                    <asp:Button ID="btnSave" runat="server" CssClass="btnSave" onclick="btnSave_Click" Text="Opslaan" />

                    <asp:UpdatePanel ID="UpdatePanel2" runat="server" EnableViewState="False" UpdateMode="Always">
                    <ContentTemplate>
                        <asp:Label ID="lblTitleError" runat="server" Text="ertroro"></asp:Label>
                    </ContentTemplate>
                        <Triggers>
                            <asp:AsyncPostBackTrigger ControlID="btnSave" EventName="Click" />
                        </Triggers>
                    </asp:UpdatePanel>

                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T10:13:26.433

我认为网络上最好的导师是 Joe Stagner。他的 .NET 材料很棒。

这是一个[链接](http://www.asp.net/LEARN/ajax-videos/video-159.aspx)，他在其中准确地向您展示了如何一步一步地做您正在尝试的事情。

附录：

如果我是你，我会根据 Joe 提供的示例代码创建一个干净的页面。转至[http://www.asp.net/LEARN/ajax-videos/](http://www.asp.net/LEARN/ajax-videos/)并找出您想要基于哪个教程来解决您的解决方案。在您在示例页面上获得教程后，我会慢慢地，逐个添加您的应用程序所需的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T10:12:12.270

您希望设置其文本的标签和 btnSave 按钮元素都应位于更新面板元素内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-23T11:06:58.257

尝试从 UpdatePanel 中删除 EnableViewState="False"。

# vb.net - MS Access VB COM 共享插件停止访问关闭

> ID：460654
> 
> 赞同：0
> 
> 时间：2009-01-20T09:56:43.423
> 
> 标签：vb.net, ms-access, add-in

我在 Visual Studio 2008 中创建了一个共享加载项，并使用共享加载项向导并在 VB 中进行编码。在 Access 2003 中运行插件时，我想检查用户是否打开了数据库，因此我将 AccessApplication 变量设置为 OnConnection 过程中的应用程序对象，然后单击按钮检查 AccessApplication.CurrentDB 是否为 Nothing If没有数据库打开 点击按钮后Access会正确关闭。但是如果数据库是打开的，那么我必须在 VS 调试器中停止 Access。

请在我的 OnConnection、OnDisconnection 和 OnClick 程序下方找到任何有关此问题的帮助，我们将不胜感激。

```
Public Sub OnDisconnection(ByVal RemoveMode As Extensibility.ext_DisconnectMode, ByRef custom As System.Array) Implements Extensibility.IDTExtensibility2.OnDisconnection
    m_oTestMenu.Delete()
    m_oTestBtn.Delete()

    m_oTestMenu = Nothing
    m_oTestBtn = Nothing

    AccessApplication = Nothing
End Sub

Public Sub OnConnection(ByVal application As Object, ByVal connectMode As Extensibility.ext_ConnectMode, ByVal addInInst As Object, ByRef custom As System.Array) Implements Extensibility.IDTExtensibility2.OnConnection
    Dim oCommandBars As Microsoft.Office.Core.CommandBars

    On Error GoTo ErrHandler

    AccessApplication = CType(application, Microsoft.Office.Interop.Access.Application)

    oCommandBars = AccessApplication.CommandBars

    ' Add the menu to the existing menu list
    m_oTestMenu = AddMenu(oCommandBars, "Test", "Test")

    ' Now create menu options
    m_oTestBtn = AddMenuButton(m_oTestMenu, _
        "TestBtn", MsoButtonStyle.msoButtonIconAndCaption, "Test Btn", MsoButtonState.msoButtonUp)

    ' Clean up
    oCommandBars = Nothing
    Exit Sub 
```

ErrHandler: oCommandBars = Nothing MsgBox("Error") End Sub

```
Private Sub m_oTestBtn_Click(ByVal Ctrl As Microsoft.Office.Core.CommandBarButton, ByRef CancelDefault As Boolean) Handles m_oTestBtn.Click
    Dim AccessDB As dao.Database

    On Error GoTo ErrHandler

    AccessDB = AccessApplication.CurrentDb

    MsgBox("DB Found " & AccessDB.Name)

    'Try To Close Everything
    AccessDB.Close()
    AccessDB = Nothing

    AccessApplication.CurrentDb.Close()
    AccessApplication = Nothing

    Exit Sub 
```

ErrHandler: MsgBox("点击错误") AccessDB = Nothing End Sub

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T13:58:01.440

找到这篇文章

[http://www.xtremevbtalk.com/showthread.php?t=160433](http://www.xtremevbtalk.com/showthread.php?t=160433)

看来我需要在 OnDisconnect 过程结束时手动进行垃圾收集。

添加了

```
 GC.Collect()
    GC.WaitForPendingFinalizers() 
```

到 OnDisconnect 函数的末尾 Access 现在关闭

希望这对其他人有帮助

# delphi - Delphi Personal Edition 或 Turbo Delphi - 保存和搜索数据

> ID：460660
> 
> 赞同：0
> 
> 时间：2009-01-20T09:58:14.373
> 
> 标签：delphi

我很感兴趣是否可以在 Delphi Personal Edition 或 Turbo Delphi 中制作像地址簿（Windows：开始->所有程序->附件->地址簿）这样的应用程序。

如果是，如何制作？使用哪些组件？

如何使应用程序在其他计算机上使用，并且不需要在该计算机上安装文件以使应用程序工作？（通过某种形式保存数据和搜索特定条目的选项（如在地址簿中查找人员））

问候

* * *

我离开了一段时间，希望我们能继续，我会提供更多信息。

我正在做的是学校项目，我正在尝试制作一个实际会被一些电子工程师使用的应用程序。应用程序的目的是 - 使用一些查询轻松地在硬盘中找到保存某个项目的地图（例如，在 OS Windows 中，C:\Projects\2009\Project1）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T11:00:13.513

从第一个问题开始，您可以（几乎）用 Delphi 编写任何应用程序。其他版本通常意味着较小的库和可能的有限使用（据我所知，您不能出售使用免费版本构建的商业应用程序，但也许 codegear 改变了这一点）

地址簿是一个不错且简单的（数据库）应用程序。对于数据库应用程序，您基本上有两种选择：

*   使用数据感知控件
*   自己做

如果您想快速构建应用程序，数据感知控件非常有用。如果你有生活联系，你可以展示它（即使在设计时）。但在我看来，它们有点有限。

自己动手的选择更难。您应该自己编写基础架构。

**关于一般应用程序开发的一些说明**

首先，您需要决定要构建什么。拿一些纸画一些屏幕。例如：

```
+-------------------------------------------------+
| menu                                            |
+-------------------------------------------------+ 
| Toolbar                                         |
+------------+------------------------------------+
| -Friends   |Name     Mail                       | 
|    >Hers   |Alice    Alice1957@hotmail.com      |
|    His     |Bob      Bob123@hotmail.com         |
| +Coworkers |                                    |
| + Us       |                                    |
| +Them      |                                    |
+------------+------------------------------------+
| statusbar                                       |
+-------------------------------------------------+ 
```

我们有以下控制：

*   包含独立于菜单/工具栏的操作的操作列表（不可见）。
*   一个主菜单，链接到操作列表。
*   链接到操作列表的工具栏。
*   用于组织组的树视图。
*   显示联系人的列表视图。
*   显示应用程序状态的状态栏。

通过操作列表，可以轻松使用主菜单、上下文菜单和工具栏。

列表视图有几种视图样式。您需要将 ViewStyle 属性设置为 vsReport 以获得预期的行为。在列表视图中，每个项目都有一个标题，显示在第一列。其他列用字符串列表（子项）中的信息填充。

然后你需要决定行动：

*   添加地址
*   删除地址
*   复制粘贴
*   移动（拖放很好，但很难编程）
*   打印

还有很多其他问题（可能稍后再说），例如：

*   您想要一个地址簿，还是想要多个？在后一种情况下，您需要一种机制来连接到另一个数据库。
*   您想一次显示一张或多张地址卡吗？

如果这太多了，我建议从小处着手（单数据库、单卡、不打印）。您可以稍后展开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T11:46:16.853

除非我弄错了，个人版不包含数据库组件。但是您可以编写自己的代码。为确保您的程序在其他计算机上运行，​​请确保已关闭动态链接 - 然后将所有内容打包到单个 EXE 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-24T06:47:57.060

您可以在 Delphi Pesonal 版本以及 Turbo Delphi 中构建您的应用程序。

如果您想使用 Delphi Personal，您应该知道它不提供数据访问功能，因此您不能使用 BDE 或 ADO 等...

如果您想从 Delphi Personal 访问数据，那么您必须安装一组[Delphi Warrior](http://kadao.dir.bg/)组件，这些组件专门设计用于允许程序员通过 DAO 访问 Access MDB 数据库。还有专门设计用于在 Delphi Personal 中工作的数据感知控件。

Turbo Delphi 将允许您开箱即用地构建面向数据库的应用程序，但您将无法向 IDE 添加/安装任何新的第三方控件。当然，有办法通过代码使用第三方控件，但它非常**不直观**，因此请避免使用它。

# php - Ruby 是否支持像 PHP 这样的 var 引用？

> ID：460663
> 
> 赞同：3
> 
> 时间：2009-01-20T09:59:06.400
> 
> 标签：php, ruby, reference

在 PHP 中，您可以使两个变量指向相同的数据。

```
$a = 'foo';
$b = 'bar';
$a =& $b;
echo $a // Outputs: bar
echo $b // Outputs: bar 
```

我们在 Ruby 中尝试做的事情被设置`@app_session`为等于`session[@current_app[:uid]]`. 所以我们只需要`@app_session`在我们的应用程序中处理，一切都会自动保存到会话中。

有没有办法在 Ruby 中做到这一点？经过 15 分钟的阅读、谷歌搜索和在办公室四处询问后，我们仍然迷路了……哈哈

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-20T10:06:00.550

Ruby 中的所有变量都是对对象的引用。

```
a = b 
```

表示 a 和 b 指向同一个对象。这就是为什么当你想复制一个给定的对象时，你需要写

```
a = b.dup 
```

写作

```
@app_session = session[@current_app[:uid]] 
```

指向同一个对象，所以你应该没问题。

编辑：您可以这样验证：

```
irb(main):001:0> a = 1
=> 1
irb(main):002:0> b = a
=> 1
irb(main):004:0> p a.object_id
3
=> nil
irb(main):005:0> p b.object_id
3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-20T10:20:35.653

变量和常量是指向内存位置的指针。Ruby 默认执行此操作，因此您不必手动“模拟”PVP 行为。证据：

```
a = "hi"
b = a
a.upcase!
puts a
# => "HI"
puts b
# => "HI" 
```

至于你的`@app_session`问题，我会做这样的事情：

```
class ApplicationController < ActionController::Base
  def app_session
    session[@current_app[:uid]]
  end
end 
```

这使您可以调用方法“app_session”，以便您以后可以轻松地更改实现。（比如说，如果你发现你需要使用常量而不是实例变量，或者其他什么。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T10:38:02.747

同意 leethal 和 Keltia。只需指出一件事：

当您将一些字符串分配给变量时，您总是会通过这样做来创建一个新的字符串对象。

```
a = "foo"  # Create a new String object and make a refer this object.
b = "bar"  # Create a new String object and make b refer this object.
a = b      # Make b refer the object created in the first step.
a = "blah" # Create a new String object and make a refer this object. (!)
puts b     # But(!) b is still "foo", because it still refers the "foo" object.
# => "foo" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-20T10:05:17.837

这不是所有 ruby​​ 对象的默认设置吗？每次都复制一个对象是没有意义的。

# c++ - 通过良好的设计减少缓存未命中

> ID：460666
> 
> 赞同：24
> 
> 时间：2009-01-20T10:02:49.230
> 
> 标签：c++, caching, inline

设计 C++ 程序时如何减少可能的缓存未命中次数？

内联函数每次都有帮助吗？还是只有在程序受 CPU 限制时才好（即程序是面向计算而不是面向 I/O）？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-01-20T10:49:24.987

以下是我在处理此类代码时喜欢考虑的一些事情。

*   考虑您是否想要“数组结构”或“结构数组”。您要使用哪个取决于数据的每个部分。
*   尝试将结构保持为 32 字节的倍数，以便它们均匀地打包缓存行。
*   将数据划分为冷热元素。如果您有一个 o 类对象数组，并且您经常一起使用 ox、oy、oz，但只是偶尔需要访问 oi、oj、ok，那么请考虑将 ox、oy 和 oz 放在一起并移动 i、j 和k 部分到一个并行的辅助数据结构。
*   如果您有多维数据数组，那么使用通常的行顺序布局，沿着首选维度扫描时访问将非常快，而沿着其他维度扫描则非常慢。沿着[空间填充](http://en.wikipedia.org/wiki/Hilbert_curve) [曲线](http://en.wikipedia.org/wiki/Z-order_(curve))映射它将有助于平衡在任何维度中遍历时的访问速度。（阻塞技术是类似的——它们只是具有较大基数的 Z 顺序。）
*   如果您必须招致缓存未命中，请尝试尽可能多地使用该数据以分摊成本。
*   你在做多线程的事情吗？注意缓存一致性协议的减速。填充标志和小计数器，以便它们位于单独的缓存行上。
*   如果您提前知道要访问的内容，Intel 上的 SSE 会提供一些预取内在函数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-20T10:16:05.553

对于数据绑定操作

1.  在列表、地图和集合上使用数组和向量

2.  按行处理列

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T10:09:46.457

允许 CPU 有效地预取数据。例如，您可以减少按行而不是按列处理多维数组的缓存未命中数、展开循环等。

这种优化取决于硬件架构，因此您最好使用某种特定于平台的分析器（例如 Intel VTune）来检测缓存可能存在的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-20T10:47:13.227

内联函数运行可能会损害指令缓存。如果内存不受 fetch 限制，那么它不太可能产生太大（如果有的话）差异。

与往常一样，任何优化都应该通过分析而不是预感来通知。更不用说您需要了解分析器告诉您的内容，这意味着您熟悉汇编语言以及您正在优化的平台的特定特征。

现在有点老了，但 Mike Abrash 的“Graphic's Programming Black Book”仍然有很多很好的一般性建议。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-20T11:01:13.263

此外，如果您使用 C++ 和多线程，则需要考虑错误共享、局部性和每个处理器缓存上数据的热度。这可以产生很大的不同。尤其是在多线程中，以 LIFO 方式计算事物比以 FIFO 方式计算更有效，但它在单处理器架构中也有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-20T10:43:13.393

避免在不需要时使用动态内存。使用 new、delete、smart pointers 等等，往往会将您的程序数据分散到内存中。这不好。如果您可以将大部分数据保存在一起（例如，通过在堆栈上声明对象），那么您的缓存肯定会工作得更好。

# printing - 将一系列图像打印到精确尺寸

> ID：460669
> 
> 赞同：0
> 
> 时间：2009-01-20T10:05:13.937
> 
> 标签：printing, shell, gimp

我想脚本打印一系列照片，但要精确尺寸。（例如 dir /tmp/printing 中的所有 jpeg，大小为 1.5" x 1.0"，每页 6 个）

我碰巧有一台 Ubuntu Linux 机器和一台台式打印机（hp5150），但如果绝对需要，我可能会使用 Windows 或可能获得另一台打印机。

我对 shell 脚本相当熟悉，但是在指定目标尺寸的同时找到打印照片的命令行方法并不幸运。GIMP 似乎是一个显而易见的选择，但我的 google-fu 和一般的摆弄并没有告诉我如何去做。

任何人都可以帮忙（最好举个例子:)！）。

谢谢！

编辑：感谢PEZ，我有一种将多个图像打印到一张纸上的机制，但我看不到如何调整图像大小以设置尺寸，即使使用ImageMajick。我可以调整到以像素为单位指定的尺寸，是否确定（或设置？）打印机的 DPI 并计算像素尺寸以获得打印尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T10:37:29.817

我现在没有使用 Linux 机器，但我认为使用 ImageMagick（“转换”命令）之类的东西来缩放到图像，然后使用 CUPS 的 n-up 打印来打印图像应该可以工作. 打印命令看起来像这样：

```
lp -o number-up=6 my_scaled_image_*.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-15T14:09:17.953

查看此站点以了解 GIMP 中的批处理：http: [//gimp.org/tutorials/Basic_Batch/](http://gimp.org/tutorials/Basic_Batch/)

# perl - 如何确定一个对象是否在 Perl 中实现了一个方法？

> ID：460676
> 
> 赞同：6
> 
> 时间：2009-01-20T10:06:10.440
> 
> 标签：perl, reflection, polymorphism, oop

我有一个实现两个（非正式）接口的多态对象数组。我希望能够通过以下方面的反射来区分它们：

```
if (hasattr(obj, 'some_method')) {
    # `some_method` is only implemented by one interface.
    # Now I can use the appropriate dispatch semantics.
} else {
    # This must be the other interface.
    # Use the alternative dispatch semantics.
} 
```

也许这样的东西有效？：

```
if (*ref(obj)::'some_method') {
    # ... 
```

我很难说出语法何时会尝试调用子例程以及何时返回子例程引用。我对包符号表 ATM 不太熟悉，我只是想破解一些东西。:-)

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-20T10:07:42.683

```
use Scalar::Util qw(blessed);
if( blessed($obj) and $obj->can('some_method') ){ 

} 
```

这里的“can”是所有类都继承自[UNIVERSAL](http://perldoc.perl.org/perlobj.html#Default-UNIVERSAL-methods)的方法。类*可以*重写此方法，但这不是一个好主意。

此外，“can”返回对该函数的引用，因此您可以执行以下操作：

```
$foo->can('some_method')->( $foo , @args ); 
```

或者

```
my $sub = $foo->can('some_method'); 
$foo->$sub( @args ); 
```

*   [标量::实用程序](http://metacpan.org/pod/Scalar::Util)
*   [perldoc.perl.org 上的 Perl 对象](http://perldoc.perl.org/perlobj.html#Default-UNIVERSAL-methods)

**编辑**更新的链语法，感谢 Brian Phillips

# cross-browser - 提供原始 swf 文件在 Firefox 中显示，但在 IE 中不显示

> ID：460677
> 
> 赞同：1
> 
> 时间：2009-01-20T10:06:15.387
> 
> 标签：cross-browser, flash

我有一个案例，我需要将“原始”swf 文件提供给浏览器。也就是说，没有嵌入。我们时不时地在 IE 中进行这项工作时遇到了一些问题，但设法解决了这个问题。到目前为止。我们正在修复一些其他与提供文档有关的问题，并且作为副作用，flash 文件在 IE 中停止工作。Flash 控制浏览器显示区域（您将获得 Flash 上下文菜单而不是 IE:s），但 Flash 文件不会呈现。

我无法弄清楚我所做的改变使它停止工作。很大程度上是因为我们让它发挥作用的变通办法是真正的反复试验。（我们从来没有完全理解问题的基础。）

Flash 文件在我们系统的先前版本中呈现良好。我用 Flash Player 9 和 10 测试过，没有区别。

我完全被困住了。有人知道我可以在哪里尝试挖掘吗？

**编辑：**按照 MatthieuP 和 Kristian J 的建议，我发现了它的含义。这不是标题本身，而是我用来查看标题的代理揭示了一件有趣的事情**：

*当 IE 获取一个未嵌入的 swf 时，它会两次请求该文件*（我猜 ActiveX 组件会创建一个带有嵌入代码的 HTML 文档，然后该文件也会从该文档中被请求。）

这种重复获取给我们带来了麻烦，因为对我们系统的文件请求需要有一个有效的一次性令牌才能成功。第二个请求注定要失败。

感谢您的回答。你从我那里得到了+1，因为我给了它一个机会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T10:45:42.047

查看新旧系统的响应标头；错误的内容类型，内容长度可能会吓坏 Flash 播放器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T12:18:48.690

就像 MatthieuP 说的那样；尝试比较响应标头。请注意最新版本的 Flash 播放器在

`Content-disposition: attachment`

标题。

# algorithm - 是否有最常见算法的概述？

> ID：460679
> 
> 赞同：29
> 
> 时间：2009-01-20T10:06:29.020
> 
> 标签：algorithm

我正在寻找算法的概述，你不时需要。如果有问题，你要么重新发明轮子，要么花大量时间寻找一个算法来解决一个以前已经解决过一百次的常见问题。

最好的一个是具有排序算法的网站，例如：

*   压缩
    *   ...
*   解密
    *   ...
*   加密
    *   对称的
        *   ...
    *   不对称
        *   ...
*   搜索
    *   ...
*   种类
    *   冒泡排序
    *   快速排序
    *   ...

我想你明白我的意思。

你知道哪些页面？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-01-20T10:09:22.337

[维基百科的算法列表](http://en.wikipedia.org/wiki/List_of_algorithms)怎么样？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-20T10:11:38.777

NIST[的算法和数据结构词典](http://www.nist.gov/dads/)怎么样？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-20T10:15:39.470

您还拥有一本很好的关于[算法](http://en.wikibooks.org/wiki/Algorithms)的 Wikibook ，被[许多算法文章](http://en.wikibooks.org/wiki/Special:WhatLinksHere/Algorithms)引用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-20T10:40:27.563

我强烈推荐 Steven Skiena 的《算法设计手册》一书。它具有您提到的目录结构。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-20T10:40:07.393

如果您想要纸上的东西，有一系列书籍“计算机编程的艺术”非常全面。

[维基百科条目](http://en.wikipedia.org/wiki/The_Art_of_Computer_Programming)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-20T10:26:03.910

这本书很棒：

[算法设计手册](http://www.amazon.co.uk/Algorithm-Design-Manual-Steven-Skiena/dp/1848000693/ref=sr_1_2?ie=UTF8&s=books&qid=1232740486&sr=8-2)

这已在其他答案中链接，但它是一个很好的资源：

[Skiena 的算法讲座](http://www.cs.sunysb.edu/~algorith/video-lectures/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-07-01T17:03:19.113

普林斯顿大学有 R. Sedgewick 的一些很棒的公开讲座，（那个人把左倾的红黑树和《C语言算法》一书做成了）

[http://www.cs.princeton.edu/courses/archive/spring11/cos226/lectures.php](http://www.cs.princeton.edu/courses/archive/spring11/cos226/lectures.php)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-20T10:10:52.320

[http://www.algosort.com/](http://www.algosort.com/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-20T10:47:54.817

CLRS。

也就是Cormen、Leiserson、Rivest和Stein的《算法导论》教科书。

它将为您提供用于最常见目的的最重要算法的一个很好的概述，以及可靠的分析。

如果一个简单的网站/列表在没有扎实理解的情况下激发了过于仓促的“剪切和粘贴”选择，那将是一种伤害。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-13T07:39:24.087

除了[The Algorithm Design Manual 之外](http://www.amazon.co.uk/Algorithm-Design-Manual-Steven-Skiena/dp/1848000693/ref=sr_1_2?ie=UTF8&s=books&qid=1232740486&sr=8-2)，还有作者管理的在线[Stony Brook Algorithm Repository](http://www.cs.sunysb.edu/~algorith/)，它链接到**implementations**。两者都具有出色的目录结构。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-21T19:19:58.387

除了附议[The Algorithm Design Manual](https://rads.stackoverflow.com/amzn/click/com/1848000693)之外，我对这本书有非常积极的体验：

[算法简介](https://rads.stackoverflow.com/amzn/click/com/059651624X)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-23T21:33:07.633

询问“是否有最常见算法的概述？” 就像问是否有普通数学或科学的概述？

算法是许多领域中使用的问题解决技术和应用数学，需要系统的方法来解决这些领域/应用程序等复杂问题：

计算机工程或电气：

图像处理算法

一般算法中的信号处理

降噪，模拟转数字

计算机科学或 IT：

数据管理

安全性（加密、入侵检测）

机器学习

金融、运筹学、计量经济学：

线性规划

动态规划

统计算法和随机微积分

组合学

ETC....

仅举几例并划伤表面

然而，大多数专业算法都是从 CS 中遇到的一般情况派生的，因此要回答您的问题，任何涵盖算法简介的书籍或教程都应该没问题。

这是我在学术和专业领域遇到的最常见的 CS 算法 1）排序（冒泡、插入、合并、快速）

2）搜索（dfs，bfs）

3）遍历数据结构的数据结构和算法

4）递归与交互（应研究递归的复杂性，主定理）

5）树（二进制，N-ary，Kd-tree，B-tree）

6）图表（通过dfs，bfs遍历）

7）散列

8）常用数学算法（GCD、取幂、不同矩阵乘法）

9）表达式树（构建和遍历）

10) 通用加密算法概述，如 RSA、AES 等...

如果您研究了我上面提到的内容并知道时间复杂度（O 表示法），那么这几乎涵盖了您需要了解的 CS 算法的所有内容。

我推荐 Cormen 等人的“算法简介”。麻省理工学院出版社

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-12-29T10:06:51.390

[Boost](http://www.boost.org/)中包含最常见的算法。在这里，您可以找到最常用的排序、搜索或其他算法。使用算法与使用特定的编程语言密切相关。除了上述书籍之外，还有一些不错的 URL，例如 [Computer Science Video Tutorials](http://xoax.net/comp_sci/)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-05-15T12:41:47.557

我事实上的选择是 Stackoverflow.com :)

只需搜索关键字“**算法**”；你会遇到很多问题。

# profiler - 代码分析器如何工作？

> ID：460698
> 
> 赞同：25
> 
> 时间：2009-01-20T10:12:59.460
> 
> 标签：profiler

当我在做一个大学项目时，我使用了一个年长学生制作的项目内部分析器，它非常基本但足够好，因为它的任务是减去代码两点之间的时间并提供统计信息。

现在，专业的分析器是如何工作的？它是否预处理代码以插入检查点或类似的东西？它是否读取带有调试数据的二进制代码以捕获调用函数的位置？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-01-20T10:25:16.830

有许多不同的分析器以不同的方式工作。

Commonly used profilers simply examine the running program regularly to see what assembly instruction is currently being executed (the program counter) and which routines called the current function (the call stack). This kind of **sampling** profiler can work with standard binaries, but are more useful if you have debugging symbols to work out lines of code given addresses in the program.

As well as sampling regularly, you can also use processor performance counters to sample after a certain number of events such as cache misses, which will help you see which parts of your program are slowing down due to memory accesses.

Other profilers involve recompiling the program to insert instructions (known as **instrumentation**) to count how often each continuous set of instructions (basic blocks) are executed, or maybe even record the sequence in which basic blocks are executed, or record the content of variables at certain places.

The instrumentation approach can give you all the precision and data you might want, but will slow down the program and that will change its performance characteristics. By contrast, with sampling based approaches you can tune the performance impact against the length of time you need to run the program against the accuracy of the profile data you obtain.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-01-20T10:19:51.163

有两种常见的分析策略（无论如何都是基于 VM 的语言）：检测和采样。

每次方法启动和完成时，仪器都会插入检查点并通知分析器。这可以通过 JIT/解释器或通过后正常编译但预执行阶段完成，该阶段仅更改可执行文件。这会对性能产生非常显着的影响（从而扭曲任何时序结果）。不过，这有利于获得准确的计数。

采样会定期向 VM 询问所有线程的堆栈跟踪是什么样的，并以这种方式更新其统计信息。这通常对性能的影响较小，但会产生不太准确的调用计数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-20T10:38:45.290

As Jon Skeet wrote above there are two strategies: instrumentation and sampling.

Instrumentation is done both manually and also automatically. In manual case: the developer manually inserts code to track the start/end of a region of code of interest. For example a simple "StartTimer" and "EndTimer". Some profiler tools can do this automatically also - for this the profiler will need to do a static analysis of the code i.e. it parses out the code and identify important checkpoints like the start/end of a particular method(s). This is most easy with languages that support reflection (e.g. any .net language). Using 'reflection' the profiler is able to rebuild the entire source code tree (along with call graphs).

Sampling is done by the profiler and it looks into the binary code. The profiler can also techniques like Hooks or trap Windows events/ messages for the purpose of profiling.

Both Instrumentation and sampling methods have their own overheads. The amount of overhead depends - e.g. if the sampling frequency is set to high values, then the profiling itself can contribute significantly to the performance being reported.

Instrumentation Vs Sampling: It is not like one is better than the other approach. Both have their place.

The best approach is to start with a sampling based profiler and look at the whole system level. That is run the sampler and see the system wide resource usage: memory, hard disk, network, CPU.

From the above identify the resources that are getting choked.

With the above info, you can now add instrumentation to your code to pin-point the culprit. For example if memory is the most used resource then it will help to instrument your memory allocation related code. Note that with instrumentation you are really concentrating on a particular area of your code.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-20T10:18:30.493

它取决于被分析的代码类型，例如 .NET CLR为代码分析器[提供了便利。](http://msdn.microsoft.com/en-us/library/ms230818.aspx)在处理托管代码时，可以重写中间代码以注入自定义挂钩。您还可以分析应用程序的堆栈跟踪。操作系统可以提供分析方法，例如 Windows 有[性能计数器](http://msdn.microsoft.com/en-us/library/aa371643(VS.85).aspx)。在处理嵌入式代码时，您可以模拟/替换底层硬件以有效监控系统性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T10:24:00.140

对于 *nix 中的 gprof，在编译和链接时使用 -pg，将一些额外的代码注入到目标代码中。然后通过运行gprof，注入的代码会生成一个报告文件。

# javascript - 为 Google Maps 设计皮肤，使其看起来像原生 Google Maps iPhone 应用程序

> ID：460700
> 
> 赞同：1
> 
> 时间：2009-01-20T10:13:27.260
> 
> 标签：javascript, google-maps

我可以在我的项目上使用一组 goog 的眼睛。我正在为谷歌地图 API 设计一个皮肤，它类似于 iPhone 上的原生谷歌地图应用程序。我已经得到它：

1) 显示自定义信息窗口

2) 自定义引脚/标记

3) 负载时引脚从天而降

4) 从 XML 文件中提取数据

不幸的是，我无法让它在 iPhone 上正常工作，我认为这是因为我的代码格式不正确。

地图和源代码链接可在此处获得：

[http://www.brainbackup.net/post/replicating-the-google-maps-iphone-app.html](http://www.brainbackup.net/post/replicating-the-google-maps-iphone-app.html)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T22:34:32.800

原来这与我使用的谷歌地图版本有关。2.0 允许自定义信息窗口，但不允许引脚从天而降。v 2.123 的情况正好相反。去搞清楚。

# metaprogramming - 公元 1 年（又名公元 1 年）之前是哪一年？

> ID：460732
> 
> 赞同：1
> 
> 时间：2009-01-20T10:26:51.973
> 
> 标签：metaprogramming

前一年是公元 0 年还是公元前 1 年？

这是一个元编程问题，与列表中第一个数字的宗教战争有关。它应该是 0 还是 1？

需要考虑的几点：

*   理查德斯托曼会说什么？我最近读了他的一篇文章，他对 OLPC 提供 Windows 感到不安。他列出了这不好的原因。该列表已编号，从 0 开始。
*   当计算机突然不得不将每年存储的位数增加一倍时，他们将如何处理第 10 年的问题（Y1）？
*   考虑到当他为 excel 宏语言提出新版本的日期时，Joel 会如何处理这个问题，他考虑到日期 ID 对于 1900 年 1 月和 2 月的日期是错误的？（见这里：[我的第一次 BillG 评论](http://www.joelonsoftware.com/items/2006/06/16.html "我的第一次 BillG 评论")）

**编辑：** [下面@Svelil 引用的维基百科条目](http://en.wikipedia.org/wiki/Year_zero)说没有公元 0 年，只是为了记录。我们直接从公元前 1 年到公元 1 年。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T10:37:18.303

> 前一年是公元 0 年还是公元前 1 年？

公元前 1 年，尽管在那之前没有这样称呼它。

> 当计算机突然不得不将每年存储的位数增加一倍时，他们将如何处理第 10 年的问题（Y1）？

对，他们的手指用完了。

事实上，千年虫并不是第一次约会的问题。

当凯撒去世并且没有留下关于如何使用儒略历的记录时，屋大维每三年应用一次闰年，而不是四年。他们注意到在公元前 9 年和公元 8 年之前没有闰年来纠正差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-20T11:04:54.160

> 它应该是 0 还是 1？

Wikipedia 有一篇关于此的好文章：[Year Zero](http://en.wikipedia.org/wiki/Year_zero)
由于从零开始的列表计数在编程中很常见，我个人会遵守该标准。

> 他们将如何处理 10 年级的问题？

用你的脚:-)（嘿，它实际上使你的计数能力**加倍）**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-02T13:13:49.807

正如 MAD 关于世界历史的书所说：

公元前 1 年。世界上最伟大的历史学家无法就明年的名称达成一致。

# c# - 如何将 Page 作为 ref 参数传递给函数

> ID：460733
> 
> 赞同：2
> 
> 时间：2009-01-20T10:27:04.470
> 
> 标签：c#, asp.net

我想知道如何将页面作为函数的 Ref 参数

这就是我想做的

```
 public partial class HomePage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if(!SetupUserPermission.isSessionExpired())
        {
            string UserId = Session["UserId"].ToString();
            SetupUserPermission.SetupUserRights(ref this.Page, Convert.ToInt32(UserId));
        }

    }
} 

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T10:33:04.147

您不能在 C# 中通过引用传递属性。在这种情况下，为什么要通过引用传递 Page？

在 VB 中，您*可以*通过引用传递一个属性，在这种情况下，等效项是：

```
Page tmp = Page;
SetupUserPermission.SetupUserRights(ref tmp, Convert.ToInt32(UserId));
Page = tmp; 
```

你真的确定要这样做吗？

我怀疑你真的不想通过引用传递它，你只是对参数传递有点困惑。有关更多信息，请参阅[我关于该主题](http://pobox.com/~skeet/csharp/parameters.html)的文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-20T10:29:50.860

你为什么要通过它`ref`？在我看来，常规通行证应该可以；这通过值传递**引用**- 这是您想要的（除非您正在创建一个新页面......）。

另外，“ `this`”不是`Page`吗？难道你不能：

```
SetupUserPermission.SetupUserRights(this, ...); 
```

哪里`SetupUserRights`需要一个`Page`？

另请参阅：Jon Skeet 的[C# 参数传递](http://www.yoda.arachsys.com/csharp/parameters.html)页面；这可能会解决一些误解（提示：`Page`是一个*引用类型*（一个类））。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T20:34:16.740

除非您需要在下游调用中更改 this.Page 的引用并让引用反映上游的更改，否则没有理由通过 ref 传递 this。无论哪种方式，我都不认为这适用于属性，尤其是只获得像 this.Page 这样的属性。

# windows - 如何手动安装旧的 cygwin 包？

> ID：460744
> 
> 赞同：12
> 
> 时间：2009-01-20T10:30:55.803
> 
> 标签：windows, cygwin, openldap

我正在处理的项目需要旧版本的 SLAPD（LDAP 服务器）并且必须在 Windows 上运行，因此我使用的是 cygwin 包：

我在这里找到了我需要 2.2.x 的 slapd 版本的二进制包：

[http://www.mirrorservice.org/sites/sourceware.org/pub/cygwin/release/](http://www.mirrorservice.org/sites/sourceware.org/pub/cygwin/release/) ...

如何在 cygwin 中手动安装它？它似乎不是包管理器文件格式（如 RPM 或 Deb），但有没有工具可以为我安装它？

仅供参考，我在公司防火墙后面操作，阻止我查看主要的 cygwin 站点（包括文档），所以请没有人告诉我 RTFM - 我希望我能！

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-08-11T01:56:42.910

如果您需要旧版本，[Cygwin 时间机器](http://www.crouchingtigerhiddenfruitbat.org/Cygwin/timemachine.html)可能会有所帮助。要使用它，我必须从命令行调用 setup.exe，给它`--no-verify`/`-X`选项，它仍然不会让我降级“cygwin”包本身，但至少它是，尽管速度很慢，允许我安装我想作为并行安装测试的版本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-21T17:47:09.853

如果您使用 cygwin 软件包安装程序来安装此软件包，通常如果您选择查看完整信息并滚动到您需要的软件包，您将看到有关版本的一些信息。

现在，如果您单击版本号，您将看到它从存储库中最旧的版本更改为当前版本。如果您的存储库具有您需要的版本，则只需完成向导。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T10:52:50.417

一些 cygwin 镜像保留旧的包文件，例如[http://mirror.isoc.org.il/pub/cygwin/](http://mirror.isoc.org.il/pub/cygwin/) 您可以使用 Sonatype nexus 镜像现有的 cygwin 存储库，但提供您自己的 setup.ini 。![nexus cygwin 镜像配置](https://i.stack.imgur.com/FUkUo.png)

将已经下载的 repo 内容复制到 c:\progs\nexus\sonatype-work\nexus\storage\mirror.isoc.org.il-pub-cygwin\
把你自己的 setup.ini 和 setup.bz2 放在那里。 使用 --no-verify Paste
启动 setup.exe

```
http://localhost:8081/nexus/content/repositories/mirror.isoc.org.il-pub-cygwin/ 
```

进入镜像选择框，点击“添加”

# java - 撒克逊 Xalan JSP

> ID：460752
> 
> 赞同：0
> 
> 时间：2009-01-20T10:35:21.630
> 
> 标签：java, jsp, tomcat, saxon, xalan

我有一个 JSP，它将 XSL 附加到从数据库中提取的 XML 文档。该应用程序使用的是 Saxon Parser，但我的 XML 需要使用 Xalan 解析器。JSP 页面可以覆盖要使用的解析器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-20T11:44:26.950

我没有使用使用默认（Saxon）的 TransformerFactory，而是使用 Xalan 特有的 TransformerFactoryImpl 类。一切似乎都在工作。

# java - “new BigDecimal(13.3D)”导致不精确的“13.3000000000000007105..”？

> ID：460755
> 
> 赞同：16
> 
> 时间：2009-01-20T10:36:26.307
> 
> 标签：java, precision, bigdecimal

Java 怎么`BigDecimal`会这么痛苦？

```
Double d = 13.3D;

BigDecimal bd1 = new BigDecimal(d);
BigDecimal bd2 = new BigDecimal(String.valueOf(d));

System.out.println("RESULT 1: "+bd1.toString());
System.out.println("RESULT 2: "+bd2.toString());

RESULT 1: 13.300000000000000710542735760100185871124267578125
RESULT 2: 13.3 
```

是否存在需要结果 1 的情况？我知道 Java 1.5 改变了`toString()`方法，但这是预期的结果吗？

我也意识到`BigDecimal`有`doubleValue()`等，但我正在使用的库有用地使用 a`toString()`并且我无法改变它:-(

干杯。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-01-20T10:50:54.297

好吧，[API](http://java.sun.com/javase/6/docs/api/java/math/BigDecimal.html#BigDecimal(double))确实解决了构造函数中这种明显的不一致`BigDecimal(double val)`：

> 1.  此构造函数的结果可能有些不可预测。有人可能会假设用 Java 编写 new BigDecimal(0.1) 会创建一个正好等于 0.1 的 BigDecimal（未缩放的值 1，缩放为 1），但它实际上等于 0.10000000000000000555511151231257827021181583404541015625。这是因为 0.1**不能完全表示为双精度**数（或者，就此而言，不能表示为任何有限长度的二进制分数）。因此，传递给构造函数的值并不完全等于 0.1，尽管看起来如此。
>     
>     
> 2.  另一方面，String 构造函数是完全可预测的：编写 new BigDecimal("0.1") 会创建一个正好等于 0.1 的 BigDecimal，正如人们所期望的那样。因此，**一般建议优先使用 String 构造函数。**
>     
>     
> 3.  **当必须将 double 用作 BigDecimal 的源时**，请注意此构造函数提供了精确转换；它与使用 Double.toString(double) 方法然后使用 BigDecimal(String) 构造函数将双精度转换为字符串的结果不同。要获得该结果，**请使用静态 valueOf(double) 方法**。

故事的寓意：痛苦似乎是自己造成的，只需使用[**`new BigDecimal(String val)`**](http://java.sun.com/javase/6/docs/api/java/math/BigDecimal.html#BigDecimal(java.lang.String))or[**`BigDecimal.valueOf(double val)`**](http://java.sun.com/javase/6/docs/api/java/math/BigDecimal.html#valueOf(double))代替 =)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-20T10:40:09.390

您的问题与 无关`BigDecimal`，与 的所有内容`Double`都无法准确表示 13.3，因为它在内部使用二进制分数。

所以你的错误是在第一行引入的。第一个`BigDecimal`只是简单地保留它，同时进行`String.valueOf()`一些可疑的舍入，导致第二个具有所需的内容，这几乎是靠运气。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-20T10:39:12.993

您可能想了解浮点值是如何实现的（[IEEE 754-1985](http://en.wikipedia.org/wiki/IEEE_754-1985)）。突然间，一切都会变得晶莹剔透。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-20T10:38:07.460

这不是 - 的错`BigDecimal`- 这是 的错`double`。`BigDecimal`准确地表示 的*确切*值`d`。`String.valueOf`只显示结果到小数点后几位。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-20T11:21:14.050

`double`用二进制数类型（即, ）表示的分数`float`不能准确地存储在这些类型中。

```
 Double d = 13.3;        
    BigDecimal bdNotOk = new BigDecimal(d);
    System.out.println("not ok: " + bdNotOk.toString());

    BigDecimal bdNotOk2 = new BigDecimal(13.3);
    System.out.println("not ok2: " + bdNotOk2.toString());

    double x = 13.3;
    BigDecimal ok = BigDecimal.valueOf(x);
    System.out.println("ok: " + ok.toString());

    double y = 13.3;
    // pretty lame, constructor's behavior is different from valueOf static method
    BigDecimal bdNotOk3 = new BigDecimal(y);
    System.out.println("not ok3: " + bdNotOk3.toString());

    BigDecimal ok2 = new BigDecimal("13.3");
    System.out.println("ok2: " + ok2.toString());

    Double e = 0.0;
    for(int i = 0; i < 10; ++i) e = e + 0.1; // some fractions cannot be accurately represented with binary
    System.out.println("not ok4: " + e.toString()); // should be 1

    BigDecimal notOk5 = BigDecimal.valueOf(e);
    System.out.println("not ok5: " + notOk5.toString()); // should be 1

    /* 
     * here are some fractions that can be represented exactly in binary:
     * 0.5   = 0.1   = 1 / 2
     * 0.25  = 0.01  = 1 / 4
     * 0.75  = 0.11  = 3 / 4
     * 0.125 = 0.001 = 1 / 8
     */ 
```

输出：

```
not ok: 13.300000000000000710542735760100185871124267578125
not ok2: 13.300000000000000710542735760100185871124267578125
ok: 13.3
not ok3: 13.300000000000000710542735760100185871124267578125
ok2: 13.3
not ok4: 0.9999999999999999
not ok5: 0.9999999999999999 
```

只需使用**`BigDecimal.valueOf(d)`**or **`new BigDecimal(s)`**。

# f# - F# 度量单位，通用性问题

> ID：460766
> 
> 赞同：3
> 
> 时间：2009-01-20T10:38:54.883
> 
> 标签：f#, units-of-measurement

（*我[仍在使用 F# 中的](https://stackoverflow.com/questions/412459/how-to-generically-remove-f-units-of-measure) [度量](https://stackoverflow.com/questions/419521/f-units-of-measure-lifting-values-to-floatsomething)单位）*

我在制作采用“类型化”浮点数的“通用”函数时遇到问题。

以下模型类旨在根据因素“c”密切关注位置的累积误差。编译器不喜欢我在类型​​的主体中说 0.<'a> （“度量单位文字中的意外类型参数”）。

```
///Corrects cumulative error in position based on s and c
type Corrector(s_init:float<'a>) =
    let deltaS ds c = sin (ds / c) //incremental error function

    //mutable values
    let mutable nominal_s = s_init
    let mutable error_s = 0.<'a>  //<-- COMPILER NO LIKE

    ///Set new start pos and reset error to zero
    member sc.Reset(s) = 
        nominal_s <- s
        error_s <- 0.<'a>  //<-- COMPILER NO LIKE

    ///Pass in new pos and c to corrector, returns corrected s and current error    
    member sc.Next(s:float<'a>, c:float<'a>) = 
        let ds = s - nominal_s //distance since last request
        nominal_s <- s   //update nominal s
        error_s <- error_s + (deltaS ds c) //calculate cumulative error
        (nominal_s + error_s, error_s) //pass back tuple 
```

* * *

我相信，另一个相关问题仍然与“通用”功能有关。

在下面的代码中，我要做的是创建一个函数，该函数将采用任何类型的浮点数的#seq 并将其应用于仅接受“香草”浮点数的函数。第三行给出了“[值限制](https://stackoverflow.com/questions/416508/f-compiler-error-fs0030-problems-with-the-value-restriction)”错误，我看不到任何出路。（删除 # 可以解决问题，但我想避免为列表、序列、数组等编写相同的东西。）

```
[<Measure>] type km //define a unit of measure
let someFloatFn x = x + 1.2 //this is a function which takes 'vanilla' floats
let MapSeqToNonUnitFunction (x:#seq<float<'a>>) = Seq.map (float >> someFloatFn) x
let testList = [ 1 .. 4 ] |> List.map float |> List.map ((*) 1.0<km>)
MapSeqToNonUnitFunction testList 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T20:41:01.360

您可以将第一个“编译器不喜欢”更改为

```
let mutable error_s : float<'a> = 0.0<_> 
```

编译器似乎喜欢这样。

至于第二个问题，我没有看到和你一样的错误，而且这个

```
[<Measure>] type km 
//define a unit of measure
let someFloatFn x = x + 1.2 //this is a function which takes 'vanilla' floats
let MapSeqToNonUnitFunction (x:seq<float<_>>) = Seq.map (float >> someFloatFn) x
let testList = [ 1 .. 4 ] |> List.map float |> List.map ((*) 1.0<km>)
let testList2 = testList :> seq<_>
let result = MapSeqToNonUnitFunction testList2
printfn "%A" result 
```

为我编译（虽然向上转换到 seq<_> 有点烦人，我不确定是否有一种简单的方法可以摆脱它）。

另外，我认为惯例是将单位参数命名为 'u, 'v, ... 而不是 'a, 'b, ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T11:33:33.977

计量单位不能用作类型参数。这是因为编译器在编译期间会擦除它们。这个问题非常相似： [F# Units of measure - 'lifting' values to float<something>](https://stackoverflow.com/questions/419521/f-units-of-measure-lifting-values-to-floatsomething)

# msbuild - 使用 MSBuild 将参数传递给 MSTests

> ID：460775
> 
> 赞同：0
> 
> 时间：2009-01-20T10:42:21.770
> 
> 标签：msbuild, conditional, mstest, tfsbuild

我有一个问题想知道是否可以以特定方式解决。

我希望能够在将在 TeamBuild 服务器上运行的 MSBuild 脚本中传递参数或设置某种变量。

此参数将用作在 MSTest 中设置 TestFixture 的条件，以确定要使用的类的具体实现。在构建服务器上运行时它将是一个模拟版本，而在开发人员机器上运行时是对物理资产的引用。

这很容易吗？我可以设置一个环境变量，但如果 MSTest 和 MSBuild 中有特定的东西可以使用，我会更喜欢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T07:18:21.747

我发现的最简单的方法是编写配置文件。MsBuild 社区任务使这成为可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T10:49:14.113

作为 xUnit 指南，测试不应**接受**参数。它们应该只运行而无需有人配置它们。

```
public void TestMethodName() 
```

您的需求似乎更倾向于[依赖注入](http://martinfowler.com/articles/injection.html)。对于像[Spring.Net](http://www.springframework.net/)这样的框架更适合。

**更新：**
根据您的评论，您似乎只需要一个类似于#define BUILD 的开关。尝试条件编译符号（项目设置>构建）与 ReplaceCollaboratorsForBuildServer 方法相结合，该方法用[ConditionalAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)修饰并在 testFixture 设置方法结束时调用。

# video-processing - 我可以用什么来自动化视频快照

> ID：460779
> 
> 赞同：3
> 
> 时间：2009-01-20T10:43:36.153
> 
> 标签：video-processing

我可以使用什么命令行工具来创建我制作的视频的缩略图预览？我不想要 Windows 制作的单个拇指，我想要一个包含 30 或更少镜头的大型 jpg 文件，这样我就可以在不运行它的情况下预览电影。

我要么需要一个可以一次执行批处理的应用程序，要么需要一个命令行实用程序，这样我就可以遍历文件夹或需要将其提供给实用程序。我正在考虑破解 ffplay 来做到这一点，我不知道我在做什么，所以这是推荐的吗？（我多次使用 SDL，从来没有使用它的 YUV 设置，也没有使用 ffmpeg）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T10:51:36.120

您可以使用[ffmpeg](http://ffmpeg.org/)执行帧提取，这是我做了类似的事情

```
ffmpeg -i my_input_video.flv -y -an -sameq -f image2 -r 1 my_frame_%05d.jpg 
```

*   -i my_input_video.flv 指定输入文件
*   -y 覆盖输出文件
*   -an 禁用音频（我们正在将视频转码为一系列 jpeg，我们不需要音频）
*   -sameq - 使用与源相同的质量
*   -f image2 将输出格式设置为 image2（图像序列）
*   -r 参数是每秒帧数，因此上述命令将每秒生成一个 jpeg。

一旦你收集了 jpeg，你可以使用 ImageMagick [montage](http://www.imagemagick.org/script/montage.php)命令来构建一个蒙太奇图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T10:53:38.987

使用播放器：

```
mplayer -vo jpeg -frames 1 your_file 
```

将提取第一帧。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T10:56:13.210

您可以使用[MTN](http://moviethumbnail.sourceforge.net/)。它可以扫描整个目录并为找到的每个视频创建缩略图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T10:53:16.103

[Media Player Classic](http://sourceforge.net/projects/guliverkli/)可以创建一个集合（称为另存为缩略图；使用矩阵，即 4x4），但只能从单个文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-27T07:56:05.223

Potplayer 可以自动为文件夹甚至子文件夹中的一批视频生成缩略图。只需点击几下。

1.  将您想要从中获取缩略图的所有视频添加到播放列表（您可以通过转到菜单“打开-打开文件夹...”来执行此操作）
2.  选择播放列表中的所有视频，然后右键单击它们。
3.  在弹出菜单中选择“创建缩略图图像...”。
4.  自定义输出文件夹、缩略图数量、图像大小和其他设置。
5.  单击“确定”。

# vb.net - 在 VB.Net 中初始化对象变量

> ID：460788
> 
> 赞同：4
> 
> 时间：2009-01-20T10:48:36.017
> 
> 标签：vb.net

在VB.Net中，以下三种初始化对象变量的方式有什么区别

方法一

```
Dim commandObject As SqlCommand 
commandObject = New SqlCommand("MadeUpCommand") 
```

方法二

```
Dim commandObject As SqlCommand = New SqlCommand("MadeUpCommand") 
```

方法三

```
Dim commandObject As New SqlCommand("MadeUpCommand") 
```

一个比其他的更有效，还是它们都一样有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-20T10:55:01.293

3 种方法生成的 IL 没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T11:00:11.657

方法 1 和 2 实际上是相同的。方法 1 显然在分配的单独语句中声明了对象，但是如果代码中的 2 行彼此相邻，那么它实际上也与方法 2 和 3 相同。在这种情况下，我将始终使用方法 3是必须简洁的。正如darin 所说，它们都生成相同的IL。

当声明和赋值需要具有不同的范围时，我只会使用方法 1，例如，赋值是在 If 块内完成的，并且需要在该块之外测试值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T11:14:57.820

(2) 和 (3) 是等价的。我希望（1）也被优化为等效（即使有其他局部变量/实例）

我见过的大多数编码标准都建议在声明点初始化变量，并且声明点尽可能接近首次使用。

当然，在 VB.Net 2 及更高版本中，我更愿意看到

```
 Using commandObject As New SqlCommand("MadeUpCommand")
        ' Etc.
    End Using 
```

# css - 隐藏 SPAN 溢出

> ID：460796
> 
> 赞同：28
> 
> 时间：2009-01-20T10:52:48.490
> 
> 标签：css

我正在尝试创建一个组合框样式小部件（与 jquery-ui 兼容），目前我正在尝试对框的静态布局进行排序。问题是当我在选择的值区域中有长文本时，它不会在 Firefox 中剪辑（实际上是换行）。我不想要这个并尝试了各种组合溢出：隐藏的空格：nowrap 等，但在 Firefox 中它仍然会换行。示例代码如下。

```
<a href="#" class="ui-widget ui-widget-content ui-custom-button ui-state-default ui-corner-all ui-helper-reset" style="padding-left:5px;text-decoration: none; width: 139px; ">
    <span style="float:right;margin-top:1px;border-left:1px solid #D3D3D3;" class="ui-custom-button-icon ui-icon ui-icon-triangle-1-s" ></span>
    <span style="line-height:1.5em;font-size:10px;margin-top:1px;overflow:hidden;height:16px;">If the text is very long then somethin</span>
</a> 
```

任何人都可以提供任何帮助吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-01-20T10:57:07.560

尝试给元素 a `display:block`，或将 更改`SPAN`为块级元素，如`DIV`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-01-20T10:56:10.357

问题是跨度是内联元素，您不能在内联元素上设置宽度或高度。

并且由于溢出控制基于块尺寸它不起作用。

但是，从 Firefox 3.0 开始，支持

```
 display: inline-block 
```

这使您可以像控制块一样控制元素，但是对于包含范围，它*的*行为仍然像内联元素。

# curl - 屏幕抓取

> ID：460799
> 
> 赞同：3
> 
> 时间：2009-01-20T10:53:47.567
> 
> 标签：curl

现在我学习cURL，我面临一个困难是直接通过用户名和密码登录页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T10:56:56.033

对于标准 HTTP 身份验证，您可以尝试：

```
curl http://username:password@url 
```

它应该工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T10:56:59.557

您需要使用的方法将取决于网页的用户名/密码检查是如何实现的，但这可能会对您有所帮助：
[http ://curl.haxx.se/mail/archive-2008-05/0113.html](http://curl.haxx.se/mail/archive-2008-05/0113.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T11:18:56.457

我假设您想获取隐藏在登录页面后面的页面，并且该页面不受 CAPTCHA 保护。要做到这一点，你必须

1.  将带有登录表单数据的 POST 请求发送到登录表单的提交 URL（参见 HTML 源代码）
2.  保存 cookie
3.  将这些 cookie 与所有后续请求一起发送（必要时更新）

我用`wget`. `curl`应该是相似的（参见其手册）。

1、2：

```
wget --keep-session-cookies --save-cookies "mycookies" \
     --post-data "login=mylogin&password=mypass" submit_URL 
```

3：

```
wget --load-cookies "mycookies" --keep-session-cookies --save-cookies "mycookies" \
     another_URL_behind_login_form 
```

从我在 中看到的`man curl`，1-2 应该是这样的（未经测试）：

```
curl -F "login=mylogin;password=mypass" -c "mycookies" submit_URL 
```

和 3：

```
curl -b "mycookies" -c "mycookies" another_URL 
```

但我没有用`curl`.

# java - Java 6 和 JaxB 2.1

> ID：460804
> 
> 赞同：4
> 
> 时间：2009-01-20T10:56:10.603
> 
> 标签：java, jaxb, jaxb2, java-6

Java 6 的原始版本随 JAXB 2 一起提供，但有人告诉我，“后来的”Java 6 版本随 JAXB 2.1 一起提供。

有谁知道与 JAXB 2.1 一起发布的第一个 Java 6 版本是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-23T01:56:23.423

显然，Java 6 Update 4 是第一个与 JAXB 2.1 一起发布的版本（[来源](http://weblogs.java.net/blog/ramapulavarthi/archive/2008/01/jaxws_21_and_ja.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-09T16:57:02.457

JAXB 会定期集成到最新的 JDK 版本中，因此，使用最新的 JDK 意味着使用最新的（稳定的）JAXB 版本。

我想可能的 JAXB 3.0 不会进入 JDK 6，就像 JAXB 2.0 没有进入 JDK 5 一样。

# c++ - C++：DLL卸载问题

> ID：460809
> 
> 赞同：5
> 
> 时间：2009-01-20T10:57:06.640
> 
> 标签：c++, dll

如何确保在其中存在任何对象时不会卸载 dll？

问题是，当我使用显式内存管理时，我可以在释放 dll 之前删除 dll 对象，但是使用智能指针我无法控制销毁的顺序，这意味着 dll 可能首先被释放，导致尝试释放时崩溃其他对象之一：

FlPtr 是一个简单的引用计数类，它根据需要调用 AddRef 和 Release

```
ExampleDll *dll = LoadDll(L"bin\\example.dll");
IObject *obj = dll->CreateObject();
...
obj->Release();
delete dll;//fine because all objects already deleted
return 0;

auto_ptr<ExampleDll> dll = LoadDll(L"bin\\example.dll");
FlPtr<IObject> obj = dll->CreateObject();
...
return 0;//crash if dll is destructed before obj since Object::Release needs to call into the dll 
```

我尝试让 dll 自己处理卸载，即只有在所有对象都被删除后才卸载。这项工作通过创建 dll 实现的新对象 IExampleDll 来实现。这类似于之前的 ExampleDll 对象，但它存在于 dll 中而不是 exe 中，并且也被计算在内。dll 中的每个对象都会在构造时增加此引用，并在销毁时减少它。这意味着仅当 exe 释放其引用并且所有 dll 对象已被销毁时，引用计数才达到零。然后它在其析构函数中调用 FreeLibrary(GetModuleHandle()) 删除自己。

然而，这在 FreeLibrary 崩溃，我假设是因为线程仍在被卸载的 dll 代码中......

我现在不知道如何确保仅在没有剩余对象时才卸载 dll，除了在应该删除其他所有内容后返回显式释放 dll；

```
int main()
{
    ExampleDll *dll = LoadDll("bin\\example.dll");
    restOfProgram();
    delete dll;
} 
```

当需要在程序中安全地加载/卸载dll时，这种方法变得困难，即如果用户在选项中从d3d更改为openGL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-20T12:51:48.827

假设您不想在卸载库时终止线程（否则，请参阅 MSalters），您需要从加载它的调用者中释放该库。

COM 通过一个 in-DLL 实例计数器解决了这个问题（很像你的，如果我理解正确的话），并通过调用全局导出`CanUnloadNow`函数定期检查它。

另一种选择是让您的对象/接口智能指针也引用它们来自的 DLL。这会增加客户端数据的大小，但您不需要接触 DLL。您甚至可以回收 LoadLibrary/FreeLibrary 引用计数器，但这可能会影响性能。

此外，如果您获得循环 DLL 依赖项（组件 DllA.X 引用 DllB.Y，后者引用 DllA.Z），这些方案都没有多大帮助。对于不需要全球知识的问题，我还没有提出一个好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T12:27:12.403

对于在运行时切换 DLL 的情况，我会避免使用 DLL 创建的对象的智能指针系统，并使用这样的系统：

```
 |-----------------------|  |--------------------------|
                    | Abstraction Interface |  | Implementation Interface |
                    |-----------------------|  |--------------------------|
                               ^                           ^
                               |                           |
|-------------|1     *|-------------------|*      *|----------------|
| Application |-------| Abstraction Layer |--------| Implementation |
|-------------|       |-------------------|        |----------------|

\------------- Main Program ------------------/ \-------- DLL --------/ 
```

应用程序拥有所有分配的抽象层对象的列表。抽象层对象是唯一允许拥有指向由实现层创建的对象的指针的对象。交换 DLL 时，首先迭代所有抽象层对象，并告诉它们释放实现特定的数据。然后卸载 DLL 并加载新的 DLL。然后再次迭代抽象层对象并告诉他们创建新的实现特定数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T11:48:27.613

MSDN 对此主题有明确说明：“必须卸载正在执行的 DLL 然后终止自身的线程应调用[FreeLibraryAndExitThread](http://msdn.microsoft.com/en-us/library/ms683153%28VS.85%29.aspx)而不是分别调用[FreeLibrary](http://msdn.microsoft.com/en-us/library/ms683152%28VS.85%29.aspx)和[ExitThread](http://msdn.microsoft.com/en-us/library/ms682659%28VS.85%29.aspx)。否则，可能会发生争用情况。有关详细信息，请参阅备注部分FreeLibraryAndExitThread 的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T18:23:34.273

好的我认为最好的选择是使用轮询dll的COM方法来查看它是否可以卸载。不过，我该怎么做才能在其他所有内容都关闭（即主线程已终止）后继续轮询 dll？我是否需要创建一个完全独立的进程来执行此操作，在这种情况下，我该怎么做才能让这个独立的进程知道所有加载的 dll，并且对性能的影响很小？

也许我可以在所有 DllPtr 超出范围时创建轮询系统，并在释放 dll 后立即终止它？这样，它只存在于销毁任何剩余智能指针所需的时间内。

# wpf - wpf边框控件跨越listboxItem的宽度

> ID：460812
> 
> 赞同：20
> 
> 时间：2009-01-20T10:57:34.673
> 
> 标签：wpf, listbox, border

我试图在我的 wpf 应用程序中为业务对象定义一个 dataTemplate，其中的一个集合被绑定到一个 ListBox。

```
<UserControl.Resources>
    <DataTemplate x:Key="ResizedItemsDataTemplate" DataType="{x:Type resizer:ResizeMonitorItem}">
              <Border x:Name="bdr" BorderBrush="Blue" 
                                     BorderThickness="1" 
                                     CornerRadius="2" 
                                     Width="auto"
                                     HorizontalAlignment="Stretch"
                                     VerticalAlignment="Stretch">
                    <Grid Margin="2">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="14"></RowDefinition>
                            <RowDefinition Height="14"></RowDefinition>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Text="{Binding SaveAsFileName}"></TextBlock>
                        <TextBlock Grid.Row="1" Text="{Binding ResizedImageFilePath}"></TextBlock>
                    </Grid>
             </Border>
    </DataTemplate>
</UserControl.Resources>
<Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="0">    
    <Border BorderThickness="0,0,0,5" BorderBrush="DarkGray" >
        <ListBox x:Name="ListBoxResizeItems" ItemsSource="{Binding Path=ResizeItems}" BorderThickness="0" ItemTemplate="{DynamicResource ResizedItemsDataTemplate}">
        </ListBox>
    </Border>
</Grid> 
```

如何让用 x:Name=bdr 定义的边框跨越每个列表框项的整个宽度？目前它只跨越其中的文本块，不需要填充列表框的整个宽度，并且每个列表框也不同。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-01-20T11:15:20.737

这可能更多地与 ListBoxItems 本身没有占用 ListBox 的整个宽度有关。将`HorizontalContentAlignment="Stretch"`属性添加到您的`ListBox`并查看它是否会拉伸各个项目以填充宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T11:22:43.967

解决了。诀窍是在列表框上设置 Horizo​​ntalContentAlignment="Stretch" 以使其内容拉伸整个宽度而不是仅适合内容。

```
 <ListBox x:Name="ListBoxResizeItems" 
                HorizontalContentAlignment="Stretch"
                ItemsSource="{Binding Path=ResizeItems}" 
                BorderThickness="0"                                         
                ItemTemplate="{DynamicResource ResizedItemsDataTemplate}" >
        </ListBox> 
```

抱歉，马特，当我输入这篇文章时，你的答案已经很透彻了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-11-19T17:08:39.670

与我尝试的相比，Horizo​​ntalContentAlignment 是一个不错的、干净的解决方案。谢谢！

以下是 ALMOST 的工作原理，但有时会使对话框的动画本身变得越来越宽：

```
Width="{Binding ActualWidth, 
        RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBox}}}" 
```

# build - 您如何启动并运行构建服务器？

> ID：460813
> 
> 赞同：14
> 
> 时间：2009-01-20T10:57:39.417
> 
> 标签：build, build-process, build-automation

我想这里的每个人都会同意，为了被认为是专业的软件公司，你必须具备一些基本的东西。

毫无疑问，其中之一就是构建服务器，问题是，你需要走多远。

*   构建服务器的最低要求是什么？（只是编译的地方？）
*   您构建服务器的最终目标是什么？（计划、源代码控制集成、自动部署到测试/实时服务器）
*   假设您目前一无所有，从哪里开始？

如果我们可以列出一些业余开发人员可以参与的简单任务，以便将它们设置在功能齐全的构建服务器的正确轨道上，那就太好了。

听到人们觉得他们拥有一个“完整的”系统设置来执行他们需要的所有功能以及他们如何从头开始设置它也是一件好事。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-20T10:59:46.527

您可以从查看[Cruise Control](http://cruisecontrol.sourceforge.net/)开始。

如果那是你的毒药，还有[CruiseControl.net 。](http://confluence.public.thoughtworks.org/display/CCNET/Welcome+to+CruiseControl.NET)

但基本上，您需要以下成分：

*   专用环境（虚拟机/服务器。不要使用开发人员的机器，除非只有你自己。即便如此，如果可以的话，运行虚拟机。当/如果您的组织中可用时，将其移动到服务器要容易得多）
*   支持标记/标记修订的源代码控制系统（例如，[Subversion](http://subversion.tigris.org/) + [TortoiseSVN](http://tortoisesvn.tigris.org/)）
*   构建脚本。这些可以是使用命令行启动 devenv.exe 或 msbuild.exe 应用程序的批处理文件，或者您可以使用[Ant](http://ant.apache.org/)或[NAnt](http://nant.sourceforge.net/)之类的东西。

在这种情况下，CruiseControl 充当[持续集成](http://martinfowler.com/articles/continuousIntegration.html)服务器，并且可以确保您在签入代码时已完成构建。这意味着您知道构建是否会比仅夜间构建更快地[被破坏。](http://blogs.msdn.com/buckh/archive/2006/10/26/a-checkin-policy-to-detect-that-the-build-is-broken-in-a-ci-environment.aspx)不过，您可能还应该有夜间构建。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-20T15:21:38.370

[Hudson](http://hudson-ci.org/)是一个伟大的 CI。

我们在本地运行农场，但我们首先下载 hudson.war 并做

> java -jar hudson.war

它与 SCM、bug 卡车系统集成，真是太棒了。

如果要保留旧版本，则需要一些磁盘空间。

享受它是迄今为止最直接的 CI 解决方案。

HTH，休伯特。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T11:01:51.403

如果您正在使用 Cruise Control，则可以从手动完成工作的 Ant build.xml 开始。

您需要一个可以进行标记签出的版本控制系统。

您需要使用 Ant 任务运行 JUnit 测试并生成 HTML 报告。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-20T11:11:10.043

我说你必须从实施构建策略开始，这样你才能以结构化的方式构建代码——我使用 NANT。

对于基本的构建服务器 - 使用其中一种 CI 产品来监控您的源代码控制并在检测到更改时触发构建。例如：巡航控制。

一旦您将基本构建放在一起 - 在成功构建后添加单元测试的运行。

我拥有的最成功的系统有 3 个不同的构建：- - 一个在签入时触发 - 所有这些都是构建代码。- 按需构建应用程序，生成安装程序，然后将安装程序放入共享驱动器以供测试人员获取 - 每天晚上 10 点触发的构建。这： - 运行一些代码生成以从 UML 模型构建 DB 和 C# 代码 - 构建代码 - 在测试 oracle 实例上创建新的构建验证测试用户 - 将应用程序模式运行到 db - 启动了一堆单元测试- 清理 db 用户（如果测试成功） - 运行覆盖率分析以构建单元代码覆盖率报告

我们为此使用的软件是 NANT、CruiseControl.NET、自定义代码生成系统、用于构建 oracle 模式的自定义应用程序以及用于代码分析的 NCover。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-20T11:11:25.660

首先阅读 Martin Fowler 关于[持续集成](http://martinfowler.com/articles/continuousIntegration.html)的优秀论文。

我们为一个大于 2,000 kSLOC 的大型项目构建了这样一个系统，它证明了自己的价值。

高温高压

干杯，

抢

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-22T08:51:49.280

Cruise、Maven、Hudson 等都很棒，但它总是值得有一个权宜之计的解决方案。

您应该有一个批处理文件、shell 脚本或简单的书面指令，允许您从任何机器运行构建。我们过去曾有过构建服务器不可用的情况，快速切换到另一台机器的能力非常宝贵！

除非你有一个怪物项目，否则构建机器的规格并不重要。我们尝试将构建时间缩短到 10 分钟（包括单元测试），并且我们有一个相当大的项目。

不要因为“现有的工具都不够好”而试图创建或编写自己的构建系统。所有现代构建系统都允许您编写插件来执行自定义操作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-20T11:23:22.110

我正在使用 Cruisecontrol.NET 和 msbuild buildscript。

我可以手动使用构建脚本，以便获得最新版本的代码库，使用命令行非常轻松地构建代码库。（如果您正在处理由多个解决方案组成的应用程序，这将非常有趣）。

除此之外，我的 CruiseControl.NET 构建服务器也使用这个构建脚本。它会定期检查是否有更改提交到源代码控制。
如果发生这种情况，CC.NET 将执行我在 buildscript 中定义的“获取最新”任务，构建所有内容，执行单元测试并执行静态代码分析 (fxcop)。

我的“buildserver”只是一个旧工作站。这是一个 PIV，3Ghz 和 1gb RAM，它完美地完成了它的工作。

我觉得有趣的另一件事是能够自动部署新版本或构建设置。我还没有这样做，因为我不确定这是否是一个好主意，也没有找到一个好的策略来这样做......我的意思是；将某些组件的新版本部署到关键任务应用程序的生产环境中是个好主意吗？我不这么认为...

我认为这是一个很好的起点：[ [http://confluence.public.thoughtworks.org/display/CC/Home;jsessionid=5201DA7E8D361EB164C40E519DA0F0DE][1]](http://confluence.public.thoughtworks.org/display/CC/Home;jsessionid=5201DA7E8D361EB164C40E519DA0F0DE][1])

至少，这是我在设置构建服务器时开始寻找的地方。:)

[1]：CruiseControl 主页

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-10-18T23:36:20.117

大致按顺序 - 通过更复杂的最小/最不复杂

*   能够在任何机器上获取一组特定的源
*   能够构建该源（没有问题）
*   能够（安排）每晚/或其他定义的时间段构建，无需用户干预
*   一个（或多个）专用构建服务器（不共享为 qa 或 dev 机器）
*   能够在每次签入/提交后进行构建
*   在构建后通知相关方构建状态
*   随时提供构建状态
*   创建安装程序作为构建的一部分
*   如果构建良好，则能够部署/运行
*   运行单元测试
*   在产品上运行测试
*   报告这些测试的结果
*   静态代码分析和报告……不胜枚举

不要害怕从批处理文件或 shell 脚本或其他临时方法开始。在 CI 热潮之前，人们制作了非常好的软件。在 Hudson 和 Cruise Control 之前有很多好的流程 ​​- （我不是在敲那些或其他 - 我使用 Hudson 等） - 但不要错过重点 - 这些东西是为了帮助你 - 不要成为霸道的过程）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-20T11:07:23.657

我无法向您提供有关我们如何设置构建服务器的所有详细信息（我只是在一开始就参与其中），但是：

1.  我们从内部系统开始，在 ASP.NET 和 .NET Windows 服务中实现，使用 NAnt 进行实际构建。实际上，大部分工作流程都是在 NAnt 中实现的（例如，给人们发电子邮件、复制东西等等）。
2.  我们搬到了 JetBrains TeamCity（有一个免费的精简版），它仍然为我们服务。

我们将它用于由提交触发的构建：这些只是构建二进制文件并运行单元测试。从这里，我们可以进行完整的构建，MSI 也是如此。从那里，我们有系统测试版本，可以在使用虚拟机（带有单独的域控制器、SQL Server 框等）构建的环境中运行更深入的测试。当系统测试通过时，我们的 QA 部门可以使用该构建进行手动测试和一些我们尚未自动化的回归测试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-20T11:13:14.953

在 java 空间中，我测试了*大多数*可用的构建环境。自动构建的问题是您通常最终会花费大量时间来跟踪它。在我们从 atlassian 切换到商业[竹子](http://www.atlassian.com/software/bamboo/)之后，我们发现我们必须花更少的时间来呵护构建盒，这在我们的案例中证明是非常经济的。Bamboo 还支持集群，因此您可以根据需要添加便宜的盒子。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-20T13:02:17.900

在构建方面尝试并找到适合您现有实践的东西 - 例如，如果您正在使用 Maven，那么尝试和使用基于 Ant 的构建服务器将不是一个很好的选择！

理想情况下，它应该能够监视您的源代码控制系统、检查代码、构建、运行一些测试并在您不知道的情况下发布结果，或者至少直到它报告失败为止。就个人而言，我建议将 Hudson ( [https://hudson.dev.java.net/](https://hudson.dev.java.net/) ) 作为一个很好的起点，因为它很容易安装和运行并且具有不错的 UI。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-11-01T22:01:47.360

我们首先编写将在开发人员机器上运行的批处理脚本。一旦我们使所有流程自动化，我们将它们移动到构建服务器。

在工具方面，我们目前正在从 Cruise Control 转移到 TFS。

# c# - HttpWebRequests 在后续调用中失败

> ID：460815
> 
> 赞同：5
> 
> 时间：2009-01-20T10:57:46.373
> 
> 标签：c#, api, .net-2.0, httpwebrequest, webrequest

我知道这是一个模糊的问题，特别是因为我没有提供任何代码，但我正在开发一个 .Net 2.0 应用程序，并且我们有一个 WebRequest 可以将数据发布到内部构建的 API。

奇怪的事情发生在我们的第三个（并且总是第三个）后续请求中，该请求在请求的 GetRequestStream() 方法中失败。第一次和第二次调用，一切都很好。第三次，它挂了一会儿，最终超时。

该 API 被内部的其他应用程序调用，因此我们知道它不是服务器端或网络问题。我们已经在几台机器上进行了尝试——所有这些机器都有同样的问题。以前有没有人遇到过这个问题，或者是否有人对如何调试有任何建议（因为响应对象没有产生任何东西，或者至少没有任何用处）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-20T11:00:29.863

如果您不处理 WebResponse，通常会发生这种情况。从客户端到同一台机器的连接数有一个限制，默认情况下是两个。如果关闭 WebResponse，则可以重用（或关闭）连接。using 语句是你的朋友：

```
WebRequest request = [...];
// Do stuff with the request stream here (and dispose it)
using (WebResponse response = request.GetResponse())
{
    // Stuff with the response
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T11:46:11.953

是的，你完全正确。没有正确处理响应。我们一直把它留给垃圾收集器，你猜对了，它没有被及时收集。不幸的是，我关闭了浏览器，忘记阅读任何答案（**哈哈，你觉得我有多愚蠢**），问题就解决了。

今晚我学到了两件事。1、妥善处理你的WebRequests；和 2，更加注意堆栈溢出的答案！

# language-agnostic - 如何检查域名是否存在？

> ID：460816
> 
> 赞同：7
> 
> 时间：2009-01-20T10:58:06.687
> 
> 标签：language-agnostic, dns, whois, domain-name

不仅是简单的 .com 或 .net，还有 .co.uk、.fr、.gov.rw ...？

我真的应该做一个巨大的映射“tld 到相关的 whois 服务器”，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2011-12-20T19:55:40.470

[http://php.net/manual/en/function.checkdnsrr.php](http://php.net/manual/en/function.checkdnsrr.php)

```
if (checkdnsrr('test.nl', 'A')) // or use ANY or for other see above link
{
    echo 'Domain exists';
}
else
{
    echo 'Domain does not exist';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-20T11:01:22.437

[http://whois.net/](http://whois.net/)有什么好处吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-20T11:11:01.603

PHP：

```
$URL = "http://www.dotnetindex.com/articles/5261-Article--AJAX-Tips-and-Tricks.asp";
$PARSED_URL = parse_url($URL);
$DOMAIN = $PARSED_URL['host'];
$ip = gethostbyname($DOMAIN);

if($ip===$DOMAIN)
{
    echo "Url does not exist";
}
else
{
    echo "Url exists";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-07-26T12:56:15.683

您想知道该域是否*已注册*，或者它是否实际存在于 DNS 中？

如果是前者，那么基于*whois*的方法是唯一可行的方法，即便如此，您在解析来自各种 TLD whois 服务器的高度变化的输出时也会遇到大量问题。

如果是后者，一个简单的 DNS 查找就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-20T11:07:00.083

您可能需要尝试不同的服务：

这似乎比标准 Whois 更有效： [http ://whois.domaintools.com/](http://whois.domaintools.com/)

适用于 .co.uk 和 .fr 以及标准的

# java - 更改 Axis Web 服务正在侦听的端口

> ID：460819
> 
> 赞同：1
> 
> 时间：2009-01-20T10:59:24.310
> 
> 标签：java, http, binding, axis, port

我有一个在端口：80 上运行的 Web 应用程序，并且我有一个 Axis Web 服务，它是该 Web 应用程序的一部分。因此，该服务也在端口 :80 上运行。

但是，出于安全原因，我们的客户要求我们将 Web 服务端口更改为 8080，以便他们只能允许 Web 服务的远程消费者访问该端口。因此，他们将无法访问常规 Web 应用程序，但可以访问该服务。

这是否可以在不重构应用程序并在单独的 Web 应用程序中取出 Web 服务的情况下实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-02T22:31:56.747

正如我在评论中所说，我们的 Web 应用程序托管在 Oracle AS 10g 上，前面有一个 Oracle Web 缓存服务器。Oracle Web Cache 基于 Apache httpd，因此它支持虚拟主机和 URL 重写（尽管在这些条款下不存在）。

我设法通过以下方式解决了这个问题：

*   配置 Web 缓存以监听 8080 端口（虚拟主机）
*   [将http://host:8080/service/](http://host:8080/service/) *形式的所有请求重写为[http://host/service/](http://host/service/) *，并删除所有其他 URL 模式。

它就像一个魅力。

至于 Axis 本身，我没有找到将其配置为自行侦听另一个端口的方法。我想期望 Axis 提供此功能是不合理的，因为它只是托管在 servlet 容器中的一个 servlet，而提供连接器/传输层是容器的工作。

无论如何...感谢所有提供帮助的人，我很感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T11:38:29.787

简短的回答可能是 - 是的，这是可能的。

Axis Web 服务大多与主应用程序足够分离，因此应该很容易让它们在不同的 Java Web 服务器实例上运行也在端口 8080 上，并且仅在该端口上提供 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-31T06:24:38.183

您应该能够使用端口 8080 连接器设置单独的服务。

实际上，您将在您的实例中运行 2 个“迷你”-Tomcat。

基本上，

```
<Service> <!-- normal service -->
  <Connector port="80" />
</Service>
<Service> <!-- custom service -->
  <Connector port="8080" />
  <Engine>
     <Host />
  </Engine>
</Service> 
```

如果它不能正常工作，感觉这个解决方案可能会带来一些调试噩梦，因此运行第二台服务器（可能是 Jetty）可能会更容易。

# html - 向自己发送 HTML 电子邮件以测试它们的快速、简单的方法是什么？

> ID：460829
> 
> 赞同：23
> 
> 时间：2009-01-20T11:01:49.207
> 
> 标签：html, email, testing, send

我的任务是为不同的电子邮件/网络邮件客户端优化 HTML 电子邮件。我曾经通过在 Outlook Express 中做一个技巧来测试 HTML 文件，让它发送原始 HTML，但微软现在似乎已经停止提供 Outlook Express（我认为“Live Mail”应该取代它）。

所以我的问题是，有没有一种简单、快速的方式来发送 HTML 电子邮件？也许甚至是一个可以完成这项工作的免费软件程序？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-13T21:32:01.747

[Puts Mail](http://www.putsmail.com)是当今最好的选择。查看Puts Mail 的创建者对[类似问题的回答。](https://stackoverflow.com/a/4742562/941516)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-20T11:13:17.170

我会使用 python，底部是一个示例，如何使用默认文本创建 HTML 电子邮件：http: [//docs.python.org/library/email-examples.html](http://docs.python.org/library/email-examples.html) 您可以对其进行参数化，封装在函数中，阅读来自文件等的内容（确保将“s = smtplib.SMTP('localhost')”中的 localhost 设置为 smtp 服务器）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-20T15:34:50.620

如果您只是想测试 HTML 电子邮件是否在各种客户端中正确显示，我会使用[sendmail.exe](http://glob.com.au/sendmail/)（仅限 Windows）。

您可以保存一个 .html 文件并将其作为电子邮件内容在命令行上通过管道传输到该程序中。从/到/主题/服务器等有命令行选项。

这将允许您通过编辑 .html 文件并再次运行命令行来快速发送和重新发送电子邮件。无需编程。

编辑：Linux 有一个类似的同名命令行工具。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-06T09:59:58.763

红宝石变体：

```
require "mail"

options = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => "smtp.gmail.com",
  :user_name            => "me@gmail.com",
  :password             => "password",
  :enable_starttls_auto => true,
  :authentication       => :plain,
}

Mail.defaults do
  delivery_method :smtp, options
end

mail = Mail.new do
  to      "me@gmail.com"
  from    "Me Me me@gmail.com"
  subject "test email"

  html_part do
    content_type "text/html; charset=UTF-8"
    body File.read("index.html")
  end
end

mail.deliver 
```

不要忘记从[https://www.google.com/settings/security/lesssecureapps启用访问权限](https://www.google.com/settings/security/lesssecureapps)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-20T12:35:10.327

如果您正在运行 .NET 并且您有一个 Gmail 帐户，这是一种简单的方法

```
using System.Net;
using System.Net.Mail;

var fromAddress = new MailAddress("from@gmail.com", "From Name");
var toAddress = new MailAddress("to@example.com", "To Name");
const string fromPassword = "fromPassword";
const string subject = "Subject";
const string body = "Body";

var smtp = new SmtpClient
           {
               Host = "smtp.gmail.com",
               Port = 587,
               EnableSsl = true,
               DeliveryMethod = SmtpDeliveryMethod.Network,
               UseDefaultCredentials = false,
               Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
           };
using (var message = new MailMessage(fromAddress, toAddress)
                     {
                         Subject = subject,
                         Body = body
                     })
{
    smtp.Send(message);
} 
```

有关详细信息，请参阅[通过 Gmail 在 .NET 中发送电子邮件](https://stackoverflow.com/questions/32260/sending-email-in-net-through-gmail?rq=1)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-09-13T14:12:48.220

我相信您可以从 Mozilla 的 Thunderbird 电子邮件客户端发送 html 电子邮件。

[http://www.mozillamessaging.com/en-US/thunderbird/](http://www.mozillamessaging.com/en-US/thunderbird/)

这是我用来发送测试电子邮件的内容。或者我猜你也可以使用你的电子邮件提供商。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-09-18T19:39:25.133

我什至**不会****使用任何语言**...

我会在[**MailChimp**](http://www.mailchimp.com/)停下来并建立一个[免费帐户](http://www.mailchimp.com/signup/)（每月最多 500 个订阅者和 3000 次发送）...... 3000 次发送就足以测试对吗？:)

它具有您专业发送电子邮件所需的所有工具（并且可能为您的客户/朋友设置一个帐户，以便他们/他可以在他们的时事通讯中使用 MailChimp）

当您使用它时，请查看他们的[资源](http://www.mailchimp.com/resources/)页面以及了解我们可以使用[CampaignMonitor](http://www.campaignmonitor.com/)自己[的电子邮件客户端 CSS 支持指南在时事通讯中使用什么的完美工具](http://www.campaignmonitor.com/css/)

希望能帮助到你

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-11-16T04:54:01.307

如果您使用的是 Mac，您可以使用 Safari 和 Mail 超级快速地发送 HTML 电子邮件。我在下面的链接中写了有关详细信息的博客，但基本上您只需在 Safari 中查看您的 HTML 文件，然后选择“文件”>“此页面的邮件内容”。

[http://www.ravelrumba.com/blog/send-html-email-with-safari-mail-for-fast-testing/](http://www.ravelrumba.com/blog/send-html-email-with-safari-mail-for-fast-testing/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-16T16:16:43.917

对话很晚，但这是发送 html 电子邮件的最快方法（尽管远非最佳实践）：

在网络浏览器（如网页）中查看*呈现的*`ctrl+a`html，然后选择整个页面，然后将呈现的 html 结果`ctrl+c`复制并`ctrl+v`粘贴到电子邮件正文中。没有比这更容易的了...

请注意，如果您希望收件人看到您的图像，则需要托管它们。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-20T12:08:47.370

[我使用PHPMailer](http://phpmailer.codeworxtech.com/)发送 HTML 电子邮件（通常是批量）。它对我很有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-20T15:37:24.267

你也可以使用[PowerShell](http://www.google.com/search?q=powershell+send+email)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-20T15:56:43.400

一个仅适用于 Windows 的免费解决方案，您通常不需要安装任何特殊的东西，那就是使用 ASP 或 WSH。我选择 JScript 而不是 VBScript：

```
function sendHtml(recipients, subject, html) {
    var mail = Server.CreateObject("CDO.Message");

    mail.From = "Tester <tester@example.com>";
    mail.Subject = subject;
    mail.To = recipients.join(";");
    mail.HTMLBody = html;

    // Do the following if you want to directly use a specific SMTP server
    mail.Configuration.Fields.Item(
        "http://schemas.microsoft.com/cdo/configuration/sendusing") = 2;
    mail.Configuration.Fields.Item(
        "http://schemas.microsoft.com/cdo/configuration/smtpserver")
        = "smtp.example.com";
    mail.Configuration.Fields.Item(
        "http://schemas.microsoft.com/cdo/configuration/smtpserverport")
        = 25;
    mail.Configuration.Fields.Update();

    mail.Send();
} 
```

**注意：**但是，您的 HTML 最终可能会使用这种方法稍微重新格式化。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-21T20:18:30.830

[测试邮件服务器工具](http://www.toolheap.com/test-mail-server-tool/)可以帮助您-如果您只需要接收和查看您的应用程序发送的任何电子邮件。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-12-07T12:13:17.433

```
function sendHtml(recipients, subject, html) {
var mail = Server.CreateObject("CDO.Message");

mail.From = "Tester <tester@example.com>";
mail.Subject = subject;
mail.To = recipients.join(";");
mail.HTMLBody = html;

// Do the following if you want to directly use a specific SMTP server
mail.Configuration.Fields.Item(
    "http://schemas.microsoft.com/cdo/configuration/sendusing") = 2;
mail.Configuration.Fields.Item(
    "http://schemas.microsoft.com/cdo/configuration/smtpserver")
    = "smtp.example.com";
mail.Configuration.Fields.Item(
    "http://schemas.microsoft.com/cdo/configuration/smtpserverport")
    = 25;
mail.Configuration.Fields.Update();

mail.Send();
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2009-01-20T11:10:21.433

也许您可以在 .NET 中使用 System.Net.Mail？

您可以从电子邮件模板中读取并添加到 MailMessage 正文。

发送电子邮件

```
 System.Net.Mail.MailMessage msg = CreateMailMessage();

            SmtpClient sc = new SmtpClient();
            sc.Host = ConfigurationManager.AppSettings["SMTPServer"];
            sc.Port = 0x19;
            sc.UseDefaultCredentials = true;

            sc.Send(msg); 
```

# c# - Linq To Sql 从函数返回为 IQueryable

> ID：460831
> 
> 赞同：5
> 
> 时间：2009-01-20T11:03:21.573
> 
> 标签：c#, linq-to-sql, generics, ienumerable, iqueryable

好的，我已经设法使以下工作

```
public IQueryable getTicketInformation(int ticketID)
{
    var ticketDetails = from tickets in _context.tickets
        join file in _context.file_objects on tickets.ticket_id equals file.source_id
        where tickets.ticket_id == ticketID
        select new { tickets.ticket_id, tickets.title, tickets.care_of_email, file.filename };

    return ticketDetails.AsQueryable();
} 
```

我继续创建了我自己的类（myObject），其中包含原语ticket_id、title、care_of_email 和filename。哪些是我在 linq 语句中返回的项目。

我将我的声明修改为

```
public IQueryable<myObject> getTicketInformation(int ticketID)
{
    var ticketDetails = from tickets in _context.tickets
        join file in _context.file_objects on tickets.ticket_id equals file.source_id
        where tickets.ticket_id == ticketID
        select new { tickets.ticket_id, tickets.title, tickets.care_of_email, file.filename };

    return ticketDetails.AsQueryable()<myObject>;
} 
```

认为这会使泛型的类型安全，但我收到错误“无法将方法组'AsQueryable'转换为非委托类型'System.Linq.IQueryable'。你打算调用该方法吗？”

我想要做的甚至可能吗？

myObject 类是否需要实现 IEnumerable 或 IQueryable？

还是最好从 linq 结果集中构造对象 MyObject ，然后从函数中返回对象 MyObject

```
public myObject getTicketInformation(int ticketID) 
{

    ....linq statement....
    myObject o = null;

    foreach (obj in linqstatemt)
    {
        o = new myObject();
        o.ticket_id = obj.ticket_id
        .......
    }
    return o;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-20T11:06:41.113

你的意思是：

```
select new MyObject { TicketId = tickets.ticket_id,
     Title = tickets.title, ...}; 
```

（请注意，我稍微调整了名称以更符合 C# 习惯）

这是一个“对象初始化器”，它创建一个新的`MyObject`（每条记录）并从源数据中分配属性。你所拥有的是一个“匿名类型”初始化程序，这不一样。请注意，如果您有一个非默认构造函数，您还可以使用类似的东西：

```
select new MyObject(tickets.ticket_id, tickets.title); 
```

它使用指定的构造函数，从源数据传入提供的值。

这将是`IQueryable<MyObject>`；你不需要打电话`.AsQueryable()`。请注意，您的函数返回类型化的形式 ( `IQueryable<MyObject>`) 比返回非类型化的形式更好`IQueryable`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-20T11:22:09.587

此行在语法上不正确：

```
return ticketDetails.AsQueryable()<myObject>; 
```

并且应该阅读

```
return ticketDetails.AsQueryable<myObject>(); 
```

此外，您正在使用创建匿名对象`select new {`，但您想创建`myObject`实例。正确的实现如下所示：

```
public IQueryable<myObject> getTicketInformation(int ticketID)
{

    return from tickets in _context.tickets
        join file in _context.file_objects on tickets.ticket_id equals file.source_id
        where tickets.ticket_id == ticketID
        select new myObject() { 
            ticket_id = tickets.ticket_id,
            title = tickets.title, 
            care_of_email = tickets.care_of_email, 
            filename = file.filename
        };

} 
```

该`new SomeClass() { Property = value, ...`语法创建一个`SomeClass`实例并将属性设置为给定值。或者，您可以在该类上实现一个构造函数，`myObject`并在 linq 语句中使用`select new myObject(...)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T11:14:23.783

正如 Marc 所说，您没有构建`myObject`查询运行时间的实例。但另外，您不需要将其强制转换为`IQueryable<T>`，LINQ 选择语句将返回一个`IQueryable<T>`除非显式强制转换为`IEnumerable<T>`.

此外，在您尝试访问返回的数据之前，请注意您的 DataContext 尚未被处理掉。但是我注意到您的上下文不是在方法中构造的，请注意不要将 DataContext 维护太久，它是一个工作单元对象，并不意味着长时间保持打开状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-03-18T20:11:05.033

绅士们，只要你只返回一张桌子，这一切都是有道理的，但是如果有两个或更多要返回呢？

```
RPDTDataContext smdt = new RPDTDataContext();
var projectedUsers = smdt.SM_Users.Join(
        smdt.SM_CTSGroups, u => u.CtsGroupID, c => c.id, 
        (u, c) => new { CTSGroup = c.Name, UserName = u.Name, u.EmpID, u.Email });
return projectedUsers; 
```

# java - 带有 JRE 1.5 (IE6) 的小程序无法通过 HTTPS 打开 HTML 页面，适用于 JRE1.6

> ID：460832
> 
> 赞同：2
> 
> 时间：2009-01-20T11:03:34.740
> 
> 标签：java, swing, applet, jeditorpane

我有一个小的 (500kb) 摆动小程序，它使用 JEditorPane 显示小的 HTML 页面。这适用于大多数浏览器和 JRE，但对于 JRE 1.5 (IE6)，它似乎只显示空白。Java 控制台上没有错误消息或异常。

Applet 能够很好地加载所有 JRE 的 TXT 文件，使用 JAVA CONSOLE tracking 5 选项它为文本文件和 html 文件显示相同的诊断消息：

网络：使用 proxy=DIRECT连接[https://xxx.net/xxx/data/my.txt](https://xxx.net/xxx/data/my.txt)

网络：使用 proxy=DIRECT连接[https://xxx.net/xxx/data/my2.htm](https://xxx.net/xxx/data/my2.htm)

任何想法如何进一步诊断出了什么问题，或者如何解决它？

我没有对托管小程序的客户端服务器的控制台访问权限，但我有一台带有 IE6+JRE 1.5 的测试机器，我可以使用它来访问他们的 HTTPS url 并重现问题。其他浏览器/JRE 1.6 不会出现此问题。

Applet 未签名，因为 HTML 页面和 applet 位于同一服务器的同一文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T19:07:51.940

您是否尝试过运行[Wireshark](http://www.wireshark.org/)之类的东西来查看请求是否真的发生了，或者您是否真的得到了响应？如果网络有些奇怪（也许 1.5 JRE 对请求做了一些奇怪的事情），那么这可能有助于您追踪它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-27T11:08:43.907

找到解决方案，JEditorPane 异步模式导致此问题，切换到同步模式解决了 JRE 1.5 的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-24T02:37:24.120

您不能将日志语句插入到小程序源代码中并重新部署吗？您应该能够在 java 控制台中看到日志输出。这应该有助于缩小问题的范围。

# macos - 如何在 os x 中设置应用程序使用的 $PATH

> ID：460835
> 
> 赞同：5
> 
> 时间：2009-01-20T11:05:52.020
> 
> 标签：macos, path, variables, environment

我正在使用 ant 构建我的项目，并使用“svnversion”可执行文件将版本 ID 插入到我的源代码中，以便于跟踪版本。

从命令行运行这个 ant 文件是可行的，我在 .profile 中设置了我的 $PATH 以包含 svnversion 的路径，它工作正常。

现在我尝试从 Eclipse 内部运行相同的 ant 文件，但它不起作用 - Eclipse 中的 PATH 以不同于 shell 的 PATH 的另一种方式设置，我怀疑这必须在某处的 plist 中设置，但我没有不知道在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-20T11:17:05.040

正确 - 它在 plist 文件中

```
~/.MacOSX/environment.plist 
```

该文件实际上包含您要设置的任何环境变量的键值对，用于整个登录会话。与 .profile/.cshrc 等不同，它可用于 GUI 程序。不幸的是，您不能在此处访问其他环境变量（例如，您不能使用 $HOME）或使用任何其他编程结构。

*更新*：请注意，OS X 10.8 Mountain Lion 不再支持此功能，唉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T11:15:16.540

在 developer.apple.com 上快速搜索发现[Setting environment variables for user processes](http://developer.apple.com/qa/qa2001/qa1067.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-13T00:21:10.353

在 Mac OS X El Capitan (10.11.5) 上，这适用于每个用户的 PATH 条目（以及其他环境变量）。

*   创建文件`$HOME/.profile`
*   在该文件中设置所有与 PATH 相关的变量
*   （如果使用 bash），拥有`.bash_profile`该文件的源代码，并且`.bashrc`. 这应该是您的全部内容`.bash_profile`：

    `# $HOME.bash_profile: source $HOME/.profile source $HOME/.bashrc`

据我所知，Mac OS 不会`.bash_profile`在登录时为`PATH`. 它似乎读了`$HOME/.profile`。

您仍然需要 a`$HOME/.bash_profile`来触发 bash 来读取`$HOME/.bashrc`，否则对于由`Terminal.app`.

# c# - C# 使用“as”覆盖 Equals 和用于正确性、灵活性和性能的专用方法

> ID：460846
> 
> 赞同：3
> 
> 时间：2009-01-20T11:10:07.643
> 
> 标签：c#, null, equals, code-duplication

我想知道在 C# 中实现**正确、灵活和快速的 Equals 的最佳方法，它几乎可以用于任何类和情况**。我认为性能需要一个专门的 Equals（将实际类的对象作为参数）。为了避免代码重复，一般的 Equals 应该调用专门的 Equals。空值检查应该只执行一次，即使在继承的类中也是如此。

我终于想出了这个设计：

```
 class MyClass
{
    public Int32 SomeValue1 = 1;
    public Int32 SomeValue2 = 25;

    // Ignoring GetHashCode for simplicity.

    public override bool Equals(object obj)
    {
        return Equals (obj as MyClass);
    }

    public bool Equals(MyClass obj)
    {
        if (obj == null) {
            return false;
        }

        if (!SomeValue1.Equals (obj.SomeValue1)) {
            return false;
        }

        if (!SomeValue2.Equals (obj.SomeValue2)) {
            return false;
        }

        return true;
    }
}

class MyDerivedClass : MyClass
{
    public Int32 YetAnotherValue = 2;

    public override bool Equals(object obj)
    {
        return Equals (obj as MyDerivedClass);
    }

    public bool Equals(MyDerivedClass obj)
    {
        if (!base.Equals (obj)) {
            return false;
        }

        if (!YetAnotherValue.Equals (obj.YetAnotherValue)) {
            return false;
        }

        return true;
    }
} 
```

重要的想法：

*   “as”运算符的用法。这样我们就不必检查一般 Equals 中的空值。错误的类类型会减少为 null，并将在专门的 Equals 中进行排序。
*   在某一点进行空值检查，即使对于派生类也是如此。
*   一个接一个地检查属性提供了一个清晰的结构。

这个概念有缺陷，还是我错过了任何条件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-20T11:13:29.947

当涉及不同类型时，您的 Equals 方法不是自反的：

```
MyDerivedClass mdc = new MyDerivedClass();
MyClass mc = new MyClass();
Object omdc = mdc;
Object omc = mc;

// mc.Equals(mdc) - true
// mdc.Equals(mc) - true by calling the right overload
// omc.Equals(omdc) - true
// omdc.Equals(omc) - false, the "as" in MyDerivedClass will result in null 
```

正常的方法是使用：

```
if (GetType() != other.GetType())
{
    return false;
} 
```

[请参阅Object.Equals](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)中的文档：“x.Equals(y) 返回与 y.Equals(x) 相同的值。” 依靠重载来给出不同的结果可能会导致*可怕*的问题，这些问题对于调试来说非常微妙。

# c++ - 在 C++ 中的多态方法上使用 std::for_each

> ID：460847
> 
> 赞同：3
> 
> 时间：2009-01-20T11:10:12.713
> 
> 标签：c++, stl, vector, polymorphism, foreach

使用 std::for_each 时，

```
class A;
vector<A*> VectorOfAPointers;

std::for_each(VectorOfAPointers.begin(), VectorOfAPointers.end(), std::mem_fun(&A::foo)); 
```

如果我们有从 A 继承并实现 foo() 的类，并且我们持有指向 A 的指针向量，有没有办法在 foo() 上调用多态调用，而不是显式调用 A::foo()？注意：我不能使用 boost，只能使用标准 STL。

谢谢，盖尔

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-20T11:27:28.497

它实际上是这样工作的。

```
#include <algorithm>
#include <iostream>
#include <functional>
#include <vector>

struct A {
    virtual void foo() {
        std::cout << "A::foo()" << std::endl;
    }
};
struct B: public A {
    virtual void foo() {
        std::cout << "B::foo()" << std::endl;
    }
};

int main()
{
    std::vector<A*> VectorOfAPointers;
    VectorOfAPointers.push_back(new B());
    std::for_each(VectorOfAPointers.begin(), VectorOfAPointers.end(), std::mem_fun(&A::foo));
    return 0;
} 
```

印刷

```
B::foo() 
```

所以它正是你想要的。检查`virtual`关键字是否存在，很容易忘记它们。

# java - 构建 Java 网站时如何将标记与应用程序代码分开？

> ID：460850
> 
> 赞同：0
> 
> 时间：2009-01-20T11:11:06.363
> 
> 标签：java, netbeans

我是一名 .NET Web 开发人员，刚刚被要求使用 NetBeans IDE 5.5 制作一个小型演示网站。到目前为止，我还没有使用 Java 的经验。

我已经学习了几个快速教程，一个只使用 JSP 文件，另一个使用 servlet。在这个早期阶段，我担心的是让我的应用程序代码远离我的标记看起来很困难。

使用 JSP 文件看起来与过去的经典 ASP 非常相似。另一方面，servlet 看起来很有用，但似乎涉及到输出流的大量写出标记，我对此也不满意。

是否有与 ASP .NET 代码隐藏模型等效的模型，或任何其他分离标记和代码的策略？是否可以在 JSP 中保留标记，然后使用 JSP 中的 servlet？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T11:32:01.047

您无法使用纯 Java EE 技术在 ASP.NET 代码后面做类似的事情。您需要使用像 Spring MVC 或 Struts 这样的 MVC 框架。这个想法是您创建控制器（Java 类）和 JSP 页面，并配置一个操作以将 JSP 页面与控制器联系起来。

它不像 ASP.NET 那样简单，因为它需要配置和外部框架。

Netbeans 嵌入了 JSF 框架。看看这个[教程](http://www.netbeans.org/kb/articles/jAstrologer-intro.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T11:57:53.257

Java 的问题在于，它并没有像 .NET 那样真正与东西“捆绑”在一起……您通常会去寻找商品。

这使得开始使用 Java 中的 Web 应用程序令人望而生畏，因为有很多选择。其中许多是基于 JSP 构建的，这是一个优点。

如果您打算使用 vanilla JSP，那么您将不会玩得开心。否则，我会建议 Wicket、Stripes 或 Spring MVC。

Stripes 可能是这三个中最简单的一个（Spring 有点复杂，而 Wicket 在概念上与其他两个不同）。话虽如此，Spring MVC 可能是这三个中用得最多的..

所有 Stripes 确实是 JSP 和 ActionBeans。动作 bean 是包含动作的 Java 类，动作是执行您的动作的方法。这些 ActionBean 类还包含当前页面的数据。

[这个页面](http://www.stripesframework.org/)有更多关于条纹的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T11:13:53.207

[Wicket](http://wicket.apache.org/)具有“适当的标记/逻辑分离”（正如他们所说）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-20T11:15:18.913

您可能想看看[JSP 中的自定义标记库](http://java.sun.com/products/jsp/taglibraries/index.jsp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-20T11:37:39.617

对于一个简单的网站，我会使用 Struts 和 Tiles，并利用它们提供的标记库来使 JSP 看起来整洁和标记，并将代码分成控制器中的动作 - 动作只是一个代码块Struts servlet 在完成其工作后调用。

掌握 Struts 2 和 Tiles 的基础知识并不需要很长时间，您可以在一天内轻松掌握。

是的，Servlet 是编写此类系统的一个相当简单的级别，并且很容易在其中使用 HTML 生成器，正如您所说，这显然是不正确的。我认为您需要在请求和会话对象上设置更多值，然后在 JSP 中对其进行格式化。

这里的优势是您可以选择您的 MVC 框架以匹配您的应用程序的规模，但如果您需要它们以执行特定操作（例如，我过去做的一件事是生成和提供 Excel 文件），仍然可以访问原始 servlet来自数据库中的值）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-20T22:38:50.297

如果您想快速发布某些内容（我注意到您正在制作一个演示），我可能会放弃 Java Web 框架，而只需使用 servlet 解决方案，并结合一个简单的模板解决方案。

Velocity或[Freemarker](http://freemarker.sourceforge.net/)将提供将您的标记与代码分离的便利[。](http://velocity.apache.org/)Velocity 比 Freemarker 简单。Freemarker 比 Velocity 更强大。

我并不反对提到的各种框架。只是如果您的时间尺度很短并且您很乐意为这个需求编写 servlet 接口，那么上面可能会提供最快/最脏的解决方案:-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-20T13:32:51.520

您可以使用[它](http://jspx-bay.sourceforge.net/)并执行与在 .NET 中所做的相同的操作！这是一个非常好的MVC框架。

# delphi - Delphi 和指针数学（文档中可能存在的错误）

> ID：460857
> 
> 赞同：-2
> 
> 时间：2009-01-20T11:13:25.033
> 
> 标签：delphi, directive

我正在浏览 Delphi 2009 语言指南。并发现了一些奇怪的东西。在指令列表（不是编译器指令）中，我找到**了 pointermath**。

```
RAD-Studio
  Reference
    Delphi Reference
      Delphi Language Guide
        Fundamental Syntactic Elements
          Fundamental Syntactic Elements
            [Directives] 
```

我知道这是一个编译器指令 {$POINTERMATH ON|OFF} 但我不知道如何使用这个人。帮助中没有其他信息，所以我尝试了一些但没有成功。

```
procedure Name; pointermath; // gave an error 
```

所以有几种可能：

*   它尚未实施。
*   这是帮助中的一个错误。
*   我还没有找到合适的地方使用它。

我认为这是一个错误，（有更多的*seled*必须*密封*）。

有人知道这个指令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T12:03:58.173

Pointermath 可以让你做这样的事情：

```
{$POINTERMATH ON}
procedure Test;
var
  temp: PWord;
begin
  temp := anAddress;
  temp := temp + 16;
  // temp now points to anAddress+$20 (2*16)
end; 
```

如果没有指针数学，你会得到：[DCC Error] unit.pas(135): E2015 Operator not applicable to this operand type

从本质上讲，这意味着您不再需要将指针类型转换为 Integer 以将它们增加一个数值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-20T21:39:24.940

除非[Barry Kelly](https://stackoverflow.com/users/3712/barry-kelly)证明我们错了（他是这方面的权威），否则我会投票支持文档错误：它是用于“**编译器**指令”一章的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-23T08:08:01.347

Codegear 已确认这是一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T11:51:16.703

我认为这意味着它允许你像指针数学一样做 C。直到 Delphi 2009，您只能对类型指针进行有限的指针数学运算。

# asp.net - 使用 ODBC 连接而不是 SQL 将 ASP.NET 网站转换为 SharePoint 网站

> ID：460865
> 
> 赞同：0
> 
> 时间：2009-01-20T11:15:37.930
> 
> 标签：asp.net, sharepoint, sharepoint-2007, web-config

我关注了这篇文章[http://www.codeproject.com/KB/sharepoint/ASPNET_to_Sharepoint.aspx](http://www.codeproject.com/KB/sharepoint/ASPNET_to_Sharepoint.aspx)，它使用 SQL 数据源将我的 ASP.net 站点转换为 SharePoint。

有谁知道我必须在我的 SharePoint 网站的 Web.config 中做什么才能使我的 ODBC 连接保存？

我的 ODBC 连接 = SafeControl Assembly="SamrasWebOption4" Namespace="SamrasWebOption4" TypeName="*"

问候艾蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-10T06:58:38.610

发现了问题。我在我的 SharePoint 站点的 Web.config 中将信任级别设置为 FULL 并且它起作用了！

信任级别=“满”

# c++ - for_each 在 COM IEnumXxx 接口上？

> ID：460869
> 
> 赞同：1
> 
> 时间：2009-01-20T11:17:03.090
> 
> 标签：c++, com, stl, enumerator

我有一个返回 IEnumUnknown 的 COM 对象。有什么东西可以把它变成一个 STL 风格的迭代器吗？这样我就可以做这样的事情：

```
IEnumUnkPtr pEnumUnk;
// ...something that fills in pEnumUnk...
MagicThing m(pEnumUnk);
std::for_each(m.begin(), m.end(), DoSomethingWithUnk); 
```

...或类似的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T11:23:17.523

好像 comstl 项目有你需要的东西：http: [//www.stlsoft.org/doc-1.9/classcomstl_1_1enumerator__sequence.html](http://www.stlsoft.org/doc-1.9/classcomstl_1_1enumerator__sequence.html)

# eclipse - Eclipse：如何确保插件中的 jar 优先于其他版本？

> ID：460872
> 
> 赞同：3
> 
> 时间：2009-01-20T11:17:16.663
> 
> 标签：eclipse, plugins, classpath, eclipse-3.4

我正在开发一个包含特定版本的 Lucene 的 Eclipse 插件。我需要生成一个搜索索引并部署它，以便另一个使用相同版本的 Lucene 的应用程序可以读取它。

我最近将 eclipse 升级到 3.4，现在第二个应用程序无法读取搜索索引。我看到 eclipse 3.4 包含更新版本的 Lucene，我假设在生成索引时使用了这个版本。

如何确定在生成索引时使用的是哪个版本的 Lucene？我的插件类路径从我的 Lucene 捆绑版本开始，所以我希望我的版本应该优先。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T12:01:51.563

您可能想试试[ClassPath Checker](http://classpathchecker.free.fr/)和[ClassPath Helper 。](http://classpathhelper.sourceforge.net/)

您可以通过这种方式准确确定您的开发环境中使用了哪些 jar，以便将这些 jar 与部署环境中存在的 jar 进行比较，其中 Luce 生成索引。

ClasPath Checker jar 冲突：
![类路径检查器](https://i.stack.imgur.com/vwqKO.png)

Classpath Helper Blocked (Obscured) Classes 视图：
![类路径助手](https://i.stack.imgur.com/cbEQc.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-22T12:59:44.660

似乎现在可以工作了。对于那些有兴趣的人，这是我必须做的：

*   从我的插件中删除了 Lucene 1.4.3 jar
*   将旧版 Eclipse 中的旧 Lucene 插件复制到 3.4 版中。
*   删除了 plugin.xml 向导中的所有依赖项。现在所有的 Lucene 插件都是可见的。
*   选择版本 1.4.xx 并更改属性以将最大版本设置为 1.5
*   添加了其他插件依赖项
*   更改构建路径：删除旧 jar，添加插件依赖 Lucene 1.4.3
*   重新计算的运行配置。Lucene 1.4.3 插件不是自动添加的，所以是手动添加的。
*   现在生成索引时，会加载 1.4.3 版本。

希望这对某人有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-27T11:50:33.417

由于您正在开发一个 Eclipse 插件，您应该研究一下 OSGi。Eclipse 插件是 OSGi 包的实例，OSGi 有一个强大的模型来处理包之间的依赖关系和版本控制。

我不知道你的具体代码，但如果打算在我的插件中使用 Lucene，我会使用 OSGi 的“Import-Package”或“Require-Bundle”功能来表达依赖关系；我不会在我的插件中包含 Lucene JAR。如果每个插件都包含自己的 Lucene JAR，那么您会浪费空间，但更重要的是，最终会得到不兼容的版本（就像您拥有的那样）。

[OSGI 的网站](http://www.osgi.org)不是开始您的 OSGi 之旅的最佳地点（它对 OSGi 规范和 Peter Kriens 的博客很有帮助）。[最好从 Neil Bartlett 的在线书籍](http://neilbartlett.name/blog/osgi-articles/)之类的东西开始。

# sql-server - SQL Server 将字段值与其默认值进行比较

> ID：460873
> 
> 赞同：0
> 
> 时间：2009-01-20T11:17:36.007
> 
> 标签：sql-server, triggers, default

我需要遍历表上的字段并在其值不等于其默认值时执行某些操作。

我在触发器中，所以我知道表名。然后我使用这个循环遍历每个字段：

```
select @field = 0, @maxfield = max(ORDINAL_POSITION) from
INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = @TableName

while @field < @maxfield
begin
... 
```

然后我可以通过循环在每次迭代中获取字段名称：

```
select @fieldname = COLUMN_NAME from INFORMATION_SCHEMA.COLUMNS
where TABLE_NAME = @TableName
and ORDINAL_POSITION = @field 
```

我可以获得该列的默认值：

```
select @ColDefault = SUBSTRING(Column_Default,2,LEN(Column_Default)-2)
FROM INFORMATION_SCHEMA.COLUMNS
WHERE Table_Name = @TableName
AND Column_name = @fieldname 
```

我有我需要的一切，但我看不到如何比较 2。因为我没有将字段名称作为常量，只有在变量中，我看不到如何从 ' 中获取值插入的表（记住我在触发器中），以查看它是否与默认值相同（现在作为 varchar 保存在 @ColDefault 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T11:50:37.593

首先，请记住，触发器可以在多个记录同时进入的情况下触发。如果我这样做：

```
INSERT INTO dbo.MyTableWithTrigger
  SELECT * FROM dbo.MyOtherTable 
```

那么我在 MyTableWithTrigger 上的触发器将需要处理多个记录。“插入”的伪表中将包含不止一条记录。

话虽如此，要比较数据，您可以运行如下 select 语句：

```
DECLARE @sqlToExec VARCHAR(8000)
SET @sqlToExec = 'SELECT * FROM INSERTED WHERE [' + @fieldname + '] <> ' + @ColDefault
EXEC(sqlToExec) 
```

这将返回插入的伪表中与默认值不匹配的所有行。听起来您想对这些行做一些事情，所以您可能想要做的是在调用 @sqlToExec 字符串之前创建一个临时表，而不是仅仅选择数据，而是将其插入到临时表中。然后，您可以使用这些行来执行您需要的任何异常处理。

一个问题 - 此 T-SQL 仅适用于数字字段。您可能希望为不同类型的字段构建单独的处理。您可能有 varchars、numeric、blob 等，并且您需要不同的方法来比较它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-01-17T15:32:45.517

我怀疑你可以使用 and exec 来做到这一点。

但是为什么不只生成一次代码。性能会更好

# asp.net-mvc - Ajax 动作链接

> ID：460879
> 
> 赞同：0
> 
> 时间：2009-01-20T11:20:42.613
> 
> 标签：asp.net-mvc, ajax, model-view-controller

我在 MVC ASP.NET 中有用户控件，其中列出了特定图像的评论。我已经为每条评论提供了删除链接。现在我想使用 Ajax 链接删除该评论。请告诉我如何使用 Ajax？

这是我的用户控件，我正在删除链接上调用控制器操作：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ListComment.ascx.cs" Inherits="gConnect.Views.Shared.ListComment" %>
<li>
            <div class="question-info">
                <div class="votes count"></span><span><% Response.Write("<img src=../../images/" + ViewData.Model.Logo_url.ToString() + " width=75 height=100 >");%> </div>

                <div class="views "><span><%= ViewData.Model.Username.Substring(ViewData.Model.Username.IndexOf("-")+1)     %></span></div>
                <div class ="deletem" ><span><%= Ajax.ActionLink("Delete", "DeleteComment/" + ViewData.Model.Username.Substring(0, 2) + "." + ViewData.Model.Id, new AjaxOptions(UpdateTargetId = "comments"))%></span></div>
                <div class="question">
                    <h3 class="title"><%= Html.Encode(ViewData.Model.Comment  )%></h3>
                </div>
            </div>
        </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T21:22:39.920

使用 jQuery：

```
<script type="text/javascript">
    function deleteComment(id) {
        $.post(
            "/MyController/DeleteAction",
            { id : id }
            function (data) {
                // do some gui updates
            });
     }
</script> 
```

并在链接中使用：

```
<a onclick="deleteComment(<%= CommentId %>); return false;" href="#">Delete</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T12:55:46.057

使用更新面板。它将从您的删除链接中捕获帖子并异步重新加载内容。

以[http://www.asp.net/ajax/documentation/live/Tutorials/CreatingPageUpdatePanel.aspx](http://www.asp.net/ajax/documentation/live/Tutorials/CreatingPageUpdatePanel.aspx)为例。

希望有帮助。

加文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T15:52:03.393

首先，确保您的删除链接发布表单。您的问题对此并不清楚，但是由于您说您正在使用删除链接，我猜您正在使用 GET 执行此操作。修改资源的操作应该通过 POST 而不是 GET 来完成。

完成后，您可以使用[jQuery AJAX 表单](http://malsup.com/jquery/form/)插件通过 AJAX 进行发布。这很简单，一旦您有一个工作表单来执行删除，您会发现将其转换为使用 AJAX 插件来提交表单非常简单。只需按照[网站上的示例进行操作即可](http://malsup.com/jquery/form/#code-samples)。

# .net - LINQ to SQL 和存储库模式

> ID：460882
> 
> 赞同：44
> 
> 时间：2009-01-20T11:22:03.843
> 
> 标签：.net, asp.net-mvc, linq-to-sql, repository-pattern

我觉得我在绕圈子跑。[对于使用LINQ to SQL](http://en.wikipedia.org/wiki/Language_Integrated_Query#LINQ_to_SQL)的正确存储库模式，我似乎无法下定决心。如果您熟悉[Rob Conery 的](http://blog.wekeroad.com/) [MVC Storefront](http://www.codeplex.com/mvcsamples/Release/ProjectReleases.aspx?ReleaseId=18861)，您会看到他的实现用另一个类包装了 LINQ 生成的模型，并将 LINQ 生成的模型简单地视为[数据传输对象](http://en.wikipedia.org/wiki/Data_transfer_object)(DTO)。它看起来像这样：

```
//Custom wrapper class.
namespace Data
{
    public class Customer
    {
         public int Id {get;set;}
         public string Name {get;set;}
         public IList<Address> Addresses {get;set;}
    }
}

//Linq-Generated Class - severly abbreviated
namespace SqlRepository
{
    public class Customer
    {
         public int Id {get;set;}
         public string Name {get;set;}
         public EntitySet<Address> {get;set;}
    }
}

//Customer Repository
namespace SqlRepository
{
    public class UserRepository : IUserRepository
    {
        private _db = new DB(); //This is the Linq-To-Sql datacontext

        public IQueryable GetCusomters()
        {
            return
                from c in _db.Customers
                select new Customer // This is the wrapper class not the gen'd one
                {
                   Id = c.Id,
                   Name = c.Name,
                   Addresses = new LazyList(c.Addresses)
                };
        } 
```

这样做的好处是什么（使用包装类），而不是 Mike Hadlow在他的 IRepository<T> 版本中*[使用带有 LINQ to SQL 的 IRepository 模式](http://mikehadlow.blogspot.com/2008/03/using-irepository-pattern-with-linq-to.html)*建议的方式，他只是从存储库？

应该在哪里执行和检查业务逻辑？这是在保存/更新时由存储库调用的单独层中，还是内置到包装器类中？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-01-20T22:35:47.447

事情是这样的，LINQ to SQL 不是一个真正的[对象关系映射器](http://en.wikipedia.org/wiki/Object-relational_mapping)(ORM)，它是一个数据访问层生成器。[您可以通过手动编辑 XML 文件并使用SqlMetal](http://msdn.microsoft.com/en-us/library/bb386987.aspx)和诸如此类的东西进行深入研究，使其成为 ORM ，但它的亮点在于[DAL](http://en.wikipedia.org/wiki/Data_access_layer)。

ORM 背后的想法是这样的。您拥有 SQL 数据库和域对象。要正确设计数据库，您将执行逻辑上无法转换为正确设计的对象模型的事情（如规范化），反之亦然。这被称为“阻抗失配”，ORM 的作用是以干净、有效和高效的方式处理这种失配。不那么痛苦的数据库交互几乎是次要的事情。

存储库背后的想法是，它封装了应用程序其余部分对基础设施的所有持久性逻辑和依赖项。当您的应用程序需要 Customer 对象时，它不必知道它是来自 SQL Server、MySQL、XML 文件还是 ASP.NET Membership。一旦完成了这种解耦，您对持久性故事所做的任何更改都不会影响应用程序的其余部分。

考虑到这一点，他为什么要做他所做的事情就变得更加清楚了。LINQ to SQL 用于生成 DAL，但关于 DAL 唯一应该知道的是存储库，因此对他的域对象进行了翻译。这样他就可以重构他的领域模型而不用担心他的持久性故事，他可以重构他的数据库而不用担心他的应用程序的涟漪效应。他还可以在决定使用什么 ORM 甚至在哪里存储他的数据等问题之前开始编写业务逻辑编码。

如果他要使用真正的 ORM（如[NHibernate](http://en.wikipedia.org/wiki/NHibernate)），则映射代码将在其他地方处理（在 XML 或引导类中）。我认为 LINQ to SQL（和 Rob 开源 DAL、[SubSonic](http://en.wikipedia.org/wiki/Subsonic_%28software%29)）是很棒的项目，但更多的是为较小的两层应用程序设计的，其中存储库模式之类的东西是多余的。店面也很好地说明了 NHibernate 的额外复杂性为何如此重要。他本可以通过使用专为处理这种情况而构建的东西来为自己节省大量代码，而不是手动完成。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-01-20T11:27:08.780

这取决于[DTO](http://en.wikipedia.org/wiki/Data_transfer_object)的定义位置以及您希望如何测试它。如果使用 DBML，则 LINQ to SQL 想要在数据层生成数据对象。虽然 LINQ to SQL **支持**持久性无知，但它并没有竭尽全力让它变得简单。[实体框架](http://en.wikipedia.org/wiki/ADO.NET_Entity_Framework)根本不支持它。

这意味着在标准模型中，您的数据层定义了所有域实体，如果您想在与数据层真正隔离的情况下测试用户界面/业务层，这将是很棘手的。

一种实用的方法可能是在单元测试中使用来自数据层的数据对象定义，而不是数据上下文（即，将数据上下文隐藏在存储库接口后面，但公开实体类型）——但这会使水变得混乱一点点，意味着你的 UI 等需要强引用数据层。但是，如果您将其视为“恰好也包含我们可能使用或可能不使用的存储库实现”的域模型层，您可能会证明它是合理的。

保持完全独立的域实体使单元测试和[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)(IoC) 更加“纯粹”，但会增加您拥有的代码量（因此是双刃剑）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T22:22:14.870

生成的对象是否可序列化？我的印象不是他们。正如上面 Marc Gravel 所说，这只是一个孤立的例子。

如果您切换存储库并拥有 MySQL、Oracle、XML 文件、Web 服务或任何数据提供程序（存储库）会怎样？您将被绑定到 LINQ to SQL 程序集以引用实体，对吗？这当然是你不想要的。

# linux - 从裸 git 存储库中的钩子导出文件

> ID：460892
> 
> 赞同：7
> 
> 时间：2009-01-20T11:23:51.173
> 
> 标签：linux, git

所以，我的情况如下：我想使用 emacs-muse 模式维护我的网站。为了转移网站（和版本控制），我想使用 git。所以我会在远程（裸）存储库中创建一个挂钩，它会自动将 HTML 子目录复制到 web 目录。我怎么能从钩子上做到这一点？另请注意，整个目录包含**很多**文件，因此我无法导出整个目录。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-20T13:20:38.347

您可以使用 git archive，因为它需要一个路径命令。因此，在您的更新后挂钩中，您可以执行类似的操作

```
git archive $SHA HTML | (cd dir/where/html/should/go && tar x) 
```

这首先创建子目录的 tarball，并将该 tarball 传送到 tar 命令以在指定目录中解压缩它

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-20T12:11:13.603

（只是一个建议，因为它可能不适用于您的确切配置）

您可能会考虑采用这个[Web-Focused Git Workflow](http://joemaller.com/2008/11/25/a-web-focused-git-workflow/)，它不会复制，而是将您的 repo 直接推送到 web 目录上。

![http://joemaller.com/wordpress/wp-content/uploads/2008/11/hub-prime2.jpg](https://i.stack.imgur.com/mVW8K.jpg)
（来自[乔·马勒](http://joemaller.com/)）

* * *

不太复杂： [使用 Git 维护您的网站](http://dmiessler.com/blog/using-git-to-maintain-your-website)( [Daniel MIESSSLER](http://danielmiessler.com/about/) )：

![http://dmiessler.com/wp-content/uploaded_content/2008/12/git-tree.gif](https://i.stack.imgur.com/kobqN.png)

[Daniel MIESSSLER](http://danielmiessler.com/about/)有一个相同过程的[更新版本](http://danielmiessler.com/study/git/#website)：

## ![http://danielmiessler.com/wp-content/uploads/2011/07/git_website_1.png](https://i.stack.imgur.com/g17cs.png)

[此SO question](https://stackoverflow.com/questions/279169/deploy-php-using-git)中提供了其他建议，例如[Git FAQ](https://git.wiki.kernel.org/index.php/GitFaq#Unexpected_behavior)中提到[的更新后脚本](https://web.archive.org/web/20120427211558/http://utsl.gen.nz/git/post-update)。

# vb.net - 在 assert 语句中尝试 catch

> ID：460893
> 
> 赞同：0
> 
> 时间：2009-01-20T11:24:12.483
> 
> 标签：vb.net, nunit, watin

我正在使用 NUnit、WatiN 和 VB.net 进行回归测试。我正在做的是打开一个 IE 页面，选择一些数据，进行注册，然后在查看注册页面上通过断言测试注册。

我想问一下，在每个断言上使用 try 和 catch 是否是一种好方法。我正在使用它，因为如果某些断言失败，它将停止执行其余的语句并退出而不运行其余的测试。现在我已经尝试并捕获每个断言并将失败消息写入日志文件。请让我们可以采用这种方法还是建议更好的方法。

你好雷

例如，如果我正在检查一些航空公司的预订。创建预订后，在查看预订摘要页面我正在测试天气是否显示取消预订按钮。为此，我使用以下代码尝试 Assert.IsTrue(_internetExplorer.Button(Find.ById(New Regex("CBooking"))).Exists) Catch ex As Exception d_logger.LogResultTextFile("Cancel Button does not Exist", True,错误）结束尝试我通过在循环中运行此命令来检查是否未创建任何预订。我想继续运行测试，即使在一个预订中它不会找到按钮但继续检查其他预订。这就是我使用它的原因。我想要的是这样做或不这样做的好方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T11:34:45.957

应该是这样。如果一个 Assert 在您的测试中失败，则也不应该发生其他断言。最好的方法是运行测试，修复失败的断言并再次运行。

# java - 什么是最高效的基于 Java 的流式 XSLT 处理器？

> ID：460895
> 
> 赞同：28
> 
> 时间：2009-01-20T11:26:45.817
> 
> 标签：java, xslt, processor

我有一个非常大的 XML 文件，我需要将它转换成另一个 XML 文件，我想用 XSLT 来做这件事。我对内存优化更感兴趣，而不是速度优化（不过，速度也会很好！）。

对于这项任务，您会推荐哪种基于 Java 的 XSLT 处理器？

您会推荐任何其他方式（非 XSLT？、非 Java？），如果是，为什么？

问题中的 XML 文件非常大，但不是很深 - 有数百万行（元素），但只有大约 3 级深。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-01-20T15:03:46.563

**目前已知只有三个[XSLT 2.0](http://www.w3.org/TR/xslt20/)处理器**，其中[**Saxon 9.x**](http://www.saxonica.com)在速度和内存利用率方面可能是最有效的（至少根据我的经验）。**[Saxon-SA](http://www.saxonica.com)**（Saxon 的模式感知版本，不像 B（基本）版本那样免费）具有流处理的特殊扩展。

**从现有的各种** **[XSLT 1.0](http://www.w3.org/TR/xslt)**处理器来看，.NET **[XslCompiledTransform](http://msdn.microsoft.com/en-us/library/system.xml.xsl.xslcompiledtransform.aspx)**（基于 C#，而不是 Java！）似乎是冠军。

**在 XSLT 1.0 处理器的基于 Java 的世界中，** **[Saxon 6.x](http://www.saxonica.com)**再次相当不错。

**更新**：

现在，从最初回答这个问题之日起 3 年多，没有任何证据表明提到的 XSLT 处理器之间的效率差异已经改变。

**至于流媒体**：

1.  **即使没有任何流式处理，也可以很好地处理具有“数百万个节点”的 XML 文档**。我进行了一个实验，其中 Saxom 9.1.07 处理了一个 XML 文档，该文档包含大约一百万个具有整数值的 3 级元素。转换只是计算它们的总和。在我的电脑上转换的总时间不到 1.5 秒。使用的内存是 500MB——这是 10 年前个人电脑可能拥有的内存，

以下是 Saxon 的信息性消息，其中显示了有关转换的详细信息：

> ```
> Saxon 9.1.0.7J from Saxonica
> Java version 1.6.0_17
> Stylesheet compilation time: 190 milliseconds
> Processing file:/C:\temp\delete\MRowst.xml
> Building tree for file:/C:\temp\delete\MRowst.xml using class net.sf.saxon.tinytree.TinyBuilder
> Tree built in 1053 milliseconds
> Tree size: 3075004 nodes, 1800000 characters, 0 attributes
> Loading net.sf.saxon.event.MessageEmitter
> Execution time: 1448 milliseconds
> Memory used: 506661648
> NamePool contents: 14 entries in 14 chains. 6 prefixes, 6 URIs 
> ```

2.  **Saxon 9.4 有**一个**[saxon:stream() 扩展函数](http://www.saxonica.com/documentation/#!functions/saxon/stream)**，可用于处理巨大的 XML 文档。

**这是文档的摘录**：

> 在 Saxon 中进行流式传输基本上有两种方式：
> 
> 突发模式流式传输：使用这种方法，大文件的转换被分解为文件小片段的一系列转换。每个片段依次从输入中读取，在内存中变成一棵小树，转换并写入输出文件。
> 
> 这种方法适用于结构相当平坦的文件，例如保存数百万条日志记录的日志文件，其中每个日志记录的处理独立于之前的日志记录。
> 
> 该技术的一个变体使用新的 XSLT 3.0 xsl:iterate 指令来迭代记录，而不是 xsl:for-each。这允许在处理记录时维护工作数据：例如，这使得在运行结束时输出总计或平均值成为可能，或者使一条记录的处理取决于文件中之前的内容. xsl:iterate 指令还允许提前退出循环，这使得转换可以从大文件的开头处理数据，而无需实际读取整个文件。
> 
> 突发模式流在 XSLT 和 XQuery 中都可用，但在 XQuery 中没有与 xsl:iterate 构造等效的东西。
> 
> 流式模板：这种方法遵循传统的 XSLT 处理模式，即通过将模板规则与每一层的节点匹配来执行输入 XML 层次结构的递归下降，但一次只执行一个元素，而无需在内存中构建树。
> 
> 每个模板都属于一种模式（可能是默认的、未命名的模式），并且流是可以使用新的 xsl:mode 声明指定的模式的属性。如果该模式被声明为可流式传输，则该模式内的每个模板规则都必须遵守可流式处理的规则。
> 
> 流处理中允许的规则非常复杂，但基本原则是给定节点的模板规则只能按顺序读取该节点的后代一次。在当前的 Saxon 实现中，还有一些限制强加的规则：例如，虽然分组 using 在理论上与流式实现是一致的，但目前在 Saxon 中没有实现。

3.  **[XSLT 3.0](http://www.w3.org/TR/xslt-21/)将具有标准[流功能](http://www.w3.org/TR/xslt-21/#streaming)**。然而，W3C 文档仍处于“工作草案”状态，流式规范在后续草案版本中可能会发生变化。因此，不存在当前草案（流式传输）规范的实现。

4.  **警告**：并非所有转换都可以在流模式下执行——无论 XSLT 处理器如何。对于大型文档，无法在流模式（RAM 数量有限）中执行的转换的一个示例是对它们的元素进行排序（例如通过公共属性）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-20T11:32:31.077

您可以考虑[STX](http://stx.sourceforge.net/)，其 Java 实现是[Joost](http://joost.sourceforge.net/)。由于它类似于 XSLT，但作为一个流处理器，它能够使用非常少的 RAM 处理大量文件。

Joost 可以用作标准 javax.xml.transform.TransformerFactory

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-20T11:30:23.330

请参阅 Saxon 对流模式的支持。[http://www.saxonica.com/html/documentation/sourcedocs/streaming/](http://www.saxonica.com/html/documentation/sourcedocs/streaming/)

如果这种流模式不适合您，您可以尝试使用Saxon 的[小树模式](http://www.saxonica.com/html/documentation/sourcedocs/choosingmodel.html)，该模式针对较小的内存使用进行了优化。（无论如何都是默认的）

# windows - Delphi中的文字转语音

> ID：460901
> 
> 赞同：6
> 
> 时间：2009-01-20T11:28:17.153
> 
> 标签：windows, delphi, text-to-speech

我正在改进我多年前构建的一个小型警报/提醒应用程序，我想每小时发出一次哔声，但与其发出哔声，它会更好地告诉时间。在 DELPHI D2007 或更高版本中是否有任何简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-20T12:38:01.180

查看 Brian Long 教程的 [**Speech Synthesis & Speech Recognition Using SAPI 5.1**](http://web.archive.org/web/20101003082259/http://www.blong.com/Conferences/DCon2002/Speech/SAPI51/SAPI51.htm)

我使用本教程编写了一个文本到语音软件。

当我按下`CTRL`+时，它会读取剪贴板内容`F10`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-20T19:23:27.413

```
uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ComObj; 
```

[...]

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Voice: Variant;
begin
  Voice := CreateOLEObject('SAPI.SpVoice');
  Voice.speak('Hello World');
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-21T01:44:00.157

不久前，我制作了一段视频，介绍如何[让您的应用程序](http://codegearguru.com/index.php?option=com_content&task=view&id=59&Itemid=27)在 Delphi 中进行对话。我个人从未在我的一个应用程序中发现文本到语音的用途，但知道如何做是一件有趣的事情；-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T11:36:38.933

在我的代码中，我使用 MS Agent 和 TAgntSrvr 组件： [http ://delphi.icm.edu.pl/ftp/d30free/agntsrvr.htm](http://delphi.icm.edu.pl/ftp/d30free/agntsrvr.htm)

你也可以查看这个[链接](http://www.delphiforfun.org/Programs/texttospeech.htm)或者只是谷歌：“文本语音德尔福”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T13:09:31.213

您可以将**[eSpeak](http://espeak.sourceforge.net/)**与 Delphi 一起使用以支持更多语言和 Mac（希望将来支持 Linux）。Delphi 示例在**[这里](http://www.rolfware.de/delphi/espeak_example.html)**。

# windows-vista - 关于 UAC in vista

> ID：460904
> 
> 赞同：1
> 
> 时间：2009-01-20T11:29:23.767
> 
> 标签：windows-vista, uac

> **可能重复：**
> [Vista UAC、Access Elevation 和 .Net](https://stackoverflow.com/questions/78696/vista-uac-access-elevation-and-net)

我的 AP 中有一个特殊功能，此功能需要在 Vista 中获得管理员权限。当我单击按钮时，是否有任何 MS API 可以弹出 UAC 对话框？因为我不希望最终用户在启动时看到 UAC 对话框，所以这个功能真的很特别，不是每个用户都会这样做。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-20T11:47:32.403

不，MS 花了很多时间来使以编程方式访问该按钮成为不可能！如果你能做这样的事情，UAC 绝对没用。您可以将功能封装为以管理员权限运行的东西（例如 Windows 服务）。您将从非提升过程中调用方法。

# sql-server - SQL Server - 根据另一列强制在一列中的唯一性

> ID：460905
> 
> 赞同：3
> 
> 时间：2009-01-20T11:29:30.490
> 
> 标签：sql-server, sql-server-2005, tsql, constraints

抱歉，如果我弄错了术语。如何在 MSSQL Server 2005 中定义约束以根据另一列强制一列的唯一性？

例如考虑最后两列：

```
1    A    1
2    A    2
3    A    2 <- Disallow because '2' has already appeared alongside 'A'
4    B    1
5    B    2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-20T11:32:23.497

试试这个：

```
创建表
    (field1 CHAR(1) NOT NULL,
     field2 INT NOT NULL，
     唯一（字段 1，字段 2）
)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T11:34:46.393

在 2 列上创建唯一约束？

这是最合乎逻辑的做法，因为似乎这一列不是唯一的，但两列的组合必须是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T13:47:04.147

不需要是主键，只需要一个唯一的复合索引。

# java - 尝试编写准备好的语句时出现 SQL 异常

> ID：460920
> 
> 赞同：1
> 
> 时间：2009-01-20T11:33:35.303
> 
> 标签：java, sql

我正在尝试将以下内容传递`String`给 a `PreparedStatement`：

```
private static final String QUICK_SEARCH = "select * from c where NAME like '% ? %'"; 
```

但是，我得到一个 SQL 异常，即缺少绑定变量。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T11:40:21.843

您不能将绑定变量放在这样的字符串中。

你需要使用：

```
SELECT * FROM c WHERE name LIKE CONCAT('%', ?, '%') 
```

或类似的，具体取决于您的 SQL 版本支持哪些功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T11:45:32.033

你不能在使用字符串连接中使用参数吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-20T11:49:31.637

凉爽的，

我只是在设置preparedstatement时设置了%符号；

```
pstmt.setString(1, "%" + name + "%"); 
```

# apache-flex - Flex 3：同一标签/控件中的不同文本样式

> ID：460931
> 
> 赞同：1
> 
> 时间：2009-01-20T11:37:50.007
> 
> 标签：apache-flex, flex3

谁能告诉我是否可以在单个标签控件中以多种样式显示文本。

例如我有一个标签

我希望文本以“英语”样式出现（确实如此），但我希望文本的“th”不同（粗体、不同颜色等）。

因此，简而言之，问题是：是否有与以下 HTML 等效的 flex？

<p class="english">兄弟<span class="highlight">第</span>er</p>

如果没有，谁能想到一个好的解决方法，而不必将文本分成多个标签控件（从而使对齐有点像噩梦）？

感谢任何能提供帮助的人！

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T11:56:15.647

是的，试试以下

```
var la : Label;
la.htmlText = '<TEXTFORMAT LEADING="3"><P ALIGN="LEFT"><FONT FACE="Arial" SIZE="14" COLOR="#000000" LETTERSPACING="0" KERNING="1">what ever texst you wish</FONT><FONT FACE="Verdana"SIZE="18" COLOR="#848484" LETTERSPACING="0" KERNING="1">more text here</FONT></P></TEXTFORMAT>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T12:45:05.923

是的，这是可能的。查看[`Label.htmlText`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Label.html#htmlText)livedocs 中的文档，该文档解释了如何在`Label`控件上设置标记，例如

```
<mx:Label>
    <mx:htmlText><![CDATA[This is an example of <b>bold</b> markup]]></mx:htmlText>
<mx:Label/> 
```

该[`Text.htmlText`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#htmlText)参考有完整的支持标签列表，并提供了有关段落和跨度标签的详细信息：

> 段落标签
> 
> 该`<p>`标签创建一个新段落。文本字段必须设置为多行文本字段才能使用此标记。该`<p>`标签支持以下属性：
> 
> `align`：指定段落内文本的对齐方式；有效值为 left、right、justify 和 center。 `class`：指定由`flash.text.StyleSheet`对象定义的 CSS 样式类。
> 
> 跨度标签
> 该`<span>`标签仅可用于 CSS 文本样式。它支持以下属性：
> 
> `class`：指定由`flash.text.StyleSheet`对象定义的 CSS 样式类。

最终，有很多方法可以做你想做的事。

# c# - 在 Visual Studio 2005/2008 中实现接口时删除自动 #region/#endregion 标签

> ID：460933
> 
> 赞同：34
> 
> 时间：2009-01-20T11:38:31.550
> 
> 标签：c#, visual-studio-2008, visual-studio-2005

当用户使用“Implement Interface X”上下文菜单功能时，插入的代码会被

```
#region [interfacename] Members
#endregion 
```

一对。我总是最终删除它，有没有办法可以永久关闭它？我快速搜索了片段目录，但不确定这是否是正确的地方。我想我可以修改 pp_region.snippet，但我觉得会完全关闭#region/#endregion。我想在我去做那些会让我重新安装 VS 的事情之前我会在这里问...

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-01-20T11:50:29.043

您可以通过工具/选项将其关闭

然后，在选项窗口中，选择“文本编辑器”，然后选择您选择的语言（例如 C#）。然后，您选择“高级”，然后，您有一个复选框，上面写着：“使用#region 环绕生成的代码”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T17:19:11.393

此外，如果您使用 Resharper，您可以完全配置类的布局，以便它们看起来完全符合您的要求。一种选择是在找到任何区域标签时完全删除它。打开任何 c# 项目并通过执行 [CTRL+E, C] 重新格式化它真是太棒了

# .net - AppSettings 与 applicationSettings 的优缺点（.NET app.config / Web.config）

> ID：460935
> 
> 赞同：172
> 
> 时间：2009-01-20T11:38:38.443
> 
> 标签：.net, web-config, app-config

在开发 .NET Windows 窗体应用程序时，我们可以在这些`App.config`标签之间进行选择来存储我们的配置值。哪一个更好？

```
<configuration>

  <!-- Choice 1 -->
  <appSettings>
    <add key="RequestTimeoutInMilliseconds" value="10000"/>
  </appSettings>

  <!-- Choice 2 -->
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c5612342342" >
        <section name="Project1.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c5612342342" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <applicationSettings>
    <Project1.Properties.Settings>
      <setting name="TABLEA" serializeAs="String">
        <value>TABLEA</value>
      </setting>
    </Project1.Properties.Settings>
  </applicationSettings>

</configuration> 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2009-01-28T06:31:51.843

基本`<appSettings>`的更容易处理 - 只需输入一个`<add key="...." value="..." />`条目，你就完成了。

缺点是：没有类型检查，例如，您不能安全地假设您想要配置的号码确实是一个数字 - 有人可以在该设置中放入一个字符串.....您只需访问它`ConfigurationManager["(key)"]`，然后它就可以了让你知道你在处理什么。

此外，随着时间的推移，`<appSettings>`如果您的应用程序的许多部分开始在其中放入东西（还记得旧的 windows.ini 文件吗？:-)），它会变得相当复杂和混乱。

如果可以的话，我更喜欢并推荐使用您自己的配置部分 - 使用 .NET 2.0，它真的变得非常容易，这样，您可以：

*   a）在代码中定义您的配置设置，并使其类型安全并检查
*   b) 您可以将*您*的设置与其他人的设置完全分开。你也可以重用你的配置代码！

有一系列非常好的文章可以揭开 CodeProject 上的 .NET 2.0 配置系统的神秘面纱：

1.  [揭开 .NET 2.0 配置的奥秘](http://www.codeproject.com/KB/dotnet/mysteriesofconfiguration.aspx)

2.  [解读 .NET 2.0 配置的奥秘](http://www.codeproject.com/KB/dotnet/mysteriesofconfiguration2.aspx)

3.  [破解 .NET 2.0 配置的奥秘](http://www.codeproject.com/KB/dotnet/mysteriesofconfiguration3.aspx)

强烈推荐！Jon Rista 很好地解释了 .NET 2.0 中的配置系统。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-01-20T13:42:29.693

应用程序设置可以由设计器控制（通常有一个 Settings.settings 文件，默认情况下），因此更容易修改，您可以通过设置类以编程方式访问它们，它们看起来像一个强类型属性。您还可以拥有应用程序和用户级别设置，以及回滚的默认设置。

这可以从 .NET 2.0 开始使用，并且不推荐使用其他方式（据我所知）。

更多详细信息请参见：[msdn.microsoft.com/en-us/library/k4s6c3a0.aspx](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-12-05T09:29:03.953

要了解 中设置的**优缺点**，**我**建议您查看两者的技术细节。我提供了一些链接，您可以在其中找到用于处理的源代码，并在下面描述更多技术细节。**`app.config`**

 **让我简要总结一下我在与他们合作时所认识到的（**注意：**这同样适用于`web.config`网站/网络应用程序的文件）：

* * *

> **[.NET 中的应用程序](https://stackoverflow.com/a/9704380/1016343)**
> *设置（点击上方查看源代码和技术细节）*

**优点**

*   它们允许存储类型化数据，包括对象类型（通过`serializeAs`属性）

*   它们具有用户和应用程序范围，允许存储默认值

*   Visual Studio 的配置部分支持它们

*   非常支持长字符串和/或带有特殊字符的数据（例如，包含双引号的嵌入式 JSON 字符串）

**缺点**

*   用户设置存储在用户配置文件中的不同位置（具有神秘的路径），可能难以清理

*   应用程序范围设置在应用程序运行时是只读的（在运行时只能更改用户范围设置）

*   由 Visual Studio 的设置设计器构建的读/写方法代码，不是由 3rd 方工具直接提供的（有关解决方法，请参见上面的链接）

* * *

> **[.NET](https://stackoverflow.com/a/11841175/1016343)**
> **更新** [中的 AppSettings：.NET Core 中的 AppSettings](https://stackoverflow.com/a/60230073/1016343)
> *（点击上方查看源代码和技术细节）*

**优点**

*   是“轻量级”，即易于处理

*   应用程序运行期间的读写访问

*   它们可以由管理员在
    **Internet 信息服务 (IIS) 管理器中轻松编辑**
    ^(（功能视图 -> 应用程序设置，请注意图标的名称具有误导性，因为它只能处理 AppSettings 而不是 ApplicationSettings）)

**缺点**

*   仅支持字符串数据；字符串长度和特殊字符有限制

*   他们没有用户范围

*   它们不支持默认值

*   Visual Studio 的配置部分不直接支持

* * *

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2011-03-08T22:01:02.480

我一直在使用我不久前发现的一种模式，在这种模式下，您使用基本的 xml 标签，但将设置包装在静态配置类中。所以 - 一个 DIY App.Settings。

[DotNetPearls 静态配置模式](http://www.dotnetperls.com/appsettings-cache)

如果你这样做，你可以：

*   为不同的环境（开发、测试、产品）使用不同的配置值集
*   为每个设置提供合理的默认值
*   控制值的定义和实例化方式

设置起来很繁琐，但性能很好，隐藏了对键名的引用，并且是强类型的。这种模式适用于未被应用程序更改的配置，尽管您可能也可以支持更改。

配置：

```
<add key="machineName" value="Prod" />
<add key="anotherMachineName" value="Test" />
<add key="EnvTypeDefault" value="Dev" />

<add key="RootURLProd" value="http://domain.com/app/" />
<add key="RootURLTest" value="http://test.domain.com/app/" />
<add key="RootURLDev" value="http://localhost/app/" />

<add key="HumanReadableEnvTypeProd" value="" />
<add key="HumanReadableEnvTypeTest" value="Test Mode" />
<add key="HumanReadableEnvTypeDev" value="Development Mode" /> 
```

配置类：

```
using System;
using System.Collections.Generic;
using System.Web;
using WebConfig = System.Web.Configuration.WebConfigurationManager;

    public static class Config
    {
        #region Properties

        public static string EnvironmentType { get; private set; }

        public static Uri RootURL { get; private set; }

        public static string HumanReadableEnvType { get; private set; }

        #endregion

        #region CTOR

        /// <summary>
        /// Initializes all settings when the app spins up
        /// </summary>
        static Config()
        {
            // Init all settings here to prevent repeated NameValueCollection lookups
            // Can increase performance on high volume apps

            EnvironmentType =
                WebConfig.AppSettings[System.Environment.MachineName] ??
                "Dev";

            RootURL =
                new Uri(WebConfig.AppSettings["RootURL" + EnvironmentType]);

            HumanReadableEnvType =
                WebConfig.AppSettings["HumanReadableEnvType" + Config.EnvironmentType] ??
                string.Empty;
        }

        #endregion
    } 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-06-08T06:52:05.173

我喜欢使用更简单的版本来存储和访问单个值。

```
<appSettings>
    <add key="MyConfigKey" value="true"/>
</appSettings> 
```

我编写了一个实用程序类，以允许默认值的类型安全方式访问值。如果未提供默认值，则会给出有用的异常消息。

您可以在此处查看/下载课程：

[http://www.drewnoakes.com/code/util/app-settings-util/](http://www.drewnoakes.com/code/util/app-settings-util/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-15T20:26:44.340

使用 ApplicationSettings 的一大好处是当应用程序通过 ClickOnce 部署时，如[本页](https://docs.microsoft.com/en-us/visualstudio/deployment/clickonce-and-application-settings?view=vs-2019)中详细说明的那样。

基本上，如果一个设置是 User 类型并且已经从它的默认值修改，它将在更新到更新时保持修改。如果一个设置的类型是应用程序，它会在应用程序更新时被自动覆盖。

此外，在 VB.NET 中，可以通过简单地使用 My.Settings 访问 ApplicationSettings。从 GUI 的角度来看，使其成为最简单的设置组合。

# stored-procedures - 在 SQL Server 中的存储过程之间共享表变量

> ID：460941
> 
> 赞同：0
> 
> 时间：2009-01-20T11:40:40.173
> 
> 标签：stored-procedures

是否可以将调用 exec sp_executesql 的结果存储在“表参数”中。参数值用于另一个 SQL 存储过程 (SQL 2000/2005)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T11:46:30.067

您能做的最好的是将值插入临时表（使用 INSERT EXEC 模式），然后在链的第二个过程中使用该临时表......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T11:52:52.940

如果您想将某个过程的结果存储在表变量中，我建议将其设为表值函数而不是存储过程。这样你就可以在你正在做的任何其他处理中使用第一个函数的最终结果

```
Select * from MyTableValueFunction() 
```

# sql - SQL Server 2005 中的分区

> ID：460942
> 
> 赞同：0
> 
> 时间：2009-01-20T11:41:13.930
> 
> 标签：sql, sql-server-2005, database-partitioning

我对分区和策略、如何以及何时使用它有一些疑问。[正如我从SQL Server 2005 中的分区表和索引中](http://msdn.microsoft.com/en-us/library/ms345146.aspx#sql2k5parti_topic1)了解到的那样，分区不仅用于可管理性，还用于提高超大型数据库表 (VLDB) 的性能。我们有一个包含数百万条记录的表。该表存储性能数据，例如指定项目被点击的次数等。我们需要每天在实际应用中评估当前月份的这些数据。我要防止的是将数据从一个表移动到另一个表，只是因为性能。我的想法是：我在这个 VLDB 上按当年创建分区。然后我会在表和分区方案的日期字段上创建聚集索引。我不知道我是否理解正确，但除此之外，该索引将分别为每个分区创建。

通常我的代码在开发阶段的样子。

```
/*
Maybe it looks like complicated, but instead of static upper bound, 
I use function to determine end of the month for the current year.

So for example (executed in year 2009)
    SELECT DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1901)*12)+1-1,31-1)) 
returns 
    2008-01-30 23:59:59.997
*/
CREATE PARTITION FUNCTION PartitionMonthlyCurrentYear(DATETIME) AS
RANGE LEFT FOR VALUES
(
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1901)*12)+1-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+1-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+2-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+3-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+4-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+5-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+6-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+7-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+8-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+9-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+10-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+11-1,31-1)),
    DATEADD(ms, -2, DATEADD(month,((DATEPART(YEAR, GetDate())-1900)*12)+12-1,31-1))
);

/*
Create scheme on the primary file group. I'm aware about performance issues of this.
*/
CREATE PARTITION SCHEME SchemeMonthlyCurrentYear 
AS PARTITION PartitionMonthlyCurrentYear
ALL TO ([PRIMARY]);

/*
Create clustered index on table and scheme
*/
CREATE CLUSTERED INDEX [IX_Log_Seiten_archive_Datum] ON [dbo].[Log_Seiten_archiv] 
(
    [Datum] DESC
)ON SchemeMonthlyCurrentYear(Datum)
GO 
```

我的问题：

1.  您如何看待这种方法？
2.  如何从指定的分区方案中删除表？如果我删除索引，仍然无法删除方案和功能，因为仍然依赖表*Log_Seiten_archiv*
3.  如何分配表以使用不同的分区功能？由于开发，我需要经常更改分区功能的定义方式，或创建新分区功能。我该如何为现有表执行此操作？例如，我想更改我之前展示的功能的年份。

问候安东卡尔奇克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-20T11:58:49.747

1.  不能使用 getdate() 等非确定性函数创建 SQL Server 分区函数。如果您使用跨越 10 年的数据填充数据库，然后简单地停止并观察 SQL Server 运行几年，您会看到 SQL Server 随着日期的变化将该数据从一个分区移动到另一个分区。SQL Server 分区不能那样工作。当调用分区函数时，数据被放入一个特定的分区中，这就是它的结束。除非您想手动移动它，否则它不会再次移动。

2.  要删除表上的分区，请应用不使用分区方案的新聚集索引。数据将被移动。（请注意，这将花费很长时间，具体取决于数据的大小和磁盘的速度 - 对于数 TB 的数据仓库，我们可能需要数小时甚至数天。）

3.  要分配不同的分区函数，请使用新的分区函数应用新的聚集索引。不过，同样，如果您经常更改分区功能，重建将需要很长时间，并且分区可能不是您要寻找的答案。

对于具有不同驱动器阵列集的超过 1 亿行数据库，分区是一个很棒的解决方案，但听起来您只是将所有内容放在同一组驱动器、同一文件组上。你不会在那里看到性能的大幅提升。

此外，请注意分区仅在 SQL Server Enterprise Edition 中可用，在 Standard 中不可用。它在 Dev 中可用，但由于许可限制，您不能在生产中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-22T11:53:24.390

谢谢你们的快速响应。

1.  您确实是开发人员负责如何将数据传输到分区表中。有很多方法可以做到这一点，每种方法都有优点和缺点。[我在Technet](http://www.microsoft.com/technet/prodtechnol/sql/bestpractice/loading_bulk_data_partitioned_table.mspx)上找到了关于此的优秀文章。

我现在明白了，如何删除或重新分配分区功能。

这里的例子：

在现有表上创建分区：

```
CREATE CLUSTERED INDEX [IX_Log_Seiten_archive_Datum_Kanzleinr] ON [dbo].[Log_Seiten_archiv_Daily] 
(
    [Datum] DESC,
    [kanzleinr] ASC
)ON SchemeDailyCurrentYear(Datum) 
GO 
```

删除现有表上的分区：

```
DROP INDEX [IX_Log_Seiten_archive_Datum_Kanzleinr] ON [dbo].[Log_Seiten_archiv_Daily];

CREATE CLUSTERED INDEX [IX_Log_Seiten_archive_Datum_Kanzleinr] ON [dbo].[Log_Seiten_archiv_Daily] 
(
    [Datum] DESC,
    [kanzleinr] ASC
)ON [PRIMARY]
GO 
```

谢谢你的帮助阿卡

# asp.net - 如何将 Word 文档从 ASP.NET 内部网保存回主服务器？

> ID：460944
> 
> 赞同：2
> 
> 时间：2009-01-20T11:41:55.567
> 
> 标签：asp.net, ms-word

我有一个包含文档库部分的 ASP.NET 内部网应用程序。用户可以单击指向驻留在服务器上的 MS-Word 文档的链接，然后可以根据需要在浏览器 (IE) 中编辑该文档。

问题是，当他们保存更改时，需要将其写回服务器，而是希望将其保存在本地系统上。

有什么想法可以让它保存回主服务器吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T11:48:31.170

您需要将文件上传回服务器。

这是 Internet 还是 Intranet 应用程序？如果 Intranet 你可以直接保存到 \\myServer\myFolder\...

如果它是一个 Internet 应用程序，因此最终用户不能直接访问服务器文件，您需要创建一个 Office 插件（使用[Visual Studio Tools for Office](http://msdn.microsoft.com/en-us/library/d2tx7z6d(VS.80).aspx)），称为“保存到服务器”，它将运行“ [http:// www.mydomain.com/updatefile.aspx](http://www.mydomain.com/updatefile.aspx) ”，该页面将执行更新。

请记住，使用与原始文件名不同的文件名进行更新，如果更新正常，则删除旧文件并重命名新文件（或给用户一个版本系统并将服务器上的文件重命名为 [myFile]_[currentDate] .docx 例如。

链接：

[如何使用 Visual C# .NET 将文件上传到 ASP.NET 中的 Web 服务器](http://support.microsoft.com/kb/323246)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-20T11:46:45.137

word 文档的链接可以是 file:// url。

使用此方法，用户可以直接在共享上打开文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T11:47:21.343

假设您的 Intranet 应用程序支持回写到服务器，则您需要授予运行 Web 应用程序的帐户以写入存储文档的文件夹的权限，除非它使用模拟，否则它所模拟的用户将需要它权限。

# javascript - Javascript `this` 不像我想的那样工作？

> ID：460949
> 
> 赞同：0
> 
> 时间：2009-01-20T11:43:43.753
> 
> 标签：javascript, class, prototype, this

我正在将一个非常基本的 js 函数改编成一个类。无论如何，基本上它只是在主页上方创建一个浮动容器。我知道它不完整，但我正在输入它，并且在尝试调用 close() 函数时不断被抓住。Firefox 返回 a`this.sdiv`未定义。我很困惑当 close() 是 Pop 的方法并且 sdiv 是在 Pop 类的第一行中定义的情况下怎么会出现这种情况？

```
function Pop( wpx,hpx ){

  Pop.prototype.sdiv;
  Pop.prototype.shadow;
  Pop.prototype.pdiv;

  // start with the invisible screen, which
  // covers the main page
  this.sdiv = document.createElement("DIV")
  this.sdiv.className = "popScreen";
  this.sdiv.id = "popScreen";
  // this screen covers the full document, so 
  // base dimensions on the document size
  this.sdiv.style.width = document.body.clientWidth + "px";
  this.sdiv.style.height = document.body.clientHeight + "px"; 
  document.body.appendChild( this.sdiv );

  // attach drop shadow
  this.shadow = document.createElement("DIV");
  this.shadow.className = "popShadow";
  this.shadow.style.width = wpx + "px";
  this.shadow.style.height = hpx + "px";
  this.shadow.style.left = ( ( window.innerWidth / 2 ) - ( wpx / 2 )  ) + "px";
  this.shadow.style.top = ( ( window.innerHeight / 2 ) - ( hpx / 2 ) ) + "px";
  document.body.appendChild( this.shadow );

  this.pdiv = document.createElement("DIV");
  this.pdiv.className = "pop";
  this.pdiv.id = "pop";
  this.pdiv.style.position = "absolute";
  this.pdiv.style.width = wpx + "px";
  this.pdiv.style.height = hpx + "px";
  this.shadow.appendChild( this.pdiv );

  // bind an event to the screen div so that when it is clicked
  // the Pop dialogue is closed and the user is return to the main page
  $("div#popScreen").click( function( ){
    Pop.prototype.close( );
  } );

  Pop.prototype.go = function( url, method, data ){ 
    if( method == null )
      $("div#pop").load( url );
  }

  Pop.prototype.close = function( ){
      this.sdiv.parentNode.removeChild( this.sdiv );
      this.shadow.parentNode.removeChild( this.shadow );
      this.pdiv.parentNode.removeChild( this.pdiv );
  }

} 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-20T11:48:49.657

您不能使用`Pop.prototype.close()`关闭所有`Pop`实例。`Pop`相反，对于您使用运算符创建的每个实例`new`，您需要调用`popInstance.close()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T11:55:33.917

`this`在 javascript 中的工作方式与在 oo 语言中[非常不同。](http://www.quirksmode.org/js/this.html)

您遇到的错误在这里：

```
 Pop.prototype.close = function( ){
      this.sdiv.parentNode.removeChild( this.sdiv );
      this.shadow.parentNode.removeChild( this.shadow );
      this.pdiv.parentNode.removeChild( this.pdiv );
  } 
```

在那个函数`this`中可能是[指窗口](http://www.switchonthecode.com/tutorials/javascript-tutorial-why-the-this-keyword-breaks)（设置断点并查看萤火虫）

也许这些方面的东西会起作用。

```
 var parent = this;
 Pop.prototype.close = function(){
      parent.sdiv.parentNode.removeChild( this.sdiv );
      parent.shadow.parentNode.removeChild( this.shadow );
      parent.pdiv.parentNode.removeChild( this.pdiv );
  } 
```

# ruby - 如何从另一个 rake 文件修改/扩展 rake 文件？

> ID：460958
> 
> 赞同：1
> 
> 时间：2009-01-20T11:45:12.690
> 
> 标签：ruby, build, rake

我正在尝试找到一种方法来从另一个 RakeFile 修改/扩展 RakeFile 而无需实际更改它。

当我运行我的 rake 任务时，我从 SVN 中检索了一个包含 rakefile 的解决方案。我想要：

1.  更改此 rakefile 中的变量。
2.  向这个 rakefile 添加一个新任务，该任务利用现有任务。
3.  执行新任务。

我想这样做最好不要实际修改磁盘上的原始 RakeFile。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-20T20:46:13.283

这是一种在执行任务之前运行任意代码的方法。

```
your_task = Rake::Task['task:name']
your_task.enhance { this_runs_before_the_task_executes } 
```

您可以类似地执行 rake 任务。

```
your_task.invoke 
```

完整的文档[在这里](https://ruby.github.io/rake/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T14:07:22.793

这是我最终解决我遇到的特定问题的代码。

```
Dir.chdir File.dirname(__FILE__) + '/their_app'
load 'RakeFile'

# Modify stuff from original RakeFile
COMPILE_TARGET = "release"

# Add my task
task :my_task =>[:my_pre_task, :their_task] 
```

我不知道这是否是正确的方法，如果有人知道更好的方法，我将不胜感激评论/编辑。

感谢[leethal](https://stackoverflow.com/users/26051/leethal)提交的[答案](https://stackoverflow.com/questions/460958/can-i-modify-extend-a-rake-file-from-another-rake-file#463024)，它帮助了我，并且对我遇到的另一个问题非常有用。

# java - 在 Java 帮助中更改“收藏夹”工具提示

> ID：460978
> 
> 赞同：1
> 
> 时间：2009-01-20T11:48:31.403
> 
> 标签：java, swing, tooltip, javahelp

在我的帮助文件中，我声明了一个收藏夹视图，使用

```
<view>
  <name>Lesezeichen</name>
  <label>Lesezeichen</label>
  <type>javax.help.FavoritesView</type>
  <data></data>
</view> 
```

这会自动将适当的按钮添加到工具栏（在 swing 应用程序中）。不幸的是，按钮的工具提示显示为“添加到收藏夹”。我想用我自己的文本替换它，但在文档中或使用谷歌搜索时没有找到任何相关内容。任何想法或指示？

免责声明：我已经将此问题发布到[JavaRanch](http://www.coderanch.com/t/426570/Other-Java-APIs/JavaHelp-Changing-Favorites-Tooltip)，但尚未得到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-20T12:42:49.627

如果您提取 src.jar（将其重命名为 src.zip 并提取）并打开 java 类 jh2.0/src/src/javax/help/resources/Constants.java，您会注意到在该部分

```
// Tooltips for Actions 
```

位于本地化入口：

```
{ "tooltip.FavoritesAction", "Add to Favorites"}, 
```

在您的案例中使用的 jh2.0/src/src/javax/help/resources/Constants_de.java 中缺少此常量。只需添加正确的翻译，编译源代码或仅将此类添加到 jh.jar 中（您可以将 jar 视为简单的 zip 存档）

是的，我知道这是肮脏的 hack，但通常 JavaHelp 非常有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-17T13:21:39.430

现在这听起来很奇怪。ResourceBundle 机制支持通过将 .properties 文件与资源包一起使用来“覆盖”类资源内容。尝试将查找到的资源包作为属性文件放置在由包名称表示的相应文件夹中。例如，如果 HelpUtilities 通过调用来处理 javax.help.resources.Constants

```
ResourceBundle.getBundle("javax.help.resources.Constants", locale); 
```

you'd be placing your file in a folder structure at /javax/help/resources/Constants_de_DE.properties. This must be located in your applications "working directory".

# c++ - 在哪里可以找到用于文件夹和应用程序的默认图标？

> ID：460980
> 
> 赞同：3
> 
> 时间：2009-01-20T11:48:39.813
> 
> 标签：c++, windows, winapi

我正在尝试加载资源管理器显示的默认 HICON：

*   一个打开的文件夹
*   一个没有自己嵌入的默认图标的 exe。这也可以在 Vista 上调用的“添加/删除程序”或“程序和功能”中看到。

你知道在哪里可以找到这些吗？我认为文件夹图标可能在 explorer.exe 的资源中。但是不知道可以从哪里检索默认应用程序图标。

此外，您是否有任何示例代码可以将它们加载到 HICON 中。

我真的需要它才能在多个 Windows 操作系统上工作：2000、XP、Vista、2008

* * *

感谢你目前的帮助。我在 Vista 上并查看了 Shell32.dll。我没有在其中看到与资源管理器中的应用程序显示的默认图标相同的图标。我可能会错过它 - 有 278 个图标可供查看 - 它肯定在其中，还是我应该查看其他位置？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-20T14:14:50.953

使用[SHGetFileInfo](http://msdn.microsoft.com/en-us/library/bb762179(VS.85).aspx) API。

```
SHFILEINFO sfi;
SecureZeroMemory(&sfi, sizeof sfi);

SHGetFileInfo(
    _T("Doesn't matter"),
    FILE_ATTRIBUTE_DIRECTORY,
    &sfi, sizeof sfi,
    SHGFI_ICON | SHGFI_SMALLICON | SHGFI_USEFILEATTRIBUTES); 
```

将为您提供文件夹图标的图标句柄。

要获得“打开”图标（即文件夹显示为打开的图标），还要将最后一个参数中的 SHGFI_OPENICON 传递给 SHGetFileInfo()。

[编辑]

忽略所有告诉您在注册表中四处寻找的答案！因为这不能可靠地工作，如果它们是定制/皮肤的，将显示错误的图标，并且可能在未来的 Windows 版本中不起作用。此外，如果您从系统 dll/exe 中提取图标，您可能会遇到法律问题，因为它们受版权保护。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-16T03:30:19.240

Vista 添加[**SHGetStockIconInfo**](https://docs.microsoft.com/en-us/windows/desktop/api/shellapi/nf-shellapi-shgetstockiconinfo)等 NT6+ 是最好的方法。

> 显示可用图标的 MSDN 文档[存档](https://archive.fo/mCKLy)

在旧平台上，像 Stefan 这样的[**SHGetFileInfo**](https://docs.microsoft.com/en-us/windows/desktop/api/shellapi/nf-shellapi-shgetfileinfoa)说。

如果您想使用未记录的东西，系统映像列表中的前 5 个左右的图标包括默认文件夹和应用程序图标（系统映像列表在 NT 上不共享，但由于某种原因，所有副本都获得前 5 个左右图标而不用**SHGetFileInfo**询问它们）

这些默认图标默认来自 shell32.dll，但可以在注册表中更改：

> HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell 图标

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T11:53:29.333

我认为他们在 %windir%\system32\SHELL32.dll

在网上找了一些代码，试试看是否可行：

```
HINSTANCE hDll;
hDll = LoadLibrary ( "SHELL32.dll" );
wincl.hIcon   = LoadIcon (hDll , MAKEINTRESOURCE ( 1 ));
wincl.hIconSm = LoadIcon (hDll, MAKEINTRESOURCE ( 2 )); 
```

* * *

编辑：Windows 在“moricons.dll”中有更多图标，但我认为文件和文件夹图标应该都在 shell32.dll 中。提醒一下，Vista 中的图标具有不同的分辨率，最高可达 256x256，因此您正在查看的分辨率为 32x32 的图标可能与同一个图标的全分辨率版本看起来不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-20T12:04:56.783

在 Visual Studio 中：

1.  点击文件|打开
2.  选择 C:\WINDOWS\System32\Shell32.dll

VS 将使用资源浏览器打开文件。您现在可以查看 shell32.dll 中嵌入的所有图标和其他资源。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-20T12:34:53.790

用户选择的图标可以在注册表中找到`HKEY_CLASSES_ROOT\Folder\DefaultIcon`

通过在此处查找值，您还可以了解他们是否出于任何原因更改了它。

对于存在 desktop.ini 文件的文件夹，您需要阅读`IconFile`和`IconIndex`条目。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-20T11:57:54.957

如果您在 MFC 中，则以下用于加载图标的代码应该可以工作。

```
    海康海康；
    hicon = LoadIcon(AfxGetResourceHandle(), MAKEINTRESOURCE(IDI_ICON1));   

```

在上面的例子中，AfxGetResourceHandle() 是唯一使用 MFC 的地方，否则据我记得 LoadIcon 是一个 API 调用。

图标在 windows\system32\shell32.dll 中可用

如果您安装了 Visual Studio，则 Visual Studio 还附带一组图标，位于“C:\Program Files\Microsoft Visual Studio 9.0\Common7\VS2008ImageLibrary”这样的路径中

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-01-20T14:41:12.803

它可能在 explorer.exe 中。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-18T09:29:41.627

这要容易得多，只需用资源黑客打开shell32.dll，然后右键单击“图标”并将所有图标资源保存在一个目录中。

您将在该目录中获得所有 Windows 默认图标。

[链接] [http://www.angusj.com/resourcehacker/[/link]](http://www.angusj.com/resourcehacker/[/link])

# php - 插入mysql问题

> ID：460997
> 
> 赞同：1
> 
> 时间：2009-01-20T11:53:36.247
> 
> 标签：php, mysql

我有一个包含 2 个字段（`name`，`confirm`）的表。 `confirm`是类型`tinyint`，因为我想输入 0 或 1

现在我想把 1 放进去`confirm`；这个说法正确吗？

```
if($row['confirm']==0)
{
    $query = "INSERT INTO opt (confirmed) values('0')";
    echo 'The user selected options has confirmed';
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-20T12:10:18.177

仅当您还希望关联的“名称”字段为 NULL 时，您编写的语句才是正确的。

如果您实际上希望填充两个字段，您应该这样做：

```
INSERT INTO opt (name, confirmed) VALUES (?, ?) 
```

然后使用`mysqli`or`PDO`系列函数将`?`参数绑定到用户提供的值。这是保护您的数据库免受 SQL 注入攻击所必需的。

我还会考虑添加另外几个字段：

*   一个唯一的`id`字段（MySQL`auto_increment`对此很有用），以便您可以删除和/或修改特定记录
*   一个`timestamp`字段，以便您获得有关何时添加此数据的记录（双关语不是有意的）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-20T14:38:56.473

听起来您确实想要进行更新：

UPDATE opt SET 确认 = 1 WHERE name = '$row[name]'

正确的？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-20T11:55:40.657

当 'confirmed' 是数字列时，不应在 1 周围加上引号。

```
INSERT INTO OPT (confirmed) VALUES (1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-20T12:14:37.013

以前的海报所说的一切+：如果“已确认”字段只有两个可能的值，则将其设为 ENUM。*******