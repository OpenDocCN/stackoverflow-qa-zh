# StackOverflow 问答 10783000-10783999

# java - 对象化 Google DataSore 查询

> ID：10783001
> 
> 赞同：0
> 
> 时间：2012-05-28T10:19:15.390
> 
> 标签：java, objectify

事情是这样的 :-) 我们有两个类，`Appointment`并且`Hairdresser`，它们都具有相同的一个祖先（一个静态的最终键：）`topParent`代表`HairSalon`键。`Appointment`包含`Hairdresser`这样的：

```
 @Parent
    public Key parent; 
    public Key hairdresserKey;` 
```

但是当我们试图过滤掉约会时，它并没有得出结果。中的父母`hairdresserKey == null`，这可能是一个线索，但我们现在有点卡住了。

那么有人可以告诉我们这个查询有什么问题吗？

非常感谢！

```
 appointment.hairdresserKey = new Key<Hairdresser>(topParent, Hairdresser.class, appointment.hairdresser.id);
    appointment.parent = topParent;

    Key<Hairdresser> queryKey = new Key<Hairdresser>(topParent, Hairdresser.class, appointment.hairdresser.id);

    Objectify ofyTransaction = ObjectifyService.beginTransaction();
    try {

        List<Key<Appointment>> previousTimeSlotOneHour = ofyTransaction.query(Appointment.class)
                .ancestor(topParent)
                .filter("hairdresserKey", appointment.hairdresserKey)
                .filter("timeSlot", appointment.timeSlot.getPreviousTimeSlot())
                .filter("LENGTH", 1.0d).listKeys(); 
```

为了澄清更多，这是 Appointment 的设置方式：

```
@Unindexed 
```

公共类约会实现可序列化{

```
@Id
public Long id;
@Indexed
public TimeSlot timeSlot;

@Transient
public WorkDay workDay;

@Transient
public Customer customer;
public Key customerKey;

public int END_TIME_HOUR;
public int END_TIME_MINUTES;

@Indexed
public TREATMENT treatment = TREATMENT.TREATMENT_CUT;
public int revisionNumber = -1;

/* QUERY Fields */
@Indexed
private String stringDate;
private double LENGTH;

@Parent
public Key parent;
private Date date;

@Transient
public Hairdresser hairdresser;
public Key hairdresserKey; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T19:52:54.867

发现这个：

这几乎可以肯定是一个索引问题。为了使该查询起作用，您必须定义两个索引：

referenceKeyToC 上的单属性索引 {ancestor, referenceKeyToC} 上的多属性索引 在 Objectify 3.x 中，属性默认具有单属性索引，但如果您已将 @Unindexed 添加到类 B 中，则需要将 @在 referenceKeyToC 上建立索引。多属性索引在 datastore-indexes.xml 中定义。如果您在开发模式下运行此查询，环境应该为您提供所需的 xml 片段。

那成功了！感谢您指出正确的方向！

# android - Phonegap 应用程序不滚动

> ID：10783011
> 
> 赞同：4
> 
> 时间：2012-05-28T10:20:04.943
> 
> 标签：android, cordova, scroll, android-webview

我已经开发了一个 Phonegap 应用程序，现在正尝试在 android 模拟器中运行它。我的问题是应用程序不能在模拟器或设备中滚动，但它在普通浏览器（如 mozilla 或 chrome）中运行良好。但是当我在模拟器或设备中测试时，它不会滚动。

这是我的 html 文件[http://pastie.org/3981916](http://pastie.org/3981916)

这是我的 css 文件 [http://pastie.org/3981918](http://pastie.org/3981918)

我无法找到解决此问题的方法，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T10:31:44.610

好吧，当您尝试在 android 上使用 phonegap 创建应用程序时，您无法获得正常的 html 滚动行为。
您无法获得任何 html 元素的溢出：滚动效果。
您需要使用第三方库，例如[jquerymobile、](http://jquerymobile.com/) [iscroll4 等，](http://cubiq.org/iscroll-4)以获得原生的外观和感觉。
或者您也可以构建自己的逻辑

# nhibernate - NHibernate 代码映射：按约定映射用户类型

> ID：10783012
> 
> 赞同：1
> 
> 时间：2012-05-28T10:20:08.577
> 
> 标签：nhibernate, mapping-by-code

我想知道如何配置 NHibernate“代码映射”，以便当我映射某种类型的属性时，它使用某个 userType 来执行该映射。它按照惯例解决了这个问题。

例如，如果我有一个具有 type`Account`属性`Currency`的类`Currency`，那么 NHibernate 配置应该（按照惯例）确定它需要使用`CurrencyUserType`来执行映射。

我找不到这方面的相关文档，所以如果确实存在这样的文档，那么一些链接也将不胜感激。

注意：这不是 FluentNHibernate 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:08:05.663

```
var mapper = new ConventionModelMapper();
mapper.IsProperty((info, b) => b || info.GetPropertyOrFieldType() == typeof(Currency));
mapper.BeforeMapProperty +=
       (inspector, member, customizer) =>
       {
           if (member.LocalMember.GetPropertyOrFieldType() == typeof(Currency))
               customizer.Type<CurrencyUserType>();
       }; 
```

# javascript - 只允许用户查看和使用该网站

> ID：10783018
> 
> 赞同：-2
> 
> 时间：2012-05-28T10:20:35.643
> 
> 标签：javascript, logging

我有一个 javascript/php 应用程序，我想做一些只让用户查看我的应用程序的事情。我正在考虑像门这样的网页，用户应该输入用户名和密码，然后登录并使用该应用程序。但我不知道该怎么做。或者如果有更好的主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:23:53.273

那里有很多关于如何做到这一点[的教程](https://www.google.com/search?q=php+login+system)，这里有一个有点时髦[的登录系统。](http://tutorialzine.com/2009/10/cool-login-system-php-jquery/)

# php - 将 textarea 设置为空，但它会在提交时重新加载可变数据

> ID：10783022
> 
> 赞同：1
> 
> 时间：2012-05-28T10:20:47.220
> 
> 标签：php, html, textarea

如果我将编辑页面中的文本区域设置为空白并点击提交，它会重新加载页面并显示错误，但它也会从我的 php 变量中加载摘要文本。相反，它应该保持空白。

这是我尝试过的：

```
<textarea name="summarytxt" cols="52" rows="7">
<?php
    if ( isset($_POST['updatebtn']) AND (!empty($POST['summarytxt']))  ){ 
        echo @$POST['summarytxt'];
    } 
    elseif ( isset($_POST['updatebtn']) AND (isset($POST['summarytxt']))  ){ 
        echo @$POST['summarytxt'];
    } 
    else{ 
        $summary=stripslashes($data['summary']);
        echo $summary;
    }
?>
</textarea> 
```

我希望 elseif 条件可以解决它，但它似乎不起作用：

```
 elseif ( isset($_POST['updatebtn']) AND (isset($POST['summarytxt']))  ) 
```

以上对我来说意味着如果单击按钮并且文本区域设置为回显文本区域中的任何内容。

关于我做错了什么或如何解决它的任何建议？

编辑：

我基本上想知道以下内容：

如果说我有字段 summarytxt 和一个名为 data['summary'] 的数组，我需要： 1\. 在页面加载时，从 data['summary'] 加载 2\. 如果用户清除了 summarytxt，在页面提交时，它应该是空白的里面的summarytxt

我尝试了以下似乎可行的方法...

```
<?php
                if (!isset($_POST['updatebtn'])){
                    $summary=stripslashes($data['summary']);
                    echo $summary;      
                }else{
                    echo $_POST['summarytxt'];

                }
                ?> 
```

现在我的下拉框遇到了一些问题： 1\. 当我将它从产品更改为“选择”时，这是您在添加表单中得到的，我更新了页面。而不是坚持选择它加载我打开表单时拥有的产品。

有人可以告诉我一个简单的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:41:39.113

所以我会这样做类似于（记住关于 php 和 html 的分离）：

```
<?php
$summary = "";
if($_SERVER['REQUEST_METHOD'] == 'POST')
{
    $summary = stripslashes($_POST['summarytxt']);
}
?>
<textarea name="summarytxt" cols="52" rows="7"><?php echo $summary; ?></textarea> 
```

# ipad - 如何在 ipad 中从 myserver.com.. 下载和安装 ipa 文件？

> ID：10783025
> 
> 赞同：1
> 
> 时间：2012-05-28T10:21:02.567
> 
> 标签：ipad

我正在为 android 和 ipad 应用程序创建自己的应用商店。我正在使用 node.js 来运行我的 web 服务和 mongodb 来存储数据。Web 服务在端口 8030 中运行。例如：localhost:8030/webservice1 上的 Web 服务。为了把所有东西都放在我的服务器机器上，我使用的是 xampp 服务器。在 httpd.conf 文件中，我将其配置为

`ProxyPass /getapplication http://localhost:8030/webservice1 ProxyPassReverse /getapplication http://localhost:8030/webservice1`

此 Web 服务将开始在设备中下载应用程序文件。这适用于 apk 文件。但是在 ipad 中，当我尝试下载 ipa 文件时，Safari 显示错误为“Safari 无法下载此文件”

通常我将下载路径直接作为[http://myserver.com/myfolder/myapkfile.apk](http://myserver.com/myfolder/myapkfile.apk) 和 ipad [http://myserver.com/myfolder/myipafile.ipa](http://myserver.com/myfolder/myipafile.ipa)。在浏览了一些链接后，我将 ipad 的链接更改为

`itms-services://?action=download-manifest&url=http://myserver.com/myfolder/myipafile.ipa` 它显示错误为“无法连接到 myserver.com”。可能是什么问题？？谁能帮我弄清楚我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T07:48:34.823

我们需要在我们的服务器中安装 mime 类型文件。

For IIS, Open IIS Manager. Right click 'Server(local computer)' Select Properties click 'MIME Types' Click 'New...'

Add the Following MIME Types:

.IPA - application/octet-stream .PLIST - text/plain.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:36:23.080

（作为答案发布的评论：）

这是因为对于 ad-hoc OTA iOS 发行版，它通常需要一个 .plist（清单）文件，其中包含指向 .ipa 和其他重要应用程序数据的链接。看看 BetaBuilder（Mac 应用程序，也可以在 Github 上找到源代码）和 TestFlight 是如何做到的。

[https://github.com/HunterHillegas/iOS-BetaBuilder](https://github.com/HunterHillegas/iOS-BetaBuilder)

[https://testflightapp.com/](https://testflightapp.com/)

# xpages - SSJS 解释似乎与常规 Javascript 不同

> ID：10783028
> 
> 赞同：1
> 
> 时间：2012-05-28T10:21:28.453
> 
> 标签：xpages, xpages-ssjs

我发现 Lotus Domino SSJS iterpretation 和常规 Javascript 之间存在差异。

看看这个片段...

```
var mister = "mister in the hat".replace(" ", "-");
return mister 
```

常规 Javascript 只替换一次。结果是“戴帽子的先生”。SSJS 完全替换。结果是“戴帽子的先生”。

是否有任何文档，SSJS 与常规 JS 有何不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T12:11:27.807

我怀疑服务器端 JavaScript 将更多地受到 Java 而不是 JavaScript 的影响。这是因为任何编写的 SSJS 都只是作为字符串传递给在运行时解析代码的 Java 方法。我知道与 CSJS 的不同之处——例如，parseInt 默认为 base 10，而不是 base 8（JavaScript 默认）。

该行为记录在 Domino Designer 帮助中的 Lotus Domino Designer XPages Reference - Standard (JavaScript) - String - Replace 下。如有疑问，请查看帮助。这对这些库非常有用，有大量示例和文档。

# android - 通过 Wi-fi Direct 连接两台设备

> ID：10783029
> 
> 赞同：4
> 
> 时间：2012-05-28T10:21:30.427
> 
> 标签：android, wifi-direct

我正在尝试通过 Wi-fi Direct 连接 2 台 Android 设备。在我的应用程序中，我对其他设备的 MAC 地址进行硬编码并调用方法连接。我假设两个设备都打开了 Wi-Fi Direct。这是我正在使用的代码：

包 com.abc;

```
import android.app.Activity;
import android.content.Context;
import android.content.IntentFilter;
import android.net.wifi.WpsInfo;
import android.net.wifi.p2p.WifiP2pConfig;
import android.net.wifi.p2p.WifiP2pManager;
import android.net.wifi.p2p.WifiP2pManager.Channel;
import android.os.Bundle;
import android.widget.Toast;

public class WiFiDirectActivity extends Activity {
/** Called when the activity is first created. */
protected WifiP2pManager manager;
protected Channel channel;
public WifiP2pConfig config ;
protected final IntentFilter intentFilter = new IntentFilter();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    intentFilter.addAction   (WifiP2pManager.WIFI_P2P_CONNECTION_CHANGED_ACTION);
    intentFilter
            .addAction(WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION);
    manager = (WifiP2pManager) getSystemService(Context.WIFI_P2P_SERVICE);
    channel = manager.initialize(this, this.getMainLooper(), null);
    config = new WifiP2pConfig();
    config.deviceAddress = "78:d6:f0:ab:d9:da";
    config.groupOwnerIntent = 0;
    config.wps.setup = WpsInfo.PBC;

    manager.connect(channel, config, new WifiP2pManager.ActionListener(){
        @Override
        public void onSuccess() {
            Toast.makeText(getApplicationContext(), "success", Toast.LENGTH_LONG);

        }

        @Override
        public void onFailure(int reason) {
            Toast.makeText(getApplicationContext(), "Failed", Toast.LENGTH_LONG);

        }
    });

} 
```

}

但它没有连接。我的实施有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T16:59:01.477

我有一个类似的代码工作，主要区别是：

*   我在发现对等方之前获得了设备地址调用（如果你这样做，那么你必须添加`WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION`到意图过滤器组）
*   我没有设置 config.groupOwnerIntent

* * *

```
WifiP2pConfig config = new WifiP2pConfig();
config.deviceAddress = this.address;
config.wps.setup = WpsInfo.PBC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-01T07:33:27.587

在 onResume() 中注册一个 BroadcastReceiver 并覆盖它。记得在 onPause() 中取消注册

```
private class WiFiDirectBroadcastReceiver extends android.content.BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (WifiP2pManager.WIFI_P2P_STATE_CHANGED_ACTION.equals(action)) {
            //TODO
        } else if (WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION.equals(action)) {
            //TODO
        } else if (WifiP2pManager.WIFI_P2P_CONNECTION_CHANGED_ACTION.equals(action)) {
            //TODO
        } else if (WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION.equals(action)) {
            //TODO
        }
    }
} 
```

然后尝试先调用discoverPeers()

```
mWifiP2pManager.discoverPeers(Channel mChannel, ActionListener mActionListener); 
```

如果 discoverPeers() 确实找到了对等点，则会触发动作 WIFI_P2P_PEERS_CHANGED_ACTION。

我们可以在 BroadcastReceiver 的 WIFI_P2P_PEERS_CHANGED_ACTION 中调用 requestPeers()

```
mWifiP2pManager.requestPeers(Channel mChannel, WifiP2pManager.PeerListListener); 
```

所以我们的 BroadcastReceiver 现在看起来像这样

```
private class WiFiDirectBroadcastReceiver extends android.content.BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (WifiP2pManager.WIFI_P2P_STATE_CHANGED_ACTION.equals(action)) {
            //TODO
        } else if (WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION.equals(action)) {
            mWifiP2pManager.requestPeers(mChannel , pl);
        } else if (WifiP2pManager.WIFI_P2P_CONNECTION_CHANGED_ACTION.equals(action)) {
            //TODO
        } else if (WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION.equals(action)) {
            //TODO
        }
    }
} 
```

要实现[WifiP2pManager.PeerListListener](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.PeerListListener.html)，您需要覆盖 onPeersAvailable(WifiP2pDeviceList peers)

在 onPeersAvailable() 中，参数 wifiP2pDeviceList 表示你发现的对等点

我们需要一个 UI 对象来让我们选择要连接的设备，所以我在这里使用 spinner。

您也可以使用 listView 或其他东西。

```
private List<WifiP2pDevice> mPeers = new ArrayList<WifiP2pDevice>();
spinnerAdapter = new WiFiPeerListAdapter(this, R.layout.row_devices, mPeers);
...
@Override
public void onPeersAvailable(WifiP2pDeviceList wifiP2pDeviceList) {
    mPeers.clear();
    mPeers.addAll(wifiP2pDeviceList.getDeviceList());
    spinnerAdapter.notifyDataSetChanged();
} 
```

最后我们可以连接到设备

```
WifiP2pDevice device = spinnerAdapter.getItem((int) mSpinner.getSelectedItemId());
WifiP2pConfig config = new WifiP2pConfig();
config.deviceAddress = device.deviceAddress;
config.wps.setup = WpsInfo.PBC;
mWifiP2pManager.connect(mChannel, config, mActionListener); 
```

* * *

两个设备连接后，将触发 BroadcastReceiver 动作 WIFI_P2P_CONNECTION_CHANGED_ACTION。所以我们可以在这里做点什么。

我们的 BroadcastReceiver 现在看起来像

```
private class WiFiDirectBroadcastReceiver extends android.content.BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (WifiP2pManager.WIFI_P2P_STATE_CHANGED_ACTION.equals(action)) {
            //TODO
        } else if (WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION.equals(action)) {
            mWifiP2pManager.requestPeers(mChannel , pl);
        } else if (WifiP2pManager.WIFI_P2P_CONNECTION_CHANGED_ACTION.equals(action)) {
            NetworkInfo networkInfo = intent.getParcelableExtra(WifiP2pManager.EXTRA_NETWORK_INFO);
            if (networkInfo != null) {
                Log.d(TAG,networkInfo.toString());
                if (networkInfo.isConnected()) {
                    mWifiP2pManager.requestConnectionInfo(mChannel, WifiP2pManager.ConnectionInfoListener);
                }
            }
        } else if (WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION.equals(action)) {
            //TODO
        }
    }
} 
```

顺便说一句，登录操作 WIFI_P2P_CONNECTION_CHANGED_ACTION 会得到这样的结果

```
NetworkInfo: type: WIFI_P2P[], state: UNKNOWN/IDLE, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true, simId: 0 
```

现在我们需要实现[WifiP2pManager.ConnectionInfoListener](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ConnectionInfoListener.html)并为 requestConnectionInfo() 重写其抽象方法 onConnectionInfoAvailable(WifiP2pInfo info)

```
private WifiP2pInfo p2pInfo;
@Override
public void onConnectionInfoAvailable(final WifiP2pInfo info) {
    p2pInfo = info;
    mWifiP2pManager.requestGroupInfo(mChannel, WifiP2pManager.GroupInfoListener);
} 
```

我们再次需要实现 WifiP2pManager.GroupInfoListener 并覆盖 onGroupInfoAvailable(WifiP2pGroup group)

```
@Override
public void onGroupInfoAvailable(WifiP2pGroup wifiP2pGroup) {
    String log;
    if(wifiP2pGroup.isGroupOwner()) {
        log = "I am GO";
    }else{
        log = "I am not GO";
    }
    Log.d(TAG, log);
} 
```

现在我们几乎得到了关于这两款设备的所有信息

好好享受

# android - 如何知道音频何时开始在android中播放

> ID：10783031
> 
> 赞同：4
> 
> 时间：2012-05-28T10:21:37.517
> 
> 标签：android, media-player, audio-player, android-music-player

在我的应用程序中，我想在用户启动时获取音乐播放器的开始时间，在它停止时获取结束时间。我不想在我的应用程序中启动任何音乐播放器。我只想跟踪设备中的用户活动。所以我希望我的应用程序在用户开始播放音乐时收到任何通知。

我是否对音乐播放器启动和停止有任何意图？或者我是否对用户打开音乐文件有任何意图。

除了意图捕获用户启动音乐播放器的开始时间和时间之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:55:11.677

好吧，您可以实现接口[“AudioManager.OnAudioFocusChangeListener”](http://developer.android.com/reference/android/media/AudioManager.OnAudioFocusChangeListener.html)，其中有一个方法“onAudioFocusChange”，它可以让您知道音频焦点是否已更改，它还可以判断焦点是否获得或丢失。

请参阅[此](http://developer.android.com/training/managing-audio/audio-focus.html)链接，它详细解释了音频焦点。应用程序必须通过请求获得音频焦点，您可以实现“AudioManager.OnAudioFocusChangeListener”，如果有[焦点增益](http://developer.android.com/reference/android/media/AudioManager.html#AUDIOFOCUS_GAIN)，您可以检测媒体播放器是否正在运行，（因为其他一些应用程序，例如您的 Tube 可能会获得焦点到播放其音频），请参阅[此](http://ganeshtiwaridotcomdotnp.blogspot.com/2011/10/android-code-for-detecting-if-specific.html)内容以了解如何检测当前正在运行的应用程序或服务。您可以查看音频是否已开始播放，以及是否是媒体播放器。

希望这可以帮助。这是一个有趣的问题，我在寻找答案的过程中学到了一些新东西！

# java - 在 tomcat 和 web-app 之间共享用户角色

> ID：10783034
> 
> 赞同：1
> 
> 时间：2012-05-28T10:21:48.573
> 
> 标签：java, apache, tomcat, jsf-2

如何在我的网络应用程序中以编程方式知道当前登录到部署应用程序的 tomcat 的用户的用户名和密码或用户角色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T12:14:53.577

此信息可通过[`HttpServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)并且固有地因此也可用[`ExternalContext`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html)。

可以使用以下方法：

```
String username = externalContext.getRemoteUser();
UserPrincipal principal = externalContext.getUserPrincipal();
boolean admin = externalContext.isUserInRole("ADMIN"); 
```

出于安全原因，您无法以任何方式获取密码。

请注意，在 EL`HttpServletRequest`中可用。`#{request}`所以以下也应该是可能的：

```
<p>Welcome, #{request.remoteUser}</p>

<h:panelGroup id="adminPanel" rendered="#{request.isUserInRole('ADMIN')}">
    ...
</h:panelGroup> 
```

# jquery - jquery验证html（删除h1标签内的p标签等）删除标签保留内容

> ID：10783037
> 
> 赞同：0
> 
> 时间：2012-05-28T10:21:51.140
> 
> 标签：jquery, html, tags

任何人都可以帮我处理这个 jquery，我需要删除其他标签内的标签，例如，如果 ap 标签在 h1 标签内，则删除 p 标签但保留内容，我尝试了几种方法，但我能想出的最好方法是也删除内容

```
$("#textEditor").contents().find("h1:has(p)").find("p").remove(); 
```

编辑这里是我想验证的标记

```
 <h1>This is an example <strong> of bad markup</strong> 
<p>need to remove these p tags but keep content</p></h1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:23:13.850

用于`unwrap()`删除标签，但将其内容保留在 DOM 中。`contents()`此外，您不需要调用该函数。

```
$("#textEditor").find("h1:has(p)").find("p").unwrap(); 
```

[有关 unwrap() 的更多详细信息](http://api.jquery.com/unwrap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:02:23.020

谢谢我刚刚解决了

```
 $("#textEditor").contents().find("h1:has(p)").find("p").contents().unwrap(); 
```

感谢您指出展开，因为#textEditor 在 iframe 中，所以需要内容

# coldfusion - structClear(session) 与 sessionInvalidate() 有何不同？

> ID：10783038
> 
> 赞同：2
> 
> 时间：2012-05-28T10:21:54.007
> 
> 标签：coldfusion

这可能是一个愚蠢的问题，但我想知道ColdFusion 10 中添加`structClear(session)`的功能到底有什么区别？`sessionInvalidate()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T12:08:23.440

[根据将 SessionInvalidate 函数反向移植到以前版本的](http://misterdai.wordpress.com/2012/03/12/coldfusion-10-backport-sessioninvalidate/)戴先生所说，它执行的不仅仅是调用`StructClear`，而且`onSessionEnd`在此之前和`coldfusion.runtime.sessionTracker.cleanup`之后调用。

更多详情请访问： http: [//misterdai.wordpress.com/2012/03/12/coldfusion-10-backport-sessioninvalidate/](http://misterdai.wordpress.com/2012/03/12/coldfusion-10-backport-sessioninvalidate/)

*这些方法都没有*做的 事情，值得注意的是，如果 CF 设置为“使用 J2EE 会话变量”，它们不会使会话无效（因为这由底层 servlet 引擎控制，而不是由 CF 控制）

# django - django-taggit 从查询集创建 tagcloud

> ID：10783039
> 
> 赞同：3
> 
> 时间：2012-05-28T10:21:59.200
> 
> 标签：django, django-queryset, django-taggit

我找不到答案。所以这是我的问题。对于一个新项目，我想使用[django-taggit](https://github.com/alex/django-taggit)。

有人对如何根据当前查询集创建标签云有建议吗？

期望的行为是从未过滤的列表“开始” - 然后允许通过应用过滤器和标签来缩小结果范围。在开始标签云显示例如 50 个最常见的标签。选择标签（或其他标准）后，标签云应该只显示剩余的可能性。

我知道[django-tagging](https://github.com/brosner/django-tagging)针对这种情况提供了**Tag.objects.usage_for_queryset() 。**但我更喜欢使用“-taggit”而不是“-tagging”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T17:41:28.100

[django-taggit-templatetags](https://github.com/feuervogel/django-taggit-templatetags/)似乎是 django-taggit 的 tagcloud 的“首选”位置。

不过，它似乎无法处理查询集。:(

所以，我添加了：

```
@register.inclusion_tag('taggit_templatetags/tagcloud_include_qs.html')
def include_tagcloud_qs(queryset):
    try:
        queryset = queryset.annotate(num_times=Count('taggeditem_items'))
    except FieldError:
        queryset = queryset.annotate(num_times=Count('taggit_taggeditem_items'))

    num_times = queryset.values_list('num_times', flat=True)

    weight_fun = get_weight_fun(T_MIN, T_MAX, min(num_times), max(num_times))
    queryset = queryset.order_by('name')
    for tag in queryset:
        tag.weight = weight_fun(tag.num_times)

    return {"tags": queryset} 
```

至

```
templatetags/taggit_extras.py 
```

这到 taggit_templatetags/tagcloud_include_qs.html 的新文件

```
<div>
{% for tag in tags %}
<font size={{tag.weight|floatformat:0}}>{{tag}}</font> 
{% endfor %}
</div> 
```

我在我的模板中这样使用它：

```
{% include_tagcloud_qs my_queryset %} 
```

我没有花太多时间查看 django-taggit-templatetags 代码，所以请随时用更好的解决方案更新它！

PS：

我在我的视图中得到一个查询集，如下所示：

```
my_queryset = Tag.objects.filter(foo__bar=baz).distinct() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T22:51:26.210

[这个答案](https://stackoverflow.com/questions/5228119/creating-a-tag-cloud-from-a-list-in-django)显示了如何构建标签云。您将根据您的参数在视图中创建一个查询集，生成一个字典，并将其呈现在您的模板中，如该答案所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:27:32.543

我建议使用 django-tagging。这是有据可查的。我用它创建了标签云。您可以通过易于加载的模板标签通过模型、模型实例等访问标签云。这有点骇人听闻，但是使用 .counts 方法，您可以修改一些 css 来增加每种字体的大小，就像您在真实的标签云中看到的那样。Django 标记实际上在这方面表现出色，因为它有一个默认模板标记，其中包含您所描述的所有内容的格式选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T01:58:33.017

我在[https://github.com/twig/django-taggit/commit/42cd4e04f00496103f295c0afd8297074be50dcf添加了一个 TagBase.get_for() 函数](https://github.com/twig/django-taggit/commit/42cd4e04f00496103f295c0afd8297074be50dcf)

这基本上获取用于给定查询集的标签，然后您可以从那里做您需要做的事情。

# android - Facebook评论框未显示在Android webview中

> ID：10783040
> 
> 赞同：7
> 
> 时间：2012-05-28T10:22:00.777
> 
> 标签：android, facebook, webview

在 HTML 文件中，我使用了 Facebook 社交评论插件，它运行良好，但是当我尝试使用 webview 在 android 中显示相同的文件时，它只显示评论而不是评论框，并且显示一个按钮“登录 facebook 发布评论”。当我尝试通过单击该按钮而不是显示评论框来登录时；该页面正在重定向到 facebook 个人资料。请帮助...

这是代码：

HTML 代码：

```
 <head>
 <meta content='website' property='og:type'/>
 <meta content='http://graph.facebook.com/username' property='fb:admins'/>
 <meta content='http://example.com/test.html' property='og:site_name'/>
 <meta content='415944175093180' property='fb:app_id'/>
 <meta content='Browser Detect' property='og:title'/>
 <meta content='Tells about Early days' property='og:description'/>
 <meta content='http://example.com/test.html' property='og:url'/>
 <meta content='http://example.com/test.html' property='og:image'/>
 </head>
 <body>
 <div id="fb-root"></div>
 <script>
 window.fbAsyncInit = function() {
    FB.init({
    appId: '415944175093180', status: true, cookie: true, xfbml: true,oauth: true}); };
    (function() {
    var e = document.createElement('script');
    e.type = 'text/javascript';
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    e.async = true;
    document.getElementById('fb-root').appendChild(e);
  }());

  (function(d){
  var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  ref.parentNode.insertBefore(js, ref);
  }(document));
  </script> 
  <fb:comments href="http://example.com/test.html" num_posts="20" width="470" />    
  </body> 
```

安卓代码：

公共类 SimpleActivity 扩展 Activity {

```
WebView web1;

ViewPager awesomePager;
    Context cxt;
    List<WebView> data;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    cxt = this;
    data = new ArrayList<WebView>();

    awesomePager = (ViewPager) findViewById(R.id.viewPager);
    awesomePager.setOffscreenPageLimit(10);

    WebView web1 = new WebView(cxt);
    web1.loadUrl("http://example.com/test.html");
            WebSettings webSettings1 = web1.getSettings();

            webSettings1.setJavaScriptEnabled(true);

    data.add(web1);
            awesomePager.setAdapter(new AwesomePagerAdapter(this,data)); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:07:00.027

可能是在“标准”html中，使用网络浏览器，会话被保存了一些，这样你就可以登录到facebook，你可以作为登录用户发表评论，即使你关闭浏览器并启动它再次启动（cookies、“让我保持登录状态等）。

另一方面，Android 浏览器可能不会缓存/保存会话，应用程序可能已被终止，等等。所以你不太可能有一个“永远在线”的会话。

当然，facebook 会识别这一点并向您显示登录表单，因为您不能以匿名用户的身份发表评论。

AFAIK 一种解决方案是使用[Facebook API](http://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CIcBEIwQMAI&url=http://developers.facebook.com/docs/reference/php/facebook-api/&ei=rP4PUNi7LM-GhQfQhIGACA&usg=AFQjCNGlpIhhPTNe9nrSxq1f_8A6AAmxkg&sig2=CztMsDsnG0kzduNxzzztTA)而不是 Javascript 登录，以便您的应用程序永久获得授权，以登录用户身份访问用户数据/发表评论。

# javascript - 使用javascript计算宽度并调整css

> ID：10783042
> 
> 赞同：0
> 
> 时间：2012-05-28T10:22:04.757
> 
> 标签：javascript, jquery, css

我正在使用 javascript 计算宽度`#red`和`#yellow`css 来设计。是`html`：

```
<div id="gray">
   <div id="red"></div>
   <div id="yellow"></div>
</div>

<style>
  #gray {
    width:100px;
  }
  #red {
    background-color:red;
    float: left;
  }
  #yellow {
    background-color: yellow;
    float:left;
  }
</style> 
```

宽度以百分比计算以填充 的颜色`#gray`。显示是正确的，直到宽度之`#red`和`#yellow`小于或等于`100%`as 因为我已经考虑了`div` `#gray`as `100% width`。如果总和超过 100%，则颜色条显示为两行。当总和超过 100% 时，是否可以计算宽度，以便`#gray`条形与可能的虚线一起出现在一条线上，作为`100% width`超出的指标。请问我是否不清楚我的意思。基本上我希望两者都`#yellow`在`#red`同一行，而不是低于其他

**编辑 ：**

```
config.hourPerPercent=parseInt(data.totalspace)/100;
var futureNum=new Number((1/config.hourPerPercent)*parseInt(data.inuse));
var recNum=new Number((1/config.hourPerPercent)*parseInt(data.used));

config.Usage=futureNum.toFixed(2);              
config.Used=recNum.toFixed(2);

$('#red').css('width',config.Used+'%');         
$('#yellow').css('width',config.Usage+'%'); 
```

宽度随着数据的变化而动态变化，并在数据有任何变化时计算。我在下面附上了三张图片，这样可以很容易地理解我的意思。对于第一张图像，宽度的总和大于 100%，`#yellow`如下所示`#red`。绿色背景是 的宽度`#gray`。我希望当宽度的总和增加 100% 时`#yellow`不应低于`#red`它，而是应该像第二张图像一样，带有视觉指示的点可能像第三张图像一样在 100% 限制被交叉的点处出现虚线。希望这有助于解释我的问题。

![这是<code>#red</code>和<code>#yellow</code>的宽度之和大于100%的情况](../Images/9f2a4a89c9a7e8f602c91d6a4572e8f5.png)

![这是当宽度 0f <code>#red</code> 和 <code>#yellow</code> 之和等于 100% 时](../Images/4862e653ce1f2012dd6a81f500681218.png)

![最终输出显示](../Images/717135af0ca353ac59febeba36221446.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:35:27.280

```
<div id="gray">
   <div id="red"></div>
   <div id="yellow"></div>
</div> 
```

jQuery 将是`place it inside $(document).ready()`

```
var w_red=$("#red").outerWidth(true);
var w_yellow=$("#yellow").outerWidth(true);
$("#gray").width(w_red+w_yellow); 
```

根据您的**更新**

```
config.hourPerPercent=parseInt(data.totalspace)/100;
var futureNum=new Number((1/config.hourPerPercent)*parseInt(data.inuse));
var recNum=new Number((1/config.hourPerPercent)*parseInt(data.used));

config.Usage=futureNum.toFixed(2);              
config.Used=recNum.toFixed(2);
var factor=1.0;
if( (config.Usage + config.Used)>100 )
{
 factor=(config.Usage + config.Used)/100;
 config.Usage= Math.round(config.Usage / factor);
 config.Used=100-config.Usage;
}

$('#red').css('width',config.Used+'%');         
$('#yellow').css('width',config.Usage+'%'); 
```

这样就会有+/-1的误差。但它要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:45:17.147

我做了以下方式：

```
config.hourPerPercent=parseInt(data.totalspace)/100;
var futureNum=new Number((1/config.hourPerPercent)*parseInt(data.inuse));
var recNum=new Number((1/config.hourPerPercent)*parseInt(data.used));

config.Usage=futureNum.toFixed(2);              
config.Used=recNum.toFixed(2);

var rem=Math.round(100-(futureNum + recNum));
if(rem<0){
    $('#red').css('width',config.Used+'px');            
    $('#yellow').css('width',config.Usage+'px');
    $('#gray').css('width',(futureNum + recNum)+'px');
}else{
    $('#red').css('width',config.Used+'%');         
    $('#yellow').css('width',config.Usage+'%');
} 
```

任何更好的建议将不胜感激。

# c++ - RoundRect 的圆角边缘不平滑

> ID：10783043
> 
> 赞同：1
> 
> 时间：2012-05-28T10:22:06.090
> 
> 标签：c++, winapi, gdi

![圆角矩形](../Images/4745c1adf7873b7fea08b120386cf425.png) 我正在使用 RoundRect windows API 绘制圆角矩形。

```
RoundRect(hdc,0,0,100,100,4,4); 
```

在这里，我正在绘制圆角宽度和高度 = 4 px 的矩形。

之后我想填充圆角矩形。为此，我正在使用创建矩形区域

```
CreateRoundRectRgn 
```

然后调用 FillRgn API。

问题是填充后我也可以看到圆角外的填充颜色。由于我正在创建圆形区域，因此填充应该只在该区域内。

任何想法为什么它会在圆角矩形之外？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T16:06:27.950

`RoundRect`已经使用当前画笔填充了矩形。只需使用`SelectObject`来选择你想要的画笔。

这使得以下观察有些多余。 `RoundRect`并`CreateRoundRectRgn`以不同的方式解释坐标。 `RoundRect`的坐标是包含`CreateRoundRectRgn`的，但在右下角是排他的（因此在后一种情况下，您必须在右下角坐标中添加一个）。

而且由于 Windows 不提供获取与圆角矩形内部相对应的区域的功能，因此如果您自己填充它，您将永远无法获得像素完美的精度（圆角矩形的内部与稍微较小的圆角矩形）。

# tsql - 应用 T-SQL...回到基础

> ID：10783044
> 
> 赞同：0
> 
> 时间：2012-05-28T10:22:09.710
> 
> 标签：tsql

IM 对 TSQL 非常陌生，并且正在了解存储过程等。

我正在使用代码在我的数据库中的一个表中查找一个值，但我不太确定我将如何使用此代码...

我需要用我的相关表或列名替换所有 @* 还是简单地复制粘贴并执行

谢谢您的帮助

[如何在 SQL Server 数据库中的任何位置找到值？](https://stackoverflow.com/questions/436351/how-do-i-find-a-value-anywhere-in-a-sql-server-database)

```
CREATE PROC SearchAllTables 
(@SearchStr nvarchar(100) ) AS BEGIN  
-- Copyright © 2002 Narayana Vyas Kondreddi. All rights reserved. 
-- Purpose: To search all columns of all tables for a given search string 
-- Written by: Narayana Vyas Kondreddi 
-- Site: http://vyaskn.tripod.com 
-- Tested on: SQL Server 7.0 and SQL Server 2000 
-- Date modified: 28th July 2002 22:50 GMT  
DECLARE @Results 
TABLE(ColumnName nvarchar(370), ColumnValue nvarchar(3630))  
SET NOCOUNT ON  

DECLARE @TableName nvarchar(256), @ColumnName nvarchar(128), @SearchStr2 nvarchar(110) 
SET  @TableName = '' 
SET @SearchStr2 = QUOTENAME('%' + @SearchStr + '%','''')  
WHILE @TableName IS NOT NULL 
BEGIN     
SET @ColumnName = ''     
SET @TableName =      (SELECT MIN(QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME))         
FROM    INFORMATION_SCHEMA.TABLES         
WHERE       TABLE_TYPE = 'BASE TABLE'             
AND QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME) > @TableName             
AND OBJECTPROPERTY(OBJECT_ID(QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME)), 'IsMSShipped') = 0)      
WHILE (@TableName IS NOT NULL) 
AND (@ColumnName IS NOT NULL)     
BEGIN         
SET @ColumnName =(SELECT MIN(QUOTENAME(COLUMN_NAME))             
FROM    INFORMATION_SCHEMA.COLUMNS             
WHERE       TABLE_SCHEMA    = PARSENAME(@TableName, 2)                 
AND TABLE_NAME  = PARSENAME(@TableName, 1)                 
AND DATA_TYPE IN ('char', 'varchar', 'nchar', 'nvarchar')                 
AND QUOTENAME(COLUMN_NAME) > @ColumnName)          
IF @ColumnName IS NOT NULL         
BEGIN             
INSERT INTO @Results             
EXEC             
('SELECT ''' + @TableName + '.' + @ColumnName + ''', LEFT(' + @ColumnName + ', 3630)                  
FROM ' + @TableName + ' (NOLOCK) ' + ' WHERE ' + @ColumnName + ' LIKE ' + @SearchStr2)         
END     
END  
END  
SELECT ColumnName, ColumnValue 
FROM @Results 
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:15:51.260

好吧，回答你的问题：

首先，您必须将代码复制到查询窗口并运行它。这将创建存储过程。

现在您可以通过调用来调用存储过程：

```
EXEC SearchAllTables 'a string of your choice' 
```

请注意，您只会从文本列中获得命中（如“char”、“varchar”、“nchar”、“nvarchar”）。

# .net - WebClient - 如何阻止 UI

> ID：10783045
> 
> 赞同：0
> 
> 时间：2012-05-28T10:22:11.777
> 
> 标签：.net, multithreading, windows-phone-7.1, webclient

当我在墓碑中的应用程序时，我需要等到`WebClient` `UploadStringAsync`在被墓碑之前返回响应。我试图通过阻塞 UI 线程几秒钟来实现它，但我注意到，当 UI 被阻塞时，没有响应。当我释放锁时（无论是`Thread.sleep`还是`ManualResetEvent`），在同一时刻都会有响应。当然，`UploadStringAsync`并且`UploadStringCompleted`在 UI 以外的线程上工作。也许您会知道这些行为的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:42:59.147

你不能也不应该这样做：

当应用程序被停用时，您不能无限期地阻止，因为操作系统不允许您，您可能必须无限期地更新，因为无法判断网络请求需要多长时间，甚至可能。

相反，您应该在应用程序正常使用期间的适当时间（或多次）向您的 Web 服务器提交数据。如果您想在停用期间保存特定状态，您应该保留它（根据需要），然后在重新激活或重新启动应用程序时发送它（再次根据数据的类型和相关性酌情发送）。

# sql - 选择一个等于或大于前一个值的值区间

> ID：10783046
> 
> 赞同：1
> 
> 时间：2012-05-28T10:22:11.947
> 
> 标签：sql

我的问题是我没有得到间隔中的第一个值。

表1中递增区间的值为Id1-Id3、Id4-Id5、Id9-Id13和Id14-Id15，但结果i表2为Id2-Id3、Id5、Id10-Id13和Id 15缺少Id1、Id4， Id9 和 Id14。

我只是不知道如何获取查询中包含的第一个值。

包含数据源的 PSS 表：

```
ID  Date    Value

1   2012-04-20 0,166666666666667
2   2012-04-25 0,2
3   2012-04-28 0,235294117647059
4   2012-05-05 0,111111111111111
5   2012-05-07 0,416666666666667
6   2012-05-08 0,25
7   2012-05-09 0,166666666666667
8   2012-05-10 0,142857142857143
9   2012-05-11 0,125
10  2012-05-12 0,375
11  2012-05-13 0,5
12  2012-05-14 0,625
13  2012-05-15 0,75
14  2012-05-16 0,625
15  2012-05-17 0,75 
```

这个查询：

```
SELECT Id, Date, Value
FROM PSS p
WHERE p.Value >=
(SELECT Value
FROM PSS
WHERE Id = p.Id-1) 
```

产生表 2：

```
Id  Date    Value

2   2012-04-25 0,2
3   2012-04-28 0,235294117647059
5   2012-05-07 0,416666666666667
10  2012-05-12 0,375
11  2012-05-13 0,5
12  2012-05-14 0,625
13  2012-05-15 0,75
15  2012-05-17 0,75 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:12:53.053

尝试这个

```
select id, date, value 
from PSS p1
where value >= (select p2.amount from PSS p2 where p2.id=p1.id - 1) 
      or value <= (select p3.amount from PSS p3 where P3.id=p1.id + 1) 
```

# java - 如何访问嵌套类的成员，该成员被外部类的成员隐藏

> ID：10783048
> 
> 赞同：6
> 
> 时间：2012-05-28T10:22:17.183
> 
> 标签：java, inner-classes, ambiguous

我有一个源代码生成器，它可能会生成以下类型的代码（只是一个例子）：

```
public class Outer {
    public static final Object Inner = new Object();

    public static class Inner {
        public static final Object Help = new Object();
    }

    public static void main(String[] args) {
        System.out.println(Outer.Inner.Help);
        //                             ^^^^ Cannot access Help
    }
} 
```

在上面的例子中，`Inner`在`Outer`. `Outer.Inner`既可以是嵌套类，也可以是静态成员。似乎`javac`Eclipse 和 Eclipse 编译器都无法取消引用`Outer.Inner.Help`。我怎样才能访问`Help`？

记住，上面的代码是生成的，所以重命名不是一个（简单的）选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T10:48:20.030

以下对我有用（带有关于以非静态方式访问静态成员的警告）：

```
public static void main(String[] args) {
    System.out.println(((Inner)null).Help);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:27:58.473

怎么样

```
public static void main(String[] args) {
    System.out.println(new Inner().Help);
} 
```

# c# - 使用 DbContext API 添加和删除多对多

> ID：10783051
> 
> 赞同：3
> 
> 时间：2012-05-28T10:22:43.563
> 
> 标签：c#, asp.net, .net, entity-framework-4, dbcontext

我正在使用 Entity Framework 和 DbContext API 确实构建了我的应用程序，但我在处理具有多对多关系的对象时遇到了麻烦。简化的保存方法可能如下所示

```
public void MyObj_Save(MyObj myobj)
{
  DbContext.Entry(myobj).State = EntityState.Added;
  DbContext.SaveChanges();
} 
```

此代码工作正常，但如果 MyObj 包含多对多关系，则不会保存。我通过使用旧的 POCO API 知道，我需要将相关对象附加到上下文，但我找不到使用 DbContext API 正确执行此操作的方法 - 下面是一个简化示例

```
public void MyObj_Save(MyObj myobj, List<OtherObj> otherObjList)
{
  foreach (OtherObj otherObj in otherObjList)
  {
    DbContext.OtherObj.Attach(otherObj);
    myobj.OtherObj.Add(otherObj);
  }

  DbContext.Entry(myobj).State = EntityState.Added;
  DbContext.SaveChanges();
} 
```

我没有收到错误，但关系没有保存。该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:54:47.937

我引用你的（重要的！）评论：

> 我发送给该方法的对象已**附加并且 EntityState 是 Unchanged**。我的 DbContext 的配置是，我**禁用了 AutoDetectChangesEnabled** ...

因此，您的代码将如下所示：

```
DbContext.Configuration.AutoDetectChangesEnabled = false;

DbContext.Entry(myobj).State = EntityState.Unchanged;
foreach (OtherObj otherObj in otherObjList)
    DbContext.Entry(otherObj).State = EntityState.Unchanged;

// entering MyObj_Save method here
foreach (OtherObj otherObj in otherObjList)
{
    //DbContext.OtherObj.Attach(otherObj); // does not have an effect
    myobj.OtherObj.Add(otherObj);
}

DbContext.Entry(myobj).State = EntityState.Added;
DbContext.SaveChanges(); 
```

这确实不起作用，因为 EF 没有注意到您已经更改了与行中`myobj`的列表之间的关系，因为您禁用了自动更改检测。因此，不会将任何条目写入连接表。只有自己会得救。`OtherObj``myobj.OtherObj.Add(otherObj);``myobj`

您不能在实体上设置任何状态以将状态管理器置于保存关系的状态，因为它不是此处重要的实体状态而是关系状态。这些是对象状态管理器中的单独条目，由更改检测创建和维护。

我看到三个解决方案：

*   放`DbContext.Configuration.AutoDetectChangesEnabled = true;`

*   `DetectChanges`手动调用：

    ```
    //...
    DbContext.Entry(myobj).State = EntityState.Added;
    DbContext.ChangeTracker.DetectChanges();
    DbContext.SaveChanges(); 
    ```

*   `myobj`在将新内容设置为状态之前将其从上下文中分离出来`Added`（这对我来说感觉很hacky）：

    ```
    // entering MyObj_Save method here
    DbContext.Entry(myobj).State = EntityState.Detached;
    foreach (OtherObj otherObj in otherObjList)
    //... 
    ```

也许有可能 - 通过`ObjectContext`通过`IObjectContextAdapter`- 手动修改对象状态管理器中的关系条目，但我不知道如何。

在我看来，手动操作实体（和关系）状态的过程不是您应该使用 EF 的方式。`AutoDetectChangesEnabled`已引入以使使用 EF 更轻松、更安全，唯一推荐禁用它的情况是高性能要求（例如对于批量插入）。如果您在不需要的情况下禁用自动更改检测，则会遇到此类难以检测的问题，并且需要对 EF 的内部工作原理有深入了解才能修复这些错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T16:55:36.020

```
public void MyObj_Save(MyObj myobj, List<OtherObj> otherObjList)
{
    DbContext.Entry(myobj).State = EntityState.Added;

    foreach (OtherObj otherObj in otherObjList)
    {
        (((System.Data.Entity.Infrastructure.IObjectContextAdapter)DbContext)
            .ObjectContext)
            .ObjectStateManager
            .ChangeRelationshipState(myobj, otherObj,
                q => q.OtherObjs, EntityState.Added);
    }

    DbContext.SaveChanges();
} 
```

同样，这是一个简化的例子，而不是现实生活中的例子！

# android - 拉动刷新Android中的GridView

> ID：10783054
> 
> 赞同：6
> 
> 时间：2012-05-28T10:23:01.370
> 
> 标签：android, gridview, pull-to-refresh

首先，我想告诉你们，我已经阅读并成功开发了 Pull to refresh 使用[Chris Banes 库](https://github.com/chrisbanes/Android-PullToRefresh/)和[Johan Nilsson 库](https://github.com/johannilsson/android-pulltorefresh)。

现在我正在尝试使用 GridView 的 Johan Nilsson 库。他只为 ListView 实现，所以我必须修改[PullToRefreshListView](https://github.com/johannilsson/android-pulltorefresh/blob/master/pulltorefresh/src/com/markupartist/android/widget/PullToRefreshListView.java) JAVA 文件。

我有扩展`GridView`而不是`ListView`（第 24 行）。**然后它会通过说addHeaderView(mRefreshView);**在第 109 行给我一个错误。无法识别并将其更改为**addView()**但`addView()`方法也会给我运行时错误。

我将使用 Johan Nilsson 库，因为它让我有机会向我的 Activity 添加更多表单小部件并轻松自定义设计而不是其他库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:30:53.643

[这](https://github.com/chrisbanes/Android-PullToRefresh/)就是你要找的

![在此处输入图像描述](../Images/7b50531e12895c0b2aec562b0984f4e7.png)

> 适用于所有 AbsListView。我已经实现了 ListView 和[GridView](https://github.com/chrisbanes/Android-PullToRefresh/blob/master/sample/src/com/handmark/pulltorefresh/sample/PullToRefreshGridActivity.java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T07:46:16.240

GridView doesn't support HeaderView. But Google implemented their own GridView, they use it only for internal purposes. This can solve your problem [HeaderView](https://android.googlesource.com/platform/packages/apps/Gallery2/+/idea133/src/com/android/photos/views/HeaderGridView.java)

# php - php替换和连接

> ID：10783058
> 
> 赞同：0
> 
> 时间：2012-05-28T10:23:16.073
> 
> 标签：php, replace, concat

我需要替换和连接随机字符串中的一些值，我将这些值存储在一个数组中。

**IE**

```
$search = array('dog', 'tree', 'forest', 'grass');
$randomString = "A dog in a forest"; 
```

如果一个或多个数组值与随机字符串匹配，那么我需要这样的替换：

```
$replacedString = "A @dog in a @forest"; 
```

有人能帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T10:28:45.367

```
foreach (explode(' ', $randomString) as $word) {
  $replacedString .= in_array($word, $search) ? "@$word " : "$word ";
}

echo $replacedString;  // A @dog in a @forest 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:30:41.390

```
foreach($search as $word)
{
  $randomString = str_replace($word,"@".$word,$randomString);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:33:45.343

不确定我是否理解您要正确执行的操作，但请查看[str_replace()](http://php.net/manual/en/function.str-replace.php)函数

并尝试类似的东西

```
foreach($search as $string)
{
    $replacement[] = "@".$search;
}

$new_string = str_replace($search, $replacement, $randomString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T10:29:35.643

这应该适合你：

```
$words = explode(" ", $randomString);

foreach($words as $word){
   if(in_array($word, $search)){
      $word = "@$word";
   }
}

$replacedString = implode(" ", $words); 
```

# dropwizard - 如何使用 Dropwizard 测试 HMAC 身份验证？

> ID：10783060
> 
> 赞同：5
> 
> 时间：2012-05-28T10:23:24.927
> 
> 标签：dropwizard

我刚刚开始使用 Dropwizard 0.4.0，我想要一些有关 HMAC 身份验证的帮助。有人有什么建议吗？

先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T12:49:24.810

目前 Dropwizard 不支持开箱即用的 HMAC 身份验证，因此您必须编写自己的身份验证器。HMAC 身份验证的典型选择是使用 HTTP 授权标头。以下代码要求此标头采用以下格式：

```
Authorization: <algorithm> <apiKey> <digest> 
```

一个例子是

```
Authorization: HmacSHA1 abcd-efgh-1234 sdafkljlkansdaflk2354jlkj5345345dflkmsdf 
```

摘要是在 URL 编码之前从正文（编组实体）的内容构建的，其中 HMAC 共享密钥附加为 base64。对于非正文请求，例如 GET 或 HEAD，内容被视为完整的 URI 路径和附加密钥的参数。

要以 Dropwizard 可以使用的方式实现这一点，您需要将`dropwizard-auth`模块中存在的 BasicAuthenticator 代码复制到您自己的代码中，并使用以下内容对其进行修改：

```
import com.google.common.base.Optional;
import com.sun.jersey.api.core.HttpContext;
import com.sun.jersey.server.impl.inject.AbstractHttpContextInjectable;
import com.yammer.dropwizard.auth.AuthenticationException;
import com.yammer.dropwizard.auth.Authenticator;

import javax.ws.rs.WebApplicationException;
import javax.ws.rs.core.HttpHeaders;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

class HmacAuthInjectable<T> extends AbstractHttpContextInjectable<T> {
  private static final String PREFIX = "HmacSHA1";
  private static final String HEADER_VALUE = PREFIX + " realm=\"%s\"";

  private final Authenticator<HmacCredentials, T> authenticator;
  private final String realm;
  private final boolean required;

  HmacAuthInjectable(Authenticator<HmacCredentials, T> authenticator, String realm, boolean required) {
    this.authenticator = authenticator;
    this.realm = realm;
    this.required = required;
  }

  public Authenticator<HmacCredentials, T> getAuthenticator() {
    return authenticator;
  }

  public String getRealm() {
    return realm;
  }

  public boolean isRequired() {
    return required;
  }

  @Override
  public T getValue(HttpContext c) {

    try {
      final String header = c.getRequest().getHeaderValue(HttpHeaders.AUTHORIZATION);
      if (header != null) {

        final String[] authTokens = header.split(" ");

        if (authTokens.length != 3) {
          // Malformed
          HmacAuthProvider.LOG.debug("Error decoding credentials (length is {})", authTokens.length);
          throw new WebApplicationException(Response.Status.BAD_REQUEST);
        }

        final String algorithm = authTokens[0];
        final String apiKey = authTokens[1];
        final String signature = authTokens[2];
        final String contents;

        // Determine which part of the request will be used for the content
        final String method = c.getRequest().getMethod().toUpperCase();
        if ("GET".equals(method) ||
          "HEAD".equals(method) ||
          "DELETE".equals(method)) {
          // No entity so use the URI
          contents = c.getRequest().getRequestUri().toString();
        } else {
          // Potentially have an entity (even in OPTIONS) so use that
          contents = c.getRequest().getEntity(String.class);
        }

        final HmacCredentials credentials = new HmacCredentials(algorithm, apiKey, signature, contents);

        final Optional<T> result = authenticator.authenticate(credentials);
        if (result.isPresent()) {
          return result.get();
        }
      }
    } catch (IllegalArgumentException e) {
      HmacAuthProvider.LOG.debug(e, "Error decoding credentials");
    } catch (AuthenticationException e) {
      HmacAuthProvider.LOG.warn(e, "Error authenticating credentials");
      throw new WebApplicationException(Response.Status.INTERNAL_SERVER_ERROR);
    }

    if (required) {
      throw new WebApplicationException(Response.status(Response.Status.UNAUTHORIZED)
        .header(HttpHeaders.AUTHORIZATION,
          String.format(HEADER_VALUE, realm))
        .entity("Credentials are required to access this resource.")
        .type(MediaType.TEXT_PLAIN_TYPE)
        .build());
    }
    return null;
  }
} 
```

以上内容并不完美，但可以帮助您入门。您可能需要参考[MultiBit Merchant 候选发布源代码](https://github.com/gary-rowe/MultiBitMerchant/tree/develop/mbm/src/main/java/org/multibit/mbm/auth/hmac)（MIT 许可证）以获取更新的版本和各种支持类。

下一步是将身份验证过程集成到您的`ResourceTest`子类中。不幸的是，Dropwizard 在 v0.4.0 中没有为身份验证提供程序提供一个好的入口点，因此您可能需要引入自己的基类，类似于以下内容：

```
import com.google.common.collect.Lists;
import com.google.common.collect.Sets;
import com.sun.jersey.api.client.Client;
import com.sun.jersey.test.framework.AppDescriptor;
import com.sun.jersey.test.framework.JerseyTest;
import com.sun.jersey.test.framework.LowLevelAppDescriptor;
import com.xeiam.xchange.utils.CryptoUtils;
import com.yammer.dropwizard.bundles.JavaBundle;
import com.yammer.dropwizard.jersey.DropwizardResourceConfig;
import com.yammer.dropwizard.jersey.JacksonMessageBodyProvider;
import com.yammer.dropwizard.json.Json;
import org.codehaus.jackson.map.Module;
import org.junit.After;
import org.junit.Before;
import org.multibit.mbm.auth.hmac.HmacAuthProvider;
import org.multibit.mbm.auth.hmac.HmacAuthenticator;
import org.multibit.mbm.persistence.dao.UserDao;
import org.multibit.mbm.persistence.dto.User;
import org.multibit.mbm.persistence.dto.UserBuilder;

import java.io.UnsupportedEncodingException;
import java.security.GeneralSecurityException;
import java.util.List;
import java.util.Set;

import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;

/**
* A base test class for testing Dropwizard resources.
*/
public abstract class BaseResourceTest {
  private final Set<Object> singletons = Sets.newHashSet();
  private final Set<Object> providers = Sets.newHashSet();
  private final List<Module> modules = Lists.newArrayList();

  private JerseyTest test;

  protected abstract void setUpResources() throws Exception;

  protected void addResource(Object resource) {
    singletons.add(resource);
  }

  public void addProvider(Object provider) {
    providers.add(provider);
  }

  protected void addJacksonModule(Module module) {
    modules.add(module);
  }

  protected Json getJson() {
    return new Json();
  }

  protected Client client() {
    return test.client();
  }

  @Before
  public void setUpJersey() throws Exception {
    setUpResources();
    this.test = new JerseyTest() {
      @Override
      protected AppDescriptor configure() {
        final DropwizardResourceConfig config = new DropwizardResourceConfig();
        for (Object provider : JavaBundle.DEFAULT_PROVIDERS) { // sorry, Scala folks
          config.getSingletons().add(provider);
        }
        for (Object provider : providers) {
          config.getSingletons().add(provider);
        }
        Json json = getJson();
        for (Module module : modules) {
          json.registerModule(module);
        }
        config.getSingletons().add(new JacksonMessageBodyProvider(json));
        config.getSingletons().addAll(singletons);
        return new LowLevelAppDescriptor.Builder(config).build();
      }
    };
    test.setUp();
  }

  @After
  public void tearDownJersey() throws Exception {
    if (test != null) {
      test.tearDown();
    }
  }

  /**
* @param contents The content to sign with the default HMAC process (POST body, GET resource path)
* @return
*/
  protected String buildHmacAuthorization(String contents, String apiKey, String secretKey) throws UnsupportedEncodingException, GeneralSecurityException {
    return String.format("HmacSHA1 %s %s",apiKey, CryptoUtils.computeSignature("HmacSHA1", contents, secretKey));
  }

  protected void setUpAuthenticator() {
    User user = UserBuilder
      .getInstance()
      .setUUID("abc123")
      .setSecretKey("def456")
      .build();

    //
    UserDao userDao = mock(UserDao.class);
    when(userDao.getUserByUUID("abc123")).thenReturn(user);

    HmacAuthenticator authenticator = new HmacAuthenticator();
    authenticator.setUserDao(userDao);

    addProvider(new HmacAuthProvider<User>(authenticator, "REST"));
  }
} 
```

同样，上面的代码并不完美，但其想法是允许模拟的 UserDao 为标准用户提供已知的共享密钥。出于测试目的，您必须引入自己的 UserBuilder 实现。

最后，使用上面的代码，一个 Dropwizard 资源具有这样的端点：

```
import com.google.common.base.Optional;
import com.yammer.dropwizard.auth.Auth;
import com.yammer.metrics.annotation.Timed;
import org.multibit.mbm.core.Saying;
import org.multibit.mbm.persistence.dto.User;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.MediaType;
import java.util.concurrent.atomic.AtomicLong;

@Path("/")
@Produces(MediaType.APPLICATION_JSON)
public class HelloWorldResource {
  private final String template;
  private final String defaultName;
  private final AtomicLong counter;

  public HelloWorldResource(String template, String defaultName) {
    this.template = template;
    this.defaultName = defaultName;
    this.counter = new AtomicLong();
  }

  @GET
  @Timed
  @Path("/hello-world")
  public Saying sayHello(@QueryParam("name") Optional<String> name) {
    return new Saying(counter.incrementAndGet(),
      String.format(template, name.or(defaultName)));
  }

  @GET
  @Timed
  @Path("/secret")
  public Saying saySecuredHello(@Auth User user) {
    return new Saying(counter.incrementAndGet(),
      "You cracked the code!");
  }

} 
```

可以使用如下配置的单元测试进行测试：

```
import org.junit.Test;
import org.multibit.mbm.core.Saying;
import org.multibit.mbm.test.BaseResourceTest;

import javax.ws.rs.core.HttpHeaders;

import static org.junit.Assert.assertEquals;

public class HelloWorldResourceTest extends BaseResourceTest {

  @Override
  protected void setUpResources() {
    addResource(new HelloWorldResource("Hello, %s!","Stranger"));

    setUpAuthenticator();
  }

  @Test
  public void simpleResourceTest() throws Exception {

    Saying expectedSaying = new Saying(1,"Hello, Stranger!");

    Saying actualSaying = client()
      .resource("/hello-world")
      .get(Saying.class);

    assertEquals("GET hello-world returns a default",expectedSaying.getContent(),actualSaying.getContent());

  }

  @Test
  public void hmacResourceTest() throws Exception {

    String authorization = buildHmacAuthorization("/secret", "abc123", "def456");

    Saying actual = client()
      .resource("/secret")
      .header(HttpHeaders.AUTHORIZATION, authorization)
      .get(Saying.class);

    assertEquals("GET secret returns unauthorized","You cracked the code!", actual.getContent());

  }

} 
```

希望这可以帮助您入门。

# c# - C# Process.GetProcessById(4) 抛出 System.ComponentModel.Win32Exception

> ID：10783063
> 
> 赞同：1
> 
> 时间：2012-05-28T10:23:33.833
> 
> 标签：c#, .net, exception, process, module

我正在编写一段代码，以便遍历系统进程加载的模块列表（PID：4）。以下是我用来实现它的代码。

```
Process process = Process.GetProcessById(4);
foreach (ProcessModule pMod in process.Modules)
{
    Console.Write(pMod.FileName + "   ");
}
Console.WriteLine(); 
```

每当尝试评估模块列表时，此代码都会引发 System.ComponentModel.Win32Exception 错误。实际上，任何属性读取或方法调用都会引发相同的错误。任何其他进程都运行良好，并且能够正确列出所有模块。任何人都可以阐明可能导致这种行为的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:27:31.797

“`System`进程”（Windows 机器上的 PID 为 4）实际上*根本不是*一个进程，它表示一组具有 SYSTEM 完整性的进程。

尝试使用真实的进程 PID（例如，运行 Internet Explorer，并使用它的 PID），看看你是否会得到异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:27:23.477

系统进程不是真正的用户模式进程，它是 Windows 内核（为了更好的描述）。因此，不能将其视为正常过程进行检查。

# ios - 一个项目中有多个版本的 iTunesArtwork？

> ID：10783064
> 
> 赞同：2
> 
> 时间：2012-05-28T10:23:42.570
> 
> 标签：ios, xcode, adhoc, itunesartwork

我有一个带有多个目标的 Xcode 项目，每个目标都用不同的图标吐出不同的应用程序。这些图标位于其特定于目标的资源文件夹中，因此它们不会发生冲突。

但是“iTunesArtwork”文件（即用于在 iTunes 中显示 Ad Hoc 构建的图标）必须放置在特定位置（项目根目录），并准确命名，因此多个版本不能共存。

任何解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:30:17.567

您必须能够对 Artworks 文件执行相同的操作，将多个文件（具有相同名称）存储在不同的文件夹中，将它们添加到与文件相关的项目中`Target Membership`（文件检查器部分）。

它们不必位于项目根目录中。如果在不同的项目文件夹中有多个图标文件，每个图标都是它自己的目标的成员，那么您将拥有具有相同图标名称的不同目标图标（并且自然地将唯一的图标文件复制到包根目录）。

您可能需要在项目根文件夹中有一个图标（例如，它可能由 Xcode 为您复制到那里），但在构建期间，图标应该从项目中引用的文件夹中复制，而不是从项目的根文件夹中复制.

![在此处输入图像描述](../Images/e08f982a41e60d3d55981c4a3508c53d.png)

# android - 在 (0,1) 之间规范化 C++ 中的变量以获得算术精度

> ID：10783067
> 
> 赞同：6
> 
> 时间：2012-05-28T10:24:03.260
> 
> 标签：android, c++, normalization, precision

我正在计算归一化 2D 点的投影，偶然发现它们比在不归一化的情况下投影点更准确。我的代码是 c++，我用 NDK 编译了一个缺少 FPU（浮点单元）的 android 手机。

为什么当我第一次将值归一化以使它们介于 0 和 1 之间时，我会在 C++ 计算中获得准确性？

如果您使用介于 0 和 1 之间的变量，或者它与为 ARM 设备编译的情况有关，那么在 C++ 中通常是否可以获得算术准确性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T10:26:37.493

你对精度有误解。精度基本上是可用于表示数字尾数的位数。

如果将比例保持在 0 和 1 之间，您可能会发现小数点后的位数似乎更多，但这不是精度，它根本不会根据比例或符号而改变。

例如，无论您的数字是 0.5 还是 1e38，单精度都有 23 位精度。双精度具有 52 位精度。

有关IEEE754 位级表示的更多详细信息，请参阅[此答案。](https://stackoverflow.com/questions/3448777/how-to-represent-0-1-in-floating-point-arithmetic-and-decimal/3448855#3448855)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T10:40:05.433

如果您进行基于矩阵的计算，您可能需要计算矩阵的**条件数**。本质上，条件数衡量的是答案中数字错误的大小，作为输入中数字错误大小的函数。条件数低的问题被称为条件良好的问题，而条件数高的问题被称为病态问题。

对于某些问题，您可以预处理您的数据（例如，重新调整您测量某些变量的单位），以便条件数变得更有利。例如，一个财务电子表格，其中一些列以美分衡量，而另一些列以数十亿美元衡量，这是病态的。

有关详细说明，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Condition_number)。

# sql - oracle连接查询问题

> ID：10783071
> 
> 赞同：2
> 
> 时间：2012-05-28T10:24:39.670
> 
> 标签：sql, oracle, oracle10g

我想加入下面两个表

## 学生表：

```
CREATE TABLE  "STUDENT" 
   (    "STUDENT_ID" NUMBER(5,0), 
    "STUDENT_NAME" VARCHAR2(20), 
     CONSTRAINT "STUDENT_PK" PRIMARY KEY ("STUDENT_ID") ENABLE
   )
/ 
```

## 数据

```
 SID STUDENT_NAME        
-   101 Rao         
-   102 G.Naidu                 
-   103 D.Sujith                
-   104 V.S.Raja                
-   105 R.Johnny                
-   106 V.Hemanth               
-   107 Ram                    
-   108 Aditya                 
-   109 bharat                 
-   110 Ramesh 
```

## 出席表：

```
CREATE TABLE  "ATTENDANCE" 
   (    "DAY" DATE, 
    "SID" NUMBER(5,0), 
    "PRESENT" NUMBER(5,0), 
     PRIMARY KEY ("SID", "DAY") ENABLE, 
     FOREIGN KEY ("SID")
      REFERENCES  "STUDENT" ("STUDENT_ID") ENABLE
   )
/ 
```

## 数据

```
-   ##DAY##     ##SID## ##PRESENT##
-   28-MAY-12   101     1
-   28-MAY-12   102     1
-   28-MAY-12   103     0
-   28-MAY-12   104     1
-   28-MAY-12   105     0
-   29-MAY-12   101     0
-   29-MAY-12   102     1
-   29-MAY-12   103     1
-   29-MAY-12   104     1
-   29-MAY-12   105     0 
```

`select sid,count(sid) from attendance where present=1 group by sid order by sid;`

```
-   SID COUNT(SID)
-   101 2
-   102 2
-   104 2
-   105 1
-   106 1
-   107 2
-   108 2
-   109 2
-   111 2
-   112 1 
```

我希望结果为......

```
-   SID STUDENT_NAME        COUNT
-   101 Rao                     2
-   102 G.Naidu                 1
-   103 D.Sujith                2
-   104 V.S.Raja                1
-   105 R.Johnny                2
-   106 V.Hemanth               1
-   107 Ram                     2
-   108 Aditya                  2
-   109 bharat                  1
-   110 Ramesh                  2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:31:19.137

您只需要加入 sutend 表：

```
 select sid, STUDENT_NAME name, count(sid) 
    from attendance 
         join student on STUDENT_ID= sid 
   where present=1 
group by sid, STUDENT_NAME 
order by sid; 
```

# layout - 如何为自定义 Liferay 布局制作缩略图？

> ID：10783074
> 
> 赞同：0
> 
> 时间：2012-05-28T10:24:45.153
> 
> 标签：layout, liferay

如何为自定义 Liferay 布局制作缩略图？如果有人使用任何开源软件完成它，请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T19:16:35.960

在 Liferay 6.1 源文件夹`/liferay-portal-src-6.1.0-ce-ga1/portal-web/docroot/layouttpl`中，有一个名为 zip 的文件，其中`thumbnails.zip`包含`thumbnails.psd`，其中包含所有捆绑布局模板的缩略图。至于开源图像图像编辑软件，有 Gimp。不幸的是，我用它打开上述文件的运气并不好——光滑的覆盖层失去了它的 alpha 值，而大背景矩形似乎失去了它们的渐变并且都是纯色的。您也可以尝试 Paint.net，它在免费图像编辑软件中也备受推崇。

包含任何提及布局模板缩略图的 Liferay 文档的最新版本适用于 Liferay 6.0 系列，您可以在[此处](http://www.liferay.com/community/wiki/-/wiki/Main/Layout+Template)找到它。还有一个具有适当背景渐变的空 png 布局缩略图模板，但是您必须在小矩形矩形上进行自己的光泽处理以及使角变圆...

总而言之，您还可以尝试从头开始制作缩略图，让它们看起来更独特。Liferay 文档中的图像应该让您了解在捆绑布局的缩略图旁边仍然看起来不错的想法。我只是建议尝试使用矢量图像编辑软件。捆绑的缩略图看起来都很简单，可以用矢量绘制它们，这将为您提供更大的灵活性和能力，随时改变您对细节的想法，而无需重新绘制所有内容。

这是一张 121x121 像素的图片……

# c# - Mapper 类中的参数超出范围异常

> ID：10783077
> 
> 赞同：3
> 
> 时间：2012-05-28T10:25:06.827
> 
> 标签：c#, mysql

我正在使用 MVP 模式编程。在 Task 类中，我正在调用该函数。

```
 private List<ValuePair > DisplayUserRole(string sName)
            {
                MySqlConnection connection = DbAccess.OpenConnection(ConnectionStringName.LabTrack);
                _mapper1 = new UserAuthorizationMapper(connection);

                int ixCustomer=1;
                int ixProgram=1;
                int ixWorkPackage=1;
                int ixActivity=1;
                string ixUsercode="626e28e8-e67a-4d11-8d2c-129d0ab79e96";

                bool isUserAuthorized = _mapper1.IsUserAuthorised(sName, ixCustomer, ixProgram, ixWorkPackage, ixActivity, ixUsercode);

                List<ValuePair> listUserRoleValuePair = new List<ValuePair>();
                var ixUserList= _mapper1.FindUserRoleLike(sName,ixCustomer,ixProgram,ixWorkPackage,ixActivity);
                User user = null;

                foreach (var ixUser in ixUserList)
                {
                    user = new UserMapper(connection).FindById(ixUser);
                    if (user != null)
                    {
                        var name = user.SFirstName + " " + user.SLastName;
                        listUserRoleValuePair.Add(new ValuePair(ixUser, name));
                    }

                }
                return listUserRoleValuePair;    
} 
```

在 Mapper 类中，我在选择查询中得到 ArgumentoutofRangeException，说“索引和长度必须引用字符串中的位置”。

```
public bool IsUserAuthorised(string userRole, int ixCustomer, int ixProgram, int ixWorkPackage, int ixActivity, string ixUser)
            {
                bool result = false;
                SelectAll(Cmd(@"SELECT CASE WHEN Count(*)>=1 THEN 'True' "+
                            " ELSE 'False' END AS IsUserAuthorised " + 
                            " FROM (SELECT  ua.ixUserAuthorization FROM tblechecklistuserroleassignmentxref ra "+ 
                            " INNER JOIN tblechecklistuserrole ur ON ur.ixUserRole=ra.ixUserRole AND ur.sname='?0' "+ 
                            " INNER JOIN tblechecklistuserauthorization ua ON au.ixUserAuthorization=ra.ixUserAuthorization "+ 
                            " AND ua.ixcustomer='?1'AND ua.ixprogram='?2'AND ua.ixworkpackage='?3'AND ua.ixactivity='?4' "+ 
                            " AND ua.ixUser='?5') a ",
                            userRole,
                            ixCustomer,
                            ixProgram,
                            ixWorkPackage,
                            ixActivity,
                            ixUser ),                                                                              
                            delegate(MySqlDataReader reader)
                            {
 result=Convert.ToBoolean(GetDbValue<string>(reader,"isUserAuthorised"));

                                                       });
                 return result;

            } 
```

如何修改我的查询以获取要执行的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:38:18.403

这不是简单的情况吗

```
result=Convert.ToBoolean(GetDbValue<string>(reader,"isUserAuthorised")); 
```

需要是

```
result=Convert.ToBoolean(GetDbValue<string>(reader,"IsUserAuthorised")); (capitalised) 
```

?

我猜您的错误与搜索结果有关，而不是与查询有关...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T07:33:55.170

问号后没有单引号。

```
public bool IsUserAuthorised(string userRole, int ixCustomer, int ixProgram, int ixWorkPackage, int ixActivity, string ixUser)         
    {              
   bool result = false;     
   SelectAll(Cmd(@"SELECT CASE WHEN Count(*)>=1 THEN 'True'  ELSE 'False' END AS IsUserAuthorised " +                             
 " FROM (SELECT  ua.ixUserAuthorization FROM tblechecklistuserroleassignmentxref ra "+                           
   " INNER JOIN tblechecklistuserrole ur ON ur.ixUserRole=ra.ixUserRole AND ur.sname=?0 "+                          
    " INNER JOIN tblechecklistuserauthorization ua ON au.ixUserAuthorization=ra.ixUserAuthorization "+        
                      " AND ua.ixcustomer=?1 AND ua.ixprogram=?2 AND ua.ixworkpackage=?3AND ua.ixactivity=?4 "+      
                        " AND ua.ixUser=?5) a ",                             userRole,                      
       ixCustomer,
       ixProgram,
       ixWorkPackage, 
       ixActivity,                             ixUser ),                                                                                                           delegate(MySqlDataReader reader)       

 { 
```

结果=Convert.ToBoolean(GetDbValue(reader,"isUserAuthorised"));

```
 }); 
```

返回结果；
}

# android - 将交互式电影添加到 Android 应用程序

> ID：10783079
> 
> 赞同：0
> 
> 时间：2012-05-28T10:25:19.880
> 
> 标签：android, dialog, android-animation

我正在为 Android 平台构建一个新应用程序，我需要添加一个交互式电影，向用户展示如何使用该应用程序。

我想要类似《愤怒的小鸟》中的视频，按钮会延伸到对话框的外部。

像这样：

![在此处输入图像描述](../Images/9a5f2ba5cf365f5780bebeca2db5dadd.png)

首先，我认为我需要某种动画视频，所以我检查[了 Android 视频视图](http://developer.android.com/reference/android/widget/VideoView.html)，但我不知道如何使用它，如果我真的需要它？

其次，这个窗口是一个常规对话框还是别的什么？我尝试了常规对话框，但我没有想到这个按钮，所有按钮都在对话框本身内，我不能像我想要的那样显示它（例如愤怒的小鸟对话框）。

任何帮助都会很棒，谢谢。

**编辑：** 这是自定义对话框：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/videoView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Test Test"
        android:textSize="50dip"
        android:textColor="@android:color/white"/>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignRight="@id/videoView"
        android:layout_marginBottom="20dp"
        android:layout_marginRight="85dp"
        android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

这就是我得到的：

![在此处输入图像描述](../Images/90ce8a6beffd4c55272e4867f8e22274.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:29:56.457

愤怒的小鸟不使用 Android Ui 元素。他们使用自定义框架来显示他们的对话框。因此，您还需要自定义您自己的对话框。

如果您的应用程序确实需要视频来演示其使用，也许您应该重新考虑您的应用程序功能。也许一个简单的应用程序将使用一组屏幕截图和注释。

# iphone - 如何在 iPhone 的 OpenGLES 中获取中点值？

> ID：10783080
> 
> 赞同：3
> 
> 时间：2012-05-28T10:25:22.493
> 
> 标签：iphone, ios, opengl-es

我是游戏开发的新手。目前我正在使用简单的游戏应用程序，使用 GL_Line 绘制一条线，使用 GL_Triangle 条来绘制（球）图像。通常球图像从左向右移动。当用户在屏幕上 tab 时，然后在屏幕内部画线（从上到下）并触摸到一个球图像。所以我试图从线和球图像中获取中点值，但我不知道，如何开始呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:54:15.847

如果您有一条从 (ax,ay) 到 (bx, by) 的线，则该线的中点就是 ((ax + bx) / 2.0, (ay + by) / 2.0))。

# c# - C# BouncyCastle RSA 加密和解密

> ID：10783081
> 
> 赞同：4
> 
> 时间：2012-05-28T10:25:25.963
> 
> 标签：c#, encryption, rsa, bouncycastle

有很多关于使用 BouncyCastle 进行 RSA 加密和解密的主题，但是我遇到了一些意想不到的行为。

我正在尝试使用大小为 64 字节的私钥加密 64 字节数据块

我计算 RSA 加密如下：

```
public byte[] Encrypt(byte[] data, AsymmetricKeyParameter key)
{
    var engine = new RsaEngine();
    engine.Init(true, key);
    var blockSize = engine.GetInputBlockSize();
    return engine.ProcessBlock(data, 0, blockSize );
} 
```

我使用公钥计算解密如下

```
public byte[] Decrypt(byte[] data, AsymmetricKeyParameter key)
{
    var engine = new RsaEngine();
    engine.Init(false, key);
    var blockSize = engine.GetInputBlockSize();
    return engine.ProcessBlock(data, 0, blockSize );
} 
```

我发现当我使用 64 字节私钥加密我的 64 个数据时，我得到了一个 64 字节加密数据块。

然而，当我使用 64 字节公钥解码 64 字节数组时，我得到一个大小为 62 字节的数据块。奇怪的是 62 字节数组中包含的值等于 64 字节原始数组（预加密）的值，但是解码后的数组缺少原始数据的第一个索引和最终索引。

我试过使用不同的键和不同的数据集，同样的事情发生了。

我一定是做错了什么，但我看不到。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:53:21.703

你把基本概念弄错了。

1.  512 位 RSA 很弱，至少使用 1024 位
2.  私钥不用于加密。它用于解密和签名。公钥用于加密和验证。
3.  填充对于 RSA 安全性至关重要。一个典型的填充方案需要几十个字节。
4.  即使使用教科书 RSA，RSA 也只能处理小于模数的值。因此 512 位模数不能对任意 64 字节/512 位值进行操作。但仅限于 511 位。

您应该退后一步，描述您真正想要实现的目标，以便我们找到适合您需求的方案。只有在那之后，您才应该担心实施它。

# c# - Assembly.GetType 正在返回 null

> ID：10783082
> 
> 赞同：13
> 
> 时间：2012-05-28T10:25:26.190
> 
> 标签：c#, reflection

我正在尝试动态加载加密程序集，但我`GetType`返回 null，即使我使用了正确的类名。这是代码：

```
//Load encryption assembly.
Assembly encryptionAssembly = Assembly.LoadFrom("Encryption.dll");
foreach(Type t in encryptionAssembly.GetTypes())
   {
      MessageBox.Show(t.Name.ToString());
      // This shows "Encryption"
   }
Type encryptionClass = encryptionAssembly.GetType("Encryption");
// But this returns null 
```

这个我有点头疼。该课程是公开的，我肯定拼写正确。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-28T10:29:40.857

这里

```
MessageBox.Show(t.FullName.ToString()); //FULLNAME 
```

打印出`FullName`类型，然后使用*它* `FullName`从程序集中获取类型。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-28T10:28:01.140

您应该指定一个类型的完整命名空间，例如：

```
encryptionAssembly.GetType("My.Namespace.Encryption") 
```

你可以知道它使用`t.FullName`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-28T10:27:37.053

尝试指定加密类型的全名（namespace.classname）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-07T15:20:39.370

我在运行时不知道我的程序集的完全限定名称，但我能够仅使用程序集的 ExportedTypes 中的类名来获取类型。例如，要获取“ClassName”的导出类型：

```
var assembly = Assembly.LoadFile(dllPath);
var types = assembly.ExportedTypes;
if(types != null)
{
    var type = types.Where(x => x.Name == "ClassName").FirstOrDefault();
} 
```

如果有多个具有相同名称“ClassName”的类型，这只会得到第一个，但对于我正在加载的 dll，这是一个安全的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-11T18:22:31.970

在我的情况下，我的项目中的 file/.cs 文件丢失了。我添加了丢失的 cs 文件，它就像魅力一样。我有一个名为 ProjectA 的 cs 项目。因为它的代码正在寻找完整的类名 ProjectA.ClassA。当我收到此错误时，我去了 ProjectA 并看到 ClassA.cs 由于合并问题而丢失。我将 ClassA.cs 添加/包含到 ProjectA 中，它运行良好。

# c++ - 图片从 dc 到 Word 文档

> ID：10783083
> 
> 赞同：0
> 
> 时间：2012-05-28T10:25:27.760
> 
> 标签：c++, mfc, ms-word, gdi

我想在打开的 word 文件中添加图片。但不是来自文件。我的程序中有一些 DC 上的图片，并希望将其直接写入 Word 文档。有人知道怎么做吗？

至少可能是一些阅读建议的文件。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:35:47.513

我假设您能够获得指向您计划在其上插入图片的 Word 文档的 IDispatch 指针...

一旦你有了它，你就可以选择你想要的范围......一旦你有了一个范围，VB中的基本代码（你可以翻译成C++）是：

Range.InlineShapes.AddPicture("yourfile.png")

是的，我知道您说您没有文件或不想使用文件，但我建议您创建一个临时文件，将其插入 Word，然后在完成后将其删除。

使用 codeproject.com 上的[CxImage 库](http://www.codeproject.com/Articles/1300/CxImage)将图像保存到磁盘——假设您知道如何获取要保存/放入 Word 的图像的 HBITMAP 或 CBitmap。

# django - get_git_version 找不到版本号

> ID：10783087
> 
> 赞同：6
> 
> 时间：2012-05-28T10:25:34.050
> 
> 标签：django, git

在我执行时`version.py`有一种方法从文件中引发此错误`get_git_version()``./manage.py runserver``version.py`

> raise ValueError("找不到版本号！")

```
def get_git_version(abbrev=4):
    # Read in the version that's currently in RELEASE-VERSION.

    release_version = read_release_version()

    # First try to get the current version using "git describe".

    version = call_git_describe(abbrev)

    # If that doesn't work, fall back on the value that's in
    # RELEASE-VERSION.

    if version is None:
        version = release_version

    # If we still don't have anything, that's an error.

    if version is None:
        raise ValueError("Cannot find the version number!")

    # If the current version is different from what's in the
    # RELEASE-VERSION file, update the file to be current.

    if version != release_version:
        write_release_version(version)

    # Finally, return the current version.

    return version

def read_release_version():
    try:
        f = open("RELEASE-VERSION", "r")

        try:
            version = f.readlines()[0]
            return version.strip()

        finally:
            f.close()
    except:
        return None 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:27:15.040

这个脚本需要一个来自 git 注释标签 ( `call_git_describe()`) 的版本号，或者通过在一个名为`RELEASE-VERSION`. 它失败是因为没有找到这两个东西，所以修复其中一个。

在你的项目中运行它来为当前提交创建带注释的标签：

```
git tag 1.0 -m "this is version 1.0" 
```

我更喜欢标记版本管理，但文本文件中的版本也很好，YMMV。

# objective-c - 为什么对象变量必须是指针？

> ID：10783089
> 
> 赞同：1
> 
> 时间：2012-05-28T10:25:50.633
> 
> 标签：objective-c, pointers, compiler-errors

如果我声明一个`NSMutableString`

```
NSMutableString *str_value; 
```

为什么我必须将其声明为指针（使用`*`）？如果我不这样做，我会收到编译错误。

有人能解释清楚吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:01:55.030

回想一下，Objective C 是 C 的*超集*。当你声明一个没有`*`在 C 中的变量时，这表明该变量的内存是在自动存储中分配的，如果它是一个局部变量，作为其外部结构的一部分，如果它是结构的成员，或者如果它是静态或全局的，则在静态内存中。在函数的参数列表中不使用类型名或结构标记`*`表示按值传递。

Objective C 语言的设计者本可以采取类似 Java 的路线，使每个类实例都是一个没有指针语法的指针，但是 Objective C 程序的读者需要知道一个名称是否代表一个基于`struct`或一种`id`类型，甚至可以回答有关该类型对象的最基本问题，例如它是通过指针还是通过值隐式传递，是作为拥有结构的一部分分配还是作为内部指针指向的堆对象分配结构等等。

为了避免这种混淆，Objective C 的设计者决定保留`id`对象的显式指针语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:49:50.743

指针意味着您正在指向/引用该类。是的，它会导致编译错误，指针的原因主要是为了内存。一种数据类型（int 或 BOOL 或 float 等）只有几个字节，因此不需要指针。但是 NSMutableString 和其他 Objective-C 类的属性和方法很多，代码也很多。因此，因为在您的应用程序中会有很多对象，这将使用大量内存，从而减慢您的应用程序/降低性能。当然，您应该在创建指针后释放该对象。

# javascript - 有没有更好的方法来组合多个回调？

> ID：10783093
> 
> 赞同：4
> 
> 时间：2012-05-28T10:26:12.780
> 
> 标签：javascript, callback, closures

我需要为多个值调用异步函数（带循环）并等待这些结果。现在我正在使用以下代码：

```
(function(){
    var when_done = function(r){ alert("Completed. Sum of lengths is: [" + r + "]"); }; // call when ready

    var datain = ['google','facebook','youtube','twitter']; // the data to be parsed
    var response = {pending:0, fordone:false, data:0}; // control object, "data" holds summed response lengths
        response.cb = function(){ 
            // if there are pending requests, or the loop isn't ready yet do nothing
            if(response.pending||!response.fordone) return; 
            // otherwise alert.
            return when_done.call(null,response.data); 
        }

    for(var i=0; i<datain; i++)(function(i){
        response.pending++; // increment pending requests count
        $.ajax({url:'http://www.'+datain[i]+'.com', complete:function(r){
            response.data+= (r.responseText.length);
            response.pending--; // decrement pending requests count
            response.cb(); // call the callback
        }});
    }(i));

    response.fordone = true; // mark the loop as done
    response.cb(); // call the callback
}()); 
```

这并不是很优雅，但它可以完成工作。有没有更好的方法呢？也许是包装？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T10:34:43.827

[异步 JS](https://github.com/caolan/async)救援（对于客户端和服务器端 JavaScript）！您的代码可能如下所示（包含 async.js 后）：

```
var datain = ['google','facebook','youtube','twitter'];

var calls = [];

$.each(datain, function(i, el) {
    calls.push( function(callback) {
        $.ajax({
            url : 'http://www.' + el +'.com',
            error : function(e) {
                callback(e);
            },
            success : function(r){
                callback(null, r);
            }
        });
    });
});

async.parallel(calls, function(err, result) {
   /* This function will be called when all calls finish the job! */
   /* err holds possible errors, while result is an array of all results */
}); 
```

顺便说一句：异步还有其他一些非常有用的功能。

顺便说一句 2：注意使用`$.each`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:36:17.853

为此，您可以使用[jQuery Deferred 对象。](http://api.jquery.com/Deferred/)

`var def = $.when.apply(null, xhrs)`是`xhrs`一个包含 $.ajax() 请求的返回值的数组。然后您可以注册一个回调`def.done(function() { ... });`并使用`arguments`类似数组的对象来访问各种请求的响应。要正确处理它们，请删除您的`complete`回调并添加`dataType: 'text'`并使用以下回调`done()`：

```
function() {
    var response = Array.prototype.join.call(arguments, '');
    // do something with response
} 
```

# sql - Access 2010 SQL 查询仅在全字字符串中查找部分匹配

> ID：10783094
> 
> 赞同：4
> 
> 时间：2012-05-28T10:26:24.223
> 
> 标签：sql, ms-access, ms-access-2010

我希望这是一个简单的，我只是找不到我想要的结果，也许我在 SQL 中使用了错误的关键字？

我正在搜索包含全名字段的员工表，该字段可以是“Sam”或“Mr Evans”或“Mr Sam Evans”

我正在尝试查找与另一个包含名称字段的名称表的部分匹配 - 这通常是一个短名称，例如“Sam”或“Evans”，但可能是“Sam Evans”

我试过喜欢，有和没有*如下

```
SELECT tblEmployee.FullName, tblNames.Name
FROM tblEmployee, tblNames
WHERE tblEmployee.FullName Like "*" & tblNames.Name & "*" 
```

除了我想要的结果之外，这个查询还可以返回我不想要的“Mr. Samson”的员工全名。我只想看到包含完整单词“Sam”的结果，而不是包含 Sam 的 FullNames 在字符串中某个单词的一部分。所以我想见见 Sam Evans 先生和 Sam Smith 先生和 Sally Evans 女士等。

我希望这是有道理的。非常感谢您的帮助

## 编辑 - 解决方案

我已经解决了这个问题 - 只是张贴以防万一它可以帮助任何有类似问题的人。

```
WHERE " " & tblEmployee.FullName & " " Like "* " & tblNames.Name & " *" 
```

所以基本上通过在员工全名的开头和结尾添加一个空格，我可以捕捉到所有正确的记录。我没有意识到您可以填充这样的字段，但一位同事向我提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:42:06.550

SQL和access中的通配符是一个`%`符号；

所以

```
"SELECT tblEmployee.FullName, tblNames.Name FROM tblEmployee, tblNames
WHERE tblEmployee.FullName Like '%" & tblNames.Name & "%'" 
```

将匹配字符串的任何实例`tblNames.Name`

您可以`%`在开头或结尾使用 来分别获得字符串开头/字符串结尾的匹配。

***编辑***

抱歉，您*可以*按预期使用`*`和`?`访问，但是您是否将查询作为字符串发送到某些 VBA 代码？还是尝试直接运行它？与直接在查询中一样，它无法将`tblNames.Name`字符串解析到查询中，您需要从表单或其他代码片段中传递它。

***根据评论编辑***

要选择一个特定的单词，只需要做一些工作：

```
SELECT * FROM table WHERE field LIKE '* myWord *' OR field LIKE '* myWord.*' 
```

您可以选择捕获句子的开头 `LIKE 'MyWord *' 和带有逗号、句号、感叹号等的单词...

您可以执行一条 IN 语句，并在查找表中包含所有变体，以使其易于维护，作为另一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T02:13:16.003

我使用了 Access 2007 中编辑过的帖子中的这个解决方案，效果很好！

```
WHERE " " & tblEmployee.FullName & " " Like "* " & tblNames.Name & " *" 
```

现在我的问题是，SQL 代码到底在做什么，为什么会起作用？有人可以分解吗？

**编辑：**

好的，我的困惑源于 Access SQL 与更标准的 SQL 中字符的不同使用。& 在 Access 中是连接的，而 + 在标准 SQL 中是连接的。* 是 Access 中任意数量字符的通配符，而在 SQL 中是 %。

# javascript - json 未定义变量

> ID：10783095
> 
> 赞同：0
> 
> 时间：2012-05-28T10:26:33.010
> 
> 标签：javascript, google-maps

因此，我尝试将 Google Maps 功能与以下代码和 json 数据一起使用。但我得到**错误：位置未定义**错误。我真的不明白为什么，因为我在我的代码中定义了。我是 JavaScript 新手，有任何建议可以使此代码受到赞赏。

```
 var data = <%=JSON.stringify(Info, null, 2) & vbNewline%>;

  function initialize() {
        var center = new google.maps.LatLng(48.404840395764175, 2.6845264434814453);

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 3,
      center: center,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var markers = [];
    for (var i = 0; i < 100; i++) {
      var location = data[i];
      var latLng = new google.maps.LatLng(location.latitude,
          location.longitude);
      var marker = new google.maps.Marker({
        position: latLng
      });
      markers.push(marker);
    }
    var markerCluster = new MarkerClusterer(map, markers);
  }
  google.maps.event.addDomListener(window, 'load', initialize);

{ "firstname": "", "lastname": "", "location": { "latitude": "48.4048403957642", "longitude": "2.68452644348145" } } { "firstname": "", "lastname": "", "location": { "latitude": "48.4050236871384", "longitude": "2.68512690051361" } } { "firstname": "", "lastname": "", "location": { "latitude": "48.4048403957642", "longitude": "2.68452644348145" } } { "firstname": "", "lastname": "", "location": { "latitude": "48.7570941168018", "longitude": "2.16670989990234" } } { "firstname": "", "lastname": "", "location": { "latitude": "48.404922961092", "longitude": "2.70020564018949" } } { "firstname": "", "lastname": "", "location": { "latitude": "48.8739279353421", "longitude": "2.32875823974609" } } { "firstname": "", "lastname": "", "location": { "latitude": "48.4048403957642", "longitude": "2.68452644348145" } } { "firstname": "", "lastname": "", "location": { "latitude": "41.0349860434783", "longitude": "28.9774059609177" } } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:29:32.583

你可能应该做

```
for (var i = 0; i < data.length; i++) { 
```

代替

```
for (var i = 0; i < 100; i++) { 
```

# ruby-on-rails - 带有动态内容的 Rails 片段缓存

> ID：10783097
> 
> 赞同：2
> 
> 时间：2012-05-28T10:26:38.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, optimization, dynamic

我正在开发一个用户可以互相关注的社交网络应用程序。

为了加快速度，我在用户预览和完整页面视图中添加了片段缓存。

好消息是该应用程序变得非常快。不好的是我开始遇到与关注按钮相关的错误。

事实上，所有用户预览和完整页面视图都有一个关注块，可以有不同的 4 种状态，无论用户是否已登录、查看他的个人资料、查看其他人已关注或查看其他人尚未关注。

为了解决这个问题，我结束了在 4 种不同状态中的每个用户的预览和完整页面视图的不同缓存版本（= 每个用户 8 个不同的缓存片段）。这个问题现在已经消失了，但我不禁认为这远非最佳。

然后我听说了[Ryan Bates 关于动态片段缓存的 Railscast](http://railscasts.com/episodes/169-dynamic-page-caching-revised)并开始思考。

也许我可以通过 ajax 只加载关注按钮。但是之后 ...

*   我应该为每个按钮提出一个请求吗？
*   我应该把它们全部收集起来以防止有很多请求吗？如何 ？
*   有没有更好的办法 ？

你怎么看 ？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:34:11.833

> 我应该为每个按钮提出一个请求吗？

不，您应该将它们捆绑在一起，因为这比每个按钮一个请求要快得多

> 我应该把它们全部收集起来以防止有很多请求吗？如何 ？

是的，您知道一页上显示的所有对象，因此您应该能够收集要关注的用户的所有 id 并询问他们的关注状态。

> 有没有更好的办法 ？

没有什么我能想到的，但这并不意味着没有更好的方法。

# c# - WPF WindowsFormsHost Winform 用户控件显示但不起作用

> ID：10783100
> 
> 赞同：0
> 
> 时间：2012-05-28T10:26:50.213
> 
> 标签：c#, wpf, winforms, visual-studio-2010

我正在尝试将现有的 Winforms 项目迁移到 WPF 中。但是：我需要将一些用户控件保留为 WinForm 控件。

我已将 WinForms UserControl 添加到 WPF 窗口中。它由一个 RichTextBox 和一些按钮和标签组成。这被细分为各种进一步的用户控件。

当我将 UserControl 嵌入到 WPF 窗口中时，它会呈现 - 但没有一个按钮似乎做任何事情。当底层进程更新时，例如 RichTextBox，它不会显示内容。然而，当我在调试中检查文本框时，我可以看到内容（尽管我必须单击“base”才能看到它。）

[我发现的一个区别——尽管它可能不相关——是当这个控件在 WPF 上并且不工作时，Visual Studio 将对象显示为“密封”，但是当它在原始 Winforms 项目中完全工作时它确实不显示为密封。]

我添加了代码来更改标签中的文本 - 他们也坚决拒绝更新：如果我在调试模式下检查标签，我可以再次看到文本。

这个堆栈溢出问题可能会解决相同的问题： [WindowsFormsHost Winform pdfviewer control problem](https://stackoverflow.com/questions/2030306/windowsformshost-winform-pdfviewer-control-problem)

但答案对我来说没有多大意义：它提到了替换

```
new Window { Content = CreateContent(), Title = title }.Show(); 
```

但这不是我认识的一段代码：我正在使用一个带有代码的 xaml 文件，它被调用使用

```
System.Windows.Application app = new System.Windows.Application(); 
app.Run(new FormWPFApp()); 
```

（FormWPFApp 是我的 WPF 窗口名称）

这是 xaml 标头：-

```
<Window x:Class="ZedApp.FormWPFApp"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Printers="clr-namespace:ZedApp.UserControls.Printers"
        xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"

        Title="Conversion version" Height="661" Width="1559" Loaded="Window_Loaded"> 
```

这是我用于两个 UserControls 的 xaml（它们都继承自同一个基类）：-

```
<WindowsFormsHost Height="430" HorizontalAlignment="Left" Margin="192,32,0,0" Name="windowsFormsHostTicketPrinter" VerticalAlignment="Top" Width="324" Grid.Row="1" Grid.Column="1">
    <Printers:TicketPrinter x:Name="ticketPrinter">
    </Printers:TicketPrinter>
</WindowsFormsHost>
<WindowsFormsHost Height="430" HorizontalAlignment="Left" Margin="522,32,0,0" Name="windowsFormsHostJournalPrinter" VerticalAlignment="Top" Width="324" Grid.Row="1" Grid.Column="1">
    <Printers:JournalPrinter x:Name="journalPrinter">
    </Printers:JournalPrinter>
</WindowsFormsHost> 
```

[我注意到的另一件事是，如果在 WPF 中的 WindowsFormsHost 下运行，清除其中一个窗口上的富文本框的方法开始踢出以下类型的错误 - “在窗口句柄之前，不能在控件上调用 Invoke 或 BeginInvoke被创造了。”

```
private void ClearRichTextBox(RichTextBox rtbToClear)
{
    if (rtbToClear.IsHandleCreated)
    {

        if (rtbToClear.InvokeRequired)
        {
            this.Invoke(new Action<RichTextBox>(ClearRichTextBox), new object[] {rtbToClear});
            return;
        }

        rtbToClear.Clear();
    }
} 
```

]

这种行为的可能原因是什么？我需要做什么才能使用户控件中的元素正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:11:43.030

与 WinForms 的正确输入互操作需要主机和 WPF 输入系统之间的一些合作。SDK 中 Win32 和 WPF 之间的 消息循环[主题很好地解释了这一点。](http://msdn.microsoft.com/en-us/library/aa348549.aspx)在您的设置中，实现这一点的最简单方法是使用如下代码：

```
Window w = new Window1();
System.Windows.Forms.Integration.ElementHost.EnableModelessKeyboardInterop(w);
w.Show(); 
```

ElementHost.EnableModelessKeyboardInterop() 实质上是向 WinForms 应用程序对象（通常运行消息循环）注册一个输入挂钩并调用 ComponentDispatcher.RaiseThreadMessage()。

# jquery - jquery 验证器 - 自定义设计

> ID：10783107
> 
> 赞同：0
> 
> 时间：2012-05-28T10:27:20.117
> 
> 标签：jquery

我有一组输入字段。如果其中任何一个不正确，我将在控件上方的气泡消息中显示它。我所做的是：

```
errorPlacement: function(error, element) {
        error.insertAfter(element)
        var message = error.html();
        error.html('<div class="innerError"><div class="message">' + message + '</div><div class="corner"></div></div>');
    } 
```

现在，当字段无效时，消息按预期显示，但是当我将注意力移出字段时，没有更改它或者即使我确实更改了它，内部 div（消息）仍然存在......

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:13:29.523

一个简单的例子，验证一个文本框

```
<form action="/">
    <input type="text" /><span class="error"></span><br />
    <input type="submit" value="submit" />
</form>

$(function () {

    $('input:submit').click(function (e) {

        $('input:text').each(function () {
            if ($(this).val() == "") {
                e.preventDefault();
                $(this).parent().find('span').html("input text is blank");
            }
        });

    });

    $('input:text').blur(function () {
        if ($(this).val() != "") {
            $(this).parent().find('span').text("");
        }
    });

}); 
```

所以基本上你需要应用 .blur 事件（聚焦）并重新验证输入是否有效，然后删除错误消息，否则留下它。

# php - 通过 IMAP 从 Gmail“所有邮件”文件夹中删除邮件

> ID：10783109
> 
> 赞同：1
> 
> 时间：2012-05-28T10:27:26.850
> 
> 标签：php, imap, flags, gmail-imap

我正在使用[RFC 3501](http://tools.ietf.org/search/rfc3501)通过 imap 访问 Gmail All Mail 文件夹。我需要从文件夹中删除一条消息（移至垃圾箱或永久删除）。以下命令似乎不起作用：

```
UID STORE 123 +FLAGS (\Deleted)
EXPUNGE 
```

我可以使用[X-GM-LABELS](https://developers.google.com/google-apps/gmail/imap_extensions#access_to_gmail_labels_x-gm-labels)修改标签，但没有添加“垃圾”标签的选项。

RFC 3501 没有“MOVE”命令，因此我需要将邮件复制到“垃圾箱”文件夹，然后将其从父文件夹中删除。有什么出路？？

谢谢。

**找到部分答案。**

要将垃圾箱设置为标签，我们需要使用“\\Trash”作为标签。以下是将邮件移至垃圾箱的命令（删除收件箱标签并添加垃圾箱标签）。

```
UID STORE 123 -X-GM-LABELS (\\Inbox)
UID STORE 123 +X-GM-LABELS (\\Trash) 
```

现在，我被困在如何永久删除该消息上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:59:23.483

这些命令永久删除消息：

```
// sequence number 123, 234 are the same message in different folders
SELECT "[Gmail]/AllMail"
COPY 123 "[Gmail]/Trash"
CLOSE

SELECT "[Gmail]/Trash"
STORE 234 +FLAGS (\Deleted)
EXPUNGE 
```

刚刚试了一下，效果很好。

# javascript - 如何动态调整已经打开的窗口大小

> ID：10783115
> 
> 赞同：0
> 
> 时间：2012-05-28T10:27:50.447
> 
> 标签：javascript

我的表单窗口是动态的，它在父面板中加载动态控件。

加载控件后，无论该面板的高度和宽度如何，我都想将其设置为窗口。

我已经尝试过了，但是没有按照面板设置窗口的高度和宽度。

那么我该如何解决这个问题呢？

问候， Rohit Pundlik

# linux - 在 cygwin 下运行 Cronjob

> ID：10783116
> 
> 赞同：3
> 
> 时间：2012-05-28T10:27:50.713
> 
> 标签：linux, unix, cron, scheduled-tasks, crontab

我有需要使用 cygwin crontab 运行的脚本。

所以我做了什么。

使用 cygwin setup.exe 安装了两个额外的 cygwin 包

Cron 和 cygrunsrv

然后在安装新的crontab

```
* * * * * sh /housekeeper.sh -t CPS 
```

因为我无法获得 housekeeper.sh 的输出，所以我检查了状态

```
cronevents.exe 
```

这给了我以下错误消息。

```
2012/05/28 18:22:01 [SYSTEM] /usr/sbin/cron: PID 3880: (CRON) error (can't switc
h user context) 
```

谁能帮我解决这个问题。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-24T09:58:20.043

此错误出现在 Windows 应用程序事件日志中，因为运行服务的帐户无法切换用户上下文（请参阅[http://www.davidjnice.com/cygwin_cron_service.html](http://www.davidjnice.com/cygwin_cron_service.html)）

将运行服务的用户更改为必须运行脚本的真实用户。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T11:04:38.807

看起来您的 cron 将第 6 个单词 (sh) 视为运行命令的用户名。尝试使用

```
* * * * * yourusername /path/to/script.sh options 
```

并确保 script.sh`PATH`正确设置它，因为 cron 可能根本没有设置任何内容`PATH`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-26T09:09:34.977

如果你有多个用户，并且你想让这个运行，那么：有三种方法可以在没有密码的情况下切换用户上下文，方法1：从头开始创建令牌方法2：LSA认证包方法3：使用密码

我在这里解释方法2。尝试命令“cyglsa-config”另外，将登录设置为本地系统帐户。并重新启动系统。

[为 cron 守护程序服务设置 LogOn 选项的图像](https://i.stack.imgur.com/czK36.jpg) 更多详细信息：[https ://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-nopasswd1](https://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-nopasswd1)

# plugins - 防止在错误版本的 PHP 或 WP 上激活 Wordpress 插件

> ID：10783122
> 
> 赞同：0
> 
> 时间：2012-05-28T10:28:41.203
> 
> 标签：plugins, wordpress, activation

*当我点击“激活”*并且 PHP 或 WP 版本错误时，有没有办法阻止 WordPress 激活插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T23:59:39.777

```
 <?php
   register_activation_hook( __FILE__, 'bh_proljece_boj_install' );
   function bh_proljece_boj_install() 
   {
       if ( version_compare( get_bloginfo( 'version' ), '3.3', ' < ' ) ) 
       {
           deactivate_plugins( basename( __FILE__ ) ); // Deactivate our plugin
       }
   }
   ?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T15:12:57.647

有一个全局变量`$wp_version`，或者您可以使用它`get_bloginfo('version')`来获取 WordPress 版本。您还可以使用`version_compare(...)`PHP 函数进行 PHP 版本比较，其中两个验证都可以在您的插件激活函数中进行评估。

# java - 在选项卡式窗口中显示输出

> ID：10783123
> 
> 赞同：3
> 
> 时间：2012-05-28T10:28:43.180
> 
> 标签：java, swing, jtabbedpane

我用 Java 为 Linux 开发了一个任务管理器。现在的输出显示在控制台中，而选项卡式窗口单独出现（这是使用 Java Swing 完成的）。现在我希望控制台的输出显示在选项卡式窗口中。

我该怎么做？

有我用过的类。一个用于任务管理器功能，另一个用于 GUI。我已经粘贴在编码下方。

```
**TabbedPaneDemo1.java**

package components;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.io.Writer;
import java.util.Iterator;
import java.util.List;

/*
 * TabbedPaneDemo.java requires one additional file:
 *   images/middle.gif.
 */

import javax.swing.JTabbedPane;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.JComponent;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.JTextField;
import javax.swing.JTextArea;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.TextArea;
import java.awt.event.KeyEvent;
import java.io.BufferedReader;
import java.io.FileOutputStream;
import java.io.InputStreamReader;
import java.io.PrintStream;

public class TabbedPaneDemo1
{

public static void main(String args[]) throws Exception
{
    try
    {   
        TextArea textarea = new TextArea();
        TabbedPaneDemo obj = new TabbedPaneDemo();
        obj.fn();
        String line;
        String result = "";
        FileOutputStream out;
        //FileOutputStream out; // declare a file output object
        PrintStream p;
        Process p1 = Runtime.getRuntime().exec("tasklist.exe");
        out = new FileOutputStream("myfile.txt");//write to a file//
        p = new PrintStream( out );
        BufferedReader input = new BufferedReader(new InputStreamReader(p1.getInputStream()));//read form a file//
        while ((line = input.readLine()) != null)
        {
            System.out.println(line);
            //textarea.append(line + "\n");
            result += line+"\n";
            p.println (line);
            //textarea.setVisible(true);    
        }
        //msgBox(result);
        p.close();
        input.close();   
    }
    catch(Exception e)
    {

    }
}
    public static void msgBox(String msg) {
    javax.swing.JOptionPane.showConfirmDialog((java.awt.Component)
    null, msg, "WindowsUtils",
    javax.swing.JOptionPane.DEFAULT_OPTION);
    }
}

**TabbedPaneDemo.java**

package components;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.KeyEvent;

import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

import javax.swing.JTabbedPane;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.JComponent;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.JTextField;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.KeyEvent;

public class TabbedPaneDemo extends JPanel {
Integer i;
public TabbedPaneDemo() {
    super(new GridLayout(1, 1));

    JTabbedPane tabbedPane = new JTabbedPane();
    ImageIcon icon = createImageIcon("images");

    JComponent panel1 = makeTextPanel("tasklist");
    tabbedPane.addTab("tasks", icon, panel1,
            "ta");
    tabbedPane.setMnemonicAt(0, KeyEvent.VK_1);

    JComponent panel2 = makeTextPanel("windows");
    tabbedPane.addTab("wins", icon, panel2,
            "wi");
    tabbedPane.setMnemonicAt(1, KeyEvent.VK_2);

    add(tabbedPane);`enter code here`
        tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);    
    }
    protected JComponent makeTextPanel(String text)
    {
        JPanel panel = new JPanel(false);
        JLabel filler = new JLabel(text);
        filler.setHorizontalAlignment(JLabel.CENTER);
        panel.setLayout(new GridLayout(1, 1));
        panel.add(filler);
        return panel;
    }
    protected static ImageIcon createImageIcon(String path) {
        java.net.URL imgURL = TabbedPaneDemo.class.getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
    }
    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TabbedPaneDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new TabbedPaneDemo(), BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }
    public static void fn() {
        SwingUtilities.invokeLater(new Runnable() {
            public void run()
            {
        UIManager.put("swing.boldMetal", Boolean.FALSE);
        createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:53:23.697

这是一个非常幼稚的实现。

```
package test.t100.t001;

import java.awt.*;
import java.awt.event.KeyEvent;
import java.io.BufferedReader;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintStream;

import javax.swing.*;

public class TabbedPaneDemo extends JPanel {

    private static final long serialVersionUID = 1L;
    Integer i;

    JTextArea output = new JTextArea();

    public static void main(String args[]) 
    {
        SwingUtilities.invokeLater(new Runnable() {
            public void run()
            {
                JFrame frame = new JFrame("TabbedPaneDemo");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TabbedPaneDemo(), BorderLayout.CENTER);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    private String getDetails() throws IOException {
        //fn();
        String line;
        String result = "";
        PrintStream p;
        Process p1 = Runtime.getRuntime().exec("tasklist.exe");
        // read from a process
        BufferedReader input = new BufferedReader(
                new InputStreamReader(p1.getInputStream()));
        while ((line = input.readLine()) != null)
        {
            //System.out.println(line);
            output.append(line + "\n");
            result += line+"\n";
            //p.println (line);
            //textarea.setVisible(true);    
        }
        //msgBox(result);
        //p.close();
        input.close();   

        return result;
    }

    public TabbedPaneDemo() {
        super(new GridLayout(1, 1));

        JTabbedPane tabbedPane = new JTabbedPane();
        ImageIcon icon = createImageIcon("images");

        JComponent panel1 = makeTextPanel("tasklist");
        tabbedPane.addTab("tasks", icon, panel1,
                "ta");
        // add it to something!
        panel1.add(new JScrollPane(output));
        tabbedPane.setMnemonicAt(0, KeyEvent.VK_1);

        JComponent panel2 = makeTextPanel("windows");
        tabbedPane.addTab("wins", icon, panel2,
                "wi");
        tabbedPane.setMnemonicAt(1, KeyEvent.VK_2);

        add(tabbedPane);//`enter code here`
        tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);

        try {
            String s = getDetails();
            output.setText(s);
        } catch(IOException e) {
            e.printStackTrace();
        }
    }

    public static void msgBox(String msg) {
        javax.swing.JOptionPane.showConfirmDialog((java.awt.Component)
                null, msg, "WindowsUtils",
                javax.swing.JOptionPane.DEFAULT_OPTION);
    }

    protected JComponent makeTextPanel(String text)
    {
        JPanel panel = new JPanel(false);
        JLabel filler = new JLabel(text);
        filler.setHorizontalAlignment(JLabel.CENTER);
        panel.setLayout(new GridLayout(1, 1));
        panel.add(filler);
        return panel;
    }

    protected static ImageIcon createImageIcon(String path) {
        java.net.URL imgURL = TabbedPaneDemo.class.getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
    }
} 
```

## 其他注意事项：

1.  为了尽快获得更好的帮助，请发布[SSCCE](http://sscce.org/)。特别是不要包含不必要的图像。
2.  对这种类型的数据使用 a `JTable`。
3.  该代码将文本区域转储到一个选项卡式窗格中，该窗格显然具有`GridLayout`- BNI
4.  不要无故混用 Swing 和 AWT 组件。
5.  如前所述，使用 a`SwingWorker`获取数据。

## 更新

> ..但是控制台的输出没有出现。

嗯。让我们想想

> 我用 Java为**Linux开发了一个任务管理器**

..结合..

```
Process p1 = Runtime.getRuntime().exec("tasklist.exe"); 
```

现在，如果我误解了什么，请纠正我，但 AFIAU **Linux 没有 EXE。**

我猜代码在 Linux 上会失败，并且由于`err`进程的流被忽略了，你没有被告知原因。这是上面显示的代码的屏幕截图，它出现在**Windows** 7 上。

![选项卡式窗格中的工作输出](../Images/493fa6e9d4f0bc371415872253ba1c9f.png)

现在，如果数据是硬编码的，您可能会看到类似上面的内容。哪个回答了“（如何）在选项卡式窗口中显示输出”的问题，对吗？

更多信息。您看到的*新*问题是通过实施[When Runtime.exec() won't](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)的所有建议来解决的。如果您实施了所有建议并且仍然无法解决问题，我建议您提出一个新问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:42:13.280

只有点

*   `TextArea textarea = new TextArea();`为什么选择 AWT 组件

    使用摇摆`JTextArea textarea = new JTextArea();`

您可以`JTextArea`直接将数据加载到

*   `FileOutputStream`从`Process p1 = Runtime.getRuntime()`

或从`File`

*   `JTextArea.read(File)`接受`"\n"`

或来自`FileReader`或`FileXxxx`ei

*   `JTextArea.append(String)`

您[在 Swing 中遇到 Concurency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)问题，您必须调用 / 来重定向

```
Process p1 = Runtime.getRuntime() 
```

和

```
FileIO 
```

到后台任务，有

*   通过调用 from `Runnable#Thread`(输出到`JTextArea`应该被包装到`invokeLater`)

或者

*   使用`SwingWorker`（输出`process`或`publish`可以在 上完成`Event Dispatch Thread`）

# visual-studio-2010 - 使用免费工具创建 FxCop .ruleset 文件

> ID：10783126
> 
> 赞同：0
> 
> 时间：2012-05-28T10:29:27.653
> 
> 标签：visual-studio-2010, fxcop

如何仅使用 MSVS 10 专业版和 FxCopIntegrator 等免费工具为 FxCop 创建 .ruleset 文件？

我发现的唯一图形工具是 FxCop GUI，它允许选择规则。该规则选择导致创建“.fxcop”文件。但是 FxCopIntegrator 在提供指定自己的规则集的能力的同时，需要另一种文件格式（“.ruleset”）

我找不到将 .fxcop 文件转换为 .ruleset 的方法。“.FxCop”包含规则名称，“.ruleset”包含“CA1xxx”等数字。

我错过了一些明显的方法吗？可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:25:09.000

不，没有公开可用的工具将 .fxcop 项目文件转换为 .ruleset 文件。但是，.ruleset 文件只是 xml 文件，因此您可以在任何文本编辑器中编辑它们。

顺便说一句，FxCopIntegrator 也支持使用 .fxcop 文件，因此如果您有其他原因想要这样做，则无需停止使用它们。

# c# - 如何在 ASP.Net 中实现自定义音频验证码

> ID：10783127
> 
> 赞同：3
> 
> 时间：2012-05-28T10:29:27.907
> 
> 标签：c#, asp.net

我们使用 C#.Net 创建了一个自定义验证码生成器。现在我们需要升级我们的验证码以包含音频功能（听验证码）。我们的主要限制是我们不能使用任何第三方组件（Dlls）

请指导我实现这样的功能。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T05:21:02.173

我过去做过这样的事情。需要将背景噪音（器乐）与连接的字母/字符合并。此外，我们从不同的声音中生成了使用中的录音。所有这些都增加了能够从语音中提取验证码文本的“智能代码”的复杂性。由于显而易见的原因，我还必须将最终的 WAVE 转换为 MP3（使用 lame_enc.dll）。向您解释如何做到这一点并不容易，因此我包含了该工作所需的初稿版本，省略了 MP3 代码，因为它使用了第三方 DLL。

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;
using System.Drawing.Text;
using System.IO;
using System.Reflection;

namespace suryakiran
{
    internal static partial class Extensions
    {
        internal static byte[] AudioCaptcha(this string text)
        {
            String en = "abcdefghijkoprstvx0123456789", Location = string.Concat(System.Web.HttpContext.Current.Request.ServerVariables["APPL_PHYSICAL_PATH"].ToString(), @"\bin\wav\");
            Int32 dataLength = 0, length = 0, sampleRate = 0, plus = 37500, p = 0;
            Int16 bitsPerSample = 0, channels = 0;
            Byte[] music, wav;
            Random r = new Random();
            p = r.Next(1, 4000000);
            p += (p % 150) + 44;
            Byte[] rb = new Byte[9 * plus];
        // read music
        using (FileStream fs = new FileStream(String.Format(Location + @"z{0}.wav", (r.Next() % 12) + 1), FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
        {
            wav = new Byte[44];
            fs.Read(wav, 0, 44);
            fs.Position = (long)p;
            fs.Read(rb, 0, rb.Length);
        }
        // make music
        using (MemoryStream ms = new MemoryStream())
        {
            channels = BitConverter.ToInt16(wav, 22); sampleRate = BitConverter.ToInt32(wav, 24); bitsPerSample = BitConverter.ToInt16(wav, 34);
            length = rb.Length; dataLength = rb.Length;
            ms.Write(new Byte[44], 0, 44); ms.Write(rb, 0, rb.Length);
            ms.Position = 0;
            using (BinaryWriter bw = new BinaryWriter(ms))
            {
                bw.Write(new char[4] { 'R', 'I', 'F', 'F' }); bw.Write(length);
                bw.Write(new char[8] { 'W', 'A', 'V', 'E', 'f', 'm', 't', ' ' });
                bw.Write((Int32)16); bw.Write((Int16)1);
                bw.Write(channels); bw.Write(sampleRate);
                bw.Write((Int32)(sampleRate * ((bitsPerSample * channels) / 8)));
                bw.Write((Int16)((bitsPerSample * channels) / 8));
                bw.Write(bitsPerSample); bw.Write(new char[4] { 'd', 'a', 't', 'a' }); bw.Write(dataLength);
                music = ms.ToArray();
                p = 0;
            }
        }

        using (MemoryStream final = new MemoryStream())
        {
            final.Write(music, 0, 44);
            // make voice
            using (MemoryStream msvoice = new MemoryStream())
            {
                msvoice.Write(new Byte[plus / 2], 0, plus / 2);
                length += plus; dataLength += plus / 2; p += plus / 2;
                for (var i = 0; i < text.Length; i++)
                {
                    String fn = String.Format(Location + @"{0}\{1}.wav", (r.Next() % 3), en.Substring(en.IndexOf(text.Substring(i, 1)), 1)).Replace("?", "qm");
                    wav = File.ReadAllBytes(fn);
                    Int32 size = BitConverter.ToInt32(wav, 4);
                    {
                        msvoice.Write(new Byte[plus / 2], 0, plus / 2);
                        length += plus; dataLength += plus / 2; p += plus / 2;
                    }
                    msvoice.Write(wav, 44, wav.Length - 44);
                    length += size; dataLength += size - 36;
                }
                msvoice.Position = 0;
                MemoryStream msmusic = new MemoryStream();
                msmusic.Write(music, 0, music.Length);
                msmusic.Position = 44;
                //merge;
                while (final.Length < msmusic.Length)
                    final.WriteByte((byte)(msvoice.ReadByte() - msmusic.ReadByte()));
                return final.ToArray();
            }
        }
    }

    internal static Byte[] VisualCaptcha(this String source)
    {
        try
        {
            Random r = new Random();
            Int32 w = 250, h = 75;
            String family = "Arial Rounded MT Bold";
            using (var bmp = new Bitmap(w, h, PixelFormat.Format32bppArgb))
            {
                Int32 m = 0, nm = 0;
                Color tc;
                using (var g = Graphics.FromImage(bmp))
                {
                    g.TextRenderingHint = TextRenderingHint.AntiAlias;
                    g.SmoothingMode = SmoothingMode.HighQuality;
                    g.Clear(Color.White);
                    SizeF size;
                    m = r.Next() % 9 + 1;
                    nm = r.Next() % 3;
                    tc = Color.FromArgb(255, 255, 255);
                    size = g.MeasureString(source, new Font(family, h * 1.2f, FontStyle.Bold), new SizeF(w * 1F, h * 1F));
                    using (var brush = new LinearGradientBrush(new Rectangle(0, 0, w, h), Color.Black, Color.Black, 45, false))
                    {
                        ColorBlend blend = new ColorBlend(6);
                        for (var i = 0; i < 6; i++) { blend.Positions[i] = i * (1 / 5F); blend.Colors[i] = r.RandomColor(255, 64, 128); }
                        brush.InterpolationColors = blend;

                        for (int wave = 0; wave < 2; wave++)
                        {
                            Int32 min = (15 + wave * 20);
                            PointF[] pt = new PointF[] { new PointF(16f, (float)r.Next(min, min + 10)), new PointF(240f, (float)r.Next(min + 10, min + 20)) };
                            List<PointF> PointList = new List<PointF>();
                            float curDist = 0, distance = 0;
                            for (int i = 0; i < pt.Length - 1; i++)
                            {
                                PointF ptA = pt[i], ptB = pt[i + 1];
                                float deltaX = ptB.X - ptA.X, deltaY = ptB.Y - ptA.Y;
                                curDist = 0;
                                distance = (float)Math.Sqrt(Math.Pow(deltaX, 2) + Math.Pow(deltaY, 2));
                                while (curDist < distance)
                                {
                                    curDist++;
                                    float offsetX = (float)((double)curDist / (double)distance * (double)deltaX);
                                    float offsetY = (float)((double)curDist / (double)distance * (double)deltaY);
                                    PointList.Add(new PointF(ptA.X + offsetX, ptA.Y + offsetY));
                                }
                            }
                            for (int i = 0; i < PointList.Count - 24; i = i + 24)
                            {
                                float x1 = PointList[i].X, y1 = PointList[i].Y, x2 = PointList[i + 24].X, y2 = PointList[i + 24].Y;
                                float angle = (float)((Math.Atan2(y2 - y1, x2 - x1) * 180 / 3.14159265));
                                g.TranslateTransform(x1, y1);
                                g.RotateTransform(angle);
                                Int32 pm = r.Next() % 2 + 1;
                                Point[] p1 = new Point[] { new Point(0, 0), new Point(3, -3 * pm), new Point(6, -4 * pm), new Point(9, -3 * pm), new Point(12, 0), new Point(15, 3 * pm), new Point(18, 4 * pm), new Point(21, 3 * pm), new Point(24, 0) };
                                using (var path = new GraphicsPath()) g.DrawLines(new Pen(brush, 2f), p1);
                                g.RotateTransform(-angle);
                                g.TranslateTransform(-x1, -y1);
                            }
                        }
                        using (var path = new GraphicsPath())
                        {
                            PointF[] points = new PointF[] { };
                            if (m == 1 || m == 2 || m == 3) // star trek inverse
                            {
                                path.AddString(source, new FontFamily(family), 1, h * 0.75F, new PointF((w - size.Width) / 2F, (h * 0.9F - size.Height) / 2F), StringFormat.GenericTypographic);
                                points = new PointF[] { new PointF(0, 0), new PointF(w, 0), new PointF(w * 0.2F, h), new PointF(w * 0.8F, h) };
                            }
                            else if (m == 4 || m == 5) // star trek
                            {
                                path.AddString(source, new FontFamily(family), 1, h * 0.75F, new PointF((w - size.Width) / 2F, (h * 1.2F - size.Height) / 2F + 2F), StringFormat.GenericTypographic);
                                points = new PointF[] { new PointF(w * 0.2F, 0), new PointF(w * 0.8F, 0), new PointF(0, h), new PointF(w, h) };
                            }
                            else if (m == 6 || m == 7) // grow from left
                            {
                                path.AddString(source, new FontFamily(family), 1, h * 0.75F, new PointF((w * 1.15F - size.Width) / 2F, (h - size.Height) / 2F), StringFormat.GenericTypographic);
                                points = new PointF[] { new PointF(0, h * 0.25F), new PointF(w, 0), new PointF(0, h * 0.75F), new PointF(w, h) };
                            }
                            else if (m == 8 || m == 9) // grow from right
                            {
                                path.AddString(source, new FontFamily(family), 1, h * 0.75F, new PointF((w * 0.85F - size.Width) / 2F, (h - size.Height) / 2F), StringFormat.GenericTypographic);
                                points = new PointF[] { new PointF(w * 0.1F, 0), new PointF(w * 0.9F, h * 0.25F), new PointF(w * 0.1F, h), new PointF(w * 0.9F, h * 0.75F) };
                            }
                            path.Warp(points, new RectangleF(0, 0, w, h));
                            g.FillPath(Brushes.White, path);
                            g.DrawPath(new Pen(brush, 2F), path);
                        }
                    }
                }
                using (var thumb = new Bitmap(128, 40, PixelFormat.Format32bppArgb))
                {
                    using (var g = Graphics.FromImage(thumb))
                    {
                        g.CompositingQuality = CompositingQuality.HighQuality;
                        g.SmoothingMode = SmoothingMode.HighQuality;
                        g.InterpolationMode = InterpolationMode.HighQualityBicubic;
                        Rectangle tr = new Rectangle(0, 0, thumb.Width, thumb.Height);
                        g.DrawImage(bmp, tr);
                        g.DrawRectangle(new Pen(Brushes.White), new Rectangle(0, 0, 127, 39));
                    }
                    using (var ms = new MemoryStream())
                    {
                        ((Image)thumb).Save(ms, ImageFormat.Png);
                        return ms.ToArray();
                    }
                }
            }
        }
        catch { return null; }
    }

    private static Color RandomColor(this Random rnd, Int32 alpha, Int32 min, Int32 max)
    {
        return Color.FromArgb(alpha, rnd.Next(min, max), rnd.Next(min, max), rnd.Next(min, max));
    }
} 
```

}

对于视觉和音频生成，代码独立于验证码生成（源文本）。WAVE 格式的每个字母音频文件大约为 30KB，但每个音乐文件至少为 8MB，这为我提供了随机起始位置的广泛范围（避免 - 经常 - 重复模式）。您可以将代码编译为 dll 或将其（修改）放在代码隐藏文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:14:33.160

这个想法很简单。

对于您拥有的每个角色，您都将其录制成音频，然后按照与显示角色相同的顺序简单地播放录制的音频。

因此，对于字符 A，您将其拼写并记录在一个 wav 文件中，当您听到它清晰而响亮地说出“alpha”时。

阅读此答案以了解如何播放它们：[如何在网络浏览器中播放音频和视频文件？](https://stackoverflow.com/questions/10648471/how-to-play-audio-and-video-files-in-web-browser/10648724#10648724)

## 对后面的代码进行声音编辑

如果您想将音频连接到一个文件，您可以选择一个包含所有现成功能的音频库来进行此混音。

我知道最好的之一是 http://www.un4seen.com/ 上的低音**音频**[库](http://www.un4seen.com/)

当然，因为您只需要添加两个音频，也许您可​​以直接使用**windows 媒体库**，检查它的 SDK [http://msdn.microsoft.com/en-us/library/windows/desktop/dd757738(v =vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757738(v=vs.85).aspx)

Windows 媒体已准备好使用 Windows 内的功能，这些功能与音频等媒体有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T02:44:22.197

我将跳过很多验证码安全性和生成细节来支持我的建议。

我在服务器端使用了语音合成器。

在您的 Web 应用程序项目中，添加对**System.Speech.dll的引用**

我创建了两个页面：

**Start.aspx** -> 用户将看到的页面。有了这两个元素：

```
<span id="lblCaptchaText" runat="server"></span>
<embed height="50px" width="100px" src="AudioPlayer.aspx" /> 
```

后面的代码应该是这样的（简化）

```
public partial class Start : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        // You generate your captcha somehow 
        string captchaString = "E F G 6 7";

        // Let's store the captcha in a place so that our wave generator can find it.
        Session.Add("captcha", captchaString);

        // Display the captcha in the page (this should actually be a blurry non-human readable image)
        lblCaptchaText.InnerText = captchaString;
    }
} 
```

**AudioPlayer.aspx** -> 生成波形输出给用户的页面。HTML 方面没有任何内容。

```
public partial class AudioPlayer : System.Web.UI.Page
{
    protected override void OnPreRender(EventArgs e)
    {
        Response.ContentType = "audio/wav";
        MemoryStream mstream = GetAudio(Session["captcha"] as string);
        mstream.Position = 0;            
        mstream.CopyTo(Response.OutputStream);
        Response.End();
    }

    public static MemoryStream GetAudio(string input)
    {
        MemoryStream mem = new MemoryStream();

        Thread t = new Thread(new ThreadStart(() =>
        {
            SpeechSynthesizer synth = new SpeechSynthesizer();

            synth.Rate = -5;
            synth.SetOutputToWaveStream(mem);
            synth.Speak(input);

        }));

        t.Start();
        t.Join();

        return mem;
    }
} 
```

编译您的网站并运行 Start.aspx，您将听到您的验证码。

使用 Microsoft Speech SDK、性能、资源管理、可扩展性等时需要考虑很多事情。好消息是，他们的语音识别引擎和语音合成器具有称为 Microsoft Speech Server 的服务器“风格”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-03T18:02:18.870

RECAPTHA 默认有这个，那么你为什么要重新发明轮子呢？

[http://blog.recaptcha.net/2008/12/new-audio-recaptcha.html](http://blog.recaptcha.net/2008/12/new-audio-recaptcha.html)

# android - 前台服务导致手机重启 - 为什么？

> ID：10783128
> 
> 赞同：1
> 
> 时间：2012-05-28T10:29:28.250
> 
> 标签：android, service, reboot

**简短版**：Android 是否会重启手​​机（字面意思是重启）以摆脱前台服务？如果是，在什么情况下？

**长版**：我写了一个 GPS 服务，它把自己注册为前台服务（在这种情况下，这是一个好主意 - 当我运行它时，它是我手机上最重要的事情；））。在测试时，该服务**消耗大量资源**——它每秒获取 GPS 数据并写入 SD 卡上的 SQLite DB 文件。稍后我将使用内部存储器并延长轮询时间，但我现在需要测试数据。

该服务按预期工作。我创建了一个启动和停止它的活动，结果看起来很好。但是当我让它继续运行时，手机会在一段时间（半小时左右）后自行重启。由于我在正常使用中从未注意到这一点，因此我将其归因于我的服务。但是，我不知道是什么原因造成的——我应该为 CPU 请求唤醒锁吗？（如果这是问题所在，电话不会直接关机吗？）我是不是内存不足了？我用了太多电池吗？（它是半满的）是否有一个日志可以检查手机重启的原因？

环境：Xperia X10，Android 2.3.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:57:25.433

正如其他人所说，Android 不会重启手机以摆脱前台服务。我遇到的最常见的原因是：

*   由于驱动程序错误或内存损坏等导致的内核恐慌。
*   `Watchdog`由于死锁而杀死主线程并导致`Zygote`重新启动，这几乎就像从用户的角度重新启动一样。

没有详细信息或日志，只有猜测。然而，看起来当您`Service`消耗了大量资源时，它可能会导致调用`Watchdog`on`SystemServer`线程并导致重新启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:49:58.463

AFAIK，不。这对用户来说过于苛刻。前台服务不会以某种方式阻止操作系统像其他任何进程一样终止其进程。

我的猜测是您的设备遇到了一些固件错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:13:05.540

取自 Android 文档：

> 前台服务是一种被认为是用户主动意识到的服务，因此不会在内存不足时被系统杀死

# json - ASP Classic：迭代 json2.js 对象

> ID：10783134
> 
> 赞同：2
> 
> 时间：2012-05-28T10:29:47.660
> 
> 标签：json, asp-classic, vbscript, msxml

我在 ASP Classic 中得到一个 JSON 结果，如下所示：

```
<script language="JScript" runat="server" src="json2.js"></script>
<%
Response.ContentType = "text/html"

Dim HttpReq
Dim Diamond
Set HttpReq = Server.CreateObject("Msxml2.ServerXMLHTTP.6.0")
HttpReq.open "GET", "http://url.com?id=" & Request.QueryString("id"), False
HttpReq.send

res = HttpReq.responseText
Set res = JSON.parse(res)
%> 
```

**有用。**

假设 JSON 结果如下所示：

```
res = {
    gallery: { 
        image1: { img: 'source url', thumb: 'source url' },
        image2: { img: 'source url', thumb: 'source url' },
        image3: { img: 'source url', thumb: 'source url' }
    },
    another_param1: 'foo',
    another param2: 'bar',
    ...
} 
```

**然后我想迭代画廊对象，不是在 JScript 中，而是在 VBScript 中。**

我怎样才能做到这一点？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:11:24.750

如果确实需要在 VBScript 中枚举对象的属性，则需要将对象转换为字典。这是一个简单的函数，它将接受一个 JScript 对象并返回`Scripting.Dictionary`：

```
<script runat="server" language="javascript">

    function JScriptObjectToDictionary(o)
    {
        var dict = new ActiveXObject("Scripting.Dictionary")

        for (var prop in o)
        {
            if (o.hasOwnProperty(prop))
            {
                dict.add(prop, o[prop]);
            }
        }

        return dict;
    }
</script> 
```

使用页面中存在的此函数，您现在可以将`gallery`属性转换为字典：

```
 res.gallery = JScriptObjectToDictionary(res.gallery) 
```

然后您可以迭代为：

```
 For Each key in res.gallery
     Response.Write key & ": " & res.gallery(key).img & "<br />"
 Next 
```

话虽如此，值得指出的是，像 image1、image2 这样命名为系列的属性是一个糟糕的选择。如果 JSON 将画廊定义为一个简单的数组而不是一个对象，那就更好了。如果您能够影响 JSON 设计，您应该要求对其进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:57:50.763

AXE(ASP Xtreme Evolution) JSON 解析器将为您解决问题。只是谷歌它。在文件中包含 AX 后；

```
set Info = JSON.parse(RES)
Response.write(Info.gallery & vbNewline)
Response.write(Info.gallery.image & vbNewline) 
```

编辑 - -

当您需要为画廊创建循环时；

dim key : 对于 Info.keys() Response.write( key & vbNewline ) 中的每个键

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:40:54.223

如果 JSON 很简单并且始终具有相同的结构，您可以自己解析它，它既快速又简单，不需要外部库。

```
res = "{"_
    &"gallery: { "_
    &"    image1: { img: 'source url1', thumb: 'source url1' },"_
    &"    image2: { img: 'source url2', thumb: 'source url2' },"_
    &"    image3: { img: 'source url3', thumb: 'source url3' }"_
    &"},"_
    &"another_param1: 'foo',"_
    &"another param2: 'bar'"_
    &"}"

'convert the JSON string to an array
Set oRegExpre = new RegExp
oRegExpre.Global = true
oRegExpre.Pattern = "{ img.*?}"

'iterate the array (records)
Set records = oRegExpre.Execute(res)
for each record in records
  aRecord = split(record,"'")
  key1 = replace(aRecord(0),"{ ","")
  key2 = replace(aRecord(2),", ","")
  wscript.echo key1 & aRecord(1) 'schow key & value pairs
  wscript.echo key2 & aRecord(3)
next

=>
img: source url1
thumb: source url1
img: source url2
thumb: source url2
img: source url3
thumb: source url3 
```

# python - Google App Engine 和 string.translate 不起作用

> ID：10783141
> 
> 赞同：2
> 
> 时间：2012-05-28T10:30:28.183
> 
> 标签：python, google-app-engine

我正在编写一些简单的脚本来将文本与 rot13 相互转换。所以在适当的类里面我有这个：

```
def post(self): 
dict = string.maketrans("ABCDEFGHIJKLMabcdefghijklmNOPQRSTUVWXYZnopqrstuvwxyz", "NOPQRSTUVWXYZnopqrstuvwxyzABCDEFGHIJKLMabcdefghijklm")

code = self.request.get("text")
code = string.translate(code, dict) 
```

它可以很好地获取参数“文本”，但在 .translate 中它会因内部服务器错误而爆炸：

```
 File "<mypath>\main.py", line 46, in post
    code = string.translate(code, dict)
  File "C:\Python27\lib\string.py", line 498, in translate
    return s.translate(table + s[:0])
UnicodeDecodeError: 'ascii' codec can't decode byte 0x80 in position 128: ordinal not in range(128) 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:31:17.943

```
a = "This is a string".encode("rot13")
b = a.decode("rot13")
print b 
```

它的 python ;D 它完全符合您的要求。

> translate 的 Unicode 版本需要从 Unicode 序数（您可以使用 ord 检索单个字符）到 Unicode 序数的映射。如果要删除字符，请映射到无。
> 
> 我改变了你的函数来构建一个字典，将每个字符的序数映射到你想要翻译的序数：
> 
> ```
> def translate_non_alphanumerics(to_translate, translate_to=u'_'):
>     not_letters_or_digits = u'!"#%\'()*+,-./:;<=>?@[\]^_`{|}~'
>     translate_table = dict((ord(char), translate_to) for char in not_letters_or_digits)
>     return to_translate.translate(translate_table)
> 
> >>> translate_non_alphanumerics(u'<foo>!') u'_foo__' 
> ```
> 
> 编辑：事实证明，翻译映射必须从 Unicode 序数（通过 ord）映射到另一个 Unicode 序数、Unicode 字符串或无（删除）。因此，我将 translate_to 的默认值更改为 Unicode 文字。例如：
> 
> ```
> >>> translate_non_alphanumerics(u'<foo>!', u'bad') u'badfoobadbad' 
> ```

# c - 如何读取 libxml2 中的小数点？

> ID：10783144
> 
> 赞同：2
> 
> 时间：2012-05-28T10:30:55.797
> 
> 标签：c, libxml2

我有一个以下格式的 xml 文件，在专家建议我在这个论坛上这样做之后，我决定使用 libxml2。我开始时知识很少。

```
<ACCOUNT NO="123>
   <STATE> FL </STATE>
   <PERCENT>10.2</PERCENT>
</ACCOUNT> 
```

现在我的问题是，由于 PERCENT 标签的值是浮动的，我如何读取 C 中的 PERCENT 标签值？编辑：我知道我们有 C 函数将它从字符串转换。我的问题是我们在 libxml2 中是否有任何支持的内置函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:37:31.810

libxml 为您提供了一个字符串，您可以使用任何您希望的方法将其转换为 int 或 float ...在 C strtol 或 strtod 中，在 c++ 中使用 stringstream 等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:38:37.133

将其作为字符串读入，然后用于[`strtod`](http://msdn.microsoft.com/en-us/library/kxsfc1ab%28v=vs.100%29.aspx)将其转换为`double`.

# ajax - jQuery load() 函数不会加载远程页面，但在文本编辑器的预览模式下工作。

> ID：10783145
> 
> 赞同：0
> 
> 时间：2012-05-28T10:31:06.450
> 
> 标签：ajax, jquery

基本上，当人们单击链接时，我试图获取远程内容。

它在 Coda HTML 预览窗口中工作，但是当我在真实浏览器（Chrome / FF / Safari）中测试 html 时，它不起作用，不会获取远程内容。（我确信 jquery 正在工作，因为 alert('url is ' + url); 当我点击链接时弹出）

它是有线的。怎么了？

![在此处输入图像描述](../Images/110d7499552e7fc30b31be6d2898b924.png)

![在此处输入图像描述](../Images/8f24ebfdadb5ae27783304522d4f7384.png)

我的代码如下

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sample</title>

  <link type="text/css" href="http://localhost/jquery-ui-1.8.20.custom/css/smoothness/jquery-ui-1.8.20.custom.css" rel="stylesheet" />
  <script type="text/javascript" src="http://localhost/jquery-ui-1.8.20.custom/js/jquery-1.7.2.min.js"></script>
  <script type="text/javascript" src="http://localhost/jquery-ui-1.8.20.custom/js/jquery-ui-1.8.20.custom.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
        $('#links a').click(function(e) {
            var url = $(this).attr('href');
                    alert('url is ' + url);  
            $('#content').load(url);
            e.preventDefault();
        });
    });  // document ready
  </script>

</head>

<body>

<ul id="links">
  <li><a href="http://google.com">Google</a></li>
  <li><a href="http://yahoo.com">Yahoo</a></li>

</ul>
<div id="content"></div>

</body>
</html> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:32:06.293

这是因为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。这是大多数浏览器的安全功能。最常见的解决方法是使用 JSONP，但由于您期望 HTML 作为响应，这对您不起作用。

您需要使用的是服务器端代理，您可以在 PHP/ASP.Net/其他服务器端技术中发出请求以获取 URL 的 HTML，然后通过本地请求将其公开给您的 jQuery。

# ruby - 安装 ree-1.8.7-2011.03 时出现分段错误

> ID：10783147
> 
> 赞同：1
> 
> 时间：2012-05-28T10:31:28.290
> 
> 标签：ruby, segmentation-fault

我正在尝试`ree-1.8.7-2011.03`使用安装`rbenv install ree-1.8.7-2011.03`，但在日志文件中出现此错误：

```
...
ar rcu libruby-static.a array.o bignum.o class.o compar.o dir.o dln.o enum.o enumerator.o error.o eval.o file.o gc.o hash.o inits.o io.o marshal.o math.o numeric.o object.o pack.o parse.o pointerset.o process.o prec.o random.o range.o re.o regex.o ruby.o signal.o sprintf.o st.o string.o struct.o time.o util.o variable.o version.o  dmyext.o
gcc -g -O2  -pipe -fno-common    -DRUBY_EXPORT  -I. -I. -I'/Users/ttt/.rbenv/versions/ree-1.8.7-2011.03/include'  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -c main.c
gcc -g -O2  -pipe -fno-common    -DRUBY_EXPORT  -I. -I. -I'/Users/ttt/.rbenv/versions/ree-1.8.7-2011.03/include'  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -c dmydln.c
gcc -g -O2  -pipe -fno-common    -DRUBY_EXPORT  -L. -L'/Users/ttt/.rbenv/versions/ree-1.8.7-2011.03/lib'    main.o dmydln.o libruby-static.a -L/opt/local/lib -Wl,-rpath,/Users/ttt/.rbenv/versions/ree-1.8.7-2011.03/lib -L/Users/ttt/.rbenv/versions/ree-1.8.7-2011.03/lib -lsystem_allocator -ldl -lobjc   -o miniruby
./ext/purelib.rb:2: [BUG] Segmentation fault
ruby 1.8.7 (2011-02-18 patchlevel 334) [i686-darwin10.8.0], MBARI 0x6770, Ruby Enterprise Edition 2011.03

make: *** [.rbconfig.time] Abort trap 
```

我也试过下载[源代码](http://rubyenterpriseedition.googlecode.com/files/ruby-enterprise-1.8.7-2011.03.tar.gz)，然后从那里安装，但我得到了同样的分段错误。

我在使用 Snow Leopard (10.6.8) 的 Mac 上。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:38:33.017

我通过做它来工作`CC=/usr/bin/gcc-4.2 rbenv install ree-1.8.7-2011.03`。我认为问题在于我有一个旧版本的`ruby-build`.

[从http://www.andygoundry.com/2012/02/24/helping-out-rvm-on-mac/](http://www.andygoundry.com/2012/02/24/helping-out-rvm-on-mac/)得到这个想法

# ios - 为 IOS 应用程序创建模型的开源工具

> ID：10783150
> 
> 赞同：3
> 
> 时间：2012-05-28T10:31:52.817
> 
> 标签：ios, open-source, mockup-tool

有人可以建议我使用任何开源工具来创建 IOS 应用程序模拟屏幕吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T11:40:26.353

这里有一个非常详尽的商业和非商业工具列表：http: //c2.com/cgi/wiki? [GuiPrototypingTools](http://c2.com/cgi/wiki?GuiPrototypingTools)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T10:51:19.673

试试这个[https://itunes.apple.com/us/app/imockapp/id588325430?ls=1&mt=8](https://itunes.apple.com/us/app/imockapp/id588325430?ls=1&mt=8)。没有开源，但它是免费的，没有广告

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T10:42:52.873

Xcode（不是开源的 - 但免费！）带有这个内置的，非常容易在故事板/xib编辑器中设计您的界面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T10:49:49.670

**iOS 5 / iPhone 4S PSD：**

[http://www.teehanlax.com/downloads/ios-5-gui-psd-iphone-4s/](http://www.teehanlax.com/downloads/ios-5-gui-psd-iphone-4s/)

**iPad 视网膜 PSD：**

[http://www.teehanlax.com/downloads/ipad-gui-psd-retina-display/](http://www.teehanlax.com/downloads/ipad-gui-psd-retina-display/)

# mysql - 在一行中获取多个类别

> ID：10783151
> 
> 赞同：1
> 
> 时间：2012-05-28T10:31:57.687
> 
> 标签：mysql, sql

我的表格`company`数据是：

```
id | name | email
 1 | abc  | any@any.com
 2 | xyz  | as@as.com 
```

其他`category`数据表是：

```
id | name
1  | cat1
2  | cat2
3  | cat3 
```

类别和公司的连接表是`join_cat_company`

```
category_id | company_id | main
          1 |           1| 1
          2 |           1| 0
          3 |           1| 0
          2 |           2| 1
          1 |           2| 0
          3 |           2| 0 
```

在连接表`main`中用于主要类别

我想要这样的结果：

```
 company_name | category
           abc | cat1,cat2,cat3
           xyz | cat2,cat1,cat3 
```

主类别必须是类别列表的第一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:34:29.570

您正在寻找[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:49:25.813

```
SELECT   company.name AS company_name,
         CONCAT_WS(',',
           GROUP_CONCAT(  maincat.name),
           GROUP_CONCAT(othercats.name)
         ) AS category
FROM     join_cat_company
       JOIN company                ON join_cat_company.company_id  =   company.id
  LEFT JOIN category AS maincat    ON join_cat_company.category_id =   maincat.id
                                  AND join_cat_company.main = 1
  LEFT JOIN category AS othercats  ON join_cat_company.category_id = othercats.id
                                  AND join_cat_company.main = 0
GROUP BY company.name 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/b3269/1)上查看。

* * *

**编辑**

除了上面@lanzz 的出色[观察](https://stackoverflow.com/questions/10783151/get-multiple-category-in-a-single-row/10783183#comment14024438_10783183)，您可以简单地执行以下操作：

```
SELECT   company.name AS company_name,
         GROUP_CONCAT(
           category.name ORDER BY join_cat_company.main DESC
         ) AS category
FROM     join_cat_company
       JOIN company  ON  company.id = join_cat_company.company_id
  LEFT JOIN category ON category.id = join_cat_company.category_id
GROUP BY company.name 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/b3269/5)上查看。

# java - 如何在java中添加自己的数字范围

> ID：10783153
> 
> 赞同：0
> 
> 时间：2012-05-28T10:32:21.730
> 
> 标签：java, numbers, int, range

我想在 Java 中创建自己的数字范围，并且仍然能够使用正常的数字。我似乎无法解决它！无需对每个结果进行硬编码。

比方说。整数像 0, 1, 2, 3, 4, 5, 6, 7, 8...。依此类推（我知道！也有负整数）

现在，我想制作我自己的“数字”，既可以用作整数，也可以用作它们自己的类型。

数字范围的简单切割是 1, 2, 3, 5, 4, 7, 6, 9, 10, 11, 8, 13, 14, 15, 12, 17, 18, 19, 20, 21, 22, 23、16……等等……所有数字的表格如下所示。（我不需要 767 以上的任何数字，但下一个数字是 512，然后是 769+ 等等。

```
1
2
3
5
4
7
6
9-11
8
13-15
12
17-23
16
25-31
24
33-47
32
49-63
48
65-95
64
97-127
96
129-191
128
193-255
192
257-383
256
385-511
384
513-767

```

现在让我们称这些数字为 tni（与 int 相对）

假设我想将 (int)A 添加到 (tni)B 这应该是正常的数学运算。因此，如果 A = 4 且 B = 6，则结果将是 10，而不是 8。

但如果我想看看 2 个 tni 中哪一个是最高的。假设 A=8 和 B=10，id 会告诉我 A 更高，因为在 tni 范围内，8 在 10 之后。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:15:11.267

我认为这样做的最好方法是创建一个数组，表示每个“正常”int 在 tni 序列中的位置。

例如：

```
int[] tniArray = new int[768];

tniArray[0] = 0;
tniArray[1] = 1;
tniArray[2] = 2;
tniArray[3] = 3;
tniArray[4] = 5; //This is because the number 4 comes at position 5 in the tni sequence
tniArray[5] = 4;
tniArray[6] = 7;
tniArray[7] = 6;
tniArray[8] = 11;
//etc. 
```

然后，您可以将它们与如下方法进行比较：

```
boolean IntGreaterThanTni(int Int, int Tni){
    return (Int > tniArray[Tni]);
} 
```

是的，这是一个相当不优雅的解决方案，但看起来你首先遇到了一个不优雅的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:01:53.563

你的问题很令人困惑，但这就是我认为你的意思。你有一个有序的数字序列，它不是由任何函数定义的。您希望能够判断序列中的给定数字是在同一序列中的另一个之前还是之后。

看起来你不能使用像二进制搜索这样的东西，所以如果你想确定一个数字在序列中的位置，快速而肮脏的方法是从头开始遍历序列，并且当你找到你的目标号码时停止。潜在地，这意味着您可以遍历整个序列两次，以便在序列中找到两个数字 A 和 B 的位置，然后确定一个是否在另一个之前。

下面的代码可以满足您的需求。这不是很OO，但它有效。

```
 public class FunnySequence {
    public static void main(String[] args) {
        // First few numbers in the sequence
        int arr[] = new int[]{
                1,
                2,
                3,
                5,
                4,
                7,
                6,
                9,
                10,
                11,
                8
        };

        int a = 8;
        int b = 10;

        System.out.println("Position of A: "+ 
                   findPosition(arr, a));
        System.out.println("Position of B: "+ 
                   findPosition(arr, b));
    }

    public static int findPosition(int[] arr, int num) {
        for (int i = 0; i < arr.length; i++) {
            if (num == arr[i]) {
                return i;
            }
        }
        return -1;
    }
} 

```

# ios - 从选项卡视图控制器执行 Push Segue

> ID：10783156
> 
> 赞同：1
> 
> 时间：2012-05-28T10:32:28.800
> 
> 标签：ios, tabs, segue

我有一个标签栏控制器应用程序，标签栏控制器被分叉成几个“标签”视图控制器，在一个视图控制器中我想将用户重定向到另一个视图控制器。我创建了一个从该选项卡视图控制器到目标视图控制器的 segue，并给它一个标识符。我在“viewDidAppear”中调用“performSegueWithIdentifier”来重定向用户。

当segue为“Modal”时它工作正常，但是由于我想保留标签，我想通过“Push”调用segue。但是，一旦我将 segue 更改为“Push”，它就不再工作（它不会尝试转到目标视图控制器）。该应用程序没有在模拟器上崩溃，而只是停留在原始选项卡视图控制器上。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T10:57:44.223

“推送”是一种植根于 UINavigation 控制器的 UIViewController 堆栈机制。

除非选项卡中的视图控制器是导航控制器，否则您无法执行推送。

举个例子

```
TabBar VC 

...Tab 1 -> UIViewController
...Tab 2 -> UIVIewController
...Tab 3 -> UINavigationController -> UIViewController(root) 
```

只有 Tab 3 可以执行 push segue。

# phpunit - PHPUnit 未正确安装

> ID：10783160
> 
> 赞同：0
> 
> 时间：2012-05-28T10:32:36.200
> 
> 标签：phpunit

我试图通过 eclipse helios 使用 PHPUnit，但每次它说“无法打开输入文件：.\pear\PHPUnit2\TextUI\TestRunner.php”

我确实卸载并安装了 PHPUnit，但它也无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:50:31.503

PHPUnit2 是一个不再使用的古老版本。当前的 PHPUnit 主要版本是 3，文件路径中不再有“2”。

将您的 Eclipse 设置为使用 PHPUnit3，而不是 PHPUnit2。

# javascript - cloneNode(true) 是这里的一个选项吗？

> ID：10783163
> 
> 赞同：0
> 
> 时间：2012-05-28T10:32:49.490
> 
> 标签：javascript, dom

我*认为*这里的答案是“不”，但我想仔细检查......

我的文章看起来基本上是这样的......

```
<article id="thisArticle">
  <h1 id="thisHeader"></h1>
  <ul class="thisList">
    <li class-"listItem">some content</li>
    <li class-"listItem">some content</li>
  </ul>
</article> 
```

....并且我想使用 cloneNode 将其复制到非 DOM 并更改其内容，但显然需要更改文章和 h1 标签上的 id。在文章中执行此操作很容易：使用 JavaScript setAtrribute 或 jQuery .attr()（后者可能更好）。但我不确定如何定位 h1，所以我可以更改它的 id。

我假设我不能使用 cloneNode(true) 并复制父级及其子级。相反，我将不得不使用 cloneNode(false) 并复制父级，然后使用 createElement 和 appendChild 手动添加子级。这很好，但我不是 100% 确定。作为一个仅供参考，我不会复制任何数据和/或事件。

提前感谢您的帮助。

# c - 具有标准用户权限的 Windows 7 中的 dpinst.exe 行为

> ID：10783164
> 
> 赞同：1
> 
> 时间：2012-05-28T10:33:01.857
> 
> 标签：c, windows, winapi, windows-7, driver

我在我的驱动程序包中使用 dpint.exe。我在 Windows 7 64 位操作系统中面临下面提到的场景。

> 当 UAC 启用时，它在管理员模式（具有管理员权限的用户）、标准用户模式和访客模式下按预期工作。（即，在标准用户模式和访客模式下提示一个要求管理员密码的窗口）。
> 
> 当 UAC 被禁用时，在管理员模式下（具有管理员权限的用户）它“从不”显示任何窗口说“你想允许以下程序对此计算机进行更改”。（这种行为也是意料之中的行为！！）“但在标准用户模式下，当我单击驱动程序安装程序可执行文件（在内部调用 dpinst.exe）时，系统挂起，当我尝试重新启动时，它说后台进程正在运行，你呢？想要强制重启。在访客登录模式下，还会出现一个弹出窗口，显示“Setup.exe 停止工作”。如果上述问题是因为“Dpinst.exe 需要管理员权限”，为什么 windows 没有显示警告消息而是被挂起？ ?

以及如何告诉用户更改为管理员以继续安装..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:57:43.063

您只能通过检测用户正在运行的凭据来“告诉用户更改为管理员继续”。当 UAC 被禁用时，安装包必须处理此任务并检测是否需要管理凭据来安装应用程序。此信息通常在要安装的应用程序的 Manifest 中配置。

UAC 和 Manifest 的一个非常好的[概述](http://technet.microsoft.com/en-us/magazine/2009.07.uac.aspx)解释了这一点

# jsf - 如何使primefaces中的树节点可删除

> ID：10783167
> 
> 赞同：1
> 
> 时间：2012-05-28T10:33:26.357
> 
> 标签：jsf, primefaces, drag-and-drop, datatable, tree

我有 p:panelGrid 组件，它由两个组件组成 - p:tree 和 p:dataTable。问题涉及无法拖动数据表的元素并放入树节点 - 是否可能。提前，非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:31:03.737

primefaces 目前不支持拖放树节点。但是，在此[页面](http://primefaces.org/funding.html)中，您可以看到这是社区资助中的功能请求。当该功能的捐款达到 1000 美元时，它将被实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:41:27.267

Treenode 拖放工作较早。© 2009-2010 • Prime Technology.在 Mojarra-2.0 上运行 PrimeFaces-3.0-SNAPSHOT。为什么要删除此功能？任何答案

# ruby-on-rails - 博客平台的推荐 URL 格式

> ID：10783173
> 
> 赞同：4
> 
> 时间：2012-05-28T10:33:47.370
> 
> 标签：ruby-on-rails, ruby, api, url, rest

我正在构建一个博客平台（RoR），并计划使用以下格式，有什么缺点吗？

```
# All Users:
http://www.example.com/users/

# A single user (123 is the user id, id is needed for uniqueness)
http://www.example.com/users/123/peter

# All Categories
http://www.example.com/categories/

# A single category listing (123 is the cat id, note: job is singular)
http://www.example.com/categories/123/job

# All Tags
http://www.example.com/tags/

# A single tag listing (123 is the tag id, note: car is singular)
http://www.example.com/tags/123/car

# A single post
http://www.example.com/posts/123/my-title 
```

有什么建议或改进的地方吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T10:31:10.717

这完全取决于您的应用程序最重要的主题是什么。假设应用程序的主要主题是帖子，那么帖子的 URL 必须“更接近”根 URL。

所以他们看起来像这样：

```
# A single post
http://www.example.com/123-my-post-title

# All Users:
http://www.example.com/users/

# A single user (supposing the username must be unique)
http://www.example.com/users/peter

# All Categories
http://www.example.com/categories/

# A single category listing (supposing the category name must be unique)
http://www.example.com/categories/job

# All Tags
http://www.example.com/tags/

# A single tag listing (supposing tags must be unique)
http://www.example.com/tags/car 
```

这涉及您路线的 2 处更改：

1) 去掉 URL 中的“/posts/”。为此，您可以像这样声明您的资源：

```
resources :posts, :path => "/" 
```

2) 删除除 post#show 之外的所有 URL 中的 id（来自不同用户的帖子有时可能具有相同的标题，如果不是，您也可以在这些情况下省略 ID）。

为此，应该`to_param`像这样覆盖模型中的方法：

```
 class Post < ActiveRecord::Base
      def to_param
        "{id}-#{title.parameterize}"
      end
    end 
```

或者如果您发现压倒一切困难，请使用[friendly_id gem 。](https://github.com/norman/friendly_id)`to_param`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:23:58.813

我遇到了同样的问题，我遇到了一个很棒的宝石，可以让你的网址 SEO 和人性化：[friendly_id](https://github.com/norman/friendly_id "友好ID")。

这是一个很棒的截屏视频，可以开始使用它：[Pretty URLs with FriendlyId](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)。

我不打算在这里详细介绍，因为我相信您会在文档或截屏视频中找到所需的一切。快乐的搜索引擎优化！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:28:01.293

由于（我假设）用户具有唯一的昵称，因此 url 可以更简单：

```
http://www.example.com/users/peter 
```

这同样适用于标签和类别。您只是不要忘记根据参数化检查名称的唯一性。

它还有助于避免重复具有相似名称的对象：

```
"peter the great".parameterize => "peter-the-great"
"Peter-THE-Great".parameterize => "peter-the-great" 
```

这只是我的观点，在大多数情况下，使用了独特的逻辑`id-name`或`id/name`（查看这个问题的 url :)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:40:18.407

我承认我对 SEO 的了解并不像 StackOverFlow 上一些更有经验的人那样深入。但是我确实知道，当涉及到 URL 时，通常适用*“越短且可读性越好”的*规则。因此，在 URL 中使用 id 是一个很大的挫折，并且可能会对您的 SEO 得分产生负面影响，因为您的 SEO 得分会被 google 或其他搜索引擎所吸引。

您可以在 google 的免费 SEO 入门指南中阅读有关它的信息，您可以在此处找到 PDF：http: [//static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/nl//webmasters/docs/搜索引擎优化入门指南.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/nl//webmasters/docs/search-engine-optimization-starter-guide.pdf)

有关 URL 的部分位于此 PDF 的第 8 页。

至于您的应用程序，避免使用 ID 的一种方法是为您的用户使用昵称。您会发现这在网络上的所有论坛上都很常用。这些昵称始终具有唯一的限制，以确保始终只有一个用户具有该昵称。它还使您可以为这些昵称创建限制，例如禁止在昵称中使用数字，这样人们就无法创建像`John123`.

最后，您希望得到这样的网址：

```
http://www.example.com/users/uniquenickname 
```

使用类别和标签也是如此。

当涉及到帖子时，您实际上有 2 个选项，具体取决于您对帖子的确切含义。如果通过帖子您只是指博客条目，那么您可以简单地使用条目的类别、用户和标题的组合来创建一个唯一的 url。

例如 ：`http://www.example.com/category/uniquenickname/entrytitle`

如果您在对博客条目的评论中评论帖子，那么使用上面提供的 URL 就可以了，但您可能希望在 robots.txt 中添加不允许爬虫索引这些 URL。这背后的原因是，您倾向于让垃圾邮件机器人在博客周围发布广告和指向您绝对不希望与之关联的网页的链接，并且您希望阻止爬虫索引这些链接，这可能会对您产生相当负面的影响搜索引擎优化得分。

我希望这有帮助 ：）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-07T02:36:51.487

我非常自私和自豪，所以尽量让抓取我的网站变得困难：P，尽量不要在你的 url 上使用数字 ID。它可以很容易地抓取你的整个网站。尽可能制作唯一的网址。

如果您的帖子标题是唯一的，则将其设为 id 并在您的 url 中使用它。

如果您的用户名是唯一的，则将其用作 ID。例如：

# 所有用户： [http ://www.example.com/users/](http://www.example.com/users/)

```
# A single user 
http://www.example.com/users/peter

# All Categories
http://www.example.com/categories/

# A single category 
http://www.example.com/categories/job

# All Tags 
http://www.example.com/tags/

# A single tag listing (They are unique, each one should be a key itself)
http://www.example.com/tags/car

# A single post
http://www.example.com/posts/date-here/my-unique-title 
```

谷歌喜欢至少有**三位数**的网址。将日期添加到新闻 url 是一个很好的做法，它也增加了 SEO 价值。像这样 `http://www.example.com/posts/2012/06/06/my-unique-title`

# c# - 动态网格视图中的Horizo ntalAlign

> ID：10783175
> 
> 赞同：1
> 
> 时间：2012-05-28T10:34:01.687
> 
> 标签：c#, asp.net

我`GrdiView`在 asp.net 页面上有一个。我将数据源设置为`DataTable`. 如果单元格中的值是字符串类型，我需要设置`HorizontalAlign`为左，否则如果它是小数，我希望它向右对齐。请让我知道如何实现这一点。的代码`GridView`如下：

```
 <asp:GridView ID="gridViewReport" runat="server" Height="1px"       OnRowDataBound="UsersGVRowDataBound" GridLines="both" Style="z-index: 100; 
        left: 2px; position: absolute; top: 1px; " Width="939px" CellPadding="4"   ForeColor="#333333" AllowSorting="True" OnSorting="gridViewReport_Sorting" Font-Names="Verdana" Font-Size="12px" OnSelectedIndexChanged="gridViewReport_SelectedIndexChanged1">
        <AlternatingRowStyle BackColor="White" />
        <RowStyle HorizontalAlign="Left" BackColor="#EFECE5" />            
        <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#C0F6C0" ForeColor="#333333" Font-Bold="True" />
        <HeaderStyle BackColor="#CDE472"  Font-Bold="True" ForeColor="DarkGreen" HorizontalAlign ="Left"  Font-Italic="False" Font-Names="Verdana" Font-Overline="False"/>
        <EditRowStyle BackColor="#EAEAAE" />            
    </asp:GridView> 
```

另外，设置的代码`DataSource`如下：

```
gridViewReport.DataSource = _reportTable;
gridViewReport.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:37:32.280

如果您的每一列都包含相同类型的数据，您就会知道哪些列带有小数，哪些不带有

所以考虑到你`DataTable`有**两列**，第一列带有字符串，第二列带有小数，你可以这样做

```
 protected void gridViewReport_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Cells[0].HorizontalAlign = HorizontalAlign.Left;
            e.Row.Cells[1].HorizontalAlign = HorizontalAlign.Right;       
        }
    } 
```

否则，如果您的列包含可以是小数或字符串的文本，您可以执行此操作（例如，第二列中的`DataTable`文本**也可能包含十进制格式**）

```
 protected void gridViewReport_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            decimal val;
            if(decimal.TryParse(e.Row.Cells[1].Text, out val))
                e.Row.Cells[1].HorizontalAlign = HorizontalAlign.Right;
            else
                e.Row.Cells[1].HorizontalAlign = HorizontalAlign.Left;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:39:23.750

您可以处理 gridViewReport_ItemCreated() 事件并将各个列的对齐设置为

`e.Item.Cells[<zero-based-index-of-column>].Style["text-align"] = "right";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:03:51.490

您可以处理它 gridViewReport_ondatabound 事件。

```
protected void gridViewReport_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            decimal cellValue = 0.0m;
            DataRow dr = ((DataRowView)e.Row.DataItem).Row;

            if (dr[urs_cell_index] != null)
            {
                if (decimal.TryParse(dr[urs_cell_index].ToString(), out cellValue))
                {
                    e.Row.Cells[urs_cell_index].HorizontalAlign = HorizontalAlign.Right;
                }
                else
                {
                    e.Row.Cells[urs_cell_index].HorizontalAlign = HorizontalAlign.Left;
                }
            }
        }
    } 
```

# android - android中通过WiFi的套接字连接

> ID：10783177
> 
> 赞同：1
> 
> 时间：2012-05-28T10:34:07.260
> 
> 标签：android, sockets, android-wifi

我正在尝试通过 wifi 实现套接字连接以读取一些数据。任何人都可以帮助我如何实现这一目标。提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-28T10:39:34.107

请参阅[Android API](http://developer.android.com/reference/java/net/Socket.html)。您还需要将[Internet 权限](http://developer.android.com/reference/android/Manifest.permission.html)添加到清单中。

# vb.net - VB.NET 阻止 AppCursor 即使在多线程时出现

> ID：10783189
> 
> 赞同：0
> 
> 时间：2012-05-28T10:34:58.530
> 
> 标签：vb.net, multithreading

我正在尝试编写一个 Windows 服务来监视进程是否正在运行。

我使用 Threading.Timer 每秒检查一次进程。但是，如果我这样做，每次检查进程时都会得到一个烦人的 AppStarting 光标。

```
 For Each p As Process In Process.GetProcesses
        If p.MainWindowTitle = String.Empty = False Then
            If p.ProcessName = "MyApp2Monitor" Then
                WriteToFile("C:\log.txt","app started")
                Exit For
            End If
        End If
    Next 
```

我还尝试了后台程序和其他多线程变体。一切都保持响应，但烦人的光标每秒都会出现。

**如何摆脱 AppStarting 光标？我可以禁止进程列表例程触发可能触发 AppStarting 游标的繁忙系统事件吗？**

谢谢

# java - 为什么Java中的main方法总是需要参数？

> ID：10783190
> 
> 赞同：27
> 
> 时间：2012-05-28T10:34:58.580
> 
> 标签：java, main

为什么Java中的main方法总是需要参数？为什么我们`String[] args`每次都要写，而不是在使用任何参数时才写？

像这样的方法会产生`Main method not found`编译器错误。由于我们从不对 main 方法使用任何参数，因此应该允许这样做。

```
public static void main()
{
} 
```

这不是一个面试问题。它只是在编程时出现在我的脑海中。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-28T11:20:36.067

基本上，有四个答案：

1.  因为它就是这样设计的。是的，我知道这是一个循环的原因。但关键是，这就是现状，而且不会改变。因此，除非您打算设计自己的语言，否则这个问题没有实际意义。

2.  设计的清洁度（又名 DRY 原则）。当一个人可以完成这项工作时，不要指定两个入口点签名。很明显，它可以。

3.  语义简单。假设（假设地）Java*确实*同时支持`void main(String[])`和`void main()`入口点。如果一个类定义了这两种方法会发生什么？这是一个错误吗？如果不是，当有歧义时，哪一个优先？这还令人困惑吗？

    通过仅识别`void main(String[])`，JLS 避免了该问题¹。

4.  这类似于标准的 C 和 C++ 入口点签名。（诚​​然，一些 C / C++ 运行时也支持其他非标准入口点......但这并不是一件好事...... IMO。）

这并不意味着以另一种方式做这件事肯定是错误的。例如，C# 为您提供替代签名，并通过要求开发人员以其他方式指定入口点来处理歧义问题。

FWIW，[这个维基百科页面](http://en.wikipedia.org/wiki/Main_function)描述了多种语言的“主要”方法。

* * *

^(1 - 虽然你有一个“问题”，Java 新手可能会（错误地）*猜测*多个入口点应该工作，尝试一下，然后得到一个惊喜。但我认为任何设计都无法应对“猜测编程”。)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T10:36:37.293

因为`java`运行应用程序的工具会查找`main`具有特定签名的 a，所以它知道它调用的是正确的。Java 有方法重载，所以在查找方法时，必须指定一个相当完整的签名。假设该`java`工具可以做一些更复杂的事情（寻找特定的签名，如果没有找到它，则查找任何签名，`main`如果它只找到一个就调用它），但这不是 Java 设计者决定做的事情（*主观*上，FWIW，我认为这是最好的——保持简单）。

您可以在 Java 语言规范[第 12 章：执行](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html)中找到详细信息。请注意，当 Java 获得变量参数列表时，可以以`main`两种不同的方式声明：

```
public static void main(String[] args)
// or
public static void main(String... args) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:38:30.587

当 JVM 开始执行 java 程序时，它会搜索具有此签名的 main 方法（即字符串数组）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T10:53:51.400

这只是他们设计的方式。由此推论，您可能会问为什么它的表亲（C#）允许带或不带参数的 Main 方法，这正是他们设计的方式。

那里没有严肃的理由，每个语言设计者都有自己的偏好，您应该遵循哪些原则。有时这是由我们推断或同时坚持（有时我们无法按照自己的方式行事）。

嗯……这让我想起了我现在正在使用的操作系统。在 OS X Lion 之前，您只能在窗口的右下角调整大小。在他们最终在其操作系统上的任何窗口角落调整大小之前，他们等待了 28 年以上。

即使我非常喜欢 Mac OS，我也不会在一个窗口只能在一个角落调整大小之前为他们的立场辩护。狂热是一回事，但盲目的坚持是另一回事。

**因此，您正在练习批判性思维，而不是盲目地相信 Java 的主要方法签名是唯一正确的方法**，这是一件好事

 *** * *

一个题外话，等待 Mac 在任何角落都有可调整大小的边缘类似于我等待 Java 拥有一流的属性。尽管有 JSON 名称（**Java** Script Object Notation，当然 Javascript 不是 Java），但 C# 对象初始化器（通过其属性初始化器和集合初始化器）与使用 JSON 的 Java 对象初始化器相比更接近 JSON。C# 对象初始化器非常简洁，非常类似于 JSON。

C＃

```
var p = new {
    Lastname = "Lennon",
    Firstname = "John",
    PlacesBeen = 
        new[]
        {
            new { City = "Liverpool", Country = "England" },
            new { City = "New York", Country = "US" },
            new { City = "Tokyo", Country = "Japan" }
        }
};

return Json(p); 
```

Javascript：

```
var p = {
    "Lastname" : "Lennon",
    "Firstname" : "John",
    "PlacesBeen" :             
        [
            { "City" : "Liverpool", "Country" : "England" },
            { "City" : "New York", "Country" : "US" },
            { "City" : "Tokyo", "Country" : "Japan" }
        ]
}; 
```

因此，借助 C# 的一流属性（不拘泥于方法）和集合初始化器，不仅代码变得简洁明了，而且现在与大多数开发人员现在使用的数据交换格式（即 JSON）非常相似。

Java 的对象初始化器语法与 JSON 风格相去甚远。我不会在这方面为 Java 的设计决策（例如属性语法/设计）辩护:-)

因此，与我不会为 Java 语言设计者对 Java 属性语法/设计的设计决策辩护一样，我也不会辩护`public static void main(String[] args)`ツ</p>

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-28T10:39:40.287

当您尝试运行 java 程序时，JVM 将使用**字符串数组**作为参数搜索 main 方法，以从那里开始执行程序。由于您给出的方法没有该签名，因此它会引发异常**No main method found**

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-28T10:40:30.783

我认为 Java 从 c/c++“复制”了这个习惯，并在 java.c 中硬编码：

```
 /* Get the application's main method */
  mainID = (*env)->GetStaticMethodID(env, mainClass, "main",
                                     "([Ljava/lang/String;)V");
  if (mainID == NULL) {
      if ((*env)->ExceptionOccurred(env)) {
          ReportExceptionDescription(env);
      } else {
        message = "No main method found in specified class.";
        messageDest = JNI_TRUE;
      }
      goto leave;
  } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-11-05T15:57:57.870

java就是这样设计的。如果我们不写字符串 args[] ，那么程序将被编译但不会运行。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-09-24T04:25:40.610

它可能是因为大多数输入来自 main() 外部，例如来自命令行参数，因此要捕获这些值，它具有 String[]args 签名。**

# mysql - MySQL表 - 截断或不截断？

> ID：10783193
> 
> 赞同：2
> 
> 时间：2012-05-28T10:35:31.673
> 
> 标签：mysql, import, phpmyadmin, truncate

我的实时（托管）数据库和开发（本地）数据库中都有一个表。我想将一堆记录放入实时表中。

我一直在做的事情如下：

1.  使用 phpMyAdmin 将活动表的副本导出/导入回开发数据库。
2.  使用 C 批处理文件将新数据加载到开发表中。
3.  再次使用 phpMyAdmin 将更新后的开发表的副本导出/导入到实时数据库。

就目前而言，这一切都很好。

问题是这样的：如果一条记录已在活动表中删除，第 1 步不会将其从开发表中删除（即使您选择“用文件替换表”选项）。然后在步骤 3 中在活动表中重新创建此记录。

我的问题：我应该在第 1 步导入之前截断开发表（当然是在备份之后）吗？我的导入会将开发表上的自动增量设置为与实时表上的相同点吗？还是我要把事情搞得一团糟？

谢谢。

编辑：这是桌子。（无法更好地格式化；抱歉。）

> 列 - 类型 - NULL - 默认
> 
> cnum smallint(6) 否
> unum smallint(6) 否 1
> cat_subject smallint(2) 否 0
> cat_major smallint(2) 否 0
> cat_minor smallint(2) 否 0
> cat_flavour char(1) 是 NULL
> unmod varchar(255) 否

指数：

> 键名类型唯一填充列基数排序空注释
> 
> PRIMARY BTREE 是 否 cnum 2214 A 否

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T11:15:24.167

截断 MySQL 中的表将重置自动编号/身份列。除非您的脚本明确地将自动编号从 live 插入到 dev 中，否则您将遇到一个大问题。

如果您可以发布一些表结构和代码，我将能够通过一些代码为您提供更好的答案。

更新：

只是为了澄清一点关于自动编号和 MySQL 的信息。让我们创建一个表，如下所示：

```
CREATE TABLE `testcust` (
 `TestCustID` int(11) NOT NULL AUTO_INCREMENT,
  `Name` varchar(32) DEFAULT NULL,
 PRIMARY KEY (`TestCustID`)
) ENGINE=InnoDB; 
```

如果我使用以下查询插入数据：

```
INSERT INTO `test`.`TestCust`
(`TestCustID`,
  `Name`
)
VALUES
(
  NULL,
 'Pieter'
); 
```

并在这张桌子上运行一个 select * 我会看到这样的东西。

```
TestCustID     Name
 '1',          'Pieter' 
```

由于我没有指定 TestCustID MySQl 将生成一个。如果我运行以下插入查询：

```
INSERT INTO `test`.`TestCust`
 (`TestCustID`,
  `Name`
 )
 VALUES
 (
     15,
     'Pieter'
 ); 
```

然后在我会看到的桌子上运行一个 select *

```
TestCustID     Name
 '1'          'Pieter'
 '15'         'Pieter' 
```

因此，如果您截断表，它将 TestCustID 重置为 1（从头开始）。如果您在插入语句中明确指定生产/实时系统中的自动编号，如果您未在插入语句中指定自动编号，您将保持同步你会失去同步。

希望能更清楚一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:51:41.533

截断后您不需要导出/导入该 Primary Auto Increment 列。只需导入其余的列。它将自动管理自动增量列。

# java - java文件排序顺序在windows和linux的区别

> ID：10783195
> 
> 赞同：5
> 
> 时间：2012-05-28T10:35:55.450
> 
> 标签：java, windows, linux, sorting

我在 windows/Linux 中有一个文件夹，其中包含以下文件

```
test_1a.play
test_1AA.play
test_1aaa.play
test-_1AAAA.play 
```

我正在读取文件并存储它但是 windows 和 linux 给出了不同的顺序。由于我的应用程序在两个平台上运行，我需要一致的顺序（Linux 顺序）。任何解决此问题的建议。

```
File root = new File( path );
File[] list = root.listFiles();
list<File> listofFiles = new ArrayList<File>();
.....
for ( File f : list ) {

...
read and store file in listofFiles
...
}
Collections.sort(listofFiles); 
```

**Windows 给了我以下命令**

```
test-_1AAAA.play
test_1a.play
test_1AA.play
test_1aaa.play 
```

**Linux给了我以下命令**

```
test-_1AAAA.play
test_1AA.play
test_1a.play
test_1aaa.play 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T10:38:38.143

`Comparator<File>`由于`File.compareTo`使用“系统”命令，因此您将需要实现自己的。

我认为（未检查）Linux 按文件名使用“标准”顺序（区分大小写），因此示例实现可能如下所示：

```
public static void main(String[] args) {
    List<File> files = new ArrayList<File>();
    files.add(new File("test_1a.play"));
    files.add(new File("test_1AA.play"));
    files.add(new File("test_1aaa.play"));
    files.add(new File("test-_1AAAA.play"));

    Collections.sort(files, new Comparator<File>() {
        @Override
        public int compare(File o1, File o2) {
            String p1 = o1.getAbsolutePath();
            String p2 = o2.getAbsolutePath();
            return p1.compareTo(p2);
        }
    });

    System.out.println(files);
} 
```

输出：

```
[test-_1AAAA.play, test_1AA.play, test_1a.play, test_1aaa.play] 
```

# javascript - jQuery识别来自用户的点击，而不是触发

> ID：10783197
> 
> 赞同：3
> 
> 时间：2012-05-28T10:36:15.327
> 
> 标签：javascript, jquery

所以我有代码：

```
function randomClick(interval){
        $(".thumbnail_holder .nav li:not(.empty):eq("+select+") a").trigger("click");
        window.randomTimer = setTimeout("randomClick("+interval+")", interval);
} 
```

我需要它，所以当用户单击时`".thumbnail_holder .nav li a`，它会清除间隔，例如

```
$(".thumbnail_holder .nav li a").on("click", function(e){
    e.preventDefault();
    clearTimeout(window.randomTimer);
}); 
```

然而，上面的代码也发生在`.trigger("click");`.

该功能有什么方法`.on`可以区分两者吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T10:39:35.357

`e.which`当事件被 调用时将是未定义的`trigger()`，但是`1`当您左键单击它时将是。

```
$(".thumbnail_holder .nav li a").on("click", function(e){
    e.preventDefault();

    if (typeof e.which !== "undefined") {
        clearTimeout(window.randomTimer);
    }
}); 
```

其他选项是在您手动触发时传递一些数据，并在事件处理程序中检查它（请`extraParameters`参阅[`trigger()`](http://api.jquery.com/trigger/).

```
function randomClick(interval){
    $(".thumbnail_holder .nav li:not(.empty):eq("+select+") a").trigger("click", [true]);
    window.randomTimer = setTimeout("randomClick("+interval+")", interval);
}

$(".thumbnail_holder .nav li a").on("click", function(e, wasTrigger){
    e.preventDefault();

    if (!wasTrigger) {
        clearTimeout(window.randomTimer);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:25:23.833

在与马特的完全不同的策略上，您*可以*利用以下功能`.triggerHandler()`- 即它不会冒泡，而手动单击（和`.trigger()`）会冒泡。

通过将点击功能分成两个处理程序，一个直接附加，另一个委托给合适的容器，您有一种机制来执行两个处理程序以响应手动单击，但只有一个响应`.triggerHandler()`.

```
$(document).on('click', 'a', function(e) {
    e.preventDefault();
    $msg2.text('Bubbled').show().fadeOut(1000);
});

$("#myLink").on('click', function(e) {
    e.preventDefault();
    $msg1.text('Direct').show().fadeOut(1000);
}); 
```

见[演示](http://jsfiddle.net/7jbyN/)

当然，您会很快发现这种方法有其局限性。您不仅失去了单一作用域的可能优势，而且无论附件的制作顺序如何，“直接”事件总是会首先触发。尽管您可以采取稍微混乱的措施来颠倒顺序，但处理将一个处理程序的功能嵌入另一个处理程序的需要确实会变得非常混乱。你很可能会很快恢复到马特的方法。

# android - 使用对话框将地图从 SateliteView 更改为 TrafficView 或反之亦然

> ID：10783199
> 
> 赞同：0
> 
> 时间：2012-05-28T10:36:18.877
> 
> 标签：android

我想通过选择图像中提到的对话框将地图从卫星视图更改为交通视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:52:37.237

你可以实现它如下。

看看这个

```
 //set Satellite view
m_mapView.setSatellite(true);
m_mapView.setTraffic(false);          

//set trafic view
m_mapView.setSatellite(false);
m_mapView.setTraffic(true); 
```

# message-queue - 在 Zeromq 中实现队列

> ID：10783205
> 
> 赞同：2
> 
> 时间：2012-05-28T10:36:39.703
> 
> 标签：message-queue, zeromq

我一直在玩支持排队到代理的 RabbitMQ..

但是如何在ZeroMq中实现队列，当我尝试在Zeromq中实现客户端和服务器时，我不知道zeromq是如何实现队列的。所以如果客户端很快，而服务器很慢（可以通过调整睡眠来完成服务器的时间）服务器似乎没有得到客户端发送的所有消息。最初我认为服务器可能会将客户端请求排队在某个队列中，但从我的实验来看，它似乎不是那样工作的（消息丢失） ！！

有什么建议么..

谢谢阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:48:57.590

“ZMQ 有处理过满队列的方法（称为“高水位标记”）。当队列满时，ØMQ 会根据您正在执行的消息传递类型自动阻止发送者或丢弃消息（所谓“图案”）。”

[在zmq 指南](http://zguide.zeromq.org/page%3aall)中阅读有关此内容的更多信息

# ios - 使用 XCode Storyboard 的几个小部件（或“做错了”）？

> ID：10783206
> 
> 赞同：1
> 
> 时间：2012-05-28T10:36:50.257
> 
> 标签：ios, cocoa-touch, uitableview, uistoryboard

我已经开始了一个新的基于故事板（iPad）的 XCode 项目，它应该有一个基本上像这样的 UI：

1.  一个屏幕全屏显示来自网络的结果，顶部有一个导航栏。
2.  最终用户可以使用导航控制器从 (1) 切换到另一个屏幕，该屏幕应该包含一个表格，其中列出了一些演员 + 一些额外的小部件。

网络代码已经可以正常工作，但是我在与数据交互时遇到了问题。我在 XCode 中创建了以下 UI：

![故事板创作尝试](../Images/56794d7e62225839d5764599188e4636.png)

我无法让`UITableView`屏幕 2 具有正确的屏幕，`UITableViewController`而不会被迫进入*只有*屏幕 2的全屏状态`UITableView`。

*   我可以指定一个`UITableViewController`（或任何类型的`*Controller`以这种方式嵌入视图中的小部件吗？
*   或者：有没有其他首选的方式来使用 Storyboards 处理这样的 UI？
*   我只是把故事板推得太远了，应该恢复到“笔尖”/程序化创作吗？

**编辑**@jrturton 的回答是正确的~~，一张小图来补充他的附加说明：~~

![在此处输入图像描述](../Images/987859a1525544e6ccc1ae8fbc978cab.png)

**编辑**行动，危险！一定不能拖到父级**`View`**，一定要保证拖到父级`View` **`Controller`**，否则会发生[不好的事情](https://stackoverflow.com/questions/10785479/failing-to-properly-declare-implement-uitableviewdatasource-methods)：

![在此处输入图像描述](../Images/5ce1050e7083eb20ccdb34199f8d116b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:14:43.957

你不需要使用 UITableViewController。正如您所发现的，这默认使用其整个视图（例如全屏）作为表格 - 实际上，表格视图控制器的视图属性*是*表格视图。

不过不用担心 - 只需声明您的视图控制器符合 UITableView 委托和数据源协议，将 tableView 的数据源和委托方法连接到视图控制器，并实现这些方法。UITableViewController 在这方面并不特别——任何对象都可以做到这一点。

您可能还想在视图控制器上定义一个表视图出口并将其连接到表视图。通常需要在委托和数据源方法之外与表视图对话。

# entity-framework - 来自不同上下文的引用实体

> ID：10783213
> 
> 赞同：0
> 
> 时间：2012-05-28T10:37:19.243
> 
> 标签：entity-framework, entity-framework-4.1

让我们以一个产品为例。一个产品可以属于一个特定的组，所以它有一个组类型的引用属性。目前，每个存储库都有自己的上下文，因此 ProductViewModel 在构造函数中接收 IProductRepository 和 IGroupRepository，它们具有不同的 ObjectContext。

问题：如果我将 Group 实体分配给特定产品，ProductRepository 中的 Context 是否会将这个分配的 Group 实体视为新实体，因为它没有任何先验知识，并会尝试将其添加到数据库中？如果是，如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:58:45.577

> 如果我将 Group 实体分配给特定产品，ProductRepository 中的 Context 是否会将此分配的 Group 实体视为新实体，因为它没有任何先验知识，并会尝试将其添加到数据库中？

是的，如果您使用的是没有延迟加载和动态更改跟踪的 POCO（= 非代理实体）。如果您使用`EntityObject`基于实体或代理 POCO，您将获得例外。

> 如果是，如何处理这种情况？

通过使用在两个存储库之间共享的一个上下文。

# iphone - 使用 zbar sdk 的条码阅读器

> ID：10783214
> 
> 赞同：3
> 
> 时间：2012-05-28T10:37:20.520
> 
> 标签：iphone, ios, zbar-sdk

我在条形码阅读器工作。我正在使用 Zbar Sdk 读取条形码。我的问题是，无法读取非常小的条形码。我很困惑：这是相机问题（iPad 2）还是sdk问题请建议我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:59:45.137

iPad 2 相机没有自动对焦功能。Zbar 在定焦相机上表现不佳：

> 如果您的相机是固定焦距的，您可以通过调整符号与镜头的距离来尝试在分辨率和焦距之间进行权衡。ymmv，但通常在这种情况下，您唯一的办法就是使用更好的捕获设备！

# objective-c - 如何在objective-c中的现有PDF中绘制文本而不创建新的？

> ID：10783219
> 
> 赞同：0
> 
> 时间：2012-05-28T10:37:39.203
> 
> 标签：objective-c, cocoa, pdf, editing, quartz-2d

我需要在objective-c中现有的PDF文件页面上绘制一些文本，而不会丢失任何现有的文档属性和轮廓。我知道我们可以创建新文档并从现有文档中绘制页面，但这不会自动将所有文档属性和大纲复制到新的 PDF 文档中。我需要一种方法来修改 PDF 页面而不会丢失其原始内容、轮廓和属性。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:00:33.173

你不能使用石英。PDF 本质上是只读的。您将不得不在旧 PDF 上构建一个新的 PDF。

# objective-c - 如何在具有 nil 终止参数列表的 init 方法中调用 super？

> ID：10783221
> 
> 赞同：0
> 
> 时间：2012-05-28T10:38:07.097
> 
> 标签：objective-c, cocoa

我正在继承 UIAlertView。我想实现一个具有以下签名的 init 方法：

```
- (id)initWithTitle:(NSString *)title 
            message:(NSString *)message
         identifier:(NSInteger)ident
           delegate:(id)delegate 
  cancelButtonTitle:(NSString *)cancelButtonTitle 
  otherButtonTitles:(NSString *)otherButtonTitles,... 
```

它只是添加了 param 的默认 UIAlertView 方法`identifier`。

```
- (id)initWithTitle:(NSString *)title 
            message:(NSString *)message
           delegate:(id)delegate 
  cancelButtonTitle:(NSString *)cancelButtonTitle 
  otherButtonTitles:(NSString *)otherButtonTitles,... 
```

如果我在编译时不知道我的 init 方法`otherButtonTitles`参数是什么，那么现在调用 super 方法的正确语法是什么？

```
self = [super initWithTitle:title
                    message:message
                   delegate:delegate
          cancelButtonTitle:cancelButtonTitle 
          otherButtonTitles:otherButtonTitles, nil];
//I will only get the first param with this syntax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:48:16.880

一、了解**可变参数函数**，它可以帮助你：[维基百科](http://en.wikipedia.org/wiki/Variadic_function#Variadic_functions_in_C.2C_Objective-C.2C_C.2B.2B.2C_and_D)

```
Example:
#include <stdarg.h>

void logObjects(id firstObject, ...) // <-- there is always at least one arg, "nil", so this is valid, even for "empty" list
{
  va_list args;
  va_start(args, firstObject);
  id obj;
  for (obj = firstObject; obj != nil; obj = va_arg(args, id)) // we assume that all arguments are objects
    NSLog(@"%@", obj);
  va_end(args);
} 
```

其次，最好制作一个**Objectve-C Category**而不是子类UIAlertView

```
Example:
@interface UIAlertView(Identifiers)
- (id)initWithTitle:(NSString *)title 
            message:(NSString *)message
         identifier:(NSInteger)ident
           delegate:(id)delegate 
  cancelButtonTitle:(NSString *)cancelButtonTitle 
  otherButtonTitles:(NSString *)otherButtonTitles,...;
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:48:06.333

文档说

> **子类化注释**
> UIAlertView 类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改。

但到了这一点，我认为你做不到。`init`你总是可以通过实现一个普通的然后用传入的参数配置对象来重新创建这个方便的方法。

# csv - KSH：如何将 BOM 添加到 UTF-8 CSV 文件

> ID：10783222
> 
> 赞同：1
> 
> 时间：2012-05-28T10:38:08.197
> 
> 标签：csv, utf-8, ksh, byte-order-mark

我正在创建一个 shell 脚本 (KSH)，我想将没有 BOM 的 UTF-8 csv 文件转换为带有 BOM 的 UTF-8 csv 文件（或者只是将 BOM 添加到没有 BOM 的文件中）。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:35:20.787

您可以通过在文件内容之前输出它来添加您想要的 aBOMination，例如在添加 aBOMination 时从 stdin 复制到 stdout：

```
#!/bin/ksh

printf '\357\273\277'
cat 
```

但是你为什么要这样做呢？这几乎总是一个坏主意。

这是另一种解决方案，它仅在不存在时才写出新的 aBOMination。正如你所看到的，它很复杂......这只是为什么首先使用 aBOMinations 是一个坏主意的原因之一。它可能需要 GNU `od`。

```
#!/bin/ksh

# write a new aBOMination
printf '\357\273\277'

# now read the first 3 bytes of the original file
set -- $(od -N3 -to1)
if [ "$2" = 357 -a "$3" = 273 -a "$4" = 277 ]; then
    # there already was an aBOMination.
    # Absorb it and write out the rest of the file
    cat
else
    # the first three bytes of the file were normal. Output them.
    if [ $# -lt 3 ]; then
        # file was empty
        :
    elif [ $# -eq 3 ]; then
        # file had only one byte
        printf "\\$2"
    elif [ $# -eq 4 ]; then
        # file had only two bytes
        printf "\\$2\\$3"
    else
        # file had 3 or more bytes.
        # Ouput the first 3
        printf "\\$2\\$3\\$4"
        # then the rest
        cat
    fi
fi 
```

# mongodb - 构建 MongoDB 文档

> ID：10783225
> 
> 赞同：-1
> 
> 时间：2012-05-28T10:38:35.360
> 
> 标签：mongodb, nosql

我正在尝试设计我的第一个 NoSQL 数据库，例如，我正在尝试从 Twitter 中获取内容。我在决定如何构建文档时遇到了一些困难。

如果我每天都从几个标签（例如#Programming #stackoverflow #nosql 等）中抓取，我应该如何构建文档以使其不会变得太大，并且我仍然可以根据所有标签进行分析？

我想创建这样的文档：

```
/{day}/{hashtag} 
```

这会让我得到以下信息：

```
/28052012/Programming

/28052012/StackOverflow 

/28052012/NoSql 
```

但是，我如何从组合的主题标签中获取最新的 5 条推文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:17:17.467

您应该使用[`$or`operator](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24or)。它可以使用索引，并允许您执行有效的查询。

# jqplot - jqPlot - 跨多个图表同步光标

> ID：10783228
> 
> 赞同：2
> 
> 时间：2012-05-28T10:38:38.713
> 
> 标签：jqplot

我想使用 jqPlot 在一个页面上创建 3 个单独的图表，是否可以配置 jqPlot 以便当光标在一个图表上移动时，一条垂直线也会在其他图表上移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T20:43:23.953

我还需要同时在 2 个图表上跟踪一条垂直线，并使用 Boro 的答案作为起点，[这](http://jsfiddle.net/curVV/s9LtE/1/)就是我想出的：

```
var mydata1 = [
    [0, 3],
    [1, 7],
    [2, 9],
    [3, 1],
    [4, 4],
    [5, 6],
    [6, 8],
    [7, 2],
    [8, 5]
];
var mydata2 = [
    [0, 5],
    [1, 4],
    [2, 8],
    [3, 7],
    [4, 2],
    [5, 8],
    [6, 5],
    [7, 1],
    [8, 3]
];
$(document).ready(function () {
    var plot1 = $.jqplot(
        'chart1', [mydata1], {
        seriesDefaults: {
            showMarker: false
        },
        cursor: {
            show: true,
            showTooltip: false,
            showVerticalLine: true,
            showHorizontalLine: false
        },
        highlighter: {
            show: true,
            showTooltip: false
        },
        canvasOverlay: {
            show: true,
            objects: [{
                verticalLine: {
                    show: false,
                    name: "vline1",
                    xOffset: '-1',
                    yOffset: '0',
                    xaxis: "xaxis",
                    lineWidth: '0.5',
                    shadow: false
                }
            }]
        }
    });
    var plot2 = $.jqplot(
        'chart2', [mydata2], {
        seriesDefaults: {
            showMarker: false
        },
        cursor: {
            show: true,
            showTooltip: false,
            showVerticalLine: true,
            showHorizontalLine: false
        },
        highlighter: {
            show: true,
            showTooltip: false
        },
        canvasOverlay: {
            show: true,
            objects: [{
                verticalLine: {
                    show: false,
                    name: "vline2",
                    xOffset: '-1',
                    yOffset: '0',
                    xaxis: "xaxis",
                    lineWidth: '0.5',
                    shadow: false
                }
            }]
        }
    });

    var co1 = plot1.plugins.canvasOverlay;
    var co2 = plot2.plugins.canvasOverlay;
    var line1 = co1.get('vline1');
    var line2 = co2.get('vline2');

    $("#chart1").bind('jqplotMouseMove', function (ev, gridpos, datapos, neighbor, data) {
        line2.options.show = true;
        line2.options.x = datapos.xaxis;
        co2.draw(plot2);
    });

    $("#chart2").bind('jqplotMouseMove', function (ev, gridpos, datapos, neighbor, data) {
        line1.options.show = true;
        line1.options.x = datapos.xaxis;
        co1.draw(plot1);
    });

    $("#chart1").bind('jqplotMouseLeave', function () {
        line2.options.show = false;
        co2.draw(plot2);
    });

    $("#chart2").bind('jqplotMouseLeave', function () {
        line1.options.show = false;
        co1.draw(plot1);
    });
}); 
```

[这是演示](http://jsfiddle.net/curVV/s9LtE/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:00:14.477

是的，你可以做到。在您的方法中，您必须在绘图上跟踪鼠标位置，例如：

```
$('#chart').bind('jqplotMouseMove', function(ev, seriesIndex, pointIndex, data) {
    //do your painting here
}); 
```

然后，在您的情节中鼠标的每一次移动，您都将在另一个情节的画布上进行自定义绘画。我在[此示例中进行了一些自定义绘画，显示了代码级别的绘图数据的突出显示。](https://stackoverflow.com/a/10434535/613495)

# django - 在 Apache mod_wsgi 中部署 django（嵌入式模式）

> ID：10783231
> 
> 赞同：1
> 
> 时间：2012-05-28T10:38:54.150
> 
> 标签：django, apache

我使用嵌入式模式下的 Apache 作为我的生产服务器。

`urls.py`每当我对我的 django 核心文件（ 、、、`settings.py`等）进行一些修改时`views.py`，我只需`touch`project.wsgi 文件，更改就会立即出现在网页上。有时它会起作用。

但是有时它不会。阿帕奇只是挂起。它无法处理请求，需要重新启动（给用户 1-2 秒的“内部服务器错误”消息）。然后我需要重新启动（重新启动，实际上也不起作用。它需要停止并重新启动）。

我正在粘贴我的一些代码`httpd.conf`

```
MaxSpareThreads 3
MinSpareThreads 1
ServerLimit 1
SetEnvIf X-Forwarded-SSL on HTTPS=1
ThreadsPerChild 5
WSGIDaemonProcess myproject processes=4 threads=12 python-path=[...]
WSGIProcessGroup myproject
WSGIRestrictEmbedded On 
```

这是为什么？是因为 Apache 有时它同时使用所有进程并且无法重新加载核心文件吗？（这就是“触摸”应该做的，对吧？）

编辑：对不起。Apache 以嵌入式模式运行。我的错。我更新了问题。

EDIT2：包含的`WSGIProcessGroup`行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:32:14.503

在嵌入式模式下，触摸 WSGI 脚本文件不会做任何事情，所以它不会一直工作也就不足为奇了。看起来，只是请求由以前未处理请求的新 Apache 进程处理。

要使 WSGI 脚本文件正常工作，您需要使用守护程序模式。不过，您的配置已经损坏了一半。您已经为守护程序模式定义了 WSGIDaemonProcess，但随后没有使用 WSGIProcessGroup 委派应用程序在该守护程序进程组下运行。

去阅读：

[http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode)

[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#Delegation_To_Daemon_Process](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#Delegation_To_Daemon_Process)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:04:18.993

删除文件更容易`*.pyc`，因为这将强制刷新。但是，问题的*真正*答案是正确的部署策略，因此您最终不会在生产服务器上进行开发。

如果您将此服务器用于 django-only，我建议您使用[nginx](http://www.jeremybowers.com/blog/post/5/django-nginx-and-uwsgi-production-serving-millions-page-views/) [+uwsgi](http://senko.net/en/django-nginx-gunicorn/)或nginx+gunicorn设置。这将您的 Web 环境与您的后端隔离开来，允许您自由地重新启动 wsgi 进程而不会影响您的服务器。它还允许您显示一个漂亮的停机时间页面。

# c# - 转换 IEnumerable 进入 JSON 对象

> ID：10783233
> 
> 赞同：2
> 
> 时间：2012-05-28T10:39:12.187
> 
> 标签：c#, json, serialization, json.net, generic-list

使用 JSON.NET，我可以将通用列表序列化为 JSON 字符串：

```
 return Json(new { success = true, data = JsonConvert.SerializeObject(units) }); 
```

但是如何将通用列表序列化为 JSON 对象。这样做的好处是我在客户端不需要这个：

```
var jsonData = $.parseJSON(units); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T10:46:40.847

不要序列化对象的一部分，序列化整个对象：

```
return Content(JsonConvert.SerializeObject(new { success = true, data = units }), "text/javascript"); 
```

内置`Json`方法经过硬编码以返回使用内置（有些限制）.NET JavaScript 序列化程序的结果。如果您想获得像这样易于使用的东西，请将您自己的“Json”方法添加到您的基本控制器类中，该方法与 Json.NET 执行相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:50:43.097

看看[这个链接](https://stackoverflow.com/questions/45015/safely-turning-a-json-string-into-an-object)。
我个人使用 json2.js 和 JSON.parse/stringify 将字符串转换为 ojbects，反之亦然

ps 它仍然在客户端完成，但它只是要添加的另一行代码

# active-directory - 通过 IP 查找计算机是否在 Active Directory 中

> ID：10783235
> 
> 赞同：0
> 
> 时间：2012-05-28T10:39:19.757
> 
> 标签：active-directory

我试图找到一种方法来检查机器是否在域（本地 Active Directory 域）中，但我只有 IP 地址。

执行反向 DNS 查询不是一种选择，因为并非所有子网都定义了该区域。

有谁知道这样做的方法。谷歌似乎给我的一切都是基于主机名的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:08:00.613

IP 数据不存储在 AD 中，因此没有真正的好方法来做到这一点。如果您使用的是安全 DNS，并且启用了老化/清除功能，则可以枚举正向查找区域并查看为该 IP 注册的内容。您需要查看它的刷新时间以产生一定程度的信心，因为如果您获得匹配，它并不能真正保证任何事情。

# javascript - 使整个博客帖子预览可点击

> ID：10783237
> 
> 赞同：0
> 
> 时间：2012-05-28T10:39:22.810
> 
> 标签：javascript, blogger

在我在博客平台上运行的网站 www.beatmushroom.com 上，我在主页上有我的帖子的小预览。要获得完整的帖子，您必须单击标题。我希望能够单击帖子预览（缩略图和文本）上的任意位置，然后将我带到帖子。我在想可能有一些方法可以用javascript做到这一点。

在主页上的源代码中，帖子包含以下内容：

```
 <div class="date-outer">

    <div class="date-posts">

    <div class='post-outer'>
    <div class='post hentry'>
    <a name='366770510419642006'></a>
    <h2>
    <a href='http://www.beatmushroom.com/2012/05/logic-we-get-high.html'>Logic - We Get High</a>
    </h2>
    <div class='post-header'>
    <div class='post-header-line-1'></div>
    </div>
    <div class='post-body entry-content' id='post-body-366770510419642006'>
    <span class="tags">Rap</span><br>
    <img border="0" src="http://3.bp.blogspot.com/-qkVnjpTBMjY/T78PmQDUAvI/AAAAAAAAAKA/cUEMjJQ3w5s/s1600/logic.jpg">Here is a new one check it out logic has some good chilled tracks this has got a pretty old school feel to it. I am adding the blog to technorati. Technorati code: 886BP6K6GWA7<br>
    <div style='clear: both;'></div>
    </div>
    <div class='jump-link'>
    <a href='http://www.beatmushroom.com/2012/05/logic-we-get-high.html#more' title='Logic - We Get High'>&#9834; Listen Here &#187;</a>
    </div>
    <div class='post-footer'>
    <div class='post-footer-line post-footer-line-1'><span class='post-author vcard'>
    </span>
    <span class='post-timestamp'>
    </span>
    <span class='post-comment-link'>
    </span>
    <span class='post-icons'>
    <span class='item-control blog-admin pid-1598740620'>
    <a href='http://www.blogger.com/post-edit.g?blogID=4929692547831239344&postID=366770510419642006&from=pencil' title='Edit Post'>
    <img alt='' class='icon-action' height='18' src='http://img2.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
    </a>
    </span>
    </span>
    <div class='post-share-buttons goog-inline-block'>
    </div>
    </div>
    <div class='post-footer-line post-footer-line-2'><span class='post-labels'>
    </span>
    </div>
    <div class='post-footer-line post-footer-line-3'>
    <span class='post-location'>
    </span>
    </div>
    </div>
    </div>
    </div> 
```

有没有办法从这里获取链接：

```
<h2>
<a href='http://www.beatmushroom.com/2012/05/logic-we-get-high.html'>Logic - We Get High</a>
</h2> 
```

然后制作元素：

```
 <div class="date-outer"> 
```

链接到那个？

由于帖子的其余部分位于该元素内，因此它会使帖子预览成为链接。然后他们必须点击背景，但我可能可以使用 z-index 来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:18:30.823

假设每个`date-outer`元素都包含一个单独的 2 级标题，它本身包含一个锚点：

```
$('.date-outer').each(function () {   
    $(this).click(function () {
        window.location = $('h2 a', this).attr('href');        
    });
});​ 
```

[http://jsfiddle.net/WHd5d/1/](http://jsfiddle.net/WHd5d/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:30:45.390

如果您希望能够单击帖子中的任何内容并让它做您想做的事情，那么请考虑使用`*`选择器

```
$('previewpost *').click(function() {
       doWhatever(); 
}); 
```

# debugging - 使用 http.client 调试时如何格式化输出？

> ID：10783246
> 
> 赞同：1
> 
> 时间：2012-05-28T10:39:56.677
> 
> 标签：debugging, python-3.x

这是我的代码：

```
#coding=UTF-8
import urllib3
import http.client

http.client.HTTPConnection.debuglevel = 1

API_URL = 'http://www.nyaa.eu/'

http_pool = urllib3.connection_from_url(API_URL)
r = http_pool.request('GET',API_URL)
print (r.status) 
```

输出如下：

```
send: b'GET http://www.nyaa.eu/ HTTP/1.1\r\nHost: www.nyaa.eu\r\nAccept-Encoding: identity\r\n\r\n'
reply: 'HTTP/1.1 200 OK\r\n'
header: Server header: Date header: Content-Type header: Transfer-Encoding header: Connection header: Vary 200 
```

输出不包含`\n`. 阅读很困难。有没有办法格式化输出？

# java - java如何在指定时间内执行任务

> ID：10783248
> 
> 赞同：1
> 
> 时间：2012-05-28T10:40:00.453
> 
> 标签：java, timer

我有一些功能

```
func1()
{
  while (true) 
  {
    isdateok()
    { // return true or false 
    }
  }
} 
```

我希望 isdateok() 应该执行到 5 秒（或配置的任何超时），如果它在超时之前返回 true，那么可以继续，并且在 5 秒（或超时）之后它应该停止处理并作为超时返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:42:02.000

看看[ScheduledExecutorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)它将允许您执行与时间相关的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:05:04.610

我不确定我是否理解您的问题，但答案应该如下：

```
public boolean func1(long duration) {
    long t = System.currentTimeMillis();
    while (System.currentTimeMillis() - t < duration) {
        if (isdateok())
            return true;
        else
            Thread.yield();
    }
    return false;
} 
```

# android - 如何使 ImageView 在 android xml 中的按钮后面

> ID：10783249
> 
> 赞同：0
> 
> 时间：2012-05-28T10:40:04.933
> 
> 标签：android, android-imageview

我在 main.xml 中有一个带有 ImageView 的按钮和动画。如果应用程序启动按钮被 ImageView 覆盖，则会出现问题。

如何让 ImageView 在按钮后面？

谢谢你。. 这是我的代码：

```
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/summer">
<Button
android:id="@+id/soal111"
android:layout_width="30dp"
android:layout_height="20dp"
android:layout_x="207dp"
android:layout_y="41dp"
android:background="@drawable/primarykey"
android:text=" "
android:textSize="8dp" />
<ImageView
android:id="@+id/imageView2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_x="119dp"
android:layout_y="29dp"
android:adjustViewBounds="true"
android:src="@drawable/awan1" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:40:09.210

你可以做这样的事情，

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ImageView android:layout_height="wrap_content"
        android:layout_width="wrap_content" android:id="@+id/imageView1"
        android:src="@drawable/ic_launcher" android:layout_centerVertical="true"
        android:layout_centerHorizontal="true"></ImageView>
    <Button android:text="Button" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:id="@+id/button1"
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true"></Button>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:36:38.557

//把你的图像视图放在第一位

```
 <AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/summer">

   <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="119dp"
        android:layout_y="29dp"
        android:adjustViewBounds="true"
        android:src="@drawable/awan1" />

<Button
android:id="@+id/soal111"
android:layout_width="30dp"
android:layout_height="20dp"
android:layout_x="207dp"
android:layout_y="41dp"
android:background="@drawable/primarykey"
android:text=" "
android:textSize="8dp" /> 
```

//删除图像视图和按钮中的 android:layout_x & y。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:51:09.220

尝试使用 FrameLayout。当我使用相机视图创建应用程序时，我使用了 FrameLayout，我可以将我想要的内容放在视图中。见[这里](http://mobile.tutsplus.com/tutorials/android/android-sdk_frame-layout/)。

# c# - 向 c# 表格中的一个单元格添加更多值

> ID：10783252
> 
> 赞同：1
> 
> 时间：2012-05-28T10:40:12.183
> 
> 标签：c#

我在 C# 中有一个像这样的表

```
 DataTable table = new DataTable();
        table.Columns.Add("", typeof(string));
        table.Columns.Add("Color", typeof(string));
        table.Columns.Add("Brand", typeof(string));
        table.Columns.Add("Type", typeof(string));
        table.Columns.Add("Seats", typeof(int));
        table.Columns.Add("Fuel consumption", typeof(int));
        table.Columns.Add("Max. speed", typeof(int));

        table.Rows.Add(); 
```

如果我想在一个单元格中有多个值，我不知道如何将值添加到行中，例如在颜色列中将是蓝色、绿色、黄色作为 3 个单独的字符串，而在席位中将是 2、4， 5, 8 作为整数...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:42:33.107

如果一行中有超过 1 个值，那么为什么将字符串作为数据类型。而是有一个数组数据类型，如 int[]。

```
DataTable table = new DataTable();
table.Columns.Add("", typeof(string));
table.Columns.Add("Color", typeof(int[]));
table.Columns.Add("Brand", typeof(string));
table.Columns.Add("Type", typeof(string));
table.Columns.Add("Seats", typeof(int[]));
table.Columns.Add("Fuel consumption", typeof(int));
table.Columns.Add("Max. speed", typeof(int)); 
```

现在，当您添加这样的行时

```
DataRow dr = table.NewRow();
dr[0] = "";
dr[1] = new int[] {20,24,44}; //For RGB values
.
.
dr[4] = new int[] {2,4,5,8}; // For Seat Numbers
.
.
table.AddRow(dr); 
```

检索时，您可以这样做

```
int[] val = (int[])table[0][2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:43:35.997

添加分隔符以区分列中的多个值。例如，在添加数据时将分隔符添加为逗号 (,)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:44:55.947

您可能需要将列的数据类型更改为字符串

```
table.Columns.Add("Seats", typeof(string)); 
```

而不是添加逗号分隔值。

# java - 将图像从 Flash 导出到 JSP 页面

> ID：10783254
> 
> 赞同：0
> 
> 时间：2012-05-28T10:40:17.273
> 
> 标签：java, flash, jsp

```
<object id="whatever" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="282" height="180"codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,115,0">
    <param name="src" value="./swf/jscam.swf"/>
    <param name="bgcolor" value="#FFFFFF"/>
    <param name="quality" value="best"/>
    <embed name="whatever" src="./swf/jscam.swf" width="282" height="180" bgcolor="#FFFFFF" quality="best" pluginspage="http://www.adobe.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash">
    </embed>
</object> 
```

我有这段代码用于在 jsp 中嵌入 flash 以访问网络摄像头，但我的查询是如何将在 flash 阶段捕获的图像传递到 JSP 页面，以便添加到 MySQL 数据库中，并将其发布到 localhost 目录中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:11:23.513

使用 BitmapData 的 draw() 方法从连接到网络摄像头的视频对象中捕获图像。
然后使用 JPEG 编码器（带有 flex 或 google 编码器）将 BitmapData 转换为 ByteArray。

您现在可以使用 URLLoader 类将字节数组作为发布数据发送到您选择的页面。

# java - 如何在 Windows 7 中启动 SwDbgSrv.exe

> ID：10783256
> 
> 赞同：1
> 
> 时间：2012-05-28T10:40:22.203
> 
> 标签：java, windows, permgen

想分析烫发内容。因此，尝试使用该实用程序打印正在运行的 JVM 的字符串文字池（[此处](https://github.com/puneetlakhina/javautils/blob/master/com/blogspot/sahyog/PrintStringTable.java)提供实用程序，来自[如何分析 PermGen 内容？](https://stackoverflow.com/questions/2842982/how-to-analyze-permgen-contents)）

但我收到了这个错误：

> 正在附加到进程 ID 8980，请稍候... 附加到进程时出错：尝试连接到调试服务器时超时（请启动 SwDbgSrv.exe）。

知道如何`SwDbgSrv.exe`在 Windows 7 中启动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:59:26.480

您可以通过运行 jsadebugd 将调试守护程序附加到您的 Java 程序。然后您可以运行 HotSpot Serviceability Agent GUI：

```
java -cp %JAVA_HOME%\lib\sa-jdi.jar sun.jvm.hotspot.HSDB 
```

和文件-> 连接到调试服务器-> 本地主机。虽然这不是所有字符串文字的编程转储，但您将能够探索有关您的过程的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-12T16:32:37.907

所以我在尝试使用[dumpclass.jar](https://github.com/hengyunabc/dumpclass)时也遇到了这个问题，这也给了我这个错误，我认为这是因为你`PrintStringTable`和 DumpClass 都依赖于相同的底层`jar/tool/system/framework/whatever`调用`sa-jdi.jar`

它做了什么，我不知道，它的一个功能是花费我一生的时间来弄清楚如何安装......

无论如何，在阅读了所有关于它的 2（！）StackOverflow 问题后，我可以告诉我，该版本与 java 1.6 SDK 一起分发（不是 JRE，它没有随 JRE 一起提供 - 哦，你还不知道，为什么?) 依赖于这个叫做`SwDbgSrv.exe`which 的东西，我不知道那是什么，但你只需要知道随 java 1.7 sdk 分发的版本（同样是 SDK 不是 JRE）不使用`SwDbgSrv.exe`.

那么最终这一切意味着什么？好吧，这意味着如果您通过谷歌搜索获得 sa-jdi.jar，那么您将登陆此站点：[http](http://www.java2s.com/Code/Jar/s/Downloadsajdijar.htm) ://www.java2s.com/Code/Jar/s/Downloadsajdijar.htm ，它具有 1.6 版本需要 SwDbgSrv.exe 的 jar

这意味着，如果您使用的是依赖于的工具，`sa-jdi.jar`那么您肯定希望获得不使用的工具，`SwDbgSrv.exe`这意味着使用 java 1.7 sdk，而不是 Java 1.6 JRE/SDK，因为1.7 sdk 自带的sa-jdi.jar 不用`SwDbgSrv.exe`，是捆绑的！它将特别位于`java\jdk1.7.0_80\lib\`文件夹中 - 至少在 Windows 上。绝对确保应用程序

* * *

那么如何解决这个问题：下载 java 1.7 sdk 并使用捆绑的 sa-jdi.jar。它不需要`SwDbgSrv.exe`

不要`sa-jdi.jar`从随机网站随机下载。

* * *

我想这在技术上是一个非答案，因为我不知道如何`SwDbgSrv.exe`在 Windows 7 中开始：/

# .htaccess - .htaccess 传递 5 个字母的变量

> ID：10783260
> 
> 赞同：0
> 
> 时间：2012-05-28T10:40:37.830
> 
> 标签：.htaccess

我想写.htaccess，其中将5个字母作为变量传递给页面，这5个字母是（仅小字母和数字）

例如，如果有人转到 www.abc.com/etd01 我想将 etd01 传递给 www.abc.com/link.php?link=etd01

所以我写了

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ LinkCode.php?LinkCode=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ LinkCode.php?LinkCode=$1 
```

它正在工作，但如果有人打开 www.abc.com/dswdrd 那么它也在传递变量。我想要的是如果长度是 5 他们通过否则什么都不做

是否可以？？

不，我已将我的 .htaccess 文件更改为

```
RewriteEngine On
RewriteRule ^([a-z0-9]{5})/?$ LinkCode.php?LinkCode=$1 
```

但现在当我放置

```
RewriteRule ^([a-z0-9]{5})/?$ LinkCode.php?LinkCode=$1 
```

在 joomla .htaccess 文件的末尾它不起作用

joomla .htaccess 文件如下

```
Options +FollowSymLinks

RewriteEngine On

RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule .* index.php [F]

RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteCond %{REQUEST_URI} !^/index\.php
RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L]

RewriteRule ^([a-z0-9]{5})/?$ LinkCode.php?LinkCode=$1

<Files ~ "\.vcf$">
ForceType text/x-vcard
</Files> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:12:12.330

1) 你有`+`，这意味着**1 或更多**。如果您想要 5 **，**请将其替换为`{5}`.

2）您说您想要“（仅限小字母和数字）”，但您的模板也将匹配大写字母以及减号`-`和下划线`_`。我已将它们从模式中删除以符合您的要求。

3）我还将 2 条规则加入 1 条规则（将处理带有和不带斜杠的 URL）。

```
RewriteEngine On
RewriteRule ^([a-z0-9]{5})/?$ LinkCode.php?LinkCode=$1 
```

# php - Yii 框架：UserLoginWidget

> ID：10783261
> 
> 赞同：0
> 
> 时间：2012-05-28T10:40:38.243
> 
> 标签：php, dialog, yii

我试图在 CWidget 和 CJuiDialog 的帮助下重新创建用户登录小部件。

当我单击登录链接时，对话框应打开登录表单。

我使用了以下示例：[Widget](http://www.yiiframework.com/wiki/139/how-to-create-nice-modal-login-widget-with-a-cjuidialog/)，我了解其中的大部分内容，但此时我陷入了困境。不确定这部分代码是什么意思：

```
public function renderContent()
{
    $form=new User;
    if(isset($_POST['user']))
    {
        $form->attributes=$_POST['user'];
        if($form->validate() && $form->login()){
            $url = $this->controller->createUrl('site/index');
            $this->controller->redirect($url);
        }
    }
    $this->render('login',array('form'=>$form));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:02:18.917

```
$this->render('login',array('form'=>$form)); 
```

在此之后，您在 component/view/login.php 中有一个名为 login.php 的文件，您可以像这样在视图中访问...

```
<?php $this->widget('your class name'); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:58:21.557

带解释的代码：

```
public function renderContent()
{
    // Var to store data sent by client browser
    $form=new User;
    // Check if the post request has defined the user variable
    if(isset($_POST['user']))
    {
        // fill the $form attributes with the values sent by the web form in the post request
        $form->attributes=$_POST['user'];
        // validate the form data and then check if the data is valid to login the user
        // - the validate call is where the framework check if the data is valid
        //   against the model (e.g. user field must be text, not empty...)
        // - the login call is where you should encode your user validation, check for validity against the database or whatever you want
        if($form->validate() && $form->login()){
            // create the url where the client browser is going to be redirected
            $url = $this->controller->createUrl('site/index');
            // render a 302 redirection to the new page
            $this->controller->redirect($url);
        }
    }
    // if the request doesn't contain the 'user' variable, or if the validation/login calls have failed, render again the form. In the case of errors, they'll be shown in the 'errorSummary' section.
    $this->render('login',array('form'=>$form));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T09:32:44.647

```
public function renderContent()
{
    $form=new User;//create User model
    if(isset($_POST['user']))// process when client submit (login)
    {
        $form->attributes=$_POST['user'];//add attribute from form in client
        if($form->validate() && $form->login()){//validate and check login using User class created in first line of this function
            $url = $this->controller->createUrl('site/index');//create url for redirect after login successfully
            $this->controller->redirect($url);
        }
    }
    $this->render('login',array('form'=>$form));//if it is not in submiting or login fail, we will go this code, it render the login form
} 
```

# algorithm - 修订控制系统如何恢复修订？

> ID：10783263
> 
> 赞同：7
> 
> 时间：2012-05-28T10:40:44.327
> 
> 标签：algorithm, version-control, diff, git-diff

我的问题比标题中声明的更笼统。

我知道源版本控制仅存储有关差异的信息。据我了解，维基百科也是如此，github也是如此。

但他们都有能力显示具有特定修订的整个文件。他们是否将其从第一个版本逐步恢复到特定版本？

还有一个问题。如果他们只存储差异，他们如何在带有上下文的 ui 中显示它们（更改前后的小文本）。

**编辑：** github存储整个快照而不是增量

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T10:45:48.053

> 我知道源版本控制仅存储有关差异的信息。

正如[关于存储内容而不是差异的 Git 设计决策问题所说明的](https://stackoverflow.com/questions/1452890/git-design-decision-on-storing-content-rather-than-differences)*那样*，这并不是Git 所做的。
不过，它确实具有“打包”格式，可以使用 LibXDiff 库中的二进制增量以增量形式存储对象。但这主要用于网络传输。
请参阅“ [git 二进制差异算法（增量存储）是否标准化？](https://stackoverflow.com/questions/9478023/is-the-git-binary-diff-algorithm-delta-storage-standardized/9478566#9478566) ”。
这就是为什么 git在您获取时会“[解析 delta ”。](https://stackoverflow.com/questions/4689844/what-is-git-actually-doing-when-it-says-it-is-resolving-deltas)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T22:23:29.390

要阅读有关存储版本控制数据的不同方式的优缺点的非常有趣的内容，我强烈建议您阅读 Eric Sink 的文章[Time and Space Tradeoffs in Version Control Storage](http://www.ericsink.com/entries/time_space_tradeoffs.html)。

> 存储是版本控制系统最困难的挑战之一。对于每个文件，我们必须存储曾经存在的每个版本。版本控制存储库的逻辑大小永远不会缩小。它只是不断增长和增长，每个旧版本都需要保持可用。
> 
> 那么，存储所有内容的每个版本的最佳方式是什么？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T19:01:49.657

不幸的是，维基百科……将数据库中的每一个修订都以某种形式的 XML（？）作为文本保存。

看看[wikipedia 数据库模式](http://upload.wikimedia.org/wikipedia/commons/thumb/3/33/MediaWiki_database_schema_1-19_%28r102798%29.svg/2193px-MediaWiki_database_schema_1-19_%28r102798%29.svg.png)。特别是最近的变化和文字。

因此，他们对“生物学”页面的第一个副本进行了出色的 O(1) 查找。这带来了不幸的副作用，导致维基百科的[技术成本](http://wikimediafoundation.org/wiki/2011-2012_Annual_Plan_Questions_and_Answers)从 2010-2011 年的 800 万美元飙升至 2011-2012 年的 1200 万美元。尽管硬盘驱动器（和其他所有东西）变得更便宜，而不是更贵。

保留每个文件的修订控制就这么多。Git 采取了一种可爱的方法。请参阅[git 存储模型是否浪费？](https://stackoverflow.com/questions/7321360/is-the-git-storage-model-wasteful).

它存储每个文件，类似于上述方法。一旦 repo 占用的空间超过某个限制，它就会进行强力重新打包（有一个选项来设置它的尝试程度 - --window=[N], --depth=[N] ），这可能需要几个小时。它对所述重新打包使用增量和无损压缩的组合（递归增量，然后对您拥有的任何位应用无损压缩）。

其他像 SVN 使用简单的增量压缩。（从记忆中，你不应该相信）。

脚注：增量压缩存储增量更改。无损压缩很像 zip、rar 等。

# c - 如何通过按键结束程序？

> ID：10783265
> 
> 赞同：1
> 
> 时间：2012-05-28T10:40:48.380
> 
> 标签：c, visual-studio-2010, visual-c++, exit

我正在使用 MS Visual Studio C++ 学习 C，我可以编译和运行程序，但它在完成后关闭，我想添加一个交互“按任意键退出”或类似的。怎么做到呢？我尝试使用`getch();`但它没有编译。谢谢

```
/* Inkludera filer som innehåller definitioner av de biblioteks-
   funktioner som används i programmet. Användningen av #include
   i C-program har vissa likheter med Javas import-uttryck.
*/
#include "StdAfx.h"
#include <stdlib.h>
#include <stdio.h>
#include <math.h>

/* Definiera N_POINTS till talet 4 */
#define N_POINTS        4

/* Definiera en datastruktur Point som kan innehålla en 2-D koordinat */
typedef struct {
  double x, y;
} Point;

/* Definiera en funktion distance() som räknar ut avståndet från origo till
   en punkt. Denna funktion nyttjar Pythagoras sats och funktionen
   sqrt() från matematikbiblioteket. sqrt() beräknar kvadratroten av
   ett tal.
*/
double distance(Point p) {
  double r;
  r = sqrt(p.x*p.x + p.y*p.y);
  return r;
}

/* bubblesort() tar en vektor med punkter samt vektorns längd som
   argument och sorterar punkterna i vektorn efter deras avstånd till
   origo med största avstånd först, med hjälp av bubblesort-algoritmen.
   Denna algoritm är långsam och passar dåligt när långa vektorer
   ska sorteras; den är dock enkel att implementera och passar därför
   bra till detta exempel.
*/
void bubblesort(Point points[], int length) {
  Point swap;
  int i, j;

  for(i = 0; i<length-1; i++)
    for(j = i+1; j<length; j++)
      if( distance(points[i]) < distance(points[j]) ) {
        swap = points[i];
        points[i] = points[j];
        points[j] = swap;
      }
}

/* main() är den funktion där programmet börjar, precis som i ett javaprogram.
   main() ska alltid returnera ett heltal, int. */
int main(void) {

/* filename blir en vektor med 80 tecken. Teckenvektorer används i C
   för att representera strängar. */
  char filename[80];

/* points blir en vektor av Point med N_POINTS element. */
  Point points[N_POINTS];

/* FILE * är en adress till en datastruktur av typen FILE. En FILE
   används för att representera filer i C. */
  FILE *file;

  int i;

/* printf() är en funktion som skriver ut text i terminalfönstret. */
  printf("Detta program läser in %d koordinater och sorterar dem.\n",N_POINTS);
printf("Sedan skrivs koordinaterna ut på en fil.\n");

  for(i = 0; i<N_POINTS; i++) {
    printf("Ange koordinat %d (format: x y): ", i+1);

/* scanf() används för att läsa in text och tal från tangentbordet. */
    scanf("%lf %lf", &points[i].x, &points[i].y);
}

/* Sortera koordinaterna genom att anropa bubblesort-funktionen ovan. */
  bubblesort(points, N_POINTS);

  printf("Nu är punkterna sorterade.\n");
  printf("Vilken fil ska de skrivas ut på? ");
  scanf("%s", filename);

/* Öppna en fil med det namn som finns i strängen filename. */
  file = fopen(filename, "w");

/* Om file är NULL så gick det inte att öppna filen. */
  if(file == NULL) {
    printf("Det gick inte att öppna filen %s.\n", filename);
} else {
    for(i = 0; i<N_POINTS; i++)
      /* fprintf() är som printf() med skriver till en fil. */
      fprintf(file, "Koordinat %2d: %10.3lf %10.3lf\n",
i+1, points[i].x, points[i].y);

/* När punkterna är skrivna på filen så ska den stängas. */
    fclose(file);

    printf("Nu är koordinaterna utskrivna på filen %s.\n", filename);
printf("För att se innehållet i filen kör kommandot: more %s\n", filename);
}

/* main() ska returnera 0 (noll) om programmet inte råkade ut för något
   fel. Det borde kanske ha returnerat 1 (ett) om det inte gick att
   öppna filen, eller frågat om ett annat filnamn, men det får bli en
   övning till läsaren.
*/
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:43:42.360

***“我尝试使用`getch();`但它没有编译。”***
改为使用`getchar();`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:43:58.913

`getchar()`是在程序退出之前暂停程序以检查程序输出的首选方式。但是你不能按任意键退出你的程序。`Enter`是强制性的，它只在看到一个键`getchar`时才返回。`Enter`

在 Windows 上实现您确切需要的东西的一个更好的选择是 -

```
system("pause"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:52:19.947

您仍然可以使用您喜欢的功能

```
getch(); 
```

但请不要忘记添加

```
#include<conio.h> 
```

因为 getch() 函数在 conio.h 头文件中。您忘记包含该函数的头文件。

# unit-testing - 如何使用 Testng 并行运行测试

> ID：10783266
> 
> 赞同：2
> 
> 时间：2012-05-28T10:40:59.487
> 
> 标签：unit-testing, testing, testng, qa

我有一个场景，我必须在其余测试之前运行 1 个测试。其余的测试应该并行运行。

例如：我在一个 XML 文件中有 4 个测试。一个测试应该在其他 3 个测试之前运行，并且 3 个测试应该并行运行。

有没有可能使用[TestNG 框架](http://testng.org/doc/index.html)来做到这一点。

谢谢拉古拉姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T06:46:12.397

```
One test should run before the other 3 tests 
```

使用 @BeforeTest 注释此测试

`and the 3 tests should run parallel`.

使用 @Test 注释运行它们，并在套件文件中给出 parallel = "methods"

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suite thread-count="3" verbose="1" name="My Test Suite" 
    skipfailedinvocationcounts="false" junit="false" parallel="methods" preserve-order="true" data-provider-thread-count="10" annotations="JDK">

    <test name = "my test" preserve-order="false">
        <classes>
            <class name ="com.mypackage.SampleClass"/>

            <methods>method2</methods>
            <methods>method3</methods>
            <methods>method4</methods>
        </classes>
    </test> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:32:20.957

使用`parallel="methods"`并让您的四种方法取决于您首先要运行的方法（理想情况下具有组依赖性）。

# c# - 聊天室控件应该使用

> ID：10783267
> 
> 赞同：0
> 
> 时间：2012-05-28T10:41:16.380
> 
> 标签：c#, wpf

我想问一下Skype的聊天消息块，他们使用了什么样的控件？

我只是想创建一个像Skype聊天标签一样的聊天室，但我不确定使用哪个控件易于管理，用于像TextBox或ListBox这样的Skype来存储发送的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:46:14.370

对于 Skype 聊天框：

使用富文本框或多行文本框。

创建聊天应用程序：

把它分解成小块。

如果您想要一个选项卡式聊天应用程序，您首先需要实现的是聊天服务器和客户端。

[这是一个不错的简单 WPF 聊天应用程序教程](http://www.codeproject.com/Questions/190932/Simple-chat-application-in-WPF-and-C)，您可以查看。

然后在它全部创建并工作之后添加一个选项卡控件并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:46:45.207

您可以为每条消息添加一个文本框，这样您就可以更好地控制定位。但是一个不可点击的列表框也很好。最后是你的艺术选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-15T17:06:15.500

您可以使用包含包含段落或文本块的列表项的列表，这样您可以为发送者和接收者使用不同的字体颜色和样式，如下所示：

```
 <ListView.View>
            <GridView>
                <GridViewColumn >
                    <ListBoxItem Width="85" Height="15">
                        <TextBlock x:Name="textBlock1" TextWrapping="Wrap" Text="my content here"/>
                    </ListBoxItem>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView> 
```

# php - 如何在 Zend 中调试日文文本

> ID：10783268
> 
> 赞同：0
> 
> 时间：2012-05-28T10:41:18.397
> 
> 标签：php, zend-framework, encoding

说我想通过这样做来调用我的程序

/testGetID/index.php?ID=这个原理是在</p>

假设我要使用ID的内容，即这个原理是在到数据库。

在 zend 中，我所看到的只是 $_GET['ID'] ？？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T19:06:49.953

1）你应该`urlencode()`在你的 ID 参数上使用。而`urldecode()`当得到它。2) 为 URL 表示创建所谓的 slugs 的其他选项（和一个好的做法）。在捷克语中，我们将世界“překladiště”更改为“prekladiste”以用于 URL。这解决了你遇到的所有问题。

Wiki 是第一种方法的一个很好的例子。(http://cs.wikipedia.org/wiki/P%C5%99ekladi%C5%A1t%C4%9B)

# javascript - 使用 json 和 javascript 实现数据可视化

> ID：10783269
> 
> 赞同：0
> 
> 时间：2012-05-28T10:41:36.587
> 
> 标签：javascript, json, raphael, visualization, d3.js

假设我有这样的 json 数据：

```
{
  "node1": {
     id: "1", 
     name: "node1", 
     type: "A", 
     children: [
      {
       id: "11", 
       name: "node11", 
       children: [
        {
         id: "node111", 
         name: "node111", 
         leaf: true
        },
        {
         id: "node112", 
         name: "node112", 
         leaf: true
        }
       ]
      }
    ]},
"node2": {
   id: "12", 
   name: "node12", 
   children: [
    {
     id: "node121", 
     name: "node121", 
     leaf: true
    } 
  ]
} 
```

}

我想通过使用 js 框架在图形树中显示这样的数据。我用谷歌搜索并找到了一些很好的库，如 raphael、d3 ......但它们都无法读取 json 数据并创建从一个节点到另一个节点的关系路径。我需要一个智能库，它应该识别我的数据的父子关系并在它们之间添加线。有什么想法吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:49:49.760

您的数据是树状结构的。Infovis 库似乎确实可以很好地可视化：http: [//thejit.org/demos/](http://thejit.org/demos/)

但正如@Felix Kling 所说，您可能必须重组数据以匹配 X 库。

# iphone - 除了 Restkit，iOS 上的简单 Restful 框架/客户端？

> ID：10783271
> 
> 赞同：6
> 
> 时间：2012-05-28T10:41:41.940
> 
> 标签：iphone, ios, rest, restkit

我已经用 Restkit 玩了大约一天了，它的复杂性让我发疯。

我正在寻找一个简单、维护良好、宁静的 iOS 客户端，它可以与我用 Rails 编写的 Web 服务器进行通信。我只需要以下内容：轻松调用 CREATE/UPDATE/DELETE 并灵活地检查响应代码和响应正文（我依靠响应正文为我的对象设置某些与服务器相关的 id）

不幸的是，Resty 并不真正支持 ARC，所以它现在超出了我的范围。

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T00:18:52.173

我强烈推荐[AFNetworking](https://github.com/AFNetworking/AFNetworking)。它体积小、速度快、维护良好且易于使用。

除了[AFNetworking](https://github.com/AFNetworking/AFNetworking)之外，最近还发布了另一个名为[NSRails](https://github.com/dingbat/nsrails)的库，其目的是在使用 Rails 时简化 CRUD。虽然它是一个较新的库，但我个人没有使用过它，但它看起来很有希望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-20T21:43:58.367

使用`NSURLSession`and`NSJSONSerialization`检索和解析您的 JSON，然后使用 Github 的[Mantle](https://github.com/Mantle/Mantle)框架将该 JSON 映射到您的 ObjC 类。Mantle 比 RestKit 简单得多。

# javascript - 在 JavaScript 中将字符串转换为 JSON 文本

> ID：10783272
> 
> 赞同：0
> 
> 时间：2012-05-28T10:41:52.433
> 
> 标签：javascript, jquery, ajax, json, post

我想将 JSON 转换后的数据（html 代码）发送到`requestGet`Servlet。我的代码在将 POST 请求发送到 servlet 时是绝对正确的，但是在将字符串转换为 JSON 时出现错误。

我正在使用*myeclipse*，当我运行此代码时，它会显示

> “JSON 未定义”

但是当我将它保存为 HTML 并在 FF 上运行时，它既不显示任何错误也不向 servlet 发送任何请求。请建议我的方法对于通过 POST 方法将 JSON 文本发送到 servlet 是否正确。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://www.json.org/json2.js"></script>
<SCRIPT language="javascript">

var counter=0;
var controls=new Array();
function add(type) {
    //Create an input type dynamically.
    var element = document.createElement("input");

    //Assign different attributes to the element.
    element.setAttribute("type", type);
    element.setAttribute("value", type);
    element.setAttribute("name", type);
    element.id=type+counter;
    controls[counter]=element.id;
    counter++;
    var foo = document.getElementById("fooBar");
    foo.appendChild(element);
}

function save(){
    var data="";
    var formTitle="Form1";
    var method="post";
    data="<HTML><HEAD><TITLE>"+formTitle+"</TITLE></HEAD><BODY><FORM METHOD="+method+"/>";
    for(i=0;i<controls.length;i++){
    var element=document.getElementById(controls[i]);
    data+="<INPUT type=button id="+element.id+" value="+element.getAttribute("value")+"/>";
    }
    data+="</FORM></BODY></HTML>";
    alert("Data::"+data);
    DoSelectRecommendation(data);

} 

/*
 * code for sending request to the servlet.
 */
$(function() {
       var frm = $(document.myform);
       var dat = JSON.stringify(frm.serializeArray());
       alert("I am about to POST this:\n\n" + dat);

       $.post(
         frm.attr("action"),
         dat,
         function(data) {
           alert("Response: " + data);
         }
       );
     });
var req;
function DoSelectRecommendation(Text) {
if(window.XMLHttpRequest && !(window.ActiveXObject)) {  
        try {  
            req = new XMLHttpRequest();  
        } catch(e) {  
            req = false;  
        }  

    } else if(window.ActiveXObject) {  

        try {  
            req = new ActiveXObject("Msxml2.XMLHTTP");  
        } catch(e) {  
            try {  
                req = new ActiveXObject("Microsoft.XMLHTTP");  
            } catch(e) {  
                req = false;  
            }  
        }  
    } 

 var url="http://localhost:8080/TestForJsp/requestGet";
 req.open("POST",url,true);
 req.setRequestHeader("Content-type","application/x-www-form-urlencoded");
 req.send(Text);
 req.onreadystatechange = inserter;
}

function inserter() {
if (req.readyState == 4) {
    if (req.status == 200) {
        var msg = req.responseText;
        alert("msg = "+msg);
        if (msg == "") {
            document.getElementById("msg1").innerHTML = "<div style=\"color:red\">"+"COS NIE TAK"+"</div>";
            //document.getElementById("msg1").value = "blabla";
        }
        else
            document.getElementById("msg1").innerHTML = "<div style=\"color:red\">"+msg+"</div>";
            //document.getElementById("msg1").value = "COOOO JEST";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:46:57.413

并非所有浏览器都支持原生 JSON。例如，某些版本的 IE，可能还有 myeclipse。考虑使用诸如[Douglas Crockford 的 JSON2 之](https://github.com/douglascrockford/JSON-js)类的填充程序来添加对不兼容浏览器的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:43:10.237

这似乎是*myeclipse*中的一个错误，它不知道[The `JSON`Object](http://es5.github.com/#x15.12)。

正如您所说，您的代码是正确的，并且在 Chrome 和 FF 中完美运行，它们实现了链接标准。要解决此问题，您可以从 jQuery 库中使用 stringify，因为[jQuery 错过了一个](https://stackoverflow.com/q/2277405/1048572)[`parseJSON`](http://api.jquery.com/jQuery.parseJSON/)方法，您将需要一个解决[方法](https://stackoverflow.com/q/2277405/1048572)。[`stringifyJSON`](https://stackoverflow.com/q/2277405/1048572)

# java - JAX-WS Webservice 类初始化块

> ID：10783276
> 
> 赞同：0
> 
> 时间：2012-05-28T10:42:07.713
> 
> 标签：java, web-services, jakarta-ee, jax-ws, websphere-7

Webservices 的一些新手，但这是一个棘手的问题，我正在努力寻找更好的实现方法。请参见下面的代码：不必**`setClientIPAddress`**在每个 web 服务方法上调用该方法，有没有办法只做一次？即我尝试了以下内容：

```
// initialisation block
{
   WSBean wsBean = new WSBean();
   wsBean.setClientIPAddress(getClientIPAdd);

} 
```

这编译正常，但我得到一个运行时错误。Webservice 类似乎不喜欢初始化块。

```
@javax.jws.WebService(targetNamespace = "http://baseentity.com/", serviceName = "WSBeanService", portName = "WSBeanPort", wsdlLocation = "WEB-INF/wsdl/WSBeanService.wsdl")
public class WSBeanDelegate {

    WSBean wsBean = new WSBean();

    public String getBaseInfoList(String baseID) {
      wsBean.setClientIPAddress(getClientIPAdd); // 
        return wsBean.getBaseInfoList(transactionID);
    }

    public String getBaseEntityInfo(String entityID) {
      wsBean.setClientIPAddress(getClientIPAdd);
        return wsBean.getBaseEntityInfo(entityID);
    }

    @WebMethod 
      private String getClientIPAdd()
      {
        MessageContext mc = this.wsContext.getMessageContext();

        HttpServletRequest req = (HttpServletRequest)mc.get("javax.xml.ws.servlet.request");
        return req.getRemoteAddr();
      } 
```

我试过使用@PostContruct，如下所示：

```
 @PostContruct
        private void init()
        {
              wsBean.setClientIPAddress(getClientIPAdd);
        } 
```

但我收到以下错误：“带有修饰符的非法访问异常”。

但是，将方法声明为公共还需要在 bean/wsdl 文件中定义相同的方法，这不是我想做的。有关如何改进此代码的任何建议？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:06:55.950

尝试：

```
@PostContruct
@javax.jws.WebMethod(exclude=true)
public void init()
{
    wsBean.setClientIPAddress(getClientIPAdd);
} 
```

# r - 以自定义分布为条件模拟向量

> ID：10783280
> 
> 赞同：4
> 
> 时间：2012-05-28T10:42:18.503
> 
> 标签：r, simulation

我正在测量每天的剧集持续时间（`ep.dur`以分钟为单位的向量），为期数`T=364`天的观察期。该向量`ep.dur`有一个`length(ep.dur)`，`T=364`在没有发生事件的天数中为零，并且`range(ep.dur)`在 0 到 1440 之间

T 周期内的情节持续时间之和为`a<-sum(ep.duration)`

现在我有一个向量`den`，带有`length(den)=99`. 向量 den 显示每 1% (1%, 2%, 3%, ...) 的开发需要多少天`a`

现在**给出** `den`and `a`，我想模拟多个`ep.dur`

这可能吗？

**澄清 1:** : (danas.zuokas 的第一条评论) 的元素`den`代表**持续时间**而不是确切的天数。这意味着，例如 1，1`a` 天开发 1%(=1195.8)，2 天开发 2%，3 天开发 3%，4 天开发 4%，5 天开发 5%，**5****天**开发6% ......）。这些剧集可以在 T 中的任何地方发生

 ****澄清 2：**（danas.zuokas 的第二条评论）不幸的是，无法假设持续时间如何发展。这就是为什么我必须模拟大量 ep.dur 向量。但是，如果这有任何帮助，我可以将 den 向量扩展为更有限的分辨率（即：而不是 1% 的跳跃，0.1% 的跳跃）。

**算法描述** 算法应该满足 den 向量提供的所有信息。我想象算法如下（示例 3）： a 的每 1% 跳跃是 335,46 分钟。`den[1]`告诉我们 1% 的 a 是在 1 天内开发的。所以假设我们生成`ep.dur[1]`=335,46。好的。我们去`den[2]`： 2% 的 a 是在`d[2]`=1 天内开发的。因此，`ep.dur[1]`不能为 335,46 并被拒绝（一天内仍应出现 2% 的 a）。可以说产生了`ep.dur[1]`= 1440。`d[1]`满意，满意`d[2]`（至少 2% 的总持续时间在`dur[2]`=1 天内开发），`dur[3]`=1 也满意。守门员？但是，`dur[4]`如果 ep.dur[1]=1440 不满足 =2，因为它表明 4% 的 a (=1341) 应该在 2 天内发生。所以`ep.dur[1]`被拒绝。现在让我们说`ep.dur[1]`= 1200。`dur[1:3]`被接受。然后我们生成`ep.dur[2]`等等，确保生成的 ep.dur 都满足 den 提供的信息。

这在编程上可行吗？我真的不知道从哪里开始这个问题。一旦赏金开始期结束，我将提供慷慨的赏金

**示例 1：**

```
a<-119508

den<-c(1, 2, 3, 4, 5, 5, 6, 7, 8, 9, 10, 10, 11, 12, 13, 14, 15, 15, 
                16, 17, 18, 19, 20, 20, 21, 22, 23, 24, 25, 25, 26, 27, 28, 29, 
                30, 30, 31, 32, 33, 34, 35, 35, 36, 37, 38, 39, 40, 40, 41, 42, 
                43, 44, 45, 45, 46, 47, 48, 49, 50, 50, 51, 52, 53, 54, 55, 55, 
                56, 57, 58, 59, 60, 60, 61, 62, 63, 64, 65, 65, 66, 67, 68, 69, 
                70, 70, 71, 72, 73, 74, 75, 75, 76, 77, 78, 79, 80, 80, 81, 82, 
                83) 
```

**示例 2：**

```
 a<-78624
    den<-c(1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 
    11, 12, 13, 13, 14, 14, 15, 15, 16, 16, 17, 18, 19, 21, 22, 23, 
    28, 32, 35, 36, 37, 38, 43, 52, 55, 59, 62, 67, 76, 82, 89, 96, 
    101, 104, 115, 120, 126, 131, 134, 139, 143, 146, 153, 160, 165, 
    180, 193, 205, 212, 214, 221, 223, 227, 230, 233, 234, 235, 237, 
    239, 250, 253, 263, 269, 274, 279, 286, 288, 296, 298, 302, 307, 
    309, 315, 320, 324, 333, 337, 342, 347, 352) 
```

**示例 3**

```
a<-33546
den<-c(1, 1, 1, 2, 4, 6, 8, 9, 12, 15, 17, 21, 25, 29, 31, 34, 37, 
42, 45, 46, 51, 52, 56, 57, 58, 59, 63, 69, 69, 71, 76, 80, 81, 
87, 93, 95, 102, 107, 108, 108, 112, 112, 118, 123, 124, 127, 
132, 132, 132, 135, 136, 137, 150, 152, 162, 166, 169, 171, 174, 
176, 178, 184, 189, 190, 193, 197, 198, 198, 201, 202, 203, 214, 
218, 219, 223, 225, 227, 238, 240, 246, 248, 251, 254, 255, 257, 
259, 260, 277, 282, 284, 285, 287, 288, 290, 294, 297, 321, 322, 
342) 
```

**示例 4**

```
 a<-198132

den<-c(2, 3, 5, 6, 7, 9, 10, 12, 13, 14, 16, 17, 18, 20, 21, 23, 24, 
    25, 27, 28, 29, 31, 32, 34, 35, 36, 38, 39, 40, 42, 43, 45, 46, 
    47, 49, 50, 51, 53, 54, 56, 57, 58, 60, 61, 62, 64, 65, 67, 68, 
    69, 71, 72, 74, 75, 76, 78, 79, 80, 82, 83, 85, 86, 87, 89, 90, 
    91, 93, 94, 96, 97, 98, 100, 101, 102, 104, 105, 107, 108, 109, 
    111, 112, 113, 115, 116, 120, 123, 130, 139, 155, 165, 172, 176, 
    178, 181, 185, 190, 192, 198, 218) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:15:41.733

据我了解您所追求的，我将从转换`den`为`rle`对象开始。（此处使用**示例 3**中的数据）

**编辑：**在第 364 天添加 100%`den`

```
if(max(den)!=364) den <- c(den, 364)
(rleDen <- rle(den))
# Run Length Encoding
#   lengths: int [1:92] 3 1 1 1 1 1 1 1 1 1 ...    # 92 intervals
#   values : num [1:92] 1 2 4 6 8 9 12 15 17 21 ...
percDur <- rleDen$lengths            # Percentage of total duration in each interval
atDay <- rleDen$values               # What day that percentage was reached
intWidth <- diff(c(0, atDay), k = 1) # Interval width
durPerDay <- 1440                    # Max observation time per day
percPerDay <- durPerDay/a*100        # Max percentage per day
cumPercDur <- cumsum(percDur)        # Cumulative percentage in each interval
maxPerInt <- pmin(percPerDay * diff(c(0, atDay), 1),
  percDur + 1)                       # Max percent observation per interval

set.seed(1)
nsims <- 10                          # Desired number of simulations
sampMat <- matrix(0, ncol = length(percDur), nrow = nsims) # Matrix to hold sim results 
```

* * *

考虑到每天最多观察 1440 分钟的限制，为了允许随机性，请检查是否存在任何长间隔（即，在该间隔内不能完全实现百分比跳跃的任何间隔）

```
if(any(percDur > maxPerInt)){
  longDays <- percDur > maxPerInt
  morePerInt <- maxPerInt - percDur
  perEnd <- c(which(diff(longDays,1) < 0), length(longDays))
# Group intervals into periods bounded by "long" days
# and determine if there are any long periods (i.e., where
# the jump in percentage can't be achieved in that period)
  perInd <- rep(seq_along(perEnd), diff(c(0, perEnd)))
  perSums <- tapply(percDur, perInd, sum)
  maxPerPer <- tapply(maxPerInt, perInd, sum)
  longPers <- perSums > maxPerPer
# If there are long periods, determine, starting with the last period, when the
# excess can be covered. Each group of periods is recorded in the persToWatch
# object
  if(any(longPers)) {
    maxLongPer <- perEnd[max(which(longPers))]
    persToWatch <- rep(NA, length(maxLongPer))
    for(kk in rev(seq_len(maxLongPer))) {
      if(kk < maxLongPer && min(persToWatch, na.rm = TRUE) <= kk) next
        theSums <- cumsum(morePerInt[order(seq_len(kk),
          decreasing = TRUE)])
        above0 <- which(rev(theSums) > 0)
        persToWatch[kk] <- max(above0[which(!perInd[above0] %in% c(perInd[kk],
          which(longPers)) & !above0 %in% which(longDays))])
    }
  }
} 
```

* * *

现在我们可以开始随机性了。抽样的**第一个**`a`组成部分决定了在每个间隔中发生的总体比例。多少？让我们`runif`决定。上限和下限必须反映每天的最长观察时间以及任何长日和时段的超量

```
 for(jj in seq_along(percDur[-1])) {
    upperBound <- pmin(sampMat[, jj] + maxPerInt[jj],
      cumPercDur[jj] + 1)
    lowerBound <- cumPercDur[jj]
# If there are long days, determine the interval over which the
# excess observation time may be spread
    if(any(percDur > maxPerInt) && any(which(longDays) >= jj)) {
      curLongDay <- max(which(perInd %in% perInd[jj]))
      prevLongDay <- max(0, min(which(!longDays)[which(!longDays) <= jj]))
      curInt <- prevLongDay : curLongDay
# If there are also long periods, determine how much excess observation time there is
      if(any(longPers) && maxLongPer >= jj) {
        curLongPerHigh <- min(which(!is.na(persToWatch))[
          which(!is.na(persToWatch)) >= jj])
        curLongPerLow <- persToWatch[curLongPerHigh]
        longInt <- curLongPerLow : curLongPerHigh
        curExtra <- max(0,
          cumPercDur[curLongPerHigh] - 
          sum(maxPerInt[longInt[longInt > jj]]) - 
          sampMat[, jj, drop = FALSE])
      } else {
        curExtra <- cumPercDur[curLongDay] - 
          (sum(maxPerInt[curInt[curInt > jj]]) +
          sampMat[, jj, drop = FALSE])
      }
# Set the lower limit for runif appropriately
      lowerBound <- sampMat[, jj, drop = FALSE] + curExtra
    }
# There may be tolerance errors when the observations are tightly
# packed
    if(any(lowerBound - upperBound > 0)) { 
      if(all((lowerBound - upperBound) <= .Machine$double.eps*2*32)) {
        upperBound <- pmax(lowerBound, upperBound)
      } else {
        stop("\nUpper and lower bounds are on the wrong side of each other\n",
          jj,max(lowerBound - upperBound))
      }
    }
    sampMat[, jj + 1] <- runif(nsims, lowerBound, upperBound)
  } 
```

然后将 100% 添加到结果的末尾并计算特定于区间的百分比

```
 sampMat2 <- cbind(sampMat[, seq_along(percDur)], 100)
  sampPercDiff <- t(apply(sampMat2, 1, diff, k = 1)) 
```

* * *

随机性的**第二个**`sampPercDiff`分量决定了区间宽度上的分布`intWidth`。在我看来，这仍然需要更多的思考。例如，与所考虑的时间单位相比，一个典型的情节持续了多长时间？

对于每个间隔，确定是否需要在多个时间单位（在本例中为天）分配随机百分比。**编辑：**更改以下代码以限制`intWidth > 1`.

```
library(foreach)
  ep.dur<-foreach(ii = seq_along(intWidth),.combine=cbind)%do%{
    if(intWidth[ii]==1){
      ret<-sampPercDiff[, ii, drop = FALSE] * a / 100
      dimnames(ret)<-list(NULL,atDay[ii])
      ret
    } else {
      theDist<-matrix(numeric(0), ncol = intWidth[ii], nrow = nsims)
      for(jj in seq_len(intWidth[ii]-1)){
        theDist[, jj] <- floor(runif(nsims, 0, pmax(0,
          min(sampPercDiff[, ii], floor(sampMat2[,ii + 1])-.Machine$double.eps -
          sampMat2[,ii]) * a / 100 - rowSums(theDist, na.rm = TRUE))))
      }
      theDist[, intWidth[ii]] <- sampPercDiff[, ii] * a / 100 - rowSums(theDist,
        na.rm = TRUE)
      distOrder <- replicate(nsims, c(sample.int(intWidth[ii] - 1),
        intWidth[ii]), simplify = FALSE)
      ret <- lapply(seq_len(nrow(theDist)), function(x) {
        theDist[x, order(distOrder[[x]])]
      })
      ans <- do.call(rbind, ret)
      dimnames(ans) <- list(NULL, atDay[ii]-((intWidth[ii]:1)-1))
      ans
    }
  } 
```

持续时间在要分配的时间间隔内为每个时间单位（天）随机采样。在将总持续时间分解为每日观察时间后，然后将这些时间随机分配给间隔中的天数。

* * *

然后，将采样和分布的百分比乘以`a`并除以 100

```
ep.dur[1, 1 : 6]
#         1         2         3         4         5         6 
# 1095.4475  315.4887    1.0000  578.9200   13.0000  170.6224 

ncol(ep.dur)
# [1] 364

apply(ep.dur, 1, function(x) length(which(x == 0)))
# [1] 131 133 132 117 127 116 139 124 124 129

rowSums(ep.dur)/a
# [1] 1 1 1 1 1 1 1 1 1 1

plot(ep.dur[1, ], type = "h", ylab = "obs time") 
```

![甚至更新的样品](../Images/56195ddb3b09b18de8eedf5ea7fef8e8.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T19:48:40.920

我很可能会使用 ruby​​ 脚本来执行此操作，但也可以这样做`R`。我不确定这是否是你的作业问题。至于回答你的问题：这可以有问题吗？是的当然！

根据您的问题，我的解决方案是定义最小和最大限制，我可以在其中随机选择一个满足`den`向量和`a`值给定条件的百分比。

由于`den`向量仅包含 99% 的值，我们无法确定 100% 何时会发生。这种情况使我的解决方案分为 3 部分 - 1）对于给定的 den 向量高达 98% 2）对于 99% 3）超过 99%。我可以定义另一个函数并将通用代码放在所有这 3 个部分中，但我没有这样做。

因为，我使用`runif`命令生成随机数，给定下限，它不太可能生成确切的下限值。因此，我定义了一个`threshold`我可以检查的值，如果它低于它，我会将其设为 0。你可以拥有它或删除它。此外，当您考虑示例 4 时，前 1% 将在第二天发生。所以这意味着第 1 天最多可以包含剧集的 0.999999%，然后 1% 发生在第 2 天。`smallestdiff`这就是为什么通过减去一个可以更改的值来定义最大限制的原因。

```
FindMinutes=function(a,den){
  if (a>1440*364){
    Print("Invalid value for aa")
    return("Invalid value for aa")
  }
  threshold=1E-7
  smallestdiff=1E-6
  sum_perc=0.0
  start=1 #day 1
  min=0 #minimum percentage value for a day
  max=0 #maximum percentage value for a day
  days=rep(c(0),364) #day vector with percentage of minutes - initialized to 0

  maxperc=1440*100/a #maximum percentage wrto 1440 minutes/day

  #############################################################
  #############################################################
  ############ For the length of den vector ###################
  for (i in 1:length(den)){
    if (den[i]>start){   
      min=(i-1)-sum_perc
      for(j in start:(den[i]-1)){#number of days in-between
         if (j>start){ min=0 }
         if (i-smallestdiff-sum_perc>=maxperc){
           max=maxperc
           if ((i-smallestdiff-sum_perc)/(den[i]-j)>=maxperc){
              min=maxperc
           }else{
              if ((i-smallestdiff-sum_perc)/(den[i]-j-1)<maxperc){
                 min=maxperc-(i-smallestdiff-sum_perc)/(den[i]-j-1)
               }else{
                 min=maxperc
               }           
           }
         }else{     
           max=i-smallestdiff-sum_perc
         }  

         if ((r=runif(1,min,max))>=threshold){
            days[j]=r
            sum_perc=sum_perc+days[j]
         }else{
            days[j]=0.0
         }
      }
      start=den[i]
    }
  }
  #############################################################
  #############################################################
  #####################For the 99% ############################
  min=99-sum_perc
  for(j in start:den[length(den)]){
    if (j>start){
           min=0
    }
    max=100-sum_perc
    if (100-sum_perc>=maxperc){
        max=maxperc
        if ((100-sum_perc)/(364+1-j)>=maxperc){
            min=maxperc
        }else{
            if ((100-sum_perc)/(364-j)<maxperc){
               min=maxperc-(100-sum_perc)/(364-j)
            }else{
               min=maxperc
            }           
        }
    }else{
        max=100-sum_perc
    }
    if ((r=runif(1,min,max))>=threshold){
        days[j]=r
        sum_perc=sum_perc+days[j]
    }else{
        days[j]=0.0
    }
  }
  #############################################################
  #############################################################
  ##################### For the remaining 1%###################
  min=0
  for(j in den[length(den)]+1:364){
      max=100-sum_perc
      if (j==364){
        min=max
        days[j]=min      
      }else{
        if (100-sum_perc>maxperc){
           max=maxperc
           if ((100-sum_perc)/(364+1-j)>=maxperc){
              min=maxperc
           }else{
              if ((100-sum_perc)/(364-j)<maxperc){
                 min=maxperc-(100-sum_perc)/(364-j)
               }else{
                 min=maxperc
               }           
           }
        }else{
           max=100-sum_perc
        }
        if ((r=runif(1,min,max))>=threshold){
           days[j]=r
        }else{
           days[j]=0.0
        }
    }
    sum_perc=sum_perc+days[j]  
    if (sum_perc>=100.00){
       break
    }  
  }
  return(days*a/100) #return as minutes vector corresponding to each 364 days
}#function 
```

在我的代码中，我根据最小值和最大值随机生成每天的剧集百分比值。此外，`den`当您将百分比值四舍五入为整数（`days`向量）时，条件（向量）仍然有效，但如果您需要，您可能需要额外的调整（这取决于`den`进一步检查向量，然后重新调整百分比的最小值）精确到小数点后几位。您还可以检查以确保`sum(FindMinutes(a,den))`等于`a`。如果您想以`den`0.1% 的形式定义，您可以这样做，但您需要更改相应的方程式（in`min`和`max`）

作为最坏情况的示例，如果您将`a`其设为可以采用的最大值和相应的`den`向量：

```
a=1440*364
den<-c(0)
cc=1
for(i in 1:363){
 if (trunc(i*1440*100/(1440*364))==cc){
  den[cc]=i
  cc=cc+1
 }
} 
```

您可以通过调用函数来运行上面的示例：`maxexamplemin=FindMinutes(a,den)` 您可以检查所有天的最大分钟数为 1440，这是这里唯一可能的情况。

作为说明，让我运行您的示例 3：

```
a<-33546
den<-c(1, 1, 1, 2, 4, 6, 8, 9, 12, 15, 17, 21, 25, 29, 31, 34, 37, 42, 45, 46, 51, 52, 56, 57, 58, 59, 63, 69, 69, 71, 76, 80, 81, 87, 93, 95, 102, 107, 108, 108, 112, 112, 118, 123, 124, 127, 132, 132, 132, 135, 136, 137, 150, 152, 162, 166, 169, 171, 174, 176, 178, 184, 189, 190, 193, 197, 198, 198, 201, 202, 203, 214, 218, 219, 223, 225, 227, 238, 240, 246, 248, 251, 254, 255, 257, 259, 260, 277, 282, 284, 285, 287, 288, 290, 294, 297, 321, 322, 342)
rmin=FindMinutes(a,den)
sum(rmin)
[1] 33546
rmin2=FindMinutes(a,den)
rmin3=FindMinutes(a,den)
plot(rmin,tpe="h")
par(new=TRUE)
plot(rmin2,col="red",type="h")
par(new=TRUE)
plot(rmin3,col="red",type="h") 
```

和 3 个叠加图如下所示： ![示例 3 的 3 次模拟的叠加图](../Images/f075b9ab31ab3c98d412b22c0d886e55.png)**

# compiler-errors - 添加平移和缩放错误

> ID：10783283
> 
> 赞同：0
> 
> 时间：2012-05-28T10:42:33.217
> 
> 标签：compiler-errors, processing

我正在尝试将平移和缩放添加到我用 processing.js 编写的应用程序中，这是我的代码：

```
boolean surfaceTouchEvent(MotionEvent event) {
pointNum=event.getPointerCount();
switch (event.getAction() & MotionEvent.ACTION_MASK) {
case MotionEvent.ACTION_DOWN:
//User is pressing on finger
float x0=event.getX(0);
float y0=event.getY(0);
mode = false; //DRAG
break;
case MotionEvent.ACTION_POINTER_DOWN:
x1=event.getX(0);x2=event.getX(1);
y1=event.getY(0);y2=event.getY(1);
float z4 = dist(x1,y1,x2,y2);
mode = true; // pinch
break;
case MotionEvent.ACTION_POINTER_UP:
// User is released one of the fingers.

break;
case MotionEvent.ACTION_MOVE:
if (mode = false){
x1=event.getX(0)-x0;
y1=event.getY(0)-y0;
}
if (mode = true){
x1=event.getX(0);x2=event.getX(1);
y1=event.getY(0);y2=event.getY(1);
float z3 = dist(x1,y1,x2,y2);
if ( z3 > z4 ){ 
zoom += 0.1;
}
else if ( z3 < z4){
zoom -= 0.1;  
}
}
break;
}
return super.surfaceTouchEvent(event);
} 
```

我保存了较旧的位置，以防 MotionEvent.ACTION_POINTER_DOWN 用于缩放，以防 MotionEvent.ACTION_DOWN 用于平移。例如，我需要这个旧位置来比较新距离和旧距离的缩放

这是错误：

```
compile:
    [javac] Compiling 2 source files to C:\DOCUME~1\T0P4568\LOCALS~1\Temp\android893850823480544580.pde\bin\classes
    [javac] C:\DOCUME~1\T0P4568\LOCALS~1\Temp\android893850823480544580.pde\src\changethispackage\beforesubmitting\tothemarket\sketch_may28a\sketch_may28a.java:118: variable x0 might not have been initialized
    [javac] x1=event.getX(0)-x0;
    [javac]                  ^
    [javac] C:\DOCUME~1\T0P4568\LOCALS~1\Temp\android893850823480544580.pde\src\changethispackage\beforesubmitting\tothemarket\sketch_may28a\sketch_may28a.java:119: variable y0 might not have been initialized
    [javac] y1=event.getY(0)-y0;
    [javac]                  ^
    [javac] C:\DOCUME~1\T0P4568\LOCALS~1\Temp\android893850823480544580.pde\src\changethispackage\beforesubmitting\tothemarket\sketch_may28a\sketch_may28a.java:125: variable z4 might not have been initialized
    [javac] if ( z3 > z4 ){
    [javac]           ^
    [javac] 3 errors 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:09:08.843

好的，您显然在使用 processing.org，它将其代码编译为 java。

解决方案很简单：预初始化`x0`，`y0`并`z4`设置为默认值，例如`0`。

这只是为了安抚java编译器，它不够聪明，无法理解b在读取它们时，它们已经被初始化了。

# ruby-on-rails - ActiveRecord 从 XLS 插入数据（脚本已经开发，需要帮助才能使其在 rails env 中运行）

> ID：10783285
> 
> 赞同：0
> 
> 时间：2012-05-28T10:42:38.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我需要使用对使用 Rails 创建的新应用程序的访问权限从旧应用程序推送一些数据。我已将 Access 数据导出到 .xls 并使用 gem 访问它`roo`。

它工作得很好，我创建了一个脚本并通过打印结果我确信它一切正常，现在我想让它自动将这些数据插入数据库中，访问 Rails 应用程序模型。

我尝试将文件放在我的 rails`lib/`目录下，然后我需要它`environments/development.rb`，但是当我导入 ruby​​ 文件时，它声称找不到一些我需要进行处理的变量。

为了完整起见，这是我开发的用于从 xls 中提取数据并对其进行编辑以匹配新的 db 模式的整个源代码。

```
# encoding: utf-8

require 'rubygems'
require 'roo'

user_id_conversion = {119 => 10, 152 => 11, 145 => 12, 161 => 13, 163 => 14, 158 => 15}
conversion_hours = {15 => 14, 17 => 16, 19 => 18}
hostess_id_conversion = {139 => 9, 157 => 17, 153 => 18, 110 => 20, 40 => 19, 141 => 21, 121 => 22, 151 => 23}
status_conversion = {1 => "Inserito", 2 => "Rifiutato", 3 => "Visitato", 4 => "Inserito", 5 => "Ricontattare", 6 => "Vendita"}
mall_id_conversion = {51 => 1, 56 => 2, 53 => 3, 54 => 4, 59 => 5, 65 => 6}

xls = Excel.new("/home/lex/Scrivania/appointments.xls")
xls.default_sheet = xls.sheets.first

city_list = []

# change this to current row numbers
1.upto(3829) do |line|
  uid        = xls.cell(line,'B').to_i

  if user_id_conversion.has_key? uid
    id         = xls.cell(line, 'A')
    uid        = user_id_conversion[uid]
    name       = xls.cell(line, 'F')
    surname    = xls.cell(line, 'E')
    city       = xls.cell(line, 'O')
    street     = xls.cell(line, 'G')
    start_at   = xls.cell(line, 'C')
    start_time = xls.cell(line, 'D')/60/60
    street_no  = xls.cell(line, 'M')
    telephone  = xls.cell(line, 'H')
    mobile     = xls.cell(line, 'I')
    email      = xls.cell(line, 'J')
    notes      = xls.cell(line, 'L')
    agent_note = xls.cell(line, 'U')
    status     = xls.cell(line, 'S')
    signed_by  = xls.cell(line, 'P')
    mall       = xls.cell(line, 'T')

    # we only want to move May -> future
    if start_at.month >= Date.today.month
      ##
      # COMPATIBILITY MODE
      ##
      if conversion_hours.has_key? start_time
        compatibility = true
      else
        compatibility = false
      end

      ##
      # WHO SIGNED THAT APPOINTMENT?
      ##
      if hostess_id_conversion.has_key? signed_by
        signed_by = hostess_id_conversion[signed_by]
      elsif user_id_conversion.has_key? signed_by
        signed_by = user_id_conversion[signed_by]
      else
        signed_by = -1 # display "user deleted"
      end

      ##
      # APPOINTMENT OR EXCLUDED FIELD?
      ##
      available = true
      if status == 4
        available = false
      end
      status = status_conversion[status]

      ##
      # todo SELECT CITY ID FROM DATABASE
      ##
      # city = Municipality.find_by_name(city)
      #

      ##
      # CONVERT MALL_ID
      ##
      if mall_id_conversion.has_key? mall
        mall = mall_id_conversion[mall]
      else
        mall = nil
      end

      ##
      # EMAIL is REQUIRED
      ##
      no_email = false
      if email.blank?
        no_email = true
      end

      ##
      # CONVERT APPOINTMENT DATES TO NEW ONES
      ##
      if compatibility
        old_start_at = DateTime.new start_at.year, start_at.month, start_at.day, start_time
        start_at     = DateTime.new start_at.year, start_at.month, start_at.day, conversion_hours[start_time]
      else
        old_start_at = nil
        start_at     = DateTime.new start_at.year, start_at.month, start_at.day, start_time
      end

      ##
      # todo interesting products
      #    serramenti: boolean, tende_sole: boolean, tecnic: boolean,
      #    tende_veranda: boolean, porte_interne: boolean, tapparelle: boolean, blindati: boolean,
      #    zanzariere: boolean,
      ##

      ##
      # todo INSERT THIS APPOINTMENT
      ##
=begin
      if available == false
        Event.new(
          :event_calendar_id => User.find(uid).event_calendar,
          :status => "Inserito",
          :available => false
          )
      else
        Event.new(
          :event_calendar_id => User.find(uid).event_calendar,
          :signed_by_id => User.find_by_id(signed_by),
          :mall_id => Mall.find_by_id(mall),
          :status => status,
          :name => name,
          :surname => surname,
          :street => street,
          :street_no => street_no,
          :city_id => city.name,
          :telephone => telephone,
          :mobile => mobile,
          :email => email,
          :no_email => no_email,
          :inserting_notes => notes,
          :seller_notes => agent_note,
          :start_at => start_at,
          :available => true,
          group_id: 3,
          :compatibility_start_at => old_start_at
          )
      end
=end

    end
  end
end 
```

如何在 rails 环境中进行这项工作？我正在考虑制作一个在控制台中运行的类或函数之类的东西，`rails c`因为我今晚需要运行以获得最新的数据库版本，提取带有更新记录的 xls 并施展魔法。

抱歉，这似乎是一个菜鸟问题，但我是 Ruby 新手。

PS 我正在使用带有 Ruby 1.9.3 PPS 的 Rails 3.2.3 我在 Gemfile 中插入了“roo”，因为它首先没有找到 gem。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:53:54.833

如果你这样做

```
rails runner path/to/script 
```

然后rails会加载rails环境，然后运行你的脚本

# php - 文件操作后重新编码 json

> ID：10783286
> 
> 赞同：0
> 
> 时间：2012-05-28T10:42:45.630
> 
> 标签：php, json, file-io

我在将 json 重新编码回其格式时遇到了一些问题。我想要实现的是，在 .json 文件上传时，对其进行修改以满足某些标准。

问题是当我尝试修改文件上的图像 src 并将其编码回 json 时，但是 foreach 循环中的数组正确打印出来，新文件生成时没有任何内容！

很高兴你能帮我解决这个问题

```
function prepareImages($file,$url,$article)
{

    $string = file_get_contents($file);
    $json = json_decode($string,true);
    $value = array();
    //$array = $json['elements'];
            //$imgArray = array();
    /* if(['type'] == "image")
    {
        array_push($json['elements']['src'],$array);
    } */

    foreach($json['elements'] as $value)
    {
        if($value['type'] == "image")
        {
                        $arr = explode('\\', $value['src']);
                        $count = count($arr);
                        $img = $arr[$count-1];
                        $src = $url.'res/'.$article.'/'.$img;
                        $value['src'] = $src;

                        //print_r($json);
        }
                    //This prints all the values correctly
                    print_r($value);

    } 
                    $json = $value;
                    $string = json_encode($json);

            file_put_contents($file,$string);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:46:59.347

根据[json_encode()](http://php.net/manual/en/function.json-encode.php)文档，该函数转义正斜杠，尝试这样做：

```
$value['src'] = str_replace('\\/', '/', $src) 
```

# templates - drupal template.php 不使用 tpl 文件

> ID：10783288
> 
> 赞同：0
> 
> 时间：2012-05-28T10:42:56.543
> 
> 标签：templates, drupal

我有一个代码可以在一台服务器上运行，但不能在另一台服务器上运行。基本上我们已经编写了一个模板文件，如果 URL 是讨论论坛应该使用它，但它显示页面未找到。

```
 /* discussion forum templates */
    $querystring=$_GET['q'];
        echo $querystring; // THIS PRINTS page-not-found
    $querystring=explode('&',$_GET['q']);    

if(!isset ($vars['node']) && $querystring[0]=='discussion-forum'){
    $vars['template_files'] = array(); 
    $vars['template_files'][] = 'page-discussion_forum'; 
}
if (!isset ($vars['node']) && $querystring[0]=='discussion_forum_answer') { 
    $_SESSION['question_id']=$querystring[1];
    $vars['template_files'] = array(); 
    $vars['template_files'][] = 'page-discussion_forum_answer'; 
    }

if(!isset ($vars['node']) && $querystring[0]=='discussion_forum_search'){
    $vars['template_files'] = array(); 
    $vars['template_files'][] = 'page-discussion_forum_search'; 
} 
```

当我在`$querystring[0]=='discussion-forum'`. 它正确显示页面。不知道这里发生了什么。它在其他服务器上工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:36:13.570

要添加自定义 tpl，我通常在预处理节点中添加主题建议。

```
$vars['theme_hook_suggestions'][] = 'node____'.$vars['view_mode']; 
```

所以你的应该是

```
function THEME_preprocess_node(&$vars, $hook) 
    $vars['theme_hook_suggestions'][] = 'page-discussion_forum_search';
 } 
```

如果您确定您使用的是哪个版本的 drupal，这将有所帮助，因为其中一些内容在版本之间会发生变化。

# c - c语言使用文件操作创建数据库

> ID：10783294
> 
> 赞同：0
> 
> 时间：2012-05-28T10:43:13.683
> 
> 标签：c, database, file-handling

我已经使用文件创建了一个数据库。如果文件中已经存在记录，则在文件中插入记录时，它将最终被复制。但我想避免这种情况。如何设计一种机制来避免重复记录（即如何检查记录是否已经在文件中以及如何阻止用户在文件中再次输入相同的数据）？

```
/*  vehicle record program      */

#include <stdio.h>
#include <string.h>

typedef struct vehicle
{
    char name[100];
    int lice_no;
    int vehicle_type;
    char cmpny_name[100];
    int menu_year;
}record;

int main(void)
{
    int i , choice;
    FILE *fp1,*fp2;
    char oname[100];
    record det;
    int recsize;
    char c;

    fp1 = fopen("record.dat" , "r+");
    if(fp1 == NULL)
    {
        fp1 = fopen("record.dat" , "w+");
        if(fp1 == NULL)
        {
            printf("error in opening file : \n");
            return -1;
        }
    }
    recsize = sizeof(det);

    fseek(fp1 , 0 ,SEEK_END);
    printf("Enter owner Name    : ");
    scanf("%[^\n]" , det.name);
    printf("Enter licence number    : ");
    scanf("%d" , &det.lice_no);
    printf("Enter the vehicle type  : ");
    scanf("%d" , &det.vehicle_type);
    scanf("%c" , &c);
    printf("Enter company name  : ");
    scanf("%[^\n]" , det.cmpny_name);
    printf("Enter menufecture year  : ");
    scanf("%d" , &det.menu_year);
    fwrite(&det,recsize,1,fp1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:39:01.250

在插入新记录之前，您必须检查文件中是否已经存在相同的记录。为了做到这一点，我将从创建几个函数开始。就像是：

```
void find_record(char *name, record *rec, FILE *f);
void add_record(const record *rec, FILE *f);
void del_record(char *name, FILE *f); 
```

我假设`name`仅此一项就可以识别给定的记录。否则，您将需要使用复合键（例如`name`+ `lice_no`）。

一旦你拥有了所有这些功能，防止重复记录就变得容易多了：

```
void add_record(const record *rec, FILE *f) {
    ...
    record *r;
    find_record(rec->name, r, f);
    if (r == NULL) {
        // record is not already in the file -> insert it
        ...
    }
    else {
        // record is already in the file -> do nothing
        printf("A record with name %s already exists\n", r->name);
    }
    ...
} 
```

如您所见，以模块化方式编程确实有很大帮助，并使事情变得更容易。

# html - 在 html5 画布中显示视频并拖放

> ID：10783295
> 
> 赞同：0
> 
> 时间：2012-05-28T10:43:18.257
> 
> 标签：html, video, canvas, drag-and-drop

我已经可以将多个图像上传到画布并拖放图像。现在我需要拖放用户上传的视频。请注意，用户可以同时拥有图像和视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:58:37.653

您必须先加载视频（等待其 readyState 为 4）。

然后，您可以根据需要在画布上绘制其内容，就好像它是任何图像一样：

```
function drawMyCanvas() {
    ...

    if (videoElement.readyState==4) {
            context.drawImage(videoElement, destX, destY, destWidth, destHeight);
            if (!videoElement.paused) {
                // set timeout for a new drawing 20 ms later
                window.setTimeout(drawMyCanvas, 20);
            }

  ... 
```

当我这样做时，我通常有一个循环来每 20 毫秒绘制一次图像，并且 mousemove 上有一个处理程序，如果其中一个可移动对象移动，它会调用我的画布绘制函数。

# sql - 关于sql server查询

> ID：10783298
> 
> 赞同：1
> 
> 时间：2012-05-28T10:43:41.563
> 
> 标签：sql, sql-server

这是我在 sql 中的查询：

```
with cte
as(
  select top 1 
    Id,
    (((DATEPART(hour, CAST([Time] AS DATETIME)) * 60) + (DATEPART(minute, CAST([Time] AS DATETIME)) ) )) AS Tim,
    Price
 from Prices order by [Time] desc
)
,cte1 as(
  select 
    (((DATEPART(hour, CAST([Time] AS DATETIME)) * 60) + (DATEPART(minute, CAST([Time] AS DATETIME)) ) )) as tim1
  from M1 
) 
```

现在我想这样做；如果 cte.tim=cte1.tim1 ，更新表中的一行，否则插入表中，但我不知道如何？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:00:44.047

您只能制作`SELECT`或`UPDATE`，不能同时制作！

查看[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms175972.aspx)以获取更多信息。

# silverlight - 在 datatemplate 中查找 datacontext

> ID：10783302
> 
> 赞同：0
> 
> 时间：2012-05-28T10:43:55.137
> 
> 标签：silverlight

我不是 Silverlight 专家，我正在努力解决一个恼人的问题。

我在网格中有一个 Telerik RadRichTextbox。此网格位于作为 ItemsControl 一部分的 DataTemplate 内。像这样：

```
<ItemsControl Grid.Row="1" ItemsSource="{Binding MyCollection}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <telerik:RadRichTextBox x:Name="_Editor" DocumentChanged="HandleditorDocumentChanged"/>
                <Xaml:XamlDataProvider x:Name="xamlProvider" Xaml="{Binding Text}" RichTextBox="{Binding ElementName=_Editor}" />

                <TextBox Grid.Row="1" Text="{Binding Text2}" />
            </Grid>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

在 DocumentChanges 事件中，我想访问 DataTemplate 的 DataContext。我尝试将 _Editor 的 DataContext 设置为 {Binding} 但在 DataContext 后面的代码中为空。然后我想到了获取_Editor的父级，即Grid。它的 DataContext 也为 null，其父级的 Grid 也为 null。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:46:34.680

我认为您正在寻找的是 DataContext 代理。考虑这个例子：

[http://weblogs.asp.net/dwahlin/archive/2009/08/20/creating-a-silverlight-datacontext-proxy-to-simplify-data-binding-in-nested-controls.aspx](http://weblogs.asp.net/dwahlin/archive/2009/08/20/creating-a-silverlight-datacontext-proxy-to-simplify-data-binding-in-nested-controls.aspx)

# performance - 具有聚合函数的 CASE 会大大降低查询速度，这是一种更好的方法吗？

> ID：10783316
> 
> 赞同：0
> 
> 时间：2012-05-28T10:45:01.173
> 
> 标签：performance, postgresql, aggregate-functions, case

```
SELECT CASE WHEN avg(count)>12 THEN 5
            WHEN avg(count)>8  THEN 4
            WHEN avg(count)>2  THEN 3
            WHEN avg(count)>1  THEN 2
            ELSE 1
            END,madeby
FROM (SELECT M.month,(SELECT count(*)
                     FROM Booking
                     WHERE date_trunc('month',starttime)=month
                         AND madeby=M.madeby
                     ) AS count,M.madeby
     FROM (SELECT date_trunc('month',generate_series(min(starttime),
                            current_timestamp,interval '1 month')::timestamp)
                            AS month,madeby
          FROM Booking
          GROUP BY madeby
     ) AS M
) AS BookingsPerMonth
GROUP BY madeby; 
```

现在我需要在那里进行计算，我不质疑这一点。我猜问题是它计算了聚合函数 avg 四次。时间差异从使用 CASE 的 ~17 秒到没有的 ~4.5 秒（尽管我当时缺乏足够的信息）

有没有办法通过可变存储或其他方式来优化这一点，例如使时间接近 4.5 秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:38:43.223

```
SELECT  
    CASE 
        WHEN avg_count > 12 THEN 5
        WHEN avg_count > 8  THEN 4
        WHEN avg_count > 2  THEN 3
        WHEN avg_count > 1  THEN 2
        ELSE 1
    END,
    madeby
FROM (
    SELECT avg(count) as avg_count, madeby
    FROM (
        SELECT 
            M.month,
            (
                SELECT count(*)
                FROM Booking
                WHERE date_trunc('month',starttime)=month AND madeby=M.madeby
            ) AS count, 
            M.madeby
        FROM (
            SELECT 
                date_trunc('month',generate_series(min(starttime),
                current_timestamp,interval '1 month')::timestamp) AS month,
                madeby
            FROM Booking
            GROUP BY madeby
        ) AS M
    ) AS BookingsPerMonth
    GROUP BY madeby
) AS Averages; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:06:24.183

我会尝试让 PG 只计算一次平均值，就像这样（在我脑海中）：

而是做

```
SELECT CASE WHEN avg(count)>12 THEN 5
            WHEN avg(count)>8  THEN 4
... 
```

做

```
SELECT CASE WHEN avgcount>12 THEN 5
            WHEN avgcount>8  THEN 4
... 
```

然后替换

```
FROM (SELECT M.month,(SELECT count(*)
...
                     ) AS count,M.madeby 
```

和

```
FROM (SELECT avg(M.month),(SELECT count(*)
...
                     ) AS avgcount,M.madeby 
```

你的，S。

# html - 在CSS中选择另一个元素之后的直接第一个元素

> ID：10783318
> 
> 赞同：4
> 
> 时间：2012-05-28T10:45:11.950
> 
> 标签：html, css

我有以下 HTML：

```
<div id="form">
    <form>
       <textarea id="text"></textarea>
       <span class="error">select this</span>
       <span class="error">don't select this</span>
    </form>
</div> 
```

在 CSS 中，如何仅选择元素之后的*第* 一个元素*而不*选择第一个元素之后的其他元素？`span``textarea`*`span`*

 ** * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T10:46:36.530

您可以使用[相邻的兄弟组合](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)器：

```
#text + span {
    /* Styles */
} 
```

这是一个[工作示例](http://jsfiddle.net/wjmvJ/)。

**更新**（见评论）

要定位第二个`span`，您可以简单地将另一个相邻的兄弟组合器添加到选择器：

```
#text + span + span {
    /* Styles */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:46:49.610

使用[`+`（相邻兄弟）](https://developer.mozilla.org/en/CSS/Adjacent_sibling_selectors)选择器：

```
textarea + span { ... } 
```

演示：http: [//jsfiddle.net/ThiefMaster/ngrZz/](http://jsfiddle.net/ThiefMaster/ngrZz/)*

# paypal - 如何在试用期后创建只有一个计费周期的贝宝订阅按钮？

> ID：10783320
> 
> 赞同：1
> 
> 时间：2012-05-28T10:45:24.480
> 
> 标签：paypal, wordpress, paypal-subscriptions

我是创建 Paypal 支付按钮的新手，我想在我的计划中使用订阅按钮。在此我想将我的订阅周期限制为只有 1 个计费周期，但当我使用支付标准时，Paypal 的下拉列表中至少有 2 个周期。

我的程序售价为 497 美元，我想提供 1 美元的试用期，试用 1 周后我想再收取 496 美元。然后，我想将客户带到我的注册页面，我在 WordPress 中使用 Wishlist Member 设置了会员网站。因此，如果我想使用愿望清单，我只能使用订阅按钮，因为它与分期付款按钮不兼容，而且在我的国家（印度）Paypal 不提供此类高级按钮。

任何后续帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:47:13.037

这是一个 hack，因为 PayPal 订阅按钮不支持“延迟付款”，但它会是这样的：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick-subscriptions">
<input type="hidden" name="business" value="youremail@yourdomain.com">
<input type="hidden" name="item_name" value="test subscription">
<input type="hidden" name="no_shipping" value="1">
<input type="hidden" name="no_note" value="1">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="lc" value="US">
<input type="hidden" name="bn" value="SgtPooki">
<input type="hidden" name="a2" value="1.00">
<input type="hidden" name="p2" value="1">
<input type="hidden" name="t2" value="W">
<input type="hidden" name="a3" value="496.00">
<input type="hidden" name="p3" value="1">
<input type="hidden" name="t3" value="M">
<input type="hidden" name="src" value="1">
<input type="hidden" name="srt" value="1"><input type="hidden" name="sra" value="1">
<input type="image" src="https://www.paypal.com/en_US/i/btn/btn_subscribe_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
</form> 
```

**出现在 PayPal 结帐页面上的文本（您无法更改）将显示：**

> 然后下周 1.00 美元
> 
> 每月 496.00 美元，分期付款

# javascript - window.location.url Javascript

> ID：10783322
> 
> 赞同：3
> 
> 时间：2012-05-28T10:45:31.893
> 
> 标签：javascript

我正在将当前 url 分成几部分，但我在这部分做错了获取当前 url。我该如何解决这个问题？

```
var url = window.location.url; 
```

我正在尝试从页面获取当前 url。这是我的功能

```
function split(){

    var url = window.location.url;     // This part is not correct
    var firstSplit = url.split('?')[1];

    var name = firstSplit.split('&')[0];
    var age = firstSplit.split('&')[1];

    var parName = name.split('=')[0];
    var nameName = name.split('=')[1];

    var parAge = age.split('=')[0];
    var ageAge = age.split('=')[1];

    document.getElementById("nameId").innerHTML=naamName;
    document.getElementById("ageId").innerHTML=leeftijdAge;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T10:46:31.343

使用`href`：

```
window.location.href 
```

例如，在当前 SO 页面上运行它会给出：

```
console.log(window.location.href); 
```

这个：

```
http://stackoverflow.com/questions/10783322/window-location-url-javascript 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T17:31:48.457

将以下脚本添加到页面；它将显示页面 url 的所有属性：

```
document.write("<li>location.href = " + location.href);
document.write("<li>location.protocol = " + location.protocol);
document.write("<li>location.host = " + location.host);
document.write("<li>location.hostname= " + location.hostname);
document.write("<li>location.port = " + location.port);
document.write("<li>location.pathname = " + location.pathname);
document.write("<li>location.hash = " + location.hash);
document.write("<li>location.search = " + location.search); 
```

在这里找到更好的答案：[https ://gist.github.com/jlong​​/2428561](https://gist.github.com/jlong/2428561)

```
var parser = document.createElement('a');
parser.href = "http://example.com:3000/pathname/?search=test#hash";

parser.protocol; // => "http:"
parser.host;     // => "example.com:3000"
parser.hostname; // => "example.com"
parser.port;     // => "3000"
parser.pathname; // => "/pathname/"
parser.hash;     // => "#hash"
parser.search;   // => "?search=test" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:50:16.180

您可以使用不同的属性直接访问 URL 的不同部分`window.location`。

完整的 URL 是`window.location.href`，但您似乎对可以访问的查询字符串（问号后面的部分）更感兴趣`window.location.search`

其他属性的列表可以在[MDN 文章`window.location`](https://developer.mozilla.org/en/DOM/window.location#Properties)中找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T16:24:28.813

我不确定你在将 URL 分成几部分后要做什么，但这里是你如何获取当前 URL 并将它们放入变量中的方法。您可以将它们重新组合在一起，但是您喜欢后者。来源：[http://css-tricks.com/snippets/javascript/get-url-and-url-parts-in-javascript/][1]

```
var urlNow = window.location.pathname.split('/');

var itNow0 = urlNow[0];
var itNow1 = urlNow[1];
var itNow2 = urlNow[2];
var itNow3 = urlNow[3];

alert(itNow0+ ' ' +itNow1+ ' ' +itNow2+ ' ' +itNow3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T11:01:10.247

尝试

```
var url = window.location.href; 
```

或者

```
var url = document.URL; 
```

我认为请使用不同的函数名称然后拆分，因为它是 PHP 的函数，可能是问题的原因。

谢谢

# json - 尝试访问该方法失败：System.Collections.Generic.List`1..ctor()

> ID：10783327
> 
> 赞同：1
> 
> 时间：2012-05-28T10:46:10.063
> 
> 标签：json, windows-phone-7, json.net

我有这段代码，通过它我从我的本地主机中检索 json 数据。但它给出了我标题中提到的错误。当我在调试时将鼠标悬停在响应上时。它显示了正确的响应。我正在使用 JSON.NET解析 json 响应。

```
var response = reader.ReadToEnd();

                   List<Company> cLst = JsonConvert.DeserializeObject<List<Company>>(response);    //Error

                    this.Dispatcher.BeginInvoke(() =>
                        {

                            foreach (Company c in cLst)
                            {
                                ListBoxItemControl Li = new ListBoxItemControl();
                                Li.CompanyNameTextBlock.Text = c.CompanyName;
                                Li.PromotionTextBlock.Text = c.PromotionText;
                                listBox1.Items.Add(Li);
                            }
                        }); 
```

这是公司类。

```
class Company
{
    public string CompanyName {get; set;}
    public string CompanySlogan { get; set; }
    public string CompanyDescription { get; set; }
    public string CompanyRating { get; set; }
    public string CompanyDpPath { get; set; }
    public string CompanyOtherInfo { get; set; }
    public string CompanyFollowers { get; set; }
    public int CompanyID { get; set; }

    public int PromotionID { get; set; }
    public string PromotionText { get; set; }
    public string PromotionRating { get; set; }
    public string PromotionPicPath { get; set; }
    public string PromotionTitle { get; set; }
    public int PromotionLikes { get; set; }
    public int PromotionComments { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:54:19.980

尝试公开公司课程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:54:46.593

上另一门课，例如，

```
 public class RootObject
 {
  public List<Company> companies;
 } 
```

然后像这样修改你的代码，

```
var jsonData = JsonConvert.DeserializeObject<RootObject>(response);
List<Company> cLst = jsonData.companies; 
```

试试这个，让我知道。

# facebook - Facebook 应用程序操作未出现在朋友对我的时间轴的视图中

> ID：10783330
> 
> 赞同：0
> 
> 时间：2012-05-28T10:46:18.147
> 
> 标签：facebook, facebook-graph-api

我遵循 Facebook 上的教程：[Facebook 应用程序教程](https://developers.facebook.com/docs/opengraph/tutorial/) 直到您发布操作（烹饪）食谱。

我还遵循了一个过时的教程，该教程类似于在此处找到的新 Facebook 教程：[Facebook App Tutorial 2](http://onlytipsandtricks.com/facebook/how-to-publish-actions-on-timeline/)。

当我查看我的个人资料时，这些操作确实出现在我自己的新闻代码和我自己的时间线上。但是，当我使用测试帐户登录以查看我自己的个人资料时，该应用程序的操作不会显示在测试帐户的时间线视图或测试帐户的新闻代码中。

我是我的测试帐户的朋友。我还确保隐私设置对于应用程序的操作是公开的。我想知道当其他人查看我的时间线和他们的新闻代码时，在应用程序的操作出现之前我缺少哪些步骤。我必须在 Open Graph 选项卡中提交操作吗？

沙盒模式被禁用。测试账号可以进入应用页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:58:09.090

您创建的测试用户是否列为应用程序`Tester`或`Developer`应用程序？如果您的操作未经 Facebook 批准，则只有在`Roles`您的应用设置选项卡中列出的用户才能发布并在时间线上查看操作。

# flickr - 使用 Flickr APA 注册新帐户

> ID：10783332
> 
> 赞同：0
> 
> 时间：2012-05-28T10:46:25.813
> 
> 标签：flickr

有人知道是否可以使用 Flickr 的 API 注册一个新帐户？我们希望使用我们的网站允许用户同时向我们和 Flickr 注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:12:38.130

[我在http://www.flickr.com/services/api/](http://www.flickr.com/services/api/)的方法列表中没有看到任何适用的内容。flickr.people.* 类别中的所有调用都是查找和获取。

# blackberry - 如何同时删除 BBM 代理应用程序和 BBM 连接应用程序

> ID：10783340
> 
> 赞同：1
> 
> 时间：2012-05-28T10:46:53.090
> 
> 标签：blackberry, bb-messenger

我的应用程序是 BBM 连接的应用程序。它有一个代理应用程序，可以根据 BBM 要求检查用户是否可以继续使用我们的应用程序。代理应用程序图标在 BB Os 中可见。我已经看到，当用户删除代理应用程序时，它不会删除我的 BBM 连接应用程序。当用户使用 BB 菜单删除代理应用程序时，我希望这两个应用程序都被删除。我确信有可能实现这一点，但我不知道如何。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:41:13.057

RIM 已经在 OS5 和 OS6 中确认了这种行为。不幸的是，这是一个操作系统问题，因此目前还没有解决方案。

# entity-framework - 对 EF 执行查询，但从结果中排除特定元素

> ID：10783342
> 
> 赞同：0
> 
> 时间：2012-05-28T10:46:59.510
> 
> 标签：entity-framework

假设我必须管理门和这些门的可用性。

这是我的模型：

```
public class Gate
{
    public int GateID { get; set; }
    public string GateName { get; set; }
}

public class GateNA  ---> NA: NotAvailable
{
    public int GateNAID { get; set; }
    public int GateID { get; set; }
    public DateTime Date { get; set; }
} 
```

现在假设我有以下示例数据：

**对于盖茨：**

GateID：1 GateName：“圣安东尼奥门”

GateID：2 GateName：“圣达菲门”

GateID：3 GateName：“Santa Maria Gate”

**这些门在特定日期不可用（>> GateNA 类）：**

GateIDNA：1 GateID：2 日期：2012/06/01

GateIDNA：2 GateID：1 日期：2012/08/08

我可以像这样检索所有以“Santa”开头的门：

```
var gateRepository = unitOfWork.Create<Gate>();
var gates = gateRepository.Find(m => m.GateName.Contains("Santa")); 
```

**我的问题是**如何检索以“Santa”开头且在 2012/06/01 和 2012/06/05 之间可用的所有大门。所以我们必须检查GateNA...

结果应该只有一个元素：GateID 3。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:09:32.020

`GateNA`最简单的解决方案是将用于集合的导航属性添加到您的`Gate`实体并在查询中使用它：

```
gateRepository.Find(m => m.GateName.Contains("Santa") && 
                         !m.GateNAs.Any(g => g.Date == selectedDate)); 
```

如果不添加该属性，则必须在 LINQ 查询中执行手动联接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:05:15.547

你为什么不像这样重组你的班级：

```
public class Gate
{
    public int GateID { get; set; }
    public string GateName { get; set; }
    public List<GateNA> NotAvailableDates { get; set; }
}

public class GateNA  ---> NA: NotAvailable
{
    public int GateNAID { get; set; }
    public int GateID { get; set; }
    public DateTime Date { get; set; }
} 
```

然后

```
var gates = gateRepository.Find(
    m => m.GateName.Contains("Santa") && 
   (m.NotAvailableDates.Find(
        d => d.Date==new DateTime(2012,06,01)
   )==null
); 
```

# php - 如何实现多用户cms？

> ID：10783343
> 
> 赞同：1
> 
> 时间：2012-05-28T10:47:06.117
> 
> 标签：php, symfony, content-management-system

我想实现一个多用户 CMS 网站，每个用户都可以在自己的记录上执行 CRUD 操作。这意味着应该在记录级别而不是模型级别实现安全性。

我想出了2个解决方案：

1.  每个模型中都有一个`owner_id`字段。
2.  每个用户都有一个用于他们修改的模型的数据库。为所有相关记录（例如用户数据（姓名、电子邮件、用户名、密码）、由管理员编辑的模型，但不是用户等）保留一个主数据库。

* * *

解决方案 2，我正在考虑在 Apache 的帮助下实施。例如，我将为user3 设置[http://user3_website.mydomain.com/](http://user3_website.mydomain.com/)，这将是与 www.mydomain.com 的主网站分开的网站。我将符号链接除`/web/uploads`and之外的所有目录`/config`：

*   `/config`- 我需要 user3 的数据库配置
*   `/web/uploads`- 我会用于他们的上传。

* * *

是否有使用 Symfony 实现这一点的最佳实践/设计模式？我从未开发过可以根据用户动态选择数据库的网站（解决方案 2），所以我想知道这是否有意义。

我有使用 Symfony 1.x 的经验，但还没有在 Symfony2 上进行任何开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:11:15.277

我会选择解决方案 1，为所有具有 owner_id 字段的实例创建一个数据库。这样更容易维护。在某些时候，您可能必须对数据库进行更改，并且必须在多个数据库上进行更改可能会成为一场噩梦，除非您以某种方式将其自动化。

除非您需要考虑一些严重的安全问题，否则在单独的数据库中执行此操作几乎没有任何优势。

# c# - 在 asp.net web 应用程序中缓存

> ID：10783348
> 
> 赞同：0
> 
> 时间：2012-05-28T10:47:30.970
> 
> 标签：c#, asp.net, caching

在我的网站上检索数据的速度非常慢，因为它同时加载了大约 10 个标签。所以，我想在其中实现缓存。但是，我不知道如何实现缓存？

**编辑：** 有些控件具有相同的数据。但是每当他们页面加载时，他们就会被调用。我希望他们缓存这些控件。当数据库中的数据发生更改或更改时，我们如何更新缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:52:41.840

如果通过选项卡，您指的是[选项卡式 Web 内容](http://www.smashingmagazine.com/2009/06/24/module-tabs-in-web-design-best-practices-and-solutions/)，您可能会发现使用 AJAX 加载选项卡上的内容很有用。

[**jQuery Tabs**](http://jqueryui.com/demos/tabs/)是一个很好的方法：

```
<div id="example">
     <ul>
         <li><a href="ahah_1.html"><span>Content 1</span></a></li>
         <li><a href="ahah_2.html"><span>Content 2</span></a></li>
         <li><a href="ahah_3.html"><span>Content 3</span></a></li>
     </ul>
</div>

$('#example').tabs(); 
```

这意味着仅加载第一个选项卡式内容，然后在单击/请求时加载其余内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:50:54.023

有几种选择：

1.  System.Runtime.Caching（文档： http: [//msdn.microsoft.com/de-de/library/system.runtime.caching.aspx](http://msdn.microsoft.com/de-de/library/system.runtime.caching.aspx)，示例：http: [//msdn.microsoft.com/de-de/library/ system.runtime.caching.memorycache.aspx](http://msdn.microsoft.com/de-de/library/system.runtime.caching.memorycache.aspx) )
2.  AppFabric 缓存（关于 AppFabric 缓存的文章：http: [//msdn.microsoft.com/de-de/magazine/ff714581.aspx#MtViewDropDownText](http://msdn.microsoft.com/de-de/magazine/ff714581.aspx#MtViewDropDownText)）
3.  企业库缓存应用程序块 ( [http://msdn.microsoft.com/en-us/library/ff649093.aspx](http://msdn.microsoft.com/en-us/library/ff649093.aspx) )

第一个包含在 .NET 框架中，第二个和第三个选项用于一些更具体的情况。

在考虑缓存时，请提醒自己，如果缓存变得太大，最终甚至会像直接访问数据一样慢。

# configuration - 我可以在应用程序之间复制我的 Open Graph 配置吗？

> ID：10783349
> 
> 赞同：3
> 
> 时间：2012-05-28T10:47:43.880
> 
> 标签：configuration, facebook-opengraph

有没有办法导出你打开的图表设置，或者在应用程序之间复制它们？

我们拥有在投入生产之前用于将代码部署到的域名。

```
http://dev-mysite.blah.com
http://int-mysite.blah.com
http://preprod-mysite.blah.com
http://mysite.blah.com 
```

我们为这些域名中的每一个都设置了 Facebook 应用程序。现在我需要将这些应用程序中的每一个都配置为具有 Open Graph 操作和对象。这似乎是一个很常见的场景，那么你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:37:48.557

不，目前您必须手动执行此操作。

但是，您可以将其合理化为两个应用程序 ID - 一个用于生产，另一个用于所有 pre-prod 和 dev 环境。这应该减少工作。

# solr - Lucene / Solr 是否支持上位词和下位词？

> ID：10783351
> 
> 赞同：2
> 
> 时间：2012-05-28T10:48:05.193
> 
> 标签：solr, lucene, nlp

例如，房屋是建筑物，因此在搜索“建筑物”时，Lucene 也会返回与“房屋”匹配的内容。这与同义词不同，搜索“house”不应匹配“building”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T06:48:14.687

您可以简单地构建上位词的字典/哈希表并编写一个支持上位词的查询扩展模块。简单地说（1）当用户在搜索框中输入“建筑”时（2）将您的查询发送到您的哈希表（3）检索建筑的上位词（4）扩展您的查询，例如 q=Building+House +公寓+别墅。

# dynamic-linq - 动态 LINQ 发生了什么？

> ID：10783357
> 
> 赞同：2
> 
> 时间：2012-05-28T10:48:27.867
> 
> 标签：dynamic-linq

我需要使用动态 LINQ，我可以在其中使用变量代替字段名称。现在我做了一些谷歌搜索，发现有一个 VS2008 的示例，我们可以在其中获得此功能。我的问题是这个 LINQ 发生了什么？已经 4 年了，我想知道它是否已经成为适当的框架，或者已经发明了一些其他新的解决方案来代替它？我现在只对 LINQ 感兴趣，所以很难在谷歌上找到更多信息，除了不知道我在寻找什么，除了“更好的 LINQ 化身”。任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T15:14:48.937

我复活了 Dynamic LINQ，添加了对 .NET 4.0/4.5 的支持，添加了支持文档（正在进行中），并添加了许多新功能。

这是文档页面的[链接](http://dynamiclinq.azurewebsites.net/)，您可以从那里找到[NuGet 包](https://www.nuget.org/packages/System.Linq.Dynamic.Library/)和[GitHub 项目](https://github.com/NArnott/System.Linq.Dynamic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T16:52:22.860

这从来不是 LINQ 的“官方”部分，因此从未包含在框架中。

源代码是免费提供的，它的版本已经出现在[CodePlex](http://dynamiclinq.codeplex.com/)和[GitHub 上](http://dynamiclinq.codeplex.com/)

GitHub 源似乎是 Nuget 包的来源

# jquery - 验证数组文件输入

> ID：10783358
> 
> 赞同：1
> 
> 时间：2012-05-28T10:48:36.333
> 
> 标签：jquery, html, jquery-validate

如何`input`使用`jquery.validate`插件验证文件数组？

该代码适用于单个文件，但不适用于多个上传，其中`name=""`是一个数组。

**问：**

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#Main").validate({
            rules: {
                pic: { required:true, accept: "jpg|jpeg" }
            }}
        );
    });
</script> 
```

**单次上传：**

```
<html>
    <head>
    </head>
    <body>
        ...
        <td>Fotografija 1:</td>
        <td> <input type="file" class="fup" name="pic" /> </td>
        ...
    </body>
</html> 
```

**多次上传**

```
<html>
    <head>
    </head>
    <body>
        ...
            <td>Fotografija 1:</td>
            <td> <input type="file" class="fup" name="pic[]" /> </td>
        </tr>
        <tr>
            <td>Fotografija 2:</td>
            <td> <input type="file" class="fup" name="pic[]" /> </td>
        </tr>
        <tr>
            <td>Fotografija 3:</td>
            <td> <input type="file" class="fup" name="pic[]" /> </td>
        ...
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:57:22.500

你可以试试这个：

```
 $("input.fup").each(function(){
       $(this).rules("add", {
           required:true, 
           accept: "jpg|jpeg"
       });                    
 }); 
```

详情请看**[这里](https://stackoverflow.com/questions/931687/using-jquery-validate-plugin-to-validate-multiple-form-fields-with-identical-nam/4136430#4136430)**

**[这](https://stackoverflow.com/questions/3227410/how-to-validate-multiple-input-type-files-with-jquery-validator-plugin)**是另一个资源。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-09-16T11:22:54.780

这里有问题

```
"pic[]" {your rules} 
```

和

```
rules("add) 
```

仅适用于数组中的第一个元素。

===

好的，我找到了解决方案：你应该修复`jquery.validate.js`

查找`checkForm`功能

并将其替换为：

```
 checkForm: function() {
        this.prepareForm();
        for ( var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++ ) {
            if (this.findByName( elements[i].name ).length != undefined && this.findByName( elements[i].name ).length > 1) {
                for (var cnt = 0; cnt < this.findByName( elements[i].name ).length; cnt++) {
                    this.check( this.findByName( elements[i].name )[cnt] );
                }
            } else {
                this.check( elements[i] );
            }
        }
        return this.valid();
    }, 
```

# magento - Magento getPagerHtml() ?> 不工作

> ID：10783360
> 
> 赞同：0
> 
> 时间：2012-05-28T10:48:43.473
> 
> 标签：magento, pagination

我正在使用 magento 1.6 版本。分页不适用于我的`list.phtml`. 我`<?php echo $this->getPagerHtml() ?>`在`toolbar.phtml`.

我需要对我的类别视图进行分页。

是否有任何选项可以从 magento 管理员禁用分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:58:50.950

以防万一这有助于我以某种方式通过这个问题找到解决方案 - 当我从 1.5 升级时，寻呼机无法正常工作。为了使`getPagerHtml()`代码正常工作，我需要更新`catalog.xml`文件。我在`page/html_pager`块内添加了`catalog/product_list_toolbar`块，如下所示：

```
<block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
    <block type="page/html_pager" name="product_list_toolbar_pager"/>
</block> 
```

# c# - 是什么减慢了简单的集合转换

> ID：10783362
> 
> 赞同：2
> 
> 时间：2012-05-28T10:48:49.720
> 
> 标签：c#, arrays, collections, foreach, ienumerable

我有一个简单的while循环

```
IEnumerable<Foo> collection;
while (!bc.IsCompleted)
{
   collection = bc.Take();
} 
```

bc 是一个`BlockingCollection<IEnumerable<Foo>>`。bc 包含 9 个 IEnumerable 集合和总共 260 万个 Foo 对象。循环在我的机器上运行大约需要 640 毫秒。一旦我在 while 循环中的 Take() 之后添加一个 foreach 循环，运行时间就会爆炸到 2400 毫秒。

```
foreach(Foo foo in collection)
{
} 
```

在我单独设置的 List 或 Foo[] 或 IEnumerable 中迭代超过 260 万个元素大约需要 54 毫秒。

如果我只是添加一个集合转换而不是 foreach 循环，则会发生同样的情况，例如

```
List<Foo> fooList = collection.ToList(); 
```

或者

```
Foo[] fooArray = collection.ToArray(); 
```

它突然也需要超过 2000 毫秒才能执行。

怎么会这样？我完全没有解释或可能的原因。谁能指出我在这里缺少的东西？速度变慢不能由锁定/阻塞引起，因为我没有更改在比较之间访问 BlockingCollection 的方式。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:04:35.783

你要加入什么样`IEnumerable`的队列？

请记住，LINQ 查询使用延迟执行；您的代码最终可能会评估消费者线程上的查询。`ToList()`在将元素放入队列之前尝试调用生产者线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:05:21.317

一个`IEnumerable`可以代表一个延迟操作。有时（例如，使用 LINQ 或迭代器块）在迭代之前不会实际生成可枚举的内容。

因此，您`IEnumerable<Foo>`可能包含足够的信息来生成s，但实际上直到您在 a或 using`Foo`中迭代可枚举时才会这样做。这就是为什么这些操作需要很长时间。`foreach``ToList`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T11:06:04.480

与其他 LINQ 方法一样（我猜你正在使用 LINQ 的方法），此方法适用于延迟执行：

> 该方法是通过使用延迟执行来实现的。立即返回值是一个存储执行操作所需的所有信息的对象。直到通过直接调用其 GetEnumerator 方法或使用 Visual C# 中的 foreach 或 Visual Basic 中的 For Each 枚举对象后，才会执行此方法表示的查询

这意味着如果您不添加 foreach 循环的 ToList() 调用，则对 Take 的唯一调用不会真正产生任何结果，并且只有在使用迭代器（foreach/tolist）时才会产生实际结果，因此性能差异。

您与仅迭代列表的比较可能无法提供准确的结果；它不是对 List(foo) 的迭代需要时间，它可能是从您正在使用的阻塞集合中选择元素，这会减慢一切。
[MSDN](http://msdn.microsoft.com/en-us/library/dd460684.aspx)声称在 BlockingCollection 上使用常规 foreach（这可能是当您使用 LINQ 提供的 Take 时发生的情况，在这种情况下适用于 IEunmerable）使用底层集合的快照，这肯定会减慢对大型集合的处理.

# javascript - 仅返回 Google 地图地理编码结果的一部分的英国邮政编码

> ID：10783364
> 
> 赞同：0
> 
> 时间：2012-05-28T10:49:00.123
> 
> 标签：javascript, google-maps-api-3

我有来自 Google Maps API V3 示例的以下代码行：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-reverse](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-reverse)

```
var full_address = results[1].formatted_address; 
```

我想做的是从此地址字符串中获取邮政编码部分。我该怎么做？

有没有我错过的方法，或者是否有某种字符串表达式可以为我剪掉那部分？

谢谢，

一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:15:48.830

邮政编码作为[地址的](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingAddressTypes)一部分返回。以下是您如何在结果中查找它的示例：

```
new google.maps.Geocoder().geocode({
        'address': '20 Broadwick Street, London',
        'latLng': google.maps.LatLng(51.5136905, -0.1354)
    },
    function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            address = results[0].address_components;
            for (p = address.length-1; p >= 0; p--) {
                if (address[p].types.indexOf("postal_code") != -1) {
                    console.log(address[p].long_name);
                }
            }
        }
    }
); 
```

希望有帮助。

# android - 查找来电者 Android 手机信息

> ID：10783365
> 
> 赞同：2
> 
> 时间：2012-05-28T10:49:02.230
> 
> 标签：android, telephony, gsm, 3g, imei

我正在使用 3g GSM 网络。

我需要知道是否可以通过编程方式从我的安卓手机中找到调用安卓手机的 IMEI 号码、位置信息等。

有两种情况： 在我打电话的时候，我需要被叫方的IMEI。此外，当我接到电话时，我需要来电者的 IMEI。

在这里，所有各方都在他们的手机中运行 android。

另请注意，这些安卓手机不能使用互联网连接来传输数据[在这种情况下，这个问题无关紧要]

感谢您提供任何线索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:52:36.820

> 我需要知道是否可以通过编程方式从我的安卓手机中找到调用安卓手机的 IMEI 号码、位置信息等。

幸运的是，这是不可能的，出于明显的隐私和安全原因（除了可能在技术上是不可能的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:43:05.167

使这成为可能的唯一方法是涉及移动网络或远程设备。远程用户 IMEI 或位置等信息只能从远程设备或网络中检索。

由于您排除了 Internet 连接，因此对这些信息进行带外查询似乎不太可行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T13:54:36.493

```
private String getIMEI(){
     TelephonyManager manager = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
     return manager.getDeviceId();
 } 
```

# jakarta-ee - 如何生成 PEM 格式的 PKCS#1 RSA 密钥？

> ID：10783366
> 
> 赞同：11
> 
> 时间：2012-05-28T10:49:04.023
> 
> 标签：jakarta-ee, openssl, key-generator, pkcs#1

对不起我的英语，老实说我对此知之甚少，所以请多多包涵。

我正在开发一个向服务器发送签名请求的 java 应用程序。为此，我必须生成格式为*PKCS#1 RSA*密钥对以`PEM`进行签名和验证。我试过使用*OpenSSL v.1.0.1*。但生成的公钥是`X.509 PEM`.

这是我用来生成密钥的 openssl 命令：

**私钥**：

```
openssl genrsa -out name_of_private_key.pem 1024 
```

**公钥**

```
openssl rsa -in name_of_private_key.pem -pub out > name_of_public_key.pem 
```

我也浏览了这个线程，我发现了一个开源 JAVA 库 BouncyCastle：[Generating RSA keys in PKCS#1 format in Java](https://stackoverflow.com/questions/7611383/generating-rsa-keys-in-pkcs1-format-in-java?answertab=oldest#tab-top)

但它说 BouncyCastle 仅用于 PKCS#1*填充*而不是*编码*。

最好，如果没有其他选项可用，我正在寻找使用 JAVA 或任何第三方生成它的方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-11-28T00:00:22.383

**默认情况下， OpenSSL 1.1.1**使用**PKCS#1**标准生成**私钥并以****PEM**格式编码，如下所示

 ****```
-----BEGIN RSA PRIVATE KEY----- 
...
-----END RSA PRIVATE KEY----- 
```

您可以将**PEM/PKCS#1**密钥转换为**PEM/PKCS#8**密钥，如下所示

```
-----BEGIN PRIVATE KEY-----
...
-----END PRIVATE KEY----- 
```

**OPENSSL**始终使用**X.509**标准导出**公钥并以****PEM**格式编码， 如下所示

 ****```
-----BEGIN PUBLIC KEY-----
...
-----END PUBLIC KEY----- 
```

我使用这些脚本来生成 RSA 密钥对。

**Powershell - CreateKeyPair.ps1**

```
Set-Alias openssl "C:\Program Files\OpenSSL-Win64-1-1-1\bin\openssl.exe"

openssl version

Write-Host "=== GENERATE PRIVATE KEY --- Format: PKCS#1 --- File: private.txt==="
openssl genrsa -f4 -out private.txt 4096 

Write-Host "=== GENERATE PRIVATE KEY --- Format: PKCS#8 --- File: private8.txt==="
openssl pkcs8 -topk8 -inform pem -in private.txt -outform PEM -nocrypt -out private8.txt

Write-Host "=== GENERATE PUBLIC KEY --- Format: X.509 --- File: public.txt==="
openssl rsa -in private.txt -outform PEM -pubout -out public.txt 
```

[![PowerShell - OpenSSL 1.1.1](../Images/2c9a00f447c91f695624260e85ccf304.png)](https://i.stack.imgur.com/jTKgG.png)

**CMD - CreateKeyPair.bat**

```
@ECHO OFF
set openssl="C:\Program Files\OpenSSL-Win64-1-1-1\bin\openssl.exe"

%openssl% version

ECHO "=== GENERATE PRIVATE KEY --- Format: PKCS#1 --- File: private.txt==="
%openssl% genrsa -f4 -out private.txt 4096 

ECHO "=== GENERATE PRIVATE KEY --- Format: PKCS#8 --- File: private8.txt==="
%openssl% pkcs8 -topk8 -inform pem -in private.txt -outform PEM -nocrypt -out private8.txt

ECHO "=== GENERATE PUBLIC KEY --- Format: X.509 --- File: public.txt==="
%openssl% rsa -in private.txt -outform PEM -pubout -out public.txt 
```

[![cmd - OpenSSL 1.1.1](../Images/fb845846cd924f492085050efa7188dc.png)](https://i.stack.imgur.com/U7xAx.png)

# ███████████████████</h1>

在**OpenSSL3.0**中，命令[genrsa](https://www.openssl.org/docs/man3.0/man1/openssl-genrsa.html)已被弃用，我们需要使用[genpkey](https://www.openssl.org/docs/man3.0/man1/openssl-genpkey.html)代替它。 **OpenSSL 3.0**默认使用**PKCS#8标准生成****私钥并以****PEM**格式编码

 ****我使用这些脚本来生成 RSA 密钥对。

**Powershell - CreateKeysOpenSSL3.0.ps1**

```
Set-Alias openssl "C:\Program Files\OpenSSL-Win64\bin\openssl.exe"

openssl version

Write-Host "=== GENERATE PRIVATE KEY --- Format: PEM/PKCS#8 --- File: private.txt==="
openssl genpkey -out private.txt -outform PEM -algorithm RSA -pkeyopt rsa_keygen_bits:4096

Write-Host "=== GENERATE PUBLIC KEY --- Format: PEM/X.509 --- File: public.txt==="
openssl pkey -inform PEM -outform PEM -in private.txt -pubout -out public.txt 
```

[![PowerShell - OpenSSL3.0](../Images/a50ee40b5bd3cf269e2eb4dd09c13d5b.png)](https://i.stack.imgur.com/0FrhX.png)

**CMD- CreateKeysOpenSSL3.0.bat**

```
@ECHO OFF
set openssl="C:\Program Files\OpenSSL-Win64\bin\openssl.exe"

%openssl% version

ECHO "=== GENERATE PRIVATE KEY --- Format: PEM/PKCS#8 --- File: private.txt==="
%openssl% genpkey -out private.txt -outform PEM -algorithm RSA -pkeyopt rsa_keygen_bits:4096

ECHO "=== GENERATE PUBLIC KEY --- Format: PEM/X.509 --- File: public.txt==="
%openssl% pkey -inform PEM -outform PEM -in private.txt -pubout -out public.txt 
```

[![CMD - OpenSSL3.0](../Images/ba1423dae5f77eee8c4c4d0f2d3a0422.png)](https://i.stack.imgur.com/xSqwy.png)

# ███████████████████</h1>

**从 Java 生成 - Private PEM/PKCS#8 和 Public PEM/X.509**
您可以在[https://replit.com/@JomaCorpFX/JavaPemRsaKeyPair#Main.java中](https://replit.com/@JomaCorpFX/JavaPemRsaKeyPair#Main.java)**测试/运行**此**代码**

```
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.SecureRandom;
import java.util.Base64;

public class Main {

    private static final String RsaPemPrivateKeyInitialString = "-----BEGIN PRIVATE KEY-----";
    private static final String RsaPemPrivateKeyFinalString = "-----END PRIVATE KEY-----";
    private static final String RsaPemPublicKeyInitialString = "-----BEGIN PUBLIC KEY-----";
    private static final String RsaPemPublicKeyFinalString = "-----END PUBLIC KEY-----";
    private static final int PEM_LINE_LEN = 64;

    public static String InsertLineBreaks(String data, int lineBreaksLength)
    {
        StringBuilder sb = new StringBuilder();
        int Segments = data.length() / lineBreaksLength;
        if (Segments < 0)
        {
            return data;
        }
        else
        {
            for (int i = 0; i < Segments; i++)
            {
                sb.append(data.substring(i * lineBreaksLength, i*lineBreaksLength + lineBreaksLength));
                sb.append(System.lineSeparator());
            }
            if (Segments * lineBreaksLength < data.length())
            {
                sb.append(data.substring(Segments * lineBreaksLength));
                sb.append(System.lineSeparator());
            }
            return sb.toString().trim();

        }
    }

    public static RsaKeyPair createKeyPair(int keySize) throws Exception {
        RsaKeyPair result = new RsaKeyPair();
        KeyPairGenerator MyKeyPairGenerator = KeyPairGenerator.getInstance("RSA");
        MyKeyPairGenerator.initialize(keySize, new SecureRandom());
        KeyPair MyKeyPair = MyKeyPairGenerator.generateKeyPair();

        result.setPublicKey(RsaPemPublicKeyInitialString + System.lineSeparator() + InsertLineBreaks(Base64.getEncoder().encodeToString(MyKeyPair.getPublic().getEncoded()), PEM_LINE_LEN)  + System.lineSeparator() + RsaPemPublicKeyFinalString);
        result.setPrivateKey(RsaPemPrivateKeyInitialString + System.lineSeparator() + InsertLineBreaks(Base64.getEncoder().encodeToString(MyKeyPair.getPrivate().getEncoded()),PEM_LINE_LEN) + System.lineSeparator() + RsaPemPrivateKeyFinalString);
        return result;
    }

    public static void main(String[] args) throws Exception {
        RsaKeyPair keyPair = createKeyPair(4096);
        System.out.println(keyPair.toString());

    }

    public static class RsaKeyPair
    {

        private String PublicKey;
        private String PrivateKey;

        public RsaKeyPair()
        {
        }

        public RsaKeyPair(String PublicStringKey, String PrivateStringKey)
        {
            this.PublicKey = PublicStringKey;
            this.PrivateKey = PrivateStringKey;
        }

        public String getPublicKey()
        {
            return PublicKey;
        }

        public void setPublicKey(String PublicStringKey)
        {
            this.PublicKey = PublicStringKey;
        }

        public String getPrivateKey()
        {
            return PrivateKey;
        }

        public void setPrivateKey(String PrivateStringKey)
        {
            this.PrivateKey = PrivateStringKey;
        }

        @Override
        public String toString()
        {
            return String.format("Public\n%s\nPrivate\n%s", PublicKey, PrivateKey);
        }
    }
} 
```

**输出**

```
Public
-----BEGIN PUBLIC KEY-----
MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAz/hDwUW560ADH74ejSUh
CVfdkJyLX9MlqkIanMgsRnVGqzc2Mz9flpsphOJvDVsWJ2IMkDgZAKZ0foqKve+4
UuOLDjEIogIsNCU0w5Bkqct4YMsR24kGem6zm/40IG+yFtRWEb7DEzrYt6bJ6S24
KvWxFN0YmIAg1QLVYinB3qtXdbyzGBtn/rY+0Dir/C2nibuafcitmmOgY4rocXIr
BZlui+zUyoml8r8LcWScpwWcx35gqaxw7E5ayUOdGDViPJyFg0Hs5p6RtttWCA2W
YILVf/4NRJj5gp293PQECeHlBOSqBzJDIZfF7aWi3/qdClMxKL5RSFCqLaYeIh5p
Fl+L5y4lHWnsNipppaqZlTw+wHrl3eVSCmMlQXC9yRMedzIqejXWDl1QN+FSpcaQ
8pfyfhPzbT8v+DICff9K2IjQcA/4eew0qNcdd0FKYaFoViQ7nT91kS9E+vTf5v16
/KQlNX0ywNIHPcku7VMZ5a5/9oEJPGcL8hFExHIEtWwcJ+zcrk5srNEBp4xgWaKv
nIUfhJJfqZ3huCT0eRxbdq9yQ0qdRo0Rc1w/LnKs9OKH6D8WMyJs5qQwuk+vIjSx
MZWjVIt6r11vrE9ySwO/V4IjrQnb/KjflzkOqIhEbEjpnnwqreSxvwKhRvvBauFw
EEuL16QpSo54H5JDLgh4dyMCAwEAAQ==
-----END PUBLIC KEY-----
Private
-----BEGIN PRIVATE KEY-----
MIIJQQIBADANBgkqhkiG9w0BAQEFAASCCSswggknAgEAAoICAQDP+EPBRbnrQAMf
vh6NJSEJV92QnItf0yWqQhqcyCxGdUarNzYzP1+WmymE4m8NWxYnYgyQOBkApnR+
ioq977hS44sOMQiiAiw0JTTDkGSpy3hgyxHbiQZ6brOb/jQgb7IW1FYRvsMTOti3
psnpLbgq9bEU3RiYgCDVAtViKcHeq1d1vLMYG2f+tj7QOKv8LaeJu5p9yK2aY6Bj
iuhxcisFmW6L7NTKiaXyvwtxZJynBZzHfmCprHDsTlrJQ50YNWI8nIWDQezmnpG2
21YIDZZggtV//g1EmPmCnb3c9AQJ4eUE5KoHMkMhl8XtpaLf+p0KUzEovlFIUKot
ph4iHmkWX4vnLiUdaew2KmmlqpmVPD7AeuXd5VIKYyVBcL3JEx53Mip6NdYOXVA3
4VKlxpDyl/J+E/NtPy/4MgJ9/0rYiNBwD/h57DSo1x13QUphoWhWJDudP3WRL0T6
9N/m/Xr8pCU1fTLA0gc9yS7tUxnlrn/2gQk8ZwvyEUTEcgS1bBwn7NyuTmys0QGn
jGBZoq+chR+Ekl+pneG4JPR5HFt2r3JDSp1GjRFzXD8ucqz04ofoPxYzImzmpDC6
T68iNLExlaNUi3qvXW+sT3JLA79XgiOtCdv8qN+XOQ6oiERsSOmefCqt5LG/AqFG
+8Fq4XAQS4vXpClKjngfkkMuCHh3IwIDAQABAoICAE2/3ezCmYgmjURvulJAQEKS
88VdkQmJEbq+Ld7RQyQwMfROlte/6IeQiIwibywKEpU0pcfBAS/qCwFH4Ci0Fy/9
2325vSV8NHRmOHyoXcnQxLdDE/EEIETjYAiAl5JMz8KTLX5C2AE3bc/y7edb7U86
PTK0mb5hoGSiQ44IWG9blT3yBu6LSGzES2Vi2oFTvB/U4CQIQ0bF2i98vfuzl/vm
6ZosNz1lCoJfA/Mnjx0uDvfR+mdUjX76qBw4R+HGC2zng06X9e4d+BHpnBc0pTR9
lT3dh65OlnFLcbDKFTxwlEMpDZvVIZ3MdPWsh+C+e7lhcq5twEuNxKF+SiOtRNGo
7c29wSpLy7dpMseSP0aXluz0IukMJFad66k1W8vQMid9VOOz1qShfX1XE99n9ITm
5sLzqNDNt5MtqyHqKFkbPgmLee1vRvvuymTmDyD7q2byi4D7siKAGdl9Me+4mQ8o
GC6nfi1wJnw8M7EwTOCQwviwG6+fyoCDGtwWVFt+PBuM1BMb5TMbqZpw4IKxoldw
bi/xX2HVNwN381YATcDZz7cBlOiL7nwNjdFJGjCUqOkA8MBcO/l0D81hUQz6ZKiM
xZVIm7mcSY2Ik1WeeBfLt9e6BQNZhqhXg0o6HxSSpCC/rPyLWASANV3X86WWQk4D
kOJk2tIBpgwIAsA6NGhZAoIBAQDnvEP+YLSMSkKLAIvDsLB/DPVVSz5DfQmBT5S+
0VncJxSSnUkE65SxVwJeRoHTTUcXB8i3eB1i2eZrdQW661jrEbfhqmO8w5CvNRRt
wKos/iRmuCtuK1l/JYRpiiTFTJaM/5B0Y7yJjunJVZ0d21bxKEwv99rAEHRjgMrs
OBisU18LXFKfQJBz0UfzAFsjfSBLIDxq7x5by65DELybi2jE+kpEwHOMGqP8ccaJ
s9DAJ6wDUJOl+wmsij25f5w3uyYWc/BXjIn8fIguqcSlKWBtec1c2d7KgnBGh2a0
pHKPOYwjPJNxI+NWE6dWqz6X7p7pkv1iTWjjewwXW8zGVl41AoIBAQDlvvRdszX1
95il5akpbUSVxEbOC+pRX8idL00Jzmn4OR7RSF3/UCKCMD5LD9WLzbUPQs/qxcN1
OdaqY/j1eShKnWQLNBIZCSO23zR7dNRbiGUFt/wfeabjtCkkE/Rd7yVUJGS6Gfmx
/aMefshwh11PsJE9Q5Q/5/WcgtYe+GzIu4G/br4WzD7LHwca9VxVdHI6y5FshaXd
R7GE86Zl1k0M9BJ2R4tewqwEE2xfVwOmu6nkghnuz6cSyFXaRjxHhpnqovuxxcVA
fAIzRKbTIcjxHxIMuu1EShhpYm2/ghs0ljfGseV+olluMphj50Y2AoAl2ie3EYv2
yCWmRy4iT4r3AoIBABX7pROXhukcDk3zYk7RDx0uVIOf3Ks4TFOJAhpL79NTnb7+
zrN5yaQ9FcttstkhppHHukG1UkxTUWl2M3H06315M9FjgYyhnLMSPPrgYQRdo4Rf
CjesQxQtse71HOHejxWXFNQFthfyh7kCtyHi8c90vC18vLKlnPTnfdiExcprKkQA
oRHcZRenjcS+jubB8vNNfo3CW0Xn/4L7Lnku82RkPfFhtFRhHpdPD792YGIqIUY7
OZZwRw2oG4ziTyZ2SXmty+nyOhDKm3yZvD7SuwQHnvSk8l6RmycFpzeRthBiLCoX
kAEWn3VF7gTpv8lX6JlNyV2u7DlQLeh1W+qgvNUCggEAPF6qDbkas9Bk3yrzAXzB
6ezSgjAlWU6nA467WplPxTcVPv8aHA2tk7IjnEvD3GGocyMmSVXAH5ycKNfuQmqc
yMaE1GDRZJy/Mr2CJ/KyHn8/tHn9GTQ5Q1pC+UT5EHnXwD1z7mcG8ttoMoo0F0Wq
olcOQx/v478LDh5fL3It+60x0eDCuHDhCzTTBCV3JslbftGhG/gedn/xSLNRhS8D
viSgeU4hdDwJQWTtNDxELFrhsLbzI4qTJ19XF+0ex9i5tysuoi8KvwAW/+vJPm+B
QsLcVlYEJM6njYGcvxbsGSxj6aUzXcxBXbCT1KSgEW8kx02E5BkLQ0SiiAfqOn/W
TwKCAQByUhkTAHv6lUeqfoOdViHyCi3tixdn4xwoSZmZABly2RPC/9roS20oxTs0
QUffdcHUFds1GqVvWcJWJ2nX8vOr3p/hluFfiznB++rIwm/HzWdKE5IaJK6EBGqA
YPHTOgAXcV40+HX/cBP5cQCP0jY+0OP4g+yqG1RzEsqG8uHTWG65hFUwSnP3nw9U
DTsPmcuIAbGIW17/LpOYSSSB/4d/IfMTEPIEa6PjfAZiTsyFBMPUIHaREHIuGp4L
CXRKknNFLhg+1JQQ98Oz0gRTNXUm4IEzx5hSZW7Md5ILmPfmdI4FrZrTZ34HmT+L
z3YIPsJ7PD4BGnEaBg0eMq72qTrD
-----END PRIVATE KEY----- 
```

[![输出](../Images/458e76463d3c930c09ce94de6dabc2f0.png)](https://i.stack.imgur.com/PX65i.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T14:11:08.983

虽然 OpenSSL 库支持 PKCS#1 编码，但 OpenSSL 的命令行版本只会输出 x.509 格式的 RSA 公钥。不幸的是，您似乎别无选择，只能编写一些使用 OpenSSL 库以 PKCS#1 格式输出密钥的代码。

作为参考，PKCS#1 密钥使用以下页眉/页脚：

```
-----BEGIN RSA PUBLIC KEY----- 
...
-----END RSA PUBLIC KEY----- 
```

而 x.509 键使用这些页眉/页脚：

```
-----BEGIN PUBLIC KEY-----
...
-----END PUBLIC KEY----- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-18T18:37:13.840

您可以强制 OpenSSH 生成旧 PEM/PKCS#1 格式的密钥：
`ssh-keygen -t rsa -b 4096 -o -a 100 -f id_rsa -m PEM < /dev/null`************

# php - 创建用于从直接链接显示 jpg 的模板页面

> ID：10783370
> 
> 赞同：-2
> 
> 时间：2012-05-28T10:49:18.927
> 
> 标签：php, css, templates, jpeg

当我单击 jpg 图像的链接时，浏览器通常会打开一个新选项卡，并将其显示在白色背景上。我想使用一个生成的 php 页面，它会显示图像，所以我可以在上面使用 css。我可以将每张图片放在一个 php 网站上，然后简单地链接到该网站，但我希望它自动发生，一旦点击任何图片链接。

```
<a href="http://www.website.com/images/image.jpg">Link</a> 
```

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:03:14.220

更改链接`<a href="http://example.com/showimage.php?image=images/image.jpg">Link</a>`或类似链接，创建一个具有您想要的格式的 showimage.php 页面，并使用它`$_GET[ 'image' ]`来获取请求的图像的 url。

# linux - 通过 sysfs 将 GPIOS 限制为仅输出或仅输入

> ID：10783383
> 
> 赞同：0
> 
> 时间：2012-05-28T10:50:11.583
> 
> 标签：linux, gpio, sysfs

我正在使用 Ubuntu 11.10。我为内核中没有自己的驱动程序的 GPIO 芯片编写了一个驱动程序。

我想限制用户将仅输出引脚设置为输入，反之亦然，在使用 /sys/class/gpio 时。这是因为我板上的许多 GPIO 仅是输入或仅输出。

我可以从函数 gpio_direction_in()、gpio_direction_out() 和 gpio_request() 中扫描受限的 GPIO 编号，但我认为这有点绕路。

有没有专门为此目的的功能？我查看了 GPIO 的文档，但什么也没看到。

*   安德鲁

# php - 检查字符串是否以

> ID：10783384
> 
> 赞同：0
> 
> 时间：2012-05-28T10:50:14.663
> 
> 标签：php, string

在 PHP 中，我有一个国家电话代码列表。例如：美国 1，埃及 20 ....
我需要检查给定的字符串是否以`00[ANY NUMBER FROM THE LIST]`.
我怎样才能做到这一点并返回国家代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T11:18:49.647

```
$codes = array(1 => 'US', 20 => 'Egypt');
$phone = '002087458454';

foreach ($codes as $code => $country) {
  if (strpos($phone, "00$code") === 0)
    break;
}

echo $code;    // 20
echo $country; // Egypt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:56:05.153

参考[PHP - 从以某个字符串开头的数组中获取所有键](https://stackoverflow.com/questions/4979238/php-get-all-keys-from-a-array-that-start-with-a-certain-string)

```
foreach ($array as $key => $value) {
    if (substr($value, 0, 2) == "00") {
        echo "$key\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T11:05:42.450

使用正则表达式：

```
$str ="0041";

if(preg_match('#00[0-9]+#', $str, $array)){
    echo substr($array[0], 2);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T10:54:43.890

使用[substr](http://php.net/manual/en/function.substr.php)函数：

```
$country_code = substr($string, 0, 2); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-28T10:54:09.147

使用[explode函数](http://php.net/manual/pt_BR/function.explode.php)分隔数组中的字符串，您可以使用`$string`.

# asp.net-mvc-3 - 如何为电子邮件地址创建不得匹配属性

> ID：10783390
> 
> 赞同：2
> 
> 时间：2012-05-28T10:50:43.560
> 
> 标签：asp.net-mvc-3, c#-4.0, data-annotations

我正在使用数据注释来验证我的属性，以下是我页面的属性

```
public string YourEmail{get;set;}
public string AnotherEmail{get;set;} 
```

我的要求是两个电子邮件 ID 不应该相同

请建议我应该从数据注释中使用什么来解决这个问题

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:04:38.747

您必须在模型中实现 IValidatableObject 接口并在模型中添加方法 Validate。

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
      List<ValidationResult> validationResults = new List<ValidationResult>();

      if (string.Equals(this.Email1,this.Email2,StringComparison.OrdinalIgnoreCase))
      {
          validationResults.Add(new ValidationResult(ErrorMessage.EmailError, new string[] { "Email ID" }));
      }

      return validationResults;
} 
```

或者您可以根据您的要求创建自定义数据注释。请参考以下网址。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute%28v=vs.95%29.aspx)

# c++ - 是否可以移动 boost::optional ？

> ID：10783391
> 
> 赞同：25
> 
> 时间：2012-05-28T10:50:45.330
> 
> 标签：c++, boost, c++11, move-semantics, boost-optional

我一直在尝试在具有`boost::optional`成员变量的类中定义默认的移动构造函数。

```
#include <boost/optional.hpp>
#include <utility>
#include <vector>

struct bar {std::vector<int> vec;};

struct foo {
  foo() = default;
  foo(foo&&) = default;
  boost::optional<bar> hello;
};

int main() {
  foo a;
  foo b(std::move(a));
} 
```

我的编译器同时支持移动语义和默认的移动构造函数，但我无法让它工作。

> ```
> % clang++ foo.cc -std=c++11 -stdlib=libc++
> foo.cc:15:7: error: call to deleted constructor of 'foo'
>   foo b(std::move(a));
>       ^ ~~~~~~~~~~~~
> foo.cc:9:3: note: function has been explicitly marked deleted here
>   foo(foo&&) = default;
>   ^
> 1 error generated. 
> ```

有没有办法在`boost::optional` *不*修改 Boost 源代码的情况下移动 a？还是我应该等到 Boost 支持移动？

我过去也有同样的问题`boost::any`。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-09-22T15:20:47.783

Boost.Optional 仅从 Boost 版本 1.56 开始支持移动构造。请参阅[发行说明](http://www.boost.org/users/history/version_1_56_0.html)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-28T11:08:04.417

查看`boost::optional`源代码，它没有定义移动构造函数或移动分配。但是，它确实定义了复制构造函数和赋值，这会阻止编译器为其自动生成移动构造函数和赋值。

请参阅[移动构造函数 - Q&A](http://akrzemi1.wordpress.com/2011/08/30/move-constructor-qa/)：

> 除非您明确定义了复制构造函数或复制/移动赋值或析构函数，否则编译器将隐式生成移动构造函数作为成员移动

正如 Luc Danton 建议的那样，需要有一种治疗方法。让我们尝试使用`swap`来移动`boost::optional`，希望创建一个空`boost::optional`值便宜，然后我们只需将默认构造`boost::optional`的与来自 r-value的构造交换`foo`，例如：

```
foo(foo&& b) {
    hello.swap(b.hello);
} 
```

移动任务也是如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T00:36:33.833

目前尚不清楚 C++11 特性对 boost::optional 的支持有多重要。

我在 Internet 上找到了一个好人，他在 boost 许可证下给了我一些他自己的代码……仍在进行一些调整。它正处于对我有用的地步。也许它会帮助任何看到这个问题的人：

[https://github.com/hostilefork/CopyMoveConstrainedOptional](https://github.com/hostilefork/CopyMoveConstrainedOptional)

还有一个更大的团队努力定义一个`std::optional`一直在进行的...但是他们的参考实现无法处理我遇到的一些案例：

[http://kojot.sggw.waw.pl/~akrzemi1/optional/tr2.optional.proposal.html](http://kojot.sggw.waw.pl/~akrzemi1/optional/tr2.optional.proposal.html)

# javascript - 从 javascript 中的 JSON 对象中读取值

> ID：10783392
> 
> 赞同：0
> 
> 时间：2012-05-28T10:50:46.643
> 
> 标签：javascript, json

我有以下JS代码：

```
var response = loadXMLDoc();
var dataset = response.data;
alert(response);
alert (dataset); 
```

“警报（响应）”打印：

```
{"labels":["-inf - 10","10 - 20","20 - 30","30 - 40","40 - 50","50 - 60","60 - 70","70 - 80","80 - 90","90 - 100","100 - 110","110 - 120","120 - 130","130 - 140","140 - 150","150 - 160","160 - +inf"],"data":[3,8,7,3,7,6,6,7,5,4,10,7,4,4,7,2,0],"count":16} 
```

而“警报（数据集）”给出“未定义”。我试过用

```
 var dataset = response["data"]; 
```

但它也没有奏效。我想从 JSON 对象中获取数据数组。我怎样才能做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:57:03.120

利用`var y = JSON.parse(response); alert(y["data"])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:08:51.523

尝试这个

```
var dataset = eval('(' + responce.data + ')'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:53:53.397

看到您收到警报以显示响应，它是一个字符串，还不是一个对象。

你需要用它来解析它[`JSON.parse()`](https://developer.mozilla.org/En/Using_native_JSON#Parsing_JSON.C2.A0strings)

```
//load your response
var response = loadXMLDoc(),
    dataset;

//parse response
response = JSON.parse(response);

//assign data to dataset
dataset = response.data;

//Hit F12 to see the console
console.log(response);
console.log(dataset); 
```

这 [是一个样本](http://jsfiddle.net/euAss/)

# php - 将 PHP 邮件表单样式化为表格

> ID：10783394
> 
> 赞同：-1
> 
> 时间：2012-05-28T10:50:56.977
> 
> 标签：php, email, radio-button, html-email

我有一个简单的 php 邮件表单，它会向管理员发送一封电子邮件，但目前它只是作为标准外观的文本通过。

我需要它，所以它出现在一个表格中，表格中的每个部分都位于表格的新行中。

它还为表单上的某些选项使用了一些单选按钮。单选按钮部分是否可以像下面的示例一样通过。

更新的框架评估 | “已选择单选按钮”

更新的框架评估 2 | “已选择单选按钮”

更新的框架评估 3 | “没有任何”

如果是这样，如果选择了单选按钮的选项，它将是“绿色”，如果没有选择任何内容，它会显示“无”并且是红色的。

这是我目前正在使用的代码：

```
<?php

  $email = $_REQUEST['email'] ;
  $name = $_REQUEST['name'] ;
  $radio1 = $_REQUEST['radio1'] ;
  $radio2 = $_REQUEST['radio2'] ;
  $radio3 = $_REQUEST['radio3'] ;
  $radio4 = $_REQUEST['radio4'] ;
  $address = $_REQUEST['address'] ;
  $postcode = $_REQUEST['postcode'] ;
  $tel = $_REQUEST['tel'] ;

  mail( "email@domain.com", "APPROVAL REQUEST FORM",  "Renewed Framework Assessments: $radio1\nSP Assessment Analysis Program (Demo Version): $radio2\nRenewed Framework Mental Maths Assessments: $radio3\nRenewed Framework Word Problem Books: $radio4\nFrom: $name\nEmail: $email\nAddress: $address\nPostcode: $postcode\nTelephone Number: $tel\n",'From: order@mathsbooksforchildren.co.uk');

  header( "Location: http://domain.com/approval-request-form/" );

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:04:48.307

你可以用这种方式格式化你的消息......

```
 $headers  = "From: order@mathsbooksforchildren.co.uk\r\n"; 
     $headers .= "Content-type: text/html charset=iso-8859-1 \r\n"; 
     $message = '
    <html>
    <head>
      <title>Some title</title>
    </head>
    <body>
      <table>
     <tr><td>Email</td><td>'.$email.'</td></tr>
     <tr><td>Email</td><td>'.$email.'</td></tr>
     <tr><td>Nema</td><td>'.$name.'</td></tr>
     <tr><td>Radio1</td><td>'.$radio1.'</td></tr>
     <tr><td>Radio1</td><td>'.$radio3.'</td></tr>
      </table>
    </body>
    </html>'

    '; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:56:10.947

为了发送 HTML 电子邮件，您必须设置适当的标题。

例如 ：

```
 $headers  = "From: order@mathsbooksforchildren.co.uk\r\n"; 
    $headers .= "Content-type: text/html charset=iso-8859-1 \r\n"; 
```

然后把你的 html 写在一个像这样的变量中：

```
 $message = '
<html>
<head>
  <title>Some title</title>
</head>
<body>
  <table>
  </table>
</body>
</html>
'; 
```

按照您的意愿设置表格，就像您在页面中设置 HTML 并使用这样的标题发送它：

```
mail("email@domain.com", "APPROVAL REQUEST FORM", $message, $headers); 
```

但总的来说，我建议您使用一些类进行邮件发送，使用默认`mail`功能可能会在某些时候导致很多麻烦。试试[Swift Mailer](http://swiftmailer.org/)或[PHP Mailer](http://phpmailer.worxware.com/)

# sql - 在 Access VBA 中运行参数查询

> ID：10783397
> 
> 赞同：1
> 
> 时间：2012-05-28T10:51:03.897
> 
> 标签：sql, ms-access, vba, parameterized

我正在尝试在 VBA 函数中运行以下查询。我不断收到“参数太少。预期为 1”。

```
strSQL = "Parameters [Report Date] DateTime;" & vbCrLf & _
                    "SELECT SCF.code AS [Stock Code], " & vbCrLf & _
                    "SCF.desc AS [Description], " & vbCrLf & _
                    "SCF.grp AS [Product Group]," & vbCrLf & _
                    "SCF.qCurr AS [Closing Stock], " & vbCrLf & _
                    "SCF.abp AS [Avg Price], " & vbCrLf & _
                    "Sum(([Closing Stock]*[Avg Price])) AS [STOCK VALUE], " & vbCrLf & _
                    "MaxDate.tDate AS [Last Transaction Date], " & vbCrLf & _
                    "Sum(IIf(([Last Transaction Date]>[Report Date]),([Closing Stock]*[Avg Price]),0)) AS [After Report Date], " & vbCrLf & _
                    "DateDiff(""d"",[Last Transaction Date],[Report Date]) AS [Days since Last Transaction], " & vbCrLf & _
                    "[Report Date]" & vbCrLf & _
            "INTO [FinReport] " & vbCrLf & _
            "FROM SCF RIGHT JOIN MaxDate ON MaxDate.parent = SCF.this "
strSQL = strSQL & _
            "WHERE (SCF.qCurr <> 0) " & vbCrLf & _
            "GROUP BY SCF.code, " & vbCrLf & _
                        "SCF.desc, " & vbCrLf & _
                        "SCF.grp, " & vbCrLf & _
                        "SCF.qCurr, " & vbCrLf & _
                        "SCF.abp, " & vbCrLf & _
                        "MaxDate.tDate" & vbCrLf & _
            "ORDER BY MaxDate.tDate;"

Set qdf = db.CreateQueryDef("", strSQL)
qdf.Parameters("[Report Date]").Value = Form_IO_Form.ReportDate_TB.Value
qdf.Execute 
```

我已经验证所有字段（当然除了 [报告日期] 之外）都存在***，并且查询本身作为访问查询运行***（弹出询问 [报告日期]）。

帮助！

编辑 1：这里要求的是作为 ZIP 的 DB 文件。它是一个 Access 2007 .accdb 文件
[DB 文件](http://www.mediafire.com/?b5pkih22zio2y4q)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:15:52.670

我猜你的一个字段名称有错字。找到它的最简单方法是`Debug.Print strSQL`在您的行之前立即添加`Set qdf...`一行。

然后在 Access UI 中创建一个新查询，切换到 SQL 视图，从即时窗口粘贴 SQL 文本，然后执行查询。Access 将提示您输入`Report Date`（您所期望的）和您的一个字段的错误输入名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:35:58.183

您的 SQL 语句将从 db 引擎触发错误 #3122：

`You tried to execute a query that does not include the specified expression 'DateDiff("d",[Last Transaction Date],[Report Date])' as part of an aggregate function.`

该错误将导致语句在数据库引擎甚至考虑任何参数之前失败。

当您使用 VBA 构建 SQL 语句时，最好从数据库引擎可以接受的语句开始。然后，您还应该遵循来自@mwolfe02 的合理建议`Debug.Print strSQL`... 让自己有机会检查您要求数据库引擎执行的已完成语句。

**编辑**：检查了您上传的 ACCDB 文件后，我仍然不明白为什么您的查询不会触发错误 #3122。但是，该查询确实可以作为保存的查询使用，并且可以在您从 VBA 代码执行时使用。您收到有关“参数太少”的投诉的原因是您实际上并没有执行您创建的临时 QueryDef。相反，您试图像这样执行 SQL 文本：

```
' Execute created Query '
CurrentDb.Execute strSQL, dbFailOnError 
```

如果您更改为这种方法（如您在问题中指出的那样），它可以正常工作：

```
qdf.Execute 
```

# sharepoint - 借助复杂的共享点工作流程填写 Infopath 表单

> ID：10783398
> 
> 赞同：1
> 
> 时间：2012-05-28T10:51:06.653
> 
> 标签：sharepoint, sharepoint-2010, workflow, infopath, sharepoint-workflow

我有一个很大的 Infopath 表单，它是复杂工作流程的一部分，涉及收集来自不同用户的输入和签名以及批准。

目前，同样的工作流程是手动完成的——Infopath 表单实际上是一个 PDF 表单，工作流程步骤由填写表单的实际用户执行，然后通过电子邮件将其发送给他们认为可能涉及的任何人。

我正在使用我们的 Sharepoint Server 基础架构自动执行此操作，因此第一件事是将 PDF 表单转换为 Infopath 表单。第二个是生成一个 Sharepoint 工作流，该工作流将实现正确填写该表单的业务流程。

所以我的问题是：是否可以实现一个 Sharepoint 工作流，根据表单本身收集的信息将完整的表单发送给正确的用户？理想情况下，表单将使用工作流过程中定义的规则进行传递，用户将填写任何必要的内容，提交表单，工作流将根据填写的内容继续。此表单不仅是发起者表单，而且是所有工作流任务中要处理的表单。

将表单拆分是不可取的，因为这会使我们的用户感到困惑，其中一些用户需要完整表单视图提供的概览。另外，如果可能的话，我想使用 Sharepoint 作为表单分发者，而不是电子邮件服务。

任何有关如何执行此操作的指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:40:44.587

这个有可能。以下是简要的指针：

1.  使用您的信息路径表单作为项目表单创建内容类型
2.  创建与您的内容类型相关联的 Visual Studio 工作流
3.  在工作流的代码中，您可以实现处理表单的任何规则。您可以从工作流在其上下文中运行的列表项中获取表单数据。

# cmd - 什么环境变量用于在终端中执行命令和 .sh 文件

> ID：10783402
> 
> 赞同：0
> 
> 时间：2012-05-28T10:51:19.613
> 
> 标签：cmd, firefox-addon, xul, xulrunner

我通过以下代码使用 XUL 在命令提示符下成功执行了命令和 .bat 文件：

```
Components.utils.import("resource://gre/modules/FileUtils.jsm");

var env = Components.classes["@mozilla.org/process/environment;1"]
                    .getService(Components.interfaces.nsIEnvironment);
var shell = new FileUtils.File(env.get("COMSPEC"));

var args = ["/c", "cd C:/ffmpeg/bin & record.bat"];

var process = Components.classes["@mozilla.org/process/util;1"]
                        .createInstance(Components.interfaces.nsIProcess);
process.init(shell);
process.runAsync(args, args.length); 
```

但是现在我将 .bat 文件更改为 .sh 文件以在 Ubuntu 上运行，并且需要使用相同的代码在终端中运行命令，所以我需要将环境变量“COMSPEC”更改为适用于终端的东西，我发现它是“ TERM”但没有用。

是否有任何其他环境变量或方法来完成此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:35:24.780

在 Linux 上运行 shell 文件的命令是固定的 - 它始终是`/bin/sh`. 所以你会这样做：

```
var shell = new FileUtils.File("/bin/sh");
var args = ["-c", "record.sh"]; 
```

这不是完全正确的方法 - 如果您想绝对正确地执行此操作，您将查看脚本文件并解析第一行（通常[类似于`#!/bin/sh`](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)）。在一般情况下，您不会检查文件扩展名，而是检查文件是否可执行（在类 Unix 系统上，这完全独立于文件扩展名）。但我猜你对一般情况不是很感兴趣。

# android - 如何将字符串转换为布尔数组？

> ID：10783405
> 
> 赞同：1
> 
> 时间：2012-05-28T10:51:41.433
> 
> 标签：android

我将我的 Android 应用程序中的所有内容都转换为字符串并将其添加到 Sqlite 数据库中。我使用下面的代码将布尔数组转换为字符串，但我不知道如何将其从字符串转换回布尔数组。字符串中的每个`true`和之间都有空格。`false`如何将每个空间的字符串分解为布尔数组？

```
String work= "";
for (int i = 0;i<go.length; i++) {
    work= work+go[i];
    // Do not append comma at the end of last element
    if(i<go.length - 1){
        work = work+" ";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:56:33.813

1.  在分隔符 ( `" "`)上拆分字符串
2.  创建一个`boolean`与拆分后的字符串数组长度相同的 s 数组
3.  `Boolean.parseBoolean`使用方法一一解析

* * *

例子：

```
public static void main(String[] args) {

    String str = "true false true false false";

    String[] parts = str.split(" ");

    boolean[] array = new boolean[parts.length];
    for (int i = 0; i < parts.length; i++)
        array[i] = Boolean.parseBoolean(parts[i]);

    System.out.println(Arrays.toString(array));
} 
```

输出：

```
[true, false, true, false, false] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:55:26.893

请用`boolean b = Boolean.parseBoolean(string);`

# java - Oracle ADF::如何通过 requestScope 将参数传递给命名查询到另一个视图对象

> ID：10783406
> 
> 赞同：0
> 
> 时间：2012-05-28T10:51:41.577
> 
> 标签：java, jakarta-ee, jsf-2, oracle-adf

问题:: 如何在查询中将值传递给名为“userParameter”的参数。使用 requestScope
请帮助您完成使请求范围在同一页面上工作的步骤。

现在我知道以下内容。

1.  我有一个名为 UserRoomReservation 的页面

2.  我有一个数据控件（UserView） 将第一个数据控件拖为表格。将第一列转换为链接将 actionlistener 添加到该链接，从：#{row.userId} 到：#{requestScope.userParameter}

3.  我通过sql查询创建了另一个视图对象我放了一个命名参数“：userParameter”，sql查询如下所示:::

    ```
    SELECT DISTINCT Fullreservation.USERID,
           Meetingrooms."roomName",             
           Meetingrooms."roomId" ,
           COUNT (Fullreservation.roomid) AS countRoomUsage
    FROM FULLRESERVATION Fullreservation, "meetingRooms" Meetingrooms
    WHERE fullreservation.roomid = Meetingrooms."roomId"
    AND Fullreservation.USERID = :userParameter

    GROUP BY
           Meetingrooms."roomName", 
           Meetingrooms."roomId",
           Fullreservation.USERID 
    ```

4.  我将它拖到与图表相同的页面。但它不起作用，因为该值尚未传递给

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-05T11:15:43.990

您可以从 requestScope 获得价值

```
ADFContext.getCurrent().getRequestScope().get(obj); 
```

然后使用 NamedWhereClauseParam 方法在绑定变量中设置此值

```
ViewObjectInstance.setNamedWhereClauseParam("BindVariabbleName",value);
ViewObjectInstance.executeQuery(); 
```

# javascript - 无效标签 json 标签与 javascript 标签

> ID：10783411
> 
> 赞同：0
> 
> 时间：2012-05-28T10:51:58.113
> 
> 标签：javascript

我收到**"firstname": "John2",**的无效标签错误。我将我的 json 数据放在括号中，那为什么我仍然收到此错误？我是否仍然缺少一些东西，以至于代码将它与 java 脚本标签混淆了？

```
 <script type="text/javascript">
        var data = "(" + {
  "firstname": "John1",
  "lastname": "Doe",
  "location": {
    "latitude": "48.4048403957642",
    "longitude": "2.68452644348145"
  }
}
{
  "firstname": "John2",
  "lastname": "Doe",
  "location": {
    "latitude": "48.4050236871384",
    "longitude": "2.68512690051361"
  }
}
{
  "firstname": "John3",
  "lastname": "Doe",
  "location": {
    "latitude": "48.4048403957642",
    "longitude": "2.68452644348145"
  }
}
+ ")" ;

      function initialize() {
        var center = new google.maps.LatLng(48.404840395764175, 2.6845264434814453);

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: center,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var markers = [];
        for (var i = 0; i < data.length; i++) {
          var location = data[i];
          var latLng = new google.maps.LatLng(location.latitude,
              location.longitude);
          var marker = new google.maps.Marker({
            position: latLng
          });
          markers.push(marker);
        }
        var markerCluster = new MarkerClusterer(map, markers);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:55:18.920

你有两个问题（我可以发现）。

首先，您使用的是 JavaScript，而不是 JSON。你有一个对象文字。

完全摆脱`"("`和`")"`。如果您尝试使用`eval`. 您没有 JSON，如果有，您应该使用`JSON`对象（及其`parse`方法），而不是`eval`. 目前，您正在尝试对对象进行字符串化（这会给您类似的东西`"([Object object])"`，这根本没有任何用处）。

其次，您似乎正在尝试使用一组对象，但您只是将它们一个接一个地放置。

用数组文字`[`和`]`.

`,`用逗号 ( )分隔数组中的项目。

错误消息的原因是您创建了一个奇怪的解析状态，以至于 JS 引擎正在尝试[标记循环](https://developer.mozilla.org/en/JavaScript/Reference/Statements/label)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T10:56:10.300

使用 JSON 生成函数不是更容易吗？例如：

```
function array2json(arr) {
var parts = [];
var is_list = (Object.prototype.toString.apply(arr) === '[object Array]');

for (var key in arr) {
    var value = arr[key];
    if(typeof value == "object") { //Custom handling for arrays
        if(is_list) parts.push(array2json(value)); /* :RECURSION: */
        else parts[key] = array2json(value); /* :RECURSION: */
    } else {
        var str = "";
        if(!is_list) str = '"' + key + '":';

        //Custom handling for multiple data types
        if(typeof value == "number") str += value; //Numbers
        else if(value === false) str += 'false'; //The booleans
        else if(value === true) str += 'true';
        else str += '"' + value + '"'; //All other things
        // :TODO: Is there any more datatype we should be in the lookout for? (Functions?)

        parts.push(str);
    }
}
var json = parts.join(",");

if(is_list) return '[' + json + ']';//Return numerical JSON
return '{' + json + '}';//Return associative JSON
} 
```

（*旁注：这段代码不是我自己做的，但是很有用！*）

您可以使用以下方法制作 JSON 数据：

```
myJSON = array2json(['any data', {'even objects': 'can go in here'}); 
```

您可以使用以下方法取回数组：

```
var myArray = eval('(' + myJSON + ')'); 
```

# magento - Magento 下一个按价格获取产品

> ID：10783412
> 
> 赞同：1
> 
> 时间：2012-05-28T10:52:02.790
> 
> 标签：magento

我需要按价格获取某个类别中特定产品的下一个产品集合。例如：我有产品**White Shoes**，它位于**鞋类**。我需要获得接下来的五种产品，在**鞋类**中价格高于**白鞋**的产品，以及价格低于白鞋的五种产品。

 **谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:37:33.820

从效率的角度来看，这可能会被清理掉，但希望你能理解它的要点。您需要设置两个变量，`$product`一个可能是您的**White Shoes**产品作为`Mage_Catalog_Model_Product`对象，`$category`另一个是您的**鞋类**作为`Mage_Catalog_Model_Category`对象。

**更新**

这是一种更好的方法，无需为`$category`.

```
// Load up to 5 products with price <= $product
$fiveLower = Mage::getModel('catalog/product')->getCollection()
    // Add whatever attributes you want here
    ->addAttributeToSelect(array(
        'name',
        'product_url',
        'small_image',
    ))

    // $category is an instance of Mage_Catalog_Model_Category
    ->addCategoryFilter($category)

    // Both of these are required to get the price
    ->addMinimalPrice()
    ->addFinalPrice()

    // Filter out the current product by id
    ->addAttributeToFilter('entity_id', array('neq' => $product->getId()));

// Filter by final_price <= $product and limit to 5.
$fiveLower->getSelect()
          ->having('final_price <= ?', $product->getFinalPrice())
          ->order('final_price')
          ->limit(5, 0);

// Load up to 5 products with price > $product
$fiveHigher = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect(array(
        'name',
        'product_url',
        'small_image',
    ))
    ->addCategoryFilter($category)
    ->addMinimalPrice()
    ->addFinalPrice();

$fiveHigher->getSelect()
           ->having('final_price > ?', $product->getFinalPrice())
           ->order('final_price')
           ->limit(5, 0);

echo 'These are the lower priced items:' . PHP_EOL;
foreach ($fiveLower as $item) {
    echo $item->getName() . ' - ' . $item->getFinalPrice() . PHP_EOL;
}

echo 'These are the higher priced items:' . PHP_EOL;
foreach ($fiveHigher as $item) {
    echo $item->getName() . ' - ' . $item->getFinalPrice() . PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:05:24.537

我有类似的任务，在这里我做了什么：

```
 $customerGroupId = Mage::helper('customer')->getCustomer()->getGroupId();
        $websiteId = Mage::app()->getStore()->getWebsiteId();
        $finalPrice = $product->getFinalPrice();

        $coreResource = Mage::getSingleton('core/resource');
        $adapter = $coreResource->getConnection('catalog_read');
        $prevSelect = $adapter->select()
            ->from(array('i' => $coreResource->getTableName('catalog/product_index_price')), array())
            ->join(
                array('p' => $coreResource->getTableName('catalog/category_product')),
                'p.product_id = i.entity_id',
                array('product_id')
            )
            ->where('p.category_id = ?', $categoryId)
            ->where('i.customer_group_id = ?', $customerGroupId)
            ->where('i.website_id = ?', $websiteId)
            ->where('p.product_id != ?', $product->getId())
            ->where('i.final_price < ?', $finalPrice)
            ->order('i.final_price DESC')
            ->limit(self::PRODUCTS_BLOCK_SIZE);

        $lowerIds = array_reverse($adapter->fetchCol($prevSelect));

        $nextSelect = $adapter->select()
            ->from(array('i' => $coreResource->getTableName('catalog/product_index_price')), array())
            ->join(
                array('p' => $coreResource->getTableName('catalog/category_product')),
                'p.product_id = i.entity_id',
                array('product_id')
            )
            ->where('p.category_id = ?', $categoryId)
            ->where('i.customer_group_id = ?', $customerGroupId)
            ->where('i.website_id = ?', $websiteId)
            ->where('p.product_id != ?', $product->getId())
            ->where('i.final_price > ?', $finalPrice)
            ->order('i.final_price ASC')
            ->limit(self::PRODUCTS_BLOCK_SIZE);

        $higherIds = $adapter->fetchCol($nextSelect);

        $lowerSliced = array_slice($lowerIds, -self::PRODUCTS_BLOCK_SIZE);
        $requiredFromHigher = self::PRODUCTS_BLOCK_SIZE - count($lowerSliced);
        $similarIds = array_merge(
            $lowerSliced,
            array_slice($higherIds, 0, $requiredFromHigher)
        );

        $collection = Mage::getResourceModel('catalog/product_collection')
            ->addAttributeToSelect('name')
            ->addAttributeToSelect('small_image')
            ->addAttributeToSelect('product_url')
            ->addAttributeToFilter('entity_id', array('in' => $similarIds))
            ->setPage(1, self::PRODUCTS_BLOCK_SIZE); 
```**

# ckeditor - 在CKEditor中提取范围跳过标签的内容方法

> ID：10783416
> 
> 赞同：0
> 
> 时间：2012-05-28T10:52:28.970
> 
> 标签：ckeditor, range, extract

我想在 CKEditor 中制作侧边栏插件。当我选择带有粗体和斜体标签的文本时，提取内容会跳过该标签，并只返回文本。我想要所有选定的文本，包括所有标签。

这是我的代码：

```
function sidebar(editor){
    var selection = editor.getSelection();
    if (selection.getSelectedText() != "") {

        var ranges = selection.getRanges();
        var pNode = editor.document.createElement('p');
        var extractedContent = ranges[0].extractContents();
        pNode.append(extractedContent);
        var customNode = editor.document.createElement('cdl:sidebar');
        customNode.append(pNode);
        var sidebarHolder = editor.document.createElement("sidebarholder");
        sidebarHolder.append(customNode);
        var nodeHtml = sidebarHolder.getHtml();
        selection.selectRanges(ranges);
        editor.insertHtml(nodeHtml);
    }
    else {
        showErrorMessage("Selection is not proper");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:11:50.770

您可以使用 ckeditor walk 获取多选文本。

```
// Walker searching for guardElements.
                    var walker = new CKEDITOR.dom.walker( range );

                    var start = bookmarks[ i ].startNode,
                        end = bookmarks[ i++ ].endNode;

                    walker.evaluator = function( node )
                    {
                        return !! ( node.type == CKEDITOR.NODE_ELEMENT
                                && node.getName() in guardElements
                                && !( node.getName() == ( enterMode == CKEDITOR.ENTER_P ? 'p' : 'div' )
                                    && node.getParent().type == CKEDITOR.NODE_ELEMENT
                                    && node.getParent().getName() == 'blockquote' )
                                // Element must be fully included in the range as well. (#6485).
                                && node.getPosition( start ) & CKEDITOR.POSITION_FOLLOWING
                                && ( ( node.getPosition( end ) & CKEDITOR.POSITION_PRECEDING + CKEDITOR.POSITION_CONTAINS ) == CKEDITOR.POSITION_PRECEDING ) );
                    }; 
```

使用 walker.js [http://docs.cksource.com/ckeditor_api/symbols/src/core_dom_walker.js.html](http://docs.cksource.com/ckeditor_api/symbols/src/core_dom_walker.js.html)

# jsf-2 - 第一次单击时不会调用操作

> ID：10783418
> 
> 赞同：0
> 
> 时间：2012-05-28T10:52:37.080
> 
> 标签：jsf-2, primefaces

我有一个带有身份验证的页面，该页面指向我的模板页面，其中有菜单。

```
 <navigation-rule>
    <from-view-id>pages/login.xhtml</from-view-id>
    <navigation-case>
      <from-outcome>userOK</from-outcome>
      <to-view-id>pages/template.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
      <from-outcome>userNOK</from-outcome>
      <to-view-id>pages/login.xhtml</to-view-id>
    </navigation-case>    
  </navigation-rule> 
```

我的页面模板.xhtml

```
<h:form>
<p:menu type="plain" style="width:200;box-shadow: 6px 6px 6px black;top:-18;left:-40" >
    <p:submenu label="Dossier" id ="Dossier" >  
        <p:menuitem update=":contentform,:messages" value="Nouveau Dossier" action="#{choix.setPage('ajoutDossier')}" 
    ....
    ....
</h:form>

<h:form id="contentform" >
    <h:panelGroup  rendered="#{choix.page == 'ajoutDossier'}">
        <ui:include src="Dossier/ajoutDossier.xhtml" />
    </h:panelGroup>
    ....
    ....
</h:form> 
```

问题是第一次单击时未调用操作，我必须单击 2 次，并且在我单击多次并且未调用操作之前，有时只是在最后一个位置工作的 p:submenu

同样，当它没有转发页面 template.xhtml 时，它也可以工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:11:15.117

您没有利用 JSF 模板。您无需使用模板和多个模板客户端，而是将所有内容放在一个页面中；并有条件地渲染东西。查看本[教程](http://www.mastertheboss.com/java-ee-16-articles/265-facelets-tutorial.html)或任何其他关于 jsf 模板的教程。
通常你会有一个模板，它包含所有页面共有的所有布局和内容；`<ui:insert name="title" >Default content</ui:insert>`并根据需要多次使用标签（使用不同的名称）。然后创建一个模板客户端，使用定义模板

```
<ui:composition template="./../resources/templates/templateFile.xhtml"> 
```

然后使用标签`<ui:define name="nav2">`设置要包含在模板中的内容。

除此之外，关于代码中导航的问题：当您进行导航时，您不会更新内容，因为在导航之后页面已完全加载（没有 ajax）。所以首先你必须删除你的更新属性；并且您还必须将 p:menuitem 的“ajax”属性设置为 false；因为默认情况下它是真的。否则导航将不会发生。
如果您做得很好，则不需要导航规则中的重定向属性。它可以与前锋完美配合。forward 的唯一问题是浏览器 URL 不会改变，因为浏览器没有收到导航通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T21:02:38.247

i found the solution i have to add `<redirect />` after the `<to-view-id>` of page which have the problem, because i read that JSF uses internal FORWARD instead of REDIRECT to navigate to the success page and this why the URL will not get changed but i don't really undestand why ??

here is the code who work :

```
 <navigation-rule>
    <from-view-id>pages/login.xhtml</from-view-id>
    <navigation-case>
      <from-outcome>userOK</from-outcome>
      <to-view-id>pages/template.xhtml</to-view-id>
      <redirect />
    </navigation-case>
    <navigation-case>
      <from-outcome>userNOK</from-outcome>
      <to-view-id>pages/login.xhtml</to-view-id>
    </navigation-case>    
  </navigation-rule> 
```

also to not loose css of redirect page i have to add this

```
<link rel="stylesheet" href="#{request.contextPath}/css/style.css" /> 
```

# perl - 合并多个文本文件并在每行末尾附加当前文件名

> ID：10783423
> 
> 赞同：-2
> 
> 时间：2012-05-28T10:52:53.477
> 
> 标签：perl, file, merge

假设我有一个文件夹，其中包含一千个名为 File1.csv、File2.csv、...、File1000.csv 的文件，每个文件都包含几行以分号分隔 (;) 的数据值。

我需要一个 Perl 脚本来将该文件夹中的所有 csv 文件“合并”为一个，方法是一个接一个地附加每个文件，并在每一行的末尾添加另一个数据列，其中包含当前正在处理的文件的名称（没有结尾，例如“;File2”）。

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:22:02.650

[`Text::CSV`](https://metacpan.org/module/Text%3a%3aCSV)可用于解析 CSV。以下脚本将从包含 CSV 文件的目录中运行。它不是递归的（a[`glob`](http://perldoc.perl.org/functions/glob.html)已被使用）。如果你需要它递归查找文件，你可以使用[`File::Find`](https://metacpan.org/module/File%3a%3aFind)Perl 模块。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Text::CSV;

my $csv = Text::CSV->new( { 'sep_char' => ';' } );

open my $fho, '>', 'combined.csv' or die "Error opening file: $!";

while ( my $file = <*.csv> ) {
    open my $fhi, '<', $file or die "Error opening file: $!";
    ( my $last_field = $file ) =~ s/\.[^\.]+$//;  # Strip the file extension off

    while ( my $row = $csv->getline($fhi) ) {
        $csv->combine( @$row, $last_field );  # Construct new row by appending the file name without the extension
        print $fho $csv->string, "\n";        # Write the combined string to combined.csv
    }
} 
```

# c# - 从 nhibernate fetch 集合中获取第一个元素

> ID：10783424
> 
> 赞同：2
> 
> 时间：2012-05-28T10:52:58.093
> 
> 标签：c#, linq, nhibernate, linq-to-nhibernate

我有一个实体，除了其他信息之外，它还包含许多图像。这是一二多。在我需要首先从该集合加载到缓慢加载的情况下，我有以下查询来检索图像集合。

```
 List<Entity> data = session.Query<Entity>()
          .Fetch(x=>x.Photos)//here I need only first element
          .Fetch(x=>x.Features)
          .ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:54:26.380

使用`First()`或使用`FirstOrDefault()`linq 的方法将为您完成任务

```
List<Entity> data = session.Query<Entity>()
           .Fetch(x=>x.Photos.First())//
           .Fetch(x=>x.Features)
           .ToList(); 
```

或者

```
List<Entity> data = session.Query<Entity>()
               .Fetch(x=>x.Photos.FirstOrDefault())//
               .Fetch(x=>x.Features)
               .ToList(); 
```

在使用此方法之前请阅读此内容：[何时使用 .First 以及何时将 .FirstOrDefault 与 LINQ 一起使用？](https://stackoverflow.com/questions/1024559/when-to-use-first-and-when-to-use-firstordefault-with-linq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:54:48.113

```
List<Entity> data = session.Query<Entity>()
          .Fetch(x=>x.Photos.FirstOrDefualt())//here I need only first element
          .Fetch(x=>x.Features)
          .ToList(); 
```

# makefile - Make dist 不包含子目录中的 makefile.in 文件

> ID：10783425
> 
> 赞同：0
> 
> 时间：2012-05-28T10:53:05.653
> 
> 标签：makefile, autotools, autoconf, automake

我的源文件夹中有一个 Makefile.am 文件，一些子目录中有一些 makefile.in 文件。一切正常，但我注意到当我执行 make dist 时，tarball 不包含子目录中的 makefile.in。也正因为如此， make distcheck 失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:11:52.647

我相信发生这种情况的唯一方法是，如果您未能指定子目录是适当的更高级别 Makefile.am 的 SUBDIRS 子句，尽管如果是这种情况，“一切正常”似乎很奇怪。除非您实际上`makefile.in`用小写命名`m`，在这种情况下，您需要将该文件添加到`EXTRA_DIST`，但更好的解决方案可能是使用带有大写的标准名称`M`。

# java - 如何使用语言环境和资源包来国际化我的应用程序？

> ID：10783426
> 
> 赞同：-1
> 
> 时间：2012-05-28T10:53:06.287
> 
> 标签：java

我有一个网页，它有 3 种不同的语言，瑞典语、英语和俄语！`WebTexts_en.properties`,`WebTexts_sv.properties`和`WebTexts_ry.properties`文件一起`LangSupport.jsp`选择浏览器的语言环境。

我的页面用英语工作，`neptune-app-id.appspot.com`但只有这种语言，瑞典语和俄语不是。我是否需要创建`Internationalization.class`某种方法才能使其正常工作。或者我如何使用语言环境来处理资源包？

这是一些非常好的链接，但我不明白如何制作这个，

1.  [http://www.avajava.com/tutorials/lessons/how-do-i-internationalize-my-web-application.html?page=1](http://www.avajava.com/tutorials/lessons/how-do-i-internationalize-my-web-application.html?page=1)
2.  [http://www.avajava.com/tutorials/lessons/how-do-i-use-locales-and-resource-bundles-to-internationalize-my-application.html;jsessionid=72C23BCD47546E9D05DF422DA3F0EC39](http://www.avajava.com/tutorials/lessons/how-do-i-use-locales-and-resource-bundles-to-internationalize-my-application.html;jsessionid=72C23BCD47546E9D05DF422DA3F0EC39)

也许有人，谁知道如何设置，谁能帮我解决这个问题？

我已经在 Eclipse 中包含了我的文件设置供您查看。我的页面位于 Google App Engine 的[http://neptune-app-id.appspot.com/](http://neptune-app-id.appspot.com/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:30:05.160

我的猜测是，在瑞典语和 Rusyn 中，文本不会被转义。Java 有一个小工具来编码和反向解码文本。

```
native2ascii -encoding UTF-8 native.properties > ascii.properties 
```

否则切换文件，将瑞典语重命名为英语并尝试一下。

# android - 如何使用 SQLite 创建表并将其发布到 Android 中的某个远程服务器上

> ID：10783427
> 
> 赞同：1
> 
> 时间：2012-05-28T10:53:09.307
> 
> 标签：android, sqlite

这就是我希望我的应用程序做的事情。我找到了如何使用以下方法创建表：

```
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + dbSubjectTable + " (" + dbSubjectId
            + "INTEGER PRIMARY KEY, " + dbSubjectName + "TEXT, "
            + dbSubscribed + "INTEGER, " + dbDate + "DATE);");  } 
```

但我不知道如何将此表发送到远程服务器。 **注意：**我不想发送整个数据库，而只发送一个特定的表（还有其他表，我没有指定保持问题简单）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:56:20.480

使用 Web 服务，[此处](http://www.javacodegeeks.com/2010/10/android-full-app-part-2-using-http-api.html)和[此处](http://android-developers.blogspot.in/2011/09/androids-http-clients.html)的链接可能会对您有所帮助。

# c++ - crt1.o no such file c++ 在 linux x64 上编译错误

> ID：10783429
> 
> 赞同：6
> 
> 时间：2012-05-28T10:53:14.597
> 
> 标签：c++, linux, linker

我正在 linux 平台上迈出第一步。我已经安装了 Centos x64。我正在尝试构建一个具有几个功能和几个单元测试的小程序。

我使用 Netbeans 7.1.2 作为开发环境。

这是构建过程的输出：

```
CLEAN SUCCESSFUL (total time: 671ms)

"/usr/bin/gmake" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
gmake[1]: Entering directory `/home/john/Dev/GoatsCheese'
"/usr/bin/gmake"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/goatscheese
gmake[2]: Entering directory `/home/john/Dev/GoatsCheese'
mkdir -p build/Debug/GNU-Linux-x86
rm -f build/Debug/GNU-Linux-x86/main.o.d
g++ -m32   -c -g -I/usr/include/cppunit -MMD -MP -MF build/Debug/GNU-Linux-x86/main.o.d -o build/Debug/GNU-Linux-x86/main.o main.cpp
mkdir -p dist/Debug/GNU-Linux-x86
g++ -m32    -o dist/Debug/GNU-Linux-x86/goatscheese build/Debug/GNU-Linux-x86/main.o  
/usr/bin/ld: crt1.o: No such file: No such file or directory
collect2: ld returned 1 exit status 
```

编译器设置为创建 32 位可执行文件，但我不认为这会是一个问题（可以在 Windows 上的 x64 平台上创建 32 位可执行文件 - 我熟悉的平台）。

Locate 在以下位置找到 crt1.o 文件：

```
locate crt1.o
/usr/lib64/Mcrt1.o
/usr/lib64/Scrt1.o
/usr/lib64/crt1.o
/usr/lib64/gcrt1.o 
```

我不确定我是否缺少一个包或者我是否应该创建一个符号链接。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T10:57:59.980

需要安装32位标准C库开发包。它可能被命名为`libc6-dev-i386`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:17:06.107

我认为 ld 正在寻找 32 位 crt1.o 但您只有 64 位版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:04:41.613

您找不到 crt1.o 的问题可能是因为您缺少库说明符选项之一。我不熟悉 Netbeans，但你应该添加 /usr/lib64\. 在 g++ 命令行的某个地方，它应该看起来像：“-L /usr/lib64”。

注意：假设因为它在 Windows 上以这种方式工作，所以具有相同 CPU 的其他平台会以相同方式运行，这是一种思维缺陷。这听起来不对。

我建议您使用 32 位库构建 32 位二进制文​​件，并构建链接到 64 位库的 64 位二进制文​​件。

# objective-c - Testflight 和 xcode 中的不同 Token

> ID：10783433
> 
> 赞同：1
> 
> 时间：2012-05-28T10:53:50.300
> 
> 标签：objective-c, xcode, cocoa

我现在正在 Testflight 中测试我的新应用程序，但是当我在 Testflight 中启动我的应用程序时，另一个 UID 令牌出现在我的数据库中。当我在 xcode 中打开我的应用程序时，会出现另一个 UID 令牌。

我正在尝试在 Testflight 中测试推送通知，但是发送到我的数据库的令牌（当我在 Testflight 中运行应用程序时）不起作用（这是另一个在 xcode 中的令牌）。但是当我在 xcode 中运行应用程序时发送的令牌有效。

有谁知道为什么我运行我的应用程序 Testflight 时令牌不同？在 testflight 中打开应用程序后，无法使用出现在我的数据库中的 UID 令牌测试推送通知。

但是当我从 xcode 运行 UID 令牌时，我会收到一个推送通知。

# java - 如何在不使用 ImageJ 库的情况下在 java 中加载或打开 DICOM 图像文件？

> ID：10783437
> 
> 赞同：1
> 
> 时间：2012-05-28T10:53:53.943
> 
> 标签：java, netbeans, platform, dicom

我在 java swing 中的 netbeans 平台上制作 App。首先我想加载或打开 DICOM 图像文件，而不使用 java.so 中的 ImageJ 库，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:14:18.907

如果您想要一个专用的开源 DICOM 库来加载 DICOM 图像，我会推荐 PixelMed Java DICOM Toolkit，可[在此处](http://www.dclunie.com/pixelmed/software/)获得。

# basic-authentication - 使用基本身份验证访问 msmdpump.dll 时性能下降。重复401观察

> ID：10783440
> 
> 赞同：1
> 
> 时间：2012-05-28T10:54:00.280
> 
> 标签：basic-authentication, ssas-2008

我在使用基本身份验证通过 HTTP/HTTPS 连接访问 SSAS 时遇到了一个烦人的问题。

一切正常，除非您使用嗅探器分析网络流量，每次调用都会发出两次。第一个是在没有引发 401 错误的 http 协议的“授权”标头的情况下发出的。第二个发送正确填充“授权”标头的请求。对于每个请求，这会一次又一次地重复......？！

```
Httpwatch/fiddler or IIS logs

Sniffing the network calls and you will obtain:
#    Result Protocol Host      URL                   Body    Content-Type
1    401    HTTP    sql2008    /olap/msmdpump.dll    1293    text/html
2    200    HTTP    sql2008    /olap/msmdpump.dll    2598    text/xml
3    401    HTTP    sql2008    /olap/msmdpump.dll    1293    text/html
4    200    HTTP    sql2008    /olap/msmdpump.dll     280    application/xml+xpress
5    401    HTTP    sql2008    /olap/msmdpump.dll    1293    text/html
6    200    HTTP    sql2008    /olap/msmdpump.dll     991    application/xml+xpress
7    401    HTTP    sql2008    /olap/msmdpump.dll    1293    text/html
8    200    HTTP    sql2008    /olap/msmdpump.dll    1787    application/xml+xpress
9    401    HTTP    sql2008    /olap/msmdpump.dll    1293    text/html
10   200    HTTP    sql2008    /olap/msmdpump.dll     197    application/xml+xpress 
```

关于如何绕过这些经常性身份验证的任何想法？

我更新到 SQLServer 2008 R2 SP1 Cumulative Patch 4 没有成功。该问题似乎来自 ADOMD.NET 或 OleDB for Olap Driver。

任何帮助，将不胜感激，

问候， 阿维纳什尼加姆

# php - 修改分页排序方法以更改每页的行数

> ID：10783445
> 
> 赞同：0
> 
> 时间：2012-05-28T10:54:36.233
> 
> 标签：php, mysql, html, pagination

嗨，我有一个**基于 PHP 的**分页和排序方法，效果很好。

我能够根据任何类别进行排序和分页，但是在每页的行数方面存在问题。

**我使用 GET 方法来获取信息以进行分页和排序**

```
 if (isset($_GET['rpp'])&& is_numeric($_GET['rpp'])) {
    $rowsperpage = mysql_real_escape_string($_GET['rpp']);
}else{
    $rowsperpage='5';
}
if (isset($_GET['page']) && is_numeric($_GET['page'])) {
   $currentpage = (int) mysql_real_escape_string($_GET['page']);
} else {
   $currentpage = 1;
}
if (isset($_GET['order']) && in_array($_GET['order'], $order)) {
    $orderby = mysql_real_escape_string($_GET['order']);
}else{
    $orderby='id';
}
$sortby = '';
if (isset($_GET['sort'])) {
    $sortby = mysql_real_escape_string($_GET['sort']);
}else{
    $sortby='desc';
} 
```

**对于分页，我使用了以下类型的 url 字符串**

```
echo " <li><a href='$pagename?order=$orderby&sort=$sortby&rpp=$rowsperpage&page=$nextpage'>Next&raquo;&raquo;</a> 
```

**我的mysql查询是**

```
$sql2 = "SELECT * FROM internet_security ORDER BY $orderby $sortby LIMIT $rowsperpage OFFSET $offset"; 
```

**在 html 中，我使用链接对类别进行排序，例如**

```
 <a href="?order=id&sort=desc">id-desc:</a>
        <a href="?order=id&sort=asc">id-asc:</a>

        <a href="?order=title&sort=desc">title-desc:</a>
        <a href="?order=title&sort=asc">title-asc:</a>

        **limit rows by**
        <a href="?&rpp=5">5</a>
        <a href="?&rpp=10">10</a>
        <a href="?&rpp=20">20</a> 
```

**我的问题是** 一切正常，除非我通过限制行来限制每页的行 - 行被限制为**选择的任何****限制**（5,10,20）但是如果我点击分页**，每件事都会进入其默认设置值，**即按 id 并按 DESC 顺序排列，LIMIT 为 5。

 ******如果我喜欢**

```
 <a href="?order=id&sort=desc&rpp=5">id-desc:</a>
            <a href="?order=id&sort=desc&rpp=10">id-desc:</a>            
            <a href="?order=id&sort=desc&rpp=20">id-desc:</a> 
```

然后它可以工作，但是我必须至少有 12 个链接才能获得完整的功能。这不是标准方法。

我想要的是，一旦默认或通过排序选项设置了限制，我将能够按 id 标题等进行排序。并且 paginatin 应该与它一起工作。

我希望我说清楚了。请看看我做错了什么，并为我的方法提出任何可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:16:55.767

（*升级到答案*）

存储`$rpp`在一个`$_SESSION`变量中，仅当它存在于`$_GET`：

```
 if ( isset($_GET[    'rpp'])) $_SESSION['rpp'] = intval($_GET['rpp']);
elseif (!isset($_SESSION['rpp'])) $_SESSION['rpp'] = 5; 
```

然后`$_SESSION['rpp']`在您的查询中使用：

```
$sql2 = "
  SELECT   *
  FROM     internet_security
  ORDER BY $orderby $sortby
  LIMIT    $_SESSION[rpp] OFFSET $offset
"; 
```****

# ruby-on-rails - 如何在 Omni auth gem 中将路由从 oauth/authenticate 更改为 oauth/authorize？

> ID：10783454
> 
> 赞同：0
> 
> 时间：2012-05-28T10:55:15.503
> 
> 标签：ruby-on-rails, omniauth

我正在使用 Omni auth gem 将 twitter 提要加载到我的应用程序中。但是当我尝试加载直接消息时，它不会让应用程序直接发送消息。

我研究发现，在添加推特账号时，通常系统会带我们去

```
https://api.twitter.com/oauth/authenticate
```

但是我发现当在 Twitter 帐户添加过程中向 Twitter 发出的请求如下所示时，我的应用程序可以访问直接消息

```
https://api.twitter.com/oauth/authorize
```

我在哪里可以在 Omniauth gem 中配置它？请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:04:43.673

这可以通过`client_options: {authorize_path: '/oauth/authorize'}` 在 config/initializers/omniauth.rb 下添加 provider :twitter 来完成。

# c# - 如何使用 .NET 获取所有打开的 AutoCad 文档（图纸）

> ID：10783458
> 
> 赞同：0
> 
> 时间：2012-05-28T10:55:30.620
> 
> 标签：c#, vb.net, autocad, autodesk, objectarx

我正在使用 AutoCAD 2012 和 .NET API。有人可以帮我如何遍历所有打开文档的文档对象吗？我正在尝试执行以下代码之类的操作..我在 Autodesk 论坛上也有这个问题..但不确定它的活跃程度:)

```
public void GetDocNames()
        {
            DocumentCollection docs = Application.DocumentManager;

            for (int i = 0; i < docs.Count; i++)
            {
                AcadDocument doc = docs[i];
                Debug.Print(doc.Name);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T22:41:52.310

您已经标记了 C# 和 VB.NET。C#版本如下：

```
public void GetDocNames()
{
  DocumentCollection docs = Application.DocumentManager;

  foreach (Document doc in docs)
  {
    Application.ShowAlertDialog(doc.Name);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T23:02:47.063

VB.NET 版本：

```
Private Sub getAcadDocNames()
    'collection of all opened documents
    Dim AcadDocs As DocumentCollection = Autodesk.AutoCAD.ApplicationServices.Application.DocumentManager 

    For Each doc As Document In AcadDocs
        Debug.Print(doc.Name)
    Next doc
End Sub 
```

请注意，如果您还导入`System.Windows.Forms`了（也有`Application`命名空间），您可能希望完全限定 DocumentManager 属性的路径（就像我在这里所做的那样）。

# java - 通过 Stanford Parser 在类型化依赖项中使用 POS 标签

> ID：10783461
> 
> 赞同：0
> 
> 时间：2012-05-28T10:55:39.553
> 
> 标签：java, stanford-nlp

我有一组句子。对于它们中的每一个，我想获得一个“通用”类型的依赖关系图，其中每个单词都被相应的 POS 标签替换（除了动词和一些关键字，如*LOCATION*和*TARGET*）。

例如，从句子

```
take a left turn till you come to a LOCATION 
```

我想获得

```
amod(take,JJ)dobj(take,NN)mark(come,IN)nsubj(come,PP)prep_to(come,LOCATION) 
```

更简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:32:12.860

行。我通过一些树操作解决了这个问题。

```
public static void exploreTree(Tree t) {
    List<Tree> child = t.getChildrenAsList();
    Tree terminal;
    for (Tree c : child) {
        if (c.isPreTerminal()) {
            terminal = c.getChild(0);
            String t_value = terminal.value();
            String c_value = c.value();
            if (!c_value.startsWith("VB")) {
                if (!t_value.equals("LOCATION") && !t_value.equals("TARGET")) {
                    terminal.setValue(c.value());
                }
            }
            // test[1].setValue(test[0].value());
        } else
            exploreTree(c);
    }
} 
```

它根据我的要求更改斯坦福解析器树的内部数据。也许不是最优雅和最强大的解决方案，但有效。

# java - 如何在servlet和jsp中显示数据库中的记录

> ID：10783462
> 
> 赞同：-2
> 
> 时间：2012-05-28T10:55:42.657
> 
> 标签：java, servlets

我想获取mysql数据库表的记录，但是使用servlet类并通过jsp页面显示请任何人都可以帮助我。谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:02:34.033

为什么你在这个任务中同时使用 servlet 和 jsp，即使你可以只使用 jsp。你可以使用 jsp 标签。JSTL 也是处理数据库的好选择。在您的 jsp 文件中包含以下库。

```
<%@ taglib uri="http://java.sun.com/jstl/sql" prefix="sql" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:01:42.203

一个 JSP 页面也由 web 服务器在内部创建一个 Servlet 类

# javascript - JavaScript：检测 AJAX 请求

> ID：10783463
> 
> 赞同：41
> 
> 时间：2012-05-28T10:55:44.117
> 
> 标签：javascript, ajax, request, call

有没有办法用通用 JavaScript（不是框架）在网页上检测全局 AJAX 调用（特别是响应）？

我已经在 StackOverflow 上查看了“ [JavaScript 检测 AJAX 事件](https://stackoverflow.com/questions/3596583/javascript-detect-an-ajax-event)”问题，并尝试将已接受答案的代码修补到我的应用程序中，但没有成功。在此之前我从未对 AJAX 做过任何事情，所以我不知道如何修改它以使其正常工作。

我不需要任何花哨的东西，我只需要检测所有（实际上是具体的，但我必须先检测所有并从那里开始）AJAX 响应并将它们修补到 IF 语句中以供使用。所以，最终，我想要这样的东西：

```
if (ajax.response == "certainResponseType"){
    //Code
} 
```

， 例如。

**更新：** 似乎我应该澄清一下我不是在尝试发送请求 - 我正在开发一个内容脚本，我需要能够*检测*网页的 AJAX 请求（不是我自己的），所以我可以执行检测到响应时起作用。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-12-21T02:26:12.497

下面是一些代码（通过粘贴到 Chrome 31.0.1650.63 的控制台进行测试）用于捕获和记录或以其他方式处理 ajax 请求及其响应：

```
(function() {
    var proxied = window.XMLHttpRequest.prototype.send;
    window.XMLHttpRequest.prototype.send = function() {
        console.log( arguments );
        //Here is where you can add any code to process the request. 
        //If you want to pass the Ajax request object, pass the 'pointer' below
        var pointer = this
        var intervalId = window.setInterval(function(){
                if(pointer.readyState != 4){
                        return;
                }
                console.log( pointer.responseText );
                //Here is where you can add any code to process the response.
                //If you want to pass the Ajax request object, pass the 'pointer' below
                clearInterval(intervalId);

        }, 1);//I found a delay of 1 to be sufficient, modify it as you need.
        return proxied.apply(this, [].slice.call(arguments));
    };

})(); 
```

此代码通过接受的答案解决了上述问题：

> 请注意，如果您使用框架（如 jQuery），它可能不起作用，因为它们可能会在调用 send 后覆盖 onreadystatechange（我认为 jQuery 可以）。或者他们可以覆盖发送方法（但这不太可能）。所以这是一个部分的解决方案。

因为它不依赖未更改的“onreadystatechange”回调，而是监控“readyState”本身。

我从这里调整了答案：[https ://stackoverflow.com/a/7778218/1153227](https://stackoverflow.com/a/7778218/1153227)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-02-03T15:55:30.403

试试这个。检测 Ajax 响应，然后我添加了一个条件，使用 XMLHttpRequest 属性 readyState & status 来运行函数，如果响应状态 = OK

```
var oldXHR = window.XMLHttpRequest;

function newXHR() {
    var realXHR = new oldXHR();
    realXHR.addEventListener("readystatechange", function() {
        if(realXHR.readyState==4 && realXHR.status==200){
            afterAjaxComplete() //run your code here
        }
    }, false);
    return realXHR;
}
window.XMLHttpRequest = newXHR; 
```

修改自： [监控浏览器控制台中的所有 JavaScript 事件](https://stackoverflow.com/questions/3489433/monitor-all-javascript-events-in-the-browser-console)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-05-28T11:06:41.970

这可能有点棘手。这个怎么样？

```
var _send = XMLHttpRequest.prototype.send;
XMLHttpRequest.prototype.send = function() {

    /* Wrap onreadystaechange callback */
    var callback = this.onreadystatechange;
    this.onreadystatechange = function() {             
         if (this.readyState == 4) {
             /* We are in response; do something,
                like logging or anything you want */
         }
         callback.apply(this, arguments);
    }

    _send.apply(this, arguments);
} 
```

我没有测试它，但它看起来或多或少很好。

请注意，如果您使用框架（如 jQuery），它可能不起作用，因为它们可能会`onreadystatechange`在调用后覆盖`send`（我认为 jQuery 可以）。或者他们可以覆盖`send`方法（但这不太可能）。所以这是一个部分的解决方案。

**编辑：**如今（2018 年初）[，新的 fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)变得更加复杂。全局`fetch`函数也必须以类似的方式被覆盖。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-04-25T06:47:10.763

该问题的现代（截至 2021 年 4 月）答案是使用`PerformanceObserver`它可以让您同时观察`XMLHttpRequest`请求和`fetch()`请求：

*   [在 JavaScript 中检测网页上的 fetch API 请求](https://stackoverflow.com/questions/54820096/detect-fetch-api-request-on-web-page-in-javascript)
*   [检测来自原始 HTML 的 ajax 请求](https://stackoverflow.com/questions/45406906/detect-ajax-requests-from-raw-html)

```
<!-- Place this at the top of your page's <head>: -->
<script type="text/javascript">
var myRequestLog = []; // Using `var` (instead of `let` or `const`) so it creates an implicit property on the (global) `window` object so you can easily access this log from anywhere just by using `window.myRequestLog[...]`.
function onRequestsObserved( batch ) {
    myRequestLog.push( ...batch.getEntries() );
}
var requestObserver = new PerformanceObserver( onRequestsObserved );
requestObserver.observe( { type: 'resource' /*, buffered: true */ } );
</script> 
```

`window.addEventListenr('error', ... )`我在我的页面中使用上面的代码片段来记录请求，以便我可以在我的全局回调中将它们报告回母舰。

* * *

*   该`batch.getEntries()`函数返回一个 DOM 对象数组`PerformanceResourceTiming`（因为我们只在监听`type: 'resource'`，否则它将返回一个不同类型对象的数组）。
*   每个`PerformanceResourceTiming`对象都有有用的属性，例如：
    *   该`initiatorType`属性可以是：
        *   如果请求是由元素引起的，则为 HTML 元素名称（标签名称）：
            *   `'link'`- 请求来自`<link>`页面中的元素。
            *   `'script'`- 请求是加载一个`<script>`.
            *   `'img'`- 请求是加载一个`<img />`元素。
            *   ETC
        *   `'xmlhttprequest'`- 请求是由`XMLHttpRequest`调用引起的。
        *   `'fetch'`- 请求是由`fetch()`呼叫引起的。
    *   `name`- 资源/请求的 URI。（如果有重定向，我不确定这是原始请求 URI 还是最终请求 URI）。
    *   `startTime`:**注意：**这实际上是`PerformanceObserver.observe()`请求开始时被调用的时间。
    *   `duration`:**注意：**这实际上是`PerformanceObserver.observe()`请求完成后被调用的时间：*它不仅仅是请求的持续时间*。要获得“*真实*”持续时间，您需要从中`startTime`减去`duration`.
    *   `transferSize`：响应中的字节数。

# iphone - 如何检测 UIImageview 动画的方向？

> ID：10783470
> 
> 赞同：3
> 
> 时间：2012-05-28T10:56:10.693
> 
> 标签：iphone, objective-c, ios

检测uiimageview方向的最佳方法是什么？

我想检测 uiimageview 何时“下落” - 这是因为它遵循用于跳跃目的的弧形动画，我只想检测它何时“下落”并与地板相交，而不是何时跳跃并与地板相交。

我猜没有内置的方法可以做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:51:34.187

我发现最好的办法是画一条路径并测试它是否与任何上面的“地板”或平台发生碰撞。然后，如果它确实发生了碰撞，则绘制另一条路径，其终点与碰撞平台的 y 位置相匹配。

# mysql - 如何优化我的 MySQL 服务器？

> ID：10783472
> 
> 赞同：0
> 
> 时间：2012-05-28T10:56:12.807
> 
> 标签：mysql, phpmyadmin, typo3

我的 phpmyadmin 状态信息中有 3,066,691 个查询记录和一些红色数字：

*   慢查询 24
*   Innodb_buffer_pool_reads 2,2 M
*   Innodb_log_waits 8
*   Innodb_row_lock_time_avg 49
*   Innodb_row_lock_waits 1
*   Created_tmp_disk_tables 21

phpmyadmin 中也有绿色数字，但我不知道它们是什么意思？我使用 Typo3 和 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:30:37.653

[MySQL Tunin Primer Script](https://launchpad.net/mysql-tuning-primer)对我很有帮助。它提供了一些有用的提示，并显示了哪些值是好的，哪些值是坏的。对于 TYPO3，我猜，一些 slow_queries 没有问题，可能只发生在后端。

# algorithm - 有向无环图中的最小路径覆盖

> ID：10783473
> 
> 赞同：7
> 
> 时间：2012-05-28T10:56:17.533
> 
> 标签：algorithm, graph

我在这里要问的问题在堆栈溢出之前已经被问过了。但我无法正确理解**Skiminok**发布的解决方案。

这是[链接。](https://stackoverflow.com/questions/10303800/looking-for-algorithm)

我用给定的两个示例测试用例尝试了上面链接上发布的解决方案，但我无法得到正确的答案。

对于测试用例 1::

N=3 和 K=2

5 4 7

DAG 将是：

![样本测试用例 1 的有向无环图](../Images/d78a95d377caf0cd550f74aeac72dea4.png)

注意：我已经构建了上述 DAG 考虑：

设 pi 和 pj 是两个不同的问题。然后我们将画一条从 pi 到 pj 的有向边当且仅当 pj 可以在同一天连续地在 pi 之后直接求解。即，必须满足以下条件：

i < j，因为你应该更早地解决不太困难的问题。

|vi - vj| >= K（评级要求）。

然后我构建了二分图，考虑：

对于原始 DAG 的每条有向边 (u, v)，应该在二分图中添加一条无向边 (au, bv)，其中 {ai} 和 {bi} 是大小为 n 的两个部分。

![在此处输入图像描述](../Images/e43fcc2db8c4b5d940c38a0d72a3863d.png)

答案 = 上面二分图中的最大基数匹配。

上述二部图中的最大基数匹配 =1（绿色 egde）

但答案是2。

同样的示例测试用例 2：

5 1

5 3 4 5 6

![在此处输入图像描述](../Images/0e1ffab17cce6c45072d9ec9f0531a78.png)

![在此处输入图像描述](../Images/d9fd07ea5e26b1757dd50d53534b5c12.png)

上图中的最大基数是 MORE THAN ONE，但正确答案是 1。

我认为我没有正确实施它，请你告诉我在哪里犯了错误或者是否有任何其他方法

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:43:08.460

我自己找到了答案，第二天我发布了这个问题。

我的解决方案通过了所有测试用例。

我在最后一步犯了错误。实际上答案/解决方案是 SET B 中不包含最大二分匹配边缘的顶点总数。

例如示例测试用例 1::

最大匹配 M={(1A,3B)}。

最大匹配的边没有发生在两个顶点（顶点 1 和顶点 2）上。所以答案等于这样的顶点数 = 2

对于测试用例 2::

最大匹配 M={(1A,2B),(2A,3B),(3A,4B),(4A,5B)}。

没有最大匹配的边发生在一个顶点（顶点 1）上。所以答案等于 1

# extjs - ExtJS 将组件移动到另一个布局

> ID：10783478
> 
> 赞同：2
> 
> 时间：2012-05-28T10:56:39.323
> 
> 标签：extjs

我有一些 GridPanel。例如，我可以编写一个插件来创建带有 BorderLayout 的面板并将我的网格推送到该面板，区域 === 'center' 和 FormPanel 区域 === 'west'？换句话说，我想获取我的组件并将其完全移动到另一个组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:21:09.410

我相信您要求在渲染组件后移动它。

我建议为每个区域使用一些更基本的容器（或面板，如果你愿意）设置你的 BorderLayout。然后将您的网格和表单面板添加到*这些*容器中，而不是直接添加到 BorderLayout 面板。

那时，您可以简单地获取所需的任何组件并将 .add() 或 .insert() 放入其他容器。至少在 extjs 3.2.1 中， add() 和 insert() 都负责整个移动。不要删除（）它们。

# c++ - 一个对象可以释放它的内存吗？

> ID：10783479
> 
> 赞同：5
> 
> 时间：2012-05-28T10:56:40.510
> 
> 标签：c++, delete-operator

> **可能的重复：**
> [C++：删除这个？](https://stackoverflow.com/questions/3150942/c-delete-this)
> [面向对象自杀或删除此；](https://stackoverflow.com/questions/3959634/)

我正在通过阅读非常好的书 C++ Primer 来学习 C++，并且我正在学习 C++ 如何通过`delete`关键字来释放内存，就像 C 对`free`. Java 和 Pascal 没有这种显式释放内存的机制。如果程序运行很长时间并且需要的变量被破坏，则可能会导致程序错误，因此不应轻视。

简而言之，我想知道例如在 C++ 中让变量执行`this.delete()`和删除*自身*是否合法或可取。我们大多听说过在 C 和 C++ 中释放指针，这是通过 new`free`和`delete`关键字完成的。Pascal 也有指针，但 Java 没有。所以在Java中它不应该是不可能的，因为你没有明确地删除对象，C没有对象，所以即使技术上可行，它`struct`也不能`free`分配内存，因为C没有对象，Pascal也没有。

所以我想这让 C++ 成为我的问题，一个对象用类似的东西删除自己是否合法`this.delete()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T10:58:31.803

一个对象完全有可能做`delete this;`.

但是，这样做之后， using`this`是一种未定义的行为。

所以，如果你非常小心地在之后做，那么一个对象通过做“自杀”是可以的并且是合法的`delete this;`

但是，这确实不是一个好主意，尤其是因为这意味着您的类**只能由 new 实例化**，因为在 te 堆栈上的分配可能会导致析构函数被调用两次：通过 delete this 和脱离上下文时。

以下示例说明了为什么这不是一个好主意：

```
class A
{
public:
    ~A() { std::cout << "Destructor"; }
    void foo() { delete this; } 
};

int main()
{
    {
        A a;
        a.foo(); // OK, a is deleted
    } // Going out of context, the destructor is called again => undefined behavior
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T10:58:19.743

`this` **是**一个指针。正确的语法是

```
 delete this; 
```

是的，这是可能的，但它会使您的对象和指向您的对象的指针不可用。

请参阅[此](https://isocpp.org/wiki/faq/freestore-mgmt#delete-this)内容以供阅读。

在实践中，使用这种技术是一种代码味道，除非你完全确定你在做什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T10:59:05.517

> 我的问题是对象使用 this.delete() 之类的方法删除自己是否合法？

从技术上讲，对象执行是合法的`delete this`。[但是，常见问题解答中解释](http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.15)了许多非常重要的警告。

理解它`delete this`解决了一个非常狭窄的技术问题也很重要。它并没有真正解决有关内存管理和垃圾收集的任何大问题。一个值得进一步研究的方向是[在 C++ 中使用智能指针](https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T11:05:13.190

对象完全有可能释放自己的内存。然而，由于显而易见的原因，它很少使用。

最常见的用法是实现引用计数内存管理。当调用者调用`release()`并且引用计数达到零时，该对象被删除。由于这发生在成员变量内部，因此它使用`this`指针来删除实例（与在对象外部调用的方式非常相似`delete foo`）。例如：

```
int release()
{
    OSAtomicDecrement32(&m_refCount);
    if (m_refCount <= 0)
    {
        delete this;
    }
    return m_refCount;
} 
```

（请注意，您提到的语法无效 -`delete`是关键字，而不是方法，并且`this`是指针。）

不过，有几个注意事项需要牢记。一旦调用了这个删除，`this`指针就不再有效，任何数据成员也不再有效。从那时起，只能进行非实例引用（例如，对局部变量、静态方法和数据等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T10:59:45.313

尽管奇怪的一个用例是用户单击“确定”或其他任何内容的对话框，但此操作会导致对话框自行删除，但这是合法的。

当然`this`指针不再有效，所以你不应该尝试使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T11:11:09.163

对象删除其内存的另一种方法是使用称为 Resource Aquisition Is Initialisation`RAII`

使用此方法您不会`new`或`delete`对象。它的析构函数在离开其作用域时会自动被调用。

即您将`RAII`在如下函数中使用：

`void foo()`

`{`

```
 `Object a;`

  `int i = a.SomeMethod();`

  `// a's destructor automatically gets called when the function is out of scope` 
```

`}`

[延伸阅读](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization#C.2B.2B_example)

# python - 谷歌应用引擎跨组交易需要父祖先

> ID：10783483
> 
> 赞同：0
> 
> 时间：2012-05-28T10:56:51.587
> 
> 标签：python, google-app-engine, transactions

据我了解，@db.transactional(xg=True) 允许跨组进行事务，但是以下代码返回“事务中的查询必须有祖先”。

```
@db.transactional(xg=True)
def insertUserID(self,userName):
    user = User.gql("WHERE userName = :1", userName).get()
    highestUser = User.all().order('-userID').get()
    nextUserID = highestID + 1 
    user.userID = nextUserID
    user.put() 
```

尽管是跨组事务，您是否需要为每个实体传递密钥？你能帮忙修改这个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:49:03.257

XG 事务最多可应用于[25 个实体](https://cloud.google.com/appengine/docs/python/datastore/#Python_Cross_group_transactions)组。祖先查询将查询限制为单个实体组，您将能够在单个 XG 事务中在这 25 个实体组中进行查询。

没有父级的事务查询可能会包括应用程序中的所有实体组并锁定所有内容，因此您会收到一条错误消息。

在应用引擎中，通常会尝试避免单调增加的 id。自动分配的可能会像 101、10001、10002 等等。如果你知道你需要单调递增的 id 并且它会为你的性能工作，那么如何：

1.  具有 userId 的某种模型表示以启用 key_name 使用和直接查找

2.  查询事务外的userId，获取最高的候选id

3.  在事务中做 get_or_insert; 查找 UserId.get_by_key_name(candidateid+1)。如果已经存在并指向不同的用户，请使用 +2 重试，以此类推，直到找到一个免费的并创建它，同时更新用户的 userid 属性。

If the XG-transaction of updating UserId+User is too slow, perhaps create UserId+task in transaction (not XG), and let the executing task associate UserId and User afterwards. Or a single backend that can serialize UserId creation and perhaps allow put_async if you retry to avoid holes in the sequence and do something like 50 creations per second.

If it's possible to use userName as key_name you can do direct lookup instead of query and make things faster and cheaper.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T01:06:47.993

跨组事务允许您跨多个组执行事务，但它们不会取消对事务内部查询的禁止。您需要在事务之外执行查询，并将实体的 ID 传入（然后检查查询中指定的任何不变量是否仍然有效） - 或者，正如 Shay 建议的那样，使用 ID，因此您不必进行查询首先。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T05:46:42.590

每个数据存储实体都有一个键，一个键（其他数量）有一个 AppEngine 分配给它的数字 id**或**您可以给它的 key_name。

在您的情况下，您似乎可以使用数字 ID，在您对用户实体调用 put() 之后，您将拥有： user.key().id() （如果您使用 NDB，则为 user.key.id() ）这对于每个用户都是唯一的（只要所有用户都有相同的父级，在您的代码中为 None ）。

此 id 不是连续的，但保证是唯一的。

# facebook-opengraph - Facebook Open Graph : 将网站与 Facebook 页面关联

> ID：10783485
> 
> 赞同：3
> 
> 时间：2012-05-28T10:57:07.530
> 
> 标签：facebook-opengraph

我想在我的 Facebook 页面和我的网站之间建立关系。

我已经设置了它们，将 OG 标签添加到网站。但是，Facebook 页面和我的网站之间似乎没有任何联系。标签设置为我的`fb:admin`Facebook 用户 ID，但我想与我的 Facebook 页面关联。

是否可以 ？有没有我错过的 Open Graph 标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:22:02.880

不，这是不可能的。如Facebook 提供的[开发者路线图所示：](https://developers.facebook.com/roadmap/)

“2012 年 5 月 2 日 - 我们将取消使用页面 ID 声明域的功能。声明域的推荐选项是使用 App ID 或用户 ID，并且已声明的现有域将继续正常工作。”

# c++ - 是否可以将名称附加到 C++ 中的运行时类？

> ID：10783487
> 
> 赞同：0
> 
> 时间：2012-05-28T10:57:14.720
> 
> 标签：c++, typeid

我有一个类层次结构，基类具有打印类名的功能：

```
#include <iostream>
using namespace std;

class base
{
public:
  virtual void print_name() { cout << typeid(*this).name() << endl; };
};

class derived1 : public base { };

class derived2 : public base { };

int main ()
{
  base Base;
  Base.print_name();

  derived1 Derived1;
  Derived1.print_name();

  derived2 Derived2;
  Derived2.print_name();
} 
```

上面的输出是

```
class base
class derived1
class derived2 
```

实际上，这取决于平台。

是否有一种或多或少的标准方法可以为每个类“附加”一些唯一名称，因此它可以用于`printname()`使所有平台的输出相同（并且独立于对真实类名所做的任何更改）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:00:07.277

当然：

```
class base {
  public:
    virtual char const *name() const { return "base"; }
};

class derived1 : public base {
  public:
    virtual char const *name() const { return "derived1"; }
}; 
```

但是，如果您不在`name`一个类中覆盖，它的名称将是它的超类的名称。这可能是错误或功能，具体取决于您的用例。如果这是一个错误，那么您可以添加一些运行时检查以确保该方法被覆盖：

```
virtual char const *name() const {
    if (typeid(*this) != typeid(base))
        throw std::logic_error("name() not overridden");
    return "base";
} 
```

但是您必须在`name`必须覆盖的每个实现中重复此检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:48:14.730

您可以有效地使用`type_info`它。

`type_info`支持`before`符合弱顺序的方法，`std::map`只要提供用户提供的谓词，就可以在（例如）中使用它。

```
struct TypeInfoLess {
     bool operator()(std::type_info const* lhs, std::type_info const* rhs) const {
         return lhs->before(rhs);
     }
};

struct AdditionalTypeInfo {
    std::string name;
};

typedef std::map<std::type_info const*, AdditionalTypeInfo, TypeInfoLess> TypeInfoMap; 
```

然后，您可以添加/搜索类型：

```
template <typename T>
void add(TypeInfoMap& map, T const& t, AdditionalTypeInfo const& ati) {
    map[&typeid(t)] = ati;
}

template <typename T>
AdditionalTypeInfo const* find(TypeInfoMap const& map, T const& t) {
    TypeInfoMap::const_iterator it = map.find(&typeid(t));
    if (it == map.end()) { return 0; }
    return &it->second;
}

int main() {
    TypeInfoMap timap;

    add(timap, timap, { "TypeInfoMap" });

    if (AdditionalTypeInfo const* const ati = find(timap, timap)) {
        std::cout << ati->name << "\n";
    }
} 
```

*注意：然后您有责任将您可能想要的每种类型添加到地图中。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:46:10.813

您可以使用模板函数（或特征类）来获取名称：

```
template<typename T> const char * ClassName(T const * objPtr);

template<> const char * ClassName<derived1>(derived1 const *objPtr) { return "derived1"; }
template<> const char * ClassName<derived2>(derived2 const *objPtr) { return "derived2"; } 
```

（这里的函数参数仅用于模板参数匹配）。在调用代码时，您可以将指针转换为特定类并使用 ClassName

```
derived1 * pDerived = static_cast<derived1*>(pPointer);
cout << ClassName(pDerived); 
```

然而，这都是编译时的，您将需要一些机制（如 GUID）在运行时识别一个类（将其转换为正确的指针类型）。如果您的类没有并且您无法修改它们，那么我无法帮助您；（但是您可以使用特征技术来本地化与平台相关的类型选择代码。

# html - 应用表格单元格边框

> ID：10783491
> 
> 赞同：8
> 
> 时间：2012-05-28T10:57:36.233
> 
> 标签：html, css

我有一个带有“productsTable”类的 HTML 表格。我想给表格中的每个单元格一个边框。现在我在我的样式表中尝试了以下内容，但这两个都不起作用。我究竟做错了什么？谢谢你

```
td.productsTable
{
    border: 1px dotted #999999;
}

.productsTable td
{
    border: 1px dotted #999999;
} 
```

HTML：

```
<table class="productsTable" width="100%" height="100%" cellspacing="2px;">
<tr>
<td width="40%">We Offer:</td>
<td class="ephoneFree tableHeader" width="20%" align="center">e-phone FREE</td>
<td class="personal tableHeader" width="20%" align="center">Personal</td>
<td class="PBX tableHeader" width="20%" align="center">Pro PBX</td>
</tr>           
<tr>
<td width="40%">Pricing</td>
<td width="20%" align="center">FREE</td>
<td width="20%" align="center">£3 per month</td>
<td width="20%" align="center">From £5 per month</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T11:13:18.367

`td.productsTable` **不会工作**，因为你没有一个类`<td>`的元素。`productsTable`

但是，您的第二个 CSS 规则 ，`.productsTable td`这**将起作用**，因为您确实有`<td>`具有 class 的父元素的元素`productsTable`。

我对此做了一个快速的处理，你可以看到它正常工作：

```
td {
  border: 1px dotted #999;
}
```

```
<table width="100%" height="100%" cellspacing="2px;">
  <tr>
    <td width="40%">We Offer:</td>
    <td width="20%" align="center">e-phone FREE</td>
    <td width="20%" align="center">Personal</td>
    <td width="20%" align="center">Pro PBX</td>
  </tr>
  <tr>
    <td width="40%">Pricing</td>
    <td width="20%" align="center">FREE</td>
    <td width="20%" align="center">£3 per month</td>
    <td width="20%" align="center">From £5 per month</td>
  </tr>
</table>
```

如果这对您不起作用，则可能是您没有正确链接 CSS 文件，或者有另一个 CSS 规则覆盖了它。尝试[检查元素](http://www.threetipsaday.com/2008/12/debug-inspect-google-chrome-inspector/)以查看。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T11:23:08.530

> 我想给表格中的每个单元格一个边框。

我的理解是你想要这样的单元格边框：

![桌子](../Images/0fc23d734a4556edceaaad6be46f5872.png)

这是你想要的**[小提琴。](http://jsfiddle.net/95y95/1/)**

***使用以下 CSS：***

```
table.productsTable {
    border-width: 1px;
    border-spacing: 2px;
    border-style: outset;
    border-color: gray;
    border-collapse: separate;
    background-color: white;
}

table.productsTable td {
    border-width: 1px;
    padding: 1px;
    border-style: inset;
    border-color: gray;
    background-color: white;
    -moz-border-radius: ;
} 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:59:46.670

像这样写：

```
.products td
{
    border: 1px dotted #999999;
} 
```

**HTML**

```
<table class="products">
 <tr>
  <td></td>
</tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-08T15:28:29.543

下面的代码执行以下操作：- 1\. 为 td 提供单个边框 2\. 为表格提供单独的边框。

环境：- 适用于 FF 34.0。

未尝试使用 html6：- 要使用 html6 运行它，请尝试使用 html:x 例如。html:head, html:title 等

```
<!DOCTYPE html>
<html>
<head>
    <script>
    </script>
    <title>Welcome to the jungle</title>
    <style>
.table_main {
        border-top-style: ridge;
        border-bottom-style: ridge;
        border-left-style: ridge;
        border-right-style: ridge;
        border-color: red;
        border-width: 3px;
      }

.table_main td {
    background: #A38055;    
    border-right: solid 1px white ;
    border-bottom: 1px solid white;
    text-align: center;
}

.table_main th {
    background: #DCDCDC;
    border-right: solid 1px white ;
    border-bottom: 1px solid white;
    text-align: center;
}

  </style>
</head>
  <body>
    <h1>Welcome to the jungle</h1>
    <table class="table_main" width="400" align="center" border="0" cellspacing="0" cellpadding="0">
     <thead>       <th>THead1</th> <th>THead2</th> <th>THead3</th>
     </thead> 
      <tbody>
        <tr> <td>A</td> <td>B</td> <td>C</td> </tr>
        <tr> <td>X</td> <td>Y</td> <td>Z</td> </tr>
        <tr> <td>Xena</td> <td>Yoda</td> <td>Zohan</td> </tr>
      </tbody>
    </table>

  </body>
</html> 
```

# ios - NSURLRequest：如何处理重定向的帖子？

> ID：10783499
> 
> 赞同：11
> 
> 时间：2012-05-28T10:57:57.187
> 
> 标签：ios, redirect, nsurlrequest

我对 NSURLRequest（和伴奏）实现进行了尝试和测试，这对于给定 URL 的 GET 和 POST 非常有效。

但是，我现在想在不更改应用程序使用的 URL 的情况下移动 URL 的目标，因此我打算通过我的 DNS 提供商使用 webhop 重定向。

这适用于 GET 请求，但 POST 只是挂起......没有收到连接响应。

处理重定向的相关 iOS 方法是，

```
-(NSURLRequest *)connection:(NSURLConnection *)connection
    willSendRequest:(NSURLRequest *)request
    redirectResponse:(NSURLResponse *)redirectResponse 
```

根据 Apple 的文档（[处理重定向](https://web.archive.org/web/20130430152517/https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/RequestChanges.html)），

*如果委托未实现 connection:willSendRequest:redirectResponse:，则允许所有规范更改和服务器重定向。*

好吧，这不是我的经验，因为不使用这种方法对我不起作用。该请求只是挂起而没有响应。

Apple 还建议了 willSendRequest 的实现（请参阅上面链接的 Apple 文档），这对我也不起作用。我看到了调用，但结果请求只是挂起。

我当前的 willSendRequest 实现如下（见下文）。这遵循重定向，但处理请求就像它是一个 GET，而不是一个 POST。

我认为问题在于重定向丢失了HTTP请求是POST的事实（可能还有更多问题，例如也将请求正文转发？）。

我不确定我应该在这里做什么。因此，任何有关如何正确处理接收重定向的 POST 的建议都将不胜感激。谢谢。

```
-(NSURLRequest *)connection:(NSURLConnection *)connection
   willSendRequest:(NSURLRequest *)request
  redirectResponse:(NSURLResponse *)redirectResponse
{

    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) redirectResponse;

    int statusCode = [httpResponse statusCode];

    NSLog (@"HTTP status %d", statusCode);

    // http statuscodes between 300 & 400 is a redirect ...
    if (httpResponse && statusCode >= 300 && statusCode < 400)
    {
        NSLog(@"willSendRequest (from %@ to %@)", redirectResponse.URL, request.URL);
    }

    if (redirectResponse)
    {
        NSMutableURLRequest *newRequest = [request mutableCopy]; // original request

       [newRequest setURL: [request URL]];

       NSLog (@"redirected");

       return newRequest;
    }
    else
    {
        NSLog (@"original");

       return request;
    }
} 
```

**附加信息 1**

willSendRequest 收到的 HTTP 代码是 301 - 'Moved Permanently。

使用allHTTPHeaderFields提取头部字段，看到他原来提交的请求有头部

```
HTTP header {
  "Content-Length" = 244;
  "Content-Type" = "application/json";
} 
```

...并且复制/重定向的请求具有标头，

```
Redirect HTTP header {
  Accept = "*/*";
  "Accept-Encoding" = "gzip, deflate";
  "Accept-Language" = "en-us";
  "Content-Type" = "application/json";
} 
```

...它看起来不像原始请求的副本，甚至不是超集。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T15:37:10.760

保留您的原始请求，然后提供您自己的请求`willSendRequest:redirectResponse:`来自定义**该**请求，而不是使用 Apple 为您提供的请求。

```
- (NSURLRequest *)connection: (NSURLConnection *)connection
             willSendRequest: (NSURLRequest *)request
            redirectResponse: (NSURLResponse *)redirectResponse;
{
    if (redirectResponse) {
        // The request you initialized the connection with should be kept as
        // _originalRequest.
        // Instead of trying to merge the pieces of _originalRequest into Cocoa
        // touch's proposed redirect request, we make a mutable copy of the
        // original request, change the URL to match that of the proposed
        // request, and return it as the request to use.
        //
        NSMutableURLRequest *r = [_originalRequest mutableCopy];
        [r setURL: [request URL]];
        return r;
    } else {
        return request;
    }
} 
```

通过这样做，您明确地忽略了 HTTP 规范的某些方面：重定向通常应转换为 GET 请求（取决于 HTTP 状态代码）。但实际上，当从 iOS 应用程序 POST 时，这种行为会更好地为您服务。

也可以看看：

*   [iOS 开发者库，URL 加载系统编程指南：处理重定向和其他请求更改](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/RequestChanges.html#//apple_ref/doc/uid/TP40009506-SW1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:24:19.987

处理 3xx 类状态码的 HTTP 规范对除 GET 和 HEAD 之外的协议非常不友好。它期望在重定向的中间步骤进行某种用户交互，这导致了大量不兼容的客户端和服务器实现，以及 Web 服务开发人员的严重头痛。

从 iOS NSURL 的角度来看，您可能想要验证的一件事是原始 POST 正文是否包含在新的重定向请求中。

根据您对我的原始答案的评论以及对您问题的修改，您尝试访问的 URL 似乎已永久更新（301 状态代码）。在这种情况下，您实际上可以通过使用新 URL 来完全避免重定向。

# android - 我如何在应用程序（Titanium-Android）中将选定的人删除到联系人列表？

> ID：10783501
> 
> 赞同：10
> 
> 时间：2012-05-28T10:58:01.737
> 
> 标签：android, titanium

我使用 getAllPerson() 函数并在 TableView 中显示我想要删除选定的人的所有人。但 removePerson() 仅支持 iphone，我如何使用 Android 删除。任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:11:43.530

我不知道您如何实现应该删除所选人员的编辑操作，但是，我认为，由于`removePerson`尚未为 Android 实现（可能永远不会），您必须使用意图。

为此，这里有两个来源，您可以在其中找到您必须知道的所有信息：

*   [Appcelerator 的意图 CookBook 信息](http://developer.appcelerator.com/blog/2011/10/forging-titanium-episode-9-android-intent-cookbook.html)。
*   [在上面的演示文稿中使用了这个来源](https://github.com/appcelerator-developer-relations/Forging-Titanium/blob/master/ep-009/IntentCookbook/Resources/app.js)。

通过单击要删除的人，您必须获取他的联系人 ID。

然后，这是我完全不确定的地方：

```
intent: (function() {
    var contactId = '1'; // Your contact ID !!!
    if (contacts[0]) {
        contactId = parseInt(contacts[0].id) + '';
    }
    var contactUrl = 'content://com.android.contacts/raw_contacts/' + contactId;
    var intent = Ti.Android.createIntent({
        action: Ti.Android.ACTION_DELETE,
        data: contactUrl
    });
    return intent;
})() 
```

# c# - C# 获取字符串中多次出现的字符串的某个部分

> ID：10783502
> 
> 赞同：1
> 
> 时间：2012-05-28T10:58:02.970
> 
> 标签：c#, string, webclient

所以我试图从论坛中获取成员个人资料链接并将它们显示在控制台应用程序中。我想要做的是从网页中获取所有链接并将它们打印出来。

当前我正在获取这样的页面源：

```
String source = WebClient.DownloadString("URL"); 
```

我想要做的是遍历该字符串并找到这样的每个字符串：

```
<h3 class='ipsType_subtitle'>
         <strong><a href='http://www.website.org/community/user/8416-unreal/' title='View Profile'>!Unreal</a></strong>
</h3> 
```

然后，一旦我得到那部分，我想像这样获得网址：

**http://www.website.org/community/user/8416-unreal/**

当前这是我尝试过的代码，它可以工作。但只抓取其中一个链接：

```
 WebClient c = new WebClient();
    String members = c.DownloadString("http://www.powerbot.org/community/members/");
    int times = Regex.Matches(members, "<h3 class='ipsType_subtitle'>").Count;
    Console.WriteLine(times.ToString());

    for (int i = 1; i < times; i++)
    {
        try
        {
            int start = members.IndexOf("<h3 class='ipsType_subtitle'>");
            members = members.Substring(start, 500);
            String[] next = members.ToString().Split(new string[] { "a href='" }, StringSplitOptions.None);
            String[] link = next[1].Split(' ');
            Console.WriteLine(link[0].Replace("'", ""));
        }
        catch(Exception e) { Console.WriteLine("Failed: " + e.ToString()); }
    }

    Console.Read(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:14:58.473

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(members);

var links = doc.DocumentNode
    .Descendants("h3")
    .Where(h => h.Attributes["class"] != null && h.Attributes["class"].Value == "ipsType_subtitle")
    .Select(h => h.Descendants("a").First().Attributes["href"].Value)
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:24:08.877

您可以在下面找到您的代码，我对其进行了一些更改，现在应该可以了。但是你肯定没有为这个任务选择最好的方法。

```
WebClient c = new WebClient();
String members = c.DownloadString("http://www.powerbot.org/community/members/");
int times = Regex.Matches(members, "<h3 class='ipsType_subtitle'>").Count;
Console.WriteLine(times.ToString());

var member = string.Empty;//extracted value

for (int i = 1; i < times; i++)
{
    try
    {
        int start = members.IndexOf("<h3 class='ipsType_subtitle'>");
        member = members.Substring(start, 500);

        members = members.Remove(start, 500);

        String[] next = member.ToString().Split(new string[] { "a href='" }, StringSplitOptions.None);
        String[] link = next[1].Split(' ');
        Console.WriteLine(link[0].Replace("'", ""));
    }
    catch(Exception e) { Console.WriteLine("Failed: " + e.ToString()); }
}

Console.Read(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:02:52.890

传递 HTML 的最正确方法是使用 HTML 解析器，例如 [HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。您**无法**以其他方式正确传递`HTML`页面。

这就是“平衡育儿”概念的证明。您**不能**使用正则表达式解析`((x))`字符串，因为您需要记住*解析树*，但正则表达式是无状态构造。

它们还不错，但不适合这些类型的解析。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T11:01:17.750

更好的方法是使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)

# android - 单击按钮时android videoview全屏

> ID：10783505
> 
> 赞同：1
> 
> 时间：2012-05-28T10:58:14.783
> 
> 标签：android, fullscreen, android-videoview

我想在单击按钮时全屏显示视频。然后在全屏运行时返回旧尺寸的视频！

我怎样才能做到这一点？

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/linearLayout1"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/Web"
        android:layout_width="fill_parent"
        android:layout_height="150dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="2dp"
        android:background="@drawable/screen_background" />

    <VideoView
        android:id="@+id/videoView1"
        android:layout_width="264dp"
        android:layout_height="128dp"
        android:layout_marginTop="3dp" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:57:32.880

您将在 relativelayout 中声明 videoview 如下，我认为您的问题将得到解决。

```
<VideoView android:id="@+id/myvideoview"
             android:layout_width="fill_parent"
             android:layout_alignParentRight="true"
             android:layout_alignParentLeft="true"
             android:layout_alignParentTop="true"
             android:layout_alignParentBottom="true"
             android:layout_height="fill_parent">
    </VideoView> 
```

将该活动的主题设置为...

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

# asp.net - ASP:Net LinkBut ton 控件回发问题

> ID：10783506
> 
> 赞同：0
> 
> 时间：2012-05-28T10:58:15.173
> 
> 标签：asp.net, asp.net-controls

我的**profile.aspx**页面中有一个 asp.net linkBut​​ton（或 imageButton）控件。我在下面的代码中检查 Request.Querystring("id") 。

> http://localhost:42932/profile.aspx?id=1

当我第一次加载个人资料页面时，它不会发回。没关系！。**当我使用带有地址的 imageButton 控件**转到另一个用户配置文件（同一页面，只是查询字符串不同）时；

> http://localhost:42932/profile.aspx?id=2

它被发回。我不希望它被发回。但是，如果我使用常规的 html 输入元素访问此页面，例如

> a href = "http://localhost:42932/profile.aspx?id=2"

它没有发回。所以我希望图像按钮表现得像一个 html 输入元素。

这是我的图像按钮；

ASPX：

```
<asp:ImageButton ID="imgProfile" ImageUrl="images/site/profile1.png" runat="server"/> 
```

。CS

```
imgProfile.PostBackUrl = "profile.aspx?id=" + Session["userID"]; 
```

编辑：

```
 if (!IsPostBack)
    {
        Session["order"] = 0;
    } 
```

此控件在页面加载中。所以它应该是带有我上面提到的状态的 !postback 。因为当 Session["order"] = 0 时所有其他功能都在工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:05:26.887

`PostBackUrl`我建议`Response.Redirect()`在按钮单击事件处理程序中使用，而不是指定：

```
public void imgProfile_Click(object sender, eventArgs e){
   Response.Redirect("profile.aspx?id=" + Session["userID"]);
} 
```

或者，只需使用`Hyperlink`控件并在以下`NavigateUrl`期间设置属性`Page_Load`：

```
<asp:HyperLink ID="imgProfile" runat="server"><img src="images/site/profile1.png" /></asp:Hyperlink>

imgProfile.NavigateUrl = "profile.aspx?id=" + Session["userID"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:02:13.097

使用`OnCLientClick`代替`OnClick`，以便您只运行客户端代码。然后，请说明您`return false;`

IE

```
<asp:ImageButton ID="imgProfile" ImageUrl="images/site/profile1.png" runat="server" OnClientClick="return false;" /> 
```

但是，既然可以使用普通的`<img ..`html 控件来完成，为什么还要使用服务器控件呢？

# ruby-on-rails-3 - 活动记录样本如何工作？

> ID：10783507
> 
> 赞同：0
> 
> 时间：2012-05-28T10:58:17.793
> 
> 标签：ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我碰巧看到了一条线

```
Item.where(conditions).limit(10).order('created_at desc') 
```

我想知道它类似于

```
Item.where(conditions).order('created_at desc').limit(10) 
```

根据 Rails 3 的新更改，活动记录似乎没问题

但是，如果我们愿意，可以抽样 10 件商品，*由 created_at* 订购。这是我的问题#1

问题2是'limit'在查询中有效，'sample'没有..对吗？，它似乎被照顾到了ruby array sample..对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:24:04.637

我建议您查看 railscast 的[第 239 集活动关系演练](http://railscasts.com/episodes/239-activerecord-relation-walkthrough)以了解它是如何工作的。

基本上，内部工作由[Arel gem](https://github.com/rails/arel)完成，activerecord 对象在您进行链接时仅维护 arel 对象。到最后，它让我们`arel`生成 sql 语句，然后`find_by_sql`用生成的 sql 语句调用。

问题是无论你`order`之前调用`limit`还是反过来调用，生成的sql语句都是一样的。一切都由数据库后端执行，activerecord 只是简单地解析结果并建立对象。

# ruby-on-rails - 如何区分两个 Time.now.utc.iso8601？

> ID：10783514
> 
> 赞同：0
> 
> 时间：2012-05-28T10:58:40.867
> 
> 标签：ruby-on-rails, ruby, string, datetime, iso8601

我有 ：

last_transition_date = Time.now.utc.iso8601()

……

x = Time.now.utc.iso8601() - last_transition_date

但它给出了错误：

“2012-05-28T10:50:13Z”的“未定义方法‘-’：字符串’

解决方案？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:03:31.757

你应该做

```
last_transition_date = Time.now.utc
x = Time.now.utc - last_transition_date 
```

然后你会得到浮动结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:00:27.543

您正试图从另一个字符串中减去一个字符串。字符串没有`-`方法。

# ruby-on-rails - 访问视图中的集合元素时“为 nil 调用 id”

> ID：10783518
> 
> 赞同：2
> 
> 时间：2012-05-28T10:58:48.600
> 
> 标签：ruby-on-rails, actionview

我发生了一些非常奇怪的事情。在一个视图中，我正在填充这样的集合：

```
<% foo_options = Bar.find(f.object.bar_id).supplier_contracts.collect(&:foo).uniq.compact : [] %> 
```

这是 ActiveRecord 模型的集合。

**编辑：**这发生在一个表单中，所以`f.object`这里指的是另一个 ActiveRecord 模型实例。

如果我尝试在下一行像这样取消引用集合的元素：

```
<%= foo_options.first.inspect %> 
```

检查有效的模型对象。现在，如果我将其更改为

```
<%= foo_options.first.id %> 
```

我收到一个异常“为 nil 调用 id，错误地为 4”。如果我将其更改为

```
<%= foo_options.first.try :id %> 
```

一切正常，它显示了对象的 ID。为什么会发生异常？

# multithreading - 如何查看aix上正在运行的进程的所有线程堆栈？

> ID：10783521
> 
> 赞同：2
> 
> 时间：2012-05-28T10:59:06.937
> 
> 标签：multithreading, process, stack, state, aix

如何查看 AIX 机器上正在运行的进程的所有线程的堆栈和状态。linux上的命令或工具（如**pstack**）也应该有帮助..

我试过**procstack**，但没有帮助。它没有向我显示任何堆栈。虽然没有错误..

有任何想法吗..？

procstack 是否需要与使用 debig 信息编译的进程关联的所有可执行文件和库？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T16:54:31.713

这是我使用 dbx 编写的脚本，用于打印给定进程 ID 的所有线程的堆栈。希望这会有所帮助，在 aix 上对我来说就像一个魅力

```
if [ $# -ne 1 ]
then
   echo "Usage dbxstack <processid>";
   exit;
fi

rm -rf printthreads.fordbx

echo "thread" >> printthreads.fordbx
echo "detach" >> printthreads.fordbx
echo "quit" >> printthreads.fordbx

dbx -a $1 -c printthreads.fordbx > threads.tempdbx 2>/dev/null
awk '$1 ~ /\$t/ { print $1 }' threads.tempdbx | sed s/\$t//g | sed s/\>//g > threadsids.tempdbx

rm -rf printthreads.fordbx
for i in `cat threadsids.tempdbx`
do
   echo "print \"------------------------\"" >> printthreads.fordbx
   echo "thread current $i" >> printthreads.fordbx
   echo "where" >> printthreads.fordbx
   echo "print \"---------tid $i---------\"" >> printthreads.fordbx
   i=$(( $i+1 ));
   echo $i;
done
echo "detach" >> printthreads.fordbx
echo "quit" >> printthreads.fordbx

dbx -a $1 -c printthreads.fordbx > $1.stacktrace 2> $1.stacktracerr

rm -rf threads.tempdbx threadsids.tempdbx printthreads.fordbx 
```

# java - Java ResourceBundle 值中的前导空格

> ID：10783523
> 
> 赞同：32
> 
> 时间：2012-05-28T10:59:24.067
> 
> 标签：java, whitespace, resourcebundle

[我正在尝试Oracle 文档](http://docs.oracle.com/javase/tutorial/i18n/resbundle/propfile.html)中给出的示例。java 文件在[这里](http://docs.oracle.com/javase/tutorial/i18n/resbundle/examples/PropertiesDemo.java)，如该页面所示。现在有了这个 java 文件，我`LabelsBundle.properties`在同一个目录中保存了一个文件。

```
# This is the default LabelsBundle.properties file
s1 = computer
s2 = disk
s3 = monitor
s4 = keyboard 
```

似乎在读取值时不会忽略尾随空格，而忽略前导空格。

因此，如果我希望前导空格在那里，我该怎么办？

换句话说，我需要做什么才能读取`s1`as的值

```
 computer 
```

代替

```
computer 
```

?

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-28T11:02:27.793

Unicode 转义序列`\u0020`应该这样做，因为属性解析器应该将其识别为实际值，并且 Java 字符串应该解释`\u0020`为空间的 Unicode 代码点。

或者，IIRC，您可以使用这样的反斜杠转义空格`\ my value`。也适用于钥匙。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-28T11:03:16.203

你可以用反冲来逃避空间：

```
s1 =\ computer 
```

# android - 尝试在另一个类中添加图像视图时，Android 应用程序崩溃

> ID：10783525
> 
> 赞同：1
> 
> 时间：2012-05-28T10:59:30.150
> 
> 标签：android, android-imageview

我最近开始在 Android 中编程，但遇到了一个小问题。
我想做的是：我有 NewsActivity 和 NewsRows.class （在同一个包中）。
所以新闻活动只是创建一个新的 NewsRows 对象并告诉它用新的行填充 TableLayout。
只要我尝试从资源中添加图像，它就可以正常工作......该应用程序一直在崩溃。
调试器告诉我它找不到资源，但我不知道为什么！

我的代码在这里：
News Acitivty

```
package de.myapp.app.activites.news;

import de.myapp.app.R;
import android.app.Activity;
import android.os.Bundle;

public class News extends Activity {
    NewsRows rowClass = new NewsRows();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.news);

        NewsRows.createNewsEntries(this);
    }

} 
```

NewsRows.class

```
package de.myapp.app.activites.news;

import de.myapp.app.R;
import android.app.Activity;
import android.widget.ImageView;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class NewsRows {
static TextView         title;
static TableRow         tRow;
static TableLayout      tLayout;
public NewsRows() {

}

public static void createNewsEntries(Activity contextActivity) {

    ImageView image = new ImageView(contextActivity);
    image.setBackgroundColor(R.drawable.myimage);
    tLayout     = (TableLayout) contextActivity.findViewById(R.id.NewsTable);

    for(int a = 0; a < 100; a++) {
        tRow    = new TableRow(contextActivity);
        title   = new TextView(contextActivity);
        //tRow.addView(image);
        title.setText("This is a test.");
        tRow.addView(title);
        tLayout.addView(tRow);
    }
}

} 
```

编辑：这条线

```
image.setBackgroundColor(R.drawable.myimage);<br /> 
```

实际上应该是：

```
image.setImageResource(R.drawable.myimage); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:02:49.523

您正在尝试将图像设置为背景颜色：更改此：

```
 image.setBackgroundColor(R.drawable.myimage); 
```

对此：

```
 image.setBackgroundResource(R.drawable.myimage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:14:36.103

您不能将可绘制对象设置为 ImageView 的背景颜色，这就是为什么您的 logcat 上有资源未找到异常！

```
 image.setBackgroundColor(R.drawable.myimage); 
```

将其更改为：

```
image.setBackgroundResource(R.drawable.myimage); 
```

也尝试改变这个

```
public static void createNewsEntries(Activity contextActivity) 
```

和

```
public static void createNewsEntries(Context contextActivity) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:31:20.040

有趣的事实：

```
 TableLayout tLayout = (TableLayout) findViewById(R.id.NewsTable);
    TableRow tRow = new TableRow(this);
    ImageView image = new ImageView(this);
    image.setImageResource(R.drawable.myimage);
    tRow.addView(image);
    tLayout.addView(tRow); 
```

如果我把这段代码放在 News.Activity 中，它就可以工作......

# java - 带有移动对象的 Java KeyListener

> ID：10783537
> 
> 赞同：1
> 
> 时间：2012-05-28T11:00:12.240
> 
> 标签：java, swing, awt, keylistener

我正在尝试将 Java KeyListener 合并到我的移动对象中，左/右箭头影响 x 轴 (xSpeed) 坐标，上/下箭头影响 y 轴 (ySpeed)。由于某种原因，我只是无法连接对象和 KeyListener。请帮帮我？谢谢！

```
 import java.awt.*;
import java.awt.geom.*;
import java.awt.event.*;

public class Action
{
    private static final int GRAVITY = 1;
    private int ballDegradation = 8;
    private Ellipse2D.Double circle;
    private Color color;
    private int diameter;
    private int xPosition;
    private int yPosition;
    private final int groundPosition; 
    private final int topPosition;
    private final int leftSidePosition;
    private final int rightSidePosition;
    private Canvas canvas;
    private int ySpeed = -1;  
    private int xSpeed = 8;
    public Action(int xPos, int yPos, int ballDiameter, Color ballColor,
    int groundPos, int topPos, int leftSidePos, int rightSidePos, Canvas drawingCanvas)
    {
        xPosition = xPos;
        yPosition = yPos;
        color = ballColor;
        diameter = ballDiameter;
        groundPosition = groundPos;
        topPosition = topPos;
        leftSidePosition = leftSidePos;
        rightSidePosition = rightSidePos;
        canvas = drawingCanvas;
    }
    public void draw()
    {
        canvas.setForegroundColor(color);
        canvas.fillCircle(xPosition, yPosition, diameter);
    }
    public void erase()
    {
        canvas.eraseCircle(xPosition, yPosition, diameter);
    }    
    public void move()
    {
        erase();
        ySpeed += GRAVITY;
        yPosition += ySpeed;
        xPosition += xSpeed;
        if(yPosition >= (groundPosition - diameter) && ySpeed > 0) 
        {
            yPosition = (int)(groundPosition - diameter);
            ySpeed = -ySpeed + ballDegradation; 
        }
        if(yPosition <= topPosition && ySpeed < 0)
        {
            yPosition = (int)topPosition;
            ySpeed = -ySpeed + ballDegradation;
        }
        if(xPosition <= leftSidePosition && xSpeed <0)
        {
            xPosition = (int)leftSidePosition;
            xSpeed = -xSpeed + ballDegradation;
        }
        if(xPosition >= (rightSidePosition - diameter) && xSpeed > 0) 
        {
            xPosition = (int)(rightSidePosition - diameter);
            xSpeed = -xSpeed + ballDegradation;
        }
        draw();
    }
        public void keyPressed(KeyEvent e) {
            int keyCode = e.getKeyCode();
            switch( keyCode ) { 
        case KeyEvent.VK_UP:
            ySpeed = -ySpeed --;
            break;
        case KeyEvent.VK_DOWN:
            ySpeed = -ySpeed ++;
            break;
        case KeyEvent.VK_LEFT:
            xSpeed = xSpeed --;
            break;
        case KeyEvent.VK_RIGHT :
            xSpeed = xSpeed ++;
            break;
     }
    } 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:09:51.800

*   不要为 API、方法或 ei 使用保留的 Java 名称，`Action`可能是`MyAction`

*   不要使用 AWT Canvas（如果你有非常重要的原因，OpenXxx、CAD、CAM...），请改用 JPanel 或 JComponent

*   （没有人知道您的其余代码）不要将 AWT 组件与 Swing JComponent 混合

*   如果您将使用 JPanel 或 JComponent，则使用[KeyBindings](https://stackoverflow.com/a/7940227/714968) 而不是 KeyListener

*   否则你必须为 Canvas 设置焦点，并且在对焦点进行任何更改之后，你必须将焦点设置为画布，这是 KeyListener 的问题

# ruby - 在Ruby中获取整数数组的最小公倍数

> ID：10783538
> 
> 赞同：20
> 
> 时间：2012-05-28T11:00:17.903
> 
> 标签：ruby

我知道，在 Ruby 中，您可以使用该[`Integer#lcm`](http://www.ruby-doc.org/core-1.9.3/Integer.html#method-i-lcm)方法获得两个数字的最小公倍数。例如：

```
10.lcm(15)
# => 30 
```

是否有一种有效的（或内置于核心或标准库）的方法来获得给定数组中所有整数的最小公倍数？例如：

```
[5, 3, 10, 2, 20].lcm
# => 60 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-28T11:03:27.040

任何需要两个操作数的操作都可以通过[折叠](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)来迭代地应用于集合：[Enumerable#inject/reduce](https://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-reduce)。为了覆盖空的情况，将操作的[标识元素](https://en.wikipedia.org/wiki/Identity_element#Examples)作为第一个参数传递，这是`1`最小公分母。

```
[5, 3, 10, 2, 20].reduce(1) { |acc, n| acc.lcm(n) } # => 60 
```

也可以写成：

```
[5, 3, 10, 2, 20].reduce(1, :lcm) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-13T21:10:04.127

除了 tokland 的回答，如果你真的想要一个`#lcm`方法作用于一个*整数数组*，你可以在 Array 类中添加一个实例方法。

```
class Array
  def lcm
    self.reduce(1, :lcm)
  end
end

puts 10.lcm(15)
# => 30
puts [5,3,10,2,20].lcm
# => 60 
```

（这种做法称为[Monkey patching](https://en.wikipedia.org/wiki/Monkey_patch)，因为您在运行时扩展一个类。但有些人确实不赞成这种做法。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T19:42:23.333

```
[5,3,10,2,20].reduce(&:lcm) 
```

# android - 如何使用 Mono for Android 将 iOS MonoTouch 应用程序转换为 Android 版本？

> ID：10783544
> 
> 赞同：1
> 
> 时间：2012-05-28T11:01:04.017
> 
> 标签：android, iphone, ios, xamarin.ios

我们听说了在 iOS 和 Android 平台上使用 MonoTouch 和 Mono for Android 在 C# 中开发的可能性

[http://xamarin.com/monoforandroid](http://xamarin.com/monoforandroid)

我有一个*iOS MonoTouch*应用程序，我想将它转换*为 Android*版本的 Mono。一个简单的例子，比如下面的一段代码，如何转化为 Android 的 Mono？

```
using System;
using System.Collections.Generic;
using System.Linq;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace HelloWorld_iPhone
{
    public class Application
    {
        static void Main (string[] args)
        {
            UIApplication.Main (args, null, "AppDelegate");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:29:55.413

Mono for Android中没有使用`static void Main()`方法。您基本上有一个启动您的应用程序的“主要”活动。

这是一个例子：

```
[Activity (Label="My App", MainLauncher=true)]
public class MyActivity : Activity
{

} 
```

然后生成适当的 Android 清单文件以启动应用程序。[见这里](http://docs.xamarin.com/android/advanced_topics/working_with_androidmanifest.xml)。

我只会使用`File->New Project->Mono for Android App`和使用模板生成的内容。

# air - 自动调整新 AIR 窗口内容的大小

> ID：10783546
> 
> 赞同：0
> 
> 时间：2012-05-28T11:01:10.700
> 
> 标签：air, window, adobe, autoresize

当我手动拉伸窗口边界或最大化/恢复它时， AIR`spark.components.WindowedApplication`会自动调整其内容的大小。但是`spark.components.Window`类不提供这种“开箱即用”的功能：当我拉伸/最大化/恢复窗口时，当相应的`spark.components.Window.nativeWindow`实例确实调整其边界时，窗口的内容不会改变它们的大小。我的 AIR 应用程序需要打开多个窗口和可调整大小的窗口。如何让它们自动调整其内容的大小以匹配 nativeWindow 边界？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:02:30.277

假设您的意思是`spark.components.Window`，这是基于 skinnablecontainer 的，因此不应该有任何东西阻止您使用基于百分比的布局/约束。

```
<s:Window xmlns:fx="http://ns.adobe.com/mxml/2009" 
          xmlns:s="library://ns.adobe.com/flex/spark" 
          xmlns:mx="library://ns.adobe.com/flex/mx" 
          width="100%" height="100%"> 
```

其他手动处理此类事情的方法包括监听来自舞台的 ResizeEvent。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:55:11.847

解决方案是监听来自 NativeWindow 的 RESIZE 事件，然后手动设置`stageWidth`和`stageHeight`在 Window 的`stage`实例上。请参阅下面的代码。

```
override public function open(openWindowActive:Boolean=true):void {
    super.open(openWindowActive);

    if (nativeWindow) {
        chromeWidth = nativeWindow.width - this.width;
        chromeHeight = nativeWindow.height - this.height;
        nativeWindow.addEventListener(NativeWindowBoundsEvent.RESIZE, onNativeResize);
    }
}

private function onNativeResize(event:NativeWindowBoundsEvent):void {
    stage.stageWidth = event.afterBounds.width - chromeWidth;
    stage.stageHeight = event.afterBounds.height - chromeHeight;
} 
```

# mysql - 使用 Hibernate 和 mysql 的连接过多

> ID：10783547
> 
> 赞同：6
> 
> 时间：2012-05-28T11:01:13.177
> 
> 标签：mysql, hibernate

我正在将 Hibernate 3 和 mysql sever 5.5 用于带有 spring 3.0 的 myweb 应用程序

由于连接太多，我收到异常......

我在其中创建会话的 java 文件如下：

```
public class DBConnection {

    static{

    }

    public Session getSession(){

         Session session = null;
         SessionFactory sessionFactory= null;
         sessionFactory = new Configuration().configure().buildSessionFactory();
        session = sessionFactory.openSession();
        return session;

    }

} 
```

我在需要会话的地方调用这个方法

作为

```
Session session=new DBConnection().getSession(); 
```

之后

```
transaction.commit(); 
```

我通过使用关闭会话

```
session.close(); 
```

请帮我解决问题......

我的 hibernate.cfg.xml 是：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/dbname</property>
<property name="hibernate.connection.username">root</property>

  <property name="hibernate.connection.password">lax</property>
  <property name="hibernate.connection.pool_size">100</property>
  <property name="show_sql">true</property>
  <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
  <property name="hibernate.hbm2ddl.auto">update</property>
  <property name=""></property>

  <property name="hibernate.connection.release_mode">on_close</property>

</session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-28T13:52:00.853

这是因为您使用的是在构建 SessionFactory 时立即创建的连接池，但只有在打开 Session 时才会获取连接。现在，您正在关闭会话，因为连接被释放，但没有关闭并被池阻止。现在，您再次创建一个 SessionFactory，从而创建一个新池，然后获取一个会话，从而创建一个新连接等等......最终将达到允许的最大连接数。

您需要做的是使用一个连接池（使用一个 SessionFactory）并从同一个池中获取和释放连接。

```
public class DBConnection {

      private static SessionFactory factory;
      static {
            factory = new Configuration().configure().buildSessionFactory();
      }

      public Session getSession() {
            return factory.openSession();
      }

      public void doWork() {
           Session session = getSession();
           // do work.
           session.close();
      }

     // Call this during shutdown
     public static void close() {
          factory.close();
     }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T11:17:37.640

`SessionFactory`每次需要 a 时都创建新的`Session`，不要关闭它们。

通常您只需要在应用程序启动期间创建一次会话工厂，并在关闭期间将其关闭。例如，如下所示：

```
public class DBConnection {
    private static SessionFactory factory;
    static {
        factory = new Configuration().configure().buildSessionFactory();
    }

    public Session getSession() {
        return factory.openSession();
    }

    // Call this during shutdown
    public static void close() {
        factory.close();
    }
} 
```

还要看看[上下文会话模式](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/architecture.html#architecture-current-session)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:06:35.783

我用过

```
Session session = SessionFactoryUtils.getSession(this.sessionFactory,
                true); 
```

获得会话。在 DAO 层之上，带有注释的事务（@Transactional）用于添加、编辑或删除。我们的应用程序使用 shiro 进行身份验证和授权。在每个页面访问中，它至少创建 5 个连接。所以后续请求不断增加mysql连接。感谢@Venu，我发现

```
show variables like "max_connections"; 
```

显示可用的默认最大连接数。最初（我猜）它被设置为 151。这个数字很快就会用完，因为另一个变量“innodb_open_files”被设置为 300。凭直觉我可以说如果一个表达到 300 的最大连接它只会去清理（就像java中的垃圾收集）。

有人会想，如果我们将“max_connections”的值增加到 300，它可以解决这个错误，但正如我之前所说，“innodb_open_files”在一个表达到该限制之前不会进行清理。在我们的例子中，经常调用的用户表将达到清理发生的限制。这意味着，您无法事先知道“max_connections”的完美数字是多少。

在 mysql 配置文件“/etc/mysql/my.cnf”中，max_connections 设置为

```
max_connections        = 1000 
```

我没有改变

“innodb_open_files”的值，默认为“300”

```
mysql> show variables like "innodb_open_files"; 
```

在执行程序期间，您可以使用

```
mysql> show processlist; 
```

找出有多少连接是打开的。我猜所有处于睡眠状态的进程都可以在下一个清理周期中被删除（但这只是我的猜测）。

要模拟超过 1000 个用户，在您的 Web 项目中执行一些 url，您可以使用 jmeter 之类的软件并将线程（用户）数设置为 1000。使用更多用户还取决于您计算机中的可用 RAM。我能够模拟 3000 多个连接以 1 秒的间隔发送请求。[roseindia](http://www.roseindia.net/jmeter/)上列出了有关如何执行此操作的良好且足够的教程

现在我的查询。我没有在任何地方关闭会话。我猜@Transaction 是为此目的而创建的（mysql 证明了这一点，因为一旦达到限制，所有这些连接都会被清除）。由于分离对象的合并问题，我不得不使用 OpenSessionInViewFilter。OpenSessionInViewFilter （可以是 OpenSessionInViewInterceptor ）打开会话的时间稍长一些，以便合并发生，这可能是 mysql 中保持打开这么多连接的原因（不清楚）。由于它适用于这么多用户，这似乎是一个很好的解决方案，但是是否有更好的解决方案可以使其在 mysql 的默认最大连接大小下工作。即151个连接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-30T15:05:31.910

我在使用 Hibernate mysql conenctions 时遇到了同样的问题以下两件事帮助解决了我的连接问题

```
import javax.inject.Singleton;

@Singleton
public class DBConnection {
private static SessionFactory factory;
static public Session getSession() {
    if (factory == null) {
        System.out.println("--------New connection----");

        factory = new Configuration().configure("hibernate.cfg.xml")
                .addAnnotatedClass(SomeClass.class)
                .buildSessionFactory();
    }
    //System.out.println("--------old connection----");

    return factory.openSession();
}

    // Call this during shutdown
    public static void close() {
        factory.close();
    }
} 
```

*创建一个用于获取 DBConnection 的单例类*

*查询完成后不要忘记执行**session.close()***

同样在“hibernate.cfg.xml”中添加这一行

`<hibernate-configuration> <session-factory> .... <property name="connection.pool_size">100</property> .... </session-factory> </hibernate-configuration>`

在下面

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-28T11:06:01.303

> ## JAVA问题
> 
> ### 请检查这个答案：[https ://stackoverflow.com/a/10785770/598424](https://stackoverflow.com/a/10785770/598424)

**MYSQL 问题**

您需要以超级用户身份登录。然后执行此代码：

```
SET GLOBAL MAX_CONNECTIONS = 200; 
```

但是，这只持续到 MYSQL 服务器重新启动。如果您想永久更改它，可以在 MYSQLD 部分下添加以下内容。

```
MAX_CONNECTIONS = 500 
```

或者

如果您有太多的进程在数据库服务器上徘徊，那么您可能会达到一个限制，并且不允许启动新的进程。

要查看是否是这种情况，请通过键入以下命令从 MySQL Monitor 提示符查看您的进程：

```
show processlist; 
```

然后你会看到挥之不去的过程。每个都有一个 ID，您可以通过键入以下命令在 MySQL Monitor 中按进程 ID 杀死它们：

```
 kill 2309344; 
```

# iphone - iphone+延迟加载无法显示下载的图片

> ID：10783548
> 
> 赞同：0
> 
> 时间：2012-05-28T11:01:17.600
> 
> 标签：iphone, objective-c, ios, lazy-loading

我正在实现一个延迟加载的示例代码。我有一个数组，其中包含 10url 的图像：-//自定义表格视图单元格的外观。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    iconDownloader = [imageDownloadsInProgress objectForKey:indexPath];

    if (!iconDownloader.ImageDispaly)
    {
        if (Tble.dragging == NO && Tble.decelerating == NO)
        {
            [self startIconDownload:[ArrayImage objectAtIndex:indexPath.row] forIndexPath:indexPath];
        }

        //cell.imgView.image = [UIImage imageNamed:@"event_image.png"];
        cell.imageView.image=[UIImage imageNamed:@"default-image.png"];
        NSLog(@"image not download");
    }
    else
    {
        //cell.imgView.image=[aTweet objectForKey:@"image"];
        cell.imageView.image=iconDownloader.ImageDispaly.image;

    } 

    return cell;
}

#pragma mark -
#pragma mark Table cell image support
- (void)startIconDownload:(NSString *)str forIndexPath:(NSIndexPath *)indexPath
{
    //[imageDownloadsInProgress retain];
    iconDownloader = [imageDownloadsInProgress objectForKey:indexPath];
    if (iconDownloader == nil) 
    {
        iconDownloader = [[IconDownloader alloc] init];
       // iconDownloader.appRecord = aTweet;
        iconDownloader.imageurlstring=[ArrayImage objectAtIndex:indexPath.row];
        iconDownloader.indexPathInTableView = indexPath;
        iconDownloader.delegate = self;
        [imageDownloadsInProgress setObject:iconDownloader forKey:indexPath];
        [iconDownloader startDownload];
        [imageDownloadsInProgress retain];
        [iconDownloader release];   
    }
}

// this method is used in case the user scrolled into a set of cells that don't have their app icons yet
- (void)loadImagesForOnscreenRows
{
    if ([ArrayImage count] > 0)
    {
        NSArray *visiblePaths = [Tble indexPathsForVisibleRows];
        for (NSIndexPath *indexPath in visiblePaths)
        {
            iconDownloader =[imageDownloadsInProgress objectForKey:indexPath];

            if (!iconDownloader.ImageDispaly) // avoid the app icon download if the app already has an icon
            {
                [self startIconDownload:[ArrayImage objectAtIndex:indexPath.row] forIndexPath:indexPath];
            }
        }
    }
}

- (void)appImageDidLoad:(NSIndexPath *)indexPath
{
    iconDownloader =[imageDownloadsInProgress objectForKey:indexPath];
    if (iconDownloader != nil)
    {

        UIImageView *image=[[UIImageView alloc] initWithFrame:CGRectMake(10,5,60,60)];
        UITableViewCell *cell = [Tble cellForRowAtIndexPath:iconDownloader.indexPathInTableView];
        // [cell.btnImage setBackgroundImage:[iconDownloader.appRecord valueForKey:@"image"] forState:UIControlStateNormal];
        image.image=iconDownloader.ImageDispaly.image;
        cell.imageView.image=image.image;

        NSLog(@"%@ ======%@",cell.imageView.image,image.image);

    }

} 
```

这就是我在控制台上得到的 NSLog(@"%@ ======%@",cell.imageView.image,image.image); 在执行应用程序时

```
2012-05-28 16:41:44.998 Lazyloading[97195:207] <UIImage: 0x4b56300> ======<UIImage: 0x4b56300>
2012-05-28 16:41:44.999 Lazyloading[97195:207] <UIImage: 0x4e24f00> ======<UIImage: 0x4e24f00>
2012-05-28 16:41:45.000 Lazyloading[97195:207] <UIImage: 0x4b55df0> ======<UIImage: 0x4b55df0>
2012-05-28 16:41:45.001 Lazyloading[97195:207] <UIImage: 0x4b406e0> ======<UIImage: 0x4b406e0>
2012-05-28 16:41:45.260 Lazyloading[97195:207] <UIImage: 0x4e2f9f0> ======<UIImage: 0x4e2f9f0>
2012-05-28 16:41:45.263 Lazyloading[97195:207] <UIImage: 0x4e0a2e0> ======<UIImage: 0x4e0a2e0>
2012-05-28 16:41:45.294 Lazyloading[97195:207] <UIImage: 0x4b40180> ======<UIImage: 0x4b40180> 
```

但是图像没有显示在tableview中..任何人都可以帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:09:49.667

尝试调用：

```
[cell setNeedsDisplay]; 
```

您的 NSLog 行在哪里：

```
NSLog(@"%@ ======%@",cell.imageView.image,image.image); 
```

# ruby-on-rails-3 - 使用回形针和延迟作业将图像后台上传到 S3

> ID：10783550
> 
> 赞同：2
> 
> 时间：2012-05-28T11:01:19.460
> 
> 标签：ruby-on-rails-3, paperclip, delayed-job

我正在使用 Paperclip 为支持图像上传的移动应用程序构建 API。回形针设置了 S3 存储并且工作正常。

我想使用延迟作业在后台从服务器上传到 S3（该应用程序将托管在 Heroku 上）。

尝试诸如@user.delay.photo = File.open(...) 之类的东西，结果是延迟作业的错误

```
UPDATE "delayed_jobs" SET "last_error" = '{uninitialized stream 
```

如何进行后台上传？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:32:55.060

问题是 IO 对象不能被编组并轻松检索回来。

使用`.delay`方法，它尝试将对象转储到数据库记录中，并在处理作业时将其拉回。这样做，使唱片又大又脆。

如果您在工作中有很多事情要做，最好使用[自定义工作。](https://github.com/collectiveidea/delayed_job#custom-jobs)

```
class UploadJob < Struct.new(:user_id)
  def perform
    user = User.find(user_id)
    user.photo = File.open(.....)
  end
end

Delayed::Job.enqueue UploadJob.new(@user.id) 
```

您可以通过将图像写入项目中的 tmp 目录并从作业中引用来自己完成。最后在工作完成后进行清理。

或者，您可以试试这个 gem：[delayed_pa​​perclip](https://github.com/jstorimer/delayed_paperclip)，它更方便。

# java - 在 Android 应用中使用金钱

> ID：10783552
> 
> 赞同：1
> 
> 时间：2012-05-28T11:01:29.380
> 
> 标签：java, android

您好，我的应用程序正在使用金钱。我应该使用什么结构以及如何使用？

我的意思是从网络服务我得到十进制数字价格。我不拿这笔钱做任何操作，不计算。我可以把它保存在字符串中，到时候把这个价格转给银行？什么都不会发生。我可以这样失去一些数字吗？

有时我需要使用 Intent 和附加功能来支付这笔钱。或者我应该使用其他结构？我感谢你们的帮助。

所以给我你的想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:04:52.113

在 Java 和数据库中处理货币的一种可靠方法是将金额乘以 100 并使用整数进行运算。这样您就不会在各种浮点转换中损失美分。当然，当您需要向第三方支付金额时，您需要除以 100。

# jquery - 加载时Jquery Dropdownlist空白第一行

> ID：10783556
> 
> 赞同：0
> 
> 时间：2012-05-28T11:01:45.877
> 
> 标签：jquery, jquery-mobile, drop-down-menu

当我用纯 html 加载我的下拉列表时，未打开的下拉列表显示第一个选项的文本值。

但是，如果我使用 html 或 appendTo 加载，列表会填充，但未打开的列表没有显示任何值，它只是空白。

我可以看到，当我添加这两个基本要素时，我的问题就出现了： [http](http://code.jquery.com/mobile/1.0rc2/jquery.mobile.structure-1.0rc2.min.css) ://code.jquery.com/mobile/1.0rc2/jquery.mobile.structure-1.0rc2.min.css http://code.jquery .com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.js

我在这里设置了一个小提琴：http: [//jsfiddle.net/vauneen/VyfXa/](http://jsfiddle.net/vauneen/VyfXa/)

任何人都可以请帮助我吗？

提前致谢， Vauneen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:10:57.993

试试这个

```
$("#selecttwo").append($("<option selected=\"selected\" value=\"1\">1</option><option value=\"2\">2</option>"));
$("#selecttwo").append($("("<option  value=\"111\">111</option>1"));

$("#selecttwo").trigger('create'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:11:45.907

这工作..检查这个

html正文，

```
<div id="testDiv">
</div> 
```

脚本，

```
var html = '<select   name="selecttwo" id="selecttwo" >';
html += '<option value="1"> 1 </option>';
html += '<option value="2"> 2 </option>';

$('#testDiv').append($(html));
$('#testDiv').trigger('create'); 
```

# xstream - 使用 Xstream 反序列化

> ID：10783563
> 
> 赞同：1
> 
> 时间：2012-05-28T11:02:31.443
> 
> 标签：xstream

下面是我的java类

```
public class CRM
{

    private String phone[];
    private String email;
    public String[] getPhone()
    {
            return phone;
    }

    public void setPhone(String[] phone)
    {
            this.phone = phone;
    }

    public String getEmail()
    {
            return email;
    }

    public void setEmail(String email)
    {
            this.email = email;
    } 
```

}

下面是我的 XML。

```
<Crm>
    <Phone>123456789</Phone>
    <email>a@a.com</email>
</Crm> 
```

以下是我得到的堆栈跟踪：

```
Exception in thread "main" com.thoughtworks.xstream.converters.ConversionException:     array element type mismatch : array element type mismatch
---- Debugging information ----
message             : array element type mismatch
cause-exception     : java.lang.IllegalArgumentException
cause-message       : array element type mismatch
class               : [Ljava.lang.String;
required-type       : [Ljava.lang.String;
converter-type      : com.thoughtworks.xstream.converters.collections.ArrayConverter
path                : /crm/phone
line number         : 4
class[1]            : com.CRM
converter-type[1]   : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
version             : null
-------------------------------
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:79)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:50)
at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:134)
at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32)
at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1052)
at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1036)
at com.thoughtworks.xstream.XStream.fromXML(XStream.java:912)
at com.thoughtworks.xstream.XStream.fromXML(XStream.java:903)
at com.Parser.main(Parser.java:29)
Caused by: java.lang.IllegalArgumentException: array element type mismatch
at java.lang.reflect.Array.set(Native Method)
at com.thoughtworks.xstream.converters.collections.ArrayConverter.unmarshal(ArrayConverter.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
... 16 more 
```

我是否遗漏了什么或做一些根本错误的事情？

我正在使用 xstream-1.4.2.jar 和 Java 1.6。

我将一直尝试将 xmls 转换为 java 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:18:49.667

在没有看到用于实例化 XStream 的代码的情况下，我不能 100% 确定，但问题似乎是因为在 XML 中，您提供了一个字符串，而 xstream 需要一个字符串数组。

一个简单的解决方法是将 xml 文件更改为以下行：

```
<Crm>
    <phone>
        <string>123456789</string>
    </phone>
    <email>a@a.com</email>
 </Crm> 
```

另一种选择是调整 xstream 并定义一个[隐式数组](http://x-stream.github.io/alias-tutorial.html#implicit)，并为该类定义一个[别名](http://x-stream.github.io/alias-tutorial.html#class_aliasing)`String`：

```
XStream xstream = new XStream();
xstream.alias("Crm", CRM.class);
xstream.addImplicitArray(CRM.class, "phone");
xstream.alias("phone", String.class); 
```

这将能够将以下 XML 解析为 CRM 实例：

```
<Crm>
    <phone>12345</phone>
    <phone>123456</phone>
    <phone>12345678</phone>
    <email>a@a.com</email>
</Crm> 
```

# css - 使用 bg 图像将图像定位在 div 后面

> ID：10783566
> 
> 赞同：0
> 
> 时间：2012-05-28T11:02:35.903
> 
> 标签：css, html, positioning, z-index, css-position

有人可以解释为什么我的菜单后面没有竖线吗？我已经尝试使用 z-indexing 进行绝对和相对定位，但没有效果。有任何想法吗？直播：[测试](http://www.blackflow7.nazwa.pl/test2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:14:20.580

删除正文**背景图像**并交给`.top`班级

# javascript - Jquery在设置宽度上为下一个div设置动画

> ID：10783567
> 
> 赞同：0
> 
> 时间：2012-05-28T11:02:37.510
> 
> 标签：javascript, jquery, jquery-animate, toggle

我问了一个类似的问题，这让我得到了这个答案，但是当试图将其移至可用标记时，我很幸运。

本质上，我有 4 个 div x 3 个 div 的行，当它们被单击时，我需要以下 div 来扩展网格中的所有其他 div 并在需要时切换。我试过使用动画和切换无济于事。此处使用表格的一个示例[http://jsfiddle.net/gGc5K/](http://jsfiddle.net/gGc5K/)。

如果可能，我需要使用 nexr 方法以相同的方式（通过切换关闭）工作以下标记。

谢谢

```
 <!--div in the grid--><div class="gridBox" id="one"></div>
    <div class="pop" id="bigOne">Content here and a toggle link</div><!--This div needs to expand over the full grid-->

 <!--div in the grid--><div class="gridBox" id="two"></div>
    <div class="pop" id="bigTwo">Content here and a toggle link</div><!--This div needs to expand over the full grid--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:19:06.767

```
var top = 0,
    left = 0;

$("td").click(function() {
    var ref = $(this);
    if ($(this).hasClass('currentAnimated')) {
        $(this).css({
            "z-index": 1
        }).animate({
            top: top,
            left: left,
            width: "40px",
            height: "39px"
        }, "4s", function() {
            ref.removeClass('currentAnimated');
        })
    } else {
        top = $(this).position().top;
        left = $(this).position().left;
        $(this).css({
            "z-index": 1
        }).animate({
            top: 0,
            left: 0,
            width: "120px",
            height: "120px"
        }, "4s", function() {
            ref.addClass('currentAnimated')
        });
    }
}); 
```

**[演示](http://jsfiddle.net/gGc5K/4/)**

# .net - WCF 返回错误“net.pipe 没有端点侦听....”

> ID：10783572
> 
> 赞同：2
> 
> 时间：2012-05-28T11:03:15.233
> 
> 标签：.net, wcf, iis, named-pipes, was

出于某种原因，我无法让我的服务的 Net.Pipe 端点 (EP) 正常工作。

这是托管在 IIS7 中的 .Net 4.0 WCF 服务。

有两个错误...

*   首先，EP 不会提供元数据。
*   其次，EP 将无法实际工作 - 我正在通过作为 VS2010 一部分的 WCF 测试客户端对其进行测试。

我认为两者实际上都与同一个问题有关。

收到的实际错误是...

`There was no endpoint listening at net.pipe://[machinename].[domainname]/Services/TestService.svc that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.`

我注意到的第一件事是，无论我在基地址中如何称呼我的管道，它都会重命名为 [machinename].[domainname]，这看起来很奇怪。这在输出的服务元数据中很明显。但是，如果我在测试客户端中使用我的管道名称或这个重命名的名称，则两者都不起作用。

我还在 Windows 功能中启用了 WAS，为 IIS 中的所有协议设置了站点绑定，并且还在 IIS 的“启用的协议”框中输入了协议的名称（http、net.tcp、net.pipe）。我还检查了 Windows 服务中是否启动了“Net.Pipe 侦听器适配器”。

我的 http 和 net.tcp EP 都可以正常工作并返回元数据。

下面列出了我的配置 - 有没有人知道是什么阻止了这个 EP 的工作？我很确定它很简单！

```
 <system.serviceModel>
    <behaviors>
      <!-- EP Behaviors -->
      <endpointBehaviors>
        <behavior name="PayloadMessageInspector">
          <MessageHeaderBehavior />
          <MessagePayloadBehavior />
        </behavior>
      </endpointBehaviors>
      <!-- Service Behaviors -->
      <serviceBehaviors>
        <behavior name="GenericServiceBehavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" policyVersion="Policy15"  />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <!-- Bindings Section -->
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <bindings>
      <!-- Basic Http Binding -->
      <basicHttpBinding>
        <binding maxReceivedMessageSize="10485760" maxBufferSize="10485760" maxBufferPoolSize="10485760">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </basicHttpBinding>
      <!-- Net TCP Binding -->
      <netTcpBinding>
        <binding maxReceivedMessageSize="10485760" maxBufferSize="10485760" maxBufferPoolSize="10485760" />         
      </netTcpBinding>
      <!-- Net Pipe Binding -->
      <netNamedPipeBinding>
        <binding maxReceivedMessageSize="10485760" maxBufferSize="10485760" maxBufferPoolSize="10485760" />
      </netNamedPipeBinding>      
    </bindings>
    <!-- Services Section -->
    <services>      
      <!-- Membership Service -->
      <service name="TestService" behaviorConfiguration="GenericServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost/Services/TestService.svc" />
            <add baseAddress="net.tcp://localhost/Services/TestService.svc"/>
            <add baseAddress="net.pipe://Dev/Services/TestService.svc"/>
          </baseAddresses>
        </host>
        <!-- HTTP -->
        <endpoint 
          address="" 
          binding="basicHttpBinding" 
          contract="ITestService" name="TestServiceBasicHttp" behaviorConfiguration="PayloadMessageInspector" />
        <!-- NetTCP -->
        <endpoint
          address=""
          binding="netTcpBinding"
          contract="ITestService" name="TestServiceNetTcp" behaviorConfiguration="PayloadMessageInspector" />
        <!-- NetPipe -->
        <endpoint
          address=""
          binding="netNamedPipeBinding"
          contract="ITestService" name="TestServiceNetPipe" behaviorConfiguration="PayloadMessageInspector" />
        <!-- Mex (Net.Tcp / Net.Pipe ) -->
        <endpoint name="TestServiceNetTcpMex" address="mex" binding="mexTcpBinding" contract="IMetadataExchange" />
        <endpoint name="TestServiceNetPipeMex" address="mex" binding="mexNamedPipeBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <!-- Extensions -->
    <extensions>
      <behaviorExtensions>
        <add name="MessageHeaderBehavior" type="ServiceMessageHeaderBehavior, TestService.Logging" />
        <add name="MessagePayloadBehavior" type="ServiceMessagePayloadBehavior, TestService.Logging" />
      </behaviorExtensions>
    </extensions>   
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:14:22.043

在我添加以下 mex 端点后，WCF 测试客户端能够看到我的命名管道端点：

通过查看测试客户端生成的配置，我发现我的客户端的端点地址错误。这最终为我工作......

```
net.pipe://localhost/{webapproot}/{path}/ServiceName.svc/{relativeaddress} 
```

我希望这可以帮助别人。

# ios - 在导航栏中嵌入 CGRect

> ID：10783576
> 
> 赞同：1
> 
> 时间：2012-05-28T11:03:31.900
> 
> 标签：ios, uiview, uinavigationbar, cgrect

是否可以像这个截图一样将 CGRect 嵌入到导航栏中：[这里](http://i200.photobucket.com/albums/aa42/mininukinfuts/IMG_0005.png)

我已经这样做了：

```
UIView *aView = [[UIView alloc]initWithFrame:CGRectMake(10, 10, 10, 10)];
[self.view addSubview:aView];
UILabel *title = [[UILabel alloc] initWithFrame:CGRectMake(100, -15, 150, 10)]; 
```

使用负数，它实际上允许我将标签放置在与导航栏相同的空间中，但它会隐藏在它后面。有没有办法让我把标签放在前面（更改 z-index？）？或者有没有办法在导航栏中嵌入标签？

我试过使用这段代码，但它不会影响标签：

```
[self.view bringSubviewToFront:aView]; 
```

感谢 EmptyStack 的回答：

添加此代码：

```
self.navigationItem.titleView = aView;
 [aView addSubview:title]; 
```

允许在导航栏中嵌入标题（或更多）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:07:14.220

我猜你想要这个。

```
self.navigationItem.titleView = aView; 
```

# javascript - 在jquery中获取点击的来源？

> ID：10783577
> 
> 赞同：0
> 
> 时间：2012-05-28T11:03:42.857
> 
> 标签：javascript, jquery

```
var currentImageBox;    
$('.newImage').bind('click', function() {

        currentImageBox = this;
        currentImageBox.unbind('click');
    }); 
```

我试图将 currentImageBox 设置为单击的 div（页面上的许多 div 具有 newImage 类）。但无济于事，我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:07:19.913

代码是正确的，`this`是点击的元素。但是要使用`unbind`，您需要[用 jQuery 包装元素，](http://jsfiddle.net/X47TN/1/)因为`this`（因此`currentImageBox`）是 DOM 元素而不是 jQuery 对象。

```
$(currentImageBox).unbind('click'); 
```

# jquery - 为什么我的 jQuery 变量是空的？

> ID：10783580
> 
> 赞同：0
> 
> 时间：2012-05-28T11:03:51.757
> 
> 标签：jquery, variables, scoping

我是 jQuery 新手，遇到了一个问题，对于大多数前端专家来说，这可能很容易发现。

我创建了以下脚本

```
$(document).ready(function() {
    $("#facet_properties input[type='checkbox']").each(function() {
        $(this).click(function() {
            var queryString = getQueryString();
            $('body').load(window.location.pathname.concat(queryString));
        })
    });
});

function getQueryString() {
    var queryString = "";
    var queryStringBegun = false;
    $("#facet_properties input[type='checkbox']").each(function() {
        if ($(this).is(':checked')) {
            var checkboxFullName = $(this).attr('name');
            var checkboxName = checkboxFullName.substr(checkboxFullName.lastIndexOf('_') + 1);
            var concatenationCharacter = '&';
            if (!queryStringBegun) {
                concatenationCharacter = '?';
            }
            queryString.concat(concatenationCharacter).concat(checkboxName);
            queryStringBegun = true;
        }
    });

    return queryString;
} 
```

我试图在 getQueryString 方法中创建一个查询字符串变量，但不知何故 queryString 保持为空。选中复选框时，我看到语句 queryString.concat(concatenationCharacter).concat(checkboxName); 已达到，我看到 'contenationCharacter' 和 'checkboxName' 具有正确的值。那么为什么我的函数返回“”？

这可能是一个变量范围问题或什么的。我猜这很简单。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:10:37.493

`concat()`不会改变原始字符串。您必须将返回值分配回变量：`queryString = queryString.concat(concatenationCharacter).concat(checkboxName);`

但是，使用`concat()`有点矫枉过正：您可以简单地使用`+`运算符连接字符串：

```
queryString += concatenationCharacter + checkboxName; 
```

与问题无关，但您可以通过将`.is(':checked')`检查从函数移动到选择器来缩短代码：

```
$("#facet_properties input[type='checkbox']:checked").each(function() {
    ... 
```

您也不需要将点击事件单独附加到每个元素。您可以再次使用选择器。在事件中使用变量也有点不必要（除非您在实际应用程序中有更多使用它）。

```
$(document).ready(function() {
    $("#facet_properties input[type='checkbox']").click(function() {
        $('body').load(window.location.pathname + getQueryString() );
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:21:10.593

concat() 返回一个值....

收集该值...行`queryString.concat(concatenationCharacter).concat(checkboxName);`

应该是这样的

```
queryString = queryString.concat(concatenationCharacter).concat(checkboxName); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T11:12:50.870

我还没有测试过，但我想我会做类似的事情

```
$(document).ready(function() {
    $("#facet_properties input[type='checkbox']").each(function() {
        $(this).click(function() {
            var checkboxFullName = $(this).attr('name');
            var checkboxName = checkboxFullName.substr(checkboxFullName.lastIndexOf('_') + 1);
            var concatenationCharacter = '&';
            if (!queryStringBegun) {
                concatenationCharacter = '?';
            }
            var queryString.concat(concatenationCharacter).concat(checkboxName);
            $('body').load(window.location.pathname.concat(queryString));
        })
    });
}); 
```

正如我所说，我没有测试过

# php - PHP：在界面中设置私有，受保护，公共？

> ID：10783582
> 
> 赞同：7
> 
> 时间：2012-05-28T11:03:54.110
> 
> 标签：php, interface, coding-style

当我浏览 GitHub 时，大多数项目都以这种方式在接口中定义方法：

```
interface ExampleInterface
{
    function getId();
} 
```

我现在的问题是为什么在接口中定义方法可见性是不好的风格：

```
interface ExampleInterface
{
    public function getId();
} 
```

它使接口更加严格，但这不是接口的用途吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T11:05:22.330

接口中的私有函数有什么意义？声明`public`是多余的。

来自 TFM：

`All methods declared in an interface must be public, this is the nature of an interface.`

[http://php.net/manual/en/language.oop5.interfaces.php](http://php.net/manual/en/language.oop5.interfaces.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T11:07:41.113

这是因为接口是您对外部世界的某些功能的承诺。在上面的示例中，每当一个类实现一个接口时，它保证该类将提供一个调用`getId`外部世界的方法，而不管它是如何实现的。

因此，如果您创建一个 private `promise`，它是无关紧要的，因为没有人关心是否有一个具有某些功能的私有方法，无论如何其他人都无法访问它。

另一方面，接口中的所有方法本质上都是公共的（因为它们只不过是对外界的承诺），因此您明确提及它`public`是多余的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T11:05:56.607

接口只能包含公共方法，所以公共有点多余。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T11:09:09.390

一个**接口**只能有**公共成员**，所以不需要**声明它**。而这些功能是要被**继承**的。所以; **接口中声明的所有方法都必须是公共的，这就是它的本质**..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-22T13:15:34.443

我可以理解私人不能工作但也受到保护？

我知道这是对外界的“承诺”，但如果某物实现了一个接口，该方法将保持受保护，因此仍然保持相同的“承诺”。它声明有函数 a、函数 b 以及受保护的函数 c，因此如果我不扩展/实现它，我们就可以从中派生出，那么我将无法访问函数 c。因为当你阅读课程时它的工作原理是一样的。

@AlphaMale 好的，那么界面的意义何在？它是用来为班级创建“食谱”的吗？因此，当您在代码中实际使用它时，它只会实现和强制方法。如果您的代码需要方法才能工作并且您不想将其强制用于特定类，这将变得很方便。

假设我要创建邮件程序，但我必须处理需要邮件的主要流程，但邮件程序将使用不同的方式来构建这些邮件。现在需要一个接收消息（任何类型）和电子邮件地址的基本发送函数，但由于这些类处于开放环境中，因此将此发送函数公开是很危险的，因此我们需要将其作为受保护的方法。现在在两个进程中有多个邮件程序，但每个进程共享相同的方法构造方法，所以有 2 个抽象类，但现在由于接口有限，您现在必须声明第三个抽象类来包含这个受保护的发送函数，以便它也可以扩展，否则您将拥有相同的受保护发送功能。如果一个新开发人员在一个全新的进程上工作并查看界面，那么发送函数将永远不会被强制执行。如果我们说可以在接口中声明受保护，那么在外部如果您检查某物是否是接口，它将与类一样工作，您仍然无法访问受保护的函数。

Private makes sense because then only the interface will know about these values and since an interface can't do anything this will be pointless.

# wpf - PasswordBox 在导航时丢失其内容

> ID：10783583
> 
> 赞同：1
> 
> 时间：2012-05-28T11:03:59.237
> 
> 标签：wpf

我正在使用`PasswordBox`a `Page`。由于实施的工作流程，用户可以导航到子页面 ( `NavigationWindow`)，然后返回`GoBack()`到主页面。

但是这样做时，密码框总是空的！我的工作是防止这种行为，但目前我不知道如何做到这一点。

如果你能帮助我，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:07:31.753

这是一个特点。

请参阅：[如何绑定到 MVVM 中的 PasswordBox](https://stackoverflow.com/questions/1483892/wpf-binding-to-the-passwordbox-in-mvvm-working-solution)

要启用向后导航，需要存储页面状态。这并不安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T11:49:47.773

我认为他的确切问题不是功能，而是导航服务的错误。

在您背后的代码中，您没有简单的方法来区分导航控件在导航时将您的密码空白或用户通过从框中删除它来空白它。因此，如果您不考虑这一点，如果您导航到另一个页面，您的视图模型中的密码将始终为空。

我使用这个 hack 来确定谁调用了我的密码更改处理程序来更新视图模型：

```
private void PasswordBox_OnPasswordChanged(object sender, RoutedEventArgs e)
{
    StackTrace stack = new StackTrace();
    StackFrame[] stackframes = stack.GetFrames();
    foreach (StackFrame stackFrame in stackframes)
        if(stackFrame.GetMethod().Name == "Navigate")
            return;
    ViewModelPassword = PasswordBox.SecurePassword;
.... 
```

也看看这里：http: [//www.wpfsharp.com/2011/04/08/wpf-navigationservice-blanks-passwordbox-password-which-breaks-the-mvvm-passwordhelper/](http://www.wpfsharp.com/2011/04/08/wpf-navigationservice-blanks-passwordbox-password-which-breaks-the-mvvm-passwordhelper/)

# ruby - Ruby 和 Ruby on Rails 中的三层架构

> ID：10783584
> 
> 赞同：6
> 
> 时间：2012-05-28T11:04:01.100
> 
> 标签：ruby, ruby-on-rails-3

我是一名**ASP.NET MVC**开发人员，决定学习 Ruby 和 Ruby on Rails。我已经知道一些事情并在 RoR 上创建了一个网站。在**ASP.NET MVC**上开发，我一直使用三层架构：数据层、业务层和 UI（或表示）层。

尝试在 Ruby on Rails 应用程序中使用这种方法时，我发现没有关于它的信息（或者我可能只是找不到它？）。

也许有人可以建议我如何在 Ruby on Rails 上创建或使用三层架构？

PS 我使用 ruby​​ 1.9.3 和 Ruby on Rails 3.2.3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T11:37:54.127

我建议在制作 RoR 应用程序时遵循 Ruby on Rails (RoR) 风格。Rails 看待 MVC 架构的方式不太适合 Asp.net 3 层架构。

**UI**（表示层|视图）

这两者遵循相同的逻辑。没有重大差异。

**控制器**（业务层|控制器）

业务层和控制器都接收来自 UI 的请求并发送回响应。在 Asp.net 中，业务层负责验证和业务逻辑。但在 Rails 中，验证和业务逻辑属于模型。

**模型**（数据层 | 模型）

Rails 的模型不仅仅是 Asp.net 的数据层。模型处理业务逻辑和验证。数据层和模型负责将数据传输到存储。

当从 Asp.net 迁移到 RoR 时，尽量保持你的控制器纤薄。RoR 对如何构建 Web 应用程序设置了严格的限制。一旦你坚持这些，你就会制作出更专业的 RoR 应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T11:16:45.860

Ruby on Rails*是*一个三层 (MVC) 架构。在 Rails 中，数据层称为模型，业务层称为控制器，用户界面层称为视图。

这里有几个很好的起点： [rails guides](http://guides.rubyonrails.org/)， [rails tutorial for rails 3.2](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book?version=3.2)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-03T22:35:09.550

4年多后，这仍然是一个相关的问题。似乎人们对应用程序层的含义存在混淆。

当您想到 MVC 层时，以前的答案当然是正确的，并且当您将应用程序定义为 3 层（如果它具有适当的模型、视图和控制器）时。当然，Rails 在这个意义上是默认的 3 层，正如其他人所指出的，与 ASP.NET MVC 有显着差异。

但是，我有一种感觉，原来的问题是指事情是如何部署的（我当然可能是错的，但是看这个问题的人可能仍然在寻找这个）。企业应用程序通常需要三层，因为 Web 应用程序（表示）只能与服务（业务逻辑）对话，由于网络级别的限制，以及出于安全原因，服务只能与数据库对话。

在此模型中，前端 Web 应用程序执行安全功能（防止多种类型的攻击，如 CSRF 或 Clickjacking，可能是会话管理等），并呈现从应用程序服务器上的服务读取的任何数据。这些应用程序服务器不能被最终用户直接访问，通常信任 Web 服务器（或不信任，取决于安全模型），并将其数据保存在数据库中，Web 服务器不能直接访问这些数据库。在 Windows 环境中，Web、应用程序和数据库服务器通常位于不同的域中。

正如几乎所有教程中所描述的那样，Rails 同时是一个 Web 和应用程序服务器，它不适合后一种模型，而且关于如何正确地做到这一点确实没有太多可用的资源。然而，尤其是在 Rails 5 中，很容易将 Rails 变成一个适当的服务，用作具有 API 的应用程序服务器（请参阅 API-only Applications Guide），并且还可以创建另一个 Rails 应用程序用于网络（演示）层。不过，您将不得不为自己解决很多事情，从 Web 和应用程序之间的身份验证到从 Web 到应用程序进行服务查询，尤其是现在 ActiveResource 已经退休了。

# android - 如何在 Moodle 中创建 Web 服务并将其与 Android 客户端一起使用

> ID：10783589
> 
> 赞同：1
> 
> 时间：2012-05-28T11:04:24.783
> 
> 标签：android, web-services, rest, soap, moodle

我不知道这个问题以前是否被问过，但在问这里之前，我搜索了 SO，也搜索了很多，但没有得到任何适当的解决方案。我正在开发一个使用 Moodle (2.0) REST Web 服务的 Android 项目。在我的本地主机服务器上，我进行了一次测试运行，并`moodle_user_get_users_by_id`为 SOAP 和 REST 协议获取了“”的输出。然后我搜索了可以简化我的 Web 服务调用头痛的第三方库，幸运的是我找到[了 MoodleREST](https://sourceforge.net/projects/moodlerestjava/files/)

和[pattrickpollet GitHub](https://github.com/patrickpollet/moodlews_ksoap2)

但是 None 正在按应有的方式工作。如果有人更早遇到过这些问题并且对此有所了解，那么如果他们能在这里分享它会很棒..

# java - 枚举的循环遍历

> ID：10783590
> 
> 赞同：5
> 
> 时间：2012-05-28T11:04:26.780
> 
> 标签：java, enums

对枚举进行循环遍历的最佳方法是什么。

我有一个枚举方向，我想循环遍历它。目前我已经在枚举中实现了返回下一个值的下一个方法，我只是想知道是否有更好的方法/内置支持循环遍历。

当前代码

```
enum Direction {
    east, north, west, south;

    Direction next() {

        switch (this) {
        case east:
            return north;

        case north:
            return west;

        case west:
            return south;

        case south:
            return east;
        }

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T11:13:11.133

实现一个循环非常简单`Iterator`：

```
enum Direction implements Iterable<Direction> {
    east, north, west, south;

    @Override
    public Iterator<Direction> iterator() {
        return new DirectionIterator();
    }

    class DirectionIterator implements Iterator<Direction> {

        Direction next = Direction.this;

        @Override
        public Direction next() {
            try {
                return next;
            } finally {
                next = values()[(next.ordinal() + 1) % values().length];
            }
        }

        @Override
        public boolean hasNext() { 
            return true; 
        }

        @Override
        public void remove() {
            throw new NotImplementedException();
        }
    }
} 
```

* * *

用法：

```
public static void main(String[] args) {

    Iterator<Direction> it = Direction.north.iterator();

    for (int i = 0; i < 10; i++)
        System.out.println(it.next());
} 
```

输出：

```
north
west
south
east
north
west
south
east
north
west 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-28T11:06:23.190

转换为int（通过`ordinal()`），循环并转换回枚举（通过`values[i]`）。

像这样：

```
Direction next() {
    return values()[(ordinal() + 1) % values().length];
} 
```

## 通用解决方案

一种更通用的遍历枚举值的方法是：

```
class CyclicIterator<T> implements Iterator<T> {

    private final T[] values;
    private int current;

    public CyclicIterator(T[] values) {
        this.values = values;
        this.current = 0;
    }

    @Override
    public boolean hasNext() {
        return true;
    }

    @Override
    public T next() {
        current = (current + 1) % values.length;
        return values[current];
    }
} 
```

可以按如下方式使用：

```
CyclicIterator<Direction> iter = new CyclicIterator<>(Direction.values());
for (int i = 0; i < 6; i++) {
    System.out.println(i + ": " + iter.next());
} 
```

输出：

```
0: north
1: west
2: south
3: east
4: north
5: west 
```

## 番石榴溶液

如果你依赖 Guava，一个循环迭代器（与上面的相同）已经可以通过[`Iterators.cycle`](https://javadoc.io/static/com.google.guava/guava/30.1.1-jre/com/google/common/collect/Iterators.html#cycle(java.lang.Iterable))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T11:06:15.703

您可以使用枚举值已分配给它们的整数值这一事实来循环它们。

# osgi - 无法在缺少 osgi xmlschema 捆绑包中运行 cxf（但已安装）

> ID：10783599
> 
> 赞同：0
> 
> 时间：2012-05-28T11:05:02.800
> 
> 标签：osgi, cxf

我正在尝试在 karaf 中运行一个 cxf 包。它说缺少包 org.apache.ws.commons.schema 但已安装了相应的包（servicemix 包）

如果捆绑 785 (xmlschema) 被激活，我不知道为什么依赖关系没有解决。我需要包含其他内容还是有某种配置问题？

```
OSGi>features:install idb
Refreshing bundles org.springframework.jms (104)
Error executing command: Could not start bundle 
mvn:org.apache.cxf/cxf-bundle-minimal/2.2.9 in feature(s)
 cxf-bundle-minimal-2.6.0: Unresolved constraint in bundle
 org.apache.cxf.bundle-minimal [832]: Unable to resolve 832.0:
 missing requirement [832.0] package;
 (&(package=org.apache.ws.commons.schema)(version>=1.4.0)(!(version>=2.0.0)))

OSGi>osgi:info 785

Apache ServiceMix Bundles: xmlschema-1.4.3 (785)
------------------------------------------------
OSGi>osgi:headers 785

Apache ServiceMix Bundles: xmlschema-1.4.3 (785)
------------------------------------------------
Manifest-Version = 1.0
Bnd-LastModified = 1237594240914
Tool = Bnd-0.0.255
Built-By = gnodet
Build-Jdk = 1.5.0_16
Created-By = Apache Maven Bundle Plugin

Bundle-Vendor = The Apache Software Foundation
Bundle-Name = Apache ServiceMix Bundles: xmlschema-1.4.3
Bundle-DocURL = http://www.apache.org/
Bundle-Description = This bundle simply wraps xmlschema-1.4.3.jar.
Bundle-SymbolicName = org.apache.servicemix.bundles.xmlschema
Bundle-Version = 1.4.3.1
Bundle-License = http://www.apache.org/licenses/LICENSE-2.0.txt
Bundle-ManifestVersion = 2

Import-Package = 
javax.xml.namespace,
javax.xml.parsers,
javax.xml.transform,
javax.xml.transform.dom,
javax.xml.transform.sax,
javax.xml.transform.stream,
org.apache.ws.commons.schema;version=1.4.3,
org.apache.ws.commons.schema.constants;version=1.4.3,
org.apache.ws.commons.schema.extensions;version=1.4.3,
org.apache.ws.commons.schema.resolver;version=1.4.3,
org.apache.ws.commons.schema.utils;version=1.4.3,
org.w3c.dom,
org.xml.sax
Export-Package = 
org.apache.ws.commons.schema.resolver;uses:=org.xml.sax;version=1.4.3,
org.apache.ws.commons.schema.utils;
    uses:="org.apache.ws.commons.schema,
        javax.xml.namespace,
        org.w3c.dom";
    version=1.4.3,
org.apache.ws.commons.schema;
    uses:="org.xml.sax,
        javax.xml.namespace,
        org.w3c.dom,
        javax.xml.transform,
        org.apache.ws.commons.schema.extensions,
        javax.xml.transform.dom,
        javax.xml.transform.sax,
        org.apache.ws.commons.schema.resolver,
        org.apache.ws.commons.schema.utils,
        javax.xml.parsers,
        org.apache.ws.commons.schema.constants,
        javax.xml.transform.stream";
    version=1.4.3,
org.apache.ws.commons.schema.constants;
    uses:=javax.xml.namespace;
    version=1.4.3,
org.apache.ws.commons.schema.extensions;
    uses:="org.apache.ws.commons.schema,
        javax.xml.namespace,
        org.w3c.dom";
    version=1.4.3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:35:52.300

您使用的 CXF 版本似乎很旧。你能用最新的 CXF 版本测试吗？顺便提一句。你用的是什么 Karaf 版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:14:59.893

首先，bundle 785 (xmlschema-1.4.3) 的状态是什么？如果状态为resolved或者active，就ok了；如果它只是“安装”，那么它就有问题，它导出的包在系统中*不可*用。

其次，检查由 bundle 785 导入的包是谁提供的。（org.w3c.dom 等） 您可能会遇到以下情况：如果 bundle idb 从一个来源导入例如 org.w3c.dom，而 xmlschema-1.4.3 从其中导入它们另一个（例如同时提供不同的版本，或者框架本身和一些额外的包都提供它），那么框架将不会使用来自 xmlschema-1.4.3 的包解析 idb 包，因为这会导致ClassCastException 稍后。

# java - 如何在struts 2中迭代请求属性？

> ID：10783601
> 
> 赞同：0
> 
> 时间：2012-05-28T11:05:05.300
> 
> 标签：java, jsp, struts2

我正在尝试在页面加载时从`ActionSupport`JSP 页面名称中迭代请求属性，`EnergyConsumptionAnalysis`以使用 struts2 使用相同的 JSP 页面在浏览器上显示它，但在运行时我得到空显示。谁能告诉我我在做什么错？

JSP：

```
<s:action name = "FetchSite"></s:action>
  <s:iterator value="siteData">
        <s:property value = "name"/>
  </s:iterator> 
```

行动支持：

```
public class EnergyAction extends ActionSupport implements  ServletRequestAware
{
    private HttpServletRequest request;
    @Override
    public String execute()
            throws Exception {
        //Get the site Data
        EnergyAnalysisBusinessHandler handler = new EnergyAnalysisBusinessHandler();

        //setting attribute as arraylist type
        request.setAttribute("siteData", handler.getSiteData());
        return SUCCESS;
   }

    public void setServletRequest(HttpServletRequest request){
        this.request = request;
    }

    public HttpServletRequest getServletRequest(){
    return request;
  } 
```

struts.xml：

```
<action name = "FetchSite" class = "com.javaworld.email.EnergyAction">
               <result name = "success">jsp/EnergyConsumptionAnalysis.jsp
               </result>
 </action> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T12:45:39.727

1 您正在尝试从值堆栈中获取 siteData，但您将其放入请求中。这样您就可以从请求中获取它：

```
<s:iterator value="#request.siteData">
        <s:property value = "name"/>
</s:iterator> 
```

2 将一些参数传递给 .jsp 的最简单方法是在 Action 中创建 getter/setter。根本不需要在请求中放入参数。

行动：

```
 public class EnergyAction extends ActionSupport
    {
        private Object siteData;

        @Override
        public String execute()
                throws Exception {
            //Get the site Data
            EnergyAnalysisBusinessHandler handler = new EnergyAnalysisBusinessHandler();
            siteData = handler.getSiteData();
            return SUCCESS;
       }

        public void setSiteData(Object siteData){
            this.siteData = siteData;
        }

        public Object getSiteData(){
            return siteData;
        }
    } 
```

JSP：

```
<s:iterator value="siteData">
  <s:property value = "name"/>
</s:iterator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:36:38.157

而不是这个：

```
<s:iterator value="siteData">
        <s:property value = "name"/>
  </s:iterator> 
```

你可以使用这个：

```
<s:iterator value="%{#request.siteData}">
        <s:property value = "name"/>
  </s:iterator> 
```

# windows - 通过记事本++ 保存的文件在终端上的差异比较失败

> ID：10783606
> 
> 赞同：0
> 
> 时间：2012-05-28T11:05:25.790
> 
> 标签：windows, unix, character-encoding, diff, notepad++

我在 Windows 上使用 notepad++ 以 UTF-8 和 ASCII 格式保存了一个文本文件。该文本与 UNIX 版本具有相同的字母表示，但通过 diff 声称完全不同（例如 1,267c1,267）。这些文件在二进制级别上实际上是不同的（xxd -b test.txt），但是 vimdiff 的结果与 vim 不同：它表明它们是相同的。我猜是因为 vimdiff 在对文件进行 diff 之前渲染文本？为什么会有这样的不一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:03:47.620

如果您使用`-b`to 选项`diff`，它将忽略前导和尾随空格，包括行尾字符的差异。`hd`如果这不能解决问题，您可以使用(hexdump) 或`od -c`(八进制转储，显示 ascii 字符)仔细检查各个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:54:32.850

检查您比较的文件中的行尾字符。可能是您`\r\n`在每行末尾保存了它们，而 Unix 版本以`\n`.

# linq - LINQ 按“循环”排序

> ID：10783608
> 
> 赞同：6
> 
> 时间：2012-05-28T11:05:35.017
> 
> 标签：linq, round-robin

似乎这应该是一件容易的事，但我不知道如何用 LINQ 做到这一点。到目前为止，我能找到的唯一信息是关于循环赛的形式，这不是我想要的。我可能搜索错了。给定以下列表：

```
var items [] { "apple", "banana", "banana", "candy", "banana", "fruit", "apple" }; 
```

我如何对此进行排序（最好使用 linq），以便它以“循环”顺序出现，也就是说，在重复之前选择每个唯一项目一次。所以上面的列表会像这样出现（如果它按字母顺序出现并不重要，即使这个列表确实如此）：

```
var sorted [] { "apple", "banana", "candy", "fruit", "apple", "banana", "banana" }; 
```

我知道我可以通过艰难的迭代来做到这一点，我只是希望有一些更简单的东西。有谁知道如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T11:34:05.923

```
var sorted = items.GroupBy(s => s)
    .SelectMany(grp => grp.Select((str, idx) => new { Index = idx, Value = str }))
    .OrderBy(v => v.Index).ThenBy(v => v.Value)
    .Select(v => v.Value)
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:34:15.640

我这样做过一次，挖出代码：

```
//Originially written for lists, all you need is prepend a .ToList() where needed to apply this to an array
List<string> src = new List<string> { "string1", "string2" }; //source
List<string> dst = new List<string>();

dst.AddRange(src.Distinct());
dst.ForEach(d => src.RemoveAt(src.FindIndex(i => i.Equals(d)))); //remove the first occurrence of each distinct element
dst.AddRange(src); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:58:08.043

刚刚看到我写这篇文章时弹出了两个答案；哦，好吧，这是另一种方式：

```
var items [] { "apple", "banana", "banana", "candy", "banana", "fruit", "apple" };

var uniqueItems = items.Distinct().OrderBy(item => item); // alphabetical orderBy is optional

var duplicateItems = items
                     .GroupBy(item => item)
                     .SelectMany(group => group.Skip(1))
                     .OrderBy(item => item); // alphabetical orderBy is optional;

var sorted = uniqueItems.Append( duplicateItems ).ToArray(); 
```

# c# - 有什么方法可以指导 MsTest 何时运行测试方法？

> ID：10783611
> 
> 赞同：0
> 
> 时间：2012-05-28T11:05:41.937
> 
> 标签：c#, unit-testing, mstest

是否有一种方法或方法，例如测试方法的方法装饰器或属性，例如：

**“在运行方法 B 之前运行方法 C”**

所以基本上你是在 C 和 B 之间创建依赖关系。我知道测试最好是原子的，应该是原子的，但有时最好保持你的测试小而重要。当它正在寻找的项目根本不存在时，不运行“RemoveItem”测试方法是有意义的。

大多数人会事先添加该项目，然后测试他们是否可以删除 - ' ***All In the same test*** '。我不喜欢这种方法，我想让我的测试更小、更准确、更原子化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:37:00.427

就像您说的那样，您不希望测试之间存在相互依赖关系。如果您不习惯在删除测试中在“删除”之前添加“添加”，从而在错误的位置测试 Add 方法，那么我建议使用 testInitialize 来设置测试可以作用的一些对象。*然而，*我推荐在运行 Remove 之前实际运行 Add 的做法，在 Remove 的测试中。

```
[Testclass]
public class TestStacks
{
  private Stack<string> emptyStack;
  private Stack<string> singleItemStack;

  [TestInitialize]
  public void Setup()
  {
    singleItemStack = new Stack<string>();
    singleItemStack.Push("Item");
    emptyStack = new Stack<string>();
  }

  [TestMethod]
  public void TestPush()
  {       
    emptyStack.Push("Added");
    Assert.AreEqual(1, emptyStack.Count);
  }

  [TestMethod]
  public void TestRemove()
  {       
    singleItemStack.Pop();
    Assert.AreEqual(0, singleItemStack.Count);
  }  

  [TestMethod]
  [ExpectedException(typeof(InvalidOperationException))]
  public void TestPopFromEmpty()
  {       
    emptyStack.Pop();
  }  

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:35:24.520

如果您需要在测试移除之前添加一些项目，那么添加项目的最佳位置是`arrange`移除测试的一部分。这将使移除测试的上下文变得清晰。

但 DRY 原则也适用于此 - 您可以将添加逻辑移动到单独的辅助方法。然后调用它两次 - 在测试添加时，以及在安排删除上下文时：

```
[Testclass]
public class Tests
{        
    [TestMethod]
    public void TestAddition()
    {
        AddItem();
        // Assert addition           
    }   

    [TestMethod]
    public void TestRemoval()
    {
       AddItem();
       // Remove item
       // Assert removal
    } 

    private void AddItem()
    {
       // Add item           
    }
} 
```

# objective-c - ios 中类字母索引的名称。喜欢联系人索引

> ID：10783613
> 
> 赞同：0
> 
> 时间：2012-05-28T11:05:45.997
> 
> 标签：objective-c, ios, object

哪个是用于显示字母索引的对象类的名称，以在以所选字母开头的 tableview 中查找第一次出现？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:11:17.017

您可以阅读[UITableViewDatasource](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource)文档，其中描述了两种相关方法。您可以搜索`section`以更快地找到它。

# python - 无法通过 python 线程上传到 Amazon S3

> ID：10783618
> 
> 赞同：1
> 
> 时间：2012-05-28T11:06:04.680
> 
> 标签：python, multithreading

下面是我如何穿线。

```
t = Thread(target=s3_upload, args=(absolute_write_path,raw_unique_key))
t.start() 
```

这是线程中调用的函数。

```
def s3_upload(file_path,key):
    conn = S3.AWSAuthConnection(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)

    #check if bucket exists, if not cr8 it
    if S3_BUCKET_CHECK:
        if not conn.check_bucket_exists(S3_BUCKET_NAME).status == 200:
            conn.create_located_bucket(S3_BUCKET_NAME, S3_LOCATION)

    orig_file = open(file_path, "r")
    obj = S3Object(orig_file.read())
    conn.put(S3_BUCKET_NAME, key, obj)
    os.remove(file_path) 
```

如果我不在线程中运行它，它似乎可以工作。但是，如果我在线程中运行，它会一直运行到我执行 conn.put() 的行，并且不会从那里开始打印行。有谁知道为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:19:26.893

好的解决了。问题是烧瓶的 def 守护进程值为 True。将其更改为 false（我认为是 def），现在它可以工作了:)

# java - 如何从 2D int 数组构造 ArrayList？

> ID：10783619
> 
> 赞同：0
> 
> 时间：2012-05-28T11:06:04.907
> 
> 标签：java, arrays, arraylist

我有一个 2D int 数组，例如我想删除重复的行

> 30,40,50
> 
> 50,30,40
> 
> 30,40,50

在上面的例子中，第 2 行和第 3 行是第 1 行的副本。

我知道`ArrayList`可以动态增长和下沉，这对这个概念很有用，但是我们如何转换`int[][]`为`ArrayList`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:33:58.153

首先，您应该创建一个类来保存您覆盖的数据 `public boolean equals(Object obj)`并`public int hashCode()`指示数据的相等性。

```
public class Row {

    private int[] ints;

    public Row(int[] ints) {
        this.ints = ints.clone();
        Arrays.sort(this.ints);
    }

    @Override
    public int hashCode() {
        return Arrays.hashCode(ints);
    }

    @Override
    public boolean equals(Object obj) {

        if(obj instanceof Row) {
            Row another = (Row) obj;
            int[] original = Arrays.copyOf(another.ints, another.ints.length);
            return Arrays.equals(ints, original);
        } else {
            return false;
        }
    }

    @Override
    public String toString() {
        return Arrays.toString(ints);
    }

} 
```

**测试用例**

```
public class Test {

    public static void main(String[] args) {
        int[][] arrays = new int[][]{{30,40,50}, {50,30,40}, {30,40,50}, {10, 20, 30}};
        Set<Row> rows = new HashSet<Row>();
        for(int[] a: arrays) {
            rows.add(new Row(a));
        }
        for(Row row: rows) {
            System.out.println(row);
        }
    }
} 
```

**输出**

```
[10, 20, 30]
[30, 40, 50] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T11:07:43.003

如果你想要所有唯一的数字，那么你可以`Set<Integer>`直接使用

> 30,40,50 50,30,40
> 30,40,50
> 
> 在上面的例子中，第 2 行和第 3 行是第 1 行的重复

如果您看到所有 3 行相同，那么您可以直接使用`Set<Integer>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:33:48.067

```
// lets create table
int[][] int2d = { 
        { 1, 2 }, 
        { 2, 1 }, 
        { 30, 40, 50 }, 
        { 50, 30, 40 },
        { 30, 40, 50 }, };

// lets sort content of each row for
for (int[] row : int2d)
    Arrays.sort(row);
// lets see how table looks likne now
System.out.println(Arrays.deepToString(int2d));

// this will help set do decide if element is already in
Comparator<int[]> comparator = new Comparator<int[]>() {
    public int compare(int[] o1, int[] o2) {
        return Arrays.toString(o1).compareTo(Arrays.toString(o2));
    }
};

// we create set and give him comparator (via constructor)
Set<int[]> set = new TreeSet<int[]>(comparator);
// now lets try to put every row of table in set
for (int[] row : int2d)
    set.add(row);

// NOW, GREAT TEST
System.out.println("============");
for (int[] row : set)
    System.out.println(Arrays.toString(row)); 
```

出去：

```
[[1, 2], [1, 2], [30, 40, 50], [30, 40, 50], [30, 40, 50]]
============
[1, 2]
[30, 40, 50] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T12:05:56.250

这是一个最小的代码，可以消除您定义的重复项：

```
final Integer[][] int2d = { { 30, 40, 50 }, { 50, 30, 40 }, { 30, 40, 50 }, };
final Set<Set<Integer>> r = new LinkedHashSet<Set<Integer>>();
for (Integer[] row : int2d) r.add(new LinkedHashSet<Integer>(Arrays.asList(row)));
System.out.println(r); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T17:28:09.907

如果您使用来自[Functional Java](http://functionaljava.org/)的持久性集合，则解决方案非常简单。

（**注意：** 我在下面指的是来自函数式 Java，而不是来自标准库。`List`）`Set`

* * *

假设您将数据存储在名为`xss`type的变量中`List<List<Integer>>`。

你想做什么可以描述如下：

> `xss`使用包含相同元素的两行被视为相等的标准进行重复数据删除。

*   `List`提供了一种`nub`重复数据删除的方法。
*   两个`List`s 是否包含相同的元素，可以通过将它们转换为`Set`s，然后比较它们是否相等来确定。
*   上述标准可以作为`Equal`实例传递。

* * *

**代码：**

```
xss.nub(new Equal<List<Integer>>() {
  public boolean eq(List<Integer> xs1, List<Integer> xs2) {
    Set<Integer> s1 = Set.iterableSet(Ord.listOrd(Ord.intOrd), xs1);
    Set<Integer> s2 = Set.iterableSet(Ord.listord(Ord.intOrd), xs2);
    return Equal.setEqual(Equal.intEqual).eq(s1, s2);
  }
}); 
```

# c# - 在链接单击时执行客户端脚本

> ID：10783622
> 
> 赞同：0
> 
> 时间：2012-05-28T11:06:19.597
> 
> 标签：c#, javascript, asp.net

我需要我的网页打开一个窗口并在单击链接或按钮时启用禁用的按钮。从我在这里的其他帖子上读到的内容来看，如果我尝试在 Page_load 中打开一个新窗口，大多数浏览器会认为它是一个弹出窗口并阻止它，所以我一直在尝试用 JS 做客户端。

目前，我正在尝试使用这样声明的链接：

`Please click <a href="javascript:OpenDoc()">here</a> to open the document.`

这将调用以下 JS：

```
 function OpenDoc() 
    {
        <%= btnSubmit.ClientID %>.Visible = true; 
        Window.Open('GetDocument.aspx') 
    } 
```

不幸的是，不是将 JS 渲染为“btnSubmit.Visible = true”，而是显示为“MainContent_btnSubmit.Visible = true”，这是行不通的。

假设这是做我想做的最好的方式，我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:13:38.333

您不能通过 javascript 更改可见性属性，但可以使用以下代码代替它：

```
var control = document.getElementById('<%=btnSubmit.ClientID %>');           
control.disabled = true; 
```

在这种情况下，按钮将被禁用，如果您需要隐藏按钮而不禁用它，请使用以下代码：

```
var control = document.getElementById('<%=btnSubmit.ClientID %>');           
control.style.display= "none"; 
```

希望这对我对您的问题的理解有所帮助

# entity-framework - 在 EF(MVC4) 中使用存储过程

> ID：10783624
> 
> 赞同：1
> 
> 时间：2012-05-28T11:06:20.640
> 
> 标签：entity-framework, entity-framework-4

我有一个存储过程“SelectKP”（日期时间 bt，日期时间等），请帮助为此过程创建一个类和一个存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:12:55.137

查看此链接： [如何在 C# 程序中执行存储过程](https://stackoverflow.com/questions/1260952/how-to-execute-a-stored-procedure-from-c-sharp-program)

没有手动生成函数，而是执行存储过程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:16:53.937

这是一个简单的例子。

```
using (var db = new ModelEntities())
{
  var query = db.ExecuteStoreQuery<ModelClass>("StoreProcedureName '" + UserId +"'");
} 
```

# c# - Convert.ToDecimal(double x) - System.OverflowException

> ID：10783625
> 
> 赞同：2
> 
> 时间：2012-05-28T11:06:22.853
> 
> 标签：c#, .net

可以表示\转换为小数的最大双精度值是多少？

如何得出这个值 - 请举例。

**更新**

给定可以转换为小数的 double 的最大值，我希望能够将 double 往返转换为小数，然后再返回。但是，在@Jirka 的回答中给出诸如 (2^52)-1 之类的数字，这是行不通的。例如：

```
 Test]
    public void round_trip_double_to_decimal()
    {
        double maxDecimalAsDouble = (Math.Pow(2, 52) - 1);

        decimal toDecimal = Convert.ToDecimal(maxDecimalAsDouble);

        double toDouble = Convert.ToDouble(toDecimal);

        //Fails.
        Assert.That(toDouble, Is.EqualTo(maxDecimalAsDouble));
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T11:36:25.033

**-9,007,199,254,740,992 和 9,007,199,254,740,991 之间的所有整数都可以精确地表示为双精度数。** （不过，请继续阅读。）

上限派生为[2^53 - 1](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)。如果您原谅我的十六进制语法，它的内部表示类似于 (0x1.fffffffffffff * 2^52)。

在这个范围之外，许多整数如果是 2 的幂的倍数，仍然可以精确表示。

因此，可以准确表示的最高整数将是`9,007,199,254,740,991 * (2 ^ 1023)`，它甚至高于`Decimal.MaxValue`但这是一个非常没有意义的事实，因为该值不会改变，例如，当您`1`在`double`算术中减去时。

根据评论和进一步的研究，我添加了有关 .NET 和 C# 的 Mono 实现的信息，这些信息相对化了您和我可能想要做出的大多数结论。

*   `Math.Pow`似乎并不能保证任何特定的准确性，而且它似乎比 a`double`可以表示的要少一两个。对于浮点函数，这并不奇怪。英特尔浮点硬件没有求幂指令，我希望计算涉及[对数和乘法](http://en.wikipedia.org/wiki/Extended_precision)指令，其中中间结果会丢失一些精度。`BigInteger.Pow`如果需要积分精度，可以使用。

*   但是，甚至会`(decimal)(double)9007199254740991M`导致往返违规。然而，这一次是一个[已知的错误](https://stackoverflow.com/questions/1584314/conversion-of-a-decimal-to-double-number-in-c-sharp-results-in-a-difference)，直接违反了 C# 规范的第 6.2.1 节。有趣的是，即使在 Mono 2.8 中，我也看到了同样的错误。（引用的来源表明，即使值低*得多*，这个转换错误也会发生。）

*   双重文字不那么四舍五入，但仍然有点：9007199254740991D 打印为 9007199254740990D。这是解析字符串文字时内部乘以 10 的产物（在上限和下限`double`基于“小数点后的第一个零”收敛到相同值之前）。这再次违反了 C# 规范，这次是第 9.4.4.3 节。

*   与 C 不同，C# 没有十六进制浮点字面量，因此我们无法通过任何其他语法避免乘以 10，除非可能通过`Decimal`or `BigInteger`，如果这些仅提供准确的转换运算符。我没有测试过`BigInteger`。

*   以上几乎可以让您怀疑 C# 是否没有发明自己独特的降低精度的浮点格式。不，第 11.1.6 节引用了 64 位[IEC 60559](http://en.wikipedia.org/wiki/IEEE_754-2008#Basic_formats)表示。所以上面确实是bug。

因此，总而言之，您甚至应该能够将 9007199254740991M 精确地放入 double 中，但是要获得正确的值是一个相当大的挑战！

这个故事的寓意是，“*算术应该比数据和期望的结果更精确*”的传统信念是错误的，正如[这篇著名的文章](http://www.cs.berkeley.edu/~wkahan/JAVAhurt.pdf)所证明的（第 36 页），尽管是在不同的编程语言的背景下。

**除非必须，否则不要将整数存储在浮点变量中。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:10:34.060

[MSDN 双数据类型](http://msdn.microsoft.com/en-us/library/x99xtshc%28v=vs.71%29.aspx)

[十进制与双精度](https://stackoverflow.com/questions/1165761/decimal-vs-double-which-one-should-i-use-and-when)

Decimal.MaxValue 的值为正 79,228,162,514,264,337,593,543,950,335。

# c# - Gridview点击标题排序触发行命令

> ID：10783629
> 
> 赞同：3
> 
> 时间：2012-05-28T11:06:36.427
> 
> 标签：c#, asp.net, .net, asp.net-4.0

我有一个相当简单的 GridView。这是列的标记：

```
 <Columns>
                <asp:TemplateField HeaderText="JD Name" SortExpression="FullName"
                    HeaderStyle-HorizontalAlign="Center" ItemStyle-Width="180px" >
                    <ItemTemplate>
                        <asp:LinkButton CommandName="edt" CommandArgument='<%#Eval("JurisdictionID") %>' runat="server" Text='<%#Eval("FullName") %>' />
                    </ItemTemplate>
                </asp:TemplateField>

                <asp:BoundField HeaderText="JD Abbreviation" ItemStyle-Width="200px"  DataField="JDAbbreviation" SortExpression="JDAbbreviation"
                    HeaderStyle-HorizontalAlign="Center" />

                 <asp:TemplateField 
                    HeaderStyle-HorizontalAlign="Center" >
                    <ItemTemplate>
                        <asp:LinkButton ID="lnkStat" CommandName="inac" CommandArgument='<%#Eval("JurisdictionID") %>' 
                        runat="server" Text='<%#Utils.GetStatusString((bool) Eval("IsActive")) %>' />
                    </ItemTemplate>
                </asp:TemplateField>

            </Columns> 
```

但是，当我单击要排序的列时，它首先触发行命令事件，然后进入排序事件。谁能告诉我我在做什么错误？在 RowCommand 参数中，我得到了 SortExpression。这对我来说真的很有趣！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T11:28:49.823

`Sort`是一个`row command`。查看此 MSDN [GridView.RowCommand 事件文章](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)了解更多详细信息。

在您的行命令事件中，您应该添加一个`if`语句，以便您可以确定应该何时执行行命令代码。使用 e.CommandName。

```
void ContactsGridView_RowCommand(Object sender, GridViewCommandEventArgs e)
{
  // If multiple buttons are used in a GridView control, use the
  // CommandName property to determine which button was clicked.
  if(e.CommandName=="Add")
  {
    // Convert the row index stored in the CommandArgument
    // property to an Integer.
    int index = Convert.ToInt32(e.CommandArgument);

    // Retrieve the row that contains the button clicked 
    // by the user from the Rows collection.
    GridViewRow row = ContactsGridView.Rows[index];

    // Create a new ListItem object for the contact in the row.     
    ListItem item = new ListItem();
    item.Text = Server.HtmlDecode(row.Cells[2].Text) + " " +
    Server.HtmlDecode(row.Cells[3].Text);

    // If the contact is not already in the ListBox, add the ListItem 
    // object to the Items collection of the ListBox control. 
    if (!ContactsListBox.Items.Contains(item))
    {
      ContactsListBox.Items.Add(item);
    }
  }
} 
```

# java - 将 Web 应用程序从 Tomcat6 迁移到 WebLogic12c 时出错

> ID：10783632
> 
> 赞同：0
> 
> 时间：2012-05-28T11:06:43.590
> 
> 标签：java, tomcat, weblogic, migrate

我有一个工作将web应用程序从Tomcat迁移到Weblogic12，我让war使用了Tomcat webapp文件夹下的所有文件，然后将war复制到weblogic的autodeploy文件夹中，启动weblogic服务器以使应用程序自动部署. 然后出现如下错误：

```
<May 28, 2012 4:43:08 AM EDT> <Notice> <LoggingService> <BEA-320401> <The log file has been rotated to /opt/Corizon/CPv434_Interim/UIService/runtime/user_projects/domains/corizon/servers/AdminServer/logs/access.log00002\. Log messages will continue to be logged in /opt/Corizon/CPv434_Interim/UIService/runtime/user_projects/domains/corizon/servers/AdminServer/logs/access.log.> 
<May 28, 2012 4:43:44 AM EDT> <Notice> <WebLogicServer> <BEA-000365> <Server state changed to STANDBY.> 
<May 28, 2012 4:43:44 AM EDT> <Notice> <WebLogicServer> <BEA-000365> <Server state changed to STARTING.> 
<May 28, 2012 4:43:49 AM EDT> <Warning> <HTTP> <BEA-101162> <User defined listener com.genient.web.ServletContextMaintenanceListener failed: java.lang.ExceptionInInitializerError.
java.lang.ExceptionInInitializerError
        at com.genient.config.BaseConfigManager.getConfigRootPath(BaseConfigManager.java:54)
        at com.genient.config.BaseConfigManager.getSystemConfigFilenameUsingFullPath(BaseConfigManager.java:58)
        at com.genient.config.BaseConfigManager.getSystemProperties(BaseConfigManager.java:66)
        at com.genient.config.system.SystemConfigManager.initialise(SystemConfigManager.java:115)
        at com.genient.config.system.SystemConfigManager.getInstance(SystemConfigManager.java:101)
        Truncated. see log file for complete stacktrace
Caused By: com.genient.platform.common.IllegalStateException: Could not determine WEB-INF directory (marker URL was '/opt/Corizon/CPv434_Interim/UIService/runtime/user_projects/domains/corizon/servers/AdminServer/tmp/_WL_user/_appsdir_UIService_war/e44ur4/war/WEB-INF/lib/_wl_cls_gen.jar!/classes-marker').
        at com.genient.config.ConfigHelper.<clinit>(ConfigHelper.java:31)
        at com.genient.config.BaseConfigManager.getConfigRootPath(BaseConfigManager.java:54)
        at com.genient.config.BaseConfigManager.getSystemConfigFilenameUsingFullPath(BaseConfigManager.java:58)
        at com.genient.config.BaseConfigManager.getSystemProperties(BaseConfigManager.java:66)
        at com.genient.config.system.SystemConfigManager.initialise(SystemConfigManager.java:115)
        Truncated. see log file for complete stacktrace 
```

似乎 web-inf lib 文件夹中的 jar 加载失败。weblogic启动时生成的“/opt/Corizo​​n/CPv434_Interim/UIService/runtime/user_projects/domains/corizo​​n/servers/AdminServer/tmp/_WL_user/_appsdir_UIService_war/e44ur4/war/WEB-INF/lib”中的_wl_cls_gen.jar.why应该生成这个 jar

任何人都知道原因将不胜感激。

更新（`ConfigHelper`类）：

```
URL markerURL = Thread.currentThread().getContextClassLoader().getResource("classes-marker");
markerURL=JBossVFSManager.convert(markerURL);
if(markerURL!=null) {
    final String markerPath = markerURL.getPath();
    mWebInfClassesPath = markerPath.substring(0, markerPath.lastIndexOf("classes-marker"));
    if (!new File(mWebInfClassesPath).exists()) {
        throw new IllegalStateException("Could not determine WEB-INF directory (marker URL was '" + markerPath + "').");
    }
    mConfigPath = mWebInfClassesPath + DEFAULTSYSTEMPROPERTIESPATH;
} 
```

# spring - 何时使用 Spring Web Flow？

> ID：10783633
> 
> 赞同：2
> 
> 时间：2012-05-28T11:06:47.067
> 
> 标签：spring, flash, spring-webflow

我对这个框架（spring web flow）很感兴趣，我想知道什么时候最好使用spring flow，如果它有帮助，什么时候真的很方便？

另外，还有其他解决方案吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:16:55.277

当您的应用程序遵循某种特定类型的流程来实现某些目标时，您应该选择 Spring webflow。否则，在简单的应用程序中不需要它。

例如，如果您需要按以下多个步骤执行用户注册过程。

1.  个人资料。
2.  教育细节。
3.  公司详情。
4.  联系方式。

如果您需要在另一个步骤中获取每个步骤的数据，那么使用 Spring webflow 是可以接受的。

希望这对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T07:14:25.913

```
Spring Web Flow is allowing you to represent the UI flow in a web application
in a clear and simple way. This has several advantages:

The UI flow in a web application is clearly visible by looking at the 
corresponding web flow definition (typically in an XML file).

Web Flows can be designed to be self contained.

This allows you to see a part of your application as a module 
and reuse it in multiple situations.

<transition on="enrollCustomer" validate="false" to="redirectToEnrollCustomer" />

<action-state id="redirectToEnrollCustomer">
    <evaluate expression="customerAction.redirectPersonalDetails(flowRequestContext)"/>
    <transition on="success" to="toPersonalDetails"/>
        <transition on="educationSuccess" to="toEducaationDetails"/>
        <transition on="confirmationSuccess" to="toConfirmationDetails"/>
    <transition on="failure" to="enrollCustomer"/>
</action-state> 
```

# ipc - CAN会发生什么？

> ID：10783634
> 
> 赞同：3
> 
> 时间：2012-05-28T11:06:47.390
> 
> 标签：ipc, communication, can-bus

我有一个面试。面试官问我：

> 如果两个节点发送两条具有相同标识符（0x100）但数据不同的消息，谁将赢得仲裁？巴士上会显示哪条信息？

如果节点 1 获胜，那么节点 2 的消息呢？节点 2 的消息何时发送？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T09:06:42.340

这里有两种情况

1.  相同的 ID 和相同的 DATA 字段
2.  具有不同 DATA 字段的相同 ID

**CASE 1：**当两个节点试图传输相同的 ID 和相同的数据字段时，CAN 会将其视为单个消息，并将其发送到 CAN 总线上。在这里你真的不能说是节点 1 正在发送还是节点 2 正在发送，因为两者具有相同的 ID 和数据。

**案例2：**这里的数据字段不同。直到仲裁领域都不会有问题。由于两个节点的数据不同，您将收到总线错误。这是因为您的数据字段受[CRC](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)保护，并且位填充也会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T14:48:18.937

在 CAN N/W 中，如果 2 个设备具有相同的节点 ID，则两个设备都不会检测到并且不会发生消息的请求/响应。（什么都行不通……比如位填充、仲裁、错误检测、位监控、ACK、CRC）。

在 N/W 中，如果我们有不同的 ID，那么我们可以传输相同或不同的消息。为了控制 CAN N/W，我们使用仲裁的概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:26:04.643

*[我在Controller Area Network - CAN Information](http://hem.bredband.net/stafni/developer/CAN.htm)*中找到了答案。

不允许网络上的两个节点发送具有相同 ID 的消息。如果两个节点试图同时发送具有相同 ID 的消息，仲裁将不起作用。相反，其中一个发送节点将检测到他的消息在仲裁域之外被扭曲。然后节点将使用 CAN 的错误处理，在这种情况下最终将导致其中一个传输节点被关闭（总线关闭模式）。

# javascript - 重新声明变量（JS）的问题

> ID：10783639
> 
> 赞同：1
> 
> 时间：2012-05-28T11:07:01.863
> 
> 标签：javascript, extjs, jshint

所以...我最近开始通过 JSHint 运行我的代码，它抱怨以下内容：

```
function myfunc(config){
    var config = Ext.apply({},config,{});
    //Ext.apply is used as a deep object clone, to check for defaults ,  
    //typeof config !==null, etc 
} 
```

'var 配置已定义'

我有点认为它只是工作，到目前为止还没有真正遇到任何问题。

重新声明这样的变量有什么问题？（如果你知道怎么做，我如何禁用 JSHint 中的警告？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:12:22.920

只是说`config`已经声明了，因此您应该删除它，`var`因为它没用。这就像卖你的车来买同一辆车。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:12:59.177

`var config`引入了一个新的局部作用域变量，它可以从外部作用域隐藏任何同名变量。在您的情况下，您在已定义的同一范围内重新声明变量，因此它实际上可以按预期工作，但您不需要`var`声明，因为`config`已经在本地范围内。

# android - android - 如何从另一个选项卡重新启动选项卡

> ID：10783640
> 
> 赞同：0
> 
> 时间：2012-05-28T11:07:02.270
> 
> 标签：android, android-tabhost

我的应用程序有两个选项卡：`tab1`和`tab2`. 最初`tab1`被激活。在此选项卡中，我们有机会导航到子活动（从某种意义上说`tab1`，初始活动 (A1) 由一个按钮组成，如果单击该按钮，它将重定向到`Activity2`..）。

现在你点击`tab2`它，如果你点击它，它有一个按钮，然后我想重新启动`tab1`. 这意味着它显示了`tab1`初始活动 (A1)。如何实现这一点。我试过了，但我没有。

代码：

```
//This will just activate the tab1\. it's not reset

CustomTabActivity.mTabHost.setCurrentTab(0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:10:55.870

在`onClickListener`Tab2 的按钮中添加以下代码

```
tabHost.setCurrentTabByTag(String name of Tab1)); 
```

# android - 视口元标记在 iPhone 和 Android 中不起作用

> ID：10783641
> 
> 赞同：19
> 
> 时间：2012-05-28T11:07:10.460
> 
> 标签：android, iphone, html, meta-tags, viewport

我正在使用以下 html 代码

```
<!DOCTYPE HTML>
  <html>
    <head>
     <title>test</title>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    </head>
    <body>
    test
    </body>
  </html> 
```

我的目的是防止用户放大或缩小。上述代码不适用于 iPhone 和 Android。有什么解决办法吗？

**编辑：**它出现在 iPhone 设置中，如果`Zoom`选择为`On`下`Settings>Accessibility>Zoom`，那么这将覆盖元标记。[来源](https://stackoverflow.com/questions/4788269/ios-mobile-safari-still-zooms-while-viewport-is-set-to-user-scalable-no-chec)

不知道为什么它发生在android中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T11:12:56.097

我使用这个标签来防止在所有移动平台上缩放：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densityDpi=device-dpi" /> 
```

* * *

有`,`与无`;`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-05T12:56:43.020

就我而言，我有这个在 Android (Nexus 5) 和 iPhone 上运行良好的“视口”。

```
<meta name="viewport" content="width=device-width; initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5; " /> 
```

我希望这对你有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-07T07:53:15.020

放置此脚本以避免捏缩放。在最新版本的 safari 中，如果元标记不起作用

```
 document.documentElement.addEventListener('touchstart', function(event) {
     if (event.touches.length > 1) {
       event.preventDefault();
     }
   }, false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-08T08:38:01.027

```
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width; height=device-height" /> 
```

在三星 Galaxy S3 上运行良好

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-14T16:26:30.997

它似乎在普通的 iOS (11.3) 浏览器中不再起作用。

但是，如果将其添加到主屏幕并从那里启动，它仍然会影响网页。

因此，如果您触摸共享菜单，选择“添加到主屏幕”，然后从那里打开它，它将阻止您按预期进行缩放：

```
<meta charset="utf-8" />
<title>luckydonald/SelfhostedMouse</title>
<meta name="apple-mobile-web-app-title" content="SelfhostedMouse" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="viewport" content="user-scalable=no; width=device-width; initial-scale=1.0; minimum-scale=1.0; maximum-scale=1.0"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-04T20:04:31.267

有时您需要将 -webkit-flex:1 添加到容器中（如果使用了 flexbox）。这有助于我解决视口问题。

# javascript - 重定向到隐藏的 div

> ID：10783644
> 
> 赞同：0
> 
> 时间：2012-05-28T11:07:23.817
> 
> 标签：javascript, html, codeigniter

我正在使用 codeigniter 构建一个 Web 应用程序。我在以下情况下遇到了一些问题。

1.  用户单击“主页”上的提交按钮
2.  他被重定向到`home/ok`我检索他的信息的地方
3.  从`home/ok`他被重定向回`home#final`

但问题是，final 默认情况下是隐藏的，并且不显示。我有一个 JavaScript 函数可以切换 final 并显示它。

无论如何我可以使 ok 函数重定向到 JavaScript 函数吗？我不能将它添加到正文中`onload`，因为我不希望成功消息提前出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:16:29.060

如何做类似的事情：

```
<? $display = ($_SERVER['HTTP_REFERER'] == base_url() . 'home/ok')? 'block': 'none'; ?>
<div id="final" style="<?=$display?>;">
 OK
</div> 
```

根据页面的显示方式设置默认显示样式。

您也可以在`Flash data`中`Session class`查看，请参阅。[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)我认为它用于我认为您想要实现的目标

# c# - 我可以将 int 转换为 C# 枚举类型吗？

> ID：10783645
> 
> 赞同：4
> 
> 时间：2012-05-28T11:07:24.487
> 
> 标签：c#, .net, enums

我有一个具有两个值的枚举（基础类型`int`），以及一个采用该类型参数的方法。是否可以将任何 int 值转换为我的枚举类型并将其传递给方法？如果是这样，枚举的优势是什么？难道不应该限制可用值的选择吗？

```
class Program
{
    public void Greeting(MyCode code)
    {
        Console.WriteLine(code);
    }

    static void Main(string[] args)
    {
        var p = new Program();
        var m = new MyCode();

        m = (MyCode) 3;
        p.Greeting(m);
    }
}

public enum MyCode:int
{
   Hello =1,
   Hai
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T11:14:27.150

是的，您可以转换基础类型的任何值。从这个意义上说，枚举类型不是*限制性*类型。

使用枚举的优点是：

*   可读性
*   *不*明确转换时的正确性
*   能够通过反射等访问值

我同意更多类型也会有用，但它在 C# 中不存在。您可以在 C# 中构建自己的基于类的“伪枚举”，它允许一组受限的值（使用私有构造函数），但是：

*   你不能让它们不可为空
*   你不能打开它们
*   您不能将它们用于常量值（例如可选参数默认值）
*   该值将始终是一个引用，这可能会影响内存使用（例如，与具有底层字节类型的枚举相比）
*   面对序列化保留受限值很有趣

另一方面，这些类型可以多态地运行，并且比普通枚举具有更多的信息，这可能很有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T11:19:21.320

只是为了补充乔恩的答案：你总是可以使用

```
Enum.IsDefined(typeof(MyCode), value) 
```

检查枚举定义中是否存在提供的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T11:20:36.197

在许多方面，枚举在 .NET 语言中被实现为[语法糖。](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.71%29.aspx)去引用，

> enum 关键字用于声明一个枚举，一种由一组称为枚举数列表的命名常量组成的独特类型。

换句话说，枚举的值是与其他字段一样的字段，而不是值的整数选择。没有什么可以阻止您将无效值转换为枚举。要强制确保枚举的有效内容，您可以做的最多的事情是使用`Enum.IsDefined`静态方法（尽管如果您喜欢，您可能想要定义扩展方法）。

然而，枚举的目的不是验证用户输入，所以它们不必那么严格。枚举的目的是将名称与数值联系起来，并轻松显示此类可能组合的列表。并且不要忘记它们的松散结构允许诸如`Day.Saturday | Day.Friday`或更复杂的联轴器之类的事情。它们仍然非常有用。

# iphone - CoreGraphics 用不同颜色渲染两条或多条线

> ID：10783646
> 
> 赞同：0
> 
> 时间：2012-05-28T11:07:27.883
> 
> 标签：iphone, objective-c, ios, core-graphics

**我有一个名为 myView 的 UIView**

```
@interface MyView : UIView {    UIImage *myPic;
        NSMutableArray *myDrawing; }

@end 
```

**我使用 touches 开始更新了这个数组，在 touches 移动和 touches 中通过添加值来结束。**

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
 //   myDrawing = [[NSMutableArray alloc] initWithCapacity:4];
   [myDrawing addObject:[[NSMutableArray alloc] initWithCapacity:4]]; 
    CGPoint curPoint = [[touches anyObject] locationInView:self]; 
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.x]]; 
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.y]];
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint curPoint = [[touches anyObject] locationInView:self]; 
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.x]];
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.y]]; 
    [self setNeedsDisplay];
}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint curPoint = [[touches anyObject] locationInView:self]; 
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.x]];
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.y]];
    [self setNeedsDisplay];
} 
```

然后我使用 draw rect 方法来更新线条

```
- (void)drawRect:(CGRect)rect
{
    // Drawing code

    float newHeight;
    float newWidth; 

    if (!myDrawing) {
        myDrawing = [[NSMutableArray alloc] initWithCapacity:0];
    }

    CGContextRef ctx = UIGraphicsGetCurrentContext(); 

    if (myPic != NULL) 
    {
        float ratio = myPic.size.height/460; 
        if (myPic.size.width/320 > ratio) 
        {
            ratio = myPic.size.width/320;
        }  

        newHeight = myPic.size.height/ratio;
        newWidth = myPic.size.width/ratio;
        [myPic drawInRect:CGRectMake(0,0,newWidth,newHeight)];
    }

    if ([myDrawing count] > 0) {
        CGContextSetLineWidth(ctx, 3);
        NSData *colorData = [[NSUserDefaults standardUserDefaults] objectForKey:@"SwatchColor"];
        UIColor *color;
        if (colorData!=nil) {
            // If the data object is valid, unarchive the color we've stored in it.
            color = (UIColor *)[NSKeyedUnarchiver unarchiveObjectWithData:colorData];

        }
        if (color)
        {
            CGContextSetStrokeColorWithColor(ctx, color.CGColor);  
        }
        else
        {
            CGContextSetStrokeColorWithColor(ctx,[UIColor blackColor].CGColor);
        }

        for (int i = 0 ; i < [myDrawing count] ; i++) {
            NSArray *thisArray = [myDrawing objectAtIndex:i];
            if ([thisArray count] > 2) 
            {
                float thisX = [[thisArray objectAtIndex:0] floatValue];
                float thisY = [[thisArray objectAtIndex:1] floatValue];

                CGContextBeginPath(ctx);
                CGContextMoveToPoint(ctx, thisX, thisY);

            for (int j = 2; j < [thisArray count] ; j+=2) 
            { 
                thisX = [[thisArray objectAtIndex:j] floatValue];
                thisY = [[thisArray objectAtIndex:j+1] floatValue];

                CGContextAddLineToPoint(ctx, thisX,thisY);
                //CGContextAddQuadCurveToPoint(ctx, 150, 10, thisX, thisY);
                 // CGContextAddCurveToPoint(ctx , 0, 50, 300, 250, thisX, thisY);
            }
                CGContextStrokePath(ctx);

            }
        }
    }

} 
```

**我的代码中有一个颜色选择器来更改颜色，我想每次通过选择颜色来绘制不同颜色的线条，但到目前为止，因为我正在构建线条并在我最初选择红色并绘制线条时渲染它，并且然后选择蓝色并画一条线，现在旧线也变成蓝色而不是红色，但是我希望红色保持红色，蓝色这样的任何人都可以帮忙吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:27:20.277

你总是在画线上画画。清除`myDrawing`以使其仅存储需要处理的点，如果您需要撤消/优化保存功能，则将已处理的点保留在另一个数组中。

# c# - 序列化包含 BitmapImage 的类的方法：使用 2 个继承的类？

> ID：10783647
> 
> 赞同：2
> 
> 时间：2012-05-28T11:07:31.690
> 
> 标签：c#, serialization, windows-8, windows-runtime, winrt-xaml

当我的应用程序关闭时，我想序列化一些数据以使其持久化以供下次使用应用程序。我选择使用 Newtonsoft.JsonConverter 序列化这些数据。但是，我的班级中有一个 BitmapImage，它不能被序列化。

我对此有点坚持，因为我找不到将 BitmapImage 保留在我的班级中（我需要将其保留在这里）并能够序列化此类的解决方案。我试图创建一个包含 BitmapImage 的继承类，但我不允许从我的基类创建隐式运算符。

我想在我的类中有一个对象，它可以用作 Image 绑定的源，并且能够序列化这个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:21:56.093

我建议只“将位图保存到文件”并仅序列化图像文件名。

但是，如果您必须序列化位图，只需将位图作为 byte[] 保存到 MemoryStream 中。

```
byte[] byteArray;

using (MemoryStream stream = new MemoryStream()) 
{
        Image.Save(stream, ImageFormat.Bmp);
        byteArray = stream.ToArray();
} 
```

**更新：**

通过图像路径序列化您的图像。

```
private string m_imagePath;

    public Image Image { get; private set; }

    public string ImagePath
    {
        get { return m_imagePath; }
        set 
        {
            m_imagePath = value;
            Image = Image.FromFile(m_imagePath);
        }
    } 
```

**更新：**

```
[JsonObject(MemberSerialization.OptIn)]
public class MyClass
{
    private string m_imagePath;

    [JsonProperty]
    public string Name { get; set; }

    // not serialized because mode is opt-in
    public Image Image { get; private set; }

    [JsonProperty]
    public string ImagePath
    {
        get { return m_imagePath; }
        set
        {
            m_imagePath = value;
            Image = Image.FromFile(m_imagePath);
        }
    }
} 
```

如您所见，这里有一个 json 对象，该对象具有 Opt-In 属性，这意味着您需要指定要序列化的属性。
这个演示对象有一个被序列化的 Name 属性，一个被序列化的 ImagePath 属性。
但是，Image 属性未序列化。
当您反序列化对象时，图像将加载，因为 ImagePath 设置器具有所需的功能。

我希望这会有所帮助，我对其进行了测试，并且可以正常工作。
喜欢就评价。祝你好运！

# ios - Xcode 不接受 72x72px 的应用程序图标？

> ID：10783649
> 
> 赞同：0
> 
> 时间：2012-05-28T11:07:32.287
> 
> 标签：ios, xcode, icons

我无法将 ipad 应用程序的应用程序图标导入 xcode，我制作了它并将其从 photoshop 导出为 png，通常我可以将它从 finder 直接拖到 xcode 中的应用程序图标部分，但它不能正常工作不会被加载到占位符中。

它很奇怪，因为它的 72x72px 72dpi png 没有 alpha 46kb .. 但是视网膜 144x144px 72dpi png 66kb 和 alpha 作品

有什么想法可能导致这种情况吗？

![在此处输入图像描述](../Images/d6e9c9b16965ac8bb2dcca9561cb5002.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:08:18.563

应要求发布的评论作为答案：

您是否尝试过手动添加？（右键单击屏幕截图中的“未指定图像”区域，然后“选择文件”）是否有实际的错误消息？

# asp.net - error：远程查看应用程序错误的详细信息

> ID：10783651
> 
> 赞同：16
> 
> 时间：2012-05-28T11:07:40.270
> 
> 标签：asp.net, sql, web-config, connection-string

我有 2 个登录页面：Login.aspx-用于客户登录和 xlogin.aspx 用于管理员登录admin.aspx 页面 - 但我收到此错误：

```
Server Error in '/' Application.
Runtime Error
Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine.

Details: To enable the details of this specific error message to be viewable on remote machines, please create a <customErrors> tag within a "web.config" configuration file located in the root directory of the current web application. This <customErrors> tag should then have its "mode" attribute set to "Off".

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration>

Notes: The current error page you are seeing can be replaced by a custom error page by modifying the "defaultRedirect" attribute of the application's <customErrors> configuration tag to point to a custom error page URL.

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
    </system.web>
</configuration> 
```

这是我的 web.config

```
<?xml version="1.0"?>

<configuration>
  <connectionStrings>
    <clear/>
    <add name="PROJEntities" connectionString="metadata=res://*/PROJModel.csdl|res://*/PROJModel.ssdl|res://*/PROJModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=000.000.0.00;Initial Catalog=DBNAME;User ID=MYUSERNAME;Password=MYPASS;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient"/>
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">
        <forms loginUrl="~/Login.aspx" timeout="720" slidingExpiration="true" defaultUrl="~/Gateway.ashx"/>
    </authentication>

    <customErrors mode="Off"/>
    <pages enableEventValidation="false" viewStateEncryptionMode="Never"></pages>
  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <system.web.extensions>
    <scripting>
      <webServices>
        <jsonSerialization>
          <converters>
            <add type="PROJ.Presentation.Common.DateTimeConverter" name="DateTimeJavaScriptConverter"/>
          </converters>
        </jsonSerialization>
      </webServices>
    </scripting>
  </system.web.extensions>
</configuration> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-28T11:18:29.630

亲爱的奥尔加很清楚消息的内容。关闭自定义错误以查看有关此错误的详细信息以进行修复，然后将其关闭。所以添加 mode="off" 为：

```
<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

相对答案： [部署网站：500 - 内部服务器错误](https://stackoverflow.com/questions/5385714/deploying-website-500-internal-server-error/5385884#5385884)

顺便说一句：错误消息声明 web.config 不是您在此处键入的那个。也许您忘记上传您的 web.config ？并记住关闭用于在线页面的 web.config 上的调试标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-28T10:39:44.873

就我而言，我收到此消息是因为我的连接字符串中有一个特殊的字符 (&)，删除它然后一切都很好。

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-04T12:52:48.360

即使在 web.config 文件中关闭了自定义错误，这也可能是您收到的消息。这可能意味着您已用完承载应用程序的驱动器上的可用空间。如果您没有其他空间可以在驱动器上获得，请清理您的日志文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-22T17:31:34.913

说明：服务器上发生应用程序错误。此应用程序的当前自定义错误设置可防止远程查看应用程序错误的详细信息（出于安全原因）。但是，它可以被本地服务器机器上运行的浏览器查看。

详细信息：要在远程计算机上查看此特定错误消息的详细信息，请在位于当前 Web 应用程序根目录的“web.config”配置文件中创建一个标签。然后，此标记应将其“模式”属性设置为“关闭”。

# qt - 通过层次结构传递信号

> ID：10783656
> 
> 赞同：16
> 
> 时间：2012-05-28T11:07:51.733
> 
> 标签：qt

我在完全掌握 Qt 中如何使用信号和插槽时遇到了一些困难。我确信它真的很基本，但我今天就是不明白。

我有一组有点像这样的小部件：

MainWindow -->StackedWidget -->ChildForms

现在的想法是子小部件上的一些操作将导致堆叠的小部件显示不同的页面。

因此，如果我正确理解它，我认为连接信号和插槽的方法是`connect()`在知道对象的范围内使用，但我设法得到的工作并没有这样做。目前在我的子表单中，我使用 parentWidget() 来访问 StackedWidget 的插槽，但我真的不是很满意，因为它给了孩子关于它不应该拥有的父母的信息：

```
void TaskSelectionForm::setButtonMappings()
{
    // Set up a mapping between the buttons and the pages
    QSignalMapper *mapper = new QSignalMapper(this);
    connect(mapper, SIGNAL(mapped(int)), parentWidget(), SLOT(setCurrentIndex(int)));

    mapper->setMapping(ui->utilitiesButton, 2); // Value of the index
    connect(ui->utilitiesButton, SIGNAL(clicked()), mapper, SLOT(map()));
} 
```

但我不确定我应该如何做到这一点并将其连接起来。我是否需要在每个级别都有信号并通过树发出？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-31T21:49:48.350

## A Bit of Signal-Slot Theory

The signal-slot connections are oblivious to parent-child relationships between QObjects, and any such relationship doesn't matter. You're free to connect objects to their children, to their siblings, to their parents, or even to QObjects that are in a separate hierarchy, or to lone QObjects that have neither parents nor children. It doesn't matter.

A signal-slot connection connects a signal on a particular *instance* of QObject to slot on another *instance* of QObject. To use the connect method, you need the pointers to the instance of sender QObject and the instance of receiver QObject. You then use the static `QObject::connect(sender, SIGNAL(...), receiver, SLOT(...))`. Those connections have nothing to do with any hierarchy there is between the sender and receiver.

You can also connect a signal to a signal, to forward it -- for example from a private UI element to a signal that's part of the API of the class. You cannot connect a slot to a slot, because it'd incur a bit of runtime overhead for a rarely-used case. The overhead would be an extra `bool` member in QObjectPrivate, plus a failed `if (bool)` test. If you want to forward slots to slots, there are at least two ways to do it:

1.  Emit a signal in the source slot and connect that signal to the destination slot.

2.  Obtain a list of all signals connected to the source slot, iterate on it and connect them to to the target slot. There's no easy way to maintain such connections when further signals are connected or disconnected from the source slot. Unfortunately, QObject only has a `connectNotify(const char*)` protected function, but not a signal -- so you can't hook up to it unless you would modify `src/corelib/kernel/qobject[.cpp,_p.h,.h]` to emit such a signal. If you truly need it, just modify the Qt source, you have access it for a reason, after all. Hacking the vtable without modifying Qt is possible, but discouraged for obvious reasons.

## The Answer

Below is a self contained example that shows how to do what you want. Turns out I have answers to quite a few questions from my various experiments I've done in Qt in the past. I'm a packrat when it comes to test code. It's all SSCCE to boot :)

```
// https://github.com/KubaO/stackoverflown/tree/master/questions/signal-slot-hierarchy-10783656
#include <QtGui>
#if QT_VERSION >= QT_VERSION_CHECK(5,0,0)
#include <QtWidgets>
#endif

class Window : public QWidget
{
   QSignalMapper m_mapper;
   QStackedLayout m_stack{this};
   QWidget      m_page1,                  m_page2;
   QHBoxLayout  m_layout1{&m_page1},      m_layout2{&m_page2};
   QLabel       m_label1{"Page 1"},       m_label2{"Page 2"};
   QPushButton  m_button1{"Show Page 2"}, m_button2{"Show Page 1"};
public:
   Window(QWidget * parent = {}) : QWidget(parent) {
      // the mapper tells the stack which page to switch to
      connect(&m_mapper, SIGNAL(mapped(int)), &m_stack, SLOT(setCurrentIndex(int)));

      // Page 1
      m_layout1.addWidget(&m_label1);
      m_layout1.addWidget(&m_button1);
      // tell the mapper to map signals coming from this button to integer 1 (index of page 2)
      m_mapper.setMapping(&m_button1, 1);
      // when the button is clicked, the mapper will do its mapping and emit the mapped() signal
      connect(&m_button1, SIGNAL(clicked()), &m_mapper, SLOT(map()));
      m_stack.addWidget(&m_page1);

      // Page 2
      m_layout2.addWidget(&m_label2);
      m_layout2.addWidget(&m_button2);
      // tell the mapper to map signals coming from this button to integer 0 (index of page 1)
      m_mapper.setMapping(&m_button2, 0);
      connect(&m_button2, SIGNAL(clicked()), &m_mapper, SLOT(map()));
      m_stack.addWidget(&m_page2);
   }
};

int main(int argc, char *argv[])
{
   QApplication a(argc, argv);
   Window w;
   w.show();
   return a.exec();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:23:07.017

```
Connect(stackedwidget->currentactivewidget,SIGNAL(OnAction()),this,SLOT(PrivateSlot())); 
```

`PrivateSlot()`是一个私下声明的槽。所以在这个函数中，你可以添加你的代码来改变stackedwidget对应currentactivewidget产生的动作的页面。

同样，如果您真的想将信号向上传递到层次结构，`publicsignal()`请在私有插槽函数的末尾发出 a 。

```
Connect(this,SIGNAL(publicsignal()),Parentwidgetofstackedwidget(here mainwindow),SLOT(mainwindow_slot())); 
```

# java - Dijkstra算法有双向搜索的实现吗？

> ID：10783659
> 
> 赞同：9
> 
> 时间：2012-05-28T11:08:06.973
> 
> 标签：java, algorithm, graph-theory, dijkstra, shortest-path

我正在为 Java 中的 Dijkstra（或任何其他源到目的地最短路径算法）寻找双向搜索（又名“在中间相遇”算法）的实现。

由于双向搜索处理比看起来更棘手（[图算法，第 26 页](http://liu.diva-portal.org/smash/get/diva2:114159/FULLTEXT01)），我想在重新发明轮子之前考虑现有的实现！

PS：我说的是[双向搜索](http://en.wikipedia.org/wiki/Bidirectional_search)，不要与双向图混淆）

这是一个棘手的图表示例：

![在此处输入图像描述](../Images/2fda189803b461927f9a77300b566dd0.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-21T13:14:19.247

Yes, there is at least in Java: [https://github.com/coderodde/GraphSearchPal/blob/master/src/main/java/net/coderodde/gsp/model/support/BidirectionalDijkstraPathFinder.java](https://github.com/coderodde/GraphSearchPal/blob/master/src/main/java/net/coderodde/gsp/model/support/BidirectionalDijkstraPathFinder.java)

In a bidirectional Dijkstra's algorithm, you maintain actually two "Dijkstra's algorithms": the forward search and the backward search. Now, the forward search resembles a lot the unidirectional Dijkstra's algorithm. The backward search, however, proceeds in "reversed" fashion. If there is a directed edge (colloquially called an **arc**) **`(u, v)`**, the forward search would traverse it from **`u`** to **`v`**, whereas the backward search would do the same in opposite direction.

Because the two search processes meet (usually) somewhere in between the source node and the target node, we need another termination condition, which in bidirectional Dijkstra's algorithm is

```
g(top(OPEN_forward)) + g(top(OPEN_backward)) > l 
```

where **`l`** is the length of the shortest known so far path between the source and target nodes.

Additional code you might see only in bidirectional version is checking the possibility of shortening a shortest path candidate **every** time you improve the **`g`** value of any node. (The **`g`** value of a node **`u`** is the shortest (known so far) distance from the node from which the search started to **`u`**.)

# php - 使用 codeigniter 发送邮件

> ID：10783661
> 
> 赞同：0
> 
> 时间：2012-05-28T11:08:18.340
> 
> 标签：php, email, codeigniter

我想使用 codeigniter 发送邮件。我正在使用 codeigniter 作为邮件程序。我写了一个控制器并将其上传到网上。当我打电话给控制器时。这显示了错误。我正在写我的控制器

```
<?php

class Testmail extends CI_Controller {

    public $data = array();

    public function __construct()
    {
        parent::__construct();
        $this->load->helper('url_helper');
        $this->load->helper(array('form', 'url'));
        $this->load->library('email');
        $this->load->helper('url'); 

    }

    public function mailsend()
    {
            $config['protocol'] = 'sendmail';
            $config['mailpath'] = '/usr/sbin/sendmail';
            $config['charset'] = 'iso-8859-1';
            $config['wordwrap'] = TRUE; 
            $this->email->initialize($config);

            $this->email->from('kunal.saxena.kunal@gmail.com', 'Your Name');
            $this->email->to('kunal.saxena.kunal@gmail.com'); 
            $this->email->subject('Email Test');
            $this->email->message('Testing the email class.');  

            $this->email->send();

            echo $this->email->print_debugger();

    }
} 
```

但它不工作，我得到了这样的错误

```
Exit status code: 127
Unable to open a socket to Sendmail. Please check settings.
Unable to send email using PHP Sendmail. Your server might not be configured to send mail using this method.
User-Agent: CodeIgniter
Date: Mon, 28 May 2012 10:51:18 +0000
From: "Your Name" 
Return-Path: 
To: kunal.saxena.kunal@gmail.com
Subject: =?iso-8859-1?Q?Email_Test?=
Reply-To: "kunal.saxena.kunal@gmail.com" 
X-Sender: kunal.saxena.kunal@gmail.com
X-Mailer: CodeIgniter
X-Priority: 3 (Normal)
Message-ID: <4fc358a653ad4@gmail.com>
Mime-Version: 1.0

Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Testing the email class. 
```

如何删除此错误..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:32:28.403

确保您的服务器有 sendmail 并且设置正确，如果您没有它并且无法安装它，您可以使用 googles SMTP 服务器发送电子邮件，这就是我在 localhost 上所做的。[您可以在此处](https://stackoverflow.com/questions/1555145/sending-email-with-gmail-smtp-with-codeigniter-email-library)找到如何执行此操作的示例

PS。控制器看起来不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:49:47.393

您需要在计算机上安装 MTA（邮件传输代理）才能实际发送电子邮件，并且需要配置 PHP 以使用它来发送电子邮件。

如果您使用 Linux 或 OS X 作为开发环境，我强烈推荐 msmtp 作为一个易于配置的解决方案。让它与几乎任何电子邮件帐户一起工作真的很容易，而且让 PHP 与之交谈也很容易。我在使用 CodeIgniter 项目的 Ubuntu 开发机器上使用这个设置，它运行得非常好。Arch Linux wiki 上有[一个很好的教程](https://wiki.archlinux.org/index.php/Msmtp#Send_mail_with_PHP_using_msmtp)，虽然其中大部分内容应该相对容易适应其他 Linux 发行版或 OS X。

# actionscript-3 - 异步应用程序设计

> ID：10783662
> 
> 赞同：2
> 
> 时间：2012-05-28T11:08:26.547
> 
> 标签：actionscript-3, oop, design-patterns, architecture

我正在用 ActionScript 3 构建一个应用程序，它：

*   向各种网络服务发出网络请求；
*   在一些界面项目上使用动画；
*   接受用户输入，这有时是“愚蠢的”。例如，用户不想再等待 Web 响应并取消操作。

处理应用程序的所有可能状态以及协调来自已完成线程（例如 Web 服务请求）的所有回调的最佳实践是什么？

对于一个简单的应用程序，在应用程序的单例中存储一些属性就可以完成这项工作。然而，对于更复杂的应用程序，这种跟踪的复杂性以几何级数增长。

**示例**：要启用特定按钮，应该完成三个 Web 请求，其中两个是顺序的，一个使用前一个的结果，两个都完成后，应该出现一个使用幻灯片动画的面板。如果用户决定在 Web 请求或动画阶段取消该过程，他应该能够通过点击另一个按钮来执行此操作。这种类型的作品有几十个，具有不同的逻辑和要求。到目前为止，我正在使用回调和 App 的 Singleton 变量来执行此操作。回调的数量急剧增加。

规划这样的应用程序变得相当困难。还请建议**一种以示意图方式绘制**此类逻辑和依赖关系的方法？我还不习惯 UML，简单的算法方案对我来说更熟悉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T01:21:49.493

我的建议是花一些时间研究一些更流行的基于 MVC 的 ActionScript 3.0 框架。这些是专门为满足您以高度解耦的方式和使用最佳实践而详述的需求而设计的。

我已经使用[PureMVC](http://puremvc.org)几年了，发现它轻巧、灵活且直观。它还具有得到难以置信的良好支持的优势（它的作者大量参与回答论坛上的问题），并且该框架的知识可以转移，因为它已被移植到各种其他语言（[最近的 JavaScript](http://puremvc.org/content/view/186/1/)）。

一个好的框架将为您做出许多基本的架构决策，让您可以自由地专注于实现。通过在理解框架方面进行一些前期投资，规划应用程序（如您所描述的应用程序）变得更加容易，因为您将能够查看需求并立即开始将它们映射到所选框架的各个参与者。

# php - 文件更改时是否可以触发 AJAX？

> ID：10783665
> 
> 赞同：0
> 
> 时间：2012-05-28T11:08:33.003
> 
> 标签：php, javascript, ajax

我正在尝试使用 AJAX 读取文件或数据库何时更改（另一个用户添加了额外的帖子），并显示最新的帖子（有点像 SO）

它确实有效，但问题是我使用的主机只允许一定数量的“每小时资源使用量”，一旦达到限制，网站就会被锁定一个小时。这是我主要用于测试和学习的免费主机。

因此，在此之前，我将 AJAX 设置为每 2-4 秒检查一次的 setInterval，来自一个刚刚回显系统中发布的最后一个帖子的文件。我猜这是在几分钟内关闭站点一个小时的原因。

所以我想知道是否有办法让它只在结果与上次发现的结果不同时才检索最新的帖子。听起来那是不可能的，因为它仍然必须每次都检查，激活 PHP，不管发回什么。

有什么想法可以做到这一点或类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:13:50.377

您可以使用[http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)（但我猜不是在您的主机上，因为您必须安装一个 apache 扩展）或者您使用[http://en.wikipedia.org/wiki /Push_technology#Long_polling](http://en.wikipedia.org/wiki/Push_technology#Long_polling)。

通过长轮询，您向 PHP 发送一个请求，PHP 脚本循环，直到找到新帖子，然后发送响应。

但是您确实应该考虑更改主机，因为实时 Web 应用程序需要 moe 资源。为什么不在您的机器上进行本地测试和学习？

# c# - 获取 xaml 文件中的文本

> ID：10783666
> 
> 赞同：0
> 
> 时间：2012-05-28T11:08:33.873
> 
> 标签：c#, .net, wpf, xaml

我有大约 200 个从 Illustrator 生成的 xaml 文件，因此其中的文本采用以下格式：

```
>     <Canvas Name="TextBlock" Height="338.674" Canvas.Left="0" Canvas.Top="0" Width="378.608">
>                       <Path Data="F1M66.54195,312.7368L66.54195,311.1118L57.807575,311.1118L57.807575,295.64305L55.97945,295.64305L55.97945,312.7368L66.54195,312.7368"
> Fill="Black" Height="17.094" Canvas.Left="1.75" Stretch="Fill"
> Canvas.Top="85.899" Width="10.562"/>
>                       <Path Data="F1M78.4502,306.83055C78.4502,305.002425,78.2002,303.346175,77.0127,302.127425C76.184575,301.314925,75.059575,300.783675,73.622075,300.783675C72.184575,300.783675,71.059575,301.314925,70.23145,302.127425C69.04395,303.346175,68.79395,305.002425,68.79395,306.83055C68.79395,308.658675,69.04395,310.314925,70.23145,311.533675C71.059575,312.346175,72.184575,312.877425,73.622075,312.877425C75.059575,312.877425,76.184575,312.346175,77.0127,311.533675C78.2002,310.314925,78.4502,308.658675,78.4502,306.83055
> M76.715825,306.83055C76.715825,308.158675,76.653325,309.6118,75.778325,310.4868C75.23145,311.033675,74.465825,311.346175,73.622075,311.346175C72.778325,311.346175,72.04395,311.033675,71.48145,310.4868C70.622075,309.6118,70.528325,308.158675,70.528325,306.83055C70.528325,305.51805,70.622075,304.0493,71.48145,303.189925C72.04395,302.627425,72.778325,302.314925,73.622075,302.314925C74.465825,302.314925,75.23145,302.627425,75.778325,303.189925C76.653325,304.0493,76.715825,305.51805,76.715825,306.83055" Fill="Black" Height="12.094" Canvas.Left="14.565" Stretch="Fill"
> Canvas.Top="91.04" Width="9.656"/>
>                       <Path Data="F1M91.310825,312.7368L91.310825,300.9243L89.57645,300.9243L89.57645,308.20555C89.57645,310.26805,88.404575,311.346175,86.623325,311.346175C84.8577,311.346175,83.748325,310.283675,83.748325,308.20555L83.748325,300.9243L82.029575,300.9243L82.029575,308.471175C82.029575,309.83055,82.38895,310.95555,83.217075,311.783675C83.935825,312.502425,84.998325,312.877425,86.26395,312.877425C87.592075,312.877425,88.76395,312.377425,89.6077,311.4243L89.6077,312.7368L91.310825,312.7368"
> Fill="Black" Height="11.953" Canvas.Left="27.8" Stretch="Fill"
> Canvas.Top="91.18" Width="9.281"/> 
```

我的问题是：我可以使用 c# 代码将这些字母生成为文本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:17:13.450

[请参阅将Illustrator 或 pdf 文件处理为 XAML](https://stackoverflow.com/questions/3551180/processing-illustrator-or-pdf-files-into-xaml)的答案：[https ://stackoverflow.com/a/4536756/563088](https://stackoverflow.com/a/4536756/563088)

简而言之：出口商必须支持它。我几乎不可能将路径转回字形/文本。那就是OCR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:17:01.727

是的，您可以使用 xml 反序列化，

您需要的是 1 > 用于验证的 Xsd 文件（如果需要） 2 > 可以存储您的 xml 文件数据的类文件

您可以使用 Xsd.exe 从 Xsd 文件创建类。并为 xml 创建 Xsd 文件。在 C# IDE 中打开 Xml 文件并转到架构菜单 > 创建 Xsd 文件。

此处的帮助是链接 [如何反序列化 XML 文档](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document)（反序列化示例） [http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx)（Xsd.exe 的帮助）

# ruby-on-rails - 在同一选项中选择带有月份-年份的日期标签

> ID：10783667
> 
> 赞同：1
> 
> 时间：2012-05-28T11:08:35.263
> 
> 标签：ruby-on-rails, form-helpers

[一些 Rails 表单助手](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html)允许我们轻松地为日期输入放置选择字段。这里的事情是各个日期字段，日-月-年，默认情况下是分开的。从 UI 的角度来看，这可能很尴尬。

是否可以将月份和年份分别放在一个选项中，例如：

```
<select>
 <option value="01/05/2012">May - 2012</option>
 <option value="01/06/2012">Jun - 2012</option>
 ... 
 <option value="01/04/2013">Apr - 2013</option>
</select> 
```

虽然绝对可以手工完成，但我们可以利用[`DateHelper`](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html)s、eg`select_month`或`date_select`它们的所有魔法来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:13:46.657

在控制器中

```
@date = Date.today
@months = []
(0..11).each do |m|
  @months << [@date.next_month(m).strftime("%b %Y"), @date.next_month(m)]
end 
```

在erb

```
<%= select_tag "month_year", options_for_select(@months) %> 
```

# facebook-javascript-sdk - 具有 URL 转发和屏蔽的域上的 Facebook 应用程序

> ID：10783671
> 
> 赞同：0
> 
> 时间：2012-05-28T11:08:47.037
> 
> 标签：facebook-javascript-sdk, facebook-apps

我正在[http://example.com/webapp/](http://example.com/webapp/)我的服务器上使用 Facebook Javascript SDK 开发一个 Web 应用程序。现在我注册了一个没有托管的新域名，比如 domain.com，并且我使用 URL 掩码 domain.com 转发到 example.com/webapp/，因此 Web 应用程序仍在我的服务器上 example.com/webapp/ . 我尝试将 Facebook 上的应用设置、站点域更改为 domain.com 并将网站 URL 更改为 domain.com，但 Javascript SDK 不起作用！我认为问题在于对 facebook 的请求来自我在 example.com 的服务器，而应用程序域是 domain.com。我注意到 JS SDK 使用 window.location 来检索要与应用程序域和网站 url 匹配的 url。有没有办法在每个 JS SDK 函数调用中使用我的重定向域域的 url 注入 redirect_uri 参数。

感谢大家的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:35:52.277

您应该查看是否可以使用`domain.com`指向直接`example.com/webapp`使用`Add-on Domains`.

即创建一个虚拟主机并将新域链接到旧域名上的实际文件。转发并不是最好的方式，因为一些转发使用 iframe 或 javascript 来重定向。

# blackberry - 黑莓网络工程项目不可选择？

> ID：10783672
> 
> 赞同：1
> 
> 时间：2012-05-28T11:08:49.237
> 
> 标签：blackberry, blackberry-webworks

我是 BB 应用程序开发的新手

我已经下载并安装了eclipse“BlackBerry_JDE_PluginFull_1.3.0.201102031007-19”的黑莓插件。

但是当我打开它并要创建新项目时。我没有找到“Blackberry webworkds 项目”的任何选项

任何人都可以建议为什么会这样或如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:38:06.887

[Eclipse更新站点](http://www.blackberry.com/go/eclipseUpdate/3.6/java)不再提供用于 Eclipse 的 BlackBerry 插件。您可以像您一样从他们的网站下载包含 Eclipse 和 BlackBerry JDE 的完整包/捆绑包。“创建一个新的 BlackBerry WebWorks 项目”选项也已被删除。

不幸的是，您现在需要手动设置您的项目并将配置文件、javascript 文件放在一起，然后使用 Ripple 模拟器对其进行测试。[在这里](https://developer.blackberry.com/html5/download/)可用

# mysql - 更改 ft_stopword_file 设置后启动 mysql 时出现超时错误

> ID：10783674
> 
> 赞同：1
> 
> 时间：2012-05-28T11:08:55.537
> 
> 标签：mysql, stop-words

我想关闭停用词，并更新我的 my.cnf 文件以包括：

```
ft_stopword_file="" 
```

但是，现在重新启动 mysql 时出现超时错误。如果我擦除`ft_stopword_file=""`，错误就会消失。

我是语法错误，还是需要为新设置增加超时。如果增加，那设置在哪里？

# java - 如何在 Java 中检查文件权限（独立于操作系统）

> ID：10783677
> 
> 赞同：12
> 
> 时间：2012-05-28T11:09:16.873
> 
> 标签：java, file-permissions

我有以下代码片段：

```
public class ExampleClass {

public static void main(String[] args) throws FileNotFoundException {
    String filePath = args[0];
    File file = new File(filePath);

    if (!file.exists())
        throw new FileNotFoundException();

    if (file.canWrite())
        System.out.println(file.getAbsolutePath() + ": CAN WRITE!!!");
    else
        System.out.println(file.getAbsolutePath() + ": CANNOT WRITE!!!!!");

    if (file.canRead())
        System.out.println(file.getAbsolutePath() + ": CAN READ!!!");
    else
        System.out.println(file.getAbsolutePath() + ": CANNOT READ!!!!!");

    if (file.canExecute())
        System.out.println(file.getAbsolutePath() + ": CAN EXECUTE!!!");
    else
        System.out.println(file.getAbsolutePath() + ": CANNOT EXECUTE!!!!!");
}
} 
```

它适用于 Linux 操作系统，但问题是它不适用于 windows7。所以问题是：有人知道一种方法来独立检查 Java OS 中文件的权限吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T11:40:06.900

~~这可能是由某些东西（例如防病毒产品）以不一致的方式“调解”文件访问造成的。~~

当然，很难相信 Java`File.canXxxx()`方法*通常*在任何风格的 Windows 上都被破坏了。

* * *

**更新**- 我收回了。阅读[此 Sun 错误报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6203387)……然后哭泣。简短的回答是这是一个 Windows 错误，Sun 决定不解决它。（但新的 Java 7 API*确实*有效……）

FWIW，我认为尝试像这样检查文件访问权限是不好的做法。最好简单地尝试使用该文件，并在它们发生时捕获异常。有关我的推理，请参阅[https://stackoverflow.com/a/6093037/139985](https://stackoverflow.com/a/6093037/139985)。（现在我们还有另一个原因......）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-06T10:49:30.850

我已经对 NIO API（来自 Java 7）进行了一些测试，它们似乎工作得很好。

```
import java.io.FileNotFoundException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

public class PermissionCheck {

    public static void main(String[] args) throws FileNotFoundException {

        String filePath = args[0];
        Path p = Paths.get(filePath);

        if (Files.notExists(p))
            throw new FileNotFoundException();

        if (Files.isWritable(p))
            ...

        if (Files.isReadable(p))
            ...

        if (Files.isExecutable(p))
            ...
    }
} 
```

JDK：1.7.0_25、1.8.0_91

操作系统：Windows 7、8（64 位）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-12T12:00:06.833

首先，默认情况下和设计上，Java 信任本地文件和不信任远程文件。因此，在测试时，请注意，您可以在家中的计算机上执行的操作，在您公司服务器的某些远程驱动器中可能是不可能的。

其次，当我们检查远程驱动器上的文件权限时，通常仅在 Windows 资源管理器中设置是不够的（`Property...`- `Read only`/ `Hide`/`Archive`等）。例如，我的组织有其他机制来控制本地和远程文件的权限，即使是我的 PC 的管理员也不能保证一切。即使您可以手动/以编程方式更改文件的权限，但如果某些其他应用程序/组策略/等禁止您这样做，更改可能会失败。（比如`setReadable()`returns `false`，表示不可能）比如我可以远程目录下`execute`的一个`txt`文件，意思是打开它，但是一个`bat`同一目录中的文件不可执行，实际上，就我而言，当我想创建`bat`文件时，我需要让我的管理员获得更多权限。我认为这可能`bat`是禁止扩展。因为作为 Windows 中某个用户组中的用户，您的操作和运行的 JVM 受到比 JVM 本身更高的规则的限制。如果我错了，请纠正我。

但是，即使您可能无法设置文件的权限，现在您也可以在 Java 7 中正确读取它们。显然，在错误报告之后，Java 人员已经做了一些修复大部分的事情。我正在使用`jdk 1.7.0_19`，为了测试，我做了以下事情：

1.  在 Windows 资源管理器中将远程文件的属性设置为`Read Only`和`Hidden`。

2.  从 Java 中阅读它，代码如下（来自 Stephen C 的链接并修改以查看`setXxxxx()`方法是否可以工作）。

    ```
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.IOException;

    public class FilePermissionTester {
        public static void main( String[] args ) throws IOException {
            File file = new File("Y:\\some\\remote\\drive\\directoy\\xxxxx.txt");
            System.out.println( "exists:"  + file.exists() );
            System.out.println( "is file:"  + file.isFile() );
            System.out.println( "can read:" + file.canRead() );
            System.out.println( "can execute:" + file.canExecute() );
            System.out.println( "can write:" + file.canWrite() );
            System.out.println( "is hidden:" + file.isHidden() );

            System.out.println("change it to be unreadable, and it works? " + file.setReadable(false));
            System.out.println( "can read:" + file.canRead() );
            System.out.println("change it to be writable, and it works? " + file.setWritable(true));
            System.out.println( "can write:" + file.canWrite() );
            FileInputStream fileInputStream = new FileInputStream(file);
            fileInputStream.read();
            fileInputStream.close();

        }

    } 
    ```

我有：

```
exists:true
is file:true
can read:true
can execute:true
can write:false
is hidden:true
change it to be unreadable, and it works? false
can read:true
change it to be writable, and it works? true
can write:true 
```

现在我可以读取这个文件，编辑它并保存它。在更改权限之前，我被要求`Save As..`保存时。

请注意，该文件是可读的，并且`setReadable(false)`返回`false`，并且该文件仍然是可读的。JavaDoc[在这里](https://docs.oracle.com/javase/7/docs/api/java/io/File.html#setReadable(boolean))说，当用户无权更改访问权限时返回，或者当`setReadable()`已经是时，并且底层系统没有实现。调试到 Java API 并没有提供太多信息，因为实现被标记并且看不到更多信息。但是我有权更改可写性，所以我不明白。`false``readable``false``native`

但还要注意，还有更多不支持的属性`java.util.File`，例如~~`setHidden()`~~. 也许您可以检查其他包`java.security`，例如[AccessController](https://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html)？

# git - Git：强制执行shell脚本执行权限

> ID：10783678
> 
> 赞同：4
> 
> 时间：2012-05-28T11:09:18.703
> 
> 标签：git

在 Git 中，您可以签入具有 644 或 755 权限的文件。我想强制所有 .sh 文件将始终存储为 755 权限，以便它们可以立即执行。特别是在windows环境下很容易意外丢失权限。

那么，有没有办法配置它，最好像文件处理一样配置.gitattributes？它可能可以用钩子来完成，但是有没有更干净的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:20:52.360

这可能使用[`.gitattributes`过滤器](http://schacon.github.com/git/gitattributes.html#_tt_filter_tt)。您可以通过以下配置获得其中的一部分：

将此添加到`.gitattributes`：

```
*.sh    filter=permissions 
```

并将其添加到`.git/config`：

```
[filter "permissions"]
        clean = chmod 755 %f 
```

只要您`git add`创建了一个`.sh`文件，就会应用干净的过滤器并更改其权限。不幸的是，权限更改不会添加到索引中，因此该解决方案显然是不完整的。

# validation - Cakephp 验证问题

> ID：10783684
> 
> 赞同：2
> 
> 时间：2012-05-28T11:09:53.943
> 
> 标签：validation, cakephp, boolean

大家好，Cakephp 验证有问题。

我想知道为什么partytwo 验证会直接变为假？

这是我的关系模型：

```
<?php
    class Relationship extends AppModel{
        var $name='Relationship';
        public $useTable = 'relationships_users';
        public $primaryKey = 'id';

        var $validate = array(
            'date' => array(
                'rule' => array('datevalidation', 'systemDate'),
                'message' => 'Current Date and System Date is mismatched'
            ),
            'partytwo'=>array(
                'partytwoExists'=>array(
                    'rule'=> 'userExists',
                    'message'=>'That username doesnt exist.'
                )
            )
        );

        function datevalidation( $field=array(), $compare_field=null ) {
            if ($field['date'] > $compare_field)
                return TRUE;
            else
                return FALSE;
        }

        function userExists($check) {
            $userExists= $this->find('count', array('conditions'=>$check));
            if($userExists == 1) {
                return TRUE;
            }else{
                return FALSE;
            }
        }
 ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:53:12.447

根据 CakePHP book[添加你自己的验证方法](http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods)部分，一个自定义规则是这样写的

```
'rule' => array('datevalidation', 'systemDate') 
```

意味着 Cake 会`datevalidation`像这样运行你的方法：

```
$valid = $Relationships->datevalidation(array(
    'date' => 'some user input value'
), 'systemDate'); 
```

同样的时尚，

```
'rule' => array('userExists') 
```

导致 Cake 运行

```
$valid = $Relationships->userExists(array(
    'partytwo' => 'some user input value'
)); 
```

*（模拟调用。实际调用`dispatchMethod`在Model.php的[第 3155 行使用）](http://api20.cakephp.org/view_source/model#l-3155)*

所以你很可能需要重写你的`datevalidation`方法。此外，您的代码

```
$userExists= $this->find('count', array('conditions'=>$check)); 
```

`$userExists`可以返回一个大于或等于 0 的数字。如果返回 2 或更多，则您的逻辑是错误的。`Model::hasAny`改为考虑。这可能是为什么它总是`false`针对您的情况进行验证的原因。

# sql-server - AS400：如何知道哪个程序创建了一个文件？

> ID：10783685
> 
> 赞同：1
> 
> 时间：2012-05-28T11:09:54.643
> 
> 标签：sql-server, ibm-midrange, rpg

我不是**AS400**专家，只知道一些命令，我​​将一些文件从 AS400 (iSeries) 导出到 SQL Server 2005。

实际上我需要知道哪个 RPG 程序在库中创建了一个文件。这是因为该文件包含来自存储在其他 AS400 库中的其他文件的统计数据。

此屏幕截图显示了`STTMVF`库中的文件`DAT_4DWH`（作者`DSPLIB DAT_4DWH`）

![在此处输入图像描述](../Images/3dc585529350fc7a920ee713e93126db.png)

**所以有一个命令让我知道哪个 RPG 程序创建了文件 STTMVF ？**

如果是，我需要打开源 RPG 或 CL 并尝试了解哪些物理文件用于组成此统计文件。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T15:19:06.083

您可以使用[日志管理](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzaki/rzakikickoff.htm)或[程序引用](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/ddp/rbal1progref.htm)来确定写入文件的内容。

* * *

# 期刊管理

## 开始写日记

要创建基本日志，您需要创建日志接收器、日志并为文件激活日志。将*RECEIVER-LIB*、*RECEIVER-FILE*、*JOURNAL-LIB*、*JOURNAL-FILE*、*FILE-LIB*和*FILE*替换为适合您系统的值。

```
CRTJRNRCV JRNRCV(RECEIVER-LIB/RECEIVER-FILE)
CRTJRN JRN(JOURNAL-LIB/JOURNAL-FILE) JRNRCV(RECEIVER-LIB/RECEIVER-FILE)
STRJRNPF FILE(FILE-LIB/FILE) JRN(JOURNAL-LIB/JOURNAL-FILE) OMTJRNE(*OPNCLO) 
```

## 转储日记

```
DSPJRN JRN(JOURNAL-LIB/JOURNAL-FILE) FILE(FILE-LIB/FILE) RCVRNG(*CURCHAIN) JRNCDE(R) ENTTYP(PT PX DL UP) OUTPUT(*OUTFILE) OUTFILFMT(*TYPE1) OUTFILE(QTEMP/QADSPJRN) 
```

## 查询期刊

该字段`JOPGM`将包含从文件中插入、更新或删除记录的程序名称。

## 删除日志

```
ENDJRNPF FILE(FILE-LIB/FILE)
DLTJRN JRN(JOURNAL-LIB/JOURNAL-FILE) 
```

* * *

# 程序参考

## 转储参考

```
DSPPGMREF PGM(*ALLUSR/*ALL) OUTPUT(*OUTFILE) OUTFILE(QTEMP/QADSPPGM) 
```

## 查询引用

在文件中搜索字段`WHFNAM`等于*FILE*的所有引用。该字段`WHPNAM`将包含程序名称。由于文件覆盖等原因，此方法不如使用日志准确。

# php - 动态下拉列表 - PHP 和 Javascript

> ID：10783686
> 
> 赞同：2
> 
> 时间：2012-05-28T11:09:55.647
> 
> 标签：php, javascript, ajax, drop-down-menu

我想创建一个基于 mysql 数据库和表的动态下拉列表。我在网上搜索，最接近的是[http://www.plus2net.com/php_tutorial/ajax_drop_down_list.php](http://www.plus2net.com/php_tutorial/ajax_drop_down_list.php)

我已经按照示例使用了此代码，第一个下拉框可以正常工作，但是一旦选择了“类别”，第二个下拉框就不会被填充。

代码是：

**主文件**

```
<html>
<body>

<script type="text/javascript">

  function AjaxFunction(cat_id) {
    var httpxml;
    try {
      // Firefox, Opera 8.0+, Safari
      httpxml = new XMLHttpRequest();
    } catch (e) {
      // Internet Explorer
      try {
        httpxml = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (e) {
        try {
          httpxml = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
          alert("Your browser does not support AJAX!");
          return false;
        }
      }
    }
    function stateck() {
      if (httpxml.readyState == 4) {
        var myarray = eval(httpxml.responseText);
        // Before adding new we must remove previously loaded elements
        for (j = document.testform.subcat.options.length - 1; j >= 0; j--) {
          document.testform.subcat.remove(j);
        }
        for (i = 0; i < myarray.length; i++) {
          var optn = document.createElement("OPTION");
          optn.text = myarray[i];
          optn.value = myarray[i];
          document.testform.subcat.options.add(optn);
        } 
      }
    }
    var url="dd.php";
    url = url+"?cat_id="+cat_id;
    url = url+"&sid="+Math.random();
    httpxml.onreadystatechange = stateck;
    httpxml.open("GET",url,true);
    httpxml.send(null);
  }

</script>

<form name="testform" method='POST' action='mainck.php'>Name:<input type=text name=fname>
Select first one <select name=cat onchange="AjaxFunction(this.value);">
<option value=''>Select One</option>
<?

  require "config.php";// connection to database 
  $q=mysql_query("select * from categories");
  while($n=mysql_fetch_array($q)){
    echo "<option value=$n[cat_id]>$n[category]</option>";
  }

?>
</select>

<select name=subcat>

</select><input type=submit value=submit>
</form>

</body>
</html> 
```

**和 dd.php 是**

```
<?

  $cat_id=$_GET['cat_id'];
  require "config.php";
  $q=mysql_query("select subcategory from subcategory where cat_id='$cat_id'");
  echo mysql_error();
  $myarray=array();
  $str="";
  while($nt=mysql_fetch_array($q)){
    $str=$str . "\"$nt[subcategory]\"".",";
  }
  $str=substr($str,0,(strLen($str)-1)); // Removing the last char , from the string
  echo "new Array($str)";

?> 
```

如前所述，main.php 正确加载并填充第一个下拉框。一旦选择了一个值，第二个框中就不会出现任何内容。为了测试，我将 dd.php 中的 mysql 查询从

```
$q=mysql_query("select subcategory from subcategory where cat_id='$cat_id'"); 
```

至

```
$q=mysql_query("select subcategory from subcategory where cat_id=1"); 
```

然后在选择“类别”时填充第二个框。我认为选择的值没有正确地从 main.php 传递到 dd.php

```
$cat_id=$_GET['cat_id']; 
```

对此的任何帮助将不胜感激。我有一种感觉，这是一件很小的事情，但我无法完全理解它。

一如既往地提前感谢。 **更新的问题**

**主文件**

```
<form name='testform' method='POST' action='mainck.php'> 
      Name: <input type='text' name='fname'> 
      Select first one 
      <select name='cat' onchange='AjaxFunction(this);'> 
        <option value=''>Select One</option> 

<?php 

  require "config.php";// connection to database 

  // I will continue to use mysql_query(), but please migrate you code to 
  // PDO or MySQLi ASAP 
  $query = " 
    SELECT cat_id,category 
    FROM categories
  "; 
  $result = mysql_query($query); 

  while ($row = mysql_fetch_assoc($result)) { 
    echo "<option value='{$row['cat_id']}'>{$row['category']}</option>"; 
  } 

?> 

      </select> 
      <select name='subcat' id='subcat_select'> 
      </select> 
      <input type='submit' value='Submit'> 
    </form> 
```

**dd.php**

```
<?php 

  require "config.php"; 

  $query = " 
   SELECT packcode 
    FROM skudata
    WHERE cat_id='".mysql_real_escape_string($_GET['cat_id'])."'       "; 
  $result = mysql_query($query); 

  $array = array(); 
  while ($row = mysql_fetch_assoc($result)) { 
    $array[] = $row['packcode']; 
  } 

  echo json_encode($array); 

?> 
```

随着 Dave 添加的更改，我无法让新的 mysql 表和引用列正常工作。已经测试了mysql，它运行良好。任何帮助表示赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T11:24:47.840

首先，阻止您的代码工作的小事情是您传递给函数的值。对于一个`<select>`元素`this.value`将不起作用。相反，您需要使用`this.options[this.selectedIndex].value`. 像这样：

```
<select name=cat onchange="AjaxFunction(this.options[this.selectedIndex].value);"> 
```

现在对您的代码发表一些评论：

*   *永远不要*使用`eval()`. 曾经。任何语言。正确的用例是如此之少，以至于只说“从不使用它”要简单得多。
*   不要使用`mysql`扩展名。使用[`PDO`](http://php.net/manual/en/book.pdo.php)或[`MySQLi`](http://php.net/manual/en/book.mysqli.php)代替。
*   您的代码中有一个巨大的[SQL 注入](http://bobby-tables.com/)漏洞。
*   请明智地缩进您的代码。它使调试变得更加容易。您发布的那个杂乱无章的肿块几乎无法阅读。
*   不要`document.elementName`用于访问页面上的元素。给你的元素 ID 并改用`document.getElementById('elementId')`它 - 它在任何地方都可以使用，而命名元素则不能。
*   不要使用 PHP 短开放标签`<?`，使用完整`<?php`标签 - 再次，它适用于任何地方，而短标签则不能。

以下是我将如何编写您的代码：

*主文件*

```
<html>

  <head>
    <!-- Omitting the <head> is very bad practice... -->
    <title>My Page</title>

    <script type='text/javascript'>

      function GetAjaxObject () {
        // Wrap the code for fetching an AJAX object in a separate function
        // so it can be easily re-used
        if (window.XMLHttpRequest !== undefined) {
          return new XMLHttpRequest();
        }
        var xhr = null;
        var axo = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP'];
        for (var o in axo) {
          try {
            xhr = new ActiveXObject(axo[o]); 
          } catch (e) {}
        }
        if (xhr !== null) {
          return xhr;
        } else {
          throw new Error('Your browser does not support AJAX');
        }
      }

      function ChangeSelect (element) {

        // We are now passing the select element itself in, not just a value

        var xhr, url;

        // Fetch an AJAX object
        try {
          var xhr = GetAjaxObject();
        } catch (e) {
          alert(e.message);
          return;
        }

        // Build the URL
        url = "dd.php"
            + "?cat_id="+element.options[element.selectedIndex].value
            + "&sid="+Math.random();

        // If it still doesn't work, uncomment this line to inspect the url
        // alert(url);

        // Define the readystatechange callback        
        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4) {
            if (xhr.status == 200) { // Don't forget to check the status code

              // I shall leave this eval() here for now, but really you should
              // use a safe JSON library like http://www.json.org/js.html
              var myarray = eval(httpxml.responseText);

              // Start by getting a safe reference to the destination select
              var dest = document.getElementById('subcat_select');

              // Before adding new we must remove previously loaded elements
              for (j = dest.options.length - 1; j >= 0; j--) {
                dest.remove(j);
              }

              // Loop data from the server and create new options
              for (i = 0; i < myarray.length; i++) {
                var optn = document.createElement("option");
                optn.text = myarray[i];
                optn.value = myarray[i];
                dest.options.add(optn);
              } 

            } else {
              alert("Server returned error " + xhr.status);
            }
          }
        };

        // Start the request
        httpxml.open("GET", url, true);
        httpxml.send(null);

      }

    </script>

  </head>

  <body>
    <form name='testform' method='POST' action='mainck.php'>
      Name: <input type='text' name='fname'>
      Select first one
      <select name='cat' onchange='AjaxFunction(this);'>
        <option value=''>Select One</option>

<?php

  require "config.php";// connection to database

  // I will continue to use mysql_query(), but please migrate you code to
  // PDO or MySQLi ASAP
  $query = "
    SELECT *
    FROM categories
  ";
  $result = mysql_query($query);

  while ($row = mysql_fetch_assoc($result)) {
    echo "<option value='{$row['cat_id']}'>{$row['category']}</option>";
  }

?>

      </select>
      <select name='subcat' id='subcat_select'>
      </select>
      <input type='submit' value='Submit'>
    </form>
  </body>

</html> 
```

*dd.php*

```
<?php

  require "config.php";

  $query = "
    SELECT subcategory
    FROM subcategory
    WHERE cat_id='".mysql_real_escape_string($_GET['cat_id'])."'
  ";
  $result = mysql_query($query);

  $array = array();
  while ($row = mysql_fetch_assoc($result)) {
    $array[] = $row['subcategory'];
  }

  echo json_encode($array);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:22:15.230

此代码不起作用，因为所有这些都是 main.php 文件

```
<script type="text/javascript">
function AjaxFunction(cat_id)
{
var httpxml;
try
  {
  // Firefox, Opera 8.0+, Safari
  httpxml=new XMLHttpRequest();
  }
catch (e)
  {
  // Internet Explorer
          try
                    {
                 httpxml=new ActiveXObject("Msxml2.XMLHTTP");
                    }
            catch (e)
                    {
                try
            {
            httpxml=new ActiveXObject("Microsoft.XMLHTTP");
             }
                catch (e)
            {
            alert("Your browser does not support AJAX!");
            return false;
            }
            }
  }
function stateck() 
    {
    if(httpxml.readyState==4)
      {

var myarray=eval(httpxml.responseText);
// Before adding new we must remove previously loaded elements
for(j=document.testform.subcat.options.length-1;j>=0;j--)
{
document.testform.subcat.remove(j);
}

for (i=0;i<myarray.length;i++)
{
var optn = document.createElement("OPTION");
optn.text = myarray[i];
optn.value = myarray[i];
document.testform.subcat.options.add(optn);

} 
      }
    }
    var url="dd.php";
url=url+"?cat_id="+cat_id;
url=url+"&sid="+Math.random();
httpxml.onreadystatechange=stateck;
httpxml.open("GET",url,true);
httpxml.send(null);
  }
</script>

<form name="testform" method='POST' action='mainck.php'>
Select first one <select name=cat onchange="AjaxFunction(this.value);">
<option value=''>Select One</option>
<?
require "config.php";// connection to database 
$q=mysql_query("select * from it_category ");
while($n=mysql_fetch_array($q)){
echo "<option value=$n[cat_id]>$n[category]</option>";
}

?>
</select>

<select name=subcat>

</select><input type=submit value=submit>
</form>

</body>
</html> 
```

这是dd.php

```
<?
$cat_id=$_GET['cat_id'];
require "config.php";
$q=mysql_query("select * from it_subcategory where cat_id='$cat_id'");
echo mysql_error();
$myarray=array();
$str="";
while($nt=mysql_fetch_array($q)){
$str=$str . "\"$nt[subcategory]\"".",";
}
$str=substr($str,0,(strLen($str)-1)); // Removing the last char , from the string
echo "new Array($str)";

?> 
```

# python - 姜戈。异步数据库引擎。

> ID：10783687
> 
> 赞同：3
> 
> 时间：2012-05-28T11:09:58.653
> 
> 标签：python, django, psycopg

Psycopg2 具有异步模式。

但是如果我们`async=1`为 postgresql_psycopg2 设置 OPTIONS - 我们会得到错误`commit cannot be used in asynchronous mode`。

那么，对于 django，是否有任何支持异步模式的包装器，例如 momoko？

# android - 服务内部的Android访问活动方法

> ID：10783688
> 
> 赞同：6
> 
> 时间：2012-05-28T11:10:04.890
> 
> 标签：android, android-activity

如何从服务 onStart() 内部调用 Activity 的非静态方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T11:24:46.160

> 如何从服务 onStart() 内部调用 Activity 的非静态方法？

你不能。

但是，有很多方法可以让服务与正在运行的 Activity 进行通信，我在这里概述了其中的一些：[如何从后台服务更新 Android Activity 中的信息](https://stackoverflow.com/questions/2468874/how-can-i-update-information-in-an-android-activity-from-a-background-service/2469646#2469646)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-06-30T21:41:08.583

[这](http://rdcworld-android.blogspot.com/2011/10/how-to-call-activitys-method-from.html)可以帮助..

在活动定义

```
static MyActivity instance; 
```

然后设置值 MyActivity.OnCreate

```
instance = this; 
```

为您服务

```
MyActivity activity = MyActivity.instance;

        if (activity != null) {
            // we are calling here activity's method

        } 
```

# javascript - 在数据响应中选择#id.html

> ID：10783694
> 
> 赞同：0
> 
> 时间：2012-05-28T11:10:33.713
> 
> 标签：javascript, jquery, jquery-selectors

```
function getJobs2(pars) {
    $.ajax({
        //alert(pars);
        url: 'lib/ajax/getJobs2.php',
        type: "POST",
        data: pars,
        success: function (data) {
            /* THIS line returns allways null*/
            console.log($(data).find('#home_right').html());
            /* I can see #home_right in the output!! */
            console.log(data);
            $('#home_right').html($(data).find('#home_right').html());
        }
    });
} 
```

问题是：

`$(data).find('#myDiv').html()`没有返回我需要的 HTML ......但为空。我可以在整个数据输出中看到所需的 div..

我选错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:18:14.317

我假设`#home_right`是响应中的顶级元素。然后使用[`.filter` *^([docs])*](http://api.jquery.com/filter/)：

```
$('#home_right').html($(data).filter('#home_right').html()); 
```

`.find`仅搜索选定元素的**后代**，而不是选定元素本身。

如果您发布回复，则更容易提供有用的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:06:09.620

尝试：

```
console.log($("<div class='dummy-wrapper'>" + data + "</div>").find("#home_right")); 
```

# [演示](http://jsfiddle.net/ARpPs/)

# c# - XDocument 是前置字符串

> ID：10783699
> 
> 赞同：0
> 
> 时间：2012-05-28T11:10:45.650
> 
> 标签：c#, xml, xml-generation

我在 C# 中使用 XDocument 生成 XML。一切正常，除了我总是得到自动生成的字符串

```
XDocument doc = new XDocument(
                new XDeclaration("1.0", "UTF-8", "yes"),
                new XElement(aw+"ProviderUpdate",
                       //... more more here

                    )
                );
return doc.ToString(); 
```

它总是返回如下内容：如何删除？

```
<string xmlns="urn:Microsoft.Search.Registration.Response">
<ProviderUpdate xmlns="urn:Microsoft.Search.Registration.Response">
...
</ProviderUpdate>
</string> 
```

我希望是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<ProviderUpdate xmlns="urn:Microsoft.Search.Registration.Response">
...
</ProviderUpdate> 
```

这是在我的文件顶部定义的：

```
[WebService(Namespace = "urn:Microsoft.Search.Registration.Response")] 
```

但它只是将 xmlns 更改为正确的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:21:25.210

该`string`元素是您从 Web 服务返回的值的容器。您不能返回不在元素内的数据。

如果您想从 Web 服务返回您自己的 XML 代码，则不应使用内置框架来生成 Web 服务，而是使用 HTTP 处理程序，以便您可以直接返回响应，而不是包装在预先确定的 SOAP 消息中。

# objective-c - 在发布版本上创建自定义错误

> ID：10783700
> 
> 赞同：3
> 
> 时间：2012-05-28T11:10:46.280
> 
> 标签：objective-c, ios, xcode, custom-errors

有什么方法可以创建自定义错误消息，以提醒我自己和其他同事，如果他们尝试进行发布构建，应用程序中有未完成的代码？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:30:30.270

怎么样：

```
#ifndef DEBUG
#error Don't release this
#endif 
```

# android - 下载adt插件时出错

> ID：10783711
> 
> 赞同：0
> 
> 时间：2012-05-28T11:11:47.200
> 
> 标签：android, eclipse, adt

下载时`adt plugin for eclipse classic ( win 7)`出现以下错误：

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: Android Traceview 18.0.0.v201203301601-306762 (com.android.ide.eclipse.traceview.feature.group 18.0.0.v201203301601-306762)
  Software currently installed: Eclipse Platform 3.6.1.M20100909-0800 (org.eclipse.platform.ide 3.6.1.M20100909-0800)
  Only one of the following can be installed at once: 
    Eclipse UI 3.6.1.M20100826-1330 (org.eclipse.ui 3.6.1.M20100826-1330)
    Eclipse UI 3.6.2.M20110203-1100 (org.eclipse.ui 3.6.2.M20110203-1100)
    Eclipse UI 3.6.0.I20100603-1100 (org.eclipse.ui 3.6.0.I20100603-1100)
  Cannot satisfy dependency:
    From: Android Traceview 18.0.0.v201203301601-306762 (com.android.ide.eclipse.traceview.feature.group 18.0.0.v201203301601-306762)
    To: org.eclipse.ui 3.6.2
  Cannot satisfy dependency:
    From: Eclipse Platform 3.6.1.r361_v20100909-9gF78GrkFqw7GrsZnvz0JWNTeb6fue6896L (org.eclipse.platform.feature.group 3.6.1.r361_v20100909-9gF78GrkFqw7GrsZnvz0JWNTeb6fue6896L)
    To: org.eclipse.rcp.feature.group [3.6.1.r361_v20100827-9OArFLdFjY-ThSQXmKvKz0_T]
  Cannot satisfy dependency:
    From: Eclipse Platform 3.6.1.M20100909-0800 (org.eclipse.platform.ide 3.6.1.M20100909-0800)
    To: org.eclipse.platform.feature.group [3.6.1.r361_v20100909-9gF78GrkFqw7GrsZnvz0JWNTeb6fue6896L]
  Cannot satisfy dependency:
    From: Eclipse RCP 3.6.1.r361_v20100827-9OArFLdFjY-ThSQXmKvKz0_T (org.eclipse.rcp.feature.group 3.6.1.r361_v20100827-9OArFLdFjY-ThSQXmKvKz0_T)
    To: org.eclipse.ui [3.6.1.M20100826-1330] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:31:56.563

从您的日志中“当前安装的软件：Eclipse Platform 3.6.1.M20100909-0800 (org.eclipse.platform.ide 3.6.1.M20100909-0800) 一次只能安装以下之一：Eclipse UI 3.6.1。 M20100826-1330'

将 Eclipes 重新安装到 Eclipse Classic 3.6.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:41:28.160

升级你的 eclipse 和 android sdk 工具

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:49:20.983

这是一堆错误，我遇到了类似的问题。我专注于这个：

> 一次只能安装以下其中一项：

因此，返回到选择要下载的软件包的对话框，并仅选择错误消息中列出的软件包之一。这是一个反复试验的事情。

无论如何阅读这个：

> 无法满足依赖：
> 来自：Eclipse Platform 3.6.1.r361_blablahblah

我可能会先尝试 v3.6.1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T11:52:11.447

我不确定您的安装为何出错，但我确实知道安装 Eclipse 和 ADT 插件的正确方法。

首先，您需要在您的计算机上安装 ADT 插件：

1.  下载并安装Android SDK：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)
2.  启动 Android SDK 和 AVD Manager（文件目录 tools/android）。
3.  选择您要开发的 API 级别（Android 4.0.3 (API 15) 是最新版本。但是，如果我没记错的话，大多数手机都使用 Android 2.1 (API 7)。如果您愿意要为您自己的手机进行开发，请同时勾选您的 API 级别框）。
4.  最好不要勾选“Samples”、“Google APIs”和“Sources for Android SDK”。
5.  单击“安装软件包”。

现在您需要在 Eclipse 中安装一些开发人员工具。我正在为 Java EE 开发人员使用 Eclipse IDE，但我很确定它对 Eclipse Classic 的工作方式相同：

1.  启动 Eclipse 并选择“帮助”>“安装新软件”。
2.  单击“添加”并插入以下内容：

    > 名称：ADT插件-----位置：[https ://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

3.  加载完成后，选中“开发者工具”并单击“下一步”。
4.  再次单击“下一步”，接受条款和条件并选择“完成”。
5.  等待 Eclipse 完成安装，然后重新启动程序。

Eclipse 可能已经跟踪了您的 Android SDK 位置。如果没有：

1.  在 Eclipse 中，转到“窗口”>“首选项”。
2.  点击“安卓”。
3.  在“SDK Location”中，插入“android-sdk”目录的路径。

我希望这有帮助。

# forms - 如何使用jsp将html表单数据保存到.csv文件中

> ID：10783712
> 
> 赞同：0
> 
> 时间：2012-05-28T11:11:58.340
> 
> 标签：forms, jsp, csv

我正在开发一个仅使用 jsp 和 html 的网站。在我的项目中，我有一个表单，每个用户都会在其中输入一些关于他们的信息，当用户提交表单时，这些值应该保存到 .csv 文件中。

请在这方面帮助我。

提前致谢

搪瓷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:00:09.763

在表单操作属性中定义的指定 uri 提交表单发布数据后：

```
<form action="http://your_damain/your_uri"> 
```

您需要 servlet 或更好的 spring 控制器来处理来自 /your_uri 的 post 请求。应该在 web.xml 中定义。在这个 servlet 中，您可以获取您的属性并将其写入 csv 文件：

```
// Get property by name
String someProperty = request.getProperty("property_name")

// Get all properties to iterate and write into file
Map properties = request.getProperties(); 
```

可以使用 FileOutputStream 写入文件。这很容易，认为你可以处理它。

# c++ - Priority Queue with O(1) Dequeue and O(whatever) Enqueue

> ID：10783714
> 
> 赞同：5
> 
> 时间：2012-05-28T11:12:05.530
> 
> 标签：c++, algorithm, priority-queue

I'm writing an application in C++, where it's critical to have O(1) Dequeue operation for a Priority Queue, while it's not so important the complexity of Enqueue (well unless it becomes n^2 or 2^n of course) .

At first I used a linked list. It was very good for Dequeue (O(1)), and it had good enqueue complexity. The only problem was, sorting it. Not the fact that using Insertion Sort, with O(n) complexity it would have suited my needs. But sorting a linked list is a pain. It was sloooow.

A vector isn't good at all. Dequeue would be O(n) to move all elements a place back. Enqueue would be still O(n) but much faster.

Can you suggest more performant method? Thanks.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T11:16:26.560

A reverse-sorted `vector` has O(1) `pop_back` and O(*n*) insert.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-28T11:13:44.620

You could store the queue as a sorted linked list. Removing the front element is `O(1)` and inserting an element at the correct position is `O(n)`.

> But sorting a linked list is a pain. It was sloooow.

You don't have to perform a full sort after each insertion. All you have to do is traverse the (already sorted) list to find the correct position for the new element, and insert it there. The traversal is `O(n)` and the insertion is `O(1)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T09:17:33.310

If you're willing to implement from the literature, then I have a much better solution for you.

## Worst-Case Complexity

**Delete**: O(1)

**Delete-min**: O(1)

**Find-min**: O(1)

**Insert**: O(log n)

## Reference

> **IF MELD** is allowed to take linear time it is possible to support **DELETE-MIN** in worst case constant time by using the finger search trees of Dietz and Raman `[3]`. By using their data structure **MAKEQUEUE**, **FINDMIN**, **DELETEMIN**, **DELETE** can be supported in worst case time O(1), **INSERT** in worst case time O(log n) and **MELD** in worst case time O(n).

[Brodal, Gerth Stølting. ‘Fast Meldable Priority Queues’. In Proceedings of the 4th International Workshop on Algorithms and Data Structures, 282–290\. WADS ’95\. London, UK, UK: Springer-Verlag, 1995.](http://dx.doi.org/10.1007/3-540-60220-8_70)

`[3]`: [Dietz, Paul F, and Rajeev Raman. ‘A Constant Update Time Finger Search Tree’. Information Processing Letters 52, no. 3 (1994): 147 – 154.](http://dx.doi.org/10.1016/0020-0190%2894%2900115-4)

Though this uses the [RAM](http://en.wikipedia.org/wiki/Random_access_machine) [model of computation](http://en.wikipedia.org/wiki/Model_of_computation):

> Our data structure uses the random-access machine (RAM) model with unit-cost measure and logarithmic word size;

More recently, a solution within [Pointer-Machine](http://en.wikipedia.org/wiki/Pointer_machine) model of computation has been given`[1]`. This has O(1) get-min, extract-min, get-max, extract-max and O(log n) insert.

`[1]`: [Brodal, Gerth Stølting, George Lagogiannis, Christos Makris, Athanasios Tsakalidis, and Kostas Tsichlas. ‘Optimal Finger Search Trees in the Pointer Machine’. J. Comput. Syst. Sci. 67, no. 2 (September 2003): 381–418.](http://dx.doi.org/10.1016/S0022-0000%2803%2900013-8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T11:35:29.673

Boost now includes [Boost.Heap](http://www.boost.org/doc/libs/1_49_0/doc/html/heap.html), a library of heap data structures that also support priority queue operations. [This page](http://www.boost.org/doc/libs/1_49_0/doc/html/heap/data_structures.html) has a table of amortized complexities of the core operations for each of the provided data structures. A Fibonacci heap features: O(1) push, O(log(N)) pop, O(1) increase, and (if you need it) O(log(N)) decrease.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T12:05:34.690

It is possible to combine balanced binary search tree with linked list. Each element of the tree has links to its sons and also links to next a previous element. Then you can have:

O(lg n) insert, delete, search; O(1) - extract min+max

Another possibility is to use skiplist, if you don't mind using randomized structures. Than you will also have:

O(lg n) insert, delete, search; O(1) - extract min+max

# flash - 外部接口不工作

> ID：10783717
> 
> 赞同：0
> 
> 时间：2012-05-28T11:12:21.860
> 
> 标签：flash, actionscript, actionscript-2

我正在尝试使用`ExternalInterface`这样添加回调函数：

```
import flash.external.*;
ExternalInterface.addCallback("makedoom", null, forceProgress); 
```

我知道我的函数 forceProgress 有效（它具有全局范围），因为我使用了一个简单的函数`onRelease`并且它按预期工作，但是当通过 externalInterface 使用时似乎什么都没有发生。

我嵌入了我的 SWF（在外部服务器上），`allowScriptAccess`参数设置为`always`.

当我`javascript:makedoom();`在任何浏览器的地址栏中键入时，似乎什么都没有发生。我没有控制台错误.etc

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:07:52.190

您必须在 flash dom 对象上调用 makedoom 函数，它没有在全局 JS 范围内注册。

`document.getElementById("theIDofYourFlashObject").makedoom()`当您确定 swf 已经加载并注册了回调时使用。

# java - com.google.appengine.tools.admin.HttpIoException：发布到 URL 时出错，400 错误请求

> ID：10783727
> 
> 赞同：3
> 
> 时间：2012-05-28T11:13:06.050
> 
> 标签：java, google-app-engine, netbeans

当单击 netbeans 项目时，`Deploy to Google App Engine`这些是 Google App Deployment 控制台上显示的消息：

```
May 28, 2012 4:22:06 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed /home/non-admin/NetBeansProjects/Guestbook/build/web/WEB-INF/appengine-web.xml
May 28, 2012 4:22:06 PM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed /home/non-admin/NetBeansProjects/Guestbook/build/web/WEB-INF/web.xml
Beginning server interaction for ...
Password for suhailgupta03@gmail.com: 
com.google.appengine.tools.admin.HttpIoException: Error posting to URL:  https://appengine.google.com/api/appversion/getresourcelimits?app_id=&version=1&
400 Bad Request
app_id GET query string parameter must be supplied.

Unable to update app: Error posting to URL: https://appengine.google.com/api/appversion/getresourcelimits?app_id=&version=1&
400 Bad Request
app_id GET query string parameter must be supplied.

Please see the logs [/tmp/appcfg5900452573644976629.log] for further information. 
```

我不知道为什么我会得到这个。[/tmp/appcfg5900452573644976629.log 的链接](http://suhail3.my3gb.com/appcfg5900452573644976629.log)

可能是什么原因 ？*我已检查该应用程序已与 google 成功交互。即电子邮件和密码匹配*

如果，

*appengine-web.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
<application></application>
<version>1</version>

<system-properties>
    <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
</system-properties>

<threadsafe>true</threadsafe>

</appengine-web-app> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T11:43:36.147

`<application></application>`标签为空。

如果没有它，AppEngine 应该如何知道将您的应用程序放在哪里？

您必须在其中插入您之前在[http://appengine.google.com](http://appengine.google.com)上注册的应用程序 ID 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T09:09:03.380

检查是否所有谷歌应用引擎库都在那里。这是我的问题。虽然它在本地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-30T04:19:56.117

如果您提供了完整的主机名而不仅仅是应用程序 ID，也可能会发生此错误。

**错误的：**

```
<application>myappid.appspot.com</application> 
```

**对：**

```
<application>myappid</application> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-12T12:21:01.147

对此的解决方案可能是这样的，因为它对我有用：

特性：

```
<properties>    
        <appengine.app.version>10</appengine.app.version>       
        <appengine.target.version>1.8.7</appengine.target.version>      
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

配置：

```
<configuration>                             
        <version>${appengine.app.version}</version>                        
</configuration> 
```

在**配置标签中，按照上述****属性**标签中的版本编写版本。希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-12T09:02:33.583

嗨，这是您在部署时中止应用程序时出现的问题，因此请更改应用程序的版本或回滚 url

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-09T10:30:05.747

**原因：**当您在“build.properties”文件中更改了应用程序名称但未更新为“appengine-web.xml”文件时，会发生这种情况。

**解决方案：**请手动更改“appengine-web.xml”中的应用程序名称。

```
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>photofeed-lab2</application>
  <version>1</version>
  <threadsafe>true</threadsafe>
</appengine-web-app> 
```

# windows - 查找在特定时间段内更改的文件

> ID：10783729
> 
> 赞同：2
> 
> 时间：2012-05-28T11:13:17.517
> 
> 标签：windows, cygwin, timestamp

我有一个安装了 cygwin 的 Windows 7 盒子。对于给定的文件夹，我如何找到哪些文件的时间戳在某个范围内？我需要对所有文件夹进行递归检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:20:48.333

您可以使用 find 来搜索时间范围，但这是一种解决方法。

创建两个临时文件，例如 temp1、temp2

```
touch --date 'yyyy-mm-dd' temp1
touch --date 'yyyy-mm-dd' temp2 
```

这会将这些文件的时间戳更改为您设置的任何内容。然后使用 find 和这些文件作为范围：

```
find /some/dir/ -newer temp1 -not -newer temp2 
```

请注意，您的搜索将返回比 temp1 新但不包括 temp1 的日期和比 temp2 更早的日期。

# php - PHP：语法错误，意外的 T_STRING

> ID：10783733
> 
> 赞同：2
> 
> 时间：2012-05-28T11:13:24.297
> 
> 标签：php, syntax-error

我收到此 PHP 代码的语法错误

```
syntax error, unexpected T_STRING 
```

它说第 2 行，即包含行：

```
<?php  
  include 'config.inc.php';  

  // initialization  
  $photo_upload_fields = '';  
  $counter = 1;  

  // If we want more fields, then use, preupload.php?number_of_fields=20  
  $number_of_fields = (isset($_GET['number_of_fields'])) ?  
    (int)($_GET['number_of_fields']) : 5;  

  // Firstly Lets build the Category List  
  $result = mysql_query('SELECT category_id,category_name FROM gallery_category');  
  while($row = mysql_fetch_array($result)) {  
    $photo_category_list .= <<<__HTML_END

<option value="$row[0]">$row[1]</option>\n  
__HTML_END;  
  }  
  mysql_free_result( $result );    

  // Lets build the Image Uploading fields  
  while($counter <= $number_of_fields) {  
    $photo_upload_fields .= <<<__HTML_END  
<tr><td>  
  Photo {$counter}:  
  <input name="photo_filename[]"  
type="file" />  
</td></tr>  
<tr><td>  
  Caption:  
  <textarea name="photo_caption[]" cols="30"  
    rows="1"></textarea>  
</td></tr>  
__HTML_END;  
    $counter++;  
  }  

  // Final Output  
  echo <<<__HTML_END  
<html>  
<head>  
<title>Lets upload Photos</title>  
</head>  
<body>  
<form enctype="multipart/form-data"  
  action="upload.php" method="post"  
  name="upload_form">  
  <table width="90%" border="0"  
    align="center" style="width: 90%;">  
    <tr><td>  
      Select Category  
      <select name="category">  
      $photo_category_list  
      </select>  
    </td></tr>  
    <! - Insert the image fields here -->  
    $photo_upload_fields  
    <tr><td>  
      <input type="submit" name="submit"  
        value="Add Photos" />  
    </td></tr>  
  </table>  
</form>  
</body>  
</html>  
__HTML_END;  
?> 
```

我的包含文件如下所示：

```
<?php  
  $mysql_link = mysql_connect("localhost","user","password");  
  mysql_select_db("db_name") or die("Could not select database");  
  $images_dir = "photos";  
?> 
```

**解决方案：**

我在代码中隐藏了不可见的 unicode 字符，导致 PHP 解析器抱怨上述语法错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T11:48:58.053

HEREDOC 语法变量的开头和结尾有多个空格；这会导致问题。去掉后面的空格

```
<<<__HTML_END 
```

之后

```
__HTML_END; 
```

并且您的代码应该可以正常工作。

另请参阅我找到答案的线程：[http ://board.phpbuilder.com/board/showthread.php?t=10333424](http://board.phpbuilder.com/board/showthread.php?t=10333424)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T11:35:29.277

删除前几行并重写它们。有时，如果您复制和粘贴代码，它会插入 unicode 不可见字符，PHP 无法正确解析这些字符。所以它会抛出这个错误。它发生在我身上好几次了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T20:41:24.070

只要确保你已经关闭了你所包含的文件中的所有“和”。通常这个错误指向文件的第一行。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-29T11:50:31.087

使用包含作为：`include("config.inc.php");`以获得正确的语法。

# android - 标记中的事件

> ID：10783734
> 
> 赞同：0
> 
> 时间：2012-05-28T11:13:36.520
> 
> 标签：android, android-mapview, google-maps-markers

我正在一个应用程序中使用收藏站点列表填充 MapView。现在，我在 MapView 中有所有标记，但我想在这个标记上做一个事件，当我按下其中一个时，启动另一个活动。

我尝试做一个获取 X 和 Y 坐标的 onTouch 事件，然后，如果这个 GeoPoint 是，请在数据库中检查，但是不可能检查'因为地理点非常精确，有很多小数，而且很难得到和我在数据库中的一样。

问题是：有没有办法在这个标记中做一个事件？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:22:44.710

对于“最喜欢的站点列表”，假设站点数量适中，`ItemizedOverlay`是使用的典型覆盖。如果您正在使用它，只需覆盖`onTap()`提供用户点击的特定标记的索引的 。

如果您使用`Overlay`而不是`ItemizedOverlay`，则可以使用以下内容在数据库中找到最接近用户点击坐标的项目：

```
SELECT MIN(ABS(Latitude - ?) + ABS(Longitude - ?)), _ID FROM Sites GROUP BY _ID LIMIT 1; 
```

您将纬度和经度作为两个元素`String[]`提供给`rawQuery()`并根据需要调整列名。请注意，我没有亲自尝试过这个查询，所以我转换到 SQLite 时可能会出现问题。

（源自[T-SQL：在地图网格上查找对象的最近位置](https://stackoverflow.com/questions/10382915/t-sql-finding-the-closest-location-of-an-object-on-a-map-grid)）

# facebook - 用户已登录，但没有关于应用程序洞察的统计信息

> ID：10783739
> 
> 赞同：0
> 
> 时间：2012-05-28T11:13:52.113
> 
> 标签：facebook, login, facebook-insights

我在我的网站上设置了一个 facebook 登录按钮。基本思想是收集用户的电子邮件地址。简单的任务，我猜。

我已经连接的用户很少，但是当我转到应用程序时没有新用户...

[http://dl.dropbox.com/u/11799135/Capture22.PNG](http://dl.dropbox.com/u/11799135/Capture22.PNG) - 这是预览......

我应该等待几个小时/几天吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:29:44.433

您通过 Insights 访问的数据最多存在 48 小时。

所有每日、每周和每月的 Insights 数据均根据 PDT（太平洋夏令时间）汇总。

资料来源：[见解](https://developers.facebook.com/docs/insights/)

# c# - Silverlight 控件在切换到另一个窗口再切换回来时无法接收输入焦点

> ID：10783740
> 
> 赞同：0
> 
> 时间：2012-05-28T11:14:01.227
> 
> 标签：c#, silverlight, textbox, window, focus

在我的silverlight应用程序中，有几个文本框接收输入，当我切换到另一个窗口，然后切换回浏览器窗口时，有时文本框无法获得输入焦点。有谁知道是什么导致了这个奇怪的问题？

当我切换回浏览器窗口时，虽然我点击了文本框，但它会自动失去焦点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:39:23.297

尝试将文本框的 TabIndex 设置为“0”。

# python - 什么 API 框架适合我的需求？

> ID：10783741
> 
> 赞同：0
> 
> 时间：2012-05-28T11:14:02.373
> 
> 标签：python, django, api

我正在使用 Django (1.3)，我需要准备一个 API 来与 C# 中的程序进行通信。所以我们选择 XML 作为输入和输出格式，因为 C# 非常适合 XML。

除此之外，我担心与 django 配合良好的 API 是否足以帮助我满足我的需求。我做过一些关于 API 的研究，比如[taste-pie](http://readthedocs.org/docs/django-tastypie/en/latest/)和[django-piston](https://bitbucket.org/jespern/django-piston/wiki/Documentation)。我的担忧是：

*   我将保留我的用户记录`User`，而不是在其他模型上。据我所知，上面的api支持自定义认证和授权。`User`但是如果可以排除一切，寒冷就找不到更多吗？

*   在文档上，所有示例都只是基于选择记录或在定义的模型上创建新记录。但在我的情况下，我需要通过不同的模型检查数据，（因此，输入数据不能来自单个模型）。同样，输出也将使用来自不同模型的数据创建。用更简单的话来说，我的输入和输出不受简单模型的限制，我需要处理（部分输入数据）并创建 XML 格式的自定义输出数据。

关于这两个基本问题，我想知道 Django-piston 或 nice-pie 之类的 API 是否适合我，或者我真正需要的是一个可以读取和生成 XML 请求/响应并与 django 配合良好的应用程序

我需要的是一个 django 应用程序，它：

*   可以产生 XML 格式的响应（与远程 C# 程序通信）
*   可以处理 XML 请求（来自远程 c# 程序）或简单的 url 请求（如 django 视图，但产生 XML 输出。）
*   不使用 django 身份验证，而是通过自定义`User`模型进行自定义身份验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:35:24.830

django-piston 和 sweetpie 都允许您定义您描述的自定义数据“格式”。活塞（可能还有美味的派）还提供了方便的方法和结构，让您可以轻松地将模型建模为 api 端点。不过，绑定到您的模型不是必需的。您基本上建立了一个字典，返回它，并让格式化程序完成他们的工作，将字典转换为 json 或 xml 响应。

I'm confident that either library will suit your needs. I'd like to suggest that you use JSON though, as it is very widely used for APIs, reduces overheard, and is easier to read with the naked eye. C# handles JSON just fine.

# avalonedit - 如何在 avalonedit 上设置 CharacterCasing 属性？

> ID：10783744
> 
> 赞同：0
> 
> 时间：2012-05-28T11:14:12.653
> 
> 标签：avalonedit

我只需要 avalonedit 上的大写字母。

我怎样才能附加财产？或者还有其他替代方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:07:53.130

没有内置功能。

我认为实现这一点的最佳方法是处理`TextArea.TextEntering`事件。如果输入文本不是全部大写，则通过设置中止文本输入，并使用大写版本再次`e.Handled = true;`调用。`TextArea.PerformTextInput()`

# php - CodeIgniter 中的错误 allowed_uri_chars

> ID：10783746
> 
> 赞同：0
> 
> 时间：2012-05-28T11:14:18.457
> 
> 标签：php

我做了一个页面控制器，我可以用 tinymce 生成页面

问题是当页面名称是这样的阿拉伯语时

示例：http://domain/solarBlog/blog/category/السلمي

显示错误

> **所提交的网址带有不被接受的字符**

有什么方法可以让 uri 允许阿拉伯字符？

我也使用默认值

```
$config[‘permitted_uri_chars’] = ‘a-z 0-9~%.:_\-’; 
```

> **请注意，我使用的是 2.1.0 版**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:54:09.280

Codeigniter 不允许提交一些要传递的字符。但在非拉丁语言的情况下，数据将被编码和传递，这将在编码字符串中生成一些不允许的字符。所以解决方案只是删除 $config['permitted_uri_chars'] 中的一些字符，如 % ，这些字符主要在编码 URL 时使用。但根据 codeigniter 文档不建议这样做。欲了解更多信息，请单击[此处](http://codeigniter.com/user_guide/installation/upgrade_140.html)。

# php - PHP - 数组搜索获取键值

> ID：10783747
> 
> 赞同：1
> 
> 时间：2012-05-28T11:14:18.893
> 
> 标签：php, arrays, search

我有一个数组如下，

```
$country = array ("01\. USA","02\. Russia","03\. UK","04\. India"); 
```

我只是想用这个字符串搜索我的数组，`$str = "USA";`它应该返回值所在的键。那可能吗。我尝试使用`array_search()`但它不起作用。

更新：

实际的数组有，

```
Array ( [0] => 01\. Australian Dollar [1] => 06\. Swedish Kroner [2] => 02\. British Pound Sterling [3] => 07\. Swish Frank [4] => 03\. Canadian Dollar [5] => 08\. U.S. Dollar [6] => 04\. Japanese Yen Per 100 [7] => 09\. Euro [8] => 05\. Singapore Dollar [9] => 10\. Taka Per 100 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:20:40.250

如果包含 strstr()，您可以尝试 foreach 值测试。

```
 foreach ($country as $n => $state)
    {
        if (strstr($state, 'USA'))
        {
            //found
            break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T11:25:27.627

```
$str = 'USA';
foreach ($country as $k => $v) {
  if (strpos($v, $str) !== FALSE)
    break;
}

echo $k; // will print: 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T11:17:50.723

您没有在示例中设置任何键，这意味着键会自动分配一个从 0 到 3 的值。如果您要搜索“01\. USA”，则数组中不存在值“USA” " 那么您将获得值 0（零），因为它是数组中具有自动分配键的第一个值。

在这个数组上对“USA”做一个array_search，它可能会给你预期的结果：

`$country = array (1 => "USA", 2 => "Russia", 3 => "UK", 4 => "India");`

您需要使用`key => value`正确分配键和值。而不是`1 => "USA"`你也可以这样做`"01" => "USA"`，这将为美国提供关键“01”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T11:21:53.523

您可以使用这里描述的 preg-grep [preg_grep](http://php.net/manual/de/function.preg-grep.php)。

然后你应该把 preg_grep 的结果放到 array_search 中。

```
$results = preg_grep($pattern, $input);
$indices = array();
foreach ($results as $result) {
   $indices[] = array_search($result, $input);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T11:26:26.563

```
$search = "USA";
$country = array ("01\. USA","02\. Russia","03\. UK","04\. India");
foreach($country as $key=>$cnt){
   if(strpos($cnt,$search)){
      echo "String found in position $key";
      break;
   }
 } 
```

你可以用这种方式编写代码。但它也会返回 true 如果您的搜索字符串也是“US”......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T11:37:23.433

如果您更喜欢在没有任何键的情况下保留当前结构（这不是最佳解决方案）。以下是您可以执行的操作：

```
$countries = array (
                    "01\. USA",
                    "02\. Russia",
                    "03\. UK",
                    "04\. India"
                   );

$input  =  'UK';
$output =  '';
foreach ($countries as $country){
     $found = strpos($country,$input);
     if ($found > 0){  // assuming $country wouldn't start with country name.
         $output = trim(substr($country,0,$found-1));
         break;
     }
} 
```

但是，我相信每个人都会建议您使用数组中的键。

# google-maps - 伦敦地图数据的多边形测试点

> ID：10783755
> 
> 赞同：0
> 
> 时间：2012-05-28T11:14:34.323
> 
> 标签：google-maps, geometry, geospatial, geo

我需要测试一个点是否在伦敦某些地图数据的多边形中。

忽略此比例数据的球形方面并将其视为平面是否安全？对于我们需要 100% 准确来说，这并不是至关重要的。大约10m的误差可能是可以的。

（我知道 Google 地图 API 中可能有一些功能已经做到了这一点，但我们正在预先计算服务器端。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:19:06.663

在最坏的情况下，如果您有一个代表整个伦敦的多边形，则错误可能会超过您的 10m 目标。如果：

*   伦敦以 N51.5deg,E0.0deg 为中心；
*   伦敦的半径是0.5度经度；

那么从 N51.5 E0.5 到 N51.5 W0.5 的大圆与相同点之间的恒向线之间的最大位移（恒向线是将球坐标视为平面时使用的方向）将大约142m。如果您使用一个巨大的矩形来模拟伦敦，那么误差将超出您的容忍度。

因此，近似值的安全性取决于您使用多少个多边形来表示伦敦，特别是取决于您的表示中任何多边形的边的最大长度。

**编辑**

解决OP的评论：

是的，我相信使用恒向线*与天真地假装 lat/lng 是平面坐标相同*，并且不需要进一步的转换。在这个简单的例子中，我在 N51.5 E0.5 和 N51.5 W0.5 之间构建了恒向线，它是两点之间的小圆弧，也是一条纬线，在这种情况下也是同一条线如果将纬度/经度视为平面坐标，则绘制。但这是一个特例，专为我的回答量身定做。老实说，我不确定，但我认为在墨卡托投影上这通常是正确的，即恒向线与将纬度/经度视为平面坐标得到的线相同。

所提出的问题可以简化为询问一个点是在一条线的一侧还是另一侧。如果一个点位于形成多边形边界的线段之一的内侧，则该点位于多边形内部。

在一张纸上画一个圆圈。然后在圆上的任意 2 个点之间画一条弦。现在你有一个问题的说明：圆圈代表球形地球上任意两点之间的大圆，直线代表两点之间的小圆。弦和圆之间的距离表示大圆和小圆之间的距离，这是您在幼稚假设下可能犯的错误。

它很粗糙，它已经准备好了，我唯一的主张是，如果您的伦敦地图被建模为一个边长约为 1 度经度的多边形，那么由于将球坐标视为平面而产生的定位误差可能大于 140m .

# c# - C# .NET - 首次释放 ctrl 时未触发 ctrl-c keyup

> ID：10783759
> 
> 赞同：0
> 
> 时间：2012-05-28T11:14:59.523
> 
> 标签：c#, .net, copy-paste

我有一个捕获 KeyUp 事件的 DataGridView。我用它来捕获键盘副本（ctrl-c），然后对复制的文本执行我自己的格式化。当我首先释放“C”键时，一切正常，但如果我在仍然按住“C”的同时先释放“ctrl”，则不会触发事件。下面是事件的代码。我已经在复制上下文菜单项上处理它，但我知道我会让用户使用键盘快捷键，我希望一切都按预期工作。任何想法表示赞赏。

```
 /// <summary>
  /// Key up event handler
  /// </summary>
  void Control_KeyUp(object sender, KeyEventArgs e)
    {          
        if (e.KeyCode == Keys.C && e.Control == true )
        {
            CopyToClipboard(dgDS408Parameter.CurrentCell.EditedFormattedValue.ToString());               
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:22:00.593

```
public bool CtrlPressed=false;

void Control_KeyUp(object sender, KeyEventArgs e)
{          
    if (e.KeyCode == Keys.C && ctrlPressed == true )
    {
        CopyToClipboard(dgDS408Parameter.CurrentCell.EditedFormattedValue.ToString());                           
    }
    CtrlPressed=false;
}   

void Control_KeyDown(object sender, KeyEventArgs e)
{          
    if (e.Control == true )
    {
        CtrlPressed=true;
    }
} 
```

我是写在心里的，没有经过测试，但是思路是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:23:35.503

我认为您编写的代码存在逻辑错误

```
e.KeyCode == Keys.C && e.Control == true 
```

这意味着当 Any 键触发 keyUp 事件时，“C”和“Cnt”两个键都必须处于按下状态。

所以这里发生的情况是当你按下 Cnt + C 没问题但是当你首先释放 'ctrl' 时条件是错误的

```
e.KeyCode == Keys.C && e.Control == true 
```

这就是为什么您的数据没有复制到剪贴板的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:15:36.067

为什么要使用 key-up 事件？所有其他程序在按键时执行相同的操作。`KeyUp`将您的活动从to更改为`KeyDown`，一切都会好起来的。

# objective-c - 无法返回 CGPoint

> ID：10783762
> 
> 赞同：0
> 
> 时间：2012-05-28T11:15:11.853
> 
> 标签：objective-c, cgpoint

我得到了这个方法：

```
-(CGPoint) getPointOnaLine: (CGPoint) p1: (CGPoint) p2: (int) dt {
    CGPoint tempPoint;
    float myY = p1.y;
    float len = getLineLength( p1, p2 );
    float res = 1000;
    // do not bother with calculation with small widths
    if ( dt == 0 )
        return p1;
    if ( len < (2 / res ) ) 
        return p2;
    float increm = len / res;
    //  int min = 2;

    float dY = p2.y - p1.y;
    float dx = p2.x - p1.x;

    if ( dx != 0 ) {          // slope is infinite
        float slope = dY / dx;

        float b = p1.y - slope * p1.x;

        if ( p1.x < p2.x ) {
            for ( float i= p1.x; i<=p2.x; i=i+increm ) {
                myY = (slope * i + b);
                tempPoint = ccp(i,myY);
                len = getLineLength( p1,  tempPoint);
                if ( len >= dt)
                    return tempPoint;
            }
        } else if ( p1.x > p2.x )
            for ( float i= p2.x; i<=p1.x; i=i+increm) {
                myY = (slope * i + b);
                tempPoint = ccp(i,myY);
                len = getLineLength( p2, tempPoint);
                if ( len >= dt )
                    return tempPoint;
            }
    } else {
        return p2;
    }
    return p1;
} 
```

我在另一种方法中使用它：

```
CGPoint b1, b2, pt;
b1 = getPointOnaLine(originalPoint, bezierPoint, (int)t*stepLine1);
b2 = getPointOnaLine(bezierPoint, targetPoint, (int)t*stepLine2);
bLen = getLineLength(b1,b2);
stepLine3 = bLen / frames;
pt =  getPointOnaLine(b1,b2,(int)self.tCGPoint b1, b2, pt; 
```

编译器一直告诉我“赋值中的类型不兼容”，我在其中声明了 b1、b2 和 pt。界面是：

```
-(CGPoint) getPointOnaLine: (CGPoint) p1: (CGPoint) pt2: (int) dt; 
```

如果我删除分配，它只会给我一个隐式声明警告。我真的很困惑为什么这不会编译。

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:22:01.990

您已经定义了一个方法（尽管带有奇怪的未命名参数），但您将其作为函数调用。

尝试：

```
b1 = [self getPointOnaLine:originalPoint :bezierPoint :(int)t*stepLine1]; 
```

（更好的是，使用参数名称声明它，以便您未来的自己更容易阅读。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:22:46.583

您正在以 c 函数样式调用目标 c 消息，而是将其用作

```
b1 = [self getPointOnaLine:originalPoint :bezierPoint  :(int)t*stepLine1];
b2 = [self getPointOnaLine:bezierPoint :targetPoint :(int)t*stepLine2]; 
```

如果 b1 和 b2 在同一个类中初始化，否则 self 将替换为已`getPointOnaLine:bezierPoint`定义方法的对象。

# android - 是否可以从其他地方访问活动的对象？

> ID：10783764
> 
> 赞同：1
> 
> 时间：2012-05-28T11:15:19.850
> 
> 标签：android, android-activity

这可能是一个愚蠢的想法，但有谁知道是否可以从其他地方访问一个活动的对象？

具体来说，假设您有一个活动 A（带有 textView t）并且您创建了一个普通的 java 类 B。

在 onCreate，您开始运行 B 进行一些计算，如下所示，

```
public class MyActivity extends Activity {
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    t = (TextView)findViewById(R.id.outputtext);
    Somejava B = new Somejava();
    B.run();
  }
} 
```

B有没有办法更新textView？

我知道简单的方法（也许是正确的方法）是从 B 类返回结果并在 MyActivity 中使用 t.setText(result)，但我只想知道是否可以更新 B 中的 textview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:17:44.503

使用 Intent 或公共静态变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:21:26.530

是的，如果 Activity 的字段是公开的，并在第一次`public Handler`创建时发布 UI 更改，`Activity`但事实上，这样做真的很难看......

* * *

您可以使用Intent`startActivityForResult(...)`中的一些可序列化数据通知其他活动流程如何​​通过，并在方法`Bundle extras`中捕获结果...`overrided``onActivityResult(...)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:25:51.650

可以简单地将活动引用传递给构造函数中的 b 并在您的活动中创建方法来更新 textview。如果您使用另一个线程并没有忘记使用处理程序或其他方式来更新 UI 线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T11:29:50.103

对于“普通的 java 类” `B`，我会使用`interfaces`

```
public interface SomejavaListener{
    void onSomejavaFinish(Object result);
}

public class MyActivity implements SomejaveFinish extends Activity {
  TextView t;

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    t = (TextView)findViewById(R.id.outputtext);
    Somejava B = new Somejava();
    B.run(MyActivity.this); //notice the extra argument!
  }

  public void onSomejavaFinish(Object result){
    t.setText("updated! ^,^");
  }
}

public class Somejava {
    //...
    public void run(SomejavaListener callback){
        //working working
        callback.onSomejavaFinish( new Object() );
    }
} 
```

然而，关于 android 环境，问题在于我觉得[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)可能对你来说是正确的。它有一种`doInBackground`方法可以工作并且不会破坏您的 UI 线程（导致 ANR 错误）。另一个优点是这些方法再次在 UI 线程中运行`onPreExecute`，`onPostExecute`因此只需眨眼即可更新您的`TextView`

```
public class MyActivity extends Activity {
    TextView t;

    private class MyAsyncTask extends AsyncTask<Void, Void, Void> {
    protected Void doInBackground(Void... void) {
         //do your stuff
         return null
     }

     protected void onPostExecute(Void void) {
         MyActivity.this.t.setText("updated ^^v");
     }
 }

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    t = (TextView) findViewById(R.id.outputtext);
    MyAsyncTask myAsyncTask = new MyAsyncTask();
    myAsyncTask.execute();
  }
} 
```

# openssl - Python-ldap 和 SSL

> ID：10783767
> 
> 赞同：2
> 
> 时间：2012-05-28T11:15:38.680
> 
> 标签：openssl, python-ldap

我尝试使用 python-ldap 和 ssl (linux gentoo) 连接到 ldap。服务器端证书。服务器不需要来自客户端的证书。我可以使用获得证书

```
openssl c_client -showcerts -connect ip:port 
```

它显示了很多包含企业 CA、ROOT CA 和代码的信息： 20 - 无法获取本地颁发者证书。怎么用这个连接？我必须将此添加到 ssl 受信任的密钥中吗？或者在连接时添加到 ldap 选项？

感谢您的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:18:34.757

我有同样的问题，但用[这些说明解决了](http://www.cyberciti.biz/faq/verify-ssl-certificate-openssl/)

基本上魔术是创建一个目录，将 ca 证书放在该目录中并运行

```
 c_rehash <directoryname> 
```

并运行`s_client`with 参数`-CApath <directoryname>`

在`python-ldap`你做同样的事情

```
ldap.set_option(ldap.OPT_X_TLS_CACERTFILE, '/path/to/ca.crt') 
```

# graph - gnuplot 对多个条进行分组

> ID：10783770
> 
> 赞同：11
> 
> 时间：2012-05-28T11:15:49.613
> 
> 标签：graph, plot, gnuplot

我正在使用 gnuplot 为多个基准测试生成图表。
对于每个基准测试，我都有许多配置要绘制。我想绘制一个图表命中率（我的 y 轴）与基准（x 轴）。每个基准将有多个列，按颜色区分。

一段时间前，我使用一些 python 脚本生成了相同类型的图表，但我不知道如何在 gnuplot 中执行此操作。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-28T14:14:14.540

这个原始数据，`languages.data`：

```
Title   C   C++ Java    Python
"Writing code"  6   4   10  1
"Understanding code"    6   3   4   1
"Generating prime numbers"  3   1   2   10 
```

使用此代码：

```
set title "Benchmarks"
C = "#99ffff"; Cpp = "#4671d5"; Java = "#ff0000"; Python = "#f36e00"
set auto x
set yrange [0:10]
set style data histogram
set style histogram cluster gap 1
set style fill solid border -1
set boxwidth 0.9
set xtic scale 0
# 2, 3, 4, 5 are the indexes of the columns; 'fc' stands for 'fillcolor'
plot 'languages.data' using 2:xtic(1) ti col fc rgb C, '' u 3 ti col fc rgb Cpp, '' u 4 ti col fc rgb Java, '' u 5 ti col fc rgb Python 
```

提供以下直方图：

![gnuplot 直方图](../Images/74de49adb658764cc13d5bb8e80a55c8.png)

但我建议使用[R](http://www.r-project.org/)的语法更具可读性：

```
library(ggplot2)
# header = TRUE ignores the first line, check.names = FALSE allows '+' in 'C++'
benchmark <- read.table("../Desktop/gnuplot/histogram.dat", header = TRUE, row.names = "Title", check.names = FALSE)
# 't()' is matrix tranposition, 'beside = TRUE' separates the benchmarks, 'heat' provides nice colors
barplot(t(as.matrix(benchmark)), beside = TRUE, col = heat.colors(4))
# 'cex' stands for 'character expansion', 'bty' for 'box type' (we don't want borders)
legend("topleft", names(benchmark), cex = 0.9, bty = "n", fill = heat.colors(4)) 
```

此外，它提供了一个更漂亮的输出：

![R直方图](../Images/51c28274ed1e1089b6761d3dc43e4a47.png)

# scala - 更干净的元组 groupBy

> ID：10783772
> 
> 赞同：33
> 
> 时间：2012-05-28T11:16:16.340
> 
> 标签：scala, scala-collections

我有一个键值对序列（String，Int），我想通过键将它们分组为一个值序列（即`Seq[(String, Int)]) => Map[String, Iterable[Int]])`）。

显然，`toMap`在这里没有用，并将`groupBy`值维护为元组。我设法想出的最好的是：

```
val seq: Seq[( String, Int )]
// ...
seq.groupBy( _._1 ).mapValues( _.map( _._2 ) ) 
```

有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-28T11:53:24.157

这是一个`toMultiMap`向可遍历对象添加方法的皮条客。它会解决你的问题吗？

```
import collection._
import mutable.Builder
import generic.CanBuildFrom

class TraversableOnceExt[CC, A](coll: CC, asTraversable: CC => TraversableOnce[A]) {

  def toMultiMap[T, U, That](implicit ev: A <:< (T, U), cbf: CanBuildFrom[CC, U, That]): immutable.Map[T, That] =
    toMultiMapBy(ev)

  def toMultiMapBy[T, U, That](f: A => (T, U))(implicit cbf: CanBuildFrom[CC, U, That]): immutable.Map[T, That] = {
    val mutMap = mutable.Map.empty[T, mutable.Builder[U, That]]
    for (x <- asTraversable(coll)) {
      val (key, value) = f(x)
      val builder = mutMap.getOrElseUpdate(key, cbf(coll))
      builder += value
    }
    val mapBuilder = immutable.Map.newBuilder[T, That]
    for ((k, v) <- mutMap)
      mapBuilder += ((k, v.result))
    mapBuilder.result
  }
}

implicit def commomExtendTraversable[A, C[A] <: TraversableOnce[A]](coll: C[A]): TraversableOnceExt[C[A], A] =
  new TraversableOnceExt[C[A], A](coll, identity) 
```

可以这样使用：

```
val map = List(1 -> 'a', 1 -> 'à', 2 -> 'b').toMultiMap
println(map)  // Map(1 -> List(a, à), 2 -> List(b))

val byFirstLetter = Set("abc", "aeiou", "cdef").toMultiMapBy(elem => (elem.head, elem))
println(byFirstLetter) // Map(c -> Set(cdef), a -> Set(abc, aeiou)) 
```

如果您添加以下隐式定义，它也将适用于类似集合的对象，例如`String`s 和`Array`s：

```
implicit def commomExtendStringTraversable(string: String): TraversableOnceExt[String, Char] =
  new TraversableOnceExt[String, Char](string, implicitly)

implicit def commomExtendArrayTraversable[A](array: Array[A]): TraversableOnceExt[Array[A], A] =
  new TraversableOnceExt[Array[A], A](array, implicitly) 
```

然后：

```
val withArrays = Array(1 -> 'a', 1 -> 'à', 2 -> 'b').toMultiMap
println(withArrays) // Map(1 -> [C@377653ae, 2 -> [C@396fe0f4)

val byLowercaseCode = "Mama".toMultiMapBy(c => (c.toLower.toInt, c))
println(byLowercaseCode) // Map(97 -> aa, 109 -> Mm) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-28T14:30:45.527

标准库中没有执行此操作的方法或数据结构，您的解决方案看起来尽可能简洁。如果您在多个地方使用它，您可能希望将其分解为实用方法

```
def groupTuples[A, B](seq: Seq[(A, B)]) = 
  seq groupBy (_._1) mapValues (_ map (_._2)) 
```

然后你显然只是用`groupTuples(seq)`. 就 CPU 时钟周期而言，这可能不是最有效的，但我认为它也不是特别低效。

我在 9 个元组列表上对 Jean-Philippe 的解决方案做了一个粗略的基准测试，这稍微快了一点。两者的速度大约是将序列折叠到地图中的两倍（有效地重新实现`groupBy`以提供您想要的输出）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-28T12:36:51.617

我不知道你是否认为它更干净：

```
seq.groupBy(_._1).map { case (k,v) => (k,v.map(_._2))} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-02T19:59:48.143

从 开始`Scala 2.13`，大多数集合都提供了[groupMap](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/List.html#groupMap[K,B](key:A=%3EK)(f:A=%3EB):scala.collection.immutable.Map[K,CC[B]])方法，该方法（顾名思义）与 a 等效（更有效），`groupBy`后跟`mapValues`：

```
List(1 -> 'a', 1 -> 'b', 2 -> 'c').groupMap(_._1)(_._2)
// Map[Int,List[Char]] = Map(2 -> List(c), 1 -> List(a, b)) 
```

这：

*   `group`s 元素基于元组的第一部分 ( `Map(2 -> List((2,c)), 1 -> List((1,a), (1,b)))`)

*   `map`s`List((1,a), (1,b))`通过取第二个元组部分 ( `List(a, b)`) 对值 ( ) 进行分组。

# objective-c - iOS - 使用 FMOD 的多个应用程序 - 音频仅适用于要运行的第一个应用程序

> ID：10783779
> 
> 赞同：1
> 
> 时间：2012-05-28T11:16:44.910
> 
> 标签：objective-c, ios, fmod

我正在开发一个我没有开发的现有应用程序，它使用 FMOD 播放其音频。

从外观上看，该应用程序的早期版本被编写为使用 AVAudioPlayer，并且有构建选项可以使用。

不过，最新版本使用 FMOD，因为许多功能仅在使用 FMOD 版本构建时才包含在内。

当我首先使用现有应用程序之一，然后尝试运行我正在开发的这个新应用程序时，问题就出现了。

如果我运行一个应用程序，然后将其留在后台并运行第二个应用程序，则第二个应用程序中的声音根本不会播放。我可以回到第一个应用程序并毫无问题地播放声音。如果我杀死这两个应用程序，然后先启动另一个应用程序，那么它会完美运行。

如果我使用 AVAudioPlayer 选项构建应用程序，那么我不会遇到这个问题，而且为 FMOD 版本编写的所有功能都不存在。因此，我可以证明它与 FMOD 有关，但无法弄清楚是什么。

编辑：做了更多的挖掘，我得到了两个 FMOD 错误：

首先，当我运行时：
`result = fmodSystem->init(4, FMOD_INIT_NORMAL | FMOD_INIT_ENABLE_PROFILE, NULL);`
我收到错误 51 - **“发生套接字错误。这是其他地方未列出的与套接字相关的错误的全部内容。”**

其次，当我运行时：
`result = fmodSystem->createSound((const char *)[audioData bytes], FMOD_SOFTWARE | FMOD_OPENMEMORY, &exinfo, &fmodSound);`
我收到错误 79 - **“此命令失败，因为未调用 System::init 或 System::setDriver。”**

第二个似乎是因为 init 失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T03:09:10.090

这是通过 Twitter 回答的，因此我会自己将答案放在这里，但是，如果 Stuart 想自己在这里回答，那么我会投票作为答案。

答案是禁用：FMOD_INIT_ENABLE_PROFILE，因为它一次只能在一个应用程序中运行：

因此，这：
`result = fmodSystem->init(4, FMOD_INIT_NORMAL | FMOD_INIT_ENABLE_PROFILE, NULL);`

应该变成这样：
`result = fmodSystem->init(4, FMOD_INIT_NORMAL, NULL);`

# jquery - jQuery没有成功发布到服务器

> ID：10783788
> 
> 赞同：0
> 
> 时间：2012-05-28T11:17:22.347
> 
> 标签：jquery, json, asp.net-mvc

这是我的操作代码，目前仅允许 GET 用于测试目的

```
//[HttpPost]
public JsonResult BuildingBookings(string buildingName)
{
        var result = new BuildingBookings_Result(); //This has a breakline on it
        //Uninteresting code to populate result
        return Json(result, JsonRequestBehavior.AllowGet);
} 
```

我的 ASP MVC 的第一行上有一个断点，我可以在浏览器中使用以下 URL 触发它以进行测试

```
http://localhost:22468/Buildings/Bookings?buildingName=DoesNotExist 
```

并返回预期的结果

```
{"Success":false,"Message":"Building not found","Data":[]} 
```

但是当我尝试从 jQuery 做完全相同的事情时，我的 ASP MVC 操作中的断点永远不会被触发。无论我使用 GET 还是更正所有相关代码以改用 POST，这都是一样的。

```
//Source code in browser using Ajax
<script>
        $("#MainForm").submit(
                function () {
                        alert("Calling");
                        $.ajax({
                                url: "http://localhost:22468/Buildings/Bookings",
                                data: { buildingName: "DoesNotExist" },
                                type: "GET",
                                success: function (result) {
                                        alert("Call OK");
                                        alert("Status " + result.Success);
                                        alert("Message" + result.Message);
                                        alert("Building name " + result.Data.Name);
                                        alert("Sleeps " + result.Data.Sleeps.toString());
                                },
                                error: function (request, status, errorThrown) {
                                        alert("Call Fail");
                                        alert("status " + status);
                                        alert("request " + request.toString());
                                        alert("error " + errorThrown.toString());
                                }
                        });
                        return false;
                });
</script> 
```

我收到“呼叫”警报，然后是“呼叫失败”，状态 =“错误”

更新：这不是 CORS 问题，因为我已在响应中添加了适当的标头以允许跨域调用。该代码适用于 GET，但不适用于 POST 或 jsonp 作为 $.ajax 类型（显然我首先将 [HttpPost] 放回原处）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:21:34.710

如果您的 html 文件是在 file:// 中打开或从另一个域/端口获取的，则您会遇到安全异常，因为这是一个跨域查询。

最常见的解决方案是使用[JSONP](http://en.wikipedia.org/wiki/JSONP)。

另一个是[CORS](https://developer.mozilla.org/en/http_access_control)（过去我在使用这个解决方案时遇到过兼容性问题，但如果你只使用现代浏览器应该没问题）。

# apache - Apache Tomcat 6 呈现访问被拒绝错误而不是身份验证质询

> ID：10783789
> 
> 赞同：1
> 
> 时间：2012-05-28T11:17:23.970
> 
> 标签：apache, authentication, tomcat, basic-authentication

我在 Apache tomcat 6 上部署的 web 应用程序中有两个不同的安全约束。tomcat 正在为我的网站处理不同的身份验证方案。

**我的问题：** 例如 page1 只能由 user1 访问，而 page2 只能由 user2 访问。这工作正常。

问题是，如果 user1 已登录，并且他访问 page2（user1 无法访问），则会向他显示拒绝访问错误，而不是允许他以其他用户身份登录。如果登录的用户是

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:02:45.610

这种行为是 servlet 规范强制要求的。正如@Rob 所建议的那样，您应该为您的用户提供一些处理“未经授权”情况的选项：例如，注销并尝试再次访问资源（这将要求新的凭据）。

# iphone - 如何在 iPhone 中取消 ASIFormDataRequest

> ID：10783791
> 
> 赞同：0
> 
> 时间：2012-05-28T11:17:26.973
> 
> 标签：iphone, objective-c, ios, asihttprequest, asiformdatarequest

如何使用块取消 ASIFormDataRequest？

```
__block ASIFormDataRequest *req = [ASIFormDataRequest requestWithURL:url];  

[req appendPostData:[str dataUsingEncoding:NSUTF8StringEncoding]];
[req setDelegate:self];
[req setCompletionBlock:^{
    [self parseResult:req];
}];
[req setFailedBlock:^{
    [self requestWentWrong:req];
}];
[req setTag:tag];
[req startAsynchronous]; 
```

有没有办法在按钮操作中取消这个请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:22:29.390

在您的按钮操作事件中添加此代码，因为 req 是类成员变量：

```
-(IBAction)YourbuttonactionEvent
{ 
  if(![req isCancelled]) 
  {
    // Cancels an asynchronous request
    [req cancel];
    // Cancels an asynchronous request, clearing all delegates and blocks first
    [req clearDelegatesAndCancel];
} 
```

# c - c 中的一个消费者多个生产者在完全缓冲后恢复时防止赛车

> ID：10783792
> 
> 赞同：3
> 
> 时间：2012-05-28T11:17:28.677
> 
> 标签：c, mutex, race-condition, producer-consumer, circular-buffer

我制作了一个循环缓冲区，多个客户端将不同长度的消息写入缓冲区。服务器将它们读出。它基于消费者/生产者问题的代码。问题是当缓冲区已满并且服务器从缓冲区中删除所有数据时，客户端收到信号以恢复其写入操作，但另一个客户端（在另一个线程中）开始在缓冲区中写入消息。我希望在缓冲区满之前已经在写入的客户端恢复它的操作，这样消息就不会乱序到达。

这是我的代码（我删除了很多测试代码）

```
#include <stdio.h>
#include <malloc.h>
#include <string.h>
#include <pthread.h>
#include <unistd.h>

#define BUFFER_SIZE 8
#define NUM_THREADS 4

struct cBuf{
    char    *buf; 
    int     size;   
    int     start;
    int     end;   
    pthread_mutex_t mutex;
    pthread_cond_t  buffer_full;
    pthread_cond_t  buffer_empty;
};

struct cBuf cb;

void buf_Init(struct cBuf *cb, int size) {
    int i;
    cb->size  = size + 1; 
    cb->start = 0;
    cb->end   = 0; 
    cb->buf = (char *)calloc(cb->size, sizeof(char)); 
    for (i=0;i<size;i++) cb->buf[i]='_';

}

void buf_Free(struct cBuf *cb) {
    free(cb->buf);
}

int buf_IsFull(struct cBuf *cb) {
    return (cb->end + 1) % cb->size == cb->start; 
}

int buf_IsEmpty(struct cBuf *cb) {
    return cb->end == cb->start; 
}

int buf_Insert(struct cBuf *cb, char *elem) {

    int i,j;

    pthread_mutex_lock(&(cb->mutex));
    for (i=0; i < strlen(elem); ++ i){
        if (buf_IsFull(cb)==1) printf("\nProducer (buf_Insert) is waiting because of full buffer");
        while(buf_IsFull(cb)){  
            pthread_cond_signal(&(cb->buffer_full));            
            pthread_cond_wait(&(cb->buffer_empty),&(cb->mutex));
        } 
        cb->buf[cb->end] = elem[i]; 
        cb->end = (cb->end + 1) % cb->size;     
        printf("%c [INPUT]",elem[i]);
    }

    pthread_cond_signal(&(cb->buffer_full));
    pthread_mutex_unlock(&(cb->mutex));     
    return 0;       
}

int buf_Read(struct cBuf *cb, char *out) {
    int i,j;

    pthread_mutex_lock(&(cb->mutex));
    if (buf_IsEmpty(cb))printf("\nConsumer (buf_Read) is waiting because of empty buffer\n");
    while(buf_IsEmpty(cb)){
        pthread_cond_wait(&(cb->buffer_full),&(cb->mutex));
    }
    for (i=0;i<BUFFER_SIZE-1;i++){
    printf("\n");
        if (cb->start == cb->end) break;        
        out[i] = cb->buf[cb->start];
        cb->buf[cb->start] = '_';
        cb->start = (cb->start + 1) % cb->size; 
        printf("%c [OUTPUT]",out[i]);
    }
    pthread_cond_signal(&(cb->buffer_empty));
    pthread_mutex_unlock(&(cb->mutex)); 
    return 0;
}

void * client(void *cb){

    pthread_detach(pthread_self());

    struct cBuf *myData;
    myData = (struct cBuf*) cb;
    char input[]="Hello World!";
    if (buf_Insert(myData, input)){
        //succes on return 0
        printf("\n");
    } 

    return 0;
}

int main(void) {
    char out[60];
    pthread_t thread;
    int i;
    /* Initialise conditioners*/
    pthread_cond_init(&(cb.buffer_full),NULL);
    pthread_cond_init(&(cb.buffer_empty),NULL);

    buf_Init(&cb, BUFFER_SIZE);

    for (i = 0; i<NUM_THREADS; i++){
            if(pthread_create (&thread,NULL, client, (void *) &cb) !=0){
        } else {

        }
    }

    while (1){
        if (buf_Read(&cb,out)){
        } 
    }

    //empty the buffer; free the allocated memory
    buf_Free(&cb);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:09:05.803

我已经在[Producer/consumer 的评论中解释了当缓冲区小于 producer 的输入时似乎处于死锁状态](https://stackoverflow.com/questions/10782438/producer-consumer-seems-to-be-in-deadlock-when-buffer-is-smaller-than-input-from/10782604#10782604)，但这些是评论，所以这里作为答案：

您永远不应该在队列中有部分消息。确保你从不写一个。

您可以在开始写入消息之前检查是否有足够的空间，如果没有则立即等待 buffer_empty，或者您可以更改队列以将共享指针发送到分配的数据（将所有权传递给消费者或引用计数）或其他东西，因此每条消息只占用队列中的一个插槽，并为其余的分配内存。什么是最好的将取决于您的信息的确切性质。只要没有部分消息，任何事情都会做。

虽然可以记录哪个特定作者需要完成一条消息并唤醒它，但这将非常复杂。同步虽然很难，但不要通过对其提出额外要求来使其变得更加困难。

事实上，除非这是一项家庭作业（从某种意义上说，您这样做是为了了解同步的工作原理），否则只需寻找现成的消息队列即可。SysV-IPC 或数据报模式下的 unix-domain 套接字是我想到的两个选项，或者寻找一些这样的库。

# math - 实现棱柱关节物理

> ID：10783795
> 
> 赞同：2
> 
> 时间：2012-05-28T11:17:43.183
> 
> 标签：math, box2d, physics, game-physics

我正在尝试为我用 C++ 开发的应用程序 OpenframeWorks 实现我自己的物理特性。我目前正在使用 Box2D，但我不需要碰撞检测，所以我想要更轻的东西。

我有一个带有重力的世界和一个动态对象，其运动受到任意长度、任意角度的棱柱关节的约束，连接到静态对象。使用关节电机模拟摩擦。

我看过

[2d 游戏物理资源](https://stackoverflow.com/questions/165404/resources-for-2d-game-physics)

但这里的一切似乎都集中在构建我不需要做的完整物理引擎上。任何人都可以为我指出正确的数学方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:48:05.270

If Box2D has what you want, I'd recommend you reconsider your "lighter" requirement. Unless you can quantify the harm caused by using a library with a few more bytes, I'd say that the benefit will outweigh the cost of you writing it for yourself.

If you have a good understanding of the physics, and want to learn how to do it, by all means go ahead. If not, use what someone more knowledgeable than you has provided and forget the size of the library.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:45:00.157

您只需要将重力分成两个分量；沿着棱柱关节轴，以及其他任何东西。（见[自由体图](http://en.wikipedia.org/wiki/Free_body_diagram)）

这很容易通过重力矢量和轴矢量之间的[矢量点积来实现。](http://en.wikipedia.org/wiki/Dot_product)如果您首先将轴矢量缩放到长度 1，则点积的结果将是沿轴的力。

要将力转化为加速度，您只需除以移动物体的质量即可。

# coq - 存在量词：如何引用实例

> ID：10783798
> 
> 赞同：2
> 
> 时间：2012-05-28T11:17:44.913
> 
> 标签：coq

我有一个定理，我证明存在满足某些属性的对象。我通过构造对象证明了这个定理。然后，在另一个证明中，我想在第二个定理的陈述中引用第一个定理中定义的对象。我知道如果我使用 Defined 而不是 Qed 关闭我的证明，该对象应该是可访问的，但我不知道如何访问它。例如：

定理 T1：存在 x，P x。证明。... 定义。

定理 T2：对于在 T1 中构造的相同 x，Q x \/ R x。证明。... Qed。

我如何在 Coq 中表达这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:08:39.643

在这种情况下，您应该简单地使用定义来定义对象 (x)。

```
Definition object : (...) := 
  ...

Theorem T1 : exists x, P x.
  Proof.
  exists object.
    ...
  Qed.

Theorem T2 : ... 
```

T2 的证明使用相同的对象。您可能会发现某些策略（即，精确的，双重的，如果这是存在于 Prop 中的东西）将在这里为您提供帮助，因为它们让您更轻松地操作原始证明对象。

# facebook-opengraph - facebook - 用户没有通过访问令牌 url 列出任何访问令牌

> ID：10783804
> 
> 赞同：0
> 
> 时间：2012-05-28T11:18:08.513
> 
> 标签：facebook-opengraph, facebook-access-token

我与我们的一位客户有问题。我们开发了一个应用程序，显然工作正常。我们使用各种帐户进行了测试。问题是我们的客户无法使用该应用程序。访问客户的帐户，我尝试了这个 FB 访问令牌工具： [https ://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)

我尝试使用来自不同供应商的客户帐户的各种应用程序。

这是结果（截图）：

[截屏](http://secure.the-ring.it/fb-app-usi/access-token.jpg)

可能是什么原因？该帐户似乎无法存储来自任何应用的任何访问令牌。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:16:06.463

访问令牌工具只会显示用户是管理员或开发人员的应用程序的令牌 - 如果他们只是普通用户，则不会在此处显示。

# ipad - 如何让应用程序在不禁用 Web 视图原生事件侦听器的情况下注册对屏幕的任何触摸？

> ID：10783813
> 
> 赞同：0
> 
> 时间：2012-05-28T11:19:01.743
> 
> 标签：ipad, uiwebview, event-handling, titanium, appcelerator-mobile

我正在使用 Titanium Appcelerator 来构建 iPad 应用程序。我需要做的一件事是计算一段时间内触摸屏幕的次数。所以基本上，我想要的只是注册每一次点击/滑动/按住/等，这是在 iPad 屏幕上完成的，而不禁用 uiwebview 的所有本机行为。

我一直在研究这个主题的“小”（很多），似乎你不能让事件侦听器检查这些东西，而不禁用 webview 处理手势的方式？但我认为可能有一种解决方法，不可能只在屏幕上注册所有手势？
请注意，我对目标 C 一无所知……：S

谢谢（：

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-28T14:18:23.147

尝试这个

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

这允许在您自己的手势识别器和 UIWebView 之间共享手势。您必须为注册的每种手势识别器调用它。

# javascript - 删除 jquery 中的 div 子项

> ID：10783815
> 
> 赞同：2
> 
> 时间：2012-05-28T11:19:11.580
> 
> 标签：javascript, jquery

> **可能重复：**
> [将 Div 替换为另一个 Div](https://stackoverflow.com/questions/5062916/replace-div-with-another-div)

```
<div id='test'>
 <span></span>
 <p></p>
 <button></button>
 <h1></h1>
</div> 
```

**我的问题是**，我们如何删除`button` 元素并在 jquery 的同一位置插入另一个元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T11:20:42.897

用这个：

```
 $('#test button').replaceWith('<span>new</span>') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T11:25:08.003

`$('#test button:first').replaceWith('<span>new</span>')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T11:20:59.750

您可以使用该`.replaceWith()`方法来完成此操作。[更多](http://api.jquery.com/replaceWith/)。_

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T11:20:40.523

你可以使用`replaceWith()`方法：

```
$('#test button').replaceWith('<p>another element</p>') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T11:31:53.383

解决方案

```
$('#test').find('button').replaceWith('<input type="text"/>');
 alert($('#test').html()); 
```

# ruby-on-rails - Rails 选择 - 不需要的自动类型转换

> ID：10783816
> 
> 赞同：3
> 
> 时间：2012-05-28T11:19:16.570
> 
> 标签：ruby-on-rails, database, type-conversion

DBMS 是 PostgreSQL。

在控制器中：

```
@data = current_user.myitems.all(:select => 'record_date, count(record_date) as value', :group => 'record_date') 
```

在一个视图中：

```
<% @data.each do |item| -%>
   <%= item.record_date.utc.strftime('%Y%m%d') %>
<% end -%> 
```

一切正常。

但是，如果我更改日期字段名称：

```
@data = current_user.myitems.all(:select => 'record_date as recdate, count(record_date) as value', :group => 'record_date')

<% @data.each do |item| -%>
   <%= item.recdate.utc.strftime('%Y%m%d') %>
<% end -%> 
```

我收到错误消息：

```
undefined method `utc' for "2012-02-09 17:03:47":String 
```

怎么回事？？！！我没有命令将类型转换为字符串！！！

您可能建议不要在 SQL 字符串中创建别名或在模型中定义别名，但我不想更改模型来为列创建别名，因为我只需要一次别名并且仅用于显示目的。控制器的方法具有“ **case** ”语句，其中存在**多个 select 语句**，**每个语句都有自己的列名**。我需要制作别名以获得可靠的视图，而不需要“if”语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:06:42.333

您可以通过 [`ftype`](http://deveiate.org/code/pg/PG/Result.html#method-i-ftype). ActiveRecord 在 postgres 适配器（方法 `#result_as_array`）中使用此信息来检查列需要转义的位置，然后丢弃此信息。

我对进一步数据流的猜测是，它采用列名并使用通过数据库反射获得的数据来确定类型。由于基本类型是`String`，所以你明白了。因此，使用 rails 期望的列类型或破解 postgres 适配器和 ActiveRecord 以通过`ftype`.

tl; dr：在 Ruby 方面（在模型中的某处）AR 不喜欢你正在做的事情。

# c# - 将 DLL 拖放到程序集文件夹

> ID：10783818
> 
> 赞同：0
> 
> 时间：2012-05-28T11:19:23.587
> 
> 标签：c#, visual-studio-2010, gac, .net-assembly, gacutil

我的计算机上没有 gacutil 我必须安装这个程序集，所以它可以代替使用 gacutil 来完成吗？

如果是，有什么区别？

它是一个 .net 2.0 程序集

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:33:52.850

您可以将程序集拖放到资源管理器中的 \Windows\Assembly 文件夹中，程序集将自动部署在那里。此方法的结果与使用 gacutil 没有区别。

要在执行之前进行验证，必须已经安装了一个 shell 扩展与 .NET Framework 一起在您导航到该文件夹​​时显示该文件夹的不同视图，因此您实际上应该看到带有版本数据等的程序集，而不是标准列（详细看法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T11:35:20.417

如果您不想使用 gacutil，那么您应该创建自己的实用程序并使用[Publish.GacInstall Method](http://msdn.microsoft.com/en-us/library/system.enterpriseservices.internal.publish.gacinstall.aspx)安装程序集。

```
public void GacInstall(string AssemblyPath) 
```

拖放 dll ...如果 gacutil 不存在，它可能无法工作，因为特殊的 Windows Explorer 插件调用 gacutil 将您的程序集安装到 GAC 中。有关详细信息，请查看[GAC - 要将程序集添加到 GAC，拖放可以工作，但复制和粘贴不行？为什么？](https://stackoverflow.com/questions/5110345/gac-to-add-an-assembly-to-the-gac-drag-and-drop-works-but-copy-and-paste-doe)

# arrays - 在Perl中读取文件并存储在数组中？

> ID：10783822
> 
> 赞同：1
> 
> 时间：2012-05-28T11:19:50.767
> 
> 标签：arrays, perl

我想读取一个文件并根据它有多少个链（M，N，O，..）来生成多个数组。

以下是文件的一部分：

```
SEQRES   1 M  312  ALA ALA ASP PRO LYS LEU LEU LYS ALA ALA ALA GLU ALA
SEQRES   2 M  312  SER TYR ALA PHE ALA LYS GLU VAL ASP TRP ASN ASN GLY
SEQRES   3 M  312  ILE PHE LEU GLN ALA PRO GLY LYS LEU GLN PRO LEU GLU
SEQRES   4 M  312  ALA LEU LYS ALA ILE ASP LYS MET ILE VAL MET GLY ALA
SEQRES   5 M  213  SER PHE ASN ARG ASN

SEQRES   1 N  312  ASP GLU ILE GLY ASP ALA ALA LYS LYS LEU GLY ASP ALA
SEQRES   2 N  312  SER TYR ALA PHE ALA LYS GLU VAL ASP TRP ASN ASN GLY
SEQRES   3 N  312  ILE PHE LEU GLN ALA PRO GLY LYS LEU GLN PRO LEU GLU
SEQRES   4 N  312  ALA LEU LYS ALA ILE ASP LYS MET ILE VAL MET GLY ALA
SEQRES   5 N  312  ALA ALA ASP PRO LYS LEU LEU LYS ALA ALA ALA GLU ALA
SEQRES   6 N  312  VAL THR SER ARG ALA ASP TRP ASP ASN VAL

SEQRES   1 O  312  HIS HIS LYS ALA ILE GLY SER ILE SER GLY PRO ASN GLY
SEQRES   2 O  312  SER TYR ALA PHE ALA LYS GLU VAL ASP TRP ASN ASN GLY
SEQRES   3 O  312  ILE PHE LEU GLN ALA PRO GLY LYS LEU GLN PRO LEU GLU
SEQRES   4 O  312  ALA LEU LYS ALA ILE ASP LYS MET ILE VAL 
```

这是我的代码：

```
my @seq;
my $string="";
my @seqFile;
my $file=<>;
open(FILE, "$file");
while (my $line=<FILE>){
    if ($line =~ /^SEQRES/) {
        chomp $line;
        push @seq, [split (/\s+/, $line)] ;
    }
}
close(FILE);
for my $i (0..$#seq) {
    my $ob =$seq[$i][2];
    if ($seq[$i][2] eq $ob ){
        for (my $j=4;$j<=$#{$seq[$i]};$j++) {
            my $temp= $seq[$i][$j];
            $string .= $temp;
        }
        $ob = $seq[$i][2];
        last;
    }
    push @seqFile, $ob;
    push @seqFile, $string;
    $string = ''; #string needs to be empty to store new lines
} 
```

使用上面的示例：3 个数组 M(:)ALAALAASP:.., N(:)ASPGLU.., O(:)HISHISLYS...

我设法在一个字符串中创建了所有 SEQRES，但这不是我想要的。

在某个地方我需要放置一个`if(){}`和来检查`M <=> N`并且`N <=> O`是不同的。然后保存字符串并开始一个字符串和数组。但它会不断累积与 $#seq 一样多的相同字符串。或者，如果我移动一个的位置，`}`那么它不会存储任何东西，或者给我错误消息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:44:03.403

你没看到这里有问题吗？

```
my $ob =$seq[$i][2];
if ($seq[$i][2] ne $ob ){ 
```

这类似于：

```
my $x = "this";
if ($x ne "this) { 
```

条件怎么可能`if`是真的？

更好的方法是使用数组的散列，以 M、N 或 O 为键（您将 $ob 设置为）：

```
open (my $fh, '<', $file);   # using global globs like FILE is depreciated
my %hash_of_arrays;
while (<$fh>) {
    my @data = split;
    push @{$hash_of_arrays{$data[2]}}, join('', (@data)[4..$#data]);
} 
```

很确定这与您正在尝试做的事情很接近；第二个参数`push`使用*数组 slice*。

请注意，如果`@{$hash{$data[2]}}`尚不存在，它将通过*autovivification*创建：[http ://en.wikipedia.org/wiki/Autovivification](http://en.wikipedia.org/wiki/Autovivification)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:50:08.363

我认为这个程序可以满足您的需求。

我没有观察第三个字段值的变化，而是将其编写为空行或文件末尾标记链的末尾。

```
use strict;
use warnings;

my $file = 'seq.txt';

open my $fh, '<', $file or die $!;

my @seqFile;
my $string;
my $ob;

while (<$fh>) {
  if (/^SEQRES/) {           
    my @data = split;
    $string .= join '', @data[4..$#data];
    $ob = $data[2];
  }
  if (eof($fh) or not /\S/) {
    push @seqFile, $ob, $string;
    $ob = $string = undef;
  }
}

use Data::Dumper;
print Dumper \@seqFile; 
```

**输出**

```
$VAR1 = [
          'M',
          'ALAALAASPPROLYSLEULEULYSALAALAALAGLUALASERTYRALAPHEALALYSGLUVALASPTRPASNASNGLYILEPHELEUGLNALAPROGLYLYSLEUGLNPROLEUGLUALALEULYSALAILEASPLYSMETILEVALMETGLYALASERPHEASNARGASN',
          'N',
          'ASPGLUILEGLYASPALAALALYSLYSLEUGLYASPALASERTYRALAPHEALALYSGLUVALASPTRPASNASNGLYILEPHELEUGLNALAPROGLYLYSLEUGLNPROLEUGLUALALEULYSALAILEASPLYSMETILEVALMETGLYALAALAALAASPPROLYSLEULEULYSALAALAALAGLUALAVALTHRSERARGALAASPTRPASPASNVAL',
          'O',
          'HISHISLYSALAILEGLYSERILESERGLYPROASNGLYSERTYRALAPHEALALYSGLUVALASPTRPASNASNGLYILEPHELEUGLNALAPROGLYLYSLEUGLNPROLEUGLUALALEULYSALAILEASPLYSMETILEVAL'
        ]; 
```

* * *

**编辑**

既然我知道数据文件没有空行来描绘链，我原来的解决方案就行不通了。

此替代方法检查记录的第二个字段中的序列号，并在该编号为 1 时启动一个新链。每当新链开始时以及读取循环退出后文件末尾也必须保存累积的链.

该程序的输出与上面显示的相同。

```
use strict;
use warnings;

my $file = 'seq.txt';

open my $fh, '<', $file or die $!;

my @seqFile;
my $chain;
my $ob;

while (<$fh>) {

  next unless /^SEQRES/;

  my @data = split;
  if ($data[1] == 1) {
    push @seqFile, $ob, $chain if $chain;
    $ob = $chain = undef;
  }
  $chain .= join '', @data[4..$#data];
  $ob = $data[2];
}

push @seqFile, $ob, $chain if $chain;

use Data::Dumper;
print Dumper \@seqFile; 
```

# javascript - Javascript中的继承，我在这里做错了什么？

> ID：10783835
> 
> 赞同：0
> 
> 时间：2012-05-28T11:21:07.190
> 
> 标签：javascript, dynamic-languages

嗨，我对 javascript 很陌生。我的任务是创建一个 javascript 框架来加载多个电子学习模块并让它们通过 xml 相互交互。

我正在使用如下所示的继承方法。

基类 EventDispatcher：

```
(function (window) {
    var EventDispatcher = function () {
            this._listeners = [];
        }
    var p = EventDispatcher.prototype;
    p._listeners = [];
    p.addListener = function (type, listener, scope) {
        scope = (typeof scope !== "undefined") ? scope : this;
        if (typeof this._listeners[type] == "undefined") {
            this._listeners[type] = [];
        }
        this._listeners[type].push({
            listener: listener,
            scope: scope
        });
    }
    p.removeListener = function (type, listener) {
        if (this._listeners[type] instanceof Array) {
            var listeners = this._listeners[type];
            for (var i = 0, len = listeners.length; i < len; i++) {
                if (listeners[i].listener === listener) {
                    listeners.splice(i, 1);
                    break;
                }
            }
        }
    }
    p.dispatchEvent = function (event) {
        if (typeof event == "string") {
            event = {
                type: event
            };
        }
        if (!event.target) {
            event.target = this;
        }
        if (!event.type) {
            throw new Error("Event object missing 'type' property.");
        }
        if (this._listeners[event.type] instanceof Array) {
            var listeners = this._listeners[event.type];
            for (var i = 0, len = listeners.length; i < len; i++) {
                listeners[i].listener.call(listeners[i].scope, event);
            }
        }
    }
    window.EventDispatcher = EventDispatcher;
}(window)); 
```

继承 EventDispatcher 的 Sub XMLLoader 类：

```
(function (window) {
    var XMLLoader = function () {}
    var p = XMLLoader.prototype = new EventDispatcher();
    p.xmlhttp = null;
    p.loadXML = function (url) {
        if (this.xmlhttp == null) {
            this.initXMLHttpRequest();
        }
        this.xmlhttp.open("GET", url, true);
        this.xmlhttp.send();
    }
    p.initXMLHttpRequest = function () {
        var currObj = this;
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            this.xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            this.xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        this.xmlhttp.onreadystatechange = function () {
            var xmlLoaderEvent = null;
            if (currObj.xmlhttp.readyState == 4 && currObj.xmlhttp.status == 200) {
                xmlLoaderEvent = new XMLLoaderEvents();
                xmlLoaderEvent.type = XMLLoaderEvents.XML_DOC_SUCCESS;
                xmlLoaderEvent.data = {
                    xmlDoc: currObj.xmlhttp.responseXML,
                    xmlString: currObj.xmlhttp.responseText
                };
            } else if (currObj.xmlhttp.status == 404) {
                xmlLoaderEvent = new XMLLoaderEvents();
                xmlLoaderEvent.type = XMLLoaderEvents.XML_DOC_ERROR;
            }
            if (xmlLoaderEvent != null) {
                currObj.dispatchEvent(xmlLoaderEvent);
            }
        };
    }
    /*p.onReadyStateChange = function()
    {
        var xmlLoaderEvent = null;
        if(this.xmlhttp.readyState == 4 && this.xmlhttp.status == 200)
        {
            xmlLoaderEvent = new XMLLoaderEvents();
            xmlLoaderEvent.type = XMLLoaderEvents.XML_DOC_SUCCESS;
            xmlLoaderEvent.data = this.xmlhttp.responseXML;
        }
        else if(this.xmlhttp.status == 404)
        {
            xmlLoaderEvent = new XMLLoaderEvents();
            xmlLoaderEvent.type = XMLLoaderEvents.XML_DOC_ERROR;
        }

        if (xmlLoaderEvent != null)
        {
            this.dispatchEvent(xmlLoaderEvent);
        }
    }*/
    window.XMLLoader = XMLLoader;
}(window)); 
```

现在我在另一个类中多次调用 xmlLoader。在每次我使用`new XMLLoader();`. 我的理解是这应该创建一个新实例并且`this._listeners`在基类中应该是`[]`空的。但这并没有发生。请帮助我并告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:47:48.320

在 javascript 中模拟时，类继承不能像往常一样工作。例如，没有隐式的超类构造函数调用。

您不会在“子类构造函数”中调用“母类”构造函数。这就是未初始化“母类”字段的原因。

代替

```
var XMLLoader = function () {} 
```

你应该写的是

```
var XMLLoader = function () {
    EventDispatcher.apply(this, arguments); /* this is a common way to execute
       the code of the "mother class" "constructor" with the same "this" */
} 
```

# yii - Yii , 隐藏的下拉菜单

> ID：10783839
> 
> 赞同：-1
> 
> 时间：2012-05-28T11:21:14.310
> 
> 标签：yii

我正在尝试制作一个下拉列表，但我现在不希望我可见，这是代码。

```
<div class="row">
    <?php echo $form->labelEx($model,'lang_id'); ?>
    <?php echo $form->dropdownlist($model,'lang_id',CHtml::listData(Lang::model()->findAll(), 'id', 'name')); ?>
    <?php echo $form->error($model,'lang_id'); ?>
</div> 
```

我怎么做这个`type = 'hidden'`或类似的东西？

换句话说，我想保留该字段，但我不想显示它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T11:24:28.000

尝试这个..

```
<div class='row' style='display:none'> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T13:56:13.733

此外，您可以定义下拉列表的样式属性。

```
public static string dropDownList(string $name, string $select, array $data, array $htmlOptions=array ( )) 
```

您可以尝试：

```
<div class="row">
    <?php echo $form->labelEx($model,'lang_id'); ?>
    <?php echo $form->dropDownList($model,'lang_id',CHtml::listData(Lang::model()->findAll(), 'id', 'name'), array('style' => 'display: none'); ?>
    <?php echo $form->error($model,'lang_id'); ?>
</div> 
```

# php - POSTDATA 未使用 javascript submit() 函数传递

> ID：10783847
> 
> 赞同：1
> 
> 时间：2012-05-28T11:21:46.670
> 
> 标签：php, javascript, forms, post

我正在尝试编写一个将更新隐藏字段值然后提交的表单，之后这些值将输入到 mysql 数据库中。但是，虽然表单似乎确实提交了，但 $_POST 数组似乎是空的，并且每当我尝试访问任何 $_POST 元素时都会出现“未识别索引”错误？

相关代码如下：

```
<?php
if(isset($_GET['a'])){
$title = $_POST['left'];
$sql = "UPDATE boxes SET topx = '".$_POST['left']."', topy = '".$_POST['top']."', width = '".$_POST['width']."', height = '".$_POST['height']."' WHERE id = '2'";
    // this is where I get "unidentified index" errors
mysql_query($sql);
}
else {
$title = "test";
}
?> 
```

填充隐藏字段并提交表单的 JS 函数：

```
<script type = "text/javascript">
function dosmt(form){
JStopx = dd.elements.field2.x; alert(JStopx);
JStopy = dd.elements.field2.y; alert(JStopy);
JSwidth = dd.elements.field2.w; alert(JSwidth);
JSheight = dd.elements.field2.h; alert(JSheight);
alert("test2");

alert(document.getElementById('top').value);
document.getElementById('top').value = JStopy; alert("test1");
document.getElementById('left').value = JStopx;
document.getElementById('width').value = JSwidth;
document.getElementById('height').value = JSheight;
alert("waah");
location = "http://127.0.0.1/experiment/index.php?a=true";
alert ("OK"); 
document.getElementById('testform').submit();
}
</script> 
```

和形式：

```
<form name = 'testform' method = "post" id = 'testform' action = "index.php">
<input type = "hidden" name = 'top' id = 'top' value = ''/>
<input type = "hidden" name = 'left' id = 'left' value = ''/>
<input type = "hidden" name = 'width' id = 'width' value = ''/>
<input type = "hidden" name = 'height' id = 'height' value = ''/>
<input type = "hidden" name = 'placeholder' id = 'placeholder' value = 'blah'/>
<input type = "button" name = 'update' id = 'update' value = "Update" onClick = 'dosmt(this.form)'>
</form> 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:04:31.590

你不应该`location`在 JavaScript 中使用；如果你做类似的事情

```
location='http://example.com' 
```

您实际上是将页面重定向到 example.com。

您应该删除该行

```
location = "http://127.0.0.1/experiment/index.php?a=true"; 
```

并将其更改为：

```
document.getElementById('testform').action="http://127.0.0.1/experiment/index.php?a=true"; 
```

*   [阅读有关`location`变量的更多信息](https://developer.mozilla.org/en/DOM/window.location3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:41:37.840

当您提交表单时，您会去`index.php`，而不是`index.php?a=true`- 尝试做

```
location = "http://127.0.0.1/experiment/index.php?a=true";
document.getElementById('testform').action = location; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:31:08.220

代替

```
<input type = "button" name = 'update' id = 'update' value = "Update" onClick = 'dosmt(this.form)'> 
```

和

```
<input type = "button" name = 'update' id = 'update' value = "Update" onClick = 'dosmt(document.testform)'> 
```

# c# - 组合或连接从单独的 XML 文件读取的对象的最有效方法

> ID：10783853
> 
> 赞同：1
> 
> 时间：2012-05-28T11:22:03.433
> 
> 标签：c#, xml, linq, xml-serialization, xml-parsing

我每天早上都会收到大量以单独的 XML 文件形式接收的数据。我需要组合 XML 中的对象并从中生成报告。我正在寻找解决此问题的最佳解决方案。

为了证明我已经编造了以下示例：

有 2 个 XML 文件：

第一个是语言列表和使用它们的国家/地区。第二个是产品列表及其销售国家/地区。我生成的报告是产品名称，后跟包装必须使用的语言。

XML1：

```
<?xml version="1.0" encoding="utf-8"?>
<languages>
  <language>
    <name>English</name>
    <country>8</country>
    <country>9</country>
    <country>3</country>
    <country>11</country>
    <country>12</country>
  </language>
  <language>
    <name>French</name>
    <country>3</country>
    <country>6</country>
    <country>7</country>
    <country>13</country>
  </language>
  <language>
    <name>Spanish</name>
    <country>1</country>
    <country>2</country>
    <country>3</country>
  </language>
</languages> 
```

XML2：

```
<?xml version="1.0" encoding="utf-8"?>
<products>
  <product>
    <name>Screws</name>
    <country>3</country>
    <country>12</country>
    <country>29</country>
  </product>
  <product>
    <name>Hammers</name>
    <country>1</country>
    <country>13</country>
  </product>
  <product>
    <name>Ladders</name>
    <country>12</country>
    <country>39</country>
    <country>56</country>
  </product>
  <product>
    <name>Wrenches</name>
    <country>8</country>
    <country>13</country>
    <country>456</country>
  </product>
  <product>
    <name>Levels</name>
    <country>19</country>
    <country>18</country>
    <country>17</country>
  </product>
</products> 
```

示例程序输出：

```
 Screws ->  English, French, Spanish
 Wrenches ->  English, French
 Hammer - > French, Spanish
 Ladders-> English 
```

目前我反序列化为一个数据集，然后使用 linq 跨数据集连接以生成所需的报告字符串。（如下所示 - 将文件的名称作为命令行参数传递）。

```
public static List<String> XMLCombine(String[] args)
{
    var output = new List<String>();
    var dataSets = new List<DataSet>();
    //Load each of the Documents specified in the args
    foreach (var s in args)
    {
        var path = Environment.CurrentDirectory + "\\" + s;
        var tempDS = new DataSet();
        try
        {
            tempDS.ReadXml(path);
        }
        catch (Exception ex)
        {
            //Custom Logging + Error Reporting
            return null;
        }
        dataSets.Add(tempDS);
    }
    //determine order of files submitted
    var productIndex = dataSets[0].DataSetName == "products" ? 0:1;
    var languageIndex = dataSets[0].DataSetName == "products" ? 1:0;
    var joined = from tProducts in dataSets[productIndex].Tables["product"].AsEnumerable()
                 join tProductCountries in dataSets[productIndex].Tables["country"].AsEnumerable() on (int)tProducts["product_id"] equals (int)tProductCountries["product_id"]
                 join tLanguageCountries in dataSets[languageIndex].Tables["country"].AsEnumerable() on (String)tProductCountries["country_text"] equals (String)tLanguageCountries["country_text"]
                 join tLanguages in dataSets[languageIndex].Tables["language"].AsEnumerable() on (int)tLanguageCountries["language_Id"] equals (int)tLanguages["language_Id"]
                  select new
                  {
                      Language = tLanguages["name"].ToString(),
                      Product = tProducts["name"].ToString()
                  };

    var listOfProducts = joined.OrderByDescending(_ => _.Product).Select(_ => _.Product).Distinct().ToList();

    foreach (var e in listOfProducts)
    {
        var e1 = e;
        var languages = joined.Where(_ => _.Product == e1).Select(_ => _.Language).Distinct().ToList();
        languages.Sort();
        //Custom simple Array to text method
        output.Add(String.Format("{0} {1}", e, ArrayToText(languages)));
    }
    return output;
} 
```

这很好用，但我知道必须有更优化的解决方案来解决这个问题（特别是当 XML 文件在现实生活中很大时）。有没有人有替代方法（除了 linq）的经验或关于优化当前方法的建议，这将使我更接近最佳解决方案？

提前谢谢了。

**解决方案** 建议解决方案的实施：Casperah 使用字典的方法在 312 毫秒内处理数据集。yamen 的方法使用 Linq Lookup 在 452ms 内处理数据集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:55:51.203

你有两个问题，内存使用和CPU使用。

要限制内存使用，您可以使用 XmlReader，它只读取一小部分巨大的 xml 文件。要限制 CPU 使用率，您应该有一个国家代码索引。

我会这样做： 1\. 读取所有语言并将其插入到字典中，如下所示： // 键是国家，值是语言列表。词典>国家=新词典>（）；2\. 使用 XmlReader 一次读取一个产品 3\. 查找国家并写出语言可能使用 HashSet 以避免重复的语言。

那将是我的方法-祝你好运

我创建了这个例子：

```
 Dictionary<int, List<string>> countries = new Dictionary<int, List<string>>();

        XmlReader xml = XmlReader.Create("file://D:/Development/Test/StackOverflowQuestion/StackOverflowQuestion/Countries.xml");
        string language = null;
        string elementName = null;
        while (xml.Read())
        {
            switch (xml.NodeType)
            {
                case XmlNodeType.Element:
                    elementName = xml.Name;
                    break;

                case XmlNodeType.Text:
                    if (elementName == "name") language = xml.Value;
                    if (elementName == "country")
                    {
                        int country;
                        if (int.TryParse(xml.Value, out country))
                        {
                            List<string> languages;
                            if (!countries.TryGetValue(country, out languages))
                            {
                                languages = new List<string>();
                                countries.Add(country, languages);
                            }
                            languages.Add(language);
                        }
                    }
                    break;
            }
        }
        using (StreamWriter result = new StreamWriter(@"D:\Development\Test\StackOverflowQuestion\StackOverflowQuestion\Output.txt"))
        {
            xml = XmlReader.Create("file://D:/Development/Test/StackOverflowQuestion/StackOverflowQuestion/Products.xml");
            string product = null;
            elementName = null;
            HashSet<string> languages = new HashSet<string>();
            while (xml.Read())
            {
                switch (xml.NodeType)
                {
                    case XmlNodeType.Element:
                        elementName = xml.Name;
                        break;

                    case XmlNodeType.Text:
                        if (elementName == "name")
                        {
                            if (product != null && languages != null)
                            {
                                result.Write(product);
                                result.Write(" -> ");
                                result.WriteLine(string.Join(", ", languages.ToArray()));
                                languages.Clear();
                            }
                            product = xml.Value;
                        }
                        if (elementName == "country")
                        {
                            int country;
                            if (int.TryParse(xml.Value, out country))
                            {
                                List<string> countryLanguages;
                                if (countries.TryGetValue(country, out countryLanguages))
                                    foreach (string countryLanguage in countryLanguages) languages.Add(countryLanguage);
                            }
                        }
                        break;
                }
            }
        }
    } 
```

它产生了这个例子：

```
Screws -> English, French, Spanish
Hammers -> Spanish, French
Ladders -> English
Wrenches -> English, French 
```

XmlReader.Create 需要一个 uri，您也可以使用类似：“http://www.mysite.com/countries.xml”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:42:36.697

好的，这仍然是 LINQ to XML，但我认为就算法而言它非常有效。唯一的问题是您的 XML 是否非常大（即大于 RAM 可以容纳的容量）。否则，它不会比这更快。

假设`languageFile`并`productFile`包含相关的 XML 文件。

将语言转换为查找：

```
var languages = (from language in XElement.Load(languageFile).Descendants("language")
                from country in language.Elements("country")
                select new {Language = language.Element("name").Value, Country = country.Value})
                .ToLookup(l => l.Country, l => l.Language); 
```

然后通过语言查找获取产品：

```
var products = from product in XElement.Load(productFile).Descendants("product")
               select new {Product = product.Element("name").Value, 
                           Languages = product.Elements("country").SelectMany(e => languages[e.Value]).Distinct().ToList()}; 
```

当然你也可以打印出来：

```
foreach (var product in products.Where(x => x.Languages.Count > 0))
{
    Console.WriteLine("{0} -> {1}", product.Product, String.Join(", ", product.Languages));
} 
```

返回：

```
Screws -> English, French, Spanish
Hammers -> Spanish, French
Ladders -> English
Wrenches -> English, French 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T11:49:03.063

在您的情况下，我会将语言文件中的数据存储到字典或类似的东西中，然后我会解析每个产品文件并即时生成最终的组合结果。我想这种方法会更快，并且可以避免大量数据出现的内存问题。

# java - java简单的正则表达式

> ID：10783854
> 
> 赞同：1
> 
> 时间：2012-05-28T11:22:05.923
> 
> 标签：java, regex

我有像“ `xxxxx?434334`”，“ `xxx?411112`”，“ `xxxxxxxxx?11113`”等字符串。

如何`substring`正确检索“ `xxxxx`”（直到 ' `?`' 字符出现的所有内容）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T11:25:01.450

```
return s.substring(0, s.indexOf('?')); 
```

不需要正则表达式。

*如果您有问题，请使用正则表达式。现在你有两个问题。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T11:22:56.737

```
str = str.replaceAll("[?].*", ""); 
```

换句话说，“删除问号字符之后的所有内容，包括问号字符”。必须用`?`方括号括起来，否则它具有特殊含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:25:27.090

我同意其他人的回答，即您应该尽可能避免使用正则表达式，但如果您确实想在这种情况下使用它，您可以使用以下内容

```
Pattern regex = Pattern.compile("([^\\?]*)\\?{1}");
Matcher m = regex.matcher(str);
if (m.find()) {
    result = m.group(1);
} 
```

其中 str 是您的输入字符串。

编辑：正则表达式的描述匹配任何不是“？”的字符组 并有一个“？” 团后

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T16:31:26.717

模式 ".*(?=\?)" 也应该可以工作。?= 是一个积极的前瞻，这意味着物质匹配引号之前的所有内容，但不匹配引号本身。

# excel - 如何在 MATLAB 的循环中重命名一组变量？

> ID：10783855
> 
> 赞同：0
> 
> 时间：2012-05-28T11:22:07.037
> 
> 标签：excel, matlab

我已将一个`X`充满数据的矩阵及其每列的相应标题导入 MATLAB。现在的问题是如何`X`在标题单元格中按相应名称重命名每一列。
我想循环执行此操作。
谁能告诉我在这种情况下如何循环重命名程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T18:45:59.207

I suggest creating a [structure](http://www.mathworks.com/help/techdoc/ref/struct.html) out of the data, rather than individual variables. Even with a large number of columns, this will not clutter the workspace, nor will it overwrite variables already in the workspace in the case of a name collision. It will keep all the data from the spreadsheet together, and still allowing access to it by column name. To easily create a structure from a cell array of column names and a matrix of data, use [cell2struct](http://www.mathworks.com/help/techdoc/ref/cell2struct.html):

```
>> colnames = {'odds','evens'};
>> data = [1 2;3 4;5 6];
>> spreadsheet_structure = cell2struct(num2cell(data,1), colnames, 2)

spreadsheet_structure = 

     odds: [3x1 double]
    evens: [3x1 double] 
```

(`num2cell(M,1)` creates a cell array in which each cell is a column from matrix `M`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:40:18.150

遍历标题列并使用 eval 创建变量，其名称包含在矩阵“标题”中的字符串中：

```
 [X,header,~] = xlsread('eaef21.xls',1,'A1:AY541');
  for H = 1:size(header,2)
     eval([header(1,H), " = X(:,", H, ");"]);
  end 
```

`eval`此外，将上述内容替换为通常非常有用，`disp`直到您对它按您想要的方式工作感到满意为止。使用`disp`也将帮助您了解正在发生的事情。

# javascript - 使用 Javascript 将元素包裹在 div 中

> ID：10783858
> 
> 赞同：0
> 
> 时间：2012-05-28T11:22:25.413
> 
> 标签：javascript, dom-events, javascript-framework

我对窗口调整大小时的 div 对齐问题感到非常恼火。我想将元素包装在 div 中，这样它们就不会在窗口调整大小后脱离它们的确切位置。有没有办法可以`<div>`使用 Javascript 将元素包装在父元素中。`resize()`还建议使用javascript（如处理和`zoom()`事件）来克服这个问题的任何最佳方法。如果不建议使用 Jquery 可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:33:10.777

HTML：

```
<div id ="top-left"></div>
<div id ="top-right"></div>
<div id ="bottom-left"></div>
<div id ="bottom-right"></div> 
```

CSS：

```
div{
    width:50px;
    height:50px;
    background-color:red;
    position:absolute;
}
#top-left{
    top:0;
    left:0;
}
#top-right{
    top:0;
    right:0;
}
#bottom-left{
    bottom:0;
    left:0;
}
#bottom-right{
    bottom:0;
    right:0;
}
div#container{
    position:relative;
    border: 2px solid blue;
    width:300px;
    height:300px;
    background:green;
} 
```

​jQuery：

```
$(document).ready( function(){
    $('body').append('<div id="container"></div>');
    $('body div').not('#container').each(function() {
        var html = $(this);
        $('#container').append(html);        
    });
});​ 
```

演示：http: [//jsfiddle.net/x8Wnw/](http://jsfiddle.net/x8Wnw/)

# django - django 1.4 timezone.now() 与 datetime.datetime.now()

> ID：10783864
> 
> 赞同：65
> 
> 时间：2012-05-28T11:22:51.667
> 
> 标签：django, timezone

我对夏令时处理有点困惑

设置.py：

```
TIME_ZONE = 'Europe/London'
USE_TZ = True 
```

在 Django 外壳中：

```
>>> from django.utils import timezone
>>> import datetime
>>> print timezone.now()
2012-05-28 11:19:42.897000+00:00
>>> print timezone.make_aware(datetime.datetime.now(),timezone.get_default_timez
one())
2012-05-28 12:20:03.224000+01:00 
```

为什么它们在夏令时方面不一样？两者都应该知道语言环境，不是吗？

我已经阅读了文档，但并不明智。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-05-28T12:11:53.737

根据`timezone.now()` [消息来源](https://docs.djangoproject.com/en/stable/_modules/django/utils/timezone/#now)：

```
def now():
    """
    Returns an aware or naive datetime.datetime, depending on settings.USE_TZ.
    """
    if settings.USE_TZ:
        # timeit shows that datetime.now(tz=utc) is 24% slower
        return datetime.utcnow().replace(tzinfo=utc)
    else:
        return datetime.now() 
```

它基于`utc`而不是您的默认时区。您可以通过使用获得相同的价值

```
now = timezone.make_aware(datetime.datetime.now(),timezone.get_default_timezone())
print now.astimezone(timezone.utc) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-03-20T21:13:50.863

从 Django 1.11 开始，您可以简单地调用[`django.utils.timezone.localtime`](https://docs.djangoproject.com/en/2.0/ref/utils/#django.utils.timezone.localtime)来获取`datetime`您的默认时区。

```
>>> from django.utils import timezone
>>> timezone.localtime() 
```

来自文档：

> 将感知日期时间转换为不同的时区，默认为当前时区。
> 
> 省略 value 时，默认为[`now()`](https://docs.djangoproject.com/en/2.0/ref/utils/#django.utils.timezone.now).
> 
> 此功能不适用于幼稚的日期时间；改为使用[`make_aware()`](https://docs.djangoproject.com/en/2.0/ref/utils/#django.utils.timezone.make_aware)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-12T03:09:41.570

您可以将参数传递给`datetime.datetime.now()`：

```
import pytz, datetime
utc = pytz.utc
utc_now = datetime.datetime.now(tz=utc) 
```

或者使用`timezone`, a la:

```
from django.utils import timezone

now = timezone.now() 
```

[https://docs.djangoproject.com/en/2.1/topics/i18n/timezones/](https://docs.djangoproject.com/en/2.1/topics/i18n/timezones/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-10T10:33:55.403

```
from datetime import datetime
from django.utils import timezone

def now():
    try:
        return timezone.localtime(timezone.now()).strftime('%Y-%m-%dT%H:%M:%S')

    except Exception as exp:
        print('TimeZone is not set - {}'.format(exp))
        return datetime.now().strftime('%Y-%m-%dT%H:%M:%S') 
```

如果您在 Django 设置中进行设置，您将放置在该`TIME_ZONE = 'Europe/London'`部分中，否则，将放置在该部分中。`USE_TZ = True``try``except`

* * *

[**注意**]：

*   `.strftime()`是一个选项

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-09-06T18:42:30.293

```
from datetime import datetime
from pytz import timezone

# one can get any time for respective timezone
current_time = datetime.now(timezone('Asia/Kolkata'))
print("time in india :", current_time) 
```

# c# - AssetUrlSelector 工具部分

> ID：10783867
> 
> 赞同：2
> 
> 时间：2012-05-28T11:23:04.913
> 
> 标签：c#, sharepoint-2010, web-parts

我需要做的很简单，虽然给我带来了很多麻烦。

我需要在 web 部件中以编程方式创建 AssetUrlSelector，该部件选择 sharepoint 2010 中的文件并使其路径可用于其他地方。

到目前为止，我已经设法创建 AssetUrlSelector 并在文本框中显示路径，但是我不能使用它，因为对它的每个引用都将为空。

你有任何实际的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:59:53.203

尝试文档 ID 服务。简而言之，该服务为文档（文件）生成 ID 并使用此 ID 生成一个 url，因此即使文件被移动，该 url 仍然有效并且服务返回文档。除非您实施自定义搜索，否则此服务可能依赖于搜索功能。这是一篇关于如何在[此处](http://office.microsoft.com/en-us/sharepoint-online-enterprise-help/enable-and-configure-unique-document-ids-HA101790471.aspx)配置 OOB Doc ID 的文章。如果你有兴趣，你也可以进一步谷歌。

# java - 调试模式超时 Tomcat

> ID：10783870
> 
> 赞同：21
> 
> 时间：2012-05-28T11:23:08.317
> 
> 标签：java, eclipse, tomcat, tomcat7

我尝试在调试模式下启动我的 Tomcat，但它会引发以下错误：

> 本地主机上的服务器 Tomcat v7.0 服务器无法在 45 秒内启动。如果服务器需要更多时间，请尝试在服务器编辑器中增加超时

我什至尝试更新超时时间，但它仍然超时。但是，当我尝试启动 tomcat（在非调试模式下）时，它会正常启动。知道什么可能导致问题吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-04T08:58:32.543

想通了原因。如果我们有太多的断点，调试模式会奇怪地花费太多时间来启动。禁用所有断点并以调试模式启动，启动时根据需要启用断点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:30:23.040

是不是在等你连接？

文档说要输入：

-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n

但是如果你输入suspend=y，它会永远等待最终超时。

# ruby-on-rails - cucumber working fine without spork, but spork giving me "uninitialized constant Cucumber::Rails"

> ID：10783871
> 
> 赞同：6
> 
> 时间：2012-05-28T11:23:15.883
> 
> 标签：ruby-on-rails, cucumber, spork

I've got existing rspecs and cucumber features all running fine.

I'm installing spork (spork-rails in fact) to give me some re-run speed up.

I've got rspec running fine with spork.

I've just modified the env.rb as per instructions (very similar to the mods to spec_helper.rb), but I get `uninitialized constant Cucumber::Rails` when I try to run `bundle exec cucubmer --drb`.

*Rails 3.2 by the way*

Any ideas?

Here's my env.rb:

```
require 'rubygems'
require 'spork'
#uncomment the following line to use spork with the debugger
require 'spork/ext/ruby-debug'

if Spork.using_spork?
  Spork.prefork do

    require 'rails'
    require 'cucumber/rails'

    Capybara.default_selector = :css

    begin
      DatabaseCleaner.strategy = :transaction
    rescue NameError
      raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
    end    

  end

  Spork.each_run do
    # This code will be run each time you run your specs.
    require 'cucumber/rails'
    Cucumber::Rails::Database.javascript_strategy = :truncation

    ActionController::Base.allow_rescue = false

    module NavigationHelpers
      def path_to(page_name)
        case page_name

        when /the home page/
          root_path
        # Add more page name => path mappings here
        else
          if path = match_rails_path_for(page_name)
            path
          else
            raise "Can't find mapping from \"#{page_name}\" to a path.\n" +
            "Now, go and add a mapping in features/support/paths.rb"
          end
        end
      end

      def match_rails_path_for(page_name)
        if page_name.match(/the (.*) page/)
          return send "#{$1.gsub(" ", "_")}_path" rescue nil
        end
      end
    end

    World(NavigationHelpers)  
  end
else

  #omitted
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:59:11.220

For future reference noting down what I did to fix this. In the end I think it was an odd symptom of having referenced cucumber-rails slightly wrongly in the Gemfile.

I was getting errors as well saying:

```
WARNING: Cucumber-rails required outside of env.rb. 
The rest of loading is being defered until env.rb is called. 
To avoid this warning, move 'gem cucumber-rails' under only
group :test in your Gemfile 
```

Following the instructions in [https://github.com/cucumber/cucumber/issues/249](https://github.com/cucumber/cucumber/issues/249), I fixed this by adding require: false to my Gemfile as follows:

```
group :test do
  gem 'cucumber-rails', require:false
  #....
end 
```

# c++ - 构造函数可以在 C++ 中调用另一个类的构造函数吗？

> ID：10783872
> 
> 赞同：5
> 
> 时间：2012-05-28T11:23:19.797
> 
> 标签：c++, constructor

```
class A {
public:
    A(int v) {
        _val = v;
    }

private:
    int _val;
};

class B {
public:
    B(int v) {
        a = A(v); // i think this is the key point
    }

private:
    A a;
};

int main() {
    B b(10);

    return 0;
} 
```

编译器说：

```
test.cpp: In constructor ‘B::B(int)’:
test.cpp:15: error: no matching function for call to ‘A::A()’
test.cpp:5: note: candidates are: A::A(int)
test.cpp:3: note:                 A::A(const A&) 
```

我学过Java，但我不知道如何用C++处理这个问题。搜索了几天，请告诉我C++可以做到这一点吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-28T11:24:37.113

您需要使用**[成员初始化列表](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor/8523361#8523361)**

```
B(int v):a(v)
{
} 
```

和：

```
B(int v) 
{
        a = A(v); // i think this is the key point
} 
```

`a`正在被***分配***一个值并且没有被**初始化**（*这是你想要*的），一旦构造函数的主体开始`{`，它的所有成员都已经被构造了。

**为什么会出现错误？**
编译器`a`在构造函数体`{`开始之前构造，编译器使用无参数构造函数，`A`因为你没有告诉它^(注 1)，由于默认的无参数构造函数不可用，因此错误。

**为什么没有隐式生成默认的无参数构造函数？**
一旦您为您的类提供了***任何***构造函数，就不会再生成隐式生成的无参数构造函数。您为构造函数提供了重载，`A`因此没有隐式生成无参数构造函数。

^(注意 1)
使用成员初始化器列表是告诉编译器使用构造函数的特定重载版本而不是默认的无参数构造函数的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-28T11:24:53.023

您必须使用初始化列表：

```
class B {
public:
    B(int v) : a(v) { // here

    }

private:
    A a;
}; 
```

否则编译器将尝试`A`使用默认构造函数构造一个。由于您不提供，因此您会收到错误消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T11:24:00.183

是的，它可以，但你没有提供一个默认的构造函数`A`（一个不带参数或所有参数都有默认值的），所以你只能在**初始化列表**中初始化它：

```
B(int v) : a(v) 
{
} 
```

这是因为在构造函数主体进入之前，`a`将使用默认构造函数（不可用）来构造（或尝试构造）。

# php - PHP 脚本中的错误不会传递回 CRON

> ID：10783873
> 
> 赞同：2
> 
> 时间：2012-05-28T11:23:25.710
> 
> 标签：php, bash, error-handling, cron

我有一些 PHP 脚本为我做一些工作并打印一些日志信息。这是调用的结构：

crontab

```
*/3 *  *   *   *     sleep 180 && cd /var/www/tasks && ./wrapper.sh start "/usr/bin/php stat-import.php" stat-import >> stat-import.log 
```

包装器.sh

```
#!/bin/bash

function start
{
    WRAP_CMD="$1"
    WRAP_DESC="$2"
    ARGS=($WRAP_CMD)
    if [[ ( $WRAP_DESC ) && ( -n $WRAP_DESC ) ]]
    then
        OUT_DESC="$WRAP_DESC"
    else
        OUT_DESC="$WRAP_CMD"
    fi
    PID=`ps axw -o pid,command | grep "$WRAP_CMD" | grep -v grep | grep -v "$0" | awk '{print $1}' | awk '{print $1}'`
    if [[ ( $PID ) && ( -n $PID ) ]]
    then
        echo `date +'%Y-%m-%d %H:%M:%S'`" INFO - $OUT_DESC already running"
    else
        echo `date +'%Y-%m-%d %H:%M:%S'`" INFO - $OUT_DESC started"
        $WRAP_CMD
        ECODE=$?
        echo `date +'%Y-%m-%d %H:%M:%S'`" INFO - $OUT_DESC finished"
        exit $ECODE
    fi
}

function stop
{
    [...]
}

function main
{
    if [[ ( $# < 2 ) || ( $# > 3 ) ]]
    then
        echo "Usage: $0 [start|stop] COMMAND [DESCRIPTION]"
        exit 0
    fi
    if [ $1 == "start" ]
    then
        start "$2" "$3"
    elif [ $1 == "stop" ]
    then
        stop "$2" "$3"
    else
        echo "Usage: $0 [start|stop] COMMAND [DESCRIPTION]"
    fi
    exit 0
}

# Script execution:
main "$@" 
```

stat-import.php

```
<?php
    die("error message");
    // OR
    exit(127);
    // OR
    trigger_error("error_message", E_USER_ERROR); 
```

默认情况下，只有`wrapper.sh`我的 PHP 脚本中的语法错误会导致 CRON 发送邮件。我的用户定义错误`stat-import.php`没有传递给 CRON 而是进入日志文件？嗯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:32:19.323

默认情况下，PHP 错误会打印到`stdout`，您的 cron 会将其重定向到日志文件。您需要将错误打印到`stderr`，以便它们将由 cron 守护程序邮寄：[PHP 文档中的 display_errors 设置](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T18:30:02.560

您的 crontab 条目需要将 stderr 重定向到您的日志文件中（请注意`2&>1`行尾的 ）。IE

```
*/3 *  *   *   *     sleep 180 && cd /var/www/tasks && ./wrapper.sh start "/usr/bin/php stat-import.php" stat-import >> stat-import.log 2>&1 
```

我希望这有帮助。

# android - 如何检查imageview上的两个图像是否相互重叠

> ID：10783874
> 
> 赞同：0
> 
> 时间：2012-05-28T11:23:28.873
> 
> 标签：android, image, imageview, translation, image-scaling

我正在创建一个应用程序。我将两个图像重叠在一起。我的图像比屏幕大，所以 imageView 正在调整它。我想知道图像是否相互重叠......如果它们不重叠，那么我应该怎么做它们相互重叠......
这是![第一的](../Images/e49f02ab4d1d3647bfd65275993c6b95.png)图像现在 ![第二](../Images/3480031a1b68585e6e2c554950b2b55e.png) 图像现在我想重叠这个图像，但我想确保这个图像应该正确地相互重叠......

# php - cron作业不起作用..为什么？

> ID：10783875
> 
> 赞同：1
> 
> 时间：2012-05-28T11:23:29.173
> 
> 标签：php, cron

你好吗？

我无法运行 cron 作业

这是我的网址：http: [//twitter.trips-world.com/updateing.php](http://twitter.trips-world.com/updateing.php)

我想要它每个 * * * * *

我对此进行了测试：/home/xxxxxx/public_html/twitter/updateing.php 但不起作用

请帮我

你的意思是这样![在此处输入图像描述](../Images/189a99af5ff45e78d8e2d14eb6bb6974.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:26:22.660

请列出控制台的输出： php -f /home/xxxxxx/public_html/twitter/updateing.php 命令。还要验证您在测试服务器上的 cronjob 条目。尝试添加脚本的完整路径，或者在调用脚本本身的执行之前将“cd”放在脚本的路径中。验证 cronjob 和所有者 (chown) 的 chmod。提供更多详细信息，您将得到帮助。而且我认为您应该从发布脚本的来源开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:26:43.977

在此处输入代码尝试如下命令，

```
curl http://www.mydomain.com/updateing.php 
```

更新：

> 我想要它每个 * * * * *

您可以将 cron 设置为每分钟执行一次，只需在每个可用选项上加上 *。请不要忘记检查托管服务提供商的 cron 政策。

更多详情请查看

[http://lamplightdevelopment.com/blog/post/id/using-cron-curl-to-monitor-the-status-of-your-site](http://lamplightdevelopment.com/blog/post/id/using-cron-curl-to-monitor-the-status-of-your-site)

[http://drupal.org/cron](http://drupal.org/cron)

# webdriver - 在 chrome 上运行的脚本显示错误

> ID：10783879
> 
> 赞同：2
> 
> 时间：2012-05-28T11:23:50.450
> 
> 标签：webdriver, watir, watir-webdriver, selenium-chromedriver

我使用步骤来运行此链接上提供的 chrome 脚本，它显示错误我按照以下链接中建议的步骤安装了 chrome 驱动程序，但它不起作用

```
https://github.com/zeljkofilipin/watirbook/blob/master/installation/windows.md#chrome-with-watir-webdriver 
```

我的电脑配置 Win 7 & 64bit

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.9-x86-mingw32/lib/ffi/platform.rb:27
: Use RbConfig instead of obsolete and deprecated Config.
Started ChromeDriver
port=54035
version=20.0.1133.0
log=D:\chromedriver.log
=> #<Watir::Browser:0x3568d490 url="chrome://newtab/" title="New Tab">
irb(main):003:0> browser.goto "watir.com"
[0528/164700:ERROR:automation_proxy.cc(367)] Channel error in AutomationProxy.
Selenium::WebDriver::Error::UnknownError: Chrome did not respond to 'WaitForAllT
absToStopLoading'. Elapsed time was 1 ms.
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/s
elenium/webdriver/remote/response.rb:52:in `assert_ok'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/s
elenium/webdriver/remote/response.rb:15:in `initialize'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/s
elenium/webdriver/remote/http/common.rb:59:in `new'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/s
elenium/webdriver/remote/http/common.rb:59:in `create_response'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/s
elenium/webdriver/remote/http/default.rb:64:in `request'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/s
elenium/webdriver/remote/http/common.rb:40:in `call'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/s
elenium/webdriver/remote/bridge.rb:598:in `raw_execute'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/s
elenium/webdriver/remote/bridge.rb:576:in `execute'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/s
elenium/webdriver/remote/bridge.rb:155:in `getCurrentUrl'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/s
elenium/webdriver/common/driver.rb:118:in `current_url'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.5.8/lib/watir
-webdriver/browser.rb:78:in `url'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.5.8/lib/watir
-webdriver/browser.rb:66:in `goto'
        from (irb):3
        from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):004:0> 
```

我将代码用作

```
 >irb

    > require "watir-webdriver"
    => true

    > browser = Watir::Browser.new :chrome
    Started ChromeDriver
    port=49522
    => #<Watir::Browser:0x..fd

bf27548 url="about:blank"
title="about:blank">

> browser.goto "watir.com" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:15:22.380

感谢您提供详细信息以检查所有版本。我的版本-> 它向我展示了 watir webdriver 的 3 个版本我卸载了旧版本现在它工作正常现在我的版本是 watir-webdriver (0.6.1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T21:49:10.063

如果您还没有这样做，请尝试确保当您打开 cmd 窗口以启动 IRB 或其他 watir 脚本时，您是“以管理员身份”执行此操作的。这有时会对 Vista 和 Win7 产生影响

# sencha-touch-2 - 视图之间的值

> ID：10783883
> 
> 赞同：2
> 
> 时间：2012-05-28T11:24:14.663
> 
> 标签：sencha-touch-2

我是sencha的新手，有问题。

我有一个包含信息（名称和图片）的列表，并且需要另一个包含详细信息的列表，我遵循提供文档的示例。我的问题是我不能使用第一个列表的值。名称，照片等值...

问题在这里：

```
Ext.define('app.view.ArtistDetail',{
extend: 'Ext.Panel',
xtype: 'artistdetail',
config: {
    tpl: tpl,
    items: [{
        xtype: 'panel',
        height: 50,
        tpl: '{title}'  <-- PROBLEM !!!!
    }]
}
}); 
```

tpl: tpl, 就是这样并显示正确的信息，但我无法在项目部分获得标题...

```
var tpl = new Ext.XTemplate(
        '<div class="global">',
            '<div class="artist-foto">',
                '<img src="{field_foto}" />',
            '</div>',
            '<div class="artist-title">',
                '{title}',
            '</div>',
        '</div>'
        ); 
```

求救！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:52:55.083

根据：[http](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component) ://docs.sencha.com/touch/2-0/#! /api/Ext.Component 每个 Ext.Component 都有配置：

**data**和**tpl**相互关联。所以你还必须设置数据配置：

```
{
  xtype：'面板'，
  id: '我的面板',
  身高：50，
  tpl: '{title}',
  数据： {
    标题：“你好世界”
  }
}

```

您还可以使用控制器设置数据：

```
onListItemTap：函数（视图、索引、目标、记录）{

  var myPanel = Ext.getCmp('myPanel');
  如果（我的面板）{
    myPanel.setData(record.data);
    Ext.getCmp('viewport').setActiveItem(myPanel);
  }

}
```

在这里，您将列表项中的数据设置到您的详细信息面板。

# openerp - OpenERP的report文件夹中也包含的.py文件的用途是什么

> ID：10783884
> 
> 赞同：2
> 
> 时间：2012-05-28T11:24:19.720
> 
> 标签：openerp

从文档来看，OpenERP 使用 rml 文件来显示报告。这些报告是从 .sxw 文件生成的。我没有看到任何关于报告文件夹中也包含的 .py 文件的信息。请问他们的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T20:58:22.523

报告文件夹中的那些 python 文件是[RML 解析器](http://doc.openerp.com/v6.1/developer/05_reports.html#openerp-server-pdf-output)。它们是该类的子`report_sxw.rml_parse`类，如果您需要的不仅仅是[标准函数](http://doc.openerp.com/v6.1/developer/05_reports.html#dynamic-content-in-openoffice-reports)，还可以将额外的函数添加到报表的本地上下文中。如果你搜索`addons`项目，`rml_parse`你会发现一堆例子。

# android - Android：在 4.0.3 中未找到 Notification.Builder

> ID：10783895
> 
> 赞同：0
> 
> 时间：2012-05-28T11:24:59.743
> 
> 标签：android

在执行以下操作时，我在 4.0.3 中遇到 Class Not Found 异常。 `Class<?> notifyBuilder = null; try { notifyBuilder = Class.forName("android.app.Notification.Builder"); } catch (Exception e) { e.printStackTrace(); }`

请帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:46:28.580

您需要为 3.0 之前的手机下载兼容性库。您可以在此处找到更多信息：

[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

此外，这里有一个链接，可以帮助您了解如何使用“NotificationCompat.Builder”实现通知（注意后缀 Compat）：

[究竟如何使用 Notification.Builder](https://stackoverflow.com/questions/6391870/how-exactly-to-use-notification-builder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:31:05.840

使用这个工作“android.app.Notification$Builder”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:40:36.633

这适用于我的 4.0.3 android 应用程序[网络教程](http://www.vogella.com/articles/AndroidNotifications/article.html)

# jquery - 容器中的 jQuery 函数调用

> ID：10783897
> 
> 赞同：0
> 
> 时间：2012-05-28T11:25:02.950
> 
> 标签：jquery, html, function, call

所以我有这个：

```
 function pageSwap(menuPont){   
    $(".content").fadeOut("1000",function(){
            $(".content").load(menuPont, function(){
                $(".content").fadeIn("5000");
            });       
    });
} 
```

在 index.php 上，还有这个

```
 $(".content").ready(function(){pageSwap('main.html')}); 
```

**工作和东西，但我的问题是，我需要在 .content div**中调用 pageSwap('other.html') ，链接样式。

我无法让这个工作，所以请帮助我。:[

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:34:45.113

我不完全确定要完成什么，但我假设您想在有人单击 .content div 时调用 pageSwap('other.html')？

```
$(function(){
  pageSwap('main.html');
  $('.content').click(function(){
    pageSwap('other.html');
  }
}); 
```

更新了评论中的解决方案：要在单击容器内的链接时调用 pageSwap('other.html')，请将函数调用放入 href：

```
<a href="javascript:pageSwap('other.html');">my link</a> 
```

# xml - 在主题或正文中包含德语变音符号时，MS Exchange 2007 EWS CreateItem utf-8 失败

> ID：10783899
> 
> 赞同：0
> 
> 时间：2012-05-28T11:25:05.457
> 
> 标签：xml, soap, character-encoding, exchangewebservices

将此请求发送到 EWS 时（注意主题中的“ä”）：

```
POST /EWS/Exchange.asmx HTTP/1.1
Content-Type: text/xml; chartype=UTF-8
Connection: keep-alive
Host: ...
Authorization: Basic ...
Content-Length: ...

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema"
               xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
               xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
  <soap:Body>
    <CreateItem xmlns="http://schemas.microsoft.com/exchange/services/2006/messages"
                xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types" 
                SendMeetingInvitations="SendToAllAndSaveCopy" >
      <SavedItemFolderId>
        <t:DistinguishedFolderId Id="calendar"/>
      </SavedItemFolderId>
      <Items>
        <t:CalendarItem xmlns="http://schemas.microsoft.com/exchange/services/2006/types">
          <t:Subject>ITGeschäft</t:Subject>
          <t:Body BodyType="Text">...</t:Body>
          <t:ReminderIsSet>false</t:ReminderIsSet>
          <t:ReminderMinutesBeforeStart>10</t:ReminderMinutesBeforeStart>
          <t:Start>2013-08-06T12:31:57</t:Start>
          <t:End>2013-08-06T15:31:57</t:End>
          <t:IsAllDayEvent>false</t:IsAllDayEvent>
          <t:LegacyFreeBusyStatus>Busy</t:LegacyFreeBusyStatus>
          <t:Location></t:Location>
        </t:CalendarItem>
      </Items>
    </CreateItem>
  </soap:Body>
</soap:Envelope> 
```

我收到这样的错误响应：

```
 - soap11:Envelope xmlns:soap11="http://schemas.xmlsoap.org/soap/envelope/"
 -- soap11:Header
 --- t:ServerVersionInfo MajorVersion="8" MinorVersion="3" MajorBuildNumber="83" MinorBuildNumber="4" xmlns:t="http://schemas.m
icrosoft.com/exchange/services/2006/types" /
 -- soap11:Body
 --- soap11:Fault
 ---- faultcode
        = soap11:Client
 ---- faultstring
        = Fehler bei der Schema├╝berpr├╝fung der Anforderung: Unerwartetes Dateiende. Die folgenden Elemente wurden nicht geschlossen: soap:Envelope. Zeile 28, Position 16.
 ---- detail
 ----- e:ResponseCode xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors"
         = ErrorSchemaValidation
 ----- e:Message xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors"
         = Unerwartetes Dateiende. Die folgenden Elemente wurden nicht geschlossen: soap:Envelope. Zeile 28, Position 16.
 ----- e:Line xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors"
         = 28
 ----- e:Position xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors"
         = 16 
```

但是当我发送

```
...
          <t:Subject>ITGeschaeft</t:Subject>
... 
```

它有效，CalendarItem 已正确创建。我是如何发送非 ASCII 字符的？

顺便说一句，它的另一种工作方式是 GetItem 正确传输这些特殊字符。请求以 utf-8 正确编码。还尝试了 Iso-Latin1，得到编码错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:06:05.353

在 ISO-8859-1 中对请求和 xml 进行编码工作：

```
Content-Type: text/xml; charset=ISO-8859-1 
```

……

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
```

# html - CSS 的说法和方式

> ID：10783902
> 
> 赞同：0
> 
> 时间：2012-05-28T11:25:17.657
> 
> 标签：html, css

我正在尝试做一种纯 html/css 选项卡系统。我有

```
<div>
    <input class="tab1" type="radio" checked/>
    <input class="tab2" type="radio"/>
</div>

<div class="content">
    <div class="tab-1">

    </div>
    <div class="tab-2">

    </div>
</div> 
```

还有我的 CSS

```
.content > div {
    opacity:0;
}

input.tab1:checked ~ .tab-1, input.tab2:checked ~ .tab-2  {
    opacity: 1
} 
```

但是波浪号`~`并没有按预期工作（因为 div 不完全是兄弟姐妹） - 我怎样才能让 css 工作到其他节点？有没有办法在css中“说”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:30:24.273

你必须上一层，你不能在 CSS 中这样做，因为 CSS 中没有父选择器。您可能想阅读这篇文章：[为什么我们在 CSS 中没有父选择器（但是](http://snook.ca/archives/html_and_css/css-parent-selectors)[CSS4](http://dev.w3.org/csswg/selectors4/)中会有父选择器）

你可以做什么：

**选项 1**：更改您的 HTML：

*。一种*

```
<input class="tab1" type="radio" checked/>
<input class="tab2" type="radio"/>

<div class="content">
    <div class="tab-1"></div>
    <div class="tab-2"></div>
</div> 
```

并使用`input.tab1:checked ~ .content .tab-1`

*.b*尝试像这里描述的结构：http: [//css-tricks.com/functional-css-tabs-revisited/](http://css-tricks.com/functional-css-tabs-revisited/) - 基本上，这个想法是你不制作一组选项卡和一组选项卡内容，但是您将每个选项卡与其相应的内容分组。

**选项 2**：使用 JavaScript（这与纯 CSS 选项卡系统的想法背道而驰，这是真的）

* * *

**重要提示**：请记住，`opacity`在父节点上设置 < 0 会使所有子节点具有相同的`opacity`值，*您无法更改它*（除了再次将父节点的不透明度设置为 1 :P ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:28:01.103

使用 a`,`而不是 a `~`。

查看所有 CSS 选择器的列表：

[W3 CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:28:32.773

你不能用纯 CSS 做到这一点。`tab1`和之间没有关系`tab-1`。

我相信这是取自 jQuery 选项卡标记？您可能最好坚持使用 jQuery 选项卡而不是尝试这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T11:28:36.097

遗憾的是你不能，因为没有 CSS 方法可以向上移动。您必须使用 Javascript 来执行此操作。

# java - 在关闭远程桌面连接时运行 s/w

> ID：10783903
> 
> 赞同：3
> 
> 时间：2012-05-28T11:25:24.707
> 
> 标签：java, c++, c, windows

我想在关闭/断开远程桌面连接时运行应用程序。有什么方法可以在 windows xp/win 7 中记录远程桌面会话的开始-停止时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:39:57.853

您可以编写一个 Windows 服务并监听 SERVICE_CONTROL_SESSIONCHANGE。该事件的参数之一是会话状态，在这种情况下，您可能会对 WTS_SESSION_LOGON/WTS_SESSION_LOGOFF 或 WTS_REMOTE_CONNECT/WTS_REMOTE_DISCONNECT 感兴趣，具体取决于您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:33:21.987

在远程桌面连接开始时，您可以试试这个。这是您必须做的伪代码：

1.  Java 应用程序（侦听器），注册为 Windows 服务并在系统层上运行。

2.  侦听器应用程序一直在侦听，直到打开某个 .exe 文件。（在这种情况下，它将是**mstsc.exe**）

3.  侦听器执行代码（或调用另一个应用程序）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T11:52:53.627

[您可以使用任务调度](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)程序运行任何程序：

> *   当计算机进入空闲状态时。
> *   系统启动时。
> *   当用户登录时。
> *   当终端服务器会话更改状态时。

您甚至[可以从命令行添加任务](http://technet.microsoft.com/en-us/library/cc772785%28v=ws.10%29.aspx#BKMK_logon)

# maven - 如何使用 Flexmojos 和 Maven 3 在 WAR 中生成 Flash HTML 包装器？

> ID：10783905
> 
> 赞同：3
> 
> 时间：2012-05-28T11:25:31.260
> 
> 标签：maven, maven-3, flexmojos, maven-war-plugin

我有两个 Maven 项目：一个用于构建 SWF，另一个用于构建包含它的 WAR。WAR 需要包含 SWF 的 Flash 包装器。Flexmojos 显然能够通过[HTML 包装器 mojo](https://docs.sonatype.org/display/FLEXMOJOS/Html+Wrapper+Mojo)执行此操作，但这不适用于 Maven 3。有关更多详细信息，请参见[此处](http://www.mail-archive.com/flex-mojos@googlegroups.com/msg09453.html)。

有解决方法吗？

我的 SWF POM 具有以下内容：

```
<plugin>
    <groupId>org.sonatype.flexmojos</groupId>
    <artifactId>flexmojos-maven-plugin</artifactId>
    <version>4.1-beta</version>
    <configuration>
        <parameters>
            <swf>${project.artifactId}-${project.version}</swf>
            <title>My application title</title>
            <width>100%</width>
            <height>100%</height>
            <bgcolor>#ffffff</bgcolor>
        </parameters>
    </configuration>
</plugin> 
```

我的 WAR POM 有以下内容：

```
<plugin>
    <groupId>org.sonatype.flexmojos</groupId>
    <artifactId>flexmojos-maven-plugin</artifactId>
    <version>4.1-beta</version>
    <extensions>true</extensions>

    <executions>
        <execution>
            <id>wrapper</id>
            <phase>generate-resources</phase>
            <goals>
                <goal>wrapper</goal>
            </goals>
            <configuration>
                <wrapperArtifact>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>the-swc-project</artifactId>
                    <version>${project.version}</version>
                </wrapperArtifact>
                <htmlName>index</htmlName>
            </configuration>
        </execution>
        <execution>
            <goals>
                <goal>copy-flex-resources</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:06:24.983

经过进一步调查，我发现这里的问题是 Flexmojos 尝试重新配置 WAR 插件，但这样做的方式不适用于 Maven 3。

我发现的相当严峻的解决方法涉及手动配置 WAR 插件，如下所示：

```
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.1.1</version>
    <configuration>
        <warSourceExcludes>index.template.html</warSourceExcludes>
        <webResources>
            <resource>
                <directory>target/war/work/wrapped-template</directory>
            </resource>
        </webResources>
   </configuration>
</plugin> 
```

# python - 使用 python 生成 Xml

> ID：10783910
> 
> 赞同：0
> 
> 时间：2012-05-28T11:26:24.760
> 
> 标签：python, xml, xml-parsing

请查看下面的代码，我正在使用它来使用 python 生成 xml。

```
from lxml import etree

# Some dummy text
conn_id = 5
conn_name = "Airtelll"
conn_desc = "Largets TRelecome"
ip = "192.168.1.23"

# Building the XML tree
# Note how attributes and text are added, using the Element methods
# and not by concatenating strings as in your question
root = etree.Element("ispinfo")
child = etree.SubElement(root, 'connection',
                 number = str(conn_id),
                 name = conn_name,
                 desc = conn_desc)
subchild_ip = etree.SubElement(child, 'ip_address')
subchild_ip.text = ip

# and pretty-printing it
print etree.tostring(root, pretty_print=True) 
```

这将产生：

```
<ispinfo>
  <connection desc="Largets TRelecome" number="5" name="Airtelll">
    <ip_address>192.168.1.23</ip_address>
  </connection>
</ispinfo> 
```

但我希望它像：

```
<ispinfo>
  <connection desc="Largets TRelecome" number='1' name="Airtelll">
    <ip_address>192.168.1.23</ip_address>
  </connection>
</ispinfo> 
```

平均数字属性应该用单引号括起来。任何想法....我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:09:20.630

There is no flag in lxml to do this, so you have to resort to manual manipulation.

```
import re
re.sub(r'number="([0-9]+)"',r"number='\1'", etree.tostring(root, pretty_print=True)) 
```

However, why do you want to do this? As there is no difference other than cosmetics.

# ruby-on-rails - 如何在 ruby on rails 中添加更多列并更改表名

> ID：10783912
> 
> 赞同：1
> 
> 时间：2012-05-28T11:26:28.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

嗨，我有一个名为 bluedarts 的模型或表，但我想将名称更改为“staging”，并将几列添加到同一个表中。执行此操作的命令是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:33:30.087

迁移将是这里的答案：http: [//guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)。您将需要 rename_table 方法。

```
rails g migration rename_bluedarts_to_staging

def change
  rename_table :bluedarts, :staging
end 
```

然后在需要使用该表的模型中指定需要使用暂存表：

```
set_table_name 'staging' 
```

要添加列，请为每列创建另一个迁移。

```
rails g migration add_column_name_to_staging column_name:string 
```

column_name:string 位表示列名应该是什么，以及它应该是什么类型。然后你就跑`rake db:migrate`。由于迁移中使用的命名约定，它知道使用什么代码来正确添加列。

# c# - 在计算机上运行 ac# 控制台应用程序需要什么

> ID：10783914
> 
> 赞同：2
> 
> 时间：2012-05-28T11:26:35.940
> 
> 标签：c#, .net, console-application

我用.net framework 2.0 创建了一个简单的c# 控制台应用程序，它使用MySql。为了让程序在另一台计算机（Windows Server 2008）上运行，我应该执行哪些步骤？

我已经安装了 MS .Net 框架 Clent Profile 和 MS .Net 框架 Clent Profile Extended。

我应该在另一台电脑上安装 .net framework 2.0 Service Pack 吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:27:46.990

您只需要在机器上安装 .Net Framework 2.0 或更高版本。

最好做一个安装程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:27:33.150

确保您的计算机上安装了 .Net framework 2.0。还要确保您拥有建立连接所需的 .Net dll。如果您的应用程序将使用本地计算机作为 MySQL 服务器，那么您可能还必须在客户端计算机上安装 MySQL，或者您可以制作包含 MySQL 安装的安装程序。您可以使用[InnoSetup](http://www.jrsoftware.org/isinfo.php)或者您可以查看以下线程[Deploy MySQL Server + DB with .Net application](https://stackoverflow.com/questions/49378/deploy-mysql-server-db-with-net-application)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T11:28:46.100

环境 - .Net 框架。

版本 - 与您的应用所针对的版本相同或更高版本。

为什么我说没有特定的版本号，因为如果你的应用程序是 4.0 并且你安装了 2.0 怎么办？

这就是相同版本或更高版本的原因。

# java - Netbeans 生成的 javadoc 中的 LaTeX 数学？

> ID：10783917
> 
> 赞同：0
> 
> 时间：2012-05-28T11:27:19.623
> 
> 标签：java, netbeans, javadoc, netbeans-7, taglet

有没有办法在 Netbeans 生成的 javadoc 中包含 LaTeX 公式？我发现以下标签：http: [//users.informatik.uni-halle.de/~grau/LaTeXlet/index.html](http://users.informatik.uni-halle.de/~grau/LaTeXlet/index.html)

它需要修改 javadocs 参数...

```
-taglet latexlet.InlineBlockLaTeXlet -taglet latexlet.BlockLaTeXlet -taglet latexlet.InlineLaTeXlet -tagletpath path/to/the/jar/LaTeXlet.jar 
```

我怎样才能做到这一点？

# c# - 清除 Windows Mobile 上的通知图标

> ID：10783919
> 
> 赞同：1
> 
> 时间：2012-05-28T11:27:22.870
> 
> 标签：c#, winforms, windows-ce

我正在为 CE 6.5 创建一个通知，但是这个通知是在循环检查时提出的——所以通知图标逐渐建立起来。有没有办法删除它们？或者也许根本不让他们出现？重要的是通知窗口，而不是系统托盘图标。图标上的 .Dispose() 没有做任何事情，也没有取消它（仍然存在，只是空白）。我尝试在气球变化上制作一个事件，如果不可见它会 dispose()，但仍然没有工作。

```
 notification.BalloonChanged += new Microsoft.WindowsCE.Forms.BalloonChangedEventHandler(
            delegate(object s, Microsoft.WindowsCE.Forms.BalloonChangedEventArgs e)
            {
                if (!notification.Visible)
                    notification.Dispose();
            }); 
```

我所有的搜索都只返回了程序完成后的处置建议。无论如何，这就是我的工作。谢谢！

```
 private delegate void DelegateNotificationWindow(string error, int seconds);
    private void InvokeNotificationWindow(string message, int seconds)
    {
        Microsoft.WindowsCE.Forms.Notification notification = new Microsoft.WindowsCE.Forms.Notification();
        notification.Icon = Properties.Resources.Icon;
        notification.InitialDuration = seconds;
        notification.Caption = "Notification";
        notification.Critical = false;
        notification.Text = String.Format("<html><body><b>{0}</b></body></html>", message);
        notification.Visible = true;
    }

    public void ShowNotification(NotificationType type)
    {
        string message = "";
        switch (type)
        {
            case NotificationType.None: return;
            case NotificationType.NewEntitiesAvailable:
                message = "New Inspections/Works available, please run Receive New.";
                break;
        }
        DelegateNotificationWindow dlgt = new DelegateNotificationWindow(InvokeNotificationWindow);
        this.BeginInvoke(dlgt, message, 10);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:50:49.150

Dispose 是对的，我只需要制作一个单独的计时器而不是使用事件。这似乎对我想要的有用。

```
 Timer _timer = new Timer();
        _timer.Tick += new EventHandler(delegate(object s, EventArgs e) { notification.Dispose(); });
        _timer.Interval = seconds * 1000;
        _timer.Enabled = true; 
```

# css - CSS N：第一个有间隙的孩子

> ID：10783920
> 
> 赞同：1
> 
> 时间：2012-05-28T11:27:27.457
> 
> 标签：css, css-selectors

我一直在尝试制作一个带有偶数行的彩色表格，其`item`颜色与奇数行不同。请看小提琴：http: [//jsfiddle.net/x7XT5/](http://jsfiddle.net/x7XT5/)

HTML：

```
<table>
  <tr class="item">
      <td>1</td>
  </tr>
<tr>
    <td>info</td>
</tr>
  <tr class="item">
      <td>2</td>
  </tr>
<tr>
    <td>info</td>
</tr>
  <tr class="item">
      <td>3</td>
  </tr>
<tr>
    <td>info</td>
</tr>
  <tr class="item">
      <td>4</td>
  </tr>
<tr>
    <td>info</td>
</tr>
</table>
​ 
```

CSS：

```
table tr.item:nth-child(2n)
{
    background-color: yellow;
}

table tr.item:nth-child(2n+1)
{
    background-color: red;
} 
```

如何让它在css中工作？

**UPD1**

`<tr>`没有类`item`必须是白色背景。
`<tr class="item">`'在偶数/奇数位置上，背景必须是红色/黄色。​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:32:40.613

```
table tr
{
    background-color: yellow;
}

table tr.item:nth-child(2n+1)
{
    background-color: red;
} 
```

更新：给你：

```
table tr {
    background-color: white;
}

table tr.item:nth-child(n)
{
    background-color: red;
}

table tr.item:nth-child(4n+1)
{
    background-color: yellow;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:32:01.290

嘿，删除**课程**并签入您的`tr`和`css`文件

并轻松创建

现场演示[http://jsfiddle.net/x7XT5/1/](http://jsfiddle.net/x7XT5/1/)

和

**第二种方法**是现场演示[http://jsfiddle.net/x7XT5/3/](http://jsfiddle.net/x7XT5/3/)

**更新了**现场演示 [http://jsfiddle.net/x7XT5/5/](http://jsfiddle.net/x7XT5/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:33:55.123

试试这个。无需设置第 n 个孩子。

[http://jsfiddle.net/x7XT5/2/](http://jsfiddle.net/x7XT5/2/)

您也可以使用奇数和偶数关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T12:04:01.293

首先，我认为，您应该使用 :nth-of-type 而不是 :nth-child，但不幸的是，:nth-of-type 不适用于类，所以我不知道任何纯 CSS 解决方案。

您可以随时使用：

```
table tr.item:nth-of-type(4n+3)
{
    background-color: yellow;
}

table tr.item:nth-of-type(4n+1)
{
    background-color: red;
} 
```

适用于此示例。

# jquery - jQuery Mobile - 基于设备方向的固定标题

> ID：10783924
> 
> 赞同：0
> 
> 时间：2012-05-28T11:27:36.097
> 
> 标签：jquery, mobile

我目前正在为移动设备开发一个网站，并且我正在使用 jquery mobile。

我使用以下方法将标题放在固定位置：

```
<header data-role="header" data-position="fixed"> 
```

这工作得很好，但是当在设备上以横向模式查看页面时，标题会占用大量空间。

jquery mobile 是否可以仅在纵向模式下设置 data-position="fixed" 而在横向模式下具有不固定的标题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:10:50.017

您可以绑定到`orientationchange`事件并调用`$("[data-position='fixed']").fixedtoolbar('hide');`标题。

这是讨论固定工具栏[http://jquerymobile.com/demos/1.1.0/docs/toolbars/bars-fixed-methods.html](http://jquerymobile.com/demos/1.1.0/docs/toolbars/bars-fixed-methods.html)上可用方法的 jQuery Mobile 页面。

这些是可用的事件[http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)，其中之一是`orientationchange`.

您可以尝试使用带有 data-position 属性而不是 #header 的实际选择器。可能需要进行一些调试才能使其正常工作，但没有理由不这样做。

# jpa-2.0 - 在 JPA 双向 OneToMany 中删除实体

> ID：10783925
> 
> 赞同：1
> 
> 时间：2012-05-28T11:27:39.263
> 
> 标签：jpa-2.0

我有两个实体用户和部门，两个实体（OneToMany 和 ManyToOne）之间存在双向关系，我在一个服务类中管理关系，该服务类在以下处理删除和添加用户到部门：

```
List<User> originalUserList = userJpaRepository.findAllByDepartment(department);
for (Iterator<User> iterator = originalUserList.iterator(); iterator.hasNext();) {
    User user = iterator.next();
    if (!department.getDepartmentEmployees().contains(user)) {
        user.setDepartment(null);
        userJpaRepository.save(user);
    }
}
for (User user : department.getDepartmentEmployees()) {
    user.setDepartment(department);
    userJpaRepository.save(user);
}
Department savedDepartmetn = jpaRepository.save(department);
return savedDepartmetn; 
```

一切正常，添加和删除用户会反映到数据库中，但唯一的问题是倒数第二行，instance savedDepartment 仍将包含已删除的用户，因为hibernate 从对用户进行更改之前发生的选择填充其数据是实际上刷新到数据库。这里最好的方法是什么，

*   我是否应该在保存部门之前刷新（如果保存部门失败，事务会回滚）
*   我应该在将 savedInstance 返回给调用者之前刷新它吗
*   任何其他想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:45:32.977

由于您使用的是附加实体，因此无需保存任何内容。JPA 会自动持久化您对附加实体所做的更改。

当你有一个双向关联时，你有责任在双方进行更改以确保你的对象模型是一致的。如果您设置`user.department`为 null，那么您还应该从`department.users`.

我不明白上面的代码在做什么，但删除调用保存，并维护关联的双方，一切都会好起来的。

# java - 如何在 iPad 上运行 Servlet

> ID：10783932
> 
> 赞同：1
> 
> 时间：2012-05-28T11:27:58.827
> 
> 标签：java, ios, ipad, servlets

听说iphone/ipad不支持java。真的吗？如果是，那么如何在 iPad 上运行我的 Servlet？

感谢 Ankit

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T11:35:25.410

简短的回答：你不能。要运行 servlet，您需要一个位于 JVM 之上的 Java Web 容器，这是不可能的，因为任何 iOS 设备上都不支持 Java。

如果您真的非常需要运行基于 servlet 的应用程序，也许您可​​以在云中执行此操作并从 iPad 访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T11:46:59.753

虽然您无法在 iOS 上运行 Servlet，因为不支持 java，但您始终可以通过 iPad 中的浏览器访问基于 Servlets 的 Web 应用程序，该应用程序托管在支持 java 的平台上

# jquery-ui - selectToUISlider 设置值不正确

> ID：10783935
> 
> 赞同：2
> 
> 时间：2012-05-28T11:28:05.877
> 
> 标签：jquery-ui

我有一个标准`<select>..</select>`元素，我有一个由 selectToUISlider() 创建的滑块问题是当滑块移动时，下拉菜单中的选项不会改变。此外`selected="selected"`，当滑块移动时，它会在每个元素上设置，以便在提交表单时发布多个值，以模拟多选选项。

我花了很长时间试图弄清楚这一点，但没有运气。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T00:47:10.893

在尝试实现您提到的类似功能时，我遇到了同样的问题。

问题是，每当移动滑块时，它会一直设置选择列表的“选定”属性，而不会清除先前选择的项目。在将新选项设置为选中之前，我添加了一个脚本来清除以前选择的选项。

在 jquery 脚本文件的第 92 行（..ish）处查找/搜索文本。

```
 //control original select menu
   var currSelect = jQuery('#' + thisHandle.attr('id').split('handle_')[1]);
   currSelect.find('option').eq(ui.value).attr('selected', 'selected'); 
```

并在两行之间插入此代码...

```
 currSelect.find('option[selected]').removeAttr('selected'); 
```

所以最终的代码应该是这样的......

```
 //control original select menu
   var currSelect = jQuery('#' + thisHandle.attr('id').split('handle_')[1]);
   currSelect.find('option[selected]').removeAttr('selected');
   currSelect.find('option').eq(ui.value).attr('selected', 'selected'); 
```

我希望它有所帮助。随时问任何进一步的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T10:17:32.983

我知道这已经很老了，但我最近遇到了这个问题，也许我的解决方案可以帮助某人。在使用更新版本的 jQuery (>jQuery 1.6.1) 和 JQueryUI 并尝试将 selectToUISlider 与它们一起使用时，我遇到了同样的问题。

我发现我的解决方案（使用属性插入的属性）只是在第 98 行的 selectToUISlider.js 脚本中替换

这个

```
currSelect.find('option').eq(ui.value).attr('selected', 'selected'); 
```

为了这

```
currSelect.find('option').eq(ui.value).prop('selected', true); 
```

您可以在此答案中找到“为什么”，这有助于我找到此解决方案： [https ://stackoverflow.com/a/5876747/2285806](https://stackoverflow.com/a/5876747/2285806)

您还可以阅读 prop() 的 jQuery API 条目以查找更多信息并阅读有关浏览器向后兼容性的重要说明：http: [//api.jquery.com/prop/](http://api.jquery.com/prop/)

# php - 禁用 MySQL 并发

> ID：10783936
> 
> 赞同：1
> 
> 时间：2012-05-28T11:28:13.803
> 
> 标签：php, mysql, concurrency

下面的代码真的会禁用并发执行吗？

```
LOCK TABLES codes WRITE;
INSERT INTO codes VALUES ();
SELECT mid FROM codes ORDER BY expired DESC LIMIT 0,1;
UNLOCK TABLES; 
```

PHP 将执行 SQL。许多用户将通过 HTTP 请求 PHP 文件。它真的会为每个用户单独执行吗？

*mid*对每个用户来说都是独一无二的，所以我认为我应该使用 MySQL 锁来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:31:33.537

如果您有一个带有自动递增键的表，并且您在插入后使用 mysql_insert_id ，则可以保证它是唯一的，并且不会混合用户线程（它会在您提供的连接上获取 ID）。无需锁定表。

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

# cakephp - cake php链接到具有不同前缀的当前页面

> ID：10783944
> 
> 赞同：0
> 
> 时间：2012-05-28T11:29:15.740
> 
> 标签：cakephp, cakephp-2.0

在我的默认布局中，我想显示指向当前页面但前缀不同的链接。我使用前缀“语言”来使用像 www.site.com/eng/controller/action/param 这样的地址。

我试过`$this->Html->link('eng', array('language' => 'eng') );`

但这会在`eng/controller/action`没有传递参数、没有命名参数和没有 url 参数的情况下创建与 url 的链接。

我怎么能做到这一点？我更喜欢优雅的解决方案，比如 1 行代码 - 我知道它可以完成但找不到它:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:42:48.660

试试这个：

```
// helper method, possibly AppHelper, or in AppController and set a view var
function getCurrentParams() {
    $route = Router::currentRoute();
    $params = $this->request->params;
    $pass = $params['pass'];
    $named = $params['named'];
    unset($params['pass'], $params['named']);
    if (!empty($route->options['pass'])) {
        $pass = array();
    }
    return array_merge($params, $named, $pass);
}

$params = $this->SomeHelper->getCurrentParams();
$params['language'] = 'eng';
// use $params for your link now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-30T10:19:11.330

就我而言，这个简单的解决方案也有效！

```
<?php
App::uses('HtmlHelper', 'View/Helper');
class MyHtmlHelper extends HtmlHelper {
    public function url($url = null, $full = false) {
        if(!isset($url['language']) && isset($this->params['language']) && is_array($url)) {
          $url['language']= $this->params['language'];
        }
        if(count($url) == 1 && isset($url['language'])){
            $params = $this->params;
            $url = array_merge($params['pass'],$url);
        }
        return parent::url($url, $full);
   }
} 
```

并在 AppController

```
public $helpers = array(
    ...
    'Html' => array('className' => 'MyHtml')
    ...
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:02:37.543

`$this->Html->link('eng', array('language' => 'eng', 'pass') );`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T15:00:48.293

像这样的东西应该工作：

```
$url = Router::parse($this->here);
$url['language'='end';
$this->Html->link('eng', $url); 
```

它不是一行，但你可以将它压缩成一行，但它会很不可读。

您可以将它包装在一个帮助器/函数中，尽管这将是一个单行调用；-)

# javascript - Facebook 应用请求对话框

> ID：10783945
> 
> 赞同：0
> 
> 时间：2012-05-28T11:29:21.180
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk

我正在使用这段代码：

```
function newInvite(){
        var user_ids = document.getElementsByName("user_ids")[0].value;
        FB.ui({method: 'apprequests',
          message: 'My Great Request',
          to: user_ids, 
        });
      } 
```

我需要存储从这个函数获得的请求 ID

```
function loadFriends()
{
    //get array of friends
    FB.api('/me/friends?fields=name,first_name,gender', function(response) {
        console.log(response);
        var divContainer=$('.facebook-friends');
                         var testdiv = document.getElementById("test");

for(var i=0; i<response.data.length; i++){
    if(response.data[i].gender == 'male'){
         testdiv.innerHTML += response.data[i].id + '<br />';
    }
}
    });
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:32:01.070

是的，很简单，

```
 FB.ui({method: 'apprequests',
          message: 'My Great Request',
          to: user_ids, 
        }, requestCallback); 
```

来源：[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)

**[编辑]**

```
function newInvite(users){
    FB.ui({method: 'apprequests',
      message: 'My Great Request',
      to: users.join(',')
    });
}

function loadFriends()
{
    //get array of friends
    FB.api('/me/friends?fields=name,first_name,gender', function(response) {
        console.log(response);
        var divContainer=$('.facebook-friends');
        var testdiv = document.getElementById("test");

        var  users = [];
        for(var i=0; i<response.data.length; i++){
            if(response.data[i].gender == 'male'){
                testdiv.innerHTML += response.data[i].id + '<br />';
            }
            users.push(response.data[i].id);
        }

        console.log(users)
        newInvite(users);        

    });
} 
```

# c#-4.0 - 如何处理 ASP.NET Web API 中的分层路由？

> ID：10783946
> 
> 赞同：38
> 
> 时间：2012-05-28T11:29:24.143
> 
> 标签：c#-4.0, asp.net-mvc-4, asp.net-web-api, restful-url

目前我有两个控制器

1 - 父控制器

2 - 子控制器

我像这样访问我的父控制器

```
someurl\parentcontroller 
```

现在我想像这样访问我的孩子控制器

```
someurl\parentcontroller\1\childcontroller 
```

最后一个 url 应该返回特定父级的所有子级。

我的 global.asax 文件中目前有这条路线

`routes.MapHttpRoute ("Route1", "{controller}/{id}", new { id = RouteParameter.Optional });`

我不确定如何实现我的`parent\id\child`层次结构。我应该如何配置我的路线来实现这一点？想法？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-28T12:11:31.363

如下配置路由。{param} 是可选的（根据需要使用）：

```
routes.MapHttpRoute(
           name: "childapi",
           routeTemplate: "api/Parent/{id}/Child/{param}",
           defaults: new { controller = "Child", param = RouteParameter.Optional }
  );

routes.MapHttpRoute(
         name: "DefaultApi",
         routeTemplate: "api/{controller}/{id}",
         defaults: new { id = RouteParameter.Optional }
  ); 
```

然后将子 APi 称为 /api/Parent/1/child 父级可以简单地称为 /api/Parent/

子控制器：

```
 public class ChildController : ApiController
    {     
        public string Get(int id)
        {
          //the id is id between parent/{id}/child  
          return "value";
        }
        .......
    } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-11-13T11:19:46.067

从 Web API 2 开始，您现在可以使用路由属性来定义每个方法的自定义路由，

```
[Route("api/customers/{id:guid}/orders")]
public IEnumerable<Order> GetCustomerOrders(Guid id) {
   return new Order[0];
} 
```

您还需要在 WebApiConfig.Register() 初始化方法中添加以下行，

```
 config.MapHttpAttributeRoutes(); 
```

全文， [http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2](http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-11T15:00:49.893

我想以更通用的方式处理这个问题，而不是`controller = "Child"`像 Abhijit Kadam 那样直接用 连接 ChildController。我有几个子控制器，不想一遍又一遍地为每个子控制器映射特定的`controller = "ChildX"`路线`controller = "ChildY"`。

我的`WebApiConfig`样子是这样的：

```
config.Routes.MapHttpRoute(
  name: "DefaultApi",
  routeTemplate: "api/{controller}/{id}",
  defaults: new { id = RouteParameter.Optional }
);
  config.Routes.MapHttpRoute(
  name: "ChildApi",
  routeTemplate: "api/{parentController}/{parentId}/{controller}/{id}",
  defaults: new { id = RouteParameter.Optional }
); 
```

我的父控制器非常标准，并且匹配上面的默认路由。示例子控制器如下所示：

```
public class CommentController : ApiController
{
    // GET api/product/5/comment
    public string Get(ParentController parentController, string parentId)
    {
        return "This is the comment controller with parent of "
        + parentId + ", which is a " + parentController.ToString();
    }
    // GET api/product/5/comment/122
    public string Get(ParentController parentController, string parentId,
        string id)
    {
        return "You are looking for comment " + id + " under parent "
            + parentId + ", which is a "
            + parentController.ToString();
    }
}
public enum ParentController
{
    Product
} 
```

## 我的实现的一些缺点

*   如您所见，我使用了`enum`，所以我仍然需要在两个不同的地方管理父控制器。它可以很容易地成为一个字符串参数，但我想阻止它`api/crazy-non-existent-parent/5/comment/122`工作。
*   可能有一种方法可以使用反射或其他方法来即时执行此操作，而无需单独管理它，但这对我现在有用。
*   它不支持孩子的孩子。

可能有一个更通用的更好的解决方案，但就像我说的，这对我有用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-28T23:09:54.933

除了使用默认 mvc 路由之外，还有一个选项是查看属性路由 - [https://github.com/mccalltd/AttributeRouting](https://github.com/mccalltd/AttributeRouting)。虽然它的工作量更大，但当您需要设计复杂的路线时，装饰单个动作方法提供了很大的灵活性。您还可以将它与标准 MVC 路由结合使用。

# .htaccess - 如何使用 .htaccess 设置 suhosin.request.max_*？只有 suhosin.post.max_* 工作

> ID：10783948
> 
> 赞同：3
> 
> 时间：2012-05-28T11:29:42.773
> 
> 标签：.htaccess, suhosin

我在我的 ini 文件中设置了 suhosin.perdir = 'p' 。我现在想按文件夹更改 suhosin ini 设置。

以下所有工作（在所需文件夹中运行 phpinfo() 显示更改的值）：

```
php_value suhosin.post.max_array_depth 100
php_value suhosin.post.max_array_index_length 128
php_value suhosin.post.max_name_length 128
php_value suhosin.post.max_value_length 2000000
php_value suhosin.post.max_totalname_length 512
php_value suhosin.post.max_vars 1000 
```

但是，当我还添加 .request 设置（我知道这是 .post 设置的上限）时，它们不会改变：

```
php_value suhosin.request.max_array_depth 100
php_value suhosin.request.max_array_index_length 128
php_value suhosin.request.max_name_length 128
php_value suhosin.request.max_value_length  2000000
php_value suhosin.request.max_totalname_length 512
php_value suhosin.request.max_vars 1000 
```

![phpinfo的截图](../Images/2b1df58e932ae46debce762d739324c1.png)

你知道我是否还有其他需要检查/设置的东西吗？我是不是忘记了什么？

谢谢！马太

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T12:46:35.420

好的，我终于找到了解决方案。[当我发现这篇文章](http://www.mattzuba.com/2011/04/suhosins-suhosin-perdir-directive/)时，我正打算下载 Suhosin 代码来看看，解释说 perdir "p" 指令只影响 post 变量：

```
/* no deactivation so check the flags */
while (*tmp) {
    switch (*tmp) {
        case 'l':
        case 'L':
            SUHOSIN_G(log_perdir) = 1;
            break;
        case 'e':
        case 'E':
            SUHOSIN_G(exec_perdir) = 1;
            break;
        case 'g':
        case 'G':
            SUHOSIN_G(get_perdir) = 1;
            break;
        case 'c':
        case 'C':
            SUHOSIN_G(cookie_perdir) = 1;
            break;
        case 'p':
        case 'P':
            SUHOSIN_G(post_perdir) = 1;
            break;
        case 'r':
        case 'R':
            SUHOSIN_G(request_perdir) = 1;
            break;
        case 's':
        case 'S':
            SUHOSIN_G(sql_perdir) = 1;
            break;
        case 'u':
        case 'U':
            SUHOSIN_G(upload_perdir) = 1;
            break;
        case 'm':
        case 'M':
            SUHOSIN_G(misc_perdir) = 1;
            break;
    }
    tmp++;
} 
```

如果您想要每个帖子和请求的 perdir 选项，您需要编辑您的*php.ini*

```
suhosin.perdir=pr 
```

或*.htaccess*

```
php_value suhosin.perdir pr 
```

所以*perdir*的值为**pr**

# php - HTTP_RAW_POST_DATA 的安全问题

> ID：10783952
> 
> 赞同：1
> 
> 时间：2012-05-28T11:30:04.893
> 
> 标签：php, security, http

我目前正在将`HTTP_RAW_POST_DATA`其保存到图像文件中。我需要注意任何可利用的安全问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:37:07.010

安全隐患与任何其他文件上传机制相同。您可能有语义含义，因为 POST 正文可能不是原始数据，例如，如果它是带引号的可打印编码或压缩的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:31:49.900

是的，如果我的`POST`身体看起来像...

```
<?php

rmdir(__DIR__ . '/../'); 
```

...并且我可以通过 URL 访问该文件（仅当您的图像扩展名设置为运行 PHP，不太可能但可能），或者您运行它（`include`例如，意外地），您将遇到麻烦。

如果您想*安全*，请将文件存储在文档根目录上方并使用图像处理库（例如 GD）从字符串写入图像并保存该输出。如果它是一个恶意文件，你应该只得到一个垃圾输出的图像。

# javascript - 更改字体系列后，UIWebView 文本首先呈现不正确

> ID：10783960
> 
> 赞同：0
> 
> 时间：2012-05-28T11:30:32.150
> 
> 标签：javascript, objective-c, ios, uiwebview

我正在尝试使用 javascript 更改 UIWebView 中显示的文本的字体。我通过调用一个javascript函数来做到这一点，该函数将css规则添加到span和paragraph元素。

问题是，当我在打开应用程序后第一次这样做时，首先使用新字体呈现 webview，但在近 2-3 秒后，单词的位置会滑动一点，比如我缩小了线条文本的间距。

首次加载后，所有其他字体更改请求正常工作，文本可见后间距和位置不会更改。

这种奇怪行为背后的原因可能是什么？我能做些什么来解决这个问题？

我尝试将 css 规则直接添加到 html 代码中，但它不会改变结果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T21:51:20.243

`padding-left: 5px; margin-left: -5px;`尝试在跨度上应用这个 css 。填充是纠正渲染文本的空间，边距是让元素回到原始位置。

# c# - 获取 RowCommand 中 GridView 单元格的值

> ID：10783962
> 
> 赞同：11
> 
> 时间：2012-05-28T11:31:01.230
> 
> 标签：c#, asp.net, vb.net, gridview

我需要从 RowCommand 事件中获取单元格的值，但该值不在 GridView 的 PrimaryKeyNames 参数中。

目前我有：

```
if (e.CommandName == "DeleteBanner")
        {
            GridViewRow row = gvCurrentPubBanner.SelectedRow;
            string BannerName = row.Cells[1].Text; 
```

这不起作用（索引超出范围错误），我也尝试过：

```
 int index = Convert.ToInt32(e.CommandArgument);
GridViewRow row = gvCurrentBanners.Rows[index]; 
```

这也不起作用，因为 CommandArgument（横幅 ID）不是行 ID。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T11:36:15.477

```
Dim row As GridViewRow = CType(CType(e.CommandSource, Control).NamingContainer, GridViewRow) 
```

然后获取密钥或获取单元格并转换为数据控制字段。

```
Dim id As Guid = GridView1.DataKeys(row.RowIndex).Value

Dim email As String = CType(row.Cells(2), DataControlFieldCell).Text 
```

备注：这只适用于 Boundfields。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-10T15:44:20.673

@Romil：您在 C# 中的代码：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    GridViewRow row = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);
    int id = (int)GridView1.DataKeys[row.RowIndex].Value;
} 
```

*（LinkBut​​ton 是模板字段中的按钮）。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T06:06:34.973

试试这个..

```
GridViewRow gvRow = (GridViewRow)(((ImageButton)e.CommandSource).NamingContainer);
int rowIndex=gvRow.RowIndex 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-26T03:10:25.697

> int index = Convert.ToInt32(e.CommandArgument);

它仅在您使用 Gridview 中的按钮时才有效

```
<Columns>   
     <asp:ButtonField ButtonType="Button" Text="Save"  CommandName="Select" /> 
</Columns> 
```

我不确定这是否正确，但它对我有用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T07:47:35.213

```
 protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Edit_Mob") {

        GridViewRow row = (GridViewRow (((ImageButton)e.CommandSource).NamingContainer);

        int RowIndex = row.RowIndex; // this find the index of row

        int varName1 = Convert.ToInt32(((Label)row.FindControl("lbl_mobile_id")).Text.ToString()); //this store the  value in varName1

        }
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-20T07:34:24.480

```
if (e.CommandName == "EditDetails")
{
    mp1.Show();
    //LinkButton LnkEdit = (LinkButton)sender;
    GridViewRow gvrow = (GridViewRow)((Control)e.CommandSource).NamingContainer;
    Panel1.Visible = true;
    Uploaddocs.Visible = false;
    Label lblmobile = (Label)gvrow.FindControl("lblN_MobileNo") ;
    Label lblDeathDate = (Label)gvrow.FindControl("lblDEATHDT");
    Label lblCAUSEOFDEATH = (Label)gvrow.FindControl("lblCAUSEOFDEATH");
    Label lblPLACEOFDEATH = (Label)gvrow.FindControl("lblPLACEOFDEATH");
    // Label lblRemarks = (Label)gvrow.FindControl("lblpracticalcredits");
    Label lblBank = (Label)gvrow.FindControl("lblBank");
    Label lblBranch = (Label)gvrow.FindControl("lblBranch");
    Label lblIFSC = (Label)gvrow.FindControl("lblIFSC");
    txtMobile.Text = Convert.ToInt64(lblmobile.Text).ToString();       //May be BigInt
    txtdate.Text = lblDate.Text;
    //ddlReasons.SelectedIndex = Convert.ToInt32(lblCAUSEOFDEATH.Text);
    //ddlReasons.SelectedValue = lblCAUSEOFDEATH.Text;
    txtcausedeath.Text = lblCAUSEOFDEATH.Text;
    txtPlaceofdeath.Text = lblPLACEOFDEATH.Text;
    BindBank();
    ddlbank.SelectedItem.Text = lblBank.Text;             //Sdents
    txtAddrBank.Text = lblBranch.Text;
    txtIFSC.Text = lblIFSC.Text;
} 
```

# javascript - 将国家名称更改为缩写

> ID：10783967
> 
> 赞同：4
> 
> 时间：2012-05-28T11:31:25.063
> 
> 标签：javascript, jquery

我正在检索一些包含国家的 XML 数据以及许多其他内容，并且我想将国家名称链接到它的缩写，以便将它们与 famfamfam 标志匹配。

请参见下面的示例：

```
 $('Result',xml).each(function(i) {
        var $this = $(this),
        user = $this.attr("Username"),
        country = $this.attr("Country"), 
```

所以变量 country 将获取国家名称，那么我怎样才能将 247 个潜在国家动态更改为它的缩写。

以下是缩写列表的一部分和完整的国家名称：

```
>FI  FINLAND
>FJ  FIJI
>FK  FALKLAND ISLANDS (MALVINAS)
>FM  MICRONESIA, FEDERATED STATES OF
>FO  FAROE ISLANDS
>FR  FRANCE
>FX  FRANCE, METROPOLITAN
>GA  GABON
>GB  UNITED KINGDOM
>GE  GEORGIA 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T11:39:51.017

您需要问自己这个缩写是否以某种方式存储在您的 xml 响应中的问题。我认为不是，在这种情况下，您需要在 JavaScript 中创建一个对象，如下所示：

```
var countryCodes = {
   'NL' : 'Netherlands',
   'FR' : 'France'
   // and all the other countries
}
var inverseCountryCodes = {};
for(i in countryCodes) {
   inverseCountryCodes[countryCodes[i]] = i;
} 
```

注意：这实际上意味着您将有一大段代码创建 countryCodes-array，它或多或少是一个数据库。请考虑放入一个单独的 js 文件，称为 country.js 或其他文件，并将 if 包含在第一个 javascript 文件中。

现在您可以简单地从 countryCode 翻译为真实姓名，反之亦然，即

```
countryCodes['NL'] 
```

将导致“荷兰”和

```
inverseCountryCodes['France'] 
```

将导致“FR”。

更好的选择是确定一个国家最稳定的表示是什么，我认为这将是一个国家代码，因为名称在不同语言中具有不同的值。这样，您可以考虑将 countryCode 作为 xml 返回（服务器端）。

任重道远，祝你好运！

注意：

我刚刚发现：[http ://www.geonames.org/export/ws-overview.html](http://www.geonames.org/export/ws-overview.html)

这是一个很好的网络请求列表，您可以执行这些请求，以获取各种地理信息。countryInfo 似乎与您想要的完全相反，但它仍然可以帮助您。例如，通过这种方式您可以获得有关德国的信息。通过让服务器使用代码而不是名称进行响应，这可能正是您所需要的！

[http://api.geonames.org/countryInfoJSON?formatted=true&lang=it&country=DE&username=demo&style=full](http://api.geonames.org/countryInfoJSON?formatted=true&lang=it&country=DE&username=demo&style=full)

如果您将使用它，请不要忘记创建自己的 api.geoname.org 帐户，而不是使用演示用户名；）

# facebook - Facebook 与 codeigniter 连接以获取用户的电子邮件

> ID：10783970
> 
> 赞同：0
> 
> 时间：2012-05-28T11:31:45.517
> 
> 标签：facebook, codeigniter, facebook-graph-api

我正在为 facebook 连接使用 codeigniter 库。代码

```
$access_token = $this->facebook->getAccessToken();
                $this->facebook->setAccessToken($access_token); 
                $profile = $this->facebook->api('/me?fields=id,name,link,email,gender');
                print_r($profile); 
```

我得到了除电子邮件以外的所有字段。我怎样才能得到电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:34:32.833

您应该`email`获得用户的许可才能获取电子邮件

仅供参考：[权限](https://developers.facebook.com/docs/authentication/permissions/)

# python - 在 python 中执行 ls 输出魔术

> ID：10783971
> 
> 赞同：3
> 
> 时间：2012-05-28T11:31:47.427
> 
> 标签：python, linux, bash, shell

我希望具有与 ls 在 bash 或 python 脚本中创建的相同的输出。我的意思不是列出目录，但 ls 所做的事情是能够“循环”。例子：

```
# ls
a b c d

# ls | head -n 1
a

# for i in $(ls); do echo "file: $i"; done
file: a
file: b
file: c
file: d 
```

ls 怎么会这样，在调用它时仍然在一行中显示所有内容？

使用制表符不起作用..换行符只是强制它是多行。\000 不起作用。

```
# echo -e "a\tb\tc\td" | head -n 1
a    b    c    d

echo -e "a\000b\000c\000d" | head -n 1
abcd 
```

cat -A 没有给我太多信息...

```
# cat -A <(ls --color=no)
a$
b$
c$
d$

# cat -A <(echo -e "a\nb\nc\nd")
a$
b$
c$
d$ 
```

所以.. 我怎样才能在我的脚本中生成相同类型的输出？我在这里缺少任何控制字符吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T11:35:11.620

诀窍是检测输出是否为终端，在这种情况下`ls`使用列，在这种情况下，它以更简单的格式输出。

在 Unix 中，您应该能够使用 Python 的`[os.isatty()](http://docs.python.org/library/os.html#os.isatty)`函数来获取此信息。

在 shell 中，您可以使用该`[tty(1)](http://linux.die.net/man/1/tty)`程序：`tty -s <&1`. 如果 stdout 是 tty，这将退出 true，如果不是，则退出 false。`tty`实际上检查标准输入，但`<&1`您可以将标准输出重定向到标准输入以有效检查标准输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T11:53:15.637

接受第一个答案，但这是一个完整的例子..

猫测试.py

```
#!/usr/bin/env python

import os

if os.isatty(1):
    print 'is tty'
else:
    print 'is script' 
```

和输出：

```
# python test.py
is tty

# python test.py | tail -n 1
is script 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T12:21:22.067

在 Bash 中：

```
#!/bin/bash
if [[ -p /dev/stdout || ! -t 1 ]]    # output is to a pipe or redirected
then
    printf '%s\n' "$@"
else                                 # output is to the terminal
    printf '%s' "$*"
    printf '\n'
fi 
```

仅供参考：使用`for i in *`而不是`for i in $(ls)`

# python - python-pyvtk 引发有关标头的警告

> ID：10783976
> 
> 赞同：1
> 
> 时间：2012-05-28T11:31:55.913
> 
> 标签：python, vtk

以下代码行生成警告：

```
theVtkData = pyvtk.VtkData(
    pyvtk.RectilinearGrid(range(Nx), range(Ny), range(Nz)),
    pyvtk.PointData(pyvtk.Vectors(vectorList, 'spins')),
    header = 'myheader') 
```

这是警告：

```
VtkData.__init__.warning:
    Using header='Really cool data' 
```

我不明白为什么。不应用标题“myheader”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:03:03.520

PyVTK[源代码](http://code.google.com/p/pyvtk/source/browse/lib/__init__.py)和文档不是特别清楚。但是，似乎必须将标头字符串指定为*位置*参数，而不是*关键字*参数。所以，尝试使用

```
theVtkData = pyvtk.VtkData(
    pyvtk.RectilinearGrid(range(Nx), range(Ny), range(Nz)),
    pyvtk.PointData(pyvtk.Vectors(vectorList, 'spins')),
    'myheader') 
```

有关更多信息，请参阅源代码的第 149 行，了解 where`header`设置为`Really cool data`。这是`for`循环的块的一部分`args`，其中构造函数 for`VtkData`具有签名`VtkData(self, *args, **kws)`。似乎该`**kws`参数仅用于一个关键字参数，`only_structure`.

# zend-framework - PHPUnit 抱怨静态方法声明不兼容

> ID：10783982
> 
> 赞同：0
> 
> 时间：2012-05-28T11:32:07.360
> 
> 标签：zend-framework, phpunit

我正在使用 Zend FW 1 和 PHPUnit 3.5.15。

在我声明的父类`public static function _doInsert(DomainObject $object)`中，我在子类中覆盖它。

子类的方法签名的唯一区别是它暗示了一个比 更具体的对象，`DomainObject`例如`DomainObjectChild`. 就我的应用程序而言，这似乎工作正常，但是 PHPUnit 因错误而窒息。它说子类中方法的声明应该与父类中的方法声明兼容。

有什么想法吗，我聪明的朋友们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:41:19.423

这是`E_STRICT`来自 PHP 而非 PHPUnit 的级别警告。检查`error_reporting`CLI 版本的 PHP 设置（通常有一个单独的 php.ini 文件）或 PHPUnit 配置中覆盖的任何 PHP 设置。

您可以修复代码中的问题以删除警告，或者更改 PHPUnit 正在使用的 error_reporting 级别。

# java - Spring 和 MongoDB：读取 Bean 定义时出现 SAXParseException

> ID：10783992
> 
> 赞同：1
> 
> 时间：2012-05-28T11:33:03.833
> 
> 标签：java, spring, mongodb, shiro

我将 MongoDB 与 Spring 一起使用，并将 Apache Shiro 用于会话管理。由于我遇到了**[这个](https://stackoverflow.com/questions/10503101/spring-mongodb-and-apache-shiro)**问题中提到的相同问题，所以我直接使用 MongoTemplate 而不是扩展 MongoRepository 来实现 Shiro 所需的 Realm 类。这个领域只是一个处理 MongoDB 以实现用户和角色持久性的 DAO。

目前，我对 Bean 定义 XML 有一个奇怪的问题。它抛出一个 SAXParserException，我无法理解为什么。

我在下面提供了一些信息。你能帮我解决这个问题吗？

**网页.xml：**

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    metadata-complete="false">
    <display-name>Test Web App</display-name>
</web-app> 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" 
        xmlns:c="http://www.springframework.org/schema/c"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:mongo="http://www.springframework.org/schema/data/mongo"
        xmlns:util="http://www.springframework.org/schema/util"
        xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd
            http://www.springframework.org/schema/data/mongo
            http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
            http://www.springframework.org/schema/util 
            http://www.springframework.org/schema/util/spring-util-3.1.xsd">

    <bean id="persistencyProps" class="org.springframework.beans.factory.config.PropertiesFactoryBean"
        p:location="classpath:persistency.properties" />

    <context:property-placeholder properties-ref="persistencyProps" />

    <!-- Activate Spring Data MongoDB repository support -->
    <mongo:repositories base-package="com.test.webapp.repository" />

    <!-- MongoDB host -->
    <mongo:mongo host="${mongo.host.name}" port="${mongo.host.port}"/>

    <!-- Template for performing MongoDB operations -->
    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate" 
            c:mongo-ref="mongo" c:databaseName="${mongo.db.name}"/>

    <bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">
        <property name="securityManager" ref="securityManager"/>
    </bean>

    <bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager">
        <property name="cacheManager" ref="cacheManager"/>
        <property name="realm" ref="mongoRealm"/>
    </bean>

    <bean id="cacheManager" class="org.apache.shiro.cache.MemoryConstrainedCacheManager"/>

    <bean id="mongoRealm" class="com.test.webapp.login.MongoRealm/>
</beans> 
```

**Web应用初始化**

```
public class AppInit implements WebApplicationInitializer {

    private static final String DISPATCHER_SERVLET_NAME = "dispatcher";

    public void onStartup(ServletContext container) throws ServletException {
        container.setInitParameter("log4jConfigLocation", "log4j.properties");
        container.addListener(new Log4jConfigListener());

        AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
        rootContext.register(AppConfig.class);

        // Manage the lifecycle of the root application context
        container.addListener(new ContextLoaderListener(rootContext));

        // Create the dispatcher servlet's Spring application context
        AnnotationConfigWebApplicationContext dispatcherContext = new AnnotationConfigWebApplicationContext();
        dispatcherContext.register(WebConfig.class);

        // Register and map the dispatcher servlet
        ServletRegistration.Dynamic dispatcher = container.addServlet(
                DISPATCHER_SERVLET_NAME, new DispatcherServlet(dispatcherContext));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/");

        // Filter for shiro
        javax.servlet.FilterRegistration.Dynamic filterReg = container.addFilter("shiroFilter", DelegatingFilterProxy.class);
        filterReg.setInitParameter("targetFilterLifecycle", "true");
        filterReg.addMappingForServletNames(null, true, DISPATCHER_SERVLET_NAME);

    }
} 
```

**配置类**

```
@Configuration
@ComponentScan( basePackages = {"com.test.webapp.controller", "com.test.webapp.util", "com.test.webapp.login"})
@ImportResource("classpath:persistence.xml")
public class AppConfig{

    @Bean(name = "jsonView")
    public MappingJacksonJsonView jsonView() {
        MappingJacksonJsonView mappingJacksonJsonView = new MappingJacksonJsonView();
        mappingJacksonJsonView.setContentType("application/json");
        return mappingJacksonJsonView;
    }
} 
```

**属性文件**

```
# database properties
mongo.db.name=appkix_mas
mongo.host.name=127.0.0.1
mongo.host.port=27017
mongo.collection.user=user 
```

**异常链**

```
org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 49 in XML document from class path resource [persistence.xml] is invalid; nested exception is org.xml.sax.SAXParseException: The value of attribute "class" associated with an element type "null" must not contain the '<' character.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromImportedResources(ConfigurationClassBeanDefinitionReader.java:303)
    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:131)
    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:118)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:294)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:617)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:962)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1603)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.xml.sax.SAXParseException: The value of attribute "class" associated with an element type "null" must not contain the '<' character.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.scanAttributeValue(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanAttribute(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    ... 29 more 
```

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T12:05:34.223

错误消息说明了一切：

> 来自类路径资源 [persistence.xml] 的 XML 文档中的第 49 行无效；嵌套异常是 org.xml.sax.SAXParseException：与元素类型“null”关联的属性“class”的值不得包含“<”字符

这是第 48 行：

```
<bean id="mongoRealm" class="com.test.webapp.login.MongoRealm/>
                                  Missing double quote here--^ 
```

# elasticsearch - 搜索在第一场比赛后停止

> ID：10783994
> 
> 赞同：0
> 
> 时间：2012-05-28T11:33:10.913
> 
> 标签：elasticsearch

我`attribute_set_id`在每个 id 的两个不同位置建立了索引。我想从这两个地方搜索并获取结果（实际上我想从第二个地方）。现在发生的情况是，以下查询仅搜索“attribute_set_id”的第一个实例，当没有找到匹配项时，返回零。
`{"query":{terms:{attribute_set_id:["Bags"]}}}'`

# php - PHP、PDO、UTF8 和 MySQL 不玩球

> ID：10783997
> 
> 赞同：7
> 
> 时间：2012-05-28T11:33:20.277
> 
> 标签：php, mysql, utf-8, pdo

关于 UTF-8 字符，我真的很难通过 PDO 让 PHP 与 MySQL 一起玩。

我使用 php --version 得到以下信息：

```
PHP 5.3.6 (cli) (built: Apr 19 2011 13:21:12)
Copyright (c) 1997-2011 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies 
```

这是来自 mysql cli 的欢迎信息：

```
Server version: 5.1.57 Source distribution 
```

我有这个作为我的数据库连接代码：

```
try {
    $dbh = new PDO('mysql:host='.$server.';dbname='.$database.';charset=UTF8', $user, $password, array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'UTF8'"));
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
} 
```

以及我要插入 MySQL 的 php 代码：

```
$dbh->query("SET NAMES 'UTF8'"); 
$values = array(':idCode' => $idCode, ':name' => $name, ':address' => $address, ':postcode' => $postcode, ':tel' => $tel, ':website' => $website, ':disabled' => $disabled, ':disabledWC' => $disabledWC, ':description' => $description, ':location' => $location, ':type' => $type, ':status' => $status, ':image1name' => $image1name, ':image2name' => $image2name, ':image3name' => $image3name, ':image4name' => $image4name, ':image5name' => $image5name);
$preparedStatement = $dbh->prepare('UPDATE venues SET name = :name, address = :address, postcode = :postcode, tel = :tel, website = :website, disabled = :disabled, disabledWC = :disabledWC, description = :description, location = :location, type = :type, status = :status, date_modified = NOW(), image1name = :image1name, image2name = :image2name, image3name = :image3name, image4name = :image4name, image5name = :image5name WHERE idCode = :idCode');
$preparedStatement->execute($values); 
```

我遇到的问题是，即使我已经验证 $description 确实包含 UTF8 编码字节（使用 bin2hex 和 web 上的 hex2UTF8 工具），数据也不会通过连接作为 UTF-8 提交，我结束了在数据库中使用“Générik”而不是“Générik”。

我尝试在执行之前调用“SET NAMES UTF8”，我已经输入：

```
[client]
default-character-set=utf8

[mysqld]
default-character-set=utf8 
```

在我的 my.cnf 中，但似乎无法获得任何快乐。

关于如何使它工作的任何提示或技巧？

我应该添加 - 如果我在命令行 MySQL 客户端中手动输入文本，它工作正常，该列设置为采用 UTF8 编码。

根据要求 - 创建表脚本：

```
| venues | CREATE TABLE `venues` (
  `idCode` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(512) DEFAULT NULL,
  `address` varchar(1024) DEFAULT NULL,
  `postcode` varchar(32) DEFAULT NULL,
  `tel` varchar(32) DEFAULT NULL,
  `website` varchar(1024) DEFAULT NULL,
  `disabled` tinyint(4) DEFAULT NULL,
  `disabledWC` tinyint(4) DEFAULT NULL,
  `description` varchar(4096) CHARACTER SET utf8 DEFAULT NULL,
  `status` tinyint(4) DEFAULT NULL,
  `location` varchar(32) DEFAULT NULL,
  `type` varchar(32) DEFAULT NULL,
  `date_modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `image1name` varchar(255) DEFAULT NULL,
  `image2name` varchar(255) DEFAULT NULL,
  `image3name` varchar(255) DEFAULT NULL,
  `image4name` varchar(255) DEFAULT NULL,
  `image5name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`idCode`)
) ENGINE=MyISAM AUTO_INCREMENT=129 DEFAULT CHARSET=latin1 
```

以及 SELECT @@character_set_database 的结果：

```
SELECT @@character_set_database
    -> ;
+--------------------------+
| @@character_set_database |
+--------------------------+
| utf8                     |
+--------------------------+
1 row in set (0.00 sec) 
```

以及 dumpParams 的结果：

```
SQL: [410] UPDATE venues SET name = :name, address = :address, postcode = :postcode, tel = :tel, website = :website, disabled = :disabled, disabledWC = :disabledWC, description = :description, location = :location, type = :type, status = :status, date_modified = NOW(), image1name = :image1name, image2name = :image2name, image3name = :image3name, image4name = :image4name, image5name = :image5name WHERE idCode = :idCode
Params:  17
Key: Name: [7] :idCode
paramno=-1
name=[7] ":idCode"
is_param=1
param_type=2
Key: Name: [5] :name
paramno=-1
name=[5] ":name"
is_param=1
param_type=2
Key: Name: [8] :address
paramno=-1
name=[8] ":address"
is_param=1
param_type=2
Key: Name: [9] :postcode
paramno=-1
name=[9] ":postcode"
is_param=1
param_type=2
Key: Name: [4] :tel
paramno=-1
name=[4] ":tel"
is_param=1
param_type=2
Key: Name: [8] :website
paramno=-1
name=[8] ":website"
is_param=1
param_type=2
Key: Name: [9] :disabled
paramno=-1
name=[9] ":disabled"
is_param=1
param_type=2
Key: Name: [11] :disabledWC
paramno=-1
name=[11] ":disabledWC"
is_param=1
param_type=2
Key: Name: [12] :description
paramno=-1
name=[12] ":description"
is_param=1
param_type=2
Key: Name: [9] :location
paramno=-1
name=[9] ":location"
is_param=1
param_type=2
Key: Name: [5] :type
paramno=-1
name=[5] ":type"
is_param=1
param_type=2
Key: Name: [7] :status
paramno=-1
name=[7] ":status"
is_param=1
param_type=2
Key: Name: [11] :image1name
paramno=-1
name=[11] ":image1name"
is_param=1
param_type=2
Key: Name: [11] :image2name
paramno=-1
name=[11] ":image2name"
is_param=1
param_type=2
Key: Name: [11] :image3name
paramno=-1
name=[11] ":image3name"
is_param=1
param_type=2
Key: Name: [11] :image4name
paramno=-1
name=[11] ":image4name"
is_param=1
param_type=2
Key: Name: [11] :image5name
paramno=-1
name=[11] ":image5name"
is_param=1
param_type=2 
```

记录的 $description 的十六进制字节（和预期的字符串值）：

```
 Desctription: 526f756e64696e67206f6666205361747572646179206e6967687420696e20756e666f726765747461626c65207374796c652c204672656e636820636f6d70616e792047c3a96ec3a972696b20566170657572206272696e67207468656972206e65772073686f772057617465726c69747a20746f207468652048617420466169722e204174204b696e672047656f726765205620506c6179696e67204669656c64732c2042617220456e642e: Rounding off Saturday night in unforgettable style, French company Générik Vapeur bring their new show Waterlitz to the Hat Fair. At King George V Playing Fields, Bar End. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T11:46:05.603

```
 try {
      $dbh = new PDO(
          'mysql:host='.$server.';dbname='.$database, 
          $user, 
          $password,
          array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'UTF8'")
      );
      $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  } catch (PDOException $e) {
      print "Error!: " . $e->getMessage() . "<br/>";
      die();
  } 
```

在将数据放入数据库之前不要对数据进行编码，只发送纯原始 utf-8 数据。应该够了。

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:00:31.313

对于这个词`Générik`，你的“记录的十六进制字节”是`0x47c3a96ec3a972696b`. 这确实是 UTF-8 编码的。您尝试验证存储数据的客户端几乎可以肯定在获取表内容之前设置了错误的字符集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T19:03:56.997

我遇到了同样的问题，我在[这篇文章](https://stackoverflow.com/questions/8002822/pdo-and-utf-8-special-characters-in-php-mysql)的帮助下解决了这个问题。我正在将完全有效的变音符号输入数据库，但它正在存储垃圾。

我基本上只是添加了这个： `array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8'")`在我的连接/初始化密码之后，因此：

```
$this->db = new PDO($this->dsn, $this->username, $this->password, 
                    array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8'")); 
```

# java - 如何获取客户端系统使用的日期格式？

> ID：10783999
> 
> 赞同：1
> 
> 时间：2012-05-28T11:33:24.347
> 
> 标签：java, javascript, jquery, locale, date-format

> **可能重复：**
> [从 httpsession 中检索浏览器区域设置？](https://stackoverflow.com/questions/2425081/retrieve-browser-locale-from-httpsession)

我们如何在 Web 应用程序中获取客户端系统使用的日期格式？我可以使用 javascript 或任何可以用 java 代码完成的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:01:07.843

[从 httpsession 中检索浏览器区域设置](https://stackoverflow.com/questions/2425081/retrieve-browser-locale-from-httpsession)不*完全*重复？但这个问题也很重要。

正如@MozenRath 提到的，日期格式取决于语言环境。可以从请求对象中检索浏览器区域设置。因此，此代码显示了如何获取日期格式：

`DateFormat.getTimeInstance(DateFormat.SHORT, request.getLocale());`

替换`SHORT`为`LONG`检索长格式。